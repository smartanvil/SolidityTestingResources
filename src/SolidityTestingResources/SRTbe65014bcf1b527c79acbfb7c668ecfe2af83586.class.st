Class {
	#name : #SRTbe65014bcf1b527c79acbfb7c668ecfe2af83586,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbe65014bcf1b527c79acbfb7c668ecfe2af83586 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogV29ybGRDb2luOiBodHRwczovL3dvcmxkY29pbi5jYXNoCiAqLwoKLy89PT09PT0gT3BlbiBaZXBwZWxpbiBMaWJyYXJ5ID09PT09Ci8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBTYWZlRVJDMjAKICogQGRldiBXcmFwcGVycyBhcm91bmQgRVJDMjAgb3BlcmF0aW9ucyB0aGF0IHRocm93IG9uIGZhaWx1cmUuCiAqIFRvIHVzZSB0aGlzIGxpYnJhcnkgeW91IGNhbiBhZGQgYSBgdXNpbmcgU2FmZUVSQzIwIGZvciBFUkMyMDtgIHN0YXRlbWVudCB0byB5b3VyIGNvbnRyYWN0LAogKiB3aGljaCBhbGxvd3MgeW91IHRvIGNhbGwgdGhlIHNhZmUgb3BlcmF0aW9ucyBhcyBgdG9rZW4uc2FmZVRyYW5zZmVyKC4uLilgLCBldGMuCiAqLwpsaWJyYXJ5IFNhZmVFUkMyMCB7CiAgZnVuY3Rpb24gc2FmZVRyYW5zZmVyKEVSQzIwQmFzaWMgdG9rZW4sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIGludGVybmFsIHsKICAgIGFzc2VydCh0b2tlbi50cmFuc2Zlcih0bywgdmFsdWUpKTsKICB9CgogIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlckZyb20oRVJDMjAgdG9rZW4sIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgYXNzZXJ0KHRva2VuLnRyYW5zZmVyRnJvbShmcm9tLCB0bywgdmFsdWUpKTsKICB9CgogIGZ1bmN0aW9uIHNhZmVBcHByb3ZlKEVSQzIwIHRva2VuLCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIGludGVybmFsIHsKICAgIGFzc2VydCh0b2tlbi5hcHByb3ZlKHNwZW5kZXIsIHZhbHVlKSk7CiAgfQp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgovKioKICogQHRpdGxlIENvbnRyYWN0cyB0aGF0IHNob3VsZCBub3Qgb3duIEV0aGVyCiAqIEBhdXRob3IgUmVtY28gQmxvZW1lbiA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjYwMTIwNTBkMDMwZjIwNTIiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+z4AuY29tPgogKiBAZGV2IFRoaXMgdHJpZXMgdG8gYmxvY2sgaW5jb21pbmcgZXRoZXIgdG8gcHJldmVudCBhY2NpZGVudGFsIGxvc3Mgb2YgRXRoZXIuIFNob3VsZCBFdGhlciBlbmQgdXAKICogaW4gdGhlIGNvbnRyYWN0LCBpdCB3aWxsIGFsbG93IHRoZSBvd25lciB0byByZWNsYWltIHRoaXMgZXRoZXIuCiAqIEBub3RpY2UgRXRoZXIgY2FuIHN0aWxsIGJlIHNlbmQgdG8gdGhpcyBjb250cmFjdCBieToKICogY2FsbGluZyBmdW5jdGlvbnMgbGFiZWxlZCBgcGF5YWJsZWAKICogYHNlbGZkZXN0cnVjdChjb250cmFjdF9hZGRyZXNzKWAKICogbWluaW5nIGRpcmVjdGx5IHRvIHRoZSBjb250cmFjdCBhZGRyZXNzCiovCmNvbnRyYWN0IEhhc05vRXRoZXIgaXMgT3duYWJsZSB7CgogIC8qKgogICogQGRldiBDb25zdHJ1Y3RvciB0aGF0IHJlamVjdHMgaW5jb21pbmcgRXRoZXIKICAqIEBkZXYgVGhlIGBwYXlhYmxlYCBmbGFnIGlzIGFkZGVkIHNvIHdlIGNhbiBhY2Nlc3MgYG1zZy52YWx1ZWAgd2l0aG91dCBjb21waWxlciB3YXJuaW5nLiBJZiB3ZQogICogbGVhdmUgb3V0IHBheWFibGUsIHRoZW4gU29saWRpdHkgd2lsbCBhbGxvdyBpbmhlcml0aW5nIGNvbnRyYWN0cyB0byBpbXBsZW1lbnQgYSBwYXlhYmxlCiAgKiBjb25zdHJ1Y3Rvci4gQnkgZG9pbmcgaXQgdGhpcyB3YXkgd2UgcHJldmVudCBhIHBheWFibGUgY29uc3RydWN0b3IgZnJvbSB3b3JraW5nLiBBbHRlcm5hdGl2ZWx5CiAgKiB3ZSBjb3VsZCB1c2UgYXNzZW1ibHkgdG8gYWNjZXNzIG1zZy52YWx1ZS4KICAqLwogIGZ1bmN0aW9uIEhhc05vRXRoZXIoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA9PSAwKTsKICB9CgogIC8qKgogICAqIEBkZXYgRGlzYWxsb3dzIGRpcmVjdCBzZW5kIGJ5IHNldHRpbmdzIGEgZGVmYXVsdCBmdW5jdGlvbiB3aXRob3V0IHRoZSBgcGF5YWJsZWAgZmxhZy4KICAgKi8KICBmdW5jdGlvbigpIGV4dGVybmFsIHsKICB9CgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgYWxsIEV0aGVyIGhlbGQgYnkgdGhlIGNvbnRyYWN0IHRvIHRoZSBvd25lci4KICAgKi8KICBmdW5jdGlvbiByZWNsYWltRXRoZXIoKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgYXNzZXJ0KG93bmVyLnNlbmQodGhpcy5iYWxhbmNlKSk7CiAgfQp9CgovKioKICogQHRpdGxlIENvbnRyYWN0cyB0aGF0IHNob3VsZCBub3Qgb3duIENvbnRyYWN0cwogKiBAYXV0aG9yIFJlbWNvIEJsb2VtZW4gPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJkZmFkYmFiMmJjYjA5ZmVkIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPs+ALmNvbT4KICogQGRldiBTaG91bGQgY29udHJhY3RzIChhbnl0aGluZyBPd25hYmxlKSBlbmQgdXAgYmVpbmcgb3duZWQgYnkgdGhpcyBjb250cmFjdCwgaXQgYWxsb3dzIHRoZSBvd25lcgogKiBvZiB0aGlzIGNvbnRyYWN0IHRvIHJlY2xhaW0gb3duZXJzaGlwIG9mIHRoZSBjb250cmFjdHMuCiAqLwpjb250cmFjdCBIYXNOb0NvbnRyYWN0cyBpcyBPd25hYmxlIHsKCiAgLyoqCiAgICogQGRldiBSZWNsYWltIG93bmVyc2hpcCBvZiBPd25hYmxlIGNvbnRyYWN0cwogICAqIEBwYXJhbSBjb250cmFjdEFkZHIgVGhlIGFkZHJlc3Mgb2YgdGhlIE93bmFibGUgdG8gYmUgcmVjbGFpbWVkLgogICAqLwogIGZ1bmN0aW9uIHJlY2xhaW1Db250cmFjdChhZGRyZXNzIGNvbnRyYWN0QWRkcikgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIE93bmFibGUgY29udHJhY3RJbnN0ID0gT3duYWJsZShjb250cmFjdEFkZHIpOwogICAgY29udHJhY3RJbnN0LnRyYW5zZmVyT3duZXJzaGlwKG93bmVyKTsKICB9Cn0KCi8qKgogKiBAdGl0bGUgQ29udHJhY3RzIHRoYXQgc2hvdWxkIGJlIGFibGUgdG8gcmVjb3ZlciB0b2tlbnMKICogQGF1dGhvciBTeWxUaQogKiBAZGV2IFRoaXMgYWxsb3cgYSBjb250cmFjdCB0byByZWNvdmVyIGFueSBFUkMyMCB0b2tlbiByZWNlaXZlZCBpbiBhIGNvbnRyYWN0IGJ5IHRyYW5zZmVycmluZyB0aGUgYmFsYW5jZSB0byB0aGUgY29udHJhY3Qgb3duZXIuCiAqIFRoaXMgd2lsbCBwcmV2ZW50IGFueSBhY2NpZGVudGFsIGxvc3Mgb2YgdG9rZW5zLgogKi8KY29udHJhY3QgQ2FuUmVjbGFpbVRva2VuIGlzIE93bmFibGUgewogIHVzaW5nIFNhZmVFUkMyMCBmb3IgRVJDMjBCYXNpYzsKCiAgLyoqCiAgICogQGRldiBSZWNsYWltIGFsbCBFUkMyMEJhc2ljIGNvbXBhdGlibGUgdG9rZW5zCiAgICogQHBhcmFtIHRva2VuIEVSQzIwQmFzaWMgVGhlIGFkZHJlc3Mgb2YgdGhlIHRva2VuIGNvbnRyYWN0CiAgICovCiAgZnVuY3Rpb24gcmVjbGFpbVRva2VuKEVSQzIwQmFzaWMgdG9rZW4pIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICB1aW50MjU2IGJhbGFuY2UgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICB0b2tlbi5zYWZlVHJhbnNmZXIob3duZXIsIGJhbGFuY2UpOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgQ29udHJhY3RzIHRoYXQgc2hvdWxkIG5vdCBvd24gVG9rZW5zCiAqIEBhdXRob3IgUmVtY28gQmxvZW1lbiA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjNhNDg1ZjU3NTk1NTdhMDgiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+z4AuY29tPgogKiBAZGV2IFRoaXMgYmxvY2tzIGluY29taW5nIEVSQzIzIHRva2VucyB0byBwcmV2ZW50IGFjY2lkZW50YWwgbG9zcyBvZiB0b2tlbnMuCiAqIFNob3VsZCB0b2tlbnMgKGFueSBFUkMyMEJhc2ljIGNvbXBhdGlibGUpIGVuZCB1cCBpbiB0aGUgY29udHJhY3QsIGl0IGFsbG93cyB0aGUKICogb3duZXIgdG8gcmVjbGFpbSB0aGUgdG9rZW5zLgogKi8KY29udHJhY3QgSGFzTm9Ub2tlbnMgaXMgQ2FuUmVjbGFpbVRva2VuIHsKCiAvKioKICAqIEBkZXYgUmVqZWN0IGFsbCBFUkMyMyBjb21wYXRpYmxlIHRva2VucwogICogQHBhcmFtIGZyb21fIGFkZHJlc3MgVGhlIGFkZHJlc3MgdGhhdCBpcyB0cmFuc2ZlcnJpbmcgdGhlIHRva2VucwogICogQHBhcmFtIHZhbHVlXyB1aW50MjU2IHRoZSBhbW91bnQgb2YgdGhlIHNwZWNpZmllZCB0b2tlbgogICogQHBhcmFtIGRhdGFfIEJ5dGVzIFRoZSBkYXRhIHBhc3NlZCBmcm9tIHRoZSBjYWxsZXIuCiAgKi8KICBmdW5jdGlvbiB0b2tlbkZhbGxiYWNrKGFkZHJlc3MgZnJvbV8sIHVpbnQyNTYgdmFsdWVfLCBieXRlcyBkYXRhXykgZXh0ZXJuYWwgewogICAgZnJvbV87CiAgICB2YWx1ZV87CiAgICBkYXRhXzsKICAgIHJldmVydCgpOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW19mcm9tXSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CgogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICoKICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCiAgLyoqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKi8KICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgfSBlbHNlIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICB9CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBNaW50YWJsZSB0b2tlbgogKiBAZGV2IFNpbXBsZSBFUkMyMCBUb2tlbiBleGFtcGxlLCB3aXRoIG1pbnRhYmxlIHRva2VuIGNyZWF0aW9uCiAqIEBkZXYgSXNzdWU6ICogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9pc3N1ZXMvMTIwCiAqIEJhc2VkIG9uIGNvZGUgYnkgVG9rZW5NYXJrZXROZXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9Ub2tlbk1hcmtldE5ldC9pY28vYmxvYi9tYXN0ZXIvY29udHJhY3RzL01pbnRhYmxlVG9rZW4uc29sCiAqLwoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCgogIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNlaXZlIHRoZSBtaW50ZWQgdG9rZW5zLgogICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIG1pbnQuCiAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciBjYW5NaW50IHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgIE1pbnQoX3RvLCBfYW1vdW50KTsKICAgIFRyYW5zZmVyKGFkZHJlc3MoMCksIF90bywgX2Ftb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gc3RvcCBtaW50aW5nIG5ldyB0b2tlbnMuCiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIG9ubHlPd25lciBjYW5NaW50IHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgTWludEZpbmlzaGVkKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KCgovLz09PT09PSBCdXJuYWJsZVRva2VuID09PT09Cgpjb250cmFjdCBCdXJuYWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4gewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgQnVyblJld2FyZEluY3JlYXNlZChhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiB2YWx1ZSk7CgogICAgLyoqCiAgICAqIEBkZXYgU2VuZGluZyBldGhlciB0byBjb250cmFjdCBpbmNyZWFzZXMgYnVybmluZyByZXdhcmQgCiAgICAqLwogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHB1YmxpYyB7CiAgICAgICAgaWYobXNnLnZhbHVlID4gMCl7CiAgICAgICAgICAgIEJ1cm5SZXdhcmRJbmNyZWFzZWQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgICAgCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQGRldiBDYWxjdWxhdGVzIGhvdyBtdWNoIGV0aGVyIG9uZSB3aWxsIHJlY2VpdmUgaW4gcmV3YXJkIGZvciBidXJuaW5nIHRva2VucwogICAgICogQHBhcmFtIF9hbW91bnQgb2YgdG9rZW5zIHRvIGJlIGJ1cm5lZAogICAgICovCiAgICBmdW5jdGlvbiBidXJuUmV3YXJkKHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1Nil7CiAgICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZS5tdWwoX2Ftb3VudCkuZGl2KHRvdGFsU3VwcGx5KTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBCdXJucyB0b2tlbnMgYW5kIHNlbmQgcmV3YXJkCiAgICAqIFRoaXMgaXMgaW50ZXJuYWwgZnVuY3Rpb24gYmVjYXVzZSBpdCBET0VTIE5PVCBjaGVjayAKICAgICogaWYgX2Zyb20gaGFzIGFsbG93YW5jZSB0byBidXJuIHRva2Vucy4KICAgICogSXQgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiB0cmFuc2ZlcigpIGFuZCB0cmFuc2ZlckZyb20oKSB3aGljaCBkbyB0aGlzIGNoZWNrLgogICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gYnVybiB0b2tlbnMgZnJvbQogICAgKiBAcGFyYW0gX2Ftb3VudCBvZiB0b2tlbnMgdG8gYmUgYnVybmVkCiAgICAqLwogICAgZnVuY3Rpb24gYnVybihhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF9hbW91bnQpIGludGVybmFsIHJldHVybnMoYm9vbCl7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX2Ftb3VudCk7CiAgICAgICAgCiAgICAgICAgdWludDI1NiByZXdhcmQgPSBidXJuUmV3YXJkKF9hbW91bnQpOwogICAgICAgIGFzc2VydCh0aGlzLmJhbGFuY2UgLSByZXdhcmQgPiAwKTsKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfYW1vdW50KTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfYW1vdW50KTsKICAgICAgICAvL2Fzc2VydCh0b3RhbFN1cHBseSA+PSAwKTsgLy9DaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2UgdG90YWxTdXBwbHkuc3ViKHZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgICAgIAogICAgICAgIF9mcm9tLnRyYW5zZmVyKHJld2FyZCk7CiAgICAgICAgQnVybihfZnJvbSwgX2Ftb3VudCk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIGFkZHJlc3MoMCksIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFRyYW5zZmVycyBvciBidXJucyB0b2tlbnMKICAgICogQnVybnMgdG9rZW5zIHRyYW5zZmVycmVkIHRvIHRoaXMgY29udHJhY3QgaXRzZWxmIG9yIHRvIHplcm8gYWRkcmVzcwogICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvIG9yIHRva2VuIGNvbnRyYWN0IGFkZHJlc3MgdG8gYnVybi4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiggKF90byA9PSBhZGRyZXNzKHRoaXMpKSB8fCAoX3RvID09IDApICl7CiAgICAgICAgICAgIHJldHVybiBidXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIgCiAgICAqIG9yIGJ1cm5zIHRoZW0gaWYgX3RvIGlzIHRoaXMgY29udHJhY3Qgb3IgemVybyBhZGRyZXNzCiAgICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmKCAoX3RvID09IGFkZHJlc3ModGhpcykpIHx8IChfdG8gPT0gMCkgKXsKICAgICAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKICAgICAgICAgICAgLy9yZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7IC8vQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gYnVybihfZnJvbSwgX3ZhbHVlKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIH0KICAgIH0KCn0KCgoKLy89PT09PT0gV29ybGRDb2luIENvbnRyYWN0cyA9PT09PQoKLyoqCiAqIEB0aXRsZSBXb3JsZENvaW4gdG9rZW4KICovCmNvbnRyYWN0IFdvcmxkQ29pbiBpcyBCdXJuYWJsZVRva2VuLCBNaW50YWJsZVRva2VuLCBIYXNOb0NvbnRyYWN0cywgSGFzTm9Ub2tlbnMgeyAvL01pbnRhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZQogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIldvcmxkIENvaW4gTmV0d29yayI7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJXQ04iOwogICAgdWludDI1NiBwdWJsaWMgZGVjaW1hbHMgPSAxODsKCgogICAgLyoqCiAgICAgKiBBbGxvdyB0cmFuc2ZlciBvbmx5IGFmdGVyIGNyb3dkc2FsZSBmaW5pc2hlZAogICAgICovCiAgICBtb2RpZmllciBjYW5UcmFuc2ZlcigpIHsKICAgICAgICByZXF1aXJlKG1pbnRpbmdGaW5pc2hlZCk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBjYW5UcmFuc2ZlciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBCdXJuYWJsZVRva2VuLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBjYW5UcmFuc2ZlciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBCdXJuYWJsZVRva2VuLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKfQoKLyoqCiAqIEB0aXRsZSBXb3JsZENvaW4gQ3Jvd2RzYWxlCiAqLwpjb250cmFjdCBXb3JsZENvaW5Dcm93ZHNhbGUgaXMgT3duYWJsZSwgSGFzTm9Db250cmFjdHMsIEhhc05vVG9rZW5zIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIHVpbnQzMiBwcml2YXRlIGNvbnN0YW50IFBFUkNFTlRfRElWSURFUiA9IDEwMDsKCiAgICBXb3JsZENvaW4gcHVibGljIHRva2VuOwoKICAgIHN0cnVjdCBSb3VuZCB7CiAgICAgICAgdWludDI1NiBzdGFydDsgICAgICAvL1RpbWVzdGFtcCBvZiBjcm93ZHNhbGUgcm91bmQgc3RhcnQKICAgICAgICB1aW50MjU2IGVuZDsgICAgICAgIC8vVGltZXN0YW1wIG9mIGNyb3dkc2FsZSByb3VuZCBlbmQKICAgICAgICB1aW50MjU2IHJhdGU7ICAgICAgIC8vUmF0ZTogaG93IG11Y2ggVE9LRU4gb25lIHdpbGwgZ2V0IGZvIDEgRVRIIGR1cmluZyB0aGlzIHJvdW5kCiAgICB9CiAgICBSb3VuZFtdIHB1YmxpYyByb3VuZHM7ICAvL0FycmF5IG9mIGNyb3dkc2FsZSByb3VuZHMKCgogICAgdWludDI1NiBwdWJsaWMgZm91bmRlclBlcmNlbnQ7ICAgICAgLy9ob3cgbWFueSB0b2tlbnMgd2lsbCBiZSBzZW50IHRvIGZvdW5kZXIgKHBlcmNlbnQgb2YgcHVyc2hhc2VkIHRva2VuKQogICAgdWludDI1NiBwdWJsaWMgcGFydG5lckJvbnVzUGVyY2VudDsgLy9yZWZlcnJhbCBwYXJ0bmVyIGJvbnVzIChwZXJjZW50IG9mIHB1cnNoYXNlZCB0b2tlbikKICAgIHVpbnQyNTYgcHVibGljIHJlZmVycmFsQm9udXNQZXJjZW50Oy8vcmVmZXJyYWwgYnV5ZXIgYm9udXMgKHBlcmNlbnQgb2YgcHVyc2hhc2VkIHRva2VuKQogICAgdWludDI1NiBwdWJsaWMgaGFyZENhcDsgICAgICAgICAgICAgLy9NYXhpbXVtIGFtb3VudCBvZiB0b2tlbnMgbWluZWQKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsQ29sbGVjdGVkOyAgICAgIC8vdG90YWwgYW1vdW50IG9mIGNvbGxlY3RlZCBmdW5kcyAoaW4gZXRoZXJldW0gd2VpKQogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zTWludGVkOyAgICAgICAgLy90b3RhbCBhbW91bnQgb2YgbWludGVkIHRva2VucwogICAgYm9vbCBwdWJsaWMgZmluYWxpemVkOyAgICAgICAgICAgICAgLy9jcm93ZHNhbGUgaXMgZmluYWxpemVkCgogICAgLyoqCiAgICAgKiBAZGV2IFdvcmxkQ29pbiBDcm93ZHNhbGUgQ29udHJhY3QKICAgICAqIEBwYXJhbSBfZm91bmRlclBlcmNlbnQgQW1vdW50IG9mIHRva2VucyBzZW50IHRvIGZvdW5kZXIgd2l0aCBlYWNoIHB1cnNoYXNlIChwZXJjZW50IG9mIHB1cnNoYXNlZCB0b2tlbikKICAgICAqIEBwYXJhbSBfcGFydG5lckJvbnVzUGVyY2VudCBSZWZlcnJhbCBwYXJ0bmVyIGJvbnVzIChwZXJjZW50IG9mIHB1cnNoYXNlZCB0b2tlbikKICAgICAqIEBwYXJhbSBfcmVmZXJyYWxCb251c1BlcmNlbnQgUmVmZXJyYWwgYnV5ZXIgYm9udXMgKHBlcmNlbnQgb2YgcHVyc2hhc2VkIHRva2VuKQogICAgICogQHBhcmFtIF9oYXJkQ2FwIE1heGltdW0gYW1vdW50IG9mIGV0aGVyIChpbiB3ZWkpIHRvIGJlIGNvbGxlY3RlZCBkdXJpbmcgY3Jvd2RzYWxlCiAgICAgKiBAcGFyYW0gcm91bmRTdGFydHMgTGlzdCBvZiByb3VuZCBzdGFydCB0aW1lc3RhbXMKICAgICAqIEBwYXJhbSByb3VuZEVuZHMgTGlzdCBvZiByb3VuZCBlbmQgdGltZXN0YW1zIAogICAgICogQHBhcmFtIHJvdW5kUmF0ZXMgTGlzdCBvZiByb3VuZCByYXRlcyAodG9rZW5zIGZvciAxIEVUSCkKICAgICAqLwogICAgZnVuY3Rpb24gV29ybGRDb2luQ3Jvd2RzYWxlICgKICAgICAgICB1aW50MjU2IF9mb3VuZGVyUGVyY2VudCwKICAgICAgICB1aW50MjU2IF9wYXJ0bmVyQm9udXNQZXJjZW50LAogICAgICAgIHVpbnQyNTYgX3JlZmVycmFsQm9udXNQZXJjZW50LAogICAgICAgIHVpbnQyNTYgX2hhcmRDYXAsCiAgICAgICAgdWludDI1NltdIHJvdW5kU3RhcnRzLAogICAgICAgIHVpbnQyNTZbXSByb3VuZEVuZHMsCiAgICAgICAgdWludDI1NltdIHJvdW5kUmF0ZXMKICAgICkgcHVibGljIHsKCiAgICAgICAgLy9DaGVjayBhbGwgcGFyYW1hdGVycyBhcmUgY29ycmVjdCBhbmQgY3JlYXRlIHJvdW5kcwogICAgICAgIHJlcXVpcmUoX2hhcmRDYXAgPiAwKTsgICAgICAgICAgICAgICAgICAgIC8vTmVlZCBzb21ldGhpbmcgdG8gc2VsbAogICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIChyb3VuZFN0YXJ0cy5sZW5ndGggPiAwKSAgJiYgICAgICAgICAgICAgICAgLy9UaGVyZSBzaG91bGQgYmUgYXQgbGVhc3Qgb25lIHJvdW5kCiAgICAgICAgICAgIChyb3VuZFN0YXJ0cy5sZW5ndGggPT0gcm91bmRFbmRzLmxlbmd0aCkgJiYKICAgICAgICAgICAgKHJvdW5kU3RhcnRzLmxlbmd0aCA9PSByb3VuZFJhdGVzLmxlbmd0aCkKICAgICAgICApOyAgICAgICAgICAgICAgICAgICAKICAgICAgICB1aW50MjU2IHByZXZSb3VuZEVuZCA9IG5vdzsKICAgICAgICByb3VuZHMubGVuZ3RoID0gcm91bmRTdGFydHMubGVuZ3RoOyAgICAgICAgICAgICAvL2luaXRpYWxpemUgcm91bmRzIGFycmF5CiAgICAgICAgZm9yKHVpbnQ4IGk9MDsgaSA8IHJvdW5kU3RhcnRzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgcm91bmRzW2ldID0gUm91bmQocm91bmRTdGFydHNbaV0sIHJvdW5kRW5kc1tpXSwgcm91bmRSYXRlc1tpXSk7CiAgICAgICAgICAgIFJvdW5kIHN0b3JhZ2UgciA9IHJvdW5kc1tpXTsKICAgICAgICAgICAgcmVxdWlyZShwcmV2Um91bmRFbmQgPD0gci5zdGFydCk7CiAgICAgICAgICAgIHJlcXVpcmUoci5zdGFydCA8IHIuZW5kKTsKICAgICAgICAgICAgcmVxdWlyZShyLnJhdGUgPiAwKTsKICAgICAgICAgICAgcHJldlJvdW5kRW5kID0gcm91bmRzW2ldLmVuZDsKICAgICAgICB9CgogICAgICAgIGhhcmRDYXAgPSBfaGFyZENhcDsKICAgICAgICBwYXJ0bmVyQm9udXNQZXJjZW50ID0gX3BhcnRuZXJCb251c1BlcmNlbnQ7CiAgICAgICAgcmVmZXJyYWxCb251c1BlcmNlbnQgPSBfcmVmZXJyYWxCb251c1BlcmNlbnQ7CiAgICAgICAgZm91bmRlclBlcmNlbnQgPSBfZm91bmRlclBlcmNlbnQ7CiAgICAgICAgLy9mb3VuZGVyUGVyY2VudFdpdGhSZWZlcnJhbCA9IGZvdW5kZXJQZXJjZW50ICogKHJhdGUgKyBwYXJ0bmVyQm9udXNQZXJjZW50ICsgcmVmZXJyYWxCb251c1BlcmNlbnQpIC8gcmF0ZTsgIC8vRGlkIG5vdCB1c2UgU2FmZU1hdGggaGVyZSwgYmVjYXVzZSB0aGlzIHBhcmFtZXRlcnMgZGVmaW5lZCBieSBjb250cmFjdCBjcmVhdG9yIHNob3VsZCBub3QgYmUgbWFsaWNpb3VzLiBBbHNvIGhhdmUgY2hlY2tlZCByZXN1bHQgb24gdGhlIG5leHQgbGluZS4KICAgICAgICAvL2Fzc2VydChmb3VuZGVyUGVyY2VudFdpdGhSZWZlcnJhbCA+PSBmb3VuZGVyUGVyY2VudCk7CgogICAgICAgIHRva2VuID0gbmV3IFdvcmxkQ29pbigpOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEZldGNoZXMgY3VycmVudCBSb3VuZCBudW1iZXIKICAgICogQHJldHVybiByb3VuZCBudW1iZXIgKGluZGV4IGluIHJvdW5kcyBhcnJheSArIDEpIG9yIDAgaWYgbm9uZQogICAgKi8KICAgIGZ1bmN0aW9uIGN1cnJlbnRSb3VuZE51bSgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQ4KSB7CiAgICAgICAgZm9yKHVpbnQ4IGk9MDsgaSA8IHJvdW5kcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgIGlmKCAobm93ID4gcm91bmRzW2ldLnN0YXJ0KSAmJiAobm93IDw9IHJvdW5kc1tpXS5lbmQpICkgcmV0dXJuIGkrMTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICAvKioKICAgICogQGRldiBGZXRjaGVzIGN1cnJlbnQgcmF0ZSAoaG93IG1hbnkgdG9rZW5zIHlvdSBnZXQgZm9yIDEgRVRIKQogICAgKiBAcmV0dXJuIGNhbGN1bGF0ZWQgcmF0ZSBvciB6ZXJvIGlmIG5vIHJvdW5kIG9mIGNyb3dkc2FsZSBpcyBydW5uaW5nCiAgICAqLwogICAgZnVuY3Rpb24gY3VycmVudFJhdGUoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDggcm91bmROdW0gPSBjdXJyZW50Um91bmROdW0oKTsKICAgICAgICBpZihyb3VuZE51bSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH1lbHNlewogICAgICAgICAgICByZXR1cm4gcm91bmRzW3JvdW5kTnVtLTFdLnJhdGU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGZpcnN0Um91bmRTdGFydFRpbWVzdGFtcCgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQyNTYpewogICAgICAgIHJldHVybiByb3VuZHNbMF0uc3RhcnQ7CiAgICB9CiAgICBmdW5jdGlvbiBsYXN0Um91bmRFbmRUaW1lc3RhbXAoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50MjU2KXsKICAgICAgICByZXR1cm4gcm91bmRzW3JvdW5kcy5sZW5ndGggLSAxXS5lbmQ7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgU2hvd3MgaWYgY3Jvd2RzYWxlIGlzIHJ1bm5pbmcKICAgICovIAogICAgZnVuY3Rpb24gY3Jvd2RzYWxlUnVubmluZygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKGJvb2wpewogICAgICAgIHJldHVybiAhZmluYWxpemVkICYmICh0b2tlbnNNaW50ZWQgPCBoYXJkQ2FwKSAmJiAoY3VycmVudFJvdW5kTnVtKCkgPiAwKTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBCdXkgV29ybGRDb2luIHRva2VucwogICAgKi8KICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSBwdWJsaWMgewogICAgICAgIHNhbGUobXNnLnNlbmRlciwgMHgwKTsKICAgIH0gCgogICAgLyoqCiAgICAqIEBkZXYgQnV5IFdvcmxkQ29pbiB0b2tlbnMgd2l0biByZWZlcnJhbCBwcm9ncmFtCiAgICAqLwogICAgZnVuY3Rpb24gc2FsZShhZGRyZXNzIGJ1eWVyLCBhZGRyZXNzIHBhcnRuZXIpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBpZighY3Jvd2RzYWxlUnVubmluZygpKSByZXZlcnQoKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwogICAgICAgIHVpbnQyNTYgcmF0ZSA9IGN1cnJlbnRSYXRlKCk7CiAgICAgICAgYXNzZXJ0KHJhdGUgPiAwKTsKCiAgICAgICAgdWludDI1NiByZWZlcnJhbFRva2VuczsgdWludDI1NiBwYXJ0bmVyVG9rZW5zOyB1aW50MjU2IG93bmVyVG9rZW5zOwogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gcmF0ZS5tdWwobXNnLnZhbHVlKTsKICAgICAgICBhc3NlcnQodG9rZW5zID4gMCk7CiAgICAgICAgdG90YWxDb2xsZWN0ZWQgPSB0b3RhbENvbGxlY3RlZC5hZGQobXNnLnZhbHVlKTsKICAgICAgICBpZihwYXJ0bmVyID09IDB4MCl7CiAgICAgICAgICAgIG93bmVyVG9rZW5zICAgICA9IHRva2Vucy5tdWwoZm91bmRlclBlcmNlbnQpLmRpdihQRVJDRU5UX0RJVklERVIpOwogICAgICAgICAgICBtaW50VG9rZW5zKGJ1eWVyLCB0b2tlbnMpOwogICAgICAgICAgICBtaW50VG9rZW5zKG93bmVyLCBvd25lclRva2Vucyk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHBhcnRuZXJUb2tlbnMgICA9IHRva2Vucy5tdWwocGFydG5lckJvbnVzUGVyY2VudCkuZGl2KFBFUkNFTlRfRElWSURFUik7CiAgICAgICAgICAgIHJlZmVycmFsVG9rZW5zICA9IHRva2Vucy5tdWwocmVmZXJyYWxCb251c1BlcmNlbnQpLmRpdihQRVJDRU5UX0RJVklERVIpOwogICAgICAgICAgICBvd25lclRva2VucyAgICAgPSAodG9rZW5zLmFkZChwYXJ0bmVyVG9rZW5zKS5hZGQocmVmZXJyYWxUb2tlbnMpKS5tdWwoZm91bmRlclBlcmNlbnQpLmRpdihQRVJDRU5UX0RJVklERVIpOwogICAgICAgICAgICAKICAgICAgICAgICAgdWludDI1NiB0b3RhbEJ1eWVyVG9rZW5zID0gdG9rZW5zLmFkZChyZWZlcnJhbFRva2Vucyk7CiAgICAgICAgICAgIG1pbnRUb2tlbnMoYnV5ZXIsIHRvdGFsQnV5ZXJUb2tlbnMpOwogICAgICAgICAgICBtaW50VG9rZW5zKHBhcnRuZXIsIHBhcnRuZXJUb2tlbnMpOwogICAgICAgICAgICBtaW50VG9rZW5zKG93bmVyLCBvd25lclRva2Vucyk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBAbm90aWNlIE1pbnQgdG9rZW5zIGZvciBwdXJzaGFzZXMgd2l0aCBOb24tRXRoZXIgY3VycmVuY2llcwogICAgKiBAcGFyYW0gYmVuZWZpY2lhcnkgd2hvbSB0byBzZW5kIHRva2VuZAogICAgKiBAcGFyYW0gYW1vdW50IGhvdyBtdWNoIHRva2VucyB0byBzZW5kCiAgICAqIHBhcmFtIG1lc3NhZ2UgcmVhc29uIHdoeSB3ZSBhcmUgc2VuZGluZyB0b2tlbnMgKG5vdCBzdG9yZWQgYW55dGhlcmUsIG9ubHkgaW4gdHJhbnNhY3Rpb24gaXRzZWxmKQogICAgKi8KICAgIGZ1bmN0aW9uIHNhbGVOb25FdGhlcihhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50MjU2IGFtb3VudCwgc3RyaW5nIC8qbWVzc2FnZSovKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBtaW50VG9rZW5zKGJlbmVmaWNpYXJ5LCBhbW91bnQpOwogICAgfQoKICAgIC8qKgogICAgKiBAbm90aWNlIFVwZGF0ZXMgcmF0ZSBmb3IgdGhlIHJvdW5kCiAgICAqLwogICAgZnVuY3Rpb24gc2V0Um91bmRSYXRlKHVpbnQzMiByb3VuZE51bSwgdWludDI1NiByYXRlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKHJvdW5kTnVtIDwgcm91bmRzLmxlbmd0aCk7CiAgICAgICAgcm91bmRzW3JvdW5kTnVtXS5yYXRlID0gcmF0ZTsKICAgIH0KCgogICAgLyoqCiAgICAqIEBub3RpY2UgU2VuZHMgY29sbGVjdGVkIGZ1bmRzIHRvIG93bmVyCiAgICAqIE1heSBiZSBleGVjdXRlZCBvbmx5IGlmIGdvYWwgcmVhY2hlZCBhbmQgbm8gcmVmdW5kcyBhcmUgcG9zc2libGUKICAgICovCiAgICBmdW5jdGlvbiBjbGFpbUV0aGVyKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaWYodGhpcy5iYWxhbmNlID4gMCl7CiAgICAgICAgICAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBAbm90aWNlIEZpbmFsaXplcyBJQ08gd2hlbiBvbmUgb2YgY29uZGl0aW9ucyBtZXQ6CiAgICAqIC0gZW5kIHRpbWUgcmVhY2hlZCBPUgogICAgKiAtIG5vIG1vcmUgdG9rZW5zIGF2YWlsYWJsZSAoY2FwIHJlYWNoZWQpIE9SCiAgICAqIC0gbWVzc2FnZSBzZW50IGJ5IG93bmVyCiAgICAqLwogICAgZnVuY3Rpb24gZmluYWxpemVDcm93ZHNhbGUoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKCAobm93ID4gbGFzdFJvdW5kRW5kVGltZXN0YW1wKCkpIHx8ICh0b3RhbENvbGxlY3RlZCA9PSBoYXJkQ2FwKSB8fCAobXNnLnNlbmRlciA9PSBvd25lcikgKTsKICAgICAgICBmaW5hbGl6ZWQgPSB0b2tlbi5maW5pc2hNaW50aW5nKCk7CiAgICAgICAgdG9rZW4udHJhbnNmZXJPd25lcnNoaXAob3duZXIpOwogICAgICAgIGlmKHRoaXMuYmFsYW5jZSA+IDApewogICAgICAgICAgICBvd25lci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogQGRldiBIZWxwZXIgZnVuY3Rpb24gdG8gbWludCB0b2tlbnMgYW5kIGluY3JlYXNlIHRva2Vuc01pbnRlZCBjb3VudGVyCiAgICAqLwogICAgZnVuY3Rpb24gbWludFRva2VucyhhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgewogICAgICAgIHRva2Vuc01pbnRlZCA9IHRva2Vuc01pbnRlZC5hZGQoYW1vdW50KTsKICAgICAgICByZXF1aXJlKHRva2Vuc01pbnRlZCA8PSBoYXJkQ2FwKTsKICAgICAgICBhc3NlcnQodG9rZW4ubWludChiZW5lZmljaWFyeSwgYW1vdW50KSk7CiAgICB9Cn0='.
	

]
