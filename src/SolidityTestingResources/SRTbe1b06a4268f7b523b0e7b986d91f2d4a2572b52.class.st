Class {
	#name : #SRTbe1b06a4268f7b523b0e7b986d91f2d4a2572b52,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbe1b06a4268f7b523b0e7b986d91f2d4a2572b52 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCmNvbnRyYWN0IEVSQzIwIHsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkge30KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KfQoKY29udHJhY3QgUHJlc2FsZVBvb2wgewoKICAvLyBTYWZlTWF0aCBpcyBhIGxpYnJhcnkgdG8gZW5zdXJlIHRoYXQgbWF0aCBvcGVyYXRpb25zIGRvIG5vdCBoYXZlIG92ZXJmbG93IGVycm9ycwogIC8vIGh0dHBzOi8vemVwcGVsaW4tc29saWRpdHkucmVhZHRoZWRvY3MuaW8vZW4vbGF0ZXN0L3NhZmVtYXRoLmh0bWwKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKICAKICAvLyBUaGUgY29udHJhY3QgaGFzIDMgc3RhZ2VzOgogIC8vIDEgLSBUaGUgaW5pdGlhbCBzdGF0ZS4gQW55IGFkZHJlc3NlcyBjYW4gZGVwb3NpdCBvciB3aXRoZHJhdyBldGggdG8gdGhlIGNvbnRyYWN0LgogIC8vIDIgLSBUaGUgb3duZXIgaGFzIGNsb3NlZCB0aGUgY29udHJhY3QgZm9yIGZ1cnRoZXIgZGVwb3NpdHMuIENvbnRyaWJ1dG9ycyBjYW4gc3RpbGwgd2l0aGRyYXcgdGhlaXIgZXRoIGZyb20gdGhlIGNvbnRyYWN0LgogIC8vIDMgLSBUaGUgZXRoIGlzIHNlbnQgZnJvbSB0aGUgY29udHJhY3QgdG8gdGhlIHJlY2VpdmVyLiBVbnVzZWQgZXRoIGNhbiBiZSBjbGFpbWVkIGJ5IGNvbnRyaWJ1dG9ycyBpbW1lZGlhdGVseS4gT25jZSB0b2tlbnMgYXJlIHNlbnQgdG8gdGhlIGNvbnRyYWN0LAogIC8vICAgICB0aGUgb3duZXIgZW5hYmxlcyB3aXRoZHJhd2FscyBhbmQgY29udHJpYnV0b3JzIGNhbiB3aXRoZHJhdyB0aGVpciB0b2tlbnMuCiAgdWludDggcHVibGljIGNvbnRyYWN0U3RhZ2UgPSAxOwogIAogIC8vIFRoZXNlIHZhcmlhYmxlcyBhcmUgc2V0IGF0IHRoZSB0aW1lIG9mIGNvbnRyYWN0IGNyZWF0aW9uCiAgLy8gdGhlIGFkZHJlc3MgdGhhdCBjcmVhdGVzIHRoZSBjb250cmFjdAogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIC8vIHRoZSBtaW5pbXVtIGV0aCBhbW91bnQgKGluIHdlaSkgdGhhdCBjYW4gYmUgc2VudCBieSBhIGNvbnRyaWJ1dGluZyBhZGRyZXNzCiAgdWludCBwdWJsaWMgY29udHJpYnV0aW9uTWluOwogIC8vIHRoZSBtYXhpbXVtIGV0aCBhbW91bnQgKGluIHdlaSkgdGhhdCB0byBiZSBoZWxkIGJ5IHRoZSBjb250cmFjdAogIHVpbnQgcHVibGljIGNvbnRyYWN0TWF4OwogIC8vIHRoZSAlIG9mIHRva2VucyBrZXB0IGJ5IHRoZSBjb250cmFjdCBvd25lcgogIHVpbnQgcHVibGljIGZlZVBjdDsKICAvLyB0aGUgYWRkcmVzcyB0aGF0IHRoZSBwb29sIHdpbGwgYmUgcGFpZCBvdXQgdG8KICBhZGRyZXNzIHB1YmxpYyByZWNlaXZlckFkZHJlc3M7CiAgCiAgLy8gVGhlc2UgdmFyaWFibGVzIGFyZSBhbGwgaW5pdGlhbGx5IHNldCB0byAwIGFuZCB3aWxsIGJlIHNldCBhdCBzb21lIHBvaW50IGR1cmluZyB0aGUgY29udHJhY3QKICAvLyB0aGUgYW1vdW50IG9mIGV0aCAoaW4gd2VpKSBzZW50IHRvIHRoZSByZWNlaXZpbmcgYWRkcmVzcyAoc2V0IGluIHN0YWdlIDMpCiAgdWludCBwdWJsaWMgc3VibWl0dGVkQW1vdW50OwogIC8vIHRoZSAlIG9mIGNvbnRyaWJ1dGVkIGV0aCB0byBiZSByZWZ1bmRlZCB0byBjb250cmlidXRpbmcgYWRkcmVzc2VzIChzZXQgaW4gc3RhZ2UgMykKICB1aW50IHB1YmxpYyByZWZ1bmRQY3Q7CiAgLy8gdGhlIG51bWJlciBvZiBjb250cmlidXRvcnMgdG8gdGhlIHBvb2wKICB1aW50IHB1YmxpYyBjb250cmlidXRvckNvdW50OwogIC8vIHRoZSBkZWZhdWx0IHRva2VuIGNvbnRyYWN0IHRvIGJlIHVzZWQgZm9yIHdpdGhkcmF3aW5nIHRva2VucyBpbiBzdGFnZSAzCiAgYWRkcmVzcyBwdWJsaWMgYWN0aXZlVG9rZW47CiAgCiAgLy8gYSBkYXRhIHN0cnVjdHVyZSBmb3IgaG9sZGluZyB0aGUgY29udHJpYnV0aW9uIGFtb3VudCwgY2FwLCBldGggcmVmdW5kIHN0YXR1cywgYW5kIHRva2VuIHdpdGhkcmF3YWwgc3RhdHVzIGZvciBlYWNoIGNvbnRyaWJ1dGluZyBhZGRyZXNzCiAgc3RydWN0IENvbnRyaWJ1dG9yIHsKICAgIGJvb2wgcmVmdW5kZWRFdGg7CiAgICB1aW50IGJhbGFuY2U7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHRva2Vuc0NsYWltZWQ7CiAgfQogIC8vIGEgbWFwcGluZyB0aGF0IGhvbGRzIHRoZSBjb250cmlidXRvciBzdHJ1Y3QgZm9yIGVhY2ggY29udHJpYnV0aW5nIGFkZHJlc3MKICBtYXBwaW5nIChhZGRyZXNzID0+IENvbnRyaWJ1dG9yKSBjb250cmlidXRvcnM7CiAgCiAgLy8gYSBkYXRhIHN0cnVjdHVyZSBmb3IgaG9sZGluZyBpbmZvcm1hdGlvbiByZWxhdGVkIHRvIHRva2VuIHdpdGhkcmF3YWxzLgogIHN0cnVjdCBUb2tlbkFsbG9jYXRpb24gewogICAgRVJDMjAgdG9rZW47CiAgICB1aW50IHBjdDsKICAgIHVpbnQgY2xhaW1Sb3VuZDsKICAgIHVpbnQgY2xhaW1Db3VudDsKICB9CiAgLy8gYSBtYXBwaW5nIHRoYXQgaG9sZHMgdGhlIHRva2VuIGFsbG9jYXRpb24gc3RydWN0IGZvciBlYWNoIHRva2VuIGFkZHJlc3MKICBtYXBwaW5nIChhZGRyZXNzID0+IFRva2VuQWxsb2NhdGlvbikgZGlzdHJpYnV0aW9uOwogIAogIAogIC8vIHRoaXMgbW9kaWZpZXIgaXMgdXNlZCBmb3IgZnVuY3Rpb25zIHRoYXQgY2FuIG9ubHkgYmUgYWNjZXNzZWQgYnkgdGhlIGNvbnRyYWN0IGNyZWF0b3IKICBtb2RpZmllciBvbmx5T3duZXIgKCkgewogICAgcmVxdWlyZSAobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KICAKICAvLyB0aGlzIG1vZGlmaWVyIGlzIHVzZWQgdG8gcHJldmVudCByZS1lbnRyYW5jeSBleHBsb2l0cyBkdXJpbmcgY29udHJhY3QgPiBjb250cmFjdCBpbnRlcmFjdGlvbgogIGJvb2wgbG9ja2VkOwogIG1vZGlmaWVyIG5vUmVlbnRyYW5jeSgpIHsKICAgIHJlcXVpcmUoIWxvY2tlZCk7CiAgICBsb2NrZWQgPSB0cnVlOwogICAgXzsKICAgIGxvY2tlZCA9IGZhbHNlOwogIH0KICAKICBldmVudCBDb250cmlidXRvckJhbGFuY2VDaGFuZ2VkIChhZGRyZXNzIGNvbnRyaWJ1dG9yLCB1aW50IHRvdGFsQmFsYW5jZSk7CiAgZXZlbnQgVG9rZW5zV2l0aGRyYXduIChhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCk7CiAgZXZlbnQgRXRoUmVmdW5kZWQgKGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgYW1vdW50KTsKICBldmVudCBSZWNlaXZlckFkZHJlc3NDaGFuZ2VkICggYWRkcmVzcyBfYWRkcik7CiAgZXZlbnQgV2l0aGRyYXdhbHNPcGVuIChhZGRyZXNzIHRva2VuQWRkcik7CiAgZXZlbnQgRVJDMjIzUmVjZWl2ZWQgKGFkZHJlc3MgdG9rZW4sIHVpbnQgdmFsdWUpOwogICAKICAvLyBUaGVzZSBhcmUgaW50ZXJuYWwgZnVuY3Rpb25zIHVzZWQgZm9yIGNhbGN1bGF0aW5nIGZlZXMsIGV0aCBhbmQgdG9rZW4gYWxsb2NhdGlvbnMgYXMgJQogIC8vIHJldHVybnMgYSB2YWx1ZSBhcyBhICUgYWNjdXJhdGUgdG8gMjAgZGVjaW1hbCBwb2ludHMKICBmdW5jdGlvbiBfdG9QY3QgKHVpbnQgbnVtZXJhdG9yLCB1aW50IGRlbm9taW5hdG9yICkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gbnVtZXJhdG9yLm11bCgxMCAqKiAyMCkgLyBkZW5vbWluYXRvcjsKICB9CiAgCiAgLy8gcmV0dXJucyAlIG9mIGFueSBudW1iZXIsIHdoZXJlICUgZ2l2ZW4gd2FzIGdlbmVyYXRlZCB3aXRoIHRvUGN0CiAgZnVuY3Rpb24gX2FwcGx5UGN0ICh1aW50IG51bWVyYXRvciwgdWludCBwY3QpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIG51bWVyYXRvci5tdWwocGN0KSAvICgxMCAqKiAyMCk7CiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGF0IHRoZSB0aW1lIG9mIGNvbnRyYWN0IGNyZWF0aW9uIGFuZCBzZXRzIHRoZSBpbml0aWFsIHZhcmlhYmxlcy4KICBmdW5jdGlvbiBQcmVzYWxlUG9vbChhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGluZGl2aWR1YWxNaW4sIHVpbnQgcG9vbE1heCwgdWludCBmZWUpIHB1YmxpYyB7CiAgICByZXF1aXJlIChmZWUgPCAxMDApOwogICAgcmVxdWlyZSAoMTAwMDAwMDAwMDAwMDAwMDAwIDw9IGluZGl2aWR1YWxNaW4pOwogICAgcmVxdWlyZSAoaW5kaXZpZHVhbE1pbiA8PSBwb29sTWF4KTsKICAgIHJlcXVpcmUgKHJlY2VpdmVyICE9IDB4MDApOwogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgcmVjZWl2ZXJBZGRyZXNzID0gcmVjZWl2ZXI7CiAgICBjb250cmlidXRpb25NaW4gPSBpbmRpdmlkdWFsTWluOwogICAgY29udHJhY3RNYXggPSBwb29sTWF4OwogICAgZmVlUGN0ID0gX3RvUGN0KGZlZSwxMDApOwogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuZXZlciBldGggaXMgc2VudCBpbnRvIHRoZSBjb250cmFjdC4KICAvLyBUaGUgYW1vdW50IHNlbnQgaXMgYWRkZWQgdG8gdGhlIGJhbGFuY2UgaW4gdGhlIENvbnRyaWJ1dG9yIHN0cnVjdCBhc3NvY2lhdGVkIHdpdGggdGhlIHNlbmRpbmcgYWRkcmVzcy4KICBmdW5jdGlvbiAoKSBwYXlhYmxlIHB1YmxpYyB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlID09IDEpOwogICAgcmVxdWlyZSAodGhpcy5iYWxhbmNlIDw9IGNvbnRyYWN0TWF4KTsKICAgIHZhciBjID0gY29udHJpYnV0b3JzW21zZy5zZW5kZXJdOwogICAgdWludCBuZXdCYWxhbmNlID0gYy5iYWxhbmNlLmFkZChtc2cudmFsdWUpOwogICAgcmVxdWlyZSAobmV3QmFsYW5jZSA+PSBjb250cmlidXRpb25NaW4pOwogICAgaWYgKGNvbnRyaWJ1dG9yc1ttc2cuc2VuZGVyXS5iYWxhbmNlID09IDApIHsKICAgICAgY29udHJpYnV0b3JDb3VudCA9IGNvbnRyaWJ1dG9yQ291bnQuYWRkKDEpOwogICAgfQogICAgY29udHJpYnV0b3JzW21zZy5zZW5kZXJdLmJhbGFuY2UgPSBuZXdCYWxhbmNlOwogICAgQ29udHJpYnV0b3JCYWxhbmNlQ2hhbmdlZChtc2cuc2VuZGVyLCBuZXdCYWxhbmNlKTsKICB9CiAgICAKICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB0byB3aXRoZHJhdyBldGggb3IgdG9rZW5zIGZyb20gdGhlIGNvbnRyYWN0LgogIC8vIEl0IGNhbiBvbmx5IGJlIGNhbGxlZCBieSBhZGRyZXNzZXMgdGhhdCBoYXZlIGEgYmFsYW5jZSBncmVhdGVyIHRoYW4gMC4KICAvLyBJZiBjYWxsZWQgZHVyaW5nIGNvbnRyYWN0IHN0YWdlcyBvbmUgb3IgdHdvLCB0aGUgZnVsbCBldGggYmFsYW5jZSBkZXBvc2l0ZWQgaW50byB0aGUgY29udHJhY3Qgd2lsbCBiZSByZXR1cm5lZCBhbmQgdGhlIGNvbnRyaWJ1dG9yJ3MgYmFsYW5jZSB3aWxsIGJlIHJlc2V0IHRvIDAuCiAgLy8gSWYgY2FsbGVkIGR1cmluZyBzdGFnZSB0aHJlZSwgdGhlIGNvbnRyaWJ1dG9yJ3MgdW51c2VkIGV0aCB3aWxsIGJlIHJldHVybmVkLCBhcyB3ZWxsIGFzIGFueSBhdmFpbGFibGUgdG9rZW5zLgogIC8vIFRoZSB0b2tlbiBhZGRyZXNzIG1heSBiZSBwcm92aWRlZCBvcHRpb25hbGx5IHRvIHdpdGhkcmF3IHRva2VucyB0aGF0IGFyZSBub3QgY3VycmVudGx5IHRoZSBkZWZhdWx0IHRva2VuIChhaXJkcm9wcykuCiAgZnVuY3Rpb24gd2l0aGRyYXcgKGFkZHJlc3MgdG9rZW5BZGRyKSBwdWJsaWMgewogICAgdmFyIGMgPSBjb250cmlidXRvcnNbbXNnLnNlbmRlcl07CiAgICByZXF1aXJlIChjLmJhbGFuY2UgPiAwKTsKICAgIGlmIChjb250cmFjdFN0YWdlIDwgMykgewogICAgICB1aW50IGFtb3VudFRvVHJhbnNmZXIgPSBjLmJhbGFuY2U7CiAgICAgIGMuYmFsYW5jZSA9IDA7CiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoYW1vdW50VG9UcmFuc2Zlcik7CiAgICAgIGNvbnRyaWJ1dG9yQ291bnQgPSBjb250cmlidXRvckNvdW50LnN1YigxKTsKICAgICAgQ29udHJpYnV0b3JCYWxhbmNlQ2hhbmdlZChtc2cuc2VuZGVyLCAwKTsKICAgIH0gZWxzZSB7CiAgICAgIF93aXRoZHJhdyhtc2cuc2VuZGVyLHRva2VuQWRkcik7CiAgICB9ICAKICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiBhbGxvd3MgdGhlIGNvbnRyYWN0IG93bmVyIHRvIGZvcmNlIGEgd2l0aGRyYXdhbCB0byBhbnkgY29udHJpYnV0b3IuCiAgLy8gSXQgaXMgdXNlZnVsIGlmIGEgbmV3IHJvdW5kIG9mIHRva2VucyBjYW4gYmUgZGlzdHJpYnV0ZWQgYnV0IHNvbWUgY29udHJpYnV0b3JzIGhhdmUKICAvLyBub3QgeWV0IHdpdGhkcmF3biB0aGVpciBwcmV2aW91cyBhbGxvY2F0aW9uLgogIGZ1bmN0aW9uIHdpdGhkcmF3Rm9yIChhZGRyZXNzIGNvbnRyaWJ1dG9yLCBhZGRyZXNzIHRva2VuQWRkcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlID09IDMpOwogICAgcmVxdWlyZSAoY29udHJpYnV0b3JzW2NvbnRyaWJ1dG9yXS5iYWxhbmNlID4gMCk7CiAgICBfd2l0aGRyYXcoY29udHJpYnV0b3IsdG9rZW5BZGRyKTsKICB9CiAgCiAgLy8gVGhpcyBpbnRlcm5hbCBmdW5jdGlvbiBoYW5kbGVzIHdpdGhkcmF3YWxzIGR1cmluZyBzdGFnZSB0aHJlZS4KICAvLyBUaGUgYXNzb2NpYXRlZCBldmVudHMgd2lsbCBmaXJlIHRvIG5vdGlmeSB3aGVuIGEgcmVmdW5kIG9yIHRva2VuIGFsbG9jYXRpb24gaXMgY2xhaW1lZC4KICBmdW5jdGlvbiBfd2l0aGRyYXcgKGFkZHJlc3MgcmVjZWl2ZXIsIGFkZHJlc3MgdG9rZW5BZGRyKSBpbnRlcm5hbCB7CiAgICBhc3NlcnQgKGNvbnRyYWN0U3RhZ2UgPT0gMyk7CiAgICB2YXIgYyA9IGNvbnRyaWJ1dG9yc1tyZWNlaXZlcl07CiAgICBpZiAodG9rZW5BZGRyID09IDB4MDApIHsKICAgICAgdG9rZW5BZGRyID0gYWN0aXZlVG9rZW47CiAgICB9CiAgICB2YXIgZCA9IGRpc3RyaWJ1dGlvblt0b2tlbkFkZHJdOwogICAgcmVxdWlyZSAoIChyZWZ1bmRQY3QgPiAwICYmICFjLnJlZnVuZGVkRXRoKSB8fCBkLmNsYWltUm91bmQgPiBjLnRva2Vuc0NsYWltZWRbdG9rZW5BZGRyXSApOwogICAgaWYgKHJlZnVuZFBjdCA+IDAgJiYgIWMucmVmdW5kZWRFdGgpIHsKICAgICAgdWludCBldGhBbW91bnQgPSBfYXBwbHlQY3QoYy5iYWxhbmNlLHJlZnVuZFBjdCk7CiAgICAgIGMucmVmdW5kZWRFdGggPSB0cnVlOwogICAgICBpZiAoZXRoQW1vdW50ID09IDApIHJldHVybjsKICAgICAgaWYgKGV0aEFtb3VudCsxMCA+IGMuYmFsYW5jZSkgewogICAgICAgIGV0aEFtb3VudCA9IGMuYmFsYW5jZS0xMDsKICAgICAgfQogICAgICBjLmJhbGFuY2UgPSBjLmJhbGFuY2Uuc3ViKGV0aEFtb3VudCsxMCk7CiAgICAgIHJlY2VpdmVyLnRyYW5zZmVyKGV0aEFtb3VudCk7CiAgICAgIEV0aFJlZnVuZGVkKHJlY2VpdmVyLGV0aEFtb3VudCk7CiAgICB9CiAgICBpZiAoZC5jbGFpbVJvdW5kID4gYy50b2tlbnNDbGFpbWVkW3Rva2VuQWRkcl0pIHsKICAgICAgdWludCBhbW91bnQgPSBfYXBwbHlQY3QoYy5iYWxhbmNlLGQucGN0KTsKICAgICAgYy50b2tlbnNDbGFpbWVkW3Rva2VuQWRkcl0gPSBkLmNsYWltUm91bmQ7CiAgICAgIGQuY2xhaW1Db3VudCA9IGQuY2xhaW1Db3VudC5hZGQoMSk7CiAgICAgIGlmIChhbW91bnQgPiAwKSB7CiAgICAgICAgcmVxdWlyZSAoZC50b2tlbi50cmFuc2ZlcihyZWNlaXZlcixhbW91bnQpKTsKICAgICAgfQogICAgICBUb2tlbnNXaXRoZHJhd24ocmVjZWl2ZXIsYW1vdW50KTsKICAgIH0KICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIGR1cmluZyBzdGFnZXMgb25lIG9yIHR3byB0byBtb2RpZnkgdGhlIG1heGltdW0gYmFsYW5jZSBvZiB0aGUgY29udHJhY3QuCiAgLy8gSXQgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBvd25lci4gVGhlIGFtb3VudCBjYW5ub3QgYmUgc2V0IHRvIGxvd2VyIHRoYW4gdGhlIGN1cnJlbnQgYmFsYW5jZSBvZiB0aGUgY29udHJhY3QuCiAgZnVuY3Rpb24gbW9kaWZ5TWF4Q29udHJhY3RCYWxhbmNlICh1aW50IGFtb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlIDwgMyk7CiAgICByZXF1aXJlIChhbW91bnQgPj0gY29udHJpYnV0aW9uTWluKTsKICAgIHJlcXVpcmUgKGFtb3VudCA+PSB0aGlzLmJhbGFuY2UpOwogICAgY29udHJhY3RNYXggPSBhbW91bnQ7CiAgfQogIAogIC8vIFRoaXMgY2FsbGFibGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgdG90YWwgcG9vbCBjYXAsIGN1cnJlbnQgYmFsYW5jZSBhbmQgcmVtYWluaW5nIGJhbGFuY2UgdG8gYmUgZmlsbGVkLgogIGZ1bmN0aW9uIGNoZWNrUG9vbEJhbGFuY2UgKCkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludCBwb29sQ2FwLCB1aW50IGJhbGFuY2UsIHVpbnQgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gKGNvbnRyYWN0TWF4LHRoaXMuYmFsYW5jZSxjb250cmFjdE1heC5zdWIodGhpcy5iYWxhbmNlKSk7CiAgfQogIAogIC8vIFRoaXMgY2FsbGFibGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgYmFsYW5jZSwgY29udHJpYnV0aW9uIGNhcCwgYW5kIHJlbWFpbmluZyBhdmFpbGFibGUgYmFsYW5jZSBvZiBhbnkgY29udHJpYnV0b3IuCiAgZnVuY3Rpb24gY2hlY2tDb250cmlidXRvckJhbGFuY2UgKGFkZHJlc3MgYWRkcikgdmlldyBwdWJsaWMgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICByZXR1cm4gY29udHJpYnV0b3JzW2FkZHJdLmJhbGFuY2U7CiAgfQogIAogIC8vIFRoaXMgY2FsbGFibGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgdG9rZW4gYmFsYW5jZSB0aGF0IGEgY29udHJpYnV0b3IgY2FuIGN1cnJlbnRseSBjbGFpbS4KICBmdW5jdGlvbiBjaGVja0F2YWlsYWJsZVRva2VucyAoYWRkcmVzcyBhZGRyLCBhZGRyZXNzIHRva2VuQWRkcikgdmlldyBwdWJsaWMgcmV0dXJucyAodWludCBhbW91bnQpIHsKICAgIHZhciBjID0gY29udHJpYnV0b3JzW2FkZHJdOwogICAgdmFyIGQgPSBkaXN0cmlidXRpb25bdG9rZW5BZGRyXTsKICAgIGlmIChkLmNsYWltUm91bmQgPT0gYy50b2tlbnNDbGFpbWVkW3Rva2VuQWRkcl0pIHJldHVybiAwOwogICAgcmV0dXJuIF9hcHBseVBjdChjLmJhbGFuY2UsZC5wY3QpOwogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIGNsb3NlcyBmdXJ0aGVyIGNvbnRyaWJ1dGlvbnMgdG8gdGhlIGNvbnRyYWN0LCBhZHZhbmNpbmcgaXQgdG8gc3RhZ2UgdHdvLgogIC8vIEl0IGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXIuICBBZnRlciB0aGlzIGNhbGwgaGFzIGJlZW4gbWFkZSwgY29udHJpYnV0aW5nIGFkZHJlc3NlcwogIC8vIGNhbiBzdGlsbCByZW1vdmUgdGhlaXIgZXRoIGZyb20gdGhlIGNvbnRyYWN0IGJ1dCBjYW5ub3QgZGVwb3NpdCBhbnkgbW9yZS4KICBmdW5jdGlvbiBjbG9zZUNvbnRyaWJ1dGlvbnMgKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlID09IDEpOwogICAgY29udHJhY3RTdGFnZSA9IDI7CiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gcmVvcGVucyB0aGUgY29udHJhY3QgdG8gZnVydGhlciBkZXBvc2l0cywgcmV0dXJuaW5nIGl0IHRvIHN0YWdlIG9uZS4KICAvLyBJdCBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIG93bmVyIGR1cmluZyBzdGFnZSB0d28uCiAgZnVuY3Rpb24gcmVvcGVuQ29udHJpYnV0aW9ucyAoKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUgKGNvbnRyYWN0U3RhZ2UgPT0gMik7CiAgICBjb250cmFjdFN0YWdlID0gMTsKICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiBzZW5kcyB0aGUgcG9vbGVkIGV0aCB0byB0aGUgcmVjZWl2aW5nIGFkZHJlc3MsIGNhbGN1bGF0ZXMgdGhlICUgb2YgdW51c2VkIGV0aCB0byBiZSByZXR1cm5lZCwKICAvLyBhbmQgYWR2YW5jZXMgdGhlIGNvbnRyYWN0IHRvIHN0YWdlIHRocmVlLiBJdCBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIGNvbnRyYWN0IG93bmVyIGR1cmluZyBzdGFnZXMgb25lIG9yIHR3by4KICAvLyBUaGUgYW1vdW50IHRvIHNlbmQgKGdpdmVuIGluIHdlaSkgbXVzdCBiZSBzcGVjaWZpZWQgZHVyaW5nIHRoZSBjYWxsLiBBcyB0aGlzIGZ1bmN0aW9uIGNhbiBvbmx5IGJlIGV4ZWN1dGVkIG9uY2UsCiAgLy8gaXQgaXMgVkVSWSBJTVBPUlRBTlQgbm90IHRvIGdldCB0aGUgYW1vdW50IHdyb25nLgogIGZ1bmN0aW9uIHN1Ym1pdFBvb2wgKHVpbnQgYW1vdW50SW5XZWkpIHB1YmxpYyBvbmx5T3duZXIgbm9SZWVudHJhbmN5IHsKICAgIHJlcXVpcmUgKGNvbnRyYWN0U3RhZ2UgPCAzKTsKICAgIHJlcXVpcmUgKGNvbnRyaWJ1dGlvbk1pbiA8PSBhbW91bnRJbldlaSAmJiBhbW91bnRJbldlaSA8PSB0aGlzLmJhbGFuY2UpOwogICAgdWludCBiID0gdGhpcy5iYWxhbmNlOwogICAgcmVxdWlyZSAocmVjZWl2ZXJBZGRyZXNzLmNhbGwudmFsdWUoYW1vdW50SW5XZWkpLmdhcyhtc2cuZ2FzLnN1Yig1MDAwKSkoKSk7CiAgICBzdWJtaXR0ZWRBbW91bnQgPSBiLnN1Yih0aGlzLmJhbGFuY2UpOwogICAgcmVmdW5kUGN0ID0gX3RvUGN0KHRoaXMuYmFsYW5jZSxiKTsKICAgIGNvbnRyYWN0U3RhZ2UgPSAzOwogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIG9wZW5zIHRoZSBjb250cmFjdCB1cCBmb3IgdG9rZW4gd2l0aGRyYXdhbHMuCiAgLy8gSXQgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBvd25lciBkdXJpbmcgc3RhZ2UgMy4gIFRoZSBvd25lciBzcGVjaWZpZXMgdGhlIGFkZHJlc3Mgb2YgYW4gRVJDMjAgdG9rZW4KICAvLyBjb250cmFjdCB0aGF0IHRoaXMgY29udHJhY3QgaGFzIGEgYmFsYW5jZSBpbiwgYW5kIG9wdGlvbmFsbHkgYSBib29sIHRvIHByZXZlbnQgdGhpcyB0b2tlbiBmcm9tIGJlaW5nCiAgLy8gdGhlIGRlZmF1bHQgd2l0aGRyYXdhbCAoaW4gdGhlIGV2ZW50IG9mIGFuIGFpcmRyb3AsIGZvciBleGFtcGxlKS4KICAvLyBUaGUgZnVuY3Rpb24gY2FuIG9ubHkgYmUgY2FsbGVkIGlmIHRoZXJlIGlzIG5vdCBjdXJyZW50bHkgYSB0b2tlbiBkaXN0cmlidXRpb24gCiAgZnVuY3Rpb24gZW5hYmxlVG9rZW5XaXRoZHJhd2FscyAoYWRkcmVzcyB0b2tlbkFkZHIsIGJvb2wgbm90RGVmYXVsdCkgcHVibGljIG9ubHlPd25lciBub1JlZW50cmFuY3kgewogICAgcmVxdWlyZSAoY29udHJhY3RTdGFnZSA9PSAzKTsKICAgIGlmIChub3REZWZhdWx0KSB7CiAgICAgIHJlcXVpcmUgKGFjdGl2ZVRva2VuICE9IDB4MDApOwogICAgfSBlbHNlIHsKICAgICAgYWN0aXZlVG9rZW4gPSB0b2tlbkFkZHI7CiAgICB9CiAgICB2YXIgZCA9IGRpc3RyaWJ1dGlvblt0b2tlbkFkZHJdOwogICAgcmVxdWlyZSAoZC5jbGFpbVJvdW5kID09IDAgfHwgZC5jbGFpbUNvdW50ID09IGNvbnRyaWJ1dG9yQ291bnQpOwogICAgZC50b2tlbiA9IEVSQzIwKHRva2VuQWRkcik7CiAgICB1aW50IGFtb3VudCA9IGQudG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgcmVxdWlyZSAoYW1vdW50ID4gMCk7CiAgICBpZiAoZmVlUGN0ID4gMCkgewogICAgICByZXF1aXJlIChkLnRva2VuLnRyYW5zZmVyKG93bmVyLF9hcHBseVBjdChhbW91bnQsZmVlUGN0KSkpOwogICAgfQogICAgZC5wY3QgPSBfdG9QY3QoZC50b2tlbi5iYWxhbmNlT2YodGhpcyksc3VibWl0dGVkQW1vdW50KTsKICAgIGQuY2xhaW1Db3VudCA9IDA7CiAgICBkLmNsYWltUm91bmQgPSBkLmNsYWltUm91bmQuYWRkKDEpOwogIH0KICAKICAvLyBUaGlzIGlzIGEgc3RhbmRhcmQgZnVuY3Rpb24gcmVxdWlyZWQgZm9yIEVSQzIyMyBjb21wYXRpYmlsaXR5LgogIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2sgKGFkZHJlc3MgZnJvbSwgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkgcHVibGljIHsKICAgIEVSQzIyM1JlY2VpdmVkIChmcm9tLCB2YWx1ZSk7CiAgfQogIAp9'.
	

]
