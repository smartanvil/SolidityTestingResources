Class {
	#name : #SRT741733ca54e0f052a092bdc95ba9897c2d56e04b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT741733ca54e0f052a092bdc95ba9897c2d56e04b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBFUkM3MjEgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9laXBzL2lzc3Vlcy83MjEKICovCmNvbnRyYWN0IEVSQzcyMSB7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF90b2tlbklkKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX2FwcHJvdmVkLCB1aW50MjU2IF90b2tlbklkKTsKCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9iYWxhbmNlKTsKICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgX293bmVyKTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKfQoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogIC8qKgogICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgKi8KICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBTdWJzdHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgKi8KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICAvKioKICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IEV0aGVySXNsYW5kcyBpcyBPd25hYmxlLCBFUkM3MjEgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgLyoqKiBFVkVOVFMgKioqLwogICAgZXZlbnQgTmV3SXNsYW5kKHVpbnQyNTYgdG9rZW5JZCwgYnl0ZXMzMiBuYW1lLCBhZGRyZXNzIG93bmVyKTsKICAgIGV2ZW50IElzbGFuZFNvbGQodWludDI1NiB0b2tlbklkLCB1aW50MjU2IG9sZFByaWNlLCB1aW50MjU2IG5ld1ByaWNlLCBhZGRyZXNzIHByZXZPd25lciwgYWRkcmVzcyB3aW5uZXIsIGJ5dGVzMzIgbmFtZSk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CiAgICBldmVudCBEaXZpZGVuZHNQYWlkKGFkZHJlc3MgdG8sIHVpbnQyNTYgYW1vdW50LCBieXRlczMyIGRpdlR5cGUpOwogICAgZXZlbnQgU2hpcHNCb3VnaHQodWludDI1NiB0b2tlbklkLCBhZGRyZXNzIG93bmVyKTsKICAgIGV2ZW50IElzbGFuZEF0dGFja2VkKHVpbnQyNTYgYXR0YWNrZXJJZCwgdWludDI1NiB0YXJnZXRJZCwgdWludDI1NiB0cmVhc3VyeVN0b2xlbik7CiAgICBldmVudCBUcmVhc3VyeVdpdGhkcmF3bih1aW50MjU2IHRva2VuSWQpOwoKICAgIC8qKiogU1RSVUNUUyAqKiovCiAgICBzdHJ1Y3QgSXNsYW5kIHsKICAgICAgICBieXRlczMyIG5hbWU7CiAgICAgICAgYWRkcmVzcyBvd25lcjsKICAgICAgICB1aW50MjU2IHByaWNlOwogICAgICAgIHVpbnQyNTYgdHJlYXN1cnk7CiAgICAgICAgdWludDI1NiB0cmVhc3VyeV9uZXh0X3dpdGhkcmF3YWxfYmxvY2s7CiAgICAgICAgdWludDI1NiBwcmV2aW91c19wcmljZTsKICAgICAgICB1aW50MjU2IGF0dGFja19zaGlwc19jb3VudDsKICAgICAgICB1aW50MjU2IGRlZmVuc2Vfc2hpcHNfY291bnQ7CiAgICAgICAgdWludDI1NiB0cmFuc2FjdGlvbnNfY291bnQ7CiAgICAgICAgYWRkcmVzcyBhcHByb3ZlX3RyYW5zZmVyX3RvOwogICAgICAgIGFkZHJlc3NbMl0gcHJldmlvdXNfb3duZXJzOwogICAgfQoKICAgIHN0cnVjdCBJc2xhbmRCYXR0bGVTdGF0cyB7CiAgICAgICAgdWludDI1NiBhdHRhY2tzX3dvbjsKICAgICAgICB1aW50MjU2IGF0dGFja3NfbG9zdDsKICAgICAgICB1aW50MjU2IGRlZmVuc2VzX3dvbjsKICAgICAgICB1aW50MjU2IGRlZmVuc2VzX2xvc3Q7CiAgICAgICAgdWludDI1NiB0cmVhc3VyeV9zdG9sZW47CiAgICAgICAgdWludDI1NiB0cmVhc3VyeV9sb3N0OwogICAgICAgIHVpbnQyNTYgYXR0YWNrX2Nvb2xkb3duOwogICAgICAgIHVpbnQyNTYgZGVmZW5zZV9jb29sZG93bjsKICAgIH0KCiAgICAvKioqIENPTlNUQU5UUyAqKiovCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IE5BTUUgPSAiRXRoZXJJc2xhbmRzIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1lNQk9MID0gIkVJUyI7CgogICAgYm9vbCBwdWJsaWMgbWFpbnRlbmFuY2UgPSB0cnVlOwogICAgdWludDI1NiBpc2xhbmRzX2NvdW50OwoKICAgIHVpbnQyNTYgc2hpcFByaWNlID0gMC4wMSBldGhlcjsKICAgIHVpbnQyNTYgd2l0aGRyYXdhbEJsb2Nrc0Nvb2xkb3duID0gNzIwOwogICAgdWludDI1NiBiYXR0bGVfY29vbGRvd24gPSA0MDsKICAgIGFkZHJlc3MgbV9hZGRyZXNzID0gMHg5QkIzMzY0QmFhNWRiZmNhYTYxZWUwQTc5YTljQTE3MzU5RmM3YkJmOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIG93bmVyQ291bnQ7CiAgICBtYXBwaW5nKHVpbnQyNTYgPT4gSXNsYW5kKSBwcml2YXRlIGlzbGFuZHM7CiAgICBtYXBwaW5nKHVpbnQyNTYgPT4gSXNsYW5kQmF0dGxlU3RhdHMpIHByaXZhdGUgaXNsYW5kQmF0dGxlU3RhdHM7CgogICAgLyoqKiBERUZBVUxUIE1FVEhPRFMgKioqLwogICAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7cmV0dXJuIFNZTUJPTDt9CgogICAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykge3JldHVybiBOQU1FO30KCiAgICBmdW5jdGlvbiBpbXBsZW1lbnRzRVJDNzIxKCkgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCkge3JldHVybiB0cnVlO30KCiAgICBmdW5jdGlvbiBFdGhlcklzbGFuZHMoKSBwdWJsaWMgewogICAgfQoKICAgIC8qKiBQVUJMSUMgTUVUSE9EUyAqKi8KICAgIGZ1bmN0aW9uIGNyZWF0ZUlzbGFuZChieXRlczMyIF9uYW1lLCB1aW50MjU2IF9wcmljZSwgYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX2F0dGFja19zaGlwc19jb3VudCwgdWludDI1NiBfZGVmZW5zZV9zaGlwc19jb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIF9jcmVhdGVfaXNsYW5kKF9uYW1lLCBfb3duZXIsIF9wcmljZSwgMCwgX2F0dGFja19zaGlwc19jb3VudCwgX2RlZmVuc2Vfc2hpcHNfY291bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGltcG9ydElzbGFuZChieXRlczMyIF9uYW1lLCBhZGRyZXNzWzNdIF9vd25lcnMsIHVpbnQyNTZbN10gX2lzbGFuZF9kYXRhLCB1aW50MjU2WzhdIF9pc2xhbmRfYmF0dGxlX3N0YXRzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgX2ltcG9ydF9pc2xhbmQoX25hbWUsIF9vd25lcnMsIF9pc2xhbmRfZGF0YSwgX2lzbGFuZF9iYXR0bGVfc3RhdHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGF0dGFja0lzbGFuZCh1aW50MjU2IF9hdHRhY2tlcl9pZCwgdWludDI1NiBfdGFyZ2V0X2lkKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShtYWludGVuYW5jZSA9PSBmYWxzZSk7CiAgICAgICAgSXNsYW5kIHN0b3JhZ2UgYXR0YWNrZXJJc2xhbmQgPSBpc2xhbmRzW19hdHRhY2tlcl9pZF07CiAgICAgICAgSXNsYW5kQmF0dGxlU3RhdHMgc3RvcmFnZSBhdHRhY2tlcklzbGFuZEJhdHRsZVN0YXRzID0gaXNsYW5kQmF0dGxlU3RhdHNbX2F0dGFja2VyX2lkXTsKCiAgICAgICAgSXNsYW5kIHN0b3JhZ2UgZGVmZW5kZXJJc2xhbmQgPSBpc2xhbmRzW190YXJnZXRfaWRdOwogICAgICAgIElzbGFuZEJhdHRsZVN0YXRzIHN0b3JhZ2UgZGVmZW5kZXJJc2xhbmRCYXR0bGVTdGF0cyA9IGlzbGFuZEJhdHRsZVN0YXRzW190YXJnZXRfaWRdOwoKICAgICAgICByZXF1aXJlKGF0dGFja2VySXNsYW5kLm93bmVyID09IG1zZy5zZW5kZXIpOwogICAgICAgIHJlcXVpcmUoYXR0YWNrZXJJc2xhbmQub3duZXIgIT0gZGVmZW5kZXJJc2xhbmQub3duZXIpOwogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA9PSAwKTsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+PSBhdHRhY2tlcklzbGFuZEJhdHRsZVN0YXRzLmF0dGFja19jb29sZG93bik7CiAgICAgICAgcmVxdWlyZShibG9jay5udW1iZXIgPj0gZGVmZW5kZXJJc2xhbmRCYXR0bGVTdGF0cy5kZWZlbnNlX2Nvb2xkb3duKTsKICAgICAgICByZXF1aXJlKGF0dGFja2VySXNsYW5kLmF0dGFja19zaGlwc19jb3VudCA+IDApOyAvLyBhdHRhY2tlciBtdXN0IGhhdmUgYXQgbGVhc3QgMSBhdHRhY2sgc2hpcAogICAgICAgIHJlcXVpcmUoYXR0YWNrZXJJc2xhbmQuYXR0YWNrX3NoaXBzX2NvdW50ID4gZGVmZW5kZXJJc2xhbmQuZGVmZW5zZV9zaGlwc19jb3VudCk7CgogICAgICAgIHVpbnQyNTYgZ29vZHNfc3RvbGVuID0gU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihkZWZlbmRlcklzbGFuZC50cmVhc3VyeSwgMTAwKSwgMjUpOwoKICAgICAgICBkZWZlbmRlcklzbGFuZC50cmVhc3VyeSA9IFNhZmVNYXRoLnN1YihkZWZlbmRlcklzbGFuZC50cmVhc3VyeSwgZ29vZHNfc3RvbGVuKTsKCiAgICAgICAgYXR0YWNrZXJJc2xhbmRCYXR0bGVTdGF0cy5hdHRhY2tzX3dvbisrOwogICAgICAgIGF0dGFja2VySXNsYW5kQmF0dGxlU3RhdHMudHJlYXN1cnlfc3RvbGVuID0gU2FmZU1hdGguYWRkKGF0dGFja2VySXNsYW5kQmF0dGxlU3RhdHMudHJlYXN1cnlfc3RvbGVuLCBnb29kc19zdG9sZW4pOwoKICAgICAgICBkZWZlbmRlcklzbGFuZEJhdHRsZVN0YXRzLmRlZmVuc2VzX2xvc3QrKzsKICAgICAgICBkZWZlbmRlcklzbGFuZEJhdHRsZVN0YXRzLnRyZWFzdXJ5X2xvc3QgPSBTYWZlTWF0aC5hZGQoZGVmZW5kZXJJc2xhbmRCYXR0bGVTdGF0cy50cmVhc3VyeV9sb3N0LCBnb29kc19zdG9sZW4pOwoKICAgICAgICB1aW50MjU2IGNvb2xkb3duX2Jsb2NrID0gYmxvY2subnVtYmVyICsgYmF0dGxlX2Nvb2xkb3duOwogICAgICAgIGF0dGFja2VySXNsYW5kQmF0dGxlU3RhdHMuYXR0YWNrX2Nvb2xkb3duID0gY29vbGRvd25fYmxvY2s7CiAgICAgICAgZGVmZW5kZXJJc2xhbmRCYXR0bGVTdGF0cy5kZWZlbnNlX2Nvb2xkb3duID0gY29vbGRvd25fYmxvY2s7CgogICAgICAgIHVpbnQyNTYgZ29vZHNfdG9fdHJlYXN1cnkgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGdvb2RzX3N0b2xlbiwgMTAwKSwgNzUpOwoKICAgICAgICBhdHRhY2tlcklzbGFuZC50cmVhc3VyeSA9IFNhZmVNYXRoLmFkZChhdHRhY2tlcklzbGFuZC50cmVhc3VyeSwgZ29vZHNfdG9fdHJlYXN1cnkpOwoKICAgICAgICAvLyAyJSBvZiBhdHRhY2tlciBhcm15IGFuZCAxMCUgb2YgZGVmZW5kZXIgYXJteSBpcyBkZXN0cm95ZWQKICAgICAgICBhdHRhY2tlcklzbGFuZC5hdHRhY2tfc2hpcHNfY291bnQgPSBTYWZlTWF0aC5zdWIoYXR0YWNrZXJJc2xhbmQuYXR0YWNrX3NoaXBzX2NvdW50LCBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGF0dGFja2VySXNsYW5kLmF0dGFja19zaGlwc19jb3VudCwgMTAwKSwgMikpOwogICAgICAgIGRlZmVuZGVySXNsYW5kLmRlZmVuc2Vfc2hpcHNfY291bnQgPSBTYWZlTWF0aC5zdWIoZGVmZW5kZXJJc2xhbmQuZGVmZW5zZV9zaGlwc19jb3VudCwgU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihkZWZlbmRlcklzbGFuZC5kZWZlbnNlX3NoaXBzX2NvdW50LCAxMDApLCAxMCkpOwoKICAgICAgICAvLyBEaXZpZGVuZHMKICAgICAgICB1aW50MjU2IGdvb2RzX2Zvcl9jdXJyZW50X293bmVyID0gU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihnb29kc19zdG9sZW4sIDEwMCksIDE1KTsKICAgICAgICB1aW50MjU2IGdvb2RzX2Zvcl9wcmV2aW91c19vd25lcl8xID0gU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihnb29kc19zdG9sZW4sIDEwMCksIDYpOwogICAgICAgIHVpbnQyNTYgZ29vZHNfZm9yX3ByZXZpb3VzX293bmVyXzIgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGdvb2RzX3N0b2xlbiwgMTAwKSwgMyk7CiAgICAgICAgdWludDI1NiBnb29kc19mb3JfZGV2ID0gU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihnb29kc19zdG9sZW4sIDEwMCksIDEpOwoKICAgICAgICBhdHRhY2tlcklzbGFuZC5vd25lci50cmFuc2Zlcihnb29kc19mb3JfY3VycmVudF9vd25lcik7CiAgICAgICAgYXR0YWNrZXJJc2xhbmQucHJldmlvdXNfb3duZXJzWzBdLnRyYW5zZmVyKGdvb2RzX2Zvcl9wcmV2aW91c19vd25lcl8xKTsKICAgICAgICBhdHRhY2tlcklzbGFuZC5wcmV2aW91c19vd25lcnNbMV0udHJhbnNmZXIoZ29vZHNfZm9yX3ByZXZpb3VzX293bmVyXzIpOwoKICAgICAgICAvL1NwbGl0IGRldiBmZWUKICAgICAgICBtX2FkZHJlc3MudHJhbnNmZXIoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihnb29kc19mb3JfZGV2LCAxMDApLCAyMCkpOwogICAgICAgIG93bmVyLnRyYW5zZmVyKFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYoZ29vZHNfZm9yX2RldiwgMTAwKSwgODApKTsKCiAgICAgICAgSXNsYW5kQXR0YWNrZWQoX2F0dGFja2VyX2lkLCBfdGFyZ2V0X2lkLCBnb29kc19zdG9sZW4pOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVNoaXBzKHVpbnQyNTYgX2lzbGFuZF9pZCwgdWludDI1NiBfc2hpcHNfdG9fYnV5LCBib29sIF9pc19hdHRhY2tfc2hpcHMpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKG1haW50ZW5hbmNlID09IGZhbHNlKTsKICAgICAgICBJc2xhbmQgc3RvcmFnZSBpc2xhbmQgPSBpc2xhbmRzW19pc2xhbmRfaWRdOwoKICAgICAgICB1aW50MjU2IHRvdGFsUHJpY2UgPSBTYWZlTWF0aC5tdWwoX3NoaXBzX3RvX2J1eSwgc2hpcFByaWNlKTsKICAgICAgICByZXF1aXJlKGlzbGFuZC5vd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gdG90YWxQcmljZSk7CgogICAgICAgIGlmIChfaXNfYXR0YWNrX3NoaXBzKSB7CiAgICAgICAgICAgIGlzbGFuZC5hdHRhY2tfc2hpcHNfY291bnQgPSBTYWZlTWF0aC5hZGQoaXNsYW5kLmF0dGFja19zaGlwc19jb3VudCwgX3NoaXBzX3RvX2J1eSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaXNsYW5kLmRlZmVuc2Vfc2hpcHNfY291bnQgPSBTYWZlTWF0aC5hZGQoaXNsYW5kLmRlZmVuc2Vfc2hpcHNfY291bnQsIF9zaGlwc190b19idXkpOwogICAgICAgIH0KCiAgICAgICAgLy8gRGl2aWRlbmRzCiAgICAgICAgdWludDI1NiB0cmVhc3VyeV9kaXYgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KHRvdGFsUHJpY2UsIDEwMCksIDgwKTsKICAgICAgICB1aW50MjU2IGRldl9kaXYgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KHRvdGFsUHJpY2UsIDEwMCksIDE3KTsKICAgICAgICB1aW50MjU2IHByZXZpb3VzX293bmVyX2RpdiA9IFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYodG90YWxQcmljZSwgMTAwKSwgMik7CiAgICAgICAgdWludDI1NiBwcmV2aW91c19vd25lcjJfZGl2ID0gU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdih0b3RhbFByaWNlLCAxMDApLCAxKTsKCiAgICAgICAgaXNsYW5kLnByZXZpb3VzX293bmVyc1swXS50cmFuc2ZlcihwcmV2aW91c19vd25lcl9kaXYpOwogICAgICAgIC8vZGl2cyBmb3IgMXN0IHByZXZpb3VzIG93bmVyCiAgICAgICAgaXNsYW5kLnByZXZpb3VzX293bmVyc1sxXS50cmFuc2ZlcihwcmV2aW91c19vd25lcjJfZGl2KTsKICAgICAgICAvL2RpdnMgZm9yIDJuZCBwcmV2aW91cyBvd25lcgogICAgICAgIGlzbGFuZC50cmVhc3VyeSA9IFNhZmVNYXRoLmFkZCh0cmVhc3VyeV9kaXYsIGlzbGFuZC50cmVhc3VyeSk7CiAgICAgICAgLy8gZGl2cyBmb3IgdHJlYXN1cnkKCiAgICAgICAgLy9TcGxpdCBkZXYgZmVlCiAgICAgICAgdWludDI1NiBtX2ZlZSA9IFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYoZGV2X2RpdiwgMTAwKSwgMjApOwogICAgICAgIHVpbnQyNTYgZF9mZWUgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGRldl9kaXYsIDEwMCksIDgwKTsKICAgICAgICBtX2FkZHJlc3MudHJhbnNmZXIobV9mZWUpOwogICAgICAgIG93bmVyLnRyYW5zZmVyKGRfZmVlKTsKCiAgICAgICAgRGl2aWRlbmRzUGFpZChpc2xhbmQucHJldmlvdXNfb3duZXJzWzBdLCBwcmV2aW91c19vd25lcl9kaXYsICJidXlTaGlwUHJldmlvdXNPd25lciIpOwogICAgICAgIERpdmlkZW5kc1BhaWQoaXNsYW5kLnByZXZpb3VzX293bmVyc1sxXSwgcHJldmlvdXNfb3duZXIyX2RpdiwgImJ1eVNoaXBQcmV2aW91c093bmVyMiIpOwoKICAgICAgICBTaGlwc0JvdWdodChfaXNsYW5kX2lkLCBpc2xhbmQub3duZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3VHJlYXN1cnkodWludDI1NiBfaXNsYW5kX2lkKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShtYWludGVuYW5jZSA9PSBmYWxzZSk7CiAgICAgICAgSXNsYW5kIHN0b3JhZ2UgaXNsYW5kID0gaXNsYW5kc1tfaXNsYW5kX2lkXTsKCiAgICAgICAgcmVxdWlyZShpc2xhbmQub3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoaXNsYW5kLnRyZWFzdXJ5ID4gMCk7CiAgICAgICAgcmVxdWlyZShibG9jay5udW1iZXIgPj0gaXNsYW5kLnRyZWFzdXJ5X25leHRfd2l0aGRyYXdhbF9ibG9jayk7CgogICAgICAgIHVpbnQyNTYgdHJlYXN1cnlfdG9fd2l0aGRyYXcgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGlzbGFuZC50cmVhc3VyeSwgMTAwKSwgMTApOwogICAgICAgIHVpbnQyNTYgdHJlYXN1cnlfZm9yX3ByZXZpb3VzX293bmVyXzEgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KHRyZWFzdXJ5X3RvX3dpdGhkcmF3LCAxMDApLCAyKTsKICAgICAgICB1aW50MjU2IHRyZWFzdXJ5X2Zvcl9wcmV2aW91c19vd25lcl8yID0gU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdih0cmVhc3VyeV90b193aXRoZHJhdywgMTAwKSwgMSk7CiAgICAgICAgdWludDI1NiB0cmVhc3VyeV9mb3JfcHJldmlvdXNfb3duZXJzID0gU2FmZU1hdGguYWRkKHRyZWFzdXJ5X2Zvcl9wcmV2aW91c19vd25lcl8yLCB0cmVhc3VyeV9mb3JfcHJldmlvdXNfb3duZXJfMSk7CiAgICAgICAgdWludDI1NiB0cmVhc3VyeV9mb3JfY3VycmVudF9vd25lciA9IFNhZmVNYXRoLnN1Yih0cmVhc3VyeV90b193aXRoZHJhdywgdHJlYXN1cnlfZm9yX3ByZXZpb3VzX293bmVycyk7CgogICAgICAgIGlzbGFuZC5vd25lci50cmFuc2Zlcih0cmVhc3VyeV9mb3JfY3VycmVudF9vd25lcik7CiAgICAgICAgaXNsYW5kLnByZXZpb3VzX293bmVyc1swXS50cmFuc2Zlcih0cmVhc3VyeV9mb3JfcHJldmlvdXNfb3duZXJfMSk7CiAgICAgICAgaXNsYW5kLnByZXZpb3VzX293bmVyc1sxXS50cmFuc2Zlcih0cmVhc3VyeV9mb3JfcHJldmlvdXNfb3duZXJfMik7CgogICAgICAgIGlzbGFuZC50cmVhc3VyeSA9IFNhZmVNYXRoLnN1Yihpc2xhbmQudHJlYXN1cnksIHRyZWFzdXJ5X3RvX3dpdGhkcmF3KTsKICAgICAgICBpc2xhbmQudHJlYXN1cnlfbmV4dF93aXRoZHJhd2FsX2Jsb2NrID0gYmxvY2subnVtYmVyICsgd2l0aGRyYXdhbEJsb2Nrc0Nvb2xkb3duOwogICAgICAgIC8vc2V0dGluZyBjb29sZG93biBmb3IgbmV4dCB3aXRoZHJhd2FsCgogICAgICAgIERpdmlkZW5kc1BhaWQoaXNsYW5kLnByZXZpb3VzX293bmVyc1swXSwgdHJlYXN1cnlfZm9yX3ByZXZpb3VzX293bmVyXzEsICJ3aXRoZHJhd2FsUHJldmlvdXNPd25lciIpOwogICAgICAgIERpdmlkZW5kc1BhaWQoaXNsYW5kLnByZXZpb3VzX293bmVyc1sxXSwgdHJlYXN1cnlfZm9yX3ByZXZpb3VzX293bmVyXzIsICJ3aXRoZHJhd2FsUHJldmlvdXNPd25lcjIiKTsKICAgICAgICBEaXZpZGVuZHNQYWlkKGlzbGFuZC5vd25lciwgdHJlYXN1cnlfZm9yX2N1cnJlbnRfb3duZXIsICJ3aXRoZHJhd2FsT3duZXIiKTsKCiAgICAgICAgVHJlYXN1cnlXaXRoZHJhd24oX2lzbGFuZF9pZCk7CiAgICB9CgogICAgZnVuY3Rpb24gcHVyY2hhc2UodWludDI1NiBfaXNsYW5kX2lkKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShtYWludGVuYW5jZSA9PSBmYWxzZSk7CiAgICAgICAgSXNsYW5kIHN0b3JhZ2UgaXNsYW5kID0gaXNsYW5kc1tfaXNsYW5kX2lkXTsKCiAgICAgICAgcmVxdWlyZShpc2xhbmQub3duZXIgIT0gbXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IGlzbGFuZC5wcmljZSk7CgogICAgICAgIHVpbnQyNTYgZXhjZXNzID0gU2FmZU1hdGguc3ViKG1zZy52YWx1ZSwgaXNsYW5kLnByaWNlKTsKICAgICAgICBpZiAoaXNsYW5kLnByZXZpb3VzX3ByaWNlID4gMCkgewogICAgICAgICAgICB1aW50MjU2IG93bmVyc19jdXQgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGlzbGFuZC5wcmljZSwgMTYwKSwgMTMwKTsKICAgICAgICAgICAgdWludDI1NiB0cmVhc3VyeV9jdXQgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGlzbGFuZC5wcmljZSwgMTYwKSwgMTgpOwogICAgICAgICAgICB1aW50MjU2IGRldl9mZWUgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGlzbGFuZC5wcmljZSwgMTYwKSwgNyk7CiAgICAgICAgICAgIHVpbnQyNTYgcHJldmlvdXNfb3duZXJfZmVlID0gU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihpc2xhbmQucHJpY2UsIDE2MCksIDMpOwogICAgICAgICAgICB1aW50MjU2IHByZXZpb3VzX293bmVyX2ZlZTIgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGlzbGFuZC5wcmljZSwgMTYwKSwgMik7CgogICAgICAgICAgICBpZiAoaXNsYW5kLm93bmVyICE9IGFkZHJlc3ModGhpcykpIHsKICAgICAgICAgICAgICAgIGlzbGFuZC5vd25lci50cmFuc2Zlcihvd25lcnNfY3V0KTsKICAgICAgICAgICAgICAgIC8vZGl2cyBmb3IgY3VycmVudCBpc2xhbmQgb3duZXIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaXNsYW5kLnByZXZpb3VzX293bmVyc1swXS50cmFuc2ZlcihwcmV2aW91c19vd25lcl9mZWUpOwogICAgICAgICAgICAvL2RpdnMgZm9yIDFzdCBwcmV2aW91cyBvd25lcgogICAgICAgICAgICBpc2xhbmQucHJldmlvdXNfb3duZXJzWzFdLnRyYW5zZmVyKHByZXZpb3VzX293bmVyX2ZlZTIpOwogICAgICAgICAgICAvL2RpdnMgZm9yIDJuZCBwcmV2aW91cyBvd25lcgogICAgICAgICAgICBpc2xhbmQudHJlYXN1cnkgPSBTYWZlTWF0aC5hZGQodHJlYXN1cnlfY3V0LCBpc2xhbmQudHJlYXN1cnkpOwogICAgICAgICAgICAvLyBkaXZzIGZvciB0cmVhc3VyeQoKICAgICAgICAgICAgLy9TcGxpdCBkZXYgZmVlCiAgICAgICAgICAgIHVpbnQyNTYgbV9mZWUgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGRldl9mZWUsIDEwMCksIDIwKTsKICAgICAgICAgICAgdWludDI1NiBkX2ZlZSA9IFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYoZGV2X2ZlZSwgMTAwKSwgODApOwogICAgICAgICAgICBtX2FkZHJlc3MudHJhbnNmZXIobV9mZWUpOwogICAgICAgICAgICBvd25lci50cmFuc2ZlcihkX2ZlZSk7CgogICAgICAgICAgICBEaXZpZGVuZHNQYWlkKGlzbGFuZC5wcmV2aW91c19vd25lcnNbMF0sIHByZXZpb3VzX293bmVyX2ZlZSwgInByZXZpb3VzT3duZXIiKTsKICAgICAgICAgICAgRGl2aWRlbmRzUGFpZChpc2xhbmQucHJldmlvdXNfb3duZXJzWzFdLCBwcmV2aW91c19vd25lcl9mZWUyLCAicHJldmlvdXNPd25lcjIiKTsKICAgICAgICAgICAgRGl2aWRlbmRzUGFpZChpc2xhbmQub3duZXIsIG93bmVyc19jdXQsICJvd25lciIpOwogICAgICAgICAgICBEaXZpZGVuZHNQYWlkKG93bmVyLCBkZXZfZmVlLCAiZGV2Iik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaXNsYW5kLm93bmVyLnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgICAgfQoKICAgICAgICBpc2xhbmQucHJldmlvdXNfcHJpY2UgPSBpc2xhbmQucHJpY2U7CiAgICAgICAgaXNsYW5kLnRyZWFzdXJ5X25leHRfd2l0aGRyYXdhbF9ibG9jayA9IGJsb2NrLm51bWJlciArIHdpdGhkcmF3YWxCbG9ja3NDb29sZG93bjsKICAgICAgICBhZGRyZXNzIF9vbGRfb3duZXIgPSBpc2xhbmQub3duZXI7CgogICAgICAgIGlzbGFuZC5wcmljZSA9IFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYoaXNsYW5kLnByaWNlLCAxMDApLCAxNjApOwoKICAgICAgICAvL0NoYW5nZSBvd25lcnMKICAgICAgICBpc2xhbmQucHJldmlvdXNfb3duZXJzWzFdID0gaXNsYW5kLnByZXZpb3VzX293bmVyc1swXTsKICAgICAgICBpc2xhbmQucHJldmlvdXNfb3duZXJzWzBdID0gaXNsYW5kLm93bmVyOwogICAgICAgIGlzbGFuZC5vd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgaXNsYW5kLnRyYW5zYWN0aW9uc19jb3VudCsrOwoKICAgICAgICBvd25lckNvdW50W19vbGRfb3duZXJdIC09IDE7CiAgICAgICAgb3duZXJDb3VudFtpc2xhbmQub3duZXJdICs9IDE7CgogICAgICAgIGlzbGFuZEJhdHRsZVN0YXRzW19pc2xhbmRfaWRdLmF0dGFja19jb29sZG93biA9IGJhdHRsZV9jb29sZG93bjsgLy8gaW1tdW5pdHkgZm9yIDEwIG1pbnMKICAgICAgICBpc2xhbmRCYXR0bGVTdGF0c1tfaXNsYW5kX2lkXS5kZWZlbnNlX2Nvb2xkb3duID0gYmF0dGxlX2Nvb2xkb3duOyAvLyBpbW11bml0eSBmb3IgMTAgbWlucwoKICAgICAgICBUcmFuc2Zlcihfb2xkX293bmVyLCBpc2xhbmQub3duZXIsIF9pc2xhbmRfaWQpOwogICAgICAgIElzbGFuZFNvbGQoX2lzbGFuZF9pZCwgaXNsYW5kLnByZXZpb3VzX3ByaWNlLCBpc2xhbmQucHJpY2UsIF9vbGRfb3duZXIsIGlzbGFuZC5vd25lciwgaXNsYW5kLm5hbWUpOwoKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV4Y2Vzcyk7CiAgICAgICAgLy9yZXR1cm5pbmcgZXhjZXNzCiAgICB9CgogICAgZnVuY3Rpb24gb25NYWludGVuYW5jZSgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBtYWludGVuYW5jZSA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gb2ZmTWFpbnRlbmFuY2UoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgbWFpbnRlbmFuY2UgPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpIHsKICAgICAgICByZXR1cm4gaXNsYW5kc19jb3VudDsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBvd25lckNvdW50W19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gcHJpY2VPZih1aW50MjU2IF9pc2xhbmRfaWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgcHJpY2UpIHsKICAgICAgICByZXR1cm4gaXNsYW5kc1tfaXNsYW5kX2lkXS5wcmljZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRJc2xhbmRCYXR0bGVTdGF0cyh1aW50MjU2IF9pc2xhbmRfaWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKAogICAgICAgIHVpbnQyNTYgaWQsCiAgICAgICAgdWludDI1NiBhdHRhY2tzX3dvbiwKICAgICAgICB1aW50MjU2IGF0dGFja3NfbG9zdCwKICAgICAgICB1aW50MjU2IGRlZmVuc2VzX3dvbiwKICAgICAgICB1aW50MjU2IGRlZmVuc2VzX2xvc3QsCiAgICAgICAgdWludDI1NiB0cmVhc3VyeV9zdG9sZW4sCiAgICAgICAgdWludDI1NiB0cmVhc3VyeV9sb3N0LAogICAgICAgIHVpbnQyNTYgYXR0YWNrX2Nvb2xkb3duLAogICAgICAgIHVpbnQyNTYgZGVmZW5zZV9jb29sZG93bgogICAgKSB7CiAgICAgICAgaWQgPSBfaXNsYW5kX2lkOwogICAgICAgIGF0dGFja3Nfd29uID0gaXNsYW5kQmF0dGxlU3RhdHNbX2lzbGFuZF9pZF0uYXR0YWNrc193b247CiAgICAgICAgYXR0YWNrc19sb3N0ID0gaXNsYW5kQmF0dGxlU3RhdHNbX2lzbGFuZF9pZF0uYXR0YWNrc19sb3N0OwogICAgICAgIGRlZmVuc2VzX3dvbiA9IGlzbGFuZEJhdHRsZVN0YXRzW19pc2xhbmRfaWRdLmRlZmVuc2VzX3dvbjsKICAgICAgICBkZWZlbnNlc19sb3N0ID0gaXNsYW5kQmF0dGxlU3RhdHNbX2lzbGFuZF9pZF0uZGVmZW5zZXNfbG9zdDsKICAgICAgICB0cmVhc3VyeV9zdG9sZW4gPSBpc2xhbmRCYXR0bGVTdGF0c1tfaXNsYW5kX2lkXS50cmVhc3VyeV9zdG9sZW47CiAgICAgICAgdHJlYXN1cnlfbG9zdCA9IGlzbGFuZEJhdHRsZVN0YXRzW19pc2xhbmRfaWRdLnRyZWFzdXJ5X2xvc3Q7CiAgICAgICAgYXR0YWNrX2Nvb2xkb3duID0gaXNsYW5kQmF0dGxlU3RhdHNbX2lzbGFuZF9pZF0uYXR0YWNrX2Nvb2xkb3duOwogICAgICAgIGRlZmVuc2VfY29vbGRvd24gPSBpc2xhbmRCYXR0bGVTdGF0c1tfaXNsYW5kX2lkXS5kZWZlbnNlX2Nvb2xkb3duOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldElzbGFuZCh1aW50MjU2IF9pc2xhbmRfaWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKAogICAgICAgIHVpbnQyNTYgaWQsCiAgICAgICAgYnl0ZXMzMiBpc2xhbmRfbmFtZSwKICAgICAgICBhZGRyZXNzIG93bmVyLAogICAgICAgIHVpbnQyNTYgcHJpY2UsCiAgICAgICAgdWludDI1NiB0cmVhc3VyeSwKICAgICAgICB1aW50MjU2IHRyZWFzdXJ5X25leHRfd2l0aGRyYXdhbF9ibG9jaywKICAgICAgICB1aW50MjU2IHByZXZpb3VzX3ByaWNlLAogICAgICAgIHVpbnQyNTYgYXR0YWNrX3NoaXBzX2NvdW50LAogICAgICAgIHVpbnQyNTYgZGVmZW5zZV9zaGlwc19jb3VudCwKICAgICAgICB1aW50MjU2IHRyYW5zYWN0aW9uc19jb3VudAogICAgKSB7CiAgICAgICAgaWQgPSBfaXNsYW5kX2lkOwogICAgICAgIGlzbGFuZF9uYW1lID0gaXNsYW5kc1tfaXNsYW5kX2lkXS5uYW1lOwogICAgICAgIG93bmVyID0gaXNsYW5kc1tfaXNsYW5kX2lkXS5vd25lcjsKICAgICAgICBwcmljZSA9IGlzbGFuZHNbX2lzbGFuZF9pZF0ucHJpY2U7CiAgICAgICAgdHJlYXN1cnkgPSBpc2xhbmRzW19pc2xhbmRfaWRdLnRyZWFzdXJ5OwogICAgICAgIHRyZWFzdXJ5X25leHRfd2l0aGRyYXdhbF9ibG9jayA9IGlzbGFuZHNbX2lzbGFuZF9pZF0udHJlYXN1cnlfbmV4dF93aXRoZHJhd2FsX2Jsb2NrOwogICAgICAgIHByZXZpb3VzX3ByaWNlID0gaXNsYW5kc1tfaXNsYW5kX2lkXS5wcmV2aW91c19wcmljZTsKICAgICAgICBhdHRhY2tfc2hpcHNfY291bnQgPSBpc2xhbmRzW19pc2xhbmRfaWRdLmF0dGFja19zaGlwc19jb3VudDsKICAgICAgICBkZWZlbnNlX3NoaXBzX2NvdW50ID0gaXNsYW5kc1tfaXNsYW5kX2lkXS5kZWZlbnNlX3NoaXBzX2NvdW50OwogICAgICAgIHRyYW5zYWN0aW9uc19jb3VudCA9IGlzbGFuZHNbX2lzbGFuZF9pZF0udHJhbnNhY3Rpb25zX2NvdW50OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldElzbGFuZFByZXZpb3VzT3duZXJzKHVpbnQyNTYgX2lzbGFuZF9pZCkgcHVibGljIHZpZXcgcmV0dXJucyAoCiAgICAgICAgYWRkcmVzc1syXSBwcmV2aW91c19vd25lcnMKICAgICkgewogICAgICAgIHByZXZpb3VzX293bmVycyA9IGlzbGFuZHNbX2lzbGFuZF9pZF0ucHJldmlvdXNfb3duZXJzOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldElzbGFuZHMoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2W10sIGFkZHJlc3NbXSwgdWludDI1NltdLCB1aW50MjU2W10sIHVpbnQyNTZbXSwgdWludDI1NltdLCB1aW50MjU2W10pIHsKICAgICAgICB1aW50MjU2W10gbWVtb3J5IGlkcyA9IG5ldyB1aW50MjU2W10oaXNsYW5kc19jb3VudCk7CiAgICAgICAgYWRkcmVzc1tdIG1lbW9yeSBvd25lcnMgPSBuZXcgYWRkcmVzc1tdKGlzbGFuZHNfY291bnQpOwogICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcHJpY2VzID0gbmV3IHVpbnQyNTZbXShpc2xhbmRzX2NvdW50KTsKICAgICAgICB1aW50MjU2W10gbWVtb3J5IHRyZWFzdXJpZXMgPSBuZXcgdWludDI1NltdKGlzbGFuZHNfY291bnQpOwogICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgYXR0YWNrX3NoaXBzX2NvdW50cyA9IG5ldyB1aW50MjU2W10oaXNsYW5kc19jb3VudCk7CiAgICAgICAgdWludDI1NltdIG1lbW9yeSBkZWZlbnNlX3NoaXBzX2NvdW50cyA9IG5ldyB1aW50MjU2W10oaXNsYW5kc19jb3VudCk7CiAgICAgICAgdWludDI1NltdIG1lbW9yeSB0cmFuc2FjdGlvbnNfY291bnQgPSBuZXcgdWludDI1NltdKGlzbGFuZHNfY291bnQpOwogICAgICAgIGZvciAodWludDI1NiBfaWQgPSAwOyBfaWQgPCBpc2xhbmRzX2NvdW50OyBfaWQrKykgewogICAgICAgICAgICBpZHNbX2lkXSA9IF9pZDsKICAgICAgICAgICAgb3duZXJzW19pZF0gPSBpc2xhbmRzW19pZF0ub3duZXI7CiAgICAgICAgICAgIHByaWNlc1tfaWRdID0gaXNsYW5kc1tfaWRdLnByaWNlOwogICAgICAgICAgICB0cmVhc3VyaWVzW19pZF0gPSBpc2xhbmRzW19pZF0udHJlYXN1cnk7CiAgICAgICAgICAgIGF0dGFja19zaGlwc19jb3VudHNbX2lkXSA9IGlzbGFuZHNbX2lkXS5hdHRhY2tfc2hpcHNfY291bnQ7CiAgICAgICAgICAgIGRlZmVuc2Vfc2hpcHNfY291bnRzW19pZF0gPSBpc2xhbmRzW19pZF0uZGVmZW5zZV9zaGlwc19jb3VudDsKICAgICAgICAgICAgdHJhbnNhY3Rpb25zX2NvdW50W19pZF0gPSBpc2xhbmRzW19pZF0udHJhbnNhY3Rpb25zX2NvdW50OwogICAgICAgIH0KICAgICAgICByZXR1cm4gKGlkcywgb3duZXJzLCBwcmljZXMsIHRyZWFzdXJpZXMsIGF0dGFja19zaGlwc19jb3VudHMsIGRlZmVuc2Vfc2hpcHNfY291bnRzLCB0cmFuc2FjdGlvbnNfY291bnQpOwogICAgfQoKICAgIC8qKiBQUklWQVRFIE1FVEhPRFMgKiovCiAgICBmdW5jdGlvbiBfY3JlYXRlX2lzbGFuZChieXRlczMyIF9uYW1lLCBhZGRyZXNzIF9vd25lciwgdWludDI1NiBfcHJpY2UsIHVpbnQyNTYgX3ByZXZpb3VzX3ByaWNlLCB1aW50MjU2IF9hdHRhY2tfc2hpcHNfY291bnQsIHVpbnQyNTYgX2RlZmVuc2Vfc2hpcHNfY291bnQpIHByaXZhdGUgewogICAgICAgIGlzbGFuZHNbaXNsYW5kc19jb3VudF0gPSBJc2xhbmQoewogICAgICAgICAgICBuYW1lIDogX25hbWUsCiAgICAgICAgICAgIG93bmVyIDogX293bmVyLAogICAgICAgICAgICBwcmljZSA6IF9wcmljZSwKICAgICAgICAgICAgdHJlYXN1cnkgOiAwLAogICAgICAgICAgICB0cmVhc3VyeV9uZXh0X3dpdGhkcmF3YWxfYmxvY2sgOiAwLAogICAgICAgICAgICBwcmV2aW91c19wcmljZSA6IF9wcmV2aW91c19wcmljZSwKICAgICAgICAgICAgYXR0YWNrX3NoaXBzX2NvdW50IDogX2F0dGFja19zaGlwc19jb3VudCwKICAgICAgICAgICAgZGVmZW5zZV9zaGlwc19jb3VudCA6IF9kZWZlbnNlX3NoaXBzX2NvdW50LAogICAgICAgICAgICB0cmFuc2FjdGlvbnNfY291bnQgOiAwLAogICAgICAgICAgICBhcHByb3ZlX3RyYW5zZmVyX3RvIDogYWRkcmVzcygwKSwKICAgICAgICAgICAgcHJldmlvdXNfb3duZXJzIDogW19vd25lciwgX293bmVyXQogICAgICAgICAgICB9KTsKCiAgICAgICAgaXNsYW5kQmF0dGxlU3RhdHNbaXNsYW5kc19jb3VudF0gPSBJc2xhbmRCYXR0bGVTdGF0cyh7CiAgICAgICAgICAgIGF0dGFja3Nfd29uIDogMCwKICAgICAgICAgICAgYXR0YWNrc19sb3N0IDogMCwKICAgICAgICAgICAgZGVmZW5zZXNfd29uIDogMCwKICAgICAgICAgICAgZGVmZW5zZXNfbG9zdCA6IDAsCiAgICAgICAgICAgIHRyZWFzdXJ5X3N0b2xlbiA6IDAsCiAgICAgICAgICAgIHRyZWFzdXJ5X2xvc3QgOiAwLAogICAgICAgICAgICBhdHRhY2tfY29vbGRvd24gOiAwLAogICAgICAgICAgICBkZWZlbnNlX2Nvb2xkb3duIDogMAogICAgICAgICAgICB9KTsKCiAgICAgICAgTmV3SXNsYW5kKGlzbGFuZHNfY291bnQsIF9uYW1lLCBfb3duZXIpOwogICAgICAgIFRyYW5zZmVyKGFkZHJlc3ModGhpcyksIF9vd25lciwgaXNsYW5kc19jb3VudCk7CiAgICAgICAgaXNsYW5kc19jb3VudCsrOwogICAgfQoKICAgIGZ1bmN0aW9uIF9pbXBvcnRfaXNsYW5kKGJ5dGVzMzIgX25hbWUsIGFkZHJlc3NbM10gX293bmVycywgdWludDI1Nls3XSBfaXNsYW5kX2RhdGEsIHVpbnQyNTZbOF0gX2lzbGFuZF9iYXR0bGVfc3RhdHMpIHByaXZhdGUgewogICAgICAgIGlzbGFuZHNbaXNsYW5kc19jb3VudF0gPSBJc2xhbmQoewogICAgICAgICAgICBuYW1lIDogX25hbWUsCiAgICAgICAgICAgIG93bmVyIDogX293bmVyc1swXSwKICAgICAgICAgICAgcHJpY2UgOiBfaXNsYW5kX2RhdGFbMF0sCiAgICAgICAgICAgIHRyZWFzdXJ5IDogX2lzbGFuZF9kYXRhWzFdLAogICAgICAgICAgICB0cmVhc3VyeV9uZXh0X3dpdGhkcmF3YWxfYmxvY2sgOiBfaXNsYW5kX2RhdGFbMl0sCiAgICAgICAgICAgIHByZXZpb3VzX3ByaWNlIDogX2lzbGFuZF9kYXRhWzNdLAogICAgICAgICAgICBhdHRhY2tfc2hpcHNfY291bnQgOiBfaXNsYW5kX2RhdGFbNF0sCiAgICAgICAgICAgIGRlZmVuc2Vfc2hpcHNfY291bnQgOiBfaXNsYW5kX2RhdGFbNV0sCiAgICAgICAgICAgIHRyYW5zYWN0aW9uc19jb3VudCA6IF9pc2xhbmRfZGF0YVs2XSwKICAgICAgICAgICAgYXBwcm92ZV90cmFuc2Zlcl90byA6IGFkZHJlc3MoMCksCiAgICAgICAgICAgIHByZXZpb3VzX293bmVycyA6IFtfb3duZXJzWzFdLCBfb3duZXJzWzJdXQogICAgICAgICAgICB9KTsKCiAgICAgICAgaXNsYW5kQmF0dGxlU3RhdHNbaXNsYW5kc19jb3VudF0gPSBJc2xhbmRCYXR0bGVTdGF0cyh7CiAgICAgICAgICAgIGF0dGFja3Nfd29uIDogX2lzbGFuZF9iYXR0bGVfc3RhdHNbMF0sCiAgICAgICAgICAgIGF0dGFja3NfbG9zdCA6IF9pc2xhbmRfYmF0dGxlX3N0YXRzWzFdLAogICAgICAgICAgICBkZWZlbnNlc193b24gOiBfaXNsYW5kX2JhdHRsZV9zdGF0c1syXSwKICAgICAgICAgICAgZGVmZW5zZXNfbG9zdCA6IF9pc2xhbmRfYmF0dGxlX3N0YXRzWzNdLAogICAgICAgICAgICB0cmVhc3VyeV9zdG9sZW4gOiBfaXNsYW5kX2JhdHRsZV9zdGF0c1s0XSwKICAgICAgICAgICAgdHJlYXN1cnlfbG9zdCA6IF9pc2xhbmRfYmF0dGxlX3N0YXRzWzVdLAogICAgICAgICAgICBhdHRhY2tfY29vbGRvd24gOiBfaXNsYW5kX2JhdHRsZV9zdGF0c1s2XSwKICAgICAgICAgICAgZGVmZW5zZV9jb29sZG93biA6IF9pc2xhbmRfYmF0dGxlX3N0YXRzWzddCiAgICAgICAgICAgIH0pOwoKICAgICAgICBOZXdJc2xhbmQoaXNsYW5kc19jb3VudCwgX25hbWUsIF9vd25lcnNbMF0pOwogICAgICAgIFRyYW5zZmVyKGFkZHJlc3ModGhpcyksIF9vd25lcnNbMF0sIGlzbGFuZHNfY291bnQpOwogICAgICAgIGlzbGFuZHNfY291bnQrKzsKICAgIH0KCiAgICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2lzbGFuZF9pZCkgcHJpdmF0ZSB7CiAgICAgICAgaXNsYW5kc1tfaXNsYW5kX2lkXS5vd25lciA9IF90bzsKICAgICAgICBpc2xhbmRzW19pc2xhbmRfaWRdLmFwcHJvdmVfdHJhbnNmZXJfdG8gPSBhZGRyZXNzKDApOwogICAgICAgIG93bmVyQ291bnRbX2Zyb21dIC09IDE7CiAgICAgICAgb3duZXJDb3VudFtfdG9dICs9IDE7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX2lzbGFuZF9pZCk7CiAgICB9CgogICAgLyoqKiBFUkMtNzIxIGNvbXBsaWFuY2UuICoqKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2lzbGFuZF9pZCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gaXNsYW5kc1tfaXNsYW5kX2lkXS5vd25lcik7CiAgICAgICAgaXNsYW5kc1tfaXNsYW5kX2lkXS5hcHByb3ZlX3RyYW5zZmVyX3RvID0gX3RvOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX2lzbGFuZF9pZCk7CiAgICB9CgogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF9pc2xhbmRfaWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpewogICAgICAgIG93bmVyID0gaXNsYW5kc1tfaXNsYW5kX2lkXS5vd25lcjsKICAgICAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfaXNsYW5kX2lkKSBwdWJsaWMgewogICAgICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBpc2xhbmRzW19pc2xhbmRfaWRdLm93bmVyOwogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKGlzbGFuZHNbX2lzbGFuZF9pZF0uYXBwcm92ZV90cmFuc2Zlcl90byA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBfdHJhbnNmZXIob2xkT3duZXIsIG1zZy5zZW5kZXIsIF9pc2xhbmRfaWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9pc2xhbmRfaWQpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBpc2xhbmRzW19pc2xhbmRfaWRdLm93bmVyKTsKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfaXNsYW5kX2lkKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2lzbGFuZF9pZCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9mcm9tID09IGlzbGFuZHNbX2lzbGFuZF9pZF0ub3duZXIpOwogICAgICAgIHJlcXVpcmUoaXNsYW5kc1tfaXNsYW5kX2lkXS5hcHByb3ZlX3RyYW5zZmVyX3RvID09IF90byk7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF9pc2xhbmRfaWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZ3JhZGVDb250cmFjdChhZGRyZXNzIF9uZXdDb250cmFjdCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgX25ld0NvbnRyYWN0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgZnVuY3Rpb24gQWRkRXRoICgpIHB1YmxpYyBwYXlhYmxlIHt9Cn0='.
	

]
