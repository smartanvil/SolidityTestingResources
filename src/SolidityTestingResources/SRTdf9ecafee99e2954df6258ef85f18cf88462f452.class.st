Class {
	#name : #SRTdf9ecafee99e2954df6258ef85f18cf88462f452,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdf9ecafee99e2954df6258ef85f18cf88462f452 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgpsaWJyYXJ5IFN0cmluZ1V0aWxzIHsKICAgIC8vIFRlc3RzIGZvciB1cHBlcmNhc2UgY2hhcmFjdGVycyBpbiBhIGdpdmVuIHN0cmluZwogICAgZnVuY3Rpb24gYWxsTG93ZXIoc3RyaW5nIG1lbW9yeSBfc3RyaW5nKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBieXRlcyBtZW1vcnkgYnl0ZXNTdHJpbmcgPSBieXRlcyhfc3RyaW5nKTsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBieXRlc1N0cmluZy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoKGJ5dGVzU3RyaW5nW2ldID49IDY1KSAmJiAoYnl0ZXNTdHJpbmdbaV0gPD0gOTApKSB7ICAvLyBVcHBlcmNhc2UgY2hhcmFjdGVycwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9Cgpjb250cmFjdCBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogICAgLyoqCiAgICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAgKiBhY2NvdW50LgogICAgKi8KICAgIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBlbWl0IE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KCn0KCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgV2l0aGRyYXdhYmxlIGlzIE93bmFibGUgewogICAgLy8gQWxsb3dzIG93bmVyIHRvIHdpdGhkcmF3IGV0aGVyIGZyb20gdGhlIGNvbnRyYWN0CiAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aGVyKGFkZHJlc3MgdG8pIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHRvLnRyYW5zZmVyKGFkZHJlc3ModGhpcykuYmFsYW5jZSk7CiAgICB9CgogICAgLy8gQWxsb3dzIG93bmVyIHRvIHdpdGhkcmF3IEVSQzIwIHRva2VucyBmcm9tIHRoZSBjb250cmFjdAogICAgZnVuY3Rpb24gd2l0aGRyYXdFUkMyMFRva2VuKGFkZHJlc3MgdG9rZW5BZGRyZXNzLCBhZGRyZXNzIHRvKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBFUkMyMEJhc2ljIHRva2VuID0gRVJDMjBCYXNpYyh0b2tlbkFkZHJlc3MpOwogICAgICAgIHRva2VuLnRyYW5zZmVyKHRvLCB0b2tlbi5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSkpOwogICAgfQp9CgoKaW50ZXJmYWNlIEh5ZHJvVG9rZW4gewogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBleHRlcm5hbCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwp9CgoKY29udHJhY3QgUmFpbmRyb3BDbGllbnQgaXMgV2l0aGRyYXdhYmxlIHsKICAgIC8vIEV2ZW50cyBmb3Igd2hlbiBhIHVzZXIgc2lnbnMgdXAgZm9yIFJhaW5kcm9wIENsaWVudCBhbmQgd2hlbiB0aGVpciBhY2NvdW50IGlzIGRlbGV0ZWQKICAgIGV2ZW50IFVzZXJTaWduVXAoc3RyaW5nIHVzZXJOYW1lLCBhZGRyZXNzIHVzZXJBZGRyZXNzLCBib29sIG9mZmljaWFsKTsKICAgIGV2ZW50IFVzZXJEZWxldGVkKHN0cmluZyB1c2VyTmFtZSwgYWRkcmVzcyB1c2VyQWRkcmVzcywgYm9vbCBvZmZpY2lhbCk7CiAgICAvLyBFdmVudHMgZm9yIHdoZW4gYW4gYXBwbGljYXRpb24gc2lnbnMgdXAgZm9yIFJhaW5kcm9wIENsaWVudCBhbmQgd2hlbiB0aGVpciBhY2NvdW50IGlzIGRlbGV0ZWQKICAgIGV2ZW50IEFwcGxpY2F0aW9uU2lnblVwKHN0cmluZyBhcHBsaWNhdGlvbk5hbWUsIGJvb2wgb2ZmaWNpYWwpOwogICAgZXZlbnQgQXBwbGljYXRpb25EZWxldGVkKHN0cmluZyBhcHBsaWNhdGlvbk5hbWUsIGJvb2wgb2ZmaWNpYWwpOwoKICAgIHVzaW5nIFN0cmluZ1V0aWxzIGZvciBzdHJpbmc7CgogICAgLy8gRmVlcyB0aGF0IHVub2ZmaWNpYWwgdXNlcnMvYXBwbGljYXRpb25zIG11c3QgcGF5IHRvIHNpZ24gdXAgZm9yIFJhaW5kcm9wIENsaWVudAogICAgdWludCBwdWJsaWMgdW5vZmZpY2lhbFVzZXJTaWduVXBGZWU7CiAgICB1aW50IHB1YmxpYyB1bm9mZmljaWFsQXBwbGljYXRpb25TaWduVXBGZWU7CgogICAgYWRkcmVzcyBwdWJsaWMgaHlkcm9Ub2tlbkFkZHJlc3M7CiAgICB1aW50IHB1YmxpYyBoeWRyb1N0YWtpbmdNaW5pbXVtOwoKICAgIC8vIFVzZXIgYWNjb3VudHMKICAgIHN0cnVjdCBVc2VyIHsKICAgICAgICBzdHJpbmcgdXNlck5hbWU7CiAgICAgICAgYWRkcmVzcyB1c2VyQWRkcmVzczsKICAgICAgICBib29sIG9mZmljaWFsOwogICAgICAgIGJvb2wgX2luaXRpYWxpemVkOwogICAgfQoKICAgIC8vIEFwcGxpY2F0aW9uIGFjY291bnRzCiAgICBzdHJ1Y3QgQXBwbGljYXRpb24gewogICAgICAgIHN0cmluZyBhcHBsaWNhdGlvbk5hbWU7CiAgICAgICAgYm9vbCBvZmZpY2lhbDsKICAgICAgICBib29sIF9pbml0aWFsaXplZDsKICAgIH0KCiAgICAvLyBJbnRlcm5hbGx5LCB1c2VycyBhbmQgYXBwbGljYXRpb25zIGFyZSBpZGVudGlmaWVkIGJ5IHRoZSBoYXNoIG9mIHRoZWlyIG5hbWVzCiAgICBtYXBwaW5nIChieXRlczMyID0+IFVzZXIpIGludGVybmFsIHVzZXJEaXJlY3Rvcnk7CiAgICBtYXBwaW5nIChieXRlczMyID0+IEFwcGxpY2F0aW9uKSBpbnRlcm5hbCBvZmZpY2lhbEFwcGxpY2F0aW9uRGlyZWN0b3J5OwogICAgbWFwcGluZyAoYnl0ZXMzMiA9PiBBcHBsaWNhdGlvbikgaW50ZXJuYWwgdW5vZmZpY2lhbEFwcGxpY2F0aW9uRGlyZWN0b3J5OwoKICAgIC8vIEFsbG93cyB0aGUgSHlkcm8gQVBJIHRvIHNpZ24gdXAgb2ZmaWNpYWwgdXNlcnMgd2l0aCB0aGVpciBhcHAtZ2VuZXJhdGVkIGFkZHJlc3MKICAgIGZ1bmN0aW9uIG9mZmljaWFsVXNlclNpZ25VcChzdHJpbmcgdXNlck5hbWUsIGFkZHJlc3MgdXNlckFkZHJlc3MpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIF91c2VyU2lnblVwKHVzZXJOYW1lLCB1c2VyQWRkcmVzcywgdHJ1ZSk7CiAgICB9CgogICAgLy8gQWxsb3dzIGFueW9uZSB0byBzaWduIHVwIGFzIGFuIHVub2ZmaWNpYWwgdXNlciB3aXRoIHRoZWlyIG93biBhZGRyZXNzCiAgICBmdW5jdGlvbiB1bm9mZmljaWFsVXNlclNpZ25VcChzdHJpbmcgdXNlck5hbWUpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKGJ5dGVzKHVzZXJOYW1lKS5sZW5ndGggPCAxMDApOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHVub2ZmaWNpYWxVc2VyU2lnblVwRmVlKTsKCiAgICAgICAgcmV0dXJuIF91c2VyU2lnblVwKHVzZXJOYW1lLCBtc2cuc2VuZGVyLCBmYWxzZSk7CiAgICB9CgogICAgLy8gQWxsb3dzIHRoZSBIeWRybyBBUEkgdG8gZGVsZXRlIG9mZmljaWFsIHVzZXJzIGlmZiB0aGV5J3ZlIHNpZ25lZCBrZWNjYWsyNTYoIkRlbGV0ZSIpIHdpdGggdGhlaXIgcHJpdmF0ZSBrZXkKICAgIGZ1bmN0aW9uIGRlbGV0ZVVzZXJGb3JVc2VyKHN0cmluZyB1c2VyTmFtZSwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGJ5dGVzMzIgdXNlck5hbWVIYXNoID0ga2VjY2FrMjU2KHVzZXJOYW1lKTsKICAgICAgICByZXF1aXJlKHVzZXJOYW1lSGFzaFRha2VuKHVzZXJOYW1lSGFzaCkpOwogICAgICAgIGFkZHJlc3MgdXNlckFkZHJlc3MgPSB1c2VyRGlyZWN0b3J5W3VzZXJOYW1lSGFzaF0udXNlckFkZHJlc3M7CiAgICAgICAgcmVxdWlyZShpc1NpZ25lZCh1c2VyQWRkcmVzcywga2VjY2FrMjU2KCJEZWxldGUiKSwgdiwgciwgcykpOwoKICAgICAgICBkZWxldGUgdXNlckRpcmVjdG9yeVt1c2VyTmFtZUhhc2hdOwoKICAgICAgICBlbWl0IFVzZXJEZWxldGVkKHVzZXJOYW1lLCB1c2VyQWRkcmVzcywgdHJ1ZSk7CiAgICB9CgogICAgLy8gQWxsb3dzIHVub2ZmaWNpYWwgdXNlcnMgdG8gZGVsZXRlIHRoZWlyIGFjY291bnQKICAgIGZ1bmN0aW9uIGRlbGV0ZVVzZXIoc3RyaW5nIHVzZXJOYW1lKSBwdWJsaWMgewogICAgICAgIGJ5dGVzMzIgdXNlck5hbWVIYXNoID0ga2VjY2FrMjU2KHVzZXJOYW1lKTsKICAgICAgICByZXF1aXJlKHVzZXJOYW1lSGFzaFRha2VuKHVzZXJOYW1lSGFzaCkpOwogICAgICAgIGFkZHJlc3MgdXNlckFkZHJlc3MgPSB1c2VyRGlyZWN0b3J5W3VzZXJOYW1lSGFzaF0udXNlckFkZHJlc3M7CiAgICAgICAgcmVxdWlyZSh1c2VyQWRkcmVzcyA9PSBtc2cuc2VuZGVyKTsKCiAgICAgICAgZGVsZXRlIHVzZXJEaXJlY3RvcnlbdXNlck5hbWVIYXNoXTsKCiAgICAgICAgZW1pdCBVc2VyRGVsZXRlZCh1c2VyTmFtZSwgdXNlckFkZHJlc3MsIHRydWUpOwogICAgfQoKICAgIC8vIEFsbG93cyB0aGUgSHlkcm8gQVBJIHRvIHNpZ24gdXAgb2ZmaWNpYWwgYXBwbGljYXRpb25zCiAgICBmdW5jdGlvbiBvZmZpY2lhbEFwcGxpY2F0aW9uU2lnblVwKHN0cmluZyBhcHBsaWNhdGlvbk5hbWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGJ5dGVzMzIgYXBwbGljYXRpb25OYW1lSGFzaCA9IGtlY2NhazI1NihhcHBsaWNhdGlvbk5hbWUpOwogICAgICAgIHJlcXVpcmUoIWFwcGxpY2F0aW9uTmFtZUhhc2hUYWtlbihhcHBsaWNhdGlvbk5hbWVIYXNoLCB0cnVlKSk7CiAgICAgICAgb2ZmaWNpYWxBcHBsaWNhdGlvbkRpcmVjdG9yeVthcHBsaWNhdGlvbk5hbWVIYXNoXSA9IEFwcGxpY2F0aW9uKGFwcGxpY2F0aW9uTmFtZSwgdHJ1ZSwgdHJ1ZSk7CgogICAgICAgIGVtaXQgQXBwbGljYXRpb25TaWduVXAoYXBwbGljYXRpb25OYW1lLCB0cnVlKTsKICAgIH0KCiAgICAvLyBBbGxvd3MgYW55b25lIHRvIHNpZ24gdXAgYXMgYW4gdW5vZmZpY2lhbCBhcHBsaWNhdGlvbgogICAgZnVuY3Rpb24gdW5vZmZpY2lhbEFwcGxpY2F0aW9uU2lnblVwKHN0cmluZyBhcHBsaWNhdGlvbk5hbWUpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKGJ5dGVzKGFwcGxpY2F0aW9uTmFtZSkubGVuZ3RoIDwgMTAwKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSB1bm9mZmljaWFsQXBwbGljYXRpb25TaWduVXBGZWUpOwogICAgICAgIHJlcXVpcmUoYXBwbGljYXRpb25OYW1lLmFsbExvd2VyKCkpOwoKICAgICAgICBIeWRyb1Rva2VuIGh5ZHJvID0gSHlkcm9Ub2tlbihoeWRyb1Rva2VuQWRkcmVzcyk7CiAgICAgICAgdWludDI1NiBoeWRyb0JhbGFuY2UgPSBoeWRyby5iYWxhbmNlT2YobXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZShoeWRyb0JhbGFuY2UgPj0gaHlkcm9TdGFraW5nTWluaW11bSk7CgogICAgICAgIGJ5dGVzMzIgYXBwbGljYXRpb25OYW1lSGFzaCA9IGtlY2NhazI1NihhcHBsaWNhdGlvbk5hbWUpOwogICAgICAgIHJlcXVpcmUoIWFwcGxpY2F0aW9uTmFtZUhhc2hUYWtlbihhcHBsaWNhdGlvbk5hbWVIYXNoLCBmYWxzZSkpOwogICAgICAgIHVub2ZmaWNpYWxBcHBsaWNhdGlvbkRpcmVjdG9yeVthcHBsaWNhdGlvbk5hbWVIYXNoXSA9IEFwcGxpY2F0aW9uKGFwcGxpY2F0aW9uTmFtZSwgZmFsc2UsIHRydWUpOwoKICAgICAgICBlbWl0IEFwcGxpY2F0aW9uU2lnblVwKGFwcGxpY2F0aW9uTmFtZSwgZmFsc2UpOwogICAgfQoKICAgIC8vIEFsbG93cyB0aGUgSHlkcm8gQVBJIHRvIGRlbGV0ZSBhcHBsaWNhdGlvbnMgdW5pbGF0ZXJhbGx5CiAgICBmdW5jdGlvbiBkZWxldGVBcHBsaWNhdGlvbihzdHJpbmcgYXBwbGljYXRpb25OYW1lLCBib29sIG9mZmljaWFsKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBieXRlczMyIGFwcGxpY2F0aW9uTmFtZUhhc2ggPSBrZWNjYWsyNTYoYXBwbGljYXRpb25OYW1lKTsKICAgICAgICByZXF1aXJlKGFwcGxpY2F0aW9uTmFtZUhhc2hUYWtlbihhcHBsaWNhdGlvbk5hbWVIYXNoLCBvZmZpY2lhbCkpOwogICAgICAgIGlmIChvZmZpY2lhbCkgewogICAgICAgICAgICBkZWxldGUgb2ZmaWNpYWxBcHBsaWNhdGlvbkRpcmVjdG9yeVthcHBsaWNhdGlvbk5hbWVIYXNoXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkZWxldGUgdW5vZmZpY2lhbEFwcGxpY2F0aW9uRGlyZWN0b3J5W2FwcGxpY2F0aW9uTmFtZUhhc2hdOwogICAgICAgIH0KCiAgICAgICAgZW1pdCBBcHBsaWNhdGlvbkRlbGV0ZWQoYXBwbGljYXRpb25OYW1lLCBvZmZpY2lhbCk7CiAgICB9CgogICAgLy8gQWxsb3dzIHRoZSBIeWRybyBBUEkgdG8gY2hhbmdlcyB0aGUgdW5vZmZpY2lhbCB1c2VyIGZlZQogICAgZnVuY3Rpb24gc2V0VW5vZmZpY2lhbFVzZXJTaWduVXBGZWUodWludCBuZXdGZWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHVub2ZmaWNpYWxVc2VyU2lnblVwRmVlID0gbmV3RmVlOwogICAgfQoKICAgIC8vIEFsbG93cyB0aGUgSHlkcm8gQVBJIHRvIGNoYW5nZXMgdGhlIHVub2ZmaWNpYWwgYXBwbGljYXRpb24gZmVlCiAgICBmdW5jdGlvbiBzZXRVbm9mZmljaWFsQXBwbGljYXRpb25TaWduVXBGZWUodWludCBuZXdGZWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHVub2ZmaWNpYWxBcHBsaWNhdGlvblNpZ25VcEZlZSA9IG5ld0ZlZTsKICAgIH0KCiAgICAvLyBBbGxvd3MgdGhlIEh5ZHJvIEFQSSB0byBsaW5rIHRvIHRoZSBIeWRybyB0b2tlbgogICAgZnVuY3Rpb24gc2V0SHlkcm9Db250cmFjdEFkZHJlc3MoYWRkcmVzcyBfaHlkcm9Ub2tlbkFkZHJlc3MpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGh5ZHJvVG9rZW5BZGRyZXNzID0gX2h5ZHJvVG9rZW5BZGRyZXNzOwogICAgfQoKICAgIC8vIEFsbG93cyB0aGUgSHlkcm8gQVBJIHRvIHNldCBhIG1pbmltdW0gaHlkcm8gYmFsYW5jZSByZXF1aXJlZCB0byByZWdpc3RlciB1bm9mZmljaWFsbHkKICAgIGZ1bmN0aW9uIHNldEh5ZHJvU3Rha2luZ01pbmltdW0odWludCBuZXdNaW5pbXVtKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBoeWRyb1N0YWtpbmdNaW5pbXVtID0gbmV3TWluaW11bTsKICAgIH0KCiAgICAvLyBJbmRpY2F0ZXMgd2hldGhlciBhIGdpdmVuIHVzZXIgbmFtZSBoYXMgYmVlbiBjbGFpbWVkCiAgICBmdW5jdGlvbiB1c2VyTmFtZVRha2VuKHN0cmluZyB1c2VyTmFtZSkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCB0YWtlbikgewogICAgICAgIGJ5dGVzMzIgdXNlck5hbWVIYXNoID0ga2VjY2FrMjU2KHVzZXJOYW1lKTsKICAgICAgICByZXR1cm4gdXNlckRpcmVjdG9yeVt1c2VyTmFtZUhhc2hdLl9pbml0aWFsaXplZDsKICAgIH0KCiAgICAvLyBJbmRpY2F0ZXMgd2hldGhlciBhIGdpdmVuIGFwcGxpY2F0aW9uIG5hbWUgaGFzIGJlZW4gY2xhaW1lZCBmb3Igb2ZmaWNpYWwgYW5kIHVub2ZmaWNpYWwgYXBwbGljYXRpb25zCiAgICBmdW5jdGlvbiBhcHBsaWNhdGlvbk5hbWVUYWtlbihzdHJpbmcgYXBwbGljYXRpb25OYW1lKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zIChib29sIG9mZmljaWFsVGFrZW4sIGJvb2wgdW5vZmZpY2lhbFRha2VuKQogICAgewogICAgICAgIGJ5dGVzMzIgYXBwbGljYXRpb25OYW1lSGFzaCA9IGtlY2NhazI1NihhcHBsaWNhdGlvbk5hbWUpOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIG9mZmljaWFsQXBwbGljYXRpb25EaXJlY3RvcnlbYXBwbGljYXRpb25OYW1lSGFzaF0uX2luaXRpYWxpemVkLAogICAgICAgICAgICB1bm9mZmljaWFsQXBwbGljYXRpb25EaXJlY3RvcnlbYXBwbGljYXRpb25OYW1lSGFzaF0uX2luaXRpYWxpemVkCiAgICAgICAgKTsKICAgIH0KCiAgICAvLyBSZXR1cm5zIHVzZXIgZGV0YWlscyBieSB1c2VyIG5hbWUKICAgIGZ1bmN0aW9uIGdldFVzZXJCeU5hbWUoc3RyaW5nIHVzZXJOYW1lKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIHVzZXJBZGRyZXNzLCBib29sIG9mZmljaWFsKSB7CiAgICAgICAgYnl0ZXMzMiB1c2VyTmFtZUhhc2ggPSBrZWNjYWsyNTYodXNlck5hbWUpOwogICAgICAgIHJlcXVpcmUodXNlck5hbWVIYXNoVGFrZW4odXNlck5hbWVIYXNoKSk7CiAgICAgICAgVXNlciBzdG9yYWdlIF91c2VyID0gdXNlckRpcmVjdG9yeVt1c2VyTmFtZUhhc2hdOwoKICAgICAgICByZXR1cm4gKF91c2VyLnVzZXJBZGRyZXNzLCBfdXNlci5vZmZpY2lhbCk7CiAgICB9CgogICAgLy8gQ2hlY2tzIHdoZXRoZXIgdGhlIHByb3ZpZGVkICh2LCByLCBzKSBzaWduYXR1cmUgd2FzIGNyZWF0ZWQgYnkgdGhlIHByaXZhdGUga2V5IGFzc29jaWF0ZWQgd2l0aCBfYWRkcmVzcwogICAgZnVuY3Rpb24gaXNTaWduZWQoYWRkcmVzcyBfYWRkcmVzcywgYnl0ZXMzMiBtZXNzYWdlSGFzaCwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gZWNyZWNvdmVyKG1lc3NhZ2VIYXNoLCB2LCByLCBzKSA9PSBfYWRkcmVzczsKICAgIH0KCiAgICAvLyBDb21tb24gaW50ZXJuYWwgbG9naWMgZm9yIGFsbCB1c2VyIHNpZ251cHMKICAgIGZ1bmN0aW9uIF91c2VyU2lnblVwKHN0cmluZyB1c2VyTmFtZSwgYWRkcmVzcyB1c2VyQWRkcmVzcywgYm9vbCBvZmZpY2lhbCkgaW50ZXJuYWwgewogICAgICAgIGJ5dGVzMzIgdXNlck5hbWVIYXNoID0ga2VjY2FrMjU2KHVzZXJOYW1lKTsKICAgICAgICByZXF1aXJlKCF1c2VyTmFtZUhhc2hUYWtlbih1c2VyTmFtZUhhc2gpKTsKICAgICAgICB1c2VyRGlyZWN0b3J5W3VzZXJOYW1lSGFzaF0gPSBVc2VyKHVzZXJOYW1lLCB1c2VyQWRkcmVzcywgb2ZmaWNpYWwsIHRydWUpOwoKICAgICAgICBlbWl0IFVzZXJTaWduVXAodXNlck5hbWUsIHVzZXJBZGRyZXNzLCBvZmZpY2lhbCk7CiAgICB9CgogICAgLy8gSW50ZXJuYWwgY2hlY2sgZm9yIHdoZXRoZXIgYSB1c2VyIG5hbWUgaGFzIGJlZW4gdGFrZW4KICAgIGZ1bmN0aW9uIHVzZXJOYW1lSGFzaFRha2VuKGJ5dGVzMzIgdXNlck5hbWVIYXNoKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdXNlckRpcmVjdG9yeVt1c2VyTmFtZUhhc2hdLl9pbml0aWFsaXplZDsKICAgIH0KCiAgICAvLyBJbnRlcm5hbCBjaGVjayBmb3Igd2hldGhlciBhbiBhcHBsaWNhdGlvbiBuYW1lIGhhcyBiZWVuIHRha2VuCiAgICBmdW5jdGlvbiBhcHBsaWNhdGlvbk5hbWVIYXNoVGFrZW4oYnl0ZXMzMiBhcHBsaWNhdGlvbk5hbWVIYXNoLCBib29sIG9mZmljaWFsKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAob2ZmaWNpYWwpIHsKICAgICAgICAgICAgcmV0dXJuIG9mZmljaWFsQXBwbGljYXRpb25EaXJlY3RvcnlbYXBwbGljYXRpb25OYW1lSGFzaF0uX2luaXRpYWxpemVkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB1bm9mZmljaWFsQXBwbGljYXRpb25EaXJlY3RvcnlbYXBwbGljYXRpb25OYW1lSGFzaF0uX2luaXRpYWxpemVkOwogICAgICAgIH0KICAgIH0KfQ=='.
	

]
