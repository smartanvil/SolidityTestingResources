Class {
	#name : #SRT7f39f3a01701bbb3b637597ab3267c213c8a11df,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7f39f3a01701bbb3b637597ab3267c213c8a11df >> base64 [
	^ 'LyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8qIFRoZSBhdXRoZW50aWNhdGlvbiBtYW5hZ2VyIGRldGFpbHMgdXNlciBhY2NvdW50cyB0aGF0IGhhdmUgYWNjZXNzIHRvIGNlcnRhaW4gcHJpdmlsZWRnZXMgYW5kIGtlZXBzIGEgcGVybWFuZW50IGxlZGdlciBvZiB3aG8gaGFzIGFuZCBoYXMgaGFkIHRoZXNlIHJpZ2h0cy4gKi8KY29udHJhY3QgQXV0aGVudGljYXRpb25NYW5hZ2VyIHsKICAgIC8qIE1hcCBhZGRyZXNzZXMgdG8gYWRtaW5zICovCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIGFkbWluQWRkcmVzc2VzOwoKICAgIC8qIE1hcCBhZGRyZXNzZXMgdG8gYWNjb3VudCByZWFkZXJzICovCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIGFjY291bnRSZWFkZXJBZGRyZXNzZXM7CgogICAgLyogRGV0YWlscyBvZiBhbGwgYWRtaW5zIHRoYXQgaGF2ZSBldmVyIGV4aXN0ZWQgKi8KICAgIGFkZHJlc3NbXSBhZG1pbkF1ZGl0OwoKICAgIC8qIERldGFpbHMgb2YgYWxsIGFjY291bnQgcmVhZGVycyB0aGF0IGhhdmUgZXZlciBleGlzdGVkICovCiAgICBhZGRyZXNzW10gYWNjb3VudFJlYWRlckF1ZGl0OwoKICAgIC8qIEZpcmVkIHdoZW5ldmVyIGFuIGFkbWluIGlzIGFkZGVkIHRvIHRoZSBjb250cmFjdC4gKi8KICAgIGV2ZW50IEFkbWluQWRkZWQoYWRkcmVzcyBhZGRlZEJ5LCBhZGRyZXNzIGFkbWluKTsKCiAgICAvKiBGaXJlZCB3aGVuZXZlciBhbiBhZG1pbiBpcyByZW1vdmVkIGZyb20gdGhlIGNvbnRyYWN0LiAqLwogICAgZXZlbnQgQWRtaW5SZW1vdmVkKGFkZHJlc3MgcmVtb3ZlZEJ5LCBhZGRyZXNzIGFkbWluKTsKCiAgICAvKiBGaXJlZCB3aGVuZXZlciBhbiBhY2NvdW50LXJlYWRlciBjb250cmFjdCBpcyBhZGRlZC4gKi8KICAgIGV2ZW50IEFjY291bnRSZWFkZXJBZGRlZChhZGRyZXNzIGFkZGVkQnksIGFkZHJlc3MgYWNjb3VudCk7CgogICAgLyogRmlyZWQgd2hlbmV2ZXIgYW4gYWNjb3VudC1yZWFkZXIgY29udHJhY3QgaXMgcmVtb3ZlZC4gKi8KICAgIGV2ZW50IEFjY291bnRSZWFkZXJSZW1vdmVkKGFkZHJlc3MgcmVtb3ZlZEJ5LCBhZGRyZXNzIGFjY291bnQpOwoKICAgIC8qIFdoZW4gdGhpcyBjb250cmFjdCBpcyBmaXJzdCBzZXR1cCB3ZSB1c2UgdGhlIGNyZWF0b3IgYXMgdGhlIGZpcnN0IGFkbWluICovICAgIAogICAgZnVuY3Rpb24gQXV0aGVudGljYXRpb25NYW5hZ2VyKCkgewogICAgICAgIC8qIFNldCB0aGUgZmlyc3QgYWRtaW4gdG8gYmUgdGhlIHBlcnNvbiBjcmVhdGluZyB0aGUgY29udHJhY3QgKi8KICAgICAgICBhZG1pbkFkZHJlc3Nlc1ttc2cuc2VuZGVyXSA9IHRydWU7CiAgICAgICAgQWRtaW5BZGRlZCgwLCBtc2cuc2VuZGVyKTsKICAgICAgICBhZG1pbkF1ZGl0Lmxlbmd0aCsrOwogICAgICAgIGFkbWluQXVkaXRbYWRtaW5BdWRpdC5sZW5ndGggLSAxXSA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLyogR2V0cyB0aGUgY29udHJhY3QgdmVyc2lvbiBmb3IgdmFsaWRhdGlvbiAqLwogICAgZnVuY3Rpb24gY29udHJhY3RWZXJzaW9uKCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgLy8gQWRtaW4gY29udHJhY3QgaWRlbnRpZmllcyBhcyAxMDBZWVlZTU1EREhITU0KICAgICAgICByZXR1cm4gMTAwMjAxNzA3MTcxNTAzOwogICAgfQoKICAgIC8qIEdldHMgd2hldGhlciBvciBub3QgdGhlIHNwZWNpZmllZCBhZGRyZXNzIGlzIGN1cnJlbnRseSBhbiBhZG1pbiAqLwogICAgZnVuY3Rpb24gaXNDdXJyZW50QWRtaW4oYWRkcmVzcyBfYWRkcmVzcykgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBhZG1pbkFkZHJlc3Nlc1tfYWRkcmVzc107CiAgICB9CgogICAgLyogR2V0cyB3aGV0aGVyIG9yIG5vdCB0aGUgc3BlY2lmaWVkIGFkZHJlc3MgaGFzIGV2ZXIgYmVlbiBhbiBhZG1pbiAqLwogICAgZnVuY3Rpb24gaXNDdXJyZW50T3JQYXN0QWRtaW4oYWRkcmVzcyBfYWRkcmVzcykgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IGFkbWluQXVkaXQubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlmIChhZG1pbkF1ZGl0W2ldID09IF9hZGRyZXNzKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qIEdldHMgd2hldGhlciBvciBub3QgdGhlIHNwZWNpZmllZCBhZGRyZXNzIGlzIGN1cnJlbnRseSBhbiBhY2NvdW50IHJlYWRlciAqLwogICAgZnVuY3Rpb24gaXNDdXJyZW50QWNjb3VudFJlYWRlcihhZGRyZXNzIF9hZGRyZXNzKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGFjY291bnRSZWFkZXJBZGRyZXNzZXNbX2FkZHJlc3NdOwogICAgfQoKICAgIC8qIEdldHMgd2hldGhlciBvciBub3QgdGhlIHNwZWNpZmllZCBhZGRyZXNzIGhhcyBldmVyIGJlZW4gYW4gYWRtaW4gKi8KICAgIGZ1bmN0aW9uIGlzQ3VycmVudE9yUGFzdEFjY291bnRSZWFkZXIoYWRkcmVzcyBfYWRkcmVzcykgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IGFjY291bnRSZWFkZXJBdWRpdC5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKGFjY291bnRSZWFkZXJBdWRpdFtpXSA9PSBfYWRkcmVzcykKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKiBBZGRzIGEgdXNlciB0byBvdXIgbGlzdCBvZiBhZG1pbnMgKi8KICAgIGZ1bmN0aW9uIGFkZEFkbWluKGFkZHJlc3MgX2FkZHJlc3MpIHsKICAgICAgICAvKiBFbnN1cmUgd2UncmUgYW4gYWRtaW4gKi8KICAgICAgICBpZiAoIWlzQ3VycmVudEFkbWluKG1zZy5zZW5kZXIpKQogICAgICAgICAgICB0aHJvdzsKCiAgICAgICAgLy8gRmFpbCBpZiB0aGlzIGFjY291bnQgaXMgYWxyZWFkeSBhZG1pbgogICAgICAgIGlmIChhZG1pbkFkZHJlc3Nlc1tfYWRkcmVzc10pCiAgICAgICAgICAgIHRocm93OwogICAgICAgIAogICAgICAgIC8vIEFkZCB0aGUgdXNlcgogICAgICAgIGFkbWluQWRkcmVzc2VzW19hZGRyZXNzXSA9IHRydWU7CiAgICAgICAgQWRtaW5BZGRlZChtc2cuc2VuZGVyLCBfYWRkcmVzcyk7CiAgICAgICAgYWRtaW5BdWRpdC5sZW5ndGgrKzsKICAgICAgICBhZG1pbkF1ZGl0W2FkbWluQXVkaXQubGVuZ3RoIC0gMV0gPSBfYWRkcmVzczsKICAgIH0KCiAgICAvKiBSZW1vdmVzIGEgdXNlciBmcm9tIG91ciBsaXN0IG9mIGFkbWlucyBidXQga2VlcHMgdGhlbSBpbiB0aGUgaGlzdG9yeSBhdWRpdCAqLwogICAgZnVuY3Rpb24gcmVtb3ZlQWRtaW4oYWRkcmVzcyBfYWRkcmVzcykgewogICAgICAgIC8qIEVuc3VyZSB3ZSdyZSBhbiBhZG1pbiAqLwogICAgICAgIGlmICghaXNDdXJyZW50QWRtaW4obXNnLnNlbmRlcikpCiAgICAgICAgICAgIHRocm93OwoKICAgICAgICAvKiBEb24ndCBhbGxvdyByZW1vdmFsIG9mIHNlbGYgKi8KICAgICAgICBpZiAoX2FkZHJlc3MgPT0gbXNnLnNlbmRlcikKICAgICAgICAgICAgdGhyb3c7CgogICAgICAgIC8vIEZhaWwgaWYgdGhpcyBhY2NvdW50IGlzIGFscmVhZHkgbm9uLWFkbWluCiAgICAgICAgaWYgKCFhZG1pbkFkZHJlc3Nlc1tfYWRkcmVzc10pCiAgICAgICAgICAgIHRocm93OwoKICAgICAgICAvKiBSZW1vdmUgdGhpcyBhZG1pbiB1c2VyICovCiAgICAgICAgYWRtaW5BZGRyZXNzZXNbX2FkZHJlc3NdID0gZmFsc2U7CiAgICAgICAgQWRtaW5SZW1vdmVkKG1zZy5zZW5kZXIsIF9hZGRyZXNzKTsKICAgIH0KCiAgICAvKiBBZGRzIGEgdXNlci9jb250cmFjdCB0byBvdXIgbGlzdCBvZiBhY2NvdW50IHJlYWRlcnMgKi8KICAgIGZ1bmN0aW9uIGFkZEFjY291bnRSZWFkZXIoYWRkcmVzcyBfYWRkcmVzcykgewogICAgICAgIC8qIEVuc3VyZSB3ZSdyZSBhbiBhZG1pbiAqLwogICAgICAgIGlmICghaXNDdXJyZW50QWRtaW4obXNnLnNlbmRlcikpCiAgICAgICAgICAgIHRocm93OwoKICAgICAgICAvLyBGYWlsIGlmIHRoaXMgYWNjb3VudCBpcyBhbHJlYWR5IGluIHRoZSBsaXN0CiAgICAgICAgaWYgKGFjY291bnRSZWFkZXJBZGRyZXNzZXNbX2FkZHJlc3NdKQogICAgICAgICAgICB0aHJvdzsKICAgICAgICAKICAgICAgICAvLyBBZGQgdGhlIHVzZXIKICAgICAgICBhY2NvdW50UmVhZGVyQWRkcmVzc2VzW19hZGRyZXNzXSA9IHRydWU7CiAgICAgICAgQWNjb3VudFJlYWRlckFkZGVkKG1zZy5zZW5kZXIsIF9hZGRyZXNzKTsKICAgICAgICBhY2NvdW50UmVhZGVyQXVkaXQubGVuZ3RoKys7CiAgICAgICAgYWNjb3VudFJlYWRlckF1ZGl0W2FkbWluQXVkaXQubGVuZ3RoIC0gMV0gPSBfYWRkcmVzczsKICAgIH0KCiAgICAvKiBSZW1vdmVzIGEgdXNlci9jb250cmFjdHMgZnJvbSBvdXIgbGlzdCBvZiBhY2NvdW50IHJlYWRlcnMgYnV0IGtlZXBzIHRoZW0gaW4gdGhlIGhpc3RvcnkgYXVkaXQgKi8KICAgIGZ1bmN0aW9uIHJlbW92ZUFjY291bnRSZWFkZXIoYWRkcmVzcyBfYWRkcmVzcykgewogICAgICAgIC8qIEVuc3VyZSB3ZSdyZSBhbiBhZG1pbiAqLwogICAgICAgIGlmICghaXNDdXJyZW50QWRtaW4obXNnLnNlbmRlcikpCiAgICAgICAgICAgIHRocm93OwoKICAgICAgICAvLyBGYWlsIGlmIHRoaXMgYWNjb3VudCBpcyBhbHJlYWR5IG5vdCBpbiB0aGUgbGlzdAogICAgICAgIGlmICghYWNjb3VudFJlYWRlckFkZHJlc3Nlc1tfYWRkcmVzc10pCiAgICAgICAgICAgIHRocm93OwoKICAgICAgICAvKiBSZW1vdmUgdGhpcyBhZG1pbiB1c2VyICovCiAgICAgICAgYWNjb3VudFJlYWRlckFkZHJlc3Nlc1tfYWRkcmVzc10gPSBmYWxzZTsKICAgICAgICBBY2NvdW50UmVhZGVyUmVtb3ZlZChtc2cuc2VuZGVyLCBfYWRkcmVzcyk7CiAgICB9Cn0KY29udHJhY3QgVm90aW5nQmFzZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICAvKiBNYXAgYWxsIG91ciBvdXIgYmFsYW5jZXMgZm9yIGlzc3VlZCB0b2tlbnMgKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHZvdGVDb3VudDsKCiAgICAvKiBMaXN0IG9mIGFsbCB0b2tlbiBob2xkZXJzICovCiAgICBhZGRyZXNzW10gcHVibGljIHZvdGVyQWRkcmVzc2VzOwoKICAgIC8qIERlZmluZXMgdGhlIGFkbWluIGNvbnRyYWN0IHdlIGludGVyZmFjZSB3aXRoIGZvciBjcmVkZW50YWlscy4gKi8KICAgIEF1dGhlbnRpY2F0aW9uTWFuYWdlciBpbnRlcm5hbCBhdXRoZW50aWNhdGlvbk1hbmFnZXI7CgogICAgLyogVW5peCBlcG9jaCB2b3Rpbmcgc3RhcnRzIGF0ICovCiAgICB1aW50MjU2IHB1YmxpYyB2b3RlU3RhcnRUaW1lOwoKICAgIC8qIFVuaXggZXBvY2ggdm90aW5nIGVuZHMgYXQgKi8KICAgIHVpbnQyNTYgcHVibGljIHZvdGVFbmRUaW1lOwoKICAgIC8qIFRoaXMgbW9kaWZpZXIgYWxsb3dzIGEgbWV0aG9kIHRvIG9ubHkgYmUgY2FsbGVkIGJ5IGN1cnJlbnQgYWRtaW5zICovCiAgICBtb2RpZmllciBhZG1pbk9ubHkgewogICAgICAgIGlmICghYXV0aGVudGljYXRpb25NYW5hZ2VyLmlzQ3VycmVudEFkbWluKG1zZy5zZW5kZXIpKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFZvdGVyQ291bnQodWludDI1NiBfY291bnQpIGFkbWluT25seSB7CiAgICAgICAgLy8gRm9yYmlkIGFmdGVyIHZvdGluZyBoYXMgc3RhcnRlZAogICAgICAgIGlmIChub3cgPj0gdm90ZVN0YXJ0VGltZSkKICAgICAgICAgICAgdGhyb3c7CgogICAgICAgIC8qIENsZWFyIGV4aXN0aW5nIHZvdGVyIGNvdW50ICovCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgdm90ZXJBZGRyZXNzZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYWRkcmVzcyB2b3RlciA9IHZvdGVyQWRkcmVzc2VzW2ldOwogICAgICAgICAgICB2b3RlQ291bnRbdm90ZXJdID0gMDsKICAgICAgICB9CgogICAgICAgIC8qIFNldCB0aGUgY291bnQgYWNjb3JkaW5nbHkgKi8KICAgICAgICB2b3RlckFkZHJlc3Nlcy5sZW5ndGggPSBfY291bnQ7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Vm90ZXIodWludDI1NiBfcG9zaXRpb24sIGFkZHJlc3MgX3ZvdGVyLCB1aW50MjU2IF92b3RlQ291bnQpIGFkbWluT25seSB7CiAgICAgICAgLy8gRm9yYmlkIGFmdGVyIHZvdGluZyBoYXMgc3RhcnRlZAogICAgICAgIGlmIChub3cgPj0gdm90ZVN0YXJ0VGltZSkKICAgICAgICAgICAgdGhyb3c7CgogICAgICAgIGlmIChfcG9zaXRpb24gPj0gdm90ZXJBZGRyZXNzZXMubGVuZ3RoKQogICAgICAgICAgICB0aHJvdzsKICAgICAgICAgICAgCiAgICAgICAgdm90ZXJBZGRyZXNzZXNbX3Bvc2l0aW9uXSA9IF92b3RlcjsKICAgICAgICB2b3RlQ291bnRbX3ZvdGVyXSA9IF92b3RlQ291bnQ7CiAgICB9Cn0KCmNvbnRyYWN0IFZvdGVTdnAwMDIgaXMgVm90aW5nQmFzZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICAvKiBWb3RlcyBmb3IgU1ZQMDAyLTAxLiAgMCA9IG5vdCB2b3RlcywgMSA9IFllcywgMiA9IE5vICovCiAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSB2b3RlMDE7CiAgICAgdWludDI1NiBwdWJsaWMgdm90ZTAxWWVzQ291bnQ7CiAgICAgdWludDI1NiBwdWJsaWMgdm90ZTAxTm9Db3VudDsKCiAgICAvKiBWb3RlcyBmb3IgU1ZQMDAyLTAyLiAgMCA9IG5vdCB2b3RlcywgMSA9IFllcywgMiA9IE5vICovCiAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSB2b3RlMDI7CiAgICAgdWludDI1NiBwdWJsaWMgdm90ZTAyWWVzQ291bnQ7CiAgICAgdWludDI1NiBwdWJsaWMgdm90ZTAyTm9Db3VudDsKCiAgICAvKiBWb3RlcyBmb3IgU1ZQMDAzLTAyLiAgMCA9IG5vdCB2b3RlcywgMSA9IFllcywgMiA9IE5vICovCiAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSB2b3RlMDM7CiAgICAgdWludDI1NiBwdWJsaWMgdm90ZTAzWWVzQ291bnQ7CiAgICAgdWludDI1NiBwdWJsaWMgdm90ZTAzTm9Db3VudDsKCiAgICAvKiBDcmVhdGUgb3VyIGNvbnRyYWN0IHdpdGggcmVmZXJlbmNlcyB0byBvdGhlciBjb250cmFjdHMgYXMgcmVxdWlyZWQuICovCiAgICBmdW5jdGlvbiBWb3RlU3ZwMDAyKGFkZHJlc3MgX2F1dGhlbnRpY2F0aW9uTWFuYWdlckFkZHJlc3MsIHVpbnQyNTYgX3ZvdGVTdGFydFRpbWUsIHVpbnQyNTYgX3ZvdGVFbmRUaW1lKSB7CiAgICAgICAgLyogU2V0dXAgYWNjZXNzIHRvIG91ciBvdGhlciBjb250cmFjdHMgYW5kIHZhbGlkYXRlIHRoZWlyIHZlcnNpb25zICovCiAgICAgICAgYXV0aGVudGljYXRpb25NYW5hZ2VyID0gQXV0aGVudGljYXRpb25NYW5hZ2VyKF9hdXRoZW50aWNhdGlvbk1hbmFnZXJBZGRyZXNzKTsKICAgICAgICBpZiAoYXV0aGVudGljYXRpb25NYW5hZ2VyLmNvbnRyYWN0VmVyc2lvbigpICE9IDEwMDIwMTcwNzE3MTUwMykKICAgICAgICAgICAgdGhyb3c7CgogICAgICAgIC8qIFN0b3JlIHN0YXJ0L2VuZCB0aW1lcyAqLwogICAgICAgIGlmIChfdm90ZVN0YXJ0VGltZSA+PSBfdm90ZUVuZFRpbWUpCiAgICAgICAgICAgIHRocm93OwogICAgICAgIHZvdGVTdGFydFRpbWUgPSBfdm90ZVN0YXJ0VGltZTsKICAgICAgICB2b3RlRW5kVGltZSA9IF92b3RlRW5kVGltZTsKICAgIH0KCiAgICAgZnVuY3Rpb24gdm90ZVN2cDAxKGJvb2wgdm90ZSkgewogICAgICAgIC8vIEZvcmJpZCBvdXRzaWRlIG9mIHZvdGluZyBwZXJpb2QKICAgICAgICBpZiAobm93IDwgdm90ZVN0YXJ0VGltZSB8fCBub3cgPiB2b3RlRW5kVGltZSkKICAgICAgICAgICAgdGhyb3c7CgogICAgICAgICAvKiBFbnN1cmUgdGhleSBoYXZlIHZvdGluZyByaWdodHMgZmlyc3QgKi8KICAgICAgICAgdWludDI1NiB2b3RlV2VpZ2h0ID0gdm90ZUNvdW50W21zZy5zZW5kZXJdOwogICAgICAgICBpZiAodm90ZVdlaWdodCA9PSAwKQogICAgICAgICAgICB0aHJvdzsKICAgICAgICAKICAgICAgICAvKiBTZXQgdGhlaXIgdm90ZSAqLwogICAgICAgIHVpbnQyNTYgZXhpc3RpbmdWb3RlID0gdm90ZTAxW21zZy5zZW5kZXJdOwogICAgICAgIHVpbnQyNTYgbmV3Vm90ZSA9IHZvdGUgPyAxIDogMjsKICAgICAgICBpZiAobmV3Vm90ZSA9PSBleGlzdGluZ1ZvdGUpCiAgICAgICAgICAgIC8qIE5vIGNoYW5nZSBzbyBqdXN0IHJldHVybiAqLwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgdm90ZTAxW21zZy5zZW5kZXJdID0gbmV3Vm90ZTsKCiAgICAgICAgLyogSWYgdGhleSBoYWQgdm90ZWQgcHJldmlvdXMgZmlyc3QgZGVjcmVtZW50IHByZXZpb3VzIHZvdGUgY291bnQgKi8KICAgICAgICBpZiAoZXhpc3RpbmdWb3RlID09IDEpCiAgICAgICAgICAgIHZvdGUwMVllc0NvdW50IC09IHZvdGVXZWlnaHQ7CiAgICAgICAgZWxzZSBpZiAoZXhpc3RpbmdWb3RlID09IDIpCiAgICAgICAgICAgIHZvdGUwMU5vQ291bnQgLT0gdm90ZVdlaWdodDsKICAgICAgICBpZiAodm90ZSkKICAgICAgICAgICAgdm90ZTAxWWVzQ291bnQgKz0gdm90ZVdlaWdodDsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHZvdGUwMU5vQ291bnQgKz0gdm90ZVdlaWdodDsKICAgICB9CgogICAgIGZ1bmN0aW9uIHZvdGVTdnAwMihib29sIHZvdGUpIHsKICAgICAgICAvLyBGb3JiaWQgb3V0c2lkZSBvZiB2b3RpbmcgcGVyaW9kCiAgICAgICAgaWYgKG5vdyA8IHZvdGVTdGFydFRpbWUgfHwgbm93ID4gdm90ZUVuZFRpbWUpCiAgICAgICAgICAgIHRocm93OwoKICAgICAgICAgLyogRW5zdXJlIHRoZXkgaGF2ZSB2b3RpbmcgcmlnaHRzIGZpcnN0ICovCiAgICAgICAgIHVpbnQyNTYgdm90ZVdlaWdodCA9IHZvdGVDb3VudFttc2cuc2VuZGVyXTsKICAgICAgICAgaWYgKHZvdGVXZWlnaHQgPT0gMCkKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgCiAgICAgICAgLyogU2V0IHRoZWlyIHZvdGUgKi8KICAgICAgICB1aW50MjU2IGV4aXN0aW5nVm90ZSA9IHZvdGUwMlttc2cuc2VuZGVyXTsKICAgICAgICB1aW50MjU2IG5ld1ZvdGUgPSB2b3RlID8gMSA6IDI7CiAgICAgICAgaWYgKG5ld1ZvdGUgPT0gZXhpc3RpbmdWb3RlKQogICAgICAgICAgICAvKiBObyBjaGFuZ2Ugc28ganVzdCByZXR1cm4gKi8KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIHZvdGUwMlttc2cuc2VuZGVyXSA9IG5ld1ZvdGU7CgogICAgICAgIC8qIElmIHRoZXkgaGFkIHZvdGVkIHByZXZpb3VzIGZpcnN0IGRlY3JlbWVudCBwcmV2aW91cyB2b3RlIGNvdW50ICovCiAgICAgICAgaWYgKGV4aXN0aW5nVm90ZSA9PSAxKQogICAgICAgICAgICB2b3RlMDJZZXNDb3VudCAtPSB2b3RlV2VpZ2h0OwogICAgICAgIGVsc2UgaWYgKGV4aXN0aW5nVm90ZSA9PSAyKQogICAgICAgICAgICB2b3RlMDJOb0NvdW50IC09IHZvdGVXZWlnaHQ7CiAgICAgICAgaWYgKHZvdGUpCiAgICAgICAgICAgIHZvdGUwMlllc0NvdW50ICs9IHZvdGVXZWlnaHQ7CiAgICAgICAgZWxzZQogICAgICAgICAgICB2b3RlMDJOb0NvdW50ICs9IHZvdGVXZWlnaHQ7CiAgICAgfQoKICAgICBmdW5jdGlvbiB2b3RlU3ZwMDMoYm9vbCB2b3RlKSB7CiAgICAgICAgLy8gRm9yYmlkIG91dHNpZGUgb2Ygdm90aW5nIHBlcmlvZAogICAgICAgIGlmIChub3cgPCB2b3RlU3RhcnRUaW1lIHx8IG5vdyA+IHZvdGVFbmRUaW1lKQogICAgICAgICAgICB0aHJvdzsKCiAgICAgICAgIC8qIEVuc3VyZSB0aGV5IGhhdmUgdm90aW5nIHJpZ2h0cyBmaXJzdCAqLwogICAgICAgICB1aW50MjU2IHZvdGVXZWlnaHQgPSB2b3RlQ291bnRbbXNnLnNlbmRlcl07CiAgICAgICAgIGlmICh2b3RlV2VpZ2h0ID09IDApCiAgICAgICAgICAgIHRocm93OwogICAgICAgIAogICAgICAgIC8qIFNldCB0aGVpciB2b3RlICovCiAgICAgICAgdWludDI1NiBleGlzdGluZ1ZvdGUgPSB2b3RlMDNbbXNnLnNlbmRlcl07CiAgICAgICAgdWludDI1NiBuZXdWb3RlID0gdm90ZSA/IDEgOiAyOwogICAgICAgIGlmIChuZXdWb3RlID09IGV4aXN0aW5nVm90ZSkKICAgICAgICAgICAgLyogTm8gY2hhbmdlIHNvIGp1c3QgcmV0dXJuICovCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB2b3RlMDNbbXNnLnNlbmRlcl0gPSBuZXdWb3RlOwoKICAgICAgICAvKiBJZiB0aGV5IGhhZCB2b3RlZCBwcmV2aW91cyBmaXJzdCBkZWNyZW1lbnQgcHJldmlvdXMgdm90ZSBjb3VudCAqLwogICAgICAgIGlmIChleGlzdGluZ1ZvdGUgPT0gMSkKICAgICAgICAgICAgdm90ZTAzWWVzQ291bnQgLT0gdm90ZVdlaWdodDsKICAgICAgICBlbHNlIGlmIChleGlzdGluZ1ZvdGUgPT0gMikKICAgICAgICAgICAgdm90ZTAzTm9Db3VudCAtPSB2b3RlV2VpZ2h0OwogICAgICAgIGlmICh2b3RlKQogICAgICAgICAgICB2b3RlMDNZZXNDb3VudCArPSB2b3RlV2VpZ2h0OwogICAgICAgIGVsc2UKICAgICAgICAgICAgdm90ZTAzTm9Db3VudCArPSB2b3RlV2VpZ2h0OwogICAgIH0KfQ=='.
	

]
