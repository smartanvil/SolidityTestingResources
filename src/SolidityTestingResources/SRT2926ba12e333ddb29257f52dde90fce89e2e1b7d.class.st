Class {
	#name : #SRT2926ba12e333ddb29257f52dde90fce89e2e1b7d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2926ba12e333ddb29257f52dde90fce89e2e1b7d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTA7Ci8qKgoqIEhvZGxkIERBTyBhbmQgRVJDMjAgdG9rZW4KKiBBdXRob3I6IEN1cnJlbmN5VHljb29uIG9uIEdpdEh1YgoqIExpY2Vuc2U6IE1JVAoqIERhdGU6IDIwMTcKKgoqIERlcGxveSB3aXRoIHRoZSBmb2xsb3dpbmcgYXJnczoKKiAwLCAiSG9kbCBEQU8iLCAxOCwgIkhPREwiCioKKi8KY29udHJhY3QgSG9kbERBTyB7CiAgICAvKiBFUkMyMCBQdWJsaWMgdmFyaWFibGVzIG9mIHRoZSB0b2tlbiAqLwogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gJ0hEQU8gMC4zJzsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDggcHVibGljIGRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLyogRVJDMjAgVGhpcyBjcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGJhbGFuY2VzICovCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlT2Y7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2FuY2U7CgoKICAgIC8qIHN0b3JlIHRoZSBibG9jayBudW1iZXIgd2hlbiBhIHdpdGhkcmF3YWwgaGFzIGJlZW4gcmVxdWVzdGVkKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gd2l0aGRyYXdhbFJlcXVlc3QpIHB1YmxpYyB3aXRoZHJhd2FsUmVxdWVzdHM7CiAgICBzdHJ1Y3Qgd2l0aGRyYXdhbFJlcXVlc3QgewogICAgICAgIHVpbnQgc2luY2VCbG9jazsKICAgICAgICB1aW50MjU2IGFtb3VudDsKICAgIH0KCiAgICAvKioKICAgICAqIGZlZVBvdCBjb2xsZWN0cyBmZWVzIGZyb20gcXVpY2sgd2l0aGRyYXdhbHMuIFRoaXMgZ2V0cyByZS1kaXN0cmlidXRlZCB0byBzbG93LXdpdGhkcmF3YWxzCiAgICAqLwogICAgdWludDI1NiBwdWJsaWMgZmVlUG90OwoKICAgIHVpbnQzMiBwdWJsaWMgY29uc3RhbnQgYmxvY2tXYWl0ID0gMTcyODAwOyAvLyByb3VnaGx5IDMwIGRheXMsICAoMjU5MjAwMCAvIDE1KSAtIGFzc3VtaW5nIGJsb2NrIHRpbWUgaXMgfjE1IHNlYy4KICAgIC8vdWludCBwdWJsaWMgY29uc3RhbnQgYmxvY2tXYWl0ID0gODsgLy8gcm91Z2hseSBhc3N1bWluZyBibG9jayB0aW1lIGlzIH4xNSBzZWMuICh1bmNvbW1lbnQgd2hlbiB0ZXN0aW5nIG9uIHRlc3RuZXQpCgoKICAgIC8qKgogICAgICogRVJDMjAgZXZlbnRzIHRoZXNlIGdlbmVyYXRlIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cwogICAgKi8KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgogICAgZXZlbnQgV2l0aGRyYXdhbFF1aWNrKGFkZHJlc3MgaW5kZXhlZCBieSwgdWludDI1NiBhbW91bnQsIHVpbnQyNTYgZmVlKTsgLy8gcXVpY2sgd2l0aGRyYXdhbCBkb25lCiAgICBldmVudCBJbnN1ZmZpY2llbnRGZWUoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50MjU2IGZlZVJlcXVpcmVkKTsgIC8vIG5vdCBlbm91Z2ggZmVlIHBhaWQgZm9yIHF1aWNrIHdpdGhkcmF3YWwKICAgIGV2ZW50IFdpdGhkcmF3YWxTdGFydGVkKGFkZHJlc3MgaW5kZXhlZCBieSwgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgV2l0aGRyYXdhbERvbmUoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50MjU2IGFtb3VudCwgdWludDI1NiByZXdhcmQpOyAvLyBhbW91bnQgaXMgdGhlIGFtb3VudCB0aGF0IHdhcyB1c2VkIHRvIGNhbGN1bGF0ZSByZXdhcmQKICAgIGV2ZW50IFdpdGhkcmF3YWxQcmVtYXR1cmUoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50IGJsb2Nrc1RvV2FpdCk7IC8vIE5lZWRzIHRvIHdhaXQgYmxvY2tzVG9XYWl0IGJlZm9yZSB3aXRoZHJhd2FsIHVubG9ja2VkCiAgICBldmVudCBEZXBvc2l0ZWQoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50MjU2IGFtb3VudCk7CgogICAgLyoqCiAgICAgKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QKICAgICAqIEluIG91ciBjYXNlLCB0aGVyZSdzIG5vIGluaXRpYWwgc3VwcGx5LiBUb2tlbnMgd2lsbCBiZSBjcmVhdGVkIGFzIGV0aGVyIGlzIHNlbnQKICAgICAqIHRvIHRoZSBmYWxsLWJhY2sgZnVuY3Rpb24uIFRoZW4gdG9rZW5zIGFyZSBidXJuZWQgd2hlbiBldGhlciBpcyB3aXRoZHJhd24uCiAgICAgKi8KICAgIGZ1bmN0aW9uIEhvZGxEQU8oCiAgICAgICAgdWludDI1NiBpbml0aWFsU3VwcGx5LAogICAgICAgIHN0cmluZyB0b2tlbk5hbWUsCiAgICAgICAgdWludDggZGVjaW1hbFVuaXRzLAogICAgICAgIHN0cmluZyB0b2tlblN5bWJvbAogICAgKSB7CgogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IGluaXRpYWxTdXBwbHk7ICAgICAgICAgICAgICAvLyBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucwogICAgICAgIHRvdGFsU3VwcGx5ID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdG90YWwgc3VwcGx5CiAgICAgICAgbmFtZSA9IHRva2VuTmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgbmFtZSBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIHN5bWJvbCA9IHRva2VuU3ltYm9sOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIGRlY2ltYWxzID0gZGVjaW1hbFVuaXRzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbW91bnQgb2YgZGVjaW1hbHMgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgIH0KCiAgICAvKioKICAgICAqIG5vdFBlbmRpbmdXaXRoZHJhd2FsIG1vZGlmaWVyIGd1YXJkcyB0aGUgZnVuY3Rpb24gZnJvbSBleGVjdXRpbmcgd2hlbiBhCiAgICAgKiB3aXRoZHJhd2FsIGhhcyBiZWVuIHJlcXVlc3RlZCBhbmQgaXMgY3VycmVudGx5IHBlbmRpbmcKICAgICAqLwogICAgbW9kaWZpZXIgbm90UGVuZGluZ1dpdGhkcmF3YWwgewogICAgICAgIGlmICh3aXRoZHJhd2FsUmVxdWVzdHNbbXNnLnNlbmRlcl0uc2luY2VCbG9jayA+IDApIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgLyoqIEVSQzIwIC0gdHJhbnNmZXIgc2VuZHMgdG9rZW5zCiAgICAgKiBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG5vdFBlbmRpbmdXaXRoZHJhd2FsIHsKICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSB0aHJvdzsgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIGlmIChiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA8IGJhbGFuY2VPZltfdG9dKSB0aHJvdzsgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudAogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UKICAgIH0KCiAgICAvKiogRVJDMjAgYXBwcm92ZSBhbGxvd3MgYW5vdGhlciBjb250cmFjdCB0byBzcGVuZCBzb21lIHRva2VucyBpbiB5b3VyIGJlaGFsZgogICAgICogQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICoKICAgICAqCiAgICAgKiBOb3RlLCB0aGVyZSBhcmUgc29tZSBlZGdlLWNhc2VzIHdpdGggdGhlIEVSQy0yMCBhcHByb3ZlIG1lY2hhbmlzbS4gSW4gdGhpcyBjYXNlIGEgJ2JvdW5kcyBjaGVjaycKICAgICAqIHdhcyBhZGRlZCB0byBtYWtlIHN1cmUgQWxpY2UgY2FudCcgYXBwcm92ZSBCb2IgZm9yIG1vcmUgdG9rZW5zIHRoYW4gc2hlIGhhcy4KICAgICAqIFRoZSBhc3N1bXB0aW9ucyBhcmUgdGhhdCB0aGVzZSBzY2VuYXJpb3MgY291bGQgc3RpbGwgaGFwcGVuIGlmIG5vdCBtaXRpZ2F0ZWQgYnkgQWxpY2U6CiAgICAgKgogICAgICogU2NlbmFyaW8gMToKICAgICAqCiAgICAgKiBUaGUgZm9sbG93aW5nIHNjZW5hcmlvIGNvdWxkIGJlIHRoZSBleHBlY3RlZCBvdXRjb21lIGJ5IEFsaWNlLCBidXQgaWYgbm90LCBBbGljZSB3b3VsZCBuZWVkIHRvIHNldAogICAgICogaGVyIGFwcHJvdmFsIHRvIEJvYiB0byAwIGJlZm9yZSBBbGljZSBwdXJjaGFzZXMgbW9yZSB0b2tlbnMuCiAgICAgKgogICAgICogIDEuIEFsaWNlIGhhcyAxMDAgdG9rZW5zLgogICAgICogIDIuIEFsaWNlIGFwcHJvdmVzIDUwIHRva2VucyBmb3IgQm9iLgogICAgICogIDMuIEFsaWNlIGFwcHJvdmVzIDEwMCB0b2tlbnMgZm9yIENoYXJsZXMKICAgICAqICA0LiBCb2IgY2FsbHMgdHJhbnNmZXJGcm9tIGFuZCByZWNlaXZlcyBoaXMgNTAgdG9rZW5zLgogICAgICogIDUuIENoYXJsZXMgY2FsbHMgdHJhbnNmZXJGcm9tIGFuZCByZWNlaXZlcyB0aGUgcmVtYWluaW5nIDUwIHRva2VucwogICAgICogIDYuIENoYXJsZXMgc3RpbGwgaGFzIGFuIGFwcHJvdmFsIGZvciA1MCBtb3JlIHRva2VucyBmcm9tIEFsaWNlLCBldmVuIHRob3VnaCBzaGUgbm93IG93bnMgMCB0b2tlbnMuCiAgICAgKiAgNy4gQWxpY2UgcHVyY2hhc2VzIDUwIG1vcmUgdG9rZW5zCiAgICAgKiAgOC4gQ2hhcmxlcyBzZWVzIHRoaXMsIGFuZCBpbW1lZGlhdGVseSBjYWxscyB0cmFuc2ZlckZyb20gYW5kIHJlY2VpdmVzIHRob3NlIDUwIHRva2Vucy4KICAgICAqCiAgICAgKiBTY2VuYXJpbyAyOgogICAgICoKICAgICAqIFRoaXMgaXMgYSByYWNlIGNvbmRpdGlvbi4gVG8gbWl0aWdhdGUgdGhpcyBwcm9ibGVtLCBBbGljZSBzaG91bGQgc2V0IHRoZSBhbGxvd2FuY2UgdG8gMCBpbiBzdGVwIDIsCiAgICAgKiB0aGVuIHdhaXQgdW50aWwgaXQncyBtaW5lZCwgdGhlbiBpZiBCb2IgZGlkbid0IHRha2UgdGhlIDEwMCBzaGUgY2FuIHNldCB0byA1MC4gKE90aGVyd2lzZSBCb2IgbWF5CiAgICAgKiBwb3RlbnRpYWxseSBnZXQgMTUwIHRva2VucykKICAgICAqCiAgICAgKgogICAgICogIDEuIEFsaWNlIGFwcHJvdmVzIEJvYiBmb3IgMTAwLAogICAgICogIDIuIEFsaWNlIGNoYW5nZXMgaXQgdG8gNTAKICAgICAqICAzLiBCb2Igc2VlcyB0aGUgY2hhbmdlIGluIHRoZSBtZW1wb29sIGJlZm9yZSBpdCdzIG1pbmVkLCBhbmQgc2VuZHMgYSBuZXcgdHJhbnNhY3Rpb24KICAgICAqICAgICB0aGF0IHdpbGwgaG9wZWZ1bGx5IHdpbiB0aGUgcmFjZSBhbmQgd2l0aGRyYXcgdGhlIDEwMCBmaXJzdCwgbWVhbndoaWxlIHRoZSA1MCB3aWxsCiAgICAgKiAgICAgYmUgbWluZWQgYWZ0ZXIgYW5kIGFsbG93IEJvYiB0byB3aXRoZHJhdyBhbm90aGVyIDUwLgogICAgICoKICAgICAqCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIG5vdFBlbmRpbmdXaXRoZHJhd2FsCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSByZXR1cm4gZmFsc2U7IC8vIERvbid0IGFsbG93IG1vcmUgdGhhbiB0aGV5IGN1cnJlbnRseSBoYXZlIChib3VuZHMgY2hlY2spCiAgICAgICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3NlcyYjMTgwOwogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLDApYCBpZiBpdCBpcyBub3QKICAgICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7CiAgICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIG11c3QgcmV0dXJuIGEgYm9vbCBhcyBwYXJ0IG9mIHRoZSBFUkMyMAogICAgfQoKCiAgICAvKioKICAgICAqIEVSQy0yMCBBcHByb3ZlcyBhbmQgdGhlbiBjYWxscyB0aGUgcmVjZWl2aW5nIGNvbnRyYWN0CiAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpIG5vdFBlbmRpbmdXaXRoZHJhd2FsCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwoKICAgICAgICAvL2NhbGwgdGhlIHJlY2VpdmVBcHByb3ZhbCBmdW5jdGlvbiBvbiB0aGUgY29udHJhY3QgeW91IHdhbnQgdG8gYmUgbm90aWZpZWQuIFRoaXMgY3JhZnRzIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgbWFudWFsbHkgc28gb25lIGRvZXNuJ3QgaGF2ZSB0byBpbmNsdWRlIGEgY29udHJhY3QgaW4gaGVyZSBqdXN0IGZvciB0aGlzLgogICAgICAgIC8vcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90b2tlbkNvbnRyYWN0LCBieXRlcyBfZXh0cmFEYXRhKQogICAgICAgIC8vaXQgaXMgYXNzdW1lZCB0aGF0IHdoZW4gZG9lcyB0aGlzIHRoYXQgdGhlIGNhbGwgKnNob3VsZCogc3VjY2VlZCwgb3RoZXJ3aXNlIG9uZSB3b3VsZCB1c2UgdmFuaWxsYSBhcHByb3ZlIGluc3RlYWQuCiAgICAgICAgaWYoIV9zcGVuZGVyLmNhbGwoYnl0ZXM0KGJ5dGVzMzIoc2hhMygicmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MsdWludDI1NixhZGRyZXNzLGJ5dGVzKSIpKSksIG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSkpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogRVJDMjAgQSBjb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIGNvaW5zCiAgICAgKiBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy8gbm90ZSB0aGF0IHdlIGNhbid0IHVzZSBub3RQZW5kaW5nV2l0aGRyYXdhbCBtb2RpZmllciBoZXJlIHNpbmNlIHRoaXMgZnVuY3Rpb24gZG9lcyBhIHRyYW5zZmVyCiAgICAgICAgLy8gb24gdGhlIGJlaGFsZiBvZiBfZnJvbQogICAgICAgIGlmICh3aXRoZHJhd2FsUmVxdWVzdHNbX2Zyb21dLnNpbmNlQmxvY2sgPiAwKSB0aHJvdzsgIC8vIGNhbid0IG1vdmUgdG9rZW5zIHdoZW4gX2Zyb20gaXMgcGVuZGluZyB3aXRoZHJhd2FsCiAgICAgICAgaWYgKHdpdGhkcmF3YWxSZXF1ZXN0c1tfdG9dLnNpbmNlQmxvY2sgPiAwKSB0aHJvdzsgICAgLy8gY2FuJ3QgbW92ZSB0b2tlbnMgd2hlbiBfdG8gaXMgcGVuZGluZyB3aXRoZHJhd2FsCiAgICAgICAgaWYgKGJhbGFuY2VPZltfZnJvbV0gPCBfdmFsdWUpIHRocm93OyAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHRocm93OyAgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIGlmIChfdmFsdWUgPiBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKSB0aHJvdzsgICAgIC8vIENoZWNrIGFsbG93YW5jZQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIHdpdGhkcmF3YWxJbml0aWF0ZSBpbml0aWF0ZXMgdGhlIHdpdGhkcmF3YWwgYnkgZ29pbmcgaW50byBhIHdhaXRpbmcgcGVyaW9kCiAgICAgKiBJdCByZW1lbWJlcnMgdGhlIGJsb2NrIG51bWJlciAmIGFtb3VudCBoZWxkIGF0IHRoZSB0aW1lIG9mIHJlcXVlc3QuCiAgICAgKiBUb2tlbnMgY2Fubm90IGJlIG1vdmVkIG91dCBkdXJpbmcgdGhlIHdhaXRpbmcgcGVyaW9kLCBsb2NraW5nIHRoZSB0b2tlbnMgdW50aWwgdGhlbi4KICAgICAqIEFmdGVyIHRoZSB3YWl0aW5nIHBlcmlvZCBmaW5pc2hlcywgdGhlIGNhbGwgd2l0aGRyYXdhbENvbXBsZXRlCiAgICAgKgogICAgICogR2FzOiA2NDQ5MAogICAgICoKICAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXdhbEluaXRpYXRlKCkgbm90UGVuZGluZ1dpdGhkcmF3YWwgewogICAgICAgIFdpdGhkcmF3YWxTdGFydGVkKG1zZy5zZW5kZXIsIGJhbGFuY2VPZlttc2cuc2VuZGVyXSk7CiAgICAgICAgd2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdID0gd2l0aGRyYXdhbFJlcXVlc3QoYmxvY2subnVtYmVyLCBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0pOwogICAgfQoKICAgIC8qKgogICAgICogd2l0aGRyYXdhbENvbXBsZXRlIGlzIGNhbGxlZCBhZnRlciB0aGUgd2FpdGluZyBwZXJpb2QuIFRoZSBldGhlciB3aWxsIGJlCiAgICAgKiByZXR1cm5lZCB0byB0aGUgY2FsbGVyIGFuZCB0aGUgdG9rZW5zIHdpbGwgYmUgYnVybmVkLgogICAgICogQSByZXdhcmQgd2lsbCBiZSBpc3N1ZWQgYmFzZWQgb24gdGhlIGN1cnJlbnQgYW1vdW50IGluIHRoZSBmZWVQb3QsIHJlbGF0aXZlIHRvIHRoZQogICAgICogYW1vdW50IHRoYXQgd2FzIHJlcXVlc3RlZCBmb3Igd2l0aGRyYXdhbCB3aGVuIHdpdGhkcmF3YWxJbml0aWF0ZSgpIHdhcyBjYWxsZWQuCiAgICAgKgogICAgICogR2FzOiAzMDk0NgogICAgICovCiAgICBmdW5jdGlvbiB3aXRoZHJhd2FsQ29tcGxldGUoKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgd2l0aGRyYXdhbFJlcXVlc3QgciA9IHdpdGhkcmF3YWxSZXF1ZXN0c1ttc2cuc2VuZGVyXTsKICAgICAgICBpZiAoci5zaW5jZUJsb2NrID09IDApIHRocm93OwogICAgICAgIGlmICgoci5zaW5jZUJsb2NrICsgYmxvY2tXYWl0KSA+IGJsb2NrLm51bWJlcikgewogICAgICAgICAgICAvLyBob2xkZXIgbmVlZHMgdG8gd2FpdCBzb21lIG1vcmUgYmxvY2tzCiAgICAgICAgICAgIFdpdGhkcmF3YWxQcmVtYXR1cmUobXNnLnNlbmRlciwgci5zaW5jZUJsb2NrICsgYmxvY2tXYWl0IC0gYmxvY2subnVtYmVyKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IGFtb3VudCA9IHdpdGhkcmF3YWxSZXF1ZXN0c1ttc2cuc2VuZGVyXS5hbW91bnQ7CiAgICAgICAgdWludDI1NiByZXdhcmQgPSBjYWxjdWxhdGVSZXdhcmQoci5hbW91bnQpOwogICAgICAgIHdpdGhkcmF3YWxSZXF1ZXN0c1ttc2cuc2VuZGVyXS5zaW5jZUJsb2NrID0gMDsgIC8vIFRoaXMgd2lsbCB1bmxvY2sgdGhlIGhvbGRlcnMgdG9rZW5zCiAgICAgICAgd2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdLmFtb3VudCA9IDA7ICAgICAgLy8gY2xlYXIgdGhlIGFtb3VudCB0aGF0IHdhcyByZXF1ZXN0ZWQKCiAgICAgICAgaWYgKHJld2FyZCA+IDApIHsKICAgICAgICAgICAgaWYgKGZlZVBvdCAtIHJld2FyZCA+IGZlZVBvdCkgewogICAgICAgICAgICAgICAgZmVlUG90ID0gMDsgLy8gb3ZlcmZsb3cKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZlZVBvdCAtPSByZXdhcmQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZG9XaXRoZHJhd2FsKHJld2FyZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVybiB0aGUgdG9rZW5zIGFuZCBzZW5kIGJhY2sgdGhlIGV0aGVyCiAgICAgICAgV2l0aGRyYXdhbERvbmUobXNnLnNlbmRlciwgYW1vdW50LCByZXdhcmQpOwogICAgICAgIHJldHVybiB0cnVlOwoKICAgIH0KCiAgICAvKioKICAgICAqIFJld2FyZCBpcyBiYXNlZCBvbiB0aGUgYW1vdW50IGhlbGQsIHJlbGF0aXZlIHRvIHRvdGFsIHN1cHBseSBvZiB0b2tlbnMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVJld2FyZCh1aW50MjU2IHYpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHJld2FyZCA9IDA7CiAgICAgICAgaWYgKGZlZVBvdCA+IDApIHsKICAgICAgICAgICAgcmV3YXJkID0gZmVlUG90ICogdiAvIHRvdGFsU3VwcGx5OwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmV3YXJkOwogICAgfQoKICAgIC8qKiBjYWxjdWxhdGUgdGhlIGZlZSBmb3IgcXVpY2sgd2l0aGRyYXdhbAogICAgICovCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVGZWUodWludDI1NiB2KSBjb25zdGFudCByZXR1cm5zICAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgZmVlUmVxdWlyZWQgPSB2IC8gMTAwOyAvLyAxJQogICAgICAgIHJldHVybiBmZWVSZXF1aXJlZDsKICAgIH0KCiAgICAvKioKICAgICAqIFF1aWNrIHdpdGhkcmF3YWwsIG5lZWRzIHRvIHNlbmQgZXRoZXIgdG8gdGhpcyBmdW5jdGlvbiBmb3IgdGhlIGZlZS4KICAgICAqCiAgICAgKiBHYXMgdXNlOiAzNTM4NCAoaW5jbHVkaW5nIGNhbGwgdG8gcHJvY2Vzc1dpdGhkcmF3YWwpCiAgICAqLwogICAgZnVuY3Rpb24gcXVpY2tXaXRoZHJhdygpIHBheWFibGUgbm90UGVuZGluZ1dpdGhkcmF3YWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIC8vIGNhbGN1bGF0ZSByZXF1aXJlZCBmZWUKICAgICAgICB1aW50MjU2IGFtb3VudCA9IGJhbGFuY2VPZlttc2cuc2VuZGVyXTsKICAgICAgICBpZiAoYW1vdW50IDw9IDApIHRocm93OwogICAgICAgIHVpbnQyNTYgZmVlUmVxdWlyZWQgPSBjYWxjdWxhdGVGZWUoYW1vdW50KTsKICAgICAgICBpZiAobXNnLnZhbHVlIDwgZmVlUmVxdWlyZWQpIHsKICAgICAgICAgICAgSW5zdWZmaWNpZW50RmVlKG1zZy5zZW5kZXIsIGZlZVJlcXVpcmVkKTsgLy8gbm90IGVub3VnaCBmZWVzIHNlbnQKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IG92ZXJBbW91bnQgPSBtc2cudmFsdWUgLSBmZWVSZXF1aXJlZDsgLy8gY2FsY3VsYXRlIGFueSBvdmVyLXBheW1lbnQKCiAgICAgICAgZmVlUG90ICs9IG1zZy52YWx1ZSAtIG92ZXJBbW91bnQ7ICAgICAgICAgICAgIC8vIGFkZCBmZWUgdG8gdGhlIGZlZVBvdCwgZXhjbHVkaW5nIGFueSBvdmVyLXBheW1lbnQKCiAgICAgICAgZG9XaXRoZHJhd2FsKG92ZXJBbW91bnQpOyAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGhkcmF3ICsgcmV0dXJuIGFueSBvdmVyIHBheW1lbnQKICAgICAgICBXaXRoZHJhd2FsRG9uZShtc2cuc2VuZGVyLCBhbW91bnQsIDApOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogZG8gd2l0aGRyYXdhbAogICAgICovCiAgICBmdW5jdGlvbiBkb1dpdGhkcmF3YWwodWludDI1NiBleHRyYSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gYmFsYW5jZU9mW21zZy5zZW5kZXJdOwogICAgICAgIGlmIChhbW91bnQgPD0gMCkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbm5vdCB3aXRoZHJhdwogICAgICAgIGlmIChhbW91bnQgKyBleHRyYSA+IHRoaXMuYmFsYW5jZSkgewogICAgICAgICAgICB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRyYWN0IGRvZXNuJ3QgaGF2ZSBlbm91Z2ggYmFsYW5jZQogICAgICAgIH0KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIGlmICh0b3RhbFN1cHBseSA+IHRvdGFsU3VwcGx5IC0gYW1vdW50KSB7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3QgbGV0IGl0IG92ZXJmbG93CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdG90YWxTdXBwbHkgLT0gYW1vdW50OyAgICAgICAgICAgICAgICAgICAvLyBkZWZsYXRlIHRoZSBzdXBwbHkhCiAgICAgICAgfQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDAsIGFtb3VudCk7ICAgICAgICAgICAgIC8vIGJ1cm4gYmFieSBidXJuCiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoYW1vdW50ICsgZXh0cmEpKSB0aHJvdzsgLy8gcmV0dXJuIGJhY2sgdGhlIGV0aGVyIG9yIHJvbGxiYWNrIGlmIGZhaWxlZAogICAgfQoKCiAgICAvKioKICAgICAqIEZhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gc2VuZGluZyBldGhlciB0byB0aGUgY29udHJhY3QKICAgICAqIEdhcyB1c2U6IDY1MDUxCiAgICAqLwogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSBub3RQZW5kaW5nV2l0aGRyYXdhbCB7CiAgICAgICAgdWludDI1NiBhbW91bnQgPSBtc2cudmFsdWU7ICAgICAgICAgLy8gYW1vdW50IHRoYXQgd2FzIHNlbnQKICAgICAgICBpZiAoYW1vdW50IDw9IDApIHRocm93OyAgICAgICAgICAgICAvLyBuZWVkIHRvIHNlbmQgc29tZSBFVEgKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gKz0gYW1vdW50OyAgICAvLyBtaW50IG5ldyB0b2tlbnMKICAgICAgICB0b3RhbFN1cHBseSArPSBhbW91bnQ7ICAgICAgICAgICAgICAvLyB0cmFjayB0aGUgc3VwcGx5CiAgICAgICAgVHJhbnNmZXIoMCwgbXNnLnNlbmRlciwgYW1vdW50KTsgICAgLy8gbm90aWZ5IG9mIHRoZSBldmVudAogICAgICAgIERlcG9zaXRlZChtc2cuc2VuZGVyLCBhbW91bnQpOwogICAgfQp9'.
	

]
