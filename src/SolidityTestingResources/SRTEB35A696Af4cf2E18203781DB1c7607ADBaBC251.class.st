Class {
	#name : #SRTEB35A696Af4cf2E18203781DB1c7607ADBaBC251,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTEB35A696Af4cf2E18203781DB1c7607ADBaBC251 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBDcnlwdG9MYW5kbWFya3MgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgLy8gRVJDNzIxIHJlcXVpcmVkIGV2ZW50cwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBpbmRleGVkIHRva2VuSWQpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgYXBwcm92ZWQsIHVpbnQyNTYgaW5kZXhlZCB0b2tlbklkKTsKCiAgICAvLyBFdmVudCBmaXJlZCB3aGVuZXZlciBsYW5kbWFyayBpcyBzb2xkCiAgICBldmVudCBMYW5kbWFya1NvbGQodWludDI1NiB0b2tlbklkLCB1aW50MjU2IHByaWNlLCB1aW50MjU2IG5leHRQcmljZSwgYWRkcmVzcyBwcmV2T3duZXIsIGFkZHJlc3Mgb3duZXIpOwogICAgCiAgICAvLyBFdmVudCBmaXJlZCB3aGVuIHByaWNlIG9mIGxhbmRtYXJrIGNoYW5nZXMKICAgIGV2ZW50IFByaWNlQ2hhbmdlZCh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgcHJpY2UpOwoKICAgIC8vIEV2ZW50IGZpcmVkIGZvciBldmVyeSBuZXcgbGFuZG1hcmsgY3JlYXRlZAogICAgZXZlbnQgTGFuZG1hcmtDcmVhdGVkKHVpbnQyNTYgdG9rZW5JZCwgdWludDI1NiBncm91cElkLCB1aW50MjU2IHByaWNlLCBhZGRyZXNzIG93bmVyKTsKCiAgIAogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBOQU1FID0gIkNyeXB0b0xhbmRtYXJrcy5jbyBMYW5kbWFya3MiOyAKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1lNQk9MID0gIkxBTkRNQVJLIjsgCgogICAgLy8gSW5pdGlhbCBwcmljZSBvZiBuZXcgTGFuZG1hcmsKICAgIHVpbnQyNTYgcHJpdmF0ZSBzdGFydGluZ1ByaWNlID0gMC4wMyBldGhlcjsKICAgIC8vIEluaXRpYWwgcHJpY2Ugb2YgbmV3IEFtYmFzc2Fkb3IKICAgIHVpbnQyNTYgcHJpdmF0ZSBhbWJhc3NhZG9yU3RhcnRpbmdQcmljZSA9IDMgZXRoZXI7CgogICAgLy8gY291bnQgdHJhbnNhY3Rpb25zIGFmdGVyIGV2ZXJ5IHdpdGhkcmF3YWwKICAgIHVpbnQyNTYgcHVibGljIHRyYW5zYWN0aW9ucyA9IDA7CgogICAgLy8gQ29udHJhY3Qgcm9sZXMKICAgIGFkZHJlc3MgcHVibGljIGNlbzsKICAgIGFkZHJlc3MgcHVibGljIGNvbzsKCiAgICB1aW50MjU2W10gcHJpdmF0ZSBsYW5kbWFya3M7CiAgICAKICAgIC8vIGxhbmRtYXJrIHRvIHByaWNlcwogICAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBsYW5kbWFya1RvTWF4UHJpY2U7CiAgICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIGxhbmRtYXJrVG9QcmljZTsKICAgIAogICAgLy8gbGFuZG1hcmsgdG8gb3duZXIKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgbGFuZG1hcmtUb093bmVyOwogICAgCiAgICAvLyBsYW5kbWFyayB0byBhbWJhc3NhZG9yIGlkCiAgICAvLyBhbWJhc3NhZG9yIGlzIGFsc28gbGFuZG1hcmsgdG9rZW4KICAgIC8vIGV2ZXJ5IGFtYmFzc2Fkb3IgYmVsb25ncyB0byBzZWxmCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIGxhbmRtYXJrVG9BbWJhc3NhZG9yOwogICAgCiAgICAvLyBhbWJhc3NhZG9ycydzIGxhbmRtYXJrcyBjb3VudAogICAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBncm91cExhbmRtYXJrc0NvdW50OwoKICAgIC8vIHdpdGhkcmF3IGNvb2xkb3duIGRhdGUgb2YgbGFuZG1hcmsgb3duZXIKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHdpdGhkcmF3Q29vbGRvd247CgogICAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBsYW5kbWFya1RvQXBwcm92ZWQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGxhbmRtYXJrT3duZXJzaGlwQ291bnQ7CgoKICAgIGZ1bmN0aW9uIENyeXB0b0xhbmRtYXJrcygpIHB1YmxpYyB7CiAgICAgICAgY2VvID0gbXNnLnNlbmRlcjsKICAgICAgICBjb28gPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZU5leHRQcmljZSAodWludDI1NiBfcHJpY2UpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX25leHRQcmljZSkgewogICAgICAgIGlmIChfcHJpY2UgPCAwLjIgZXRoZXIpCiAgICAgICAgICAgIHJldHVybiBfcHJpY2UubXVsKDIpOyAvLyAyMDAlCiAgICAgICAgaWYgKF9wcmljZSA8IDQgZXRoZXIpCiAgICAgICAgICAgIHJldHVybiBfcHJpY2UubXVsKDE3KS5kaXYoMTApOyAvLyAxNzAlCiAgICAgICAgaWYgKF9wcmljZSA8IDE1IGV0aGVyKQogICAgICAgICAgICByZXR1cm4gX3ByaWNlLm11bCgxNDEpLmRpdigxMDApOyAvLyAxNDElCiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1cm4gX3ByaWNlLm11bCgxMzQpLmRpdigxMDApOyAvLyAxMzQlCiAgICB9CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlRGV2Q3V0ICh1aW50MjU2IF9wcmljZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfZGV2Q3V0KSB7CiAgICAgICAgaWYgKF9wcmljZSA8IDAuMiBldGhlcikKICAgICAgICAgICAgcmV0dXJuIDU7IC8vIDUlCiAgICAgICAgaWYgKF9wcmljZSA8IDQgZXRoZXIpCiAgICAgICAgICAgIHJldHVybiA0OyAvLyA0JQogICAgICAgIGlmIChfcHJpY2UgPCAxNSBldGhlcikKICAgICAgICAgICAgcmV0dXJuIDM7IC8vIDMlCiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1cm4gMjsgLy8gMiUKICAgIH0gICAKCiAgICAvKgogICAgICAgIEJ1eSBMYW5kbWFyayBvciBBbWJhc3NhZG9yIGZyb20gY29udHJhY3QgZm9yIGNhbGN1bGF0ZWQgcHJpY2UgdGhhdCBlbnN1cmVzIHRoYXQ6CiAgICAgICAgIC0gcHJldmlvdXMgb3duZXIgZ2V0cyBhIHByb2ZpdAogICAgICAgICAtIHNwZWNpZmljIEFtYmFzc2Fkb3IgZ2V0cyBoaXMvaGVyIGZlZQogICAgICAgICAtIGV2ZXJ5IG93bmVyIG9mIExhbmRtYXJrIGluIGFuIEFtYmFzc2Fkb3IgZ3JvdXAgZ2V0cyBhIGN1dAogICAgICAgIEFsbCBmdW5kcyBhcmUgc2VudCBkaXJlY3RseSB0byBwbGF5ZXJzIGFuZCBhcmUgbmV2ZXIgc3RvcmVkIGluIHRoZSBjb250cmFjdC4KCiAgICAgICAgQW1iYXNzYWRvciAtPiBfdG9rZW5JZCA8IDEwMDAKICAgICAgICBMYW5kbWFyayAtPiBfdG9rZW5JZCA+PSAxMDAwCgogICAgKi8KICAgIGZ1bmN0aW9uIGJ1eSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgYWRkcmVzcyBvbGRPd25lciA9IGxhbmRtYXJrVG9Pd25lcltfdG9rZW5JZF07CiAgICAgICAgcmVxdWlyZShvbGRPd25lciAhPSBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgdWludDI1NiBzZWxsaW5nUHJpY2UgPSBwcmljZU9mTGFuZG1hcmsoX3Rva2VuSWQpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHNlbGxpbmdQcmljZSk7CgogICAgICAgIC8vIGV4Y2VzcyB0aGF0IHdpbGwgYmUgcmVmdW5kZWQKICAgICAgICB1aW50MjU2IGV4Y2VzcyA9IG1zZy52YWx1ZS5zdWIoc2VsbGluZ1ByaWNlKTsKCiAgICAgICAgLy8gaWQgb2YgYSBncm91cCA9IGFtYmFzc2Fkb3IgaWQKICAgICAgICB1aW50MjU2IGdyb3VwSWQgPSBsYW5kbWFya1RvQW1iYXNzYWRvcltfdG9rZW5JZF07CgogICAgICAgIC8vIG51bWJlciBvZiBMYW5kbWFya3MgaW4gdGhlIGdyb3VwCiAgICAgICAgdWludDI1NiBncm91cE1lbWJlcnNDb3VudCA9IGdyb3VwTGFuZG1hcmtzQ291bnRbZ3JvdXBJZF07CgogICAgICAgIC8vIGRldmVsb3BlcidzIGN1dCBpbiAlICgyLTUpCiAgICAgICAgdWludDI1NiBkZXZDdXQgPSBjYWxjdWxhdGVEZXZDdXQoc2VsbGluZ1ByaWNlKTsKCiAgICAgICAgLy8gZm9yIHByZXZpb3VzIG93bmVyCiAgICAgICAgdWludDI1NiBwYXltZW50OwogICAgICAgIAogICAgICAgIGlmIChfdG9rZW5JZCA8IDEwMDApIHsKICAgICAgICAgICAgLy8gQnV5aW5nIEFtYmFzc2Fkb3IKICAgICAgICAgICAgcGF5bWVudCA9IHNlbGxpbmdQcmljZS5tdWwoU2FmZU1hdGguc3ViKDk1LCBkZXZDdXQpKS5kaXYoMTAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBCdXlpbmcgTGFuZG1hcmsKICAgICAgICAgICAgcGF5bWVudCA9IHNlbGxpbmdQcmljZS5tdWwoU2FmZU1hdGguc3ViKDkwLCBkZXZDdXQpKS5kaXYoMTAwKTsKICAgICAgICB9CgogICAgICAgIC8vIDUlIHNwbGl0dGVkIHBlciBhbGwgZ3JvdXAgbWVtZWJycwogICAgICAgIHVpbnQyNTYgZmVlR3JvdXBNZW1iZXIgPSAoc2VsbGluZ1ByaWNlLm11bCg1KS5kaXYoMTAwKSkuZGl2KGdyb3VwTWVtYmVyc0NvdW50KTsKCgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IHRvdGFsU3VwcGx5KCk7IGkrKykgewogICAgICAgICAgICB1aW50IGlkID0gbGFuZG1hcmtzW2ldOwogICAgICAgICAgICBpZiAoIGxhbmRtYXJrVG9BbWJhc3NhZG9yW2lkXSA9PSBncm91cElkICkgewogICAgICAgICAgICAgICAgaWYgKCBfdG9rZW5JZCA9PSBpZCkgewogICAgICAgICAgICAgICAgICAgIC8vIFRyYW5zZmVyIHBheW1lbnQgdG8gcHJldmlvdXMgb3duZXIKICAgICAgICAgICAgICAgICAgICBvbGRPd25lci50cmFuc2ZlcihwYXltZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChncm91cElkID09IGlkICYmIF90b2tlbklkID49IDEwMDApIHsKICAgICAgICAgICAgICAgICAgICAvLyBUcmFuc2ZlciA1JSB0byBBbWJhc3NhZG9yCiAgICAgICAgICAgICAgICAgICAgbGFuZG1hcmtUb093bmVyW2lkXS50cmFuc2ZlcihzZWxsaW5nUHJpY2UubXVsKDUpLmRpdigxMDApKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBUcmFuc2ZlciBjdXQgdG8gZXZlcnkgbWVtYmVyIG9mIGEgZ3JvdXAKICAgICAgICAgICAgICAgIC8vIHNpbmNlIGFtYmFzc2Fkb3IgYW5kIG9sZCBvd25lciBhcmUgYWxzbyBtZW1iZXJzIHRoZXkgZ2V0IGEgY3V0IGFnYWluIHRvbwogICAgICAgICAgICAgICAgbGFuZG1hcmtUb093bmVyW2lkXS50cmFuc2ZlcihmZWVHcm91cE1lbWJlcik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdWludDI1NiBuZXh0UHJpY2UgPSBjYWxjdWxhdGVOZXh0UHJpY2Uoc2VsbGluZ1ByaWNlKTsKCiAgICAgICAgLy8gU2V0IG5ldyBwcmljZQogICAgICAgIGxhbmRtYXJrVG9QcmljZVtfdG9rZW5JZF0gPSBuZXh0UHJpY2U7CgogICAgICAgIC8vIFNldCBuZXcgbWF4aW11bSBwcmljZQogICAgICAgIGxhbmRtYXJrVG9NYXhQcmljZVtfdG9rZW5JZF0gPSBuZXh0UHJpY2U7CgogICAgICAgIC8vIFRyYW5zZmVyIHRva2VuCiAgICAgICAgX3RyYW5zZmVyKG9sZE93bmVyLCBtc2cuc2VuZGVyLCBfdG9rZW5JZCk7CgogICAgICAgIC8vIGlmIG92ZXJwYWlkLCB0cmFuc2ZlciBleGNlc3MgYmFjayB0byBzZW5kZXIKICAgICAgICBpZiAoZXhjZXNzID4gMCkgewogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV4Y2Vzcyk7CiAgICAgICAgfQoKICAgICAgICAvLyBpbmNyZW1lbnQgdHJhbnNhY3Rpb25zIGNvdW50ZXIKICAgICAgICB0cmFuc2FjdGlvbnMrKzsKCiAgICAgICAgLy8gZW1pdCBldmVudAogICAgICAgIExhbmRtYXJrU29sZChfdG9rZW5JZCwgc2VsbGluZ1ByaWNlLCBuZXh0UHJpY2UsIG9sZE93bmVyLCBtc2cuc2VuZGVyKTsKICAgIH0KCgogICAgLy8gb3duZXIgY2FuIGNoYW5nZSBwcmljZQogICAgZnVuY3Rpb24gY2hhbmdlUHJpY2UodWludDI1NiBfdG9rZW5JZCwgdWludDI1NiBfcHJpY2UpIHB1YmxpYyB7CiAgICAgICAgLy8gb25seSBvd25lciBjYW4gY2hhbmdlIHByaWNlCiAgICAgICAgcmVxdWlyZShsYW5kbWFya1RvT3duZXJbX3Rva2VuSWRdID09IG1zZy5zZW5kZXIpOwoKICAgICAgICAvLyBwcmljZSBjYW5ub3QgYmUgaGlnaGVyIHRoYW4gbWF4aW11bSBwcmljZQogICAgICAgIHJlcXVpcmUobGFuZG1hcmtUb01heFByaWNlW190b2tlbklkXSA+PSBfcHJpY2UpOwoKICAgICAgICAvLyBzZXQgbmV3IHByaWNlCiAgICAgICAgbGFuZG1hcmtUb1ByaWNlW190b2tlbklkXSA9IF9wcmljZTsKICAgICAgICAKICAgICAgICAvLyBlbWl0IGV2ZW50CiAgICAgICAgUHJpY2VDaGFuZ2VkKF90b2tlbklkLCBfcHJpY2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZUxhbmRtYXJrKHVpbnQyNTYgX3Rva2VuSWQsIHVpbnQyNTYgX2dyb3VwSWQsIGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSkgcHVibGljIG9ubHlDT08gewogICAgICAgIC8vIHRva2VuIHdpdGggaWQgYmVsb3cgMTAwMCBpcyBhIEFtYmFzc2Fkb3IKICAgICAgICBpZiAoX3ByaWNlIDw9IDAgJiYgX3Rva2VuSWQgPj0gMTAwMCkgewogICAgICAgICAgICBfcHJpY2UgPSBzdGFydGluZ1ByaWNlOwogICAgICAgIH0gZWxzZSBpZiAoX3ByaWNlIDw9IDAgJiYgX3Rva2VuSWQgPCAxMDAwKSB7CiAgICAgICAgICAgIF9wcmljZSA9IGFtYmFzc2Fkb3JTdGFydGluZ1ByaWNlOwogICAgICAgIH0KICAgICAgICBpZiAoX293bmVyID09IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgX293bmVyID0gY29vOwogICAgICAgIH0KCiAgICAgICAgaWYgKF90b2tlbklkIDwgMTAwMCkgewogICAgICAgICAgICBfZ3JvdXBJZCA9PSBfdG9rZW5JZDsKICAgICAgICB9CgogICAgICAgIGxhbmRtYXJrVG9QcmljZVtfdG9rZW5JZF0gPSBfcHJpY2U7CiAgICAgICAgbGFuZG1hcmtUb01heFByaWNlW190b2tlbklkXSA9IF9wcmljZTsKICAgICAgICBsYW5kbWFya1RvQW1iYXNzYWRvcltfdG9rZW5JZF0gPSBfZ3JvdXBJZDsKICAgICAgICBncm91cExhbmRtYXJrc0NvdW50W19ncm91cElkXSsrOwogICAgICAgIF90cmFuc2ZlcihhZGRyZXNzKDApLCBfb3duZXIsIF90b2tlbklkKTsKCiAgICAgICAgbGFuZG1hcmtzLnB1c2goX3Rva2VuSWQpOwoKICAgICAgICBMYW5kbWFya0NyZWF0ZWQoX3Rva2VuSWQsIF9ncm91cElkLCBfcHJpY2UsIF9vd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TGFuZG1hcmsodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoCiAgICAgICAgdWludDI1NiBhbWJhc3NhZG9ySWQsCiAgICAgICAgdWludDI1NiBzZWxsaW5nUHJpY2UsCiAgICAgICAgdWludDI1NiBtYXhQcmljZSwKICAgICAgICB1aW50MjU2IG5leHRQcmljZSwKICAgICAgICBhZGRyZXNzIG93bmVyCiAgICApIHsKICAgICAgICBhbWJhc3NhZG9ySWQgPSBsYW5kbWFya1RvQW1iYXNzYWRvcltfdG9rZW5JZF07CiAgICAgICAgc2VsbGluZ1ByaWNlID0gbGFuZG1hcmtUb1ByaWNlW190b2tlbklkXTsKICAgICAgICBtYXhQcmljZSA9IGxhbmRtYXJrVG9NYXhQcmljZVtfdG9rZW5JZF07CiAgICAgICAgbmV4dFByaWNlID0gY2FsY3VsYXRlTmV4dFByaWNlKHNlbGxpbmdQcmljZSk7CiAgICAgICAgb3duZXIgPSBsYW5kbWFya1RvT3duZXJbX3Rva2VuSWRdOwogICAgfQoKICAgIGZ1bmN0aW9uIHByaWNlT2ZMYW5kbWFyayh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGxhbmRtYXJrVG9QcmljZVtfdG9rZW5JZF07CiAgICB9CgoKICAgIG1vZGlmaWVyIG9ubHlDRU8oKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNlbyk7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIG9ubHlDT08oKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbyk7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIG9ubHlDTGV2ZWwoKSB7CiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgbXNnLnNlbmRlciA9PSBjZW8gfHwKICAgICAgICAgICAgbXNnLnNlbmRlciA9PSBjb28KICAgICAgICApOwogICAgICAgIF87CiAgICB9CiAgICBtb2RpZmllciBub3RDTGV2ZWwoKSB7CiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgbXNnLnNlbmRlciAhPSBjZW8gfHwKICAgICAgICAgICAgbXNnLnNlbmRlciAhPSBjb28KICAgICAgICApOwogICAgICAgIF87CiAgICB9CgogICAgLyoKICAgICAgICBUcmFuc2ZlciAwLjMlIHBlciB0b2tlbiB0byBzZW5kZXIKICAgICAgICBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBpbnZva2VkIGJ5IGFueW9uZSB3aG86CiAgICAgICAgIC0gaGFzIGF0IGxlYXN0IDMgdG9rZW5zCiAgICAgICAgIC0gd2FpdGVkIGF0IGxlYXN0IDEgd2VlayBmcm9tIHByZXZpb3VzIHdpdGhkcmF3YWwKICAgICAgICAgLSBpcyBub3QgYSBjZW8vY29vCiAgICAgICAgQWRkaXRpb25hbGx5IGl0IGNhbiBiZSBpbnZva2VkIG9ubHk6CiAgICAgICAgIC0gd2hlbiB0b3RhbCBiYWxhbmNlIGlzIGdyZWF0ZXIgdGhhbiAxIGV0aAogICAgICAgICAtIGFmdGVyIDEwIHRyYW5zYWN0aW9ucyBmcm9tIHByZXZpb3VzIHdpdGhkcmF3YWwKCgogICAgKi8KICAgIGZ1bmN0aW9uIHdpdGhkcmF3QmFsYW5jZSgpIGV4dGVybmFsIG5vdENMZXZlbCB7CiAgICAgICAgLy8gb25seSBwZXJzb24gb3duaW5nIG1vcmUgdGhhbiAzIHRva2VucyBjYW4gd2hpdGRyYXcKICAgICAgICByZXF1aXJlKGxhbmRtYXJrT3duZXJzaGlwQ291bnRbbXNnLnNlbmRlcl0gPj0gMyk7CiAgICAgICAgCiAgICAgICAgLy8gcGxheWVyIGNhbiB3aXRoZHJhdyBvbmx5IHdlZWsgYWZ0ZXIgaGlzIHByZXZpb3VzIHdpdGhkcmF3YWwKICAgICAgICByZXF1aXJlKHdpdGhkcmF3Q29vbGRvd25bbXNnLnNlbmRlcl0gPD0gbm93KTsKCiAgICAgICAgLy8gY2FuIGJlIGludm9rZWQgYWZ0ZXIgYW55IDEwIHB1cmNoYXNlcyBmcm9tIHByZXZpb3VzIHdpdGhkcmF3YWwKICAgICAgICByZXF1aXJlKHRyYW5zYWN0aW9ucyA+PSAxMCk7CgogICAgICAgIHVpbnQyNTYgYmFsYW5jZSA9IHRoaXMuYmFsYW5jZTsKCiAgICAgICAgLy8gYmFsYW5jZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwLjMgZXRoZXIKICAgICAgICByZXF1aXJlKGJhbGFuY2UgPj0gMC4zIGV0aGVyKTsKCiAgICAgICAgdWludDI1NiBzZW5kZXJDdXQgPSBiYWxhbmNlLm11bCgzKS5kaXYoMTAwMCkubXVsKGxhbmRtYXJrT3duZXJzaGlwQ291bnRbbXNnLnNlbmRlcl0pOwogICAgICAgIAogICAgICAgIC8vIHRyYW5zZmVyIDAuMyUgcGVyIExhbmRtYXJrIG9yIEFtYmFzc2Fkb3IgdG8gc2VuZGVyCiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihzZW5kZXJDdXQpOwoKICAgICAgICAvLyBzZXQgc2VuZGVyIHdpdGhkcmF3IGNvb2xkb3duCiAgICAgICAgd2l0aGRyYXdDb29sZG93blttc2cuc2VuZGVyXSA9IG5vdyArIDEgd2Vla3M7CgogICAgICAgIC8vIHRyYW5zZmVyIHJlc3QgdG8gQ0VPIAogICAgICAgIGNlby50cmFuc2ZlcihiYWxhbmNlLnN1YihzZW5kZXJDdXQpKTsKCiAgICAgICAgLy8gc2V0IHRyYW5zYWN0aW9ucyBjb3VudGVyIHRvIDAKICAgICAgICB0cmFuc2FjdGlvbnMgPSAwOwoKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seUNFTyB7CiAgICAgICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgY2VvID0gbmV3T3duZXI7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldENPTyhhZGRyZXNzIG5ld0NPTykgcHVibGljIG9ubHlDT08gewogICAgICAgIGlmIChuZXdDT08gIT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICBjb28gPSBuZXdDT087CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICAgICAgbGFuZG1hcmtPd25lcnNoaXBDb3VudFtfdG9dKys7CiAgICAgICAgbGFuZG1hcmtUb093bmVyW190b2tlbklkXSA9IF90bzsKCiAgICAgICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgbGFuZG1hcmtPd25lcnNoaXBDb3VudFtfZnJvbV0tLTsKICAgICAgICAgICAgZGVsZXRlIGxhbmRtYXJrVG9BcHByb3ZlZFtfdG9rZW5JZF07CiAgICAgICAgfQogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICAgIH0KCiAgICAvL0VSQzcyMSBtZXRob2RzCiAgICBmdW5jdGlvbiBpbXBsZW1lbnRzRVJDNzIxKCkgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBsYW5kbWFya3MubGVuZ3RoOwogICAgfQoKICAgIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsKICAgICAgICByZXR1cm4gTkFNRTsKICAgIH0KCiAgICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsKICAgICAgICByZXR1cm4gU1lNQk9MOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGxhbmRtYXJrT3duZXJzaGlwQ291bnRbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpIHsKICAgICAgICBvd25lciA9IGxhbmRtYXJrVG9Pd25lcltfdG9rZW5JZF07CiAgICAgICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApKTsKICAgIH0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUobGFuZG1hcmtUb093bmVyW190b2tlbklkXSA9PSBtc2cuc2VuZGVyKTsKCiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogICAgfQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKGxhbmRtYXJrVG9Pd25lcltfdG9rZW5JZF0gPT0gbXNnLnNlbmRlcik7CiAgICAgICAgbGFuZG1hcmtUb0FwcHJvdmVkW190b2tlbklkXSA9IF90bzsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICAgIH0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKGxhbmRtYXJrVG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX3RvKTsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKGxhbmRtYXJrVG9Pd25lcltfdG9rZW5JZF0gPT0gX2Zyb20pOwoKICAgICAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRva2Vuc09mT3duZXIoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NltdKSB7CiAgICAgICAgdWludDI1NiB0b2tlbkNvdW50ID0gYmFsYW5jZU9mKF9vd25lcik7CgogICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXSh0b2tlbkNvdW50KTsKICAgICAgICB1aW50MjU2IHRvdGFsID0gdG90YWxTdXBwbHkoKTsKICAgICAgICB1aW50MjU2IHJlc3VsdEluZGV4ID0gMDsKCiAgICAgICAgZm9yKHVpbnQyNTYgaSA9IDA7IGkgPD0gdG90YWw7IGkrKykgewogICAgICAgICAgICBpZiAobGFuZG1hcmtUb093bmVyW2ldID09IF9vd25lcikgewogICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdEluZGV4XSA9IGk7CiAgICAgICAgICAgICAgICByZXN1bHRJbmRleCsrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9Cgp9CgoKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9'.
	

]
