Class {
	#name : #SRT012233b3c8177f0778d910ed88170b82de3bfe57,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT012233b3c8177f0778d910ed88170b82de3bfe57 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMDsKCgovKgoKVGVtcG9yYXJ5IEhhc2ggUmVnaXN0cmFyIAo9PT09PT09PT09PT09PT09PT09PT09PT0KClRoaXMgaXMgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgYSBoYXNoIHJlZ2lzdHJhci4gSXQgaXMgcHVycG9yc2VmdWxseSBsaW1pdGVkOgpuYW1lcyBjYW5ub3QgYmUgc2l4IGxldHRlcnMgb3Igc2hvcnRlciwgbmV3IGF1Y3Rpb25zIHdpbGwgc3RvcCBhZnRlciA0IHllYXJzCmFuZCBhbGwgZXRoZXIgc3RpbGwgbG9ja2VkIGFmdGVyIDggeWVhcnMgd2lsbCBiZWNvbWUgdW5yZWFjaGFibGUuCgpUaGUgcGxhbiBpcyB0byB0ZXN0IHRoZSBiYXNpYyBmZWF0dXJlcyBhbmQgdGhlbiBtb3ZlIHRvIGEgbmV3IGNvbnRyYWN0IGluIGF0IG1vc3QKMiB5ZWFycywgd2hlbiBzb21lIHNvcnQgb2YgcmVuZXdhbCBtZWNoYW5pc20gd2lsbCBiZSBlbmFibGVkLgoqLwoKCmNvbnRyYWN0IEFic3RyYWN0RU5TIHsKICAgIGZ1bmN0aW9uIG93bmVyKGJ5dGVzMzIgbm9kZSkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIHJlc29sdmVyKGJ5dGVzMzIgbm9kZSkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIHR0bChieXRlczMyIG5vZGUpIGNvbnN0YW50IHJldHVybnModWludDY0KTsKICAgIGZ1bmN0aW9uIHNldE93bmVyKGJ5dGVzMzIgbm9kZSwgYWRkcmVzcyBvd25lcik7CiAgICBmdW5jdGlvbiBzZXRTdWJub2RlT3duZXIoYnl0ZXMzMiBub2RlLCBieXRlczMyIGxhYmVsLCBhZGRyZXNzIG93bmVyKTsKICAgIGZ1bmN0aW9uIHNldFJlc29sdmVyKGJ5dGVzMzIgbm9kZSwgYWRkcmVzcyByZXNvbHZlcik7CiAgICBmdW5jdGlvbiBzZXRUVEwoYnl0ZXMzMiBub2RlLCB1aW50NjQgdHRsKTsKCiAgICBldmVudCBUcmFuc2ZlcihieXRlczMyIGluZGV4ZWQgbm9kZSwgYWRkcmVzcyBvd25lcik7CiAgICBldmVudCBOZXdPd25lcihieXRlczMyIGluZGV4ZWQgbm9kZSwgYnl0ZXMzMiBpbmRleGVkIGxhYmVsLCBhZGRyZXNzIG93bmVyKTsKICAgIGV2ZW50IE5ld1Jlc29sdmVyKGJ5dGVzMzIgaW5kZXhlZCBub2RlLCBhZGRyZXNzIHJlc29sdmVyKTsKICAgIGV2ZW50IE5ld1RUTChieXRlczMyIGluZGV4ZWQgbm9kZSwgdWludDY0IHR0bCk7Cn0KCi8qKgogKiBAdGl0bGUgRGVlZCB0byBob2xkIGV0aGVyIGluIGV4Y2hhbmdlIGZvciBvd25lcnNoaXAgb2YgYSBub2RlCiAqIEBkZXYgVGhlIGRlZWQgY2FuIGJlIGNvbnRyb2xsZWQgb25seSBieSB0aGUgcmVnaXN0cmFyIGFuZCBjYW4gb25seSBzZW5kIGV0aGVyIGJhY2sgdG8gdGhlIG93bmVyLgogKi8KY29udHJhY3QgRGVlZCB7CiAgICBhZGRyZXNzIHB1YmxpYyByZWdpc3RyYXI7CiAgICBhZGRyZXNzIGNvbnN0YW50IGJ1cm4gPSAweGRlYWQ7CiAgICB1aW50IHB1YmxpYyBjcmVhdGlvbkRhdGU7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIHByZXZpb3VzT3duZXI7CiAgICB1aW50IHB1YmxpYyB2YWx1ZTsKICAgIGV2ZW50IE93bmVyQ2hhbmdlZChhZGRyZXNzIG5ld093bmVyKTsKICAgIGV2ZW50IERlZWRDbG9zZWQoKTsKICAgIGJvb2wgYWN0aXZlOwoKCiAgICBtb2RpZmllciBvbmx5UmVnaXN0cmFyIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSByZWdpc3RyYXIpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUFjdGl2ZSB7CiAgICAgICAgaWYgKCFhY3RpdmUpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gRGVlZCh1aW50IF92YWx1ZSkgewogICAgICAgIHJlZ2lzdHJhciA9IG1zZy5zZW5kZXI7CiAgICAgICAgY3JlYXRpb25EYXRlID0gbm93OwogICAgICAgIGFjdGl2ZSA9IHRydWU7CiAgICAgICAgdmFsdWUgPSBfdmFsdWU7CiAgICB9CiAgICAgICAgCiAgICBmdW5jdGlvbiBzZXRPd25lcihhZGRyZXNzIG5ld093bmVyKSBvbmx5UmVnaXN0cmFyIHsKICAgICAgICAvLyBzbyBjb250cmFjdHMgY2FuIGNoZWNrIHdobyBzZW50IHRoZW0gdGhlIG93bmVyc2hpcAogICAgICAgIHByZXZpb3VzT3duZXIgPSBvd25lcjsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIE93bmVyQ2hhbmdlZChuZXdPd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UmVnaXN0cmFyKGFkZHJlc3MgbmV3UmVnaXN0cmFyKSBvbmx5UmVnaXN0cmFyIHsKICAgICAgICByZWdpc3RyYXIgPSBuZXdSZWdpc3RyYXI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldEJhbGFuY2UodWludCBuZXdWYWx1ZSkgb25seVJlZ2lzdHJhciBvbmx5QWN0aXZlIHBheWFibGUgewogICAgICAgIC8vIENoZWNrIGlmIGl0IGhhcyBlbm91Z2ggYmFsYW5jZSB0byBzZXQgdGhlIHZhbHVlCiAgICAgICAgaWYgKHZhbHVlIDwgbmV3VmFsdWUpIHRocm93OwogICAgICAgIHZhbHVlID0gbmV3VmFsdWU7CiAgICAgICAgLy8gU2VuZCB0aGUgZGlmZmVyZW5jZSB0byB0aGUgb3duZXIKICAgICAgICBpZiAoIW93bmVyLnNlbmQodGhpcy5iYWxhbmNlIC0gbmV3VmFsdWUpKSB0aHJvdzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQ2xvc2UgYSBkZWVkIGFuZCByZWZ1bmQgYSBzcGVjaWZpZWQgZnJhY3Rpb24gb2YgdGhlIGJpZCB2YWx1ZQogICAgICogQHBhcmFtIHJlZnVuZFJhdGlvIFRoZSBhbW91bnQqMS8xMDAwIHRvIHJlZnVuZAogICAgICovCiAgICBmdW5jdGlvbiBjbG9zZURlZWQodWludCByZWZ1bmRSYXRpbykgb25seVJlZ2lzdHJhciBvbmx5QWN0aXZlIHsKICAgICAgICBhY3RpdmUgPSBmYWxzZTsgICAgICAgICAgICAKICAgICAgICBpZiAoISBidXJuLnNlbmQoKCgxMDAwIC0gcmVmdW5kUmF0aW8pICogdGhpcy5iYWxhbmNlKS8xMDAwKSkgdGhyb3c7CiAgICAgICAgRGVlZENsb3NlZCgpOwogICAgICAgIGRlc3Ryb3lEZWVkKCk7CiAgICB9ICAgIAoKICAgIC8qKgogICAgICogQGRldiBDbG9zZSBhIGRlZWQgYW5kIHJlZnVuZCBhIHNwZWNpZmllZCBmcmFjdGlvbiBvZiB0aGUgYmlkIHZhbHVlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGRlc3Ryb3lEZWVkKCkgewogICAgICAgIGlmIChhY3RpdmUpIHRocm93OwogICAgICAgIGlmKG93bmVyLnNlbmQodGhpcy5iYWxhbmNlKSkKICAgICAgICAgICAgc2VsZmRlc3RydWN0KGJ1cm4pOwogICAgfQoKICAgIC8vIFRoZSBkZWZhdWx0IGZ1bmN0aW9uIGp1c3QgcmVjZWl2ZXMgYW4gYW1vdW50CiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHt9Cn0KCi8qKgogKiBAdGl0bGUgUmVnaXN0cmFyCiAqIEBkZXYgVGhlIHJlZ2lzdHJhciBoYW5kbGVzIHRoZSBhdWN0aW9uIHByb2Nlc3MgZm9yIGVhY2ggc3Vibm9kZSBvZiB0aGUgbm9kZSBpdCBvd25zLgogKi8KY29udHJhY3QgUmVnaXN0cmFyIHsKICAgIEFic3RyYWN0RU5TIHB1YmxpYyBlbnM7CiAgICBieXRlczMyIHB1YmxpYyByb290Tm9kZTsKCiAgICBtYXBwaW5nIChieXRlczMyID0+IGVudHJ5KSBfZW50cmllczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyhieXRlczMyID0+IERlZWQpKSBwdWJsaWMgc2VhbGVkQmlkczsKICAgIAogICAgZW51bSBNb2RlIHsgT3BlbiwgQXVjdGlvbiwgT3duZWQsIEZvcmJpZGRlbiwgUmV2ZWFsIH0KICAgIHVpbnQzMiBjb25zdGFudCBhdWN0aW9uTGVuZ3RoID0gNSBkYXlzOwogICAgdWludDMyIGNvbnN0YW50IHJldmVhbFBlcmlvZCA9IDQ4IGhvdXJzOwogICAgdWludDMyIGNvbnN0YW50IGluaXRpYWxBdWN0aW9uUGVyaW9kID0gNCB3ZWVrczsKICAgIHVpbnQgY29uc3RhbnQgbWluUHJpY2UgPSAwLjAxIGV0aGVyOwogICAgdWludCBwdWJsaWMgcmVnaXN0cnlTdGFydGVkOwoKICAgIGV2ZW50IEF1Y3Rpb25TdGFydGVkKGJ5dGVzMzIgaW5kZXhlZCBoYXNoLCB1aW50IHJlZ2lzdHJhdGlvbkRhdGUpOwogICAgZXZlbnQgTmV3QmlkKGJ5dGVzMzIgaW5kZXhlZCBoYXNoLCBhZGRyZXNzIGluZGV4ZWQgYmlkZGVyLCB1aW50IGRlcG9zaXQpOwogICAgZXZlbnQgQmlkUmV2ZWFsZWQoYnl0ZXMzMiBpbmRleGVkIGhhc2gsIGFkZHJlc3MgaW5kZXhlZCBvd25lciwgdWludCB2YWx1ZSwgdWludDggc3RhdHVzKTsKICAgIGV2ZW50IEhhc2hSZWdpc3RlcmVkKGJ5dGVzMzIgaW5kZXhlZCBoYXNoLCBhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQgdmFsdWUsIHVpbnQgcmVnaXN0cmF0aW9uRGF0ZSk7CiAgICBldmVudCBIYXNoUmVsZWFzZWQoYnl0ZXMzMiBpbmRleGVkIGhhc2gsIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgSGFzaEludmFsaWRhdGVkKGJ5dGVzMzIgaW5kZXhlZCBoYXNoLCBzdHJpbmcgaW5kZXhlZCBuYW1lLCB1aW50IHZhbHVlLCB1aW50IHJlZ2lzdHJhdGlvbkRhdGUpOwoKICAgIHN0cnVjdCBlbnRyeSB7CiAgICAgICAgRGVlZCBkZWVkOwogICAgICAgIHVpbnQgcmVnaXN0cmF0aW9uRGF0ZTsKICAgICAgICB1aW50IHZhbHVlOwogICAgICAgIHVpbnQgaGlnaGVzdEJpZDsKICAgIH0KCiAgICAvLyBTdGF0ZSB0cmFuc2l0aW9ucyBmb3IgbmFtZXM6CiAgICAvLyAgIE9wZW4gLT4gQXVjdGlvbiAoc3RhcnRBdWN0aW9uKQogICAgLy8gICBBdWN0aW9uIC0+IFJldmVhbAogICAgLy8gICBSZXZlYWwgLT4gT3duZWQKICAgIC8vICAgUmV2ZWFsIC0+IE9wZW4gKGlmIG5vYm9keSBiaWQpCiAgICAvLyAgIE93bmVkIC0+IEZvcmJpZGRlbiAoaW52YWxpZGF0ZU5hbWUpCiAgICAvLyAgIE93bmVkIC0+IE9wZW4gKHJlbGVhc2VEZWVkKQogICAgZnVuY3Rpb24gc3RhdGUoYnl0ZXMzMiBfaGFzaCkgY29uc3RhbnQgcmV0dXJucyAoTW9kZSkgewogICAgICAgIHZhciBlbnRyeSA9IF9lbnRyaWVzW19oYXNoXTsKICAgICAgICBpZihub3cgPCBlbnRyeS5yZWdpc3RyYXRpb25EYXRlKSB7CiAgICAgICAgICAgIGlmKG5vdyA8IGVudHJ5LnJlZ2lzdHJhdGlvbkRhdGUgLSByZXZlYWxQZXJpb2QpIHsKICAgICAgICAgICAgICAgIHJldHVybiBNb2RlLkF1Y3Rpb247CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gTW9kZS5SZXZlYWw7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZihlbnRyeS5oaWdoZXN0QmlkID09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiBNb2RlLk9wZW47CiAgICAgICAgICAgIH0gZWxzZSBpZihlbnRyeS5kZWVkID09IERlZWQoMCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBNb2RlLkZvcmJpZGRlbjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBNb2RlLk93bmVkOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgCiAgICBtb2RpZmllciBpblN0YXRlKGJ5dGVzMzIgX2hhc2gsIE1vZGUgX3N0YXRlKSB7CiAgICAgICAgaWYoc3RhdGUoX2hhc2gpICE9IF9zdGF0ZSkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIoYnl0ZXMzMiBfaGFzaCkgewogICAgICAgIGlmIChzdGF0ZShfaGFzaCkgIT0gTW9kZS5Pd25lZCB8fCBtc2cuc2VuZGVyICE9IF9lbnRyaWVzW19oYXNoXS5kZWVkLm93bmVyKCkpIHRocm93OwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIHJlZ2lzdHJ5T3BlbigpIHsKICAgICAgICBpZihub3cgPCByZWdpc3RyeVN0YXJ0ZWQgIHx8IG5vdyA+IHJlZ2lzdHJ5U3RhcnRlZCArIDQgeWVhcnMpIHRocm93OwogICAgICAgIF87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGVudHJpZXMoYnl0ZXMzMiBfaGFzaCkgY29uc3RhbnQgcmV0dXJucyAoTW9kZSwgYWRkcmVzcywgdWludCwgdWludCwgdWludCkgewogICAgICAgIGVudHJ5IGggPSBfZW50cmllc1tfaGFzaF07CiAgICAgICAgcmV0dXJuIChzdGF0ZShfaGFzaCksIGguZGVlZCwgaC5yZWdpc3RyYXRpb25EYXRlLCBoLnZhbHVlLCBoLmhpZ2hlc3RCaWQpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEBkZXYgQ29uc3RydWN0cyBhIG5ldyBSZWdpc3RyYXIsIHdpdGggdGhlIHByb3ZpZGVkIGFkZHJlc3MgYXMgdGhlIG93bmVyIG9mIHRoZSByb290IG5vZGUuCiAgICAgKiBAcGFyYW0gX2VucyBUaGUgYWRkcmVzcyBvZiB0aGUgRU5TCiAgICAgKiBAcGFyYW0gX3Jvb3ROb2RlIFRoZSBoYXNoIG9mIHRoZSByb290bm9kZS4KICAgICAqLwogICAgZnVuY3Rpb24gUmVnaXN0cmFyKGFkZHJlc3MgX2VucywgYnl0ZXMzMiBfcm9vdE5vZGUsIHVpbnQgX3N0YXJ0RGF0ZSkgewogICAgICAgIGVucyA9IEFic3RyYWN0RU5TKF9lbnMpOwogICAgICAgIHJvb3ROb2RlID0gX3Jvb3ROb2RlOwogICAgICAgIHJlZ2lzdHJ5U3RhcnRlZCA9IF9zdGFydERhdGUgPiAwID8gX3N0YXJ0RGF0ZSA6IG5vdzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgUmV0dXJucyB0aGUgbWF4aW11bSBvZiB0d28gdW5zaWduZWQgaW50ZWdlcnMKICAgICAqIEBwYXJhbSBhIEEgbnVtYmVyIHRvIGNvbXBhcmUKICAgICAqIEBwYXJhbSBiIEEgbnVtYmVyIHRvIGNvbXBhcmUKICAgICAqIEByZXR1cm4gVGhlIG1heGltdW0gb2YgdHdvIHVuc2lnbmVkIGludGVnZXJzCiAgICAgKi8KICAgIGZ1bmN0aW9uIG1heCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCBtYXgpIHsKICAgICAgICBpZiAoYSA+IGIpCiAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIGI7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFJldHVybnMgdGhlIG1pbmltdW0gb2YgdHdvIHVuc2lnbmVkIGludGVnZXJzCiAgICAgKiBAcGFyYW0gYSBBIG51bWJlciB0byBjb21wYXJlCiAgICAgKiBAcGFyYW0gYiBBIG51bWJlciB0byBjb21wYXJlCiAgICAgKiBAcmV0dXJuIFRoZSBtaW5pbXVtIG9mIHR3byB1bnNpZ25lZCBpbnRlZ2VycwogICAgICovCiAgICBmdW5jdGlvbiBtaW4odWludCBhLCB1aW50IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgbWluKSB7CiAgICAgICAgaWYgKGEgPCBiKQogICAgICAgICAgICByZXR1cm4gYTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHJldHVybiBiOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBSZXR1cm5zIHRoZSBsZW5ndGggb2YgYSBnaXZlbiBzdHJpbmcKICAgICAqIEBwYXJhbSBzIFRoZSBzdHJpbmcgdG8gbWVhc3VyZSB0aGUgbGVuZ3RoIG9mCiAgICAgKiBAcmV0dXJuIFRoZSBsZW5ndGggb2YgdGhlIGlucHV0IHN0cmluZwogICAgICovCiAgICBmdW5jdGlvbiBzdHJsZW4oc3RyaW5nIHMpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICAvLyBTdGFydGluZyBoZXJlIG1lYW5zIHRoZSBMU0Igd2lsbCBiZSB0aGUgYnl0ZSB3ZSBjYXJlIGFib3V0CiAgICAgICAgdWludCBwdHI7CiAgICAgICAgdWludCBlbmQ7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBwdHIgOj0gYWRkKHMsIDEpCiAgICAgICAgICAgIGVuZCA6PSBhZGQobWxvYWQocyksIHB0cikKICAgICAgICB9CiAgICAgICAgZm9yICh1aW50IGxlbiA9IDA7IHB0ciA8IGVuZDsgbGVuKyspIHsKICAgICAgICAgICAgdWludDggYjsKICAgICAgICAgICAgYXNzZW1ibHkgeyBiIDo9IGFuZChtbG9hZChwdHIpLCAweEZGKSB9CiAgICAgICAgICAgIGlmIChiIDwgMHg4MCkgewogICAgICAgICAgICAgICAgcHRyICs9IDE7CiAgICAgICAgICAgIH0gZWxzZSBpZihiIDwgMHhFMCkgewogICAgICAgICAgICAgICAgcHRyICs9IDI7CiAgICAgICAgICAgIH0gZWxzZSBpZihiIDwgMHhGMCkgewogICAgICAgICAgICAgICAgcHRyICs9IDM7CiAgICAgICAgICAgIH0gZWxzZSBpZihiIDwgMHhGOCkgewogICAgICAgICAgICAgICAgcHRyICs9IDQ7CiAgICAgICAgICAgIH0gZWxzZSBpZihiIDwgMHhGQykgewogICAgICAgICAgICAgICAgcHRyICs9IDU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBwdHIgKz0gNjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbGVuOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBTdGFydCBhbiBhdWN0aW9uIGZvciBhbiBhdmFpbGFibGUgaGFzaAogICAgICogCiAgICAgKiBBbnlvbmUgY2FuIHN0YXJ0IGFuIGF1Y3Rpb24gYnkgc2VuZGluZyBhbiBhcnJheSBvZiBoYXNoZXMgdGhhdCB0aGV5IHdhbnQgdG8gYmlkIGZvci4gCiAgICAgKiBBcnJheXMgYXJlIHNlbnQgc28gdGhhdCBzb21lb25lIGNhbiBvcGVuIHVwIGFuIGF1Y3Rpb24gZm9yIFggZHVtbXkgaGFzaGVzIHdoZW4gdGhleSAKICAgICAqIGFyZSBvbmx5IHJlYWxseSBpbnRlcmVzdGVkIGluIGJpZGRpbmcgZm9yIG9uZS4gVGhpcyB3aWxsIGluY3JlYXNlIHRoZSBjb3N0IGZvciBhbiAKICAgICAqIGF0dGFja2VyIHRvIHNpbXBseSBiaWQgYmxpbmRseSBvbiBhbGwgbmV3IGF1Y3Rpb25zLiBEdW1teSBhdWN0aW9ucyB0aGF0IGFyZSAKICAgICAqIG9wZW4gYnV0IG5vdCBiaWQgb24gYXJlIGNsb3NlZCBhZnRlciBhIHdlZWsuIAogICAgICoKICAgICAqIEBwYXJhbSBfaGFzaCBUaGUgaGFzaCB0byBzdGFydCBhbiBhdWN0aW9uIG9uCiAgICAgKi8gICAgCiAgICBmdW5jdGlvbiBzdGFydEF1Y3Rpb24oYnl0ZXMzMiBfaGFzaCkgaW5TdGF0ZShfaGFzaCwgTW9kZS5PcGVuKSByZWdpc3RyeU9wZW4oKSB7CiAgICAgICAgZW50cnkgbmV3QXVjdGlvbiA9IF9lbnRyaWVzW19oYXNoXTsKCiAgICAgICAgLy8gZm9yIHRoZSBmaXJzdCBtb250aCBvZiB0aGUgcmVnaXN0cnksIG1ha2UgbG9uZ2VyIGF1Y3Rpb25zCiAgICAgICAgbmV3QXVjdGlvbi5yZWdpc3RyYXRpb25EYXRlID0gbWF4KG5vdyArIGF1Y3Rpb25MZW5ndGgsIHJlZ2lzdHJ5U3RhcnRlZCArIGluaXRpYWxBdWN0aW9uUGVyaW9kKTsKICAgICAgICBuZXdBdWN0aW9uLnZhbHVlID0gMDsKICAgICAgICBuZXdBdWN0aW9uLmhpZ2hlc3RCaWQgPSAwOwogICAgICAgIEF1Y3Rpb25TdGFydGVkKF9oYXNoLCBuZXdBdWN0aW9uLnJlZ2lzdHJhdGlvbkRhdGUpOyAgICAgIAogICAgfQoKICAgIC8qKgogICAgICogQGRldiBTdGFydCBtdWx0aXBsZSBhdWN0aW9ucyBmb3IgYmV0dGVyIGFub255bWl0eQogICAgICogQHBhcmFtIF9oYXNoZXMgQW4gYXJyYXkgb2YgaGFzaGVzLCBhdCBsZWFzdCBvbmUgb2Ygd2hpY2ggeW91IHByZXN1bWFibHkgd2FudCB0byBiaWQgb24KICAgICAqLwogICAgZnVuY3Rpb24gc3RhcnRBdWN0aW9ucyhieXRlczMyW10gX2hhc2hlcykgIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfaGFzaGVzLmxlbmd0aDsgaSArKyApIHsKICAgICAgICAgICAgc3RhcnRBdWN0aW9uKF9oYXNoZXNbaV0pOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBAZGV2IEhhc2ggdGhlIHZhbHVlcyByZXF1aXJlZCBmb3IgYSBzZWNyZXQgYmlkCiAgICAgKiBAcGFyYW0gaGFzaCBUaGUgbm9kZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBkZXNpcmVkIG5hbWVoYXNoCiAgICAgKiBAcGFyYW0gb3duZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBvd24gdGhlIAogICAgICogQHBhcmFtIHZhbHVlIFRoZSBiaWQgYW1vdW50CiAgICAgKiBAcGFyYW0gc2FsdCBBIHJhbmRvbSB2YWx1ZSB0byBlbnN1cmUgc2VjcmVjeSBvZiB0aGUgYmlkCiAgICAgKiBAcmV0dXJuIFRoZSBoYXNoIG9mIHRoZSBiaWQgdmFsdWVzCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNoYUJpZChieXRlczMyIGhhc2gsIGFkZHJlc3Mgb3duZXIsIHVpbnQgdmFsdWUsIGJ5dGVzMzIgc2FsdCkgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMiBzZWFsZWRCaWQpIHsKICAgICAgICByZXR1cm4gc2hhMyhoYXNoLCBvd25lciwgdmFsdWUsIHNhbHQpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEBkZXYgU3VibWl0IGEgbmV3IHNlYWxlZCBiaWQgb24gYSBkZXNpcmVkIGhhc2ggaW4gYSBibGluZCBhdWN0aW9uCiAgICAgKiAKICAgICAqIEJpZHMgYXJlIHNlbnQgYnkgc2VuZGluZyBhIG1lc3NhZ2UgdG8gdGhlIG1haW4gY29udHJhY3Qgd2l0aCBhIGhhc2ggYW5kIGFuIGFtb3VudC4gVGhlIGhhc2ggCiAgICAgKiBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYmlkLCBpbmNsdWRpbmcgdGhlIGJpZGRlZCBoYXNoLCB0aGUgYmlkIGFtb3VudCwgYW5kIGEgcmFuZG9tIAogICAgICogc2FsdC4gQmlkcyBhcmUgbm90IHRpZWQgdG8gYW55IG9uZSBhdWN0aW9uIHVudGlsIHRoZXkgYXJlIHJldmVhbGVkLiBUaGUgdmFsdWUgb2YgdGhlIGJpZCAKICAgICAqIGl0c2VsZiBjYW4gYmUgbWFzcXVlcmFkZWQgYnkgc2VuZGluZyBtb3JlIHRoYW4gdGhlIHZhbHVlIG9mIHlvdXIgYWN0dWFsIGJpZC4gVGhpcyBpcyAKICAgICAqIGZvbGxvd2VkIGJ5IGEgMjRoIHJldmVhbCBwZXJpb2QuIEJpZHMgcmV2ZWFsZWQgYWZ0ZXIgdGhpcyBwZXJpb2Qgd2lsbCBiZSBidXJuZWQgYW5kIHRoZSBldGhlciB1bnJlY292ZXJhYmxlLiAKICAgICAqIFNpbmNlIHRoaXMgaXMgYW4gYXVjdGlvbiwgaXQgaXMgZXhwZWN0ZWQgdGhhdCBtb3N0IHB1YmxpYyBoYXNoZXMsIGxpa2Uga25vd24gZG9tYWlucyBhbmQgY29tbW9uIGRpY3Rpb25hcnkgCiAgICAgKiB3b3Jkcywgd2lsbCBoYXZlIG11bHRpcGxlIGJpZGRlcnMgcHVzaGluZyB0aGUgcHJpY2UgdXAuIAogICAgICoKICAgICAqIEBwYXJhbSBzZWFsZWRCaWQgQSBzZWFsZWRCaWQsIGNyZWF0ZWQgYnkgdGhlIHNoYUJpZCBmdW5jdGlvbgogICAgICovCiAgICBmdW5jdGlvbiBuZXdCaWQoYnl0ZXMzMiBzZWFsZWRCaWQpIHBheWFibGUgewogICAgICAgIGlmIChhZGRyZXNzKHNlYWxlZEJpZHNbbXNnLnNlbmRlcl1bc2VhbGVkQmlkXSkgPiAwICkgdGhyb3c7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA8IG1pblByaWNlKSB0aHJvdzsKICAgICAgICAvLyBjcmVhdGVzIGEgbmV3IGhhc2ggY29udHJhY3Qgd2l0aCB0aGUgb3duZXIKICAgICAgICBEZWVkIG5ld0JpZCA9IG5ldyBEZWVkKG1zZy52YWx1ZSk7CiAgICAgICAgc2VhbGVkQmlkc1ttc2cuc2VuZGVyXVtzZWFsZWRCaWRdID0gbmV3QmlkOwogICAgICAgIE5ld0JpZChzZWFsZWRCaWQsIG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CgogICAgICAgIGlmICghbmV3QmlkLnNlbmQobXNnLnZhbHVlKSkgdGhyb3c7CiAgICB9IAoKICAgIC8qKgogICAgICogQGRldiBTdWJtaXQgdGhlIHByb3BlcnRpZXMgb2YgYSBiaWQgdG8gcmV2ZWFsIHRoZW0KICAgICAqIEBwYXJhbSBfaGFzaCBUaGUgbm9kZSBpbiB0aGUgc2VhbGVkQmlkCiAgICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGluIHRoZSBzZWFsZWRCaWQKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGJpZCBhbW91bnQgaW4gdGhlIHNlYWxlZEJpZAogICAgICogQHBhcmFtIF9zYWx0IFRoZSBzYWxlIGluIHRoZSBzZWFsZWRCaWQKICAgICAqLyAKICAgIGZ1bmN0aW9uIHVuc2VhbEJpZChieXRlczMyIF9oYXNoLCBhZGRyZXNzIF9vd25lciwgdWludCBfdmFsdWUsIGJ5dGVzMzIgX3NhbHQpIHsKICAgICAgICBieXRlczMyIHNlYWwgPSBzaGFCaWQoX2hhc2gsIF9vd25lciwgX3ZhbHVlLCBfc2FsdCk7CiAgICAgICAgRGVlZCBiaWQgPSBzZWFsZWRCaWRzW21zZy5zZW5kZXJdW3NlYWxdOwogICAgICAgIGlmIChhZGRyZXNzKGJpZCkgPT0gMCApIHRocm93OwogICAgICAgIHNlYWxlZEJpZHNbbXNnLnNlbmRlcl1bc2VhbF0gPSBEZWVkKDApOwogICAgICAgIGJpZC5zZXRPd25lcihfb3duZXIpOwogICAgICAgIGVudHJ5IGggPSBfZW50cmllc1tfaGFzaF07CiAgICAgICAgdWludCBhY3R1YWxWYWx1ZSA9IG1pbihfdmFsdWUsIGJpZC52YWx1ZSgpKTsKICAgICAgICBiaWQuc2V0QmFsYW5jZShhY3R1YWxWYWx1ZSk7CgogICAgICAgIHZhciBhdWN0aW9uU3RhdGUgPSBzdGF0ZShfaGFzaCk7CiAgICAgICAgaWYoYXVjdGlvblN0YXRlID09IE1vZGUuT3duZWQpIHsKICAgICAgICAgICAgLy8gVG9vIGxhdGUhIEJpZGRlciBsb3NlcyB0aGVpciBiaWQuIEdldCdzIDAuNSUgYmFjay4KICAgICAgICAgICAgYmlkLmNsb3NlRGVlZCg1KTsKICAgICAgICAgICAgQmlkUmV2ZWFsZWQoX2hhc2gsIF9vd25lciwgYWN0dWFsVmFsdWUsIDEpOwogICAgICAgIH0gZWxzZSBpZihhdWN0aW9uU3RhdGUgIT0gTW9kZS5SZXZlYWwpIHsKICAgICAgICAgICAgLy8gSW52YWxpZCBwaGFzZQogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9IGVsc2UgaWYgKF92YWx1ZSA8IG1pblByaWNlKSB7CiAgICAgICAgICAgIC8vIEJpZCB0b28gbG93LCByZWZ1bmQgOTkuNSUKICAgICAgICAgICAgYmlkLmNsb3NlRGVlZCg5OTUpOwogICAgICAgICAgICBCaWRSZXZlYWxlZChfaGFzaCwgX293bmVyLCBhY3R1YWxWYWx1ZSwgMCk7CiAgICAgICAgfSBlbHNlIGlmIChfdmFsdWUgPiBoLmhpZ2hlc3RCaWQpIHsKICAgICAgICAgICAgLy8gbmV3IHdpbm5lcgogICAgICAgICAgICAvLyBjYW5jZWwgdGhlIG90aGVyIGJpZCwgcmVmdW5kIDk5LjUlCiAgICAgICAgICAgIGlmKGFkZHJlc3MoaC5kZWVkKSAhPSAwKSB7CiAgICAgICAgICAgICAgICBEZWVkIHByZXZpb3VzV2lubmVyID0gaC5kZWVkOwogICAgICAgICAgICAgICAgcHJldmlvdXNXaW5uZXIuY2xvc2VEZWVkKDk5NSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHNldCBuZXcgd2lubmVyCiAgICAgICAgICAgIC8vIHBlciB0aGUgcnVsZXMgb2YgYSB2aWNrZXJ5IGF1Y3Rpb24sIHRoZSB2YWx1ZSBiZWNvbWVzIHRoZSBwcmV2aW91cyBoaWdoZXN0QmlkCiAgICAgICAgICAgIGgudmFsdWUgPSBoLmhpZ2hlc3RCaWQ7CiAgICAgICAgICAgIGguaGlnaGVzdEJpZCA9IGFjdHVhbFZhbHVlOwogICAgICAgICAgICBoLmRlZWQgPSBiaWQ7CiAgICAgICAgICAgIEJpZFJldmVhbGVkKF9oYXNoLCBfb3duZXIsIGFjdHVhbFZhbHVlLCAyKTsKICAgICAgICB9IGVsc2UgaWYgKF92YWx1ZSA+IGgudmFsdWUpIHsKICAgICAgICAgICAgLy8gbm90IHdpbm5lciwgYnV0IGFmZmVjdHMgc2Vjb25kIHBsYWNlCiAgICAgICAgICAgIGgudmFsdWUgPSBhY3R1YWxWYWx1ZTsKICAgICAgICAgICAgYmlkLmNsb3NlRGVlZCg5OTUpOwogICAgICAgICAgICBCaWRSZXZlYWxlZChfaGFzaCwgX293bmVyLCBhY3R1YWxWYWx1ZSwgMyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gYmlkIGRvZXNuJ3QgYWZmZWN0IGF1Y3Rpb24KICAgICAgICAgICAgYmlkLmNsb3NlRGVlZCg5OTUpOwogICAgICAgICAgICBCaWRSZXZlYWxlZChfaGFzaCwgX293bmVyLCBhY3R1YWxWYWx1ZSwgNCk7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvKioKICAgICAqIEBkZXYgQ2FuY2VsIGEgYmlkCiAgICAgKiBAcGFyYW0gc2VhbCBUaGUgdmFsdWUgcmV0dXJuZWQgYnkgdGhlIHNoYUJpZCBmdW5jdGlvbgogICAgICovIAogICAgZnVuY3Rpb24gY2FuY2VsQmlkKGFkZHJlc3MgYmlkZGVyLCBieXRlczMyIHNlYWwpIHsKICAgICAgICBEZWVkIGJpZCA9IHNlYWxlZEJpZHNbYmlkZGVyXVtzZWFsXTsKICAgICAgICAvLyBJZiB0aGUgYmlkIGhhc24ndCBiZWVuIHJldmVhbGVkIGFmdGVyIGFueSBwb3NzaWJsZSBhdWN0aW9uIGRhdGUsIHRoZW4gY2xvc2UgaXQKICAgICAgICBpZiAoYWRkcmVzcyhiaWQpID09IDAgCiAgICAgICAgICAgIHx8IG5vdyA8IGJpZC5jcmVhdGlvbkRhdGUoKSArIGluaXRpYWxBdWN0aW9uUGVyaW9kIAogICAgICAgICAgICB8fCBiaWQub3duZXIoKSA+IDApIHRocm93OwoKICAgICAgICAvLyBTZW5kIHRoZSBjYW5jZWxsZXIgMC41JSBvZiB0aGUgYmlkLCBhbmQgYnVybiB0aGUgcmVzdC4KICAgICAgICBiaWQuc2V0T3duZXIobXNnLnNlbmRlcik7CiAgICAgICAgYmlkLmNsb3NlRGVlZCg1KTsKICAgICAgICBzZWFsZWRCaWRzW2JpZGRlcl1bc2VhbF0gPSBEZWVkKDApOwogICAgICAgIEJpZFJldmVhbGVkKHNlYWwsIGJpZGRlciwgMCwgNSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZpbmFsaXplIGFuIGF1Y3Rpb24gYWZ0ZXIgdGhlIHJlZ2lzdHJhdGlvbiBkYXRlIGhhcyBwYXNzZWQKICAgICAqIEBwYXJhbSBfaGFzaCBUaGUgaGFzaCBvZiB0aGUgbmFtZSB0aGUgYXVjdGlvbiBpcyBmb3IKICAgICAqLyAKICAgIGZ1bmN0aW9uIGZpbmFsaXplQXVjdGlvbihieXRlczMyIF9oYXNoKSBvbmx5T3duZXIoX2hhc2gpIHsKICAgICAgICBlbnRyeSBoID0gX2VudHJpZXNbX2hhc2hdOwoKICAgICAgICBoLnZhbHVlID0gIG1heChoLnZhbHVlLCBtaW5QcmljZSk7CgogICAgICAgIC8vIEFzc2lnbiB0aGUgb3duZXIgaW4gRU5TCiAgICAgICAgZW5zLnNldFN1Ym5vZGVPd25lcihyb290Tm9kZSwgX2hhc2gsIGguZGVlZC5vd25lcigpKTsKCiAgICAgICAgRGVlZCBkZWVkQ29udHJhY3QgPSBoLmRlZWQ7CiAgICAgICAgZGVlZENvbnRyYWN0LnNldEJhbGFuY2UoaC52YWx1ZSk7CiAgICAgICAgSGFzaFJlZ2lzdGVyZWQoX2hhc2gsIGRlZWRDb250cmFjdC5vd25lcigpLCBoLnZhbHVlLCBoLnJlZ2lzdHJhdGlvbkRhdGUpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUaGUgb3duZXIgb2YgYSBkb21haW4gbWF5IHRyYW5zZmVyIGl0IHRvIHNvbWVvbmUgZWxzZSBhdCBhbnkgdGltZS4KICAgICAqIEBwYXJhbSBfaGFzaCBUaGUgbm9kZSB0byB0cmFuc2ZlcgogICAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0bwogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihieXRlczMyIF9oYXNoLCBhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIoX2hhc2gpIHsKICAgICAgICBlbnRyeSBoID0gX2VudHJpZXNbX2hhc2hdOwogICAgICAgIGguZGVlZC5zZXRPd25lcihuZXdPd25lcik7CiAgICAgICAgZW5zLnNldFN1Ym5vZGVPd25lcihyb290Tm9kZSwgX2hhc2gsIG5ld093bmVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWZ0ZXIgc29tZSB0aW1lLCB0aGUgb3duZXIgY2FuIHJlbGVhc2UgdGhlIHByb3BlcnR5IGFuZCBnZXQgdGhlaXIgZXRoZXIgYmFjawogICAgICogQHBhcmFtIF9oYXNoIFRoZSBub2RlIHRvIHJlbGVhc2UKICAgICAqLwogICAgZnVuY3Rpb24gcmVsZWFzZURlZWQoYnl0ZXMzMiBfaGFzaCkgb25seU93bmVyKF9oYXNoKSB7CiAgICAgICAgZW50cnkgaCA9IF9lbnRyaWVzW19oYXNoXTsKICAgICAgICBEZWVkIGRlZWRDb250cmFjdCA9IGguZGVlZDsKICAgICAgICBpZiAobm93IDwgaC5yZWdpc3RyYXRpb25EYXRlICsgMSB5ZWFycyAKICAgICAgICAgICAgfHwgbm93ID4gcmVnaXN0cnlTdGFydGVkICsgOCB5ZWFycykgdGhyb3c7CgogICAgICAgIEhhc2hSZWxlYXNlZChfaGFzaCwgaC52YWx1ZSk7CiAgICAgICAgCiAgICAgICAgaC52YWx1ZSA9IDA7CiAgICAgICAgaC5oaWdoZXN0QmlkID0gMDsKICAgICAgICBoLmRlZWQgPSBEZWVkKDApOwoKICAgICAgICBlbnMuc2V0U3Vibm9kZU93bmVyKHJvb3ROb2RlLCBfaGFzaCwgMCk7CiAgICAgICAgZGVlZENvbnRyYWN0LmNsb3NlRGVlZCgxMDAwKTsKICAgIH0gIAoKICAgIC8qKgogICAgICogQGRldiBTdWJtaXQgYSBuYW1lIDYgY2hhcmFjdGVycyBsb25nIG9yIGxlc3MuIElmIGl0IGhhcyBiZWVuIHJlZ2lzdGVyZWQsIAogICAgICogdGhlIHN1Ym1pdHRlciB3aWxsIGVhcm4gNTAlIG9mIHRoZSBkZWVkIHZhbHVlLiBXZSBhcmUgcHVycG9zZWZ1bGx5CiAgICAgKiBoYW5kaWNhcHBpbmcgdGhlIHNpbXBsaWZpZWQgcmVnaXN0cmFyIGFzIGEgd2F5IHRvIGZvcmNlIGl0IGludG8gYmVpbmcgcmVzdHJ1Y3R1cmVkCiAgICAgKiBpbiBhIGZldyB5ZWFycy4KICAgICAqIEBwYXJhbSB1bmhhc2hlZE5hbWUgQW4gaW52YWxpZCBuYW1lIHRvIHNlYXJjaCBmb3IgaW4gdGhlIHJlZ2lzdHJ5LgogICAgICogCiAgICAgKi8KICAgIGZ1bmN0aW9uIGludmFsaWRhdGVOYW1lKHN0cmluZyB1bmhhc2hlZE5hbWUpIGluU3RhdGUoc2hhMyh1bmhhc2hlZE5hbWUpLCBNb2RlLk93bmVkKSB7CiAgICAgICAgaWYgKHN0cmxlbih1bmhhc2hlZE5hbWUpID4gNiApIHRocm93OwogICAgICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTModW5oYXNoZWROYW1lKTsKICAgICAgICAKICAgICAgICBlbnRyeSBoID0gX2VudHJpZXNbaGFzaF07CiAgICAgICAgZW5zLnNldFN1Ym5vZGVPd25lcihyb290Tm9kZSwgaGFzaCwgMCk7CiAgICAgICAgaWYoYWRkcmVzcyhoLmRlZWQpICE9IDApIHsKICAgICAgICAgICAgLy8gUmV3YXJkIHRoZSBkaXNjb3ZlcmVyIHdpdGggNTAlIG9mIHRoZSBkZWVkCiAgICAgICAgICAgIC8vIFRoZSBwcmV2aW91cyBvd25lciBnZXRzIG5vdGhpbmcKICAgICAgICAgICAgaC5kZWVkLnNldEJhbGFuY2UoaC5kZWVkLnZhbHVlKCkvMik7CiAgICAgICAgICAgIGguZGVlZC5zZXRPd25lcihtc2cuc2VuZGVyKTsKICAgICAgICAgICAgaC5kZWVkLmNsb3NlRGVlZCgxMDAwKTsKICAgICAgICB9CiAgICAgICAgSGFzaEludmFsaWRhdGVkKGhhc2gsIHVuaGFzaGVkTmFtZSwgaC52YWx1ZSwgaC5yZWdpc3RyYXRpb25EYXRlKTsKICAgICAgICBoLmRlZWQgPSBEZWVkKDApOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUcmFuc2ZlcnMgdGhlIGRlZWQgdG8gdGhlIGN1cnJlbnQgcmVnaXN0cmFyLCBpZiBkaWZmZXJlbnQgZnJvbSB0aGlzIG9uZS4KICAgICAqIFVzZWQgZHVyaW5nIHRoZSB1cGdyYWRlIHByb2Nlc3MgdG8gYSBwZXJtYW5lbnQgcmVnaXN0cmFyLgogICAgICogQHBhcmFtIF9oYXNoIFRoZSBuYW1lIGhhc2ggdG8gdHJhbnNmZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyUmVnaXN0cmFycyhieXRlczMyIF9oYXNoKSBvbmx5T3duZXIoX2hhc2gpIHsKICAgICAgICB2YXIgcmVnaXN0cmFyID0gZW5zLm93bmVyKHJvb3ROb2RlKTsKICAgICAgICBpZihyZWdpc3RyYXIgPT0gYWRkcmVzcyh0aGlzKSkKICAgICAgICAgICAgdGhyb3c7CgogICAgICAgIGVudHJ5IGggPSBfZW50cmllc1tfaGFzaF07CiAgICAgICAgaC5kZWVkLnNldFJlZ2lzdHJhcihyZWdpc3RyYXIpOwogICAgfQp9'.
	

]
