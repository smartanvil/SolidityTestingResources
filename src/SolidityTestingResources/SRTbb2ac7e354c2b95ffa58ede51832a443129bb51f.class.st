Class {
	#name : #SRTbb2ac7e354c2b95ffa58ede51832a443129bb51f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbb2ac7e354c2b95ffa58ede51832a443129bb51f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovLy8gQHRpdGxlIE93bmFibGUKLy8vIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKLy8vIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCmNvbnRyYWN0IE93bmFibGUgewoKICAvLyBFVkVOVFMKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogIC8vIFBVQkxJQyBGVU5DVElPTlMKCiAgLy8vIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlciBhY2NvdW50LgogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvLy8gQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAvLy8gQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9CgogIC8vIE1PRElGSUVSUwoKICAvLy8gQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLy8gRklFTERTCgogIGFkZHJlc3MgcHVibGljIG93bmVyOwp9CgovLy8gQHRpdGxlIEVSQzIwIGludGVyZmFjZQovLy8gQGRldiBGdWxsIEVSQzIwIGludGVyZmFjZSBkZXNjcmliZWQgYXQgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwLgpjb250cmFjdCBFUkMyMCB7CgogIC8vIEVWRU5UUwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKCiAgLy8gUFVCTElDIEZVTkNUSU9OUwoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwoKICAvLyBGSUVMRFMKCiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7Cn0KCmNvbnRyYWN0IFdpdGhUb2tlbiB7CiAgICBFUkMyMCBwdWJsaWMgdG9rZW47Cn0KCmNvbnRyYWN0IFNTUFR5cGVBd2FyZSB7CiAgICBlbnVtIFNTUFR5cGUgeyBHYXRlLCBEaXJlY3QgfQp9Cgpjb250cmFjdCBTU1BSZWdpc3RyeSBpcyBTU1BUeXBlQXdhcmV7CiAgICAvLyBUaGlzIGlzIHRoZSBmdW5jdGlvbiB0aGF0IGFjdHVhbGx5IGluc2VydCBhIHJlY29yZC4KICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKGFkZHJlc3Mga2V5LCBTU1BUeXBlIHNzcFR5cGUsIHVpbnQxNiBwdWJsaXNoZXJGZWUsIGFkZHJlc3MgcmVjb3JkT3duZXIpOwoKICAgIC8vIFVwZGF0ZXMgdGhlIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gcmVjb3JkLgogICAgZnVuY3Rpb24gdXBkYXRlUHVibGlzaGVyRmVlKGFkZHJlc3Mga2V5LCB1aW50MTYgbmV3RmVlLCBhZGRyZXNzIHNlbmRlcik7CgogICAgZnVuY3Rpb24gYXBwbHlLYXJtYURpZmYoYWRkcmVzcyBrZXksIHVpbnQyNTZbMl0gZGlmZik7CgogICAgLy8gVW5yZWdpc3RlciBhIGdpdmVuIHJlY29yZAogICAgZnVuY3Rpb24gdW5yZWdpc3RlcihhZGRyZXNzIGtleSwgYWRkcmVzcyBzZW5kZXIpOwoKICAgIC8vVHJhbnNmZXIgb3duZXJzaGlwIG9mIHJlY29yZAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBrZXksIGFkZHJlc3MgbmV3T3duZXIsIGFkZHJlc3Mgc2VuZGVyKTsKCiAgICBmdW5jdGlvbiBnZXRPd25lcihhZGRyZXNzIGtleSkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKTsKCiAgICAvLyBUZWxscyB3aGV0aGVyIGEgZ2l2ZW4ga2V5IGlzIHJlZ2lzdGVyZWQuCiAgICBmdW5jdGlvbiBpc1JlZ2lzdGVyZWQoYWRkcmVzcyBrZXkpIGNvbnN0YW50IHJldHVybnMoYm9vbCk7CgogICAgZnVuY3Rpb24gZ2V0U1NQKGFkZHJlc3Mga2V5KSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3Mgc3NwQWRkcmVzcywgU1NQVHlwZSBzc3BUeXBlLCB1aW50MTYgcHVibGlzaGVyRmVlLCB1aW50MjU2WzJdIGthcm1hLCBhZGRyZXNzIHJlY29yZE93bmVyKTsKCiAgICBmdW5jdGlvbiBnZXRBbGxTU1AoKSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3NbXSBhZGRyZXNzZXMsIFNTUFR5cGVbXSBzc3BUeXBlcywgdWludDE2W10gcHVibGlzaGVyRmVlcywgdWludDI1NlsyXVtdIGthcm1hcywgYWRkcmVzc1tdIHJlY29yZE93bmVycyk7CgogICAgZnVuY3Rpb24ga2lsbCgpOwp9Cgpjb250cmFjdCBQdWJsaXNoZXJSZWdpc3RyeSB7CiAgICAvLyBUaGlzIGlzIHRoZSBmdW5jdGlvbiB0aGF0IGFjdHVhbGx5IGluc2VydCBhIHJlY29yZC4KICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKGFkZHJlc3Mga2V5LCBieXRlczMyWzVdIHVybCwgYWRkcmVzcyByZWNvcmRPd25lcik7CgogICAgLy8gVXBkYXRlcyB0aGUgdmFsdWVzIG9mIHRoZSBnaXZlbiByZWNvcmQuCiAgICBmdW5jdGlvbiB1cGRhdGVVcmwoYWRkcmVzcyBrZXksIGJ5dGVzMzJbNV0gdXJsLCBhZGRyZXNzIHNlbmRlcik7CgogICAgZnVuY3Rpb24gYXBwbHlLYXJtYURpZmYoYWRkcmVzcyBrZXksIHVpbnQyNTZbMl0gZGlmZik7CgogICAgLy8gVW5yZWdpc3RlciBhIGdpdmVuIHJlY29yZAogICAgZnVuY3Rpb24gdW5yZWdpc3RlcihhZGRyZXNzIGtleSwgYWRkcmVzcyBzZW5kZXIpOwoKICAgIC8vVHJhbnNmZXIgb3duZXJzaGlwIG9mIHJlY29yZAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBrZXksIGFkZHJlc3MgbmV3T3duZXIsIGFkZHJlc3Mgc2VuZGVyKTsKCiAgICBmdW5jdGlvbiBnZXRPd25lcihhZGRyZXNzIGtleSkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKTsKCiAgICAvLyBUZWxscyB3aGV0aGVyIGEgZ2l2ZW4ga2V5IGlzIHJlZ2lzdGVyZWQuCiAgICBmdW5jdGlvbiBpc1JlZ2lzdGVyZWQoYWRkcmVzcyBrZXkpIGNvbnN0YW50IHJldHVybnMoYm9vbCk7CgogICAgZnVuY3Rpb24gZ2V0UHVibGlzaGVyKGFkZHJlc3Mga2V5KSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MgcHVibGlzaGVyQWRkcmVzcywgYnl0ZXMzMls1XSB1cmwsIHVpbnQyNTZbMl0ga2FybWEsIGFkZHJlc3MgcmVjb3JkT3duZXIpOwoKICAgIC8vQGRldiBHZXQgbGlzdCBvZiBhbGwgcmVnaXN0ZXJlZCBwdWJsaXNoZXJzCiAgICAvL0ByZXR1cm4gUmV0dXJucyBhcnJheSBvZiBhZGRyZXNzZXMgcmVnaXN0ZXJlZCBhcyBEU1Agd2l0aCByZWdpc3RlciB0aW1lcwogICAgZnVuY3Rpb24gZ2V0QWxsUHVibGlzaGVycygpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzc1tdIGFkZHJlc3NlcywgYnl0ZXMzMls1XVtdIHVybHMsIHVpbnQyNTZbMl1bXSBrYXJtYXMsIGFkZHJlc3NbXSByZWNvcmRPd25lcnMpOwoKICAgIGZ1bmN0aW9uIGtpbGwoKTsKfQoKY29udHJhY3QgRFNQVHlwZUF3YXJlIHsKICAgIGVudW0gRFNQVHlwZSB7IEdhdGUsIERpcmVjdCB9Cn0KCmNvbnRyYWN0IERTUFJlZ2lzdHJ5IGlzIERTUFR5cGVBd2FyZXsKICAgIC8vIFRoaXMgaXMgdGhlIGZ1bmN0aW9uIHRoYXQgYWN0dWFsbHkgaW5zZXJ0IGEgcmVjb3JkLgogICAgZnVuY3Rpb24gcmVnaXN0ZXIoYWRkcmVzcyBrZXksIERTUFR5cGUgZHNwVHlwZSwgYnl0ZXMzMls1XSB1cmwsIGFkZHJlc3MgcmVjb3JkT3duZXIpOwoKICAgIC8vIFVwZGF0ZXMgdGhlIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gcmVjb3JkLgogICAgZnVuY3Rpb24gdXBkYXRlVXJsKGFkZHJlc3Mga2V5LCBieXRlczMyWzVdIHVybCwgYWRkcmVzcyBzZW5kZXIpOwoKICAgIGZ1bmN0aW9uIGFwcGx5S2FybWFEaWZmKGFkZHJlc3Mga2V5LCB1aW50MjU2WzJdIGRpZmYpOwoKICAgIC8vIFVucmVnaXN0ZXIgYSBnaXZlbiByZWNvcmQKICAgIGZ1bmN0aW9uIHVucmVnaXN0ZXIoYWRkcmVzcyBrZXksIGFkZHJlc3Mgc2VuZGVyKTsKCiAgICAvLyBUcmFuc2ZlciBvd25lcnNoaXAgb2YgYSBnaXZlbiByZWNvcmQuCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIGtleSwgYWRkcmVzcyBuZXdPd25lciwgYWRkcmVzcyBzZW5kZXIpOwoKICAgIGZ1bmN0aW9uIGdldE93bmVyKGFkZHJlc3Mga2V5KSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpOwoKICAgIC8vIFRlbGxzIHdoZXRoZXIgYSBnaXZlbiBrZXkgaXMgcmVnaXN0ZXJlZC4KICAgIGZ1bmN0aW9uIGlzUmVnaXN0ZXJlZChhZGRyZXNzIGtleSkgY29uc3RhbnQgcmV0dXJucyhib29sKTsKCiAgICBmdW5jdGlvbiBnZXREU1AoYWRkcmVzcyBrZXkpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcyBkc3BBZGRyZXNzLCBEU1BUeXBlIGRzcFR5cGUsIGJ5dGVzMzJbNV0gdXJsLCB1aW50MjU2WzJdIGthcm1hLCBhZGRyZXNzIHJlY29yZE93bmVyKTsKCiAgICAvL0BkZXYgR2V0IGxpc3Qgb2YgYWxsIHJlZ2lzdGVyZWQgZHNwCiAgICAvL0ByZXR1cm4gUmV0dXJucyBhcnJheSBvZiBhZGRyZXNzZXMgcmVnaXN0ZXJlZCBhcyBEU1Agd2l0aCByZWdpc3RlciB0aW1lcwogICAgZnVuY3Rpb24gZ2V0QWxsRFNQKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzW10gYWRkcmVzc2VzLCBEU1BUeXBlW10gZHNwVHlwZXMsIGJ5dGVzMzJbNV1bXSB1cmxzLCB1aW50MjU2WzJdW10ga2FybWFzLCBhZGRyZXNzW10gcmVjb3JkT3duZXJzKSA7CgogICAgZnVuY3Rpb24ga2lsbCgpOwp9Cgpjb250cmFjdCBEZXBvc2l0UmVnaXN0cnkgewogICAgLy8gVGhpcyBpcyB0aGUgZnVuY3Rpb24gdGhhdCBhY3R1YWxseSBpbnNlcnQgYSByZWNvcmQuCiAgICBmdW5jdGlvbiByZWdpc3RlcihhZGRyZXNzIGtleSwgdWludDI1NiBhbW91bnQsIGFkZHJlc3MgZGVwb3NpdE93bmVyKTsKCiAgICAvLyBVbnJlZ2lzdGVyIGEgZ2l2ZW4gcmVjb3JkCiAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyKGFkZHJlc3Mga2V5KTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIGtleSwgYWRkcmVzcyBuZXdPd25lciwgYWRkcmVzcyBzZW5kZXIpOwoKICAgIGZ1bmN0aW9uIHNwZW5kKGFkZHJlc3Mga2V5LCB1aW50MjU2IGFtb3VudCk7CgogICAgZnVuY3Rpb24gcmVmaWxsKGFkZHJlc3Mga2V5LCB1aW50MjU2IGFtb3VudCk7CgogICAgLy8gVGVsbHMgd2hldGhlciBhIGdpdmVuIGtleSBpcyByZWdpc3RlcmVkLgogICAgZnVuY3Rpb24gaXNSZWdpc3RlcmVkKGFkZHJlc3Mga2V5KSBjb25zdGFudCByZXR1cm5zKGJvb2wpOwoKICAgIGZ1bmN0aW9uIGdldERlcG9zaXRPd25lcihhZGRyZXNzIGtleSkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKTsKCiAgICBmdW5jdGlvbiBnZXREZXBvc2l0KGFkZHJlc3Mga2V5KSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgYW1vdW50KTsKCiAgICBmdW5jdGlvbiBnZXREZXBvc2l0UmVjb3JkKGFkZHJlc3Mga2V5KSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3Mgb3duZXIsIHVpbnQgdGltZSwgdWludDI1NiBhbW91bnQsIGFkZHJlc3MgZGVwb3NpdE93bmVyKTsKCiAgICBmdW5jdGlvbiBoYXNFbm91Z2goYWRkcmVzcyBrZXksIHVpbnQyNTYgYW1vdW50KSBjb25zdGFudCByZXR1cm5zKGJvb2wpOwoKICAgIGZ1bmN0aW9uIGtpbGwoKTsKfQoKY29udHJhY3QgQXVkaXRvclJlZ2lzdHJ5IHsKICAgIC8vIFRoaXMgaXMgdGhlIGZ1bmN0aW9uIHRoYXQgYWN0dWFsbHkgaW5zZXJ0IGEgcmVjb3JkLgogICAgZnVuY3Rpb24gcmVnaXN0ZXIoYWRkcmVzcyBrZXksIGFkZHJlc3MgcmVjb3JkT3duZXIpOwoKICAgIGZ1bmN0aW9uIGFwcGx5S2FybWFEaWZmKGFkZHJlc3Mga2V5LCB1aW50MjU2WzJdIGRpZmYpOwoKICAgIC8vIFVucmVnaXN0ZXIgYSBnaXZlbiByZWNvcmQKICAgIGZ1bmN0aW9uIHVucmVnaXN0ZXIoYWRkcmVzcyBrZXksIGFkZHJlc3Mgc2VuZGVyKTsKCiAgICAvL1RyYW5zZmVyIG93bmVyc2hpcCBvZiByZWNvcmQKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3Mga2V5LCBhZGRyZXNzIG5ld093bmVyLCBhZGRyZXNzIHNlbmRlcik7CgogICAgZnVuY3Rpb24gZ2V0T3duZXIoYWRkcmVzcyBrZXkpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcyk7CgogICAgLy8gVGVsbHMgd2hldGhlciBhIGdpdmVuIGtleSBpcyByZWdpc3RlcmVkLgogICAgZnVuY3Rpb24gaXNSZWdpc3RlcmVkKGFkZHJlc3Mga2V5KSBjb25zdGFudCByZXR1cm5zKGJvb2wpOwoKICAgIGZ1bmN0aW9uIGdldEF1ZGl0b3IoYWRkcmVzcyBrZXkpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcyBhdWRpdG9yQWRkcmVzcywgdWludDI1NlsyXSBrYXJtYSwgYWRkcmVzcyByZWNvcmRPd25lcik7CgogICAgLy9AZGV2IEdldCBsaXN0IG9mIGFsbCByZWdpc3RlcmVkIGRzcAogICAgLy9AcmV0dXJuIFJldHVybnMgYXJyYXkgb2YgYWRkcmVzc2VzIHJlZ2lzdGVyZWQgYXMgRFNQIHdpdGggcmVnaXN0ZXIgdGltZXMKICAgIGZ1bmN0aW9uIGdldEFsbEF1ZGl0b3JzKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzW10gYWRkcmVzc2VzLCB1aW50MjU2WzJdW10ga2FybWFzLCBhZGRyZXNzW10gcmVjb3JkT3duZXJzKTsKCiAgICBmdW5jdGlvbiBraWxsKCk7Cn0KCmNvbnRyYWN0IERlcG9zaXRBd2FyZSBpcyBXaXRoVG9rZW57CiAgICBmdW5jdGlvbiByZXR1cm5EZXBvc2l0KGFkZHJlc3MgZGVwb3NpdEFjY291bnQsIERlcG9zaXRSZWdpc3RyeSBkZXBvc2l0UmVnaXN0cnkpIGludGVybmFsIHsKICAgICAgICBpZiAoZGVwb3NpdFJlZ2lzdHJ5LmlzUmVnaXN0ZXJlZChkZXBvc2l0QWNjb3VudCkpIHsKICAgICAgICAgICAgdWludDI1NiBhbW91bnQgPSBkZXBvc2l0UmVnaXN0cnkuZ2V0RGVwb3NpdChkZXBvc2l0QWNjb3VudCk7CiAgICAgICAgICAgIGFkZHJlc3MgZGVwb3NpdE93bmVyID0gZGVwb3NpdFJlZ2lzdHJ5LmdldERlcG9zaXRPd25lcihkZXBvc2l0QWNjb3VudCk7CiAgICAgICAgICAgIGlmIChhbW91bnQgPiAwKSB7CiAgICAgICAgICAgICAgICB0b2tlbi50cmFuc2ZlcihkZXBvc2l0T3duZXIsIGFtb3VudCk7CiAgICAgICAgICAgICAgICBkZXBvc2l0UmVnaXN0cnkudW5yZWdpc3RlcihkZXBvc2l0QWNjb3VudCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IFNlY3VyaXR5RGVwb3NpdEF3YXJlIGlzIERlcG9zaXRBd2FyZXsKICAgIHVpbnQyNTYgY29uc3RhbnQgU0VDVVJJVFlfREVQT1NJVF9TSVpFID0gMTA7CgogICAgRGVwb3NpdFJlZ2lzdHJ5IHB1YmxpYyBzZWN1cml0eURlcG9zaXRSZWdpc3RyeTsKCiAgICBmdW5jdGlvbiByZWNlaXZlU2VjdXJpdHlEZXBvc2l0KGFkZHJlc3MgZGVwb3NpdEFjY291bnQpIGludGVybmFsIHsKICAgICAgICB0b2tlbi50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgU0VDVVJJVFlfREVQT1NJVF9TSVpFKTsKICAgICAgICBzZWN1cml0eURlcG9zaXRSZWdpc3RyeS5yZWdpc3RlcihkZXBvc2l0QWNjb3VudCwgU0VDVVJJVFlfREVQT1NJVF9TSVpFLCBtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlclNlY3VyaXR5RGVwb3NpdChhZGRyZXNzIGRlcG9zaXRBY2NvdW50LCBhZGRyZXNzIG5ld093bmVyKSB7CiAgICAgICAgc2VjdXJpdHlEZXBvc2l0UmVnaXN0cnkudHJhbnNmZXIoZGVwb3NpdEFjY291bnQsIG5ld093bmVyLCBtc2cuc2VuZGVyKTsKICAgIH0KfQoKY29udHJhY3QgQXVkaXRvclJlZ2lzdHJhciBpcyBTZWN1cml0eURlcG9zaXRBd2FyZXsKICAgIEF1ZGl0b3JSZWdpc3RyeSBwdWJsaWMgYXVkaXRvclJlZ2lzdHJ5OwoKICAgIGV2ZW50IEF1ZGl0b3JSZWdpc3RlcmVkKGFkZHJlc3MgYXVkaXRvckFkZHJlc3MpOwogICAgZXZlbnQgQXVkaXRvclVucmVnaXN0ZXJlZChhZGRyZXNzIGF1ZGl0b3JBZGRyZXNzKTsKCiAgICAvL0BkZXYgUmV0cmlldmUgaW5mb3JtYXRpb24gYWJvdXQgcmVnaXN0ZXJlZCBBdWRpdG9yCiAgICAvL0ByZXR1cm4gQWRkcmVzcyBvZiByZWdpc3RlcmVkIEF1ZGl0b3IgYW5kIHRpbWUgd2hlbiByZWdpc3RlcmVkCiAgICBmdW5jdGlvbiBmaW5kQXVkaXRvcihhZGRyZXNzIGFkZHIpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcyBhdWRpdG9yQWRkcmVzcywgdWludDI1NlsyXSBrYXJtYSwgYWRkcmVzcyByZWNvcmRPd25lcikgewogICAgICAgIHJldHVybiBhdWRpdG9yUmVnaXN0cnkuZ2V0QXVkaXRvcihhZGRyKTsKICAgIH0KCiAgICAvL0BkZXYgY2hlY2sgaWYgQXVkaXRvciByZWdpc3RlcmVkCiAgICBmdW5jdGlvbiBpc0F1ZGl0b3JSZWdpc3RlcmVkKGFkZHJlc3Mga2V5KSBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gYXVkaXRvclJlZ2lzdHJ5LmlzUmVnaXN0ZXJlZChrZXkpOwogICAgfQoKICAgIC8vQGRldiBSZWdpc3RlciBvcmdhbmlzYXRpb24gYXMgQXVkaXRvcgogICAgLy9AcGFyYW0gYXVkaXRvckFkZHJlc3MgYWRkcmVzcyBvZiB3YWxsZXQgdG8gcmVnaXN0ZXIKICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQXVkaXRvcihhZGRyZXNzIGF1ZGl0b3JBZGRyZXNzKSB7CiAgICAgICAgcmVjZWl2ZVNlY3VyaXR5RGVwb3NpdChhdWRpdG9yQWRkcmVzcyk7CiAgICAgICAgYXVkaXRvclJlZ2lzdHJ5LnJlZ2lzdGVyKGF1ZGl0b3JBZGRyZXNzLCBtc2cuc2VuZGVyKTsKICAgICAgICBBdWRpdG9yUmVnaXN0ZXJlZChhdWRpdG9yQWRkcmVzcyk7CiAgICB9CgogICAgLy9AZGV2IFVucmVnaXN0ZXIgQXVkaXRvciBhbmQgcmV0dXJuIHVudXNlZCBkZXBvc2l0CiAgICAvL0BwYXJhbSBBZGRyZXNzIG9mIEF1ZGl0b3IgdG8gYmUgdW5yZWdpc3RlcmVkCiAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyQXVkaXRvcihhZGRyZXNzIGF1ZGl0b3JBZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuRGVwb3NpdChhdWRpdG9yQWRkcmVzcywgc2VjdXJpdHlEZXBvc2l0UmVnaXN0cnkpOwogICAgICAgIGF1ZGl0b3JSZWdpc3RyeS51bnJlZ2lzdGVyKGF1ZGl0b3JBZGRyZXNzLCBtc2cuc2VuZGVyKTsKICAgICAgICBBdWRpdG9yVW5yZWdpc3RlcmVkKGF1ZGl0b3JBZGRyZXNzKTsKICAgIH0KCiAgICAvL0BkZXYgdHJhbnNmZXIgb3duZXJzaGlwIG9mIHRoaXMgQXVkaXRvciByZWNvcmQKICAgIC8vQHBhcmFtIGFkZHJlc3Mgb2YgQXVkaXRvcgogICAgLy9AcGFyYW0gYWRkcmVzcyBvZiBuZXcgb3duZXIKICAgIGZ1bmN0aW9uIHRyYW5zZmVyQXVkaXRvclJlY29yZChhZGRyZXNzIGtleSwgYWRkcmVzcyBuZXdPd25lcikgewogICAgICAgIGF1ZGl0b3JSZWdpc3RyeS50cmFuc2ZlcihrZXksIG5ld093bmVyLCBtc2cuc2VuZGVyKTsKICAgIH0KfQoKY29udHJhY3QgRFNQUmVnaXN0cmFyIGlzIERTUFR5cGVBd2FyZSwgU2VjdXJpdHlEZXBvc2l0QXdhcmUgewogICAgRFNQUmVnaXN0cnkgcHVibGljIGRzcFJlZ2lzdHJ5OwoKICAgIGV2ZW50IERTUFJlZ2lzdGVyZWQoYWRkcmVzcyBkc3BBZGRyZXNzKTsKICAgIGV2ZW50IERTUFVucmVnaXN0ZXJlZChhZGRyZXNzIGRzcEFkZHJlc3MpOwogICAgZXZlbnQgRFNQUGFyYW1ldGVyc0NoYW5nZWQoYWRkcmVzcyBkc3BBZGRyZXNzKTsKCiAgICAvL0BkZXYgUmV0cmlldmUgaW5mb3JtYXRpb24gYWJvdXQgcmVnaXN0ZXJlZCBEU1AKICAgIC8vQHJldHVybiBBZGRyZXNzIG9mIHJlZ2lzdGVyZWQgRFNQIGFuZCB0aW1lIHdoZW4gcmVnaXN0ZXJlZAogICAgZnVuY3Rpb24gZmluZERzcChhZGRyZXNzIGFkZHIpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcyBkc3BBZGRyZXNzLCBEU1BUeXBlIGRzcFR5cGUsIGJ5dGVzMzJbNV0gdXJsLCB1aW50MjU2WzJdIGthcm1hLCBhZGRyZXNzIHJlY29yZE93bmVyKSB7CiAgICAgICAgcmV0dXJuIGRzcFJlZ2lzdHJ5LmdldERTUChhZGRyKTsKICAgIH0KCiAgICAvL0BkZXYgUmVnaXN0ZXIgb3JnYW5pc2F0aW9uIGFzIERTUAogICAgLy9AcGFyYW0gZHNwQWRkcmVzcyBhZGRyZXNzIG9mIHdhbGxldCB0byByZWdpc3RlcgogICAgZnVuY3Rpb24gcmVnaXN0ZXJEc3AoYWRkcmVzcyBkc3BBZGRyZXNzLCBEU1BUeXBlIGRzcFR5cGUsIGJ5dGVzMzJbNV0gdXJsKSB7CiAgICAgICAgcmVjZWl2ZVNlY3VyaXR5RGVwb3NpdChkc3BBZGRyZXNzKTsKICAgICAgICBkc3BSZWdpc3RyeS5yZWdpc3Rlcihkc3BBZGRyZXNzLCBkc3BUeXBlLCB1cmwsIG1zZy5zZW5kZXIpOwogICAgICAgIERTUFJlZ2lzdGVyZWQoZHNwQWRkcmVzcyk7CiAgICB9CgogICAgLy9AZGV2IGNoZWNrIGlmIERTUCByZWdpc3RlcmVkCiAgICBmdW5jdGlvbiBpc0RzcFJlZ2lzdGVyZWQoYWRkcmVzcyBrZXkpIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBkc3BSZWdpc3RyeS5pc1JlZ2lzdGVyZWQoa2V5KTsKICAgIH0KCiAgICAvL0BkZXYgVW5yZWdpc3RlciBEU1AgYW5kIHJldHVybiB1bnVzZWQgZGVwb3NpdAogICAgLy9AcGFyYW0gQWRkcmVzcyBvZiBEU1AgdG8gYmUgdW5yZWdpc3RlcmVkCiAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyRHNwKGFkZHJlc3MgZHNwQWRkcmVzcykgewogICAgICAgIHJldHVybkRlcG9zaXQoZHNwQWRkcmVzcywgc2VjdXJpdHlEZXBvc2l0UmVnaXN0cnkpOwogICAgICAgIGRzcFJlZ2lzdHJ5LnVucmVnaXN0ZXIoZHNwQWRkcmVzcywgbXNnLnNlbmRlcik7CiAgICAgICAgRFNQVW5yZWdpc3RlcmVkKGRzcEFkZHJlc3MpOwogICAgfQoKICAgIC8vQGRldiBDaGFuZ2UgdXJsIG9mIERTUAogICAgLy9AcGFyYW0gYWRkcmVzcyBvZiBEU1AgdG8gY2hhbmdlCiAgICAvL0BwYXJhbSBuZXcgdXJsCiAgICBmdW5jdGlvbiB1cGRhdGVVcmwoYWRkcmVzcyBrZXksIGJ5dGVzMzJbNV0gdXJsKSB7CiAgICAgICAgZHNwUmVnaXN0cnkudXBkYXRlVXJsKGtleSwgdXJsLCBtc2cuc2VuZGVyKTsKICAgICAgICBEU1BQYXJhbWV0ZXJzQ2hhbmdlZChrZXkpOwogICAgfQoKICAgIC8vQGRldiB0cmFuc2ZlciBvd25lcnNoaXAgb2YgdGhpcyBEU1AgcmVjb3JkCiAgICAvL0BwYXJhbSBhZGRyZXNzIG9mIERTUAogICAgLy9AcGFyYW0gYWRkcmVzcyBvZiBuZXcgb3duZXIKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRFNQUmVjb3JkKGFkZHJlc3Mga2V5LCBhZGRyZXNzIG5ld093bmVyKSB7CiAgICAgICAgZHNwUmVnaXN0cnkudHJhbnNmZXIoa2V5LCBuZXdPd25lciwgbXNnLnNlbmRlcik7CiAgICB9Cn0KCmNvbnRyYWN0IFB1Ymxpc2hlclJlZ2lzdHJhciBpcyBTZWN1cml0eURlcG9zaXRBd2FyZXsKICAgIFB1Ymxpc2hlclJlZ2lzdHJ5IHB1YmxpYyBwdWJsaXNoZXJSZWdpc3RyeTsKCiAgICBldmVudCBQdWJsaXNoZXJSZWdpc3RlcmVkKGFkZHJlc3MgcHVibGlzaGVyQWRkcmVzcyk7CiAgICBldmVudCBQdWJsaXNoZXJVbnJlZ2lzdGVyZWQoYWRkcmVzcyBwdWJsaXNoZXJBZGRyZXNzKTsKICAgIGV2ZW50IFB1Ymxpc2hlclBhcmFtZXRlcnNDaGFuZ2VkKGFkZHJlc3MgcHVibGlzaGVyQWRkcmVzcyk7CgogICAgLy9AZGV2IFJldHJpZXZlIGluZm9ybWF0aW9uIGFib3V0IHJlZ2lzdGVyZWQgUHVibGlzaGVyCiAgICAvL0ByZXR1cm4gQWRkcmVzcyBvZiByZWdpc3RlcmVkIFB1Ymxpc2hlciBhbmQgdGltZSB3aGVuIHJlZ2lzdGVyZWQKICAgIGZ1bmN0aW9uIGZpbmRQdWJsaXNoZXIoYWRkcmVzcyBhZGRyKSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MgcHVibGlzaGVyQWRkcmVzcywgYnl0ZXMzMls1XSB1cmwsIHVpbnQyNTZbMl0ga2FybWEsIGFkZHJlc3MgcmVjb3JkT3duZXIpIHsKICAgICAgICByZXR1cm4gcHVibGlzaGVyUmVnaXN0cnkuZ2V0UHVibGlzaGVyKGFkZHIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzUHVibGlzaGVyUmVnaXN0ZXJlZChhZGRyZXNzIGtleSkgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIHB1Ymxpc2hlclJlZ2lzdHJ5LmlzUmVnaXN0ZXJlZChrZXkpOwogICAgfQoKICAgIC8vQGRldiBSZWdpc3RlciBvcmdhbmlzYXRpb24gYXMgUHVibGlzaGVyCiAgICAvL0BwYXJhbSBwdWJsaXNoZXJBZGRyZXNzIGFkZHJlc3Mgb2Ygd2FsbGV0IHRvIHJlZ2lzdGVyCiAgICBmdW5jdGlvbiByZWdpc3RlclB1Ymxpc2hlcihhZGRyZXNzIHB1Ymxpc2hlckFkZHJlc3MsIGJ5dGVzMzJbNV0gdXJsKSB7CiAgICAgICAgcmVjZWl2ZVNlY3VyaXR5RGVwb3NpdChwdWJsaXNoZXJBZGRyZXNzKTsKICAgICAgICBwdWJsaXNoZXJSZWdpc3RyeS5yZWdpc3RlcihwdWJsaXNoZXJBZGRyZXNzLCB1cmwsIG1zZy5zZW5kZXIpOwogICAgICAgIFB1Ymxpc2hlclJlZ2lzdGVyZWQocHVibGlzaGVyQWRkcmVzcyk7CiAgICB9CgogICAgLy9AZGV2IFVucmVnaXN0ZXIgUHVibGlzaGVyIGFuZCByZXR1cm4gdW51c2VkIGRlcG9zaXQKICAgIC8vQHBhcmFtIEFkZHJlc3Mgb2YgUHVibGlzaGVyIHRvIGJlIHVucmVnaXN0ZXJlZAogICAgZnVuY3Rpb24gdW5yZWdpc3RlclB1Ymxpc2hlcihhZGRyZXNzIHB1Ymxpc2hlckFkZHJlc3MpIHsKICAgICAgICByZXR1cm5EZXBvc2l0KHB1Ymxpc2hlckFkZHJlc3MsIHNlY3VyaXR5RGVwb3NpdFJlZ2lzdHJ5KTsKICAgICAgICBwdWJsaXNoZXJSZWdpc3RyeS51bnJlZ2lzdGVyKHB1Ymxpc2hlckFkZHJlc3MsIG1zZy5zZW5kZXIpOwogICAgICAgIFB1Ymxpc2hlclVucmVnaXN0ZXJlZChwdWJsaXNoZXJBZGRyZXNzKTsKICAgIH0KCiAgICAvL0BkZXYgdHJhbnNmZXIgb3duZXJzaGlwIG9mIHRoaXMgUHVibGlzaGVyIHJlY29yZAogICAgLy9AcGFyYW0gYWRkcmVzcyBvZiBQdWJsaXNoZXIKICAgIC8vQHBhcmFtIGFkZHJlc3Mgb2YgbmV3IG93bmVyCiAgICBmdW5jdGlvbiB0cmFuc2ZlclB1Ymxpc2hlclJlY29yZChhZGRyZXNzIGtleSwgYWRkcmVzcyBuZXdPd25lcikgewogICAgICAgIHB1Ymxpc2hlclJlZ2lzdHJ5LnRyYW5zZmVyKGtleSwgbmV3T3duZXIsIG1zZy5zZW5kZXIpOwogICAgfQp9Cgpjb250cmFjdCBTU1BSZWdpc3RyYXIgaXMgU1NQVHlwZUF3YXJlLCBTZWN1cml0eURlcG9zaXRBd2FyZXsKICAgIFNTUFJlZ2lzdHJ5IHB1YmxpYyBzc3BSZWdpc3RyeTsKCiAgICBldmVudCBTU1BSZWdpc3RlcmVkKGFkZHJlc3Mgc3NwQWRkcmVzcyk7CiAgICBldmVudCBTU1BVbnJlZ2lzdGVyZWQoYWRkcmVzcyBzc3BBZGRyZXNzKTsKICAgIGV2ZW50IFNTUFBhcmFtZXRlcnNDaGFuZ2VkKGFkZHJlc3Mgc3NwQWRkcmVzcyk7CgogICAgLy9AZGV2IFJldHJpZXZlIGluZm9ybWF0aW9uIGFib3V0IHJlZ2lzdGVyZWQgU1NQCiAgICAvL0ByZXR1cm4gQWRkcmVzcyBvZiByZWdpc3RlcmVkIFNTUCBhbmQgdGltZSB3aGVuIHJlZ2lzdGVyZWQKICAgIGZ1bmN0aW9uIGZpbmRTc3AoYWRkcmVzcyBzc3BBZGRyKSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3Mgc3NwQWRkcmVzcywgU1NQVHlwZSBzc3BUeXBlLCB1aW50MTYgcHVibGlzaGVyRmVlLCB1aW50MjU2WzJdIGthcm1hLCBhZGRyZXNzIHJlY29yZE93bmVyKSB7CiAgICAgICAgcmV0dXJuIHNzcFJlZ2lzdHJ5LmdldFNTUChzc3BBZGRyKTsKICAgIH0KCiAgICAvL0BkZXYgUmVnaXN0ZXIgb3JnYW5pc2F0aW9uIGFzIFNTUAogICAgLy9AcGFyYW0gc3NwQWRkcmVzcyBhZGRyZXNzIG9mIHdhbGxldCB0byByZWdpc3RlcgogICAgZnVuY3Rpb24gcmVnaXN0ZXJTc3AoYWRkcmVzcyBzc3BBZGRyZXNzLCBTU1BUeXBlIHNzcFR5cGUsIHVpbnQxNiBwdWJsaXNoZXJGZWUpIHsKICAgICAgICByZWNlaXZlU2VjdXJpdHlEZXBvc2l0KHNzcEFkZHJlc3MpOwogICAgICAgIHNzcFJlZ2lzdHJ5LnJlZ2lzdGVyKHNzcEFkZHJlc3MsIHNzcFR5cGUsIHB1Ymxpc2hlckZlZSwgbXNnLnNlbmRlcik7CiAgICAgICAgU1NQUmVnaXN0ZXJlZChzc3BBZGRyZXNzKTsKICAgIH0KCiAgICAvL0BkZXYgY2hlY2sgaWYgU1NQIHJlZ2lzdGVyZWQKICAgIGZ1bmN0aW9uIGlzU3NwUmVnaXN0ZXJlZChhZGRyZXNzIGtleSkgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIHNzcFJlZ2lzdHJ5LmlzUmVnaXN0ZXJlZChrZXkpOwogICAgfQoKICAgIC8vQGRldiBVbnJlZ2lzdGVyIFNTUCBhbmQgcmV0dXJuIHVudXNlZCBkZXBvc2l0CiAgICAvL0BwYXJhbSBBZGRyZXNzIG9mIFNTUCB0byBiZSB1bnJlZ2lzdGVyZWQKICAgIGZ1bmN0aW9uIHVucmVnaXN0ZXJTc3AoYWRkcmVzcyBzc3BBZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuRGVwb3NpdChzc3BBZGRyZXNzLCBzZWN1cml0eURlcG9zaXRSZWdpc3RyeSk7CiAgICAgICAgc3NwUmVnaXN0cnkudW5yZWdpc3Rlcihzc3BBZGRyZXNzLCBtc2cuc2VuZGVyKTsKICAgICAgICBTU1BVbnJlZ2lzdGVyZWQoc3NwQWRkcmVzcyk7CiAgICB9CgogICAgLy9AZGV2IENoYW5nZSBwdWJsaXNoZXIgZmVlIG9mIFNTUAogICAgLy9AcGFyYW0gYWRkcmVzcyBvZiBTU1AgdG8gY2hhbmdlCiAgICAvL0BwYXJhbSBuZXcgcHVibGlzaGVyIGZlZQogICAgZnVuY3Rpb24gdXBkYXRlUHVibGlzaGVyRmVlKGFkZHJlc3Mga2V5LCB1aW50MTYgbmV3RmVlKSB7CiAgICAgICAgc3NwUmVnaXN0cnkudXBkYXRlUHVibGlzaGVyRmVlKGtleSwgbmV3RmVlLCBtc2cuc2VuZGVyKTsKICAgICAgICBTU1BQYXJhbWV0ZXJzQ2hhbmdlZChrZXkpOwogICAgfQoKICAgIC8vQGRldiB0cmFuc2ZlciBvd25lcnNoaXAgb2YgdGhpcyBTU1AgcmVjb3JkCiAgICAvL0BwYXJhbSBhZGRyZXNzIG9mIFNTUAogICAgLy9AcGFyYW0gYWRkcmVzcyBvZiBuZXcgb3duZXIKICAgIGZ1bmN0aW9uIHRyYW5zZmVyU1NQUmVjb3JkKGFkZHJlc3Mga2V5LCBhZGRyZXNzIG5ld093bmVyKSB7CiAgICAgICAgc3NwUmVnaXN0cnkudHJhbnNmZXIoa2V5LCBuZXdPd25lciwgbXNnLnNlbmRlcik7CiAgICB9Cn0KCmNvbnRyYWN0IENoYW5uZWxBcGkgewogICAgZnVuY3Rpb24gYXBwbHlSdW50aW1lVXBkYXRlKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCBpbXByZXNzaW9uc0NvdW50LCB1aW50IGZyYXVkQ291bnQpOwoKICAgIGZ1bmN0aW9uIGFwcGx5QXVkaXRvcnNDaGVja1VwZGF0ZShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgZnJhdWRDb3VudERlbHRhKTsKfQoKY29udHJhY3QgUmVnaXN0cnlQcm92aWRlciB7CiAgICBmdW5jdGlvbiByZXBsYWNlU1NQUmVnaXN0cnkoU1NQUmVnaXN0cnkgbmV3UmVnaXN0cnkpOwoKICAgIGZ1bmN0aW9uIHJlcGxhY2VEU1BSZWdpc3RyeShEU1BSZWdpc3RyeSBuZXdSZWdpc3RyeSk7CgogICAgZnVuY3Rpb24gcmVwbGFjZVB1Ymxpc2hlclJlZ2lzdHJ5KFB1Ymxpc2hlclJlZ2lzdHJ5IG5ld1JlZ2lzdHJ5KSA7CgogICAgZnVuY3Rpb24gcmVwbGFjZUF1ZGl0b3JSZWdpc3RyeShBdWRpdG9yUmVnaXN0cnkgbmV3UmVnaXN0cnkpOwoKICAgIGZ1bmN0aW9uIHJlcGxhY2VTZWN1cml0eURlcG9zaXRSZWdpc3RyeShEZXBvc2l0UmVnaXN0cnkgbmV3UmVnaXN0cnkpOwoKICAgIGZ1bmN0aW9uIGdldFNTUFJlZ2lzdHJ5KCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoU1NQUmVnaXN0cnkpOwoKICAgIGZ1bmN0aW9uIGdldERTUFJlZ2lzdHJ5KCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoRFNQUmVnaXN0cnkpOwoKICAgIGZ1bmN0aW9uIGdldFB1Ymxpc2hlclJlZ2lzdHJ5KCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoUHVibGlzaGVyUmVnaXN0cnkpOwoKICAgIGZ1bmN0aW9uIGdldEF1ZGl0b3JSZWdpc3RyeSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKEF1ZGl0b3JSZWdpc3RyeSk7CgogICAgZnVuY3Rpb24gZ2V0U2VjdXJpdHlEZXBvc2l0UmVnaXN0cnkoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChEZXBvc2l0UmVnaXN0cnkpOwp9Cgpjb250cmFjdCBTdGF0ZUNoYW5uZWxMaXN0ZW5lciBpcyBSZWdpc3RyeVByb3ZpZGVyLCBDaGFubmVsQXBpIHsKICAgIGFkZHJlc3MgY2hhbm5lbENvbnRyYWN0QWRkcmVzczsKCiAgICBldmVudCBDaGFubmVsQ29udHJhY3RBZGRyZXNzQ2hhbmdlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNBZGRyZXNzLCBhZGRyZXNzIGluZGV4ZWQgbmV3QWRkcmVzcyk7CgogICAgZnVuY3Rpb24gYXBwbHlSdW50aW1lVXBkYXRlKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCBpbXByZXNzaW9uc0NvdW50LCB1aW50IGZyYXVkQ291bnQpIG9ubHlDaGFubmVsQ29udHJhY3QgewogICAgICAgIHVpbnQyNTZbMl0gc3RvcmFnZSBrYXJtYURpZmY7CiAgICAgICAga2FybWFEaWZmWzBdID0gaW1wcmVzc2lvbnNDb3VudDsKICAgICAgICBrYXJtYURpZmZbMV0gPSAwOwogICAgICAgIGlmIChnZXREU1BSZWdpc3RyeSgpLmlzUmVnaXN0ZXJlZChmcm9tKSkgewogICAgICAgICAgICBnZXREU1BSZWdpc3RyeSgpLmFwcGx5S2FybWFEaWZmKGZyb20sIGthcm1hRGlmZik7CiAgICAgICAgfSBlbHNlIGlmIChnZXRTU1BSZWdpc3RyeSgpLmlzUmVnaXN0ZXJlZChmcm9tKSkgewogICAgICAgICAgICBnZXRTU1BSZWdpc3RyeSgpLmFwcGx5S2FybWFEaWZmKGZyb20sIGthcm1hRGlmZik7CiAgICAgICAgfQoKICAgICAgICBrYXJtYURpZmZbMV0gPSBmcmF1ZENvdW50OwogICAgICAgIGlmIChnZXRTU1BSZWdpc3RyeSgpLmlzUmVnaXN0ZXJlZCh0bykpIHsKICAgICAgICAgICAga2FybWFEaWZmWzBdID0gMDsKICAgICAgICAgICAgZ2V0U1NQUmVnaXN0cnkoKS5hcHBseUthcm1hRGlmZih0bywga2FybWFEaWZmKTsKICAgICAgICB9IGVsc2UgaWYgKGdldFB1Ymxpc2hlclJlZ2lzdHJ5KCkuaXNSZWdpc3RlcmVkKHRvKSkgewogICAgICAgICAgICBrYXJtYURpZmZbMF0gPSBpbXByZXNzaW9uc0NvdW50OwogICAgICAgICAgICBnZXRQdWJsaXNoZXJSZWdpc3RyeSgpLmFwcGx5S2FybWFEaWZmKHRvLCBrYXJtYURpZmYpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhcHBseUF1ZGl0b3JzQ2hlY2tVcGRhdGUoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IGZyYXVkQ291bnREZWx0YSkgb25seUNoYW5uZWxDb250cmFjdCB7CiAgICAgICAgLy9UbyBiZSBpbXBsZW1lbnRlZAogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlDaGFubmVsQ29udHJhY3QoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNoYW5uZWxDb250cmFjdEFkZHJlc3MpOwogICAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IFBhcHlydXNEQU8gaXMgV2l0aFRva2VuLAogICAgICAgICAgICAgICAgICAgICAgIFJlZ2lzdHJ5UHJvdmlkZXIsCiAgICAgICAgICAgICAgICAgICAgICAgU3RhdGVDaGFubmVsTGlzdGVuZXIsCiAgICAgICAgICAgICAgICAgICAgICAgU1NQUmVnaXN0cmFyLAogICAgICAgICAgICAgICAgICAgICAgIERTUFJlZ2lzdHJhciwKICAgICAgICAgICAgICAgICAgICAgICBQdWJsaXNoZXJSZWdpc3RyYXIsCiAgICAgICAgICAgICAgICAgICAgICAgQXVkaXRvclJlZ2lzdHJhciwKICAgICAgICAgICAgICAgICAgICAgICBPd25hYmxlIHsKCiAgICBmdW5jdGlvbiBQYXB5cnVzREFPKEVSQzIwIHBhcHlydXNUb2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgU1NQUmVnaXN0cnkgX3NzcFJlZ2lzdHJ5LAogICAgICAgICAgICAgICAgICAgICAgICBEU1BSZWdpc3RyeSBfZHNwUmVnaXN0cnksCiAgICAgICAgICAgICAgICAgICAgICAgIFB1Ymxpc2hlclJlZ2lzdHJ5IF9wdWJsaXNoZXJSZWdpc3RyeSwKICAgICAgICAgICAgICAgICAgICAgICAgQXVkaXRvclJlZ2lzdHJ5IF9hdWRpdG9yUmVnaXN0cnksCiAgICAgICAgICAgICAgICAgICAgICAgIERlcG9zaXRSZWdpc3RyeSBfc2VjdXJpdHlEZXBvc2l0UmVnaXN0cnkKICAgICkgewogICAgICAgIHRva2VuID0gcGFweXJ1c1Rva2VuOwogICAgICAgIHNzcFJlZ2lzdHJ5ID0gX3NzcFJlZ2lzdHJ5OwogICAgICAgIGRzcFJlZ2lzdHJ5ID0gX2RzcFJlZ2lzdHJ5OwogICAgICAgIHB1Ymxpc2hlclJlZ2lzdHJ5ID0gX3B1Ymxpc2hlclJlZ2lzdHJ5OwogICAgICAgIGF1ZGl0b3JSZWdpc3RyeSA9IF9hdWRpdG9yUmVnaXN0cnk7CiAgICAgICAgc2VjdXJpdHlEZXBvc2l0UmVnaXN0cnkgPSBfc2VjdXJpdHlEZXBvc2l0UmVnaXN0cnk7CiAgICB9CgogICAgZXZlbnQgRGVwb3NpdHNUcmFuc2ZlcnJlZChhZGRyZXNzIG5ld0RhbywgdWludDI1NiBzdW0pOwogICAgZXZlbnQgU1NQUmVnaXN0cnlSZXBsYWNlZChhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8pOwogICAgZXZlbnQgRFNQUmVnaXN0cnlSZXBsYWNlZChhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8pOwogICAgZXZlbnQgUHVibGlzaGVyUmVnaXN0cnlSZXBsYWNlZChhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8pOwogICAgZXZlbnQgQXVkaXRvclJlZ2lzdHJ5UmVwbGFjZWQoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvKTsKICAgIGV2ZW50IFNlY3VyaXR5RGVwb3NpdFJlZ2lzdHJ5UmVwbGFjZWQoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvKTsKCiAgICBmdW5jdGlvbiByZXBsYWNlU1NQUmVnaXN0cnkoU1NQUmVnaXN0cnkgbmV3UmVnaXN0cnkpIG9ubHlPd25lciB7CiAgICAgICAgYWRkcmVzcyBvbGQgPSBzc3BSZWdpc3RyeTsKICAgICAgICBzc3BSZWdpc3RyeSA9IG5ld1JlZ2lzdHJ5OwogICAgICAgIFNTUFJlZ2lzdHJ5UmVwbGFjZWQob2xkLCBuZXdSZWdpc3RyeSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVwbGFjZURTUFJlZ2lzdHJ5KERTUFJlZ2lzdHJ5IG5ld1JlZ2lzdHJ5KSBvbmx5T3duZXIgewogICAgICAgIGFkZHJlc3Mgb2xkID0gZHNwUmVnaXN0cnk7CiAgICAgICAgZHNwUmVnaXN0cnkgPSBuZXdSZWdpc3RyeTsKICAgICAgICBEU1BSZWdpc3RyeVJlcGxhY2VkKG9sZCwgbmV3UmVnaXN0cnkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlcGxhY2VQdWJsaXNoZXJSZWdpc3RyeShQdWJsaXNoZXJSZWdpc3RyeSBuZXdSZWdpc3RyeSkgb25seU93bmVyIHsKICAgICAgICBhZGRyZXNzIG9sZCA9IHB1Ymxpc2hlclJlZ2lzdHJ5OwogICAgICAgIHB1Ymxpc2hlclJlZ2lzdHJ5ID0gbmV3UmVnaXN0cnk7CiAgICAgICAgUHVibGlzaGVyUmVnaXN0cnlSZXBsYWNlZChvbGQsIHB1Ymxpc2hlclJlZ2lzdHJ5KTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXBsYWNlQXVkaXRvclJlZ2lzdHJ5KEF1ZGl0b3JSZWdpc3RyeSBuZXdSZWdpc3RyeSkgb25seU93bmVyIHsKICAgICAgICBhZGRyZXNzIG9sZCA9IGF1ZGl0b3JSZWdpc3RyeTsKICAgICAgICBhdWRpdG9yUmVnaXN0cnkgPSBuZXdSZWdpc3RyeTsKICAgICAgICBBdWRpdG9yUmVnaXN0cnlSZXBsYWNlZChvbGQsIGF1ZGl0b3JSZWdpc3RyeSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVwbGFjZVNlY3VyaXR5RGVwb3NpdFJlZ2lzdHJ5KERlcG9zaXRSZWdpc3RyeSBuZXdSZWdpc3RyeSkgb25seU93bmVyIHsKICAgICAgICBhZGRyZXNzIG9sZCA9IHNlY3VyaXR5RGVwb3NpdFJlZ2lzdHJ5OwogICAgICAgIHNlY3VyaXR5RGVwb3NpdFJlZ2lzdHJ5ID0gbmV3UmVnaXN0cnk7CiAgICAgICAgU2VjdXJpdHlEZXBvc2l0UmVnaXN0cnlSZXBsYWNlZChvbGQsIHNlY3VyaXR5RGVwb3NpdFJlZ2lzdHJ5KTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXBsYWNlQ2hhbm5lbENvbnRyYWN0QWRkcmVzcyhhZGRyZXNzIG5ld0NoYW5uZWxDb250cmFjdCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShuZXdDaGFubmVsQ29udHJhY3QgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgQ2hhbm5lbENvbnRyYWN0QWRkcmVzc0NoYW5nZWQoY2hhbm5lbENvbnRyYWN0QWRkcmVzcywgbmV3Q2hhbm5lbENvbnRyYWN0KTsKICAgICAgICBjaGFubmVsQ29udHJhY3RBZGRyZXNzID0gbmV3Q2hhbm5lbENvbnRyYWN0OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFNTUFJlZ2lzdHJ5KCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoU1NQUmVnaXN0cnkpIHsKICAgICAgICByZXR1cm4gc3NwUmVnaXN0cnk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RFNQUmVnaXN0cnkoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChEU1BSZWdpc3RyeSkgewogICAgICAgIHJldHVybiBkc3BSZWdpc3RyeTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQdWJsaXNoZXJSZWdpc3RyeSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKFB1Ymxpc2hlclJlZ2lzdHJ5KSB7CiAgICAgICAgcmV0dXJuIHB1Ymxpc2hlclJlZ2lzdHJ5OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEF1ZGl0b3JSZWdpc3RyeSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKEF1ZGl0b3JSZWdpc3RyeSkgewogICAgICAgIHJldHVybiBhdWRpdG9yUmVnaXN0cnk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0U2VjdXJpdHlEZXBvc2l0UmVnaXN0cnkoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChEZXBvc2l0UmVnaXN0cnkpIHsKICAgICAgICByZXR1cm4gc2VjdXJpdHlEZXBvc2l0UmVnaXN0cnk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJEZXBvc2l0c1RvTmV3RGFvKGFkZHJlc3MgbmV3RGFvKSBvbmx5T3duZXIgewogICAgICAgIHVpbnQyNTYgZGVwb3NpdFN1bSA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICB0b2tlbi50cmFuc2ZlcihuZXdEYW8sIGRlcG9zaXRTdW0pOwogICAgICAgIERlcG9zaXRzVHJhbnNmZXJyZWQobmV3RGFvLCBkZXBvc2l0U3VtKTsKICAgIH0KCiAgICBmdW5jdGlvbiBraWxsKCkgb25seU93bmVyIHsKICAgICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgfQp9'.
	

]
