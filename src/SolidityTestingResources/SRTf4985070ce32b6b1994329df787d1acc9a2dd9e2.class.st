Class {
	#name : #SRTf4985070ce32b6b1994329df787d1acc9a2dd9e2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf4985070ce32b6b1994329df787d1acc9a2dd9e2 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovLyBGaWxlOiBjb250cmFjdHMvZXJjL2VyYzcyMS9JRVJDNzIxQmFzZS5zb2wKCi8vLyBAdGl0bGUgRVJDLTcyMSBOb24tRnVuZ2libGUgVG9rZW4gU3RhbmRhcmQKLy8vIEBkZXYgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2Jsb2IvbWFzdGVyL0VJUFMvZWlwLTcyMS5tZAovLy8gIE5vdGU6IHRoZSBFUkMtMTY1IGlkZW50aWZpZXIgZm9yIHRoaXMgaW50ZXJmYWNlIGlzIDB4NjQ2NjM1M2MKaW50ZXJmYWNlIElFUkM3MjFCYXNlIC8qIGlzIElFUkMxNjUgICovIHsKICAvLy8gQGRldiBUaGlzIGVtaXRzIHdoZW4gb3duZXJzaGlwIG9mIGFueSBORlQgY2hhbmdlcyBieSBhbnkgbWVjaGFuaXNtLgogIC8vLyAgVGhpcyBldmVudCBlbWl0cyB3aGVuIE5GVHMgYXJlIGNyZWF0ZWQgKGBmcm9tYCA9PSAwKSBhbmQgZGVzdHJveWVkCiAgLy8vICAoYHRvYCA9PSAwKS4gRXhjZXB0aW9uOiBkdXJpbmcgY29udHJhY3QgY3JlYXRpb24sIGFueSBudW1iZXIgb2YgTkZUcwogIC8vLyAgbWF5IGJlIGNyZWF0ZWQgYW5kIGFzc2lnbmVkIHdpdGhvdXQgZW1pdHRpbmcgVHJhbnNmZXIuIEF0IHRoZSB0aW1lIG9mCiAgLy8vICBhbnkgdHJhbnNmZXIsIHRoZSBhcHByb3ZlZCBhZGRyZXNzIGZvciB0aGF0IE5GVCAoaWYgYW55KSBpcyByZXNldCB0byBub25lLgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdG9rZW5JZCk7CgogIC8vLyBAZGV2IFRoaXMgZW1pdHMgd2hlbiB0aGUgYXBwcm92ZWQgYWRkcmVzcyBmb3IgYW4gTkZUIGlzIGNoYW5nZWQgb3IKICAvLy8gIHJlYWZmaXJtZWQuIFRoZSB6ZXJvIGFkZHJlc3MgaW5kaWNhdGVzIHRoZXJlIGlzIG5vIGFwcHJvdmVkIGFkZHJlc3MuCiAgLy8vICBXaGVuIGEgVHJhbnNmZXIgZXZlbnQgZW1pdHMsIHRoaXMgYWxzbyBpbmRpY2F0ZXMgdGhhdCB0aGUgYXBwcm92ZWQKICAvLy8gIGFkZHJlc3MgZm9yIHRoYXQgTkZUIChpZiBhbnkpIGlzIHJlc2V0IHRvIG5vbmUuCiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9hcHByb3ZlZCwgdWludDI1NiBfdG9rZW5JZCk7CgogIC8vLyBAZGV2IFRoaXMgZW1pdHMgd2hlbiBhbiBvcGVyYXRvciBpcyBlbmFibGVkIG9yIGRpc2FibGVkIGZvciBhbiBvd25lci4KICAvLy8gIFRoZSBvcGVyYXRvciBjYW4gbWFuYWdlIGFsbCBORlRzIG9mIHRoZSBvd25lci4KICBldmVudCBBcHByb3ZhbEZvckFsbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX29wZXJhdG9yLCBib29sIF9hcHByb3ZlZCk7CgogIC8vLyBAbm90aWNlIENvdW50IGFsbCBORlRzIGFzc2lnbmVkIHRvIGFuIG93bmVyCiAgLy8vIEBkZXYgTkZUcyBhc3NpZ25lZCB0byB0aGUgemVybyBhZGRyZXNzIGFyZSBjb25zaWRlcmVkIGludmFsaWQsIGFuZCB0aGlzCiAgLy8vICBmdW5jdGlvbiB0aHJvd3MgZm9yIHF1ZXJpZXMgYWJvdXQgdGhlIHplcm8gYWRkcmVzcy4KICAvLy8gQHBhcmFtIF9vd25lciBBbiBhZGRyZXNzIGZvciB3aG9tIHRvIHF1ZXJ5IHRoZSBiYWxhbmNlCiAgLy8vIEByZXR1cm4gVGhlIG51bWJlciBvZiBORlRzIG93bmVkIGJ5IGBfb3duZXJgLCBwb3NzaWJseSB6ZXJvCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwoKICAvLy8gQG5vdGljZSBGaW5kIHRoZSBvd25lciBvZiBhbiBORlQKICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBpZGVudGlmaWVyIGZvciBhbiBORlQKICAvLy8gQGRldiBORlRzIGFzc2lnbmVkIHRvIHplcm8gYWRkcmVzcyBhcmUgY29uc2lkZXJlZCBpbnZhbGlkLCBhbmQgcXVlcmllcwogIC8vLyAgYWJvdXQgdGhlbSBkbyB0aHJvdy4KICAvLy8gQHJldHVybiBUaGUgYWRkcmVzcyBvZiB0aGUgb3duZXIgb2YgdGhlIE5GVAogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzKTsKCiAgLy8vIEBub3RpY2UgVHJhbnNmZXJzIHRoZSBvd25lcnNoaXAgb2YgYW4gTkZUIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlciBhZGRyZXNzCiAgLy8vIEBkZXYgVGhyb3dzIHVubGVzcyBgbXNnLnNlbmRlcmAgaXMgdGhlIGN1cnJlbnQgb3duZXIsIGFuIGF1dGhvcml6ZWQKICAvLy8gIG9wZXJhdG9yLCBvciB0aGUgYXBwcm92ZWQgYWRkcmVzcyBmb3IgdGhpcyBORlQuIFRocm93cyBpZiBgX2Zyb21gIGlzCiAgLy8vICBub3QgdGhlIGN1cnJlbnQgb3duZXIuIFRocm93cyBpZiBgX3RvYCBpcyB0aGUgemVybyBhZGRyZXNzLiBUaHJvd3MgaWYKICAvLy8gIGBfdG9rZW5JZGAgaXMgbm90IGEgdmFsaWQgTkZULiBXaGVuIHRyYW5zZmVyIGlzIGNvbXBsZXRlLCB0aGlzIGZ1bmN0aW9uCiAgLy8vICBjaGVja3MgaWYgYF90b2AgaXMgYSBzbWFydCBjb250cmFjdCAoY29kZSBzaXplID4gMCkuIElmIHNvLCBpdCBjYWxscwogIC8vLyAgYG9uRVJDNzIxUmVjZWl2ZWRgIG9uIGBfdG9gIGFuZCB0aHJvd3MgaWYgdGhlIHJldHVybiB2YWx1ZSBpcyBub3QKICAvLy8gIGBieXRlczQoa2VjY2FrMjU2KCJvbkVSQzcyMVJlY2VpdmVkKGFkZHJlc3MsdWludDI1NixieXRlcykiKSlgLgogIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGN1cnJlbnQgb3duZXIgb2YgdGhlIE5GVAogIC8vLyBAcGFyYW0gX3RvIFRoZSBuZXcgb3duZXIKICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBORlQgdG8gdHJhbnNmZXIKICAvLy8gQHBhcmFtIF9kYXRhIEFkZGl0aW9uYWwgZGF0YSB3aXRoIG5vIHNwZWNpZmllZCBmb3JtYXQsIHNlbnQgaW4gY2FsbCB0byBgX3RvYAogIC8vIHNvbGl1bS1kaXNhYmxlLW5leHQtbGluZSBhcmctb3ZlcmZsb3cKICBmdW5jdGlvbiBzYWZlVHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkLCBieXRlcyBfZGF0YSkgZXh0ZXJuYWwgcGF5YWJsZTsKCiAgLy8vIEBub3RpY2UgVHJhbnNmZXJzIHRoZSBvd25lcnNoaXAgb2YgYW4gTkZUIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlciBhZGRyZXNzCiAgLy8vIEBkZXYgVGhpcyB3b3JrcyBpZGVudGljYWxseSB0byB0aGUgb3RoZXIgZnVuY3Rpb24gd2l0aCBhbiBleHRyYSBkYXRhIHBhcmFtZXRlciwKICAvLy8gIGV4Y2VwdCB0aGlzIGZ1bmN0aW9uIGp1c3Qgc2V0cyBkYXRhIHRvIFtdCiAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgY3VycmVudCBvd25lciBvZiB0aGUgTkZUCiAgLy8vIEBwYXJhbSBfdG8gVGhlIG5ldyBvd25lcgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIE5GVCB0byB0cmFuc2ZlcgogIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsIHBheWFibGU7CgogIC8vLyBAbm90aWNlIFRyYW5zZmVyIG93bmVyc2hpcCBvZiBhbiBORlQgLS0gVEhFIENBTExFUiBJUyBSRVNQT05TSUJMRQogIC8vLyAgVE8gQ09ORklSTSBUSEFUIGBfdG9gIElTIENBUEFCTEUgT0YgUkVDRUlWSU5HIE5GVFMgT1IgRUxTRQogIC8vLyAgVEhFWSBNQVkgQkUgUEVSTUFORU5UTFkgTE9TVAogIC8vLyBAZGV2IFRocm93cyB1bmxlc3MgYG1zZy5zZW5kZXJgIGlzIHRoZSBjdXJyZW50IG93bmVyLCBhbiBhdXRob3JpemVkCiAgLy8vICBvcGVyYXRvciwgb3IgdGhlIGFwcHJvdmVkIGFkZHJlc3MgZm9yIHRoaXMgTkZULiBUaHJvd3MgaWYgYF9mcm9tYCBpcwogIC8vLyAgbm90IHRoZSBjdXJyZW50IG93bmVyLiBUaHJvd3MgaWYgYF90b2AgaXMgdGhlIHplcm8gYWRkcmVzcy4gVGhyb3dzIGlmCiAgLy8vICBgX3Rva2VuSWRgIGlzIG5vdCBhIHZhbGlkIE5GVC4KICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBjdXJyZW50IG93bmVyIG9mIHRoZSBORlQKICAvLy8gQHBhcmFtIF90byBUaGUgbmV3IG93bmVyCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgTkZUIHRvIHRyYW5zZmVyCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBleHRlcm5hbCBwYXlhYmxlOwoKICAvLy8gQG5vdGljZSBTZXQgb3IgcmVhZmZpcm0gdGhlIGFwcHJvdmVkIGFkZHJlc3MgZm9yIGFuIE5GVAogIC8vLyBAZGV2IFRoZSB6ZXJvIGFkZHJlc3MgaW5kaWNhdGVzIHRoZXJlIGlzIG5vIGFwcHJvdmVkIGFkZHJlc3MuCiAgLy8vIEBkZXYgVGhyb3dzIHVubGVzcyBgbXNnLnNlbmRlcmAgaXMgdGhlIGN1cnJlbnQgTkZUIG93bmVyLCBvciBhbiBhdXRob3JpemVkCiAgLy8vICBvcGVyYXRvciBvZiB0aGUgY3VycmVudCBvd25lci4KICAvLy8gQHBhcmFtIF9hcHByb3ZlZCBUaGUgbmV3IGFwcHJvdmVkIE5GVCBjb250cm9sbGVyCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgTkZUIHRvIGFwcHJvdmUKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX2FwcHJvdmVkLCB1aW50MjU2IF90b2tlbklkKSBleHRlcm5hbCBwYXlhYmxlOwoKICAvLy8gQG5vdGljZSBFbmFibGUgb3IgZGlzYWJsZSBhcHByb3ZhbCBmb3IgYSB0aGlyZCBwYXJ0eSAoIm9wZXJhdG9yIikgdG8gbWFuYWdlCiAgLy8vICBhbGwgeW91ciBhc3NldC4KICAvLy8gQGRldiBFbWl0cyB0aGUgQXBwcm92YWxGb3JBbGwgZXZlbnQKICAvLy8gQHBhcmFtIF9vcGVyYXRvciBBZGRyZXNzIHRvIGFkZCB0byB0aGUgc2V0IG9mIGF1dGhvcml6ZWQgb3BlcmF0b3JzLgogIC8vLyBAcGFyYW0gX2FwcHJvdmVkIFRydWUgaWYgdGhlIG9wZXJhdG9ycyBpcyBhcHByb3ZlZCwgZmFsc2UgdG8gcmV2b2tlIGFwcHJvdmFsCiAgZnVuY3Rpb24gc2V0QXBwcm92YWxGb3JBbGwoYWRkcmVzcyBfb3BlcmF0b3IsIGJvb2wgX2FwcHJvdmVkKSBleHRlcm5hbDsKCiAgLy8vIEBub3RpY2UgR2V0IHRoZSBhcHByb3ZlZCBhZGRyZXNzIGZvciBhIHNpbmdsZSBORlQKICAvLy8gQGRldiBUaHJvd3MgaWYgYF90b2tlbklkYCBpcyBub3QgYSB2YWxpZCBORlQKICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBORlQgdG8gZmluZCB0aGUgYXBwcm92ZWQgYWRkcmVzcyBmb3IKICAvLy8gQHJldHVybiBUaGUgYXBwcm92ZWQgYWRkcmVzcyBmb3IgdGhpcyBORlQsIG9yIHRoZSB6ZXJvIGFkZHJlc3MgaWYgdGhlcmUgaXMgbm9uZQogIGZ1bmN0aW9uIGdldEFwcHJvdmVkKHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyk7CgogIC8vLyBAbm90aWNlIFF1ZXJ5IGlmIGFuIGFkZHJlc3MgaXMgYW4gYXV0aG9yaXplZCBvcGVyYXRvciBmb3IgYW5vdGhlciBhZGRyZXNzCiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdGhhdCBvd25zIHRoZSBORlRzCiAgLy8vIEBwYXJhbSBfb3BlcmF0b3IgVGhlIGFkZHJlc3MgdGhhdCBhY3RzIG9uIGJlaGFsZiBvZiB0aGUgb3duZXIKICAvLy8gQHJldHVybiBUcnVlIGlmIGBfb3BlcmF0b3JgIGlzIGFuIGFwcHJvdmVkIG9wZXJhdG9yIGZvciBgX293bmVyYCwgZmFsc2Ugb3RoZXJ3aXNlCiAgZnVuY3Rpb24gaXNBcHByb3ZlZEZvckFsbChhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfb3BlcmF0b3IpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCk7Cn0KCi8vIEZpbGU6IHplcHBlbGluL2NvbnRyYWN0cy9vd25lcnNoaXAvT3duYWJsZS5zb2wKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLy8gRmlsZTogemVwcGVsaW4vY29udHJhY3RzL2xpZmVjeWNsZS9QYXVzYWJsZS5zb2wKCi8qKgogKiBAdGl0bGUgUGF1c2FibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgogKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CiAgZXZlbnQgUGF1c2UoKTsKICBldmVudCBVbnBhdXNlKCk7CgogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBub3QgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gdHJ1ZTsKICAgIFBhdXNlKCk7CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgKi8KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogIH0KfQoKLy8gRmlsZTogemVwcGVsaW4vY29udHJhY3RzL293bmVyc2hpcC9IYXNOb0V0aGVyLnNvbAoKLyoqCiAqIEB0aXRsZSBDb250cmFjdHMgdGhhdCBzaG91bGQgbm90IG93biBFdGhlcgogKiBAYXV0aG9yIFJlbWNvIEJsb2VtZW4gPDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iZTM5MTg2OGU4MDhjYTNkMSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj7PgC5jb20+CiAqIEBkZXYgVGhpcyB0cmllcyB0byBibG9jayBpbmNvbWluZyBldGhlciB0byBwcmV2ZW50IGFjY2lkZW50YWwgbG9zcyBvZiBFdGhlci4gU2hvdWxkIEV0aGVyIGVuZCB1cAogKiBpbiB0aGUgY29udHJhY3QsIGl0IHdpbGwgYWxsb3cgdGhlIG93bmVyIHRvIHJlY2xhaW0gdGhpcyBldGhlci4KICogQG5vdGljZSBFdGhlciBjYW4gc3RpbGwgYmUgc2VuZCB0byB0aGlzIGNvbnRyYWN0IGJ5OgogKiBjYWxsaW5nIGZ1bmN0aW9ucyBsYWJlbGVkIGBwYXlhYmxlYAogKiBgc2VsZmRlc3RydWN0KGNvbnRyYWN0X2FkZHJlc3MpYAogKiBtaW5pbmcgZGlyZWN0bHkgdG8gdGhlIGNvbnRyYWN0IGFkZHJlc3MKKi8KY29udHJhY3QgSGFzTm9FdGhlciBpcyBPd25hYmxlIHsKCiAgLyoqCiAgKiBAZGV2IENvbnN0cnVjdG9yIHRoYXQgcmVqZWN0cyBpbmNvbWluZyBFdGhlcgogICogQGRldiBUaGUgYHBheWFibGVgIGZsYWcgaXMgYWRkZWQgc28gd2UgY2FuIGFjY2VzcyBgbXNnLnZhbHVlYCB3aXRob3V0IGNvbXBpbGVyIHdhcm5pbmcuIElmIHdlCiAgKiBsZWF2ZSBvdXQgcGF5YWJsZSwgdGhlbiBTb2xpZGl0eSB3aWxsIGFsbG93IGluaGVyaXRpbmcgY29udHJhY3RzIHRvIGltcGxlbWVudCBhIHBheWFibGUKICAqIGNvbnN0cnVjdG9yLiBCeSBkb2luZyBpdCB0aGlzIHdheSB3ZSBwcmV2ZW50IGEgcGF5YWJsZSBjb25zdHJ1Y3RvciBmcm9tIHdvcmtpbmcuIEFsdGVybmF0aXZlbHkKICAqIHdlIGNvdWxkIHVzZSBhc3NlbWJseSB0byBhY2Nlc3MgbXNnLnZhbHVlLgogICovCiAgZnVuY3Rpb24gSGFzTm9FdGhlcigpIHBheWFibGUgewogICAgcmVxdWlyZShtc2cudmFsdWUgPT0gMCk7CiAgfQoKICAvKioKICAgKiBAZGV2IERpc2FsbG93cyBkaXJlY3Qgc2VuZCBieSBzZXR0aW5ncyBhIGRlZmF1bHQgZnVuY3Rpb24gd2l0aG91dCB0aGUgYHBheWFibGVgIGZsYWcuCiAgICovCiAgZnVuY3Rpb24oKSBleHRlcm5hbCB7CiAgfQoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIGFsbCBFdGhlciBoZWxkIGJ5IHRoZSBjb250cmFjdCB0byB0aGUgb3duZXIuCiAgICovCiAgZnVuY3Rpb24gcmVjbGFpbUV0aGVyKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIGFzc2VydChvd25lci5zZW5kKHRoaXMuYmFsYW5jZSkpOwogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL21hcmtldHBsYWNlL0F4aWVDbG9ja0F1Y3Rpb24uc29sCgovLy8gQHRpdGxlIENsb2NrIGF1Y3Rpb24gZm9yIG5vbi1mdW5naWJsZSB0b2tlbnMuCmNvbnRyYWN0IEF4aWVDbG9ja0F1Y3Rpb24gaXMgSGFzTm9FdGhlciwgUGF1c2FibGUgewoKICAvLyBSZXByZXNlbnRzIGFuIGF1Y3Rpb24gb24gYW4gTkZUCiAgc3RydWN0IEF1Y3Rpb24gewogICAgLy8gQ3VycmVudCBvd25lciBvZiBORlQKICAgIGFkZHJlc3Mgc2VsbGVyOwogICAgLy8gUHJpY2UgKGluIHdlaSkgYXQgYmVnaW5uaW5nIG9mIGF1Y3Rpb24KICAgIHVpbnQxMjggc3RhcnRpbmdQcmljZTsKICAgIC8vIFByaWNlIChpbiB3ZWkpIGF0IGVuZCBvZiBhdWN0aW9uCiAgICB1aW50MTI4IGVuZGluZ1ByaWNlOwogICAgLy8gRHVyYXRpb24gKGluIHNlY29uZHMpIG9mIGF1Y3Rpb24KICAgIHVpbnQ2NCBkdXJhdGlvbjsKICAgIC8vIFRpbWUgd2hlbiBhdWN0aW9uIHN0YXJ0ZWQKICAgIC8vIE5PVEU6IDAgaWYgdGhpcyBhdWN0aW9uIGhhcyBiZWVuIGNvbmNsdWRlZAogICAgdWludDY0IHN0YXJ0ZWRBdDsKICB9CgogIC8vIEN1dCBvd25lciB0YWtlcyBvbiBlYWNoIGF1Y3Rpb24sIG1lYXN1cmVkIGluIGJhc2lzIHBvaW50cyAoMS8xMDAgb2YgYSBwZXJjZW50KS4KICAvLyBWYWx1ZXMgMC0xMCwwMDAgbWFwIHRvIDAlLTEwMCUKICB1aW50MjU2IHB1YmxpYyBvd25lckN1dDsKCiAgLy8gTWFwIGZyb20gdG9rZW4gSUQgdG8gdGhlaXIgY29ycmVzcG9uZGluZyBhdWN0aW9uLgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAodWludDI1NiA9PiBBdWN0aW9uKSkgcHVibGljIGF1Y3Rpb25zOwoKICBldmVudCBBdWN0aW9uQ3JlYXRlZCgKICAgIGFkZHJlc3MgaW5kZXhlZCBfbmZ0QWRkcmVzcywKICAgIHVpbnQyNTYgaW5kZXhlZCBfdG9rZW5JZCwKICAgIHVpbnQyNTYgX3N0YXJ0aW5nUHJpY2UsCiAgICB1aW50MjU2IF9lbmRpbmdQcmljZSwKICAgIHVpbnQyNTYgX2R1cmF0aW9uLAogICAgYWRkcmVzcyBfc2VsbGVyCiAgKTsKCiAgZXZlbnQgQXVjdGlvblN1Y2Nlc3NmdWwoCiAgICBhZGRyZXNzIGluZGV4ZWQgX25mdEFkZHJlc3MsCiAgICB1aW50MjU2IGluZGV4ZWQgX3Rva2VuSWQsCiAgICB1aW50MjU2IF90b3RhbFByaWNlLAogICAgYWRkcmVzcyBfd2lubmVyCiAgKTsKCiAgZXZlbnQgQXVjdGlvbkNhbmNlbGxlZCgKICAgIGFkZHJlc3MgaW5kZXhlZCBfbmZ0QWRkcmVzcywKICAgIHVpbnQyNTYgaW5kZXhlZCBfdG9rZW5JZAogICk7CgogIC8vLyBAZGV2IENvbnN0cnVjdG9yIGNyZWF0ZXMgYSByZWZlcmVuY2UgdG8gdGhlIE5GVCBvd25lcnNoaXAgY29udHJhY3QKICAvLy8gIGFuZCB2ZXJpZmllcyB0aGUgb3duZXIgY3V0IGlzIGluIHRoZSB2YWxpZCByYW5nZS4KICAvLy8gQHBhcmFtIF9vd25lckN1dCAtIHBlcmNlbnQgY3V0IHRoZSBvd25lciB0YWtlcyBvbiBlYWNoIGF1Y3Rpb24sIG11c3QgYmUKICAvLy8gIGJldHdlZW4gMC0xMCwwMDAuCiAgZnVuY3Rpb24gQXhpZUNsb2NrQXVjdGlvbih1aW50MjU2IF9vd25lckN1dCkgcHVibGljIHsKICAgIHJlcXVpcmUoX293bmVyQ3V0IDw9IDEwMDAwKTsKICAgIG93bmVyQ3V0ID0gX293bmVyQ3V0OwogIH0KCiAgLy8vIEBkZXYgRE9OJ1QgZ2l2ZSBtZSB5b3VyIG1vbmV5LgogIGZ1bmN0aW9uICgpIGV4dGVybmFsIHt9CgogIC8vIE1vZGlmaWVycyB0byBjaGVjayB0aGF0IGlucHV0cyBjYW4gYmUgc2FmZWx5IHN0b3JlZCB3aXRoIGEgY2VydGFpbgogIC8vIG51bWJlciBvZiBiaXRzLiBXZSB1c2UgY29uc3RhbnRzIGFuZCBtdWx0aXBsZSBtb2RpZmllcnMgdG8gc2F2ZSBnYXMuCiAgbW9kaWZpZXIgY2FuQmVTdG9yZWRXaXRoNjRCaXRzKHVpbnQyNTYgX3ZhbHVlKSB7CiAgICByZXF1aXJlKF92YWx1ZSA8PSAxODQ0Njc0NDA3MzcwOTU1MTYxNSk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgY2FuQmVTdG9yZWRXaXRoMTI4Qml0cyh1aW50MjU2IF92YWx1ZSkgewogICAgcmVxdWlyZShfdmFsdWUgPCAzNDAyODIzNjY5MjA5Mzg0NjM0NjMzNzQ2MDc0MzE3NjgyMTE0NTUpOwogICAgXzsKICB9CgogIC8vLyBAZGV2IFJldHVybnMgYXVjdGlvbiBpbmZvIGZvciBhbiBORlQgb24gYXVjdGlvbi4KICAvLy8gQHBhcmFtIF9uZnRBZGRyZXNzIC0gQWRkcmVzcyBvZiB0aGUgTkZULgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgLSBJRCBvZiBORlQgb24gYXVjdGlvbi4KICBmdW5jdGlvbiBnZXRBdWN0aW9uKAogICAgYWRkcmVzcyBfbmZ0QWRkcmVzcywKICAgIHVpbnQyNTYgX3Rva2VuSWQKICApCiAgICBleHRlcm5hbAogICAgdmlldwogICAgcmV0dXJucyAoCiAgICAgIGFkZHJlc3Mgc2VsbGVyLAogICAgICB1aW50MjU2IHN0YXJ0aW5nUHJpY2UsCiAgICAgIHVpbnQyNTYgZW5kaW5nUHJpY2UsCiAgICAgIHVpbnQyNTYgZHVyYXRpb24sCiAgICAgIHVpbnQyNTYgc3RhcnRlZEF0CiAgICApCiAgewogICAgQXVjdGlvbiBzdG9yYWdlIF9hdWN0aW9uID0gYXVjdGlvbnNbX25mdEFkZHJlc3NdW190b2tlbklkXTsKICAgIHJlcXVpcmUoX2lzT25BdWN0aW9uKF9hdWN0aW9uKSk7CiAgICByZXR1cm4gKAogICAgICBfYXVjdGlvbi5zZWxsZXIsCiAgICAgIF9hdWN0aW9uLnN0YXJ0aW5nUHJpY2UsCiAgICAgIF9hdWN0aW9uLmVuZGluZ1ByaWNlLAogICAgICBfYXVjdGlvbi5kdXJhdGlvbiwKICAgICAgX2F1Y3Rpb24uc3RhcnRlZEF0CiAgICApOwogIH0KCiAgLy8vIEBkZXYgUmV0dXJucyB0aGUgY3VycmVudCBwcmljZSBvZiBhbiBhdWN0aW9uLgogIC8vLyBAcGFyYW0gX25mdEFkZHJlc3MgLSBBZGRyZXNzIG9mIHRoZSBORlQuCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCAtIElEIG9mIHRoZSB0b2tlbiBwcmljZSB3ZSBhcmUgY2hlY2tpbmcuCiAgZnVuY3Rpb24gZ2V0Q3VycmVudFByaWNlKAogICAgYWRkcmVzcyBfbmZ0QWRkcmVzcywKICAgIHVpbnQyNTYgX3Rva2VuSWQKICApCiAgICBleHRlcm5hbAogICAgdmlldwogICAgcmV0dXJucyAodWludDI1NikKICB7CiAgICBBdWN0aW9uIHN0b3JhZ2UgX2F1Y3Rpb24gPSBhdWN0aW9uc1tfbmZ0QWRkcmVzc11bX3Rva2VuSWRdOwogICAgcmVxdWlyZShfaXNPbkF1Y3Rpb24oX2F1Y3Rpb24pKTsKICAgIHJldHVybiBfZ2V0Q3VycmVudFByaWNlKF9hdWN0aW9uKTsKICB9CgogIC8vLyBAZGV2IENyZWF0ZXMgYW5kIGJlZ2lucyBhIG5ldyBhdWN0aW9uLgogIC8vLyBAcGFyYW0gX25mdEFkZHJlc3MgLSBhZGRyZXNzIG9mIGEgZGVwbG95ZWQgY29udHJhY3QgaW1wbGVtZW50aW5nCiAgLy8vICB0aGUgTm9uZnVuZ2libGUgSW50ZXJmYWNlLgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgLSBJRCBvZiB0b2tlbiB0byBhdWN0aW9uLCBzZW5kZXIgbXVzdCBiZSBvd25lci4KICAvLy8gQHBhcmFtIF9zdGFydGluZ1ByaWNlIC0gUHJpY2Ugb2YgaXRlbSAoaW4gd2VpKSBhdCBiZWdpbm5pbmcgb2YgYXVjdGlvbi4KICAvLy8gQHBhcmFtIF9lbmRpbmdQcmljZSAtIFByaWNlIG9mIGl0ZW0gKGluIHdlaSkgYXQgZW5kIG9mIGF1Y3Rpb24uCiAgLy8vIEBwYXJhbSBfZHVyYXRpb24gLSBMZW5ndGggb2YgdGltZSB0byBtb3ZlIGJldHdlZW4gc3RhcnRpbmcKICAvLy8gIHByaWNlIGFuZCBlbmRpbmcgcHJpY2UgKGluIHNlY29uZHMpLgogIGZ1bmN0aW9uIGNyZWF0ZUF1Y3Rpb24oCiAgICBhZGRyZXNzIF9uZnRBZGRyZXNzLAogICAgdWludDI1NiBfdG9rZW5JZCwKICAgIHVpbnQyNTYgX3N0YXJ0aW5nUHJpY2UsCiAgICB1aW50MjU2IF9lbmRpbmdQcmljZSwKICAgIHVpbnQyNTYgX2R1cmF0aW9uCiAgKQogICAgZXh0ZXJuYWwKICAgIHdoZW5Ob3RQYXVzZWQKICAgIGNhbkJlU3RvcmVkV2l0aDEyOEJpdHMoX3N0YXJ0aW5nUHJpY2UpCiAgICBjYW5CZVN0b3JlZFdpdGgxMjhCaXRzKF9lbmRpbmdQcmljZSkKICAgIGNhbkJlU3RvcmVkV2l0aDY0Qml0cyhfZHVyYXRpb24pCiAgewogICAgYWRkcmVzcyBfc2VsbGVyID0gbXNnLnNlbmRlcjsKICAgIHJlcXVpcmUoX293bnMoX25mdEFkZHJlc3MsIF9zZWxsZXIsIF90b2tlbklkKSk7CiAgICBfZXNjcm93KF9uZnRBZGRyZXNzLCBfc2VsbGVyLCBfdG9rZW5JZCk7CiAgICBBdWN0aW9uIG1lbW9yeSBfYXVjdGlvbiA9IEF1Y3Rpb24oCiAgICAgIF9zZWxsZXIsCiAgICAgIHVpbnQxMjgoX3N0YXJ0aW5nUHJpY2UpLAogICAgICB1aW50MTI4KF9lbmRpbmdQcmljZSksCiAgICAgIHVpbnQ2NChfZHVyYXRpb24pLAogICAgICB1aW50NjQobm93KQogICAgKTsKICAgIF9hZGRBdWN0aW9uKF9uZnRBZGRyZXNzLCBfdG9rZW5JZCwgX2F1Y3Rpb24sIF9zZWxsZXIpOwogIH0KCiAgLy8vIEBkZXYgQmlkcyBvbiBhbiBvcGVuIGF1Y3Rpb24sIGNvbXBsZXRpbmcgdGhlIGF1Y3Rpb24gYW5kIHRyYW5zZmVycmluZwogIC8vLyAgb3duZXJzaGlwIG9mIHRoZSBORlQgaWYgZW5vdWdoIEV0aGVyIGlzIHN1cHBsaWVkLgogIC8vLyBAcGFyYW0gX25mdEFkZHJlc3MgLSBhZGRyZXNzIG9mIGEgZGVwbG95ZWQgY29udHJhY3QgaW1wbGVtZW50aW5nCiAgLy8vICB0aGUgTm9uZnVuZ2libGUgSW50ZXJmYWNlLgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgLSBJRCBvZiB0b2tlbiB0byBiaWQgb24uCiAgZnVuY3Rpb24gYmlkKAogICAgYWRkcmVzcyBfbmZ0QWRkcmVzcywKICAgIHVpbnQyNTYgX3Rva2VuSWQKICApCiAgICBleHRlcm5hbAogICAgcGF5YWJsZQogICAgd2hlbk5vdFBhdXNlZAogIHsKICAgIC8vIF9iaWQgd2lsbCB0aHJvdyBpZiB0aGUgYmlkIG9yIGZ1bmRzIHRyYW5zZmVyIGZhaWxzCiAgICBfYmlkKF9uZnRBZGRyZXNzLCBfdG9rZW5JZCwgbXNnLnZhbHVlKTsKICAgIF90cmFuc2ZlcihfbmZ0QWRkcmVzcywgbXNnLnNlbmRlciwgX3Rva2VuSWQpOwogIH0KCiAgLy8vIEBkZXYgQ2FuY2VscyBhbiBhdWN0aW9uIHRoYXQgaGFzbid0IGJlZW4gd29uIHlldC4KICAvLy8gIFJldHVybnMgdGhlIE5GVCB0byBvcmlnaW5hbCBvd25lci4KICAvLy8gQG5vdGljZSBUaGlzIGlzIGEgc3RhdGUtbW9kaWZ5aW5nIGZ1bmN0aW9uIHRoYXQgY2FuCiAgLy8vICBiZSBjYWxsZWQgd2hpbGUgdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAvLy8gQHBhcmFtIF9uZnRBZGRyZXNzIC0gQWRkcmVzcyBvZiB0aGUgTkZULgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgLSBJRCBvZiB0b2tlbiBvbiBhdWN0aW9uCiAgZnVuY3Rpb24gY2FuY2VsQXVjdGlvbihhZGRyZXNzIF9uZnRBZGRyZXNzLCB1aW50MjU2IF90b2tlbklkKSBleHRlcm5hbCB7CiAgICBBdWN0aW9uIHN0b3JhZ2UgX2F1Y3Rpb24gPSBhdWN0aW9uc1tfbmZ0QWRkcmVzc11bX3Rva2VuSWRdOwogICAgcmVxdWlyZShfaXNPbkF1Y3Rpb24oX2F1Y3Rpb24pKTsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBfYXVjdGlvbi5zZWxsZXIpOwogICAgX2NhbmNlbEF1Y3Rpb24oX25mdEFkZHJlc3MsIF90b2tlbklkLCBfYXVjdGlvbi5zZWxsZXIpOwogIH0KCiAgLy8vIEBkZXYgQ2FuY2VscyBhbiBhdWN0aW9uIHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAvLy8gIE9ubHkgdGhlIG93bmVyIG1heSBkbyB0aGlzLCBhbmQgTkZUcyBhcmUgcmV0dXJuZWQgdG8KICAvLy8gIHRoZSBzZWxsZXIuIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiBlbWVyZ2VuY2llcy4KICAvLy8gQHBhcmFtIF9uZnRBZGRyZXNzIC0gQWRkcmVzcyBvZiB0aGUgTkZULgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgLSBJRCBvZiB0aGUgTkZUIG9uIGF1Y3Rpb24gdG8gY2FuY2VsLgogIGZ1bmN0aW9uIGNhbmNlbEF1Y3Rpb25XaGVuUGF1c2VkKAogICAgYWRkcmVzcyBfbmZ0QWRkcmVzcywKICAgIHVpbnQyNTYgX3Rva2VuSWQKICApCiAgICBleHRlcm5hbAogICAgd2hlblBhdXNlZAogICAgb25seU93bmVyCiAgewogICAgQXVjdGlvbiBzdG9yYWdlIF9hdWN0aW9uID0gYXVjdGlvbnNbX25mdEFkZHJlc3NdW190b2tlbklkXTsKICAgIHJlcXVpcmUoX2lzT25BdWN0aW9uKF9hdWN0aW9uKSk7CiAgICBfY2FuY2VsQXVjdGlvbihfbmZ0QWRkcmVzcywgX3Rva2VuSWQsIF9hdWN0aW9uLnNlbGxlcik7CiAgfQoKICAvLy8gQGRldiBSZXR1cm5zIHRydWUgaWYgdGhlIE5GVCBpcyBvbiBhdWN0aW9uLgogIC8vLyBAcGFyYW0gX2F1Y3Rpb24gLSBBdWN0aW9uIHRvIGNoZWNrLgogIGZ1bmN0aW9uIF9pc09uQXVjdGlvbihBdWN0aW9uIHN0b3JhZ2UgX2F1Y3Rpb24pIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIChfYXVjdGlvbi5zdGFydGVkQXQgPiAwKTsKICB9CgogIC8vLyBAZGV2IEdldHMgdGhlIE5GVCBvYmplY3QgZnJvbSBhbiBhZGRyZXNzLCB2YWxpZGF0aW5nIHRoYXQgaW1wbGVtZW50c0VSQzcyMSBpcyB0cnVlLgogIC8vLyBAcGFyYW0gX25mdEFkZHJlc3MgLSBBZGRyZXNzIG9mIHRoZSBORlQuCiAgZnVuY3Rpb24gX2dldE5mdENvbnRyYWN0KGFkZHJlc3MgX25mdEFkZHJlc3MpIGludGVybmFsIHB1cmUgcmV0dXJucyAoSUVSQzcyMUJhc2UpIHsKICAgIElFUkM3MjFCYXNlIGNhbmRpZGF0ZUNvbnRyYWN0ID0gSUVSQzcyMUJhc2UoX25mdEFkZHJlc3MpOwogICAgLy8gcmVxdWlyZShjYW5kaWRhdGVDb250cmFjdC5pbXBsZW1lbnRzRVJDNzIxKCkpOwogICAgcmV0dXJuIGNhbmRpZGF0ZUNvbnRyYWN0OwogIH0KCiAgLy8vIEBkZXYgUmV0dXJucyBjdXJyZW50IHByaWNlIG9mIGFuIE5GVCBvbiBhdWN0aW9uLiBCcm9rZW4gaW50byB0d28KICAvLy8gIGZ1bmN0aW9ucyAodGhpcyBvbmUsIHRoYXQgY29tcHV0ZXMgdGhlIGR1cmF0aW9uIGZyb20gdGhlIGF1Y3Rpb24KICAvLy8gIHN0cnVjdHVyZSwgYW5kIHRoZSBvdGhlciB0aGF0IGRvZXMgdGhlIHByaWNlIGNvbXB1dGF0aW9uKSBzbyB3ZQogIC8vLyAgY2FuIGVhc2lseSB0ZXN0IHRoYXQgdGhlIHByaWNlIGNvbXB1dGF0aW9uIHdvcmtzIGNvcnJlY3RseS4KICBmdW5jdGlvbiBfZ2V0Q3VycmVudFByaWNlKAogICAgQXVjdGlvbiBzdG9yYWdlIF9hdWN0aW9uCiAgKQogICAgaW50ZXJuYWwKICAgIHZpZXcKICAgIHJldHVybnMgKHVpbnQyNTYpCiAgewogICAgdWludDI1NiBfc2Vjb25kc1Bhc3NlZCA9IDA7CgogICAgLy8gQSBiaXQgb2YgaW5zdXJhbmNlIGFnYWluc3QgbmVnYXRpdmUgdmFsdWVzIChvciB3cmFwYXJvdW5kKS4KICAgIC8vIFByb2JhYmx5IG5vdCBuZWNlc3NhcnkgKHNpbmNlIEV0aGVyZXVtIGd1YXJhbnRlZXMgdGhhdCB0aGUKICAgIC8vIG5vdyB2YXJpYWJsZSBkb2Vzbid0IGV2ZXIgZ28gYmFja3dhcmRzKS4KICAgIGlmIChub3cgPiBfYXVjdGlvbi5zdGFydGVkQXQpIHsKICAgICAgX3NlY29uZHNQYXNzZWQgPSBub3cgLSBfYXVjdGlvbi5zdGFydGVkQXQ7CiAgICB9CgogICAgcmV0dXJuIF9jb21wdXRlQ3VycmVudFByaWNlKAogICAgICBfYXVjdGlvbi5zdGFydGluZ1ByaWNlLAogICAgICBfYXVjdGlvbi5lbmRpbmdQcmljZSwKICAgICAgX2F1Y3Rpb24uZHVyYXRpb24sCiAgICAgIF9zZWNvbmRzUGFzc2VkCiAgICApOwogIH0KCiAgLy8vIEBkZXYgQ29tcHV0ZXMgdGhlIGN1cnJlbnQgcHJpY2Ugb2YgYW4gYXVjdGlvbi4gRmFjdG9yZWQgb3V0CiAgLy8vICBmcm9tIF9jdXJyZW50UHJpY2Ugc28gd2UgY2FuIHJ1biBleHRlbnNpdmUgdW5pdCB0ZXN0cy4KICAvLy8gIFdoZW4gdGVzdGluZywgbWFrZSB0aGlzIGZ1bmN0aW9uIGV4dGVybmFsIGFuZCB0dXJuIG9uCiAgLy8vICBgQ3VycmVudCBwcmljZSBjb21wdXRhdGlvbmAgdGVzdCBzdWl0ZS4KICBmdW5jdGlvbiBfY29tcHV0ZUN1cnJlbnRQcmljZSgKICAgIHVpbnQyNTYgX3N0YXJ0aW5nUHJpY2UsCiAgICB1aW50MjU2IF9lbmRpbmdQcmljZSwKICAgIHVpbnQyNTYgX2R1cmF0aW9uLAogICAgdWludDI1NiBfc2Vjb25kc1Bhc3NlZAogICkKICAgIGludGVybmFsCiAgICBwdXJlCiAgICByZXR1cm5zICh1aW50MjU2KQogIHsKICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBTYWZlTWF0aCAob3Igc2ltaWxhcikgaW4gdGhpcyBmdW5jdGlvbiBiZWNhdXNlCiAgICAvLyAgYWxsIG9mIG91ciBleHRlcm5hbCBmdW5jdGlvbnMgY2FyZWZ1bGx5IGNhcCB0aGUgbWF4aW11bSB2YWx1ZXMgZm9yCiAgICAvLyAgdGltZSAoYXQgNjQtYml0cykgYW5kIGN1cnJlbmN5IChhdCAxMjgtYml0cykuIF9kdXJhdGlvbiBpcwogICAgLy8gIGFsc28ga25vd24gdG8gYmUgbm9uLXplcm8gKHNlZSB0aGUgcmVxdWlyZSgpIHN0YXRlbWVudCBpbgogICAgLy8gIF9hZGRBdWN0aW9uKCkpCiAgICBpZiAoX3NlY29uZHNQYXNzZWQgPj0gX2R1cmF0aW9uKSB7CiAgICAgIC8vIFdlJ3ZlIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgZHluYW1pYyBwcmljaW5nIHBvcnRpb24KICAgICAgLy8gb2YgdGhlIGF1Y3Rpb24sIGp1c3QgcmV0dXJuIHRoZSBlbmQgcHJpY2UuCiAgICAgIHJldHVybiBfZW5kaW5nUHJpY2U7CiAgICB9IGVsc2UgewogICAgICAvLyBTdGFydGluZyBwcmljZSBjYW4gYmUgaGlnaGVyIHRoYW4gZW5kaW5nIHByaWNlIChhbmQgb2Z0ZW4gaXMhKSwgc28KICAgICAgLy8gdGhpcyBkZWx0YSBjYW4gYmUgbmVnYXRpdmUuCiAgICAgIGludDI1NiBfdG90YWxQcmljZUNoYW5nZSA9IGludDI1NihfZW5kaW5nUHJpY2UpIC0gaW50MjU2KF9zdGFydGluZ1ByaWNlKTsKCiAgICAgIC8vIFRoaXMgbXVsdGlwbGljYXRpb24gY2FuJ3Qgb3ZlcmZsb3csIF9zZWNvbmRzUGFzc2VkIHdpbGwgZWFzaWx5IGZpdCB3aXRoaW4KICAgICAgLy8gNjQtYml0cywgYW5kIF90b3RhbFByaWNlQ2hhbmdlIHdpbGwgZWFzaWx5IGZpdCB3aXRoaW4gMTI4LWJpdHMsIHRoZWlyIHByb2R1Y3QKICAgICAgLy8gd2lsbCBhbHdheXMgZml0IHdpdGhpbiAyNTYtYml0cy4KICAgICAgaW50MjU2IF9jdXJyZW50UHJpY2VDaGFuZ2UgPSBfdG90YWxQcmljZUNoYW5nZSAqIGludDI1Nihfc2Vjb25kc1Bhc3NlZCkgLyBpbnQyNTYoX2R1cmF0aW9uKTsKCiAgICAgIC8vIF9jdXJyZW50UHJpY2VDaGFuZ2UgY2FuIGJlIG5lZ2F0aXZlLCBidXQgaWYgc28sIHdpbGwgaGF2ZSBhIG1hZ25pdHVkZQogICAgICAvLyBsZXNzIHRoYXQgX3N0YXJ0aW5nUHJpY2UuIFRodXMsIHRoaXMgcmVzdWx0IHdpbGwgYWx3YXlzIGVuZCB1cCBwb3NpdGl2ZS4KICAgICAgaW50MjU2IF9jdXJyZW50UHJpY2UgPSBpbnQyNTYoX3N0YXJ0aW5nUHJpY2UpICsgX2N1cnJlbnRQcmljZUNoYW5nZTsKCiAgICAgIHJldHVybiB1aW50MjU2KF9jdXJyZW50UHJpY2UpOwogICAgfQogIH0KCiAgLy8vIEBkZXYgUmV0dXJucyB0cnVlIGlmIHRoZSBjbGFpbWFudCBvd25zIHRoZSB0b2tlbi4KICAvLy8gQHBhcmFtIF9uZnRBZGRyZXNzIC0gVGhlIGFkZHJlc3Mgb2YgdGhlIE5GVC4KICAvLy8gQHBhcmFtIF9jbGFpbWFudCAtIEFkZHJlc3MgY2xhaW1pbmcgdG8gb3duIHRoZSB0b2tlbi4KICAvLy8gQHBhcmFtIF90b2tlbklkIC0gSUQgb2YgdG9rZW4gd2hvc2Ugb3duZXJzaGlwIHRvIHZlcmlmeS4KICBmdW5jdGlvbiBfb3ducyhhZGRyZXNzIF9uZnRBZGRyZXNzLCBhZGRyZXNzIF9jbGFpbWFudCwgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIElFUkM3MjFCYXNlIF9uZnRDb250cmFjdCA9IF9nZXROZnRDb250cmFjdChfbmZ0QWRkcmVzcyk7CiAgICByZXR1cm4gKF9uZnRDb250cmFjdC5vd25lck9mKF90b2tlbklkKSA9PSBfY2xhaW1hbnQpOwogIH0KCiAgLy8vIEBkZXYgQWRkcyBhbiBhdWN0aW9uIHRvIHRoZSBsaXN0IG9mIG9wZW4gYXVjdGlvbnMuIEFsc28gZmlyZXMgdGhlCiAgLy8vICBBdWN0aW9uQ3JlYXRlZCBldmVudC4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgcHV0IG9uIGF1Y3Rpb24uCiAgLy8vIEBwYXJhbSBfYXVjdGlvbiBBdWN0aW9uIHRvIGFkZC4KICBmdW5jdGlvbiBfYWRkQXVjdGlvbigKICAgIGFkZHJlc3MgX25mdEFkZHJlc3MsCiAgICB1aW50MjU2IF90b2tlbklkLAogICAgQXVjdGlvbiBfYXVjdGlvbiwKICAgIGFkZHJlc3MgX3NlbGxlcgogICkgaW50ZXJuYWwgewogICAgLy8gUmVxdWlyZSB0aGF0IGFsbCBhdWN0aW9ucyBoYXZlIGEgZHVyYXRpb24gb2YKICAgIC8vIGF0IGxlYXN0IG9uZSBtaW51dGUuIChLZWVwcyBvdXIgbWF0aCBmcm9tIGdldHRpbmcgaGFpcnkhKQogICAgcmVxdWlyZShfYXVjdGlvbi5kdXJhdGlvbiA+PSAxIG1pbnV0ZXMpOwoKICAgIGF1Y3Rpb25zW19uZnRBZGRyZXNzXVtfdG9rZW5JZF0gPSBfYXVjdGlvbjsKCiAgICBBdWN0aW9uQ3JlYXRlZCgKICAgICAgX25mdEFkZHJlc3MsCiAgICAgIF90b2tlbklkLAogICAgICB1aW50MjU2KF9hdWN0aW9uLnN0YXJ0aW5nUHJpY2UpLAogICAgICB1aW50MjU2KF9hdWN0aW9uLmVuZGluZ1ByaWNlKSwKICAgICAgdWludDI1NihfYXVjdGlvbi5kdXJhdGlvbiksCiAgICAgIF9zZWxsZXIKICAgICk7CiAgfQoKICAvLy8gQGRldiBSZW1vdmVzIGFuIGF1Y3Rpb24gZnJvbSB0aGUgbGlzdCBvZiBvcGVuIGF1Y3Rpb25zLgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgLSBJRCBvZiBORlQgb24gYXVjdGlvbi4KICBmdW5jdGlvbiBfcmVtb3ZlQXVjdGlvbihhZGRyZXNzIF9uZnRBZGRyZXNzLCB1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB7CiAgICBkZWxldGUgYXVjdGlvbnNbX25mdEFkZHJlc3NdW190b2tlbklkXTsKICB9CgogIC8vLyBAZGV2IENhbmNlbHMgYW4gYXVjdGlvbiB1bmNvbmRpdGlvbmFsbHkuCiAgZnVuY3Rpb24gX2NhbmNlbEF1Y3Rpb24oYWRkcmVzcyBfbmZ0QWRkcmVzcywgdWludDI1NiBfdG9rZW5JZCwgYWRkcmVzcyBfc2VsbGVyKSBpbnRlcm5hbCB7CiAgICBfcmVtb3ZlQXVjdGlvbihfbmZ0QWRkcmVzcywgX3Rva2VuSWQpOwogICAgX3RyYW5zZmVyKF9uZnRBZGRyZXNzLCBfc2VsbGVyLCBfdG9rZW5JZCk7CiAgICBBdWN0aW9uQ2FuY2VsbGVkKF9uZnRBZGRyZXNzLCBfdG9rZW5JZCk7CiAgfQoKICAvLy8gQGRldiBFc2Nyb3dzIHRoZSBORlQsIGFzc2lnbmluZyBvd25lcnNoaXAgdG8gdGhpcyBjb250cmFjdC4KICAvLy8gVGhyb3dzIGlmIHRoZSBlc2Nyb3cgZmFpbHMuCiAgLy8vIEBwYXJhbSBfbmZ0QWRkcmVzcyAtIFRoZSBhZGRyZXNzIG9mIHRoZSBORlQuCiAgLy8vIEBwYXJhbSBfb3duZXIgLSBDdXJyZW50IG93bmVyIGFkZHJlc3Mgb2YgdG9rZW4gdG8gZXNjcm93LgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgLSBJRCBvZiB0b2tlbiB3aG9zZSBhcHByb3ZhbCB0byB2ZXJpZnkuCiAgZnVuY3Rpb24gX2VzY3JvdyhhZGRyZXNzIF9uZnRBZGRyZXNzLCBhZGRyZXNzIF9vd25lciwgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICBJRVJDNzIxQmFzZSBfbmZ0Q29udHJhY3QgPSBfZ2V0TmZ0Q29udHJhY3QoX25mdEFkZHJlc3MpOwoKICAgIC8vIEl0IHdpbGwgdGhyb3cgaWYgdHJhbnNmZXIgZmFpbHMKICAgIF9uZnRDb250cmFjdC50cmFuc2ZlckZyb20oX293bmVyLCB0aGlzLCBfdG9rZW5JZCk7CiAgfQoKICAvLy8gQGRldiBUcmFuc2ZlcnMgYW4gTkZUIG93bmVkIGJ5IHRoaXMgY29udHJhY3QgdG8gYW5vdGhlciBhZGRyZXNzLgogIC8vLyBSZXR1cm5zIHRydWUgaWYgdGhlIHRyYW5zZmVyIHN1Y2NlZWRzLgogIC8vLyBAcGFyYW0gX25mdEFkZHJlc3MgLSBUaGUgYWRkcmVzcyBvZiB0aGUgTkZULgogIC8vLyBAcGFyYW0gX3JlY2VpdmVyIC0gQWRkcmVzcyB0byB0cmFuc2ZlciBORlQgdG8uCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCAtIElEIG9mIHRva2VuIHRvIHRyYW5zZmVyLgogIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9uZnRBZGRyZXNzLCBhZGRyZXNzIF9yZWNlaXZlciwgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgSUVSQzcyMUJhc2UgX25mdENvbnRyYWN0ID0gX2dldE5mdENvbnRyYWN0KF9uZnRBZGRyZXNzKTsKCiAgICAvLyBJdCB3aWxsIHRocm93IGlmIHRyYW5zZmVyIGZhaWxzCiAgICBfbmZ0Q29udHJhY3QudHJhbnNmZXJGcm9tKHRoaXMsIF9yZWNlaXZlciwgX3Rva2VuSWQpOwogIH0KCiAgLy8vIEBkZXYgQ29tcHV0ZXMgb3duZXIncyBjdXQgb2YgYSBzYWxlLgogIC8vLyBAcGFyYW0gX3ByaWNlIC0gU2FsZSBwcmljZSBvZiBORlQuCiAgZnVuY3Rpb24gX2NvbXB1dGVDdXQodWludDI1NiBfcHJpY2UpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgLy8gTk9URTogV2UgZG9uJ3QgdXNlIFNhZmVNYXRoIChvciBzaW1pbGFyKSBpbiB0aGlzIGZ1bmN0aW9uIGJlY2F1c2UKICAgIC8vICBhbGwgb2Ygb3VyIGVudHJ5IGZ1bmN0aW9ucyBjYXJlZnVsbHkgY2FwIHRoZSBtYXhpbXVtIHZhbHVlcyBmb3IKICAgIC8vICBjdXJyZW5jeSAoYXQgMTI4LWJpdHMpLCBhbmQgb3duZXJDdXQgPD0gMTAwMDAgKHNlZSB0aGUgcmVxdWlyZSgpCiAgICAvLyAgc3RhdGVtZW50IGluIHRoZSBDbG9ja0F1Y3Rpb24gY29uc3RydWN0b3IpLiBUaGUgcmVzdWx0IG9mIHRoaXMKICAgIC8vICBmdW5jdGlvbiBpcyBhbHdheXMgZ3VhcmFudGVlZCB0byBiZSA8PSBfcHJpY2UuCiAgICByZXR1cm4gX3ByaWNlICogb3duZXJDdXQgLyAxMDAwMDsKICB9CgogIC8vLyBAZGV2IENvbXB1dGVzIHRoZSBwcmljZSBhbmQgdHJhbnNmZXJzIHdpbm5pbmdzLgogIC8vLyBEb2VzIE5PVCB0cmFuc2ZlciBvd25lcnNoaXAgb2YgdG9rZW4uCiAgZnVuY3Rpb24gX2JpZCgKICAgIGFkZHJlc3MgX25mdEFkZHJlc3MsCiAgICB1aW50MjU2IF90b2tlbklkLAogICAgdWludDI1NiBfYmlkQW1vdW50CiAgKQogICAgaW50ZXJuYWwKICAgIHJldHVybnMgKHVpbnQyNTYpCiAgewogICAgLy8gR2V0IGEgcmVmZXJlbmNlIHRvIHRoZSBhdWN0aW9uIHN0cnVjdAogICAgQXVjdGlvbiBzdG9yYWdlIF9hdWN0aW9uID0gYXVjdGlvbnNbX25mdEFkZHJlc3NdW190b2tlbklkXTsKCiAgICAvLyBFeHBsaWNpdGx5IGNoZWNrIHRoYXQgdGhpcyBhdWN0aW9uIGlzIGN1cnJlbnRseSBsaXZlLgogICAgLy8gKEJlY2F1c2Ugb2YgaG93IEV0aGVyZXVtIG1hcHBpbmdzIHdvcmssIHdlIGNhbid0IGp1c3QgY291bnQKICAgIC8vIG9uIHRoZSBsb29rdXAgYWJvdmUgZmFpbGluZy4gQW4gaW52YWxpZCBfdG9rZW5JZCB3aWxsIGp1c3QKICAgIC8vIHJldHVybiBhbiBhdWN0aW9uIG9iamVjdCB0aGF0IGlzIGFsbCB6ZXJvcy4pCiAgICByZXF1aXJlKF9pc09uQXVjdGlvbihfYXVjdGlvbikpOwoKICAgIC8vIENoZWNrIHRoYXQgdGhlIGluY29taW5nIGJpZCBpcyBoaWdoZXIgdGhhbiB0aGUgY3VycmVudAogICAgLy8gcHJpY2UKICAgIHVpbnQyNTYgX3ByaWNlID0gX2dldEN1cnJlbnRQcmljZShfYXVjdGlvbik7CiAgICByZXF1aXJlKF9iaWRBbW91bnQgPj0gX3ByaWNlKTsKCiAgICAvLyBHcmFiIGEgcmVmZXJlbmNlIHRvIHRoZSBzZWxsZXIgYmVmb3JlIHRoZSBhdWN0aW9uIHN0cnVjdAogICAgLy8gZ2V0cyBkZWxldGVkLgogICAgYWRkcmVzcyBfc2VsbGVyID0gX2F1Y3Rpb24uc2VsbGVyOwoKICAgIC8vIFRoZSBiaWQgaXMgZ29vZCEgUmVtb3ZlIHRoZSBhdWN0aW9uIGJlZm9yZSBzZW5kaW5nIHRoZSBmZWVzCiAgICAvLyB0byB0aGUgc2VuZGVyIHNvIHdlIGNhbid0IGhhdmUgYSByZWVudHJhbmN5IGF0dGFjay4KICAgIF9yZW1vdmVBdWN0aW9uKF9uZnRBZGRyZXNzLCBfdG9rZW5JZCk7CgogICAgLy8gVHJhbnNmZXIgcHJvY2VlZHMgdG8gc2VsbGVyIChpZiB0aGVyZSBhcmUgYW55ISkKICAgIGlmIChfcHJpY2UgPiAwKSB7CiAgICAgIC8vICBDYWxjdWxhdGUgdGhlIGF1Y3Rpb25lZXIncyBjdXQuCiAgICAgIC8vIChOT1RFOiBfY29tcHV0ZUN1dCgpIGlzIGd1YXJhbnRlZWQgdG8gcmV0dXJuIGEKICAgICAgLy8gIHZhbHVlIDw9IHByaWNlLCBzbyB0aGlzIHN1YnRyYWN0aW9uIGNhbid0IGdvIG5lZ2F0aXZlLikKICAgICAgdWludDI1NiBfYXVjdGlvbmVlckN1dCA9IF9jb21wdXRlQ3V0KF9wcmljZSk7CiAgICAgIHVpbnQyNTYgX3NlbGxlclByb2NlZWRzID0gX3ByaWNlIC0gX2F1Y3Rpb25lZXJDdXQ7CgogICAgICAvLyBOT1RFOiBEb2luZyBhIHRyYW5zZmVyKCkgaW4gdGhlIG1pZGRsZSBvZiBhIGNvbXBsZXgKICAgICAgLy8gbWV0aG9kIGxpa2UgdGhpcyBpcyBnZW5lcmFsbHkgZGlzY291cmFnZWQgYmVjYXVzZSBvZgogICAgICAvLyByZWVudHJhbmN5IGF0dGFja3MgYW5kIERvUyBhdHRhY2tzIGlmIHRoZSBzZWxsZXIgaXMKICAgICAgLy8gYSBjb250cmFjdCB3aXRoIGFuIGludmFsaWQgZmFsbGJhY2sgZnVuY3Rpb24uIFdlIGV4cGxpY2l0bHkKICAgICAgLy8gZ3VhcmQgYWdhaW5zdCByZWVudHJhbmN5IGF0dGFja3MgYnkgcmVtb3ZpbmcgdGhlIGF1Y3Rpb24KICAgICAgLy8gYmVmb3JlIGNhbGxpbmcgdHJhbnNmZXIoKSwgYW5kIHRoZSBvbmx5IHRoaW5nIHRoZSBzZWxsZXIKICAgICAgLy8gY2FuIERvUyBpcyB0aGUgc2FsZSBvZiB0aGVpciBvd24gYXNzZXQhIChBbmQgaWYgaXQncyBhbgogICAgICAvLyBhY2NpZGVudCwgdGhleSBjYW4gY2FsbCBjYW5jZWxBdWN0aW9uKCkuICkKICAgICAgX3NlbGxlci50cmFuc2Zlcihfc2VsbGVyUHJvY2VlZHMpOwogICAgfQoKICAgIGlmIChfYmlkQW1vdW50ID4gX3ByaWNlKSB7CiAgICAgIC8vIENhbGN1bGF0ZSBhbnkgZXhjZXNzIGZ1bmRzIGluY2x1ZGVkIHdpdGggdGhlIGJpZC4gSWYgdGhlIGV4Y2VzcwogICAgICAvLyBpcyBhbnl0aGluZyB3b3J0aCB3b3JyeWluZyBhYm91dCwgdHJhbnNmZXIgaXQgYmFjayB0byBiaWRkZXIuCiAgICAgIC8vIE5PVEU6IFdlIGNoZWNrZWQgYWJvdmUgdGhhdCB0aGUgYmlkIGFtb3VudCBpcyBncmVhdGVyIHRoYW4gb3IKICAgICAgLy8gZXF1YWwgdG8gdGhlIHByaWNlIHNvIHRoaXMgY2Fubm90IHVuZGVyZmxvdy4KICAgICAgdWludDI1NiBfYmlkRXhjZXNzID0gX2JpZEFtb3VudCAtIF9wcmljZTsKCiAgICAgIC8vIFJldHVybiB0aGUgZnVuZHMuIFNpbWlsYXIgdG8gdGhlIHByZXZpb3VzIHRyYW5zZmVyLCB0aGlzIGlzCiAgICAgIC8vIG5vdCBzdXNjZXB0aWJsZSB0byBhIHJlLWVudHJ5IGF0dGFjayBiZWNhdXNlIHRoZSBhdWN0aW9uIGlzCiAgICAgIC8vIHJlbW92ZWQgYmVmb3JlIGFueSB0cmFuc2ZlcnMgb2NjdXIuCiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoX2JpZEV4Y2Vzcyk7CiAgICB9CgogICAgLy8gVGVsbCB0aGUgd29ybGQhCiAgICBBdWN0aW9uU3VjY2Vzc2Z1bChfbmZ0QWRkcmVzcywgX3Rva2VuSWQsIF9wcmljZSwgbXNnLnNlbmRlcik7CgogICAgcmV0dXJuIF9wcmljZTsKICB9Cn0='.
	

]
