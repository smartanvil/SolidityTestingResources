Class {
	#name : #SRTf4cae4aec9b4d7682f8cee4d9a273ba063e71366,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf4cae4aec9b4d7682f8cee4d9a273ba063e71366 >> base64 [
	^ 'Y29udHJhY3QgRXRoZXJUb3BEb2cgewoKCS8vIGZ1bmQgZm9yIGJhaWxpbmcgb3V0IHVuZGVyZG9ncyB3aGVuIHRoZXkgYXJlIHB1c2hlZCBvdXQKCXVpbnQgcHJpdmF0ZSBiYWlsb3V0QmFsYW5jZSA9IDA7CgoKCS8vID09PSBVbmRlcmRvZyBQYXlpbiBEaXN0cmlidXRpb246ID09PQoJCgkvLyBwZXJjZW50IG9mIHVuZGVyZG9nIGRlcG9zaXQgYW1vdW50IHRvIGdvIGluIGJhaWxvdXQgZnVuZAoJdWludCBjb25zdGFudCBwcml2YXRlIGJhaWxvdXRGdW5kUGVyY2VudCA9IDcwOwoKCS8vIHBlcmNlbnQgb2YgdW5kZXJkb2cgZGVwb3NpdCB0aGF0IGdvZXMgdG8gdGhlIHRvcCBkb2cncyBkaXZpZGVuZAoJdWludCBjb25zdGFudCBwcml2YXRlIHRvcERvZ0RpdmlkZW5kID0gMTU7CgoJLy8gcGVyY2VudCBvZiB1bmRlcmRvZyBkZXBvc2l0IHNlbnQgY2hpcCBhd2F5IHRvcCBkb2cncyBzdHJlbmd0aAoJdWludCBjb25zdGFudCBwcml2YXRlIHRvcERvZ0RlY2F5UGVyY2VudCA9IDEwOwoKCS8vIHBlcmNlbnQgb2YgdW5kZXJkb2cgZGVwb3Npb3QgdGhhdCBnb2VzIHRvIGx1Y2t5IGRvZydzIGRpdmlkZW5kCgl1aW50IGNvbnN0YW50IHByaXZhdGUgbHVja3lEb2dEaXZpZGVuZCA9IDM7CgoJLy8gdmlzaW9uIGRvZyB0YWtlcyBhIHNtYWxsIGZlZSBmcm9tIGVhY2ggdW5kZXJkb2cgZGVwb3NpdAoJdWludCBjb25zdGFudCBwcml2YXRlIHZpc2lvbkRvZ0ZlZVBlcmNlbnQgPSAyOwoKCS8vID09PSA9PT0gPT09ID09PSA9PT0gPT09ID09PSA9PT0gPT09CgoJCgkvLyBwZXJjZW50YWdlIG1hcmt1cCBmcm9tIHBheWluIGZvciBjYWxjdWxhdGluZyBuZXcgbWluaW51bSBUb3BEb2cgcHJpY2UgdGhyZXNob2xkCgl1aW50IGNvbnN0YW50IHByaXZhdGUgdG9wRG9nTWluTWFya3VwID0gMTI1OwoKCS8vIG1pbmltdW0gcmVxdWlyZWQgZGVwb3NpdCB0byBiZWNvbWUgdGhlIG5leHQgVG9wIERvZwoJLy8gKGFrYSBUb3AgRG9nIHN0cmVuZ3RoIC8gbG93ZXN0IHBvc3NpYmxlIHRha2VvdmVyIHRocmVzaG9sZCkKCS8vIHN0YXJ0cyBhdCAxMjUlIG9mIFRvcCBEb2cncyBkZXBvc2l0LCBzbG93bHkgZGVjbGluZXMgYXMgdW5kZXJkb2dzIGpvaW4KCXVpbnQgcHJpdmF0ZSB0b3BEb2dNaW5QcmljZSA9IDE7CgoJLy8gcmFuZ2UgYWJvdmUgdGhlIHRvcGRvZyBzdHJlbmd0aCAoYWthIHRvcERvZ01pblByaWNlKSB3aXRoaW4gd2hpY2gKCS8vIHRoZSByYW5kb21seSBnZW5lcmF0ZWQgcmVxdWlyZWQgdGFrZW92ZXIgdGhyZWhvbGQgaXMgc2V0Cgl1aW50IGNvbnN0YW50IHByaXZhdGUgdG9wRG9nQnV5b3V0UmFuZ2UgPSAxNTA7CgoJLy8gcGVyY2VudGFnZSBvZiB0b3Bkb2cgYnV5b3V0IGZlZSBnZXRzIHBhaWQgdG8gY3JlYXRvcgoJdWludCBjb25zdGFudCBwcml2YXRlIHZpc2lvbkRvZ0J1eVBlcmNlbnQgPSA1OwoKCgoJLy8gdW5kZXJkb2cgcGF5b3V0IG1hcmt1cCwgYXMgYSBwZXJjZW50YWdlIG9mIHRoZWlyIGRlcG9zaXRzCgkvLyBnZXRzIHJlc2V0IHRvIDE1MCUgYWZ0ZXIgZWFjaCByb3VuZCB3aGVuIHRoZSB0b3AgZG9nIGdldHMgcmVwbGFjZWQKCS8vIGdyYWR1YWxseSBkZWNheXMgdG8gbWluaW51bSBvZiAxMjAlIGFzIHVuZGVyZG9ncyBjaGlwIGF3YXkgYXQgdG9wIGRvZydzIHN0cmVuZ3RoCgl1aW50IHByaXZhdGUgdW5kZXJEb2dNYXJrdXAgPSAxNTA7CgoJLy8gYXMgdG9wIGRvZyBwcmljZSBkZWNsaW5lcywgdGhlc2Uga2VlcCB0cmFjayBvZiB0aGUgcmFuZ2UKCS8vIHNvIHVuZGVyRG9wTWFya3VwIGNhbiBzbG93bHkgZ28gZnJvbSAxNTAlIHRvIDEyMCUgcmV0dXJuCgkvLyBhcyB0aGUgVG9wIERvZyBtaW5pbnVtIHByaWNlIHN0YXJ0cyBhdCB0aGUgcHJpY2UgY2VpbGluZywKCS8vIGFuZCBkZWNsaW5lcyB1bnRpbCBpdCByZWFjaGVzIHRoZSBmbG9vciAob3IgbG93ZXIpCgl1aW50IHByaXZhdGUgdG9wRG9nUHJpY2VDZWlsaW5nID0gMDsKCXVpbnQgcHJpdmF0ZSB0b3BEb2dQcmljZUZsb29yID0gMDsKCgkvLyB0b3RhbCBjb2xsZWN0ZWQgZmVlcyBmcm9tIHVuZGVyZG9ncywgcGFpZCBvdXQgd2hlbmV2ZXIgVG9wIERvZyBpcyBib3VnaHQgb3V0Cgl1aW50IHByaXZhdGUgdmlzaW9uRmVlcyA9IDA7CgoJLy8gY3VycmVudCB0b3AgZG9nCglhZGRyZXNzIHByaXZhdGUgdG9wRG9nID0gMHgwOwoKCS8vIHVuZGVyZG9nIGVudHJpZXMKCXN0cnVjdCBVbmRlcmRvZyB7CgkJYWRkcmVzcyBhZGRyOwoJCXVpbnQgZGVwb3NpdDsKCQl1aW50IHBheW91dDsKCQl1aW50IGJhaWxvdXRzOwoJfQoJVW5kZXJkb2dbXSBwcml2YXRlIFVuZGVyZG9nczsKCgkvLyBwbGF5ZXIgbmFtZXMgZm9yIGZ1bgoJbWFwcGluZyAoYWRkcmVzcyA9PiBzdHJpbmcpIGRvZ05hbWVzOwoKCS8vIGN1cnJlbnQgbHVja3kgZG9nIChpZiBleGlzdHMpIHdpbGwgcmVjZWl2ZSAzJSBvZiB1bmRlcmRvZyBwYXlpbnMKCS8vIHNwZWNpZmllZCBhcyBpbmRleCBpbiBVbmRlcmRvZ3MgYXJyYXkKCS8vIDAgPSBub2JvZHkgKHRoZSB2ZXJ5IGZpcnN0IHVuZGVyZG9nIHRvIGpvaW4gdGhlIGdhbWUgaXMgcHJlY2x1ZGVkIGZyb20gYmVjb21pbmcgdGhlIEx1Y2t5IERvZykKCXVpbnQgcHJpdmF0ZSBsdWNreURvZyA9IDA7CgoJLy8gaW5kZXggb2YgbmV4dCB1bmRlcmRvZyB0byBiZSBwYWlkIAoJdWludCBwcml2YXRlIHBheW91dEluZGV4ID0gMDsKCgkvLyBjb3VudCBwYXlvdXRzIG1hZGUgYnkgdW5kZXJkb2dzIGN1cnJlbnRseSBpbiB0aGUgZ2FtZQoJLy8gc28gd2UgY2FuIGhhdmUgYSBiYXNlbGluZSBmb3IgZGl2aWRpbmcgdGhlIHNjcmFwcwoJdWludCBwcml2YXRlIHBheW91dENvdW50ID0gMDsKCgkvLyBhZGRyZXNzIG9mIHRoZSBjcmVhdG9yCglhZGRyZXNzIHByaXZhdGUgdmlzaW9uRG9nOwoKCWZ1bmN0aW9uIEV0aGVyVG9wRG9nKCkgewoJCXZpc2lvbkRvZyA9IG1zZy5zZW5kZXI7Cgl9CgoKCS8vID09PT0gR2FtZSBJbmZvIERpc3BsYXkgQUJJIGZ1bmN0aW9uczogPT09PQoJZnVuY3Rpb24gdW5kZXJkb2dQYXlvdXRGdW5kKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewoJCWJhbGFuY2UgPSBiYWlsb3V0QmFsYW5jZTsKCX0KCglmdW5jdGlvbiBuZXh0VW5kZXJkb2dQYXlvdXQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewoJCWlmIChVbmRlcmRvZ3MubGVuZ3RoIC0gcGF5b3V0SW5kZXggPj0gMSkgewoJCQlyZXR1cm4gVW5kZXJkb2dzW3BheW91dEluZGV4XS5wYXlvdXQ7CgkJfQoJfQoJCgoJZnVuY3Rpb24gdW5kZXJkb2dQYXlvdXRNYXJrdXAoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewoJCXJldHVybiB1bmRlckRvZ01hcmt1cDsKCX0KCglmdW5jdGlvbiB0b3BEb2dJbmZvKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBuYW1lLCB1aW50IHN0cmVuZ3RoKSB7CgkJaWYgKHRvcERvZyAhPSBhZGRyZXNzKDB4MCkpIHsKCQkJbmFtZSA9IGdldERvZ05hbWUodG9wRG9nKTsKCQl9IGVsc2UgewoJCQluYW1lID0gIltub3Qgc2V0XSI7CgkJfQoJCXN0cmVuZ3RoID0gdG9wRG9nTWluUHJpY2U7Cgl9CglmdW5jdGlvbiBsdWNreURvZ0luZm8oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nIG5hbWUpIHsKCQlpZiAobHVja3lEb2cgPiAwKSB7CgkJCW5hbWUgPSBnZXREb2dOYW1lKFVuZGVyZG9nc1tsdWNreURvZ10uYWRkcik7CgkJfSBlbHNlIHsKCQkJbmFtZSA9ICJbbm9ib2R5XSI7CgkJfQoJfQoKCWZ1bmN0aW9uIHVuZGVyZG9nQ291bnQoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CgkJcmV0dXJuIFVuZGVyZG9ncy5sZW5ndGggLSBwYXlvdXRJbmRleDsKCX0gCgoJZnVuY3Rpb24gdW5kZXJkb2dJbmZvKHVpbnQgbGluZVBvc2l0aW9uKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgbmFtZSwgYWRkcmVzcyBkb2dBZGRyZXNzLCB1aW50IGRlcG9zaXQsIHVpbnQgcGF5b3V0LCB1aW50IHNjcmFwQm9udXMpIHsKCQlpZiAobGluZVBvc2l0aW9uID4gMCAmJiBsaW5lUG9zaXRpb24gPD0gVW5kZXJkb2dzLmxlbmd0aCAtIHBheW91dEluZGV4KSB7CgoJCQlVbmRlcmRvZyB0aGVkb2cgPSBVbmRlcmRvZ3NbcGF5b3V0SW5kZXggKyAobGluZVBvc2l0aW9uIC0gMSldOwoJCQluYW1lID0gZ2V0RG9nTmFtZSh0aGVkb2cuYWRkcik7CgkJCWRvZ0FkZHJlc3MgPSB0aGVkb2cuYWRkcjsKCQkJZGVwb3NpdCA9IHRoZWRvZy5kZXBvc2l0OwoJCQlwYXlvdXQ9IHRoZWRvZy5wYXlvdXQ7CgkJCXNjcmFwQm9udXMgPSB0aGVkb2cuYmFpbG91dHM7CgkJfQoJfQoKCS8vID09PT0gRW5kIEFCSSBGdW5jdGlvbnMgPT09PQoKCgoJLy8gPT09PSBQdWJsaWMgdHJhbnNhY3Rpb24gZnVuY3Rpb25zOiA9PT09CgoJLy8gZGVmYXVsdCBmYWxsYmFjayA6IHBsYXkgYSByb3VuZAoJZnVuY3Rpb24oKSB7CgkJZG9nRmlnaHQoKTsKCX0KCQoJLy8gc2V0cyBuYW1lLCBvcHRpb25hbGx5IHBsYXlzIGEgcm91bmQgaWYgRXRoZXIgd2FzIHNlbnQKCWZ1bmN0aW9uIHNldE5hbWUoc3RyaW5nIERvZ05hbWUpIHsKCQlpZiAoYnl0ZXMoRG9nTmFtZSkubGVuZ3RoID49IDIgJiYgYnl0ZXMoRG9nTmFtZSkubGVuZ3RoIDw9IDE2KQoJCQlkb2dOYW1lc1ttc2cuc2VuZGVyXSA9IERvZ05hbWU7CgoJCS8vIGlmIGEgZGVwb3NpdCB3YXMgc2VudCwgcGxheSBpdCEKCQlpZiAobXNnLnZhbHVlID4gMCkgewoJCQlkb2dGaWdodCgpOwoJCX0KCQkKCX0KCglmdW5jdGlvbiBkb2dGaWdodCgpIHB1YmxpYyB7CgkJLy8gbWluaW11bSAxIEVUSCByZXF1aXJlZCB0byBwbGF5CgkJaWYgKG1zZy52YWx1ZSA8IDEgZXRoZXIpIHsKCQkJbXNnLnNlbmRlci5zZW5kKG1zZy52YWx1ZSk7CgkJCXJldHVybjsKCQl9CgoJCS8vIGRvZXMgYSB0b3Bkb2cgZXhpc3QgPwoJCWlmICh0b3BEb2cgIT0gYWRkcmVzcygweDApKSB7CgoJCQkvLyB0aGUgYWN0dWFsIGFtb3VudCByZXF1aXJlZCB0byBrbm9jayBvdXQgdGhlIHRvcCBkaWcgaXMgcmFuZG9tIHdpdGhpbiB0aGUgYnV5b3V0IHJhbmdlCgkJCXVpbnQgdG9wRG9nUHJpY2UgPSB0b3BEb2dNaW5QcmljZSArIHJhbmRJbnQoICh0b3BEb2dNaW5QcmljZSAqIHRvcERvZ0J1eW91dFJhbmdlIC8gMTAwKSAtIHRvcERvZ01pblByaWNlLCA0MzIxKTsKCgkJCS8vIENhbGN1bGF0ZSB0aGUgdG9wIGRvZyBwcmljZQoJCQlpZiAobXNnLnZhbHVlID49IHRvcERvZ1ByaWNlKSB7CgkJCQkvLyBUaGV5IGJvdWdodCBvdXQgdGhlIHRvcCBkb2chCgkJCQlidXlUb3BEb2codG9wRG9nUHJpY2UsIG1zZy52YWx1ZSAtIHRvcERvZ1ByaWNlKTsKCQkJfSBlbHNlIHsKCQkJCS8vIGRpZG4ndCBidXkgdGhlIHRvcCBkb2csIHRoaXMgcGFydGljaXBhbnQgYmVjb21lcyBhbiB1bmRlcmRvZyEKCQkJCWFkZFVuZGVyRG9nKG1zZy52YWx1ZSk7CgkJCX0KCQl9IGVsc2UgewoJCQkvLyBubyB0b3AgZG9nIGV4aXN0cyB5ZXQsIHRoZSBnYW1lIG11c3QgYmUganVzdCBnZXR0aW5nIHN0YXJ0ZWQKCQkJLy8gcHV0IHRoZSBmaXJzdCBkZXBvc2l0IGluIHRoZSBiYWlsb3V0IGZ1bmQsIGluaXRpYWxpemUgdGhlIGdhbWUKCgkJCS8vIHNldCBmaXJzdCB0b3BEb2cgCgkJCXRvcERvZyA9IG1zZy5zZW5kZXI7CgoJCQl0b3BEb2dQcmljZUZsb29yID0gdG9wRG9nTWluUHJpY2U7CgoJCQliYWlsb3V0QmFsYW5jZSArPSBtc2cudmFsdWU7CgkJCXRvcERvZ01pblByaWNlID0gbXNnLnZhbHVlICogdG9wRG9nTWluTWFya3VwIC8gMTAwOwoKCQkJdG9wRG9nUHJpY2VDZWlsaW5nID0gdG9wRG9nTWluUHJpY2U7CgoJCX0KCX0KCgkvLyA9PT09IEVuZCBQdWJsaWMgRnVuY3Rpb25zID09PT0KCgoKCS8vID09PT0gUHJpdmF0ZSBGdW5jdGlvbnM6ID09PT0KCWZ1bmN0aW9uIGFkZFVuZGVyRG9nKHVpbnQgYnV5aW4pIHByaXZhdGUgewoKCQl1aW50IGJhaWxjb3VudCA9IDA7CgoJCS8vIGFtb3VudCB0aGlzIGRlcG9zaXRvciB3aWxsIGJlIHBhaWQgd2hlbiB0aGUgZnVuZCBhbGxvd3MKCQl1aW50IHBheW91dHZhbCA9IGJ1eWluICogdW5kZXJEb2dNYXJrdXAgLyAxMDA7CgoJCS8vIGFkZCBwb3J0aW9uIG9mIGRlcG9zaXQgdG8gYmFpbG91dCBmdW5kIAoJCWJhaWxvdXRCYWxhbmNlICs9IGJ1eWluICogYmFpbG91dEZ1bmRQZXJjZW50IC8gMTAwOwoKCQkvLyB0b3AgZG9nIC8gbHVja3kgZG9nIGRpdmlkZW5kcwoJCXVpbnQgdG9wZGl2aWRlbmQgPSBidXlpbiAqIHRvcERvZ0RpdmlkZW5kIC8gMTAwOwoJCXVpbnQgbHVja3lkaXZpZGVuZCA9IGJ1eWluICogbHVja3lEb2dEaXZpZGVuZCAvIDEwMDsKCgkJLy8gaXMgdGhlcmUgYSBsdWNreSBkb2c/CgkJaWYgKGx1Y2t5RG9nICE9IDAgJiYgbHVja3lEb2cgPj0gcGF5b3V0SW5kZXgpIHsKCQkJLy8gcGF5IGx1Y2t5IGRvZyBkaXZpZGVuZHMKCQkJVW5kZXJkb2dzW2x1Y2t5RG9nXS5hZGRyLnNlbmQobHVja3lkaXZpZGVuZCk7CgkJfSBlbHNlIHsKCQkJLy8gbm8gbHVja3kgZG9nIGV4aXN0cywgYWxsIGRpdmlkZW5kcyBnbyB0byB0b3AgZG9nCgkJCXRvcGRpdmlkZW5kICs9IGx1Y2t5ZGl2aWRlbmQ7CgkJfQoKCQkvLyBwYXkgdG9wIGRvZyBkaXZpZGVuZHMKCQl0b3BEb2cuc2VuZCh0b3BkaXZpZGVuZCk7CgoKCQkvLyBjaGlwIGF3YXkgYXQgdGhlIHRvcCBkb2cncyBzdHJlbmd0aAoJCXVpbnQgdG9wZGVjYXkgPSAoYnV5aW4gKiB0b3BEb2dEZWNheVBlcmNlbnQgLyAxMDApOwoJCXRvcERvZ01pblByaWNlIC09IHRvcGRlY2F5OwoKCQkvLyB1cGRhdGUgdW5kZXJkb2cgbWFya3VwICUgZm9yIG5leHQgcm91bmQKCgkJLy8gc3BlY2lmaWVkIGFzIG4vMTAwMDAwIHRvIGF2b2lkIGZsb2F0aW5nIHBvaW50IG1hdGgKCQl1aW50IGRlY2F5ZmFjdG9yID0gMDsKCgkJLy8gY2FsY3VsYXRlIHRoZSBwYXlvdXQgbWFya3VwIGZvciBuZXh0IHVuZGVyZG9nCgkJaWYgKHRvcERvZ01pblByaWNlID4gdG9wRG9nUHJpY2VGbG9vcikgewoJCQl1aW50IGRlY2F5cmFuZ2UgPSAodG9wRG9nUHJpY2VDZWlsaW5nIC0gdG9wRG9nUHJpY2VGbG9vcik7CgkJCWRlY2F5ZmFjdG9yID0gMTAwMDAwICogKHRvcERvZ1ByaWNlQ2VpbGluZyAtIHRvcERvZ01pblByaWNlKSAvIGRlY2F5cmFuZ2U7CgkJfSBlbHNlIHsKCQkJZGVjYXlmYWN0b3IgPSAxMDAwMDA7CgkJfQoJCS8vIG1hcmt1cCB3aWxsIGJlIGJldHdlZW4gMTIwLTE1MCUgY29ycmVzcG9uZGluZyB0byBjdXJyZW50IHRvcCBkb2cgcHJpY2UgZGVjbGluZSAoMTUwJSAtIDMwJSA9IDEyMCUpCgkJdW5kZXJEb2dNYXJrdXAgPSAxNTAgLSAoZGVjYXlmYWN0b3IgKiAzMCAvIDEwMDAwMCk7CgoKCgkJLy8gY3JlYXRvciB0YWtlcyBhIHNsaWNlCgkJdmlzaW9uRmVlcyArPSAoYnV5aW4gKiB2aXNpb25Eb2dGZWVQZXJjZW50IC8gMTAwKTsKCQkKCgkJLy8gcGF5b3V0IGFzIG1hbnkgcHJldmlvdXMgdW5kZXJkb2dzIGFzIHRoZSBmdW5kIGNhbiBhZmZvcmQKCQl3aGlsZSAocGF5b3V0SW5kZXggPCBVbmRlcmRvZ3MubGVuZ3RoICYmIGJhaWxvdXRCYWxhbmNlID49IFVuZGVyZG9nc1twYXlvdXRJbmRleF0ucGF5b3V0ICkgewoJCQlwYXlvdXRDb3VudCAtPSBVbmRlcmRvZ3NbcGF5b3V0SW5kZXhdLmJhaWxvdXRzOwoJCQliYWlsb3V0QmFsYW5jZSAtPSBVbmRlcmRvZ3NbcGF5b3V0SW5kZXhdLnBheW91dDsKCQkJVW5kZXJkb2dzW3BheW91dEluZGV4XS5hZGRyLnNlbmQoVW5kZXJkb2dzW3BheW91dEluZGV4XS5wYXlvdXQpOwoKCgkJCS8vIGlmIHRoZSBsdWNreSBkb2cgd2FzIGJhaWxlZCBvdXQsIHRoZSB1c2VyIHdobyBkaWQgaXQgbm93IGJlY29tZXMgdGhlIGx1Y2t5IGRvZwoJCQlpZiAocGF5b3V0SW5kZXggPT0gbHVja3lEb2cgJiYgbHVja3lEb2cgIT0gMCkKCQkJCWx1Y2t5RG9nID0gVW5kZXJkb2dzLmxlbmd0aDsKCgkJCXBheW91dEluZGV4Kys7CgkJCWJhaWxjb3VudCsrOwoJCQlwYXlvdXRDb3VudCsrOwoJCX0KCgkJCgkJLy8gYWRkIHRoZSBuZXcgdW5kZXJkb2cgdG8gdGhlIHF1ZXVlCgkJVW5kZXJkb2dzLnB1c2goVW5kZXJkb2cobXNnLnNlbmRlciwgYnV5aW4sIHBheW91dHZhbCwgYmFpbGNvdW50KSk7CgoJfQoKCWZ1bmN0aW9uIGJ1eVRvcERvZyh1aW50IGJ1eXByaWNlLCB1aW50IHN1cnBsdXMpIHByaXZhdGUgewoKCQkvLyB0YWtlIG91dCB2aXppb25Eb2cgZmVlCgkJdWludCB2ZmVlID0gYnV5cHJpY2UgKiB2aXNpb25Eb2dCdXlQZXJjZW50IC8gMTAwOwoKCQl1aW50IGRvZ3BheW9mZiA9IChidXlwcmljZSAtIHZmZWUpOwoKCQkvLyBwYXlvdXQgcHJldmlvdXMgdG9wIGRvZwoJCXRvcERvZy5zZW5kKGRvZ3BheW9mZik7CgoJCXZpc2lvbkZlZXMgKz0gdmZlZTsKCgkJLy8gc2VuZCBidXkgZmVlIChwbHVzIHByZXZpb3VzIGNvbGxlY3RlZCB1bmRlcmRvZyBmZWVzKSB0byB2aXNpb25Eb2cKCQl2aXNpb25Eb2cuc2VuZCh2aXNpb25GZWVzKTsKCQl2aXNpb25GZWVzID0gMDsKCgkJLy8gcmVjb3JkIGEgcHJpY2UgZmxvb3IgZm9yIHVuZGVyZG9nIG1hcmt1cCBkZWNheSBjYWxjdWxhdGlvbiBkdXJpbmcgdGhlIG5leHQgcm91bmQ6CgkJLy8gdGhlIG1pbmludW0gcHVyY2hhc2UgcHJpY2UgYmVmb3JlIGJ1eW91dAoJCXRvcERvZ1ByaWNlRmxvb3IgPSB0b3BEb2dNaW5QcmljZTsKCgkJLy8gc2V0IHRoZSBpbml0aWFsIG1pbmltdW0gYnV5IHByaWNlIGZvciB0aGUgbmV4dCB0b3AgZG9nCgkJdG9wRG9nTWluUHJpY2UgPSBtc2cudmFsdWUgKiB0b3BEb2dNaW5NYXJrdXAgLyAxMDA7CgoJCS8vIHRoZSBwcmljZSBjZWlsaW5nIGZvciBjYWxjdWxhdGluZyB0aGUgdW5kZXJkb2cgbWFya3VwIGRlY2F5IGlzIHRoZSBuZXcgbWluaW11bSBwcmljZQoJCXRvcERvZ1ByaWNlQ2VpbGluZyA9IHRvcERvZ01pblByaWNlOwoKCgkJLy8gY2hlY2sgZm9yIGVsaWdpYmxlIGx1Y2t5IGRvZy4uLgovLwkJaWYgKFVuZGVyZG9ncy5sZW5ndGggLSBwYXlvdXRJbmRleCA+IDApIHsKCQkJLy8gbHVja3kgZG9nIGlzIG1vc3QgcmVjZW50IHVuZGVyZG9nIHRvIG1ha2UgYW4gZW50cnkKLy8JCQlsdWNreURvZyA9IFVuZGVyZG9ncy5sZW5ndGggLSAxOwovLwkJfSBlbHNlIHsKCQkJLy8gbm8gZG9ncyB3YWl0aW5nIGluIGxpbmU/ICBhbGwgZGl2aWRlbmRzIHdpbGwgZ28gdG8gdG9wIGRvZyB0aGlzIHJvdW5kCi8vCQkJbHVja3lEb2cgPSAwOwovLwkJfQoJCQoKCQkvLyByZXNldCB1bmRlcmRvZyBtYXJrdXAgZm9yIG5leHQgcm91bmQKCQl1bmRlckRvZ01hcmt1cCA9IDE1MDsKCgkJLy8gaG93IG1hbnkgZG9ncyBhcmUgd2FpdGluZz8KCQl1aW50IGxpbmVsZW5ndGggPSBVbmRlcmRvZ3MubGVuZ3RoIC0gcGF5b3V0SW5kZXg7CgoJCS8vIHN1cnBsdXMgZ29lcyB0byBwYXkgc2NyYXBzIHRvIHJhbmRvbSB1bmRlcmRvZ3MKCQkvLyBjYWxjdWxhdGUgYW5kIHBheSBzY3JhcHMKCgoJCS8vIGFyZSB0aGVyZSB1bmRlcmRvZ3MgYXJvdW5kIHRvIHJlY2VpdmUgdGhlIHNjcmFwcz8KCQlpZiAoc3VycGx1cyA+IDAgJiYgbGluZWxlbmd0aCA+IDAgKSB7CgkJCXRocm93U2NyYXBzKHN1cnBsdXMpOwoJCX0KCgoJCS8vIGlmIHRoZXJlIGFyZSBhbnkgdW5kZXJkb2dzIGluIGxpbmUsIHRoZSBsdWNreSBkb2cgd2lsbCBiZSBwaWNrZWQgZnJvbSBhbW9uZyB0aGVtCQoJCWlmIChsaW5lbGVuZ3RoID4gMCkgewoKCQkJLy8gcmFuZG9tbHkgcGljayBhIG5ldyBsdWNreSBkb2csIHdpdGggbHVjayB3ZWlnaHRlZCB0b3dhcmQgbW9yZSByZWNlbnQgZW50cmllcwoKCQkJLy8gd2VpZ2h0aW5nIHdvcmtzIGxpa2UgdGhpczoKCQkJLy8gCUZvciBleGFtcGxlLCBpZiB0aGUgbGluZSBsZW5ndGggaXMgNiwgdGhlIG1vc3QgcmVjZW50IGVudHJ5IHdpbGwKCQkJLy8JYmUgNiB0aW1lcyBtb3JlIGxpa2VseSB0aGFuIHRoZSBvbGRlc3QgKDYvMjEgb2RkcyksCgkJCS8vCXRoZSBzZWNvbmQgbW9zdCByZWNlbnQgd2lsbCBiZSA1IHRpbWVzIG1vcmUgbGlrZWx5IHRoYW4gdGhlIG9sZGVzdCAoNS8yMSBvZGRzKQoJCQkvLwl0aGUgdGhpcmQgbW9zdCByZWNlbnQgd2lsbCBiZSA0IHRpbWVzIGFzIGxpa2VseSBhcyB0aGUgb2xkZXN0ICg0LzIxIG9kZHMpLAoJCQkvLwlldGMuLi4KCgkJCS8vCW9mIGNvdXJzZSwgdGhlIHBsYXllciB0aGF0IGhhcyBiZWVuIGluIGxpbmUgbG9uZ2VzdCBpcwoJCQkvLwlsZWFzdCBsaWtlbHkgdG8gYmUgbHVja3kgKDEvMjEgb2RkcyBpbiB0aGlzIGV4YW1wbGUpCgkJCS8vCWFuZCB3aWxsIGJlIGdldHRpbmcgc2VudCBvdXQgb2YgdGhlIGdhbWUgc29vbmVzdCBhbnl3YXkKCgkJCXVpbnQgbHVja3lwaWNrbGluZSA9IChsaW5lbGVuZ3RoICUgMiA9PSAxKSA/CgkJCQkoIGxpbmVsZW5ndGggLyAyICsgMSApICsgKGxpbmVsZW5ndGggKyAxKSAqIChsaW5lbGVuZ3RoIC8gMikgOiAgLy8gb2RkCgkJCQkoIChsaW5lbGVuZ3RoICsgMSkgKiAobGluZWxlbmd0aCAvIDIpICApOyAvLyBldmVuCgoJCQl1aW50IGx1Y2t5cGljayA9IHJhbmRJbnQobHVja3lwaWNrbGluZSwgNjkpOwoJCgkJCXVpbnQgcGlja3BvcyA9IGx1Y2t5cGlja2xpbmUgLSBsaW5lbGVuZ3RoOwoJCQl1aW50IGxpbmVwb3MgPSAxOwoKCQkJd2hpbGUgKHBpY2twb3MgPj0gbHVja3lwaWNrICYmIGxpbmVwb3MgPCBsaW5lbGVuZ3RoKSB7CgkJCQlwaWNrcG9zIC09IChsaW5lbGVuZ3RoIC0gbGluZXBvcyk7CgkJCQlsaW5lcG9zKys7CgkJCX0KCgkJCWx1Y2t5RG9nID0gVW5kZXJkb2dzLmxlbmd0aCAtIGxpbmVwb3M7CgkJfSBlbHNlIHsKCQkJLy8gbm8gdW5kZXJkb2dzIGluIGxpbmU/ICBubyBsdWNreSBkb2cgdGhpcyByb3VuZC4KCQkJLy8gKHNob3VsZCBvbmx5IHBvc3NpYmx5IGhhcHBlbiB3aGVuIGdhbWUgc3RhcnRzKQoJCQlsdWNreURvZyA9IDA7CgkJfQoJCQoKCQkvLyB0aGUgbmV3IHRvcCBkb2cgaXMgY3Jvd25lZCEKCQl0b3BEb2cgPSBtc2cuc2VuZGVyOwoJfQoKCWZ1bmN0aW9uIHRocm93U2NyYXBzKHVpbnQgdG90YWxzY3JhcHZhbHVlKSBwcml2YXRlIHsKCgkJLy8gaG93IG1hbnkgZG9ncyBhcmUgd2FpdGluZz8KCQl1aW50IGxpbmVsZW5ndGggPSBVbmRlcmRvZ3MubGVuZ3RoIC0gcGF5b3V0SW5kZXg7CgoJCS8vIHRvIGtlZXAgZnJvbSBoYXZpbmcgdG9vIG1hbnkgdHJhbnNhY3Rpb25zLCBtYWtlIHN1cmUgd2UgbmV2ZXIgaGF2ZSBtb3JlIHRoYW4gNyBzY3JhcHMuCgkJLy8gdGhlIG1vcmUgZG9ncyBpbiBsaW5lLCB0aGUgbW9yZSB3ZSBqdW1wIG92ZXIgd2hlbiBzY3JhcHMgZ2V0IHNjYXR0ZXJlZAoJCXVpbnQgc2tpcHN0ZXAgPSAobGluZWxlbmd0aCAvIDcpICsgMTsKCgkJLy8gaG93IG1hbnkgcGllY2VzIHRvIGRpdmlkZSAocm91Z2hseSwgcmFuZG9taXphdGlvbiBtaWdodCBtYWtlIGl0IG1vcmUgb3IgbGVzcykKCQl1aW50IHBpZWNlcyA9IGxpbmVsZW5ndGggLyBza2lwc3RlcDsKCgkJLy8gaG93IGZhciBmcm9tIHRoZSBlbmQgb2YgdGhlIHF1ZXVlIHRvIHN0YXJ0IHRocm93aW5nIHRoZSBmaXJzdCBzY3JhcCAoc2VtaS1yYW5kb20pCgkJdWludCBzdGFydG9mZnNldCA9IHJhbmRJbnQoc2tpcHN0ZXAsIDQyKSAtIDE7CgoJCS8vIGJhc2Ugc2l6ZSBmb3Igc2NyYXBzLi4uICAKCQl1aW50IHNjcmFwYmFzZXNpemUgPSB0b3RhbHNjcmFwdmFsdWUgLyAocGllY2VzICsgcGF5b3V0Q291bnQpOwoKCQkvLyBtaW5pbXVtIGJhc2Ugc2NyYXAgc2l6ZSBvZiAwLjUgZXRoCgkJaWYgKHNjcmFwYmFzZXNpemUgPCA1MDAgZmlubmV5KSB7CgkJCXNjcmFwYmFzZXNpemUgPSA1MDAgZmlubmV5OwoJCX0KCgkJdWludCBzY3JhcHNpemU7CgkJdWludCBzcHRyID0gVW5kZXJkb2dzLmxlbmd0aCAtIDEgLSBzdGFydG9mZnNldDsKCgkJdWludCBzY3JhcHZhbHVlbGVmdCA9IHRvdGFsc2NyYXB2YWx1ZTsKCgkJd2hpbGUgKHBpZWNlcyA+IDAgJiYgc2NyYXB2YWx1ZWxlZnQgPiAwICYmIHNwdHIgPj0gcGF5b3V0SW5kZXgpIHsKCQkJLy8gdGhvc2Ugd2hvIGJhaWxlZCBvdXQgb3RoZXIgZG9ncyBnZXQgYmlnZ2VyIHNjcmFwcwoJCQkvLyBzaXplIG9mIHRoZSBzY3JhcCBpcyBtdWx0aXBsaWVkIGJ5ICMgb2Ygb3RoZXIgZG9ncyB0aGUgdXNlciBiYWlsZWQgb3V0CgkJCXNjcmFwc2l6ZSA9IHNjcmFwYmFzZXNpemUgKiAoVW5kZXJkb2dzW3NwdHJdLmJhaWxvdXRzICsgMSk7CgoKCQkJLy8gc2NyYXBzIGNhbiBuZXZlciBiZSBtb3JlIHRoYW4gd2hhdCdzIGluIHRoZSBwaWxlCgkJCWlmIChzY3JhcHNpemUgPCBzY3JhcHZhbHVlbGVmdCkgewoJCQkJc2NyYXB2YWx1ZWxlZnQgLT0gc2NyYXBzaXplOwoJCQl9IGVsc2UgewoJCQkJc2NyYXBzaXplID0gc2NyYXB2YWx1ZWxlZnQ7CgkJCQlzY3JhcHZhbHVlbGVmdCA9IDA7CgkJCX0KCgkJCS8vIHBheSBpdAoJCQlVbmRlcmRvZ3Nbc3B0cl0uYWRkci5zZW5kKHNjcmFwc2l6ZSk7CgkJCXBpZWNlcy0tOwoJCQlzcHRyIC09IHNraXBzdGVwOwoJCX0KCgkJLy8gYW55IHNjcmFwcyBsZWZ0IHVuY2F1Z2h0PyBwdXQgdGhlbSBpbiB0aGUgYmFpbG91dCBmdW5kIGZvciB0aGUgdW5kZXJkb2dzCgkJaWYgKHNjcmFwdmFsdWVsZWZ0ID4gMCkgewoJCQliYWlsb3V0QmFsYW5jZSArPSBzY3JhcHZhbHVlbGVmdDsKCQl9Cgl9CgoJZnVuY3Rpb24gZ2V0RG9nTmFtZShhZGRyZXNzIGFkcikgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgdGhlbmFtZSkgewoJCWlmIChieXRlcyhkb2dOYW1lc1thZHJdKS5sZW5ndGggPiAwKQoJCQl0aGVuYW1lID0gZG9nTmFtZXNbYWRyXTsKCQllbHNlCgkJCXRoZW5hbWUgPSAnVW5uYW1lZCBNdXR0JzsKCX0KCQoJLy8gR2VuZXJhdGUgcHNldWRvIHNlbWktcmFuZG9tIG51bWJlciBiZXR3ZWVuIDEgLSBtYXggCglmdW5jdGlvbiByYW5kSW50KHVpbnQgbWF4LCB1aW50IHNlZWRzd2l0Y2gpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyAodWludCByYW5kb21OdW1iZXIpIHsKCQlyZXR1cm4oIHVpbnQoc2hhMyhibG9jay5ibG9ja2hhc2goYmxvY2subnVtYmVyLTEpLCBibG9jay50aW1lc3RhbXAgKyBzZWVkc3dpdGNoKSApICUgbWF4ICsgMSApOwoJfQp9'.
	

]
