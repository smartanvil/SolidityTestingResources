Class {
	#name : #SRT5bf81303CFcaf70cc12214FaeA3554C5a21EaC89,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5bf81303CFcaf70cc12214FaeA3554C5a21EaC89 >> base64 [
	^ 'Y29udHJhY3QgQVJLCnsKICAgICAgIAogICAgYWRkcmVzcyBvd25lcjsKICAgIGFkZHJlc3MgY29udHJvbGxlcjsKICAgIGJvb2wgbXV0ZTsKICAgIHN0cmluZ1tdIGNvbXBhbmllczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgY29tcGFueUluZGV4OwogICAgYWRkcmVzc1tdIGNvbXBhbnlXYWxsZXQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogICAgbWFwcGluZyAodWludCA9PiBCb3QpICBib3RzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50W10pICBib3RPd25lcnM7ICAgICAgCiAgICBtYXBwaW5nICh1aW50ID0+IE1hcmtldEJpbGwpICBNYXJrZXRCaWxsczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludFtdKSAgQnV5ZXJzQmlsbHM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnRbXSkgIFNlbGxlcnNCaWxsczsKICAgIG1hcHBpbmcgKHVpbnQgPT4gU3RhdHMpICBjeWNsZTsKICAgIHVpbnRbXSAgbGFzdFByaWNlOwogICAgdWludCB0b3RDb21wYW5pZXM7CgogICAgbG9nW10gbG9nczsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIFRPUzsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBiYW47CiAgICB1aW50WzIwXSAgbGlzdGVkOyAgCiAgICB1aW50IGNvaW5JbmRleDsgICAgICAKICAgIG1hcHBpbmcgKHVpbnQgPT4gQ29pbikgY29pbnM7CiAgICBtYXBwaW5nICh1aW50ID0+IENvaW4pIHRyYXNoOwogICAgQVJLQ29udHJvbGxlcl8xXzAwIGNvbnRyb2w7CgogICAgc3RydWN0IGxvZ3sKICAgIGFkZHJlc3MgYWRtaW47CiAgICBzdHJpbmcgYWN0aW9uOwogICAgYWRkcmVzcyBhZGRyOwogICAgfQoKICAgIHN0cnVjdCBNYXJrZXRCaWxsIHsKICAgIHVpbnQgc2VsbGVyZGF0YTsKICAgIHVpbnQgYnV5ZXJkYXRhOwogICAgdWludCBwcm9kdWN0OwogICAgdWludCBpbmRleDsKICAgIHVpbnQgY29zdDsKICAgIHVpbnQgYmxvY2s7CiAgICB9CiAgICAKICAgIHN0cnVjdCBDb2luIHsKICAgIGFkZHJlc3MgY29pbk93bmVyOwogICAgc3RyaW5nIGRhdGE7CiAgICBzdHJpbmcgbWluZTsgICAgICAKICAgIHVpbnQgY29pblR5cGU7CiAgICB1aW50IHBsYXRmOwogICAgc3RyaW5nIGFkdjsKICAgIHVpbnQgYmxvY2s7CiAgICB9CiAgCiAgICBzdHJ1Y3QgQm90IHsKICAgIGFkZHJlc3Mgb3duZXI7CiAgICBzdHJpbmcgaW5mbzsgICAgICAgICAgICAgIAogICAgdWludCBjb3N0OwogICAgdWludCBuYmlsbHM7IAogICAgbWFwcGluZyAodWludCA9PiB1aW50KSBiaWxsczsKICAgIG1hcHBpbmcgKHVpbnQgPT4gdWludCkgc2FsZXM7CiAgICB9CgoKICAgIG1hcHBpbmcgKHVpbnQgPT4gdWludCkgIGhhZHY7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpICBtaW5lcjsKCiAgICB1aW50IHRvdEJPVFM7CiAgICB1aW50IHNlbGxpbmc7CiAgICB1aW50IG5NYmlsbHM7CiAgICB1aW50IHRvdGFsOwogICAgdWludCBjbGFpbWVkOwogICAgdWludCBib3VudHk7CiAgIAogICAgc3RydWN0IFN0YXRzewogICAgdWludCBzb2xkOwogICAgdWludCBjdXJyZW50U2VsbGVyOwogICAgfQoKICAgICAgICAgICAKICAgICAgICBmdW5jdGlvbiBBUksoKSB7b3duZXI9bXNnLnNlbmRlcjt9ICAgICAgICAKCiAgICAgICAgZnVuY3Rpb24gaW5pdFN0YXRzKHN0cmluZyBzdHIsYWRkcmVzcyBhZCx1aW50IGEpewoKICAgICAgICAgICBpZihtc2cuc2VuZGVyPT1vd25lcil7CiAgICAgICAgICAgCiAgICAgICAgICAgICAgaWYoY29tcGFuaWVzLmxlbmd0aD09MCl7CgogICAgICAgICAgICAgICAgIGNvaW5JbmRleD0wOwogICAgICAgICAgICAgICAgIHRvdEJPVFM9MTAwMDA7CiAgICAgICAgICAgICAgICAgc2VsbGluZz0xOwogICAgICAgICAgICAgICAgIGNsYWltZWQ9MDsgICAgICAgCiAgICAgICAgICAgICAgICAgbk1iaWxscz0xOwogICAgICAgICAgICAgICAgIHRvdGFsPTA7CiAgICAgICAgICAgICAgICAgYm91bnR5PTI1MDA7CiAgICAgICAgICAgICAgICAgbXV0ZT1mYWxzZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIGZvcih1aW50IHo9MDt6PDIwO3orKyl7ICAgICAgCiAgICAgICAgICAgICAgICAgICAgY3ljbGVbel09U3RhdHMoe3NvbGQ6MCxjdXJyZW50U2VsbGVyOjF9KTsgICAKICAgICAgICAgICAgICAgICAgICBpZih6PDcpe2xhc3RQcmljZS5wdXNoKGEpO30KICAgICAgICAgICAgICAgICAgICBsaXN0ZWRbel09MDsgICAgICAgIAogICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgICBjb21wYW55SW5kZXhbbXNnLnNlbmRlcl09MTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgaWYoY29tcGFuaWVzLmxlbmd0aDwyKXsKICAgICAgICAgICAgICAgICBjb21wYW5pZXMucHVzaChzdHIpOwogICAgICAgICAgICAgICAgIGNvbXBhbnlXYWxsZXQucHVzaChhZCk7CiAgICAgICAgICAgICAgfWVsc2V7aWYoYWQ9PW93bmVyKWNvbXBhbmllc1swXT1zdHI7fQogICAgICAgICAgICAgIAogICAgICAgICAgICAgIGlmKGE9PTMzMyl7b3duZXI9YWQ7bG9ncy5wdXNoKGxvZyhvd25lciwic2V0T3duZXIiLGFkKSk7fSAgICAgICAgICAgICAgCiAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgICAgIAogCgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNvaW4oc3RyaW5nIGRhdCx1aW50IHR5cCx1aW50IHBsdGYsc3RyaW5nIG1pbixzdHJpbmcgYnV5ZXJCaWxsLGFkZHJlc3Mgb3duKSByZXR1cm5zKGJvb2wpewogICAgICAgIGNvaW5JbmRleCsrOwogICAgICAgIGNvaW5zW2NvaW5JbmRleF09IENvaW4oe2NvaW5Pd25lciA6IG93bixkYXRhIDogZGF0LG1pbmUgOiBtaW4sY29pblR5cGUgOiB0eXAscGxhdGY6IHBsdGYsYWR2IDogIiIsYmxvY2sgOiBibG9jay5udW1iZXJ9KTsKICAgICAgICAKICAgICAgICBsaXN0ZWRbdHlwXSsrOwogICAgICAgIGxpc3RlZFtwbHRmXSsrOwoKICAgICAgICBhZG1pbmlzdHJhdGlvbigyLGJ1eWVyQmlsbCxjb2luSW5kZXgsbGFzdFByaWNlWzJdLG1zZy5zZW5kZXIpOwogICAgICAgIGNvbnRyb2wucHVzaENvaW4oY29pbkluZGV4LG93bixkYXQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgCiAgICAgICAgZnVuY3Rpb24gdXBkdCh1aW50IGksc3RyaW5nIGRhdGEsdWludCB0eXAsdWludCBwbHRmLHN0cmluZyBtaW4sc3RyaW5nIGJ1eWVyQmlsbCxhZGRyZXNzIG93bikgIHJldHVybnMoYm9vbCl7CiAgICAgICAgaWYoY29pbnNbaV0uY29pbk93bmVyIT1tc2cuc2VuZGVyKXRocm93OyAgICAgICAgICAKICAgICAgICBjb2luc1tpXS5kYXRhPWRhdGE7CiAgICAgICAgY29pbnNbaV0uY29pblR5cGU9dHlwOwogICAgICAgIGNvaW5zW2ldLnBsYXRmPXBsdGY7CiAgICAgICAgY29pbnNbaV0ubWluZT1taW47CiAgICAgICAgY29pbnNbaV0uY29pbk93bmVyPW93bjsKICAgICAgICBhZG1pbmlzdHJhdGlvbigzLGJ1eWVyQmlsbCxpLGxhc3RQcmljZVszXSxtc2cuc2VuZGVyKTsKICAgICAgICByZXR1cm4gdHJ1ZTsgICAgICAgIAogICAgICAgIH0KICAgCgoKICAgICAgICBmdW5jdGlvbiBzZXRBZHYodWludCBpLHN0cmluZyBkYXRhLHN0cmluZyBidXllckJpbGwpIHJldHVybnMoYm9vbCl7ICAgICAgICAKICAgICAgICBjb2luc1tpXS5hZHY9ZGF0YTsgICAKICAgICAgICBhZG1pbmlzdHJhdGlvbig0LGJ1eWVyQmlsbCxpLGxhc3RQcmljZVs0XSxtc2cuc2VuZGVyKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgIAogICAgICAgIGZ1bmN0aW9uIHNldEhvbWVBZHYodWludCBpLHN0cmluZyBidXllckJpbGwpIHJldHVybnMoYm9vbCl7ICAgICAgIAogICAgICAgIGhhZHZbY3ljbGVbNV0uc29sZF09aTsKICAgICAgICBhZG1pbmlzdHJhdGlvbig1LGJ1eWVyQmlsbCxpLGxhc3RQcmljZVs1XSxtc2cuc2VuZGVyKTsgIAogICAgICAgIHJldHVybiB0cnVlOyAgICAgICAgIAogICAgICAgIH0KICAgICAgCiAgICAgICAgZnVuY3Rpb24gYWRtaW5pc3RyYXRpb24odWludCB0aXBvLHN0cmluZyBidXllckJpbGwsdWludCBpbmRleCx1aW50IGMsYWRkcmVzcyBvd24pIHByaXZhdGV7CiAgICAgICAKICAgICAgICAgICAgICAgIGlmKCEoY29tcGFueUluZGV4W293bl0+MCkpcmVnaXN0ZXJDb21wYW55KG93bixidXllckJpbGwpOwogICAgICAgICAgICAgICAgdWludCB1PWN5Y2xlW3RpcG9dLmN1cnJlbnRTZWxsZXI7CiAgICAgICAgICAgICAgICBpZighYmFuW293bl0pe2JhbGFuY2VzW2JvdHNbdV0ub3duZXJdKz1jO31lbHNle2JhbGFuY2VzW293bmVyXSs9Yzt9CiAgICAgICAgICAgICAgICBiYWxhbmNlc1tvd25dKz1tc2cudmFsdWUtYzsKICAgICAgICAgICAgICAgIHJlZ2lzdGVyQmlsbCh1LGJvdHNbdV0ub3duZXIsb3duLHRpcG8saW5kZXgsYyk7ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICB9CgoKICAgICAgICBmdW5jdGlvbiBzZXRCb3VudHkoYWRkcmVzcyBhLHN0cmluZyBkYXRhLHVpbnQgYW1vdW50KXsKICAgICAgICAgICBpZigobXNnLnNlbmRlcj09b3duZXIpJiYoYm91bnR5PmFtb3VudCkpewogICAgICAgICAgICAgIGZvcih1aW50IGo9MDtqPGFtb3VudDtqKyspewogICAgICAgICAgICAgIGJvdHNbc2VsbGluZ10gPSBCb3QoYSwiIiwwLDApOwogICAgICAgICAgICAgIGJvdE93bmVyc1thXS5wdXNoKHNlbGxpbmcpOwogICAgICAgICAgICAgIHJlZ2lzdGVyQ29tcGFueShhLGRhdGEpOwogICAgICAgICAgICAgIHRvdEJPVFMrKzsKICAgICAgICAgICAgICBzZWxsaW5nKys7CiAgICAgICAgICAgICAgYm91bnR5LS07CiAgICAgICAgICAgICAgfQogICAgICAgICAgIH0KICAgICAgICB9CgoKICAgICAgICBmdW5jdGlvbiBib3RPblNhbGUodWludCBpLHVpbnQgYykge2lmKChtc2cuc2VuZGVyIT1ib3RzW2ldLm93bmVyKXx8KHNlbGxpbmc8PXRvdEJPVFMpfHwoIVRPU1ttc2cuc2VuZGVyXSkpdGhyb3c7Ym90c1tpXS5jb3N0PWM7fQoKICAgICAgICAKICAgICAgICBmdW5jdGlvbiBidXlCT1R4KHVpbnQgaSxzdHJpbmcgYnV5ZXJiaWxsLHN0cmluZyBidXllckluZm8sYWRkcmVzcyBidXllcndhbGxldCx1aW50IGFtb3VudCkgcmV0dXJucyAoYm9vbCl7CiAgICAgICAgIGlmKChhbW91bnQ8MSl8fChpPjE1MDAwKXx8KChhbW91bnQ+MSkmJigoc2VsbGluZythbW91bnQrOTk5PnRvdEJPVFMpfHwoc2VsbGluZzw0MDApKSkpdGhyb3c7CiAgICAgICAgCiAgICAgICAgICAgICAgICBhZGRyZXNzIHNlbGxzTm93OwogICAgICAgICAgICAgICAgYWRkcmVzcyBob2xkZXI7CiAgICAgICAgICAgICAgICB1aW50IHNlbGw7CiAgICAgICAgICAgICAgICB1aW50IGN1cnJlbnRTZWxsZXI7CiAgICAgICAgICAgICAgICB1aW50IGM7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmKCEoY29tcGFueUluZGV4W2J1eWVyd2FsbGV0XT4wKSlyZWdpc3RlckNvbXBhbnkoYnV5ZXJ3YWxsZXQsYnV5ZXJiaWxsKTsKCiAgICAgICAgICAgICAgICBpZigobWluZXJbbXNnLnNlbmRlcl0pJiYoY2xhaW1lZDwyNTAwKSl7CiAgICAgICAgICAgICAgICBjdXJyZW50U2VsbGVyPWN5Y2xlWzBdLmN1cnJlbnRTZWxsZXI7CiAgICAgICAgICAgICAgICBzZWxsc05vdz1ib3RzW2N1cnJlbnRTZWxsZXJdLm93bmVyOwogICAgICAgICAgICAgICAgYz1sYXN0UHJpY2VbMF07CiAgICAgICAgICAgICAgICBjbGFpbWVkKys7CiAgICAgICAgICAgICAgICB0b3RCT1RTKys7CiAgICAgICAgICAgICAgICBtaW5lclttc2cuc2VuZGVyXT1mYWxzZTsKICAgICAgICAgICAgICAgIGhvbGRlcj1vd25lcjsKICAgICAgICAgICAgICAgIHNlbGw9c2VsbGluZzsKICAgICAgICAgICAgICAgICAgICAgLy9iYWxhbmNlc1tib3RzW2N1cnJlbnRTZWxsZXJdLm93bmVyXSs9bXNnLnZhbHVlOwogICAgICAgICAgICAgICAgaWYoIWJhbltib3RzW2N1cnJlbnRTZWxsZXJdLm93bmVyXSl7YmFsYW5jZXNbYm90c1tjdXJyZW50U2VsbGVyXS5vd25lcl0rPWM7fWVsc2V7YmFsYW5jZXNbb3duZXJdKz1jO30KICAgICAgICAgICAgICAgICAgICAgLy9iYWxhbmNlc1tib3RzW2N1cnJlbnRTZWxsZXJdLm93bmVyXSs9YzsKICAgICAgICAgICAgICAgICAgICAgLy9iYWxhbmNlc1ttc2cuc2VuZGVyXSs9KG1zZy52YWx1ZS1jKTsKICAgICAgICAgICAgICAgIHNlbGxpbmcrKzsKICAgICAgICAgICAgICAgIGJvdHNbc2VsbF0gPSBCb3QoYnV5ZXJ3YWxsZXQsYnV5ZXJJbmZvLDAsMCk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKCiAgICAgICAgICAgICAgICBpZihzZWxsaW5nPnRvdEJPVFMpewogICAgICAgICAgICAgICAgaWYoYm90c1tpXS5jb3N0PT0wKXRocm93OwogICAgICAgICAgICAgICAgY3VycmVudFNlbGxlcj1jeWNsZVswXS5jdXJyZW50U2VsbGVyOwogICAgICAgICAgICAgICAgc2VsbHNOb3c9Ym90c1tjdXJyZW50U2VsbGVyXS5vd25lcjsKICAgICAgICAgICAgICAgIGhvbGRlcj1ib3RzW2ldLm93bmVyOwogICAgICAgICAgICAgICAgc2VsbD1pOwogICAgICAgICAgICAgICAgYz1ib3RzW2ldLmNvc3QrbGFzdFByaWNlWzBdOwogICAgICAgICAgICAgICAgbW92ZShpLGJ1eWVyd2FsbGV0KTsKICAgICAgICAgICAgICAgICAgIAkJICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZighYmFuW3NlbGxzTm93XSl7YmFsYW5jZXNbc2VsbHNOb3ddKz1sYXN0UHJpY2VbMF07fWVsc2V7YmFsYW5jZXNbb3duZXJdKz1sYXN0UHJpY2VbMF07fQogICAgICAgICAKICAgICAgICAgICAgICAgIHJlZ2lzdGVyQmlsbChpLGhvbGRlcixzZWxsc05vdyw2LHNlbGwsYy1sYXN0UHJpY2VbMF0pOyAgICAgICAgICAgICAgICAgICAJCQogICAgICAgICAgICAgICAgbGFzdFByaWNlW2xhc3RQcmljZS5sZW5ndGgrK109Yy1sYXN0UHJpY2VbMF07CiAgICAgICAgICAgICAgICAgICAJCQogICAgICAgICAgICAgICAgfWVsc2V7CgogICAgICAgICAgICAgICAgYz1sYXN0UHJpY2VbNl0qYW1vdW50OwogICAgICAgICAgICAgICAgYmFsYW5jZXNbb3duZXJdKz1tc2cudmFsdWU7IAogICAgICAgICAgICAgICAgY3VycmVudFNlbGxlcj1zZWxsaW5nOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZihhbW91bnQ+MSl7c2VsbD1hbW91bnQrMTAwMDAwO31lbHNle3NlbGw9c2VsbGluZzt9CiAgICAgICAgICAgICAgICBzZWxsc05vdz1vd25lcjsKICAgICAgICAgICAgICAgIGZvcih1aW50IGo9MDtqPGFtb3VudDtqKyspewogICAgICAgICAgICAgICAgYm90c1tzZWxsaW5nK2pdID0gQm90KGJ1eWVyd2FsbGV0LGJ1eWVySW5mbywwLDApOwogICAgICAgICAgICAgICAgYm90T3duZXJzW2J1eWVyd2FsbGV0XS5wdXNoKHNlbGxpbmcraik7CiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgc2VsbGluZys9YW1vdW50OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZihzZWxsc05vdyE9b3duZXIpYm90T3duZXJzW2J1eWVyd2FsbGV0XS5wdXNoKHNlbGwpOwogICAgICAgICAgICAgICAgcmVnaXN0ZXJCaWxsKGN1cnJlbnRTZWxsZXIsc2VsbHNOb3csYnV5ZXJ3YWxsZXQsMCxzZWxsLGMpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgCgogICAgICAgZnVuY3Rpb24gbW92ZSh1aW50IGluZGV4LGFkZHJlc3Mgd2FsbGV0KSBwcml2YXRlIHJldHVybnMgKHVpbnRbXSl7CgogICAgICAgIHVpbnRbXSBsPWJvdE93bmVyc1tib3RzW2luZGV4XS5vd25lcl07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICB1aW50IGxsPWwubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIGZvcih1aW50IGo9MDtqPGxsO2orKyl7CiAgICAgICAgICBpZihsW2pdPT1pbmRleCl7CiAgICAgICAgICAgICAgaWYoajxsbC0xKWxbal09bFtsbC0xXTsKICAgICAgICAgICAgICBkZWxldGUgbFtsbC0xXTtqPWxsOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBib3RPd25lcnNbYm90c1tpbmRleF0ub3duZXJdPWw7CiAgICAgICAgYm90T3duZXJzW2JvdHNbaW5kZXhdLm93bmVyXS5sZW5ndGgtLTsKICAgICAgICBib3RzW2luZGV4XS5vd25lcj13YWxsZXQ7CiAgICAgICAgYm90c1tpbmRleF0uY29zdD0wOwoKICAgICAgICB9CgoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVCT1RCaWxsaW5nSW5mbyh1aW50IGluZGV4LHN0cmluZyBkYXRhLGFkZHJlc3Mgd2FsbGV0LHN0cmluZyBpbmZvLHN0cmluZyBidXllcmJpbGwsdWludCB1cGRhdGV0eXBlKSByZXR1cm5zKGJvb2wpewogICAgICAgICAgICAgICAKICAgICAgICBpZigoaW5kZXg+dG90Qk9UUyl8fChtc2cuc2VuZGVyIT1ib3RzW2luZGV4XS5vd25lcikpdGhyb3c7CiAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHVpbnQgdD0xOwogICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgY3M9Ym90c1tjeWNsZVsxXS5jdXJyZW50U2VsbGVyXS5vd25lcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZihib3RzW2luZGV4XS5vd25lciE9d2FsbGV0KXsKCiAgICAgICAgICAgICAgICAgICAgICAgaWYoIShjb21wYW55SW5kZXhbd2FsbGV0XT4wKSlyZWdpc3RlckNvbXBhbnkod2FsbGV0LGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgIGJvdE93bmVyc1t3YWxsZXRdLnB1c2goaW5kZXgpOyAKICAgICAgICAgICAgICAgICAgICAgICBtb3ZlKGluZGV4LHdhbGxldCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CgogICAgICAgICAgICAgICAgICAgICAgICAgaWYodXBkYXRldHlwZSE9MSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIHQ9Y29tcGFueUluZGV4W21zZy5zZW5kZXJdKzEwMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJDb21wYW55KG1zZy5zZW5kZXIsZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdENvbXBhbmllcy0tOwogICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgIGlmKHVwZGF0ZXR5cGUhPTIpYm90c1tpbmRleF0uaW5mbz1pbmZvOwogICAgICAgICAgICAgICAgIGlmKCFiYW5bY3NdKXtiYWxhbmNlc1tjc10rPWxhc3RQcmljZVsxXTt9ZWxzZXtiYWxhbmNlc1tvd25lcl0rPWxhc3RQcmljZVsxXTt9ICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCaWxsKGN5Y2xlWzFdLmN1cnJlbnRTZWxsZXIsY3MsbXNnLnNlbmRlcix0LGluZGV4LGxhc3RQcmljZVsxXSk7ICAgIAogICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyRXh0ZXJuYWxCaWxsKHVpbnQgYmksYWRkcmVzcyBzZWxsc05vdyxhZGRyZXNzIGJ1eWVyd2FsbGV0LHVpbnQgdGlwbyx1aW50IHNlbGwsdWludCBjKXsKICAgICAgICBpZihtc2cuc2VuZGVyIT1jb250cm9sbGVyKXRocm93OwogICAgICAgIHJlZ2lzdGVyQmlsbChiaSxzZWxsc05vdyxidXllcndhbGxldCx0aXBvLHNlbGwsYyk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZWdpc3RlckJpbGwodWludCBiaSxhZGRyZXNzIHNlbGxzTm93LGFkZHJlc3MgYnV5ZXJ3YWxsZXQsdWludCB0aXBvLHVpbnQgc2VsbCx1aW50IGMpIHByaXZhdGV7CiAgICAgICAgIAogICAgICAgICBpZigobXNnLnZhbHVlPGMpfHwobXV0ZSl8fCghVE9TW2J1eWVyd2FsbGV0XSkpdGhyb3c7CiAgICAgICAgIEJvdCBiPWJvdHNbYmldOwogICAgICAgICB1aW50IHNlbGxlckluZGV4O3VpbnQgYnV5ZXJJbmRleDsKICAgICAgICAgaWYodGlwbz4xMDApe3NlbGxlckluZGV4PXRpcG8tMTAwO2J1eWVySW5kZXg9c2VsbGVySW5kZXg7dGlwbz0xO31lbHNle3NlbGxlckluZGV4PWNvbXBhbnlJbmRleFtzZWxsc05vd107YnV5ZXJJbmRleD1jb21wYW55SW5kZXhbYnV5ZXJ3YWxsZXRdO30KICAgICAgICAKICAgICAgICAgIE1hcmtldEJpbGxzW25NYmlsbHNdPU1hcmtldEJpbGwoc2VsbGVySW5kZXgsYnV5ZXJJbmRleCx0aXBvLHNlbGwsYyxibG9jay5udW1iZXIpOwogICAgICAgCiAgICAgICAgICAgICAgICBiLmJpbGxzW2IubmJpbGxzKzFdPW5NYmlsbHM7CiAgICAgICAgICAgICAgICBiLm5iaWxscysrOwogICAgICAgICAgICAgICAgYi5zYWxlc1t0aXBvXSsrOyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIEJ1eWVyc0JpbGxzW2J1eWVyd2FsbGV0XVtCdXllcnNCaWxsc1tidXllcndhbGxldF0ubGVuZ3RoKytdPW5NYmlsbHM7CiAgICAgICAgICAgICAgICBTZWxsZXJzQmlsbHNbc2VsbHNOb3ddW1NlbGxlcnNCaWxsc1tzZWxsc05vd10ubGVuZ3RoKytdPW5NYmlsbHM7CiAgICAgICAgICAgICAgICBuTWJpbGxzKys7CiAgICAgICAgICAgICAgICBpZihzZWxsc05vdyE9b3duZXIpewogICAgICAgICAgICAgICAgdG90YWwrPWM7CiAgICAgICAgICAgICAgICBpZih0aXBvIT02KXsKICAgICAgICAgICAgICAgIGN5Y2xlW3RpcG9dLnNvbGQrKzsKICAgICAgICAgICAgICAgIGN5Y2xlW3RpcG9dLmN1cnJlbnRTZWxsZXIrKzsKICAgICAgICAgICAgICAgIGlmKChjeWNsZVt0aXBvXS5jdXJyZW50U2VsbGVyPnRvdEJPVFMpfHwoY3ljbGVbdGlwb10uY3VycmVudFNlbGxlcj49c2VsbGluZykpY3ljbGVbdGlwb10uY3VycmVudFNlbGxlcj0xO30KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGNsYWltZWQ8PTI1MDApbWluZXJbYmxvY2suY29pbmJhc2VdPXRydWU7CiAgICAgICAgfQoKICAgCiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJDb21wYW55KGFkZHJlc3Mgd2FsLHN0cmluZyBkYXRhKSBwcml2YXRleyAgICAgICAgCiAgICAgICAgY29tcGFueVdhbGxldFtjb21wYW55V2FsbGV0Lmxlbmd0aCsrXT13YWw7CiAgICAgICAgY29tcGFueUluZGV4W3dhbF09Y29tcGFuaWVzLmxlbmd0aDsKICAgICAgICBjb21wYW5pZXNbY29tcGFuaWVzLmxlbmd0aCsrXT1kYXRhOwogICAgICAgIHRvdENvbXBhbmllcysrOwogICAgICAgIH0KICAKICAgICAgICAKICAgICAgICBmdW5jdGlvbiBtdXRlTWUoYm9vbCBtKXsKICAgICAgICBpZigobXNnLnNlbmRlcj09b3duZXIpfHwobXNnLnNlbmRlcj09Y29udHJvbGxlcikpbXV0ZT1tOwogICAgICAgIH0KICAgICAgICAgICAKICAgICAKICAgICAgICBmdW5jdGlvbiB0b3RCT1RzKCkgY29uc3RhbnQgcmV0dXJucyh1aW50LHVpbnQsdWludCx1aW50LHVpbnQpIHtyZXR1cm4gICh0b3RCT1RTLGNsYWltZWQsc2VsbGluZyxjb21wYW5pZXMubGVuZ3RoLHRvdENvbXBhbmllcyk7IH0KICAgICAgCgogICAgICAgIGZ1bmN0aW9uIGdldEJvdEJpbGxpbmdJbmRleCh1aW50IGksdWludCBiaSkgIGNvbnN0YW50IHJldHVybnMgKHVpbnQpewogICAgICAgIHJldHVybiBib3RzW2ldLmJpbGxzW2JpXTsKICAgICAgICB9CgogICAgICAgICAgICAKICAgICAgICBmdW5jdGlvbiBnZXRCaWxsKHVpbnQgaSx1aW50IGJpKWNvbnN0YW50IHJldHVybnModWludCx1aW50LHVpbnQsdWludCx1aW50LHVpbnQpewogICAgICAgIE1hcmtldEJpbGwgYj1NYXJrZXRCaWxsc1tpXTsKICAgICAgICByZXR1cm4gKGIuc2VsbGVyZGF0YSxiLmJ1eWVyZGF0YSxiLnByb2R1Y3QsYi5pbmRleCxiLmNvc3QsYi5ibG9jayk7CiAgICAgICAgfQogICAgICAgIAoKICAgICAgICBmdW5jdGlvbiBnZXROZXh0U2VsbGVyQk9UZGF0YSh1aW50IGN5YykgY29uc3RhbnQgcmV0dXJucyAodWludCx1aW50LHN0cmluZyl7cmV0dXJuIChjeWNsZVtjeWNdLmN1cnJlbnRTZWxsZXIsY3ljbGVbY3ljXS5zb2xkLGNvbXBhbmllc1tjb21wYW55SW5kZXhbYm90c1tjeWNsZVtjeWNdLmN1cnJlbnRTZWxsZXJdLm93bmVyXV0pO30KICAgCiAgICAgICAgZnVuY3Rpb24gZ2V0Qm90KHVpbnQgaSkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyxzdHJpbmcsdWludCx1aW50KXsKICAgICAgICBCb3QgQj1ib3RzW2ldOwogICAgICAgIHJldHVybiAoQi5vd25lcixCLmluZm8sQi5jb3N0LEIubmJpbGxzKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldE93bmVkQm90KGFkZHJlc3Mgb3duLHVpbnQgYmluZGV4KSBjb25zdGFudCByZXR1cm5zKHVpbnQpe3JldHVybiBib3RPd25lcnNbb3duXVtiaW5kZXhdO30KICAgICAgCiAgCiAgICAgICAgZnVuY3Rpb24gZ2V0Qm90U3RhdHModWludCBpLHVpbnQgaikgY29uc3RhbnQgcmV0dXJucyAodWludCl7CiAgICAgICAgQm90IEI9Ym90c1tpXTsKICAgICAgICByZXR1cm4gQi5zYWxlc1tqXTt9CgoKICAgICAgICBmdW5jdGlvbiBnZXRGdWxsQ29tcGFueShhZGRyZXNzIHcsdWludCBpKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcsdWludCxib29sLHVpbnQsdWludCxzdHJpbmcsYWRkcmVzcyl7cmV0dXJuIChjb21wYW5pZXNbY29tcGFueUluZGV4W3ddXSxib3RPd25lcnNbd10ubGVuZ3RoLG1pbmVyW3ddLGJhbGFuY2VzW3ddLHRoaXMuYmFsYW5jZSxjb21wYW5pZXNbaV0sY29tcGFueVdhbGxldFtpXSk7fQoKCiAgICAgICAgZnVuY3Rpb24gZ2V0QWN0b3JCaWxsWGRldGFpbChhZGRyZXNzIHcsdWludCBpLGJvb2wgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50LHVpbnQpe2lmKHdobyl7cmV0dXJuIChTZWxsZXJzQmlsbHNbd11baV0sU2VsbGVyc0JpbGxzW3ddLmxlbmd0aCk7fWVsc2V7cmV0dXJuIChCdXllcnNCaWxsc1t3XVtpXSxCdXllcnNCaWxsc1t3XS5sZW5ndGgpO319CgogIAogICAgICAgIGZ1bmN0aW9uIGdldEhvbWVhZHZJbmRleCh1aW50IGluZCkgY29uc3RhbnQgcmV0dXJucyAodWludCl7cmV0dXJuIGhhZHZbaW5kXTt9CgogICAgICAgIGZ1bmN0aW9uIGdldExhc3RQcmljZSh1aW50IGkpIGNvbnN0YW50IHJldHVybnMgKHVpbnQsdWludCx1aW50LHVpbnQsdWludCl7cmV0dXJuIChsYXN0UHJpY2VbaV0sbGFzdFByaWNlW2xhc3RQcmljZS5sZW5ndGgtMV0sc2VsbGluZyxuTWJpbGxzLHRvdGFsKTt9CgogICAgICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHNldENvbnRyb2xsZXIoYWRkcmVzcyBhKSByZXR1cm5zKGJvb2wpe2lmKG1zZy5zZW5kZXIhPW93bmVyKXRocm93O2NvbnRyb2xsZXI9YTtjb250cm9sPUFSS0NvbnRyb2xsZXJfMV8wMChhKTtsb2dzLnB1c2gobG9nKG93bmVyLCJzZXRDZW5zb3JlciIsYSkpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVhZExvZyh1aW50IGkpY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzLHN0cmluZyxhZGRyZXNzKXtsb2cgbD1sb2dzW2ldO3JldHVybihsLmFkbWluLGwuYWN0aW9uLGwuYWRkcik7fQogICAgCgogICAgICAgIGZ1bmN0aW9uIGNlbnNvcnNoaXAodWludCBpLGJvb2wgYixib29sIGMpIHJldHVybnMoYm9vbCl7CiAgICAgICAgaWYobXNnLnNlbmRlciE9Y29udHJvbGxlcil0aHJvdzsKICAgICAgICBpZihjKXtjb2luc1tpXT1Db2luKHtjb2luT3duZXIgOiAweDAsZGF0YSA6ICJDZW5zb3JlZCIsbWluZSA6ICIiLGNvaW5UeXBlIDogMCxwbGF0ZjogMCxhZHYgOiAiIixibG9jayA6IDB9KTt9ZWxzZXsKICAgICAgICBpZihiKXsKICAgICAgICB0cmFzaFtpXT1jb2luc1tpXTsKICAgICAgICBjb2luc1tpXT1Db2luKHtjb2luT3duZXIgOiAweDAsZGF0YSA6ICJDZW5zb3JlZCIsbWluZSA6ICIiLGNvaW5UeXBlIDogMCxwbGF0ZjogMCxhZHYgOiAiIixibG9jayA6IDB9KTsKICAgICAgICB9ZWxzZXsKICAgICAgICBjb2luc1tpXT10cmFzaFtpXTsKICAgICAgICB9fQogICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIHNldFByaWNlKHVpbnQgaSx1aW50IGopIHJldHVybnMoYm9vbCl7aWYobXNnLnNlbmRlciE9Y29udHJvbGxlcil0aHJvdztpZihpPDcpbGFzdFByaWNlW2ldPWo7IHJldHVybiB0cnVlO30gICAKICAgICAgICAgCgogICAgICAgIGZ1bmN0aW9uIGFjY2VwdFRPUyhhZGRyZXNzIGEsYm9vbCBiKSAgcmV0dXJucyhib29sKXsKICAgICAgICBpZihiKWlmKCFiYW5bbXNnLnNlbmRlcl0pe1RPU1ttc2cuc2VuZGVyXT10cnVlO2Jhblttc2cuc2VuZGVyXT1mYWxzZTt9CiAgICAgICAgaWYobXNnLnNlbmRlcj09Y29udHJvbGxlcil7VE9TW2FdPWI7aWYoIWIpYmFuW2FdPXRydWU7bG9ncy5wdXNoKGxvZyhjb250cm9sbGVyLCJzZXRUT1MiLGEpKTsgcmV0dXJuIHRydWU7fQogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIGdldFRPUyhhZGRyZXNzIGEpY29uc3RhbnQgcmV0dXJucyhib29sKSB7cmV0dXJuIFRPU1thXTt9CgogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIG93bnMoYWRkcmVzcyBhKSBjb25zdGFudCByZXR1cm5zIChib29sKXtyZXR1cm4gYm90T3duZXJzW2FdLmxlbmd0aD4wO30KCgogICAgICAgIGZ1bmN0aW9uIGdldENvaW4odWludCBuKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzLHN0cmluZyx1aW50LHVpbnQsc3RyaW5nLHN0cmluZykgewogICAgICAgIENvaW4gYyA9IGNvaW5zW25dOwogICAgICAgIHJldHVybiAoYy5jb2luT3duZXIsYy5kYXRhLGMuY29pblR5cGUsYy5wbGF0ZixjLm1pbmUsYy5hZHYpOyAgIAogICAgICAgIH0KCgoKCiAgICAgICAgZnVuY3Rpb24gVHJhc2godWludCBuKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzLHN0cmluZyx1aW50LHVpbnQsc3RyaW5nLHN0cmluZykgewogICAgICAgIGlmKChtc2cuc2VuZGVyIT1jb250cm9sbGVyKSYmKCEoZ2V0T3duZWRCb3QobXNnLnNlbmRlciwwKT4wKSkpICAgICAgCiAgICAgICAgQ29pbiBjID0gdHJhc2hbbl07ICAgCiAgICAgICAgcmV0dXJuIChjLmNvaW5Pd25lcixjLmRhdGEsYy5jb2luVHlwZSxjLnBsYXRmLGMubWluZSxjLmFkdik7IAogICAgICAgIH0KCiAgICAgICAKICAgICAgICBmdW5jdGlvbiBnZXRDb2luU3RhdHModWludCBpKSBjb25zdGFudCByZXR1cm5zICh1aW50LHVpbnQpewogICAgICAgIHJldHVybiAobGlzdGVkW2ldLGNvaW5JbmRleCk7ICAgCiAgICAgICAgfQogICAgICAgCgogICAgICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCl7CiAgICAgICAgaWYoIVRPU1ttc2cuc2VuZGVyXSl0aHJvdzsKICAgICAgICB1aW50IHQ9YmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl09MDsKICAgICAgICBpZighKG1zZy5zZW5kZXIuc2VuZCh0KSkpdGhyb3c7CiAgICAgICAgfQoKCiAgICAgICAgZnVuY3Rpb24gKCl7dGhyb3c7fQoKIH0KCgoKCgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgpjb250cmFjdCBBUktDb250cm9sbGVyXzFfMDAgewogICAgLyogQ29uc3RydWN0b3IgKi8KICAgIEFSSyBBcms7CgogICAgZXZlbnQgQ29pblNlbnQodWludCBpbmRleGVkIGlkLGFkZHJlc3MgZnJvbSxzdHJpbmcgbmFtZSk7CgogICAgYWRkcmVzcyBvd25lcjsKICAgIGFkZHJlc3MgU291cmNlOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKWFkbWluaXN0cmF0b3I7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCltb2R1bGU7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gc3RyaW5nKWFkbWluTmFtZTsKCiAgICBtYXBwaW5nKHVpbnQgPT4gYm9vbClyZXN0b3JlOwoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICBsb2dbXSBsb2dzOwoKICAgIHN0cnVjdCBsb2d7CiAgICBhZGRyZXNzIGFkbWluOwogICAgc3RyaW5nIHdoYXQ7CiAgICB1aW50IGlkOwogICAgYWRkcmVzcyBhOwogICAgfQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIAogICAgZnVuY3Rpb24gQVJLQ29udHJvbGxlcl8xXzAwKCkgewogICAgb3duZXI9bXNnLnNlbmRlcjsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRPd25lcihhZGRyZXNzIGEsc3RyaW5nIG5hbWUpIHsKICAgIGlmKG1zZy5zZW5kZXI9PW93bmVyKW93bmVyPWE7CiAgICB9CgogICAgZnVuY3Rpb24gYmFuKGFkZHJlc3MgYSkgcmV0dXJucyhib29sKXsKICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRBZG1pbmlzdHJhdG9yKGFkZHJlc3MgYSxzdHJpbmcgbmFtZSxib29sIHllc25vKSB7CiAgICBpZihpc01vZHVsZShtc2cuc2VuZGVyKSl7CiAgICBhZG1pbmlzdHJhdG9yW2FdPXllc25vOwogICAgYWRtaW5OYW1lW2FdPW5hbWU7CiAgICAKICAgIGlmKG1zZy5zZW5kZXI9PW93bmVyKWxvZ3MucHVzaChsb2cobXNnLnNlbmRlciwic2V0QWRtaW4iLDAsYSkpOwogICAgaWYobXNnLnNlbmRlciE9b3duZXIpbG9ncy5wdXNoKGxvZyhtc2cuc2VuZGVyLCJtb2R1bGVTZXRBZG1pbiIsMCxhKSk7CiAgICAKICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRNb2R1bGUoYWRkcmVzcyBhLGJvb2wgeWVzbm8pIHsKICAgIGlmKCFpc01vZHVsZShtc2cuc2VuZGVyKSl0aHJvdzsKICAgIG1vZHVsZVthXT15ZXNubzsKICAgIGxvZ3MucHVzaChsb2cob3duZXIsInNldE1vZHVsZSIsMCxhKSk7CgogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByaWNlKHVpbnQgaSx1aW50IGopewogICAgaWYoKCFpc01vZHVsZShtc2cuc2VuZGVyKSl8fChpPjYpKXRocm93OwogICAgQXJrLnNldFByaWNlKGksaik7CiAgICBsb2dzLnB1c2gobG9nKG1zZy5zZW5kZXIsInNldFByaWNlIixpLG1zZy5zZW5kZXIpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRUT1MoYWRkcmVzcyBhLGJvb2wgYil7CiAgICBpZighaXNNb2R1bGUobXNnLnNlbmRlcikpdGhyb3c7CiAgICBBcmsuYWNjZXB0VE9TKGEsYik7CiAgICB9CgogICAgCiAgICBmdW5jdGlvbiBzZXRTb3VyY2UoYWRkcmVzcyBhKSB7CiAgICBpZihtc2cuc2VuZGVyIT1vd25lcil0aHJvdzsKICAgIEFyaz1BUksoYSk7ICAgIAogICAgU291cmNlPWE7CiAgICBsb2dzLnB1c2gobG9nKG1zZy5zZW5kZXIsInNldFNvdXJjZSIsMCxhKSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0QVJLb3duZXIoYWRkcmVzcyBhKSB7CiAgICBpZihtc2cuc2VuZGVyIT1vd25lcil0aHJvdzsKICAgIEFyay5pbml0U3RhdHMoIiIsYSwzMzMpOwogICAgbG9ncy5wdXNoKGxvZyhtc2cuc2VuZGVyLCJzZXRBUktvd25lciIsMCwweDApKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXN0b3JlSXRlbSh1aW50IGkpewogICAgaWYoaXNBZG1pbihtc2cuc2VuZGVyKXx8aXNNb2R1bGUobXNnLnNlbmRlcikpewogICAgQXJrLmNlbnNvcnNoaXAoaSxmYWxzZSxmYWxzZSk7CiAgICBsb2dzLnB1c2gobG9nKG1zZy5zZW5kZXIsInJlc3RvcmUiLGksMHgwKSk7CiAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYXBwbHlDZW5zb3JzaGlwKHVpbnQgaSl7CiAgICBpZighaXNBZG1pbihtc2cuc2VuZGVyKSl0aHJvdzsKICAgIEFyay5jZW5zb3JzaGlwKGksdHJ1ZSxmYWxzZSk7CiAgICBsb2dzLnB1c2gobG9nKG1zZy5zZW5kZXIsImNlbnNvciIsaSwweDApKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxldGVDb2luKHVpbnQgaSl7CiAgICBpZighaXNNb2R1bGUobXNnLnNlbmRlcikpdGhyb3c7CiAgICBBcmsuY2Vuc29yc2hpcChpLHRydWUsdHJ1ZSk7CiAgICBsb2dzLnB1c2gobG9nKG1zZy5zZW5kZXIsImNlbnNvciIsaSwweDApKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWdpc3RlckV4dGVybmFsQmlsbCh1aW50IGJpLGFkZHJlc3Mgc2VsbHNOb3csYWRkcmVzcyBidXllcndhbGxldCx1aW50IHRpcG8sdWludCBzZWxsLHVpbnQgYykgcHJpdmF0ZXsKICAgIGlmKCFpc01vZHVsZShtc2cuc2VuZGVyKSl0aHJvdzsKICAgIEFyay5yZWdpc3RlckV4dGVybmFsQmlsbChiaSxzZWxsc05vdyxidXllcndhbGxldCx0aXBvLHNlbGwsYyk7CiAgICB9CgogICAgZnVuY3Rpb24gcHVzaENvaW4odWludCBpLGFkZHJlc3MgYSxzdHJpbmcgcykgcmV0dXJucyhib29sKXsKICAgIGlmKG1zZy5zZW5kZXIhPVNvdXJjZSl0aHJvdzsKICAgIENvaW5TZW50KGksYSxzKTsKICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzQWRtaW4oYWRkcmVzcyBhKWNvbnN0YW50IHJldHVybnMoYm9vbCl7CiAgICBib29sIGI9ZmFsc2U7CiAgICBpZigoYT09b3duZXIpfHwoYWRtaW5pc3RyYXRvclthXSkpYj10cnVlOwogICAgcmV0dXJuIGI7CiAgICB9CgogICAgZnVuY3Rpb24gaXNNb2R1bGUoYWRkcmVzcyBhKWNvbnN0YW50IHJldHVybnMoYm9vbCl7CiAgICBib29sIGI9ZmFsc2U7CiAgICBpZigoYT09b3duZXIpfHwobW9kdWxlW2FdKSliPXRydWU7CiAgICByZXR1cm4gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRBZG1pbk5hbWUoYWRkcmVzcyBhKWNvbnN0YW50IHJldHVybnMoc3RyaW5nKXsKICAgIHJldHVybiBhZG1pbk5hbWVbYV07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0U291cmNlKCljb25zdGFudCByZXR1cm5zKGFkZHJlc3MpewogICAgcmV0dXJuIFNvdXJjZTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWFkTG9nKHVpbnQgaSljb25zdGFudCByZXR1cm5zKHN0cmluZyxhZGRyZXNzLHN0cmluZyx1aW50LGFkZHJlc3MpewogICAgbG9nIGw9bG9nc1tpXTsKICAgIHJldHVybihnZXRBZG1pbk5hbWUobC5hZG1pbiksbC5hZG1pbixsLndoYXQsbC5pZCxsLmEpOwogICAgfQogICAgCgp9CgoKCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgpjb250cmFjdCBBUktUYWdnZXJfMV8wMCB7CiAgICAvKiBDb25zdHJ1Y3RvciAqLwogICAgQVJLIEFyazsKCiAgICBhZGRyZXNzIG93bmVyOwoKICAgIHN0cmluZ1tdIGxhc3RUYWdzOwogICAgbWFwcGluZyAoc3RyaW5nID0+IHVpbnRbXSkgdGFnZ2VkOwoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICBsb2dbXSBsb2dzOwoKICAgIHN0cnVjdCBsb2d7CiAgICBhZGRyZXNzIGFkbWluOwogICAgc3RyaW5nIGFjdGlvbjsKICAgIGFkZHJlc3MgYWRkcjsKICAgIH0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgZnVuY3Rpb24gQVJLVGFnZ2VyXzFfMDAoKSB7CiAgICBvd25lcj1tc2cuc2VuZGVyOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldE93bmVyKGFkZHJlc3MgYSkgewogICAgaWYobXNnLnNlbmRlciE9b3duZXIpdGhyb3c7CiAgICBvd25lcj1hOwogICAgbG9ncy5wdXNoKGxvZyhvd25lciwic2V0T3duZXIiLGEpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRTb3VyY2UoYWRkcmVzcyBhKSB7CiAgICBpZihtc2cuc2VuZGVyIT1vd25lcil0aHJvdzsKICAgIEFyaz1BUksoYSk7CiAgICBsb2dzLnB1c2gobG9nKG93bmVyLCJzZXRTb3VyY2UiLGEpKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWFkTG9nKHVpbnQgaSljb25zdGFudCByZXR1cm5zKGFkZHJlc3Msc3RyaW5nLGFkZHJlc3MpewogICAgbG9nIGw9bG9nc1tpXTsKICAgIHJldHVybihsLmFkbWluLGwuYWN0aW9uLGwuYWRkcik7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TGFzdFRhZyh1aW50IGkpIGNvbnN0YW50IHJldHVybnMoc3RyaW5nIHRhZyl7CiAgICByZXR1cm4gbGFzdFRhZ3NbaV07CiAgICB9CgogICAgZnVuY3Rpb24gYWRkVGFnKHVpbnQgaSxzdHJpbmcgdGFnKXt0YWdnZWRbdGFnXVt0YWdnZWRbdGFnXS5sZW5ndGgrK109aTtsYXN0VGFnc1tsYXN0VGFncy5sZW5ndGgrK109dGFnO30KCiAgICBmdW5jdGlvbiBnZXRUYWcoc3RyaW5nIHRhZyx1aW50IGkpIGNvbnN0YW50IHJldHVybnModWludCx1aW50KXtyZXR1cm4gKHRhZ2dlZFt0YWddW2ldLHRhZ2dlZFt0YWddLmxlbmd0aCk7fQoKCn0KCgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoKY29udHJhY3QgQVJLX1RST0dMT2dfMV8wMCB7CiAgICAvKiBUUk9HTE9nIGlzIHBhcnQgb2YgQVJLIEVuZG93bWVudCwgYWxsIHRoZSBkb2N1bWVudHMgYXJlIHByb3BlcnR5IG9mIHRoZSByZWxhdGl2ZSBBUksgQk9UcyBvd25lcnMgKi8KICAgIEFSSyBBcms7CiAgICAgCiAgICBhZGRyZXNzIG93bmVyOwoKICAgIG1hcHBpbmcodWludCA9PiBzdHJpbmcpdHJvZ2xvZ3M7CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIGxvZ1tdIGxvZ3M7CgogICAgc3RydWN0IGxvZ3sKICAgIGFkZHJlc3MgYWRtaW47CiAgICBzdHJpbmcgYWN0aW9uOwogICAgYWRkcmVzcyBhZGRyOwogICAgdWludCBkb2N1OwogICAgfQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBmdW5jdGlvbiBBUktfVFJPR0xPZ18xXzAwKCkgewogICAgb3duZXI9bXNnLnNlbmRlcjsKICAgIH0KCiAgICAvL2NoYW5nZSBUUk9HTE9nIGNvbnRyb2xsZXIKICAgIGZ1bmN0aW9uIHNldE93bmVyKGFkZHJlc3MgYSkgewogICAgaWYobXNnLnNlbmRlciE9b3duZXIpdGhyb3c7CiAgICBvd25lcj1hOwogICAgbG9ncy5wdXNoKGxvZyhvd25lciwic2V0T3duZXIiLGEsMCkpOwogICAgfQoKICAgIC8vcG9pbnQgVFJPR0xPZyB0byBBUksKICAgIGZ1bmN0aW9uIHNldFNvdXJjZShhZGRyZXNzIGEpIHsKICAgIGlmKG1zZy5zZW5kZXIhPW93bmVyKXRocm93OwogICAgQXJrPUFSSyhhKTsKICAgIGxvZ3MucHVzaChsb2cob3duZXIsInNldFNvdXJjZSIsYSwwKSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVhZExvZyh1aW50IGkpY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzLHN0cmluZyxhZGRyZXNzLHVpbnQpewogICAgbG9nIGw9bG9nc1tpXTsKICAgIHJldHVybihsLmFkbWluLGwuYWN0aW9uLGwuYWRkcixsLmRvY3UpOwogICAgfQoKICAgIAogICAgZnVuY3Rpb24gc3VibWl0Q29kaW5nKHN0cmluZyBzLHVpbnQgaSl7CiAgICB2YXIob3duLGRhdCxhLGIpID0gQXJrLmdldEJvdChpKTsKICAgIGlmKChvd249PW1zZy5zZW5kZXIpKXt0cm9nbG9nc1tpXT1zO2xvZ3MucHVzaChsb2cobXNnLnNlbmRlciwic2V0RG9jdW1lbnQiLDB4MCxpKSk7fWVsc2V7dGhyb3c7fQogICAgfQogICAgICAgIAogICAgCgogICAgZnVuY3Rpb24gZ2V0TE9nKHVpbnQgaSkgY29uc3RhbnQgcmV0dXJucyhzdHJpbmcpeyAgCiAgICBpZighKEFyay5nZXRPd25lZEJvdChtc2cuc2VuZGVyLDApPjApKXRocm93OwogICAgcmV0dXJuICh0cm9nbG9nc1tpXSk7fQoKCn0KCgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgpjb250cmFjdCBBUktfVk9URVJfMV8wMHsKCiAgQVJLIEFyazsKICBBUktDb250cm9sbGVyXzFfMDAgY29udHJvbGxlcjsKICBhZGRyZXNzIG93bmVyOwogIG1hcHBpbmcodWludCA9PiB1aW50KXRocmVzb2xkOwogIFZvdGVbXSB2b3RlczsKICB1aW50IG1heDsKICB1aW50IG1pbjsKICBWb3RlW10gdHY7CiAgdWludFtdIGxhc3RibG9jazsKICB1aW50IHZtaW49MzA7CiAgdWludCB2bWF4PTcwMDsKICB1aW50IHFtaW49MzA7CiAgdWludCBxbWF4PTcwMDsKCiAgICAgICAgc3RydWN0IFZvdGUgewogICAgICAgIHVpbnQgdXA7CiAgICAgICAgdWludCBkb3duOwoKICAgICAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHZvdGVyczsKICAgICAgICB9CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIGxvZ1tdIGxvZ3M7CgogICAgc3RydWN0IGxvZ3sKICAgIGFkZHJlc3MgYWRtaW47CiAgICBzdHJpbmcgYWN0aW9uOwogICAgYWRkcmVzcyBhZGRyOwogICAgdWludCBpOwogICAgfQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgIGZ1bmN0aW9uIEFSS19WT1RFUl8xXzAwKHVpbnQgYSx1aW50IGIsdWludCBjLHVpbnQgZCx1aW50IGUsdWludCBmKXsKCiAgIG93bmVyPW1zZy5zZW5kZXI7CiAgIC8vdHYucHVzaCgpOwogICB0aHJlc29sZFswXT1hOyAvL2JsYWNrZmxhZyBxdW9ydW0KICAgdGhyZXNvbGRbMV09YjsgLy9jZW5zb3IgcXVvcnVtCiAgIHRocmVzb2xkWzJdPWM7IC8vcHJpY2Ugdm90ZSBxdW9ydW0KICAgdGhyZXNvbGRbM109ZDsgLy9xdW9ydW0gdm90aW5nIHF1b3J1bQogICB0aHJlc29sZFs0XT1lOwogICB0aHJlc29sZFs1XT1mOwoKICAgZm9yKHVpbnQgej0wO3o8OTt6KyspeyB2b3Rlcy5wdXNoKFZvdGUoe3VwOjAsZG93bjowfSkpOyBsYXN0YmxvY2sucHVzaCgxKTt9CiAgIG1pbj01MDAwMDAwMDAwMDAwMDAwMDsKICAgbWF4PTIwMDAwMDAwMDAwMDAwMDAwMDA7CiAgIHZtaW49MzA7CiAgIHZtYXg9NzAwOwogICBxbWluPTMwOwogICBxbWF4PTcwMDsKICAgfQoKICAKCiAgICBmdW5jdGlvbiBzZXRPd25lcihhZGRyZXNzIGEpIHsKICAgIGlmKG1zZy5zZW5kZXIhPW93bmVyKXRocm93OwogICAgb3duZXI9YTsKICAgIGxvZ3MucHVzaChsb2cob3duZXIsInNldE93bmVyIixhLDApKTsKICAgIH0KCgogICAgZnVuY3Rpb24gc2V0U291cmNlKGFkZHJlc3MgYSkgewogICAgaWYobXNnLnNlbmRlciE9b3duZXIpdGhyb3c7CiAgICBBcms9QVJLKGEpOwogICAgbG9ncy5wdXNoKGxvZyhvd25lciwic2V0U291cmNlIixhLDApKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDb250cm9sbGVyKGFkZHJlc3MgYSkgewogICAgaWYobXNnLnNlbmRlciE9b3duZXIpdGhyb3c7CiAgICBjb250cm9sbGVyPUFSS0NvbnRyb2xsZXJfMV8wMChhKTsKICAgIGxvZ3MucHVzaChsb2cob3duZXIsInNldENvbnRyb2xsZXIiLGEsMCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlYWRMb2codWludCBpKWNvbnN0YW50IHJldHVybnMoYWRkcmVzcyxzdHJpbmcsYWRkcmVzcyl7CiAgICBsb2cgbD1sb2dzW2ldOwogICAgcmV0dXJuKGwuYWRtaW4sbC5hY3Rpb24sbC5hZGRyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRUaHJlc29sZCh1aW50IGksdWludCBqKXsKICAgIGlmKG1zZy5zZW5kZXIhPW93bmVyKXRocm93OwogICAgdGhyZXNvbGRbaV09ajsKCiAgICBpZihpPT0wKWxvZ3MucHVzaChsb2cob3duZXIsInNldFRocmVzb2xkMCIsMHgwLGopKTsKICAgIGlmKGk9PTEpbG9ncy5wdXNoKGxvZyhvd25lciwic2V0VGhyZXNvbGQxIiwweDAsaikpOwogICAgaWYoaT09Milsb2dzLnB1c2gobG9nKG93bmVyLCJzZXRUaHJlc29sZDIiLDB4MCxqKSk7CiAgICBpZihpPT0zKWxvZ3MucHVzaChsb2cob3duZXIsInNldFRocmVzb2xkMyIsMHgwLGopKTsKICAgIGlmKGk9PTQpbG9ncy5wdXNoKGxvZyhvd25lciwic2V0VGhyZXNvbGQ0IiwweDAsaikpOwogICAgaWYoaT09NSlsb2dzLnB1c2gobG9nKG93bmVyLCJzZXRUaHJlc29sZDUiLDB4MCxqKSk7CgogICAgfQoKICAgIGZ1bmN0aW9uIHNldE1pbih1aW50IGksdWludCB3KSB7CiAgICBpZihtc2cuc2VuZGVyIT1vd25lcil0aHJvdzsKICAgIGlmKHc9PTApe21pbj1pOyBsb2dzLnB1c2gobG9nKG93bmVyLCJzZXRNaW4iLDB4MCxpKSk7fQogICAgaWYodz09MSl7dm1pbj1pOyBsb2dzLnB1c2gobG9nKG93bmVyLCJzZXRWTWluIiwweDAsaSkpO30KICAgIGlmKHc9PTIpe3FtaW49aTsgbG9ncy5wdXNoKGxvZyhvd25lciwic2V0UU1pbiIsMHgwLGkpKTt9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TWF4KHVpbnQgaSx1aW50IHcpIHsKICAgIGlmKG1zZy5zZW5kZXIhPW93bmVyKXRocm93OwogICAgaWYodz09MCl7bWF4PWk7IGxvZ3MucHVzaChsb2cob3duZXIsInNldE1heCIsMHgwLGkpKTt9CiAgICBpZih3PT0xKXt2bWF4PWk7IGxvZ3MucHVzaChsb2cob3duZXIsInNldFZNYXgiLDB4MCxpKSk7fQogICAgaWYodz09Mil7cW1heD1pOyBsb2dzLnB1c2gobG9nKG93bmVyLCJzZXRRTWF4IiwweDAsaSkpO30KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRQcmljZSh1aW50IGksdWludCBqKSB7CiAgICBpZihtc2cuc2VuZGVyIT1vd25lcil0aHJvdzsKCiAgICBpZihpPT0wKWxvZ3MucHVzaChsb2cob3duZXIsInNldFByaWNlMCIsMHgwLGopKTsKICAgIGlmKGk9PTEpbG9ncy5wdXNoKGxvZyhvd25lciwic2V0UHJpY2UxIiwweDAsaikpOwogICAgaWYoaT09Milsb2dzLnB1c2gobG9nKG93bmVyLCJzZXRQcmljZTIiLDB4MCxqKSk7CiAgICBpZihpPT0zKWxvZ3MucHVzaChsb2cob3duZXIsInNldFByaWNlMyIsMHgwLGopKTsKICAgIGlmKGk9PTQpbG9ncy5wdXNoKGxvZyhvd25lciwic2V0UHJpY2U0IiwweDAsaikpOwogICAgaWYoaT09NSlsb2dzLnB1c2gobG9nKG93bmVyLCJzZXRQcmljZTUiLDB4MCxqKSk7CiAgICBjb250cm9sbGVyLnNldFByaWNlKGksaik7CgogICAgfQogICAgCiAgICBmdW5jdGlvbiBjaGVjayh1aW50IGkpY29uc3RhbnQgcmV0dXJucyhib29sKXsKICAgICAgICBpZigoQXJrLmdldE93bmVkQm90KG1zZy5zZW5kZXIsMCk+MCkmJihibG9jay5udW1iZXItbGFzdGJsb2NrW2ldPjEwMDApKXtyZXR1cm4gdHJ1ZTt9ZWxzZXtyZXR1cm4gZmFsc2U7fSAgIAogICAgfQogICAgCiAgICAgIAogICAgZnVuY3Rpb24gdm90ZVByaWNlKHVpbnQgeCxib29sIHYpewogICAgICAgCgogICAgICAgIFZvdGUgVj12b3Rlc1t4XTsKICAgICAgICB2YXIoYSxiLGMsZCxlKSA9IEFyay5nZXRMYXN0UHJpY2UoeCk7CgogICAgICAgIGlmKGNoZWNrKHgpJiYoIShWLnZvdGVyc1ttc2cuc2VuZGVyXSkpJiYoeDw9NSkmJihhPD1tYXgpJiYoYT49bWluKSl7CgogICAgICAgIFYudm90ZXJzW21zZy5zZW5kZXJdPXRydWU7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAKICAgICAgICAgICAgaWYodil7Vi51cCsrOwogICAgICAgICAgICAgICAgICBpZihWLnVwPnRocmVzb2xkWzJdKXsKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCB1PWErKGEvMTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5zZXRQcmljZSh4LHUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdGJsb2NrW3hdPWJsb2NrLm51bWJlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVzW3hdPVZvdGUoe3VwOjAsZG93bjowfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgIFYuZG93bisrOwogICAgICAgICAgICAgICAgICBpZihWLmRvd24+dGhyZXNvbGRbMl0pewogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCB6PWEtKGEvMTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5zZXRQcmljZSh4LHopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdGJsb2NrW3hdPWJsb2NrLm51bWJlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvdGVzW3hdPVZvdGUoe3VwOjAsZG93bjowfSk7CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgfWVsc2V7dGhyb3c7fQogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIHZvdGVRdW9ydW0odWludCB4LGJvb2wgdil7CgogICAgICAgIFZvdGUgVj12b3Rlc1t4XTsKCiAgICAgICAgaWYoKGNoZWNrKHgpKSYmKCEoVi52b3RlcnNbbXNnLnNlbmRlcl0pKSYmKHg+NSkmJih4PDkpJiYodGhyZXNvbGRbeC02XTx2bWF4KSYmKHRocmVzb2xkW3gtNl0+dm1pbikpewoKICAgICAgICBWLnZvdGVyc1ttc2cuc2VuZGVyXT10cnVlOwogICAgICAgICAgIAogICAgICAgICAgICBpZih2KXtWLnVwKys7CiAgICAgICAgICAgICAgICAgIGlmKFYudXA+dGhyZXNvbGRbM10peyAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgdGhyZXNvbGRbeC02XSs9dGhyZXNvbGRbeC02XS8xMDsKICAgICAgICAgICAgICAgICAgICAgICBsYXN0YmxvY2tbeF09YmxvY2subnVtYmVyOwogICAgICAgICAgICAgICAgICAgICAgIHZvdGVzW3hdPVZvdGUoe3VwOjAsZG93bjowfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgIFYuZG93bisrOwogICAgICAgICAgICAgICAgICBpZihWLmRvd24+dGhyZXNvbGRbM10pewogICAgICAgICAgICAgICAgICAgIHRocmVzb2xkW3gtNl0tPXRocmVzb2xkW3gtNl0vMTA7CiAgICAgICAgICAgICAgICAgICAgbGFzdGJsb2NrW3hdPWJsb2NrLm51bWJlcjsKICAgICAgICAgICAgICAgICAgICB2b3Rlc1t4XT1Wb3RlKHt1cDowLGRvd246MH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgfWVsc2V7dGhyb3c7fQogICAgICAgIH0KCgoKICAgICAgICBmdW5jdGlvbiB2b3RlU3VwZXJRdW9ydW0odWludCB4LGJvb2wgdil7CiAgICAgCiAgICAgICAgVm90ZSBWPXZvdGVzW3hdOwoKICAgICAgICBpZigoY2hlY2soeCkpJiYoIShWLnZvdGVyc1ttc2cuc2VuZGVyXSkpJiYoeD44KSYmKHRocmVzb2xkWzNdPHFtYXgpJiYodGhyZXNvbGRbM10+cW1pbikpewoKICAgICAgICBWLnZvdGVyc1ttc2cuc2VuZGVyXT10cnVlOwogICAgICAgICAgIAogICAgICAgICAgICBpZih2KXtWLnVwKys7CiAgICAgICAgICAgICAgICAgIGlmKFYudXA+dGhyZXNvbGRbM10peyAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIHRocmVzb2xkWzNdKz10aHJlc29sZFszXS8xMDsKICAgICAgICAgICAgICAgICAgbGFzdGJsb2NrW3hdPWJsb2NrLm51bWJlcjsKICAgICAgICAgICAgICAgICAgdm90ZXNbeF09Vm90ZSh7dXA6MCxkb3duOjB9KTsgICAKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgVi5kb3duKys7CiAgICAgICAgICAgICAgICAgIGlmKFYuZG93bj50aHJlc29sZFszXSl7CiAgICAgICAgICAgICAgICAgIHRocmVzb2xkWzNdLT10aHJlc29sZFszXS8xMDsKICAgICAgICAgICAgICAgICAgbGFzdGJsb2NrW3hdPWJsb2NrLm51bWJlcjsKICAgICAgICAgICAgICAgICAgdm90ZXNbeF09Vm90ZSh7dXA6MCxkb3duOjB9KTsgIAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgfWVsc2V7dGhyb3c7fQogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIGdldFZvdGVzKHVpbnQgeCkgY29uc3RhbnQgcmV0dXJucyh1aW50LHVpbnQsYm9vbCl7CiAgICAgICAgVm90ZSBWPXZvdGVzW3hdOwogICAgICAgIHJldHVybiAoVi51cCxWLmRvd24sVi52b3RlcnNbbXNnLnNlbmRlcl0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0VGhyZXNvbGQodWludCBpKWNvbnN0YW50IHJldHVybnModWludCl7cmV0dXJuIHRocmVzb2xkW2ldO30KCiAgICAgICAgZnVuY3Rpb24gZ2V0TWluTWF4KCljb25zdGFudCByZXR1cm5zKHVpbnQsdWludCx1aW50LHVpbnQsdWludCx1aW50KXtyZXR1cm4gKG1pbixtYXgsdm1pbix2bWF4LHFtaW4scW1heCk7fQp9CgoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKY29udHJhY3QgQVJLX0ZMQUdHRVJfMV8wMHsKCiAgQVJLIEFyazsKICBBUktDb250cm9sbGVyXzFfMDAgQVJLY29udHJvbGxlcjsKICBhZGRyZXNzIG93bmVyOwogIEFSS19WT1RFUl8xXzAwIEFSS3ZvdGVyOwoKICBzdHJ1Y3QgQmxhY2tGbGFnewogIHVpbnQgYmxhY2tmbGFncmVxdWVzdDsKICB1aW50IGJsYWNrZmxhZ3M7CiAgfQoKICAgIG1hcHBpbmcodWludCA9PiBCbGFja0ZsYWcpIGJsYWNrZmxhZ3M7CgoKICAgIG1hcHBpbmcodWludCA9PiBDZW5zb3JzaGlwKWNlbnNvcmluZzsKICAgIHN0cnVjdCBDZW5zb3JzaGlwe21hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBjZW5zb3I7fQoKICAgdWludFtdIHRocmVzb2xkOwoKICAgIAogIAovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIGxvZ1tdIGxvZ3M7CgogICAgc3RydWN0IGxvZ3sKICAgIGFkZHJlc3MgYWRtaW47CiAgICBzdHJpbmcgYWN0aW9uOwogICAgYWRkcmVzcyBhZGRyOwogICAgdWludCBpOwogICAgfQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgIGZ1bmN0aW9uIEFSS19GTEFHR0VSXzFfMDAoKXsKCiAgIG93bmVyPW1zZy5zZW5kZXI7CiAgIAogICB0aHJlc29sZC5wdXNoKDMpOwogICB0aHJlc29sZC5wdXNoKDMpOwogICB0aHJlc29sZC5wdXNoKDMpOwogICB0aHJlc29sZC5wdXNoKDMpOwogICB0aHJlc29sZC5wdXNoKDMpOwogICB0aHJlc29sZC5wdXNoKDMpOwogICB9CgogIAoKICAgIGZ1bmN0aW9uIHNldE93bmVyKGFkZHJlc3MgYSkgewogICAgaWYobXNnLnNlbmRlciE9b3duZXIpdGhyb3c7CiAgICBvd25lcj1hOwogICAgbG9ncy5wdXNoKGxvZyhvd25lciwic2V0T3duZXIiLGEsMCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldENvbnRyb2xsZXIoYWRkcmVzcyBhKSB7CiAgICBpZihtc2cuc2VuZGVyIT1vd25lcil0aHJvdzsKICAgIEFSS2NvbnRyb2xsZXI9QVJLQ29udHJvbGxlcl8xXzAwKGEpOwogICAgbG9ncy5wdXNoKGxvZyhvd25lciwic2V0Q29udHJvbGxlciIsYSwwKSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Vm90ZXIoYWRkcmVzcyBhKSB7CiAgICBpZihtc2cuc2VuZGVyIT1vd25lcil0aHJvdzsKICAgIEFSS3ZvdGVyPUFSS19WT1RFUl8xXzAwKGEpOwogICAgbG9ncy5wdXNoKGxvZyhvd25lciwic2V0Vm90ZXIiLGEsMCkpOwogICAgfQoKCiAgICBmdW5jdGlvbiBzZXRTb3VyY2UoYWRkcmVzcyBhKSB7CiAgICBpZihtc2cuc2VuZGVyIT1vd25lcil0aHJvdzsKICAgIEFyaz1BUksoYSk7CiAgICBsb2dzLnB1c2gobG9nKG93bmVyLCJzZXRTb3VyY2UiLGEsMCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlYWRMb2codWludCBpKWNvbnN0YW50IHJldHVybnMoYWRkcmVzcyxzdHJpbmcsYWRkcmVzcyx1aW50KXsKICAgIGxvZyBsPWxvZ3NbaV07CiAgICByZXR1cm4obC5hZG1pbixsLmFjdGlvbixsLmFkZHIsbC5pKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGVjaygpY29uc3RhbnQgcmV0dXJucyhib29sKXsKICAgICAgICB2YXIgYj1mYWxzZTsKICAgICAgICBpZihBcmsuZ2V0T3duZWRCb3QobXNnLnNlbmRlciwwKT4wKWI9dHJ1ZTsKICAgICAgICByZXR1cm4gYjsKICAgICAgIAogICAgfQoKICAgICAgICBmdW5jdGlvbiBzZXRCbGFja2ZsYWcodWludCBpLGJvb2wgYil7aWYobXNnLnNlbmRlciE9b3duZXIpdGhyb3c7aWYoYil7YmxhY2tmbGFnc1tpXS5ibGFja2ZsYWdzKys7fWVsc2V7YmxhY2tmbGFnc1tpXS5ibGFja2ZsYWdzLS07fX0KCgoKCiAgICAgICAgZnVuY3Rpb24gc2V0QmxhY2tGbGFnUmVxdWVzdCh1aW50IGluZGV4LHVpbnQgdHlwKXsKIAogICAgICAgIHZhciAoeCx5KSA9IEFyay5nZXRDb2luU3RhdHMoMCk7CiAgICAgICAgQmxhY2tGbGFnIGMgPSBibGFja2ZsYWdzW2luZGV4XTsKICAgICAgICAKICAgICAgICBpZigoaW5kZXg8PXkpJiYoY2hlY2soKSkmJigodHlwPT0xKXx8KHR5cD09MTAwMSl8fCh0eXA9PTEwMDAxKSkmJighY2Vuc29yaW5nW2luZGV4XS5jZW5zb3JbbXNnLnNlbmRlcl0pKXsKICAgICAgICBpZihjLmJsYWNrZmxhZ3JlcXVlc3Q9PTApe2NlbnNvcmluZ1tpbmRleF09Q2Vuc29yc2hpcCgpOyBjLmJsYWNrZmxhZ3JlcXVlc3Q9dHlwO30KICAgICAgICBsb2dzLnB1c2gobG9nKG1zZy5zZW5kZXIsInJlcXVlc3RCbGFja0ZsYWciLDB4MCxpbmRleCkpOwogICAgICAgIGNlbnNvcmluZ1tpbmRleF0uY2Vuc29yW21zZy5zZW5kZXJdPXRydWU7ICAgICAgCiAgICAgICAgfWVsc2V7dGhyb3c7fQogICAgICAgIH0KCgoKCiAgICAgICBmdW5jdGlvbiBnZXRCbGFja2ZsYWcodWludCBpbmRleCxhZGRyZXNzIGEpIGNvbnN0YW50IHJldHVybnMoYm9vbCx1aW50LHVpbnQpewogICAgICAgIEJsYWNrRmxhZyBjID0gYmxhY2tmbGFnc1tpbmRleF07CiAgICAgICAgcmV0dXJuIChjZW5zb3JpbmdbaW5kZXhdLmNlbnNvclthXSxjLmJsYWNrZmxhZ3JlcXVlc3QsYy5ibGFja2ZsYWdzKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNvbmZpcm1CbGFja0ZsYWcodWludCBpbmRleCxib29sIGNvbmZpcm0pewogICAgICAgIEJsYWNrRmxhZyBjID0gYmxhY2tmbGFnc1tpbmRleF07CiAgICAgICAgdWludCB0PWMuYmxhY2tmbGFncmVxdWVzdDsKCiAgICAgICAgCiAgICAgICAgaWYoKGNoZWNrKCkpJiYodD49MSkmJighY2Vuc29yaW5nW2luZGV4XS5jZW5zb3JbbXNnLnNlbmRlcl0pKXsKICAgICAgICAgICAgaWYoY29uZmlybSl7CiAgICAgICAgCiAgICAgICAgICAgICAgIGlmKCh0PCgxK3RocmVzb2xkWzBdKSl8fCgoMTAwMDx0KSYmKHQ8KDEwMDErdGhyZXNvbGRbMF0pKSl8fCgodD4xMDAwMCkmJih0PCgxMDAwMCt0aHJlc29sZFsxXSkpKSl7CiAgICAgICAgICAgICAgICAgIGMuYmxhY2tmbGFncmVxdWVzdCsrOwogICAgICAgICAgICAgICAgICAvL2NlbnNvcmluZ1tpbmRleF0uYmxhY2tmbGFnYXNrZXI9bXNnLnNlbmRlcjsKICAgICAgICAgICAgICAgICAgY2Vuc29yaW5nW2luZGV4XS5jZW5zb3JbbXNnLnNlbmRlcl09dHJ1ZTsKICAgICAgICAgICAgICAgfWVsc2V7ICAgCiAgICAgICAgICAgICAgICAgICBpZih0Pj0xMDAwMCt0aHJlc29sZFsxXSl7CiAgICAgICAgICAgICAgICAgICAgQVJLY29udHJvbGxlci5hcHBseUNlbnNvcnNoaXAoaW5kZXgpOwogICAgICAgICAgICAgICAgICAgIGNlbnNvcmluZ1tpbmRleF09Q2Vuc29yc2hpcCgpOwogICAgICAgICAgICAgICAgICAgfWVsc2V7ICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGMuYmxhY2tmbGFncysrOyAgICAgCiAgICAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgICAgYy5ibGFja2ZsYWdyZXF1ZXN0PTA7CiAgICAgICAgICAgICAgIH0gICAgICAKICAgICAgICAgICAgfWVsc2V7aWYodD4xMDAwMCl7Yy5ibGFja2ZsYWdyZXF1ZXN0PTA7bG9ncy5wdXNoKGxvZyhtc2cuc2VuZGVyLCJudWxsQ2Vuc29yc2hpcFJlcXVlc3QiLDB4MCxpbmRleCkpO31lbHNle2MuYmxhY2tmbGFncmVxdWVzdC0tO319CiAgICAgICAgfWVsc2V7dGhyb3c7fQogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIHNldFRocmVzb2xkKHVpbnQgaSx1aW50IGopewogICAgICAgIGlmKG1zZy5zZW5kZXIhPW93bmVyKXRocm93OwogICAgICAgIHRocmVzb2xkW2ldPWo7CiAKICAgICAgICBpZihpPT0wKWxvZ3MucHVzaChsb2cob3duZXIsInNldFRocmVzb2xkMCIsMHgwLGopKTsKICAgICAgICBpZihpPT0xKWxvZ3MucHVzaChsb2cob3duZXIsInNldFRocmVzb2xkMSIsMHgwLGopKTsKICAgICAgICBpZihpPT0yKWxvZ3MucHVzaChsb2cob3duZXIsInNldFRocmVzb2xkMiIsMHgwLGopKTsKICAgICAgICBpZihpPT0zKWxvZ3MucHVzaChsb2cob3duZXIsInNldFRocmVzb2xkMyIsMHgwLGopKTsKICAgICAgICBpZihpPT00KWxvZ3MucHVzaChsb2cob3duZXIsInNldFRocmVzb2xkNCIsMHgwLGopKTsKICAgICAgICBpZihpPT01KWxvZ3MucHVzaChsb2cob3duZXIsInNldFRocmVzb2xkNSIsMHgwLGopKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRocmVzb2xkKHVpbnQgaSl7CiAgICAgICAgdGhyZXNvbGRbaV09QVJLdm90ZXIuZ2V0VGhyZXNvbGQoaSk7CiAgICAgICAgLy91aW50IHU9QVJLdm90ZXIuZ2V0VGhyZXNvbGQoaSk7CiAgICAgICAgaWYoaT09MClsb2dzLnB1c2gobG9nKG93bmVyLCJ1cGRhdGVUaHJlc29sZDAiLDB4MCxpKSk7CiAgICAgICAgaWYoaT09MSlsb2dzLnB1c2gobG9nKG93bmVyLCJ1cGRhdGVUaHJlc29sZDEiLDB4MCxpKSk7CiAgICAgICAgaWYoaT09Milsb2dzLnB1c2gobG9nKG93bmVyLCJ1cGRhdGVUaHJlc29sZDIiLDB4MCxpKSk7CiAgICAgICAgaWYoaT09Mylsb2dzLnB1c2gobG9nKG93bmVyLCJ1cGRhdGVUaHJlc29sZDMiLDB4MCxpKSk7CiAgICAgICAgaWYoaT09NClsb2dzLnB1c2gobG9nKG93bmVyLCJ1cGRhdGVUaHJlc29sZDQiLDB4MCxpKSk7CiAgICAgICAgaWYoaT09NSlsb2dzLnB1c2gobG9nKG93bmVyLCJ1cGRhdGVUaHJlc29sZDUiLDB4MCxpKSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRUaHJlc29sZCgpY29uc3RhbnQgcmV0dXJucyh1aW50LHVpbnQsdWludCx1aW50LHVpbnQsdWludCl7CiAgICAgICAgcmV0dXJuICh0aHJlc29sZFswXSx0aHJlc29sZFsxXSx0aHJlc29sZFsyXSx0aHJlc29sZFszXSx0aHJlc29sZFs0XSx0aHJlc29sZFs1XSk7CiAgICAgICAgfQoKCn0='.
	

]
