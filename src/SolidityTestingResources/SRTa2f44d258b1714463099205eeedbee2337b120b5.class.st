Class {
	#name : #SRTa2f44d258b1714463099205eeedbee2337b120b5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa2f44d258b1714463099205eeedbee2337b120b5 >> base64 [
	^ 'LyoKVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIFBST09GIENvbnRyYWN0LgoKVGhlIFBST09GIENvbnRyYWN0IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgptb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgbGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkCmJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCihhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCgpUaGUgUFJPT0YgQ29udHJhY3QgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlCkdOVSBsZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIGxlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCmFsb25nIHdpdGggdGhlIFBST09GIENvbnRyYWN0LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4wOwoKY29udHJhY3Qgb3duZWQgewoKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIG93bmVkKCkgcGF5YWJsZSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQogICAgCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUob3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9vd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfb3duZXIgIT0gMCk7CiAgICAgICAgb3duZXIgPSBfb3duZXI7CiAgICB9Cn0KCmNvbnRyYWN0IENyb3dkc2FsZSBpcyBvd25lZCB7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwoKICAgIHVpbnQgICAgcHVibGljIGV0aGVyUHJpY2U7CiAgICBhZGRyZXNzIHB1YmxpYyBjcm93ZHNhbGVPd25lcjsKICAgIHVpbnQgICAgcHVibGljIHRvdGFsTGltaXRVU0Q7CiAgICB1aW50ICAgIHB1YmxpYyBtaW5pbWFsU3VjY2Vzc1VTRDsKICAgIHVpbnQgICAgcHVibGljIGNvbGxlY3RlZFVTRDsKCiAgICBlbnVtIFN0YXRlIHsgRGlzYWJsZWQsIFByZUlDTywgQ29tcGxldGVQcmVJQ08sIENyb3dkc2FsZSwgRW5hYmxlZCwgTWlncmF0aW9uIH0KICAgIGV2ZW50IE5ld1N0YXRlKFN0YXRlIHN0YXRlKTsKICAgIFN0YXRlICAgcHVibGljIHN0YXRlID0gU3RhdGUuRGlzYWJsZWQ7CiAgICB1aW50ICAgIHB1YmxpYyBjcm93ZHNhbGVTdGFydFRpbWU7CiAgICB1aW50ICAgIHB1YmxpYyBjcm93ZHNhbGVGaW5pc2hUaW1lOwoKICAgIG1vZGlmaWVyIGVuYWJsZWRTdGF0ZSB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5FbmFibGVkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGVuYWJsZWRPck1pZ3JhdGlvblN0YXRlIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkVuYWJsZWQgfHwgc3RhdGUgPT0gU3RhdGUuTWlncmF0aW9uKTsKICAgICAgICBfOwogICAgfQoKICAgIHN0cnVjdCBJbnZlc3RvciB7CiAgICAgICAgdWludDI1NiBhbW91bnRUb2tlbnM7CiAgICAgICAgdWludCAgICBhbW91bnRXZWk7CiAgICB9CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IEludmVzdG9yKSBwdWJsaWMgaW52ZXN0b3JzOwogICAgbWFwcGluZyAodWludCA9PiBhZGRyZXNzKSAgICAgcHVibGljIGludmVzdG9yc0l0ZXI7CiAgICB1aW50ICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgbnVtYmVyT2ZJbnZlc3RvcnM7CiAgICAKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUHJlSUNPIHx8IHN0YXRlID09IFN0YXRlLkNyb3dkc2FsZSk7CiAgICAgICAgdWludDI1NiB0b2tlbnNQZXJVU0QgPSAwOwogICAgICAgIGlmIChzdGF0ZSA9PSBTdGF0ZS5QcmVJQ08pIHsKICAgICAgICAgICAgdG9rZW5zUGVyVVNEID0gMTI1OwogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gU3RhdGUuQ3Jvd2RzYWxlKSB7CiAgICAgICAgICAgIGlmIChub3cgPCBjcm93ZHNhbGVTdGFydFRpbWUgKyAxIGRheXMpIHsKICAgICAgICAgICAgICAgIHRva2Vuc1BlclVTRCA9IDExNTsKICAgICAgICAgICAgfSBlbHNlIGlmIChub3cgPCBjcm93ZHNhbGVTdGFydFRpbWUgKyAxIHdlZWtzKSB7CiAgICAgICAgICAgICAgICB0b2tlbnNQZXJVU0QgPSAxMTA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0b2tlbnNQZXJVU0QgPSAxMDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHRva2Vuc1BlclVTRCA+IDApIHsKICAgICAgICAgICAgdWludCB2YWx1ZVdlaSA9IG1zZy52YWx1ZTsKICAgICAgICAgICAgdWludCB2YWx1ZVVTRCA9IHZhbHVlV2VpICogZXRoZXJQcmljZSAvIDEwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICAgICAgICAgIGlmIChjb2xsZWN0ZWRVU0QgKyB2YWx1ZVVTRCA+IHRvdGFsTGltaXRVU0QpIHsgLy8gZG9uJ3QgbmVlZCBzbyBtdWNoIGV0aGVyCiAgICAgICAgICAgICAgICB2YWx1ZVVTRCA9IHRvdGFsTGltaXRVU0QgLSBjb2xsZWN0ZWRVU0Q7CiAgICAgICAgICAgICAgICB2YWx1ZVdlaSA9IHZhbHVlVVNEICogMTAwMDAwMDAwMDAwMDAwMDAwMCAvIGV0aGVyUHJpY2U7CiAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKG1zZy52YWx1ZSAtIHZhbHVlV2VpKTsKICAgICAgICAgICAgICAgIGNvbGxlY3RlZFVTRCA9IHRvdGFsTGltaXRVU0Q7IC8vIHRvIGJlIHN1cmUhCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb2xsZWN0ZWRVU0QgKz0gdmFsdWVVU0Q7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdWludDI1NiB0b2tlbnMgPSB0b2tlbnNQZXJVU0QgKiB2YWx1ZVVTRDsKICAgICAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gKyB0b2tlbnMgPiBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0pOyAvLyBvdmVyZmxvdwogICAgICAgICAgICByZXF1aXJlKHRva2VucyA+IDApOwogICAgICAgICAgICAKICAgICAgICAgICAgSW52ZXN0b3Igc3RvcmFnZSBpbnYgPSBpbnZlc3RvcnNbbXNnLnNlbmRlcl07CiAgICAgICAgICAgIGlmIChpbnYuYW1vdW50V2VpID09IDApIHsgLy8gbmV3IGludmVzdG9yCiAgICAgICAgICAgICAgICBpbnZlc3RvcnNJdGVyW251bWJlck9mSW52ZXN0b3JzKytdID0gbXNnLnNlbmRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpbnYuYW1vdW50VG9rZW5zICs9IHRva2VuczsKICAgICAgICAgICAgaW52LmFtb3VudFdlaSArPSB2YWx1ZVdlaTsKICAgICAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdICs9IHRva2VuczsKICAgICAgICAgICAgdG90YWxTdXBwbHkgKz0gdG9rZW5zOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gc3RhcnRUb2tlbnNTYWxlKGFkZHJlc3MgX2Nyb3dkc2FsZU93bmVyLCB1aW50IF9ldGhlclByaWNlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkRpc2FibGVkIHx8IHN0YXRlID09IFN0YXRlLkNvbXBsZXRlUHJlSUNPKTsKICAgICAgICBjcm93ZHNhbGVTdGFydFRpbWUgPSBub3c7CiAgICAgICAgY3Jvd2RzYWxlT3duZXIgPSBfY3Jvd2RzYWxlT3duZXI7CiAgICAgICAgZXRoZXJQcmljZSA9IF9ldGhlclByaWNlOwogICAgICAgIGRlbGV0ZSBudW1iZXJPZkludmVzdG9yczsKICAgICAgICBkZWxldGUgY29sbGVjdGVkVVNEOwogICAgICAgIGlmIChzdGF0ZSA9PSBTdGF0ZS5EaXNhYmxlZCkgewogICAgICAgICAgICBjcm93ZHNhbGVGaW5pc2hUaW1lID0gbm93ICsgMTQgZGF5czsKICAgICAgICAgICAgc3RhdGUgPSBTdGF0ZS5QcmVJQ087CiAgICAgICAgICAgIHRvdGFsTGltaXRVU0QgPSAzMDAwMDA7CiAgICAgICAgICAgIG1pbmltYWxTdWNjZXNzVVNEID0gMzAwMDAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNyb3dkc2FsZUZpbmlzaFRpbWUgPSBub3cgKyAzMCBkYXlzOwogICAgICAgICAgICBzdGF0ZSA9IFN0YXRlLkNyb3dkc2FsZTsKICAgICAgICAgICAgdG90YWxMaW1pdFVTRCA9IDUyMDAwMDA7CiAgICAgICAgICAgIG1pbmltYWxTdWNjZXNzVVNEID0gMzYwMDAwMDsKICAgICAgICB9CiAgICAgICAgTmV3U3RhdGUoc3RhdGUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0aW1lVG9GaW5pc2hUb2tlbnNTYWxlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCB0KSB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5QcmVJQ08gfHwgc3RhdGUgPT0gU3RhdGUuQ3Jvd2RzYWxlKTsKICAgICAgICBpZiAobm93ID4gY3Jvd2RzYWxlRmluaXNoVGltZSkgewogICAgICAgICAgICB0ID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0ID0gY3Jvd2RzYWxlRmluaXNoVGltZSAtIG5vdzsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGZpbmlzaFRva2Vuc1NhbGUodWludCBfaW52ZXN0b3JzVG9Qcm9jZXNzKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUHJlSUNPIHx8IHN0YXRlID09IFN0YXRlLkNyb3dkc2FsZSk7CiAgICAgICAgcmVxdWlyZShub3cgPj0gY3Jvd2RzYWxlRmluaXNoVGltZSB8fCBjb2xsZWN0ZWRVU0QgPT0gdG90YWxMaW1pdFVTRCk7CiAgICAgICAgaWYgKGNvbGxlY3RlZFVTRCA8IG1pbmltYWxTdWNjZXNzVVNEKSB7CiAgICAgICAgICAgIC8vIEludmVzdG9ycyBjYW4gZ2V0IHRoZWlyIGV0aGVyIGNhbGxpbmcgd2l0aGRyYXdCYWNrKCkgZnVuY3Rpb24KICAgICAgICAgICAgd2hpbGUgKF9pbnZlc3RvcnNUb1Byb2Nlc3MgPiAwICYmIG51bWJlck9mSW52ZXN0b3JzID4gMCkgewogICAgICAgICAgICAgICAgYWRkcmVzcyBhZGRyID0gaW52ZXN0b3JzSXRlclstLW51bWJlck9mSW52ZXN0b3JzXTsKICAgICAgICAgICAgICAgIEludmVzdG9yIG1lbW9yeSBpbnYgPSBpbnZlc3RvcnNbYWRkcl07CiAgICAgICAgICAgICAgICBiYWxhbmNlT2ZbYWRkcl0gLT0gaW52LmFtb3VudFRva2VuczsKICAgICAgICAgICAgICAgIHRvdGFsU3VwcGx5IC09IGludi5hbW91bnRUb2tlbnM7CiAgICAgICAgICAgICAgICAtLV9pbnZlc3RvcnNUb1Byb2Nlc3M7CiAgICAgICAgICAgICAgICBkZWxldGUgaW52ZXN0b3JzSXRlcltudW1iZXJPZkludmVzdG9yc107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG51bWJlck9mSW52ZXN0b3JzID4gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBTdGF0ZS5QcmVJQ08pIHsKICAgICAgICAgICAgICAgIHN0YXRlID0gU3RhdGUuRGlzYWJsZWQ7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzdGF0ZSA9IFN0YXRlLkNvbXBsZXRlUHJlSUNPOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgd2hpbGUgKF9pbnZlc3RvcnNUb1Byb2Nlc3MgPiAwICYmIG51bWJlck9mSW52ZXN0b3JzID4gMCkgewogICAgICAgICAgICAgICAgLS1udW1iZXJPZkludmVzdG9yczsKICAgICAgICAgICAgICAgIC0tX2ludmVzdG9yc1RvUHJvY2VzczsKICAgICAgICAgICAgICAgIGRlbGV0ZSBpbnZlc3RvcnNbaW52ZXN0b3JzSXRlcltudW1iZXJPZkludmVzdG9yc11dOwogICAgICAgICAgICAgICAgZGVsZXRlIGludmVzdG9yc0l0ZXJbbnVtYmVyT2ZJbnZlc3RvcnNdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChudW1iZXJPZkludmVzdG9ycyA+IDApIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuUHJlSUNPKSB7CiAgICAgICAgICAgICAgICBpZiAoIWNyb3dkc2FsZU93bmVyLnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7CiAgICAgICAgICAgICAgICBzdGF0ZSA9IFN0YXRlLkNvbXBsZXRlUHJlSUNPOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKCFjcm93ZHNhbGVPd25lci5zZW5kKDE1MDAwMDAgKiAxMDAwMDAwMDAwMDAwMDAwMDAwIC8gZXRoZXJQcmljZSkpIHRocm93OwogICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFkZGl0aW9uYWwgdG9rZW5zIGZvciBvd25lciAoMjglIG9mIGNvbXBsZXRlIHRvdGFsU3VwcGx5KQogICAgICAgICAgICAgICAgYmFsYW5jZU9mW293bmVyXSA9IHRvdGFsU3VwcGx5ICogMjggLyA3MjsKICAgICAgICAgICAgICAgIHRvdGFsU3VwcGx5ICs9IHRvdGFsU3VwcGx5ICogMjggLyA3MjsKICAgICAgICAgICAgICAgIHN0YXRlID0gU3RhdGUuRW5hYmxlZDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBOZXdTdGF0ZShzdGF0ZSk7CiAgICB9CiAgICAKICAgIC8vIFRoaXMgZnVuY3Rpb24gbXVzdCBiZSBjYWxsZWQgYnkgdG9rZW4gaG9sZGVyIGluIGNhc2Ugb2YgY3Jvd2RzYWxlIGZhaWxlZAogICAgZnVuY3Rpb24gd2l0aGRyYXdCYWNrKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkRpc2FibGVkIHx8IHN0YXRlID09IFN0YXRlLkNvbXBsZXRlUHJlSUNPKTsKICAgICAgICB1aW50IHZhbHVlID0gaW52ZXN0b3JzW21zZy5zZW5kZXJdLmFtb3VudFdlaTsKICAgICAgICBpZiAodmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGRlbGV0ZSBpbnZlc3RvcnNbbXNnLnNlbmRlcl07CiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodmFsdWUpOwogICAgICAgIH0KICAgIH0KfQoKY29udHJhY3QgVG9rZW4gaXMgQ3Jvd2RzYWxlIHsKICAgIAogICAgc3RyaW5nICBwdWJsaWMgc3RhbmRhcmQgICAgPSAnVG9rZW4gMC4xJzsKICAgIHN0cmluZyAgcHVibGljIG5hbWUgICAgICAgID0gJ1BST09GJzsKICAgIHN0cmluZyAgcHVibGljIHN5bWJvbCAgICAgID0gIlBGIjsKICAgIHVpbnQ4ICAgcHVibGljIGRlY2ltYWxzICAgID0gMDsKCiAgICBtb2RpZmllciBvbmx5VG9rZW5Ib2xkZXJzIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZlttc2cuc2VuZGVyXSAhPSAwKTsKICAgICAgICBfOwogICAgfQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93ZWQ7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICBmdW5jdGlvbiBUb2tlbigpIHBheWFibGUgQ3Jvd2RzYWxlKCkge30KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBlbmFibGVkU3RhdGUgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA+PSBiYWxhbmNlT2ZbX3RvXSk7IC8vIG92ZXJmbG93CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgZW5hYmxlZFN0YXRlIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlID49IGJhbGFuY2VPZltfdG9dKTsgLy8gb3ZlcmZsb3cKICAgICAgICByZXF1aXJlKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBlbmFibGVkU3RhdGUgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IGVuYWJsZWRTdGF0ZQogICAgICAgIHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cn0KCmNvbnRyYWN0IE1pZ3JhdGlvbkFnZW50IHsKICAgIGZ1bmN0aW9uIG1pZ3JhdGVGcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKTsKfQoKY29udHJhY3QgVG9rZW5NaWdyYXRpb24gaXMgVG9rZW4gewogICAgCiAgICBhZGRyZXNzIHB1YmxpYyBtaWdyYXRpb25BZ2VudDsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsTWlncmF0ZWQ7CgogICAgZXZlbnQgTWlncmF0ZShhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKCiAgICBmdW5jdGlvbiBUb2tlbk1pZ3JhdGlvbigpIHBheWFibGUgVG9rZW4oKSB7fQoKICAgIC8vIE1pZ3JhdGUgX3ZhbHVlIG9mIHRva2VucyB0byB0aGUgbmV3IHRva2VuIGNvbnRyYWN0CiAgICBmdW5jdGlvbiBtaWdyYXRlKHVpbnQyNTYgX3ZhbHVlKSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5NaWdyYXRpb24pOwogICAgICAgIHJlcXVpcmUobWlncmF0aW9uQWdlbnQgIT0gMCk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgIT0gMCk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZU9mW21zZy5zZW5kZXJdKTsKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIHRvdGFsU3VwcGx5IC09IF92YWx1ZTsKICAgICAgICB0b3RhbE1pZ3JhdGVkICs9IF92YWx1ZTsKICAgICAgICBNaWdyYXRpb25BZ2VudChtaWdyYXRpb25BZ2VudCkubWlncmF0ZUZyb20obXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgICAgICBNaWdyYXRlKG1zZy5zZW5kZXIsIG1pZ3JhdGlvbkFnZW50LCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldE1pZ3JhdGlvbkFnZW50KGFkZHJlc3MgX2FnZW50KSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobWlncmF0aW9uQWdlbnQgPT0gMCk7CiAgICAgICAgbWlncmF0aW9uQWdlbnQgPSBfYWdlbnQ7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5NaWdyYXRpb247CiAgICB9Cn0KCmNvbnRyYWN0IFByb29mVGVhbVZvdGUgaXMgVG9rZW5NaWdyYXRpb24gewoKICAgIGZ1bmN0aW9uIFByb29mVGVhbVZvdGUoKSBwYXlhYmxlIFRva2VuTWlncmF0aW9uKCkge30KCiAgICBldmVudCBWb3RpbmdTdGFydGVkKHVpbnQgd2VpUmVxRnVuZCk7CiAgICBldmVudCBWb3RlZChhZGRyZXNzIGluZGV4ZWQgdm90ZXIsIGJvb2wgaW5TdXBwb3J0KTsKICAgIGV2ZW50IFZvdGluZ0ZpbmlzaGVkKGJvb2wgaW5TdXBwb3J0KTsKCiAgICBzdHJ1Y3QgVm90ZSB7CiAgICAgICAgYm9vbCBpblN1cHBvcnQ7CiAgICAgICAgYm9vbCB2b3RlZDsKICAgIH0KCiAgICB1aW50IHB1YmxpYyB3ZWlSZXFGdW5kOwogICAgdWludCBwdWJsaWMgdm90aW5nRGVhZGxpbmU7CiAgICB1aW50IHB1YmxpYyBudW1iZXJPZlZvdGVzOwogICAgdWludCBwdWJsaWMgeWVhOwogICAgdWludCBwdWJsaWMgbmF5OwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBWb3RlKSBwdWJsaWMgdm90ZXM7CiAgICBtYXBwaW5nICh1aW50ID0+IGFkZHJlc3MpIHB1YmxpYyB2b3Rlc0l0ZXI7CgogICAgZnVuY3Rpb24gc3RhcnRWb3RpbmcodWludCBfd2VpUmVxRnVuZCkgcHVibGljIGVuYWJsZWRPck1pZ3JhdGlvblN0YXRlIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZSh3ZWlSZXFGdW5kID09IDAgJiYgX3dlaVJlcUZ1bmQgPiAwICYmIF93ZWlSZXFGdW5kIDw9IHRoaXMuYmFsYW5jZSk7CiAgICAgICAgd2VpUmVxRnVuZCA9IF93ZWlSZXFGdW5kOwogICAgICAgIHZvdGluZ0RlYWRsaW5lID0gbm93ICsgNyBkYXlzOwogICAgICAgIGRlbGV0ZSB5ZWE7CiAgICAgICAgZGVsZXRlIG5heTsKICAgICAgICBWb3RpbmdTdGFydGVkKF93ZWlSZXFGdW5kKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdm90aW5nSW5mbygpIHB1YmxpYyBjb25zdGFudCBlbmFibGVkT3JNaWdyYXRpb25TdGF0ZQogICAgICAgIHJldHVybnModWludCBfd2VpUmVxRnVuZCwgdWludCBfdGltZVRvRmluaXNoKSB7CiAgICAgICAgX3dlaVJlcUZ1bmQgPSB3ZWlSZXFGdW5kOwogICAgICAgIGlmICh2b3RpbmdEZWFkbGluZSA8PSBub3cpIHsKICAgICAgICAgICAgX3RpbWVUb0ZpbmlzaCA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RpbWVUb0ZpbmlzaCA9IHZvdGluZ0RlYWRsaW5lIC0gbm93OwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB2b3RlKGJvb2wgX2luU3VwcG9ydCkgcHVibGljIG9ubHlUb2tlbkhvbGRlcnMgZW5hYmxlZE9yTWlncmF0aW9uU3RhdGUKICAgICAgICByZXR1cm5zICh1aW50IHZvdGVJZCkgewogICAgICAgIHJlcXVpcmUodm90ZXNbbXNnLnNlbmRlcl0udm90ZWQgIT0gdHJ1ZSk7CiAgICAgICAgcmVxdWlyZSh2b3RpbmdEZWFkbGluZSA+IG5vdyk7CiAgICAgICAgdm90ZUlkID0gbnVtYmVyT2ZWb3RlcysrOwogICAgICAgIHZvdGVzSXRlclt2b3RlSWRdID0gbXNnLnNlbmRlcjsKICAgICAgICB2b3Rlc1ttc2cuc2VuZGVyXSA9IFZvdGUoe2luU3VwcG9ydDogX2luU3VwcG9ydCwgdm90ZWQ6IHRydWV9KTsKICAgICAgICBWb3RlZChtc2cuc2VuZGVyLCBfaW5TdXBwb3J0KTsKICAgICAgICByZXR1cm4gdm90ZUlkOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmlzaFZvdGluZyh1aW50IF92b3Rlc1RvUHJvY2VzcykgcHVibGljIGVuYWJsZWRPck1pZ3JhdGlvblN0YXRlCiAgICAgICAgcmV0dXJucyAoYm9vbCBfaW5TdXBwb3J0KSB7CiAgICAgICAgcmVxdWlyZShub3cgPj0gdm90aW5nRGVhZGxpbmUpOwoKICAgICAgICB3aGlsZSAoX3ZvdGVzVG9Qcm9jZXNzID4gMCAmJiBudW1iZXJPZlZvdGVzID4gMCkgewogICAgICAgICAgICBhZGRyZXNzIHZvdGVyID0gdm90ZXNJdGVyWy0tbnVtYmVyT2ZWb3Rlc107CiAgICAgICAgICAgIFZvdGUgbWVtb3J5IHYgPSB2b3Rlc1t2b3Rlcl07CiAgICAgICAgICAgIHVpbnQgdm90ZVdlaWdodCA9IGJhbGFuY2VPZlt2b3Rlcl07CiAgICAgICAgICAgIGlmICh2LmluU3VwcG9ydCkgewogICAgICAgICAgICAgICAgeWVhICs9IHZvdGVXZWlnaHQ7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBuYXkgKz0gdm90ZVdlaWdodDsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWxldGUgdm90ZXNbdm90ZXJdOwogICAgICAgICAgICBkZWxldGUgdm90ZXNJdGVyW251bWJlck9mVm90ZXNdOwogICAgICAgICAgICAtLV92b3Rlc1RvUHJvY2VzczsKICAgICAgICB9CiAgICAgICAgaWYgKG51bWJlck9mVm90ZXMgPiAwKSB7CiAgICAgICAgICAgIF9pblN1cHBvcnQgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgX2luU3VwcG9ydCA9ICh5ZWEgPiBuYXkpOwogICAgICAgIHVpbnQgd2VpRm9yU2VuZCA9IHdlaVJlcUZ1bmQ7CiAgICAgICAgZGVsZXRlIHdlaVJlcUZ1bmQ7CiAgICAgICAgZGVsZXRlIHZvdGluZ0RlYWRsaW5lOwogICAgICAgIGRlbGV0ZSBudW1iZXJPZlZvdGVzOwoKICAgICAgICBpZiAoX2luU3VwcG9ydCkgewogICAgICAgICAgICBpZiAobWlncmF0aW9uQWdlbnQgPT0gMCkgewogICAgICAgICAgICAgICAgaWYgKCFvd25lci5zZW5kKHdlaUZvclNlbmQpKSB0aHJvdzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICghbWlncmF0aW9uQWdlbnQuc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgVm90aW5nRmluaXNoZWQoX2luU3VwcG9ydCk7CiAgICB9Cn0KCmNvbnRyYWN0IFByb29mUHVibGljVm90ZSBpcyBQcm9vZlRlYW1Wb3RlIHsKCiAgICBmdW5jdGlvbiBQcm9vZlB1YmxpY1ZvdGUoKSBwYXlhYmxlIFByb29mVGVhbVZvdGUoKSB7fQoKICAgIGV2ZW50IERlcGxveWVkKGFkZHJlc3MgaW5kZXhlZCBwcm9qZWN0T3duZXIsIHVpbnQgcHJvb2ZSZXFGdW5kLCBzdHJpbmcgdXJsSW5mbyk7CiAgICBldmVudCBWb3RlZChhZGRyZXNzIGluZGV4ZWQgcHJvamVjdE93bmVyLCBhZGRyZXNzIGluZGV4ZWQgdm90ZXIsIGJvb2wgaW5TdXBwb3J0KTsKICAgIGV2ZW50IFZvdGluZ0ZpbmlzaGVkKGFkZHJlc3MgaW5kZXhlZCBwcm9qZWN0T3duZXIsIGJvb2wgaW5TdXBwb3J0KTsKCiAgICBzdHJ1Y3QgUHJvamVjdCB7CiAgICAgICAgdWludCAgIHByb29mUmVxRnVuZDsKICAgICAgICBzdHJpbmcgdXJsSW5mbzsKICAgICAgICB1aW50ICAgdm90aW5nRGVhZGxpbmU7CiAgICAgICAgdWludCAgIG51bWJlck9mVm90ZXM7CiAgICAgICAgdWludCAgIHllYTsKICAgICAgICB1aW50ICAgbmF5OwogICAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gVm90ZSkgdm90ZXM7CiAgICAgICAgbWFwcGluZyAodWludCA9PiBhZGRyZXNzKSB2b3Rlc0l0ZXI7CiAgICB9CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IFByb2plY3QpIHB1YmxpYyBwcm9qZWN0czsKCiAgICBmdW5jdGlvbiBkZXBsb3lQcm9qZWN0KHVpbnQgX3Byb29mUmVxRnVuZCwgc3RyaW5nIF91cmxJbmZvKSBwdWJsaWMKICAgICAgICBvbmx5VG9rZW5Ib2xkZXJzIGVuYWJsZWRPck1pZ3JhdGlvblN0YXRlIHsKICAgICAgICByZXF1aXJlKF9wcm9vZlJlcUZ1bmQgPiAwICYmIF9wcm9vZlJlcUZ1bmQgPD0gYmFsYW5jZU9mW3RoaXNdKTsKICAgICAgICByZXF1aXJlKF9wcm9vZlJlcUZ1bmQgPD0gYmFsYW5jZU9mW21zZy5zZW5kZXJdICogMTAwMCk7CiAgICAgICAgcmVxdWlyZShwcm9qZWN0c1ttc2cuc2VuZGVyXS5wcm9vZlJlcUZ1bmQgPT0gMCk7CiAgICAgICAgcHJvamVjdHNbbXNnLnNlbmRlcl0ucHJvb2ZSZXFGdW5kID0gX3Byb29mUmVxRnVuZDsKICAgICAgICBwcm9qZWN0c1ttc2cuc2VuZGVyXS51cmxJbmZvID0gX3VybEluZm87CiAgICAgICAgcHJvamVjdHNbbXNnLnNlbmRlcl0udm90aW5nRGVhZGxpbmUgPSBub3cgKyA3IGRheXM7CiAgICAgICAgRGVwbG95ZWQobXNnLnNlbmRlciwgX3Byb29mUmVxRnVuZCwgX3VybEluZm8pOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBwcm9qZWN0SW5mbyhhZGRyZXNzIF9wcm9qZWN0T3duZXIpIGVuYWJsZWRPck1pZ3JhdGlvblN0YXRlIGNvbnN0YW50IHB1YmxpYyAKICAgICAgICByZXR1cm5zKHVpbnQgX3Byb29mUmVxRnVuZCwgc3RyaW5nIF91cmxJbmZvLCB1aW50IF90aW1lVG9GaW5pc2gpIHsKICAgICAgICBfcHJvb2ZSZXFGdW5kID0gcHJvamVjdHNbX3Byb2plY3RPd25lcl0ucHJvb2ZSZXFGdW5kOwogICAgICAgIF91cmxJbmZvID0gcHJvamVjdHNbX3Byb2plY3RPd25lcl0udXJsSW5mbzsKICAgICAgICBpZiAocHJvamVjdHNbX3Byb2plY3RPd25lcl0udm90aW5nRGVhZGxpbmUgPD0gbm93KSB7CiAgICAgICAgICAgIF90aW1lVG9GaW5pc2ggPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aW1lVG9GaW5pc2ggPSBwcm9qZWN0c1tfcHJvamVjdE93bmVyXS52b3RpbmdEZWFkbGluZSAtIG5vdzsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdm90ZShhZGRyZXNzIF9wcm9qZWN0T3duZXIsIGJvb2wgX2luU3VwcG9ydCkgcHVibGljCiAgICAgICAgb25seVRva2VuSG9sZGVycyBlbmFibGVkT3JNaWdyYXRpb25TdGF0ZSByZXR1cm5zICh1aW50IHZvdGVJZCkgewogICAgICAgIFByb2plY3Qgc3RvcmFnZSBwID0gcHJvamVjdHNbX3Byb2plY3RPd25lcl07CiAgICAgICAgcmVxdWlyZShwLnByb29mUmVxRnVuZCA+IDApOwogICAgICAgIHJlcXVpcmUocC52b3Rlc1ttc2cuc2VuZGVyXS52b3RlZCAhPSB0cnVlKTsKICAgICAgICByZXF1aXJlKHAudm90aW5nRGVhZGxpbmUgPiBub3cpOwogICAgICAgIHZvdGVJZCA9IHAubnVtYmVyT2ZWb3RlcysrOwogICAgICAgIHAudm90ZXNJdGVyW3ZvdGVJZF0gPSBtc2cuc2VuZGVyOwogICAgICAgIHAudm90ZXNbbXNnLnNlbmRlcl0gPSBWb3RlKHtpblN1cHBvcnQ6IF9pblN1cHBvcnQsIHZvdGVkOiB0cnVlfSk7CiAgICAgICAgVm90ZWQoX3Byb2plY3RPd25lciwgbXNnLnNlbmRlciwgX2luU3VwcG9ydCk7IAogICAgICAgIHJldHVybiB2b3RlSWQ7CiAgICB9CgogICAgZnVuY3Rpb24gZmluaXNoVm90aW5nKGFkZHJlc3MgX3Byb2plY3RPd25lciwgdWludCBfdm90ZXNUb1Byb2Nlc3MpIHB1YmxpYwogICAgICAgIGVuYWJsZWRPck1pZ3JhdGlvblN0YXRlIHJldHVybnMgKGJvb2wgX2luU3VwcG9ydCkgewogICAgICAgIFByb2plY3Qgc3RvcmFnZSBwID0gcHJvamVjdHNbX3Byb2plY3RPd25lcl07CiAgICAgICAgcmVxdWlyZShwLnByb29mUmVxRnVuZCA+IDApOwogICAgICAgIHJlcXVpcmUobm93ID49IHAudm90aW5nRGVhZGxpbmUgJiYgcC5wcm9vZlJlcUZ1bmQgPD0gYmFsYW5jZU9mW3RoaXNdKTsKCiAgICAgICAgd2hpbGUgKF92b3Rlc1RvUHJvY2VzcyA+IDAgJiYgcC5udW1iZXJPZlZvdGVzID4gMCkgewogICAgICAgICAgICBhZGRyZXNzIHZvdGVyID0gcC52b3Rlc0l0ZXJbLS1wLm51bWJlck9mVm90ZXNdOwogICAgICAgICAgICBWb3RlIG1lbW9yeSB2ID0gcC52b3Rlc1t2b3Rlcl07CiAgICAgICAgICAgIHVpbnQgdm90ZVdlaWdodCA9IGJhbGFuY2VPZlt2b3Rlcl07CiAgICAgICAgICAgIGlmICh2LmluU3VwcG9ydCkgewogICAgICAgICAgICAgICAgcC55ZWEgKz0gdm90ZVdlaWdodDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHAubmF5ICs9IHZvdGVXZWlnaHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGVsZXRlIHAudm90ZXNJdGVyW3AubnVtYmVyT2ZWb3Rlc107CiAgICAgICAgICAgIGRlbGV0ZSBwLnZvdGVzW3ZvdGVyXTsKICAgICAgICAgICAgLS1fdm90ZXNUb1Byb2Nlc3M7CiAgICAgICAgfQogICAgICAgIGlmIChwLm51bWJlck9mVm90ZXMgPiAwKSB7CiAgICAgICAgICAgIF9pblN1cHBvcnQgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgX2luU3VwcG9ydCA9IChwLnllYSA+IHAubmF5KTsKCiAgICAgICAgdWludCBwcm9vZlJlcUZ1bmQgPSBwLnByb29mUmVxRnVuZDsKICAgICAgICBkZWxldGUgcHJvamVjdHNbX3Byb2plY3RPd25lcl07CgogICAgICAgIGlmIChfaW5TdXBwb3J0KSB7CiAgICAgICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW19wcm9qZWN0T3duZXJdICsgcHJvb2ZSZXFGdW5kID49IGJhbGFuY2VPZltfcHJvamVjdE93bmVyXSk7IC8vIG92ZXJmbG93CiAgICAgICAgICAgIGJhbGFuY2VPZlt0aGlzXSAtPSBwcm9vZlJlcUZ1bmQ7CiAgICAgICAgICAgIGJhbGFuY2VPZltfcHJvamVjdE93bmVyXSArPSBwcm9vZlJlcUZ1bmQ7CiAgICAgICAgICAgIFRyYW5zZmVyKHRoaXMsIF9wcm9qZWN0T3duZXIsIHByb29mUmVxRnVuZCk7CiAgICAgICAgfQoKICAgICAgICBWb3RpbmdGaW5pc2hlZChfcHJvamVjdE93bmVyLCBfaW5TdXBwb3J0KTsKICAgIH0KfQoKY29udHJhY3QgUHJvb2YgaXMgUHJvb2ZQdWJsaWNWb3RlIHsKCiAgICBzdHJ1Y3QgU3d5cGUgewogICAgICAgIHVpbnQxNiAgc3d5cGU7CiAgICAgICAgdWludCAgICB0aW1lc3RhbXBTd3lwZTsKICAgIH0KICAgIAogICAgc3RydWN0IFZpZGVvIHsKICAgICAgICB1aW50MTYgIHN3eXBlOwogICAgICAgIHVpbnQgICAgdGltZXN0YW1wU3d5cGU7CiAgICAgICAgdWludCAgICB0aW1lc3RhbXBIYXNoOwogICAgICAgIGFkZHJlc3Mgb3duZXI7CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBTd3lwZSkgcHVibGljIHN3eXBlczsKICAgIG1hcHBpbmcgKGJ5dGVzMzIgPT4gVmlkZW8pIHB1YmxpYyB2aWRlb3M7CgogICAgdWludCBwcmljZUluVG9rZW5zOwogICAgdWludCB0ZWFtRmVlOwoKICAgIGZ1bmN0aW9uIFByb29mKCkgcGF5YWJsZSBQcm9vZlB1YmxpY1ZvdGUoKSB7fQoKICAgIGZ1bmN0aW9uIHNldFByaWNlKHVpbnQgX3ByaWNlSW5Ub2tlbnMpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX3ByaWNlSW5Ub2tlbnMgPj0gMik7CiAgICAgICAgdGVhbUZlZSA9IF9wcmljZUluVG9rZW5zIC8gMTA7CiAgICAgICAgaWYgKHRlYW1GZWUgPT0gMCkgewogICAgICAgICAgICB0ZWFtRmVlID0gMTsKICAgICAgICB9CiAgICAgICAgcHJpY2VJblRva2VucyA9IF9wcmljZUluVG9rZW5zIC0gdGVhbUZlZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzd3lwZUNvZGUoKSBwdWJsaWMgZW5hYmxlZFN0YXRlIHJldHVybnMgKHVpbnQxNiBfc3d5cGUpIHsKICAgICAgICBieXRlczMyIGJsb2NrSGFzaCA9IGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXIgLSAxKTsKICAgICAgICBieXRlczMyIHNoYVRlbXAgPSBzaGEzKG1zZy5zZW5kZXIsIGJsb2NrSGFzaCk7CiAgICAgICAgX3N3eXBlID0gdWludDE2KHVpbnQyNTYoc2hhVGVtcCkgJSA2NTUzNik7CiAgICAgICAgc3d5cGVzW21zZy5zZW5kZXJdID0gU3d5cGUoe3N3eXBlOiBfc3d5cGUsIHRpbWVzdGFtcFN3eXBlOiBub3d9KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0SGFzaCh1aW50MTYgX3N3eXBlLCBieXRlczMyIF9oYXNoKSBwdWJsaWMgZW5hYmxlZFN0YXRlIHsKICAgICAgICByZXF1aXJlKHN3eXBlc1ttc2cuc2VuZGVyXS50aW1lc3RhbXBTd3lwZSAhPSAwKTsKICAgICAgICByZXF1aXJlKHN3eXBlc1ttc2cuc2VuZGVyXS5zd3lwZSA9PSBfc3d5cGUpOwogICAgICAgIHRyYW5zZmVyKG93bmVyLCB0ZWFtRmVlKTsKICAgICAgICB0cmFuc2Zlcih0aGlzLCBwcmljZUluVG9rZW5zKTsKICAgICAgICB2aWRlb3NbX2hhc2hdID0gVmlkZW8oe3N3eXBlOiBfc3d5cGUsIHRpbWVzdGFtcFN3eXBlOnN3eXBlc1ttc2cuc2VuZGVyXS50aW1lc3RhbXBTd3lwZSwgCiAgICAgICAgICAgIHRpbWVzdGFtcEhhc2g6IG5vdywgb3duZXI6IG1zZy5zZW5kZXJ9KTsKICAgICAgICBkZWxldGUgc3d5cGVzW21zZy5zZW5kZXJdOwogICAgfQp9'.
	

]
