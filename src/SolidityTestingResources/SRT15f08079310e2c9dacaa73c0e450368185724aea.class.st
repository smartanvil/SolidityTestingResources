Class {
	#name : #SRT15f08079310e2c9dacaa73c0e450368185724aea,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT15f08079310e2c9dacaa73c0e450368185724aea >> base64 [
	^ 'LyoqCiAqIFRoZSBlZGdlbGVzcyBjYXNpbm8gY29udHJhY3QgaG9sZHMgdGhlIHBsYXllcnMncyBmdW5kcyBhbmQgcHJvdmlkZXMgc3RhdGUgY2hhbm5lbCBmdW5jdGlvbmFsaXR5LgogKiBUaGUgY2FzaW5vIGhhcyBhdCBubyB0aW1lIGNvbnRyb2wgb3ZlciB0aGUgcGxheWVycydzIGZ1bmRzLgogKiBTdGF0ZSBjaGFubmVscyBjYW4gYmUgdXBkYXRlZCBhbmQgY2xvc2VkIGZyb20gYm90aCBwYXJ0aWVzOiB0aGUgcGxheWVyIGFuZCB0aGUgY2FzaW5vLgogKiBhdXRob3I6IEp1bGlhIEFsdGVucmllZAogKiovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xNzsKCmNvbnRyYWN0IFNhZmVNYXRoIHsKCglmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBwdXJlIGludGVybmFsIHJldHVybnModWludCkgewoJCWFzc2VydChiIDw9IGEpOwoJCXJldHVybiBhIC0gYjsKCX0KCQoJZnVuY3Rpb24gc2FmZVN1YihpbnQgYSwgaW50IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyhpbnQpIHsKCQlpZihiIDwgMCkgYXNzZXJ0KGEgLSBiID4gYSk7CgkJZWxzZSBhc3NlcnQoYSAtIGIgPD0gYSk7CgkJcmV0dXJuIGEgLSBiOwoJfQoKCWZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyh1aW50KSB7CgkJdWludCBjID0gYSArIGI7CgkJYXNzZXJ0KGMgPj0gYSAmJiBjID49IGIpOwoJCXJldHVybiBjOwoJfQoKCWZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBvd25lZCB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gb3duZWQoKSBwdWJsaWN7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljewogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cn0KCi8qKiBvd25lciBzaG91bGQgYmUgYWJsZSB0byBjbG9zZSB0aGUgY29udHJhY3QgaXMgbm9ib2R5IGhhcyBiZWVuIHVzaW5nIGl0IGZvciBhdCBsZWFzdCAzMCBkYXlzICovCmNvbnRyYWN0IG1vcnRhbCBpcyBvd25lZCB7CgkvKiogY29udHJhY3QgY2FuIGJlIGNsb3NlZCBieSB0aGUgb3duZXIgYW55dGltZSBhZnRlciB0aGlzIHRpbWVzdGFtcCBpZiBub24temVybyAqLwoJdWludCBwdWJsaWMgY2xvc2VBdDsKCS8qKgoJKiBsZXRzIHRoZSBvd25lciBjbG9zZSB0aGUgY29udHJhY3QgaWYgdGhlcmUgYXJlIG5vIHBsYXllciBmdW5kcyBvbiBpdCBvciBpZiBub2JvZHkgaGFzIGJlZW4gdXNpbmcgaXQgZm9yIGF0IGxlYXN0IDMwIGRheXMKCSovCiAgZnVuY3Rpb24gY2xvc2VDb250cmFjdCh1aW50IHBsYXllckJhbGFuY2UpIGludGVybmFsewoJCWlmKHBsYXllckJhbGFuY2UgPT0gMCkgc2VsZmRlc3RydWN0KG93bmVyKTsKCQlpZihjbG9zZUF0ID09IDApIGNsb3NlQXQgPSBub3cgKyAzMCBkYXlzOwoJCWVsc2UgaWYoY2xvc2VBdCA8IG5vdykgc2VsZmRlc3RydWN0KG93bmVyKTsKICB9CgoJLyoqCgkqIGluIGNhc2UgY2xvc2UgaGFzIGJlZW4gY2FsbGVkIGFjY2lkZW50YWxseS4KCSoqLwoJZnVuY3Rpb24gb3BlbigpIG9ubHlPd25lciBwdWJsaWN7CgkJY2xvc2VBdCA9IDA7Cgl9CgoJLyoqCgkqIG1ha2Ugc3VyZSB0aGUgY29udHJhY3QgaXMgbm90IGluIHByb2Nlc3Mgb2YgYmVpbmcgY2xvc2VkLgoJKiovCgltb2RpZmllciBpc0FsaXZlIHsKCQlyZXF1aXJlKGNsb3NlQXQgPT0gMCk7CgkJXzsKCX0KCgkvKioKCSogZGVsYXlzIHRoZSB0aW1lIG9mIGNsb3NpbmcuCgkqKi8KCW1vZGlmaWVyIGtlZXBBbGl2ZSB7CgkJaWYoY2xvc2VBdCA+IDApIGNsb3NlQXQgPSBub3cgKyAzMCBkYXlzOwoJCV87Cgl9Cn0KCgpjb250cmFjdCBjaGFyZ2luZ0dhcyBpcyBtb3J0YWwsIFNhZmVNYXRoewogIC8qKiB0aGUgcHJpY2UgcGVyIGtnYXMgYW5kIEdXZWkgaW4gdG9rZW5zICg1IGRlY2ltYWxzKSAqLwoJdWludCBwdWJsaWMgZ2FzUHJpY2U7CgkvKiogdGhlIGFtb3VudCBvZiBnYXMgdXNlZCBwZXIgdHJhbnNhY3Rpb24gaW4ga0dhcyAqLwoJbWFwcGluZyhieXRlczQgPT4gdWludCkgcHVibGljIGdhc1BlclR4OwoJCgkvKioKCSAqIHNldHMgdGhlIGFtb3VudCBvZiBnYXMgY29uc3VtZWQgYnkgbWV0aG9kcyB3aXRoIHRoZSBnaXZlbiBzaWdhbnR1cmVzLgoJICogb25seSBjYWxsZWQgZnJvbSB0aGUgZWRnZWxlc3MgY2FzaW5vIGNvbnN0cnVjdG9yLgoJICogQHBhcmFtIHNpZ25hdHVyZXMgYW4gYXJyYXkgb2YgbWV0aG9kLXNpZ25hdHVyZXMKCSAqICAgICAgICBnYXNOZWVkZWQgIHRoZSBhbW91bnQgb2YgZ2FzIGNvbnN1bWVkIGJ5IHRoZXNlIG1ldGhvZHMKCSAqICovCglmdW5jdGlvbiBzZXRHYXNVc2FnZShieXRlczRbM10gc2lnbmF0dXJlcywgdWludFszXSBnYXNOZWVkZWQpIGludGVybmFsewoJICByZXF1aXJlKHNpZ25hdHVyZXMubGVuZ3RoID09IGdhc05lZWRlZC5sZW5ndGgpOwoJICBmb3IodWludDggaSA9IDA7IGkgPCBzaWduYXR1cmVzLmxlbmd0aDsgaSsrKQoJICAgIGdhc1BlclR4W3NpZ25hdHVyZXNbaV1dID0gZ2FzTmVlZGVkW2ldOwoJfQoJCgkvKioKCSAqIGFkZHMgdGhlIGdhcyBjb3N0IG9mIHRoZSB0eCB0byB0aGUgZ2l2ZW4gdmFsdWUuCgkgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIHRvIGFkZCB0aGUgZ2FzIGNvc3QgdG8KCSAqICovCglmdW5jdGlvbiBhZGRHYXModWludCB2YWx1ZSkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyh1aW50KXsKICAJcmV0dXJuIHNhZmVBZGQodmFsdWUsZ2V0R2FzQ29zdCgpKTsKCX0KCQoJLyoqCgkgKiBzdWJ0cmFjdHMgdGhlIGdhcyBjb3N0IG9mIHRoZSB0eCBmcm9tIHRoZSBnaXZlbiB2YWx1ZS4KCSAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgdG8gc3VidHJhY3QgdGhlIGdhcyBjb3N0IGZyb20KCSAqICovCglmdW5jdGlvbiBzdWJ0cmFjdEdhcyh1aW50IHZhbHVlKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQpewogIAlyZXR1cm4gc2FmZVN1Yih2YWx1ZSxnZXRHYXNDb3N0KCkpOwoJfQoJCgkKCS8qKgoJKiB1cGRhdGVzIHRoZSBwcmljZSBwZXIgMTAwMCBnYXMgaW4gRURHLgoJKiBAcGFyYW0gcHJpY2UgdGhlIG5ldyBnYXMgcHJpY2UgKDQgZGVjaW1hbHMsIG1heCAwLjAyNTYgRURHKQoJKiovCglmdW5jdGlvbiBzZXRHYXNQcmljZSh1aW50OCBwcmljZSkgcHVibGljIG9ubHlPd25lcnsKCQlnYXNQcmljZSA9IHByaWNlOwoJfQoJCgkvKioKCSAqIHJldHVybnMgdGhlIGdhcyBjb3N0IG9mIHRoZSBjYWxsZWQgZnVuY3Rpb24uCgkgKiAqLwoJZnVuY3Rpb24gZ2V0R2FzQ29zdCgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnModWludCl7CgkgIHJldHVybiBzYWZlTXVsKHNhZmVNdWwoZ2FzUGVyVHhbbXNnLnNpZ10sIGdhc1ByaWNlKSwgdHguZ2FzcHJpY2UpLzEwMDAwMDAwMDA7Cgl9Cgp9Cgpjb250cmFjdCBUb2tlbiB7CglmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBzZW5kZXIsIGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgYW1vdW50KSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpIHt9CgoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyByZWNlaXZlciwgdWludCBhbW91bnQpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2Vzcykge30KCglmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBob2xkZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpIHt9Cn0KCmNvbnRyYWN0IENhc2lub0JhbmsgaXMgY2hhcmdpbmdHYXN7CgkvKiogdGhlIHRvdGFsIGJhbGFuY2Ugb2YgYWxsIHBsYXllcnMgd2l0aCA1IHZpcnR1YWwgZGVjaW1hbHMgKiovCgl1aW50IHB1YmxpYyBwbGF5ZXJCYWxhbmNlOwoJLyoqIHRoZSBiYWxhbmNlIHBlciBwbGF5ZXIgaW4gZWRnZWxlc3MgdG9rZW5zIHdpdGggNSB2aXJ0dWFsIGRlY2ltYWxzICovCgltYXBwaW5nKGFkZHJlc3M9PnVpbnQpIHB1YmxpYyBiYWxhbmNlT2Y7CgkvKiogaW4gY2FzZSB0aGUgdXNlciB3YW50cy9uZWVkcyB0byBjYWxsIHRoZSB3aXRoZHJhdyBmdW5jdGlvbiBmcm9tIGhpcyBvd24gd2FsbGV0LCBoZSBmaXJzdCBuZWVkcyB0byByZXF1ZXN0IGEgd2l0aGRyYXdhbCAqLwoJbWFwcGluZyhhZGRyZXNzPT51aW50KSBwdWJsaWMgd2l0aGRyYXdBZnRlcjsKCS8qKiB0aGUgZWRnZWxlc3MgdG9rZW4gY29udHJhY3QgKi8KCVRva2VuIGVkZzsKCS8qKiB0aGUgbWF4aW11bSBhbW91bnQgb2YgdG9rZW5zIHRoZSB1c2VyIGlzIGFsbG93ZWQgdG8gZGVwb3NpdCAoNSBkZWNpbWFscykgKi8KCXVpbnQgcHVibGljIG1heERlcG9zaXQ7CgkvKiogd2FpdGluZyB0aW1lIGZvciB3aXRoZHJhd2FsIGlmIG5vdCByZXF1ZXN0ZWQgdmlhIHRoZSBzZXJ2ZXIgKiovCgl1aW50IHB1YmxpYyB3YWl0aW5nVGltZTsKCQoJLyoqIGluZm9ybXMgbGlzdGVuZXJzIGhvdyBtYW55IHRva2VucyB3ZXJlIGRlcG9zaXRlZCBmb3IgYSBwbGF5ZXIgKi8KCWV2ZW50IERlcG9zaXQoYWRkcmVzcyBfcGxheWVyLCB1aW50IF9udW1Ub2tlbnMsIGJvb2wgX2NoYXJnZUdhcyk7CgkvKiogaW5mb3JtcyBsaXN0ZW5lcnMgaG93IG1hbnkgdG9rZW5zIHdlcmUgd2l0aGRyYXduIGZyb20gdGhlIHBsYXllciB0byB0aGUgcmVjZWl2ZXIgYWRkcmVzcyAqLwoJZXZlbnQgV2l0aGRyYXdhbChhZGRyZXNzIF9wbGF5ZXIsIGFkZHJlc3MgX3JlY2VpdmVyLCB1aW50IF9udW1Ub2tlbnMpOwoKCWZ1bmN0aW9uIENhc2lub0JhbmsoYWRkcmVzcyB0b2tlbkNvbnRyYWN0LCB1aW50IGRlcG9zaXRMaW1pdCkgcHVibGljewoJCWVkZyA9IFRva2VuKHRva2VuQ29udHJhY3QpOwoJCW1heERlcG9zaXQgPSBkZXBvc2l0TGltaXQ7CgkJd2FpdGluZ1RpbWUgPSA5MCBtaW51dGVzOwoJfQoKCS8qKgoJKiBhY2NlcHRzIGRlcG9zaXRzIGZvciBhbiBhcmJpdHJhcnkgYWRkcmVzcy4KCSogcmV0cmlldmVzIHRva2VucyBmcm9tIHRoZSBtZXNzYWdlIHNlbmRlciBhbmQgYWRkcyB0aGVtIHRvIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KCSogZWRnZWxlc3MgdG9rZW5zIGRvIG5vdCBoYXZlIGFueSBkZWNpbWFscywgYnV0IGFyZSByZXByZXNlbnRlZCBvbiB0aGlzIGNvbnRyYWN0IHdpdGggNSBkZWNpbWFscy4KCSogQHBhcmFtIHJlY2VpdmVyICBhZGRyZXNzIG9mIHRoZSByZWNlaXZlcgoJKiAgICAgICAgbnVtVG9rZW5zIG51bWJlciBvZiB0b2tlbnMgdG8gZGVwb3NpdCAoMCBkZWNpbWFscykKCSoJCQkJIGNoYXJnZUdhcyBpbmRpY2F0ZXMgaWYgdGhlIGdhcyBjb3N0IGlzIHN1YnRyYWN0ZWQgZnJvbSB0aGUgdXNlcidzIGVkZ2VsZXNzIHRva2VuIGJhbGFuY2UKCSoqLwoJZnVuY3Rpb24gZGVwb3NpdChhZGRyZXNzIHJlY2VpdmVyLCB1aW50IG51bVRva2VucywgYm9vbCBjaGFyZ2VHYXMpIHB1YmxpYyBpc0FsaXZlewoJCXJlcXVpcmUobnVtVG9rZW5zID4gMCk7CgkJdWludCB2YWx1ZSA9IHNhZmVNdWwobnVtVG9rZW5zLDEwMDAwMCk7CgkJaWYoY2hhcmdlR2FzKSB2YWx1ZSA9IHN1YnRyYWN0R2FzKHZhbHVlKTsKCQl1aW50IG5ld0JhbGFuY2UgPSBzYWZlQWRkKGJhbGFuY2VPZltyZWNlaXZlcl0sIHZhbHVlKTsKCQlyZXF1aXJlKG5ld0JhbGFuY2UgPD0gbWF4RGVwb3NpdCk7CgkJYXNzZXJ0KGVkZy50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgYWRkcmVzcyh0aGlzKSwgbnVtVG9rZW5zKSk7CgkJYmFsYW5jZU9mW3JlY2VpdmVyXSA9IG5ld0JhbGFuY2U7CgkJcGxheWVyQmFsYW5jZSA9IHNhZmVBZGQocGxheWVyQmFsYW5jZSwgdmFsdWUpOwoJCURlcG9zaXQocmVjZWl2ZXIsIG51bVRva2VucywgY2hhcmdlR2FzKTsKICB9CgoJLyoqCgkqIElmIHRoZSB1c2VyIHdhbnRzL25lZWRzIHRvIHdpdGhkcmF3IGhpcyBmdW5kcyBoaW1zZWxmLCBoZSBuZWVkcyB0byByZXF1ZXN0IHRoZSB3aXRoZHJhd2FsIGZpcnN0LgoJKiBUaGlzIG1ldGhvZCBzZXRzIHRoZSBlYXJsaWVzdCBwb3NzaWJsZSB3aXRoZHJhd2FsIGRhdGUgdG8gJ3dhaXRpbmdUaW1lIGZyb20gbm93IChkZWZhdWx0IDkwbSwgYnV0IHVwIHRvIDI0aCkuCgkqIFJlYXNvbjogVGhlIHVzZXIgc2hvdWxkIG5vdCBiZSBhYmxlIHRvIHdpdGhkcmF3IGhpcyBmdW5kcywgd2hpbGUgdGhlIHRoZSBsYXN0IGdhbWUgbWV0aG9kcyBoYXZlIG5vdCB5ZXQgYmVlbiBtaW5lZC4KCSoqLwoJZnVuY3Rpb24gcmVxdWVzdFdpdGhkcmF3YWwoKSBwdWJsaWN7CgkJd2l0aGRyYXdBZnRlclttc2cuc2VuZGVyXSA9IG5vdyArIHdhaXRpbmdUaW1lOwoJfQoKCS8qKgoJKiBJbiBjYXNlIHRoZSB1c2VyIHJlcXVlc3RlZCBhIHdpdGhkcmF3YWwgYW5kIGNoYW5nZXMgaGlzIG1pbmQuCgkqIE5lY2Vzc2FyeSB0byBiZSBhYmxlIHRvIGNvbnRpbnVlIHBsYXlpbmcuCgkqKi8KCWZ1bmN0aW9uIGNhbmNlbFdpdGhkcmF3YWxSZXF1ZXN0KCkgcHVibGljewoJCXdpdGhkcmF3QWZ0ZXJbbXNnLnNlbmRlcl0gPSAwOwoJfQoKCS8qKgoJKiB3aXRoZHJhd3MgYW4gYW1vdW50IGZyb20gdGhlIHVzZXIgYmFsYW5jZSBpZiB0aGUgd2FpdGluZyB0aW1lIHBhc3NlZCBzaW5jZSB0aGUgcmVxdWVzdC4KCSogQHBhcmFtIGFtb3VudCB0aGUgYW1vdW50IG9mIHRva2VucyB0byB3aXRoZHJhdwoJKiovCglmdW5jdGlvbiB3aXRoZHJhdyh1aW50IGFtb3VudCkgcHVibGljIGtlZXBBbGl2ZXsKCQlyZXF1aXJlKHdpdGhkcmF3QWZ0ZXJbbXNnLnNlbmRlcl0+MCAmJiBub3c+d2l0aGRyYXdBZnRlclttc2cuc2VuZGVyXSk7CgkJd2l0aGRyYXdBZnRlclttc2cuc2VuZGVyXSA9IDA7CgkJdWludCB2YWx1ZSA9IHNhZmVNdWwoYW1vdW50LDEwMDAwMCk7CgkJYmFsYW5jZU9mW21zZy5zZW5kZXJdPXNhZmVTdWIoYmFsYW5jZU9mW21zZy5zZW5kZXJdLHZhbHVlKTsKCQlwbGF5ZXJCYWxhbmNlID0gc2FmZVN1YihwbGF5ZXJCYWxhbmNlLCB2YWx1ZSk7CgkJYXNzZXJ0KGVkZy50cmFuc2Zlcihtc2cuc2VuZGVyLCBhbW91bnQpKTsKCQlXaXRoZHJhd2FsKG1zZy5zZW5kZXIsIG1zZy5zZW5kZXIsIGFtb3VudCk7Cgl9CgoJLyoqCgkqIGxldHMgdGhlIG93bmVyIHdpdGhkcmF3IGZyb20gdGhlIGJhbmtyb2xsCgkqIEBwYXJhbSBudW1Ub2tlbnMgdGhlIG51bWJlciBvZiB0b2tlbnMgdG8gd2l0aGRyYXcgKDAgZGVjaW1hbHMpCgkqKi8KCWZ1bmN0aW9uIHdpdGhkcmF3QmFua3JvbGwodWludCBudW1Ub2tlbnMpIHB1YmxpYyBvbmx5T3duZXIgewoJCXJlcXVpcmUobnVtVG9rZW5zIDw9IGJhbmtyb2xsKCkpOwoJCWFzc2VydChlZGcudHJhbnNmZXIob3duZXIsIG51bVRva2VucykpOwoJfQoKCS8qKgoJKiByZXR1cm5zIHRoZSBjdXJyZW50IGJhbmtyb2xsIGluIHRva2VucyB3aXRoIDAgZGVjaW1hbHMKCSoqLwoJZnVuY3Rpb24gYmFua3JvbGwoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50KXsKCQlyZXR1cm4gc2FmZVN1YihlZGcuYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpLCBwbGF5ZXJCYWxhbmNlLzEwMDAwMCk7Cgl9CgkKCQoJLyoqCgkqIHVwZGF0ZXMgdGhlIG1heGltdW0gZGVwb3NpdC4KCSogQHBhcmFtIG5ld01heCB0aGUgbmV3IG1heGltdW0gZGVwb3NpdCAoNSBkZWNpbWFscykKCSoqLwoJZnVuY3Rpb24gc2V0TWF4RGVwb3NpdCh1aW50IG5ld01heCkgcHVibGljIG9ubHlPd25lcnsKCQltYXhEZXBvc2l0ID0gbmV3TWF4OwoJfQoJCgkvKioKCSAqIHNldHMgdGhlIHRpbWUgdGhlIHBsYXllciBoYXMgdG8gd2FpdCBmb3IgaGlzIGZ1bmRzIHRvIGJlIHVubG9ja2VkIGJlZm9yZSB3aXRoZHJhd2FsIChpZiBub3Qgd2l0aGRyYXdpbmcgd2l0aCBoZWxwIG9mIHRoZSBjYXNpbm8gc2VydmVyKS4KCSAqIHRoZSB0aW1lIG1heSBub3QgYmUgbG9uZ2VyIHRoYW4gMjQgaG91cnMuCgkgKiBAcGFyYW0gbmV3V2FpdGluZ1RpbWUgdGhlIG5ldyB3YWl0aW5nIHRpbWUgaW4gc2Vjb25kcwoJICogKi8KCWZ1bmN0aW9uIHNldFdhaXRpbmdUaW1lKHVpbnQgbmV3V2FpdGluZ1RpbWUpIHB1YmxpYyBvbmx5T3duZXJ7CgkJcmVxdWlyZShuZXdXYWl0aW5nVGltZSA8PSAyNCBob3Vycyk7CgkJd2FpdGluZ1RpbWUgPSBuZXdXYWl0aW5nVGltZTsKCX0KCgkvKioKCSAqIGxldHMgdGhlIG93bmVyIGNsb3NlIHRoZSBjb250cmFjdCBpZiB0aGVyZSBhcmUgbm8gcGxheWVyIGZ1bmRzIG9uIGl0IG9yIGlmIG5vYm9keSBoYXMgYmVlbiB1c2luZyBpdCBmb3IgYXQgbGVhc3QgMzAgZGF5cwoJICogKi8KCWZ1bmN0aW9uIGNsb3NlKCkgcHVibGljIG9ubHlPd25lcnsKCQljbG9zZUNvbnRyYWN0KHBsYXllckJhbGFuY2UpOwoJfQp9Cgpjb250cmFjdCBFZGdlbGVzc0Nhc2lubyBpcyBDYXNpbm9CYW5rewoJLyoqIGluZGljYXRlcyBpZiBhbiBhZGRyZXNzIGlzIGF1dGhvcml6ZWQgdG8gYWN0IGluIHRoZSBjYXNpbm8ncyBuYW1lICAqLwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBhdXRob3JpemVkOwoJLyoqIGEgbnVtYmVyIHRvIGNvdW50IHdpdGhkcmF3YWwgc2lnbmF0dXJlcyB0byBlbnN1cmUgZWFjaCBzaWduYXR1cmUgaXMgZGlmZmVyZW50IGV2ZW4gaWYgd2l0aGRyYXdpbmcgdGhlIHNhbWUgYW1vdW50IHRvIHRoZSBzYW1lIGFkZHJlc3MgKi8KCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgd2l0aGRyYXdDb3VudDsKCS8qKiB0aGUgbW9zdCByZWNlbnQga25vd24gc3RhdGUgb2YgYSBzdGF0ZSBjaGFubmVsICovCgltYXBwaW5nKGFkZHJlc3MgPT4gU3RhdGUpIHB1YmxpYyBsYXN0U3RhdGU7CiAgICAvKiogZmlyZWQgd2hlbiB0aGUgc3RhdGUgaXMgdXBkYXRlZCAqLwogICAgZXZlbnQgU3RhdGVVcGRhdGUodWludDEyOCBjb3VudCwgaW50MTI4IHdpbkJhbGFuY2UsIGludCBkaWZmZXJlbmNlLCB1aW50IGdhc0Nvc3QsIGFkZHJlc3MgcGxheWVyLCB1aW50MTI4IGxjb3VudCk7CiAgICAvKiogZmlyZWQgaWYgb25lIG9mIHRoZSBwYXJ0aWVzIGNob29zZXMgdG8gbG9nIHRoZSBzZWVkcyBhbmQgcmVzdWx0cyAqLwogICAgZXZlbnQgR2FtZURhdGEoYWRkcmVzcyBwbGF5ZXIsIGJ5dGVzMzJbXSBzZXJ2ZXJTZWVkcywgYnl0ZXMzMltdIGNsaWVudFNlZWRzLCBpbnRbXSByZXN1bHRzKTsKICAKCXN0cnVjdCBTdGF0ZXsKCQl1aW50MTI4IGNvdW50OwoJCWludDEyOCB3aW5CYWxhbmNlOwoJfQoKICAgIG1vZGlmaWVyIG9ubHlBdXRob3JpemVkIHsKICAgICAgICByZXF1aXJlKGF1dGhvcml6ZWRbbXNnLnNlbmRlcl0pOwogICAgICAgIF87CiAgICB9CgoKICAvKioKICAqIGNyZWF0ZXMgYSBuZXcgZWRnZWxlc3MgY2FzaW5vIGNvbnRyYWN0LgogICogQHBhcmFtIGF1dGhvcml6ZWRBZGRyZXNzIHRoZSBhZGRyZXNzIHdoaWNoIG1heSBzZW5kIHRyYW5zYWN0aW9ucyB0byB0aGUgRWRnZWxlc3MgQ2FzaW5vCiAgKgkJCQkgdG9rZW5Db250cmFjdCAgICAgdGhlIGFkZHJlc3Mgb2YgdGhlIEVkZ2VsZXNzIHRva2VuIGNvbnRyYWN0CiAgKiAJCQkgZGVwb3NpdExpbWl0ICAgICAgdGhlIG1heGltdW0gZGVwb3NpdCBhbGxvd2VkCiAgKiAJCQkga0dhc1ByaWNlCQkJCSB0aGUgcHJpY2UgcGVyIGtHYXMgaW4gV0VJCiAgKiovCiAgZnVuY3Rpb24gRWRnZWxlc3NDYXNpbm8oYWRkcmVzcyBhdXRob3JpemVkQWRkcmVzcywgYWRkcmVzcyB0b2tlbkNvbnRyYWN0LCB1aW50IGRlcG9zaXRMaW1pdCwgdWludDgga0dhc1ByaWNlKSBDYXNpbm9CYW5rKHRva2VuQ29udHJhY3QsIGRlcG9zaXRMaW1pdCkgcHVibGljewogICAgYXV0aG9yaXplZFthdXRob3JpemVkQWRkcmVzc10gPSB0cnVlOwogICAgLy9kZXBvc2l0LCB3aXRoZHJhd0ZvciwgdXBkYXRlQ2hhbm5lbAogICAgYnl0ZXM0WzNdIG1lbW9yeSBzaWduYXR1cmVzID0gW2J5dGVzNCgweDNlZGQxMTI4KSwweDk2MDc2MTBhLCAweDcxM2QzMGM2XTsKICAgIC8vYW1vdW50IG9mIGdhcyBjb25zdW1lZCBieSB0aGUgYWJvdmUgbWV0aG9kcyBpbiBHV2VpCiAgICB1aW50WzNdIG1lbW9yeSBnYXNVc2FnZSA9IFt1aW50KDE0MSksOTUsNjBdOwogICAgc2V0R2FzVXNhZ2Uoc2lnbmF0dXJlcywgZ2FzVXNhZ2UpOwogICAgc2V0R2FzUHJpY2Uoa0dhc1ByaWNlKTsKICB9CgoKICAvKioKICAqIHRyYW5zZmVycyBhbiBhbW91bnQgZnJvbSB0aGUgY29udHJhY3QgYmFsYW5jZSB0byB0aGUgb3duZXIncyB3YWxsZXQuCiAgKiBAcGFyYW0gcmVjZWl2ZXIgdGhlIHJlY2VpdmVyIGFkZHJlc3MKCSoJCQkJIGFtb3VudCAgIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIHdpdGhkcmF3ICgwIGRlY2ltYWxzKQoJKgkJCQkgdixyLHMgCQl0aGUgc2lnbmF0dXJlIG9mIHRoZSBwbGF5ZXIKICAqKi8KICBmdW5jdGlvbiB3aXRoZHJhd0ZvcihhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpIHB1YmxpYyBvbmx5QXV0aG9yaXplZCBrZWVwQWxpdmV7Cgl2YXIgcGxheWVyID0gZWNyZWNvdmVyKGtlY2NhazI1NihyZWNlaXZlciwgYW1vdW50LCB3aXRoZHJhd0NvdW50W3JlY2VpdmVyXSksIHYsIHIsIHMpOwoJd2l0aGRyYXdDb3VudFtyZWNlaXZlcl0rKzsKCXVpbnQgdmFsdWUgPSBhZGRHYXMoc2FmZU11bChhbW91bnQsMTAwMDAwKSk7CiAgICBiYWxhbmNlT2ZbcGxheWVyXSA9IHNhZmVTdWIoYmFsYW5jZU9mW3BsYXllcl0sIHZhbHVlKTsKCXBsYXllckJhbGFuY2UgPSBzYWZlU3ViKHBsYXllckJhbGFuY2UsIHZhbHVlKTsKICAgIGFzc2VydChlZGcudHJhbnNmZXIocmVjZWl2ZXIsIGFtb3VudCkpOwoJV2l0aGRyYXdhbChwbGF5ZXIsIHJlY2VpdmVyLCBhbW91bnQpOwogIH0KCiAgLyoqCiAgKiBhdXRob3JpemUgYSBhZGRyZXNzIHRvIGNhbGwgZ2FtZSBmdW5jdGlvbnMuCiAgKiBAcGFyYW0gYWRkciB0aGUgYWRkcmVzcyB0byBiZSBhdXRob3JpemVkCiAgKiovCiAgZnVuY3Rpb24gYXV0aG9yaXplKGFkZHJlc3MgYWRkcikgcHVibGljIG9ubHlPd25lcnsKICAgIGF1dGhvcml6ZWRbYWRkcl0gPSB0cnVlOwogIH0KCiAgLyoqCiAgKiBkZWF1dGhvcml6ZSBhIGFkZHJlc3MgdG8gY2FsbCBnYW1lIGZ1bmN0aW9ucy4KICAqIEBwYXJhbSBhZGRyIHRoZSBhZGRyZXNzIHRvIGJlIGRlYXV0aG9yaXplZAogICoqLwogIGZ1bmN0aW9uIGRlYXV0aG9yaXplKGFkZHJlc3MgYWRkcikgcHVibGljIG9ubHlPd25lcnsKICAgIGF1dGhvcml6ZWRbYWRkcl0gPSBmYWxzZTsKICB9CgogIC8qKgogICAqIGNsb3NlcyBhIHN0YXRlIGNoYW5uZWwuIGNhbiBhbHNvIGJlIHVzZWQgZm9yIGludGVybWVkaWF0ZSBzdGF0ZSB1cGRhdGVzLiBjYW4gYmUgY2FsbGVkIGJ5IGJvdGggcGFydGllcy4KICAgKiAxLiB2ZXJpZmllcyB0aGUgc2lnbmF0dXJlLgogICAqIDIuIHZlcmlmaWVzIGlmIHRoZSBzaWduZWQgZ2FtZS1jb3VudCBpcyBoaWdoZXIgdGhhbiB0aGUgbGFzdCBrbm93biBnYW1lLWNvdW50IG9mIHRoaXMgY2hhbm5lbC4KICAgKiAzLiB1cGRhdGVzIHRoZSBiYWxhbmNlcyBhY2NvcmRpbmdseS4gVGhpcyBtZWFuczogSXQgY2hlY2tzIHRoZSBhbHJlYWR5IHBlcmZvcm1lZCB1cGRhdGVzIGZvciB0aGlzIGNoYW5uZWwgYW5kIGNvbXB1dGVzCiAgICogICAgdGhlIG5ldyBiYWxhbmNlIGRpZmZlcmVuY2UgdG8gYWRkIG9yIHN1YnRyYWN0IGZyb20gdGhlIHBsYXllcuKAmHMgYmFsYW5jZS4KICAgKiBAcGFyYW0gd2luQmFsYW5jZSB0aGUgY3VycmVudCB3aW4gb3IgbG9zcwogICAqCQkJCWdhbWVDb3VudCAgdGhlIG51bWJlciBvZiBzaWduZWQgZ2FtZSBtb3ZlcwogICAqCQkJCXYscixzICAgICAgdGhlIHNpZ25hdHVyZSBvZiBlaXRoZXIgdGhlIGNhc2lubyBvciB0aGUgcGxheWVyCiAgICogKi8KICBmdW5jdGlvbiB1cGRhdGVTdGF0ZShpbnQxMjggd2luQmFsYW5jZSwgIHVpbnQxMjggZ2FtZUNvdW50LCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgcHVibGljewogIAlhZGRyZXNzIHBsYXllciA9IGRldGVybWluZVBsYXllcih3aW5CYWxhbmNlLCBnYW1lQ291bnQsIHYsIHIsIHMpOwogIAl1aW50IGdhc0Nvc3QgPSAwOwogIAlpZihwbGF5ZXIgPT0gbXNnLnNlbmRlcikvL2lmIHRoZSBwbGF5ZXIgY2xvc2VzIHRoZSBzdGF0ZSBjaGFubmVsIGhpbXNlbGYsIG1ha2Ugc3VyZSB0aGUgc2lnbmVyIGlzIGEgY2FzaW5vIHdhbGxldAogIAkJcmVxdWlyZShhdXRob3JpemVkW2VjcmVjb3ZlcihrZWNjYWsyNTYocGxheWVyLCB3aW5CYWxhbmNlLCBnYW1lQ291bnQpLCB2LCByLCBzKV0pOwogIAllbHNlLy9pZiB0aGUgY2FzaW5vIHdhbGxldCBpcyB0aGUgc2VuZGVyLCBzdWJ0cmFjdCB0aGUgZ2FzIGNvc3RzIGZyb20gdGhlIHBsYXllciBiYWxhbmNlCiAgCQlnYXNDb3N0ID0gZ2V0R2FzQ29zdCgpOwogIAlTdGF0ZSBzdG9yYWdlIGxhc3QgPSBsYXN0U3RhdGVbcGxheWVyXTsKICAJcmVxdWlyZShnYW1lQ291bnQgPiBsYXN0LmNvdW50KTsKICAJaW50IGRpZmZlcmVuY2UgPSB1cGRhdGVQbGF5ZXJCYWxhbmNlKHBsYXllciwgd2luQmFsYW5jZSwgbGFzdC53aW5CYWxhbmNlLCBnYXNDb3N0KTsKICAJbGFzdFN0YXRlW3BsYXllcl0gPSBTdGF0ZShnYW1lQ291bnQsIHdpbkJhbGFuY2UpOwogIAlTdGF0ZVVwZGF0ZShnYW1lQ291bnQsIHdpbkJhbGFuY2UsIGRpZmZlcmVuY2UsIGdhc0Nvc3QsIHBsYXllciwgbGFzdC5jb3VudCk7CiAgfQoKICAvKioKICAgKiBkZXRlcm1pbmVzIGlmIHRoZSBtc2cuc2VuZGVyIG9yIHRoZSBzaWduZXIgb2YgdGhlIHBhc3NlZCBzaWduYXR1cmUgaXMgdGhlIHBsYXllci4gcmV0dXJucyB0aGUgcGxheWVyJ3MgYWRkcmVzcwogICAqIEBwYXJhbSB3aW5CYWxhbmNlIHRoZSBjdXJyZW50IHdpbkJhbGFuY2UsIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBtc2cgaGFzaAogICAqCQkJCWdhbWVDb3VudCAgdGhlIGN1cnJlbnQgZ2FtZUNvdW50LCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgbXNnLmhhc2gKICAgKgkJCQl2LCByLCBzICAgIHRoZSBzaWduYXR1cmUgb2YgdGhlIG5vbi1zZW5kaW5nIHBhcnR5CiAgICogKi8KICBmdW5jdGlvbiBkZXRlcm1pbmVQbGF5ZXIoaW50MTI4IHdpbkJhbGFuY2UsIHVpbnQxMjggZ2FtZUNvdW50LCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyhhZGRyZXNzKXsKICAJaWYgKGF1dGhvcml6ZWRbbXNnLnNlbmRlcl0pLy9jYXNpbm8gaXMgdGhlIHNlbmRlciAtPiBwbGF5ZXIgaXMgdGhlIHNpZ25lcgogIAkJcmV0dXJuIGVjcmVjb3ZlcihrZWNjYWsyNTYod2luQmFsYW5jZSwgZ2FtZUNvdW50KSwgdiwgciwgcyk7CiAgCWVsc2UKICAJCXJldHVybiBtc2cuc2VuZGVyOwogIH0KCgkvKioKCSAqIGNvbXB1dGVzIHRoZSBkaWZmZXJlbmNlIG9mIHRoZSB3aW4gYmFsYW5jZSByZWxhdGl2ZSB0byB0aGUgbGFzdCBrbm93biBzdGF0ZSBhbmQgYWRkcyBpdCB0byB0aGUgcGxheWVyJ3MgYmFsYW5jZS4KCSAqIGluIGNhc2UgdGhlIGNhc2lubyBpcyB0aGUgc2VuZGVyLCB0aGUgZ2FzIGNvc3QgaW4gRURHIGdldHMgc3VidHJhY3RlZCBmcm9tIHRoZSBwbGF5ZXIncyBiYWxhbmNlLgoJICogQHBhcmFtIHBsYXllciB0aGUgYWRkcmVzcyBvZiB0aGUgcGxheWVyCgkgKgkJCQl3aW5CYWxhbmNlIHRoZSBjdXJyZW50IHdpbi1iYWxhbmNlCgkgKgkJCQlsYXN0V2luQmFsYW5jZSB0aGUgd2luLWJhbGFuY2Ugb2YgdGhlIGxhc3Qga25vd24gc3RhdGUKCSAqCQkJCWdhc0Nvc3QgdGhlIGdhcyBjb3N0IG9mIHRoZSB0eAoJICogKi8KICBmdW5jdGlvbiB1cGRhdGVQbGF5ZXJCYWxhbmNlKGFkZHJlc3MgcGxheWVyLCBpbnQxMjggd2luQmFsYW5jZSwgaW50MTI4IGxhc3RXaW5CYWxhbmNlLCB1aW50IGdhc0Nvc3QpIGludGVybmFsIHJldHVybnMoaW50IGRpZmZlcmVuY2UpewogIAlkaWZmZXJlbmNlID0gc2FmZVN1Yih3aW5CYWxhbmNlLCBsYXN0V2luQmFsYW5jZSk7CiAgCWludCBvdXRzdGFuZGluZyA9IHNhZmVTdWIoZGlmZmVyZW5jZSwgaW50KGdhc0Nvc3QpKTsKICAJdWludCBvdXRzOwogIAlpZihvdXRzdGFuZGluZyA8IDApewogIAkJb3V0cyA9IHVpbnQyNTYob3V0c3RhbmRpbmcgKiAoLTEpKTsKICAJCXBsYXllckJhbGFuY2UgPSBzYWZlU3ViKHBsYXllckJhbGFuY2UsIG91dHMpOwogIAkJYmFsYW5jZU9mW3BsYXllcl0gPSBzYWZlU3ViKGJhbGFuY2VPZltwbGF5ZXJdLCBvdXRzKTsKICAJfQogIAllbHNlewogIAkJb3V0cyA9IHVpbnQyNTYob3V0c3RhbmRpbmcpOwogIAkgIHBsYXllckJhbGFuY2UgPSBzYWZlQWRkKHBsYXllckJhbGFuY2UsIG91dHMpOwogIAkgIGJhbGFuY2VPZltwbGF5ZXJdID0gc2FmZUFkZChiYWxhbmNlT2ZbcGxheWVyXSwgb3V0cyk7CiAgCX0KICB9CiAgCiAgLyoqCiAgICogbG9ncyBzb21lIHNlZWRzIGFuZCBnYW1lIHJlc3VsdHMgZm9yIHBsYXllcnMgd2lzaGluZyB0byBoYXZlIHRoZWlyIGdhbWUgaGlzdG9yeSBsb2dnZWQgYnkgdGhlIGNvbnRyYWN0CiAgICogQHBhcmFtIHNlcnZlclNlZWRzIGFycmF5IGNvbnRhaW5pbmcgdGhlIHNlcnZlciBzZWVkcwogICAqICAgICAgICBjbGllbnRTZWVkcyBhcnJheSBjb250YWluaW5nIHRoZSBjbGllbnQgc2VlZHMKICAgKiAgICAgICAgcmVzdWx0cyAgICAgYXJyYXkgY29udGFpbmluZyB0aGUgcmVzdWx0cwogICAqICAgICAgICB2LCByLCBzICAgICB0aGUgc2lnbmF0dXJlIG9mIHRoZSBub24tc2VuZGluZyBwYXJ0eSAodG8gbWFrZSBzdXJlIHRoZSBjb3JyY2V0IHJlc3VsdHMgYXJlIGxvZ2dlZCkKICAgKiAqLwogIGZ1bmN0aW9uIGxvZ0dhbWVEYXRhKGJ5dGVzMzJbXSBzZXJ2ZXJTZWVkcywgYnl0ZXMzMltdIGNsaWVudFNlZWRzLCBpbnRbXSByZXN1bHRzLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgcHVibGljewogICAgYWRkcmVzcyBwbGF5ZXIgPSBkZXRlcm1pbmVQbGF5ZXIoc2VydmVyU2VlZHMsIGNsaWVudFNlZWRzLCByZXN1bHRzLCB2LCByLCBzKTsKICAgIEdhbWVEYXRhKHBsYXllciwgc2VydmVyU2VlZHMsIGNsaWVudFNlZWRzLCByZXN1bHRzKTsKICAgIC8vY2hhcmdlIGdhcyBpbiBjYXNlIHRoZSBzZXJ2ZXIgaXMgbG9nZ2luZyB0aGUgcmVzdWx0cyBmb3IgdGhlIHBsYXllcgogICAgaWYocGxheWVyICE9IG1zZy5zZW5kZXIpewogICAgICB1aW50IGdhc0Nvc3QgPSAoNTcgKyA3NjggKiBzZXJ2ZXJTZWVkcy5sZW5ndGggLyAxMDAwKSpnYXNQcmljZTsKICAgICAgYmFsYW5jZU9mW3BsYXllcl0gPSBzYWZlU3ViKGJhbGFuY2VPZltwbGF5ZXJdLCBnYXNDb3N0KTsKICAgICAgcGxheWVyQmFsYW5jZSA9IHNhZmVTdWIocGxheWVyQmFsYW5jZSwgZ2FzQ29zdCk7CiAgICB9CiAgfQogIAogIC8qKgogICAqIGRldGVybWluZXMgaWYgdGhlIG1zZy5zZW5kZXIgb3IgdGhlIHNpZ25lciBvZiB0aGUgcGFzc2VkIHNpZ25hdHVyZSBpcyB0aGUgcGxheWVyLiByZXR1cm5zIHRoZSBwbGF5ZXIncyBhZGRyZXNzCiAgICogQHBhcmFtIHNlcnZlclNlZWRzIGFycmF5IGNvbnRhaW5pbmcgdGhlIHNlcnZlciBzZWVkcwogICAqICAgICAgICBjbGllbnRTZWVkcyBhcnJheSBjb250YWluaW5nIHRoZSBjbGllbnQgc2VlZHMKICAgKiAgICAgICAgcmVzdWx0cyAgICAgYXJyYXkgY29udGFpbmluZyB0aGUgcmVzdWx0cwogICAqCQkJCXYsIHIsIHMgICAgdGhlIHNpZ25hdHVyZSBvZiB0aGUgbm9uLXNlbmRpbmcgcGFydHkKICAgKiAqLwogIGZ1bmN0aW9uIGRldGVybWluZVBsYXllcihieXRlczMyW10gc2VydmVyU2VlZHMsIGJ5dGVzMzJbXSBjbGllbnRTZWVkcywgaW50W10gcmVzdWx0cywgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMoYWRkcmVzcyl7CiAgCWlmIChhdXRob3JpemVkW21zZy5zZW5kZXJdKS8vY2FzaW5vIGlzIHRoZSBzZW5kZXIgLT4gcGxheWVyIGlzIHRoZSBzaWduZXIKICAJCXJldHVybiBlY3JlY292ZXIoa2VjY2FrMjU2KHNlcnZlclNlZWRzLCBjbGllbnRTZWVkcywgcmVzdWx0cyksIHYsIHIsIHMpOwogIAllbHNlCiAgCQlyZXR1cm4gbXNnLnNlbmRlcjsKICB9Cgp9'.
	

]
