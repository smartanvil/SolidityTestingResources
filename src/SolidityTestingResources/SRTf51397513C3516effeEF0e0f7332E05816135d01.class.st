Class {
	#name : #SRTf51397513C3516effeEF0e0f7332E05816135d01,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf51397513C3516effeEF0e0f7332E05816135d01 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewoKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CgogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKfQoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CgogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwoKfQoKCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CgogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9CgoKY29udHJhY3QgUmVsZWFzYWJsZSBpcyBPd25hYmxlIHsKCiAgZXZlbnQgUmVsZWFzZSgpOwoKICBib29sIHB1YmxpYyByZWxlYXNlZCA9IGZhbHNlOwoKICBtb2RpZmllciBhZnRlclJlbGVhc2VkKCkgewogICAgcmVxdWlyZShyZWxlYXNlZCk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gcmVsZWFzZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZSghcmVsZWFzZWQpOwogICAgcmVsZWFzZWQgPSB0cnVlOwogICAgUmVsZWFzZSgpOwogIH0KCn0KCgpjb250cmFjdCBNYW5hZ2VkIGlzIFJlbGVhc2FibGUgewoKICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBtYW5hZ2VyOwogIGV2ZW50IFNldE1hbmFnZXIoYWRkcmVzcyBfYWRkcik7CiAgZXZlbnQgVW5zZXRNYW5hZ2VyKGFkZHJlc3MgX2FkZHIpOwoKICBmdW5jdGlvbiBNYW5hZ2VkKCkgcHVibGljIHsKICAgIG1hbmFnZXJbbXNnLnNlbmRlcl0gPSB0cnVlOwogIH0KCiAgbW9kaWZpZXIgb25seU1hbmFnZXIoKSB7CiAgICByZXF1aXJlKG1hbmFnZXJbbXNnLnNlbmRlcl0pOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIHNldE1hbmFnZXIoYWRkcmVzcyBfYWRkcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKF9hZGRyICE9IGFkZHJlc3MoMCkgJiYgbWFuYWdlcltfYWRkcl0gPT0gZmFsc2UpOwogICAgbWFuYWdlcltfYWRkcl0gPSB0cnVlOwoKICAgIFNldE1hbmFnZXIoX2FkZHIpOwogIH0KCiAgZnVuY3Rpb24gdW5zZXRNYW5hZ2VyKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShfYWRkciAhPSBhZGRyZXNzKDApICYmIG1hbmFnZXJbX2FkZHJdID09IHRydWUpOwogICAgbWFuYWdlcltfYWRkcl0gPSBmYWxzZTsKCiAgICBVbnNldE1hbmFnZXIoX2FkZHIpOwogIH0KCn0KCgpjb250cmFjdCBSZWxlYXNhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgTWFuYWdlZCB7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIGFmdGVyUmVsZWFzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIHNhbGVUcmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBvbmx5TWFuYWdlciByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIGFmdGVyUmVsZWFzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIGFmdGVyUmVsZWFzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHN1cGVyLmFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyBhZnRlclJlbGVhc2VkIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmV0dXJuIHN1cGVyLmluY3JlYXNlQXBwcm92YWwoX3NwZW5kZXIsIF9hZGRlZFZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgYWZ0ZXJSZWxlYXNlZCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHJldHVybiBzdXBlci5kZWNyZWFzZUFwcHJvdmFsKF9zcGVuZGVyLCBfc3VidHJhY3RlZFZhbHVlKTsKICB9Cgp9CgoKY29udHJhY3QgQnVybmFibGVUb2tlbiBpcyBSZWxlYXNhYmxlVG9rZW4gewoKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CgogICAgLyoqCiAgICAgKiBAZGV2IEJ1cm5zIGEgc3BlY2lmaWMgYW1vdW50IG9mIHRva2Vucy4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSBidXJuZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIG9ubHlNYW5hZ2VyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CiAgICAgICAgLy8gbm8gbmVlZCB0byByZXF1aXJlIHZhbHVlIDw9IHRvdGEwbFN1cHBseSwgc2luY2UgdGhhdCB3b3VsZCBpbXBseSB0aGUKICAgICAgICAvLyBzZW5kZXIncyBiYWxhbmNlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgdG90YWxTdXBwbHksIHdoaWNoICpzaG91bGQqIGJlIGFuIGFzc2VydGlvbiBmYWlsdXJlCgogICAgICAgIGFkZHJlc3MgYnVybmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tidXJuZXJdID0gYmFsYW5jZXNbYnVybmVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIEJ1cm4oYnVybmVyLCBfdmFsdWUpOwogICAgfQoKfQoKCi8qKgogICogIEdBTkEKICAqLwpjb250cmFjdCBHQU5BIGlzIEJ1cm5hYmxlVG9rZW4gewoKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiR0FOQSI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiR0FOQSI7CiAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogIGV2ZW50IENsYWltZWRUb2tlbnMoYWRkcmVzcyBtYW5hZ2VyLCBhZGRyZXNzIF90b2tlbiwgdWludDI1NiBjbGFpbWVkQmFsYW5jZSk7CgogIGZ1bmN0aW9uIEdBTkEoKSBwdWJsaWMgewogICAgdG90YWxTdXBwbHkgPSAyMDAwMDAwMDAwICogMSBldGhlcjsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHk7CiAgfQoKICBmdW5jdGlvbiBjbGFpbVRva2VucyhhZGRyZXNzIF90b2tlbiwgdWludDI1NiBfY2xhaW1lZEJhbGFuY2UpIHB1YmxpYyBvbmx5TWFuYWdlciBhZnRlclJlbGVhc2VkIHsKICAgIEVSQzIwQmFzaWMgdG9rZW4gPSBFUkMyMEJhc2ljKF90b2tlbik7CiAgICB1aW50MjU2IHRva2VuQmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgIHJlcXVpcmUodG9rZW5CYWxhbmNlID49IF9jbGFpbWVkQmFsYW5jZSk7CgogICAgYWRkcmVzcyBtYW5hZ2VyID0gbXNnLnNlbmRlcjsKICAgIHRva2VuLnRyYW5zZmVyKG1hbmFnZXIsIF9jbGFpbWVkQmFsYW5jZSk7CiAgICBDbGFpbWVkVG9rZW5zKG1hbmFnZXIsIF90b2tlbiwgX2NsYWltZWRCYWxhbmNlKTsKICB9Cgp9CgoKLyoqCiAgKiAgV2hpdGVsaXN0IGNvbnRyYWN0CiAgKi8KY29udHJhY3QgV2hpdGVsaXN0IGlzIE93bmFibGUgewoKICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgd2hpdGVsaXN0OwogICBldmVudCBSZWdpc3RlcmVkKGFkZHJlc3MgaW5kZXhlZCBfYWRkcik7CiAgIGV2ZW50IFVucmVnaXN0ZXJlZChhZGRyZXNzIGluZGV4ZWQgX2FkZHIpOwoKICAgbW9kaWZpZXIgb25seVdoaXRlbGlzdGVkKGFkZHJlc3MgX2FkZHIpIHsKICAgICByZXF1aXJlKHdoaXRlbGlzdFtfYWRkcl0pOwogICAgIF87CiAgIH0KCiAgIGZ1bmN0aW9uIGlzV2hpdGVsaXN0KGFkZHJlc3MgX2FkZHIpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wgbGlzdGVkKSB7CiAgICAgcmV0dXJuIHdoaXRlbGlzdFtfYWRkcl07CiAgIH0KCiAgIGZ1bmN0aW9uIHJlZ2lzdGVyQWRkcmVzcyhhZGRyZXNzIF9hZGRyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICByZXF1aXJlKF9hZGRyICE9IGFkZHJlc3MoMCkgJiYgd2hpdGVsaXN0W19hZGRyXSA9PSBmYWxzZSk7CiAgICAgd2hpdGVsaXN0W19hZGRyXSA9IHRydWU7CiAgICAgUmVnaXN0ZXJlZChfYWRkcik7CiAgIH0KCiAgIGZ1bmN0aW9uIHJlZ2lzdGVyQWRkcmVzc2VzKGFkZHJlc3NbXSBfYWRkcnMpIHB1YmxpYyBvbmx5T3duZXIgewogICAgIGZvcih1aW50MjU2IGkgPSAwOyBpIDwgX2FkZHJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICByZXF1aXJlKF9hZGRyc1tpXSAhPSBhZGRyZXNzKDApICYmIHdoaXRlbGlzdFtfYWRkcnNbaV1dID09IGZhbHNlKTsKICAgICAgIHdoaXRlbGlzdFtfYWRkcnNbaV1dID0gdHJ1ZTsKICAgICAgIFJlZ2lzdGVyZWQoX2FkZHJzW2ldKTsKICAgICB9CiAgIH0KCiAgIGZ1bmN0aW9uIHVucmVnaXN0ZXJBZGRyZXNzKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBvbmx5T3duZXIgb25seVdoaXRlbGlzdGVkKF9hZGRyKSB7CiAgICAgICB3aGl0ZWxpc3RbX2FkZHJdID0gZmFsc2U7CiAgICAgICBVbnJlZ2lzdGVyZWQoX2FkZHIpOwogICB9CgogICBmdW5jdGlvbiB1bnJlZ2lzdGVyQWRkcmVzc2VzKGFkZHJlc3NbXSBfYWRkcnMpIHB1YmxpYyBvbmx5T3duZXIgewogICAgIGZvcih1aW50MjU2IGkgPSAwOyBpIDwgX2FkZHJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICByZXF1aXJlKHdoaXRlbGlzdFtfYWRkcnNbaV1dKTsKICAgICAgIHdoaXRlbGlzdFtfYWRkcnNbaV1dID0gZmFsc2U7CiAgICAgICBVbnJlZ2lzdGVyZWQoX2FkZHJzW2ldKTsKICAgICB9CiAgIH0KCn0KCgovKioKICAqICBHQU5BIFBSRS1TQUxFCiAgKi8KY29udHJhY3QgR2FuYVByZVNhbGUgaXMgT3duYWJsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIEdBTkEgcHVibGljIGdhbmE7CiAgV2hpdGVsaXN0IHB1YmxpYyB3aGl0ZWxpc3Q7CiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwogIHVpbnQyNTYgcHVibGljIGhhcmRDYXAgICA9IDEwMDAwIGV0aGVyOyAvL3ByZXNhbGUgY2FwCiAgdWludDI1NiBwdWJsaWMgd2VpUmFpc2VkID0gMDsKICB1aW50MjU2IHB1YmxpYyBtaW5DYXAgICAgPSAzIGV0aGVyOwogIHVpbnQyNTYgcHVibGljIHJhdGUgICAgICA9IDIyMDAwOyAvLyAxIEVUSCA9PSAyMiwwMDAgR0FOQQogIHVpbnQyNTYgcHVibGljIGRlZmF1bHRSYXRlID0gMjAwMDA7CgogIC8vdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lID0gMTQ4MzIyODgwMDsgLy9URVNUIE9OTFkgVVRDIDAxLzAxLzIwMTcgMDA6MDBhbQogIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZSA9IDE1MjMwMDg4MDA7IC8vVVRDIDA0LzA2LzIwMTggMTA6MDBhbQogIHVpbnQyNTYgcHVibGljIGVuZFRpbWUgICA9IDE1MjM3ODY0MDA7IC8vVVRDIDA0LzE1LzIwMTggMTA6MDBhbQoKICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsIGFkZHJlc3MgaW5kZXhlZCBidXllciwgdWludDI1NiB3ZWlBbW91bnQsIHVpbnQyNTYgZ2FuYUFtb3VudCk7CiAgZXZlbnQgUmVmdW5kKGFkZHJlc3MgaW5kZXhlZCBidXllciwgdWludDI1NiB3ZWlBbW91bnQpOwogIGV2ZW50IFRyYW5zZmVyVG9TYWZlKCk7CiAgZXZlbnQgQnVybkFuZFJldHVybkFmdGVyRW5kZWQodWludDI1NiBidXJuQW1vdW50LCB1aW50MjU2IHJldHVybkFtb3VudCk7CgogIGZ1bmN0aW9uIEdhbmFQcmVTYWxlKGFkZHJlc3MgX2dhbmEsIGFkZHJlc3MgX3dhbGxldCwgYWRkcmVzcyBfd2hpdGVsaXN0KSBwdWJsaWMgewogICAgcmVxdWlyZShfd2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgZ2FuYSA9IEdBTkEoX2dhbmEpOwogICAgd2hpdGVsaXN0ID0gV2hpdGVsaXN0KF93aGl0ZWxpc3QpOwogICAgd2FsbGV0ID0gX3dhbGxldDsKICB9CgogIG1vZGlmaWVyIG9ubHlXaGl0ZWxpc3RlZCgpIHsKICAgIHJlcXVpcmUod2hpdGVsaXN0LmlzV2hpdGVsaXN0KG1zZy5zZW5kZXIpKTsKICAgIF87CiAgfQoKICAvLyBmYWxsYmFjayBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBidXkgdG9rZW5zCiAgZnVuY3Rpb24gKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICBidXlHYW5hKG1zZy5zZW5kZXIpOwogIH0KCiAgZnVuY3Rpb24gYnV5R2FuYShhZGRyZXNzIGJ1eWVyKSBwdWJsaWMgb25seVdoaXRlbGlzdGVkIHBheWFibGUgewogICAgcmVxdWlyZSghaGFzRW5kZWQoKSk7CiAgICByZXF1aXJlKGFmdGVyU3RhcnQoKSk7CiAgICByZXF1aXJlKGJ1eWVyICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShidXllciA9PSBtc2cuc2VuZGVyKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IG1pbkNhcCk7CgogICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICAvL3ByZS1jYWxjdWxhdGUgd2VpIHJhaXNlIGFmdGVyIGJ1eWluZwogICAgdWludDI1NiBwcmVDYWxXZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CiAgICB1aW50MjU2IGdhbmFBbW91bnQ7CgogICAgaWYocHJlQ2FsV2VpUmFpc2VkIDw9IGhhcmRDYXApewogICAgICAvL3RoZSBwcmUtY2FsY3VsYXRlIHdlaSByYWlzZSBpcyBsZXNzIHRoYW4gdGhlIGhhcmQgY2FwCiAgICAgIGdhbmFBbW91bnQgPSB3ZWlBbW91bnQubXVsKHJhdGUpOwogICAgICBnYW5hLnNhbGVUcmFuc2ZlcihidXllciwgZ2FuYUFtb3VudCk7CiAgICAgIHdlaVJhaXNlZCA9IHByZUNhbFdlaVJhaXNlZDsKICAgICAgVG9rZW5QdXJjaGFzZShtc2cuc2VuZGVyLCBidXllciwgd2VpQW1vdW50LCBnYW5hQW1vdW50KTsKICAgIH1lbHNlewogICAgICAvL3RoZSBwcmUtY2FsY3VsYXRlIHdlaVJhaXNlZCBpcyBtb3JlIHRoYW4gdGhlIGhhcmQgY2FwCiAgICAgIHVpbnQyNTYgcmVmdW5kV2VpQW1vdW50ID0gcHJlQ2FsV2VpUmFpc2VkLnN1YihoYXJkQ2FwKTsKICAgICAgdWludDI1NiBmdW5kV2VpQW1vdW50ID0gIHdlaUFtb3VudC5zdWIocmVmdW5kV2VpQW1vdW50KTsKICAgICAgZ2FuYUFtb3VudCA9IGZ1bmRXZWlBbW91bnQubXVsKHJhdGUpOwogICAgICBnYW5hLnNhbGVUcmFuc2ZlcihidXllciwgZ2FuYUFtb3VudCk7CiAgICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQoZnVuZFdlaUFtb3VudCk7CiAgICAgIFRva2VuUHVyY2hhc2UobXNnLnNlbmRlciwgYnV5ZXIsIGZ1bmRXZWlBbW91bnQsIGdhbmFBbW91bnQpOwogICAgICBidXllci50cmFuc2ZlcihyZWZ1bmRXZWlBbW91bnQpOwogICAgICBSZWZ1bmQoYnV5ZXIscmVmdW5kV2VpQW1vdW50KTsKICAgIH0KICB9CgogIC8vV2FzIGl0IHNvbGQgb3V0IG9yIHNhbGUgb3ZlcmR1ZQogIGZ1bmN0aW9uIGhhc0VuZGVkKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgYm9vbCBoYXJkQ2FwUmVhY2hlZCA9IHdlaVJhaXNlZCA+PSBoYXJkQ2FwOyAvLyBiYWxpZCBjYXAKICAgIHJldHVybiBoYXJkQ2FwUmVhY2hlZCB8fCBhZnRlckVuZGVkKCk7CiAgfQoKICBmdW5jdGlvbiBhZnRlckVuZGVkKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIG5vdyA+IGVuZFRpbWU7CiAgfQoKICBmdW5jdGlvbiBhZnRlclN0YXJ0KCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIG5vdyA+PSBzdGFydFRpbWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlclRvU2FmZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShoYXNFbmRlZCgpKTsKICAgIHdhbGxldC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgVHJhbnNmZXJUb1NhZmUoKTsKICB9CgogIC8qKgogICogQGRldiBidXJuIHVuc29sZCB0b2tlbiBhbmQgcmV0dXJuIGJvbnVzIHRva2VuCiAgKiBAcGFyYW0gcmVzZXJ2ZVdhbGxldCByZXNlcnZlIHBvb2wgYWRkcmVzcwogICovCiAgZnVuY3Rpb24gYnVybkFuZFJldHVybkFmdGVyRW5kZWQoYWRkcmVzcyByZXNlcnZlV2FsbGV0KSBvbmx5T3duZXIgcHVibGljIHsKICAgIHJlcXVpcmUocmVzZXJ2ZVdhbGxldCAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoaGFzRW5kZWQoKSk7CiAgICB1aW50MjU2IHVuc29sZFdlaSA9IGhhcmRDYXAuc3ViKHdlaVJhaXNlZCk7CiAgICByZXF1aXJlKHVuc29sZFdlaSA+IDApOwogICAgdWludDI1NiB1bnNvbGRHYW5hQW1vdW50ID0gZ2FuYS5iYWxhbmNlT2YodGhpcyk7CiAgICB1aW50MjU2IGJ1cm5HYW5hQW1vdW50ID0gdW5zb2xkV2VpLm11bChkZWZhdWx0UmF0ZSk7CiAgICB1aW50MjU2IGJvbnVzR2FuYUFtb3VudCA9IHVuc29sZEdhbmFBbW91bnQuc3ViKGJ1cm5HYW5hQW1vdW50KTsKICAgIGdhbmEuYnVybihidXJuR2FuYUFtb3VudCk7CiAgICBnYW5hLnNhbGVUcmFuc2ZlcihyZXNlcnZlV2FsbGV0LCBib251c0dhbmFBbW91bnQpOwogICAgQnVybkFuZFJldHVybkFmdGVyRW5kZWQoYnVybkdhbmFBbW91bnQsIGJvbnVzR2FuYUFtb3VudCk7CiAgfQoKICAvKioKICAqIEBkZXYgZW1lcmdlbmN5IGZ1bmN0aW9uIGJlZm9yZSBzYWxlCiAgKiBAcGFyYW0gcmV0dXJuQWRkcmVzcyByZXR1cm4gdG9rZW4gYWRkcmVzcwogICovCiAgZnVuY3Rpb24gcmV0dXJuR2FuYUJlZm9yZVNhbGUoYWRkcmVzcyByZXR1cm5BZGRyZXNzKSBvbmx5T3duZXIgcHVibGljIHsKICAgIHJlcXVpcmUocmV0dXJuQWRkcmVzcyAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUod2VpUmFpc2VkID09IDApOwogICAgdWludDI1NiByZXR1cm5HYW5hID0gZ2FuYS5iYWxhbmNlT2YodGhpcyk7CiAgICBnYW5hLnNhbGVUcmFuc2ZlcihyZXR1cm5BZGRyZXNzLCByZXR1cm5HYW5hKTsKICB9Cgp9'.
	

]
