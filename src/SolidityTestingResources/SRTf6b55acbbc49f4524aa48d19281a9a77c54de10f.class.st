Class {
	#name : #SRTf6b55acbbc49f4524aa48d19281a9a77c54de10f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf6b55acbbc49f4524aa48d19281a9a77c54de10f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgovLyBTYWZlTWF0aCBUYWtlbiBGcm9tIEZpcnN0Qmxvb2QKY29udHJhY3QgU2FmZU1hdGggewogICAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZURpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIGFzc2VydChiID4gMCk7CiAgICAgICAgdWludCBjID0gYSAvIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCi8vIE93bmVyc2hpcApjb250cmFjdCBPd25lZCB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7IGFzc2VydChtc2cuc2VuZGVyID09IG93bmVyKTsgXzsgfQoKICAgIGV2ZW50IE93bmVyVXBkYXRlKGFkZHJlc3MgX3ByZXZPd25lciwgYWRkcmVzcyBfbmV3T3duZXIpOwoKICAgIGZ1bmN0aW9uIE93bmVkKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfbmV3T3duZXIgIT0gb3duZXIpOwogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG5ld093bmVyKTsKICAgICAgICBPd25lclVwZGF0ZShvd25lciwgbmV3T3duZXIpOwogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgbmV3T3duZXIgPSAweDA7CiAgICB9Cn0KCi8vIEVSQzIwIEludGVyZmFjZQpjb250cmFjdCBFUkMyMCB7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgX3RvdGFsU3VwcGx5KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZyk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOwp9CgovLyBFUkMyMFRva2VuCmNvbnRyYWN0IEVSQzIwVG9rZW4gaXMgRVJDMjAsIFNhZmVNYXRoIHsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFRva2VuczsgCiAgICB1aW50MjU2IHB1YmxpYyBjb250cmlidXRvclRva2VuczsgCgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSwgX3ZhbHVlKTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKF9hbGxvd2FuY2UsIF92YWx1ZSk7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHRvdGFsVG9rZW5zOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKfQoKY29udHJhY3QgV29sayBpcyBFUkMyMFRva2VuLCBPd25lZCB7CgogICAgLy8gVE9LRU4gSU5GTwogICAgc3RyaW5nICBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJXT0xLIFRPS0VOIjsKICAgIHN0cmluZyAgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJXTEsiOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICAvLyBSRVNFUlZFCiAgICB1aW50MjU2IHB1YmxpYyByZXNlcnZlQmFsYW5jZSA9IDA7IAogICAgdWludDggICBwdWJsaWMgcGVyY2VudGFnZUVUSFJlc2VydmUgPSA1OwoKICAgIC8vIENPTlRSQUNUIE9XTkVSCiAgICBhZGRyZXNzIHB1YmxpYyB3b2xrSW5jOwoKICAgIC8vIFRPS0VOIEdFTkVSQVRJT04gQ09OVFJPTAogICAgYm9vbCAgICBwdWJsaWMgYWxsU2FsZUNvbXBsZXRlZCA9IGZhbHNlOwoKICAgIG1vZGlmaWVyIGlzVHJhbnNmZXJhYmxlIHsgcmVxdWlyZShhbGxTYWxlQ29tcGxldGVkKTsgXzsgfQoKICAgIC8vIFRPS0VOIEdFTkVSQVRJT04gRVZFTlRMT0cKICAgIGV2ZW50IFdvbGtDcmVhdGVkKGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3Rva2VuQ3JlYXRlZCk7CiAgICBldmVudCBXb2xrRGVzdHJveWVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgdWludDI1NiBfdG9rZW5EZXN0cm95ZWQpOwogICAgZXZlbnQgTG9nUmVmdW5kKGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKfQoKY29udHJhY3QgV29sa1RHRSBpcyBXb2xrIHsKCiAgICAvLyBUT0tFTiBHRU5FUkFUSU9OIEVWRU5UCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGNvbnRyaWJ1dGlvbjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgd2hpdGVsaXN0Q29udHJpYnV0b3I7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuR2VuZXJhdGlvbk1pbiA9ICAgMSAqIDEwKio0ICogMTAqKmRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5HZW5lcmF0aW9uTWF4ID0gMTc1ICogMTAqKjUgKiAxMCoqZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyBzdGFydF9ibG9jazsKICAgIHVpbnQyNTYgcHVibGljIGVuZF90aW1lOwogICAgYm9vbCAgICBreWNSZXF1aXJlbWVudCA9IHRydWU7CgogICAgLy8gQHBhcmFtIF9zdGFydEJsb2NrCiAgICAvLyBAcGFyYW0gX2VuZFRpbWUKICAgIC8vIEBwYXJhbSBfd29sa2luYyAtIHdvbGsgaW5jIHRva2VucyBzZW50IGhlcmUKICAgIC8vIEByZXR1cm4gc3VjY2VzcwogICAgLy8gQGRldiBXb2xrIEdlbmVzaXMgRXZlbnQgW29ubHkgYWNjZXNzaWJsZSBieSBDb250cmFjdCBPd25lcl0KICAgIGZ1bmN0aW9uIHdvbGtHZW5lc2lzKHVpbnQyNTYgX3N0YXJ0QmxvY2ssIHVpbnQyNTYgX2VuZFRpbWUsIGFkZHJlc3MgX3dvbGtpbmMpIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpewogICAgICAgIHJlcXVpcmUoKHRvdGFsVG9rZW5zIDwgMSkgJiYgKGJsb2NrLm51bWJlciA8PSBfc3RhcnRCbG9jaykpOyAKICAgICAgICBzdGFydF9ibG9jayA9IF9zdGFydEJsb2NrOwogICAgICAgIGVuZF90aW1lID0gX2VuZFRpbWU7CiAgICAgICAgd29sa0luYyA9IF93b2xraW5jOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBAcGFyYW0gX3BhcnRpY2lwYW50cwogICAgLy8gQHJldHVybiBzdWNjZXNzCiAgICBmdW5jdGlvbiB1cGRhdGVSZXF1aXJlS1lDKGJvb2wgX2t5Y1JlcXVpcmVtZW50KSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAga3ljUmVxdWlyZW1lbnQgPSBfa3ljUmVxdWlyZW1lbnQ7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9IAogICAgCiAgICAvLyBAcGFyYW0gX3BhcnRpY2lwYW50cwogICAgLy8gQHJldHVybiBzdWNjZXNzCiAgICBmdW5jdGlvbiBhZGRQYXJ0aWNpcGFudChhZGRyZXNzW10gX3BhcnRpY2lwYW50cykgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGZvciAodWludCBjbnQgPSAwOyBjbnQgPCBfcGFydGljaXBhbnRzLmxlbmd0aDsgY250KyspeyAgICAgICAgICAgCiAgICAgICAgICAgIHdoaXRlbGlzdENvbnRyaWJ1dG9yW19wYXJ0aWNpcGFudHNbY250XV0gPSB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gCgogICAgLy8gQHBhcmFtIF9wYXJ0aWNpcGFudHMKICAgIC8vIEByZXR1cm4gc3VjY2VzcwogICAgLy8gQGRldiBSZXZva2UgZGVzaWduYXRlZCBjb250cmlidXRvcnMgW29ubHkgYWNjZXNzaWJsZSBieSBjdXJyZW50IENvbnRyYWN0IE93bmVyXQogICAgZnVuY3Rpb24gcmVtb3ZlUGFydGljaXBhbnQoYWRkcmVzc1tdIF9wYXJ0aWNpcGFudHMpIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpeyAgICAgICAgIAogICAgICAgIGZvciAodWludCBjbnQgPSAwOyBjbnQgPCBfcGFydGljaXBhbnRzLmxlbmd0aDsgY250KyspeyAgICAgICAgICAgCiAgICAgICAgICAgIHdoaXRlbGlzdENvbnRyaWJ1dG9yW19wYXJ0aWNpcGFudHNbY250XV0gPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gQHBhcmFtIF9wYXJ0aWNpcGFudAogICAgLy8gQHJldHVybiBzdGF0dXMKICAgIC8vIEBkZXYgcmV0dXJuIHN0YXR1cyBvZiBnaXZlbiBhZGRyZXNzCiAgICBmdW5jdGlvbiBwYXJ0aWNpcGFudFN0YXR1cyhhZGRyZXNzIF9wYXJ0aWNpcGFudCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBzdGF0dXMpIHsKICAgICAgICByZXR1cm4od2hpdGVsaXN0Q29udHJpYnV0b3JbX3BhcnRpY2lwYW50XSk7CiAgICB9ICAgIAoKICAgIC8vIEBwYXJhbSBfcGFydGljaXBhbnQKICAgIC8vIEBkZXYgdXNlIHRva2VuR2VuZXJhdGlvbkV2ZW50IHRvIGhhbmRsZSBzYWxlIG9mIFdPTEsKICAgIGZ1bmN0aW9uIHRva2VuR2VuZXJhdGlvbkV2ZW50KGFkZHJlc3MgX3BhcnRpY2lwYW50KSBwYXlhYmxlIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKCAoIHdoaXRlbGlzdENvbnRyaWJ1dG9yW19wYXJ0aWNpcGFudF0gfHwgd2hpdGVsaXN0Q29udHJpYnV0b3JbbXNnLnNlbmRlcl0gfHwgYmFsYW5jZXNbX3BhcnRpY2lwYW50XSA+IDAgfHwga3ljUmVxdWlyZW1lbnQgKSAgJiYgIWFsbFNhbGVDb21wbGV0ZWQgJiYgKCBibG9jay50aW1lc3RhbXAgPD0gZW5kX3RpbWUgKSAmJiBtc2cudmFsdWUgPiAwKTsKICAgIAogICAgICAgIHVpbnQyNTYgcmF0ZSA9IDEwMDA7ICAvLyBEZWZhdWx0IFJhdGUKICAgICAgICByYXRlID0gc2FmZURpdiggMTc1ICogMTAqKjUgKiAxMCoqZGVjaW1hbHMsIHNhZmVBZGQoIDg3NSAqIDEwKioxICogMTAqKmRlY2ltYWxzLCBzYWZlRGl2KCB0b3RhbFRva2VucywgMiAqIDEwKiozKSkgKTsKICAgICAgICBpZiAoIHJhdGUgPiAyMDAwICkgcmF0ZSA9IDIwMDA7CiAgICAgICAgaWYgKCByYXRlIDwgNTAwICkgcmF0ZSA9IDUwMDsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+PSBzdGFydF9ibG9jaykgOwoKICAgICAgICB1aW50MjU2IHRva2VucyA9IHNhZmVNdWwobXNnLnZhbHVlLCByYXRlKTsKICAgICAgICB1aW50MjU2IGNoZWNrZWRTdXBwbHkgPSBzYWZlQWRkKHRvdGFsVG9rZW5zLCB0b2tlbnMpOwogICAgICAgIHJlcXVpcmUoY2hlY2tlZFN1cHBseSA8PSB0b2tlbkdlbmVyYXRpb25NYXgpOwoKICAgICAgICB0b3RhbFRva2VucyA9IGNoZWNrZWRTdXBwbHk7CiAgICAgICAgY29udHJpYnV0b3JUb2tlbnMgPSBzYWZlQWRkKGNvbnRyaWJ1dG9yVG9rZW5zLCB0b2tlbnMpOwogICAgICAgIAogICAgICAgIFRyYW5zZmVyKGFkZHJlc3ModGhpcyksIF9wYXJ0aWNpcGFudCwgdG9rZW5zKTsKICAgICAgICBiYWxhbmNlc1tfcGFydGljaXBhbnRdID0gc2FmZUFkZChiYWxhbmNlc1tfcGFydGljaXBhbnRdLCB0b2tlbnMpOwogICAgICAgIGNvbnRyaWJ1dGlvbltfcGFydGljaXBhbnRdID0gc2FmZUFkZChjb250cmlidXRpb25bX3BhcnRpY2lwYW50XSwgbXNnLnZhbHVlKTsKICAgICAgICBXb2xrQ3JlYXRlZChfcGFydGljaXBhbnQsIHRva2Vucyk7IC8vIGxvZ3MgdG9rZW4gY3JlYXRpb24KICAgIH0KCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZSghYWxsU2FsZUNvbXBsZXRlZCk7CiAgICAgICAgZW5kX3RpbWUgPSBibG9jay50aW1lc3RhbXA7CgogICAgICAgIC8vIDUwTU0gV29sayBhbGxvY2F0ZWQgdG8gV29sayBJbmMgZm9yIGRldmVsb3BtZW50CiAgICAgICAgdWludDI1NiB3b2xraW5jVG9rZW5zID0gIDUwICogMTAqKjYgKiAxMCoqZGVjaW1hbHM7CiAgICAgICAgYmFsYW5jZXNbd29sa0luY10gPSB3b2xraW5jVG9rZW5zOwogICAgICAgIHRvdGFsVG9rZW5zID0gc2FmZUFkZCh0b3RhbFRva2Vucywgd29sa2luY1Rva2Vucyk7ICAgICAgICAgICAgICAgICAKCiAgICAgICAgV29sa0NyZWF0ZWQod29sa0luYywgd29sa2luY1Rva2Vucyk7IC8vIGxvZ3MgdG9rZW4gY3JlYXRpb24gCiAgICAgICAgYWxsU2FsZUNvbXBsZXRlZCA9IHRydWU7CiAgICAgICAgcmVzZXJ2ZUJhbGFuY2UgPSBzYWZlRGl2KHNhZmVNdWwoY29udHJpYnV0b3JUb2tlbnMsIHBlcmNlbnRhZ2VFVEhSZXNlcnZlKSwgMTAwMDAwKTsKICAgICAgICB2YXIgd2l0aGRyYXdhbEJhbGFuY2UgPSBzYWZlU3ViKHRoaXMuYmFsYW5jZSwgcmVzZXJ2ZUJhbGFuY2UpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIod2l0aGRyYXdhbEJhbGFuY2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlZnVuZCgpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKChjb250cmlidXRpb25bbXNnLnNlbmRlcl0gPiAwKSAmJiAoIWFsbFNhbGVDb21wbGV0ZWQpICYmIChibG9jay50aW1lc3RhbXAgPiBlbmRfdGltZSkgICYmICh0b3RhbFRva2VucyA8IHRva2VuR2VuZXJhdGlvbk1pbikpOwogICAgICAgIHVpbnQyNTYgdG9rZW5CYWxhbmNlID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgICAgdWludDI1NiByZWZ1bmRCYWxhbmNlID0gY29udHJpYnV0aW9uW21zZy5zZW5kZXJdOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBjb250cmlidXRpb25bbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIHRvdGFsVG9rZW5zID0gc2FmZVN1Yih0b3RhbFRva2VucywgdG9rZW5CYWxhbmNlKTsKICAgICAgICBXb2xrRGVzdHJveWVkKG1zZy5zZW5kZXIsIHRva2VuQmFsYW5jZSk7CiAgICAgICAgTG9nUmVmdW5kKG1zZy5zZW5kZXIsIHJlZnVuZEJhbGFuY2UpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIocmVmdW5kQmFsYW5jZSk7IAogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyQW55RVJDMjBUb2tlbihhZGRyZXNzIF90b2tlbkFkZHJlc3MsIHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBFUkMyMChfdG9rZW5BZGRyZXNzKS50cmFuc2Zlcihvd25lciwgX2Ftb3VudCk7CiAgICB9Cn0KCi8vIFRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2JhbmNvcnByb3RvY29sL2NvbnRyYWN0cy9ibG9iL21hc3Rlci9zb2xpZGl0eS9jb250cmFjdHMvQmFuY29yRm9ybXVsYS5zb2wKY29udHJhY3QgSUJhbmNvckZvcm11bGEgewogICAgZnVuY3Rpb24gY2FsY3VsYXRlUHVyY2hhc2VSZXR1cm4odWludDI1NiBfc3VwcGx5LCB1aW50MjU2IF9yZXNlcnZlQmFsYW5jZSwgdWludDggX3Jlc2VydmVSYXRpbywgdWludDI1NiBfZGVwb3NpdEFtb3VudCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gY2FsY3VsYXRlU2FsZVJldHVybih1aW50MjU2IF9zdXBwbHksIHVpbnQyNTYgX3Jlc2VydmVCYWxhbmNlLCB1aW50OCBfcmVzZXJ2ZVJhdGlvLCB1aW50MjU2IF9zZWxsQW1vdW50KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7Cn0KCmNvbnRyYWN0IFdvbGtFeGNoYW5nZSBpcyAgV29sa1RHRSB7CiAgICBhZGRyZXNzIHB1YmxpYyBleGNoYW5nZUZvcm11bGE7CiAgICBib29sICAgIHB1YmxpYyBpc1B1cmNoYXNlUG9zc2libGUgPSBmYWxzZTsKICAgIGJvb2wgICAgcHVibGljIGlzU2VsbFBvc3NpYmxlID0gZmFsc2U7CgogICAgbW9kaWZpZXIgaXNQdXJjaGFzYWJsZSB7IHJlcXVpcmUoaXNQdXJjaGFzZVBvc3NpYmxlICYmIGFsbFNhbGVDb21wbGV0ZWQpOyBfOyB9CiAgICBtb2RpZmllciBpc1NlbGxhYmxlIHsgcmVxdWlyZShpc1NlbGxQb3NzaWJsZSAmJiBhbGxTYWxlQ29tcGxldGVkKTsgXzsgfQogICAgCiAgICAvLyBAcGFyYW0gIF9uZXdFeGNoYW5nZWZvcm11bGEKICAgIC8vIEByZXR1cm4gc3VjY2VzcwogICAgLy8gQGRldiBTZXQgdGhlIGJhbmNvciBmb3JtdWxhIHRvIHVzZSAtLSBvbmx5IFdvbGsgSW5jIGNhbiBzZXQgdGhpcwogICAgZnVuY3Rpb24gc2V0RXhjaGFuZ2VGb3JtdWxhKGFkZHJlc3MgX25ld0V4Y2hhbmdlZm9ybXVsYSkgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgcmVxdWlyZShzZWxsV29sa0VzdGltYXRlKDEwKipkZWNpbWFscywgX25ld0V4Y2hhbmdlZm9ybXVsYSkgPiAwKTsKICAgICAgICByZXF1aXJlKHB1cmNoYXNlV29sa0VzdGltYXRlKDEwKipkZWNpbWFscywgX25ld0V4Y2hhbmdlZm9ybXVsYSkgPiAwKTsKICAgICAgICBpc1B1cmNoYXNlUG9zc2libGUgPSBmYWxzZTsKICAgICAgICBpc1NlbGxQb3NzaWJsZSA9IGZhbHNlOwogICAgICAgIGV4Y2hhbmdlRm9ybXVsYSA9IF9uZXdFeGNoYW5nZWZvcm11bGE7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gQHBhcmFtICBfbmV3UmVzZXJ2ZVJhdGlvCiAgICAvLyBAcmV0dXJuIHN1Y2Nlc3MKICAgIC8vIEBkZXYgU2V0IHRoZSByZXNlcnZlIHJhdGlvIGluIGNhc2Ugb2YgZW1lcmdlbmN5IC0tIG9ubHkgV29sayBJbmMgY2FuIHNldCB0aGlzCiAgICBmdW5jdGlvbiB1cGRhdGVSZXNlcnZlUmF0aW8odWludDggX25ld1Jlc2VydmVSYXRpbykgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoYWxsU2FsZUNvbXBsZXRlZCAmJiAoIF9uZXdSZXNlcnZlUmF0aW8gPiAxICkgJiYgKCBfbmV3UmVzZXJ2ZVJhdGlvIDwgMjAgKSApOwogICAgICAgIHBlcmNlbnRhZ2VFVEhSZXNlcnZlID0gX25ld1Jlc2VydmVSYXRpbzsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBAcGFyYW0gIF9pc1J1bm5pbmcKICAgIC8vIEByZXR1cm4gc3VjY2VzcwogICAgLy8gQGRldiB1cGRhdGluZyBpc1B1cmNoYXNlUG9zc2libGUgLS0gb25seSBXb2xrIEluYyBjYW4gc2V0IHRoaXMKICAgIGZ1bmN0aW9uIHVwZGF0ZVB1cmNoYXNlUG9zc2libGUoYm9vbCBfaXNSdW5uaW5nKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKXsKICAgICAgICBpZiAoX2lzUnVubmluZyl7CiAgICAgICAgICAgIHJlcXVpcmUoc2VsbFdvbGtFc3RpbWF0ZSgxMCoqZGVjaW1hbHMsIGV4Y2hhbmdlRm9ybXVsYSkgPiAwKTsKICAgICAgICAgICAgcmVxdWlyZShwdXJjaGFzZVdvbGtFc3RpbWF0ZSgxMCoqZGVjaW1hbHMsIGV4Y2hhbmdlRm9ybXVsYSkgPiAwKTsgICAKICAgICAgICB9CiAgICAgICAgaXNQdXJjaGFzZVBvc3NpYmxlID0gX2lzUnVubmluZzsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBAcGFyYW0gIF9pc1J1bm5pbmcKICAgIC8vIEByZXR1cm4gc3VjY2VzcwogICAgLy8gQGRldiB1cGRhdGluZyBpc1NlbGxQb3NzaWJsZSAtLSBvbmx5IFdvbGsgSW5jIGNhbiBzZXQgdGhpcwogICAgZnVuY3Rpb24gdXBkYXRlU2VsbFBvc3NpYmxlKGJvb2wgX2lzUnVubmluZykgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgaWYgKF9pc1J1bm5pbmcpewogICAgICAgICAgICByZXF1aXJlKHNlbGxXb2xrRXN0aW1hdGUoMTAqKmRlY2ltYWxzLCBleGNoYW5nZUZvcm11bGEpID4gMCk7CiAgICAgICAgICAgIHJlcXVpcmUocHVyY2hhc2VXb2xrRXN0aW1hdGUoMTAqKmRlY2ltYWxzLCBleGNoYW5nZUZvcm11bGEpID4gMCk7ICAgCiAgICAgICAgfQogICAgICAgIGlzU2VsbFBvc3NpYmxlID0gX2lzUnVubmluZzsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZWxsV29sa0VzdGltYXRlKHVpbnQyNTYgX3dvbGtBbW91bnRlc3QsIGFkZHJlc3MgX2Zvcm11bGEpIGludGVybmFsIHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgZXRoUmVjZWl2YWJsZSA9ICBJQmFuY29yRm9ybXVsYShfZm9ybXVsYSkuY2FsY3VsYXRlU2FsZVJldHVybihjb250cmlidXRvclRva2VucywgcmVzZXJ2ZUJhbGFuY2UsIHBlcmNlbnRhZ2VFVEhSZXNlcnZlLCBfd29sa0Ftb3VudGVzdCk7CiAgICAgICAgcmV0dXJuIGV0aFJlY2VpdmFibGU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHB1cmNoYXNlV29sa0VzdGltYXRlKHVpbnQyNTYgX2V0aEFtb3VudGVzdCwgYWRkcmVzcyBfZm9ybXVsYSkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB3b2xrUmVjZWl2YWJsZSA9IElCYW5jb3JGb3JtdWxhKF9mb3JtdWxhKS5jYWxjdWxhdGVQdXJjaGFzZVJldHVybihjb250cmlidXRvclRva2VucywgcmVzZXJ2ZUJhbGFuY2UsIHBlcmNlbnRhZ2VFVEhSZXNlcnZlLCBfZXRoQW1vdW50ZXN0KTsKICAgICAgICByZXR1cm4gd29sa1JlY2VpdmFibGU7CiAgICB9CiAgICAKICAgIC8vIEBwYXJhbSBfd29sa0Ftb3VudAogICAgLy8gQHJldHVybiBldGhSZWNlaXZhYmxlCiAgICAvLyBAZGV2IHNlbmQgV29sayBpbnRvIGNvbnRyYWN0IGluIGV4Y2hhbmdlIGZvciBldGgsIGF0IGFuIGV4Y2hhbmdlIHJhdGUgYmFzZWQgb24gdGhlIEJhbmNvciBQcm90b2NvbCBkZXJpdmF0aW9uIGFuZCBkZWNyZWFzZSB0b3RhbFN1cHBseSBhY2NvcmRpbmdseQogICAgZnVuY3Rpb24gc2VsbFdvbGsodWludDI1NiBfd29sa0Ftb3VudCkgaXNTZWxsYWJsZSgpIHJldHVybnModWludDI1NikgewogICAgICAgIHJlcXVpcmUoKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF93b2xrQW1vdW50KSk7CiAgICAgICAgdWludDI1NiBldGhSZWNlaXZhYmxlID0gc2VsbFdvbGtFc3RpbWF0ZShfd29sa0Ftb3VudCxleGNoYW5nZUZvcm11bGEpOwogICAgICAgIHJlcXVpcmUodGhpcy5iYWxhbmNlID4gZXRoUmVjZWl2YWJsZSk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfd29sa0Ftb3VudCk7CiAgICAgICAgY29udHJpYnV0b3JUb2tlbnMgPSBzYWZlU3ViKGNvbnRyaWJ1dG9yVG9rZW5zLCBfd29sa0Ftb3VudCk7CiAgICAgICAgdG90YWxUb2tlbnMgPSBzYWZlU3ViKHRvdGFsVG9rZW5zLCBfd29sa0Ftb3VudCk7CiAgICAgICAgcmVzZXJ2ZUJhbGFuY2UgPSBzYWZlU3ViKHRoaXMuYmFsYW5jZSwgZXRoUmVjZWl2YWJsZSk7CiAgICAgICAgV29sa0Rlc3Ryb3llZChtc2cuc2VuZGVyLCBfd29sa0Ftb3VudCk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgMHgwMDAwMDAwMDAwMDAwMDAwMDAwMCwgX3dvbGtBbW91bnQpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZXRoUmVjZWl2YWJsZSk7CiAgICAgICAgcmV0dXJuIGV0aFJlY2VpdmFibGU7ICAgICAKICAgIH0KCiAgICAvLyBAcmV0dXJuIHdvbGtSZWNlaXZhYmxlICAgIAogICAgLy8gQGRldiBzZW5kIGV0aCBpbnRvIGNvbnRyYWN0IGluIGV4Y2hhbmdlIGZvciBXb2xrIHRva2VucywgYXQgYW4gZXhjaGFuZ2UgcmF0ZSBiYXNlZCBvbiB0aGUgQmFuY29yIFByb3RvY29sIGRlcml2YXRpb24gYW5kIGluY3JlYXNlIHRvdGFsU3VwcGx5IGFjY29yZGluZ2x5CiAgICBmdW5jdGlvbiBwdXJjaGFzZVdvbGsoYWRkcmVzcyBfYnV5ZXIpIGlzUHVyY2hhc2FibGUoKSBwYXlhYmxlIHJldHVybnModWludDI1Nil7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgICAgICB1aW50MjU2IHdvbGtSZWNlaXZhYmxlID0gcHVyY2hhc2VXb2xrRXN0aW1hdGUobXNnLnZhbHVlLCBleGNoYW5nZUZvcm11bGEpOwogICAgICAgIHJlcXVpcmUod29sa1JlY2VpdmFibGUgPiAwKTsKCiAgICAgICAgY29udHJpYnV0b3JUb2tlbnMgPSBzYWZlQWRkKGNvbnRyaWJ1dG9yVG9rZW5zLCB3b2xrUmVjZWl2YWJsZSk7CiAgICAgICAgdG90YWxUb2tlbnMgPSBzYWZlQWRkKHRvdGFsVG9rZW5zLCB3b2xrUmVjZWl2YWJsZSk7CiAgICAgICAgYmFsYW5jZXNbX2J1eWVyXSA9IHNhZmVBZGQoYmFsYW5jZXNbX2J1eWVyXSwgd29sa1JlY2VpdmFibGUpOwogICAgICAgIHJlc2VydmVCYWxhbmNlID0gc2FmZUFkZChyZXNlcnZlQmFsYW5jZSwgbXNnLnZhbHVlKTsKICAgICAgICBXb2xrQ3JlYXRlZChfYnV5ZXIsIHdvbGtSZWNlaXZhYmxlKTsKICAgICAgICBUcmFuc2ZlcihhZGRyZXNzKHRoaXMpLF9idXllcix3b2xrUmVjZWl2YWJsZSk7CiAgICAgICAgcmV0dXJuIHdvbGtSZWNlaXZhYmxlOwogICAgfQoKICAgIC8vIEBkZXYgIGZhbGxiYWNrIGZ1bmN0aW9uIGZvciBwdXJjaGFzZQogICAgLy8gQG5vdGUgQXV0b21hdGljYWxseSBmYWxsYmFjayB0byB0b2tlbkdlbmVyYXRpb25FdmVudCBiZWZvcmUgc2FsZSBpcyBjb21wbGV0ZWQuIEFmdGVyIHRoZSB0b2tlbiBnZW5lcmF0aW9uIGV2ZW50LCBmYWxsYmFjayB0byBwdXJjaGFzZVdvbGsuIExpcXVpZGl0eSBleGNoYW5nZSB3aWxsIGJlIGVuYWJsZWQgdGhyb3VnaCB1cGRhdGVFeGNoYW5nZVN0YXR1cyAgCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwogICAgICAgIGlmKCFhbGxTYWxlQ29tcGxldGVkKXsKICAgICAgICAgICAgdGhpcy50b2tlbkdlbmVyYXRpb25FdmVudC52YWx1ZShtc2cudmFsdWUpKG1zZy5zZW5kZXIpOwogICAgICAgIH0gZWxzZSBpZiAoIGJsb2NrLnRpbWVzdGFtcCA+PSBlbmRfdGltZSApewogICAgICAgICAgICB0aGlzLnB1cmNoYXNlV29say52YWx1ZShtc2cudmFsdWUpKG1zZy5zZW5kZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgIH0KfQ=='.
	

]
