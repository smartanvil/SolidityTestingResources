Class {
	#name : #SRTd2c5c0d51c8d97d0deb0a5efa416de90600db62d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd2c5c0d51c8d97d0deb0a5efa416de90600db62d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMzsKCiAvLy8gQHRpdGxlIFNhZmVNYXRoIGNvbnRyYWN0IC0gbWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogLy8vIEBhdXRob3IgPGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9Ijg0ZTBlMWYyYzRmN2U5ZTVmNmYwZTdlYmVhZjBmNmU1ZTdmMGUxZTVlOWFhZTdlYmU5Ij5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPgpjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA+IDApOwogICAgdWludCBjID0gYSAvIGI7CiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjPj1hICYmIGM+PWIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7CiAgICByZXF1aXJlKGFzc2VydGlvbik7ICAKICB9Cn0KCnByYWdtYSBzb2xpZGl0eSBeMC40LjEzOwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgogLy8vIEB0aXRsZSBPd25hYmxlIGNvbnRyYWN0IC0gYmFzZSBjb250cmFjdCB3aXRoIGFuIG93bmVyCiAvLy8gQGF1dGhvciA8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iMmI0ZjRlNWQ2YjU4NDY0YTU5NWY0ODQ0NDU1ZjU5NGE0ODVmNGU0YTQ2MDU0ODQ0NDYiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+CmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsgIAogICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogIH0KfQoKCi8vLyBAdGl0bGUgSGFsdGFibGUgY29udHJhY3QgLSBhYnN0cmFjdCBjb250cmFjdCB0aGF0IGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgovLy8gQGF1dGhvciA8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iYzNhN2E2YjU4M2IwYWVhMmIxYjdhMGFjYWRiN2IxYTJhMGI3YTZhMmFlZWRhMGFjYWUiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+Ci8vLyBPcmlnaW5hbGx5IGVudmlzaW9uZWQgaW4gRmlyc3RCbG9vZCBJQ08gY29udHJhY3QuCmNvbnRyYWN0IEhhbHRhYmxlIGlzIE93bmFibGUgewogIGJvb2wgcHVibGljIGhhbHRlZDsKCiAgbW9kaWZpZXIgc3RvcEluRW1lcmdlbmN5IHsKICAgIHJlcXVpcmUoIWhhbHRlZCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUluRW1lcmdlbmN5IHsKICAgIHJlcXVpcmUoaGFsdGVkKTsgICAgICAgCiAgICBfOwogIH0KCiAgLy8vIGNhbGxlZCBieSB0aGUgb3duZXIgb24gZW1lcmdlbmN5LCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgZnVuY3Rpb24gaGFsdCgpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICBoYWx0ZWQgPSB0cnVlOwogIH0KCiAgLy8vIGNhbGxlZCBieSB0aGUgb3duZXIgb24gZW5kIG9mIGVtZXJnZW5jeSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICBmdW5jdGlvbiB1bmhhbHQoKSBleHRlcm5hbCBvbmx5T3duZXIgb25seUluRW1lcmdlbmN5IHsKICAgIGhhbHRlZCA9IGZhbHNlOwogIH0KfQoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMzsKCiAKCgogLy8vIEB0aXRsZSBLaWxsYWJsZSBjb250cmFjdCAtIGJhc2UgY29udHJhY3QgdGhhdCBjYW4gYmUga2lsbGVkIGJ5IG93bmVyLiBBbGwgZnVuZHMgaW4gY29udHJhY3Qgd2lsbCBiZSBzZW50IHRvIHRoZSBvd25lci4KIC8vLyBAYXV0aG9yIDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI1NzMzMzIyMTE3MjQzYTM2MjUyMzM0MzgzOTIzMjUzNjM0MjMzMjM2M2E3OTM0MzgzYSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvYT4KY29udHJhY3QgS2lsbGFibGUgaXMgT3duYWJsZSB7CiAgZnVuY3Rpb24ga2lsbCgpIG9ubHlPd25lciB7CiAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogIH0KfQoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMzsKCiAKCnByYWdtYSBzb2xpZGl0eSBeMC40LjEzOwoKIC8vLyBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKIC8vLyBAYXV0aG9yIDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJmMzk3OTY4NWIzODA5ZTkyODE4NzkwOWM5ZDg3ODE5MjkwODc5NjkyOWVkZDkwOWM5ZSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvYT4KY29udHJhY3QgRVJDMjAgewogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gbWludChhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCk7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMzsKCiAKCgovLy8gQHRpdGxlIFppYmVyVG9rZW4gY29udHJhY3QgLSBzdGFuZGFyZCBFUkMyMCB0b2tlbiB3aXRoIFNob3J0IEhhbmQgQXR0YWNrIGFuZCBhcHByb3ZlKCkgcmFjZSBjb25kaXRpb24gbWl0aWdhdGlvbi4KLy8vIEBhdXRob3IgPGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjNhNWU1ZjRjN2E0OTU3NWI0ODRlNTk1NTU0NGU0ODViNTk0ZTVmNWI1NzE0NTk1NTU3Ij5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPgpjb250cmFjdCBaaWJlclRva2VuIGlzIFNhZmVNYXRoLCBFUkMyMCwgT3duYWJsZSB7CiBzdHJpbmcgcHVibGljIG5hbWUgPSAiWmliZXIgVG9rZW4iOwogc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiWkJSIjsKIHVpbnQgcHVibGljIGRlY2ltYWxzID0gODsKIHVpbnQgcHVibGljIGNvbnN0YW50IEZST1pFTl9UT0tFTlMgPSAxZTc7CiB1aW50IHB1YmxpYyBjb25zdGFudCBGUkVFWkVfUEVSSU9EID0gMSB5ZWFyczsKIHVpbnQgcHVibGljIGNyb3dkU2FsZU92ZXJUaW1lc3RhbXA7CgogLy8vIGNvbnRyYWN0IHRoYXQgaXMgYWxsb3dlZCB0byBjcmVhdGUgbmV3IHRva2VucyBhbmQgYWxsb3dzIHVubGlmdCB0aGUgdHJhbnNmZXIgbGltaXRzIG9uIHRoaXMgdG9rZW4KIGFkZHJlc3MgcHVibGljIGNyb3dkc2FsZUFnZW50OwogLy8vIEEgY3Jvd2RzYWxlIGNvbnRyYWN0IGNhbiByZWxlYXNlIHVzIHRvIHRoZSB3aWxkIGlmIElDTyBzdWNjZXNzLiBJZiBmYWxzZSB3ZSBhcmUgYXJlIGluIHRyYW5zZmVyIGxvY2sgdXAgcGVyaW9kLgogYm9vbCBwdWJsaWMgcmVsZWFzZWQgPSBmYWxzZTsKIC8vLyBhcHByb3ZlKCkgYWxsb3dhbmNlcwogbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwogLy8vIGhvbGRlciBiYWxhbmNlcwogbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKIC8vLyBAZGV2IExpbWl0IHRva2VuIHRyYW5zZmVyIHVudGlsIHRoZSBjcm93ZHNhbGUgaXMgb3Zlci4KIG1vZGlmaWVyIGNhblRyYW5zZmVyKCkgewogICBpZighcmVsZWFzZWQpIHsKICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY3Jvd2RzYWxlQWdlbnQpOwogICB9CiAgIF87CiB9CgogbW9kaWZpZXIgY2hlY2tGcm96ZW5BbW91bnQoYWRkcmVzcyBzb3VyY2UsIHVpbnQgYW1vdW50KSB7CiAgIGlmIChzb3VyY2UgPT0gb3duZXIgJiYgbm93IDwgY3Jvd2RTYWxlT3ZlclRpbWVzdGFtcCArIEZSRUVaRV9QRVJJT0QpIHsKICAgICB2YXIgZnJvemVuVG9rZW5zID0gMTAgKiogZGVjaW1hbHMgKiBGUk9aRU5fVE9LRU5TOwogICAgIHJlcXVpcmUoc2FmZVN1YihiYWxhbmNlc1tvd25lcl0sIGFtb3VudCkgPiBmcm96ZW5Ub2tlbnMpOwogICB9CiAgIF87CiB9CgogLy8vIEBkZXYgVGhlIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgb25seSBiZWZvcmUgb3IgYWZ0ZXIgdGhlIHRva2VucyBoYXZlIGJlZW4gcmVsZWFzZXNkCiAvLy8gQHBhcmFtIF9yZWxlYXNlZCB0b2tlbiB0cmFuc2ZlciBhbmQgbWludCBzdGF0ZQogbW9kaWZpZXIgaW5SZWxlYXNlU3RhdGUoYm9vbCBfcmVsZWFzZWQpIHsKICAgcmVxdWlyZShfcmVsZWFzZWQgPT0gcmVsZWFzZWQpOwogICBfOwogfQoKIC8vLyBAZGV2IFRoZSBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIG9ubHkgYnkgcmVsZWFzZSBhZ2VudC4KIG1vZGlmaWVyIG9ubHlDcm93ZHNhbGVBZ2VudCgpIHsKICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNyb3dkc2FsZUFnZW50KTsKICAgXzsKIH0KCiAvLy8gQGRldiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjayBodHRwOi8vdmVzc2VuZXMuY29tL3RoZS1lcmMyMC1zaG9ydC1hZGRyZXNzLWF0dGFjay1leHBsYWluZWQvCiAvLy8gQHBhcmFtIHNpemUgcGF5bG9hZCBzaXplCiBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgIHJlcXVpcmUobXNnLmRhdGEubGVuZ3RoID49IHNpemUgKyA0KTsKICAgIF87CiB9CgogLy8vIEBkZXYgTWFrZSBzdXJlIHdlIGFyZSBub3QgZG9uZSB5ZXQuCiBtb2RpZmllciBjYW5NaW50KCkgewogICByZXF1aXJlKCFyZWxlYXNlZCk7CiAgICBfOwogIH0KCiAvLy8gQGRldiBDb25zdHJ1Y3RvcgogZnVuY3Rpb24gWmliZXJUb2tlbigpIHsKICAgb3duZXIgPSBtc2cuc2VuZGVyOwogfQoKIC8vLyBGYWxsYmFjayBtZXRob2Qgd2lsbCBidXlvdXQgdG9rZW5zCiBmdW5jdGlvbigpIHBheWFibGUgewogICByZXZlcnQoKTsKIH0KIC8vLyBAZGV2IENyZWF0ZSBuZXcgdG9rZW5zIGFuZCBhbGxvY2F0ZSB0aGVtIHRvIGFuIGFkZHJlc3MuIE9ubHkgY2FsbGFibHkgYnkgYSBjcm93ZHNhbGUgY29udHJhY3QKIC8vLyBAcGFyYW0gcmVjZWl2ZXIgQWRkcmVzcyBvZiByZWNlaXZlcgogLy8vIEBwYXJhbSBhbW91bnQgIE51bWJlciBvZiB0b2tlbnMgdG8gaXNzdWUuCiBmdW5jdGlvbiBtaW50KGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgYW1vdW50KSBvbmx5Q3Jvd2RzYWxlQWdlbnQgY2FuTWludCBwdWJsaWMgewogICAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCBhbW91bnQpOwogICAgYmFsYW5jZXNbcmVjZWl2ZXJdID0gc2FmZUFkZChiYWxhbmNlc1tyZWNlaXZlcl0sIGFtb3VudCk7CiAgICBUcmFuc2ZlcigwLCByZWNlaXZlciwgYW1vdW50KTsKIH0KCiAvLy8gQGRldiBTZXQgdGhlIGNvbnRyYWN0IHRoYXQgY2FuIGNhbGwgcmVsZWFzZSBhbmQgbWFrZSB0aGUgdG9rZW4gdHJhbnNmZXJhYmxlLgogLy8vIEBwYXJhbSBfY3Jvd2RzYWxlQWdlbnQgY3Jvd2RzYWxlIGNvbnRyYWN0IGFkZHJlc3MKIGZ1bmN0aW9uIHNldENyb3dkc2FsZUFnZW50KGFkZHJlc3MgX2Nyb3dkc2FsZUFnZW50KSBvbmx5T3duZXIgaW5SZWxlYXNlU3RhdGUoZmFsc2UpIHB1YmxpYyB7CiAgIGNyb3dkc2FsZUFnZW50ID0gX2Nyb3dkc2FsZUFnZW50OwogfQogLy8vIEBkZXYgT25lIHdheSBmdW5jdGlvbiB0byByZWxlYXNlIHRoZSB0b2tlbnMgdG8gdGhlIHdpbGQuIENhbiBiZSBjYWxsZWQgb25seSBmcm9tIHRoZSByZWxlYXNlIGFnZW50IHRoYXQgaXMgdGhlIGZpbmFsIElDTyBjb250cmFjdC4gSXQgaXMgb25seSBjYWxsZWQgaWYgdGhlIGNyb3dkc2FsZSBoYXMgYmVlbiBzdWNjZXNzIChmaXJzdCBtaWxlc3RvbmUgcmVhY2hlZCkuCiBmdW5jdGlvbiByZWxlYXNlVG9rZW5UcmFuc2ZlcigpIHB1YmxpYyBvbmx5Q3Jvd2RzYWxlQWdlbnQgewogICBjcm93ZFNhbGVPdmVyVGltZXN0YW1wID0gbm93OwogICByZWxlYXNlZCA9IHRydWU7CiB9CiAvLy8gQGRldiBUcmFuZmVyIHRva2VucyB0byBhZGRyZXNzCiAvLy8gQHBhcmFtIF90byBkZXN0IGFkZHJlc3MKIC8vLyBAcGFyYW0gX3ZhbHVlIHRva2VucyBhbW91bnQKIC8vLyBAcmV0dXJuIHRyYW5zZmVyIHJlc3VsdAogZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSBjYW5UcmFuc2ZlciBjaGVja0Zyb3plbkFtb3VudChtc2cuc2VuZGVyLCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sIF92YWx1ZSk7CgogICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgIHJldHVybiB0cnVlOwogfQoKIC8vLyBAZGV2IFRyYW5mZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gb3RoZXIKIC8vLyBAcGFyYW0gX2Zyb20gc291cmNlIGFkZHJlc3MKIC8vLyBAcGFyYW0gX3RvIGRlc3QgYWRkcmVzcwogLy8vIEBwYXJhbSBfdmFsdWUgdG9rZW5zIGFtb3VudAogLy8vIEByZXR1cm4gdHJhbnNmZXIgcmVzdWx0CiBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSBjYW5UcmFuc2ZlciBjaGVja0Zyb3plbkFtb3VudChfZnJvbSwgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZXNbX2Zyb21dLCBfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKF9hbGxvd2FuY2UsIF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiB9CiAvLy8gQGRldiBUb2tlbnMgYmFsYW5jZQogLy8vIEBwYXJhbSBfb3duZXIgaG9sZGVyIGFkZHJlc3MKIC8vLyBAcmV0dXJuIGJhbGFuY2UgYW1vdW50CiBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKIH0KCiAvLy8gQGRldiBBcHByb3ZlIHRyYW5zZmVyCiAvLy8gQHBhcmFtIF9zcGVuZGVyIGhvbGRlciBhZGRyZXNzCiAvLy8gQHBhcmFtIF92YWx1ZSB0b2tlbnMgYW1vdW50CiAvLy8gQHJldHVybiByZXN1bHQKIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgIHJlcXVpcmUoX3ZhbHVlID09IDAgJiYgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCk7CgogICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgIHJldHVybiB0cnVlOwogfQoKIC8vLyBAZGV2IFRva2VuIGFsbG93YW5jZQogLy8vIEBwYXJhbSBfb3duZXIgaG9sZGVyIGFkZHJlc3MKIC8vLyBAcGFyYW0gX3NwZW5kZXIgc3BlbmRlciBhZGRyZXNzCiAvLy8gQHJldHVybiByZW1haW4gYW1vdW50CiBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogfQp9CgoKLy8vIEB0aXRsZSBaaWJlckNyb3dkc2FsZSBjb250cmFjdCAtIGNvbnRyYWN0IGZvciB0b2tlbiBzYWxlcy4KLy8vIEBhdXRob3IgPGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjIwNDQ0NTU2NjA1MzRkNDE1MjU0NDM0ZjRlNTQ1MjQxNDM1NDQ1NDE0ZDBlNDM0ZjRkIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPgpjb250cmFjdCBaaWJlckNyb3dkc2FsZSBpcyBIYWx0YWJsZSwgS2lsbGFibGUsIFNhZmVNYXRoIHsKCiAgLy8vIFRvdGFsIGNvdW50IG9mIHRva2VucyBkaXN0cmlidXRlZCB2aWEgSUNPCiAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9UQUxfSUNPX1RPS0VOUyA9IDFlODsKCiAgLy8vIE1pbWluYWwgdG9rZW5zIGZ1bmRpbmcgZ29hbCBpbiBXZWksIGlmIHRoaXMgZ29hbCBpc24ndCByZWFjaGVkIGR1cmluZyBJQ08sIHJlZnVuZCB3aWxsIGJlZ2luCiAgdWludCBwdWJsaWMgY29uc3RhbnQgTUlOX0lDT19HT0FMID0gNWUzIGV0aGVyOwoKICAvLy8gTWF4aW1hbCB0b2tlbnMgZnVuZGluZyBnb2FsIGluIFdlaQogIHVpbnQgcHVibGljIGNvbnN0YW50IE1BWF9JQ09fR09BTCA9IDVlNCBldGhlcjsKCiAgLy8vIHRoZSBVTklYIHRpbWVzdGFtcCA1ZTQgZXRoZXIgZnVuZGVkCiAgdWludCBwdWJsaWMgbWF4R29hbFJlYWNoZWRBdCA9IDA7CgogIC8vLyBUaGUgZHVyYXRpb24gb2YgSUNPCiAgdWludCBwdWJsaWMgY29uc3RhbnQgSUNPX0RVUkFUSU9OID0gMTAgZGF5czsKCiAgLy8vIFRoZSBkdXJhdGlvbiBvZiBJQ08KICB1aW50IHB1YmxpYyBjb25zdGFudCBBRlRFUl9NQVhfR09BTF9EVVJBVElPTiA9IDI0IGhvdXJzOwoKICAvLy8gVGhlIHRva2VuIHdlIGFyZSBzZWxsaW5nCiAgWmliZXJUb2tlbiBwdWJsaWMgdG9rZW47CgogIC8vLyB0aGUgVU5JWCB0aW1lc3RhbXAgc3RhcnQgZGF0ZSBvZiB0aGUgY3Jvd2RzYWxlCiAgdWludCBwdWJsaWMgc3RhcnRzQXQ7CgogIC8vLyBIb3cgbWFueSB3ZWkgb2YgZnVuZGluZyB3ZSBoYXZlIHJhaXNlZAogIHVpbnQgcHVibGljIHdlaVJhaXNlZCA9IDA7CgogIC8vLyBIb3cgbXVjaCB3ZWkgd2UgaGF2ZSByZXR1cm5lZCBiYWNrIHRvIHRoZSBjb250cmFjdCBhZnRlciBhIGZhaWxlZCBjcm93ZGZ1bmQuCiAgdWludCBwdWJsaWMgbG9hZGVkUmVmdW5kID0gMDsKCiAgLy8vIEhvdyBtdWNoIHdlaSB3ZSBoYXZlIGdpdmVuIGJhY2sgdG8gaW52ZXN0b3JzLgogIHVpbnQgcHVibGljIHdlaVJlZnVuZGVkID0gMDsKCiAgLy8vIEhhcyB0aGlzIGNyb3dkc2FsZSBiZWVuIGZpbmFsaXplZAogIGJvb2wgcHVibGljIGZpbmFsaXplZDsKCiAgLy8vIEhvdyBtdWNoIEVUSCBlYWNoIGFkZHJlc3MgaGFzIGludmVzdGVkIHRvIHRoaXMgY3Jvd2RzYWxlCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgaW52ZXN0ZWRBbW91bnRPZjsKCiAgLy8vIEhvdyBtdWNoIHRva2VucyB0aGlzIGNyb3dkc2FsZSBoYXMgY3JlZGl0ZWQgZm9yIGVhY2ggaW52ZXN0b3IgYWRkcmVzcwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHRva2VuQW1vdW50T2Y7CgogIC8vLyBEZWZpbmUgYSBzdHJ1Y3R1cmUgZm9yIG9uZSBpbnZlc3RtZW50IGV2ZW50IG9jY3VycmVuY2UKICBzdHJ1Y3QgSW52ZXN0bWVudCB7CiAgICAgIC8vLyBXaG8gaW52ZXN0ZWQKICAgICAgYWRkcmVzcyBzb3VyY2U7CiAgICAgIC8vLyBBbW91bnQgaW52ZXN0ZWQKICAgICAgdWludCB3ZWlWYWx1ZTsKICB9CgogIEludmVzdG1lbnRbXSBwdWJsaWMgaW52ZXN0bWVudHM7CgogIC8vLyBTdGF0ZSBtYWNoaW5lCiAgLy8vIFByZXBhcmluZzogQWxsIGNvbnRyYWN0IGluaXRpYWxpemF0aW9uIGNhbGxzIGFuZCB2YXJpYWJsZXMgaGF2ZSBub3QgYmVlbiBzZXQgeWV0CiAgLy8vIFByZWZ1bmRpbmc6IFdlIGhhdmUgbm90IHBhc3NlZCBzdGFydCB0aW1lIHlldAogIC8vLyBGdW5kaW5nOiBBY3RpdmUgY3Jvd2RzYWxlCiAgLy8vIFN1Y2Nlc3M6IE1pbmltdW0gZnVuZGluZyBnb2FsIHJlYWNoZWQKICAvLy8gRmFpbHVyZTogTWluaW11bSBmdW5kaW5nIGdvYWwgbm90IHJlYWNoZWQgYmVmb3JlIGVuZGluZyB0aW1lCiAgLy8vIEZpbmFsaXplZDogVGhlIGZpbmFsaXplZCBoYXMgYmVlbiBjYWxsZWQgYW5kIHN1Y2Nlc2Z1bGx5IGV4ZWN1dGVkXAogIC8vLyBSZWZ1bmRpbmc6IFJlZnVuZHMgYXJlIGxvYWRlZCBvbiB0aGUgY29udHJhY3QgZm9yIHJlY2xhaW0uCiAgZW51bSBTdGF0ZSB7VW5rbm93biwgUHJlcGFyaW5nLCBGdW5kaW5nLCBTdWNjZXNzLCBGYWlsdXJlLCBGaW5hbGl6ZWQsIFJlZnVuZGluZ30KCiAgLy8vIEEgbmV3IGludmVzdG1lbnQgd2FzIG1hZGUKICBldmVudCBJbnZlc3RlZChhZGRyZXNzIGludmVzdG9yLCB1aW50IHdlaUFtb3VudCk7CiAgLy8vIFJlZnVuZCB3YXMgcHJvY2Vzc2VkIGZvciBhIGNvbnRyaWJ1dG9yCiAgZXZlbnQgUmVmdW5kKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQgd2VpQW1vdW50KTsKCiAgLy8vIEBkZXYgTW9kaWZpZWQgYWxsb3dpbmcgZXhlY3V0aW9uIG9ubHkgaWYgdGhlIGNyb3dkc2FsZSBpcyBjdXJyZW50bHkgcnVubmluZwogIG1vZGlmaWVyIGluU3RhdGUoU3RhdGUgc3RhdGUpIHsKICAgIHJlcXVpcmUoZ2V0U3RhdGUoKSA9PSBzdGF0ZSk7CiAgICBfOwogIH0KCiAgLy8vIEBkZXYgQ29uc3RydWN0b3IKICAvLy8gQHBhcmFtIF90b2tlbiBQYXkgRmFpciB0b2tlbiBhZGRyZXNzCiAgLy8vIEBwYXJhbSBfc3RhcnQgdG9rZW4gSUNPIHN0YXJ0IGRhdGUKICBmdW5jdGlvbiBDcm93ZHNhbGUoYWRkcmVzcyBfdG9rZW4sIHVpbnQgX3N0YXJ0KSB7CiAgICByZXF1aXJlKF90b2tlbiAhPSAwKTsKICAgIHJlcXVpcmUoX3N0YXJ0ICE9IDApOwoKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIHRva2VuID0gWmliZXJUb2tlbihfdG9rZW4pOwogICAgc3RhcnRzQXQgPSBfc3RhcnQ7CiAgfQoKICAvLy8gIERvbid0IGV4cGVjdCB0byBqdXN0IHNlbmQgaW4gbW9uZXkgYW5kIGdldCB0b2tlbnMuCiAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgIGJ1eSgpOwogIH0KCiAgIC8vLyBAZGV2IE1ha2UgYW4gaW52ZXN0bWVudC4gQ3Jvd2RzYWxlIG11c3QgYmUgcnVubmluZyBmb3Igb25lIHRvIGludmVzdC4KICAgLy8vIEBwYXJhbSByZWNlaXZlciBUaGUgRXRoZXJldW0gYWRkcmVzcyB3aG8gcmVjZWl2ZXMgdGhlIHRva2VucwogIGZ1bmN0aW9uIGludmVzdEludGVybmFsKGFkZHJlc3MgcmVjZWl2ZXIpIHN0b3BJbkVtZXJnZW5jeSBwcml2YXRlIHsKICAgIHZhciBzdGF0ZSA9IGdldFN0YXRlKCk7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkZ1bmRpbmcpOwogICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKCiAgICAvLyBBZGQgaW52ZXN0bWVudCByZWNvcmQKICAgIHZhciB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICBpbnZlc3RlZEFtb3VudE9mW3JlY2VpdmVyXSA9IHNhZmVBZGQoaW52ZXN0ZWRBbW91bnRPZltyZWNlaXZlcl0sIHdlaUFtb3VudCk7CiAgICBpbnZlc3RtZW50cy5wdXNoKEludmVzdG1lbnQocmVjZWl2ZXIsIHdlaUFtb3VudCkpOwoKICAgIC8vIFVwZGF0ZSB0b3RhbHMKICAgIHdlaVJhaXNlZCA9IHNhZmVBZGQod2VpUmFpc2VkLCB3ZWlBbW91bnQpOwogICAgLy8gTWF4IElDTyBnb2FsIHJlYWNoZWQgYXQKICAgIGlmKG1heEdvYWxSZWFjaGVkQXQgPT0gMCAmJiB3ZWlSYWlzZWQgPj0gTUFYX0lDT19HT0FMKQogICAgICBtYXhHb2FsUmVhY2hlZEF0ID0gbm93OwogICAgLy8gVGVsbCB1cyBpbnZlc3Qgd2FzIHN1Y2Nlc3MKICAgIEludmVzdGVkKHJlY2VpdmVyLCB3ZWlBbW91bnQpOwogIH0KCiAgLy8vIEBkZXYgQWxsb3cgYW5vbnltb3VzIGNvbnRyaWJ1dGlvbnMgdG8gdGhpcyBjcm93ZHNhbGUuCiAgLy8vIEBwYXJhbSByZWNlaXZlciBUaGUgRXRoZXJldW0gYWRkcmVzcyB3aG8gcmVjZWl2ZXMgdGhlIHRva2VucwogIGZ1bmN0aW9uIGludmVzdChhZGRyZXNzIHJlY2VpdmVyKSBwdWJsaWMgcGF5YWJsZSB7CiAgICBpbnZlc3RJbnRlcm5hbChyZWNlaXZlcik7CiAgfQoKICAvLy8gQGRldiBUaGUgYmFzaWMgZW50cnkgcG9pbnQgdG8gcGFydGljaXBhdGUgdGhlIGNyb3dkc2FsZSBwcm9jZXNzLgogIGZ1bmN0aW9uIGJ1eSgpIHB1YmxpYyBwYXlhYmxlIHsKICAgIGludmVzdChtc2cuc2VuZGVyKTsKICB9CgogIC8vLyBAZGV2IEZpbmFsaXplIGEgc3VjY2Nlc2Z1bCBjcm93ZHNhbGUuCiAgZnVuY3Rpb24gZmluYWxpemUoKSBwdWJsaWMgaW5TdGF0ZShTdGF0ZS5TdWNjZXNzKSBvbmx5T3duZXIgc3RvcEluRW1lcmdlbmN5IHsKICAgIHJlcXVpcmUoIWZpbmFsaXplZCk7CgogICAgZmluYWxpemVkID0gdHJ1ZTsKICAgIGZpbmFsaXplQ3Jvd2RzYWxlKCk7CiAgfQoKICAvLy8gQGRldiBPd25lciBjYW4gd2l0aGRyYXcgY29udHJhY3QgZnVuZHMKICBmdW5jdGlvbiB3aXRoZHJhdygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgLy8gVHJhbnNmZXIgZnVuZHMgdG8gdGhlIHRlYW0gd2FsbGV0CiAgICBvd25lci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0KCiAgLy8vIEBkZXYgRmluYWxpemUgYSBzdWNjY2VzZnVsIGNyb3dkc2FsZS4KICBmdW5jdGlvbiBmaW5hbGl6ZUNyb3dkc2FsZSgpIGludGVybmFsIHsKICAgIC8vIENhbGN1bGF0ZSBkaXZpc29yIG9mIHRoZSB0b3RhbCB0b2tlbiBjb3VudAogICAgdWludCBkaXZpc29yOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgaW52ZXN0bWVudHMubGVuZ3RoOyBpKyspCiAgICAgICBkaXZpc29yID0gc2FmZUFkZChkaXZpc29yLCBpbnZlc3RtZW50c1tpXS53ZWlWYWx1ZSk7CgogICAgdmFyIG11bHRpcGxpZXIgPSAxMCAqKiB0b2tlbi5kZWNpbWFscygpOwogICAgLy8gR2V0IHVuaXQgcHJpY2UKICAgIHVpbnQgdW5pdFByaWNlID0gc2FmZURpdihzYWZlTXVsKFRPVEFMX0lDT19UT0tFTlMsIG11bHRpcGxpZXIpLCBkaXZpc29yKTsKCiAgICAvLyBEaXN0cmlidXRlIHRva2VucyBhbW9uZyBpbnZlc3RvcnMKICAgIGZvciAoaSA9IDA7IGkgPCBpbnZlc3RtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB0b2tlbkFtb3VudCA9IHNhZmVNdWwodW5pdFByaWNlLCBpbnZlc3RtZW50c1tpXS53ZWlWYWx1ZSk7CiAgICAgICAgdG9rZW5BbW91bnRPZltpbnZlc3RtZW50c1tpXS5zb3VyY2VdICs9IHRva2VuQW1vdW50OwogICAgICAgIGFzc2lnblRva2VucyhpbnZlc3RtZW50c1tpXS5zb3VyY2UsIHRva2VuQW1vdW50KTsKICAgIH0KICAgIGFzc2lnblRva2Vucyhvd25lciwgMmU3KTsKICAgIHRva2VuLnJlbGVhc2VUb2tlblRyYW5zZmVyKCk7CiAgfQoKICAvLy8gQGRldiBBbGxvdyBsb2FkIHJlZnVuZHMgYmFjayBvbiB0aGUgY29udHJhY3QgZm9yIHRoZSByZWZ1bmRpbmcuCiAgZnVuY3Rpb24gbG9hZFJlZnVuZCgpIHB1YmxpYyBwYXlhYmxlIGluU3RhdGUoU3RhdGUuRmFpbHVyZSkgewogICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgIGxvYWRlZFJlZnVuZCA9IHNhZmVBZGQobG9hZGVkUmVmdW5kLCBtc2cudmFsdWUpOwogIH0KCiAgLy8vIEBkZXYgSW52ZXN0b3JzIGNhbiBjbGFpbSByZWZ1bmQuCiAgZnVuY3Rpb24gcmVmdW5kKCkgcHVibGljIGluU3RhdGUoU3RhdGUuUmVmdW5kaW5nKSB7CiAgICB1aW50MjU2IHdlaVZhbHVlID0gaW52ZXN0ZWRBbW91bnRPZlttc2cuc2VuZGVyXTsKICAgIGlmICh3ZWlWYWx1ZSA9PSAwKQogICAgICByZXR1cm47CiAgICBpbnZlc3RlZEFtb3VudE9mW21zZy5zZW5kZXJdID0gMDsKICAgIHdlaVJlZnVuZGVkID0gc2FmZUFkZCh3ZWlSZWZ1bmRlZCwgd2VpVmFsdWUpOwogICAgUmVmdW5kKG1zZy5zZW5kZXIsIHdlaVZhbHVlKTsKICAgIG1zZy5zZW5kZXIudHJhbnNmZXIod2VpVmFsdWUpOwogIH0KCiAgLy8vIEBkZXYgTWluaW11bSBnb2FsIHdhcyByZWFjaGVkCiAgLy8vIEByZXR1cm4gdHJ1ZSBpZiB0aGUgY3Jvd2RzYWxlIGhhcyByYWlzZWQgZW5vdWdoIG1vbmV5IHRvIG5vdCBpbml0aWF0ZSB0aGUgcmVmdW5kaW5nCiAgZnVuY3Rpb24gaXNNaW5pbXVtR29hbFJlYWNoZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCByZWFjaGVkKSB7CiAgICByZXR1cm4gd2VpUmFpc2VkID49IE1JTl9JQ09fR09BTDsKICB9CgogIC8vLyBAZGV2IENoZWNrIGlmIHRoZSBJQ08gZ29hbCB3YXMgcmVhY2hlZC4KICAvLy8gQHJldHVybiB0cnVlIGlmIHRoZSBjcm93ZHNhbGUgaGFzIHJhaXNlZCBlbm91Z2ggbW9uZXkgdG8gYmUgYSBzdWNjZXNzCiAgZnVuY3Rpb24gaXNDcm93ZHNhbGVGdWxsKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB3ZWlSYWlzZWQgPj0gTUFYX0lDT19HT0FMICYmIG5vdyA+IG1heEdvYWxSZWFjaGVkQXQgKyBBRlRFUl9NQVhfR09BTF9EVVJBVElPTjsKICB9CgogIC8vLyBAZGV2IENyb3dkZnVuZCBzdGF0ZSBtYWNoaW5lIG1hbmFnZW1lbnQuCiAgLy8vIEByZXR1cm4gU3RhdGUgY3VycmVudCBzdGF0ZQogIGZ1bmN0aW9uIGdldFN0YXRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKFN0YXRlKSB7CiAgICBpZiAoZmluYWxpemVkKQogICAgICByZXR1cm4gU3RhdGUuRmluYWxpemVkOwogICAgaWYgKGFkZHJlc3ModG9rZW4pID09IDApCiAgICAgIHJldHVybiBTdGF0ZS5QcmVwYXJpbmc7CiAgICBpZiAobm93ID49IHN0YXJ0c0F0ICYmIG5vdyA8IHN0YXJ0c0F0ICsgSUNPX0RVUkFUSU9OICYmICFpc0Nyb3dkc2FsZUZ1bGwoKSkKICAgICAgcmV0dXJuIFN0YXRlLkZ1bmRpbmc7CiAgICBpZiAoaXNDcm93ZHNhbGVGdWxsKCkpCiAgICAgIHJldHVybiBTdGF0ZS5TdWNjZXNzOwogICAgaWYgKCFpc01pbmltdW1Hb2FsUmVhY2hlZCgpICYmIHdlaVJhaXNlZCA+IDAgJiYgbG9hZGVkUmVmdW5kID49IHdlaVJhaXNlZCkKICAgICAgcmV0dXJuIFN0YXRlLlJlZnVuZGluZzsKICAgIHJldHVybiBTdGF0ZS5GYWlsdXJlOwogIH0KCiAgIC8vLyBAZGV2IER5bmFtaWNhbGx5IGNyZWF0ZSB0b2tlbnMgYW5kIGFzc2lnbiB0aGVtIHRvIHRoZSBpbnZlc3Rvci4KICAgLy8vIEBwYXJhbSByZWNlaXZlciBpbnZlc3RvciBhZGRyZXNzCiAgIC8vLyBAcGFyYW0gdG9rZW5BbW91bnQgVGhlIGFtb3VudCBvZiB0b2tlbnMgd2UgdHJ5IHRvIGdpdmUgdG8gdGhlIGludmVzdG9yIGluIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uCiAgIGZ1bmN0aW9uIGFzc2lnblRva2VucyhhZGRyZXNzIHJlY2VpdmVyLCB1aW50IHRva2VuQW1vdW50KSBwcml2YXRlIHsKICAgICB0b2tlbi5taW50KHJlY2VpdmVyLCB0b2tlbkFtb3VudCk7CiAgIH0KfQ=='.
	

]
