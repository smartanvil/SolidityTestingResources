Class {
	#name : #SRT26e124b8cc0082299258a6d722c0765e07540a2c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT26e124b8cc0082299258a6d722c0765e07540a2c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKgpOb2RlcG93ZXIgSUNPIGNyb3dkc2FsZSBjb250cmFjdApCT05VUyBTQ0hFRFVMRToKICAgICAgICBCb251cyAgICAgICAgc3RhcnQgdGltZSAgICAgICAgICAgICAgIGVuZCB0aW1lCiAgICAgICAgNDUlICAgICAyMDE3LTEyLTMxIDIzOjU5OjU5IC0gMjAxOC0wMS0zMSAyMzo1OTo1OSAxNTE3NDQzMTk5CiAgICAgICAgNDAlICAgICAyMDE4LTAyLTAxIDAwOjAwOjAwIC0gMjAxOC0wMi0xNCAyMzo1OTo1OSAxNTE4NjUyNzk5CiAgICAgICAgMzAlICAgICAyMDE4LTAyLTE1IDAwOjAwOjAwIC0gMjAxOC0wMi0yNCAyMzo1OTo1OSAxNTE5NTE2Nzk5CiAgICAgICAgMjAlICAgICAyMDE4LTAyLTI1IDAwOjAwOjAwIC0gMjAxOC0wMy0wNiAyMzo1OTo1OSAxNTIwMzgwNzk5CiAgICAgICAgMTUlICAgICAyMDE4LTAzLTA3IDAwOjAwOjAwIC0gMjAxOC0wMy0xNiAyMzo1OTo1OSAxNTIxMjQ0Nzk5CiAgICAgICAgMTAlICAgICAyMDE4LTAzLTE3IDAwOjAwOjAwIC0gMjAxOC0wMy0yNiAyMzo1OTo1OSAxNTIyMTA4Nzk5CgpTZWUgb2ZmaWNpYWwgcmVzb3VyY2UgZm9yIGRldGFpbHMgaHR0cHM6Ly9ub2RlcG93ZXIuaW8vCiovCgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAoYSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAgIC8qKgogICAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgICAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICAgKi8KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9Cgp9CgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CgoKICAgIC8qKgogICAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW19mcm9tXSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICAgKgogICAgICogQmV3YXJlIHRoYXQgY2hhbmdpbmcgYW4gYWxsb3dhbmNlIHdpdGggdGhpcyBtZXRob2QgYnJpbmdzIHRoZSByaXNrIHRoYXQgc29tZW9uZSBtYXkgdXNlIGJvdGggdGhlIG9sZAogICAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAgICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEluY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAgKgogICAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEBwYXJhbSBfYWRkZWRWYWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBpbmNyZWFzZSB0aGUgYWxsb3dhbmNlIGJ5LgogICAgICovCiAgICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IERlY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAgKgogICAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gZGVjcmVtZW50CiAgICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEBwYXJhbSBfc3VidHJhY3RlZFZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGRlY3JlYXNlIHRoZSBhbGxvd2FuY2UgYnkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgICAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgICAgICB9CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCn0KCmNvbnRyYWN0IE5vZGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJOb2RlUG93ZXIiOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiTk9ERSI7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAyOwogICAgYm9vbCBwdWJsaWMgbWludGluZ0ZpbmlzaGVkID0gZmFsc2U7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIG93bmVyczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgbWludGVyczsKCiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgTWludEZpbmlzaGVkKCk7CiAgICBldmVudCBPd25lckFkZGVkKGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CiAgICBldmVudCBPd25lclJlbW92ZWQoYWRkcmVzcyBpbmRleGVkIHJlbW92ZWRPd25lcik7CiAgICBldmVudCBNaW50ZXJBZGRlZChhZGRyZXNzIGluZGV4ZWQgbmV3TWludGVyKTsKICAgIGV2ZW50IE1pbnRlclJlbW92ZWQoYWRkcmVzcyBpbmRleGVkIHJlbW92ZWRNaW50ZXIpOwogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgYnVybmVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICBmdW5jdGlvbiBOb2RlVG9rZW4oKSBwdWJsaWMgewogICAgICAgIG93bmVyc1ttc2cuc2VuZGVyXSA9IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIG1pbnQgdG9rZW5zCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNlaXZlIHRoZSBtaW50ZWQgdG9rZW5zLgogICAgICogQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gbWludC4KICAgICAqIEByZXR1cm4gQSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICAgKi8KICAgIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgb25seU1pbnRlciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgICAgIE1pbnQoX3RvLCBfYW1vdW50KTsKICAgICAgICBUcmFuc2ZlcihhZGRyZXNzKDApLCBfdG8sIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBzdG9wIG1pbnRpbmcgbmV3IHRva2Vucy4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAgICovCiAgICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKICAgICAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgICAgIE1pbnRGaW5pc2hlZCgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBCdXJucyBhIHNwZWNpZmljIGFtb3VudCBvZiB0b2tlbnMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgYnVybmVkLgogICAgICovCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKICAgICAgICAvLyBubyBuZWVkIHRvIHJlcXVpcmUgdmFsdWUgPD0gdG90YWxTdXBwbHksIHNpbmNlIHRoYXQgd291bGQgaW1wbHkgdGhlCiAgICAgICAgLy8gc2VuZGVyJ3MgYmFsYW5jZSBpcyBncmVhdGVyIHRoYW4gdGhlIHRvdGFsU3VwcGx5LCB3aGljaCAqc2hvdWxkKiBiZSBhbiBhc3NlcnRpb24gZmFpbHVyZQoKICAgICAgICBhZGRyZXNzIGJ1cm5lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYmFsYW5jZXNbYnVybmVyXSA9IGJhbGFuY2VzW2J1cm5lcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgICAgICBCdXJuKGJ1cm5lciwgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWRkcyBhZG1pbmlzdHJhdGl2ZSByb2xlIHRvIGFkZHJlc3MKICAgICAqIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgZ2V0IGFkbWluaXN0cmF0aXZlIHByaXZpbGVnZXMKICAgICAqLwogICAgZnVuY3Rpb24gYWRkT3duZXIoYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgb3duZXJzW19hZGRyZXNzXSA9IHRydWU7CiAgICAgICAgT3duZXJBZGRlZChfYWRkcmVzcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFJlbW92ZXMgYWRtaW5pc3RyYXRpdmUgcm9sZSBmcm9tIGFkZHJlc3MKICAgICAqIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyB0byByZW1vdmUgYWRtaW5pc3RyYXRpdmUgcHJpdmlsZWdlcyBmcm9tCiAgICAgKi8KICAgIGZ1bmN0aW9uIGRlbE93bmVyKGFkZHJlc3MgX2FkZHJlc3MpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIG93bmVyc1tfYWRkcmVzc10gPSBmYWxzZTsKICAgICAgICBPd25lclJlbW92ZWQoX2FkZHJlc3MpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShvd25lcnNbbXNnLnNlbmRlcl0pOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFkZHMgbWludGVyIHJvbGUgdG8gYWRkcmVzcyAoYWJsZSB0byBjcmVhdGUgbmV3IHRva2VucykKICAgICAqIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgZ2V0IG1pbnRlciBwcml2aWxlZ2VzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFkZE1pbnRlcihhZGRyZXNzIF9hZGRyZXNzKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBtaW50ZXJzW19hZGRyZXNzXSA9IHRydWU7CiAgICAgICAgTWludGVyQWRkZWQoX2FkZHJlc3MpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBSZW1vdmVzIG1pbnRlciByb2xlIGZyb20gYWRkcmVzcwogICAgICogQHBhcmFtIF9hZGRyZXNzIFRoZSBhZGRyZXNzIHRvIHJlbW92ZSBtaW50ZXIgcHJpdmlsZWdlcwogICAgICovCiAgICBmdW5jdGlvbiBkZWxNaW50ZXIoYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgbWludGVyc1tfYWRkcmVzc10gPSBmYWxzZTsKICAgICAgICBNaW50ZXJSZW1vdmVkKF9hZGRyZXNzKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBtaW50ZXIuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlNaW50ZXIoKSB7CiAgICAgICAgcmVxdWlyZShtaW50ZXJzW21zZy5zZW5kZXJdKTsKICAgICAgICBfOwogICAgfQp9CgovKioKICogQHRpdGxlIE5vZGVDcm93ZHNhbGUKICogQGRldiBOb2RlQ3Jvd2RzYWxlIGlzIGEgY29udHJhY3QgZm9yIG1hbmFnaW5nIGEgdG9rZW4gY3Jvd2RzYWxlIGZvciBOb2RlUG93ZXIgcHJvamVjdC4KICogQ3Jvd2RzYWxlIGhhdmUgNiBwaGFzZXMgd2l0aCBzdGFydCBhbmQgZW5kIHRpbWVzdGFtcHMsIHdoZXJlIGludmVzdG9ycyBjYW4gbWFrZQogKiB0b2tlbiBwdXJjaGFzZXMgYW5kIHRoZSBjcm93ZHNhbGUgd2lsbCBhc3NpZ24gdGhlbSB0b2tlbnMgYmFzZWQKICogb24gYSB0b2tlbiBwZXIgRVRIIHJhdGUgYW5kIGJvbnVzZXMuIENvbGxlY3RlZCBmdW5kcyBhcmUgZm9yd2FyZGVkIHRvIGEgd2FsbGV0CiAqIGFzIHRoZXkgYXJyaXZlLgogKi8KY29udHJhY3QgTm9kZUNyb3dkc2FsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICAvLyBUaGUgdG9rZW4gYmVpbmcgc29sZAogICAgTm9kZVRva2VuIHB1YmxpYyB0b2tlbjsKCiAgICAvLyBFeHRlcm5hbCB3YWxsZXQgd2hlcmUgZnVuZHMgZ2V0IGZvcndhcmRlZAogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwoKICAgIC8vIENyb3dkc2FsZSBhZG1pbmlzdHJhdG9ycwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgb3duZXJzOwoKICAgIC8vIEV4dGVybmFsIGJvdHMgdXBkYXRpbmcgcmF0ZXMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGJvdHM7CgogICAgLy8gVVNEIGNlbnRzIHBlciBFVEggZXhjaGFuZ2UgcmF0ZQogICAgdWludDI1NiBwdWJsaWMgcmF0ZVVTRGNFVEg7CgogICAgLy8gUGhhc2VzIGxpc3QsIHNlZSBzY2hlZHVsZSBpbiBjb25zdHJ1Y3RvcgogICAgbWFwcGluZyAodWludCA9PiBQaGFzZSkgcGhhc2VzOwoKICAgIC8vIFRoZSB0b3RhbCBudW1iZXIgb2YgcGhhc2VzICgwLi4uNSkKICAgIHVpbnQgcHVibGljIHRvdGFsUGhhc2VzID0gNjsKCiAgICAvLyBEZXNjcmlwdGlvbiBmb3IgZWFjaCBwaGFzZQogICAgc3RydWN0IFBoYXNlIHsKICAgICAgICB1aW50MjU2IHN0YXJ0VGltZTsKICAgICAgICB1aW50MjU2IGVuZFRpbWU7CiAgICAgICAgdWludDI1NiBib251c1BlcmNlbnQ7CiAgICB9CgogICAgLy8gTWluaW11bSBEZXBvc2l0IGluIFVTRCBjZW50cwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgbWluQ29udHJpYnV0aW9uVVNEYyA9IDEwMDA7CgoKICAgIC8vIEFtb3VudCBvZiByYWlzZWQgRXRoZXJzIChpbiB3ZWkpLgogICAgdWludDI1NiBwdWJsaWMgd2VpUmFpc2VkOwoKICAgIC8qKgogICAgICogZXZlbnQgZm9yIHRva2VuIHB1cmNoYXNlIGxvZ2dpbmcKICAgICAqIEBwYXJhbSBwdXJjaGFzZXIgd2hvIHBhaWQgZm9yIHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSBiZW5lZmljaWFyeSB3aG8gZ290IHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSB2YWx1ZSB3ZWlzIHBhaWQgZm9yIHB1cmNoYXNlCiAgICAgKiBAcGFyYW0gYm9udXNQZXJjZW50IGZyZWUgdG9rZW5zIHBlcmNhbnRhZ2UgZm9yIHRoZSBwaGFzZQogICAgICogQHBhcmFtIGFtb3VudCBhbW91bnQgb2YgdG9rZW5zIHB1cmNoYXNlZAogICAgICovCiAgICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBib251c1BlcmNlbnQsIHVpbnQyNTYgYW1vdW50KTsKCiAgICAvLyBldmVudCBmb3IgcmF0ZSB1cGRhdGUgbG9nZ2luZwogICAgZXZlbnQgUmF0ZVVwZGF0ZSh1aW50MjU2IHJhdGUpOwoKICAgIC8vIGV2ZW50IGZvciB3YWxsZXQgdXBkYXRlCiAgICBldmVudCBXYWxsZXRTZXQoYWRkcmVzcyBpbmRleGVkIHdhbGxldCk7CgogICAgLy8gb3duZXJzIG1hbmFnZW1lbnQgZXZlbnRzCiAgICBldmVudCBPd25lckFkZGVkKGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CiAgICBldmVudCBPd25lclJlbW92ZWQoYWRkcmVzcyBpbmRleGVkIHJlbW92ZWRPd25lcik7CgogICAgLy8gYm90IG1hbmFnZW1lbnQgZXZlbnRzCiAgICBldmVudCBCb3RBZGRlZChhZGRyZXNzIGluZGV4ZWQgbmV3Qm90KTsKICAgIGV2ZW50IEJvdFJlbW92ZWQoYWRkcmVzcyBpbmRleGVkIHJlbW92ZWRCb3QpOwoKICAgIGZ1bmN0aW9uIE5vZGVDcm93ZHNhbGUoYWRkcmVzcyBfdG9rZW5BZGRyZXNzLCB1aW50MjU2IF9pbml0aWFsUmF0ZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF90b2tlbkFkZHJlc3MgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgdG9rZW4gPSBOb2RlVG9rZW4oX3Rva2VuQWRkcmVzcyk7CiAgICAgICAgcmF0ZVVTRGNFVEggPSBfaW5pdGlhbFJhdGU7CiAgICAgICAgd2FsbGV0ID0gbXNnLnNlbmRlcjsKICAgICAgICBvd25lcnNbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgICAgIGJvdHNbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgICAgIC8qCiAgICAgICAgSUNPIFNDSEVEVUxFCiAgICAgICAgQm9udXMgICAgICAgIHN0YXJ0IHRpbWUgICAgICAgICAgICAgICBlbmQgdGltZQogICAgICAgIDQ1JSAgICAgMjAxNy0xMi0zMSAyMzo1OTo1OSAxNTE0NzY0Nzk5IDIwMTgtMDEtMzEgMjM6NTk6NTkgMTUxNzQ0MzE5OQogICAgICAgIDQwJSAgICAgMjAxOC0wMi0wMSAwMDowMDowMCAxNTE3NDQzMjAwIDIwMTgtMDItMTQgMjM6NTk6NTkgMTUxODY1Mjc5OQogICAgICAgIDMwJSAgICAgMjAxOC0wMi0xNSAwMDowMDowMCAxNTE4NjUyODAwIDIwMTgtMDItMjQgMjM6NTk6NTkgMTUxOTUxNjc5OQogICAgICAgIDIwJSAgICAgMjAxOC0wMi0yNSAwMDowMDowMCAxNTE5NTE2ODAwIDIwMTgtMDMtMDYgMjM6NTk6NTkgMTUyMDM4MDc5OQogICAgICAgIDE1JSAgICAgMjAxOC0wMy0wNyAwMDowMDowMCAxNTIwMzgwODAwIDIwMTgtMDMtMTYgMjM6NTk6NTkgMTUyMTI0NDc5OQogICAgICAgIDEwJSAgICAgMjAxOC0wMy0xNyAwMDowMDowMCAxNTIxMjQ0ODAwIDIwMTgtMDMtMjYgMjM6NTk6NTkgMTUyMjEwODc5OQogICAgICAgIDAwJSAgICAgMjAxOC0wMy0yNyAwMDowMDowMCAxNTIyMTA4ODAwIC0KICAgICAgICAqLwogICAgICAgIHBoYXNlc1swXS5ib251c1BlcmNlbnQgPSA0NTsKICAgICAgICBwaGFzZXNbMF0uc3RhcnRUaW1lID0gMTUxNDc2NDc5OTsKICAgICAgICBwaGFzZXNbMF0uZW5kVGltZSA9IDE1MTc0NDMxOTk7CiAgICAgICAgcGhhc2VzWzFdLmJvbnVzUGVyY2VudCA9IDQwOwogICAgICAgIHBoYXNlc1sxXS5zdGFydFRpbWUgPSAxNTE3NDQzMjAwOwogICAgICAgIHBoYXNlc1sxXS5lbmRUaW1lID0gMTUxODY1Mjc5OTsKICAgICAgICBwaGFzZXNbMl0uYm9udXNQZXJjZW50ID0gMzA7CiAgICAgICAgcGhhc2VzWzJdLnN0YXJ0VGltZSA9IDE1MTg2NTI4MDA7CiAgICAgICAgcGhhc2VzWzJdLmVuZFRpbWUgPSAxNTE5NTE2Nzk5OwogICAgICAgIHBoYXNlc1szXS5ib251c1BlcmNlbnQgPSAyMDsKICAgICAgICBwaGFzZXNbM10uc3RhcnRUaW1lID0gMTUxOTUxNjgwMDsKICAgICAgICBwaGFzZXNbM10uZW5kVGltZSA9IDE1MjAzODA3OTk7CiAgICAgICAgcGhhc2VzWzRdLmJvbnVzUGVyY2VudCA9IDE1OwogICAgICAgIHBoYXNlc1s0XS5zdGFydFRpbWUgPSAxNTIwMzgwODAwOwogICAgICAgIHBoYXNlc1s0XS5lbmRUaW1lID0gMTUyMTI0NDc5OTsKICAgICAgICBwaGFzZXNbNV0uYm9udXNQZXJjZW50ID0gMTA7CiAgICAgICAgcGhhc2VzWzVdLnN0YXJ0VGltZSA9IDE1MjEyNDQ4MDA7CiAgICAgICAgcGhhc2VzWzVdLmVuZFRpbWUgPSAxNTIyMTA4Nzk5OwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBVcGRhdGUgY29sbGVjdGluZyB3YWxsZXQgYWRkcmVzcwogICAgICogQHBhcmFtIF9hZGRyZXNzIFRoZSBhZGRyZXNzIHRvIHNlbmQgY29sbGVjdGVkIGZ1bmRzCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFdhbGxldChhZGRyZXNzIF9hZGRyZXNzKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICB3YWxsZXQgPSBfYWRkcmVzczsKICAgICAgICBXYWxsZXRTZXQoX2FkZHJlc3MpOwogICAgfQoKCiAgICAvLyBmYWxsYmFjayBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBidXkgdG9rZW5zCiAgICBmdW5jdGlvbiAoKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgogICAgLy8gbG93IGxldmVsIHRva2VuIHB1cmNoYXNlIGZ1bmN0aW9uCiAgICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBiZW5lZmljaWFyeSkgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgIT0gMCk7CgogICAgICAgIHVpbnQyNTYgY3VycmVudEJvbnVzUGVyY2VudCA9IGdldEJvbnVzUGVyY2VudChub3cpOwoKICAgICAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKCiAgICAgICAgcmVxdWlyZShjYWxjdWxhdGVVU0RjVmFsdWUod2VpQW1vdW50KSA+PSBtaW5Db250cmlidXRpb25VU0RjKTsKCiAgICAgICAgLy8gY2FsY3VsYXRlIHRva2VuIGFtb3VudCB0byBiZSBjcmVhdGVkCiAgICAgICAgdWludDI1NiB0b2tlbnMgPSBjYWxjdWxhdGVUb2tlbkFtb3VudCh3ZWlBbW91bnQsIGN1cnJlbnRCb251c1BlcmNlbnQpOwoKICAgICAgICAvLyB1cGRhdGUgc3RhdGUKICAgICAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgICAgIHRva2VuLm1pbnQoYmVuZWZpY2lhcnksIHRva2Vucyk7CiAgICAgICAgVG9rZW5QdXJjaGFzZShtc2cuc2VuZGVyLCBiZW5lZmljaWFyeSwgd2VpQW1vdW50LCBjdXJyZW50Qm9udXNQZXJjZW50LCB0b2tlbnMpOwoKICAgICAgICBmb3J3YXJkRnVuZHMoKTsKICAgIH0KCiAgICAvLyBJZiBwaGFzZSBleGlzdHMgcmV0dXJuIGNvcnJlc3BvbmRpbmcgYm9udXMgZm9yIHRoZSBnaXZlbiBkYXRlCiAgICAvLyBlbHNlIHJldHVybiAwIChwZXJjZW50KQogICAgZnVuY3Rpb24gZ2V0Qm9udXNQZXJjZW50KHVpbnQyNTYgZGF0ZXRpbWUpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCB0b3RhbFBoYXNlczsgaSsrKSB7CiAgICAgICAgICAgIGlmIChkYXRldGltZSA+PSBwaGFzZXNbaV0uc3RhcnRUaW1lICYmIGRhdGV0aW1lIDw9IHBoYXNlc1tpXS5lbmRUaW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGhhc2VzW2ldLmJvbnVzUGVyY2VudDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICAvLyBzZXQgcmF0ZQogICAgZnVuY3Rpb24gc2V0UmF0ZSh1aW50MjU2IF9yYXRlVVNEY0VUSCkgcHVibGljIG9ubHlCb3QgewogICAgICAgIC8vIGRvbid0IGFsbG93IHRvIGNoYW5nZSByYXRlIG1vcmUgdGhhbiAxMCUKICAgICAgICBhc3NlcnQoX3JhdGVVU0RjRVRIIDwgcmF0ZVVTRGNFVEgubXVsKDExMCkuZGl2KDEwMCkpOwogICAgICAgIGFzc2VydChfcmF0ZVVTRGNFVEggPiByYXRlVVNEY0VUSC5tdWwoOTApLmRpdigxMDApKTsKICAgICAgICByYXRlVVNEY0VUSCA9IF9yYXRlVVNEY0VUSDsKICAgICAgICBSYXRlVXBkYXRlKHJhdGVVU0RjRVRIKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWRkcyBhZG1pbmlzdHJhdGl2ZSByb2xlIHRvIGFkZHJlc3MKICAgICAqIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgZ2V0IGFkbWluaXN0cmF0aXZlIHByaXZpbGVnZXMKICAgICAqLwogICAgZnVuY3Rpb24gYWRkT3duZXIoYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgb3duZXJzW19hZGRyZXNzXSA9IHRydWU7CiAgICAgICAgT3duZXJBZGRlZChfYWRkcmVzcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFJlbW92ZXMgYWRtaW5pc3RyYXRpdmUgcm9sZSBmcm9tIGFkZHJlc3MKICAgICAqIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyB0byByZW1vdmUgYWRtaW5pc3RyYXRpdmUgcHJpdmlsZWdlcyBmcm9tCiAgICAgKi8KICAgIGZ1bmN0aW9uIGRlbE93bmVyKGFkZHJlc3MgX2FkZHJlc3MpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIG93bmVyc1tfYWRkcmVzc10gPSBmYWxzZTsKICAgICAgICBPd25lclJlbW92ZWQoX2FkZHJlc3MpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShvd25lcnNbbXNnLnNlbmRlcl0pOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFkZHMgcmF0ZSB1cGRhdGluZyBib3QKICAgICAqIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyBvZiB0aGUgcmF0ZSBib3QKICAgICAqLwogICAgZnVuY3Rpb24gYWRkQm90KGFkZHJlc3MgX2FkZHJlc3MpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGJvdHNbX2FkZHJlc3NdID0gdHJ1ZTsKICAgICAgICBCb3RBZGRlZChfYWRkcmVzcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFJlbW92ZXMgcmF0ZSB1cGRhdGluZyBib3QgYWRkcmVzcwogICAgICogQHBhcmFtIF9hZGRyZXNzIFRoZSBhZGRyZXNzIG9mIHRoZSByYXRlIGJvdAogICAgICovCiAgICBmdW5jdGlvbiBkZWxCb3QoYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgYm90c1tfYWRkcmVzc10gPSBmYWxzZTsKICAgICAgICBCb3RSZW1vdmVkKF9hZGRyZXNzKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBib3QuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlCb3QoKSB7CiAgICAgICAgcmVxdWlyZShib3RzW21zZy5zZW5kZXJdKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vIGNhbGN1bGF0ZSBkZXBvc2l0IHZhbHVlIGluIFVTRCBDZW50cwogICAgZnVuY3Rpb24gY2FsY3VsYXRlVVNEY1ZhbHVlKHVpbnQyNTYgX3dlaURlcG9zaXQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKCiAgICAgICAgLy8gd2VpIHBlciBVU0QgY2VudAogICAgICAgIHVpbnQyNTYgd2VpUGVyVVNEYyA9IDEgZXRoZXIvcmF0ZVVTRGNFVEg7CgogICAgICAgIC8vIERlcG9zaXRlZCB2YWx1ZSBjb252ZXJ0ZWQgdG8gVVNEIGNlbnRzCiAgICAgICAgdWludDI1NiBkZXBvc2l0VmFsdWVJblVTRGMgPSBfd2VpRGVwb3NpdC5kaXYod2VpUGVyVVNEYyk7CiAgICAgICAgcmV0dXJuIGRlcG9zaXRWYWx1ZUluVVNEYzsKICAgIH0KCiAgICAvLyBjYWxjdWxhdGVzIGhvdyBtdWNoIHRva2VucyB3aWxsIGJlbmVmaWNpYXJ5IGdldAogICAgLy8gZm9yIGdpdmVuIGFtb3VudCBvZiB3ZWkKICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVRva2VuQW1vdW50KHVpbnQyNTYgX3dlaURlcG9zaXQsIHVpbnQyNTYgX2JvbnVzVG9rZW5zUGVyY2VudCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgbWFpblRva2VucyA9IGNhbGN1bGF0ZVVTRGNWYWx1ZShfd2VpRGVwb3NpdCk7CiAgICAgICAgdWludDI1NiBib251c1Rva2VucyA9IG1haW5Ub2tlbnMubXVsKF9ib251c1Rva2Vuc1BlcmNlbnQpLmRpdigxMDApOwogICAgICAgIHJldHVybiBtYWluVG9rZW5zLmFkZChib251c1Rva2Vucyk7CiAgICB9CgogICAgLy8gc2VuZCBldGhlciB0byB0aGUgZnVuZCBjb2xsZWN0aW9uIHdhbGxldAogICAgLy8gb3ZlcnJpZGUgdG8gY3JlYXRlIGN1c3RvbSBmdW5kIGZvcndhcmRpbmcgbWVjaGFuaXNtcwogICAgZnVuY3Rpb24gZm9yd2FyZEZ1bmRzKCkgaW50ZXJuYWwgewogICAgICAgIHdhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfQoKCgp9'.
	

]
