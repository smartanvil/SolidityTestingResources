Class {
	#name : #SRTdee5d321084cfd5425a14354dbff5063025e1846,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdee5d321084cfd5425a14354dbff5063025e1846 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQ2NCkgewogICAgICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDY0KSB7CiAgICAgICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgICB9CgogICAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgICB9CgogICAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICAgIH0KfQoKCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgYm9vbCBwdWJsaWMgdHJhbnNmZXJzRW5hYmxlZDsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKCmNvbnRyYWN0IEVSQzIwIHsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIGJvb2wgcHVibGljIHRyYW5zZmVyc0VuYWJsZWQ7CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAgIC8qKgogICAgKiBQcm90ZWN0aW9uIGFnYWluc3Qgc2hvcnQgYWRkcmVzcyBhdHRhY2sKICAgICovCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBudW13b3JkcykgewogICAgICAgIGFzc2VydChtc2cuZGF0YS5sZW5ndGggPT0gbnVtd29yZHMgKiAzMiArIDQpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIG9ubHlQYXlsb2FkU2l6ZSgyKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgICAgIHJlcXVpcmUodHJhbnNmZXJzRW5hYmxlZCk7CgogICAgICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9Cgp9CgoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKICAgIC8qKgogICAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgb25seVBheWxvYWRTaXplKDMpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKICAgICAgICByZXF1aXJlKHRyYW5zZmVyc0VuYWJsZWQpOwoKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICAgKgogICAgICogQmV3YXJlIHRoYXQgY2hhbmdpbmcgYW4gYWxsb3dhbmNlIHdpdGggdGhpcyBtZXRob2QgYnJpbmdzIHRoZSByaXNrIHRoYXQgc29tZW9uZSBtYXkgdXNlIGJvdGggdGhlIG9sZAogICAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAgICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgb25seVBheWxvYWRTaXplKDIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgLyoqCiAgICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAgICovCiAgICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgICAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgICAgIH0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKfQoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgb3duZXJUd287CgogICAgZXZlbnQgT3duZXJDaGFuZ2VkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIH0KCgogICAgLyoqCiAgICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSBvd25lclR3byk7CiAgICAgICAgXzsKICAgIH0KCgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAgICogQHBhcmFtIF9uZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyVHdvKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9uZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBPd25lckNoYW5nZWQob3duZXIsIF9uZXdPd25lcik7CiAgICAgICAgb3duZXJUd28gPSBfbmV3T3duZXI7CiAgICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBNaW50YWJsZSB0b2tlbgogKiBAZGV2IFNpbXBsZSBFUkMyMCBUb2tlbiBleGFtcGxlLCB3aXRoIG1pbnRhYmxlIHRva2VuIGNyZWF0aW9uCiAqIEBkZXYgSXNzdWU6ICogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9pc3N1ZXMvMTIwCiAqIEJhc2VkIG9uIGNvZGUgYnkgVG9rZW5NYXJrZXROZXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9Ub2tlbk1hcmtldE5ldC9pY28vYmxvYi9tYXN0ZXIvY29udHJhY3RzL01pbnRhYmxlVG9rZW4uc29sCiAqLwoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJGT09PWiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJGT09PWiI7CiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgTWludEZpbmlzaGVkKCk7CgogICAgYm9vbCBwdWJsaWMgbWludGluZ0ZpbmlzaGVkOwoKICAgIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICAgICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBtaW50IHRva2VucwogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgbWludGVkIHRva2Vucy4KICAgICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIG1pbnQuCiAgICAgKiBAcmV0dXJuIEEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAgICovCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQsIGFkZHJlc3MgX293bmVyKSBjYW5NaW50IGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbX293bmVyXSA9IGJhbGFuY2VzW19vd25lcl0uc3ViKF9hbW91bnQpOwogICAgICAgIE1pbnQoX3RvLCBfYW1vdW50KTsKICAgICAgICBUcmFuc2Zlcihfb3duZXIsIF90bywgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIHN0b3AgbWludGluZyBuZXcgdG9rZW5zLgogICAgICogQHJldHVybiBUcnVlIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBvbmx5T3duZXIgY2FuTWludCBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICBNaW50RmluaXNoZWQoKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFBldGVyc29uJ3MgTGF3IFByb3RlY3Rpb24KICAgICAqIENsYWltIHRva2VucwogICAgICovCiAgICBmdW5jdGlvbiBjbGFpbVRva2VucyhhZGRyZXNzIF90b2tlbikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaWYgKF90b2tlbiA9PSAweDApIHsKICAgICAgICAgICAgb3duZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgTWludGFibGVUb2tlbiB0b2tlbiA9IE1pbnRhYmxlVG9rZW4oX3Rva2VuKTsKICAgICAgICB1aW50MjU2IGJhbGFuY2UgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgdG9rZW4udHJhbnNmZXIob3duZXIsIGJhbGFuY2UpOwoKICAgICAgICBUcmFuc2ZlcihfdG9rZW4sIG93bmVyLCBiYWxhbmNlKTsKICAgIH0KfQoKCi8qKgogKiBAdGl0bGUgQ3Jvd2RzYWxlCiAqIEBkZXYgQ3Jvd2RzYWxlIGlzIGEgYmFzZSBjb250cmFjdCBmb3IgbWFuYWdpbmcgYSB0b2tlbiBjcm93ZHNhbGUuCiAqIENyb3dkc2FsZXMgaGF2ZSBhIHN0YXJ0IGFuZCBlbmQgdGltZXN0YW1wcywgd2hlcmUgaW52ZXN0b3JzIGNhbiBtYWtlCiAqIHRva2VuIHB1cmNoYXNlcy4gRnVuZHMgY29sbGVjdGVkIGFyZSBmb3J3YXJkZWQgdG8gYSB3YWxsZXQKICogYXMgdGhleSBhcnJpdmUuCiAqLwpjb250cmFjdCBDcm93ZHNhbGUgaXMgT3duYWJsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIC8vIGFkZHJlc3Mgd2hlcmUgZnVuZHMgYXJlIGNvbGxlY3RlZAogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwoKICAgIC8vIGFtb3VudCBvZiByYWlzZWQgbW9uZXkgaW4gd2VpCiAgICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWQ7CgogICAgdWludDI1NiBwdWJsaWMgdG9rZW5BbGxvY2F0ZWQ7CgogICAgdWludDI1NiBwdWJsaWMgaGFyZFdlaUNhcCA9IDExOTAwMCAqICgxMCAqKiAxOCk7CgogICAgZnVuY3Rpb24gQ3Jvd2RzYWxlKAogICAgYWRkcmVzcyBfd2FsbGV0CiAgICApCiAgICBwdWJsaWMKICAgIHsKICAgICAgICByZXF1aXJlKF93YWxsZXQgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgd2FsbGV0ID0gX3dhbGxldDsKICAgIH0KfQoKCmNvbnRyYWN0IEZvb296Q3Jvd2RzYWxlIGlzIE93bmFibGUsIENyb3dkc2FsZSwgTWludGFibGVUb2tlbiB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBlbnVtIFN0YXRlIHtBY3RpdmUsIENsb3NlZH0KICAgIFN0YXRlIHB1YmxpYyBzdGF0ZTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkZXBvc2l0ZWQ7CgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgSU5JVElBTF9TVVBQTFkgPSA2MTMzMzMzMjggKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgdWludDI1NiBwdWJsaWMgZnVuZEZvclNhbGUgPSA0NjYxMzMzMzAgKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwoKICAgIGFkZHJlc3MgcHVibGljIGFkZHJlc3NGdW5kRGV2ZWxvcGVycyA9IDB4MzI2Qjc3NDBlNUU4MDZmYzczMTIwMEEzZWE5MmY1ODhhODY1NjhBMzsKICAgIGFkZHJlc3MgcHVibGljIGFkZHJlc3NGdW5kQm91bnR5ID0gMHhFNTg1YjcyM2JEYzYzMjRkRDU1Y2Y2MTRmYTgzZjYxQTg4RDViM0Q4OwogICAgYWRkcmVzcyBwdWJsaWMgYWRkcmVzc0Z1bmRCb251cyA9IDB4MWYzMThmRTc0NWJFRTUxMWE3MkE4QUIyYjcwNGE1RjI4NTU4NzMzNTsKICAgIGFkZHJlc3MgcHVibGljIGFkZHJlc3NGdW5kSW52ZXN0bWVudCA9IDB4ODBBMEJFMEFiMzMwRTQ4ZEU4RTM3Mjc3YjgzOGI5ZUIwQmIzYmI2ZjsKICAgIGFkZHJlc3MgcHVibGljIGFkZHJlc3NGdW5kQWRtaW5pc3RyYXRpb24gPSAweEZlMzkwNUI5QmQ3QzBjNDE2NDg3MzE4MGRmRTBlZTg1RmJGZTlGMTk7CgoKICAgIHVpbnQyNTZbXSBwdWJsaWMgZGlzY291bnQgID0gWzUwLCAyNSwgMjAsIDE1LCAxMCwgNV07CgoKCiAgICB1aW50MjU2IHB1YmxpYyB3ZWlNaW5TYWxlUHJlSWNvID0gMTE5MCAqIDEwICoqIDE1OwogICAgdWludDI1NiBwdWJsaWMgd2VpTWluU2FsZUljbyA9IDI5ICogMTAgKiogMTU7CiAgICB1aW50MjU2IHByaWNlVG9rZW4gPSAzMzYyOyAvLyAkMC4yNSA9IDEgdG9rZW4gPT4gJDEsMDAwID0gMS4xOSBFVEggPT4KICAgICAgICAgICAgICAgICAgICAgICAgIC8vNCwwMDAgdG9rZW4gPSAxLjE5IEVUSCA9PiAxIEVUSCA9IDQsMDAwLzEuMTkgPSAzMzYyIHRva2VuCgogICAgdWludDI1NiBwdWJsaWMgY291bnRJbnZlc3RvcjsKICAgIHVpbnQyNTYgcHVibGljIGN1cnJlbnRBZnRlckljb1BlcmlvZDsKCiAgICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgVG9rZW5MaW1pdFJlYWNoZWQodWludDI1NiB0b2tlblJhaXNlZCwgdWludDI1NiBwdXJjaGFzZWRUb2tlbik7CiAgICBldmVudCBIYXJkQ2FwUmVhY2hlZCgpOwogICAgZXZlbnQgRmluYWxpemVkKCk7CgogICAgZnVuY3Rpb24gRm9vb3pDcm93ZHNhbGUgKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9vd25lclR3bykgcHVibGljCiAgICBDcm93ZHNhbGUoX293bmVyKQogICAgewogICAgICAgIHJlcXVpcmUoX293bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX293bmVyVHdvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIG93bmVyID0gX293bmVyOwogICAgICAgIG93bmVyVHdvID0gX293bmVyVHdvOwogICAgICAgIC8vb3duZXIgPSBtc2cuc2VuZGVyOyAvL2ZvciB0ZXN0J3MKICAgICAgICB0cmFuc2ZlcnNFbmFibGVkID0gdHJ1ZTsKICAgICAgICBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKICAgICAgICBzdGF0ZSA9IFN0YXRlLkFjdGl2ZTsKICAgICAgICB0b3RhbFN1cHBseSA9IElOSVRJQUxfU1VQUExZOwogICAgICAgIG1pbnRGb3JPd25lcihvd25lcik7CiAgICB9CgogICAgbW9kaWZpZXIgaW5TdGF0ZShTdGF0ZSBfc3RhdGUpIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IF9zdGF0ZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBmYWxsYmFjayBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBidXkgdG9rZW5zCiAgICBmdW5jdGlvbigpIHBheWFibGUgcHVibGljIHsKICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UHJpY2VUb2tlbih1aW50MjU2IF9uZXdQcmljZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfbmV3UHJpY2UgPiAwKTsKICAgICAgICBwcmljZVRva2VuID0gX25ld1ByaWNlOwogICAgfQoKICAgIC8vIGxvdyBsZXZlbCB0b2tlbiBwdXJjaGFzZSBmdW5jdGlvbgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgX2ludmVzdG9yKSBwdWJsaWMgaW5TdGF0ZShTdGF0ZS5BY3RpdmUpIHBheWFibGUgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgcmVxdWlyZShfaW52ZXN0b3IgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICAgICAgdWludDI1NiB0b2tlbnMgPSB2YWxpZFB1cmNoYXNlVG9rZW5zKHdlaUFtb3VudCk7CiAgICAgICAgaWYgKHRva2VucyA9PSAwKSB7cmV2ZXJ0KCk7fQogICAgICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKICAgICAgICB0b2tlbkFsbG9jYXRlZCA9IHRva2VuQWxsb2NhdGVkLmFkZCh0b2tlbnMpOwogICAgICAgIG1pbnQoX2ludmVzdG9yLCB0b2tlbnMsIG93bmVyKTsKCiAgICAgICAgVG9rZW5QdXJjaGFzZShfaW52ZXN0b3IsIHdlaUFtb3VudCwgdG9rZW5zKTsKICAgICAgICBpZiAoZGVwb3NpdGVkW19pbnZlc3Rvcl0gPT0gMCkgewogICAgICAgICAgICBjb3VudEludmVzdG9yID0gY291bnRJbnZlc3Rvci5hZGQoMSk7CiAgICAgICAgfQogICAgICAgIGRlcG9zaXQoX2ludmVzdG9yKTsKICAgICAgICB3YWxsZXQudHJhbnNmZXIod2VpQW1vdW50KTsKICAgICAgICByZXR1cm4gdG9rZW5zOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRvdGFsQW1vdW50T2ZUb2tlbnModWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGN1cnJlbnREYXRlID0gbm93OwogICAgICAgIC8vY3VycmVudERhdGUgPSAxNTI2MzQyNDAwOyAvL2ZvciB0ZXN0J3MgKFR1ZSwgMTUgTWF5IDIwMTggMDA6MDA6MDAgR01UKQogICAgICAgIHVpbnQyNTYgY3VycmVudFBlcmlvZCA9IGdldFBlcmlvZChjdXJyZW50RGF0ZSk7CiAgICAgICAgdWludDI1NiBhbW91bnRPZlRva2VucyA9IDA7CiAgICAgICAgaWYoY3VycmVudFBlcmlvZCA8IDYpewogICAgICAgICAgICBhbW91bnRPZlRva2VucyA9IF93ZWlBbW91bnQubXVsKHByaWNlVG9rZW4pLm11bChkaXNjb3VudFtjdXJyZW50UGVyaW9kXSArIDEwMCkuZGl2KDEwMCk7CiAgICAgICAgfQogICAgICAgIGlmKGN1cnJlbnRQZXJpb2QgPT0gMCAmJiBfd2VpQW1vdW50IDwgd2VpTWluU2FsZVByZUljbyl7CiAgICAgICAgICAgIGFtb3VudE9mVG9rZW5zID0gMDsKICAgICAgICB9CiAgICAgICAgaWYoMCA8IGN1cnJlbnRQZXJpb2QgJiYgY3VycmVudFBlcmlvZCA8IDYgJiYgX3dlaUFtb3VudCA8IHdlaU1pblNhbGVJY28pewogICAgICAgICAgICBhbW91bnRPZlRva2VucyA9IDA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhbW91bnRPZlRva2VuczsKICAgIH0KCiAgICAvKioKICAgICogUHJlLUlDTyBzYWxlIHN0YXJ0cyBvbiAzMSBvZiBNYXJjaCwgZW5kcyBvbiAwNiBBcHJpbCAyMDE4CiAgICAqIDFzdC4gU3RhZ2Ugc3RhcnRzIDA3IG9mIEFwcmlsICwgZW5kcyBvbiAxNiBvZiBBcHJpbCAsIDIwMTgKICAgICogMm5kLiBTdGFnZSBzdGFydHMgMTcgb2YgQXByaWwgLCBlbmRzIG9uIDI2IG9mIEFwcmlsICwgMjAxOAogICAgKiAzcmQuIFN0YWdlIHN0YXJ0cyAyNyBvZiBBcHJpbCAsIGVuZHMgb24gMDYgb2YgTWF5ICwgMjAxOAogICAgKiA0dGguIFN0YWdlIHN0YXJ0cyAwNyBvZiBNYXksICAgIGVuZHMgb24gMTYgIG9mIE1heSAsIDIwMTgKICAgICogNHRoLiBTdGFnZSBzdGFydHMgMTcgb2YgTWF5LCAgICBlbmRzIG9uIDMxIG9mIE1heSAsIDIwMTgKICAgICovCiAgICBmdW5jdGlvbiBnZXRQZXJpb2QodWludDI1NiBfY3VycmVudERhdGUpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICAvLzE1MjI0NTQ0MDAgLSBNYXJjaCwgMzEsIDIwMTggMDA6MDA6MDAgJiYgMTUyMzA1OTE5OSAtIEFwcmlsLCAwNiwgMjAxOCAyMzo1OTo1OQogICAgICAgIGlmKCAxNTIyNDU0NDAwIDw9IF9jdXJyZW50RGF0ZSAmJiBfY3VycmVudERhdGUgPD0gMTUyMzA1OTE5OSl7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICAvLzE1MjMwNTkyMDAgLSBBcHJpbCwgMDcsIDIwMTggMDA6MDA6MDAgJiYgMTUyMzkyMzE5OSAtIEFwcmlsLCAxNiwgMjAxOCAyMzo1OTo1OQogICAgICAgIGlmKCAxNTIzMDU5MjAwIDw9IF9jdXJyZW50RGF0ZSAmJiBfY3VycmVudERhdGUgPD0gMTUyMzkyMzE5OSl7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0KICAgICAgICAvLzE1MjM5MjMyMDAgLSBBcHJpbCwgMTcsIDIwMTggMDA6MDA6MDAgJiYgMTUyNDc4NzE5OSAtIEFwcmlsLCAyNiwgMjAxOCAyMzo1OTo1OQogICAgICAgIGlmKCAxNTIzOTIzMjAwIDw9IF9jdXJyZW50RGF0ZSAmJiBfY3VycmVudERhdGUgPD0gMTUyNDc4NzE5OSl7CiAgICAgICAgICAgIHJldHVybiAyOwogICAgICAgIH0KICAgICAgICAvLzE1MjQ3ODcyMDAgLSBBcHJpbCwgMjcsIDIwMTggMDA6MDA6MDAgJiYgMTUyNTY1MTE5OSAtIE1heSwgICAwNiwgMjAxOCAyMzo1OTo1OQogICAgICAgIGlmKCAxNTI0Nzg3MjAwIDw9IF9jdXJyZW50RGF0ZSAmJiBfY3VycmVudERhdGUgPD0gMTUyNTY1MTE5OSl7CiAgICAgICAgICAgIHJldHVybiAzOwogICAgICAgIH0KICAgICAgICAvLzE1MjU2NTEyMDAgLSBNYXksICAgMDcsIDIwMTggMDA6MDA6MDAgJiYgMTUyNjUxNTE5OSAtIE1heSwgICAxNiwgMjAxOCAyMzo1OTo1OQogICAgICAgIGlmKCAxNTI1NjUxMjAwIDw9IF9jdXJyZW50RGF0ZSAmJiBfY3VycmVudERhdGUgPD0gMTUyNjUxNTE5OSl7CiAgICAgICAgICAgIHJldHVybiA0OwogICAgICAgIH0KICAgICAgICAvLzE1MjY1MTUyMDAgLSBNYXksICAgMTcsIDIwMTggMDA6MDA6MDAgJiYgMTUyNzgxMTE5OSAtIE1heSwgICAzMSwgMjAxOCAyMzo1OTo1OQogICAgICAgIGlmKCAxNTI2NTE1MjAwIDw9IF9jdXJyZW50RGF0ZSAmJiBfY3VycmVudERhdGUgPD0gMTUyNzgxMTE5OSl7CiAgICAgICAgICAgIHJldHVybiA1OwogICAgICAgIH0KICAgICAgICByZXR1cm4gMTA7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QWZ0ZXJJY29QZXJpb2QodWludDI1NiBfY3VycmVudERhdGUpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50MjU2IGVuZEljbyA9IDE1Mjc4MTExOTk7IC8vIE1heSwgICAzMSwgMjAxOCAyMzo1OTo1OQogICAgICAgIGlmKCBlbmRJY28gPCBfY3VycmVudERhdGUgJiYgX2N1cnJlbnREYXRlIDw9IGVuZEljbyArIDIgeWVhcnMpewogICAgICAgICAgICByZXR1cm4gMTAwOwogICAgICAgIH0KICAgICAgICBpZiggZW5kSWNvICsgMiB5ZWFycyA8IF9jdXJyZW50RGF0ZSAmJiBfY3VycmVudERhdGUgPD0gZW5kSWNvICsgNCB5ZWFycyl7CiAgICAgICAgICAgIHJldHVybiAyMDA7CiAgICAgICAgfQogICAgICAgIGlmKCBlbmRJY28gKyA0IHllYXJzIDwgX2N1cnJlbnREYXRlICYmIF9jdXJyZW50RGF0ZSA8PSBlbmRJY28gKyA2IHllYXJzKXsKICAgICAgICAgICAgcmV0dXJuIDMwMDsKICAgICAgICB9CiAgICAgICAgaWYoIGVuZEljbyArIDYgeWVhcnMgPCBfY3VycmVudERhdGUgJiYgX2N1cnJlbnREYXRlIDw9IGVuZEljbyArIDggeWVhcnMpewogICAgICAgICAgICByZXR1cm4gNDAwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50QWZ0ZXJJY29QZXJpb2QoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCByZXN1bHQpIHsKICAgICAgICB1aW50MjU2IHRvdGFsQ29zdCA9IHRva2VuQWxsb2NhdGVkLmRpdihwcmljZVRva2VuKTsKICAgICAgICB1aW50MjU2IGZpdmVQZXJjZW50ID0gMDsKICAgICAgICB1aW50MjU2IGN1cnJlbnREYXRlID0gbm93OwogICAgICAgIC8vY3VycmVudERhdGUgPSAxNTY0NzA0MDAwOyAvL2ZvciB0ZXN0IEF1ZywgMDIsIDIwMTkKICAgICAgICBib29sIGNoYW5nZVBlcmlvZCA9IGZhbHNlOwogICAgICAgIHVpbnQyNTYgbm9uU29sZFRva2VuID0gdG90YWxTdXBwbHkuc3ViKHRva2VuQWxsb2NhdGVkKTsKICAgICAgICB1aW50MjU2IG1pbnRUb2tlbnMgPSAwOwogICAgICAgIHJlc3VsdCA9IGZhbHNlOwogICAgICAgIGlmIChjdXJyZW50QWZ0ZXJJY29QZXJpb2QgPCBnZXRBZnRlckljb1BlcmlvZChjdXJyZW50RGF0ZSkpewogICAgICAgICAgICBjdXJyZW50QWZ0ZXJJY29QZXJpb2QgPSBjdXJyZW50QWZ0ZXJJY29QZXJpb2QuYWRkKGdldEFmdGVySWNvUGVyaW9kKGN1cnJlbnREYXRlKSk7CiAgICAgICAgICAgIGNoYW5nZVBlcmlvZCA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmKHRvdGFsQ29zdC5tdWwoMTAwKS5kaXYod2VpUmFpc2VkKSA8IDIwMCB8fCBjaGFuZ2VQZXJpb2QpewogICAgICAgICAgICBtaW50VG9rZW5zID0gbm9uU29sZFRva2VuLmRpdig0KTsgLy8gMjUlCiAgICAgICAgICAgIGZpdmVQZXJjZW50ID0gbWludFRva2Vucy5kaXYoMjApOyAvLyA1JQoKICAgICAgICAgICAgYmFsYW5jZXNbYWRkcmVzc0Z1bmRCb251c10gPSBiYWxhbmNlc1thZGRyZXNzRnVuZEJvbnVzXS5hZGQoZml2ZVBlcmNlbnQubXVsKDIpKTsKICAgICAgICAgICAgYmFsYW5jZXNbYWRkcmVzc0Z1bmRCb3VudHldID0gYmFsYW5jZXNbYWRkcmVzc0Z1bmRCb3VudHldLmFkZChmaXZlUGVyY2VudCk7CiAgICAgICAgICAgIGJhbGFuY2VzW2FkZHJlc3NGdW5kSW52ZXN0bWVudF0gPSBiYWxhbmNlc1thZGRyZXNzRnVuZEludmVzdG1lbnRdLmFkZChmaXZlUGVyY2VudC5tdWwoMTApKTsKICAgICAgICAgICAgYmFsYW5jZXNbYWRkcmVzc0Z1bmRBZG1pbmlzdHJhdGlvbl0gPSBiYWxhbmNlc1thZGRyZXNzRnVuZEFkbWluaXN0cmF0aW9uXS5hZGQoZml2ZVBlcmNlbnQpOwogICAgICAgICAgICAvL2JhbGFuY2VzW293bmVyVHdvXSA9IGJhbGFuY2VzW293bmVyVHdvXS5hZGQoZml2ZVBlcmNlbnQubXVsKDYpKTsKCiAgICAgICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5zdWIoZml2ZVBlcmNlbnQubXVsKDE0KSk7IC8vIC0gNzAlCiAgICAgICAgICAgIHRva2VuQWxsb2NhdGVkID0gdG9rZW5BbGxvY2F0ZWQuYWRkKGZpdmVQZXJjZW50Lm11bCgxNCkpOwogICAgICAgICAgICByZXN1bHQgPSB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBkZXBvc2l0KGFkZHJlc3MgaW52ZXN0b3IpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICAgICAgZGVwb3NpdGVkW2ludmVzdG9yXSA9IGRlcG9zaXRlZFtpbnZlc3Rvcl0uYWRkKG1zZy52YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gbWludEZvck93bmVyKGFkZHJlc3MgX3dhbGxldCkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCByZXN1bHQpIHsKICAgICAgICByZXN1bHQgPSBmYWxzZTsKICAgICAgICB1aW50MjU2IGZ1bmRCb3VudHkgPSAyNDUzMzMzMyAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CiAgICAgICAgdWludDI1NiBmdW5kRGV2ZWxvcGVycyA9IDEyMjY2NjY2NSAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CiAgICAgICAgcmVxdWlyZShfd2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGJhbGFuY2VzW2FkZHJlc3NGdW5kRGV2ZWxvcGVyc10gPSBiYWxhbmNlc1thZGRyZXNzRnVuZERldmVsb3BlcnNdLmFkZChmdW5kRGV2ZWxvcGVycyk7CiAgICAgICAgYmFsYW5jZXNbYWRkcmVzc0Z1bmRCb3VudHldID0gYmFsYW5jZXNbYWRkcmVzc0Z1bmRCb3VudHldLmFkZChmdW5kQm91bnR5KTsKICAgICAgICB0b2tlbkFsbG9jYXRlZCA9IHRva2VuQWxsb2NhdGVkLmFkZChmdW5kRGV2ZWxvcGVycykuYWRkKGZ1bmRCb3VudHkpOwogICAgICAgIGJhbGFuY2VzW193YWxsZXRdID0gYmFsYW5jZXNbX3dhbGxldF0uYWRkKElOSVRJQUxfU1VQUExZKS5zdWIodG9rZW5BbGxvY2F0ZWQpOwogICAgICAgIHJlc3VsdCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RGVwb3NpdGVkKGFkZHJlc3MgX2ludmVzdG9yKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICByZXR1cm4gZGVwb3NpdGVkW19pbnZlc3Rvcl07CiAgICB9CgogICAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZVRva2Vucyh1aW50MjU2IF93ZWlBbW91bnQpIHB1YmxpYyBpblN0YXRlKFN0YXRlLkFjdGl2ZSkgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYWRkVG9rZW5zID0gZ2V0VG90YWxBbW91bnRPZlRva2Vucyhfd2VpQW1vdW50KTsKICAgICAgICBpZiAodG9rZW5BbGxvY2F0ZWQuYWRkKGFkZFRva2VucykgPiBmdW5kRm9yU2FsZSkgewogICAgICAgICAgICBUb2tlbkxpbWl0UmVhY2hlZCh0b2tlbkFsbG9jYXRlZCwgYWRkVG9rZW5zKTsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIGlmICh3ZWlSYWlzZWQuYWRkKF93ZWlBbW91bnQpID4gaGFyZFdlaUNhcCkgewogICAgICAgICAgICBIYXJkQ2FwUmVhY2hlZCgpOwogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFkZFRva2VuczsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIHB1YmxpYyBvbmx5T3duZXIgaW5TdGF0ZShTdGF0ZS5BY3RpdmUpIHJldHVybnMgKGJvb2wgcmVzdWx0KSB7CiAgICAgICAgcmVzdWx0ID0gZmFsc2U7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5DbG9zZWQ7CiAgICAgICAgd2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgZmluaXNoTWludGluZygpOwogICAgICAgIEZpbmFsaXplZCgpOwogICAgICAgIHJlc3VsdCA9IHRydWU7CiAgICB9Cgp9'.
	

]
