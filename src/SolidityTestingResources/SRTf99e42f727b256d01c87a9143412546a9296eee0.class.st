Class {
	#name : #SRTf99e42f727b256d01c87a9143412546a9296eee0,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf99e42f727b256d01c87a9143412546a9296eee0 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Ci8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCgpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIG5vdCBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCgpIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgd2hlblBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgfQp9Cgpjb250cmFjdCBMZW5kaW5nIGlzIE93bmFibGUsIFBhdXNhYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgdWludDI1NiBwdWJsaWMgbWluQ29udHJpYkFtb3VudCA9IDAuMSBldGhlcjsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDAuMDEgZXRoZXIKICAgIGVudW0gTGVuZGluZ1N0YXRlIHtBY2NlcHRpbmdDb250cmlidXRpb25zLCBBd2FpdGluZ1JldHVybiwgUHJvamVjdE5vdEZ1bmRlZCwgQ29udHJpYnV0aW9uUmV0dXJuZWR9CgogICAgbWFwcGluZyhhZGRyZXNzID0+IEludmVzdG9yKSBwdWJsaWMgaW52ZXN0b3JzOwogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ1N0YXJ0VGltZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgdGltZSBvZiBjb250cmlidXRpb24gcGVyaW9kIGluIFVOSVggdGltZQogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ0VuZFRpbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5kIHRpbWUgb2YgY29udHJpYnV0aW9uIHBlcmlvZCBpbiBVTklYIHRpbWUKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsQ29udHJpYnV0ZWQ7CiAgICBib29sIHB1YmxpYyBjYXBSZWFjaGVkOwogICAgTGVuZGluZ1N0YXRlIHB1YmxpYyBzdGF0ZTsKICAgIGFkZHJlc3NbXSBwdWJsaWMgaW52ZXN0b3JzS2V5czsKCiAgICB1aW50MjU2IHB1YmxpYyBsZW5kaW5nSW50ZXJlc3RSYXRlUGVyY2VudGFnZTsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsTGVuZGluZ0Ftb3VudDsKICAgIHVpbnQyNTYgcHVibGljIGxlbmRpbmdEYXlzOwogICAgdWludDI1NiBwdWJsaWMgaW5pdGlhbEZpYXRQZXJFdGhSYXRlOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxMZW5kaW5nRmlhdEFtb3VudDsKICAgIGFkZHJlc3MgcHVibGljIGJvcnJvd2VyOwogICAgdWludDI1NiBwdWJsaWMgYm9ycm93ZXJSZXR1cm5EYXRlOwogICAgdWludDI1NiBwdWJsaWMgYm9ycm93ZXJSZXR1cm5GaWF0QW1vdW50OwogICAgdWludDI1NiBwdWJsaWMgYm9ycm93ZXJSZXR1cm5GaWF0UGVyRXRoUmF0ZTsKICAgIHVpbnQyNTYgcHVibGljIGJvcnJvd2VyUmV0dXJuQW1vdW50OwoKICAgIHN0cnVjdCBJbnZlc3RvciB7CiAgICAgICAgdWludCBhbW91bnQ7CiAgICAgICAgYm9vbCBpc0NvbXBlbnNhdGVkOwogICAgfQoKICAgIC8vIGV2ZW50cwogICAgZXZlbnQgb25DYXBSZWFjaGVkKHVpbnQgZW5kVGltZSk7CiAgICBldmVudCBvbkNvbnRyaWJ1dGlvbih1aW50IHRvdGFsQ29udHJpYnV0ZWQsIGFkZHJlc3MgaW5kZXhlZCBpbnZlc3RvciwgdWludCBhbW91bnQsIHVpbnQgaW52ZXN0b3JzQ291bnQpOwogICAgZXZlbnQgb25Db21wZW5zYXRlZChhZGRyZXNzIGluZGV4ZWQgY29udHJpYnV0b3IsIHVpbnQgYW1vdW50KTsKICAgIGV2ZW50IGV4Y2Vzc0NvbnRyaWJ1dGlvblJldHVybmVkKGFkZHJlc3MgaW5kZXhlZCBjb250cmlidXRvciwgdWludCBhbW91bnQpOwogICAgZXZlbnQgU3RhdGVDaGFuZ2UodWludCBzdGF0ZSk7CgogICAgZnVuY3Rpb24gTGVuZGluZyh1aW50IF9mdW5kaW5nU3RhcnRUaW1lLCB1aW50IF9mdW5kaW5nRW5kVGltZSwgYWRkcmVzcyBfYm9ycm93ZXIsIHVpbnQgX2xlbmRpbmdJbnRlcmVzdFJhdGVQZXJjZW50YWdlLCB1aW50IF90b3RhbExlbmRpbmdBbW91bnQsIHVpbnQyNTYgX2xlbmRpbmdEYXlzKSBwdWJsaWMgewogICAgICAgIGZ1bmRpbmdTdGFydFRpbWUgPSBfZnVuZGluZ1N0YXJ0VGltZTsKICAgICAgICBmdW5kaW5nRW5kVGltZSA9IF9mdW5kaW5nRW5kVGltZTsKICAgICAgICBib3Jyb3dlciA9IF9ib3Jyb3dlcjsKICAgICAgICAvLyAxMTUKICAgICAgICBsZW5kaW5nSW50ZXJlc3RSYXRlUGVyY2VudGFnZSA9IF9sZW5kaW5nSW50ZXJlc3RSYXRlUGVyY2VudGFnZTsKICAgICAgICB0b3RhbExlbmRpbmdBbW91bnQgPSBfdG90YWxMZW5kaW5nQW1vdW50OwogICAgICAgIC8vOTAgZGF5cyBmb3IgdmVyc2lvbiAwLjEKICAgICAgICBsZW5kaW5nRGF5cyA9IF9sZW5kaW5nRGF5czsKICAgICAgICBzdGF0ZSA9IExlbmRpbmdTdGF0ZS5BY2NlcHRpbmdDb250cmlidXRpb25zOwogICAgICAgIFN0YXRlQ2hhbmdlKHVpbnQoc3RhdGUpKTsKICAgIH0KCiAgICBmdW5jdGlvbigpIHB1YmxpYyBwYXlhYmxlIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIGlmKHN0YXRlID09IExlbmRpbmdTdGF0ZS5Bd2FpdGluZ1JldHVybil7CiAgICAgICAgICAgIHJldHVybkJvcnJvd2VlZEV0aCgpOwogICAgICAgIH0gZWxzZXsKICAgICAgICAgICAgY29udHJpYnV0ZVdpdGhBZGRyZXNzKG1zZy5zZW5kZXIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpc0NvbnRyaWJQZXJpb2RSdW5uaW5nKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCl7CiAgICAgICAgcmV0dXJuIGZ1bmRpbmdTdGFydFRpbWUgPD0gbm93ICYmIGZ1bmRpbmdFbmRUaW1lID4gbm93ICYmICFjYXBSZWFjaGVkOwogICAgfQoKICAgIC8vIEBub3RpY2UgRnVuY3Rpb24gdG8gcGFydGljaXBhdGUgaW4gY29udHJpYnV0aW9uIHBlcmlvZAogICAgLy8gIEFtb3VudHMgZnJvbSB0aGUgc2FtZSBhZGRyZXNzIHNob3VsZCBiZSBhZGRlZCB1cAogICAgLy8gIElmIGNhcCBpcyByZWFjaGVkLCBlbmQgdGltZSBzaG91bGQgYmUgbW9kaWZpZWQKICAgIC8vICBGdW5kcyBzaG91bGQgYmUgdHJhbnNmZXJyZWQgaW50byBtdWx0aXNpZyB3YWxsZXQKICAgIC8vIEBwYXJhbSBjb250cmlidXRvciBBZGRyZXNzCiAgICBmdW5jdGlvbiBjb250cmlidXRlV2l0aEFkZHJlc3MoYWRkcmVzcyBjb250cmlidXRvcikgcHVibGljIHBheWFibGUgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gbWluQ29udHJpYkFtb3VudCk7CiAgICAgICAgcmVxdWlyZShpc0NvbnRyaWJQZXJpb2RSdW5uaW5nKCkpOwoKICAgICAgICB1aW50IGNvbnRyaWJWYWx1ZSA9IG1zZy52YWx1ZTsKICAgICAgICB1aW50IGV4Y2Vzc0NvbnRyaWJWYWx1ZSA9IDA7CgogICAgICAgIHVpbnQgb2xkVG90YWxDb250cmlidXRlZCA9IHRvdGFsQ29udHJpYnV0ZWQ7CgogICAgICAgIHRvdGFsQ29udHJpYnV0ZWQgPSBvbGRUb3RhbENvbnRyaWJ1dGVkLmFkZChjb250cmliVmFsdWUpOwoKICAgICAgICB1aW50IG5ld1RvdGFsQ29udHJpYnV0ZWQgPSB0b3RhbENvbnRyaWJ1dGVkOwoKICAgICAgICAvLyBjYXAgd2FzIHJlYWNoZWQKICAgICAgICBpZiAobmV3VG90YWxDb250cmlidXRlZCA+PSAgdG90YWxMZW5kaW5nQW1vdW50ICYmCiAgICAgICAgICAgIG9sZFRvdGFsQ29udHJpYnV0ZWQgPCB0b3RhbExlbmRpbmdBbW91bnQpCiAgICAgICAgewogICAgICAgICAgICBjYXBSZWFjaGVkID0gdHJ1ZTsKICAgICAgICAgICAgZnVuZGluZ0VuZFRpbWUgPSBub3c7CiAgICAgICAgICAgIG9uQ2FwUmVhY2hlZChmdW5kaW5nRW5kVGltZSk7CgogICAgICAgICAgICAvLyBFdmVyeXRoaW5nIGFib3ZlIGhhcmQgY2FwIHdpbGwgYmUgc2VudCBiYWNrIHRvIGNvbnRyaWJ1dG9yCiAgICAgICAgICAgIGV4Y2Vzc0NvbnRyaWJWYWx1ZSA9IG5ld1RvdGFsQ29udHJpYnV0ZWQuc3ViKHRvdGFsTGVuZGluZ0Ftb3VudCk7CiAgICAgICAgICAgIGNvbnRyaWJWYWx1ZSA9IGNvbnRyaWJWYWx1ZS5zdWIoZXhjZXNzQ29udHJpYlZhbHVlKTsKCiAgICAgICAgICAgIHRvdGFsQ29udHJpYnV0ZWQgPSB0b3RhbExlbmRpbmdBbW91bnQ7CiAgICAgICAgfQoKICAgICAgICBpZiAoaW52ZXN0b3JzW2NvbnRyaWJ1dG9yXS5hbW91bnQgPT0gMCkgewogICAgICAgICAgICBpbnZlc3RvcnNLZXlzLnB1c2goY29udHJpYnV0b3IpOwogICAgICAgIH0KCiAgICAgICAgaW52ZXN0b3JzW2NvbnRyaWJ1dG9yXS5hbW91bnQgPSBpbnZlc3RvcnNbY29udHJpYnV0b3JdLmFtb3VudC5hZGQoY29udHJpYlZhbHVlKTsKCiAgICAgICAgaWYgKGV4Y2Vzc0NvbnRyaWJWYWx1ZSA+IDApIHsKICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihleGNlc3NDb250cmliVmFsdWUpOwogICAgICAgICAgICBleGNlc3NDb250cmlidXRpb25SZXR1cm5lZChtc2cuc2VuZGVyLCBleGNlc3NDb250cmliVmFsdWUpOwogICAgICAgIH0KICAgICAgICBvbkNvbnRyaWJ1dGlvbihuZXdUb3RhbENvbnRyaWJ1dGVkLCBjb250cmlidXRvciwgY29udHJpYlZhbHVlLCBpbnZlc3RvcnNLZXlzLmxlbmd0aCk7CiAgICB9CgogICAgZnVuY3Rpb24gZW5hYmxlUmV0dXJuQ29udHJpYnV0aW9uKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKHRvdGFsQ29udHJpYnV0ZWQgPCB0b3RhbExlbmRpbmdBbW91bnQpOwogICAgICAgIHJlcXVpcmUobm93ID4gZnVuZGluZ0VuZFRpbWUpOwogICAgICAgIHN0YXRlID0gTGVuZGluZ1N0YXRlLlByb2plY3ROb3RGdW5kZWQ7CiAgICAgICAgU3RhdGVDaGFuZ2UodWludChzdGF0ZSkpOwogICAgfQoKICAgIC8vIEBub3RpY2UgRnVuY3Rpb24gdG8gcGFydGljaXBhdGUgaW4gY29udHJpYnV0aW9uIHBlcmlvZAogICAgLy8gIEFtb3VudHMgZnJvbSB0aGUgc2FtZSBhZGRyZXNzIHNob3VsZCBiZSBhZGRlZCB1cAogICAgLy8gIElmIGNhcCBpcyByZWFjaGVkLCBlbmQgdGltZSBzaG91bGQgYmUgbW9kaWZpZWQKICAgIC8vICBGdW5kcyBzaG91bGQgYmUgdHJhbnNmZXJyZWQgaW50byBtdWx0aXNpZyB3YWxsZXQKICAgIC8vIEBwYXJhbSBjb250cmlidXRvciBBZGRyZXNzCiAgICBmdW5jdGlvbiBmaW5pc2hDb250cmlidXRpb25QZXJpb2QodWludDI1NiBfaW5pdGlhbEZpYXRQZXJFdGhSYXRlKSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoY2FwUmVhY2hlZCA9PSB0cnVlKTsKICAgICAgICBpbml0aWFsRmlhdFBlckV0aFJhdGUgPSBfaW5pdGlhbEZpYXRQZXJFdGhSYXRlOwogICAgICAgIGJvcnJvd2VyLnRyYW5zZmVyKHRvdGFsQ29udHJpYnV0ZWQpOwogICAgICAgIHN0YXRlID0gTGVuZGluZ1N0YXRlLkF3YWl0aW5nUmV0dXJuOwogICAgICAgIFN0YXRlQ2hhbmdlKHVpbnQoc3RhdGUpKTsKICAgICAgICB0b3RhbExlbmRpbmdGaWF0QW1vdW50ID0gdG90YWxMZW5kaW5nQW1vdW50Lm11bChpbml0aWFsRmlhdFBlckV0aFJhdGUpOwogICAgICAgIGJvcnJvd2VyUmV0dXJuRmlhdEFtb3VudCA9IHRvdGFsTGVuZGluZ0ZpYXRBbW91bnQubXVsKGxlbmRpbmdJbnRlcmVzdFJhdGVQZXJjZW50YWdlKS5kaXYoMTAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWNsYWltQ29udHJpYnV0aW9uKGFkZHJlc3MgYmVuZWZpY2lhcnkpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IExlbmRpbmdTdGF0ZS5Qcm9qZWN0Tm90RnVuZGVkKTsKICAgICAgICB1aW50IGNvbnRyaWJ1dGlvbiA9IGludmVzdG9yc1tiZW5lZmljaWFyeV0uYW1vdW50OwogICAgICAgIHJlcXVpcmUoY29udHJpYnV0aW9uID4gMCk7CiAgICAgICAgYmVuZWZpY2lhcnkudHJhbnNmZXIoY29udHJpYnV0aW9uKTsKICAgIH0KCiAgICBmdW5jdGlvbiBlc3RhYmxpc2hCb3Jyb3dlclJldHVybkZpYXRQZXJFdGhSYXRlKHVpbnQyNTYgX2JvcnJvd2VyUmV0dXJuRmlhdFBlckV0aFJhdGUpIGV4dGVybmFsIG9ubHlPd25lcnsKICAgICAgICByZXF1aXJlKHN0YXRlID09IExlbmRpbmdTdGF0ZS5Bd2FpdGluZ1JldHVybik7CiAgICAgICAgYm9ycm93ZXJSZXR1cm5GaWF0UGVyRXRoUmF0ZSA9IF9ib3Jyb3dlclJldHVybkZpYXRQZXJFdGhSYXRlOwogICAgICAgIGJvcnJvd2VyUmV0dXJuQW1vdW50ID0gYm9ycm93ZXJSZXR1cm5GaWF0QW1vdW50LmRpdihib3Jyb3dlclJldHVybkZpYXRQZXJFdGhSYXRlKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXR1cm5Cb3Jyb3dlZWRFdGgoKSBwYXlhYmxlIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBMZW5kaW5nU3RhdGUuQXdhaXRpbmdSZXR1cm4pOwogICAgICAgIHJlcXVpcmUoYm9ycm93ZXJSZXR1cm5GaWF0UGVyRXRoUmF0ZSA+IDApOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID09IGJvcnJvd2VyUmV0dXJuQW1vdW50KTsKICAgICAgICBzdGF0ZSA9IExlbmRpbmdTdGF0ZS5Db250cmlidXRpb25SZXR1cm5lZDsKICAgICAgICBTdGF0ZUNoYW5nZSh1aW50KHN0YXRlKSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVjbGFpbUNvbnRyaWJ1dGlvbldpdGhJbnRlcmVzdChhZGRyZXNzIGJlbmVmaWNpYXJ5KSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBMZW5kaW5nU3RhdGUuQ29udHJpYnV0aW9uUmV0dXJuZWQpOwogICAgICAgIHVpbnQgY29udHJpYnV0aW9uID0gaW52ZXN0b3JzW2JlbmVmaWNpYXJ5XS5hbW91bnQubXVsKGluaXRpYWxGaWF0UGVyRXRoUmF0ZSkubXVsKGxlbmRpbmdJbnRlcmVzdFJhdGVQZXJjZW50YWdlKS5kaXYoYm9ycm93ZXJSZXR1cm5GaWF0UGVyRXRoUmF0ZSkuZGl2KDEwMCk7CiAgICAgICAgcmVxdWlyZShjb250cmlidXRpb24gPiAwKTsKICAgICAgICBiZW5lZmljaWFyeS50cmFuc2Zlcihjb250cmlidXRpb24pOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbGZLaWxsKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgfQp9'.
	

]
