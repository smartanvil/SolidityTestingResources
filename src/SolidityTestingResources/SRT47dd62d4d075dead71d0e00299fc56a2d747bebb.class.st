Class {
	#name : #SRT47dd62d4d075dead71d0e00299fc56a2d747bebb,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT47dd62d4d075dead71d0e00299fc56a2d747bebb >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBUb2tlbiB7CgogICAgLy8vIEByZXR1cm4gdG90YWwgYW1vdW50IG9mIHRva2VucwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogICAgLy8vIEByZXR1cm4gVGhlIGJhbGFuY2UKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgoKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9hZGRyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHdlaSB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgVXBkYXRlVG9rZW4oYWRkcmVzcyBfbmV3dG9rZW4pOwogICAgCiAgICAvLyBGdW5jdGlvbiB0byBzZXQgYmFsYW5jZXMgZnJvbSBuZXcgVG9rZW4KICAgIGZ1bmN0aW9uIHNldEJhbGFuY2UoYWRkcmVzcyBfdG8sdWludDI1NiBfdmFsdWUpIGV4dGVybmFsIDsKICAgIAogICAgLy8gRnVuY3Rpb24gdG8gc2V0IGFsbG93ZWQgZnJvbSBuZXcgVG9rZW4KICAgIGZ1bmN0aW9uIHNldEFsbG93ZWQoYWRkcmVzcyBfc3BlbmRlcixhZGRyZXNzIF90byx1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWw7CiAgICAKICAgIC8vIEZ1bmN0aW9uIHRvIHNldCB0b3RhbCBzdXBwbHkgZnJvbSBuZXcgVG9rZW4uCiAgICBmdW5jdGlvbiBzZXRUb3RhbFN1cHBseSh1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWw7CiAgICAKICAgIGZ1bmN0aW9uIGdldERlY2ltYWxzKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBkZWNpbWFscyk7CiAgICAKICAgIGZ1bmN0aW9uIGV2ZW50VHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyAgX3RvLCB1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBldmVudEFwcHJvdmFsKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzICBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIGV4dGVybmFsOwogICAgZnVuY3Rpb24gZXZlbnRCdXJuKGFkZHJlc3MgZnJvbSwgdWludDI1NiB2YWx1ZSkgZXh0ZXJuYWw7Cn0KCmNvbnRyYWN0IE5ld1Rva2VuewogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF9zZW5kZXIsYWRkcmVzcyBfdG8sdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfc2VuZGVyLGFkZHJlc3MgZnJvbSxhZGRyZXNzIF90byx1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc2VuZGVyLGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwp9CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gb25lUGVyY2VudCh1aW50MjU2IGEpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpewogICAgICByZXR1cm4gZGl2KGEsdWludDI1NigxMDApKTsKICB9CiAgCiAgZnVuY3Rpb24gcG93ZXIodWludDI1NiBhLHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgIHJldHVybiBtdWwoYSwxMCoqYik7CiAgfQp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgYWRkcmVzcyBuZXdUb2tlbj0weDA7CiAgICAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CiAgICB1aW50MjU2IHB1YmxpYyBfdG90YWxTdXBwbHk9MDsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsgICAgICAgICAgICAgICAgLy9Ib3cgbWFueSBkZWNpbWFscyB0byBzaG93LiBpZS4gVGhlcmUgY291bGQgMTAwMCBiYXNlIHVuaXRzIHdpdGggMyBkZWNpbWFscy4gTWVhbmluZyAwLjk4MCBTQlggPSA5ODAgYmFzZSB1bml0cy4gSXQncyBsaWtlIGNvbXBhcmluZyAxIHdlaSB0byAxIGV0aGVyLgogICAgLy8gdGhlcmUgaXMgMyBsZXZlbC4gMSAtIGluYm91bmQgdHgsIDIgLSBvdXRib3VudCB0eCwgMyAtIGFsbCB0eDsKICAgIG1hcHBpbmcodWludDggPT5tYXBwaW5nKGFkZHJlc3M9PmJvb2wpKSBpbnRlcm5hbCB3aGl0ZWxpc3Q7CiAgICBtYXBwaW5nKGFkZHJlc3M9PnVpbnQ4KSBpbnRlcm5hbCB3aGl0ZWxpc3RNb2RlcmF0b3I7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIG1heEZlZTsKICAgIHVpbnQyNTYgcHVibGljIGZlZVBlcmNhbnRhZ2U7CiAgICBhZGRyZXNzIHB1YmxpYyBfb3duZXI7CiAgICAKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IF9vd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBjYW5Nb2RpZnlXaGl0ZWxpc3RJbiB7CiAgICAgICAgcmVxdWlyZSh3aGl0ZWxpc3RNb2RlcmF0b3JbbXNnLnNlbmRlcl09PTEgfHwgd2hpdGVsaXN0TW9kZXJhdG9yW21zZy5zZW5kZXJdPT0zKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICBtb2RpZmllciBjYW5Nb2RpZnlXaGl0ZWxpc3RPdXQgewogICAgICAgIHJlcXVpcmUod2hpdGVsaXN0TW9kZXJhdG9yW21zZy5zZW5kZXJdPT0yIHx8IHdoaXRlbGlzdE1vZGVyYXRvclttc2cuc2VuZGVyXT09Myk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgY2FuTW9kaWZ5V2hpdGVsaXN0IHsKICAgICAgICByZXF1aXJlKHdoaXRlbGlzdE1vZGVyYXRvclttc2cuc2VuZGVyXT09Myk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgb25seU5ld1Rva2VuIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXI9PW5ld1Rva2VuKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmKG5ld1Rva2VuIT0weDApewogICAgICAgICAgICByZXR1cm4gTmV3VG9rZW4obmV3VG9rZW4pLnRyYW5zZmVyKG1zZy5zZW5kZXIsX3RvLF92YWx1ZSk7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgZmVlPWdldEZlZShfdmFsdWUpOwogICAgICAgIHVpbnQyNTYgdmFsdWVXaXRoRmVlPV92YWx1ZTsKICAgICAgICAgaWYod2l0aEZlZShtc2cuc2VuZGVyLF90bykpewogICAgICAgICAgICB2YWx1ZVdpdGhGZWU9dmFsdWVXaXRoRmVlLmFkZChmZWUpOwogICAgICAgIH0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gdmFsdWVXaXRoRmVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgLy9EbyBUcmFuc2ZlcgogICAgICAgICAgICBkb1RyYW5zZmVyKG1zZy5zZW5kZXIsX3RvLF92YWx1ZSxmZWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9ICBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdpdGhGZWUoYWRkcmVzcyBfZnJvbSxhZGRyZXNzIF90bykgcHJpdmF0ZSByZXR1cm5zKGJvb2wpewogICAgICAgIHJldHVybiAhd2hpdGVsaXN0WzJdW19mcm9tXSAmJiAhd2hpdGVsaXN0WzFdW190b10gJiYgIXdoaXRlbGlzdFszXVtfdG9dICYmICF3aGl0ZWxpc3RbM11bX2Zyb21dOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRGZWUodWludDI1NiBfdmFsdWUpIHByaXZhdGUgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgdWludDI1NiBmZWVPZlZhbHVlPV92YWx1ZS5vbmVQZXJjZW50KCkubXVsKGZlZVBlcmNhbnRhZ2UpOwogICAgICAgIHVpbnQyNTYgZmVlPXVpbnQyNTYobWF4RmVlKS5wb3dlcihkZWNpbWFscyk7CiAgICAgICAgIC8vIENoZWNrIGlmIDElIGJ1cm4gZmVlIGV4Y2VlZHMgbWF4ZmVlCiAgICAgICAgLy8gSWYgc28gdGhlbiBoYXJkIGNhcCBmb3IgYnVybiBmZWUgaXMgbWF4ZmVlCiAgICAgICAgaWYgKGZlZU9mVmFsdWU+PSBmZWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZlZTsKICAgICAgICAvLyBJZiAxJSBidXJuIGZlZSBpcyBsZXNzIHRoYW4gbWF4ZmVlCiAgICAgICAgLy8gdGhlbiB1c2UgMSUgYnVybiBmZWUKICAgICAgICB9IAogICAgICAgIGlmIChmZWVPZlZhbHVlIDwgZmVlKSB7CiAgICAgICAgICAgIHJldHVybiBmZWVPZlZhbHVlOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGRvVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSxhZGRyZXNzIF90byx1aW50MjU2IF92YWx1ZSx1aW50MjU2IGZlZSkgaW50ZXJuYWwgewogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPWJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIGlmKHdpdGhGZWUoX2Zyb20sX3RvKSkgewogICAgICAgICAgICAgICAgZG9CdXJuKF9mcm9tLGZlZSk7CiAgICAgICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gZG9CdXJuKGFkZHJlc3MgX2Zyb20sdWludDI1NiBfdmFsdWUpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBzdWNjZXNzKXsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZihfZnJvbSkgPj0gX3ZhbHVlKTsgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPWJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBfdG90YWxTdXBwbHkgPV90b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlcyB0b3RhbFN1cHBseQogICAgICAgIEJ1cm4oX2Zyb20sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJ1cm4oYWRkcmVzcyBfZnJvbSx1aW50MjU2IF92YWx1ZSkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gZG9CdXJuKF9mcm9tLF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy9zYW1lIGFzIGFib3ZlLiBSZXBsYWNlIHRoaXMgbGluZSB3aXRoIHRoZSBmb2xsb3dpbmcgaWYgeW91IHdhbnQgdG8gcHJvdGVjdCBhZ2FpbnN0IHdyYXBwaW5nIHVpbnRzLgogICAgICAgIC8vaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgaWYobmV3VG9rZW4hPTB4MCl7CiAgICAgICAgICAgIHJldHVybiBOZXdUb2tlbihuZXdUb2tlbikudHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsX2Zyb20sX3RvLF92YWx1ZSk7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgZmVlPWdldEZlZShfdmFsdWUpOwogICAgICAgIHVpbnQyNTYgdmFsdWVXaXRoRmVlPV92YWx1ZTsKICAgICAgICBpZih3aXRoRmVlKF9mcm9tLF90bykpewogICAgICAgICAgICB2YWx1ZVdpdGhGZWU9dmFsdWVXaXRoRmVlLmFkZChmZWUpOwogICAgICAgIH0KICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IHZhbHVlV2l0aEZlZSAmJiAKICAgICAgICAgICAgKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IHZhbHVlV2l0aEZlZSB8fCBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9PSBfdmFsdWUpICYmCiAgICAgICAgICAgIF92YWx1ZSA+IDAgKSB7CiAgICAgICAgICAgIGRvVHJhbnNmZXIoX2Zyb20sX3RvLF92YWx1ZSxmZWUpOwogICAgICAgICAgICBpZihhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9PSBfdmFsdWUpewogICAgICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPWFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9YWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKHZhbHVlV2l0aEZlZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZihuZXdUb2tlbiE9MHgwKXsKICAgICAgICAgICAgcmV0dXJuIE5ld1Rva2VuKG5ld1Rva2VuKS5hcHByb3ZlKG1zZy5zZW5kZXIsX3NwZW5kZXIsX3ZhbHVlKTsKICAgICAgICB9CiAgICAgICAgdWludDI1NiB2YWx1ZVdpdGhGZWU9X3ZhbHVlOwogICAgICAgIGlmKHdpdGhGZWUoX3NwZW5kZXIsMHgwKSl7CiAgICAgICAgICAgIHVpbnQyNTYgZmVlPWdldEZlZShfdmFsdWUpOyAgCiAgICAgICAgICAgIHZhbHVlV2l0aEZlZT12YWx1ZVdpdGhGZWUuYWRkKGZlZSk7CiAgICAgICAgfQogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gdmFsdWVXaXRoRmVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCB2YWx1ZVdpdGhGZWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCB0b3RhbFN1cHBseSl7CiAgICAgICAgcmV0dXJuIF90b3RhbFN1cHBseTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0VG90YWxTdXBwbHkodWludDI1NiBfdmFsdWUpIG9ubHlOZXdUb2tlbiBleHRlcm5hbCB7CiAgICAgICAgX3RvdGFsU3VwcGx5PV92YWx1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0QmFsYW5jZShhZGRyZXNzIF90byx1aW50MjU2IF92YWx1ZSkgb25seU5ld1Rva2VuIGV4dGVybmFsIHsKICAgICAgICBiYWxhbmNlc1tfdG9dPV92YWx1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0QWxsb3dlZChhZGRyZXNzIF9zcGVuZGVyLGFkZHJlc3MgX3RvLHVpbnQyNTYgX3ZhbHVlKSBvbmx5TmV3VG9rZW4gZXh0ZXJuYWwgewogICAgICAgIGFsbG93ZWRbX3RvXVtfc3BlbmRlcl09X3ZhbHVlOwogICAgfQogICAgZnVuY3Rpb24gZ2V0RGVjaW1hbHMoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGRlY2ltYWxzKXsKICAgICAgICByZXR1cm4gZGVjaW1hbHM7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGV2ZW50VHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyAgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seU5ld1Rva2VuIGV4dGVybmFsewogICAgICAgIFRyYW5zZmVyKF9mcm9tLF90byxfdmFsdWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBldmVudEFwcHJvdmFsKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzICBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpb25seU5ld1Rva2VuIGV4dGVybmFsewogICAgICAgIEFwcHJvdmFsKF9vd25lcixfc3BlbmRlcixfdmFsdWUpOwogICAgfQogICAgZnVuY3Rpb24gZXZlbnRCdXJuKGFkZHJlc3MgZnJvbSwgdWludDI1NiB2YWx1ZSlvbmx5TmV3VG9rZW4gZXh0ZXJuYWx7CiAgICAgICAgQnVybihmcm9tLHZhbHVlKTsKICAgIH0KfQoKCmNvbnRyYWN0IEVxdWFsVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgZnVuY3Rpb24gKCkgewogICAgICAgIC8vaWYgZXRoZXIgaXMgc2VudCB0byB0aGlzIGFkZHJlc3MsIHNlbmQgaXQgYmFjay4KICAgICAgICByZXZlcnQoKTsKICAgIH0KCiAgICAvKiBQdWJsaWMgdmFyaWFibGVzIG9mIHRoZSB0b2tlbiAqLwogICAgCiAgICAvKgogICAgTk9URToKICAgIFRoZSBmb2xsb3dpbmcgdmFyaWFibGVzIGFyZSBPUFRJT05BTCB2YW5pdGllcy4gT25lIGRvZXMgbm90IGhhdmUgdG8gaW5jbHVkZSB0aGVtLgogICAgVGhleSBhbGxvdyBvbmUgdG8gY3VzdG9taXNlIHRoZSB0b2tlbiBjb250cmFjdCAmIGluIG5vIHdheSBpbmZsdWVuY2VzIHRoZSBjb3JlIGZ1bmN0aW9uYWxpdHkuCiAgICBTb21lIHdhbGxldHMvaW50ZXJmYWNlcyBtaWdodCBub3QgZXZlbiBib3RoZXIgdG8gbG9vayBhdCB0aGlzIGluZm9ybWF0aW9uLgogICAgKi8KICAgIHN0cmluZyBwdWJsaWMgbmFtZTsgICAgICAgICAgICAgICAgICAgLy9mYW5jeSBuYW1lOiBlZyBTaW1vbiBCdWNrcwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7ICAgICAgICAgICAgICAgICAvL0FuIGlkZW50aWZpZXI6IGVnIFNCWAogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gJ0gxLjAnOyAgICAgICAvL2h1bWFuIDAuMSBzdGFuZGFyZC4gSnVzdCBhbiBhcmJpdHJhcnkgdmVyc2lvbmluZyBzY2hlbWUuCiAgICBhZGRyZXNzIHB1YmxpYyBvbGRUb2tlbj0weDA7ICAgIAogICAgLy8gRmVlIGluZm8KICAgIHN0cmluZyBwdWJsaWMgZmVlSW5mbyA9ICJFYWNoIG9wZXJhdGlvbiBjb3N0cyAxJSBvZiB0aGUgdHJhbnNhY3Rpb24gYW1vdW50LCBidXQgbm90IG1vcmUgdGhhbiAyNTAgdG9rZW5zLiI7CgogICAgZnVuY3Rpb24gRXF1YWxUb2tlbigpIHsKICAgICAgICBfb3duZXI9bXNnLnNlbmRlcjsKICAgICAgICB3aGl0ZWxpc3RNb2RlcmF0b3JbbXNnLnNlbmRlcl09MzsKICAgICAgICB3aGl0ZWxpc3RbM11bbXNnLnNlbmRlcl09dHJ1ZTsKICAgICAgICAKICAgICAgICAKICAgICAgICBtYXhGZWU9MjUwOyAvLyBtYXggZmVlIGZvciB0cmFuc2ZlcgogICAgICAgIGZlZVBlcmNhbnRhZ2U9MTsgLy8gZmVlIGluIHBlcmNlbnRzCiAgICAgICAgCiAgICAgICAgbmFtZSA9ICJFUVVBTCI7ICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgbmFtZSBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIGRlY2ltYWxzID0gMTg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtb3VudCBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIHN5bWJvbCA9ICJFUUwiOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBzeW1ib2wgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRPbGRUb2tlbihhZGRyZXNzIF9vbGRUb2tlbikgb25seU93bmVyIHB1YmxpY3sKICAgICAgICByZXF1aXJlKG9sZFRva2VuPT0weDApOwogICAgICAgIG9sZFRva2VuPV9vbGRUb2tlbjsKICAgICAgICBUb2tlbiB0b2tlbj1Ub2tlbihfb2xkVG9rZW4pOwogICAgICAgIF90b3RhbFN1cHBseT10b2tlbi50b3RhbFN1cHBseSgpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID1fdG90YWxTdXBwbHk7CiAgICAgICAgVHJhbnNmZXIoMHgwLG1zZy5zZW5kZXIsX3RvdGFsU3VwcGx5KTsKICAgIH0KICAgIAogICAgLy8gUmVkaXN0aWJ1dGUgbmV3IHRva2VuIHdpdGggc2FtZSBiYWxhbmNlczsKICAgIGZ1bmN0aW9uIHJlZGlzdHJpYnV0ZShhZGRyZXNzW10gaG9sZGVycykgb25seU93bmVyIHB1YmxpY3sKICAgICAgICByZXF1aXJlKG9sZFRva2VuIT0weDApOwogICAgICAgIFRva2VuIHRva2VuPVRva2VuKG9sZFRva2VuKTsKICAgICAgICBmb3IodWludDI1NiBpPTA7aTxob2xkZXJzLmxlbmd0aDsrK2kpewogICAgICAgICAgICBhZGRyZXNzIF90bz1ob2xkZXJzW2ldOwogICAgICAgICAgICBpZihiYWxhbmNlc1tfdG9dPT0wKXsKICAgICAgICAgICAgICAgIHVpbnQyNTYgYmFsYW5jZT10b2tlbi5iYWxhbmNlT2YoX3RvKTsKICAgICAgICAgICAgICAgIGJhbGFuY2VzW190b109YmFsYW5jZTsKICAgICAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdPWJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihiYWxhbmNlKTsKICAgICAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsX3RvLGJhbGFuY2UpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBhbGxvY2F0ZShhZGRyZXNzIF9hZGRyZXNzLHVpbnQyNTYgcGVyY2VudCkgcHJpdmF0ZXsKICAgICAgICB1aW50MjU2IGJhbD1fdG90YWxTdXBwbHkub25lUGVyY2VudCgpLm11bChwZXJjZW50KTsKICAgICAgICAvL2JhbGFuY2VzW19hZGRyZXNzXT1iYWw7CiAgICAgICAgd2hpdGVsaXN0WzNdW19hZGRyZXNzXT10cnVlOwogICAgICAgIGRvVHJhbnNmZXIobXNnLnNlbmRlcixfYWRkcmVzcyxiYWwsMCk7CiAgICB9CiAgIAogICAgLy8gU2V0IGFkZHJlc3MgYWNjZXNzIHRvIGluYm91bmQgd2hpdGVsaXN0LiAKICAgIGZ1bmN0aW9uIHNldFdoaXRlbGlzdEluKGFkZHJlc3MgX2FkZHJlc3MsYm9vbCBfdmFsdWUpIGNhbk1vZGlmeVdoaXRlbGlzdEluIHB1YmxpY3sKICAgICAgICBzZXRXaGl0ZWxpc3RWYWx1ZShfYWRkcmVzcyxfdmFsdWUsMSk7CiAgICB9CiAgICAKICAgIC8vIFNldCBhZGRyZXNzIGFjY2VzcyB0byBvdXRib3VuZCB3aGl0ZWxpc3QuIAogICAgZnVuY3Rpb24gc2V0V2hpdGVsaXN0T3V0KGFkZHJlc3MgX2FkZHJlc3MsYm9vbCBfdmFsdWUpIGNhbk1vZGlmeVdoaXRlbGlzdE91dCBwdWJsaWN7CiAgICAgICAgc2V0V2hpdGVsaXN0VmFsdWUoX2FkZHJlc3MsX3ZhbHVlLDIpOwogICAgfQogICAgCiAgICAvLyBTZXQgYWRkcmVzcyBhY2Nlc3MgdG8gaW5ib3VuZCBhbmQgb3V0Ym91bmQgd2hpdGVsaXN0LiAKICAgIGZ1bmN0aW9uIHNldFdoaXRlbGlzdChhZGRyZXNzIF9hZGRyZXNzLGJvb2wgX3ZhbHVlKSBjYW5Nb2RpZnlXaGl0ZWxpc3QgcHVibGljewogICAgICAgIHNldFdoaXRlbGlzdFZhbHVlKF9hZGRyZXNzLF92YWx1ZSwzKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0V2hpdGVsaXN0VmFsdWUoYWRkcmVzcyBfYWRkcmVzcyxib29sIF93aXRob3V0RmVlLHVpbnQ4IF90eXBlKSBpbnRlcm5hbCB7CiAgICAgICAgd2hpdGVsaXN0W190eXBlXVtfYWRkcmVzc109X3dpdGhvdXRGZWU7CiAgICB9CiAgICAKICAgIC8vIFNldCBhZGRyZXNzIG9mIG1vZGVyYXRvciB3aGl0ZWxpc3QKICAgIC8vIF9sZXZlbCBjYW4gYmU6IDAgLW5vdCBtb2RlcmF0b3IsIDEgLWluYm91bmQsMiAtIG91dGJvdW5kLCAzIC1hbGwKICAgIGZ1bmN0aW9uIHNldFdoaXRlbGlzdE1vZGVyYXRvcihhZGRyZXNzIF9hZGRyZXNzLHVpbnQ4IF9sZXZlbCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgd2hpdGVsaXN0TW9kZXJhdG9yW19hZGRyZXNzXT1fbGV2ZWw7CiAgICB9CiAgICAKICAgIC8vU2V0IG1heCBmZWUgdmFsdWUKICAgIGZ1bmN0aW9uIHNldE1heEZlZSh1aW50MjU2IG5ld0ZlZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgbWF4RmVlPW5ld0ZlZTsKICAgIH0KICAgIAogICAgLy9TZXQgZmVlIHBlcmNlbnQgdmFsdWUKICAgIGZ1bmN0aW9uIHNldEZlZVBlcmNlbnQodWludDI1NiBuZXdGZWUpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGZlZVBlcmNhbnRhZ2U9bmV3RmVlOwogICAgfQogICAgCiAgICAvL1NldCBmZWUgaW5mbwogICAgZnVuY3Rpb24gc2V0RmVlSW5mbyhzdHJpbmcgbmV3RmVlSW5mbykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICBmZWVJbmZvPW5ld0ZlZUluZm87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldE5ld1Rva2VuKGFkZHJlc3MgX25ld3Rva2VuKSBvbmx5T3duZXIgcHVibGljewogICAgICAgIG5ld1Rva2VuPV9uZXd0b2tlbjsKICAgICAgICBVcGRhdGVUb2tlbihfbmV3dG9rZW4pOwogICAgfQogICAgCiAgICAvKiBBcHByb3ZlcyBhbmQgdGhlbiBjYWxscyB0aGUgcmVjZWl2aW5nIGNvbnRyYWN0ICovCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYoIWFwcHJvdmUoX3NwZW5kZXIsX3ZhbHVlKSl7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgLy9jYWxsIHRoZSByZWNlaXZlQXBwcm92YWwgZnVuY3Rpb24gb24gdGhlIGNvbnRyYWN0IHlvdSB3YW50IHRvIGJlIG5vdGlmaWVkLiBUaGlzIGNyYWZ0cyB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIG1hbnVhbGx5IHNvIG9uZSBkb2Vzbid0IGhhdmUgdG8gaW5jbHVkZSBhIGNvbnRyYWN0IGluIGhlcmUganVzdCBmb3IgdGhpcy4KICAgICAgICAvL3JlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW5Db250cmFjdCwgYnl0ZXMgX2V4dHJhRGF0YSkKICAgICAgICAvL2l0IGlzIGFzc3VtZWQgdGhhdCB3aGVuIGRvZXMgdGhpcyB0aGF0IHRoZSBjYWxsICpzaG91bGQqIHN1Y2NlZWQsIG90aGVyd2lzZSBvbmUgd291bGQgdXNlIHZhbmlsbGEgYXBwcm92ZSBpbnN0ZWFkLgogICAgICAgIGlmKCFfc3BlbmRlci5jYWxsKGJ5dGVzNChieXRlczMyKHNoYTMoInJlY2VpdmVBcHByb3ZhbChhZGRyZXNzLHVpbnQyNTYsYWRkcmVzcyxieXRlcykiKSkpLCBtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpKSB7IHJldmVydCgpOyB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0='.
	

]
