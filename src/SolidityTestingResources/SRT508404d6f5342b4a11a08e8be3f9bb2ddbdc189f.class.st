Class {
	#name : #SRT508404d6f5342b4a11a08e8be3f9bb2ddbdc189f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT508404d6f5342b4a11a08e8be3f9bb2ddbdc189f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLy8gSXRlbTIzcyA6MwoKLy8vIEB0aXRsZSBJbnRlcmZhY2UgZm9yIGNvbnRyYWN0cyBjb25mb3JtaW5nIHRvIEVSQy03MjE6IE5vbi1GdW5naWJsZSBUb2tlbnMKLy8vIEBhdXRob3IgRGlldGVyIFNoaXJsZXkgPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI5M2Y3ZjZlN2Y2ZDNmMmViZmFmY2ZlZTlmNmZkYmRmMGZjIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPj4gKGh0dHBzOi8vZ2l0aHViLmNvbS9kZXRlKQpjb250cmFjdCBFUkM3MjEgewogIC8vIFJlcXVpcmVkIG1ldGhvZHMKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgYWRkcik7CiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHRva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIGFwcHJvdmVkLCB1aW50MjU2IHRva2VuSWQpOwoKfQoKLy8vIE1vZGlmaWVkIGZyb20gQ3J5cHRvUGl6emEuaW8KY29udHJhY3QgRXRoZXJJdGVtMjMgaXMgRVJDNzIxIHsKCiAgLyoqKiBFVkVOVFMgKioqLwoKICAvLy8gQGRldiBUaGUgQmlydGggZXZlbnQgaXMgZmlyZWQgd2hlbmV2ZXIgYSBuZXcgaXRlbTIzIGNvbWVzIGludG8gZXhpc3RlbmNlLgogIGV2ZW50IEJpcnRoKHVpbnQyNTYgdG9rZW5JZCwgc3RyaW5nIG5hbWUsIGFkZHJlc3Mgb3duZXIpOwoKICAvLy8gQGRldiBUaGUgVG9rZW5Tb2xkIGV2ZW50IGlzIGZpcmVkIHdoZW5ldmVyIGEgdG9rZW4gaXMgc29sZC4KICBldmVudCBUb2tlblNvbGQodWludDI1NiB0b2tlbklkLCB1aW50MjU2IG9sZFByaWNlLCB1aW50MjU2IG5ld1ByaWNlLCBhZGRyZXNzIHByZXZPd25lciwgYWRkcmVzcyB3aW5uZXIsIHN0cmluZyBuYW1lKTsKCiAgLy8vIEBkZXYgVHJhbnNmZXIgZXZlbnQgYXMgZGVmaW5lZCBpbiBjdXJyZW50IGRyYWZ0IG9mIEVSQzcyMS4KICAvLy8gIG93bmVyc2hpcCBpcyBhc3NpZ25lZCwgaW5jbHVkaW5nIGJpcnRocy4KICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CgogIC8qKiogQ09OU1RBTlRTICoqKi8KICAvL3VpbnQyNTYgcHJpdmF0ZSBzdGFydGluZ1ByaWNlID0gMC4wMDEgZXRoZXI7CgogIC8vLyBAbm90aWNlIE5hbWUgYW5kIHN5bWJvbCBvZiB0aGUgbm9uIGZ1bmdpYmxlIHRva2VuLCBhcyBkZWZpbmVkIGluIEVSQzcyMS4KICBzdHJpbmcgcHVibGljIGNvbnN0YW50IE5BTUUgPSAiQ3J5cG9QaG9uZXMiOyAvLyBzb2xoaW50LWRpc2FibGUtbGluZQogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1lNQk9MID0gIkNyeXB0b1Bob25lIjsgLy8gc29saGludC1kaXNhYmxlLWxpbmUKCiAgLyoqKiBTVE9SQUdFICoqKi8KCiAgLy8vIEBkZXYgQSBtYXBwaW5nIGZyb20gaXRlbTIzIElEcyB0byB0aGUgYWRkcmVzcyB0aGF0IG93bnMgdGhlbS4gQWxsIGl0ZW0yM3MgaGF2ZQogIC8vLyAgc29tZSB2YWxpZCBvd25lciBhZGRyZXNzLgogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGl0ZW0yM0luZGV4VG9Pd25lcjsKCiAgLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBvd25lciBhZGRyZXNzIHRvIGNvdW50IG9mIHRva2VucyB0aGF0IGFkZHJlc3Mgb3ducy4KICAvLyAgVXNlZCBpbnRlcm5hbGx5IGluc2lkZSBiYWxhbmNlT2YoKSB0byByZXNvbHZlIG93bmVyc2hpcCBjb3VudC4KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgb3duZXJzaGlwVG9rZW5Db3VudDsKCiAgLy8vIEBkZXYgQSBtYXBwaW5nIGZyb20gSXRlbTIzSURzIHRvIGFuIGFkZHJlc3MgdGhhdCBoYXMgYmVlbiBhcHByb3ZlZCB0byBjYWxsCiAgLy8vICB0cmFuc2ZlckZyb20oKS4gRWFjaCBJdGVtMjMgY2FuIG9ubHkgaGF2ZSBvbmUgYXBwcm92ZWQgYWRkcmVzcyBmb3IgdHJhbnNmZXIKICAvLy8gIGF0IGFueSB0aW1lLiBBIHplcm8gdmFsdWUgbWVhbnMgbm8gYXBwcm92YWwgaXMgb3V0c3RhbmRpbmcuCiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgaXRlbTIzSW5kZXhUb0FwcHJvdmVkOwoKICAvLyBAZGV2IEEgbWFwcGluZyBmcm9tIEl0ZW0yM0lEcyB0byB0aGUgcHJpY2Ugb2YgdGhlIHRva2VuLgogIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSBpdGVtMjNJbmRleFRvUHJpY2U7CgogIC8vLyBAZGV2IEEgbWFwcGluZyBmcm9tIEl0ZW0yM0lEcyB0byB0aGUgcHJldmlwdXMgcHJpY2Ugb2YgdGhlIHRva2VuLiBVc2VkCiAgLy8vIHRvIGNhbGN1bGF0ZSBwcmljZSBkZWx0YSBmb3IgcGF5b3V0cwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSBpdGVtMjNJbmRleFRvUHJldmlvdXNQcmljZTsKCiAgLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBpdGVtMjNJZCB0byB0aGUgNyBsYXN0IG93bmVycy4KICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3NbNV0pIHByaXZhdGUgaXRlbTIzSW5kZXhUb1ByZXZpb3VzT3duZXJzOwoKCiAgLy8gVGhlIGFkZHJlc3NlcyBvZiB0aGUgYWNjb3VudHMgKG9yIGNvbnRyYWN0cykgdGhhdCBjYW4gZXhlY3V0ZSBhY3Rpb25zIHdpdGhpbiBlYWNoIHJvbGVzLgogIGFkZHJlc3MgcHVibGljIGNlb0FkZHJlc3M7CiAgYWRkcmVzcyBwdWJsaWMgY29vQWRkcmVzczsKCiAgLyoqKiBEQVRBVFlQRVMgKioqLwogIHN0cnVjdCBJdGVtMjMgewogICAgc3RyaW5nIG5hbWU7CiAgfQoKICBJdGVtMjNbXSBwcml2YXRlIGl0ZW0yM3M7CgogIC8qKiogQUNDRVNTIE1PRElGSUVSUyAqKiovCiAgLy8vIEBkZXYgQWNjZXNzIG1vZGlmaWVyIGZvciBDRU8tb25seSBmdW5jdGlvbmFsaXR5CiAgbW9kaWZpZXIgb25seUNFTygpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjZW9BZGRyZXNzKTsKICAgIF87CiAgfQoKICAvLy8gQGRldiBBY2Nlc3MgbW9kaWZpZXIgZm9yIENPTy1vbmx5IGZ1bmN0aW9uYWxpdHkKICBtb2RpZmllciBvbmx5Q09PKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MpOwogICAgXzsKICB9CgogIC8vLyBBY2Nlc3MgbW9kaWZpZXIgZm9yIGNvbnRyYWN0IG93bmVyIG9ubHkgZnVuY3Rpb25hbGl0eQogIG1vZGlmaWVyIG9ubHlDTGV2ZWwoKSB7CiAgICByZXF1aXJlKAogICAgICBtc2cuc2VuZGVyID09IGNlb0FkZHJlc3MgfHwKICAgICAgbXNnLnNlbmRlciA9PSBjb29BZGRyZXNzCiAgICApOwogICAgXzsKICB9CgogIC8qKiogQ09OU1RSVUNUT1IgKioqLwogIGZ1bmN0aW9uIEV0aGVySXRlbTIzKCkgcHVibGljIHsKICAgIGNlb0FkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgY29vQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioqIFBVQkxJQyBGVU5DVElPTlMgKioqLwogIC8vLyBAbm90aWNlIEdyYW50IGFub3RoZXIgYWRkcmVzcyB0aGUgcmlnaHQgdG8gdHJhbnNmZXIgdG9rZW4gdmlhIHRha2VPd25lcnNoaXAoKSBhbmQgdHJhbnNmZXJGcm9tKCkuCiAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gYmUgZ3JhbnRlZCB0cmFuc2ZlciBhcHByb3ZhbC4gUGFzcyBhZGRyZXNzKDApIHRvCiAgLy8vICBjbGVhciBhbGwgYXBwcm92YWxzLgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIElEIG9mIHRoZSBUb2tlbiB0aGF0IGNhbiBiZSB0cmFuc2ZlcnJlZCBpZiB0aGlzIGNhbGwgc3VjY2VlZHMuCiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICBmdW5jdGlvbiBhcHByb3ZlKAogICAgYWRkcmVzcyBfdG8sCiAgICB1aW50MjU2IF90b2tlbklkCiAgKSBwdWJsaWMgewogICAgLy8gQ2FsbGVyIG11c3Qgb3duIHRva2VuLgogICAgcmVxdWlyZShfb3ducyhtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwoKICAgIGl0ZW0yM0luZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF0gPSBfdG87CgogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvLy8gRm9yIHF1ZXJ5aW5nIGJhbGFuY2Ugb2YgYSBwYXJ0aWN1bGFyIGFjY291bnQKICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmb3IgYmFsYW5jZSBxdWVyeQogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBvd25lcnNoaXBUb2tlbkNvdW50W19vd25lcl07CiAgfQoKICAvLy8gQGRldiBDcmVhdGVzIGEgbmV3IEl0ZW0yMyB3aXRoIHRoZSBnaXZlbiBuYW1lLgogIGZ1bmN0aW9uIGNyZWF0ZUNvbnRyYWN0SXRlbTIzKHN0cmluZyBfbmFtZSAsIHN0cmluZyBfc3RhcnRpbmdQICkgcHVibGljIG9ubHlDT08gewogICAgX2NyZWF0ZUl0ZW0yMyhfbmFtZSwgYWRkcmVzcyh0aGlzKSwgc3RyaW5nVG9VaW50KCBfc3RhcnRpbmdQKSk7CiAgfQoKCgpmdW5jdGlvbiBzdHJpbmdUb1VpbnQoc3RyaW5nIF9hbW91bnQpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVzdWx0KSB7CiAgICBieXRlcyBtZW1vcnkgYiA9IGJ5dGVzKF9hbW91bnQpOwogICAgdWludCBpOwogICAgdWludCBjb3VudGVyQmVmb3JlRG90OwogICAgdWludCBjb3VudGVyQWZ0ZXJEb3Q7CiAgICByZXN1bHQgPSAwOwogICAgdWludCB0b3ROdW0gPSBiLmxlbmd0aDsKICAgIHRvdE51bS0tOwogICAgYm9vbCBoYXNEb3QgPSBmYWxzZTsKCiAgICBmb3IgKGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICAgIHVpbnQgYyA9IHVpbnQoYltpXSk7CgogICAgICAgIGlmIChjID49IDQ4ICYmIGMgPD0gNTcpIHsKICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICogMTAgKyAoYyAtIDQ4KTsKICAgICAgICAgICAgY291bnRlckJlZm9yZURvdCArKzsKICAgICAgICAgICAgdG90TnVtLS07CiAgICAgICAgfQoKICAgICAgICBpZihjID09IDQ2KXsKICAgICAgICAgICAgaGFzRG90ID0gdHJ1ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQoKICAgIGlmKGhhc0RvdCkgewogICAgICAgIGZvciAodWludCBqID0gY291bnRlckJlZm9yZURvdCArIDE7IGogPCAxODsgaisrKSB7CiAgICAgICAgICAgIHVpbnQgbSA9IHVpbnQoYltqXSk7CgogICAgICAgICAgICBpZiAobSA+PSA0OCAmJiBtIDw9IDU3KSB7CiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKiAxMCArIChtIC0gNDgpOwogICAgICAgICAgICAgICAgY291bnRlckFmdGVyRG90ICsrOwogICAgICAgICAgICAgICAgdG90TnVtLS07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHRvdE51bSA9PSAwKXsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgIGlmKGNvdW50ZXJBZnRlckRvdCA8IDE4KXsKICAgICAgICAgdWludCBhZGROdW0gPSAxOCAtIGNvdW50ZXJBZnRlckRvdDsKICAgICAgICAgdWludCBtdWx0dXBseSA9IDEwICoqIGFkZE51bTsKICAgICAgICAgcmV0dXJuIHJlc3VsdCA9IHJlc3VsdCAqIG11bHR1cGx5OwogICAgIH0KCiAgICAgcmV0dXJuIHJlc3VsdDsKfQoKCiAgLy8vIEBub3RpY2UgUmV0dXJucyBhbGwgdGhlIHJlbGV2YW50IGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgaXRlbTIzLgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIHRva2VuSWQgb2YgdGhlIGl0ZW0yMyBvZiBpbnRlcmVzdC4KICBmdW5jdGlvbiBnZXRJdGVtMjModWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoCiAgICBzdHJpbmcgaXRlbTIzTmFtZSwKICAgIHVpbnQyNTYgc2VsbGluZ1ByaWNlLAogICAgYWRkcmVzcyBvd25lciwKICAgIHVpbnQyNTYgcHJldmlvdXNQcmljZSwKICAgIGFkZHJlc3NbNV0gcHJldmlvdXNPd25lcnMKICApIHsKICAgIEl0ZW0yMyBzdG9yYWdlIGl0ZW0yMyA9IGl0ZW0yM3NbX3Rva2VuSWRdOwogICAgaXRlbTIzTmFtZSA9IGl0ZW0yMy5uYW1lOwogICAgc2VsbGluZ1ByaWNlID0gaXRlbTIzSW5kZXhUb1ByaWNlW190b2tlbklkXTsKICAgIG93bmVyID0gaXRlbTIzSW5kZXhUb093bmVyW190b2tlbklkXTsKICAgIHByZXZpb3VzUHJpY2UgPSBpdGVtMjNJbmRleFRvUHJldmlvdXNQcmljZVtfdG9rZW5JZF07CiAgICBwcmV2aW91c093bmVycyA9IGl0ZW0yM0luZGV4VG9QcmV2aW91c093bmVyc1tfdG9rZW5JZF07CiAgfQoKCiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICByZXR1cm4gTkFNRTsKICB9CgogIC8vLyBGb3IgcXVlcnlpbmcgb3duZXIgb2YgdG9rZW4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSB0b2tlbklEIGZvciBvd25lciBpbnF1aXJ5CiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpCiAgICBwdWJsaWMKICAgIHZpZXcKICAgIHJldHVybnMgKGFkZHJlc3Mgb3duZXIpCiAgewogICAgb3duZXIgPSBpdGVtMjNJbmRleFRvT3duZXJbX3Rva2VuSWRdOwogICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApKTsKICB9CgogIGZ1bmN0aW9uIHBheW91dChhZGRyZXNzIF90bykgcHVibGljIG9ubHlDTGV2ZWwgewogICAgX3BheW91dChfdG8pOwogIH0KCiAgLy8gQWxsb3dzIHNvbWVvbmUgdG8gc2VuZCBldGhlciBhbmQgb2J0YWluIHRoZSB0b2tlbgogIGZ1bmN0aW9uIHB1cmNoYXNlKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyBwYXlhYmxlIHsKICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBpdGVtMjNJbmRleFRvT3duZXJbX3Rva2VuSWRdOwogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CgogICAgYWRkcmVzc1s1XSBzdG9yYWdlIHByZXZpb3VzT3duZXJzID0gaXRlbTIzSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXTsKCiAgICB1aW50MjU2IHNlbGxpbmdQcmljZSA9IGl0ZW0yM0luZGV4VG9QcmljZVtfdG9rZW5JZF07CiAgICB1aW50MjU2IHByZXZpb3VzUHJpY2UgPSBpdGVtMjNJbmRleFRvUHJldmlvdXNQcmljZVtfdG9rZW5JZF07CiAgICAvLyBNYWtpbmcgc3VyZSB0b2tlbiBvd25lciBpcyBub3Qgc2VuZGluZyB0byBzZWxmCiAgICByZXF1aXJlKG9sZE93bmVyICE9IG5ld093bmVyKTsKCiAgICAvLyBTYWZldHkgY2hlY2sgdG8gcHJldmVudCBhZ2FpbnN0IGFuIHVuZXhwZWN0ZWQgMHgwIGRlZmF1bHQuCiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChuZXdPd25lcikpOwoKICAgIC8vIE1ha2luZyBzdXJlIHNlbnQgYW1vdW50IGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgc2VsbGluZ1ByaWNlCiAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBzZWxsaW5nUHJpY2UpOwoKICAgIHVpbnQyNTYgcHJpY2VEZWx0YSA9IFNhZmVNYXRoLnN1YihzZWxsaW5nUHJpY2UsIHByZXZpb3VzUHJpY2UpOwogICAgdWludDI1NiBvd25lclBheW91dCA9IFNhZmVNYXRoLmFkZChwcmV2aW91c1ByaWNlLCBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KHByaWNlRGVsdGEsIDEwMCksIDQwKSk7CgoKICAgIHVpbnQyNTYgcHVyY2hhc2VFeGNlc3MgPSBTYWZlTWF0aC5zdWIobXNnLnZhbHVlLCBzZWxsaW5nUHJpY2UpOwoKICAgIGl0ZW0yM0luZGV4VG9QcmljZVtfdG9rZW5JZF0gPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgMTUwKSwgMTAwKTsKICAgIGl0ZW0yM0luZGV4VG9QcmV2aW91c1ByaWNlW190b2tlbklkXSA9IHNlbGxpbmdQcmljZTsKCiAgICB1aW50MjU2IHN0cmFuZ2VQcmljZSA9IHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihwcmljZURlbHRhLCAxMDApLCAxMCkpOwogICAgdWludDI1NiBzdHJhbmdlUHJpY2UyID0gdWludDI1NigwKTsKCgogICAgLy8gUGF5IHByZXZpb3VzIHRva2VuT3duZXIgaWYgb3duZXIgaXMgbm90IGNvbnRyYWN0CiAgICAvLyBhbmQgaWYgcHJldmlvdXMgcHJpY2UgaXMgbm90IDAKICAgIGlmIChvbGRPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgIC8vIG9sZCBvd25lciBnZXRzIGVudGlyZSBpbml0aWFsIHBheW1lbnQgYmFjawogICAgICBvbGRPd25lci50cmFuc2Zlcihvd25lclBheW91dCk7CiAgICB9IGVsc2UgewogICAgICBzdHJhbmdlUHJpY2UgPSBTYWZlTWF0aC5hZGQob3duZXJQYXlvdXQsIHN0cmFuZ2VQcmljZSk7CiAgICB9CgogICAgLy8gTmV4dCBkaXN0cmlidXRlIHBheW91dCBUb3RhbCBhbW9uZyBwcmV2aW91cyBPd25lcnMKICAgIGZvciAodWludCBpID0gMDsgaSA8IDU7IGkrKykgewogICAgICAgIGlmIChwcmV2aW91c093bmVyc1tpXSAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgICAgICAgIHN0cmFuZ2VQcmljZTIrPXVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihwcmljZURlbHRhLCAxMDApLCAxMCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0cmFuZ2VQcmljZSA9IFNhZmVNYXRoLmFkZChzdHJhbmdlUHJpY2UsIHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihwcmljZURlbHRhLCAxMDApLCAxMCkpKTsKICAgICAgICB9CiAgICB9CgogICAgY2VvQWRkcmVzcy50cmFuc2ZlcihzdHJhbmdlUHJpY2Urc3RyYW5nZVByaWNlMik7CiAgICAvL2Nlb0FkZHJlc3MudHJhbnNmZXIoc3RyYW5nZVByaWNlMik7CiAgICBfdHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfdG9rZW5JZCk7CgogICAgLy9Ub2tlblNvbGQoX3Rva2VuSWQsIHNlbGxpbmdQcmljZSwgaXRlbTIzSW5kZXhUb1ByaWNlW190b2tlbklkXSwgb2xkT3duZXIsIG5ld093bmVyLCBpdGVtMjNzW190b2tlbklkXS5uYW1lKTsKCiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHB1cmNoYXNlRXhjZXNzKTsKICB9CgoKICBmdW5jdGlvbiBwcmljZU9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgcHJpY2UpIHsKICAgIHJldHVybiBpdGVtMjNJbmRleFRvUHJpY2VbX3Rva2VuSWRdOwogIH0KCiAgLy8vIEBkZXYgQXNzaWducyBhIG5ldyBhZGRyZXNzIHRvIGFjdCBhcyB0aGUgQ0VPLiBPbmx5IGF2YWlsYWJsZSB0byB0aGUgY3VycmVudCBDRU8uCiAgLy8vIEBwYXJhbSBfbmV3Q0VPIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgQ0VPCiAgZnVuY3Rpb24gc2V0Q0VPKGFkZHJlc3MgX25ld0NFTykgcHVibGljIG9ubHlDRU8gewogICAgcmVxdWlyZShfbmV3Q0VPICE9IGFkZHJlc3MoMCkpOwoKICAgIGNlb0FkZHJlc3MgPSBfbmV3Q0VPOwogIH0KCiAgLy8vIEBkZXYgQXNzaWducyBhIG5ldyBhZGRyZXNzIHRvIGFjdCBhcyB0aGUgQ09PLiBPbmx5IGF2YWlsYWJsZSB0byB0aGUgY3VycmVudCBDT08uCiAgLy8vIEBwYXJhbSBfbmV3Q09PIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgQ09PCiAgZnVuY3Rpb24gc2V0Q09PKGFkZHJlc3MgX25ld0NPTykgcHVibGljIG9ubHlDRU8gewogICAgcmVxdWlyZShfbmV3Q09PICE9IGFkZHJlc3MoMCkpOwogICAgY29vQWRkcmVzcyA9IF9uZXdDT087CiAgfQoKICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuIFNZTUJPTDsKICB9CgogIC8vLyBAbm90aWNlIEFsbG93IHByZS1hcHByb3ZlZCB1c2VyIHRvIHRha2Ugb3duZXJzaGlwIG9mIGEgdG9rZW4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICBhZGRyZXNzIG9sZE93bmVyID0gaXRlbTIzSW5kZXhUb093bmVyW190b2tlbklkXTsKCiAgICAvLyBTYWZldHkgY2hlY2sgdG8gcHJldmVudCBhZ2FpbnN0IGFuIHVuZXhwZWN0ZWQgMHgwIGRlZmF1bHQuCiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChuZXdPd25lcikpOwoKICAgIC8vIE1ha2luZyBzdXJlIHRyYW5zZmVyIGlzIGFwcHJvdmVkCiAgICByZXF1aXJlKF9hcHByb3ZlZChuZXdPd25lciwgX3Rva2VuSWQpKTsKCiAgICBfdHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfdG9rZW5JZCk7CiAgfQoKICAvLy8gQHBhcmFtIF9vd25lciBUaGUgb3duZXIgd2hvc2UgaXRlbTIzIHRva2VucyB3ZSBhcmUgaW50ZXJlc3RlZCBpbi4KICAvLy8gQGRldiBUaGlzIG1ldGhvZCBNVVNUIE5FVkVSIGJlIGNhbGxlZCBieSBzbWFydCBjb250cmFjdCBjb2RlLiBGaXJzdCwgaXQncyBmYWlybHkKICAvLy8gIGV4cGVuc2l2ZSAoaXQgd2Fsa3MgdGhlIGVudGlyZSBJdGVtMjNzIGFycmF5IGxvb2tpbmcgZm9yIGl0ZW0yM3MgYmVsb25naW5nIHRvIG93bmVyKSwKICAvLy8gIGJ1dCBpdCBhbHNvIHJldHVybnMgYSBkeW5hbWljIGFycmF5LCB3aGljaCBpcyBvbmx5IHN1cHBvcnRlZCBmb3Igd2ViMyBjYWxscywgYW5kCiAgLy8vICBub3QgY29udHJhY3QtdG8tY29udHJhY3QgY2FsbHMuCiAgZnVuY3Rpb24gdG9rZW5zT2ZPd25lcihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2W10gb3duZXJUb2tlbnMpIHsKICAgIHVpbnQyNTYgdG9rZW5Db3VudCA9IGJhbGFuY2VPZihfb3duZXIpOwogICAgaWYgKHRva2VuQ291bnQgPT0gMCkgewogICAgICAgIC8vIFJldHVybiBhbiBlbXB0eSBhcnJheQogICAgICByZXR1cm4gbmV3IHVpbnQyNTZbXSgwKTsKICAgIH0gZWxzZSB7CiAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXSh0b2tlbkNvdW50KTsKICAgICAgdWludDI1NiB0b3RhbEl0ZW0yM3MgPSB0b3RhbFN1cHBseSgpOwogICAgICB1aW50MjU2IHJlc3VsdEluZGV4ID0gMDsKICAgICAgdWludDI1NiBpdGVtMjNJZDsKICAgICAgZm9yIChpdGVtMjNJZCA9IDA7IGl0ZW0yM0lkIDw9IHRvdGFsSXRlbTIzczsgaXRlbTIzSWQrKykgewogICAgICAgIGlmIChpdGVtMjNJbmRleFRvT3duZXJbaXRlbTIzSWRdID09IF9vd25lcikgewogICAgICAgICAgcmVzdWx0W3Jlc3VsdEluZGV4XSA9IGl0ZW0yM0lkOwogICAgICAgICAgcmVzdWx0SW5kZXgrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9CgogIC8vLyBGb3IgcXVlcnlpbmcgdG90YWxTdXBwbHkgb2YgdG9rZW4KICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiB0b3RhbCkgewogICAgcmV0dXJuIGl0ZW0yM3MubGVuZ3RoOwogIH0KCiAgLy8vIE93bmVyIGluaXRhdGVzIHRoZSB0cmFuc2ZlciBvZiB0aGUgdG9rZW4gdG8gYW5vdGhlciBhY2NvdW50CiAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgZm9yIHRoZSB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZCB0by4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gdHJhbnNmZXIoCiAgICBhZGRyZXNzIF90bywKICAgIHVpbnQyNTYgX3Rva2VuSWQKICApIHB1YmxpYyB7CiAgICByZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChfdG8pKTsKICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICB9CgogIC8vLyBUaGlyZC1wYXJ0eSBpbml0aWF0ZXMgdHJhbnNmZXIgb2YgdG9rZW4gZnJvbSBhZGRyZXNzIF9mcm9tIHRvIGFkZHJlc3MgX3RvCiAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBmb3IgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkIGZyb20uCiAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgZm9yIHRoZSB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZCB0by4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKAogICAgYWRkcmVzcyBfZnJvbSwKICAgIGFkZHJlc3MgX3RvLAogICAgdWludDI1NiBfdG9rZW5JZAogICkgcHVibGljIHsKICAgIHJlcXVpcmUoX293bnMoX2Zyb20sIF90b2tlbklkKSk7CiAgICByZXF1aXJlKF9hcHByb3ZlZChfdG8sIF90b2tlbklkKSk7CiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChfdG8pKTsKICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKioqIFBSSVZBVEUgRlVOQ1RJT05TICoqKi8KICAvLy8gU2FmZXR5IGNoZWNrIG9uIF90byBhZGRyZXNzIHRvIHByZXZlbnQgYWdhaW5zdCBhbiB1bmV4cGVjdGVkIDB4MCBkZWZhdWx0LgogIGZ1bmN0aW9uIF9hZGRyZXNzTm90TnVsbChhZGRyZXNzIF90bykgcHJpdmF0ZSBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBfdG8gIT0gYWRkcmVzcygwKTsKICB9CgogIC8vLyBGb3IgY2hlY2tpbmcgYXBwcm92YWwgb2YgdHJhbnNmZXIgZm9yIGFkZHJlc3MgX3RvCiAgZnVuY3Rpb24gX2FwcHJvdmVkKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIGl0ZW0yM0luZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX3RvOwogIH0KCiAgLy8vIEZvciBjcmVhdGluZyBJdGVtMjMKICBmdW5jdGlvbiBfY3JlYXRlSXRlbTIzKHN0cmluZyBfbmFtZSwgYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3ByaWNlKSBwcml2YXRlIHsKICAgIEl0ZW0yMyBtZW1vcnkgX2l0ZW0yMyA9IEl0ZW0yMyh7CiAgICAgIG5hbWU6IF9uYW1lCiAgICB9KTsKICAgIHVpbnQyNTYgbmV3SXRlbTIzSWQgPSBpdGVtMjNzLnB1c2goX2l0ZW0yMykgLSAxOwoKICAgIC8vIEl0J3MgcHJvYmFibHkgbmV2ZXIgZ29pbmcgdG8gaGFwcGVuLCA0IGJpbGxpb24gdG9rZW5zIGFyZSBBIExPVCwgYnV0CiAgICAvLyBsZXQncyBqdXN0IGJlIDEwMCUgc3VyZSB3ZSBuZXZlciBsZXQgdGhpcyBoYXBwZW4uCiAgICByZXF1aXJlKG5ld0l0ZW0yM0lkID09IHVpbnQyNTYodWludDMyKG5ld0l0ZW0yM0lkKSkpOwoKICAgIEJpcnRoKG5ld0l0ZW0yM0lkLCBfbmFtZSwgX293bmVyKTsKCiAgICBpdGVtMjNJbmRleFRvUHJpY2VbbmV3SXRlbTIzSWRdID0gX3ByaWNlOwogICAgaXRlbTIzSW5kZXhUb1ByZXZpb3VzUHJpY2VbbmV3SXRlbTIzSWRdID0gMDsKICAgIGl0ZW0yM0luZGV4VG9QcmV2aW91c093bmVyc1tuZXdJdGVtMjNJZF0gPQogICAgICAgIFthZGRyZXNzKHRoaXMpLCBhZGRyZXNzKHRoaXMpLCBhZGRyZXNzKHRoaXMpLCBhZGRyZXNzKHRoaXMpXTsKCiAgICAvLyBUaGlzIHdpbGwgYXNzaWduIG93bmVyc2hpcCwgYW5kIGFsc28gZW1pdCB0aGUgVHJhbnNmZXIgZXZlbnQgYXMKICAgIC8vIHBlciBFUkM3MjEgZHJhZnQKICAgIF90cmFuc2ZlcihhZGRyZXNzKDApLCBfb3duZXIsIG5ld0l0ZW0yM0lkKTsKICB9CgogIC8vLyBDaGVjayBmb3IgdG9rZW4gb3duZXJzaGlwCiAgZnVuY3Rpb24gX293bnMoYWRkcmVzcyBjbGFpbWFudCwgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBjbGFpbWFudCA9PSBpdGVtMjNJbmRleFRvT3duZXJbX3Rva2VuSWRdOwogIH0KCiAgLy8vIEZvciBwYXlpbmcgb3V0IGJhbGFuY2Ugb24gY29udHJhY3QKICBmdW5jdGlvbiBfcGF5b3V0KGFkZHJlc3MgX3RvKSBwcml2YXRlIHsKICAgIGlmIChfdG8gPT0gYWRkcmVzcygwKSkgewogICAgICBjZW9BZGRyZXNzLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9IGVsc2UgewogICAgICBfdG8udHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KICB9CgogIC8vLyBAZGV2IEFzc2lnbnMgb3duZXJzaGlwIG9mIGEgc3BlY2lmaWMgSXRlbTIzIHRvIGFuIGFkZHJlc3MuCiAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHsKICAgIC8vIFNpbmNlIHRoZSBudW1iZXIgb2YgaXRlbTIzcyBpcyBjYXBwZWQgdG8gMl4zMiB3ZSBjYW4ndCBvdmVyZmxvdyB0aGlzCiAgICBvd25lcnNoaXBUb2tlbkNvdW50W190b10rKzsKICAgIC8vdHJhbnNmZXIgb3duZXJzaGlwCiAgICBpdGVtMjNJbmRleFRvT3duZXJbX3Rva2VuSWRdID0gX3RvOwogICAgLy8gV2hlbiBjcmVhdGluZyBuZXcgaXRlbTIzcyBfZnJvbSBpcyAweDAsIGJ1dCB3ZSBjYW4ndCBhY2NvdW50IHRoYXQgYWRkcmVzcy4KICAgIGlmIChfZnJvbSAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyc2hpcFRva2VuQ291bnRbX2Zyb21dLS07CiAgICAgIC8vIGNsZWFyIGFueSBwcmV2aW91c2x5IGFwcHJvdmVkIG93bmVyc2hpcCBleGNoYW5nZQogICAgICBkZWxldGUgaXRlbTIzSW5kZXhUb0FwcHJvdmVkW190b2tlbklkXTsKICAgIH0KICAgIC8vIFVwZGF0ZSB0aGUgaXRlbTIzSW5kZXhUb1ByZXZpb3VzT3duZXJzCiAgICBpdGVtMjNJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzRdPWl0ZW0yM0luZGV4VG9QcmV2aW91c093bmVyc1tfdG9rZW5JZF1bM107CiAgICBpdGVtMjNJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzNdPWl0ZW0yM0luZGV4VG9QcmV2aW91c093bmVyc1tfdG9rZW5JZF1bMl07CiAgICBpdGVtMjNJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzJdPWl0ZW0yM0luZGV4VG9QcmV2aW91c093bmVyc1tfdG9rZW5JZF1bMV07CiAgICBpdGVtMjNJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzFdPWl0ZW0yM0luZGV4VG9QcmV2aW91c093bmVyc1tfdG9rZW5JZF1bMF07CiAgICAvLyB0aGUgX2Zyb20gYWRkcmVzcyBmb3IgY3JlYXRpb24gaXMgMCwgc28gaW5zdGVhZCBzZXQgaXQgdG8gdGhlIGNvbnRyYWN0IGFkZHJlc3MKICAgIGlmIChfZnJvbSAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgaXRlbTIzSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXVswXT1fZnJvbTsKICAgIH0gZWxzZSB7CiAgICAgICAgaXRlbTIzSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXVswXT1hZGRyZXNzKHRoaXMpOwogICAgfQogICAgLy8gRW1pdCB0aGUgdHJhbnNmZXIgZXZlbnQuCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQp9CgoKbGlicmFyeSBTYWZlTWF0aCB7CgogIC8qKgogICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgKi8KICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBTdWJzdHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgKi8KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICAvKioKICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0='.
	

]
