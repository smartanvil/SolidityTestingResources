Class {
	#name : #SRTa1a85a763b252ff7253b8829d4fb60d526e517ca,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa1a85a763b252ff7253b8829d4fb60d526e517ca >> base64 [
	^ 'Y29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKfQoKY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9Cgpjb250cmFjdCBPd24gewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgZnVuY3Rpb24gT3duKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IFBhdXNlIGlzIE93biB7CiAgYm9vbCBwdWJsaWMgc3RvcHBlZDsKCiAgbW9kaWZpZXIgc3RvcEluRW1lcmdlbmN5IHsKICAgIGlmIChzdG9wcGVkKSB7CiAgICAgIHRocm93OwogICAgfQogICAgXzsKICB9CiAgCiAgbW9kaWZpZXIgb25seUluRW1lcmdlbmN5IHsKICAgIGlmICghc3RvcHBlZCkgewogICAgICB0aHJvdzsKICAgIH0KICAgIF87CiAgfQoKICAvLyBvd25lciBjYWxsIHRvIHRyaWdnZXIgYSBzdG9wIHN0YXRlCiAgZnVuY3Rpb24gZW1lcmdlbmN5U3RvcCgpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICBzdG9wcGVkID0gdHJ1ZTsKICB9CgogIC8vIG93bmVyIGNhbGwgdG8gcmVzdGFydCBmcm9tIHRoZSBzdG9wIHN0YXRlCiAgZnVuY3Rpb24gcmVsZWFzZSgpIGV4dGVybmFsIG9ubHlPd25lciBvbmx5SW5FbWVyZ2VuY3kgewogICAgc3RvcHBlZCA9IGZhbHNlOwogIH0KCn0KCmNvbnRyYWN0IFB1bGxlciB7CgogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogIAogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgcGF5bWVudHM7CgogIGV2ZW50IExvZ1JlZnVuZEVUSChhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKCiAgZnVuY3Rpb24gYXN5bmNTZW5kKGFkZHJlc3MgZGVzdCwgdWludCBhbW91bnQpIGludGVybmFsIHsKICAgIHBheW1lbnRzW2Rlc3RdID0gcGF5bWVudHNbZGVzdF0uYWRkKGFtb3VudCk7CiAgfQoKICAvLyB3aXRoZHJ3YXcgY2FsbCBmb3IgcmVmdW5kaW5nIGJhbGFuY2UgYWN1bWlsYXRlZCBieSBwYXllZQogIGZ1bmN0aW9uIHdpdGhkcmF3UGF5bWVudHMoKSB7CiAgICBhZGRyZXNzIHBheWVlID0gbXNnLnNlbmRlcjsKICAgIHVpbnQgcGF5bWVudCA9IHBheW1lbnRzW3BheWVlXTsKICAgIAogICAgaWYgKHBheW1lbnQgPT0gMCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICBpZiAodGhpcy5iYWxhbmNlIDwgcGF5bWVudCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICBwYXltZW50c1twYXllZV0gPSAwOwoKICAgIGlmICghcGF5ZWUuc2VuZChwYXltZW50KSkgewogICAgICB0aHJvdzsKICAgIH0KICAgIExvZ1JlZnVuZEVUSChwYXllZSxwYXltZW50KTsKICB9Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogIAogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICBpZihtc2cuZGF0YS5sZW5ndGggPCBzaXplICsgNCkgewogICAgICAgdGhyb3c7CiAgICAgfQogICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgewogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsKICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQp9Cgpjb250cmFjdCBUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd24gewogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJUcmliZVRva2VuIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJUUklCRSI7CiAgdWludCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSA2OwoKICAvLyBUb2tlbiBjb25zdHJ1Y3RvcgogIGZ1bmN0aW9uIFRva2VuKCkgewogICAgICB0b3RhbFN1cHBseSA9IDIwMDAwMDAwMDAwMDAwMDsKICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSB0b3RhbFN1cHBseTsgLy8gc2VuZCBhbGwgY3JlYXRlZCB0b2tlbnMgdG8gdGhlIG93bmVyL2NyZWF0b3IKICB9CgogIC8vIEJ1cm4gZnVuY3Rpb24gdG8gYnVybiBhIHNldCBhbW91bnQgb2YgdG9rZW5zCiAgZnVuY3Rpb24gYnVybmVyKHVpbnQgX3ZhbHVlKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCAweDAsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9Cgpjb250cmFjdCBDcm93ZHNhbGUgaXMgUGF1c2UsIFB1bGxlciB7CiAgICAKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAJc3RydWN0IEJhY2tlciB7CgkJdWludCB3ZWlSZWNlaXZlZDsgLy8gQW1vdW50IG9mIEV0aGVyIGdpdmVuCgkJdWludCBjb2luU2VudDsKCX0KICAgIAoJLy9DT05TVEFOVFMKCS8vIE1pbmltdW0gbnVtYmVyIG9mIFRSSUJFIHRvIHNlbGwKCXVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9DQVAgPSA3NTAwMDAwMDAwMDAwOyAvLyA3LDUwMCwwMDAgVFJJQkUKCS8vIE1heGltdW0gbnVtYmVyIG9mIFRSSUJFIHRvIHNlbGwKCXVpbnQgcHVibGljIGNvbnN0YW50IE1BWF9DQVAgPSAxNTAwMDAwMDAwMDAwMDA7IC8vIDE1MCwwMDAsMDAwIFRSSUJFCgkvLyBNaW5pbXVtIGFtb3VudCB0byBpbnZlc3QKCXVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9JTlZFU1RfRVRIRVIgPSAxMDAgZmlubmV5OyAvLyAwLjFFVEgKCS8vIENyb3dkc2FsZSBwZXJpb2QKCXVpbnQgcHJpdmF0ZSBjb25zdGFudCBDUk9XRFNBTEVfUEVSSU9EID0gMjIgZGF5czsgLy8gMjIgZGF5cyBjcm93ZHNhbGUgcnVuCgkvLyBOdW1iZXIgb2YgVFJJQkUgcGVyIEV0aGVyCgl1aW50IHB1YmxpYyBjb25zdGFudCBDT0lOX1BFUl9FVEhFUiA9IDMwMDAwMDAwMDA7IC8vIDMsMDAwIFRSSUJFCgoKCS8vVkFSSUFCTEVTCgkvLyBUUklCRSBjb250cmFjdCByZWZlcmVuY2UKCVRva2VuIHB1YmxpYyBjb2luOwogICAgLy8gTXVsdGlzaWcgY29udHJhY3QgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIEV0aGVyCglhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZ0V0aGVyOwoJLy8gTnVtYmVyIG9mIEV0aGVyIHJlY2VpdmVkCgl1aW50IHB1YmxpYyBldGhlclJlY2VpdmVkOwoJLy8gTnVtYmVyIG9mIFRSSUJFIHNlbnQgdG8gRXRoZXIgY29udHJpYnV0b3JzCgl1aW50IHB1YmxpYyBjb2luU2VudFRvRXRoZXI7CiAgLy8gTnVtYmVyIG9mIFRSSUJFIHRvIGJ1cm4KICB1aW50IHB1YmxpYyBjb2luVG9CdXJuOwoJLy8gQ3Jvd2RzYWxlIHN0YXJ0IHRpbWUKCXVpbnQgcHVibGljIHN0YXJ0VGltZTsKCS8vIENyb3dkc2FsZSBlbmQgdGltZQoJdWludCBwdWJsaWMgZW5kVGltZTsKIAkvLyBJcyBjcm93ZHNhbGUgc3RpbGwgb24gZ29pbmcKCWJvb2wgcHVibGljIGNyb3dkc2FsZUNsb3NlZDsKCgkvLyBCYWNrZXJzIEV0aGVyIGluZGV4ZWQgYnkgdGhlaXIgRXRoZXJldW0gYWRkcmVzcwoJbWFwcGluZyhhZGRyZXNzID0+IEJhY2tlcikgcHVibGljIGJhY2tlcnM7CgoKCS8vTU9ESUZJRVJTCgltb2RpZmllciBtaW5DYXBOb3RSZWFjaGVkKCkgewoJCWlmICgobm93IDwgZW5kVGltZSkgfHwgY29pblNlbnRUb0V0aGVyID49IE1JTl9DQVAgKSB0aHJvdzsKCQlfOwoJfQoKCW1vZGlmaWVyIHJlc3BlY3RUaW1lRnJhbWUoKSB7CgkJaWYgKChub3cgPCBzdGFydFRpbWUpIHx8IChub3cgPiBlbmRUaW1lICkpIHRocm93OwoJCV87Cgl9CgoJLy9FVkVOVFMKCWV2ZW50IExvZ1JlY2VpdmVkRVRIKGFkZHJlc3MgYWRkciwgdWludCB2YWx1ZSk7CglldmVudCBMb2dDb2luc0VtaXRlZChhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludCBhbW91bnQpOwoKCS8vQ3Jvd2RzYWxlIENvbnN0cnVjdG9yCglmdW5jdGlvbiBDcm93ZHNhbGUoYWRkcmVzcyBfVFJJQkVBZGRyZXNzLCBhZGRyZXNzIF90bykgewoJCWNvaW4gPSBUb2tlbihfVFJJQkVBZGRyZXNzKTsKCQltdWx0aXNpZ0V0aGVyID0gX3RvOwoJfQoJCgkvLyBEZWZhdWx0IGZ1bmN0aW9uIHRvIHJlY2VpdmUgZXRoZXIKCWZ1bmN0aW9uKCkgc3RvcEluRW1lcmdlbmN5IHJlc3BlY3RUaW1lRnJhbWUgcGF5YWJsZSB7CgkJcmVjZWl2ZUVUSChtc2cuc2VuZGVyKTsKCX0KCgkgCgkvLyBUbyBjYWxsIHRvIHN0YXJ0IHRoZSBjcm93ZHNhbGUKCWZ1bmN0aW9uIHN0YXJ0KCkgb25seU93bmVyIHsKCQlpZiAoc3RhcnRUaW1lICE9IDApIHRocm93OyAvLyBDcm93ZHNhbGUgd2FzIGFscmVhZHkgc3RhcnRlZAoKCQlzdGFydFRpbWUgPSBub3cgOyAgICAgICAgICAgIAoJCWVuZFRpbWUgPSAgbm93ICsgQ1JPV0RTQUxFX1BFUklPRDsgICAgCgl9CgoJLy8gTWFpbiBmdW5jdGlvbiBvbiBFVEggcmVjZWl2ZQoJZnVuY3Rpb24gcmVjZWl2ZUVUSChhZGRyZXNzIGJlbmVmaWNpYXJ5KSBpbnRlcm5hbCB7CgkJaWYgKG1zZy52YWx1ZSA8IE1JTl9JTlZFU1RfRVRIRVIpIHRocm93OyAvLyBEbyBub3QgYWNjZXB0IGludmVzdG1lbnQgaWYgdGhlIGFtb3VudCBpcyBsb3dlciB0aGFuIHRoZSBtaW5pbXVtIGFsbG93ZWQgaW52ZXN0bWVudAoJCQoJCXVpbnQgY29pblRvU2VuZCA9IGJvbnVzKG1zZy52YWx1ZS5tdWwoQ09JTl9QRVJfRVRIRVIpLmRpdigxIGV0aGVyKSk7IC8vIENhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIHRva2VucyB0byBzZW5kCgkJaWYgKGNvaW5Ub1NlbmQuYWRkKGNvaW5TZW50VG9FdGhlcikgPiBNQVhfQ0FQKSB0aHJvdzsJCgoJCUJhY2tlciBiYWNrZXIgPSBiYWNrZXJzW2JlbmVmaWNpYXJ5XTsKCQljb2luLnRyYW5zZmVyKGJlbmVmaWNpYXJ5LCBjb2luVG9TZW5kKTsgLy8gVHJhbnNmZXIgVFJJQkUKCgkJYmFja2VyLmNvaW5TZW50ID0gYmFja2VyLmNvaW5TZW50LmFkZChjb2luVG9TZW5kKTsKCQliYWNrZXIud2VpUmVjZWl2ZWQgPSBiYWNrZXIud2VpUmVjZWl2ZWQuYWRkKG1zZy52YWx1ZSk7IC8vIFVwZGF0ZSB0aGUgdG90YWwgd2VpIGNvbGxlY3RlZCBkdXJpbmcgdGhlIGNyb3dkZnVuZGluZyBmb3IgdGhpcyBiYWNrZXIgICAgCgoJCWV0aGVyUmVjZWl2ZWQgPSBldGhlclJlY2VpdmVkLmFkZChtc2cudmFsdWUpOyAvLyBVcGRhdGUgdGhlIHRvdGFsIHdlaSBjb2xsZWN0ZWQgZHVyaW5nIHRoZSBjcm93ZGZ1bmRpbmcKCQljb2luU2VudFRvRXRoZXIgPSBjb2luU2VudFRvRXRoZXIuYWRkKGNvaW5Ub1NlbmQpOwoKCQkvLyBTZW5kIGV2ZW50cwoJCUxvZ0NvaW5zRW1pdGVkKG1zZy5zZW5kZXIgLGNvaW5Ub1NlbmQpOwoJCUxvZ1JlY2VpdmVkRVRIKGJlbmVmaWNpYXJ5LCBldGhlclJlY2VpdmVkKTsgCgl9CgkKCgkvLyBCb251cyBmdW5jdGlvbiBmb3IgdGhlIGZpcnN0IHdlZWsKCWZ1bmN0aW9uIGJvbnVzKHVpbnQgYW1vdW50KSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CgkJaWYgKG5vdyA8IHN0YXJ0VGltZS5hZGQoMiBtaW51dGVzKSkgcmV0dXJuIGFtb3VudC5hZGQoYW1vdW50LmRpdig1KSk7ICAgLy8gYm9udXMgMjAlCgkJcmV0dXJuIGFtb3VudDsKCX0KCgkvLyBGaW5hbGl6ZSBmdW5jdGlvbgoJZnVuY3Rpb24gZmluYWxpemUoKSBvbmx5T3duZXIgcHVibGljIHsKCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNyb3dkc2FsZSBoYXMgZW5kZWQgb3IgaWYgdGhlIG9sZCB0b2tlbnMgaGF2ZSBiZWVuIHNvbGQKICAgIGlmKGNvaW5TZW50VG9FdGhlciAhPSBNQVhfQ0FQKXsKICAgICAgICBpZiAobm93IDwgZW5kVGltZSkgIHRocm93OyAvLyBJZiBDcm93ZHNhbGUgc3RpbGwgcnVubmluZwogICAgICAgIGlmIChjb2luU2VudFRvRXRoZXIgPCBNSU5fQ0FQICYmIG5vdyA8IGVuZFRpbWUgKyA3IGRheXMpIHRocm93OyAvLyBJZiBNSU5fQ0FQIGlzIG5vdCByZWFjaGVkIGRvbm9ycyBoYXZlIDdkYXlzIHRvIGdldCByZWZ1bmQgYmVmb3JlIHdlIGNhbiBmaW5hbGlzZQogICAgfQoJCQoJCWlmICghbXVsdGlzaWdFdGhlci5zZW5kKHRoaXMuYmFsYW5jZSkpIHRocm93OyAvLyBNb3ZlIHRoZSByZW1haW5pbmcgRXRoZXIgdG8gdGhlIG11bHRpc2lnIGFkZHJlc3MKCQkKCQl1aW50IHJlbWFpbnMgPSBjb2luLmJhbGFuY2VPZih0aGlzKTsKCQlpZiAocmVtYWlucyA+IDApIHsKICAgICAgY29pblRvQnVybiA9IGNvaW5Ub0J1cm4uYWRkKHJlbWFpbnMpOwogICAgICAvLyBUcmFuc2ZlciByZW1haW5zIHRvIG93bmVyIHRvIGJ1cm4KICAgICAgY29pbi50cmFuc2Zlcihvd25lciwgcmVtYWlucyk7CgkJfQoJCWNyb3dkc2FsZUNsb3NlZCA9IHRydWU7Cgl9CgoJLy8gRHJhaW4gZnVuY3Rpb25zIGluIGNhc2Ugb2YgdW5leHBlY3RlZCBpc3N1ZXMgd2l0aCB0aGUgc21hcnQgY29udHJhY3QuCiAgLy8gRVRIIGRyYWluCglmdW5jdGlvbiBkcmFpbigpIG9ubHlPd25lciB7CiAgICBpZiAoIW11bHRpc2lnRXRoZXIuc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsgLy9UcmFuc2ZlciB0byB0ZWFtIG11bHRpc2lnIHdhbGxldAoJfQogIC8vIFRPS0VOIGRyYWluCiAgZnVuY3Rpb24gY29pbkRyYWluKCkgb25seU93bmVyIHsKICAgIHVpbnQgcmVtYWlucyA9IGNvaW4uYmFsYW5jZU9mKHRoaXMpOwogICAgY29pbi50cmFuc2Zlcihvd25lciwgcmVtYWlucyk7IC8vIFRyYW5zZmVyIHRvIG93bmVyIHdhbGxldAoJfQoKCS8vIENoYW5nZSBtdWx0aXNpZyB3YWxsZXQgaW4gY2FzZSBpdHMgbmVlZGVkCglmdW5jdGlvbiBjaGFuZ2VNdWx0aXNpZyhhZGRyZXNzIGFkZHIpIG9ubHlPd25lciBwdWJsaWMgewoJCWlmIChhZGRyID09IGFkZHJlc3MoMCkpIHRocm93OwoJCW11bHRpc2lnRXRoZXIgPSBhZGRyOwoJfQoKCS8vIE1hbnVhbGx5IGJhY2sgVFJJQkUgb3duZXIgYWRkcmVzcy4KCWZ1bmN0aW9uIGNoYW5nZVRyaWJlT3duZXIoKSBvbmx5T3duZXIgcHVibGljIHsKCQljb2luLnRyYW5zZmVyT3duZXJzaGlwKG93bmVyKTsKCX0KCgkvLyBUcmFuc2ZlciByZW1haW5zIHRvIG93bmVyIGluIGNhc2UgaWYgaW1wb3NzaWJsZSB0byBkbyBtaW4gaW52ZXN0CiAgLy9USElTIENIQU5HRUQhISEKCWZ1bmN0aW9uIGdldENvaW5SZW1haW5zKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICB1aW50IHJlbWFpbnMgPSBjb2luLmJhbGFuY2VPZih0aGlzKTsKCgkJaWYoTUlOX0NBUCA8IGNvaW5TZW50VG9FdGhlcikgdGhyb3c7CgoJCUJhY2tlciBiYWNrZXIgPSBiYWNrZXJzW293bmVyXTsKCQljb2luLnRyYW5zZmVyKG93bmVyLCByZW1haW5zKTsgLy8gVHJhbnNmZXIgVFJJQkUgcmlnaHQgbm93IAoKCQliYWNrZXIuY29pblNlbnQgPSBiYWNrZXIuY29pblNlbnQuYWRkKHJlbWFpbnMpOwoKCQljb2luU2VudFRvRXRoZXIgPSBjb2luU2VudFRvRXRoZXIuYWRkKHJlbWFpbnMpOwoKCQkvLyBTZW5kIGV2ZW50cwoJCUxvZ0NvaW5zRW1pdGVkKHRoaXMgLHJlbWFpbnMpOwoJCUxvZ1JlY2VpdmVkRVRIKG93bmVyLCBldGhlclJlY2VpdmVkKTsKCX0KCgoJLy9SZWZ1bmQgZnVuY3Rpb24gd2hlbiBtaW5pbXVtIGNhcCBpc250IHJlYWNoZWQsIHRoaXMgaXMgc3RlcCBpcyBzdGVwIDIsIFRISVMgRlVOQ1RJT04gT05MWSBBVkFJTEFCTEUgSUYgTUlOIENBUCBOT1QgUkVBQ0hFRC4KICAvL1NURVAxOiBGcm9tIFRSSUJFIHRva2VuIGNvbnRyYWN0IHVzZSAiYXBwcm92ZSIgZnVuY3Rpb24gd2l0aCB0aGUgYW1vdW50IG9mIFRSSUJFIHlvdSBnb3QgaW4gdG90YWwuCiAgLy9TVEVQMjogRnJvbSBUUklCRSBjcm93ZHNhbGUgY29udHJhY3QgdXNlICJyZWZ1bmQiIGZ1bmN0aW9uIHdpdGggdGhlIGFtb3VudCBvZiBUUklCRSB5b3UgZ290IGluIHRvdGFsLgogIC8vU1RFUDM6IEZyb20gVFJJQkUgY3Jvd2RzYWxlIGNvbnRyYWN0IHVzZSAid2l0aGRyYXdQYXllbWVudCIgZnVuY3Rpb24gdG8gcmVjaWV2ZSB0aGUgRVRILgoJZnVuY3Rpb24gcmVmdW5kKHVpbnQgX3ZhbHVlKSBtaW5DYXBOb3RSZWFjaGVkIHB1YmxpYyB7CgkJCgkJaWYgKF92YWx1ZSAhPSBiYWNrZXJzW21zZy5zZW5kZXJdLmNvaW5TZW50KSB0aHJvdzsgLy8gY29tcGFyZSB2YWx1ZSBmcm9tIGJhY2tlciBiYWxhbmNlCgoJCWNvaW4udHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIGFkZHJlc3ModGhpcyksIF92YWx1ZSk7IC8vIGdldCB0aGUgdG9rZW4gYmFjayB0byB0aGUgY3Jvd2RzYWxlIGNvbnRyYWN0CgoJCXVpbnQgRVRIVG9TZW5kID0gYmFja2Vyc1ttc2cuc2VuZGVyXS53ZWlSZWNlaXZlZDsKCQliYWNrZXJzW21zZy5zZW5kZXJdLndlaVJlY2VpdmVkPTA7CgoJCWlmIChFVEhUb1NlbmQgPiAwKSB7CgkJCWFzeW5jU2VuZChtc2cuc2VuZGVyLCBFVEhUb1NlbmQpOyAvLyBwdWxsIHBheW1lbnQgdG8gZ2V0IHJlZnVuZCBpbiBFVEgKCQl9Cgl9Cgp9CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiID4gMCk7CiAgICB1aW50IGMgPSBhIC8gYjsKICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOwogICAgcmV0dXJuIGM7CiAgfQogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQogIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSB7CiAgICAgIHRocm93OwogICAgfQogIH0KfQ=='.
	

]
