Class {
	#name : #SRT08cdcf9ba0a4b5667f5a59b78b60fbefb145e64c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT08cdcf9ba0a4b5667f5a59b78b60fbefb145e64c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIC8qKgogICAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAgICovCiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmIChhID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAgICovCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICAgKi8KICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAgICovCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgovLy8gQHRpdGxlIEludGVyZmFjZSBmb3IgY29udHJhY3RzIGNvbmZvcm1pbmcgdG8gRVJDLTcyMTogTm9uLUZ1bmdpYmxlIFRva2Vucwpjb250cmFjdCBFUkM3MjEgewogICAgLy8gUmVxdWlyZWQgbWV0aG9kcwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIGFkZHIpOwogICAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBhcHByb3ZlZCwgdWludDI1NiB0b2tlbklkKTsKfQoKY29udHJhY3QgV29ybGRDdXBUb2tlbiBpcyBFUkM3MjEgewoKICAgIC8qKioqKi0tLS0tLSBFVkVOVFMgLS0tLS0qKioqKi8KICAgIC8vIEBkZXYgd2hlbmV2ZXIgYSB0b2tlbiBpcyBzb2xkLgogICAgZXZlbnQgV29ybGRDdXBUb2tlbldlcmVTb2xkKGFkZHJlc3MgaW5kZXhlZCBjdXJPd25lciwgdWludDI1NiBpbmRleGVkIHRva2VuSWQsIHVpbnQyNTYgb2xkUHJpY2UsIHVpbnQyNTYgbmV3UHJpY2UsIGFkZHJlc3MgaW5kZXhlZCBwcmV2T3duZXIsIHVpbnQyNTYgdHJhZGRpbmdUaW1lKTsvL2luZGV4ZWQKICAgIC8vIEBkZXYgd2hlbmV2ZXIgU2hhcmUgQm9udXMuCglldmVudCBTaGFyZUJvbnVzKGFkZHJlc3MgaW5kZXhlZCB0b093bmVyLCB1aW50MjU2IGluZGV4ZWQgdG9rZW5JZCwgdWludDI1NiBpbmRleGVkIHRyYWRkaW5nVGltZSwgdWludDI1NiByZW1haW5pbmdBbW91bnQpOwoJLy8gQGRldiBQcmVzZW50LiAKICAgIGV2ZW50IFByZXNlbnQoYWRkcmVzcyBpbmRleGVkIGZyb21BZGRyZXNzLCBhZGRyZXNzIGluZGV4ZWQgdG9BZGRyZXNzLCB1aW50MjU2IGFtb3VudCwgdWludDI1NiBwcmVzZW50VGltZSk7CiAgICAvLyBAZGV2IFRyYW5zZmVyIGV2ZW50IGFzIGRlZmluZWQgaW4gRVJDNzIxLiAKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB0b2tlbklkKTsKCiAgICAvKioqKiotLS0tLS0tIENPTlNUQU5UUyAtLS0tLS0tKioqKioqLwogICAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgd29ybGRDdXBJZFRvT3duZXJBZGRyZXNzOyAgLy9AZGV2IEEgbWFwcGluZyBmcm9tIHdvcmxkIGN1cCB0ZWFtIGlkIHRvIHRoZSBhZGRyZXNzIHRoYXQgb3ducyB0aGVtLiAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBvd25lckFkZHJlc3NUb1Rva2VuQ291bnQ7IC8vQGRldiBBIG1hcHBpbmcgZnJvbSBvd25lciBhZGRyZXNzIHRvIGNvdW50IG9mIHRva2VucyB0aGF0IGFkZHJlc3Mgb3ducy4KICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIHdvcmxkQ3VwSWRUb0FkZHJlc3NGb3JBcHByb3ZlZDsgLy8gQGRldiBBIG1hcHBpbmcgZnJvbSB0b2tlbiBpZCB0byBhbiBhZGRyZXNzIHRoYXQgaGFzIGJlZW4gYXBwcm92ZWQgdG8gY2FsbC4KICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSB3b3JsZEN1cElkVG9QcmljZTsgLy8gQGRldiBBIG1hcHBpbmcgZnJvbSB0b2tlbiBpZCB0byB0aGUgcHJpY2Ugb2YgdGhlIHRva2VuLgogICAgLy9tYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgd29ybGRDdXBJZFRvT2xkUHJpY2U7IC8vIEBkZXYgQSBtYXBwaW5nIGZyb20gdG9rZW4gaWQgdG8gdGhlIG9sZCBwcmljZSBvZiB0aGUgdG9rZW4uCiAgICBzdHJpbmdbXSBwcml2YXRlIHdvcmxkQ3VwVGVhbURlc2NyaWJlOwoJdWludDI1NiBwcml2YXRlIFNIQVJFX0JPTlVTX1RJTUUgPSB1aW50MjU2KG5vdyk7CiAgICBhZGRyZXNzIHB1YmxpYyBjZW9BZGRyZXNzOwogICAgYWRkcmVzcyBwdWJsaWMgY29vQWRkcmVzczsKCiAgICAvKioqKiotLS0tLS0tIE1PRElGSUVSUyAtLS0tLS0tKioqKioqLwogICAgbW9kaWZpZXIgb25seUNFTygpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Q0xldmVsKCkgewogICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyB8fAogICAgICAgICAgICBtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MKICAgICAgICApOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q0VPKGFkZHJlc3MgX25ld0NFTykgcHVibGljIG9ubHlDRU8gewogICAgICAgIHJlcXVpcmUoX25ld0NFTyAhPSBhZGRyZXNzKDApKTsKICAgICAgICBjZW9BZGRyZXNzID0gX25ld0NFTzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDT08oYWRkcmVzcyBfbmV3Q09PKSBwdWJsaWMgb25seUNFTyB7CiAgICAgICAgcmVxdWlyZShfbmV3Q09PICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGNvb0FkZHJlc3MgPSBfbmV3Q09POwogICAgfQoJCglmdW5jdGlvbiBkZXN0cm95KCkgcHVibGljIG9ubHlDRU8gewoJCXNlbGZkZXN0cnVjdChjZW9BZGRyZXNzKTsKICAgIH0KCQoJZnVuY3Rpb24gcGF5QWxsT3V0KCkgcHVibGljIG9ubHlDTGV2ZWwgewogICAgICAgY2VvQWRkcmVzcy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfQoKICAgIC8qKioqKi0tLS0tLS0gQ09OU1RSVUNUT1IgLS0tLS0tLSoqKioqKi8KICAgIGZ1bmN0aW9uIFdvcmxkQ3VwVG9rZW4oKSBwdWJsaWMgewogICAgICAgIGNlb0FkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIGNvb0FkZHJlc3MgPSBtc2cuc2VuZGVyOwoJICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IDMyOyBpKyspIHsKCQkgICAgdWludDI1NiBuZXdXb3JsZEN1cFRlYW1JZCA9IHdvcmxkQ3VwVGVhbURlc2NyaWJlLnB1c2goIkkgbG92ZSB3b3JsZCBjdXAhIikgLSAxOwogICAgICAgICAgICB3b3JsZEN1cElkVG9QcmljZVtuZXdXb3JsZEN1cFRlYW1JZF0gPSAwIGV0aGVyOy8vU2FmZU1hdGguc3ViKHVpbnQyNTYoMy4yIGV0aGVyKSwgU2FmZU1hdGgubXVsKHVpbnQyNTYoMC4xIGV0aGVyKSwgaSkpOwoJICAgICAgICAvL3dvcmxkQ3VwSWRUb09sZFByaWNlW25ld1dvcmxkQ3VwVGVhbUlkXSA9IDAgZXRoZXI7CiAgICAgICAgICAgIF90cmFuc2ZlcihhZGRyZXNzKDApLCBtc2cuc2VuZGVyLCBuZXdXb3JsZEN1cFRlYW1JZCk7CgkgICAgfQogICAgfQoKICAgIC8qKioqKi0tLS0tLS0gUFVCTElDIEZVTkNUSU9OUyAtLS0tLS0tKioqKioqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9pc093bmVyKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICAgICAgd29ybGRDdXBJZFRvQWRkcmVzc0ZvckFwcHJvdmVkW190b2tlbklkXSA9IF90bzsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICAgIH0KCiAgICAvLy8gRm9yIHF1ZXJ5aW5nIGJhbGFuY2Ugb2YgYSBwYXJ0aWN1bGFyIGFjY291bnQKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIG93bmVyQWRkcmVzc1RvVG9rZW5Db3VudFtfb3duZXJdOwogICAgfQoKICAgIC8vLyBAbm90aWNlIFJldHVybnMgYWxsIHRoZSB3b3JsZCBjdXAgdGVhbSBpbmZvcm1hdGlvbiBieSB0b2tlbiBpZC4KICAgIGZ1bmN0aW9uIGdldFdvcmxDdXBCeUlEKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyB3Y3REZXNjLCB1aW50MjU2IHNlbGxpbmdQcmljZSwgYWRkcmVzcyBvd25lcikgewogICAgICAgIHdjdERlc2MgPSB3b3JsZEN1cFRlYW1EZXNjcmliZVtfdG9rZW5JZF07CiAgICAgICAgc2VsbGluZ1ByaWNlID0gd29ybGRDdXBJZFRvUHJpY2VbX3Rva2VuSWRdOwogICAgICAgIG93bmVyID0gd29ybGRDdXBJZFRvT3duZXJBZGRyZXNzW190b2tlbklkXTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbXBsZW1lbnRzRVJDNzIxKCkgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICAgICAgcmV0dXJuICJXb3JsZEN1cFRva2VuIjsKICAgIH0KICAKICAgIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsKICAgICAgICByZXR1cm4gIldDVCI7CiAgICB9CgogICAgLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIG93bmVyKSB7CiAgICAgICAgb3duZXIgPSB3b3JsZEN1cElkVG9Pd25lckFkZHJlc3NbX3Rva2VuSWRdOwogICAgICAgIHJlcXVpcmUob3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmV0dXJuIG93bmVyOwogICAgfQogIAogICAgZnVuY3Rpb24gc2V0V29ybGRDdXBUZWFtRGVzYyh1aW50MjU2IF90b2tlbklkLCBzdHJpbmcgZGVzY09mT3duZXIpIHB1YmxpYyB7CiAgICAgICAgaWYob3duZXJPZihfdG9rZW5JZCkgPT0gbXNnLnNlbmRlcil7CgkgICAgICAgIHdvcmxkQ3VwVGVhbURlc2NyaWJlW190b2tlbklkXSA9IGRlc2NPZk93bmVyOwoJICAgIH0KICAgIH0KCgkvLy8gQWxsb3dzIHNvbWVvbmUgdG8gc2VuZCBldGhlciBhbmQgb2J0YWluIHRoZSB0b2tlbgogICAgLy8vZnVuY3Rpb24gUHJlc2VudFRvQ0VPKCkgcHVibGljIHBheWFibGUgewoJLy8vICAgIGNlb0FkZHJlc3MudHJhbnNmZXIobXNnLnZhbHVlKTsKCS8vLwlQcmVzZW50KG1zZy5zZW5kZXIsIGNlb0FkZHJlc3MsIG1zZy52YWx1ZSwgdWludDI1Nihub3cpKTsKCS8vL30KCQogICAgLy8gQWxsb3dzIHNvbWVvbmUgdG8gc2VuZCBldGhlciBhbmQgb2J0YWluIHRoZSB0b2tlbgogICAgZnVuY3Rpb24gYnV5V29ybGRDdXBUZWFtVG9rZW4odWludDI1NiBfdG9rZW5JZCkgcHVibGljIHBheWFibGUgewogICAgICAgIGFkZHJlc3Mgb2xkT3duZXIgPSB3b3JsZEN1cElkVG9Pd25lckFkZHJlc3NbX3Rva2VuSWRdOwogICAgICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHJlcXVpcmUob2xkT3duZXIgIT0gbmV3T3duZXIpOyAvLyBNYWtlIHN1cmUgdG9rZW4gb3duZXIgaXMgbm90IHNlbmRpbmcgdG8gc2VsZgogICAgICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKG5ld093bmVyKSk7IC8vU2FmZXR5IGNoZWNrIHRvIHByZXZlbnQgYWdhaW5zdCBhbiB1bmV4cGVjdGVkIDB4MCBkZWZhdWx0LgoKCSAgICB1aW50MjU2IG9sZFNvbGRQcmljZSA9IHdvcmxkQ3VwSWRUb1ByaWNlW190b2tlbklkXTsvL3dvcmxkQ3VwSWRUb09sZFByaWNlW190b2tlbklkXTsKCSAgICB1aW50MjU2IGRpZmZQcmljZSA9IFNhZmVNYXRoLnN1Yihtc2cudmFsdWUsIG9sZFNvbGRQcmljZSk7CgkgICAgdWludDI1NiBwcmljZU9mT2xkT3duZXIgPSBTYWZlTWF0aC5hZGQob2xkU29sZFByaWNlLCBTYWZlTWF0aC5kaXYoZGlmZlByaWNlLCAyKSk7CgkgICAgdWludDI1NiBwcmljZU9mRGV2ZWxvcCA9IFNhZmVNYXRoLmRpdihkaWZmUHJpY2UsIDQpOwoJICAgIHdvcmxkQ3VwSWRUb1ByaWNlW190b2tlbklkXSA9IG1zZy52YWx1ZTsvL1NhZmVNYXRoLmFkZChtc2cudmFsdWUsIFNhZmVNYXRoLmRpdihtc2cudmFsdWUsIDEwKSk7CgkgICAgLy93b3JsZEN1cElkVG9PbGRQcmljZVtfdG9rZW5JZF0gPSBtc2cudmFsdWU7CgogICAgICAgIF90cmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIF90b2tlbklkKTsKICAgICAgICBpZiAob2xkT3duZXIgIT0gYWRkcmVzcyh0aGlzKSkgewoJICAgICAgICBvbGRPd25lci50cmFuc2ZlcihwcmljZU9mT2xkT3duZXIpOwogICAgICAgIH0KCSAgICBjZW9BZGRyZXNzLnRyYW5zZmVyKHByaWNlT2ZEZXZlbG9wKTsKCSAgICBpZih0aGlzLmJhbGFuY2UgPj0gdWludDI1NigzLjIgZXRoZXIpKXsKICAgICAgICAgICAgaWYoKHVpbnQyNTYobm93KSAtIFNIQVJFX0JPTlVTX1RJTUUpID49IDg2NDAwKXsKCQkgICAgICAgIGZvcih1aW50MjU2IGk9MDsgaTwzMjsgaSsrKXsKCQkgICAgICAgICAgICB3b3JsZEN1cElkVG9Pd25lckFkZHJlc3NbaV0udHJhbnNmZXIoMC4xIGV0aGVyKTsKCQkJCQlTaGFyZUJvbnVzKHdvcmxkQ3VwSWRUb093bmVyQWRkcmVzc1tpXSwgaSwgdWludDI1Nihub3cpLCB0aGlzLmJhbGFuY2UpOwoJCSAgICAgICAgfQoJCQkgICAgU0hBUkVfQk9OVVNfVElNRSA9IHVpbnQyNTYobm93KTsKCQkJICAgIC8vU2hhcmVCb251cyhTSEFSRV9CT05VU19USU1FLCB0aGlzLmJhbGFuY2UpOwoJCSAgICB9CgkgICAgfQoJICAgIFdvcmxkQ3VwVG9rZW5XZXJlU29sZChuZXdPd25lciwgX3Rva2VuSWQsIG9sZFNvbGRQcmljZSwgbXNnLnZhbHVlLCBvbGRPd25lciwgdWludDI1Nihub3cpKTsKCX0KCiAgICBmdW5jdGlvbiBwcmljZU9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgcHJpY2UpIHsKICAgICAgICByZXR1cm4gd29ybGRDdXBJZFRvUHJpY2VbX3Rva2VuSWRdOwogICAgfQoKICAgIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7CiAgICAgICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYWRkcmVzcyBvbGRPd25lciA9IHdvcmxkQ3VwSWRUb093bmVyQWRkcmVzc1tfdG9rZW5JZF07CgogICAgICAgIC8vIFNhZmV0eSBjaGVjayB0byBwcmV2ZW50IGFnYWluc3QgYW4gdW5leHBlY3RlZCAweDAgZGVmYXVsdC4KICAgICAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChuZXdPd25lcikpOwoKICAgICAgICAvLyBNYWtpbmcgc3VyZSB0cmFuc2ZlciBpcyBhcHByb3ZlZAogICAgICAgIHJlcXVpcmUoX2FwcHJvdmVkKG5ld093bmVyLCBfdG9rZW5JZCkpOwoKICAgICAgICBfdHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfdG9rZW5JZCk7CiAgICB9CgogICAgZnVuY3Rpb24gdG9rZW5zT2ZPd25lcihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2W10gb3duZXJUb2tlbnMpIHsKICAgICAgICB1aW50MjU2IHRva2VuQ291bnQgPSBiYWxhbmNlT2YoX293bmVyKTsKICAgICAgICBpZiAodG9rZW5Db3VudCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgdWludDI1NltdKDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXSh0b2tlbkNvdW50KTsKICAgICAgICAgICAgdWludDI1NiB0b3RhbENhcnMgPSB0b3RhbFN1cHBseSgpOwogICAgICAgICAgICB1aW50MjU2IHJlc3VsdEluZGV4ID0gMDsKCiAgICAgICAgICAgIHVpbnQyNTYgY2FySWQ7CiAgICAgICAgICAgIGZvciAoY2FySWQgPSAwOyBjYXJJZCA8PSB0b3RhbENhcnM7IGNhcklkKyspIHsKICAgICAgICAgICAgICAgIGlmICh3b3JsZEN1cElkVG9Pd25lckFkZHJlc3NbY2FySWRdID09IF9vd25lcikgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRJbmRleF0gPSBjYXJJZDsKICAgICAgICAgICAgICAgICAgICByZXN1bHRJbmRleCsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgfQogIAogICAgZnVuY3Rpb24gZ2V0Q0VPKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBjZW9BZGRyKSB7CiAgICAgICAgcmV0dXJuIGNlb0FkZHJlc3M7CiAgICB9CgogICAgLy9SZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKSB7CiAgICAgICAgcmV0dXJuIHdvcmxkQ3VwVGVhbURlc2NyaWJlLmxlbmd0aDsKICAgIH0KICAKICAgIC8vcmV0dXJuIEJvbnVzUG9vbCAkCiAgICBmdW5jdGlvbiBnZXRCb251c1Bvb2woKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZTsKICAgIH0KICAKICAgIGZ1bmN0aW9uIGdldFRpbWVGcm9tUHJpemUoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHVpbnQyNTYobm93KSAtIFNIQVJFX0JPTlVTX1RJTUU7CiAgICB9CgogICAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX2lzT3duZXIobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKICAgICAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChfdG8pKTsKCiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogICAgfQoKICAgIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfaXNPd25lcihfZnJvbSwgX3Rva2VuSWQpKTsKICAgICAgICByZXF1aXJlKF9hcHByb3ZlZChfdG8sIF90b2tlbklkKSk7CiAgICAgICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CgogICAgICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CgogICAgLyoqKioqKioqLS0tLS0tLS0tLS0gUFJJVkFURSBGVU5DVElPTlMgLS0tLS0tLS0tLS0tKioqKioqKiovCiAgICBmdW5jdGlvbiBfYWRkcmVzc05vdE51bGwoYWRkcmVzcyBfdG8pIHByaXZhdGUgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIF90byAhPSBhZGRyZXNzKDApOwogICAgfQoKICAgIGZ1bmN0aW9uIF9hcHByb3ZlZChhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gd29ybGRDdXBJZFRvQWRkcmVzc0ZvckFwcHJvdmVkW190b2tlbklkXSA9PSBfdG87CiAgICB9CgogICAgZnVuY3Rpb24gX2lzT3duZXIoYWRkcmVzcyBjaGVja0FkZHJlc3MsIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGNoZWNrQWRkcmVzcyA9PSB3b3JsZEN1cElkVG9Pd25lckFkZHJlc3NbX3Rva2VuSWRdOwogICAgfQoKICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICAgICAgb3duZXJBZGRyZXNzVG9Ub2tlbkNvdW50W190b10rKzsKICAgICAgICB3b3JsZEN1cElkVG9Pd25lckFkZHJlc3NbX3Rva2VuSWRdID0gX3RvOyAgLy90cmFuc2ZlciBvd25lcnNoaXAKCiAgICAgICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXJBZGRyZXNzVG9Ub2tlbkNvdW50W19mcm9tXS0tOwogICAgICAgICAgICBkZWxldGUgd29ybGRDdXBJZFRvQWRkcmVzc0ZvckFwcHJvdmVkW190b2tlbklkXTsKICAgICAgICB9CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogICAgfQp9'.
	

]
