Class {
	#name : #SRT5df4bea3540899a33c76c4d25108f4fe2ca89044,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5df4bea3540899a33c76c4d25108f4fe2ca89044 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBSUFMgewogICAgZW51bSBTdGF0ZSB7IFVucmVhbGl6ZWQsIENyZWF0ZWQsIEpvaW5lZCwgRW5kZWQgfQogICAgZW51bSBSZXN1bHQgeyBVbmZpbmlzaGVkLCBEcmF3LCBXaW4sIExvc3MsIEZvcmZlaXQgfSAvLyBGcm9tIHRoZSBwZXJzcGVjdGl2ZSBvZiBwbGF5ZXIgMQogICAgc3RydWN0IEdhbWUgewogICAgICAgIGFkZHJlc3MgcGxheWVyMTsKICAgICAgICBhZGRyZXNzIHBsYXllcjI7CiAgICAgICAgdWludCB2YWx1ZTsKICAgICAgICBieXRlczMyIGhpZGRlbk1vdmUxOwogICAgICAgIHVpbnQ4IG1vdmUxOyAvLyAwID0gbm90IHNldCwgMSA9IFJvY2ssIDIgPSBQYXBlciwgMyA9IFNjaXNzb3JzCiAgICAgICAgdWludDggbW92ZTI7CiAgICAgICAgdWludCBnYW1lU3RhcnQ7CiAgICAgICAgU3RhdGUgc3RhdGU7CiAgICAgICAgUmVzdWx0IHJlc3VsdDsKICAgIH0KICAgIAogICAgYWRkcmVzcyBwdWJsaWMgb3duZXIxOwogICAgYWRkcmVzcyBwdWJsaWMgb3duZXIyOwogICAgdWludDggY29uc3RhbnQgZmVlRGl2aXNvciA9IDEwMDsKICAgIHVpbnQgY29uc3RhbnQgcmV2ZWFsVGltZSA9IDcgZGF5czsgLy8gVE9ETzogZHluYW1pYyByZXZlYWwgdGltZXM/CiAgICBib29sIHBhdXNlZDsKICAgIGJvb2wgZXhwaXJlZDsKICAgIHVpbnQgZ2FtZUlkQ291bnRlcjsKICAgIAogICAgdWludCBjb25zdGFudCBtaW5pbXVtTmFtZUxlbmd0aCA9IDE7CiAgICB1aW50IGNvbnN0YW50IG1heGltdW1OYW1lTGVuZ3RoID0gMjU7CiAgICAKICAgIGV2ZW50IE5ld05hbWUoYWRkcmVzcyBpbmRleGVkIHBsYXllciwgc3RyaW5nIG5hbWUpOwogICAgZXZlbnQgRG9uYXRlKGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIsIHVpbnQgYW1vdW50KTsKICAgIGV2ZW50IERlcG9zaXQoYWRkcmVzcyBpbmRleGVkIHBsYXllciwgdWludCBhbW91bnQpOwogICAgZXZlbnQgV2l0aGRyYXcoYWRkcmVzcyBpbmRleGVkIHBsYXllciwgdWludCBhbW91bnQpOwogICAgZXZlbnQgR2FtZUNyZWF0ZWQoYWRkcmVzcyBpbmRleGVkIHBsYXllcjEsIGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIyLCB1aW50IGluZGV4ZWQgZ2FtZUlkLCB1aW50IHZhbHVlLCBieXRlczMyIGhpZGRlbk1vdmUxKTsKICAgIGV2ZW50IEdhbWVKb2luZWQoYWRkcmVzcyBpbmRleGVkIHBsYXllcjEsIGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIyLCB1aW50IGluZGV4ZWQgZ2FtZUlkLCB1aW50IHZhbHVlLCB1aW50OCBtb3ZlMiwgdWludCBnYW1lU3RhcnQpOwogICAgZXZlbnQgR2FtZUVuZGVkKGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIxLCBhZGRyZXNzIGluZGV4ZWQgcGxheWVyMiwgdWludCBpbmRleGVkIGdhbWVJZCwgdWludCB2YWx1ZSwgUmVzdWx0IHJlc3VsdCk7CiAgICAKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYmFsYW5jZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIHRvdGFsV29uOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyB0b3RhbExvc3Q7CiAgICAKICAgIEdhbWUgW10gcHVibGljIGdhbWVzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHN0cmluZykgcHVibGljIHBsYXllck5hbWVzOwogICAgbWFwcGluZyh1aW50ID0+IGJvb2wpIHB1YmxpYyBuYW1lVGFrZW47CiAgICBtYXBwaW5nKGJ5dGVzMzIgPT4gYm9vbCkgcHVibGljIHNlY3JldFRha2VuOwogICAgCiAgICBtb2RpZmllciBvbmx5T3duZXIgeyByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIxIHx8IG1zZy5zZW5kZXIgPT0gb3duZXIyKTsgXzsgfQogICAgbW9kaWZpZXIgbm90UGF1c2VkIHsgcmVxdWlyZSghcGF1c2VkKTsgXzsgfQogICAgbW9kaWZpZXIgbm90RXhwaXJlZCB7IHJlcXVpcmUoIWV4cGlyZWQpOyBfOyB9CiAgICAKCiAgICBmdW5jdGlvbiBSUFMoYWRkcmVzcyBvdGhlck93bmVyKSB7CiAgICAgICAgb3duZXIxID0gbXNnLnNlbmRlcjsKICAgICAgICBvd25lcjIgPSBvdGhlck93bmVyOwogICAgICAgIHBhdXNlZCA9IHRydWU7CiAgICB9CiAgICAKICAgIC8vIFVUSUxJWSBGVU5DVElPTlMKICAgIC8vCiAgICAvLyBGT1IgRE9JTkcgQk9SSU5HIFJFUEVUSVRJVkUgVEFTS1MKICAgIAogICAgZnVuY3Rpb24gZ2V0R2FtZXMoKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChHYW1lIFtdKSB7CiAgICAgICAgcmV0dXJuIGdhbWVzOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0b3RhbFByb2ZpdChhZGRyZXNzIHBsYXllcikgY29uc3RhbnQgcmV0dXJucyAoaW50KSB7CiAgICAgICAgaWYgKHRvdGFsTG9zdFtwbGF5ZXJdID4gdG90YWxXb25bcGxheWVyXSkgewogICAgICAgICAgICByZXR1cm4gLWludCh0b3RhbExvc3RbcGxheWVyXSAtIHRvdGFsV29uW3BsYXllcl0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGludCh0b3RhbFdvbltwbGF5ZXJdIC0gdG90YWxMb3N0W3BsYXllcl0pOwogICAgICAgIH0KICAgIH0KICAgIC8vIEZ1enp5IGhhc2ggYW5kIG5hbWUgdmFsaWRhdGlvbiB0YWtlbiBmcm9tIEtpbmcgb2YgdGhlIEV0aGVyIFRocm9uZQogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2tpZXJhbmVsYnkvS2luZ09mVGhlRXRoZXJUaHJvbmUvYmxvYi92MS4wL2NvbnRyYWN0cy9LaW5nT2ZUaGVFdGhlclRocm9uZS5zb2wKICAgIAogICAgZnVuY3Rpb24gY29tcHV0ZU5hbWVGdXp6eUhhc2goc3RyaW5nIF9uYW1lKSBjb25zdGFudCBpbnRlcm5hbAogICAgcmV0dXJucyAodWludCBmdXp6eUhhc2gpIHsKICAgICAgICBieXRlcyBtZW1vcnkgbmFtZUJ5dGVzID0gYnl0ZXMoX25hbWUpOwogICAgICAgIHVpbnQgaCA9IDA7CiAgICAgICAgdWludCBsZW4gPSBuYW1lQnl0ZXMubGVuZ3RoOwogICAgICAgIGlmIChsZW4gPiBtYXhpbXVtTmFtZUxlbmd0aCkgewogICAgICAgICAgICBsZW4gPSBtYXhpbXVtTmFtZUxlbmd0aDsKICAgICAgICB9CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgdWludCBtdWwgPSAxMjg7CiAgICAgICAgICAgIGJ5dGUgYiA9IG5hbWVCeXRlc1tpXTsKICAgICAgICAgICAgdWludCB1YiA9IHVpbnQoYik7CiAgICAgICAgICAgIGlmIChiID49IDQ4ICYmIGIgPD0gNTcpIHsKICAgICAgICAgICAgICAgIC8vIDAtOQogICAgICAgICAgICAgICAgaCA9IGggKiBtdWwgKyB1YjsKICAgICAgICAgICAgfSBlbHNlIGlmIChiID49IDY1ICYmIGIgPD0gOTApIHsKICAgICAgICAgICAgICAgIC8vIEEtWgogICAgICAgICAgICAgICAgaCA9IGggKiBtdWwgKyB1YjsKICAgICAgICAgICAgfSBlbHNlIGlmIChiID49IDk3ICYmIGIgPD0gMTIyKSB7CiAgICAgICAgICAgICAgICAvLyBmb2xkIGEteiB0byBBLVoKICAgICAgICAgICAgICAgIHVpbnQgdXBwZXIgPSB1YiAtIDMyOwogICAgICAgICAgICAgICAgaCA9IGggKiBtdWwgKyB1cHBlcjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBvdGhlcnMKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gaDsKICAgIH0KICAgIC8vLyBAcmV0dXJuIFRydWUgaWYtYW5kLW9ubHktaWYgYF9uYW1lX2AgbWVldHMgdGhlIGNyaXRlcmlhCiAgICAvLy8gYmVsb3csIG9yIGZhbHNlIG90aGVyd2lzZToKICAgIC8vLyAgIC0gbm8gZmV3ZXIgdGhhbiAxIGNoYXJhY3RlcgogICAgLy8vICAgLSBubyBtb3JlIHRoYW4gMjUgY2hhcmFjdGVycwogICAgLy8vICAgLSBubyBjaGFyYWN0ZXJzIG90aGVyIHRoYW46CiAgICAvLy8gICAgIC0gInJvbWFuIiBhbHBoYWJldCBsZXR0ZXJzIChBLVogYW5kIGEteikKICAgIC8vLyAgICAgLSB3ZXN0ZXJuIGRpZ2l0cyAoMC05KQogICAgLy8vICAgICAtICJzYWZlIiBwdW5jdHVhdGlvbjogISAoICkgLSAuIF8gU1BBQ0UKICAgIC8vLyAgIC0gYXQgbGVhc3Qgb25lIG5vbi1wdW5jdHVhdGlvbiBjaGFyYWN0ZXIKICAgIC8vLyBOb3RlIHRoYXQgd2UgZGVsaWJlcmF0ZWx5IGV4Y2x1ZGUgY2hhcmFjdGVycyB3aGljaCBtYXkgY2F1c2UKICAgIC8vLyBzZWN1cml0eSBwcm9ibGVtcyBmb3Igd2Vic2l0ZXMgYW5kIGRhdGFiYXNlcyBpZiBlc2NhcGluZyBpcwogICAgLy8vIG5vdCBwZXJmb3JtZWQgY29ycmVjdGx5LCBzdWNoIGFzIDwgPiAiIGFuZCAnLgogICAgLy8vIEFwb2xvZ2llcyBmb3IgdGhlIGxhY2sgb2Ygbm9uLUVuZ2xpc2ggbGFuZ3VhZ2Ugc3VwcG9ydC4KICAgIGZ1bmN0aW9uIHZhbGlkYXRlTmFtZUludGVybmFsKHN0cmluZyBfbmFtZSkgY29uc3RhbnQgaW50ZXJuYWwKICAgIHJldHVybnMgKGJvb2wgYWxsb3dlZCkgewogICAgICAgIGJ5dGVzIG1lbW9yeSBuYW1lQnl0ZXMgPSBieXRlcyhfbmFtZSk7CiAgICAgICAgdWludCBsZW5ndGhCeXRlcyA9IG5hbWVCeXRlcy5sZW5ndGg7CiAgICAgICAgaWYgKGxlbmd0aEJ5dGVzIDwgbWluaW11bU5hbWVMZW5ndGggfHwKICAgICAgICAgICAgbGVuZ3RoQnl0ZXMgPiBtYXhpbXVtTmFtZUxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGJvb2wgZm91bmROb25QdW5jdHVhdGlvbiA9IGZhbHNlOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGxlbmd0aEJ5dGVzOyBpKyspIHsKICAgICAgICAgICAgYnl0ZSBiID0gbmFtZUJ5dGVzW2ldOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAoYiA+PSA0OCAmJiBiIDw9IDU3KSB8fCAvLyAwIC0gOQogICAgICAgICAgICAgICAgKGIgPj0gNjUgJiYgYiA8PSA5MCkgfHwgLy8gQSAtIFoKICAgICAgICAgICAgICAgIChiID49IDk3ICYmIGIgPD0gMTIyKSAgIC8vIGEgLSB6CiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgZm91bmROb25QdW5jdHVhdGlvbiA9IHRydWU7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBiID09IDMyIHx8IC8vIHNwYWNlCiAgICAgICAgICAgICAgICBiID09IDMzIHx8IC8vICEKICAgICAgICAgICAgICAgIGIgPT0gNDAgfHwgLy8gKAogICAgICAgICAgICAgICAgYiA9PSA0MSB8fCAvLyApCiAgICAgICAgICAgICAgICBiID09IDQ1IHx8IC8vIC0KICAgICAgICAgICAgICAgIGIgPT0gNDYgfHwgLy8gLgogICAgICAgICAgICAgICAgYiA9PSA5NSAgICAvLyBfCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZm91bmROb25QdW5jdHVhdGlvbjsKICAgIH0KICAgIAogICAgCiAgICAvLy8gaWYgeW91IHdhbnQgdG8gZG9uYXRlLCBwbGVhc2UgdXNlIHRoZSBkb25hdGUgZnVuY3Rpb24KICAgIGZ1bmN0aW9uKCkgeyByZXF1aXJlKGZhbHNlKTsgfQogICAgCiAgICAvLyBQTEFZRVIgRlVOQ1RJT05TCiAgICAvLwogICAgLy8gRk9SIFBMQVlFUlMKICAgIAogICAgLy8vIE5hbWUgbXVzdCBvbmx5IGluY2x1ZGUgdXBwZXIgYW5kIGxvd2VyY2FzZSBFbmdsaXNoIGxldHRlcnMsCiAgICAvLy8gbnVtYmVycywgYW5kIGNlcnRhaW4gY2hhcmFjdGVyczogISAoICkgLSAuIF8gU1BBQ0UKICAgIC8vLyBGdW5jdGlvbiB3aWxsIHJldHVybiBmYWxzZSBpZiB0aGUgbmFtZSBpcyBub3QgdmFsaWQKICAgIC8vLyBvciBpZiBpdCdzIHRvbyBzaW1pbGFyIHRvIGEgbmFtZSB0aGF0J3MgYWxyZWFkeSB0YWtlbi4KICAgIGZ1bmN0aW9uIHNldE5hbWUoc3RyaW5nIG5hbWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUgKHZhbGlkYXRlTmFtZUludGVybmFsKG5hbWUpKTsKICAgICAgICB1aW50IGZ1enp5SGFzaCA9IGNvbXB1dGVOYW1lRnV6enlIYXNoKG5hbWUpOwogICAgICAgIHVpbnQgb2xkRnV6enlIYXNoOwogICAgICAgIHN0cmluZyBzdG9yYWdlIG9sZE5hbWUgPSBwbGF5ZXJOYW1lc1ttc2cuc2VuZGVyXTsKICAgICAgICBib29sIG9sZE5hbWVFbXB0eSA9IGJ5dGVzKG9sZE5hbWUpLmxlbmd0aCA9PSAwOwogICAgICAgIGlmIChuYW1lVGFrZW5bZnV6enlIYXNoXSkgewogICAgICAgICAgICByZXF1aXJlKCFvbGROYW1lRW1wdHkpOwogICAgICAgICAgICBvbGRGdXp6eUhhc2ggPSBjb21wdXRlTmFtZUZ1enp5SGFzaChvbGROYW1lKTsKICAgICAgICAgICAgcmVxdWlyZShmdXp6eUhhc2ggPT0gb2xkRnV6enlIYXNoKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmICghb2xkTmFtZUVtcHR5KSB7CiAgICAgICAgICAgICAgICBvbGRGdXp6eUhhc2ggPSBjb21wdXRlTmFtZUZ1enp5SGFzaChvbGROYW1lKTsKICAgICAgICAgICAgICAgIG5hbWVUYWtlbltvbGRGdXp6eUhhc2hdID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmFtZVRha2VuW2Z1enp5SGFzaF0gPSB0cnVlOwogICAgICAgIH0KICAgICAgICBwbGF5ZXJOYW1lc1ttc2cuc2VuZGVyXSA9IG5hbWU7CgogICAgICAgIE5ld05hbWUobXNnLnNlbmRlciwgbmFtZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vewogICAgLy8vIENyZWF0ZSBhIGdhbWUgdGhhdCBtYXkgYmUgam9pbmVkIG9ubHkgYnkgdGhlIGFkZHJlc3MgcHJvdmlkZWQuCiAgICAvLy8gSWYgbm8gYWRkcmVzcyBpcyBwcm92aWRlZCwgdGhlIGdhbWUgaXMgb3BlbiB0byBhbnlvbmUuCiAgICAvLy8gWW91ciBiZXQgaXMgZXF1YWwgdG8gdGhlIHZhbHVlIHNlbnQgdG9nZXRoZXIKICAgIC8vLyB3aXRoIHRoaXMgdHJhbnNhY3Rpb24uIElmIHRoZSBnYW1lIGlzIGEgZHJhdywKICAgIC8vLyB5b3VyIGJldCB3aWxsIGJlIGF2YWlsYWJsZSBmb3Igd2l0aGRyYXdhbC4KICAgIC8vLyBJZiB5b3Ugd2luLCBib3RoIGJldHMgbWludXMgdGhlIGZlZSB3aWxsIGJlIHNlbmQgdG8geW91LgogICAgLy8vIFRoZSBmaXJzdCBhcmd1bWVudCBzaG91bGQgYmUgdGhlIG51bWJlcgogICAgLy8vIG9mIHlvdXIgbW92ZSAocm9jazogMSwgcGFwZXI6IDIsIHNjaXNzb3JzOiAzKQogICAgLy8vIGVuY3J5cHRlZCB3aXRoIGtlY2NhazI1Nih1aW50IG1vdmUsIHN0cmluZyBzZWNyZXQpIGFuZAogICAgLy8vIHNhdmUgdGhlIHNlY3JldCBzbyB5b3UgY2FuIHJldmVhbCB5b3VyIG1vdmUKICAgIC8vLyBhZnRlciB5b3VyIGdhbWUgaXMgam9pbmVkLgogICAgLy8vIEl0J3MgdmVyeSBlYXN5IHRvIG1lc3MgdXAgdGhlIHBhZGRpbmcgYW5kIHN0dWZmLAogICAgLy8vIHNvIHlvdSBzaG91bGQganVzdCB1c2UgdGhlIHdlYnNpdGUuCiAgICAvL30KICAgIGZ1bmN0aW9uIGNyZWF0ZUdhbWUoYnl0ZXMzMiBtb3ZlLCB1aW50IHZhbCwgYWRkcmVzcyBwbGF5ZXIyKQogICAgcGF5YWJsZSBub3RQYXVzZWQgbm90RXhwaXJlZCByZXR1cm5zICh1aW50IGdhbWVJZCkgewogICAgICAgIGRlcG9zaXQoKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IHZhbCk7CiAgICAgICAgcmVxdWlyZSghc2VjcmV0VGFrZW5bbW92ZV0pOwogICAgICAgIHNlY3JldFRha2VuW21vdmVdID0gdHJ1ZTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSB2YWw7CiAgICAgICAgZ2FtZUlkID0gZ2FtZUlkQ291bnRlcjsKICAgICAgICBnYW1lcy5wdXNoKEdhbWUobXNnLnNlbmRlciwgcGxheWVyMiwgdmFsLCBtb3ZlLCAwLCAwLCAwLCBTdGF0ZS5DcmVhdGVkLCBSZXN1bHQoMCkpKTsKCiAgICAgICAgR2FtZUNyZWF0ZWQobXNnLnNlbmRlciwgcGxheWVyMiwgZ2FtZUlkLCB2YWwsIG1vdmUpOwogICAgICAgIGdhbWVJZENvdW50ZXIrKzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWJvcnRHYW1lKHVpbnQgZ2FtZUlkKSBub3RQYXVzZWQgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgR2FtZSBzdG9yYWdlIHRoaXNHYW1lID0gZ2FtZXNbZ2FtZUlkXTsKICAgICAgICByZXF1aXJlKHRoaXNHYW1lLnBsYXllcjEgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZSh0aGlzR2FtZS5zdGF0ZSA9PSBTdGF0ZS5DcmVhdGVkKTsKICAgICAgICB0aGlzR2FtZS5zdGF0ZSA9IFN0YXRlLkVuZGVkOwoKICAgICAgICBHYW1lRW5kZWQodGhpc0dhbWUucGxheWVyMSwgdGhpc0dhbWUucGxheWVyMiwgZ2FtZUlkLCB0aGlzR2FtZS52YWx1ZSwgUmVzdWx0KDApKTsKCiAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcih0aGlzR2FtZS52YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGpvaW5HYW1lKHVpbnQgZ2FtZUlkLCB1aW50OCBtb3ZlKSBwYXlhYmxlIG5vdFBhdXNlZCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBHYW1lIHN0b3JhZ2UgdGhpc0dhbWUgPSBnYW1lc1tnYW1lSWRdOwogICAgICAgIHJlcXVpcmUodGhpc0dhbWUuc3RhdGUgPT0gU3RhdGUuQ3JlYXRlZCk7CiAgICAgICAgcmVxdWlyZShtb3ZlID4gMCAmJiBtb3ZlIDw9IDMpOwogICAgICAgIGlmICh0aGlzR2FtZS5wbGF5ZXIyID09IDB4MCkgewogICAgICAgICAgICB0aGlzR2FtZS5wbGF5ZXIyID0gbXNnLnNlbmRlcjsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUodGhpc0dhbWUucGxheWVyMiA9PSBtc2cuc2VuZGVyKTsKICAgICAgICB9CiAgICAgICAgcmVxdWlyZSh0aGlzR2FtZS52YWx1ZSA9PSBtc2cudmFsdWUpOwogICAgICAgIHRoaXNHYW1lLmdhbWVTdGFydCA9IG5vdzsKICAgICAgICB0aGlzR2FtZS5zdGF0ZSA9IFN0YXRlLkpvaW5lZDsKICAgICAgICB0aGlzR2FtZS5tb3ZlMiA9IG1vdmU7CgogICAgICAgIEdhbWVKb2luZWQodGhpc0dhbWUucGxheWVyMSwgdGhpc0dhbWUucGxheWVyMiwgZ2FtZUlkLCB0aGlzR2FtZS52YWx1ZSwgdGhpc0dhbWUubW92ZTIsIHRoaXNHYW1lLmdhbWVTdGFydCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJldmVhbE1vdmUodWludCBnYW1lSWQsIHVpbnQ4IG1vdmUsIHN0cmluZyBzZWNyZXQpIG5vdFBhdXNlZCByZXR1cm5zIChSZXN1bHQgcmVzdWx0KSB7CiAgICAgICAgR2FtZSBzdG9yYWdlIHRoaXNHYW1lID0gZ2FtZXNbZ2FtZUlkXTsKICAgICAgICByZXF1aXJlKHRoaXNHYW1lLnN0YXRlID09IFN0YXRlLkpvaW5lZCk7CiAgICAgICAgcmVxdWlyZSh0aGlzR2FtZS5wbGF5ZXIxID09IG1zZy5zZW5kZXIpOwogICAgICAgIHJlcXVpcmUodGhpc0dhbWUuZ2FtZVN0YXJ0ICsgcmV2ZWFsVGltZSA+PSBub3cpOyAvLyBJdCdzIG5vdCB0b28gbGF0ZSB0byByZXZlYWwKICAgICAgICByZXF1aXJlKHRoaXNHYW1lLmhpZGRlbk1vdmUxID09IGtlY2NhazI1Nih1aW50KG1vdmUpLCBzZWNyZXQpKTsKICAgICAgICB0aGlzR2FtZS5tb3ZlMSA9IG1vdmU7CiAgICAgICAgaWYgKG1vdmUgPiAwICYmIG1vdmUgPD0gMykgewogICAgICAgICAgICByZXN1bHQgPSBSZXN1bHQoKCgzICsgbW92ZSAtIHRoaXNHYW1lLm1vdmUyKSAlIDMpICsgMSk7IC8vIEl0IHdvcmtzIHRydXN0IG1lIChpdCdzICdjYXVzZSBvZiBtYXRoKQogICAgICAgIH0KICAgICAgICBlbHNlIHsgLy8gUGxheWVyIDEgc3VibWl0dGVkIGludmFsaWQgbW92ZQogICAgICAgICAgICByZXN1bHQgPSBSZXN1bHQuTG9zczsKICAgICAgICB9CiAgICAgICAgdGhpc0dhbWUuc3RhdGUgPSBTdGF0ZS5FbmRlZDsKICAgICAgICBhZGRyZXNzIHdpbm5lcjsKICAgICAgICBpZiAocmVzdWx0ID09IFJlc3VsdC5EcmF3KSB7CiAgICAgICAgICAgIGJhbGFuY2VzW3RoaXNHYW1lLnBsYXllcjFdICs9IHRoaXNHYW1lLnZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1t0aGlzR2FtZS5wbGF5ZXIyXSArPSB0aGlzR2FtZS52YWx1ZTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmIChyZXN1bHQgPT0gUmVzdWx0LldpbikgewogICAgICAgICAgICAgICAgd2lubmVyID0gdGhpc0dhbWUucGxheWVyMTsKICAgICAgICAgICAgICAgIHRvdGFsTG9zdFt0aGlzR2FtZS5wbGF5ZXIyXSArPSB0aGlzR2FtZS52YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHdpbm5lciA9IHRoaXNHYW1lLnBsYXllcjI7CiAgICAgICAgICAgICAgICB0b3RhbExvc3RbdGhpc0dhbWUucGxheWVyMV0gKz0gdGhpc0dhbWUudmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdWludCBmZWUgPSAodGhpc0dhbWUudmFsdWUpIC8gZmVlRGl2aXNvcjsgLy8gMC41JSBmZWUgdGFrZW4gb25jZSBmb3IgZWFjaCBvd25lcgogICAgICAgICAgICBiYWxhbmNlc1tvd25lcjFdICs9IGZlZTsKICAgICAgICAgICAgYmFsYW5jZXNbb3duZXIyXSArPSBmZWU7CiAgICAgICAgICAgIHRvdGFsV29uW3dpbm5lcl0gKz0gdGhpc0dhbWUudmFsdWUgLSBmZWUqMjsKICAgICAgICAgICAgLy8gTm8gcmUtZW50cmFuY3kgYXR0YWNrIGlzIHBvc3NpYmxlIGJlY2F1c2UKICAgICAgICAgICAgLy8gdGhlIHN0YXRlIGhhcyBhbHJlYWR5IGJlZW4gc2V0IHRvIFN0YXRlLkVuZGVkCiAgICAgICAgICAgIHdpbm5lci50cmFuc2ZlcigodGhpc0dhbWUudmFsdWUqMikgLSBmZWUqMik7CiAgICAgICAgfQogICAgICAgIHRoaXNHYW1lLnJlc3VsdCA9IHJlc3VsdDsKCiAgICAgICAgR2FtZUVuZGVkKHRoaXNHYW1lLnBsYXllcjEsIHRoaXNHYW1lLnBsYXllcjIsIGdhbWVJZCwgdGhpc0dhbWUudmFsdWUsIHJlc3VsdCk7CiAgICB9CiAgICAKICAgIC8vLyBVc2UgdGhpcyB3aGVuIHlvdSBrbm93IHlvdSd2ZSBsb3N0IGFzIHBsYXllciAxIGFuZAogICAgLy8vIHlvdSBkb24ndCB3YW50IHRvIGJvdGhlciB3aXRoIHJldmVhbGluZyB5b3VyIG1vdmUuCiAgICBmdW5jdGlvbiBmb3JmZWl0R2FtZSh1aW50IGdhbWVJZCkgbm90UGF1c2VkIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIEdhbWUgc3RvcmFnZSB0aGlzR2FtZSA9IGdhbWVzW2dhbWVJZF07CiAgICAgICAgcmVxdWlyZSh0aGlzR2FtZS5zdGF0ZSA9PSBTdGF0ZS5Kb2luZWQpOwogICAgICAgIHJlcXVpcmUodGhpc0dhbWUucGxheWVyMSA9PSBtc2cuc2VuZGVyKTsKICAgICAgICAKICAgICAgICB1aW50IGZlZSA9ICh0aGlzR2FtZS52YWx1ZSkgLyBmZWVEaXZpc29yOyAvLyAwLjUlIGZlZSB0YWtlbiBvbmNlIGZvciBlYWNoIG93bmVyCiAgICAgICAgYmFsYW5jZXNbb3duZXIxXSArPSBmZWU7CiAgICAgICAgYmFsYW5jZXNbb3duZXIyXSArPSBmZWU7CiAgICAgICAgdG90YWxMb3N0W3RoaXNHYW1lLnBsYXllcjFdICs9IHRoaXNHYW1lLnZhbHVlOwogICAgICAgIHRvdGFsV29uW3RoaXNHYW1lLnBsYXllcjJdICs9IHRoaXNHYW1lLnZhbHVlIC0gZmVlKjI7CiAgICAgICAgdGhpc0dhbWUuc3RhdGUgPSBTdGF0ZS5FbmRlZDsKICAgICAgICB0aGlzR2FtZS5yZXN1bHQgPSBSZXN1bHQuRm9yZmVpdDsgLy8gTG9zcyBmb3IgcGxheWVyIDEKCiAgICAgICAgR2FtZUVuZGVkKHRoaXNHYW1lLnBsYXllcjEsIHRoaXNHYW1lLnBsYXllcjIsIGdhbWVJZCwgdGhpc0dhbWUudmFsdWUsIHRoaXNHYW1lLnJlc3VsdCk7CiAgICAgICAgCiAgICAgICAgdGhpc0dhbWUucGxheWVyMi50cmFuc2ZlcigodGhpc0dhbWUudmFsdWUqMikgLSBmZWUqMik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNsYWltR2FtZSh1aW50IGdhbWVJZCkgbm90UGF1c2VkIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIEdhbWUgc3RvcmFnZSB0aGlzR2FtZSA9IGdhbWVzW2dhbWVJZF07CiAgICAgICAgcmVxdWlyZSh0aGlzR2FtZS5zdGF0ZSA9PSBTdGF0ZS5Kb2luZWQpOwogICAgICAgIHJlcXVpcmUodGhpc0dhbWUucGxheWVyMiA9PSBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKHRoaXNHYW1lLmdhbWVTdGFydCArIHJldmVhbFRpbWUgPCBub3cpOyAvLyBQbGF5ZXIgMSBoYXMgZmFpbGVkIHRvIHJldmVhbCBpbiB0aW1lCiAgICAgICAgCiAgICAgICAgdWludCBmZWUgPSAodGhpc0dhbWUudmFsdWUpIC8gZmVlRGl2aXNvcjsgLy8gMC41JSBmZWUgdGFrZW4gb25jZSBmb3IgZWFjaCBvd25lcgogICAgICAgIGJhbGFuY2VzW293bmVyMV0gKz0gZmVlOwogICAgICAgIGJhbGFuY2VzW293bmVyMl0gKz0gZmVlOwogICAgICAgIHRvdGFsTG9zdFt0aGlzR2FtZS5wbGF5ZXIxXSArPSB0aGlzR2FtZS52YWx1ZTsKICAgICAgICB0b3RhbFdvblt0aGlzR2FtZS5wbGF5ZXIyXSArPSB0aGlzR2FtZS52YWx1ZSAtIGZlZSoyOwogICAgICAgIHRoaXNHYW1lLnN0YXRlID0gU3RhdGUuRW5kZWQ7CiAgICAgICAgdGhpc0dhbWUucmVzdWx0ID0gUmVzdWx0LkZvcmZlaXQ7IC8vIExvc3MgZm9yIHBsYXllciAxCiAgICAgICAgCiAgICAgICAgR2FtZUVuZGVkKHRoaXNHYW1lLnBsYXllcjEsIHRoaXNHYW1lLnBsYXllcjIsIGdhbWVJZCwgdGhpc0dhbWUudmFsdWUsIHRoaXNHYW1lLnJlc3VsdCk7CgogICAgICAgIHRoaXNHYW1lLnBsYXllcjIudHJhbnNmZXIoKHRoaXNHYW1lLnZhbHVlKjIpIC0gZmVlKjIpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBGVU5ESU5HIEZVTkNUSU9OUwogICAgLy8KICAgIC8vIEZPUiBGVU5ESU5HCiAgICBmdW5jdGlvbiBkb25hdGUoKSBwYXlhYmxlIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlICE9IDApOwogICAgICAgIGJhbGFuY2VzW293bmVyMV0gKz0gbXNnLnZhbHVlLzI7CiAgICAgICAgYmFsYW5jZXNbb3duZXIyXSArPSBtc2cudmFsdWUgLSBtc2cudmFsdWUvMjsKCiAgICAgICAgRG9uYXRlKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICBmdW5jdGlvbiBkZXBvc2l0KCkgcGF5YWJsZSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSAhPSAwKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBtc2cudmFsdWU7CgogICAgICAgIERlcG9zaXQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdWludCBhbW91bnQgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXTsKICAgICAgICBpZiAoYW1vdW50ID09IDApIHJldHVybiBmYWxzZTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQpOwoKICAgICAgICBXaXRoZHJhdyhtc2cuc2VuZGVyLCBhbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBBRE1JTiBGVU5DVElPTlMKICAgIC8vCiAgICAvLyBGT1IgQURNSU5JU1RSQVRJTkcKICAgIAogICAgLy8gUGF1c2UgYWxsIGdhbWVwbGF5CiAgICBmdW5jdGlvbiBwYXVzZShib29sIHBhdXNlKSBvbmx5T3duZXIgewogICAgICAgIHBhdXNlZCA9IHBhdXNlOwogICAgfQogICAgCiAgICAvLyBQcmV2ZW50IG5ldyBnYW1lcyBmcm9tIGJlaW5nIGNyZWF0ZWQKICAgIC8vIFRvIGJlIHVzZWQgd2hlbiBzd2l0Y2hpbmcgdG8gYSBuZXcgY29udHJhY3QKICAgIGZ1bmN0aW9uIGV4cGlyZShib29sIGV4cGlyZSkgb25seU93bmVyIHsKICAgICAgICBleHBpcmVkID0gZXhwaXJlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRPd25lcjEoYWRkcmVzcyBuZXdPd25lcikgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcjEpOwogICAgICAgIG93bmVyMSA9IG5ld093bmVyOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRPd25lcjIoYWRkcmVzcyBuZXdPd25lcikgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcjIpOwogICAgICAgIG93bmVyMiA9IG5ld093bmVyOwogICAgfQogICAgCn0='.
	

]
