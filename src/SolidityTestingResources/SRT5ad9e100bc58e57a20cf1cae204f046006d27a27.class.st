Class {
	#name : #SRT5ad9e100bc58e57a20cf1cae204f046006d27a27,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5ad9e100bc58e57a20cf1cae204f046006d27a27 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQ29pbkNyb3dkIElDTy4gTW9yZSBpbmZvIHd3dy5jb2luY3Jvd2QuaXQgCiAqLwoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgaW50ZXJuYWwgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KfQoKY29udHJhY3QgdG9rZW5JbnRlcmZhY2UgewoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwp9Cgpjb250cmFjdCBBbWJhc3NhZG9yIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgQ29pbkNyb3dkSUNPIGljb0NvbnRyYWN0OwogICAgdWludDI1NiBwdWJsaWMgc3RhcnRSQzsKICAgIHVpbnQyNTYgcHVibGljIGVuZFJDOwogICAgYWRkcmVzcyBpbnRlcm5hbCBjb250cmFjdE93bmVyOyAKICAgIAogICAgdWludDI1NiBwdWJsaWMgc29sZFRva2Vuc1dpdGhvdXRCb251czsgLy8gd2VpIG9mIFhDQyBzb2xkIHRva2VuIHdpdGhvdXQgYm9udXNlcwoJZnVuY3Rpb24gZXVyb1JhaXNlZFJjKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2IGV1cm8pIHsKICAgICAgICByZXR1cm4gaWNvQ29udHJhY3QuZXVyb1JhaXNlZChzb2xkVG9rZW5zV2l0aG91dEJvbnVzKTsKICAgIH0KICAgIAogICAgdWludDI1NltdIHB1YmxpYyBldXJvVGhyZXNob2xkOyAvLyBhcnJheSBvZiBldXJvKGspIHRocmVzaG9sZCByZWFjaGVkIC0gMTAwSyA9IDEwMC4wMDDigqwKICAgIHVpbnQyNTZbXSBwdWJsaWMgYm9udXNUaHJlc2hvbGQ7IC8vIGFycmF5IG9mIGJvbnVzIG9mIGVhY2ggZXVyb1RocmVzaG9sZCByZWFjaGVkIC0gMjAlID0gMjAwMAogICAgCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VVc2VyOyAvLyBhZGRyZXNzID0+IHRva2VuIGFtb3VudAoKICAgIGZ1bmN0aW9uIEFtYmFzc2Fkb3IoYWRkcmVzcyBfaWNvQ29udHJhY3QsIGFkZHJlc3MgX2FtYmFzc2Fkb3JBZGRyLCB1aW50MjU2W10gX2V1cm9UaHJlc2hvbGQsIHVpbnQyNTZbXSBfYm9udXNUaHJlc2hvbGQsIHVpbnQyNTYgX3N0YXJ0UkMgLCB1aW50MjU2IF9lbmRSQyApIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSAoIF9pY29Db250cmFjdCAhPSAwICk7CiAgICAgICAgcmVxdWlyZSAoIF9hbWJhc3NhZG9yQWRkciAhPSAwICk7CiAgICAgICAgcmVxdWlyZSAoIF9ldXJvVGhyZXNob2xkLmxlbmd0aCAhPSAwICk7CiAgICAgICAgcmVxdWlyZSAoIF9ldXJvVGhyZXNob2xkLmxlbmd0aCA9PSBfYm9udXNUaHJlc2hvbGQubGVuZ3RoICk7CiAgICAgICAgCiAgICAgICAgaWNvQ29udHJhY3QgPSBDb2luQ3Jvd2RJQ08oX2ljb0NvbnRyYWN0KTsKICAgICAgICBjb250cmFjdE93bmVyID0gX2ljb0NvbnRyYWN0OwogICAgICAgIAogICAgICAgIGljb0NvbnRyYWN0LmFkZE1lQnlSQyhfYW1iYXNzYWRvckFkZHIpOwogICAgICAgIAogICAgICAgIGJvbnVzVGhyZXNob2xkID0gX2JvbnVzVGhyZXNob2xkOwogICAgICAgIGV1cm9UaHJlc2hvbGQgPSBfZXVyb1RocmVzaG9sZDsKICAgICAgICAKICAgICAgICBzb2xkVG9rZW5zV2l0aG91dEJvbnVzID0gMDsKICAgICAgICAKICAgICAgICBzZXRUaW1lUkMoIF9zdGFydFJDLCBfZW5kUkMgKTsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgb25seUljb0NvbnRyYWN0KCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cmFjdE93bmVyKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRUaW1lUkModWludDI1NiBfc3RhcnRSQywgdWludDI1NiBfZW5kUkMgKSBpbnRlcm5hbCB7CiAgICAgICAgaWYoIF9zdGFydFJDID09IDAgKSB7CiAgICAgICAgICAgIHN0YXJ0UkMgPSBpY29Db250cmFjdC5zdGFydFRpbWUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdGFydFJDID0gX3N0YXJ0UkM7CiAgICAgICAgfQogICAgICAgIGlmKCBfZW5kUkMgPT0gMCApIHsKICAgICAgICAgICAgZW5kUkMgPSBpY29Db250cmFjdC5lbmRUaW1lKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZW5kUkMgPSBfZW5kUkM7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKHVpbnQyNTYgX25ld1N0YXJ0LCB1aW50MjU2IF9uZXdFbmQpIHB1YmxpYyBvbmx5SWNvQ29udHJhY3QgewogICAgICAgIGlmICggX25ld1N0YXJ0ICE9IDAgKSBzdGFydFJDID0gX25ld1N0YXJ0OwogICAgICAgIGlmICggX25ld0VuZCAhPSAwICkgZW5kUkMgPSBfbmV3RW5kOwogICAgfQoKCWV2ZW50IFRyYWNrKGFkZHJlc3MgaW5kZXhlZCBidXllciwgYnl0ZXMgdHJhY2tJRCwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBzb2xkVG9rZW5zV2l0aG91dEJvbnVzICk7CgkKICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKCBub3cgPiBzdGFydFJDICk7CiAgICAgICAgaWYoIG5vdyA8IGVuZFJDICkgewogICAgICAgICAgICB1aW50MjU2IHRva2VuQW1vdW50ID0gaWNvQ29udHJhY3QuYnV5LnZhbHVlKG1zZy52YWx1ZSkobXNnLnNlbmRlcik7CiAgICAgICAgICAgIGJhbGFuY2VVc2VyW21zZy5zZW5kZXJdID0gYmFsYW5jZVVzZXJbbXNnLnNlbmRlcl0uYWRkKHRva2VuQW1vdW50KTsKICAgICAgICAgICAgc29sZFRva2Vuc1dpdGhvdXRCb251cyA9IHNvbGRUb2tlbnNXaXRob3V0Qm9udXMuYWRkKHRva2VuQW1vdW50KTsKCQkJVHJhY2soIG1zZy5zZW5kZXIsIG1zZy5kYXRhLCBtc2cudmFsdWUsIHRva2VuQW1vdW50ICk7CiAgICAgICAgfSBlbHNlIHsgLy9jbGFpbSBwcmVtaXVtIGJvbnVzIGxvZ2ljCiAgICAgICAgICAgIHJlcXVpcmUoIGJhbGFuY2VVc2VyW21zZy5zZW5kZXJdID4gMCApOwogICAgICAgICAgICB1aW50MjU2IGJvbnVzQXBwbGllZCA9IDA7CiAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGV1cm9UaHJlc2hvbGQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmICggaWNvQ29udHJhY3QuZXVyb1JhaXNlZChzb2xkVG9rZW5zV2l0aG91dEJvbnVzKS5kaXYoMTAwMCkgPiBldXJvVGhyZXNob2xkW2ldICkgewogICAgICAgICAgICAgICAgICAgIGJvbnVzQXBwbGllZCA9IGJvbnVzVGhyZXNob2xkW2ldOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ICAgIAogICAgICAgICAgICByZXF1aXJlKCBib251c0FwcGxpZWQgPiAwICk7CiAgICAgICAgICAgIAogICAgICAgICAgICB1aW50MjU2IGFkZFRva2VuQW1vdW50ID0gYmFsYW5jZVVzZXJbbXNnLnNlbmRlcl0ubXVsKCBib251c0FwcGxpZWQgKS5kaXYoMTAqKjIpOwogICAgICAgICAgICBiYWxhbmNlVXNlclttc2cuc2VuZGVyXSA9IDA7IAogICAgICAgICAgICAKICAgICAgICAgICAgaWNvQ29udHJhY3QuY2xhaW1QcmVtaXVtKG1zZy5zZW5kZXIsIGFkZFRva2VuQW1vdW50KTsKICAgICAgICAgICAgaWYoIG1zZy52YWx1ZSA+IDAgKSBtc2cuc2VuZGVyLnRyYW5zZmVyKG1zZy52YWx1ZSk7IC8vIGdpdmUgYmFjayBldGggCiAgICAgICAgfQogICAgfQp9Cgpjb250cmFjdCBDb2luQ3Jvd2RJQ08gaXMgT3duYWJsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIHRva2VuSW50ZXJmYWNlIHB1YmxpYyB0b2tlbkNvbnRyYWN0OwogICAgCgl1aW50MjU2IHB1YmxpYyBkZWNpbWFscyA9IDE4OwogICAgdWludDI1NiBwdWJsaWMgdG9rZW5WYWx1ZTsgIC8vIDEgWENDIGluIHdlaQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgY2VudFRva2VuID0gMjA7IC8vIGV1cm8gY2VudHMgdmFsdWUgb2YgMSB0b2tlbiAKICAgIAogICAgZnVuY3Rpb24gZXVyb1JhaXNlZCh1aW50MjU2IF93ZWlUb2tlbnMpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsgLy8gY29udmVydGlvbiBvZiBzb2xkIHRva2VuIGluIGV1cm8gcmFpc2VkIGluIHdlaQogICAgICAgIHJldHVybiBfd2VpVG9rZW5zLm11bChjZW50VG9rZW4pLmRpdigxMDApLmRpdigxMCoqZGVjaW1hbHMpOwogICAgfQogICAgCiAgICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOyAgLy8gc2Vjb25kcyBmcm9tIDE5NzAtMDEtMDFUMDA6MDA6MDBaCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWU7ICAvLyBzZWNvbmRzIGZyb20gMTk3MC0wMS0wMVQwMDowMDowMFoKICAgIHVpbnQyNTYgaW50ZXJuYWwgY29uc3RhbnQgd2Vla0luU2Vjb25kcyA9IDYwNDgwMDsgLy8gc2Vjb25kcyBpbiBhIHdlZWsKICAgIAogICAgdWludDI1NiBwdWJsaWMgdG90YWxTb2xkVG9rZW5zV2l0aEJvbnVzOyAvLyB0b3RhbCB3ZWkgb2YgWENDIGRpc3RyaWJ1aXRlZCBmcm9tIHRoaXMgSUNPCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFNvbGRUb2tlbnNXaXRob3V0Qm9udXM7IC8vIHRvdGFsIHdlaSBvZiBYQ0MgZGlzdHJpYnVpdGVkIGZyb20gdGhpcyBJQ08gd2l0aG91dCBib251cwoJZnVuY3Rpb24gZXVyb1JhaXNlZElDTygpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NiBldXJvKSB7CiAgICAgICAgcmV0dXJuIGV1cm9SYWlzZWQodG90YWxTb2xkVG9rZW5zV2l0aG91dEJvbnVzKTsKICAgIH0KCQogICAgdWludDI1NiBwdWJsaWMgcmVtYWluaW5nVG9rZW5zOyAvLyB0b3RhbCB3ZWkgb2YgWENDIHJlbWFpbmluZyAod2l0aG91dCBib251c2VzKQoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBhZGRyZXNzKSBwdWJsaWMgYW1iYXNzYWRvckFkZHJlc3NPZjsgLy8gYW1iYXNzYWRvckNvbnRyYWN0ID0+IGFtYmFzc2Fkb3JBZGRyZXNzCgoKICAgIGZ1bmN0aW9uIENvaW5Dcm93ZElDTyhhZGRyZXNzIF90b2tlbkFkZHJlc3MsIHVpbnQyNTYgX3Rva2VuVmFsdWUsIHVpbnQyNTYgX3N0YXJ0VGltZSkgcHVibGljIHsKICAgICAgICB0b2tlbkNvbnRyYWN0ID0gdG9rZW5JbnRlcmZhY2UoX3Rva2VuQWRkcmVzcyk7CiAgICAgICAgdG9rZW5WYWx1ZSA9IF90b2tlblZhbHVlOwogICAgICAgIHN0YXJ0SUNPKF9zdGFydFRpbWUpOyAKICAgICAgICB0b3RhbFNvbGRUb2tlbnNXaXRoQm9udXMgPSAwOwogICAgICAgIHRvdGFsU29sZFRva2Vuc1dpdGhvdXRCb251cyA9IDA7CiAgICAgICAgcmVtYWluaW5nVG9rZW5zID0gMjQ1MDAwMDAgICogMTAgKiogZGVjaW1hbHM7IC8vIDI0LjUwMC4wMDAgKiAwLjIw4oKsID0gNC45MDAuMDAw4oKsIENBUFBFRAogICAgfQoKICAgIGFkZHJlc3MgcHVibGljIHVwZGF0ZXI7ICAvLyBhY2NvdW50IGluIGNoYXJnZSBvZiB1cGRhdGluZyB0aGUgdG9rZW4gdmFsdWUKICAgIGV2ZW50IFVwZGF0ZVZhbHVlKHVpbnQyNTYgbmV3VmFsdWUpOwoKICAgIGZ1bmN0aW9uIHVwZGF0ZVZhbHVlKHVpbnQyNTYgbmV3VmFsdWUpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHVwZGF0ZXIgfHwgbXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgdG9rZW5WYWx1ZSA9IG5ld1ZhbHVlOwogICAgICAgIFVwZGF0ZVZhbHVlKG5ld1ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVVcGRhdGVyKGFkZHJlc3MgbmV3VXBkYXRlcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgdXBkYXRlciA9IG5ld1VwZGF0ZXI7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlVGltZSh1aW50MjU2IF9uZXdTdGFydCwgdWludDI1NiBfbmV3RW5kKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpZiAoIF9uZXdTdGFydCAhPSAwICkgc3RhcnRUaW1lID0gX25ld1N0YXJ0OwogICAgICAgIGlmICggX25ld0VuZCAhPSAwICkgZW5kVGltZSA9IF9uZXdFbmQ7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHVwZGF0ZVRpbWVSQyhhZGRyZXNzIF9yY0NvbnRyYWN0LCB1aW50MjU2IF9uZXdTdGFydCwgdWludDI1NiBfbmV3RW5kKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBBbWJhc3NhZG9yKF9yY0NvbnRyYWN0KS51cGRhdGVUaW1lKCBfbmV3U3RhcnQsIF9uZXdFbmQpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzdGFydElDTyh1aW50MjU2IF9zdGFydFRpbWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGlmKF9zdGFydFRpbWUgPT0gMCApIHsKICAgICAgICAgICAgc3RhcnRUaW1lID0gbm93OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICAgICAgfQogICAgICAgIGVuZFRpbWUgPSBzdGFydFRpbWUgKyAxMip3ZWVrSW5TZWNvbmRzOwogICAgfQogICAgCiAgICBldmVudCBCdXkoYWRkcmVzcyBidXllciwgdWludDI1NiB2YWx1ZSwgYWRkcmVzcyBpbmRleGVkIGFtYmFzc2Fkb3IpOwoKICAgIGZ1bmN0aW9uIGJ1eShhZGRyZXNzIF9idXllcikgcHVibGljIHBheWFibGUgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmVxdWlyZShub3cgPCBlbmRUaW1lKTsgLy8gY2hlY2sgaWYgZW5kZWQKICAgICAgICByZXF1aXJlKCByZW1haW5pbmdUb2tlbnMgPiAwICk7IC8vIENoZWNrIGlmIHRoZXJlIGFyZSBhbnkgcmVtYWluaW5nIHRva2VucyBleGNsdWRpbmcgYm9udXNlcwogICAgICAgIAogICAgICAgIHJlcXVpcmUoIHRva2VuQ29udHJhY3QuYmFsYW5jZU9mKHRoaXMpID4gcmVtYWluaW5nVG9rZW5zKTsgLy8gc2hvdWxkIGhhdmUgZW5vdWdoIGJhbGFuY2UKICAgICAgICAKICAgICAgICB1aW50MjU2IG9uZVhDQyA9IDEwICoqIGRlY2ltYWxzOwogICAgICAgIHVpbnQyNTYgdG9rZW5BbW91bnQgPSBtc2cudmFsdWUubXVsKG9uZVhDQykuZGl2KHRva2VuVmFsdWUpOwogICAgICAgIAogICAgICAgIAogICAgICAgIHVpbnQyNTYgYm9udXNSYXRlOyAvLyBkZWNpbWFscyBvZiBib251cyAyMCUgPSAyMDAwCiAgICAgICAgYWRkcmVzcyBjdXJyZW50QW1iYXNzYWRvciA9IGFkZHJlc3MoMCk7CiAgICAgICAgaWYgKCBhbWJhc3NhZG9yQWRkcmVzc09mW21zZy5zZW5kZXJdICE9IGFkZHJlc3MoMCkgKSB7IC8vIGlmIGlzIGFuIGF1dGhvcml6ZWQgYW1iYXNzYWRvckNvbnRyYWN0CiAgICAgICAgICAgIGN1cnJlbnRBbWJhc3NhZG9yID0gbXNnLnNlbmRlcjsKICAgICAgICAgICAgYm9udXNSYXRlID0gMDsgLy8gQW1iYXNzYWRvciBDb211bml0eSBzaG91bGQgY2xhaW0gb3duIGJvbnVzIGF0IHRoZSBlbmQgb2YgUkMgCiAgICAgICAgICAgIAogICAgICAgIH0gZWxzZSB7IC8vIGlmIGlzIGRpcmVjdGx5IGNhbGxlZCB0byBDb2luQ3Jvd2RJQ08gY29udHJhY3QKICAgICAgICAgICAgcmVxdWlyZShub3cgPiBzdGFydFRpbWUpOyAvLyBjaGVjayBpZiBzdGFydGVkIGZvciBwdWJsaWMgdXNlcgogICAgICAgICAgICAKICAgICAgICAgICAgaWYoIG5vdyA+IHN0YXJ0VGltZSArIHdlZWtJblNlY29uZHMqMCAgKSB7IGJvbnVzUmF0ZSA9IDIwMDA7IH0KICAgICAgICAgICAgaWYoIG5vdyA+IHN0YXJ0VGltZSArIHdlZWtJblNlY29uZHMqMSAgKSB7IGJvbnVzUmF0ZSA9IDE4MzM7IH0KICAgICAgICAgICAgaWYoIG5vdyA+IHN0YXJ0VGltZSArIHdlZWtJblNlY29uZHMqMiAgKSB7IGJvbnVzUmF0ZSA9IDE2Njc7IH0KICAgICAgICAgICAgaWYoIG5vdyA+IHN0YXJ0VGltZSArIHdlZWtJblNlY29uZHMqMyAgKSB7IGJvbnVzUmF0ZSA9IDE1MDA7IH0KICAgICAgICAgICAgaWYoIG5vdyA+IHN0YXJ0VGltZSArIHdlZWtJblNlY29uZHMqNCAgKSB7IGJvbnVzUmF0ZSA9IDEzMzM7IH0KICAgICAgICAgICAgaWYoIG5vdyA+IHN0YXJ0VGltZSArIHdlZWtJblNlY29uZHMqNSAgKSB7IGJvbnVzUmF0ZSA9IDExNjc7IH0KICAgICAgICAgICAgaWYoIG5vdyA+IHN0YXJ0VGltZSArIHdlZWtJblNlY29uZHMqNiAgKSB7IGJvbnVzUmF0ZSA9IDEwMDA7IH0KICAgICAgICAgICAgaWYoIG5vdyA+IHN0YXJ0VGltZSArIHdlZWtJblNlY29uZHMqNyAgKSB7IGJvbnVzUmF0ZSA9IDgzMzsgfQogICAgICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyo4ICApIHsgYm9udXNSYXRlID0gNjY3OyB9CiAgICAgICAgICAgIGlmKCBub3cgPiBzdGFydFRpbWUgKyB3ZWVrSW5TZWNvbmRzKjkgICkgeyBib251c1JhdGUgPSA1MDA7IH0KICAgICAgICAgICAgaWYoIG5vdyA+IHN0YXJ0VGltZSArIHdlZWtJblNlY29uZHMqMTAgKSB7IGJvbnVzUmF0ZSA9IDMzMzsgfQogICAgICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyoxMSApIHsgYm9udXNSYXRlID0gMTY3OyB9CiAgICAgICAgICAgIGlmKCBub3cgPiBzdGFydFRpbWUgKyB3ZWVrSW5TZWNvbmRzKjEyICkgeyBib251c1JhdGUgPSAwOyB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmICggcmVtYWluaW5nVG9rZW5zIDwgdG9rZW5BbW91bnQgKSB7CiAgICAgICAgICAgIHVpbnQyNTYgcmVmdW5kID0gKHRva2VuQW1vdW50IC0gcmVtYWluaW5nVG9rZW5zKS5tdWwodG9rZW5WYWx1ZSkuZGl2KG9uZVhDQyk7CiAgICAgICAgICAgIHRva2VuQW1vdW50ID0gcmVtYWluaW5nVG9rZW5zOwogICAgICAgICAgICBvd25lci50cmFuc2Zlcihtc2cudmFsdWUtcmVmdW5kKTsKCQkJcmVtYWluaW5nVG9rZW5zID0gMDsgLy8gc2V0IHJlbWFpbmluZyB0b2tlbiB0byAwCiAgICAgICAgICAgICBfYnV5ZXIudHJhbnNmZXIocmVmdW5kKTsKICAgICAgICB9IGVsc2UgewoJCQlyZW1haW5pbmdUb2tlbnMgPSByZW1haW5pbmdUb2tlbnMuc3ViKHRva2VuQW1vdW50KTsgLy8gdXBkYXRlIHJlbWFpbmluZyB0b2tlbiB3aXRob3V0IGJvbnVzCiAgICAgICAgICAgIG93bmVyLnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHVpbnQyNTYgdG9rZW5BbW91bnRXaXRoQm9udXMgPSB0b2tlbkFtb3VudC5hZGQodG9rZW5BbW91bnQubXVsKCBib251c1JhdGUgKS5kaXYoMTAqKjQpKTsgLy9hZGQgdG9rZW4gYm9udXMKICAgICAgICAKICAgICAgICB0b2tlbkNvbnRyYWN0LnRyYW5zZmVyKF9idXllciwgdG9rZW5BbW91bnRXaXRoQm9udXMpOwogICAgICAgIEJ1eShfYnV5ZXIsIHRva2VuQW1vdW50V2l0aEJvbnVzLCBjdXJyZW50QW1iYXNzYWRvcik7CiAgICAgICAgCiAgICAgICAgdG90YWxTb2xkVG9rZW5zV2l0aEJvbnVzICs9IHRva2VuQW1vdW50V2l0aEJvbnVzOyAKCQl0b3RhbFNvbGRUb2tlbnNXaXRob3V0Qm9udXMgKz0gdG9rZW5BbW91bnQ7CgkJCiAgICAgICAgcmV0dXJuIHRva2VuQW1vdW50OyAvLyByZXR1biB0b2tlbkFtb3VudCB3aXRob3V0IGJvbnVzZXMgZm9yIGVhc2llciBjYWxjdWxhdGlvbnMKICAgIH0KCiAgICBldmVudCBOZXdBbWJhc3NhZG9yKGFkZHJlc3MgYW1iYXNzYWRvciwgYWRkcmVzcyBjb250cik7CiAgICAKICAgIGZ1bmN0aW9uIGFkZE1lQnlSQyhhZGRyZXNzIF9hbWJhc3NhZG9yQWRkcikgcHVibGljIHsKICAgICAgICByZXF1aXJlKHR4Lm9yaWdpbiA9PSBvd25lcik7CiAgICAgICAgCiAgICAgICAgYW1iYXNzYWRvckFkZHJlc3NPZlsgbXNnLnNlbmRlciBdICA9IF9hbWJhc3NhZG9yQWRkcjsKICAgICAgICAKICAgICAgICBOZXdBbWJhc3NhZG9yKF9hbWJhc3NhZG9yQWRkciwgbXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXcoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgdG8udHJhbnNmZXIodmFsdWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB1cGRhdGVUb2tlbkNvbnRyYWN0KGFkZHJlc3MgX3Rva2VuQ29udHJhY3QpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHRva2VuQ29udHJhY3QgPSB0b2tlbkludGVyZmFjZShfdG9rZW5Db250cmFjdCk7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdUb2tlbnMoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRva2VuQ29udHJhY3QudHJhbnNmZXIodG8sIHZhbHVlKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2xhaW1QcmVtaXVtKGFkZHJlc3MgX2J1eWVyLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXF1aXJlKCBhbWJhc3NhZG9yQWRkcmVzc09mW21zZy5zZW5kZXJdICE9IGFkZHJlc3MoMCkgKTsgLy8gQ2hlY2sgaWYgaXMgYW4gYXV0aG9yaXplZCBfYW1iYXNzYWRvckNvbnRyYWN0CiAgICAgICAgcmV0dXJuIHRva2VuQ29udHJhY3QudHJhbnNmZXIoX2J1eWVyLCBfYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgYnV5KG1zZy5zZW5kZXIpOwogICAgfQp9'.
	

]
