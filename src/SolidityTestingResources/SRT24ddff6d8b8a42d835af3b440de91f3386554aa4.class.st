Class {
	#name : #SRT24ddff6d8b8a42d835af3b440de91f3386554aa4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT24ddff6d8b8a42d835af3b440de91f3386554aa4 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIHJlcXVpcmUoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJlcXVpcmUoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICByZXF1aXJlKGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLgogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZXM7CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBTYWZlRVJDMjAKICogQGRldiBXcmFwcGVycyBhcm91bmQgRVJDMjAgb3BlcmF0aW9ucyB0aGF0IHRocm93IG9uIGZhaWx1cmUuCiAqIFRvIHVzZSB0aGlzIGxpYnJhcnkgeW91IGNhbiBhZGQgYSBgdXNpbmcgU2FmZUVSQzIwIGZvciBFUkMyMDtgIHN0YXRlbWVudCB0byB5b3VyIGNvbnRyYWN0LAogKiB3aGljaCBhbGxvd3MgeW91IHRvIGNhbGwgdGhlIHNhZmUgb3BlcmF0aW9ucyBhcyBgdG9rZW4uc2FmZVRyYW5zZmVyKC4uLilgLCBldGMuCiAqLwpsaWJyYXJ5IFNhZmVFUkMyMCB7CiAgZnVuY3Rpb24gc2FmZVRyYW5zZmVyKEVSQzIwQmFzaWMgdG9rZW4sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIGludGVybmFsIHsKICAgIGFzc2VydCh0b2tlbi50cmFuc2Zlcih0bywgdmFsdWUpKTsKICB9CgogIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlckZyb20oRVJDMjAgdG9rZW4sIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgYXNzZXJ0KHRva2VuLnRyYW5zZmVyRnJvbShmcm9tLCB0bywgdmFsdWUpKTsKICB9CgogIGZ1bmN0aW9uIHNhZmVBcHByb3ZlKEVSQzIwIHRva2VuLCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIGludGVybmFsIHsKICAgIGFzc2VydCh0b2tlbi5hcHByb3ZlKHNwZW5kZXIsIHZhbHVlKSk7CiAgfQp9CgovKioKICogQHRpdGxlIFRva2VuVGltZWxvY2sKICogQGRldiBUb2tlblRpbWVsb2NrIGlzIGEgdG9rZW4gaG9sZGVyIGNvbnRyYWN0IHRoYXQgd2lsbCBhbGxvdyBhCiAqIGJlbmVmaWNpYXJ5IHRvIGV4dHJhY3QgdGhlIHRva2VucyBhZnRlciBhIGdpdmVuIHJlbGVhc2UgdGltZQogKi8KY29udHJhY3QgVG9rZW5UaW1lbG9jayB7CiAgdXNpbmcgU2FmZUVSQzIwIGZvciBFUkMyMEJhc2ljOwoKICAvLyBFUkMyMCBiYXNpYyB0b2tlbiBjb250cmFjdCBiZWluZyBoZWxkCiAgRVJDMjBCYXNpYyBwdWJsaWMgdG9rZW47CgogIC8vIGJlbmVmaWNpYXJ5IG9mIHRva2VucyBhZnRlciB0aGV5IGFyZSByZWxlYXNlZAogIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwoKICAvLyB0aW1lc3RhbXAgd2hlbiB0b2tlbiByZWxlYXNlIGlzIGVuYWJsZWQKICB1aW50NjQgcHVibGljIHJlbGVhc2VUaW1lOwoKICBmdW5jdGlvbiBUb2tlblRpbWVsb2NrKEVSQzIwQmFzaWMgX3Rva2VuLCBhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDY0IF9yZWxlYXNlVGltZSkgcHVibGljIHsKICAgIHJlcXVpcmUoX3JlbGVhc2VUaW1lID4gdWludDY0KGJsb2NrLnRpbWVzdGFtcCkpOwogICAgdG9rZW4gPSBfdG9rZW47CiAgICBiZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgIHJlbGVhc2VUaW1lID0gX3JlbGVhc2VUaW1lOwogIH0KCiAgLyoqCiAgICogQG5vdGljZSBUcmFuc2ZlcnMgdG9rZW5zIGhlbGQgYnkgdGltZWxvY2sgdG8gYmVuZWZpY2lhcnkuCiAgICovCiAgZnVuY3Rpb24gcmVsZWFzZSgpIHB1YmxpYyB7CiAgICByZXF1aXJlKHVpbnQ2NChibG9jay50aW1lc3RhbXApID49IHJlbGVhc2VUaW1lKTsKCiAgICB1aW50MjU2IGFtb3VudCA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgIHJlcXVpcmUoYW1vdW50ID4gMCk7CgogICAgdG9rZW4uc2FmZVRyYW5zZmVyKGJlbmVmaWNpYXJ5LCBhbW91bnQpOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAgICoKICAgICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICAvKioKICAgICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICAgKi8KICAgIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICAgICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICAgICAgfQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cgp9Cgpjb250cmFjdCBPd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBmdW5jdGlvbiBPd25lZCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQp9Cgpjb250cmFjdCBJdW5nb1Rva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmVkIHsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJJVU5HTyB0b2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJJTkciOwogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogICAgLy8vIE1heGltdW0gdG9rZW5zIHRvIGJlIGFsbG9jYXRlZCAoMTAwIG1pbGxpb24pCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBIQVJEX0NBUCA9IDEwMDAwMDAwMCAqIDEwKip1aW50MjU2KGRlY2ltYWxzKTsKCiAgICAvLy8gTWF4aW11bSB0b2tlbnMgdG8gYmUgYWxsb2NhdGVkIG9uIHRoZSBzYWxlICg2NCBtaWxsaW9uKQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgVE9LRU5TX1NBTEVfSEFSRF9DQVAgPSA2NDAwMDAwMCAqIDEwKip1aW50MjU2KGRlY2ltYWxzKTsKCiAgICAvLy8gVGhlIG93bmVyIG9mIHRoaXMgYWRkcmVzcyBpcyB0aGUgSXVuZ28gRm91bmRlcnMgZnVuZAogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlcnNGdW5kQWRkcmVzczsKCiAgICAvLy8gVGhlIG93bmVyIG9mIHRoaXMgYWRkcmVzcyBpcyB0aGUgSXVuZ28gVGVhbSBGb3VuZGF0aW9uIGZ1bmQKICAgIGFkZHJlc3MgcHVibGljIHRlYW1GdW5kQWRkcmVzczsKCiAgICAvLy8gVGhlIG93bmVyIG9mIHRoaXMgYWRkcmVzcyBpcyB0aGUgUmVzZXJ2ZSBmdW5kCiAgICBhZGRyZXNzIHB1YmxpYyByZXNlcnZlRnVuZEFkZHJlc3M7CgogICAgLy8vIFRoaXMgYWRkcmVzcyB3aWxsIGJlIHNlbnQgYWxsIHRoZSByZWNlaXZlZCBldGhlcgogICAgYWRkcmVzcyBwdWJsaWMgZnVuZHNUcmVhc3VyeTsKCiAgICAvLy8gVGhpcyBpcyB0aGUgYWRkcmVzcyBvZiB0aGUgdGltZWxvY2sgY29udHJhY3QgZm9yIAogICAgLy8vIHRoZSBmaXJzdCAxLzMgb2YgdGhlIEZvdW5kZXJzIGZ1bmQgdG9rZW5zCiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGVyc0Z1bmRUaW1lbG9jazFBZGRyZXNzOwoKICAgIC8vLyBUaGlzIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSB0aW1lbG9jayBjb250cmFjdCBmb3IgCiAgICAvLy8gdGhlIHNlY29uZCAxLzMgb2YgdGhlIEZvdW5kZXJzIGZ1bmQgdG9rZW5zCiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGVyc0Z1bmRUaW1lbG9jazJBZGRyZXNzOwoKICAgIC8vLyBUaGlzIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSB0aW1lbG9jayBjb250cmFjdCBmb3IgCiAgICAvLy8gdGhlIHRoaXJkIDEvMyBvZiB0aGUgRm91bmRlcnMgZnVuZCB0b2tlbnMKICAgIGFkZHJlc3MgcHVibGljIGZvdW5kZXJzRnVuZFRpbWVsb2NrM0FkZHJlc3M7CgogICAgLy8vIHNlY29uZHMgc2luY2UgMDEuMDEuMTk3MCB0byAwNi4xMi4yMDE3IDEyOjAwOjAwIFVUQwogICAgLy8vIHRpZXIgMSBzdGFydCB0aW1lCiAgICB1aW50NjQgcHJpdmF0ZSBjb25zdGFudCBkYXRlMDZEZWMyMDE3ID0gMTUxMjU2MTYwMDsKCiAgICAvLy8gc2Vjb25kcyBzaW5jZSAwMS4wMS4xOTcwIHRvIDIxLjEyLjIwMTcgMTQ6MDA6MDAgVVRDCiAgICAvLy8gdGllciAxIGVuZCB0aW1lOyB0aWVyIDIgc3RhcnQgdGltZQogICAgdWludDY0IHByaXZhdGUgY29uc3RhbnQgZGF0ZTIxRGVjMjAxNyA9IDE1MTM4NjQ4MDA7CgogICAgLy8vIHNlY29uZHMgc2luY2UgMDEuMDEuMTk3MCB0byAxMi4wMS4yMDE4IDE0OjAwOjAwIFVUQwogICAgLy8vIHRpZXIgMiBlbmQgdGltZTsgdGllciAzIHN0YXJ0IHRpbWUKICAgIHVpbnQ2NCBwcml2YXRlIGNvbnN0YW50IGRhdGUxMkphbjIwMTggPSAxNTE1NzY1NjAwOwoKICAgIC8vLyBzZWNvbmRzIHNpbmNlIDAxLjAxLjE5NzAgdG8gMjEuMDEuMjAxOCAxNDowMDowMCBVVEMKICAgIC8vLyB0aWVyIDMgZW5kIHRpbWU7IHRpZXIgNCBzdGFydCB0aW1lCiAgICB1aW50NjQgcHJpdmF0ZSBjb25zdGFudCBkYXRlMjFKYW4yMDE4ID0gMTUxNjU0MzIwMDsKCiAgICAvLy8gc2Vjb25kcyBzaW5jZSAwMS4wMS4xOTcwIHRvIDMxLjAxLjIwMTggMjM6NTk6NTkgVVRDCiAgICAvLy8gdGllciA0IGVuZCB0aW1lOyBjbG9zaW5nIHRva2VuIHNhbGU7IHRyYWRpbmcgb3BlbgogICAgdWludDY0IHByaXZhdGUgY29uc3RhbnQgZGF0ZTMxSmFuMjAxOCA9IDE1MTc0NDMxOTk7CgogICAgLy8vIEJhc2UgZXhjaGFuZ2UgcmF0ZSBpcyBzZXQgdG8gMSBFVEggPSAxMDAwIElORwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgQkFTRV9SQVRFID0gMTAwMDsKCiAgICAvLy8gbm8gdG9rZW5zIGNhbiBiZSBldmVyIGlzc3VlZCB3aGVuIHRoaXMgaXMgc2V0IHRvICJ0cnVlIgogICAgYm9vbCBwdWJsaWMgdG9rZW5TYWxlQ2xvc2VkID0gZmFsc2U7CgogICAgLy8vIElzc3VlIGV2ZW50IGluZGV4IHN0YXJ0aW5nIGZyb20gMC4KICAgIHVpbnQyNTYgcHVibGljIGlzc3VlSW5kZXggPSAwOwoKICAgIC8vLyBFbWl0dGVkIGZvciBlYWNoIHN1Y3Vlc3NmdWwgdG9rZW4gcHVyY2hhc2UuCiAgICBldmVudCBJc3N1ZSh1aW50IF9pc3N1ZUluZGV4LCBhZGRyZXNzIGFkZHIsIHVpbnQgdG9rZW5BbW91bnQpOwoKICAgIC8vLyBSZXF1aXJlIHRoYXQgdGhlIGJ1eWVycyBjYW4gc3RpbGwgcHVyY2hhc2UKICAgIG1vZGlmaWVyIGluUHJvZ3Jlc3MgewogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkgPCBUT0tFTlNfU0FMRV9IQVJEX0NBUAogICAgICAgICAgICAgICAgJiYgIXRva2VuU2FsZUNsb3NlZAogICAgICAgICAgICAgICAgJiYgIXNhbGVEdWUoKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQWxsb3cgdGhlIGNsb3NpbmcgdG8gaGFwcGVuIG9ubHkgb25jZSAKICAgIG1vZGlmaWVyIGJlZm9yZUVuZCB7CiAgICAgICAgcmVxdWlyZSghdG9rZW5TYWxlQ2xvc2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLyBSZXF1aXJlIHRoYXQgdGhlIGVuZCBvZiB0aGUgc2FsZSBoYXMgcGFzc2VkICh0aW1lIGlzIDAxIEZlYiAyMDE4IG9yIGxhdGVyKQogICAgbW9kaWZpZXIgdHJhZGluZ09wZW4gewogICAgICAgIHJlcXVpcmUoc2FsZUR1ZSgpKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQ09OU1RSVUNUT1IKICAgICAqCiAgICAgKiBAZGV2IEluaXRpYWxpemUgdGhlIEl1bmdvVG9rZW4gVG9rZW4KICAgICAqIEBwYXJhbSBfZm91bmRlcnNGdW5kQWRkcmVzcyBUaGUgb3duZXIgb2YgdGhpcyBhZGRyZXNzIGlzIHRoZSBJdW5nbyBGb3VuZGVycyBmdW5kCiAgICAgKiBAcGFyYW0gX3RlYW1GdW5kQWRkcmVzcyBUaGUgb3duZXIgb2YgdGhpcyBhZGRyZXNzIGlzIHRoZSBJdW5nbyBUZWFtIEZvdW5kYXRpb24gZnVuZAogICAgICogQHBhcmFtIF9yZXNlcnZlRnVuZEFkZHJlc3MgVGhlIG93bmVyIG9mIHRoaXMgYWRkcmVzcyBpcyB0aGUgUmVzZXJ2ZSBmdW5kCiAgICAgKi8KICAgIGZ1bmN0aW9uIEl1bmdvVG9rZW4gKGFkZHJlc3MgX2ZvdW5kZXJzRnVuZEFkZHJlc3MsIGFkZHJlc3MgX3RlYW1GdW5kQWRkcmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgX3Jlc2VydmVGdW5kQWRkcmVzcywgYWRkcmVzcyBfZnVuZHNUcmVhc3VyeSkgcHVibGljIHsKICAgICAgICBmb3VuZGVyc0Z1bmRBZGRyZXNzID0gMHg5Q0IwMDE2NTExRmI5M0VBYzdiQzU4NUEyYmMyZjBDMzRERWNFYTE1OwogICAgICAgIHRlYW1GdW5kQWRkcmVzcyA9IDB4RGRhNzAwMzk5ODI0NGY2MTYxQTVCQkFmMEY0ZWQ1YTQwRTkwOGI1MTsKICAgICAgICByZXNlcnZlRnVuZEFkZHJlc3MgPSAweDkxODZiNDhEYjgzRTYzYWRFRGFCNDNDMTkzNDVmMzljODM5MjhFM2Y7CiAgICAgICAgZnVuZHNUcmVhc3VyeSA9IDB4MzFhNjMzYzRlRTJDMzE3REUyQzY1YmViMDA1OTNFQWREOWYxNzJkNjsKICAgIH0KCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSBjdXJyZW50IHByaWNlLgogICAgZnVuY3Rpb24gcHJpY2UoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRva2VucykgewogICAgICAgIHJldHVybiBjb21wdXRlVG9rZW5BbW91bnQoMSBldGhlcik7CiAgICB9CgogICAgLy8vIEBkZXYgVGhpcyBkZWZhdWx0IGZ1bmN0aW9uIGFsbG93cyB0b2tlbiB0byBiZSBwdXJjaGFzZWQgYnkgZGlyZWN0bHkKICAgIC8vLyBzZW5kaW5nIGV0aGVyIHRvIHRoaXMgc21hcnQgY29udHJhY3QuCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcHVyY2hhc2VUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgogICAgLy8vIEBkZXYgSXNzdWUgdG9rZW4gYmFzZWQgb24gRXRoZXIgcmVjZWl2ZWQuCiAgICAvLy8gQHBhcmFtIF9iZW5lZmljaWFyeSBBZGRyZXNzIHRoYXQgbmV3bHkgaXNzdWVkIHRva2VuIHdpbGwgYmUgc2VudCB0by4KICAgIGZ1bmN0aW9uIHB1cmNoYXNlVG9rZW5zKGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBwdWJsaWMgcGF5YWJsZSBpblByb2dyZXNzIHsKICAgICAgICAvLyBvbmx5IGFjY2VwdCBhIG1pbmltdW0gYW1vdW50IG9mIEVUSD8KICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSAwLjAxIGV0aGVyKTsKCiAgICAgICAgdWludDI1NiB0b2tlbnMgPSBjb21wdXRlVG9rZW5BbW91bnQobXNnLnZhbHVlKTsKICAgICAgICBkb0lzc3VlVG9rZW5zKF9iZW5lZmljaWFyeSwgdG9rZW5zKTsKCiAgICAgICAgLy8vIGZvcndhcmQgdGhlIHJhaXNlZCBmdW5kcyB0byB0aGUgZnVuZCBhZGRyZXNzCiAgICAgICAgZnVuZHNUcmVhc3VyeS50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfQoKICAgIC8vLyBAZGV2IEJhdGNoIGlzc3VlIHRva2VucyBvbiB0aGUgcHJlc2FsZQogICAgLy8vIEBwYXJhbSBfYWRkcmVzc2VzIGFkZHJlc3NlcyB0aGF0IHRoZSBwcmVzYWxlIHRva2VucyB3aWxsIGJlIHNlbnQgdG8uCiAgICAvLy8gQHBhcmFtIF9hZGRyZXNzZXMgdGhlIGFtb3VudHMgb2YgdG9rZW5zLCB3aXRoIGRlY2ltYWxzIGV4cGFuZGVkIChmdWxsKS4KICAgIGZ1bmN0aW9uIGlzc3VlVG9rZW5zTXVsdGkoYWRkcmVzc1tdIF9hZGRyZXNzZXMsIHVpbnQyNTZbXSBfdG9rZW5zKSBwdWJsaWMgb25seU93bmVyIGluUHJvZ3Jlc3MgewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3Nlcy5sZW5ndGggPT0gX3Rva2Vucy5sZW5ndGgpOwogICAgICAgIHJlcXVpcmUoX2FkZHJlc3Nlcy5sZW5ndGggPD0gMTAwKTsKCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX3Rva2Vucy5sZW5ndGg7IGkgPSBpLmFkZCgxKSkgewogICAgICAgICAgICBkb0lzc3VlVG9rZW5zKF9hZGRyZXNzZXNbaV0sIF90b2tlbnNbaV0pOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBJc3N1ZSB0b2tlbnMgZm9yIGEgc2luZ2xlIGJ1eWVyIG9uIHRoZSBwcmVzYWxlCiAgICAvLy8gQHBhcmFtIF9iZW5lZmljaWFyeSBhZGRyZXNzZXMgdGhhdCB0aGUgcHJlc2FsZSB0b2tlbnMgd2lsbCBiZSBzZW50IHRvLgogICAgLy8vIEBwYXJhbSBfdG9rZW5zQW1vdW50IHRoZSBhbW91bnQgb2YgdG9rZW5zLCB3aXRoIGRlY2ltYWxzIGV4cGFuZGVkIChmdWxsKS4KICAgIGZ1bmN0aW9uIGlzc3VlVG9rZW5zKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF90b2tlbnNBbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgaW5Qcm9ncmVzcyB7CiAgICAgICAgZG9Jc3N1ZVRva2VucyhfYmVuZWZpY2lhcnksIF90b2tlbnNBbW91bnQpOwogICAgfQoKICAgIC8vLyBAZGV2IGlzc3VlIHRva2VucyBmb3IgYSBzaW5nbGUgYnV5ZXIKICAgIC8vLyBAcGFyYW0gX2JlbmVmaWNpYXJ5IGFkZHJlc3NlcyB0aGF0IHRoZSB0b2tlbnMgd2lsbCBiZSBzZW50IHRvLgogICAgLy8vIEBwYXJhbSBfdG9rZW5zQW1vdW50IHRoZSBhbW91bnQgb2YgdG9rZW5zLCB3aXRoIGRlY2ltYWxzIGV4cGFuZGVkIChmdWxsKS4KICAgIGZ1bmN0aW9uIGRvSXNzdWVUb2tlbnMoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQyNTYgX3Rva2Vuc0Ftb3VudCkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICAvLyBjb21wdXRlIHdpdGhvdXQgYWN0dWFsbHkgaW5jcmVhc2luZyBpdAogICAgICAgIHVpbnQyNTYgaW5jcmVhc2VkVG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX3Rva2Vuc0Ftb3VudCk7CiAgICAgICAgLy8gcm9sbCBiYWNrIGlmIGhhcmQgY2FwIHJlYWNoZWQKICAgICAgICByZXF1aXJlKGluY3JlYXNlZFRvdGFsU3VwcGx5IDw9IFRPS0VOU19TQUxFX0hBUkRfQ0FQKTsKCiAgICAgICAgLy8gaW5jcmVhc2UgdG9rZW4gdG90YWwgc3VwcGx5CiAgICAgICAgdG90YWxTdXBwbHkgPSBpbmNyZWFzZWRUb3RhbFN1cHBseTsKICAgICAgICAvLyB1cGRhdGUgdGhlIGJ1eWVyJ3MgYmFsYW5jZSB0byBudW1iZXIgb2YgdG9rZW5zIHNlbnQKICAgICAgICBiYWxhbmNlc1tfYmVuZWZpY2lhcnldID0gYmFsYW5jZXNbX2JlbmVmaWNpYXJ5XS5hZGQoX3Rva2Vuc0Ftb3VudCk7CiAgICAgICAgLy8gZXZlbnQgaXMgZmlyZWQgd2hlbiB0b2tlbnMgaXNzdWVkCiAgICAgICAgSXNzdWUoCiAgICAgICAgICAgIGlzc3VlSW5kZXgrKywKICAgICAgICAgICAgX2JlbmVmaWNpYXJ5LAogICAgICAgICAgICBfdG9rZW5zQW1vdW50CiAgICAgICAgKTsKICAgIH0KCiAgICAvLy8gQGRldiBDb21wdXRlIHRoZSBhbW91bnQgb2YgSU5HIHRva2VuIHRoYXQgY2FuIGJlIHB1cmNoYXNlZC4KICAgIC8vLyBAcGFyYW0gZXRoQW1vdW50IEFtb3VudCBvZiBFdGhlciB0byBwdXJjaGFzZSBJTkcuCiAgICAvLy8gQHJldHVybiBBbW91bnQgb2YgSU5HIHRva2VuIHRvIHB1cmNoYXNlCiAgICBmdW5jdGlvbiBjb21wdXRlVG9rZW5BbW91bnQodWludDI1NiBldGhBbW91bnQpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiB0b2tlbnMpIHsKICAgICAgICAvLy8gdGhlIHBlcmNlbnRhZ2UgdmFsdWUgKDAtMTAwKSBvZiB0aGUgZGlzY291bnQgZm9yIGVhY2ggdGllcgogICAgICAgIHVpbnQ2NCBkaXNjb3VudFBlcmNlbnRhZ2UgPSBjdXJyZW50VGllckRpc2NvdW50UGVyY2VudGFnZSgpOwoKICAgICAgICB1aW50MjU2IHRva2VuQmFzZSA9IGV0aEFtb3VudC5tdWwoQkFTRV9SQVRFKTsKICAgICAgICB1aW50MjU2IHRva2VuQm9udXMgPSB0b2tlbkJhc2UubXVsKGRpc2NvdW50UGVyY2VudGFnZSkuZGl2KDEwMCk7CgogICAgICAgIHRva2VucyA9IHRva2VuQmFzZS5hZGQodG9rZW5Cb251cyk7CiAgICB9CgogICAgLy8vIEBkZXYgRGV0ZXJtaW5lIHRoZSBjdXJyZW50IHNhbGUgdGllci4KICAgIC8vLyBAcmV0dXJuIHRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBzYWxlIHRpZXIuCiAgICBmdW5jdGlvbiBjdXJyZW50VGllckRpc2NvdW50UGVyY2VudGFnZSgpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDY0KSB7CiAgICAgICAgdWludDY0IF9ub3cgPSB1aW50NjQoYmxvY2sudGltZXN0YW1wKTsKICAgICAgICByZXF1aXJlKF9ub3cgPD0gZGF0ZTMxSmFuMjAxOCk7CgogICAgICAgIGlmKF9ub3cgPiBkYXRlMjFKYW4yMDE4KSByZXR1cm4gMDsKICAgICAgICBpZihfbm93ID4gZGF0ZTEySmFuMjAxOCkgcmV0dXJuIDE1OwogICAgICAgIGlmKF9ub3cgPiBkYXRlMjFEZWMyMDE3KSByZXR1cm4gMzU7CiAgICAgICAgcmV0dXJuIDUwOwogICAgfQoKICAgIC8vIGZ1bmN0aW9uIGdldG5vdygpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQ2NCkgewogICAgLy8gICAgIHJldHVybiB1aW50NjQoYmxvY2sudGltZXN0YW1wKTsKICAgIC8vIH0KICAgIC8vIAogICAgLy8gZnVuY3Rpb24gc2V0bm93KHVpbnQ2NCB0aW1lKSBwdWJsaWMgewogICAgLy8gICAgIF9ub3cgPSB0aW1lOwogICAgLy8gfQoKICAgIC8vLyBAZGV2IEZpbmFsaXplIHRoZSBzYWxlIGFuZCBkaXN0cmlidXRlIHRoZSByZXNlcnZlLCB0ZWFtIHRva2VucywgbG9jayB0aGUgZm91bmRlcnMgdG9rZW5zCiAgICBmdW5jdGlvbiBjbG9zZSgpIHB1YmxpYyBvbmx5T3duZXIgYmVmb3JlRW5kIHsKICAgICAgICB1aW50NjQgX25vdyA9IHVpbnQ2NChibG9jay50aW1lc3RhbXApOwoKICAgICAgICAvLy8gRmluYWwgKHNvbGQgdG9rZW5zKSAvICh0ZWFtICsgcmVzZXJ2ZSArIGZvdW5kZXJzIGZ1bmRzIHRva2VucykgPSA2NCAvIDM2IHByb3BvcnRpb24gPSAwLjU2MjUKICAgICAgICAvLy8gKHNvbGQgdG9rZW5zKSArICh0ZWFtICsgcmVzZXJ2ZSArIGZvdW5kZXJzIGZ1bmRzIHRva2VucykgPSA2NCUgKyAzNiUgPSAxMDAlCiAgICAgICAgLy8vIFRoZXJlZm9yZSwgKHRlYW0gKyByZXNlcnZlICsgZm91bmRlcnMgZnVuZHMgdG9rZW5zKSA9IDU2LjI1JSBvZiB0aGUgc29sZCB0b2tlbnMgPSAzNiUgb2YgdGhlIHRvdGFsIHRva2VucwogICAgICAgIHVpbnQyNTYgdG90YWxUb2tlbnMgPSB0b3RhbFN1cHBseS5hZGQodG90YWxTdXBwbHkubXVsKDU2MjUpLmRpdigxMDAwMCkpOwoKICAgICAgICAvLy8gVG9rZW5zIHRvIGJlIGFsbG9jYXRlZCB0byB0aGUgUmVzZXJ2ZSBmdW5kICgxMiUgb2YgdG90YWwgSU5HKQogICAgICAgIHVpbnQyNTYgcmVzZXJ2ZUZ1bmRUb2tlbnMgPSB0b3RhbFRva2Vucy5tdWwoMTIpLmRpdigxMDApOwogICAgICAgIGJhbGFuY2VzW3Jlc2VydmVGdW5kQWRkcmVzc10gPSBiYWxhbmNlc1tyZXNlcnZlRnVuZEFkZHJlc3NdLmFkZChyZXNlcnZlRnVuZFRva2Vucyk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQocmVzZXJ2ZUZ1bmRUb2tlbnMpOwogICAgICAgIC8vLyBmaXJlIGV2ZW50IHdoZW4gdG9rZW5zIGlzc3VlZAogICAgICAgIElzc3VlKAogICAgICAgICAgICBpc3N1ZUluZGV4KyssCiAgICAgICAgICAgIHJlc2VydmVGdW5kQWRkcmVzcywKICAgICAgICAgICAgcmVzZXJ2ZUZ1bmRUb2tlbnMKICAgICAgICApOwoKICAgICAgICAvLy8gVG9rZW5zIHRvIGJlIGFsbG9jYXRlZCB0byB0aGUgVGVhbSBmdW5kICgxMiUgb2YgdG90YWwgSU5HKQogICAgICAgIHVpbnQyNTYgdGVhbUZ1bmRUb2tlbnMgPSB0b3RhbFRva2Vucy5tdWwoMTIpLmRpdigxMDApOwogICAgICAgIGJhbGFuY2VzW3RlYW1GdW5kQWRkcmVzc10gPSBiYWxhbmNlc1t0ZWFtRnVuZEFkZHJlc3NdLmFkZCh0ZWFtRnVuZFRva2Vucyk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQodGVhbUZ1bmRUb2tlbnMpOwogICAgICAgIC8vLyBmaXJlIGV2ZW50IHdoZW4gdG9rZW5zIGlzc3VlZAogICAgICAgIElzc3VlKAogICAgICAgICAgICBpc3N1ZUluZGV4KyssCiAgICAgICAgICAgIHRlYW1GdW5kQWRkcmVzcywKICAgICAgICAgICAgdGVhbUZ1bmRUb2tlbnMKICAgICAgICApOwoKICAgICAgICAvLy8gVG9rZW5zIHRvIGJlIGFsbG9jYXRlZCB0byB0aGUgbG9ja2VkIEZvdW5kZXJzIGZ1bmQKICAgICAgICAvLy8gMTIlICgzIHggNCUpIG9mIHRvdGFsIElORyBhbGxvY2F0ZWQgdG8gdGhlIEZvdW5kZXJzIGZ1bmQgbG9ja2VkIGFzIGZvbGxvd3M6CiAgICAgICAgLy8vIGZpcnN0IDQlIGxvY2tlZCBmb3IgNiBtb250aHMgKDE4MyBkYXlzKQogICAgICAgIFRva2VuVGltZWxvY2sgbG9jazFfNm1vbnRocyA9IG5ldyBUb2tlblRpbWVsb2NrKHRoaXMsIGZvdW5kZXJzRnVuZEFkZHJlc3MsIF9ub3cgKyAxODMqMjQqNjAqNjApOwogICAgICAgIGZvdW5kZXJzRnVuZFRpbWVsb2NrMUFkZHJlc3MgPSBhZGRyZXNzKGxvY2sxXzZtb250aHMpOwogICAgICAgIHVpbnQyNTYgZm91bmRlcnNGdW5kMVRva2VucyA9IHRvdGFsVG9rZW5zLm11bCg0KS5kaXYoMTAwKTsKICAgICAgICAvLy8gdXBkYXRlIHRoZSBjb250cmFjdCBiYWxhbmNlIHRvIG51bWJlciBvZiB0b2tlbnMgaXNzdWVkCiAgICAgICAgYmFsYW5jZXNbZm91bmRlcnNGdW5kVGltZWxvY2sxQWRkcmVzc10gPSBiYWxhbmNlc1tmb3VuZGVyc0Z1bmRUaW1lbG9jazFBZGRyZXNzXS5hZGQoZm91bmRlcnNGdW5kMVRva2Vucyk7CiAgICAgICAgLy8vIGluY3JlYXNlIHRvdGFsIHN1cHBseSByZXNwZWN0aXZlIHRvIHRoZSB0b2tlbnMgaXNzdWVkCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoZm91bmRlcnNGdW5kMVRva2Vucyk7CiAgICAgICAgLy8vIGZpcmUgZXZlbnQgd2hlbiB0b2tlbnMgaXNzdWVkCiAgICAgICAgSXNzdWUoCiAgICAgICAgICAgIGlzc3VlSW5kZXgrKywKICAgICAgICAgICAgZm91bmRlcnNGdW5kVGltZWxvY2sxQWRkcmVzcywKICAgICAgICAgICAgZm91bmRlcnNGdW5kMVRva2VucwogICAgICAgICk7CgogICAgICAgIC8vLyBzZWNvbmQgNCUgbG9ja2VkIGZvciAxMiBtb250aHMgKDM2NSBkYXlzKQogICAgICAgIFRva2VuVGltZWxvY2sgbG9jazJfMTJtb250aHMgPSBuZXcgVG9rZW5UaW1lbG9jayh0aGlzLCBmb3VuZGVyc0Z1bmRBZGRyZXNzLCBfbm93ICsgMzY1KjI0KjYwKjYwKTsKICAgICAgICBmb3VuZGVyc0Z1bmRUaW1lbG9jazJBZGRyZXNzID0gYWRkcmVzcyhsb2NrMl8xMm1vbnRocyk7CiAgICAgICAgdWludDI1NiBmb3VuZGVyc0Z1bmQyVG9rZW5zID0gdG90YWxUb2tlbnMubXVsKDQpLmRpdigxMDApOwogICAgICAgIGJhbGFuY2VzW2ZvdW5kZXJzRnVuZFRpbWVsb2NrMkFkZHJlc3NdID0gYmFsYW5jZXNbZm91bmRlcnNGdW5kVGltZWxvY2syQWRkcmVzc10uYWRkKGZvdW5kZXJzRnVuZDJUb2tlbnMpOwogICAgICAgIC8vLyBpbmNyZWFzZSB0b3RhbCBzdXBwbHkgcmVzcGVjdGl2ZSB0byB0aGUgdG9rZW5zIGlzc3VlZAogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKGZvdW5kZXJzRnVuZDJUb2tlbnMpOwogICAgICAgIC8vLyBmaXJlIGV2ZW50IHdoZW4gdG9rZW5zIGlzc3VlZAogICAgICAgIElzc3VlKAogICAgICAgICAgICBpc3N1ZUluZGV4KyssCiAgICAgICAgICAgIGZvdW5kZXJzRnVuZFRpbWVsb2NrMkFkZHJlc3MsCiAgICAgICAgICAgIGZvdW5kZXJzRnVuZDJUb2tlbnMKICAgICAgICApOwoKICAgICAgICAvLy8gdGhpcmQgNCUgbG9ja2VkIGZvciAxOCBtb250aHMgKDU0OCBkYXlzKQogICAgICAgIFRva2VuVGltZWxvY2sgbG9jazNfMThtb250aHMgPSBuZXcgVG9rZW5UaW1lbG9jayh0aGlzLCBmb3VuZGVyc0Z1bmRBZGRyZXNzLCBfbm93ICsgNTQ4KjI0KjYwKjYwKTsKICAgICAgICBmb3VuZGVyc0Z1bmRUaW1lbG9jazNBZGRyZXNzID0gYWRkcmVzcyhsb2NrM18xOG1vbnRocyk7CiAgICAgICAgdWludDI1NiBmb3VuZGVyc0Z1bmQzVG9rZW5zID0gdG90YWxUb2tlbnMubXVsKDQpLmRpdigxMDApOwogICAgICAgIGJhbGFuY2VzW2ZvdW5kZXJzRnVuZFRpbWVsb2NrM0FkZHJlc3NdID0gYmFsYW5jZXNbZm91bmRlcnNGdW5kVGltZWxvY2szQWRkcmVzc10uYWRkKGZvdW5kZXJzRnVuZDNUb2tlbnMpOwogICAgICAgIC8vLyBpbmNyZWFzZSB0b3RhbCBzdXBwbHkgcmVzcGVjdGl2ZSB0byB0aGUgdG9rZW5zIGlzc3VlZAogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKGZvdW5kZXJzRnVuZDNUb2tlbnMpOwogICAgICAgIC8vLyBmaXJlIGV2ZW50IHdoZW4gdG9rZW5zIGlzc3VlZAogICAgICAgIElzc3VlKAogICAgICAgICAgICBpc3N1ZUluZGV4KyssCiAgICAgICAgICAgIGZvdW5kZXJzRnVuZFRpbWVsb2NrM0FkZHJlc3MsCiAgICAgICAgICAgIGZvdW5kZXJzRnVuZDNUb2tlbnMKICAgICAgICApOwoKICAgICAgICAvLy8gYnVybiB0aGUgdW5hbGxvY2F0ZWQgdG9rZW5zIC0gbm8gbW9yZSB0b2tlbnMgY2FuIGJlIGlzc3VlZCBhZnRlciB0aGlzIGxpbmUKICAgICAgICB0b2tlblNhbGVDbG9zZWQgPSB0cnVlOwoKICAgICAgICAvLy8gZm9yd2FyZCB0aGUgcmFpc2VkIGZ1bmRzIHRvIHRoZSBmdW5kIGFkZHJlc3MKICAgICAgICBmdW5kc1RyZWFzdXJ5LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgLy8vIEByZXR1cm4gaWYgdGhlIHRva2VuIHNhbGUgaXMgZmluaXNoZWQKICAgIGZ1bmN0aW9uIHNhbGVEdWUoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGRhdGUzMUphbjIwMTggPCB1aW50NjQoYmxvY2sudGltZXN0YW1wKTsKICAgIH0KCiAgICAvLy8gVHJhbnNmZXIgbGltaXRlZCBieSB0aGUgdHJhZGluZ09wZW4gbW9kaWZpZXIgKHRpbWUgaXMgMDEgRmViIDIwMTggb3IgbGF0ZXIpCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgdHJhZGluZ09wZW4gcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvLy8gVHJhbnNmZXIgbGltaXRlZCBieSB0aGUgdHJhZGluZ09wZW4gbW9kaWZpZXIgKHRpbWUgaXMgMDEgRmViIDIwMTggb3IgbGF0ZXIpCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB0cmFkaW5nT3BlbiByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KfQ=='.
	

]
