Class {
	#name : #SRT90ccba003bcdec6a61e67b4c09bd6ec4e70cba35,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT90ccba003bcdec6a61e67b4c09bd6ec4e70cba35 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuNDsKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIHsKCiAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CiAgdWludCBwdWJsaWMgZGVjaW1hbHM7CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cgp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICAvKiBDdXJyZW50IE93bmVyICovCiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogIC8qIE5ldyBvd25lciB3aGljaCBjYW4gYmUgc2V0IGluIGZ1dHVyZSAqLwogIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwoKICAvKiBldmVudCB0byBpbmRpY2F0ZSBmaW5hbGx5IG93bmVyc2hpcCBoYXMgYmVlbiBzdWNjZXNmdWxseSB0cmFuc2ZlcnJlZCBhbmQgYWNjZXB0ZWQgKi8KICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8pOwoKICAvKioKICAgKiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8qKgogICAqIFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIF9uZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKF9uZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIG5ld093bmVyID0gX25ld093bmVyOwogIH0KCiAgLyoqCiAgICogQWxsb3dzIHRoZSBuZXcgb3duZXIgdG9hY2NlcHQgb3duZXJzaGlwCiAgICovCiAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG5ld093bmVyKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCi8qCipUaGlzIGxpYnJhcnkgaXMgdXNlZCB0byBkbyBtYXRoZW1hdGljcyBzYWZlbHkKKi8KY29udHJhY3QgU2FmZU1hdGhMaWIgewogIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjPj1hKTsKICAgIHJldHVybiBjOwogIH0KfQoKCi8qKgogKiBVcGdyYWRlIGFnZW50IGludGVyZmFjZSBpbnNwaXJlZCBieSBMdW55ci4KICogVGFrZW4gYW5kIGluc3BpcmVkIGZyb20gaHR0cHM6Ly90b2tlbm1hcmtldC5uZXQKICoKICogVXBncmFkZSBhZ2VudCB0cmFuc2ZlcnMgdG9rZW5zIHRvIGEgbmV3IHZlcnNpb24gb2YgYSB0b2tlbiBjb250cmFjdC4KICogVXBncmFkZSBhZ2VudCBjYW4gYmUgc2V0IG9uIGEgdG9rZW4gYnkgdGhlIHVwZ3JhZGUgbWFzdGVyLgogKgogKiBTdGVwcyBhcmUKICogLSBVcGdyYWRlYWJsZXRva2VuLnVwZ3JhZGVNYXN0ZXIgY2FsbHMgVXBncmFkZWFibGVUb2tlbi5zZXRVcGdyYWRlQWdlbnQoKQogKiAtIEluZGl2aWR1YWwgdG9rZW4gaG9sZGVycyBjYW4gbm93IGNhbGwgVXBncmFkZWFibGVUb2tlbi51cGdyYWRlKCkKICogICAtPiBUaGlzIHJlc3VsdHMgdG8gY2FsbCBVcGdyYWRlQWdlbnQudXBncmFkZUZyb20oKSB0aGF0IGlzc3VlcyBuZXcgdG9rZW5zCiAqICAgLT4gVXBncmFkZWFibGVUb2tlbi51cGdyYWRlKCkgcmVkdWNlcyB0aGUgb3JpZ2luYWwgdG90YWwgc3VwcGx5IGJhc2VkIG9uIGFtb3VudCBvZiB1cGdyYWRlZCB0b2tlbnMKICoKICogVXBncmFkZSBhZ2VudCBpdHNlbGYgY2FuIGJlIHRoZSB0b2tlbiBjb250cmFjdCwgb3IganVzdCBhIG1pZGRsZSBtYW4gY29udHJhY3QgZG9pbmcgdGhlIGhlYXZ5IGxpZnRpbmcuCiAqLwpjb250cmFjdCBVcGdyYWRlQWdlbnQgewoKICB1aW50IHB1YmxpYyBvcmlnaW5hbFN1cHBseTsKCiAgLyoqIEludGVyZmFjZSBtYXJrZXIgKi8KICBmdW5jdGlvbiBpc1VwZ3JhZGVBZ2VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIFVwZ3JhZGUgYW1vdW50IG9mIHRva2VucyB0byBhIG5ldyB2ZXJzaW9uLgogICAqCiAgICogT25seSBjYWxsYWJsZSBieSBVcGdyYWRlYWJsZVRva2VuLgogICAqCiAgICogQHBhcmFtIF90b2tlbkhvbGRlciBBZGRyZXNzIHRoYXQgd2FudHMgdG8gdXBncmFkZSBpdHMgdG9rZW5zCiAgICogQHBhcmFtIF9hbW91bnQgTnVtYmVyIG9mIHRva2VucyB0byB1cGdyYWRlLiBUaGUgYWRkcmVzcyBtYXkgY29uc2lkZXIgdG8gaG9sZCBiYWNrIHNvbWUgYW1vdW50IG9mIHRva2VucyBpbiB0aGUgb2xkIHZlcnNpb24uCiAgICovCiAgZnVuY3Rpb24gdXBncmFkZUZyb20oYWRkcmVzcyBfdG9rZW5Ib2xkZXIsIHVpbnQyNTYgX2Ftb3VudCkgZXh0ZXJuYWw7Cn0KCgovKioKICogU3RhbmRhcmQgRVJDMjAgdG9rZW4gd2l0aCBTaG9ydCBIYW5kIEF0dGFjayBhbmQgYXBwcm92ZSgpIHJhY2UgY29uZGl0aW9uIG1pdGlnYXRpb24uCiAqCiAqIEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDoKICogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBTYWZlTWF0aExpYiB7CgogIC8qIEFjdHVhbCAgICAgICAgICAgICBvZiB0b2tlbiBob2xkZXJzICovCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAvKiBhcHByb3ZlKCkgYWxsb3dhbmNlcyAqLwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgIC8vIFNhZk1hdGhzIHdpbGwgYXV0b21hdGljYWxseSBoYW5kbGUgdGhlIG92ZXJmbG93IGNoZWNrcwogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sX3ZhbHVlKTsKICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSxfdmFsdWUpOwogICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgIHJldHVybiB0cnVlOwoKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgIHVpbnQgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzYWZlU3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZXNbX2Zyb21dLF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoX2FsbG93YW5jZSxfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwoKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoISgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCgovKioKICogQSB0b2tlbiB1cGdyYWRlIG1lY2hhbmlzbSB3aGVyZSB1c2VycyBjYW4gb3B0LWluIGFtb3VudCBvZiB0b2tlbnMgdG8gdGhlIG5leHQgc21hcnQgY29udHJhY3QgcmV2aXNpb24uCiAqIEZpcnN0IGVudmlzaW9uZWQgYnkgR29sZW0gYW5kIEx1bnlyIHByb2plY3RzLgogKiBUYWtlbiBhbmQgaW5zcGlyZWQgZnJvbSBodHRwczovL3Rva2VubWFya2V0Lm5ldAogKi8KY29udHJhY3QgWGluZmluVXBncmFkZWFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsKCiAgLyoqIENvbnRyYWN0IC8gcGVyc29uIHdobyBjYW4gc2V0IHRoZSB1cGdyYWRlIHBhdGguIFRoaXMgY2FuIGJlIHRoZSBzYW1lIGFzIHRlYW0gbXVsdGlzaWcgd2FsbGV0LCBhcyB3aGF0IGl0IGlzIHdpdGggaXRzIGRlZmF1bHQgdmFsdWUuICovCiAgYWRkcmVzcyBwdWJsaWMgdXBncmFkZU1hc3RlcjsKCiAgLyoqIFRoZSBuZXh0IGNvbnRyYWN0IHdoZXJlIHRoZSB0b2tlbnMgd2lsbCBiZSBtaWdyYXRlZC4gKi8KICBVcGdyYWRlQWdlbnQgcHVibGljIHVwZ3JhZGVBZ2VudDsKCiAgLyoqIEhvdyBtYW55IHRva2VucyB3ZSBoYXZlIHVwZ3JhZGVkIGJ5IG5vdy4gKi8KICB1aW50MjU2IHB1YmxpYyB0b3RhbFVwZ3JhZGVkOwoKICAvKioKICAgKiBVcGdyYWRlIHN0YXRlcy4KICAgKgogICAqIC0gTm90QWxsb3dlZDogVGhlIGNoaWxkIGNvbnRyYWN0IGhhcyBub3QgcmVhY2hlZCBhIGNvbmRpdGlvbiB3aGVyZSB0aGUgdXBncmFkZSBjYW4gYmd1bgogICAqIC0gV2FpdGluZ0ZvckFnZW50OiBUb2tlbiBhbGxvd3MgdXBncmFkZSwgYnV0IHdlIGRvbid0IGhhdmUgYSBuZXcgYWdlbnQgeWV0CiAgICogLSBSZWFkeVRvVXBncmFkZTogVGhlIGFnZW50IGlzIHNldCwgYnV0IG5vdCBhIHNpbmdsZSB0b2tlbiBoYXMgYmVlbiB1cGdyYWRlZCB5ZXQKICAgKiAtIFVwZ3JhZGluZzogVXBncmFkZSBhZ2VudCBpcyBzZXQgYW5kIHRoZSBiYWxhbmNlIGhvbGRlcnMgY2FuIHVwZ3JhZGUgdGhlaXIgdG9rZW5zCiAgICoKICAgKi8KICBlbnVtIFVwZ3JhZGVTdGF0ZSB7VW5rbm93biwgTm90QWxsb3dlZCwgV2FpdGluZ0ZvckFnZW50LCBSZWFkeVRvVXBncmFkZSwgVXBncmFkaW5nfQoKICAvKioKICAgKiBTb21lYm9keSBoYXMgdXBncmFkZWQgc29tZSBvZiBoaXMgdG9rZW5zLgogICAqLwogIGV2ZW50IFVwZ3JhZGUoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CgogIC8qKgogICAqIE5ldyB1cGdyYWRlIGFnZW50IGF2YWlsYWJsZS4KICAgKi8KICBldmVudCBVcGdyYWRlQWdlbnRTZXQoYWRkcmVzcyBhZ2VudCk7CgogIC8qKgogICAqIERvIG5vdCBhbGxvdyBjb25zdHJ1Y3Rpb24gd2l0aG91dCB1cGdyYWRlIG1hc3RlciBzZXQuCiAgICovCiAgZnVuY3Rpb24gWGluZmluVXBncmFkZWFibGVUb2tlbihhZGRyZXNzIF91cGdyYWRlTWFzdGVyKSB7CiAgICB1cGdyYWRlTWFzdGVyID0gX3VwZ3JhZGVNYXN0ZXI7CiAgfQoKICAvKioKICAgKiBBbGxvdyB0aGUgdG9rZW4gaG9sZGVyIHRvIHVwZ3JhZGUgc29tZSBvZiB0aGVpciB0b2tlbnMgdG8gYSBuZXcgY29udHJhY3QuCiAgICovCiAgZnVuY3Rpb24gdXBncmFkZSh1aW50MjU2IHZhbHVlKSBwdWJsaWMgewoKICAgICAgVXBncmFkZVN0YXRlIHN0YXRlID0gZ2V0VXBncmFkZVN0YXRlKCk7CiAgICAgIHJlcXVpcmUoc3RhdGUgPT0gVXBncmFkZVN0YXRlLlJlYWR5VG9VcGdyYWRlIHx8IHN0YXRlID09IFVwZ3JhZGVTdGF0ZS5VcGdyYWRpbmcpOwoKICAgICAgLy8gVmFsaWRhdGUgaW5wdXQgdmFsdWUuCiAgICAgIHJlcXVpcmUodmFsdWUgIT0gMCk7CgogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIHZhbHVlKTsKCiAgICAgIC8vIFRha2UgdG9rZW5zIG91dCBmcm9tIGNpcmN1bGF0aW9uCiAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZVN1Yih0b3RhbFN1cHBseSwgdmFsdWUpOwogICAgICB0b3RhbFVwZ3JhZGVkID0gc2FmZUFkZCh0b3RhbFVwZ3JhZGVkLCB2YWx1ZSk7CgogICAgICAvLyBVcGdyYWRlIGFnZW50IHJlaXNzdWVzIHRoZSB0b2tlbnMKICAgICAgdXBncmFkZUFnZW50LnVwZ3JhZGVGcm9tKG1zZy5zZW5kZXIsIHZhbHVlKTsKICAgICAgVXBncmFkZShtc2cuc2VuZGVyLCB1cGdyYWRlQWdlbnQsIHZhbHVlKTsKICB9CgogIC8qKgogICAqIFNldCBhbiB1cGdyYWRlIGFnZW50IHRoYXQgaGFuZGxlcwogICAqLwogIGZ1bmN0aW9uIHNldFVwZ3JhZGVBZ2VudChhZGRyZXNzIGFnZW50KSBleHRlcm5hbCB7CgoKICAgICAgLy8gVGhlIHRva2VuIGlzIG5vdCB5ZXQgaW4gYSBzdGF0ZSB0aGF0IHdlIGNvdWxkIHRoaW5rIHVwZ3JhZGluZwogICAgICByZXF1aXJlKGNhblVwZ3JhZGUoKSk7CgogICAgICByZXF1aXJlKGFnZW50ICE9IDB4MCk7CiAgICAgIC8vIE9ubHkgYSBtYXN0ZXIgY2FuIGRlc2lnbmF0ZSB0aGUgbmV4dCBhZ2VudAogICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gdXBncmFkZU1hc3Rlcik7CiAgICAgIC8vIFVwZ3JhZGUgaGFzIGFscmVhZHkgYmVndW4gZm9yIGFuIGFnZW50CiAgICAgIHJlcXVpcmUoZ2V0VXBncmFkZVN0YXRlKCkgIT0gVXBncmFkZVN0YXRlLlVwZ3JhZGluZyk7CgogICAgICB1cGdyYWRlQWdlbnQgPSBVcGdyYWRlQWdlbnQoYWdlbnQpOwoKICAgICAgLy8gQmFkIGludGVyZmFjZQogICAgICByZXF1aXJlKHVwZ3JhZGVBZ2VudC5pc1VwZ3JhZGVBZ2VudCgpKTsKICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdG9rZW4gc3VwcGxpZXMgbWF0Y2ggaW4gc291cmNlIGFuZCB0YXJnZXQKICAgICAgcmVxdWlyZSh1cGdyYWRlQWdlbnQub3JpZ2luYWxTdXBwbHkoKSA9PSB0b3RhbFN1cHBseSk7CgogICAgICBVcGdyYWRlQWdlbnRTZXQodXBncmFkZUFnZW50KTsKICB9CgogIC8qKgogICAqIEdldCB0aGUgc3RhdGUgb2YgdGhlIHRva2VuIHVwZ3JhZGUuCiAgICovCiAgZnVuY3Rpb24gZ2V0VXBncmFkZVN0YXRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoVXBncmFkZVN0YXRlKSB7CiAgICBpZighY2FuVXBncmFkZSgpKSByZXR1cm4gVXBncmFkZVN0YXRlLk5vdEFsbG93ZWQ7CiAgICBlbHNlIGlmKGFkZHJlc3ModXBncmFkZUFnZW50KSA9PSAweDAwKSByZXR1cm4gVXBncmFkZVN0YXRlLldhaXRpbmdGb3JBZ2VudDsKICAgIGVsc2UgaWYodG90YWxVcGdyYWRlZCA9PSAwKSByZXR1cm4gVXBncmFkZVN0YXRlLlJlYWR5VG9VcGdyYWRlOwogICAgZWxzZSByZXR1cm4gVXBncmFkZVN0YXRlLlVwZ3JhZGluZzsKICB9CgogIC8qKgogICAqIENoYW5nZSB0aGUgdXBncmFkZSBtYXN0ZXIuCiAgICoKICAgKiBUaGlzIGFsbG93cyB1cyB0byBzZXQgYSBuZXcgb3duZXIgZm9yIHRoZSB1cGdyYWRlIG1lY2hhbmlzbS4KICAgKi8KICBmdW5jdGlvbiBzZXRVcGdyYWRlTWFzdGVyKGFkZHJlc3MgbWFzdGVyKSBwdWJsaWMgewogICAgICByZXF1aXJlKG1hc3RlciAhPSAweDApOwogICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gdXBncmFkZU1hc3Rlcik7CiAgICAgIHVwZ3JhZGVNYXN0ZXIgPSBtYXN0ZXI7CiAgfQoKICAvKioKICAgKiBDaGlsZCBjb250cmFjdCBjYW4gZW5hYmxlIHRvIHByb3ZpZGUgdGhlIGNvbmRpdGlvbiB3aGVuIHRoZSB1cGdyYWRlIGNhbiBiZWd1bi4KICAgKi8KICBmdW5jdGlvbiBjYW5VcGdyYWRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgIHJldHVybiB0cnVlOwogIH0KCn0KCgovKioKICogRGVmaW5lIGludGVyZmFjZSBmb3IgcmVsZWFzaW5nIHRoZSB0b2tlbiB0cmFuc2ZlciBhZnRlciBhIHN1Y2Nlc3NmdWwgY3Jvd2RzYWxlLgogKiBUYWtlbiBhbmQgaW5zcGlyZWQgZnJvbSBodHRwczovL3Rva2VubWFya2V0Lm5ldAogKi8KY29udHJhY3QgUmVsZWFzYWJsZVRva2VuIGlzIEVSQzIwLCBPd25hYmxlIHsKCiAgLyogVGhlIGZpbmFsaXplciBjb250cmFjdCB0aGF0IGFsbG93cyB1bmxpZnQgdGhlIHRyYW5zZmVyIGxpbWl0cyBvbiB0aGlzIHRva2VuICovCiAgYWRkcmVzcyBwdWJsaWMgcmVsZWFzZUFnZW50OwoKICAvKiogQSBjcm93ZHNhbGUgY29udHJhY3QgY2FuIHJlbGVhc2UgdXMgdG8gdGhlIHdpbGQgaWYgSUNPIHN1Y2Nlc3MuIElmIGZhbHNlIHdlIGFyZSBhcmUgaW4gdHJhbnNmZXIgbG9jayB1cCBwZXJpb2QuKi8KICBib29sIHB1YmxpYyByZWxlYXNlZCA9IGZhbHNlOwoKICAvKiogTWFwIG9mIGFnZW50cyB0aGF0IGFyZSBhbGxvd2VkIHRvIHRyYW5zZmVyIHRva2VucyByZWdhcmRsZXNzIG9mIHRoZSBsb2NrIGRvd24gcGVyaW9kLiBUaGVzZSBhcmUgY3Jvd2RzYWxlIGNvbnRyYWN0cyBhbmQgcG9zc2libGUgdGhlIHRlYW0gbXVsdGlzaWcgaXRzZWxmLiAqLwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHRyYW5zZmVyQWdlbnRzOwoKICAvKioKICAgKiBMaW1pdCB0b2tlbiB0cmFuc2ZlciB1bnRpbCB0aGUgY3Jvd2RzYWxlIGlzIG92ZXIuCiAgICoKICAgKi8KICBtb2RpZmllciBjYW5UcmFuc2ZlcihhZGRyZXNzIF9zZW5kZXIpIHsKCiAgICBpZighcmVsZWFzZWQpIHsKICAgICAgICByZXF1aXJlKHRyYW5zZmVyQWdlbnRzW19zZW5kZXJdKTsKICAgIH0KCiAgICBfOwogIH0KCiAgLyoqCiAgICogU2V0IHRoZSBjb250cmFjdCB0aGF0IGNhbiBjYWxsIHJlbGVhc2UgYW5kIG1ha2UgdGhlIHRva2VuIHRyYW5zZmVyYWJsZS4KICAgKi8KICBmdW5jdGlvbiBzZXRSZWxlYXNlQWdlbnQoYWRkcmVzcyBhZGRyKSBvbmx5T3duZXIgaW5SZWxlYXNlU3RhdGUoZmFsc2UpIHB1YmxpYyB7CgogICAgLy8gV2UgZG9uJ3QgZG8gaW50ZXJmYWNlIGNoZWNrIGhlcmUgYXMgd2UgbWlnaHQgd2FudCB0byBhIG5vcm1hbCB3YWxsZXQgYWRkcmVzcyB0byBhY3QgYXMgYSByZWxlYXNlIGFnZW50CiAgICByZWxlYXNlQWdlbnQgPSBhZGRyOwogIH0KCiAgLyoqCiAgICogT3duZXIgY2FuIGFsbG93IGEgcGFydGljdWxhciBhZGRyZXNzIChhIGNyb3dkc2FsZSBjb250cmFjdCkgdG8gdHJhbnNmZXIgdG9rZW5zIGRlc3BpdGUgdGhlIGxvY2sgdXAgcGVyaW9kLgogICAqLwogIGZ1bmN0aW9uIHNldFRyYW5zZmVyQWdlbnQoYWRkcmVzcyBhZGRyLCBib29sIHN0YXRlKSBvbmx5T3duZXIgaW5SZWxlYXNlU3RhdGUoZmFsc2UpIHB1YmxpYyB7CiAgICB0cmFuc2ZlckFnZW50c1thZGRyXSA9IHN0YXRlOwogIH0KCiAgLyoqCiAgICogT25lIHdheSBmdW5jdGlvbiB0byByZWxlYXNlIHRoZSB0b2tlbnMgdG8gdGhlIHdpbGQuCiAgICoKICAgKiBDYW4gYmUgY2FsbGVkIG9ubHkgZnJvbSB0aGUgcmVsZWFzZSBhZ2VudCB0aGF0IGlzIHRoZSBmaW5hbCBJQ08gY29udHJhY3QuIEl0IGlzIG9ubHkgY2FsbGVkIGlmIHRoZSBjcm93ZHNhbGUgaGFzIGJlZW4gc3VjY2VzcyAoZmlyc3QgbWlsZXN0b25lIHJlYWNoZWQpLgogICAqLwogIGZ1bmN0aW9uIHJlbGVhc2VUb2tlblRyYW5zZmVyKCkgcHVibGljIG9ubHlSZWxlYXNlQWdlbnQgewogICAgcmVsZWFzZWQgPSB0cnVlOwogIH0KCiAgLyoqIFRoZSBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIG9ubHkgYmVmb3JlIG9yIGFmdGVyIHRoZSB0b2tlbnMgaGF2ZSBiZWVuIHJlbGVhc2VzZCAqLwogIG1vZGlmaWVyIGluUmVsZWFzZVN0YXRlKGJvb2wgcmVsZWFzZVN0YXRlKSB7CiAgICByZXF1aXJlKHJlbGVhc2VTdGF0ZSA9PSByZWxlYXNlZCk7CiAgICBfOwogIH0KCiAgLyoqIFRoZSBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIG9ubHkgYnkgYSB3aGl0ZWxpc3RlZCByZWxlYXNlIGFnZW50LiAqLwogIG1vZGlmaWVyIG9ubHlSZWxlYXNlQWdlbnQoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gcmVsZWFzZUFnZW50KTsKICAgIF87CiAgfQoKCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBjYW5UcmFuc2Zlcihtc2cuc2VuZGVyKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIC8vIENhbGwgU3RhbmRhcmRUb2tlbi50cmFuc2ZlcigpCiAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBjYW5UcmFuc2ZlcihfZnJvbSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAvLyBDYWxsIFN0YW5kYXJkVG9rZW4udHJhbnNmZXJGcm9tKCkKICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9Cgp9CgoKY29udHJhY3QgQ29pbiBpcyBYaW5maW5VcGdyYWRlYWJsZVRva2VuLCBSZWxlYXNhYmxlVG9rZW4gewoKICBldmVudCBVcGRhdGVkVG9rZW5JbmZvcm1hdGlvbihzdHJpbmcgbmV3TmFtZSwgc3RyaW5nIG5ld1N5bWJvbCk7CgogIC8qIG5hbWUgb2YgdGhlIHRva2VuICovCiAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIlhpbkZpbiBYRENFIjsKCiAgLyogc3ltYm9sIG9mIHRoZSB0b2tlbiAqLwogIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlhEQ0UiOwoKICAvKiB0b2tlbiBkZWNpbWFscyB0byBoYW5kbGUgZnJhY3Rpb25zICovCiAgdWludCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKCiAgLy9Dcm93ZHNhbGUgcnVubmluZwogIGJvb2wgcHVibGljIGlzQ3Jvd2RzYWxlT3Blbj1mYWxzZTsKCiAgLyogaW5pdGlhbCB0b2tlbiBzdXBwbHkgKi8KICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseSA9IDE1MDAwMDAwMDAwICogKDEwICoqIGRlY2ltYWxzKTsKICB1aW50IHB1YmxpYyBvblNhbGVUb2tlbnMgPSAxMDAwMDAwMDAwMCAqICgxMCAqKiBkZWNpbWFscyk7CgoKICB1aW50IHRva2Vuc0ZvclB1YmxpY1NhbGUgPSAwOwogIC8vdWludCBtYXhUb2tlbnNGb3JXaGl0ZWxpc3RlciA9IDA7CgogIC8qKiBDdXN0b21lciB3aGl0ZWxpc3RlZCBhZGRyZXNzIG1hcHBpbmcgKi8KICAvL21hcHBpbmcoYWRkcmVzcyA9PiBib29sKSB3aGl0ZWxpc3RlZEFkZHJlc3M7CgogIGFkZHJlc3MgY29udHJhY3RBZGRyZXNzOwoKICB1aW50MjU2IHByaWNlUGVyVG9rZW4gPSA3NTE4Nzk2OTkyNDgxOyAvLzEgRXRoID0gMTMzMDAwIFhEQ0UKCiAgdWludCBtaW5FVEggPSAwICogMTAqKmRlY2ltYWxzOyAvLyAwIGV0aGVyCiAgdWludCBtYXhFVEggPSAxNSAqIDEwKipkZWNpbWFsczsgLy8gMTUgZXRoZXIKCiAgZnVuY3Rpb24gQ29pbigpIFhpbmZpblVwZ3JhZGVhYmxlVG9rZW4obXNnLnNlbmRlcikgewoKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIGNvbnRyYWN0QWRkcmVzcyA9IGFkZHJlc3ModGhpcyk7CiAgICAvL3Rva2VucyBhcmUga2VwdCBpbiBjb250cmFjdCBhZGRyZXNzIHJhdGhlciB0aGFuIG93bmVyCiAgICBiYWxhbmNlc1tjb250cmFjdEFkZHJlc3NdID0gdG90YWxTdXBwbHk7CiAgfQoKICAvKiBmdW5jdGlvbiB0byB1cGRhdGUgdG9rZW4gbmFtZSBhbmQgc3ltYm9sICovCiAgZnVuY3Rpb24gdXBkYXRlVG9rZW5JbmZvcm1hdGlvbihzdHJpbmcgX25hbWUsIHN0cmluZyBfc3ltYm9sKSBvbmx5T3duZXIgewogICAgbmFtZSA9IF9uYW1lOwogICAgc3ltYm9sID0gX3N5bWJvbDsKICAgIFVwZGF0ZWRUb2tlbkluZm9ybWF0aW9uKG5hbWUsIHN5bWJvbCk7CiAgfQoKCiAgZnVuY3Rpb24gc2VuZFRva2Vuc1RvT3duZXIodWludCBfdG9rZW5zKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBvayl7CiAgICAgIHJlcXVpcmUoYmFsYW5jZXNbY29udHJhY3RBZGRyZXNzXSA+PSBfdG9rZW5zKTsKICAgICAgYmFsYW5jZXNbY29udHJhY3RBZGRyZXNzXSA9IHNhZmVTdWIoYmFsYW5jZXNbY29udHJhY3RBZGRyZXNzXSxfdG9rZW5zKTsKICAgICAgYmFsYW5jZXNbb3duZXJdID0gc2FmZUFkZChiYWxhbmNlc1tvd25lcl0sX3Rva2Vucyk7CiAgICAgIHJldHVybiB0cnVlOwogIH0KCgogIC8qIHNpbmdsZSBhZGRyZXNzICovCiAgZnVuY3Rpb24gc2VuZFRva2Vuc1RvSW52ZXN0b3JzKGFkZHJlc3MgX2ludmVzdG9yLCB1aW50IF90b2tlbnMpIG9ubHlPd25lciByZXR1cm5zIChib29sIG9rKXsKICAgICAgcmVxdWlyZShiYWxhbmNlc1tjb250cmFjdEFkZHJlc3NdID49IF90b2tlbnMpOwogICAgICBvblNhbGVUb2tlbnMgPSBzYWZlU3ViKG9uU2FsZVRva2VucywgX3Rva2Vucyk7CiAgICAgIGJhbGFuY2VzW2NvbnRyYWN0QWRkcmVzc10gPSBzYWZlU3ViKGJhbGFuY2VzW2NvbnRyYWN0QWRkcmVzc10sX3Rva2Vucyk7CiAgICAgIGJhbGFuY2VzW19pbnZlc3Rvcl0gPSBzYWZlQWRkKGJhbGFuY2VzW19pbnZlc3Rvcl0sX3Rva2Vucyk7CiAgICAgIHJldHVybiB0cnVlOwogIH0KCgoKICAvKiBBIGRpc3BlbnNlIGZlYXR1cmUgdG8gYWxsb2NhdGUgc29tZSBhZGRyZXNzZXMgd2l0aCBYaW5maW4gdG9rZW5zCiAgKiBjYWxjdWxhdGlvbiBkb25lIHVzaW5nIHRva2VuIGNvdW50CiAgKiAgQ2FuIGJlIGNhbGxlZCBvbmx5IGJ5IG93bmVyCiAgKi8KICBmdW5jdGlvbiBkaXNwZW5zZVRva2Vuc1RvSW52ZXN0b3JBZGRyZXNzZXNCeVZhbHVlKGFkZHJlc3NbXSBfYWRkcmVzc2VzLCB1aW50W10gX3ZhbHVlKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBvayl7CiAgICAgcmVxdWlyZShfYWRkcmVzc2VzLmxlbmd0aCA9PSBfdmFsdWUubGVuZ3RoKTsKICAgICBmb3IodWludDI1NiBpPTA7IGk8X2FkZHJlc3Nlcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgb25TYWxlVG9rZW5zID0gc2FmZVN1YihvblNhbGVUb2tlbnMsIF92YWx1ZVtpXSk7CiAgICAgICAgYmFsYW5jZXNbX2FkZHJlc3Nlc1tpXV0gPSBzYWZlQWRkKGJhbGFuY2VzW19hZGRyZXNzZXNbaV1dLCBfdmFsdWVbaV0pOwogICAgICAgIGJhbGFuY2VzW2NvbnRyYWN0QWRkcmVzc10gPSBzYWZlU3ViKGJhbGFuY2VzW2NvbnRyYWN0QWRkcmVzc10sIF92YWx1ZVtpXSk7CiAgICAgfQogICAgIHJldHVybiB0cnVlOwogIH0KCgogIGZ1bmN0aW9uIHN0YXJ0Q3Jvd2RTYWxlKCkgb25seU93bmVyIHsKICAgICBpc0Nyb3dkc2FsZU9wZW49dHJ1ZTsKICB9CgogICBmdW5jdGlvbiBzdG9wQ3Jvd2RTYWxlKCkgb25seU93bmVyIHsKICAgICBpc0Nyb3dkc2FsZU9wZW49ZmFsc2U7CiAgfQoKCiBmdW5jdGlvbiBzZXRQdWJsaWNTYWxlUGFyYW1zKHVpbnQgX3Rva2Vuc0ZvclB1YmxpY1NhbGUsIHVpbnQgX21pbiwgdWludCBfbWF4LCBib29sIF9jcm93ZHNhbGVTdGF0dXMgKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShfdG9rZW5zRm9yUHVibGljU2FsZSAhPSAwKTsKICAgIHJlcXVpcmUoX3Rva2Vuc0ZvclB1YmxpY1NhbGUgPD0gb25TYWxlVG9rZW5zKTsKICAgIHRva2Vuc0ZvclB1YmxpY1NhbGUgPSBfdG9rZW5zRm9yUHVibGljU2FsZTsKICAgIGlzQ3Jvd2RzYWxlT3Blbj1fY3Jvd2RzYWxlU3RhdHVzOwogICAgcmVxdWlyZShfbWluID49IDApOwogICAgcmVxdWlyZShfbWF4ID4gMCk7CiAgICBtaW5FVEggPSBfbWluOwogICAgbWF4RVRIID0gX21heDsKIH0KCgogICAgICBmdW5jdGlvbiBzZXRUb3RhbFRva2Vuc0ZvclB1YmxpY1NhbGUodWludCBfdmFsdWUpIG9ubHlPd25lcnsKICAgICAgcmVxdWlyZShfdmFsdWUgIT0gMCk7CiAgICAgIHRva2Vuc0ZvclB1YmxpY1NhbGUgPSBfdmFsdWU7CiAgfQoKIGZ1bmN0aW9uIGluY3JlYXNlU3VwcGx5KHVpbnQgdmFsdWUpIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCB2YWx1ZSk7CiAgYmFsYW5jZXNbY29udHJhY3RBZGRyZXNzXSA9IHNhZmVBZGQoYmFsYW5jZXNbY29udHJhY3RBZGRyZXNzXSwgdmFsdWUpOwogIFRyYW5zZmVyKDB4MCwgY29udHJhY3RBZGRyZXNzLCB2YWx1ZSk7CiAgcmV0dXJuIHRydWU7Cn0KCmZ1bmN0aW9uIGRlY3JlYXNlU3VwcGx5KHVpbnQgdmFsdWUpIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgYmFsYW5jZXNbY29udHJhY3RBZGRyZXNzXSA9IHNhZmVTdWIoYmFsYW5jZXNbY29udHJhY3RBZGRyZXNzXSwgdmFsdWUpOwogIHRvdGFsU3VwcGx5ID0gc2FmZVN1Yih0b3RhbFN1cHBseSwgdmFsdWUpOwogIFRyYW5zZmVyKGNvbnRyYWN0QWRkcmVzcywgMHgwLCB2YWx1ZSk7CiAgcmV0dXJuIHRydWU7Cn0KCiAgZnVuY3Rpb24gc2V0TWluQW5kTWF4RXRoZXJzRm9yUHVibGljU2FsZSh1aW50IF9taW4sIHVpbnQgX21heCkgb25seU93bmVyewogICAgICByZXF1aXJlKF9taW4gPj0gMCk7CiAgICAgIHJlcXVpcmUoX21heCA+IDApOwogICAgICBtaW5FVEggPSBfbWluOwogICAgICBtYXhFVEggPSBfbWF4OwogIH0KCiAgZnVuY3Rpb24gdXBkYXRlVG9rZW5QcmljZSh1aW50IF92YWx1ZSkgb25seU93bmVyewogICAgICByZXF1aXJlKF92YWx1ZSAhPSAwKTsKICAgICAgcHJpY2VQZXJUb2tlbiA9IF92YWx1ZTsKICB9CgoKICBmdW5jdGlvbiB1cGRhdGVPblNhbGVTdXBwbHkodWludCBfbmV3U3VwcGx5KSBvbmx5T3duZXJ7CiAgICAgIHJlcXVpcmUoX25ld1N1cHBseSAhPSAwKTsKICAgICAgb25TYWxlVG9rZW5zID0gX25ld1N1cHBseTsKICB9CgoKICBmdW5jdGlvbiBidXlUb2tlbnMoKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zKHVpbnQgdG9rZW5BbW91bnQpIHsKCiAgICB1aW50IF90b2tlbkFtb3VudDsKICAgIHVpbnQgbXVsdGlwbGllciA9ICgxMCAqKiBkZWNpbWFscyk7CiAgICB1aW50IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKCiAgICByZXF1aXJlKGlzQ3Jvd2RzYWxlT3Blbik7CiAgICAvL3JlcXVpcmUod2hpdGVsaXN0ZWRBZGRyZXNzW21zZy5zZW5kZXJdKTsKCiAgICByZXF1aXJlKHdlaUFtb3VudCA+PSBtaW5FVEgpOwogICAgcmVxdWlyZSh3ZWlBbW91bnQgPD0gbWF4RVRIKTsKCgoKICAgIF90b2tlbkFtb3VudCA9ICBzYWZlTXVsKHdlaUFtb3VudCxtdWx0aXBsaWVyKSAvIHByaWNlUGVyVG9rZW47CgogICAgcmVxdWlyZShfdG9rZW5BbW91bnQgPiAwKTsKCgogICAgLy9zYWZlIHN1YiB3aWxsIGF1dG9tYXRpY2FsbHkgaGFuZGxlIG92ZXJmbG93cwogICAgdG9rZW5zRm9yUHVibGljU2FsZSA9IHNhZmVTdWIodG9rZW5zRm9yUHVibGljU2FsZSwgX3Rva2VuQW1vdW50KTsKICAgIG9uU2FsZVRva2VucyA9IHNhZmVTdWIob25TYWxlVG9rZW5zLCBfdG9rZW5BbW91bnQpOwogICAgLy9hc3NpZ24gdG9rZW5zCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVBZGQoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIF90b2tlbkFtb3VudCk7CgogICAgLy9zZW5kIG1vbmV5IHRvIHRoZSBvd25lcgogICAgcmVxdWlyZShvd25lci5zZW5kKHdlaUFtb3VudCkpOwoKCiAgICByZXR1cm4gX3Rva2VuQW1vdW50OwoKICB9CgogIC8vIFRoZXJlIGlzIG5vIG5lZWQgZm9yIHZlc3RpbmcuIEl0IHdpbGwgYmUgZG9uZSBtYW51YWxseSBieSBtYW51YWxseSByZWxlYXNpbmcgdG9rZW5zIHRvIGNlcnRhaW4gYWRkcmVzc2VzCgogIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICAgIGJ1eVRva2VucygpOwogIH0KCn0='.
	

]
