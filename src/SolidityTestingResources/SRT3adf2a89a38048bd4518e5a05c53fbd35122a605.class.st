Class {
	#name : #SRT3adf2a89a38048bd4518e5a05c53fbd35122a605,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3adf2a89a38048bd4518e5a05c53fbd35122a605 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Ci8vICoqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gTW95VG9rZW4gT3BlbiBEaXN0cmlidXRpb24gU21hcnQgQ29udHJhY3QuCi8vIDMwLDAwMCwwMDAgdG9rZW5zIGF2YWlsYWJsZSB2aWEgdW5pcXVlIE9wZW4gRGlzdHJpYnV0aW9uLiAKLy8gUE9XVG9rZW5zIENvbnRyYWN0IEAgUE9XVG9rZW4uZXRoCi8vIE9wZW4gRHNpdHJpYnV0aW9uIE9wZW5zIGF0IHRoZSAxc3QgQmxvY2sgb2YgMjAxOC4KLy8gQWxsIG9wZXJhdGlvbnMgY2FuIGJlIG1vbml0b3JlZCBhdCBldGhlcnNjYW4uaW8KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIEVSQyBUb2tlbiBTdGFuZGFyZCAjMjAgSW50ZXJmYWNlCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpjb250cmFjdCBvd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBmdW5jdGlvbiBvd25lZCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQp9Cgpjb250cmFjdCBzYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZU11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIHNhZmVBc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHNhZmVBc3NlcnQoYiA+IDApOwogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICBzYWZlQXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVTdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgc2FmZUFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIHNhZmVBc3NlcnQoYz49YSAmJiBjPj1iKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgcHVyZSB7CiAgICBpZiAoIWFzc2VydGlvbikgcmV2ZXJ0KCk7CiAgfQp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIG93bmVkLCBzYWZlTWF0aCB7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBQT1dUb2tlbk9wZW5EaXN0cmlidXRpb24gaXMgb3duZWQsIHNhZmVNYXRoIHsKICAvLyBvd25lci9hZG1pbiAmIHRva2VuIHJld2FyZAogIGFkZHJlc3MgICAgICAgIHB1YmxpYyBhZG1pbiA9IG93bmVyOyAgICAgIC8vYWRtaW4gYWRkcmVzcwogIFN0YW5kYXJkVG9rZW4gIHB1YmxpYyB0b2tlbkNvbnRyYWN0OyAgICAgLy8gYWRkcmVzcyBvZiBNb2liZVRWIE1PWSBFUkMyMCBTdGFuZGFyZCBUb2tlbi4KCiAgLy8gZGVwbG95bWVudCB2YXJpYWJsZXMgZm9yIHN0YXRpYyBzdXBwbHkgc2FsZQogIHVpbnQyNTYgcHVibGljIGluaXRpYWxTdXBwbHk7CiAgdWludDI1NiBwdWJsaWMgdG9rZW5zUmVtYWluaW5nOwoKICAvLyBtdWx0aS1zaWcgYWRkcmVzc2VzIGFuZCBwcmljZSB2YXJpYWJsZQogIGFkZHJlc3MgcHVibGljIGJ1ZGdldFdhbGxldDsgICAgICAvLyBidWRnZXRNdWx0aVNpZyBmb3IgUG93ZXJMaW5lVXAuCiAgdWludDI1NiBwdWJsaWMgdG9rZW5zUGVyRXRoUHJpY2U7ICAgICAgLy8gc2V0IGluaXRpYWwgdmFsdWUgZmxvYXRpbmcgcHJpY2VWYXIuCiAgICAKICAvLyB1aW50MjU2IHZhbHVlcyBmb3IgbWluLG1heCxjYXBzLHRyYWNraW5nCiAgdWludDI1NiBwdWJsaWMgYW1vdW50UmFpc2VkOyAgICAgICAgICAgICAgICAgICAgICAgICAgIAogIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdDYXA7ICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgLy8gbG9vcCBjb250cm9sLCBzdGFydHVwIGFuZCBsaW1pdGVycwogIHN0cmluZyAgcHVibGljIEN1cnJlbnRTdGF0dXMgPSAiIjsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgT3BlbkRpc3RyaWJ1dGlvbiBzdGF0dXMKICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nU3RhcnRCbG9jazsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVuRGlzdHJpYnV0aW9uIHN0YXJ0IGJsb2NrIwogIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdFbmRCbG9jazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZW5EaXN0cmlidXRpb24gZW5kIGJsb2NrIwogIGJvb2wgICAgcHVibGljIGlzT3BlbkRpc3RyaWJ1dGlvbkNsb3NlZCA9IGZhbHNlOyAgICAgICAgICAgIC8vIE9wZW5EaXN0cmlidXRpb24gY29tcGxldGlvbiBib29sZWFuCiAgYm9vbCAgICBwdWJsaWMgYXJlRnVuZHNSZWxlYXNlZFRvQnVkZ2V0PSBmYWxzZTsgICAgICAgICAgICAgLy8gYm9vbGVhbiBmb3IgTW9pYmVUViB0byByZWNlaXZlIEV0aCBvciBub3QsIHRoaXMgYWxsb3dzIE1vaWJlVFYgdG8gdXNlIEV0aGVyIG9ubHkgaWYgZ29hbCByZWFjaGVkLgogIGJvb2wgICAgcHVibGljIGlzT3BlbkRpc3RyaWJ1dGlvblNldHVwID0gZmFsc2U7ICAgICAgICAgICAgIC8vIGJvb2xlYW4gZm9yIE9wZW5EaXN0cmlidXRpb24gc2V0dXAKCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7IAogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogIGV2ZW50IEJ1eShhZGRyZXNzIGluZGV4ZWQgX3NlbmRlciwgdWludDI1NiBfZXRoLCB1aW50MjU2IF9NT1kpOwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlc0FycmF5OwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBmdW5kVmFsdWU7CgogIC8vIGRlZmF1bHQgZnVuY3Rpb24sIG1hcCBhZG1pbgogIGZ1bmN0aW9uIFBPV1Rva2VuT3BlbkRpc3RyaWJ1dGlvbigpIHB1YmxpYyBvbmx5T3duZXIgewogICAgYWRtaW4gPSBtc2cuc2VuZGVyOwogICAgQ3VycmVudFN0YXR1cyA9ICJUb2tlbnMgUmVsZWFzZWQsIE9wZW4gRGlzdHJpYnV0aW9uIGRlcGxveWVkIHRvIGNoYWluIjsKICB9CgogIC8vIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgaW5pdGlhbGx5CiAgZnVuY3Rpb24gaW5pdGlhbE1veVN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2VuVG90YWxTdXBwbHkpIHsKICAgICAgdG9rZW5Ub3RhbFN1cHBseSA9IHNhZmVEaXYoaW5pdGlhbFN1cHBseSwxMDAwMDAwMDAwMDAwMDAwMDAwKTsKICB9CgogIC8vIHJlbWFpbmluZyBudW1iZXIgb2YgdG9rZW5zCiAgZnVuY3Rpb24gcmVtYWluaW5nU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG9rZW5zTGVmdCkgewogICAgICB0b2tlbnNMZWZ0ID0gdG9rZW5zUmVtYWluaW5nOwogIH0KCiAgLy8gc2V0dXAgdGhlIE9wZW5EaXN0cmlidXRpb24gcGFyYW1ldGVycwogIGZ1bmN0aW9uIHNldHVwT3BlbkRpc3RyaWJ1dGlvbih1aW50MjU2IF9mdW5kaW5nU3RhcnRCbG9jaywgdWludDI1NiBfZnVuZGluZ0VuZEJsb2NrLCBhZGRyZXNzIF90b2tlbkNvbnRyYWN0LCBhZGRyZXNzIF9idWRnZXRXYWxsZXQpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYnl0ZXMzMiByZXNwb25zZSkgewogICAgICBpZiAoKG1zZy5zZW5kZXIgPT0gYWRtaW4pCiAgICAgICYmICghKGlzT3BlbkRpc3RyaWJ1dGlvblNldHVwKSkKICAgICAgJiYgKCEoYnVkZ2V0V2FsbGV0ID4gMCkpKXsKICAgICAgICAgIC8vIGluaXQgYWRkcmVzc2VzCiAgICAgICAgICB0b2tlbkNvbnRyYWN0ID0gU3RhbmRhcmRUb2tlbihfdG9rZW5Db250cmFjdCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL01vaWJlVFYgTU9ZIHRva2VucyBTbWFydCBDb250cmFjdC4KICAgICAgICAgIGJ1ZGdldFdhbGxldCA9IF9idWRnZXRXYWxsZXQ7ICAgICAgICAgICAgICAgICAvL0J1ZGdldCBtdWx0aXNpZy4KICAgICAgICAgIHRva2Vuc1BlckV0aFByaWNlID0gMTAwMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUmVndWxhciBQcmljZSAxIEVUSCA9IDEwMDAgTU9ZLgogICAgICAgICAgCiAgICAgICAgICBmdW5kaW5nQ2FwID0gMzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgLy8gdXBkYXRlIHZhbHVlcwogICAgICAgICAgYW1vdW50UmFpc2VkID0gMDsKICAgICAgICAgIGluaXRpYWxTdXBwbHkgPSAzMDAwMDAwMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgdG9rZW5zUmVtYWluaW5nID0gc2FmZURpdihpbml0aWFsU3VwcGx5LDEpOwoKICAgICAgICAgIGZ1bmRpbmdTdGFydEJsb2NrID0gX2Z1bmRpbmdTdGFydEJsb2NrOwogICAgICAgICAgZnVuZGluZ0VuZEJsb2NrID0gX2Z1bmRpbmdFbmRCbG9jazsKCiAgICAgICAgICAvLyBjb25maWd1cmUgT3BlbkRpc3RyaWJ1dGlvbgogICAgICAgICAgaXNPcGVuRGlzdHJpYnV0aW9uU2V0dXAgPSB0cnVlOwogICAgICAgICAgaXNPcGVuRGlzdHJpYnV0aW9uQ2xvc2VkID0gZmFsc2U7CiAgICAgICAgICBDdXJyZW50U3RhdHVzID0gIk9wZW5EaXN0cmlidXRpb24gaXMgc2V0dXAiOwoKICAgICAgICAgIC8vZ2FzIHJlZHVjdGlvbiBleHBlcmltZW50CiAgICAgICAgICBzZXRQcmljZSgpOwogICAgICAgICAgcmV0dXJuICJPcGVuRGlzdHJpYnV0aW9uIGlzIHNldHVwIjsKICAgICAgfSBlbHNlIGlmIChtc2cuc2VuZGVyICE9IGFkbWluKSB7CiAgICAgICAgICByZXR1cm4gIk5vdCBBdXRob3JpemVkIjsKICAgICAgfSBlbHNlICB7CiAgICAgICAgICByZXR1cm4gIkNhbXBhaWduIGNhbm5vdCBiZSBjaGFuZ2VkLiI7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRQcmljZSgpIHB1YmxpYyB7ICAvL1ZlcmlmaWNhciBzaSBlcyBuZWNlc2FyaW8gcXVlIHNlYSBwJiMyNTA7YmxpY2EuIAoKICAgICAgLy9GdW5kaW5nIFN0YXJ0cyBhdCB0aGUgMXN0IEJsb2NrIG9mIHRoZSBZZWFyLiBUaGUgdmVyeSAxc3QgYmxvY2sgb2YgdGhlIHllYXIgaXMgNDgzMDc3MSBVVEMrMTQoQ2hyaXN0bWFzIElzbGFuZHMpLiAgICAgIAogICAgICAvL0FmdGVyIHRoYXQsIGFsbCB0aGUgQ3Jvd2RTYWxlIGlzIG1lYXN1cmVkIGluIFVUQy0xMShGaWppKSwgdG8gZ2l2ZSBjaGFuY2UgdW50aWwgdGhlIHZlcnkgbGFzdCBibG9jayBvZiBlYWNoIGRheS4gICAgCiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA+PSBmdW5kaW5nU3RhcnRCbG9jayAmJiBibG9jay5udW1iZXIgPD0gZnVuZGluZ1N0YXJ0QmxvY2srMTE1MjApIHsgLy8gRmlyc3QgRGF5IDMwMCUgQm9udXMsIDEgRVRIID0gMzAwMCBNT1kuCiAgICAgICAgdG9rZW5zUGVyRXRoUHJpY2UgPSAzMDAwOyAKICAgICAgfSBlbHNlIGlmIChibG9jay5udW1iZXIgPj0gZnVuZGluZ1N0YXJ0QmxvY2srMTE1MjEgJiYgYmxvY2subnVtYmVyIDw9IGZ1bmRpbmdTdGFydEJsb2NrKzQ2MDgwKSB7IC8vIEZpcnN0IFdlZWsgMjAwJSBCb251cywgMSBFVEggPSAyMDAwIE1PWS4KICAgICAgICB0b2tlbnNQZXJFdGhQcmljZSA9IDIwMDA7IC8vUmVndWxhciBQcmljZSBmb3IgQWxsIFN0YWdlcy4KICAgICAgfSBlbHNlIGlmIChibG9jay5udW1iZXIgPj0gZnVuZGluZ1N0YXJ0QmxvY2srNDYwODEgJiYgYmxvY2subnVtYmVyIDw9IGZ1bmRpbmdTdGFydEJsb2NrKzg2NDAwKSB7IC8vIFNlY29uZCBXZWVrIDE1MCUgQm9udXMsIDEgRVRIID0gMTUwMCBNT1kuCiAgICAgICAgdG9rZW5zUGVyRXRoUHJpY2UgPSAyMDAwOyAvL1JlZ3VsYXIgUHJpY2UgZm9yIEFsbCBTdGFnZXMuCiAgICAgIH0gZWxzZSBpZiAoYmxvY2subnVtYmVyID49IGZ1bmRpbmdTdGFydEJsb2NrKzg2NDAxICYmIGJsb2NrLm51bWJlciA8PSBmdW5kaW5nRW5kQmxvY2spIHsgLy8gUmVndWxhciBTYWxlLCBmaW5hbCBwcmljZSBmb3IgYWxsIHVzZXJzIDEgRVRIID0gMTAwMCBNT1kuIAogICAgICAgIHRva2Vuc1BlckV0aFByaWNlID0gMTAwMDsgLy9SZWd1bGFyIFByaWNlIGZvciBBbGwgU3RhZ2VzLgogICAgICB9ICAKICAgICAgICAgfQoKICAgIC8vIGRlZmF1bHQgcGF5YWJsZSBmdW5jdGlvbiB3aGVuIHNlbmRpbmcgZXRoZXIgdG8gdGhpcyBjb250cmFjdAogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgICByZXF1aXJlKG1zZy5kYXRhLmxlbmd0aCA9PSAwKTsKICAgICAgQnV5TU9ZVG9rZW5zKCk7CiAgICB9CgogICAgZnVuY3Rpb24gQnV5TU9ZVG9rZW5zKCkgcHVibGljIHBheWFibGUgewogICAgICAvLyAwLiBjb25kaXRpb25zIChsZW5ndGgsIE9wZW5EaXN0cmlidXRpb24gc2V0dXAsIHplcm8gY2hlY2ssIGV4Y2VlZCBmdW5kaW5nIGNvbnRyaWIgY2hlY2ssIGNvbnRyYWN0IHZhbGlkIGNoZWNrLCB3aXRoaW4gZnVuZGluZyBibG9jayByYW5nZSBjaGVjaywgYmFsYW5jZSBvdmVyZmxvdyBjaGVjayBldGMuKQogICAgICByZXF1aXJlKCEobXNnLnZhbHVlID09IDApCiAgICAgICYmIChpc09wZW5EaXN0cmlidXRpb25TZXR1cCkKICAgICAgJiYgKGJsb2NrLm51bWJlciA+PSBmdW5kaW5nU3RhcnRCbG9jaykKICAgICAgJiYgKGJsb2NrLm51bWJlciA8PSBmdW5kaW5nRW5kQmxvY2spCiAgICAgICYmICh0b2tlbnNSZW1haW5pbmcgPiAwKSk7CgogICAgICAvLyAxLiB2YXJzCiAgICAgIHVpbnQyNTYgcmV3YXJkVHJhbnNmZXJBbW91bnQgPSAwOwoKICAgICAgLy8gMi4gZWZmZWN0cwogICAgICBzZXRQcmljZSgpOwogICAgICBhbW91bnRSYWlzZWQgPSBzYWZlQWRkKGFtb3VudFJhaXNlZCxtc2cudmFsdWUpOwogICAgICByZXdhcmRUcmFuc2ZlckFtb3VudCA9IHNhZmVEaXYoc2FmZU11bChtc2cudmFsdWUsdG9rZW5zUGVyRXRoUHJpY2UpLDEpOwoKICAgICAgLy8gMy4gaW50ZXJhY3Rpb24KICAgICAgdG9rZW5zUmVtYWluaW5nID0gc2FmZVN1Yih0b2tlbnNSZW1haW5pbmcsIHNhZmVEaXYocmV3YXJkVHJhbnNmZXJBbW91bnQsMSkpOyAgLy8gd2lsbCBjYXVzZSB0aHJvdyBpZiBhdHRlbXB0IHRvIHB1cmNoYXNlIG92ZXIgdGhlIHRva2VuIGxpbWl0IGluIG9uZSB0eCBvciBhdCBhbGwgb25jZSBsaW1pdCByZWFjaGVkLgogICAgICB0b2tlbkNvbnRyYWN0LnRyYW5zZmVyKG1zZy5zZW5kZXIsIHJld2FyZFRyYW5zZmVyQW1vdW50KTsKCiAgICAgIC8vIDQuIGV2ZW50cwogICAgICBmdW5kVmFsdWVbbXNnLnNlbmRlcl0gPSBzYWZlQWRkKGZ1bmRWYWx1ZVttc2cuc2VuZGVyXSwgbXNnLnZhbHVlKTsKICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgCiAgICAgIEJ1eShtc2cuc2VuZGVyLCBtc2cudmFsdWUsIHJld2FyZFRyYW5zZmVyQW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBidWRnZXRNdWx0aVNpZ1dpdGhkcmF3KHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgIHJlcXVpcmUoYXJlRnVuZHNSZWxlYXNlZFRvQnVkZ2V0ICYmIChhbW91bnRSYWlzZWQgPj0gZnVuZGluZ0NhcCkpOwogICAgICBidWRnZXRXYWxsZXQudHJhbnNmZXIoX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tHb2FsUmVhY2hlZCgpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYnl0ZXMzMiByZXNwb25zZSkgeyAvLyByZXR1cm4gT3BlbkRpc3RyaWJ1dGlvbiBzdGF0dXMgdG8gb3duZXIgZm9yIGVhY2ggcmVzdWx0IGNhc2UsIHVwZGF0ZSBwdWJsaWMgY29uc3RhbnQuCiAgICAgIC8vIHVwZGF0ZSBzdGF0ZSAmIHN0YXR1cyB2YXJpYWJsZXMKICAgICAgcmVxdWlyZSAoaXNPcGVuRGlzdHJpYnV0aW9uU2V0dXApOwogICAgICBpZiAoKGFtb3VudFJhaXNlZCA8IGZ1bmRpbmdDYXApICYmIChibG9jay5udW1iZXIgPD0gZnVuZGluZ0VuZEJsb2NrICYmIGJsb2NrLm51bWJlciA+PSBmdW5kaW5nU3RhcnRCbG9jaykpIHsgLy8gT3BlbkRpc3RyaWJ1dGlvbiBpbiBwcm9ncmVzcyB3YWl0aW5nIGZvciBoYXJkY2FwLgogICAgICAgIGFyZUZ1bmRzUmVsZWFzZWRUb0J1ZGdldCA9IGZhbHNlOwogICAgICAgIGlzT3BlbkRpc3RyaWJ1dGlvbkNsb3NlZCA9IGZhbHNlOwogICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiT3BlbkRpc3RyaWJ1dGlvbiBpbiBwcm9ncmVzcywgd2FpdGluZyB0byByZWFjaCBnb2FsLiI7CiAgICAgICAgcmV0dXJuICJPcGVuRGlzdHJpYnV0aW9uIGluIHByb2dyZXNzLiI7CiAgICAgIH0gZWxzZSBpZiAoKGFtb3VudFJhaXNlZCA8IGZ1bmRpbmdDYXApICYmIChibG9jay5udW1iZXIgPCBmdW5kaW5nU3RhcnRCbG9jaykpIHsgLy8gT3BlbkRpc3RyaWJ1dGlvbiBoYXMgbm90IHN0YXJ0ZWQuCiAgICAgICAgYXJlRnVuZHNSZWxlYXNlZFRvQnVkZ2V0ID0gZmFsc2U7CiAgICAgICAgaXNPcGVuRGlzdHJpYnV0aW9uQ2xvc2VkID0gZmFsc2U7CiAgICAgICAgQ3VycmVudFN0YXR1cyA9ICJPcGVuRGlzdHJpYnV0aW9uIGlzIHNldHVwIjsKICAgICAgICByZXR1cm4gIk9wZW5EaXN0cmlidXRpb24gaXMgc2V0dXAiOwogICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWQgPCBmdW5kaW5nQ2FwKSAmJiAoYmxvY2subnVtYmVyID4gZnVuZGluZ0VuZEJsb2NrKSkgeyAvLyBPcGVuRGlzdHJpYnV0aW9uIGVuZGVkLCB0b3RhbCBub3QgYWNoaWV2ZWQuCiAgICAgICAgYXJlRnVuZHNSZWxlYXNlZFRvQnVkZ2V0ID0gZmFsc2U7CiAgICAgICAgaXNPcGVuRGlzdHJpYnV0aW9uQ2xvc2VkID0gdHJ1ZTsKICAgICAgICBDdXJyZW50U3RhdHVzID0gIk9wZW5EaXN0cmlidXRpb24gaXMgT3Zlci4iOwogICAgICAgIHJldHVybiAiT3BlbkRpc3RyaWJ1dGlvbiBpcyBPdmVyIjsKICAgICAgfSBlbHNlIGlmICgoYW1vdW50UmFpc2VkID49IGZ1bmRpbmdDYXApICYmICh0b2tlbnNSZW1haW5pbmcgPT0gMCkpIHsgLy8gRGlzdHJpYnV0aW9uIGVuZGVkLCBhbGwgdG9rZW5zIGdvbmUuCiAgICAgICAgICBhcmVGdW5kc1JlbGVhc2VkVG9CdWRnZXQgPSB0cnVlOwogICAgICAgICAgaXNPcGVuRGlzdHJpYnV0aW9uQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiU3VjY2Vzc2Z1bCBPcGVuRGlzdHJpYnV0aW9uLiI7CiAgICAgICAgICByZXR1cm4gIlN1Y2Nlc3NmdWwgT3BlbkRpc3RyaWJ1dGlvbi4iOwogICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWQgPj0gZnVuZGluZ0NhcCkgJiYgKGJsb2NrLm51bWJlciA+IGZ1bmRpbmdFbmRCbG9jaykgJiYgKHRva2Vuc1JlbWFpbmluZyA+IDApKSB7IC8vIE9wZW5EaXN0cmlidXRpb24gZW5kZWQuCiAgICAgICAgICBhcmVGdW5kc1JlbGVhc2VkVG9CdWRnZXQgPSB0cnVlOwogICAgICAgICAgaXNPcGVuRGlzdHJpYnV0aW9uQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiU3VjY2Vzc2Z1bCBPcGVuRGlzdHJpYnV0aW9uLiI7CiAgICAgICAgICByZXR1cm4gIlN1Y2Nlc3NmdWwgT3BlbkRpc3RyaWJ1dGlvbiI7CiAgICAgIH0gZWxzZSBpZiAoKGFtb3VudFJhaXNlZCA+PSBmdW5kaW5nQ2FwKSAmJiAodG9rZW5zUmVtYWluaW5nID4gMCkgJiYgKGJsb2NrLm51bWJlciA8PSBmdW5kaW5nRW5kQmxvY2spKSB7IC8vIE9wZW5EaXN0cmlidXRpb24gaW4gcHJvZ3Jlc3MsIG9iamV0aXZlIGFjaGlldmVkIQogICAgICAgIGFyZUZ1bmRzUmVsZWFzZWRUb0J1ZGdldCA9IHRydWU7CiAgICAgICAgaXNPcGVuRGlzdHJpYnV0aW9uQ2xvc2VkID0gZmFsc2U7CiAgICAgICAgQ3VycmVudFN0YXR1cyA9ICJPcGVuRGlzdHJpYnV0aW9uIGluIFByb2dyZXNzLCBHb2FsIEFjaGlldmVkLiI7CiAgICAgICAgcmV0dXJuICJHb2FsIEFjaGlldmVkLiI7CiAgICAgIH0KICAgICAgc2V0UHJpY2UoKTsKICAgIH0KfQ=='.
	

]
