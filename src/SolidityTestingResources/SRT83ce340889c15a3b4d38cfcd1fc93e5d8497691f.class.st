Class {
	#name : #SRT83ce340889c15a3b4d38cfcd1fc93e5d8497691f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT83ce340889c15a3b4d38cfcd1fc93e5d8497691f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8vLyBhdXRoLnNvbCAtLSB3aWRlbHktdXNlZCBhY2Nlc3MgY29udHJvbCBwYXR0ZXJuIGZvciBFdGhlcmV1bQoKLy8gQ29weXJpZ2h0IChDKSAyMDE1LCAyMDE2LCAyMDE3ICBOZXh1cyBEZXZlbG9wbWVudCwgTExDCgovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKS4KLy8gWW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoKLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQovLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAovLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCAoZXhwcmVzcyBvciBpbXBsaWVkKS4KCmNvbnRyYWN0IERTQXV0aG9yaXR5IHsKICAgIGZ1bmN0aW9uIGNhbkNhbGwoCiAgICAgICAgYWRkcmVzcyBzcmMsIGFkZHJlc3MgZHN0LCBieXRlczQgc2lnCiAgICApIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwp9Cgpjb250cmFjdCBEU0F1dGhFdmVudHMgewogICAgZXZlbnQgTG9nU2V0QXV0aG9yaXR5IChhZGRyZXNzIGluZGV4ZWQgYXV0aG9yaXR5KTsKICAgIGV2ZW50IExvZ1NldE93bmVyICAgICAoYWRkcmVzcyBpbmRleGVkIG93bmVyKTsKfQoKY29udHJhY3QgRFNBdXRoIGlzIERTQXV0aEV2ZW50cyB7CiAgICBEU0F1dGhvcml0eSAgcHVibGljICBhdXRob3JpdHk7CiAgICBhZGRyZXNzICAgICAgcHVibGljICBvd25lcjsKCiAgICBmdW5jdGlvbiBEU0F1dGgoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIExvZ1NldE93bmVyKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldE93bmVyKGFkZHJlc3Mgb3duZXJfKQogICAgICAgIGF1dGgKICAgIHsKICAgICAgICBvd25lciA9IG93bmVyXzsKICAgICAgICBMb2dTZXRPd25lcihvd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0QXV0aG9yaXR5KERTQXV0aG9yaXR5IGF1dGhvcml0eV8pCiAgICAgICAgYXV0aAogICAgewogICAgICAgIGF1dGhvcml0eSA9IGF1dGhvcml0eV87CiAgICAgICAgTG9nU2V0QXV0aG9yaXR5KGF1dGhvcml0eSk7CiAgICB9CgogICAgbW9kaWZpZXIgYXV0aCB7CiAgICAgICAgYXNzZXJ0KGlzQXV0aG9yaXplZChtc2cuc2VuZGVyLCBtc2cuc2lnKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBhdXRob3JpemVkKGJ5dGVzNCBzaWcpIHsKICAgICAgICBhc3NlcnQoaXNBdXRob3JpemVkKG1zZy5zZW5kZXIsIHNpZykpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gaXNBdXRob3JpemVkKGFkZHJlc3Mgc3JjLCBieXRlczQgc2lnKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKHNyYyA9PSBvd25lcikgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGF1dGhvcml0eSA9PSBEU0F1dGhvcml0eSgwKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGF1dGhvcml0eS5jYW5DYWxsKHNyYywgdGhpcywgc2lnKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgeCkgaW50ZXJuYWwgewogICAgICAgIGlmICgheCkgdGhyb3c7CiAgICB9Cn0KCmNvbnRyYWN0IEVSQzIwIHsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCBzdXBwbHkpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKCBhZGRyZXNzIHdobyApIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdmFsdWUpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKCBhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIgKSBjb25zdGFudCByZXR1cm5zICh1aW50IF9hbGxvd2FuY2UpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSggYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoIGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSApIHJldHVybnMgKGJvb2wgb2spOwoKICAgIGV2ZW50IFRyYW5zZmVyKCBhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKCBhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsKfQoKY29udHJhY3QgRXZlbnRmdWxNYXJrZXQgewogICAgZXZlbnQgSXRlbVVwZGF0ZSggdWludCBpZCApOwogICAgZXZlbnQgVHJhZGUoIHVpbnQgc2VsbF9ob3dfbXVjaCwgYWRkcmVzcyBpbmRleGVkIHNlbGxfd2hpY2hfdG9rZW4sCiAgICAgICAgICAgICAgICAgdWludCBidXlfaG93X211Y2gsIGFkZHJlc3MgaW5kZXhlZCBidXlfd2hpY2hfdG9rZW4gKTsKCiAgICBldmVudCBMb2dNYWtlKAogICAgICAgIGJ5dGVzMzIgIGluZGV4ZWQgIGlkLAogICAgICAgIGJ5dGVzMzIgIGluZGV4ZWQgIHBhaXIsCiAgICAgICAgYWRkcmVzcyAgaW5kZXhlZCAgbWFrZXIsCiAgICAgICAgRVJDMjAgICAgICAgICAgICAgaGF2ZVRva2VuLAogICAgICAgIEVSQzIwICAgICAgICAgICAgIHdhbnRUb2tlbiwKICAgICAgICB1aW50MTI4ICAgICAgICAgICBoYXZlQW1vdW50LAogICAgICAgIHVpbnQxMjggICAgICAgICAgIHdhbnRBbW91bnQsCiAgICAgICAgdWludDY0ICAgICAgICAgICAgdGltZXN0YW1wCiAgICApOwoKICAgIGV2ZW50IExvZ0J1bXAoCiAgICAgICAgYnl0ZXMzMiAgaW5kZXhlZCAgaWQsCiAgICAgICAgYnl0ZXMzMiAgaW5kZXhlZCAgcGFpciwKICAgICAgICBhZGRyZXNzICBpbmRleGVkICBtYWtlciwKICAgICAgICBFUkMyMCAgICAgICAgICAgICBoYXZlVG9rZW4sCiAgICAgICAgRVJDMjAgICAgICAgICAgICAgd2FudFRva2VuLAogICAgICAgIHVpbnQxMjggICAgICAgICAgIGhhdmVBbW91bnQsCiAgICAgICAgdWludDEyOCAgICAgICAgICAgd2FudEFtb3VudCwKICAgICAgICB1aW50NjQgICAgICAgICAgICB0aW1lc3RhbXAKICAgICk7CgogICAgZXZlbnQgTG9nVGFrZSgKICAgICAgICBieXRlczMyICAgICAgICAgICBpZCwKICAgICAgICBieXRlczMyICBpbmRleGVkICBwYWlyLAogICAgICAgIGFkZHJlc3MgIGluZGV4ZWQgIG1ha2VyLAogICAgICAgIEVSQzIwICAgICAgICAgICAgIGhhdmVUb2tlbiwKICAgICAgICBFUkMyMCAgICAgICAgICAgICB3YW50VG9rZW4sCiAgICAgICAgYWRkcmVzcyAgaW5kZXhlZCAgdGFrZXIsCiAgICAgICAgdWludDEyOCAgICAgICAgICAgdGFrZUFtb3VudCwKICAgICAgICB1aW50MTI4ICAgICAgICAgICBnaXZlQW1vdW50LAogICAgICAgIHVpbnQ2NCAgICAgICAgICAgIHRpbWVzdGFtcAogICAgKTsKCiAgICBldmVudCBMb2dLaWxsKAogICAgICAgIGJ5dGVzMzIgIGluZGV4ZWQgIGlkLAogICAgICAgIGJ5dGVzMzIgIGluZGV4ZWQgIHBhaXIsCiAgICAgICAgYWRkcmVzcyAgaW5kZXhlZCAgbWFrZXIsCiAgICAgICAgRVJDMjAgICAgICAgICAgICAgaGF2ZVRva2VuLAogICAgICAgIEVSQzIwICAgICAgICAgICAgIHdhbnRUb2tlbiwKICAgICAgICB1aW50MTI4ICAgICAgICAgICBoYXZlQW1vdW50LAogICAgICAgIHVpbnQxMjggICAgICAgICAgIHdhbnRBbW91bnQsCiAgICAgICAgdWludDY0ICAgICAgICAgICAgdGltZXN0YW1wCiAgICApOwp9Cgpjb250cmFjdCBTaW1wbGVNYXJrZXQgaXMgRXZlbnRmdWxNYXJrZXQgewogICAgYm9vbCBsb2NrZWQ7CgogICAgbW9kaWZpZXIgc3luY2hyb25pemVkIHsKICAgICAgICBhc3NlcnQoIWxvY2tlZCk7CiAgICAgICAgbG9ja2VkID0gdHJ1ZTsKICAgICAgICBfOwogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFzc2VydChib29sIHgpIGludGVybmFsIHsKICAgICAgICBpZiAoIXgpIHRocm93OwogICAgfQoKICAgIHN0cnVjdCBPZmZlckluZm8gewogICAgICAgIHVpbnQgICAgIHNlbGxfaG93X211Y2g7CiAgICAgICAgRVJDMjAgICAgc2VsbF93aGljaF90b2tlbjsKICAgICAgICB1aW50ICAgICBidXlfaG93X211Y2g7CiAgICAgICAgRVJDMjAgICAgYnV5X3doaWNoX3Rva2VuOwogICAgICAgIGFkZHJlc3MgIG93bmVyOwogICAgICAgIGJvb2wgICAgIGFjdGl2ZTsKICAgICAgICB1aW50NjQgICB0aW1lc3RhbXA7CiAgICB9CgogICAgbWFwcGluZyAodWludCA9PiBPZmZlckluZm8pIHB1YmxpYyBvZmZlcnM7CgogICAgdWludCBwdWJsaWMgbGFzdF9vZmZlcl9pZDsKCiAgICBmdW5jdGlvbiBuZXh0X2lkKCkgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIGxhc3Rfb2ZmZXJfaWQrKzsgcmV0dXJuIGxhc3Rfb2ZmZXJfaWQ7CiAgICB9CgogICAgbW9kaWZpZXIgY2FuX29mZmVyIHsKICAgICAgICBfOwogICAgfQogICAgbW9kaWZpZXIgY2FuX2J1eSh1aW50IGlkKSB7CiAgICAgICAgYXNzZXJ0KGlzQWN0aXZlKGlkKSk7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIGNhbl9jYW5jZWwodWludCBpZCkgewogICAgICAgIGFzc2VydChpc0FjdGl2ZShpZCkpOwogICAgICAgIGFzc2VydChnZXRPd25lcihpZCkgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KICAgIGZ1bmN0aW9uIGlzQWN0aXZlKHVpbnQgaWQpIGNvbnN0YW50IHJldHVybnMgKGJvb2wgYWN0aXZlKSB7CiAgICAgICAgcmV0dXJuIG9mZmVyc1tpZF0uYWN0aXZlOwogICAgfQogICAgZnVuY3Rpb24gZ2V0T3duZXIodWludCBpZCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyBvd25lcikgewogICAgICAgIHJldHVybiBvZmZlcnNbaWRdLm93bmVyOwogICAgfQogICAgZnVuY3Rpb24gZ2V0T2ZmZXIoIHVpbnQgaWQgKSBjb25zdGFudCByZXR1cm5zICh1aW50LCBFUkMyMCwgdWludCwgRVJDMjApIHsKICAgICAgdmFyIG9mZmVyID0gb2ZmZXJzW2lkXTsKICAgICAgcmV0dXJuIChvZmZlci5zZWxsX2hvd19tdWNoLCBvZmZlci5zZWxsX3doaWNoX3Rva2VuLAogICAgICAgICAgICAgIG9mZmVyLmJ1eV9ob3dfbXVjaCwgb2ZmZXIuYnV5X3doaWNoX3Rva2VuKTsKICAgIH0KCiAgICAvLyBub24gdW5kZXJmbG93aW5nIHN1YnRyYWN0aW9uCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQogICAgLy8gbm9uIG92ZXJmbG93aW5nIG11bHRpcGxpY2F0aW9uCiAgICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFkZSggYWRkcmVzcyBzZWxsZXIsIHVpbnQgc2VsbF9ob3dfbXVjaCwgRVJDMjAgc2VsbF93aGljaF90b2tlbiwKICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIGJ1eWVyLCAgdWludCBidXlfaG93X211Y2gsICBFUkMyMCBidXlfd2hpY2hfdG9rZW4gKQogICAgICAgIGludGVybmFsCiAgICB7CiAgICAgICAgdmFyIHNlbGxlcl9wYWlkX291dCA9IGJ1eV93aGljaF90b2tlbi50cmFuc2ZlckZyb20oIGJ1eWVyLCBzZWxsZXIsIGJ1eV9ob3dfbXVjaCApOwogICAgICAgIGFzc2VydChzZWxsZXJfcGFpZF9vdXQpOwogICAgICAgIHZhciBidXllcl9wYWlkX291dCA9IHNlbGxfd2hpY2hfdG9rZW4udHJhbnNmZXIoIGJ1eWVyLCBzZWxsX2hvd19tdWNoICk7CiAgICAgICAgYXNzZXJ0KGJ1eWVyX3BhaWRfb3V0KTsKICAgICAgICBUcmFkZSggc2VsbF9ob3dfbXVjaCwgc2VsbF93aGljaF90b2tlbiwgYnV5X2hvd19tdWNoLCBidXlfd2hpY2hfdG9rZW4gKTsKICAgIH0KCiAgICAvLyAtLS0tIFB1YmxpYyBlbnRyeXBvaW50cyAtLS0tIC8vCgogICAgZnVuY3Rpb24gbWFrZSgKICAgICAgICBFUkMyMCAgICBoYXZlVG9rZW4sCiAgICAgICAgRVJDMjAgICAgd2FudFRva2VuLAogICAgICAgIHVpbnQxMjggIGhhdmVBbW91bnQsCiAgICAgICAgdWludDEyOCAgd2FudEFtb3VudAogICAgKSByZXR1cm5zIChieXRlczMyIGlkKSB7CiAgICAgICAgcmV0dXJuIGJ5dGVzMzIob2ZmZXIoaGF2ZUFtb3VudCwgaGF2ZVRva2VuLCB3YW50QW1vdW50LCB3YW50VG9rZW4pKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0YWtlKGJ5dGVzMzIgaWQsIHVpbnQxMjggbWF4VGFrZUFtb3VudCkgewogICAgICAgIGFzc2VydChidXkodWludDI1NihpZCksIG1heFRha2VBbW91bnQpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBraWxsKGJ5dGVzMzIgaWQpIHsKICAgICAgICBhc3NlcnQoY2FuY2VsKHVpbnQyNTYoaWQpKSk7CiAgICB9CgogICAgLy8gTWFrZSBhIG5ldyBvZmZlci4gVGFrZXMgZnVuZHMgZnJvbSB0aGUgY2FsbGVyIGludG8gbWFya2V0IGVzY3Jvdy4KICAgIGZ1bmN0aW9uIG9mZmVyKCB1aW50IHNlbGxfaG93X211Y2gsIEVSQzIwIHNlbGxfd2hpY2hfdG9rZW4KICAgICAgICAgICAgICAgICAgLCB1aW50IGJ1eV9ob3dfbXVjaCwgIEVSQzIwIGJ1eV93aGljaF90b2tlbiApCiAgICAgICAgY2FuX29mZmVyCiAgICAgICAgc3luY2hyb25pemVkCiAgICAgICAgcmV0dXJucyAodWludCBpZCkKICAgIHsKICAgICAgICBhc3NlcnQodWludDEyOChzZWxsX2hvd19tdWNoKSA9PSBzZWxsX2hvd19tdWNoKTsKICAgICAgICBhc3NlcnQodWludDEyOChidXlfaG93X211Y2gpID09IGJ1eV9ob3dfbXVjaCk7CiAgICAgICAgYXNzZXJ0KHNlbGxfaG93X211Y2ggPiAwKTsKICAgICAgICBhc3NlcnQoc2VsbF93aGljaF90b2tlbiAhPSBFUkMyMCgweDApKTsKICAgICAgICBhc3NlcnQoYnV5X2hvd19tdWNoID4gMCk7CiAgICAgICAgYXNzZXJ0KGJ1eV93aGljaF90b2tlbiAhPSBFUkMyMCgweDApKTsKICAgICAgICBhc3NlcnQoc2VsbF93aGljaF90b2tlbiAhPSBidXlfd2hpY2hfdG9rZW4pOwoKICAgICAgICBPZmZlckluZm8gbWVtb3J5IGluZm87CiAgICAgICAgaW5mby5zZWxsX2hvd19tdWNoID0gc2VsbF9ob3dfbXVjaDsKICAgICAgICBpbmZvLnNlbGxfd2hpY2hfdG9rZW4gPSBzZWxsX3doaWNoX3Rva2VuOwogICAgICAgIGluZm8uYnV5X2hvd19tdWNoID0gYnV5X2hvd19tdWNoOwogICAgICAgIGluZm8uYnV5X3doaWNoX3Rva2VuID0gYnV5X3doaWNoX3Rva2VuOwogICAgICAgIGluZm8ub3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGluZm8uYWN0aXZlID0gdHJ1ZTsKICAgICAgICBpbmZvLnRpbWVzdGFtcCA9IHVpbnQ2NChub3cpOwogICAgICAgIGlkID0gbmV4dF9pZCgpOwogICAgICAgIG9mZmVyc1tpZF0gPSBpbmZvOwoKICAgICAgICB2YXIgc2VsbGVyX3BhaWQgPSBzZWxsX3doaWNoX3Rva2VuLnRyYW5zZmVyRnJvbSggbXNnLnNlbmRlciwgdGhpcywgc2VsbF9ob3dfbXVjaCApOwogICAgICAgIGFzc2VydChzZWxsZXJfcGFpZCk7CgogICAgICAgIEl0ZW1VcGRhdGUoaWQpOwogICAgICAgIExvZ01ha2UoCiAgICAgICAgICAgIGJ5dGVzMzIoaWQpLAogICAgICAgICAgICBzaGEzKHNlbGxfd2hpY2hfdG9rZW4sIGJ1eV93aGljaF90b2tlbiksCiAgICAgICAgICAgIG1zZy5zZW5kZXIsCiAgICAgICAgICAgIHNlbGxfd2hpY2hfdG9rZW4sCiAgICAgICAgICAgIGJ1eV93aGljaF90b2tlbiwKICAgICAgICAgICAgdWludDEyOChzZWxsX2hvd19tdWNoKSwKICAgICAgICAgICAgdWludDEyOChidXlfaG93X211Y2gpLAogICAgICAgICAgICB1aW50NjQobm93KQogICAgICAgICk7CiAgICB9CgogICAgZnVuY3Rpb24gYnVtcChieXRlczMyIGlkXykKICAgICAgICBjYW5fYnV5KHVpbnQyNTYoaWRfKSkKICAgIHsKICAgICAgICB2YXIgaWQgPSB1aW50MjU2KGlkXyk7CiAgICAgICAgTG9nQnVtcCgKICAgICAgICAgICAgaWRfLAogICAgICAgICAgICBzaGEzKG9mZmVyc1tpZF0uc2VsbF93aGljaF90b2tlbiwgb2ZmZXJzW2lkXS5idXlfd2hpY2hfdG9rZW4pLAogICAgICAgICAgICBvZmZlcnNbaWRdLm93bmVyLAogICAgICAgICAgICBvZmZlcnNbaWRdLnNlbGxfd2hpY2hfdG9rZW4sCiAgICAgICAgICAgIG9mZmVyc1tpZF0uYnV5X3doaWNoX3Rva2VuLAogICAgICAgICAgICB1aW50MTI4KG9mZmVyc1tpZF0uc2VsbF9ob3dfbXVjaCksCiAgICAgICAgICAgIHVpbnQxMjgob2ZmZXJzW2lkXS5idXlfaG93X211Y2gpLAogICAgICAgICAgICBvZmZlcnNbaWRdLnRpbWVzdGFtcAogICAgICAgICk7CiAgICB9CgogICAgLy8gQWNjZXB0IGdpdmVuIGBxdWFudGl0eWAgb2YgYW4gb2ZmZXIuIFRyYW5zZmVycyBmdW5kcyBmcm9tIGNhbGxlciB0bwogICAgLy8gb2ZmZXIgbWFrZXIsIGFuZCBmcm9tIG1hcmtldCB0byBjYWxsZXIuCiAgICBmdW5jdGlvbiBidXkoIHVpbnQgaWQsIHVpbnQgcXVhbnRpdHkgKQogICAgICAgIGNhbl9idXkoaWQpCiAgICAgICAgc3luY2hyb25pemVkCiAgICAgICAgcmV0dXJucyAoIGJvb2wgc3VjY2VzcyApCiAgICB7CiAgICAgICAgYXNzZXJ0KHVpbnQxMjgocXVhbnRpdHkpID09IHF1YW50aXR5KTsKCiAgICAgICAgLy8gcmVhZC1vbmx5IG9mZmVyLiBNb2RpZnkgYW4gb2ZmZXIgYnkgZGlyZWN0bHkgYWNjZXNzaW5nIG9mZmVyc1tpZF0KICAgICAgICBPZmZlckluZm8gbWVtb3J5IG9mZmVyID0gb2ZmZXJzW2lkXTsKCiAgICAgICAgLy8gaW5mZXJyZWQgcXVhbnRpdHkgdGhhdCB0aGUgYnV5ZXIgd2lzaGVzIHRvIHNwZW5kCiAgICAgICAgdWludCBzcGVuZCA9IHNhZmVNdWwocXVhbnRpdHksIG9mZmVyLmJ1eV9ob3dfbXVjaCkgLyBvZmZlci5zZWxsX2hvd19tdWNoOwogICAgICAgIGFzc2VydCh1aW50MTI4KHNwZW5kKSA9PSBzcGVuZCk7CgogICAgICAgIGlmICggc3BlbmQgPiBvZmZlci5idXlfaG93X211Y2ggfHwgcXVhbnRpdHkgPiBvZmZlci5zZWxsX2hvd19tdWNoICkgewogICAgICAgICAgICAvLyBidXllciB3YW50cyBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCiAgICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgaWYgKCBzcGVuZCA9PSBvZmZlci5idXlfaG93X211Y2ggJiYgcXVhbnRpdHkgPT0gb2ZmZXIuc2VsbF9ob3dfbXVjaCApIHsKICAgICAgICAgICAgLy8gYnV5ZXIgd2FudHMgZXhhY3RseSB3aGF0IGlzIGF2YWlsYWJsZQogICAgICAgICAgICBkZWxldGUgb2ZmZXJzW2lkXTsKCiAgICAgICAgICAgIHRyYWRlKCBvZmZlci5vd25lciwgcXVhbnRpdHksIG9mZmVyLnNlbGxfd2hpY2hfdG9rZW4sCiAgICAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLCBzcGVuZCwgb2ZmZXIuYnV5X3doaWNoX3Rva2VuICk7CgogICAgICAgICAgICBJdGVtVXBkYXRlKGlkKTsKICAgICAgICAgICAgTG9nVGFrZSgKICAgICAgICAgICAgICAgIGJ5dGVzMzIoaWQpLAogICAgICAgICAgICAgICAgc2hhMyhvZmZlci5zZWxsX3doaWNoX3Rva2VuLCBvZmZlci5idXlfd2hpY2hfdG9rZW4pLAogICAgICAgICAgICAgICAgb2ZmZXIub3duZXIsCiAgICAgICAgICAgICAgICBvZmZlci5zZWxsX3doaWNoX3Rva2VuLAogICAgICAgICAgICAgICAgb2ZmZXIuYnV5X3doaWNoX3Rva2VuLAogICAgICAgICAgICAgICAgbXNnLnNlbmRlciwKICAgICAgICAgICAgICAgIHVpbnQxMjgob2ZmZXIuc2VsbF9ob3dfbXVjaCksCiAgICAgICAgICAgICAgICB1aW50MTI4KG9mZmVyLmJ1eV9ob3dfbXVjaCksCiAgICAgICAgICAgICAgICB1aW50NjQobm93KQogICAgICAgICAgICApOwoKICAgICAgICAgICAgc3VjY2VzcyA9IHRydWU7CiAgICAgICAgfSBlbHNlIGlmICggc3BlbmQgPiAwICYmIHF1YW50aXR5ID4gMCApIHsKICAgICAgICAgICAgLy8gYnV5ZXIgd2FudHMgYSBmcmFjdGlvbiBvZiB3aGF0IGlzIGF2YWlsYWJsZQogICAgICAgICAgICBvZmZlcnNbaWRdLnNlbGxfaG93X211Y2ggPSBzYWZlU3ViKG9mZmVyLnNlbGxfaG93X211Y2gsIHF1YW50aXR5KTsKICAgICAgICAgICAgb2ZmZXJzW2lkXS5idXlfaG93X211Y2ggPSBzYWZlU3ViKG9mZmVyLmJ1eV9ob3dfbXVjaCwgc3BlbmQpOwoKICAgICAgICAgICAgdHJhZGUoIG9mZmVyLm93bmVyLCBxdWFudGl0eSwgb2ZmZXIuc2VsbF93aGljaF90b2tlbiwKICAgICAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLCBzcGVuZCwgb2ZmZXIuYnV5X3doaWNoX3Rva2VuICk7CgogICAgICAgICAgICBJdGVtVXBkYXRlKGlkKTsKICAgICAgICAgICAgTG9nVGFrZSgKICAgICAgICAgICAgICAgIGJ5dGVzMzIoaWQpLAogICAgICAgICAgICAgICAgc2hhMyhvZmZlci5zZWxsX3doaWNoX3Rva2VuLCBvZmZlci5idXlfd2hpY2hfdG9rZW4pLAogICAgICAgICAgICAgICAgb2ZmZXIub3duZXIsCiAgICAgICAgICAgICAgICBvZmZlci5zZWxsX3doaWNoX3Rva2VuLAogICAgICAgICAgICAgICAgb2ZmZXIuYnV5X3doaWNoX3Rva2VuLAogICAgICAgICAgICAgICAgbXNnLnNlbmRlciwKICAgICAgICAgICAgICAgIHVpbnQxMjgocXVhbnRpdHkpLAogICAgICAgICAgICAgICAgdWludDEyOChzcGVuZCksCiAgICAgICAgICAgICAgICB1aW50NjQobm93KQogICAgICAgICAgICApOwoKICAgICAgICAgICAgc3VjY2VzcyA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gYnV5ZXIgd2FudHMgYW4gdW5zYXRpc2ZpYWJsZSBhbW91bnQgKGxlc3MgdGhhbiAxIGludGVnZXIpCiAgICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8gQ2FuY2VsIGFuIG9mZmVyLiBSZWZ1bmRzIG9mZmVyIG1ha2VyLgogICAgZnVuY3Rpb24gY2FuY2VsKCB1aW50IGlkICkKICAgICAgICBjYW5fY2FuY2VsKGlkKQogICAgICAgIHN5bmNocm9uaXplZAogICAgICAgIHJldHVybnMgKCBib29sIHN1Y2Nlc3MgKQogICAgewogICAgICAgIC8vIHJlYWQtb25seSBvZmZlci4gTW9kaWZ5IGFuIG9mZmVyIGJ5IGRpcmVjdGx5IGFjY2Vzc2luZyBvZmZlcnNbaWRdCiAgICAgICAgT2ZmZXJJbmZvIG1lbW9yeSBvZmZlciA9IG9mZmVyc1tpZF07CiAgICAgICAgZGVsZXRlIG9mZmVyc1tpZF07CgogICAgICAgIHZhciBzZWxsZXJfcmVmdW5kZWQgPSBvZmZlci5zZWxsX3doaWNoX3Rva2VuLnRyYW5zZmVyKCBvZmZlci5vd25lciAsIG9mZmVyLnNlbGxfaG93X211Y2ggKTsKICAgICAgICBhc3NlcnQoc2VsbGVyX3JlZnVuZGVkKTsKCiAgICAgICAgSXRlbVVwZGF0ZShpZCk7CiAgICAgICAgTG9nS2lsbCgKICAgICAgICAgICAgYnl0ZXMzMihpZCksCiAgICAgICAgICAgIHNoYTMob2ZmZXIuc2VsbF93aGljaF90b2tlbiwgb2ZmZXIuYnV5X3doaWNoX3Rva2VuKSwKICAgICAgICAgICAgb2ZmZXIub3duZXIsCiAgICAgICAgICAgIG9mZmVyLnNlbGxfd2hpY2hfdG9rZW4sCiAgICAgICAgICAgIG9mZmVyLmJ1eV93aGljaF90b2tlbiwKICAgICAgICAgICAgdWludDEyOChvZmZlci5zZWxsX2hvd19tdWNoKSwKICAgICAgICAgICAgdWludDEyOChvZmZlci5idXlfaG93X211Y2gpLAogICAgICAgICAgICB1aW50NjQobm93KQogICAgICAgICk7CgogICAgICAgIHN1Y2Nlc3MgPSB0cnVlOwogICAgfQp9CgovLyBTaW1wbGUgTWFya2V0IHdpdGggYSBtYXJrZXQgbGlmZXRpbWUuIFdoZW4gdGhlIGxpZmV0aW1lIGhhcyBlbGFwc2VkLAovLyBvZmZlcnMgY2FuIG9ubHkgYmUgY2FuY2VsbGVkIChvZmZlciBhbmQgYnV5IHdpbGwgdGhyb3cpLgoKY29udHJhY3QgRXhwaXJpbmdNYXJrZXQgaXMgRFNBdXRoLCBTaW1wbGVNYXJrZXQgewogICAgdWludCBwdWJsaWMgbGlmZXRpbWU7CiAgICB1aW50IHB1YmxpYyBjbG9zZV90aW1lOwogICAgYm9vbCBwdWJsaWMgc3RvcHBlZDsKCiAgICBmdW5jdGlvbiBzdG9wKCkgYXV0aCB7CiAgICAgICAgc3RvcHBlZCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gRXhwaXJpbmdNYXJrZXQodWludCBsaWZldGltZV8pIHsKICAgICAgICBsaWZldGltZSA9IGxpZmV0aW1lXzsKICAgICAgICBjbG9zZV90aW1lID0gZ2V0VGltZSgpICsgbGlmZXRpbWVfOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRpbWUoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGJsb2NrLnRpbWVzdGFtcDsKICAgIH0KICAgIGZ1bmN0aW9uIGlzQ2xvc2VkKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBjbG9zZWQpIHsKICAgICAgICByZXR1cm4gc3RvcHBlZCB8fCAoZ2V0VGltZSgpID4gY2xvc2VfdGltZSk7CiAgICB9CgogICAgLy8gYWZ0ZXIgbWFya2V0IGxpZmV0aW1lIGhhcyBlbGFwc2VkLCBubyBuZXcgb2ZmZXJzIGFyZSBhbGxvd2VkCiAgICBtb2RpZmllciBjYW5fb2ZmZXIgewogICAgICAgIGFzc2VydCghaXNDbG9zZWQoKSk7CiAgICAgICAgXzsKICAgIH0KICAgIC8vIGFmdGVyIGNsb3NlLCBubyBuZXcgYnV5cyBhcmUgYWxsb3dlZAogICAgbW9kaWZpZXIgY2FuX2J1eSh1aW50IGlkKSB7CiAgICAgICAgYXNzZXJ0KGlzQWN0aXZlKGlkKSk7CiAgICAgICAgYXNzZXJ0KCFpc0Nsb3NlZCgpKTsKICAgICAgICBfOwogICAgfQogICAgLy8gYWZ0ZXIgY2xvc2UsIGFueW9uZSBjYW4gY2FuY2VsIGFuIG9mZmVyCiAgICBtb2RpZmllciBjYW5fY2FuY2VsKHVpbnQgaWQpIHsKICAgICAgICBhc3NlcnQoaXNBY3RpdmUoaWQpKTsKICAgICAgICBhc3NlcnQoaXNDbG9zZWQoKSB8fCAobXNnLnNlbmRlciA9PSBnZXRPd25lcihpZCkpKTsKICAgICAgICBfOwogICAgfQp9'.
	

]
