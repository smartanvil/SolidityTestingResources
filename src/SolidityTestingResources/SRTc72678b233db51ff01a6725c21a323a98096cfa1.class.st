Class {
	#name : #SRTc72678b233db51ff01a6725c21a323a98096cfa1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc72678b233db51ff01a6725c21a323a98096cfa1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7Cgpjb250cmFjdCBPd25hYmxlIHsKCiAgYWRkcmVzcyBwdWJsaWMgY29udHJhY3RPd25lcjsKCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBjb250cmFjdE93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIG1vZGlmaWVyIG9ubHlDb250cmFjdE93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbnRyYWN0T3duZXIpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyQ29udHJhY3RPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5Q29udHJhY3RPd25lciB7CiAgICByZXF1aXJlKF9uZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIGNvbnRyYWN0T3duZXIgPSBfbmV3T3duZXI7CiAgfQogIAogIGZ1bmN0aW9uIGNvbnRyYWN0V2l0aGRyYXcoKSBwdWJsaWMgb25seUNvbnRyYWN0T3duZXIgewogICAgICBjb250cmFjdE93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfSAgCgp9CgovLy8gQHRpdGxlIEludGVyZmFjZSBmb3IgY29udHJhY3RzIGNvbmZvcm1pbmcgdG8gRVJDLTcyMTogTm9uLUZ1bmdpYmxlIFRva2VucwovLy8gQGF1dGhvciBEaWV0ZXIgU2hpcmxleSA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJlZDg5ODg5OTg4YWQ4Yzk1ODQ4MjgwOTc4ODgzYzM4ZTgyIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPj4gKGh0dHBzOi8vZ2l0aHViLmNvbS9kZXRlKQpjb250cmFjdCBFUkM3MjEgewogIC8vIFJlcXVpcmVkIG1ldGhvZHMKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgYWRkcik7CiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHRva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIGFwcHJvdmVkLCB1aW50MjU2IHRva2VuSWQpOwoKICAvLyBPcHRpb25hbAogIC8vIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgbmFtZSk7CiAgLy8gZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIHN5bWJvbCk7CiAgLy8gZnVuY3Rpb24gdG9rZW5PZk93bmVyQnlJbmRleChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfaW5kZXgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiB0b2tlbklkKTsKICAvLyBmdW5jdGlvbiB0b2tlbnNPZk93bmVyKGFkZHJlc3MgX293bmVyKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTZbXSB0b2tlbklkcyk7CiAgLy8gZnVuY3Rpb24gdG9rZW5NZXRhZGF0YSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgaW5mb1VybCk7Cn0KCmNvbnRyYWN0IEV0aFBpcmFuaGEgaXMgRVJDNzIxLCBPd25hYmxlIHsKCiAgZXZlbnQgUGlyYW5oYUNyZWF0ZWQodWludDI1NiB0b2tlbklkLCBzdHJpbmcgbmFtZSwgYWRkcmVzcyBvd25lcik7CiAgZXZlbnQgVG9rZW5Tb2xkKHVpbnQyNTYgdG9rZW5JZCwgdWludDI1NiBvbGRQcmljZSwgdWludDI1NiBuZXdQcmljZSwgYWRkcmVzcyBwcmV2T3duZXIsIGFkZHJlc3Mgd2lubmVyLCBzdHJpbmcgbmFtZSk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHRva2VuSWQpOwoKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IE5BTUUgPSAiUGlyYW5oYSI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBTWU1CT0wgPSAiUGlyYW5oYVRva2VuIjsKCiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwcml2YXRlIHBpcmFuaGFJZFRvT3duZXI7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBvd25lcnNoaXBUb2tlbkNvdW50OwoKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgcGlyYW5oYUlkVG9BcHByb3ZlZDsKICAKICAgLyoqKiBEQVRBVFlQRVMgKioqLwogIHN0cnVjdCBQaXJhbmhhIHsKICAgIHN0cmluZyBuYW1lOwoJdWludDggc2l6ZTsKCXVpbnQyNTYgZ2VuOwoJdWludDggdW5pcXVlOwoJdWludDI1NiBncm93dGhTdGFydFRpbWU7Cgl1aW50MjU2IHNlbGxQcmljZTsKCXVpbnQ4IGh1bmdyeTsKICB9CgogIFBpcmFuaGFbXSBwdWJsaWMgcGlyYW5oYXM7CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7IC8vRVJDNzIxCiAgICAvLyBDYWxsZXIgbXVzdCBvd24gdG9rZW4uCiAgICByZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICBwaXJhbmhhSWRUb0FwcHJvdmVkW190b2tlbklkXSA9IF90bzsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsgLy9FUkM3MjEKICAgIHJldHVybiBvd25lcnNoaXBUb2tlbkNvdW50W19vd25lcl07CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVQaXJhbmhhVG9rZW5zKCkgcHVibGljIG9ubHlDb250cmFjdE93bmVyIHsKICAgICBmb3IgKHVpbnQ4IGk9MDsgaTwxNTsgaSsrKSB7CgkJX2NyZWF0ZVBpcmFuaGEoIkV0aFBpcmFuaGEiLCBtc2cuc2VuZGVyLCAyMCBmaW5uZXksIDE2MCwgMSwgMCk7Cgl9CiAgfQoKICBmdW5jdGlvbiBpbXBsZW1lbnRzRVJDNzIxKCkgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7IC8vRVJDNzIxCiAgICByZXR1cm4gTkFNRTsKICB9CgogIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgeyAvL0VSQzcyMQogICAgcmV0dXJuIFNZTUJPTDsKICB9ICAKCiAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIG93bmVyKSB7IC8vRVJDNzIxCiAgICBvd25lciA9IHBpcmFuaGFJZFRvT3duZXJbX3Rva2VuSWRdOwogICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApKTsKICB9CgogIGZ1bmN0aW9uIGJ1eSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgcGF5YWJsZSB7CiAgICBhZGRyZXNzIG9sZE93bmVyID0gcGlyYW5oYUlkVG9Pd25lcltfdG9rZW5JZF07CiAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKCglQaXJhbmhhIHN0b3JhZ2UgcGlyYW5oYSA9IHBpcmFuaGFzW190b2tlbklkXTsKCiAgICB1aW50MjU2IHNlbGxpbmdQcmljZSA9IHBpcmFuaGEuc2VsbFByaWNlOwoKICAgIHJlcXVpcmUob2xkT3duZXIgIT0gbmV3T3duZXIpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwobmV3T3duZXIpKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHNlbGxpbmdQcmljZSAmJiBzZWxsaW5nUHJpY2UgPiAwKTsKCiAgICB1aW50MjU2IHBheW1lbnQgPSB1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCA5NyksIDEwMCkpOyAvLzk3JSB0byBwcmV2aW91cyBvd25lciwgMyUgZGV2IHRheAoKICAgIC8vIFN0b3Agc2VsbGluZwogICAgcGlyYW5oYS5zZWxsUHJpY2U9MDsKCXBpcmFuaGEuaHVuZ3J5PTA7CgogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwoKICAgIC8vIFBheSBwcmV2aW91cyB0b2tlbk93bmVyIGlmIG93bmVyIGlzIG5vdCBjb250cmFjdAogICAgaWYgKG9sZE93bmVyICE9IGFkZHJlc3ModGhpcykpIHsKICAgICAgb2xkT3duZXIudHJhbnNmZXIocGF5bWVudCk7IC8vCiAgICB9CgogICAgVG9rZW5Tb2xkKF90b2tlbklkLCBzZWxsaW5nUHJpY2UsIDAsIG9sZE93bmVyLCBuZXdPd25lciwgcGlyYW5oYXNbX3Rva2VuSWRdLm5hbWUpOwoJCiAgICBpZiAobXNnLnZhbHVlID4gc2VsbGluZ1ByaWNlKSB7IC8vaWYgZXhjZXNzIHBheQoJICAgIHVpbnQyNTYgcHVyY2hhc2VFeGNlc3MgPSBTYWZlTWF0aC5zdWIobXNnLnZhbHVlLCBzZWxsaW5nUHJpY2UpOwoJCW1zZy5zZW5kZXIudHJhbnNmZXIocHVyY2hhc2VFeGNlc3MpOwoJfQogIH0KICAKICBmdW5jdGlvbiBjaGFuZ2VQaXJhbmhhTmFtZSh1aW50MjU2IF90b2tlbklkLCBzdHJpbmcgX25hbWUpIHB1YmxpYyBwYXlhYmxlIHsKCXJlcXVpcmUgKHBpcmFuaGFJZFRvT3duZXJbX3Rva2VuSWRdID09IG1zZy5zZW5kZXIgJiYgbXNnLnZhbHVlID09IDAuMDAxIGV0aGVyKTsKCXJlcXVpcmUoYnl0ZXMoX25hbWUpLmxlbmd0aCA8PSAxNSk7CgkKCVBpcmFuaGEgc3RvcmFnZSBwaXJhbmhhID0gcGlyYW5oYXNbX3Rva2VuSWRdOwoJcGlyYW5oYS5uYW1lID0gX25hbWU7CiAgfQogIAogIGZ1bmN0aW9uIHN0YXJ0U2VsbGluZyh1aW50MjU2IF90b2tlbklkLCB1aW50MjU2IF9wcmljZSkgcHVibGljIHsKCXJlcXVpcmUgKHBpcmFuaGFJZFRvT3duZXJbX3Rva2VuSWRdID09IG1zZy5zZW5kZXIpOwoJCglQaXJhbmhhIHN0b3JhZ2UgcGlyYW5oYSA9IHBpcmFuaGFzW190b2tlbklkXTsKCXBpcmFuaGEuc2VsbFByaWNlID0gX3ByaWNlOwogIH0gIAoKICBmdW5jdGlvbiBzdG9wU2VsbGluZyh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewoJcmVxdWlyZSAocGlyYW5oYUlkVG9Pd25lcltfdG9rZW5JZF0gPT0gbXNnLnNlbmRlcik7CgoJUGlyYW5oYSBzdG9yYWdlIHBpcmFuaGEgPSBwaXJhbmhhc1tfdG9rZW5JZF07CglyZXF1aXJlIChwaXJhbmhhLnNlbGxQcmljZSA+IDApOwoJCglwaXJhbmhhLnNlbGxQcmljZSA9IDA7CiAgfSAgCiAgCiAgZnVuY3Rpb24gaHVuZ3J5KHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7CglyZXF1aXJlIChwaXJhbmhhSWRUb093bmVyW190b2tlbklkXSA9PSBtc2cuc2VuZGVyKTsKCglQaXJhbmhhIHN0b3JhZ2UgcGlyYW5oYSA9IHBpcmFuaGFzW190b2tlbklkXTsKCXJlcXVpcmUgKHBpcmFuaGEuaHVuZ3J5ID09IDApOwoJCgl1aW50OCBwaXJhbmhhU2l6ZT11aW50OChwaXJhbmhhLnNpemUrKG5vdy1waXJhbmhhLmdyb3d0aFN0YXJ0VGltZSkvOTAwKTsKCglyZXF1aXJlIChwaXJhbmhhU2l6ZSA8IDI0MCk7CgkKCXBpcmFuaGEuaHVuZ3J5ID0gMTsKICB9ICAgCgogIGZ1bmN0aW9uIG5vdEh1bmdyeSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewoJcmVxdWlyZSAocGlyYW5oYUlkVG9Pd25lcltfdG9rZW5JZF0gPT0gbXNnLnNlbmRlcik7CgoJUGlyYW5oYSBzdG9yYWdlIHBpcmFuaGEgPSBwaXJhbmhhc1tfdG9rZW5JZF07CglyZXF1aXJlIChwaXJhbmhhLmh1bmdyeSA9PSAxKTsKCQoJcGlyYW5oYS5odW5ncnkgPSAwOwogIH0gICAKCiAgZnVuY3Rpb24gYml0ZSh1aW50MjU2IF90b2tlbklkLCB1aW50MjU2IF92aWN0aW1Ub2tlbklkKSBwdWJsaWMgcGF5YWJsZSB7CglyZXF1aXJlIChwaXJhbmhhSWRUb093bmVyW190b2tlbklkXSA9PSBtc2cuc2VuZGVyKTsKCXJlcXVpcmUgKG1zZy52YWx1ZSA9PSAxIGZpbm5leSk7CgkKCVBpcmFuaGEgc3RvcmFnZSBwaXJhbmhhID0gcGlyYW5oYXNbX3Rva2VuSWRdOwoJUGlyYW5oYSBzdG9yYWdlIHZpY3RpbVBpcmFuaGEgPSBwaXJhbmhhc1tfdmljdGltVG9rZW5JZF07CglyZXF1aXJlIChwaXJhbmhhLmh1bmdyeSA9PSAxICYmIHZpY3RpbVBpcmFuaGEuaHVuZ3J5ID09IDEpOwoKCXVpbnQ4IHZpdGltUGlyYW5oYVNpemU9dWludDgodmljdGltUGlyYW5oYS5zaXplKyhub3ctdmljdGltUGlyYW5oYS5ncm93dGhTdGFydFRpbWUpLzkwMCk7CgkKCXJlcXVpcmUgKHZpdGltUGlyYW5oYVNpemU+NDApOyAvLyBkb24ndCBiaXRlIGEgc21hbGwKCgl1aW50OCBwaXJhbmhhU2l6ZT11aW50OChwaXJhbmhhLnNpemUrKG5vdy1waXJhbmhhLmdyb3d0aFN0YXJ0VGltZSkvOTAwKSsxMDsKCQoJaWYgKHBpcmFuaGFTaXplPjI0MCkgeyAKCSAgICBwaXJhbmhhLnNpemUgPSAyNDA7IC8vbWF4aW11bQoJCXBpcmFuaGEuaHVuZ3J5ID0gMDsKCX0gZWxzZSB7CgkgICAgcGlyYW5oYS5zaXplID0gcGlyYW5oYVNpemU7Cgl9CiAgICAgCgkvL2RlY3JlYXNlIHZpY3RpbSBzaXplIAoJaWYgKHZpdGltUGlyYW5oYVNpemU+PTUwKSB7CgkgICAgdml0aW1QaXJhbmhhU2l6ZS09MTA7CgkgICAgdmljdGltUGlyYW5oYS5zaXplID0gdml0aW1QaXJhbmhhU2l6ZTsKCX0KICAgIGVsc2UgewoJCXZpY3RpbVBpcmFuaGEuc2l6ZT00MDsKCX0KCQoJcGlyYW5oYS5ncm93dGhTdGFydFRpbWU9bm93OwoJdmljdGltUGlyYW5oYS5ncm93dGhTdGFydFRpbWU9bm93OwoJCiAgfSAgICAKICAKICBmdW5jdGlvbiBicmVlZGluZyh1aW50MjU2IF9tYWxlVG9rZW5JZCwgdWludDI1NiBfZmVtYWxlVG9rZW5JZCkgcHVibGljIHBheWFibGUgewogIAogICAgcmVxdWlyZSAocGlyYW5oYUlkVG9Pd25lcltfbWFsZVRva2VuSWRdID09ICBtc2cuc2VuZGVyICYmIHBpcmFuaGFJZFRvT3duZXJbX2ZlbWFsZVRva2VuSWRdID09IG1zZy5zZW5kZXIpOwoJcmVxdWlyZSAobXNnLnZhbHVlID09IDAuMDEgZXRoZXIpOwoKCVBpcmFuaGEgc3RvcmFnZSBwaXJhbmhhTWFsZSA9IHBpcmFuaGFzW19tYWxlVG9rZW5JZF07CglQaXJhbmhhIHN0b3JhZ2UgcGlyYW5oYUZlbWFsZSA9IHBpcmFuaGFzW19mZW1hbGVUb2tlbklkXTsKCQoJdWludDggbWFsZVNpemU9dWludDgocGlyYW5oYU1hbGUuc2l6ZSsobm93LXBpcmFuaGFNYWxlLmdyb3d0aFN0YXJ0VGltZSkvOTAwKTsKCWlmIChtYWxlU2l6ZT4yNDApCgkgICBwaXJhbmhhTWFsZS5zaXplPTI0MDsKCWVsc2UgCgkgICBwaXJhbmhhTWFsZS5zaXplPW1hbGVTaXplOwoKCXVpbnQ4IGZlbWFsZVNpemU9dWludDgocGlyYW5oYUZlbWFsZS5zaXplKyhub3ctcGlyYW5oYUZlbWFsZS5ncm93dGhTdGFydFRpbWUpLzkwMCk7CglpZiAoZmVtYWxlU2l6ZT4yNDApCgkgICBwaXJhbmhhRmVtYWxlLnNpemU9MjQwOwoJZWxzZSAKCSAgIHBpcmFuaGFGZW1hbGUuc2l6ZT1mZW1hbGVTaXplOwoJICAgCglyZXF1aXJlIChwaXJhbmhhTWFsZS5zaXplID4gMTUwICYmIHBpcmFuaGFGZW1hbGUuc2l6ZSA+IDE1MCk7CgkKCXVpbnQ4IG5ld2Jvcm5TaXplID0gdWludDgoU2FmZU1hdGguZGl2KFNhZmVNYXRoLmFkZChwaXJhbmhhTWFsZS5zaXplLCBwaXJhbmhhTWFsZS5zaXplKSw0KSk7CgkKCXVpbnQyNTYgbWF4R2VuPXBpcmFuaGFGZW1hbGUuZ2VuOwoJdWludDI1NiBtaW5HZW49cGlyYW5oYU1hbGUuZ2VuOwoJCglpZiAocGlyYW5oYU1hbGUuZ2VuID4gcGlyYW5oYUZlbWFsZS5nZW4pIHsKCQltYXhHZW49cGlyYW5oYU1hbGUuZ2VuOwoJCW1pbkdlbj1waXJhbmhhRmVtYWxlLmdlbjsKCX0gCgkKCXVpbnQyNTYgcmFuZE51bSA9IHVpbnQyNTYoYmxvY2suYmxvY2toYXNoKGJsb2NrLm51bWJlci0xKSk7Cgl1aW50MjU2IG5ld2Jvcm5HZW47Cgl1aW50OCBuZXdib3JuVW5pcXVlID0gdWludDgocmFuZE51bSUxMDArMSk7IC8vY2hhbmNlIHRvIGdldCByYXJlIHBpcmFuaGEKCQoJaWYgKHJhbmROdW0lKDEwK21heEdlbikgPT0gMSkgeyAvLyBuZXcgZ2VuZXJhdGlvbiwgZGlmZmljdWx0IGRlcGVuZHMgb24gbWF4Z2VuCgkJbmV3Ym9ybkdlbiA9IFNhZmVNYXRoLmFkZChtYXhHZW4sMSk7Cgl9IGVsc2UgaWYgKG1heEdlbiA9PSBtaW5HZW4pIHsKCQluZXdib3JuR2VuID0gbWF4R2VuOwoJfSBlbHNlIHsKCQluZXdib3JuR2VuID0gU2FmZU1hdGguYWRkKHJhbmROdW0lKG1heEdlbi1taW5HZW4rMSksbWluR2VuKTsKCX0KCQoJLy8gNSUgY2hhbmNlIHRvIGdldCByYXJlIHBpcmFuaGFzIGZvciBlYWNoIGdlbgoJaWYgKG5ld2Jvcm5VbmlxdWUgPiA1KSAKCQluZXdib3JuVW5pcXVlID0gMDsKCQkKICAgICAvL2luaXRpYXRlIG5ldyBzaXplLCBjYW5jZWwgc2VsbGluZwoJIHBpcmFuaGFNYWxlLnNpemUgPSB1aW50OChTYWZlTWF0aC5kaXYocGlyYW5oYU1hbGUuc2l6ZSwyKSk7CQkKICAgICBwaXJhbmhhRmVtYWxlLnNpemUgPSB1aW50OChTYWZlTWF0aC5kaXYocGlyYW5oYUZlbWFsZS5zaXplLDIpKTsJCgoJIHBpcmFuaGFNYWxlLmdyb3d0aFN0YXJ0VGltZSA9IG5vdzsJIAoJIHBpcmFuaGFGZW1hbGUuZ3Jvd3RoU3RhcnRUaW1lID0gbm93OwkgCgoJIHBpcmFuaGFNYWxlLnNlbGxQcmljZSA9IDA7CSAKCSBwaXJhbmhhRmVtYWxlLnNlbGxQcmljZSA9IDA7CSAKCQkKCV9jcmVhdGVQaXJhbmhhKCJFdGhQaXJhbmhhIiwgbXNnLnNlbmRlciwgMCwgbmV3Ym9yblNpemUsIG5ld2Jvcm5HZW4sIG5ld2Jvcm5VbmlxdWUpOwogIAogIH0KICAKICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7IC8vRVJDNzIxCiAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBwaXJhbmhhSWRUb093bmVyW190b2tlbklkXTsKCiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChuZXdPd25lcikpOwogICAgcmVxdWlyZShfYXBwcm92ZWQobmV3T3duZXIsIF90b2tlbklkKSk7CgogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gYWxsUGlyYW5oYXNJbmZvKHVpbnQyNTYgX3N0YXJ0UGlyYW5oYUlkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzW10gb3duZXJzLCB1aW50OFtdIHNpemVzLCB1aW50OFtdIGh1bmdyeSwgdWludDI1NltdIHByaWNlcykgeyAvL2ZvciB3ZWIgc2l0ZSB2aWV3CgkKCXVpbnQyNTYgdG90YWxQaXJhbmhhcyA9IHRvdGFsU3VwcGx5KCk7CglQaXJhbmhhIHN0b3JhZ2UgcGlyYW5oYTsKCQogICAgaWYgKHRvdGFsUGlyYW5oYXMgPT0gMCB8fCBfc3RhcnRQaXJhbmhhSWQgPj0gdG90YWxQaXJhbmhhcykgewogICAgICAgIC8vIFJldHVybiBhbiBlbXB0eSBhcnJheQogICAgICByZXR1cm4gKG5ldyBhZGRyZXNzW10oMCksIG5ldyB1aW50OFtdKDApLCBuZXcgdWludDhbXSgwKSwgbmV3IHVpbnQyNTZbXSgwKSk7CiAgICB9CgoJCgl1aW50MjU2IGluZGV4VG87CglpZiAodG90YWxQaXJhbmhhcyA+IF9zdGFydFBpcmFuaGFJZCsxMDAwKQoJCWluZGV4VG8gPSBfc3RhcnRQaXJhbmhhSWQgKyAxMDAwOwoJZWxzZSAJCgkJaW5kZXhUbyA9IHRvdGFsUGlyYW5oYXM7CgkJCiAgICB1aW50MjU2IHRvdGFsUmVzdWx0UGlyYW5oYXMgPSBpbmRleFRvIC0gX3N0YXJ0UGlyYW5oYUlkOwkJCgkJCglhZGRyZXNzW10gbWVtb3J5IG93bmVyc19yZXMgPSBuZXcgYWRkcmVzc1tdKHRvdGFsUmVzdWx0UGlyYW5oYXMpOwoJdWludDhbXSBtZW1vcnkgc2l6ZV9yZXMgPSBuZXcgdWludDhbXSh0b3RhbFJlc3VsdFBpcmFuaGFzKTsKCXVpbnQ4W10gbWVtb3J5IGh1bmdyeV9yZXMgPSBuZXcgdWludDhbXSh0b3RhbFJlc3VsdFBpcmFuaGFzKTsKCXVpbnQyNTZbXSBtZW1vcnkgcHJpY2VzX3JlcyA9IG5ldyB1aW50MjU2W10odG90YWxSZXN1bHRQaXJhbmhhcyk7CgkKCWZvciAodWludDI1NiBwaXJhbmhhSWQgPSBfc3RhcnRQaXJhbmhhSWQ7IHBpcmFuaGFJZCA8IGluZGV4VG87IHBpcmFuaGFJZCsrKSB7CgkgIHBpcmFuaGEgPSBwaXJhbmhhc1twaXJhbmhhSWRdOwoJICAKCSAgb3duZXJzX3Jlc1twaXJhbmhhSWQgLSBfc3RhcnRQaXJhbmhhSWRdID0gcGlyYW5oYUlkVG9Pd25lcltwaXJhbmhhSWRdOwoJICBodW5ncnlfcmVzW3BpcmFuaGFJZCAtIF9zdGFydFBpcmFuaGFJZF0gPSBwaXJhbmhhLmh1bmdyeTsKCSAgc2l6ZV9yZXNbcGlyYW5oYUlkIC0gX3N0YXJ0UGlyYW5oYUlkXSA9IHVpbnQ4KHBpcmFuaGEuc2l6ZSsobm93LXBpcmFuaGEuZ3Jvd3RoU3RhcnRUaW1lKS85MDApOwoJICBwcmljZXNfcmVzW3BpcmFuaGFJZCAtIF9zdGFydFBpcmFuaGFJZF0gPSBwaXJhbmhhLnNlbGxQcmljZTsKCX0KCQoJcmV0dXJuIChvd25lcnNfcmVzLCBzaXplX3JlcywgaHVuZ3J5X3JlcywgcHJpY2VzX3Jlcyk7CiAgfQogIAogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiB0b3RhbCkgeyAvL0VSQzcyMQogICAgcmV0dXJuIHBpcmFuaGFzLmxlbmd0aDsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgeyAvL0VSQzcyMQogICAgcmVxdWlyZShfb3ducyhtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CgoJX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgeyAvL0VSQzcyMQogICAgcmVxdWlyZShfb3ducyhfZnJvbSwgX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUoX2FwcHJvdmVkKF90bywgX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKF90bykpOwoKICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKCiAgLyogUFJJVkFURSBGVU5DVElPTlMgKi8KICBmdW5jdGlvbiBfYWRkcmVzc05vdE51bGwoYWRkcmVzcyBfdG8pIHByaXZhdGUgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gX3RvICE9IGFkZHJlc3MoMCk7CiAgfQoKICBmdW5jdGlvbiBfYXBwcm92ZWQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gcGlyYW5oYUlkVG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX3RvOwogIH0KCiAgZnVuY3Rpb24gX2NyZWF0ZVBpcmFuaGEoc3RyaW5nIF9uYW1lLCBhZGRyZXNzIF9vd25lciwgdWludDI1NiBfcHJpY2UsIHVpbnQ4IF9zaXplLCB1aW50MjU2IF9nZW4sIHVpbnQ4IF91bmlxdWUpIHByaXZhdGUgewogICAgUGlyYW5oYSBtZW1vcnkgX3BpcmFuaGEgPSBQaXJhbmhhKHsKICAgICAgbmFtZTogX25hbWUsCgkgIHNpemU6IF9zaXplLAoJICBnZW46IF9nZW4sCgkgIHVuaXF1ZTogX3VuaXF1ZSwJICAKCSAgZ3Jvd3RoU3RhcnRUaW1lOiBub3csCgkgIHNlbGxQcmljZTogX3ByaWNlLAoJICBodW5ncnk6IDAKICAgIH0pOwogICAgdWludDI1NiBuZXdQaXJhbmhhSWQgPSBwaXJhbmhhcy5wdXNoKF9waXJhbmhhKSAtIDE7CgogICAgcmVxdWlyZShuZXdQaXJhbmhhSWQgPT0gdWludDI1Nih1aW50MzIobmV3UGlyYW5oYUlkKSkpOyAvL2NoZWNrIG1heGltdW0gbGltaXQgb2YgdG9rZW5zCgogICAgUGlyYW5oYUNyZWF0ZWQobmV3UGlyYW5oYUlkLCBfbmFtZSwgX293bmVyKTsKCiAgICBfdHJhbnNmZXIoYWRkcmVzcygwKSwgX293bmVyLCBuZXdQaXJhbmhhSWQpOwogIH0KCiAgZnVuY3Rpb24gX293bnMoYWRkcmVzcyBfY2hlY2tlZEFkZHIsIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gX2NoZWNrZWRBZGRyID09IHBpcmFuaGFJZFRvT3duZXJbX3Rva2VuSWRdOwogIH0KCiAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHsKICAgIG93bmVyc2hpcFRva2VuQ291bnRbX3RvXSsrOwogICAgcGlyYW5oYUlkVG9Pd25lcltfdG9rZW5JZF0gPSBfdG87CgogICAgLy8gV2hlbiBjcmVhdGluZyBuZXcgcGlyYW5oYXMgX2Zyb20gaXMgMHgwLCBidXQgd2UgY2FuJ3QgYWNjb3VudCB0aGF0IGFkZHJlc3MuCiAgICBpZiAoX2Zyb20gIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lcnNoaXBUb2tlbkNvdW50W19mcm9tXS0tOwogICAgICAvLyBjbGVhciBhbnkgcHJldmlvdXNseSBhcHByb3ZlZCBvd25lcnNoaXAgZXhjaGFuZ2UKICAgICAgZGVsZXRlIHBpcmFuaGFJZFRvQXBwcm92ZWRbX3Rva2VuSWRdOwogICAgfQoKICAgIC8vIEVtaXQgdGhlIHRyYW5zZmVyIGV2ZW50LgogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KfQoKbGlicmFyeSBTYWZlTWF0aCB7CgogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0='.
	

]
