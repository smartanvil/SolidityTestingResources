Class {
	#name : #SRT320344d8c18b6971b3fcdbf0b12ed73578a8a622,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT320344d8c18b6971b3fcdbf0b12ed73578a8a622 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CglmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKCQl1aW50IGMgPSBhICogYjsKCQlhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwoJCXJldHVybiBjOwoJfQoJZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewoJCWFzc2VydChiIDw9IGEpOwoJCXJldHVybiBhIC0gYjsKCX0KCWZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewoJCWFzc2VydChiID4gMCk7CgkJdWludCBjID0gYSAvIGI7CgkJYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7CgkJcmV0dXJuIGM7Cgl9CglmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKCQlhc3NlcnQoYiA8PSBhKTsKCQlyZXR1cm4gYSAtIGI7Cgl9CglmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKCQl1aW50IGMgPSBhICsgYjsKCQlhc3NlcnQoYyA+PSBhKTsKCQlyZXR1cm4gYzsKCX0KCWZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CgkJcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwoJfQoJZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKCQlyZXR1cm4gYSA8IGIgPyBhIDogYjsKCX0KCWZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewoJCXJldHVybiBhID49IGIgPyBhIDogYjsKCX0KCWZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewoJCXJldHVybiBhIDwgYiA/IGEgOiBiOwoJfQoJZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7CgkJaWYgKCFhc3NlcnRpb24pIHsKCQkJdGhyb3c7CgkJfQoJfQp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgfQogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKCWJvb2wgcHVibGljIHN0b3BwZWQ7Cgltb2RpZmllciBzdG9wSW5FbWVyZ2VuY3kgewoJCWlmIChzdG9wcGVkKSB7CgkJCXRocm93OwoJCX0KCQlfOwoJfQoKCW1vZGlmaWVyIG9ubHlJbkVtZXJnZW5jeSB7CgkJaWYgKCFzdG9wcGVkKSB7CgkJICB0aHJvdzsKCQl9CglfOwoJfQoJLy8gY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbWVyZ2VuY3ksIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKCWZ1bmN0aW9uIGVtZXJnZW5jeVN0b3AoKSBleHRlcm5hbCBvbmx5T3duZXIgewoJCXN0b3BwZWQgPSB0cnVlOwoJfQoJLy8gY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbmQgb2YgZW1lcmdlbmN5LCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQoJZnVuY3Rpb24gcmVsZWFzZSgpIGV4dGVybmFsIG9ubHlPd25lciBvbmx5SW5FbWVyZ2VuY3kgewoJCXN0b3BwZWQgPSBmYWxzZTsKCX0KfQoKCgovKioKICogQHRpdGxlIFB1bGxQYXltZW50CiAqIEBkZXYgQmFzZSBjb250cmFjdCBzdXBwb3J0aW5nIGFzeW5jIHNlbmQgZm9yIHB1bGwgcGF5bWVudHMuIEluaGVyaXQgZnJvbSB0aGlzCiAqIGNvbnRyYWN0IGFuZCB1c2UgYXN5bmNTZW5kIGluc3RlYWQgb2Ygc2VuZC4KICovCmNvbnRyYWN0IFB1bGxQYXltZW50IHsKCXVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgcGF5bWVudHM7CglldmVudCBMb2dSZWZ1bmRFVEgoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CgkvKioKCSogIFN0b3JlIHNlbnQgYW1vdW50IGFzIGNyZWRpdCB0byBiZSBwdWxsZWQsIGNhbGxlZCBieSBwYXllciAKCSoqLwoJZnVuY3Rpb24gYXN5bmNTZW5kKGFkZHJlc3MgZGVzdCwgdWludCBhbW91bnQpIGludGVybmFsIHsKCQlwYXltZW50c1tkZXN0XSA9IHBheW1lbnRzW2Rlc3RdLmFkZChhbW91bnQpOwoJfQoJLy8gd2l0aGRyYXcgYWNjdW11bGF0ZWQgYmFsYW5jZSwgY2FsbGVkIGJ5IHBheWVlCglmdW5jdGlvbiB3aXRoZHJhd1BheW1lbnRzKCkgewoJCWFkZHJlc3MgcGF5ZWUgPSBtc2cuc2VuZGVyOwoJCXVpbnQgcGF5bWVudCA9IHBheW1lbnRzW3BheWVlXTsKCgkJaWYgKHBheW1lbnQgPT0gMCkgewoJCQl0aHJvdzsKCQl9CgkJaWYgKHRoaXMuYmFsYW5jZSA8IHBheW1lbnQpIHsKCQkgICAgdGhyb3c7CgkJfQoJCXBheW1lbnRzW3BheWVlXSA9IDA7CgkJaWYgKCFwYXllZS5zZW5kKHBheW1lbnQpKSB7CgkJICAgIHRocm93OwoJCX0KCQlMb2dSZWZ1bmRFVEgocGF5ZWUscGF5bWVudCk7Cgl9Cn0KCgoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKCXVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwoJZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KCgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CglmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKCWZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKTsKCWV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLiAKICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgCgl1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CgoJLyoKCSogRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2sgIAoJKi8KCW1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKCSAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7CgkgICAgIHRocm93OwoJICAgfQoJIF87Cgl9CglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKCQliYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwoJCWJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwoJCVRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKCX0KCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CgkJcmV0dXJuIGJhbGFuY2VzW19vd25lcl07Cgl9Cn0KCgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEJhc2ljVG9rZW4sIEVSQzIwIHsKCW1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsKCQl2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoJCWJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwoJCWJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKCQlhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CgkJVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCWZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsKCQlpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93OwoJCWFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwoJCUFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwoJfQoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewoJCXJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwoJfQp9CgoKLyoqCiAqICBDbHVzdGVyVG9rZW4gcHJlc2FsZSBjb250cmFjdC4KICovCmNvbnRyYWN0IENsdXN0ZXJUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBQdWxsUGF5bWVudCwgT3duYWJsZSwgUGF1c2FibGUgewoJCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgCiAgc3RydWN0IEJhY2tlciB7CiAgICAgICAgYWRkcmVzcyBidXllcjsKICAgICAgICB1aW50IGNvbnRyaWJ1dGlvbjsKICAgICAgICB1aW50IHdpdGhkcmF3bkF0U2VnbWVudDsKICAgICAgICB1aW50IHdpdGhkcmF3bkF0Q2x1c3RlcjsKICAgICAgICBib29sIHN0YXRlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFZhcmlhYmxlcwogICAgKi8KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJDbHVzdGVyVG9rZW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiQ0xSVCI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgdWludDI1NiBwcml2YXRlIGJ1eVByaWNlRXRoID0gMTAwMDAwMDAwMDAwMDAwMDA7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIGluaXRpYWxCbG9ja0NvdW50OwogICAgdWludDI1NiBwcml2YXRlIHRlc3RCbG9ja0VuZDsKICAgIHVpbnQyNTYgcHVibGljIGNvbnRyaWJ1dG9yczsKICAgIAogICAgdWludDI1NiBwcml2YXRlIG1pbmVkQmxvY2tzOwogICAgdWludDI1NiBwcml2YXRlIENsdXN0ZXJDdXJyZW50OwogICAgdWludDI1NiBwcml2YXRlIFNlZ21lbnRDdXJyZW50OwogICAgdWludDI1NiBwcml2YXRlIFVuaXRDdXJyZW50OwogIAogIAogICAgbWFwcGluZyhhZGRyZXNzID0+IEJhY2tlcikgcHVibGljIGJhY2tlcnM7CiAgICAKICAgCiAgICAvKioKICAgICAqIEBkZXYgQ29udHJhY3QgY29uc3RydWN0b3IKICAgICAqLyAKICAgIGZ1bmN0aW9uIENsdXN0ZXJUb2tlbigpIHsKICAgIHRvdGFsU3VwcGx5ID0gNzUwMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSB0b3RhbFN1cHBseTsKCiAgICBjb250cmlidXRvcnMgPSAwOwogICAgfQogICAgCiAgICAKICAgIC8qKgogICAgICogQHJldHVybiBSZXR1cm5zIHRoZSBjdXJyZW50IGFtb3VudCBvZiBDTFVTVEVSUwogICAgICovIAogICAgZnVuY3Rpb24gY3VycmVudENsdXN0ZXIoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGN1cnJlbnRDbHVzdGVyKQogICAgewogICAgCXVpbnQgYmxvY2tDb3VudCA9IGJsb2NrLm51bWJlciAtIGluaXRpYWxCbG9ja0NvdW50OwogICAgCXVpbnQgcmVzdWx0ID0gYmxvY2tDb3VudC5kaXYoMTAwMDAwMCk7CiAgICAJcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIAogICAgCiAgICAvKioKICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgY3VycmVudCBhbW91bnQgb2YgU0VHTUVOVFMKICAgICAqLyAKICAgIGZ1bmN0aW9uIGN1cnJlbnRTZWdtZW50KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBjdXJyZW50U2VnbWVudCkKICAgIHsKICAgIAl1aW50IGJsb2NrQ291bnQgPSBibG9jay5udW1iZXIgLSBpbml0aWFsQmxvY2tDb3VudDsKICAgIAl1aW50IG5ld1NlZ21lbnQgPSBjdXJyZW50Q2x1c3RlcigpLm11bCgxMDAwKTsKICAgIAl1aW50IHJlc3VsdCA9IGJsb2NrQ291bnQuZGl2KDEwMDApLnN1YihuZXdTZWdtZW50KTsKCiAgICAJcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIAogICAgCiAgICAvKioKICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgY3VycmVudCBhbW91bnQgb2YgVU5JVFMKICAgICAqLyAKICAgIGZ1bmN0aW9uIGN1cnJlbnRVbml0KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBjdXJyZW50VW5pdCkKICAgIHsKICAgIAl1aW50IGJsb2NrQ291bnQgPSBibG9jay5udW1iZXIgLSBpbml0aWFsQmxvY2tDb3VudDsKICAgIAl1aW50IGdldENsdXN0ZXJzID0gY3VycmVudENsdXN0ZXIoKS5tdWwoMTAwMDAwMCk7CiAgICAgICAgdWludCBuZXdVbml0ID0gY3VycmVudFNlZ21lbnQoKS5tdWwoMTAwMCk7CiAgICAJcmV0dXJuIGJsb2NrQ291bnQuc3ViKGdldENsdXN0ZXJzKS5zdWIobmV3VW5pdCk7ICAgICAgCiAgICAJCiAgICB9CiAgICAKICAgIAogICAgLyoqCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIGN1cnJlbnQgbmV0d29yayBibG9jawogICAgICovIAogICAgZnVuY3Rpb24gY3VycmVudEJsb2NrKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBibG9ja051bWJlcikKICAgIHsKICAgIAlyZXR1cm4gYmxvY2subnVtYmVyIC0gaW5pdGlhbEJsb2NrQ291bnQ7CiAgICB9CgoKCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHVzZXJzIHRvIGJ1eSBDTFVTVEVSIGFuZCByZWNlaXZlIHRoZWlyIHRva2VucyBhdCBvbmNlLgogICAgICogQHJldHVybiBUaGUgYW1vdW50IG9mIENMVVNURVIgYm91Z2h0IGJ5IHNlbmRlci4KICAgICAqLyAKICAgIGZ1bmN0aW9uIGJ1eUNsdXN0ZXJUb2tlbigpIHBheWFibGUgcmV0dXJucyAodWludCBhbW91bnQpIHsKICAgICAgICAKICAgICAgICBpZiAoYmFsYW5jZXNbdGhpc10gPCBhbW91bnQpIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgYW1vdW50ID0gbXNnLnZhbHVlLm11bChidXlQcmljZUV0aCkuZGl2KDEgZXRoZXIpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IGFtb3VudDsKICAgICAgICBiYWxhbmNlc1t0aGlzXSAtPSBhbW91bnQ7CiAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgYW1vdW50KTsKICAgICAgICAKICAgICAgICBCYWNrZXIgYmFja2VyID0gYmFja2Vyc1ttc2cuc2VuZGVyXTsKICAgICAgICBiYWNrZXIuY29udHJpYnV0aW9uID0gYmFja2VyLmNvbnRyaWJ1dGlvbi5hZGQoYW1vdW50KTsKICAgICAgICBiYWNrZXIud2l0aGRyYXduQXRTZWdtZW50ID0gYmFja2VyLndpdGhkcmF3bkF0U2VnbWVudC5hZGQoMCk7CiAgICAgICAgYmFja2VyLndpdGhkcmF3bkF0Q2x1c3RlciA9IGJhY2tlci53aXRoZHJhd25BdENsdXN0ZXIuYWRkKDApOwogICAgICAgIGJhY2tlci5zdGF0ZSA9IGJhY2tlci5zdGF0ZSA9IHRydWU7CiAgICAgICAgCiAgICAgICAgY29udHJpYnV0b3JzKys7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIGFtb3VudDsKICAgIH0KICAgIAogICAgCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHVzZXJzIHRvIGNsYWltIENMVVNURVIgZXZlcnkgMTAwMCBTRUdNRU5UUyAoMS4wMDAuMDAwIGJsb2NrcykuCiAgICAgKiBAcmV0dXJuIFRoZSBhbW91bnQgb2YgQ0xVU1RFUiBjbGFpbWVkIGJ5IHNlbmRlci4KICAgICAqLwogICAgZnVuY3Rpb24gY2xhaW1DbHVzdGVycygpIHB1YmxpYyByZXR1cm5zICh1aW50IGFtb3VudCkgewogICAgICAgIAogICAgICAgIGlmIChjdXJyZW50U2VnbWVudCgpID09IDApIHRocm93OwogICAgICAgIGlmICghYmFja2Vyc1ttc2cuc2VuZGVyXS5zdGF0ZSkgdGhyb3c7IAogICAgICAgIAogICAgICAgIHVpbnQgcHJldmlvdXNXaXRoZHJhd3MgPSBiYWNrZXJzW21zZy5zZW5kZXJdLndpdGhkcmF3bkF0Q2x1c3RlcjsKICAgICAgICB1aW50IGVudGl0bGVkVG9DbHVzdGVycyA9IGN1cnJlbnRDbHVzdGVyKCkuc3ViKHByZXZpb3VzV2l0aGRyYXdzKTsKICAgICAgICAKICAgICAgICBpZiAoZW50aXRsZWRUb0NsdXN0ZXJzID09IDApIHRocm93OwogICAgICAgIGlmICghaXNFbnRpdGxlZEZvckNsdXN0ZXIobXNnLnNlbmRlcikpIHRocm93OwogICAgICAgIAogICAgICAgIHVpbnQgdXNlclNoYXJlcyA9IGJhY2tlcnNbbXNnLnNlbmRlcl0uY29udHJpYnV0aW9uLmRpdigxIGZpbm5leSk7CiAgICAgICAgdWludCBhbW91bnRGb3JQYXlvdXQgPSBidXlQcmljZUV0aC5kaXYoY29udHJpYnV0b3JzKTsKICAgICAgICAKICAgICAgICBhbW91bnQgPSAgYW1vdW50Rm9yUGF5b3V0Lm11bCh1c2VyU2hhcmVzKS5tdWwoMTAwMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gYW1vdW50OwogICAgICAgIGJhbGFuY2VzW3RoaXNdIC09IGFtb3VudDsKICAgICAgICBUcmFuc2Zlcih0aGlzLCBtc2cuc2VuZGVyLCBhbW91bnQpOwogICAgICAgIAogICAgICAgIGJhY2tlcnNbbXNnLnNlbmRlcl0ud2l0aGRyYXduQXRDbHVzdGVyID0gY3VycmVudENsdXN0ZXIoKTsgCiAgICAgICAgCiAgICAgICAgcmV0dXJuIGFtb3VudDsKICAgIH0KICAgIAogICAgCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHVzZXJzIHRvIGNsYWltIHNlZ21lbnRzIGV2ZXJ5IDEwMDAgVU5JVFMgKGJsb2NrcykuCiAgICAgKiBAZGV2IE5PVEU6IFVzZXJzIGNsYWltaW5nIFNFR01FTlRTIGluc3RlYWQgb2YgQ0xVU1RFUlMgZ2V0IG9ubHkgaGFsZiBvZiB0aGUgcmV3YXJkLgogICAgICogQHJldHVybiBUaGUgYW1vdW50IG9mIFNFR01FTlRTIGNsYWltZWQgYnkgc2VuZGVyLgogICAgICovCiAgICBmdW5jdGlvbiBjbGFpbVNlZ21lbnRzKCkgcHVibGljIHJldHVybnMgKHVpbnQgYW1vdW50KSB7CiAgICAgICAgCiAgICAgICAgaWYgKGN1cnJlbnRTZWdtZW50KCkgPT0gMCkgdGhyb3c7CiAgICAgICAgaWYgKCFiYWNrZXJzW21zZy5zZW5kZXJdLnN0YXRlKSB0aHJvdzsgIAogICAgICAgIAogICAgICAgIAogICAgICAgIHVpbnQgcHJldmlvdXNXaXRoZHJhd3MgPSBjdXJyZW50Q2x1c3RlcigpLmFkZChiYWNrZXJzW21zZy5zZW5kZXJdLndpdGhkcmF3bkF0U2VnbWVudCk7CiAgICAgICAgdWludCBlbnRpdGxlZFRvU2VnbWVudHMgPSBjdXJyZW50Q2x1c3RlcigpLmFkZChjdXJyZW50U2VnbWVudCgpLnN1YihwcmV2aW91c1dpdGhkcmF3cykpOwogICAgICAgIAogICAgICAgIGlmIChlbnRpdGxlZFRvU2VnbWVudHMgPT0gMCApIHRocm93OwogICAgICAgIAogICAgICAgIHVpbnQgdXNlclNoYXJlcyA9IGJhY2tlcnNbbXNnLnNlbmRlcl0uY29udHJpYnV0aW9uLmRpdigxIGZpbm5leSk7CiAgICAgICAgdWludCBhbW91bnRGb3JQYXlvdXQgPSBidXlQcmljZUV0aC5kaXYoY29udHJpYnV0b3JzKTsKICAgICAgICAKICAgICAgICBhbW91bnQgPSAgYW1vdW50Rm9yUGF5b3V0Lm11bCh1c2VyU2hhcmVzKS5kaXYoMTApLmRpdigyKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBhbW91bnQ7CiAgICAgICAgYmFsYW5jZXNbdGhpc10gLT0gYW1vdW50OwogICAgICAgIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIGFtb3VudCk7CiAgICAgICAgCiAgICAgICAgYmFja2Vyc1ttc2cuc2VuZGVyXS53aXRoZHJhd25BdFNlZ21lbnQgPSBjdXJyZW50U2VnbWVudCgpOyAKICAgICAgICAKICAgICAgICByZXR1cm4gYW1vdW50OwogICAgfQoKICAgIAogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIGlmIHVzZXJzIHNlbmQgZnVuZHMgdG8gdGhpcyBjb250cmFjdCwgY2FsbCB0aGUgYnV5IGZ1bmN0aW9uLgogICAgICovIAogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgICAgICBidXlDbHVzdGVyVG9rZW4oKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIAogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyBvd25lciB0byB3aXRoZHJhdyBmdW5kcyBmcm9tIHRoZSBhY2NvdW50LgogICAgICovIAogICAgZnVuY3Rpb24gRHJhaW4oKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBpZih0aGlzLmJhbGFuY2UgPiAwKSB7CiAgICAgICAgICAgIGlmICghb3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsKICAgICAgICB9CiAgICB9CiAgICAKICAgIAogICAgCiAgICAvKioKICAgICogIEJ1cm4gYXdheSB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiBDbHVzdGVyVG9rZW4gdG9rZW5zLgogICAgKiBAcmV0dXJuIFJldHVybnMgc3VjY2VzcyBib29sZWFuLgogICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm4odWludCBfdmFsdWUpIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDB4MCwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgCiAgICAvKioKICAgICAqIEBkZXYgSW50ZXJuYWwgY2hlY2sgdG8gc2VlIGlmIGF0IGxlYXN0IDEwMDAgc2VnbWVudHMgcGFzc2VkIHdpdGhvdXQgd2l0aGRyYXdhbCBwcmlvciB0byByZXdhcmRpbmcgYSBjbHVzdGVyCiAgICAgKi8gCiAgICBmdW5jdGlvbiBpc0VudGl0bGVkRm9yQ2x1c3RlcihhZGRyZXNzIF9zZW5kZXIpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIAogICAgICAgIHVpbnQgdDEgPSBjdXJyZW50Q2x1c3RlcigpLm11bCgxMDAwKS5hZGQoY3VycmVudFNlZ21lbnQoKSk7IAogICAgICAgIHVpbnQgdDIgPSBiYWNrZXJzW19zZW5kZXJdLndpdGhkcmF3bkF0U2VnbWVudDsgICAgICAKCiAgICAgICAgaWYgKHQxLnN1Yih0MikgPj0gMTAwMCkgeyByZXR1cm4gdHJ1ZTsgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAKICAgIH0KICAgIAp9'.
	

]
