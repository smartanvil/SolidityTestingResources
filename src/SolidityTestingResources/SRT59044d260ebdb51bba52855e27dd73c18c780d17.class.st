Class {
	#name : #SRT59044d260ebdb51bba52855e27dd73c18c780d17,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT59044d260ebdb51bba52855e27dd73c18c780d17 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuOTsKCmNvbnRyYWN0IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7CiAgICBpZiAoIWFzc2VydGlvbikgdGhyb3c7CiAgfQp9Cgpjb250cmFjdCBUb2tlbiB7CiAgLy8vIEByZXR1cm4gdG90YWwgYW1vdW50IG9mIHRva2VucwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpIHt9CgogIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7fQoKICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBgX2Zyb21gCiAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CgogIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX2FkZHJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB3ZWkgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQoKICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAvLy8gQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykge30KCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgogIHVpbnQgcHVibGljIGRlY2ltYWxzOwogIHN0cmluZyBwdWJsaWMgbmFtZTsKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBUb2tlbiB7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAvL0RlZmF1bHQgYXNzdW1lcyB0b3RhbFN1cHBseSBjYW4ndCBiZSBvdmVyIG1heCAoMl4yNTYgLSAxKS4KICAgIC8vSWYgeW91ciB0b2tlbiBsZWF2ZXMgb3V0IHRvdGFsU3VwcGx5IGFuZCBjYW4gaXNzdWUgbW9yZSB0b2tlbnMgYXMgdGltZSBnb2VzIG9uLCB5b3UgbmVlZCB0byBjaGVjayBpZiBpdCBkb2Vzbid0IHdyYXAuCiAgICAvL1JlcGxhY2UgdGhlIGlmIHdpdGggdGhpcyBvbmUgaW5zdGVhZC4KICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgIC8vaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy9zYW1lIGFzIGFib3ZlLiBSZXBsYWNlIHRoaXMgbGluZSB3aXRoIHRoZSBmb2xsb3dpbmcgaWYgeW91IHdhbnQgdG8gcHJvdGVjdCBhZ2FpbnN0IHdyYXBwaW5nIHVpbnRzLgogICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAvL2lmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgfQoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5Owp9Cgpjb250cmFjdCBSZXNlcnZlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgU2FmZU1hdGggewogIGFkZHJlc3MgcHVibGljIG1pbnRlcjsKICBmdW5jdGlvbiBSZXNlcnZlVG9rZW4oKSB7CiAgICBtaW50ZXIgPSBtc2cuc2VuZGVyOwogIH0KICBmdW5jdGlvbiBjcmVhdGUoYWRkcmVzcyBhY2NvdW50LCB1aW50IGFtb3VudCkgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gbWludGVyKSB0aHJvdzsKICAgIGJhbGFuY2VzW2FjY291bnRdID0gc2FmZUFkZChiYWxhbmNlc1thY2NvdW50XSwgYW1vdW50KTsKICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSwgYW1vdW50KTsKICB9CiAgZnVuY3Rpb24gZGVzdHJveShhZGRyZXNzIGFjY291bnQsIHVpbnQgYW1vdW50KSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBtaW50ZXIpIHRocm93OwogICAgaWYgKGJhbGFuY2VzW2FjY291bnRdIDwgYW1vdW50KSB0aHJvdzsKICAgIGJhbGFuY2VzW2FjY291bnRdID0gc2FmZVN1YihiYWxhbmNlc1thY2NvdW50XSwgYW1vdW50KTsKICAgIHRvdGFsU3VwcGx5ID0gc2FmZVN1Yih0b3RhbFN1cHBseSwgYW1vdW50KTsKICB9Cn0KCmNvbnRyYWN0IEFjY291bnRMZXZlbHMgewogIC8vZ2l2ZW4gYSB1c2VyLCByZXR1cm5zIGFuIGFjY291bnQgbGV2ZWwKICAvLzAgPSByZWd1bGFyIHVzZXIgKHBheXMgdGFrZSBmZWUgYW5kIG1ha2UgZmVlKQogIC8vMSA9IG1hcmtldCBtYWtlciBzaWx2ZXIgKHBheXMgdGFrZSBmZWUsIG5vIG1ha2UgZmVlLCBnZXRzIHJlYmF0ZSkKICAvLzIgPSBtYXJrZXQgbWFrZXIgZ29sZCAocGF5cyB0YWtlIGZlZSwgbm8gbWFrZSBmZWUsIGdldHMgZW50aXJlIGNvdW50ZXJwYXJ0eSdzIHRha2UgZmVlIGFzIHJlYmF0ZSkKICBmdW5jdGlvbiBhY2NvdW50TGV2ZWwoYWRkcmVzcyB1c2VyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHt9Cn0KCmNvbnRyYWN0IEFjY291bnRMZXZlbHNUZXN0IGlzIEFjY291bnRMZXZlbHMgewogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGFjY291bnRMZXZlbHM7CgogIGZ1bmN0aW9uIHNldEFjY291bnRMZXZlbChhZGRyZXNzIHVzZXIsIHVpbnQgbGV2ZWwpIHsKICAgIGFjY291bnRMZXZlbHNbdXNlcl0gPSBsZXZlbDsKICB9CgogIGZ1bmN0aW9uIGFjY291bnRMZXZlbChhZGRyZXNzIHVzZXIpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgcmV0dXJuIGFjY291bnRMZXZlbHNbdXNlcl07CiAgfQp9Cgpjb250cmFjdCBFYmJFeGNoYW5nZSBpcyBTYWZlTWF0aCB7CiAgYWRkcmVzcyBwdWJsaWMgYWRtaW47IC8vdGhlIGFkbWluIGFkZHJlc3MKICBhZGRyZXNzIHB1YmxpYyBmZWVBY2NvdW50OyAvL3RoZSBhY2NvdW50IHRoYXQgd2lsbCByZWNlaXZlIGZlZXMKICBhZGRyZXNzIHB1YmxpYyBhY2NvdW50TGV2ZWxzQWRkcjsgLy90aGUgYWRkcmVzcyBvZiB0aGUgQWNjb3VudExldmVscyBjb250cmFjdAogIHVpbnQgcHVibGljIGZlZU1ha2U7IC8vcGVyY2VudGFnZSB0aW1lcyAoMSBldGhlcikKICB1aW50IHB1YmxpYyBmZWVUYWtlOyAvL3BlcmNlbnRhZ2UgdGltZXMgKDEgZXRoZXIpCiAgdWludCBwdWJsaWMgZmVlUmViYXRlOyAvL3BlcmNlbnRhZ2UgdGltZXMgKDEgZXRoZXIpCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBwdWJsaWMgdG9rZW5zOyAvL21hcHBpbmcgb2YgdG9rZW4gYWRkcmVzc2VzIHRvIG1hcHBpbmcgb2YgYWNjb3VudCBiYWxhbmNlcyAodG9rZW49MCBtZWFucyBFdGhlcikKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGJ5dGVzMzIgPT4gYm9vbCkpIHB1YmxpYyBvcmRlcnM7IC8vbWFwcGluZyBvZiB1c2VyIGFjY291bnRzIHRvIG1hcHBpbmcgb2Ygb3JkZXIgaGFzaGVzIHRvIGJvb2xlYW5zICh0cnVlID0gc3VibWl0dGVkIGJ5IHVzZXIsIGVxdWl2YWxlbnQgdG8gb2ZmY2hhaW4gc2lnbmF0dXJlKQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYnl0ZXMzMiA9PiB1aW50KSkgcHVibGljIG9yZGVyRmlsbHM7IC8vbWFwcGluZyBvZiB1c2VyIGFjY291bnRzIHRvIG1hcHBpbmcgb2Ygb3JkZXIgaGFzaGVzIHRvIHVpbnRzIChhbW91bnQgb2Ygb3JkZXIgdGhhdCBoYXMgYmVlbiBmaWxsZWQpCgogIGV2ZW50IE9yZGVyKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIGFkZHJlc3MgdXNlcik7CiAgZXZlbnQgQ2FuY2VsKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIGFkZHJlc3MgdXNlciwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpOwogIGV2ZW50IFRyYWRlKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCBhZGRyZXNzIGdldCwgYWRkcmVzcyBnaXZlKTsKICBldmVudCBEZXBvc2l0KGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgdXNlciwgdWludCBhbW91bnQsIHVpbnQgYmFsYW5jZSk7CiAgZXZlbnQgV2l0aGRyYXcoYWRkcmVzcyB0b2tlbiwgYWRkcmVzcyB1c2VyLCB1aW50IGFtb3VudCwgdWludCBiYWxhbmNlKTsKCiAgZnVuY3Rpb24gRWJiRXhjaGFuZ2UoYWRkcmVzcyBhZG1pbl8sIGFkZHJlc3MgZmVlQWNjb3VudF8sIGFkZHJlc3MgYWNjb3VudExldmVsc0FkZHJfLCB1aW50IGZlZU1ha2VfLCB1aW50IGZlZVRha2VfLCB1aW50IGZlZVJlYmF0ZV8pIHsKICAgIGFkbWluID0gYWRtaW5fOwogICAgZmVlQWNjb3VudCA9IGZlZUFjY291bnRfOwogICAgYWNjb3VudExldmVsc0FkZHIgPSBhY2NvdW50TGV2ZWxzQWRkcl87CiAgICBmZWVNYWtlID0gZmVlTWFrZV87CiAgICBmZWVUYWtlID0gZmVlVGFrZV87CiAgICBmZWVSZWJhdGUgPSBmZWVSZWJhdGVfOwogIH0KCiAgZnVuY3Rpb24oKSB7CiAgICB0aHJvdzsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZUFkbWluKGFkZHJlc3MgYWRtaW5fKSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBhZG1pbikgdGhyb3c7CiAgICBhZG1pbiA9IGFkbWluXzsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZUFjY291bnRMZXZlbHNBZGRyKGFkZHJlc3MgYWNjb3VudExldmVsc0FkZHJfKSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBhZG1pbikgdGhyb3c7CiAgICBhY2NvdW50TGV2ZWxzQWRkciA9IGFjY291bnRMZXZlbHNBZGRyXzsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZUZlZUFjY291bnQoYWRkcmVzcyBmZWVBY2NvdW50XykgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gYWRtaW4pIHRocm93OwogICAgZmVlQWNjb3VudCA9IGZlZUFjY291bnRfOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlRmVlTWFrZSh1aW50IGZlZU1ha2VfKSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBhZG1pbikgdGhyb3c7CiAgICBpZiAoZmVlTWFrZV8gPiBmZWVNYWtlKSB0aHJvdzsKICAgIGZlZU1ha2UgPSBmZWVNYWtlXzsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZUZlZVRha2UodWludCBmZWVUYWtlXykgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gYWRtaW4pIHRocm93OwogICAgaWYgKGZlZVRha2VfID4gZmVlVGFrZSB8fCBmZWVUYWtlXyA8IGZlZVJlYmF0ZSkgdGhyb3c7CiAgICBmZWVUYWtlID0gZmVlVGFrZV87CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VGZWVSZWJhdGUodWludCBmZWVSZWJhdGVfKSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBhZG1pbikgdGhyb3c7CiAgICBpZiAoZmVlUmViYXRlXyA8IGZlZVJlYmF0ZSB8fCBmZWVSZWJhdGVfID4gZmVlVGFrZSkgdGhyb3c7CiAgICBmZWVSZWJhdGUgPSBmZWVSZWJhdGVfOwogIH0KCiAgZnVuY3Rpb24gZGVwb3NpdCgpIHBheWFibGUgewogICAgdG9rZW5zWzBdW21zZy5zZW5kZXJdID0gc2FmZUFkZCh0b2tlbnNbMF1bbXNnLnNlbmRlcl0sIG1zZy52YWx1ZSk7CiAgICBEZXBvc2l0KDAsIG1zZy5zZW5kZXIsIG1zZy52YWx1ZSwgdG9rZW5zWzBdW21zZy5zZW5kZXJdKTsKICB9CgogIGZ1bmN0aW9uIHdpdGhkcmF3KHVpbnQgYW1vdW50KSB7CiAgICBpZiAodG9rZW5zWzBdW21zZy5zZW5kZXJdIDwgYW1vdW50KSB0aHJvdzsKICAgIHRva2Vuc1swXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIodG9rZW5zWzBdW21zZy5zZW5kZXJdLCBhbW91bnQpOwogICAgaWYgKCFtc2cuc2VuZGVyLmNhbGwudmFsdWUoYW1vdW50KSgpKSB0aHJvdzsKICAgIFdpdGhkcmF3KDAsIG1zZy5zZW5kZXIsIGFtb3VudCwgdG9rZW5zWzBdW21zZy5zZW5kZXJdKTsKICB9CgogIGZ1bmN0aW9uIGRlcG9zaXRUb2tlbihhZGRyZXNzIHRva2VuLCB1aW50IGFtb3VudCkgewogICAgLy9yZW1lbWJlciB0byBjYWxsIFRva2VuKGFkZHJlc3MpLmFwcHJvdmUodGhpcywgYW1vdW50KSBvciB0aGlzIGNvbnRyYWN0IHdpbGwgbm90IGJlIGFibGUgdG8gZG8gdGhlIHRyYW5zZmVyIG9uIHlvdXIgYmVoYWxmLgogICAgaWYgKHRva2VuPT0wKSB0aHJvdzsKICAgIGlmICghVG9rZW4odG9rZW4pLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCB0aGlzLCBhbW91bnQpKSB0aHJvdzsKICAgIHRva2Vuc1t0b2tlbl1bbXNnLnNlbmRlcl0gPSBzYWZlQWRkKHRva2Vuc1t0b2tlbl1bbXNnLnNlbmRlcl0sIGFtb3VudCk7CiAgICBEZXBvc2l0KHRva2VuLCBtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vuc1t0b2tlbl1bbXNnLnNlbmRlcl0pOwogIH0KCiAgZnVuY3Rpb24gd2l0aGRyYXdUb2tlbihhZGRyZXNzIHRva2VuLCB1aW50IGFtb3VudCkgewogICAgaWYgKHRva2VuPT0wKSB0aHJvdzsKICAgIGlmICh0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdIDwgYW1vdW50KSB0aHJvdzsKICAgIHRva2Vuc1t0b2tlbl1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKHRva2Vuc1t0b2tlbl1bbXNnLnNlbmRlcl0sIGFtb3VudCk7CiAgICBpZiAoIVRva2VuKHRva2VuKS50cmFuc2Zlcihtc2cuc2VuZGVyLCBhbW91bnQpKSB0aHJvdzsKICAgIFdpdGhkcmF3KHRva2VuLCBtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vuc1t0b2tlbl1bbXNnLnNlbmRlcl0pOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgdXNlcikgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIHRva2Vuc1t0b2tlbl1bdXNlcl07CiAgfQoKICBmdW5jdGlvbiBvcmRlcihhZGRyZXNzIHRva2VuR2V0LCB1aW50IGFtb3VudEdldCwgYWRkcmVzcyB0b2tlbkdpdmUsIHVpbnQgYW1vdW50R2l2ZSwgdWludCBleHBpcmVzLCB1aW50IG5vbmNlKSB7CiAgICBieXRlczMyIGhhc2ggPSBzaGEyNTYodGhpcywgdG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSk7CiAgICBvcmRlcnNbbXNnLnNlbmRlcl1baGFzaF0gPSB0cnVlOwogICAgT3JkZXIodG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSwgbXNnLnNlbmRlcik7CiAgfQoKICBmdW5jdGlvbiB0cmFkZShhZGRyZXNzIHRva2VuR2V0LCB1aW50IGFtb3VudEdldCwgYWRkcmVzcyB0b2tlbkdpdmUsIHVpbnQgYW1vdW50R2l2ZSwgdWludCBleHBpcmVzLCB1aW50IG5vbmNlLCBhZGRyZXNzIHVzZXIsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzLCB1aW50IGFtb3VudCkgewogICAgLy9hbW91bnQgaXMgaW4gYW1vdW50R2V0IHRlcm1zCiAgICBieXRlczMyIGhhc2ggPSBzaGEyNTYodGhpcywgdG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSk7CiAgICBpZiAoISgKICAgICAgKG9yZGVyc1t1c2VyXVtoYXNoXSB8fCBlY3JlY292ZXIoc2hhMygiXHgxOUV0aGVyZXVtIFNpZ25lZCBNZXNzYWdlOlxuMzIiLCBoYXNoKSx2LHIscykgPT0gdXNlcikgJiYKICAgICAgYmxvY2subnVtYmVyIDw9IGV4cGlyZXMgJiYKICAgICAgc2FmZUFkZChvcmRlckZpbGxzW3VzZXJdW2hhc2hdLCBhbW91bnQpIDw9IGFtb3VudEdldAogICAgKSkgdGhyb3c7CiAgICB0cmFkZUJhbGFuY2VzKHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgdXNlciwgYW1vdW50KTsKICAgIG9yZGVyRmlsbHNbdXNlcl1baGFzaF0gPSBzYWZlQWRkKG9yZGVyRmlsbHNbdXNlcl1baGFzaF0sIGFtb3VudCk7CiAgICBUcmFkZSh0b2tlbkdldCwgYW1vdW50LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUgKiBhbW91bnQgLyBhbW91bnRHZXQsIHVzZXIsIG1zZy5zZW5kZXIpOwogIH0KCiAgZnVuY3Rpb24gdHJhZGVCYWxhbmNlcyhhZGRyZXNzIHRva2VuR2V0LCB1aW50IGFtb3VudEdldCwgYWRkcmVzcyB0b2tlbkdpdmUsIHVpbnQgYW1vdW50R2l2ZSwgYWRkcmVzcyB1c2VyLCB1aW50IGFtb3VudCkgcHJpdmF0ZSB7CiAgICB1aW50IGZlZU1ha2VYZmVyID0gc2FmZU11bChhbW91bnQsIGZlZU1ha2UpIC8gKDEgZXRoZXIpOwogICAgdWludCBmZWVUYWtlWGZlciA9IHNhZmVNdWwoYW1vdW50LCBmZWVUYWtlKSAvICgxIGV0aGVyKTsKICAgIHVpbnQgZmVlUmViYXRlWGZlciA9IDA7CiAgICBpZiAoYWNjb3VudExldmVsc0FkZHIgIT0gMHgwKSB7CiAgICAgIHVpbnQgYWNjb3VudExldmVsID0gQWNjb3VudExldmVscyhhY2NvdW50TGV2ZWxzQWRkcikuYWNjb3VudExldmVsKHVzZXIpOwogICAgICBpZiAoYWNjb3VudExldmVsPT0xKSBmZWVSZWJhdGVYZmVyID0gc2FmZU11bChhbW91bnQsIGZlZVJlYmF0ZSkgLyAoMSBldGhlcik7CiAgICAgIGlmIChhY2NvdW50TGV2ZWw9PTIpIGZlZVJlYmF0ZVhmZXIgPSBmZWVUYWtlWGZlcjsKICAgIH0KICAgIHRva2Vuc1t0b2tlbkdldF1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKHRva2Vuc1t0b2tlbkdldF1bbXNnLnNlbmRlcl0sIHNhZmVBZGQoYW1vdW50LCBmZWVUYWtlWGZlcikpOwogICAgdG9rZW5zW3Rva2VuR2V0XVt1c2VyXSA9IHNhZmVBZGQodG9rZW5zW3Rva2VuR2V0XVt1c2VyXSwgc2FmZVN1YihzYWZlQWRkKGFtb3VudCwgZmVlUmViYXRlWGZlciksIGZlZU1ha2VYZmVyKSk7CiAgICB0b2tlbnNbdG9rZW5HZXRdW2ZlZUFjY291bnRdID0gc2FmZUFkZCh0b2tlbnNbdG9rZW5HZXRdW2ZlZUFjY291bnRdLCBzYWZlU3ViKHNhZmVBZGQoZmVlTWFrZVhmZXIsIGZlZVRha2VYZmVyKSwgZmVlUmViYXRlWGZlcikpOwogICAgdG9rZW5zW3Rva2VuR2l2ZV1bdXNlcl0gPSBzYWZlU3ViKHRva2Vuc1t0b2tlbkdpdmVdW3VzZXJdLCBzYWZlTXVsKGFtb3VudEdpdmUsIGFtb3VudCkgLyBhbW91bnRHZXQpOwogICAgdG9rZW5zW3Rva2VuR2l2ZV1bbXNnLnNlbmRlcl0gPSBzYWZlQWRkKHRva2Vuc1t0b2tlbkdpdmVdW21zZy5zZW5kZXJdLCBzYWZlTXVsKGFtb3VudEdpdmUsIGFtb3VudCkgLyBhbW91bnRHZXQpOwogIH0KCiAgZnVuY3Rpb24gdGVzdFRyYWRlKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIGFkZHJlc3MgdXNlciwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMsIHVpbnQgYW1vdW50LCBhZGRyZXNzIHNlbmRlcikgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICBpZiAoISgKICAgICAgdG9rZW5zW3Rva2VuR2V0XVtzZW5kZXJdID49IGFtb3VudCAmJgogICAgICBhdmFpbGFibGVWb2x1bWUodG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSwgdXNlciwgdiwgciwgcykgPj0gYW1vdW50CiAgICApKSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGF2YWlsYWJsZVZvbHVtZShhZGRyZXNzIHRva2VuR2V0LCB1aW50IGFtb3VudEdldCwgYWRkcmVzcyB0b2tlbkdpdmUsIHVpbnQgYW1vdW50R2l2ZSwgdWludCBleHBpcmVzLCB1aW50IG5vbmNlLCBhZGRyZXNzIHVzZXIsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTI1Nih0aGlzLCB0b2tlbkdldCwgYW1vdW50R2V0LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUsIGV4cGlyZXMsIG5vbmNlKTsKICAgIGlmICghKAogICAgICAob3JkZXJzW3VzZXJdW2hhc2hdIHx8IGVjcmVjb3ZlcihzaGEzKCJceDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XG4zMiIsIGhhc2gpLHYscixzKSA9PSB1c2VyKSAmJgogICAgICBibG9jay5udW1iZXIgPD0gZXhwaXJlcwogICAgKSkgcmV0dXJuIDA7CiAgICB1aW50IGF2YWlsYWJsZTEgPSBzYWZlU3ViKGFtb3VudEdldCwgb3JkZXJGaWxsc1t1c2VyXVtoYXNoXSk7CiAgICB1aW50IGF2YWlsYWJsZTIgPSBzYWZlTXVsKHRva2Vuc1t0b2tlbkdpdmVdW3VzZXJdLCBhbW91bnRHZXQpIC8gYW1vdW50R2l2ZTsKICAgIGlmIChhdmFpbGFibGUxPGF2YWlsYWJsZTIpIHJldHVybiBhdmFpbGFibGUxOwogICAgcmV0dXJuIGF2YWlsYWJsZTI7CiAgfQoKICBmdW5jdGlvbiBhbW91bnRGaWxsZWQoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICBieXRlczMyIGhhc2ggPSBzaGEyNTYodGhpcywgdG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSk7CiAgICByZXR1cm4gb3JkZXJGaWxsc1t1c2VyXVtoYXNoXTsKICB9CgogIGZ1bmN0aW9uIGNhbmNlbE9yZGVyKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKSB7CiAgICBieXRlczMyIGhhc2ggPSBzaGEyNTYodGhpcywgdG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSk7CiAgICBpZiAoIShvcmRlcnNbbXNnLnNlbmRlcl1baGFzaF0gfHwgZWNyZWNvdmVyKHNoYTMoIlx4MTlFdGhlcmV1bSBTaWduZWQgTWVzc2FnZTpcbjMyIiwgaGFzaCksdixyLHMpID09IG1zZy5zZW5kZXIpKSB0aHJvdzsKICAgIG9yZGVyRmlsbHNbbXNnLnNlbmRlcl1baGFzaF0gPSBhbW91bnRHZXQ7CiAgICBDYW5jZWwodG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSwgbXNnLnNlbmRlciwgdiwgciwgcyk7CiAgfQp9'.
	

]
