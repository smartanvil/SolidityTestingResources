Class {
	#name : #SRT19aea60e2fd6ac54ecf2576292c8fc7046429c37,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT19aea60e2fd6ac54ecf2576292c8fc7046429c37 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgovLyBTYWZlTWF0aApjb250cmFjdCBTYWZlTWF0aCB7CiAgICAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgICAgdWludCBjID0gYSAqIGI7CiAgICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgICAgcmV0dXJuIGM7CiAgICAgfQoKICAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICAgIHJldHVybiBhIC0gYjsKICAgICB9CgogICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICAgIHVpbnQgYyA9IGEgKyBiOwogICAgICAgICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICAgICAgICByZXR1cm4gYzsKICAgICB9Cn0KCi8vIFN0YW5kYXJkIHRva2VuIGludGVyZmFjZSAoRVJDIDIwKQovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKLy8gVG9rZW4KY29udHJhY3QgVG9rZW4gaXMgU2FmZU1hdGggewogICAgIC8vIEZ1bmN0aW9uczoKICAgICAvLy8gQHJldHVybiB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7CgogICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zKGJvb2wpOwoKICAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMoYm9vbCk7CgogICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX2FkZHJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB3ZWkgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgICAvLyBFdmVudHM6CiAgICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KLy9TdGRUb2tlbgpjb250cmFjdCBTdGRUb2tlbiBpcyBUb2tlbiB7CiAgICAgLy8gRmllbGRzOgogICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CiAgICAgdWludCBwdWJsaWMgc3VwcGx5ID0gMDsKCiAgICAgLy8gRnVuY3Rpb25zOgogICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyhib29sKSB7CiAgICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICAgICAgICByZXF1aXJlKGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKTsKCiAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sX3ZhbHVlKTsKICAgICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sX3ZhbHVlKTsKCiAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICB9CgogICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMoYm9vbCl7CiAgICAgICAgICByZXF1aXJlKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUpOwogICAgICAgICAgcmVxdWlyZShhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOwogICAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSk7CgogICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSxfdmFsdWUpOwogICAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlc1tfZnJvbV0sX3ZhbHVlKTsKICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gc2FmZVN1YihhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSxfdmFsdWUpOwoKICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICB9CgogICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgICAgcmV0dXJuIHN1cHBseTsKICAgICB9CgogICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICAgfQoKICAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgICAgICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgICAgICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgICAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwoKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KCiAgICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgICB9Cn0KLy8gVUh1YlRva2VuCmNvbnRyYWN0IFVIdWJUb2tlbiBpcyBTdGRUb2tlbgp7Ci8vLyBGaWVsZHM6CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiVUhVQiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJIVUIiOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBUT1RBTF9TVVBQTFkgPSAxMTU2Nzg5MDAwICogKDEgZXRoZXIgLyAxIHdlaSk7IC8vMUIxNTZNNzg5SwogICAgLy8gdGhpcyBpbmNsdWRlcyBERVZFTE9QRVJTX0JPTlVTCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBERVZFTE9QRVJTX0JPTlVTID0gNDc2Nzg3ODAwICogKDEgZXRoZXIgLyAxIHdlaSk7IC8vNDc2TTc4N0sKCQoJLy8gMTAwTTFrMiB0b2tlbnMgc29sZCBkdXJpbmcgcHJlc2FsZQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUFJFU0FMRV9QUklDRSA9IDUyMDA7ICAvLyBwZXIgMSBFdGhlcgogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUFJFU0FMRV9NQVhfRVRIID0gMTkyMzE7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQUkVTQUxFX1RPS0VOX1NVUFBMWV9MSU1JVCA9IFBSRVNBTEVfUFJJQ0UgKiBQUkVTQUxFX01BWF9FVEggKiAoMSBldGhlciAvIDEgd2VpKTsKCgogICAgdWludCBwdWJsaWMgY29uc3RhbnQgSUNPX1BSSUNFMSA9IDQ2MDA7ICAgICAvLyBwZXIgMSBFdGhlcgogICAgdWludCBwdWJsaWMgY29uc3RhbnQgSUNPX1BSSUNFMiA9IDQyMDA7ICAgICAvLyBwZXIgMSBFdGhlcgogICAgdWludCBwdWJsaWMgY29uc3RhbnQgSUNPX1BSSUNFMyA9IDQwMDA7ICAgICAvLyBwZXIgMSBFdGhlcgoKICAgIC8vIDY4ME0yazIgLSB0aGlzIGluY2x1ZGVzIHByZXNhbGUgdG9rZW5zCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBUT1RBTF9TT0xEX1RPS0VOX1NVUFBMWV9MSU1JVCA9IDY4MDAwMTIwMCogKDEgZXRoZXIgLyAxIHdlaSk7CgogICAgZW51bSBTdGF0ZXsKICAgICAgIEluaXQsCiAgICAgICBQYXVzZWQsCgogICAgICAgUHJlc2FsZVJ1bm5pbmcsCiAgICAgICBQcmVzYWxlRmluaXNoZWQsCgogICAgICAgSUNPUnVubmluZywKICAgICAgIElDT0ZpbmlzaGVkCiAgICB9CgogICAgU3RhdGUgcHVibGljIGN1cnJlbnRTdGF0ZSA9IFN0YXRlLkluaXQ7CiAgICBib29sIHB1YmxpYyBlbmFibGVUcmFuc2ZlcnMgPSB0cnVlOwoKICAgIGFkZHJlc3MgcHVibGljIHRlYW1Ub2tlbkJvbnVzID0gMDsKCiAgICAvLyBHYXRoZXJlZCBmdW5kcyBjYW4gYmUgd2l0aGRyYXduIG9ubHkgdG8gZXNjcm93J3MgYWRkcmVzcy4KICAgIGFkZHJlc3MgcHVibGljIGVzY3JvdyA9IDA7CgogICAgLy8gVG9rZW4gbWFuYWdlciBoYXMgZXhjbHVzaXZlIHByaXZlbGVnZXMgdG8gY2FsbCBhZG1pbmlzdHJhdGl2ZQogICAgLy8gZnVuY3Rpb25zIG9uIHRoaXMgY29udHJhY3QuCiAgICBhZGRyZXNzIHB1YmxpYyB0b2tlbk1hbmFnZXIgPSAwOwoKICAgIHVpbnQgcHVibGljIHByZXNhbGVTb2xkVG9rZW5zID0gMDsKICAgIHVpbnQgcHVibGljIGljb1NvbGRUb2tlbnMgPSAwOwogICAgdWludCBwdWJsaWMgdG90YWxTb2xkVG9rZW5zID0gMDsKCi8vLyBNb2RpZmllcnM6CiAgICBtb2RpZmllciBvbmx5VG9rZW5NYW5hZ2VyKCkKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXI9PXRva2VuTWFuYWdlcik7IAogICAgICAgIF87IAogICAgfQogICAgCiAgICBtb2RpZmllciBvbmx5VG9rZW5Dcm93bmVyKCkKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXI9PWVzY3Jvdyk7IAogICAgICAgIF87IAogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlJblN0YXRlKFN0YXRlIHN0YXRlKQogICAgewogICAgICAgIHJlcXVpcmUoc3RhdGU9PWN1cnJlbnRTdGF0ZSk7IAogICAgICAgIF87IAogICAgfQoKLy8vIEV2ZW50czoKICAgIGV2ZW50IExvZ0J1eShhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgTG9nQnVybihhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQgdmFsdWUpOwoKLy8vIEZ1bmN0aW9uczoKICAgIC8vLyBAZGV2IENvbnN0cnVjdG9yCiAgICAvLy8gQHBhcmFtIF90b2tlbk1hbmFnZXIgVG9rZW4gbWFuYWdlciBhZGRyZXNzLgogICAgZnVuY3Rpb24gVUh1YlRva2VuKGFkZHJlc3MgX3Rva2VuTWFuYWdlciwgYWRkcmVzcyBfZXNjcm93LCBhZGRyZXNzIF90ZWFtVG9rZW5Cb251cykgCiAgICB7CiAgICAgICAgdG9rZW5NYW5hZ2VyID0gX3Rva2VuTWFuYWdlcjsKICAgICAgICB0ZWFtVG9rZW5Cb251cyA9IF90ZWFtVG9rZW5Cb251czsKICAgICAgICBlc2Nyb3cgPSBfZXNjcm93OwoKICAgICAgICAvLyBzZW5kIHRlYW0gYm9udXMgaW1tZWRpYXRlbHkKICAgICAgICB1aW50IHRlYW1Cb251cyA9IERFVkVMT1BFUlNfQk9OVVM7CiAgICAgICAgYmFsYW5jZXNbX3RlYW1Ub2tlbkJvbnVzXSArPSB0ZWFtQm9udXM7CiAgICAgICAgc3VwcGx5Kz0gdGVhbUJvbnVzOwogICAgICAgIAogICAgICAgIGFzc2VydChQUkVTQUxFX1RPS0VOX1NVUFBMWV9MSU1JVD09MTAwMDAxMjAwICogKDEgZXRoZXIgLyAxIHdlaSkpOwogICAgICAgIGFzc2VydChUT1RBTF9TT0xEX1RPS0VOX1NVUFBMWV9MSU1JVD09NjgwMDAxMjAwICogKDEgZXRoZXIgLyAxIHdlaSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVRva2VucygpIHB1YmxpYyBwYXlhYmxlCiAgICB7CiAgICAgICAgcmVxdWlyZShjdXJyZW50U3RhdGU9PVN0YXRlLlByZXNhbGVSdW5uaW5nIHx8IGN1cnJlbnRTdGF0ZT09U3RhdGUuSUNPUnVubmluZyk7CgogICAgICAgIGlmKGN1cnJlbnRTdGF0ZT09U3RhdGUuUHJlc2FsZVJ1bm5pbmcpewogICAgICAgICAgICByZXR1cm4gYnV5VG9rZW5zUHJlc2FsZSgpOwogICAgICAgIH1lbHNlewogICAgICAgICAgICByZXR1cm4gYnV5VG9rZW5zSUNPKCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVRva2Vuc1ByZXNhbGUoKSBwdWJsaWMgcGF5YWJsZSBvbmx5SW5TdGF0ZShTdGF0ZS5QcmVzYWxlUnVubmluZykKICAgIHsKICAgICAgICAvLyBtaW4gLSAxIEVUSAogICAgICAgIC8vcmVxdWlyZShtc2cudmFsdWUgPj0gKDEgZXRoZXIgLyAxIHdlaSkpOwogICAgICAgIC8vIG1pbiAtIDAuMDEgRVRICiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gKCgxIGV0aGVyIC8gMSB3ZWkpIC8gMTAwKSk7CiAgICAgICAgdWludCBuZXdUb2tlbnMgPSBtc2cudmFsdWUgKiBQUkVTQUxFX1BSSUNFOwoKICAgICAgICByZXF1aXJlKHByZXNhbGVTb2xkVG9rZW5zICsgbmV3VG9rZW5zIDw9IFBSRVNBTEVfVE9LRU5fU1VQUExZX0xJTUlUKTsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gbmV3VG9rZW5zOwogICAgICAgIHN1cHBseSs9IG5ld1Rva2VuczsKICAgICAgICBwcmVzYWxlU29sZFRva2Vucys9IG5ld1Rva2VuczsKICAgICAgICB0b3RhbFNvbGRUb2tlbnMrPSBuZXdUb2tlbnM7CgogICAgICAgIExvZ0J1eShtc2cuc2VuZGVyLCBuZXdUb2tlbnMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVRva2Vuc0lDTygpIHB1YmxpYyBwYXlhYmxlIG9ubHlJblN0YXRlKFN0YXRlLklDT1J1bm5pbmcpCiAgICB7CiAgICAgICAgLy8gbWluIC0gMC4wMSBFVEgKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSAoKDEgZXRoZXIgLyAxIHdlaSkgLyAxMDApKTsKICAgICAgICB1aW50IG5ld1Rva2VucyA9IG1zZy52YWx1ZSAqIGdldFByaWNlKCk7CgogICAgICAgIHJlcXVpcmUodG90YWxTb2xkVG9rZW5zICsgbmV3VG9rZW5zIDw9IFRPVEFMX1NPTERfVE9LRU5fU1VQUExZX0xJTUlUKTsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gbmV3VG9rZW5zOwogICAgICAgIHN1cHBseSs9IG5ld1Rva2VuczsKICAgICAgICBpY29Tb2xkVG9rZW5zKz0gbmV3VG9rZW5zOwogICAgICAgIHRvdGFsU29sZFRva2Vucys9IG5ld1Rva2VuczsKCiAgICAgICAgTG9nQnV5KG1zZy5zZW5kZXIsIG5ld1Rva2Vucyk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UHJpY2UoKWNvbnN0YW50IHJldHVybnModWludCkKICAgIHsKICAgICAgICBpZihjdXJyZW50U3RhdGU9PVN0YXRlLklDT1J1bm5pbmcpewogICAgICAgICAgICAgaWYoaWNvU29sZFRva2VuczwoMjAwMDAwMDAwICogKDEgZXRoZXIgLyAxIHdlaSkpKXsKICAgICAgICAgICAgICAgICAgcmV0dXJuIElDT19QUklDRTE7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICAKICAgICAgICAgICAgIGlmKGljb1NvbGRUb2tlbnM8KDMwMDAwMDAwMCAqICgxIGV0aGVyIC8gMSB3ZWkpKSl7CiAgICAgICAgICAgICAgICAgIHJldHVybiBJQ09fUFJJQ0UyOwogICAgICAgICAgICAgfQoKICAgICAgICAgICAgIHJldHVybiBJQ09fUFJJQ0UzOwogICAgICAgIH1lbHNlewogICAgICAgICAgICAgcmV0dXJuIFBSRVNBTEVfUFJJQ0U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldFN0YXRlKFN0YXRlIF9uZXh0U3RhdGUpIHB1YmxpYyBvbmx5VG9rZW5NYW5hZ2VyCiAgICB7CiAgICAgICAgLy9zZXRTdGF0ZSgpIG1ldGhvZCBjYWxsIHNob3VsZG4ndCBiZSBlbnRlcnRhaW5lZCBhZnRlciBJQ09GaW5pc2hlZAogICAgICAgIHJlcXVpcmUoY3VycmVudFN0YXRlICE9IFN0YXRlLklDT0ZpbmlzaGVkKTsKICAgICAgICAKICAgICAgICBjdXJyZW50U3RhdGUgPSBfbmV4dFN0YXRlOwogICAgICAgIC8vIGVuYWJsZS9kaXNhYmxlIHRyYW5zZmVycwogICAgICAgIC8vZW5hYmxlIHRyYW5zZmVycyBvbmx5IGFmdGVyIElDT0ZpbmlzaGVkLCBkaXNhYmxlIG90aGVyd2lzZQogICAgICAgIC8vZW5hYmxlVHJhbnNmZXJzID0gKGN1cnJlbnRTdGF0ZT09U3RhdGUuSUNPRmluaXNoZWQpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBEaXNhYmxlVHJhbnNmZXIoKSBwdWJsaWMgb25seVRva2VuTWFuYWdlcgogICAgewogICAgICAgIGVuYWJsZVRyYW5zZmVycyA9IGZhbHNlOwogICAgfQogICAgCiAgICAKICAgIGZ1bmN0aW9uIEVuYWJsZVRyYW5zZmVyKCkgcHVibGljIG9ubHlUb2tlbk1hbmFnZXIKICAgIHsKICAgICAgICBlbmFibGVUcmFuc2ZlcnMgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RXRoZXIoKSBwdWJsaWMgb25seVRva2VuTWFuYWdlcgogICAgewogICAgICAgIGlmKHRoaXMuYmFsYW5jZSA+IDApIAogICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZShlc2Nyb3cuc2VuZCh0aGlzLmJhbGFuY2UpKTsKICAgICAgICB9CiAgICB9CgovLy8gT3ZlcnJpZGVzOgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zKGJvb2wpewogICAgICAgIHJlcXVpcmUoZW5hYmxlVHJhbnNmZXJzKTsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyhib29sKXsKICAgICAgICByZXF1aXJlKGVuYWJsZVRyYW5zZmVycyk7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSxfdG8sX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShlbmFibGVUcmFuc2ZlcnMpOwogICAgICAgIHJldHVybiBzdXBlci5hcHByb3ZlKF9zcGVuZGVyLF92YWx1ZSk7CiAgICB9CgovLy8gU2V0dGVycy9nZXR0ZXJzCiAgICBmdW5jdGlvbiBDaGFuZ2VUb2tlbk1hbmFnZXIoYWRkcmVzcyBfbWdyKSBwdWJsaWMgb25seVRva2VuTWFuYWdlcgogICAgewogICAgICAgIHRva2VuTWFuYWdlciA9IF9tZ3I7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIENoYW5nZUNyb3duZXIoYWRkcmVzcyBfbWdyKSBwdWJsaWMgb25seVRva2VuQ3Jvd25lcgogICAgewogICAgICAgIGVzY3JvdyA9IF9tZ3I7CiAgICB9CgogICAgLy8gRGVmYXVsdCBmYWxsYmFjayBmdW5jdGlvbgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIAogICAgewogICAgICAgIGJ1eVRva2VucygpOwogICAgfQp9'.
	

]
