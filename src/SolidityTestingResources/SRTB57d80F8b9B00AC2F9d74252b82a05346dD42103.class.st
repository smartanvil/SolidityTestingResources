Class {
	#name : #SRTB57d80F8b9B00AC2F9d74252b82a05346dD42103,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTB57d80F8b9B00AC2F9d74252b82a05346dD42103 >> base64 [
	^ 'Ly8gQml0RnJhbmsuY29tIDogVGhlIHVuc3RvcHBhYmxlIG9uLWNoYWluIGV4Y2hhbmdlIG9mIEVSQzIwIHRva2VucwovLyBDb3B5cmlnaHQgKGMpIDIwMTguIEFsbCByaWdodHMgcmVzZXJ2ZWQuCgpwcmFnbWEgc29saWRpdHkgXjAuNC4yMDsKCmNvbnRyYWN0IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIGFkZCh1aW50IHgsIHVpbnQgeSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IHopIHsKICAgICAgICByZXF1aXJlKCh6ID0geCArIHkpID49IHgpOwogICAgfQogICAgZnVuY3Rpb24gc3ViKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHJlcXVpcmUoKHogPSB4IC0geSkgPD0geCk7CiAgICB9CiAgICBmdW5jdGlvbiBtdWwodWludCB4LCB1aW50IHkpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCB6KSB7CiAgICAgICAgcmVxdWlyZSh5ID09IDAgfHwgKHogPSB4ICogeSkgLyB5ID09IHgpOwogICAgfQp9Cgpjb250cmFjdCBFUkMyMCB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIGRzdCwgdWludCB3YWQpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIHNyYywgYWRkcmVzcyBkc3QsIHVpbnQgd2FkKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IEJpdEZyYW5rIGlzIFNhZmVNYXRoIHsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgYWRtaW47CiAgICAKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJCaXRGcmFuayB2MSI7CiAgICBib29sIHB1YmxpYyBzdXNwZW5kRGVwb3NpdCA9IGZhbHNlOyAvLyBpZiB3ZSBhcmUgdXBncmFkaW5nIHRvIGEgbmV3IGNvbnRyYWN0LCBkZXBvc2l0IHdpbGwgYmUgc3VzcGVuZGVkLCBidXQgeW91IGNhbiBzdGlsbCB3aXRoZHJhdyAvIHRyYWRlCiAKICAgIC8vIG1hcmtldCBkZXRhaWxzIGZvciBlYWNoIFRPS0VOCiAgICBzdHJ1Y3QgVE9LRU5fREVUQUlMIHsKICAgICAgICB1aW50OCBsZXZlbDsgLy8gMSA9IGxpc3RlZCwgMiA9IHJlZ2lzdGVyZWQsIDMgPSB2ZXJpZmllZCAoYnkgYWRtaW4pLCBNQVggPSA5CiAgICAgICAgdWludCBmZWU7IC8vIGZlZSBmb3IgdGFrZXIuIDEwMCA9IDAuMDElLCAxMDAwID0gMC4xJSwgMTAwMDAgPSAxJSwgMTAwMDAwMCA9IDEwMCUKICAgIH0KICAgIHVpbnQgcHVibGljIG1hcmtldFJlZ2lzdGVyQ29zdCA9IDk5ICogKDEwICoqIDE2KTsgLy8gMC45OSBFVEgKICAgIHVpbnQgcHVibGljIG1hcmtldERlZmF1bHRGZWVMb3cgPSAyMDAwOyAvLyAwLjIlCiAgICB1aW50IHB1YmxpYyBtYXJrZXREZWZhdWx0RmVlSGlnaCA9IDgwMDA7IC8vIDAuOCUKICAgIAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBUT0tFTl9ERVRBSUwpIHB1YmxpYyB0b2tlbk1hcmtldDsgLy8gcmVnaXN0ZXJlZCB0b2tlbiBkZXRhaWxzCiAgICBhZGRyZXNzW10gcHVibGljIHRva2VuTGlzdDsgLy8gbGlzdCBvZiByZWdpc3RlcmVkIHRva2VucwogICAgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIHB1YmxpYyBiYWxhbmNlOyAvLyBiYWxhbmNlW3Rva2VuQWRkcl1bdXNlckFkZHJdCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIHB1YmxpYyBiYWxhbmNlTG9ja2VkOyAvLyB0b2tlbiBsb2NrZWQgaW4gb3JkZXJzCiAgICAKICAgIHVpbnQgcHVibGljIGdsb2JhbE9yZGVyU2VyaWFsID0gMTAwMDAwOyAvLyBhbHdheXMgaW5jcmVhc2luZwogICAgdWludCBwdWJsaWMgUFJJQ0VfRkFDVE9SID0gMTAgKiogMTg7IC8vIGFsbCBwcmljZXMgYXJlIG11bHRpcGxpZWQgYnkgUFJJQ0VfRkFDVE9SCiAgICAKICAgIHN0cnVjdCBPUkRFUiB7CiAgICAgICAgYWRkcmVzcyB0b2tlbjsKICAgICAgICBib29sIGlzQnV5OyAvLyBidXkgb3Igc2VsbAogICAgICAgIGFkZHJlc3MgdXNlcjsgLy8gdXNlck1ha2VyCiAgICAgICAgdWludCB3YWQ7CiAgICAgICAgdWludCB3YWRGaWxsZWQ7CiAgICAgICAgdWludCBwcmljZTsgLy8gYWxsIHByaWNlcyBhcmUgbXVsdGlwbGllZCBieSBQUklDRV9GQUNUT1IKICAgICAgICB1aW50IGxpc3RQb3NpdGlvbjsgLy8gcG9zaXRpb24gaW4gb3JkZXJMaXN0LCB1c2VmdWwgd2hlbiB1cGRhdGluZyBvcmRlckxpc3QKICAgIH0KICAgIAogICAgbWFwcGluZyAodWludCA9PiBPUkRFUikgcHVibGljIG9yZGVyOyAvLyBbb3JkZXJJRF0gPT4gT1JERVIKICAgIHVpbnRbXSBwdWJsaWMgb3JkZXJMaXN0OyAvLyBsaXN0IG9mIG9yZGVySURzCgogICAgLy89PT09PT09PT09PT09PSBFVkVOVFMgPT09PT09PT09PT09PT0KICAgIAogICAgZXZlbnQgTUFSS0VUX0NIQU5HRShhZGRyZXNzIGluZGV4ZWQgdG9rZW4pOwogICAgZXZlbnQgREVQT1NJVChhZGRyZXNzIGluZGV4ZWQgdXNlciwgYWRkcmVzcyBpbmRleGVkIHRva2VuLCB1aW50IHdhZCwgdWludCByZXN1bHQpOwogICAgZXZlbnQgV0lUSERSQVcoYWRkcmVzcyBpbmRleGVkIHVzZXIsIGFkZHJlc3MgaW5kZXhlZCB0b2tlbiwgdWludCB3YWQsIHVpbnQgcmVzdWx0KTsKICAgIGV2ZW50IE9SREVSX1BMQUNFKGFkZHJlc3MgaW5kZXhlZCB1c2VyLCBhZGRyZXNzIGluZGV4ZWQgdG9rZW4sIGJvb2wgaXNCdXksIHVpbnQgd2FkLCB1aW50IHByaWNlLCB1aW50IGluZGV4ZWQgaWQpOwogICAgZXZlbnQgT1JERVJfQ0FOQ0VMKGFkZHJlc3MgaW5kZXhlZCB1c2VyLCBhZGRyZXNzIGluZGV4ZWQgdG9rZW4sIHVpbnQgaW5kZXhlZCBpZCk7CiAgICBldmVudCBPUkRFUl9NT0RJRlkoYWRkcmVzcyBpbmRleGVkIHVzZXIsIGFkZHJlc3MgaW5kZXhlZCB0b2tlbiwgdWludCBpbmRleGVkIGlkLCB1aW50IG5ld193YWQsIHVpbnQgbmV3X3ByaWNlKTsKICAgIGV2ZW50IE9SREVSX0ZJTEwoYWRkcmVzcyBpbmRleGVkIHVzZXJUYWtlciwgYWRkcmVzcyB1c2VyTWFrZXIsIGFkZHJlc3MgaW5kZXhlZCB0b2tlbiwgYm9vbCBpc09yaWdpbmFsT3JkZXJCdXksIHVpbnQgZmlsbEFtdCwgdWludCBwcmljZSwgdWludCBpbmRleGVkIGlkKTsKICAgIGV2ZW50IE9SREVSX0RPTkUoYWRkcmVzcyBpbmRleGVkIHVzZXJUYWtlciwgYWRkcmVzcyB1c2VyTWFrZXIsIGFkZHJlc3MgaW5kZXhlZCB0b2tlbiwgYm9vbCBpc09yaWdpbmFsT3JkZXJCdXksIHVpbnQgZmlsbEFtdCwgdWludCBwcmljZSwgdWludCBpbmRleGVkIGlkKTsKICAgIAogICAgLy89PT09PT09PT09PT09PSBPUkRFUiBQTEFDRU1FTlQgJiBUUkFERSA9PT09PT09PT09PT09PQogICAgCiAgICAvLyBnZXQgb3JkZXIgbGlzdCBjb3VudAogICAgCiAgICBmdW5jdGlvbiBnZXRPcmRlckNvdW50KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gb3JkZXJMaXN0Lmxlbmd0aDsKICAgIH0KICAgIAogICAgLy8gbGltaXQgb3JkZXIgQCBwcmljZSAoYWxsIHByaWNlcyBhcmUgbXVsdGlwbGllZCBieSBQUklDRV9GQUNUT1IpCiAgICAKICAgIGZ1bmN0aW9uIG9yZGVyUGxhY2UoYWRkcmVzcyB0b2tlbiwgYm9vbCBpc0J1eSwgdWludCB3YWQsIHVpbnQgcHJpY2UpIHB1YmxpYyB7CiAgICAgICAgCiAgICAgICAgdWludCBuZXdMb2NrZWQ7CiAgICAgICAgaWYgKGlzQnV5KSB7IC8vIGJ1eSB0b2tlbiwgbG9jayBFVEgKICAgICAgICAgICAgbmV3TG9ja2VkID0gYWRkKGJhbGFuY2VMb2NrZWRbMF1bbXNnLnNlbmRlcl0sIG11bCh3YWQsIHByaWNlKSAvIFBSSUNFX0ZBQ1RPUik7CiAgICAgICAgICAgIHJlcXVpcmUoYmFsYW5jZVswXVttc2cuc2VuZGVyXSA+PSBuZXdMb2NrZWQpOwogICAgICAgICAgICBiYWxhbmNlTG9ja2VkWzBdW21zZy5zZW5kZXJdID0gbmV3TG9ja2VkOwogICAgICAgIH0gZWxzZSB7IC8vIHNlbGwgdG9rZW4sIGxvY2sgdG9rZW4KICAgICAgICAgICAgbmV3TG9ja2VkID0gYWRkKGJhbGFuY2VMb2NrZWRbdG9rZW5dW21zZy5zZW5kZXJdLCB3YWQpOwogICAgICAgICAgICByZXF1aXJlKGJhbGFuY2VbdG9rZW5dW21zZy5zZW5kZXJdID49IG5ld0xvY2tlZCk7CiAgICAgICAgICAgIGJhbGFuY2VMb2NrZWRbdG9rZW5dW21zZy5zZW5kZXJdID0gbmV3TG9ja2VkOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBwbGFjZSBvcmRlcgogICAgICAgIE9SREVSIG1lbW9yeSBvOwogICAgICAgIG8udG9rZW4gPSB0b2tlbjsKICAgICAgICBvLmlzQnV5ID0gaXNCdXk7CiAgICAgICAgby53YWQgPSB3YWQ7CiAgICAgICAgby5wcmljZSA9IHByaWNlOwogICAgICAgIG8udXNlciA9IG1zZy5zZW5kZXI7CiAgICAgICAgby5saXN0UG9zaXRpb24gPSBvcmRlckxpc3QubGVuZ3RoOyAvLyBwb3NpdGlvbiBpbiBvcmRlckxpc3QKICAgICAgICBvcmRlcltnbG9iYWxPcmRlclNlcmlhbF0gPSBvOwogICAgICAgIAogICAgICAgIC8vIHVwZGF0ZSBvcmRlciBsaXN0IHdpdGggb3JkZXJJRCA9IGdsb2JhbE9yZGVyU2VyaWFsCiAgICAgICAgb3JkZXJMaXN0LnB1c2goZ2xvYmFsT3JkZXJTZXJpYWwpOwogICAgICAgIAogICAgICAgIC8vIGV2ZW50CiAgICAgICAgT1JERVJfUExBQ0UobXNnLnNlbmRlciwgdG9rZW4sIGlzQnV5LCB3YWQsIHByaWNlLCBnbG9iYWxPcmRlclNlcmlhbCk7CgogICAgICAgIGdsb2JhbE9yZGVyU2VyaWFsKys7IC8vIGNhbiBuZXZlciBvdmVyZmxvdwogICAgfQogICAgCiAgICAvLyBtYXJrZXQgb3JkZXIgdG8gdGFrZSBvcmRlciBAIHByaWNlIChhbGwgcHJpY2VzIGFyZSBtdWx0aXBsaWVkIGJ5IFBSSUNFX0ZBQ1RPUikKICAgIAogICAgZnVuY3Rpb24gb3JkZXJUcmFkZSh1aW50IG9yZGVySUQsIHVpbnQgd2FkLCB1aW50IHByaWNlKSBwdWJsaWMgewogICAgICAgIAogICAgICAgIE9SREVSIHN0b3JhZ2UgbyA9IG9yZGVyW29yZGVySURdOwogICAgICAgIHJlcXVpcmUocHJpY2UgPT0gby5wcmljZSk7IC8vIHByaWNlIG11c3QgbWF0Y2gsIGJlY2F1c2UgbWFrZXIgY2FuIG1vZGlmeSBwcmljZQogICAgICAgIAogICAgICAgIC8vIGZpbGwgYW10CiAgICAgICAgdWludCBmaWxsQW10ID0gc3ViKG8ud2FkLCBvLndhZEZpbGxlZCk7CiAgICAgICAgaWYgKGZpbGxBbXQgPiB3YWQpIGZpbGxBbXQgPSB3YWQ7CiAgICAgICAgCiAgICAgICAgLy8gZmlsbCBFVEggYW5kIGZlZQogICAgICAgIHVpbnQgZmlsbEVUSCA9IG11bChmaWxsQW10LCBwcmljZSkgLyBQUklDRV9GQUNUT1I7CiAgICAgICAgdWludCBmZWUgPSBtdWwoZmlsbEVUSCwgdG9rZW5NYXJrZXRbby50b2tlbl0uZmVlKSAvIDEwMDAwMDA7CiAgICAKICAgICAgICB1aW50IG5ld1Rha2VyQmFsYW5jZTsKICAgICAgICAKICAgICAgICBpZiAoby5pc0J1eSkgeyAvLyB0YWtlciBpcyBzZWxsaW5nIHRva2VuIHRvIG1ha2VyCiAgICAgICAgICAgIAogICAgICAgICAgICAvLyByZW1vdmUgdG9rZW4gZnJvbSB0YWtlciAoY2hlY2sgYmFsYW5jZSBmaXJzdCkKICAgICAgICAgICAgbmV3VGFrZXJCYWxhbmNlID0gc3ViKGJhbGFuY2Vbby50b2tlbl1bbXNnLnNlbmRlcl0sIGZpbGxBbXQpOwogICAgICAgICAgICByZXF1aXJlKG5ld1Rha2VyQmFsYW5jZSA+PSBiYWxhbmNlTG9ja2VkW28udG9rZW5dW21zZy5zZW5kZXJdKTsKICAgICAgICAgICAgYmFsYW5jZVtvLnRva2VuXVttc2cuc2VuZGVyXSA9IG5ld1Rha2VyQmFsYW5jZTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHJlbW92ZSBFVEggZnJvbSBtYWtlcgogICAgICAgICAgICBiYWxhbmNlWzBdW28udXNlcl0gPSBzdWIoYmFsYW5jZVswXVtvLnVzZXJdLCBmaWxsRVRIKTsKICAgICAgICAgICAgYmFsYW5jZUxvY2tlZFswXVtvLnVzZXJdID0gc3ViKGJhbGFuY2VMb2NrZWRbMF1bby51c2VyXSwgZmlsbEVUSCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBnaXZlIHRva2VuIHRvIG1ha2VyCiAgICAgICAgICAgIGJhbGFuY2Vbby50b2tlbl1bby51c2VyXSA9IGFkZChiYWxhbmNlW28udG9rZW5dW28udXNlcl0sIGZpbGxBbXQpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gZ2l2ZSBFVEggKGFmdGVyIGZlZSkgdG8gdGFrZXIgCiAgICAgICAgICAgIGJhbGFuY2VbMF1bbXNnLnNlbmRlcl0gPSBhZGQoYmFsYW5jZVswXVttc2cuc2VuZGVyXSwgc3ViKGZpbGxFVEgsIGZlZSkpOwogICAgICAgICAgICAKICAgICAgICB9IGVsc2UgeyAvLyB0YWtlciBpcyBidXlpbmcgdG9rZW4gZnJvbSBtYWtlcgogICAgICAgIAogICAgICAgICAgICAvLyByZW1vdmUgRVRIICh3aXRoIGZlZSkgZnJvbSB0YWtlciAoY2hlY2sgYmFsYW5jZSBmaXJzdCkKICAgICAgICAgICAgbmV3VGFrZXJCYWxhbmNlID0gc3ViKGJhbGFuY2VbMF1bbXNnLnNlbmRlcl0sIGFkZChmaWxsRVRILCBmZWUpKTsKICAgICAgICAgICAgcmVxdWlyZShuZXdUYWtlckJhbGFuY2UgPj0gYmFsYW5jZUxvY2tlZFswXVttc2cuc2VuZGVyXSk7CiAgICAgICAgICAgIGJhbGFuY2VbMF1bbXNnLnNlbmRlcl0gPSBuZXdUYWtlckJhbGFuY2U7CgogICAgICAgICAgICAvLyByZW1vdmUgdG9rZW4gZnJvbSBtYWtlcgogICAgICAgICAgICBiYWxhbmNlW28udG9rZW5dW28udXNlcl0gPSBzdWIoYmFsYW5jZVtvLnRva2VuXVtvLnVzZXJdLCBmaWxsQW10KTsKICAgICAgICAgICAgYmFsYW5jZUxvY2tlZFtvLnRva2VuXVtvLnVzZXJdID0gc3ViKGJhbGFuY2VMb2NrZWRbby50b2tlbl1bby51c2VyXSwgZmlsbEFtdCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBnaXZlIEVUSCB0byBtYWtlcgogICAgICAgICAgICBiYWxhbmNlWzBdW28udXNlcl0gPSBhZGQoYmFsYW5jZVswXVtvLnVzZXJdLCBmaWxsRVRIKTsKCiAgICAgICAgICAgIC8vIGdpdmUgdG9rZW4gdG8gdGFrZXIKICAgICAgICAgICAgYmFsYW5jZVtvLnRva2VuXVttc2cuc2VuZGVyXSA9IGFkZChiYWxhbmNlW28udG9rZW5dW21zZy5zZW5kZXJdLCBmaWxsQW10KTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgYmFsYW5jZVswXVthZG1pbl0gPSBhZGQoYmFsYW5jZVswXVthZG1pbl0sIGZlZSk7CgogICAgICAgIC8vIGZpbGwgb3JkZXIKICAgICAgICBvLndhZEZpbGxlZCA9IGFkZChvLndhZEZpbGxlZCwgZmlsbEFtdCk7CiAgICAgICAgCiAgICAgICAgLy8gcmVtb3ZlIGZpbGxlZCBvcmRlcgogICAgICAgIGlmIChvLndhZEZpbGxlZCA+PSBvLndhZCkgewoKICAgICAgICAgICAgLy8gdXBkYXRlIG9yZGVyIGxpc3QKICAgICAgICAgICAgb3JkZXJMaXN0W28ubGlzdFBvc2l0aW9uXSA9IG9yZGVyTGlzdFtvcmRlckxpc3QubGVuZ3RoIC0gMV07CiAgICAgICAgICAgIG9yZGVyW29yZGVyTGlzdFtvLmxpc3RQb3NpdGlvbl1dLmxpc3RQb3NpdGlvbiA9IG8ubGlzdFBvc2l0aW9uOyAvLyB1cGRhdGUgcG9zaXRpb24gaW4gb3JkZXJMaXN0CiAgICAgICAgICAgIG9yZGVyTGlzdC5sZW5ndGgtLTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIGRlbGV0ZSBvcmRlcgogICAgICAgICAgICBPUkRFUl9ET05FKG1zZy5zZW5kZXIsIG8udXNlciwgby50b2tlbiwgby5pc0J1eSwgZmlsbEFtdCwgcHJpY2UsIG9yZGVySUQpOwoKICAgICAgICAgICAgZGVsZXRlIG9yZGVyW29yZGVySURdOwogICAgICAgICAgICAKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBPUkRFUl9GSUxMKG1zZy5zZW5kZXIsIG8udXNlciwgby50b2tlbiwgby5pc0J1eSwgZmlsbEFtdCwgcHJpY2UsIG9yZGVySUQpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gb3JkZXJDYW5jZWwodWludCBvcmRlcklEKSBwdWJsaWMgewogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgb3JkZXIgaXMgY29ycmVjdAogICAgICAgIE9SREVSIG1lbW9yeSBvID0gb3JkZXJbb3JkZXJJRF07IC8vIG8gaXMgbm90IG1vZGlmaWVkCiAgICAgICAgcmVxdWlyZShvLnVzZXIgPT0gbXNnLnNlbmRlcik7CgogICAgICAgIHVpbnQgd2FkTGVmdCA9IHN1YihvLndhZCwgby53YWRGaWxsZWQpOwoKICAgICAgICAvLyByZWxlYXNlIHJlbWFpbmVkIGFtdAogICAgICAgIGlmIChvLmlzQnV5KSB7IC8vIHJlbGVhc2UgRVRICiAgICAgICAgICAgIGJhbGFuY2VMb2NrZWRbMF1bbXNnLnNlbmRlcl0gPSBzdWIoYmFsYW5jZUxvY2tlZFswXVttc2cuc2VuZGVyXSwgbXVsKG8ucHJpY2UsIHdhZExlZnQpIC8gUFJJQ0VfRkFDVE9SKTsKICAgICAgICB9IGVsc2UgeyAvLyByZWxlYXNlIHRva2VuCiAgICAgICAgICAgIGJhbGFuY2VMb2NrZWRbby50b2tlbl1bbXNnLnNlbmRlcl0gPSBzdWIoYmFsYW5jZUxvY2tlZFtvLnRva2VuXVttc2cuc2VuZGVyXSwgd2FkTGVmdCk7CiAgICAgICAgfQoKICAgICAgICBPUkRFUl9DQU5DRUwobXNnLnNlbmRlciwgby50b2tlbiwgb3JkZXJJRCk7CiAgICAgICAgCiAgICAgICAgLy8gdXBkYXRlIG9yZGVyIGxpc3QKICAgICAgICBvcmRlckxpc3Rbby5saXN0UG9zaXRpb25dID0gb3JkZXJMaXN0W29yZGVyTGlzdC5sZW5ndGggLSAxXTsKICAgICAgICBvcmRlcltvcmRlckxpc3Rbby5saXN0UG9zaXRpb25dXS5saXN0UG9zaXRpb24gPSBvLmxpc3RQb3NpdGlvbjsgLy8gdXBkYXRlIHBvc2l0aW9uIGluIG9yZGVyTGlzdAogICAgICAgIG9yZGVyTGlzdC5sZW5ndGgtLTsKICAgICAgICAKICAgICAgICAvLyBkZWxldGUgb3JkZXIKICAgICAgICBkZWxldGUgb3JkZXJbb3JkZXJJRF07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIG9yZGVyTW9kaWZ5KHVpbnQgb3JkZXJJRCwgdWludCBuZXdfd2FkLCB1aW50IG5ld19wcmljZSkgcHVibGljIHsKICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIG9yZGVyIGlzIGNvcnJlY3QKICAgICAgICBPUkRFUiBzdG9yYWdlIG8gPSBvcmRlcltvcmRlcklEXTsgLy8gbyBpcyBtb2RpZmllZAogICAgICAgIHJlcXVpcmUoby51c2VyID09IG1zZy5zZW5kZXIpOwogICAgICAgIHJlcXVpcmUoby53YWRGaWxsZWQgPT0gMCk7IC8vIGZvciBzaW1wbGljaXR5LCB5b3UgY2FuJ3QgY2hhbmdlIGZpbGxlZCBvcmRlcnMKICAgICAgICAKICAgICAgICAvLyBjaGFuZ2UgYW1vdW50IG9mIGxvY2tlZCBhc3NldHMKICAgICAgICAKICAgICAgICB1aW50IG5ld0xvY2tlZDsKICAgICAgICBpZiAoby5pc0J1eSkgeyAvLyBsb2NrIEVUSAogICAgICAgICAgICBuZXdMb2NrZWQgPSBzdWIoYWRkKGJhbGFuY2VMb2NrZWRbMF1bbXNnLnNlbmRlcl0sIG11bChuZXdfd2FkLCBuZXdfcHJpY2UpIC8gUFJJQ0VfRkFDVE9SKSwgbXVsKG8ud2FkLCBvLnByaWNlKSAvIFBSSUNFX0ZBQ1RPUik7CiAgICAgICAgICAgIHJlcXVpcmUoYmFsYW5jZVswXVttc2cuc2VuZGVyXSA+PSBuZXdMb2NrZWQpOwogICAgICAgICAgICBiYWxhbmNlTG9ja2VkWzBdW21zZy5zZW5kZXJdID0gbmV3TG9ja2VkOwogICAgICAgIH0gZWxzZSB7IC8vIGxvY2sgdG9rZW4KICAgICAgICAgICAgbmV3TG9ja2VkID0gc3ViKGFkZChiYWxhbmNlTG9ja2VkW28udG9rZW5dW21zZy5zZW5kZXJdLCBuZXdfd2FkKSwgby53YWQpOwogICAgICAgICAgICByZXF1aXJlKGJhbGFuY2Vbby50b2tlbl1bbXNnLnNlbmRlcl0gPj0gbmV3TG9ja2VkKTsKICAgICAgICAgICAgYmFsYW5jZUxvY2tlZFtvLnRva2VuXVttc2cuc2VuZGVyXSA9IG5ld0xvY2tlZDsKICAgICAgICB9CiAgICAKICAgICAgICAvLyBtb2RpZnkgb3JkZXIKICAgICAgICBvLndhZCA9IG5ld193YWQ7CiAgICAgICAgby5wcmljZSA9IG5ld19wcmljZTsKICAgICAgICAKICAgICAgICBPUkRFUl9NT0RJRlkobXNnLnNlbmRlciwgby50b2tlbiwgb3JkZXJJRCwgbmV3X3dhZCwgbmV3X3ByaWNlKTsKICAgIH0KICAKICAgIC8vPT09PT09PT09PT09PT0gQURNSU5JU1RSQVRJT04gPT09PT09PT09PT09PT0KICAKICAgIGZ1bmN0aW9uIEJpdEZyYW5rKCkgcHVibGljIHsKICAgICAgICBhZG1pbiA9IG1zZy5zZW5kZXI7CiAgICAgICAgCiAgICAgICAgYWRtaW5TZXRNYXJrZXQoMCwgOSwgMCk7IC8vIEVUSCwgbGV2ZWwgOSwgZmVlID0gMAogICAgfQogICAgCiAgICAvLyBzZXQgYWRtaW4KICAgIGZ1bmN0aW9uIGFkbWluU2V0QWRtaW4oYWRkcmVzcyBuZXdBZG1pbikgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRtaW4pOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZVswXVtuZXdBZG1pbl0gPiAwKTsgLy8gbmV3QWRtaW4gbXVzdCBoYXZlIGRlcG9zaXRzCiAgICAgICAgYWRtaW4gPSBuZXdBZG1pbjsKICAgIH0KICAgIAogICAgLy8gc3VzcGVuZCBkZXBvc2l0IChwcmVwYXJlIGZvciB1cGdyYWRpbmcgdG8gYSBuZXcgY29udHJhY3QpCiAgICBmdW5jdGlvbiBhZG1pblN1c3BlbmREZXBvc2l0KGJvb2wgc3RhdHVzKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhZG1pbik7CiAgICAgICAgc3VzcGVuZERlcG9zaXQgPSBzdGF0dXM7CiAgICB9CiAgICAKICAgIC8vIHNldCBtYXJrZXQgZGV0YWlscwogICAgZnVuY3Rpb24gYWRtaW5TZXRNYXJrZXQoYWRkcmVzcyB0b2tlbiwgdWludDggbGV2ZWxfLCB1aW50IGZlZV8pIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluKTsKICAgICAgICByZXF1aXJlKGxldmVsXyAhPSAwKTsKICAgICAgICByZXF1aXJlKGxldmVsXyA8PSA5KTsKICAgICAgICBpZiAodG9rZW5NYXJrZXRbdG9rZW5dLmxldmVsID09IDApIHsKICAgICAgICAgICAgdG9rZW5MaXN0LnB1c2godG9rZW4pOwogICAgICAgIH0KICAgICAgICB0b2tlbk1hcmtldFt0b2tlbl0ubGV2ZWwgPSBsZXZlbF87CiAgICAgICAgdG9rZW5NYXJrZXRbdG9rZW5dLmZlZSA9IGZlZV87CiAgICAgICAgTUFSS0VUX0NIQU5HRSh0b2tlbik7CiAgICB9CiAgICAKICAgIC8vIHNldCByZWdpc3RlciBjb3N0CiAgICBmdW5jdGlvbiBhZG1pblNldFJlZ2lzdGVyQ29zdCh1aW50IGNvc3RfKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhZG1pbik7CiAgICAgICAgbWFya2V0UmVnaXN0ZXJDb3N0ID0gY29zdF87CiAgICB9CiAgICAKICAgIC8vIHNldCBkZWZhdWx0IGZlZQogICAgZnVuY3Rpb24gYWRtaW5TZXREZWZhdWx0RmVlKHVpbnQgbWFya2V0RGVmYXVsdEZlZUxvd18sIHVpbnQgbWFya2V0RGVmYXVsdEZlZUhpZ2hfKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhZG1pbik7CiAgICAgICAgbWFya2V0RGVmYXVsdEZlZUxvdyA9IG1hcmtldERlZmF1bHRGZWVMb3dfOwogICAgICAgIG1hcmtldERlZmF1bHRGZWVIaWdoID0gbWFya2V0RGVmYXVsdEZlZUhpZ2hfOwogICAgfQogICAgCiAgICAvLz09PT09PT09PT09PT09IE1BUktFVCBSRUdJU1RSQVRJT04gJiBIRUxQRVIgPT09PT09PT09PT09PT0KCiAgICAvLyByZWdpc3RlciB0b2tlbgogICAgZnVuY3Rpb24gbWFya2V0UmVnaXN0ZXJUb2tlbihhZGRyZXNzIHRva2VuKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSh0b2tlbk1hcmtldFt0b2tlbl0ubGV2ZWwgPT0gMSk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gbWFya2V0UmVnaXN0ZXJDb3N0KTsgLy8gcmVnaXN0ZXIgY29zdAogICAgICAgIGJhbGFuY2VbMF1bYWRtaW5dID0gYWRkKGJhbGFuY2VbMF1bYWRtaW5dLCBtc2cudmFsdWUpOwogICAgICAgIAogICAgICAgIHRva2VuTWFya2V0W3Rva2VuXS5sZXZlbCA9IDI7CiAgICAgICAgdG9rZW5NYXJrZXRbdG9rZW5dLmZlZSA9IG1hcmtldERlZmF1bHRGZWVMb3c7CiAgICAgICAgTUFSS0VUX0NIQU5HRSh0b2tlbik7CiAgICB9CiAgICAKICAgIC8vIGdldCB0b2tlbiBsaXN0IGNvdW50CiAgICBmdW5jdGlvbiBnZXRUb2tlbkNvdW50KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdG9rZW5MaXN0Lmxlbmd0aDsKICAgIH0KICAKICAgIC8vPT09PT09PT09PT09PT0gREVQT1NJVCAmIFdJVEhEUkFXID09PT09PT09PT09PT09CiAgCiAgICBmdW5jdGlvbiBkZXBvc2l0RVRIKCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoIXN1c3BlbmREZXBvc2l0KTsKICAgICAgICBiYWxhbmNlWzBdW21zZy5zZW5kZXJdID0gYWRkKGJhbGFuY2VbMF1bbXNnLnNlbmRlcl0sIG1zZy52YWx1ZSk7CiAgICAgICAgREVQT1NJVChtc2cuc2VuZGVyLCAwLCBtc2cudmFsdWUsIGJhbGFuY2VbMF1bbXNnLnNlbmRlcl0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlcG9zaXRUb2tlbihhZGRyZXNzIHRva2VuLCB1aW50IHdhZCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKCFzdXNwZW5kRGVwb3NpdCk7CiAgICAgICAgLy8gcmVtZW1iZXIgdG8gY2FsbCBUT0tFTihhZGRyZXNzKS5hcHByb3ZlKHRoaXMsIHdhZCkgZmlyc3QKICAgICAgICByZXF1aXJlKEVSQzIwKHRva2VuKS50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgd2FkKSk7IC8vIHRyYW5zZmVyIHRva2VuCiAgICAgICAgCiAgICAgICAgLy8gYWRkIG5ldyB0b2tlbiB0byBsaXN0CiAgICAgICAgaWYgKHRva2VuTWFya2V0W3Rva2VuXS5sZXZlbCA9PSAwKSB7CiAgICAgICAgICAgIHRva2VuTGlzdC5wdXNoKHRva2VuKTsKICAgICAgICAgICAgdG9rZW5NYXJrZXRbdG9rZW5dLmxldmVsID0gMTsKICAgICAgICAgICAgdG9rZW5NYXJrZXRbdG9rZW5dLmZlZSA9IG1hcmtldERlZmF1bHRGZWVIaWdoOwogICAgICAgICAgICBNQVJLRVRfQ0hBTkdFKHRva2VuKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgYmFsYW5jZVt0b2tlbl1bbXNnLnNlbmRlcl0gPSBhZGQoYmFsYW5jZVt0b2tlbl1bbXNnLnNlbmRlcl0sIHdhZCk7IC8vIHNldCBiYWxhbmNlCiAgICAgICAgREVQT1NJVChtc2cuc2VuZGVyLCB0b2tlbiwgd2FkLCBiYWxhbmNlW3Rva2VuXVttc2cuc2VuZGVyXSk7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdFVEgodWludCB3YWQpIHB1YmxpYyB7CiAgICAgICAgYmFsYW5jZVswXVttc2cuc2VuZGVyXSA9IHN1YihiYWxhbmNlWzBdW21zZy5zZW5kZXJdLCB3YWQpOyAvLyBzZXQgYW10IGZpcnN0CiAgICAgICAgcmVxdWlyZShiYWxhbmNlWzBdW21zZy5zZW5kZXJdID49IGJhbGFuY2VMb2NrZWRbMF1bbXNnLnNlbmRlcl0pOyAvLyBjYW4ndCB3aXRoZHJhdyBsb2NrZWQgRVRICiAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcih3YWQpOyAvLyBzZW5kIEVUSAogICAgICAgIFdJVEhEUkFXKG1zZy5zZW5kZXIsIDAsIHdhZCwgYmFsYW5jZVswXVttc2cuc2VuZGVyXSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW4oYWRkcmVzcyB0b2tlbiwgdWludCB3YWQpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSh0b2tlbiAhPSAwKTsgLy8gbm90IGZvciB3aXRoZHJhd2luZyBFVEgKICAgICAgICBiYWxhbmNlW3Rva2VuXVttc2cuc2VuZGVyXSA9IHN1YihiYWxhbmNlW3Rva2VuXVttc2cuc2VuZGVyXSwgd2FkKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VbdG9rZW5dW21zZy5zZW5kZXJdID49IGJhbGFuY2VMb2NrZWRbdG9rZW5dW21zZy5zZW5kZXJdKTsgLy8gY2FuJ3Qgd2l0aGRyYXcgbG9ja2VkIHRva2VuCiAgICAgICAgcmVxdWlyZShFUkMyMCh0b2tlbikudHJhbnNmZXIobXNnLnNlbmRlciwgd2FkKSk7IC8vIHNlbmQgdG9rZW4KICAgICAgICBXSVRIRFJBVyhtc2cuc2VuZGVyLCB0b2tlbiwgd2FkLCBiYWxhbmNlW3Rva2VuXVttc2cuc2VuZGVyXSk7CiAgICB9Cn0='.
	

]
