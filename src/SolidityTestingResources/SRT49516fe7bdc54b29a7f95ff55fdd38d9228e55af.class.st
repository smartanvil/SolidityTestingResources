Class {
	#name : #SRT49516fe7bdc54b29a7f95ff55fdd38d9228e55af,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT49516fe7bdc54b29a7f95ff55fdd38d9228e55af >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCmxpYnJhcnkgQXJyYXlMaWIgewogIC8vIEluc2VydHMgdG8ga2VlcCBhcnJheSBzb3J0ZWQgKGFzc3VtZXMgaW5wdXQgYXJyYXkgaXMgc29ydGVkKQoJZnVuY3Rpb24gaW5zZXJ0SW5QbGFjZSh1aW50OFtdIHN0b3JhZ2Ugc2VsZiwgdWludDggbikgewoJCXVpbnQ4IGluc2VydGluZ0luZGV4ID0gMDsKCgkJd2hpbGUgKHNlbGYubGVuZ3RoID4gMCAmJiBpbnNlcnRpbmdJbmRleCA8IHNlbGYubGVuZ3RoICYmIHNlbGZbaW5zZXJ0aW5nSW5kZXhdIDwgbikgewoJCQlpbnNlcnRpbmdJbmRleCArPSAxOwoJCX0KCgkJc2VsZi5sZW5ndGggKz0gMTsKCQlmb3IgKHVpbnQ4IGkgPSB1aW50OChzZWxmLmxlbmd0aCkgLSAxOyBpID4gaW5zZXJ0aW5nSW5kZXg7IGktLSkgewoJCQlzZWxmW2ldID0gc2VsZltpIC0gMV07CgkJfQoKCQlzZWxmW2luc2VydGluZ0luZGV4XSA9IG47Cgl9Cn0KCmxpYnJhcnkgRGVja0xpYiB7Cgl1c2luZyBBcnJheUxpYiBmb3IgdWludDhbXTsKCgllbnVtIFN1aXQgeyBTcGFkZXMsIEhlYXJ0cywgQ2x1YnMsIERpYW1vbmRzIH0KCXVpbnQ4IGNvbnN0YW50IGNhcmRzUGVyU3VpdCA9IDEzOwoJdWludDggY29uc3RhbnQgc3VpdHMgPSA0OwoJdWludDggY29uc3RhbnQgdG90YWxDYXJkcyA9IGNhcmRzUGVyU3VpdCAqIHN1aXRzOwoKCXN0cnVjdCBEZWNrIHsKCQl1aW50OFtdIHVzZWRDYXJkczsgLy8gYWx3YXlzIGhhcyB0byBiZSBzb3J0ZWQKCQlhZGRyZXNzIHBsYXllcjsKCQl1aW50MjU2IGdhbWVJRDsKCX0KCglmdW5jdGlvbiBpbml0KERlY2sgc3RvcmFnZSBzZWxmLCB1aW50MjU2IGdhbWVJRCkgIHsKCQlzZWxmLnVzZWRDYXJkcyA9IG5ldyB1aW50OFtdKDApOwoJCXNlbGYucGxheWVyID0gbXNnLnNlbmRlcjsKCQlzZWxmLmdhbWVJRCA9IGdhbWVJRDsKCX0KCglmdW5jdGlvbiBnZXRDYXJkKERlY2sgc3RvcmFnZSBzZWxmLCB1aW50MjU2IGJsb2NrTnVtYmVyKSAgcmV0dXJucyAodWludDgpICB7CgkJdWludCBjYXJkSW5kZXggPSBzZWxmLnVzZWRDYXJkcy5sZW5ndGg7CgkJaWYgKGNhcmRJbmRleCA+PSB0b3RhbENhcmRzKSB0aHJvdzsKCQl1aW50OCByID0gdWludDgoZ2V0UmFuZG9tTnVtYmVyKGJsb2NrTnVtYmVyLCBzZWxmLnBsYXllciwgc2VsZi5nYW1lSUQsIGNhcmRJbmRleCwgdG90YWxDYXJkcyAtIGNhcmRJbmRleCkpOwoKCQlmb3IgKHVpbnQ4IGkgPSAwOyBpIDwgY2FyZEluZGV4OyBpKyspIHsKCQkJaWYgKHNlbGYudXNlZENhcmRzW2ldIDw9IHIpIHIgKz0gMTsKCQl9CgoJCXNlbGYudXNlZENhcmRzLmluc2VydEluUGxhY2Uocik7CgoJCXJldHVybiByOwoJfQoKCWZ1bmN0aW9uIGNhcmREZXNjcmlwdGlvbih1aW50OCBzZWxmKSBjb25zdGFudCByZXR1cm5zIChTdWl0LCB1aW50OCkgewoJCXJldHVybiAoU3VpdChzZWxmIC8gY2FyZHNQZXJTdWl0KSwgY2FyZEZhY2V2YWx1ZShzZWxmKSk7Cgl9CgoJZnVuY3Rpb24gY2FyZEVtb2ppZmllZCh1aW50OCBzZWxmKSBjb25zdGFudCByZXR1cm5zICh1aW50OCwgc3RyaW5nKSB7CgkJc3RyaW5nIG1lbW9yeSBlbW9qaVN1aXQ7CgoJCXZhciAoc3VpdCwgbnVtYmVyKSA9IGNhcmREZXNjcmlwdGlvbihzZWxmKTsKCQlpZiAoc3VpdCA9PSBTdWl0LkNsdWJzKSBlbW9qaVN1aXQgPSAi4pmj77iPIjsKCQllbHNlIGlmIChzdWl0ID09IFN1aXQuRGlhbW9uZHMpIGVtb2ppU3VpdCA9ICLimabvuI8iOwoJCWVsc2UgaWYgKHN1aXQgPT0gU3VpdC5IZWFydHMpIGVtb2ppU3VpdCA9ICLimaXvuI8iOwoJCWVsc2UgaWYgKHN1aXQgPT0gU3VpdC5TcGFkZXMpIGVtb2ppU3VpdCA9ICLimaDvuI8iOwoKCQlyZXR1cm4gKG51bWJlciwgZW1vamlTdWl0KTsKCX0KCglmdW5jdGlvbiBjYXJkRmFjZXZhbHVlKHVpbnQ4IHNlbGYpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KSB7CgkJcmV0dXJuIDEgKyBzZWxmICUgY2FyZHNQZXJTdWl0OwoJfQoKCWZ1bmN0aW9uIGJsYWNramFja1ZhbHVlKHVpbnQ4IHNlbGYpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KSB7CgkJdWludDggY2FyZFZhbHVlID0gY2FyZEZhY2V2YWx1ZShzZWxmKTsKCQlyZXR1cm4gY2FyZFZhbHVlIDwgMTAgPyBjYXJkVmFsdWUgOiAxMDsKCX0KCglmdW5jdGlvbiBnZXRSYW5kb21OdW1iZXIodWludCBiLCBhZGRyZXNzIHBsYXllciwgdWludDI1NiBnYW1lSUQsIHVpbnQgbiwgdWludCBtKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CgkJLy8gVXNlcyBibG9ja2hhc2ggYXMgcmFuZG9tbmVzcyBzb3VyY2UuCgkJLy8gQ3JlZGl0czogaHR0cHM6Ly9naXRodWIuY29tL0J1bmppbi9Sb3VsZXRoL2Jsb2IvbWFzdGVyL1Byb3ZhYmx5X0ZhaXJfTm9fQ2hlYXRpbmcubWQKCQlieXRlczMyIGJsb2NrSGFzaCA9IGJsb2NrLmJsb2NraGFzaChiKTsKCQlpZiAoYmxvY2tIYXNoID09IDB4MCkgdGhyb3c7CgkJcmV0dXJuIHVpbnQodWludDI1NihrZWNjYWsyNTYoYmxvY2tIYXNoLCBwbGF5ZXIsIGdhbWVJRCwgbikpICUgbSk7CgoJfQp9CgoKCmxpYnJhcnkgR2FtZUxpYiB7CiAgdXNpbmcgRGVja0xpYiBmb3IgKjsKCiAgdWludDggY29uc3RhbnQgaG91c2VMaW1pdCA9IDE3OwogIHVpbnQ4IGNvbnN0YW50IHRhcmdldCA9IDIxOwoKICBlbnVtIENvbXBhcmFpc29uUmVzdWx0IHsgRmlyc3QsIFNlY29uZCwgVGllIH0KICBlbnVtIEdhbWVTdGF0ZSB7IEluaXRpYWxDYXJkcywgV2FpdGluZywgSGl0LCBTdGFuZCwgRG91YmxlRG93biwgRmluaXNoZWQgfQogIGVudW0gR2FtZVJlc3VsdCB7IE9uZ29pbmcsIEhvdXNlLCBUaWUsIFBsYXllciwgUGxheWVyTmF0dXJhbCB9CgogIHN0cnVjdCBHYW1lIHsKICAgIGFkZHJlc3MgcGxheWVyOwogICAgdWludDI1NiBiZXQ7CiAgICB1aW50MjU2IHBheW91dDsKICAgIHVpbnQyNTYgZ2FtZUlEOwoKICAgIERlY2tMaWIuRGVjayBkZWNrOwogICAgdWludDhbXSBob3VzZUNhcmRzOwogICAgdWludDhbXSBwbGF5ZXJDYXJkczsKCiAgICB1aW50MjU2IGFjdGlvbkJsb2NrOyAvLyBCbG9jayBvbiB3aGljaCBjb21taXRtZW50IHRvIHBlcmZvcm0gYW4gYWN0aW9uIGhhcHBlbnMuCgogICAgR2FtZVN0YXRlIHN0YXRlOwogICAgR2FtZVJlc3VsdCByZXN1bHQ7CgogICAgYm9vbCBjbG9zZWQ7CiAgfQoKICBmdW5jdGlvbiBpbml0KEdhbWUgc3RvcmFnZSBzZWxmLCB1aW50MjU2IGdhbWVJRCkgewogICAgc2VsZi5wbGF5ZXIgPSBtc2cuc2VuZGVyOwogICAgc2VsZi5iZXQgPSBtc2cudmFsdWU7CiAgICBzZWxmLnBheW91dCA9IDA7CiAgICBzZWxmLmhvdXNlQ2FyZHMgPSBuZXcgdWludDhbXSgwKTsKICAgIHNlbGYucGxheWVyQ2FyZHMgPSBuZXcgdWludDhbXSgwKTsKICAgIHNlbGYuYWN0aW9uQmxvY2sgPSBibG9jay5udW1iZXI7CiAgICBzZWxmLnN0YXRlID0gR2FtZVN0YXRlLkluaXRpYWxDYXJkczsKICAgIHNlbGYucmVzdWx0ID0gR2FtZVJlc3VsdC5PbmdvaW5nOwogICAgc2VsZi5jbG9zZWQgPSBmYWxzZTsKICAgIHNlbGYuZ2FtZUlEID0gZ2FtZUlEOwoKICAgIHNlbGYuZGVjay5pbml0KGdhbWVJRCk7CiAgfQoKICBmdW5jdGlvbiB0aWNrKEdhbWUgc3RvcmFnZSBzZWxmKSByZXR1cm5zIChib29sKSB7CiAgICBpZiAoYmxvY2subnVtYmVyIDw9IHNlbGYuYWN0aW9uQmxvY2spIHJldHVybiBmYWxzZTsgLy8gQ2FuJ3QgdGljayB5ZXQKICAgIGlmIChzZWxmLmFjdGlvbkJsb2NrICsgMjU1IDwgYmxvY2subnVtYmVyKSB7CiAgICAgIGVuZEdhbWUoc2VsZiwgR2FtZVJlc3VsdC5Ib3VzZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgaWYgKCFuZWVkc1RpY2soc2VsZikpIHJldHVybiB0cnVlOyAvLyBub3QgbmVlZGVkLCBldmVyeXRoaW5nIGlzIGZpbmUKICAgIGlmIChzZWxmLnN0YXRlID09IEdhbWVTdGF0ZS5Jbml0aWFsQ2FyZHMpIGRlYWxJbml0aWFsQ2FyZHMoc2VsZik7CiAgICBpZiAoc2VsZi5zdGF0ZSA9PSBHYW1lU3RhdGUuSGl0KSBkZWFsSGl0Q2FyZChzZWxmKTsKICAgIGlmIChzZWxmLnN0YXRlID09IEdhbWVTdGF0ZS5Eb3VibGVEb3duKSB7CiAgICAgIGRlYWxIaXRDYXJkKHNlbGYpOwogICAgICBmb3JjZVN0YW5kKHNlbGYpOwogICAgfQoKICAgIGlmIChzZWxmLnN0YXRlID09IEdhbWVTdGF0ZS5TdGFuZCkgewogICAgICBkZWFsSG91c2VDYXJkcyhzZWxmKTsKICAgICAgY2hlY2tHYW1lUmVzdWx0KHNlbGYpOwogICAgfSBlbHNlIHsKICAgICAgY2hlY2tHYW1lQ29udGludWVzKHNlbGYpOwogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gbmVlZHNUaWNrKEdhbWUgc3RvcmFnZSBzZWxmKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICBpZiAoc2VsZi5zdGF0ZSA9PSBHYW1lU3RhdGUuV2FpdGluZykgcmV0dXJuIGZhbHNlOwogICAgaWYgKHNlbGYuc3RhdGUgPT0gR2FtZVN0YXRlLkZpbmlzaGVkKSByZXR1cm4gZmFsc2U7CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBjaGVja0dhbWVSZXN1bHQoR2FtZSBzdG9yYWdlIHNlbGYpICB7CiAgICB1aW50OCBob3VzZUhhbmQgPSBjb3VudEhhbmQoc2VsZi5ob3VzZUNhcmRzKTsKCiAgICBpZiAoaG91c2VIYW5kID09IHRhcmdldCAmJiBzZWxmLmhvdXNlQ2FyZHMubGVuZ3RoID09IDIpIHJldHVybiBlbmRHYW1lKHNlbGYsIEdhbWVSZXN1bHQuSG91c2UpOyAvLyBIb3VzZSBuYXR1cmFsCgogICAgQ29tcGFyYWlzb25SZXN1bHQgcmVzdWx0ID0gY29tcGFyZUhhbmRzKGhvdXNlSGFuZCwgY291bnRIYW5kKHNlbGYucGxheWVyQ2FyZHMpKTsKICAgIGlmIChyZXN1bHQgPT0gQ29tcGFyYWlzb25SZXN1bHQuRmlyc3QpIHJldHVybiBlbmRHYW1lKHNlbGYsIEdhbWVSZXN1bHQuSG91c2UpOwogICAgaWYgKHJlc3VsdCA9PSBDb21wYXJhaXNvblJlc3VsdC5TZWNvbmQpIHJldHVybiBlbmRHYW1lKHNlbGYsIEdhbWVSZXN1bHQuUGxheWVyKTsKCiAgICBlbmRHYW1lKHNlbGYsIEdhbWVSZXN1bHQuVGllKTsKICB9CgogIGZ1bmN0aW9uIGNoZWNrR2FtZUNvbnRpbnVlcyhHYW1lIHN0b3JhZ2Ugc2VsZikgIHsKICAgIHVpbnQ4IHBsYXllckhhbmQgPSBjb3VudEhhbmQoc2VsZi5wbGF5ZXJDYXJkcyk7CiAgICBpZiAocGxheWVySGFuZCA9PSB0YXJnZXQgJiYgc2VsZi5wbGF5ZXJDYXJkcy5sZW5ndGggPT0gMikgcmV0dXJuIGVuZEdhbWUoc2VsZiwgR2FtZVJlc3VsdC5QbGF5ZXJOYXR1cmFsKTsgLy8gcGxheWVyIG5hdHVyYWwKICAgIGlmIChwbGF5ZXJIYW5kID4gdGFyZ2V0KSByZXR1cm4gZW5kR2FtZShzZWxmLCBHYW1lUmVzdWx0LkhvdXNlKTsgLy8gUGxheWVyIGJ1c3RlZAogICAgaWYgKHBsYXllckhhbmQgPT0gdGFyZ2V0ICYmIHNlbGYuc3RhdGUgPT0gR2FtZVN0YXRlLldhaXRpbmcpIHsKICAgICAgLy8gUGxheWVyIGlzIGZvcmNlZCB0byBzdGFuZCB3aXRoIDIxIChidXQgc2hvdWxkIG5vdCAgYWxyZWFkeSBzdGFuZGluZywgaWUgaW4gZG91YmxlIGRvd24pCiAgICAgIGZvcmNlU3RhbmQoc2VsZik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBmb3JjZVN0YW5kKEdhbWUgc3RvcmFnZSBzZWxmKSB7CiAgICB1aW50MjU2IGN1cnJlbnRBY3Rpb25CbG9jayA9IHNlbGYuYWN0aW9uQmxvY2s7CiAgICBwbGF5ZXJEZWNpc2lvbihzZWxmLCBHYW1lU3RhdGUuU3RhbmQpOwogICAgc2VsZi5hY3Rpb25CbG9jayA9IGN1cnJlbnRBY3Rpb25CbG9jazsKICAgIGlmICghdGljayhzZWxmKSkgdGhyb3c7IC8vIEZvcmNlcyB0aWNrLCBjb21taXRtZW50IHRvIHBsYXkgYWN0dWFsbHkgaGFwcGVuZWQgcGFzdCBibG9jawogIH0KCiAgZnVuY3Rpb24gY2FuRG91YmxlRG93bihHYW1lIHN0b3JhZ2Ugc2VsZikgcmV0dXJucyAoYm9vbCkgewogICAgaWYgKHNlbGYucGxheWVyQ2FyZHMubGVuZ3RoID4gMikgcmV0dXJuIGZhbHNlOwogICAgdWludDggdG90YWxQbGF5ZXIgPSBjb3VudEhhbmQoc2VsZi5wbGF5ZXJDYXJkcyk7CiAgICBpZiAodG90YWxQbGF5ZXIgPCA5IHx8IHRvdGFsUGxheWVyID4gMTEpIHJldHVybiBmYWxzZTsKICAgIGlmIChtc2cudmFsdWUgIT0gc2VsZi5iZXQpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gcGxheWVyRGVjaXNpb24oR2FtZSBzdG9yYWdlIHNlbGYsIEdhbWVTdGF0ZSBkZWNpc2lvbikgIHsKICAgIGlmIChzZWxmLnN0YXRlICE9IEdhbWVTdGF0ZS5XYWl0aW5nKSB0aHJvdzsKICAgIGlmIChkZWNpc2lvbiAhPSBHYW1lU3RhdGUuSGl0ICYmIGRlY2lzaW9uICE9IEdhbWVTdGF0ZS5TdGFuZCAmJiBkZWNpc2lvbiAhPSBHYW1lU3RhdGUuRG91YmxlRG93bikgdGhyb3c7CgogICAgaWYgKGRlY2lzaW9uID09IEdhbWVTdGF0ZS5Eb3VibGVEb3duKXsKICAgICAgaWYgKCFjYW5Eb3VibGVEb3duKHNlbGYpKSB0aHJvdzsKICAgICAgc2VsZi5iZXQgKz0gbXNnLnZhbHVlOwogICAgfQoKICAgIHNlbGYuc3RhdGUgPSBkZWNpc2lvbjsKICAgIHNlbGYuYWN0aW9uQmxvY2sgPSBibG9jay5udW1iZXI7CiAgfQoKICBmdW5jdGlvbiBkZWFsSW5pdGlhbENhcmRzKEdhbWUgc3RvcmFnZSBzZWxmKSBwcml2YXRlIHsKICAgIHNlbGYucGxheWVyQ2FyZHMucHVzaChzZWxmLmRlY2suZ2V0Q2FyZChzZWxmLmFjdGlvbkJsb2NrKSk7CiAgICBzZWxmLmhvdXNlQ2FyZHMucHVzaChzZWxmLmRlY2suZ2V0Q2FyZChzZWxmLmFjdGlvbkJsb2NrKSk7CiAgICBzZWxmLnBsYXllckNhcmRzLnB1c2goc2VsZi5kZWNrLmdldENhcmQoc2VsZi5hY3Rpb25CbG9jaykpOwogICAgc2VsZi5zdGF0ZSA9IEdhbWVTdGF0ZS5XYWl0aW5nOwogIH0KCiAgZnVuY3Rpb24gZGVhbEhpdENhcmQoR2FtZSBzdG9yYWdlIHNlbGYpIHByaXZhdGUgewogICAgc2VsZi5wbGF5ZXJDYXJkcy5wdXNoKHNlbGYuZGVjay5nZXRDYXJkKHNlbGYuYWN0aW9uQmxvY2spKTsKICAgIHNlbGYuc3RhdGUgPSBHYW1lU3RhdGUuV2FpdGluZzsKICB9CgogIGZ1bmN0aW9uIGRlYWxIb3VzZUNhcmRzKEdhbWUgc3RvcmFnZSBzZWxmKSBwcml2YXRlIHsKICAgIHNlbGYuaG91c2VDYXJkcy5wdXNoKHNlbGYuZGVjay5nZXRDYXJkKHNlbGYuYWN0aW9uQmxvY2spKTsKICAgIGlmIChjb3VudEhhbmQoc2VsZi5ob3VzZUNhcmRzKSA8IGhvdXNlTGltaXQpIGRlYWxIb3VzZUNhcmRzKHNlbGYpOwogIH0KCiAgZnVuY3Rpb24gZW5kR2FtZShHYW1lIHN0b3JhZ2Ugc2VsZiwgR2FtZVJlc3VsdCByZXN1bHQpIHsKICAgIHNlbGYucmVzdWx0ID0gcmVzdWx0OwogICAgc2VsZi5zdGF0ZSA9IEdhbWVTdGF0ZS5GaW5pc2hlZDsKICAgIHNlbGYucGF5b3V0ID0gcGF5b3V0Rm9yUmVzdWx0KHNlbGYucmVzdWx0LCBzZWxmLmJldCk7CgogICAgY2xvc2VHYW1lKHNlbGYpOwogIH0KCiAgZnVuY3Rpb24gY2xvc2VHYW1lKEdhbWUgc3RvcmFnZSBzZWxmKSBwcml2YXRlIHsKICAgIGlmIChzZWxmLmNsb3NlZCkgdGhyb3c7IC8vIGNhbm5vdCByZS1jbG9zZQogICAgaWYgKHNlbGYuc3RhdGUgIT0gR2FtZVN0YXRlLkZpbmlzaGVkKSB0aHJvdzsgLy8gbm90IGNsb3NhYmxlCgogICAgc2VsZi5jbG9zZWQgPSB0cnVlOwoKICAgIGlmIChzZWxmLnBheW91dCA+IDApIHsKICAgICAgaWYgKCFzZWxmLnBsYXllci5zZW5kKHNlbGYucGF5b3V0KSkgdGhyb3c7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwYXlvdXRGb3JSZXN1bHQoR2FtZVJlc3VsdCByZXN1bHQsIHVpbnQyNTYgYmV0KSBwcml2YXRlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChyZXN1bHQgPT0gR2FtZVJlc3VsdC5QbGF5ZXJOYXR1cmFsKSByZXR1cm4gYmV0ICogNSAvIDI7IC8vIGJldCArIDEuNXggYmV0CiAgICBpZiAocmVzdWx0ID09IEdhbWVSZXN1bHQuUGxheWVyKSByZXR1cm4gYmV0ICogMjsgLy8gZG91YmxlcyBiZXQKICAgIGlmIChyZXN1bHQgPT0gR2FtZVJlc3VsdC5UaWUpIHJldHVybiBiZXQ7IC8vIHJldHVybnMgYmV0CgogICAgcmV0dXJuIDA7CiAgfQoKICBmdW5jdGlvbiBjb3VudEhhbmQodWludDhbXSBtZW1vcnkgaGFuZCkgIHJldHVybnMgKHVpbnQ4KSB7CiAgICB1aW50OFtdIG1lbW9yeSBwb3NzaWJsZVN1bXMgPSBuZXcgdWludDhbXSgxKTsKCiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBoYW5kLmxlbmd0aDsgaSsrKSB7CiAgICAgIHVpbnQ4IHZhbHVlID0gaGFuZFtpXS5ibGFja2phY2tWYWx1ZSgpOwogICAgICB1aW50IGwgPSBwb3NzaWJsZVN1bXMubGVuZ3RoOwogICAgICBmb3IgKHVpbnQgaiA9IDA7IGogPCBsOyBqKyspIHsKICAgICAgICBwb3NzaWJsZVN1bXNbal0gKz0gdmFsdWU7CiAgICAgICAgaWYgKHZhbHVlID09IDEpIHsgLy8gaXMgQWNlCiAgICAgICAgICBwb3NzaWJsZVN1bXMgPSBhcHBlbmRBcnJheShwb3NzaWJsZVN1bXMsIHBvc3NpYmxlU3Vtc1tqXSArIDEwKTsgLy8gRm9yayBwb3NzaWJsZSBzdW0gd2l0aCAxMSBhcyBhY2UgdmFsdWUuCiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGJlc3RTdW0ocG9zc2libGVTdW1zKTsKICB9CgogIGZ1bmN0aW9uIGJlc3RTdW0odWludDhbXSBwb3NzaWJsZVN1bXMpICByZXR1cm5zICh1aW50OCBiZXN0U3VtKSB7CiAgICBiZXN0U3VtID0gNTA7IC8vIHZlcnkgYmFkIGhhbmQKICAgIGZvciAodWludCBpID0gMDsgaSA8IHBvc3NpYmxlU3Vtcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoY29tcGFyZUhhbmRzKGJlc3RTdW0sIHBvc3NpYmxlU3Vtc1tpXSkgPT0gQ29tcGFyYWlzb25SZXN1bHQuU2Vjb25kKSB7CiAgICAgICAgYmVzdFN1bSA9IHBvc3NpYmxlU3Vtc1tpXTsKICAgICAgfQogICAgfQogICAgcmV0dXJuOwogIH0KCiAgZnVuY3Rpb24gYXBwZW5kQXJyYXkodWludDhbXSBtZW1vcnkgYXJyYXksIHVpbnQ4IG4pICByZXR1cm5zICh1aW50OFtdIG1lbW9yeSkgewogICAgdWludDhbXSBtZW1vcnkgbmV3QXJyYXkgPSBuZXcgdWludDhbXShhcnJheS5sZW5ndGggKyAxKTsKICAgIGZvciAodWludDggaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgewogICAgICBuZXdBcnJheVtpXSA9IGFycmF5W2ldOwogICAgfQogICAgbmV3QXJyYXlbYXJyYXkubGVuZ3RoXSA9IG47CiAgICByZXR1cm4gbmV3QXJyYXk7CiAgfQoKICBmdW5jdGlvbiBjb21wYXJlSGFuZHModWludDggYSwgdWludDggYikgIHJldHVybnMgKENvbXBhcmFpc29uUmVzdWx0KSB7CiAgICBpZiAoYSA8PSB0YXJnZXQgJiYgYiA8PSB0YXJnZXQpIHsKICAgICAgaWYgKGEgPiBiKSByZXR1cm4gQ29tcGFyYWlzb25SZXN1bHQuRmlyc3Q7CiAgICAgIGlmIChhIDwgYikgcmV0dXJuIENvbXBhcmFpc29uUmVzdWx0LlNlY29uZDsKICAgIH0KCiAgICBpZiAoYSA+IHRhcmdldCAmJiBiID4gdGFyZ2V0KSB7CiAgICAgIGlmIChhIDwgYikgcmV0dXJuIENvbXBhcmFpc29uUmVzdWx0LkZpcnN0OwogICAgICBpZiAoYSA+IGIpIHJldHVybiBDb21wYXJhaXNvblJlc3VsdC5TZWNvbmQ7CiAgICB9CgogICAgaWYgKGEgPiB0YXJnZXQpIHJldHVybiBDb21wYXJhaXNvblJlc3VsdC5TZWNvbmQ7CiAgICBpZiAoYiA+IHRhcmdldCkgcmV0dXJuIENvbXBhcmFpc29uUmVzdWx0LkZpcnN0OwoKICAgIHJldHVybiBDb21wYXJhaXNvblJlc3VsdC5UaWU7CiAgfQp9Cgpjb250cmFjdCBCbG9ja2phY2sgewogIAogIGV2ZW50IEdhbWVFbmRlZCh1aW50MjU2IGdhbWVJRCwgYWRkcmVzcyBwbGF5ZXIsIHVpbnQgZ2FtZVJlc3VsdCwgdWludDI1NiB3YWdlciwgdWludDI1NiBwYXlvdXQsIHVpbnQ4IHBsYXllckhhbmQsIHVpbnQ4IGhvdXNlSGFuZCk7CiAgZXZlbnQgR2FtZU5lZWRzVGljayh1aW50MjU2IGdhbWVJRCwgYWRkcmVzcyBwbGF5ZXIsIHVpbnQyNTYgYWN0aW9uQmxvY2spOwoKICB1c2luZyBHYW1lTGliIGZvciBHYW1lTGliLkdhbWU7CgogIEdhbWVMaWIuR2FtZVtdIGdhbWVzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGN1cnJlbnRHYW1lOwoKICAvLyBJbml0aWFsIHNldHRpbmdzCiAgdWludDI1NiBwdWJsaWMgbWluQmV0ID0gMTAgZmlubmV5OwogIHVpbnQyNTYgcHVibGljIG1heEJldCA9IDUwMCBmaW5uZXk7CiAgYm9vbCBwdWJsaWMgYWxsb3dzTmV3R2FtZXMgPSB0cnVlOwogIHVpbnQyNTYgcHVibGljIG1heEJsb2NrQWN0aW9ucyA9IDEwOwoKICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIGJsb2NrQWN0aW9uczsKCiAgLy9tYWluCiAgYWRkcmVzcyBwdWJsaWMgRFg7CiAgYWRkcmVzcyBwdWJsaWMgREVWOwoKICB1aW50MjU2IHB1YmxpYyBpbml0aWFsQmFua3JvbGw7CiAgdWludDI1NiBwdWJsaWMgY3VycmVudEJhbmtyb2xsOwoKICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBpc093bmVyOwoKICBtb2RpZmllciBvbmx5T3duZXIgewogICAgaWYgKCFpc093bmVyW21zZy5zZW5kZXJdKSB0aHJvdzsKICAgIF87CiAgfQoKICBtb2RpZmllciBvbmx5KGFkZHJlc3MgeCkgewogICAgaWYgKG1zZy5zZW5kZXIgIT0geCkgdGhyb3c7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seVBsYXllcih1aW50MjU2IGdhbWVJRCkgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gZ2FtZXNbZ2FtZUlEXS5wbGF5ZXIpIHRocm93OwogICAgXzsKICB9CgogIG1vZGlmaWVyIGJsb2NrQWN0aW9uUHJvdGVjdGVkIHsKICAgIGJsb2NrQWN0aW9uc1tibG9jay5udW1iZXJdICs9IDE7CiAgICBpZiAoYmxvY2tBY3Rpb25zW2Jsb2NrLm51bWJlcl0gPiBtYXhCbG9ja0FjdGlvbnMpIHRocm93OwogICAgXzsKICB9CgogIGZ1bmN0aW9uIEJsb2NramFjayhhZGRyZXNzIF9EWCwgYWRkcmVzcyBfREVWKSB7CiAgICBEWCA9IF9EWDsKICAgIERFViA9IF9ERVY7CiAgICBnYW1lcy5sZW5ndGggKz0gMTsKICAgIGdhbWVzWzBdLmluaXQoMCk7IC8vIEluaXQgZ2FtZSAwIHNvIGluZGljZXMgc3RhcnQgb24gMQogICAgZ2FtZXNbMF0ucGxheWVyID0gdGhpczsKICAgIGlzT3duZXJbRFhdID0gdHJ1ZTsKICAgIGlzT3duZXJbREVWXSA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgIHN0YXJ0R2FtZSgpOwogIH0KCiAgZnVuY3Rpb24gc3RhcnRHYW1lKCkgYmxvY2tBY3Rpb25Qcm90ZWN0ZWQgcGF5YWJsZSB7CiAgICBpZiAoIWFsbG93c05ld0dhbWVzKSB0aHJvdzsKICAgIGlmIChtc2cudmFsdWUgPCBtaW5CZXQpIHRocm93OwogICAgaWYgKG1zZy52YWx1ZSA+IG1heEJldCkgdGhyb3c7CgogICAgLy8gY2hlY2sgaWYgcGxheWVyIGhhcyBnYW1lIG9wZW5lZAogICAgdWludDI1NiBjdXJyZW50R2FtZUlkID0gY3VycmVudEdhbWVbbXNnLnNlbmRlcl07CiAgICBpZiAoZ2FtZXMubGVuZ3RoID4gY3VycmVudEdhbWVJZCkgewogICAgICBHYW1lTGliLkdhbWUgb3BlbmVkR2FtZSA9IGdhbWVzW2N1cnJlbnRHYW1lSWRdOwogICAgICBpZiAob3BlbmVkR2FtZS5wbGF5ZXIgPT0gbXNnLnNlbmRlciAmJiAhb3BlbmVkR2FtZS5jbG9zZWQpIHsgLy8gQ2hlY2sgZm9yIGluZGV4IDAgbWFwcGluZyBwcm9ibGVtcwoJaWYgKCFvcGVuZWRHYW1lLnRpY2soKSkgdGhyb3c7CglpZiAoIW9wZW5lZEdhbWUuY2xvc2VkKSB0aHJvdzsgLy8gY2Fubm90IHN0YXJ0IGdhbWUgd2l0aCBvbi1nb2luZyBnYW1lCglyZWNvcmRFbmRlZEdhbWUoY3VycmVudEdhbWVJZCk7CiAgICAgIH0KICAgIH0KICAgIHVpbnQyNTYgbmV3R2FtZUlEID0gZ2FtZXMubGVuZ3RoOwoKICAgIGdhbWVzLmxlbmd0aCArPSAxOwogICAgZ2FtZXNbbmV3R2FtZUlEXS5pbml0KG5ld0dhbWVJRCk7CiAgICBjdXJyZW50R2FtZVttc2cuc2VuZGVyXSA9IG5ld0dhbWVJRDsKICAgIHRpY2tSZXF1aXJlZExvZyhnYW1lc1tuZXdHYW1lSURdKTsKICB9CgogIGZ1bmN0aW9uIGhpdCh1aW50MjU2IGdhbWVJRCkgb25seVBsYXllcihnYW1lSUQpIGJsb2NrQWN0aW9uUHJvdGVjdGVkIHsKICAgIEdhbWVMaWIuR2FtZSBnYW1lID0gZ2FtZXNbZ2FtZUlEXTsKICAgIGlmICghZ2FtZS50aWNrKCkpIHRocm93OwogICAgZ2FtZS5wbGF5ZXJEZWNpc2lvbihHYW1lTGliLkdhbWVTdGF0ZS5IaXQpOwogICAgdGlja1JlcXVpcmVkTG9nKGdhbWUpOwogIH0KCiAgZnVuY3Rpb24gZG91YmxlRG93bih1aW50MjU2IGdhbWVJRCkgb25seVBsYXllcihnYW1lSUQpIGJsb2NrQWN0aW9uUHJvdGVjdGVkIHBheWFibGUgewogICAgR2FtZUxpYi5HYW1lIGdhbWUgPSBnYW1lc1tnYW1lSURdOwogICAgaWYgKCFnYW1lLnRpY2soKSkgdGhyb3c7CiAgICBnYW1lLnBsYXllckRlY2lzaW9uKEdhbWVMaWIuR2FtZVN0YXRlLkRvdWJsZURvd24pOwogICAgdGlja1JlcXVpcmVkTG9nKGdhbWUpOwogIH0KCiAgZnVuY3Rpb24gc3RhbmQodWludDI1NiBnYW1lSUQpIG9ubHlQbGF5ZXIoZ2FtZUlEKSBibG9ja0FjdGlvblByb3RlY3RlZCB7CiAgICBHYW1lTGliLkdhbWUgZ2FtZSA9IGdhbWVzW2dhbWVJRF07CiAgICBpZiAoIWdhbWUudGljaygpKSB0aHJvdzsKICAgIGdhbWUucGxheWVyRGVjaXNpb24oR2FtZUxpYi5HYW1lU3RhdGUuU3RhbmQpOwogICAgdGlja1JlcXVpcmVkTG9nKGdhbWUpOwogIH0KCiAgZnVuY3Rpb24gZ2FtZVRpY2sodWludDI1NiBnYW1lSUQpIGJsb2NrQWN0aW9uUHJvdGVjdGVkIHsKICAgIEdhbWVMaWIuR2FtZSBvcGVuZWRHYW1lID0gZ2FtZXNbZ2FtZUlEXTsKICAgIGlmIChvcGVuZWRHYW1lLmNsb3NlZCkgdGhyb3c7CiAgICBpZiAoIW9wZW5lZEdhbWUudGljaygpKSB0aHJvdzsKICAgIGlmIChvcGVuZWRHYW1lLmNsb3NlZCkgcmVjb3JkRW5kZWRHYW1lKGdhbWVJRCk7CiAgfQoKICBmdW5jdGlvbiByZWNvcmRFbmRlZEdhbWUodWludCBnYW1lSUQpIHByaXZhdGUgewogICAgR2FtZUxpYi5HYW1lIG9wZW5lZEdhbWUgPSBnYW1lc1tnYW1lSURdOwoKICAgIC8vdnMgcG90ZW50aWFsIG92ZXJmbG93IHdoZW4gY3JvdXBpZXIgaXMgbm90IHRpY2tpbmcgZnJlcXVlbnRseSBlbm91Z2gKICAgIGlmKGN1cnJlbnRCYW5rcm9sbCArIG9wZW5lZEdhbWUuYmV0ID4gb3BlbmVkR2FtZS5wYXlvdXQpewogICAgICBjdXJyZW50QmFua3JvbGwgPSBjdXJyZW50QmFua3JvbGwgKyBvcGVuZWRHYW1lLmJldCAtIG9wZW5lZEdhbWUucGF5b3V0OwogICAgfQoKICAgIEdhbWVFbmRlZCgKCSAgICAgIG9wZW5lZEdhbWUuZ2FtZUlELAoJICAgICAgb3BlbmVkR2FtZS5wbGF5ZXIsCgkgICAgICB1aW50KG9wZW5lZEdhbWUucmVzdWx0KSwKCSAgICAgIG9wZW5lZEdhbWUuYmV0LAoJICAgICAgb3BlbmVkR2FtZS5wYXlvdXQsCgkgICAgICBHYW1lTGliLmNvdW50SGFuZChvcGVuZWRHYW1lLnBsYXllckNhcmRzKSwKCSAgICAgIEdhbWVMaWIuY291bnRIYW5kKG9wZW5lZEdhbWUuaG91c2VDYXJkcykKCSAgICAgICk7CiAgfQoKICBmdW5jdGlvbiB0aWNrUmVxdWlyZWRMb2coR2FtZUxpYi5HYW1lIHN0b3JhZ2UgZ2FtZSkgcHJpdmF0ZSB7CiAgICBHYW1lTmVlZHNUaWNrKGdhbWUuZ2FtZUlELCBnYW1lLnBsYXllciwgZ2FtZS5hY3Rpb25CbG9jayk7CiAgfQoKICAvLyBDb25zdGFudHMKCiAgZnVuY3Rpb24gZ2FtZVN0YXRlKHVpbnQgaSkgY29uc3RhbnQgcmV0dXJucyAodWludDhbXSwgdWludDhbXSwgdWludDgsIHVpbnQ4LCB1aW50MjU2LCB1aW50MjU2LCB1aW50OCwgdWludDgsIGJvb2wsIHVpbnQyNTYpIHsKICAgIEdhbWVMaWIuR2FtZSBnYW1lID0gZ2FtZXNbaV07CgogICAgcmV0dXJuICgKCSAgICBnYW1lLmhvdXNlQ2FyZHMsCgkgICAgZ2FtZS5wbGF5ZXJDYXJkcywKCSAgICBHYW1lTGliLmNvdW50SGFuZChnYW1lLmhvdXNlQ2FyZHMpLAoJICAgIEdhbWVMaWIuY291bnRIYW5kKGdhbWUucGxheWVyQ2FyZHMpLAoJICAgIGdhbWUuYmV0LAoJICAgIGdhbWUucGF5b3V0LAoJICAgIHVpbnQ4KGdhbWUuc3RhdGUpLAoJICAgIHVpbnQ4KGdhbWUucmVzdWx0KSwKCSAgICBnYW1lLmNsb3NlZCwKCSAgICBnYW1lLmFjdGlvbkJsb2NrCgkgICAgKTsKICB9CgoKICBmdW5jdGlvbiBjaGFuZ2VEZXYoYWRkcmVzcyBuZXdEZXYpIG9ubHkoREVWKSB7CiAgICBpc093bmVyW0RFVl0gPSBmYWxzZTsKICAgIERFViA9IG5ld0RldjsKICAgIGlzT3duZXJbREVWXSA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VEWChhZGRyZXNzIG5ld0RYKSBvbmx5KERYKSB7CiAgICBpc093bmVyW0RYXSA9IGZhbHNlOwogICAgRFggPSBuZXdEWDsKICAgIGlzT3duZXJbRFhdID0gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIHNldFNldHRpbmdzKHVpbnQyNTYgX21pbiwgdWludDI1NiBfbWF4LCB1aW50MjU2IF9tYXhCbG9ja0FjdGlvbnMpIG9ubHkoRFgpIHsKICAgIG1pbkJldCA9IF9taW47CiAgICBtYXhCZXQgPSBfbWF4OwogICAgbWF4QmxvY2tBY3Rpb25zID0gX21heEJsb2NrQWN0aW9uczsKICB9CgogIGZ1bmN0aW9uIHJlZ2lzdGVyT3duZXIoYWRkcmVzcyBfbmV3X3dhdGNoZXIpIG9ubHkoRFgpIHsKICAgIGlzT3duZXJbX25ld193YXRjaGVyXSA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiByZW1vdmVPd25lcihhZGRyZXNzIF9vbGRfd2F0Y2hlcikgb25seShEWCkgewogICAgaXNPd25lcltfb2xkX3dhdGNoZXJdID0gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBzdG9wQmxvY2tqYWNrKCkgb25seU93bmVyIHsKICAgIGFsbG93c05ld0dhbWVzID0gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBzdGFydEJsb2NramFjaygpIG9ubHkoRFgpIHsKICAgIGFsbG93c05ld0dhbWVzID0gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGFkZEJhbmtyb2xsKCkgb25seShEWCkgcGF5YWJsZSB7CiAgICBpbml0aWFsQmFua3JvbGwgKz0gbXNnLnZhbHVlOwogICAgY3VycmVudEJhbmtyb2xsICs9IG1zZy52YWx1ZTsKICB9CgogIGZ1bmN0aW9uIG1pZ3JhdGVCbG9ja2phY2soKSBvbmx5KERYKSB7CiAgICBzdG9wQmxvY2tqYWNrKCk7CiAgICBzaGFyZVByb2ZpdHMoKTsKICAgIHN1aWNpZGUoRFgpOwogIH0KCiAgdWludDI1NiBEWF9QUk9GSVRTID0gOTA7CiAgdWludDI1NiBERVZfUFJPRklUUyA9IDEwOwogIHVpbnQyNTYgUFJPRklUU19CQVNFID0gMTAwOwogIAogIGZ1bmN0aW9uIHNoYXJlUHJvZml0cygpIG9ubHlPd25lcnsKICAgIGlmIChjdXJyZW50QmFua3JvbGwgPD0gaW5pdGlhbEJhbmtyb2xsKSByZXR1cm47IC8vIHRoZXJlIGFyZSBubyBwcm9maXRzCiAgICB1aW50MjU2IHByb2ZpdCA9IGN1cnJlbnRCYW5rcm9sbCAtIGluaXRpYWxCYW5rcm9sbDsKICAgIHVpbnQyNTYgbm90U2VudDsKICAgIGlmICghRFguc2VuZChwcm9maXQgKiBEWF9QUk9GSVRTIC8gUFJPRklUU19CQVNFKSkgewogICAgICBub3RTZW50ID0gcHJvZml0ICogRFhfUFJPRklUUyAvIFBST0ZJVFNfQkFTRTsKICAgIH0KICAgIGlmICghREVWLnNlbmQocHJvZml0ICogREVWX1BST0ZJVFMgLyBQUk9GSVRTX0JBU0UpKXsKICAgICAgbm90U2VudCA9IHByb2ZpdCAqIERFVl9QUk9GSVRTIC8gUFJPRklUU19CQVNFOwogICAgfQogICAgY3VycmVudEJhbmtyb2xsIC09IHByb2ZpdCAtIG5vdFNlbnQ7CiAgfQoKCiAgCn0='.
	

]
