Class {
	#name : #SRT36b14bae0989f65f80892b99a55378d3e1a80c81,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT36b14bae0989f65f80892b99a55378d3e1a80c81 >> base64 [
	^ 'bGlicmFyeSBBcnJheUxpYiB7CiAgLy8gSW5zZXJ0cyB0byBrZWVwIGFycmF5IHNvcnRlZCAoYXNzdW1lcyBpbnB1dCBhcnJheSBpcyBzb3J0ZWQpCglmdW5jdGlvbiBpbnNlcnRJblBsYWNlKHVpbnQ4W10gc3RvcmFnZSBzZWxmLCB1aW50OCBuKSB7CgkJdWludDggaW5zZXJ0aW5nSW5kZXggPSAwOwoKCQl3aGlsZSAoc2VsZi5sZW5ndGggPiAwICYmIGluc2VydGluZ0luZGV4IDwgc2VsZi5sZW5ndGggJiYgc2VsZltpbnNlcnRpbmdJbmRleF0gPCBuKSB7CgkJCWluc2VydGluZ0luZGV4ICs9IDE7CgkJfQoKCQlzZWxmLmxlbmd0aCArPSAxOwoJCWZvciAodWludDggaSA9IHVpbnQ4KHNlbGYubGVuZ3RoKSAtIDE7IGkgPiBpbnNlcnRpbmdJbmRleDsgaS0tKSB7CgkJCXNlbGZbaV0gPSBzZWxmW2kgLSAxXTsKCQl9CgoJCXNlbGZbaW5zZXJ0aW5nSW5kZXhdID0gbjsKCX0KfQoKbGlicmFyeSBEZWNrTGliIHsKCXVzaW5nIEFycmF5TGliIGZvciB1aW50OFtdOwoKCWVudW0gU3VpdCB7IFNwYWRlcywgSGVhcnRzLCBDbHVicywgRGlhbW9uZHMgfQoJdWludDggY29uc3RhbnQgY2FyZHNQZXJTdWl0ID0gMTM7Cgl1aW50OCBjb25zdGFudCBzdWl0cyA9IDQ7Cgl1aW50OCBjb25zdGFudCB0b3RhbENhcmRzID0gY2FyZHNQZXJTdWl0ICogc3VpdHM7CgoJc3RydWN0IERlY2sgewoJCXVpbnQ4W10gdXNlZENhcmRzOyAvLyBhbHdheXMgaGFzIHRvIGJlIHNvcnRlZAoJCWFkZHJlc3MgcGxheWVyOwoJCXVpbnQyNTYgZ2FtZUlEOwoJfQoKCWZ1bmN0aW9uIGluaXQoRGVjayBzdG9yYWdlIHNlbGYsIHVpbnQyNTYgZ2FtZUlEKSAgewoJCXNlbGYudXNlZENhcmRzID0gbmV3IHVpbnQ4W10oMCk7CgkJc2VsZi5wbGF5ZXIgPSBtc2cuc2VuZGVyOwoJCXNlbGYuZ2FtZUlEID0gZ2FtZUlEOwoJfQoKCWZ1bmN0aW9uIGdldENhcmQoRGVjayBzdG9yYWdlIHNlbGYsIHVpbnQyNTYgYmxvY2tOdW1iZXIpICByZXR1cm5zICh1aW50OCkgIHsKCQl1aW50IGNhcmRJbmRleCA9IHNlbGYudXNlZENhcmRzLmxlbmd0aDsKCQlpZiAoY2FyZEluZGV4ID49IHRvdGFsQ2FyZHMpIHRocm93OwoJCXVpbnQ4IHIgPSB1aW50OChnZXRSYW5kb21OdW1iZXIoYmxvY2tOdW1iZXIsIHNlbGYucGxheWVyLCBzZWxmLmdhbWVJRCwgY2FyZEluZGV4LCB0b3RhbENhcmRzIC0gY2FyZEluZGV4KSk7CgoJCWZvciAodWludDggaSA9IDA7IGkgPCBjYXJkSW5kZXg7IGkrKykgewoJCQlpZiAoc2VsZi51c2VkQ2FyZHNbaV0gPD0gcikgciArPSAxOwoJCX0KCgkJc2VsZi51c2VkQ2FyZHMuaW5zZXJ0SW5QbGFjZShyKTsKCgkJcmV0dXJuIHI7Cgl9CgoJZnVuY3Rpb24gY2FyZERlc2NyaXB0aW9uKHVpbnQ4IHNlbGYpIGNvbnN0YW50IHJldHVybnMgKFN1aXQsIHVpbnQ4KSB7CgkJcmV0dXJuIChTdWl0KHNlbGYgLyBjYXJkc1BlclN1aXQpLCBjYXJkRmFjZXZhbHVlKHNlbGYpKTsKCX0KCglmdW5jdGlvbiBjYXJkRW1vamlmaWVkKHVpbnQ4IHNlbGYpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4LCBzdHJpbmcpIHsKCQlzdHJpbmcgbWVtb3J5IGVtb2ppU3VpdDsKCgkJdmFyIChzdWl0LCBudW1iZXIpID0gY2FyZERlc2NyaXB0aW9uKHNlbGYpOwoJCWlmIChzdWl0ID09IFN1aXQuQ2x1YnMpIGVtb2ppU3VpdCA9ICLimaPvuI8iOwoJCWVsc2UgaWYgKHN1aXQgPT0gU3VpdC5EaWFtb25kcykgZW1vamlTdWl0ID0gIuKZpu+4jyI7CgkJZWxzZSBpZiAoc3VpdCA9PSBTdWl0LkhlYXJ0cykgZW1vamlTdWl0ID0gIuKZpe+4jyI7CgkJZWxzZSBpZiAoc3VpdCA9PSBTdWl0LlNwYWRlcykgZW1vamlTdWl0ID0gIuKZoO+4jyI7CgoJCXJldHVybiAobnVtYmVyLCBlbW9qaVN1aXQpOwoJfQoKCWZ1bmN0aW9uIGNhcmRGYWNldmFsdWUodWludDggc2VsZikgY29uc3RhbnQgcmV0dXJucyAodWludDgpIHsKCQlyZXR1cm4gMSArIHNlbGYgJSBjYXJkc1BlclN1aXQ7Cgl9CgoJZnVuY3Rpb24gYmxhY2tqYWNrVmFsdWUodWludDggc2VsZikgY29uc3RhbnQgcmV0dXJucyAodWludDgpIHsKCQl1aW50OCBjYXJkVmFsdWUgPSBjYXJkRmFjZXZhbHVlKHNlbGYpOwoJCXJldHVybiBjYXJkVmFsdWUgPCAxMCA/IGNhcmRWYWx1ZSA6IDEwOwoJfQoKCWZ1bmN0aW9uIGdldFJhbmRvbU51bWJlcih1aW50IGIsIGFkZHJlc3MgcGxheWVyLCB1aW50MjU2IGdhbWVJRCwgdWludCBuLCB1aW50IG0pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKCQkvLyBVc2VzIGJsb2NraGFzaCBhcyByYW5kb21uZXNzIHNvdXJjZS4KCQkvLyBDcmVkaXRzOiBodHRwczovL2dpdGh1Yi5jb20vQnVuamluL1JvdWxldGgvYmxvYi9tYXN0ZXIvUHJvdmFibHlfRmFpcl9Ob19DaGVhdGluZy5tZAoJCWJ5dGVzMzIgYmxvY2tIYXNoID0gYmxvY2suYmxvY2toYXNoKGIpOwoJCWlmIChibG9ja0hhc2ggPT0gMHgwKSB0aHJvdzsKCQlyZXR1cm4gdWludCh1aW50MjU2KGtlY2NhazI1NihibG9ja0hhc2gsIHBsYXllciwgZ2FtZUlELCBuKSkgJSBtKTsKCgl9Cn0KCmNvbnRyYWN0IEFic3RyYWN0QmxvY2tqYWNrTG9ncyB7CiAgZXZlbnQgR2FtZUVuZGVkKHVpbnQyNTYgZ2FtZUlELCBhZGRyZXNzIHBsYXllciwgdWludCBnYW1lUmVzdWx0LCB1aW50MjU2IHBheW91dCwgdWludDggcGxheWVySGFuZCwgdWludDggaG91c2VIYW5kKTsKICBldmVudCBHYW1lTmVlZHNUaWNrKHVpbnQyNTYgZ2FtZUlELCBhZGRyZXNzIHBsYXllciwgdWludDI1NiBhY3Rpb25CbG9jayk7CgogIGZ1bmN0aW9uIHJlY29yZExvZyh1aW50MjU2IGdhbWVJRCwgYWRkcmVzcyBwbGF5ZXIsIHVpbnQgZ2FtZVJlc3VsdCwgdWludDI1NiBwYXlvdXQsIHVpbnQ4IHBsYXllckhhbmQsIHVpbnQ4IGhvdXNlSGFuZCk7CiAgZnVuY3Rpb24gdGlja1JlcXVpcmVkTG9nKHVpbnQyNTYgZ2FtZUlELCBhZGRyZXNzIHBsYXllciwgdWludDI1NiBhY3Rpb25CbG9jayk7Cn0KCmxpYnJhcnkgR2FtZUxpYiB7CiAgdXNpbmcgRGVja0xpYiBmb3IgKjsKCiAgdWludDggY29uc3RhbnQgaG91c2VMaW1pdCA9IDE3OwogIHVpbnQ4IGNvbnN0YW50IHRhcmdldCA9IDIxOwoKICBlbnVtIENvbXBhcmFpc29uUmVzdWx0IHsgRmlyc3QsIFNlY29uZCwgVGllIH0KICBlbnVtIEdhbWVTdGF0ZSB7IEluaXRpYWxDYXJkcywgV2FpdGluZywgSGl0LCBTdGFuZCwgRG91YmxlRG93biwgRmluaXNoZWQgfQogIGVudW0gR2FtZVJlc3VsdCB7IE9uZ29pbmcsIEhvdXNlLCBUaWUsIFBsYXllciwgUGxheWVyTmF0dXJhbCB9CgogIHN0cnVjdCBHYW1lIHsKICAgIGFkZHJlc3MgcGxheWVyOwogICAgdWludDI1NiBiZXQ7CiAgICB1aW50MjU2IHBheW91dDsKICAgIHVpbnQyNTYgZ2FtZUlEOwoKICAgIERlY2tMaWIuRGVjayBkZWNrOwogICAgdWludDhbXSBob3VzZUNhcmRzOwogICAgdWludDhbXSBwbGF5ZXJDYXJkczsKCiAgICB1aW50MjU2IGFjdGlvbkJsb2NrOyAvLyBCbG9jayBvbiB3aGljaCBjb21taXRtZW50IHRvIHBlcmZvcm0gYW4gYWN0aW9uIGhhcHBlbnMuCgogICAgR2FtZVN0YXRlIHN0YXRlOwogICAgR2FtZVJlc3VsdCByZXN1bHQ7CgogICAgYm9vbCBjbG9zZWQ7CiAgfQoKICBmdW5jdGlvbiBpbml0KEdhbWUgc3RvcmFnZSBzZWxmLCB1aW50MjU2IGdhbWVJRCkgewogICAgc2VsZi5wbGF5ZXIgPSBtc2cuc2VuZGVyOwogICAgc2VsZi5iZXQgPSBtc2cudmFsdWU7CiAgICBzZWxmLnBheW91dCA9IDA7CiAgICBzZWxmLmhvdXNlQ2FyZHMgPSBuZXcgdWludDhbXSgwKTsKICAgIHNlbGYucGxheWVyQ2FyZHMgPSBuZXcgdWludDhbXSgwKTsKICAgIHNlbGYuYWN0aW9uQmxvY2sgPSBibG9jay5udW1iZXI7CiAgICBzZWxmLnN0YXRlID0gR2FtZVN0YXRlLkluaXRpYWxDYXJkczsKICAgIHNlbGYucmVzdWx0ID0gR2FtZVJlc3VsdC5PbmdvaW5nOwogICAgc2VsZi5jbG9zZWQgPSBmYWxzZTsKICAgIHNlbGYuZ2FtZUlEID0gZ2FtZUlEOwoKICAgIHNlbGYuZGVjay5pbml0KGdhbWVJRCk7CiAgfQoKICBmdW5jdGlvbiB0aWNrKEdhbWUgc3RvcmFnZSBzZWxmKSByZXR1cm5zIChib29sKSB7CiAgICBpZiAoYmxvY2subnVtYmVyIDw9IHNlbGYuYWN0aW9uQmxvY2spIHJldHVybiBmYWxzZTsgLy8gQ2FuJ3QgdGljayB5ZXQKICAgIGlmIChzZWxmLmFjdGlvbkJsb2NrICsgMjU1IDwgYmxvY2subnVtYmVyKSB7CiAgICAgIGVuZEdhbWUoc2VsZiwgR2FtZVJlc3VsdC5Ib3VzZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgaWYgKCFuZWVkc1RpY2soc2VsZikpIHJldHVybiB0cnVlOyAvLyBub3QgbmVlZGVkLCBldmVyeXRoaW5nIGlzIGZpbmUKCiAgICBpZiAoc2VsZi5zdGF0ZSA9PSBHYW1lU3RhdGUuSW5pdGlhbENhcmRzKSBkZWFsSW5pdGlhbENhcmRzKHNlbGYpOwogICAgaWYgKHNlbGYuc3RhdGUgPT0gR2FtZVN0YXRlLkhpdCkgZGVhbEhpdENhcmQoc2VsZik7CiAgICBpZiAoc2VsZi5zdGF0ZSA9PSBHYW1lU3RhdGUuRG91YmxlRG93bikgewogICAgICBpZiAoIWNhbkRvdWJsZURvd24oc2VsZikpIHRocm93OwogICAgICBzZWxmLmJldCArPSBtc2cudmFsdWU7CiAgICAgIGRlYWxIaXRDYXJkKHNlbGYpOwogICAgICBmb3JjZVN0YW5kKHNlbGYpOwogICAgfQoKICAgIGlmIChzZWxmLnN0YXRlID09IEdhbWVTdGF0ZS5TdGFuZCkgewogICAgICBkZWFsSG91c2VDYXJkcyhzZWxmKTsKICAgICAgY2hlY2tHYW1lUmVzdWx0KHNlbGYpOwogICAgfSBlbHNlIHsKICAgICAgY2hlY2tHYW1lQ29udGludWVzKHNlbGYpOwogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gbmVlZHNUaWNrKEdhbWUgc3RvcmFnZSBzZWxmKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICBpZiAoc2VsZi5zdGF0ZSA9PSBHYW1lU3RhdGUuV2FpdGluZykgcmV0dXJuIGZhbHNlOwogICAgaWYgKHNlbGYuc3RhdGUgPT0gR2FtZVN0YXRlLkZpbmlzaGVkKSByZXR1cm4gZmFsc2U7CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBjaGVja0dhbWVSZXN1bHQoR2FtZSBzdG9yYWdlIHNlbGYpICB7CiAgICB1aW50OCBob3VzZUhhbmQgPSBjb3VudEhhbmQoc2VsZi5ob3VzZUNhcmRzKTsKCiAgICBpZiAoaG91c2VIYW5kID09IHRhcmdldCAmJiBzZWxmLmhvdXNlQ2FyZHMubGVuZ3RoID09IDIpIHJldHVybiBlbmRHYW1lKHNlbGYsIEdhbWVSZXN1bHQuSG91c2UpOyAvLyBIb3VzZSBuYXR1cmFsCgogICAgQ29tcGFyYWlzb25SZXN1bHQgcmVzdWx0ID0gY29tcGFyZUhhbmRzKGhvdXNlSGFuZCwgY291bnRIYW5kKHNlbGYucGxheWVyQ2FyZHMpKTsKICAgIGlmIChyZXN1bHQgPT0gQ29tcGFyYWlzb25SZXN1bHQuRmlyc3QpIHJldHVybiBlbmRHYW1lKHNlbGYsIEdhbWVSZXN1bHQuSG91c2UpOwogICAgaWYgKHJlc3VsdCA9PSBDb21wYXJhaXNvblJlc3VsdC5TZWNvbmQpIHJldHVybiBlbmRHYW1lKHNlbGYsIEdhbWVSZXN1bHQuUGxheWVyKTsKCiAgICBlbmRHYW1lKHNlbGYsIEdhbWVSZXN1bHQuVGllKTsKICB9CgogIGZ1bmN0aW9uIGNoZWNrR2FtZUNvbnRpbnVlcyhHYW1lIHN0b3JhZ2Ugc2VsZikgIHsKICAgIHVpbnQ4IHBsYXllckhhbmQgPSBjb3VudEhhbmQoc2VsZi5wbGF5ZXJDYXJkcyk7CiAgICBpZiAocGxheWVySGFuZCA9PSB0YXJnZXQgJiYgc2VsZi5wbGF5ZXJDYXJkcy5sZW5ndGggPT0gMikgcmV0dXJuIGVuZEdhbWUoc2VsZiwgR2FtZVJlc3VsdC5QbGF5ZXJOYXR1cmFsKTsgLy8gcGxheWVyIG5hdHVyYWwKICAgIGlmIChwbGF5ZXJIYW5kID4gdGFyZ2V0KSByZXR1cm4gZW5kR2FtZShzZWxmLCBHYW1lUmVzdWx0LkhvdXNlKTsgLy8gUGxheWVyIGJ1c3RlZAogICAgaWYgKHBsYXllckhhbmQgPT0gdGFyZ2V0KSB7CiAgICAgIC8vIFBsYXllciBpcyBmb3JjZWQgdG8gc3RhbmQgd2l0aCAyMQogICAgICBmb3JjZVN0YW5kKHNlbGYpOwogICAgICBpZiAoIXRpY2soc2VsZikpIHRocm93OyAvLyBGb3JjZXMgdGljaywgY29tbWl0bWVudCB0byBwbGF5IGFjdHVhbGx5IGhhcHBlbmVkIHBhc3QgYmxvY2sKICAgIH0KICB9CgogIGZ1bmN0aW9uIGZvcmNlU3RhbmQoR2FtZSBzdG9yYWdlIHNlbGYpIHsKICAgIHVpbnQyNTYgY3VycmVudEFjdGlvbkJsb2NrID0gc2VsZi5hY3Rpb25CbG9jazsKICAgIHBsYXllckRlY2lzaW9uKHNlbGYsIEdhbWVTdGF0ZS5TdGFuZCk7CiAgICBzZWxmLmFjdGlvbkJsb2NrID0gY3VycmVudEFjdGlvbkJsb2NrOwogIH0KCiAgZnVuY3Rpb24gY2FuRG91YmxlRG93bihHYW1lIHN0b3JhZ2Ugc2VsZikgcmV0dXJucyAoYm9vbCkgewogICAgaWYgKHNlbGYucGxheWVyQ2FyZHMubGVuZ3RoID4gMikgcmV0dXJuIGZhbHNlOwogICAgdWludDggdG90YWxQbGF5ZXIgPSBjb3VudEhhbmQoc2VsZi5wbGF5ZXJDYXJkcyk7CiAgICBpZiAodG90YWxQbGF5ZXIgPCA5IHx8IHRvdGFsUGxheWVyID4gMTEpIHJldHVybiBmYWxzZTsKICAgIGlmIChtc2cudmFsdWUgIT0gc2VsZi5iZXQpIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIHBsYXllckRlY2lzaW9uKEdhbWUgc3RvcmFnZSBzZWxmLCBHYW1lU3RhdGUgZGVjaXNpb24pICB7CiAgICBpZiAoc2VsZi5zdGF0ZSAhPSBHYW1lU3RhdGUuV2FpdGluZykgdGhyb3c7CiAgICBpZiAoZGVjaXNpb24gIT0gR2FtZVN0YXRlLkhpdCAmJiBkZWNpc2lvbiAhPSBHYW1lU3RhdGUuU3RhbmQpIHRocm93OwoKICAgIHNlbGYuc3RhdGUgPSBkZWNpc2lvbjsKICAgIHNlbGYuYWN0aW9uQmxvY2sgPSBibG9jay5udW1iZXI7CiAgfQoKICBmdW5jdGlvbiBkZWFsSW5pdGlhbENhcmRzKEdhbWUgc3RvcmFnZSBzZWxmKSBwcml2YXRlIHsKICAgIHNlbGYucGxheWVyQ2FyZHMucHVzaChzZWxmLmRlY2suZ2V0Q2FyZChzZWxmLmFjdGlvbkJsb2NrKSk7CiAgICBzZWxmLmhvdXNlQ2FyZHMucHVzaChzZWxmLmRlY2suZ2V0Q2FyZChzZWxmLmFjdGlvbkJsb2NrKSk7CiAgICBzZWxmLnBsYXllckNhcmRzLnB1c2goc2VsZi5kZWNrLmdldENhcmQoc2VsZi5hY3Rpb25CbG9jaykpOwoKICAgIHNlbGYuc3RhdGUgPSBHYW1lU3RhdGUuV2FpdGluZzsKICB9CgogIGZ1bmN0aW9uIGRlYWxIaXRDYXJkKEdhbWUgc3RvcmFnZSBzZWxmKSBwcml2YXRlIHsKICAgIHNlbGYucGxheWVyQ2FyZHMucHVzaChzZWxmLmRlY2suZ2V0Q2FyZChzZWxmLmFjdGlvbkJsb2NrKSk7CgogICAgc2VsZi5zdGF0ZSA9IEdhbWVTdGF0ZS5XYWl0aW5nOwogIH0KCiAgZnVuY3Rpb24gZGVhbEhvdXNlQ2FyZHMoR2FtZSBzdG9yYWdlIHNlbGYpIHByaXZhdGUgewogICAgc2VsZi5ob3VzZUNhcmRzLnB1c2goc2VsZi5kZWNrLmdldENhcmQoc2VsZi5hY3Rpb25CbG9jaykpOwoKICAgIGlmIChjb3VudEhhbmQoc2VsZi5ob3VzZUNhcmRzKSA8IGhvdXNlTGltaXQpIGRlYWxIb3VzZUNhcmRzKHNlbGYpOwogIH0KCiAgZnVuY3Rpb24gZW5kR2FtZShHYW1lIHN0b3JhZ2Ugc2VsZiwgR2FtZVJlc3VsdCByZXN1bHQpIHsKICAgIHNlbGYucmVzdWx0ID0gcmVzdWx0OwogICAgc2VsZi5zdGF0ZSA9IEdhbWVTdGF0ZS5GaW5pc2hlZDsKICAgIHNlbGYucGF5b3V0ID0gcGF5b3V0Rm9yUmVzdWx0KHNlbGYucmVzdWx0LCBzZWxmLmJldCk7CgogICAgY2xvc2VHYW1lKHNlbGYpOwogIH0KCiAgZnVuY3Rpb24gY2xvc2VHYW1lKEdhbWUgc3RvcmFnZSBzZWxmKSBwcml2YXRlIHsKICAgIGlmIChzZWxmLmNsb3NlZCkgdGhyb3c7IC8vIGNhbm5vdCByZS1jbG9zZQogICAgaWYgKHNlbGYuc3RhdGUgIT0gR2FtZVN0YXRlLkZpbmlzaGVkKSB0aHJvdzsgLy8gbm90IGNsb3NhYmxlCgogICAgc2VsZi5jbG9zZWQgPSB0cnVlOwoKICAgIGlmIChzZWxmLnBheW91dCA+IDApIHsKICAgICAgaWYgKCFzZWxmLnBsYXllci5zZW5kKHNlbGYucGF5b3V0KSkgdGhyb3c7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwYXlvdXRGb3JSZXN1bHQoR2FtZVJlc3VsdCByZXN1bHQsIHVpbnQyNTYgYmV0KSBwcml2YXRlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChyZXN1bHQgPT0gR2FtZVJlc3VsdC5QbGF5ZXJOYXR1cmFsKSByZXR1cm4gYmV0ICogNSAvIDI7IC8vIGJldCArIDEuNXggYmV0CiAgICBpZiAocmVzdWx0ID09IEdhbWVSZXN1bHQuUGxheWVyKSByZXR1cm4gYmV0ICogMjsgLy8gZG91YmxlcyBiZXQKICAgIGlmIChyZXN1bHQgPT0gR2FtZVJlc3VsdC5UaWUpIHJldHVybiBiZXQ7IC8vIHJldHVybnMgYmV0CgogICAgcmV0dXJuIDA7CiAgfQoKICBmdW5jdGlvbiBjb3VudEhhbmQodWludDhbXSBtZW1vcnkgaGFuZCkgIHJldHVybnMgKHVpbnQ4KSB7CiAgICB1aW50OFtdIG1lbW9yeSBwb3NzaWJsZVN1bXMgPSBuZXcgdWludDhbXSgxKTsKCiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBoYW5kLmxlbmd0aDsgaSsrKSB7CiAgICAgIHVpbnQ4IHZhbHVlID0gaGFuZFtpXS5ibGFja2phY2tWYWx1ZSgpOwogICAgICB1aW50IGwgPSBwb3NzaWJsZVN1bXMubGVuZ3RoOwogICAgICBmb3IgKHVpbnQgaiA9IDA7IGogPCBsOyBqKyspIHsKICAgICAgICBwb3NzaWJsZVN1bXNbal0gKz0gdmFsdWU7CiAgICAgICAgaWYgKHZhbHVlID09IDEpIHsgLy8gaXMgQWNlCiAgICAgICAgICBwb3NzaWJsZVN1bXMgPSBhcHBlbmRBcnJheShwb3NzaWJsZVN1bXMsIHBvc3NpYmxlU3Vtc1tqXSArIDEwKTsgLy8gRm9yayBwb3NzaWJsZSBzdW0gd2l0aCAxMSBhcyBhY2UgdmFsdWUuCiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGJlc3RTdW0ocG9zc2libGVTdW1zKTsKICB9CgogIGZ1bmN0aW9uIGJlc3RTdW0odWludDhbXSBwb3NzaWJsZVN1bXMpICByZXR1cm5zICh1aW50OCBiZXN0U3VtKSB7CiAgICBiZXN0U3VtID0gNTA7IC8vIHZlcnkgYmFkIGhhbmQKICAgIGZvciAodWludCBpID0gMDsgaSA8IHBvc3NpYmxlU3Vtcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoY29tcGFyZUhhbmRzKGJlc3RTdW0sIHBvc3NpYmxlU3Vtc1tpXSkgPT0gQ29tcGFyYWlzb25SZXN1bHQuU2Vjb25kKSB7CiAgICAgICAgYmVzdFN1bSA9IHBvc3NpYmxlU3Vtc1tpXTsKICAgICAgfQogICAgfQogICAgcmV0dXJuOwogIH0KCiAgZnVuY3Rpb24gYXBwZW5kQXJyYXkodWludDhbXSBtZW1vcnkgYXJyYXksIHVpbnQ4IG4pICByZXR1cm5zICh1aW50OFtdIG1lbW9yeSkgewogICAgdWludDhbXSBtZW1vcnkgbmV3QXJyYXkgPSBuZXcgdWludDhbXShhcnJheS5sZW5ndGggKyAxKTsKICAgIGZvciAodWludDggaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgewogICAgICBuZXdBcnJheVtpXSA9IGFycmF5W2ldOwogICAgfQogICAgbmV3QXJyYXlbYXJyYXkubGVuZ3RoXSA9IG47CiAgICByZXR1cm4gbmV3QXJyYXk7CiAgfQoKICBmdW5jdGlvbiBjb21wYXJlSGFuZHModWludDggYSwgdWludDggYikgIHJldHVybnMgKENvbXBhcmFpc29uUmVzdWx0KSB7CiAgICBpZiAoYSA8PSB0YXJnZXQgJiYgYiA8PSB0YXJnZXQpIHsKICAgICAgaWYgKGEgPiBiKSByZXR1cm4gQ29tcGFyYWlzb25SZXN1bHQuRmlyc3Q7CiAgICAgIGlmIChhIDwgYikgcmV0dXJuIENvbXBhcmFpc29uUmVzdWx0LlNlY29uZDsKICAgIH0KCiAgICBpZiAoYSA+IHRhcmdldCAmJiBiID4gdGFyZ2V0KSB7CiAgICAgIGlmIChhIDwgYikgcmV0dXJuIENvbXBhcmFpc29uUmVzdWx0LkZpcnN0OwogICAgICBpZiAoYSA+IGIpIHJldHVybiBDb21wYXJhaXNvblJlc3VsdC5TZWNvbmQ7CiAgICB9CgogICAgaWYgKGEgPiB0YXJnZXQpIHJldHVybiBDb21wYXJhaXNvblJlc3VsdC5TZWNvbmQ7CiAgICBpZiAoYiA+IHRhcmdldCkgcmV0dXJuIENvbXBhcmFpc29uUmVzdWx0LkZpcnN0OwoKICAgIHJldHVybiBDb21wYXJhaXNvblJlc3VsdC5UaWU7CiAgfQp9Cgpjb250cmFjdCBCbG9ja2phY2sgewogIEFic3RyYWN0QmxvY2tqYWNrTG9ncyBibG9ja2phY2tsb2dzOwoKICB1c2luZyBHYW1lTGliIGZvciBHYW1lTGliLkdhbWU7CgogIEdhbWVMaWIuR2FtZVtdIGdhbWVzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGN1cnJlbnRHYW1lOwoKICBib29sIGNvbnRyYWN0Q2xlYXJlZDsKICAvLyBJbml0aWFsIHNldHRpbmdzCiAgdWludDI1NiBwdWJsaWMgbWluQmV0ID0gNTAgZmlubmV5OwogIHVpbnQyNTYgcHVibGljIG1heEJldCA9IDUwMCBmaW5uZXk7CiAgYm9vbCBwdWJsaWMgYWxsb3dzTmV3R2FtZXMgPSBmYWxzZTsKICB1aW50MjU2IHB1YmxpYyBtYXhCbG9ja0FjdGlvbnMgPSAxMDsKCiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBibG9ja0FjdGlvbnM7CgogIC8vIEFkbWluCgogIC8va292YW4KICAvLyAgYWRkcmVzcyBwdWJsaWMgRFggPSAgICAgICAweDAwMDY0MjZhMTA1N2NiYzYwNzYyODAyRkZiNUZCZGM1NUQwMDhmQWY7CiAgLy8gIGFkZHJlc3MgcHVibGljIERFViA9ICAgICAgMHgwMDMxRURiNDg0NkJBYjJFREVkZDdmNzI0RTU4QzUwNzYyYTQ1Q2IyOwoKICAvL21haW4KICBhZGRyZXNzIHB1YmxpYyBEWCA9IDB4Mjk2QWUxZDJEOUE4NzAxZTExM0VjZEY2Y0U5ODZhNGE3RDBBNmRDNTsKICBhZGRyZXNzIHB1YmxpYyBERVYgPSAweEJDNDM0M0IxMUI3Y2ZkZDZkRDYzNWY2MTAzOWI4YTY2YUY2RTczQmI7CgoKCiAgYWRkcmVzcyBwdWJsaWMgQURNSU5fQ09OVFJBQ1Q7CgogIHVpbnQyNTYgcHVibGljIEJBTktST0xMX0xPQ0tfUEVSSU9EID0gMzAgZGF5czsKCiAgdWludDI1NiBwdWJsaWMgYmFua3JvbGxMb2NrZWRVbnRpbDsKICB1aW50MjU2IHB1YmxpYyBwcm9maXRzTG9ja2VkVW50aWw7CiAgdWludDI1NiBwdWJsaWMgaW5pdGlhbEJhbmtyb2xsOwogIHVpbnQyNTYgcHVibGljIGN1cnJlbnRCYW5rcm9sbDsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgaXNPd25lcjsKCiAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgIGlmICghaXNPd25lclttc2cuc2VuZGVyXSkgdGhyb3c7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seShhZGRyZXNzIHgpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IHgpIHRocm93OwogICAgXzsKICB9CgogIG1vZGlmaWVyIG9ubHlQbGF5ZXIodWludDI1NiBnYW1lSUQpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IGdhbWVzW2dhbWVJRF0ucGxheWVyKSB0aHJvdzsKICAgIF87CiAgfQoKICBtb2RpZmllciBibG9ja0FjdGlvblByb3RlY3RlZCB7CiAgICBibG9ja0FjdGlvbnNbYmxvY2subnVtYmVyXSArPSAxOwogICAgaWYgKGJsb2NrQWN0aW9uc1tibG9jay5udW1iZXJdID4gbWF4QmxvY2tBY3Rpb25zKSB0aHJvdzsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBCbG9ja2phY2soYWRkcmVzcyBfYWRtaW5fY29udHJhY3QsIGFkZHJlc3MgX2xvZ3NfY29udHJhY3QpIHsgLy8gb25seShERVYpIHsKICAgIEFETUlOX0NPTlRSQUNUID0gX2FkbWluX2NvbnRyYWN0OwogICAgYmxvY2tqYWNrbG9ncyA9IEFic3RyYWN0QmxvY2tqYWNrTG9ncyhfbG9nc19jb250cmFjdCk7CiAgICBnYW1lcy5sZW5ndGggKz0gMTsKICAgIGdhbWVzWzBdLmluaXQoMCk7IC8vIEluaXQgZ2FtZSAwIHNvIGluZGljZXMgc3RhcnQgb24gMQogICAgZ2FtZXNbMF0ucGxheWVyID0gdGhpczsKICAgIHNldHVwVHJ1c3RlZEFjY291bnRzKCk7CiAgfQoKICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgIHN0YXJ0R2FtZSgpOwogIH0KCiAgZnVuY3Rpb24gc3RhcnRHYW1lKCkgYmxvY2tBY3Rpb25Qcm90ZWN0ZWQgcGF5YWJsZSB7CiAgICBpZiAoIWFsbG93c05ld0dhbWVzKSB0aHJvdzsKICAgIGlmIChtc2cudmFsdWUgPCBtaW5CZXQpIHRocm93OwogICAgaWYgKG1zZy52YWx1ZSA+IG1heEJldCkgdGhyb3c7CgogICAgLy8gY2hlY2sgaWYgcGxheWVyIGhhcyBnYW1lIG9wZW5lZAogICAgdWludDI1NiBjdXJyZW50R2FtZUlkID0gY3VycmVudEdhbWVbbXNnLnNlbmRlcl07CiAgICBpZiAoZ2FtZXMubGVuZ3RoID4gY3VycmVudEdhbWVJZCkgewogICAgICBHYW1lTGliLkdhbWUgb3BlbmVkR2FtZSA9IGdhbWVzW2N1cnJlbnRHYW1lSWRdOwogICAgICBpZiAob3BlbmVkR2FtZS5wbGF5ZXIgPT0gbXNnLnNlbmRlciAmJiAhb3BlbmVkR2FtZS5jbG9zZWQpIHsgLy8gQ2hlY2sgZm9yIGluZGV4IDAgbWFwcGluZyBwcm9ibGVtcwoJaWYgKCFvcGVuZWRHYW1lLnRpY2soKSkgdGhyb3c7CglpZiAoIW9wZW5lZEdhbWUuY2xvc2VkKSB0aHJvdzsgLy8gY2Fubm90IHN0YXJ0IGdhbWUgd2l0aCBvbi1nb2luZyBnYW1lCglyZWNvcmRFbmRlZEdhbWUoY3VycmVudEdhbWVJZCk7CiAgICAgIH0KICAgIH0KICAgIHVpbnQyNTYgbmV3R2FtZUlEID0gZ2FtZXMubGVuZ3RoOwoKICAgIGdhbWVzLmxlbmd0aCArPSAxOwogICAgZ2FtZXNbbmV3R2FtZUlEXS5pbml0KG5ld0dhbWVJRCk7CiAgICBjdXJyZW50R2FtZVttc2cuc2VuZGVyXSA9IG5ld0dhbWVJRDsKICAgIHRpY2tSZXF1aXJlZExvZyhnYW1lc1tuZXdHYW1lSURdKTsKICB9CgogIGZ1bmN0aW9uIGhpdCh1aW50MjU2IGdhbWVJRCkgb25seVBsYXllcihnYW1lSUQpIGJsb2NrQWN0aW9uUHJvdGVjdGVkIHsKICAgIEdhbWVMaWIuR2FtZSBnYW1lID0gZ2FtZXNbZ2FtZUlEXTsKCiAgICBpZiAoIWdhbWUudGljaygpKSB0aHJvdzsKICAgIGdhbWUucGxheWVyRGVjaXNpb24oR2FtZUxpYi5HYW1lU3RhdGUuSGl0KTsKICAgIHRpY2tSZXF1aXJlZExvZyhnYW1lKTsKICB9CgogIGZ1bmN0aW9uIGRvdWJsZURvd24odWludDI1NiBnYW1lSUQpIG9ubHlQbGF5ZXIoZ2FtZUlEKSBibG9ja0FjdGlvblByb3RlY3RlZCBwYXlhYmxlIHsKICAgIEdhbWVMaWIuR2FtZSBnYW1lID0gZ2FtZXNbZ2FtZUlEXTsKCiAgICBpZiAoIWdhbWUudGljaygpKSB0aHJvdzsKICAgIGdhbWUucGxheWVyRGVjaXNpb24oR2FtZUxpYi5HYW1lU3RhdGUuRG91YmxlRG93bik7CiAgICB0aWNrUmVxdWlyZWRMb2coZ2FtZSk7CiAgfQoKICBmdW5jdGlvbiBzdGFuZCh1aW50MjU2IGdhbWVJRCkgb25seVBsYXllcihnYW1lSUQpIGJsb2NrQWN0aW9uUHJvdGVjdGVkIHsKICAgIEdhbWVMaWIuR2FtZSBnYW1lID0gZ2FtZXNbZ2FtZUlEXTsKCiAgICBpZiAoIWdhbWUudGljaygpKSB0aHJvdzsKICAgIGdhbWUucGxheWVyRGVjaXNpb24oR2FtZUxpYi5HYW1lU3RhdGUuU3RhbmQpOwogICAgdGlja1JlcXVpcmVkTG9nKGdhbWUpOwogIH0KCiAgZnVuY3Rpb24gZ2FtZVRpY2sodWludDI1NiBnYW1lSUQpIGJsb2NrQWN0aW9uUHJvdGVjdGVkIHsKICAgIEdhbWVMaWIuR2FtZSBvcGVuZWRHYW1lID0gZ2FtZXNbZ2FtZUlEXTsKICAgIGlmIChvcGVuZWRHYW1lLmNsb3NlZCkgdGhyb3c7CiAgICBpZiAoIW9wZW5lZEdhbWUudGljaygpKSB0aHJvdzsKICAgIGlmIChvcGVuZWRHYW1lLmNsb3NlZCkgcmVjb3JkRW5kZWRHYW1lKGdhbWVJRCk7CiAgfQoKICBmdW5jdGlvbiByZWNvcmRFbmRlZEdhbWUodWludCBnYW1lSUQpIHByaXZhdGUgewogICAgR2FtZUxpYi5HYW1lIG9wZW5lZEdhbWUgPSBnYW1lc1tnYW1lSURdOwoKICAgIC8vdnMgcG90ZW50aWFsIG92ZXJmbG93IHdoZW4gY3JvdXBpZXIgaXMgbm90IHRpY2tpbmcgZnJlcXVlbnRseSBlbm91Z2gKICAgIGlmKGN1cnJlbnRCYW5rcm9sbCArIG9wZW5lZEdhbWUuYmV0ID4gb3BlbmVkR2FtZS5wYXlvdXQpewogICAgICBjdXJyZW50QmFua3JvbGwgPSBjdXJyZW50QmFua3JvbGwgKyBvcGVuZWRHYW1lLmJldCAtIG9wZW5lZEdhbWUucGF5b3V0OwogICAgfQoKICAgIGJsb2NramFja2xvZ3MucmVjb3JkTG9nKAoJCQkgICAgb3BlbmVkR2FtZS5nYW1lSUQsCgkJCSAgICBvcGVuZWRHYW1lLnBsYXllciwKCQkJICAgIHVpbnQob3BlbmVkR2FtZS5yZXN1bHQpLAoJCQkgICAgb3BlbmVkR2FtZS5wYXlvdXQsCgkJCSAgICBHYW1lTGliLmNvdW50SGFuZChvcGVuZWRHYW1lLnBsYXllckNhcmRzKSwKCQkJICAgIEdhbWVMaWIuY291bnRIYW5kKG9wZW5lZEdhbWUuaG91c2VDYXJkcykKCQkJICAgICk7CiAgfQoKICBmdW5jdGlvbiB0aWNrUmVxdWlyZWRMb2coR2FtZUxpYi5HYW1lIHN0b3JhZ2UgZ2FtZSkgcHJpdmF0ZSB7CiAgICBibG9ja2phY2tsb2dzLnRpY2tSZXF1aXJlZExvZyhnYW1lLmdhbWVJRCwgZ2FtZS5wbGF5ZXIsIGdhbWUuYWN0aW9uQmxvY2spOwogIH0KCiAgLy8gQ29uc3RhbnRzCgogIGZ1bmN0aW9uIGdhbWVTdGF0ZSh1aW50IGkpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4W10sIHVpbnQ4W10sIHVpbnQ4LCB1aW50OCwgdWludDI1NiwgdWludDI1NiwgdWludDgsIHVpbnQ4LCBib29sLCB1aW50MjU2KSB7CiAgICBHYW1lTGliLkdhbWUgZ2FtZSA9IGdhbWVzW2ldOwoKICAgIHJldHVybiAoCgkgICAgZ2FtZS5ob3VzZUNhcmRzLAoJICAgIGdhbWUucGxheWVyQ2FyZHMsCgkgICAgR2FtZUxpYi5jb3VudEhhbmQoZ2FtZS5ob3VzZUNhcmRzKSwKCSAgICBHYW1lTGliLmNvdW50SGFuZChnYW1lLnBsYXllckNhcmRzKSwKCSAgICBnYW1lLmJldCwKCSAgICBnYW1lLnBheW91dCwKCSAgICB1aW50OChnYW1lLnN0YXRlKSwKCSAgICB1aW50OChnYW1lLnJlc3VsdCksCgkgICAgZ2FtZS5jbG9zZWQsCgkgICAgZ2FtZS5hY3Rpb25CbG9jawoJICAgICk7CiAgfQoKICAvLyBBZG1pbgogIGZ1bmN0aW9uIHNldHVwVHJ1c3RlZEFjY291bnRzKCkKICAgIGludGVybmFsCiAgewogICAgaXNPd25lcltEWF0gPSB0cnVlOwogICAgaXNPd25lcltERVZdID0gdHJ1ZTsKICAgIGlzT3duZXJbQURNSU5fQ09OVFJBQ1RdID0gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZURldihhZGRyZXNzIG5ld0Rldikgb25seShERVYpIHsKICAgIGlzT3duZXJbREVWXSA9IGZhbHNlOwogICAgREVWID0gbmV3RGV2OwogICAgaXNPd25lcltERVZdID0gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZURYKGFkZHJlc3MgbmV3RFgpIG9ubHkoRFgpIHsKICAgIGlzT3duZXJbRFhdID0gZmFsc2U7CiAgICBEWCA9IG5ld0RYOwogICAgaXNPd25lcltEWF0gPSB0cnVlOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlQWRtaW5Db250cmFjdChhZGRyZXNzIF9uZXdfYWRtaW5fY29udHJhY3QpIG9ubHkoQURNSU5fQ09OVFJBQ1QpIHsKICAgIGlzT3duZXJbQURNSU5fQ09OVFJBQ1RdID0gZmFsc2U7CiAgICBBRE1JTl9DT05UUkFDVCA9IF9uZXdfYWRtaW5fY29udHJhY3Q7CiAgICBpc093bmVyW0FETUlOX0NPTlRSQUNUXSA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiBzZXRTZXR0aW5ncyh1aW50MjU2IF9taW4sIHVpbnQyNTYgX21heCwgdWludDI1NiBfbWF4QmxvY2tBY3Rpb25zKSBvbmx5KEFETUlOX0NPTlRSQUNUKSB7CiAgICBtaW5CZXQgPSBfbWluOwogICAgbWF4QmV0ID0gX21heDsKICAgIG1heEJsb2NrQWN0aW9ucyA9IF9tYXhCbG9ja0FjdGlvbnM7CiAgfQoKICBmdW5jdGlvbiByZWdpc3Rlck93bmVyKGFkZHJlc3MgX25ld193YXRjaGVyKSBvbmx5KEFETUlOX0NPTlRSQUNUKSB7CiAgICBpc093bmVyW19uZXdfd2F0Y2hlcl0gPSB0cnVlOwogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlT3duZXIoYWRkcmVzcyBfb2xkX3dhdGNoZXIpIG9ubHkoQURNSU5fQ09OVFJBQ1QpIHsKICAgIGlzT3duZXJbX29sZF93YXRjaGVyXSA9IGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gc3RvcEJsb2NramFjaygpIG9ubHlPd25lciB7CiAgICBhbGxvd3NOZXdHYW1lcyA9IGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gc3RhcnRCbG9ja2phY2soKSBvbmx5KEFETUlOX0NPTlRSQUNUKSB7CiAgICBhbGxvd3NOZXdHYW1lcyA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiBhZGRCYW5rcm9sbCgpIG9ubHkoRFgpIHBheWFibGUgewogICAgaW5pdGlhbEJhbmtyb2xsICs9IG1zZy52YWx1ZTsKICAgIGN1cnJlbnRCYW5rcm9sbCArPSBtc2cudmFsdWU7CiAgfQoKICBmdW5jdGlvbiByZW1haW5pbmdCYW5rcm9sbCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBjdXJyZW50QmFua3JvbGwgPiBpbml0aWFsQmFua3JvbGwgPyBpbml0aWFsQmFua3JvbGwgOiBjdXJyZW50QmFua3JvbGw7CiAgfQoKICBmdW5jdGlvbiByZW1vdmVCYW5rcm9sbCgpIG9ubHkoRFgpIHsKICAgIGlmIChpbml0aWFsQmFua3JvbGwgPiBjdXJyZW50QmFua3JvbGwgLSA1IGV0aGVyICYmIGJhbmtyb2xsTG9ja2VkVW50aWwgPiBub3cpIHRocm93OwoKICAgIHN0b3BCbG9ja2phY2soKTsKCiAgICBpZiAoY3VycmVudEJhbmtyb2xsID4gaW5pdGlhbEJhbmtyb2xsKSB7IC8vIHRoZXJlIGFyZSBwcm9maXRzCiAgICAgIGlmICghREVWLnNlbmQoY3VycmVudEJhbmtyb2xsIC0gaW5pdGlhbEJhbmtyb2xsKSkgdGhyb3c7CiAgICB9CgogICAgc3VpY2lkZShEWCk7IC8vIHNlbmQgcmVzdCB0byBkeAogICAgY29udHJhY3RDbGVhcmVkID0gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIG1pZ3JhdGVCbG9ja2phY2soKSBvbmx5KEFETUlOX0NPTlRSQUNUKSB7CiAgICBzdG9wQmxvY2tqYWNrKCk7CgogICAgaWYgKGN1cnJlbnRCYW5rcm9sbCA+IGluaXRpYWxCYW5rcm9sbCkgeyAvLyB0aGVyZSBhcmUgcHJvZml0cywgc2hhcmUgdGhlbQogICAgICBpZiAoIUFETUlOX0NPTlRSQUNULmNhbGwudmFsdWUoY3VycmVudEJhbmtyb2xsIC0gaW5pdGlhbEJhbmtyb2xsKSgpKSB0aHJvdzsKICAgIH0KICAgIHN1aWNpZGUoRFgpOyAvLyBzZW5kIHJlc3QgdG8gZHgKICAgIC8vRFggd2lsbCBoYXZlIHRvIHJlZnVuZCB0aGUgbm9uIGZpbmFsaXplZCBiZXRzIHRoYXQgbWF5IGhhdmUgYmVlbiBzdG9wcGVkCiAgfQoKICBmdW5jdGlvbiBzaGFyZVByb2ZpdHMoKSBvbmx5T3duZXIgewogICAgaWYgKHByb2ZpdHNMb2NrZWRVbnRpbCA+IG5vdykgdGhyb3c7CiAgICBpZiAoY3VycmVudEJhbmtyb2xsIDw9IGluaXRpYWxCYW5rcm9sbCkgdGhyb3c7IC8vIHRoZXJlIGFyZSBubyBwcm9maXRzCgogICAgdWludDI1NiBwcm9maXQgPSBjdXJyZW50QmFua3JvbGwgLSBpbml0aWFsQmFua3JvbGw7CiAgICBpZiAoIUFETUlOX0NPTlRSQUNULmNhbGwudmFsdWUocHJvZml0KSgpKSB0aHJvdzsKICAgIGN1cnJlbnRCYW5rcm9sbCAtPSBwcm9maXQ7CgogICAgYmFua3JvbGxMb2NrZWRVbnRpbCA9IG5vdyArIEJBTktST0xMX0xPQ0tfUEVSSU9EOwogICAgcHJvZml0c0xvY2tlZFVudGlsID0gYmFua3JvbGxMb2NrZWRVbnRpbCArIEJBTktST0xMX0xPQ0tfUEVSSU9EOwogIH0KfQ=='.
	

]
