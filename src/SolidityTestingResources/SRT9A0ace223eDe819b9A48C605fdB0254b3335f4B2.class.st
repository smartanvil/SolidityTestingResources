Class {
	#name : #SRT9A0ace223eDe819b9A48C605fdB0254b3335f4B2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9A0ace223eDe819b9A48C605fdB0254b3335f4B2 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgogLyogUmVjZWl2ZXIgbXVzdCBpbXBsZW1lbnQgdGhpcyBmdW5jdGlvbiB0byByZWNlaXZlIHRva2VucwogKiAgb3RoZXJ3aXNlIHRva2VuIHRyYW5zYWN0aW9uIHdpbGwgZmFpbAogKi8KIAogY29udHJhY3QgQ29udHJhY3RSZWNlaXZlciB7CiAgICBmdW5jdGlvbiB0b2tlbkZhbGxiYWNrKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSl7CiAgICAgIF9mcm9tID0gX2Zyb207CiAgICAgIF92YWx1ZSA9IF92YWx1ZTsKICAgICAgX2RhdGEgPSBfZGF0YTsKICAgICAgLy8gSW5jb21pbmcgdHJhbnNhY3Rpb24gY29kZSBoZXJlCiAgICB9Cn0KIAogLyogTmV3IEVSQzIzIGNvbnRyYWN0IGludGVyZmFjZSAqLwoKY29udHJhY3QgRVJDMjMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CgogIGZ1bmN0aW9uIG5hbWUoKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgX25hbWUpOwogIGZ1bmN0aW9uIHN5bWJvbCgpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBfc3ltYm9sKTsKICBmdW5jdGlvbiBkZWNpbWFscygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscyk7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9zdXBwbHkpOwoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlLCBieXRlcyBkYXRhKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgYnl0ZXMgZGF0YSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgogLyoqCiAqIEVSQzIzIHRva2VuIGJ5IERleGFyYW4KICoKICogaHR0cHM6Ly9naXRodWIuY29tL0RleGFyYW4vRVJDMjMtdG9rZW5zCiAqLwogCmNvbnRyYWN0IEVSQzIzVG9rZW4gaXMgRVJDMjMgewoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICBzdHJpbmcgcHVibGljIG5hbWU7CiAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgdWludDggcHVibGljIGRlY2ltYWxzOwogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAvLyBGdW5jdGlvbiB0byBhY2Nlc3MgbmFtZSBvZiB0b2tlbiAuCiAgZnVuY3Rpb24gbmFtZSgpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBfbmFtZSkgewogICAgICByZXR1cm4gbmFtZTsKICB9CiAgLy8gRnVuY3Rpb24gdG8gYWNjZXNzIHN5bWJvbCBvZiB0b2tlbiAuCiAgZnVuY3Rpb24gc3ltYm9sKCkgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nIF9zeW1ib2wpIHsKICAgICAgcmV0dXJuIHN5bWJvbDsKICB9CiAgLy8gRnVuY3Rpb24gdG8gYWNjZXNzIGRlY2ltYWxzIG9mIHRva2VuIC4KICBmdW5jdGlvbiBkZWNpbWFscygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscykgewogICAgICByZXR1cm4gZGVjaW1hbHM7CiAgfQogIC8vIEZ1bmN0aW9uIHRvIGFjY2VzcyB0b3RhbCBzdXBwbHkgb2YgdG9rZW5zIC4KICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KSB7CiAgICAgIHJldHVybiB0b3RhbFN1cHBseTsKICB9CgogIC8vZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIHVzZXIgb3IgYW5vdGhlciBjb250cmFjdCB3YW50cyB0byB0cmFuc2ZlciBmdW5kcwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogIAogICAgLy9maWx0ZXJpbmcgaWYgdGhlIHRhcmdldCBpcyBhIGNvbnRyYWN0IHdpdGggYnl0ZWNvZGUgaW5zaWRlIGl0CiAgICBpZihpc0NvbnRyYWN0KF90bykpIHsKICAgICAgICB0cmFuc2ZlclRvQ29udHJhY3QoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgIH0KICAgIGVsc2UgewogICAgICAgIHRyYW5zZmVyVG9BZGRyZXNzKF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgCiAgICAvL3N0YW5kYXJkIGZ1bmN0aW9uIHRyYW5zZmVyIHNpbWlsYXIgdG8gRVJDMjAgdHJhbnNmZXIgd2l0aCBubyBfZGF0YQogICAgLy9hZGRlZCBkdWUgdG8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgcmVhc29ucwogICAgYnl0ZXMgbWVtb3J5IGVtcHR5OwogICAgaWYoaXNDb250cmFjdChfdG8pKSB7CiAgICAgICAgdHJhbnNmZXJUb0NvbnRyYWN0KF90bywgX3ZhbHVlLCBlbXB0eSk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgZW1wdHkpOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvL2Z1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gdHJhbnNhY3Rpb24gdGFyZ2V0IGlzIGFuIGFkZHJlc3MKICBmdW5jdGlvbiB0cmFuc2ZlclRvQWRkcmVzcyhhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwcml2YXRlIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgcmV0dXJuIHRydWU7CiAgfQogIAogIC8vZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiB0cmFuc2FjdGlvbiB0YXJnZXQgaXMgYSBjb250cmFjdAogIGZ1bmN0aW9uIHRyYW5zZmVyVG9Db250cmFjdChhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwcml2YXRlIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICBDb250cmFjdFJlY2VpdmVyIHJlY2lldmVyID0gQ29udHJhY3RSZWNlaXZlcihfdG8pOwogICAgcmVjaWV2ZXIudG9rZW5GYWxsYmFjayhtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgCiAgLy9hc3NlbWJsZSB0aGUgZ2l2ZW4gYWRkcmVzcyBieXRlY29kZS4gSWYgYnl0ZWNvZGUgZXhpc3RzIHRoZW4gdGhlIF9hZGRyIGlzIGEgY29udHJhY3QuCiAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBwcml2YXRlIHJldHVybnMgKGJvb2wgaXNfY29udHJhY3QpIHsKICAgICAgX2FkZHIgPSBfYWRkcjsKICAgICAgdWludDI1NiBsZW5ndGg7CiAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgLy9yZXRyaWV2ZSB0aGUgc2l6ZSBvZiB0aGUgY29kZSBvbiB0YXJnZXQgYWRkcmVzcywgdGhpcyBuZWVkcyBhc3NlbWJseQogICAgICAgICAgICBsZW5ndGggOj0gZXh0Y29kZXNpemUoX2FkZHIpCiAgICAgICAgfQogICAgICAgIGlmKGxlbmd0aD4wKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwogICAgCiAgICBpZihfdmFsdWUgPiBfYWxsb3dhbmNlKSB7CiAgICAgICAgdGhyb3c7CiAgICB9CgogICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9Cn0KCgovLyBFUkMyMjMgdG9rZW4gd2l0aCB0aGUgYWJpbGl0eSBmb3IgdGhlIG93bmVyIHRvIGJsb2NrIGFueSBhY2NvdW50CmNvbnRyYWN0IERBU1Rva2VuIGlzIEVSQzIzVG9rZW4gewogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBibG9ja2VkQWNjb3VudHM7CiAgICBhZGRyZXNzIHB1YmxpYyBzZWNyZXRhcnlHZW5lcmFsOwoKCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gREFTVG9rZW4oCiAgICAgICAgICAgIHN0cmluZyBfbmFtZSwKICAgICAgICAgICAgc3RyaW5nIF9zeW1ib2wsCiAgICAgICAgICAgIHVpbnQ4IF9kZWNpbWFscywKICAgICAgICAgICAgdWludDI1NiBfdG90YWxTdXBwbHksCiAgICAgICAgICAgIGFkZHJlc3MgX2luaXRpYWxUb2tlbnNIb2xkZXIpIHsKICAgICAgICBzZWNyZXRhcnlHZW5lcmFsID0gbXNnLnNlbmRlcjsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsKICAgICAgICB0b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseTsKICAgICAgICBiYWxhbmNlc1tfaW5pdGlhbFRva2Vuc0hvbGRlcl0gPSBfdG90YWxTdXBwbHk7CiAgICB9CgoKICAgIG1vZGlmaWVyIG9ubHlTZWNyZXRhcnlHZW5lcmFsIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBzZWNyZXRhcnlHZW5lcmFsKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKCiAgICAvLyBibG9jayBhY2NvdW50CiAgICBmdW5jdGlvbiBibG9ja0FjY291bnQoYWRkcmVzcyBfYWNjb3VudCkgb25seVNlY3JldGFyeUdlbmVyYWwgewogICAgICAgIGJsb2NrZWRBY2NvdW50c1tfYWNjb3VudF0gPSB0cnVlOwogICAgfQoKICAgIC8vIHVuYmxvY2sgYWNjb3VudAogICAgZnVuY3Rpb24gdW5ibG9ja0FjY291bnQoYWRkcmVzcyBfYWNjb3VudCkgb25seVNlY3JldGFyeUdlbmVyYWwgewogICAgICAgIGJsb2NrZWRBY2NvdW50c1tfYWNjb3VudF0gPSBmYWxzZTsKICAgIH0KCiAgICAvLyBjaGVjayBpcyBhY2NvdW50IGJsb2NrZWQKICAgIGZ1bmN0aW9uIGlzQWNjb3VudEJsb2NrZWQoYWRkcmVzcyBfYWNjb3VudCkgcmV0dXJucyAoYm9vbCl7CiAgICAgICAgcmV0dXJuIGJsb2NrZWRBY2NvdW50c1tfYWNjb3VudF07CiAgICB9CgogICAgLy8gb3ZlcnJpZGUgdHJhbnNmZXIgbWV0aG9kcyB0byB0aHJvdyBvbiBibG9ja2VkIGFjY291bnRzCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmxvY2tlZEFjY291bnRzW21zZy5zZW5kZXJdKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICByZXR1cm4gRVJDMjNUb2tlbi50cmFuc2ZlcihfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJsb2NrZWRBY2NvdW50c1ttc2cuc2VuZGVyXSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgYnl0ZXMgbWVtb3J5IGVtcHR5OwogICAgICAgIHJldHVybiBFUkMyM1Rva2VuLnRyYW5zZmVyKF90bywgX3ZhbHVlLCBlbXB0eSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJsb2NrZWRBY2NvdW50c1tfZnJvbV0pIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIHJldHVybiBFUkMyM1Rva2VuLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQp9CgoKCmNvbnRyYWN0IEFCQ1Rva2VuIGlzIEVSQzIzVG9rZW4gewogICAgLy8gQ29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIEFCQ1Rva2VuKAogICAgICAgICAgICBzdHJpbmcgX25hbWUsCiAgICAgICAgICAgIHN0cmluZyBfc3ltYm9sLAogICAgICAgICAgICB1aW50OCBfZGVjaW1hbHMsCiAgICAgICAgICAgIHVpbnQyNTYgX3RvdGFsU3VwcGx5LAogICAgICAgICAgICBhZGRyZXNzIF9pbml0aWFsVG9rZW5zSG9sZGVyKSB7CiAgICAgICAgbmFtZSA9IF9uYW1lOwogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICAgICAgZGVjaW1hbHMgPSBfZGVjaW1hbHM7CiAgICAgICAgdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHk7CiAgICAgICAgYmFsYW5jZXNbX2luaXRpYWxUb2tlbnNIb2xkZXJdID0gX3RvdGFsU3VwcGx5OwogICAgfQp9CgoKLy8gQ29udHJhY3Qgd2l0aCB2b3Rpbmcgb24gcHJvcG9zYWxzIGFuZCBleGVjdXRpb24gb2YgcGFzc2VkIHByb3Bvc2Fscwpjb250cmFjdCBEQVMgaXMgQ29udHJhY3RSZWNlaXZlciB7CgogICAgLyogQ29udHJhY3QgVmFyaWFibGVzICovCgogICAgc3RyaW5nIG5hbWUgPSAiRGVjZW50cmFsaXplZCBBdXRvbm9tb3VzIFN0YXRlIjsKICAgIC8vIFNvdXJjZSBvZiBkZW1vY3JhY3kKICAgIERBU1Rva2VuIHB1YmxpYyBkYXNUb2tlbjsKICAgIEFCQ1Rva2VuIHB1YmxpYyBhYmNUb2tlbjsKICAgIC8vIERlbW9jcmFjeSBydWxlcwogICAgdWludDI1NiBwdWJsaWMgY29uZ3Jlc3NNZW1iZXJUaHJlc2hvbGQ7IC8vIFVzZXIgbXVzdCBoYXZlIG1vcmUgdGhhbiB0aGlzIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgaW5jbHVkZWQgaW50byBjb25ncmVzcwogICAgdWludDI1NiBwdWJsaWMgbWluaW11bVF1b3J1bTsgICAgICAgICAgIC8vIFRoZSBtaW5pbXVtIG51bWJlciBvZiB0b2tlbnMgdGhhdCBtdXN0IHBhcnRpY2lwYXRlIGluIGEgdm90ZSB0byBhY2hpZXZlIGEgcXVvcnVtCiAgICB1aW50MjU2IHB1YmxpYyBkZWJhdGluZ1BlcmlvZDsgICAgICAgICAgLy8gTWluIHRpbWUgdG8gdm90ZSBmb3IgYW4gcHJvcG9zYWwgW3NlY10KICAgIHVpbnQyNTYgcHVibGljIG1hcmdpbkZvck1ham9yaXR5OyAgICAgICAvLyBNaW4gc3VwZXJpb3JpdHkgb2Ygdm90ZXMgImZvciIgdG8gcGFzcyB0aGUgcHJvcG9zYWwgW251bWJlciBvZiB0b2tlbnNdCiAgICAvLyBQcm9wb3NhbHMKICAgIFByb3Bvc2FsW10gcHVibGljIHByb3Bvc2FsczsKICAgIHVpbnQyNTYgcHVibGljIHByb3Bvc2Fsc051bWJlciA9IDA7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQzMikgdG9rZW5zTG9ja3M7ICAgICAgICAgLy8gY29uZ3Jlc3MgbWVtYmVyID0+IG51bWJlciBvZiBsb2NrcyAocmVjdXJzaXZlIG11dGV4KQoKICAgIC8qIENvbnRyYWN0IEV2ZW50cyAqLwogICAgZXZlbnQgUHJvcG9zYWxBZGRlZEV2ZW50KHVpbnQyNTYgcHJvcG9zYWxJRCwgYWRkcmVzcyBiZW5lZmljaWFyeSwgdWludDI1NiBldGhlckFtb3VudCwgc3RyaW5nIGRlc2NyaXB0aW9uKTsKICAgIGV2ZW50IFZvdGVkRXZlbnQodWludDI1NiBwcm9wb3NhbElELCBhZGRyZXNzIHZvdGVyLCBib29sIGluU3VwcG9ydCwgdWludDI1NiB2b3RlclRva2Vucywgc3RyaW5nIGp1c3RpZmljYXRpb25UZXh0KTsKICAgIGV2ZW50IFByb3Bvc2FsVGFsbGllZEV2ZW50KHVpbnQyNTYgcHJvcG9zYWxJRCwgYm9vbCBxdW9ydW0sIGJvb2wgcmVzdWx0KTsKICAgIGV2ZW50IFByb3Bvc2FsRXhlY3V0ZWRFdmVudCh1aW50MjU2IHByb3Bvc2FsSUQpOwogICAgZXZlbnQgUnVsZXNDaGFuZ2VkRXZlbnQodWludDI1NiBjb25ncmVzc01lbWJlclRocmVzaG9sZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgbWluaW11bVF1b3J1bSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgZGViYXRpbmdQZXJpb2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2IG1hcmdpbkZvck1ham9yaXR5KTsKCiAgICAvKiBDb250cmFjdCBTdHJ1Y3R1cmVzICovCiAgICBlbnVtIFByb3Bvc2FsU3RhdGUge1Byb3Bvc2VkLCBOb1F1b3J1bSwgUmVqZWN0ZWQsIFBhc3NlZCwgRXhlY3V0ZWR9CgogICAgc3RydWN0IFByb3Bvc2FsIHsKICAgICAgICAvKiBQcm9wb3NhbCBjb250ZW50ICovCiAgICAgICAgYWRkcmVzcyBiZW5lZmljaWFyeTsKICAgICAgICB1aW50MjU2IGV0aGVyQW1vdW50OwogICAgICAgIHN0cmluZyBkZXNjcmlwdGlvbjsKICAgICAgICBieXRlczMyIHByb3Bvc2FsSGFzaDsKCiAgICAgICAgLyogUHJvcG9zYWwgc3RhdGUgKi8KICAgICAgICBQcm9wb3NhbFN0YXRlIHN0YXRlOwoKICAgICAgICAvKiBWb3Rpbmcgc3RhdGUgKi8KICAgICAgICB1aW50MjU2IHZvdGluZ0RlYWRsaW5lOwogICAgICAgIFZvdGVbXSB2b3RlczsKICAgICAgICB1aW50MjU2IHZvdGVzTnVtYmVyOwogICAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgdm90ZWQ7CiAgICB9CgogICAgc3RydWN0IFZvdGUgewogICAgICAgIGFkZHJlc3Mgdm90ZXI7CiAgICAgICAgYm9vbCBpblN1cHBvcnQ7CiAgICAgICAgdWludDI1NiB2b3RlclRva2VuczsKICAgICAgICBzdHJpbmcganVzdGlmaWNhdGlvblRleHQ7CiAgICB9CgogICAgLyogbW9kaWZpZXIgdGhhdCBhbGxvd3Mgb25seSBjb25ncmVzcyBtZW1iZXJzIHRvIHZvdGUgYW5kIGNyZWF0ZSBuZXcgcHJvcG9zYWxzICovCiAgICBtb2RpZmllciBvbmx5Q29uZ3Jlc3NNZW1iZXJzIHsKICAgICAgICBpZiAoZGFzVG9rZW4uYmFsYW5jZU9mKG1zZy5zZW5kZXIpIDwgY29uZ3Jlc3NNZW1iZXJUaHJlc2hvbGQpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgLyogQ29uc3RydWN0b3IgKi8KICAgIGZ1bmN0aW9uIERBUygKICAgICAgICB1aW50MjU2IF9jb25ncmVzc01lbWJlclRocmVzaG9sZCwKICAgICAgICB1aW50MjU2IF9taW5pbXVtUXVvcnVtLAogICAgICAgIHVpbnQyNTYgX2RlYmF0aW5nUGVyaW9kLAogICAgICAgIHVpbnQyNTYgX21hcmdpbkZvck1ham9yaXR5LAogICAgICAgIGFkZHJlc3MgX2NvbmdyZXNzTGVhZGVyCiAgICApIHBheWFibGUgewogICAgICAgIC8vIGNyZWF0ZSBhIHNvdXJjZSBvZiBkZW1vY3JhY3kKICAgICAgICBkYXNUb2tlbiA9IG5ldyBEQVNUb2tlbignREEkJywgJ0RBJCcsIDE4LCAxMDAwMDAwMDAwICogKDEwICoqIDE4KSwgX2NvbmdyZXNzTGVhZGVyKTsKICAgICAgICBhYmNUb2tlbiA9IG5ldyBBQkNUb2tlbignQWxwaGFiaXQnLCAnQUJDJywgMTgsIDIxMDAwMDAwMCAqICgxMCAqKiAxOCksIF9jb25ncmVzc0xlYWRlcik7CgogICAgICAgIC8vIHNldHVwIHJ1bGVzCiAgICAgICAgY29uZ3Jlc3NNZW1iZXJUaHJlc2hvbGQgPSBfY29uZ3Jlc3NNZW1iZXJUaHJlc2hvbGQ7CiAgICAgICAgbWluaW11bVF1b3J1bSA9IF9taW5pbXVtUXVvcnVtOwogICAgICAgIGRlYmF0aW5nUGVyaW9kID0gX2RlYmF0aW5nUGVyaW9kOwogICAgICAgIG1hcmdpbkZvck1ham9yaXR5ID0gX21hcmdpbkZvck1ham9yaXR5OwoKICAgICAgICBSdWxlc0NoYW5nZWRFdmVudChjb25ncmVzc01lbWJlclRocmVzaG9sZCwgbWluaW11bVF1b3J1bSwgZGViYXRpbmdQZXJpb2QsIG1hcmdpbkZvck1ham9yaXR5KTsKICAgIH0KCiAgICAvLyBibGFuayBmYWxsYmFjayB0byByZWNlaXZlIEVUSAogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsgfQoKICAgIC8qIFByb3Bvc2FsLXJlbGF0ZWQgZnVuY3Rpb25zICovCgogICAgLy8gY2FsY3VsYXRlIGhhc2ggb2YgYW4gcHJvcG9zYWwKICAgIGZ1bmN0aW9uIGdldFByb3Bvc2FsSGFzaCgKICAgICAgICBhZGRyZXNzIF9iZW5lZmljaWFyeSwKICAgICAgICB1aW50MjU2IF9ldGhlckFtb3VudCwKICAgICAgICBieXRlcyBfdHJhbnNhY3Rpb25CeXRlY29kZQogICAgKQogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAoYnl0ZXMzMikKICAgIHsKICAgICAgICByZXR1cm4gc2hhMyhfYmVuZWZpY2lhcnksIF9ldGhlckFtb3VudCwgX3RyYW5zYWN0aW9uQnl0ZWNvZGUpOwogICAgfQoKICAgIC8vIGJsb2NrIHRva2VucyBvZiBhbiB2b3RlcgogICAgZnVuY3Rpb24gYmxvY2tUb2tlbnMoYWRkcmVzcyBfdm90ZXIpIGludGVybmFsIHsKICAgICAgICBpZiAodG9rZW5zTG9ja3NbX3ZvdGVyXSArIDEgPCB0b2tlbnNMb2Nrc1tfdm90ZXJdKSB0aHJvdzsKCiAgICAgICAgdG9rZW5zTG9ja3NbX3ZvdGVyXSArPSAxOwogICAgICAgIGlmICh0b2tlbnNMb2Nrc1tfdm90ZXJdID09IDEpIHsKICAgICAgICAgICAgZGFzVG9rZW4uYmxvY2tBY2NvdW50KF92b3Rlcik7CiAgICAgICAgfQogICAgfQoKICAgIC8vIHVuYmxvY2sgdG9rZW5zIG9mIGFuIHZvdGVyCiAgICBmdW5jdGlvbiB1bmJsb2NrVG9rZW5zKGFkZHJlc3MgX3ZvdGVyKSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKHRva2Vuc0xvY2tzW192b3Rlcl0gPD0gMCkgdGhyb3c7CgogICAgICAgIHRva2Vuc0xvY2tzW192b3Rlcl0gLT0gMTsKICAgICAgICBpZiAodG9rZW5zTG9ja3NbX3ZvdGVyXSA9PSAwKSB7CiAgICAgICAgICAgIGRhc1Rva2VuLnVuYmxvY2tBY2NvdW50KF92b3Rlcik7CiAgICAgICAgfQogICAgfQoKICAgIC8vIGNyZWF0ZSBuZXcgcHJvcG9zYWwKICAgIGZ1bmN0aW9uIGNyZWF0ZVByb3Bvc2FsKAogICAgICAgIGFkZHJlc3MgX2JlbmVmaWNpYXJ5LAogICAgICAgIHVpbnQyNTYgX2V0aGVyQW1vdW50LAogICAgICAgIHN0cmluZyBfZGVzY3JpcHRpb24sCiAgICAgICAgYnl0ZXMgX3RyYW5zYWN0aW9uQnl0ZWNvZGUKICAgICkKICAgICAgICBvbmx5Q29uZ3Jlc3NNZW1iZXJzCiAgICAgICAgcmV0dXJucyAodWludDI1NiBfcHJvcG9zYWxJRCkKICAgIHsKICAgICAgICBfcHJvcG9zYWxJRCA9IHByb3Bvc2Fscy5sZW5ndGg7CiAgICAgICAgcHJvcG9zYWxzLmxlbmd0aCArPSAxOwogICAgICAgIHByb3Bvc2Fsc051bWJlciA9IF9wcm9wb3NhbElEICsgMTsKCiAgICAgICAgcHJvcG9zYWxzW19wcm9wb3NhbElEXS5iZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgICAgICBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdLmV0aGVyQW1vdW50ID0gX2V0aGVyQW1vdW50OwogICAgICAgIHByb3Bvc2Fsc1tfcHJvcG9zYWxJRF0uZGVzY3JpcHRpb24gPSBfZGVzY3JpcHRpb247CiAgICAgICAgcHJvcG9zYWxzW19wcm9wb3NhbElEXS5wcm9wb3NhbEhhc2ggPSBnZXRQcm9wb3NhbEhhc2goX2JlbmVmaWNpYXJ5LCBfZXRoZXJBbW91bnQsIF90cmFuc2FjdGlvbkJ5dGVjb2RlKTsKICAgICAgICBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdLnN0YXRlID0gUHJvcG9zYWxTdGF0ZS5Qcm9wb3NlZDsKICAgICAgICBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdLnZvdGluZ0RlYWRsaW5lID0gbm93ICsgZGViYXRpbmdQZXJpb2QgKiAxIHNlY29uZHM7CiAgICAgICAgcHJvcG9zYWxzW19wcm9wb3NhbElEXS52b3Rlc051bWJlciA9IDA7CgogICAgICAgIFByb3Bvc2FsQWRkZWRFdmVudChfcHJvcG9zYWxJRCwgX2JlbmVmaWNpYXJ5LCBfZXRoZXJBbW91bnQsIF9kZXNjcmlwdGlvbik7CgogICAgICAgIHJldHVybiBfcHJvcG9zYWxJRDsKICAgIH0KCiAgICAvLyB2b3RlIGZvciBhbiBwcm9wb3NhbAogICAgZnVuY3Rpb24gdm90ZSgKICAgICAgICB1aW50MjU2IF9wcm9wb3NhbElELAogICAgICAgIGJvb2wgX2luU3VwcG9ydCwKICAgICAgICBzdHJpbmcgX2p1c3RpZmljYXRpb25UZXh0CiAgICApCiAgICAgICAgb25seUNvbmdyZXNzTWVtYmVycwogICAgewogICAgICAgIFByb3Bvc2FsIHAgPSBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdOwoKICAgICAgICBpZiAocC5zdGF0ZSAhPSBQcm9wb3NhbFN0YXRlLlByb3Bvc2VkKSB0aHJvdzsKICAgICAgICBpZiAocC52b3RlZFttc2cuc2VuZGVyXSA9PSB0cnVlKSB0aHJvdzsKCiAgICAgICAgdmFyIHZvdGVyVG9rZW5zID0gZGFzVG9rZW4uYmFsYW5jZU9mKG1zZy5zZW5kZXIpOwogICAgICAgIGJsb2NrVG9rZW5zKG1zZy5zZW5kZXIpOwoKICAgICAgICBwLnZvdGVkW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgICBwLnZvdGVzLnB1c2goVm90ZShtc2cuc2VuZGVyLCBfaW5TdXBwb3J0LCB2b3RlclRva2VucywgX2p1c3RpZmljYXRpb25UZXh0KSk7CiAgICAgICAgcC52b3Rlc051bWJlciArPSAxOwoKICAgICAgICBWb3RlZEV2ZW50KF9wcm9wb3NhbElELCBtc2cuc2VuZGVyLCBfaW5TdXBwb3J0LCB2b3RlclRva2VucywgX2p1c3RpZmljYXRpb25UZXh0KTsKICAgIH0KCiAgICAvLyBmaW5pc2ggdm90aW5nIG9uIGFuIHByb3Bvc2FsCiAgICBmdW5jdGlvbiBmaW5pc2hQcm9wb3NhbFZvdGluZyh1aW50MjU2IF9wcm9wb3NhbElEKSBvbmx5Q29uZ3Jlc3NNZW1iZXJzIHsKICAgICAgICBQcm9wb3NhbCBwID0gcHJvcG9zYWxzW19wcm9wb3NhbElEXTsKCiAgICAgICAgaWYgKG5vdyA8IHAudm90aW5nRGVhZGxpbmUpIHRocm93OwogICAgICAgIGlmIChwLnN0YXRlICE9IFByb3Bvc2FsU3RhdGUuUHJvcG9zZWQpIHRocm93OwoKICAgICAgICB2YXIgX3ZvdGVzTnVtYmVyID0gcC52b3Rlcy5sZW5ndGg7CiAgICAgICAgdWludDI1NiB0b2tlbnNGb3IgPSAwOwogICAgICAgIHVpbnQyNTYgdG9rZW5zQWdhaW5zdCA9IDA7CiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX3ZvdGVzTnVtYmVyOyBpKyspIHsKICAgICAgICAgICAgaWYgKHAudm90ZXNbaV0uaW5TdXBwb3J0KSB7CiAgICAgICAgICAgICAgICB0b2tlbnNGb3IgKz0gcC52b3Rlc1tpXS52b3RlclRva2VuczsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRva2Vuc0FnYWluc3QgKz0gcC52b3Rlc1tpXS52b3RlclRva2VuczsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdW5ibG9ja1Rva2VucyhwLnZvdGVzW2ldLnZvdGVyKTsKICAgICAgICB9CgogICAgICAgIGlmICgodG9rZW5zRm9yICsgdG9rZW5zQWdhaW5zdCkgPCBtaW5pbXVtUXVvcnVtKSB7CiAgICAgICAgICAgIHAuc3RhdGUgPSBQcm9wb3NhbFN0YXRlLk5vUXVvcnVtOwogICAgICAgICAgICBQcm9wb3NhbFRhbGxpZWRFdmVudChfcHJvcG9zYWxJRCwgZmFsc2UsIGZhbHNlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoKHRva2Vuc0ZvciAtIHRva2Vuc0FnYWluc3QpIDwgbWFyZ2luRm9yTWFqb3JpdHkpIHsKICAgICAgICAgICAgcC5zdGF0ZSA9IFByb3Bvc2FsU3RhdGUuUmVqZWN0ZWQ7CiAgICAgICAgICAgIFByb3Bvc2FsVGFsbGllZEV2ZW50KF9wcm9wb3NhbElELCB0cnVlLCBmYWxzZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcC5zdGF0ZSA9IFByb3Bvc2FsU3RhdGUuUGFzc2VkOwogICAgICAgIFByb3Bvc2FsVGFsbGllZEV2ZW50KF9wcm9wb3NhbElELCB0cnVlLCB0cnVlKTsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgLy8gZXhlY3V0ZSBwYXNzZWQgcHJvcG9zYWwKICAgIGZ1bmN0aW9uIGV4ZWN1dGVQcm9wb3NhbCh1aW50MjU2IF9wcm9wb3NhbElELCBieXRlcyBfdHJhbnNhY3Rpb25CeXRlY29kZSkgb25seUNvbmdyZXNzTWVtYmVycyB7CiAgICAgICAgUHJvcG9zYWwgcCA9IHByb3Bvc2Fsc1tfcHJvcG9zYWxJRF07CgogICAgICAgIGlmIChwLnN0YXRlICE9IFByb3Bvc2FsU3RhdGUuUGFzc2VkKSB0aHJvdzsKCiAgICAgICAgcC5zdGF0ZSA9IFByb3Bvc2FsU3RhdGUuRXhlY3V0ZWQ7CiAgICAgICAgaWYgKCFwLmJlbmVmaWNpYXJ5LmNhbGwudmFsdWUocC5ldGhlckFtb3VudCAqIDEgZXRoZXIpKF90cmFuc2FjdGlvbkJ5dGVjb2RlKSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIFByb3Bvc2FsRXhlY3V0ZWRFdmVudChfcHJvcG9zYWxJRCk7CiAgICB9Cn0='.
	

]
