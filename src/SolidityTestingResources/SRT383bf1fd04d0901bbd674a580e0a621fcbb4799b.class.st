Class {
	#name : #SRT383bf1fd04d0901bbd674a580e0a621fcbb4799b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT383bf1fd04d0901bbd674a580e0a621fcbb4799b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLy8gaW5zcGlyZWQgYnkKLy8gaHR0cHM6Ly9naXRodWIuY29tL2F4aW9temVuL2NyeXB0b2tpdHRpZXMtYm91bnR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9LaXR0eUFjY2Vzc0NvbnRyb2wuc29sCmNvbnRyYWN0IEFjY2Vzc0NvbnRyb2wgewogICAgLy8vIEBkZXYgVGhlIGFkZHJlc3NlcyBvZiB0aGUgYWNjb3VudHMgKG9yIGNvbnRyYWN0cykgdGhhdCBjYW4gZXhlY3V0ZSBhY3Rpb25zIHdpdGhpbiBlYWNoIHJvbGVzCiAgICBhZGRyZXNzIHB1YmxpYyBjZW9BZGRyZXNzOwogICAgYWRkcmVzcyBwdWJsaWMgY29vQWRkcmVzczsKCiAgICAvLy8gQGRldiBLZWVwcyB0cmFjayB3aGV0aGVyIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuIFdoZW4gdGhhdCBpcyB0cnVlLCBtb3N0IGFjdGlvbnMgYXJlIGJsb2NrZWQKICAgIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKICAgIC8vLyBAZGV2IFRoZSBBY2Nlc3NDb250cm9sIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIEMgcm9sZXMgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIgYWNjb3VudAogICAgZnVuY3Rpb24gQWNjZXNzQ29udHJvbCgpIHB1YmxpYyB7CiAgICAgICAgY2VvQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgY29vQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLy8vIEBkZXYgQWNjZXNzIG1vZGlmaWVyIGZvciBDRU8tb25seSBmdW5jdGlvbmFsaXR5CiAgICBtb2RpZmllciBvbmx5Q0VPKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjZW9BZGRyZXNzKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLyBAZGV2IEFjY2VzcyBtb2RpZmllciBmb3IgQ09PLW9ubHkgZnVuY3Rpb25hbGl0eQogICAgbW9kaWZpZXIgb25seUNPTygpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY29vQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBBY2Nlc3MgbW9kaWZpZXIgZm9yIGFueSBDTGV2ZWwgZnVuY3Rpb25hbGl0eQogICAgbW9kaWZpZXIgb25seUNMZXZlbCgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyB8fCBtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MpOwogICAgICAgIF87CiAgICB9CgogICAgLy8vIEBkZXYgQXNzaWducyBhIG5ldyBhZGRyZXNzIHRvIGFjdCBhcyB0aGUgQ0VPLiBPbmx5IGF2YWlsYWJsZSB0byB0aGUgY3VycmVudCBDRU8KICAgIC8vLyBAcGFyYW0gX25ld0NFTyBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IENFTwogICAgZnVuY3Rpb24gc2V0Q0VPKGFkZHJlc3MgX25ld0NFTykgcHVibGljIG9ubHlDRU8gewogICAgICAgIHJlcXVpcmUoX25ld0NFTyAhPSBhZGRyZXNzKDApKTsKICAgICAgICBjZW9BZGRyZXNzID0gX25ld0NFTzsKICAgIH0KCiAgICAvLy8gQGRldiBBc3NpZ25zIGEgbmV3IGFkZHJlc3MgdG8gYWN0IGFzIHRoZSBDT08uIE9ubHkgYXZhaWxhYmxlIHRvIHRoZSBjdXJyZW50IENFTwogICAgLy8vIEBwYXJhbSBfbmV3Q09PIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgQ09PCiAgICBmdW5jdGlvbiBzZXRDT08oYWRkcmVzcyBfbmV3Q09PKSBwdWJsaWMgb25seUNFTyB7CiAgICAgICAgcmVxdWlyZShfbmV3Q09PICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGNvb0FkZHJlc3MgPSBfbmV3Q09POwogICAgfQoKICAgIC8vLyBAZGV2IE1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgcGF1c2VkCiAgICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBNb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgSVMgcGF1c2VkCiAgICBtb2RpZmllciB3aGVuUGF1c2VkIHsKICAgICAgICByZXF1aXJlKHBhdXNlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBQYXVzZSB0aGUgc21hcnQgY29udHJhY3QuIE9ubHkgY2FuIGJlIGNhbGxlZCBieSB0aGUgQ0VPCiAgICBmdW5jdGlvbiBwYXVzZSgpIHB1YmxpYyBvbmx5Q0VPIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIHBhdXNlZCA9IHRydWU7CiAgICB9CgogICAgLy8vIEBkZXYgVW5wYXVzZXMgdGhlIHNtYXJ0IGNvbnRyYWN0LiBPbmx5IGNhbiBiZSBjYWxsZWQgYnkgdGhlIENFTwogICAgZnVuY3Rpb24gdW5wYXVzZSgpIHB1YmxpYyBvbmx5Q0VPIHdoZW5QYXVzZWQgewogICAgICAgIHBhdXNlZCA9IGZhbHNlOwogICAgfQp9CgoKLyoqCiAqIEludGVyZmFjZSBmb3IgcmVxdWlyZWQgZnVuY3Rpb25hbGl0eSBpbiB0aGUgRVJDNzIxIHN0YW5kYXJkCiAqIGZvciBub24tZnVuZ2libGUgdG9rZW5zLgogKgogKiBBdXRob3I6IE5hZGF2IEhvbGxhbmRlciAobmFkYXYgYXQgZGhhcm1hLmlvKQogKiBodHRwczovL2dpdGh1Yi5jb20vZGhhcm1hcHJvdG9jb2wvTm9uRnVuZ2libGVUb2tlbi9ibG9iL21hc3Rlci9jb250cmFjdHMvRVJDNzIxLnNvbAogKi8KY29udHJhY3QgRVJDNzIxIHsKICAgIC8vIEV2ZW50cwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF90b2tlbklkKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfYXBwcm92ZWQsIHVpbnQyNTYgX3Rva2VuSWQpOwoKICAgIC8vLyBGb3IgcXVlcnlpbmcgdG90YWxTdXBwbHkgb2YgdG9rZW4uCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KTsKCiAgICAvLy8gRm9yIHF1ZXJ5aW5nIGJhbGFuY2Ugb2YgYSBwYXJ0aWN1bGFyIGFjY291bnQuCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmb3IgYmFsYW5jZSBxdWVyeS4KICAgIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2JhbGFuY2UpOwoKICAgIC8vLyBGb3IgcXVlcnlpbmcgb3duZXIgb2YgdG9rZW4uCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSB0b2tlbklEIGZvciBvd25lciBpbnF1aXJ5LgogICAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIpOwoKICAgIC8vLyBAbm90aWNlIEdyYW50IGFub3RoZXIgYWRkcmVzcyB0aGUgcmlnaHQgdG8gdHJhbnNmZXIgdG9rZW4gdmlhIHRha2VPd25lcnNoaXAoKSBhbmQgdHJhbnNmZXJGcm9tKCkKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIGJlIGdyYW50ZWQgdHJhbnNmZXIgYXBwcm92YWwuIFBhc3MgYWRkcmVzcygwKSB0bwogICAgLy8vICBjbGVhciBhbGwgYXBwcm92YWxzLgogICAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgSUQgb2YgdGhlIFRva2VuIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGlmIHRoaXMgY2FsbCBzdWNjZWVkcy4KICAgIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CgogICAgLy8gTk9UIElNUExFTUVOVEVECiAgICAvLyBmdW5jdGlvbiBnZXRBcHByb3ZlZCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIF9hcHByb3ZlZCk7CgogICAgLy8vIFRoaXJkLXBhcnR5IGluaXRpYXRlcyB0cmFuc2ZlciBvZiB0b2tlbiBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8uCiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgZnJvbS4KICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgdG8uCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogICAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwoKICAgIC8vLyBPd25lciBpbml0YXRlcyB0aGUgdHJhbnNmZXIgb2YgdGhlIHRva2VuIHRvIGFub3RoZXIgYWNjb3VudC4KICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQsIGNhbiBiZSBhIHVzZXIgb3IgY29udHJhY3QuCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgdG9rZW4gdG8gdHJhbnNmZXIuCiAgICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKCiAgICAvLy8KICAgIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sIF9pbXBsZW1lbnRzRVJDNzIxKTsKCiAgICAvLyBFWFRSQQogICAgLy8vIEBub3RpY2UgQWxsb3cgcHJlLWFwcHJvdmVkIHVzZXIgdG8gdGFrZSBvd25lcnNoaXAgb2YgYSB0b2tlbi4KICAgIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIElEIG9mIHRoZSB0b2tlbiB0aGF0IGNhbiBiZSB0cmFuc2ZlcnJlZCBpZiB0aGlzIGNhbGwgc3VjY2VlZHMuCiAgICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogICAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7Cn0KCgpjb250cmFjdCBEZXRhaWxlZEVSQzcyMSBpcyBFUkM3MjEgewoJZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBfbmFtZSk7CglmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgX3N5bWJvbCk7Cn0KCgpjb250cmFjdCBDcnlwdG9Eb2dnaWVzIGlzIEFjY2Vzc0NvbnRyb2wsIERldGFpbGVkRVJDNzIxIHsKCXVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKCWV2ZW50IFRva2VuQ3JlYXRlZCh1aW50MjU2IHRva2VuSWQsIHN0cmluZyBuYW1lLCBieXRlczUgZG5hLCB1aW50MjU2IHByaWNlLCBhZGRyZXNzIG93bmVyKTsKCWV2ZW50IFRva2VuU29sZCgKCQl1aW50MjU2IGluZGV4ZWQgdG9rZW5JZCwKCQlzdHJpbmcgbmFtZSwKCQlieXRlczUgZG5hLAoJCXVpbnQyNTYgc2VsbGluZ1ByaWNlLAoJCXVpbnQyNTYgbmV3UHJpY2UsCgkJYWRkcmVzcyBpbmRleGVkIG9sZE93bmVyLAoJCWFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcgoJCSk7CgoJbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwcml2YXRlIHRva2VuSWRUb093bmVyOwoJbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIHRva2VuSWRUb1ByaWNlOwoJbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIG93bmVyc2hpcFRva2VuQ291bnQ7CgltYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgdG9rZW5JZFRvQXBwcm92ZWQ7CgoJc3RydWN0IERvZ2d5IHsKCQlzdHJpbmcgbmFtZTsKCQlieXRlczUgZG5hOwoJfQoKCURvZ2d5W10gcHJpdmF0ZSBkb2dnaWVzOwoKCXVpbnQyNTYgcHJpdmF0ZSBzdGFydGluZ1ByaWNlID0gMC4wMSBldGhlcjsKCWJvb2wgcHJpdmF0ZSBlcmM3MjFFbmFibGVkID0gZmFsc2U7CgoJbW9kaWZpZXIgb25seUVSQzcyMSgpIHsKCQlyZXF1aXJlKGVyYzcyMUVuYWJsZWQpOwoJCV87Cgl9CgoJZnVuY3Rpb24gY3JlYXRlVG9rZW4oc3RyaW5nIF9uYW1lLCBhZGRyZXNzIF9vd25lciwgdWludDI1NiBfcHJpY2UpIHB1YmxpYyBvbmx5Q0xldmVsIHsKCQlyZXF1aXJlKF9vd25lciAhPSBhZGRyZXNzKDApKTsKCQlyZXF1aXJlKF9wcmljZSA+PSBzdGFydGluZ1ByaWNlKTsKCgkJYnl0ZXM1IF9kbmEgPSBfZ2VuZXJhdGVSYW5kb21EbmEoKTsKCQlfY3JlYXRlVG9rZW4oX25hbWUsIF9kbmEsIF9vd25lciwgX3ByaWNlKTsKCX0KCglmdW5jdGlvbiBjcmVhdGVUb2tlbihzdHJpbmcgX25hbWUpIHB1YmxpYyBvbmx5Q0xldmVsIHsKCQlieXRlczUgX2RuYSA9IF9nZW5lcmF0ZVJhbmRvbURuYSgpOwoJCV9jcmVhdGVUb2tlbihfbmFtZSwgX2RuYSwgYWRkcmVzcyh0aGlzKSwgc3RhcnRpbmdQcmljZSk7Cgl9CgoJZnVuY3Rpb24gX2dlbmVyYXRlUmFuZG9tRG5hKCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJ5dGVzNSkgewoJCXVpbnQyNTYgbGFzdEJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyIC0gMTsKCQlieXRlczMyIGhhc2hWYWwgPSBieXRlczMyKGJsb2NrLmJsb2NraGFzaChsYXN0QmxvY2tOdW1iZXIpKTsKCQlieXRlczUgZG5hID0gYnl0ZXM1KChoYXNoVmFsICYgMHhmZmZmZmZmZikgPDwgMjE2KTsKCQlyZXR1cm4gZG5hOwoJfQoKCWZ1bmN0aW9uIF9jcmVhdGVUb2tlbihzdHJpbmcgX25hbWUsIGJ5dGVzNSBfZG5hLCBhZGRyZXNzIF9vd25lciwgdWludDI1NiBfcHJpY2UpIHByaXZhdGUgewoJCURvZ2d5IG1lbW9yeSBfZG9nZ3kgPSBEb2dneSh7CgkJCW5hbWU6IF9uYW1lLAoJCQlkbmE6IF9kbmEKCQl9KTsKCQl1aW50MjU2IG5ld1Rva2VuSWQgPSBkb2dnaWVzLnB1c2goX2RvZ2d5KSAtIDE7CgkJdG9rZW5JZFRvUHJpY2VbbmV3VG9rZW5JZF0gPSBfcHJpY2U7CgoJCVRva2VuQ3JlYXRlZChuZXdUb2tlbklkLCBfbmFtZSwgX2RuYSwgX3ByaWNlLCBfb3duZXIpOwoKCQlfdHJhbnNmZXIoYWRkcmVzcygwKSwgX293bmVyLCBuZXdUb2tlbklkKTsKCX0KCglmdW5jdGlvbiBnZXRUb2tlbih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICgKCQlzdHJpbmcgX3Rva2VuTmFtZSwKCQlieXRlczUgX2RuYSwKCQl1aW50MjU2IF9wcmljZSwKCQl1aW50MjU2IF9uZXh0UHJpY2UsCgkJYWRkcmVzcyBfb3duZXIKCSkgewoJCV90b2tlbk5hbWUgPSBkb2dnaWVzW190b2tlbklkXS5uYW1lOwoJCV9kbmEgPSBkb2dnaWVzW190b2tlbklkXS5kbmE7CgkJX3ByaWNlID0gdG9rZW5JZFRvUHJpY2VbX3Rva2VuSWRdOwoJCV9uZXh0UHJpY2UgPSBuZXh0UHJpY2VPZihfdG9rZW5JZCk7CgkJX293bmVyID0gdG9rZW5JZFRvT3duZXJbX3Rva2VuSWRdOwoJfQoKCWZ1bmN0aW9uIGdldEFsbFRva2VucygpIHB1YmxpYyB2aWV3IHJldHVybnMgKAoJCXVpbnQyNTZbXSwKCQl1aW50MjU2W10sCgkJYWRkcmVzc1tdCgkpIHsKCQl1aW50MjU2IHRvdGFsID0gdG90YWxTdXBwbHkoKTsKCQl1aW50MjU2W10gbWVtb3J5IHByaWNlcyA9IG5ldyB1aW50MjU2W10odG90YWwpOwoJCXVpbnQyNTZbXSBtZW1vcnkgbmV4dFByaWNlcyA9IG5ldyB1aW50MjU2W10odG90YWwpOwoJCWFkZHJlc3NbXSBtZW1vcnkgb3duZXJzID0gbmV3IGFkZHJlc3NbXSh0b3RhbCk7CgoJCWZvciAodWludDI1NiBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHsKCQkJcHJpY2VzW2ldID0gdG9rZW5JZFRvUHJpY2VbaV07CgkJCW5leHRQcmljZXNbaV0gPSBuZXh0UHJpY2VPZihpKTsKCQkJb3duZXJzW2ldID0gdG9rZW5JZFRvT3duZXJbaV07CgkJfQoKCQlyZXR1cm4gKHByaWNlcywgbmV4dFByaWNlcywgb3duZXJzKTsKCX0KCglmdW5jdGlvbiB0b2tlbnNPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2W10pIHsKCQl1aW50MjU2IHRva2VuQ291bnQgPSBiYWxhbmNlT2YoX293bmVyKTsKCQlpZiAodG9rZW5Db3VudCA9PSAwKSB7CgkJCXJldHVybiBuZXcgdWludDI1NltdKDApOwoJCX0gZWxzZSB7CgkJCXVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXSh0b2tlbkNvdW50KTsKCQkJdWludDI1NiB0b3RhbCA9IHRvdGFsU3VwcGx5KCk7CgkJCXVpbnQyNTYgcmVzdWx0SW5kZXggPSAwOwoKCQkJZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgdG90YWw7IGkrKykgewoJCQkJaWYgKHRva2VuSWRUb093bmVyW2ldID09IF9vd25lcikgewoJCQkJCXJlc3VsdFtyZXN1bHRJbmRleF0gPSBpOwoJCQkJCXJlc3VsdEluZGV4Kys7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIHJlc3VsdDsKCQl9Cgl9CgoJZnVuY3Rpb24gd2l0aGRyYXdCYWxhbmNlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyBvbmx5Q0VPIHsKCQlyZXF1aXJlKF9hbW91bnQgPD0gdGhpcy5iYWxhbmNlKTsKCgkJaWYgKF9hbW91bnQgPT0gMCkgewoJCQlfYW1vdW50ID0gdGhpcy5iYWxhbmNlOwoJCX0KCgkJaWYgKF90byA9PSBhZGRyZXNzKDApKSB7CgkJCWNlb0FkZHJlc3MudHJhbnNmZXIoX2Ftb3VudCk7CgkJfSBlbHNlIHsKCQkJX3RvLnRyYW5zZmVyKF9hbW91bnQpOwoJCX0KCX0KCglmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgcGF5YWJsZSB3aGVuTm90UGF1c2VkIHsKCQlhZGRyZXNzIG9sZE93bmVyID0gb3duZXJPZihfdG9rZW5JZCk7CgkJYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CgkJdWludDI1NiBzZWxsaW5nUHJpY2UgPSBwcmljZU9mKF90b2tlbklkKTsKCgkJcmVxdWlyZShvbGRPd25lciAhPSBhZGRyZXNzKDApKTsKCQlyZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwoJCXJlcXVpcmUob2xkT3duZXIgIT0gbmV3T3duZXIpOwoJCXJlcXVpcmUoIV9pc0NvbnRyYWN0KG5ld093bmVyKSk7CgkJcmVxdWlyZShzZWxsaW5nUHJpY2UgPiAwKTsKCQlyZXF1aXJlKG1zZy52YWx1ZSA+PSBzZWxsaW5nUHJpY2UpOwoKCQlfdHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfdG9rZW5JZCk7CgkJdG9rZW5JZFRvUHJpY2VbX3Rva2VuSWRdID0gbmV4dFByaWNlT2YoX3Rva2VuSWQpOwoJCVRva2VuU29sZCgKCQkJX3Rva2VuSWQsCgkJCWRvZ2dpZXNbX3Rva2VuSWRdLm5hbWUsCgkJCWRvZ2dpZXNbX3Rva2VuSWRdLmRuYSwKCQkJc2VsbGluZ1ByaWNlLAoJCQlwcmljZU9mKF90b2tlbklkKSwKCQkJb2xkT3duZXIsCgkJCW5ld093bmVyCgkJKTsKCgkJdWludDI1NiBleGNlc3MgPSBtc2cudmFsdWUuc3ViKHNlbGxpbmdQcmljZSk7CgkJdWludDI1NiBjb250cmFjdEN1dCA9IHNlbGxpbmdQcmljZS5tdWwoNikuZGl2KDEwMCk7IC8vIDYlIGN1dAoKCQlpZiAob2xkT3duZXIgIT0gYWRkcmVzcyh0aGlzKSkgewoJCQlvbGRPd25lci50cmFuc2ZlcihzZWxsaW5nUHJpY2Uuc3ViKGNvbnRyYWN0Q3V0KSk7CgkJfQoKCQlpZiAoZXhjZXNzID4gMCkgewoJCQluZXdPd25lci50cmFuc2ZlcihleGNlc3MpOwoJCX0KCX0KCglmdW5jdGlvbiBwcmljZU9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3ByaWNlKSB7CgkJcmV0dXJuIHRva2VuSWRUb1ByaWNlW190b2tlbklkXTsKCX0KCgl1aW50MjU2IHByaXZhdGUgaW5jcmVhc2VMaW1pdDEgPSAwLjAyIGV0aGVyOwoJdWludDI1NiBwcml2YXRlIGluY3JlYXNlTGltaXQyID0gMC41IGV0aGVyOwoJdWludDI1NiBwcml2YXRlIGluY3JlYXNlTGltaXQzID0gMi4wIGV0aGVyOwoJdWludDI1NiBwcml2YXRlIGluY3JlYXNlTGltaXQ0ID0gNS4wIGV0aGVyOwoKCWZ1bmN0aW9uIG5leHRQcmljZU9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX25leHRQcmljZSkgewoJCXVpbnQyNTYgX3ByaWNlID0gcHJpY2VPZihfdG9rZW5JZCk7CgkJaWYgKF9wcmljZSA8IGluY3JlYXNlTGltaXQxKSB7CgkJCXJldHVybiBfcHJpY2UubXVsKDIwMCkuZGl2KDk1KTsKCQl9IGVsc2UgaWYgKF9wcmljZSA8IGluY3JlYXNlTGltaXQyKSB7CgkJCXJldHVybiBfcHJpY2UubXVsKDEzNSkuZGl2KDk2KTsKCQl9IGVsc2UgaWYgKF9wcmljZSA8IGluY3JlYXNlTGltaXQzKSB7CgkJCXJldHVybiBfcHJpY2UubXVsKDEyNSkuZGl2KDk3KTsKCQl9IGVsc2UgaWYgKF9wcmljZSA8IGluY3JlYXNlTGltaXQ0KSB7CgkJCXJldHVybiBfcHJpY2UubXVsKDExNykuZGl2KDk3KTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gX3ByaWNlLm11bCgxMTUpLmRpdig5OCk7CgkJfQoJfQoKCWZ1bmN0aW9uIGVuYWJsZUVSQzcyMSgpIHB1YmxpYyBvbmx5Q0VPIHsKCQllcmM3MjFFbmFibGVkID0gdHJ1ZTsKCX0KCglmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KSB7CgkJX3RvdGFsU3VwcGx5ID0gZG9nZ2llcy5sZW5ndGg7Cgl9CgoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9iYWxhbmNlKSB7CgkJX2JhbGFuY2UgPSBvd25lcnNoaXBUb2tlbkNvdW50W19vd25lcl07Cgl9CgoJZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIF9vd25lcikgewoJCV9vd25lciA9IHRva2VuSWRUb093bmVyW190b2tlbklkXTsKCX0KCglmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCBvbmx5RVJDNzIxIHsKCQlyZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CgkJdG9rZW5JZFRvQXBwcm92ZWRbX3Rva2VuSWRdID0gX3RvOwoJCUFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwoJfQoKCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIHdoZW5Ob3RQYXVzZWQgb25seUVSQzcyMSB7CgkJcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgkJcmVxdWlyZShfb3ducyhfZnJvbSwgX3Rva2VuSWQpKTsKCQlyZXF1aXJlKF9hcHByb3ZlZChtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwoKCQlfdHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwoJfQoKCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCBvbmx5RVJDNzIxIHsKCQlyZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCQlyZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CgoJCV90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKCX0KCglmdW5jdGlvbiBpbXBsZW1lbnRzRVJDNzIxKCkgcHVibGljIHZpZXcgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CgkJcmV0dXJuIGVyYzcyMUVuYWJsZWQ7Cgl9CgoJZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCBvbmx5RVJDNzIxIHsKCQlyZXF1aXJlKF9hcHByb3ZlZChtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwoJCV90cmFuc2Zlcih0b2tlbklkVG9Pd25lcltfdG9rZW5JZF0sIG1zZy5zZW5kZXIsIF90b2tlbklkKTsKCX0KCglmdW5jdGlvbiBuYW1lKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIF9uYW1lKSB7CgkJX25hbWUgPSAiQ3J5cHRvRG9nZ2llcyI7Cgl9CgoJZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIF9zeW1ib2wpIHsKCQlfc3ltYm9sID0gIkNEVCI7Cgl9CgoJZnVuY3Rpb24gX293bnMoYWRkcmVzcyBfY2xhaW1hbnQsIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CgkJcmV0dXJuIHRva2VuSWRUb093bmVyW190b2tlbklkXSA9PSBfY2xhaW1hbnQ7Cgl9CgoJZnVuY3Rpb24gX2FwcHJvdmVkKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewoJCXJldHVybiB0b2tlbklkVG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX3RvOwoJfQoKCWZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CgkJb3duZXJzaGlwVG9rZW5Db3VudFtfdG9dKys7CgkJdG9rZW5JZFRvT3duZXJbX3Rva2VuSWRdID0gX3RvOwoKCQlpZiAoX2Zyb20gIT0gYWRkcmVzcygwKSkgewoJCQlvd25lcnNoaXBUb2tlbkNvdW50W19mcm9tXS0tOwoJCQlkZWxldGUgdG9rZW5JZFRvQXBwcm92ZWRbX3Rva2VuSWRdOwoJCX0KCgkJVHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwoJfQoKCWZ1bmN0aW9uIF9pc0NvbnRyYWN0KGFkZHJlc3MgYWRkcikgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKCQl1aW50MjU2IHNpemU7CgkJYXNzZW1ibHkgeyBzaXplIDo9IGV4dGNvZGVzaXplKGFkZHIpIH0KCQlyZXR1cm4gc2l6ZSA+IDA7Cgl9Cn0KCgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICAvKioKICAgICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAoYSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgICAqLwogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAgICovCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQ=='.
	

]
