Class {
	#name : #SRT8b34fbc553db3462ad4909f2e5577cc22f63c216,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8b34fbc553db3462ad4909f2e5577cc22f63c216 >> base64 [
	^ 'LyoKCiAgQ29weXJpZ2h0IDIwMTcgTG9vcHJpbmcgUHJvamVjdCBMdGQgKExvb3ByaW5nIEZvdW5kYXRpb24pLgoKICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgogIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoKICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgoqLwpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBNYXRoCiAqIEBkZXYgQXNzb3J0ZWQgbWF0aCBvcGVyYXRpb25zCiAqLwoKbGlicmFyeSBNYXRoIHsKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KfQoKLy8gQWJzdHJhY3QgY29udHJhY3QgZm9yIHRoZSBmdWxsIEVSQyAyMCBUb2tlbiBzdGFuZGFyZAovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKCmNvbnRyYWN0IFRva2VuIHsKICAgIC8qIFRoaXMgaXMgYSBzbGlnaHQgY2hhbmdlIHRvIHRoZSBFUkMyMCBiYXNlIHN0YW5kYXJkLgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7CiAgICBpcyByZXBsYWNlZCB3aXRoOgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBUaGlzIGF1dG9tYXRpY2FsbHkgY3JlYXRlcyBhIGdldHRlciBmdW5jdGlvbiBmb3IgdGhlIHRvdGFsU3VwcGx5LgogICAgVGhpcyBpcyBtb3ZlZCB0byB0aGUgYmFzZSBjb250cmFjdCBzaW5jZSBwdWJsaWMgZ2V0dGVyIGZ1bmN0aW9ucyBhcmUgbm90CiAgICBjdXJyZW50bHkgcmVjb2duaXNlZCBhcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgbWF0Y2hpbmcgYWJzdHJhY3QKICAgIGZ1bmN0aW9uIGJ5IHRoZSBjb21waWxlci4KICAgICovCiAgICAvLy8gdG90YWwgYW1vdW50IG9mIHRva2VucwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogICAgLy8vIEByZXR1cm4gVGhlIGJhbGFuY2UKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlcgogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9CgoKLy8vIEB0aXRsZSBNaWQtVGVhbSBIb2xkaW5nIEluY2VudGl2ZSBQcm9ncmFtCi8vLyBAYXV0aG9yIERhbmllbCBXYW5nIC0gPDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iNTYzMjM3MzgzZjMzM2ExNjNhMzkzOTI2MjQzZjM4MzE3ODM5MjQzMSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+LCBLb25nbGlhbmcgWmhvbmcgLSA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI4ZGU2ZTJlM2VhZTFlNGVjZTNlYWNkZTFlMmUyZmRmZmU0ZTNlYWEzZTJmZmVhIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPj4uCi8vLyBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIHZpc2l0IGh0dHBzOi8vbG9vcHJpbmcub3JnLgpjb250cmFjdCBMUkNNaWRUZXJtSG9sZGluZ0NvbnRyYWN0IHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogICAgdXNpbmcgTWF0aCBmb3IgdWludDsKCiAgICAvLyBEdXJpbmcgdGhlIGZpcnN0IDYwIGRheXMgb2YgZGVwbG95bWVudCwgdGhpcyBjb250cmFjdCBvcGVucyBmb3IgZGVwb3NpdCBvZiBMUkMKICAgIC8vIGluIGV4Y2hhbmdlIG9mIEVUSC4KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IERFUE9TSVRfV0lORE9XICAgICAgICAgICAgICAgICA9IDYwIGRheXM7CgogICAgLy8gRm9yIGVhY2ggYWRkcmVzcywgaXRzIExSQyBjYW4gb25seSBiZSB3aXRoZHJhd24gYmV0d2VlbiAxODAgYW5kIDI3MCBkYXlzIGFmdGVyIExSQyBkZXBvc2l0LAogICAgLy8gd2hpY2ggbWVhbnM6CiAgICAvLyAgICAxKSBMUkMgYXJlIGxvY2tlZCBkdXJpbmcgdGhlIGZpcnN0IDE4MCBkYXlzLAogICAgLy8gICAgMikgTFJDIHdpbGwgYmUgc29sZCB0byB0aGUgYG93bmVyYCB3aXRoIHRoZSBzcGVjaWZpZWQgYFJBVEVgIDI3MCBkYXlzIGFmdGVyIHRoZSBkZXBvc2l0LgogICAgdWludCBwdWJsaWMgY29uc3RhbnQgV0lUSERSQVdBTF9ERUxBWSAgICAgICAgICAgICAgID0gMTgwIGRheXM7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBXSVRIRFJBV0FMX1dJTkRPVyAgICAgICAgICAgICAgPSA5MCAgZGF5czsKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNQVhfTFJDX0RFUE9TSVRfUEVSX0FERFJFU1MgICAgPSAxNTAwMDAgZXRoZXI7IC8vID0gMjAgRVRIICogNzUwMAoKICAgIC8vIDc1MDAgTFJDIGZvciAxIEVUSC4gVGhpcyBpcyB0aGUgYmVzdCB0b2tlbiBzYWxlIHJhdGUgZXZlci4KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFJBVEUgICAgICAgPSA3NTAwOwoKICAgIGFkZHJlc3MgcHVibGljIGxyY1Rva2VuQWRkcmVzcyAgPSAweDA7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lciAgICAgICAgICAgID0gMHgwOwoKICAgIC8vIFNvbWUgc3RhdHMKICAgIHVpbnQgcHVibGljIGxyY1JlY2VpdmVkICAgICAgICAgPSAwOwogICAgdWludCBwdWJsaWMgbHJjU2VudCAgICAgICAgICAgICA9IDA7CiAgICB1aW50IHB1YmxpYyBldGhSZWNlaXZlZCAgICAgICAgID0gMDsKICAgIHVpbnQgcHVibGljIGV0aFNlbnQgICAgICAgICAgICAgPSAwOwoKICAgIHVpbnQgcHVibGljIGRlcG9zaXRTdGFydFRpbWUgICAgPSAwOwogICAgdWludCBwdWJsaWMgZGVwb3NpdFN0b3BUaW1lICAgICA9IDA7CgogICAgYm9vbCBwdWJsaWMgY2xvc2VkICAgICAgICAgICAgICA9IGZhbHNlOwoKICAgIHN0cnVjdCBSZWNvcmQgewogICAgICAgIHVpbnQgbHJjQW1vdW50OwogICAgICAgIHVpbnQgdGltZXN0YW1wOwogICAgfQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gUmVjb3JkKSByZWNvcmRzOwoKICAgIC8qCiAgICAgKiBFVkVOVFMKICAgICAqLwogICAgLy8vIEVtaXR0ZWQgd2hlbiBwcm9ncmFtIHN0YXJ0cy4KICAgIGV2ZW50IFN0YXJ0ZWQodWludCBfdGltZSk7CgogICAgLy8vIEVtaXR0ZWQgZm9yIGVhY2ggc3VjdWVzc2Z1bCBkZXBvc2l0LgogICAgdWludCBwdWJsaWMgZGVwb3NpdElkID0gMDsKICAgIGV2ZW50IERlcG9zaXQodWludCBfZGVwb3NpdElkLCBhZGRyZXNzIGluZGV4ZWQgX2FkZHIsIHVpbnQgX2V0aEFtb3VudCwgdWludCBfbHJjQW1vdW50KTsKCiAgICAvLy8gRW1pdHRlZCBmb3IgZWFjaCBzdWN1ZXNzZnVsIHdpdGhkcmF3YWwuCiAgICB1aW50IHB1YmxpYyB3aXRoZHJhd0lkID0gMDsKICAgIGV2ZW50IFdpdGhkcmF3YWwodWludCBfd2l0aGRyYXdJZCwgYWRkcmVzcyBpbmRleGVkIF9hZGRyLCB1aW50IF9ldGhBbW91bnQsIHVpbnQgX2xyY0Ftb3VudCk7CgogICAgLy8vIEVtaXR0ZWQgd2hlbiB0aGlzIGNvbnRyYWN0IGlzIGNsb3NlZC4KICAgIGV2ZW50IENsb3NlZCh1aW50IF9ldGhBbW91bnQsIHVpbnQgX2xyY0Ftb3VudCk7CgogICAgLy8vIEVtaXR0ZWQgd2hlbiBFVEggYXJlIGRyYWluZWQuCiAgICBldmVudCBEcmFpbmVkKHVpbnQgX2V0aEFtb3VudCk7CgogICAgLy8vIENPTlNUUlVDVE9SCiAgICAvLy8gQGRldiBJbml0aWFsaXplIGFuZCBzdGFydCB0aGUgY29udHJhY3QuCiAgICAvLy8gQHBhcmFtIF9scmNUb2tlbkFkZHJlc3MgTFJDIEVSQzIwIHRva2VuIGFkZHJlc3MKICAgIC8vLyBAcGFyYW0gX293bmVyIE93bmVyIG9mIHRoaXMgY29udHJhY3QKICAgIGZ1bmN0aW9uIExSQ01pZFRlcm1Ib2xkaW5nQ29udHJhY3QoYWRkcmVzcyBfbHJjVG9rZW5BZGRyZXNzLCBhZGRyZXNzIF9vd25lcikgewogICAgICAgIHJlcXVpcmUoX2xyY1Rva2VuQWRkcmVzcyAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF9vd25lciAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgbHJjVG9rZW5BZGRyZXNzID0gX2xyY1Rva2VuQWRkcmVzczsKICAgICAgICBvd25lciA9IF9vd25lcjsKICAgIH0KCiAgICAvKgogICAgICogUFVCTElDIEZVTkNUSU9OUwogICAgICovCgogICAgLy8vIEBkZXYgR2V0IGJhY2sgRVRIIHRvIGBvd25lcmAuCiAgICAvLy8gQHBhcmFtIGV0aEFtb3VudCBBbW91bnQgb2YgRVRIIHRvIGRyYWluIGJhY2sgdG8gb3duZXIKICAgIGZ1bmN0aW9uIGRyYWluKHVpbnQgZXRoQW1vdW50KSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSghY2xvc2VkKTsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwoKICAgICAgICB1aW50IGFtb3VudCA9IGV0aEFtb3VudC5taW4yNTYodGhpcy5iYWxhbmNlKTsKICAgICAgICByZXF1aXJlKGFtb3VudCA+IDApOwogICAgICAgIG93bmVyLnRyYW5zZmVyKGFtb3VudCk7CgogICAgICAgIERyYWluZWQoYW1vdW50KTsKICAgIH0KCiAgICAvLy8gQGRldiBTZXQgZGVwb3NpdFN0YXJ0VGltZQogICAgZnVuY3Rpb24gc3RhcnQoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgcmVxdWlyZShkZXBvc2l0U3RhcnRUaW1lID09IDApOwoKICAgICAgICBkZXBvc2l0U3RhcnRUaW1lID0gbm93OwogICAgICAgIGRlcG9zaXRTdG9wVGltZSAgPSBub3cgKyBERVBPU0lUX1dJTkRPVzsKCiAgICAgICAgU3RhcnRlZChkZXBvc2l0U3RhcnRUaW1lKTsKICAgIH0KCiAgICAvLy8gQGRldiBHZXQgYWxsIEVUSCBhbmQgTFJDIGJhY2sgdG8gYG93bmVyYC4KICAgIGZ1bmN0aW9uIGNsb3NlKCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoIWNsb3NlZCk7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICByZXF1aXJlKG5vdyA+IGRlcG9zaXRTdG9wVGltZSArIFdJVEhEUkFXQUxfREVMQVkgKyBXSVRIRFJBV0FMX1dJTkRPVyk7CgogICAgICAgIHVpbnQgZXRoQW1vdW50ID0gdGhpcy5iYWxhbmNlOwogICAgICAgIGlmIChldGhBbW91bnQgPiAwKSB7CiAgICAgICAgICAgIG93bmVyLnRyYW5zZmVyKGV0aEFtb3VudCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgbHJjVG9rZW4gPSBUb2tlbihscmNUb2tlbkFkZHJlc3MpOwogICAgICAgIHVpbnQgbHJjQW1vdW50ID0gbHJjVG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOwogICAgICAgIGlmIChscmNBbW91bnQgPiAwKSB7CiAgICAgICAgICAgIHJlcXVpcmUobHJjVG9rZW4udHJhbnNmZXIob3duZXIsIGxyY0Ftb3VudCkpOwogICAgICAgIH0KCiAgICAgICAgY2xvc2VkID0gdHJ1ZTsKICAgICAgICBDbG9zZWQoZXRoQW1vdW50LCBscmNBbW91bnQpOwogICAgfQoKICAgIC8vLyBAZGV2IFRoaXMgZGVmYXVsdCBmdW5jdGlvbiBhbGxvd3Mgc2ltcGxlIHVzYWdlLgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSghY2xvc2VkKTsKCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsKICAgICAgICAgICAgaWYgKG5vdyA8PSBkZXBvc2l0U3RvcFRpbWUpIGRlcG9zaXRMUkMoKTsKICAgICAgICAgICAgZWxzZSB3aXRoZHJhd0xSQygpOwogICAgICAgIH0KICAgIH0KCgogICAgLy8vIEBkZXYgRGVwb3NpdCBMUkMgZm9yIEVUSC4KICAgIC8vLyBJZiB1c2VyIHNlbmQgeCBFVEgsIHRoaXMgbWV0aG9kIHdpbGwgdHJ5IHRvIHRyYW5zZmVyIGB4ICogMTAwICogNjUwMGAgTFJDIGZyb20KICAgIC8vLyB0aGUgdXNlcidzIGFkZHJlc3MgYW5kIHNlbmQgYHggKiAxMDBgIEVUSCB0byB0aGUgdXNlci4KICAgIGZ1bmN0aW9uIGRlcG9zaXRMUkMoKSBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKCFjbG9zZWQgJiYgbXNnLnNlbmRlciAhPSBvd25lcik7CiAgICAgICAgcmVxdWlyZShub3cgPD0gZGVwb3NpdFN0b3BUaW1lKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA9PSAwKTsKCiAgICAgICAgdmFyIHJlY29yZCA9IHJlY29yZHNbbXNnLnNlbmRlcl07CiAgICAgICAgdmFyIGxyY1Rva2VuID0gVG9rZW4obHJjVG9rZW5BZGRyZXNzKTsKCiAgICAgICAgdWludCBscmNBbW91bnQgPSB0aGlzLmJhbGFuY2UubXVsKFJBVEUpCiAgICAgICAgICAgIC5taW4yNTYobHJjVG9rZW4uYmFsYW5jZU9mKG1zZy5zZW5kZXIpKQogICAgICAgICAgICAubWluMjU2KGxyY1Rva2VuLmFsbG93YW5jZShtc2cuc2VuZGVyLCBhZGRyZXNzKHRoaXMpKSkKICAgICAgICAgICAgLm1pbjI1NihNQVhfTFJDX0RFUE9TSVRfUEVSX0FERFJFU1MgLSByZWNvcmQubHJjQW1vdW50KTsKCiAgICAgICAgdWludCBldGhBbW91bnQgPSBscmNBbW91bnQuZGl2KFJBVEUpOwogICAgICAgIGxyY0Ftb3VudCA9IGV0aEFtb3VudC5tdWwoUkFURSk7CgogICAgICAgIHJlcXVpcmUobHJjQW1vdW50ID4gMCAmJiBldGhBbW91bnQgPiAwKTsKCiAgICAgICAgcmVjb3JkLmxyY0Ftb3VudCArPSBscmNBbW91bnQ7CiAgICAgICAgcmVjb3JkLnRpbWVzdGFtcCA9IG5vdzsKICAgICAgICByZWNvcmRzW21zZy5zZW5kZXJdID0gcmVjb3JkOwoKICAgICAgICBscmNSZWNlaXZlZCArPSBscmNBbW91bnQ7CiAgICAgICAgZXRoU2VudCArPSBldGhBbW91bnQ7CgoKICAgICAgICBEZXBvc2l0KAogICAgICAgICAgICAgICAgZGVwb3NpdElkKyssCiAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLAogICAgICAgICAgICAgICAgZXRoQW1vdW50LAogICAgICAgICAgICAgICAgbHJjQW1vdW50CiAgICAgICAgICAgICAgICApOwogICAgICAgIHJlcXVpcmUobHJjVG9rZW4udHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIGFkZHJlc3ModGhpcyksIGxyY0Ftb3VudCkpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZXRoQW1vdW50KTsKICAgIH0KCiAgICAvLy8gQGRldiBXaXRoZHJhd2FsIExSQyB3aXRoIEVUSCB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIHdpdGhkcmF3TFJDKCkgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSghY2xvc2VkICYmIG1zZy5zZW5kZXIgIT0gb3duZXIpOwogICAgICAgIHJlcXVpcmUobm93ID4gZGVwb3NpdFN0b3BUaW1lKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwoKICAgICAgICB2YXIgcmVjb3JkID0gcmVjb3Jkc1ttc2cuc2VuZGVyXTsKICAgICAgICByZXF1aXJlKG5vdyA+PSByZWNvcmQudGltZXN0YW1wICsgV0lUSERSQVdBTF9ERUxBWSk7CiAgICAgICAgcmVxdWlyZShub3cgPD0gcmVjb3JkLnRpbWVzdGFtcCArIFdJVEhEUkFXQUxfREVMQVkgKyBXSVRIRFJBV0FMX1dJTkRPVyk7CgogICAgICAgIHVpbnQgZXRoQW1vdW50ID0gbXNnLnZhbHVlLm1pbjI1NihyZWNvcmQubHJjQW1vdW50LmRpdihSQVRFKSk7CiAgICAgICAgdWludCBscmNBbW91bnQgPSBldGhBbW91bnQubXVsKFJBVEUpOwoKICAgICAgICByZWNvcmQubHJjQW1vdW50IC09IGxyY0Ftb3VudDsKICAgICAgICBpZiAocmVjb3JkLmxyY0Ftb3VudCA9PSAwKSB7CiAgICAgICAgICAgIGRlbGV0ZSByZWNvcmRzW21zZy5zZW5kZXJdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlY29yZHNbbXNnLnNlbmRlcl0gPSByZWNvcmQ7CiAgICAgICAgfQoKICAgICAgICBscmNTZW50ICs9IGxyY0Ftb3VudDsKICAgICAgICBldGhSZWNlaXZlZCArPSBldGhBbW91bnQ7CgogICAgICAgIFdpdGhkcmF3YWwoCiAgICAgICAgICAgICAgICAgICB3aXRoZHJhd0lkKyssCiAgICAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLAogICAgICAgICAgICAgICAgICAgZXRoQW1vdW50LAogICAgICAgICAgICAgICAgICAgbHJjQW1vdW50CiAgICAgICAgICAgICAgICAgICApOwoKICAgICAgICByZXF1aXJlKFRva2VuKGxyY1Rva2VuQWRkcmVzcykudHJhbnNmZXIobXNnLnNlbmRlciwgbHJjQW1vdW50KSk7CgogICAgICAgIHVpbnQgZXRoUmVmdW5kID0gbXNnLnZhbHVlIC0gZXRoQW1vdW50OwogICAgICAgIGlmIChldGhSZWZ1bmQgPiAwKSB7CiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZXRoUmVmdW5kKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TFJDQW1vdW50KGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcmVjb3Jkc1thZGRyXS5scmNBbW91bnQ7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VGltZXN0YW1wKGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcmVjb3Jkc1thZGRyXS50aW1lc3RhbXA7CiAgICB9Cn0='.
	

]
