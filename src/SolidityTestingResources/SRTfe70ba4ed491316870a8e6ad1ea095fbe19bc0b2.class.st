Class {
	#name : #SRTfe70ba4ed491316870a8e6ad1ea095fbe19bc0b2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfe70ba4ed491316870a8e6ad1ea095fbe19bc0b2 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgpsaWJyYXJ5IEJvbnVzIHsKICAgIHVpbnQxNiBjb25zdGFudCBPUklHSU5fWUVBUiA9IDE5NzA7CgogICAgc3RydWN0IEJvbnVzRGF0YSB7CiAgICAgICAgdWludCBjdXRvZmYwOwogICAgICAgIHVpbnQgY3V0b2ZmMTsKICAgICAgICB1aW50IGN1dG9mZjI7CiAgICAgICAgdWludCBjdXRvZmYzOwogICAgfQoKICAgIC8vIHVzZSBzdG9yYWdlIGtleXdvcmQgc28gdGhhdCB3ZSB3cml0ZSB0aGlzIHRvIHBlcnNpc3RlbnQgc3RvcmFnZQogICAgZnVuY3Rpb24gaW5pdEN1dG9mZnMoQm9udXNEYXRhIHN0b3JhZ2UgZGF0YSkKICAgIGludGVybmFsCiAgICB7CiAgICAgICAgZGF0YS5jdXRvZmYwID0gdG9UaW1lc3RhbXAoMjAxOCwgNSwgMjkpOwogICAgICAgIGRhdGEuY3V0b2ZmMSA9IHRvVGltZXN0YW1wKDIwMTgsIDYsIDExKTsKICAgICAgICBkYXRhLmN1dG9mZjIgPSB0b1RpbWVzdGFtcCgyMDE4LCA2LCAyNCk7CiAgICAgICAgZGF0YS5jdXRvZmYzID0gdG9UaW1lc3RhbXAoMjAxOCwgNiwgMzEpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldF9GVFZUT0tFTl9FVVJDRU5UKHVpbnQgdGltZXN0YW1wLCBCb251c0RhdGEgc3RvcmFnZSBkYXRhKQogICAgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2IEZUVlRPS0VOX0VVUkNFTlQpCiAgICB7CiAgICAgICAgcmVxdWlyZShkYXRhLmN1dG9mZjAgPiAwKTsKCiAgICAgICAgaWYgKHRpbWVzdGFtcCA8IGRhdGEuY3V0b2ZmMCkgewogICAgICAgICAgICByZXR1cm4gMTg7CiAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPCBkYXRhLmN1dG9mZjEpIHsKICAgICAgICAgICAgcmV0dXJuIDIwOwogICAgICAgIH0gZWxzZSBpZiAodGltZXN0YW1wIDwgZGF0YS5jdXRvZmYyKSB7CiAgICAgICAgICAgIHJldHVybiAyMjsKICAgICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA8IGRhdGEuY3V0b2ZmMykgewogICAgICAgICAgICByZXR1cm4gMjQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiAyNTsKICAgIH0KCiAgICAvLyBUaW1lc3RhbXAgZnVuY3Rpb25zIGJhc2VkIG9uCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcGlwZXJtZXJyaWFtL2V0aGVyZXVtLWRhdGV0aW1lL2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9EYXRlVGltZS5zb2wKICAgIGZ1bmN0aW9uIHRvVGltZXN0YW1wKHVpbnQxNiB5ZWFyLCB1aW50OCBtb250aCwgdWludDggZGF5KQogICAgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IHRpbWVzdGFtcCkgewogICAgICAgIHVpbnQxNiBpOwoKICAgICAgICAvLyBZZWFyCiAgICAgICAgdGltZXN0YW1wICs9ICh5ZWFyIC0gT1JJR0lOX1lFQVIpICogMSB5ZWFyczsKICAgICAgICB0aW1lc3RhbXAgKz0gKGxlYXBZZWFyc0JlZm9yZSh5ZWFyKSAtIGxlYXBZZWFyc0JlZm9yZShPUklHSU5fWUVBUikpICogMSBkYXlzOwoKICAgICAgICAvLyBNb250aAogICAgICAgIHVpbnQ4WzEyXSBtZW1vcnkgbW9udGhEYXlDb3VudHM7CiAgICAgICAgbW9udGhEYXlDb3VudHNbMF0gPSAzMTsKICAgICAgICBpZiAoaXNMZWFwWWVhcih5ZWFyKSkgewogICAgICAgICAgICBtb250aERheUNvdW50c1sxXSA9IDI5OwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgbW9udGhEYXlDb3VudHNbMV0gPSAyODsKICAgICAgICB9CiAgICAgICAgbW9udGhEYXlDb3VudHNbMl0gPSAzMTsKICAgICAgICBtb250aERheUNvdW50c1szXSA9IDMwOwogICAgICAgIG1vbnRoRGF5Q291bnRzWzRdID0gMzE7CiAgICAgICAgbW9udGhEYXlDb3VudHNbNV0gPSAzMDsKICAgICAgICBtb250aERheUNvdW50c1s2XSA9IDMxOwogICAgICAgIG1vbnRoRGF5Q291bnRzWzddID0gMzE7CiAgICAgICAgbW9udGhEYXlDb3VudHNbOF0gPSAzMDsKICAgICAgICBtb250aERheUNvdW50c1s5XSA9IDMxOwogICAgICAgIG1vbnRoRGF5Q291bnRzWzEwXSA9IDMwOwogICAgICAgIG1vbnRoRGF5Q291bnRzWzExXSA9IDMxOwoKICAgICAgICBmb3IgKGkgPSAxOyBpIDwgbW9udGg7IGkrKykgewogICAgICAgICAgICB0aW1lc3RhbXAgKz0gbW9udGhEYXlDb3VudHNbaSAtIDFdICogMSBkYXlzOwogICAgICAgIH0KCiAgICAgICAgLy8gRGF5CiAgICAgICAgdGltZXN0YW1wICs9IChkYXkgLSAxKSAqIDEgZGF5czsKCiAgICAgICAgLy8gSG91ciwgTWludXRlLCBhbmQgU2Vjb25kIGFyZSBhc3N1bWVkIGFzIDAgKHdlIGNhbGN1bGF0ZSBpbiBHTVQpCgogICAgICAgIHJldHVybiB0aW1lc3RhbXA7CiAgICB9CgogICAgZnVuY3Rpb24gbGVhcFllYXJzQmVmb3JlKHVpbnQgeWVhcikKICAgIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgIHllYXIgLT0gMTsKICAgICAgICByZXR1cm4geWVhciAvIDQgLSB5ZWFyIC8gMTAwICsgeWVhciAvIDQwMDsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0xlYXBZZWFyKHVpbnQxNiB5ZWFyKQogICAgaW50ZXJuYWwgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKHllYXIgJSA0ICE9IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoeWVhciAlIDEwMCAhPSAwKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoeWVhciAlIDQwMCAhPSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CmNvbnRyYWN0IEVSQzIwQmFzaWMgewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAgICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCn0KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgdWludDI1NiBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICAgKgogICAgICogQmV3YXJlIHRoYXQgY2hhbmdpbmcgYW4gYWxsb3dhbmNlIHdpdGggdGhpcyBtZXRob2QgYnJpbmdzIHRoZSByaXNrIHRoYXQgc29tZW9uZSBtYXkgdXNlIGJvdGggdGhlIG9sZAogICAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAgICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICAvKioKICAgICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICAgKi8KICAgIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICAgICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICAgICAgfQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cgp9CmNvbnRyYWN0IEZUViBpcyBTdGFuZGFyZFRva2VuIHsKCiAgICAvLyBkYXRhIHN0cnVjdHVyZXMKICAgIGVudW0gU3RhdGVzIHsKICAgICAgICBJbml0aWFsLCAvLyBkZXBsb3ltZW50IHRpbWUKICAgICAgICBWYWx1YXRpb25TZXQsCiAgICAgICAgSWNvLCAvLyB3aGl0ZWxpc3QgYWRkcmVzc2VzLCBhY2NlcHQgZnVuZHMsIHVwZGF0ZSBiYWxhbmNlcwogICAgICAgIFVuZGVyZnVuZGVkLCAvLyBJQ08gdGltZSBmaW5pc2hlZCBhbmQgbWluaW1hbCBhbW91bnQgbm90IHJhaXNlZAogICAgICAgIE9wZXJhdGlvbmFsLCAvLyBwcm9kdWN0aW9uIHBoYXNlCiAgICAgICAgUGF1c2VkICAgICAgICAgLy8gZm9yIGNvbnRyYWN0IHVwZ3JhZGVzCiAgICB9CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBldGhQb3NzaWJsZVJlZnVuZHM7CgogICAgdWludDI1NiBwdWJsaWMgc29sZFRva2VuczsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiRlRWIENvaW4gRGVsdXhlIjsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJGVFYiOwoKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgd2hpdGVsaXN0OwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBhZGRyZXNzKSBwdWJsaWMgcmVmZXJyYWw7CgogICAgYWRkcmVzcyBwdWJsaWMgcmVzZXJ2ZXM7CgogICAgYWRkcmVzcyBwdWJsaWMgc3RhdGVDb250cm9sOwoKICAgIGFkZHJlc3MgcHVibGljIHdoaXRlbGlzdENvbnRyb2w7CgogICAgYWRkcmVzcyBwdWJsaWMgd2l0aGRyYXdDb250cm9sOwoKICAgIGFkZHJlc3MgcHVibGljIHRva2VuQXNzaWdubWVudENvbnRyb2w7CgogICAgU3RhdGVzIHB1YmxpYyBzdGF0ZTsKCiAgICB1aW50MjU2IHB1YmxpYyBlbmRCbG9jazsKCiAgICB1aW50MjU2IHB1YmxpYyBFVEhfRVVSOwoKICAgIHVpbnQyNTYgY29uc3RhbnQgcG9pbnRNdWx0aXBsaWVyID0gMWUxODsgLy8xMDAlID0gMSoxMF4xOCBwb2ludHMKCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBtYXhUb3RhbFN1cHBseSA9IDE1MDAwMDAwMDAgKiBwb2ludE11bHRpcGxpZXI7IC8vMS41QiB0b2tlbnMKCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBwZXJjZW50Rm9yU2FsZSA9IDI1OwoKICAgIEJvbnVzLkJvbnVzRGF0YSBib251c0RhdGE7CgogICAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKICAgIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICAgIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKCiAgICAvL3RoaXMgY3JlYXRlcyB0aGUgY29udHJhY3QgYW5kIHN0b3JlcyB0aGUgb3duZXIuIGl0IGFsc28gcGFzc2VzIGluIDMgYWRkcmVzc2VzIHRvIGJlIHVzZWQgbGF0ZXIgZHVyaW5nIHRoZSBsaWZldGltZSBvZiB0aGUgY29udHJhY3QuCiAgICBmdW5jdGlvbiBGVFYoCiAgICAgICAgYWRkcmVzcyBfc3RhdGVDb250cm9sCiAgICAsIGFkZHJlc3MgX3doaXRlbGlzdENvbnRyb2wKICAgICwgYWRkcmVzcyBfd2l0aGRyYXdDb250cm9sCiAgICAsIGFkZHJlc3MgX3Rva2VuQXNzaWdubWVudENvbnRyb2wKICAgICwgYWRkcmVzcyBfcmVzZXJ2ZXMKICAgICkgcHVibGljCiAgICB7CiAgICAgICAgc3RhdGVDb250cm9sID0gX3N0YXRlQ29udHJvbDsKICAgICAgICB3aGl0ZWxpc3RDb250cm9sID0gX3doaXRlbGlzdENvbnRyb2w7CiAgICAgICAgd2l0aGRyYXdDb250cm9sID0gX3dpdGhkcmF3Q29udHJvbDsKICAgICAgICB0b2tlbkFzc2lnbm1lbnRDb250cm9sID0gX3Rva2VuQXNzaWdubWVudENvbnRyb2w7CiAgICAgICAgbW92ZVRvU3RhdGUoU3RhdGVzLkluaXRpYWwpOwogICAgICAgIGVuZEJsb2NrID0gMDsKICAgICAgICBFVEhfRVVSID0gMDsKICAgICAgICB0b3RhbFN1cHBseSA9IG1heFRvdGFsU3VwcGx5OwogICAgICAgIHNvbGRUb2tlbnMgPSAwOwogICAgICAgIEJvbnVzLmluaXRDdXRvZmZzKGJvbnVzRGF0YSk7CiAgICAgICAgcmVzZXJ2ZXMgPSBfcmVzZXJ2ZXM7CiAgICAgICAgYmFsYW5jZXNbcmVzZXJ2ZXNdID0gdG90YWxTdXBwbHk7CiAgICAgICAgTWludChyZXNlcnZlcywgdG90YWxTdXBwbHkpOwogICAgICAgIFRyYW5zZmVyKDB4MCwgcmVzZXJ2ZXMsIHRvdGFsU3VwcGx5KTsKICAgIH0KCiAgICBldmVudCBXaGl0ZWxpc3RlZChhZGRyZXNzIGFkZHIpOwoKICAgIGV2ZW50IFJlZmVycmVkKGFkZHJlc3MgcGFyZW50LCBhZGRyZXNzIGNoaWxkKTsKCiAgICBldmVudCBTdGF0ZVRyYW5zaXRpb24oU3RhdGVzIG9sZFN0YXRlLCBTdGF0ZXMgbmV3U3RhdGUpOwoKICAgIG1vZGlmaWVyIG9ubHlXaGl0ZWxpc3QoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHdoaXRlbGlzdENvbnRyb2wpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVN0YXRlQ29udHJvbCgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gc3RhdGVDb250cm9sKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlUb2tlbkFzc2lnbm1lbnRDb250cm9sKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB0b2tlbkFzc2lnbm1lbnRDb250cm9sKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlXaXRoZHJhdygpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gd2l0aGRyYXdDb250cm9sKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHJlcXVpcmVTdGF0ZShTdGF0ZXMgX3JlcXVpcmVkU3RhdGUpIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IF9yZXF1aXJlZFN0YXRlKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgQkVHSU4gSUNPIGZ1bmN0aW9ucwogICAgKi8KCiAgICAvL3RoaXMgaXMgdGhlIG1haW4gZnVuZGluZyBmdW5jdGlvbiwgaXQgdXBkYXRlcyB0aGUgYmFsYW5jZXMgb2YgdG9rZW5zIGR1cmluZyB0aGUgSUNPLgogICAgLy9ubyBwYXJ0aWN1bGFyIGluY2VudGl2ZSBzY2hlbWVzIGhhdmUgYmVlbiBpbXBsZW1lbnRlZCBoZXJlCiAgICAvL2l0IGlzIG9ubHkgYWNjZXNzaWJsZSBkdXJpbmcgdGhlICJJQ08iIHBoYXNlLgogICAgZnVuY3Rpb24oKSBwYXlhYmxlCiAgICBwdWJsaWMKICAgIHJlcXVpcmVTdGF0ZShTdGF0ZXMuSWNvKQogICAgewogICAgICAgIHJlcXVpcmUod2hpdGVsaXN0W21zZy5zZW5kZXJdID09IHRydWUpOwoKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA8IGVuZEJsb2NrKTsKCiAgICAgICAgdWludDI1NiBzb2xkVG9UdXNlcldpdGhCb251cyA9IGNhbGNUb2tlbnMobXNnLnZhbHVlKTsKCiAgICAgICAgaXNzdWVUb2tlbnNXaXRoUmVmZXJyYWwobXNnLnNlbmRlciwgc29sZFRvVHVzZXJXaXRoQm9udXMpOwogICAgICAgIGV0aFBvc3NpYmxlUmVmdW5kc1ttc2cuc2VuZGVyXSA9IGV0aFBvc3NpYmxlUmVmdW5kc1ttc2cuc2VuZGVyXS5hZGQobXNnLnZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc3N1ZVRva2Vuc1RvVXNlcihhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50MjU2IGFtb3VudCkKICAgIGludGVybmFsCiAgICB7CiAgICAgICAgdWludDI1NiBzb2xkVG9rZW5zQWZ0ZXJJbnZlc3RtZW50ID0gc29sZFRva2Vucy5hZGQoYW1vdW50KTsKICAgICAgICByZXF1aXJlKHNvbGRUb2tlbnNBZnRlckludmVzdG1lbnQgPD0gbWF4VG90YWxTdXBwbHkubXVsKHBlcmNlbnRGb3JTYWxlKS5kaXYoMTAwKSk7CgogICAgICAgIGJhbGFuY2VzW2JlbmVmaWNpYXJ5XSA9IGJhbGFuY2VzW2JlbmVmaWNpYXJ5XS5hZGQoYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1tyZXNlcnZlc10gPSBiYWxhbmNlc1tyZXNlcnZlc10uc3ViKGFtb3VudCk7CiAgICAgICAgc29sZFRva2VucyA9IHNvbGRUb2tlbnNBZnRlckludmVzdG1lbnQ7CiAgICAgICAgVHJhbnNmZXIocmVzZXJ2ZXMsIGJlbmVmaWNpYXJ5LCBhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzc3VlVG9rZW5zV2l0aFJlZmVycmFsKGFkZHJlc3MgYmVuZWZpY2lhcnksIHVpbnQyNTYgYW1vdW50KQogICAgaW50ZXJuYWwKICAgIHsKICAgICAgICBpc3N1ZVRva2Vuc1RvVXNlcihiZW5lZmljaWFyeSwgYW1vdW50KTsKICAgICAgICBpZiAocmVmZXJyYWxbYmVuZWZpY2lhcnldICE9IDB4MCkgewogICAgICAgICAgICAvLyBTZW5kIDUlIHJlZmVycmFsIGJvbnVzIHRvIHRoZSAicGFyZW50Ii4KICAgICAgICAgICAgaXNzdWVUb2tlbnNUb1VzZXIocmVmZXJyYWxbYmVuZWZpY2lhcnldLCBhbW91bnQubXVsKDUpLmRpdigxMDApKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY1Rva2Vucyh1aW50MjU2IHdlaUFtb3VudCkKICAgIGNvbnN0YW50CiAgICBwdWJsaWMKICAgIHJldHVybnMgKHVpbnQyNTYgcmVzdWx0aW5nVG9rZW5zKQogICAgewogICAgICAgIHJldHVybiB3ZWlBbW91bnQubXVsKEVUSF9FVVIpLm11bCgxMDApLmRpdihnZXRfRlRWVE9LRU5fRVVSQ0VOVChub3cpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRfRlRWVE9LRU5fRVVSQ0VOVCh1aW50IHRpbWVzdGFtcCkKICAgIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IEZUVlRPS0VOX0VVUkNFTlQpCiAgICB7CiAgICAgICAgcmV0dXJuIEJvbnVzLmdldF9GVFZUT0tFTl9FVVJDRU5UKHRpbWVzdGFtcCwgYm9udXNEYXRhKTsKICAgIH0KCiAgICBmdW5jdGlvbiBtb3ZlVG9TdGF0ZShTdGF0ZXMgX25ld1N0YXRlKQogICAgaW50ZXJuYWwKICAgIHsKICAgICAgICBTdGF0ZVRyYW5zaXRpb24oc3RhdGUsIF9uZXdTdGF0ZSk7CiAgICAgICAgc3RhdGUgPSBfbmV3U3RhdGU7CiAgICB9CiAgICAvLyBJQ08gY29udHJhY3QgY29uZmlndXJhdGlvbiBmdW5jdGlvbgogICAgLy8gbmV3X0VUSF9FVVIgaXMgdGhlIG5ldyByYXRlIG9mIEVUSCBpbiBFVVIgKGZyb20gd2hpY2ggdG8gZGVyaXZlIHRva2VucyBwZXIgRVRIKQogICAgLy8gbmV3RW5kQmxvY2sgaXMgdGhlIGFic29sdXRlIGJsb2NrIG51bWJlciBhdCB3aGljaCB0aGUgSUNPIG11c3Qgc3RvcC4gSXQgbXVzdCBiZSBzZXQgYWZ0ZXIgbm93LgogICAgZnVuY3Rpb24gdXBkYXRlRXRoSUNPVmFyaWFibGVzKHVpbnQyNTYgX25ld19FVEhfRVVSLCB1aW50MjU2IF9uZXdFbmRCbG9jaykKICAgIHB1YmxpYwogICAgb25seVN0YXRlQ29udHJvbAogICAgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGVzLkluaXRpYWwgfHwgc3RhdGUgPT0gU3RhdGVzLlZhbHVhdGlvblNldCk7CiAgICAgICAgcmVxdWlyZShibG9jay5udW1iZXIgPCBfbmV3RW5kQmxvY2spOwogICAgICAgIHJlcXVpcmUoX25ld19FVEhfRVVSID4gMCk7CiAgICAgICAgRVRIX0VVUiA9IF9uZXdfRVRIX0VVUjsKICAgICAgICBlbmRCbG9jayA9IF9uZXdFbmRCbG9jazsKICAgICAgICAvLyBjaGVjayBwb2ludE11bHRpcGxpZXIKICAgICAgICBtb3ZlVG9TdGF0ZShTdGF0ZXMuVmFsdWF0aW9uU2V0KTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVFVEhFVVIodWludDI1NiBfbmV3X0VUSF9FVVIpCiAgICBwdWJsaWMKICAgIG9ubHlUb2tlbkFzc2lnbm1lbnRDb250cm9sCiAgICByZXF1aXJlU3RhdGUoU3RhdGVzLkljbykKICAgIHsKICAgICAgICByZXF1aXJlKF9uZXdfRVRIX0VVUiA+IDApOwogICAgICAgIEVUSF9FVVIgPSBfbmV3X0VUSF9FVVI7CiAgICB9CgogICAgZnVuY3Rpb24gc3RhcnRJQ08oKQogICAgcHVibGljCiAgICBvbmx5U3RhdGVDb250cm9sCiAgICByZXF1aXJlU3RhdGUoU3RhdGVzLlZhbHVhdGlvblNldCkKICAgIHsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA8IGVuZEJsb2NrKTsKICAgICAgICBtb3ZlVG9TdGF0ZShTdGF0ZXMuSWNvKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRQcmVzYWxlQW1vdW50KGFkZHJlc3MgYmVuZWZpY2lhcnksIHVpbnQyNTYgYW1vdW50KQogICAgcHVibGljCiAgICBvbmx5VG9rZW5Bc3NpZ25tZW50Q29udHJvbAogICAgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGVzLlZhbHVhdGlvblNldCB8fCBzdGF0ZSA9PSBTdGF0ZXMuSWNvKTsKICAgICAgICBpc3N1ZVRva2Vuc1dpdGhSZWZlcnJhbChiZW5lZmljaWFyeSwgYW1vdW50KTsKICAgIH0KCgogICAgZnVuY3Rpb24gZW5kSUNPKCkKICAgIHB1YmxpYwogICAgb25seVN0YXRlQ29udHJvbAogICAgcmVxdWlyZVN0YXRlKFN0YXRlcy5JY28pCiAgICB7CiAgICAgICAgZmluaXNoTWludGluZygpOwogICAgICAgIG1vdmVUb1N0YXRlKFN0YXRlcy5PcGVyYXRpb25hbCk7CiAgICB9CgogICAgZnVuY3Rpb24gYW55b25lRW5kSUNPKCkKICAgIHB1YmxpYwogICAgcmVxdWlyZVN0YXRlKFN0YXRlcy5JY28pCiAgICB7CiAgICAgICAgcmVxdWlyZShibG9jay5udW1iZXIgPiBlbmRCbG9jayk7CiAgICAgICAgZmluaXNoTWludGluZygpOwogICAgICAgIG1vdmVUb1N0YXRlKFN0YXRlcy5PcGVyYXRpb25hbCk7CiAgICB9CgogICAgZnVuY3Rpb24gZmluaXNoTWludGluZygpCiAgICBpbnRlcm5hbAogICAgewogICAgICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICAgICAgTWludEZpbmlzaGVkKCk7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkVG9XaGl0ZWxpc3QoYWRkcmVzcyBfd2hpdGVsaXN0ZWQpCiAgICBwdWJsaWMKICAgIG9ubHlXaGl0ZWxpc3QKICAgICAgICAvLyAgICByZXF1aXJlU3RhdGUoU3RhdGVzLkljbykKICAgIHsKICAgICAgICB3aGl0ZWxpc3RbX3doaXRlbGlzdGVkXSA9IHRydWU7CiAgICAgICAgV2hpdGVsaXN0ZWQoX3doaXRlbGlzdGVkKTsKICAgIH0KCgogICAgZnVuY3Rpb24gYWRkUmVmZXJyYWwoYWRkcmVzcyBfcGFyZW50LCBhZGRyZXNzIF9jaGlsZCkKICAgIHB1YmxpYwogICAgb25seVdoaXRlbGlzdAogICAgICAgIC8vICAgIHJlcXVpcmVTdGF0ZShTdGF0ZXMuSWNvKQogICAgewogICAgICAgIHJlcXVpcmUoX3BhcmVudCAhPSBfY2hpbGQpOwogICAgICAgIHJlcXVpcmUod2hpdGVsaXN0W19wYXJlbnRdID09IHRydWUgJiYgd2hpdGVsaXN0W19jaGlsZF0gPT0gdHJ1ZSk7CiAgICAgICAgcmVxdWlyZShyZWZlcnJhbFtfY2hpbGRdID09IDB4MCk7CiAgICAgICAgcmVmZXJyYWxbX2NoaWxkXSA9IF9wYXJlbnQ7CiAgICAgICAgUmVmZXJyZWQoX3BhcmVudCwgX2NoaWxkKTsKICAgIH0KCgogICAgLy9lbWVyZ2VuY3kgcGF1c2UgZm9yIHRoZSBJQ08KICAgIGZ1bmN0aW9uIHBhdXNlKCkKICAgIHB1YmxpYwogICAgb25seVN0YXRlQ29udHJvbAogICAgcmVxdWlyZVN0YXRlKFN0YXRlcy5JY28pCiAgICB7CiAgICAgICAgbW92ZVRvU3RhdGUoU3RhdGVzLlBhdXNlZCk7CiAgICB9CgogICAgLy9pbiBjYXNlIHdlIHdhbnQgdG8gY29tcGxldGVseSBhYm9ydAogICAgZnVuY3Rpb24gYWJvcnQoKQogICAgcHVibGljCiAgICBvbmx5U3RhdGVDb250cm9sCiAgICByZXF1aXJlU3RhdGUoU3RhdGVzLlBhdXNlZCkKICAgIHsKICAgICAgICBtb3ZlVG9TdGF0ZShTdGF0ZXMuVW5kZXJmdW5kZWQpOwogICAgfQoKICAgIC8vdW4tcGF1c2UKICAgIGZ1bmN0aW9uIHJlc3VtZUlDTygpCiAgICBwdWJsaWMKICAgIG9ubHlTdGF0ZUNvbnRyb2wKICAgIHJlcXVpcmVTdGF0ZShTdGF0ZXMuUGF1c2VkKQogICAgewogICAgICAgIG1vdmVUb1N0YXRlKFN0YXRlcy5JY28pOwogICAgfQoKICAgIC8vaW4gY2FzZSBvZiBhIGZhaWxlZC9hYm9ydGVkIElDTyBldmVyeSBpbnZlc3RvciBjYW4gZ2V0IGJhY2sgdGhlaXIgbW9uZXkKICAgIGZ1bmN0aW9uIHJlcXVlc3RSZWZ1bmQoKQogICAgcHVibGljCiAgICByZXF1aXJlU3RhdGUoU3RhdGVzLlVuZGVyZnVuZGVkKQogICAgewogICAgICAgIHJlcXVpcmUoZXRoUG9zc2libGVSZWZ1bmRzW21zZy5zZW5kZXJdID4gMCk7CiAgICAgICAgLy90aGVyZSBpcyBubyBuZWVkIGZvciB1cGRhdGVBY2NvdW50KG1zZy5zZW5kZXIpIHNpbmNlIHRoZSB0b2tlbiBuZXZlciBiZWNhbWUgYWN0aXZlLgogICAgICAgIHVpbnQyNTYgcGF5b3V0ID0gZXRoUG9zc2libGVSZWZ1bmRzW21zZy5zZW5kZXJdOwogICAgICAgIC8vcmV2ZXJzZSBjYWxjdWxhdGUgdGhlIGFtb3VudCB0byBwYXkgb3V0CiAgICAgICAgZXRoUG9zc2libGVSZWZ1bmRzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHBheW91dCk7CiAgICB9CgogICAgLy9hZnRlciB0aGUgaWNvIGhhcyBydW4gaXRzIGNvdXJzZSwgdGhlIHdpdGhkcmF3IGFjY291bnQgY2FuIGRyYWluIGZ1bmRzIGJpdC1ieS1iaXQgYXMgbmVlZGVkLgogICAgZnVuY3Rpb24gcmVxdWVzdFBheW91dCh1aW50IF9hbW91bnQpCiAgICBwdWJsaWMKICAgIG9ubHlXaXRoZHJhdyAvL3ZlcnkgaW1wb3J0YW50IQogICAgcmVxdWlyZVN0YXRlKFN0YXRlcy5PcGVyYXRpb25hbCkKICAgIHsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKF9hbW91bnQpOwogICAgfQoKICAgIC8vaWYgdGhpcyBjb250cmFjdCBnZXRzIGEgYmFsYW5jZSBpbiBzb21lIG90aGVyIEVSQzIwIGNvbnRyYWN0IC0gb3IgZXZlbiBpc2VsZiAtIHRoZW4gd2UgY2FuIHJlc2N1ZSBpdC4KICAgIGZ1bmN0aW9uIHJlc2N1ZVRva2VuKEVSQzIwQmFzaWMgX2ZvcmVpZ25Ub2tlbiwgYWRkcmVzcyBfdG8pCiAgICBwdWJsaWMKICAgIG9ubHlUb2tlbkFzc2lnbm1lbnRDb250cm9sCiAgICByZXF1aXJlU3RhdGUoU3RhdGVzLk9wZXJhdGlvbmFsKQogICAgewogICAgICAgIF9mb3JlaWduVG9rZW4udHJhbnNmZXIoX3RvLCBfZm9yZWlnblRva2VuLmJhbGFuY2VPZih0aGlzKSk7CiAgICB9CiAgICAvKioKICAgIEVORCBJQ08gZnVuY3Rpb25zCiAgICAqLwoKICAgIC8qKgogICAgQkVHSU4gRVJDMjAgZnVuY3Rpb25zCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgcHVibGljCiAgICByZXF1aXJlU3RhdGUoU3RhdGVzLk9wZXJhdGlvbmFsKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgcHVibGljCiAgICByZXF1aXJlU3RhdGUoU3RhdGVzLk9wZXJhdGlvbmFsKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9hY2NvdW50KQogICAgcHVibGljCiAgICBjb25zdGFudAogICAgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19hY2NvdW50XTsKICAgIH0KCiAgICAvKioKICAgIEVORCBFUkMyMCBmdW5jdGlvbnMKICAgICovCn0='.
	

]
