Class {
	#name : #SRT60cd862c9c687a9de49aecdc3a99b74a4fc54ab6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT60cd862c9c687a9de49aecdc3a99b74a4fc54ab6 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBNb29uQ2F0UmVzY3VlIHsKICBlbnVtIE1vZGVzIHsgSW5hY3RpdmUsIERpc2FibGVkLCBUZXN0LCBMaXZlIH0KCiAgTW9kZXMgcHVibGljIG1vZGUgPSBNb2Rlcy5JbmFjdGl2ZTsKCiAgYWRkcmVzcyBvd25lcjsKCiAgYnl0ZXMxNiBwdWJsaWMgaW1hZ2VHZW5lcmF0aW9uQ29kZU1ENSA9IDB4ZGJhZDVjMDhlYzk4YmVjNDg0OTBlM2MxOTZlZWM2ODM7IC8vIHVzZSB0aGlzIHRvIHZlcmlmeSBtb29uY2F0cGFyc2VyLmpzIHRoZSBjYXQgaW1hZ2UgZGF0YSBnZW5lcmF0aW9uIGphdmFzY3JpcHQgZmlsZS4KCiAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIk1vb25DYXRzIjsKICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICI/IjsgLy8gdW5pY29kZSBjYXQgc3ltYm9sCiAgdWludDggcHVibGljIGRlY2ltYWxzID0gMDsKCiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSAyNTYwMDsKICB1aW50MTYgcHVibGljIHJlbWFpbmluZ0NhdHMgPSAyNTYwMCAtIDI1NjsgLy8gdGhlcmUgd2lsbCBvbmx5IGV2ZXIgYmUgMjUsMDAwIGNhdHMKICB1aW50MTYgcHVibGljIHJlbWFpbmluZ0dlbmVzaXNDYXRzID0gMjU2OyAvLyB0aGVyZSBjYW4gb25seSBiZSBhIG1heGltdW0gb2YgMjU2IGdlbmVzaXMgY2F0cwogIHVpbnQxNiBwdWJsaWMgcmVzY3VlSW5kZXggPSAwOwoKICBieXRlczVbMjU2MDBdIHB1YmxpYyByZXNjdWVPcmRlcjsKCiAgYnl0ZXMzMiBwdWJsaWMgc2VhcmNoU2VlZCA9IDB4MDsgLy8gZ2V0cyBzZXQgd2l0aCB0aGUgaW1tZWRpYXRlbHkgcHJlY2VkaW5nIGJsb2NraGFzaCB3aGVuIHRoZSBjb250cmFjdCBpcyBhY3RpdmF0ZWQgdG8gcHJldmVudCAicHJlbWluaW5nIgoKICBzdHJ1Y3QgQWRvcHRpb25PZmZlciB7CiAgICBib29sIGV4aXN0czsKICAgIGJ5dGVzNSBjYXRJZDsKICAgIGFkZHJlc3Mgc2VsbGVyOwogICAgdWludCBwcmljZTsKICAgIGFkZHJlc3Mgb25seU9mZmVyVG87CiAgfQoKICBzdHJ1Y3QgQWRvcHRpb25SZXF1ZXN0ewogICAgYm9vbCBleGlzdHM7CiAgICBieXRlczUgY2F0SWQ7CiAgICBhZGRyZXNzIHJlcXVlc3RlcjsKICAgIHVpbnQgcHJpY2U7CiAgfQoKICBtYXBwaW5nIChieXRlczUgPT4gQWRvcHRpb25PZmZlcikgcHVibGljIGFkb3B0aW9uT2ZmZXJzOwogIG1hcHBpbmcgKGJ5dGVzNSA9PiBBZG9wdGlvblJlcXVlc3QpIHB1YmxpYyBhZG9wdGlvblJlcXVlc3RzOwoKICBtYXBwaW5nIChieXRlczUgPT4gYnl0ZXMzMikgcHVibGljIGNhdE5hbWVzOwogIG1hcHBpbmcgKGJ5dGVzNSA9PiBhZGRyZXNzKSBwdWJsaWMgY2F0T3duZXJzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsgLy9udW1iZXIgb2YgY2F0cyBvd25lZCBieSBhIGdpdmVuIGFkZHJlc3MKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBwZW5kaW5nV2l0aGRyYXdhbHM7CgogIC8qIGV2ZW50cyAqLwoKICBldmVudCBDYXRSZXNjdWVkKGFkZHJlc3MgaW5kZXhlZCB0bywgYnl0ZXM1IGluZGV4ZWQgY2F0SWQpOwogIGV2ZW50IENhdE5hbWVkKGJ5dGVzNSBpbmRleGVkIGNhdElkLCBieXRlczMyIGNhdE5hbWUpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogIGV2ZW50IENhdEFkb3B0ZWQoYnl0ZXM1IGluZGV4ZWQgY2F0SWQsIHVpbnQgcHJpY2UsIGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8pOwogIGV2ZW50IEFkb3B0aW9uT2ZmZXJlZChieXRlczUgaW5kZXhlZCBjYXRJZCwgdWludCBwcmljZSwgYWRkcmVzcyBpbmRleGVkIHRvQWRkcmVzcyk7CiAgZXZlbnQgQWRvcHRpb25PZmZlckNhbmNlbGxlZChieXRlczUgaW5kZXhlZCBjYXRJZCk7CiAgZXZlbnQgQWRvcHRpb25SZXF1ZXN0ZWQoYnl0ZXM1IGluZGV4ZWQgY2F0SWQsIHVpbnQgcHJpY2UsIGFkZHJlc3MgaW5kZXhlZCBmcm9tKTsKICBldmVudCBBZG9wdGlvblJlcXVlc3RDYW5jZWxsZWQoYnl0ZXM1IGluZGV4ZWQgY2F0SWQpOwogIGV2ZW50IEdlbmVzaXNDYXRzQWRkZWQoYnl0ZXM1WzE2XSBjYXRJZHMpOwoKICBmdW5jdGlvbiBNb29uQ2F0UmVzY3VlKCkgcGF5YWJsZSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICBhc3NlcnQoKHJlbWFpbmluZ0NhdHMgKyByZW1haW5pbmdHZW5lc2lzQ2F0cykgPT0gdG90YWxTdXBwbHkpOwogICAgYXNzZXJ0KHJlc2N1ZU9yZGVyLmxlbmd0aCA9PSB0b3RhbFN1cHBseSk7CiAgICBhc3NlcnQocmVzY3VlSW5kZXggPT0gMCk7CiAgfQoKICAvKiByZWdpc3RlcnMgYW5kIHZhbGlkYXRlcyBjYXRzIHRoYXQgYXJlIGZvdW5kICovCiAgZnVuY3Rpb24gcmVzY3VlQ2F0KGJ5dGVzMzIgc2VlZCkgYWN0aXZlTW9kZSByZXR1cm5zIChieXRlczUpIHsKICAgIHJlcXVpcmUocmVtYWluaW5nQ2F0cyA+IDApOyAvLyBjYW5ub3QgcmVnaXN0ZXIgYW55IGNhdHMgb25jZSBzdXBwbHkgbGltaXQgaXMgcmVhY2hlZAogICAgYnl0ZXMzMiBjYXRJZEhhc2ggPSBrZWNjYWsyNTYoc2VlZCwgc2VhcmNoU2VlZCk7IC8vIGdlbmVyYXRlIHRoZSBwcm9zcGVjdGl2ZSBjYXRJZEhhc2gKICAgIHJlcXVpcmUoY2F0SWRIYXNoWzBdIHwgY2F0SWRIYXNoWzFdIHwgY2F0SWRIYXNoWzJdID09IDB4MCk7IC8vIGVuc3VyZXMgdGhlIHZhbGlkaXR5IG9mIHRoZSBjYXRJZEhhc2gKICAgIGJ5dGVzNSBjYXRJZCA9IGJ5dGVzNSgoY2F0SWRIYXNoICYgMHhmZmZmZmZmZikgPDwgMjE2KTsgLy8gb25lIGJ5dGUgdG8gaW5kaWNhdGUgZ2VuZXNpcywgYW5kIHRoZSBsYXN0IDQgYnl0ZXMgb2YgdGhlIGNhdElkSGFzaAogICAgcmVxdWlyZShjYXRPd25lcnNbY2F0SWRdID09IDB4MCk7IC8vIGlmIHRoZSBjYXQgaXMgYWxyZWFkeSByZWdpc3RlcmVkLCB0aHJvdyBhbiBlcnJvci4gQWxsIGNhdHMgYXJlIHVuaXF1ZS4KCiAgICByZXNjdWVPcmRlcltyZXNjdWVJbmRleF0gPSBjYXRJZDsKICAgIHJlc2N1ZUluZGV4Kys7CgogICAgY2F0T3duZXJzW2NhdElkXSA9IG1zZy5zZW5kZXI7CiAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0rKzsKICAgIHJlbWFpbmluZ0NhdHMtLTsKCiAgICBDYXRSZXNjdWVkKG1zZy5zZW5kZXIsIGNhdElkKTsKCiAgICByZXR1cm4gY2F0SWQ7CiAgfQoKICAvKiBhc3NpZ25zIGEgbmFtZSB0byBhIGNhdCwgb25jZSBhIG5hbWUgaXMgYXNzaWduZWQgaXQgY2Fubm90IGJlIGNoYW5nZWQgKi8KICBmdW5jdGlvbiBuYW1lQ2F0KGJ5dGVzNSBjYXRJZCwgYnl0ZXMzMiBjYXROYW1lKSBvbmx5Q2F0T3duZXIoY2F0SWQpIHsKICAgIHJlcXVpcmUoY2F0TmFtZXNbY2F0SWRdID09IDB4MCk7IC8vIGVuc3VyZSB0aGUgY3VycmVudCBuYW1lIGlzIGVtcHR5OyBjYXRzIGNhbiBvbmx5IGJlIG5hbWVkIG9uY2UKICAgIHJlcXVpcmUoIWFkb3B0aW9uT2ZmZXJzW2NhdElkXS5leGlzdHMpOyAvLyBjYXRzIGNhbm5vdCBiZSBuYW1lZCB3aGlsZSB0aGV5IGFyZSB1cCBmb3IgYWRvcHRpb24KICAgIGNhdE5hbWVzW2NhdElkXSA9IGNhdE5hbWU7CiAgICBDYXROYW1lZChjYXRJZCwgY2F0TmFtZSk7CiAgfQoKICAvKiBwdXRzIGEgY2F0IHVwIGZvciBhbnlvbmUgdG8gYWRvcHQgKi8KICBmdW5jdGlvbiBtYWtlQWRvcHRpb25PZmZlcihieXRlczUgY2F0SWQsIHVpbnQgcHJpY2UpIG9ubHlDYXRPd25lcihjYXRJZCkgewogICAgcmVxdWlyZShwcmljZSA+IDApOwogICAgYWRvcHRpb25PZmZlcnNbY2F0SWRdID0gQWRvcHRpb25PZmZlcih0cnVlLCBjYXRJZCwgbXNnLnNlbmRlciwgcHJpY2UsIDB4MCk7CiAgICBBZG9wdGlvbk9mZmVyZWQoY2F0SWQsIHByaWNlLCAweDApOwogIH0KCiAgLyogcHV0cyBhIGNhdCB1cCBmb3IgYSBzcGVjaWZpYyBhZGRyZXNzIHRvIGFkb3B0ICovCiAgZnVuY3Rpb24gbWFrZUFkb3B0aW9uT2ZmZXJUb0FkZHJlc3MoYnl0ZXM1IGNhdElkLCB1aW50IHByaWNlLCBhZGRyZXNzIHRvKSBvbmx5Q2F0T3duZXIoY2F0SWQpIGlzTm90U2VuZGVyKHRvKXsKICAgIGFkb3B0aW9uT2ZmZXJzW2NhdElkXSA9IEFkb3B0aW9uT2ZmZXIodHJ1ZSwgY2F0SWQsIG1zZy5zZW5kZXIsIHByaWNlLCB0byk7CiAgICBBZG9wdGlvbk9mZmVyZWQoY2F0SWQsIHByaWNlLCB0byk7CiAgfQoKICAvKiBjYW5jZWwgYW4gYWRvcHRpb24gb2ZmZXIgKi8KICBmdW5jdGlvbiBjYW5jZWxBZG9wdGlvbk9mZmVyKGJ5dGVzNSBjYXRJZCkgb25seUNhdE93bmVyKGNhdElkKSB7CiAgICBhZG9wdGlvbk9mZmVyc1tjYXRJZF0gPSBBZG9wdGlvbk9mZmVyKGZhbHNlLCBjYXRJZCwgMHgwLCAwLCAweDApOwogICAgQWRvcHRpb25PZmZlckNhbmNlbGxlZChjYXRJZCk7CiAgfQoKICAvKiBhY2NlcHRzIGFuIGFkb3B0aW9uIG9mZmVyICAqLwogIGZ1bmN0aW9uIGFjY2VwdEFkb3B0aW9uT2ZmZXIoYnl0ZXM1IGNhdElkKSBwYXlhYmxlIHsKICAgIEFkb3B0aW9uT2ZmZXIgc3RvcmFnZSBvZmZlciA9IGFkb3B0aW9uT2ZmZXJzW2NhdElkXTsKICAgIHJlcXVpcmUob2ZmZXIuZXhpc3RzKTsKICAgIHJlcXVpcmUob2ZmZXIub25seU9mZmVyVG8gPT0gMHgwIHx8IG9mZmVyLm9ubHlPZmZlclRvID09IG1zZy5zZW5kZXIpOwogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gb2ZmZXIucHJpY2UpOwogICAgaWYobXNnLnZhbHVlID4gb2ZmZXIucHJpY2UpIHsKICAgICAgcGVuZGluZ1dpdGhkcmF3YWxzW21zZy5zZW5kZXJdICs9IChtc2cudmFsdWUgLSBvZmZlci5wcmljZSk7IC8vIGlmIHRoZSBzdWJtaXR0ZWQgYW1vdW50IGV4Y2VlZHMgdGhlIHByaWNlIGFsbG93IHRoZSBidXllciB0byB3aXRoZHJhdyB0aGUgZGlmZmVyZW5jZQogICAgfQogICAgdHJhbnNmZXJDYXQoY2F0SWQsIGNhdE93bmVyc1tjYXRJZF0sIG1zZy5zZW5kZXIsIG9mZmVyLnByaWNlKTsKICB9CgogIC8qIHRyYW5zZmVyIGEgY2F0IGRpcmVjdGx5IHdpdGhvdXQgcGF5bWVudCAqLwogIGZ1bmN0aW9uIGdpdmVDYXQoYnl0ZXM1IGNhdElkLCBhZGRyZXNzIHRvKSBvbmx5Q2F0T3duZXIoY2F0SWQpIHsKICAgIHRyYW5zZmVyQ2F0KGNhdElkLCBtc2cuc2VuZGVyLCB0bywgMCk7CiAgfQoKICAvKiByZXF1ZXN0cyBhZG9wdGlvbiBvZiBhIGNhdCB3aXRoIGFuIEVUSCBvZmZlciAqLwogIGZ1bmN0aW9uIG1ha2VBZG9wdGlvblJlcXVlc3QoYnl0ZXM1IGNhdElkKSBwYXlhYmxlIGlzTm90U2VuZGVyKGNhdE93bmVyc1tjYXRJZF0pIHsKICAgIHJlcXVpcmUoY2F0T3duZXJzW2NhdElkXSAhPSAweDApOyAvLyB0aGUgY2F0IG11c3QgYmUgb3duZWQKICAgIEFkb3B0aW9uUmVxdWVzdCBzdG9yYWdlIGV4aXN0aW5nUmVxdWVzdCA9IGFkb3B0aW9uUmVxdWVzdHNbY2F0SWRdOwogICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID4gZXhpc3RpbmdSZXF1ZXN0LnByaWNlKTsKCgogICAgaWYoZXhpc3RpbmdSZXF1ZXN0LnByaWNlID4gMCkgewogICAgICBwZW5kaW5nV2l0aGRyYXdhbHNbZXhpc3RpbmdSZXF1ZXN0LnJlcXVlc3Rlcl0gKz0gZXhpc3RpbmdSZXF1ZXN0LnByaWNlOwogICAgfQoKICAgIGFkb3B0aW9uUmVxdWVzdHNbY2F0SWRdID0gQWRvcHRpb25SZXF1ZXN0KHRydWUsIGNhdElkLCBtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogICAgQWRvcHRpb25SZXF1ZXN0ZWQoY2F0SWQsIG1zZy52YWx1ZSwgbXNnLnNlbmRlcik7CgogIH0KCiAgLyogYWxsb3dzIHRoZSBvd25lciBvZiB0aGUgY2F0IHRvIGFjY2VwdCBhbiBhZG9wdGlvbiByZXF1ZXN0ICovCiAgZnVuY3Rpb24gYWNjZXB0QWRvcHRpb25SZXF1ZXN0KGJ5dGVzNSBjYXRJZCkgb25seUNhdE93bmVyKGNhdElkKSB7CiAgICBBZG9wdGlvblJlcXVlc3Qgc3RvcmFnZSBleGlzdGluZ1JlcXVlc3QgPSBhZG9wdGlvblJlcXVlc3RzW2NhdElkXTsKICAgIHJlcXVpcmUoZXhpc3RpbmdSZXF1ZXN0LmV4aXN0cyk7CiAgICBhZGRyZXNzIGV4aXN0aW5nUmVxdWVzdGVyID0gZXhpc3RpbmdSZXF1ZXN0LnJlcXVlc3RlcjsKICAgIHVpbnQgZXhpc3RpbmdQcmljZSA9IGV4aXN0aW5nUmVxdWVzdC5wcmljZTsKICAgIGFkb3B0aW9uUmVxdWVzdHNbY2F0SWRdID0gQWRvcHRpb25SZXF1ZXN0KGZhbHNlLCBjYXRJZCwgMHgwLCAwKTsgLy8gdGhlIGFkb3B0aW9uIHJlcXVlc3QgbXVzdCBiZSBjYW5jZWxsZWQgYmVmb3JlIGNhbGxpbmcgdHJhbnNmZXJDYXQgdG8gcHJldmVudCByZWZ1bmRpbmcgdGhlIHJlcXVlc3Rlci4KICAgIHRyYW5zZmVyQ2F0KGNhdElkLCBtc2cuc2VuZGVyLCBleGlzdGluZ1JlcXVlc3RlciwgZXhpc3RpbmdQcmljZSk7CiAgfQoKICAvKiBhbGxvd3MgdGhlIHJlcXVlc3RlciB0byBjYW5jZWwgdGhlaXIgYWRvcHRpb24gcmVxdWVzdCAqLwogIGZ1bmN0aW9uIGNhbmNlbEFkb3B0aW9uUmVxdWVzdChieXRlczUgY2F0SWQpIHsKICAgIEFkb3B0aW9uUmVxdWVzdCBzdG9yYWdlIGV4aXN0aW5nUmVxdWVzdCA9IGFkb3B0aW9uUmVxdWVzdHNbY2F0SWRdOwogICAgcmVxdWlyZShleGlzdGluZ1JlcXVlc3QuZXhpc3RzKTsKICAgIHJlcXVpcmUoZXhpc3RpbmdSZXF1ZXN0LnJlcXVlc3RlciA9PSBtc2cuc2VuZGVyKTsKCiAgICB1aW50IHByaWNlID0gZXhpc3RpbmdSZXF1ZXN0LnByaWNlOwoKICAgIGFkb3B0aW9uUmVxdWVzdHNbY2F0SWRdID0gQWRvcHRpb25SZXF1ZXN0KGZhbHNlLCBjYXRJZCwgMHgwLCAwKTsKCiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHByaWNlKTsKCiAgICBBZG9wdGlvblJlcXVlc3RDYW5jZWxsZWQoY2F0SWQpOwogIH0KCgogIGZ1bmN0aW9uIHdpdGhkcmF3KCkgewogICAgdWludCBhbW91bnQgPSBwZW5kaW5nV2l0aGRyYXdhbHNbbXNnLnNlbmRlcl07CiAgICBwZW5kaW5nV2l0aGRyYXdhbHNbbXNnLnNlbmRlcl0gPSAwOwogICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQpOwogIH0KCiAgLyogb3duZXIgb25seSBmdW5jdGlvbnMgKi8KCiAgLyogZGlzYWJsZSBjb250cmFjdCBiZWZvcmUgYWN0aXZhdGlvbi4gQSBzYWZlZ3VhcmQgaWYgYSBidWcgaXMgZm91bmQgYmVmb3JlIHRoZSBjb250cmFjdCBpcyBhY3RpdmF0ZWQgKi8KICBmdW5jdGlvbiBkaXNhYmxlQmVmb3JlQWN0aXZhdGlvbigpIG9ubHlPd25lciBpbmFjdGl2ZU1vZGUgewogICAgbW9kZSA9IE1vZGVzLkRpc2FibGVkOyAgLy8gb25jZSB0aGUgY29udHJhY3QgaXMgZGlzYWJsZWQgaXQncyBtb2RlIGNhbm5vdCBiZSBjaGFuZ2VkCiAgfQoKICAvKiBhY3RpdmF0ZXMgdGhlIGNvbnRyYWN0IGluICpMaXZlKiBtb2RlIHdoaWNoIHNldHMgdGhlIHNlYXJjaFNlZWQgYW5kIGVuYWJsZXMgcmVzY3VpbmcgKi8KICBmdW5jdGlvbiBhY3RpdmF0ZSgpIG9ubHlPd25lciBpbmFjdGl2ZU1vZGUgewogICAgc2VhcmNoU2VlZCA9IGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXIgLSAxKTsgLy8gb25jZSB0aGUgc2VhcmNoU2VlZCBpcyBzZXQgaXQgY2Fubm90IGJlIGNoYW5nZWQ7CiAgICBtb2RlID0gTW9kZXMuTGl2ZTsgLy8gb25jZSB0aGUgY29udHJhY3QgaXMgYWN0aXZhdGVkIGl0J3MgbW9kZSBjYW5ub3QgYmUgY2hhbmdlZAogIH0KCiAgLyogYWN0aXZhdGVzIHRoZSBjb250cmFjdCBpbiAqVGVzdCogbW9kZSB3aGljaCBzZXRzIHRoZSBzZWFyY2hTZWVkIGFuZCBlbmFibGVzIHJlc2N1aW5nICovCiAgZnVuY3Rpb24gYWN0aXZhdGVJblRlc3RNb2RlKCkgb25seU93bmVyIGluYWN0aXZlTW9kZSB7IC8vCiAgICBzZWFyY2hTZWVkID0gMHg1NzEzYmRmNWQxYzMzOThhOGYxMmY4ODFmMGYwM2I1MDI1YjZmOWMxN2E5NzQ0MWE2OTRkNTc1MmJlYjkyYTNkOyAvLyBvbmNlIHRoZSBzZWFyY2hTZWVkIGlzIHNldCBpdCBjYW5ub3QgYmUgY2hhbmdlZDsKICAgIG1vZGUgPSBNb2Rlcy5UZXN0OyAvLyBvbmNlIHRoZSBjb250cmFjdCBpcyBhY3RpdmF0ZWQgaXQncyBtb2RlIGNhbm5vdCBiZSBjaGFuZ2VkCiAgfQoKICAvKiBhZGQgZ2VuZXNpcyBjYXRzIGluIGdyb3VwcyBvZiAxNiAqLwogIGZ1bmN0aW9uIGFkZEdlbmVzaXNDYXRHcm91cCgpIG9ubHlPd25lciBhY3RpdmVNb2RlIHsKICAgIHJlcXVpcmUocmVtYWluaW5nR2VuZXNpc0NhdHMgPiAwKTsKICAgIGJ5dGVzNVsxNl0gbWVtb3J5IG5ld0NhdElkczsKICAgIHVpbnQyNTYgcHJpY2UgPSAoMTcgLSAocmVtYWluaW5nR2VuZXNpc0NhdHMgLyAxNikpICogMzAwMDAwMDAwMDAwMDAwMDAwOwogICAgZm9yKHVpbnQ4IGkgPSAwOyBpIDwgMTY7IGkrKykgewoKICAgICAgdWludDE2IGdlbmVzaXNDYXRJbmRleCA9IDI1NiAtIHJlbWFpbmluZ0dlbmVzaXNDYXRzOwogICAgICBieXRlczUgZ2VuZXNpc0NhdElkID0gKGJ5dGVzNShnZW5lc2lzQ2F0SW5kZXgpIDw8IDI0KSB8IDB4ZmYwMDAwMGNhNzsKCiAgICAgIG5ld0NhdElkc1tpXSA9IGdlbmVzaXNDYXRJZDsKCiAgICAgIHJlc2N1ZU9yZGVyW3Jlc2N1ZUluZGV4XSA9IGdlbmVzaXNDYXRJZDsKICAgICAgcmVzY3VlSW5kZXgrKzsKICAgICAgYmFsYW5jZU9mWzB4MF0rKzsKICAgICAgcmVtYWluaW5nR2VuZXNpc0NhdHMtLTsKCiAgICAgIGFkb3B0aW9uT2ZmZXJzW2dlbmVzaXNDYXRJZF0gPSBBZG9wdGlvbk9mZmVyKHRydWUsIGdlbmVzaXNDYXRJZCwgb3duZXIsIHByaWNlLCAweDApOwogICAgfQogICAgR2VuZXNpc0NhdHNBZGRlZChuZXdDYXRJZHMpOwogIH0KCgogIC8qIGFnZ3JlZ2F0ZSBnZXR0ZXJzICovCgogIGZ1bmN0aW9uIGdldENhdElkcygpIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzNVtdKSB7CiAgICBieXRlczVbXSBtZW1vcnkgY2F0SWRzID0gbmV3IGJ5dGVzNVtdKHJlc2N1ZUluZGV4KTsKICAgIGZvciAodWludCBpID0gMDsgaSA8IHJlc2N1ZUluZGV4OyBpKyspIHsKICAgICAgY2F0SWRzW2ldID0gcmVzY3VlT3JkZXJbaV07CiAgICB9CiAgICByZXR1cm4gY2F0SWRzOwogIH0KCgogIGZ1bmN0aW9uIGdldENhdE5hbWVzKCkgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMltdKSB7CiAgICBieXRlczMyW10gbWVtb3J5IG5hbWVzID0gbmV3IGJ5dGVzMzJbXShyZXNjdWVJbmRleCk7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCByZXNjdWVJbmRleDsgaSsrKSB7CiAgICAgIG5hbWVzW2ldID0gY2F0TmFtZXNbcmVzY3VlT3JkZXJbaV1dOwogICAgfQogICAgcmV0dXJuIG5hbWVzOwogIH0KCiAgZnVuY3Rpb24gZ2V0Q2F0T3duZXJzKCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzc1tdKSB7CiAgICBhZGRyZXNzW10gbWVtb3J5IG93bmVycyA9IG5ldyBhZGRyZXNzW10ocmVzY3VlSW5kZXgpOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgcmVzY3VlSW5kZXg7IGkrKykgewogICAgICBvd25lcnNbaV0gPSBjYXRPd25lcnNbcmVzY3VlT3JkZXJbaV1dOwogICAgfQogICAgcmV0dXJuIG93bmVyczsKICB9CgogIGZ1bmN0aW9uIGdldENhdE9mZmVyUHJpY2VzKCkgY29uc3RhbnQgcmV0dXJucyAodWludFtdKSB7CiAgICB1aW50W10gbWVtb3J5IGNhdE9mZmVycyA9IG5ldyB1aW50W10ocmVzY3VlSW5kZXgpOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgcmVzY3VlSW5kZXg7IGkrKykgewogICAgICBieXRlczUgY2F0SWQgPSByZXNjdWVPcmRlcltpXTsKICAgICAgaWYoYWRvcHRpb25PZmZlcnNbY2F0SWRdLmV4aXN0cyAmJiBhZG9wdGlvbk9mZmVyc1tjYXRJZF0ub25seU9mZmVyVG8gPT0gMHgwKSB7CiAgICAgICAgY2F0T2ZmZXJzW2ldID0gYWRvcHRpb25PZmZlcnNbY2F0SWRdLnByaWNlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gY2F0T2ZmZXJzOwogIH0KCiAgZnVuY3Rpb24gZ2V0Q2F0UmVxdWVzdFByaWNlcygpIGNvbnN0YW50IHJldHVybnMgKHVpbnRbXSkgewogICAgdWludFtdIG1lbW9yeSBjYXRSZXF1ZXN0cyA9IG5ldyB1aW50W10ocmVzY3VlSW5kZXgpOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgcmVzY3VlSW5kZXg7IGkrKykgewogICAgICBieXRlczUgY2F0SWQgPSByZXNjdWVPcmRlcltpXTsKICAgICAgY2F0UmVxdWVzdHNbaV0gPSBhZG9wdGlvblJlcXVlc3RzW2NhdElkXS5wcmljZTsKICAgIH0KICAgIHJldHVybiBjYXRSZXF1ZXN0czsKICB9CgogIGZ1bmN0aW9uIGdldENhdERldGFpbHMoYnl0ZXM1IGNhdElkKSBjb25zdGFudCByZXR1cm5zIChieXRlczUgaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3Mgb3duZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzMzIgbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBvbmx5T2ZmZXJUbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBvZmZlclByaWNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIHJlcXVlc3RlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCByZXF1ZXN0UHJpY2UpIHsKCiAgICByZXR1cm4gKGNhdElkLAogICAgICAgICAgICBjYXRPd25lcnNbY2F0SWRdLAogICAgICAgICAgICBjYXROYW1lc1tjYXRJZF0sCiAgICAgICAgICAgIGFkb3B0aW9uT2ZmZXJzW2NhdElkXS5vbmx5T2ZmZXJUbywKICAgICAgICAgICAgYWRvcHRpb25PZmZlcnNbY2F0SWRdLnByaWNlLAogICAgICAgICAgICBhZG9wdGlvblJlcXVlc3RzW2NhdElkXS5yZXF1ZXN0ZXIsCiAgICAgICAgICAgIGFkb3B0aW9uUmVxdWVzdHNbY2F0SWRdLnByaWNlKTsKICB9CgogIC8qIG1vZGlmaWVycyAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgaW5hY3RpdmVNb2RlKCkgewogICAgcmVxdWlyZShtb2RlID09IE1vZGVzLkluYWN0aXZlKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBhY3RpdmVNb2RlKCkgewogICAgcmVxdWlyZShtb2RlID09IE1vZGVzLkxpdmUgfHwgbW9kZSA9PSBNb2Rlcy5UZXN0KTsKICAgIF87CiAgfQoKICBtb2RpZmllciBvbmx5Q2F0T3duZXIoYnl0ZXM1IGNhdElkKSB7CiAgICByZXF1aXJlKGNhdE93bmVyc1tjYXRJZF0gPT0gbXNnLnNlbmRlcik7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgaXNOb3RTZW5kZXIoYWRkcmVzcyBhKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gYSk7CiAgICBfOwogIH0KCiAgLyogdHJhbnNmZXIgaGVscGVyICovCiAgZnVuY3Rpb24gdHJhbnNmZXJDYXQoYnl0ZXM1IGNhdElkLCBhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgcHJpY2UpIHByaXZhdGUgewogICAgY2F0T3duZXJzW2NhdElkXSA9IHRvOwogICAgYmFsYW5jZU9mW2Zyb21dLS07CiAgICBiYWxhbmNlT2ZbdG9dKys7CiAgICBhZG9wdGlvbk9mZmVyc1tjYXRJZF0gPSBBZG9wdGlvbk9mZmVyKGZhbHNlLCBjYXRJZCwgMHgwLCAwLCAweDApOyAvLyBjYW5jZWwgYW55IGV4aXN0aW5nIGFkb3B0aW9uIG9mZmVyIHdoZW4gY2F0IGlzIHRyYW5zZmVycmVkCgogICAgQWRvcHRpb25SZXF1ZXN0IHN0b3JhZ2UgcmVxdWVzdCA9IGFkb3B0aW9uUmVxdWVzdHNbY2F0SWRdOyAvL2lmIHRoZSByZWNpcGllbnQgaGFzIGEgcGVuZGluZyBhZG9wdGlvbiByZXF1ZXN0LCBjYW5jZWwgaXQKICAgIGlmKHJlcXVlc3QucmVxdWVzdGVyID09IHRvKSB7CiAgICAgIHBlbmRpbmdXaXRoZHJhd2Fsc1t0b10gKz0gcmVxdWVzdC5wcmljZTsKICAgICAgYWRvcHRpb25SZXF1ZXN0c1tjYXRJZF0gPSBBZG9wdGlvblJlcXVlc3QoZmFsc2UsIGNhdElkLCAweDAsIDApOwogICAgfQoKICAgIHBlbmRpbmdXaXRoZHJhd2Fsc1tmcm9tXSArPSBwcmljZTsKCiAgICBUcmFuc2Zlcihmcm9tLCB0bywgMSk7CiAgICBDYXRBZG9wdGVkKGNhdElkLCBwcmljZSwgZnJvbSwgdG8pOwogIH0KCn0='.
	

]
