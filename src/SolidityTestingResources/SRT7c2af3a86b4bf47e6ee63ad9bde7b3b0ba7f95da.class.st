Class {
	#name : #SRT7c2af3a86b4bf47e6ee63ad9bde7b3b0ba7f95da,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7c2af3a86b4bf47e6ee63ad9bde7b3b0ba7f95da >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBEYXRlVGltZSB7CiAgICAgICAgLyoKICAgICAgICAgKiAgRGF0ZSBhbmQgVGltZSB1dGlsaXRpZXMgZm9yIGV0aGVyZXVtIGNvbnRyYWN0cwogICAgICAgICAqCiAgICAgICAgICovCiAgICAgICAgc3RydWN0IF9EYXRlVGltZSB7CiAgICAgICAgICAgICAgICB1aW50MTYgeWVhcjsKICAgICAgICAgICAgICAgIHVpbnQ4IG1vbnRoOwogICAgICAgICAgICAgICAgdWludDggZGF5OwogICAgICAgICAgICAgICAgdWludDggaG91cjsKICAgICAgICAgICAgICAgIHVpbnQ4IG1pbnV0ZTsKICAgICAgICAgICAgICAgIHVpbnQ4IHNlY29uZDsKICAgICAgICAgICAgICAgIHVpbnQ4IHdlZWtkYXk7CiAgICAgICAgfQoKICAgICAgICB1aW50IGNvbnN0YW50IERBWV9JTl9TRUNPTkRTID0gODY0MDA7CiAgICAgICAgdWludCBjb25zdGFudCBZRUFSX0lOX1NFQ09ORFMgPSAzMTUzNjAwMDsKICAgICAgICB1aW50IGNvbnN0YW50IExFQVBfWUVBUl9JTl9TRUNPTkRTID0gMzE2MjI0MDA7CgogICAgICAgIHVpbnQgY29uc3RhbnQgSE9VUl9JTl9TRUNPTkRTID0gMzYwMDsKICAgICAgICB1aW50IGNvbnN0YW50IE1JTlVURV9JTl9TRUNPTkRTID0gNjA7CgogICAgICAgIHVpbnQxNiBjb25zdGFudCBPUklHSU5fWUVBUiA9IDE5NzA7CgogICAgICAgIGZ1bmN0aW9uIGlzTGVhcFllYXIodWludDE2IHllYXIpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAgICAgICAgIGlmICh5ZWFyICUgNCAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh5ZWFyICUgMTAwICE9IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoeWVhciAlIDQwMCAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbGVhcFllYXJzQmVmb3JlKHVpbnQgeWVhcikgcHVibGljIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgICAgICAgICAgeWVhciAtPSAxOwogICAgICAgICAgICAgICAgcmV0dXJuIHllYXIgLyA0IC0geWVhciAvIDEwMCArIHllYXIgLyA0MDA7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXREYXlzSW5Nb250aCh1aW50OCBtb250aCwgdWludDE2IHllYXIpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgICAgICAgICBpZiAobW9udGggPT0gMSB8fCBtb250aCA9PSAzIHx8IG1vbnRoID09IDUgfHwgbW9udGggPT0gNyB8fCBtb250aCA9PSA4IHx8IG1vbnRoID09IDEwIHx8IG1vbnRoID09IDEyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAzMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vbnRoID09IDQgfHwgbW9udGggPT0gNiB8fCBtb250aCA9PSA5IHx8IG1vbnRoID09IDExKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAzMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzTGVhcFllYXIoeWVhcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI5OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAyODsKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHBhcnNlVGltZXN0YW1wKHVpbnQgdGltZXN0YW1wKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKF9EYXRlVGltZSBkdCkgewogICAgICAgICAgICAgICAgdWludCBzZWNvbmRzQWNjb3VudGVkRm9yID0gMDsKICAgICAgICAgICAgICAgIHVpbnQgYnVmOwogICAgICAgICAgICAgICAgdWludDggaTsKCiAgICAgICAgICAgICAgICAvLyBZZWFyCiAgICAgICAgICAgICAgICBkdC55ZWFyID0gZ2V0WWVhcih0aW1lc3RhbXApOwogICAgICAgICAgICAgICAgYnVmID0gbGVhcFllYXJzQmVmb3JlKGR0LnllYXIpIC0gbGVhcFllYXJzQmVmb3JlKE9SSUdJTl9ZRUFSKTsKCiAgICAgICAgICAgICAgICBzZWNvbmRzQWNjb3VudGVkRm9yICs9IExFQVBfWUVBUl9JTl9TRUNPTkRTICogYnVmOwogICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciArPSBZRUFSX0lOX1NFQ09ORFMgKiAoZHQueWVhciAtIE9SSUdJTl9ZRUFSIC0gYnVmKTsKCiAgICAgICAgICAgICAgICAvLyBNb250aAogICAgICAgICAgICAgICAgdWludCBzZWNvbmRzSW5Nb250aDsKICAgICAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPD0gMTI7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzSW5Nb250aCA9IERBWV9JTl9TRUNPTkRTICogZ2V0RGF5c0luTW9udGgoaSwgZHQueWVhcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWNvbmRzSW5Nb250aCArIHNlY29uZHNBY2NvdW50ZWRGb3IgPiB0aW1lc3RhbXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdC5tb250aCA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciArPSBzZWNvbmRzSW5Nb250aDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBEYXkKICAgICAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPD0gZ2V0RGF5c0luTW9udGgoZHQubW9udGgsIGR0LnllYXIpOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERBWV9JTl9TRUNPTkRTICsgc2Vjb25kc0FjY291bnRlZEZvciA+IHRpbWVzdGFtcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR0LmRheSA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciArPSBEQVlfSU5fU0VDT05EUzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBIb3VyCiAgICAgICAgICAgICAgICBkdC5ob3VyID0gZ2V0SG91cih0aW1lc3RhbXApOwoKICAgICAgICAgICAgICAgIC8vIE1pbnV0ZQogICAgICAgICAgICAgICAgZHQubWludXRlID0gZ2V0TWludXRlKHRpbWVzdGFtcCk7CgogICAgICAgICAgICAgICAgLy8gU2Vjb25kCiAgICAgICAgICAgICAgICBkdC5zZWNvbmQgPSBnZXRTZWNvbmQodGltZXN0YW1wKTsKCiAgICAgICAgICAgICAgICAvLyBEYXkgb2Ygd2Vlay4KICAgICAgICAgICAgICAgIGR0LndlZWtkYXkgPSBnZXRXZWVrZGF5KHRpbWVzdGFtcCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRZZWFyKHVpbnQgdGltZXN0YW1wKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50MTYpIHsKICAgICAgICAgICAgICAgIHVpbnQgc2Vjb25kc0FjY291bnRlZEZvciA9IDA7CiAgICAgICAgICAgICAgICB1aW50MTYgeWVhcjsKICAgICAgICAgICAgICAgIHVpbnQgbnVtTGVhcFllYXJzOwoKICAgICAgICAgICAgICAgIC8vIFllYXIKICAgICAgICAgICAgICAgIHllYXIgPSB1aW50MTYoT1JJR0lOX1lFQVIgKyB0aW1lc3RhbXAgLyBZRUFSX0lOX1NFQ09ORFMpOwogICAgICAgICAgICAgICAgbnVtTGVhcFllYXJzID0gbGVhcFllYXJzQmVmb3JlKHllYXIpIC0gbGVhcFllYXJzQmVmb3JlKE9SSUdJTl9ZRUFSKTsKCiAgICAgICAgICAgICAgICBzZWNvbmRzQWNjb3VudGVkRm9yICs9IExFQVBfWUVBUl9JTl9TRUNPTkRTICogbnVtTGVhcFllYXJzOwogICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciArPSBZRUFSX0lOX1NFQ09ORFMgKiAoeWVhciAtIE9SSUdJTl9ZRUFSIC0gbnVtTGVhcFllYXJzKTsKCiAgICAgICAgICAgICAgICB3aGlsZSAoc2Vjb25kc0FjY291bnRlZEZvciA+IHRpbWVzdGFtcCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNMZWFwWWVhcih1aW50MTYoeWVhciAtIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHNBY2NvdW50ZWRGb3IgLT0gTEVBUF9ZRUFSX0lOX1NFQ09ORFM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciAtPSBZRUFSX0lOX1NFQ09ORFM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgeWVhciAtPSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHllYXI7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRNb250aCh1aW50IHRpbWVzdGFtcCkgcHVibGljIHB1cmUgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZVRpbWVzdGFtcCh0aW1lc3RhbXApLm1vbnRoOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0RGF5KHVpbnQgdGltZXN0YW1wKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50OCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlVGltZXN0YW1wKHRpbWVzdGFtcCkuZGF5OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0SG91cih1aW50IHRpbWVzdGFtcCkgcHVibGljIHB1cmUgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB1aW50OCgodGltZXN0YW1wIC8gNjAgLyA2MCkgJSAyNCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRNaW51dGUodWludCB0aW1lc3RhbXApIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdWludDgoKHRpbWVzdGFtcCAvIDYwKSAlIDYwKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldFNlY29uZCh1aW50IHRpbWVzdGFtcCkgcHVibGljIHB1cmUgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB1aW50OCh0aW1lc3RhbXAgJSA2MCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRXZWVrZGF5KHVpbnQgdGltZXN0YW1wKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50OCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHVpbnQ4KCh0aW1lc3RhbXAgLyBEQVlfSU5fU0VDT05EUyArIDQpICUgNyk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB0b1RpbWVzdGFtcCh1aW50MTYgeWVhciwgdWludDggbW9udGgsIHVpbnQ4IGRheSkgcHVibGljIHB1cmUgcmV0dXJucyAodWludCB0aW1lc3RhbXApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0b1RpbWVzdGFtcCh5ZWFyLCBtb250aCwgZGF5LCAwLCAwLCAwKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHRvVGltZXN0YW1wKHVpbnQxNiB5ZWFyLCB1aW50OCBtb250aCwgdWludDggZGF5LCB1aW50OCBob3VyKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50IHRpbWVzdGFtcCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRvVGltZXN0YW1wKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIDAsIDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdG9UaW1lc3RhbXAodWludDE2IHllYXIsIHVpbnQ4IG1vbnRoLCB1aW50OCBkYXksIHVpbnQ4IGhvdXIsIHVpbnQ4IG1pbnV0ZSkgcHVibGljIHB1cmUgcmV0dXJucyAodWludCB0aW1lc3RhbXApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0b1RpbWVzdGFtcCh5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdG9UaW1lc3RhbXAodWludDE2IHllYXIsIHVpbnQ4IG1vbnRoLCB1aW50OCBkYXksIHVpbnQ4IGhvdXIsIHVpbnQ4IG1pbnV0ZSwgdWludDggc2Vjb25kKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50IHRpbWVzdGFtcCkgewogICAgICAgICAgICAgICAgdWludDE2IGk7CgogICAgICAgICAgICAgICAgLy8gWWVhcgogICAgICAgICAgICAgICAgZm9yIChpID0gT1JJR0lOX1lFQVI7IGkgPCB5ZWFyOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGVhcFllYXIoaSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXAgKz0gTEVBUF9ZRUFSX0lOX1NFQ09ORFM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wICs9IFlFQVJfSU5fU0VDT05EUzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIE1vbnRoCiAgICAgICAgICAgICAgICB1aW50OFsxMl0gbWVtb3J5IG1vbnRoRGF5Q291bnRzOwogICAgICAgICAgICAgICAgbW9udGhEYXlDb3VudHNbMF0gPSAzMTsKICAgICAgICAgICAgICAgIGlmIChpc0xlYXBZZWFyKHllYXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoRGF5Q291bnRzWzFdID0gMjk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhEYXlDb3VudHNbMV0gPSAyODsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG1vbnRoRGF5Q291bnRzWzJdID0gMzE7CiAgICAgICAgICAgICAgICBtb250aERheUNvdW50c1szXSA9IDMwOwogICAgICAgICAgICAgICAgbW9udGhEYXlDb3VudHNbNF0gPSAzMTsKICAgICAgICAgICAgICAgIG1vbnRoRGF5Q291bnRzWzVdID0gMzA7CiAgICAgICAgICAgICAgICBtb250aERheUNvdW50c1s2XSA9IDMxOwogICAgICAgICAgICAgICAgbW9udGhEYXlDb3VudHNbN10gPSAzMTsKICAgICAgICAgICAgICAgIG1vbnRoRGF5Q291bnRzWzhdID0gMzA7CiAgICAgICAgICAgICAgICBtb250aERheUNvdW50c1s5XSA9IDMxOwogICAgICAgICAgICAgICAgbW9udGhEYXlDb3VudHNbMTBdID0gMzA7CiAgICAgICAgICAgICAgICBtb250aERheUNvdW50c1sxMV0gPSAzMTsKCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAxOyBpIDwgbW9udGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXAgKz0gREFZX0lOX1NFQ09ORFMgKiBtb250aERheUNvdW50c1tpIC0gMV07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gRGF5CiAgICAgICAgICAgICAgICB0aW1lc3RhbXAgKz0gREFZX0lOX1NFQ09ORFMgKiAoZGF5IC0gMSk7CgogICAgICAgICAgICAgICAgLy8gSG91cgogICAgICAgICAgICAgICAgdGltZXN0YW1wICs9IEhPVVJfSU5fU0VDT05EUyAqIChob3VyKTsKCiAgICAgICAgICAgICAgICAvLyBNaW51dGUKICAgICAgICAgICAgICAgIHRpbWVzdGFtcCArPSBNSU5VVEVfSU5fU0VDT05EUyAqIChtaW51dGUpOwoKICAgICAgICAgICAgICAgIC8vIFNlY29uZAogICAgICAgICAgICAgICAgdGltZXN0YW1wICs9IHNlY29uZDsKCiAgICAgICAgICAgICAgICByZXR1cm4gdGltZXN0YW1wOwogICAgICAgIH0KfQpwcmFnbWEgc29saWRpdHkgXjAuNC4xODsKCgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLgogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CnByYWdtYSBzb2xpZGl0eSBeMC40LjE4OwoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBAZGV2IEluY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICoKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX2FkZGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gaW5jcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KICAgKi8KICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IERlY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICoKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBkZWNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3N1YnRyYWN0ZWRWYWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBkZWNyZWFzZSB0aGUgYWxsb3dhbmNlIGJ5LgogICAqLwogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9CnByYWdtYSBzb2xpZGl0eSBeMC40LjE4OwoKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgovKioKICogQHRpdGxlIERlc3RydWN0aWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3QgdGhhdCBjYW4gYmUgZGVzdHJveWVkIGJ5IG93bmVyLiBBbGwgZnVuZHMgaW4gY29udHJhY3Qgd2lsbCBiZSBzZW50IHRvIHRoZSBvd25lci4KICovCmNvbnRyYWN0IERlc3RydWN0aWJsZSBpcyBPd25hYmxlIHsKCiAgICBmdW5jdGlvbiBEZXN0cnVjdGlibGUoKSBwdWJsaWMgcGF5YWJsZSB7IH0KCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXJzIHRoZSBjdXJyZW50IGJhbGFuY2UgdG8gdGhlIG93bmVyIGFuZCB0ZXJtaW5hdGVzIHRoZSBjb250cmFjdC4KICAgICAqLwogICAgZnVuY3Rpb24gZGVzdHJveSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gZGVzdHJveUFuZFNlbmQoYWRkcmVzcyBfcmVjaXBpZW50KSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBzZWxmZGVzdHJ1Y3QoX3JlY2lwaWVudCk7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogICAgZXZlbnQgUGF1c2UoKTsKICAgIGV2ZW50IFVucGF1c2UoKTsKCiAgICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCgogICAgLyoqCiAgICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIG5vdCBwYXVzZWQuCiAgICAgKi8KICAgIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICAgICAgcmVxdWlyZSghcGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuCiAgICAgKi8KICAgIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CiAgICAgICAgcmVxdWlyZShwYXVzZWQpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgICAqLwogICAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgICAgIHBhdXNlZCA9IHRydWU7CiAgICAgICAgUGF1c2UoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAgICovCiAgICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcHVibGljIHsKICAgICAgICBwYXVzZWQgPSBmYWxzZTsKICAgICAgICBVbnBhdXNlKCk7CiAgICB9Cn0KCgovLy8gQHRpdGxlIEFCQVRva2VuIC0gVG9rZW4gY29kZSBmb3IgdGhlIEFCQSBQcm9qZWN0Ci8vLyBAYXV0aG9yIERhdmlkIENoZW4sIEphY2t5IExpbgpjb250cmFjdCBBQkFUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlLCBQYXVzYWJsZSwgRGVzdHJ1Y3RpYmxlIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJFY29zQmFsbCI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJBQkEiOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICBEYXRlVGltZSBwdWJsaWMgZGF0ZVRpbWU7CgogICAgdWludCBjb25zdGFudCBtaWxsaW9uPTEwMDAwMDBlMTg7CiAgICAvL3RvdGFsIHRva2VuIHN1cHBseTogMi4xIGJpbGxpb24KICAgIHVpbnQgY29uc3RhbnQgdG90YWxUb2tlbiA9IDIxMDAqbWlsbGlvbjsKICAgIC8vbWluZXIgcmV3YXJkOiAxLjQ3IGJpbGxpb24sIDcwJSBpbiAzMCB5ZWFycywgbG9ja2VkIGluIHRoZSBmaXJzdCB5ZWFyLCAzLjQ1JSBwZXIgeWVhciBzdGFydGVkIGZyb20gc2Vjb25kIHllYXIKICAgIHVpbnQgY29uc3RhbnQgbWluZXJUb3RhbFN1cHBseSA9IDE0NzAqbWlsbGlvbjsKICAgIC8vZnVuZDoxMDUgbWlsbGlvbiw1JSwgbG9ja2VkIGF0IGxlYXN0IDEgeWVhcgogICAgdWludCBjb25zdGFudCBmdW5kVG90YWxTdXBwbHkgPSAxMDUqbWlsbGlvbjsKICAgIC8vSUVPIHN1cHBseSAxMDUgbWlsbGlvbiw1JQogICAgdWludCBjb25zdGFudCBpZW9Ub3RhbFN1cHBseSA9IDEwNSptaWxsaW9uOwogICAgLy9Qcm9qZWN0IHRlYW0gMTA1IG1pbGxpb24sNSUsIDEyLjUlIG9mIHRoZW0gYXJlIHJlbGVhc2VkIGluIGV2ZXJ5IDYgbW9udGhzCiAgICB1aW50IGNvbnN0YW50IHByb2plY3RUb3RhbFN1cHBseSA9IDEwNSptaWxsaW9uOwogICAgLy9wcmVzYWxlIHN1cHBseSAxMDUgbWlsbGlvbiw1JQogICAgdWludCBjb25zdGFudCBwcmVzYWxlVG90YWxTdXBwbHkgPSAxMDUqbWlsbGlvbjsKICAgIC8vbWFya2V0IGFuZCBjb21tdW5pdHk6IDIxMCBtaWxsaW9uLCAxMCUsIDUwJSBvZiB0aGVtIGFyZSBsb2NrZWQgZm9yIDEgeWVhcgogICAgdWludCBjb25zdGFudCBtYXJrZXRfY29tbXVuaXR5VG90YWxTdXBwbHkgPSAyMTAqbWlsbGlvbjsKCiAgICB1aW50IHByb2plY3RVc2VkVG9rZW5zID0gMDsKICAgIHVpbnQgbWFya2V0X2NvbW11bml0eVVzZWRUb2tlbnMgPSAwOwoKICAgIGJvb2wgYkFsbG9jRnVuZCA9IGZhbHNlOwogICAgYm9vbCBiQWxsb2NNYXJrZXRfY29tbXVuaXR5ID0gZmFsc2U7CiAgICBib29sIGJBbGxvY1Byb2plY3QxID0gZmFsc2U7CiAgICBib29sIGJBbGxvY1Byb2plY3QyID0gZmFsc2U7CiAgICBib29sIGJBbGxvY1Byb2plY3QzID0gZmFsc2U7CiAgICBib29sIGJBbGxvY1Byb2plY3Q0ID0gZmFsc2U7CiAgICBib29sIGJBbGxvY1Byb2plY3Q1ID0gZmFsc2U7CiAgICBib29sIGJBbGxvY1Byb2plY3Q2ID0gZmFsc2U7CiAgICBib29sIGJBbGxvY1Byb2plY3Q3ID0gZmFsc2U7CiAgICBib29sIGJBbGxvY1Byb2plY3Q4ID0gZmFsc2U7CiAgICB1aW50IGNvbnN0YW50IHBlclByb2plY3RBbGxvYyA9IDEzMTI1MDAwZTE4OwoKICAgIGFkZHJlc3MgcHVibGljIGZ1bmRTdG9yYWdlVmF1bHQ7CiAgICBhZGRyZXNzIHB1YmxpYyBpZW9TdG9yYWdlVmF1bHQ7CiAgICBhZGRyZXNzIHB1YmxpYyBwcm9qZWN0U3RvcmFnZVZhdWx0OwogICAgYWRkcmVzcyBwdWJsaWMgcHJlc2FsZVN0b3JhZ2VWYXVsdDsKICAgIGFkZHJlc3MgcHVibGljIG1hcmtldF9jb21tdW5pdHlTdG9yYWdlVmF1bHQ7CgogICAgLy9Abm90aWNlICBDb25zdHJ1Y3RvciBvZiBBQkFUb2tlbgogICAgZnVuY3Rpb24gQUJBVG9rZW4oKSB7CiAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxUb2tlbjsKICAgICAgZnVuZFN0b3JhZ2VWYXVsdCA9IDB4YTViMkYxODk1NTJkMzIwMGZGMzkzYTM4Y0NEOTBENjNGM2E5OUQwODsKICAgICAgaWVvU3RvcmFnZVZhdWx0ID0gMHgwN0QxNTBBNTE0RUIzOTRlZmU0ODc5ZDUzMEM0YzZDNzEwNTA5RGE3OwogICAgICBwcm9qZWN0U3RvcmFnZVZhdWx0ID0gMHhkMjc1ZUQxMzU5Rjg5MjUxRmJEZUNkQ2JDMTk2QjU3QWQ3MUI4NTFjOwogICAgICBwcmVzYWxlU3RvcmFnZVZhdWx0ID0gMHhlQTQyNkI3ODJENzUyNmQ1MjM2RmYzOTUxNTY5NmNCMDk2RjVBZjBBOwogICAgICBtYXJrZXRfY29tbXVuaXR5U3RvcmFnZVZhdWx0ID0gMHhBNDA4NTI5ZWI3YTIzMzgwOEY0YzM3MzA4ZWQ1MmUwMjA0NmU3QjA5OwoKICAgICAgYmFsYW5jZXNbZnVuZFN0b3JhZ2VWYXVsdF0gPSAwOwogICAgICBiYWxhbmNlc1tpZW9TdG9yYWdlVmF1bHRdID0gaWVvVG90YWxTdXBwbHk7CiAgICAgIGJhbGFuY2VzW3Byb2plY3RTdG9yYWdlVmF1bHRdID0gMDsKICAgICAgYmFsYW5jZXNbcHJlc2FsZVN0b3JhZ2VWYXVsdF0gPSBwcmVzYWxlVG90YWxTdXBwbHk7CiAgICAgIG1hcmtldF9jb21tdW5pdHlVc2VkVG9rZW5zID0gbWFya2V0X2NvbW11bml0eVRvdGFsU3VwcGx5LmRpdigyKTsKICAgICAgYmFsYW5jZXNbbWFya2V0X2NvbW11bml0eVN0b3JhZ2VWYXVsdF0gPSBtYXJrZXRfY29tbXVuaXR5VXNlZFRva2VuczsKCiAgICAgIGRhdGVUaW1lID0gbmV3IERhdGVUaW1lKCk7CiAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gbWluZXJUb3RhbFN1cHBseTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvY2F0ZUZ1bmRUb2tlbigpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIGV4dGVybmFsIHsKICAgICAgaWYgKG5vdyA8IGRhdGVUaW1lLnRvVGltZXN0YW1wKDIwMTksNCwxNSkpIHRocm93OwogICAgICBpZiAoYkFsbG9jRnVuZCkgdGhyb3c7CiAgICAgIGJBbGxvY0Z1bmQgPSB0cnVlOwogICAgICBiYWxhbmNlc1tmdW5kU3RvcmFnZVZhdWx0XSA9IGJhbGFuY2VzW2Z1bmRTdG9yYWdlVmF1bHRdLmFkZChmdW5kVG90YWxTdXBwbHkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFByb2plY3RVc2VkVG9rZW5zKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICByZXR1cm4gcHJvamVjdFVzZWRUb2tlbnM7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UHJvamVjdFVudXNlZFRva2VucygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgaWYocHJvamVjdFVzZWRUb2tlbnMgPiBwcm9qZWN0VG90YWxTdXBwbHkpIHRocm93OwogICAgICB1aW50IHByb2plY3RVbnVzZWRUb2tlbnMgPSBwcm9qZWN0VG90YWxTdXBwbHkuc3ViKHByb2plY3RVc2VkVG9rZW5zKTsKICAgICAgcmV0dXJuIHByb2plY3RVbnVzZWRUb2tlbnM7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb2NhdGUxUHJvamVjdFRva2VuKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgZXh0ZXJuYWwgewogICAgICBpZiAobm93IDwgZGF0ZVRpbWUudG9UaW1lc3RhbXAoMjAxOCw2LDMwKSkgdGhyb3c7CiAgICAgIGlmIChiQWxsb2NQcm9qZWN0MSkgdGhyb3c7CiAgICAgIGJBbGxvY1Byb2plY3QxID0gdHJ1ZTsKICAgICAgcHJvamVjdFVzZWRUb2tlbnMgPSBwcm9qZWN0VXNlZFRva2Vucy5hZGQocGVyUHJvamVjdEFsbG9jKTsKICAgICAgYmFsYW5jZXNbcHJvamVjdFN0b3JhZ2VWYXVsdF0gPSBiYWxhbmNlc1twcm9qZWN0U3RvcmFnZVZhdWx0XS5hZGQocGVyUHJvamVjdEFsbG9jKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvY2F0ZTJQcm9qZWN0VG9rZW4oKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBleHRlcm5hbCB7CiAgICAgIGlmIChub3cgPCBkYXRlVGltZS50b1RpbWVzdGFtcCgyMDE4LDEyLDMxKSkgdGhyb3c7CiAgICAgIGlmIChiQWxsb2NQcm9qZWN0MikgdGhyb3c7CiAgICAgIGJBbGxvY1Byb2plY3QyID0gdHJ1ZTsKICAgICAgcHJvamVjdFVzZWRUb2tlbnMgPSBwcm9qZWN0VXNlZFRva2Vucy5hZGQocGVyUHJvamVjdEFsbG9jKTsKICAgICAgYmFsYW5jZXNbcHJvamVjdFN0b3JhZ2VWYXVsdF0gPSBiYWxhbmNlc1twcm9qZWN0U3RvcmFnZVZhdWx0XS5hZGQocGVyUHJvamVjdEFsbG9jKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvY2F0ZTNQcm9qZWN0VG9rZW4oKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBleHRlcm5hbCB7CiAgICAgIGlmIChub3cgPCBkYXRlVGltZS50b1RpbWVzdGFtcCgyMDE5LDYsMzApKSB0aHJvdzsKICAgICAgaWYgKGJBbGxvY1Byb2plY3QzKSB0aHJvdzsKICAgICAgYkFsbG9jUHJvamVjdDMgPSB0cnVlOwogICAgICBwcm9qZWN0VXNlZFRva2VucyA9IHByb2plY3RVc2VkVG9rZW5zLmFkZChwZXJQcm9qZWN0QWxsb2MpOwogICAgICBiYWxhbmNlc1twcm9qZWN0U3RvcmFnZVZhdWx0XSA9IGJhbGFuY2VzW3Byb2plY3RTdG9yYWdlVmF1bHRdLmFkZChwZXJQcm9qZWN0QWxsb2MpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG9jYXRlNFByb2plY3RUb2tlbigpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIGV4dGVybmFsIHsKICAgICAgaWYgKG5vdyA8IGRhdGVUaW1lLnRvVGltZXN0YW1wKDIwMTksMTIsMzEpKSB0aHJvdzsKICAgICAgaWYgKGJBbGxvY1Byb2plY3Q0KSB0aHJvdzsKICAgICAgYkFsbG9jUHJvamVjdDQgPSB0cnVlOwogICAgICBwcm9qZWN0VXNlZFRva2VucyA9IHByb2plY3RVc2VkVG9rZW5zLmFkZChwZXJQcm9qZWN0QWxsb2MpOwogICAgICBiYWxhbmNlc1twcm9qZWN0U3RvcmFnZVZhdWx0XSA9IGJhbGFuY2VzW3Byb2plY3RTdG9yYWdlVmF1bHRdLmFkZChwZXJQcm9qZWN0QWxsb2MpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG9jYXRlNVByb2plY3RUb2tlbigpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIGV4dGVybmFsIHsKICAgICAgaWYgKG5vdyA8IGRhdGVUaW1lLnRvVGltZXN0YW1wKDIwMjAsNiwzMCkpIHRocm93OwogICAgICBpZiAoYkFsbG9jUHJvamVjdDUpIHRocm93OwogICAgICBiQWxsb2NQcm9qZWN0NSA9IHRydWU7CiAgICAgIHByb2plY3RVc2VkVG9rZW5zID0gcHJvamVjdFVzZWRUb2tlbnMuYWRkKHBlclByb2plY3RBbGxvYyk7CiAgICAgIGJhbGFuY2VzW3Byb2plY3RTdG9yYWdlVmF1bHRdID0gYmFsYW5jZXNbcHJvamVjdFN0b3JhZ2VWYXVsdF0uYWRkKHBlclByb2plY3RBbGxvYyk7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb2NhdGU2UHJvamVjdFRva2VuKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgZXh0ZXJuYWwgewogICAgICBpZiAobm93IDwgZGF0ZVRpbWUudG9UaW1lc3RhbXAoMjAyMCwxMiwzMSkpIHRocm93OwogICAgICBpZiAoYkFsbG9jUHJvamVjdDYpIHRocm93OwogICAgICBiQWxsb2NQcm9qZWN0NiA9IHRydWU7CiAgICAgIHByb2plY3RVc2VkVG9rZW5zID0gcHJvamVjdFVzZWRUb2tlbnMuYWRkKHBlclByb2plY3RBbGxvYyk7CiAgICAgIGJhbGFuY2VzW3Byb2plY3RTdG9yYWdlVmF1bHRdID0gYmFsYW5jZXNbcHJvamVjdFN0b3JhZ2VWYXVsdF0uYWRkKHBlclByb2plY3RBbGxvYyk7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb2NhdGU3UHJvamVjdFRva2VuKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgZXh0ZXJuYWwgewogICAgICBpZiAobm93IDwgZGF0ZVRpbWUudG9UaW1lc3RhbXAoMjAyMSw2LDMwKSkgdGhyb3c7CiAgICAgIGlmIChiQWxsb2NQcm9qZWN0NykgdGhyb3c7CiAgICAgIGJBbGxvY1Byb2plY3Q3ID0gdHJ1ZTsKICAgICAgcHJvamVjdFVzZWRUb2tlbnMgPSBwcm9qZWN0VXNlZFRva2Vucy5hZGQocGVyUHJvamVjdEFsbG9jKTsKICAgICAgYmFsYW5jZXNbcHJvamVjdFN0b3JhZ2VWYXVsdF0gPSBiYWxhbmNlc1twcm9qZWN0U3RvcmFnZVZhdWx0XS5hZGQocGVyUHJvamVjdEFsbG9jKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvY2F0ZThQcm9qZWN0VG9rZW4oKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBleHRlcm5hbCB7CiAgICAgIGlmIChub3cgPCBkYXRlVGltZS50b1RpbWVzdGFtcCgyMDIxLDEyLDMxKSkgdGhyb3c7CiAgICAgIGlmIChiQWxsb2NQcm9qZWN0OCkgdGhyb3c7CiAgICAgIGJBbGxvY1Byb2plY3Q4ID0gdHJ1ZTsKICAgICAgcHJvamVjdFVzZWRUb2tlbnMgPSBwcm9qZWN0VXNlZFRva2Vucy5hZGQocGVyUHJvamVjdEFsbG9jKTsKICAgICAgYmFsYW5jZXNbcHJvamVjdFN0b3JhZ2VWYXVsdF0gPSBiYWxhbmNlc1twcm9qZWN0U3RvcmFnZVZhdWx0XS5hZGQocGVyUHJvamVjdEFsbG9jKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvY2F0ZU1hcmtldF9Db21tdW5pdFRva2VucygpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIGV4dGVybmFsIHsKICAgICAgaWYgKG5vdyA8IGRhdGVUaW1lLnRvVGltZXN0YW1wKDIwMTksNCwxNSkpIHRocm93OwogICAgICBpZiAoYkFsbG9jTWFya2V0X2NvbW11bml0eSkgdGhyb3c7CiAgICAgIGJBbGxvY01hcmtldF9jb21tdW5pdHkgPSB0cnVlOwogICAgICB1aW50IG5vd0FsbG9jYXRlVG9rZW5zID0gbWFya2V0X2NvbW11bml0eVRvdGFsU3VwcGx5LmRpdigyKTsKICAgICAgbWFya2V0X2NvbW11bml0eVVzZWRUb2tlbnMgPSBtYXJrZXRfY29tbXVuaXR5VXNlZFRva2Vucy5hZGQobWFya2V0X2NvbW11bml0eVVzZWRUb2tlbnMpOwogICAgICBiYWxhbmNlc1ttYXJrZXRfY29tbXVuaXR5U3RvcmFnZVZhdWx0XSA9IGJhbGFuY2VzW21hcmtldF9jb21tdW5pdHlTdG9yYWdlVmF1bHRdLmFkZChub3dBbGxvY2F0ZVRva2Vucyk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TWFya2V0X0NvbW11bml0VXNlZFRva2VucygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIG1hcmtldF9jb21tdW5pdHlVc2VkVG9rZW5zOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE1hcmtldF9Db21tdW5pdFVudXNlZFRva2VucygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgaWYobWFya2V0X2NvbW11bml0eVVzZWRUb2tlbnMgPiBtYXJrZXRfY29tbXVuaXR5VG90YWxTdXBwbHkpIHRocm93OwogICAgICB1aW50IG1hcmtldF9jb21tdW5pdHlVbnVzZWRUb2tlbnMgPSBtYXJrZXRfY29tbXVuaXR5VG90YWxTdXBwbHkuc3ViKG1hcmtldF9jb21tdW5pdHlVc2VkVG9rZW5zKTsKICAgICAgcmV0dXJuIG1hcmtldF9jb21tdW5pdHlVbnVzZWRUb2tlbnM7CiAgICB9Cn0='.
	

]
