Class {
	#name : #SRT180c288c2151200ad37d150308346b1be421d32c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT180c288c2151200ad37d150308346b1be421d32c >> base64 [
	^ 'LyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpwcmFnbWEgc29saWRpdHkgXjAuNC4xODsKCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICAvLyB0aW1lc3RhbXBzIGZvciBQUkUtSUNPIHBoYXNlCiAgICB1aW50IHB1YmxpYyBwcmVpY29TdGFydERhdGU7CiAgICB1aW50IHB1YmxpYyBwcmVpY29FbmREYXRlOwogICAgLy8gdGltZXN0YW1wcyBmb3IgSUNPIHBoYXNlCiAgICB1aW50IHB1YmxpYyBpY29TdGFydERhdGU7CiAgICB1aW50IHB1YmxpYyBpY29FbmREYXRlOwogICAgCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKG5vdyA+IGljb0VuZERhdGUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAgICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogICAgLyoqCiAgICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUobm93ID4gaWNvRW5kRGF0ZSk7CiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKCiAgICAgICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgICAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKfQoKY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICAvKioKICAgICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAgICogYWNjb3VudC4KICAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IFRoZU1vdmVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJNT1ZFIFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIk1PVkUiOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgLy8gYWRkcmVzcyB3aGVyZSBmdW5kcyBhcmUgY29sbGVjdGVkCiAgICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CiAgICAvLyBob3cgbWFueSB0b2tlbiB1bml0cyBhIGJ1eWVyIGdldHMgcGVyIHdlaQogICAgdWludDI1NiBwdWJsaWMgcmF0ZTsKICAgIHVpbnQyNTYgcHVibGljIG1pblRyYW5zYWN0aW9uQW1vdW50OwogICAgdWludDI1NiBwdWJsaWMgcmFpc2VkRm9yRXRoZXIgPSAwOwogICAgdWludDI1NiBwcml2YXRlIHByZWljb1N1cHBseSA9IDMwNzIwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICB1aW50MjU2IHByaXZhdGUgaWNvU3VwcGx5ID0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICB1aW50MjU2IHByaXZhdGUgYm9udXNlc1N1cHBseSA9IDMwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CgogICAgdWludDI1NiBwdWJsaWMgYm9udXNlc1NvbGQgPSAwOwogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zU29sZCA9IDA7CgogICAgLy8gUFJFLUlDTyBzdGFnZXMKICAgIHVpbnQyNTYgcHVibGljIHN0YWdlMSA9IDI0MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgIHVpbnQyNTYgcHVibGljIHN0YWdlMiA9IDM2MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgIHVpbnQyNTYgcHVibGljIHN0YWdlMyA9IDk2MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgIHVpbnQyNTYgcHVibGljIHN0YWdlNCA9IDE1MTIwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CgogICAgbW9kaWZpZXIgaW5BY3RpdmVQZXJpb2QoKSB7CgkgICByZXF1aXJlKChwcmVpY29TdGFydERhdGUgPCBub3cgJiYgbm93IDw9IHByZWljb0VuZERhdGUpIHx8IChpY29TdGFydERhdGUgPCBub3cgJiYgbm93IDw9IGljb0VuZERhdGUpKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIFRoZU1vdmVUb2tlbih1aW50IF9wcmVpY29zdGFydCwgdWludCBfcHJlaWNvZW5kLHVpbnQgX2ljb3N0YXJ0LCB1aW50IF9pY29lbmQsIGFkZHJlc3MgX3dhbGxldCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF93YWxsZXQgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKF9wcmVpY29zdGFydCA8IF9wcmVpY29lbmQpOwogICAgICAgIHJlcXVpcmUoX3ByZWljb2VuZCA8IF9pY29zdGFydCk7CiAgICAgICAgcmVxdWlyZShfaWNvc3RhcnQgPCBfaWNvZW5kKTsKCiAgICAgICAgdG90YWxTdXBwbHkgPSAyMTE3MjAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgICAgICByYXRlID0gNjAwOwoKICAgICAgICAvLyBtaW5pbWFsIGludmVzdAogICAgICAgIG1pblRyYW5zYWN0aW9uQW1vdW50ID0gMC4xIGV0aGVyOwogICAgICAgIGljb1N0YXJ0RGF0ZSA9IF9pY29zdGFydDsKICAgICAgICBpY29FbmREYXRlID0gX2ljb2VuZDsKICAgICAgICBwcmVpY29TdGFydERhdGUgPSBfcHJlaWNvc3RhcnQ7CiAgICAgICAgcHJlaWNvRW5kRGF0ZSA9IF9wcmVpY29lbmQ7CiAgICAgICAgd2FsbGV0ID0gX3dhbGxldDsKCgkgICAvLyBTdG9yZSB0aGUgaWNvIGZ1bmRzIGluIHRoZSBjb250cmFjdCBhbmQgc2VuZCB0aGUgcmVzdCB0byB0aGUgZGV2ZWxvcGVyIHdhbGxldAogICAgICAgdWludDI1NiBhbW91bnRJbkNvbnRyYWN0ID0gcHJlaWNvU3VwcGx5ICsgaWNvU3VwcGx5ICsgYm9udXNlc1N1cHBseTsKCgkgICBiYWxhbmNlc1t0aGlzXSA9IGJhbGFuY2VzW3RoaXNdLmFkZChhbW91bnRJbkNvbnRyYWN0KTsKICAgICAgIGJhbGFuY2VzW193YWxsZXRdID0gYmFsYW5jZXNbX3dhbGxldF0uYWRkKHRvdGFsU3VwcGx5IC0gYW1vdW50SW5Db250cmFjdCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0dXBQUkVJQ09QZXJpb2QodWludCBfc3RhcnQsIHVpbnQgX2VuZCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfc3RhcnQgPCBfZW5kKTsKICAgICAgICBwcmVpY29TdGFydERhdGUgPSBfc3RhcnQ7CiAgICAgICAgcHJlaWNvRW5kRGF0ZSA9IF9lbmQ7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0dXBJQ09QZXJpb2QodWludCBfc3RhcnQsIHVpbnQgX2VuZCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfc3RhcnQgPCBfZW5kKTsKICAgICAgICBpY29TdGFydERhdGUgPSBfc3RhcnQ7CiAgICAgICAgaWNvRW5kRGF0ZSA9IF9lbmQ7CiAgICB9CgogICAgLy8gZmFsbGJhY2sgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYnV5IHRva2VucwogICAgZnVuY3Rpb24gKCkgcHVibGljIGluQWN0aXZlUGVyaW9kIHBheWFibGUgewogICAgICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJuUFJFSUNPVG9rZW5zKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaW50MjU2IGFtb3VudFRvQnVybiA9IGludDI1NihwcmVpY29TdXBwbHkpIC0gaW50MjU2KHRva2Vuc1NvbGQpOwogICAgICAgIGlmIChhbW91bnRUb0J1cm4gPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW3RoaXNdID0gYmFsYW5jZXNbdGhpc10uc3ViKHVpbnQyNTYoYW1vdW50VG9CdXJuKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIFVzZSB3aXRoIGV4dHJlbWUgY2F1dGlvbiB0aGlzIHdpbGwgYnVybiB0aGUgcmVzdCBvZiB0aGUgdG9rZW5zIGluIHRoZSBjb250cmFjdAogICAgZnVuY3Rpb24gYnVybklDT1Rva2VucygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGJhbGFuY2VzW3RoaXNdID0gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJuQm9udXNlcygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGludDI1NiBhbW91bnRUb0J1cm4gPSBpbnQyNTYoYm9udXNlc1N1cHBseSkgLSBpbnQyNTYoYm9udXNlc1NvbGQpOwogICAgICAgIGlmIChhbW91bnRUb0J1cm4gPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW3RoaXNdID0gYmFsYW5jZXNbdGhpc10uc3ViKHVpbnQyNTYoYW1vdW50VG9CdXJuKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIGxvdyBsZXZlbCB0b2tlbiBwdXJjaGFzZSBmdW5jdGlvbgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgX3NlbmRlcikgcHVibGljIGluQWN0aXZlUGVyaW9kIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoX3NlbmRlciAhPSAweDApOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IG1pblRyYW5zYWN0aW9uQW1vdW50KTsKCiAgICAgICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CgogICAgICAgIHJhaXNlZEZvckV0aGVyID0gcmFpc2VkRm9yRXRoZXIuYWRkKHdlaUFtb3VudCk7CgogICAgICAgIC8vIGNhbGN1bGF0ZSB0b2tlbiBhbW91bnQgdG8gYmUgaXNzdWVkCiAgICAgICAgdWludDI1NiB0b2tlbnMgPSB3ZWlBbW91bnQubXVsKHJhdGUpOwogICAgICAgIHRva2VucyArPSBnZXRCb251cyh0b2tlbnMpOwoKICAgICAgICBpZiAoaXNQUkVJQ08oKSkgewogICAgICAgICAgICByZXF1aXJlKHRva2Vuc1NvbGQgKyB0b2tlbnMgPCBwcmVpY29TdXBwbHkpOwogICAgICAgIH0gZWxzZSBpZiAoaXNJQ08oKSkgewogICAgICAgICAgICByZXF1aXJlKHRva2Vuc1NvbGQgKyB0b2tlbnMgPD0gKGljb1N1cHBseSArIGJvbnVzZXNTdXBwbHkpKTsKICAgICAgICB9CgogICAgICAgIGlzc3VlVG9rZW5zKF9zZW5kZXIsIHRva2Vucyk7CiAgICAgICAgdG9rZW5zU29sZCArPSB0b2tlbnM7CiAgICB9CiAgICAKICAgIC8vIEhpZ2ggbGV2ZWwgdG9rZW4gaXNzdWUgZnVuY3Rpb24KICAgIC8vIFRoaXMgd2lsbCBiZSB1c2VkIGJ5IHRoZSBzY3JpcHQgd2hpY2ggZGlzdHJpYnV0ZXMgdG9rZW5zCiAgICAvLyB0byB0aG9zZSB3aG8gY29udHJpYnV0ZWQgaW4gQlRDIG9yIExUQy4KICAgIGZ1bmN0aW9uIHNlbmRUb2tlbnMoYWRkcmVzcyBfc2VuZGVyLCB1aW50MjU2IGFtb3VudCkgcHVibGljIGluQWN0aXZlUGVyaW9kIG9ubHlPd25lciB7CiAgICAgICAgLy8gY2FsY3VsYXRlIHRva2VuIGFtb3VudCB0byBiZSBpc3N1ZWQKICAgICAgICB1aW50MjU2IHRva2VucyA9IGFtb3VudC5tdWwocmF0ZSk7CiAgICAgICAgdG9rZW5zICs9IGdldEJvbnVzKHRva2Vucyk7CgogICAgICAgIGlmIChpc1BSRUlDTygpKSB7CiAgICAgICAgICAgIHJlcXVpcmUodG9rZW5zU29sZCArIHRva2VucyA8IHByZWljb1N1cHBseSk7CiAgICAgICAgfSBlbHNlIGlmIChpc0lDTygpKSB7CiAgICAgICAgICAgIHJlcXVpcmUodG9rZW5zU29sZCArIHRva2VucyA8PSAoaWNvU3VwcGx5ICsgYm9udXNlc1N1cHBseSkpOwogICAgICAgIH0KCiAgICAgICAgaXNzdWVUb2tlbnMoX3NlbmRlciwgdG9rZW5zKTsKICAgICAgICB0b2tlbnNTb2xkICs9IHRva2VuczsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aGVyKHVpbnQyNTYgYW1vdW50KSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIG93bmVyLnRyYW5zZmVyKGFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNQUkVJQ08oKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIChwcmVpY29TdGFydERhdGUgPCBub3cgJiYgbm93IDw9IHByZWljb0VuZERhdGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzSUNPKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAoaWNvU3RhcnREYXRlIDwgbm93ICYmIG5vdyA8PSBpY29FbmREYXRlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRCb251cyh1aW50MjU2IF90b2tlbnMpIHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmVxdWlyZShfdG9rZW5zICE9IDApOwogICAgICAgIHVpbnQyNTYgYm9udXNlcyA9IDA7CiAgICAgICAgdWludDI1NiBtdWx0aXBsaWVyID0gMDsKCiAgICAgICAgLy8gRmlyc3QgY2FzZSBpZiBQUkUtSUNPIGlzIGhhcHBlbmluZwogICAgICAgIGlmIChpc1BSRUlDTygpKSB7CiAgICAgICAgICAgIC8vIEJvbnVzIGRlcGVuZHMgb24gdGhlIGFtb3VudCBvZiB0b2tlbnMgc29sZC4KICAgICAgICAgICAgaWYgKHRva2Vuc1NvbGQgPCBzdGFnZTEpIHsKICAgICAgICAgICAgICAgIC8vIDEwMCUgYm9udXMgZm9yIHN0YWdlMQogICAgICAgICAgICAgICAgbXVsdGlwbGllciA9IDEwMDsKICAgICAgICAgICAgfSBlbHNlIGlmIChzdGFnZTEgPCB0b2tlbnNTb2xkICYmIHRva2Vuc1NvbGQgPCAoc3RhZ2UxICsgc3RhZ2UyKSkgewogICAgICAgICAgICAgICAgLy8gODAlIGJvbnVzIGZvciBzdGFnZTIKICAgICAgICAgICAgICAgIG11bHRpcGxpZXIgPSA4MDsKICAgICAgICAgICAgfSBlbHNlIGlmICgoc3RhZ2UxICsgc3RhZ2UyKSA8IHRva2Vuc1NvbGQgJiYgdG9rZW5zU29sZCA8IChzdGFnZTEgKyBzdGFnZTIgKyBzdGFnZTMpKSB7CiAgICAgICAgICAgICAgICAvLyA2MCUgYm9udXMgZm9yIHN0YWdlMgogICAgICAgICAgICAgICAgbXVsdGlwbGllciA9IDYwOwogICAgICAgICAgICB9IGVsc2UgaWYgKChzdGFnZTEgKyBzdGFnZTIgKyBzdGFnZTMpIDwgdG9rZW5zU29sZCAmJiB0b2tlbnNTb2xkIDwgKHN0YWdlMSArIHN0YWdlMiArIHN0YWdlMyArIHN0YWdlNCkpIHsKICAgICAgICAgICAgICAgIC8vIDQwJSBib251cyBmb3Igc3RhZ2UyCiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyID0gNDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9udXNlcyA9IF90b2tlbnMubXVsKG11bHRpcGxpZXIpLmRpdigxMDApOwoKICAgICAgICAgICAgcmV0dXJuIGJvbnVzZXM7CiAgICAgICAgfQoKICAgICAgICAKICAgICAgICAvLyBTZWNvbmQgY2FzZSBpZiBJQ08gaXMgaGFwcGVuaW5nCiAgICAgICAgZWxzZSBpZiAoaXNJQ08oKSkgewogICAgICAgICAgICAvLyBCb251cyBkZXBlbmRzIG9uIHRoZSB3ZWVrIG9mIHRoZSBJQ08gYW5kIHRoZSBib251cyBzdXBwbHkKICAgICAgICAgICAgaWYgKGljb1N0YXJ0RGF0ZSA8IG5vdyAmJiBub3cgPD0gaWNvU3RhcnREYXRlICsgNyBkYXlzKSB7CiAgICAgICAgICAgICAgICAvLyAyMCUgYm9udXMgd2VlayAxCiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyID0gMjA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaWNvU3RhcnREYXRlICsgNyBkYXlzIDwgbm93ICYmIG5vdyA8PSBpY29TdGFydERhdGUgKyAxNCBkYXlzICkgewogICAgICAgICAgICAgICAgLy8gMTAlIGJvbnVzIHdlZWsgMgogICAgICAgICAgICAgICAgbXVsdGlwbGllciA9IDEwOwogICAgICAgICAgICB9IGVsc2UgaWYgKGljb1N0YXJ0RGF0ZSArIDE0IGRheXMgPCBub3cgJiYgbm93IDw9IGljb1N0YXJ0RGF0ZSArIDIxIGRheXMgKSB7CiAgICAgICAgICAgICAgICAvLyA1JSBib251cyB3ZWVrIDMKICAgICAgICAgICAgICAgIG11bHRpcGxpZXIgPSA1OwogICAgICAgICAgICB9CgogICAgICAgICAgICBib251c2VzID0gX3Rva2Vucy5tdWwobXVsdGlwbGllcikuZGl2KDEwMCk7CgogICAgICAgICAgICAvLyBCb251cyBzdXBwbHkgbGltaXQgcmVhY2hlZC4KICAgICAgICAgICAgaWYgKGJvbnVzZXNTb2xkICsgYm9udXNlcyA+IGJvbnVzZXNTdXBwbHkpIHsKICAgICAgICAgICAgICAgIGJvbnVzZXMgPSAwOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYm9udXNlc1NvbGQgKz0gYm9udXNlczsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYm9udXNlczsKICAgICAgICB9IAogICAgfQoKICAgIC8vIFRoaXMgZnVuY3Rpb24gdHJhbnNmZXJzIHRva2VucyB0byB0aGUgY29udHJpYnV0b3IncyBhY2NvdW50LgogICAgZnVuY3Rpb24gaXNzdWVUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbdGhpc10gPSBiYWxhbmNlc1t0aGlzXS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0='.
	

]
