Class {
	#name : #SRT0c4911ba2a7ef0a82e7bfce61b7e358121196ba1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0c4911ba2a7ef0a82e7bfce61b7e358121196ba1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgIT0gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQogIAogIGZ1bmN0aW9uIG11bEJ5RnJhY3Rpb24odWludDI1NiBudW1iZXIsIHVpbnQyNTYgbnVtZXJhdG9yLCB1aW50MjU2IGRlbm9taW5hdG9yKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgIHJldHVybiBkaXYobXVsKG51bWJlciwgbnVtZXJhdG9yKSwgZGVub21pbmF0b3IpOwogIH0KfQoKCi8vLyBJbXBsZW1lbnRzIEVSQyAyMCBUb2tlbiBzdGFuZGFyZDogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCi8vLyBAdGl0bGUgQWJzdHJhY3QgdG9rZW4gY29udHJhY3QgLSBGdW5jdGlvbnMgdG8gYmUgaW1wbGVtZW50ZWQgYnkgdG9rZW4gY29udHJhY3RzLgoKY29udHJhY3QgQWJzdHJhY3RUb2tlbiB7CiAgICAvLyBUaGlzIGlzIG5vdCBhbiBhYnN0cmFjdCBmdW5jdGlvbiwgYmVjYXVzZSBzb2xjIHdvbid0IHJlY29nbml6ZSBnZW5lcmF0ZWQgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgcHVibGljIHZhcmlhYmxlcyBhcyBmdW5jdGlvbnMKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nikge30KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIG93bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgSXNzdWFuY2UoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBBYnN0cmFjdFRva2VuIHsKICAgIC8qCiAgICAgKiAgRGF0YSBzdHJ1Y3R1cmVzCiAgICAgKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICAvKgogICAgICogIFJlYWQgYW5kIHdyaXRlIHN0b3JhZ2UgZnVuY3Rpb25zCiAgICAgKi8KICAgIC8vLyBAZGV2IFRyYW5zZmVycyBzZW5kZXIncyB0b2tlbnMgdG8gYSBnaXZlbiBhZGRyZXNzLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIHRva2VuIHJlY2VpdmVyLgogICAgLy8vIEBwYXJhbSBfdmFsdWUgTnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgYWxsb3dlZCB0aGlyZCBwYXJ0eSB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF9mcm9tIEFkZHJlc3MgZnJvbSB3aGVyZSB0b2tlbnMgYXJlIHdpdGhkcmF3bi4KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3MgdG8gd2hlcmUgdG9rZW5zIGFyZSBzZW50LgogICAgLy8vIEBwYXJhbSBfdmFsdWUgTnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBAZGV2IFJldHVybnMgbnVtYmVyIG9mIHRva2VucyBvd25lZCBieSBnaXZlbiBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLy8vIEBkZXYgU2V0cyBhcHByb3ZlZCBhbW91bnQgb2YgdG9rZW5zIGZvciBzcGVuZGVyLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgYWxsb3dlZCBhY2NvdW50LgogICAgLy8vIEBwYXJhbSBfdmFsdWUgTnVtYmVyIG9mIGFwcHJvdmVkIHRva2Vucy4KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qCiAgICAgKiBSZWFkIHN0b3JhZ2UgZnVuY3Rpb25zCiAgICAgKi8KICAgIC8vLyBAZGV2IFJldHVybnMgbnVtYmVyIG9mIGFsbG93ZWQgdG9rZW5zIGZvciBnaXZlbiBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiB0b2tlbiBzcGVuZGVyLgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCn0KCgpjb250cmFjdCBJbW1sYVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIFNhZmVNYXRoIHsKICAgIC8qCiAgICAgKiBUb2tlbiBtZXRhIGRhdGEKICAgICAqLwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIklNTUxBIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIklNTCI7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgc3VwcGx5TGltaXQgPSA1NTA2ODg5NTUwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIGljb0NvbnRyYWN0ID0gMHgwOwogICAgLyoKICAgICAqIE1vZGlmaWVycwogICAgICovCiAgICAKICAgIG1vZGlmaWVyIG9ubHlJY29Db250cmFjdCgpIHsKICAgICAgICAvLyBvbmx5IElDTyBjb250cmFjdCBpcyBhbGxvd2VkIHRvIHByb2NlZWQKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gaWNvQ29udHJhY3QpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIC8qCiAgICAgKiBDb250cmFjdCBmdW5jdGlvbnMKICAgICAqLwogICAgCiAgICAvLy8gQGRldiBDb250cmFjdCBpcyBuZWVkZWQgaW4gaWNvQ29udHJhY3QgYWRkcmVzcwogICAgLy8vIEBwYXJhbSBfaWNvQ29udHJhY3QgQWRkcmVzcyBvZiBhY2NvdW50IHdoaWNoIHdpbGwgYmUgbWludCB0b2tlbnMKICAgIGZ1bmN0aW9uIEltbWxhVG9rZW4oYWRkcmVzcyBfaWNvQ29udHJhY3QpIHsKICAgICAgICBhc3NlcnQoX2ljb0NvbnRyYWN0ICE9IDB4MCk7CiAgICAgICAgaWNvQ29udHJhY3QgPSBfaWNvQ29udHJhY3Q7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IEJ1cm5zIHRva2VucyBmcm9tIGFkZHJlc3MuIEl0J3MgY2FuIGJlIGFwcGxpZWQgYnkgYWNjb3VudCB3aXRoIGFkZHJlc3MgdGhpcy5pY29Db250cmFjdAogICAgLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIG9mIGFjY291bnQsIGZyb20gd2hpY2ggd2lsbCBiZSBidXJuZWQgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBBbW91bnQgb2YgdG9rZW5zLCB0aGF0IHdpbGwgYmUgYnVybmVkCiAgICBmdW5jdGlvbiBidXJuVG9rZW5zKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKSBvbmx5SWNvQ29udHJhY3QgewogICAgICAgIGFzc2VydChfZnJvbSAhPSAweDApOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gc3ViKGJhbGFuY2VzW19mcm9tXSwgX3ZhbHVlKTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgQWRkcyB0b2tlbnMgdG8gYWRkcmVzcy4gSXQncyBjYW4gYmUgYXBwbGllZCBieSBhY2NvdW50IHdpdGggYWRkcmVzcyB0aGlzLmljb0NvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIGFjY291bnQgdG8gd2hpY2ggdGhlIHRva2VucyB3aWxsIHBhc3MKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEFtb3VudCBvZiB0b2tlbnMKICAgIGZ1bmN0aW9uIGVtaXRUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5SWNvQ29udHJhY3QgewogICAgICAgIGFzc2VydChfdG8gIT0gMHgwKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIAogICAgICAgIGJhbGFuY2VzW190b10gPSBhZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgIH0KfQoKCmNvbnRyYWN0IEltbWxhSWNvIGlzIFNhZmVNYXRoIHsKICAgIC8qCiAgICAgKiBJQ08gbWV0YSBkYXRhCiAgICAgKi8KICAgIEltbWxhVG9rZW4gcHVibGljIGltbWxhVG9rZW47CiAgICBBYnN0cmFjdFRva2VuIHB1YmxpYyBwcmVJY29Ub2tlbjsKCiAgICAvLyBBZGRyZXNzIG9mIGFjY291bnQgdG8gd2hpY2ggZXRoZXJzIHdpbGwgYmUgdHJhbmZlcmVkIGluIGNhc2Ugb2Ygc3VjY2Vzc2Z1bCBJQ08KICAgIGFkZHJlc3MgcHVibGljIGVzY3JvdzsKICAgIC8vIEFkZHJlc3Mgb2YgbWFuYWdlcgogICAgYWRkcmVzcyBwdWJsaWMgaWNvTWFuYWdlcjsKICAgIC8vIEFkZHJlc3Mgb2YgYSBhY2NvdW50LCB0aGF0IHdpbGwgdHJhbnNmZXIgdG9rZW5zIGZyb20gcHJlLUlDTwogICAgYWRkcmVzcyBwdWJsaWMgdG9rZW5JbXBvcnRlciA9IDB4MDsKICAgIC8vIEFkZHJlc3NlcyBvZiBmb3VuZGVycywgdGVhbSBhbmQgYm91bnR5T3duZXIKICAgIGFkZHJlc3MgcHVibGljIGZvdW5kZXIxOwogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlcjI7CiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGVyMzsKICAgIGFkZHJlc3MgcHVibGljIHRlYW07CiAgICBhZGRyZXNzIHB1YmxpYyBib3VudHlPd25lcjsKICAgIAogICAgLy8gMzg1NDgyMjYsNyBJTUwgaXMgcmV3YXJkIGZvciB0ZWFtCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCB0ZWFtc1Jld2FyZCA9IDM4NTQ4MjI2NzAxMjMyMjIwMDAwMDAwMDAwOwogICAgLy8gIDkzNjE3MTIsMiBJTUwgaXMgdG9rZW4gZm9yIGJvdW50eU93bmVyCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBib3VudHlPd25lcnNUb2tlbnMgPSA5MzYxNzEyMTk4ODcwNjgwMDAwMDAwMDAwOwogICAgCiAgICAvLyBCQVNFID0gMTBeMTgKICAgIHVpbnQgY29uc3RhbnQgQkFTRSA9IDEwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICAKICAgIC8vIDIwMTcuMDkuMTQgMjE6MDAgVVRDIG9yIDIwMTcuMDkuMTUgMDowMCBNU0sKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGRlZmF1bHRJY29TdGFydCA9IDE1MDU0MjI4MDA7CiAgICAvLyBJQ08gc3RhcnQgdGltZQogICAgdWludCBwdWJsaWMgaWNvU3RhcnQgPSBkZWZhdWx0SWNvU3RhcnQ7CiAgICAKICAgIC8vIDIwMTcuMTAuMTUgMjE6MDAgVVRDIG9yIDIwMTcuMTAuMTYgMDowMCBNU0sKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGRlZmF1bHRJY29EZWFkbGluZSA9IDE1MDgxMDEyMDA7CiAgICAvLyBJQ08gZW5kIHRpbWUKICAgIHVpbnQgcHVibGljICBpY29EZWFkbGluZSA9IGRlZmF1bHRJY29EZWFkbGluZTsKICAgIAogICAgLy8gMjAxOC4wMy4xNCAyMTowMCBVVEMgb3IgMjAxOC4wMy4xNSAwOjAwIE1TSwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgZGVmYXVsdEZvdW5kZXJzUmV3YXJkVGltZSA9IDE1MjEwNjEyMDA7CiAgICAvLyBmb3VuZGVycycgcmV3YXJkIHRpbWUKICAgIHVpbnQgcHVibGljIGZvdW5kZXJzUmV3YXJkVGltZSA9IGRlZmF1bHRGb3VuZGVyc1Jld2FyZFRpbWU7CiAgICAKICAgIC8vIE1pbiBsaW1pdCBvZiB0b2tlbnMgaXMgMTggMDAwIDAwMCBJTUwKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IG1pbkljb1Rva2VuTGltaXQgPSAxODAwMDAwMCAqIEJBU0U7CiAgICAvLyBNYXggbGltaXQgb2YgdG9rZW5zIGlzIDQzNCA0NzcgMTc3IElNTAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWF4SWNvVG9rZW5MaW1pdCA9IDQzNDQ3NzE3NyAqIEJBU0U7CiAgICAKICAgIC8vIEFtb3VudCBvZiBpbXBvcnRlZCB0b2tlbnMgZnJvbSBwcmUtSUNPCiAgICB1aW50IHB1YmxpYyBpbXBvcnRlZFRva2VucyA9IDA7CiAgICAvLyBBbW91bnQgb2Ygc29sZCB0b2tlbnMgb24gSUNPCiAgICB1aW50IHB1YmxpYyBzb2xkVG9rZW5zT25JY28gPSAwOwogICAgLy8gQW1vdW50IG9mIGlzc3VlZCB0b2tlbnMgb24gcHJlLUlDTyA9IDEzMjMyOTQxLDcgSU1MCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBzb2xkVG9rZW5zT25QcmVJY28gPSAxMzIzMjk0MTY4NzE2ODQzMTk1MTY4NDAwMDsKICAgIAogICAgLy8gVGhlcmUgYXJlIDE3MDA1MzUyMCB0b2tlbnMgaW4gc3RhZ2UgMQogICAgLy8gMSBFVEggPSAzNjQwIElNTAogICAgdWludCB0b2tlblByaWNlMSA9IDM2NDA7CiAgICB1aW50IHRva2VuU3VwcGx5MSA9IDE3MDA1MzUyMCAqIEJBU0U7CiAgICAKICAgIC8vIFRoZXJlIGFyZSAxMDM3MjU4NTYgdG9rZW5zIGluIHN0YWdlIDIKICAgIC8vIDEgRVRIID0gMzU0OSBJTUwKICAgIHVpbnQgdG9rZW5QcmljZTIgPSAzNTQ5OwogICAgdWludCB0b2tlblN1cHBseTIgPSAxMDM3MjU4NTYgKiBCQVNFOwogICAgCiAgICAvLyBUaGVyZSBhcmUgMTAwMzE5NzE4IHRva2VucyBpbiBzdGFnZSAzCiAgICAvLyAxIEVUSCA9IDM0NTggSU1MCiAgICB1aW50IHRva2VuUHJpY2UzID0gMzQ1ODsKICAgIHVpbnQgdG9rZW5TdXBwbHkzID0gMTAwMzE5NzE4ICogQkFTRTsKICAgIAogICAgLy8gVGhlcmUgYXJlIDYwMzc4MDgzIHRva2VucyBpbiBzdGFnZSA0CiAgICAvLyAxIEVUSCA9IDMzNjcgSU1MCiAgICB1aW50IHRva2VuUHJpY2U0ID0gMzM2NzsKICAgIHVpbnQgdG9rZW5TdXBwbHk0ID0gNjAzNzgwODMgKiBCQVNFOwogICAgCiAgICAvLyBUb2tlbidzIHByaWNlcyBpbiBzdGFnZXMgaW4gYXJyYXkKICAgIHVpbnRbXSBwdWJsaWMgdG9rZW5QcmljZXM7CiAgICAvLyBUb2tlbidzIHJlbWFpbmluZyBhbW91bnRzIGluIHN0YWdlcyBpbiBhcnJheQogICAgdWludFtdIHB1YmxpYyB0b2tlblN1cHBsaWVzOwogICAgCiAgICAvLyBDaGVjayBpZiBtYW5hZ2VyIGNhbiBiZSBzZXR0ZWQKICAgIGJvb2wgcHVibGljIGluaXRpYWxpemVkID0gZmFsc2U7CiAgICAvLyBJZiBmbGFnIG1pZ3JhdGVkPWZhbHNlLCB0b2tlbiBjYW4gYmUgYnVybmVkCiAgICBib29sIHB1YmxpYyBtaWdyYXRlZCA9IGZhbHNlOwogICAgLy8gVG9rZW5zIHRvIGZvdW5kZXJzIGNhbiBiZSBzZW50IG9ubHkgaWYgc2VudFRva2Vuc1RvRm91bmRlcnMgPT0gZmFsc2UgYW5kIHRpbWUgPiBmb3VuZGVyc1Jld2FyZFRpbWUKICAgIGJvb2wgcHVibGljIHNlbnRUb2tlbnNUb0ZvdW5kZXJzID0gZmFsc2U7CiAgICAvLyBJZiBzdG9wSUNPIGlzIGNhbGxlZCwgdGhlbiBJQ08gCiAgICBib29sIHB1YmxpYyBpY29TdG9wcGVkTWFudWFsbHkgPSBmYWxzZTsKICAgIAogICAgLy8gbWFwcGluZyBvZiBldGhlciBiYWxhbmNlcyBpbmZvCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBiYWxhbmNlczsKICAgIAogICAgLyoKICAgICAqIEV2ZW50cwogICAgICovCiAgICAKICAgIGV2ZW50IEJ1eVRva2VucyhhZGRyZXNzIGJ1eWVyLCB1aW50IHZhbHVlLCB1aW50IGFtb3VudCk7CiAgICBldmVudCBXaXRoZHJhd0V0aGVyKCk7CiAgICBldmVudCBTdG9wSWNvTWFudWFsbHkoKTsKICAgIGV2ZW50IFNlbmRUb2tlbnNUb0ZvdW5kZXJzKHVpbnQgZm91bmRlcjFSZXdhcmQsIHVpbnQgZm91bmRlcjJSZXdhcmQsIHVpbnQgZm91bmRlcjNSZXdhcmQpOwogICAgZXZlbnQgUmV0dXJuRnVuZHNGb3IoYWRkcmVzcyBhY2NvdW50KTsKICAgIAogICAgLyoKICAgICAqIE1vZGlmaWVycwogICAgICovCiAgICAKICAgIG1vZGlmaWVyIHdoZW5Jbml0aWFsaXplZCgpIHsKICAgICAgICAvLyBvbmx5IHdoZW4gY29udHJhY3QgaXMgaW5pdGlhbGl6ZWQKICAgICAgICByZXF1aXJlKGluaXRpYWxpemVkKTsKICAgICAgICBfOwogICAgfSAKICAgIAogICAgbW9kaWZpZXIgb25seU1hbmFnZXIoKSB7CiAgICAgICAgLy8gb25seSBJQ08gbWFuYWdlciBjYW4gZG8gdGhpcyBhY3Rpb24KICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gaWNvTWFuYWdlcik7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgb25JY29SdW5uaW5nKCkgewogICAgICAgIC8vIENoZWNrcywgaWYgSUNPIGlzIHJ1bm5pbmcgYW5kIGhhcyBub3QgYmVlbiBzdG9wcGVkCiAgICAgICAgcmVxdWlyZSghaWNvU3RvcHBlZE1hbnVhbGx5ICYmIG5vdyA+PSBpY29TdGFydCAmJiBub3cgPD0gaWNvRGVhZGxpbmUpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9uR29hbEFjaGlldmVkT3JEZWFkbGluZSgpIHsKICAgICAgICAvLyBDaGVja3MgaWYgYW1vdW50IG9mIHNvbGQgdG9rZW5zID49IG1pbiBsaW1pdCBvciBkZWFkbGluZSBpcyByZWFjaGVkCiAgICAgICAgcmVxdWlyZShzb2xkVG9rZW5zT25JY28gPj0gbWluSWNvVG9rZW5MaW1pdCB8fCBub3cgPiBpY29EZWFkbGluZSB8fCBpY29TdG9wcGVkTWFudWFsbHkpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9uSWNvU3RvcHBlZCgpIHsKICAgICAgICAvLyBDaGVja3MgaWYgSUNPIHdhcyBzdG9wcGVkIG9yIGRlYWRsaW5lIGlzIHJlYWNoZWQKICAgICAgICByZXF1aXJlKGljb1N0b3BwZWRNYW51YWxseSB8fCBub3cgPiBpY29EZWFkbGluZSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgbm90TWlncmF0ZWQoKSB7CiAgICAgICAgLy8gQ2hlY2tzIGlmIGJhc2UgY2FuIGJlIG1pZ3JhdGVkCiAgICAgICAgcmVxdWlyZSghbWlncmF0ZWQpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IENvbnN0cnVjdG9yIG9mIElDTy4gUmVxdWlyZXMgYWRkcmVzcyBvZiBpY29NYW5hZ2VyLAogICAgLy8vIGFkZHJlc3Mgb2YgcHJlSWNvVG9rZW4sIHRpbWUgb2Ygc3RhcnQgSUNPIChvciB6ZXJvKSwKICAgIC8vLyB0aW1lIG9mIElDTyBkZWFkbGluZSAob3IgemVybyksIGZvdW5kZXJzJyByZXdhcmQgdGltZSAob3IgemVybykKICAgIC8vLyBAcGFyYW0gX2ljb01hbmFnZXIgQWRkcmVzcyBvZiBJQ08gbWFuYWdlcgogICAgLy8vIEBwYXJhbSBfcHJlSWNvVG9rZW4gQWRkcmVzcyBvZiBwcmUtSUNPIGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9pY29TdGFydCBUaW1lc3RhbXAgb2YgSUNPIHN0YXJ0IChpZiBlcXVhbHMgMCwgc2V0cyBkZWZhdWx0SWNvU3RhcnQpCiAgICAvLy8gQHBhcmFtIF9pY29EZWFkbGluZSBUaW1lc3RhbXAgb2YgSUNPIGRlYWRsaW5lIChpZiBlcXVhbHMgMCwgc2V0cyBkZWZhdWx0SWNvRGVhZGxpbmUpCiAgICAvLy8gQHBhcmFtIF9mb3VuZGVyc1Jld2FyZFRpbWUgVGltZXN0YW1wIG9mIGZvdW5kZXJzIHJld2FyZGluZyB0aW1lIAogICAgLy8vIChpZiBlcXVhbHMgMCwgc2V0cyBkZWZhdWx0Rm91bmRlcnNSZXdhcmRUaW1lKQogICAgZnVuY3Rpb24gSW1tbGFJY28oYWRkcmVzcyBfaWNvTWFuYWdlciwgYWRkcmVzcyBfcHJlSWNvVG9rZW4sIAogICAgICAgIHVpbnQgX2ljb1N0YXJ0LCB1aW50IF9pY29EZWFkbGluZSwgdWludCBfZm91bmRlcnNSZXdhcmRUaW1lKSB7CiAgICAgICAgYXNzZXJ0KF9wcmVJY29Ub2tlbiAhPSAweDApOwogICAgICAgIGFzc2VydChfaWNvTWFuYWdlciAhPSAweDApOwogICAgICAgIAogICAgICAgIGltbWxhVG9rZW4gPSBuZXcgSW1tbGFUb2tlbih0aGlzKTsKICAgICAgICBpY29NYW5hZ2VyID0gX2ljb01hbmFnZXI7CiAgICAgICAgcHJlSWNvVG9rZW4gPSBBYnN0cmFjdFRva2VuKF9wcmVJY29Ub2tlbik7CiAgICAgICAgCiAgICAgICAgaWYgKF9pY29TdGFydCAhPSAwKSB7CiAgICAgICAgICAgIGljb1N0YXJ0ID0gX2ljb1N0YXJ0OwogICAgICAgIH0KICAgICAgICBpZiAoX2ljb0RlYWRsaW5lICE9IDApIHsKICAgICAgICAgICAgaWNvRGVhZGxpbmUgPSBfaWNvRGVhZGxpbmU7CiAgICAgICAgfQogICAgICAgIGlmIChfZm91bmRlcnNSZXdhcmRUaW1lICE9IDApIHsKICAgICAgICAgICAgZm91bmRlcnNSZXdhcmRUaW1lID0gX2ZvdW5kZXJzUmV3YXJkVGltZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gdG9rZW5QcmljZXMgYW5kIHRva2VuU3VwcGxpZXMgYXJyYXlzIGluaXRpYWxpc2F0aW9uCiAgICAgICAgdG9rZW5QcmljZXMucHVzaCh0b2tlblByaWNlMSk7CiAgICAgICAgdG9rZW5QcmljZXMucHVzaCh0b2tlblByaWNlMik7CiAgICAgICAgdG9rZW5QcmljZXMucHVzaCh0b2tlblByaWNlMyk7CiAgICAgICAgdG9rZW5QcmljZXMucHVzaCh0b2tlblByaWNlNCk7CiAgICAgICAgCiAgICAgICAgdG9rZW5TdXBwbGllcy5wdXNoKHRva2VuU3VwcGx5MSk7CiAgICAgICAgdG9rZW5TdXBwbGllcy5wdXNoKHRva2VuU3VwcGx5Mik7CiAgICAgICAgdG9rZW5TdXBwbGllcy5wdXNoKHRva2VuU3VwcGx5Myk7CiAgICAgICAgdG9rZW5TdXBwbGllcy5wdXNoKHRva2VuU3VwcGx5NCk7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IEluaXRpYWxpc2VzIGFkZHJlc3NlcyBvZiB0ZWFtLCBmb3VuZGVycywgdG9rZW5zIG93bmVyLCBlc2Nyb3cuCiAgICAvLy8gSW5pdGlhbGlzZXMgYmFsYW5jZXMgb2YgdGVhbSBhbmQgdG9rZW5zIG93bmVyCiAgICAvLy8gQHBhcmFtIF9mb3VuZGVyMSBBZGRyZXNzIG9mIGZvdW5kZXIgMQogICAgLy8vIEBwYXJhbSBfZm91bmRlcjIgQWRkcmVzcyBvZiBmb3VuZGVyIDIKICAgIC8vLyBAcGFyYW0gX2ZvdW5kZXIzIEFkZHJlc3Mgb2YgZm91bmRlciAzCiAgICAvLy8gQHBhcmFtIF90ZWFtIEFkZHJlc3Mgb2YgdGVhbQogICAgLy8vIEBwYXJhbSBfYm91bnR5T3duZXIgQWRkcmVzcyBvZiBib3VudHkgb3duZXIKICAgIC8vLyBAcGFyYW0gX2VzY3JvdyBBZGRyZXNzIG9mIGVzY3JvdwogICAgZnVuY3Rpb24gaW5pdCgKICAgICAgICBhZGRyZXNzIF9mb3VuZGVyMSwgYWRkcmVzcyBfZm91bmRlcjIsIGFkZHJlc3MgX2ZvdW5kZXIzLCAKICAgICAgICBhZGRyZXNzIF90ZWFtLCBhZGRyZXNzIF9ib3VudHlPd25lciwgYWRkcmVzcyBfZXNjcm93KSBvbmx5TWFuYWdlciB7CiAgICAgICAgYXNzZXJ0KCFpbml0aWFsaXplZCk7CiAgICAgICAgYXNzZXJ0KF9mb3VuZGVyMSAhPSAweDApOwogICAgICAgIGFzc2VydChfZm91bmRlcjIgIT0gMHgwKTsKICAgICAgICBhc3NlcnQoX2ZvdW5kZXIzICE9IDB4MCk7CiAgICAgICAgYXNzZXJ0KF90ZWFtICE9IDB4MCk7CiAgICAgICAgYXNzZXJ0KF9ib3VudHlPd25lciAhPSAweDApOwogICAgICAgIGFzc2VydChfZXNjcm93ICE9IDB4MCk7CiAgICAgICAgCiAgICAgICAgZm91bmRlcjEgPSBfZm91bmRlcjE7CiAgICAgICAgZm91bmRlcjIgPSBfZm91bmRlcjI7CiAgICAgICAgZm91bmRlcjMgPSBfZm91bmRlcjM7CiAgICAgICAgdGVhbSA9IF90ZWFtOwogICAgICAgIGJvdW50eU93bmVyID0gX2JvdW50eU93bmVyOwogICAgICAgIGVzY3JvdyA9IF9lc2Nyb3c7CiAgICAgICAgCiAgICAgICAgaW1tbGFUb2tlbi5lbWl0VG9rZW5zKHRlYW0sIHRlYW1zUmV3YXJkKTsKICAgICAgICBpbW1sYVRva2VuLmVtaXRUb2tlbnMoYm91bnR5T3duZXIsIGJvdW50eU93bmVyc1Rva2Vucyk7CiAgICAgICAgCiAgICAgICAgaW5pdGlhbGl6ZWQgPSB0cnVlOwogICAgfQogICAgCiAgICAvLy8gQGRldiBTZXRzIG5ldyBtYW5hZ2VyLiBPbmx5IG1hbmFnZXIgY2FuIGRvIGl0CiAgICAvLy8gQHBhcmFtIF9uZXdJY29NYW5hZ2VyIEFkZHJlc3Mgb2YgbmV3IElDTyBtYW5hZ2VyCiAgICBmdW5jdGlvbiBzZXROZXdNYW5hZ2VyKGFkZHJlc3MgX25ld0ljb01hbmFnZXIpIG9ubHlNYW5hZ2VyIHsKICAgICAgICBhc3NlcnQoX25ld0ljb01hbmFnZXIgIT0gMHgwKTsKICAgICAgICAKICAgICAgICBpY29NYW5hZ2VyID0gX25ld0ljb01hbmFnZXI7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IFNldHMgbmV3IHRva2VuIGltcG9ydGVyLiBPbmx5IG1hbmFnZXIgY2FuIGRvIGl0CiAgICAvLy8gQHBhcmFtIF9uZXdUb2tlbkltcG9ydGVyIEFkZHJlc3Mgb2YgdG9rZW4gaW1wb3J0ZXIKICAgIGZ1bmN0aW9uIHNldE5ld1Rva2VuSW1wb3J0ZXIoYWRkcmVzcyBfbmV3VG9rZW5JbXBvcnRlcikgb25seU1hbmFnZXIgewogICAgICAgIHRva2VuSW1wb3J0ZXIgPSBfbmV3VG9rZW5JbXBvcnRlcjsKICAgIH0gCiAgICAKICAgIC8vIHNhdmVzIGluZm8gaWYgYWNjb3VudCdzIHRva2VucyB3ZXJlIGltcG9ydGVkIGZyb20gcHJlLUlDTwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwcml2YXRlIGltcG9ydGVkRnJvbVByZUljbzsKICAgIC8vLyBAZGV2IEltcG9ydHMgYWNjb3VudCdzIHRva2VucyBmcm9tIHByZS1JQ08uIEl0IGNhbiBiZSBkb25lIG9ubHkgYnkgdXNlciwgSUNPIG1hbmFnZXIgb3IgdG9rZW4gaW1wb3J0ZXIKICAgIC8vLyBAcGFyYW0gX2FjY291bnQgQWRkcmVzcyBvZiBhY2NvdW50IHdoaWNoIHRva2VucyB3aWxsIGJlIGltcG9ydGVkCiAgICBmdW5jdGlvbiBpbXBvcnRUb2tlbnMoYWRkcmVzcyBfYWNjb3VudCkgewogICAgICAgIC8vIG9ubHkgdG9rZW5zIGhvbGRlciBvciBtYW5hZ2VyIG9yIHRva2VuSW1wb3J0ZXIgY2FuIGRvIG1pZ3JhdGlvbgogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB0b2tlbkltcG9ydGVyIHx8IG1zZy5zZW5kZXIgPT0gaWNvTWFuYWdlciB8fCBtc2cuc2VuZGVyID09IF9hY2NvdW50KTsKICAgICAgICByZXF1aXJlKCFpbXBvcnRlZEZyb21QcmVJY29bX2FjY291bnRdKTsKICAgICAgICAKICAgICAgICB1aW50IHByZUljb0JhbGFuY2UgPSBwcmVJY29Ub2tlbi5iYWxhbmNlT2YoX2FjY291bnQpOwogICAgICAgIGlmIChwcmVJY29CYWxhbmNlID4gMCkgewogICAgICAgICAgICBpbW1sYVRva2VuLmVtaXRUb2tlbnMoX2FjY291bnQsIHByZUljb0JhbGFuY2UpOwogICAgICAgICAgICBpbXBvcnRlZFRva2VucyA9IGFkZChpbXBvcnRlZFRva2VucywgcHJlSWNvQmFsYW5jZSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGltcG9ydGVkRnJvbVByZUljb1tfYWNjb3VudF0gPSB0cnVlOwogICAgfQogICAgCiAgICAvLy8gQGRldiBTdG9wcyBJQ08gbWFudWFsbHkuIE9ubHkgbWFuYWdlciBjYW4gZG8gaXQKICAgIGZ1bmN0aW9uIHN0b3BJY28oKSBvbmx5TWFuYWdlciAvKiBvbkdvYWxBY2hpZXZlZE9yRGVhZGxpbmUgKi8gewogICAgICAgIGljb1N0b3BwZWRNYW51YWxseSA9IHRydWU7CiAgICAgICAgU3RvcEljb01hbnVhbGx5KCk7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IElmIElDTyBpcyBzdWNjZXNzZnVsLCBzZW5kcyBmdW5kcyB0byBlc2Nyb3cgKE9ubHkgbWFuYWdlciBjYW4gZG8gaXQpLiBJZiBJQ08gaXMgZmFpbGVkLCBzZW5kcyBmdW5kcyB0byBjYWxsZXIgKEFueW9uZSBjYW4gZG8gaXQpCiAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aGVyKCkgb25Hb2FsQWNoaWV2ZWRPckRlYWRsaW5lIHsKICAgICAgICBpZiAoc29sZFRva2Vuc09uSWNvID49IG1pbkljb1Rva2VuTGltaXQpIHsKICAgICAgICAgICAgYXNzZXJ0KGluaXRpYWxpemVkKTsKICAgICAgICAgICAgYXNzZXJ0KHRoaXMuYmFsYW5jZSA+IDApOwogICAgICAgICAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBpY29NYW5hZ2VyKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGVzY3Jvdy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgICAgICBXaXRoZHJhd0V0aGVyKCk7CiAgICAgICAgfSAKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuRnVuZHNGb3IobXNnLnNlbmRlcik7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvLy8gQGRldiBSZXR1cm5zIGZ1bmRzIHRvIGZ1bmRlciBpZiBJQ08gaXMgdW5zdWNjZXNzZnVsLiBEb250IHJlbW92ZXMgSU1NTEEgYmFsYW5jZS4gQ2FuIGJlIGNhbGxlZCBvbmx5IGJ5IG1hbmFnZXIgb3IgY29udHJhY3QKICAgIC8vLyBAcGFyYW0gX2FjY291bnQgQWRkcmVzcyBvZiBmdW5kZXIKICAgIGZ1bmN0aW9uIHJldHVybkZ1bmRzRm9yKGFkZHJlc3MgX2FjY291bnQpIG9uR29hbEFjaGlldmVkT3JEZWFkbGluZSB7CiAgICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gYWRkcmVzcyh0aGlzKSB8fCBtc2cuc2VuZGVyID09IGljb01hbmFnZXIgfHwgbXNnLnNlbmRlciA9PSBfYWNjb3VudCk7CiAgICAgICAgYXNzZXJ0KHNvbGRUb2tlbnNPbkljbyA8IG1pbkljb1Rva2VuTGltaXQpOwogICAgICAgIGFzc2VydChiYWxhbmNlc1tfYWNjb3VudF0gPiAwKTsKICAgICAgICAKICAgICAgICBfYWNjb3VudC50cmFuc2ZlcihiYWxhbmNlc1tfYWNjb3VudF0pOwogICAgICAgIGJhbGFuY2VzW19hY2NvdW50XSA9IDA7CiAgICAgICAgCiAgICAgICAgUmV0dXJuRnVuZHNGb3IoX2FjY291bnQpOwogICAgfQogICAgCiAgICAvLy8gQGRldiBjb3VudCB0b2tlbnMgdGhhdCBjYW4gYmUgc29sZCB3aXRoIGFtb3VudCBvZiBtb25leS4gQ2FuIGJlIGNhbGxlZCBvbmx5IGJ5IGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF93ZWlzIEFtb3VudCBvZiB3ZWlzCiAgICBmdW5jdGlvbiBjb3VudFRva2Vucyh1aW50IF93ZWlzKSBwcml2YXRlIHJldHVybnModWludCkgeyAKICAgICAgICB1aW50IHJlc3VsdCA9IDA7CiAgICAgICAgdWludCBzdGFnZTsKICAgICAgICBmb3IgKHN0YWdlID0gMDsgc3RhZ2UgPCA0OyBzdGFnZSsrKSB7CiAgICAgICAgICAgIGlmIChfd2VpcyA9PSAwKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodG9rZW5TdXBwbGllc1tzdGFnZV0gPT0gMCkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdWludCBtYXhUb2tlbkFtb3VudCA9IHRva2VuUHJpY2VzW3N0YWdlXSAqIF93ZWlzOwogICAgICAgICAgICBpZiAobWF4VG9rZW5BbW91bnQgPD0gdG9rZW5TdXBwbGllc1tzdGFnZV0pIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IGFkZChyZXN1bHQsIG1heFRva2VuQW1vdW50KTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlc3VsdCA9IGFkZChyZXN1bHQsIHRva2VuU3VwcGxpZXNbc3RhZ2VdKTsKICAgICAgICAgICAgX3dlaXMgPSBzdWIoX3dlaXMsIGRpdih0b2tlblN1cHBsaWVzW3N0YWdlXSwgdG9rZW5QcmljZXNbc3RhZ2VdKSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmIChzdGFnZSA9PSA0KSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGFkZChyZXN1bHQsIHRva2VuUHJpY2VzWzNdICogX3dlaXMpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgCiAgICAvLy8gQGRldiBJbnZhbGlkYXRlcyBfYW1vdW50IHRva2Vucy4gQ2FuIGJlIGNhbGxlZCBvbmx5IGJ5IGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9hbW91bnQgQW1vdW50IG9mIHRva2VucwogICAgZnVuY3Rpb24gcmVtb3ZlVG9rZW5zKHVpbnQgX2Ftb3VudCkgcHJpdmF0ZSB7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChfYW1vdW50ID09IDApIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0b2tlblN1cHBsaWVzW2ldID4gX2Ftb3VudCkgewogICAgICAgICAgICAgICAgdG9rZW5TdXBwbGllc1tpXSA9IHN1Yih0b2tlblN1cHBsaWVzW2ldLCBfYW1vdW50KTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9hbW91bnQgPSBzdWIoX2Ftb3VudCwgdG9rZW5TdXBwbGllc1tpXSk7CiAgICAgICAgICAgIHRva2VuU3VwcGxpZXNbaV0gPSAwOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy8vIEBkZXYgQnV5cyBxdWFudGl0eSBvZiB0b2tlbnMgZm9yIHRoZSBhbW91bnQgb2Ygc2VudCBldGhlcnMuCiAgICAvLy8gQHBhcmFtIF9idXllciBBZGRyZXNzIG9mIGFjY291bnQgd2hpY2ggd2lsbCByZWNlaXZlIHRva2VucwogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgX2J1eWVyKSBwcml2YXRlIHsKICAgICAgICBhc3NlcnQoX2J1eWVyICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgICAgICByZXF1aXJlKHNvbGRUb2tlbnNPbkljbyA8IG1heEljb1Rva2VuTGltaXQpOwogICAgICAgIAogICAgICAgIHVpbnQgYm91Z2h0VG9rZW5zID0gY291bnRUb2tlbnMobXNnLnZhbHVlKTsKICAgICAgICBhc3NlcnQoYWRkKHNvbGRUb2tlbnNPbkljbywgYm91Z2h0VG9rZW5zKSA8PSBtYXhJY29Ub2tlbkxpbWl0KTsKICAgICAgICAKICAgICAgICByZW1vdmVUb2tlbnMoYm91Z2h0VG9rZW5zKTsKICAgICAgICBzb2xkVG9rZW5zT25JY28gPSBhZGQoc29sZFRva2Vuc09uSWNvLCBib3VnaHRUb2tlbnMpOwogICAgICAgIGltbWxhVG9rZW4uZW1pdFRva2VucyhfYnV5ZXIsIGJvdWdodFRva2Vucyk7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbX2J1eWVyXSA9IGFkZChiYWxhbmNlc1tfYnV5ZXJdLCBtc2cudmFsdWUpOwogICAgICAgIAogICAgICAgIEJ1eVRva2VucyhfYnV5ZXIsIG1zZy52YWx1ZSwgYm91Z2h0VG9rZW5zKTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgRmFsbCBiYWNrIGZ1bmN0aW9uIH41MGstMTAwayBnYXMKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgb25JY29SdW5uaW5nIHsKICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IEJ1cm4gdG9rZW5zIGZyb20gYWNjb3VudHMgb25seSBpbiBzdGF0ZSAibm90IG1pZ3JhdGVkIi4gT25seSBtYW5hZ2VyIGNhbiBkbyBpdAogICAgLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIG9mIGFjY291bnQgCiAgICBmdW5jdGlvbiBidXJuVG9rZW5zKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKSBvbmx5TWFuYWdlciBub3RNaWdyYXRlZCB7CiAgICAgICAgaW1tbGFUb2tlbi5idXJuVG9rZW5zKF9mcm9tLCBfdmFsdWUpOwogICAgfQogICAgCiAgICAvLy8gQGRldiBTZXQgc3RhdGUgIm1pZ3JhdGVkIi4gT25seSBtYW5hZ2VyIGNhbiBkbyBpdCAKICAgIGZ1bmN0aW9uIHNldFN0YXRlTWlncmF0ZWQoKSBvbmx5TWFuYWdlciB7CiAgICAgICAgbWlncmF0ZWQgPSB0cnVlOwogICAgfQogICAgCiAgICAvLy8gQGRldiBTZW5kIHRva2VucyB0byBmb3VuZGVycy4gQ2FuIGJlIHNlbnQgb25seSBhZnRlciBpbW1sYVRva2VuLnJld2FyZFRpbWUoKSAoMjAxOC4wMy4xNSAwOjAwIFVUQykKICAgIC8vLyBTZW5kcyA0MyUgKiAxMCUgb2YgYWxsIHRva2VucyB0byBmb3VuZGVyIDEKICAgIC8vLyBTZW5kcyA0MyUgKiAxMCUgb2YgYWxsIHRva2VucyB0byBmb3VuZGVyIDIKICAgIC8vLyBTZW5kcyAxNCUgKiAxMCUgb2YgYWxsIHRva2VucyB0byBmb3VuZGVyIDMKICAgIGZ1bmN0aW9uIHNlbmRUb2tlbnNUb0ZvdW5kZXJzKCkgb25seU1hbmFnZXIgd2hlbkluaXRpYWxpemVkIHsKICAgICAgICByZXF1aXJlKCFzZW50VG9rZW5zVG9Gb3VuZGVycyAmJiBub3cgPj0gZm91bmRlcnNSZXdhcmRUaW1lKTsKICAgICAgICAKICAgICAgICAvLyBzb2xkVG9rZW5zT25QcmVJY28gKyBzb2xkVG9rZW5zT25JY28gaXMgfjgxLjMlIG9mIHRva2VucyAKICAgICAgICB1aW50IHRvdGFsQ291bnRPZlRva2VucyA9IG11bEJ5RnJhY3Rpb24oYWRkKHNvbGRUb2tlbnNPbkljbywgc29sZFRva2Vuc09uUHJlSWNvKSwgMTAwMCwgODEzKTsKICAgICAgICB1aW50IHRvdGFsUmV3YXJkVG9Gb3VuZGVycyA9IG11bEJ5RnJhY3Rpb24odG90YWxDb3VudE9mVG9rZW5zLCAxLCAxMCk7CiAgICAgICAgCiAgICAgICAgdWludCBmb3VuZGVyMVJld2FyZCA9IG11bEJ5RnJhY3Rpb24odG90YWxSZXdhcmRUb0ZvdW5kZXJzLCA0MywgMTAwKTsKICAgICAgICB1aW50IGZvdW5kZXIyUmV3YXJkID0gbXVsQnlGcmFjdGlvbih0b3RhbFJld2FyZFRvRm91bmRlcnMsIDQzLCAxMDApOwogICAgICAgIHVpbnQgZm91bmRlcjNSZXdhcmQgPSBtdWxCeUZyYWN0aW9uKHRvdGFsUmV3YXJkVG9Gb3VuZGVycywgMTQsIDEwMCk7CiAgICAgICAgaW1tbGFUb2tlbi5lbWl0VG9rZW5zKGZvdW5kZXIxLCBmb3VuZGVyMVJld2FyZCk7CiAgICAgICAgaW1tbGFUb2tlbi5lbWl0VG9rZW5zKGZvdW5kZXIyLCBmb3VuZGVyMlJld2FyZCk7CiAgICAgICAgaW1tbGFUb2tlbi5lbWl0VG9rZW5zKGZvdW5kZXIzLCBmb3VuZGVyM1Jld2FyZCk7CiAgICAgICAgU2VuZFRva2Vuc1RvRm91bmRlcnMoZm91bmRlcjFSZXdhcmQsIGZvdW5kZXIyUmV3YXJkLCBmb3VuZGVyM1Jld2FyZCk7CiAgICAgICAgc2VudFRva2Vuc1RvRm91bmRlcnMgPSB0cnVlOwogICAgfQp9'.
	

]
