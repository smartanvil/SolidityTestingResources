Class {
	#name : #SRTd73c51ce805c86046577b7b4e5cb2dde14d72a36,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd73c51ce805c86046577b7b4e5cb2dde14d72a36 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBFUkMyMCB7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7ICAKfQoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjAgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfWVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgCgogICAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgKi8KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIHVpbnQyNTYgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KfQoKCiAgICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCgp9Cgpjb250cmFjdCBFUFRUb2tlbiBpcyBCYXNpY1Rva2VuIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiZS1Qb2NrZXQgVG9rZW4iOyAgICAgICAgICAgICAgICAgICAgICAvL25hbWUgb2YgdGhlIHRva2VuCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJFUFQiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3N5bWJvbCBvZiB0aGUgdG9rZW4KICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDE4OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZGVjaW1hbHMKICAgIHVpbnQyNTYgcHVibGljIGluaXRpYWxTdXBwbHkgPSA2NDAwMDAwMCAqIDEwKioxODsgICAgICAgICAgIC8vdG90YWwgc3VwcGx5IG9mIFRva2VucwoKICAgIC8vdmFyaWFibGVzCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbEFsbG9jYXRlZFRva2VuczsgICAgICAgICAgICAgICAgICAgICAgICAgLy92YXJpYWJsZSB0byBrZWVwIHRyYWNrIG9mIGZ1bmRzIGFsbG9jYXRlZAogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zQWxsb2NhdGVkVG9Dcm93ZEZ1bmQ7ICAgICAgICAgICAgICAgICAgIC8vZnVuZHMgYWxsb2NhdGVkIHRvIGNyb3dkZnVuZAogICAgdWludDI1NiBwdWJsaWMgZm91bmRlcnNBbGxvY2F0aW9uOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZnVuZHMgYWxsb2NhdGVkIHRvIGZvdW5kZXIKCiAgICAvL2FkZHJlc3NlcwogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlck11bHRpU2lnQWRkcmVzczsgICAgICAgICAgICAgICAgICAgICAgIC8vTXVsdGkgc2lnbiBhZGRyZXNzIG9mIGZvdW5kZXIKICAgIGFkZHJlc3MgcHVibGljIGNyb3dkRnVuZEFkZHJlc3M7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0FkZHJlc3Mgb2YgY3Jvd2RmdW5kIGNvbnRyYWN0CgogICAgLy9ldmVudHMKICAgIGV2ZW50IENoYW5nZUZvdW5kZXJzV2FsbGV0QWRkcmVzcyh1aW50MjU2IF9ibG9ja1RpbWVTdGFtcCwgYWRkcmVzcyBpbmRleGVkIF9mb3VuZGVyc1dhbGxldEFkZHJlc3MpOwogICAgCiAgICAvL21vZGlmaWVyc3MKCiAgICBtb2RpZmllciBub25aZXJvQWRkcmVzcyhhZGRyZXNzIF90byl7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gMHgwKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlGb3VuZGVycygpewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBmb3VuZGVyTXVsdGlTaWdBZGRyZXNzKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlDcm93ZGZ1bmQoKXsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY3Jvd2RGdW5kQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IEVQVFRva2VuIENvbnN0cnVjdG9yIHRvIGluaXRpYXRlIHRoZSB2YXJpYWJsZXMgd2l0aCBzb21lIGlucHV0IGFyZ3VtZW50CiAgICAgICAgQHBhcmFtIF9jcm93ZEZ1bmRBZGRyZXNzIFRoaXMgaXMgdGhlIGFkZHJlc3Mgb2YgdGhlIGNyb3dkZnVuZCB3aGljaCBsZWFkcyB0aGUgZGlzdHJpYnV0aW9uIG9mIHRva2VucwogICAgICAgIEBwYXJhbSBfZm91bmRlck11bHRpU2lnQWRkcmVzcyBUaGlzIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSBmb3VuZGVyIHdoaWNoIGhhdmUgdGhlIGhvbGQgb3ZlciB0aGUgY29udHJhY3QuCiAgICAKICAgICAqLwogICAgCiAgICBmdW5jdGlvbiBFUFRUb2tlbihhZGRyZXNzIF9jcm93ZEZ1bmRBZGRyZXNzLCBhZGRyZXNzIF9mb3VuZGVyTXVsdGlTaWdBZGRyZXNzKSB7CiAgICAgICAgY3Jvd2RGdW5kQWRkcmVzcyA9IF9jcm93ZEZ1bmRBZGRyZXNzOwogICAgICAgIGZvdW5kZXJNdWx0aVNpZ0FkZHJlc3MgPSBfZm91bmRlck11bHRpU2lnQWRkcmVzczsKICAgIAogICAgICAgIC8vdG9rZW4gYWxsb2NhdGlvbgogICAgICAgIHRva2Vuc0FsbG9jYXRlZFRvQ3Jvd2RGdW5kID0gMzIgKiAxMCoqMjQ7CiAgICAgICAgZm91bmRlcnNBbGxvY2F0aW9uID0gMzIgKiAxMCoqMjQ7CgogICAgICAgIC8vIEFzc2lnbmVkIGJhbGFuY2VzCiAgICAgICAgYmFsYW5jZXNbY3Jvd2RGdW5kQWRkcmVzc10gPSB0b2tlbnNBbGxvY2F0ZWRUb0Nyb3dkRnVuZDsKICAgICAgICBiYWxhbmNlc1tmb3VuZGVyTXVsdGlTaWdBZGRyZXNzXSA9IGZvdW5kZXJzQWxsb2NhdGlvbjsKCiAgICAgICAgdG90YWxBbGxvY2F0ZWRUb2tlbnMgPSBiYWxhbmNlc1tmb3VuZGVyTXVsdGlTaWdBZGRyZXNzXTsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IGNoYW5nZVRvdGFsU3VwcGx5IGlzIHRoZSBmdW5jdGlvbiB1c2VkIHRvIHZhcmlhdGUgdGhlIHZhcmlhYmxlIHRvdGFsQWxsb2NhdGVkVG9rZW5zCiAgICAgICAgQHBhcmFtIF9hbW91bnQgYW1vdW50IG9mIHRva2VucyBhcmUgc29sZCBvdXQgdG8gaW5jcmVhc2UgdGhlIHZhbHVlIG9mIHRvdGFsQWxsb2NhdGVkVG9rZW5zCiAgICAgKi8KCiAgICBmdW5jdGlvbiBjaGFuZ2VUb3RhbFN1cHBseSh1aW50MjU2IF9hbW91bnQpIG9ubHlDcm93ZGZ1bmQgewogICAgICAgIHRvdGFsQWxsb2NhdGVkVG9rZW5zICs9IF9hbW91bnQ7CiAgICB9CgoKICAgIC8qKgogICAgICAgIEBkZXYgY2hhbmdlRm91bmRlck11bHRpU2lnQWRkcmVzcyBmdW5jdGlvbiB1c2UgdG8gY2hhbmdlIHRoZSBvd25lcnNoaXAgb2YgdGhlIGNvbnRyYWN0CiAgICAgICAgQHBhcmFtIF9uZXdGb3VuZGVyTXVsdGlTaWdBZGRyZXNzIE5ldyBhZGRyZXNzIHdoaWNoIHdpbGwgdGFrZSB0aGUgb3duZXJzaGlwIG9mIHRoZSBjb250cmFjdAogICAgICovCiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZUZvdW5kZXJNdWx0aVNpZ0FkZHJlc3MoYWRkcmVzcyBfbmV3Rm91bmRlck11bHRpU2lnQWRkcmVzcykgb25seUZvdW5kZXJzIG5vblplcm9BZGRyZXNzKF9uZXdGb3VuZGVyTXVsdGlTaWdBZGRyZXNzKSB7CiAgICAgICAgZm91bmRlck11bHRpU2lnQWRkcmVzcyA9IF9uZXdGb3VuZGVyTXVsdGlTaWdBZGRyZXNzOwogICAgICAgIENoYW5nZUZvdW5kZXJzV2FsbGV0QWRkcmVzcyhub3csIGZvdW5kZXJNdWx0aVNpZ0FkZHJlc3MpOwogICAgfQoKICAKfQoKCmNvbnRyYWN0IEVQVENyb3dkZnVuZCB7CiAgICAKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIEVQVFRva2VuIHB1YmxpYyB0b2tlbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRva2VuIGNvbnRyYWN0IHJlZmVyZW5jZQogICAgCiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeUFkZHJlc3M7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRyZXNzIHdoZXJlIGFsbCBmdW5kcyBnZXQgYWxsb2NhdGVkIAogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlckFkZHJlc3M7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm91bmRlcnMgYWRkcmVzcwogICAgdWludDI1NiBwdWJsaWMgY3Jvd2RmdW5kU3RhcnRUaW1lID0gMTUxNjU3OTIwMTsgICAgICAgICAgICAgLy8gTW9uZGF5LCAyMi1KYW4tMTggMDA6MDA6MDEgVVRDCiAgICB1aW50MjU2IHB1YmxpYyBjcm93ZGZ1bmRFbmRUaW1lID0gMTUxODk5ODM5OTsgICAgICAgICAgICAgICAvLyBTdW5kYXksIDE4LUZlYi0xOCAyMzo1OTo1OSBVVEMKICAgIHVpbnQyNTYgcHVibGljIHByZXNhbGVTdGFydFRpbWUgPSAxNTEzMTIzMjAxOyAgICAgICAgICAgICAgIC8vIFdlZG5lc2RheSwgMTMtRGVjLTE3IDAwOjAwOjAxCiAgICB1aW50MjU2IHB1YmxpYyBwcmVzYWxlRW5kVGltZSA9IDE1MTY1NzkxOTk7ICAgICAgICAgICAgICAgICAvLyBTdW5kYXksIDIxLUphbi0xOCAyMzo1OTo1OQogICAgdWludDI1NiBwdWJsaWMgZXRoUmFpc2VkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ291bnRlciB0byB0cmFjayB0aGUgYW1vdW50IHJhaXNlZAogICAgYm9vbCBwcml2YXRlIHRva2VuRGVwbG95ZWQgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmxhZyB0byB0cmFjayB0aGUgdG9rZW4gZGVwbG95bWVudCAtLSBvbmx5IGNhbiBiZSBzZXQgb25jZQogICAgdWludDI1NiBwdWJsaWMgdG9rZW5Tb2xkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ291bnRlciB0byB0cmFjayB0aGUgYW1vdW50IG9mIHRva2VuIHNvbGQKICAgIHVpbnQyNTYgcHJpdmF0ZSBldGhSYXRlOwogICAgCiAgICAKICAgIC8vZXZlbnRzCiAgICBldmVudCBDaGFuZ2VGb3VuZGVyQWRkcmVzcyhhZGRyZXNzIGluZGV4ZWQgX25ld0ZvdW5kZXJBZGRyZXNzICwgdWludDI1NiBfdGltZXN0YW1wKTsKICAgIGV2ZW50IFRva2VuUHVyY2hhc2UoYWRkcmVzcyBpbmRleGVkIF9iZW5lZmljaWFyeSwgdWludDI1NiBfdmFsdWUsIHVpbnQyNTYgX2Ftb3VudCk7CiAgICBldmVudCBDcm93ZEZ1bmRDbG9zZWQodWludDI1NiBfdGltZXN0YW1wKTsKICAgIAogICAgZW51bSBTdGF0ZSB7UHJlU2FsZSwgQ3Jvd2RTYWxlLCBGaW5pc2h9CiAgICAKICAgIC8vTW9kaWZpZXJzCiAgICBtb2RpZmllciBvbmx5Zm91bmRlcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZm91bmRlckFkZHJlc3MpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbm9uWmVyb0FkZHJlc3MoYWRkcmVzcyBfdG8pIHsKICAgICAgICByZXF1aXJlKF90byAhPSAweDApOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVB1YmxpYygpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gZm91bmRlckFkZHJlc3MpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbm9uWmVyb0V0aCgpIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSAhPSAwKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGlzVG9rZW5EZXBsb3llZCgpIHsKICAgICAgICByZXF1aXJlKHRva2VuRGVwbG95ZWQgPT0gdHJ1ZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpc0JldHdlZW4oKSB7CiAgICAgICAgcmVxdWlyZShub3cgPj0gcHJlc2FsZVN0YXJ0VGltZSAmJiBub3cgPD0gY3Jvd2RmdW5kRW5kVGltZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IEVQVENyb3dkZnVuZCBDb25zdHJ1Y3RvciB1c2VkIHRvIGluaXRpYWxpemUgdGhlIHJlcXVpcmVkIHZhcmlhYmxlLgogICAgICAgIEBwYXJhbSBfZm91bmRlckFkZHJlc3MgRm91bmRlciBhZGRyZXNzIAogICAgICAgIEBwYXJhbSBfZXRoUmF0ZSBSYXRlIG9mIGV0aGVyIGluIGRvbGxhcnMgYXQgdGhlIHRpbWUgb2YgZGVwbG95bWVudC4KICAgICAgICBAcGFyYW0gX2JlbmVmaWNpYXJ5QWRkcmVzcyBBZGRyZXNzIHRoYXQgaG9sZCBhbGwgZnVuZHMgY29sbGVjdGVkIGZyb20gaW52ZXN0b3JzCgogICAgICovCgogICAgZnVuY3Rpb24gRVBUQ3Jvd2RmdW5kKGFkZHJlc3MgX2ZvdW5kZXJBZGRyZXNzLCBhZGRyZXNzIF9iZW5lZmljaWFyeUFkZHJlc3MsIHVpbnQyNTYgX2V0aFJhdGUpIHsKICAgICAgICBiZW5lZmljaWFyeUFkZHJlc3MgPSBfYmVuZWZpY2lhcnlBZGRyZXNzOwogICAgICAgIGZvdW5kZXJBZGRyZXNzID0gX2ZvdW5kZXJBZGRyZXNzOwogICAgICAgIGV0aFJhdGUgPSB1aW50MjU2KF9ldGhSYXRlKTsKICAgIH0KICAgCiAgICAvKioKICAgICAgICBAZGV2IHNldFRva2VuIEZ1bmN0aW9uIHVzZWQgdG8gc2V0IHRoZSB0b2tlbiBhZGRyZXNzIGludG8gdGhlIGNvbnRyYWN0LgogICAgICAgIEBwYXJhbSBfdG9rZW5BZGRyZXNzIHZhcmlhYmxlIHRoYXQgY29udGFpbnMgZGVwbG95ZWQgdG9rZW4gYWRkcmVzcyAKICAgICAqLwoKICAgIGZ1bmN0aW9uIHNldFRva2VuKGFkZHJlc3MgX3Rva2VuQWRkcmVzcykgbm9uWmVyb0FkZHJlc3MoX3Rva2VuQWRkcmVzcykgb25seWZvdW5kZXIgewogICAgICAgICByZXF1aXJlKHRva2VuRGVwbG95ZWQgPT0gZmFsc2UpOwogICAgICAgICB0b2tlbiA9IEVQVFRva2VuKF90b2tlbkFkZHJlc3MpOwogICAgICAgICB0b2tlbkRlcGxveWVkID0gdHJ1ZTsKICAgIH0KICAgIAogICAgCiAgICAvKioKICAgICAgICBAZGV2IGNoYW5nZUZvdW5kZXJXYWxsZXRBZGRyZXNzIHVzZWQgdG8gY2hhbmdlIHRoZSB3YWxsZXQgYWRkcmVzcyBvciBjaGFuZ2UgdGhlIG93bmVyc2hpcAogICAgICAgIEBwYXJhbSBfbmV3QWRkcmVzcyBuZXcgZm91bmRlciB3YWxsZXQgYWRkcmVzcwogICAgICovCgogICAgZnVuY3Rpb24gY2hhbmdlRm91bmRlcldhbGxldEFkZHJlc3MoYWRkcmVzcyBfbmV3QWRkcmVzcykgb25seWZvdW5kZXIgbm9uWmVyb0FkZHJlc3MoX25ld0FkZHJlc3MpIHsKICAgICAgICAgZm91bmRlckFkZHJlc3MgPSBfbmV3QWRkcmVzczsKICAgICAgICAgQ2hhbmdlRm91bmRlckFkZHJlc3MoZm91bmRlckFkZHJlc3Msbm93KTsKICAgIH0KCiAgICAKICAgIC8qKgogICAgICAgIEBkZXYgYnV5VG9rZW5zIGZ1bmN0aW9uIHVzZWQgdG8gYnV5IHRoZSB0b2tlbnMgdXNpbmcgZXRoZXJzIG9ubHkuIHNhbGUgCiAgICAgICAgICAgIGlzIG9ubHkgcHJvY2Vzc2VkIGJldHdlZW4gc3RhcnQgdGltZSBhbmQgZW5kIHRpbWUuIAogICAgICAgIEBwYXJhbSBfYmVuZWZpY2lhcnkgYWRkcmVzcyBvZiB0aGUgaW52ZXN0b3IKICAgICAgICBAcmV0dXJuIGJvb2wgCiAgICAgKi8KCiAgICBmdW5jdGlvbiBidXlUb2tlbnMgKGFkZHJlc3MgX2JlbmVmaWNpYXJ5KQogICAgaXNCZXR3ZWVuCiAgICBvbmx5UHVibGljCiAgICBub25aZXJvQWRkcmVzcyhfYmVuZWZpY2lhcnkpCiAgICBub25aZXJvRXRoCiAgICBpc1Rva2VuRGVwbG95ZWQKICAgIHBheWFibGUKICAgIHB1YmxpYwogICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICAgdWludDI1NiBhbW91bnQgPSBtc2cudmFsdWUubXVsKCgoZXRoUmF0ZS5tdWwoMTAwKSkuZGl2KGdldFJhdGUoKSkpKTsKICAgIAogICAgICAgIGlmICh0b2tlbi50cmFuc2ZlcihfYmVuZWZpY2lhcnksIGFtb3VudCkpIHsKICAgICAgICAgICAgZnVuZFRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBldGhSYWlzZWQgPSBldGhSYWlzZWQuYWRkKG1zZy52YWx1ZSk7CiAgICAgICAgICAgIHRva2VuU29sZCA9IHRva2VuU29sZC5hZGQoYW1vdW50KTsKICAgICAgICAgICAgdG9rZW4uY2hhbmdlVG90YWxTdXBwbHkoYW1vdW50KTsgCiAgICAgICAgICAgIFRva2VuUHVyY2hhc2UoX2JlbmVmaWNpYXJ5LCBtc2cudmFsdWUsIGFtb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgICAgQGRldiBzZXRFdGhSYXRlIGZ1bmN0aW9uIHVzZWQgdG8gc2V0IHRoZSBldGhlciBSYXRlCiAgICAgICAgQHBhcmFtIF9uZXdFdGhSYXRlIGxhdGVzdCBldGggcmF0ZQogICAgICAgIEByZXR1cm4gYm9vbAogICAgIAogICAgICovCgogICAgZnVuY3Rpb24gc2V0RXRoUmF0ZSh1aW50MjU2IF9uZXdFdGhSYXRlKSBvbmx5Zm91bmRlciByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfbmV3RXRoUmF0ZSA+IDApOwogICAgICAgIGV0aFJhdGUgPSBfbmV3RXRoUmF0ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IGdldFJhdGUgdXNlZCB0byBnZXQgdGhlIHByaWNlIG9mIGVhY2ggdG9rZW4gb24gd2Vla2x5IGJhc2lzCiAgICAgICAgQHJldHVybiB1aW50MjU2IHByaWNlIG9mIGVhY2ggdG9rZW5zIGluIGRvbGxhcgogICAgCiAgICAgKi8KCiAgICBmdW5jdGlvbiBnZXRSYXRlKCkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CgogICAgICAgIGlmIChnZXRTdGF0ZSgpID09IFN0YXRlLlByZVNhbGUpIHsKICAgICAgICAgICAgcmV0dXJuIDEwOwogICAgICAgIH0gCiAgICAgICAgaWYoZ2V0U3RhdGUoKSA9PSBTdGF0ZS5Dcm93ZFNhbGUpIHsKICAgICAgICAgICAgaWYgKG5vdyA+PSBjcm93ZGZ1bmRTdGFydFRpbWUgKyAzIHdlZWtzICYmIG5vdyA8PSBjcm93ZGZ1bmRFbmRUaW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMzA7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChub3cgPj0gY3Jvd2RmdW5kU3RhcnRUaW1lICsgMiB3ZWVrcykgewogICAgICAgICAgICAgICAgcmV0dXJuIDI1OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChub3cgPj0gY3Jvd2RmdW5kU3RhcnRUaW1lICsgMSB3ZWVrcykgewogICAgICAgICAgICAgICAgcmV0dXJuIDIwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChub3cgPj0gY3Jvd2RmdW5kU3RhcnRUaW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMTU7CiAgICAgICAgICAgIH0gIAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICAgICAgICAKICAgIH0gIAoKICAgIC8qKgogICAgICAgIEBkZXYgYGdldFN0YXRlYCB1c2VkIHRvIGZpbmRvdXQgdGhlIHN0YXRlIG9mIHRoZSBjcm93ZGZ1bmQKICAgICAgICBAcmV0dXJuIFN0YXRlIAogICAgICovCgogICAgZnVuY3Rpb24gZ2V0U3RhdGUoKSBwcml2YXRlIHJldHVybnMoU3RhdGUpIHsKICAgICAgICBpZiAobm93ID49IGNyb3dkZnVuZFN0YXJ0VGltZSAmJiBub3cgPD0gY3Jvd2RmdW5kRW5kVGltZSkgewogICAgICAgICAgICByZXR1cm4gU3RhdGUuQ3Jvd2RTYWxlOwogICAgICAgIH0KICAgICAgICBpZiAobm93ID49IHByZXNhbGVTdGFydFRpbWUgJiYgbm93IDw9IHByZXNhbGVFbmRUaW1lKSB7CiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5QcmVTYWxlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5GaW5pc2g7CiAgICAgICAgfQoKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IGVuZENyb3dkRnVuZCBjYWxsZWQgb25seSBhZnRlciB0aGUgZW5kIHRpbWUgb2YgY3Jvd2RmdW5kIC4gdXNlIHRvIGVuZCB0aGUgc2FsZS4KICAgICAgICBAcmV0dXJuIGJvb2wKICAgICAqLwoKICAgIGZ1bmN0aW9uIGVuZENyb3dkRnVuZCgpIG9ubHlmb3VuZGVyIHJldHVybnMoYm9vbCkgewogICAgICAgIHJlcXVpcmUobm93ID4gY3Jvd2RmdW5kRW5kVGltZSk7CiAgICAgICAgdWludDI1NiByZW1haW5pbmd0b2tlbiA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKCiAgICAgICAgaWYgKHJlbWFpbmluZ3Rva2VuICE9IDApIHsKICAgICAgICAgICAgdG9rZW4udHJhbnNmZXIoZm91bmRlckFkZHJlc3MscmVtYWluaW5ndG9rZW4pOwogICAgICAgICAgICBDcm93ZEZ1bmRDbG9zZWQobm93KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIENyb3dkRnVuZENsb3NlZChub3cpOwogICAgICAgIHJldHVybiBmYWxzZTsgICAgCiB9IAoKICAgIC8qKgogICAgICAgIEBkZXYgZnVuZFRyYW5zZmVyIHVzZWQgdG8gdHJhbnNmZXIgY29sbGVjdGVkIGV0aGVyIGludG8gdGhlIGJlbmVmaWNhcnkgYWRkcmVzcwogICAgICovCgogICAgZnVuY3Rpb24gZnVuZFRyYW5zZmVyKHVpbnQyNTYgX2Z1bmRzKSBwcml2YXRlIHsKICAgICAgICBiZW5lZmljaWFyeUFkZHJlc3MudHJhbnNmZXIoX2Z1bmRzKTsKICAgIH0KCiAgICAvLyBDcm93ZGZ1bmQgZW50cnkKICAgIC8vIHNlbmQgZXRoZXIgdG8gdGhlIGNvbnRyYWN0IGFkZHJlc3MKICAgIC8vIGdhcyB1c2VkIDIwMDAwMAogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKfQ=='.
	

]
