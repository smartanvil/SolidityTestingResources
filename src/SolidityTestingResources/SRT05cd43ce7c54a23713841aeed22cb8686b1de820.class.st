Class {
	#name : #SRT05cd43ce7c54a23713841aeed22cb8686b1de820,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT05cd43ce7c54a23713841aeed22cb8686b1de820 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICByZXR1cm4gYzsKICAgIH0KICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQoKY29udHJhY3QgRVJDMjAgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkge30KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7fQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gIDB4ZjQyQjgyRDAyYjhmM0U3OTgzYjNmN0UxMDAwY0UyOEVDM0Y4QzgxNTsKICAgIH0KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IFJlZnVuZFZhdWx0IGlzIE93bmFibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICBlbnVtIFN0YXRlIHsgQWN0aXZlLCBSZWZ1bmRpbmcsIENsb3NlZCB9CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkZXBvc2l0ZWQ7CiAgICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CiAgICBTdGF0ZSBwdWJsaWMgc3RhdGU7CiAgICBldmVudCBDbG9zZWQoKTsKICAgIGV2ZW50IFJlZnVuZHNFbmFibGVkKCk7CiAgICBldmVudCBSZWZ1bmRlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgd2VpQW1vdW50KTsKICAgIGZ1bmN0aW9uIFJlZnVuZFZhdWx0KGFkZHJlc3MgX3dhbGxldCkgcHVibGljIHsKICAgICAgICB3YWxsZXQgPSBfd2FsbGV0OwogICAgICAgIHN0YXRlID0gU3RhdGUuQWN0aXZlOwogICAgfQogICAgZnVuY3Rpb24gZGVwb3NpdChhZGRyZXNzIGludmVzdG9yKSBvbmx5T3duZXIgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsKICAgICAgICBkZXBvc2l0ZWRbaW52ZXN0b3JdID0gZGVwb3NpdGVkW2ludmVzdG9yXS5hZGQobXNnLnZhbHVlKTsKICAgIH0KICAgIGZ1bmN0aW9uIGNsb3NlKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5BY3RpdmUpOwogICAgICAgIHN0YXRlID0gU3RhdGUuQ2xvc2VkOwogICAgICAgIHdhbGxldC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgIENsb3NlZCgpOwogICAgfQogICAgZnVuY3Rpb24gZW5hYmxlUmVmdW5kcygpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsKICAgICAgICBzdGF0ZSA9IFN0YXRlLlJlZnVuZGluZzsKICAgICAgICBSZWZ1bmRzRW5hYmxlZCgpOwogICAgfQogICAgZnVuY3Rpb24gcmVmdW5kKGFkZHJlc3MgaW52ZXN0b3IpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5SZWZ1bmRpbmcpOwogICAgICAgIHVpbnQyNTYgZGVwb3NpdGVkVmFsdWUgPSBkZXBvc2l0ZWRbaW52ZXN0b3JdOwogICAgICAgIGRlcG9zaXRlZFtpbnZlc3Rvcl0gPSAwOwogICAgICAgIGludmVzdG9yLnRyYW5zZmVyKGRlcG9zaXRlZFZhbHVlKTsKICAgICAgICBSZWZ1bmRlZChpbnZlc3RvciwgZGVwb3NpdGVkVmFsdWUpOwogICAgfQp9Cgpjb250cmFjdCBHcnlwaG9uIGlzIEVSQzIwLCBPd25hYmxlIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBSZWZ1bmRWYXVsdCBwdWJsaWMgdmF1bHQ7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHZlc3RlZDsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSB0b3RhbF92ZXN0ZWQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgdWludDI1NiB0b3RhbFN1cHBseV87CgogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gJ0dyeXBob24nOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAnR1hDJzsKICAgIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzID0gNDsKICAgIHVpbnQyNTYgcHVibGljIGluaXRpYWxTdXBwbHkgPSAyMDAwMDAwMDAwOwoKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0OwogICAgdWludDI1NiBwdWJsaWMgZHVyYXRpb247CgogICAgdWludDI1NiBwdWJsaWMgcmF0ZUlDTyA9IDkxMDAwMDAwMDAwMDAwMDsKCiAgICB1aW50MjU2IHB1YmxpYyBwcmVTYWxlTWF4Q2FwSW5XZWkgPSAyNTAwIGV0aGVyOwogICAgdWludDI1NiBwdWJsaWMgcHJlU2FsZVJhaXNlZCA9IDA7CgogICAgdWludDI1NiBwdWJsaWMgaWNvU29mdENhcEluV2VpID0gMjUwMCBldGhlcjsKICAgIHVpbnQyNTYgcHVibGljIGljb0hhcmRDYXBJbldlaSA9IDEyMjQwMCBldGhlcjsKICAgIHVpbnQyNTYgcHVibGljIGljb1JhaXNlZCA9IDA7CgogICAgdWludDI1NiBwdWJsaWMgcHJlc2FsZVN0YXJ0VGltZXN0YW1wOwogICAgdWludDI1NiBwdWJsaWMgcHJlc2FsZUVuZFRpbWVzdGFtcDsKICAgIHVpbnQyNTYgcHVibGljIGljb1N0YXJ0VGltZXN0YW1wOwogICAgdWludDI1NiBwdWJsaWMgaWNvRW5kVGltZXN0YW1wOwoKICAgIHVpbnQyNTYgcHVibGljIHByZXNhbGVUb2tlbkxpbWl0OwogICAgdWludDI1NiBwdWJsaWMgaWNvVG9rZW5MaW1pdDsKCiAgICB1aW50MjU2IHB1YmxpYyBpbnZlc3RvckNvdW50OwoKICAgIGVudW0gU3RhdGUge1Vua25vd24sIFByZXBhcmluZywgUHJlU2FsZSwgSUNPLCBTdWNjZXNzLCBGYWlsdXJlLCBQcmVzYWxlRmluYWxpemVkLCBJQ09GaW5hbGl6ZWR9CgogICAgU3RhdGUgcHVibGljIGNyb3dkU2FsZVN0YXRlOwoKICAgIG1vZGlmaWVyIG5vblplcm8oKSB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIEdyeXBob24oKSBwdWJsaWMgewoKICAgICAgICBvd25lciA9IDB4ZjQyQjgyRDAyYjhmM0U3OTgzYjNmN0UxMDAwY0UyOEVDM0Y4QzgxNTsKICAgICAgICB2YXVsdCA9IG5ldyBSZWZ1bmRWYXVsdCgweDZjRDZCMDNEMTZFNEJFMDgxNTk0MTJhN0UyOTBGMUVBMjM0NDZCZjIpOwoKICAgICAgICB0b3RhbFN1cHBseV8gPSBpbml0aWFsU3VwcGx5KigxMCoqZGVjaW1hbHMpOwoKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSB0b3RhbFN1cHBseV87CgogICAgICAgIHByZXNhbGVTdGFydFRpbWVzdGFtcCA9IDE1MjMyMzIwMDA7CiAgICAgICAgcHJlc2FsZUVuZFRpbWVzdGFtcCA9IHByZXNhbGVTdGFydFRpbWVzdGFtcCArIDUwICogMSBkYXlzOwoKICAgICAgICBpY29TdGFydFRpbWVzdGFtcCA9IHByZXNhbGVFbmRUaW1lc3RhbXAgKyAxIGRheXM7CiAgICAgICAgaWNvRW5kVGltZXN0YW1wID0gaWNvU3RhcnRUaW1lc3RhbXAgKyA2MCAqIDEgZGF5czsKCiAgICAgICAgY3Jvd2RTYWxlU3RhdGUgPSBTdGF0ZS5QcmVwYXJpbmc7CgogICAgICAgIHN0YXJ0ID0gMTUyMzIzMjAwMDsKICAgICAgICBkdXJhdGlvbiA9IDIzMzI4MDAwOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIG5vblplcm8gcGF5YWJsZSB7CiAgICAgICAgZW50ZXIoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBlbnRlcigpIHB1YmxpYyBub25aZXJvIHBheWFibGUgewogICAgICAgIGlmKGlzUHJlU2FsZVBlcmlvZCgpKSB7CgogICAgICAgICAgICBpZihjcm93ZFNhbGVTdGF0ZSA9PSBTdGF0ZS5QcmVwYXJpbmcpIHsKICAgICAgICAgICAgICAgIGNyb3dkU2FsZVN0YXRlID0gU3RhdGUuUHJlU2FsZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGlzSUNPUGVyaW9kKCkpIHsKICAgICAgICAgICAgaWYoY3Jvd2RTYWxlU3RhdGUgPT0gU3RhdGUuUHJlc2FsZUZpbmFsaXplZCkgewogICAgICAgICAgICAgICAgY3Jvd2RTYWxlU3RhdGUgPSBTdGF0ZS5JQ087CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfdmFsdWUpIGludGVybmFsIG5vblplcm8gcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdWludDI1NiBib3VnaHRUb2tlbnMgPSBjYWxjdWxhdGVUb2tlbnMoX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKGJvdWdodFRva2VucyAhPSAwKTsKICAgICAgICBib3VnaHRUb2tlbnMgPSBib3VnaHRUb2tlbnMqKDEwKipkZWNpbWFscyk7CgogICAgICAgIGlmKGJhbGFuY2VPZihfcmVjaXBpZW50KSA9PSAwKSB7CiAgICAgICAgICAgIGludmVzdG9yQ291bnQrKzsKICAgICAgICB9CgogICAgICAgIGlmKGlzQ3Jvd2RTYWxlU3RhdGVQcmVTYWxlKCkpIHsKICAgICAgICAgICAgdHJhbnNmZXJUb2tlbnMoX3JlY2lwaWVudCwgYm91Z2h0VG9rZW5zKTsKICAgICAgICAgICAgdmF1bHQuZGVwb3NpdC52YWx1ZShfdmFsdWUpKF9yZWNpcGllbnQpOwogICAgICAgICAgICBwcmVTYWxlUmFpc2VkID0gcHJlU2FsZVJhaXNlZC5hZGQoX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIGlmIChpc0Nyb3dkU2FsZVN0YXRlSUNPKCkpIHsKICAgICAgICAgICAgdHJhbnNmZXJUb2tlbnMoX3JlY2lwaWVudCwgYm91Z2h0VG9rZW5zKTsKICAgICAgICAgICAgdmF1bHQuZGVwb3NpdC52YWx1ZShfdmFsdWUpKF9yZWNpcGllbnQpOwogICAgICAgICAgICBpY29SYWlzZWQgPSBpY29SYWlzZWQuYWRkKF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRva2VucyhhZGRyZXNzIF9yZWNpcGllbnQsIHVpbnQyNTYgdG9rZW5zX2luX2NlbnRzKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgdG9rZW5zX2luX2NlbnRzID4gMAogICAgICAgICAgICAmJiBfcmVjaXBpZW50ICE9IG93bmVyCiAgICAgICAgICAgICYmIHRva2Vuc19pbl9jZW50cyA8IGJhbGFuY2VzW293bmVyXQogICAgICAgICk7CgogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5zdWIodG9rZW5zX2luX2NlbnRzKTsKCiAgICAgICAgYmFsYW5jZXNbX3JlY2lwaWVudF0gPSBiYWxhbmNlc1tfcmVjaXBpZW50XS5hZGQodG9rZW5zX2luX2NlbnRzKTsKICAgICAgICBnZXRWZXN0ZWQoX3JlY2lwaWVudCk7CgogICAgICAgIFRyYW5zZmVyKG93bmVyLCBfcmVjaXBpZW50LCB0b2tlbnNfaW5fY2VudHMpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFZlc3RlZChhZGRyZXNzIF9iZW5lZmljaWFyeSkgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW19iZW5lZmljaWFyeV0+MCk7CiAgICAgICAgaWYgKF9iZW5lZmljaWFyeSA9PSBvd25lcil7CgogICAgICAgICAgICB2ZXN0ZWRbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdOwogICAgICAgICAgICB0b3RhbF92ZXN0ZWRbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdOwoKICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLnRpbWVzdGFtcCA8IHN0YXJ0KSB7CgogICAgICAgICAgICB2ZXN0ZWRbX2JlbmVmaWNpYXJ5XSA9IDA7CiAgICAgICAgICAgIHRvdGFsX3Zlc3RlZFtfYmVuZWZpY2lhcnldID0gMDsKCiAgICAgICAgfSBlbHNlIGlmIChibG9jay50aW1lc3RhbXAgPj0gc3RhcnQuYWRkKGR1cmF0aW9uKSkgewoKICAgICAgICAgICAgdG90YWxfdmVzdGVkW19iZW5lZmljaWFyeV0gPSBiYWxhbmNlc1tfYmVuZWZpY2lhcnldOwogICAgICAgICAgICB2ZXN0ZWRbX2JlbmVmaWNpYXJ5XSA9IGJhbGFuY2VzW19iZW5lZmljaWFyeV07CgogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICB1aW50IHZlc3RlZF9ub3cgPSBiYWxhbmNlc1tfYmVuZWZpY2lhcnldLm11bChibG9jay50aW1lc3RhbXAuc3ViKHN0YXJ0KSkuZGl2KGR1cmF0aW9uKTsKICAgICAgICAgICAgaWYodG90YWxfdmVzdGVkW19iZW5lZmljaWFyeV09PTApewogICAgICAgICAgICAgICAgdG90YWxfdmVzdGVkW19iZW5lZmljaWFyeV0gPSB2ZXN0ZWRfbm93OwoKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih2ZXN0ZWRfbm93ID4gdG90YWxfdmVzdGVkW19iZW5lZmljaWFyeV0pewogICAgICAgICAgICAgICAgdmVzdGVkW19iZW5lZmljaWFyeV0gPSB2ZXN0ZWRbX2JlbmVmaWNpYXJ5XS5hZGQodmVzdGVkX25vdy5zdWIodG90YWxfdmVzdGVkW19iZW5lZmljaWFyeV0pKTsKICAgICAgICAgICAgICAgIHRvdGFsX3Zlc3RlZFtfYmVuZWZpY2lhcnldID0gdmVzdGVkX25vdzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdmVzdGVkW19iZW5lZmljaWFyeV07CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2Vuc19pbl9jZW50cykgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90b2tlbnNfaW5fY2VudHMgPiAwKTsKICAgICAgICByZXF1aXJlKF90byAhPSBtc2cuc2VuZGVyKTsKICAgICAgICBnZXRWZXN0ZWQobXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdG9rZW5zX2luX2NlbnRzKTsKICAgICAgICByZXF1aXJlKHZlc3RlZFttc2cuc2VuZGVyXSA+PSBfdG9rZW5zX2luX2NlbnRzKTsKCiAgICAgICAgaWYoYmFsYW5jZU9mKF90bykgPT0gMCkgewogICAgICAgICAgICBpbnZlc3RvckNvdW50Kys7CiAgICAgICAgfQoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdG9rZW5zX2luX2NlbnRzKTsKICAgICAgICB2ZXN0ZWRbbXNnLnNlbmRlcl0gPSB2ZXN0ZWRbbXNnLnNlbmRlcl0uc3ViKF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdG9rZW5zX2luX2NlbnRzKTsKCiAgICAgICAgaWYoYmFsYW5jZU9mKG1zZy5zZW5kZXIpID09IDApIHsKICAgICAgICAgICAgaW52ZXN0b3JDb3VudD1pbnZlc3RvckNvdW50LTE7CiAgICAgICAgfQoKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5zX2luX2NlbnRzKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShfdG9rZW5zX2luX2NlbnRzID4gMCk7CiAgICAgICAgcmVxdWlyZShfZnJvbSAhPSBfdG8pOwogICAgICAgIGdldFZlc3RlZChfZnJvbSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3Rva2Vuc19pbl9jZW50cyk7CiAgICAgICAgcmVxdWlyZSh2ZXN0ZWRbX2Zyb21dID49IF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIHJlcXVpcmUoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3Rva2Vuc19pbl9jZW50cyk7CgogICAgICAgIGlmKGJhbGFuY2VPZihfdG8pID09IDApIHsKICAgICAgICAgICAgaW52ZXN0b3JDb3VudCsrOwogICAgICAgIH0KCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdG9rZW5zX2luX2NlbnRzKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdG9rZW5zX2luX2NlbnRzKTsKICAgICAgICB2ZXN0ZWRbX2Zyb21dID0gdmVzdGVkW19mcm9tXS5zdWIoX3Rva2Vuc19pbl9jZW50cyk7CgogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdG9rZW5zX2luX2NlbnRzKTsKCiAgICAgICAgaWYoYmFsYW5jZU9mKF9mcm9tKSA9PSAwKSB7CiAgICAgICAgICAgIGludmVzdG9yQ291bnQ9aW52ZXN0b3JDb3VudC0xOwogICAgICAgIH0KCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2Vuc19pbl9jZW50cyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF90b2tlbnNfaW5fY2VudHMpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUodmVzdGVkW21zZy5zZW5kZXJdID49IF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3Rva2Vuc19pbl9jZW50czsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3Rva2Vuc19pbl9jZW50cyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVRva2Vucyh1aW50MjU2IF9hbW91bnQpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgdG9rZW5zKXsKICAgICAgICBpZihjcm93ZFNhbGVTdGF0ZSA9PSBTdGF0ZS5QcmVwYXJpbmcgJiYgaXNQcmVTYWxlUGVyaW9kKCkpIHsKICAgICAgICAgICAgY3Jvd2RTYWxlU3RhdGUgPSBTdGF0ZS5QcmVTYWxlOwogICAgICAgIH0KICAgICAgICBpZihpc0Nyb3dkU2FsZVN0YXRlUHJlU2FsZSgpKSB7CiAgICAgICAgICAgIHRva2VucyA9IF9hbW91bnQuZGl2KHJhdGVJQ08pOwogICAgICAgIH0gZWxzZSBpZiAoaXNDcm93ZFNhbGVTdGF0ZUlDTygpKSB7CiAgICAgICAgICAgIHRva2VucyA9IF9hbW91bnQuZGl2KHJhdGVJQ08pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRva2VucyA9IDA7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldFJlZnVuZChhZGRyZXNzIF9yZWNpcGllbnQpIHB1YmxpYyByZXR1cm5zIChib29sKXsKICAgICAgICByZXF1aXJlKGNyb3dkU2FsZVN0YXRlID09IFN0YXRlLkZhaWx1cmUpOwogICAgICAgIHJlcXVpcmUocmVmdW5kZWRBbW91bnQoX3JlY2lwaWVudCkpOwogICAgICAgIHZhdWx0LnJlZnVuZChfcmVjaXBpZW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWZ1bmRlZEFtb3VudChhZGRyZXNzIF9yZWNpcGllbnQpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW19yZWNpcGllbnRdICE9IDApOwogICAgICAgIGJhbGFuY2VzW19yZWNpcGllbnRdID0gMDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gdG90YWxTdXBwbHlfOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIGEpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1thXTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0Nyb3dkU2FsZVN0YXRlUHJlU2FsZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGNyb3dkU2FsZVN0YXRlID09IFN0YXRlLlByZVNhbGU7CiAgICB9CgogICAgZnVuY3Rpb24gaXNDcm93ZFNhbGVTdGF0ZUlDTygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGNyb3dkU2FsZVN0YXRlID09IFN0YXRlLklDTzsKICAgIH0KCiAgICBmdW5jdGlvbiBpc1ByZVNhbGVQZXJpb2QoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmKHByZVNhbGVSYWlzZWQgPiBwcmVTYWxlTWF4Q2FwSW5XZWkgfHwgbm93ID49IHByZXNhbGVFbmRUaW1lc3RhbXApIHsKICAgICAgICAgICAgY3Jvd2RTYWxlU3RhdGUgPSBTdGF0ZS5QcmVzYWxlRmluYWxpemVkOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG5vdyA+IHByZXNhbGVTdGFydFRpbWVzdGFtcDsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaXNJQ09QZXJpb2QoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChpY29SYWlzZWQgPiBpY29IYXJkQ2FwSW5XZWkgfHwgbm93ID49IGljb0VuZFRpbWVzdGFtcCl7CiAgICAgICAgICAgIGNyb3dkU2FsZVN0YXRlID0gU3RhdGUuSUNPRmluYWxpemVkOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG5vdyA+IGljb1N0YXJ0VGltZXN0YW1wOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBlbmRDcm93ZFNhbGUoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5vdyA+PSBpY29FbmRUaW1lc3RhbXAgfHwgaWNvUmFpc2VkID49IGljb1NvZnRDYXBJbldlaSk7CiAgICAgICAgaWYoaWNvUmFpc2VkID49IGljb1NvZnRDYXBJbldlaSl7CiAgICAgICAgICAgIGNyb3dkU2FsZVN0YXRlID0gU3RhdGUuU3VjY2VzczsKICAgICAgICAgICAgdmF1bHQuY2xvc2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjcm93ZFNhbGVTdGF0ZSA9IFN0YXRlLkZhaWx1cmU7CiAgICAgICAgICAgIHZhdWx0LmVuYWJsZVJlZnVuZHMoKTsKICAgICAgICB9CiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldEludmVzdG9yQ291bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBpbnZlc3RvckNvdW50OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFByZXNhbGVSYWlzZWRBbW91bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBwcmVTYWxlUmFpc2VkOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldElDT1JhaXNlZEFtb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGljb1JhaXNlZDsKICAgIH0KCn0='.
	

]
