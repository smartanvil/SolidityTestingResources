Class {
	#name : #SRTF629cBd94d3791C9250152BD8dfBDF380E2a3B9c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTF629cBd94d3791C9250152BD8dfBDF380E2a3B9c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Ci8qCiAgICBVdGlsaXRpZXMgJiBDb21tb24gTW9kaWZpZXJzCiovCmNvbnRyYWN0IFV0aWxzIHsKICAgIC8qKgogICAgICAgIGNvbnN0cnVjdG9yCiAgICAqLwogICAgZnVuY3Rpb24gVXRpbHMoKSB7CiAgICB9CgogICAgLy8gdmFsaWRhdGVzIGFuIGFkZHJlc3MgLSBjdXJyZW50bHkgb25seSBjaGVja3MgdGhhdCBpdCBpc24ndCBudWxsCiAgICBtb2RpZmllciB2YWxpZEFkZHJlc3MoYWRkcmVzcyBfYWRkcmVzcykgewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3MgIT0gMHgwKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vIHZlcmlmaWVzIHRoYXQgdGhlIGFkZHJlc3MgaXMgZGlmZmVyZW50IHRoYW4gdGhpcyBjb250cmFjdCBhZGRyZXNzCiAgICBtb2RpZmllciBub3RUaGlzKGFkZHJlc3MgX2FkZHJlc3MpIHsKICAgICAgICByZXF1aXJlKF9hZGRyZXNzICE9IGFkZHJlc3ModGhpcykpOwogICAgICAgIF87CiAgICB9CgogICAgLy8gT3ZlcmZsb3cgcHJvdGVjdGVkIG1hdGggZnVuY3Rpb25zCgogICAgLyoqCiAgICAgICAgQGRldiByZXR1cm5zIHRoZSBzdW0gb2YgX3ggYW5kIF95LCBhc3NlcnRzIGlmIHRoZSBjYWxjdWxhdGlvbiBvdmVyZmxvd3MKCiAgICAgICAgQHBhcmFtIF94ICAgdmFsdWUgMQogICAgICAgIEBwYXJhbSBfeSAgIHZhbHVlIDIKCiAgICAgICAgQHJldHVybiBzdW0KICAgICovCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQyNTYgX3gsIHVpbnQyNTYgX3kpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHogPSBfeCArIF95OwogICAgICAgIGFzc2VydCh6ID49IF94KTsKICAgICAgICByZXR1cm4gejsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IHJldHVybnMgdGhlIGRpZmZlcmVuY2Ugb2YgX3ggbWludXMgX3ksIGFzc2VydHMgaWYgdGhlIHN1YnRyYWN0aW9uIHJlc3VsdHMgaW4gYSBuZWdhdGl2ZSBudW1iZXIKCiAgICAgICAgQHBhcmFtIF94ICAgbWludWVuZAogICAgICAgIEBwYXJhbSBfeSAgIHN1YnRyYWhlbmQKCiAgICAgICAgQHJldHVybiBkaWZmZXJlbmNlCiAgICAqLwogICAgZnVuY3Rpb24gc2FmZVN1Yih1aW50MjU2IF94LCB1aW50MjU2IF95KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KF94ID49IF95KTsKICAgICAgICByZXR1cm4gX3ggLSBfeTsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IHJldHVybnMgdGhlIHByb2R1Y3Qgb2YgbXVsdGlwbHlpbmcgX3ggYnkgX3ksIGFzc2VydHMgaWYgdGhlIGNhbGN1bGF0aW9uIG92ZXJmbG93cwoKICAgICAgICBAcGFyYW0gX3ggICBmYWN0b3IgMQogICAgICAgIEBwYXJhbSBfeSAgIGZhY3RvciAyCgogICAgICAgIEByZXR1cm4gcHJvZHVjdAogICAgKi8KICAgIGZ1bmN0aW9uIHNhZmVNdWwodWludDI1NiBfeCwgdWludDI1NiBfeSkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgeiA9IF94ICogX3k7CiAgICAgICAgYXNzZXJ0KF94ID09IDAgfHwgeiAvIF94ID09IF95KTsKICAgICAgICByZXR1cm4gejsKICAgIH0KfQoKLyoKICAgIEVSQzIwIFN0YW5kYXJkIFRva2VuIGludGVyZmFjZQoqLwpjb250cmFjdCBJRVJDMjBUb2tlbiB7CiAgICAvLyB0aGVzZSBmdW5jdGlvbnMgYXJlbid0IGFic3RyYWN0IHNpbmNlIHRoZSBjb21waWxlciBlbWl0cyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBnZXR0ZXIgZnVuY3Rpb25zIGFzIGV4dGVybmFsCiAgICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHN0cmluZykgeyBuYW1lOyB9CiAgICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nKSB7IHN5bWJvbDsgfQogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDgpIHsgZGVjaW1hbHM7IH0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsgdG90YWxTdXBwbHk7IH0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgeyBfb3duZXI7IGJhbGFuY2U7IH0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7IF9vd25lcjsgX3NwZW5kZXI7IHJlbWFpbmluZzsgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwp9CgoKLyoqCiAgICBFUkMyMCBTdGFuZGFyZCBUb2tlbiBpbXBsZW1lbnRhdGlvbgoqLwpjb250cmFjdCBFUkMyMFRva2VuIGlzIElFUkMyMFRva2VuLCBVdGlscyB7CiAgICBzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gIlRva2VuIDAuMSI7CiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIiI7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAwOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSAwOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgogICAgLyoqCiAgICAgICAgQGRldiBjb25zdHJ1Y3RvcgoKICAgICAgICBAcGFyYW0gX25hbWUgICAgICAgIHRva2VuIG5hbWUKICAgICAgICBAcGFyYW0gX3N5bWJvbCAgICAgIHRva2VuIHN5bWJvbAogICAgICAgIEBwYXJhbSBfZGVjaW1hbHMgICAgZGVjaW1hbCBwb2ludHMsIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAqLwogICAgZnVuY3Rpb24gRVJDMjBUb2tlbihzdHJpbmcgX25hbWUsIHN0cmluZyBfc3ltYm9sLCB1aW50OCBfZGVjaW1hbHMpIHsKICAgICAgICByZXF1aXJlKGJ5dGVzKF9uYW1lKS5sZW5ndGggPiAwICYmIGJ5dGVzKF9zeW1ib2wpLmxlbmd0aCA+IDApOyAvLyB2YWxpZGF0ZSBpbnB1dAoKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IHNlbmQgY29pbnMKICAgICAgICB0aHJvd3Mgb24gYW55IGVycm9yIHJhdGhlciB0aGVuIHJldHVybiBhIGZhbHNlIGZsYWcgdG8gbWluaW1pemUgdXNlciBlcnJvcnMKCiAgICAgICAgQHBhcmFtIF90byAgICAgIHRhcmdldCBhZGRyZXNzCiAgICAgICAgQHBhcmFtIF92YWx1ZSAgIHRyYW5zZmVyIGFtb3VudAoKICAgICAgICBAcmV0dXJuIHRydWUgaWYgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsLCBmYWxzZSBpZiBpdCB3YXNuJ3QKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpCiAgICAgICAgcHVibGljCiAgICAgICAgdmFsaWRBZGRyZXNzKF90bykKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlT2ZbbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZU9mW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZltfdG9dLCBfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IGFuIGFjY291bnQvY29udHJhY3QgYXR0ZW1wdHMgdG8gZ2V0IHRoZSBjb2lucwogICAgICAgIHRocm93cyBvbiBhbnkgZXJyb3IgcmF0aGVyIHRoZW4gcmV0dXJuIGEgZmFsc2UgZmxhZyB0byBtaW5pbWl6ZSB1c2VyIGVycm9ycwoKICAgICAgICBAcGFyYW0gX2Zyb20gICAgc291cmNlIGFkZHJlc3MKICAgICAgICBAcGFyYW0gX3RvICAgICAgdGFyZ2V0IGFkZHJlc3MKICAgICAgICBAcGFyYW0gX3ZhbHVlICAgdHJhbnNmZXIgYW1vdW50CgogICAgICAgIEByZXR1cm4gdHJ1ZSBpZiB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwsIGZhbHNlIGlmIGl0IHdhc24ndAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpCiAgICAgICAgcHVibGljCiAgICAgICAgdmFsaWRBZGRyZXNzKF9mcm9tKQogICAgICAgIHZhbGlkQWRkcmVzcyhfdG8pCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZU9mW19mcm9tXSwgX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZU9mW190b10sIF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IGFsbG93IGFub3RoZXIgYWNjb3VudC9jb250cmFjdCB0byBzcGVuZCBzb21lIHRva2VucyBvbiB5b3VyIGJlaGFsZgogICAgICAgIHRocm93cyBvbiBhbnkgZXJyb3IgcmF0aGVyIHRoZW4gcmV0dXJuIGEgZmFsc2UgZmxhZyB0byBtaW5pbWl6ZSB1c2VyIGVycm9ycwoKICAgICAgICBhbHNvLCB0byBtaW5pbWl6ZSB0aGUgcmlzayBvZiB0aGUgYXBwcm92ZS90cmFuc2ZlckZyb20gYXR0YWNrIHZlY3RvcgogICAgICAgIChzZWUgaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xWUxQdFF4WnUxVUF2TzljWjFPMlJQWEJiVDBtb29oNERZS2pBX2pwLVJMTS8pLCBhcHByb3ZlIGhhcyB0byBiZSBjYWxsZWQgdHdpY2UKICAgICAgICBpbiAyIHNlcGFyYXRlIHRyYW5zYWN0aW9ucyAtIG9uY2UgdG8gY2hhbmdlIHRoZSBhbGxvd2FuY2UgdG8gMCBhbmQgc2Vjb25kbHkgdG8gY2hhbmdlIGl0IHRvIHRoZSBuZXcgYWxsb3dhbmNlIHZhbHVlCgogICAgICAgIEBwYXJhbSBfc3BlbmRlciBhcHByb3ZlZCBhZGRyZXNzCiAgICAgICAgQHBhcmFtIF92YWx1ZSAgIGFsbG93YW5jZSBhbW91bnQKCiAgICAgICAgQHJldHVybiB0cnVlIGlmIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2UgaWYgaXQgd2Fzbid0CiAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkKICAgICAgICBwdWJsaWMKICAgICAgICB2YWxpZEFkZHJlc3MoX3NwZW5kZXIpCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIC8vIGlmIHRoZSBhbGxvd2FuY2UgaXNuJ3QgMCwgaXQgY2FuIG9ubHkgYmUgdXBkYXRlZCB0byAwIHRvIHByZXZlbnQgYW4gYWxsb3dhbmNlIGNoYW5nZSBpbW1lZGlhdGVseSBhZnRlciB3aXRoZHJhd2FsCiAgICAgICAgcmVxdWlyZShfdmFsdWUgPT0gMCB8fCBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApOwoKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgovKgogICAgT3duZWQgY29udHJhY3QgaW50ZXJmYWNlCiovCmNvbnRyYWN0IElPd25lZCB7CiAgICAvLyB0aGlzIGZ1bmN0aW9uIGlzbid0IGFic3RyYWN0IHNpbmNlIHRoZSBjb21waWxlciBlbWl0cyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBnZXR0ZXIgZnVuY3Rpb25zIGFzIGV4dGVybmFsCiAgICBmdW5jdGlvbiBvd25lcigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7IG93bmVyOyB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHB1YmxpYzsKfQoKLyoKICAgIFByb3ZpZGVzIHN1cHBvcnQgYW5kIHV0aWxpdGllcyBmb3IgY29udHJhY3Qgb3duZXJzaGlwCiovCmNvbnRyYWN0IE93bmVkIGlzIElPd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwoKICAgIGV2ZW50IE93bmVyVXBkYXRlKGFkZHJlc3MgX3ByZXZPd25lciwgYWRkcmVzcyBfbmV3T3duZXIpOwoKICAgIC8qKgogICAgICAgIEBkZXYgY29uc3RydWN0b3IKICAgICovCiAgICBmdW5jdGlvbiBPd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLy8gYWxsb3dzIGV4ZWN1dGlvbiBieSB0aGUgb3duZXIgb25seQogICAgbW9kaWZpZXIgb3duZXJPbmx5IHsKICAgICAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IGFsbG93cyB0cmFuc2ZlcnJpbmcgdGhlIGNvbnRyYWN0IG93bmVyc2hpcAogICAgICAgIHRoZSBuZXcgb3duZXIgc3RpbGwgbmVlZHMgdG8gYWNjZXB0IHRoZSB0cmFuc2ZlcgogICAgICAgIGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgY29udHJhY3Qgb3duZXIKCiAgICAgICAgQHBhcmFtIF9uZXdPd25lciAgICBuZXcgY29udHJhY3Qgb3duZXIKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgcmVxdWlyZShfbmV3T3duZXIgIT0gb3duZXIpOwogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOwogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgdXNlZCBieSBhIG5ldyBvd25lciB0byBhY2NlcHQgYW4gb3duZXJzaGlwIHRyYW5zZmVyCiAgICAqLwogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpOwogICAgICAgIE93bmVyVXBkYXRlKG93bmVyLCBuZXdPd25lcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICBuZXdPd25lciA9IDB4MDsKICAgIH0KfQoKLyoKICAgIFRva2VuIEhvbGRlciBpbnRlcmZhY2UKKi8KY29udHJhY3QgSVRva2VuSG9sZGVyIGlzIElPd25lZCB7CiAgICBmdW5jdGlvbiB3aXRoZHJhd1Rva2VucyhJRVJDMjBUb2tlbiBfdG9rZW4sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYzsKfQoKLyoKICAgIFdlIGNvbnNpZGVyIGV2ZXJ5IGNvbnRyYWN0IHRvIGJlIGEgJ3Rva2VuIGhvbGRlcicgc2luY2UgaXQncyBjdXJyZW50bHkgbm90IHBvc3NpYmxlCiAgICBmb3IgYSBjb250cmFjdCB0byBkZW55IHJlY2VpdmluZyB0b2tlbnMuCgogICAgVGhlIFRva2VuSG9sZGVyJ3MgY29udHJhY3Qgc29sZSBwdXJwb3NlIGlzIHRvIHByb3ZpZGUgYSBzYWZldHkgbWVjaGFuaXNtIHRoYXQgYWxsb3dzCiAgICB0aGUgb3duZXIgdG8gc2VuZCB0b2tlbnMgdGhhdCB3ZXJlIHNlbnQgdG8gdGhlIGNvbnRyYWN0IGJ5IG1pc3Rha2UgYmFjayB0byB0aGVpciBzZW5kZXIuCiovCmNvbnRyYWN0IFRva2VuSG9sZGVyIGlzIElUb2tlbkhvbGRlciwgT3duZWQsIFV0aWxzIHsKICAgIC8qKgogICAgICAgIEBkZXYgY29uc3RydWN0b3IKICAgICovCiAgICBmdW5jdGlvbiBUb2tlbkhvbGRlcigpIHsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IHdpdGhkcmF3cyB0b2tlbnMgaGVsZCBieSB0aGUgY29udHJhY3QgYW5kIHNlbmRzIHRoZW0gdG8gYW4gYWNjb3VudAogICAgICAgIGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXIKCiAgICAgICAgQHBhcmFtIF90b2tlbiAgIEVSQzIwIHRva2VuIGNvbnRyYWN0IGFkZHJlc3MKICAgICAgICBAcGFyYW0gX3RvICAgICAgYWNjb3VudCB0byByZWNlaXZlIHRoZSBuZXcgYW1vdW50CiAgICAgICAgQHBhcmFtIF9hbW91bnQgIGFtb3VudCB0byB3aXRoZHJhdwogICAgKi8KICAgIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW5zKElFUkMyMFRva2VuIF90b2tlbiwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICBvd25lck9ubHkKICAgICAgICB2YWxpZEFkZHJlc3MoX3Rva2VuKQogICAgICAgIHZhbGlkQWRkcmVzcyhfdG8pCiAgICAgICAgbm90VGhpcyhfdG8pCiAgICB7CiAgICAgICAgYXNzZXJ0KF90b2tlbi50cmFuc2ZlcihfdG8sIF9hbW91bnQpKTsKICAgIH0KfQoKCmNvbnRyYWN0IEVOSlRva2VuIGlzIEVSQzIwVG9rZW4sIFRva2VuSG9sZGVyIHsKCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFZBUklBQkxFIElOSVRJQUxJWkFUSU9OIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgdWludDI1NiBjb25zdGFudCBwdWJsaWMgRU5KX1VOSVQgPSAxMCAqKiAxODsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5ID0gMSAqICgxMCoqOSkgKiBFTkpfVU5JVDsKCiAgICAvLyAgQ29uc3RhbnRzIAogICAgdWludDI1NiBjb25zdGFudCBwdWJsaWMgbWF4UHJlc2FsZVN1cHBseSA9IDYwMCAqIDEwKio2ICogRU5KX1VOSVQ7ICAgICAgICAgICAvLyBUb3RhbCBwcmVzYWxlIHN1cHBseSBhdCBtYXggYm9udXMKICAgIHVpbnQyNTYgY29uc3RhbnQgcHVibGljIG1pbkNyb3dkc2FsZUFsbG9jYXRpb24gPSAyMDAgKiAxMCoqNiAqIEVOSl9VTklUOyAgICAgLy8gTWluIGFtb3VudCBmb3IgY3Jvd2RzYWxlCiAgICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBpbmNlbnRpdmlzYXRpb25BbGxvY2F0aW9uID0gMTAwICogMTAqKjYgKiBFTkpfVU5JVDsgIC8vIEluY2VudGl2aXNhdGlvbiBBbGxvY2F0aW9uCiAgICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBhZHZpc29yc0FsbG9jYXRpb24gPSAyNiAqIDEwKio2ICogRU5KX1VOSVQ7ICAgICAgICAgIC8vIEFkdmlzb3JzIEFsbG9jYXRpb24KICAgIHVpbnQyNTYgY29uc3RhbnQgcHVibGljIGVuamluVGVhbUFsbG9jYXRpb24gPSA3NCAqIDEwKio2ICogRU5KX1VOSVQ7ICAgICAgICAgLy8gRW5qaW4gVGVhbSBhbGxvY2F0aW9uCgogICAgYWRkcmVzcyBwdWJsaWMgY3Jvd2RGdW5kQWRkcmVzczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRyZXNzIG9mIHRoZSBjcm93ZGZ1bmQKICAgIGFkZHJlc3MgcHVibGljIGFkdmlzb3JBZGRyZXNzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5qaW4gYWR2aXNvcidzIGFkZHJlc3MKICAgIGFkZHJlc3MgcHVibGljIGluY2VudGl2aXNhdGlvbkZ1bmRBZGRyZXNzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkcmVzcyB0aGF0IGhvbGRzIHRoZSBpbmNlbnRpdml6YXRpb24gZnVuZHMKICAgIGFkZHJlc3MgcHVibGljIGVuamluVGVhbUFkZHJlc3M7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5qaW4gVGVhbSBhZGRyZXNzCgogICAgLy8gIFZhcmlhYmxlcwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsQWxsb2NhdGVkVG9BZHZpc29ycyA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ291bnRlciB0byBrZWVwIHRyYWNrIG9mIGFkdmlzb3IgdG9rZW4gYWxsb2NhdGlvbgogICAgdWludDI1NiBwdWJsaWMgdG90YWxBbGxvY2F0ZWRUb1RlYW0gPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudGVyIHRvIGtlZXAgdHJhY2sgb2YgdGVhbSB0b2tlbiBhbGxvY2F0aW9uCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbEFsbG9jYXRlZCA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvdW50ZXIgdG8ga2VlcCB0cmFjayBvZiBvdmVyYWxsIHRva2VuIGFsbG9jYXRpb24KICAgIHVpbnQyNTYgY29uc3RhbnQgcHVibGljIGVuZFRpbWUgPSAxNTA5NDk0MzQwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMTAvMzEvMjAxNyBAIDExOjU5cG0gKFVUQykgY3Jvd2RzYWxlIGVuZCB0aW1lIChpbiBzZWNvbmRzKQoKICAgIGJvb2wgaW50ZXJuYWwgaXNSZWxlYXNlZFRvUHVibGljID0gZmFsc2U7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZsYWcgdG8gYWxsb3cgdHJhbnNmZXIvdHJhbnNmZXJGcm9tIGJlZm9yZSB0aGUgZW5kIG9mIHRoZSBjcm93ZGZ1bmQKCiAgICB1aW50MjU2IGludGVybmFsIHRlYW1UcmFuY2hlc1JlbGVhc2VkID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyYWNrIGhvdyBtYW55IHRyYW5jaGVzIChhbGxvY2F0aW9ucyBvZiAxMi41JSB0ZWFtIHRva2VucykgaGF2ZSBiZWVuIHJlbGVhc2VkCiAgICB1aW50MjU2IGludGVybmFsIG1heFRlYW1UcmFuY2hlcyA9IDg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBudW1iZXIgb2YgdHJhbmNoZXMgYWxsb3dlZCB0byB0aGUgdGVhbSB1bnRpbCBkZXBsZXRlZAoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gTU9ESUZJRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgLy8gRW5qaW4gVGVhbSB0aW1lbG9jayAgICAKICAgIG1vZGlmaWVyIHNhZmVUaW1lbG9jaygpIHsKICAgICAgICByZXF1aXJlKG5vdyA+PSBlbmRUaW1lICsgNiAqIDQgd2Vla3MpOwogICAgICAgIF87CiAgICB9CgogICAgLy8gQWR2aXNvciBUZWFtIHRpbWVsb2NrICAgIAogICAgbW9kaWZpZXIgYWR2aXNvclRpbWVsb2NrKCkgewogICAgICAgIHJlcXVpcmUobm93ID49IGVuZFRpbWUgKyAyICogNCB3ZWVrcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBGdW5jdGlvbiBvbmx5IGFjY2Vzc2libGUgYnkgdGhlIENyb3dkZnVuZCBjb250cmFjdAogICAgbW9kaWZpZXIgY3Jvd2RmdW5kT25seSgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY3Jvd2RGdW5kQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBDT05TVFJVQ1RPUiAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIC8qKgogICAgICAgIEBkZXYgY29uc3RydWN0b3IKICAgICAgICBAcGFyYW0gX2Nyb3dkRnVuZEFkZHJlc3MgICBDcm93ZGZ1bmQgYWRkcmVzcwogICAgICAgIEBwYXJhbSBfYWR2aXNvckFkZHJlc3MgICAgIEFkdmlzb3IgYWRkcmVzcwogICAgKi8KICAgIGZ1bmN0aW9uIEVOSlRva2VuKGFkZHJlc3MgX2Nyb3dkRnVuZEFkZHJlc3MsIGFkZHJlc3MgX2Fkdmlzb3JBZGRyZXNzLCBhZGRyZXNzIF9pbmNlbnRpdmlzYXRpb25GdW5kQWRkcmVzcywgYWRkcmVzcyBfZW5qaW5UZWFtQWRkcmVzcykKICAgIEVSQzIwVG9rZW4oIkVuamluIENvaW4iLCAiRU5KIiwgMTgpCiAgICAgewogICAgICAgIGNyb3dkRnVuZEFkZHJlc3MgPSBfY3Jvd2RGdW5kQWRkcmVzczsKICAgICAgICBhZHZpc29yQWRkcmVzcyA9IF9hZHZpc29yQWRkcmVzczsKICAgICAgICBlbmppblRlYW1BZGRyZXNzID0gX2VuamluVGVhbUFkZHJlc3M7CiAgICAgICAgaW5jZW50aXZpc2F0aW9uRnVuZEFkZHJlc3MgPSBfaW5jZW50aXZpc2F0aW9uRnVuZEFkZHJlc3M7CiAgICAgICAgYmFsYW5jZU9mW19jcm93ZEZ1bmRBZGRyZXNzXSA9IG1pbkNyb3dkc2FsZUFsbG9jYXRpb24gKyBtYXhQcmVzYWxlU3VwcGx5OyAvLyBUb3RhbCBwcmVzYWxlICsgY3Jvd2RmdW5kIHRva2VucwogICAgICAgIGJhbGFuY2VPZltfaW5jZW50aXZpc2F0aW9uRnVuZEFkZHJlc3NdID0gaW5jZW50aXZpc2F0aW9uQWxsb2NhdGlvbjsgICAgICAgLy8gMTAlIEFsbG9jYXRlZCBmb3IgTWFya2V0aW5nIGFuZCBJbmNlbnRpdmlzYXRpb24KICAgICAgICB0b3RhbEFsbG9jYXRlZCArPSBpbmNlbnRpdmlzYXRpb25BbGxvY2F0aW9uOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0byB0b3RhbCBBbGxvY2F0ZWQgZnVuZHMKICAgIH0KCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEVSQzIwIE9WRVJSSURFIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgLyoqCiAgICAgICAgQGRldiBzZW5kIGNvaW5zCiAgICAgICAgdGhyb3dzIG9uIGFueSBlcnJvciByYXRoZXIgdGhlbiByZXR1cm4gYSBmYWxzZSBmbGFnIHRvIG1pbmltaXplIHVzZXIgZXJyb3JzCiAgICAgICAgaW4gYWRkaXRpb24gdG8gdGhlIHN0YW5kYXJkIGNoZWNrcywgdGhlIGZ1bmN0aW9uIHRocm93cyBpZiB0cmFuc2ZlcnMgYXJlIGRpc2FibGVkCgogICAgICAgIEBwYXJhbSBfdG8gICAgICB0YXJnZXQgYWRkcmVzcwogICAgICAgIEBwYXJhbSBfdmFsdWUgICB0cmFuc2ZlciBhbW91bnQKCiAgICAgICAgQHJldHVybiB0cnVlIGlmIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCwgdGhyb3dzIGlmIGl0IHdhc24ndAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChpc1RyYW5zZmVyQWxsb3dlZCgpID09IHRydWUgfHwgbXNnLnNlbmRlciA9PSBjcm93ZEZ1bmRBZGRyZXNzIHx8IG1zZy5zZW5kZXIgPT0gaW5jZW50aXZpc2F0aW9uRnVuZEFkZHJlc3MpIHsKICAgICAgICAgICAgYXNzZXJ0KHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXZlcnQoKTsgICAgICAgIAogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgYW4gYWNjb3VudC9jb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIGNvaW5zCiAgICAgICAgdGhyb3dzIG9uIGFueSBlcnJvciByYXRoZXIgdGhlbiByZXR1cm4gYSBmYWxzZSBmbGFnIHRvIG1pbmltaXplIHVzZXIgZXJyb3JzCiAgICAgICAgaW4gYWRkaXRpb24gdG8gdGhlIHN0YW5kYXJkIGNoZWNrcywgdGhlIGZ1bmN0aW9uIHRocm93cyBpZiB0cmFuc2ZlcnMgYXJlIGRpc2FibGVkCgogICAgICAgIEBwYXJhbSBfZnJvbSAgICBzb3VyY2UgYWRkcmVzcwogICAgICAgIEBwYXJhbSBfdG8gICAgICB0YXJnZXQgYWRkcmVzcwogICAgICAgIEBwYXJhbSBfdmFsdWUgICB0cmFuc2ZlciBhbW91bnQKCiAgICAgICAgQHJldHVybiB0cnVlIGlmIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCwgdGhyb3dzIGlmIGl0IHdhc24ndAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoaXNUcmFuc2ZlckFsbG93ZWQoKSA9PSB0cnVlIHx8IG1zZy5zZW5kZXIgPT0gY3Jvd2RGdW5kQWRkcmVzcyB8fCBtc2cuc2VuZGVyID09IGluY2VudGl2aXNhdGlvbkZ1bmRBZGRyZXNzKSB7ICAgICAgICAKICAgICAgICAgICAgYXNzZXJ0KHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldmVydCgpOwogICAgfQoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gQUxMT0NBVElPTiBGVU5DVElPTlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvKioKICAgICAgICBAZGV2IFJlbGVhc2Ugb25lIHNpbmdsZSB0cmFuY2hlIG9mIHRoZSBFbmppbiBUZWFtIFRva2VuIGFsbG9jYXRpb24KICAgICAgICB0aHJvd3MgaWYgYmVmb3JlIHRpbWVsb2NrICg2IG1vbnRocykgZW5kcyBhbmQgaWYgbm90IGluaXRpYXRlZCBieSB0aGUgb3duZXIgb2YgdGhlIGNvbnRyYWN0CiAgICAgICAgcmV0dXJucyB0cnVlIGlmIHZhbGlkCiAgICAgICAgU2NoZWR1bGUgZ29lcyBhcyBmb2xsb3dzOgogICAgICAgIDMgbW9udGhzOiAxMi41JSAodGhpcyB0cmFuY2hlIGNhbiBvbmx5IGJlIHJlbGVhc2VkIGFmdGVyIHRoZSBpbml0aWFsIDYgbW9udGhzIGhhcyBwYXNzZWQpCiAgICAgICAgNiBtb250aHM6IDEyLjUlCiAgICAgICAgOSBtb250aHM6IDEyLjUlCiAgICAgICAgMTIgbW9udGhzOiAxMi41JQogICAgICAgIDE1IG1vbnRoczogMTIuNSUKICAgICAgICAxOCBtb250aHM6IDEyLjUlCiAgICAgICAgMjEgbW9udGhzOiAxMi41JQogICAgICAgIDI0IG1vbnRoczogMTIuNSUKICAgICAgICBAcmV0dXJuIHRydWUgaWYgc3VjY2Vzc2Z1bCwgdGhyb3dzIGlmIG5vdAogICAgKi8KICAgIGZ1bmN0aW9uIHJlbGVhc2VFbmppblRlYW1Ub2tlbnMoKSBzYWZlVGltZWxvY2sgb3duZXJPbmx5IHJldHVybnMoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSh0b3RhbEFsbG9jYXRlZFRvVGVhbSA8IGVuamluVGVhbUFsbG9jYXRpb24pOwoKICAgICAgICB1aW50MjU2IGVuamluVGVhbUFsbG9jID0gZW5qaW5UZWFtQWxsb2NhdGlvbiAvIDEwMDA7CiAgICAgICAgdWludDI1NiBjdXJyZW50VHJhbmNoZSA9IHVpbnQyNTYobm93IC0gZW5kVGltZSkgLyAxMiB3ZWVrczsgICAgIC8vICJtb250aHMiIGFmdGVyIGNyb3dkc2FsZSBlbmQgdGltZSAoZGl2aXNpb24gZmxvb3JlZCkKCiAgICAgICAgaWYodGVhbVRyYW5jaGVzUmVsZWFzZWQgPCBtYXhUZWFtVHJhbmNoZXMgJiYgY3VycmVudFRyYW5jaGUgPiB0ZWFtVHJhbmNoZXNSZWxlYXNlZCkgewogICAgICAgICAgICB0ZWFtVHJhbmNoZXNSZWxlYXNlZCsrOwoKICAgICAgICAgICAgdWludDI1NiBhbW91bnQgPSBzYWZlTXVsKGVuamluVGVhbUFsbG9jLCAxMjUpOwogICAgICAgICAgICBiYWxhbmNlT2ZbZW5qaW5UZWFtQWRkcmVzc10gPSBzYWZlQWRkKGJhbGFuY2VPZltlbmppblRlYW1BZGRyZXNzXSwgYW1vdW50KTsKICAgICAgICAgICAgVHJhbnNmZXIoMHgwLCBlbmppblRlYW1BZGRyZXNzLCBhbW91bnQpOwogICAgICAgICAgICB0b3RhbEFsbG9jYXRlZCA9IHNhZmVBZGQodG90YWxBbGxvY2F0ZWQsIGFtb3VudCk7CiAgICAgICAgICAgIHRvdGFsQWxsb2NhdGVkVG9UZWFtID0gc2FmZUFkZCh0b3RhbEFsbG9jYXRlZFRvVGVhbSwgYW1vdW50KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldmVydCgpOwogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgcmVsZWFzZSBBZHZpc29ycyBUb2tlbiBhbGxvY2F0aW9uCiAgICAgICAgdGhyb3dzIGlmIGJlZm9yZSB0aW1lbG9jayAoMiBtb250aHMpIGVuZHMgb3IgaWYgbm8gaW5pdGlhdGVkIGJ5IHRoZSBhZHZpc29ycyBhZGRyZXNzCiAgICAgICAgb3IgaWYgdGhlcmUgaXMgbm8gbW9yZSBhbGxvY2F0aW9uIHRvIGdpdmUgb3V0CiAgICAgICAgcmV0dXJucyB0cnVlIGlmIHZhbGlkCgogICAgICAgIEByZXR1cm4gdHJ1ZSBpZiBzdWNjZXNzZnVsLCB0aHJvd3MgaWYgbm90CiAgICAqLwogICAgZnVuY3Rpb24gcmVsZWFzZUFkdmlzb3JUb2tlbnMoKSBhZHZpc29yVGltZWxvY2sgb3duZXJPbmx5IHJldHVybnMoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSh0b3RhbEFsbG9jYXRlZFRvQWR2aXNvcnMgPT0gMCk7CiAgICAgICAgYmFsYW5jZU9mW2Fkdmlzb3JBZGRyZXNzXSA9IHNhZmVBZGQoYmFsYW5jZU9mW2Fkdmlzb3JBZGRyZXNzXSwgYWR2aXNvcnNBbGxvY2F0aW9uKTsKICAgICAgICB0b3RhbEFsbG9jYXRlZCA9IHNhZmVBZGQodG90YWxBbGxvY2F0ZWQsIGFkdmlzb3JzQWxsb2NhdGlvbik7CiAgICAgICAgdG90YWxBbGxvY2F0ZWRUb0Fkdmlzb3JzID0gYWR2aXNvcnNBbGxvY2F0aW9uOwogICAgICAgIFRyYW5zZmVyKDB4MCwgYWR2aXNvckFkZHJlc3MsIGFkdmlzb3JzQWxsb2NhdGlvbik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgICAgQGRldiBSZXRyaWV2ZSB1bnNvbGQgdG9rZW5zIGZyb20gdGhlIGNyb3dkZnVuZAogICAgICAgIHRocm93cyBpZiBiZWZvcmUgdGltZWxvY2sgKDYgbW9udGhzIGZyb20gZW5kIG9mIENyb3dkZnVuZCkgZW5kcyBhbmQgaWYgbm8gaW5pdGlhdGVkIGJ5IHRoZSBvd25lciBvZiB0aGUgY29udHJhY3QKICAgICAgICByZXR1cm5zIHRydWUgaWYgdmFsaWQKCiAgICAgICAgQHJldHVybiB0cnVlIGlmIHN1Y2Nlc3NmdWwsIHRocm93cyBpZiBub3QKICAgICovCiAgICBmdW5jdGlvbiByZXRyaWV2ZVVuc29sZFRva2VucygpIHNhZmVUaW1lbG9jayBvd25lck9ubHkgcmV0dXJucyhib29sIHN1Y2Nlc3MpIHsKICAgICAgICB1aW50MjU2IGFtb3VudE9mVG9rZW5zID0gYmFsYW5jZU9mW2Nyb3dkRnVuZEFkZHJlc3NdOwogICAgICAgIGJhbGFuY2VPZltjcm93ZEZ1bmRBZGRyZXNzXSA9IDA7CiAgICAgICAgYmFsYW5jZU9mW2luY2VudGl2aXNhdGlvbkZ1bmRBZGRyZXNzXSA9IHNhZmVBZGQoYmFsYW5jZU9mW2luY2VudGl2aXNhdGlvbkZ1bmRBZGRyZXNzXSwgYW1vdW50T2ZUb2tlbnMpOwogICAgICAgIHRvdGFsQWxsb2NhdGVkID0gc2FmZUFkZCh0b3RhbEFsbG9jYXRlZCwgYW1vdW50T2ZUb2tlbnMpOwogICAgICAgIFRyYW5zZmVyKGNyb3dkRnVuZEFkZHJlc3MsIGluY2VudGl2aXNhdGlvbkZ1bmRBZGRyZXNzLCBhbW91bnRPZlRva2Vucyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgICAgQGRldiBLZWVwIHRyYWNrIG9mIHRva2VuIGFsbG9jYXRpb25zCiAgICAgICAgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBjcm93ZGZ1bmQgY29udHJhY3QKICAgICovCiAgICBmdW5jdGlvbiBhZGRUb0FsbG9jYXRpb24odWludDI1NiBfYW1vdW50KSBjcm93ZGZ1bmRPbmx5IHsKICAgICAgICB0b3RhbEFsbG9jYXRlZCA9IHNhZmVBZGQodG90YWxBbGxvY2F0ZWQsIF9hbW91bnQpOwogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgRnVuY3Rpb24gdG8gYWxsb3cgdHJhbnNmZXJzCiAgICAgICAgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBvd25lciBvZiB0aGUgY29udHJhY3QKICAgICAgICBUcmFuc2ZlcnMgd2lsbCBiZSBhbGxvd2VkIHJlZ2FyZGxlc3MgYWZ0ZXIgdGhlIGNyb3dkZnVuZCBlbmQgdGltZS4KICAgICovCiAgICBmdW5jdGlvbiBhbGxvd1RyYW5zZmVycygpIG93bmVyT25seSB7CiAgICAgICAgaXNSZWxlYXNlZFRvUHVibGljID0gdHJ1ZTsKICAgIH0gCgogICAgLyoqCiAgICAgICAgQGRldiBVc2VyIHRyYW5zZmVycyBhcmUgYWxsb3dlZC9yZWplY3RlZAogICAgICAgIFRyYW5zZmVycyBhcmUgZm9yYmlkZGVuIGJlZm9yZSB0aGUgZW5kIG9mIHRoZSBjcm93ZGZ1bmQKICAgICovCiAgICBmdW5jdGlvbiBpc1RyYW5zZmVyQWxsb3dlZCgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChub3cgPiBlbmRUaW1lIHx8IGlzUmVsZWFzZWRUb1B1YmxpYyA9PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cn0='.
	

]
