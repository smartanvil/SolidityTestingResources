Class {
	#name : #SRT45F047e524c83339a5701984Fd79E9D98375a5c6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT45F047e524c83339a5701984Fd79E9D98375a5c6 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gQWRkIGEgbnVtYmVyIHRvIGFub3RoZXIgbnVtYmVyLCBjaGVja2luZyBmb3Igb3ZlcmZsb3dzCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSAmJiBjID49IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gU3VidHJhY3QgYSBudW1iZXIgZnJvbSBhbm90aGVyIG51bWJlciwgY2hlY2tpbmcgZm9yIHVuZGVyZmxvd3MKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgkKfQoKY29udHJhY3QgT3duZWQgewoKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIE93bmVkKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRPd25lcihhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgICB9Cn0KCmludGVyZmFjZSB0b2tlbiB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgOwoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKfQoKY29udHJhY3QgQXJ0aXNNYWluIGlzIE93bmVkewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCQoJc3RydWN0IENvbnRyaWJ1dG9yRGF0YXsKCQlib29sIGlzQWN0aXZlOwoJCWJvb2wgaXNUb2tlbkRpc3RyaWJ1dGVkOwoJCXVpbnQgY29udHJpYnV0aW9uQW1vdW50OwkvLyBFVEggY29udHJpYnV0aW9uCgkJdWludCB0b2tlbnNBbW91bnQ7CQkJLy8gRXhjaGFuZ2VkIEFSVElTIGFtb3VudAoJfQoJCgltYXBwaW5nKGFkZHJlc3MgPT4gQ29udHJpYnV0b3JEYXRhKSBwdWJsaWMgY29udHJpYnV0b3JMaXN0OwoJbWFwcGluZyh1aW50ID0+IGFkZHJlc3MpIGNvbnRyaWJ1dG9ySW5kZXhlczsKCXVpbnQgbmV4dENvbnRyaWJ1dG9ySW5kZXg7Cgl1aW50IGNvbnRyaWJ1dG9yQ291bnQ7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwogICAgdWludCBwdWJsaWMgZnVuZGluZ0xpbWl0OwogICAgdWludCBwdWJsaWMgYW1vdW50UmFpc2VkOwoJdWludCBwdWJsaWMgcmVtYWluQW1vdW50OwogICAgdWludCBwdWJsaWMgZGVhZGxpbmU7CiAgICB1aW50IHB1YmxpYyBleGNoYW5nZVRva2VuUmF0ZTsKICAgIHRva2VuIHB1YmxpYyB0b2tlblJld2FyZDsKCXVpbnQyNTYgcHVibGljIHRva2VuQmFsYW5jZTsKICAgIGJvb2wgcHVibGljIGNyb3dkc2FsZUNsb3NlZCA9IGZhbHNlOwogICAgYm9vbCBwdWJsaWMgaXNBUlREaXN0cmlidXRlZCA9IGZhbHNlOwogICAgCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBUcmFuY2hlIDEgSUNPIHN0YXJ0IGRhdGUgYW5kIGVuZCBkYXRlCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFNUQVJUX1RJTUUgPSAxNTE2MDE3NjAwOyAgICAgICAgICAgICAgICAgICAvLzE1IEphbnVhcnkgMjAxOCAxMjowMCBVVEMKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFNFQ09ORF9USUVSX1NBTEVfU1RBUlRfVElNRSA9IDE1MTcyMjcyMDA7ICAvLzI5IEphbnVhcnkgMjAxOCAxMjowMCBVVEMKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRISVJEX1RJRVJfU0FMRV9TVEFSVF9USU1FID0gMTUxODQzNjgwMDsgICAvLzEyIEZlYnJ1YXJ5IDIwMTggMTI6MDAgVVRDCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBGT1VSVEhfVElFUl9TQUxFX1NUQVJUX1RJTUUgPSAxNTE5MDQxNjAwOyAgLy8xOSBGZWJydWFyeSAyMDE4IDEyOjAwIFVUQwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgRU5EX1RJTUUgPSAxNTE5NjQ2NDAwOyAgICAgICAgICAgICAgICAgICAgIC8vMjYgRmVicnVhcnkgMjAxOCAxMjowMCBVVEMKCQoJCiAgICAKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gY3Jvd2RzYWxlIGV4Y2hhbmdlIHJhdGUKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgdWludCBwdWJsaWMgU1RBUlRfUkFURSA9IDMwMDA7ICAgICAgICAgIC8vNTAlIEJvbnVzCiAgICB1aW50IHB1YmxpYyBTRUNPTkRfVElFUl9SQVRFID0gMjYwMDsgICAgLy8zMCUgQm9udXMKICAgIHVpbnQgcHVibGljIFRISVJEX1RJRVJfUkFURSA9IDIyMDA7ICAgICAvLzEwJSBCb251cwogICAgdWludCBwdWJsaWMgRk9VUlRIX1JBVEUgPSAyMDAwOyAgICAgICAgIC8vMCUgQm9udXMKICAgIAoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gRnVuZGluZyBHb2FsCiAgICAvLyAgICAtIEhBUkQgQ0FQIDogNTAwMDAgRVRICiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEZVTkRJTkdfRVRIX0hBUkRfQ0FQID0gNTAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7IAogICAgCiAgICAvLyBBTEMgdG9rZW4gZGVjaW1hbHMKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBBUlRfREVDSU1BTFMgPSA4OwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQVJUX0RFQ0lNQUxTRkFDVE9SID0gMTAqKnVpbnQoQVJUX0RFQ0lNQUxTKTsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgQVJUX0ZPVU5EQVRJT05fQUREUkVTUyA9IDB4NTVCZUExQTAzMzVBOEVhNTY1NzJiOEU2NmYxNzE5NjI5MENhNjQ2NzsKICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEFSVF9DT05UUkFDVF9BRERSRVNTID0gMHgwODJFMTM0OTRmMTJFQkI3MjA2RkJmNjdFMjJBNkUxOTc1QTFBNjY5OwoKICAgIGV2ZW50IEdvYWxSZWFjaGVkKGFkZHJlc3MgcmFpc2luZ0FkZHJlc3MsIHVpbnQgYW1vdW50UmFpc2VkKTsKCWV2ZW50IExpbWl0UmVhY2hlZChhZGRyZXNzIHJhaXNpbmdBZGRyZXNzLCB1aW50IGFtb3VudFJhaXNlZCk7CiAgICBldmVudCBGdW5kVHJhbnNmZXIoYWRkcmVzcyBiYWNrZXIsIHVpbnQgYW1vdW50LCBib29sIGlzQ29udHJpYnV0aW9uKTsKCWV2ZW50IFdpdGhkcmF3RmFpbGVkKGFkZHJlc3MgcmFpc2luZ0FkZHJlc3MsIHVpbnQgYW1vdW50LCBib29sIGlzQ29udHJpYnV0aW9uKTsKCWV2ZW50IEZ1bmRSZXR1cm4oYWRkcmVzcyBiYWNrZXIsIHVpbnQgYW1vdW50LCBib29sIGlzQ29udHJpYnV0aW9uKTsKCiAgICAvKioKICAgICAqIENvbnN0cmN0b3IgZnVuY3Rpb24KICAgICAqCiAgICAgKiBTZXR1cCB0aGUgb3duZXIKICAgICAqLwogICAgZnVuY3Rpb24gQXJ0aXNNYWluKAogICAgKSBwdWJsaWMgewogICAgICAgIGJlbmVmaWNpYXJ5ID0gQVJUX0ZPVU5EQVRJT05fQUREUkVTUzsKICAgICAgICBmdW5kaW5nTGltaXQgPSBGVU5ESU5HX0VUSF9IQVJEX0NBUDsgIAoJICAgIGRlYWRsaW5lID0gRU5EX1RJTUU7ICAvLyAyMDE4LTAxLTEwIDEyOjAwOjAwIFVUQwogICAgICAgIGV4Y2hhbmdlVG9rZW5SYXRlID0gRk9VUlRIX1JBVEUgKiBBUlRfREVDSU1BTFNGQUNUT1I7CiAgICAgICAgdG9rZW5SZXdhcmQgPSB0b2tlbihBUlRfQ09OVFJBQ1RfQUREUkVTUyk7CgkJY29udHJpYnV0b3JDb3VudCA9IDA7CiAgICB9CgogICAgLyoqCiAgICAgKiBGYWxsYmFjayBmdW5jdGlvbgogICAgICoKICAgICAqIFRoZSBmdW5jdGlvbiB3aXRob3V0IG5hbWUgaXMgdGhlIGRlZmF1bHQgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbmV2ZXIgYW55b25lIHNlbmRzIGZ1bmRzIHRvIGEgY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewoJCQogICAgICAgIHJlcXVpcmUoIWNyb3dkc2FsZUNsb3NlZCk7CiAgICAgICAgcmVxdWlyZShub3cgPj0gU1RBUlRfVElNRSAmJiBub3cgPCBFTkRfVElNRSk7CiAgICAgICAgCgkJcHJvY2Vzc1RyYW5zYWN0aW9uKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9CgkKCS8qKgoJICogUHJvY2VzcyB0cmFuc2FjdGlvbgoJICovCglmdW5jdGlvbiBwcm9jZXNzVHJhbnNhY3Rpb24oYWRkcmVzcyBfY29udHJpYnV0b3IsIHVpbnQgX2Ftb3VudCkgaW50ZXJuYWx7CQoJCXVpbnQgY29udHJpYnV0aW9uRXRoQW1vdW50ID0gX2Ftb3VudDsKCQkJCiAgICAgICAgYW1vdW50UmFpc2VkICs9IGNvbnRyaWJ1dGlvbkV0aEFtb3VudDsgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBuZXdseSByZWNlaXZlZCBFVEgKCQlyZW1haW5BbW91bnQgKz0gY29udHJpYnV0aW9uRXRoQW1vdW50OwogICAgICAgIAoJCS8vIGNhbGN1YWx0ZSBleGNoYW5nZWQgdG9rZW4gYmFzZWQgb24gZXhjaGFuZ2UgcmF0ZQogICAgICAgIGlmIChub3cgPj0gU1RBUlRfVElNRSAmJiBub3cgPCBTRUNPTkRfVElFUl9TQUxFX1NUQVJUX1RJTUUpewoJCQlleGNoYW5nZVRva2VuUmF0ZSA9IFNUQVJUX1JBVEUgKiBBUlRfREVDSU1BTFNGQUNUT1I7CiAgICAgICAgfQogICAgICAgIGlmIChub3cgPj0gU0VDT05EX1RJRVJfU0FMRV9TVEFSVF9USU1FICYmIG5vdyA8IFRISVJEX1RJRVJfU0FMRV9TVEFSVF9USU1FKXsKICAgICAgICAgICAgZXhjaGFuZ2VUb2tlblJhdGUgPSBTRUNPTkRfVElFUl9SQVRFICogQVJUX0RFQ0lNQUxTRkFDVE9SOwogICAgICAgIH0KICAgICAgICBpZiAobm93ID49IFRISVJEX1RJRVJfU0FMRV9TVEFSVF9USU1FICYmIG5vdyA8IEZPVVJUSF9USUVSX1NBTEVfU1RBUlRfVElNRSl7CiAgICAgICAgICAgIGV4Y2hhbmdlVG9rZW5SYXRlID0gVEhJUkRfVElFUl9SQVRFICogQVJUX0RFQ0lNQUxTRkFDVE9SOwogICAgICAgIH0KICAgICAgICBpZiAobm93ID49IEZPVVJUSF9USUVSX1NBTEVfU1RBUlRfVElNRSAmJiBub3cgPCBFTkRfVElNRSl7CiAgICAgICAgICAgIGV4Y2hhbmdlVG9rZW5SYXRlID0gRk9VUlRIX1JBVEUgKiBBUlRfREVDSU1BTFNGQUNUT1I7CiAgICAgICAgfQogICAgICAgIHVpbnQgYW1vdW50QXJ0VG9rZW4gPSBfYW1vdW50ICogZXhjaGFuZ2VUb2tlblJhdGUgLyAxIGV0aGVyOwoJCQoJCWlmIChjb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS5pc0FjdGl2ZSA9PSBmYWxzZSl7ICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY29udHJpYnV0b3IgaGFzIGFscmVhZHkgY29udHJpYnV0ZWQKCQkJY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0uaXNBY3RpdmUgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgaGlzIGFjdGl2aXR5IHRvIHRydWUKCQkJY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0uY29udHJpYnV0aW9uQW1vdW50ID0gY29udHJpYnV0aW9uRXRoQW1vdW50OyAgICAvLyBTZXQgaGlzIGNvbnRyaWJ1dGlvbgoJCQljb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS50b2tlbnNBbW91bnQgPSBhbW91bnRBcnRUb2tlbjsKCQkJY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0uaXNUb2tlbkRpc3RyaWJ1dGVkID0gZmFsc2U7CgkJCWNvbnRyaWJ1dG9ySW5kZXhlc1tuZXh0Q29udHJpYnV0b3JJbmRleF0gPSBfY29udHJpYnV0b3I7ICAgICAgICAgICAgICAgICAgLy8gU2V0IGNvbnRyaWJ1dG9ycyBpbmRleAoJCQluZXh0Q29udHJpYnV0b3JJbmRleCsrOwoJCQljb250cmlidXRvckNvdW50Kys7CgkJfQoJCWVsc2V7CgkJCWNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudCArPSBjb250cmlidXRpb25FdGhBbW91bnQ7ICAgLy8gQWRkIGNvbnRyaWJ1dGlvbiBhbW91bnQgdG8gZXhpc3RpbmcgY29udHJpYnV0b3IKCQkJY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0udG9rZW5zQW1vdW50ICs9IGFtb3VudEFydFRva2VuOyAgICAgICAgICAgICAvLyBsb2cgdG9rZW4gYW1vdW50YAoJCX0KCQkKICAgICAgICBGdW5kVHJhbnNmZXIobXNnLnNlbmRlciwgY29udHJpYnV0aW9uRXRoQW1vdW50LCB0cnVlKTsKCQkKCQlpZiAoYW1vdW50UmFpc2VkID49IGZ1bmRpbmdMaW1pdCl7CgkJCS8vIGNsb3NlIGNyb3dkc2FsZSBiZWNhdXNlIHRoZSBjcm93ZHNhbGUgbGltaXQgaXMgcmVhY2hlZAoJCQljcm93ZHNhbGVDbG9zZWQgPSB0cnVlOwoJCX0JCQoJCQoJfQoKICAgIG1vZGlmaWVyIGFmdGVyRGVhZGxpbmUoKSB7IGlmIChub3cgPj0gZGVhZGxpbmUpIF87IH0JCgltb2RpZmllciBhZnRlckNyb3dkc2FsZUNsb3NlZCgpIHsgaWYgKGNyb3dkc2FsZUNsb3NlZCA9PSB0cnVlIHx8IG5vdyA+PSBkZWFkbGluZSkgXzsgfQoJCgkKCS8qKgogICAgICogY2xvc2UgQ3Jvd2RzYWxlCiAgICAgKgogICAgICovCglmdW5jdGlvbiBjbG9zZUNyb3dkU2FsZSgpIHB1YmxpYyB7CgkJcmVxdWlyZShiZW5lZmljaWFyeSA9PSBtc2cuc2VuZGVyKTsKCQlpZiAoIGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpIHsKCQkJY3Jvd2RzYWxlQ2xvc2VkID0gdHJ1ZTsKCQl9Cgl9CgkKICAgIC8qKgogICAgICogQ2hlY2sgdG9rZW4gYmFsYW5jZQogICAgICoKICAgICAqLwoJZnVuY3Rpb24gY2hlY2tUb2tlbkJhbGFuY2UoKSBwdWJsaWMgewoJCWlmICggYmVuZWZpY2lhcnkgPT0gbXNnLnNlbmRlcikgewoJCQkvL2NoZWNrIGN1cnJlbnQgdG9rZW4gYmFsYW5jZQoJCQl0b2tlbkJhbGFuY2UgPSB0b2tlblJld2FyZC5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7CgkJfQoJfQoJCiAgICAvKioKICAgICAqIFdpdGhkcmF3IHRoZSBhbGwgZnVuZHMKICAgICAqCiAgICAgKiBDaGVja3MgdG8gc2VlIGlmIGdvYWwgb3IgdGltZSBsaW1pdCBoYXMgYmVlbiByZWFjaGVkLCBhbmQgaWYgc28sIGFuZCB0aGUgZnVuZGluZyBnb2FsIHdhcyByZWFjaGVkLAogICAgICogc2VuZHMgdGhlIGVudGlyZSBhbW91bnQgdG8gdGhlIGJlbmVmaWNpYXJ5LiAKICAgICAqLwogICAgZnVuY3Rpb24gc2FmZVdpdGhkcmF3YWxBbGwoKSBwdWJsaWMgewogICAgICAgIGlmICggYmVuZWZpY2lhcnkgPT0gbXNnLnNlbmRlcikgewogICAgICAgICAgICBpZiAoYmVuZWZpY2lhcnkuc2VuZChhbW91bnRSYWlzZWQpKSB7CiAgICAgICAgICAgICAgICBGdW5kVHJhbnNmZXIoYmVuZWZpY2lhcnksIGFtb3VudFJhaXNlZCwgZmFsc2UpOwoJCQkJcmVtYWluQW1vdW50ID0gcmVtYWluQW1vdW50IC0gYW1vdW50UmFpc2VkOwogICAgICAgICAgICB9IGVsc2UgewoJCQkJV2l0aGRyYXdGYWlsZWQoYmVuZWZpY2lhcnksIGFtb3VudFJhaXNlZCwgZmFsc2UpOwoJCQkJLy9JZiB3ZSBmYWlsIHRvIHNlbmQgdGhlIGZ1bmRzIHRvIGJlbmVmaWNpYXJ5CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgkKCS8qKgogICAgICogV2l0aGRyYXcgdGhlIGZ1bmRzCiAgICAgKgogICAgICogQ2hlY2tzIHRvIHNlZSBpZiBnb2FsIG9yIHRpbWUgbGltaXQgaGFzIGJlZW4gcmVhY2hlZCwgYW5kIGlmIHNvLCBhbmQgdGhlIGZ1bmRpbmcgZ29hbCB3YXMgcmVhY2hlZCwKICAgICAqIHNlbmRzIHRoZSBlbnRpcmUgYW1vdW50IHRvIHRoZSBiZW5lZmljaWFyeS4gCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNhZmVXaXRoZHJhd2FsQW1vdW50KHVpbnQyNTYgd2l0aGRyYXdBbW91bnQpIHB1YmxpYyB7CiAgICAgICAgaWYgKGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpIHsKICAgICAgICAgICAgaWYgKGJlbmVmaWNpYXJ5LnNlbmQod2l0aGRyYXdBbW91bnQpKSB7CiAgICAgICAgICAgICAgICBGdW5kVHJhbnNmZXIoYmVuZWZpY2lhcnksIHdpdGhkcmF3QW1vdW50LCBmYWxzZSk7CgkJCQlyZW1haW5BbW91bnQgPSByZW1haW5BbW91bnQgLSB3aXRoZHJhd0Ftb3VudDsKICAgICAgICAgICAgfSBlbHNlIHsKCQkJCVdpdGhkcmF3RmFpbGVkKGJlbmVmaWNpYXJ5LCB3aXRoZHJhd0Ftb3VudCwgZmFsc2UpOwoJCQkJLy9JZiB3ZSBmYWlsIHRvIHNlbmQgdGhlIGZ1bmRzIHRvIGJlbmVmaWNpYXJ5CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgkKCS8qKgoJICogV2l0aGRyYXcgQVJUIAogICAgICogCgkgKiBJZiB0aGVyZSBhcmUgc29tZSByZW1haW5pbmcgQVJUIGluIHRoZSBjb250cmFjdCAKCSAqIGFmdGVyIGFsbCB0b2tlbiBhcmUgZGlzdHJpYnV0ZWQgdGhlIGNvbnRyaWJ1dG9yLAoJICogdGhlIGJlbmVmaWNpYXJ5IGNhbiB3aXRoZHJhdyB0aGUgQVJUIGluIHRoZSBjb250cmFjdAogICAgICoKICAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXdBUlQodWludDI1NiB0b2tlbkFtb3VudCkgcHVibGljIGFmdGVyQ3Jvd2RzYWxlQ2xvc2VkIHsKCQlyZXF1aXJlKGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpOwogICAgICAgIGlmIChpc0FSVERpc3RyaWJ1dGVkICYmIGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpIHsKICAgICAgICAgICAgdG9rZW5SZXdhcmQudHJhbnNmZXIoYmVuZWZpY2lhcnksIHRva2VuQW1vdW50KTsKCQkJLy8gdXBkYXRlIHRva2VuIGJhbGFuY2UKCQkJdG9rZW5CYWxhbmNlID0gdG9rZW5SZXdhcmQuYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOwogICAgICAgIH0KICAgIH0KCQoKCS8qKgogICAgICogRGlzdHJpYnV0ZSB0b2tlbgogICAgICoKICAgICAqIENoZWNrcyB0byBzZWUgaWYgZ29hbCBvciB0aW1lIGxpbWl0IGhhcyBiZWVuIHJlYWNoZWQsIGFuZCBpZiBzbywgYW5kIHRoZSBmdW5kaW5nIGdvYWwgd2FzIHJlYWNoZWQsCiAgICAgKiBkaXN0cmlidXRlIHRva2VuIHRvIGNvbnRyaWJ1dG9yLiAKICAgICAqLwoJZnVuY3Rpb24gZGlzdHJpYnV0ZUFSVFRva2VuKCkgcHVibGljIHsKCQlpZiAoYmVuZWZpY2lhcnkgPT0gbXNnLnNlbmRlcikgeyAgLy8gb25seSBBUlRfRk9VTkRBVElPTl9BRERSRVNTIGNhbiBkaXN0cmlidXRlIHRoZSBBUlQKCQkJYWRkcmVzcyBjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzOwoJCQlmb3IgKHVpbnQgaW5kZXggPSAwOyBpbmRleCA8IGNvbnRyaWJ1dG9yQ291bnQ7IGluZGV4KyspewoJCQkJY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcyA9IGNvbnRyaWJ1dG9ySW5kZXhlc1tpbmRleF07IAoJCQkJCgkJCQl1aW50IGFtb3VudEFydFRva2VuID0gY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLnRva2Vuc0Ftb3VudDsKCQkJCWlmIChmYWxzZSA9PSBjb250cmlidXRvckxpc3RbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10uaXNUb2tlbkRpc3RyaWJ1dGVkKXsKCQkJCQlib29sIGlzU3VjY2VzcyA9IHRva2VuUmV3YXJkLnRyYW5zZmVyKGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MsIGFtb3VudEFydFRva2VuKTsKCQkJCQlpZiAoaXNTdWNjZXNzKXsKCQkJCQkJY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLmlzVG9rZW5EaXN0cmlidXRlZCA9IHRydWU7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCQoJCQkvLyBjaGVjayBpZiBhbGwgQVJUIGFyZSBkaXN0cmlidXRlZAoJCQljaGVja0lmQWxsQVJURGlzdHJpYnV0ZWQoKTsKCQkJLy8gZ2V0IGxhdGVzdCB0b2tlbiBiYWxhbmNlCgkJCXRva2VuQmFsYW5jZSA9IHRva2VuUmV3YXJkLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKCQl9Cgl9CgkKCS8qKgogICAgICogRGlzdHJpYnV0ZSB0b2tlbiBieSBiYXRjaAogICAgICoKICAgICAqIENoZWNrcyB0byBzZWUgaWYgZ29hbCBvciB0aW1lIGxpbWl0IGhhcyBiZWVuIHJlYWNoZWQsIGFuZCBpZiBzbywgYW5kIHRoZSBmdW5kaW5nIGdvYWwgd2FzIHJlYWNoZWQsCiAgICAgKiBkaXN0cmlidXRlIHRva2VuIHRvIGNvbnRyaWJ1dG9yLiAKICAgICAqLwoJZnVuY3Rpb24gZGlzdHJpYnV0ZUFSVFRva2VuQmF0Y2godWludCBiYXRjaFVzZXJDb3VudCkgcHVibGljIHsKCQlpZiAoYmVuZWZpY2lhcnkgPT0gbXNnLnNlbmRlcikgeyAgLy8gb25seSBBUlRfRk9VTkRBVElPTl9BRERSRVNTIGNhbiBkaXN0cmlidXRlIHRoZSBBUlQKCQkJYWRkcmVzcyBjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzOwoJCQl1aW50IHRyYW5zZmVyZWRVc2VyQ291bnQgPSAwOwoJCQlmb3IgKHVpbnQgaW5kZXggPSAwOyBpbmRleCA8IGNvbnRyaWJ1dG9yQ291bnQgJiYgdHJhbnNmZXJlZFVzZXJDb3VudDxiYXRjaFVzZXJDb3VudDsgaW5kZXgrKyl7CgkJCQljdXJyZW50UGFydGljaXBhbnRBZGRyZXNzID0gY29udHJpYnV0b3JJbmRleGVzW2luZGV4XTsgCgkJCQkKCQkJCXVpbnQgYW1vdW50QXJ0VG9rZW4gPSBjb250cmlidXRvckxpc3RbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10udG9rZW5zQW1vdW50OwoJCQkJaWYgKGZhbHNlID09IGNvbnRyaWJ1dG9yTGlzdFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXS5pc1Rva2VuRGlzdHJpYnV0ZWQpewoJCQkJCWJvb2wgaXNTdWNjZXNzID0gdG9rZW5SZXdhcmQudHJhbnNmZXIoY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcywgYW1vdW50QXJ0VG9rZW4pOwoJCQkJCXRyYW5zZmVyZWRVc2VyQ291bnQgPSB0cmFuc2ZlcmVkVXNlckNvdW50ICsgMTsKCQkJCQlpZiAoaXNTdWNjZXNzKXsKCQkJCQkJY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLmlzVG9rZW5EaXN0cmlidXRlZCA9IHRydWU7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCQoJCQkvLyBjaGVjayBpZiBhbGwgQVJUIGFyZSBkaXN0cmlidXRlZAoJCQljaGVja0lmQWxsQVJURGlzdHJpYnV0ZWQoKTsKCQkJLy8gZ2V0IGxhdGVzdCB0b2tlbiBiYWxhbmNlCgkJCXRva2VuQmFsYW5jZSA9IHRva2VuUmV3YXJkLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKCQl9Cgl9CgkKCS8qKgoJICogQ2hlY2sgaWYgYWxsIGNvbnRyaWJ1dG9yJ3MgdG9rZW4gYXJlIHN1Y2Nlc3NmdWxseSBkaXN0cmlidXRlZAoJICovCglmdW5jdGlvbiBjaGVja0lmQWxsQVJURGlzdHJpYnV0ZWQoKSBwdWJsaWMgewoJICAgIGFkZHJlc3MgY3VycmVudFBhcnRpY2lwYW50QWRkcmVzczsKCQlpc0FSVERpc3RyaWJ1dGVkID0gdHJ1ZTsKCQlmb3IgKHVpbnQgaW5kZXggPSAwOyBpbmRleCA8IGNvbnRyaWJ1dG9yQ291bnQ7IGluZGV4KyspewoJCQkJY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcyA9IGNvbnRyaWJ1dG9ySW5kZXhlc1tpbmRleF07IAoJCQkJCgkJCWlmIChmYWxzZSA9PSBjb250cmlidXRvckxpc3RbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10uaXNUb2tlbkRpc3RyaWJ1dGVkKXsKCQkJCWlzQVJURGlzdHJpYnV0ZWQgPSBmYWxzZTsKCQkJCWJyZWFrOwoJCQl9CgkJfQoJfQoJCn0='.
	

]
