Class {
	#name : #SRT95bE22039DA3114d17A38b9E7CD9b3576dE83924,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT95bE22039DA3114d17A38b9E7CD9b3576dE83924 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgICAKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKCi8qKgogKiBAdGl0bGUgUGF1c2FibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgogKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CiAgICAKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9CiAgCn0KCgovKioKICogQHRpdGxlIEhlbHBzIGNvbnRyYWN0cyBndWFyZCBhZ2FpbnMgcmVlbnRyYW5jeSBhdHRhY2tzLgogKiBAYXV0aG9yIFJlbWNvIEJsb2VtZW4gPDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iNjQxNjAxMDkwNzBiMjQ1NiI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj7PgC5jb20+CiAqIEBub3RpY2UgSWYgeW91IG1hcmsgYSBmdW5jdGlvbiBgbm9uUmVlbnRyYW50YCwgeW91IHNob3VsZCBhbHNvCiAqIG1hcmsgaXQgYGV4dGVybmFsYC4KICovCmNvbnRyYWN0IFJlZW50cmFuY3lHdWFyZCB7CgogIC8qKgogICAqIEBkZXYgV2UgdXNlIGEgc2luZ2xlIGxvY2sgZm9yIHRoZSB3aG9sZSBjb250cmFjdC4KICAgKi8KICBib29sIHByaXZhdGUgcmVlbnRyYW5jeV9sb2NrID0gZmFsc2U7CgogIC8qKgogICAqIEBkZXYgUHJldmVudHMgYSBjb250cmFjdCBmcm9tIGNhbGxpbmcgaXRzZWxmLCBkaXJlY3RseSBvciBpbmRpcmVjdGx5LgogICAqIEBub3RpY2UgSWYgeW91IG1hcmsgYSBmdW5jdGlvbiBgbm9uUmVlbnRyYW50YCwgeW91IHNob3VsZCBhbHNvCiAgICogbWFyayBpdCBgZXh0ZXJuYWxgLiBDYWxsaW5nIG9uZSBub25SZWVudHJhbnQgZnVuY3Rpb24gZnJvbQogICAqIGFub3RoZXIgaXMgbm90IHN1cHBvcnRlZC4gSW5zdGVhZCwgeW91IGNhbiBpbXBsZW1lbnQgYQogICAqIGBwcml2YXRlYCBmdW5jdGlvbiBkb2luZyB0aGUgYWN0dWFsIHdvcmssIGFuZCBhIGBleHRlcm5hbGAKICAgKiB3cmFwcGVyIG1hcmtlZCBhcyBgbm9uUmVlbnRyYW50YC4KICAgKi8KICBtb2RpZmllciBub25SZWVudHJhbnQoKSB7CiAgICByZXF1aXJlKCFyZWVudHJhbmN5X2xvY2spOwogICAgcmVlbnRyYW5jeV9sb2NrID0gdHJ1ZTsKICAgIF87CiAgICByZWVudHJhbmN5X2xvY2sgPSBmYWxzZTsKICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBEZXN0cnVjdGlibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHRoYXQgY2FuIGJlIGRlc3Ryb3llZCBieSBvd25lci4gQWxsIGZ1bmRzIGluIGNvbnRyYWN0IHdpbGwgYmUgc2VudCB0byB0aGUgb3duZXIuCiAqLwpjb250cmFjdCBEZXN0cnVjdGlibGUgaXMgT3duYWJsZSB7CgogIGZ1bmN0aW9uIERlc3RydWN0aWJsZSgpIHB1YmxpYyBwYXlhYmxlIHsgfQoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVycyB0aGUgY3VycmVudCBiYWxhbmNlIHRvIHRoZSBvd25lciBhbmQgdGVybWluYXRlcyB0aGUgY29udHJhY3QuCiAgICovCiAgZnVuY3Rpb24gZGVzdHJveSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICB9CgogIGZ1bmN0aW9uIGRlc3Ryb3lBbmRTZW5kKGFkZHJlc3MgX3JlY2lwaWVudCkgb25seU93bmVyIHB1YmxpYyB7CiAgICBzZWxmZGVzdHJ1Y3QoX3JlY2lwaWVudCk7CiAgfQogIAp9CgoKLy8vIEBkZXYgSW50ZXJmYWNlIHRvIHRoZSBDb3JlIENvbnRyYWN0IG9mIEV0aGVyIER1bmdlb24uCmNvbnRyYWN0IEVEQ29yZUludGVyZmFjZSB7CgogICAgLy8vIEBkZXYgVGhlIGV4dGVybmFsIGZ1bmN0aW9uIHRvIGdldCBhbGwgdGhlIGdhbWUgc2V0dGluZ3MgaW4gb25lIGNhbGwuCiAgICBmdW5jdGlvbiBnZXRHYW1lU2V0dGluZ3MoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKAogICAgICAgIHVpbnQgX3JlY3J1aXRIZXJvRmVlLAogICAgICAgIHVpbnQgX3RyYW5zcG9ydGF0aW9uRmVlTXVsdGlwbGllciwKICAgICAgICB1aW50IF9ub3ZpY2VEdW5nZW9uSWQsCiAgICAgICAgdWludCBfY29uc29sYXRpb25SZXdhcmRzUmVxdWlyZWRGYWl0aCwKICAgICAgICB1aW50IF9jaGFsbGVuZ2VGZWVNdWx0aXBsaWVyLAogICAgICAgIHVpbnQgX2R1bmdlb25QcmVwYXJhdGlvblRpbWUsCiAgICAgICAgdWludCBfdHJhaW5pbmdGZWVNdWx0aXBsaWVyLAogICAgICAgIHVpbnQgX2VxdWlwbWVudFRyYWluaW5nRmVlTXVsdGlwbGllciwKICAgICAgICB1aW50IF9wcmVwYXJhdGlvblBlcmlvZFRyYWluaW5nRmVlTXVsdGlwbGllciwKICAgICAgICB1aW50IF9wcmVwYXJhdGlvblBlcmlvZEVxdWlwbWVudFRyYWluaW5nRmVlTXVsdGlwbGllcgogICAgKTsKICAgIAogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBleHRlcm5hbCBmdW5jdGlvbiB0byBnZXQgYWxsIHRoZSByZWxldmFudCBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIHBsYXllciBieSBpdHMgYWRkcmVzcy4KICAgICAqIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyBvZiB0aGUgcGxheWVyLgogICAgICovCiAgICBmdW5jdGlvbiBnZXRQbGF5ZXJEZXRhaWxzKGFkZHJlc3MgX2FkZHJlc3MpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoCiAgICAgICAgdWludCBkdW5nZW9uSWQsIAogICAgICAgIHVpbnQgcGF5bWVudCwgCiAgICAgICAgdWludCBkdW5nZW9uQ291bnQsIAogICAgICAgIHVpbnQgaGVyb0NvdW50LCAKICAgICAgICB1aW50IGZhaXRoLAogICAgICAgIGJvb2wgZmlyc3RIZXJvUmVjcnVpdGVkCiAgICApOwogICAgCiAgICAvKioKICAgICAqIEBkZXYgVGhlIGV4dGVybmFsIGZ1bmN0aW9uIHRvIGdldCBhbGwgdGhlIHJlbGV2YW50IGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgZHVuZ2VvbiBieSBpdHMgSUQuCiAgICAgKiBAcGFyYW0gX2lkIFRoZSBJRCBvZiB0aGUgZHVuZ2Vvbi4KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0RHVuZ2VvbkRldGFpbHModWludCBfaWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoCiAgICAgICAgdWludCBjcmVhdGlvblRpbWUsIAogICAgICAgIHVpbnQgc3RhdHVzLCAKICAgICAgICB1aW50IGRpZmZpY3VsdHksIAogICAgICAgIHVpbnQgY2FwYWNpdHksIAogICAgICAgIGFkZHJlc3Mgb3duZXIsIAogICAgICAgIGJvb2wgaXNSZWFkeSwgCiAgICAgICAgdWludCBwbGF5ZXJDb3VudAogICAgKTsKICAgIAogICAgLyoqCiAgICAgKiBAZGV2IFNwbGl0IGZsb29yIHJlbGF0ZWQgZGV0YWlscyBvdXQgb2YgZ2V0RHVuZ2VvbkRldGFpbHMsIGp1c3QgdG8gYXZvaWQgU3RhY2sgVG9vIERlZXAgZXJyb3IuCiAgICAgKiBAcGFyYW0gX2lkIFRoZSBJRCBvZiB0aGUgZHVuZ2Vvbi4KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0RHVuZ2VvbkZsb29yRGV0YWlscyh1aW50IF9pZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICgKICAgICAgICB1aW50IGZsb29yTnVtYmVyLCAKICAgICAgICB1aW50IGZsb29yQ3JlYXRpb25UaW1lLCAKICAgICAgICB1aW50IHJld2FyZHMsIAogICAgICAgIHVpbnQgc2VlZEdlbmVzLCAKICAgICAgICB1aW50IGZsb29yR2VuZXMKICAgICk7CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBleHRlcm5hbCBmdW5jdGlvbiB0byBnZXQgYWxsIHRoZSByZWxldmFudCBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIGhlcm8gYnkgaXRzIElELgogICAgICogQHBhcmFtIF9pZCBUaGUgSUQgb2YgdGhlIGhlcm8uCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldEhlcm9EZXRhaWxzKHVpbnQgX2lkKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKAogICAgICAgIHVpbnQgY3JlYXRpb25UaW1lLCAKICAgICAgICB1aW50IGNvb2xkb3duU3RhcnRUaW1lLCAKICAgICAgICB1aW50IGNvb2xkb3duSW5kZXgsIAogICAgICAgIHVpbnQgZ2VuZXMsIAogICAgICAgIGFkZHJlc3Mgb3duZXIsIAogICAgICAgIGJvb2wgaXNSZWFkeSwgCiAgICAgICAgdWludCBjb29sZG93blJlbWFpbmluZ1RpbWUKICAgICk7CgogICAgLy8vIEBkZXYgR2V0IHRoZSBhdHRyaWJ1dGVzIChlcXVpcG1lbnRzICsgc3RhdHMpIG9mIGEgaGVybyBmcm9tIGl0cyBnZW5lLgogICAgZnVuY3Rpb24gZ2V0SGVyb0F0dHJpYnV0ZXModWludCBfZ2VuZXMpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnRbXSk7CiAgICAKICAgIC8vLyBAZGV2IENhbGN1bGF0ZSB0aGUgcG93ZXIgb2YgYSBoZXJvIGZyb20gaXRzIGdlbmUsIGl0IGNhbGN1bGF0ZXMgdGhlIGVxdWlwbWVudCBwb3dlciwgc3RhdHMgcG93ZXIsIGFuZCBzdXBlciBoZXJvIGJvb3N0LgogICAgZnVuY3Rpb24gZ2V0SGVyb1Bvd2VyKHVpbnQgX2dlbmVzLCB1aW50IF9kdW5nZW9uRGlmZmljdWx0eSkgcHVibGljIHB1cmUgcmV0dXJucyAoCiAgICAgICAgdWludCB0b3RhbFBvd2VyLCAKICAgICAgICB1aW50IGVxdWlwbWVudFBvd2VyLCAKICAgICAgICB1aW50IHN0YXRzUG93ZXIsIAogICAgICAgIGJvb2wgaXNTdXBlciwgCiAgICAgICAgdWludCBzdXBlclJhbmssCiAgICAgICAgdWludCBzdXBlckJvb3N0CiAgICApOwogICAgCiAgICAvLy8gQGRldiBDYWxjdWxhdGUgdGhlIHBvd2VyIG9mIGEgZHVuZ2VvbiBmbG9vci4KICAgIGZ1bmN0aW9uIGdldER1bmdlb25Qb3dlcih1aW50IF9nZW5lcykgcHVibGljIHB1cmUgcmV0dXJucyAodWludCk7CiAgICAKICAgIC8qKgogICAgICogQGRldiBDYWxjdWxhdGUgdGhlIHN1bSBvZiB0b3AgNSBoZXJvZXMgcG93ZXIgYSBwbGF5ZXIgb3ducy4KICAgICAqICBUaGUgZ2FzIHVzYWdlIGluY3JlYXNlZCB3aXRoIHRoZSBudW1iZXIgb2YgaGVyb2VzIGEgcGxheWVyIG93bmVkLCByb3VnaGx5IDUwMCB4IGhlcm8gY291bnQuCiAgICAgKiAgVGhpcyBpcyB1c2VkIGluIHRyYW5zcG9ydCBmdW5jdGlvbiBvbmx5IHRvIGNhbGN1bGF0ZSB0aGUgcmVxdWlyZWQgdHJhbnBvcnQgZmVlLgogICAgICovCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVUb3A1SGVyb2VzUG93ZXIoYWRkcmVzcyBfYWRkcmVzcywgdWludCBfZHVuZ2VvbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KTsKICAgIAp9CgoKLy8vIEBkZXYgQ29yZSBDb250cmFjdCBvZiAiRW50ZXIgdGhlIENvbGlzZXVtIiBnYW1lIG9mIHRoZSBFRCAoRXRoZXIgRHVuZ2VvbikgUGxhdGZvcm0uCmNvbnRyYWN0IEVEQ29saXNldW1BbHBoYSBpcyBQYXVzYWJsZSwgUmVlbnRyYW5jeUd1YXJkLCBEZXN0cnVjdGlibGUgewogICAgCiAgICBzdHJ1Y3QgUGFydGljaXBhbnQgewogICAgICAgIGFkZHJlc3MgcGxheWVyOwogICAgICAgIHVpbnQgaGVyb0lkOwogICAgICAgIHVpbnQgaGVyb1Bvd2VyOwogICAgfQogICAgCiAgICAvLy8gQGRldiBUaGUgYWRkcmVzcyBvZiB0aGUgRXRoZXJEdW5nZW9uQ29yZSBjb250cmFjdC4KICAgIEVEQ29yZUludGVyZmFjZSBwdWJsaWMgZWRDb3JlQ29udHJhY3QgPSBFRENvcmVJbnRlcmZhY2UoMHhmN2VENTZjMUFDNGQwMzhlMzY3YTk4NzI1OGI4NkZDODgzYjk2MGExKTsKICAgIAogICAgLy8vIEBkZXYgU2VlZCBmb3IgdGhlIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yIHVzZWQgZm9yIGNhbGN1bGF0aW5nIGZpZ2h0aW5nIHJlc3VsdC4KICAgIHVpbnQgX3NlZWQ7CiAgICAKICAgIAogICAgLyogPT09PT09PT0gU0VUVElOR1MgPT09PT09PT0gKi8KCiAgICAvLy8gQGRldiBUaGUgcmVxdWlyZWQgd2luIGNvdW50IHRvIHdpbiBhIGphY2twb3QuCiAgICB1aW50IHB1YmxpYyBqYWNrcG90V2luQ291bnQgPSAzOwogICAgCiAgICAvLy8gQGRldiBUaGUgcGVyY2VudGFnZSBvZiBqYWNrcG90IGEgcGxheWVyIGdldCB3aGVuIHJlYWNoaW5nIHRoZSBqYWNrcG90V2luQ291bnQuCiAgICB1aW50IHB1YmxpYyBqYWNrcG90V2luUGVyY2VudCA9IDUwOwogICAgCiAgICAvLy8gQGRldiBUaGUgcGVyY2VudGFnZSBvZiByZXdhcmRzIGEgcGxheWVyIGdldCB3aGVuIGJlaW5nIHRoZSBmaW5hbCB3aW5uZXIgb2YgYSB0b3VybmFtZW50LgogICAgdWludCBwdWJsaWMgd2luUGVyY2VudCA9IDU1OwogICAgCiAgICAvLy8gQGRldiBUaGUgcGVyY2VudGFnZSBvZiByZXdhcmRzIGEgcGxheWVyIGdldCB3aGVuIGJlaW5nIHRoZSBmaW5hbCBsb3NlciBvZiBhIHRvdXJuYW1lbnQsIHJlbWFpbmluZyB3aWxsIGFkZCB0byB0b3VybmFtZW50SmFja3BvdC4KICAgIHVpbnQgcHVibGljIGxvc2VQZXJjZW50ID0gMzU7CiAgICAKICAgIC8vLyBAZGV2IER1bmdlb24gZGlmZmljdWx0eSB0byBiZSB1c2VkIHdoZW4gY2FsY3VsYXRpbmcgc3VwZXIgaGVybyBwb3dlciBib29zdCwgMSBpcyBubyBib29zdC4KICAgIHVpbnQgcHVibGljIGR1bmdlb25EaWZmaWN1bHR5ID0gMTsKCiAgICAvLy8gQGRldiBUaGUgcmVxdWlyZWQgZmVlIHRvIGpvaW4gYSBwYXJ0aWNpcGFudAogICAgdWludCBwdWJsaWMgcGFydGljaXBhdGlvbkZlZSA9IDAuMDIgZXRoZXI7CiAgICAKICAgIC8vLyBAZGV2IFRoZSBtYXhpbXVtIG51bWJlciBvZiBwYXJ0aWNpcGFudHMgZm9yIGEgdG91cm5hbWVudC4KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IG1heFBhcnRpY2lwYW50Q291bnQgPSA4OwogICAgCiAgICAKICAgIC8qID09PT09PT09IFNUQVRFIFZBUklBQkxFUyA9PT09PT09PSAqLwogICAgCiAgICAvLy8gQGRldiBUaGUgbmV4dCB0b3VybmFtZW50cyByb3VuZCBudW1iZXIuCiAgICB1aW50IHB1YmxpYyBuZXh0VG91cm5hbWVudFJvdW5kID0gMTsKCiAgICAvLy8gQGRldiBUaGUgY3VycmVudCBhY2N1bXVsYXRlZCByZXdhcmRzIHBvb2wuCiAgICB1aW50IHB1YmxpYyB0b3VybmFtZW50UmV3YXJkczsKCiAgICAvLy8gQGRldiBUaGUgY3VycmVudCBhY2N1bXVsYXRlZCBqYWNrcG90LgogICAgdWludCBwdWJsaWMgdG91cm5hbWVudEphY2twb3QgPSAwLjIgZXRoZXI7CiAgICAKICAgIC8vLyBAZGV2IEFycmF5IG9mIGFsbCB0aGUgcGFydGljaXBhbnQgZm9yIG5leHQgdG91cm5hbWVudC4KICAgIFBhcnRpY2lwYW50W10gcHVibGljIHBhcnRpY2lwYW50czsKICAgIAogICAgLy8vIEBkZXYgQXJyYXkgb2YgYWxsIHRoZSBwYXJ0aWNpcGFudCBmb3IgdGhlIHByZXZpb3VzIHRvdXJuYW1lbnQuCiAgICBQYXJ0aWNpcGFudFtdIHB1YmxpYyBwcmV2aW91c1BhcnRpY2lwYW50czsKICAgIAogICAgLy8vIEBkZXYgQXJyYXkgdG8gc3RvcmUgdGhlIHBhcnRpY2lwYW50IGluZGV4IGFsbCB3aW5uZXJzIC8gbG9zZXJzIGZvciBlYWNoICJmaWdodGluZyByb3VuZCIgb2YgdGhlIHByZXZpb3VzIHRvdXJuYW1lbnQuCiAgICB1aW50W21heFBhcnRpY2lwYW50Q291bnQgLyAyXSBwdWJsaWMgZmlyc3RSb3VuZFdpbm5lcnM7CiAgICB1aW50W21heFBhcnRpY2lwYW50Q291bnQgLyA0XSBwdWJsaWMgc2Vjb25kUm91bmRXaW5uZXJzOwogICAgdWludFttYXhQYXJ0aWNpcGFudENvdW50IC8gMl0gcHVibGljIGZpcnN0Um91bmRMb3NlcnM7CiAgICB1aW50W21heFBhcnRpY2lwYW50Q291bnQgLyA0XSBwdWJsaWMgc2Vjb25kUm91bmRMb3NlcnM7CiAgICB1aW50IHB1YmxpYyBmaW5hbFdpbm5lcjsKICAgIHVpbnQgcHVibGljIGZpbmFsTG9zZXI7CiAgICAKICAgIC8vLyBAZGV2IE1hcHBpbmcgb2YgaGVybyBJRCB0byB0aGUgaGVybydzIGxhc3QgcGFydGljaXBhdGVkIHRvdXJuYW1lbnQgcm91bmQgdG8gYXZvaWQgcmVwZWF0ZWQgaGVybyBwYXJ0aWNpcGF0aW9uLgogICAgbWFwcGluZyh1aW50ID0+IHVpbnQpIHB1YmxpYyBoZXJvSWRUb0xhc3RSb3VuZDsKICAgIAogICAgLy8vIEBkZXYgTWFwcGluZyBvZiBwbGF5ZXIgSUQgdG8gdGhlIGNvbnNlY3V0aXZlIHdpbiBjb3VudHMsIHVzZWQgZm9yIGNhbGN1bGF0aW5nIGphY2twb3QuCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIHBsYXllclRvV2luQ291bnRzOwoKICAgIAogICAgLyogPT09PT09PT0gRVZFTlRTID09PT09PT09ICovCiAgICAKICAgIC8vLyBAZGV2IFRoZSBQbGF5ZXJUcmFuc3BvcnRlZCBldmVudCBpcyBmaXJlZCB3aGVuIHVzZXIgdHJhbnNwb3J0ZWQgdG8gYW5vdGhlciBkdW5nZW9uLgogICAgZXZlbnQgVG91cm5hbWVudEZpbmlzaGVkKHVpbnQgdGltZXN0YW1wLCB1aW50IHRvdXJuYW1lbnRSb3VuZCwgYWRkcmVzcyBmaW5hbFdpbm5lciwgYWRkcmVzcyBmaW5hbExvc2VyLCB1aW50IHdpbm5lclJld2FyZHMsIHVpbnQgbG9zZXJSZXdhcmRzLCB1aW50IHdpbkNvdW50LCB1aW50IGphY2twb3RSZXdhcmRzKTsKICAgIAogICAgLy8vIEBkZXYgUGF5YWJsZSBjb25zdHJ1Y3RvciB0byBwYXNzIGluIHRoZSBpbml0aWFsIGphY2twb3QgZXRoZXJzLgogICAgZnVuY3Rpb24gRURDb2xpc2V1bSgpIHB1YmxpYyBwYXlhYmxlIHt9CgogICAgCiAgICAvKiA9PT09PT09PSBQVUJMSUMvRVhURVJOQUwgRlVOQ1RJT05TID09PT09PT09ICovCiAgICAKICAgIC8vLyBAZGV2IFRoZSBleHRlcm5hbCBmdW5jdGlvbiB0byBnZXQgYWxsIHRoZSBnYW1lIHNldHRpbmdzIGluIG9uZSBjYWxsLgogICAgZnVuY3Rpb24gZ2V0R2FtZVNldHRpbmdzKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICgKICAgICAgICB1aW50IF9qYWNrcG90V2luQ291bnQsCiAgICAgICAgdWludCBfamFja3BvdFdpblBlcmNlbnQsCiAgICAgICAgdWludCBfd2luUGVyY2VudCwKICAgICAgICB1aW50IF9sb3NlUGVyY2VudCwKICAgICAgICB1aW50IF9kdW5nZW9uRGlmZmljdWx0eSwKICAgICAgICB1aW50IF9wYXJ0aWNpcGF0aW9uRmVlLAogICAgICAgIHVpbnQgX21heFBhcnRpY2lwYW50Q291bnQKICAgICkgewogICAgICAgIF9qYWNrcG90V2luQ291bnQgPSBqYWNrcG90V2luQ291bnQ7CiAgICAgICAgX2phY2twb3RXaW5QZXJjZW50ID0gamFja3BvdFdpblBlcmNlbnQ7CiAgICAgICAgX3dpblBlcmNlbnQgPSB3aW5QZXJjZW50OwogICAgICAgIF9sb3NlUGVyY2VudCA9IGxvc2VQZXJjZW50OwogICAgICAgIF9kdW5nZW9uRGlmZmljdWx0eSA9IGR1bmdlb25EaWZmaWN1bHR5OwogICAgICAgIF9wYXJ0aWNpcGF0aW9uRmVlID0gcGFydGljaXBhdGlvbkZlZTsKICAgICAgICBfbWF4UGFydGljaXBhbnRDb3VudCA9IG1heFBhcnRpY2lwYW50Q291bnQ7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IFRoZSBleHRlcm5hbCBmdW5jdGlvbiB0byBnZXQgYWxsIHRoZSBnYW1lIHNldHRpbmdzIGluIG9uZSBjYWxsLgogICAgZnVuY3Rpb24gZ2V0TmV4dFRvdXJuYW1lbnREYXRhKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICgKICAgICAgICB1aW50IF9uZXh0VG91cm5hbWVudFJvdW5kLAogICAgICAgIHVpbnQgX3RvdXJuYW1lbnRSZXdhcmRzLAogICAgICAgIHVpbnQgX3RvdXJuYW1lbnRKYWNrcG90LAogICAgICAgIHVpbnQgX3BhcnRpY2lwYW50Q291bnQKICAgICkgewogICAgICAgIF9uZXh0VG91cm5hbWVudFJvdW5kID0gbmV4dFRvdXJuYW1lbnRSb3VuZDsKICAgICAgICBfdG91cm5hbWVudFJld2FyZHMgPSB0b3VybmFtZW50UmV3YXJkczsKICAgICAgICBfdG91cm5hbWVudEphY2twb3QgPSB0b3VybmFtZW50SmFja3BvdDsKICAgICAgICBfcGFydGljaXBhbnRDb3VudCA9IHBhcnRpY2lwYW50cy5sZW5ndGg7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IFRoZSBleHRlcm5hbCBmdW5jdGlvbiB0byBjYWxsIHdoZW4gam9pbmluZyB0aGUgbmV4dCB0b3VybmFtZW50LgogICAgZnVuY3Rpb24gam9pblRvdXJuYW1lbnQodWludCBfaGVyb0lkKSB3aGVuTm90UGF1c2VkIG5vblJlZW50cmFudCBleHRlcm5hbCBwYXlhYmxlIHsKICAgICAgICB1aW50IGdlbmVzOwogICAgICAgIGFkZHJlc3Mgb3duZXI7CiAgICAgICAgKCwsLCBnZW5lcywgb3duZXIsLCkgPSBlZENvcmVDb250cmFjdC5nZXRIZXJvRGV0YWlscyhfaGVyb0lkKTsKICAgICAgICAKICAgICAgICAvLyBUaHJvd3MgaWYgdGhlIGhlcm8gaXMgbm90IG93bmVkIGJ5IHRoZSBzZW5kZXIuCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICAKICAgICAgICAvLyBUaHJvd3MgaWYgdGhlIGhlcm8gaXMgYWxyZWFkeSBwYXJ0aWNpcGF0ZWQgaW4gdGhlIG5leHQgdG91cm5hbWVudC4KICAgICAgICByZXF1aXJlKGhlcm9JZFRvTGFzdFJvdW5kW19oZXJvSWRdICE9IG5leHRUb3VybmFtZW50Um91bmQpOwogICAgICAgIAogICAgICAgIC8vIFRocm93cyBpZiBwYXJ0aWNpcGF0aW9uIGNvdW50IGlzIGZ1bGwuCiAgICAgICAgcmVxdWlyZShwYXJ0aWNpcGFudHMubGVuZ3RoIDwgbWF4UGFydGljaXBhbnRDb3VudCk7CiAgICAgICAgCiAgICAgICAgLy8gVGhyb3dzIGlmIHBheW1lbnQgbm90IGVub3VnaCwgYW55IGV4Y2VlZGluZyBmdW5kcyB3aWxsIGJlIHRyYW5zZmVycmVkIGJhY2sgdG8gdGhlIHBsYXllci4KICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBwYXJ0aWNpcGF0aW9uRmVlKTsKICAgICAgICB0b3VybmFtZW50UmV3YXJkcyArPSBwYXJ0aWNpcGF0aW9uRmVlOwoKICAgICAgICBpZiAobXNnLnZhbHVlID4gcGFydGljaXBhdGlvbkZlZSkgewogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKG1zZy52YWx1ZSAtIHBhcnRpY2lwYXRpb25GZWUpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBTZXQgdGhlIGhlcm8gcGFydGljaXBhdGlvbiByb3VuZC4KICAgICAgICBoZXJvSWRUb0xhc3RSb3VuZFtfaGVyb0lkXSA9IG5leHRUb3VybmFtZW50Um91bmQ7CiAgICAgICAgCiAgICAgICAgLy8gR2V0IHRoZSBoZXJvIHBvd2VyIGFuZCBzZXQgaXQgdG8gc3RvcmFnZS4KICAgICAgICB1aW50IGhlcm9Qb3dlcjsKICAgICAgICAoaGVyb1Bvd2VyLCwsLCkgPSBlZENvcmVDb250cmFjdC5nZXRIZXJvUG93ZXIoZ2VuZXMsIGR1bmdlb25EaWZmaWN1bHR5KTsKICAgICAgICAKICAgICAgICAvLyBUaHJvdyBpZiBoZXJvUG93ZXIgaXMgMTIgKG5vdmljZSBoZXJvKS4KICAgICAgICByZXF1aXJlKGhlcm9Qb3dlciA+IDEyKTsKICAgICAgICAKICAgICAgICAvLyBTZXQgdGhlIHBhcnRpY2lwYW50IGRhdGEgdG8gc3RvcmFnZS4KICAgICAgICBwYXJ0aWNpcGFudHMucHVzaChQYXJ0aWNpcGFudChtc2cuc2VuZGVyLCBfaGVyb0lkLCBoZXJvUG93ZXIpKTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgVGhlIG9ubHlPd25lciBleHRlcm5hbCBmdW5jdGlvbiB0byBjYWxsIHdoZW4gam9pbmluZyB0aGUgbmV4dCB0b3VybmFtZW50LgogICAgZnVuY3Rpb24gc3RhcnRUb3VybmFtZW50KCkgb25seU93bmVyIG5vblJlZW50cmFudCBleHRlcm5hbCB7CiAgICAgICAgLy8gVGhyb3dzIGlmIHBhcnRpY2lwYXRpb24gY291bnQgaXMgbm90IGZ1bGwuCiAgICAgICAgcmVxdWlyZShwYXJ0aWNpcGFudHMubGVuZ3RoID09IG1heFBhcnRpY2lwYW50Q291bnQpOwogICAgICAgIAogICAgICAgIC8vIEZJR0hUIQogICAgICAgIF9maXJzdFJvdW5kRmlnaHQoKTsKICAgICAgICBfc2Vjb25kUm91bmRXaW5uZXJzRmlnaHQoKTsKICAgICAgICBfc2Vjb25kUm91bmRMb3NlcnNGaWdodCgpOwogICAgICAgIF9maW5hbFJvdW5kV2lubmVyc0ZpZ2h0KCk7CiAgICAgICAgX2ZpbmFsUm91bmRMb3NlcnNGaWdodCgpOwogICAgICAgIAogICAgICAgIC8vIFJFV0FSRFMhCiAgICAgICAgdWludCB3aW5uZXJSZXdhcmRzID0gdG91cm5hbWVudFJld2FyZHMgKiB3aW5QZXJjZW50IC8gMTAwOwogICAgICAgIHVpbnQgbG9zZXJSZXdhcmRzID0gdG91cm5hbWVudFJld2FyZHMgKiBsb3NlUGVyY2VudCAvIDEwMDsKICAgICAgICB1aW50IGFkZFRvSmFja3BvdCA9IHRvdXJuYW1lbnRSZXdhcmRzIC0gd2lubmVyUmV3YXJkcyAtIGxvc2VyUmV3YXJkczsKICAgICAgICAKICAgICAgICBhZGRyZXNzIHdpbm5lciA9IHBhcnRpY2lwYW50c1tmaW5hbFdpbm5lcl0ucGxheWVyOwogICAgICAgIGFkZHJlc3MgbG9zZXIgPSBwYXJ0aWNpcGFudHNbZmluYWxMb3Nlcl0ucGxheWVyOwogICAgICAgIHdpbm5lci50cmFuc2Zlcih3aW5uZXJSZXdhcmRzKTsKICAgICAgICBsb3Nlci50cmFuc2Zlcihsb3NlclJld2FyZHMpOwogICAgICAgIHRvdXJuYW1lbnRKYWNrcG90ICs9IGFkZFRvSmFja3BvdDsKICAgICAgICAKICAgICAgICAvLyBKQUNLUE9UIQogICAgICAgIHBsYXllclRvV2luQ291bnRzW3dpbm5lcl0rKzsKICAgICAgICAKICAgICAgICAvLyBSZXNldCBvdGhlciBwYXJ0aWNpcGFudHMnIGNvbnNlY3V0aXZlIHdpbkNvdW50LgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IHBhcnRpY2lwYW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhZGRyZXNzIHBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzW2ldLnBsYXllcjsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudCAhPSB3aW5uZXIgJiYgcGxheWVyVG9XaW5Db3VudHNbcGFydGljaXBhbnRdICE9IDApIHsKICAgICAgICAgICAgICAgIHBsYXllclRvV2luQ291bnRzW3BhcnRpY2lwYW50XSA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gRGV0ZW1pbmUgaWYgdGhlIHdpbm5lciBoYXZlIGVub3VnaCBjb25zZWN1dGl2ZSB3aW5uaW5ncyBmb3IgamFja3BvdC4KICAgICAgICB1aW50IGphY2twb3RSZXdhcmRzOwogICAgICAgIHVpbnQgd2luQ291bnQgPSBwbGF5ZXJUb1dpbkNvdW50c1t3aW5uZXJdOwogICAgICAgIGlmICh3aW5Db3VudCA9PSBqYWNrcG90V2luQ291bnQpIHsKICAgICAgICAgICAgLy8gUmVzZXQgY29uc2VjdXRpdmUgd2luQ291bnQgb2Ygd2lubmVyLgogICAgICAgICAgICBwbGF5ZXJUb1dpbkNvdW50c1t3aW5uZXJdID0gMDsKICAgICAgICAgICAgCiAgICAgICAgICAgIGphY2twb3RSZXdhcmRzID0gdG91cm5hbWVudEphY2twb3QgKiBqYWNrcG90V2luUGVyY2VudCAvIDEwMDsKICAgICAgICAgICAgdG91cm5hbWVudEphY2twb3QgLT0gamFja3BvdFJld2FyZHM7CiAgICAgICAgICAgIAogICAgICAgICAgICB3aW5uZXIudHJhbnNmZXIoamFja3BvdFJld2FyZHMpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBSZXNldCB0b3VybmFtZW50IGRhdGEgYW5kIGluY3JlbWVudCByb3VuZC4KICAgICAgICB0b3VybmFtZW50UmV3YXJkcyA9IDA7CiAgICAgICAgcHJldmlvdXNQYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHM7CiAgICAgICAgcGFydGljaXBhbnRzLmxlbmd0aCA9IDA7CiAgICAgICAgbmV4dFRvdXJuYW1lbnRSb3VuZCsrOwogICAgICAgIAogICAgICAgIC8vIEVtaXQgVG91cm5hbWVudEZpbmlzaGVkIGV2ZW50LgogICAgICAgIFRvdXJuYW1lbnRGaW5pc2hlZChub3csIG5leHRUb3VybmFtZW50Um91bmQgLSAxLCB3aW5uZXIsIGxvc2VyLCB3aW5uZXJSZXdhcmRzLCBsb3NlclJld2FyZHMsIHdpbkNvdW50LCBqYWNrcG90UmV3YXJkcyk7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IFRoZSBvbmx5T3duZXIgZXh0ZXJuYWwgZnVuY3Rpb24gdG8gY2FsbCB0byBjYW5jZWwgdGhlIG5leHQgdG91cm5hbWVudCBhbmQgcmVmdW5kcy4KICAgIGZ1bmN0aW9uIGNhbmNlbFRvdXJuYW1lbnQoKSBvbmx5T3duZXIgbm9uUmVlbnRyYW50IGV4dGVybmFsIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBwYXJ0aWNpcGFudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYWRkcmVzcyBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50c1tpXS5wbGF5ZXI7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAocGFydGljaXBhbnQgIT0gMHgwKSB7CiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudC50cmFuc2ZlcihwYXJ0aWNpcGF0aW9uRmVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBSZXNldCB0b3VybmFtZW50IGRhdGEgYW5kIGluY3JlbWVudCByb3VuZC4KICAgICAgICB0b3VybmFtZW50UmV3YXJkcyA9IDA7CiAgICAgICAgcGFydGljaXBhbnRzLmxlbmd0aCA9IDA7CiAgICAgICAgbmV4dFRvdXJuYW1lbnRSb3VuZCsrOwogICAgfQogICAgCiAgICAvLy8gQGRldiBXaXRoZHJhdyBhbGwgRXRoZXIgZnJvbSB0aGUgY29udHJhY3QuCiAgICBmdW5jdGlvbiB3aXRoZHJhd0JhbGFuY2UoKSBvbmx5T3duZXIgZXh0ZXJuYWwgewogICAgICAgIC8vIENhbiBvbmx5IHdpdGhkcmF3IGlmIG5vIHBhcnRpY2lwYW50cyBqb2luZWQgKGkuZS4gY2FsbCBjYW5jZWxUb3VybmFtZW50IGZpcnN0LikKICAgICAgICByZXF1aXJlKHBhcnRpY2lwYW50cy5sZW5ndGggPT0gMCk7CiAgICAgICAgCiAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfQoKICAgIC8qID09PT09PT09IFNFVFRFUiBGVU5DVElPTlMgPT09PT09PT0gKi8KICAgIAogICAgZnVuY3Rpb24gc2V0RWRDb3JlQ29udHJhY3QoYWRkcmVzcyBfbmV3RWRDb3JlQ29udHJhY3QpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgZWRDb3JlQ29udHJhY3QgPSBFRENvcmVJbnRlcmZhY2UoX25ld0VkQ29yZUNvbnRyYWN0KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0SmFja3BvdFdpbkNvdW50KHVpbnQgX25ld0phY2twb3RXaW5Db3VudCkgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICBqYWNrcG90V2luQ291bnQgPSBfbmV3SmFja3BvdFdpbkNvdW50OwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRKYWNrcG90V2luUGVyY2VudCh1aW50IF9uZXdKYWNrcG90V2luUGVyY2VudCkgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICBqYWNrcG90V2luUGVyY2VudCA9IF9uZXdKYWNrcG90V2luUGVyY2VudDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0V2luUGVyY2VudCh1aW50IF9uZXdXaW5QZXJjZW50KSBvbmx5T3duZXIgZXh0ZXJuYWwgewogICAgICAgIHdpblBlcmNlbnQgPSBfbmV3V2luUGVyY2VudDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0TG9zZVBlcmNlbnQodWludCBfbmV3TG9zZVBlcmNlbnQpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgbG9zZVBlcmNlbnQgPSBfbmV3TG9zZVBlcmNlbnQ7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldER1bmdlb25EaWZmaWN1bHR5KHVpbnQgX25ld0R1bmdlb25EaWZmaWN1bHR5KSBvbmx5T3duZXIgZXh0ZXJuYWwgewogICAgICAgIGR1bmdlb25EaWZmaWN1bHR5ID0gX25ld0R1bmdlb25EaWZmaWN1bHR5OwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRQYXJ0aWNpcGF0aW9uRmVlKHVpbnQgX25ld1BhcnRpY2lwYXRpb25GZWUpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgcGFydGljaXBhdGlvbkZlZSA9IF9uZXdQYXJ0aWNpcGF0aW9uRmVlOwogICAgfQogICAgCiAgICAvKiA9PT09PT09PSBJTlRFUk5BTC9QUklWQVRFIEZVTkNUSU9OUyA9PT09PT09PSAqLwogICAgCiAgICAvLy8gQGRldiBDb21wdXRlIGFsbCB3aW5uZXJzIGFuZCBsb3NlcnMgZm9yIHRoZSBmaXJzdCByb3VuZC4KICAgIGZ1bmN0aW9uIF9maXJzdFJvdW5kRmlnaHQoKSBwcml2YXRlIHsKICAgICAgICAvLyBHZXQgYWxsIGhlcm8gcG93ZXJzLgogICAgICAgIHVpbnQgaGVyb1Bvd2VyMCA9IHBhcnRpY2lwYW50c1swXS5oZXJvUG93ZXI7CiAgICAgICAgdWludCBoZXJvUG93ZXIxID0gcGFydGljaXBhbnRzWzFdLmhlcm9Qb3dlcjsKICAgICAgICB1aW50IGhlcm9Qb3dlcjIgPSBwYXJ0aWNpcGFudHNbMl0uaGVyb1Bvd2VyOwogICAgICAgIHVpbnQgaGVyb1Bvd2VyMyA9IHBhcnRpY2lwYW50c1szXS5oZXJvUG93ZXI7CiAgICAgICAgdWludCBoZXJvUG93ZXI0ID0gcGFydGljaXBhbnRzWzRdLmhlcm9Qb3dlcjsKICAgICAgICB1aW50IGhlcm9Qb3dlcjUgPSBwYXJ0aWNpcGFudHNbNV0uaGVyb1Bvd2VyOwogICAgICAgIHVpbnQgaGVyb1Bvd2VyNiA9IHBhcnRpY2lwYW50c1s2XS5oZXJvUG93ZXI7CiAgICAgICAgdWludCBoZXJvUG93ZXI3ID0gcGFydGljaXBhbnRzWzddLmhlcm9Qb3dlcjsKICAgICAgICAKICAgICAgICAvLyBSYW5kb20gbnVtYmVyLgogICAgICAgIHVpbnQgcmFuZDsKICAgICAgICAKICAgICAgICAvLyAwIFZzIDEKICAgICAgICByYW5kID0gX2dldFJhbmRvbU51bWJlcigxMDApOwogICAgICAgIGlmICgKICAgICAgICAgICAgKGhlcm9Qb3dlcjAgPiBoZXJvUG93ZXIxICYmIHJhbmQgPCA2MCkgfHwgCiAgICAgICAgICAgIChoZXJvUG93ZXIwID09IGhlcm9Qb3dlcjEgJiYgcmFuZCA8IDUwKSB8fAogICAgICAgICAgICAoaGVyb1Bvd2VyMCA8IGhlcm9Qb3dlcjEgJiYgcmFuZCA8IDQwKQogICAgICAgICkgewogICAgICAgICAgICBmaXJzdFJvdW5kV2lubmVyc1swXSA9IDA7CiAgICAgICAgICAgIGZpcnN0Um91bmRMb3NlcnNbMF0gPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZpcnN0Um91bmRXaW5uZXJzWzBdID0gMTsKICAgICAgICAgICAgZmlyc3RSb3VuZExvc2Vyc1swXSA9IDA7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIDIgVnMgMwogICAgICAgIHJhbmQgPSBfZ2V0UmFuZG9tTnVtYmVyKDEwMCk7CiAgICAgICAgaWYgKAogICAgICAgICAgICAoaGVyb1Bvd2VyMiA+IGhlcm9Qb3dlcjMgJiYgcmFuZCA8IDYwKSB8fCAKICAgICAgICAgICAgKGhlcm9Qb3dlcjIgPT0gaGVyb1Bvd2VyMyAmJiByYW5kIDwgNTApIHx8CiAgICAgICAgICAgIChoZXJvUG93ZXIyIDwgaGVyb1Bvd2VyMyAmJiByYW5kIDwgNDApCiAgICAgICAgKSB7CiAgICAgICAgICAgIGZpcnN0Um91bmRXaW5uZXJzWzFdID0gMjsKICAgICAgICAgICAgZmlyc3RSb3VuZExvc2Vyc1sxXSA9IDM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZmlyc3RSb3VuZFdpbm5lcnNbMV0gPSAzOwogICAgICAgICAgICBmaXJzdFJvdW5kTG9zZXJzWzFdID0gMjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gNCBWcyA1CiAgICAgICAgcmFuZCA9IF9nZXRSYW5kb21OdW1iZXIoMTAwKTsKICAgICAgICBpZiAoCiAgICAgICAgICAgIChoZXJvUG93ZXI0ID4gaGVyb1Bvd2VyNSAmJiByYW5kIDwgNjApIHx8IAogICAgICAgICAgICAoaGVyb1Bvd2VyNCA9PSBoZXJvUG93ZXI1ICYmIHJhbmQgPCA1MCkgfHwKICAgICAgICAgICAgKGhlcm9Qb3dlcjQgPCBoZXJvUG93ZXI1ICYmIHJhbmQgPCA0MCkKICAgICAgICApIHsKICAgICAgICAgICAgZmlyc3RSb3VuZFdpbm5lcnNbMl0gPSA0OwogICAgICAgICAgICBmaXJzdFJvdW5kTG9zZXJzWzJdID0gNTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmaXJzdFJvdW5kV2lubmVyc1syXSA9IDU7CiAgICAgICAgICAgIGZpcnN0Um91bmRMb3NlcnNbMl0gPSA0OwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyA2IFZzIDcKICAgICAgICByYW5kID0gX2dldFJhbmRvbU51bWJlcigxMDApOwogICAgICAgIGlmICgKICAgICAgICAgICAgKGhlcm9Qb3dlcjYgPiBoZXJvUG93ZXI3ICYmIHJhbmQgPCA2MCkgfHwgCiAgICAgICAgICAgIChoZXJvUG93ZXI2ID09IGhlcm9Qb3dlcjcgJiYgcmFuZCA8IDUwKSB8fAogICAgICAgICAgICAoaGVyb1Bvd2VyNiA8IGhlcm9Qb3dlcjcgJiYgcmFuZCA8IDQwKQogICAgICAgICkgewogICAgICAgICAgICBmaXJzdFJvdW5kV2lubmVyc1szXSA9IDY7CiAgICAgICAgICAgIGZpcnN0Um91bmRMb3NlcnNbM10gPSA3OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZpcnN0Um91bmRXaW5uZXJzWzNdID0gNzsKICAgICAgICAgICAgZmlyc3RSb3VuZExvc2Vyc1szXSA9IDY7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvLy8gQGRldiBDb21wdXRlIGFsbCBzZWNvbmQgd2lubmVycyBvZiBhbGwgZmlyc3Qgcm91bmQgd2lubmVycy4KICAgIGZ1bmN0aW9uIF9zZWNvbmRSb3VuZFdpbm5lcnNGaWdodCgpIHByaXZhdGUgewogICAgICAgIC8vIEdldCBhbGwgaGVybyBwb3dlcnMgb2YgYWxsIGZpcnN0IHJvdW5kIHdpbm5lcnMuCiAgICAgICAgdWludCB3aW5uZXIwID0gZmlyc3RSb3VuZFdpbm5lcnNbMF07CiAgICAgICAgdWludCB3aW5uZXIxID0gZmlyc3RSb3VuZFdpbm5lcnNbMV07CiAgICAgICAgdWludCB3aW5uZXIyID0gZmlyc3RSb3VuZFdpbm5lcnNbMl07CiAgICAgICAgdWludCB3aW5uZXIzID0gZmlyc3RSb3VuZFdpbm5lcnNbM107CiAgICAgICAgdWludCBoZXJvUG93ZXIwID0gcGFydGljaXBhbnRzW3dpbm5lcjBdLmhlcm9Qb3dlcjsKICAgICAgICB1aW50IGhlcm9Qb3dlcjEgPSBwYXJ0aWNpcGFudHNbd2lubmVyMV0uaGVyb1Bvd2VyOwogICAgICAgIHVpbnQgaGVyb1Bvd2VyMiA9IHBhcnRpY2lwYW50c1t3aW5uZXIyXS5oZXJvUG93ZXI7CiAgICAgICAgdWludCBoZXJvUG93ZXIzID0gcGFydGljaXBhbnRzW3dpbm5lcjNdLmhlcm9Qb3dlcjsKICAgICAgICAKICAgICAgICAvLyBSYW5kb20gbnVtYmVyLgogICAgICAgIHVpbnQgcmFuZDsKICAgICAgICAKICAgICAgICAvLyAwIFZzIDEKICAgICAgICByYW5kID0gX2dldFJhbmRvbU51bWJlcigxMDApOwogICAgICAgIGlmICgKICAgICAgICAgICAgKGhlcm9Qb3dlcjAgPiBoZXJvUG93ZXIxICYmIHJhbmQgPCA2MCkgfHwgCiAgICAgICAgICAgIChoZXJvUG93ZXIwID09IGhlcm9Qb3dlcjEgJiYgcmFuZCA8IDUwKSB8fAogICAgICAgICAgICAoaGVyb1Bvd2VyMCA8IGhlcm9Qb3dlcjEgJiYgcmFuZCA8IDQwKQogICAgICAgICkgewogICAgICAgICAgICBzZWNvbmRSb3VuZFdpbm5lcnNbMF0gPSB3aW5uZXIwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlY29uZFJvdW5kV2lubmVyc1swXSA9IHdpbm5lcjE7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIDIgVnMgMwogICAgICAgIHJhbmQgPSBfZ2V0UmFuZG9tTnVtYmVyKDEwMCk7CiAgICAgICAgaWYgKAogICAgICAgICAgICAoaGVyb1Bvd2VyMiA+IGhlcm9Qb3dlcjMgJiYgcmFuZCA8IDYwKSB8fCAKICAgICAgICAgICAgKGhlcm9Qb3dlcjIgPT0gaGVyb1Bvd2VyMyAmJiByYW5kIDwgNTApIHx8CiAgICAgICAgICAgIChoZXJvUG93ZXIyIDwgaGVyb1Bvd2VyMyAmJiByYW5kIDwgNDApCiAgICAgICAgKSB7CiAgICAgICAgICAgIHNlY29uZFJvdW5kV2lubmVyc1sxXSA9IHdpbm5lcjI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2Vjb25kUm91bmRXaW5uZXJzWzFdID0gd2lubmVyMzsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IENvbXB1dGUgYWxsIHNlY29uZCBsb3NlcnMgb2YgYWxsIGZpcnN0IHJvdW5kIGxvc2Vycy4KICAgIGZ1bmN0aW9uIF9zZWNvbmRSb3VuZExvc2Vyc0ZpZ2h0KCkgcHJpdmF0ZSB7CiAgICAgICAgLy8gR2V0IGFsbCBoZXJvIHBvd2VycyBvZiBhbGwgZmlyc3Qgcm91bmQgbG9zZXJzLgogICAgICAgIHVpbnQgbG9zZXIwID0gZmlyc3RSb3VuZExvc2Vyc1swXTsKICAgICAgICB1aW50IGxvc2VyMSA9IGZpcnN0Um91bmRMb3NlcnNbMV07CiAgICAgICAgdWludCBsb3NlcjIgPSBmaXJzdFJvdW5kTG9zZXJzWzJdOwogICAgICAgIHVpbnQgbG9zZXIzID0gZmlyc3RSb3VuZExvc2Vyc1szXTsKICAgICAgICB1aW50IGhlcm9Qb3dlcjAgPSBwYXJ0aWNpcGFudHNbbG9zZXIwXS5oZXJvUG93ZXI7CiAgICAgICAgdWludCBoZXJvUG93ZXIxID0gcGFydGljaXBhbnRzW2xvc2VyMV0uaGVyb1Bvd2VyOwogICAgICAgIHVpbnQgaGVyb1Bvd2VyMiA9IHBhcnRpY2lwYW50c1tsb3NlcjJdLmhlcm9Qb3dlcjsKICAgICAgICB1aW50IGhlcm9Qb3dlcjMgPSBwYXJ0aWNpcGFudHNbbG9zZXIzXS5oZXJvUG93ZXI7CiAgICAgICAgCiAgICAgICAgLy8gUmFuZG9tIG51bWJlci4KICAgICAgICB1aW50IHJhbmQ7CiAgICAgICAgCiAgICAgICAgLy8gMCBWcyAxCiAgICAgICAgcmFuZCA9IF9nZXRSYW5kb21OdW1iZXIoMTAwKTsKICAgICAgICBpZiAoCiAgICAgICAgICAgIChoZXJvUG93ZXIwID4gaGVyb1Bvd2VyMSAmJiByYW5kIDwgNjApIHx8IAogICAgICAgICAgICAoaGVyb1Bvd2VyMCA9PSBoZXJvUG93ZXIxICYmIHJhbmQgPCA1MCkgfHwKICAgICAgICAgICAgKGhlcm9Qb3dlcjAgPCBoZXJvUG93ZXIxICYmIHJhbmQgPCA0MCkKICAgICAgICApIHsKICAgICAgICAgICAgc2Vjb25kUm91bmRMb3NlcnNbMF0gPSBsb3NlcjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2Vjb25kUm91bmRMb3NlcnNbMF0gPSBsb3NlcjA7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIDIgVnMgMwogICAgICAgIHJhbmQgPSBfZ2V0UmFuZG9tTnVtYmVyKDEwMCk7CiAgICAgICAgaWYgKAogICAgICAgICAgICAoaGVyb1Bvd2VyMiA+IGhlcm9Qb3dlcjMgJiYgcmFuZCA8IDYwKSB8fCAKICAgICAgICAgICAgKGhlcm9Qb3dlcjIgPT0gaGVyb1Bvd2VyMyAmJiByYW5kIDwgNTApIHx8CiAgICAgICAgICAgIChoZXJvUG93ZXIyIDwgaGVyb1Bvd2VyMyAmJiByYW5kIDwgNDApCiAgICAgICAgKSB7CiAgICAgICAgICAgIHNlY29uZFJvdW5kTG9zZXJzWzFdID0gbG9zZXIzOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlY29uZFJvdW5kTG9zZXJzWzFdID0gbG9zZXIyOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy8vIEBkZXYgQ29tcHV0ZSB0aGUgZmluYWwgd2lubmVyLgogICAgZnVuY3Rpb24gX2ZpbmFsUm91bmRXaW5uZXJzRmlnaHQoKSBwcml2YXRlIHsKICAgICAgICAvLyBHZXQgYWxsIGhlcm8gcG93ZXJzIG9mIGFsbCBmaXJzdCByb3VuZCB3aW5uZXJzLgogICAgICAgIHVpbnQgd2lubmVyMCA9IHNlY29uZFJvdW5kV2lubmVyc1swXTsKICAgICAgICB1aW50IHdpbm5lcjEgPSBzZWNvbmRSb3VuZFdpbm5lcnNbMV07CiAgICAgICAgdWludCBoZXJvUG93ZXIwID0gcGFydGljaXBhbnRzW3dpbm5lcjBdLmhlcm9Qb3dlcjsKICAgICAgICB1aW50IGhlcm9Qb3dlcjEgPSBwYXJ0aWNpcGFudHNbd2lubmVyMV0uaGVyb1Bvd2VyOwogICAgICAgIAogICAgICAgIC8vIFJhbmRvbSBudW1iZXIuCiAgICAgICAgdWludCByYW5kOwogICAgICAgIAogICAgICAgIC8vIDAgVnMgMQogICAgICAgIHJhbmQgPSBfZ2V0UmFuZG9tTnVtYmVyKDEwMCk7CiAgICAgICAgaWYgKAogICAgICAgICAgICAoaGVyb1Bvd2VyMCA+IGhlcm9Qb3dlcjEgJiYgcmFuZCA8IDYwKSB8fCAKICAgICAgICAgICAgKGhlcm9Qb3dlcjAgPT0gaGVyb1Bvd2VyMSAmJiByYW5kIDwgNTApIHx8CiAgICAgICAgICAgIChoZXJvUG93ZXIwIDwgaGVyb1Bvd2VyMSAmJiByYW5kIDwgNDApCiAgICAgICAgKSB7CiAgICAgICAgICAgIGZpbmFsV2lubmVyID0gd2lubmVyMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmaW5hbFdpbm5lciA9IHdpbm5lcjE7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvLy8gQGRldiBDb21wdXRlIHRoZSBmaW5hbCBsb3Nlci4KICAgIGZ1bmN0aW9uIF9maW5hbFJvdW5kTG9zZXJzRmlnaHQoKSBwcml2YXRlIHsKICAgICAgICAvLyBHZXQgYWxsIGhlcm8gcG93ZXJzIG9mIGFsbCBmaXJzdCByb3VuZCB3aW5uZXJzLgogICAgICAgIHVpbnQgbG9zZXIwID0gc2Vjb25kUm91bmRMb3NlcnNbMF07CiAgICAgICAgdWludCBsb3NlcjEgPSBzZWNvbmRSb3VuZExvc2Vyc1sxXTsKICAgICAgICB1aW50IGhlcm9Qb3dlcjAgPSBwYXJ0aWNpcGFudHNbbG9zZXIwXS5oZXJvUG93ZXI7CiAgICAgICAgdWludCBoZXJvUG93ZXIxID0gcGFydGljaXBhbnRzW2xvc2VyMV0uaGVyb1Bvd2VyOwogICAgICAgIAogICAgICAgIC8vIFJhbmRvbSBudW1iZXIuCiAgICAgICAgdWludCByYW5kOwogICAgICAgIAogICAgICAgIC8vIDAgVnMgMQogICAgICAgIHJhbmQgPSBfZ2V0UmFuZG9tTnVtYmVyKDEwMCk7CiAgICAgICAgaWYgKAogICAgICAgICAgICAoaGVyb1Bvd2VyMCA+IGhlcm9Qb3dlcjEgJiYgcmFuZCA8IDYwKSB8fCAKICAgICAgICAgICAgKGhlcm9Qb3dlcjAgPT0gaGVyb1Bvd2VyMSAmJiByYW5kIDwgNTApIHx8CiAgICAgICAgICAgIChoZXJvUG93ZXIwIDwgaGVyb1Bvd2VyMSAmJiByYW5kIDwgNDApCiAgICAgICAgKSB7CiAgICAgICAgICAgIGZpbmFsTG9zZXIgPSBsb3NlcjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZmluYWxMb3NlciA9IGxvc2VyMDsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vIEBkZXYgUmV0dXJuIGEgcHNldWRvIHJhbmRvbSB1aW50IHNtYWxsZXIgdGhhbiBsb3dlciBib3VuZHMuCiAgICBmdW5jdGlvbiBfZ2V0UmFuZG9tTnVtYmVyKHVpbnQgX3VwcGVyKSBwcml2YXRlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBfc2VlZCA9IHVpbnQoa2VjY2FrMjU2KAogICAgICAgICAgICBfc2VlZCwKICAgICAgICAgICAgYmxvY2suYmxvY2toYXNoKGJsb2NrLm51bWJlciAtIDEpLAogICAgICAgICAgICBibG9jay5jb2luYmFzZSwKICAgICAgICAgICAgYmxvY2suZGlmZmljdWx0eQogICAgICAgICkpOwogICAgICAgIAogICAgICAgIHJldHVybiBfc2VlZCAlIF91cHBlcjsKICAgIH0KCn0='.
	

]
