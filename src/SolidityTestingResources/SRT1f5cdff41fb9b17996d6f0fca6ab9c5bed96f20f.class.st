Class {
	#name : #SRT1f5cdff41fb9b17996d6f0fca6ab9c5bed96f20f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1f5cdff41fb9b17996d6f0fca6ab9c5bed96f20f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBzZXRzIHN1cHBvcnQgdXAgdG8gMl4yNTYtMiBtZW1iZXJzCi8vIG1lbWJlckluZGljZXMgc3RvcmVzIHRoZSBpbmRleCBvZiBtZW1iZXJzICsgMSwgbm90IHRoZWlyIGFjdHVhbCBpbmRleApsaWJyYXJ5IFNldHMgewogICAgLy8gYWRkcmVzcyBzZXQKICAgIHN0cnVjdCBhZGRyZXNzU2V0IHsKICAgICAgICBhZGRyZXNzW10gbWVtYmVyczsKICAgICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgbWVtYmVySW5kaWNlczsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnNlcnQoYWRkcmVzc1NldCBzdG9yYWdlIHNlbGYsIGFkZHJlc3Mgb3RoZXIpIHB1YmxpYyB7CiAgICAgICAgaWYgKCFjb250YWlucyhzZWxmLCBvdGhlcikpIHsKICAgICAgICAgICAgYXNzZXJ0KGxlbmd0aChzZWxmKSA8IDIqKjI1Ni0xKTsKICAgICAgICAgICAgc2VsZi5tZW1iZXJzLnB1c2gob3RoZXIpOwogICAgICAgICAgICBzZWxmLm1lbWJlckluZGljZXNbb3RoZXJdID0gbGVuZ3RoKHNlbGYpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmUoYWRkcmVzc1NldCBzdG9yYWdlIHNlbGYsIGFkZHJlc3Mgb3RoZXIpIHB1YmxpYyB7CiAgICAgICAgaWYgKGNvbnRhaW5zKHNlbGYsIG90aGVyKSkgewogICAgICAgICAgICB1aW50IHJlcGxhY2VJbmRleCA9IHNlbGYubWVtYmVySW5kaWNlc1tvdGhlcl07CiAgICAgICAgICAgIGFkZHJlc3MgbGFzdE1lbWJlciA9IHNlbGYubWVtYmVyc1tsZW5ndGgoc2VsZiktMV07CiAgICAgICAgICAgIC8vIG92ZXJ3cml0ZSBvdGhlciB3aXRoIHRoZSBsYXN0IG1lbWJlciBhbmQgcmVtb3ZlIGxhc3QgbWVtYmVyCiAgICAgICAgICAgIHNlbGYubWVtYmVyc1tyZXBsYWNlSW5kZXgtMV0gPSBsYXN0TWVtYmVyOwogICAgICAgICAgICBzZWxmLm1lbWJlcnMubGVuZ3RoLS07CiAgICAgICAgICAgIC8vIHJlZmxlY3QgdGhpcyBjaGFuZ2UgaW4gdGhlIGluZGljZXMKICAgICAgICAgICAgc2VsZi5tZW1iZXJJbmRpY2VzW2xhc3RNZW1iZXJdID0gcmVwbGFjZUluZGV4OwogICAgICAgICAgICBkZWxldGUgc2VsZi5tZW1iZXJJbmRpY2VzW290aGVyXTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY29udGFpbnMoYWRkcmVzc1NldCBzdG9yYWdlIHNlbGYsIGFkZHJlc3Mgb3RoZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc2VsZi5tZW1iZXJJbmRpY2VzW290aGVyXSA+IDA7CiAgICB9CgogICAgZnVuY3Rpb24gbGVuZ3RoKGFkZHJlc3NTZXQgc3RvcmFnZSBzZWxmKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVycy5sZW5ndGg7CiAgICB9CgoKICAgIC8vIHVpbnQgc2V0CiAgICBzdHJ1Y3QgdWludFNldCB7CiAgICAgICAgdWludFtdIG1lbWJlcnM7CiAgICAgICAgbWFwcGluZyh1aW50ID0+IHVpbnQpIG1lbWJlckluZGljZXM7CiAgICB9CgogICAgZnVuY3Rpb24gaW5zZXJ0KHVpbnRTZXQgc3RvcmFnZSBzZWxmLCB1aW50IG90aGVyKSBwdWJsaWMgewogICAgICAgIGlmICghY29udGFpbnMoc2VsZiwgb3RoZXIpKSB7CiAgICAgICAgICAgIGFzc2VydChsZW5ndGgoc2VsZikgPCAyKioyNTYtMSk7CiAgICAgICAgICAgIHNlbGYubWVtYmVycy5wdXNoKG90aGVyKTsKICAgICAgICAgICAgc2VsZi5tZW1iZXJJbmRpY2VzW290aGVyXSA9IGxlbmd0aChzZWxmKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlKHVpbnRTZXQgc3RvcmFnZSBzZWxmLCB1aW50IG90aGVyKSBwdWJsaWMgewogICAgICAgIGlmIChjb250YWlucyhzZWxmLCBvdGhlcikpIHsKICAgICAgICAgICAgdWludCByZXBsYWNlSW5kZXggPSBzZWxmLm1lbWJlckluZGljZXNbb3RoZXJdOwogICAgICAgICAgICB1aW50IGxhc3RNZW1iZXIgPSBzZWxmLm1lbWJlcnNbbGVuZ3RoKHNlbGYpLTFdOwogICAgICAgICAgICAvLyBvdmVyd3JpdGUgb3RoZXIgd2l0aCB0aGUgbGFzdCBtZW1iZXIgYW5kIHJlbW92ZSBsYXN0IG1lbWJlcgogICAgICAgICAgICBzZWxmLm1lbWJlcnNbcmVwbGFjZUluZGV4LTFdID0gbGFzdE1lbWJlcjsKICAgICAgICAgICAgc2VsZi5tZW1iZXJzLmxlbmd0aC0tOwogICAgICAgICAgICAvLyByZWZsZWN0IHRoaXMgY2hhbmdlIGluIHRoZSBpbmRpY2VzCiAgICAgICAgICAgIHNlbGYubWVtYmVySW5kaWNlc1tsYXN0TWVtYmVyXSA9IHJlcGxhY2VJbmRleDsKICAgICAgICAgICAgZGVsZXRlIHNlbGYubWVtYmVySW5kaWNlc1tvdGhlcl07CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvbnRhaW5zKHVpbnRTZXQgc3RvcmFnZSBzZWxmLCB1aW50IG90aGVyKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVySW5kaWNlc1tvdGhlcl0gPiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGxlbmd0aCh1aW50U2V0IHN0b3JhZ2Ugc2VsZikgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBzZWxmLm1lbWJlcnMubGVuZ3RoOwogICAgfQoKCiAgICAvLyB1aW50OCBzZXQKICAgIHN0cnVjdCB1aW50OFNldCB7CiAgICAgICAgdWludDhbXSBtZW1iZXJzOwogICAgICAgIG1hcHBpbmcodWludDggPT4gdWludCkgbWVtYmVySW5kaWNlczsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnNlcnQodWludDhTZXQgc3RvcmFnZSBzZWxmLCB1aW50OCBvdGhlcikgcHVibGljIHsKICAgICAgICBpZiAoIWNvbnRhaW5zKHNlbGYsIG90aGVyKSkgewogICAgICAgICAgICBhc3NlcnQobGVuZ3RoKHNlbGYpIDwgMioqMjU2LTEpOwogICAgICAgICAgICBzZWxmLm1lbWJlcnMucHVzaChvdGhlcik7CiAgICAgICAgICAgIHNlbGYubWVtYmVySW5kaWNlc1tvdGhlcl0gPSBsZW5ndGgoc2VsZik7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZSh1aW50OFNldCBzdG9yYWdlIHNlbGYsIHVpbnQ4IG90aGVyKSBwdWJsaWMgewogICAgICAgIGlmIChjb250YWlucyhzZWxmLCBvdGhlcikpIHsKICAgICAgICAgICAgdWludCByZXBsYWNlSW5kZXggPSBzZWxmLm1lbWJlckluZGljZXNbb3RoZXJdOwogICAgICAgICAgICB1aW50OCBsYXN0TWVtYmVyID0gc2VsZi5tZW1iZXJzW2xlbmd0aChzZWxmKS0xXTsKICAgICAgICAgICAgLy8gb3ZlcndyaXRlIG90aGVyIHdpdGggdGhlIGxhc3QgbWVtYmVyIGFuZCByZW1vdmUgbGFzdCBtZW1iZXIKICAgICAgICAgICAgc2VsZi5tZW1iZXJzW3JlcGxhY2VJbmRleC0xXSA9IGxhc3RNZW1iZXI7CiAgICAgICAgICAgIHNlbGYubWVtYmVycy5sZW5ndGgtLTsKICAgICAgICAgICAgLy8gcmVmbGVjdCB0aGlzIGNoYW5nZSBpbiB0aGUgaW5kaWNlcwogICAgICAgICAgICBzZWxmLm1lbWJlckluZGljZXNbbGFzdE1lbWJlcl0gPSByZXBsYWNlSW5kZXg7CiAgICAgICAgICAgIGRlbGV0ZSBzZWxmLm1lbWJlckluZGljZXNbb3RoZXJdOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjb250YWlucyh1aW50OFNldCBzdG9yYWdlIHNlbGYsIHVpbnQ4IG90aGVyKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVySW5kaWNlc1tvdGhlcl0gPiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGxlbmd0aCh1aW50OFNldCBzdG9yYWdlIHNlbGYpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gc2VsZi5tZW1iZXJzLmxlbmd0aDsKICAgIH0KCgogICAgLy8gaW50IHNldAogICAgc3RydWN0IGludFNldCB7CiAgICAgICAgaW50W10gbWVtYmVyczsKICAgICAgICBtYXBwaW5nKGludCA9PiB1aW50KSBtZW1iZXJJbmRpY2VzOwogICAgfQoKICAgIGZ1bmN0aW9uIGluc2VydChpbnRTZXQgc3RvcmFnZSBzZWxmLCBpbnQgb3RoZXIpIHB1YmxpYyB7CiAgICAgICAgaWYgKCFjb250YWlucyhzZWxmLCBvdGhlcikpIHsKICAgICAgICAgICAgYXNzZXJ0KGxlbmd0aChzZWxmKSA8IDIqKjI1Ni0xKTsKICAgICAgICAgICAgc2VsZi5tZW1iZXJzLnB1c2gob3RoZXIpOwogICAgICAgICAgICBzZWxmLm1lbWJlckluZGljZXNbb3RoZXJdID0gbGVuZ3RoKHNlbGYpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmUoaW50U2V0IHN0b3JhZ2Ugc2VsZiwgaW50IG90aGVyKSBwdWJsaWMgewogICAgICAgIGlmIChjb250YWlucyhzZWxmLCBvdGhlcikpIHsKICAgICAgICAgICAgdWludCByZXBsYWNlSW5kZXggPSBzZWxmLm1lbWJlckluZGljZXNbb3RoZXJdOwogICAgICAgICAgICBpbnQgbGFzdE1lbWJlciA9IHNlbGYubWVtYmVyc1tsZW5ndGgoc2VsZiktMV07CiAgICAgICAgICAgIC8vIG92ZXJ3cml0ZSBvdGhlciB3aXRoIHRoZSBsYXN0IG1lbWJlciBhbmQgcmVtb3ZlIGxhc3QgbWVtYmVyCiAgICAgICAgICAgIHNlbGYubWVtYmVyc1tyZXBsYWNlSW5kZXgtMV0gPSBsYXN0TWVtYmVyOwogICAgICAgICAgICBzZWxmLm1lbWJlcnMubGVuZ3RoLS07CiAgICAgICAgICAgIC8vIHJlZmxlY3QgdGhpcyBjaGFuZ2UgaW4gdGhlIGluZGljZXMKICAgICAgICAgICAgc2VsZi5tZW1iZXJJbmRpY2VzW2xhc3RNZW1iZXJdID0gcmVwbGFjZUluZGV4OwogICAgICAgICAgICBkZWxldGUgc2VsZi5tZW1iZXJJbmRpY2VzW290aGVyXTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY29udGFpbnMoaW50U2V0IHN0b3JhZ2Ugc2VsZiwgaW50IG90aGVyKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVySW5kaWNlc1tvdGhlcl0gPiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGxlbmd0aChpbnRTZXQgc3RvcmFnZSBzZWxmKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVycy5sZW5ndGg7CiAgICB9CgoKICAgIC8vIGludDggc2V0CiAgICBzdHJ1Y3QgaW50OFNldCB7CiAgICAgICAgaW50OFtdIG1lbWJlcnM7CiAgICAgICAgbWFwcGluZyhpbnQ4ID0+IHVpbnQpIG1lbWJlckluZGljZXM7CiAgICB9CgogICAgZnVuY3Rpb24gaW5zZXJ0KGludDhTZXQgc3RvcmFnZSBzZWxmLCBpbnQ4IG90aGVyKSBwdWJsaWMgewogICAgICAgIGlmICghY29udGFpbnMoc2VsZiwgb3RoZXIpKSB7CiAgICAgICAgICAgIGFzc2VydChsZW5ndGgoc2VsZikgPCAyKioyNTYtMSk7CiAgICAgICAgICAgIHNlbGYubWVtYmVycy5wdXNoKG90aGVyKTsKICAgICAgICAgICAgc2VsZi5tZW1iZXJJbmRpY2VzW290aGVyXSA9IGxlbmd0aChzZWxmKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlKGludDhTZXQgc3RvcmFnZSBzZWxmLCBpbnQ4IG90aGVyKSBwdWJsaWMgewogICAgICAgIGlmIChjb250YWlucyhzZWxmLCBvdGhlcikpIHsKICAgICAgICAgICAgdWludCByZXBsYWNlSW5kZXggPSBzZWxmLm1lbWJlckluZGljZXNbb3RoZXJdOwogICAgICAgICAgICBpbnQ4IGxhc3RNZW1iZXIgPSBzZWxmLm1lbWJlcnNbbGVuZ3RoKHNlbGYpLTFdOwogICAgICAgICAgICAvLyBvdmVyd3JpdGUgb3RoZXIgd2l0aCB0aGUgbGFzdCBtZW1iZXIgYW5kIHJlbW92ZSBsYXN0IG1lbWJlcgogICAgICAgICAgICBzZWxmLm1lbWJlcnNbcmVwbGFjZUluZGV4LTFdID0gbGFzdE1lbWJlcjsKICAgICAgICAgICAgc2VsZi5tZW1iZXJzLmxlbmd0aC0tOwogICAgICAgICAgICAvLyByZWZsZWN0IHRoaXMgY2hhbmdlIGluIHRoZSBpbmRpY2VzCiAgICAgICAgICAgIHNlbGYubWVtYmVySW5kaWNlc1tsYXN0TWVtYmVyXSA9IHJlcGxhY2VJbmRleDsKICAgICAgICAgICAgZGVsZXRlIHNlbGYubWVtYmVySW5kaWNlc1tvdGhlcl07CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvbnRhaW5zKGludDhTZXQgc3RvcmFnZSBzZWxmLCBpbnQ4IG90aGVyKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVySW5kaWNlc1tvdGhlcl0gPiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGxlbmd0aChpbnQ4U2V0IHN0b3JhZ2Ugc2VsZikgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBzZWxmLm1lbWJlcnMubGVuZ3RoOwogICAgfQoKCiAgICAvLyBieXRlIHNldAogICAgc3RydWN0IGJ5dGVTZXQgewogICAgICAgIGJ5dGVbXSBtZW1iZXJzOwogICAgICAgIG1hcHBpbmcoYnl0ZSA9PiB1aW50KSBtZW1iZXJJbmRpY2VzOwogICAgfQoKICAgIGZ1bmN0aW9uIGluc2VydChieXRlU2V0IHN0b3JhZ2Ugc2VsZiwgYnl0ZSBvdGhlcikgcHVibGljIHsKICAgICAgICBpZiAoIWNvbnRhaW5zKHNlbGYsIG90aGVyKSkgewogICAgICAgICAgICBhc3NlcnQobGVuZ3RoKHNlbGYpIDwgMioqMjU2LTEpOwogICAgICAgICAgICBzZWxmLm1lbWJlcnMucHVzaChvdGhlcik7CiAgICAgICAgICAgIHNlbGYubWVtYmVySW5kaWNlc1tvdGhlcl0gPSBsZW5ndGgoc2VsZik7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZShieXRlU2V0IHN0b3JhZ2Ugc2VsZiwgYnl0ZSBvdGhlcikgcHVibGljIHsKICAgICAgICBpZiAoY29udGFpbnMoc2VsZiwgb3RoZXIpKSB7CiAgICAgICAgICAgIHVpbnQgcmVwbGFjZUluZGV4ID0gc2VsZi5tZW1iZXJJbmRpY2VzW290aGVyXTsKICAgICAgICAgICAgYnl0ZSBsYXN0TWVtYmVyID0gc2VsZi5tZW1iZXJzW2xlbmd0aChzZWxmKS0xXTsKICAgICAgICAgICAgLy8gb3ZlcndyaXRlIG90aGVyIHdpdGggdGhlIGxhc3QgbWVtYmVyIGFuZCByZW1vdmUgbGFzdCBtZW1iZXIKICAgICAgICAgICAgc2VsZi5tZW1iZXJzW3JlcGxhY2VJbmRleC0xXSA9IGxhc3RNZW1iZXI7CiAgICAgICAgICAgIHNlbGYubWVtYmVycy5sZW5ndGgtLTsKICAgICAgICAgICAgLy8gcmVmbGVjdCB0aGlzIGNoYW5nZSBpbiB0aGUgaW5kaWNlcwogICAgICAgICAgICBzZWxmLm1lbWJlckluZGljZXNbbGFzdE1lbWJlcl0gPSByZXBsYWNlSW5kZXg7CiAgICAgICAgICAgIGRlbGV0ZSBzZWxmLm1lbWJlckluZGljZXNbb3RoZXJdOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjb250YWlucyhieXRlU2V0IHN0b3JhZ2Ugc2VsZiwgYnl0ZSBvdGhlcikgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzZWxmLm1lbWJlckluZGljZXNbb3RoZXJdID4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBsZW5ndGgoYnl0ZVNldCBzdG9yYWdlIHNlbGYpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gc2VsZi5tZW1iZXJzLmxlbmd0aDsKICAgIH0KCgogICAgLy8gYnl0ZXMzMiBzZXQKICAgIHN0cnVjdCBieXRlczMyU2V0IHsKICAgICAgICBieXRlczMyW10gbWVtYmVyczsKICAgICAgICBtYXBwaW5nKGJ5dGVzMzIgPT4gdWludCkgbWVtYmVySW5kaWNlczsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnNlcnQoYnl0ZXMzMlNldCBzdG9yYWdlIHNlbGYsIGJ5dGVzMzIgb3RoZXIpIHB1YmxpYyB7CiAgICAgICAgaWYgKCFjb250YWlucyhzZWxmLCBvdGhlcikpIHsKICAgICAgICAgICAgYXNzZXJ0KGxlbmd0aChzZWxmKSA8IDIqKjI1Ni0xKTsKICAgICAgICAgICAgc2VsZi5tZW1iZXJzLnB1c2gob3RoZXIpOwogICAgICAgICAgICBzZWxmLm1lbWJlckluZGljZXNbb3RoZXJdID0gbGVuZ3RoKHNlbGYpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmUoYnl0ZXMzMlNldCBzdG9yYWdlIHNlbGYsIGJ5dGVzMzIgb3RoZXIpIHB1YmxpYyB7CiAgICAgICAgaWYgKGNvbnRhaW5zKHNlbGYsIG90aGVyKSkgewogICAgICAgICAgICB1aW50IHJlcGxhY2VJbmRleCA9IHNlbGYubWVtYmVySW5kaWNlc1tvdGhlcl07CiAgICAgICAgICAgIGJ5dGVzMzIgbGFzdE1lbWJlciA9IHNlbGYubWVtYmVyc1tsZW5ndGgoc2VsZiktMV07CiAgICAgICAgICAgIC8vIG92ZXJ3cml0ZSBvdGhlciB3aXRoIHRoZSBsYXN0IG1lbWJlciBhbmQgcmVtb3ZlIGxhc3QgbWVtYmVyCiAgICAgICAgICAgIHNlbGYubWVtYmVyc1tyZXBsYWNlSW5kZXgtMV0gPSBsYXN0TWVtYmVyOwogICAgICAgICAgICBzZWxmLm1lbWJlcnMubGVuZ3RoLS07CiAgICAgICAgICAgIC8vIHJlZmxlY3QgdGhpcyBjaGFuZ2UgaW4gdGhlIGluZGljZXMKICAgICAgICAgICAgc2VsZi5tZW1iZXJJbmRpY2VzW2xhc3RNZW1iZXJdID0gcmVwbGFjZUluZGV4OwogICAgICAgICAgICBkZWxldGUgc2VsZi5tZW1iZXJJbmRpY2VzW290aGVyXTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY29udGFpbnMoYnl0ZXMzMlNldCBzdG9yYWdlIHNlbGYsIGJ5dGVzMzIgb3RoZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc2VsZi5tZW1iZXJJbmRpY2VzW290aGVyXSA+IDA7CiAgICB9CgogICAgZnVuY3Rpb24gbGVuZ3RoKGJ5dGVzMzJTZXQgc3RvcmFnZSBzZWxmKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVycy5sZW5ndGg7CiAgICB9Cn0KCmNvbnRyYWN0IFByb3ZlciB7CiAgICAvLyBhdHRhY2ggbGlicmFyeQogICAgdXNpbmcgU2V0cyBmb3IgU2V0cy5hZGRyZXNzU2V0OwogICAgdXNpbmcgU2V0cyBmb3IgU2V0cy5ieXRlczMyU2V0OwoKICAgIC8vIHN0b3JhZ2UgdmFycwogICAgYWRkcmVzcyBvd25lcjsKICAgIFNldHMuYWRkcmVzc1NldCB1c2VyczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBBY2NvdW50KSBpbnRlcm5hbCBhY2NvdW50czsKCiAgICAvLyBzdHJ1Y3RzCiAgICBzdHJ1Y3QgQWNjb3VudCB7CiAgICAgICAgU2V0cy5ieXRlczMyU2V0IGVudHJpZXM7CiAgICAgICAgbWFwcGluZyhieXRlczMyID0+IEVudHJ5KSB2YWx1ZXM7CiAgICB9CgogICAgc3RydWN0IEVudHJ5IHsKICAgICAgICB1aW50IHRpbWU7CiAgICAgICAgdWludCBzdGFrZWQ7CiAgICB9CgogICAgLy8gY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIFByb3ZlcigpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8vIGZhbGxiYWNrOiBhbGxvdyBpbnRlcm5hbCBjYWxscwogICAgZnVuY3Rpb24oKSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKCEgdGhpcy5kZWxlZ2F0ZWNhbGwobXNnLmRhdGEpKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgIH0KCgogICAgLy8gbW9kaWZpZXIgdG8gY2hlY2sgaWYgYSB0YXJnZXQgYWRkcmVzcyBoYXMgYSBwYXJ0aWN1bGFyIGVudHJ5CiAgICBtb2RpZmllciBlbnRyeUV4aXN0cyhhZGRyZXNzIHRhcmdldCwgYnl0ZXMzMiBkYXRhSGFzaCwgYm9vbCBleGlzdHMpIHsKICAgICAgICBhc3NlcnQoYWNjb3VudHNbdGFyZ2V0XS5lbnRyaWVzLmNvbnRhaW5zKGRhdGFIYXNoKSA9PSBleGlzdHMpOwogICAgICAgIF87CiAgICB9CgogICAgLy8gZXh0ZXJuYWwgZnVuY3Rpb25zCiAgICAvLyBhbGxvdyBhY2Nlc3MgdG8gb3VyIHN0cnVjdHMgdmlhIGZ1bmN0aW9ucyB3aXRoIGNvbnZlbmllbnQgcmV0dXJuIHZhbHVlcwogICAgZnVuY3Rpb24gcmVnaXN0ZXJlZFVzZXJzKCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50IG51bWJlcl91bmlxdWVfYWRkcmVzc2VzLCBhZGRyZXNzW10gdW5pcXVlX2FkZHJlc3NlcykgewogICAgICAgIHJldHVybiAodXNlcnMubGVuZ3RoKCksIHVzZXJzLm1lbWJlcnMpOwogICAgfQogICAgZnVuY3Rpb24gdXNlckVudHJpZXMoYWRkcmVzcyB0YXJnZXQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoYnl0ZXMzMltdKSB7CiAgICAgICAgcmV0dXJuIGFjY291bnRzW3RhcmdldF0uZW50cmllcy5tZW1iZXJzOwogICAgfQogICAgZnVuY3Rpb24gZW50cnlJbmZvcm1hdGlvbihhZGRyZXNzIHRhcmdldCwgYnl0ZXMzMiBkYXRhSGFzaCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zIChib29sIHByb3ZlZCwgdWludCB0aW1lLCB1aW50IHN0YWtlZCkgewogICAgICAgIHJldHVybiAoYWNjb3VudHNbdGFyZ2V0XS5lbnRyaWVzLmNvbnRhaW5zKGRhdGFIYXNoKSwKICAgICAgICAgICAgICAgIGFjY291bnRzW3RhcmdldF0udmFsdWVzW2RhdGFIYXNoXS50aW1lLAogICAgICAgICAgICAgICAgYWNjb3VudHNbdGFyZ2V0XS52YWx1ZXNbZGF0YUhhc2hdLnN0YWtlZCk7CiAgICB9CgogICAgLy8gcHVibGljIGZ1bmN0aW9ucwogICAgLy8gYWRkaW5nIGVudHJpZXMKICAgIGZ1bmN0aW9uIGFkZEVudHJ5KGJ5dGVzMzIgZGF0YUhhc2gpCiAgICAgICAgcHVibGljCiAgICAgICAgcGF5YWJsZQogICAgICAgIGVudHJ5RXhpc3RzKG1zZy5zZW5kZXIsIGRhdGFIYXNoLCBmYWxzZSl7CiAgICAgICAgdXNlcnMuaW5zZXJ0KG1zZy5zZW5kZXIpOwogICAgICAgIGFjY291bnRzW21zZy5zZW5kZXJdLmVudHJpZXMuaW5zZXJ0KGRhdGFIYXNoKTsKICAgICAgICBhY2NvdW50c1ttc2cuc2VuZGVyXS52YWx1ZXNbZGF0YUhhc2hdID0gRW50cnkobm93LCBtc2cudmFsdWUpOwogICAgfQoKICAgIC8vIGRlbGV0aW5nIGVudHJpZXMKICAgIGZ1bmN0aW9uIGRlbGV0ZUVudHJ5KGJ5dGVzMzIgZGF0YUhhc2gpCiAgICAgICAgcHVibGljCiAgICAgICAgZW50cnlFeGlzdHMobXNnLnNlbmRlciwgZGF0YUhhc2gsIHRydWUpIHsKICAgICAgICB1aW50IHJlYmF0ZSA9IGFjY291bnRzW21zZy5zZW5kZXJdLnZhbHVlc1tkYXRhSGFzaF0uc3Rha2VkOwogICAgICAgIC8vIHVwZGF0ZSB1c2VyIGFjY291bnQKICAgICAgICBkZWxldGUgYWNjb3VudHNbbXNnLnNlbmRlcl0udmFsdWVzW2RhdGFIYXNoXTsKICAgICAgICBhY2NvdW50c1ttc2cuc2VuZGVyXS5lbnRyaWVzLnJlbW92ZShkYXRhSGFzaCk7CiAgICAgICAgLy8gZGVsZXRlIGZyb20gdXNlcnMgaWYgdGhpcyB3YXMgdGhlIHVzZXIncyBsYXN0IGVudHJ5CiAgICAgICAgaWYgKGFjY291bnRzW21zZy5zZW5kZXJdLmVudHJpZXMubGVuZ3RoKCkgPT0gMCkgewogICAgICAgICAgICB1c2Vycy5yZW1vdmUobXNnLnNlbmRlcik7CiAgICAgICAgfQogICAgICAgIC8vIHNlbmQgdGhlIHJlYmF0ZQogICAgICAgIGlmIChyZWJhdGUgPiAwKSBtc2cuc2VuZGVyLnRyYW5zZmVyKHJlYmF0ZSk7CiAgICB9CgogICAgLy8gYWxsb3cgb3duZXIgdG8gZGVsZXRlIGNvbnRyYWN0IGlmIG5vIGFjY291bnRzIGV4aXN0CiAgICBmdW5jdGlvbiBzZWxmRGVzdHJ1Y3QoKSBwdWJsaWMgewogICAgICAgIGlmICgobXNnLnNlbmRlciA9PSBvd25lcikgJiYgKHVzZXJzLmxlbmd0aCgpID09IDApKSB7CiAgICAgICAgICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgICAgICAgfQogICAgfQp9'.
	

]
