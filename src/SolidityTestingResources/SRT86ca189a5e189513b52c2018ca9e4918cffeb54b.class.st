Class {
	#name : #SRT86ca189a5e189513b52c2018ca9e4918cffeb54b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT86ca189a5e189513b52c2018ca9e4918cffeb54b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovLyBWRVJTSU9OIExBVkEoSSkKCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBoZXJlJ3MgaG93IHRoaXMgd29ya3M6Ci8vIHRoZSBjdXJyZW50IGFtb3VudCBvZiBkaXZpZGVuZHMgZHVlIHRvIGVhY2ggdG9rZW4taG9sZGVyJ3MgIGlzOgovLyAgIHByZXZpb3VzX2R1ZSArIFsgcCh4KSAqIHQoeCkvTiBdICsgWyBwKHgrMSkgKiB0KHgrMSkvTiBdICsgLi4uCi8vICAgd2hlcmUgcCh4KSBpcyB0aGUgeCd0aCBwYXltZW50IHJlY2VpdmVkIGJ5IHRoZSBjb250cmFjdAovLyAgICAgICAgIHQoeCkgaXMgdGhlIG51bWJlciBvZiB0b2tlbnMgaGVsZCBieSB0aGUgdG9rZW4taG9sZGVyIGF0IHRoZSB0aW1lIG9mIHAoeCkKLy8gICAgICAgICBOICAgIGlzIHRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zLCB3aGljaCBuZXZlciBjaGFuZ2VzCi8vCi8vIGFzc3VtZSB0aGF0IHQoeCkgdGFrZXMgb24gMyB2YWx1ZXMsIHQoYSksIHQoYikgYW5kIHQoYyksIGR1cmluZyBwZXJpb2RzIGEsIGIsIGFuZCBjLiB0aGVuOgovLyBmYWN0b3Jpbmc6Ci8vICAgY3VycmVudF9kdWUgPSB7ICh0KGEpICogW3AoeCkgKyBwKHgrMSldIC4uLikgKwovLyAgICAgICAgICAgICAgICAgICAodChiKSAqIFtwKHkpICsgcCh5KzEpXSAuLi4pICsKLy8gICAgICAgICAgICAgICAgICAgKHQoYykgKiBbcCh6KSArIHAoeisxKV0gLi4uKSB9IC8gTgovLwovLyBvcgovLwovLyAgIGN1cnJlbnRfZHVlID0geyAodChhKSAqIHBlcmlvZF9hX2ZlZXMpICsKLy8gICAgICAgICAgICAgICAgICAgKHQoYikgKiBwZXJpb2RfYl9mZWVzKSArCi8vICAgICAgICAgICAgICAgICAgICh0KGMpICogcGVyaW9kX2NfZmVlcykgfSAvIE4KLy8KLy8gaWYgd2UgZGVzaWduYXRlIGN1cnJlbnRfZHVlICogTiBhcyBjdXJyZW50LXBvaW50cywgdGhlbgovLwovLyAgIGN1cnJlbnRQb2ludHMgPSB7ICAodChhKSAqIHBlcmlvZF9hX2ZlZXMpICsKLy8gICAgICAgICAgICAgICAgICAgICAgKHQoYikgKiBwZXJpb2RfYl9mZWVzKSArCi8vICAgICAgICAgICAgICAgICAgICAgICh0KGMpICogcGVyaW9kX2NfZmVlcykgfQovLwovLyBvciBtb3JlIHN1Y2NpY3RseSwgaWYgd2UgcmVjb21wdXRlIGN1cnJlbnQgcG9pbnRzIGJlZm9yZSBhIHRva2VuLWhvbGRlcidzIG51bWJlciBvZgovLyB0b2tlbnMsIFQsIGlzIGFib3V0IHRvIGNoYW5nZToKLy8KLy8gICBjdXJyZW50UG9pbnRzID0gcHJldmlvdXNfcG9pbnRzICsgKFQgKiBjdXJyZW50LXBlcmlvZC1mZWVzKQovLwovLyB3aGVuIHdlIHdhbnQgdG8gZG8gYSBwYXlvdXQsIHdlJ2xsIGNhbGN1bGF0ZToKLy8gIGN1cnJlbnRfZHVlID0gY3VycmVudC1wb2ludHMgLyBOCi8vCi8vIHdlJ2xsIGtlZXAgdHJhY2sgb2YgYSB0b2tlbi1ob2xkZXIncyBjdXJyZW50LXBlcmlvZC1wb2ludHMsIHdoaWNoIGlzOgovLyAgIFQgKiBjdXJyZW50LXBlcmlvZC1mZWVzCi8vIGJ5IHRha2luZyBhIHNuYXBzaG90IG9mIGZlZXMgY29sbGVjdGVkIGV4YWN0bHkgd2hlbiB0aGUgY3VycmVudCBwZXJpb2QgYmVnYW47IHRoYXQgaXMsIHRoZSB3aGVuIHRoZQovLyBudW1iZXIgb2YgdG9rZW5zIGxhc3QgY2hhbmdlZC4gdGhhdCBpcywgd2Uga2VlcCBhIHJ1bm5pbmcgY291bnQgb2YgdG90YWwgZmVlcyByZWNlaXZlZAovLwovLyAgIFRvdGFsRmVlc1JlY2VpdmVkID0gcCh4KSArIHAoeCsxKSArIHAoeCsyKQovLwovLyAod2hpY2ggaGFwcGlseSBpcyB0aGUgc2FtZSBmb3IgYWxsIHRva2VuIGhvbGRlcnMpIHRoZW4sIGJlZm9yZSBhbnkgdG9rZW4gaG9sZGVyIGNoYW5nZXMgdGhlaXIgbnVtYmVyIG9mCi8vIHRva2VucyB3ZSBjb21wdXRlIChmb3IgdGhhdCB0b2tlbiBob2xkZXIpOgovLwovLyAgZnVuY3Rpb24gY2FsY0N1clBvaW50c0ZvckFjY3QoYWNjdCkgewovLyAgICBjdXJyZW50UG9pbnRzW2FjY3RdICs9IChUb3RhbEZlZXNSZWNlaXZlZCAtIGxhc3RTbmFwc2hvdFthY2N0XSkgKiBUW2FjY3RdCi8vICAgIGxhc3RTbmFwc2hvdFthY2N0XSA9IFRvdGFsRmVlc1JlY2VpdmVkCi8vICB9Ci8vCi8vIGluIHRoZSB3aXRoZHJhdyBmY24sIGFsbCB3ZSBuZWVkIGlzOgovLwovLyAgZnVuY3Rpb24gd2l0aGRyYXcoYWNjdCkgewovLyAgICBjYWxjQ3VyUG9pbnRzRm9yQWNjdChhY2N0KTsKLy8gICAgY3VycmVudF9hbW91bnRfZHVlID0gY3VycmVudFBvaW50c1thY2N0XSAvIE4KLy8gICAgY3VycmVudFBvaW50c1thY2N0XSA9IDA7Ci8vICAgIHNlbmQoY3VycmVudF9hbW91bnRfZHVlKTsKLy8gIH0KLy8KLy8KLy8gc3BlY2lhbCBwcm92aXNpb25zIGZvciB0cmFuc2ZlcnMgZnJvbSB0aGUgb2xkIGU0cm93IGNvbnRyYWN0ICh0b2tlbi1zcGxpdCB0cmFuc2ZlcnMpCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gbm9ybWFsbHkgd2hlbiBhIG5ldyBhY2N0IGlzIGNyZWF0ZWQsIGVnIGN1eiB0b2tlbnMgYXJlIHRyYW5zZmVycmVkIGZyb20gb25lIGFjY3QgdG8gYW5vdGhlciwgd2UgZmlyc3QgY2FsbAovLyBjYWxjQ3VyUG9pbnRzRm9yQWNjdChhY2N0KSBvbiB0aGUgb2xkIGFjY3Q7IG9uIHRoZSBuZXcgYWNjdCB3ZSBzZXQ6Ci8vICBjdXJyZW50UG9pbnRzW2FjY3RdID0gMDsKLy8gIGxhc3RTbmFwc2hvdFthY2N0XSA9IFRvdGFsRmVlc1JlY2VpdmVkOwovLwovLyB0aGlzIHN0YXJ0cyB0aGUgbmV3IGFjY291bnQgd2l0aCBubyBjcmVkaXRzIGZvciBhbnkgZGl2aWRlbmRzIHRoYXQgaGF2ZSBiZWVuIGNvbGxlY3RlZCBzbyBmYXIsIHdoaWNoIGlzIHdoYXQKLy8geW91IHdvdWxkIGdlbmVyYWxseSB3YW50LiBob3dldmVyLCB0aGVyZSBpcyBhIGNhc2UgaW4gd2hpY2ggdG9rZW5zIGFyZSB0cmFuc2ZlcnJlZCBmcm9tIHRoZSBvbGQgZTRyb3cgY29udHJhY3QuCi8vIGluIHRoYXQgY2FzZSB0aGUgdG9rZW5zIHdlcmUgcmVzZXJ2ZWQgb24gdGhpcyBjb250cmFjdCBhbGwgYWxvbmcsIGFuZCB0aGV5IGVhcm4gZGl2aWRlbmRzIGV2ZW4gYmVmb3JlIHRoZXkgYXJlCi8vIGFzc2lnbmVkIHRvIGFuIGFjY291bnQuIHNvIGZvciB0b2tlbi1zcGxpdCB0cmFuc2ZlcnM6Ci8vICBjdXJyZW50UG9pbnRzW2FjY3RdID0gMDsKLy8gIGxhc3RTbmFwc2hvdFthY2N0XSA9IDA7Ci8vCi8vIHRoZW4gaW1tZWRpYXRlbHkgY2FsbCBjYWxjQ3VyUG9pbnRzRm9yQWNjdChhY2N0KSBmb3IgdGhlIG5ldyB0b2tlbi1zcGxpdCBhY2NvdW50LiBoZSB3aWxsIGdldCBjcmVkaXQKLy8gZm9yIGFsbCB0aGUgYWNjdW11bGF0ZWQgcG9pbnRzLCBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGltZS4KLy8KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgovLyBBYnN0cmFjdCBjb250cmFjdCBmb3IgdGhlIGZ1bGwgRVJDIDIwIFRva2VuIHN0YW5kYXJkCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIEFCU1RSQUNUIHN0YW5kYXJkIHRva2VuIGNsYXNzCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjb250cmFjdCBUb2tlbiB7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vICBFNFJvd1Jld2FyZHMgLSBhYnN0cmFjdCBlNCBkaXZpZGVuZCBjb250cmFjdAovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjb250cmFjdCBFNExhdmFSZXdhcmRzCnsKICAgICAgICBmdW5jdGlvbiBjaGVja0RpdmlkZW5kcyhhZGRyZXNzIF9hZGRyKSBjb25zdGFudCByZXR1cm5zKHVpbnQgX2Ftb3VudCk7CiAgICAgICAgZnVuY3Rpb24gd2l0aGRyYXdEaXZpZGVuZHMoKSBwdWJsaWMgcmV0dXJucyAodWludCBuYW1vdW50KTsKICAgICAgICBmdW5jdGlvbiB0cmFuc2ZlckRpdmlkZW5kcyhhZGRyZXNzIF90bykgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgICAgICBmdW5jdGlvbiBnZXRBY2NvdW50SW5mbyhhZGRyZXNzIF9hZGRyKSBjb25zdGFudCByZXR1cm5zKHVpbnQgX3Rva2VucywgdWludCBfc25hcHNob3QsIHVpbnQgX3BvaW50cyk7Cgp9CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyAgRTRMYXZhT3B0aW4gLSBhYnN0cmFjdCBlNCBvcHRpbiBjb250cmFjdAovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjb250cmFjdCBFNExhdmFPcHRJbgp7CiAgICAgICAgZnVuY3Rpb24gb3B0SW5Gcm9tQ2xhc3NpYygpIHB1YmxpYzsKfQoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vICBFNFJPVyAoTEFWQSkgLSB0b2tlbiBjb250cmFjdAovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjb250cmFjdCBFNExhdmEgaXMgVG9rZW4sIEU0TGF2YVJld2FyZHMsIEU0TGF2YU9wdEluIHsKICAgICAgICBldmVudCBTdGF0RXZlbnQoc3RyaW5nIG1zZyk7CiAgICAgICAgZXZlbnQgU3RhdEV2ZW50SShzdHJpbmcgbXNnLCB1aW50IHZhbCk7CgogICAgICAgIGVudW0gU2V0dGluZ1N0YXRlVmFsdWUgIHtkZWJ1ZywgbG9ja2VkUmVsZWFzZX0KCiAgICAgICAgc3RydWN0IHRva2VuQWNjb3VudCB7CiAgICAgICAgICAgICAgICBib29sIGFsbG9jZWQ7ICAgICAgIC8vIGZsYWcgdG8gYXNjZXJ0IHByaW9yIGFsbG9jYXRpb24KICAgICAgICAgICAgICAgIHVpbnQgdG9rZW5zOyAgICAgICAgLy8gbnVtIHRva2VucyBjdXJyZW50bHkgaGVsZCBpbiB0aGlzIGFjY3QKICAgICAgICAgICAgICAgIHVpbnQgY3VycmVudFBvaW50czsgLy8gdXBkYXRlZCBiZWZvcmUgdG9rZW4gYmFsYW5jZSBjaGFuZ2VzLCBvciBiZWZvcmUgYSB3aXRoZHJhd2FsLiBjcmVkaXQgZm9yIG93bmluZyB0b2tlbnMKICAgICAgICAgICAgICAgIHVpbnQgbGFzdFNuYXBzaG90OyAgLy8gc25hcHNob3Qgb2YgZ2xvYmFsIFRvdGFsUG9pbnRzLCBsYXN0IHRpbWUgd2UgdXBkYXRlZCB0aGlzIGFjY3QncyBjdXJyZW50UG9pbnRzCiAgICAgICAgfQoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gIGRhdGEgc3RvcmFnZQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgdWludCBjb25zdGFudCBOdW1PcmlnVG9rZW5zICAgICAgICAgPSA1NzYyOyAgIC8vIG51bWJlciBvZiBvbGQgdG9rZW5zLCBmcm9tIG9yaWdpbmFsIHRva2VuIGNvbnRyYWN0CiAgICAgICAgdWludCBjb25zdGFudCBOZXdUb2tlbnNQZXJPcmlnVG9rZW4gPSAxMDAwMDA7IC8vIGhvdyBtYW55IG5ldyB0b2tlbnMgYXJlIGNyZWF0ZWQgZm9yIGVhY2ggZnJvbSBvcmlnaW5hbCB0b2tlbgogICAgICAgIHVpbnQgY29uc3RhbnQgTmV3VG9rZW5TdXBwbHkgICAgICAgID0gNTc2MiAqIDEwMDAwMDsKICAgICAgICB1aW50IHB1YmxpYyBudW1Ub2tzU3dpdGNoZWRPdmVyOyAgICAgICAgICAgICAgLy8gY291bnQgb2xkIHRva2VucyB0aGF0IGhhdmUgYmVlbiBjb252ZXJ0ZWQKICAgICAgICB1aW50IHB1YmxpYyBob2xkb3ZlckJhbGFuY2U7ICAgICAgICAgICAgICAgICAgLy8gZnVuZHMgcmVjZWl2ZWQsIGJ1dCBub3QgeWV0IGRpc3RyaWJ1dGVkCiAgICAgICAgdWludCBwdWJsaWMgVG90YWxGZWVzUmVjZWl2ZWQ7ICAgICAgICAgICAgICAgIC8vIHRvdGFsIGZlZXMgcmVjZWl2ZWQgZnJvbSBwYXJ0bmVyIGNvbnRyYWN0KHMpCgogICAgICAgIGFkZHJlc3MgcHVibGljIGRldmVsb3BlcnM7ICAgICAgICAgICAgICAgICAgICAvLyBkZXZlbG9wZXJzIHRva2VuIGhvbGRpbmcgYWRkcmVzcwogICAgICAgIGFkZHJlc3MgcHVibGljIG93bmVyOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXBsb3llciBleGVjdXRvcgogICAgICAgIGFkZHJlc3MgcHVibGljIG9sZEU0OyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGRyIG9mIG9sZCBlNCB0b2tlbiBjb250cmFjdAogICAgICAgIGFkZHJlc3MgcHVibGljIG9sZEU0UmVjeWNsZUJpbjsgICAgICAgICAgICAgICAvLyBhZGRyIHRvIHRyYW5zZmVyIG9sZCB0b2tlbnMKCiAgICAgICAgdWludCBwdWJsaWMgZGVjaW1hbHM7CiAgICAgICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CgogICAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdG9rZW5BY2NvdW50KSBob2xkZXJBY2NvdW50czsgICAgICAgICAgLy8gd2hvIGhvbGRzIGhvdyBtYW55IHRva2VucyAoaGlnaCB0d28gYnl0ZXMgY29udGFpbiBjdXJQYXlJZCkKICAgICAgICBtYXBwaW5nICh1aW50ID0+IGFkZHJlc3MpIGhvbGRlckluZGV4ZXM7ICAgICAgICAgICAgICAgICAgIC8vIGZvciBpdGVyYXRpb24gdGhydSBob2xkZXIKICAgICAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7IC8vIGFwcHJvdmFscwogICAgICAgIHVpbnQgcHVibGljIG51bUFjY291bnRzOwoKICAgICAgICB1aW50IHB1YmxpYyBwYXlvdXRUaHJlc2hvbGQ7ICAgICAgICAgICAgICAgICAgLy8gbm8gd2l0aGRyYXdhbHMgbGVzcyB0aGFuIHRoaXMgYW1vdW50LCB0byBhdm9pZCByZW1haW5kZXJzCiAgICAgICAgdWludCBwdWJsaWMgcndHYXM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJld2FyZCBnYXMKICAgICAgICB1aW50IHB1YmxpYyBvcHRJblhmZXJHYXM7ICAgICAgICAgICAgICAgICAgICAgLy8gZ2FzIHVzZWQgd2hlbiBvcHRJbkZyb21DbGFzc2ljIGNhbGxzIHhmZXIgb24gb2xkIGNvbnRyYWN0CiAgICAgICAgdWludCBwdWJsaWMgb3B0SW5GY25NaW5HYXM7ICAgICAgICAgICAgICAgICAgIC8vIGdhcyB3ZSBuZWVkIGZvciB0aGUgb3B0SW5Gcm9tQ2xhc3NpYyBmY24sICpleGNsdWRpbmcqIG9wdEluWGZlckdhcwogICAgICAgIHVpbnQgcHVibGljIHZlc3RUaW1lID0gMTUyNTIxOTIwMTsgICAgICAgICAgICAvLyAxIHllYXIgcGFzdCBzYWxlIHZlc3QgZGV2ZWxvcGVyIHRva2VucwoKICAgICAgICBTZXR0aW5nU3RhdGVWYWx1ZSBwdWJsaWMgc2V0dGluZ3NTdGF0ZTsKCgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gY29udHJhY3QgY29uc3RydWN0b3IKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIEU0TGF2YSgpCiAgICAgICAgewogICAgICAgICAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgICAgICAgICAgZGV2ZWxvcGVycyA9IG1zZy5zZW5kZXI7CiAgICAgICAgICAgICAgICBkZWNpbWFscyA9IDI7CiAgICAgICAgICAgICAgICBzeW1ib2wgPSAiRTRST1ciOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyB1c2UgdGhpcyB0byByZXNldCBldmVyeXRoaW5nLCB3aWxsIG5ldmVyIGJlIGNhbGxlZCBhZnRlciBsb2NrUmVsZWFzZQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gYXBwbHlTZXR0aW5ncyhTZXR0aW5nU3RhdGVWYWx1ZSBxU3RhdGUsIHVpbnQgX3RocmVzaG9sZCwgdWludCBfcncsIHVpbnQgX29wdFhmZXJHYXMsIHVpbnQgX29wdEZjbkdhcyApCiAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgICAgICAgICAvLyB0aGVzZSBzZXR0aW5ncyBhcmUgcGVybWFuZW50bHkgdHdlYWthYmxlIGZvciBwZXJmb3JtYW5jZSBhZGp1c3RtZW50cwogICAgICAgICAgICAgICAgcGF5b3V0VGhyZXNob2xkID0gX3RocmVzaG9sZDsKICAgICAgICAgICAgICAgIHJ3R2FzID0gX3J3OwogICAgICAgICAgICAgICAgb3B0SW5YZmVyR2FzID0gX29wdFhmZXJHYXM7CiAgICAgICAgICAgICAgICBvcHRJbkZjbk1pbkdhcyA9IF9vcHRGY25HYXM7CgogICAgICAgICAgICAgICAgLy8gdGhpcyBmaXJzdCB0ZXN0IGNoZWNrcyBpZiBhbHJlYWR5IGxvY2tlZAogICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzU3RhdGUgPT0gU2V0dGluZ1N0YXRlVmFsdWUubG9ja2VkUmVsZWFzZSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgICAgIHNldHRpbmdzU3RhdGUgPSBxU3RhdGU7CgogICAgICAgICAgICAgICAgLy8gdGhpcyBzZWNvbmQgdGVzdCBhbGxvd3MgbG9ja2luZyB3aXRob3V0IGNoYW5naW5nIG90aGVyIHBlcm1hbmVudCBzZXR0aW5ncwogICAgICAgICAgICAgICAgLy8gV0FSTklORywgTUFLRSBTVVJFIFlPVVInUkUgSEFQUFkgV0lUSCBBTEwgU0VUVElOR1MKICAgICAgICAgICAgICAgIC8vIEJFRk9SRSBMT0NLSU5HCgogICAgICAgICAgICAgICAgaWYgKHFTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWRSZWxlYXNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiTG9ja2luZyEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIHplcm8gb3V0IGFsbCB0b2tlbiBob2xkZXJzLgogICAgICAgICAgICAgICAgLy8gbGVhdmUgYWxsb2NlZCBvbiwgbGVhdmUgbnVtIGFjY291bnRzCiAgICAgICAgICAgICAgICAvLyBjYW50IGRlbGV0ZSB0aGVtIGFueXdheXMKCiAgICAgICAgICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBudW1BY2NvdW50czsgaSsrICkgewogICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIGEgPSBob2xkZXJJbmRleGVzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbYV0udG9rZW5zID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob2xkZXJBY2NvdW50c1thXS5jdXJyZW50UG9pbnRzID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob2xkZXJBY2NvdW50c1thXS5sYXN0U25hcHNob3QgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbnVtVG9rc1N3aXRjaGVkT3ZlciA9IDA7CgogICAgICAgICAgICAgICAgaWYgKHRoaXMuYmFsYW5jZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvd25lci5jYWxsLmdhcyhyd0dhcykudmFsdWUodGhpcy5iYWxhbmNlKSgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiRVJST1IhIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIm9rIik7CgogICAgICAgIH0KCgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIGFsbG9jYXRlIGEgbmV3IGFjY291bnQgYnkgc2V0dGluZyBhbGxvYyB0byB0cnVlCiAgICAgICAgLy8gYWRkIGhvbGRlciBpbmRleCwgYnVtcCB0aGUgbnVtIGFjY291bnRzCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gYWRkQWNjb3VudChhZGRyZXNzIF9hZGRyKSBpbnRlcm5hbCAgewogICAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbX2FkZHJdLmFsbG9jZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbX2FkZHJdLnRva2VucyA9IDA7CiAgICAgICAgICAgICAgICBob2xkZXJBY2NvdW50c1tfYWRkcl0uY3VycmVudFBvaW50cyA9IDA7CiAgICAgICAgICAgICAgICBob2xkZXJBY2NvdW50c1tfYWRkcl0ubGFzdFNuYXBzaG90ID0gVG90YWxGZWVzUmVjZWl2ZWQ7CiAgICAgICAgICAgICAgICBob2xkZXJJbmRleGVzW251bUFjY291bnRzKytdID0gX2FkZHI7CiAgICAgICAgfQoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIEJFR0lOIEVSQy0yMCBmcm9tIFN0YW5kYXJkVG9rZW4KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkKICAgICAgICB7CiAgICAgICAgICAgICAgICBzdXBwbHkgPSBOZXdUb2tlblN1cHBseTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBzZW5kZXIgdHJhbnNmZXJzIHRva2VucyB0byBhIG5ldyBhY2N0CiAgICAgICAgLy8gZG8gbm90IHVzZSB0aGlzIGZjbiBmb3IgYSB0b2tlbi1zcGxpdCB0cmFuc2ZlciBmcm9tIHRoZSBvbGQgdG9rZW4gY29udHJhY3QhCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgobXNnLnNlbmRlciA9PSBkZXZlbG9wZXJzKQogICAgICAgICAgICAgICAgICAgICAgICAmJiAgKG5vdyA8IHZlc3RUaW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvL3N0YXRFdmVudCgiVG9rZW5zIG5vdCB5ZXQgdmVzdGVkLiIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy9EZWZhdWx0IGFzc3VtZXMgdG90YWxTdXBwbHkgY2FuJ3QgYmUgb3ZlciBtYXggKDJeMjU2IC0gMSkuCiAgICAgICAgICAgICAgICAvL0lmIHlvdXIgdG9rZW4gbGVhdmVzIG91dCB0b3RhbFN1cHBseSBhbmQgY2FuIGlzc3VlIG1vcmUgdG9rZW5zIGFzIHRpbWUgZ29lcyBvbiwgeW91IG5lZWQgdG8gY2hlY2sgaWYgaXQgZG9lc24ndCB3cmFwLgogICAgICAgICAgICAgICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuCiAgICAgICAgICAgICAgICAvL2lmIChob2xkZXJBY2NvdW50c1ttc2cuc2VuZGVyXS50b2tlbnMgPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBob2xkZXJBY2NvdW50c1tfdG9dKSB7CiAgICAgICAgICAgICAgICBpZiAoaG9sZGVyQWNjb3VudHNbbXNnLnNlbmRlcl0udG9rZW5zID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgLy9maXJzdCBjcmVkaXQgc2VuZGVyIHdpdGggcG9pbnRzIGFjY3J1ZWQgc28gZmFyLi4gbXVzdCBkbyB0aGlzIGJlZm9yZSBudW1iZXIgb2YgaGVsZCB0b2tlbnMgY2hhbmdlcwogICAgICAgICAgICAgICAgICAgIGNhbGNDdXJQb2ludHNGb3JBY2N0KG1zZy5zZW5kZXIpOwogICAgICAgICAgICAgICAgICAgIGhvbGRlckFjY291bnRzW21zZy5zZW5kZXJdLnRva2VucyAtPSBfdmFsdWU7CgogICAgICAgICAgICAgICAgICAgIGlmICghaG9sZGVyQWNjb3VudHNbX3RvXS5hbGxvY2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEFjY291bnQoX3RvKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy9jcmVkaXQgZGVzdGluYXRpb24gYWNjdCB3aXRoIHBvaW50cyBhY2NydWVkIHNvIGZhci4uIG11c3QgZG8gdGhpcyBiZWZvcmUgbnVtYmVyIG9mIGhlbGQgdG9rZW5zIGNoYW5nZXMKICAgICAgICAgICAgICAgICAgICBjYWxjQ3VyUG9pbnRzRm9yQWNjdChfdG8pOwogICAgICAgICAgICAgICAgICAgIGhvbGRlckFjY291bnRzW190b10udG9rZW5zICs9IF92YWx1ZTsKCiAgICAgICAgICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKCiAgICAgICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICBpZiAoKF9mcm9tID09IGRldmVsb3BlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgICYmICAobm93IDwgdmVzdFRpbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vc3RhdEV2ZW50KCJUb2tlbnMgbm90IHlldCB2ZXN0ZWQuIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL3NhbWUgYXMgYWJvdmUuIFJlcGxhY2UgdGhpcyBsaW5lIHdpdGggdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBwcm90ZWN0IGFnYWluc3Qgd3JhcHBpbmcgdWludHMuCiAgICAgICAgICAgICAgICAvL2lmIChob2xkZXJBY2NvdW50c1tfZnJvbV0udG9rZW5zID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgaG9sZGVyQWNjb3VudHNbX3RvXS50b2tlbnMgKyBfdmFsdWUgPiBob2xkZXJBY2NvdW50c1tfdG9dLnRva2VucykgewogICAgICAgICAgICAgICAgaWYgKGhvbGRlckFjY291bnRzW19mcm9tXS50b2tlbnMgPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CgogICAgICAgICAgICAgICAgICAgIGNhbGNDdXJQb2ludHNGb3JBY2N0KF9mcm9tKTsKICAgICAgICAgICAgICAgICAgICBob2xkZXJBY2NvdW50c1tfZnJvbV0udG9rZW5zIC09IF92YWx1ZTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCFob2xkZXJBY2NvdW50c1tfdG9dLmFsbG9jZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWRkQWNjb3VudChfdG8pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvL2NyZWRpdCBkZXN0aW5hdGlvbiBhY2N0IHdpdGggcG9pbnRzIGFjY3J1ZWQgc28gZmFyLi4gbXVzdCBkbyB0aGlzIGJlZm9yZSBudW1iZXIgb2YgaGVsZCB0b2tlbnMgY2hhbmdlcwogICAgICAgICAgICAgICAgICAgIGNhbGNDdXJQb2ludHNGb3JBY2N0KF90byk7CiAgICAgICAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbX3RvXS50b2tlbnMgKz0gX3ZhbHVlOwoKICAgICAgICAgICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgICAgICAgICBiYWxhbmNlID0gaG9sZGVyQWNjb3VudHNbX293bmVyXS50b2tlbnM7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgICAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgICAgIH0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBFTkQgRVJDMjAKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gY2FsYyBjdXJyZW50IHBvaW50cyBmb3IgYSB0b2tlbiBob2xkZXI7IHRoYXQgaXMsIHBvaW50cyB0aGF0IGFyZSBkdWUgdG8gdGhpcyB0b2tlbiBob2xkZXIgZm9yIGFsbCBkaXZpZGVuZHMKICAgICAgICAvLyByZWNlaXZlZCBieSB0aGUgY29udHJhY3QgZHVyaW5nIHRoZSBjdXJyZW50ICJwZXJpb2QiLiB0aGUgcGVyaW9kIGJlZ2FuIHRoZSBsYXN0IHRpbWUgdGhpcyBmY24gd2FzIGNhbGxlZCwgYXQgd2hpY2gKICAgICAgICAvLyB0aW1lIHdlIHVwZGF0ZWQgdGhlIGFjY291bnQncyBzbmFwc2hvdCBvZiB0aGUgcnVubmluZyBwb2ludCBjb3VudCwgVG90YWxGZWVzUmVjZWl2ZWQuIGR1cmluZyB0aGUgcGVyaW9kIHRoZSBhY2NvdW50J3MKICAgICAgICAvLyBudW1iZXIgb2YgdG9rZW5zIG11c3Qgbm90IGhhdmUgY2hhbmdlZC4gc28gYWx3YXlzIGNhbGwgdGhpcyBmY24gYmVmb3JlIGNoYW5naW5nIHRoZSBudW1iZXIgb2YgdG9rZW5zLgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiBjYWxjQ3VyUG9pbnRzRm9yQWNjdChhZGRyZXNzIF9hY2N0KSBpbnRlcm5hbCB7CiAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbX2FjY3RdLmN1cnJlbnRQb2ludHMgKz0gKFRvdGFsRmVlc1JlY2VpdmVkIC0gaG9sZGVyQWNjb3VudHNbX2FjY3RdLmxhc3RTbmFwc2hvdCkgKiBob2xkZXJBY2NvdW50c1tfYWNjdF0udG9rZW5zOwogICAgICAgICAgICAgIGhvbGRlckFjY291bnRzW19hY2N0XS5sYXN0U25hcHNob3QgPSBUb3RhbEZlZXNSZWNlaXZlZDsKICAgICAgICB9CgoKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBhY2NlcHQgcGF5bWVudCBmcm9tIGEgcGFydG5lciBjb250cmFjdAogICAgICAgIC8vIGZ1bmRzIHNlbnQgaGVyZSBhcmUgYWRkZWQgdG8gVG90YWxGZWVzUmVjZWl2ZWQKICAgICAgICAvLyBXQVJOSU5HISBETyBOT1QgQ0FMTCBUSElTIEZVTkNUSU9OIExFU1QgWU9VIExPU0UgWU9VUiBNT05FWQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgICAgICAgICAgaG9sZG92ZXJCYWxhbmNlICs9IG1zZy52YWx1ZTsKICAgICAgICAgICAgICAgIFRvdGFsRmVlc1JlY2VpdmVkICs9IG1zZy52YWx1ZTsKICAgICAgICAgICAgICAgIFN0YXRFdmVudEkoIlBheW1lbnQiLCBtc2cudmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gb25lIG5ldmVyIGtub3dzIGlmIHRoaXMgd2lsbCBjb21lIGluIGhhbmR5LgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGJsYWNrSG9sZSgpIHBheWFibGUgewogICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgiYWRqdXN0ZWQiLCBtc2cudmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIHNlbmRlciB3aXRoZHJhdyBlbnRpcmUgcmV3YXJkcy9kaXZpZGVuZHMKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gd2l0aGRyYXdEaXZpZGVuZHMoKSBwdWJsaWMgcmV0dXJucyAodWludCBfYW1vdW50KQogICAgICAgIHsKICAgICAgICAgICAgICAgIGNhbGNDdXJQb2ludHNGb3JBY2N0KG1zZy5zZW5kZXIpOwoKICAgICAgICAgICAgICAgIF9hbW91bnQgPSBob2xkZXJBY2NvdW50c1ttc2cuc2VuZGVyXS5jdXJyZW50UG9pbnRzIC8gTmV3VG9rZW5TdXBwbHk7CiAgICAgICAgICAgICAgICBpZiAoX2Ftb3VudCA8PSBwYXlvdXRUaHJlc2hvbGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgibG93IEJhbGFuY2UiLCBfYW1vdW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChtc2cuc2VuZGVyID09IGRldmVsb3BlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgIChub3cgPCB2ZXN0VGltZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIlRva2VucyBub3QgeWV0IHZlc3RlZC4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYW1vdW50ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgX3BvaW50c1VzZWQgPSBfYW1vdW50ICogTmV3VG9rZW5TdXBwbHk7CiAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRlckFjY291bnRzW21zZy5zZW5kZXJdLmN1cnJlbnRQb2ludHMgLT0gX3BvaW50c1VzZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRvdmVyQmFsYW5jZSAtPSBfYW1vdW50OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1zZy5zZW5kZXIuY2FsbC5nYXMocndHYXMpLnZhbHVlKF9hbW91bnQpKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gYWxsb3cgc2VuZGVyIHRvIHRyYW5zZmVyIGRpdmlkZW5kcwogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiB0cmFuc2ZlckRpdmlkZW5kcyhhZGRyZXNzIF90bykgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgobXNnLnNlbmRlciA9PSBkZXZlbG9wZXJzKQogICAgICAgICAgICAgICAgICAgICAgICAmJiAgKG5vdyA8IHZlc3RUaW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvL3N0YXRFdmVudCgiVG9rZW5zIG5vdCB5ZXQgdmVzdGVkLiIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYWxjQ3VyUG9pbnRzRm9yQWNjdChtc2cuc2VuZGVyKTsKICAgICAgICAgICAgICAgIGlmIChob2xkZXJBY2NvdW50c1ttc2cuc2VuZGVyXS5jdXJyZW50UG9pbnRzID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJaZXJvIGJhbGFuY2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFob2xkZXJBY2NvdW50c1tfdG9dLmFsbG9jZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWRkQWNjb3VudChfdG8pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FsY0N1clBvaW50c0ZvckFjY3QoX3RvKTsKICAgICAgICAgICAgICAgIGhvbGRlckFjY291bnRzW190b10uY3VycmVudFBvaW50cyArPSBob2xkZXJBY2NvdW50c1ttc2cuc2VuZGVyXS5jdXJyZW50UG9pbnRzOwogICAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbbXNnLnNlbmRlcl0uY3VycmVudFBvaW50cyA9IDA7CiAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIlRyYXNuZmVyZWQgRGl2aWRlbmRzIik7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgoKCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIHNldCBnYXMgZm9yIG9wZXJhdGlvbnMKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gc2V0T3BHYXModWludCBfcncsIHVpbnQgX29wdFhmZXJHYXMsIHVpbnQgX29wdEZjbkdhcykKICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lciAmJiBtc2cuc2VuZGVyICE9IGRldmVsb3BlcnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9TdGF0RXZlbnQoIm9ubHkgb3duZXIgY2FsbHMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcndHYXMgPSBfcnc7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wdEluWGZlckdhcyA9IF9vcHRYZmVyR2FzOwogICAgICAgICAgICAgICAgICAgICAgICBvcHRJbkZjbk1pbkdhcyA9IF9vcHRGY25HYXM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIGNoZWNrIHJld2FyZHMuICBwYXNzIGluIGFkZHJlc3Mgb2YgdG9rZW4gaG9sZGVyCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGNoZWNrRGl2aWRlbmRzKGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IHJldHVybnModWludCBfYW1vdW50KQogICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChob2xkZXJBY2NvdW50c1tfYWRkcl0uYWxsb2NlZCkgewogICAgICAgICAgICAgICAgICAgLy9kb24ndCBjYWxsIGNhbGNDdXJQb2ludHNGb3JBY2N0IGhlcmUsIGN1eiB0aGlzIGlzIGEgY29uc3RhbnQgZmNuCiAgICAgICAgICAgICAgICAgICB1aW50IF9jdXJyZW50UG9pbnRzID0gaG9sZGVyQWNjb3VudHNbX2FkZHJdLmN1cnJlbnRQb2ludHMgKwogICAgICAgICAgICAgICAgICAgICAgICAoKFRvdGFsRmVlc1JlY2VpdmVkIC0gaG9sZGVyQWNjb3VudHNbX2FkZHJdLmxhc3RTbmFwc2hvdCkgKiBob2xkZXJBY2NvdW50c1tfYWRkcl0udG9rZW5zKTsKICAgICAgICAgICAgICAgICAgIF9hbW91bnQgPSBfY3VycmVudFBvaW50cyAvIE5ld1Rva2VuU3VwcGx5OwoKICAgICAgICAgICAgICAgIC8vIGxvdyBiYWxhbmNlPyBsZXQgaGltIHNlZSBpdCAtRXRhbnNreQogICAgICAgICAgICAgICAgICAvLyBpZiAoX2Ftb3VudCA8PSBwYXlvdXRUaHJlc2hvbGQpIHsKICAgICAgICAgICAgICAgICAgLy8gICAgX2Ftb3VudCA9IDA7CiAgICAgICAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKCgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBzd2FwIGV4ZWN1dG9yCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX2FkZHIpCiAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIKICAgICAgICAgICAgICAgICAgICAgICAgfHwgc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWRSZWxlYXNlKQogICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICBvd25lciA9IF9hZGRyOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIHNldCBkZXZlbG9wZXJzIGFjY291bnQKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gc2V0RGV2ZWxvcGVyKGFkZHJlc3MgX2FkZHIpCiAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIKICAgICAgICAgICAgICAgICAgICAgICAgfHwgc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWRSZWxlYXNlKQogICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICBkZXZlbG9wZXJzID0gX2FkZHI7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gc2V0IG9sZEU0IEFkZHJlc3NlcwogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiBzZXRPbGRFNChhZGRyZXNzIF9vbGRFNCwgYWRkcmVzcyBfb2xkRTRSZWN5bGUpCiAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIKICAgICAgICAgICAgICAgICAgICAgICAgfHwgc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWRSZWxlYXNlKQogICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICBvbGRFNCA9IF9vbGRFNDsKICAgICAgICAgICAgICAgIG9sZEU0UmVjeWNsZUJpbiA9IF9vbGRFNFJlY3lsZTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBnZXQgYWNjb3VudCBpbmZvCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGdldEFjY291bnRJbmZvKGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IHJldHVybnModWludCBfdG9rZW5zLCB1aW50IF9zbmFwc2hvdCwgdWludCBfcG9pbnRzKQogICAgICAgIHsKICAgICAgICAgICAgICAgIF90b2tlbnMgPSBob2xkZXJBY2NvdW50c1tfYWRkcl0udG9rZW5zOwogICAgICAgICAgICAgICAgX3NuYXBzaG90ID0gaG9sZGVyQWNjb3VudHNbX2FkZHJdLmxhc3RTbmFwc2hvdDsKICAgICAgICAgICAgICAgIF9wb2ludHMgPSBob2xkZXJBY2NvdW50c1tfYWRkcl0uY3VycmVudFBvaW50czsKICAgICAgICB9CgoKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gREVCVUcgT05MWSAtIGVuZCB0aGlzIGNvbnRyYWN0LCBzdWljaWRlIHRvIGRldmVsb3BlcnMKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gaGFyYUtpcmkoKQogICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc1N0YXRlICE9IFNldHRpbmdTdGF0ZVZhbHVlLmRlYnVnKQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzsKICAgICAgICAgICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKQogICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICBzdWljaWRlKGRldmVsb3BlcnMpOwogICAgICAgIH0KCgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBPUFQgSU4gRlJPTSBDTEFTU0lDLgogICAgICAgIC8vIEFsbCBvbGQgdG9rZW4gaG9sZGVycyBjYW4gb3B0IGludG8gdGhpcyBuZXcgY29udHJhY3QgYnkgY2FsbGluZyB0aGlzIGZ1bmN0aW9uLgogICAgICAgIC8vIFRoaXMgInRyYW5zZmVyRnJvbSJzIHRva2VucyBmcm9tIHRoZSBvbGQgYWRkcmVzc2VzIHRvIHRoZSBuZXcgcmVjeWNsZUJpbiBhZGRyZXNzCiAgICAgICAgLy8gd2hpY2ggaXMgYSBuZXcgYWRkcmVzcyBzZXQgdXAgb24gdGhlIG9sZCBjb250cmFjdC4gIEFmdGVyd2hpY2ggbmV3IHRva2VucwogICAgICAgIC8vIGFyZSBjcmVkaXRlZCB0byB0aGUgb2xkIGhvbGRlci4gIEFsc28gdGhlIGxhc3RTbmFwU2hvdCBpcyBzZXQgdG8gMCB0aGVuCiAgICAgICAgLy8gY2FsY0NyZWRpdGVkIHBvaW50cyBhcmUgY2FsbGVkIHNldHRpbmcgdXAgdGhlIG5ldyBzaWduYXRvcmVlIGFsbCBvZiBoaXMKICAgICAgICAvLyBhY2NydWVkIGRpdmlkZW5kcy4KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gb3B0SW5Gcm9tQ2xhc3NpYygpIHB1YmxpYwogICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChvbGRFNCA9PSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiY29uZmlnIGVyciIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyAxLiBjaGVjayBiYWxhbmNlIG9mIG1zZy5zZW5kZXIgaW4gb2xkIGNvbnRyYWN0LgogICAgICAgICAgICAgICAgYWRkcmVzcyBucmVxdWVzdGVyID0gbXNnLnNlbmRlcjsKCiAgICAgICAgICAgICAgICAvLyAyLiBtYWtlIHN1cmUgYWNjb3VudCBub3QgYWxyZWFkeSBhbGxvY2QgKGluIGZhY3QsIGl0J3Mgb2sgaWYgaXQncyBhbGxvY2QsIHNvIGxvbmcKICAgICAgICAgICAgICAgIC8vIGFzIGl0IGlzIGVtcHR5IG5vdy4gdGhlIHJlYXNvbiBmb3IgdGhpcyBjaGVjayBpcyBjdXogd2UgYXJlIGdvaW5nIHRvIGNyZWRpdCBoaW0gd2l0aAogICAgICAgICAgICAgICAgLy8gZGl2aWRlbmRzLCBhY2NvcmRpbmcgdG8gaGlzIHRva2VuIGNvdW50LCBmcm9tIHRoZSBiZWdpbiBvZiB0aW1lLgogICAgICAgICAgICAgICAgaWYgKGhvbGRlckFjY291bnRzW25yZXF1ZXN0ZXJdLnRva2VucyAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiQWNjb3VudCBoYXMgYWxyZWFkeSBoYXMgdG9rZW5zISIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gMy4gY2hlY2sgaGlzIHRvayBiYWxhbmNlCiAgICAgICAgICAgICAgICBUb2tlbiBpY2xhc3NpYyA9IFRva2VuKG9sZEU0KTsKICAgICAgICAgICAgICAgIHVpbnQgX3Rva3MgPSBpY2xhc3NpYy5iYWxhbmNlT2YobnJlcXVlc3Rlcik7CiAgICAgICAgICAgICAgICBpZiAoX3Rva3MgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIk5vdGhpbmcgdG8gZG8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIG11c3QgYmUgMTAwIHBlcmNlbnQgb2YgaG9sZGluZ3MKICAgICAgICAgICAgICAgIGlmIChpY2xhc3NpYy5hbGxvd2FuY2UobnJlcXVlc3RlciwgYWRkcmVzcyh0aGlzKSkgPCBfdG9rcykgewogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIlBsZWFzZSBhcHByb3ZlIHRoaXMgY29udHJhY3QgdG8gdHJhbnNmZXIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIDQuIGJlZm9yZSB3ZSBkbyB0aGUgdHJhbnNmZXIsIG1ha2Ugc3VyZSB0aGF0IHdlIGhhdmUgYXQgbGVhc3QgZW5vdWdoIGdhcyBmb3IgdGhlCiAgICAgICAgICAgICAgICAvLyB0cmFuc2ZlciBwbHVzIHRoZSByZW1haW5kZXIgb2YgdGhpcyBmY24uCiAgICAgICAgICAgICAgICBpZiAobXNnLmdhcyA8IG9wdEluWGZlckdhcyArIG9wdEluRmNuTWluR2FzKQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzsKCiAgICAgICAgICAgICAgICAvLyA1LiB0cmFuc2ZlciBoaXMgb2xkIHRva3MgdG8gcmVjeWxlIGJpbgogICAgICAgICAgICAgICAgaWNsYXNzaWMudHJhbnNmZXJGcm9tLmdhcyhvcHRJblhmZXJHYXMpKG5yZXF1ZXN0ZXIsIG9sZEU0UmVjeWNsZUJpbiwgX3Rva3MpOwoKICAgICAgICAgICAgICAgIC8vIHRvZG8sIGVycm9yIGNoZWNrPwogICAgICAgICAgICAgICAgaWYgKGljbGFzc2ljLmJhbGFuY2VPZihucmVxdWVzdGVyKSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3MsIGFkZCB0aGUgYWNjb3VudCwgc2V0IHRoZSB0b2tlbnMsIHNldCBzbmFwc2hvdCB0byB6ZXJvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaG9sZGVyQWNjb3VudHNbbnJlcXVlc3Rlcl0uYWxsb2NlZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRBY2NvdW50KG5yZXF1ZXN0ZXIpOwogICAgICAgICAgICAgICAgICAgICAgICBob2xkZXJBY2NvdW50c1tucmVxdWVzdGVyXS50b2tlbnMgPSBfdG9rcyAqIE5ld1Rva2Vuc1Blck9yaWdUb2tlbjsKICAgICAgICAgICAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbbnJlcXVlc3Rlcl0ubGFzdFNuYXBzaG90ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsY0N1clBvaW50c0ZvckFjY3QobnJlcXVlc3Rlcik7CiAgICAgICAgICAgICAgICAgICAgICAgIG51bVRva3NTd2l0Y2hlZE92ZXIgKz0gX3Rva3M7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gZGVjcmVtZW50IHBvaW50cyBmcm9tIGEgImhvbGRpbmcgYWNjb3VudCIKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYi9jIHRoZXJlIGlzIG5vIG5lZWQgdG8ga2VlcCBpdC4KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJTdWNjZXNzIFN3aXRjaGVkIE92ZXIiKTsKICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIlRyYW5zZmVyIEVycm9yISBwbGVhc2UgY29udGFjdCBEZXYgdGVhbSEiKTsKCgogICAgICAgIH0KCgoKfQ=='.
	

]
