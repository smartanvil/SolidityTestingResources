Class {
	#name : #SRT97e7ef310499be2f97c392b8b16ddd494af73e22,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT97e7ef310499be2f97c392b8b16ddd494af73e22 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBFUkMyMFRva2VuIHsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpOwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSk7Cn0KY29udHJhY3QgR3JvdmVBUEkgewogIGZ1bmN0aW9uIGluc2VydChieXRlczMyIGluZGV4TmFtZSwgYnl0ZXMzMiBpZCwgaW50IHZhbHVlKSBwdWJsaWM7Cn0KCi8qKgogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9Cn0KCmNvbnRyYWN0IFVuaWNvcm5SYW5jaCB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogIGVudW0gVmlzaXRUeXBlIHsgU3BhLCBBZnRlcm5vb24sIERheSwgT3Zlcm5pZ2h0LCBXZWVrLCBFeHRlbmRlZCB9CiAgZW51bSBWaXNpdFN0YXRlIHsgSW5Qcm9ncmVzcywgQ29tcGxldGVkLCBSZXBvc3Nlc3NlZCB9CiAgCiAgc3RydWN0IFZpc2l0IHsKICAgIHVpbnQgdW5pY29ybkNvdW50OwogICAgVmlzaXRUeXBlIHQ7CiAgICB1aW50IHN0YXJ0QmxvY2s7CiAgICB1aW50IGV4cGlyZXNCbG9jazsKICAgIFZpc2l0U3RhdGUgc3RhdGU7CiAgICB1aW50IGNvbXBsZXRlZEJsb2NrOwogICAgdWludCBjb21wbGV0ZWRDb3VudDsKICB9CiAgc3RydWN0IFZpc2l0TWV0YSB7CiAgICBhZGRyZXNzIG93bmVyOwogICAgdWludCBpbmRleDsKICB9CiAgCiAgYWRkcmVzcyBwdWJsaWMgY2FyZGJvYXJkVW5pY29yblRva2VuQWRkcmVzczsKICBhZGRyZXNzIHB1YmxpYyBncm92ZUFkZHJlc3M7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXIgPSBtc2cuc2VuZGVyOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gVmlzaXRbXSkgYm9va2luZ3M7CiAgbWFwcGluZyAoYnl0ZXMzMiA9PiBWaXNpdE1ldGEpIHB1YmxpYyBib29raW5nTWV0YWRhdGFGb3JLZXk7CiAgbWFwcGluZyAodWludDggPT4gdWludCkgcHVibGljIHZpc2l0TGVuZ3RoOwogIG1hcHBpbmcgKHVpbnQ4ID0+IHVpbnQpIHB1YmxpYyB2aXNpdENvc3Q7CiAgdWludCBwdWJsaWMgdmlzaXRpbmdVbmljb3JucyA9IDA7CiAgdWludCBwdWJsaWMgcmVwb3NzZXNzaW9uQmxvY2tzID0gNDMyMDA7CiAgdWludDggcHVibGljIHJlcG9zc2Vzc2lvbkJvdW50eVBlclRlbiA9IDI7CiAgdWludDggcHVibGljIHJlcG9zc2Vzc2lvbkJvdW50eVBlckh1bmRyZWQgPSAyNTsKICB1aW50IHB1YmxpYyBiaXJ0aEJsb2NrVGhyZXNob2xkID0gNDM4NjA7CiAgdWludDggcHVibGljIGJpcnRoUGVyVGVuID0gMTsKICB1aW50OCBwdWJsaWMgYmlydGhQZXJIdW5kcmVkID0gMTU7CgogIGV2ZW50IE5ld0Jvb2tpbmcoYWRkcmVzcyBpbmRleGVkIF93aG8sIHVpbnQgaW5kZXhlZCBfaW5kZXgsIFZpc2l0VHlwZSBpbmRleGVkIF90eXBlLCB1aW50IF91bmljb3JuQ291bnQpOwogIGV2ZW50IEJvb2tpbmdVcGRhdGUoYWRkcmVzcyBpbmRleGVkIF93aG8sIHVpbnQgaW5kZXhlZCBfaW5kZXgsIFZpc2l0U3RhdGUgaW5kZXhlZCBfbmV3U3RhdGUsIHVpbnQgX3VuaWNvcm5Db3VudCk7CiAgZXZlbnQgUmVwb3NzZXNzaW9uQm91bnR5KGFkZHJlc3MgaW5kZXhlZCBfd2hvLCB1aW50IF91bmljb3JuQ291bnQpOwogIGV2ZW50IERvbmF0aW9uUmVjZWl2ZWQoYWRkcmVzcyBpbmRleGVkIF93aG8sIHVpbnQgX3VuaWNvcm5Db3VudCk7CgogIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CiAgCiAgZnVuY3Rpb24gVW5pY29yblJhbmNoKCkgewogICAgdmlzaXRMZW5ndGhbdWludDgoVmlzaXRUeXBlLlNwYSldID0gNzIwOwogICAgdmlzaXRMZW5ndGhbdWludDgoVmlzaXRUeXBlLkFmdGVybm9vbildID0gMTQ0MDsKICAgIHZpc2l0TGVuZ3RoW3VpbnQ4KFZpc2l0VHlwZS5EYXkpXSA9IDI4ODA7CiAgICB2aXNpdExlbmd0aFt1aW50OChWaXNpdFR5cGUuT3Zlcm5pZ2h0KV0gPSA4NjQwOwogICAgdmlzaXRMZW5ndGhbdWludDgoVmlzaXRUeXBlLldlZWspXSA9IDYwNDgwOwogICAgdmlzaXRMZW5ndGhbdWludDgoVmlzaXRUeXBlLkV4dGVuZGVkKV0gPSAxMjA5NjA7CiAgICAKICAgIHZpc2l0Q29zdFt1aW50OChWaXNpdFR5cGUuU3BhKV0gPSAwOwogICAgdmlzaXRDb3N0W3VpbnQ4KFZpc2l0VHlwZS5BZnRlcm5vb24pXSA9IDA7CiAgICB2aXNpdENvc3RbdWludDgoVmlzaXRUeXBlLkRheSldID0gMTAgc3phYm87CiAgICB2aXNpdENvc3RbdWludDgoVmlzaXRUeXBlLk92ZXJuaWdodCldID0gMzAgc3phYm87CiAgICB2aXNpdENvc3RbdWludDgoVmlzaXRUeXBlLldlZWspXSA9IDUwIHN6YWJvOwogICAgdmlzaXRDb3N0W3VpbnQ4KFZpc2l0VHlwZS5FeHRlbmRlZCldID0gNzAgc3phYm87CiAgfQoKCiAgZnVuY3Rpb24gZ2V0Qm9va2luZ0NvdW50KGFkZHJlc3MgX3dobykgY29uc3RhbnQgcmV0dXJucyAodWludCBjb3VudCkgewogICAgcmV0dXJuIGJvb2tpbmdzW193aG9dLmxlbmd0aDsKICB9CiAgZnVuY3Rpb24gZ2V0Qm9va2luZyhhZGRyZXNzIF93aG8sIHVpbnQgX2luZGV4KSBjb25zdGFudCByZXR1cm5zICh1aW50IF91bmljb3JuQ291bnQsIFZpc2l0VHlwZSBfdHlwZSwgdWludCBfc3RhcnRCbG9jaywgdWludCBfZXhwaXJlc0Jsb2NrLCBWaXNpdFN0YXRlIF9zdGF0ZSwgdWludCBfY29tcGxldGVkQmxvY2ssIHVpbnQgX2NvbXBsZXRlZENvdW50KSB7CiAgICBWaXNpdCBzdG9yYWdlIHYgPSBib29raW5nc1tfd2hvXVtfaW5kZXhdOwogICAgcmV0dXJuICh2LnVuaWNvcm5Db3VudCwgdi50LCB2LnN0YXJ0QmxvY2ssIHYuZXhwaXJlc0Jsb2NrLCB2LnN0YXRlLCB2LmNvbXBsZXRlZEJsb2NrLCB2LmNvbXBsZXRlZENvdW50KTsKICB9CgogIGZ1bmN0aW9uIGJvb2tTcGFWaXNpdCh1aW50IF91bmljb3JuQ291bnQpIHBheWFibGUgewogICAgcmV0dXJuIGFkZEJvb2tpbmcoVmlzaXRUeXBlLlNwYSwgX3VuaWNvcm5Db3VudCk7CiAgfQogIGZ1bmN0aW9uIGJvb2tBZnRlcm5vb25WaXNpdCh1aW50IF91bmljb3JuQ291bnQpIHBheWFibGUgewogICAgcmV0dXJuIGFkZEJvb2tpbmcoVmlzaXRUeXBlLkFmdGVybm9vbiwgX3VuaWNvcm5Db3VudCk7CiAgfQogIGZ1bmN0aW9uIGJvb2tEYXlWaXNpdCh1aW50IF91bmljb3JuQ291bnQpIHBheWFibGUgewogICAgcmV0dXJuIGFkZEJvb2tpbmcoVmlzaXRUeXBlLkRheSwgX3VuaWNvcm5Db3VudCk7CiAgfQogIGZ1bmN0aW9uIGJvb2tPdmVybmlnaHRWaXNpdCh1aW50IF91bmljb3JuQ291bnQpIHBheWFibGUgewogICAgcmV0dXJuIGFkZEJvb2tpbmcoVmlzaXRUeXBlLk92ZXJuaWdodCwgX3VuaWNvcm5Db3VudCk7CiAgfQogIGZ1bmN0aW9uIGJvb2tXZWVrVmlzaXQodWludCBfdW5pY29ybkNvdW50KSBwYXlhYmxlIHsKICAgIHJldHVybiBhZGRCb29raW5nKFZpc2l0VHlwZS5XZWVrLCBfdW5pY29ybkNvdW50KTsKICB9CiAgZnVuY3Rpb24gYm9va0V4dGVuZGVkVmlzaXQodWludCBfdW5pY29ybkNvdW50KSBwYXlhYmxlIHsKICAgIHJldHVybiBhZGRCb29raW5nKFZpc2l0VHlwZS5FeHRlbmRlZCwgX3VuaWNvcm5Db3VudCk7CiAgfQogIAogIGZ1bmN0aW9uIGFkZEJvb2tpbmcoVmlzaXRUeXBlIF90eXBlLCB1aW50IF91bmljb3JuQ291bnQpIHBheWFibGUgewogICAgaWYgKF90eXBlID09IFZpc2l0VHlwZS5BZnRlcm5vb24pIHsKICAgICAgcmV0dXJuIGRvbmF0ZVVuaWNvcm5zKGF2YWlsYWJsZUJhbGFuY2UobXNnLnNlbmRlcikpOwogICAgfQogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gdmlzaXRDb3N0W3VpbnQ4KF90eXBlKV0ubXVsKF91bmljb3JuQ291bnQpKTsgLy8gTXVzdCBiZSBwYXlpbmcgcHJvcGVyIGFtb3VudAoKICAgIEVSQzIwVG9rZW4gY2FyZGJvYXJkVW5pY29ybnMgPSBFUkMyMFRva2VuKGNhcmRib2FyZFVuaWNvcm5Ub2tlbkFkZHJlc3MpOwogICAgY2FyZGJvYXJkVW5pY29ybnMudHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIGFkZHJlc3ModGhpcyksIF91bmljb3JuQ291bnQpOyAvLyBUcmFuc2ZlciB0aGUgYWN0dWFsIGFzc2V0CiAgICB2aXNpdGluZ1VuaWNvcm5zID0gdmlzaXRpbmdVbmljb3Jucy5hZGQoX3VuaWNvcm5Db3VudCk7CiAgICB1aW50IGV4cGlyZXNCbG9jayA9IGJsb2NrLm51bWJlci5hZGQodmlzaXRMZW5ndGhbdWludDgoX3R5cGUpXSk7IC8vIENhbGN1bGF0ZSB3aGVuIHRoaXMgYm9va2luZyB3aWxsIGJlIGRvbmUKICAgIAogICAgLy8gQWRkIHRoZSBib29raW5nIHRvIHRoZSBsZWRnZXIKICAgIGJvb2tpbmdzW21zZy5zZW5kZXJdLnB1c2goVmlzaXQoCiAgICAgIF91bmljb3JuQ291bnQsCiAgICAgIF90eXBlLAogICAgICBibG9jay5udW1iZXIsCiAgICAgIGV4cGlyZXNCbG9jaywKICAgICAgVmlzaXRTdGF0ZS5JblByb2dyZXNzLAogICAgICAwLAogICAgICAwCiAgICApKTsKICAgIHVpbnQgbmV3SW5kZXggPSBib29raW5nc1ttc2cuc2VuZGVyXS5sZW5ndGggLSAxOwogICAgYnl0ZXMzMiB1bmlxdWVLZXkgPSBrZWNjYWsyNTYobXNnLnNlbmRlciwgbmV3SW5kZXgpOyAvLyBDcmVhdGUgYSB1bmlxdWUga2V5IGZvciB0aGlzIGJvb2tpbmcKICAgIAogICAgLy8gQWRkIGEgcmVmZXJlbmNlIGZvciB0aGF0IGtleSwgdG8gZmluZCB0aGUgbWV0YWRhdGEgYWJvdXQgaXQgbGF0ZXIKICAgIGJvb2tpbmdNZXRhZGF0YUZvcktleVt1bmlxdWVLZXldID0gVmlzaXRNZXRhKAogICAgICBtc2cuc2VuZGVyLAogICAgICBuZXdJbmRleAogICAgKTsKICAgIAogICAgaWYgKGdyb3ZlQWRkcmVzcyA+IDApIHsKICAgICAgLy8gSW5zZXJ0IGludG8gR3JvdmUgaW5kZXggZm9yIGFwcGxpY2F0aW9ucyB0byBxdWVyeQogICAgICBHcm92ZUFQSSBnID0gR3JvdmVBUEkoZ3JvdmVBZGRyZXNzKTsKICAgICAgZy5pbnNlcnQoImJvb2tpbmdFeHBpcmF0aW9uIiwgdW5pcXVlS2V5LCBpbnQoZXhwaXJlc0Jsb2NrKSk7CiAgICB9CiAgICAKICAgIC8vIFNlbmQgZXZlbnQgYWJvdXQgdGhpcyBuZXcgYm9va2luZwogICAgTmV3Qm9va2luZyhtc2cuc2VuZGVyLCBuZXdJbmRleCwgX3R5cGUsIF91bmljb3JuQ291bnQpOwogIH0KICAKICBmdW5jdGlvbiBjb21wbGV0ZUJvb2tpbmcodWludCBfaW5kZXgpIHsKICAgIHJlcXVpcmUoYm9va2luZ3NbbXNnLnNlbmRlcl0ubGVuZ3RoID4gX2luZGV4KTsgLy8gU2VuZGVyIG11c3QgaGF2ZSBhdCBsZWFzdCB0aGlzIG1hbnkgYm9va2luZ3MKICAgIFZpc2l0IHN0b3JhZ2UgdiA9IGJvb2tpbmdzW21zZy5zZW5kZXJdW19pbmRleF07CiAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+PSB2LmV4cGlyZXNCbG9jayk7IC8vIEV4cGlyZWQgdGltZSBtdXN0IGJlIHBhc3QKICAgIHJlcXVpcmUodi5zdGF0ZSA9PSBWaXNpdFN0YXRlLkluUHJvZ3Jlc3MpOyAvLyBWaXNpdCBtdXN0IG5vdCBiZSBjb21wbGV0ZSBvciByZXBvc3Nlc3NlZAogICAgCiAgICB1aW50IHVuaWNvcm5zVG9SZXR1cm4gPSB2LnVuaWNvcm5Db3VudDsKICAgIEVSQzIwVG9rZW4gY2FyZGJvYXJkVW5pY29ybnMgPSBFUkMyMFRva2VuKGNhcmRib2FyZFVuaWNvcm5Ub2tlbkFkZHJlc3MpOwoKICAgIC8vIERldGVybWluZSBpZiBhbnkgYmlydGhzIG9jY3VycmVkCiAgICB1aW50IGJpcnRoQ291bnQgPSAwOwogICAgaWYgKFNhZmVNYXRoLnN1YihibG9jay5udW1iZXIsIHYuc3RhcnRCbG9jaykgPj0gYmlydGhCbG9ja1RocmVzaG9sZCkgewogICAgICBpZiAodi51bmljb3JuQ291bnQgPj0gMTAwKSB7CiAgICAgICAgYmlydGhDb3VudCA9IHVpbnQoYmlydGhQZXJIdW5kcmVkKS5tdWwodi51bmljb3JuQ291bnQgLyAxMDApOwogICAgICB9IGVsc2UgaWYgKHYudW5pY29ybkNvdW50ID49IDEwKSB7CiAgICAgICAgYmlydGhDb3VudCA9IHVpbnQoYmlydGhQZXJUZW4pLm11bCh2LnVuaWNvcm5Db3VudCAvIDEwKTsKICAgICAgfQogICAgfQogICAgaWYgKGJpcnRoQ291bnQgPiAwKSB7CiAgICAgIHVpbnQgYXZhaWxhYmxlVW5pY29ybnMgPSBjYXJkYm9hcmRVbmljb3Jucy5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSkgLSB2aXNpdGluZ1VuaWNvcm5zOwogICAgICBpZiAoYXZhaWxhYmxlVW5pY29ybnMgPCBiaXJ0aENvdW50KSB7CiAgICAgICAgYmlydGhDb3VudCA9IGF2YWlsYWJsZVVuaWNvcm5zOwogICAgICB9CiAgICAgIHVuaWNvcm5zVG9SZXR1cm4gPSB1bmljb3Juc1RvUmV0dXJuLmFkZChiaXJ0aENvdW50KTsKICAgIH0KICAgICAgICAKICAgIC8vIFVwZGF0ZSB0aGUgc3RhdHVzIG9mIHRoZSBWaXNpdAogICAgdi5zdGF0ZSA9IFZpc2l0U3RhdGUuQ29tcGxldGVkOwogICAgdi5jb21wbGV0ZWRCbG9jayA9IGJsb2NrLm51bWJlcjsKICAgIHYuY29tcGxldGVkQ291bnQgPSB1bmljb3Juc1RvUmV0dXJuOwogICAgYm9va2luZ3NbbXNnLnNlbmRlcl1bX2luZGV4XSA9IHY7CiAgICAKICAgIC8vIFRyYW5zZmVyIHRoZSBhc3NldCBiYWNrIHRvIHRoZSBvd25lcgogICAgdmlzaXRpbmdVbmljb3JucyA9IHZpc2l0aW5nVW5pY29ybnMuc3ViKHYudW5pY29ybkNvdW50KTsKICAgIGNhcmRib2FyZFVuaWNvcm5zLnRyYW5zZmVyKG1zZy5zZW5kZXIsIHVuaWNvcm5zVG9SZXR1cm4pOwogICAgCiAgICAvLyBTZW5kIGV2ZW50IGFib3V0IHRoaXMgdXBkYXRlCiAgICBCb29raW5nVXBkYXRlKG1zZy5zZW5kZXIsIF9pbmRleCwgVmlzaXRTdGF0ZS5Db21wbGV0ZWQsIHVuaWNvcm5zVG9SZXR1cm4pOwogIH0KICAKICBmdW5jdGlvbiByZXBvc3Nlc3NCb29raW5nKGFkZHJlc3MgX3dobywgdWludCBfaW5kZXgpIHsKICAgIHJlcXVpcmUoYm9va2luZ3NbX3dob10ubGVuZ3RoID4gX2luZGV4KTsgLy8gQWRkcmVzcyBpbiBxdWVzdGlvbiBtdXN0IGhhdmUgYXQgbGVhc3QgdGhpcyBtYW55IGJvb2tpbmdzCiAgICBWaXNpdCBzdG9yYWdlIHYgPSBib29raW5nc1tfd2hvXVtfaW5kZXhdOwogICAgcmVxdWlyZShibG9jay5udW1iZXIgPiB2LmV4cGlyZXNCbG9jay5hZGQocmVwb3NzZXNzaW9uQmxvY2tzKSk7IC8vIFJlcG9zc2Vzc2lvbiB0aW1lIG11c3QgYmUgcGFzdAogICAgcmVxdWlyZSh2LnN0YXRlID09IFZpc2l0U3RhdGUuSW5Qcm9ncmVzcyk7IC8vIFZpc2l0IG11c3Qgbm90IGJlIGNvbXBsZXRlIG9yIHJlcG9zc2Vzc2VkCiAgICAKICAgIHZpc2l0aW5nVW5pY29ybnMgPSB2aXNpdGluZ1VuaWNvcm5zLnN1Yih2LnVuaWNvcm5Db3VudCk7CiAgICAKICAgIC8vIFNlbmQgZXZlbnQgYWJvdXQgdGhpcyB1cGRhdGUKICAgIEJvb2tpbmdVcGRhdGUoX3dobywgX2luZGV4LCBWaXNpdFN0YXRlLlJlcG9zc2Vzc2VkLCB2LnVuaWNvcm5Db3VudCk7CiAgICAKICAgIC8vIENhbGN1bGF0ZSBCb3VudHkgYW1vdW50CiAgICB1aW50IGJvdW50eUNvdW50ID0gMTsKICAgIGlmICh2LnVuaWNvcm5Db3VudCA+PSAxMDApIHsKICAgICAgICBib3VudHlDb3VudCA9IHVpbnQocmVwb3NzZXNzaW9uQm91bnR5UGVySHVuZHJlZCkubXVsKHYudW5pY29ybkNvdW50IC8gMTAwKTsKICAgIH0gZWxzZSBpZiAodi51bmljb3JuQ291bnQgPj0gMTApIHsKICAgICAgYm91bnR5Q291bnQgPSB1aW50KHJlcG9zc2Vzc2lvbkJvdW50eVBlclRlbikubXVsKHYudW5pY29ybkNvdW50IC8gMTApOwogICAgfQogICAgCiAgICAvLyBTZW5kIGJvdW50eSB0byBib3VudHkgaHVudGVyCiAgICBFUkMyMFRva2VuIGNhcmRib2FyZFVuaWNvcm5zID0gRVJDMjBUb2tlbihjYXJkYm9hcmRVbmljb3JuVG9rZW5BZGRyZXNzKTsKICAgIGNhcmRib2FyZFVuaWNvcm5zLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGJvdW50eUNvdW50KTsKICAgIAogICAgLy8gU2VuZCBldmVudCBhYm91dCB0aGUgYm91bnR5IHBheW91dAogICAgUmVwb3NzZXNzaW9uQm91bnR5KG1zZy5zZW5kZXIsIGJvdW50eUNvdW50KTsKCiAgICAvLyBVcGRhdGUgdGhlIHN0YXR1cyBvZiB0aGUgVmlzaXQKICAgIHYuc3RhdGUgPSBWaXNpdFN0YXRlLlJlcG9zc2Vzc2VkOwogICAgdi5jb21wbGV0ZWRCbG9jayA9IGJsb2NrLm51bWJlcjsKICAgIHYuY29tcGxldGVkQ291bnQgPSB2LnVuaWNvcm5Db3VudCAtIGJvdW50eUNvdW50OwogICAgYm9va2luZ3NbX3dob11bX2luZGV4XSA9IHY7CiAgfQogIAogIGZ1bmN0aW9uIGF2YWlsYWJsZUJhbGFuY2UoYWRkcmVzcyBfd2hvKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBFUkMyMFRva2VuIGNhcmRib2FyZFVuaWNvcm5zID0gRVJDMjBUb2tlbihjYXJkYm9hcmRVbmljb3JuVG9rZW5BZGRyZXNzKTsKICAgIHVpbnQgY291bnQgPSBjYXJkYm9hcmRVbmljb3Jucy5hbGxvd2FuY2UoX3dobywgYWRkcmVzcyh0aGlzKSk7CiAgICBpZiAoY291bnQgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQgYmFsYW5jZSA9IGNhcmRib2FyZFVuaWNvcm5zLmJhbGFuY2VPZihfd2hvKTsKICAgIGlmIChiYWxhbmNlIDwgY291bnQpIHsKICAgICAgcmV0dXJuIGJhbGFuY2U7CiAgICB9CiAgICByZXR1cm4gY291bnQ7CiAgfQogIAogIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICBpZiAoY2FyZGJvYXJkVW5pY29yblRva2VuQWRkcmVzcyA9PSAwKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiBkb25hdGVVbmljb3JucyhhdmFpbGFibGVCYWxhbmNlKG1zZy5zZW5kZXIpKTsKICB9CiAgCiAgZnVuY3Rpb24gZG9uYXRlVW5pY29ybnModWludCBfdW5pY29ybkNvdW50KSBwYXlhYmxlIHsKICAgIGlmIChfdW5pY29ybkNvdW50ID09IDApIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgRVJDMjBUb2tlbiBjYXJkYm9hcmRVbmljb3JucyA9IEVSQzIwVG9rZW4oY2FyZGJvYXJkVW5pY29yblRva2VuQWRkcmVzcyk7CiAgICBjYXJkYm9hcmRVbmljb3Jucy50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgYWRkcmVzcyh0aGlzKSwgX3VuaWNvcm5Db3VudCk7CiAgICBEb25hdGlvblJlY2VpdmVkKG1zZy5zZW5kZXIsIF91bmljb3JuQ291bnQpOwogIH0KICAKICAvKioKICAgKiBDaGFuZ2Ugb3duZXJzaGlwIG9mIHRoZSBSYW5jaAogICAqLwogIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgewogICAgb3duZXIgPSBfbmV3T3duZXI7CiAgfQoKICAvKioKICAgKiBDaGFuZ2UgdGhlIG91dHNpZGUgY29udHJhY3RzIHVzZWQgYnkgdGhpcyBjb250cmFjdAogICAqLwogIGZ1bmN0aW9uIGNoYW5nZUNhcmRib2FyZFVuaWNvcm5Ub2tlbkFkZHJlc3MoYWRkcmVzcyBfbmV3VG9rZW5BZGRyZXNzKSBvbmx5T3duZXIgewogICAgY2FyZGJvYXJkVW5pY29yblRva2VuQWRkcmVzcyA9IF9uZXdUb2tlbkFkZHJlc3M7CiAgfQogIGZ1bmN0aW9uIGNoYW5nZUdyb3ZlQWRkcmVzcyhhZGRyZXNzIF9uZXdBZGRyZXNzKSBvbmx5T3duZXIgewogICAgZ3JvdmVBZGRyZXNzID0gX25ld0FkZHJlc3M7CiAgfQogIAogIC8qKgogICAqIFVwZGF0ZSBibG9jayBkdXJhdGlvbnMgZm9yIHZhcmlvdXMgdHlwZXMgb2YgdmlzaXRzCiAgICovCiAgZnVuY3Rpb24gY2hhbmdlVmlzaXRMZW5ndGhzKHVpbnQgX3NwYSwgdWludCBfYWZ0ZXJub29uLCB1aW50IF9kYXksIHVpbnQgX292ZXJuaWdodCwgdWludCBfd2VlaywgdWludCBfZXh0ZW5kZWQpIG9ubHlPd25lciB7CiAgICB2aXNpdExlbmd0aFt1aW50OChWaXNpdFR5cGUuU3BhKV0gPSBfc3BhOwogICAgdmlzaXRMZW5ndGhbdWludDgoVmlzaXRUeXBlLkFmdGVybm9vbildID0gX2FmdGVybm9vbjsKICAgIHZpc2l0TGVuZ3RoW3VpbnQ4KFZpc2l0VHlwZS5EYXkpXSA9IF9kYXk7CiAgICB2aXNpdExlbmd0aFt1aW50OChWaXNpdFR5cGUuT3Zlcm5pZ2h0KV0gPSBfb3Zlcm5pZ2h0OwogICAgdmlzaXRMZW5ndGhbdWludDgoVmlzaXRUeXBlLldlZWspXSA9IF93ZWVrOwogICAgdmlzaXRMZW5ndGhbdWludDgoVmlzaXRUeXBlLkV4dGVuZGVkKV0gPSBfZXh0ZW5kZWQ7CiAgfQogIAogIC8qKgogICAqIFVwZGF0ZSBldGhlciBjb3N0cyBmb3IgdmFyaW91cyB0eXBlcyBvZiB2aXNpdHMKICAgKi8KICBmdW5jdGlvbiBjaGFuZ2VWaXNpdENvc3RzKHVpbnQgX3NwYSwgdWludCBfYWZ0ZXJub29uLCB1aW50IF9kYXksIHVpbnQgX292ZXJuaWdodCwgdWludCBfd2VlaywgdWludCBfZXh0ZW5kZWQpIG9ubHlPd25lciB7CiAgICB2aXNpdENvc3RbdWludDgoVmlzaXRUeXBlLlNwYSldID0gX3NwYTsKICAgIHZpc2l0Q29zdFt1aW50OChWaXNpdFR5cGUuQWZ0ZXJub29uKV0gPSBfYWZ0ZXJub29uOwogICAgdmlzaXRDb3N0W3VpbnQ4KFZpc2l0VHlwZS5EYXkpXSA9IF9kYXk7CiAgICB2aXNpdENvc3RbdWludDgoVmlzaXRUeXBlLk92ZXJuaWdodCldID0gX292ZXJuaWdodDsKICAgIHZpc2l0Q29zdFt1aW50OChWaXNpdFR5cGUuV2VlayldID0gX3dlZWs7CiAgICB2aXNpdENvc3RbdWludDgoVmlzaXRUeXBlLkV4dGVuZGVkKV0gPSBfZXh0ZW5kZWQ7CiAgfQogIAogIC8qKgogICAqIFVwZGF0ZSBib3VudHkgcmV3YXJkIHNldHRpbmdzCiAgICovCiAgZnVuY3Rpb24gY2hhbmdlUmVwb1NldHRpbmdzKHVpbnQgX3JlcG9CbG9ja3MsIHVpbnQ4IF9yZXBvUGVyVGVuLCB1aW50OCBfcmVwb1Blckh1bmRyZWQpIG9ubHlPd25lciB7CiAgICByZXBvc3Nlc3Npb25CbG9ja3MgPSBfcmVwb0Jsb2NrczsKICAgIHJlcG9zc2Vzc2lvbkJvdW50eVBlclRlbiA9IF9yZXBvUGVyVGVuOwogICAgcmVwb3NzZXNzaW9uQm91bnR5UGVySHVuZHJlZCA9IF9yZXBvUGVySHVuZHJlZDsKICB9CiAgCiAgLyoqCiAgICogVXBkYXRlIGJpcnRoIGV2ZW50IHNldHRpbmdzCiAgICovCiAgZnVuY3Rpb24gY2hhbmdlQmlydGhTZXR0aW5ncyh1aW50IF9iaXJ0aEJsb2NrcywgdWludDggX2JpcnRoUGVyVGVuLCB1aW50OCBfYmlydGhQZXJIdW5kcmVkKSBvbmx5T3duZXIgewogICAgYmlydGhCbG9ja1RocmVzaG9sZCA9IF9iaXJ0aEJsb2NrczsKICAgIGJpcnRoUGVyVGVuID0gX2JpcnRoUGVyVGVuOwogICAgYmlydGhQZXJIdW5kcmVkID0gX2JpcnRoUGVySHVuZHJlZDsKICB9CgogIGZ1bmN0aW9uIHdpdGhkcmF3KCkgb25seU93bmVyIHsKICAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7IC8vIFNlbmQgYWxsIGV0aGVyIGluIHRoaXMgY29udHJhY3QgdG8gdGhpcyBjb250cmFjdCdzIG93bmVyCiAgfQogIGZ1bmN0aW9uIHdpdGhkcmF3Rm9yZWlnblRva2VucyhhZGRyZXNzIF90b2tlbkNvbnRyYWN0KSBvbmx5T3duZXIgewogICAgRVJDMjBUb2tlbiB0b2tlbiA9IEVSQzIwVG9rZW4oX3Rva2VuQ29udHJhY3QpOwogICAgdG9rZW4udHJhbnNmZXIob3duZXIsIHRva2VuLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKSk7IC8vIFNlbmQgYWxsIG93bmVkIHRva2VucyB0byB0aGlzIGNvbnRyYWN0J3Mgb3duZXIKICB9CiAgCn0='.
	

]
