Class {
	#name : #SRT82871e14Abf646925166a7D3A88E99c225A158B3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT82871e14Abf646925166a7D3A88E99c225A158B3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKgoqIExPSyAnTG9va1JldiBUb2tlbicgY3Jvd2RmdW5kaW5nIGNvbnRyYWN0CioKKiBSZWZlciB0byBodHRwczovL2xvb2tyZXYuY29tLyBmb3IgZnVydGhlciBpbmZvcm1hdGlvbi4KKiAKKiBEZXZlbG9wZXI6IExvb2tSZXYgKFRNKSAyMDE3LgoqCiogQXVkaXRlZCBieSBCb2treVBvb0JhaCAvIEJvayBDb25zdWx0aW5nIFB0eSBMdGQgMjAxNy4KKiAKKiBUaGUgTUlUIExpY2Vuc2UuCioKKi8KCi8qCiAqIEVSQzIwIFRva2VuIFN0YW5kYXJkCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKgogKi8KY29udHJhY3QgRVJDMjAgewogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF93aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZyk7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7Cn0KCi8qKgogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhICYmIGMgPj0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgdWludCBjID0gYSAtIGI7CiAgICBhc3NlcnQoYyA8PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBtb2RpZmllciBvbmx5T3duZXIgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgb25seU93bmVyIHsKICAgIGlmIChfbmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lcik7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9CiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvKTsKfQoKLyoqCiAqIFN0YW5kYXJkIEVSQzIwIHRva2VuIHdpdGggU2hvcnQgSGFuZCBBdHRhY2sgYW5kIGFwcHJvdmUoKSByYWNlIGNvbmRpdGlvbiBtaXRpZ2F0aW9uLgogKgogKiBCYXNlZCBvbiBjb2RlIGJ5IEludmVzdFNlZWQKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIE93bmFibGUsIFNhZmVNYXRoIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQKICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAKICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSxfYW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSxfYW1vdW50KTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50CiAgICAgICAgICAgICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF9hbW91bnQKICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAKICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZXNbX2Zyb21dLF9hbW91bnQpOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0sX2Ftb3VudCk7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sX2Ftb3VudCk7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgICAgaWYgKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9IDApKSB7CiAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICB9CgogICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgIH0KfQoKLyoqCiAqIExvb2tSZXYgdG9rZW4gaW5pdGlhbCBvZmZlcmluZy4KICoKICogVG9rZW4gc3VwcGx5IGlzIGNyZWF0ZWQgaW4gdGhlIHRva2VuIGNvbnRyYWN0IGNyZWF0aW9uIGFuZCBhbGxvY2F0ZWQgdG8gb3duZXIuCiAqCiAqLwpjb250cmFjdCBMb29rUmV2VG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgLyoKICAgICogIFRva2VuIG1ldGEgZGF0YQogICAgKi8KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJMb29rUmV2IjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkxPSyI7CiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIHN0cmluZyBwdWJsaWMgVkVSU0lPTiA9ICdMT0sxLjAnOwogICAgYm9vbCBwdWJsaWMgZmluYWxpc2VkID0gZmFsc2U7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIHdhbGxldDsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGt5Y1JlcXVpcmVkOwoKICAgIC8vIFN0YXJ0IC0gV2VkbmVzZGF5LCBBdWd1c3QgMTYsIDIwMTcgMTA6MDA6MDAgQU0gR01ULTA3OjAwIERTVAogICAgLy8gRW5kIC0gU2F0dXJkYXksIFNlcHRlbWJlciAxNiwgMjAxNyAxMDowMDowMCBBTSBHTVQtMDc6MDAgRFNUCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBTVEFSVF9EQVRFID0gMTUwMjkwMjgwMDsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEVORF9EQVRFID0gMTUwNTU4MTIwMDsKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBERUNJTUFMU0ZBQ1RPUiA9IDEwKip1aW50KGRlY2ltYWxzKTsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19TT0ZUX0NBUCA9ICAgMTAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19IQVJEX0NBUCA9IDIwMDAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19UT1RBTCA9ICAgIDQwMDAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsKCiAgICAvLyAxIEtFVEhFUiA9IDIsNDAwLDAwMCB0b2tlbnMKICAgIC8vIDEgRVRIID0gMiw0MDAgdG9rZW5zCiAgICAvLyBQcmVzYWxlIDIwJSBkaXNjb3VudCAxIEVUSCA9IDMsMDAwIHRva2VucwogICAgLy8gUHJlc2FsZSAxMCUgZGlzY291bnQgMSBFVEggPSAyLDY2NyB0b2tlbnMKICAgIHVpbnQgcHVibGljIHRva2Vuc1BlcktFdGhlciA9IDMwMDAwMDA7CiAgICB1aW50IHB1YmxpYyBDT05UUklCVVRJT05TX01JTiA9IDAgZXRoZXI7CiAgICB1aW50IHB1YmxpYyBDT05UUklCVVRJT05TX01BWCA9IDAgZXRoZXI7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBLWUNfVEhSRVNIT0xEID0gMTAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsKCiAgICBmdW5jdGlvbiBMb29rUmV2VG9rZW4oYWRkcmVzcyBfd2FsbGV0LCB1aW50IF9pbml0aWFsU3VwcGx5KSB7CiAgICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgdG90YWxTdXBwbHkgPSBfaW5pdGlhbFN1cHBseTsKICAgICAgYmFsYW5jZXNbb3duZXJdID0gdG90YWxTdXBwbHk7CiAgICB9CgogICAvLyBMb29rUmV2IGNhbiBjaGFuZ2UgdGhlIGNyb3dkc2FsZSB3YWxsZXQgYWRkcmVzcwogICBmdW5jdGlvbiBzZXRXYWxsZXQoYWRkcmVzcyBfd2FsbGV0KSBvbmx5T3duZXIgewogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICAgICAgV2FsbGV0VXBkYXRlZCh3YWxsZXQpOwogICAgfQogICAgZXZlbnQgV2FsbGV0VXBkYXRlZChhZGRyZXNzIG5ld1dhbGxldCk7CgogICAgLy8gQ2FuIG9ubHkgYmUgc2V0IGJlZm9yZSB0aGUgc3RhcnQgb2YgdGhlIGNyb3dkc2FsZQogICAgLy8gT3duZXIgY2FuIGNoYW5nZSB0aGUgcmF0ZSBiZWZvcmUgdGhlIGNyb3dkc2FsZSBzdGFydHMKICAgIGZ1bmN0aW9uIHNldFRva2Vuc1BlcktFdGhlcih1aW50IF90b2tlbnNQZXJLRXRoZXIpIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShub3cgPCBTVEFSVF9EQVRFKTsKICAgICAgICByZXF1aXJlKF90b2tlbnNQZXJLRXRoZXIgPiAwKTsKICAgICAgICB0b2tlbnNQZXJLRXRoZXIgPSBfdG9rZW5zUGVyS0V0aGVyOwogICAgICAgIFRva2Vuc1BlcktFdGhlclVwZGF0ZWQodG9rZW5zUGVyS0V0aGVyKTsKICAgIH0KICAgIGV2ZW50IFRva2Vuc1BlcktFdGhlclVwZGF0ZWQodWludCB0b2tlbnNQZXJLRXRoZXIpOwoKICAgIC8vIEFjY2VwdCBldGhlcnMgdG8gYnV5IHRva2VucyBkdXJpbmcgdGhlIGNyb3dkc2FsZQogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgcHJveHlQYXltZW50KG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vIEFjY2VwdCBldGhlcnMgYW5kIGV4Y2hhbmdlcyB0byBwdXJjaGFzZSB0b2tlbnMgb24gYmVoYWxmIG9mIHVzZXIKICAgIC8vIG1zZy52YWx1ZSAoaW4gdW5pdHMgb2Ygd2VpKQogICAgZnVuY3Rpb24gcHJveHlQYXltZW50KGFkZHJlc3MgcGFydGljaXBhbnQpIHBheWFibGUgewoKICAgICAgICByZXF1aXJlKCFmaW5hbGlzZWQpOwoKICAgICAgICByZXF1aXJlKG5vdyA8PSBFTkRfREFURSk7CgogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gQ09OVFJJQlVUSU9OU19NSU4pOwogICAgICAgIHJlcXVpcmUoQ09OVFJJQlVUSU9OU19NQVggPT0gMCB8fCBtc2cudmFsdWUgPCBDT05UUklCVVRJT05TX01BWCk7CgogICAgICAgICAvLyBDYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucyBmb3IgY29udHJpYnV0ZWQgRVRICiAgICAgICAgIC8vIGAxOGAgaXMgdGhlIEVUSCBkZWNpbWFscwogICAgICAgICAvLyBgLSBkZWNpbWFsc2AgaXMgdGhlIHRva2VuIGRlY2ltYWxzCiAgICAgICAgIHVpbnQgdG9rZW5zID0gbXNnLnZhbHVlICogdG9rZW5zUGVyS0V0aGVyIC8gMTAqKnVpbnQoMTggLSBkZWNpbWFscyArIDMpOwoKICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGhhcmQgY2FwIHdpbGwgYmUgZXhjZWVkZWQKICAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSArIHRva2VucyA8PSBUT0tFTlNfSEFSRF9DQVApOwoKICAgICAgICAgLy8gQWRkIHRva2VucyBwdXJjaGFzZWQgdG8gYWNjb3VudCdzIGJhbGFuY2UgYW5kIHRvdGFsIHN1cHBseQogICAgICAgICBiYWxhbmNlc1twYXJ0aWNpcGFudF0gPSBzYWZlQWRkKGJhbGFuY2VzW3BhcnRpY2lwYW50XSx0b2tlbnMpOwogICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksdG9rZW5zKTsKCiAgICAgICAgIC8vIExvZyB0aGUgdG9rZW5zIHB1cmNoYXNlZCAKICAgICAgICAgVHJhbnNmZXIoMHgwLCBwYXJ0aWNpcGFudCwgdG9rZW5zKTsKICAgICAgICAgLy8gLSBidXllciA9IHBhcnRpY2lwYW50CiAgICAgICAgIC8vIC0gZXRoZXJzID0gbXNnLnZhbHVlCiAgICAgICAgIC8vIC0gcGFydGljaXBhbnRUb2tlbkJhbGFuY2UgPSBiYWxhbmNlc1twYXJ0aWNpcGFudF0KICAgICAgICAgLy8gLSB0b2tlbnMgPSB0b2tlbnMKICAgICAgICAgLy8gLSBuZXdUb3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5CiAgICAgICAgIC8vIC0gdG9rZW5zUGVyS0V0aGVyID0gdG9rZW5zUGVyS0V0aGVyCiAgICAgICAgIFRva2Vuc0JvdWdodChwYXJ0aWNpcGFudCwgbXNnLnZhbHVlLCBiYWxhbmNlc1twYXJ0aWNpcGFudF0sIHRva2VucywKICAgICAgICAgICAgICB0b3RhbFN1cHBseSwgdG9rZW5zUGVyS0V0aGVyKTsKCiAgICAgICAgIGlmIChtc2cudmFsdWUgPiBLWUNfVEhSRVNIT0xEKSB7CiAgICAgICAgICAgICAvLyBLWUMgdmVyaWZpY2F0aW9uIHJlcXVpcmVkIGJlZm9yZSBwYXJ0aWNpcGFudCBjYW4gdHJhbnNmZXIgdGhlIHRva2VucwogICAgICAgICAgICAga3ljUmVxdWlyZWRbcGFydGljaXBhbnRdID0gdHJ1ZTsKICAgICAgICAgfQoKICAgICAgICAgLy8gVHJhbnNmZXIgdGhlIGNvbnRyaWJ1dGVkIGV0aGVycyB0byB0aGUgY3Jvd2RzYWxlIHdhbGxldAogICAgICAgICAvLyB0aHJvdyBpcyBkZXByZWNhdGVkIHN0YXJ0aW5nIGZyb20gRXRoZXJldW0gdjAuOS4wCiAgICAgICAgIHdhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfQoKICAgIGV2ZW50IFRva2Vuc0JvdWdodChhZGRyZXNzIGluZGV4ZWQgYnV5ZXIsIHVpbnQgZXRoZXJzLCAKICAgICAgICB1aW50IHBhcnRpY2lwYW50VG9rZW5CYWxhbmNlLCB1aW50IHRva2VucywgdWludCBuZXdUb3RhbFN1cHBseSwgCiAgICAgICAgdWludCB0b2tlbnNQZXJLRXRoZXIpOwoKICAgIGZ1bmN0aW9uIGZpbmFsaXNlKCkgb25seU93bmVyIHsKICAgICAgICAvLyBDYW4gb25seSBmaW5hbGlzZSBpZiByYWlzZWQgPiBzb2Z0IGNhcCBvciBhZnRlciB0aGUgZW5kIGRhdGUKICAgICAgICByZXF1aXJlKHRvdGFsU3VwcGx5ID49IFRPS0VOU19TT0ZUX0NBUCB8fCBub3cgPiBFTkRfREFURSk7CgogICAgICAgIHJlcXVpcmUoIWZpbmFsaXNlZCk7CgogICAgICAgIGZpbmFsaXNlZCA9IHRydWU7CiAgICB9CgogICBmdW5jdGlvbiBhZGRQcmVjb21taXRtZW50KGFkZHJlc3MgcGFydGljaXBhbnQsIHVpbnQgYmFsYW5jZSkgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5vdyA8IFNUQVJUX0RBVEUpOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZSA+IDApOwogICAgICAgIGJhbGFuY2VzW3BhcnRpY2lwYW50XSA9IHNhZmVBZGQoYmFsYW5jZXNbcGFydGljaXBhbnRdLGJhbGFuY2UpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSxiYWxhbmNlKTsKICAgICAgICBUcmFuc2ZlcigweDAsIHBhcnRpY2lwYW50LCBiYWxhbmNlKTsKICAgICAgICBQcmVjb21taXRtZW50QWRkZWQocGFydGljaXBhbnQsIGJhbGFuY2UpOwogICAgfQogICAgZXZlbnQgUHJlY29tbWl0bWVudEFkZGVkKGFkZHJlc3MgaW5kZXhlZCBwYXJ0aWNpcGFudCwgdWludCBiYWxhbmNlKTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvLyBDYW5ub3QgdHJhbnNmZXIgYmVmb3JlIGNyb3dkc2FsZSBlbmRzCiAgICAgICAgLy8gQWxsb3cgYXdhcmRpbmcgdGVhbSBtZW1iZXJzIGJlZm9yZSwgZHVyaW5nIGFuZCBhZnRlciBjcm93ZHNhbGUKICAgICAgICByZXF1aXJlKGZpbmFsaXNlZCB8fCBtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICByZXF1aXJlKCFreWNSZXF1aXJlZFttc2cuc2VuZGVyXSk7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX2Ftb3VudCk7CiAgICB9CgogICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIC8vIENhbm5vdCB0cmFuc2ZlciBiZWZvcmUgY3Jvd2RzYWxlIGVuZHMKICAgICAgICByZXF1aXJlKGZpbmFsaXNlZCk7CiAgICAgICAgcmVxdWlyZSgha3ljUmVxdWlyZWRbX2Zyb21dKTsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGt5Y1ZlcmlmeShhZGRyZXNzIHBhcnRpY2lwYW50LCBib29sIF9yZXF1aXJlZCkgb25seU93bmVyIHsKICAgICAgICBreWNSZXF1aXJlZFtwYXJ0aWNpcGFudF0gPSBfcmVxdWlyZWQ7CiAgICAgICAgS3ljVmVyaWZpZWQocGFydGljaXBhbnQsIGt5Y1JlcXVpcmVkW3BhcnRpY2lwYW50XSk7CiAgICB9CiAgICBldmVudCBLeWNWZXJpZmllZChhZGRyZXNzIGluZGV4ZWQgcGFydGljaXBhbnQsIGJvb2wgcmVxdWlyZWQpOwoKICAgIC8vIEFueSBhY2NvdW50IGNhbiBidXJuIF9mcm9tJ3MgdG9rZW5zIGFzIGxvbmcgYXMgdGhlIF9mcm9tIGFjY291bnQgaGFzCiAgICAvLyBhcHByb3ZlZCB0aGUgX2Ftb3VudCB0byBiZSBidXJudCB1c2luZyBhcHByb3ZlKDB4MCwgX2Ftb3VudCkKICAgIGZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSA+PSBfYW1vdW50KTsKCiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50CiAgICAgICAgICAgICYmIGFsbG93ZWRbX2Zyb21dWzB4MF0gPj0gX2Ftb3VudAogICAgICAgICAgICAmJiBfYW1vdW50ID4gMAogICAgICAgICAgICAmJiBiYWxhbmNlc1sweDBdICsgX2Ftb3VudCA+IGJhbGFuY2VzWzB4MF0KICAgICAgICApIHsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlc1tfZnJvbV0sX2Ftb3VudCk7CiAgICAgICAgICAgIGJhbGFuY2VzWzB4MF0gPSBzYWZlQWRkKGJhbGFuY2VzWzB4MF0sX2Ftb3VudCk7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dWzB4MF0gPSBzYWZlU3ViKGFsbG93ZWRbX2Zyb21dWzB4MF0sX2Ftb3VudCk7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZVN1Yih0b3RhbFN1cHBseSxfYW1vdW50KTsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIDB4MCwgX2Ftb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8gTG9va1JldiBjYW4gdHJhbnNmZXIgb3V0IGFueSBhY2NpZGVudGFsbHkgc2VudCBFUkMyMCB0b2tlbnMKICAgIGZ1bmN0aW9uIHRyYW5zZmVyQW55RVJDMjBUb2tlbihhZGRyZXNzIHRva2VuQWRkcmVzcywgdWludCBhbW91bnQpIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpIAogICAgewogICAgICAgIHJldHVybiBFUkMyMCh0b2tlbkFkZHJlc3MpLnRyYW5zZmVyKG93bmVyLCBhbW91bnQpOwogICAgfQp9'.
	

]
