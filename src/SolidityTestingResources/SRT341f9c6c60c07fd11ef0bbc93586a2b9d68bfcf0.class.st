Class {
	#name : #SRT341f9c6c60c07fd11ef0bbc93586a2b9d68bfcf0,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT341f9c6c60c07fd11ef0bbc93586a2b9d68bfcf0 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CgogICAgdWludCBjb25zdGFudCBEQVlfSU5fU0VDT05EUyA9IDg2NDAwOwogICAgdWludCBjb25zdGFudCBCQVNFID0gMTAwMDAwMDAwMDAwMDAwMDAwMDsKICAgIHVpbnQgY29uc3RhbnQgcHJlSWNvUHJpY2UgPSAzMDAwOwogICAgdWludCBjb25zdGFudCBpY29QcmljZSA9IDE1MDA7CgogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiAhPSAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2VG9NdWwodWludDI1NiBudW1iZXIsIHVpbnQyNTYgbnVtZXJhdG9yLCB1aW50MjU2IGRlbm9taW5hdG9yKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGRpdihtdWwobnVtYmVyLCBudW1lcmF0b3IpLCBkZW5vbWluYXRvcik7CiAgICB9CgogICAgZnVuY3Rpb24gbXVsVG9EaXYodWludDI1NiBudW1iZXIsIHVpbnQyNTYgbnVtZXJhdG9yLCB1aW50MjU2IGRlbm9taW5hdG9yKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIG11bChkaXYobnVtYmVyLCBudW1lcmF0b3IpLCBkZW5vbWluYXRvcik7CiAgICB9CgoKICAgIC8vIElDTyB2b2x1bWUgYm9udXMgY2FsY3VsYXRpb24KICAgIGZ1bmN0aW9uIHZvbHVtZUJvbnVzKHVpbnQyNTYgZXRoZXJWYWx1ZSkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmKGV0aGVyVmFsdWUgPj0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDApIHJldHVybiA1NTsgIC8vICs1NSUgdG9rZW5zCiAgICAgICAgaWYoZXRoZXJWYWx1ZSA+PSAgNTAwMDAwMDAwMDAwMDAwMDAwMDAwMCkgcmV0dXJuIDUwOyAgLy8gKzUwJSB0b2tlbnMKICAgICAgICBpZihldGhlclZhbHVlID49ICAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwKSByZXR1cm4gNDU7ICAvLyArNDUlIHRva2VucwogICAgICAgIGlmKGV0aGVyVmFsdWUgPj0gICAyMDAwMDAwMDAwMDAwMDAwMDAwMDApIHJldHVybiA0MDsgIC8vICs0MCUgdG9rZW5zCiAgICAgICAgaWYoZXRoZXJWYWx1ZSA+PSAgIDEwMDAwMDAwMDAwMDAwMDAwMDAwMCkgcmV0dXJuIDM1OyAgLy8gKzM1JSB0b2tlbnMKICAgICAgICBpZihldGhlclZhbHVlID49ICAgIDUwMDAwMDAwMDAwMDAwMDAwMDAwKSByZXR1cm4gMzA7IC8vICszMCUgdG9rZW5zCiAgICAgICAgaWYoZXRoZXJWYWx1ZSA+PSAgICAzMDAwMDAwMDAwMDAwMDAwMDAwMCkgcmV0dXJuIDI1OyAgLy8gKzI1JSB0b2tlbnMKICAgICAgICBpZihldGhlclZhbHVlID49ICAgIDIwMDAwMDAwMDAwMDAwMDAwMDAwKSByZXR1cm4gMjA7ICAvLyArMjAlIHRva2VucwogICAgICAgIGlmKGV0aGVyVmFsdWUgPj0gICAgMTAwMDAwMDAwMDAwMDAwMDAwMDApIHJldHVybiAxNTsgIC8vICsxNSUgdG9rZW5zCiAgICAgICAgaWYoZXRoZXJWYWx1ZSA+PSAgICAgNTAwMDAwMDAwMDAwMDAwMDAwMCkgcmV0dXJuIDEwOyAgLy8gKzEwJSB0b2tlbnMKICAgICAgICBpZihldGhlclZhbHVlID49ICAgICAxMDAwMDAwMDAwMDAwMDAwMDAwKSByZXR1cm4gNTsgICAvLyArNSUgdG9rZW5zCgogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIC8vIGRhdGUgYm9udXMgY2FsY3VsYXRpb24KICAgIGZ1bmN0aW9uIGRhdGVCb251cyh1aW50IHN0YXJ0SWNvLCB1aW50IGN1cnJlbnRUeXBlLCB1aW50IGRhdGV0aW1lKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYoY3VycmVudFR5cGUgPT0gMil7CiAgICAgICAgICAgIC8vIGRheSBmcm9tIElDTyBzdGFydAogICAgICAgICAgICB1aW50IGRheXNGcm9tU3RhcnQgPSAoZGF0ZXRpbWUgLSBzdGFydEljbykgLyBEQVlfSU5fU0VDT05EUyArIDE7CgogICAgICAgICAgICBpZihkYXlzRnJvbVN0YXJ0ID09IDEpICByZXR1cm4gMzA7IC8vICszMCUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tU3RhcnQgPT0gMikgIHJldHVybiAyOTsgLy8gKzI5JSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSAzKSAgcmV0dXJuIDI4OyAvLyArMjglIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVN0YXJ0ID09IDQpICByZXR1cm4gMjc7IC8vICsyNyUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tU3RhcnQgPT0gNSkgIHJldHVybiAyNjsgLy8gKzI2JSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSA2KSAgcmV0dXJuIDI1OyAvLyArMjUlIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVN0YXJ0ID09IDcpICByZXR1cm4gMjQ7IC8vICsyNCUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tU3RhcnQgPT0gOCkgIHJldHVybiAyMzsgLy8gKzIzJSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSA5KSAgcmV0dXJuIDIyOyAvLyArMjIlIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVN0YXJ0ID09IDEwKSByZXR1cm4gMjE7IC8vICsyMSUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tU3RhcnQgPT0gMTEpIHJldHVybiAyMDsgLy8gKzIwJSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSAxMikgcmV0dXJuIDE5OyAvLyArMTklIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVN0YXJ0ID09IDEzKSByZXR1cm4gMTg7IC8vICsxOCUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tU3RhcnQgPT0gMTQpIHJldHVybiAxNzsgLy8gKzE3JSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSAxNSkgcmV0dXJuIDE2OyAvLyArMTYlIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVN0YXJ0ID09IDE2KSByZXR1cm4gMTU7IC8vICsxNSUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tU3RhcnQgPT0gMTcpIHJldHVybiAxNDsgLy8gKzE0JSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSAxOCkgcmV0dXJuIDEzOyAvLyArMTMlIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVN0YXJ0ID09IDE5KSByZXR1cm4gMTI7IC8vICsxMiUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tU3RhcnQgPT0gMjApIHJldHVybiAxMTsgLy8gKzExJSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSAyMSkgcmV0dXJuIDEwOyAvLyArMTAlIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVN0YXJ0ID09IDIyKSByZXR1cm4gOTsgIC8vICs5JSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSAyMykgcmV0dXJuIDg7ICAvLyArOCUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tU3RhcnQgPT0gMjQpIHJldHVybiA3OyAgLy8gKzclIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVN0YXJ0ID09IDI1KSByZXR1cm4gNjsgIC8vICs2JSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSAyNikgcmV0dXJuIDU7ICAvLyArNSUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tU3RhcnQgPT0gMjcpIHJldHVybiA0OyAgLy8gKzQlIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVN0YXJ0ID09IDI4KSByZXR1cm4gMzsgIC8vICszJSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSAyOSkgcmV0dXJuIDI7ICAvLyArMiUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tU3RhcnQgPT0gMzApIHJldHVybiAxOyAgLy8gKzElIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVN0YXJ0ID09IDMxKSByZXR1cm4gMTsgIC8vICsxJSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSAzMikgcmV0dXJuIDE7ICAvLyArMSUgdG9rZW5zCiAgICAgICAgfQogICAgICAgIGlmKGN1cnJlbnRUeXBlID09IDEpewogICAgICAgICAgICAvLy8gZGF5IGZyb20gUHJlU2FsZSBzdGFydAogICAgICAgICAgICB1aW50IGRheXNGcm9tUHJlc2FsZVN0YXJ0ID0gKGRhdGV0aW1lIC0gc3RhcnRJY28pIC8gREFZX0lOX1NFQ09ORFMgKyAxOwoKICAgICAgICAgICAgaWYoZGF5c0Zyb21QcmVzYWxlU3RhcnQgPT0gMSkgIHJldHVybiA1NDsgIC8vICs1NCUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tUHJlc2FsZVN0YXJ0ID09IDIpICByZXR1cm4gNTE7ICAvLyArNTElIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVByZXNhbGVTdGFydCA9PSAzKSAgcmV0dXJuIDQ4OyAgLy8gKzQ4JSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21QcmVzYWxlU3RhcnQgPT0gNCkgIHJldHVybiA0NTsgIC8vICs0NSUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tUHJlc2FsZVN0YXJ0ID09IDUpICByZXR1cm4gNDI7ICAvLyArNDIlIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVByZXNhbGVTdGFydCA9PSA2KSAgcmV0dXJuIDM5OyAgLy8gKzM5JSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21QcmVzYWxlU3RhcnQgPT0gNykgIHJldHVybiAzNjsgIC8vICszNiUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tUHJlc2FsZVN0YXJ0ID09IDgpICByZXR1cm4gMzM7ICAvLyArMzMlIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVByZXNhbGVTdGFydCA9PSA5KSAgcmV0dXJuIDMwOyAgLy8gKzMwJSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21QcmVzYWxlU3RhcnQgPT0gMTApIHJldHVybiAyNzsgIC8vICsyNyUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tUHJlc2FsZVN0YXJ0ID09IDExKSByZXR1cm4gMjQ7ICAvLyArMjQlIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVByZXNhbGVTdGFydCA9PSAxMikgcmV0dXJuIDIxOyAgLy8gKzIxJSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21QcmVzYWxlU3RhcnQgPT0gMTMpIHJldHVybiAxODsgIC8vICsxOCUgdG9rZW5zCiAgICAgICAgICAgIGlmKGRheXNGcm9tUHJlc2FsZVN0YXJ0ID09IDE0KSByZXR1cm4gMTU7ICAvLyArMTUlIHRva2VucwogICAgICAgICAgICBpZihkYXlzRnJvbVByZXNhbGVTdGFydCA9PSAxNSkgcmV0dXJuIDEyOyAgLy8gKzEyJSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21QcmVzYWxlU3RhcnQgPT0gMTYpIHJldHVybiA5OyAgIC8vICs5JSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21QcmVzYWxlU3RhcnQgPT0gMTcpIHJldHVybiA2OyAgIC8vICs2JSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21QcmVzYWxlU3RhcnQgPT0gMTgpIHJldHVybiA0OyAgIC8vICs0JSB0b2tlbnMKICAgICAgICAgICAgaWYoZGF5c0Zyb21QcmVzYWxlU3RhcnQgPT0gMTkpIHJldHVybiAwOyAgIC8vICswJSB0b2tlbnMKICAgICAgICB9CgogICAgICAgIC8vIG5vIGRpc2NvdW50CiAgICAgICAgcmV0dXJuIDA7CiAgICB9Cn0KCgovLy8gSW1wbGVtZW50cyBFUkMgMjAgVG9rZW4gc3RhbmRhcmQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAovLy8gQHRpdGxlIEFic3RyYWN0IHRva2VuIGNvbnRyYWN0IC0gRnVuY3Rpb25zIHRvIGJlIGltcGxlbWVudGVkIGJ5IHRva2VuIGNvbnRyYWN0cy4KCmNvbnRyYWN0IEFic3RyYWN0VG9rZW4gewogICAgLy8gVGhpcyBpcyBub3QgYW4gYWJzdHJhY3QgZnVuY3Rpb24sIGJlY2F1c2Ugc29sYyB3b24ndCByZWNvZ25pemUgZ2VuZXJhdGVkIGdldHRlciBmdW5jdGlvbnMgZm9yIHB1YmxpYyB2YXJpYWJsZXMgYXMgZnVuY3Rpb25zCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHt9CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBvd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IElzc3VhbmNlKGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQWJzdHJhY3RUb2tlbiB7CiAgICAvKgogICAgICogIERhdGEgc3RydWN0dXJlcwogICAgICovCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBvd25lckFwcGVuZGVkOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBhZGRyZXNzW10gcHVibGljIG93bmVyczsKCiAgICAvKgogICAgICogIFJlYWQgYW5kIHdyaXRlIHN0b3JhZ2UgZnVuY3Rpb25zCiAgICAgKi8KICAgIC8vLyBAZGV2IFRyYW5zZmVycyBzZW5kZXIncyB0b2tlbnMgdG8gYSBnaXZlbiBhZGRyZXNzLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIHRva2VuIHJlY2VpdmVyLgogICAgLy8vIEBwYXJhbSBfdmFsdWUgTnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBpZighb3duZXJBcHBlbmRlZFtfdG9dKSB7CiAgICAgICAgICAgICAgICBvd25lckFwcGVuZGVkW190b10gPSB0cnVlOwogICAgICAgICAgICAgICAgb3duZXJzLnB1c2goX3RvKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgYWxsb3dlZCB0aGlyZCBwYXJ0eSB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF9mcm9tIEFkZHJlc3MgZnJvbSB3aGVyZSB0b2tlbnMgYXJlIHdpdGhkcmF3bi4KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3MgdG8gd2hlcmUgdG9rZW5zIGFyZSBzZW50LgogICAgLy8vIEBwYXJhbSBfdmFsdWUgTnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBpZighb3duZXJBcHBlbmRlZFtfdG9dKSB7CiAgICAgICAgICAgICAgICBvd25lckFwcGVuZGVkW190b10gPSB0cnVlOwogICAgICAgICAgICAgICAgb3duZXJzLnB1c2goX3RvKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIEBkZXYgUmV0dXJucyBudW1iZXIgb2YgdG9rZW5zIG93bmVkIGJ5IGdpdmVuIGFkZHJlc3MuCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAvLy8gQGRldiBTZXRzIGFwcHJvdmVkIGFtb3VudCBvZiB0b2tlbnMgZm9yIHNwZW5kZXIuIFJldHVybnMgc3VjY2Vzcy4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiBhbGxvd2VkIGFjY291bnQuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBOdW1iZXIgb2YgYXBwcm92ZWQgdG9rZW5zLgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoKICAgICAqIFJlYWQgc3RvcmFnZSBmdW5jdGlvbnMKICAgICAqLwogICAgLy8vIEBkZXYgUmV0dXJucyBudW1iZXIgb2YgYWxsb3dlZCB0b2tlbnMgZm9yIGdpdmVuIGFkZHJlc3MuCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHRva2VuIHNwZW5kZXIuCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cgp9CgoKY29udHJhY3QgVklOTkRUb2tlbkNvbnRyYWN0IGlzIFN0YW5kYXJkVG9rZW4sIFNhZmVNYXRoIHsKICAgIC8qCiAgICAgKiBUb2tlbiBtZXRhIGRhdGEKICAgICAqLwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlZJTk5EIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlZJTiI7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIC8vIHRvdHRhbCBzdXBwbHkKCiAgICBhZGRyZXNzIHB1YmxpYyBpY29Db250cmFjdCA9IDB4MDsKICAgIC8qCiAgICAgKiBNb2RpZmllcnMKICAgICAqLwoKICAgIG1vZGlmaWVyIG9ubHlJY29Db250cmFjdCgpIHsKICAgICAgICAvLyBvbmx5IElDTyBjb250cmFjdCBpcyBhbGxvd2VkIHRvIHByb2NlZWQKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gaWNvQ29udHJhY3QpOwogICAgICAgIF87CiAgICB9CgogICAgLyoKICAgICAqIENvbnRyYWN0IGZ1bmN0aW9ucwogICAgICovCgogICAgLy8vIEBkZXYgQ29udHJhY3QgaXMgbmVlZGVkIGluIGljb0NvbnRyYWN0IGFkZHJlc3MKICAgIC8vLyBAcGFyYW0gX2ljb0NvbnRyYWN0IEFkZHJlc3Mgb2YgYWNjb3VudCB3aGljaCB3aWxsIGJlIG1pbnQgdG9rZW5zCiAgICBmdW5jdGlvbiBWSU5ORFRva2VuQ29udHJhY3QoYWRkcmVzcyBfaWNvQ29udHJhY3QpIHBheWFibGV7CiAgICAgICAgYXNzZXJ0KF9pY29Db250cmFjdCAhPSAweDApOwogICAgICAgIGljb0NvbnRyYWN0ID0gX2ljb0NvbnRyYWN0OwogICAgfQoKICAgIC8vLyBAZGV2IEJ1cm5zIHRva2VucyBmcm9tIGFkZHJlc3MuIEl0J3MgY2FuIGJlIGFwcGxpZWQgYnkgYWNjb3VudCB3aXRoIGFkZHJlc3MgdGhpcy5pY29Db250cmFjdAogICAgLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIG9mIGFjY291bnQsIGZyb20gd2hpY2ggd2lsbCBiZSBidXJuZWQgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBBbW91bnQgb2YgdG9rZW5zLCB0aGF0IHdpbGwgYmUgYnVybmVkCiAgICBmdW5jdGlvbiBidXJuVG9rZW5zKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKSBvbmx5SWNvQ29udHJhY3QgewogICAgICAgIGFzc2VydChfZnJvbSAhPSAweDApOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHN1YihiYWxhbmNlc1tfZnJvbV0sIF92YWx1ZSk7CiAgICB9CgogICAgLy8vIEBkZXYgQWRkcyB0b2tlbnMgdG8gYWRkcmVzcy4gSXQncyBjYW4gYmUgYXBwbGllZCBieSBhY2NvdW50IHdpdGggYWRkcmVzcyB0aGlzLmljb0NvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIGFjY291bnQgdG8gd2hpY2ggdGhlIHRva2VucyB3aWxsIHBhc3MKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEFtb3VudCBvZiB0b2tlbnMKICAgIGZ1bmN0aW9uIGVtaXRUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5SWNvQ29udHJhY3QgewogICAgICAgIGFzc2VydChfdG8gIT0gMHgwKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwoKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYWRkKGJhbGFuY2VzW190b10sIF92YWx1ZSk7CgogICAgICAgIGlmKCFvd25lckFwcGVuZGVkW190b10pIHsKICAgICAgICAgICAgb3duZXJBcHBlbmRlZFtfdG9dID0gdHJ1ZTsKICAgICAgICAgICAgb3duZXJzLnB1c2goX3RvKTsKICAgICAgICB9CgogICAgfQoKICAgIGZ1bmN0aW9uIGdldE93bmVyKHVpbnQgaW5kZXgpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MsIHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gKG93bmVyc1tpbmRleF0sIGJhbGFuY2VzW293bmVyc1tpbmRleF1dKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRPd25lckNvdW50KCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBvd25lcnMubGVuZ3RoOwogICAgfQoKfQoKCmNvbnRyYWN0IFZJTkNvbnRyYWN0IGlzIFNhZmVNYXRoIHsKICAgIC8qCiAgICAgKiBJQ08gbWV0YSBkYXRhCiAgICAgKi8KICAgIFZJTk5EVG9rZW5Db250cmFjdCBwdWJsaWMgVklOVG9rZW47CgogICAgZW51bSBTdGFnZXsKICAgIFBhdXNlLAogICAgSW5pdCwKICAgIFJ1bm5pbmcsCiAgICBTdG9wcGVkCiAgICB9CgogICAgZW51bSBUeXBlewogICAgUFJFU0FMRSwKICAgIElDTwogICAgfQoKICAgIC8vIEluaXRpYWxpemluZyBjdXJyZW50IHN0ZXBzCiAgICBTdGFnZSBwdWJsaWMgY3VycmVudFN0YWdlID0gU3RhZ2UuUGF1c2U7CiAgICBUeXBlIHB1YmxpYyBjdXJyZW50VHlwZSA9IFR5cGUuUFJFU0FMRTsKCiAgICAvLyBTZXR0aW5nIGNvbnN0YW50IGRhdGVzIFVUQwoKICAgIC8vIDExLjEyLjIwMTcgMDA6MDA6MDAKICAgIHVpbnQgcHVibGljIHN0YXJ0UHJlc2FsZURhdGUgPSAxNTEyOTUwNDAwOwogICAgLy8gMjkuMTIuMjAxNyAyMzo1OTo1OQogICAgdWludCBwdWJsaWMgZW5kUHJlc2FsZURhdGUgPSAxNTE0NTkxOTk5OwogICAgLy8gMTguMDEuMjAxOCAwMDowMDowMAogICAgdWludCBwdWJsaWMgc3RhcnRJQ09EYXRlID0gMTUxNjIzMzYwMDsKICAgIC8vIDE4LjAyLjIwMTggMjM6NTk6NTkKICAgIHVpbnQgcHVibGljIGVuZElDT0RhdGUgPSAxNTE4OTk4Mzk5OwoKICAgIC8vIEFkZHJlc3Mgb2YgbWFuYWdlcgogICAgYWRkcmVzcyBwdWJsaWMgaWNvT3duZXI7CgogICAgLy8gQWRkcmVzc2VzIG9mIGZvdW5kZXJzIGFuZCBib3VudHlPd25lcgogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlcjsKICAgIGFkZHJlc3MgcHVibGljIGJvdW50eU93bmVyOwoKICAgIC8vIDg4OC44ODguODg4IFZJTiBhbGwgdG9rZW5zCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCB0b3RhbENhcCAgID0gODg4ODg4ODg4MDAwMDAwMDAwMDAwMDAwMDAwOwogICAgLy8gNTM0LjQ0NC40NDQgaWNvIGNhcAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgSUNPQ2FwICAgICA9IDUzNDQ0NDQ0NDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgIC8vICAyOC44ODguODg4IHByZXNhbGUgY2FwCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBwcmVzYWxlQ2FwID0gIDI4ODg4ODg4MDAwMDAwMDAwMDAwMDAwMDAwOwoKICAgIC8vICAxNC40NDQuNDQ0IFZJTiBpcyB0b3RhbCBib3VudHkgdG9rZW5zCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCB0b3RhbEJvdW50eVRva2VucyA9IDE0NDQ0NDQ0MDAwMDAwMDAwMDAwMDAwMDAwOwoKICAgIC8vIDEgRVRIID0gMzAwMCBWSU4KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFBSSUNFID0gMzAwMDsKICAgIC8vIDEgRVRIID0gMTUwMCBWSU4KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IElDT1BSSUNFID0gMTUwMDsKCiAgICAvLyAyMDE4LjAyLjIwIDAwOjAwIFVUQwogICAgLy8gZm91bmRlcnMnIHJld2FyZCB0aW1lCiAgICB1aW50IHB1YmxpYyBmb3VuZGVyc1Jld2FyZFRpbWUgPSAxNTE5MDg0ODAwOwoKICAgIC8vIEFtb3VudCBvZiBzb2xkIHRva2VucyBvbiBJQ08KICAgIHVpbnQgcHVibGljIHRvdGFsU29sZE9uSUNPID0gMDsKICAgIC8vIEFtb3VudCBvZiBpc3N1ZWQgdG9rZW5zIG9uIHByZS1JQ08KICAgIHVpbnQgcHVibGljIHRvdGFsU29sZE9uUHJlc2FsZSA9IDA7CgoKICAgIC8vID8gVG9rZW5zIGFscmVhZHkgc2VudCBGb3VuZGVyCiAgICBib29sIHB1YmxpYyBzZW50VG9rZW5zVG9Gb3VuZGVycyA9IGZhbHNlOwoKICAgIC8vIEJvb2xlYW4gc2V0IGZvdW5kZXIKICAgIGJvb2wgcHVibGljIHNldEZvdW5kZXIgPSBmYWxzZTsKICAgIGJvb2wgcHVibGljIHNldEJvdW50eSA9IGZhbHNlOwoKICAgIHVpbnQgcHVibGljIHRvdGFsRXRoZXIgPSAwOwoKICAgIC8qCiAgICAgKiBNb2RpZmllcnMKICAgICAqLwoKICAgIG1vZGlmaWVyIHdoZW5Jbml0aWFsaXplZCgpIHsKICAgICAgICAvLyBvbmx5IHdoZW4gY29udHJhY3QgaXMgaW5pdGlhbGl6ZWQKICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGFnZSA+PSBTdGFnZS5Jbml0KTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlNYW5hZ2VyKCkgewogICAgICAgIC8vIG9ubHkgSUNPIG1hbmFnZXIgY2FuIGRvIHRoaXMgYWN0aW9uCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGljb093bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9uU3RhZ2VSdW5uaW5nKCkgewogICAgICAgIC8vIENoZWNrcywgaWYgSUNPIGlzIHJ1bm5pbmcgYW5kIGhhcyBub3QgYmVlbiBzdG9wcGVkCiAgICAgICAgcmVxdWlyZShjdXJyZW50U3RhZ2UgPT0gU3RhZ2UuUnVubmluZyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvblN0YWdlU3RvcHBlZCgpIHsKICAgICAgICAvLyBDaGVja3MgaWYgSUNPIHdhcyBzdG9wcGVkIG9yIGRlYWRsaW5lIGlzIHJlYWNoZWQKICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGFnZSA9PSBTdGFnZS5TdG9wcGVkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGNoZWNrVHlwZSgpIHsKICAgICAgICByZXF1aXJlKGN1cnJlbnRUeXBlID09IFR5cGUuSUNPIHx8IGN1cnJlbnRUeXBlID09IFR5cGUuUFJFU0FMRSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBjaGVja0RhdGVUaW1lKCl7CiAgICAgICAgaWYoY3VycmVudFR5cGUgPT0gVHlwZS5QUkVTQUxFKXsKICAgICAgICAgICAgcmVxdWlyZShzdGFydFByZXNhbGVEYXRlIDwgbm93ICYmIG5vdyA8IGVuZFByZXNhbGVEYXRlKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgcmVxdWlyZShzdGFydElDT0RhdGUgPCBub3cgJiYgbm93IDwgZW5kSUNPRGF0ZSk7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgLy8vIEBkZXYgQ29uc3RydWN0b3Igb2YgSUNPCiAgICBmdW5jdGlvbiBWSU5Db250cmFjdCgpIHBheWFibGV7CiAgICAgICAgVklOVG9rZW4gPSBuZXcgVklOTkRUb2tlbkNvbnRyYWN0KHRoaXMpOwogICAgICAgIGljb093bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvLy8gQGRldiBJbml0aWFsaXNlcyBhZGRyZXNzZXMgb2YgZm91bmRlcnMsIGJvdW50eU93bmVyLgogICAgLy8vIEluaXRpYWxpc2VzIGJhbGFuY2VzIG9mIHRva2VucyBvd25lcgogICAgLy8vIEBwYXJhbSBfZm91bmRlciBBZGRyZXNzIG9mIGZvdW5kZXIKICAgIC8vLyBAcGFyYW0gX2JvdW50eSBBZGRyZXNzIG9mIGJvdW50eQogICAgZnVuY3Rpb24gaW5pdGlhbGl6ZShhZGRyZXNzIF9mb3VuZGVyLCBhZGRyZXNzIF9ib3VudHkpIG9ubHlNYW5hZ2VyIHsKICAgICAgICBhc3NlcnQoY3VycmVudFN0YWdlICE9IFN0YWdlLkluaXQpOwogICAgICAgIGFzc2VydChfZm91bmRlciAhPSAweDApOwogICAgICAgIGFzc2VydChfYm91bnR5ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZSghc2V0Rm91bmRlcik7CiAgICAgICAgcmVxdWlyZSghc2V0Qm91bnR5KTsKCiAgICAgICAgZm91bmRlciA9IF9mb3VuZGVyOwogICAgICAgIGJvdW50eU93bmVyID0gX2JvdW50eTsKCiAgICAgICAgVklOVG9rZW4uZW1pdFRva2VucyhfYm91bnR5LCB0b3RhbEJvdW50eVRva2Vucyk7CgogICAgICAgIHNldEZvdW5kZXIgPSB0cnVlOwogICAgICAgIHNldEJvdW50eSA9IHRydWU7CgogICAgICAgIGN1cnJlbnRTdGFnZSA9IFN0YWdlLkluaXQ7CiAgICB9CgogICAgLy8vIEBkZXYgU2V0cyBuZXcgdHlwZQogICAgLy8vIEBwYXJhbSBfdHlwZSBWYWx1ZSBvZiBuZXcgdHlwZQogICAgZnVuY3Rpb24gc2V0VHlwZShUeXBlIF90eXBlKSBwdWJsaWMgb25seU1hbmFnZXIgb25TdGFnZVN0b3BwZWR7CiAgICAgICAgY3VycmVudFR5cGUgPSBfdHlwZTsKICAgIH0KCiAgICAvLy8gQGRldiBTZXRzIG5ldyBzdGFnZQogICAgLy8vIEBwYXJhbSBfc3RhZ2UgVmFsdWUgb2YgbmV3IHN0YWdlCiAgICBmdW5jdGlvbiBzZXRTdGFnZShTdGFnZSBfc3RhZ2UpIHB1YmxpYyBvbmx5TWFuYWdlcnsKICAgICAgICBjdXJyZW50U3RhZ2UgPSBfc3RhZ2U7CiAgICB9CgoKICAgIC8vLyBAZGV2IFNldHMgbmV3IG93bmVyLiBPbmx5IG1hbmFnZXIgY2FuIGRvIGl0CiAgICAvLy8gQHBhcmFtIF9uZXdpY29Pd25lciBBZGRyZXNzIG9mIG5ldyBJQ08gbWFuYWdlcgogICAgZnVuY3Rpb24gc2V0TmV3T3duZXIoYWRkcmVzcyBfbmV3aWNvT3duZXIpIG9ubHlNYW5hZ2VyIHsKICAgICAgICBhc3NlcnQoX25ld2ljb093bmVyICE9IDB4MCk7CiAgICAgICAgaWNvT3duZXIgPSBfbmV3aWNvT3duZXI7CiAgICB9CgogICAgLy8vIEBkZXYgQnV5IHF1YW50aXR5IG9mIHRva2VucyBkZXBlbmRpbmcgb24gdGhlIGFtb3VudCBvZiBzZW50IGV0aGVycy4KICAgIC8vLyBAcGFyYW0gX2J1eWVyIEFkZHJlc3Mgb2YgYWNjb3VudCB3aGljaCB3aWxsIHJlY2VpdmUgdG9rZW5zCiAgICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBfYnV5ZXIsIHVpbnQgZGF0ZXRpbWUsIHVpbnQgX3ZhbHVlKSBwcml2YXRlIHsKICAgICAgICBhc3NlcnQoX2J1eWVyICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKCiAgICAgICAgdWludCBkYXRlQm9udXNQZXJjZW50ID0gMDsKICAgICAgICB1aW50IHRva2Vuc1RvRW1pdCA9IDA7CgogICAgICAgIC8vY2FsY3VsYXRlIGRhdGUgYm9udXMgYW5kIHNldCBlbWl0VG9rZW5QcmljZQogICAgICAgIGlmKGN1cnJlbnRUeXBlID09IFR5cGUuUFJFU0FMRSl7CiAgICAgICAgICAgIHRva2Vuc1RvRW1pdCA9IF92YWx1ZSAqIFBSSUNFOwogICAgICAgICAgICBkYXRlQm9udXNQZXJjZW50ID0gZGF0ZUJvbnVzKHN0YXJ0UHJlc2FsZURhdGUsIDEsIGRhdGV0aW1lKTsKICAgICAgICB9CiAgICAgICAgZWxzZXsKICAgICAgICAgICAgdG9rZW5zVG9FbWl0ID0gX3ZhbHVlICogSUNPUFJJQ0U7CiAgICAgICAgICAgIGRhdGVCb251c1BlcmNlbnQgPSBkYXRlQm9udXMoc3RhcnRJQ09EYXRlLCAyLCBkYXRldGltZSk7CiAgICAgICAgfQoKICAgICAgICAvL2NhbGN1bGF0ZSB2b2x1bWUgYm9udXMKICAgICAgICB1aW50IHZvbHVtZUJvbnVzUGVyY2VudCA9IHZvbHVtZUJvbnVzKF92YWx1ZSk7CgogICAgICAgIC8vdG90YWwgYm9udXMgdG9rZW5zCiAgICAgICAgdWludCB0b3RhbEJvbnVzUGVyY2VudCA9IGRhdGVCb251c1BlcmNlbnQgKyB2b2x1bWVCb251c1BlcmNlbnQ7CgogICAgICAgIGlmKHRvdGFsQm9udXNQZXJjZW50ID4gMCl7CiAgICAgICAgICAgIHRva2Vuc1RvRW1pdCA9ICB0b2tlbnNUb0VtaXQgKyBkaXZUb011bCh0b2tlbnNUb0VtaXQsIHRvdGFsQm9udXNQZXJjZW50LCAxMDApOwogICAgICAgIH0KCiAgICAgICAgaWYoY3VycmVudFR5cGUgPT0gVHlwZS5QUkVTQUxFKXsKICAgICAgICAgICAgcmVxdWlyZShhZGQodG90YWxTb2xkT25QcmVzYWxlLCB0b2tlbnNUb0VtaXQpIDw9IHByZXNhbGVDYXApOwogICAgICAgICAgICB0b3RhbFNvbGRPblByZXNhbGUgPSBhZGQodG90YWxTb2xkT25QcmVzYWxlLCB0b2tlbnNUb0VtaXQpOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgICByZXF1aXJlKGFkZCh0b3RhbFNvbGRPbklDTywgdG9rZW5zVG9FbWl0KSA8PSBJQ09DYXApOwogICAgICAgICAgICB0b3RhbFNvbGRPbklDTyA9IGFkZCh0b3RhbFNvbGRPbklDTywgdG9rZW5zVG9FbWl0KTsKICAgICAgICB9CgogICAgICAgIC8vZW1pdCB0b2tlbnMgdG8gdG9rZW4gaG9sZGVyCiAgICAgICAgVklOVG9rZW4uZW1pdFRva2VucyhfYnV5ZXIsIHRva2Vuc1RvRW1pdCk7CgogICAgICAgIHRvdGFsRXRoZXIgPSBhZGQodG90YWxFdGhlciwgX3ZhbHVlKTsKICAgIH0KCiAgICAvLy8gQGRldiBGYWxsIGJhY2sgZnVuY3Rpb24gfjUway0xMDBrIGdhcwogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSBvblN0YWdlUnVubmluZyBjaGVja1R5cGUgY2hlY2tEYXRlVGltZXsKICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlciwgbm93LCBtc2cudmFsdWUpOwogICAgfQoKICAgIC8vLyBAZGV2IEJ1cm4gdG9rZW5zIGZyb20gYWNjb3VudHMuIE9ubHkgbWFuYWdlciBjYW4gZG8gaXQKICAgIC8vLyBAcGFyYW0gX2Zyb20gQWRkcmVzcyBvZiBhY2NvdW50CiAgICBmdW5jdGlvbiBidXJuVG9rZW5zKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKSBvbmx5TWFuYWdlcnsKICAgICAgICBWSU5Ub2tlbi5idXJuVG9rZW5zKF9mcm9tLCBfdmFsdWUpOwogICAgfQoKCiAgICAvLy8gQGRldiBTZW5kIHRva2VucyB0byBmb3VuZGVycy4gQ2FuIGJlIHNlbnQgb25seSBhZnRlciBWSU5Ub2tlbi5yZXdhcmRUaW1lCiAgICBmdW5jdGlvbiBzZW5kVG9rZW5zVG9Gb3VuZGVycygpIG9ubHlNYW5hZ2VyIHdoZW5Jbml0aWFsaXplZCB7CiAgICAgICAgcmVxdWlyZSghc2VudFRva2Vuc1RvRm91bmRlcnMgJiYgbm93ID49IGZvdW5kZXJzUmV3YXJkVGltZSk7CgogICAgICAgIC8vQ2FsY3VsYXRlIHRvdGFsIHRva2VucyBzb2xkIG9uIHByZS1JQ08gYW5kIElDTwogICAgICAgIHVpbnQgdG9rZW5zU29sZCA9IGFkZCh0b3RhbFNvbGRPbklDTywgdG90YWxTb2xkT25QcmVzYWxlKTsKICAgICAgICB1aW50IHRvdGFsVG9rZW5Ub1NvbGQgPSBhZGQoSUNPQ2FwLCBwcmVzYWxlQ2FwKTsKCiAgICAgICAgdWludCB4ID0gbXVsKG11bCh0b2tlbnNTb2xkLCB0b3RhbENhcCksIDM1KTsKICAgICAgICB1aW50IHkgPSBtdWwoMTAwLCB0b3RhbFRva2VuVG9Tb2xkKTsKICAgICAgICB1aW50IHJlc3VsdCA9IGRpdih4LCB5KTsKCiAgICAgICAgVklOVG9rZW4uZW1pdFRva2Vucyhmb3VuZGVyLCByZXN1bHQpOwoKICAgICAgICBzZW50VG9rZW5zVG9Gb3VuZGVycyA9IHRydWU7CiAgICB9CgogICAgLy8vIEBkZXYgU2VuZCB0b2tlbnMgdG8gb3RoZXIgd2FsbGV0cwogICAgLy8vIEBwYXJhbSBfYnV5ZXIgQWRkcmVzcyBvZiBhY2NvdW50IHdoaWNoIHdpbGwgcmVjZWl2ZSB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX2RhdGV0aW1lIGRhdGV0aW1lIG9mIHRyYW5zYWN0aW9uCiAgICAvLy8gQHBhcmFtIF9ldGhlciBldGhlciB2YWx1ZQogICAgZnVuY3Rpb24gZW1pdFRva2Vuc1RvT3RoZXJXYWxsZXQoYWRkcmVzcyBfYnV5ZXIsIHVpbnQgX2RhdGV0aW1lLCB1aW50IF9ldGhlcikgb25seU1hbmFnZXIgY2hlY2tUeXBlewogICAgICAgIGFzc2VydChfYnV5ZXIgIT0gMHgwKTsKICAgICAgICBidXlUb2tlbnMoX2J1eWVyLCBfZGF0ZXRpbWUsIF9ldGhlciAqIDEwICoqIDE4KTsKICAgIH0KfQ=='.
	

]
