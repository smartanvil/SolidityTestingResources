Class {
	#name : #SRT7703C35CfFdC5CDa8D27aa3df2F9ba6964544b6e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7703C35CfFdC5CDa8D27aa3df2F9ba6964544b6e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgppbnRlcmZhY2UgdG9rZW5SZWNpcGllbnQgeyBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKTsgfQoKY29udHJhY3Qgb3duZWQgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgZnVuY3Rpb24gb3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KfQoKY29udHJhY3QgUHlsb25Ub2tlbiBpcyBvd25lZCB7CiAgICAvLyBQdWJsaWMgdmFyaWFibGVzIG9mIHRoZSB0b2tlbgogICAgc3RyaW5nIHB1YmxpYyBzdGFuZGFyZCA9ICJQeWxvbiBUb2tlbiAtIFRoZSBmaXJzdCBkZWNlbnRyYWxpemVkIGVuZXJneSBleGNoYW5nZSBwbGF0Zm9ybSBwb3dlcmVkIGJ5IHJlbmV3YWJsZSBlbmVyZ3kiOwogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gJ1B5bG9uIFRva2VuJzsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gJ1BZTE5UJzsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDE4OwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSAzNzUwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwoKICAgIC8vIFRoaXMgY3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBiYWxhbmNlcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgZnJvemVuQWNjb3VudDsKCiAgICAvLyBUaGlzIG5vdGlmaWVzIGFib3V0IGFjY291bnRzIGxvY2tlZAogICAgZXZlbnQgRnJvemVuRnVuZHMoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJvemVuKTsKCiAgICAvLyBUaGlzIGdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8vIFRoaXMgbm90aWZpZXMgY2xpZW50cyBhYm91dCB0aGUgYW1vdW50IGJ1cm50CiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50MjU2IHZhbHVlKTsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeSA9IDB4QUUwMTUxQ2E4QzliNkExQTdCNTBDZTgwQmY3NDM2NDAwRTIyYjUzNTsgIC8vQ2hpcC1jaGFwIEtsZW5lcmd5IEFkZHJlc3Mgb2YgZXRoZXIgYmVuZWZpY2lhcnkgYWNjb3VudAogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ0dvYWwgPSAyMTIzMDQzNDc4MjYwODcwMDAwMDAwMDsgICAgIC8vIEZvdW5kaWcgZ29hbCBpbiB3ZWlzID0gMjEyMzAsNDM0NzgyNjA4NzAwMDAwMDAwIEV0aGVycwogICAgdWludDI1NiBwdWJsaWMgYW1vdW50UmFpc2VkOyAgICAvLyBRdWFudGl0eSBvZiB3ZWlzIGludmVzdGVkcwogICAgdWludDI1NiBwdWJsaWMgZGVhZGxpbmU7IC8vIGR1cmF0aW9uSW5NaW51dGVzICogNjAgLyAxNyArIDUwMDA7ICAgICAgICAvLyBMYXN0IG1vbWVudCB0byBpbnZlc3QKICAgIHVpbnQyNTYgcHVibGljIHByaWNlID0gNjYwODY5NTY1MjE3MzkxMDsgICAgICAgICAgIC8vIEV0aGVyIGNvc3Qgb2YgZWFjaCB0b2tlbiBpbiB3ZWlzIDAsMDA2NjA4Njk1NjUyMTczOTEwIGV0aGVycwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsVG9rZW5zVG9TZW5kID0gMzI1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsgLy8gVG90YWwgdG9rZW5zIG9mZmVyZWQgaW4gdGhlIHRvdGFsIElDTwoKICAgIHVpbnQyNTYgcHVibGljIG1heEV0aGVySW52ZXN0bWVudCA9IDgyNjA4Njk1NjUyMTczOTAwMDAwMDsgLy9FdGhlcnMuIFRvIG1vZmlmeSB0aGUgZGF5IHdoZW4gc3RhcnRzIGNyb3dkc2FsZSwgZXF1aXZhbGVudCB0byAxOTAuMDAw4oKsID0gODI2LDA4Njk1NjUyMTczOTAwMDAwMCBldGhlcgogICAgdWludDI1NiBwdWJsaWMgbWF4VG9rZW5zID0gMjk3NjE5MDQ3NjE5MDQ4MDAwMDAwMDAwOyAvLyAyOTcsNjE5LjA0NzYxOTA0ODAwMDAwMDAwMCBQWUxOVCA9IDE5MC4wMDAg4oKsICsgNTYlIGJvbnVzCgogICAgdWludDI1NiBwdWJsaWMgYm9udXNDYXAgPSA3NTAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7IC8vIDc1MCwwMDAuMDAwMDAwMDAwMDAwMDAwMDAwIFBZTE5UIGxhc3QgZGF5IGJlZm9yZSBDcm93ZHNhbGUgYXMgMSw1MuKCrC90b2tlbgogICAgdWludDI1NiBwdWJsaWMgcHlsb25TZWxsZWQgPSAwOwoKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0QmxvY2tCb251czsKCiAgICB1aW50MjU2IHB1YmxpYyBlbmRCbG9ja0JvbnVzMTsKCiAgICB1aW50MjU2IHB1YmxpYyBlbmRCbG9ja0JvbnVzMjsKCiAgICB1aW50MjU2IHB1YmxpYyBlbmRCbG9ja0JvbnVzMzsKCiAgICB1aW50MjU2IHB1YmxpYyBxbnQxMGsgPSA2NTc4OTQ3MzY4NDIxMDUwMDAwMDAwOyAvLyA2LDU3OC45NDczNjg0MjEwNTAwMDAwMDAgUFlMTlQgPSAxMC4wMDAg4oKsCgogICAgYm9vbCBmdW5kaW5nR29hbFJlYWNoZWQgPSBmYWxzZTsgLy8gSWYgZm91bmRpbmcgZ29hbCBpcyByZWFjaGVkIG9yIG5vdAogICAgYm9vbCBjcm93ZHNhbGVDbG9zZWQgPSBmYWxzZTsgICAgLy8gSWYgY3Jvd2RzYWxlIGlzIGNsb3NlZCBvciBvcGVuCgogICAgZXZlbnQgR29hbFJlYWNoZWQoYWRkcmVzcyBkZXBvc2l0LCB1aW50MjU2IGFtb3VudERlcG9zaXRlZCk7CiAgICBldmVudCBGdW5kVHJhbnNmZXIoYWRkcmVzcyBiYWNrZXIsIHVpbnQyNTYgYW1vdW50LCBib29sIGlzQ29udHJpYnV0aW9uKTsKICAgIGV2ZW50IExvZ1F1YW50aXR5KHVpbnQyNTYgX2Ftb3VudCwgc3RyaW5nIF9tZXNzYWdlKTsKCiAgICAvLyBDaGVxdWVhcgogICAgdWludDI1NiBwdWJsaWMgc3RhcnRCbG9jayA9IGdldEJsb2NrTnVtYmVyKCk7CgogICAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgogICAgLy91aW50MjU2IHB1YmxpYyBiYWxhbmNlSW52ZXN0b3I7CiAgICAvL3VpbnQyNTYgcHVibGljIHVsdGltb3NUb2tlbnNFbnRyZWdhZG9zOwoKICAgIG1vZGlmaWVyIGNvbnRyaWJ1dGlvbk9wZW4oKSB7CiAgICAgICAgcmVxdWlyZShnZXRCbG9ja051bWJlcigpID49IHN0YXJ0QmxvY2sgJiYgZ2V0QmxvY2tOdW1iZXIoKSA8PSBkZWFkbGluZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBub3RQYXVzZWQoKSB7CiAgICAgICAgcmVxdWlyZSghcGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyb3dkc2FsZSgpIG9ubHlPd25lcnsKICAgICAgICBwYXVzZWQgPSBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIGV2ZW50IGZvciB0b2tlbiBwdXJjaGFzZSBsb2dnaW5nCiAgICAgKiBAcGFyYW0gcHVyY2hhc2VyIHdobyBwYWlkIGZvciB0aGUgdG9rZW5zCiAgICAgKiBAcGFyYW0gaW52ZXN0b3Igd2hvIGdvdCB0aGUgdG9rZW5zCiAgICAgKiBAcGFyYW0gdmFsdWUgd2VpcyBwYWlkIGZvciBwdXJjaGFzZQogICAgICogQHBhcmFtIGFtb3VudCBhbW91bnQgb2YgdG9rZW5zIHB1cmNoYXNlZAogICAgICovCiAgICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIGFkZHJlc3MgaW5kZXhlZCBpbnZlc3RvciwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBhbW91bnQpOwoKICAgIC8qKgogICAgICogQ29uc3RyY3RvciBmdW5jdGlvbgogICAgICoKICAgICAqIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdAogICAgICovCiAgICBmdW5jdGlvbiBQeWxvblRva2VuKAogICAgICAgIHVpbnQyNTYgaW5pdGlhbFN1cHBseSwKICAgICAgICBzdHJpbmcgdG9rZW5OYW1lLAogICAgICAgIHVpbnQ4IGRlY2ltYWxVbml0cywKICAgICAgICBzdHJpbmcgdG9rZW5TeW1ib2wsCiAgICAgICAgYWRkcmVzcyBjZW50cmFsTWludGVyLAogICAgICAgIGFkZHJlc3MgaWZTdWNjZXNzZnVsU2VuZFRvLAogICAgICAgIHVpbnQyNTYgZnVuZGluZ0dvYWxJbldlaXMsCiAgICAgICAgdWludDI1NiBkdXJhdGlvbkluTWludXRlcywKICAgICAgICB1aW50MjU2IHdlaXNDb3N0T2ZFYWNoVG9rZW4KICAgICkgewogICAgICAgIGlmIChjZW50cmFsTWludGVyICE9IDApIG93bmVyID0gY2VudHJhbE1pbnRlcjsKCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgIC8vIEdpdmUgdGhlIGNyZWF0b3IgYWxsIGluaXRpYWwgdG9rZW5zCiAgICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbCBzdXBwbHkKICAgICAgICBuYW1lID0gdG9rZW5OYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBuYW1lIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgc3ltYm9sID0gdG9rZW5TeW1ib2w7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgc3ltYm9sIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgZGVjaW1hbHMgPSBkZWNpbWFsVW5pdHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtb3VudCBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3NlcwoKICAgICAgICBiZW5lZmljaWFyeSA9IGlmU3VjY2Vzc2Z1bFNlbmRUbzsKICAgICAgICBmdW5kaW5nR29hbCA9IGZ1bmRpbmdHb2FsSW5XZWlzOwogICAgICAgIHN0YXJ0QmxvY2sgPSBnZXRCbG9ja051bWJlcigpOwogICAgICAgIHN0YXJ0QmxvY2tCb251cyA9IGdldEJsb2NrTnVtYmVyKCk7CiAgICAgICAgZW5kQmxvY2tCb251czEgPSBnZXRCbG9ja051bWJlcigpICsgMTUyNDYgKyAxMjYwMCArIDUwMDsgICAgLy8gMyBkYXlzICsgMzUsNWggKyBtYXJnZW4gZXJyb3IgPSAxNTI0NiArIDEyNjAwICsgNTAwCiAgICAgICAgZW5kQmxvY2tCb251czIgPSBnZXRCbG9ja051bWJlcigpICsgMzA0OTIgKyAxMjYwMCArIDgwMDsgICAgLy8gNiBkYXlzICsgMzUsNWggKyBtYXJnZW4gZXJyb3IgPSAzMDQ5MiArIDEyNjAwICsgODAwCiAgICAgICAgZW5kQmxvY2tCb251czMgPSBnZXRCbG9ja051bWJlcigpICsgNDU3MzggKyAxMjYwMCArIDExMDA7ICAgLy8gOSBkYXlzICsgMzUsNWggKyBtYXJnZW4gZXJyb3IgPSA0NTczOCArIDEyNjAwICsgMTEwMAogICAgICAgIGRlYWRsaW5lID0gZ2V0QmxvY2tOdW1iZXIoKSArIChkdXJhdGlvbkluTWludXRlcyAqIDYwIC8gMTcpICsgNTAwMDsgLy8gZHVyYXRpb25Jbk1pbnV0ZXMgKiA2MCAvIDE3ICsgMTI2MDAgKyA1MDAwID0gQ2FsY3VsbyBibG9xdWVzICsgbWFyZ2VuIGVycm9yCiAgICAgICAgcHJpY2UgPSB3ZWlzQ29zdE9mRWFjaFRva2VuOwogICAgfQoKICAgIC8qKgogICAgICogSW50ZXJuYWwgdHJhbnNmZXIsIG9ubHkgY2FuIGJlIGNhbGxlZCBieSB0aGlzIGNvbnRyYWN0CiAgICAgKi8KICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKF90byAhPSAweDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCB0cmFuc2ZlciB0byAweDAgYWRkcmVzcy4gVXNlIGJ1cm4oKSBpbnN0ZWFkCiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPiBiYWxhbmNlT2ZbX3RvXSk7ICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgcmVxdWlyZSghZnJvemVuQWNjb3VudFtfZnJvbV0pOyAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHNlbmRlciBpcyBmcm96ZW4KICAgICAgICByZXF1aXJlKCFmcm96ZW5BY2NvdW50W190b10pOyAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcmVjaXBpZW50IGlzIGZyb3plbgogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXIgdG9rZW5zCiAgICAgKgogICAgICogU2VuZCBgX3ZhbHVlYCB0b2tlbnMgdG8gYF90b2AgZnJvbSB5b3VyIGFjY291bnQKICAgICAqCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCB0byBzZW5kCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgewogICAgICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZXN0cm95IHRva2VucwogICAgICoKICAgICAqIFJlbW92ZSBgX3ZhbHVlYCB0b2tlbnMgZnJvbSB0aGUgc3lzdGVtIGlycmV2ZXJzaWJseQogICAgICoKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiBtb25leSB0byBidXJuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOyAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgdG90YWxTdXBwbHkgLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGVzIHRvdGFsU3VwcGx5CiAgICAgICAgQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogRGVzdHJveSB0b2tlbnMgZnJvbSBvdGhlciBjY291bnQKICAgICAqCiAgICAgKiBSZW1vdmUgYF92YWx1ZWAgdG9rZW5zIGZyb20gdGhlIHN5c3RlbSBpcnJldmVyc2libHkgb24gYmVoYWxmIG9mIGBfZnJvbWAuCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIHRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiBtb25leSB0byBidXJuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YXJnZXRlZCBiYWxhbmNlIGlzIGVub3VnaAogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSB0YXJnZXRlZCBiYWxhbmNlCiAgICAgICAgdG90YWxTdXBwbHkgLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbFN1cHBseQogICAgICAgIEJ1cm4oX2Zyb20sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBNaW5lIG5ldyB0b2tlbnMKICAgICAqCiAgICAgKiBNaW5lIGBtaW50ZWRBbW91bnRgIHRva2VucyBmcm9tIHRoZSBzeXN0ZW0gdG8gc2VuZCB0byB0aGUgYHRhcmdldGAuCiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgb25seSBiZSB1c2VkIGZyb20gYSBmdXR1cmUgY29udHJhY3QgdG8gaW52ZXN0IGluIG5ldyByZW5ld2FibGUgaW5zdGFsbGF0aW9ucwogICAgICoKICAgICAqIEBwYXJhbSB0YXJnZXQgdGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIG1pbnRlZEFtb3VudCB0aGUgYW1vdW50IG9mIG1vbmV5IHRvIHNlbmQKICAgICAqLwogICAgZnVuY3Rpb24gbWludFRva2VuKGFkZHJlc3MgdGFyZ2V0LCB1aW50MjU2IG1pbnRlZEFtb3VudCkgb25seU93bmVyIHsKICAgICAgICBiYWxhbmNlT2ZbdGFyZ2V0XSArPSBtaW50ZWRBbW91bnQ7CiAgICAgICAgdG90YWxTdXBwbHkgKz0gbWludGVkQW1vdW50OwogICAgICAgIFRyYW5zZmVyKDAsIG93bmVyLCBtaW50ZWRBbW91bnQpOwogICAgICAgIFRyYW5zZmVyKG93bmVyLCB0YXJnZXQsIG1pbnRlZEFtb3VudCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBMb2NrIG9yIHVubG9jayBhY2NvdW50cwogICAgICoKICAgICAqIExvY2sgb3IgdW5sb2NrIGB0YXJnZXRgIGFjY291bnRzIHdoaWNoIGRvbid0IHVzZSB0aGUgdG9rZW4gY29ycmVjdGx5LgogICAgICoKICAgICAqIEBwYXJhbSB0YXJnZXQgdGhlIGFkZHJlc3Mgb2YgdGhlIGxvY2tlZCBvciB1bmxpY2tlZCBhY2NvdW50CiAgICAgKiBAcGFyYW0gZnJlZXplIGlmIHRoaXMgYWNjb3VudCBoYXMgdG8gYmUgZnJlZXplIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBmcmVlemVBY2NvdW50KGFkZHJlc3MgdGFyZ2V0LCBib29sIGZyZWV6ZSkgb25seU93bmVyIHsKICAgICAgICBmcm96ZW5BY2NvdW50W3RhcmdldF0gPSBmcmVlemU7CiAgICAgICAgRnJvemVuRnVuZHModGFyZ2V0LCBmcmVlemUpOwogICAgfQoKICAgIC8qKgogICAgICogRmFsbGJhY2sgZnVuY3Rpb24KICAgICAqCiAgICAgKiBUaGUgZnVuY3Rpb24gd2l0aG91dCBuYW1lIGlzIHRoZSBkZWZhdWx0IGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW5ldmVyIGFueW9uZSBzZW5kcyBmdW5kcyB0byBhIGNvbnRyYWN0CiAgICAgKi8KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgbm90UGF1c2VkewogICAgICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvLyBsb3cgbGV2ZWwgdG9rZW4gcHVyY2hhc2UgZnVuY3Rpb24KICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIGludmVzdG9yKSBwYXlhYmxlIG5vdFBhdXNlZCB7CiAgICAgICAgcmVxdWlyZSAoIWNyb3dkc2FsZUNsb3NlZCk7IC8vIENoZWNrIGlmIGNyb3dkc2FsZSBpcyBvcGVuIG9yIG5vdAogICAgICAgIHJlcXVpcmUoaW52ZXN0b3IgIT0gMHgwKTsgIC8vIENoZWNrIHRoZSBhZGRyZXNzCiAgICAgICAgcmVxdWlyZSh2YWxpZFB1cmNoYXNlKCkpOyAvL1ZhbGlkYXRlIHRoZSB0cmFuc2ZlcgogICAgICAgIHJlcXVpcmUobWF4RXRoZXJJbnZlc3RtZW50ID49IG1zZy52YWx1ZSk7IC8vQ2hlY2sgaWYgSXQncyBtb3JlIHRoYW4gbWF4aW11bSB0byBpbnZlc3QKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltpbnZlc3Rvcl0gPD0gbWF4VG9rZW5zKTsgLy8gQ2hlY2sgaWYgdGhlIGludmVzdG9yIGhhcyBtb3JlIHRva2VucyB0aGFuIDUlIG9mIHRvdGFsIHN1cHBseQogICAgICAgIHJlcXVpcmUoYW1vdW50UmFpc2VkIDw9IGZ1bmRpbmdHb2FsKTsgLy8gQ2hlY2sgaWYgZnVuZGluZ0dvYWwgaXMgcmlzZWQKICAgICAgICByZXF1aXJlKHB5bG9uU2VsbGVkIDw9IHRvdGFsVG9rZW5zVG9TZW5kKTsgLy9DaGVjayBpZiBweWxvbnMgd2UgaGF2ZSBzZWxsIGlzIG1vcmUgb3IgZXF1YWwgdGhhbiB0b3RhbCB0b2tlbnMgZXcgaGF2ZQoKCiAgICAgICAgLy9DaGVjayBpZiBJdCdzIHRpbWUgZm9yIHByZSBJQ08gb3IgSUNPCiAgICAgICAgaWYoc3RhcnRCbG9ja0JvbnVzIDw9IGdldEJsb2NrTnVtYmVyKCkgJiYgc3RhcnRCbG9jayA8PSBnZXRCbG9ja051bWJlcigpICYmIGVuZEJsb2NrQm9udXMzID49IGdldEJsb2NrTnVtYmVyKCkgJiYgcHlsb25TZWxsZWQgPD0gYm9udXNDYXApewogICAgICAgICAgYnV5UHJlSWNvKGludmVzdG9yKTsKICAgICAgICB9IGVsc2UgaWYoZGVhZGxpbmUgPj0gZ2V0QmxvY2tOdW1iZXIoKSl7CiAgICAgICAgICBidXlJY28oaW52ZXN0b3IpOwogICAgICAgIH0KCiAgICB9CgogICAgZnVuY3Rpb24gYnV5SWNvKGFkZHJlc3MgaW52ZXN0b3IpIGludGVybmFsewogICAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKCiAgICAgIC8vIGNhbGN1bGF0ZSB0b2tlbiBhbW91bnQgdG8gYmUgc2VudAogICAgICB1aW50MjU2IHRva2VucyA9IHdlaUFtb3VudC5tdWwoMTAqKjE4KS5kaXYocHJpY2UpOwoKICAgICAgcmVxdWlyZSgoYmFsYW5jZU9mW2ludmVzdG9yXSArIHRva2VucykgPD0gbWF4VG9rZW5zKTsgICAgICAgICAvLyBDaGVjayBpZiB0aGUgaW52ZXN0b3IgaGFzIG1vcmUgdG9rZW5zIHRoYW4gNSUgb2YgdG90YWwgc3VwcGx5CiAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW3RoaXNdID49IHRva2Vucyk7ICAgICAgICAgICAgIC8vIGNoZWNrcyBpZiBpdCBoYXMgZW5vdWdoIHRvIHNlbGwKICAgICAgcmVxdWlyZShweWxvblNlbGxlZCArIHRva2VucyA8PSB0b3RhbFRva2Vuc1RvU2VuZCk7IC8vT3ZlcmZsb3cgLSBDaGVjayBpZiBweWxvbnMgd2UgaGF2ZSBzZWxsIGlzIG1vcmUgb3IgZXF1YWwgdGhhbiB0b3RhbCB0b2tlbnMgZXcgaGF2ZQoKICAgICAgYmFsYW5jZU9mW3RoaXNdIC09IHRva2VuczsKICAgICAgYmFsYW5jZU9mW2ludmVzdG9yXSArPSB0b2tlbnM7CiAgICAgIGFtb3VudFJhaXNlZCArPSB3ZWlBbW91bnQ7IC8vIHVwZGF0ZSBzdGF0ZSBhbW91bnQgcmFpc2VkCiAgICAgIHB5bG9uU2VsbGVkICs9IHRva2VuczsgLy8gVG90YWwgdG9rZW5zIHNlbGxlZAoKICAgICAgYmVuZWZpY2lhcnkudHJhbnNmZXIod2VpQW1vdW50KTsgLy9UcmFuc2ZlciBldGhlcnMgdG8gYmVuZWZpY2lhcnkKCiAgICAgIGZyb3plbkFjY291bnRbaW52ZXN0b3JdID0gdHJ1ZTsKICAgICAgRnJvemVuRnVuZHMoaW52ZXN0b3IsIHRydWUpOwoKICAgICAgVG9rZW5QdXJjaGFzZShtc2cuc2VuZGVyLCBpbnZlc3Rvciwgd2VpQW1vdW50LCB0b2tlbnMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVByZUljbyhhZGRyZXNzIGludmVzdG9yKSBpbnRlcm5hbHsKICAgICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CgogICAgICB1aW50MjU2IGJvbnVzUHJpY2UgPSAwOwogICAgICB1aW50MjU2IHRva2VucyA9IHdlaUFtb3VudC5tdWwoMTAqKjE4KS5kaXYocHJpY2UpOwoKICAgICAgaWYoZW5kQmxvY2tCb251czEgPj0gZ2V0QmxvY2tOdW1iZXIoKSl7CiAgICAgICAgaWYodG9rZW5zID09IHFudDEway5tdWwoMTkpICl7CiAgICAgICAgICBib251c1ByaWNlID0gMjc3NTY1MjE3MzkxMzA0MDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCgxOCkgJiYgdG9rZW5zIDwgcW50MTBrLm11bCgxOSkpewogICAgICAgICAgYm9udXNQcmljZSA9IDI5MDc4MjYwODY5NTY1MjA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoMTcpICYmIHRva2VucyA8IHFudDEway5tdWwoMTgpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSAzMDQwMDAwMDAwMDAwMDAwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDE2KSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDE3KSl7CiAgICAgICAgICBib251c1ByaWNlID0gMzE3MjE3MzkxMzA0MzQ4MDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCgxNSkgJiYgdG9rZW5zIDwgcW50MTBrLm11bCgxNikpewogICAgICAgICAgYm9udXNQcmljZSA9IDMzMDQzNDc4MjYwODY5NjA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoMTQpICYmIHRva2VucyA8IHFudDEway5tdWwoMTUpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSAzNDM2NTIxNzM5MTMwNDMwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDEzKSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDE0KSl7CiAgICAgICAgICBib251c1ByaWNlID0gMzU2ODY5NTY1MjE3MzkxMDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCgxMikgJiYgdG9rZW5zIDwgcW50MTBrLm11bCgxMykpewogICAgICAgICAgYm9udXNQcmljZSA9IDM3MDA4Njk1NjUyMTczOTA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoMTEpICYmIHRva2VucyA8IHFudDEway5tdWwoMTIpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSAzODMzMDQzNDc4MjYwODcwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDEwKSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDExKSl7CiAgICAgICAgICBib251c1ByaWNlID0gMzk2NTIxNzM5MTMwNDM1MDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCg5KSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDEwKSl7CiAgICAgICAgICBib251c1ByaWNlID0gNDA5NzM5MTMwNDM0NzgzMDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCg4KSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDkpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSA0MjI5NTY1MjE3MzkxMzAwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDcpICYmIHRva2VucyA8IHFudDEway5tdWwoOCkpewogICAgICAgICAgYm9udXNQcmljZSA9IDQzNjE3MzkxMzA0MzQ3ODA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoNikgJiYgdG9rZW5zIDwgcW50MTBrLm11bCg3KSl7CiAgICAgICAgICBib251c1ByaWNlID0gNDQ5MzkxMzA0MzQ3ODI2MDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCg1KSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDYpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSA0NjI2MDg2OTU2NTIxNzQwOwogICAgICAgIH1lbHNlewogICAgICAgICAgYm9udXNQcmljZSA9IDUyODY5NTY1MjE3MzkxMzA7CiAgICAgICAgfQogICAgICB9ZWxzZSBpZihlbmRCbG9ja0JvbnVzMiA+PSBnZXRCbG9ja051bWJlcigpKXsKICAgICAgICBpZih0b2tlbnMgPT0gcW50MTBrLm11bCgxOSkgKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSAzNDM2NTIxNzM5MTMwNDMwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDE4KSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDE5KSl7CiAgICAgICAgICBib251c1ByaWNlID0gMzU2ODY5NTY1MjE3MzkxMDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCgxNykgJiYgdG9rZW5zIDwgcW50MTBrLm11bCgxOCkpewogICAgICAgICAgYm9udXNQcmljZSA9IDM3MDA4Njk1NjUyMTczOTA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoMTYpICYmIHRva2VucyA8IHFudDEway5tdWwoMTcpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSAzODMzMDQzNDc4MjYwODcwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDE1KSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDE2KSl7CiAgICAgICAgICBib251c1ByaWNlID0gMzk2NTIxNzM5MTMwNDM1MDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCgxNCkgJiYgdG9rZW5zIDwgcW50MTBrLm11bCgxNSkpewogICAgICAgICAgYm9udXNQcmljZSA9IDQwOTczOTEzMDQzNDc4MzA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoMTMpICYmIHRva2VucyA8IHFudDEway5tdWwoMTQpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSA0MjI5NTY1MjE3MzkxMzAwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDEyKSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDEzKSl7CiAgICAgICAgICBib251c1ByaWNlID0gNDM2MTczOTEzMDQzNDc4MDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCgxMSkgJiYgdG9rZW5zIDwgcW50MTBrLm11bCgxMikpewogICAgICAgICAgYm9udXNQcmljZSA9IDQ0OTM5MTMwNDM0NzgyNjA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoMTApICYmIHRva2VucyA8IHFudDEway5tdWwoMTEpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSA0NjI2MDg2OTU2NTIxNzQwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDkpICYmIHRva2VucyA8IHFudDEway5tdWwoMTApKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSA0NzU4MjYwODY5NTY1MjIwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDgpICYmIHRva2VucyA8IHFudDEway5tdWwoOSkpewogICAgICAgICAgYm9udXNQcmljZSA9IDQ4OTA0MzQ3ODI2MDg3MDA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoNykgJiYgdG9rZW5zIDwgcW50MTBrLm11bCg4KSl7CiAgICAgICAgICBib251c1ByaWNlID0gNTAyMjYwODY5NTY1MjE3MDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCg2KSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDcpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSA1MTU0NzgyNjA4Njk1NjUwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDUpICYmIHRva2VucyA8IHFudDEway5tdWwoNikpewogICAgICAgICAgYm9udXNQcmljZSA9IDUyODY5NTY1MjE3MzkxMzA7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICBib251c1ByaWNlID0gNTk0NzgyNjA4Njk1NjUyMDsKICAgICAgICB9CiAgICAgIH1lbHNlewogICAgICAgIGlmKHRva2VucyA9PSBxbnQxMGsubXVsKDE5KSApewogICAgICAgICAgYm9udXNQcmljZSA9IDM3NjY5NTY1MjE3MzkxMzA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoMTgpICYmIHRva2VucyA8IHFudDEway5tdWwoMTkpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSAzODk5MTMwNDM0NzgyNjEwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDE3KSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDE4KSl7CiAgICAgICAgICBib251c1ByaWNlID0gNDAzMTMwNDM0NzgyNjA5MDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCgxNikgJiYgdG9rZW5zIDwgcW50MTBrLm11bCgxNykpewogICAgICAgICAgYm9udXNQcmljZSA9IDQxNjM0NzgyNjA4Njk1NzA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoMTUpICYmIHRva2VucyA8IHFudDEway5tdWwoMTYpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSA0Mjk1NjUyMTczOTEzMDQwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDE0KSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDE1KSl7CiAgICAgICAgICBib251c1ByaWNlID0gNDQyNzgyNjA4Njk1NjUyMDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCgxMykgJiYgdG9rZW5zIDwgcW50MTBrLm11bCgxNCkpewogICAgICAgICAgYm9udXNQcmljZSA9IDQ1NjAwMDAwMDAwMDAwMDA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoMTIpICYmIHRva2VucyA8IHFudDEway5tdWwoMTMpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSA0NjkyMTczOTEzMDQzNDgwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDExKSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDEyKSl7CiAgICAgICAgICBib251c1ByaWNlID0gNDgyNDM0NzgyNjA4Njk2MDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCgxMCkgJiYgdG9rZW5zIDwgcW50MTBrLm11bCgxMSkpewogICAgICAgICAgYm9udXNQcmljZSA9IDQ5NTY1MjE3MzkxMzA0MzA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoOSkgJiYgdG9rZW5zIDwgcW50MTBrLm11bCgxMCkpewogICAgICAgICAgYm9udXNQcmljZSA9IDUwODg2OTU2NTIxNzM5MTA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoOCkgJiYgdG9rZW5zIDwgcW50MTBrLm11bCg5KSl7CiAgICAgICAgICBib251c1ByaWNlID0gNTIyMDg2OTU2NTIxNzM5MDsKICAgICAgICB9ZWxzZSBpZih0b2tlbnMgPj0gcW50MTBrLm11bCg3KSAmJiB0b2tlbnMgPCBxbnQxMGsubXVsKDgpKXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSA1MzUzMDQzNDc4MjYwODcwOwogICAgICAgIH1lbHNlIGlmKHRva2VucyA+PSBxbnQxMGsubXVsKDYpICYmIHRva2VucyA8IHFudDEway5tdWwoNykpewogICAgICAgICAgYm9udXNQcmljZSA9IDU0ODUyMTczOTEzMDQzNTA7CiAgICAgICAgfWVsc2UgaWYodG9rZW5zID49IHFudDEway5tdWwoNSkgJiYgdG9rZW5zIDwgcW50MTBrLm11bCg2KSl7CiAgICAgICAgICBib251c1ByaWNlID0gNTYxNzM5MTMwNDM0NzgzMDsKICAgICAgICB9ZWxzZXsKICAgICAgICAgIGJvbnVzUHJpY2UgPSA2Mjc4MjYwODY5NTY1MjIwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdG9rZW5zID0gd2VpQW1vdW50Lm11bCgxMCoqMTgpLmRpdihib251c1ByaWNlKTsKCiAgICAgIHJlcXVpcmUocHlsb25TZWxsZWQgKyB0b2tlbnMgPD0gYm9udXNDYXApOyAvLyBDaGVjayBpZiB3YW50IHRvIHNlbGwgbW9yZSB0aGFuIHRvdGFsIHRva2VucyBmb3IgcHJlLWljbwogICAgICByZXF1aXJlKGJhbGFuY2VPZltpbnZlc3Rvcl0gKyB0b2tlbnMgPD0gbWF4VG9rZW5zKTsgLy8gQ2hlY2sgaWYgdGhlIGludmVzdG9yIGhhcyBtb3JlIHRva2VucyB0aGFuIDUlIG9mIHRvdGFsIHN1cHBseQogICAgICByZXF1aXJlKGJhbGFuY2VPZlt0aGlzXSA+PSB0b2tlbnMpOyAgICAgICAgICAgICAvLyBjaGVja3MgaWYgaXQgaGFzIGVub3VnaCB0byBzZWxsCgogICAgICBiYWxhbmNlT2ZbdGhpc10gLT0gdG9rZW5zOwogICAgICBiYWxhbmNlT2ZbaW52ZXN0b3JdICs9IHRva2VuczsKICAgICAgYW1vdW50UmFpc2VkICs9IHdlaUFtb3VudDsgLy8gdXBkYXRlIHN0YXRlIGFtb3VudCByYWlzZWQKICAgICAgcHlsb25TZWxsZWQgKz0gdG9rZW5zOyAvLyBUb3RhbCB0b2tlbnMgc2VsbGVkCgogICAgICBiZW5lZmljaWFyeS50cmFuc2Zlcih3ZWlBbW91bnQpOyAvL1RyYW5zZmVyIGV0aGVycyB0byBiZW5lZmljaWFyeQoKICAgICAgZnJvemVuQWNjb3VudFtpbnZlc3Rvcl0gPSB0cnVlOwogICAgICBGcm96ZW5GdW5kcyhpbnZlc3RvciwgdHJ1ZSk7CgogICAgICBUb2tlblB1cmNoYXNlKG1zZy5zZW5kZXIsIGludmVzdG9yLCB3ZWlBbW91bnQsIHRva2Vucyk7CgogICAgfQoKICAgIG1vZGlmaWVyIGFmdGVyRGVhZGxpbmUoKSB7IGlmIChub3cgPj0gZGVhZGxpbmUpIF87IH0KCiAgICAvKioKICAgICAqIENoZWNrIGlmIGdvYWwgd2FzIHJlYWNoZWQKICAgICAqCiAgICAgKiBDaGVja3MgaWYgdGhlIGdvYWwgb3IgdGltZSBsaW1pdCBoYXMgYmVlbiByZWFjaGVkIGFuZCBlbmRzIHRoZSBjYW1wYWlnbgogICAgICovCiAgICBmdW5jdGlvbiBjaGVja0dvYWxSZWFjaGVkKCkgYWZ0ZXJEZWFkbGluZSBvbmx5T3duZXIgewogICAgICAgIGlmIChhbW91bnRSYWlzZWQgPj0gZnVuZGluZ0dvYWwpewogICAgICAgICAgICBmdW5kaW5nR29hbFJlYWNoZWQgPSB0cnVlOwogICAgICAgICAgICBHb2FsUmVhY2hlZChiZW5lZmljaWFyeSwgYW1vdW50UmFpc2VkKTsKICAgICAgICB9CiAgICAgICAgY3Jvd2RzYWxlQ2xvc2VkID0gdHJ1ZTsKICAgIH0KCgogICAgLy8gQHJldHVybiB0cnVlIGlmIHRoZSB0cmFuc2FjdGlvbiBjYW4gYnV5IHRva2VucwogICAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICB1aW50MjU2IGN1cnJlbnQgPSBnZXRCbG9ja051bWJlcigpOwogICAgICAgIGJvb2wgd2l0aGluUGVyaW9kID0gY3VycmVudCA+PSBzdGFydEJsb2NrICYmIGN1cnJlbnQgPD0gZGVhZGxpbmU7CiAgICAgICAgYm9vbCBub25aZXJvUHVyY2hhc2UgPSBtc2cudmFsdWUgIT0gMDsKICAgICAgICByZXR1cm4gd2l0aGluUGVyaW9kICYmIG5vblplcm9QdXJjaGFzZTsKICAgIH0KCiAgICAvLy8vLy8vLy8vCiAgICAvLyBUZXN0aW5nIHNwZWNpZmljIG1ldGhvZHMKICAgIC8vLy8vLy8vLy8KCiAgICAvLy8gQG5vdGljZSBUaGlzIGZ1bmN0aW9uIGlzIG92ZXJyaWRkZW4gYnkgdGhlIHRlc3QgTW9ja3MuCiAgICBmdW5jdGlvbiBnZXRCbG9ja051bWJlcigpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYmxvY2subnVtYmVyOwogICAgfQoKICAgIC8vLyBAbm90aWNlIFBhdXNlcyB0aGUgY29udHJpYnV0aW9uIGlmIHRoZXJlIGlzIGFueSBpc3N1ZQogICAgZnVuY3Rpb24gcGF1c2VDb250cmlidXRpb24oKSBvbmx5T3duZXIgewogICAgICAgIHBhdXNlZCA9IHRydWU7CiAgICB9CgogICAgLy8vIEBub3RpY2UgUmVzdW1lcyB0aGUgY29udHJpYnV0aW9uCiAgICBmdW5jdGlvbiByZXN1bWVDb250cmlidXRpb24oKSBvbmx5T3duZXIgewogICAgICAgIHBhdXNlZCA9IGZhbHNlOwogICAgfQp9Ci8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9'.
	

]
