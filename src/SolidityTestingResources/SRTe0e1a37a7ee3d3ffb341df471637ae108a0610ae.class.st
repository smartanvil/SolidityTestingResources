Class {
	#name : #SRTe0e1a37a7ee3d3ffb341df471637ae108a0610ae,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe0e1a37a7ee3d3ffb341df471637ae108a0610ae >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCgoKY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgICAqIGFjY291bnQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCgogICAgLyoqCiAgICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQoKfQoKCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBleHRlcm5hbCByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgR2FtZUdvbGRUb2tlblN0YW5kYXJkCiAqIEBkZXYgdGhlIGludGVyZmFjZSBvZiBHYW1lR29sZFRva2VuU3RhbmRhcmQKICovCmNvbnRyYWN0IEdhbWVHb2xkVG9rZW5TdGFuZGFyZCB7CiAgICB1aW50MjU2IHB1YmxpYyBzdGFrZVN0YXJ0VGltZTsKICAgIHVpbnQyNTYgcHVibGljIHN0YWtlTWluQWdlOwogICAgdWludDI1NiBwdWJsaWMgc3Rha2VNYXhBZ2U7CiAgICBmdW5jdGlvbiBtaW50KCkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gY29pbkFnZSgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gYW5udWFsSW50ZXJlc3QoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIF9hZGRyZXNzLCB1aW50IF9yZXdhcmQpOwp9CgoKY29udHJhY3QgR2FtZUdvbGRUb2tlbiBpcyBFUkMyMCxHYW1lR29sZFRva2VuU3RhbmRhcmQsT3duYWJsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBzdHJpbmcgY29uc3RhbnQgbmFtZSA9ICJHYW1lIEdvbGQgVG9rZW4iOwogICAgc3RyaW5nIGNvbnN0YW50IHN5bWJvbCA9ICJHR1QiOwogICAgdWludCBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIHVpbnQgcHVibGljIGNoYWluU3RhcnRUaW1lOyAvL2NoYWluIHN0YXJ0IHRpbWUKICAgIHVpbnQgcHVibGljIGNoYWluU3RhcnRCbG9ja051bWJlcjsgLy9jaGFpbiBzdGFydCBibG9jayBudW1iZXIKICAgIHVpbnQgcHVibGljIHN0YWtlU3RhcnRUaW1lOyAvL3N0YWtlIHN0YXJ0IHRpbWUKICAgIHVpbnQgY29uc3RhbnQgc3Rha2VNaW5BZ2UgPSAzIGRheXM7IC8vIG1pbmltdW0gYWdlIGZvciBjb2luIGFnZTogM0QKICAgIHVpbnQgY29uc3RhbnQgc3Rha2VNYXhBZ2UgPSA5MCBkYXlzOyAvLyBzdGFrZSBhZ2Ugb2YgZnVsbCB3ZWlnaHQ6IDkwRAogICAgdWludCBwdWJsaWMgbWF4TWludFByb29mT2ZTdGFrZTsKCiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIHVpbnQgcHVibGljIHNhbGVTdXBwbHk7IC8vZm91bmRlcnMgaW5pdGlhbCBzdXBwbHkgNTMlCiAgICB1aW50IHB1YmxpYyB0b2tlblByaWNlOwogICAgdWludCBwdWJsaWMgYWxyZWFkeVNvbGQ7CgogICAgLyoKICAgIHVpbnQgcHVibGljIGZvdW5kZXJzQW1vdW50U3VwcGx5ID0gODMyNTAwMDA7IC8vZm91bmRlcnMgaW5pdGlhbCBzdXBwbHkgMTUlCiAgICB1aW50IHB1YmxpYyB0ZWFtQW1vdW50U3VwcGx5ID0gMjc3NTAwMDA7IC8vdGVhbSBpbml0aWFsIHN1cHBseSA1JQogICAgdWludCBwdWJsaWMgYWR2aXNvcnNBbW91bnRTdXBwbHkgPSA0NDQwMDAwMDsgLy9hZHZpc29ycyBpbml0aWFsIHN1cHBseSA4JQogICAgdWludCBwdWJsaWMgZ2FtZUZ1bmRBbW91bnRTdXBwbHkgPSA4MzI1MDAwMDsgLy9nYW1lIElDTyBGdW5kIGluaXRpYWwgc3VwcGx5IDE1CiAgICB1aW50IHB1YmxpYyBhaXJkcm9wQW1vdW50U3VwcGx5ID0gMTExMDAwMDA7IC8vYWlyZHJvcCBpbml0aWFsIHN1cHBseSAyJQogICAgdWludCBwdWJsaWMgYm91bnR5QW1vdW50U3VwcGx5ID0gMTExMDAwMDA7IC8vYm91bnR5IGluaXRpYWwgc3VwcGx5IDIlCiAgICAqLwoKICAgIGJvb2wgcHVibGljIHNhbGVJc0dvaW5nOwoKCiAgICBzdHJ1Y3QgdHJhbnNmZXJJblN0cnVjdCB7CiAgICAgICAgdWludDEyOCBhbW91bnQ7CiAgICAgICAgdWludDY0IHRpbWU7CiAgICB9CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdHJhbnNmZXJJblN0cnVjdFtdKSB0cmFuc2ZlckluczsKCiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8qKgogICAgICogQGRldiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjay4KICAgICAqLwogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgICAgIHJlcXVpcmUobXNnLmRhdGEubGVuZ3RoID49IHNpemUgKyA0KTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlJZlNhbGVJc0dvaW5nKCkgewogICAgICAgIHJlcXVpcmUoc2FsZUlzR29pbmcpOwogICAgICAgIF87CiAgICB9CgoKICAgIGZ1bmN0aW9uIEdhbWVHb2xkVG9rZW4oKSBwdWJsaWMgewogICAgICAgIGNoYWluU3RhcnRUaW1lID0gbm93OwogICAgICAgIGNoYWluU3RhcnRCbG9ja051bWJlciA9IGJsb2NrLm51bWJlcjsKICAgICAgICB0b3RhbFN1cHBseSA9IDU1NTAwMDAwMCoxMCoqZGVjaW1hbHM7IC8vIDU1NSBNaWxsaW9uczsKICAgICAgICBzYWxlU3VwcGx5ID0gMjk0MTUwMDAwKjEwKipkZWNpbWFsczsgLy81MyUKCSAgICB0b2tlblByaWNlID0gMC4wMDAzNSBldGhlcjsKICAgICAgICBhbHJlYWR5U29sZCA9IDA7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gdG90YWxTdXBwbHk7CiAgICAgICAgVHJhbnNmZXIoYWRkcmVzcygwKSwgb3duZXIsIHRvdGFsU3VwcGx5KTsKCSAgICBtYXhNaW50UHJvb2ZPZlN0YWtlID0gMTM4NzUwMDAwKjEwKipkZWNpbWFsczsgLy8gMjUlIGFubnVhbCBpbnRlcmVzdAogICAgICAgIHNhbGVJc0dvaW5nID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVTYWxlU3RhdHVzKCkgZXh0ZXJuYWwgb25seU93bmVyIHJldHVybnMoYm9vbCkgewogICAgICAgIHNhbGVJc0dvaW5nID0gIXNhbGVJc0dvaW5nOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByaWNlKHVpbnQgX25ld1ByaWNlKSBleHRlcm5hbCBvbmx5T3duZXIgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmVxdWlyZShfbmV3UHJpY2UgPj0gMCk7CiAgICAgICAgdG9rZW5QcmljZSA9IF9uZXdQcmljZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIGV4dGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZihtc2cuc2VuZGVyID09IF90bykgcmV0dXJuIG1pbnQoKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICBpZih0cmFuc2Zlckluc1ttc2cuc2VuZGVyXS5sZW5ndGggPiAwKSBkZWxldGUgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl07CiAgICAgICAgdWludDY0IF9ub3cgPSB1aW50NjQobm93KTsKICAgICAgICB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDEyOChiYWxhbmNlc1ttc2cuc2VuZGVyXSksX25vdykpOwogICAgICAgIHRyYW5zZmVySW5zW190b10ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQxMjgoX3ZhbHVlKSxfbm93KSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICB1aW50IF9hbGxvd2FuY2UgPSB1aW50KGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICAgICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAgICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbX2Zyb21dLmxlbmd0aCA+IDApIGRlbGV0ZSB0cmFuc2Zlckluc1tfZnJvbV07CiAgICAgICAgdWludDY0IF9ub3cgPSB1aW50NjQobm93KTsKICAgICAgICB0cmFuc2Zlckluc1tfZnJvbV0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQxMjgoYmFsYW5jZXNbX2Zyb21dKSxfbm93KSk7CiAgICAgICAgdHJhbnNmZXJJbnNbX3RvXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDEyOChfdmFsdWUpLF9ub3cpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBleHRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPT0gMCB8fCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKTsKCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50IGFtb3VudCkgcHVibGljIG9ubHlPd25lciByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXF1aXJlKGFtb3VudCA8PSBhZGRyZXNzKHRoaXMpLmJhbGFuY2UpOwogICAgICAgIG93bmVyLnRyYW5zZmVyKGFkZHJlc3ModGhpcykuYmFsYW5jZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIG93bmVyTWludCh1aW50IF9hbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHVpbnQgYW1vdW50ID0gX2Ftb3VudCAqIDEwKipkZWNpbWFsczsKICAgICAgICByZXF1aXJlKHRvdGFsU3VwcGx5LmFkZChhbW91bnQpIDw9IDIqKjI1NiAtIDEgJiYgYmFsYW5jZXNbb3duZXJdLmFkZChhbW91bnQpIDw9IDIqKjI1NiAtIDEpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKGFtb3VudCk7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLmFkZChhbW91bnQpOwogICAgICAgIFRyYW5zZmVyKGFkZHJlc3MoMCksIG93bmVyLCBhbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbnQoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmKGJhbGFuY2VzW21zZy5zZW5kZXJdIDw9IDAgfHwgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ubGVuZ3RoIDw9IDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgdWludCByZXdhcmQgPSBnZXRQcm9vZk9mU3Rha2VSZXdhcmQobXNnLnNlbmRlcik7CiAgICAgICAgaWYocmV3YXJkIDw9IDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQocmV3YXJkKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZChyZXdhcmQpOwogICAgICAgIGRlbGV0ZSB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXTsKICAgICAgICB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDEyOChiYWxhbmNlc1ttc2cuc2VuZGVyXSksdWludDY0KG5vdykpKTsKCiAgICAgICAgTWludChtc2cuc2VuZGVyLCByZXdhcmQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJsb2NrTnVtYmVyKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCBibG9ja051bWJlcikgewogICAgICAgIGJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyLnN1YihjaGFpblN0YXJ0QmxvY2tOdW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvaW5BZ2UoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50IG15Q29pbkFnZSkgewogICAgICAgIG15Q29pbkFnZSA9IGdldENvaW5BZ2UobXNnLnNlbmRlcixub3cpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFubnVhbEludGVyZXN0KCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIG1heE1pbnRQcm9vZk9mU3Rha2U7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UHJvb2ZPZlN0YWtlUmV3YXJkKGFkZHJlc3MgX2FkZHJlc3MpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXF1aXJlKCAobm93ID49IHN0YWtlU3RhcnRUaW1lKSAmJiAoc3Rha2VTdGFydFRpbWUgPiAwKSApOwoKICAgICAgICB1aW50IF9ub3cgPSBub3c7CiAgICAgICAgdWludCBfY29pbkFnZSA9IGdldENvaW5BZ2UoX2FkZHJlc3MsIF9ub3cpOwogICAgICAgIGlmKF9jb2luQWdlIDw9IDApIHJldHVybiAwOwoKICAgICAgICB1aW50IGludGVyZXN0ID0gbWF4TWludFByb29mT2ZTdGFrZTsKCiAgICAgICAgcmV0dXJuIChfY29pbkFnZSAqIGludGVyZXN0KS5kaXYoMzY1ICogKDEwKipkZWNpbWFscykpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldENvaW5BZ2UoYWRkcmVzcyBfYWRkcmVzcywgdWludCBfbm93KSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50IF9jb2luQWdlKSB7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbX2FkZHJlc3NdLmxlbmd0aCA8PSAwKSByZXR1cm4gMDsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdHJhbnNmZXJJbnNbX2FkZHJlc3NdLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgaWYoIF9ub3cgPCB1aW50KHRyYW5zZmVySW5zW19hZGRyZXNzXVtpXS50aW1lKS5hZGQoc3Rha2VNaW5BZ2UpICkgY29udGludWU7CgogICAgICAgICAgICB1aW50IG5Db2luU2Vjb25kcyA9IF9ub3cuc3ViKHVpbnQodHJhbnNmZXJJbnNbX2FkZHJlc3NdW2ldLnRpbWUpKTsKICAgICAgICAgICAgaWYoIG5Db2luU2Vjb25kcyA+IHN0YWtlTWF4QWdlICkgbkNvaW5TZWNvbmRzID0gc3Rha2VNYXhBZ2U7CgogICAgICAgICAgICBfY29pbkFnZSA9IF9jb2luQWdlLmFkZCh1aW50KHRyYW5zZmVySW5zW19hZGRyZXNzXVtpXS5hbW91bnQpICogbkNvaW5TZWNvbmRzLmRpdigxIGRheXMpKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb3duZXJTZXRTdGFrZVN0YXJ0VGltZSh1aW50IHRpbWVzdGFtcCkgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKChzdGFrZVN0YXJ0VGltZSA8PSAwKSAmJiAodGltZXN0YW1wID49IGNoYWluU3RhcnRUaW1lKSk7CiAgICAgICAgc3Rha2VTdGFydFRpbWUgPSB0aW1lc3RhbXA7CiAgICB9CgogICAgZnVuY3Rpb24gb3duZXJCdXJuVG9rZW4odWludCBfdmFsdWUpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBkZWxldGUgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl07CiAgICAgICAgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQxMjgoYmFsYW5jZXNbbXNnLnNlbmRlcl0pLHVpbnQ2NChub3cpKSk7CgogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CgogICAgICAgIEJ1cm4obXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgIH0KCiAgICAvKiBCYXRjaCB0b2tlbiB0cmFuc2Zlci4gVXNlZCBieSBjb250cmFjdCBjcmVhdG9yIHRvIGRpc3RyaWJ1dGUgaW5pdGlhbCB0b2tlbnMgdG8gaG9sZGVycyAqLwogICAgZnVuY3Rpb24gYmF0Y2hUcmFuc2ZlcihhZGRyZXNzW10gX3JlY2lwaWVudHMsIHVpbnRbXSBfdmFsdWVzKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXF1aXJlKCBfcmVjaXBpZW50cy5sZW5ndGggPiAwICYmIF9yZWNpcGllbnRzLmxlbmd0aCA9PSBfdmFsdWVzLmxlbmd0aCk7CiAgICAgICAgdWludCB0b3RhbCA9IDA7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBsZXQgbGVuIDo9IG1sb2FkKF92YWx1ZXMpCiAgICAgICAgICAgIGZvciB7IGxldCBpIDo9IDAgfSBsdChpLCBsZW4pIHsgaSA6PSBhZGQoaSwgMSkgfSB7CiAgICAgICAgICAgICAgICB0b3RhbCA6PSBhZGQodG90YWwsIG1sb2FkKGFkZChhZGQoX3ZhbHVlcywgMHgyMCksIG11bChpLCAweDIwKSkpKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJlcXVpcmUodG90YWwgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgICAgIHVpbnQ2NCBfbm93ID0gdWludDY0KG5vdyk7CiAgICAgICAgCiAgICAgICAgZm9yKHVpbnQgaiA9IDA7IGogPCBfcmVjaXBpZW50cy5sZW5ndGg7IGorKyl7CiAgICAgICAgICAgIGJhbGFuY2VzW19yZWNpcGllbnRzW2pdXSA9IGJhbGFuY2VzW19yZWNpcGllbnRzW2pdXS5hZGQoX3ZhbHVlc1tqXSk7CiAgICAgICAgICAgIHRyYW5zZmVySW5zW19yZWNpcGllbnRzW2pdXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDEyOChfdmFsdWVzW2pdKSxfbm93KSk7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF9yZWNpcGllbnRzW2pdLCBfdmFsdWVzW2pdKTsKICAgICAgICB9CgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKHRvdGFsKTsKICAgICAgICBpZih0cmFuc2Zlckluc1ttc2cuc2VuZGVyXS5sZW5ndGggPiAwKSBkZWxldGUgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl07CiAgICAgICAgaWYoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPiAwKSB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDEyOChiYWxhbmNlc1ttc2cuc2VuZGVyXSksX25vdykpOwoKICAgICAgICByZXR1cm4gdG90YWw7CiAgICB9CgoKICAgIC8qIGJ1eWluZyB0b2tlbnMgZnVuY3Rpb24gKi8KICAgIGZ1bmN0aW9uKCkgcHVibGljIG9ubHlJZlNhbGVJc0dvaW5nIHBheWFibGUgewogICAgCSByZXF1aXJlKG1zZy52YWx1ZSA+PSB0b2tlblByaWNlKTsKICAgIAkgdWludCB0b2tlbkFtb3VudCA9IChtc2cudmFsdWUgLyB0b2tlblByaWNlKSAqIDEwICoqIGRlY2ltYWxzOwogICAgCSByZXF1aXJlKGFscmVhZHlTb2xkLmFkZCh0b2tlbkFtb3VudCkgPD0gc2FsZVN1cHBseSk7CgogICAgCSBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0uc3ViKHRva2VuQW1vdW50KTsKICAgIAkgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQodG9rZW5BbW91bnQpOwogICAgCSBhbHJlYWR5U29sZCA9IGFscmVhZHlTb2xkLmFkZCh0b2tlbkFtb3VudCk7CiAgICAJIFRyYW5zZmVyKG93bmVyLCBtc2cuc2VuZGVyLCB0b2tlbkFtb3VudCk7CiAgICB9Cgp9'.
	

]
