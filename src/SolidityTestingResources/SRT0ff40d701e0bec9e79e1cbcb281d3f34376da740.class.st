Class {
	#name : #SRT0ff40d701e0bec9e79e1cbcb281d3f34376da740,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0ff40d701e0bec9e79e1cbcb281d3f34376da740 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7Ci8vCi8qIENPTlRSQUNUICovCgpjb250cmFjdCBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgYykgewogICAgICAgIGMgPSBhICsgYjsKICAgICAgICByZXF1aXJlKGMgPj0gYSk7CiAgICB9CiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgYykgewogICAgICAgIHJlcXVpcmUoYiA8PSBhKTsKICAgICAgICBjID0gYSAtIGI7CiAgICB9CiAgICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgYykgewogICAgICAgIGMgPSBhICogYjsKICAgICAgICByZXF1aXJlKGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIH0KICAgIGZ1bmN0aW9uIHNhZmVEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgcmVxdWlyZShiID4gMCk7CiAgICAgICAgYyA9IGEgLyBiOwogICAgfQp9Ci8vIEVORF9PRl9jb250cmFjdF9TYWZlTWF0aAovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLwovKiBJTlRFUkZBQ0VTICovCi8vCmludGVyZmFjZSB0b2tlblJlY2lwaWVudCB7CgkKCWZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF90b2tlbkFtb3VudEFwcHJvdmVkLCBhZGRyZXNzIHRva2VuTWFjcm9hbnN5LCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpOyAKfSAgIAovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCi8vCiAgICBpbnRlcmZhY2UgSUNPIHsKCiAgICAgICAgZnVuY3Rpb24gYnV5KCB1aW50IHBheW1lbnQsIGFkZHJlc3MgYnV5ZXIsIGJvb2wgaXNQcmV2aWV3KSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MsIHVpbnQgYW1vdW50KTsKICAgICAgICBmdW5jdGlvbiByZWRlZW1Db2luKHVpbnQyNTYgYW1vdW50LCBhZGRyZXNzIHJlZGVlbWVyLCBib29sIGlzUHJldmlldykgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcywgdWludCByZWRlZW1QYXltZW50KTsKICAgICAgICBmdW5jdGlvbiBzZWxsKHVpbnQyNTYgYW1vdW50LCBhZGRyZXNzIHNlbGxlciwgYm9vbCBpc1ByZXZpZXcpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MsIHVpbnQgc2VsbFBheW1lbnQgKTsKICAgICAgICBmdW5jdGlvbiBwYXltZW50QWN0aW9uKHVpbnQgcGF5bWVudFZhbHVlLCBhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50IHBheXR5cGUpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2Vzcyk7CgogICAgICAgIGZ1bmN0aW9uIHJlY3ZTaHJJQ08oIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCB1aW50IFNocklEKSAgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICAgICAgZnVuY3Rpb24gYnVybiggdWludDI1NiB2YWx1ZSwgYm9vbCB1bmJ1cm4sIHVpbnQgdG90YWxTdXBwbHlTdGFydCwgdWludCBiYWxPZk93bmVyKSAgcHVibGljIHJldHVybnMoIGJvb2wgc3VjY2Vzcyk7CgogICAgICAgIGZ1bmN0aW9uIGdldFNDRigpIHB1YmxpYyByZXR1cm5zKHVpbnQgc2VyaWVzQ2FwRmFjdG9yTXVsQnlUZW5Qb3dlckVpZ2h0ZWVuKTsKICAgICAgICBmdW5jdGlvbiBnZXRNaW5CYWwoKSBwdWJsaWMgcmV0dXJucyh1aW50IG1pbkJhbEZvckFjY250c18gKTsKICAgICAgICBmdW5jdGlvbiBnZXRBdmxTaGFyZXMoYm9vbCBzaG93KSBwdWJsaWMgIHJldHVybnModWludCB0b3RhbFN1cHBseU9mQ29pbnNJblNlcmllc05vdywgdWludCBjb2luc0F2YWlsYWJsZUZvclNhbGUsIHVpbnQgaWNvRnVuZGluZyk7CiAgICB9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyAKLy8KICAgIGludGVyZmFjZSBFeGNoZ3sKICAgICAgICAKICAgICAgICBmdW5jdGlvbiBzZWxsX0V4Y2hnX1JlZyggdWludCBhbW50VGtucywgdWludCB0a25QcmljZSwgYWRkcmVzcyBzZWxsZXIpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2Vzcyk7CiAgICAgICAgZnVuY3Rpb24gYnV5X0V4Y2hnX2Jvb2tpbmcoIGFkZHJlc3Mgc2VsbGVyLCB1aW50IGFtbnRUa25zLCB1aW50IHRrblByaWNlLCBhZGRyZXNzIGJ1eWVyLCB1aW50IHBheW1lbnQgKSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpOwogICAgICAgIGZ1bmN0aW9uIGJ1eV9FeGNoZ19Ca2dDaGsoIGFkZHJlc3Mgc2VsbGVyLCB1aW50IGFtbnRUa25zLCB1aW50IHRrblByaWNlLCBhZGRyZXNzIGJ1eWVyLCB1aW50IHBheW1lbnQpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2Vzcyk7CiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsbGVyKCBhZGRyZXNzIHNlbGxlciwgdWludCB0a25zQXByLCBhZGRyZXNzIGJ1eWVyLCB1aW50IHBheW1lbnQpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2Vzcyk7ICAKCiAgICAgICAgZnVuY3Rpb24gZ2V0RXhjaGdDb21pc25NdWxCeVRob3VzYW5kKCkgcHVibGljIHJldHVybnModWludCBleGNoZ0NvbW1pc3Npb25NdWxCeVRob3VzYW5kXyk7ICAKCiAgICAgICAgZnVuY3Rpb24gdmlld1NlbGxPZmZlcnNBdEV4Y2hhbmdlTWFjcm9hbnN5KGFkZHJlc3Mgc2VsbGVyLCBib29sIHNob3cpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQgc2VsbGVyc0NvaW5BbW91bnRPZmZlciwgdWludCBzZWxsZXJzUHJpY2VPZk9uZUNvaW5JbldFSSwgdWludCBzZWxsZXJCb29rZWRUaW1lLCBhZGRyZXNzIGJ1eWVyV2hvQm9va2VkLCB1aW50IGJ1eVBheW1lbnRCb29rZWQsIHVpbnQgYnV5ZXJCb29rZWRUaW1lLCB1aW50IGV4Y2hnQ29tbWlzc2lvbk11bEJ5VGhvdXNhbmRfKTsKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCi8vIEVSQyBUb2tlbiBTdGFuZGFyZCAjMjAgSW50ZXJmYWNlCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2Jsb2IvbWFzdGVyL0VJUFMvZWlwLTIwLXRva2VuLXN0YW5kYXJkLm1kCgovKiBDT05UUkFDVCAqLwovLwogICAgY29udHJhY3QgVG9rZW5FUkMyMEludGVyZmFjZSB7CgogICAgICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgY29pbkxpZmVUaW1lVG90YWxTdXBwbHkpOwogICAgICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHRva2VuT3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IGNvaW5CYWxhbmNlKTsKICAgICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyB0b2tlbk93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IGNvaW5zUmVtYWluaW5nKTsKICAgICAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHRva2VucykgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICAgICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdG9rZW5zKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgICAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyB0bywgdWludCB0b2tlbnMpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHRva2Vucyk7CiAgICAgICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIHRva2VuT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHRva2Vucyk7CiAgICB9Ci8vRU5EX09GX2NvbnRyYWN0X0VSQzIwSW50ZXJmYWNlIAovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCi8qIENPTlRSQUNUICovCi8qKgoqIENPUFlSSUdIVCBNYWNyb2Fuc3kgCiogaHR0cDovL3d3dy5tYWNyb2Fuc3kub3JnCiovCmNvbnRyYWN0IFRva2VuTWFjcm9hbnN5IGlzIFRva2VuRVJDMjBJbnRlcmZhY2UsIFNhZmVNYXRoIHsgCiAgICAKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gMTg7CiAgICAvLwogICAgYWRkcmVzcyBpbnRlcm5hbCBvd25lcjsgCiAgICBhZGRyZXNzIHByaXZhdGUgIGJlbmVmaWNpYXJ5RnVuZHM7CiAgICAvLwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICB1aW50MjU2IGludGVybmFsIHRvdGFsU3VwcGx5U3RhcnQ7CiAgICAvLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwogICAgbWFwcGluZyggYWRkcmVzcyA9PiBib29sKSBpbnRlcm5hbCBmcm96ZW5BY2NvdW50OwogICAgLy8KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwcml2YXRlIG1zZ1NuZHI7CiAgICAvLwogICAgYWRkcmVzcyB0a25fYWRkcjsgYWRkcmVzcyBpY29fYWRkcjsgYWRkcmVzcyBleGNoZ19hZGRyOwogICAgLy8KICAgIHVpbnQyNTYgaW50ZXJuYWwgYWxsb3dlZEluZGl2aWR1YWxTaGFyZTsKICAgIHVpbnQyNTYgaW50ZXJuYWwgYWxsb3dlZFB1YmxpY1NoYXJlOwovLwogICAgLy91aW50MjU2IGludGVybmFsIGFsbG93ZWRGb3VuZGVyU2hhcmU7CiAgICAvL3VpbnQyNTYgaW50ZXJuYWwgYWxsb3dlZFBPT0xTaGFyZTsKICAgIC8vdWludDI1NiBpbnRlcm5hbCBhbGxvd2VkVkNTaGFyZTsKICAgIC8vdWludDI1NiBpbnRlcm5hbCBhbGxvd2VkQ29sZFJlc2VydmU7Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7ICAgIAogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIHRva2VuT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHRva2Vucyk7CiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50IGFtb3VudCk7CiAgICBldmVudCBVbkJ1cm4oYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQgYW1vdW50KTsKICAgIGV2ZW50IEZ1bmRPclBheW1lbnRUcmFuc2ZlcihhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50IGFtb3VudCk7IAogICAgZXZlbnQgRnJvemVuRnVuZHMoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJvemVuKTsKICAgIGV2ZW50IEJ1eUF0TWFjcm9hbnN5RXhjaGcoYWRkcmVzcyBidXllciwgYWRkcmVzcyBzZWxsZXIsIHVpbnQgdG9rZW5BbW91bnQsIHVpbnQgcGF5bWVudCk7Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCi8vCi8vQ09OU1RSVUNUT1IKICAgIC8qIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdCAKICAgICovCiAgICBmdW5jdGlvbiBUb2tlbk1hY3JvYW5zeSgpICBwdWJsaWMgewogICAgICAgIAogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiZW5lZmljaWFyeUZ1bmRzID0gb3duZXI7CiAgICAgICAgLy90b3RhbFN1cHBseVN0YXJ0ID0gaW5pdGlhbFN1cHBseSAqIDEwKiogdWludDI1NihkZWNpbWFscyk7ICAKICAgICAgICB0b3RhbFN1cHBseVN0YXJ0ID0gMzk5OSAqIDEwKiogdWludDI1NihkZWNpbWFscyk7ICAgICAKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5U3RhcnQ7IAogICAgICAgIC8vCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHlTdGFydDsgICAgCiAgICAgICAgVHJhbnNmZXIoYWRkcmVzcygwKSwgbXNnLnNlbmRlciwgdG90YWxTdXBwbHlTdGFydCk7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIAogICAgICAgIG5hbWUgPSAiVG9rZW5NYWNyb2Fuc3kiOyAgCiAgICAgICAgc3ltYm9sID0gIiRCRUUiOwogICAgICAgIC8vICAKICAgICAgICBhbGxvd2VkSW5kaXZpZHVhbFNoYXJlID0gdWludCgxKSp0b3RhbFN1cHBseVN0YXJ0LzEwMDsgCiAgICAgICAgYWxsb3dlZFB1YmxpY1NoYXJlID0gdWludCgyMCkqIHRvdGFsU3VwcGx5U3RhcnQvMTAwOyAgICAgCiAgICAgICAgLy8KICAgICAgICAvL2FsbG93ZWRGb3VuZGVyU2hhcmUgPSB1aW50KDIwKSp0b3RhbFN1cHBseVN0YXJ0LzEwMDsgCiAgICAgICAgLy9hbGxvd2VkUE9PTFNoYXJlID0gdWludCg5KSogdG90YWxTdXBwbHlTdGFydC8xMDA7IAogICAgICAgIC8vYWxsb3dlZENvbGRSZXNlcnZlID0gdWludCg0MSkqIHRvdGFsU3VwcGx5U3RhcnQvMTAwOwogICAgICAgIC8vYWxsb3dlZFZDU2hhcmUgPSAgdWludCgxMCkqIHRvdGFsU3VwcGx5U3RhcnQvMTAwOyAgCiAgICB9IAovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfSAKICAgIGZ1bmN0aW9uIHdhZG1pbl90cmFuc2Zlck9yKGFkZHJlc3MgX09yKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBvd25lciA9IF9PcjsKICAgIH0gICAgICAgICAgCi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCiAgIC8qKgogICAgICogQG5vdGljZSBTaG93IHRoZSBgdG90YWxTdXBwbHlgIGZvciB0aGlzIFRva2VuIGNvbnRyYWN0CiAgICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQgY29pbkxpZmVUaW1lVG90YWxTdXBwbHkpIHsKICAgICAgICByZXR1cm4gdG90YWxTdXBwbHkgOyAgIAogICAgfSAgCi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCiAgIC8qKgogICAgICogQG5vdGljZSBTaG93IHRoZSBgdG9rZW5Pd25lcmAgYmFsYW5jZXMgZm9yIHRoaXMgY29udHJhY3QKICAgICAqIEBwYXJhbSB0b2tlbk93bmVyIHRoZSB0b2tlbiBvd25lcnMgYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB0b2tlbk93bmVyKSBjb25zdGFudCBwdWJsaWMgIHJldHVybnMgKHVpbnQgY29pbkJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZU9mW3Rva2VuT3duZXJdOwogICAgfSAKLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KICAgLyoqCiAgICAgKiBAbm90aWNlIFNob3cgdGhlIGFsbG93YW5jZSBnaXZlbiBieSBgdG9rZW5Pd25lcmAgdG8gdGhlIGBzcGVuZGVyYAogICAgICogQHBhcmFtIHRva2VuT3duZXIgdGhlIHRva2VuIG93bmVyIGFkZHJlc3MgYWxsb2NhdGluZyBhbGxvd2FuY2UKICAgICAqIEBwYXJhbSBzcGVuZGVyIHRoZSBhbGxvd2FuY2Ugc3BlbmRlcnMgYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyB0b2tlbk93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50IGNvaW5zUmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93YW5jZVt0b2tlbk93bmVyXVtzcGVuZGVyXTsKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KICAgIGZ1bmN0aW9uIHdhZG1pbl9zZXRDb250ckFkZHIoYWRkcmVzcyBpY29BZGRyLCBhZGRyZXNzIGV4Y2hBZGRyICkgcHVibGljIG9ubHlPd25lciByZXR1cm5zKGJvb2wgc3VjY2Vzcyl7CiAgICAgICB0a25fYWRkciA9IHRoaXM7IGljb19hZGRyID0gaWNvQWRkcjsgZXhjaGdfYWRkciA9IGV4Y2hBZGRyOwogICAgICAgcmV0dXJuIHRydWU7CiAgICB9ICAgICAgICAgIAogICAgLy8KICAgIGZ1bmN0aW9uIF9nZXRUa25BZGRyKCkgaW50ZXJuYWwgIHJldHVybnMoYWRkcmVzcyB0a25fbWFfYWRkcil7ICByZXR1cm4odGtuX2FkZHIpOyB9CiAgICBmdW5jdGlvbiBfZ2V0SWNvQWRkcigpIGludGVybmFsICByZXR1cm5zKGFkZHJlc3MgaWNvX21hX2FkZHIpeyAgcmV0dXJuKGljb19hZGRyKTsgfSAKICAgIGZ1bmN0aW9uIF9nZXRFeGNoZ0FkZHIoKSBpbnRlcm5hbCByZXR1cm5zKGFkZHJlc3MgZXhjaGdfbWFfYWRkcil7IHJldHVybihleGNoZ19hZGRyKTsgfSAKICAgIC8vIF9nZXRUa25BZGRyKCk7IF9nZXRJY29BZGRyKCk7IF9nZXRFeGNoZ0FkZHIoKTsgIAogICAgLy8gIGFkZHJlc3MgdGtuX2FkZHI7IGFkZHJlc3MgaWNvX2FkZHI7IGFkZHJlc3MgZXhjaGdfYWRkcjsKLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KICAgIC8qIEludGVybmFsIHRyYW5zZmVyLCBvbmx5IGNhbiBiZSBjYWxsZWQgYnkgdGhpcyBjb250cmFjdCAqLwogICAgLy8KICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIGludGVybmFsICB7CiAgICAgICAgcmVxdWlyZSAoX3RvICE9IDB4MCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgcmVxdWlyZSghZnJvemVuQWNjb3VudFtfZnJvbV0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgcmVxdWlyZSghZnJvemVuQWNjb3VudFtfdG9dKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgdWludCB2YWx0bXAgPSBfdmFsdWU7CiAgICAgICAgdWludCBfdmFsdWVBID0gdmFsdG1wOwogICAgICAgIHZhbHRtcCA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICByZXF1aXJlIChiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZUEpOyAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgcmVxdWlyZSAoYmFsYW5jZU9mW190b10gKyBfdmFsdWVBID4gYmFsYW5jZU9mW190b10pOyAgICAgICAgICAgICAgICAgICAKICAgICAgICB1aW50IHByZXZpb3VzQmFsYW5jZXMgPSBiYWxhbmNlT2ZbX2Zyb21dICsgYmFsYW5jZU9mW190b107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VPZltfZnJvbV0sIF92YWx1ZUEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZU9mW190b10sIF92YWx1ZUEpOyAKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWVBKTsKICAgICAgICBfdmFsdWVBID0gMDsKICAgICAgICBhc3NlcnQoYmFsYW5jZU9mW19mcm9tXSArIGJhbGFuY2VPZltfdG9dID09IHByZXZpb3VzQmFsYW5jZXMpOyAgICAgICAKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwogICAgLyoqCiAgICAgKiBUcmFuc2ZlciB0b2tlbnMKICAgICAqCiAgICAgKiBAbm90aWNlIEFsbG93cyB0byBTZW5kIENvaW5zIHRvIG90aGVyIGFjY291bnRzCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQgb2YgY29pbnMKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiBjb2lucyB0byBzZW5kCiAgICAgKi8KICAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2VzcykgewoKICAgICAgICAvL2NoZWNrIHNlbmRlciBhbmQgcmVjZWl2ZXIgYWxsdyBsaW1pdHMgaW4gYWNjb3JkYW5jZSB3aXRoIGljbyBjb250cmFjdAogICAgICAgIGJvb2wgc3Vjc1NsckxtdCA9IF9jaGtTZWxsZXJMbXRzKCBtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgICAgIGJvb2wgc3Vjc0J5ckxtdCA9IF9jaGtCdXllckxtdHMoIF90bywgX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKHN1Y3NTbHJMbXQgPT0gdHJ1ZSAmJiBzdWNzQnlyTG10ID09IHRydWUpOwogICAgICAgIC8vCiAgICAgICAgdWludCB2YWx0bXAgPSBfdmFsdWU7ICAgIAogICAgICAgIHVpbnQgX3ZhbHVlVGVtcCA9IHZhbHRtcDsgCiAgICAgICAgdmFsdG1wID0gMDsgICAgICAgICAgICAgICAgIAogICAgICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZVRlbXApOwogICAgICAgIF92YWx1ZVRlbXAgPSAwOwogICAgICAgIHJldHVybiB0cnVlOyAgICAgIAogICAgfSAgCi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCiAgICAvKioKICAgICAqIFRyYW5zZmVyIHRva2VucyBmcm9tIG90aGVyIGFkZHJlc3MKICAgICAqCiAgICAgKiBAbm90aWNlIHNlbmRlciBjYW4gc2V0IGFuIGFsbG93YW5jZSBmb3IgYW5vdGhlciBjb250cmFjdCwgCiAgICAgKiBAbm90aWNlIGFuZCB0aGUgb3RoZXIgY29udHJhY3QgaW50ZXJmYWNlIGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbCAKICAgICAqIEBub3RpY2UgY2FuIGNhbGwgdGhpcyBmdW50aW9uIGZvciB0b2tlbiBhcyBwYXltZW50IGFuZCBhZGQgZnVydGhlciBjb2RpbmcgZm9yIHNlcnZpY2UuCiAgICAgKiBAbm90aWNlIHBsZWFzZSBhbHNvIHJlZmVyIHRvIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsCiAgICAgKiBAbm90aWNlIFNlbmQgYF92YWx1ZWAgdG9rZW5zIHRvIGBfdG9gIG9uIGJlaGFsZiBvZiBgX2Zyb21gCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50IG9mIGNvaW5zCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgY29pbnMgdG8gc2VuZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgCiAgICAgICAgdWludCB2YWx0bXAgPSBfdmFsdWU7CiAgICAgICAgdWludCBfdmFsdWVBID0gdmFsdG1wOwogICAgICAgIHZhbHRtcCA9IDA7CiAgICAgICAgcmVxdWlyZShfdmFsdWVBIDw9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pOyAgICAgCiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSwgX3ZhbHVlQSk7CiAgICAgICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZUEpOwogICAgICAgIF92YWx1ZUEgPSAwOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwogICAgLyoqCiAgICAgKiBTZXQgYWxsb3dhbmNlIGZvciBvdGhlciBhZGRyZXNzCiAgICAgKgogICAgICogQG5vdGljZSBBbGxvd3MgYF9zcGVuZGVyYCB0byBzcGVuZCBubyBtb3JlIHRoYW4gYF92YWx1ZWAgY29pbnMgZnJvbSB5b3VyIGFjY291bnQKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBhdXRob3JpemVkIHRvIHNwZW5kCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBtYXggYW1vdW50IG9mIGNvaW5zIGFsbG9jYXRlZCB0byBzcGVuZGVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAKICAgICAgICAvL2NoZWNrIHNlbmRlciBhbmQgcmVjZWl2ZXIgYWxsdyBsaW1pdHMgaW4gYWNjb3JkYW5jZSB3aXRoIGljbyBjb250cmFjdAogICAgICAgIGJvb2wgc3Vjc1NsckxtdCA9IF9jaGtTZWxsZXJMbXRzKCBtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgICAgIGJvb2wgc3Vjc0J5ckxtdCA9IF9jaGtCdXllckxtdHMoIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJlcXVpcmUoc3Vjc1NsckxtdCA9PSB0cnVlICYmIHN1Y3NCeXJMbXQgPT0gdHJ1ZSk7CiAgICAgICAgLy8KICAgICAgICB1aW50IHZhbHRtcCA9IF92YWx1ZTsKICAgICAgICB1aW50IF92YWx1ZUEgPSB2YWx0bXA7CiAgICAgICAgdmFsdG1wID0gMDsgICAgICAgICAKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlQTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlQSk7CiAgICAgICAgIF92YWx1ZUEgPTA7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCiAgICAvKioKICAgICAqIFNldCBhbGxvd2FuY2UgZm9yIG90aGVyIGFkZHJlc3MgYW5kIG5vdGlmeQogICAgICoKICAgICAqIEFsbG93cyBgX3NwZW5kZXJgIHRvIHNwZW5kIG5vIG1vcmUgdGhhbiBgX3ZhbHVlYCBjb2lucyBpbiBmcm9tIHlvdXIgYWNjb3VudAogICAgICoKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBhdXRob3JpemVkIHRvIHNwZW5kCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHRoZSBtYXggYW1vdW50IG9mIGNvaW5zIHRoZSBzcGVuZGVyIGNhbiBzcGVuZAogICAgICogQHBhcmFtIF9leHRyYURhdGEgc29tZSBleHRyYSBpbmZvcm1hdGlvbiB0byBzZW5kIHRvIHRoZSBzcGVuZGVyIGNvbnRyYWN0cwogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIAogICAgICAgIHRva2VuUmVjaXBpZW50IHNwZW5kZXIgPSB0b2tlblJlY2lwaWVudChfc3BlbmRlcik7CiAgICAgICAgdWludCB2YWx0bXAgPSBfdmFsdWU7CiAgICAgICAgdWludCBfdmFsdWVBID0gdmFsdG1wOwogICAgICAgIHZhbHRtcCA9IDA7ICAgICAgICAgCiAgICAgICAgaWYgKGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZUEpKSB7ICAgICAgICAgICAKICAgICAgICAgICAgc3BlbmRlci5yZWNlaXZlQXBwcm92YWwobXNnLnNlbmRlciwgX3ZhbHVlQSwgdGhpcywgX2V4dHJhRGF0YSk7ICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIF92YWx1ZUEgPSAwOyAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KICAgIC8qKgogICAgKiBAbm90aWNlIGBmcmVlemVgIFByZXZlbnQgfCBBbGxvd2AgYHRhcmdldGAgZnJvbSBzZW5kaW5nICYgcmVjZWl2aW5nIHRva2VucwogICAgKiBAcGFyYW0gdGFyZ2V0IEFkZHJlc3MgdG8gYmUgZnJvemVuCiAgICAqIEBwYXJhbSBmcmVlemUgZWl0aGVyIHRvIGZyZWV6ZSBpdCBvciBub3QKICAgICovCiAgICBmdW5jdGlvbiB3YWRtaW5fZnJlZXplQWNjb3VudChhZGRyZXNzIHRhcmdldCwgYm9vbCBmcmVlemUpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpIHsKICAgICAgICBmcm96ZW5BY2NvdW50W3RhcmdldF0gPSBmcmVlemU7ICAgICAgCiAgICAgICAgRnJvemVuRnVuZHModGFyZ2V0LCBmcmVlemUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCi8vCiAgICBmdW5jdGlvbiBfc2FmZVRyYW5zZmVyVGtuKCBhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBhbW91bnQpIGludGVybmFsIHJldHVybnMoYm9vbCBzdWNzVHJUayl7CiAgICAgICAgICAKICAgICAgICAgIHVpbnQgdGtBID0gYW1vdW50OwogICAgICAgICAgdWludCB0a0F0ZW1wID0gdGtBOwogICAgICAgICAgdGtBID0gMDsKICAgICAgICAgICAgICAgICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCB0a0F0ZW1wKTsgCiAgICAgICAgICB0a0F0ZW1wID0gMDsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgfSAgICAgIAovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLwogICAgZnVuY3Rpb24gX3NhZmVUcmFuc2ZlclBheW1udCggYWRkcmVzcyBwYXltZW50QmVuZmNyeSwgdWludCBwYXltZW50KSBpbnRlcm5hbCByZXR1cm5zKGJvb2wgc3Vjc1RyUGF5bW50KXsKICAgICAgICAgICAgICAKICAgICAgICAgIHVpbnQgcEEgPSBwYXltZW50OyAKICAgICAgICAgIHVpbnQgcGF5bWVudFRlbXAgPSBwQTsKICAgICAgICAgIHBBID0gMDsKICAgICAgICAgICAgICAgICAgcGF5bWVudEJlbmZjcnkudHJhbnNmZXIocGF5bWVudFRlbXApOyAKICAgICAgICAgIEZ1bmRPclBheW1lbnRUcmFuc2ZlcihwYXltZW50QmVuZmNyeSwgcGF5bWVudFRlbXApOyAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICBwYXltZW50VGVtcCA9IDA7IAogICAgICAgICAgCiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KICAgIGZ1bmN0aW9uIF9zYWZlUGF5bWVudEFjdGlvbkF0SWNvKCB1aW50IHBheW1lbnQsIGFkZHJlc3MgcGF5bWVudEJlbmZjcnksIHVpbnQgcGF5dHlwZSkgaW50ZXJuYWwgcmV0dXJucyhib29sIHN1Y2Nlc3MpewogICAgICAgICAgICAgIAogICAgLy8gcGF5bWVudCByZXEgdG8gaWNvCiAgICAgICAgICB1aW50IFBtID0gcGF5bWVudDsKICAgICAgICAgIHVpbnQgUG1UZW1wID0gUG07CiAgICAgICAgICBQbSA9IDA7ICAKICAgICAgICAgIElDTyBpY28gPSBJQ08oX2dldEljb0FkZHIoKSk7ICAgICAgIAogICAgICAgICAgLy8gcGF5dHlwZSAxIGZvciByZWRlZW1wYXltZW50IGFuZCAyIGZvciBzZWxsIHBheW1lbnQKICAgICAgICAgIGJvb2wgcHltQWN0U3VjcyA9IGljby5wYXltZW50QWN0aW9uKCBQbVRlbXAsIHBheW1lbnRCZW5mY3J5LCBwYXl0eXBlKTsKICAgICAgICAgIHJlcXVpcmUocHltQWN0U3VjcyA9PSAgdHJ1ZSk7CiAgICAgICAgICBQbVRlbXAgPSAwOwogICAgICAgICAgCiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCiAgICAvKiBAbm90aWNlIEFsbG93cyB0byBCdXkgSUNPIHRva2VucyBkaXJlY3RseSBmcm9tIHRoaXMgY29udHJhY3QgYnkgc2VuZGluZyBldGhlcgogICAgKi8KICAgIGZ1bmN0aW9uIGJ1eUNvaW5zQXRJQ08oKSBwYXlhYmxlIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2VzcykgeyAKCiAgICAgICAgbXNnU25kclttc2cuc2VuZGVyXSA9IG1zZy52YWx1ZTsKCiAgICAgICAgSUNPIGljbyA9IElDTyhfZ2V0SWNvQWRkcigpICk7CgogICAgICAgIHJlcXVpcmUoICBtc2cudmFsdWUgPiAwICk7CiAgICAgICAgCiAgICAgICAgLy8gYnV5IGV4ZSBhdCBpY28KICAgICAgICBib29sIGljb3N1Y2Nlc3M7ICB1aW50IHRrbnNCdXlBcHByOyAgICAgICAgCiAgICAgICAgKGljb3N1Y2Nlc3MsIHRrbnNCdXlBcHByKSA9IGljby5idXkoIG1zZy52YWx1ZSwgbXNnLnNlbmRlciwgZmFsc2UpOyAgICAgICAgCiAgICAgICAgICAgICAgICByZXF1aXJlKCBpY29zdWNjZXNzID09IHRydWUgKTsKICAgICAgICAKICAgICAgICAvLyB0a24gdHJhbnNmZXIKICAgICAgICBib29sIHN1Y3NUclRrID0gIF9zYWZlVHJhbnNmZXJUa24oIG93bmVyLCBtc2cuc2VuZGVyLCB0a25zQnV5QXBwcik7CiAgICAgICAgcmVxdWlyZShzdWNzVHJUayA9PSB0cnVlKTsKCiAgICAgICAgbXNnU25kclttc2cuc2VuZGVyXSA9IDA7CgogICAgICAgIHJldHVybiAodHJ1ZSkgOwogICAgfSAgICAgCi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLwogICAgLyogQG5vdGljZSBBbGxvd3MgYW55b25lIHRvIHByZXZpZXcgYSBCdXkgb2YgSUNPIHRva2VucyBiZWZvcmUgYW4gYWN0dWFsIGJ1eQogICAgKi8KCiAgICBmdW5jdGlvbiBidXlDb2luc1ByZXZpZXcodWludCBteVByb3Bvc2VkUGF5bWVudEluV0VJKSBwdWJsaWMgdmlldyByZXR1cm5zKGJvb2wgc3VjY2VzcywgdWludCB0b2tlbnNZb3VDYW5CdXksIHVpbnQgeW91clNhZmVNaW5CYWxSZXFkSW5XRUkpIHsgCiAgICAgICAgCiAgICAgICAgdWludCBwYXltZW50ID0gbXlQcm9wb3NlZFBheW1lbnRJbldFSTsKICAgICAgIAogICAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSBwYXltZW50OyAgCiAgICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgICAgIAogICAgICAgIElDTyBpY28gPSBJQ08oX2dldEljb0FkZHIoKSApOwoKICAgICAgICB0b2tlbnNZb3VDYW5CdXkgPSAwOwogICAgICAgIGJvb2wgaWNvc3VjY2VzczsgICAgICAgICAgICAKICAgICAgICAoaWNvc3VjY2VzcywgdG9rZW5zWW91Q2FuQnV5KSA9IGljby5idXkoIHBheW1lbnQsIG1zZy5zZW5kZXIsIHRydWUpOyAgICAgICAgCgogICAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSAwOwoKICAgICAgICByZXR1cm4gKCBpY29zdWNjZXNzLCB0b2tlbnNZb3VDYW5CdXksIGljby5nZXRNaW5CYWwoKSkgOwogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KICAgICAvKioKICAgICAqICBAbm90aWNlIEFsbG93cyBUb2tlbiBvd25lcnMgdG8gUmVkZWVtIFRva2VucyB0byB0aGlzIENvbnRyYWN0IGZvciBpdHMgdmFsdWUgcHJvbWlzZWQKICAgICAqLwogICAgZnVuY3Rpb24gcmVkZWVtQ29pbnNUb0lDTyggdWludDI1NiBhbW91bnRPZkNvaW5zVG9SZWRlZW0pIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MgKSB7CgogICAgdWludCBhbW91bnQgPSBhbW91bnRPZkNvaW5zVG9SZWRlZW07CgogICAgbXNnU25kclttc2cuc2VuZGVyXSA9IGFtb3VudDsgIAogICAgICBib29sIGlzUHJldmlldyA9IGZhbHNlOwoKICAgICAgSUNPIGljbyA9IElDTyhfZ2V0SWNvQWRkcigpKTsKCiAgICAgIC8vIHJlZGVlbSBleGUgYXQgaWNvCiAgICAgIGJvb2wgaWNvc3VjY2VzcyA7IHVpbnQgcmVkZWVtUGF5bWVudFZhbHVlOwogICAgICAoaWNvc3VjY2VzcyAsIHJlZGVlbVBheW1lbnRWYWx1ZSkgPSBpY28ucmVkZWVtQ29pbiggYW1vdW50LCBtc2cuc2VuZGVyLCBpc1ByZXZpZXcpOwogICAgICByZXF1aXJlKCBpY29zdWNjZXNzID09IHRydWUpOyAgCgogICAgICByZXF1aXJlKCBfZ2V0SWNvQWRkcigpLmJhbGFuY2UgPj0gc2FmZUFkZCggaWNvLmdldE1pbkJhbCgpICwgcmVkZWVtUGF5bWVudFZhbHVlKSApOwoKICAgICAgYm9vbCBzdWNzVHJUayA9IGZhbHNlOyBib29sIHB5bUFjdFN1Y3MgPSBmYWxzZTsKICAgICAgaWYoaXNQcmV2aWV3ID09IGZhbHNlKSB7CgogICAgICAgIC8vIHRyYW5zZmVyIHRrbnMKICAgICAgICBzdWNzVHJUayA9ICBfc2FmZVRyYW5zZmVyVGtuKCBtc2cuc2VuZGVyLCBvd25lciwgYW1vdW50KTsKICAgICAgICByZXF1aXJlKHN1Y3NUclRrID09IHRydWUpOyAgICAgICAgCgogICAgICAgIC8vIHBheW1lbnQgcmVxIHRvIGljbyAgMSBmb3IgcmVkZWVtcGF5bWVudCBhbmQgMiBmb3Igc2VsbCBwYXltZW50ICAgICAgICAgCiAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSByZWRlZW1QYXltZW50VmFsdWU7CiAgICAgICAgcHltQWN0U3VjcyA9IF9zYWZlUGF5bWVudEFjdGlvbkF0SWNvKCByZWRlZW1QYXltZW50VmFsdWUsIG1zZy5zZW5kZXIsIDEpOwogICAgICAgIHJlcXVpcmUocHltQWN0U3VjcyA9PSAgdHJ1ZSk7CiAgICAgIH0gCgogICAgbXNnU25kclttc2cuc2VuZGVyXSA9IDA7ICAKCiAgICAgIHJldHVybiAodHJ1ZSk7ICAgICAgICAKICAgIH0gCi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCiAgICAvKioKICAgICAqICBAbm90aWNlIEFsbG93cyBUb2tlbiBvd25lcnMgdG8gU2VsbCBUb2tlbnMgZGlyZWN0bHkgdG8gdGhpcyBDb250cmFjdAogICAgICoKICAgICAqLyAgICAKICAgICBmdW5jdGlvbiBzZWxsQ29pbnNUb0lDTyggdWludDI1NiBhbW91bnRPZkNvaW5zVG9TZWxsICkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcyApIHsKCiAgICAgIHVpbnQgYW1vdW50ID0gYW1vdW50T2ZDb2luc1RvU2VsbDsKCiAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSBhbW91bnQ7ICAKICAgICAgICBib29sIGlzUHJldmlldyA9IGZhbHNlOwoKICAgICAgICBJQ08gaWNvID0gSUNPKF9nZXRJY29BZGRyKCkgKTsKCiAgICAgICAgLy8gc2VsbCBleGUgYXQgaWNvCiAgICAgICAgYm9vbCBpY29zdWNjZXNzOyB1aW50IHNlbGxQYXltZW50VmFsdWU7IAogICAgICAgICggaWNvc3VjY2VzcyAsICBzZWxsUGF5bWVudFZhbHVlKSA9IGljby5zZWxsKCBhbW91bnQsIG1zZy5zZW5kZXIsIGlzUHJldmlldyk7CiAgICAgICAgcmVxdWlyZSggaWNvc3VjY2VzcyA9PSB0cnVlICk7CgogICAgICAgIHJlcXVpcmUoIF9nZXRJY29BZGRyKCkuYmFsYW5jZSA+PSBzYWZlQWRkKGljby5nZXRNaW5CYWwoKSAsIHNlbGxQYXltZW50VmFsdWUpICk7CgogICAgICAgIGJvb2wgc3Vjc1RyVGsgPSBmYWxzZTsgYm9vbCBweW1BY3RTdWNzID0gZmFsc2U7CiAgICAgICAgaWYoaXNQcmV2aWV3ID09IGZhbHNlKXsKCiAgICAgICAgICAvLyB0b2tlbiB0cmFuc2ZlcgogICAgICAgICAgc3Vjc1RyVGsgPSAgX3NhZmVUcmFuc2ZlclRrbiggbXNnLnNlbmRlciwgb3duZXIsICBhbW91bnQpOwogICAgICAgICAgcmVxdWlyZShzdWNzVHJUayA9PSB0cnVlKTsKCiAgICAgICAgICAvLyBwYXltZW50IHJlcXVlc3QgdG8gaWNvICAxIGZvciByZWRlZW1wYXltZW50IGFuZCAyIGZvciBzZWxsIHBheW1lbnQKICAgICAgICBtc2dTbmRyW21zZy5zZW5kZXJdID0gc2VsbFBheW1lbnRWYWx1ZTsKICAgICAgICAgIHB5bUFjdFN1Y3MgPSBfc2FmZVBheW1lbnRBY3Rpb25BdEljbyggc2VsbFBheW1lbnRWYWx1ZSwgbXNnLnNlbmRlciwgMik7CiAgICAgICAgICByZXF1aXJlKHB5bUFjdFN1Y3MgPT0gIHRydWUpOwogICAgICAgIH0KCiAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSAwOwoKICAgICAgICByZXR1cm4gKCB0cnVlKTsgICAgICAgICAgICAgICAgCiAgICB9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KICAgIC8qKgogICAgKiBAbm90aWNlIGEgc2VsbGVycyBhbGxvd2VkIGxpbWl0cyBpbiBob2xkaW5nIGljbyB0b2tlbnMgaXMgY2hlY2tlZAogICAgKi8KICAgIC8vCiAgICBmdW5jdGlvbiBfY2hrU2VsbGVyTG10cyggYWRkcmVzcyBzZWxsZXIsIHVpbnQgYW1vdW50T2ZDb2luc1NlbGxlckNhblNlbGwpIGludGVybmFsIHJldHVybnMoYm9vbCBzdWNjZXNzKXsgICAKCiAgICAgIHVpbnQgYW1vdW50VGtucyA9IGFtb3VudE9mQ29pbnNTZWxsZXJDYW5TZWxsOyAKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgICBJQ08gaWNvID0gSUNPKCBfZ2V0SWNvQWRkcigpICk7CiAgICAgIHVpbnQgc2VyaWVzQ2FwRmFjdG9yID0gaWNvLmdldFNDRigpOwoKICAgICAgaWYoIGFtb3VudFRrbnMgPD0gYmFsYW5jZU9mW3NlbGxlcl0gICYmICBiYWxhbmNlT2Zbc2VsbGVyXSA8PSAgc2FmZURpdihhbGxvd2VkSW5kaXZpZHVhbFNoYXJlKnNlcmllc0NhcEZhY3RvciwxMCoqMTgpICl7CiAgICAgICAgc3VjY2VzcyA9IHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIHN1Y2Nlc3M7CiAgICB9CiAgICAvLyBib29sIHN1Y3NTbHJMbXQgPSBfY2hrU2VsbGVyTG10cyggYWRkcmVzcyBzZWxsZXIsIHVpbnQgYW1vdW50VGtucyk7Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fICAgIAovLwogICAgLyoqCiAgICAqIEBub3RpY2UgYSBidXllcnMgYWxsb3dlZCBsaW1pdHMgaW4gaG9sZGluZyBpY28gdG9rZW5zIGlzIGNoZWNrZWQgCiAgICAqLwogICAgZnVuY3Rpb24gX2Noa0J1eWVyTG10cyggYWRkcmVzcyBidXllciwgdWludCBhbW91bnRPZkNvaW5zQnV5ZXJDYW5CdXkpICBpbnRlcm5hbCAgcmV0dXJucyhib29sIHN1Y2Nlc3MpewoKICAgIAl1aW50IGFtb3VudFRrbnMgPSBhbW91bnRPZkNvaW5zQnV5ZXJDYW5CdXk7CiAgICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgICAgIElDTyBpY28gPSBJQ08oIF9nZXRJY29BZGRyKCkgKTsKICAgICAgICB1aW50IHNlcmllc0NhcEZhY3RvciA9IGljby5nZXRTQ0YoKTsKCiAgICAgICAgaWYoIGFtb3VudFRrbnMgPD0gc2FmZVN1Yiggc2FmZURpdihhbGxvd2VkSW5kaXZpZHVhbFNoYXJlKnNlcmllc0NhcEZhY3RvciwxMCoqMTgpLCBiYWxhbmNlT2ZbYnV5ZXJdICkpIHsKICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlOwogICAgICAgIH0gCiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7ICAgICAgICAKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KICAgIC8qKgogICAgKiBAbm90aWNlIGEgYnV5ZXJzIGFsbG93ZWQgbGltaXRzIGluIGhvbGRpbmcgaWNvIHRva2VucyBhbG9uZyB3aXRoIGZpbmFuY2lhbCBjYXBhY2l0eSB0byBidXkgaXMgY2hlY2tlZAogICAgKi8KICAgIGZ1bmN0aW9uIF9jaGtCdXllckxtdHNBbmRGaW5sKCBhZGRyZXNzIGJ1eWVyLCB1aW50IGFtb3VudFRrbnMsIHVpbnQgcHJpY2VPZnIpIGludGVybmFsIHJldHVybnMoYm9vbCBzdWNjZXNzKXsKICAgICAgIAogICAgICAgc3VjY2VzcyA9IGZhbHNlOwoKICAgICAgLy8gYnV5ZXIgbGltaXRzCiAgICAgICBib29sIHN1Y3MxID0gZmFsc2U7IAogICAgICAgc3VjczEgPSBfY2hrQnV5ZXJMbXRzKCBidXllciwgYW1vdW50VGtucyk7CgogICAgICAvLyBidXllciBmdW5kcwogICAgICAgSUNPIGljbyA9IElDTyggX2dldEljb0FkZHIoKSApOwogICAgICAgYm9vbCBzdWNzMiA9IGZhbHNlOwogICAgICAgaWYoIGJ1eWVyLmJhbGFuY2UgPj0gIHNhZmVBZGQoIHNhZmVNdWwoYW1vdW50VGtucyAsIHByaWNlT2ZyKSAsIGljby5nZXRNaW5CYWwoKSApICApICBzdWNzMiA9IHRydWU7CiAgICAgICBpZiggc3VjczEgPT0gdHJ1ZSAmJiBzdWNzMiA9PSB0cnVlKSAgc3VjY2VzcyA9IHRydWU7ICAgCgogICAgICAgcmV0dXJuIHN1Y2Nlc3M7CiAgICB9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCi8vCiAgICAgZnVuY3Rpb24gX3NsckJ5ckxtdENoayggYWRkcmVzcyBzZWxsZXIsIHVpbnQgYW1vdW50VGtucywgdWludCBwcmljZU9mciwgYWRkcmVzcyBidXllcikgaW50ZXJuYWwgcmV0dXJucyhib29sIHN1Y2Nlc3MpewogICAgIAogICAgICAvLyBzZWxsZXIgbGltaXRzIGNoZWNrCiAgICAgICAgYm9vbCBzdWNjZXNzU2xybDsgCiAgICAgICAgKHN1Y2Nlc3NTbHJsKSA9IF9jaGtTZWxsZXJMbXRzKCBzZWxsZXIsIGFtb3VudFRrbnMpOyAKCiAgICAgIC8vIGJ1eWVyIGxpbWl0cyBjaGVjawogICAgICAgIGJvb2wgc3VjY2Vzc0J5cmxBRmlubDsKICAgICAgICAoc3VjY2Vzc0J5cmxBRmlubCkgPSBfY2hrQnV5ZXJMbXRzQW5kRmlubCggYnV5ZXIsIGFtb3VudFRrbnMsIHByaWNlT2ZyKTsKICAgICAgICAKICAgICAgICByZXF1aXJlKCBzdWNjZXNzU2xybCA9PSB0cnVlICYmIHN1Y2Nlc3NCeXJsQUZpbmwgPT0gdHJ1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KICAgIC8qKgogICAgKiBAbm90aWNlIGFsbG93cyBhIHNlbGxlciB0byBmb3JtYWxseSByZWdpc3RlciBoaXMgc2VsbCBvZmZlciBhdCBFeGNoYW5nZU1hY3JvYW5zeQogICAgKi8KICAgICAgZnVuY3Rpb24gc2VsbEJrZ0F0RXhjaGcoIHVpbnQgYW1vdW50T2ZDb2luc09mZmVyLCB1aW50IHByaWNlT2ZPbmVDb2luSW5XRUkpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2Vzcyl7CgogICAgICAgIHVpbnQgYW1udFRrbnMgPSBhbW91bnRPZkNvaW5zT2ZmZXIgOwogICAgICAgIHVpbnQgdGtuUHJpY2UgPSBwcmljZU9mT25lQ29pbkluV0VJOwogICAgICAKICAgICAgICAvLyBzZWxsZXIgbGltaXRzCiAgICAgICAgYm9vbCBzdWNjZXNzU2xybDsKICAgICAgICAoc3VjY2Vzc1NscmwpID0gX2Noa1NlbGxlckxtdHMoIG1zZy5zZW5kZXIsIGFtbnRUa25zKTsgCiAgICAgICAgcmVxdWlyZShzdWNjZXNzU2xybCA9PSB0cnVlKTsKCiAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSBhbW50VGtuczsgIAoKICAgICAgLy8gYmtnIHJlZ2lzdHJhdGlvbiBhdCBleGNoYW5nZQoKICAgICAgICBFeGNoZyBlbSA9IEV4Y2hnKF9nZXRFeGNoZ0FkZHIoKSk7CgogICAgICAgIGJvb2wgIGVtc3VjY2VzczsgCiAgICAgICAgKGVtc3VjY2VzcykgPSBlbS5zZWxsX0V4Y2hnX1JlZyggYW1udFRrbnMsIHRrblByaWNlLCBtc2cuc2VuZGVyICk7CiAgICAgICAgcmVxdWlyZShlbXN1Y2Nlc3MgPT0gdHJ1ZSApOwogICAgICAgICAgICAKICAgICAgbXNnU25kclttc2cuc2VuZGVyXSA9IDA7CgogICAgICAgIHJldHVybiB0cnVlOyAgICAgICAgIAogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyAKLy8gICAgCiAgICAvKioKICAgICogQG5vdGljZSBmdW5jdGlvbiBmb3IgYm9va2luZyBhbmQgbG9ja2luZyBmb3IgYSBidXkgd2l0aCByZXNwZWN0IHRvIGEgc2FsZSBvZmZlciByZWdpc3RlcmVkCiAgICAqIEBub3RpY2UgYWZ0ZXIgYm9va2luZyB0aGVuIHByb2NlZWQgZm9yIHBheW1lbnQgdXNpbmcgZnVuYyBidXlDb2luc0F0RXhjaGcgCiAgICAqIEBub3RpY2UgcGF5bWVudCBib29raW5nIHZhbHVlIGFuZCBhY3R1YWwgcGF5bWVudCB2YWx1ZSBzaG91bGQgYmUgZXhhY3QKICAgICovICAKICAgICAgZnVuY3Rpb24gYnV5QmtnQXRFeGNoZyggYWRkcmVzcyBzZWxsZXIsIHVpbnQgc2VsbGVyc0NvaW5BbW91bnRPZmZlciwgdWludCBzZWxsZXJzUHJpY2VPZk9uZUNvaW5JbldFSSwgdWludCBteVByb3Bvc2VkUGF5bWVudEluV0VJKSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpeyAKICAgICAgICAKICAgICAgICB1aW50IGFtb3VudFRrbnMgPSBzZWxsZXJzQ29pbkFtb3VudE9mZmVyOwogICAgICAgIHVpbnQgcHJpY2VPZnIgPSBzZWxsZXJzUHJpY2VPZk9uZUNvaW5JbldFSTsKICAgICAgICB1aW50IHBheW1lbnQgPSBteVByb3Bvc2VkUGF5bWVudEluV0VJOyAgICAgICAgIAogICAgCiAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSBhbW91bnRUa25zOwoKICAgICAgICAvLyBzZWxsZXIgYnV5ZXIgbGltaXRzIGNoZWNrCiAgICAgICAgYm9vbCBzdWNzTG10ID0gX3NsckJ5ckxtdENoayggc2VsbGVyLCBhbW91bnRUa25zLCBwcmljZU9mciwgbXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZShzdWNzTG10ID09IHRydWUpOwoKICAgICAgICAvLyBib29raW5nIGF0IGV4Y2hhbmdlCiAgICAgCiAgICAgICAgRXhjaGcgZW0gPSBFeGNoZyhfZ2V0RXhjaGdBZGRyKCkpOyAKCiAgICAgICAgYm9vbCBlbUJrZ3N1Y2Nlc3M7CiAgICAgICAgKGVtQmtnc3VjY2Vzcyk9IGVtLmJ1eV9FeGNoZ19ib29raW5nKCBzZWxsZXIsIGFtb3VudFRrbnMsIHByaWNlT2ZyLCBtc2cuc2VuZGVyLCBwYXltZW50KTsKICAgICAgICAgICAgcmVxdWlyZSggZW1Ca2dzdWNjZXNzID09IHRydWUgKTsKCiAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSAwOyAgCgogICAgICAgIHJldHVybiB0cnVlOyAgICAgICAgCiAgICB9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCiAgICAvKioKICAgICogQG5vdGljZSBmb3IgYnV5aW5nQ29pbnMgYXQgRXhjaGFuZ2VNYWNyb2Fuc3kgCiAgICAqIEBub3RpY2UgcGxlYXNlIGZpcnN0IGJvb2sgdGhlIGJ1eSB0aHJvdWdoIGZ1bmN0aW9uX2J1eV9FeGNoZ19ib29raW5nCiAgICAqLwogICAvLyBmdW5jdGlvbiBidXlDb2luc0F0RXhjaGcoIGFkZHJlc3Mgc2VsbGVyLCB1aW50IGFtb3VudFRrbnMsIHVpbnQgcHJpY2VPZnIpIHBheWFibGUgcHVibGljIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7CgogICAgZnVuY3Rpb24gYnV5Q29pbnNBdEV4Y2hnKCBhZGRyZXNzIHNlbGxlciwgdWludCBzZWxsZXJzQ29pbkFtb3VudE9mZmVyLCB1aW50IHNlbGxlcnNQcmljZU9mT25lQ29pbkluV0VJKSBwYXlhYmxlIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2VzcykgewogICAgICAgCiAgICAgICAgdWludCBhbW91bnRUa25zID0gc2VsbGVyc0NvaW5BbW91bnRPZmZlcjsKICAgICAgICB1aW50IHByaWNlT2ZyID0gc2VsbGVyc1ByaWNlT2ZPbmVDb2luSW5XRUk7CSAgICAgICAKICAgICAgICByZXF1aXJlKCBtc2cudmFsdWUgPiAwICYmIG1zZy52YWx1ZSA8PSBzYWZlTXVsKGFtb3VudFRrbnMsIHByaWNlT2ZyICkgKTsKCiAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSBhbW91bnRUa25zOwoKICAgICAgICAvLyBjYWxjIHRva2VucyB0aGF0IGNhbiBiZSBib3VnaHQgIAogIAogICAgICAgIHVpbnQgdGtuc0J1eUFwcHIgPSBzYWZlRGl2KG1zZy52YWx1ZSAsIHByaWNlT2ZyKTsKCiAgICAgICAgLy8gY2hlY2sgYnV5ZXIgYm9va2luZyBhdCBleGNoYW5nZQogIAogICAgICAgIEV4Y2hnIGVtID0gRXhjaGcoX2dldEV4Y2hnQWRkcigpKTsgCiAgICAgICAgCiAgICAgICAgYm9vbCBzdWNzQmtnQ2hrID0gZW0uYnV5X0V4Y2hnX0JrZ0NoayhzZWxsZXIsIGFtb3VudFRrbnMsIHByaWNlT2ZyLCBtc2cuc2VuZGVyLCBtc2cudmFsdWUpOyAKICAgICAgICByZXF1aXJlKHN1Y3NCa2dDaGsgPT0gdHJ1ZSk7CgogICAgICAgLy8gdXBkYXRlIHNlbGxlciByZWcgYW5kIGJ1eWVyIGJvb2tpbmcgYXQgZXhjaGFuZ2UKCiAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSB0a25zQnV5QXBwcjsgIAogCiAgICAgICAgYm9vbCBlbVVwZGF0ZVN1Y2Nlc3M7CiAgICAgICAgKGVtVXBkYXRlU3VjY2VzcykgPSBlbS51cGRhdGVTZWxsZXIoc2VsbGVyLCB0a25zQnV5QXBwciwgbXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgCiAgICAgICAgcmVxdWlyZSggZW1VcGRhdGVTdWNjZXNzID09IHRydWUgKTsKICAgICAgICAKICAgICAgIC8vIHRva2VuIHRyYW5zZmVyIGluIHRoaXMgdG9rZW4gY29udHJhY3QKCiAgICAgICAgYm9vbCBzdWNzVHJUa24gPSBfc2FmZVRyYW5zZmVyVGtuKCBzZWxsZXIsIG1zZy5zZW5kZXIsIHRrbnNCdXlBcHByKTsKICAgICAgICByZXF1aXJlKHN1Y3NUclRrbiA9PSB0cnVlKTsKCiAgICAgICAgLy8gcGF5bWVudCB0byBzZWxsZXIgICAgICAgIAogICAgICAgIGJvb2wgc3Vjc1RyUGF5bW50OwogICAgICAgIHN1Y3NUclBheW1udCA9IF9zYWZlVHJhbnNmZXJQYXltbnQoIHNlbGxlciwgIHNhZmVTdWIoIG1zZy52YWx1ZSAsIHNhZmVEaXYobXNnLnZhbHVlKmVtLmdldEV4Y2hnQ29taXNuTXVsQnlUaG91c2FuZCgpLDEwMDApICkgKTsKICAgICAgICByZXF1aXJlKHN1Y3NUclBheW1udCA9PSB0cnVlICk7CiAgICAgICAvLyAgCiAgICAgICAgQnV5QXRNYWNyb2Fuc3lFeGNoZyhtc2cuc2VuZGVyLCBzZWxsZXIsIHRrbnNCdXlBcHByLCBtc2cudmFsdWUpOyAvL2V2ZW50CgogICAgICBtc2dTbmRyW21zZy5zZW5kZXJdID0gMDsgCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9IAovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgogICAvKioKICAgICAqIEBub3RpY2UgRmFsbCBCYWNrIEZ1bmN0aW9uLCBub3QgdG8gcmVjZWl2ZSBldGhlciBkaXJlY3RseSBhbmQvb3IgYWNjaWRlbnRhbGx5CiAgICAgKgogICAgICovCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgaWYobXNnLnNlbmRlciAhPSBvd25lcikgcmV2ZXJ0KCk7CiAgICB9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgogICAgLyoKICAgICogQG5vdGljZSBCdXJuaW5nIHRva2VucyBpZSByZW1vdmluZyB0b2tlbnMgZnJvbSB0aGUgZm9ybWFsIHRvdGFsIHN1cHBseQogICAgKi8KICAgIGZ1bmN0aW9uIHdhZG1pbl9idXJuKCB1aW50MjU2IHZhbHVlLCBib29sIHVuYnVybikgb25seU93bmVyIHB1YmxpYyByZXR1cm5zKCBib29sIHN1Y2Nlc3MgKSB7IAoKICAgICAgICBtc2dTbmRyW21zZy5zZW5kZXJdID0gdmFsdWU7CiAgICAgICAgIElDTyBpY28gPSBJQ08oIF9nZXRJY29BZGRyKCkgKTsKICAgICAgICAgICAgaWYoIHVuYnVybiA9PSBmYWxzZSkgewoKICAgICAgICAgICAgICAgIGJhbGFuY2VPZltvd25lcl0gPSBzYWZlU3ViKCBiYWxhbmNlT2Zbb3duZXJdICwgdmFsdWUpOwogICAgICAgICAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlU3ViKCB0b3RhbFN1cHBseSwgdmFsdWUpOwogICAgICAgICAgICAgICAgQnVybihvd25lciwgdmFsdWUpOwoKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiggdW5idXJuID09IHRydWUpIHsKCiAgICAgICAgICAgICAgICBiYWxhbmNlT2Zbb3duZXJdID0gc2FmZUFkZCggYmFsYW5jZU9mW293bmVyXSAsIHZhbHVlKTsKICAgICAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCggdG90YWxTdXBwbHkgLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICBVbkJ1cm4ob3duZXIsIHZhbHVlKTsKCiAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICBib29sIGljb3N1Y2Nlc3MgPSBpY28uYnVybiggdmFsdWUsIHVuYnVybiwgdG90YWxTdXBwbHlTdGFydCwgYmFsYW5jZU9mW293bmVyXSApOwogICAgICAgIHJlcXVpcmUoIGljb3N1Y2Nlc3MgPT0gdHJ1ZSk7ICAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOyAgICAgICAgICAgICAgICAgICAgIAogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwogICAgLyoKICAgICogQG5vdGljZSBXaXRoZHJhdyBQYXltZW50cyB0byBiZW5lZmljaWFyeSAKICAgICogQHBhcmFtIHdpdGhkcmF3QW1vdW50IHRoZSBhbW91bnQgd2l0aGRyYXduIGluIHdlaQogICAgKi8KICAgIGZ1bmN0aW9uIHdhZG1pbl93aXRoZHJhd0Z1bmQodWludCB3aXRoZHJhd0Ftb3VudCkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2VzcykgewogICAgICAKICAgICAgICBzdWNjZXNzID0gX3dpdGhkcmF3KHdpdGhkcmF3QW1vdW50KTsgICAgICAgICAgCiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7ICAgICAgCiAgICB9ICAgCi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCiAgICAgLyppbnRlcm5hbCBmdW5jdGlvbiBjYW4gY2FsbGVkIGJ5IHRoaXMgY29udHJhY3Qgb25seQogICAgICovCiAgICBmdW5jdGlvbiBfd2l0aGRyYXcodWludCBfd2l0aGRyYXdBbW91bnQpIGludGVybmFsIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIGJvb2wgc3Vjc1RyUGF5bW50ID0gX3NhZmVUcmFuc2ZlclBheW1udCggYmVuZWZpY2lhcnlGdW5kcywgX3dpdGhkcmF3QW1vdW50KTsgCiAgICAgICAgcmVxdWlyZShzdWNzVHJQYXltbnQgPT0gdHJ1ZSk7ICAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7ICAgICAKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KICAgIC8qKgogICAgICogIEBub3RpY2UgQWxsb3dzIHRvIHJlY2VpdmUgY29pbnMgZnJvbSBDb250cmFjdCBTaGFyZSBhcHByb3ZlZCBieSBjb250cmFjdAogICAgICogIEBub3RpY2UgdG8gcmVjZWl2ZSB0aGUgc2hhcmUsIGl0IGhhcyB0byBiZSBhbHJlYWR5IGFwcHJvdmVkIGJ5IHRoZSBjb250cmFjdAogICAgICogIEBub3RpY2UgdGhlIHNoYXJlIElkIHdpbGwgYmUgcHJvdmlkZWQgYnkgY29udHJhY3Qgd2hpbGUgcGF5bWVudHMgYXJlIG1hZGUgdGhyb3VnaCBvdGhlciBjaGFubmVscyBsaWtlIHBheXBhbAogICAgICogIEBwYXJhbSBhbW91bnRPZkNvaW5zVG9SZWNlaXZlIHRoZSBhbGxvY2F0ZWQgYWxsb3dhbmNlIG9mIGNvaW5zIHRvIGJlIHRyYW5zZmVycmVkIHRvIHlvdSAgIAogICAgICogIEBwYXJhbSAgU2hySUQgIDEgaXMgRm91bmRlclNoYXJlLCAyIGlzIFBPT0xTaGFyZSwgMyBpcyBDb2xkUmVzZXJ2ZVNoYXJlLCA0IGlzIFZDU2hhcmUsIDUgaXMgUHVibGljU2hhcmUsIDYgaXMgUmRtU2VsbFBvb2wKICAgICAqLyAKICAgIGZ1bmN0aW9uIHJlY2VpdmVJQ09jb2lucyggdWludDI1NiBhbW91bnRPZkNvaW5zVG9SZWNlaXZlLCB1aW50IFNocklEICkgIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpeyAKCiAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSBhbW91bnRPZkNvaW5zVG9SZWNlaXZlOwogICAgICAgIElDTyBpY28gPSBJQ08oIF9nZXRJY29BZGRyKCkgKTsKICAgICAgICBib29sICBpY29zdWNjZXNzOyAgCiAgICAgICAgaWNvc3VjY2VzcyA9IGljby5yZWN2U2hySUNPKG1zZy5zZW5kZXIsIGFtb3VudE9mQ29pbnNUb1JlY2VpdmUsIFNocklEICk7IAogICAgICAgIHJlcXVpcmUgKGljb3N1Y2Nlc3MgPT0gdHJ1ZSk7CgogICAgICAgIGJvb2wgc3Vjc1RyVGs7CiAgICAgICAgc3Vjc1RyVGsgPSAgX3NhZmVUcmFuc2ZlclRrbiggb3duZXIsIG1zZy5zZW5kZXIsIGFtb3VudE9mQ29pbnNUb1JlY2VpdmUpOwogICAgICAgIHJlcXVpcmUoc3Vjc1RyVGsgPT0gdHJ1ZSk7CgogICAgICBtc2dTbmRyW21zZy5zZW5kZXJdID0gMDsKCiAgICAgICAgcmV0dXJuICB0cnVlOwogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8gIGNhbGxlZCBieSBvdGhlciBjb250cmFjdHMKICAgIGZ1bmN0aW9uIHNlbmRNc2dTbmRyKGFkZHJlc3MgY2FsbGVyLCBhZGRyZXNzIG9yaWdpbikgcHVibGljIHJldHVybnMoYm9vbCBzdWNjZXNzLCB1aW50IHZhbHVlKXsKICAgICAgICAKICAgICAgICAoc3VjY2VzcywgdmFsdWUpID0gX3NlbmRNc2dTbmRyKGNhbGxlciwgb3JpZ2luKTsgICAgICAgIAogICAgICAgICByZXR1cm4oc3VjY2VzcywgdmFsdWUpOyAgCiAgICB9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLwogICAgZnVuY3Rpb24gX3NlbmRNc2dTbmRyKGFkZHJlc3MgY2FsbGVyLCAgYWRkcmVzcyBvcmlnaW4pIGludGVybmFsIHJldHVybnMoYm9vbCBzdWNjZXNzLCB1aW50IHZhbHVlKXsgCiAgICAgICAKICAgICAgICByZXF1aXJlKGNhbGxlciA9PSBfZ2V0SWNvQWRkcigpIHx8IGNhbGxlciA9PSBfZ2V0RXhjaGdBZGRyKCkpOyAKICAgICAgICAgIC8vcmVxdWlyZShvcmlnaW4gPT0gdHgub3JpZ2luKTsgICAgICAgICAgCiAgICAgICAgcmV0dXJuKHRydWUsIG1zZ1NuZHJbb3JpZ2luXSk7ICAKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCi8vCiAgICBmdW5jdGlvbiBhX3ZpZXdTZWxsT2ZmZXJzQXRFeGNoYW5nZU1hY3JvYW5zeShhZGRyZXNzIHNlbGxlciwgYm9vbCBzaG93KSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50IHNlbGxlcnNDb2luQW1vdW50T2ZmZXIsIHVpbnQgc2VsbGVyc1ByaWNlT2ZPbmVDb2luSW5XRUksIHVpbnQgc2VsbGVyQm9va2VkVGltZSwgYWRkcmVzcyBidXllcldob0Jvb2tlZCwgdWludCBidXlQYXltZW50Qm9va2VkLCB1aW50IGJ1eWVyQm9va2VkVGltZSwgdWludCBleGNoZ0NvbW1pc3Npb25NdWxCeVRob3VzYW5kXyl7CgogICAgICBpZihzaG93ID09IHRydWUpewoKICAgICAgICAgIEV4Y2hnIGVtID0gRXhjaGcoX2dldEV4Y2hnQWRkcigpKTsgCiAgICAgICAgIAogICAgICAgICggc2VsbGVyc0NvaW5BbW91bnRPZmZlciwgIHNlbGxlcnNQcmljZU9mT25lQ29pbkluV0VJLCAgc2VsbGVyQm9va2VkVGltZSwgIGJ1eWVyV2hvQm9va2VkLCAgYnV5UGF5bWVudEJvb2tlZCwgIGJ1eWVyQm9va2VkVGltZSwgZXhjaGdDb21taXNzaW9uTXVsQnlUaG91c2FuZF8pID0gZW0udmlld1NlbGxPZmZlcnNBdEV4Y2hhbmdlTWFjcm9hbnN5KCBzZWxsZXIsIHNob3cpIDsgCgogICAgICAgIHJldHVybiAoIHNlbGxlcnNDb2luQW1vdW50T2ZmZXIsICBzZWxsZXJzUHJpY2VPZk9uZUNvaW5JbldFSSwgIHNlbGxlckJvb2tlZFRpbWUsICBidXllcldob0Jvb2tlZCwgIGJ1eVBheW1lbnRCb29rZWQsICBidXllckJvb2tlZFRpbWUsIGV4Y2hnQ29tbWlzc2lvbk11bEJ5VGhvdXNhbmRfKTsKICAgICAgfQogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLwoJZnVuY3Rpb24gYV92aWV3Q29pblN1cHBseUFuZEZ1bmRpbmcoYm9vbCBzaG93KSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQgdG90YWxTdXBwbHlPZkNvaW5zSW5TZXJpZXNOb3csIHVpbnQgY29pbnNBdmFpbGFibGVGb3JTYWxlLCB1aW50IGljb0Z1bmRpbmcpewoKCSAgICBpZihzaG93ID09IHRydWUpewoJICAgICAgSUNPIGljbyA9IElDTyggX2dldEljb0FkZHIoKSApOwoKCSAgICAgICggdG90YWxTdXBwbHlPZkNvaW5zSW5TZXJpZXNOb3csIGNvaW5zQXZhaWxhYmxlRm9yU2FsZSwgaWNvRnVuZGluZykgPSBpY28uZ2V0QXZsU2hhcmVzKHNob3cpOwoKCSAgICAgIHJldHVybiggdG90YWxTdXBwbHlPZkNvaW5zSW5TZXJpZXNOb3csIGNvaW5zQXZhaWxhYmxlRm9yU2FsZSwgaWNvRnVuZGluZyk7CgkgICAgfQoJfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KCQkJLyoKCQkJYm9vbCBwcml2YXRlIGlzRW5kT2s7CgkJCQlmdW5jdGlvbiBlbmRPZlJld2FyZHMoYm9vbCBpc0VuZE5vdykgcHVibGljIG9ubHlPd25lciB7CgoJCQkJCQlpc0VuZE9rID09IGlzRW5kTm93OwoJCQkJfQoJCQkJZnVuY3Rpb24gZW5kT2ZSZXdhcmRzQ29uZmlybWVkKGJvb2wgaXNFbmROb3cpIHB1YmxpYyBvbmx5T3duZXJ7CgoJCQkJCWlmKGlzRW5kT2sgPT0gdHJ1ZSAmJiBpc0VuZE5vdyA9PSB0cnVlKSBzZWxmZGVzdHJ1Y3Qob3duZXIpOwoJCQkJfQoJCQkqLwovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KfQovLyBFTkRfT0ZfQ09OVFJBQ1Q='.
	

]
