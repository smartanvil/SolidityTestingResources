Class {
	#name : #SRT1e932ce1e5167c4747196517783c2bc8106656f4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1e932ce1e5167c4747196517783c2bc8106656f4 >> base64 [
	^ 'Ly8gKiotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBFdGhCZXQuaW8gVG9rZW4gc2FsZSBjb250cmFjdAovLyBGaW5hbCByZXZpc2lvbiAxNmEKLy8gUmVmdW5kcyBpbnRlZ3JhdGVkLCBmdWxsIHRlc3Qgc3VpdGUgcGFzc2VkCi8vICoqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gRVJDIFRva2VuIFN0YW5kYXJkICMyMCBJbnRlcmZhY2UKLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gUHJpY2UgY29uZmlndXJhdGlvbjoKLy8gRmlyc3QgRGF5IEJvbnVzICAgICs1MCUgPSAxLDUwMCBFQkVUICA9IDEgRVRIICAgICAgIFtibG9ja3M6IHN0YXJ0ICAgLT4gcyszNjAwXQovLyBGaXJzdCBXZWVrIEJvbnVzICAgKzQwJSA9IDEsNDAwIEVCRVQgID0gMSBFVEggICAgICAgW2Jsb2NrczogcyszNjAxICAtPiBzKzI1MjAwXQovLyBTZWNvbmQgV2VlayBCb251cyAgKzMwJSA9IDEsMzAwIEVCRVQgID0gMSBFVEggICAgICAgW2Jsb2NrczogcysyNTIwMSAtPiBzKzUwNDAwXQovLyBUaGlyZCBXZWVrIEJvbnVzICAgKzI1JSA9IDEsMjUwIEVCRVQgID0gMSBFVEggICAgICAgW2Jsb2Nrczogcys1MDQwMSAtPiBzKzc1NjAwXQovLyBGaW5hbCBXZWVrIEJvbnVzICAgKzE1JSA9IDEsMTUwIEVCRVQgID0gMSBFVEggICAgICAgW2Jsb2Nrczogcys3NTYwMSAtPiBlbmRdCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KY29udHJhY3Qgb3duZWQgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgZnVuY3Rpb24gb3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9Cn0KCmNvbnRyYWN0IHNhZmVNYXRoIHsKICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIHNhZmVBc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBzYWZlQXNzZXJ0KGIgPiAwKTsKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgc2FmZUFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBzYWZlQXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIHNhZmVBc3NlcnQoYz49YSAmJiBjPj1iKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgaWYgKCFhc3NlcnRpb24pIHJldmVydCgpOwogIH0KfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBvd25lZCwgc2FmZU1hdGggewogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEVCRVRDcm93ZHNhbGUgaXMgb3duZWQsIHNhZmVNYXRoIHsKICAvLyBvd25lci9hZG1pbiAmIHRva2VuIHJld2FyZAogIGFkZHJlc3MgICAgICAgIHB1YmxpYyBhZG1pbiAgICAgICAgICAgICAgICAgICAgID0gb3duZXI7ICAgLy8gYWRtaW4gYWRkcmVzcwogIFN0YW5kYXJkVG9rZW4gIHB1YmxpYyB0b2tlblJld2FyZDsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZHJlc3Mgb2YgdGhlIHRva2VuIHVzZWQgYXMgcmV3YXJkCgogIC8vIGRlcGxveW1lbnQgdmFyaWFibGVzIGZvciBzdGF0aWMgc3VwcGx5IHNhbGUKICB1aW50MjU2IHB1YmxpYyBpbml0aWFsU3VwcGx5OwogIHVpbnQyNTYgcHVibGljIHRva2Vuc1JlbWFpbmluZzsKCiAgLy8gbXVsdGktc2lnIGFkZHJlc3NlcyBhbmQgcHJpY2UgdmFyaWFibGUKICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeVdhbGxldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiZW5lZmljaWFyeU11bHRpU2lnIChmb3VuZGVyIGdyb3VwKSBvciB3YWxsZXQgYWNjb3VudCwgbGl2ZSBpcyAweDAwRjk1OTg2NkU5Nzc2OThEMTRhMzZlQjMzMjY4NjMwNGE0ZDZBYkEKICB1aW50MjU2IHB1YmxpYyB0b2tlbnNQZXJFdGhQcmljZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaW5pdGlhbCB2YWx1ZSBmbG9hdGluZyBwcmljZVZhciAxLDUwMCB0b2tlbnMgcGVyIEV0aAoKICAvLyB1aW50MjU2IHZhbHVlcyBmb3IgbWluLG1heCxjYXBzLHRyYWNraW5nCiAgdWludDI1NiBwdWJsaWMgYW1vdW50UmFpc2VkSW5XZWk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8KICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nTWluQ2FwSW5XZWk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLwoKICAvLyBsb29wIGNvbnRyb2wsIElDTyBzdGFydHVwIGFuZCBsaW1pdGVycwogIHN0cmluZyAgcHVibGljIEN1cnJlbnRTdGF0dXMgICAgICAgICAgICAgICAgICAgPSAiIjsgICAgICAgIC8vIGN1cnJlbnQgY3Jvd2RzYWxlIHN0YXR1cwogIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdTdGFydEJsb2NrOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyb3dkc2FsZSBzdGFydCBibG9jayMKICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nRW5kQmxvY2s7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjcm93ZHNhbGUgZW5kIGJsb2NrIwogIGJvb2wgICAgcHVibGljIGlzQ3Jvd2RTYWxlQ2xvc2VkICAgICAgICAgICAgICAgPSBmYWxzZTsgICAgIC8vIGNyb3dkc2FsZSBjb21wbGV0aW9uIGJvb2xlYW4KICBib29sICAgIHB1YmxpYyBhcmVGdW5kc1JlbGVhc2VkVG9CZW5lZmljaWFyeSAgID0gZmFsc2U7ICAgICAvLyBib29sZWFuIGZvciBmb3VuZGVyIHRvIHJlY2VpdmUgRXRoIG9yIG5vdAogIGJvb2wgICAgcHVibGljIGlzQ3Jvd2RTYWxlU2V0dXAgICAgICAgICAgICAgICAgPSBmYWxzZTsgICAgIC8vIGJvb2xlYW4gZm9yIGNyb3dkc2FsZSBzZXR1cAoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBCdXkoYWRkcmVzcyBpbmRleGVkIF9zZW5kZXIsIHVpbnQyNTYgX2V0aCwgdWludDI1NiBfRUJFVCk7CiAgZXZlbnQgUmVmdW5kKGFkZHJlc3MgaW5kZXhlZCBfcmVmdW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKICBldmVudCBCdXJuKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKTsKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXNBcnJheTsKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgZnVuZFZhbHVlOwoKICAvLyBkZWZhdWx0IGZ1bmN0aW9uLCBtYXAgYWRtaW4KICBmdW5jdGlvbiBFQkVUQ3Jvd2RzYWxlKCkgb25seU93bmVyIHsKICAgIGFkbWluID0gbXNnLnNlbmRlcjsKICAgIEN1cnJlbnRTdGF0dXMgPSAiQ3Jvd2RzYWxlIGRlcGxveWVkIHRvIGNoYWluIjsKICB9CgogIC8vIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgaW5pdGlhbGx5CiAgZnVuY3Rpb24gaW5pdGlhbEVCRVRTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2VuVG90YWxTdXBwbHkpIHsKICAgICAgdG9rZW5Ub3RhbFN1cHBseSA9IHNhZmVEaXYoaW5pdGlhbFN1cHBseSwxMDApOwogIH0KCiAgLy8gcmVtYWluaW5nIG51bWJlciBvZiB0b2tlbnMKICBmdW5jdGlvbiByZW1haW5pbmdTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2Vuc0xlZnQpIHsKICAgICAgdG9rZW5zTGVmdCA9IHRva2Vuc1JlbWFpbmluZzsKICB9CgogIC8vIHNldHVwIHRoZSBDcm93ZFNhbGUgcGFyYW1ldGVycwogIGZ1bmN0aW9uIFNldHVwQ3Jvd2RzYWxlKHVpbnQyNTYgX2Z1bmRpbmdTdGFydEJsb2NrLCB1aW50MjU2IF9mdW5kaW5nRW5kQmxvY2spIG9ubHlPd25lciByZXR1cm5zIChieXRlczMyIHJlc3BvbnNlKSB7CiAgICAgIGlmICgobXNnLnNlbmRlciA9PSBhZG1pbikKICAgICAgJiYgKCEoaXNDcm93ZFNhbGVTZXR1cCkpCiAgICAgICYmICghKGJlbmVmaWNpYXJ5V2FsbGV0ID4gMCkpKXsKICAgICAgICAgIC8vIGluaXQgYWRkcmVzc2VzCiAgICAgICAgICB0b2tlblJld2FyZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBTdGFuZGFyZFRva2VuKDB4N0Q1RWRjZDIzZEFhM2ZCOTQzMTdEMzJhRTI1M2VFMUFmMDhCYTE0ZCk7ICAvL21haW5uZXQgaXMgMHg3RDVFZGNkMjNkQWEzZkI5NDMxN0QzMmFFMjUzZUUxQWYwOEJhMTRkIC8vdGVzdG5ldCA9IDB4NzU1MDhjMkIxZTQ2ZWEyOUI3Y0NmMDMwOGQ0Q2I2ZjZhZjYyMTFlMAogICAgICAgICAgYmVuZWZpY2lhcnlXYWxsZXQgICAgICAgICAgICAgICAgICAgICAgID0gMHgwMEY5NTk4NjZFOTc3Njk4RDE0YTM2ZUIzMzI2ODYzMDRhNGQ2QWJBOyAgIC8vIG1haW5uZXQgaXMgMHgwMEY5NTk4NjZFOTc3Njk4RDE0YTM2ZUIzMzI2ODYzMDRhNGQ2QWJBIC8vdGVzdG5ldCA9IDB4RGU2QkUyNDM0RThlRDhGNzRDODM5MkE5ZUI2QjZGN0Q2M0REZDNENwogICAgICAgICAgdG9rZW5zUGVyRXRoUHJpY2UgICAgICAgICAgICAgICAgICAgICAgID0gMTUwMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBkYXkxIGluaXRpYWwgdmFsdWUgZmxvYXRpbmcgcHJpY2VWYXIgMSw1MDAgdG9rZW5zIHBlciBFdGgKCiAgICAgICAgICAvLyBmdW5kaW5nIHRhcmdldHMKICAgICAgICAgIGZ1bmRpbmdNaW5DYXBJbldlaSAgICAgICAgICAgICAgICAgICAgICA9IDMwMDAwMDAwMDAwMDAwMDAwMDAwMDsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vMzAwMDAwMDAwMDAwMDAwMDAwMDAwID0gIDMwMCBFdGggKG1pbiBjYXApIC0gY3Jvd2RzYWxlIGlzIGNvbnNpZGVyZWQgc3VjY2VzcyBhZnRlciB0aGlzIHZhbHVlICAvL3Rlc3RuZXQgNjAwMDAwMDAwMDAwMDAwMDAwMCA9IDZFdGgKCiAgICAgICAgICAvLyB1cGRhdGUgdmFsdWVzCiAgICAgICAgICBhbW91bnRSYWlzZWRJbldlaSAgICAgICAgICAgICAgICAgICAgICAgPSAwOwogICAgICAgICAgaW5pdGlhbFN1cHBseSAgICAgICAgICAgICAgICAgICAgICAgICAgID0gNzUwMDAwMDAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICA3LDUwMCwwMDAgKyAyIGRlY2ltYWxzID0gNzUwMDAwMDAwIC8vdGVzdG5ldCAxMTAwMDAwID0xMSwwMDAKICAgICAgICAgIHRva2Vuc1JlbWFpbmluZyAgICAgICAgICAgICAgICAgICAgICAgICA9IHNhZmVEaXYoaW5pdGlhbFN1cHBseSwxMDApOwoKICAgICAgICAgIGZ1bmRpbmdTdGFydEJsb2NrICAgICAgICAgICAgICAgICAgICAgICA9IF9mdW5kaW5nU3RhcnRCbG9jazsKICAgICAgICAgIGZ1bmRpbmdFbmRCbG9jayAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mdW5kaW5nRW5kQmxvY2s7CgogICAgICAgICAgLy8gY29uZmlndXJlIGNyb3dkc2FsZQogICAgICAgICAgaXNDcm93ZFNhbGVTZXR1cCAgICAgICAgICAgICAgICAgICAgICAgID0gdHJ1ZTsKICAgICAgICAgIGlzQ3Jvd2RTYWxlQ2xvc2VkICAgICAgICAgICAgICAgICAgICAgICA9IGZhbHNlOwogICAgICAgICAgQ3VycmVudFN0YXR1cyAgICAgICAgICAgICAgICAgICAgICAgICAgID0gIkNyb3dkc2FsZSBpcyBzZXR1cCI7CgogICAgICAgICAgLy9nYXMgcmVkdWN0aW9uIGV4cGVyaW1lbnQKICAgICAgICAgIHNldFByaWNlKCk7CiAgICAgICAgICByZXR1cm4gIkNyb3dkc2FsZSBpcyBzZXR1cCI7CiAgICAgIH0gZWxzZSBpZiAobXNnLnNlbmRlciAhPSBhZG1pbikgewogICAgICAgICAgcmV0dXJuICJub3QgYXV0aG9yaXplZCI7CiAgICAgIH0gZWxzZSAgewogICAgICAgICAgcmV0dXJuICJjYW1wYWlnbiBjYW5ub3QgYmUgY2hhbmdlZCI7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRQcmljZSgpIHsKICAgICAgLy8gUHJpY2UgY29uZmlndXJhdGlvbjoKICAgICAgLy8gRmlyc3QgRGF5IEJvbnVzICAgICs1MCUgPSAxLDUwMCBFQkVUICA9IDEgRVRIICAgICAgIFtibG9ja3M6IHN0YXJ0IC0+IHMrMzYwMF0KICAgICAgLy8gRmlyc3QgV2VlayBCb251cyAgICs0MCUgPSAxLDQwMCBFQkVUICA9IDEgRVRIICAgICAgIFtibG9ja3M6IHMrMzYwMSAgLT4gcysyNTIwMF0KICAgICAgLy8gU2Vjb25kIFdlZWsgQm9udXMgICszMCUgPSAxLDMwMCBFQkVUICA9IDEgRVRIICAgICAgIFtibG9ja3M6IHMrMjUyMDEgLT4gcys1MDQwMF0KICAgICAgLy8gVGhpcmQgV2VlayBCb251cyAgICsyNSUgPSAxLDI1MCBFQkVUICA9IDEgRVRIICAgICAgIFtibG9ja3M6IHMrNTA0MDEgLT4gcys3NTYwMF0KICAgICAgLy8gRmluYWwgV2VlayBCb251cyAgICsxNSUgPSAxLDE1MCBFQkVUICA9IDEgRVRIICAgICAgIFtibG9ja3M6IHMrNzU2MDEgLT4gZW5kYmxvY2tdCiAgICAgIGlmIChibG9jay5udW1iZXIgPj0gZnVuZGluZ1N0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyIDw9IGZ1bmRpbmdTdGFydEJsb2NrKzM2MDApIHsgLy8gRmlyc3QgRGF5IEJvbnVzICAgICs1MCUgPSAxLDUwMCBFQkVUICA9IDEgRVRIICBbYmxvY2tzOiBzdGFydCAtPiBzKzI0XQogICAgICAgIHRva2Vuc1BlckV0aFByaWNlPTE1MDA7CiAgICAgIH0gZWxzZSBpZiAoYmxvY2subnVtYmVyID49IGZ1bmRpbmdTdGFydEJsb2NrKzM2MDEgJiYgYmxvY2subnVtYmVyIDw9IGZ1bmRpbmdTdGFydEJsb2NrKzI1MjAwKSB7IC8vIEZpcnN0IFdlZWsgQm9udXMgICArNDAlID0gMSw0MDAgRUJFVCAgPSAxIEVUSCAgW2Jsb2NrczogcysyNSAtPiBzKzQ1XQogICAgICAgIHRva2Vuc1BlckV0aFByaWNlPTE0MDA7CiAgICAgIH0gZWxzZSBpZiAoYmxvY2subnVtYmVyID49IGZ1bmRpbmdTdGFydEJsb2NrKzI1MjAxICYmIGJsb2NrLm51bWJlciA8PSBmdW5kaW5nU3RhcnRCbG9jays1MDQwMCkgeyAvLyBTZWNvbmQgV2VlayBCb251cyAgKzMwJSA9IDEsMzAwIEVCRVQgID0gMSBFVEggIFtibG9ja3M6IHMrNDYgLT4gcys2NV0KICAgICAgICB0b2tlbnNQZXJFdGhQcmljZT0xMzAwOwogICAgICB9IGVsc2UgaWYgKGJsb2NrLm51bWJlciA+PSBmdW5kaW5nU3RhcnRCbG9jays1MDQwMSAmJiBibG9jay5udW1iZXIgPD0gZnVuZGluZ1N0YXJ0QmxvY2srNzU2MDApIHsgLy8gVGhpcmQgV2VlayBCb251cyAgICsyNSUgPSAxLDI1MCBFQkVUICA9IDEgRVRIICBbYmxvY2tzOiBzKzY2IC0+IHMrODVdCiAgICAgICAgdG9rZW5zUGVyRXRoUHJpY2U9MTI1MDsKICAgICAgfSBlbHNlIGlmIChibG9jay5udW1iZXIgPj0gZnVuZGluZ1N0YXJ0QmxvY2srNzU2MDEgJiYgYmxvY2subnVtYmVyIDw9IGZ1bmRpbmdFbmRCbG9jaykgeyAvLyBGaW5hbCBXZWVrIEJvbnVzICAgKzE1JSA9IDEsMTUwIEVCRVQgID0gMSBFVEggIFtibG9ja3M6IHMrODYgLT4gZW5kQmxvY2tdCiAgICAgICAgdG9rZW5zUGVyRXRoUHJpY2U9MTE1MDsKICAgICAgfQogICAgfQoKICAgIC8vIGRlZmF1bHQgcGF5YWJsZSBmdW5jdGlvbiB3aGVuIHNlbmRpbmcgZXRoZXIgdG8gdGhpcyBjb250cmFjdAogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgIHJlcXVpcmUobXNnLmRhdGEubGVuZ3RoID09IDApOwogICAgICBCdXlFQkVUdG9rZW5zKCk7CiAgICB9CgogICAgZnVuY3Rpb24gQnV5RUJFVHRva2VucygpIHBheWFibGUgewogICAgICAvLyAwLiBjb25kaXRpb25zIChsZW5ndGgsIGNyb3dkc2FsZSBzZXR1cCwgemVybyBjaGVjaywgZXhjZWVkIGZ1bmRpbmcgY29udHJpYiBjaGVjaywgY29udHJhY3QgdmFsaWQgY2hlY2ssIHdpdGhpbiBmdW5kaW5nIGJsb2NrIHJhbmdlIGNoZWNrLCBiYWxhbmNlIG92ZXJmbG93IGNoZWNrIGV0YykKICAgICAgcmVxdWlyZSghKG1zZy52YWx1ZSA9PSAwKQogICAgICAmJiAoaXNDcm93ZFNhbGVTZXR1cCkKICAgICAgJiYgKGJsb2NrLm51bWJlciA+PSBmdW5kaW5nU3RhcnRCbG9jaykKICAgICAgJiYgKGJsb2NrLm51bWJlciA8PSBmdW5kaW5nRW5kQmxvY2spCiAgICAgICYmICh0b2tlbnNSZW1haW5pbmcgPiAwKSk7CgogICAgICAvLyAxLiB2YXJzCiAgICAgIHVpbnQyNTYgcmV3YXJkVHJhbnNmZXJBbW91bnQgICAgPSAwOwoKICAgICAgLy8gMi4gZWZmZWN0cwogICAgICBzZXRQcmljZSgpOwogICAgICBhbW91bnRSYWlzZWRJbldlaSAgICAgICAgICAgICAgID0gc2FmZUFkZChhbW91bnRSYWlzZWRJbldlaSxtc2cudmFsdWUpOwogICAgICByZXdhcmRUcmFuc2ZlckFtb3VudCAgICAgICAgICAgID0gc2FmZURpdihzYWZlTXVsKG1zZy52YWx1ZSx0b2tlbnNQZXJFdGhQcmljZSksMTAwMDAwMDAwMDAwMDAwMDApOwoKICAgICAgLy8gMy4gaW50ZXJhY3Rpb24KICAgICAgdG9rZW5zUmVtYWluaW5nICAgICAgICAgICAgICAgICA9IHNhZmVTdWIodG9rZW5zUmVtYWluaW5nLCBzYWZlRGl2KHJld2FyZFRyYW5zZmVyQW1vdW50LDEwMCkpOyAgLy8gd2lsbCBjYXVzZSB0aHJvdyBpZiBhdHRlbXB0IHRvIHB1cmNoYXNlIG92ZXIgdGhlIHRva2VuIGxpbWl0IGluIG9uZSB0eCBvciBhdCBhbGwgb25jZSBsaW1pdCByZWFjaGVkCiAgICAgIHRva2VuUmV3YXJkLnRyYW5zZmVyKG1zZy5zZW5kZXIsIHJld2FyZFRyYW5zZmVyQW1vdW50KTsKCiAgICAgIC8vIDQuIGV2ZW50cwogICAgICBmdW5kVmFsdWVbbXNnLnNlbmRlcl0gICAgICAgICAgID0gc2FmZUFkZChmdW5kVmFsdWVbbXNnLnNlbmRlcl0sIG1zZy52YWx1ZSk7CiAgICAgIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICAgIEJ1eShtc2cuc2VuZGVyLCBtc2cudmFsdWUsIHJld2FyZFRyYW5zZmVyQW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBiZW5lZmljaWFyeU11bHRpU2lnV2l0aGRyYXcodWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgewogICAgICByZXF1aXJlKGFyZUZ1bmRzUmVsZWFzZWRUb0JlbmVmaWNpYXJ5ICYmIChhbW91bnRSYWlzZWRJbldlaSA+PSBmdW5kaW5nTWluQ2FwSW5XZWkpKTsKICAgICAgYmVuZWZpY2lhcnlXYWxsZXQudHJhbnNmZXIoX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tHb2FsUmVhY2hlZCgpIG9ubHlPd25lciByZXR1cm5zIChieXRlczMyIHJlc3BvbnNlKSB7IC8vIHJldHVybiBjcm93ZGZ1bmQgc3RhdHVzIHRvIG93bmVyIGZvciBlYWNoIHJlc3VsdCBjYXNlLCB1cGRhdGUgcHVibGljIGNvbnN0YW50CiAgICAgIC8vIHVwZGF0ZSBzdGF0ZSAmIHN0YXR1cyB2YXJpYWJsZXMKICAgICAgcmVxdWlyZSAoaXNDcm93ZFNhbGVTZXR1cCk7CiAgICAgIGlmICgoYW1vdW50UmFpc2VkSW5XZWkgPCBmdW5kaW5nTWluQ2FwSW5XZWkpICYmIChibG9jay5udW1iZXIgPD0gZnVuZGluZ0VuZEJsb2NrICYmIGJsb2NrLm51bWJlciA+PSBmdW5kaW5nU3RhcnRCbG9jaykpIHsgLy8gSUNPIGluIHByb2dyZXNzLCB1bmRlciBzb2Z0Y2FwCiAgICAgICAgYXJlRnVuZHNSZWxlYXNlZFRvQmVuZWZpY2lhcnkgPSBmYWxzZTsKICAgICAgICBpc0Nyb3dkU2FsZUNsb3NlZCA9IGZhbHNlOwogICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiSW4gcHJvZ3Jlc3MgKEV0aCA8IFNvZnRjYXApIjsKICAgICAgICByZXR1cm4gIkluIHByb2dyZXNzIChFdGggPCBTb2Z0Y2FwKSI7CiAgICAgIH0gZWxzZSBpZiAoKGFtb3VudFJhaXNlZEluV2VpIDwgZnVuZGluZ01pbkNhcEluV2VpKSAmJiAoYmxvY2subnVtYmVyIDwgZnVuZGluZ1N0YXJ0QmxvY2spKSB7IC8vIElDTyBoYXMgbm90IHN0YXJ0ZWQKICAgICAgICBhcmVGdW5kc1JlbGVhc2VkVG9CZW5lZmljaWFyeSA9IGZhbHNlOwogICAgICAgIGlzQ3Jvd2RTYWxlQ2xvc2VkID0gZmFsc2U7CiAgICAgICAgQ3VycmVudFN0YXR1cyA9ICJDcm93ZHNhbGUgaXMgc2V0dXAiOwogICAgICAgIHJldHVybiAiQ3Jvd2RzYWxlIGlzIHNldHVwIjsKICAgICAgfSBlbHNlIGlmICgoYW1vdW50UmFpc2VkSW5XZWkgPCBmdW5kaW5nTWluQ2FwSW5XZWkpICYmIChibG9jay5udW1iZXIgPiBmdW5kaW5nRW5kQmxvY2spKSB7IC8vIElDTyBlbmRlZCwgdW5kZXIgc29mdGNhcAogICAgICAgIGFyZUZ1bmRzUmVsZWFzZWRUb0JlbmVmaWNpYXJ5ID0gZmFsc2U7CiAgICAgICAgaXNDcm93ZFNhbGVDbG9zZWQgPSB0cnVlOwogICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiVW5zdWNjZXNzZnVsIChFdGggPCBTb2Z0Y2FwKSI7CiAgICAgICAgcmV0dXJuICJVbnN1Y2Nlc3NmdWwgKEV0aCA8IFNvZnRjYXApIjsKICAgICAgfSBlbHNlIGlmICgoYW1vdW50UmFpc2VkSW5XZWkgPj0gZnVuZGluZ01pbkNhcEluV2VpKSAmJiAodG9rZW5zUmVtYWluaW5nID09IDApKSB7IC8vIElDTyBlbmRlZCwgYWxsIHRva2VucyBnb25lCiAgICAgICAgICBhcmVGdW5kc1JlbGVhc2VkVG9CZW5lZmljaWFyeSA9IHRydWU7CiAgICAgICAgICBpc0Nyb3dkU2FsZUNsb3NlZCA9IHRydWU7CiAgICAgICAgICBDdXJyZW50U3RhdHVzID0gIlN1Y2Nlc3NmdWwgKEVCRVQgPj0gSGFyZGNhcCkhIjsKICAgICAgICAgIHJldHVybiAiU3VjY2Vzc2Z1bCAoRUJFVCA+PSBIYXJkY2FwKSEiOwogICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWRJbldlaSA+PSBmdW5kaW5nTWluQ2FwSW5XZWkpICYmIChibG9jay5udW1iZXIgPiBmdW5kaW5nRW5kQmxvY2spICYmICh0b2tlbnNSZW1haW5pbmcgPiAwKSkgeyAvLyBJQ08gZW5kZWQsIG92ZXIgc29mdGNhcCEKICAgICAgICAgIGFyZUZ1bmRzUmVsZWFzZWRUb0JlbmVmaWNpYXJ5ID0gdHJ1ZTsKICAgICAgICAgIGlzQ3Jvd2RTYWxlQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiU3VjY2Vzc2Z1bCAoRXRoID49IFNvZnRjYXApISI7CiAgICAgICAgICByZXR1cm4gIlN1Y2Nlc3NmdWwgKEV0aCA+PSBTb2Z0Y2FwKSEiOwogICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWRJbldlaSA+PSBmdW5kaW5nTWluQ2FwSW5XZWkpICYmICh0b2tlbnNSZW1haW5pbmcgPiAwKSAmJiAoYmxvY2subnVtYmVyIDw9IGZ1bmRpbmdFbmRCbG9jaykpIHsgLy8gSUNPIGluIHByb2dyZXNzLCBvdmVyIHNvZnRjYXAhCiAgICAgICAgYXJlRnVuZHNSZWxlYXNlZFRvQmVuZWZpY2lhcnkgPSB0cnVlOwogICAgICAgIGlzQ3Jvd2RTYWxlQ2xvc2VkID0gZmFsc2U7CiAgICAgICAgQ3VycmVudFN0YXR1cyA9ICJJbiBwcm9ncmVzcyAoRXRoID49IFNvZnRjYXApISI7CiAgICAgICAgcmV0dXJuICJJbiBwcm9ncmVzcyAoRXRoID49IFNvZnRjYXApISI7CiAgICAgIH0KICAgICAgc2V0UHJpY2UoKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWZ1bmQoKSB7IC8vIGFueSBjb250cmlidXRvciBjYW4gY2FsbCB0aGlzIHRvIGhhdmUgdGhlaXIgRXRoIHJldHVybmVkLiB1c2VyJ3MgcHVyY2hhc2VkIEVCRVQgdG9rZW5zIGFyZSBidXJuZWQgcHJpb3IgcmVmdW5kIG9mIEV0aC4KICAgICAgLy9yZXF1aXJlIG1pbkNhcCBub3QgcmVhY2hlZAogICAgICByZXF1aXJlICgoYW1vdW50UmFpc2VkSW5XZWkgPCBmdW5kaW5nTWluQ2FwSW5XZWkpCiAgICAgICYmIChpc0Nyb3dkU2FsZUNsb3NlZCkKICAgICAgJiYgKGJsb2NrLm51bWJlciA+IGZ1bmRpbmdFbmRCbG9jaykKICAgICAgJiYgKGZ1bmRWYWx1ZVttc2cuc2VuZGVyXSA+IDApKTsKCiAgICAgIC8vYnVybiB1c2VyJ3MgdG9rZW4gRUJFVCB0b2tlbiBiYWxhbmNlLCByZWZ1bmQgRXRoIHNlbnQKICAgICAgdWludDI1NiBldGhSZWZ1bmQgPSBmdW5kVmFsdWVbbXNnLnNlbmRlcl07CiAgICAgIGJhbGFuY2VzQXJyYXlbbXNnLnNlbmRlcl0gPSAwOwogICAgICBmdW5kVmFsdWVbbXNnLnNlbmRlcl0gPSAwOwogICAgICBCdXJuKG1zZy5zZW5kZXIsIGV0aFJlZnVuZCk7CgogICAgICAvL3NlbmQgRXRoIGJhY2ssIGJ1cm4gdG9rZW5zCiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZXRoUmVmdW5kKTsKICAgICAgUmVmdW5kKG1zZy5zZW5kZXIsIGV0aFJlZnVuZCk7CiAgICB9Cn0='.
	

]
