Class {
	#name : #SRTaf12b1b76202fdfd9e584e2e4e230250e8eb8494,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTaf12b1b76202fdfd9e584e2e4e230250e8eb8494 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuNjsKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBPd25lZCB7CgogICAgLy8gVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgdGhhdCBpcyB0aGUgY3VycmVudCBvd25lcgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgLy8gVGhlIHB1Ymxpc2VyIGlzIHRoZSBpbml0YWwgb3duZXIKICAgIGZ1bmN0aW9uIE93bmVkKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvKioKICAgICAqIFJlc3RyaWN0ZWQgYWNjZXNzIHRvIHRoZSBjdXJyZW50IG93bmVyCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZmVyIG93bmVyc2hpcCB0byBgX25ld093bmVyYAogICAgICoKICAgICAqIEBwYXJhbSBfbmV3T3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgdGhhdCB3aWxsIGJlY29tZSB0aGUgbmV3IG93bmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgewogICAgICAgIG93bmVyID0gX25ld093bmVyOwogICAgfQp9CgovLyBBYnN0cmFjdCBjb250cmFjdCBmb3IgdGhlIGZ1bGwgRVJDIDIwIFRva2VuIHN0YW5kYXJkCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMApjb250cmFjdCBUb2tlbiB7CiAgICAvKiBUaGlzIGlzIGEgc2xpZ2h0IGNoYW5nZSB0byB0aGUgRVJDMjAgYmFzZSBzdGFuZGFyZC4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgaXMgcmVwbGFjZWQgd2l0aDoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgVGhpcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgYSBnZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSB0b3RhbFN1cHBseS4KICAgIFRoaXMgaXMgbW92ZWQgdG8gdGhlIGJhc2UgY29udHJhY3Qgc2luY2UgcHVibGljIGdldHRlciBmdW5jdGlvbnMgYXJlIG5vdAogICAgY3VycmVudGx5IHJlY29nbmlzZWQgYXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIG1hdGNoaW5nIGFic3RyYWN0CiAgICBmdW5jdGlvbiBieSB0aGUgY29tcGlsZXIuCiAgICAqLwogICAgLy8vIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBgX2Zyb21gCiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBSSUNIIHRva2VuCiAqCiAqIEltcGxlbWVudHMgRVJDIDIwIFRva2VuIHN0YW5kYXJkOiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAgd2l0aCB0aGUgYWRkaXRpb24KICogb2Ygb3duZXJzaGlwLCBhIGxvY2sgYW5kIGlzc3VpbmcuCiAqCiAqICNjcmVhdGVkIDA1LzAzLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IFJJQ0hUb2tlbiBpcyBPd25lZCwgVG9rZW4gewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIC8vIEV0aGVyZXVtIHRva2VuIHN0YW5kYWFyZAogICAgc3RyaW5nIHB1YmxpYyBzdGFuZGFyZCA9ICJUb2tlbiAwLjIiOwoKICAgIC8vIEZ1bGwgbmFtZQogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIlJJQ0ggdG9rZW4iOwoKICAgIC8vIFN5bWJvbAogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiUkNIIjsKCiAgICAvLyBObyBkZWNpbWFsIHBvaW50cwogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gODsKCiAgICAvLyBUb2tlbiBzdGFydHMgaWYgdGhlIGxvY2tlZCBzdGF0ZSByZXN0cmljdGluZyB0cmFuc2ZlcnMKICAgIGJvb2wgcHVibGljIGxvY2tlZDsKCiAgICB1aW50MjU2IHB1YmxpYyBjcm93ZHNhbGVTdGFydDsgLy8gUmVmZXJlbmNlIHRvIHRpbWUgb2YgZmlyc3QgY3Jvd2Qgc2FsZQogICAgdWludDI1NiBwdWJsaWMgaWNvUGVyaW9kID0gMTAgZGF5czsKICAgIHVpbnQyNTYgcHVibGljIG5vSWNvUGVyaW9kID0gMTAgZGF5czsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSkgYmFsYW5jZXNQZXJJY29QZXJpb2Q7CgogICAgdWludDI1NiBwdWJsaWMgYnVyblBlcmNlbnRhZ2VEZWZhdWx0ID0gMTsgLy8gMC4wMSUKICAgIHVpbnQyNTYgcHVibGljIGJ1cm5QZXJjZW50YWdlMTBtID0gNTsgLy8gMC4wNSUKICAgIHVpbnQyNTYgcHVibGljIGJ1cm5QZXJjZW50YWdlMTAwbSA9IDUwOyAvLyAwLjUlCiAgICB1aW50MjU2IHB1YmxpYyBidXJuUGVyY2VudGFnZTEwMDBtID0gMTAwOyAvLyAxJQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgLyoqCiAgICAgKiBHZXQgYnVybmluZyBsaW5lLiBBbGwgaW52ZXN0b3JzIHRoYXQgb3duIGxlc3MgdGhhbiBidXJuaW5nIGxpbmUKICAgICAqIHdpbGwgbG9zZSBzb21lIHRva2VucyBpZiB0aGV5IGRvbid0IGludmVzdCBlYWNoIHJvdW5kIDIwJSBtb3JlIHRva2VucwogICAgICoKICAgICAqIEByZXR1cm4gYnVybkxpbmUKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0QnVybkxpbmUoKSByZXR1cm5zICh1aW50MjU2IGJ1cm5MaW5lKSB7CiAgICAgICAgaWYgKHRvdGFsU3VwcGx5IDwgMTAqKjcgKiAxMCoqOCkgewogICAgICAgICAgICByZXR1cm4gdG90YWxTdXBwbHkgKiBidXJuUGVyY2VudGFnZURlZmF1bHQgLyAxMDAwMDsKICAgICAgICB9CgogICAgICAgIGlmICh0b3RhbFN1cHBseSA8IDEwKio4ICogMTAqKjgpIHsKICAgICAgICAgICAgcmV0dXJuIHRvdGFsU3VwcGx5ICogYnVyblBlcmNlbnRhZ2UxMG0gLyAxMDAwMDsKICAgICAgICB9CgogICAgICAgIGlmICh0b3RhbFN1cHBseSA8IDEwKio5ICogMTAqKjgpIHsKICAgICAgICAgICAgcmV0dXJuIHRvdGFsU3VwcGx5ICogYnVyblBlcmNlbnRhZ2UxMDBtIC8gMTAwMDA7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdG90YWxTdXBwbHkgKiBidXJuUGVyY2VudGFnZTEwMDBtIC8gMTAwMDA7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gSUNPIG51bWJlciAoUHJlSWNvIGhhcyBpbmRleCAwKQogICAgICoKICAgICAqIEByZXR1cm4gSUNPIG51bWJlcgogICAgICovCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50SWNvTnVtYmVyKCkgcmV0dXJucyAodWludDI1NiBpY29OdW1iZXIpIHsKICAgICAgICB1aW50MjU2IHRpbWVCZWhpbmQgPSBub3cgLSBjcm93ZHNhbGVTdGFydDsKCiAgICAgICAgaWYgKG5vdyA8IGNyb3dkc2FsZVN0YXJ0KSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIDEgKyAoKHRpbWVCZWhpbmQgLSAodGltZUJlaGluZCAlIChpY29QZXJpb2QgKyBub0ljb1BlcmlvZCkpKSAvIChpY29QZXJpb2QgKyBub0ljb1BlcmlvZCkpOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IGJhbGFuY2Ugb2YgYF9vd25lcmAKICAgICAqCiAgICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgICAqIEByZXR1cm4gVGhlIGJhbGFuY2UKICAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAvKioKICAgICAqIFN0YXJ0IG9mIHRoZSBjcm93ZCBzYWxlIGNhbiBiZSBzZXQgb25seSBvbmNlCiAgICAgKgogICAgICogQHBhcmFtIF9zdGFydCBzdGFydCBvZiB0aGUgY3Jvd2Qgc2FsZQogICAgICovCiAgICBmdW5jdGlvbiBzZXRDcm93ZFNhbGVTdGFydCh1aW50MjU2IF9zdGFydCkgb25seU93bmVyIHsKICAgICAgICBpZiAoY3Jvd2RzYWxlU3RhcnQgPiAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGNyb3dkc2FsZVN0YXJ0ID0gX3N0YXJ0OwogICAgfQoKICAgIC8qKgogICAgICogU2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgICoKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgICAgICAvLyBVbmFibGUgdG8gdHJhbnNmZXIgd2hpbGUgc3RpbGwgbG9ja2VkCiAgICAgICAgaWYgKGxvY2tlZCkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaCB0b2tlbnMKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQoKICAgICAgICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgaWYgKGJhbGFuY2VzW190b10gKyBfdmFsdWUgPCBiYWxhbmNlc1tfdG9dKSAgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIC8vIFRyYW5zZmVyIHRva2VucwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKCiAgICAgICAgLy8gTm90aWZ5IGxpc3RuZXJzCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwoKICAgICAgICBiYWxhbmNlc1Blckljb1BlcmlvZFtfdG9dW2dldEN1cnJlbnRJY29OdW1iZXIoKV0gPSBiYWxhbmNlc1tfdG9dOwogICAgICAgIGJhbGFuY2VzUGVySWNvUGVyaW9kW21zZy5zZW5kZXJdW2dldEN1cnJlbnRJY29OdW1iZXIoKV0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgICAvLyBVbmFibGUgdG8gdHJhbnNmZXIgd2hpbGUgc3RpbGwgbG9ja2VkCiAgICAgICAgaWYgKGxvY2tlZCkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPCBfdmFsdWUpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQoKICAgICAgICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgaWYgKGJhbGFuY2VzW190b10gKyBfdmFsdWUgPCBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KCiAgICAgICAgLy8gQ2hlY2sgYWxsb3dhbmNlCiAgICAgICAgaWYgKF92YWx1ZSA+IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KCiAgICAgICAgLy8gVHJhbnNmZXIgdG9rZW5zCiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKCiAgICAgICAgLy8gVXBkYXRlIGFsbG93YW5jZQogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKCiAgICAgICAgLy8gTm90aWZ5IGxpc3RuZXJzCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKCiAgICAgICAgYmFsYW5jZXNQZXJJY29QZXJpb2RbX3RvXVtnZXRDdXJyZW50SWNvTnVtYmVyKCldID0gYmFsYW5jZXNbX3RvXTsKICAgICAgICBiYWxhbmNlc1Blckljb1BlcmlvZFtfZnJvbV1bZ2V0Q3VycmVudEljb051bWJlcigpXSA9IGJhbGFuY2VzW19mcm9tXTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogICAgICoKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgLy8gVW5hYmxlIHRvIGFwcHJvdmUgd2hpbGUgc3RpbGwgbG9ja2VkCiAgICAgICAgaWYgKGxvY2tlZCkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIC8vIFVwZGF0ZSBhbGxvd2FuY2UKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKCiAgICAgICAgLy8gTm90aWZ5IGxpc3RuZXJzCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIC8qKgogICAgICogR2V0IHRoZSBhbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyB0aGF0IGBfc3BlbmRlcmAgaXMgYWxsb3dlZCB0byBzcGVuZCBmcm9tIGBfb3duZXJgCiAgICAgKgogICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgKiBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICAvKioKICAgICAqIFN0YXJ0cyB3aXRoIGEgdG90YWwgc3VwcGx5IG9mIHplcm8gYW5kIHRoZSBjcmVhdG9yIHN0YXJ0cyB3aXRoCiAgICAgKiB6ZXJvIHRva2VucyAoanVzdCBsaWtlIGV2ZXJ5b25lIGVsc2UpCiAgICAgKi8KICAgIGZ1bmN0aW9uIFJJQ0hUb2tlbigpIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgdG90YWxTdXBwbHkgPSAwOwogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgfQoKCiAgICAvKioKICAgICAqIFVubG9ja3MgdGhlIHRva2VuIGlycmV2ZXJzaWJseSBzbyB0aGF0IHRoZSB0cmFuc2ZlcmluZyBvZiB2YWx1ZSBpcyBlbmFibGVkCiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB1bmxvY2tpbmcgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIHVubG9jaygpIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpICB7CiAgICAgICAgbG9ja2VkID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXN0cmljdGVkIGFjY2VzcyB0byB0aGUgY3VycmVudCBvd25lcgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBJc3N1ZXMgYF92YWx1ZWAgbmV3IHRva2VucyB0byBgX3JlY2lwaWVudGAKICAgICAqCiAgICAgKiBAcGFyYW0gX3JlY2lwaWVudCBUaGUgYWRkcmVzcyB0byB3aGljaCB0aGUgdG9rZW5zIHdpbGwgYmUgaXNzdWVkCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgbmV3IHRva2VucyB0byBpc3N1ZQogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gaXNzdWUoYWRkcmVzcyBfcmVjaXBpZW50LCB1aW50MjU2IF92YWx1ZSkgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgICAgICAvLyBDcmVhdGUgdG9rZW5zCiAgICAgICAgYmFsYW5jZXNbX3JlY2lwaWVudF0gKz0gX3ZhbHVlOwogICAgICAgIHRvdGFsU3VwcGx5ICs9IF92YWx1ZTsKCiAgICAgICAgYmFsYW5jZXNQZXJJY29QZXJpb2RbX3JlY2lwaWVudF1bZ2V0Q3VycmVudEljb051bWJlcigpXSA9IGJhbGFuY2VzW19yZWNpcGllbnRdOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrIGlmIGludmVzdG9yIGhhcyBpbnZlc3RlZCBlbm91Z2ggdG8gYXZvaWQgYnVybmluZwogICAgICoKICAgICAqIEBwYXJhbSBfaW52ZXN0b3IgSW52ZXN0b3IKICAgICAqIEByZXR1cm4gV2hldGhlciBpbnZlc3RvciBoYXMgaW52ZXN0ZWQgZW5vdWdoIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBpc0luY3JlYXNlZEVub3VnaChhZGRyZXNzIF9pbnZlc3RvcikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdWludDI1NiBjdXJyZW50SWNvTnVtYmVyID0gZ2V0Q3VycmVudEljb051bWJlcigpOwoKICAgICAgICBpZiAoY3VycmVudEljb051bWJlciAtIDIgPCAwKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgdWludDI1NiBjdXJyZW50QmFsYW5jZSA9IGJhbGFuY2VzW19pbnZlc3Rvcl07CiAgICAgICAgdWludDI1NiBpY29zQmVmb3JlID0gYmFsYW5jZXNQZXJJY29QZXJpb2RbX2ludmVzdG9yXVtjdXJyZW50SWNvTnVtYmVyIC0gMl07CgogICAgICAgIGlmIChpY29zQmVmb3JlID09IDApIHsKICAgICAgICAgICAgZm9yKHVpbnQgaSA9IGN1cnJlbnRJY29OdW1iZXI7IGkgPj0gMjsgaS0tKSB7CiAgICAgICAgICAgICAgICBpY29zQmVmb3JlID0gYmFsYW5jZXNQZXJJY29QZXJpb2RbX2ludmVzdG9yXVtpLTJdOwoKICAgICAgICAgICAgICAgIGlmIChpY29zQmVmb3JlICE9IDApIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGN1cnJlbnRCYWxhbmNlIDwgaWNvc0JlZm9yZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAoY3VycmVudEJhbGFuY2UgLSBpY29zQmVmb3JlID4gaWNvc0JlZm9yZSAqIDEyIC8gMTApIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBGdW5jdGlvbiB0aGF0IGV2ZXJ5b25lIGNhbiBjYWxsIGFuZCBidXJuIGZvciBvdGhlciB0b2tlbnMgaWYgdGhleSBjYW4KICAgICAqIGJlIGJ1cm5lZC4gSW4gcmV0dXJuLCAxMCUgb2YgYnVybmVkIHRva2VucyBnbyB0byBleGVjdXRvciBvZiBmdW5jdGlvbgogICAgICoKICAgICAqIEBwYXJhbSBfaW52ZXN0b3IgQWRkcmVzcyBvZiBpbnZlc3RvciB3aGljaCB0b2tlbnMgYXJlIHN1YmplY3Qgb2YgYnVybgogICAgICovCiAgICBmdW5jdGlvbiBidXJuKGFkZHJlc3MgX2ludmVzdG9yKSBwdWJsaWMgewoKICAgICAgICB1aW50MjU2IGJ1cm5MaW5lID0gZ2V0QnVybkxpbmUoKTsKCiAgICAgICAgaWYgKGJhbGFuY2VzW19pbnZlc3Rvcl0gPiBidXJuTGluZSB8fCBpc0luY3JlYXNlZEVub3VnaChfaW52ZXN0b3IpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHVpbnQyNTYgdG9CZUJ1cm5lZCA9IGJ1cm5MaW5lIC0gYmFsYW5jZXNbX2ludmVzdG9yXTsKICAgICAgICBpZiAodG9CZUJ1cm5lZCA+IGJhbGFuY2VzW19pbnZlc3Rvcl0pIHsKICAgICAgICAgICAgdG9CZUJ1cm5lZCA9IGJhbGFuY2VzW19pbnZlc3Rvcl07CiAgICAgICAgfQoKICAgICAgICAvLyAxMCUgZm9yIGV4ZWN1dG9yCiAgICAgICAgdWludDI1NiBleGVjdXRvclJld2FyZCA9IHRvQmVCdXJuZWQgLyAxMDsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQoZXhlY3V0b3JSZXdhcmQpOwogICAgICAgIGJhbGFuY2VzW19pbnZlc3Rvcl0gPSBiYWxhbmNlc1tfaW52ZXN0b3JdLnN1Yih0b0JlQnVybmVkKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1Yih0b0JlQnVybmVkIC0gZXhlY3V0b3JSZXdhcmQpOwogICAgICAgIEJ1cm4oX2ludmVzdG9yLCB0b0JlQnVybmVkKTsKICAgIH0KCiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQgaW5kZXhlZCB2YWx1ZSk7CgogICAgLyoqCiAgICAgKiBQcmV2ZW50cyBhY2NpZGVudGFsIHNlbmRpbmcgb2YgZXRoZXIKICAgICAqLwogICAgZnVuY3Rpb24gKCkgewogICAgICAgIHRocm93OwogICAgfQp9'.
	

]
