Class {
	#name : #SRTb0a00896f34655edff6c8d915fb342194c4a6d48,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb0a00896f34655edff6c8d915fb342194c4a6d48 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7Cgpjb250cmFjdCBEU01hdGggewogICAgZnVuY3Rpb24gYWRkKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHJlcXVpcmUoKHogPSB4ICsgeSkgPj0geCk7CiAgICB9CiAgICBmdW5jdGlvbiBzdWIodWludCB4LCB1aW50IHkpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCB6KSB7CiAgICAgICAgcmVxdWlyZSgoeiA9IHggLSB5KSA8PSB4KTsKICAgIH0KICAgIGZ1bmN0aW9uIG11bCh1aW50IHgsIHVpbnQgeSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IHopIHsKICAgICAgICByZXF1aXJlKHkgPT0gMCB8fCAoeiA9IHggKiB5KSAvIHkgPT0geCk7CiAgICB9CgogICAgZnVuY3Rpb24gbWluKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHJldHVybiB4IDw9IHkgPyB4IDogeTsKICAgIH0KICAgIGZ1bmN0aW9uIG1heCh1aW50IHgsIHVpbnQgeSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IHopIHsKICAgICAgICByZXR1cm4geCA+PSB5ID8geCA6IHk7CiAgICB9CiAgICBmdW5jdGlvbiBpbWluKGludCB4LCBpbnQgeSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zIChpbnQgeikgewogICAgICAgIHJldHVybiB4IDw9IHkgPyB4IDogeTsKICAgIH0KICAgIGZ1bmN0aW9uIGltYXgoaW50IHgsIGludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKGludCB6KSB7CiAgICAgICAgcmV0dXJuIHggPj0geSA/IHggOiB5OwogICAgfQoKICAgIHVpbnQgY29uc3RhbnQgV0FEID0gMTAgKiogMTg7CiAgICB1aW50IGNvbnN0YW50IFJBWSA9IDEwICoqIDI3OwoKICAgIGZ1bmN0aW9uIHdtdWwodWludCB4LCB1aW50IHkpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCB6KSB7CiAgICAgICAgeiA9IGFkZChtdWwoeCwgeSksIFdBRCAvIDIpIC8gV0FEOwogICAgfQogICAgZnVuY3Rpb24gcm11bCh1aW50IHgsIHVpbnQgeSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IHopIHsKICAgICAgICB6ID0gYWRkKG11bCh4LCB5KSwgUkFZIC8gMikgLyBSQVk7CiAgICB9CiAgICBmdW5jdGlvbiB3ZGl2KHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHogPSBhZGQobXVsKHgsIFdBRCksIHkgLyAyKSAvIHk7CiAgICB9CiAgICBmdW5jdGlvbiByZGl2KHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHogPSBhZGQobXVsKHgsIFJBWSksIHkgLyAyKSAvIHk7CiAgICB9CgogICAgLy8gVGhpcyBmYW1vdXMgYWxnb3JpdGhtIGlzIGNhbGxlZCAiZXhwb25lbnRpYXRpb24gYnkgc3F1YXJpbmciCiAgICAvLyBhbmQgY2FsY3VsYXRlcyB4Xm4gd2l0aCB4IGFzIGZpeGVkLXBvaW50IGFuZCBuIGFzIHJlZ3VsYXIgdW5zaWduZWQuCiAgICAvLwogICAgLy8gSXQncyBPKGxvZyBuKSwgaW5zdGVhZCBvZiBPKG4pIGZvciBuYWl2ZSByZXBlYXRlZCBtdWx0aXBsaWNhdGlvbi4KICAgIC8vCiAgICAvLyBUaGVzZSBmYWN0cyBhcmUgd2h5IGl0IHdvcmtzOgogICAgLy8KICAgIC8vICBJZiBuIGlzIGV2ZW4sIHRoZW4geF5uID0gKHheMileKG4vMikuCiAgICAvLyAgSWYgbiBpcyBvZGQsICB0aGVuIHhebiA9IHggKiB4XihuLTEpLAogICAgLy8gICBhbmQgYXBwbHlpbmcgdGhlIGVxdWF0aW9uIGZvciBldmVuIHggZ2l2ZXMKICAgIC8vICAgIHhebiA9IHggKiAoeF4yKV4oKG4tMSkgLyAyKS4KICAgIC8vCiAgICAvLyAgQWxzbywgRVZNIGRpdmlzaW9uIGlzIGZsb29yaW5nIGFuZAogICAgLy8gICAgZmxvb3JbKG4tMSkgLyAyXSA9IGZsb29yW24gLyAyXS4KICAgIC8vCiAgICBmdW5jdGlvbiBycG93KHVpbnQgeCwgdWludCBuKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHogPSBuICUgMiAhPSAwID8geCA6IFJBWTsKCiAgICAgICAgZm9yIChuIC89IDI7IG4gIT0gMDsgbiAvPSAyKSB7CiAgICAgICAgICAgIHggPSBybXVsKHgsIHgpOwoKICAgICAgICAgICAgaWYgKG4gJSAyICE9IDApIHsKICAgICAgICAgICAgICAgIHogPSBybXVsKHosIHgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cgpjb250cmFjdCBPdGNJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gc2VsbEFsbEFtb3VudChhZGRyZXNzLCB1aW50LCBhZGRyZXNzLCB1aW50KSBwdWJsaWMgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiBidXlBbGxBbW91bnQoYWRkcmVzcywgdWludCwgYWRkcmVzcywgdWludCkgcHVibGljIHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gZ2V0UGF5QW1vdW50KGFkZHJlc3MsIGFkZHJlc3MsIHVpbnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKfQoKY29udHJhY3QgVG9rZW5JbnRlcmZhY2UgewogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MpIHB1YmxpYyByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzLCBhZGRyZXNzKSBwdWJsaWMgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MsIHVpbnQpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MsdWludCkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MsIGFkZHJlc3MsIHVpbnQpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGRlcG9zaXQoKSBwdWJsaWMgcGF5YWJsZTsKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KHVpbnQpIHB1YmxpYzsKfQoKY29udHJhY3QgT2FzaXNEaXJlY3RQcm94eSBpcyBEU01hdGggewogICAgZnVuY3Rpb24gd2l0aGRyYXdBbmRTZW5kKFRva2VuSW50ZXJmYWNlIHdldGhUb2tlbiwgdWludCB3ZXRoQW10KSBpbnRlcm5hbCB7CiAgICAgICAgd2V0aFRva2VuLndpdGhkcmF3KHdldGhBbXQpOwogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlci5jYWxsLnZhbHVlKHdldGhBbXQpKCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbGxBbGxBbW91bnQoT3RjSW50ZXJmYWNlIG90YywgVG9rZW5JbnRlcmZhY2UgcGF5VG9rZW4sIHVpbnQgcGF5QW10LCBUb2tlbkludGVyZmFjZSBidXlUb2tlbiwgdWludCBtaW5CdXlBbXQpIHB1YmxpYyByZXR1cm5zICh1aW50IGJ1eUFtdCkgewogICAgICAgIHJlcXVpcmUocGF5VG9rZW4udHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIHRoaXMsIHBheUFtdCkpOwogICAgICAgIGlmIChwYXlUb2tlbi5hbGxvd2FuY2UodGhpcywgb3RjKSA8IHBheUFtdCkgewogICAgICAgICAgICBwYXlUb2tlbi5hcHByb3ZlKG90YywgdWludCgtMSkpOwogICAgICAgIH0KICAgICAgICBidXlBbXQgPSBvdGMuc2VsbEFsbEFtb3VudChwYXlUb2tlbiwgcGF5QW10LCBidXlUb2tlbiwgbWluQnV5QW10KTsKICAgICAgICByZXF1aXJlKGJ1eVRva2VuLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGJ1eUFtdCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbGxBbGxBbW91bnRQYXlFdGgoT3RjSW50ZXJmYWNlIG90YywgVG9rZW5JbnRlcmZhY2Ugd2V0aFRva2VuLCBUb2tlbkludGVyZmFjZSBidXlUb2tlbiwgdWludCBtaW5CdXlBbXQpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKHVpbnQgYnV5QW10KSB7CiAgICAgICAgd2V0aFRva2VuLmRlcG9zaXQudmFsdWUobXNnLnZhbHVlKSgpOwogICAgICAgIGlmICh3ZXRoVG9rZW4uYWxsb3dhbmNlKHRoaXMsIG90YykgPCBtc2cudmFsdWUpIHsKICAgICAgICAgICAgd2V0aFRva2VuLmFwcHJvdmUob3RjLCB1aW50KC0xKSk7CiAgICAgICAgfQogICAgICAgIGJ1eUFtdCA9IG90Yy5zZWxsQWxsQW1vdW50KHdldGhUb2tlbiwgbXNnLnZhbHVlLCBidXlUb2tlbiwgbWluQnV5QW10KTsKICAgICAgICByZXF1aXJlKGJ1eVRva2VuLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGJ1eUFtdCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbGxBbGxBbW91bnRCdXlFdGgoT3RjSW50ZXJmYWNlIG90YywgVG9rZW5JbnRlcmZhY2UgcGF5VG9rZW4sIHVpbnQgcGF5QW10LCBUb2tlbkludGVyZmFjZSB3ZXRoVG9rZW4sIHVpbnQgbWluQnV5QW10KSBwdWJsaWMgcmV0dXJucyAodWludCB3ZXRoQW10KSB7CiAgICAgICAgcmVxdWlyZShwYXlUb2tlbi50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgcGF5QW10KSk7CiAgICAgICAgaWYgKHBheVRva2VuLmFsbG93YW5jZSh0aGlzLCBvdGMpIDwgcGF5QW10KSB7CiAgICAgICAgICAgIHBheVRva2VuLmFwcHJvdmUob3RjLCB1aW50KC0xKSk7CiAgICAgICAgfQogICAgICAgIHdldGhBbXQgPSBvdGMuc2VsbEFsbEFtb3VudChwYXlUb2tlbiwgcGF5QW10LCB3ZXRoVG9rZW4sIG1pbkJ1eUFtdCk7CiAgICAgICAgd2l0aGRyYXdBbmRTZW5kKHdldGhUb2tlbiwgd2V0aEFtdCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5QWxsQW1vdW50KE90Y0ludGVyZmFjZSBvdGMsIFRva2VuSW50ZXJmYWNlIGJ1eVRva2VuLCB1aW50IGJ1eUFtdCwgVG9rZW5JbnRlcmZhY2UgcGF5VG9rZW4sIHVpbnQgbWF4UGF5QW10KSBwdWJsaWMgcmV0dXJucyAodWludCBwYXlBbXQpIHsKICAgICAgICB1aW50IHBheUFtdE5vdyA9IG90Yy5nZXRQYXlBbW91bnQocGF5VG9rZW4sIGJ1eVRva2VuLCBidXlBbXQpOwogICAgICAgIHJlcXVpcmUocGF5QW10Tm93IDw9IG1heFBheUFtdCk7CiAgICAgICAgcmVxdWlyZShwYXlUb2tlbi50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgcGF5QW10Tm93KSk7CiAgICAgICAgaWYgKHBheVRva2VuLmFsbG93YW5jZSh0aGlzLCBvdGMpIDwgcGF5QW10Tm93KSB7CiAgICAgICAgICAgIHBheVRva2VuLmFwcHJvdmUob3RjLCB1aW50KC0xKSk7CiAgICAgICAgfQogICAgICAgIHBheUFtdCA9IG90Yy5idXlBbGxBbW91bnQoYnV5VG9rZW4sIGJ1eUFtdCwgcGF5VG9rZW4sIHBheUFtdE5vdyk7CiAgICAgICAgcmVxdWlyZShidXlUb2tlbi50cmFuc2Zlcihtc2cuc2VuZGVyLCBtaW4oYnV5QW10LCBidXlUb2tlbi5iYWxhbmNlT2YodGhpcykpKSk7IC8vIFRvIGF2b2lkIHJvdW5kaW5nIGlzc3VlcyB3ZSBjaGVjayB0aGUgbWluaW11bSB2YWx1ZQogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eUFsbEFtb3VudFBheUV0aChPdGNJbnRlcmZhY2Ugb3RjLCBUb2tlbkludGVyZmFjZSBidXlUb2tlbiwgdWludCBidXlBbXQsIFRva2VuSW50ZXJmYWNlIHdldGhUb2tlbikgcHVibGljIHBheWFibGUgcmV0dXJucyAodWludCB3ZXRoQW10KSB7CiAgICAgICAgLy8gSW4gdGhpcyBjYXNlIHVzZXIgbmVlZHMgdG8gc2VuZCBtb3JlIEVUSCB0aGFuIGEgZXN0aW1hdGVkIHZhbHVlLCB0aGVuIGNvbnRyYWN0IHdpbGwgc2VuZCBiYWNrIHRoZSByZXN0CiAgICAgICAgd2V0aFRva2VuLmRlcG9zaXQudmFsdWUobXNnLnZhbHVlKSgpOwogICAgICAgIGlmICh3ZXRoVG9rZW4uYWxsb3dhbmNlKHRoaXMsIG90YykgPCBtc2cudmFsdWUpIHsKICAgICAgICAgICAgd2V0aFRva2VuLmFwcHJvdmUob3RjLCB1aW50KC0xKSk7CiAgICAgICAgfQogICAgICAgIHdldGhBbXQgPSBvdGMuYnV5QWxsQW1vdW50KGJ1eVRva2VuLCBidXlBbXQsIHdldGhUb2tlbiwgbXNnLnZhbHVlKTsKICAgICAgICByZXF1aXJlKGJ1eVRva2VuLnRyYW5zZmVyKG1zZy5zZW5kZXIsIG1pbihidXlBbXQsIGJ1eVRva2VuLmJhbGFuY2VPZih0aGlzKSkpKTsgLy8gVG8gYXZvaWQgcm91bmRpbmcgaXNzdWVzIHdlIGNoZWNrIHRoZSBtaW5pbXVtIHZhbHVlCiAgICAgICAgd2l0aGRyYXdBbmRTZW5kKHdldGhUb2tlbiwgc3ViKG1zZy52YWx1ZSwgd2V0aEFtdCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eUFsbEFtb3VudEJ1eUV0aChPdGNJbnRlcmZhY2Ugb3RjLCBUb2tlbkludGVyZmFjZSB3ZXRoVG9rZW4sIHVpbnQgd2V0aEFtdCwgVG9rZW5JbnRlcmZhY2UgcGF5VG9rZW4sIHVpbnQgbWF4UGF5QW10KSBwdWJsaWMgcmV0dXJucyAodWludCBwYXlBbXQpIHsKICAgICAgICB1aW50IHBheUFtdE5vdyA9IG90Yy5nZXRQYXlBbW91bnQocGF5VG9rZW4sIHdldGhUb2tlbiwgd2V0aEFtdCk7CiAgICAgICAgcmVxdWlyZShwYXlBbXROb3cgPD0gbWF4UGF5QW10KTsKICAgICAgICByZXF1aXJlKHBheVRva2VuLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCB0aGlzLCBwYXlBbXROb3cpKTsKICAgICAgICBpZiAocGF5VG9rZW4uYWxsb3dhbmNlKHRoaXMsIG90YykgPCBwYXlBbXROb3cpIHsKICAgICAgICAgICAgcGF5VG9rZW4uYXBwcm92ZShvdGMsIHVpbnQoLTEpKTsKICAgICAgICB9CiAgICAgICAgcGF5QW10ID0gb3RjLmJ1eUFsbEFtb3VudCh3ZXRoVG9rZW4sIHdldGhBbXQsIHBheVRva2VuLCBwYXlBbXROb3cpOwogICAgICAgIHdpdGhkcmF3QW5kU2VuZCh3ZXRoVG9rZW4sIHdldGhBbXQpOwogICAgfQoKICAgIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUge30KfQoKY29udHJhY3QgRFNBdXRob3JpdHkgewogICAgZnVuY3Rpb24gY2FuQ2FsbCgKICAgICAgICBhZGRyZXNzIHNyYywgYWRkcmVzcyBkc3QsIGJ5dGVzNCBzaWcKICAgICkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IERTQXV0aEV2ZW50cyB7CiAgICBldmVudCBMb2dTZXRBdXRob3JpdHkgKGFkZHJlc3MgaW5kZXhlZCBhdXRob3JpdHkpOwogICAgZXZlbnQgTG9nU2V0T3duZXIgICAgIChhZGRyZXNzIGluZGV4ZWQgb3duZXIpOwp9Cgpjb250cmFjdCBEU0F1dGggaXMgRFNBdXRoRXZlbnRzIHsKICAgIERTQXV0aG9yaXR5ICBwdWJsaWMgIGF1dGhvcml0eTsKICAgIGFkZHJlc3MgICAgICBwdWJsaWMgIG93bmVyOwoKICAgIGZ1bmN0aW9uIERTQXV0aCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIExvZ1NldE93bmVyKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldE93bmVyKGFkZHJlc3Mgb3duZXJfKQogICAgICAgIHB1YmxpYwogICAgICAgIGF1dGgKICAgIHsKICAgICAgICBvd25lciA9IG93bmVyXzsKICAgICAgICBMb2dTZXRPd25lcihvd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0QXV0aG9yaXR5KERTQXV0aG9yaXR5IGF1dGhvcml0eV8pCiAgICAgICAgcHVibGljCiAgICAgICAgYXV0aAogICAgewogICAgICAgIGF1dGhvcml0eSA9IGF1dGhvcml0eV87CiAgICAgICAgTG9nU2V0QXV0aG9yaXR5KGF1dGhvcml0eSk7CiAgICB9CgogICAgbW9kaWZpZXIgYXV0aCB7CiAgICAgICAgcmVxdWlyZShpc0F1dGhvcml6ZWQobXNnLnNlbmRlciwgbXNnLnNpZykpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gaXNBdXRob3JpemVkKGFkZHJlc3Mgc3JjLCBieXRlczQgc2lnKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoc3JjID09IGFkZHJlc3ModGhpcykpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIGlmIChzcmMgPT0gb3duZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIGlmIChhdXRob3JpdHkgPT0gRFNBdXRob3JpdHkoMCkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBhdXRob3JpdHkuY2FuQ2FsbChzcmMsIHRoaXMsIHNpZyk7CiAgICAgICAgfQogICAgfQp9Cgpjb250cmFjdCBEU05vdGUgewogICAgZXZlbnQgTG9nTm90ZSgKICAgICAgICBieXRlczQgICBpbmRleGVkICBzaWcsCiAgICAgICAgYWRkcmVzcyAgaW5kZXhlZCAgZ3V5LAogICAgICAgIGJ5dGVzMzIgIGluZGV4ZWQgIGZvbywKICAgICAgICBieXRlczMyICBpbmRleGVkICBiYXIsCiAgICAgICAgdWludCAgICAgICAgICAgICAgd2FkLAogICAgICAgIGJ5dGVzICAgICAgICAgICAgIGZheAogICAgKSBhbm9ueW1vdXM7CgogICAgbW9kaWZpZXIgbm90ZSB7CiAgICAgICAgYnl0ZXMzMiBmb287CiAgICAgICAgYnl0ZXMzMiBiYXI7CgogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgZm9vIDo9IGNhbGxkYXRhbG9hZCg0KQogICAgICAgICAgICBiYXIgOj0gY2FsbGRhdGFsb2FkKDM2KQogICAgICAgIH0KCiAgICAgICAgTG9nTm90ZShtc2cuc2lnLCBtc2cuc2VuZGVyLCBmb28sIGJhciwgbXNnLnZhbHVlLCBtc2cuZGF0YSk7CgogICAgICAgIF87CiAgICB9Cn0KCi8vIERTUHJveHkKLy8gQWxsb3dzIGNvZGUgZXhlY3V0aW9uIHVzaW5nIGEgcGVyc2lzdGFudCBpZGVudGl0eSBUaGlzIGNhbiBiZSB2ZXJ5Ci8vIHVzZWZ1bCB0byBleGVjdXRlIGEgc2VxdWVuY2Ugb2YgYXRvbWljIGFjdGlvbnMuIFNpbmNlIHRoZSBvd25lciBvZgovLyB0aGUgcHJveHkgY2FuIGJlIGNoYW5nZWQsIHRoaXMgYWxsb3dzIGZvciBkeW5hbWljIG93bmVyc2hpcCBtb2RlbHMKLy8gaS5lLiBhIG11bHRpc2lnCmNvbnRyYWN0IERTUHJveHkgaXMgRFNBdXRoLCBEU05vdGUgewogICAgRFNQcm94eUNhY2hlIHB1YmxpYyBjYWNoZTsgIC8vIGdsb2JhbCBjYWNoZSBmb3IgY29udHJhY3RzCgogICAgZnVuY3Rpb24gRFNQcm94eShhZGRyZXNzIF9jYWNoZUFkZHIpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShzZXRDYWNoZShfY2FjaGVBZGRyKSk7CiAgICB9CgogICAgZnVuY3Rpb24oKSBwdWJsaWMgcGF5YWJsZSB7CiAgICB9CgogICAgLy8gdXNlIHRoZSBwcm94eSB0byBleGVjdXRlIGNhbGxkYXRhIF9kYXRhIG9uIGNvbnRyYWN0IF9jb2RlCiAgICBmdW5jdGlvbiBleGVjdXRlKGJ5dGVzIF9jb2RlLCBieXRlcyBfZGF0YSkKICAgICAgICBwdWJsaWMKICAgICAgICBwYXlhYmxlCiAgICAgICAgcmV0dXJucyAoYWRkcmVzcyB0YXJnZXQsIGJ5dGVzMzIgcmVzcG9uc2UpCiAgICB7CiAgICAgICAgdGFyZ2V0ID0gY2FjaGUucmVhZChfY29kZSk7CiAgICAgICAgaWYgKHRhcmdldCA9PSAweDApIHsKICAgICAgICAgICAgLy8gZGVwbG95IGNvbnRyYWN0ICYgc3RvcmUgaXRzIGFkZHJlc3MgaW4gY2FjaGUKICAgICAgICAgICAgdGFyZ2V0ID0gY2FjaGUud3JpdGUoX2NvZGUpOwogICAgICAgIH0KCiAgICAgICAgcmVzcG9uc2UgPSBleGVjdXRlKHRhcmdldCwgX2RhdGEpOwogICAgfQoKICAgIGZ1bmN0aW9uIGV4ZWN1dGUoYWRkcmVzcyBfdGFyZ2V0LCBieXRlcyBfZGF0YSkKICAgICAgICBwdWJsaWMKICAgICAgICBhdXRoCiAgICAgICAgbm90ZQogICAgICAgIHBheWFibGUKICAgICAgICByZXR1cm5zIChieXRlczMyIHJlc3BvbnNlKQogICAgewogICAgICAgIHJlcXVpcmUoX3RhcmdldCAhPSAweDApOwoKICAgICAgICAvLyBjYWxsIGNvbnRyYWN0IGluIGN1cnJlbnQgY29udGV4dAogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgbGV0IHN1Y2NlZWRlZCA6PSBkZWxlZ2F0ZWNhbGwoc3ViKGdhcywgNTAwMCksIF90YXJnZXQsIGFkZChfZGF0YSwgMHgyMCksIG1sb2FkKF9kYXRhKSwgMCwgMzIpCiAgICAgICAgICAgIHJlc3BvbnNlIDo9IG1sb2FkKDApICAgICAgLy8gbG9hZCBkZWxlZ2F0ZWNhbGwgb3V0cHV0CiAgICAgICAgICAgIHN3aXRjaCBpc3plcm8oc3VjY2VlZGVkKQogICAgICAgICAgICBjYXNlIDEgewogICAgICAgICAgICAgICAgLy8gdGhyb3cgaWYgZGVsZWdhdGVjYWxsIGZhaWxlZAogICAgICAgICAgICAgICAgcmV2ZXJ0KDAsIDApCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLy9zZXQgbmV3IGNhY2hlCiAgICBmdW5jdGlvbiBzZXRDYWNoZShhZGRyZXNzIF9jYWNoZUFkZHIpCiAgICAgICAgcHVibGljCiAgICAgICAgYXV0aAogICAgICAgIG5vdGUKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoX2NhY2hlQWRkciAhPSAweDApOyAgICAgICAgLy8gaW52YWxpZCBjYWNoZSBhZGRyZXNzCiAgICAgICAgY2FjaGUgPSBEU1Byb3h5Q2FjaGUoX2NhY2hlQWRkcik7ICAvLyBvdmVyd3JpdGUgY2FjaGUKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKLy8gRFNQcm94eUZhY3RvcnkKLy8gVGhpcyBmYWN0b3J5IGRlcGxveXMgbmV3IHByb3h5IGluc3RhbmNlcyB0aHJvdWdoIGJ1aWxkKCkKLy8gRGVwbG95ZWQgcHJveHkgYWRkcmVzc2VzIGFyZSBsb2dnZWQKY29udHJhY3QgRFNQcm94eUZhY3RvcnkgewogICAgZXZlbnQgQ3JlYXRlZChhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLCBhZGRyZXNzIHByb3h5LCBhZGRyZXNzIGNhY2hlKTsKICAgIG1hcHBpbmcoYWRkcmVzcz0+Ym9vbCkgcHVibGljIGlzUHJveHk7CiAgICBEU1Byb3h5Q2FjaGUgcHVibGljIGNhY2hlID0gbmV3IERTUHJveHlDYWNoZSgpOwoKICAgIC8vIGRlcGxveXMgYSBuZXcgcHJveHkgaW5zdGFuY2UKICAgIC8vIHNldHMgb3duZXIgb2YgcHJveHkgdG8gY2FsbGVyCiAgICBmdW5jdGlvbiBidWlsZCgpIHB1YmxpYyByZXR1cm5zIChEU1Byb3h5IHByb3h5KSB7CiAgICAgICAgcHJveHkgPSBidWlsZChtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvLyBkZXBsb3lzIGEgbmV3IHByb3h5IGluc3RhbmNlCiAgICAvLyBzZXRzIGN1c3RvbSBvd25lciBvZiBwcm94eQogICAgZnVuY3Rpb24gYnVpbGQoYWRkcmVzcyBvd25lcikgcHVibGljIHJldHVybnMgKERTUHJveHkgcHJveHkpIHsKICAgICAgICBwcm94eSA9IG5ldyBEU1Byb3h5KGNhY2hlKTsKICAgICAgICBDcmVhdGVkKG93bmVyLCBhZGRyZXNzKHByb3h5KSwgYWRkcmVzcyhjYWNoZSkpOwogICAgICAgIHByb3h5LnNldE93bmVyKG93bmVyKTsKICAgICAgICBpc1Byb3h5W3Byb3h5XSA9IHRydWU7CiAgICB9Cn0KCi8vIERTUHJveHlDYWNoZQovLyBUaGlzIGdsb2JhbCBjYWNoZSBzdG9yZXMgYWRkcmVzc2VzIG9mIGNvbnRyYWN0cyBwcmV2aW91c2x5IGRlcGxveWVkCi8vIGJ5IGEgcHJveHkuIFRoaXMgc2F2ZXMgZ2FzIGZyb20gcmVwZWF0IGRlcGxveW1lbnQgb2YgdGhlIHNhbWUKLy8gY29udHJhY3RzIGFuZCBlbGltaW5hdGVzIGJsb2NrY2hhaW4gYmxvYXQuCgovLyBCeSBkZWZhdWx0LCBhbGwgcHJveGllcyBkZXBsb3llZCBmcm9tIHRoZSBzYW1lIGZhY3Rvcnkgc3RvcmUKLy8gY29udHJhY3RzIGluIHRoZSBzYW1lIGNhY2hlLiBUaGUgY2FjaGUgYSBwcm94eSBpbnN0YW5jZSB1c2VzIGNhbiBiZQovLyBjaGFuZ2VkLiAgVGhlIGNhY2hlIHVzZXMgdGhlIHNoYTMgaGFzaCBvZiBhIGNvbnRyYWN0J3MgYnl0ZWNvZGUgdG8KLy8gbG9va3VwIHRoZSBhZGRyZXNzCmNvbnRyYWN0IERTUHJveHlDYWNoZSB7CiAgICBtYXBwaW5nKGJ5dGVzMzIgPT4gYWRkcmVzcykgY2FjaGU7CgogICAgZnVuY3Rpb24gcmVhZChieXRlcyBfY29kZSkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIGJ5dGVzMzIgaGFzaCA9IGtlY2NhazI1NihfY29kZSk7CiAgICAgICAgcmV0dXJuIGNhY2hlW2hhc2hdOwogICAgfQoKICAgIGZ1bmN0aW9uIHdyaXRlKGJ5dGVzIF9jb2RlKSBwdWJsaWMgcmV0dXJucyAoYWRkcmVzcyB0YXJnZXQpIHsKICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgIHRhcmdldCA6PSBjcmVhdGUoMCwgYWRkKF9jb2RlLCAweDIwKSwgbWxvYWQoX2NvZGUpKQogICAgICAgICAgICBzd2l0Y2ggaXN6ZXJvKGV4dGNvZGVzaXplKHRhcmdldCkpCiAgICAgICAgICAgIGNhc2UgMSB7CiAgICAgICAgICAgICAgICAvLyB0aHJvdyBpZiBjb250cmFjdCBmYWlsZWQgdG8gZGVwbG95CiAgICAgICAgICAgICAgICByZXZlcnQoMCwgMCkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBieXRlczMyIGhhc2ggPSBrZWNjYWsyNTYoX2NvZGUpOwogICAgICAgIGNhY2hlW2hhc2hdID0gdGFyZ2V0OwogICAgfQp9Cgpjb250cmFjdCBQcm94eUNyZWF0aW9uQW5kRXhlY3V0ZSBpcyBPYXNpc0RpcmVjdFByb3h5IHsKCiAgICBmdW5jdGlvbiBjcmVhdGVBbmRTZWxsQWxsQW1vdW50KERTUHJveHlGYWN0b3J5IGZhY3RvcnksIE90Y0ludGVyZmFjZSBvdGMsIFRva2VuSW50ZXJmYWNlIHBheVRva2VuLCB1aW50IHBheUFtdCwgVG9rZW5JbnRlcmZhY2UgYnV5VG9rZW4sIHVpbnQgbWluQnV5QW10KSBwdWJsaWMgcmV0dXJucyAoRFNQcm94eSBwcm94eSwgdWludCBidXlBbXQpIHsKICAgICAgICBwcm94eSA9IGZhY3RvcnkuYnVpbGQobXNnLnNlbmRlcik7CiAgICAgICAgYnV5QW10ID0gc2VsbEFsbEFtb3VudChvdGMsIHBheVRva2VuLCBwYXlBbXQsIGJ1eVRva2VuLCBtaW5CdXlBbXQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZUFuZFNlbGxBbGxBbW91bnRQYXlFdGgoRFNQcm94eUZhY3RvcnkgZmFjdG9yeSwgT3RjSW50ZXJmYWNlIG90YywgVG9rZW5JbnRlcmZhY2Ugd2V0aFRva2VuLCBUb2tlbkludGVyZmFjZSBidXlUb2tlbiwgdWludCBtaW5CdXlBbXQpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKERTUHJveHkgcHJveHksIHVpbnQgYnV5QW10KSB7CiAgICAgICAgcHJveHkgPSBmYWN0b3J5LmJ1aWxkKG1zZy5zZW5kZXIpOwogICAgICAgIGJ1eUFtdCA9IHNlbGxBbGxBbW91bnRQYXlFdGgob3RjLCB3ZXRoVG9rZW4sIGJ1eVRva2VuLCBtaW5CdXlBbXQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZUFuZFNlbGxBbGxBbW91bnRCdXlFdGgoRFNQcm94eUZhY3RvcnkgZmFjdG9yeSwgT3RjSW50ZXJmYWNlIG90YywgVG9rZW5JbnRlcmZhY2UgcGF5VG9rZW4sIHVpbnQgcGF5QW10LCBUb2tlbkludGVyZmFjZSB3ZXRoVG9rZW4sIHVpbnQgbWluQnV5QW10KSBwdWJsaWMgcmV0dXJucyAoRFNQcm94eSBwcm94eSwgdWludCB3ZXRoQW10KSB7CiAgICAgICAgcHJveHkgPSBmYWN0b3J5LmJ1aWxkKG1zZy5zZW5kZXIpOwogICAgICAgIHdldGhBbXQgPSBzZWxsQWxsQW1vdW50QnV5RXRoKG90YywgcGF5VG9rZW4sIHBheUFtdCwgd2V0aFRva2VuLCBtaW5CdXlBbXQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZUFuZEJ1eUFsbEFtb3VudChEU1Byb3h5RmFjdG9yeSBmYWN0b3J5LCBPdGNJbnRlcmZhY2Ugb3RjLCBUb2tlbkludGVyZmFjZSBidXlUb2tlbiwgdWludCBidXlBbXQsIFRva2VuSW50ZXJmYWNlIHBheVRva2VuLCB1aW50IG1heFBheUFtdCkgcHVibGljIHJldHVybnMgKERTUHJveHkgcHJveHksIHVpbnQgcGF5QW10KSB7CiAgICAgICAgcHJveHkgPSBmYWN0b3J5LmJ1aWxkKG1zZy5zZW5kZXIpOwogICAgICAgIHBheUFtdCA9IGJ1eUFsbEFtb3VudChvdGMsIGJ1eVRva2VuLCBidXlBbXQsIHBheVRva2VuLCBtYXhQYXlBbXQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZUFuZEJ1eUFsbEFtb3VudFBheUV0aChEU1Byb3h5RmFjdG9yeSBmYWN0b3J5LCBPdGNJbnRlcmZhY2Ugb3RjLCBUb2tlbkludGVyZmFjZSBidXlUb2tlbiwgdWludCBidXlBbXQsIFRva2VuSW50ZXJmYWNlIHdldGhUb2tlbikgcHVibGljIHBheWFibGUgcmV0dXJucyAoRFNQcm94eSBwcm94eSwgdWludCB3ZXRoQW10KSB7CiAgICAgICAgcHJveHkgPSBmYWN0b3J5LmJ1aWxkKG1zZy5zZW5kZXIpOwogICAgICAgIHdldGhBbXQgPSBidXlBbGxBbW91bnRQYXlFdGgob3RjLCBidXlUb2tlbiwgYnV5QW10LCB3ZXRoVG9rZW4pOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZUFuZEJ1eUFsbEFtb3VudEJ1eUV0aChEU1Byb3h5RmFjdG9yeSBmYWN0b3J5LCBPdGNJbnRlcmZhY2Ugb3RjLCBUb2tlbkludGVyZmFjZSB3ZXRoVG9rZW4sIHVpbnQgd2V0aEFtdCwgVG9rZW5JbnRlcmZhY2UgcGF5VG9rZW4sIHVpbnQgbWF4UGF5QW10KSBwdWJsaWMgcmV0dXJucyAoRFNQcm94eSBwcm94eSwgdWludCBwYXlBbXQpIHsKICAgICAgICBwcm94eSA9IGZhY3RvcnkuYnVpbGQobXNnLnNlbmRlcik7CiAgICAgICAgcGF5QW10ID0gYnV5QWxsQW1vdW50QnV5RXRoKG90Yywgd2V0aFRva2VuLCB3ZXRoQW10LCBwYXlUb2tlbiwgbWF4UGF5QW10KTsKICAgIH0KfQ=='.
	

]
