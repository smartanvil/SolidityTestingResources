Class {
	#name : #SRT4f4f0db4de903b88f2b1a2847971e231d54f8fd3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4f4f0db4de903b88f2b1a2847971e231d54f8fd3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgovKgoJQHRpdGxlIEdFRVRva2VuCiovCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CgoKICAgIGFkZHJlc3Mgb3duZXI7CgogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIF9wcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgX25ld093bmVyKTsKCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZCAoYWRkcmVzcygwKSwgb3duZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgICAgIG5vdFplcm9BZGRyZXNzKF9uZXdPd25lcikKICAgIHsKICAgICAgICBvd25lciA9IF9uZXdPd25lcjsKICAgICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChtc2cuc2VuZGVyLCBfbmV3T3duZXIpOwogICAgfQoKICAgIC8vT25seSBvd25lciBjYW4gY2FsbCBmdW5jdGlvbgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbm90WmVyb0FkZHJlc3MoYWRkcmVzcyBfYWRkcmVzcykgewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3MgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgXzsKICAgIH0KCn0KCi8qCglUcnVzdGFibGUgc2F2ZXMgdHJ1c3RlZCBhZGRyZXNzZXMKKi8KY29udHJhY3QgVHJ1c3RhYmxlIGlzIE93bmFibGUgewoKCiAgICAvL09ubHkgdHJ1c3RlZCBhZGRyZXNzZXMgYXJlIGFibGUgdG8gdHJhbnNmZXIgdG9rZW5zIGR1cmluZyB0aGUgQ3Jvd2RzYWxlCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHRydXN0ZWQ7CgogICAgZXZlbnQgQWRkVHJ1c3RlZCAoYWRkcmVzcyBpbmRleGVkIF90cnVzdGFibGUpOwogICAgZXZlbnQgUmVtb3ZlVHJ1c3RlZCAoYWRkcmVzcyBpbmRleGVkIF90cnVzdGFibGUpOwoKICAgIGZ1bmN0aW9uIFRydXN0YWJsZSgpIHsKICAgICAgICB0cnVzdGVkW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgICBBZGRUcnVzdGVkKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vQWRkIG5ldyB0cnVzdGVkIGFkZHJlc3MKICAgIGZ1bmN0aW9uIGFkZFRydXN0ZWQoYWRkcmVzcyBfYWRkcmVzcykKICAgICAgICBleHRlcm5hbAogICAgICAgIG9ubHlPd25lcgogICAgICAgIG5vdFplcm9BZGRyZXNzKF9hZGRyZXNzKQogICAgewogICAgICAgIHRydXN0ZWRbX2FkZHJlc3NdID0gdHJ1ZTsKICAgICAgICBBZGRUcnVzdGVkKF9hZGRyZXNzKTsKICAgIH0KCiAgICAvL1JlbW92ZSBhZGRyZXNzIGZyb20gYSB0cnVzdGVkIGxpc3QKICAgIGZ1bmN0aW9uIHJlbW92ZVRydXN0ZWQoYWRkcmVzcyBfYWRkcmVzcykKICAgICAgICBleHRlcm5hbAogICAgICAgIG9ubHlPd25lcgogICAgICAgIG5vdFplcm9BZGRyZXNzKF9hZGRyZXNzKQogICAgewogICAgICAgIHRydXN0ZWRbX2FkZHJlc3NdID0gZmFsc2U7CiAgICAgICAgUmVtb3ZlVHJ1c3RlZChfYWRkcmVzcyk7CiAgICB9Cgp9Cgpjb250cmFjdCBQYXVzYWJsZSBpcyBUcnVzdGFibGUgewoKCiAgICAvL1RvIGNoZWNrIGlmIFRva2VuIGlzIHBhdXNlZAogICAgYm9vbCBwdWJsaWMgcGF1c2VkOwogICAgLy9CbG9jayBudW1iZXIgb24gcGF1c2UKICAgIHVpbnQyNTYgcHVibGljIHBhdXNlQmxvY2tOdW1iZXI7CiAgICAvL0Jsb2NrIG51bWJlciBvbiByZXN1bWUKICAgIHVpbnQyNTYgcHVibGljIHJlc3VtZUJsb2NrTnVtYmVyOwoKICAgIGV2ZW50IFBhdXNlKHVpbnQyNTYgX2Jsb2NrTnVtYmVyKTsKICAgIGV2ZW50IFVucGF1c2UodWludDI1NiBfYmxvY2tOdW1iZXIpOwoKICAgIGZ1bmN0aW9uIHBhdXNlKCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgICAgICB3aGVuTm90UGF1c2VkCiAgICB7CiAgICAgICAgcGF1c2VkID0gdHJ1ZTsKICAgICAgICBwYXVzZUJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyOwogICAgICAgIHJlc3VtZUJsb2NrTnVtYmVyID0gMDsKICAgICAgICBQYXVzZShwYXVzZUJsb2NrTnVtYmVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1bnBhdXNlKCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgICAgICB3aGVuUGF1c2VkCiAgICB7CiAgICAgICAgcGF1c2VkID0gZmFsc2U7CiAgICAgICAgcmVzdW1lQmxvY2tOdW1iZXIgPSBibG9jay5udW1iZXI7CiAgICAgICAgcGF1c2VCbG9ja051bWJlciA9IDA7CiAgICAgICAgVW5wYXVzZShyZXN1bWVCbG9ja051bWJlcik7CiAgICB9CgogICAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgcmVxdWlyZSghcGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHdoZW5QYXVzZWQgewogICAgICAgIHJlcXVpcmUocGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKfQoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogICAgLyoKICAgICAgICBAcmV0dXJuIHN1bSBvZiBhIGFuZCBiCiAgICAqLwogICAgZnVuY3Rpb24gQUREICh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qCiAgICAgICAgQHJldHVybiBkaWZmZXJlbmNlIG9mIGEgYW5kIGIKICAgICovCiAgICBmdW5jdGlvbiBTVUIgKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGEgPj0gYik7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQogICAgCn0KCi8qCglFUkMyMCBUb2tlbiBTdGFuZGFydAoJaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCglodHRwczovL3RoZWV0aGVyZXVtLndpa2kvdy9pbmRleC5waHAvRVJDMjBfVG9rZW5fU3RhbmRhcmQKKi8KCmNvbnRyYWN0IEVSQzIwIHsKCgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CgogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCk7CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCk7CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKCn0KCi8qCglDb250cmFjdCBkZXRlcm1pbmVzIHRva2VuCiovCmNvbnRyYWN0IFRva2VuIGlzIEVSQzIwLCBQYXVzYWJsZSB7CgoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIC8vVG90YWwgYW1vdW50IG9mIEdlZQogICAgdWludDI1NiBfdG90YWxTdXBwbHkgPSAxMDAgKiAoMTAqKjYpICogKDEwKio4KTsKCiAgICAvL2VuZCBvZiBjcm93ZHNhbGUKICAgIHVpbnQyNTYgcHVibGljIGNyb3dkc2FsZUVuZEJsb2NrID0gNDY5NTAwMDsKICAgIC8vbWF4IGVuZCBvZiBjcm93ZHNhbGUKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IE1BWF9FTkRfQkxPQ0tfTlVNQkVSID0gNDg5MDAwMDsKCiAgICAvL0JhbGFuY2VzIGZvciBlYWNoIGFjY291bnQKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgIGJhbGFuY2VzOwogICAgLy9Pd25lciBvZiB0aGUgYWNjb3VudCBhcHByb3ZlcyB0aGUgdHJhbnNmZXIgb2YgYW4gYW1vdW50IHRvIGFub3RoZXIgYWNjb3VudAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgIC8vTm90aWZpZXMgdXNlcnMgYWJvdXQgdGhlIGFtb3VudCBidXJudAogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIC8vTm90aWZpZXMgdXNlcnMgYWJvdXQgZW5kIGJsb2NrIGNoYW5nZQogICAgZXZlbnQgQ3Jvd2RzYWxlRW5kQ2hhbmdlZCAodWludDI1NiBfY3Jvd2RzYWxlRW5kLCB1aW50MjU2IF9uZXdDcm93ZHNhbGVFbmQpOwoKICAgIC8vcmV0dXJuIF90b3RhbFN1cHBseSBvZiB0aGUgVG9rZW4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFRva2VuU3VwcGx5KSB7CiAgICAgICAgdG90YWxUb2tlblN1cHBseSA9IF90b3RhbFN1cHBseTsKICAgIH0KCiAgICAvL1doYXQgaXMgdGhlIGJhbGFuY2Ugb2YgYSBwYXJ0aWN1bGFyIGFjY291bnQ/CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkKICAgIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAvL1RyYW5zZmVyIHRoZSBiYWxhbmNlIGZyb20gb3duZXIncyBhY2NvdW50IHRvIGFub3RoZXIgYWNjb3VudAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkKICAgICAgICBleHRlcm5hbAogICAgICAgIG5vdFplcm9BZGRyZXNzKF90bykKICAgICAgICB3aGVuTm90UGF1c2VkCiAgICAgICAgY2FuVHJhbnNmZXJPbkNyb3dkc2FsZShtc2cuc2VuZGVyKQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLlNVQihfYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5BREQoX2Ftb3VudCk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogICAgLy8gVGhlIHRyYW5zZmVyRnJvbSBtZXRob2QgaXMgdXNlZCBmb3IgYSB3aXRoZHJhdyB3b3JrZmxvdywgYWxsb3dpbmcgY29udHJhY3RzIHRvIHNlbmQKICAgIC8vIHRva2VucyBvbiB5b3VyIGJlaGFsZiwgZm9yIGV4YW1wbGUgdG8gImRlcG9zaXQiIHRvIGEgY29udHJhY3QgYWRkcmVzcyBhbmQvb3IgdG8gY2hhcmdlCiAgICAvLyBmZWVzIGluIHN1Yi1jdXJyZW5jaWVzOyB0aGUgY29tbWFuZCBzaG91bGQgZmFpbCB1bmxlc3MgdGhlIF9mcm9tIGFjY291bnQgaGFzCiAgICAvLyBkZWxpYmVyYXRlbHkgYXV0aG9yaXplZCB0aGUgc2VuZGVyIG9mIHRoZSBtZXNzYWdlIHZpYSBzb21lIG1lY2hhbmlzbTsgd2UgcHJvcG9zZQogICAgLy8gdGhlc2Ugc3RhbmRhcmRpemVkIEFQSXMgZm9yIGFwcHJvdmFsOgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBub3RaZXJvQWRkcmVzcyhfdG8pCiAgICAgICAgd2hlbk5vdFBhdXNlZAogICAgICAgIGNhblRyYW5zZmVyT25Dcm93ZHNhbGUobXNnLnNlbmRlcikKICAgICAgICBjYW5UcmFuc2Zlck9uQ3Jvd2RzYWxlKF9mcm9tKQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICAvL1JlcXVpcmUgYWxsb3dhbmNlIHRvIGJlIG5vdCB0b28gYmlnCiAgICAgICAgcmVxdWlyZShhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uU1VCKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLkFERChfYW1vdW50KTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLlNVQihfYW1vdW50KTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBBbGxvdyBfc3BlbmRlciB0byB3aXRoZHJhdyBmcm9tIHlvdXIgYWNjb3VudCwgbXVsdGlwbGUgdGltZXMsIHVwIHRvIHRoZSBfdmFsdWUgYW1vdW50LgogICAgLy8gSWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYWdhaW4gaXQgb3ZlcndyaXRlcyB0aGUgY3VycmVudCBhbGxvd2FuY2Ugd2l0aCBfdmFsdWUuCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHdoZW5Ob3RQYXVzZWQKICAgICAgICBub3RaZXJvQWRkcmVzcyhfc3BlbmRlcikKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfYW1vdW50OwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvL1JldHVybiBob3cgbWFueSB0b2tlbnMgbGVmdCB0aGF0IHlvdSBjYW4gc3BlbmQgZnJvbQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykKICAgIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICAvKioKICAgICAqIFRvIGluY3JlbWVudCBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzCiAgICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAgICovCgogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hZGRlZFZhbHVlKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgd2hlbk5vdFBhdXNlZAogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICB1aW50MjU2IGluY3JlYXNlZCA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLkFERChfYWRkZWRWYWx1ZSk7CiAgICAgICAgcmVxdWlyZShpbmNyZWFzZWQgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgICAgIC8vQ2Fubm90IGFwcHJvdmUgbW9yZSBjb2lucyB0aGVuIHlvdSBoYXZlCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBpbmNyZWFzZWQ7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3N1YnRyYWN0ZWRWYWx1ZSkKICAgICAgICBleHRlcm5hbAogICAgICAgIHdoZW5Ob3RQYXVzZWQKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgdWludDI1NiBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuU1VCKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgICAgIH0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIGV4dGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUodHJ1c3RlZFttc2cuc2VuZGVyXSk7CiAgICAgICAgLy9TdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLlNVQihfdmFsdWUpOwogICAgICAgIC8vVXBkYXRlIF90b3RhbFN1cHBseQogICAgICAgIF90b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseS5TVUIoX3ZhbHVlKTsKICAgICAgICBCdXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlQ3Jvd2RzYWxlRW5kQmxvY2sgKHVpbnQyNTYgX2Nyb3dkc2FsZUVuZEJsb2NrKSBleHRlcm5hbCBvbmx5T3duZXIgewoKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA8PSBjcm93ZHNhbGVFbmRCbG9jayk7ICAgICAgICAgICAgICAgICAvL0Nyb3dkc2FsZSBtdXN0IGJlIGFjdGl2ZQogICAgICAgIHJlcXVpcmUoX2Nyb3dkc2FsZUVuZEJsb2NrID49IGJsb2NrLm51bWJlcik7CiAgICAgICAgcmVxdWlyZShfY3Jvd2RzYWxlRW5kQmxvY2sgPD0gTUFYX0VORF9CTE9DS19OVU1CRVIpOyAgICAgICAgLy9UcmFuc2ZlcnMgY2FuIG9ubHkgYmUgdW5sb2NrZWQgZWFybGllcgoKICAgICAgICB1aW50MjU2IGN1cnJlbnRFbmRCbG9ja051bWJlciA9IGNyb3dkc2FsZUVuZEJsb2NrOwogICAgICAgIGNyb3dkc2FsZUVuZEJsb2NrID0gX2Nyb3dkc2FsZUVuZEJsb2NrOwogICAgICAgIENyb3dkc2FsZUVuZENoYW5nZWQgKGN1cnJlbnRFbmRCbG9ja051bWJlciwgX2Nyb3dkc2FsZUVuZEJsb2NrKTsKICAgIH0KCiAgICAvL092ZXJyaWRlIHRyYW5zZmVyT3duZXJzaGlwKCkKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWMgYWZ0ZXJDcm93ZHNhbGUgewogICAgICAgIHN1cGVyLnRyYW5zZmVyT3duZXJzaGlwKF9uZXdPd25lcik7CiAgICB9CgogICAgLy9PdmVycmlkZSBwYXVzZSgpCiAgICBmdW5jdGlvbiBwYXVzZSgpIHB1YmxpYyBhZnRlckNyb3dkc2FsZSB7CiAgICAgICAgc3VwZXIucGF1c2UoKTsKICAgIH0KCiAgICBtb2RpZmllciBjYW5UcmFuc2Zlck9uQ3Jvd2RzYWxlIChhZGRyZXNzIF9hZGRyZXNzKSB7CiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8PSBjcm93ZHNhbGVFbmRCbG9jaykgewogICAgICAgICAgICAvL1JlcXVpcmUgdGhlIGVuZCBvZiBmdW5kaW5nIG9yIG1zZy5zZW5kZXIgdG8gYmUgdHJ1c3RlZAogICAgICAgICAgICByZXF1aXJlKHRydXN0ZWRbX2FkZHJlc3NdKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICAvL1NvbWUgZnVuY3Rpb25zIHNob3VsZCB3b3JrIG9ubHkgYWZ0ZXIgdGhlIENyb3dkc2FsZQogICAgbW9kaWZpZXIgYWZ0ZXJDcm93ZHNhbGUgewogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID4gY3Jvd2RzYWxlRW5kQmxvY2spOwogICAgICAgIF87CiAgICB9Cgp9CgovKgoJSW5zcGlyZWQgYnkgQ2l2aWMgYW5kIEdvbGVtCgoqLwoKLyoKCUludGVyZmFjZSBvZiBtaWdyYXRlIGFnZW50IGNvbnRyYWN0ICh0aGUgbmV3IHRva2VuIGNvbnRyYWN0KQoqLwpjb250cmFjdCBNaWdyYXRlQWdlbnQgewoKICAgIGZ1bmN0aW9uIG1pZ3JhdGVGcm9tKGFkZHJlc3MgX3Rva2VuSG9sZGVyLCB1aW50MjU2IF9hbW91bnQpIGV4dGVybmFsIHJldHVybnMgKGJvb2wpOwoKfQoKY29udHJhY3QgTWlncmF0YWJsZVRva2VuIGlzIFRva2VuIHsKCiAgICBNaWdyYXRlQWdlbnQgcHVibGljIG1pZ3JhdGVBZ2VudDsKCiAgICAvL1RvdGFsIG1pZ3JhdGVkIHRva2VucwogICAgdWludDI1NiBwdWJsaWMgdG90YWxNaWdyYXRlZDsKCiAgICAvKioKICAgICAqIE1pZ3JhdGUgc3RhdGVzLgogICAgICoKICAgICAqIC0gTm90QWxsb3dlZDogVGhlIGNoaWxkIGNvbnRyYWN0IGhhcyBub3QgcmVhY2hlZCBhIGNvbmRpdGlvbiB3aGVyZSB0aGUgdXBncmFkZSBjYW4gYmd1bgogICAgICogLSBXYWl0aW5nRm9yQWdlbnQ6IFRva2VuIGFsbG93cyB1cGdyYWRlLCBidXQgd2UgZG9uJ3QgaGF2ZSBhIG5ldyBhZ2VudCB5ZXQKICAgICAqIC0gUmVhZHlUb01pZ3JhdGU6IFRoZSBhZ2VudCBpcyBzZXQsIGJ1dCBub3QgYSBzaW5nbGUgdG9rZW4gaGFzIGJlZW4gdXBncmFkZWQgeWV0CiAgICAgKiAtIE1pZ3JhdGluZzogVXBncmFkZSBhZ2VudCBpcyBzZXQgYW5kIHRoZSBiYWxhbmNlIGhvbGRlcnMgY2FuIHVwZ3JhZGUgdGhlaXIgdG9rZW5zCiAgICAgKgogICAgICovCiAgICBlbnVtIE1pZ3JhdGVTdGF0ZSB7VW5rbm93biwgTm90QWxsb3dlZCwgV2FpdGluZ0ZvckFnZW50LCBSZWFkeVRvTWlncmF0ZSwgTWlncmF0aW5nfQogICAgZXZlbnQgTWlncmF0ZSAoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBNaWdyYXRlQWdlbnRTZXQgKGFkZHJlc3MgX2FnZW50KTsKCiAgICBmdW5jdGlvbiBtaWdyYXRlKHVpbnQyNTYgX3ZhbHVlKSBleHRlcm5hbCB7CiAgICAgICAgTWlncmF0ZVN0YXRlIHN0YXRlID0gZ2V0TWlncmF0ZVN0YXRlKCk7CiAgICAgICAgLy9NaWdyYXRpbmcgaGFzIHN0YXJ0ZWQKICAgICAgICByZXF1aXJlKHN0YXRlID09IE1pZ3JhdGVTdGF0ZS5SZWFkeVRvTWlncmF0ZSB8fCBzdGF0ZSA9PSBNaWdyYXRlU3RhdGUuTWlncmF0aW5nKTsKICAgICAgICAvL01pZ3JhdGVzIHVzZXIgYmFsYW5jZQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uU1VCKF92YWx1ZSk7CiAgICAgICAgLy9NaWdyYXRlcyB0b3RhbCBzdXBwbHkKICAgICAgICBfdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHkuU1VCKF92YWx1ZSk7CiAgICAgICAgLy9Db3VudHMgbWlncmF0ZWQgdG9rZW5zCiAgICAgICAgdG90YWxNaWdyYXRlZCA9IHRvdGFsTWlncmF0ZWQuQUREKF92YWx1ZSk7CiAgICAgICAgLy9VcGdyYWRlIGFnZW50IHJlaXNzdWVzIHRoZSB0b2tlbnMKICAgICAgICBtaWdyYXRlQWdlbnQubWlncmF0ZUZyb20obXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgICAgICBNaWdyYXRlKG1zZy5zZW5kZXIsIG1pZ3JhdGVBZ2VudCwgX3ZhbHVlKTsKICAgIH0KCiAgICAvKgogICAgICAgIFNldCBtaWdyYXRpbmcgYWdlbnQgYW5kIHN0YXJ0IG1pZ3JhdGluZwogICAgKi8KICAgIGZ1bmN0aW9uIHNldE1pZ3JhdGVBZ2VudChNaWdyYXRlQWdlbnQgX2FnZW50KQogICAgZXh0ZXJuYWwKICAgIG9ubHlPd25lcgogICAgbm90WmVyb0FkZHJlc3MoX2FnZW50KQogICAgYWZ0ZXJDcm93ZHNhbGUKICAgIHsKICAgICAgICAvL2Nhbm5vdCBpbnRlcnJ1cHQgbWlncmF0aW5nCiAgICAgICAgcmVxdWlyZShnZXRNaWdyYXRlU3RhdGUoKSAhPSBNaWdyYXRlU3RhdGUuTWlncmF0aW5nKTsKICAgICAgICAvL3NldCBtaWdyYXRlIGFnZW50CiAgICAgICAgbWlncmF0ZUFnZW50ID0gX2FnZW50OwogICAgICAgIC8vRW1pdCBldmVudAogICAgICAgIE1pZ3JhdGVBZ2VudFNldChtaWdyYXRlQWdlbnQpOwogICAgfQoKICAgIC8qCiAgICAgICAgTWlncmF0aW5nIHN0YXR1cwogICAgKi8KICAgIGZ1bmN0aW9uIGdldE1pZ3JhdGVTdGF0ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChNaWdyYXRlU3RhdGUpIHsKICAgICAgICBpZiAoYmxvY2subnVtYmVyIDw9IGNyb3dkc2FsZUVuZEJsb2NrKSB7CiAgICAgICAgICAgIC8vTWlncmF0aW9uIGlzIG5vdCBhbGxvd2VkIG9uIGZ1bmRpbmcKICAgICAgICAgICAgcmV0dXJuIE1pZ3JhdGVTdGF0ZS5Ob3RBbGxvd2VkOwogICAgICAgIH0gZWxzZSBpZiAoYWRkcmVzcyhtaWdyYXRlQWdlbnQpID09IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgLy9NaWdyYXRpbmcgYWRkcmVzcyBpcyBub3Qgc2V0CiAgICAgICAgICAgIHJldHVybiBNaWdyYXRlU3RhdGUuV2FpdGluZ0ZvckFnZW50OwogICAgICAgIH0gZWxzZSBpZiAodG90YWxNaWdyYXRlZCA9PSAwKSB7CiAgICAgICAgICAgIC8vTWlncmF0aW5nIGhhc24ndCBzdGFydGVkIHlldAogICAgICAgICAgICByZXR1cm4gTWlncmF0ZVN0YXRlLlJlYWR5VG9NaWdyYXRlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vTWlncmF0aW5nCiAgICAgICAgICAgIHJldHVybiBNaWdyYXRlU3RhdGUuTWlncmF0aW5nOwogICAgICAgIH0KCiAgICB9Cgp9CgovKgoJQ29udHJhY3QgZGVmaW5lcyBzcGVjaWZpYyB0b2tlbgoqLwpjb250cmFjdCBHRUVUb2tlbiBpcyBNaWdyYXRhYmxlVG9rZW4gewoKICAgIAogICAgLy9OYW1lIG9mIHRoZSB0b2tlbgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkdlZW5zIFBsYXRmb3JtIFRva2VuIjsKICAgIC8vU3ltYm9sIG9mIHRoZSB0b2tlbgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiR0VFIjsKICAgIC8vTnVtYmVyIG9mIGRlY2ltYWxzIG9mIEdFRQogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gODsKCiAgICAvL1RlYW0gYWxsb2NhdGlvbgogICAgLy9UZWFtIHdhbGxldCB0aGF0IHdpbGwgYmUgdW5sb2NrZWQgYWZ0ZXIgSUNPCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBURUFNMCA9IDB4OUI0ZGY0YWM2M0I2MDQ5REQwMTMwOTBkM0Y2MzlGZDJFQTVBMDJkMzsKICAgIC8vVGVhbSB3YWxsZXQgdGhhdCB3aWxsIGJlIHVubG9ja2VkIGFmdGVyIDAuNSB5ZWFyIGFmdGVyIElDTwogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgVEVBTTEgPSAweDRkZjkzNDgyMzlmNkMxMjYwRmM1ZDA2MTE3NTVjYzFFRjgzMEZmNmM7CiAgICAvL1RlYW0gd2FsbGV0IHRoYXQgd2lsbCBiZSB1bmxvY2tlZCBhZnRlciAxIHllYXIgYWZ0ZXIgSUNPCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBURUFNMiA9IDB4NDkwMkE1MkY5NWQ5RDQ3NTMxQmVkMDc5QjVCMDI4YzdGODlhZDQ3YjsKICAgIC8vMC41IHllYXIgYWZ0ZXIgSUNPCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBVTkxPQ0tfVEVBTV8xID0gMTUyODM3MjgwMDsKICAgIC8vMSB5ZWFyIGFmdGVyIElDTwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgVU5MT0NLX1RFQU1fMiA9IDE1NDQxODQwMDA7CiAgICAvLzFzdCB0ZWFtIHdhbGxldCBiYWxhbmNlCiAgICB1aW50MjU2IHB1YmxpYyB0ZWFtMUJhbGFuY2U7CiAgICAvLzJuZCB0ZWFtIHdhbGxldCBiYWxhbmNlCiAgICB1aW50MjU2IHB1YmxpYyB0ZWFtMkJhbGFuY2U7CgogICAgLy9Db21tdW5pdHkgYWxsb2NhdGlvbgogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgQ09NTVVOSVRZID0gMHgyNjVGQzFkOThmM0MwRDQyZTQyNzNGNTQyOTE3NTI1QzNjM0Y5MjVBOwoKICAgIC8vMi40JQogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IFRFQU0wX1RIT1VTQU5EVEggPSAyNDsKICAgIC8vMy42JQogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IFRFQU0xX1RIT1VTQU5EVEggPSAzNjsKICAgIC8vNiUKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBURUFNMl9USE9VU0FORFRIID0gNjA7CiAgICAvLzY3JQogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IElDT19USE9VU0FORFRIID0gNjcwOwogICAgLy8yMSUKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBDT01NVU5JVFlfVEhPVVNBTkRUSCA9IDIxMDsKICAgIC8vMTAwJQogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IERFTk9NSU5BVE9SID0gMTAwMDsKCiAgICBmdW5jdGlvbiBHRUVUb2tlbigpIHsKICAgICAgICAvLzY3JSBvZiBfdG90YWxTdXBwbHkKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IF90b3RhbFN1cHBseSAqIElDT19USE9VU0FORFRIIC8gREVOT01JTkFUT1I7CiAgICAgICAgLy8yLjQlIG9mIF90b3RhbFN1cHBseQogICAgICAgIGJhbGFuY2VzW1RFQU0wXSA9IF90b3RhbFN1cHBseSAqIFRFQU0wX1RIT1VTQU5EVEggLyBERU5PTUlOQVRPUjsKICAgICAgICAvLzMuNiUgb2YgX3RvdGFsU3VwcGx5CiAgICAgICAgdGVhbTFCYWxhbmNlID0gX3RvdGFsU3VwcGx5ICogVEVBTTFfVEhPVVNBTkRUSCAvIERFTk9NSU5BVE9SOwogICAgICAgIC8vNiUgb2YgX3RvdGFsU3VwcGx5CiAgICAgICAgdGVhbTJCYWxhbmNlID0gX3RvdGFsU3VwcGx5ICogVEVBTTJfVEhPVVNBTkRUSCAvIERFTk9NSU5BVE9SOwogICAgICAgIC8vMjElIG9mIF90b3RhbFN1cHBseQogICAgICAgIGJhbGFuY2VzW0NPTU1VTklUWV0gPSAgX3RvdGFsU3VwcGx5ICogQ09NTVVOSVRZX1RIT1VTQU5EVEggLyBERU5PTUlOQVRPUjsKCiAgICAgICAgVHJhbnNmZXIgKHRoaXMsIG1zZy5zZW5kZXIsIGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKICAgICAgICBUcmFuc2ZlciAodGhpcywgVEVBTTAsIGJhbGFuY2VzW1RFQU0wXSk7CiAgICAgICAgVHJhbnNmZXIgKHRoaXMsIENPTU1VTklUWSwgYmFsYW5jZXNbQ09NTVVOSVRZXSk7CgogICAgfQoKICAgIC8vQ2hlY2sgaWYgdGVhbSB3YWxsZXQgaXMgdW5sb2NrZWQKICAgIGZ1bmN0aW9uIHVubG9ja1RlYW1Ub2tlbnMoYWRkcmVzcyBfYWRkcmVzcykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBpZiAoX2FkZHJlc3MgPT0gVEVBTTEpIHsKICAgICAgICAgICAgcmVxdWlyZShVTkxPQ0tfVEVBTV8xIDw9IG5vdyk7CiAgICAgICAgICAgIHJlcXVpcmUgKHRlYW0xQmFsYW5jZSA+IDApOwogICAgICAgICAgICBiYWxhbmNlc1tURUFNMV0gPSB0ZWFtMUJhbGFuY2U7CiAgICAgICAgICAgIHRlYW0xQmFsYW5jZSA9IDA7CiAgICAgICAgICAgIFRyYW5zZmVyICh0aGlzLCBURUFNMSwgYmFsYW5jZXNbVEVBTTFdKTsKICAgICAgICB9IGVsc2UgaWYgKF9hZGRyZXNzID09IFRFQU0yKSB7CiAgICAgICAgICAgIHJlcXVpcmUoVU5MT0NLX1RFQU1fMiA8PSBub3cpOwogICAgICAgICAgICByZXF1aXJlICh0ZWFtMkJhbGFuY2UgPiAwKTsKICAgICAgICAgICAgYmFsYW5jZXNbVEVBTTJdID0gdGVhbTJCYWxhbmNlOwogICAgICAgICAgICB0ZWFtMkJhbGFuY2UgPSAwOwogICAgICAgICAgICBUcmFuc2ZlciAodGhpcywgVEVBTTIsIGJhbGFuY2VzW1RFQU0yXSk7CiAgICAgICAgfQogICAgfQoKfQ=='.
	

]
