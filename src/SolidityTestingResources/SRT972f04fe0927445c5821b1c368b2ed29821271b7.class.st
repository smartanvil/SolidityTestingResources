Class {
	#name : #SRT972f04fe0927445c5821b1c368b2ed29821271b7,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT972f04fe0927445c5821b1c368b2ed29821271b7 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7IC8vIHNvbGhpbnQtZGlzYWJsZS1saW5lCgovLy8gQHRpdGxlIEludGVyZmFjZSBmb3IgY29udHJhY3RzIGNvbmZvcm1pbmcgdG8gRVJDLTcyMTogTm9uLUZ1bmdpYmxlIFRva2VucwovLy8gQGF1dGhvciBEaWV0ZXIgU2hpcmxleSA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjJkNDk0ODU5NDg2ZDRjNTU0NDQyNDA1NzQ4NDMwMzRlNDIiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PiAoaHR0cHM6Ly9naXRodWIuY29tL2RldGUpCmNvbnRyYWN0IEVSQzcyMSB7CiAgLy8gUmVxdWlyZWQgbWV0aG9kcwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBhZGRyKTsKICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgYXBwcm92ZWQsIHVpbnQyNTYgdG9rZW5JZCk7CgogIC8vIE9wdGlvbmFsCiAgLy8gZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBuYW1lKTsKICAvLyBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgc3ltYm9sKTsKICAvLyBmdW5jdGlvbiB0b2tlbk9mT3duZXJCeUluZGV4KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9pbmRleCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2IHRva2VuSWQpOwogIC8vIGZ1bmN0aW9uIHRva2VuTWV0YWRhdGEodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIGluZm9VcmwpOwp9Cgpjb250cmFjdCBQb3Juc3RhcnNJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF9pZCkgcHVibGljIHZpZXcgcmV0dXJucyAoCiAgICAgICAgYWRkcmVzcyBvd25lcgogICAgKTsKICAgIAogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICgKICAgICAgICB1aW50MjU2IHRvdGFsCiAgICApOwp9Cgpjb250cmFjdCBQb3JuU2NlbmVUb2tlbiBpcyBFUkM3MjEgewoKICAvKioqIEVWRU5UUyAqKiovCgogIC8vLyBAZGV2IFRoZSBCaXJ0aCBldmVudCBpcyBmaXJlZCB3aGVuZXZlciBhIG5ldyBzY2VuZSBjb21lcyBpbnRvIGV4aXN0ZW5jZS4KICBldmVudCBCaXJ0aCh1aW50MjU2IHRva2VuSWQsIHN0cmluZyBuYW1lLCB1aW50W10gc3RhcnMsIGFkZHJlc3Mgb3duZXIpOwoKICAvLy8gQGRldiBUaGUgVG9rZW5Tb2xkIGV2ZW50IGlzIGZpcmVkIHdoZW5ldmVyIGEgdG9rZW4gaXMgc29sZC4KICBldmVudCBUb2tlblNvbGQodWludDI1NiB0b2tlbklkLCB1aW50MjU2IG9sZFByaWNlLCB1aW50MjU2IG5ld1ByaWNlLCBhZGRyZXNzIHByZXZPd25lciwgYWRkcmVzcyB3aW5uZXIsIHN0cmluZyBuYW1lLCB1aW50W10gc3RhcnMpOwoKICAvLy8gQGRldiBUcmFuc2ZlciBldmVudCBhcyBkZWZpbmVkIGluIGN1cnJlbnQgZHJhZnQgb2YgRVJDNzIxLiAKICAvLy8gIG93bmVyc2hpcCBpcyBhc3NpZ25lZCwgaW5jbHVkaW5nIGJpcnRocy4KICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CgogIC8qKiogQ09OU1RBTlRTICoqKi8KCiAgLy8vIEBub3RpY2UgTmFtZSBhbmQgc3ltYm9sIG9mIHRoZSBub24gZnVuZ2libGUgdG9rZW4sIGFzIGRlZmluZWQgaW4gRVJDNzIxLgogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgTkFNRSA9ICJDcnlwdG9Qb3JuU2NlbmVzIjsgLy8gc29saGludC1kaXNhYmxlLWxpbmUKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IFNZTUJPTCA9ICJQb3JuU2NlbmVUb2tlbiI7IC8vIHNvbGhpbnQtZGlzYWJsZS1saW5lCgogIHVpbnQyNTYgcHJpdmF0ZSBzdGFydGluZ1ByaWNlID0gMC4wMDEgZXRoZXI7CiAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IFBST01PX0NSRUFUSU9OX0xJTUlUID0gMTAwMDA7CiAgdWludDI1NiBwcml2YXRlIGZpcnN0U3RlcExpbWl0ID0gIDAuMDUzNjEzIGV0aGVyOwogIHVpbnQyNTYgcHJpdmF0ZSBzZWNvbmRTdGVwTGltaXQgPSAwLjU2NDk1NyBldGhlcjsKCiAgLyoqKiBTVE9SQUdFICoqKi8KCiAgLy8vIEBkZXYgQSBtYXBwaW5nIGZyb20gc2NlbmUgSURzIHRvIHRoZSBhZGRyZXNzIHRoYXQgb3ducyB0aGVtLiBBbGwgc2NlbmVzIGhhdmUKICAvLy8gIHNvbWUgdmFsaWQgb3duZXIgYWRkcmVzcy4KICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBzY2VuZUluZGV4VG9Pd25lcjsKCiAgLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBvd25lciBhZGRyZXNzIHRvIGNvdW50IG9mIHRva2VucyB0aGF0IGFkZHJlc3Mgb3ducy4KICAvLyAgVXNlZCBpbnRlcm5hbGx5IGluc2lkZSBiYWxhbmNlT2YoKSB0byByZXNvbHZlIG93bmVyc2hpcCBjb3VudC4KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgb3duZXJzaGlwVG9rZW5Db3VudDsKCiAgLy8vIEBkZXYgQSBtYXBwaW5nIGZyb20gU2NlbmVJRHMgdG8gYW4gYWRkcmVzcyB0aGF0IGhhcyBiZWVuIGFwcHJvdmVkIHRvIGNhbGwKICAvLy8gIHRyYW5zZmVyRnJvbSgpLiBFYWNoIFNjZW5lIGNhbiBvbmx5IGhhdmUgb25lIGFwcHJvdmVkIGFkZHJlc3MgZm9yIHRyYW5zZmVyCiAgLy8vICBhdCBhbnkgdGltZS4gQSB6ZXJvIHZhbHVlIG1lYW5zIG5vIGFwcHJvdmFsIGlzIG91dHN0YW5kaW5nLgogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIHNjZW5lSW5kZXhUb0FwcHJvdmVkOwoKICAvLyBAZGV2IEEgbWFwcGluZyBmcm9tIFNjZW5lSURzIHRvIHRoZSBwcmljZSBvZiB0aGUgdG9rZW4uCiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIHNjZW5lSW5kZXhUb1ByaWNlOwoKICAvLyBUaGUgYWRkcmVzc2VzIG9mIHRoZSBhY2NvdW50cyAob3IgY29udHJhY3RzKSB0aGF0IGNhbiBleGVjdXRlIGFjdGlvbnMgd2l0aGluIGVhY2ggcm9sZXMuCiAgYWRkcmVzcyBwdWJsaWMgY2VvQWRkcmVzczsKICBhZGRyZXNzIHB1YmxpYyBjb29BZGRyZXNzOwoKICBQb3Juc3RhcnNJbnRlcmZhY2UgcG9ybnN0YXJzQ29udHJhY3Q7CiAgdWludCBjdXJyZW50QXdhcmRXaW5uZXIgPSA4NTsgLy9Jbml0aWF0IHRoZSBhd2FyZC4gQXdhcmQgSG9sZGVyIGZyb20gUHJldmlvdXMgQ29udHJhY3QKCiAgdWludDI1NiBwdWJsaWMgcHJvbW9DcmVhdGVkQ291bnQ7CgogIC8qKiogREFUQVRZUEVTICoqKi8KICBzdHJ1Y3QgU2NlbmUgewogICAgc3RyaW5nIG5hbWU7CiAgICB1aW50W10gc3RhcnM7CiAgfQoKICBTY2VuZVtdIHByaXZhdGUgc2NlbmVzOwoKICAvKioqIEFDQ0VTUyBNT0RJRklFUlMgKioqLwogIC8vLyBAZGV2IEFjY2VzcyBtb2RpZmllciBmb3IgQ0VPLW9ubHkgZnVuY3Rpb25hbGl0eQogIG1vZGlmaWVyIG9ubHlDRU8oKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyk7CiAgICBfOwogIH0KCiAgLy8vIEBkZXYgQWNjZXNzIG1vZGlmaWVyIGZvciBDT08tb25seSBmdW5jdGlvbmFsaXR5CiAgbW9kaWZpZXIgb25seUNPTygpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb29BZGRyZXNzKTsKICAgIF87CiAgfQoKICAvLy8gQWNjZXNzIG1vZGlmaWVyIGZvciBjb250cmFjdCBvd25lciBvbmx5IGZ1bmN0aW9uYWxpdHkKICBtb2RpZmllciBvbmx5Q0xldmVsKCkgewogICAgcmVxdWlyZSgKICAgICAgbXNnLnNlbmRlciA9PSBjZW9BZGRyZXNzIHx8CiAgICAgIG1zZy5zZW5kZXIgPT0gY29vQWRkcmVzcwogICAgKTsKICAgIF87CiAgfQoKICAvKioqIENPTlNUUlVDVE9SICoqKi8KICBmdW5jdGlvbiBQb3JuU2NlbmVUb2tlbigpIHB1YmxpYyB7CiAgICBjZW9BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgIGNvb0FkZHJlc3MgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqKiBQVUJMSUMgRlVOQ1RJT05TICoqKi8KICAvLy8gQG5vdGljZSBHcmFudCBhbm90aGVyIGFkZHJlc3MgdGhlIHJpZ2h0IHRvIHRyYW5zZmVyIHRva2VuIHZpYSB0YWtlT3duZXJzaGlwKCkgYW5kIHRyYW5zZmVyRnJvbSgpLgogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIGJlIGdyYW50ZWQgdHJhbnNmZXIgYXBwcm92YWwuIFBhc3MgYWRkcmVzcygwKSB0bwogIC8vLyAgY2xlYXIgYWxsIGFwcHJvdmFscy4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gYXBwcm92ZSgKICAgIGFkZHJlc3MgX3RvLAogICAgdWludDI1NiBfdG9rZW5JZAogICkgcHVibGljIHsKICAgIC8vIENhbGxlciBtdXN0IG93biB0b2tlbi4KICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKCiAgICBzY2VuZUluZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF0gPSBfdG87CgogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvLy8gRm9yIHF1ZXJ5aW5nIGJhbGFuY2Ugb2YgYSBwYXJ0aWN1bGFyIGFjY291bnQKICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmb3IgYmFsYW5jZSBxdWVyeQogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBvd25lcnNoaXBUb2tlbkNvdW50W19vd25lcl07CiAgfQogIAogIGZ1bmN0aW9uIHNldFBvcm5zdGFyc0NvbnRyYWN0QWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgb25seUNPTyB7CiAgICAgIHBvcm5zdGFyc0NvbnRyYWN0ID0gUG9ybnN0YXJzSW50ZXJmYWNlKF9hZGRyZXNzKTsKICB9CiAgCiAgLy8vIEBkZXYgQ3JlYXRlcyBhIG5ldyBwcm9tbyBTY2VuZSB3aXRoIHRoZSBnaXZlbiBuYW1lLCB3aXRoIGdpdmVuIF9wcmljZSBhbmQgYXNzaWduZXMgaXQgdG8gYW4gYWRkcmVzcy4KICBmdW5jdGlvbiBjcmVhdGVQcm9tb1NjZW5lKGFkZHJlc3MgX293bmVyLCBzdHJpbmcgX25hbWUsIHVpbnRbXSBfc3RhcnMsIHVpbnQyNTYgX3ByaWNlKSBwdWJsaWMgb25seUNPTyB7CiAgICByZXF1aXJlKHByb21vQ3JlYXRlZENvdW50IDwgUFJPTU9fQ1JFQVRJT05fTElNSVQpOwoKICAgIGFkZHJlc3Mgc2NlbmVPd25lciA9IF9vd25lcjsKICAgIGlmIChzY2VuZU93bmVyID09IGFkZHJlc3MoMCkpIHsKICAgICAgc2NlbmVPd25lciA9IGNvb0FkZHJlc3M7CiAgICB9CgogICAgaWYgKF9wcmljZSA8PSAwKSB7CiAgICAgIF9wcmljZSA9IHN0YXJ0aW5nUHJpY2U7CiAgICB9CgogICAgcHJvbW9DcmVhdGVkQ291bnQrKzsKICAgIF9jcmVhdGVTY2VuZShfbmFtZSwgX3N0YXJzLCBzY2VuZU93bmVyLCBfcHJpY2UpOwogIH0KCiAgLy8vIEBkZXYgQ3JlYXRlcyBhIG5ldyBTY2VuZSB3aXRoIHRoZSBnaXZlbiBuYW1lLgogIGZ1bmN0aW9uIGNyZWF0ZUNvbnRyYWN0U2NlbmUoc3RyaW5nIF9uYW1lLCB1aW50W10gX3N0YXJzKSBwdWJsaWMgb25seUNPTyB7CiAgICBfY3JlYXRlU2NlbmUoX25hbWUsIF9zdGFycywgYWRkcmVzcyh0aGlzKSwgc3RhcnRpbmdQcmljZSk7CiAgfQoKICAvLy8gQG5vdGljZSBSZXR1cm5zIGFsbCB0aGUgcmVsZXZhbnQgaW5mb3JtYXRpb24gYWJvdXQgYSBzcGVjaWZpYyBzY2VuZS4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSB0b2tlbklkIG9mIHRoZSBzY2VuZSBvZiBpbnRlcmVzdC4KICBmdW5jdGlvbiBnZXRTY2VuZSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICgKICAgIHN0cmluZyBzY2VuZU5hbWUsCiAgICB1aW50W10gc3RhcnMsCiAgICB1aW50MjU2IHNlbGxpbmdQcmljZSwKICAgIGFkZHJlc3Mgb3duZXIKICApIHsKICAgIFNjZW5lIHN0b3JhZ2Ugc2NlbmUgPSBzY2VuZXNbX3Rva2VuSWRdOwogICAgc2NlbmVOYW1lID0gc2NlbmUubmFtZTsKICAgIHN0YXJzID0gc2NlbmUuc3RhcnM7CiAgICBzZWxsaW5nUHJpY2UgPSBzY2VuZUluZGV4VG9QcmljZVtfdG9rZW5JZF07CiAgICBvd25lciA9IHNjZW5lSW5kZXhUb093bmVyW190b2tlbklkXTsKICB9CgogIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuIE5BTUU7CiAgfQoKICAvLy8gRm9yIHF1ZXJ5aW5nIG93bmVyIG9mIHRva2VuCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgdG9rZW5JRCBmb3Igb3duZXIgaW5xdWlyeQogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKQogICAgcHVibGljCiAgICB2aWV3CiAgICByZXR1cm5zIChhZGRyZXNzIG93bmVyKQogIHsKICAgIG93bmVyID0gc2NlbmVJbmRleFRvT3duZXJbX3Rva2VuSWRdOwogICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApKTsKICB9CgogIGZ1bmN0aW9uIHBheW91dChhZGRyZXNzIF90bykgcHVibGljIG9ubHlDTGV2ZWwgewogICAgX3BheW91dChfdG8pOwogIH0KCiAgLy8gQWxsb3dzIHNvbWVvbmUgdG8gc2VuZCBldGhlciBhbmQgb2J0YWluIHRoZSB0b2tlbgogIGZ1bmN0aW9uIHB1cmNoYXNlKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyBwYXlhYmxlIHsKICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBzY2VuZUluZGV4VG9Pd25lcltfdG9rZW5JZF07CiAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKCiAgICB1aW50MjU2IHNlbGxpbmdQcmljZSA9IHNjZW5lSW5kZXhUb1ByaWNlW190b2tlbklkXTsKCiAgICAvLyBNYWtpbmcgc3VyZSB0b2tlbiBvd25lciBpcyBub3Qgc2VuZGluZyB0byBzZWxmCiAgICByZXF1aXJlKG9sZE93bmVyICE9IG5ld093bmVyKTsKCiAgICAvLyBTYWZldHkgY2hlY2sgdG8gcHJldmVudCBhZ2FpbnN0IGFuIHVuZXhwZWN0ZWQgMHgwIGRlZmF1bHQuCiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChuZXdPd25lcikpOwoKICAgIC8vIE1ha2luZyBzdXJlIHNlbnQgYW1vdW50IGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgc2VsbGluZ1ByaWNlCiAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBzZWxsaW5nUHJpY2UpOwoKICAgIHVpbnQyNTYgcGF5bWVudCA9IHVpbnQyNTYoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsaW5nUHJpY2UsIDgwKSwgMTAwKSk7CiAgICB1aW50MjU2IHB1cmNoYXNlRXhjZXNzID0gU2FmZU1hdGguc3ViKG1zZy52YWx1ZSwgc2VsbGluZ1ByaWNlKTsKICAgIAogICAgLy8gUG9ybnN0YXIgSG9sZGVyIEZlZXMKICAgIC8vIEdldCBTY2VuZSBTdGFyIExlbmd0aAogICAgU2NlbmUgbWVtb3J5IF9zY2VuZSA9IHNjZW5lc1tfdG9rZW5JZF07CiAgICAKICAgIHJlcXVpcmUoX3NjZW5lLnN0YXJzLmxlbmd0aCA+IDApOyAvL01ha2Ugc3VyZSBoYXZlIHN0YXJzIGluIHRoZSBzY2VuZQoKICAgIHVpbnQyNTYgaG9sZGVyRmVlID0gdWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsaW5nUHJpY2UsIDEwKSwgMTAwKSwgX3NjZW5lLnN0YXJzLmxlbmd0aCkpOwogICAgdWludDI1NiBhd2FyZE93bmVyRmVlID0gdWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgNCksIDEwMCkpOwoKICAgIC8vIFVwZGF0ZSBwcmljZXMKICAgIGlmIChzZWxsaW5nUHJpY2UgPCBmaXJzdFN0ZXBMaW1pdCkgewogICAgICAvLyBmaXJzdCBzdGFnZQogICAgICBzY2VuZUluZGV4VG9QcmljZVtfdG9rZW5JZF0gPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgMjAwKSwgODApOwogICAgfSBlbHNlIGlmIChzZWxsaW5nUHJpY2UgPCBzZWNvbmRTdGVwTGltaXQpIHsKICAgICAgLy8gc2Vjb25kIHN0YWdlCiAgICAgIHNjZW5lSW5kZXhUb1ByaWNlW190b2tlbklkXSA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCAxMjApLCA4MCk7CiAgICB9IGVsc2UgewogICAgICAvLyB0aGlyZCBzdGFnZQogICAgICBzY2VuZUluZGV4VG9QcmljZVtfdG9rZW5JZF0gPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgMTE1KSwgODApOwogICAgfQoKICAgIF90cmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIF90b2tlbklkKTsKCiAgICAvLyBQYXkgcHJldmlvdXMgdG9rZW5Pd25lciBpZiBvd25lciBpcyBub3QgY29udHJhY3QKICAgIGlmIChvbGRPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgIG9sZE93bmVyLnRyYW5zZmVyKHBheW1lbnQpOyAvLygxLTAuMDYpCiAgICB9CiAgICAKICAgIF9wYXlTY2VuZVN0YXJPd25lcnMoX3NjZW5lLCBob2xkZXJGZWUpOwogICAgX3BheUF3YXJkT3duZXIoYXdhcmRPd25lckZlZSk7CiAgICAKICAgIFRva2VuU29sZChfdG9rZW5JZCwgc2VsbGluZ1ByaWNlLCBzY2VuZUluZGV4VG9QcmljZVtfdG9rZW5JZF0sIG9sZE93bmVyLCBuZXdPd25lciwgX3NjZW5lLm5hbWUsIF9zY2VuZS5zdGFycyk7CgogICAgbXNnLnNlbmRlci50cmFuc2ZlcihwdXJjaGFzZUV4Y2Vzcyk7CiAgfQogIAogIGZ1bmN0aW9uIF9wYXlTY2VuZVN0YXJPd25lcnMoU2NlbmUgX3NjZW5lLCB1aW50MjU2IGZlZSkgcHJpdmF0ZSB7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfc2NlbmUuc3RhcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBhZGRyZXNzIF9wb3Juc3Rhck93bmVyOwogICAgICAgIChfcG9ybnN0YXJPd25lcikgPSBwb3Juc3RhcnNDb250cmFjdC5vd25lck9mKF9zY2VuZS5zdGFyc1tpXSk7CiAgICAgICAgCiAgICAgICAgaWYoX2lzR29vZEFkZHJlc3MoX3Bvcm5zdGFyT3duZXIpKSB7CiAgICAgICAgICAgIF9wb3Juc3Rhck93bmVyLnRyYW5zZmVyKGZlZSk7CiAgICAgICAgfQogICAgfQogIH0KICAKICBmdW5jdGlvbiBfcGF5QXdhcmRPd25lcih1aW50MjU2IGZlZSkgcHJpdmF0ZSB7CiAgICBhZGRyZXNzIF9hd2FyZE93bmVyOwogICAgKF9hd2FyZE93bmVyKSA9IHBvcm5zdGFyc0NvbnRyYWN0Lm93bmVyT2YoY3VycmVudEF3YXJkV2lubmVyKTsKICAgIAogICAgaWYoX2lzR29vZEFkZHJlc3MoX2F3YXJkT3duZXIpKSB7CiAgICAgICAgX2F3YXJkT3duZXIudHJhbnNmZXIoZmVlKTsKICAgIH0KICB9CiAgCiAgZnVuY3Rpb24gX2lzR29vZEFkZHJlc3MoYWRkcmVzcyBfYWRkeSkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgaWYoX2FkZHkgPT0gYWRkcmVzcyhwb3Juc3RhcnNDb250cmFjdCkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICAKICAgICAgaWYoX2FkZHkgPT0gYWRkcmVzcygwKSB8fCBfYWRkeSA9PSBhZGRyZXNzKDB4MCkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICAKICAgICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBwcmljZU9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgcHJpY2UpIHsKICAgIHJldHVybiBzY2VuZUluZGV4VG9QcmljZVtfdG9rZW5JZF07CiAgfQogIAogIGZ1bmN0aW9uIHN0YXJzT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludFtdKSB7CiAgICAgIHJldHVybiBzY2VuZXNbX3Rva2VuSWRdLnN0YXJzOwogIH0KICAKICAvLy8gQGRldiBBc3NpZ25zIGEgbmV3IGFkZHJlc3MgdG8gYWN0IGFzIHRoZSBDRU8uIE9ubHkgYXZhaWxhYmxlIHRvIHRoZSBjdXJyZW50IENFTy4KICAvLy8gQHBhcmFtIF9uZXdDRU8gVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBDRU8KICBmdW5jdGlvbiBzZXRDRU8oYWRkcmVzcyBfbmV3Q0VPKSBwdWJsaWMgb25seUNFTyB7CiAgICByZXF1aXJlKF9uZXdDRU8gIT0gYWRkcmVzcygwKSk7CgogICAgY2VvQWRkcmVzcyA9IF9uZXdDRU87CiAgfQoKICAvLy8gQGRldiBBc3NpZ25zIGEgbmV3IGFkZHJlc3MgdG8gYWN0IGFzIHRoZSBDT08uIE9ubHkgYXZhaWxhYmxlIHRvIHRoZSBjdXJyZW50IENPTy4KICAvLy8gQHBhcmFtIF9uZXdDT08gVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBDT08KICBmdW5jdGlvbiBzZXRDT08oYWRkcmVzcyBfbmV3Q09PKSBwdWJsaWMgb25seUNFTyB7CiAgICByZXF1aXJlKF9uZXdDT08gIT0gYWRkcmVzcygwKSk7CgogICAgY29vQWRkcmVzcyA9IF9uZXdDT087CiAgfQoKICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuIFNZTUJPTDsKICB9CgogIC8vLyBAbm90aWNlIEFsbG93IHByZS1hcHByb3ZlZCB1c2VyIHRvIHRha2Ugb3duZXJzaGlwIG9mIGEgdG9rZW4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICBhZGRyZXNzIG9sZE93bmVyID0gc2NlbmVJbmRleFRvT3duZXJbX3Rva2VuSWRdOwoKICAgIC8vIFNhZmV0eSBjaGVjayB0byBwcmV2ZW50IGFnYWluc3QgYW4gdW5leHBlY3RlZCAweDAgZGVmYXVsdC4KICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKG5ld093bmVyKSk7CgogICAgLy8gTWFraW5nIHN1cmUgdHJhbnNmZXIgaXMgYXBwcm92ZWQKICAgIHJlcXVpcmUoX2FwcHJvdmVkKG5ld093bmVyLCBfdG9rZW5JZCkpOwoKICAgIF90cmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIF90b2tlbklkKTsKICB9CgogIC8vLyBAcGFyYW0gX293bmVyIFRoZSBvd25lciB3aG9zZSBjZWxlYnJpdHkgdG9rZW5zIHdlIGFyZSBpbnRlcmVzdGVkIGluLgogIC8vLyBAZGV2IFRoaXMgbWV0aG9kIE1VU1QgTkVWRVIgYmUgY2FsbGVkIGJ5IHNtYXJ0IGNvbnRyYWN0IGNvZGUuIEZpcnN0LCBpdCdzIGZhaXJseQogIC8vLyAgZXhwZW5zaXZlIChpdCB3YWxrcyB0aGUgZW50aXJlIHNjZW5lcyBhcnJheSBsb29raW5nIGZvciBzY2VuZXMgYmVsb25naW5nIHRvIG93bmVyKSwKICAvLy8gIGJ1dCBpdCBhbHNvIHJldHVybnMgYSBkeW5hbWljIGFycmF5LCB3aGljaCBpcyBvbmx5IHN1cHBvcnRlZCBmb3Igd2ViMyBjYWxscywgYW5kCiAgLy8vICBub3QgY29udHJhY3QtdG8tY29udHJhY3QgY2FsbHMuCiAgZnVuY3Rpb24gdG9rZW5zT2ZPd25lcihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2W10gb3duZXJUb2tlbnMpIHsKICAgIHVpbnQyNTYgdG9rZW5Db3VudCA9IGJhbGFuY2VPZihfb3duZXIpOwogICAgaWYgKHRva2VuQ291bnQgPT0gMCkgewogICAgICAgIC8vIFJldHVybiBhbiBlbXB0eSBhcnJheQogICAgICByZXR1cm4gbmV3IHVpbnQyNTZbXSgwKTsKICAgIH0gZWxzZSB7CiAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXSh0b2tlbkNvdW50KTsKICAgICAgdWludDI1NiB0b3RhbHNjZW5lcyA9IHRvdGFsU3VwcGx5KCk7CiAgICAgIHVpbnQyNTYgcmVzdWx0SW5kZXggPSAwOwoKICAgICAgdWludDI1NiBzY2VuZUlkOwogICAgICBmb3IgKHNjZW5lSWQgPSAwOyBzY2VuZUlkIDw9IHRvdGFsc2NlbmVzOyBzY2VuZUlkKyspIHsKICAgICAgICBpZiAoc2NlbmVJbmRleFRvT3duZXJbc2NlbmVJZF0gPT0gX293bmVyKSB7CiAgICAgICAgICByZXN1bHRbcmVzdWx0SW5kZXhdID0gc2NlbmVJZDsKICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfQoKICAvLy8gRm9yIHF1ZXJ5aW5nIHRvdGFsU3VwcGx5IG9mIHRva2VuCiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpIHsKICAgIHJldHVybiBzY2VuZXMubGVuZ3RoOwogIH0KCiAgLy8vIE93bmVyIGluaXRhdGVzIHRoZSB0cmFuc2ZlciBvZiB0aGUgdG9rZW4gdG8gYW5vdGhlciBhY2NvdW50CiAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgZm9yIHRoZSB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZCB0by4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gdHJhbnNmZXIoCiAgICBhZGRyZXNzIF90bywKICAgIHVpbnQyNTYgX3Rva2VuSWQKICApIHB1YmxpYyB7CiAgICByZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChfdG8pKTsKCiAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvLy8gVGhpcmQtcGFydHkgaW5pdGlhdGVzIHRyYW5zZmVyIG9mIHRva2VuIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3MgZm9yIHRoZSB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZCBmcm9tLgogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgdG8uCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgSUQgb2YgdGhlIFRva2VuIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGlmIHRoaXMgY2FsbCBzdWNjZWVkcy4KICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgKICAgIGFkZHJlc3MgX2Zyb20sCiAgICBhZGRyZXNzIF90bywKICAgIHVpbnQyNTYgX3Rva2VuSWQKICApIHB1YmxpYyB7CiAgICByZXF1aXJlKF9vd25zKF9mcm9tLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYXBwcm92ZWQoX3RvLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CgogICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICB9CgogIC8qKiogUFJJVkFURSBGVU5DVElPTlMgKioqLwogIC8vLyBTYWZldHkgY2hlY2sgb24gX3RvIGFkZHJlc3MgdG8gcHJldmVudCBhZ2FpbnN0IGFuIHVuZXhwZWN0ZWQgMHgwIGRlZmF1bHQuCiAgZnVuY3Rpb24gX2FkZHJlc3NOb3ROdWxsKGFkZHJlc3MgX3RvKSBwcml2YXRlIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIF90byAhPSBhZGRyZXNzKDApOwogIH0KCiAgLy8vIEZvciBjaGVja2luZyBhcHByb3ZhbCBvZiB0cmFuc2ZlciBmb3IgYWRkcmVzcyBfdG8KICBmdW5jdGlvbiBfYXBwcm92ZWQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gc2NlbmVJbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdID09IF90bzsKICB9CgogIC8vLyBGb3IgY3JlYXRpbmcgU2NlbmUKICBmdW5jdGlvbiBfY3JlYXRlU2NlbmUoc3RyaW5nIF9uYW1lLCB1aW50W10gX3N0YXJzLGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSkgcHJpdmF0ZSB7CiAgICAvLyBSZXF1aXJlIFN0YXJzIEV4aXN0cwogICAgcmVxdWlyZShfc3RhcnMubGVuZ3RoID4gMCk7CiAgICAKICAgIGZvciAodWludCBpID0gMDsgaSA8IF9zdGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGFkZHJlc3MgX3Bvcm5zdGFyT3duZXI7CiAgICAgICAgKF9wb3Juc3Rhck93bmVyKSA9IHBvcm5zdGFyc0NvbnRyYWN0Lm93bmVyT2YoX3N0YXJzW2ldKTsKICAgICAgICByZXF1aXJlKF9wb3Juc3Rhck93bmVyICE9IGFkZHJlc3MoMCkgfHwgX3Bvcm5zdGFyT3duZXIgIT0gYWRkcmVzcygweDApKTsKICAgIH0KICAgICAgCiAgICBTY2VuZSBtZW1vcnkgX3NjZW5lID0gU2NlbmUoewogICAgICBuYW1lOiBfbmFtZSwKICAgICAgc3RhcnM6IF9zdGFycwogICAgfSk7CiAgICB1aW50MjU2IG5ld1NjZW5lSWQgPSBzY2VuZXMucHVzaChfc2NlbmUpIC0gMTsKCiAgICAvLyBJdCdzIHByb2JhYmx5IG5ldmVyIGdvaW5nIHRvIGhhcHBlbiwgNCBiaWxsaW9uIHRva2VucyBhcmUgQSBMT1QsIGJ1dAogICAgLy8gbGV0J3MganVzdCBiZSAxMDAlIHN1cmUgd2UgbmV2ZXIgbGV0IHRoaXMgaGFwcGVuLgogICAgcmVxdWlyZShuZXdTY2VuZUlkID09IHVpbnQyNTYodWludDMyKG5ld1NjZW5lSWQpKSk7CgogICAgQmlydGgobmV3U2NlbmVJZCwgX25hbWUsIF9zdGFycywgX293bmVyKTsKCiAgICBzY2VuZUluZGV4VG9QcmljZVtuZXdTY2VuZUlkXSA9IF9wcmljZTsKCiAgICAvLyBUaGlzIHdpbGwgYXNzaWduIG93bmVyc2hpcCwgYW5kIGFsc28gZW1pdCB0aGUgVHJhbnNmZXIgZXZlbnQgYXMKICAgIC8vIHBlciBFUkM3MjEgZHJhZnQKICAgIF90cmFuc2ZlcihhZGRyZXNzKDApLCBfb3duZXIsIG5ld1NjZW5lSWQpOwogIH0KCiAgLy8vIENoZWNrIGZvciB0b2tlbiBvd25lcnNoaXAKICBmdW5jdGlvbiBfb3ducyhhZGRyZXNzIGNsYWltYW50LCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIGNsYWltYW50ID09IHNjZW5lSW5kZXhUb093bmVyW190b2tlbklkXTsKICB9CgogIC8vLyBGb3IgcGF5aW5nIG91dCBiYWxhbmNlIG9uIGNvbnRyYWN0CiAgZnVuY3Rpb24gX3BheW91dChhZGRyZXNzIF90bykgcHJpdmF0ZSB7CiAgICBpZiAoX3RvID09IGFkZHJlc3MoMCkpIHsKICAgICAgY2VvQWRkcmVzcy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfSBlbHNlIHsKICAgICAgX3RvLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CiAgfQoKICAvLy8gQGRldiBBc3NpZ25zIG93bmVyc2hpcCBvZiBhIHNwZWNpZmljIFNjZW5lIHRvIGFuIGFkZHJlc3MuCiAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHsKICAgIC8vIFNpbmNlIHRoZSBudW1iZXIgb2Ygc2NlbmVzIGlzIGNhcHBlZCB0byAyXjMyIHdlIGNhbid0IG92ZXJmbG93IHRoaXMKICAgIG93bmVyc2hpcFRva2VuQ291bnRbX3RvXSsrOwogICAgLy90cmFuc2ZlciBvd25lcnNoaXAKICAgIHNjZW5lSW5kZXhUb093bmVyW190b2tlbklkXSA9IF90bzsKCiAgICAvLyBXaGVuIGNyZWF0aW5nIG5ldyBzY2VuZXMgX2Zyb20gaXMgMHgwLCBidXQgd2UgY2FuJ3QgYWNjb3VudCB0aGF0IGFkZHJlc3MuCiAgICBpZiAoX2Zyb20gIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lcnNoaXBUb2tlbkNvdW50W19mcm9tXS0tOwogICAgICAvLyBjbGVhciBhbnkgcHJldmlvdXNseSBhcHByb3ZlZCBvd25lcnNoaXAgZXhjaGFuZ2UKICAgICAgZGVsZXRlIHNjZW5lSW5kZXhUb0FwcHJvdmVkW190b2tlbklkXTsKICAgIH0KCiAgICAvLyBFbWl0IHRoZSB0cmFuc2ZlciBldmVudC4KICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICB9Cn0KCmNvbnRyYWN0IENyeXB0b1Bvcm5zdGFyQXdhcmQgaXMgUG9yblNjZW5lVG9rZW57CiAgICBldmVudCBBd2FyZCh1aW50MjU2IGN1cnJlbnRBd2FyZFdpbm5lciwgdWludDMyIGF3YXJkVGltZSk7CiAgICAKICAgIHVpbnQgbm9uY2UgPSAwOwogICAgdWludCBjb29sZG93blRpbWUgPSA2MDsKICAgIHVpbnQzMiBhd2FyZFRpbWUgPSB1aW50MzIobm93KTsKICAgIAogICAgZnVuY3Rpb24gX3RyaWdnZXJDb29sZG93bigpIGludGVybmFsIHsKICAgICAgICBhd2FyZFRpbWUgPSB1aW50MzIobm93ICsgY29vbGRvd25UaW1lKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gX2lzVGltZSgpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAoYXdhcmRUaW1lIDw9IG5vdyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJhbmQodWludCBtaW4sIHVpbnQgbWF4KSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgbm9uY2UrKzsKICAgICAgICByZXR1cm4gdWludChrZWNjYWsyNTYobm9uY2UpKSUobWluK21heCktbWluOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldENvb2xkb3duKHVpbnQgX25ld0Nvb2xkb3duKSBwdWJsaWMgb25seUNPTyB7CiAgICAgICAgcmVxdWlyZSAoX25ld0Nvb2xkb3duID4gMCk7CiAgICAgICAgY29vbGRvd25UaW1lID0gX25ld0Nvb2xkb3duOwogICAgICAgIF90cmlnZ2VyQ29vbGRvd24oKTsKICAgIH0gCiAgICAKICAgIGZ1bmN0aW9uIGdldEF3YXJkVGltZSAoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MzIpIHsKICAgICAgICByZXR1cm4gYXdhcmRUaW1lOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRDb29sZG93biAoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGNvb2xkb3duVGltZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gbmV3QXdhcmQoKSBwdWJsaWMgb25seUNPTyB7ICAgICAgICAKICAgICAgICB1aW50MjU2IF90b3RhbFBvcm5zdGFyczsKICAgICAgICAoX3RvdGFsUG9ybnN0YXJzKSA9IHBvcm5zdGFyc0NvbnRyYWN0LnRvdGFsU3VwcGx5KCk7CiAgICAgICAgCiAgICAgICAgcmVxdWlyZShfdG90YWxQb3Juc3RhcnMgPiAwKTsKICAgICAgICByZXF1aXJlKF9pc1RpbWUoKSk7CiAgICAgICAgCiAgICAgICAgY3VycmVudEF3YXJkV2lubmVyID0gcmFuZCgwLCBfdG90YWxQb3Juc3RhcnMpOwogICAgICAgIF90cmlnZ2VyQ29vbGRvd24oKTsKICAgICAgICAKICAgICAgICBBd2FyZChjdXJyZW50QXdhcmRXaW5uZXIsIGF3YXJkVGltZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRBd2FyZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpewogICAgICAgIHJldHVybiBjdXJyZW50QXdhcmRXaW5uZXI7CiAgICB9CiAgCn0KCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9'.
	

]
