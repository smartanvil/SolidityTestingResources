Class {
	#name : #SRTbd2ed3e85faa3433c068c7b3f9c8c7d839ce88d7,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbd2ed3e85faa3433c068c7b3f9c8c7d839ce88d7 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBDbGFpbWFibGUKICogQGRldiBFeHRlbnNpb24gZm9yIHRoZSBPd25hYmxlIGNvbnRyYWN0LCB3aGVyZSB0aGUgb3duZXJzaGlwIG5lZWRzIHRvIGJlIGNsYWltZWQuCiAqIFRoaXMgYWxsb3dzIHRoZSBuZXcgb3duZXIgdG8gYWNjZXB0IHRoZSB0cmFuc2Zlci4KICovCmNvbnRyYWN0IENsYWltYWJsZSBpcyBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBwZW5kaW5nT3duZXI7CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBwZW5kaW5nT3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seVBlbmRpbmdPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBwZW5kaW5nT3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHNldCB0aGUgcGVuZGluZ093bmVyIGFkZHJlc3MuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgcGVuZGluZ093bmVyID0gbmV3T3duZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgcGVuZGluZ093bmVyIGFkZHJlc3MgdG8gZmluYWxpemUgdGhlIHRyYW5zZmVyLgogICAqLwogIGZ1bmN0aW9uIGNsYWltT3duZXJzaGlwKCkgb25seVBlbmRpbmdPd25lciB7CiAgICBvd25lciA9IHBlbmRpbmdPd25lcjsKICAgIHBlbmRpbmdPd25lciA9IDB4MDsKICB9Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKCgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCiAgLyoqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKi8KICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgfSBlbHNlIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICB9CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKfQoKCi8qKgogKiBAdGl0bGUgTWludGFibGUgdG9rZW4KICogQGRldiBTaW1wbGUgRVJDMjAgVG9rZW4gZXhhbXBsZSwgd2l0aCBtaW50YWJsZSB0b2tlbiBjcmVhdGlvbgogKiBAZGV2IElzc3VlOiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvaXNzdWVzLzEyMAogKiBCYXNlZCBvbiBjb2RlIGJ5IFRva2VuTWFya2V0TmV0OiBodHRwczovL2dpdGh1Yi5jb20vVG9rZW5NYXJrZXROZXQvaWNvL2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9NaW50YWJsZVRva2VuLnNvbAogKi8KCmNvbnRyYWN0IE1pbnRhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CiAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBNaW50RmluaXNoZWQoKTsKCiAgYm9vbCBwdWJsaWMgbWludGluZ0ZpbmlzaGVkID0gZmFsc2U7CgoKICBtb2RpZmllciBjYW5NaW50KCkgewogICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIG1pbnQgdG9rZW5zCiAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgbWludGVkIHRva2Vucy4KICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAqIEByZXR1cm4gQSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgY2FuTWludCByZXR1cm5zIChib29sKSB7CiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgIE1pbnQoX3RvLCBfYW1vdW50KTsKICAgIFRyYW5zZmVyKDB4MCwgX3RvLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBzdG9wIG1pbnRpbmcgbmV3IHRva2Vucy4KICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICBNaW50RmluaXNoZWQoKTsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKLyoKKiBIb3Jpem9uIFN0YXRlIERlY2lzaW9uIFRva2VuIENvbnRyYWN0CioKKiBWZXJzaW9uIDAuOQoqCiogQXV0aG9yIE5pbW8gTmFhbWFuaQoqCiogVGhpcyBzbWFydCBjb250cmFjdCBjb2RlIGlzIENvcHlyaWdodCAyMDE3IEhvcml6b24gU3RhdGUgKGh0dHBzOi8vSG9yaXpvbnN0YXRlLmNvbSkKKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgdmVyc2lvbiAyLjA6IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogQHRpdGxlIEhvcml6b24gU3RhdGUgVG9rZW4KKiBAZGV2IEVSQzIwIERlY2lzaW9uIFRva2VuIChIU1QpCiogQGF1dGhvciBOaW1vIE5hYW1hbmkKKgoqIEhTVCB0b2tlbnMgaGF2ZSAxOCBkZWNpbWFsIHBsYWNlcy4gVGhlIHNtYWxsZXN0IG1lYW5pbmdmdWwgKGFuZCB0cmFuc2ZlcmFibGUpCiogdW5pdCBpcyB0aGVyZWZvcmUgMC4wMDAwMDAwMDAwMDAwMDAwMDEgSFNULiBUaGlzIHVuaXQgaXMgY2FsbGVkIGEgJ2Rhbm5pJy4KKgoqIDEgSFNUID0gMSAqIDEwKioxOCA9IDEwMDAwMDAwMDAwMDAwMDAwMDAgZGFubmlzLgoqCiogTWF4aW11bSB0b3RhbCBIU1Qgc3VwcGx5IGlzIDEgQmlsbGlvbi4KKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gMTAwMDAwMDAwMCAqIDEwKioxOCA9IDFlMjcgZGFubmlzLgoqCiogSFNUIGFyZSBtaW50YWJsZSBvbiBkZW1hbmQgKGFzIHRoZXkgYXJlIGJlaW5nIHB1cmNoYXNlZCksIHdoaWNoIG1lYW5zIHRoYXQKKiAxIEJpbGxpb24gaXMgdGhlIG1heGltdW0uCiovCgovLyBAdGl0bGUgVGhlIEhvcml6b24gU3RhdGUgRGVjaXNpb24gVG9rZW4gKEhTVCkKY29udHJhY3QgRGVjaXNpb25Ub2tlbiBpcyBNaW50YWJsZVRva2VuLCBDbGFpbWFibGUgewoKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgLy8gTmFtZSB0byBhcHBlYXIgaW4gRVJDMjAgd2FsbGV0cwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJEZWNpc2lvbiBUb2tlbiI7CgogIC8vIFN5bWJvbCBmb3IgdGhlIERlY2lzaW9uIFRva2VuIHRvIGFwcGVhciBpbiBFUkMyMCB3YWxsZXRzCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiSFNUIjsKCiAgLy8gVmVyc2lvbiBvZiB0aGUgc291cmNlIGNvbnRyYWN0CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCB2ZXJzaW9uID0gIjEuMCI7CgogIC8vIE51bWJlciBvZiBkZWNpbWFscyBmb3IgdG9rZW4gZGlzcGxheQogIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAvLyBSZWxlYXNlIHRpbWVzdGFtcC4gQXMgcGFydCBvZiB0aGUgY29udHJhY3QsIHRva2VucyBjYW4gb25seSBiZSB0cmFuc2ZlcmVkCiAgLy8gMTAgZGF5cyBhZnRlciB0aGlzIHRyaWdnZXIgaXMgc2V0CiAgdWludDI1NiBwdWJsaWMgdHJpZ2dlclRpbWUgPSAwOwoKICAvLyBAdGl0bGUgbW9kaWZpZXIgdG8gYWxsb3cgYWN0aW9ucyBvbmx5IHdoZW4gdGhlIHRva2VuIGNhbiBiZSByZWxlYXNlZAogIG1vZGlmaWVyIG9ubHlXaGVuUmVsZWFzZWQoKSB7CiAgICByZXF1aXJlKG5vdyA+PSB0cmlnZ2VyVGltZSk7CiAgICBfOwogIH0KCgogIC8vIEBkZXYgQ29uc3RydWN0b3IgZm9yIHRoZSBEZWNpc2lvblRva2VuLgogIC8vIEluaXRpYWxpc2UgdGhlIHRyaWdnZXIgKHRoZSBzYWxlIGNvbnRyYWN0IHdpbGwgaW5pdCB0aGlzIHRvIHRoZSBleHBlY3RlZCBlbmQgdGltZSkKICBmdW5jdGlvbiBEZWNpc2lvblRva2VuKCkgTWludGFibGVUb2tlbigpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8vIEB0aXRsZSBUcmFuc2ZlciB0b2tlbnMuCiAgLy8gQGRldiBUaGlzIGNvbnRyYWN0IG92ZXJyaWRlcyB0aGUgdHJhbnNmZXIoKSBmdW5jdGlvbiB0byBvbmx5IHdvcmsgd2hlbiByZWxlYXNlZAogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVdoZW5SZWxlYXNlZCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogIH0KCiAgLy8gQHRpdGxlIEFsbG93IHRyYW5zZmVycyBmcm9tCiAgLy8gQGRldiBUaGlzIGNvbnRyYWN0IG92ZXJyaWRlcyB0aGUgdHJhbnNmZXJGcm9tKCkgZnVuY3Rpb24gdG8gb25seSB3b3JrIHdoZW4gcmVsZWFzZWQKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5V2hlblJlbGVhc2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9CgogIC8vIEB0aXRsZSBmaW5pc2ggbWludGluZyBvZiB0aGUgdG9rZW4uCiAgLy8gQGRldiBUaGlzIGNvbnRyYWN0IG92ZXJyaWRlcyB0aGUgZmluaXNoTWludGluZyBmdW5jdGlvbiB0byB0cmlnZ2VyIHRoZSB0b2tlbiBsb2NrIGNvdW50ZG93bgogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZSh0cmlnZ2VyVGltZT09MCk7CiAgICB0cmlnZ2VyVGltZSA9IG5vdy5hZGQoMTAgZGF5cyk7CiAgICByZXR1cm4gc3VwZXIuZmluaXNoTWludGluZygpOwogIH0KfQoKLyoqCiogSG9yaXpvbiBTdGF0ZSBUb2tlbiBTYWxlIENvbnRyYWN0CioKKiBWZXJzaW9uIDAuOQoqCiogQGF1dGhvciBOaW1vIE5hYW1hbmkKKgoqIFRoaXMgc21hcnQgY29udHJhY3QgY29kZSBpcyBDb3B5cmlnaHQgMjAxNyBIb3Jpem9uIFN0YXRlIChodHRwczovL0hvcml6b25zdGF0ZS5jb20pCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIHZlcnNpb24gMi4wOiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqLwoKLy8gQHRpdGxlIFRoZSBEQyBUb2tlbiBTYWxlIGNvbnRyYWN0Ci8vIEBkZXYgQSBjcm93ZHNhbGUgY29udHJhY3Qgd2l0aCBzdGFnZXMgb2YgdG9rZW5zLXBlci1ldGggYmFzZWQgb24gdGltZSBlbGFwc2VkCi8vIENhcHBlZCBieSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnM7IFRpbWUgY29uc3RyYWluZWQKY29udHJhY3QgRGVjaXNpb25Ub2tlblNhbGUgaXMgQ2xhaW1hYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgLy8gU3RhcnQgdGltZXN0YW1wIHdoZXJlIGludmVzdG1lbnRzIGFyZSBvcGVuIHRvIHRoZSBwdWJsaWMuCiAgLy8gQmVmb3JlIHRoaXMgdGltZXN0YW1wIC0gb25seSB3aGl0ZWxpc3RlZCBhZGRyZXNzZXMgYWxsb3dlZCB0byBidXkuCiAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lOwoKICAvLyBFbmQgdGltZS4gaW52ZXN0bWVudHMgY2FuIG9ubHkgZ28gdXAgdG8gdGhpcyB0aW1lc3RhbXAuCiAgLy8gTm90ZSB0aGF0IHRoZSBzYWxlIGNhbiBlbmQgYmVmb3JlIHRoYXQsIGlmIHRoZSB0b2tlbiBjYXAgaXMgcmVhY2hlZC4KICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOwoKICAvLyBQcmVzYWxlICh3aGl0ZWxpc3Qgb25seSkgYnV5ZXJzIHJlY2VpdmUgdGhpcyBtYW55IHRva2VucyBwZXIgRVRICiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgcHJlc2FsZVRva2VuUmF0ZSA9IDM3NTA7CgogIC8vIDFzdCBkYXkgYnV5ZXJzIHJlY2VpdmUgdGhpcyBtYW55IHRva2VucyBwZXIgRVRICiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZWFybHlCaXJkVG9rZW5SYXRlID0gMzUwMDsKCiAgLy8gRGF5IDItOCBidXllcnMgcmVjZWl2ZSB0aGlzIG1hbnkgdG9rZW5zIHBlciBFVEgKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBzZWNvbmRTdGFnZVRva2VuUmF0ZSA9IDMyNTA7CgogIC8vIERheSA5LTE2IGJ1eWVycyByZWNlaXZlIHRoaXMgbWFueSB0b2tlbnMgcGVyIEVUSAogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRoaXJkU3RhZ2VUb2tlblJhdGUgPSAzMDAwOwoKICAvLyBNYXhpbXVtIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgZXZlciBjcmVhdGVkLCB0YWtpbmcgaW50byBhY2NvdW50IDE4IGRlY2ltYWxzLgogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuQ2FwID0gIDEwKio5ICogMTAqKjE4OwoKICAvLyBJbml0aWFsIEhvcml6b25TdGF0ZSBhbGxvY2F0aW9uIChyZXNlcnZlKSwgdGFraW5nIGludG8gYWNjb3VudCAxOCBkZWNpbWFscy4KICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlblJlc2VydmUgPSA0ICogKDEwKio4KSAqIDEwKioxODsKCiAgLy8gVGhlIERlY2lzaW9uIFRva2VuIHRoYXQgaXMgc29sZCB3aXRoIHRoaXMgdG9rZW4gc2FsZQogIERlY2lzaW9uVG9rZW4gcHVibGljIHRva2VuOwoKICAvLyBUaGUgYWRkcmVzcyB3aGVyZSB0aGUgZnVuZHMgYXJlIGtlcHQKICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CgogIC8vIEhvbGRzIHRoZSBhZGRyZXNzZXMgdGhhdCBhcmUgd2hpdGVsaXN0ZWQgdG8gcGFydGljaXBhdGUgaW4gdGhlIHByZXNhbGUuCiAgLy8gU2FsZXMgdG8gdGhlc2UgYWRkcmVzc2VzIGFyZSBhbGxvd2VkIGJlZm9yZSBzYWxlU3RhcnQKICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHdoaXRlTGlzdGVkRm9yUHJlc2FsZTsKCiAgLy8gQHRpdGxlIEV2ZW50IGZvciB0b2tlbiBwdXJjaGFzZSBsb2dnaW5nCiAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFtb3VudCk7CgogIC8vIEB0aXRsZSBFdmVudCB0byBsb2cgdXNlciBhZGRlZCB0byB3aGl0ZWxpc3QKICBldmVudCBMb2dVc2VyQWRkZWRUb1doaXRlTGlzdChhZGRyZXNzIGluZGV4ZWQgdXNlcik7CgogIC8vQHRpdGxlIEV2ZW50IHRvIGxvZyB1c2VyIHJlbW92ZWQgZnJvbSB3aGl0ZWxpc3QKICBldmVudCBMb2dVc2VyVXNlclJlbW92ZWRGcm9tV2hpdGVMaXN0KGFkZHJlc3MgaW5kZXhlZCB1c2VyKTsKCgogIC8vIEB0aXRsZSBDb25zdHJ1Y3RvcgogIC8vIEBwYXJhbSBfc3RhcnRUaW1lOiBBIHRpbWVzdGFtcCBmb3Igd2hlbiB0aGUgc2FsZSBpcyB0byBzdGFydC4KICAvLyBAcGFyYW0gX3dhbGxldCAtIFRoZSB3YWxsZXQgd2hlcmUgdGhlIHRva2VuIHNhbGUgcHJvY2VlZHMgYXJlIHRvIGJlIHN0b3JlZAogIGZ1bmN0aW9uIERlY2lzaW9uVG9rZW5TYWxlKHVpbnQyNTYgX3N0YXJ0VGltZSwgYWRkcmVzcyBfd2FsbGV0KSB7CiAgICByZXF1aXJlKF9zdGFydFRpbWUgPj0gbm93KTsKICAgIHJlcXVpcmUoX3dhbGxldCAhPSAweDApOwogICAgc3RhcnRUaW1lID0gX3N0YXJ0VGltZTsKICAgIGVuZFRpbWUgPSBzdGFydFRpbWUuYWRkKDE0IGRheXMpOwogICAgd2FsbGV0ID0gX3dhbGxldDsKCiAgICAvLyBDcmVhdGUgdGhlIHRva2VuIGNvbnRyYWN0IGl0c2VsZi4KICAgIHRva2VuID0gY3JlYXRlVG9rZW5Db250cmFjdCgpOwoKICAgIC8vIE1pbnQgdGhlIHJlc2VydmUgdG9rZW5zIHRvIHRoZSBvd25lciBvZiB0aGUgc2FsZSBjb250cmFjdC4KICAgIHRva2VuLm1pbnQob3duZXIsIHRva2VuUmVzZXJ2ZSk7CiAgfQoKICAvLyBAdGl0bGUgQ3JlYXRlIHRoZSB0b2tlbiBjb250cmFjdCBmcm9tIHRoaXMgc2FsZQogIC8vIEBkZXYgQ3JlYXRlcyB0aGUgY29udHJhY3QgZm9yIHRva2VuIHRvIGJlIHNvbGQuCiAgZnVuY3Rpb24gY3JlYXRlVG9rZW5Db250cmFjdCgpIGludGVybmFsIHJldHVybnMgKERlY2lzaW9uVG9rZW4pIHsKICAgIHJldHVybiBuZXcgRGVjaXNpb25Ub2tlbigpOwogIH0KCiAgLy8gQHRpdGxlIEJ1eSBEZWNpc2lvbiBUb2tlbnMKICAvLyBAZGV2IFVzZSB0aGlzIGZ1bmN0aW9uIHRvIGJ1eSB0b2tlbnMgdGhyb3VnaCB0aGUgc2FsZQogIGZ1bmN0aW9uIGJ1eVRva2VucygpIHBheWFibGUgewogICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IDB4MCk7CiAgICByZXF1aXJlKG1zZy52YWx1ZSAhPSAwKTsKICAgIHJlcXVpcmUod2hpdGVMaXN0ZWRGb3JQcmVzYWxlW21zZy5zZW5kZXJdIHx8IG5vdyA+PSBzdGFydFRpbWUpOwogICAgcmVxdWlyZSghaGFzRW5kZWQoKSk7CgogICAgLy8gQ2FsY3VsYXRlIHRva2VuIGFtb3VudCB0byBiZSBjcmVhdGVkCiAgICB1aW50MjU2IHRva2VucyA9IGNhbGN1bGF0ZVRva2VuQW1vdW50KG1zZy52YWx1ZSk7CgogICAgaWYgKHRva2VuLnRvdGFsU3VwcGx5KCkuYWRkKHRva2VucykgPiB0b2tlbkNhcCkgewogICAgICByZXZlcnQoKTsKICAgIH0KCiAgICAvLyBBZGQgdGhlIG5ldyB0b2tlbnMgdG8gdGhlIGJlbmVmaWNpYXJ5CiAgICB0b2tlbi5taW50KG1zZy5zZW5kZXIsIHRva2Vucyk7CgogICAgLy8gTm90aWZ5IHRoYXQgYSB0b2tlbiBwdXJjaGFzZSB3YXMgcGVyZm9ybWVkCiAgICBUb2tlblB1cmNoYXNlKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSwgdG9rZW5zKTsKCiAgICAvLyBQdXQgdGhlIGZ1bmRzIGluIHRoZSB0b2tlbiBzYWxlIHdhbGxldAogICAgd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgfQoKICAvLyBAZGV2IFRoaXMgaXMgZmFsbGJhY2sgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYnV5IHRva2VucwogIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgYnV5VG9rZW5zKCk7CiAgfQoKICAvLyBAdGl0bGUgQ2FsY3VsYXRlIGhvdyBtYW55IHRva2VucyBwZXIgRXRoZXIKICAvLyBUaGUgdG9rZW4gc2FsZSBoYXMgZGlmZmVyZW50IHJhdGVzIGJhc2VkIG9uIHRpbWUgb2YgcHVyY2hhc2UsIGFzIHBlciB0aGUgdG9rZW4KICAvLyBzYWxlIHdoaXRlcGFwZXIgYW5kIEhvcml6b24gU3RhdGUncyBUb2tlbiBTYWxlIHBhZ2UuCiAgLy8gUHJlc2FsZTogIDogMzc1MCB0b2tlbnMgcGVyIEV0aGVyCiAgLy8gRGF5IDEgICAgIDogMzUwMCB0b2tlbnMgcGVyIEV0aGVyCiAgLy8gRGF5cyAyLTggIDogMzI1MCB0b2tlbnMgcGVyIEV0aGVyCiAgLy8gRGF5cyA5LTE2IDogMzAwMCB0b2tlbnMgcGVyIEV0aGVyCiAgLy8KICAvLyBBIG5vdGUgZm9yIGNhbGN1bGF0aW9uOiBBcyB0aGUgbnVtYmVyIG9mIGRlY2ltYWxzIG9uIHRoZSB0b2tlbiBpcyAxOCwgd2hpY2gKICAvLyBpcyBpZGVudGljYWwgdG8gdGhlIHdlaSBwZXIgZXRoIC0gdGhlIGNhbGN1bGF0aW9uIHBlcmZvcm1lZCBoZXJlIGNhbiB1c2UgdGhlCiAgLy8gbnVtYmVyIG9mIHRva2VucyBwZXIgRVRIIHdpdGggbm8gZnVydGhlciBtb2RpZmljYXRpb24uCiAgLy8KICAvLyBAcGFyYW0gX3dlaUFtb3VudCA6IEhvdyBtdWNoIHdlaSB0aGUgYnV5ZXIgd2FudHMgdG8gc3BlbmQgb24gdG9rZW5zCiAgLy8gQHJldHVybiB0aGUgbnVtYmVyIG9mIHRva2VucyBmb3IgdGhpcyBwdXJjaGFzZS4KICBmdW5jdGlvbiBjYWxjdWxhdGVUb2tlbkFtb3VudCh1aW50MjU2IF93ZWlBbW91bnQpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChub3cgPj0gc3RhcnRUaW1lICsgOCBkYXlzKSB7CiAgICAgIHJldHVybiBfd2VpQW1vdW50Lm11bCh0aGlyZFN0YWdlVG9rZW5SYXRlKTsKICAgIH0KICAgIGlmIChub3cgPj0gc3RhcnRUaW1lICsgMSBkYXlzKSB7CiAgICAgIHJldHVybiBfd2VpQW1vdW50Lm11bChzZWNvbmRTdGFnZVRva2VuUmF0ZSk7CiAgICB9CiAgICBpZiAobm93ID49IHN0YXJ0VGltZSkgewogICAgICByZXR1cm4gX3dlaUFtb3VudC5tdWwoZWFybHlCaXJkVG9rZW5SYXRlKTsKICAgIH0KICAgIHJldHVybiBfd2VpQW1vdW50Lm11bChwcmVzYWxlVG9rZW5SYXRlKTsKICB9CgogIC8vIEB0aXRsZSBDaGVjayB3aGV0aGVyIHRoaXMgc2FsZSBoYXMgZW5kZWQuCiAgLy8gQGRldiBUaGlzIGlzIGEgdXRpbGl0eSBmdW5jdGlvbiB0byBoZWxwIGNvbnN1bWVycyBmaWd1cmUgb3V0IHdoZXRoZXIgdGhlIHNhbGUKICAvLyBoYXMgYWxyZWFkeSBlbmRlZC4KICAvLyBUaGUgc2FsZSBpcyBjb25zaWRlcmVkIGRvbmUgd2hlbiB0aGUgdG9rZW4ncyBtaW50aW5nIGZpbmlzaGVkLCBvciB3aGVuIHRoZSBjdXJyZW50CiAgLy8gdGltZSBoYXMgcGFzc2VkIHRoZSBzYWxlJ3MgZW5kIHRpbWUKICAvLyBAcmV0dXJuIHRydWUgaWYgY3Jvd2RzYWxlIGV2ZW50IGhhcyBlbmRlZAogIGZ1bmN0aW9uIGhhc0VuZGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBub3cgPiBlbmRUaW1lOwogIH0KCiAgLy8gQHRpdGxlIFdoaXRlIGxpc3QgYSBidXllciBmb3IgdGhlIHByZXNhbGUuCiAgLy8gQGRldiBBbGxvdyB0aGUgb3duZXIgb2YgdGhpcyBjb250cmFjdCB0byB3aGl0ZWxpc3QgYSBidXllci4KICAvLyBXaGl0ZWxpc3RlZCBidXllcnMgbWF5IGJ1eSBpbiB0aGUgcHJlc2FsZSwgaS5lIGJlZm9yZSB0aGUgc2FsZSBzdGFydHMuCiAgLy8gQHBhcmFtIF9idXllciA6IFRoZSBidXllciBhZGRyZXNzIHRvIHdoaXRlbGlzdAogIGZ1bmN0aW9uIHdoaXRlTGlzdEFkZHJlc3MoYWRkcmVzcyBfYnV5ZXIpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKF9idXllciAhPSAweDApOwogICAgd2hpdGVMaXN0ZWRGb3JQcmVzYWxlW19idXllcl0gPSB0cnVlOwogICAgTG9nVXNlckFkZGVkVG9XaGl0ZUxpc3QoX2J1eWVyKTsKICB9CgogIC8vIEB0aXRsZSBXaGl0ZWxpc3QgYW4gbGlzdCBvZiBidXllcnMgZm9yIHRoZSBwcmVzYWxlCiAgLy8gQGRldiBBbGxvdyB0aGUgb3duZXIgb2YgdGhpcyBjb250cmFjdCB0byB3aGl0ZWxpc3QgbXVsdGlwbGUgYnV5ZXJzIGluIGJhdGNoLgogIC8vIFdoaXRlbGlzdGVkIGJ1eWVycyBtYXkgYnV5IGluIHRoZSBwcmVzYWxlLCBpLmUgYmVmb3JlIHRoZSBzYWxlIHN0YXJ0cy4KICAvLyBAcGFyYW0gX2J1eWVycyA6IFRoZSBidXllciBhZGRyZXNzZXMgdG8gd2hpdGVsaXN0CiAgZnVuY3Rpb24gYWRkV2hpdGVMaXN0ZWRBZGRyZXNzZXNJbkJhdGNoKGFkZHJlc3NbXSBfYnV5ZXJzKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShfYnV5ZXJzLmxlbmd0aCA8IDEwMDApOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX2J1eWVycy5sZW5ndGg7IGkrKykgewogICAgICB3aGl0ZUxpc3RBZGRyZXNzKF9idXllcnNbaV0pOwogICAgfQogIH0KCiAgLy8gQHRpdGxlIFJlbW92ZSBhIGJ1eWVyIGZyb20gdGhlIHdoaXRlbGlzdC4KICAvLyBAZGV2IEFsbG93IHRoZSBvd25lciBvZiB0aGlzIGNvbnRyYWN0IHRvIHJlbW92ZSBhIGJ1eWVyIGZyb20gdGhlIHdoaXRlIGxpc3QuCiAgLy8gQHBhcmFtIF9idXllciA6IFRoZSBidXllciBhZGRyZXNzIHRvIHJlbW92ZSBmcm9tIHRoZSB3aGl0ZWxpc3QKICBmdW5jdGlvbiByZW1vdmVXaGl0ZUxpc3RlZEFkZHJlc3MoYWRkcmVzcyBfYnV5ZXIpIG9ubHlPd25lciB7CiAgICB3aGl0ZUxpc3RlZEZvclByZXNhbGVbX2J1eWVyXSA9IGZhbHNlOwogIH0KCiAgLy8gQHRpdGxlIFRlcm1pbmF0ZSB0aGUgY29udHJhY3QKICAvLyBAZGV2IEFsbG93IHRoZSBvd25lciBvZiB0aGlzIGNvbnRyYWN0IHRvIHRlcm1pbmF0ZSBpdAogIC8vIEl0IGFsc28gdHJhbnNmZXJzIHRoZSB0b2tlbiBvd25lcnNoaXAgdG8gdGhlIG93bmVyIG9mIHRoZSBzYWxlIGNvbnRyYWN0LgogIGZ1bmN0aW9uIGRlc3Ryb3koKSBvbmx5T3duZXIgewogICAgdG9rZW4uZmluaXNoTWludGluZygpOwogICAgdG9rZW4udHJhbnNmZXJPd25lcnNoaXAobXNnLnNlbmRlcik7CiAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogIH0KfQ=='.
	

]
