Class {
	#name : #SRTa67d97d75eE175e05BB1FB17529FD772eE8E9030,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa67d97d75eE175e05BB1FB17529FD772eE8E9030 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTA7Cgpjb250cmFjdCBUb2tlbiB7CiAgICAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGFkZHJlc3NlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFkZHJlc3NFeGlzdHM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBhZGRyZXNzSW5kZXg7CiAgICB1aW50MjU2IHB1YmxpYyBudW1iZXJPZkFkZHJlc3MgPSAwOwogICAgCiAgICBzdHJpbmcgcHVibGljIHBoeXNpY2FsU3RyaW5nOwogICAgc3RyaW5nIHB1YmxpYyBjcnlwdG9TdHJpbmc7CiAgICAKICAgIGJvb2wgcHVibGljIGlzU2VjdXJlZDsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBib29sIHB1YmxpYyBjYW5NaW50QnVybjsKICAgIHVpbnQyNTYgcHVibGljIHR4blRheDsKICAgIHVpbnQyNTYgcHVibGljIGhvbGRpbmdUYXg7CiAgICAvL0luIFdlZWtzLCBvbiBGcmlkYXlzCiAgICB1aW50MjU2IHB1YmxpYyBob2xkaW5nVGF4SW50ZXJ2YWw7CiAgICB1aW50MjU2IHB1YmxpYyBsYXN0SG9sZGluZ1RheDsKICAgIHVpbnQyNTYgcHVibGljIGhvbGRpbmdUYXhEZWNpbWFscyA9IDI7CiAgICBib29sIHB1YmxpYyBpc1ByaXZhdGU7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgCiAgICBmdW5jdGlvbiBUb2tlbihzdHJpbmcgbiwgc3RyaW5nIGEsIHVpbnQyNTYgdG90YWxTdXBwbHlUb1VzZSwgYm9vbCBpc1NlY3VyZWQsIGJvb2wgY01CLCBzdHJpbmcgcGh5c2ljYWwsIHN0cmluZyBjcnlwdG8sIHVpbnQyNTYgdHhuVGF4VG9Vc2UsIHVpbnQyNTYgaG9sZGluZ1RheFRvVXNlLCB1aW50MjU2IGhvbGRpbmdUYXhJbnRlcnZhbFRvVXNlLCBib29sIGlzUHJpdmF0ZVRvVXNlKSB7CiAgICAgICAgbmFtZSA9IG47CiAgICAgICAgc3ltYm9sID0gYTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5VG9Vc2U7CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHlUb1VzZTsKICAgICAgICBpc1NlY3VyZWQgPSBpc1NlY3VyZWQ7CiAgICAgICAgcGh5c2ljYWxTdHJpbmcgPSBwaHlzaWNhbDsKICAgICAgICBjcnlwdG9TdHJpbmcgPSBjcnlwdG87CiAgICAgICAgY2FuTWludEJ1cm4gPSBjTUI7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHR4blRheCA9IHR4blRheFRvVXNlOwogICAgICAgIGhvbGRpbmdUYXggPSBob2xkaW5nVGF4VG9Vc2U7CiAgICAgICAgaG9sZGluZ1RheEludGVydmFsID0gaG9sZGluZ1RheEludGVydmFsVG9Vc2U7CiAgICAgICAgaWYoaG9sZGluZ1RheEludGVydmFsIT0wKSB7CiAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4ID0gbm93OwogICAgICAgICAgICB3aGlsZShnZXRIb3VyKGxhc3RIb2xkaW5nVGF4KSE9MjEpIHsKICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IDEgaG91cnM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2hpbGUoZ2V0V2Vla2RheShsYXN0SG9sZGluZ1RheCkhPTUpIHsKICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IDEgZGF5czsKICAgICAgICAgICAgfQogICAgICAgICAgICBsYXN0SG9sZGluZ1RheCAtPSBnZXRNaW51dGUobGFzdEhvbGRpbmdUYXgpICogKDEgbWludXRlcykgKyBnZXRTZWNvbmQobGFzdEhvbGRpbmdUYXgpICogKDEgc2Vjb25kcyk7CiAgICAgICAgfQogICAgICAgIGlzUHJpdmF0ZSA9IGlzUHJpdmF0ZVRvVXNlOwogICAgICAgIAogICAgICAgIGFkZEFkZHJlc3Mob3duZXIpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHBheWFibGUgewogICAgICAgIGNoYXJnZUhvbGRpbmdUYXgoKTsKICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSB0aHJvdzsKICAgICAgICBpZiAoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZbX3RvXSkgdGhyb3c7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIgJiYgX3RvICE9IG93bmVyICYmIHR4blRheCAhPSAwKSB7CiAgICAgICAgICAgIGlmKCFvd25lci5zZW5kKHR4blRheCkpIHsKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmKGlzUHJpdmF0ZSAmJiBtc2cuc2VuZGVyICE9IG93bmVyICYmICFhZGRyZXNzRXhpc3RzW190b10pIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOwogICAgICAgIGFkZEFkZHJlc3MoX3RvKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZVR4blRheCh1aW50MjU2IF9uZXdWYWx1ZSkgewogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIHR4blRheCA9IF9uZXdWYWx1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gbWludCh1aW50MjU2IF92YWx1ZSkgewogICAgICAgIGlmKGNhbk1pbnRCdXJuICYmIG1zZy5zZW5kZXIgPT0gb3duZXIpIHsKICAgICAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSArIF92YWx1ZSA8IGJhbGFuY2VPZlttc2cuc2VuZGVyXSkgdGhyb3c7CiAgICAgICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSArPSBfdmFsdWU7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5ICs9IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIoMCwgbXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHsKICAgICAgICBpZihjYW5NaW50QnVybiAmJiBtc2cuc2VuZGVyID09IG93bmVyKSB7CiAgICAgICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHRocm93OwogICAgICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDAsIF92YWx1ZSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBjaGFyZ2VIb2xkaW5nVGF4KCkgewogICAgICAgIGlmKGhvbGRpbmdUYXhJbnRlcnZhbCE9MCkgewogICAgICAgICAgICB1aW50MjU2IGRhdGVEaWYgPSBub3cgLSBsYXN0SG9sZGluZ1RheDsKICAgICAgICAgICAgYm9vbCBjaGFuZ2VkID0gZmFsc2U7CiAgICAgICAgICAgIHdoaWxlKGRhdGVEaWYgPj0gaG9sZGluZ1RheEludGVydmFsICogKDEgd2Vla3MpKSB7CiAgICAgICAgICAgICAgICBjaGFuZ2VkPXRydWU7CiAgICAgICAgICAgICAgICBkYXRlRGlmIC09IGhvbGRpbmdUYXhJbnRlcnZhbCAqICgxIHdlZWtzKTsKICAgICAgICAgICAgICAgIGZvcih1aW50MjU2IGkgPSAwO2k8bnVtYmVyT2ZBZGRyZXNzO2krKykgewogICAgICAgICAgICAgICAgICAgIGlmKGFkZHJlc3Nlc1tpXSE9b3duZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBhbXRPZlRheFRvUGF5ID0gKChiYWxhbmNlT2ZbYWRkcmVzc2VzW2ldXSkgKiBob2xkaW5nVGF4KSAgLyAoMTAqKmhvbGRpbmdUYXhEZWNpbWFscykvICgxMCoqaG9sZGluZ1RheERlY2ltYWxzKTsKICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZU9mW2FkZHJlc3Nlc1tpXV0gLT0gYW10T2ZUYXhUb1BheTsKICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZU9mW293bmVyXSArPSBhbXRPZlRheFRvUGF5OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZihjaGFuZ2VkKSB7CiAgICAgICAgICAgICAgICBsYXN0SG9sZGluZ1RheCA9IG5vdzsKICAgICAgICAgICAgICAgIHdoaWxlKGdldEhvdXIobGFzdEhvbGRpbmdUYXgpIT0yMSkgewogICAgICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IDEgaG91cnM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB3aGlsZShnZXRXZWVrZGF5KGxhc3RIb2xkaW5nVGF4KSE9NSkgewogICAgICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IDEgZGF5czsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IGdldE1pbnV0ZShsYXN0SG9sZGluZ1RheCkgKiAoMSBtaW51dGVzKSArIGdldFNlY29uZChsYXN0SG9sZGluZ1RheCkgKiAoMSBzZWNvbmRzKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2hhbmdlSG9sZGluZ1RheCh1aW50MjU2IF9uZXdWYWx1ZSkgewogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIGhvbGRpbmdUYXggPSBfbmV3VmFsdWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZUhvbGRpbmdUYXhJbnRlcnZhbCh1aW50MjU2IF9uZXdWYWx1ZSkgewogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIGhvbGRpbmdUYXhJbnRlcnZhbCA9IF9uZXdWYWx1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRkQWRkcmVzcyAoYWRkcmVzcyBhZGRyKSBwcml2YXRlIHsKICAgICAgICBpZighYWRkcmVzc0V4aXN0c1thZGRyXSkgewogICAgICAgICAgICBhZGRyZXNzSW5kZXhbYWRkcl0gPSBudW1iZXJPZkFkZHJlc3M7CiAgICAgICAgICAgIGFkZHJlc3Nlc1tudW1iZXJPZkFkZHJlc3MrK10gPSBhZGRyOwogICAgICAgICAgICBhZGRyZXNzRXhpc3RzW2FkZHJdID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkZEFkZHJlc3NNYW51YWwgKGFkZHJlc3MgYWRkcikgewogICAgICAgIGlmKG1zZy5zZW5kZXIgPT0gb3duZXIgJiYgaXNQcml2YXRlKSB7CiAgICAgICAgICAgIGFkZEFkZHJlc3MoYWRkcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiByZW1vdmVBZGRyZXNzIChhZGRyZXNzIGFkZHIpIHByaXZhdGUgewogICAgICAgIGlmKGFkZHJlc3NFeGlzdHNbYWRkcl0pIHsKICAgICAgICAgICAgbnVtYmVyT2ZBZGRyZXNzLS07CiAgICAgICAgICAgIGFkZHJlc3Nlc1thZGRyZXNzSW5kZXhbYWRkcl1dID0gMHgwOwogICAgICAgICAgICBhZGRyZXNzRXhpc3RzW2FkZHJdID0gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiByZW1vdmVBZGRyZXNzTWFudWFsIChhZGRyZXNzIGFkZHIpIHsKICAgICAgICBpZihtc2cuc2VuZGVyID09IG93bmVyICYmIGlzUHJpdmF0ZSkgewogICAgICAgICAgICByZW1vdmVBZGRyZXNzKGFkZHIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0V2Vla2RheSh1aW50IHRpbWVzdGFtcCkgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgICAgcmV0dXJuIHVpbnQ4KCh0aW1lc3RhbXAgLyA4NjQwMCArIDQpICUgNyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldEhvdXIodWludCB0aW1lc3RhbXApIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgICAgIHJldHVybiB1aW50OCgodGltZXN0YW1wIC8gNjAgLyA2MCkgJSAyNCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TWludXRlKHVpbnQgdGltZXN0YW1wKSByZXR1cm5zICh1aW50OCkgewogICAgICAgICAgICByZXR1cm4gdWludDgoKHRpbWVzdGFtcCAvIDYwKSAlIDYwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTZWNvbmQodWludCB0aW1lc3RhbXApIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgICAgIHJldHVybiB1aW50OCh0aW1lc3RhbXAgJSA2MCk7CiAgICB9CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IHByZXNhbGUgewogICAgCiAgICBUb2tlbiBwdWJsaWMgdG9rZW47CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIHVpbnQyNTYgcHVibGljIG51bWJlck9mVG9rZW5zOwogICAgdWludDI1NiBwdWJsaWMgbnVtYmVyT2ZUb2tlbnNMZWZ0OwogICAgdWludDI1NiBwdWJsaWMgcHJpY2VQZXJUb2tlbjsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgZmluYWxBZGRyZXNzID0gMHg1OTA0OTU3ZDI1RDBjNjIxMzQ5MTg4MmE2NDc2NTk2N0Y4OEJDQ0M3OwogICAgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlT2Y7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBhZGRyZXNzRXhpc3RzOwogICAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgYWRkcmVzc2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYWRkcmVzc0luZGV4OwogICAgdWludDI1NiBwdWJsaWMgbnVtYmVyT2ZBZGRyZXNzID0gMDsKICAgIAogICAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwdWJsaWMgZGF0ZXM7CiAgICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHB1YmxpYyBwZXJjZW50czsKICAgIHVpbnQyNTYgcHVibGljIG51bWJlck9mRGF0ZXMgPSA4OwogICAgCiAgICBmdW5jdGlvbiBwcmVzYWxlKGFkZHJlc3MgdG9rZW5BZGRyZXNzLCB1aW50MjU2IG5vT2ZUb2tlbnMsIHVpbnQyNTYgcHJQZXJUb2tlbikgewogICAgICAgIGRhdGVzWzBdID0gMTUwNTUyMDAwMDsKICAgICAgICBkYXRlc1sxXSA9IDE1MDYwMzg0MDA7CiAgICAgICAgZGF0ZXNbMl0gPSAxNTA2MTI0ODAwOwogICAgICAgIGRhdGVzWzNdID0gMTUwNjgxNjAwMDsKICAgICAgICBkYXRlc1s0XSA9IDE1MDc0MjA4MDA7CiAgICAgICAgZGF0ZXNbNV0gPSAxNTA4MTEyMDAwOwogICAgICAgIGRhdGVzWzZdID0gMTUwODYzMDQwMDsKICAgICAgICBkYXRlc1s3XSA9IDE1MDg4MDMyMDA7CiAgICAgICAgcGVyY2VudHNbMF0gPSAzNTA7CiAgICAgICAgcGVyY2VudHNbMV0gPSAyMDA7CiAgICAgICAgcGVyY2VudHNbMl0gPSAxMDA7CiAgICAgICAgcGVyY2VudHNbM10gPSA1MDsKICAgICAgICBwZXJjZW50c1s0XSA9IDI1OwogICAgICAgIHBlcmNlbnRzWzVdID0gMDsKICAgICAgICBwZXJjZW50c1s2XSA9IDkwMDE7CiAgICAgICAgcGVyY2VudHNbN10gPSA5MDAxOwogICAgICAgIHRva2VuID0gVG9rZW4odG9rZW5BZGRyZXNzKTsKICAgICAgICBudW1iZXJPZlRva2VucyA9IG5vT2ZUb2tlbnM7CiAgICAgICAgdG90YWxTdXBwbHkgPSBub09mVG9rZW5zOwogICAgICAgIG51bWJlck9mVG9rZW5zTGVmdCA9IG5vT2ZUb2tlbnM7CiAgICAgICAgcHJpY2VQZXJUb2tlbiA9IHByUGVyVG9rZW47CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIG5hbWUgPSAiQXV0b25pbyBQcmVzYWxlIjsKICAgICAgICBzeW1ib2wgPSAiTklPIjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRkQWRkcmVzcyAoYWRkcmVzcyBhZGRyKSBwcml2YXRlIHsKICAgICAgICBpZighYWRkcmVzc0V4aXN0c1thZGRyXSkgewogICAgICAgICAgICBhZGRyZXNzSW5kZXhbYWRkcl0gPSBudW1iZXJPZkFkZHJlc3M7CiAgICAgICAgICAgIGFkZHJlc3Nlc1tudW1iZXJPZkFkZHJlc3MrK10gPSBhZGRyOwogICAgICAgICAgICBhZGRyZXNzRXhpc3RzW2FkZHJdID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGVuZFByZXNhbGUoKSB7CiAgICAgICAgaWYobXNnLnNlbmRlciA9PSBvd25lcikgewogICAgICAgICAgICBpZihub3cgPiBkYXRlc1tudW1iZXJPZkRhdGVzLTFdKSB7CiAgICAgICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICAgICAgfSBlbHNlIGlmKG51bWJlck9mVG9rZW5zTGVmdCA9PSAwKSB7CiAgICAgICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBmaW5pc2goKSBwcml2YXRlIHsKICAgICAgICBpZih0b2tlbi5iYWxhbmNlT2YodGhpcyk+PW51bWJlck9mVG9rZW5zKXsKICAgICAgICAgICAgaWYoZmluYWxBZGRyZXNzLnNlbmQodGhpcy5iYWxhbmNlKSkgewogICAgICAgICAgICAgICAgZm9yKHVpbnQyNTYgaT0wO2k8bnVtYmVyT2ZBZGRyZXNzO2krKykgewogICAgICAgICAgICAgICAgICAgIHRva2VuLnRyYW5zZmVyKGFkZHJlc3Nlc1tpXSwgYmFsYW5jZU9mW2FkZHJlc3Nlc1tpXV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYobnVtYmVyT2ZUb2tlbnNMZWZ0ICE9IDApIHsKICAgICAgICAgICAgICAgICAgICB0b2tlbi50cmFuc2Zlcihvd25lciwgbnVtYmVyT2ZUb2tlbnNMZWZ0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICB1aW50MjU2IHdlaVNlbnQgPSBtc2cudmFsdWU7CiAgICAgICAgdWludDI1NiB3ZWlMZWZ0T3ZlciA9IDA7CiAgICAgICAgaWYobnVtYmVyT2ZUb2tlbnNMZWZ0PD0wIHx8IG5vdzxkYXRlc1swXSB8fCBub3c+ZGF0ZXNbbnVtYmVyT2ZEYXRlcy0xXSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBwZXJjZW50ID0gOTAwMTsKICAgICAgICBmb3IodWludDI1NiBpPTA7aTxudW1iZXJPZkRhdGVzLTE7aSsrKSB7CiAgICAgICAgICAgIGlmKG5vdz49ZGF0ZXNbaV0gJiYgbm93PD1kYXRlc1tpKzFdICkgewogICAgICAgICAgICAgICAgcGVyY2VudCA9IHBlcmNlbnRzW2ldOwogICAgICAgICAgICAgICAgaT1udW1iZXJPZkRhdGVzLTE7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYocGVyY2VudD09OTAwMSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgdWludDI1NiB0b2tlbnNUb0dpdmUgPSB3ZWlTZW50IC8gcHJpY2VQZXJUb2tlbjsKICAgICAgICBpZih0b2tlbnNUb0dpdmUgKiBwcmljZVBlclRva2VuID4gd2VpU2VudCkgdG9rZW5zVG9HaXZlLS07CiAgICAgICAgdG9rZW5zVG9HaXZlPSh0b2tlbnNUb0dpdmUqKDEwMDArcGVyY2VudCkpLzEwMDA7CiAgICAgICAgaWYodG9rZW5zVG9HaXZlPm51bWJlck9mVG9rZW5zTGVmdCkgewogICAgICAgICAgICB3ZWlMZWZ0T3ZlciA9ICh0b2tlbnNUb0dpdmUgLSBudW1iZXJPZlRva2Vuc0xlZnQpICogcHJpY2VQZXJUb2tlbjsKICAgICAgICAgICAgdG9rZW5zVG9HaXZlID0gbnVtYmVyT2ZUb2tlbnNMZWZ0OwogICAgICAgIH0KICAgICAgICBudW1iZXJPZlRva2Vuc0xlZnQgLT0gdG9rZW5zVG9HaXZlOwogICAgICAgIGlmKGFkZHJlc3NFeGlzdHNbbXNnLnNlbmRlcl0pIHsKICAgICAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdICs9IHRva2Vuc1RvR2l2ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhZGRBZGRyZXNzKG1zZy5zZW5kZXIpOwogICAgICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSB0b2tlbnNUb0dpdmU7CiAgICAgICAgfQogICAgICAgIFRyYW5zZmVyKDB4MCxtc2cuc2VuZGVyLHRva2Vuc1RvR2l2ZSk7CiAgICAgICAgaWYod2VpTGVmdE92ZXI+MCltc2cuc2VuZGVyLnNlbmQod2VpTGVmdE92ZXIpOwogICAgfQogICAgCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKfQ=='.
	

]
