Class {
	#name : #SRT1C06e21Bd42C331f6A7b9914e60C60B5B8F02DC5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1C06e21Bd42C331f6A7b9914e60C60B5B8F02DC5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLy8gQHRpdGxlIEtpbmd1aW4gSUNPCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xODsKCi8vLyBAdGl0bGUgS2luZ3VpbiBLcm93bnMgW0tSU10KCiAvKiBFUkMyMjMgYWRkaXRpb25zIHRvIEVSQzIwICovCnByYWdtYSBzb2xpZGl0eSBeMC40Ljg7CgogLyoKICBFUkMyMjMgYWRkaXRpb25zIHRvIEVSQzIwCgogIEludGVyZmFjZSB3aXNlIGlzIEVSQzIwICsgZGF0YSBwYXJhbWV0ZXIgdG8gdHJhbnNmZXIgYW5kIHRyYW5zZmVyRnJvbS4KICovCgpwcmFnbWEgc29saWRpdHkgXjAuNC44OwoKCi8qCiAqIEVSQzIwIGludGVyZmFjZQogKiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCB7CiAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgoKY29udHJhY3QgRVJDMjIzIGlzIEVSQzIwIHsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSByZXR1cm5zIChib29sIG9rKTsKfQoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8qCkJhc2UgY2xhc3MgY29udHJhY3RzIHdpbGxpbmcgdG8gYWNjZXB0IEVSQzIyMyB0b2tlbiB0cmFuc2ZlcnMgbXVzdCBjb25mb3JtIHRvLgoKU2VuZGVyOiBtc2cuc2VuZGVyIHRvIHRoZSB0b2tlbiBjb250cmFjdCwgdGhlIGFkZHJlc3Mgb3JpZ2luYXRpbmcgdGhlIHRva2VuIHRyYW5zZmVyLgogICAgICAgICAgLSBGb3IgdXNlciBvcmlnaW5hdGVkIHRyYW5zZmVycyBzZW5kZXIgd2lsbCBiZSBlcXVhbCB0byB0eC5vcmlnaW4KICAgICAgICAgIC0gRm9yIGNvbnRyYWN0IG9yaWdpbmF0ZWQgdHJhbnNmZXJzLCB0eC5vcmlnaW4gd2lsbCBiZSB0aGUgdXNlciB0aGF0IG1hZGUgdGhlIHR4IHRoYXQgcHJvZHVjZWQgdGhlIHRyYW5zZmVyLgpPcmlnaW46IHRoZSBvcmlnaW4gYWRkcmVzcyBmcm9tIHdob3NlIGJhbGFuY2UgdGhlIHRva2VucyBhcmUgc2VudAogICAgICAgICAgLSBGb3IgdHJhbnNmZXIoKSwgb3JpZ2luID0gbXNnLnNlbmRlcgogICAgICAgICAgLSBGb3IgdHJhbnNmZXJGcm9tKCkgb3JpZ2luID0gX2Zyb20gdG8gdG9rZW4gY29udHJhY3QKVmFsdWUgaXMgdGhlIGFtb3VudCBvZiB0b2tlbnMgc2VudApEYXRhIGlzIGFyYml0cmFyeSBkYXRhIHNlbnQgd2l0aCB0aGUgdG9rZW4gdHJhbnNmZXIuIFNpbXVsYXRlcyBldGhlciB0eC5kYXRhCgpGcm9tLCBvcmlnaW4gYW5kIHZhbHVlIHNob3VsZG4ndCBiZSB0cnVzdGVkIHVubGVzcyB0aGUgdG9rZW4gY29udHJhY3QgaXMgdHJ1c3RlZC4KSWYgc2VuZGVyID09IHR4Lm9yaWdpbiwgaXQgaXMgc2FmZSB0byB0cnVzdCBpdCByZWdhcmRsZXNzIG9mIHRoZSB0b2tlbi4KKi8KCmNvbnRyYWN0IEVSQzIyM1JlY2VpdmVyIHsKICBmdW5jdGlvbiB0b2tlbkZhbGxiYWNrKGFkZHJlc3MgX3NlbmRlciwgYWRkcmVzcyBfb3JpZ2luLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHJldHVybnMgKGJvb2wgb2spOwp9CgpwcmFnbWEgc29saWRpdHkgXjAuNC44OwoKCnByYWdtYSBzb2xpZGl0eSBeMC40LjE4OwoKCi8qKgogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA+IDApOwogICAgdWludCBjID0gYSAvIGI7CiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjPj1hICYmIGM+PWIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgLypmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSB7CiAgICAgIHRocm93OwogICAgfQogIH0qLwp9CgoKLyoqCiAqIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6CiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgU2FmZU1hdGggewogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc2FmZVN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7CiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlc1tfZnJvbV0sIF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoX2FsbG93YW5jZSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQp9Cgpjb250cmFjdCBLaW5ndWluS3Jvd25zIGlzIEVSQzIyMywgU3RhbmRhcmRUb2tlbiB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7ICAvLyB0b2tlbiBvd25lciBhZGRkcmVzCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIktpbmd1aW4gS3Jvd25zIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJLUlMiOwogIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogIC8vIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OyAvLyBkZWZpbmVkIGluIEVSQzIwIGNvbnRyYWN0CgkJCiAgZnVuY3Rpb24gS2luZ3Vpbktyb3ducygpIHsKCW93bmVyID0gbXNnLnNlbmRlcjsKICAgIHRvdGFsU3VwcGx5ID0gMTAwMDAwMDAwICogKDEwKioxOCk7IC8vIDEwMCBtbG4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHk7CiAgfSAKICAKICAvKgogIC8vb25seSBkbyBpZiBjYWxsIGlzIGZyb20gb3duZXIgbW9kaWZpZXIKICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7CiAgICBfOwogIH0qLwogIAogIC8vZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIHVzZXIgb3IgYW5vdGhlciBjb250cmFjdCB3YW50cyB0byB0cmFuc2ZlciBmdW5kcwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy9maWx0ZXJpbmcgaWYgdGhlIHRhcmdldCBpcyBhIGNvbnRyYWN0IHdpdGggYnl0ZWNvZGUgaW5zaWRlIGl0CiAgICBpZiAoIXN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKSkgdGhyb3c7IC8vIGRvIGEgbm9ybWFsIHRva2VuIHRyYW5zZmVyCiAgICBpZiAoaXNDb250cmFjdChfdG8pKSByZXR1cm4gY29udHJhY3RGYWxsYmFjayhtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoIXN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpKSB0aHJvdzsgLy8gZG8gYSBub3JtYWwgdG9rZW4gdHJhbnNmZXIKICAgIGlmIChpc0NvbnRyYWN0KF90bykpIHJldHVybiBjb250cmFjdEZhbGxiYWNrKF9mcm9tLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmV0dXJuIHRyYW5zZmVyKF90bywgX3ZhbHVlLCBuZXcgYnl0ZXMoMCkpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXR1cm4gdHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSwgbmV3IGJ5dGVzKDApKTsKICB9CgogIC8vZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiB0cmFuc2FjdGlvbiB0YXJnZXQgaXMgYSBjb250cmFjdAogIGZ1bmN0aW9uIGNvbnRyYWN0RmFsbGJhY2soYWRkcmVzcyBfb3JpZ2luLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwcml2YXRlIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgRVJDMjIzUmVjZWl2ZXIgcmVjZWl2ZXIgPSBFUkMyMjNSZWNlaXZlcihfdG8pOwogICAgcmV0dXJuIHJlY2VpdmVyLnRva2VuRmFsbGJhY2sobXNnLnNlbmRlciwgX29yaWdpbiwgX3ZhbHVlLCBfZGF0YSk7CiAgfQoKICAvL2Fzc2VtYmxlIHRoZSBnaXZlbiBhZGRyZXNzIGJ5dGVjb2RlLiBJZiBieXRlY29kZSBleGlzdHMgdGhlbiB0aGUgX2FkZHIgaXMgYSBjb250cmFjdC4KICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBpc19jb250cmFjdCkgewogICAgLy8gcmV0cmlldmUgdGhlIHNpemUgb2YgdGhlIGNvZGUgb24gdGFyZ2V0IGFkZHJlc3MsIHRoaXMgbmVlZHMgYXNzZW1ibHkKICAgIHVpbnQgbGVuZ3RoOwogICAgYXNzZW1ibHkgeyBsZW5ndGggOj0gZXh0Y29kZXNpemUoX2FkZHIpIH0KICAgIHJldHVybiBsZW5ndGggPiAwOwogIH0KICAKICAvLyByZXR1cm5zIGtyb3duIGJhbGFuY2Ugb2YgZ2l2ZW4gYWRkcmVzcyAJCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCQp9Cgpjb250cmFjdCBLaW5ndWluSWNvIGlzIFNhZmVNYXRoLCBFUkMyMjNSZWNlaXZlciB7CiAgYWRkcmVzcyBjb25zdGFudCBwdWJsaWMgc3VwZXJPd25lciA9IDB4Y0ViYjc0NTQ0Mjk4MzBDOTI2MDY4MzYzNTA1NjlBMTcyMDdkQTg1NzsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsgICAgICAgICAgICAgLy8gY29udHJhY3Qgb3duZXIgYWRkcmVzcwogIGFkZHJlc3MgcHVibGljIGFwaTsgICAgICAgICAgICAgICAvLyBhZGRyZXNzIG9mIGFwaSBtYW5hZ2VyCiAgS2luZ3Vpbktyb3ducyBwdWJsaWMga3JzOyAgICAgLy8gaGFuZGxlciB0byBLUlMgdG9rZW4gY29udHJhY3QKICAKICAvLyByb3VuZHMgZGF0YSBzdG9yYWdlOgogIHN0cnVjdCBJY29Sb3VuZERhdGEgewogICAgdWludCByTWluRXRoUGF5bWVudDsgICAgICAgICAgICAvLyBzZXQgbWluaW11bSBFVEggcGF5bWVudAogICAgdWludCByS3JzVXNkRml4ZWQ7ICAgICAgICAgICAgICAvLyBzZXQgS1JTL1VTRCBmaXhlZCByYXRpbyBmb3IgY2FsY3VsYXRpb24gb2Yga3Jvd24gYW1vdW50IHRvIGJlIHNlbnQsIAogICAgdWludCByS3ljVHJlc2hvbGQ7ICAgICAgICAgICAgICAvLyBLWUMgdHJlc2hvbGQgaW4gRVVSIChuZWVkZWQgZm9yIGNoZWNrIHdoZXRoZXIgaW5jb21pbmcgcGF5bWVudCByZXF1aXJlcyBLWUMvQU1MIHZlcmlmaWVkIGFkZHJlc3MpCiAgICB1aW50IHJNaW5LcnNDYXA7ICAgICAgICAgICAgICAgIC8vIG1pbmltdW0gYW1vdW50IG9mIEtSUyB0byBiZSBzZW50IGR1cmluZyBhIHJvdW5kCiAgICB1aW50IHJNYXhLcnNDYXA7ICAgICAgICAgICAgICAgIC8vIG1heGltdW0gYW1vdW50IG9mIEtSUyB0byBiZSBzZW50IGR1cmluZyBhIHJvdW5kCiAgICB1aW50IHJTdGFydEJsb2NrOyAgICAgICAgICAgICAgIC8vIG51bWJlciBvZiBibG9ja2NoYWluIHN0YXJ0IGJsb2NrIGZvciBhIHJvdW5kCiAgICB1aW50IHJFbmRCbG9jazsgICAgICAgICAgICAgICAgIC8vIG51bWJlciBvZiBibG9ja2NoYWluIGVuZCBibG9jayBmb3IgYSByb3VuZAogICAgdWludCByRXRoUGF5bWVudHNBbW91bnQ7ICAgICAgICAvLyBzdW0gb2YgRVRIIHRva2VucyByZWNlaXZlZCBmcm9tIHBhcnRpY2lwYW50cyBkdXJpbmcgYSByb3VuZAogICAgdWludCByRXRoUGF5bWVudHNDb3VudDsgICAgICAgICAvLyBjb3VudGVyIG9mIEVUSCBwYXltZW50cyBkdXJpbmcgYSByb3VuZCAKICAgIHVpbnQgclNlbnRLcm93bnNBbW91bnQ7ICAgICAgICAgLy8gc3VtIG9mIEVUSCB0b2tlbnMgcmVjZWl2ZWQgZnJvbSBwYXJ0aWNpcGFudHMgZHVyaW5nIGEgcm91bmQKICAgIHVpbnQgclNlbnRLcm93bnNDb3VudDsgICAgICAgICAgLy8gY291bnRlciBvZiBLUlMgdHJhbnNhY3Rpb25zIGR1cmluZyBhIHJvdW5kCiAgICBib29sIHJvdW5kQ29tcGxldGVkOyAgICAgICAgICAgIC8vIGZsYWcgd2hldGhlciBhIHJvdW5kIGhhcyBmaW5pc2hlZAogIH0KICBtYXBwaW5nKHVpbnQgPT4gSWNvUm91bmREYXRhKSBwdWJsaWMgaWNvUm91bmRzOyAgLy8gdGFibGUgb2Ygcm91bmRzIGRhdGE6IGljbyBudW1iZXIsIGljbyByZWNvcmQKICAKICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFsbG93ZWRBZHJlc3NlczsgLy8gbGlzdCBvZiBLWUMvQU1MIGFwcHJvdmVkIHdhbGxldHM6IHBhcnRpY2lwYW50IGFkZHJlc3MsIGFsbG93ZWQvbm90IGFsbG93ZWQKICAKICBzdHJ1Y3QgUm91bmRQYXltZW50cyB7ICAgICAgICAgICAgLy8gc3RydWN0dXJlIGZvciBzdG9yaW5nIHN1bSBvZiBwYXltZW50cwogICAgdWludCByb3VuZDsKICAgIHVpbnQgYW1vdW50OwogIH0KICAvLyBhbW91bnQgb2YgcGF5bWVudHMgZnJvbSB0aGUgc2FtZSBhZGRyZXNzIGR1cmluZyBlYWNoIHJvdW5kIAogIC8vICAodG8gY2F0Y2ggbXVsdGlwbGUgcGF5bWVudHMgdG8gY2hlY2sgS1lDL0FNTCBhcHByb3ZhbmNlKTogcGFydGljaXBhbnQgYWRkcmVzcywgcGF5bWVudHMgcmVjb3JkCiAgbWFwcGluZyhhZGRyZXNzID0+IFJvdW5kUGF5bWVudHMpIHB1YmxpYyBwYXltZW50c0Zyb21BZGRyZXNzOyAKCiAgdWludCBwdWJsaWMgZXRoRXVyOyAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgRVVSL0VUSCBleGNoYW5nZSByYXRlIChmb3IgQU1MIGNoZWNrKQogIHVpbnQgcHVibGljIGV0aFVzZDsgICAgICAgICAgICAgICAvLyBjdXJyZW50IEVUSC9VU0QgZXhjaGFuZ2UgcmF0ZSAoc2VuZGluZyBLUlMgZm9yIEVUSCBjYWxjKSAKICB1aW50IHB1YmxpYyBrcnNVc2Q7ICAgICAgICAgICAgICAgLy8gY3VycmVudCBLUlMvVVNEIGV4Y2hhbmdlIHJhdGUgKHNlbmRpbmcgS1JTIGZvciBFVEggY2FsYykKICB1aW50IHB1YmxpYyByTm87ICAgICAgICAgICAgICAgICAgLy8gY291bnRlciBmb3Igcm91bmRzCiAgYm9vbCBwdWJsaWMgaWNvSW5Qcm9ncmVzczsgICAgICAgIC8vIGljbyBzdGF0dXMgZmxhZwogIGJvb2wgcHVibGljIGFwaUFjY2Vzc0Rpc2FibGVkOyAgICAvLyBhcGkgYWNjZXNzIHNlY3VyaXR5IGZsYWcKICAKICBldmVudCBMb2dSZWNlaXZlZEV0aChhZGRyZXNzIGZyb20sIHVpbnQgdmFsdWUsIHVpbnQgYmxvY2spOyAvLyBwdWJsaXNoIGFuIGV2ZW50IGFib3V0IGluY29taW5nIEVUSAogIGV2ZW50IExvZ1NlbnRLcnMoYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgdWludCBibG9jayk7IC8vIHB1Ymxpc2ggYW4gZXZlbnQgYWJvdXQgc2VudCBLUlMKCiAgLy8gZXhlY3V0aW9uIGFsbG93ZWQgb25seSBmb3IgY29udHJhY3Qgc3VwZXJvd25lcgogIG1vZGlmaWVyIG9ubHlTdXBlck93bmVyKCkgewoJcmVxdWlyZShtc2cuc2VuZGVyID09IHN1cGVyT3duZXIpOwogICAgXzsKICB9CgogIC8vIGV4ZWN1dGlvbiBhbGxvd2VkIG9ubHkgZm9yIGNvbnRyYWN0IG93bmVyCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewoJcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQogIAogIC8vIGV4ZWN1dGlvbiBhbGxvd2VkIG9ubHkgZm9yIGNvbnRyYWN0IG93bmVyIG9yIGFwaSBhZGRyZXNzCiAgbW9kaWZpZXIgb25seU93bmVyT3JBcGkoKSB7CglyZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSBhcGkpOwogICAgaWYgKG1zZy5zZW5kZXIgPT0gYXBpICYmIGFwaSAhPSBvd25lcikgewogICAgICByZXF1aXJlKCFhcGlBY2Nlc3NEaXNhYmxlZCk7Cgl9CiAgICBfOwogIH0KIAogIGZ1bmN0aW9uIEtpbmd1aW5JY28oKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7IC8vIHRoaXMgY29udHJhY3Qgb3duZXIKICAgIGFwaSA9IG1zZy5zZW5kZXI7IC8vIGluaXRpYWxseSBhcGkgYWRkcmVzcyBpcyB0aGUgY29udHJhY3Qgb3duZXIncyBhZGRyZXNzIAogICAga3JzID0gS2luZ3Vpbktyb3ducygweGRmYjQxMDk5NGI2Njc3OGJkNmNjMmM4MmU4ZmZlNGY3YjI4NzAwMDYpOyAvLyBLUlMgdG9rZW4gCiAgfSAKIAogIC8vIHJlY2VpdmluZyBFVEggYW5kIHNlbmRpbmcgS1JTCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICBpZihtc2cuc2VuZGVyICE9IG93bmVyKSB7IC8vIGlmIEVUSCBjb21lcyBmcm9tIG90aGVyIHRoYW4gdGhlIGNvbnRyYWN0IG93bmVyIGFkZHJlc3MKICAgICAgaWYoYmxvY2subnVtYmVyID49IGljb1JvdW5kc1tyTm9dLnJTdGFydEJsb2NrICYmIGJsb2NrLm51bWJlciA8PSBpY29Sb3VuZHNbck5vXS5yRW5kQmxvY2sgJiYgIWljb0luUHJvZ3Jlc3MpIHsKICAgICAgICBpY29JblByb2dyZXNzID0gdHJ1ZTsKICAgICAgfSAgCiAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID49IGljb1JvdW5kc1tyTm9dLnJTdGFydEJsb2NrICYmIGJsb2NrLm51bWJlciA8PSBpY29Sb3VuZHNbck5vXS5yRW5kQmxvY2sgJiYgIWljb1JvdW5kc1tyTm9dLnJvdW5kQ29tcGxldGVkKTsgLy8gYWxsb3cgcGF5bWVudHMgb25seSBkdXJpbmcgdGhlIGljbyByb3VuZAogICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBpY29Sb3VuZHNbck5vXS5yTWluRXRoUGF5bWVudCk7IC8vIG1pbmltdW0gZXRoIHBheW1lbnQKCSAgcmVxdWlyZShldGhFdXIgPiAwKTsgLy8gRVRIL0VVUiByYXRlIGZvciBBTUwgbXVzdCBiZSBzZXQgZWFybGllcgoJICByZXF1aXJlKGV0aFVzZCA+IDApOyAvLyBFVEgvVVNEIHJhdGUgZm9yIGNvbnZlcnNpb24gdG8gS1JTCgkgIHVpbnQga3Jvd25zNGV0aDsKCSAgaWYoaWNvUm91bmRzW3JOb10ucktyc1VzZEZpeGVkID4gMCkgeyAvLyBLUlMgaGFzIGZpeGVkIHJhdGlvIHRvIFVTRAogICAgICAgIGtyb3duczRldGggPSBzYWZlRGl2KHNhZmVNdWwoc2FmZU11bChtc2cudmFsdWUsIGV0aFVzZCksIHVpbnQoMTAwKSksIGljb1JvdW5kc1tyTm9dLnJLcnNVc2RGaXhlZCk7CgkgIH0gZWxzZSB7IC8vIEtSUy9VU0QgaXMgdHJhZGVkIG9uIGV4Y2hhbmdlcwoJCXJlcXVpcmUoa3JzVXNkID4gMCk7IC8vIEtSUy9VU0QgcmF0ZSBmb3IgY29udmVyc2lvbiB0byBLUlMKICAgICAgICBrcm93bnM0ZXRoID0gc2FmZURpdihzYWZlTXVsKHNhZmVNdWwobXNnLnZhbHVlLCBldGhVc2QpLCB1aW50KDEwMCkpLCBrcnNVc2QpOwogIAkgIH0KICAgICAgcmVxdWlyZShzYWZlQWRkKGljb1JvdW5kc1tyTm9dLnJTZW50S3Jvd25zQW1vdW50LCBrcm93bnM0ZXRoKSA8PSBpY29Sb3VuZHNbck5vXS5yTWF4S3JzQ2FwKTsgLy8ga3JzIGNhcCBwZXIgcm91bmQKCiAgICAgIGlmKHBheW1lbnRzRnJvbUFkZHJlc3NbbXNnLnNlbmRlcl0ucm91bmQgIT0gck5vKSB7IC8vIG9uIG1hcHBpbmdzIGFsbCBrZXlzIGFyZSBwb3NzaWJsZSwgc28gdGhlcmUgaXMgbm8gY2hlY2tpbmcgZm9yIGl0cyBleGlzdGVuY2UKICAgICAgICBwYXltZW50c0Zyb21BZGRyZXNzW21zZy5zZW5kZXJdLnJvdW5kID0gck5vOyAvLyBvbiBuZXcgcm91bmQgc2V0IHRvIGN1cnJlbnQgcm91bmQKICAgICAgICBwYXltZW50c0Zyb21BZGRyZXNzW21zZy5zZW5kZXJdLmFtb3VudCA9IDA7IC8vIHplcm9pbmcgYW1vdW50IG9uIG5ldyByb3VuZAogICAgICB9ICAgCiAgICAgIGlmKHNhZmVNdWwoZXRoRXVyLCBzYWZlRGl2KG1zZy52YWx1ZSwgMTAqKjE4KSkgPj0gaWNvUm91bmRzW3JOb10uckt5Y1RyZXNob2xkIHx8IC8vIGlmIHBheW1lbnQgZnJvbSB0aGlzIHNlbmRlciByZXF1aXJlcyB0byBiZSBmcm9tIEtZQy9BTUwgYXBwcm92ZWQgYWRkcmVzcwogICAgICAgIC8vIGlmIHN1bSBvZiBwYXltZW50cyBmcm9tIHRoaXMgc2VuZGVyIGFkZHJlc3MgcmVxdWlyZXMgdG8gYmUgZnJvbSBLWUMvQU1MIGFwcHJvdmVkIGFkZHJlc3MKICAgICAgICBzYWZlTXVsKGV0aEV1ciwgc2FmZURpdihzYWZlQWRkKHBheW1lbnRzRnJvbUFkZHJlc3NbbXNnLnNlbmRlcl0uYW1vdW50LCBtc2cudmFsdWUpLCAxMCoqMTgpKSA+PSBpY29Sb3VuZHNbck5vXS5yS3ljVHJlc2hvbGQpIHsgCgkJcmVxdWlyZShhbGxvd2VkQWRyZXNzZXNbbXNnLnNlbmRlcl0pOyAvLyBvbmx5IEtZQy9BTUwgYWxsb3dlZCBhZGRyZXNzCiAgICAgIH0KCiAgICAgIGljb1JvdW5kc1tyTm9dLnJFdGhQYXltZW50c0Ftb3VudCA9IHNhZmVBZGQoaWNvUm91bmRzW3JOb10uckV0aFBheW1lbnRzQW1vdW50LCBtc2cudmFsdWUpOwogICAgICBpY29Sb3VuZHNbck5vXS5yRXRoUGF5bWVudHNDb3VudCArPSAxOyAKICAgICAgcGF5bWVudHNGcm9tQWRkcmVzc1ttc2cuc2VuZGVyXS5hbW91bnQgPSBzYWZlQWRkKHBheW1lbnRzRnJvbUFkZHJlc3NbbXNnLnNlbmRlcl0uYW1vdW50LCBtc2cudmFsdWUpOwogICAgICBMb2dSZWNlaXZlZEV0aChtc2cuc2VuZGVyLCBtc2cudmFsdWUsIGJsb2NrLm51bWJlcik7CiAgICAgIGljb1JvdW5kc1tyTm9dLnJTZW50S3Jvd25zQW1vdW50ID0gc2FmZUFkZChpY29Sb3VuZHNbck5vXS5yU2VudEtyb3duc0Ftb3VudCwga3Jvd25zNGV0aCk7CiAgICAgIGljb1JvdW5kc1tyTm9dLnJTZW50S3Jvd25zQ291bnQgKz0gMTsKICAgICAga3JzLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGtyb3duczRldGgpOwogICAgICBMb2dTZW50S3JzKG1zZy5zZW5kZXIsIGtyb3duczRldGgsIGJsb2NrLm51bWJlcik7CiAgICB9IGVsc2UgeyAvLyBvd25lciBjYW4gYWx3YXlzIHBheS1pbiAoYW5kIHRyaWdnZXIgcm91bmQgc3RhcnQvc3RvcCkKCSAgICBpZihibG9jay5udW1iZXIgPj0gaWNvUm91bmRzW3JOb10uclN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyIDw9IGljb1JvdW5kc1tyTm9dLnJFbmRCbG9jayAmJiAhaWNvSW5Qcm9ncmVzcykgewogICAgICAgICAgaWNvSW5Qcm9ncmVzcyA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmKGJsb2NrLm51bWJlciA+IGljb1JvdW5kc1tyTm9dLnJFbmRCbG9jayAmJiBpY29JblByb2dyZXNzKSB7CiAgICAgICAgICBlbmRJY29Sb3VuZCgpOwogICAgICAgIH0KICAgIH0KICB9CgogIC8vIHJlY2VpdmluZyB0b2tlbnMgb3RoZXIgdGhhbiBFVEgKICAKICAvLyBFUkMyMjMgcmVjZWl2ZXIgaW1wbGVtZW50YXRpb24gLSBodHRwczovL2dpdGh1Yi5jb20vYXJhZ29uL0VSQzIzL2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9pbXBsZW1lbnRhdGlvbi9TdGFuZGFyZDIyM1JlY2VpdmVyLnNvbAogIFRrbiB0a247CgogIHN0cnVjdCBUa24gewogICAgYWRkcmVzcyBhZGRyOwogICAgYWRkcmVzcyBzZW5kZXI7CiAgICBhZGRyZXNzIG9yaWdpbjsKICAgIHVpbnQyNTYgdmFsdWU7CiAgICBieXRlcyBkYXRhOwogICAgYnl0ZXM0IHNpZzsKICB9CgogIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfc2VuZGVyLCBhZGRyZXNzIF9vcmlnaW4sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcmV0dXJucyAoYm9vbCBvaykgewogICAgaWYgKCFzdXBwb3J0c1Rva2VuKG1zZy5zZW5kZXIpKSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGdldFNpZyhieXRlcyBfZGF0YSkgcHJpdmF0ZSByZXR1cm5zIChieXRlczQgc2lnKSB7CiAgICB1aW50IGwgPSBfZGF0YS5sZW5ndGggPCA0ID8gX2RhdGEubGVuZ3RoIDogNDsKICAgIGZvciAodWludCBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICBzaWcgPSBieXRlczQodWludChzaWcpICsgdWludChfZGF0YVtpXSkgKiAoMiAqKiAoOCAqIChsIC0gMSAtIGkpKSkpOwogICAgfQogIH0KCiAgYm9vbCBfX2lzVG9rZW5GYWxsYmFjazsKCiAgbW9kaWZpZXIgdG9rZW5QYXlhYmxlIHsKICAgIGlmICghX19pc1Rva2VuRmFsbGJhY2spIHRocm93OwogICAgXzsKICB9CiAgCiAgZnVuY3Rpb24gc3VwcG9ydHNUb2tlbihhZGRyZXNzIHRva2VuKSByZXR1cm5zIChib29sKSB7CiAgICBpZiAodG9rZW4gPT0gYWRkcmVzcyhrcnMpKSB7CgkgIHJldHVybiB0cnVlOyAKICAgIH0gZWxzZSB7CiAgICAgIHJldmVydCgpOwoJfQogIH0KICAvLyBlbmQgb2YgRVJDMjIzIHJlY2VpdmVyIGltcGxlbWVudGF0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCiAgLy8gc2V0IHVwIGEgbmV3IGljbyByb3VuZCAgCiAgZnVuY3Rpb24gbmV3SWNvUm91bmQodWludCBfck1pbkV0aFBheW1lbnQsIHVpbnQgX3JLcnNVc2RGaXhlZCwgdWludCBfckt5Y1RyZXNob2xkLAogICAgdWludCBfck1pbktyc0NhcCwgdWludCBfck1heEtyc0NhcCwgdWludCBfclN0YXJ0QmxvY2ssIHVpbnQgX3JFbmRCbG9jaykgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCFpY29JblByb2dyZXNzKTsgICAgICAgICAgICAvLyBuZXcgcm91bmQgY2FuIGJlIHNldCB1cCBvbmx5IGFmdGVyIGZpbmlzaGVkL2NhbmNlbGxlZCB0aGUgYWN0aXZlIG9uZQogICAgcmVxdWlyZShyTm8gPCAyNSk7ICAgICAgICAgICAgICAgICAgLy8gbGltaXQgb2YgMjUgcm91bmRzICh3aXRoIHByZS1pY28pCglyTm8gKz0gMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNyZW1lbnQgcm91bmQgbnVtYmVyLCBwcmUtaWNvIGhhcyBudW1iZXIgMQoJaWNvUm91bmRzW3JOb10gPSBJY29Sb3VuZERhdGEoX3JNaW5FdGhQYXltZW50LCBfcktyc1VzZEZpeGVkLCBfckt5Y1RyZXNob2xkLCBfck1pbktyc0NhcCwgX3JNYXhLcnNDYXAsIAoJICBfclN0YXJ0QmxvY2ssIF9yRW5kQmxvY2ssIDAsIDAsIDAsIDAsIGZhbHNlKTsgLy8gckV0aFBheW1lbnRzQW1vdW50LCByRXRoUGF5bWVudHNDb3VudCwgclNlbnRLcm93bnNBbW91bnQsIHJTZW50S3Jvd25zQ291bnQpOyAKICB9CiAgCiAgLy8gcmVtb3ZlIGN1cnJlbnQgcm91bmQsIHBhcmFtcyBvbmx5IC0gaXQgZG9lcyBub3QgcmVmdW5kIGFueSBFVEghCiAgZnVuY3Rpb24gcmVtb3ZlQ3VycmVudEljb1JvdW5kKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKGljb1JvdW5kc1tyTm9dLnJFdGhQYXltZW50c0Ftb3VudCA9PSAwKTsgLy8gb25seSBpZiB0aGVyZSB3YXMgbm8gcGF5bWVudCBhbHJlYWR5CglyZXF1aXJlKCFpY29Sb3VuZHNbck5vXS5yb3VuZENvbXBsZXRlZCk7IC8vIG9ubHkgY3VycmVudCByb3VuZCBjYW4gYmUgcmVtb3ZlZAogICAgaWNvSW5Qcm9ncmVzcyA9IGZhbHNlOwogICAgaWNvUm91bmRzW3JOb10uck1pbkV0aFBheW1lbnQgPSAwOwogICAgaWNvUm91bmRzW3JOb10ucktyc1VzZEZpeGVkID0gMDsKICAgIGljb1JvdW5kc1tyTm9dLnJLeWNUcmVzaG9sZCA9IDA7CiAgICBpY29Sb3VuZHNbck5vXS5yTWluS3JzQ2FwID0gMDsKICAgIGljb1JvdW5kc1tyTm9dLnJNYXhLcnNDYXAgPSAwOwogICAgaWNvUm91bmRzW3JOb10uclN0YXJ0QmxvY2sgPSAwOwogICAgaWNvUm91bmRzW3JOb10uckVuZEJsb2NrID0gMDsKICAgIGljb1JvdW5kc1tyTm9dLnJFdGhQYXltZW50c0Ftb3VudCA9IDA7CiAgICBpY29Sb3VuZHNbck5vXS5yRXRoUGF5bWVudHNDb3VudCA9IDA7CiAgICBpY29Sb3VuZHNbck5vXS5yU2VudEtyb3duc0Ftb3VudCA9IDA7CiAgICBpY29Sb3VuZHNbck5vXS5yU2VudEtyb3duc0NvdW50ID0gMDsKICAgIGlmKHJObyA+IDApIHJObyAtPSAxOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlSWNvUm91bmRFbmRpbmcodWludCBfckVuZEJsb2NrKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUoaWNvUm91bmRzW3JOb10uclN0YXJ0QmxvY2sgPiAwKTsgLy8gcm91bmQgbXVzdCBiZSBzZXQgdXAgZWFybGllcgogICAgaWNvUm91bmRzW3JOb10uckVuZEJsb2NrID0gX3JFbmRCbG9jazsgIAogIH0KIAogIC8vIGNsb3NlcyByb3VuZCBhdXRvbWF0aWNhbGx5CiAgZnVuY3Rpb24gZW5kSWNvUm91bmQoKSBwcml2YXRlIHsKICAgIGljb0luUHJvZ3Jlc3MgPSBmYWxzZTsKCWljb1JvdW5kc1tyTm9dLnJFbmRCbG9jayA9IGJsb2NrLm51bWJlcjsKCWljb1JvdW5kc1tyTm9dLnJvdW5kQ29tcGxldGVkID0gdHJ1ZTsKICB9CgogIC8vIGNsb3NlIHJvdW5kIG1hbnVhbGx5IC0gaWYgbmVlZGVkICAKICBmdW5jdGlvbiBlbmRJY29Sb3VuZE1hbnVhbGx5KCkgcHVibGljIG9ubHlPd25lciB7CiAgICBlbmRJY29Sb3VuZCgpOwogIH0KICAKICAvLyBhZGQgYSB2ZXJpZmllZCBLWUMvQU1MIGFkZHJlc3MKICBmdW5jdGlvbiBhZGRBbGxvd2VkQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgb25seU93bmVyT3JBcGkgewogICAgYWxsb3dlZEFkcmVzc2VzW19hZGRyZXNzXSA9IHRydWU7CiAgfQogIGZ1bmN0aW9uIHJlbW92ZUFsbG93ZWRBZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBvbmx5T3duZXJPckFwaSB7CiAgICBkZWxldGUgYWxsb3dlZEFkcmVzc2VzW19hZGRyZXNzXTsKICB9CgogIC8vIHNldCBleGNoYW5nZSByYXRlIGZvciBFVEgvRVVSIC0gbmVlZGVkIGZvciBjaGVjayB3aGV0aGVyIGluY29taW5nIHBheW1lbnQKICAvLyAgaXMgbW9yZSB0aGFuIHh4eHggRVVSICh0aHVzIHJlcXVpcmVzIEtZQy9BTUwgdmVyaWZpZWQgYWRkcmVzcykKICBmdW5jdGlvbiBzZXRFdGhFdXJSYXRlKHVpbnQgX2V0aEV1cikgcHVibGljIG9ubHlPd25lck9yQXBpIHsKICAgIGV0aEV1ciA9IF9ldGhFdXI7CiAgfQoKICAvLyBzZXQgZXhjaGFuZ2UgcmF0ZSBmb3IgRVRIL1VTRAogIGZ1bmN0aW9uIHNldEV0aFVzZFJhdGUodWludCBfZXRoVXNkKSBwdWJsaWMgb25seU93bmVyT3JBcGkgewogICAgZXRoVXNkID0gX2V0aFVzZDsKICB9CgogIC8vIHNldCBleGNoYW5nZSByYXRlIGZvciBLUlMvVVNECiAgZnVuY3Rpb24gc2V0S3JzVXNkUmF0ZSh1aW50IF9rcnNVc2QpIHB1YmxpYyBvbmx5T3duZXJPckFwaSB7CiAgICBrcnNVc2QgPSBfa3JzVXNkOwogIH0KICAKICAvLyBzZXQgYWxsIHRocmVlIGV4Y2hhbmdlIHJhdGVzOiBFVEgvRVVSLCBFVEgvVVNELCBLUlMvVVNECiAgZnVuY3Rpb24gc2V0QWxsUmF0ZXModWludCBfZXRoRXVyLCB1aW50IF9ldGhVc2QsIHVpbnQgX2tyc1VzZCkgcHVibGljIG9ubHlPd25lck9yQXBpIHsKICAgIGV0aEV1ciA9IF9ldGhFdXI7CiAgICBldGhVc2QgPSBfZXRoVXNkOwoJICBrcnNVc2QgPSBfa3JzVXNkOwogIH0KICAKICAvLyBzZW5kIEtSUyBmcm9tIHRoZSBjb250cmFjdCB0byBhIGdpdmVuIGFkZHJlc3MgKGZvciBCVEMgYW5kIEZJQVQgcGF5bWVudHMpCiAgZnVuY3Rpb24gc2VuZEtycyhhZGRyZXNzIF9yZWNlaXZlciwgdWludCBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyT3JBcGkgewogICAga3JzLnRyYW5zZmVyKF9yZWNlaXZlciwgX2Ftb3VudCk7CiAgfQoKICAvLyB0cmFuc2ZlciBLUlMgZnJvbSBvdGhlciBob2xkZXIsIHVwIHRvIGFtb3VudCBhbGxvd2VkIHRocm91Z2gga3JzLmFwcHJvdmUoKSBmdW5jdGlvbgogIGZ1bmN0aW9uIGdldEtyc0Zyb21BcHByb3ZlZChhZGRyZXNzIF9mcm9tLCB1aW50IF9hbW91bnQpIHB1YmxpYyBvbmx5T3duZXJPckFwaSB7CiAgICBrcnMudHJhbnNmZXJGcm9tKF9mcm9tLCBhZGRyZXNzKHRoaXMpLCBfYW1vdW50KTsKICB9CiAgCiAgLy8gc2VuZCBFVEggZnJvbSB0aGUgY29udHJhY3QgdG8gYSBnaXZlbiBhZGRyZXNzCiAgZnVuY3Rpb24gc2VuZEV0aChhZGRyZXNzIF9yZWNlaXZlciwgdWludCBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgIF9yZWNlaXZlci50cmFuc2ZlcihfYW1vdW50KTsKICB9CiAKICAvLyBkaXNhYmxlL2VuYWJsZSBhY2Nlc3MgZnJvbSBBUEkgLSBmb3Igc2VjdXJpdHkgcmVhc29ucwogIGZ1bmN0aW9uIGRpc2FibGVBcGlBY2Nlc3MoYm9vbCBfZGlzYWJsZWQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgYXBpQWNjZXNzRGlzYWJsZWQgPSBfZGlzYWJsZWQ7CiAgfQogIAogIC8vIGNoYW5nZSBBUEkgd2FsbGV0IGFkZHJlc3MgLSBmb3Igc2VjdXJpdHkgcmVhc29ucwogIGZ1bmN0aW9uIGNoYW5nZUFwaShhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgb25seU93bmVyIHsKICAgIGFwaSA9IF9hZGRyZXNzOwogIH0KCiAgLy8gY2hhbmdlIG93bmVyIGFkZHJlc3MKICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgb25seVN1cGVyT3duZXIgewogICAgb3duZXIgPSBfYWRkcmVzczsKICB9CiAgCn0='.
	

]
