Class {
	#name : #SRT98ecf84ac50aa3c090f88b04676babc296d03527,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT98ecf84ac50aa3c090f88b04676babc296d03527 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKCgoKIC8vIFBhdXNlIGZ1bmN0aW9uYWxpdHkgdGFrZW4gZnJvbSBPcGVuWmVwcGVsaW4uIExpY2Vuc2UgYmVsb3cuCiAvKiBUaGUgTUlUIExpY2Vuc2UgKE1JVCkKIENvcHlyaWdodCAoYykgMjAxNiBTbWFydCBDb250cmFjdCBTb2x1dGlvbnMsIEluYy4KIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZwogYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCiAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCiBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8KIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0bwogdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOiAqLwoKIC8qKgogICogQHRpdGxlIFBhdXNhYmxlCiAgKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAgKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CgogIGV2ZW50IFNldFBhdXNlZChib29sIHBhdXNlZCk7CgogIC8vIHN0YXJ0cyB1bnBhdXNlZAogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKICAvKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBwYXVzZWQgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgcGF1c2VkICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCgpIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBwYXVzZSgpIHB1YmxpYyBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgU2V0UGF1c2VkKHBhdXNlZCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIHVucGF1c2UoKSBwdWJsaWMgb25seU93bmVyIHdoZW5QYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBTZXRQYXVzZWQocGF1c2VkKTsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKY29udHJhY3QgRXRoZXJib3RzUHJpdmlsZWdlcyBpcyBQYXVzYWJsZSB7CiAgZXZlbnQgQ29udHJhY3RVcGdyYWRlKGFkZHJlc3MgbmV3Q29udHJhY3QpOwoKfQoKLy8gaW1wb3J0ICIuL2NvbnRyYWN0cy9DcmF0ZVByZVNhbGUuc29sIjsKLy8gQ2VudHJhbCBjb2xsZWN0aW9uIG9mIHN0b3JhZ2Ugb24gd2hpY2ggYWxsIG90aGVyIGNvbnRyYWN0cyBkZXBlbmQuCi8vIENvbnRhaW5zIHN0cnVjdHMgZm9yIHBhcnRzLCB1c2VycyBhbmQgZnVuY3Rpb25zIHdoaWNoIGNvbnRyb2wgdGhlaXIKLy8gdHJhbnNmZXJyZW5jZS4KY29udHJhY3QgRXRoZXJib3RzQmFzZSBpcyBFdGhlcmJvdHNQcml2aWxlZ2VzIHsKCgogICAgZnVuY3Rpb24gRXRoZXJib3RzQmFzZSgpIHB1YmxpYyB7CiAgICAvLyAgIHNjcmFweWFyZCA9IGFkZHJlc3ModGhpcyk7CiAgICB9CiAgICAvKioqIEVWRU5UUyAqKiovCgogICAgLy8vICBGb3JnZSBmaXJlcyB3aGVuIGEgbmV3IHBhcnQgaXMgY3JlYXRlZCAtIDQgdGltZXMgd2hlbiBhIGNyYXRlIGlzIG9wZW5lZCwKICAgIC8vLyBhbmQgb25jZSB3aGVuIGEgYmF0dGxlIHRha2VzIHBsYWNlLiBBbHNvIGhhcyBmaXJlcyB3aGVuCiAgICAvLy8gcGFydHMgYXJlIGNvbWJpbmVkIGluIHRoZSBmdXJuYWNlLgogICAgZXZlbnQgRm9yZ2UoYWRkcmVzcyBvd25lciwgdWludDI1NiBwYXJ0SUQsIFBhcnQgcGFydCk7CgogICAgLy8vICBUcmFuc2ZlciBldmVudCBhcyBkZWZpbmVkIGluIEVSQzcyMS4KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB0b2tlbklkKTsKCiAgICAvKioqIERBVEEgVFlQRVMgKioqLwogICAgLy8vICBUaGUgbWFpbiBzdHJ1Y3QgcmVwcmVzZW50YXRpb24gb2YgYSByb2JvdCBwYXJ0LiBFYWNoIHJvYm90IGluIEV0aGVyYm90cyBpcyByZXByZXNlbnRlZCBieSBmb3VyIGNvcGllcwogICAgLy8vICBvZiB0aGlzIHN0cnVjdHVyZSwgb25lIGZvciBlYWNoIG9mIHRoZSBmb3VyIHBhcnRzIGNvbXByaXNpbmcgaXQ6CiAgICAvLy8gMS4gUmlnaHQgQXJtIChNZWxlZSksCiAgICAvLy8gMi4gTGVmdCBBcm0gKERlZmVuY2UpLAogICAgLy8vIDMuIEhlYWQgKFR1cnJldCksCiAgICAvLy8gNC4gQm9keS4KICAgIC8vIHN0b3JlIHRva2VuIGlkIG9uIHRoaXM/CiAgICAgc3RydWN0IFBhcnQgewogICAgICAgIHVpbnQzMiB0b2tlbklkOwogICAgICAgIHVpbnQ4IHBhcnRUeXBlOwogICAgICAgIHVpbnQ4IHBhcnRTdWJUeXBlOwogICAgICAgIHVpbnQ4IHJhcml0eTsKICAgICAgICB1aW50OCBlbGVtZW50OwogICAgICAgIHVpbnQzMiBiYXR0bGVzTGFzdERheTsKICAgICAgICB1aW50MzIgZXhwZXJpZW5jZTsKICAgICAgICB1aW50MzIgZm9yZ2VUaW1lOwogICAgICAgIHVpbnQzMiBiYXR0bGVzTGFzdFJlc2V0OwogICAgfQoKICAgIC8vIFBhcnQgdHlwZSAtIGNhbiBiZSBzaGFyZWQgd2l0aCBvdGhlciBwYXJ0IGZhY3Rvcmllcy4KICAgIHVpbnQ4IGNvbnN0YW50IERFRkVOQ0UgPSAxOwogICAgdWludDggY29uc3RhbnQgTUVMRUUgPSAyOwogICAgdWludDggY29uc3RhbnQgQk9EWSA9IDM7CiAgICB1aW50OCBjb25zdGFudCBUVVJSRVQgPSA0OwoKICAgIC8vIFJhcml0eSAtIGNhbiBiZSBzaGFyZWQgd2l0aCBvdGhlciBwYXJ0IGZhY3Rvcmllcy4KICAgIHVpbnQ4IGNvbnN0YW50IFNUQU5EQVJEID0gMTsKICAgIHVpbnQ4IGNvbnN0YW50IFNIQURPVyA9IDI7CiAgICB1aW50OCBjb25zdGFudCBHT0xEID0gMzsKCgogICAgLy8gU3RvcmUgYSB1c2VyIHN0cnVjdAogICAgLy8gaW4gb3JkZXIgdG8ga2VlcCB0cmFjayBvZiBleHBlcmllbmNlIGFuZCBwZXJrIGNob2ljZXMuCiAgICAvLyBUaGlzIHBlcmsgdHJlZSBpcyBhIGJpbmFyeSB0cmVlLCBlZmZpY2llbnRseSBlbmNvZGFibGUgYXMgYW4gYXJyYXkuCiAgICAvLyAwIHJlZmxlY3RzIG5vIHBlcmsgc2VsZWN0ZWQuIDEgaXMgZmlyc3QgY2hvaWNlLiAyIGlzIHNlY29uZC4gMyBpcyBib3RoLgogICAgLy8gRWFjaCBjaG9pY2UgY29zdHMgZXhwZXJpZW5jZSAoZGVkdWN0ZWQgZnJvbSB1c2VyIHN0cnVjdCkuCgogICAgLyoqKiB+fn5+flJPQk9UIFBFUktTfn5+fn4gKioqLwogICAgLy8gUEVSSyAxOiBBVFRBQ0sgdnMgREVGRU5DRSBQRVJLIENIT0lDRS4KICAgIC8vIENob29zZQogICAgLy8gUEVSSyBUV08gQVRUQUNLLyBTSE9PVCwgb3IgREVGRU5EL0RPREdFCiAgICAvLyBQRVJLIDI6IE1FQ0ggdnMgRUxFTUVOVEFMIFBFUksgQ0hPSUNFIC0tLQogICAgLy8gQ2hvb3NlIHN0ZWVsIGFuZCBlbGVjdHJpYyAoTWVjaCBwYXRoKSwgb3Igd2F0ZXIgYW5kIGZpcmUgKEVsZW1ldGFsIHBhdGgpCiAgICAvLyAoLi4uIHdpbGwgdGhlIG1lY2hzIHdpbiB0aGUgd2FyIGZvciBFdGhlcnRvcGlhPyBvciB3aWxsIHRoZSBhbmRyb2lkcwogICAgLy8gYmUgZGVsdWdlZCBpbiBmbG9vZCBhbmQgZmlyZT8gLi4uKQogICAgLy8gUEVSSyAzOiBDb21taXQgdG8gYSBzcGVjaWZpYyBlbGVtZW50YWwgcGF0aHdheToKICAgIC8vIDEuIHRoZSBwYXRoIG9mIHN0ZWVsOiB0aGUgaXJvbiBzd29yZDsgdGhlIGJ1cm5pbmcgZnJ5aW5nIHBhbiEKICAgIC8vIDIuIHRoZSBwYXRoIG9mIGVsZWN0cmljaXR5OiB0aGUgZGVhZGx5IHRhc2VyLCB0aGUgZmVhcnNvbWUgZm9yY2VmaWVsZAogICAgLy8gMy4gdGhlIHBhdGggb2Ygd2F0ZXI6IGhpZ2ggcHJlc3N1cmUgd2F0ZXIgYmxhc3RlcnMgaGF2ZSBuZXZlciBiZWVuIHNvIGNvb2wKICAgIC8vIDQuIHRoZSBwYXRoIG9mIGZpcmUhOiB3ZSB3aWxsIGh1bnQgeW91IGRvd24sIEFhbmcuLi4KCgogICAgc3RydWN0IFVzZXIgewogICAgICAgIC8vIGFkZHJlc3MgdXNlckFkZHJlc3M7CiAgICAgICAgdWludDMyIG51bVNoYXJkczsgLy9saW1pdCBzaGFyZHMgdG8gdXBwZXIgYm91bmQgZWcgMTAwMDAKICAgICAgICB1aW50MzIgZXhwZXJpZW5jZTsKICAgICAgICB1aW50OFszMl0gcGVya3M7CiAgICB9CgogICAgLy9NYWludGFpbiBhbiBhcnJheSBvZiBhbGwgdXNlcnMuCiAgICAvLyBVc2VyW10gcHVibGljIHVzZXJzOwoKICAgIC8vIFN0b3JlIGEgbWFwIG9mIHRoZSBhZGRyZXNzIHRvIGEgdWludCByZXByZXNlbnRpbmcgaW5kZXggb2YgVXNlciB3aXRoaW4gdXNlcnMKICAgIC8vIHdlIGNoZWNrIGlmIGEgdXNlciBleGlzdHMgYXQgbXVsdGlwbGUgcG9pbnRzLCBldmVyeSB0aW1lIHRoZXkgYWNxdWlyZQogICAgLy8gdmlhIGEgY3JhdGUgb3IgdGhlIG1hcmtldC4gVXNlcnMgY2FuIGFsc28gbWFudWFsbHkgcmVnaXN0ZXIgdGhlaXIgYWRkcmVzcy4KICAgIG1hcHBpbmcgKCBhZGRyZXNzID0+IFVzZXIgKSBwdWJsaWMgYWRkcmVzc1RvVXNlcjsKCiAgICAvLyBBcnJheSBjb250YWluaW5nIHRoZSBzdHJ1Y3RzIG9mIGFsbCBwYXJ0cyBpbiBleGlzdGVuY2UuIFRoZSBJRAogICAgLy8gb2YgZWFjaCBwYXJ0IGlzIGFuIGluZGV4IGludG8gdGhpcyBhcnJheS4KICAgIFBhcnRbXSBwYXJ0czsKCiAgICAvLyBNYXBwaW5nIGZyb20gcGFydCBJRHMgdG8gdG8gb3duaW5nIGFkZHJlc3MuIFNob3VsZCBhbHdheXMgZXhpc3QuCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBwYXJ0SW5kZXhUb093bmVyOwoKICAgIC8vICBBIG1hcHBpbmcgZnJvbSBvd25lciBhZGRyZXNzIHRvIGNvdW50IG9mIHRva2VucyB0aGF0IGFkZHJlc3Mgb3ducy4KICAgIC8vICBVc2VkIGludGVybmFsbHkgaW5zaWRlIGJhbGFuY2VPZigpIHRvIHJlc29sdmUgb3duZXJzaGlwIGNvdW50LiBSRU1PVkU/CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGFkZHJlc3NUb1Rva2Vuc093bmVkOwoKICAgIC8vIE1hcHBpbmcgZnJvbSBQYXJ0IElEIHRvIGFuIGFkZHJlc3MgYXBwcm92ZWQgdG8gY2FsbCB0cmFuc2ZlckZyb20oKS4KICAgIC8vIG1heGltdW0gb2Ygb25lIGFwcHJvdmVkIGFkZHJlc3MgZm9yIHRyYW5zZmVyIGF0IGFueSB0aW1lLgogICAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgcGFydEluZGV4VG9BcHByb3ZlZDsKCiAgICBhZGRyZXNzIGF1Y3Rpb247CiAgICAvLyBhZGRyZXNzIHNjcmFweWFyZDsKCiAgICAvLyBBcnJheSB0byBzdG9yZSBhcHByb3ZlZCBiYXR0bGUgY29udHJhY3RzLgogICAgLy8gQ2FuIG9ubHkgZXZlciBiZSBhZGRlZCB0bywgbm90IHJlbW92ZWQgZnJvbS4KICAgIC8vIE9uY2UgYSBydWxlc2V0IGlzIHB1Ymxpc2hlZCwgeW91IHdpbGwgQUxXQVlTIGJlIGFibGUgdG8gdXNlIHRoYXQgY29udHJhY3QKICAgIGFkZHJlc3NbXSBhcHByb3ZlZEJhdHRsZXM7CgoKICAgIGZ1bmN0aW9uIGdldFVzZXJCeUFkZHJlc3MoYWRkcmVzcyBfdXNlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDMyLCB1aW50OFszMl0pIHsKICAgICAgICByZXR1cm4gKGFkZHJlc3NUb1VzZXJbX3VzZXJdLmV4cGVyaWVuY2UsIGFkZHJlc3NUb1VzZXJbX3VzZXJdLnBlcmtzKTsKICAgIH0KCiAgICAvLyAgVHJhbnNmZXIgYSBwYXJ0IHRvIGFuIGFkZHJlc3MKICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgICAgIC8vIE5vIGNhcCBvbiBudW1iZXIgb2YgcGFydHMKICAgICAgICAvLyBWZXJ5IHVubGlrZWx5IHRvIGV2ZXIgYmUgMl4yNTYgcGFydHMgb3duZWQgYnkgb25lIGFjY291bnQKICAgICAgICAvLyBTaG91bGRuJ3Qgd2FzdGUgZ2FzIGNoZWNraW5nIGZvciBvdmVyZmxvdwogICAgICAgIC8vIG5vIHBvaW50IG1ha2luZyBpdCBsZXNzIHRoYW4gYSB1aW50IC0tPiBtYXBwaW5ncyBkb24ndCBwYWNrCiAgICAgICAgYWRkcmVzc1RvVG9rZW5zT3duZWRbX3RvXSsrOwogICAgICAgIC8vIHRyYW5zZmVyIG93bmVyc2hpcAogICAgICAgIHBhcnRJbmRleFRvT3duZXJbX3Rva2VuSWRdID0gX3RvOwogICAgICAgIC8vIE5ldyBwYXJ0cyBhcmUgdHJhbnNmZXJyZWQgX2Zyb20gMHgwLCBidXQgd2UgY2FuJ3QgYWNjb3VudCB0aGF0IGFkZHJlc3MuCiAgICAgICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgYWRkcmVzc1RvVG9rZW5zT3duZWRbX2Zyb21dLS07CiAgICAgICAgICAgIC8vIGNsZWFyIGFueSBwcmV2aW91c2x5IGFwcHJvdmVkIG93bmVyc2hpcCBleGNoYW5nZQogICAgICAgICAgICBkZWxldGUgcGFydEluZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF07CiAgICAgICAgfQogICAgICAgIC8vIEVtaXQgdGhlIHRyYW5zZmVyIGV2ZW50LgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQYXJ0QnlJZCh1aW50IF9pZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICgKICAgICAgICB1aW50MzIgdG9rZW5JZCwKICAgICAgICB1aW50OCBwYXJ0VHlwZSwKICAgICAgICB1aW50OCBwYXJ0U3ViVHlwZSwKICAgICAgICB1aW50OCByYXJpdHksCiAgICAgICAgdWludDggZWxlbWVudCwKICAgICAgICB1aW50MzIgYmF0dGxlc0xhc3REYXksCiAgICAgICAgdWludDMyIGV4cGVyaWVuY2UsCiAgICAgICAgdWludDMyIGZvcmdlVGltZSwKICAgICAgICB1aW50MzIgYmF0dGxlc0xhc3RSZXNldAogICAgKSB7CiAgICAgICAgUGFydCBtZW1vcnkgcCA9IHBhcnRzW19pZF07CiAgICAgICAgcmV0dXJuIChwLnRva2VuSWQsIHAucGFydFR5cGUsIHAucGFydFN1YlR5cGUsIHAucmFyaXR5LCBwLmVsZW1lbnQsIHAuYmF0dGxlc0xhc3REYXksIHAuZXhwZXJpZW5jZSwgcC5mb3JnZVRpbWUsIHAuYmF0dGxlc0xhc3RSZXNldCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIHN1YnN0cmluZyhzdHJpbmcgc3RyLCB1aW50IHN0YXJ0SW5kZXgsIHVpbnQgZW5kSW5kZXgpIGludGVybmFsIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICAgICAgYnl0ZXMgbWVtb3J5IHN0ckJ5dGVzID0gYnl0ZXMoc3RyKTsKICAgICAgICBieXRlcyBtZW1vcnkgcmVzdWx0ID0gbmV3IGJ5dGVzKGVuZEluZGV4LXN0YXJ0SW5kZXgpOwogICAgICAgIGZvciAodWludCBpID0gc3RhcnRJbmRleDsgaSA8IGVuZEluZGV4OyBpKyspIHsKICAgICAgICAgICAgcmVzdWx0W2ktc3RhcnRJbmRleF0gPSBzdHJCeXRlc1tpXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0cmluZyhyZXN1bHQpOwogICAgfQoKICAgIC8vIGhlbHBlciBmdW5jdGlvbnMgYWRhcHRlZCBmcm9tICBKb3NzaWUgQ2FsZGVyb24gb24gc3RhY2tleGNoYW5nZQogICAgZnVuY3Rpb24gc3RyaW5nVG9VaW50MzIoc3RyaW5nIHMpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDMyKSB7CiAgICAgICAgYnl0ZXMgbWVtb3J5IGIgPSBieXRlcyhzKTsKICAgICAgICB1aW50IHJlc3VsdCA9IDA7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgeyAvLyBjID0gYltpXSB3YXMgbm90IG5lZWRlZAogICAgICAgICAgICBpZiAoYltpXSA+PSA0OCAmJiBiW2ldIDw9IDU3KSB7CiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKiAxMCArICh1aW50KGJbaV0pIC0gNDgpOyAvLyBieXRlcyBhbmQgaW50IGFyZSBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSBvcGVyYXRvciAtLgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB1aW50MzIocmVzdWx0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdHJpbmdUb1VpbnQ4KHN0cmluZyBzKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgcmV0dXJuIHVpbnQ4KHN0cmluZ1RvVWludDMyKHMpKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1aW50VG9TdHJpbmcodWludCB2KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgICAgIHVpbnQgbWF4bGVuZ3RoID0gMTAwOwogICAgICAgIGJ5dGVzIG1lbW9yeSByZXZlcnNlZCA9IG5ldyBieXRlcyhtYXhsZW5ndGgpOwogICAgICAgIHVpbnQgaSA9IDA7CiAgICAgICAgd2hpbGUgKHYgIT0gMCkgewogICAgICAgICAgICB1aW50IHJlbWFpbmRlciA9IHYgJSAxMDsKICAgICAgICAgICAgdiA9IHYgLyAxMDsKICAgICAgICAgICAgcmV2ZXJzZWRbaSsrXSA9IGJ5dGUoNDggKyByZW1haW5kZXIpOwogICAgICAgIH0KICAgICAgICBieXRlcyBtZW1vcnkgcyA9IG5ldyBieXRlcyhpKTsgLy8gaSArIDEgaXMgaW5lZmZpY2llbnQKICAgICAgICBmb3IgKHVpbnQgaiA9IDA7IGogPCBpOyBqKyspIHsKICAgICAgICAgICAgc1tqXSA9IHJldmVyc2VkW2kgLSBqIC0gMV07IC8vIHRvIGF2b2lkIHRoZSBvZmYtYnktb25lIGVycm9yCiAgICAgICAgfQogICAgICAgIHN0cmluZyBtZW1vcnkgc3RyID0gc3RyaW5nKHMpOwogICAgICAgIHJldHVybiBzdHI7CiAgICB9Cn0KCgovLyBUaGlzIGNvbnRyYWN0IGltcGxlbWVudHMgYm90aCB0aGUgb3JpZ2luYWwgRVJDLTcyMSBzdGFuZGFyZCBhbmQKLy8gdGhlIHByb3Bvc2VkICdkZWVkJyBzdGFuZGFyZCBvZiA4NDEKLy8gSSBkb24ndCBrbm93IHdoaWNoIHN0YW5kYXJkIHdpbGwgZXZlbnR1YWxseSBiZSBhZG9wdGVkIC0gc3VwcG9ydCBib3RoIGZvciBub3cKCgovLy8gQHRpdGxlIEludGVyZmFjZSBmb3IgY29udHJhY3RzIGNvbmZvcm1pbmcgdG8gRVJDLTcyMTogRGVlZCBTdGFuZGFyZAovLy8gQGF1dGhvciBXaWxsaWFtIEVudHJpa2VuIChodHRwczovL3Bob3IubmV0KSwgZXQuIGFsLgovLy8gQGRldiBTcGVjaWZpY2F0aW9uIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9laXBzLzg0MQovLy8gY2FuIHJlYWQgdGhlIGNvbW1lbnRzIHRoZXJlCmNvbnRyYWN0IEVSQzcyMSB7CgogICAgLy8gQ09NUExJQU5DRSBXSVRIIEVSQy0xNjUgKERSQUZUKQoKICAgIC8vLyBAZGV2IEVSQy0xNjUgKGRyYWZ0KSBpbnRlcmZhY2Ugc2lnbmF0dXJlIGZvciBpdHNlbGYKICAgIGJ5dGVzNCBpbnRlcm5hbCBjb25zdGFudCBJTlRFUkZBQ0VfU0lHTkFUVVJFX0VSQzE2NSA9CiAgICAgICAgYnl0ZXM0KGtlY2NhazI1Nigic3VwcG9ydHNJbnRlcmZhY2UoYnl0ZXM0KSIpKTsKCiAgICAvLy8gQGRldiBFUkMtMTY1IChkcmFmdCkgaW50ZXJmYWNlIHNpZ25hdHVyZSBmb3IgRVJDNzIxCiAgICBieXRlczQgaW50ZXJuYWwgY29uc3RhbnQgSU5URVJGQUNFX1NJR05BVFVSRV9FUkM3MjEgPQogICAgICAgICBieXRlczQoa2VjY2FrMjU2KCJvd25lck9mKHVpbnQyNTYpIikpIF4KICAgICAgICAgYnl0ZXM0KGtlY2NhazI1NigiY291bnRPZkRlZWRzKCkiKSkgXgogICAgICAgICBieXRlczQoa2VjY2FrMjU2KCJjb3VudE9mRGVlZHNCeU93bmVyKGFkZHJlc3MpIikpIF4KICAgICAgICAgYnl0ZXM0KGtlY2NhazI1NigiZGVlZE9mT3duZXJCeUluZGV4KGFkZHJlc3MsdWludDI1NikiKSkgXgogICAgICAgICBieXRlczQoa2VjY2FrMjU2KCJhcHByb3ZlKGFkZHJlc3MsdWludDI1NikiKSkgXgogICAgICAgICBieXRlczQoa2VjY2FrMjU2KCJ0YWtlT3duZXJzaGlwKHVpbnQyNTYpIikpOwoKICAgIGZ1bmN0aW9uIHN1cHBvcnRzSW50ZXJmYWNlKGJ5dGVzNCBfaW50ZXJmYWNlSUQpIGV4dGVybmFsIHB1cmUgcmV0dXJucyAoYm9vbCk7CgogICAgLy8gUFVCTElDIFFVRVJZIEZVTkNUSU9OUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfZGVlZElkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIF9vd25lcik7CiAgICBmdW5jdGlvbiBjb3VudE9mRGVlZHMoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2NvdW50KTsKICAgIGZ1bmN0aW9uIGNvdW50T2ZEZWVkc0J5T3duZXIoYWRkcmVzcyBfb3duZXIpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiBfY291bnQpOwogICAgZnVuY3Rpb24gZGVlZE9mT3duZXJCeUluZGV4KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9pbmRleCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2IF9kZWVkSWQpOwoKICAgIC8vIFRSQU5TRkVSIE1FQ0hBTklTTSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGluZGV4ZWQgZGVlZElkKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIGFwcHJvdmVkLCB1aW50MjU2IGluZGV4ZWQgZGVlZElkKTsKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9kZWVkSWQpIGV4dGVybmFsIHBheWFibGU7CiAgICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX2RlZWRJZCkgZXh0ZXJuYWwgcGF5YWJsZTsKfQoKLy8vIEB0aXRsZSBNZXRhZGF0YSBleHRlbnNpb24gdG8gRVJDLTcyMSBpbnRlcmZhY2UKLy8vIEBhdXRob3IgV2lsbGlhbSBFbnRyaWtlbiAoaHR0cHM6Ly9waG9yLm5ldCkKLy8vIEBkZXYgU3BlY2lmaWNhdGlvbiBhdCBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vZWlwcy9pc3N1ZXMvWFhYWApjb250cmFjdCBFUkM3MjFNZXRhZGF0YSBpcyBFUkM3MjEgewoKICAgIGJ5dGVzNCBpbnRlcm5hbCBjb25zdGFudCBJTlRFUkZBQ0VfU0lHTkFUVVJFX0VSQzcyMU1ldGFkYXRhID0KICAgICAgICBieXRlczQoa2VjY2FrMjU2KCJuYW1lKCkiKSkgXgogICAgICAgIGJ5dGVzNChrZWNjYWsyNTYoInN5bWJvbCgpIikpIF4KICAgICAgICBieXRlczQoa2VjY2FrMjU2KCJkZWVkVXJpKHVpbnQyNTYpIikpOwoKICAgIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcgbik7CiAgICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcgcyk7CgogICAgLy8vIEBub3RpY2UgQSBkaXN0aW5jdCBVUkkgKFJGQyAzOTg2KSBmb3IgYSBnaXZlbiB0b2tlbi4KICAgIC8vLyBAZGV2IElmOgogICAgLy8vICAqIFRoZSBVUkkgaXMgYSBVUkwKICAgIC8vLyAgKiBUaGUgVVJMIGlzIGFjY2Vzc2libGUKICAgIC8vLyAgKiBUaGUgVVJMIHBvaW50cyB0byBhIHZhbGlkIEpTT04gZmlsZSBmb3JtYXQgKEVDTUEtNDA0IDJuZCBlZC4pCiAgICAvLy8gICogVGhlIEpTT04gYmFzZSBlbGVtZW50IGlzIGFuIG9iamVjdAogICAgLy8vICB0aGVuIHRoZXNlIG5hbWVzIG9mIHRoZSBiYXNlIGVsZW1lbnQgU0hBTEwgaGF2ZSBzcGVjaWFsIG1lYW5pbmc6CiAgICAvLy8gICogIm5hbWUiOiBBIHN0cmluZyBpZGVudGlmeWluZyB0aGUgaXRlbSB0byB3aGljaCBgX2RlZWRJZGAgZ3JhbnRzCiAgICAvLy8gICAgb3duZXJzaGlwCiAgICAvLy8gICogImRlc2NyaXB0aW9uIjogQSBzdHJpbmcgZGV0YWlsaW5nIHRoZSBpdGVtIHRvIHdoaWNoIGBfZGVlZElkYCBncmFudHMKICAgIC8vLyAgICBvd25lcnNoaXAKICAgIC8vLyAgKiAiaW1hZ2UiOiBBIFVSSSBwb2ludGluZyB0byBhIGZpbGUgb2YgaW1hZ2UvKiBtaW1lIHR5cGUgcmVwcmVzZW50aW5nCiAgICAvLy8gICAgdGhlIGl0ZW0gdG8gd2hpY2ggYF9kZWVkSWRgIGdyYW50cyBvd25lcnNoaXAKICAgIC8vLyAgV2FsbGV0cyBhbmQgZXhjaGFuZ2VzIE1BWSBkaXNwbGF5IHRoaXMgdG8gdGhlIGVuZCB1c2VyLgogICAgLy8vICBDb25zaWRlciBtYWtpbmcgYW55IGltYWdlcyBhdCBhIHdpZHRoIGJldHdlZW4gMzIwIGFuZCAxMDgwIHBpeGVscyBhbmQKICAgIC8vLyAgYXNwZWN0IHJhdGlvIGJldHdlZW4gMS45MToxIGFuZCA0OjUgaW5jbHVzaXZlLgogICAgZnVuY3Rpb24gZGVlZFVyaSh1aW50MjU2IF9kZWVkSWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoc3RyaW5nIF91cmkpOwp9CgovLy8gQHRpdGxlIEVudW1lcmF0aW9uIGV4dGVuc2lvbiB0byBFUkMtNzIxIGludGVyZmFjZQovLy8gQGF1dGhvciBXaWxsaWFtIEVudHJpa2VuIChodHRwczovL3Bob3IubmV0KQovLy8gQGRldiBTcGVjaWZpY2F0aW9uIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9laXBzL2lzc3Vlcy9YWFhYCmNvbnRyYWN0IEVSQzcyMUVudW1lcmFibGUgaXMgRVJDNzIxTWV0YWRhdGEgewoKICAgIC8vLyBAZGV2IEVSQy0xNjUgKGRyYWZ0KSBpbnRlcmZhY2Ugc2lnbmF0dXJlIGZvciBFUkM3MjEKICAgIGJ5dGVzNCBpbnRlcm5hbCBjb25zdGFudCBJTlRFUkZBQ0VfU0lHTkFUVVJFX0VSQzcyMUVudW1lcmFibGUgPQogICAgICAgIGJ5dGVzNChrZWNjYWsyNTYoImRlZWRCeUluZGV4KCkiKSkgXgogICAgICAgIGJ5dGVzNChrZWNjYWsyNTYoImNvdW50T2ZPd25lcnMoKSIpKSBeCiAgICAgICAgYnl0ZXM0KGtlY2NhazI1Nigib3duZXJCeUluZGV4KHVpbnQyNTYpIikpOwoKICAgIGZ1bmN0aW9uIGRlZWRCeUluZGV4KHVpbnQyNTYgX2luZGV4KSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2RlZWRJZCk7CiAgICBmdW5jdGlvbiBjb3VudE9mT3duZXJzKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2IF9jb3VudCk7CiAgICBmdW5jdGlvbiBvd25lckJ5SW5kZXgodWludDI1NiBfaW5kZXgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIpOwp9Cgpjb250cmFjdCBFUkM3MjFPcmlnaW5hbCB7CgogICAgYnl0ZXM0IGNvbnN0YW50IElOVEVSRkFDRV9TSUdOQVRVUkVfRVJDNzIxT3JpZ2luYWwgPQogICAgICAgIGJ5dGVzNChrZWNjYWsyNTYoInRvdGFsU3VwcGx5KCkiKSkgXgogICAgICAgIGJ5dGVzNChrZWNjYWsyNTYoImJhbGFuY2VPZihhZGRyZXNzKSIpKSBeCiAgICAgICAgYnl0ZXM0KGtlY2NhazI1Nigib3duZXJPZih1aW50MjU2KSIpKSBeCiAgICAgICAgYnl0ZXM0KGtlY2NhazI1NigiYXBwcm92ZShhZGRyZXNzLHVpbnQyNTYpIikpIF4KICAgICAgICBieXRlczQoa2VjY2FrMjU2KCJ0YWtlT3duZXJzaGlwKHVpbnQyNTYpIikpIF4KICAgICAgICBieXRlczQoa2VjY2FrMjU2KCJ0cmFuc2ZlcihhZGRyZXNzLHVpbnQyNTYpIikpOwoKICAgIC8vIENvcmUgZnVuY3Rpb25zCiAgICBmdW5jdGlvbiBpbXBsZW1lbnRzRVJDNzIxKCkgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfYmFsYW5jZSk7CiAgICBmdW5jdGlvbiBvd25lck9mKHVpbnQgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgX293bmVyKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQgX3Rva2VuSWQpIGV4dGVybmFsIHBheWFibGU7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3Rva2VuSWQpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF90b2tlbklkKSBwdWJsaWMgcGF5YWJsZTsKCiAgICAvLyBPcHRpb25hbCBmdW5jdGlvbnMKICAgIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcgX25hbWUpOwogICAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nIF9zeW1ib2wpOwogICAgZnVuY3Rpb24gdG9rZW5PZk93bmVyQnlJbmRleChhZGRyZXNzIF9vd25lciwgdWludCBfaW5kZXgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludCBfdG9rZW5JZCk7CiAgICBmdW5jdGlvbiB0b2tlbk1ldGFkYXRhKHVpbnQgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBfaW5mb1VybCk7CgogICAgLy8gRXZlbnRzCiAgICAvLyBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpOwogICAgLy8gZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9hcHByb3ZlZCwgdWludDI1NiBfdG9rZW5JZCk7Cn0KCmNvbnRyYWN0IEVSQzcyMUFsbEltcGxlbWVudGF0aW9ucyBpcyBFUkM3MjFPcmlnaW5hbCwgRVJDNzIxRW51bWVyYWJsZSB7Cgp9CgoKY29udHJhY3QgRXRoZXJib3RzTkZUIGlzIEV0aGVyYm90c0Jhc2UsIEVSQzcyMUVudW1lcmFibGUsIEVSQzcyMU9yaWdpbmFsIHsKICAgIGZ1bmN0aW9uIHN1cHBvcnRzSW50ZXJmYWNlKGJ5dGVzNCBfaW50ZXJmYWNlSUQpIGV4dGVybmFsIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAoX2ludGVyZmFjZUlEID09IEVSQzcyMU9yaWdpbmFsLklOVEVSRkFDRV9TSUdOQVRVUkVfRVJDNzIxT3JpZ2luYWwpIHx8CiAgICAgICAgICAgIChfaW50ZXJmYWNlSUQgPT0gRVJDNzIxLklOVEVSRkFDRV9TSUdOQVRVUkVfRVJDNzIxKSB8fAogICAgICAgICAgICAoX2ludGVyZmFjZUlEID09IEVSQzcyMU1ldGFkYXRhLklOVEVSRkFDRV9TSUdOQVRVUkVfRVJDNzIxTWV0YWRhdGEpIHx8CiAgICAgICAgICAgIChfaW50ZXJmYWNlSUQgPT0gRVJDNzIxRW51bWVyYWJsZS5JTlRFUkZBQ0VfU0lHTkFUVVJFX0VSQzcyMUVudW1lcmFibGUpOwogICAgfQogICAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nIF9uYW1lKSB7CiAgICAgIHJldHVybiAiRXRoZXJib3RzIjsKICAgIH0KCiAgICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcgX3NtYm9sKSB7CiAgICAgIHJldHVybiAiRVRIQk9UIjsKICAgIH0KCiAgICAvLyB0b3RhbCBzdXBwbHkgb2YgcGFydHMgLS0+IGFzIG5vIHBhcnRzIGFyZSBldmVyIGRlbGV0ZWQsIHRoaXMgaXMgc2ltcGx5CiAgICAvLyB0aGUgdG90YWwgc3VwcGx5IG9mIHBhcnRzIGV2ZXIgY3JlYXRlZAogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHBhcnRzLmxlbmd0aDsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2YgZGVlZHMgY3VycmVudGx5IGluIGV4aXN0ZW5jZS4KICAgIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgICBmdW5jdGlvbiBjb3VudE9mRGVlZHMoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gcGFydHMubGVuZ3RoOwogICAgfQoKICAgIC8vLS0vIGludGVybmFsIGZ1bmN0aW9uICAgIHdoaWNoIGNoZWNrcyB3aGV0aGVyIHRoZSB0b2tlbiB3aXRoIGlkIChfdG9rZW5JZCkKICAgIC8vLyBpcyBvd25lZCBieSB0aGUgKF9jbGFpbWFudCkgYWRkcmVzcwogICAgZnVuY3Rpb24gb3ducyhhZGRyZXNzIF9vd25lciwgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAocGFydEluZGV4VG9Pd25lcltfdG9rZW5JZF0gPT0gX293bmVyKTsKICAgIH0KCiAgICAvLy8gaW50ZXJuYWwgZnVuY3Rpb24gICAgd2hpY2ggY2hlY2tzIHdoZXRoZXIgdGhlIHRva2VuIHdpdGggaWQgKF90b2tlbklkKQogICAgLy8vIGlzIG93bmVkIGJ5IHRoZSAoX2NsYWltYW50KSBhZGRyZXNzCiAgICBmdW5jdGlvbiBvd25zQWxsKGFkZHJlc3MgX293bmVyLCB1aW50MjU2W10gX3Rva2VuSWRzKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG9rZW5JZHMubGVuZ3RoID4gMCk7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX3Rva2VuSWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChwYXJ0SW5kZXhUb093bmVyW190b2tlbklkc1tpXV0gIT0gX293bmVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gX2FwcHJvdmUodWludDI1NiBfdG9rZW5JZCwgYWRkcmVzcyBfYXBwcm92ZWQpIGludGVybmFsIHsKICAgICAgICBwYXJ0SW5kZXhUb0FwcHJvdmVkW190b2tlbklkXSA9IF9hcHByb3ZlZDsKICAgIH0KCiAgICBmdW5jdGlvbiBfYXBwcm92ZWRGb3IoYWRkcmVzcyBfbmV3T3duZXIsIHVpbnQyNTYgX3Rva2VuSWQpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAocGFydEluZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX25ld093bmVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvd25lckJ5SW5kZXgodWludDI1NiBfaW5kZXgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIpewogICAgICAgIHJldHVybiBwYXJ0SW5kZXhUb093bmVyW19pbmRleF07CiAgICB9CgogICAgLy8gcmV0dXJucyB0aGUgTlVNQkVSIG9mIHRva2VucyBvd25lZCBieSAoX293bmVyKQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGNvdW50KSB7CiAgICAgICAgcmV0dXJuIGFkZHJlc3NUb1Rva2Vuc093bmVkW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gY291bnRPZkRlZWRzQnlPd25lcihhZGRyZXNzIF9vd25lcikgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VPZihfb3duZXIpOwogICAgfQoKICAgIC8vIHRyYW5zZmVycyBhIHBhcnQgdG8gYW5vdGhlciBhY2NvdW50CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcGF5YWJsZSB7CiAgICAgICAgLy8gcGF5YWJsZSBmb3IgRVJDNzIxIC0tPiBkb24ndCBhY3R1YWxseSBzZW5kIGV0aCBAPHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSIwMzVjNDMiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L3NwYW4+CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPT0gMCk7CgogICAgICAgIC8vIFNhZmV0eSBjaGVja3MgdG8gcHJldmVudCBhY2NpZGVudGFsIHRyYW5zZmVycyB0byBjb21tb24gYWNjb3VudHMKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKHRoaXMpKTsKICAgICAgICAvLyBjYW4ndCB0cmFuc2ZlciBwYXJ0cyB0byB0aGUgYXVjdGlvbiBjb250cmFjdCBkaXJlY3RseQogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoYXVjdGlvbikpOwogICAgICAgIC8vIGNhbid0IHRyYW5zZmVyIHBhcnRzIHRvIGFueSBvZiB0aGUgYmF0dGxlIGNvbnRyYWN0cyBkaXJlY3RseQogICAgICAgIGZvciAodWludCBqID0gMDsgaiA8IGFwcHJvdmVkQmF0dGxlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICByZXF1aXJlKF90byAhPSBhcHByb3ZlZEJhdHRsZXNbal0pOwogICAgICAgIH0KCiAgICAgICAgLy8gQ2Fubm90IHNlbmQgdG9rZW5zIHlvdSBkb24ndCBvd24KICAgICAgICByZXF1aXJlKG93bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKCiAgICAgICAgLy8gcGVyZm9ybSBzdGF0ZSBjaGFuZ2VzIG5lY2Vzc2FyeSBmb3IgdHJhbnNmZXIKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CiAgICAvLyB0cmFuc2ZlcnMgYSBwYXJ0IHRvIGFub3RoZXIgYWNjb3VudAoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyQWxsKGFkZHJlc3MgX3RvLCB1aW50MjU2W10gX3Rva2VuSWRzKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA9PSAwKTsKCiAgICAgICAgLy8gU2FmZXR5IGNoZWNrcyB0byBwcmV2ZW50IGFjY2lkZW50YWwgdHJhbnNmZXJzIHRvIGNvbW1vbiBhY2NvdW50cwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3ModGhpcykpOwogICAgICAgIC8vIGNhbid0IHRyYW5zZmVyIHBhcnRzIHRvIHRoZSBhdWN0aW9uIGNvbnRyYWN0IGRpcmVjdGx5CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcyhhdWN0aW9uKSk7CiAgICAgICAgLy8gY2FuJ3QgdHJhbnNmZXIgcGFydHMgdG8gYW55IG9mIHRoZSBiYXR0bGUgY29udHJhY3RzIGRpcmVjdGx5CiAgICAgICAgZm9yICh1aW50IGogPSAwOyBqIDwgYXBwcm92ZWRCYXR0bGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIHJlcXVpcmUoX3RvICE9IGFwcHJvdmVkQmF0dGxlc1tqXSk7CiAgICAgICAgfQoKICAgICAgICAvLyBDYW5ub3Qgc2VuZCB0b2tlbnMgeW91IGRvbid0IG93bgogICAgICAgIHJlcXVpcmUob3duc0FsbChtc2cuc2VuZGVyLCBfdG9rZW5JZHMpKTsKCiAgICAgICAgZm9yICh1aW50IGsgPSAwOyBrIDwgX3Rva2VuSWRzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgIC8vIHBlcmZvcm0gc3RhdGUgY2hhbmdlcyBuZWNlc3NhcnkgZm9yIHRyYW5zZmVyCiAgICAgICAgICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkc1trXSk7CiAgICAgICAgfQoKCiAgICB9CgoKICAgIC8vIGFwcHJvdmVzIHRoZSAoX3RvKSBhZGRyZXNzIHRvIHVzZSB0aGUgdHJhbnNmZXJGcm9tIGZ1bmN0aW9uIG9uIHRoZSB0b2tlbiB3aXRoIGlkIChfdG9rZW5JZCkKICAgIC8vIGlmIHlvdSB3YW50IHRvIGNsZWFyIGFsbCBhcHByb3ZhbHMsIHNpbXBseSBwYXNzIHRoZSB6ZXJvIGFkZHJlc3MKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2RlZWRJZCkgZXh0ZXJuYWwgd2hlbk5vdFBhdXNlZCBwYXlhYmxlIHsKICAgICAgICAvLyBwYXlhYmxlIGZvciBFUkM3MjEgLS0+IGRvbid0IGFjdHVhbGx5IHNlbmQgZXRoIEA8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjVlMDExZSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4KICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA9PSAwKTsKLy8gdXNlIGludGVybmFsIGZ1bmN0aW9uPwogICAgICAgIC8vIENhbm5vdCBhcHByb3ZlIHRoZSB0cmFuc2ZlciBvZiB0b2tlbnMgeW91IGRvbid0IG93bgogICAgICAgIHJlcXVpcmUob3ducyhtc2cuc2VuZGVyLCBfZGVlZElkKSk7CgogICAgICAgIC8vIFN0b3JlIHRoZSBhcHByb3ZhbCAoY2FuIG9ubHkgYXBwcm92ZSBvbmUgYXQgYSB0aW1lKQogICAgICAgIHBhcnRJbmRleFRvQXBwcm92ZWRbX2RlZWRJZF0gPSBfdG87CgogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX2RlZWRJZCk7CiAgICB9CgogICAgLy8gYXBwcm92ZXMgbWFueSB0b2tlbiBpZHMKICAgIGZ1bmN0aW9uIGFwcHJvdmVNYW55KGFkZHJlc3MgX3RvLCB1aW50MjU2W10gX3Rva2VuSWRzKSBleHRlcm5hbCB3aGVuTm90UGF1c2VkIHBheWFibGUgewoKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfdG9rZW5JZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdWludCBfdG9rZW5JZCA9IF90b2tlbklkc1tpXTsKCiAgICAgICAgICAgIC8vIENhbm5vdCBhcHByb3ZlIHRoZSB0cmFuc2ZlciBvZiB0b2tlbnMgeW91IGRvbid0IG93bgogICAgICAgICAgICByZXF1aXJlKG93bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKCiAgICAgICAgICAgIC8vIFN0b3JlIHRoZSBhcHByb3ZhbCAoY2FuIG9ubHkgYXBwcm92ZSBvbmUgYXQgYSB0aW1lKQogICAgICAgICAgICBwYXJ0SW5kZXhUb0FwcHJvdmVkW190b2tlbklkXSA9IF90bzsKICAgICAgICAgICAgLy9jcmVhdGUgZXZlbnQgZm9yIGVhY2ggYXBwcm92YWw/IF90b2tlbklkIGd1YXJhbnRlZWQgdG8gaG9sZCBjb3JyZWN0IHZhbHVlPwogICAgICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gdHJhbnNmZXIgdGhlIHBhcnQgd2l0aCBpZCAoX3Rva2VuSWQpIGZyb20gKF9mcm9tKSB0byAoX3RvKQogICAgLy8gKF90bykgbXVzdCBhbHJlYWR5IGJlIGFwcHJvdmVkIGZvciB0aGlzIChfdG9rZW5JZCkKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIHdoZW5Ob3RQYXVzZWQgewoKICAgICAgICAvLyBTYWZldHkgY2hlY2tzIHRvIHByZXZlbnQgYWNjaWRlbnRzCiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcyh0aGlzKSk7CgogICAgICAgIC8vIHNlbmRlciBtdXN0IGJlIGFwcHJvdmVkCiAgICAgICAgcmVxdWlyZShwYXJ0SW5kZXhUb0FwcHJvdmVkW190b2tlbklkXSA9PSBtc2cuc2VuZGVyKTsKICAgICAgICAvLyBmcm9tIG11c3QgY3VycmVudGx5IG93biB0aGUgdG9rZW4KICAgICAgICByZXF1aXJlKG93bnMoX2Zyb20sIF90b2tlbklkKSk7CgogICAgICAgIC8vIFJlYXNzaWduIG93bmVyc2hpcCAoYWxzbyBjbGVhcnMgcGVuZGluZyBhcHByb3ZhbHMgYW5kIGVtaXRzIFRyYW5zZmVyIGV2ZW50KS4KICAgICAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogICAgfQoKICAgIC8vIHJldHVybnMgdGhlIGN1cnJlbnQgb3duZXIgb2YgdGhlIHRva2VuIHdpdGggaWQgPSBfdG9rZW5JZAogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF9kZWVkSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgX293bmVyKSB7CiAgICAgICAgX293bmVyID0gcGFydEluZGV4VG9Pd25lcltfZGVlZElkXTsKICAgICAgICAvLyBtdXN0IHJlc3VsdCBmYWxzZSBpZiBpbmRleCBrZXkgbm90IGZvdW5kCiAgICAgICAgcmVxdWlyZShfb3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICB9CgogICAgLy8gcmV0dXJucyBhIGR5bmFtaWMgYXJyYXkgb2YgdGhlIGlkcyBvZiBhbGwgdG9rZW5zIHdoaWNoIGFyZSBvd25lZCBieSAoX293bmVyKQogICAgLy8gTG9vcGluZyB0aHJvdWdoIGV2ZXJ5IHBvc3NpYmxlIHBhcnQgYW5kIGNoZWNraW5nIGl0IGFnYWluc3QgdGhlIG93bmVyIGlzCiAgICAvLyBhY3R1YWxseSBtdWNoIG1vcmUgZWZmaWNpZW50IHRoYW4gc3RvcmluZyBhIG1hcHBpbmcgb3Igc29tZXRoaW5nLCBiZWNhdXNlCiAgICAvLyBpdCB3b24ndCBiZSBleGVjdXRlZCBhcyBhIHRyYW5zYWN0aW9uCiAgICBmdW5jdGlvbiB0b2tlbnNPZk93bmVyKGFkZHJlc3MgX293bmVyKSBleHRlcm5hbCB2aWV3IHJldHVybnModWludDI1NltdIG93bmVyVG9rZW5zKSB7CiAgICAgICAgdWludDI1NiB0b3RhbFBhcnRzID0gdG90YWxTdXBwbHkoKTsKCiAgICAgICAgcmV0dXJuIHRva2Vuc09mT3duZXJXaXRoaW5SYW5nZShfb3duZXIsIDAsIHRvdGFsUGFydHMpOwogIAogICAgfQoKICAgIGZ1bmN0aW9uIHRva2Vuc09mT3duZXJXaXRoaW5SYW5nZShhZGRyZXNzIF9vd25lciwgdWludCBfc3RhcnQsIHVpbnQgX251bVRvU2VhcmNoKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTZbXSBvd25lclRva2VucykgewogICAgICAgIHVpbnQyNTYgdG9rZW5Db3VudCA9IGJhbGFuY2VPZihfb3duZXIpOwoKICAgICAgICB1aW50MjU2W10gbWVtb3J5IHRtcFJlc3VsdCA9IG5ldyB1aW50MjU2W10odG9rZW5Db3VudCk7CiAgICAgICAgaWYgKHRva2VuQ291bnQgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gdG1wUmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgdWludDI1NiByZXN1bHRJbmRleCA9IDA7CiAgICAgICAgZm9yICh1aW50IHBhcnRJZCA9IF9zdGFydDsgcGFydElkIDwgX3N0YXJ0ICsgX251bVRvU2VhcmNoOyBwYXJ0SWQrKykgewogICAgICAgICAgICBpZiAocGFydEluZGV4VG9Pd25lcltwYXJ0SWRdID09IF9vd25lcikgewogICAgICAgICAgICAgICAgdG1wUmVzdWx0W3Jlc3VsdEluZGV4XSA9IHBhcnRJZDsKICAgICAgICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0SW5kZXggPT0gdG9rZW5Db3VudCkgeyAvL2ZvdW5kIGFsbCB0b2tlbnMgYWNjb3VudGVkIGZvciwgbm8gbmVlZCB0byBjb250aW51ZQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBjb3B5IG51bWJlciBvZiB0b2tlbnMgZm91bmQgaW4gZ2l2ZW4gcmFuZ2UKICAgICAgICB1aW50IHJlc3VsdExlbmd0aCA9IHJlc3VsdEluZGV4OwogICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXShyZXN1bHRMZW5ndGgpOwogICAgICAgIGZvciAodWludCBpPTA7IGk8cmVzdWx0TGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcmVzdWx0W2ldID0gdG1wUmVzdWx0W2ldOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKCgogICAgLy9zYW1lIGlzc3VlcyBhcyBhYm92ZQogICAgLy8gUmV0dXJucyBhbiBhcnJheSBvZiBhbGwgcGFydCBzdHJ1Y3RzIG93bmVkIGJ5IHRoZSB1c2VyLiBGcmVlIHRvIGNhbGwuCiAgICBmdW5jdGlvbiBnZXRQYXJ0c09mT3duZXIoYWRkcmVzcyBfb3duZXIpIGV4dGVybmFsIHZpZXcgcmV0dXJucyhieXRlczI0W10pIHsKICAgICAgICB1aW50MjU2IHRvdGFsUGFydHMgPSB0b3RhbFN1cHBseSgpOwoKICAgICAgICByZXR1cm4gZ2V0UGFydHNPZk93bmVyV2l0aGluUmFuZ2UoX293bmVyLCAwLCB0b3RhbFBhcnRzKTsKICAgIH0KICAgIAogICAgLy8gVGhpcyBpcyBwdWJsaWMgc28gaXQgY2FuIGJlIGNhbGxlZCBieSBnZXRQYXJ0c09mT3duZXIuIEl0IHNob3VsZCBOT1QgYmUgY2FsbGVkIGJ5IGFub3RoZXIgY29udHJhY3QKICAgIC8vIGFzIGl0IGlzIHZlcnkgZ2FzIGh1bmdyeS4KICAgIGZ1bmN0aW9uIGdldFBhcnRzT2ZPd25lcldpdGhpblJhbmdlKGFkZHJlc3MgX293bmVyLCB1aW50IF9zdGFydCwgdWludCBfbnVtVG9TZWFyY2gpIHB1YmxpYyB2aWV3IHJldHVybnMoYnl0ZXMyNFtdKSB7CiAgICAgICAgdWludDI1NiB0b2tlbkNvdW50ID0gYmFsYW5jZU9mKF9vd25lcik7CgogICAgICAgIHVpbnQgcmVzdWx0SW5kZXggPSAwOwogICAgICAgIGJ5dGVzMjRbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IGJ5dGVzMjRbXSh0b2tlbkNvdW50KTsKICAgICAgICBmb3IgKHVpbnQgcGFydElkID0gX3N0YXJ0OyBwYXJ0SWQgPCBfc3RhcnQgKyBfbnVtVG9TZWFyY2g7IHBhcnRJZCsrKSB7CiAgICAgICAgICAgIGlmIChwYXJ0SW5kZXhUb093bmVyW3BhcnRJZF0gPT0gX293bmVyKSB7CiAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0SW5kZXhdID0gX3BhcnRUb0J5dGVzKHBhcnRzW3BhcnRJZF0pOwogICAgICAgICAgICAgICAgcmVzdWx0SW5kZXgrKzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0OyAvLyB3aWxsIGhhdmUgMCBlbGVtZW50cyBpZiB0b2tlbkNvdW50ID09IDAKICAgIH0KCgogICAgZnVuY3Rpb24gX3BhcnRUb0J5dGVzKFBhcnQgcCkgaW50ZXJuYWwgcHVyZSByZXR1cm5zIChieXRlczI0IGIpIHsKICAgICAgICBiID0gYnl0ZXMyNChwLnRva2VuSWQpOwoKICAgICAgICBiID0gYiA8PCA4OwogICAgICAgIGIgPSBiIHwgYnl0ZXMyNChwLnBhcnRUeXBlKTsKCiAgICAgICAgYiA9IGIgPDwgODsKICAgICAgICBiID0gYiB8IGJ5dGVzMjQocC5wYXJ0U3ViVHlwZSk7CgogICAgICAgIGIgPSBiIDw8IDg7CiAgICAgICAgYiA9IGIgfCBieXRlczI0KHAucmFyaXR5KTsKCiAgICAgICAgYiA9IGIgPDwgODsKICAgICAgICBiID0gYiB8IGJ5dGVzMjQocC5lbGVtZW50KTsKCiAgICAgICAgYiA9IGIgPDwgMzI7CiAgICAgICAgYiA9IGIgfCBieXRlczI0KHAuYmF0dGxlc0xhc3REYXkpOwoKICAgICAgICBiID0gYiA8PCAzMjsKICAgICAgICBiID0gYiB8IGJ5dGVzMjQocC5leHBlcmllbmNlKTsKCiAgICAgICAgYiA9IGIgPDwgMzI7CiAgICAgICAgYiA9IGIgfCBieXRlczI0KHAuZm9yZ2VUaW1lKTsKCiAgICAgICAgYiA9IGIgPDwgMzI7CiAgICAgICAgYiA9IGIgfCBieXRlczI0KHAuYmF0dGxlc0xhc3RSZXNldCk7CiAgICB9CgogICAgdWludDMyIGNvbnN0YW50IEZJUlNUX0xFVkVMID0gMTAwMDsKICAgIHVpbnQzMiBjb25zdGFudCBJTkNSRU1FTlQgPSAxMDAwOwoKICAgIC8vIGV2ZXJ5IGxldmVsLCB5b3UgbmVlZCAxMDAwIG1vcmUgZXhwIHRvIGdvIHVwIGEgbGV2ZWwKICAgIGZ1bmN0aW9uIGdldExldmVsKHVpbnQzMiBfZXhwKSBwdWJsaWMgcHVyZSByZXR1cm5zKHVpbnQzMikgewogICAgICAgIHVpbnQzMiBjID0gMDsKICAgICAgICBmb3IgKHVpbnQzMiBpID0gRklSU1RfTEVWRUw7IGkgPD0gRklSU1RfTEVWRUwgKyBfZXhwOyBpICs9IGMgKiBJTkNSRU1FTlQpIHsKICAgICAgICAgICAgYysrOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBzdHJpbmcgbWV0YWRhdGFCYXNlID0gImh0dHBzOi8vYXBpLmV0aGVyYm90cy5pby9hcGkvIjsKCgogICAgZnVuY3Rpb24gc2V0TWV0YWRhdGFCYXNlKHN0cmluZyBfYmFzZSkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBtZXRhZGF0YUJhc2UgPSBfYmFzZTsKICAgIH0KCiAgICAvLyBwYXJ0IHR5cGUsIHN1YnR5cGUsCiAgICAvLyBoYXZlIG9uZSBpbnRlcm5hbCBmdW5jdGlvbiB3aGljaCBsZXRzIHVzIGltcGxlbWVudCB0aGUgZGl2ZXJnZW50IGludGVyZmFjZXMKICAgIGZ1bmN0aW9uIF9tZXRhZGF0YSh1aW50MjU2IF9pZCkgaW50ZXJuYWwgdmlldyByZXR1cm5zKHN0cmluZykgewogICAgICAgIFBhcnQgbWVtb3J5IHAgPSBwYXJ0c1tfaWRdOwogICAgICAgIHJldHVybiBzdHJDb25jYXQoc3RyQ29uY2F0KAogICAgICAgICAgICBtZXRhZGF0YUJhc2UsCiAgICAgICAgICAgIHVpbnRUb1N0cmluZyh1aW50KHAucGFydFR5cGUpKSwKICAgICAgICAgICAgIi8iLAogICAgICAgICAgICB1aW50VG9TdHJpbmcodWludChwLnBhcnRTdWJUeXBlKSksCiAgICAgICAgICAgICIvIgogICAgICAgICksIHVpbnRUb1N0cmluZyh1aW50KHAucmFyaXR5KSksICIiLCAiIiwgIiIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0ckNvbmNhdChzdHJpbmcgX2EsIHN0cmluZyBfYiwgc3RyaW5nIF9jLCBzdHJpbmcgX2QsIHN0cmluZyBfZSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zIChzdHJpbmcpewogICAgICAgIGJ5dGVzIG1lbW9yeSBfYmEgPSBieXRlcyhfYSk7CiAgICAgICAgYnl0ZXMgbWVtb3J5IF9iYiA9IGJ5dGVzKF9iKTsKICAgICAgICBieXRlcyBtZW1vcnkgX2JjID0gYnl0ZXMoX2MpOwogICAgICAgIGJ5dGVzIG1lbW9yeSBfYmQgPSBieXRlcyhfZCk7CiAgICAgICAgYnl0ZXMgbWVtb3J5IF9iZSA9IGJ5dGVzKF9lKTsKICAgICAgICBzdHJpbmcgbWVtb3J5IGFiY2RlID0gbmV3IHN0cmluZyhfYmEubGVuZ3RoICsgX2JiLmxlbmd0aCArIF9iYy5sZW5ndGggKyBfYmQubGVuZ3RoICsgX2JlLmxlbmd0aCk7CiAgICAgICAgYnl0ZXMgbWVtb3J5IGJhYmNkZSA9IGJ5dGVzKGFiY2RlKTsKICAgICAgICB1aW50IGsgPSAwOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IF9iYS5sZW5ndGg7IGkrKykgYmFiY2RlW2srK10gPSBfYmFbaV07CiAgICAgICAgZm9yIChpID0gMDsgaSA8IF9iYi5sZW5ndGg7IGkrKykgYmFiY2RlW2srK10gPSBfYmJbaV07CiAgICAgICAgZm9yIChpID0gMDsgaSA8IF9iYy5sZW5ndGg7IGkrKykgYmFiY2RlW2srK10gPSBfYmNbaV07CiAgICAgICAgZm9yIChpID0gMDsgaSA8IF9iZC5sZW5ndGg7IGkrKykgYmFiY2RlW2srK10gPSBfYmRbaV07CiAgICAgICAgZm9yIChpID0gMDsgaSA8IF9iZS5sZW5ndGg7IGkrKykgYmFiY2RlW2srK10gPSBfYmVbaV07CiAgICAgICAgcmV0dXJuIHN0cmluZyhiYWJjZGUpOwogICAgfQoKICAgIC8vLyBAbm90aWNlIEEgZGlzdGluY3QgVVJJIChSRkMgMzk4NikgZm9yIGEgZ2l2ZW4gdG9rZW4uCiAgICAvLy8gQGRldiBJZjoKICAgIC8vLyAgKiBUaGUgVVJJIGlzIGEgVVJMCiAgICAvLy8gICogVGhlIFVSTCBpcyBhY2Nlc3NpYmxlCiAgICAvLy8gICogVGhlIFVSTCBwb2ludHMgdG8gYSB2YWxpZCBKU09OIGZpbGUgZm9ybWF0IChFQ01BLTQwNCAybmQgZWQuKQogICAgLy8vICAqIFRoZSBKU09OIGJhc2UgZWxlbWVudCBpcyBhbiBvYmplY3QKICAgIC8vLyAgdGhlbiB0aGVzZSBuYW1lcyBvZiB0aGUgYmFzZSBlbGVtZW50IFNIQUxMIGhhdmUgc3BlY2lhbCBtZWFuaW5nOgogICAgLy8vICAqICJuYW1lIjogQSBzdHJpbmcgaWRlbnRpZnlpbmcgdGhlIGl0ZW0gdG8gd2hpY2ggYF9kZWVkSWRgIGdyYW50cwogICAgLy8vICAgIG93bmVyc2hpcAogICAgLy8vICAqICJkZXNjcmlwdGlvbiI6IEEgc3RyaW5nIGRldGFpbGluZyB0aGUgaXRlbSB0byB3aGljaCBgX2RlZWRJZGAgZ3JhbnRzCiAgICAvLy8gICAgb3duZXJzaGlwCiAgICAvLy8gICogImltYWdlIjogQSBVUkkgcG9pbnRpbmcgdG8gYSBmaWxlIG9mIGltYWdlLyogbWltZSB0eXBlIHJlcHJlc2VudGluZwogICAgLy8vICAgIHRoZSBpdGVtIHRvIHdoaWNoIGBfZGVlZElkYCBncmFudHMgb3duZXJzaGlwCiAgICAvLy8gIFdhbGxldHMgYW5kIGV4Y2hhbmdlcyBNQVkgZGlzcGxheSB0aGlzIHRvIHRoZSBlbmQgdXNlci4KICAgIC8vLyAgQ29uc2lkZXIgbWFraW5nIGFueSBpbWFnZXMgYXQgYSB3aWR0aCBiZXR3ZWVuIDMyMCBhbmQgMTA4MCBwaXhlbHMgYW5kCiAgICAvLy8gIGFzcGVjdCByYXRpbyBiZXR3ZWVuIDEuOTE6MSBhbmQgNDo1IGluY2x1c2l2ZS4KICAgIGZ1bmN0aW9uIGRlZWRVcmkodWludDI1NiBfZGVlZElkKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHN0cmluZyBfdXJpKXsKICAgICAgICByZXR1cm4gX21ldGFkYXRhKF9kZWVkSWQpOwogICAgfQoKICAgIC8vLyByZXR1cm5zIGEgbWV0YWRhdGEgVVJJCiAgICBmdW5jdGlvbiB0b2tlbk1ldGFkYXRhKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBpbmZvVXJsKSB7CiAgICAgICAgcmV0dXJuIF9tZXRhZGF0YShfdG9rZW5JZCk7CiAgICB9CgogICAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF9kZWVkSWQpIGV4dGVybmFsIHBheWFibGUgewogICAgICAgIC8vIHBheWFibGUgZm9yIEVSQzcyMSAtLT4gZG9uJ3QgYWN0dWFsbHkgc2VuZCBldGggQDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iOWZjMGRmIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPgogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID09IDApOwoKICAgICAgICBhZGRyZXNzIF9mcm9tID0gcGFydEluZGV4VG9Pd25lcltfZGVlZElkXTsKCiAgICAgICAgcmVxdWlyZShfYXBwcm92ZWRGb3IobXNnLnNlbmRlciwgX2RlZWRJZCkpOwoKICAgICAgICBfdHJhbnNmZXIoX2Zyb20sIG1zZy5zZW5kZXIsIF9kZWVkSWQpOwogICAgfQoKICAgIC8vIHBhcnRzIGFyZSBzdG9yZWQgc2VxdWVudGlhbGx5CiAgICBmdW5jdGlvbiBkZWVkQnlJbmRleCh1aW50MjU2IF9pbmRleCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2IF9kZWVkSWQpewogICAgICAgIHJldHVybiBfaW5kZXg7CiAgICB9CgogICAgZnVuY3Rpb24gY291bnRPZk93bmVycygpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiBfY291bnQpewogICAgICAgIC8vIFRPRE86IGltcGxlbWVudCB0aGlzCiAgICAgICAgcmV0dXJuIDA7CiAgICB9CgovLyB0aGlyc3R5IGZ1bmN0aW9uCiAgICBmdW5jdGlvbiB0b2tlbk9mT3duZXJCeUluZGV4KGFkZHJlc3MgX293bmVyLCB1aW50IF9pbmRleCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50IF90b2tlbklkKXsKICAgICAgICByZXR1cm4gX3Rva2VuT2ZPd25lckJ5SW5kZXgoX293bmVyLCBfaW5kZXgpOwogICAgfQoKLy8gY29kZSBkdXBsaWNhdGVkCiAgICBmdW5jdGlvbiBfdG9rZW5PZk93bmVyQnlJbmRleChhZGRyZXNzIF9vd25lciwgdWludCBfaW5kZXgpIHByaXZhdGUgdmlldyByZXR1cm5zICh1aW50IF90b2tlbklkKXsKICAgICAgICAvLyBUaGUgaW5kZXggc2hvdWxkIGJlIHZhbGlkLgogICAgICAgIHJlcXVpcmUoX2luZGV4IDwgYmFsYW5jZU9mKF9vd25lcikpOwoKICAgICAgICAvLyBjYW4gbG9vcCB0aHJvdWdoIGFsbCB3aXRob3V0CiAgICAgICAgdWludDI1NiBzZWVuID0gMDsKICAgICAgICB1aW50MjU2IHRvdGFsVG9rZW5zID0gdG90YWxTdXBwbHkoKTsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdG90YWxUb2tlbnM7IGkrKykgewogICAgICAgICAgICBpZiAocGFydEluZGV4VG9Pd25lcltpXSA9PSBfb3duZXIpIHsKICAgICAgICAgICAgICAgIGlmIChzZWVuID09IF9pbmRleCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2VlbisrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGRlZWRPZk93bmVyQnlJbmRleChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfaW5kZXgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiBfZGVlZElkKXsKICAgICAgICByZXR1cm4gX3Rva2VuT2ZPd25lckJ5SW5kZXgoX293bmVyLCBfaW5kZXgpOwogICAgfQp9CgoKCgoKLy8gQXVjdGlvbiBjb250cmFjdCwgZmFjaWxpdGF0aW5nIHN0YXRpY2FsbHkgcHJpY2VkIHNhbGVzLCBhcyB3ZWxsIGFzIAovLyBpbmZsYXRpb25hcnkgYW5kIGRlZmxhdGlvbmFyeSBwcmljaW5nIGZvciBpdGVtcy4KLy8gUmVsaWVzIGhlYXZpbHkgb24gdGhlIEVSQzcyMSBpbnRlcmZhY2UgYW5kIHNvIG1vc3Qgb2YgdGhlIG1ldGhvZHMKLy8gYXJlIHRpZ2h0bHkgYm91bmQgdG8gdGhhdCBpbXBsZW1lbnRhdGlvbgpjb250cmFjdCBORlRBdWN0aW9uQmFzZSBpcyBQYXVzYWJsZSB7CgogICAgRVJDNzIxQWxsSW1wbGVtZW50YXRpb25zIHB1YmxpYyBuZnRDb250cmFjdDsKICAgIHVpbnQyNTYgcHVibGljIG93bmVyQ3V0OwogICAgdWludCBwdWJsaWMgbWluRHVyYXRpb247CiAgICB1aW50IHB1YmxpYyBtYXhEdXJhdGlvbjsKCiAgICAvLyBSZXByZXNlbnRzIGFuIGF1Y3Rpb24gb24gYW4gTkZUIChpbiB0aGlzIGNhc2UsIFJvYm90IHBhcnQpCiAgICBzdHJ1Y3QgQXVjdGlvbiB7CiAgICAgICAgLy8gYWRkcmVzcyBvZiBwYXJ0IG93bmVyCiAgICAgICAgYWRkcmVzcyBzZWxsZXI7CiAgICAgICAgLy8gd2VpIHByaWNlIG9mIGxpc3RpbmcKICAgICAgICB1aW50MjU2IHN0YXJ0UHJpY2U7CiAgICAgICAgLy8gd2VpIHByaWNlIG9mIGZsb29yCiAgICAgICAgdWludDI1NiBlbmRQcmljZTsKICAgICAgICAvLyBkdXJhdGlvbiBvZiBzYWxlIGluIHNlY29uZHMuCiAgICAgICAgdWludDY0IGR1cmF0aW9uOwogICAgICAgIC8vIFRpbWUgd2hlbiBzYWxlIHN0YXJ0ZWQKICAgICAgICAvLyBSZXNldCB0byAwIGFmdGVyIHNhbGUgY29uY2x1ZGVkCiAgICAgICAgdWludDY0IHN0YXJ0OwogICAgfQoKICAgIGZ1bmN0aW9uIE5GVEF1Y3Rpb25CYXNlKCkgcHVibGljIHsKICAgICAgICBtaW5EdXJhdGlvbiA9IDYwIG1pbnV0ZXM7CiAgICAgICAgbWF4RHVyYXRpb24gPSAzMCBkYXlzOyAvLyBhcmJpdHJhcnkKICAgIH0KCiAgICAvLyBtYXAgb2YgYWxsIHRva2VucyBhbmQgdGhlaXIgYXVjdGlvbnMKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gQXVjdGlvbikgdG9rZW5JZFRvQXVjdGlvbjsKCiAgICBldmVudCBBdWN0aW9uQ3JlYXRlZCh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgc3RhcnRQcmljZSwgdWludDI1NiBlbmRQcmljZSwgdWludDY0IGR1cmF0aW9uLCB1aW50NjQgc3RhcnQpOwogICAgZXZlbnQgQXVjdGlvblN1Y2Nlc3NmdWwodWludDI1NiB0b2tlbklkLCB1aW50MjU2IHRvdGFsUHJpY2UsIGFkZHJlc3Mgd2lubmVyKTsKICAgIGV2ZW50IEF1Y3Rpb25DYW5jZWxsZWQodWludDI1NiB0b2tlbklkKTsKCiAgICAvLyByZXR1cm5zIHRydWUgaWYgdGhlIHRva2VuIHdpdGggaWQgX3BhcnRJZCBpcyBvd25lZCBieSB0aGUgX2NsYWltYW50IGFkZHJlc3MKICAgIGZ1bmN0aW9uIF9vd25zKGFkZHJlc3MgX2NsYWltYW50LCB1aW50MjU2IF9wYXJ0SWQpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBuZnRDb250cmFjdC5vd25lck9mKF9wYXJ0SWQpID09IF9jbGFpbWFudDsKICAgIH0KCiAgIC8vIHJldHVybnMgZmFsc2UgaWYgYXVjdGlvbiBzdGFydCB0aW1lIGlzIDAsIGxpa2VseSBmcm9tIHVuaW5pdGlhbGlzZWQgc3RydWN0CiAgICBmdW5jdGlvbiBfaXNBY3RpdmVBdWN0aW9uKEF1Y3Rpb24gX2F1Y3Rpb24pIGludGVybmFsIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBfYXVjdGlvbi5zdGFydCA+IDA7CiAgICB9CiAgICAKICAgIC8vIGFzc2lnbnMgb3duZXJzaGlwIG9mIHRoZSB0b2tlbiB3aXRoIGlkID0gX3BhcnRJZCB0byB0aGlzIGNvbnRyYWN0CiAgICAvLyBtdXN0IGhhdmUgYWxyZWFkeSBiZWVuIGFwcHJvdmVkCiAgICBmdW5jdGlvbiBfZXNjcm93KGFkZHJlc3MsIHVpbnQgX3BhcnRJZCkgaW50ZXJuYWwgewogICAgICAgIC8vIHRocm93cyBvbiB0cmFuc2ZlciBmYWlsCiAgICAgICAgbmZ0Q29udHJhY3QudGFrZU93bmVyc2hpcChfcGFydElkKTsKICAgIH0KCiAgICAvLyB0cmFuc2ZlciB0aGUgdG9rZW4gd2l0aCBpZCA9IF9wYXJ0SWQgdG8gYnV5aW5nIGFkZHJlc3MKICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9wdXJjaGFzb3IsIHVpbnQyNTYgX3BhcnRJZCkgaW50ZXJuYWwgewogICAgICAgIC8vIHN1Y2Nlc3NmdWwgcHVyY2hhc2VkZXIgbXVzdCB0YWtlT3duZXJzaGlwIG9mIF9wYXJ0SWQKICAgICAgICAvLyBuZnRDb250cmFjdC5hcHByb3ZlKF9wdXJjaGFzb3IsIF9wYXJ0SWQpOyAKICAgICAgICAgICAgICAgLy8gYWN0dWFsIHRyYW5zZmVyCiAgICAgICAgICAgICAgICBuZnRDb250cmFjdC50cmFuc2ZlcihfcHVyY2hhc29yLCBfcGFydElkKTsKCiAgICB9CgogICAgLy8gY3JlYXRlcwogICAgZnVuY3Rpb24gX25ld0F1Y3Rpb24odWludDI1NiBfcGFydElkLCBBdWN0aW9uIF9hdWN0aW9uKSBpbnRlcm5hbCB7CgogICAgICAgIHJlcXVpcmUoX2F1Y3Rpb24uZHVyYXRpb24gPj0gbWluRHVyYXRpb24pOwogICAgICAgIHJlcXVpcmUoX2F1Y3Rpb24uZHVyYXRpb24gPD0gbWF4RHVyYXRpb24pOwoKICAgICAgICB0b2tlbklkVG9BdWN0aW9uW19wYXJ0SWRdID0gX2F1Y3Rpb247CgogICAgICAgIEF1Y3Rpb25DcmVhdGVkKHVpbnQyNTYoX3BhcnRJZCksCiAgICAgICAgICAgIHVpbnQyNTYoX2F1Y3Rpb24uc3RhcnRQcmljZSksCiAgICAgICAgICAgIHVpbnQyNTYoX2F1Y3Rpb24uZW5kUHJpY2UpLAogICAgICAgICAgICB1aW50NjQoX2F1Y3Rpb24uZHVyYXRpb24pLAogICAgICAgICAgICB1aW50NjQoX2F1Y3Rpb24uc3RhcnQpCiAgICAgICAgKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRNaW5EdXJhdGlvbih1aW50IF9kdXJhdGlvbikgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBtaW5EdXJhdGlvbiA9IF9kdXJhdGlvbjsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRNYXhEdXJhdGlvbih1aW50IF9kdXJhdGlvbikgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBtYXhEdXJhdGlvbiA9IF9kdXJhdGlvbjsKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhdWN0aW9uIGZyb20gcHVibGljIHZpZXcsIHJldHVybnMgdG9rZW4gdG8gdGhlIHNlbGxlcgogICAgZnVuY3Rpb24gX2NhbmNlbEF1Y3Rpb24odWludDI1NiBfcGFydElkLCBhZGRyZXNzIF9zZWxsZXIpIGludGVybmFsIHsKICAgICAgICBfcmVtb3ZlQXVjdGlvbihfcGFydElkKTsKICAgICAgICBfdHJhbnNmZXIoX3NlbGxlciwgX3BhcnRJZCk7CiAgICAgICAgQXVjdGlvbkNhbmNlbGxlZChfcGFydElkKTsKICAgIH0KCiAgICBldmVudCBQcmludEV2ZW50KHN0cmluZywgYWRkcmVzcywgdWludCk7CgogICAgLy8gQ2FsY3VsYXRlcyBwcmljZSBhbmQgdHJhbnNmZXJzIHB1cmNoYXNlIHRvIG93bmVyLiBQYXJ0IGlzIE5PVCB0cmFuc2ZlcnJlZCB0byBidXllci4KICAgIGZ1bmN0aW9uIF9wdXJjaGFzZSh1aW50MjU2IF9wYXJ0SWQsIHVpbnQyNTYgX3B1cmNoYXNlQW1vdW50KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CgogICAgICAgIEF1Y3Rpb24gc3RvcmFnZSBhdWN0aW9uID0gdG9rZW5JZFRvQXVjdGlvbltfcGFydElkXTsKCiAgICAgICAgLy8gY2hlY2sgdGhhdCB0aGlzIHRva2VuIGlzIGJlaW5nIGF1Y3Rpb25lZAogICAgICAgIHJlcXVpcmUoX2lzQWN0aXZlQXVjdGlvbihhdWN0aW9uKSk7CgogICAgICAgIC8vIGVuZm9yY2UgcHVyY2hhc2UgPj0gdGhlIGN1cnJlbnQgcHJpY2UKICAgICAgICB1aW50MjU2IHByaWNlID0gX2N1cnJlbnRQcmljZShhdWN0aW9uKTsKICAgICAgICByZXF1aXJlKF9wdXJjaGFzZUFtb3VudCA+PSBwcmljZSk7CgogICAgICAgIC8vIFN0b3JlIHNlbGxlciBiZWZvcmUgd2UgZGVsZXRlIGF1Y3Rpb24uCiAgICAgICAgYWRkcmVzcyBzZWxsZXIgPSBhdWN0aW9uLnNlbGxlcjsKCiAgICAgICAgLy8gVmFsaWQgcHVyY2hhc2UuIFJlbW92ZSBhdWN0aW9uIHRvIHByZXZlbnQgcmVlbnRyYW5jeS4KICAgICAgICBfcmVtb3ZlQXVjdGlvbihfcGFydElkKTsKCiAgICAgICAgLy8gVHJhbnNmZXIgcHJvY2VlZHMgdG8gc2VsbGVyIChpZiB0aGVyZSBhcmUgYW55ISkKICAgICAgICBpZiAocHJpY2UgPiAwKSB7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBDYWxjdWxhdGUgYW5kIHRha2UgZmVlIGZyb20gcHVyY2hhc2UKCiAgICAgICAgICAgIHVpbnQyNTYgYXVjdGlvbmVlckN1dCA9IF9jb21wdXRlRmVlKHByaWNlKTsKICAgICAgICAgICAgdWludDI1NiBzZWxsZXJQcm9jZWVkcyA9IHByaWNlIC0gYXVjdGlvbmVlckN1dDsKCiAgICAgICAgICAgIFByaW50RXZlbnQoIlNlbGxlciwgcHJvY2VlZHMiLCBzZWxsZXIsIHNlbGxlclByb2NlZWRzKTsKCiAgICAgICAgICAgIC8vIFBheSB0aGUgc2VsbGVyCiAgICAgICAgICAgIHNlbGxlci50cmFuc2ZlcihzZWxsZXJQcm9jZWVkcyk7CiAgICAgICAgfQoKICAgICAgICAvLyBDYWxjdWxhdGUgZXhjZXNzIGZ1bmRzIGFuZCByZXR1cm4gdG8gYnV5ZXIuCiAgICAgICAgdWludDI1NiBwdXJjaGFzZUV4Y2VzcyA9IF9wdXJjaGFzZUFtb3VudCAtIHByaWNlOwoKICAgICAgICBQcmludEV2ZW50KCJTZW5kZXIsIGV4Y2VzcyIsIG1zZy5zZW5kZXIsIHB1cmNoYXNlRXhjZXNzKTsKICAgICAgICAvLyBSZXR1cm4gYW55IGV4Y2VzcyBmdW5kcy4gUmVlbnRyYW5jeSBhZ2FpbiBwcmV2ZW50ZWQgYnkgZGVsZXRpbmcgYXVjdGlvbi4KICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHB1cmNoYXNlRXhjZXNzKTsKCiAgICAgICAgQXVjdGlvblN1Y2Nlc3NmdWwoX3BhcnRJZCwgcHJpY2UsIG1zZy5zZW5kZXIpOwoKICAgICAgICByZXR1cm4gcHJpY2U7CiAgICB9CgogICAgLy8gcmV0dXJucyB0aGUgY3VycmVudCBwcmljZSBvZiB0aGUgdG9rZW4gYmVpbmcgYXVjdGlvbmVkIGluIF9hdWN0aW9uCiAgICBmdW5jdGlvbiBfY3VycmVudFByaWNlKEF1Y3Rpb24gc3RvcmFnZSBfYXVjdGlvbikgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBzZWNzRWxhcHNlZCA9IG5vdyAtIF9hdWN0aW9uLnN0YXJ0OwogICAgICAgIHJldHVybiBfY29tcHV0ZUN1cnJlbnRQcmljZSgKICAgICAgICAgICAgX2F1Y3Rpb24uc3RhcnRQcmljZSwKICAgICAgICAgICAgX2F1Y3Rpb24uZW5kUHJpY2UsCiAgICAgICAgICAgIF9hdWN0aW9uLmR1cmF0aW9uLAogICAgICAgICAgICBzZWNzRWxhcHNlZAogICAgICAgICk7CiAgICB9CgogICAgLy8gQ2hlY2tzIGlmIE5GVFBhcnQgaXMgY3VycmVudGx5IGJlaW5nIGF1Y3Rpb25lZC4KICAgIC8vIGZ1bmN0aW9uIF9pc0JlaW5nQXVjdGlvbmVkKEF1Y3Rpb24gc3RvcmFnZSBfYXVjdGlvbikgaW50ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAvLyAgICAgcmV0dXJuIChfYXVjdGlvbi5zdGFydCA+IDApOwogICAgLy8gfQoKICAgIC8vIHJlbW92ZXMgdGhlIGF1Y3Rpb24gb2YgdGhlIHBhcnQgd2l0aCBpZCBfcGFydElkCiAgICBmdW5jdGlvbiBfcmVtb3ZlQXVjdGlvbih1aW50MjU2IF9wYXJ0SWQpIGludGVybmFsIHsKICAgICAgICBkZWxldGUgdG9rZW5JZFRvQXVjdGlvbltfcGFydElkXTsKICAgIH0KCiAgICAvLyBjb21wdXRlcyB0aGUgY3VycmVudCBwcmljZSBvZiBhbiBkZWZsYXRpbmctcHJpY2UgYXVjdGlvbiAKICAgIGZ1bmN0aW9uIF9jb21wdXRlQ3VycmVudFByaWNlKCB1aW50MjU2IF9zdGFydFByaWNlLCB1aW50MjU2IF9lbmRQcmljZSwgdWludDI1NiBfZHVyYXRpb24sIHVpbnQyNTYgX3NlY29uZHNQYXNzZWQgKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYgX3ByaWNlKSB7CiAgICAgICAgX3ByaWNlID0gX3N0YXJ0UHJpY2U7CiAgICAgICAgaWYgKF9zZWNvbmRzUGFzc2VkID49IF9kdXJhdGlvbikgewogICAgICAgICAgICAvLyBIYXMgYmVlbiB1cCBsb25nIGVub3VnaCB0byBoaXQgZW5kUHJpY2UuCiAgICAgICAgICAgIC8vIFJldHVybiB0aGlzIHByaWNlIGZsb29yLgogICAgICAgICAgICBfcHJpY2UgPSBfZW5kUHJpY2U7CiAgICAgICAgICAgIC8vIHRoaXMgaXMgYSBzdGF0aWNhbGx5IHByaWNlIHNhbGUuIEp1c3QgcmV0dXJuIHRoZSBwcmljZS4KICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoX2R1cmF0aW9uID4gMCkgewogICAgICAgICAgICAvLyBUaGlzIGF1Y3Rpb24gY29udHJhY3Qgc3VwcG9ydHMgYXVjdGlvbmluZyBmcm9tIGFueSB2YWxpZCBwcmljZSB0byBhbnkgb3RoZXIgdmFsaWQgcHJpY2UuCiAgICAgICAgICAgIC8vIFRoaXMgbWVhbnMgdGhlIHByaWNlIGNhbiBkeW5hbWljYWxseSBpbmNyZWFzZSB1cHdhcmQsIG9yIGRvd25hcmQuCiAgICAgICAgICAgIGludDI1NiBwcmljZURpZmZlcmVuY2UgPSBpbnQyNTYoX2VuZFByaWNlKSAtIGludDI1Nihfc3RhcnRQcmljZSk7CiAgICAgICAgICAgIGludDI1NiBjdXJyZW50UHJpY2VEaWZmZXJlbmNlID0gcHJpY2VEaWZmZXJlbmNlICogaW50MjU2KF9zZWNvbmRzUGFzc2VkKSAvIGludDI1NihfZHVyYXRpb24pOwogICAgICAgICAgICBpbnQyNTYgY3VycmVudFByaWNlID0gaW50MjU2KF9zdGFydFByaWNlKSArIGN1cnJlbnRQcmljZURpZmZlcmVuY2U7CgogICAgICAgICAgICBfcHJpY2UgPSB1aW50MjU2KGN1cnJlbnRQcmljZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfcHJpY2U7CiAgICB9CgogICAgLy8gQ29tcHV0ZSBwZXJjZW50YWdlIGZlZSBvZiB0cmFuc2FjdGlvbgoKICAgIGZ1bmN0aW9uIF9jb21wdXRlRmVlICh1aW50MjU2IF9wcmljZSkgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIF9wcmljZSAqIG93bmVyQ3V0IC8gMTAwMDA7IAogICAgfQoKfQoKLy8gQ2xvY2sgYXVjdGlvbiBmb3IgTkZUUGFydHMuCi8vIE9ubHkgdGltZWQgd2hlbiBwcmljaW5nIGlzIGR5bmFtaWMgKGkuZS4gc3RhcnRQcmljZSAhPSBlbmRQcmljZSkuCi8vIEVsc2UsIHRoaXMgYmVjb21lcyBhbiBpbmZpbml0ZSBkdXJhdGlvbiBzdGF0aWNhbGx5IHByaWNlZCBzYWxlLAovLyByZXNvbHZpbmcgd2hlbiBzdWNjZXNmdWxseSBwdXJjaGFzZSBmb3Igb3IgY2FuY2VsbGVkLgoKY29udHJhY3QgRHV0Y2hBdWN0aW9uIGlzIE5GVEF1Y3Rpb25CYXNlLCBFdGhlcmJvdHNQcml2aWxlZ2VzIHsKCiAgICAvLyBUaGUgRVJDLTE2NSBpbnRlcmZhY2Ugc2lnbmF0dXJlIGZvciBFUkMtNzIxLgogICAgYnl0ZXM0IGNvbnN0YW50IEludGVyZmFjZVNpZ25hdHVyZV9FUkM3MjEgPSBieXRlczQoMHhkYTY3MWI5Yik7CiAKICAgIGZ1bmN0aW9uIER1dGNoQXVjdGlvbihhZGRyZXNzIF9uZnRBZGRyZXNzLCB1aW50MjU2IF9mZWUpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfZmVlIDw9IDEwMDAwKTsKICAgICAgICBvd25lckN1dCA9IF9mZWU7CgogICAgICAgIEVSQzcyMUFsbEltcGxlbWVudGF0aW9ucyBjYW5kaWRhdGVDb250cmFjdCA9IEVSQzcyMUFsbEltcGxlbWVudGF0aW9ucyhfbmZ0QWRkcmVzcyk7CiAgICAgICAgcmVxdWlyZShjYW5kaWRhdGVDb250cmFjdC5zdXBwb3J0c0ludGVyZmFjZShJbnRlcmZhY2VTaWduYXR1cmVfRVJDNzIxKSk7CiAgICAgICAgbmZ0Q29udHJhY3QgPSBjYW5kaWRhdGVDb250cmFjdDsKICAgIH0KCiAgICAvLyBSZW1vdmUgYWxsIGV0aGVyIGZyb20gdGhlIGNvbnRyYWN0LiBUaGlzIHdpbGwgYmUgbWFya2V0cGxhY2UgZmVlcy4KICAgIC8vIFRyYW5zZmVycyB0byB0aGUgTkZUIGNvbnRyYWN0LiAKICAgIC8vIENhbiBiZSBjYWxsZWQgYnkgb3duZXIgb3IgTkZUIGNvbnRyYWN0LgoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3QmFsYW5jZSgpIGV4dGVybmFsIHsKICAgICAgICBhZGRyZXNzIG5mdEFkZHJlc3MgPSBhZGRyZXNzKG5mdENvbnRyYWN0KTsKCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gbmZ0QWRkcmVzcyk7CgogICAgICAgIG5mdEFkZHJlc3MudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KCiAgICBldmVudCBQcmludEV2ZW50KHN0cmluZywgYWRkcmVzcywgdWludCk7CgogICAgLy8gQ3JlYXRlcyBhbiBhdWN0aW9uIGFuZCBsaXN0cyBpdC4KICAgIGZ1bmN0aW9uIGNyZWF0ZUF1Y3Rpb24oIHVpbnQyNTYgX3BhcnRJZCwgdWludDI1NiBfc3RhcnRQcmljZSwgdWludDI1NiBfZW5kUHJpY2UsIHVpbnQyNTYgX2R1cmF0aW9uLCBhZGRyZXNzIF9zZWxsZXIgKSBleHRlcm5hbCB3aGVuTm90UGF1c2VkIHsKICAgICAgICAvLyBTYW5pdHkgY2hlY2sgdGhhdCBubyBpbnB1dHMgb3ZlcmZsb3cgaG93IG1hbnkgYml0cyB3ZSd2ZSBhbGxvY2F0ZWQKICAgICAgICAvLyB0byBzdG9yZSB0aGVtIGluIHRoZSBhdWN0aW9uIHN0cnVjdC4KICAgICAgICByZXF1aXJlKF9zdGFydFByaWNlID09IHVpbnQyNTYodWludDEyOChfc3RhcnRQcmljZSkpKTsKICAgICAgICByZXF1aXJlKF9lbmRQcmljZSA9PSB1aW50MjU2KHVpbnQxMjgoX2VuZFByaWNlKSkpOwogICAgICAgIHJlcXVpcmUoX2R1cmF0aW9uID09IHVpbnQyNTYodWludDY0KF9kdXJhdGlvbikpKTsKICAgICAgICByZXF1aXJlKF9zdGFydFByaWNlID49IF9lbmRQcmljZSk7CgogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhZGRyZXNzKG5mdENvbnRyYWN0KSk7CiAgICAgICAgX2VzY3Jvdyhfc2VsbGVyLCBfcGFydElkKTsKICAgICAgICBBdWN0aW9uIG1lbW9yeSBhdWN0aW9uID0gQXVjdGlvbigKICAgICAgICAgICAgX3NlbGxlciwKICAgICAgICAgICAgdWludDEyOChfc3RhcnRQcmljZSksCiAgICAgICAgICAgIHVpbnQxMjgoX2VuZFByaWNlKSwKICAgICAgICAgICAgdWludDY0KF9kdXJhdGlvbiksCiAgICAgICAgICAgIHVpbnQ2NChub3cpIC8vc2Vjb25kcyB1aW50IAogICAgICAgICk7CiAgICAgICAgUHJpbnRFdmVudCgiQXVjdGlvbiBTdGFydCIsIDB4MCwgYXVjdGlvbi5zdGFydCk7CiAgICAgICAgX25ld0F1Y3Rpb24oX3BhcnRJZCwgYXVjdGlvbik7CiAgICB9CgoKICAgIC8vIFNDUkFQWUFSRCBQUklDSU5HIExPR0lDCgogICAgdWludDggY29uc3RhbnQgTEFTVF9DT05TSURFUkVEID0gNTsKICAgIHVpbnQ4IHB1YmxpYyBzY3JhcENvdW50ZXIgPSAwOwogICAgdWludFs1XSBwdWJsaWMgbGFzdFNjcmFwUHJpY2VzOwogICAgCiAgICAvLyBQdXJjaGFzZXMgYW4gb3BlbiBhdWN0aW9uCiAgICAvLyBXaWxsIHRyYW5zZmVyIG93bmVyc2hpcCBpZiBzdWNjZXNzZnVsLgogICAgCiAgICBmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IF9wYXJ0SWQpIGV4dGVybmFsIHBheWFibGUgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgYWRkcmVzcyBzZWxsZXIgPSB0b2tlbklkVG9BdWN0aW9uW19wYXJ0SWRdLnNlbGxlcjsKCiAgICAgICAgLy8gX3B1cmNoYXNlIHdpbGwgdGhyb3cgaWYgdGhlIHB1cmNoYXNlIG9yIGZ1bmRzIHRyYW5zZmVyIGZhaWxzCiAgICAgICAgdWludDI1NiBwcmljZSA9IF9wdXJjaGFzZShfcGFydElkLCBtc2cudmFsdWUpOwogICAgICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBfcGFydElkKTsKICAgICAgICAKICAgICAgICAvLyBJZiB0aGUgc2VsbGVyIGlzIHRoZSBzY3JhcHlhcmQsIHRyYWNrIHByaWNlIGluZm9ybWF0aW9uLgogICAgICAgIGlmIChzZWxsZXIgPT0gYWRkcmVzcyhuZnRDb250cmFjdCkpIHsKCiAgICAgICAgICAgIGxhc3RTY3JhcFByaWNlc1tzY3JhcENvdW50ZXJdID0gcHJpY2U7CiAgICAgICAgICAgIGlmIChzY3JhcENvdW50ZXIgPT0gTEFTVF9DT05TSURFUkVEIC0gMSkgewogICAgICAgICAgICAgICAgc2NyYXBDb3VudGVyID0gMDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNjcmFwQ291bnRlcisrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGF2ZXJhZ2VTY3JhcFByaWNlKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgc3VtID0gMDsKICAgICAgICBmb3IgKHVpbnQ4IGkgPSAwOyBpIDwgTEFTVF9DT05TSURFUkVEOyBpKyspIHsKICAgICAgICAgICAgc3VtICs9IGxhc3RTY3JhcFByaWNlc1tpXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN1bSAvIExBU1RfQ09OU0lERVJFRDsKICAgIH0KCiAgICAvLyBBbGxvd3MgYSB1c2VyIHRvIGNhbmNlbCBhbiBhdWN0aW9uIGJlZm9yZSBpdCdzIHJlc29sdmVkLgogICAgLy8gUmV0dXJucyB0aGUgcGFydCB0byB0aGUgc2VsbGVyLgoKICAgIGZ1bmN0aW9uIGNhbmNlbEF1Y3Rpb24odWludDI1NiBfcGFydElkKSBleHRlcm5hbCB7CiAgICAgICAgQXVjdGlvbiBzdG9yYWdlIGF1Y3Rpb24gPSB0b2tlbklkVG9BdWN0aW9uW19wYXJ0SWRdOwogICAgICAgIHJlcXVpcmUoX2lzQWN0aXZlQXVjdGlvbihhdWN0aW9uKSk7CiAgICAgICAgYWRkcmVzcyBzZWxsZXIgPSBhdWN0aW9uLnNlbGxlcjsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gc2VsbGVyKTsKICAgICAgICBfY2FuY2VsQXVjdGlvbihfcGFydElkLCBzZWxsZXIpOwogICAgfQoKICAgIC8vIHJldHVybnMgdGhlIGN1cnJlbnQgcHJpY2Ugb2YgdGhlIGF1Y3Rpb24gb2YgYSB0b2tlbiB3aXRoIGlkIF9wYXJ0SWQKICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRQcmljZSh1aW50MjU2IF9wYXJ0SWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIEF1Y3Rpb24gc3RvcmFnZSBhdWN0aW9uID0gdG9rZW5JZFRvQXVjdGlvbltfcGFydElkXTsKICAgICAgICByZXF1aXJlKF9pc0FjdGl2ZUF1Y3Rpb24oYXVjdGlvbikpOwogICAgICAgIHJldHVybiBfY3VycmVudFByaWNlKGF1Y3Rpb24pOwogICAgfQoKICAgIC8vICBSZXR1cm5zIHRoZSBkZXRhaWxzIG9mIGFuIGF1Y3Rpb24gZnJvbSBpdHMgX3BhcnRJZC4KICAgIGZ1bmN0aW9uIGdldEF1Y3Rpb24odWludDI1NiBfcGFydElkKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKCBhZGRyZXNzIHNlbGxlciwgdWludDI1NiBzdGFydFByaWNlLCB1aW50MjU2IGVuZFByaWNlLCB1aW50MjU2IGR1cmF0aW9uLCB1aW50MjU2IHN0YXJ0ZWRBdCApIHsKICAgICAgICBBdWN0aW9uIHN0b3JhZ2UgYXVjdGlvbiA9IHRva2VuSWRUb0F1Y3Rpb25bX3BhcnRJZF07CiAgICAgICAgcmVxdWlyZShfaXNBY3RpdmVBdWN0aW9uKGF1Y3Rpb24pKTsKICAgICAgICByZXR1cm4gKCBhdWN0aW9uLnNlbGxlciwgYXVjdGlvbi5zdGFydFByaWNlLCBhdWN0aW9uLmVuZFByaWNlLCBhdWN0aW9uLmR1cmF0aW9uLCBhdWN0aW9uLnN0YXJ0KTsKICAgIH0KCiAgICAvLyBBbGxvd3Mgb3duZXIgdG8gY2FuY2VsIGFuIGF1Y3Rpb24uCiAgICAvLyBPTkxZIGFibGUgdG8gYmUgdXNlZCB3aGVuIGNvbnRyYWN0IGlzIHBhdXNlZCwKICAgIC8vIGluIHRoZSBjYXNlIG9mIGVtZXJnZW5jaWVzLgogICAgLy8gUGFydHMgcmV0dXJuZWQgdG8gc2VsbGVyIGFzIGl0J3MgZXF1aXZhbGVudCB0byB0aGVtIAogICAgLy8gY2FsbGluZyBjYW5jZWwuCiAgICBmdW5jdGlvbiBjYW5jZWxBdWN0aW9uV2hlblBhdXNlZCh1aW50MjU2IF9wYXJ0SWQpIHdoZW5QYXVzZWQgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICBBdWN0aW9uIHN0b3JhZ2UgYXVjdGlvbiA9IHRva2VuSWRUb0F1Y3Rpb25bX3BhcnRJZF07CiAgICAgICAgcmVxdWlyZShfaXNBY3RpdmVBdWN0aW9uKGF1Y3Rpb24pKTsKICAgICAgICBfY2FuY2VsQXVjdGlvbihfcGFydElkLCBhdWN0aW9uLnNlbGxlcik7CiAgICB9Cn0='.
	

]
