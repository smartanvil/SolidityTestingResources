Class {
	#name : #SRTfad572db566e5234ac9fc3d570c4edc0050eaa92,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfad572db566e5234ac9fc3d570c4edc0050eaa92 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgovLyBjb3B5cmlnaHQgPHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJhOWNhYzZjN2RkYzhjYWRkZTljYmQwZGRjY2RkYzFjY2RiODdjYWM2YzQiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L3NwYW4+Cgpjb250cmFjdCBCYXNpY0FjY2Vzc0NvbnRyb2wgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzW10gcHVibGljIG1vZGVyYXRvcnM7CgogICAgZnVuY3Rpb24gQmFzaWNBY2Nlc3NDb250cm9sKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seU1vZGVyYXRvcnMoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsKICAgICAgICAgICAgYm9vbCBmb3VuZCA9IGZhbHNlOwogICAgICAgICAgICBmb3IgKHVpbnQgaW5kZXggPSAwOyBpbmRleCA8IG1vZGVyYXRvcnMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgICBpZiAobW9kZXJhdG9yc1tpbmRleF0gPT0gbXNnLnNlbmRlcikgewogICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXF1aXJlKGZvdW5kKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBDaGFuZ2VPd25lcihhZGRyZXNzIF9uZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgaWYgKF9uZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIG93bmVyID0gX25ld093bmVyOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBLaWxsKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBBZGRNb2RlcmF0b3IoYWRkcmVzcyBfbmV3TW9kZXJhdG9yKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBpZiAoX25ld01vZGVyYXRvciAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIGZvciAodWludCBpbmRleCA9IDA7IGluZGV4IDwgbW9kZXJhdG9ycy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgIGlmIChtb2RlcmF0b3JzW2luZGV4XSA9PSBfbmV3TW9kZXJhdG9yKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIG1vZGVyYXRvcnMucHVzaChfbmV3TW9kZXJhdG9yKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIFJlbW92ZU1vZGVyYXRvcihhZGRyZXNzIF9vbGRNb2RlcmF0b3IpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHVpbnQgZm91bmRJbmRleCA9IDA7CiAgICAgICAgZm9yICg7IGZvdW5kSW5kZXggPCBtb2RlcmF0b3JzLmxlbmd0aDsgZm91bmRJbmRleCsrKSB7CiAgICAgICAgICAgIGlmIChtb2RlcmF0b3JzW2ZvdW5kSW5kZXhdID09IF9vbGRNb2RlcmF0b3IpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChmb3VuZEluZGV4IDwgbW9kZXJhdG9ycy5sZW5ndGgpIHsKICAgICAgICAgICAgbW9kZXJhdG9yc1tmb3VuZEluZGV4XSA9IG1vZGVyYXRvcnNbbW9kZXJhdG9ycy5sZW5ndGgtMV07CiAgICAgICAgICAgIGRlbGV0ZSBtb2RlcmF0b3JzW21vZGVyYXRvcnMubGVuZ3RoLTFdOwogICAgICAgICAgICBtb2RlcmF0b3JzLmxlbmd0aC0tOwogICAgICAgIH0KICAgIH0KfQoKaW50ZXJmYWNlIFRva2VuUmVjaXBpZW50IHsgCiAgICBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWM7IAp9CgppbnRlcmZhY2UgQ3Jvc3NGb3JrRGlzdHJpYnV0aW9uIHsKICAgIGZ1bmN0aW9uIGdldERpc3RyaWJ1dGVkQW1vdW50KHVpbnQ2NCBfcmVxdWVzdElkLCBzdHJpbmcgX2J0Y0FkZHJlc3MsIGFkZHJlc3MgX3JlY2VpdmVyKSBwdWJsaWM7Cn0KCmludGVyZmFjZSBDcm9zc0ZvcmtDYWxsYmFjayB7CiAgICBmdW5jdGlvbiBjYWxsYmFja0Nyb3NzRm9yayh1aW50NjQgX3JlcXVlc3RJZCwgdWludDI1NiBfYW1vdW50LCBieXRlczMyIF9yZWZlckNvZGVIYXNoKSBwdWJsaWM7Cn0KCmNvbnRyYWN0IFRva2VuRVJDMjAgewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiB2YWx1ZSk7CgogICAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VPZltfdG9dKTsKICAgICAgICB1aW50IHByZXZpb3VzQmFsYW5jZXMgPSBiYWxhbmNlT2ZbX2Zyb21dICsgYmFsYW5jZU9mW190b107CiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgYXNzZXJ0KGJhbGFuY2VPZltfZnJvbV0gKyBiYWxhbmNlT2ZbX3RvXSA9PSBwcmV2aW91c0JhbGFuY2VzKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB7CiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSk7CiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7IAogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgVG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IFRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsKICAgICAgICBpZiAoYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgewogICAgICAgICAgICBzcGVuZGVyLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7CiAgICAgICAgQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSk7CiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgdG90YWxTdXBwbHkgLT0gX3ZhbHVlOwogICAgICAgIEJ1cm4oX2Zyb20sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCmNvbnRyYWN0IEJUSFRva2VuIGlzIEJhc2ljQWNjZXNzQ29udHJvbCwgVG9rZW5FUkMyMCwgQ3Jvc3NGb3JrQ2FsbGJhY2sgewogICAgLy8gbWV0YWRhdGEKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJCeXRldGhlciI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJCVEgiOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIHN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICIxLjAiOwogICAgCiAgICAvLyBjcm9zcyBmb3JrIGRhdGEKICAgIGVudW0gRm9ya1Jlc3VsdENvZGUgeyAKICAgICAgICBTVUNDRVNTLAogICAgICAgIFRSSUdHRVJFRCwKICAgICAgICBSRUNFSVZFRCwKICAgICAgICBQRU5ESU5HLAogICAgICAgIEZBSUxFRCwKICAgICAgICBJRF9NSVNNQVRDSCwKICAgICAgICBOT1RfRU5PVUdIX0JBTEFOQ0UsCiAgICAgICAgTk9UX1JFQ0VJVkVECiAgICB9CiAgICBlbnVtIENsYWltUmVmZXJSZXN1bHRDb2RlIHsKICAgICAgICBTVUNDRVNTLAogICAgICAgIE5PVF9FTk9VR0hfQkFMQU5DRQogICAgfQogICAgc3RydWN0IENyb3NzRm9ya0RhdGEgewogICAgICAgIHN0cmluZyBidGNBZGRyZXNzOwogICAgICAgIGFkZHJlc3MgcmVjZWl2ZXI7CiAgICAgICAgdWludDI1NiBhbW91bnQ7CiAgICAgICAgYnl0ZXMzMiByZWZlckNvZGVIYXNoOwogICAgICAgIHVpbnQgY3JlYXRlVGltZTsKICAgIH0KICAgIHVpbnQ2NCBwdWJsaWMgY3Jvc3NGb3JrQ291bnQgPSAwOwogICAgdWludCBwdWJsaWMgcmVmZXJCZW5lZml0UmF0ZSA9IDEwOyAvLyAxMCBidGMgLT4gMSBidGgKICAgIGJvb2wgcHVibGljIGNyb3NzRm9ya2luZyA9IGZhbHNlOwogICAgbWFwcGluZyAodWludDY0ID0+IENyb3NzRm9ya0RhdGEpIGNyb3NzRm9ya01hcHBpbmc7CiAgICBtYXBwaW5nIChzdHJpbmcgPT4gdWludDY0KSBjcm9zc0ZvcmtJZHM7CiAgICBtYXBwaW5nIChieXRlczMyID0+IHVpbnQyNTYpIHJlZmVyQmVuZWZpdHM7IC8vIHJlZmVyQ29kZUhhc2ggLT4gYnRoIGFtb3VudAogICAgYWRkcmVzcyBwdWJsaWMgY3Jvc3NGb3JrRGlzdHJpYnV0aW9uID0gMHgwOyAvLyBjcm9zc2ZvcmsgY29udHJhY3QKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHNhdG9zaGlfYnRoX2RlY2ltYWxzID0gMTAgKiogMTA7CiAgICAKICAgIGV2ZW50IExvZ1JldmVydENyb3NzRm9yayhieXRlczMyIGluZGV4ZWQgYnRjQWRkcmVzc0hhc2gsIGFkZHJlc3MgaW5kZXhlZCByZWNlaXZlciwgdWludDY0IGluZGV4ZWQgcmVxdWVzdElkLCB1aW50MjU2IGFtb3VudCwgRm9ya1Jlc3VsdENvZGUgcmVzdWx0KTsKICAgIGV2ZW50IExvZ1RyaWdnZXJDcm9zc0ZvcmsoYnl0ZXMzMiBpbmRleGVkIGJ0Y0FkZHJlc3NIYXNoLCB1aW50NjQgaW5kZXhlZCByZXF1ZXN0SWQsIEZvcmtSZXN1bHRDb2RlIHJlc3VsdCk7CiAgICBldmVudCBMb2dDcm9zc0ZvcmsodWludDY0IGluZGV4ZWQgcmVxdWVzdElkLCBhZGRyZXNzIHJlY2VpdmVyLCB1aW50MjU2IGFtb3VudCwgRm9ya1Jlc3VsdENvZGUgcmVzdWx0KTsKICAgIGV2ZW50IExvZ0NsYWltUmVmZXJCZW5lZml0KGJ5dGVzMzIgaW5kZXhlZCByZWZlckNvZGVIYXNoLCBhZGRyZXNzIHJlY2VpdmVyLCB1aW50MjU2IGFtb3VudCwgQ2xhaW1SZWZlclJlc3VsdENvZGUgcmVzdWx0KTsKICAgIAogICAgLy8gZGVwb3NpdCBhZGRyZXNzCiAgICBhZGRyZXNzIHB1YmxpYyBjcm9zc0ZvcmtGdW5kRGVwb3NpdDsgLy8gZGVwb3NpdCBhZGRyZXNzIGZvciBjcm9zcyBmb3JrCiAgICBhZGRyZXNzIHB1YmxpYyBidGhGdW5kRGVwb3NpdDsgLy8gZGVwb3NpdCBhZGRyZXNzIGZvciB1c2VyIGdyb3d0aCBwb29sICYgbWFya2V0aW5nCiAgICBhZGRyZXNzIHB1YmxpYyBkZXZlbG9wZXJGdW5kRGVwb3NpdDsgLy8gZGVwb3NpdCBhZGRyZXNzIGZvciBkZXZlbG9wZXIgZnVuZAogICAgCiAgICAvLyBmdW5kIGRpc3RyaWJ1dGlvbgogICAgdWludDI1NiBwdWJsaWMgY3Jvc3NGb3JrRnVuZCA9IDE3ICogKDEwKio2KSAqIDEwKipkZWNpbWFsczsgLy8xN20gcmVzZXJ2ZWQgZm9yIEJpdENvaW4gQ3Jvc3MtRm9yawogICAgdWludDI1NiBwdWJsaWMgbWFya2V0aW5nRnVuZCA9IDIgICogKDEwKio2KSAqIDEwKipkZWNpbWFsczsgLy8ybSByZXNlcnZlZCBmb3IgbWFya2V0aW5nCiAgICB1aW50MjU2IHB1YmxpYyB1c2VyUG9vbEZ1bmQgID0gMSAgKiAoMTAqKjYpICogMTAqKmRlY2ltYWxzOyAvLzFtIGZvciB1c2VyIGdyb3d0aCBwb29sCiAgICB1aW50MjU2IHB1YmxpYyBkZXZlbG9wZXJGdW5kID0gMSAgKiAoMTAqKjYpICogMTAqKmRlY2ltYWxzOyAvLzFtIHJlc2VydmVkIGZvciBkZXZlbG9wZXJzCiAgICAKICAgIC8vIGZvciBmdXR1cmUgZmVhdHVyZQogICAgdWludDI1NiBwdWJsaWMgc2VsbFByaWNlOwogICAgdWludDI1NiBwdWJsaWMgYnV5UHJpY2U7CiAgICBib29sIHB1YmxpYyB0cmFkaW5nID0gZmFsc2U7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBmcm96ZW5BY2NvdW50OwogICAgZXZlbnQgRnJvemVuRnVuZHMoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJvemVuKTsKICAgIAogICAgLy8gbW9kaWZpZXIKICAgIG1vZGlmaWVyIGlzQ3Jvc3NGb3JraW5nIHsKICAgICAgICByZXF1aXJlKGNyb3NzRm9ya2luZyA9PSB0cnVlIHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIHJlcXVpcmUoY3Jvc3NGb3JrRGlzdHJpYnV0aW9uICE9IDB4MCk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgaXNUcmFkaW5nIHsKICAgICAgICByZXF1aXJlKHRyYWRpbmcgPT0gdHJ1ZSB8fCBtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfSAKCiAgICAvLyBjb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gQlRIVG9rZW4oYWRkcmVzcyBfY3Jvc3NGb3JrRGlzdHJpYnV0aW9uLCBhZGRyZXNzIF9jcm9zc0ZvcmtGdW5kRGVwb3NpdCwgYWRkcmVzcyBfYnRoRnVuZERlcG9zaXQsIGFkZHJlc3MgX2RldmVsb3BlckZ1bmREZXBvc2l0KSBwdWJsaWMgewogICAgICAgIHRvdGFsU3VwcGx5ID0gY3Jvc3NGb3JrRnVuZCArIG1hcmtldGluZ0Z1bmQgKyB1c2VyUG9vbEZ1bmQgKyBkZXZlbG9wZXJGdW5kOwogICAgICAgIGNyb3NzRm9ya0Rpc3RyaWJ1dGlvbiA9IF9jcm9zc0ZvcmtEaXN0cmlidXRpb247CiAgICAgICAgY3Jvc3NGb3JrRnVuZERlcG9zaXQgPSBfY3Jvc3NGb3JrRnVuZERlcG9zaXQ7CiAgICAgICAgYnRoRnVuZERlcG9zaXQgPSBfYnRoRnVuZERlcG9zaXQ7CiAgICAgICAgZGV2ZWxvcGVyRnVuZERlcG9zaXQgPSBfZGV2ZWxvcGVyRnVuZERlcG9zaXQ7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZU9mW2Nyb3NzRm9ya0Z1bmREZXBvc2l0XSArPSBjcm9zc0ZvcmtGdW5kOwogICAgICAgIGJhbGFuY2VPZltidGhGdW5kRGVwb3NpdF0gKz0gbWFya2V0aW5nRnVuZCArIHVzZXJQb29sRnVuZDsKICAgICAgICBiYWxhbmNlT2ZbZGV2ZWxvcGVyRnVuZERlcG9zaXRdICs9IGRldmVsb3BlckZ1bmQ7CiAgICB9CgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSBwdWJsaWMge30KICAgIAogICAgLy8gb25seSBhZG1pbgogICAgZnVuY3Rpb24gc2V0Q3Jvc3NGb3JrRGlzdHJpYnV0aW9uKGFkZHJlc3MgX2Nyb3NzRm9ya0Rpc3RyaWJ1dGlvbikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgY3Jvc3NGb3JrRGlzdHJpYnV0aW9uID0gX2Nyb3NzRm9ya0Rpc3RyaWJ1dGlvbjsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXREZXBvc2l0QWRkcmVzcyhhZGRyZXNzIF9jcm9zc0ZvcmtGdW5kLCBhZGRyZXNzIF9idGhGdW5kLCBhZGRyZXNzIF9kZXZlbG9wZXJGdW5kKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBjcm9zc0ZvcmtGdW5kRGVwb3NpdCA9IF9jcm9zc0ZvcmtGdW5kOwogICAgICAgIGJ0aEZ1bmREZXBvc2l0ID0gX2J0aEZ1bmQ7CiAgICAgICAgZGV2ZWxvcGVyRnVuZERlcG9zaXQgPSBfZGV2ZWxvcGVyRnVuZDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRQcmljZXModWludDI1NiBfbmV3U2VsbFByaWNlLCB1aW50MjU2IF9uZXdCdXlQcmljZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgc2VsbFByaWNlID0gX25ld1NlbGxQcmljZTsKICAgICAgICBidXlQcmljZSA9IF9uZXdCdXlQcmljZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRSZWZlckJlbmVmaXRSYXRlKHVpbnQgX3JhdGUpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlZmVyQmVuZWZpdFJhdGUgPSBfcmF0ZTsKICAgIH0KICAgIAogICAgLy8gb25seSBtb2RlcmF0b3JzCiAgICBmdW5jdGlvbiB0b2dnbGVDcm9zc0ZvcmtpbmcoKSBvbmx5TW9kZXJhdG9ycyBwdWJsaWMgewogICAgICAgIGNyb3NzRm9ya2luZyA9ICFjcm9zc0Zvcmtpbmc7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRvZ2dsZVRyYWRpbmcoKSBvbmx5TW9kZXJhdG9ycyBwdWJsaWMgewogICAgICAgIHRyYWRpbmcgPSAhdHJhZGluZzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2xhaW1SZWZlckJlbmVmaXQoc3RyaW5nIF9yZWZlckNvZGUsIGFkZHJlc3MgX3JlY2VpdmVyKSBvbmx5TW9kZXJhdG9ycyBwdWJsaWMgewogICAgICAgIGJ5dGVzMzIgcmVmZXJDb2RlSGFzaCA9IGtlY2NhazI1NihfcmVmZXJDb2RlKTsKICAgICAgICB1aW50MjU2IHRvdGFsQW1vdW50ID0gcmVmZXJCZW5lZml0c1tyZWZlckNvZGVIYXNoXTsKICAgICAgICBpZiAodG90YWxBbW91bnQ9PTApIHsKICAgICAgICAgICAgTG9nQ2xhaW1SZWZlckJlbmVmaXQocmVmZXJDb2RlSGFzaCwgX3JlY2VpdmVyLCAwLCBDbGFpbVJlZmVyUmVzdWx0Q29kZS5TVUNDRVNTKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoYmFsYW5jZU9mW2J0aEZ1bmREZXBvc2l0XSA8IHRvdGFsQW1vdW50KSB7CiAgICAgICAgICAgIExvZ0NsYWltUmVmZXJCZW5lZml0KHJlZmVyQ29kZUhhc2gsIF9yZWNlaXZlciwgMCwgQ2xhaW1SZWZlclJlc3VsdENvZGUuTk9UX0VOT1VHSF9CQUxBTkNFKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZWZlckJlbmVmaXRzW3JlZmVyQ29kZUhhc2hdID0gMDsKICAgICAgICBiYWxhbmNlT2ZbYnRoRnVuZERlcG9zaXRdIC09IHRvdGFsQW1vdW50OwogICAgICAgIGJhbGFuY2VPZltfcmVjZWl2ZXJdICs9IHRvdGFsQW1vdW50OwogICAgICAgIExvZ0NsYWltUmVmZXJCZW5lZml0KHJlZmVyQ29kZUhhc2gsIF9yZWNlaXZlciwgdG90YWxBbW91bnQsIENsYWltUmVmZXJSZXN1bHRDb2RlLlNVQ0NFU1MpOwogICAgfQoKICAgIC8vIGluIGNhc2UgdGhlcmUgaXMgYW4gZXJyb3IKICAgIGZ1bmN0aW9uIHJldmVydENyb3NzRm9yayhzdHJpbmcgX2J0Y0FkZHJlc3MpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYyB7CiAgICAgICAgYnl0ZXMzMiBidGNBZGRyZXNzSGFzaCA9IGtlY2NhazI1NihfYnRjQWRkcmVzcyk7CiAgICAgICAgdWludDY0IHJlcXVlc3RJZCA9IGNyb3NzRm9ya0lkc1tfYnRjQWRkcmVzc107CiAgICAgICAgaWYgKHJlcXVlc3RJZCA9PSAwKSB7CiAgICAgICAgICAgIExvZ1JldmVydENyb3NzRm9yayhidGNBZGRyZXNzSGFzaCwgMHgwLCAwLCAwLCBGb3JrUmVzdWx0Q29kZS5OT1RfUkVDRUlWRUQpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIENyb3NzRm9ya0RhdGEgc3RvcmFnZSBjcm9zc0ZvcmtEYXRhID0gY3Jvc3NGb3JrTWFwcGluZ1tyZXF1ZXN0SWRdOwogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gY3Jvc3NGb3JrRGF0YS5hbW91bnQ7ICAgICAgICAKICAgICAgICBhZGRyZXNzIHJlY2VpdmVyID0gY3Jvc3NGb3JrRGF0YS5yZWNlaXZlcjsKICAgICAgICBpZiAoYmFsYW5jZU9mW3JlY2VpdmVyXSA8IGNyb3NzRm9ya0RhdGEuYW1vdW50KSB7CiAgICAgICAgICAgIExvZ1JldmVydENyb3NzRm9yayhidGNBZGRyZXNzSGFzaCwgcmVjZWl2ZXIsIHJlcXVlc3RJZCwgYW1vdW50LCBGb3JrUmVzdWx0Q29kZS5OT1RfRU5PVUdIX0JBTEFOQ0UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIHJldmVydAogICAgICAgIGJhbGFuY2VPZltjcm9zc0ZvcmtEYXRhLnJlY2VpdmVyXSAtPSBjcm9zc0ZvcmtEYXRhLmFtb3VudDsKICAgICAgICBiYWxhbmNlT2ZbY3Jvc3NGb3JrRnVuZERlcG9zaXRdICs9IGNyb3NzRm9ya0RhdGEuYW1vdW50OwogICAgICAgIGNyb3NzRm9ya0lkc1tfYnRjQWRkcmVzc10gPSAwOwogICAgICAgIGNyb3NzRm9ya0RhdGEuYnRjQWRkcmVzcyA9ICIiOwogICAgICAgIGNyb3NzRm9ya0RhdGEucmVjZWl2ZXIgPSAweDA7CiAgICAgICAgY3Jvc3NGb3JrRGF0YS5hbW91bnQgPSAwOwogICAgICAgIGNyb3NzRm9ya0RhdGEuY3JlYXRlVGltZSA9IDA7CiAgICAgICAgCiAgICAgICAgLy8gcmV2ZXJ0IHJlZmVyIGNsYWltYWJsZSBhbW91bnQgaWYgcG9zc2libGUKICAgICAgICBpZiAocmVmZXJCZW5lZml0c1tjcm9zc0ZvcmtEYXRhLnJlZmVyQ29kZUhhc2hdID4gMCkgewogICAgICAgICAgICB1aW50MjU2IGRlZHVjdEFtb3VudCA9IGNyb3NzRm9ya0RhdGEuYW1vdW50OwogICAgICAgICAgICBpZiAocmVmZXJCZW5lZml0c1tjcm9zc0ZvcmtEYXRhLnJlZmVyQ29kZUhhc2hdIDwgZGVkdWN0QW1vdW50KSB7CiAgICAgICAgICAgICAgICBkZWR1Y3RBbW91bnQgPSByZWZlckJlbmVmaXRzW2Nyb3NzRm9ya0RhdGEucmVmZXJDb2RlSGFzaF07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVmZXJCZW5lZml0c1tjcm9zc0ZvcmtEYXRhLnJlZmVyQ29kZUhhc2hdIC09IGRlZHVjdEFtb3VudDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgTG9nUmV2ZXJ0Q3Jvc3NGb3JrKGJ0Y0FkZHJlc3NIYXNoLCByZWNlaXZlciwgcmVxdWVzdElkLCBhbW91bnQsIEZvcmtSZXN1bHRDb2RlLlNVQ0NFU1MpOwogICAgfQoKICAgIC8vIHB1YmxpYwogICAgZnVuY3Rpb24gZ2V0Q3Jvc3NGb3JrSWQoc3RyaW5nIF9idGNBZGRyZXNzKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50NjQpIHsKICAgICAgICByZXR1cm4gY3Jvc3NGb3JrSWRzW19idGNBZGRyZXNzXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0Q3Jvc3NGb3JrRGF0YSh1aW50NjQgX2lkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyhzdHJpbmcsIGFkZHJlc3MsIHVpbnQyNTYsIHVpbnQpIHsKICAgICAgICBDcm9zc0ZvcmtEYXRhIHN0b3JhZ2UgY3Jvc3NGb3JrRGF0YSA9IGNyb3NzRm9ya01hcHBpbmdbX2lkXTsKICAgICAgICByZXR1cm4gKGNyb3NzRm9ya0RhdGEuYnRjQWRkcmVzcywgY3Jvc3NGb3JrRGF0YS5yZWNlaXZlciwgY3Jvc3NGb3JrRGF0YS5hbW91bnQsIGNyb3NzRm9ya0RhdGEuY3JlYXRlVGltZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldFJlZmVyQmVuZWZpdChzdHJpbmcgX3JlZmVyQ29kZSkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDI1NikgewogICAgICAgIHJldHVybiByZWZlckJlbmVmaXRzW2tlY2NhazI1NihfcmVmZXJDb2RlKV07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNhbGxiYWNrQ3Jvc3NGb3JrKHVpbnQ2NCBfcmVxdWVzdElkLCB1aW50MjU2IF9hbW91bnQsIGJ5dGVzMzIgX3JlZmVyQ29kZUhhc2gpIHB1YmxpYyB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gY3Jvc3NGb3JrRGlzdHJpYnV0aW9uIHx8IF9hbW91bnQgPT0gMCkgewogICAgICAgICAgICBMb2dDcm9zc0ZvcmsoX3JlcXVlc3RJZCwgMHgwLCAwLCBGb3JrUmVzdWx0Q29kZS5GQUlMRUQpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIENyb3NzRm9ya0RhdGEgc3RvcmFnZSBjcm9zc0ZvcmtEYXRhID0gY3Jvc3NGb3JrTWFwcGluZ1tfcmVxdWVzdElkXTsKICAgICAgICBpZiAoY3Jvc3NGb3JrRGF0YS5yZWNlaXZlciA9PSAweDApIHsKICAgICAgICAgICAgTG9nQ3Jvc3NGb3JrKF9yZXF1ZXN0SWQsIGNyb3NzRm9ya0RhdGEucmVjZWl2ZXIsIDAsIEZvcmtSZXN1bHRDb2RlLklEX01JU01BVENIKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoY3Jvc3NGb3JrSWRzW2Nyb3NzRm9ya0RhdGEuYnRjQWRkcmVzc10gIT0gMCkgewogICAgICAgICAgICBMb2dDcm9zc0ZvcmsoX3JlcXVlc3RJZCwgY3Jvc3NGb3JrRGF0YS5yZWNlaXZlciwgY3Jvc3NGb3JrRGF0YS5hbW91bnQsIEZvcmtSZXN1bHRDb2RlLlJFQ0VJVkVEKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjcm9zc0ZvcmtJZHNbY3Jvc3NGb3JrRGF0YS5idGNBZGRyZXNzXSA9IF9yZXF1ZXN0SWQ7CiAgICAgICAgY3Jvc3NGb3JrRGF0YS5hbW91bnQgPSBfYW1vdW50KnNhdG9zaGlfYnRoX2RlY2ltYWxzOwogICAgICAgIAogICAgICAgIC8vIGFkZCBmdW5kIGZvciBhZGRyZXNzCiAgICAgICAgaWYgKGJhbGFuY2VPZltjcm9zc0ZvcmtGdW5kRGVwb3NpdF0gPCBjcm9zc0ZvcmtEYXRhLmFtb3VudCkgewogICAgICAgICAgICBMb2dDcm9zc0ZvcmsoX3JlcXVlc3RJZCwgY3Jvc3NGb3JrRGF0YS5yZWNlaXZlciwgY3Jvc3NGb3JrRGF0YS5hbW91bnQsIEZvcmtSZXN1bHRDb2RlLk5PVF9FTk9VR0hfQkFMQU5DRSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgYmFsYW5jZU9mW2Nyb3NzRm9ya0Z1bmREZXBvc2l0XSAtPSBjcm9zc0ZvcmtEYXRhLmFtb3VudDsKICAgICAgICBiYWxhbmNlT2ZbY3Jvc3NGb3JrRGF0YS5yZWNlaXZlcl0gKz0gY3Jvc3NGb3JrRGF0YS5hbW91bnQ7CiAgICAgICAgaWYgKHJlZmVyQmVuZWZpdFJhdGUgPiAwKSB7CiAgICAgICAgICAgIGNyb3NzRm9ya0RhdGEucmVmZXJDb2RlSGFzaCA9IF9yZWZlckNvZGVIYXNoOwogICAgICAgICAgICByZWZlckJlbmVmaXRzW19yZWZlckNvZGVIYXNoXSArPSBjcm9zc0ZvcmtEYXRhLmFtb3VudCAvIHJlZmVyQmVuZWZpdFJhdGU7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIExvZ0Nyb3NzRm9yayhfcmVxdWVzdElkLCBjcm9zc0ZvcmtEYXRhLnJlY2VpdmVyLCBjcm9zc0ZvcmtEYXRhLmFtb3VudCwgRm9ya1Jlc3VsdENvZGUuU1VDQ0VTUyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRyaWdnZXJDcm9zc0Zvcmsoc3RyaW5nIF9idGNBZGRyZXNzKSBpc0Nyb3NzRm9ya2luZyBwdWJsaWMgcmV0dXJucyhGb3JrUmVzdWx0Q29kZSkgewogICAgICAgIGJ5dGVzMzIgYnRjQWRkcmVzc0hhc2ggPSBrZWNjYWsyNTYoX2J0Y0FkZHJlc3MpOwogICAgICAgIGlmIChjcm9zc0ZvcmtJZHNbX2J0Y0FkZHJlc3NdID4gMCkgewogICAgICAgICAgICBMb2dUcmlnZ2VyQ3Jvc3NGb3JrKGJ0Y0FkZHJlc3NIYXNoLCBjcm9zc0ZvcmtJZHNbX2J0Y0FkZHJlc3NdLCBGb3JrUmVzdWx0Q29kZS5SRUNFSVZFRCk7CiAgICAgICAgICAgIHJldHVybiBGb3JrUmVzdWx0Q29kZS5SRUNFSVZFRDsKICAgICAgICB9CgogICAgICAgIGNyb3NzRm9ya0NvdW50ICs9IDE7CiAgICAgICAgQ3Jvc3NGb3JrRGF0YSBzdG9yYWdlIGNyb3NzRm9ya0RhdGEgPSBjcm9zc0ZvcmtNYXBwaW5nW2Nyb3NzRm9ya0NvdW50XTsKICAgICAgICBjcm9zc0ZvcmtEYXRhLmJ0Y0FkZHJlc3MgPSBfYnRjQWRkcmVzczsKICAgICAgICBjcm9zc0ZvcmtEYXRhLnJlY2VpdmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBjcm9zc0ZvcmtEYXRhLmFtb3VudCA9IDA7CiAgICAgICAgY3Jvc3NGb3JrRGF0YS5jcmVhdGVUaW1lID0gbm93OwogICAgICAgIENyb3NzRm9ya0Rpc3RyaWJ1dGlvbiBjcm9zc2ZvcmsgPSBDcm9zc0ZvcmtEaXN0cmlidXRpb24oY3Jvc3NGb3JrRGlzdHJpYnV0aW9uKTsKICAgICAgICBjcm9zc2ZvcmsuZ2V0RGlzdHJpYnV0ZWRBbW91bnQoY3Jvc3NGb3JrQ291bnQsIF9idGNBZGRyZXNzLCBtc2cuc2VuZGVyKTsKICAgICAgICBMb2dUcmlnZ2VyQ3Jvc3NGb3JrKGJ0Y0FkZHJlc3NIYXNoLCBjcm9zc0ZvcmtJZHNbX2J0Y0FkZHJlc3NdLCBGb3JrUmVzdWx0Q29kZS5UUklHR0VSRUQpOwogICAgICAgIHJldHVybiBGb3JrUmVzdWx0Q29kZS5UUklHR0VSRUQ7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlIChfdG8gIT0gMHgwKTsKICAgICAgICByZXF1aXJlIChiYWxhbmNlT2ZbX2Zyb21dID4gX3ZhbHVlKTsKICAgICAgICByZXF1aXJlIChiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VPZltfdG9dKTsKICAgICAgICByZXF1aXJlKCFmcm96ZW5BY2NvdW50W19mcm9tXSk7CiAgICAgICAgcmVxdWlyZSghZnJvemVuQWNjb3VudFtfdG9dKTsKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZnJlZXplQWNjb3VudChhZGRyZXNzIF90YXJnZXQsIGJvb2wgX2ZyZWV6ZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgZnJvemVuQWNjb3VudFtfdGFyZ2V0XSA9IF9mcmVlemU7CiAgICAgICAgRnJvemVuRnVuZHMoX3RhcmdldCwgX2ZyZWV6ZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJ1eSgpIHBheWFibGUgaXNUcmFkaW5nIHB1YmxpYyB7CiAgICAgICAgdWludCBhbW91bnQgPSBtc2cudmFsdWUgLyBidXlQcmljZTsKICAgICAgICBfdHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZWxsKHVpbnQyNTYgYW1vdW50KSBpc1RyYWRpbmcgcHVibGljIHsKICAgICAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSA+PSBhbW91bnQgKiBzZWxsUHJpY2UpOwogICAgICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCB0aGlzLCBhbW91bnQpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoYW1vdW50ICogc2VsbFByaWNlKTsKICAgIH0KICAgIAogICAgCn0='.
	

]
