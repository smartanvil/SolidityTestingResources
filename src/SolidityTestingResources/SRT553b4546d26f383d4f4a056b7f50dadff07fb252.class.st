Class {
	#name : #SRT553b4546d26f383d4f4a056b7f50dadff07fb252,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT553b4546d26f383d4f4a056b7f50dadff07fb252 >> base64 [
	^ 'LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKKioqKioqKioqKioqKioqKioqKioqICAgIEJBVFRMRSBPRiBUSEVSTU9QWUxBRSB2MS4xICAqKioqKioqKioqKioqKioqKioqKioqKioqKioKKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCkJhdHRsZSBzbWFydCBjb250cmFjdCBpcyBhIHBsYXRmb3JtL2Vjb3N5c3RlbSBmb3IgZ2FtaW5nIGJ1aWx0IG9uIHRvcCBvZiBhCmRlY2VudHJhbGl6ZWQgc21hcnQgY29udHJhY3QsIGFsbG93aW5nIGFueW9uZSB0byB1c2UgYSBXYXJyaW9yIHRva2VuczogZW50aXRpZXMKd2hpY2ggZXhpc3RzIG9uIHRoZSBFdGhlcmV1bSBOZXR3b3JrLCB3aGljaCBjYW4gYmUgdHJhZGVkIG9yIHVzZWQgdG8gZW50ZXIgdGhlCmJhdHRsZSB3aXRoIG90aGVyIFdhcnJpb3IgdG9rZW5zIGhvbGRlcnMsIGZvciBwcm9maXQgb3IganVzdCBmb3IgZnVuIQoKKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKKioqKioqKioqKioqKioqKioqKioqKioqKiogICAgICAgICAgIFJVTEVTICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioKKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCi0gVGhpcyBmaXJzdCBiYXR0bGUgY29udHJhY3QgYWNjZXB0cyBQZXJzaWFucywgU3BhcnRhbnMgKDMwMCBUb2tlbnMpLCBJbW1vcnRhbHMKICBhbmQgQXRoZW5pYW5zIGFzIHdhcnJpb3JzLgotIEV2ZXJ5IHdhcnJpb3IgdG9rZW4gaGFzIGEgcHJvcGVyIHZhbHVlIGluICoqQmF0dGxlIFBvaW50IChCUCkqKiB0aGF0IHJlcHJlc2VudAogIGhpcyBzdHJlbmd0aCBvbiB0aGUgYmF0dGxlIGNvbnRyYWN0LgotIFBlcnNpYW5zIGFuZCBJbW1vcnRhbHMgcmVwcmVzZW50IHRoZSBQZXJzaWFuIGZhY3Rpb24sIFNwYXJ0YW5zIGFuZCBBdGhlbmlhbnMKICB0aGUgR3JlZWsgb25lLgotIER1cmluZyB0aGUgZmlyc3QgcGhhc2UgcGxheWVycyBzZW5kIHRva2VucyB0byB0aGUgYmF0dGxlIGNvbnRyYWN0CiAgKE5PVEU6IGJlZm9yZSBjYWxsaW5nIHRoZSBwcm9wZXIgY29udHJhY3QncyBmdW5jdGlvbiB0aGF0IGFzc2lnbmluZyB3YXJyaW9ycwogIHRvIHRoZSBiYXR0bGVmaWxlZCwgcGxheWVycyBORUVEIFRPIENBTEwgQVBQUk9WRSBvbiB0aGVpciB0b2tlbiBjb250cmFjdCB0bwogIGFsbG93IEJhdHRsZSBjb250cmFjdCB0byBtb3ZlIHRoZWlyIHRva2Vucy4KLSBPbmNlIHNlbnQsIHRyb29wcyBjYW4ndCBiZSByZXRpcmVkIGZvcm0gdGhlIGJhdHRsZWZpZWxkCi0gVGhlIGJhdHRsZSB3aWxsIGxhc3QgZm9yIHNldmVyYWwgZGF5cwotIFdoZW4gdGhlIGJhdHRsZSBwZXJpb2QgaXMgb3ZlciwgZm9sbG93aW5nIHJlc3VsdHMgY2FuIGhhcHBwZW46CiAgICAtLSBXaGVuIHRoZSBiYXR0bGUgZW5kcyBpbiBhIGRyYXc6CiAgICAgICAgKCopIDEwJSBvZiBtYWluIHRyb29wcyBvZiBib3RoIHNpZGVzIGxpZSBvbiB0aGUgZ3JvdW5kCiAgICAgICAgKCopIDkwJSBvZiB0aGVtIGNhbiBiZSByZXRyaWV2ZWQgYnkgZWFjaCBmb3JtZXIgb3duZXIKICAgICAgICAoKikgTm8gc2xhdmVzIGFyZSBhc3NpZ25lZAogICAgLS0gV2hlbiB0aGUgYmF0dGxlIGVuZHMgd2l0aCBhIHdpbm5pbmcgZmFjdGlvbnM6CiAgICAgICAgKCopIDEwJSBvZiBtYWluIHRyb29wcyBvZiBib3RoIHNpZGVzIGxpZSBvbiB0aGUgZ3JvdW5kCiAgICAgICAgKCopIDkwJSBvZiB0aGVtIGNhbiBiZSByZXRyaWV2ZWQgYnkgZWFjaCBmb3JtZXIgb3duZXIKICAgICAgICAoKikgU3Vydml2aW5nIHdhcnJpb3JzIG9mIHRoZSBsb29zaW5nIGZhY3Rpb24gYXJlIGFzc2lnbmVkIGFzIHNsYXZlcwogICAgICAgICAgICB0byB3aW5uZXJzCiAgICAgICAgKCopIFNsYXZlcyBhcmUgY29tcHV0ZWQgYmFzZWQgb24gdGhlIEJQIGNvbnRyaWJ1dGVkIGJ5IGVhY2ggc2VuZGVyCi0gUGVyc2lhbnMgYW5kIFNwYXJ0YW5zIGFyZSBtYWluIHRyb29wcy4KLSBJbW1vcnRhbHMgYW5kIEF0aGVuaWFucyBhcmUgc3VwcG9ydCB0cm9vcHM6IHRoZXJlIHdpbGwgYmUgbm8gY2FzdWFsdGllcyBpbgogIHRoZWlyIHJvdywgYW5kIHRoZXkgd2lsbCBiZSByZXRyaWV2ZWQgd2l0aG91dCBsb3NzZXMgYnkgb3JpZ2luYWwgc2VuZGVycy4KLSBPbmx5IFBlcnNpYW5zIGFuZCBTcGFydGFucyBjYW4gYmUgc2xhdmVzLiBJbW1vcnRhbHMgYW5kIEF0aGVuaWFucyBXSUxMIE5PVAogIGJlIHNlbnQgYmFjayBhcyBzbGF2ZXMgdG8gd2lubmVycy4KCioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCioqKioqKioqKioqKioqKioqKioqKioqKioqICAgICAgVE9LRU4gQUREUkVTU0VTICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqCioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgogICAgICAgIFBlcnNpYW5zICAgIChQUlMpICAgMHgxNjM3MzNiY2MyOGRiZjI2QjQxYThDZkE4M2UzNjliNUIzYWY3NDFiCiAgICAgICAgSW1tb3J0YWxzICAgKElNVCkgICAweDIyRTVGNjJEMEZBMTk5NzQ3NDlmYWExOTRlM2QzZUY2ZDg5YzA4ZDcKICAgICAgICBTcGFydGFucyAgICAoMzAwKSAgIDB4YUVjOThBNzA4ODEwNDE0ODc4YzNCQ0RGNDZBYWQzMWRFZDRhNDU1NwogICAgICAgIEF0aGVuaWFucyAgIChBVEgpICAgMHgxNzA1MmQ1MUU5NTQ1OTJDMTA0NjMyMGMyMzcxQWJhQjZDNzNFZjEwCiAgICAgICAgQmF0dGxlcyAgICAgKEJUTCkgICBTZXQgYWZ0ZXIgdGhlIGRlcGxveW1lbnQgb2YgdGhpcyBjb250cmFjdAoKKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBUb2tlbkVJUDIwIHsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CiAgICAKfQoKY29udHJhY3QgVGltZWQgewogICAgCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWU7ICAgICAgICAgICAvL3NlY29uZHMgc2luY2UgVW5peCBlcG9jaCB0aW1lCiAgICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOyAgICAgICAgICAgICAvL3NlY29uZHMgc2luY2UgVW5peCBlcG9jaCB0aW1lCiAgICB1aW50MjU2IHB1YmxpYyBhdmFyYWdlQmxvY2tUaW1lOyAgICAvL3NlY29uZHMKCiAgICAvLyBUaGlzIGNoZWNrIGlzIGFuIGhlbHBlciBmdW5jdGlvbiBmb3IgJiMyMDg7QXBwIHRvIGNoZWNrIHRoZSBlZmZlY3Qgb2YgdGhlIE5FWFQgdHJhbnNhY3Rpb24sIE5PVCBzaW1wbHkgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGNvbnRyYWN0CiAgICBmdW5jdGlvbiBpc0luVGltZSgpIGNvbnN0YW50IHJldHVybnMgKGJvb2wgaW5UaW1lKSB7CiAgICAgICAgcmV0dXJuIGJsb2NrLnRpbWVzdGFtcCA+PSAoc3RhcnRUaW1lIC0gYXZhcmFnZUJsb2NrVGltZSkgJiYgIWlzVGltZUV4cGlyZWQoKTsKICAgIH0KCiAgICAvLyBUaGlzIGNoZWNrIGlzIGFuIGhlbHBlciBmdW5jdGlvbiBmb3IgJiMyMDg7QXBwIHRvIGNoZWNrIHRoZSBlZmZlY3Qgb2YgdGhlIE5FWFQgdHJhbnNhY2lvbiwgTk9UIHNpbXBseSB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgY29udHJhY3QKICAgIGZ1bmN0aW9uIGlzVGltZUV4cGlyZWQoKSBjb25zdGFudCByZXR1cm5zIChib29sIHRpbWVFeHBpcmVkKSB7CiAgICAgICAgcmV0dXJuIGJsb2NrLnRpbWVzdGFtcCArIGF2YXJhZ2VCbG9ja1RpbWUgPj0gZW5kVGltZTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5SWZJblRpbWUgewogICAgICAgIHJlcXVpcmUoYmxvY2sudGltZXN0YW1wID49IHN0YXJ0VGltZSAmJiBibG9jay50aW1lc3RhbXAgPD0gZW5kVGltZSk7IF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUlmVGltZVBhc3NlZCB7CiAgICAgICAgcmVxdWlyZShibG9jay50aW1lc3RhbXAgPiBlbmRUaW1lKTsgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBUaW1lZCh1aW50MjU2IF9zdGFydFRpbWUsIHVpbnQyNTYgbGlmZSwgdWludDggX2F2YXJhZ2VCbG9ja1RpbWUpIHsKICAgICAgICBzdGFydFRpbWUgPSBfc3RhcnRUaW1lOwogICAgICAgIGVuZFRpbWUgPSBfc3RhcnRUaW1lICsgbGlmZTsKICAgICAgICBhdmFyYWdlQmxvY2tUaW1lID0gX2F2YXJhZ2VCbG9ja1RpbWU7CiAgICB9Cn0KCmxpYnJhcnkgU2FmZU1hdGhMaWIgewoKICAgIHVpbnQgY29uc3RhbnQgV0FEID0gMTAgKiogMTg7CiAgICB1aW50IGNvbnN0YW50IFJBWSA9IDEwICoqIDI3OwoKICAgIGZ1bmN0aW9uIGFkZCh1aW50IHgsIHVpbnQgeSkgaW50ZXJuYWwgcmV0dXJucyAodWludCB6KSB7CiAgICAgICAgcmVxdWlyZSgoeiA9IHggKyB5KSA+PSB4KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludCB4LCB1aW50IHkpIGludGVybmFsIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHJlcXVpcmUoKHogPSB4IC0geSkgPD0geCk7CiAgICB9CgogICAgZnVuY3Rpb24gbXVsKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCByZXR1cm5zICh1aW50IHopIHsKICAgICAgICByZXF1aXJlKHkgPT0gMCB8fCAoeiA9IHggKiB5KSAvIHkgPT0geCk7CiAgICB9CgogICAgZnVuY3Rpb24gcGVyKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50IHopIHsKICAgICAgICByZXR1cm4gbXVsKCh4IC8gMTAwKSwgeSk7CiAgICB9CgogICAgZnVuY3Rpb24gbWluKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCByZXR1cm5zICh1aW50IHopIHsKICAgICAgICByZXR1cm4geCA8PSB5ID8geCA6IHk7CiAgICB9CgogICAgZnVuY3Rpb24gbWF4KHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCByZXR1cm5zICh1aW50IHopIHsKICAgICAgICByZXR1cm4geCA+PSB5ID8geCA6IHk7CiAgICB9CgogICAgZnVuY3Rpb24gaW1pbihpbnQgeCwgaW50IHkpIGludGVybmFsIHJldHVybnMgKGludCB6KSB7CiAgICAgICAgcmV0dXJuIHggPD0geSA/IHggOiB5OwogICAgfQoKICAgIGZ1bmN0aW9uIGltYXgoaW50IHgsIGludCB5KSBpbnRlcm5hbCByZXR1cm5zIChpbnQgeikgewogICAgICAgIHJldHVybiB4ID49IHkgPyB4IDogeTsKICAgIH0KCiAgICBmdW5jdGlvbiB3bXVsKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCByZXR1cm5zICh1aW50IHopIHsKICAgICAgICB6ID0gYWRkKG11bCh4LCB5KSwgV0FEIC8gMikgLyBXQUQ7CiAgICB9CgogICAgZnVuY3Rpb24gcm11bCh1aW50IHgsIHVpbnQgeSkgaW50ZXJuYWwgcmV0dXJucyAodWludCB6KSB7CiAgICAgICAgeiA9IGFkZChtdWwoeCwgeSksIFJBWSAvIDIpIC8gUkFZOwogICAgfQoKICAgIGZ1bmN0aW9uIHdkaXYodWludCB4LCB1aW50IHkpIGludGVybmFsIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHogPSBhZGQobXVsKHgsIFdBRCksIHkgLyAyKSAvIHk7CiAgICB9CgogICAgZnVuY3Rpb24gcmRpdih1aW50IHgsIHVpbnQgeSkgaW50ZXJuYWwgcmV0dXJucyAodWludCB6KSB7CiAgICAgICAgeiA9IGFkZChtdWwoeCwgUkFZKSwgeSAvIDIpIC8geTsKICAgIH0KCiAgICBmdW5jdGlvbiB3cGVyKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50IHopIHsKICAgICAgICByZXR1cm4gd211bCh3ZGl2KHgsIDEwMCksIHkpOwogICAgfQoKICAgIC8vIFRoaXMgZmFtb3VzIGFsZ29yaXRobSBpcyBjYWxsZWQgImV4cG9uZW50aWF0aW9uIGJ5IHNxdWFyaW5nIgogICAgLy8gYW5kIGNhbGN1bGF0ZXMgeF5uIHdpdGggeCBhcyBmaXhlZC1wb2ludCBhbmQgbiBhcyByZWd1bGFyIHVuc2lnbmVkLgogICAgLy8KICAgIC8vIEl0J3MgTyhsb2cgbiksIGluc3RlYWQgb2YgTyhuKSBmb3IgbmFpdmUgcmVwZWF0ZWQgbXVsdGlwbGljYXRpb24uCiAgICAvLwogICAgLy8gVGhlc2UgZmFjdHMgYXJlIHdoeSBpdCB3b3JrczoKICAgIC8vCiAgICAvLyAgSWYgbiBpcyBldmVuLCB0aGVuIHhebiA9ICh4XjIpXihuLzIpLgogICAgLy8gIElmIG4gaXMgb2RkLCAgdGhlbiB4Xm4gPSB4ICogeF4obi0xKSwKICAgIC8vICAgYW5kIGFwcGx5aW5nIHRoZSBlcXVhdGlvbiBmb3IgZXZlbiB4IGdpdmVzCiAgICAvLyAgICB4Xm4gPSB4ICogKHheMileKChuLTEpIC8gMikuCiAgICAvLwogICAgLy8gIEFsc28sIEVWTSBkaXZpc2lvbiBpcyBmbG9vcmluZyBhbmQKICAgIC8vICAgIGZsb29yWyhuLTEpIC8gMl0gPSBmbG9vcltuIC8gMl0uCiAgICAvLwogICAgZnVuY3Rpb24gcnBvdyh1aW50IHgsIHVpbnQgbikgaW50ZXJuYWwgcmV0dXJucyAodWludCB6KSB7CiAgICAgICAgeiA9IG4gJSAyICE9IDAgPyB4IDogUkFZOwoKICAgICAgICBmb3IgKG4gLz0gMjsgbiAhPSAwOyBuIC89IDIpIHsKICAgICAgICAgICAgeCA9IHJtdWwoeCwgeCk7CgogICAgICAgICAgICBpZiAobiAlIDIgIT0gMCkgewogICAgICAgICAgICAgICAgeiA9IHJtdWwoeiwgeCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cgp9Cgpjb250cmFjdCBPd25lZCB7CgogICAgYWRkcmVzcyBvd25lcjsKICAgIAogICAgZnVuY3Rpb24gT3duZWQoKSB7IG93bmVyID0gbXNnLnNlbmRlcjsgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQp9Cgpjb250cmFjdCBVcGdyYWRhYmxlIGlzIE93bmVkIHsKCiAgICBzdHJpbmcgIHB1YmxpYyBWRVJTSU9OOwogICAgYm9vbCAgICBwdWJsaWMgZGVwcmVjYXRlZDsKICAgIHN0cmluZyAgcHVibGljIG5ld1ZlcnNpb247CiAgICBhZGRyZXNzIHB1YmxpYyBuZXdBZGRyZXNzOwoKICAgIGZ1bmN0aW9uIFVwZ3JhZGFibGUoc3RyaW5nIF92ZXJzaW9uKSB7CiAgICAgICAgVkVSU0lPTiA9IF92ZXJzaW9uOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldERlcHJlY2F0ZWQoc3RyaW5nIF9uZXdWZXJzaW9uLCBhZGRyZXNzIF9uZXdBZGRyZXNzKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSghZGVwcmVjYXRlZCk7CiAgICAgICAgZGVwcmVjYXRlZCA9IHRydWU7CiAgICAgICAgbmV3VmVyc2lvbiA9IF9uZXdWZXJzaW9uOwogICAgICAgIG5ld0FkZHJlc3MgPSBfbmV3QWRkcmVzczsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKY29udHJhY3QgQmF0dGxlT2ZUaGVybW9weWxhZSBpcyBUaW1lZCwgVXBncmFkYWJsZSB7CiAgICB1c2luZyBTYWZlTWF0aExpYiBmb3IgdWludDsKICAKICAgIHVpbnQgICAgcHVibGljIGNvbnN0YW50IE1BWF9QRVJTSUFOUyAgICAgICAgICAgID0gMzAwMDAwICogMTAqKjE4OyAgLy8gMzAwLjAwMAogICAgdWludCAgICBwdWJsaWMgY29uc3RhbnQgTUFYX1NQQVJUQU5TICAgICAgICAgICAgPSAzMDAgKiAxMCoqMTg7ICAgICAvLyAzMDAKICAgIHVpbnQgICAgcHVibGljIGNvbnN0YW50IE1BWF9JTU1PUlRBTFMgICAgICAgICAgID0gMTAwOyAgICAgICAgICAgICAgLy8gMTAwCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBNQVhfQVRIRU5JQU5TICAgICAgICAgICA9IDEwMCAqIDEwKioxODsgICAgIC8vIDEwMAoKICAgIHVpbnQ4ICAgcHVibGljIGNvbnN0YW50IEJQX1BFUlNJQU4gICAgICAgICAgICAgID0gMTsgICAgICAgICAgICAgICAgLy8gRWFjaCBQZXJzaWFuIHdvcnRocyAxIEJhdHRsZSBQb2ludAogICAgdWludDggICBwdWJsaWMgY29uc3RhbnQgQlBfSU1NT1JUQUwgICAgICAgICAgICAgPSAxMDA7ICAgICAgICAgICAgICAvLyBFYWNoIEltbW9ydGFsIHdvcnRocyAxMDAgQmF0dGxlIFBvaW50cwogICAgdWludDE2ICBwdWJsaWMgY29uc3RhbnQgQlBfU1BBUlRBTiAgICAgICAgICAgICAgPSAxMDAwOyAgICAgICAgICAgICAvLyBFYWNoIFNwYXJ0YW4gd29ydGhzIDEwMDAgQmF0dGxlIFBvaW50cwogICAgdWludDggICBwdWJsaWMgY29uc3RhbnQgQlBfQVRIRU5JQU4gICAgICAgICAgICAgPSAxMDA7ICAgICAgICAgICAgICAvLyBFYWNoIEF0aGVuaWFucyB3b3J0aHMgMTAwIEJhdHRsZSBQb2ludHMKCiAgICB1aW50OCAgIHB1YmxpYyBjb25zdGFudCBCVExfUEVSU0lBTiAgICAgICAgICAgICAgPSAxOyAgICAgICAgICAgICAgIC8vIEVhY2ggUGVyc2lhbiB3b3J0aHMgMSBCYXR0bGUgVG9rZW4KICAgIHVpbnQxNiAgcHVibGljIGNvbnN0YW50IEJUTF9JTU1PUlRBTCAgICAgICAgICAgICA9IDIwMDA7ICAgICAgICAgICAgLy8gRWFjaCBJbW1vcnRhbCB3b3J0aHMgMjAwMCBCYXR0bGUgVG9rZW5zCiAgICB1aW50MTYgIHB1YmxpYyBjb25zdGFudCBCVExfU1BBUlRBTiAgICAgICAgICAgICAgPSAxMDAwOyAgICAgICAgICAgIC8vIEVhY2ggU3BhcnRhbiB3b3J0aHMgMTAwMCBCYXR0bGUgVG9rZW5zCiAgICB1aW50MTYgIHB1YmxpYyBjb25zdGFudCBCVExfQVRIRU5JQU4gICAgICAgICAgICAgPSAyMDAwOyAgICAgICAgICAgIC8vIEVhY2ggQXRoZW5pYW5zIHdvcnRocyAyMDAwIEJhdHRsZSBUb2tlbnMKCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBXQUQgICAgICAgICAgICAgICAgICAgICA9IDEwKioxODsgICAgICAgICAgIC8vIFNob3J0Y3V0IGZvciAxLjAwMC4wMDAuMDAwLjAwMC4wMDAuMDAwCiAgICB1aW50OCAgIHB1YmxpYyBjb25zdGFudCBCQVRUTEVfUE9JTlRfREVDSU1BTFMgICA9IDE4OyAgICAgICAgICAgICAgIC8vIEJhdHRsZSBwb2ludHMgZGVjaW1hbCBwb3NpdGlvbnMKICAgIHVpbnQ4ICAgcHVibGljIGNvbnN0YW50IEJBVFRMRV9DQVNVQUxUSUVTICAgICAgID0gMTA7ICAgICAgICAgICAgICAgLy8gUGVyY2VudGFnZSBvZiBQZXJzaWFuIGFuZCBTcGFydGFuIGNhc3VhbHRpZXMKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgcGVyc2lhbnM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRyZXNzIG9mIHRoZSBQZXJzaWFuIFRva2VucwogICAgYWRkcmVzcyBwdWJsaWMgaW1tb3J0YWxzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRyZXNzIG9mIHRoZSBJbW1vcnRhbCBUb2tlbnMKICAgIGFkZHJlc3MgcHVibGljIHNwYXJ0YW5zOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkcmVzcyBvZiB0aGUgMzAwIFRva2VucwogICAgYWRkcmVzcyBwdWJsaWMgYXRoZW5pYW5zOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRyZXNzIG9mIHRoZSBBdGhlbmlhbiBUb2tlbnMKICAgIGFkZHJlc3MgcHVibGljIGJhdHRsZXM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkcmVzcyBvZiB0aGUgQmF0dGxlIFRva2VucwogICAgYWRkcmVzcyBwdWJsaWMgYmF0dGxlc093bmVyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPd25lciBvZiB0aGUgQmF0dGxlIFRva2VuIGNvbnRyYWN0CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSAgIHB1YmxpYyAgd2FycmlvcnNCeVBsYXllcjsgICAgICAgICAgICAgICAvLyBUcm9vcHMgY3VycmVudGx5IGFsbG9jYXRlZCBieSBlYWNoIHBsYXllcgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyAgd2FycmlvcnNPblRoZUJhdHRsZWZpZWxkOyAgICAgICAvLyBUb3RhbCB0cm9vcHMgZmlnaHRpbmcgaW4gdGhlIGJhdHRsZQoKICAgIGV2ZW50IFdhcnJpb3JzQXNzaWduZWRUb0JhdHRsZWZpZWxkIChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgX2ZhY3Rpb24sIHVpbnQgX2JhdHRsZVBvaW50c0luY3JlbWVudEZvcmVjYXN0KTsKICAgIGV2ZW50IFdhcnJpb3JzQmFja1RvSG9tZSAgICAgICAgICAgIChhZGRyZXNzIGluZGV4ZWQgX3RvLCBhZGRyZXNzIF9mYWN0aW9uLCB1aW50IF9zdXJ2aXZlZFdhcnJpb3JzKTsKCiAgICBmdW5jdGlvbiBCYXR0bGVPZlRoZXJtb3B5bGFlKHVpbnQgX3N0YXJ0VGltZSwgdWludCBfbGlmZSwgdWludDggX2F2YXJhZ2VCbG9ja1RpbWUsIGFkZHJlc3MgX3BlcnNpYW5zLCBhZGRyZXNzIF9pbW1vcnRhbHMsIGFkZHJlc3MgX3NwYXJ0YW5zLCBhZGRyZXNzIF9hdGhlbmlhbnMpIFRpbWVkKF9zdGFydFRpbWUsIF9saWZlLCBfYXZhcmFnZUJsb2NrVGltZSkgVXBncmFkYWJsZSgiMS4wLjAiKSB7CiAgICAgICAgcGVyc2lhbnMgPSBfcGVyc2lhbnM7CiAgICAgICAgaW1tb3J0YWxzID0gX2ltbW9ydGFsczsKICAgICAgICBzcGFydGFucyA9IF9zcGFydGFuczsKICAgICAgICBhdGhlbmlhbnMgPSBfYXRoZW5pYW5zOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJhdHRsZVRva2VuQWRkcmVzcyhhZGRyZXNzIF9iYXR0bGVUb2tlbkFkZHJlc3MsIGFkZHJlc3MgX2JhdHRsZVRva2VuT3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgYmF0dGxlcyA9IF9iYXR0bGVUb2tlbkFkZHJlc3M7CiAgICAgICAgYmF0dGxlc093bmVyID0gX2JhdHRsZVRva2VuT3duZXI7CiAgICB9CgogICAgZnVuY3Rpb24gYXNzaWduUGVyc2lhbnNUb0JhdHRsZSh1aW50IF93YXJyaW9ycykgb25seUlmSW5UaW1lIGV4dGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFzc2lnbldhcnJpb3JzVG9CYXR0bGUobXNnLnNlbmRlciwgcGVyc2lhbnMsIF93YXJyaW9ycywgTUFYX1BFUlNJQU5TKTsKICAgICAgICBzZW5kQmF0dGxlVG9rZW5zKG1zZy5zZW5kZXIsIF93YXJyaW9ycy5tdWwoQlRMX1BFUlNJQU4pKTsKICAgICAgICAvLyBQZXJzaWFucyBhcmUgZGl2aXNpYmxlIHdpdGggMTggZGVjaW1hbHMgYW5kIHRoZWlyIHZhbHVlIGlzIDEgQlAKICAgICAgICBXYXJyaW9yc0Fzc2lnbmVkVG9CYXR0bGVmaWVsZChtc2cuc2VuZGVyLCBwZXJzaWFucywgX3dhcnJpb3JzIC8gV0FEKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhc3NpZ25JbW1vcnRhbHNUb0JhdHRsZSh1aW50IF93YXJyaW9ycykgb25seUlmSW5UaW1lIGV4dGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFzc2lnbldhcnJpb3JzVG9CYXR0bGUobXNnLnNlbmRlciwgaW1tb3J0YWxzLCBfd2FycmlvcnMsIE1BWF9JTU1PUlRBTFMpOwogICAgICAgIHNlbmRCYXR0bGVUb2tlbnMobXNnLnNlbmRlciwgX3dhcnJpb3JzLm11bChXQUQpLm11bChCVExfSU1NT1JUQUwpKTsKICAgICAgICAvLyBJbW1vcnRhbHMgYXJlIG5vdCBkaXZpc2libGUgYW5kIHRoZWlyIHZhbHVlIGlzIDEwMCBCUAogICAgICAgIFdhcnJpb3JzQXNzaWduZWRUb0JhdHRsZWZpZWxkKG1zZy5zZW5kZXIsIGltbW9ydGFscywgX3dhcnJpb3JzLm11bChCUF9JTU1PUlRBTCkpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFzc2lnblNwYXJ0YW5zVG9CYXR0bGUodWludCBfd2FycmlvcnMpIG9ubHlJZkluVGltZSBleHRlcm5hbCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhc3NpZ25XYXJyaW9yc1RvQmF0dGxlKG1zZy5zZW5kZXIsIHNwYXJ0YW5zLCBfd2FycmlvcnMsIE1BWF9TUEFSVEFOUyk7CiAgICAgICAgc2VuZEJhdHRsZVRva2Vucyhtc2cuc2VuZGVyLCBfd2FycmlvcnMubXVsKEJUTF9TUEFSVEFOKSk7CiAgICAgICAgLy8gU3BhcnRhbnMgYXJlIGRpdmlzaWJsZSB3aXRoIDE4IGRlY2ltYWxzIGFuZCB0aGVpciB2YWx1ZSBpcyAxLjAwMCBCUAogICAgICAgIFdhcnJpb3JzQXNzaWduZWRUb0JhdHRsZWZpZWxkKG1zZy5zZW5kZXIsIHNwYXJ0YW5zLCAoX3dhcnJpb3JzIC8gV0FEKS5tdWwoQlBfU1BBUlRBTikpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFzc2lnbkF0aGVuaWFuc1RvQmF0dGxlKHVpbnQgX3dhcnJpb3JzKSBvbmx5SWZJblRpbWUgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYXNzaWduV2FycmlvcnNUb0JhdHRsZShtc2cuc2VuZGVyLCBhdGhlbmlhbnMsIF93YXJyaW9ycywgTUFYX0FUSEVOSUFOUyk7CiAgICAgICAgc2VuZEJhdHRsZVRva2Vucyhtc2cuc2VuZGVyLCBfd2FycmlvcnMubXVsKEJUTF9BVEhFTklBTikpOwogICAgICAgIC8vIEF0aGVuaWFucyBhcmUgZGl2aXNpYmxlIHdpdGggMTggZGVjaW1hbHMgYW5kIHRoZWlyIHZhbHVlIGlzIDEwMCBCUAogICAgICAgIFdhcnJpb3JzQXNzaWduZWRUb0JhdHRsZWZpZWxkKG1zZy5zZW5kZXIsIGF0aGVuaWFucywgKF93YXJyaW9ycyAvIFdBRCkubXVsKEJQX0FUSEVOSUFOKSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcmVkZWVtV2FycmlvcnMoKSBvbmx5SWZUaW1lUGFzc2VkIGV4dGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChnZXRQZXJzaWFuc0JhdHRsZVBvaW50cygpID4gZ2V0R3JlZWtzQmF0dGxlUG9pbnRzKCkpIHsKICAgICAgICAgICAgLy8gUGVyc2lhbnMgd29uLCBjb21wdXRlIHNsYXZlcwogICAgICAgICAgICB1aW50IHNwYXJ0YW5TbGF2ZXMgPSBjb21wdXRlU2xhdmVzKG1zZy5zZW5kZXIsIHNwYXJ0YW5zKTsKICAgICAgICAgICAgaWYgKHNwYXJ0YW5TbGF2ZXMgPiAwKSB7CiAgICAgICAgICAgICAgICAvLyBTZW5kIGJhY2sgU3BhcnRhbiBzbGF2ZXMgdG8gd2lubmVyCiAgICAgICAgICAgICAgICBzZW5kV2FycmlvcnMobXNnLnNlbmRlciwgc3BhcnRhbnMsIHNwYXJ0YW5TbGF2ZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFNlbmQgYmFjayBQZXJzaWFucyBidXQgY2FzdWFsdGllcwogICAgICAgICAgICByZXRyaWV2ZVdhcnJpb3JzKG1zZy5zZW5kZXIsIHBlcnNpYW5zLCBCQVRUTEVfQ0FTVUFMVElFUyk7CiAgICAgICAgfSBlbHNlIGlmIChnZXRQZXJzaWFuc0JhdHRsZVBvaW50cygpIDwgZ2V0R3JlZWtzQmF0dGxlUG9pbnRzKCkpIHsKICAgICAgICAgICAgLy9HcmVla3Mgd29uLCBzZW5kIGJhY2sgUGVyc2lhbiBzbGF2ZXMKICAgICAgICAgICAgdWludCBwZXJzaWFuU2xhdmVzID0gY29tcHV0ZVNsYXZlcyhtc2cuc2VuZGVyLCBwZXJzaWFucyk7CiAgICAgICAgICAgIGlmIChwZXJzaWFuU2xhdmVzID4gMCkgewogICAgICAgICAgICAgICAgLy8gU2VuZCBiYWNrIFBlcnNpYW5zIHNsYXZlcyB0byB3aW5uZXIKICAgICAgICAgICAgICAgIHNlbmRXYXJyaW9ycyhtc2cuc2VuZGVyLCBwZXJzaWFucywgcGVyc2lhblNsYXZlcyk7ICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFNlbmQgYmFjayBTcGFydGFucyBidXQgY2FzdWFsdGllcwogICAgICAgICAgICByZXRyaWV2ZVdhcnJpb3JzKG1zZy5zZW5kZXIsIHNwYXJ0YW5zLCBCQVRUTEVfQ0FTVUFMVElFUyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gSXQncyBhIGRyYXcsIHNlbmQgYmFjayBQZXJzaWFucyBhbmQgU3BhcnRhbnMgYnV0IGNhc3VhbHRpZXMKICAgICAgICAgICAgcmV0cmlldmVXYXJyaW9ycyhtc2cuc2VuZGVyLCBwZXJzaWFucywgQkFUVExFX0NBU1VBTFRJRVMpOwogICAgICAgICAgICByZXRyaWV2ZVdhcnJpb3JzKG1zZy5zZW5kZXIsIHNwYXJ0YW5zLCBCQVRUTEVfQ0FTVUFMVElFUyk7CiAgICAgICAgfQogICAgICAgIC8vIFNlbmQgYmFjayBJbW1vcnRhbHMgdW50b3VjaGVkCiAgICAgICAgcmV0cmlldmVXYXJyaW9ycyhtc2cuc2VuZGVyLCBpbW1vcnRhbHMsIDApOwogICAgICAgIC8vIFNlbmQgYmFjayBBdGhlbmlhbnMgdW50b3VjaGVkCiAgICAgICAgcmV0cmlldmVXYXJyaW9ycyhtc2cuc2VuZGVyLCBhdGhlbmlhbnMsIDApOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFzc2lnbldhcnJpb3JzVG9CYXR0bGUoYWRkcmVzcyBfcGxheWVyLCBhZGRyZXNzIF9mYWN0aW9uLCB1aW50IF93YXJyaW9ycywgdWludCBfbWF4V2FycmlvcnMpIHByaXZhdGUgewogICAgICAgIHJlcXVpcmUod2FycmlvcnNPblRoZUJhdHRsZWZpZWxkW19mYWN0aW9uXS5hZGQoX3dhcnJpb3JzKSA8PSBfbWF4V2FycmlvcnMpOwogICAgICAgIHJlcXVpcmUoVG9rZW5FSVAyMChfZmFjdGlvbikudHJhbnNmZXJGcm9tKF9wbGF5ZXIsIGFkZHJlc3ModGhpcyksIF93YXJyaW9ycykpOwogICAgICAgIHdhcnJpb3JzQnlQbGF5ZXJbX3BsYXllcl1bX2ZhY3Rpb25dID0gd2FycmlvcnNCeVBsYXllcltfcGxheWVyXVtfZmFjdGlvbl0uYWRkKF93YXJyaW9ycyk7CiAgICAgICAgd2FycmlvcnNPblRoZUJhdHRsZWZpZWxkW19mYWN0aW9uXSA9IHdhcnJpb3JzT25UaGVCYXR0bGVmaWVsZFtfZmFjdGlvbl0uYWRkKF93YXJyaW9ycyk7CiAgICB9CgogICAgZnVuY3Rpb24gcmV0cmlldmVXYXJyaW9ycyhhZGRyZXNzIF9wbGF5ZXIsIGFkZHJlc3MgX2ZhY3Rpb24sIHVpbnQ4IF9kZWFkUGVyY2VudGFnZSkgcHJpdmF0ZSB7CiAgICAgICAgaWYgKHdhcnJpb3JzQnlQbGF5ZXJbX3BsYXllcl1bX2ZhY3Rpb25dID4gMCkgewogICAgICAgICAgICB1aW50IF93YXJyaW9ycyA9IHdhcnJpb3JzQnlQbGF5ZXJbX3BsYXllcl1bX2ZhY3Rpb25dOwogICAgICAgICAgICBpZiAoX2RlYWRQZXJjZW50YWdlID4gMCkgewogICAgICAgICAgICAgICAgX3dhcnJpb3JzID0gX3dhcnJpb3JzLnN1Yihfd2FycmlvcnMud3BlcihfZGVhZFBlcmNlbnRhZ2UpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB3YXJyaW9yc0J5UGxheWVyW19wbGF5ZXJdW19mYWN0aW9uXSA9IDA7CiAgICAgICAgICAgIHNlbmRXYXJyaW9ycyhfcGxheWVyLCBfZmFjdGlvbiwgX3dhcnJpb3JzKTsKICAgICAgICAgICAgV2FycmlvcnNCYWNrVG9Ib21lKF9wbGF5ZXIsIF9mYWN0aW9uLCBfd2FycmlvcnMpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZW5kV2FycmlvcnMoYWRkcmVzcyBfcGxheWVyLCBhZGRyZXNzIF9mYWN0aW9uLCB1aW50IF93YXJyaW9ycykgcHJpdmF0ZSB7CiAgICAgICAgcmVxdWlyZShUb2tlbkVJUDIwKF9mYWN0aW9uKS50cmFuc2ZlcihfcGxheWVyLCBfd2FycmlvcnMpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZW5kQmF0dGxlVG9rZW5zKGFkZHJlc3MgX3BsYXllciwgdWludCBfdmFsdWUpIHByaXZhdGUgewogICAgICAgIHJlcXVpcmUoVG9rZW5FSVAyMChiYXR0bGVzKS50cmFuc2ZlckZyb20oYmF0dGxlc093bmVyLCBfcGxheWVyLCBfdmFsdWUpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQZXJzaWFuc09uVGhlQmF0dGxlZmllbGQoYWRkcmVzcyBfcGxheWVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHBlcnNpYW5zT25UaGVCYXR0bGVmaWVsZCkgewogICAgICAgIHJldHVybiB3YXJyaW9yc0J5UGxheWVyW19wbGF5ZXJdW3BlcnNpYW5zXTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRJbW1vcnRhbHNPblRoZUJhdHRsZWZpZWxkKGFkZHJlc3MgX3BsYXllcikgY29uc3RhbnQgcmV0dXJucyAodWludCBpbW1vcnRhbHNPblRoZUJhdHRsZWZpZWxkKSB7CiAgICAgICAgcmV0dXJuIHdhcnJpb3JzQnlQbGF5ZXJbX3BsYXllcl1baW1tb3J0YWxzXTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTcGFydGFuc09uVGhlQmF0dGxlZmllbGQoYWRkcmVzcyBfcGxheWVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHNwYXJ0YW5zT25UaGVCYXR0bGVmaWVsZCkgewogICAgICAgIHJldHVybiB3YXJyaW9yc0J5UGxheWVyW19wbGF5ZXJdW3NwYXJ0YW5zXTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRBdGhlbmlhbnNPblRoZUJhdHRsZWZpZWxkKGFkZHJlc3MgX3BsYXllcikgY29uc3RhbnQgcmV0dXJucyAodWludCBhdGhlbmlhbnNPblRoZUJhdHRsZWZpZWxkKSB7CiAgICAgICAgcmV0dXJuIHdhcnJpb3JzQnlQbGF5ZXJbX3BsYXllcl1bYXRoZW5pYW5zXTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQZXJzaWFuc0JhdHRsZVBvaW50cygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcGVyc2lhbnNCYXR0bGVQb2ludHMpIHsKICAgICAgICByZXR1cm4gKHdhcnJpb3JzT25UaGVCYXR0bGVmaWVsZFtwZXJzaWFuc10ubXVsKEJQX1BFUlNJQU4pICsgd2FycmlvcnNPblRoZUJhdHRsZWZpZWxkW2ltbW9ydGFsc10ubXVsKFdBRCkubXVsKEJQX0lNTU9SVEFMKSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0R3JlZWtzQmF0dGxlUG9pbnRzKCkgY29uc3RhbnQgcmV0dXJucyAodWludCBncmVla3NCYXR0bGVQb2ludHMpIHsKICAgICAgICByZXR1cm4gKHdhcnJpb3JzT25UaGVCYXR0bGVmaWVsZFtzcGFydGFuc10ubXVsKEJQX1NQQVJUQU4pICsgd2FycmlvcnNPblRoZUJhdHRsZWZpZWxkW2F0aGVuaWFuc10ubXVsKEJQX0FUSEVOSUFOKSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UGVyc2lhbnNCYXR0bGVQb2ludHNCeShhZGRyZXNzIF9wbGF5ZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcGxheWVyQmF0dGxlUG9pbnRzKSB7CiAgICAgICAgcmV0dXJuIChnZXRQZXJzaWFuc09uVGhlQmF0dGxlZmllbGQoX3BsYXllcikubXVsKEJQX1BFUlNJQU4pICsgZ2V0SW1tb3J0YWxzT25UaGVCYXR0bGVmaWVsZChfcGxheWVyKS5tdWwoV0FEKS5tdWwoQlBfSU1NT1JUQUwpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRHcmVla3NCYXR0bGVQb2ludHNCeShhZGRyZXNzIF9wbGF5ZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcGxheWVyQmF0dGxlUG9pbnRzKSB7CiAgICAgICAgcmV0dXJuIChnZXRTcGFydGFuc09uVGhlQmF0dGxlZmllbGQoX3BsYXllcikubXVsKEJQX1NQQVJUQU4pICsgZ2V0QXRoZW5pYW5zT25UaGVCYXR0bGVmaWVsZChfcGxheWVyKS5tdWwoQlBfQVRIRU5JQU4pKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb21wdXRlU2xhdmVzKGFkZHJlc3MgX3BsYXllciwgYWRkcmVzcyBfbG9vc2luZ01haW5Ucm9vcHMpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgc2xhdmVzKSB7CiAgICAgICAgaWYgKF9sb29zaW5nTWFpblRyb29wcyA9PSBzcGFydGFucykgewogICAgICAgICAgICByZXR1cm4gZ2V0UGVyc2lhbnNCYXR0bGVQb2ludHNCeShfcGxheWVyKS53ZGl2KGdldFBlcnNpYW5zQmF0dGxlUG9pbnRzKCkpLndtdWwoZ2V0VG90YWxTbGF2ZXMoc3BhcnRhbnMpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZ2V0R3JlZWtzQmF0dGxlUG9pbnRzQnkoX3BsYXllcikud2RpdihnZXRHcmVla3NCYXR0bGVQb2ludHMoKSkud211bChnZXRUb3RhbFNsYXZlcyhwZXJzaWFucykpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb3RhbFNsYXZlcyhhZGRyZXNzIF9mYWN0aW9uKSBjb25zdGFudCByZXR1cm5zICh1aW50IHNsYXZlcykgewogICAgICAgIHJldHVybiB3YXJyaW9yc09uVGhlQmF0dGxlZmllbGRbX2ZhY3Rpb25dLnN1Yih3YXJyaW9yc09uVGhlQmF0dGxlZmllbGRbX2ZhY3Rpb25dLndwZXIoQkFUVExFX0NBU1VBTFRJRVMpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0luUHJvZ3Jlc3MoKSBjb25zdGFudCByZXR1cm5zIChib29sIGluUHJvZ3Jlc3MpIHsKICAgICAgICByZXR1cm4gIWlzVGltZUV4cGlyZWQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0VuZGVkKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBlbmRlZCkgewogICAgICAgIHJldHVybiBpc1RpbWVFeHBpcmVkKCk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNEcmF3KCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBkcmF3KSB7CiAgICAgICAgcmV0dXJuIChnZXRQZXJzaWFuc0JhdHRsZVBvaW50cygpID09IGdldEdyZWVrc0JhdHRsZVBvaW50cygpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUZW1wb3JhcnlXaW5uaW5nRmFjdGlvbigpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyB0ZW1wb3JhcnlXaW5uaW5nRmFjdGlvbikgewogICAgICAgIGlmIChpc0RyYXcoKSkgewogICAgICAgICAgICByZXR1cm4gIkl0J3MgY3VycmVudGx5IGEgZHJhdywgYnV0IHRoZSBiYXR0bGUgaXMgc3RpbGwgaW4gcHJvZ3Jlc3MhIjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGdldFBlcnNpYW5zQmF0dGxlUG9pbnRzKCkgPiBnZXRHcmVla3NCYXR0bGVQb2ludHMoKSA/CiAgICAgICAgICAgICJQZXJzaWFucyBhcmUgd2lubmluZywgYnV0IHRoZSBiYXR0bGUgaXMgc3RpbGwgaW4gcHJvZ3Jlc3MhIiA6ICJHcmVla3MgYXJlIHdpbm5pbmcsIGJ1dCB0aGUgYmF0dGxlIGlzIHN0aWxsIGluIHByb2dyZXNzISI7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0V2lubmluZ0ZhY3Rpb24oKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgd2lubmluZ0ZhY3Rpb24pIHsKICAgICAgICBpZiAoaXNJblByb2dyZXNzKCkpIHsKICAgICAgICAgICAgcmV0dXJuICJUaGUgYmF0dGxlIGlzIHN0aWxsIGluIHByb2dyZXNzIjsKICAgICAgICB9CiAgICAgICAgaWYgKGlzRHJhdygpKSB7CiAgICAgICAgICAgIHJldHVybiAiVGhlIGJhdHRsZSBlbmRlZCBpbiBhIGRyYXchIjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGdldFBlcnNpYW5zQmF0dGxlUG9pbnRzKCkgPiBnZXRHcmVla3NCYXR0bGVQb2ludHMoKSA/ICJQZXJzaWFucyIgOiAiR3JlZWtzIjsKICAgIH0KCn0='.
	

]
