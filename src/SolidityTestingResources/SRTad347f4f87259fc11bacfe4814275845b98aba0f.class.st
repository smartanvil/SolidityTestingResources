Class {
	#name : #SRTad347f4f87259fc11bacfe4814275845b98aba0f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTad347f4f87259fc11bacfe4814275845b98aba0f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIAogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQogCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIHJldHVybiBjOwogIH0KIAogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQogCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBPd25hYmxlIHsKICAgIAogIGFkZHJlc3MgcHVibGljIG93bmVyOwogCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7ICAgICAgCiAgICBvd25lciA9IG5ld093bmVyOwogIH0KIAp9Cgpjb250cmFjdCBTaW5nbGVUb2tlbkNvaW4gewogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KTsKICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCk7CiAgZnVuY3Rpb24gbW92ZVVuc29sZChhZGRyZXNzIF9hZGRyKTsKICBmdW5jdGlvbiBzZXRGcmVlemUoYWRkcmVzcyBfYWRkcik7CiAgZnVuY3Rpb24gcmVtb3ZlRnJlZXplKGFkZHJlc3MgX2FkZHIpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgZnVuY3Rpb24gbmV3VHJhbnNmZXJNYW51YWxUb2tlbnNuZXdUcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIHRyYW5zZmVyVG9rZW5zKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgZnJlZXplVGltZSwgdWludDI1NiBfdHlwZSk7CiAgZnVuY3Rpb24gdHJhbnNmZXJUb2tlbnMoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBmcmVlemVUaW1lLCB1aW50MjU2IF90eXBlKTsKICBmdW5jdGlvbiB3aXRoZHJvd1Rva2VucyhhZGRyZXNzIF9hZGRyZXNzLCB1aW50MjU2IF90b2tlbnMpOwogIGZ1bmN0aW9uIHNldFRvdGFsU3VwcGx5KGFkZHJlc3MgX2FkZHIpOwogIGZ1bmN0aW9uIHRva2VuVHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfYWRkcmVzcyk7CiAgZnVuY3Rpb24gZ2V0T3duZXJUb2tlbigpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcyk7Cn0KCmNvbnRyYWN0IFdyYXBwZXJPcmFjbGl6ZSB7CiAgZnVuY3Rpb24gdXBkYXRlKHN0cmluZyBkYXRhc291cmNlLCBzdHJpbmcgYXJnKSBwYXlhYmxlOwogIGZ1bmN0aW9uIGdldFdyYXBwZXJEYXRhKCkgY29uc3RhbnQgcmV0dXJucyhieXRlczMyKTsKICBmdW5jdGlvbigpIGV4dGVybmFsIHBheWFibGU7Cn0KCmNvbnRyYWN0IENyb3dkc2FsZSBpcyBPd25hYmxlIHsKCiAgLy9zdHJpbmcgcHVibGljIEVUSFVTRDsKCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIC8vU2luZ2xlVG9rZW5Db2luIHB1YmxpYyB0b2tlbiA9IFNpbmdsZVRva2VuQ29pbigweGY1NzlGMzdGRTMxMjljNEM4OTdkMmE5NTYxZjlEOERiRWEzQTA5NDMpOwogICAgU2luZ2xlVG9rZW5Db2luIHB1YmxpYyB0b2tlbjsKCiAgLy9BZGRyZXNzIGZyb20gdGVzdG5ldAogIC8vV3JhcHBlck9yYWNsaXplIHByaXZhdGUgd3JhcHBlciA9IFdyYXBwZXJPcmFjbGl6ZSgweDY3NmIzM2NkY2MzZmE3Yjk5NGNhNmQxNmNkM2M5ZGZlM2M2NGVjNTIpOwoKICAvL0FkZHJlc3MgZnJvbSBtYWlubmV0CiAgV3JhcHBlck9yYWNsaXplIHByaXZhdGUgd3JhcHBlciA9IFdyYXBwZXJPcmFjbGl6ZSgweGZDNDg0YzY2ZGFFNDY0Q0M2MDU1ZDdhNDc4MkVjODc2MWRjOTg0MkYpOwoKICB1aW50MjU2IHByaXZhdGUgYW5nZWxfc2FsZV9zdGFydDsKICB1aW50MjU2IHByaXZhdGUgYW5nZWxfc2FsZV9maW5pc2g7CgogIHVpbnQyNTYgcHJpdmF0ZSBwcmVfc2FsZV9zdGFydDsKICB1aW50MjU2IHByaXZhdGUgcHJlX3NhbGVfZmluaXNoOwoKICB1aW50MjU2IHByaXZhdGUgcHVibGljX3NhbGVfc3RhcnQ7CiAgdWludDI1NiBwcml2YXRlIHB1YmxpY19zYWxlX2ZpbmlzaDsKCiAgYm9vbCBwcml2YXRlIGlzQW5nZWw7CiAgYm9vbCBwcml2YXRlIGlzUHJlU2FsZTsKICBib29sIHByaXZhdGUgaXNQdWJsaWM7CgogIHVpbnQyNTYgcHJpdmF0ZSBhbmdlbF9yYXRlOwogIHVpbnQyNTYgcHJpdmF0ZSBwdWJsaWNfcmF0ZTsKCiAgdWludDI1NiBwcml2YXRlIGRlY2ltYWxzOwoKICB1aW50MjU2IHByaXZhdGUgdG90YWxFVEg7CgogIGFkZHJlc3MgcHVibGljIGNvcmVUZWFtQWRkcjsKICBhZGRyZXNzIHB1YmxpYyBpdERldkFkZHI7CiAgYWRkcmVzcyBwdWJsaWMgZnV0RGV2QWRkcjsKICBhZGRyZXNzIHB1YmxpYyBjb21tRm91bmRBZGRyOwogIGFkZHJlc3MgcHVibGljIHNvY1dhcmVmYXJlQWRkcjsKICBhZGRyZXNzIHB1YmxpYyBtYXJrZXRpbmdBZGRyOwoKICBhZGRyZXNzIHB1YmxpYyB1bnNvbGRBZGRyOwogIGFkZHJlc3MgcHVibGljIGNvbGxlY3RBZGRyOyAgCiAgCiAgYm9vbCBwdWJsaWMgbWludGluZ0ZpbmlzaGVkID0gZmFsc2U7CgogIC8vU3RvcmFnZSBmb3IgRm91bmRpbmcgQnV5ZXJzIFRva2VuCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgZm91bmRpbmdfYnV5ZXJzX3Rva2VuOyAgLy8gMAoKICAvL1N0b3JhZ2UgZm9yIEFuZ2VsIEJ1eWVycyBFVEgKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBhbmdlbF9idXllcnNfZXRoOyAgICAgICAvLyAyCgogIC8vU3RvcmFnZSBmb3IgQW5nZWwgQnV5ZXJzIFRva2VuCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgYW5nZWxfYnV5ZXJzX3Rva2VuOyAgICAgLy8gMgoKICAvL1N0b3JhZ2UgZm9yIEFuZ2VsIEJ1eWVycyBFVEgKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBwcmVfc2FsZV9idXllcnNfZXRoOyAgICAvLyAxCgogIC8vU3RvcmFnZSBmb3IgQW5nZWwgQnV5ZXJzIFRva2VuCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgcHJlX3NhbGVfYnV5ZXJzX3Rva2VuOyAgLy8gMQoKICAvL1N0b3JhZ2UgZm9yIEFuZ2VsIEJ1eWVycyBUb2tlbgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIHBlX2J1eWVyc190b2tlbjsgICAgICAgIC8vIDMKCiAgLy9TdG9yYWdlIGZvciBBbmdlbCBCdXllcnMgRVRICiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgcHVibGljX2J1eWVyc19ldGg7ICAgICAgLy8gNAoKICAvL1N0b3JhZ2UgZm9yIEFuZ2VsIEJ1eWVycyBUb2tlbgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIHB1YmxpY19idXllcnNfdG9rZW47ICAgIC8vIDQKCiAgYWRkcmVzc1tdIHByaXZhdGUgZm91bmRpbmdfaW52ZXN0b3JzOyAvLyAwCiAgYWRkcmVzc1tdIHByaXZhdGUgcHJlX3NhbGVfaW52ZXN0b3JzOyAvLyAxCiAgYWRkcmVzc1tdIHByaXZhdGUgYW5nZWxfaW52ZXN0b3JzOyAgICAvLyAyCiAgYWRkcmVzc1tdIHByaXZhdGUgcGVfaW52ZXN0b3JzOyAgICAgICAvLyAzCiAgYWRkcmVzc1tdIHByaXZhdGUgcHVibGljX2ludmVzdG9yczsgICAvLyA0CgogIHVpbnQyNTYgcHJpdmF0ZSBzb2xkVG9rZW5zOwogIAogIHVpbnQyNTYgcHJpdmF0ZSBtYXhjdXA7CgogIHVpbnQyNTYgcHJpdmF0ZSB0b3RhbEFtb3VudDsgCiAgdWludDI1NiBwcml2YXRlIGZvdW5kaW5nQW1vdW50OyAKICB1aW50MjU2IHByaXZhdGUgYW5nZWxBbW91bnQ7ICAKICB1aW50MjU2IHByaXZhdGUgcHJlU2FsZUFtb3VudDsKICB1aW50MjU2IHByaXZhdGUgUEVJbnZlc3RvckFtb3VudDsKICB1aW50MjU2IHByaXZhdGUgcHVibGljU2FsZUFtb3VudDsKCiAgdWludDI1NiBwcml2YXRlIGNvcmVUZWFtQW1vdW50OwogIHVpbnQyNTYgcHJpdmF0ZSBjb3JlVGVhbUF1dG87CiAgdWludDI1NiBwcml2YXRlIGNvcmVUZWFtTWFudWFsOwogIHVpbnQyNTYgcHJpdmF0ZSBpdERldkFtb3VudDsgIAogIHVpbnQyNTYgcHJpdmF0ZSBmdXREZXZBbW91bnQ7IAogIHVpbnQyNTYgcHJpdmF0ZSBjb21tRm91bmRBbW91bnQ7CiAgdWludDI1NiBwcml2YXRlIHNvY1dhcmVmYXJlQW1vdW50OwogIHVpbnQyNTYgcHJpdmF0ZSBtYXJrZXRpbmdBbW91bnQ7CgogIHVpbnQyNTYgcHJpdmF0ZSBhbmdlbF9zYWxlX3NvbGQ7CiAgdWludDI1NiBwcml2YXRlIHByZV9zYWxlX3NvbGQ7CiAgdWludDI1NiBwcml2YXRlIHB1YmxpY19zYWxlX3NvbGQ7CiAgdWludDI1NiBwcml2YXRlIGZvdW5kaW5nX3NvbGQ7CiAgdWludDI1NiBwcml2YXRlIHBlSW52ZXN0b3JzX3NvbGQ7CgogIHVpbnQyNTYgcHJpdmF0ZSBhbmdlbF9zYWxlX3RvdGFsRVRIOwogIHVpbnQyNTYgcHJpdmF0ZSBwcmVfc2FsZV90b3RhbEVUSDsKICB1aW50MjU2IHByaXZhdGUgcHVibGljX3NhbGVfdG90YWxFVEg7CgogIHVpbnQyNTYgcHJpdmF0ZSBmaXJzdFBoYXNlQW1vdW50OwogIHVpbnQyNTYgcHJpdmF0ZSBzZWNvbmRQaGFzZUFtb3VudDsgCiAgdWludDI1NiBwcml2YXRlIHRoaXJkUGhhc2VBbW91bnQ7ICAKICB1aW50MjU2IHByaXZhdGUgZm91clBoYXNlQW1vdW50OwoKICB1aW50MjU2IHByaXZhdGUgZmlyc3RQaGFzZURpc2NvdW50OwogIHVpbnQyNTYgcHJpdmF0ZSBzZWNvbmRQaGFzZURpc2NvdW50OwogIHVpbnQyNTYgcHJpdmF0ZSB0aGlyZFBoYXNlRGlzY291bnQ7CiAgdWludDI1NiBwcml2YXRlIGZvdXJQaGFzZURpc2NvdW50OwoKICB1aW50MjU2IHByaXZhdGUgY3VycmVudFBoYXNlOwoKICBib29sIHByaXZhdGUgbW92ZVRva2VuczsKCiAgYm9vbCB3aXRoZHJvd1Rva2Vuc0NvbXBsZXRlID0gZmFsc2U7ICAKCiAgZnVuY3Rpb24gQ3Jvd2RzYWxlKGFkZHJlc3MgdG9rZW5fYWRkcikgewoKICAgIHRva2VuID0gU2luZ2xlVG9rZW5Db2luKHRva2VuX2FkZHIpOwoKICAgIC8vc2V0IGNhbGN1bGF0ZSByYXRlIGZyb20gVVNECiAgICBwdWJsaWNfcmF0ZSA9IDM1NDYwOTkyOTA3ODAxNDE7IC8vIH4gMSBVU0QKCiAgICBhbmdlbF9yYXRlID0gMjA7CgogICAgZGVjaW1hbHMgPSAzNTQ2MDk5MjkwNzgwMTsgLy8gMTggZGVjaW1hbHMKCiAgICAvL25vdwogICAgYW5nZWxfc2FsZV9zdGFydCA9IG5vdyAtIDMgZGF5czsKICAgIC8vMDYuMTIuMjAxNyAwODozMCBBTQogICAgYW5nZWxfc2FsZV9maW5pc2ggPSAxNTEwNDg4MDAwOwoKICAgIC8vMDcuMTIuMjAxNyAwODozMCBBTQogICAgcHJlX3NhbGVfc3RhcnQgPSAxNTEwNDkxNjAwOwogICAgLy8wNiAuMDEuMjAxOCAwODozMCBBTQogICAgcHJlX3NhbGVfZmluaXNoID0gMTUxMjU2MTYwMDsKCiAgICAvLzA3LjAxLjIwMTggMDg6MzAgQU0KICAgIC8vcHVibGljX3NhbGVfc3RhcnQgPSAxNTEyNTY1MjAwOwogICAgcHVibGljX3NhbGVfc3RhcnQgPSAxNTEyNTY1MjAwOwogICAgLy8xMC4wMS4yMDE4IDA4OjMwIEFNCiAgICBwdWJsaWNfc2FsZV9maW5pc2ggPSBwdWJsaWNfc2FsZV9zdGFydCArIDE0IGRheXM7CgogICAgbW92ZVRva2VucyA9IGZhbHNlOwogICAgCiAgICBpc0FuZ2VsID0gdHJ1ZTsKICAgIGlzUHJlU2FsZSA9IGZhbHNlOwogICAgaXNQdWJsaWMgPSBmYWxzZTsKCiAgICBjdXJyZW50UGhhc2UgPSAxOwoKICAgIGZvdW5kaW5nX3NvbGQgPSAwOwogICAgcGVJbnZlc3RvcnNfc29sZCA9IDA7CiAgICBhbmdlbF9zYWxlX3NvbGQgPSAwOwogICAgcHJlX3NhbGVfc29sZCA9IDA7CiAgICBwdWJsaWNfc2FsZV9zb2xkID0gMDsKCiAgICBhbmdlbF9zYWxlX3RvdGFsRVRIID0gMDsKICAgIHByZV9zYWxlX3RvdGFsRVRIID0gMDsKICAgIHB1YmxpY19zYWxlX3RvdGFsRVRIID0gMDsKCiAgICBmaXJzdFBoYXNlQW1vdW50ID0gMTg3NTAwMDBFMTg7ICAgICAvLyAxOCA3NTAgMDAwOyAgLy8gd2l0aCAxOCBkZWNpbWFscwogICAgc2Vjb25kUGhhc2VBbW91bnQgPSAzNzUwMDAwMEUxODsgICAgLy8gMzcgNTAwIDAwMDsgIC8vIHdpdGggMTggZGVjaW1hbHMKICAgIHRoaXJkUGhhc2VBbW91bnQgPSA1NjI1MDAwMEUxODsgICAgIC8vIDU2IDI1MCAwMDA7ICAvLyB3aXRoIDE4IGRlY2ltYWxzLQogICAgZm91clBoYXNlQW1vdW50ID0gNzUwMDAwMDBFMTg7ICAgICAgLy8gNzUgMDAwIDAwMDsgIC8vIHdpdGggMTggZGVjaW1hbHMKCiAgICBmaXJzdFBoYXNlRGlzY291bnQgPSAzMDsKICAgIHNlY29uZFBoYXNlRGlzY291bnQgPSA0MDsKICAgIHRoaXJkUGhhc2VEaXNjb3VudCA9IDUwOwogICAgZm91clBoYXNlRGlzY291bnQgPSA2MDsKCiAgICB0b3RhbEFtb3VudCA9IDUwMDAwMDAwMEUxODsgICAgICAgICAvLyA1MDAgMDAwIDAwMDsgIC8vIHdpdGggMTggZGVjaW1hbHMKICAgIGZvdW5kaW5nQW1vdW50ID0gMTAwMDAwMDBFMTg7ICAgICAgIC8vICAxMCAwMDAgMDAwOyAgLy8gd2l0aCAxOCBkZWNpbWFscwogICAgYW5nZWxBbW91bnQgPSAyNTAwMDAwMEUxODsgICAgICAgICAgLy8gIDI1IDAwMCAwMDA7ICAvLyB3aXRoIDE4IGRlY2ltYWxzCiAgICBwcmVTYWxlQW1vdW50ID0gNzUwMDAwMDBFMTg7ICAgICAgICAvLyAgNzUgMDAwIDAwMDsgIC8vIHdpdGggMTggZGVjaW1hbHMKICAgIFBFSW52ZXN0b3JBbW91bnQgPSA1MDAwMDAwMEUxODsgICAgIC8vICA1MCAwMDAgMDAwOyAgLy8gd2l0aCAxOCBkZWNpbWFscwogICAgcHVibGljU2FsZUFtb3VudCA9IDEwMDAwMDAwMEUxODsgICAgLy8gMTAwIDAwMCAwMDA7ICAvLyB3aXRoIDE4IGRlY2ltYWxzCgogICAgY29yZVRlYW1BbW91bnQgPSAxMDAwMDAwMDBFMTg7ICAgICAgLy8gMTAwIDAwMCAwMDA7ICAvLyB3aXRoIDE4IGRlY2ltYWxzCiAgICBjb3JlVGVhbUF1dG8gPSA2MDAwMDAwMEUxODsgICAgICAgICAvLyAgNjAgMDAwIDAwMDsgIC8vIHdpdGggMTggZGVjaW1hbHMKICAgIGNvcmVUZWFtTWFudWFsID0gNDAwMDAwMDBFMTg7ICAgICAgIC8vICA0MCAwMDAgMDAwOyAgLy8gd2l0aCAxOCBkZWNpbWFscwogICAgaXREZXZBbW91bnQgPSA1MDAwMDAwMEUxODsgICAgICAgICAgLy8gIDUwIDAwMCAwMDA7ICAvLyB3aXRoIDE4IGRlY2ltYWxzCiAgICBmdXREZXZBbW91bnQgPSA1MDAwMDAwMEUxODsgICAgICAgICAvLyAgNTAgMDAwIDAwMDsgIC8vIHdpdGggMTggZGVjaW1hbHMKICAgIGNvbW1Gb3VuZEFtb3VudCA9IDE1MDAwMDAwRTE4OyAgICAgIC8vICAxNSAwMDAgMDAwOyAgLy8gd2l0aCAxOCBkZWNpbWFscwogICAgc29jV2FyZWZhcmVBbW91bnQgPSAxMDAwMDAwMEUxODsgICAgLy8gIDEwIDAwMCAwMDA7ICAvLyB3aXRoIDE4IGRlY2ltYWxzCiAgICBtYXJrZXRpbmdBbW91bnQgPSAxNTAwMDAwMEUxODsgICAgICAvLyAgMTUgMDAwIDAwMDsgIC8vIHdpdGggMTggZGVjaW1hbHMKCiAgICBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCiAgICBjb3JlVGVhbUFkZHIgPSAweEIwQTNBODQ1Y2ZBNWUyYmFDRDM5MjVBZjg1YzU5ZEU0RDMyRDg3NGY7CiAgICBpdERldkFkZHIgPSAweDYxNTI4ZmZkQ2Q0QkMyNmM4MWM4ODQyMzAxODc4MGIzOTlGYmI4ZTc7CiAgICBmdXREZXZBZGRyID0gMHhBMWY5QzNGMTM3NDk2ZTZiOGJBNDQ0NWQxNWIwOTg2Q2FBMjJGRGUzOwogICAgY29tbUZvdW5kQWRkciA9IDB4QzMwYTBFN0ZGYWQ3NTRBOUFEMkExQzFjRmVCMTBlMDVmN0M3YUI2QTsKICAgIHNvY1dhcmVmYXJlQWRkciA9IDB4ZDVkNjkyQzg5QzgzMzEzNTc5ZDAyQzk0RjRmYUU2MDBmZTMwRDFkOTsKICAgIG1hcmtldGluZ0FkZHIgPSAweDU0OTA1MTAwNzJiOTI5MjczRjY1ZGJhNEI3MmM5NmNkNDVBOTliNUE7CgogICAgdW5zb2xkQWRkciA9IDB4MTgwNTFiNWIwRjFGRGI0RDQ0ZUFDRjJGQTQ5ZjE5YkI4MDEwNUZjMTsKICAgIGNvbGxlY3RBZGRyID0gMHhCMzM4MTIxQjhlNWRBMDkwMGE2RTg1ODAzMjEyOTNmM0NGNTJFNThEOwoKICB9CgogIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIHNldEZyZWV6ZShhZGRyZXNzIF9hZGRyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHRva2VuLnNldEZyZWV6ZShfYWRkcik7CiAgfQoKICBmdW5jdGlvbiByZW1vdmVGcmVlemUoYWRkcmVzcyBfYWRkcikgcHVibGljIG9ubHlPd25lciB7CiAgICB0b2tlbi5yZW1vdmVGcmVlemUoX2FkZHIpOwogIH0KCiAgZnVuY3Rpb24gbW92ZVVuc29sZCgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgYW5nZWxBbW91bnQgPSAwOwogICAgcHJlU2FsZUFtb3VudCA9IDA7CiAgICBwdWJsaWNTYWxlQW1vdW50ID0gMDsKCiAgICBhbmdlbF9zYWxlX3NvbGQgPSAwOwogICAgcHJlX3NhbGVfc29sZCA9IDA7CiAgICBwdWJsaWNfc2FsZV9zb2xkID0gMDsKICAgIHRva2VuLm1vdmVVbnNvbGQodW5zb2xkQWRkcik7CiAgfQoKICBmdW5jdGlvbiBuZXdUcmFuc2Zlck1hbnVhbFRva2Vuc25ld1RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB0b2tlbi5uZXdUcmFuc2Zlck1hbnVhbFRva2Vuc25ld1RyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbigpIGV4dGVybmFsIHBheWFibGUgewogICAgbWludCgpOyAgICAKICB9CgogIGZ1bmN0aW9uIGJ5dGVzVG9VSW50KGJ5dGVzMzIgdikgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zICh1aW50IHJldCkgewogICAgaWYgKHYgPT0gMHgwKSB7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgdWludCBkaWdpdDsKCiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCAzMjsgaSsrKSB7CiAgICAgIGRpZ2l0ID0gdWludCgodWludCh2KSAvICgyICoqICg4ICogKDMxIC0gaSkpKSkgJiAweGZmKTsKICAgICAgaWYgKGRpZ2l0ID09IDAgfHwgZGlnaXQgPT0gNDYpIHsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGVsc2UgaWYgKGRpZ2l0IDwgNDggfHwgZGlnaXQgPiA1NykgewogICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgIH0KICAgICAgcmV0ICo9IDEwOwogICAgICByZXQgKz0gKGRpZ2l0IC0gNDgpOwogICAgfQogICAgcmV0dXJuIHJldDsKICB9CgogIGZ1bmN0aW9uIGNhbGN1bGF0ZVJhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICBieXRlczMyIHJlc3VsdCA9IGdldFdyYXBwZXJEYXRhKCk7CiAgICB1aW50MjU2IHVzZCA9IGJ5dGVzVG9VSW50KHJlc3VsdCk7CgogICAgdWludDI1NiBwcmljZSA9IDEgZXRoZXIgLyB1c2Q7IC8vcHJpY2UgZm9yIDEgQk1DIC8vNDU0NTQ1NDU0NTQ1NDU0NjsKCiAgICByZXR1cm4gcHJpY2U7CiAgfQoKICBmdW5jdGlvbiBjYWxjdWxhdGVQcmljZSh1aW50MjU2IF91c2QsIHVpbnQyNTYgX3ByZV9zYWxlX3NvbGQpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAKICAgIGlmIChjdXJyZW50UGhhc2UgPT0gMSAmJiBwcmVfc2FsZV9zb2xkICsgX3ByZV9zYWxlX3NvbGQgPD0gZmlyc3RQaGFzZUFtb3VudCkgewogICAgICByZXR1cm4gX3VzZC5tdWwoZmlyc3RQaGFzZURpc2NvdW50KS5kaXYoMTAwKTsKICAgIH0KCiAgICBpZiAoY3VycmVudFBoYXNlID09IDIgJiYgcHJlX3NhbGVfc29sZCArIF9wcmVfc2FsZV9zb2xkID4gZmlyc3RQaGFzZUFtb3VudCAmJiBwcmVfc2FsZV9zb2xkICsgX3ByZV9zYWxlX3NvbGQgPD0gc2Vjb25kUGhhc2VBbW91bnQpIHsKICAgICAgcmV0dXJuIF91c2QubXVsKHNlY29uZFBoYXNlRGlzY291bnQpLmRpdigxMDApOwogICAgfQoKICAgIGlmIChjdXJyZW50UGhhc2UgPT0gMyAmJiBwcmVfc2FsZV9zb2xkICsgX3ByZV9zYWxlX3NvbGQgPiBzZWNvbmRQaGFzZUFtb3VudCAmJiBwcmVfc2FsZV9zb2xkICsgX3ByZV9zYWxlX3NvbGQgPD0gdGhpcmRQaGFzZUFtb3VudCkgewogICAgICByZXR1cm4gX3VzZC5tdWwodGhpcmRQaGFzZURpc2NvdW50KS5kaXYoMTAwKTsKICAgIH0KCiAgICBpZiAoY3VycmVudFBoYXNlID09IDQgJiYgcHJlX3NhbGVfc29sZCArIF9wcmVfc2FsZV9zb2xkID4gdGhpcmRQaGFzZUFtb3VudCAmJiBwcmVfc2FsZV9zb2xkICsgX3ByZV9zYWxlX3NvbGQgPD0gZm91clBoYXNlQW1vdW50KSB7CiAgICAgIHJldHVybiBfdXNkLm11bChmb3VyUGhhc2VEaXNjb3VudCkuZGl2KDEwMCk7CiAgICB9CgogICAgcmV0dXJuIF91c2Q7CiAgfQoKICBmdW5jdGlvbiBzZW5kVG9BZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgX3Rva2VucywgdWludDI1NiBfdHlwZSkgY2FuTWludCBvbmx5T3duZXIgcHVibGljIHsKCiAgIGlmIChfdHlwZSAhPSAxICYmIF90eXBlICE9IDIgJiYgX3R5cGUgIT0gMykgewogICAgIHJldmVydCgpOwogICB9CgogICAgLy9Gb3VuZGluZwogICAgaWYgKF90eXBlID09IDEpIHsKICAgICAgaWYgKGZvdW5kaW5nX3NvbGQgKyBfdG9rZW5zID4gZm91bmRpbmdBbW91bnQpIHsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQoKICAgICAgaWYgKGZvdW5kaW5nX2J1eWVyc190b2tlbltfYWRkcmVzc10gPT0gMCkgewogICAgICAgIGZvdW5kaW5nX2ludmVzdG9ycy5wdXNoKF9hZGRyZXNzKTsKICAgICAgfQoKICAgICAgcmVxdWlyZShmb3VuZGluZ0Ftb3VudCA+PSBfdG9rZW5zKTsKCiAgICAgIGZvdW5kaW5nX2J1eWVyc190b2tlbltfYWRkcmVzc10gPSBmb3VuZGluZ19idXllcnNfdG9rZW5bX2FkZHJlc3NdLmFkZChfdG9rZW5zKTsKICAgIAogICAgICBmb3VuZGluZ19zb2xkID0gZm91bmRpbmdfc29sZCArIF90b2tlbnM7CgogICAgICB0b2tlbi50cmFuc2ZlclRva2VucyhfYWRkcmVzcywgX3Rva2VucywgcHVibGljX3NhbGVfc3RhcnQsIDEpOwoKICAgICAgZm91bmRpbmdBbW91bnQgPSBmb3VuZGluZ0Ftb3VudCAtIF90b2tlbnM7CiAgICB9CiAgICAvLyBQRSBJbnZlc3RvcnMKICAgIGlmIChfdHlwZSA9PSAyKSB7CiAgICAgIGlmIChwZUludmVzdG9yc19zb2xkICsgX3Rva2VucyA+IFBFSW52ZXN0b3JBbW91bnQpIHsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQoKICAgICAgaWYgKHBlX2J1eWVyc190b2tlbltfYWRkcmVzc10gPT0gMCkgewogICAgICAgIHBlX2ludmVzdG9ycy5wdXNoKF9hZGRyZXNzKTsKICAgICAgfQoKICAgICAgcmVxdWlyZShQRUludmVzdG9yQW1vdW50ID49IF90b2tlbnMpOwoKICAgICAgcGVfYnV5ZXJzX3Rva2VuW19hZGRyZXNzXSA9IHBlX2J1eWVyc190b2tlbltfYWRkcmVzc10uYWRkKF90b2tlbnMpOwogICAgCiAgICAgIHBlSW52ZXN0b3JzX3NvbGQgPSBwZUludmVzdG9yc19zb2xkICsgX3Rva2VuczsKICAgICAgCiAgICAgIHRva2VuLnRyYW5zZmVyVG9rZW5zKF9hZGRyZXNzLCBfdG9rZW5zLCBwdWJsaWNfc2FsZV9zdGFydCwgMik7CgogICAgICBQRUludmVzdG9yQW1vdW50ID0gUEVJbnZlc3RvckFtb3VudCAtIF90b2tlbnM7CiAgICB9CiAgICAvL0NvcmUgVGVhbQogICAgaWYgKF90eXBlID09IDMpIHsKICAgICAgcmVxdWlyZShjb3JlVGVhbUFtb3VudCA+PSBfdG9rZW5zKTsKICAgICAgdG9rZW4udHJhbnNmZXJUb2tlbnMoY29yZVRlYW1BZGRyLCBfYWRkcmVzcywgX3Rva2VucywgcHVibGljX3NhbGVfc3RhcnQsIDMpOwogICAgICBjb3JlVGVhbUFtb3VudCA9IGNvcmVUZWFtQW1vdW50IC0gX3Rva2VuczsKICAgIH0gZWxzZSB7CiAgICAgIHNvbGRUb2tlbnMgPSBzb2xkVG9rZW5zICsgX3Rva2VuczsKICAgIH0KICB9CgogIG1vZGlmaWVyIGlzSUNPRmluaXNoZWQoKSB7CiAgICBpZiAobm93ID4gcHVibGljX3NhbGVfZmluaXNoKSB7CiAgICAgIGZpbmlzaE1pbnRpbmcoKTsKICAgIH0KICAgIF87CiAgfQoKICBtb2RpZmllciBpc0FueVN0YWdlKCkgewogICAgaWYgKG5vdyA+IGFuZ2VsX3NhbGVfZmluaXNoICYmIG5vdyA+IHByZV9zYWxlX2ZpbmlzaCAmJiBub3cgPiBwdWJsaWNfc2FsZV9maW5pc2gpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgaWYgKG5vdyA8IGFuZ2VsX3NhbGVfc3RhcnQgJiYgbm93IDwgcHJlX3NhbGVfc3RhcnQgJiYgbm93IDwgcHVibGljX3NhbGVfc3RhcnQpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgXzsKICB9CgogIGZ1bmN0aW9uIHNldFRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBvbmx5T3duZXIgewoKICAgIHRyYW5zZmVyT3duZXJzaGlwKF9hZGRyZXNzKTsKICB9CgogIC8vb25seSBmb3IgZGVtb25zdHJhdGUgVGVzdCBWZXJzaW9uCiAgZnVuY3Rpb24gc2V0QW5nZWxEYXRlKHVpbnQyNTYgX3RpbWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgYW5nZWxfc2FsZV9zdGFydCA9IF90aW1lOwogIH0KCiAgLy9vbmx5IGZvciBkZW1vbnN0cmF0ZSBUZXN0IFZlcnNpb24KICBmdW5jdGlvbiBzZXRQcmVTYWxlRGF0ZSh1aW50MjU2IF90aW1lKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHByZV9zYWxlX3N0YXJ0ID0gX3RpbWU7CiAgfQoKICAvL29ubHkgZm9yIGRlbW9uc3RyYXRlIFRlc3QgVmVyc2lvbgogIGZ1bmN0aW9uIHNldFB1YmxpY1NhbGVEYXRlKHVpbnQyNTYgX3RpbWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcHVibGljX3NhbGVfc3RhcnQgPSBfdGltZTsKICB9CgogIGZ1bmN0aW9uIGdldFN0YXJ0RGF0ZXMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2IF9hbmdlbF9zYWxlX3N0YXJ0LCB1aW50MjU2IF9wcmVfc2FsZV9zdGFydCwgdWludDI1NiBfcHVibGljX3NhbGVfc3RhcnQpIHsKICAgIHJldHVybiAoYW5nZWxfc2FsZV9zdGFydCwgcHJlX3NhbGVfc3RhcnQsIHB1YmxpY19zYWxlX3N0YXJ0KTsKICB9CgogIC8vb25seSBmb3IgZGVtb25zdHJhdGUgVGVzdCBWZXJzaW9uCiAgZnVuY3Rpb24gc2V0QW5nZWxGaW5pc2hEYXRlKHVpbnQyNTYgX3RpbWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgYW5nZWxfc2FsZV9maW5pc2ggPSBfdGltZTsKICB9CgogIC8vb25seSBmb3IgZGVtb25zdHJhdGUgVGVzdCBWZXJzaW9uCiAgZnVuY3Rpb24gc2V0UHJlU2FsZUZpbmlzaERhdGUodWludDI1NiBfdGltZSkgcHVibGljIG9ubHlPd25lciB7CiAgICBwcmVfc2FsZV9maW5pc2ggPSBfdGltZTsKICB9CgogIC8vb25seSBmb3IgZGVtb25zdHJhdGUgVGVzdCBWZXJzaW9uCiAgZnVuY3Rpb24gc2V0UHVibGljU2FsZUZpbmlzaERhdGUodWludDI1NiBfdGltZSkgcHVibGljIG9ubHlPd25lciB7CiAgICBwdWJsaWNfc2FsZV9maW5pc2ggPSBfdGltZTsKICB9CgogIGZ1bmN0aW9uIGdldEZpbmlzaERhdGVzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NiBfYW5nZWxfc2FsZV9maW5pc2gsIHVpbnQyNTYgX3ByZV9zYWxlX2ZpbmlzaCwgdWludDI1NiBfcHVibGljX3NhbGVfZmluaXNoKSB7CiAgICByZXR1cm4gKGFuZ2VsX3NhbGVfZmluaXNoLCBwcmVfc2FsZV9maW5pc2gsIHB1YmxpY19zYWxlX2ZpbmlzaCk7CiAgfQoKICBmdW5jdGlvbiBtaW50KCkgcHVibGljIGNhbk1pbnQgaXNJQ09GaW5pc2hlZCBpc0FueVN0YWdlIHBheWFibGUgewoKICAgIGlmIChub3cgPiBhbmdlbF9zYWxlX2ZpbmlzaCAmJiBub3cgPCBwcmVfc2FsZV9maW5pc2gpIHsKICAgICAgaXNQcmVTYWxlID0gdHJ1ZTsKICAgICAgaXNBbmdlbCA9IGZhbHNlOwogICAgfQoKICAgIGlmIChub3cgPiBwcmVfc2FsZV9maW5pc2ggJiYgbm93IDwgcHVibGljX3NhbGVfZmluaXNoKSB7CiAgICAgIGlzUHJlU2FsZSA9IGZhbHNlOwogICAgICBpc0FuZ2VsID0gZmFsc2U7CiAgICAgIGlzUHVibGljID0gdHJ1ZTsKICAgIH0KCiAgICBpZiAobm93ID4gYW5nZWxfc2FsZV9maW5pc2ggJiYgbm93IDwgcHJlX3NhbGVfc3RhcnQpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgaWYgKG5vdyA+IHByZV9zYWxlX2ZpbmlzaCAmJiBub3cgPCBwdWJsaWNfc2FsZV9zdGFydCkgewogICAgICByZXZlcnQoKTsKICAgIH0KCiAgICBpZiAoaXNBbmdlbCAmJiBhbmdlbEFtb3VudCA9PSBhbmdlbF9zYWxlX3NvbGQpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgaWYgKGlzUHJlU2FsZSAmJiBwcmVTYWxlQW1vdW50ID09IHByZV9zYWxlX3NvbGQpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgaWYgKGlzUHVibGljICYmIHB1YmxpY1NhbGVBbW91bnQgPT0gcHVibGljX3NhbGVfc29sZCkgewogICAgICByZXZlcnQoKTsKICAgIH0KCiAgICBwdWJsaWNfcmF0ZSA9IGNhbGN1bGF0ZVJhdGUoKTsKCiAgICB1aW50MjU2IGV0aCA9IG1zZy52YWx1ZSAqIDFFMTg7CgogICAgdWludDI1NiBkaXNjb3VudFByaWNlID0gMDsKCiAgICBpZiAoaXNQcmVTYWxlKSB7CiAgICAgIGRpc2NvdW50UHJpY2UgPSBjYWxjdWxhdGVQcmljZShwdWJsaWNfcmF0ZSwgMCk7CiAgICAgIHByZV9zYWxlX3RvdGFsRVRIID0gcHJlX3NhbGVfdG90YWxFVEggKyBldGg7CiAgICB9CgogICAgaWYgKGlzQW5nZWwpIHsKICAgICAgZGlzY291bnRQcmljZSA9IHB1YmxpY19yYXRlLm11bChhbmdlbF9yYXRlKS5kaXYoMTAwKTsKICAgICAgYW5nZWxfc2FsZV90b3RhbEVUSCA9IGFuZ2VsX3NhbGVfdG90YWxFVEggKyBldGg7CiAgICB9CgogICAgdWludCBjdXJyZW50UmF0ZSA9IDA7CgogICAgaWYgKGlzUHVibGljKSB7CiAgICAgIGN1cnJlbnRSYXRlID0gcHVibGljX3JhdGU7CiAgICAgIHB1YmxpY19zYWxlX3RvdGFsRVRIID0gcHVibGljX3NhbGVfdG90YWxFVEggKyBldGg7CiAgICB9IGVsc2UgewogICAgICBjdXJyZW50UmF0ZSA9IGRpc2NvdW50UHJpY2U7CiAgICB9CgogICAgaWYgKGV0aCA8IGN1cnJlbnRSYXRlKSB7CiAgICAgIHJldmVydCgpOwogICAgfQoKICAgIHVpbnQyNTYgdG9rZW5zID0gZXRoLmRpdihjdXJyZW50UmF0ZSk7CgogICAgaWYgKGlzUHVibGljICYmICFtb3ZlVG9rZW5zKSB7CiAgICAgIGlmIChhbmdlbEFtb3VudCA+IGFuZ2VsX3NhbGVfc29sZCkgewogICAgICAgIHVpbnQyNTYgYW5nZWxSZW1haW5kZXIgPSBhbmdlbEFtb3VudCAtIGFuZ2VsX3NhbGVfc29sZDsKICAgICAgICBwdWJsaWNTYWxlQW1vdW50ID0gcHVibGljU2FsZUFtb3VudCArIGFuZ2VsUmVtYWluZGVyOwogICAgICB9CiAgICAgIGlmIChwcmVTYWxlQW1vdW50ID4gcHJlX3NhbGVfc29sZCkgewogICAgICAgIHVpbnQyNTYgcHJlU2FsZVJlbWFpbmRlciA9IHByZVNhbGVBbW91bnQgLSBwcmVfc2FsZV9zb2xkOwogICAgICAgIHB1YmxpY1NhbGVBbW91bnQgPSBwdWJsaWNTYWxlQW1vdW50ICsgcHJlU2FsZVJlbWFpbmRlcjsKICAgICAgfQogICAgICBtb3ZlVG9rZW5zID0gdHJ1ZTsKICAgIH0KCiAgICBpZiAoaXNQcmVTYWxlKSB7CiAgICAgIHVpbnQyNTYgYXZhaWxhYmxlVG9rZW5zUGhhc2UgPSAwOwogICAgICB1aW50MjU2IGV0aFRvUmVmdW5kUGhhc2UgPSAwOwoKICAgICAgdWludDI1NiByZW1FVEggPSAwOwoKICAgICAgdWludDI1NiB0b3RhbFRva2Vuc1BoYXNlID0gMDsKCiAgICAgIGlmIChjdXJyZW50UGhhc2UgPT0gMSAmJiBwcmVfc2FsZV9zb2xkICsgdG9rZW5zID4gZmlyc3RQaGFzZUFtb3VudCkgewogICAgICAgIChhdmFpbGFibGVUb2tlbnNQaGFzZSwgZXRoVG9SZWZ1bmRQaGFzZSkgPSBjYWxjdWxhdGVNaW5vclJlZnVuZChmaXJzdFBoYXNlQW1vdW50LCBwcmVfc2FsZV9zb2xkLCBjdXJyZW50UmF0ZSwgdG9rZW5zKTsKICAgICAgICB0b3RhbFRva2Vuc1BoYXNlID0gYXZhaWxhYmxlVG9rZW5zUGhhc2U7CgogICAgICAgIHJlbUVUSCA9IGV0aFRvUmVmdW5kUGhhc2U7CgogICAgICAgIGN1cnJlbnRQaGFzZSA9IDI7CgogICAgICAgIGN1cnJlbnRSYXRlID0gY2FsY3VsYXRlUHJpY2UocHJlX3NhbGVfc29sZCwgdG90YWxUb2tlbnNQaGFzZSk7CiAgICAgICAgdG9rZW5zID0gcmVtRVRILmRpdihjdXJyZW50UmF0ZSk7CiAgICAgIH0KCiAgICAgIGlmIChjdXJyZW50UGhhc2UgPT0gMiAmJiBwcmVfc2FsZV9zb2xkICsgdG9rZW5zICsgdG90YWxUb2tlbnNQaGFzZSA+IHNlY29uZFBoYXNlQW1vdW50KSB7CiAgICAgICAgKGF2YWlsYWJsZVRva2Vuc1BoYXNlLCBldGhUb1JlZnVuZFBoYXNlKSA9IGNhbGN1bGF0ZU1pbm9yUmVmdW5kKHNlY29uZFBoYXNlQW1vdW50LCBwcmVfc2FsZV9zb2xkLCBjdXJyZW50UmF0ZSwgdG9rZW5zKTsKICAgICAgICB0b3RhbFRva2Vuc1BoYXNlID0gdG90YWxUb2tlbnNQaGFzZSArIGF2YWlsYWJsZVRva2Vuc1BoYXNlOwogICAgICAgIAogICAgICAgIHJlbUVUSCA9IGV0aFRvUmVmdW5kUGhhc2U7CgogICAgICAgIGN1cnJlbnRQaGFzZSA9IDM7CgogICAgICAgIGN1cnJlbnRSYXRlID0gY2FsY3VsYXRlUHJpY2UocHJlX3NhbGVfc29sZCwgdG90YWxUb2tlbnNQaGFzZSk7CiAgICAgICAgdG9rZW5zID0gcmVtRVRILmRpdihjdXJyZW50UmF0ZSk7CiAgICAgIH0KCiAgICAgIGlmIChjdXJyZW50UGhhc2UgPT0gMyAmJiBwcmVfc2FsZV9zb2xkICsgdG9rZW5zICsgdG90YWxUb2tlbnNQaGFzZSA+IHRoaXJkUGhhc2VBbW91bnQpIHsKICAgICAgICAoYXZhaWxhYmxlVG9rZW5zUGhhc2UsIGV0aFRvUmVmdW5kUGhhc2UpID0gY2FsY3VsYXRlTWlub3JSZWZ1bmQodGhpcmRQaGFzZUFtb3VudCwgcHJlX3NhbGVfc29sZCwgY3VycmVudFJhdGUsIHRva2Vucyk7CiAgICAgICAgdG90YWxUb2tlbnNQaGFzZSA9IHRvdGFsVG9rZW5zUGhhc2UgKyBhdmFpbGFibGVUb2tlbnNQaGFzZTsKICAgICAgICAKICAgICAgICByZW1FVEggPSBldGhUb1JlZnVuZFBoYXNlOwoKICAgICAgICBjdXJyZW50UGhhc2UgPSA0OwoKICAgICAgICBjdXJyZW50UmF0ZSA9IGNhbGN1bGF0ZVByaWNlKHByZV9zYWxlX3NvbGQsIHRvdGFsVG9rZW5zUGhhc2UpOwogICAgICAgIHRva2VucyA9IHJlbUVUSC5kaXYoY3VycmVudFJhdGUpOwogICAgICB9CgogICAgICBpZiAoY3VycmVudFBoYXNlID09IDQgJiYgcHJlX3NhbGVfc29sZCArIHRva2VucyArIHRvdGFsVG9rZW5zUGhhc2UgPiBmb3VyUGhhc2VBbW91bnQpIHsKICAgICAgICAoYXZhaWxhYmxlVG9rZW5zUGhhc2UsIGV0aFRvUmVmdW5kUGhhc2UpID0gY2FsY3VsYXRlTWlub3JSZWZ1bmQoZm91clBoYXNlQW1vdW50LCBwcmVfc2FsZV9zb2xkLCBjdXJyZW50UmF0ZSwgdG9rZW5zKTsKICAgICAgICB0b3RhbFRva2Vuc1BoYXNlID0gdG90YWxUb2tlbnNQaGFzZSArIGF2YWlsYWJsZVRva2Vuc1BoYXNlOwogICAgICAgIAogICAgICAgIHJlbUVUSCA9IGV0aFRvUmVmdW5kUGhhc2U7CgogICAgICAgIGN1cnJlbnRQaGFzZSA9IDA7CgogICAgICAgIGN1cnJlbnRSYXRlID0gY2FsY3VsYXRlUHJpY2UocHJlX3NhbGVfc29sZCwgdG90YWxUb2tlbnNQaGFzZSk7CiAgICAgICAgdG9rZW5zID0gcmVtRVRILmRpdihjdXJyZW50UmF0ZSk7CiAgICAgIH0KCiAgICAgIHRva2VucyA9IHRva2VucyArIHRvdGFsVG9rZW5zUGhhc2U7CiAgICB9CgogICAgaWYgKGlzUHJlU2FsZSkgewogICAgICBpZiAocHJlX3NhbGVfc29sZCArIHRva2VucyA+IHByZVNhbGVBbW91bnQpIHsKICAgICAgICAoYXZhaWxhYmxlVG9rZW5zUGhhc2UsIGV0aFRvUmVmdW5kUGhhc2UpID0gY2FsY3VsYXRlTWlub3JSZWZ1bmQocHJlU2FsZUFtb3VudCwgcHJlX3NhbGVfc29sZCwgY3VycmVudFJhdGUsIHRva2Vucyk7CiAgICAgICAgdG9rZW5zID0gYXZhaWxhYmxlVG9rZW5zUGhhc2U7CiAgICAgICAgZXRoID0gZXRoIC0gZXRoVG9SZWZ1bmRQaGFzZTsKICAgICAgICByZWZ1bmQoZXRoVG9SZWZ1bmRQaGFzZSk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaXNBbmdlbCkgewogICAgICBpZiAoYW5nZWxfc2FsZV9zb2xkICsgdG9rZW5zID4gYW5nZWxBbW91bnQpIHsKICAgICAgICAoYXZhaWxhYmxlVG9rZW5zUGhhc2UsIGV0aFRvUmVmdW5kUGhhc2UpID0gY2FsY3VsYXRlTWlub3JSZWZ1bmQoYW5nZWxBbW91bnQsIGFuZ2VsX3NhbGVfc29sZCwgY3VycmVudFJhdGUsIHRva2Vucyk7CiAgICAgICAgdG9rZW5zID0gYXZhaWxhYmxlVG9rZW5zUGhhc2U7CiAgICAgICAgZXRoID0gZXRoIC0gZXRoVG9SZWZ1bmRQaGFzZTsKICAgICAgICByZWZ1bmQoZXRoVG9SZWZ1bmRQaGFzZSk7CiAgICAgICAgCiAgICAgIH0gICAgCiAgICB9CgogICAgaWYgKGlzUHVibGljKSB7CiAgICAgIGlmIChwdWJsaWNfc2FsZV9zb2xkICsgdG9rZW5zID4gcHVibGljU2FsZUFtb3VudCkgewogICAgICAgIChhdmFpbGFibGVUb2tlbnNQaGFzZSwgZXRoVG9SZWZ1bmRQaGFzZSkgPSBjYWxjdWxhdGVNaW5vclJlZnVuZChwdWJsaWNTYWxlQW1vdW50LCBwdWJsaWNfc2FsZV9zb2xkLCBjdXJyZW50UmF0ZSwgdG9rZW5zKTsKICAgICAgICB0b2tlbnMgPSBhdmFpbGFibGVUb2tlbnNQaGFzZTsKICAgICAgICBldGggPSBldGggLSBldGhUb1JlZnVuZFBoYXNlOwogICAgICAgIHJlZnVuZChldGhUb1JlZnVuZFBoYXNlKTsKICAgICAgICAKICAgICAgfQogICAgfQoKICAgIHNhdmVJbmZvQWJvdXRJbnZlc3RvcnMobXNnLnNlbmRlciwgZXRoLCB0b2tlbnMpOwoKICAgIGlmIChpc0FuZ2VsKSB7CiAgICAgIHRva2VuLnRyYW5zZmVyVG9rZW5zKG1zZy5zZW5kZXIsIHRva2VucywgcHVibGljX3NhbGVfc3RhcnQsIDApOwogICAgfSBlbHNlIHsKICAgICAgLy8gMCAtIG5vdCBmcmVlemUgdGltZTsgNCAtIG5vdCBmcmVlemUgdHlwZSBjdXJyZW50bHk7CiAgICAgIHRva2VuLnRyYW5zZmVyVG9rZW5zKG1zZy5zZW5kZXIsIHRva2VucywgMCwgNCk7CiAgICB9CgogICAgc29sZFRva2VucyA9IHNvbGRUb2tlbnMgKyB0b2tlbnM7CiAgICAKICAgIHRvdGFsRVRIID0gdG90YWxFVEggKyBldGg7CiAgfQoKICBmdW5jdGlvbiBjYWxjdWxhdGVNaW5vclJlZnVuZCh1aW50MjU2IF9tYXhjdXAsIHVpbnQyNTYgX3NvbGQsIHVpbnQyNTYgX3JhdGUsIHVpbnQyNTYgX3Rva2VucykgcHJpdmF0ZSByZXR1cm5zKHVpbnQyNTYgX2F2YWlsYWJsZVRva2VucywgdWludDI1NiBfZXRoVG9SZWZ1bmQpIHsKICAgIHVpbnQyNTYgYXZhaWxhYmxlVG9rZW5zID0gX21heGN1cCAtIF9zb2xkOwogICAgdWludDI1NiB0b2tlbnNGb3JSZWZ1bmQgPSBfdG9rZW5zIC0gYXZhaWxhYmxlVG9rZW5zOwogICAgdWludDI1NiByZWZ1bmRFVEggPSB0b2tlbnNGb3JSZWZ1bmQgKiBfcmF0ZTsKCiAgICByZXR1cm4gKGF2YWlsYWJsZVRva2VucywgcmVmdW5kRVRIKTsKICB9CgogIGZ1bmN0aW9uIHdpdGhkcm93RVRIKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5vdyA+IHB1YmxpY19zYWxlX2ZpbmlzaCk7CgogICAgY29sbGVjdEFkZHIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICB9CgogIGZ1bmN0aW9uIHdpdGhkcm93VG9rZW5zKCkgcHVibGljIG9ubHlPd25lciB7ICAgIAogICAgaWYgKCF3aXRoZHJvd1Rva2Vuc0NvbXBsZXRlKSB7CiAgICAgIAogICAgICB0b2tlbi53aXRoZHJvd1Rva2Vucyhjb3JlVGVhbUFkZHIsIGNvcmVUZWFtQW1vdW50KTsKICAgICAgdG9rZW4ud2l0aGRyb3dUb2tlbnMoaXREZXZBZGRyLCBpdERldkFtb3VudCk7CiAgICAgIHRva2VuLndpdGhkcm93VG9rZW5zKGZ1dERldkFkZHIsIGZ1dERldkFtb3VudCk7CiAgICAgIHRva2VuLndpdGhkcm93VG9rZW5zKGNvbW1Gb3VuZEFkZHIsIGNvbW1Gb3VuZEFtb3VudCk7CiAgICAgIHRva2VuLndpdGhkcm93VG9rZW5zKHNvY1dhcmVmYXJlQWRkciwgc29jV2FyZWZhcmVBbW91bnQpOwogICAgICB0b2tlbi53aXRoZHJvd1Rva2VucyhtYXJrZXRpbmdBZGRyLCBtYXJrZXRpbmdBbW91bnQpOwoKICAgICAgd2l0aGRyb3dUb2tlbnNDb21wbGV0ZSA9IHRydWU7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzYXZlSW5mb0Fib3V0SW52ZXN0b3JzKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBfdG9rZW5zKSBwcml2YXRlIHsKICAgIGlmIChpc0FuZ2VsKSB7CiAgICAgIGlmIChhbmdlbF9idXllcnNfdG9rZW5bX2FkZHJlc3NdID09IDApIHsKICAgICAgICBhbmdlbF9pbnZlc3RvcnMucHVzaChfYWRkcmVzcyk7CiAgICAgIH0KCiAgICAgIGFuZ2VsX2J1eWVyc19ldGhbX2FkZHJlc3NdID0gYW5nZWxfYnV5ZXJzX2V0aFtfYWRkcmVzc10uYWRkKF9hbW91bnQpOwoKICAgICAgYW5nZWxfYnV5ZXJzX3Rva2VuW19hZGRyZXNzXSA9IGFuZ2VsX2J1eWVyc190b2tlbltfYWRkcmVzc10uYWRkKF90b2tlbnMpOwoKICAgICAgYW5nZWxfc2FsZV9zb2xkID0gYW5nZWxfc2FsZV9zb2xkICsgX3Rva2VuczsKICAgIH0KCiAgICBpZiAoaXNQcmVTYWxlKSB7CiAgICAgIGlmIChwcmVfc2FsZV9idXllcnNfdG9rZW5bX2FkZHJlc3NdID09IDApIHsKICAgICAgICBwcmVfc2FsZV9pbnZlc3RvcnMucHVzaChfYWRkcmVzcyk7CiAgICAgIH0KCiAgICAgIHByZV9zYWxlX2J1eWVyc19ldGhbX2FkZHJlc3NdID0gcHJlX3NhbGVfYnV5ZXJzX2V0aFtfYWRkcmVzc10uYWRkKF9hbW91bnQpOwoKICAgICAgcHJlX3NhbGVfYnV5ZXJzX3Rva2VuW19hZGRyZXNzXSA9IHByZV9zYWxlX2J1eWVyc190b2tlbltfYWRkcmVzc10uYWRkKF90b2tlbnMpOwogICAgCiAgICAgIHByZV9zYWxlX3NvbGQgPSBwcmVfc2FsZV9zb2xkICsgX3Rva2VuczsKICAgIH0KCiAgICBpZiAoaXNQdWJsaWMpIHsKICAgICAgaWYgKHB1YmxpY19idXllcnNfdG9rZW5bX2FkZHJlc3NdID09IDApIHsKICAgICAgICBwdWJsaWNfaW52ZXN0b3JzLnB1c2goX2FkZHJlc3MpOwogICAgICB9CgogICAgICBwdWJsaWNfYnV5ZXJzX2V0aFtfYWRkcmVzc10gPSBwdWJsaWNfYnV5ZXJzX2V0aFtfYWRkcmVzc10uYWRkKF9hbW91bnQpOwoKICAgICAgcHVibGljX2J1eWVyc190b2tlbltfYWRkcmVzc10gPSBwdWJsaWNfYnV5ZXJzX3Rva2VuW19hZGRyZXNzXS5hZGQoX3Rva2Vucyk7CiAgICAKICAgICAgcHVibGljX3NhbGVfc29sZCA9IHB1YmxpY19zYWxlX3NvbGQgKyBfdG9rZW5zOwogICAgfQogIH0KCiAgLy8gQ2hhbmdlIGZvciBwcml2YXRlIHdoZW4gZGVwbG95IHRvIG1haW4gbmV0CiAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIHB1YmxpYyBvbmx5T3duZXIgewoKICAgIGlmIChtaW50aW5nRmluaXNoZWQpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgdG9rZW4uZmluaXNoTWludGluZygpOwoKICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiBnZXRGaW5pc2hTdGF0dXMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICByZXR1cm4gbWludGluZ0ZpbmlzaGVkOwogIH0KCiAgZnVuY3Rpb24gcmVmdW5kKHVpbnQyNTYgX2Ftb3VudCkgcHJpdmF0ZSB7CiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKF9hbW91bnQpOwogIH0KCiAgZnVuY3Rpb24gZ2V0QmFsYW5jZUNvbnRyYWN0KCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgcmV0dXJuIHRoaXMuYmFsYW5jZTsKICB9CgogIGZ1bmN0aW9uIGdldFNvbGRUb2tlbigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgX3NvbGRUb2tlbnMsIHVpbnQyNTYgX2FuZ2VsX3NhbGVfc29sZCwgdWludDI1NiBfcHJlX3NhbGVfc29sZCwgdWludDI1NiBfcHVibGljX3NhbGVfc29sZCwgdWludDI1NiBfZm91bmRpbmdfc29sZCwgdWludDI1NiBfcGVJbnZlc3RvcnNfc29sZCkgewogICAgcmV0dXJuIChzb2xkVG9rZW5zLCBhbmdlbF9zYWxlX3NvbGQsIHByZV9zYWxlX3NvbGQsIHB1YmxpY19zYWxlX3NvbGQsIGZvdW5kaW5nX3NvbGQsIHBlSW52ZXN0b3JzX3NvbGQpOwogIH0KCiAgZnVuY3Rpb24gZ2V0SW52ZXN0b3JzVG9rZW5zKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgX3R5cGUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgIGlmIChfdHlwZSA9PSAwKSB7CiAgICAgIHJldHVybiBmb3VuZGluZ19idXllcnNfdG9rZW5bX2FkZHJlc3NdOwogICAgfQogICAgaWYgKF90eXBlID09IDEpIHsKICAgICAgcmV0dXJuIHByZV9zYWxlX2J1eWVyc190b2tlbltfYWRkcmVzc107CiAgICB9CiAgICBpZiAoX3R5cGUgPT0gMikgewogICAgICByZXR1cm4gYW5nZWxfYnV5ZXJzX3Rva2VuW19hZGRyZXNzXTsKICAgIH0KICAgIGlmIChfdHlwZSA9PSAzKSB7CiAgICAgIHJldHVybiBwZV9idXllcnNfdG9rZW5bX2FkZHJlc3NdOwogICAgfQogICAgaWYgKF90eXBlID09IDQpIHsKICAgICAgcmV0dXJuIHB1YmxpY19idXllcnNfdG9rZW5bX2FkZHJlc3NdOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2V0SW52ZXN0b3JzQ291bnQodWludDI1NiBfdHlwZSkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgaWYgKF90eXBlID09IDApIHsKICAgICAgcmV0dXJuIGZvdW5kaW5nX2ludmVzdG9ycy5sZW5ndGg7CiAgICB9CiAgICBpZiAoX3R5cGUgPT0gMSkgewogICAgICByZXR1cm4gcHJlX3NhbGVfaW52ZXN0b3JzLmxlbmd0aDsKICAgIH0KICAgIGlmIChfdHlwZSA9PSAyKSB7CiAgICAgIHJldHVybiBhbmdlbF9pbnZlc3RvcnMubGVuZ3RoOwogICAgfQogICAgaWYgKF90eXBlID09IDMpIHsKICAgICAgcmV0dXJuIHBlX2ludmVzdG9ycy5sZW5ndGg7CiAgICB9CiAgICBpZiAoX3R5cGUgPT0gNCkgewogICAgICByZXR1cm4gcHVibGljX2ludmVzdG9ycy5sZW5ndGg7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZXRJbnZlc3RvckJ5SW5kZXgodWludDI1NiBfaW5kZXgsIHVpbnQyNTYgX3R5cGUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpIHsKICAgIGlmIChfdHlwZSA9PSAwKSB7CiAgICAgIHJldHVybiBmb3VuZGluZ19pbnZlc3RvcnNbX2luZGV4XTsKICAgIH0KICAgIGlmIChfdHlwZSA9PSAxKSB7CiAgICAgIHJldHVybiBwcmVfc2FsZV9pbnZlc3RvcnNbX2luZGV4XTsKICAgIH0KICAgIGlmIChfdHlwZSA9PSAyKSB7CiAgICAgIHJldHVybiBhbmdlbF9pbnZlc3RvcnNbX2luZGV4XTsKICAgIH0KICAgIGlmIChfdHlwZSA9PSAzKSB7CiAgICAgIHJldHVybiBwZV9pbnZlc3RvcnNbX2luZGV4XTsKICAgIH0KICAgIGlmIChfdHlwZSA9PSA0KSB7CiAgICAgIHJldHVybiBwdWJsaWNfaW52ZXN0b3JzW19pbmRleF07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZXRMZWZ0VG9rZW4oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2IF9hbGxfbGVmdCwgdWludDI1NiBfZm91bmRpbmdfbGVmdCwgdWludDI1NiBfYW5nZWxfbGVmdCwgdWludDI1NiBfcHJlU2FsZUFtb3VudF9sZWZ0LCB1aW50MjU2IF9QRUludmVzdG9yQW1vdW50X2xlZnQsIHVpbnQyNTYgX3B1YmxpY1NhbGVBbW91bnRfbGVmdCkgewogICAgdWludDI1NiBhbGxfbGVmdCA9IHRva2VuLnRvdGFsU3VwcGx5KCkgIT0gMCA/IHRva2VuLnRvdGFsU3VwcGx5KCkgLSBzb2xkVG9rZW5zIDogdG9rZW4udG90YWxTdXBwbHkoKTsKICAgIHVpbnQyNTYgZm91bmRpbmdfbGVmdCA9IGZvdW5kaW5nQW1vdW50ICE9IDAgPyBmb3VuZGluZ0Ftb3VudCAtIGZvdW5kaW5nX3NvbGQgOiBmb3VuZGluZ0Ftb3VudDsKICAgIHVpbnQyNTYgYW5nZWxfbGVmdCA9IGFuZ2VsQW1vdW50ICE9IDAgPyBhbmdlbEFtb3VudCAtIGFuZ2VsX3NhbGVfc29sZCA6IGFuZ2VsQW1vdW50OwogICAgdWludDI1NiBwcmVTYWxlQW1vdW50X2xlZnQgPSBwcmVTYWxlQW1vdW50ICE9IDAgPyBwcmVTYWxlQW1vdW50IC0gcHJlX3NhbGVfc29sZCA6IHByZVNhbGVBbW91bnQ7CiAgICB1aW50MjU2IFBFSW52ZXN0b3JBbW91bnRfbGVmdCA9IFBFSW52ZXN0b3JBbW91bnQgIT0gMCA/IFBFSW52ZXN0b3JBbW91bnQgLSBwZUludmVzdG9yc19zb2xkIDogUEVJbnZlc3RvckFtb3VudDsKICAgIHVpbnQyNTYgcHVibGljU2FsZUFtb3VudF9sZWZ0ID0gcHVibGljU2FsZUFtb3VudCAhPSAwID8gcHVibGljU2FsZUFtb3VudCAtIHB1YmxpY19zYWxlX3NvbGQgOiBwdWJsaWNTYWxlQW1vdW50OwoKICAgIHJldHVybiAoYWxsX2xlZnQsIGZvdW5kaW5nX2xlZnQsIGFuZ2VsX2xlZnQsIHByZVNhbGVBbW91bnRfbGVmdCwgUEVJbnZlc3RvckFtb3VudF9sZWZ0LCBwdWJsaWNTYWxlQW1vdW50X2xlZnQpOwogIH0KCiAgZnVuY3Rpb24gZ2V0VG90YWxUb2tlbigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgX3RvdGFsVG9rZW4sIHVpbnQyNTYgX2ZvdW5kaW5nQW1vdW50LCB1aW50MjU2IF9hbmdlbEFtb3VudCwgdWludDI1NiBfcHJlU2FsZUFtb3VudCwgdWludDI1NiBfUEVJbnZlc3RvckFtb3VudCwgdWludDI1NiBfcHVibGljU2FsZUFtb3VudCkgewogICAgcmV0dXJuICh0b2tlbi50b3RhbFN1cHBseSgpLCBmb3VuZGluZ0Ftb3VudCwgYW5nZWxBbW91bnQsIHByZVNhbGVBbW91bnQsIFBFSW52ZXN0b3JBbW91bnQsIHB1YmxpY1NhbGVBbW91bnQpOwogIH0KCiAgZnVuY3Rpb24gZ2V0VG90YWxFVEgoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2IF90b3RhbEVUSCwgdWludDI1NiBfYW5nZWxfc2FsZV90b3RhbEVUSCwgdWludDI1NiBfcHJlX3NhbGVfdG90YWxFVEgsIHVpbnQyNTYgX3B1YmxpY19zYWxlX3RvdGFsRVRIKSB7CiAgICByZXR1cm4gKHRvdGFsRVRILCBhbmdlbF9zYWxlX3RvdGFsRVRILCBwcmVfc2FsZV90b3RhbEVUSCwgcHVibGljX3NhbGVfdG90YWxFVEgpOwogIH0KCiAgZnVuY3Rpb24gZ2V0Q3VycmVudFByaWNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgeyAgCiAgICB1aW50MjU2IHByaWNlID0gY2FsY3VsYXRlUmF0ZSgpOwogICAgcmV0dXJuIGNhbGN1bGF0ZVByaWNlKHByaWNlLCAwKTsKICB9CgogIGZ1bmN0aW9uIGdldENvbnRyYWN0QWRkcmVzcygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpIHsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgZnVuY3Rpb24gZ2V0T3duZXIoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKSB7CiAgICByZXR1cm4gb3duZXI7CiAgfQoKICBmdW5jdGlvbiBzZW5kT3JhY2xlRGF0YSgpIHB1YmxpYyBwYXlhYmxlIHsKICAgIGlmIChtc2cudmFsdWUgIT0gMCkgewogICAgICAgIHdyYXBwZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH0KICAgIAogICAgd3JhcHBlci51cGRhdGUoIlVSTCIsICJqc29uKGh0dHBzOi8vYXBpLmtyYWtlbi5jb20vMC9wdWJsaWMvVGlja2VyP3BhaXI9RVRIVVNEKS5yZXN1bHQuWEVUSFpVU0QuYy4wIik7CiAgfQoKICBmdW5jdGlvbiBnZXRXcmFwcGVyRGF0YSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGJ5dGVzMzIpIHsKICAgIHJldHVybiB3cmFwcGVyLmdldFdyYXBwZXJEYXRhKCk7CiAgfQp9'.
	

]
