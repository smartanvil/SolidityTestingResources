Class {
	#name : #SRT6aa6b4acfab761a4f5dcee7a3962ee7aea4b6693,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6aa6b4acfab761a4f5dcee7a3962ee7aea4b6693 >> base64 [
	^ 'LyoKZmlsZTogICBkZXBvc2l0b2ZmZXIuc29sCnZlcjogICAgMC4xLjAKYXV0aG9yOiBDaHJpcyBLd2FuCmRhdGU6ICAgMjgtT0NULTIwMTcKZW1haWw6ICBlY29ycG51IEFUIGdtYWlsLmNvbQooQWRhcHRlZCBmcm9tIFZlbnRhbmFUb2tlbi5zb2wgYnkgRGFycnlsIE1vcnJpcykKCkEgY29sbGF0ZWQgY29udHJhY3Qgc2V0IGZvciBhIHRva2VuIHNhbGUgc3BlY2lmaWMgdG8gdGhlIHJlcXVpcm1lbnRzIG9mCkRlcG9zaXRvZmZlciAoRE9UKSB0b2tlbiBwcm9kdWN0LgoKVGhpcyBzb2Z0d2FyZSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLApidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgpNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICAKU2VlIE1JVCBMaWNlbmNlIGZvciBmdXJ0aGVyIGRldGFpbHMuCjxodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVD4uCgoqLwoKCnByYWdtYSBzb2xpZGl0eSBeMC40LjEzOwoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwKCiBkZXBvc2l0b2ZmZXIgdG9rZW4gc2FsZSBjb25maWd1cmF0aW9uCgpcKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKLy8gQ29udGFpbnMgdG9rZW4gc2FsZSBwYXJhbWV0ZXJzCmNvbnRyYWN0IGRlcG9zaXRvZmZlclRva2VuQ29uZmlnCnsKICAgIC8vIEVSQzIwIHRyYWRlIG5hbWUgYW5kIHN5bWJvbAogICAgc3RyaW5nIHB1YmxpYyAgICAgICAgICAgbmFtZSAgICAgICAgICAgID0gImRlcG9zaXRvZmZlciI7CiAgICBzdHJpbmcgcHVibGljICAgICAgICAgICBzeW1ib2wgICAgICAgICAgPSAiRE9UIjsKCiAgICAvLyBPd25lciBoYXMgcG93ZXIgdG8gYWJvcnQsIGRpc2NvdW50IGFkZHJlc3Nlcywgc3dlZXAgc3VjY2Vzc2Z1bCBmdW5kcywKICAgIC8vIGNoYW5nZSBvd25lciwgc3dlZXAgYWxpZW4gdG9rZW5zLgogICAgYWRkcmVzcyBwdWJsaWMgICAgICAgICAgb3duZXIgICAgICAgICAgID0gMHhCMzUzY0Y0MUEwQ0FhMzhENjU5N0E3YTEzMzdkZWJmMGIwOWRkOGFlOyAvLyBQcmltYXJ5IGFkZHJlc3MgY2hlY2tzdW1tZWQKICAgIAogICAgLy8gRnVuZCB3YWxsZXQgc2hvdWxkIGFsc28gYmUgYXVkaXRlZCBwcmlvciB0byBkZXBsb3ltZW50CiAgICAvLyBOT1RFOiBNdXN0IGJlIGNoZWNrc3VtbWVkIGFkZHJlc3MhCiAgICBhZGRyZXNzIHB1YmxpYyAgICAgICAgICBmdW5kV2FsbGV0ICAgICAgPSAweEU0QmUzMTU3REJENzFBY2Q3QWQ1NjY3ZGIwMEFBMTExQzAwODgxOTU7IC8vIG11bHRpU2lnIGFkZHJlc3MgY2hlY2tzdW1tZWQKCiAgICAvLyBUb2tlbnMgYXdhcmRlZCBwZXIgVVNEIGNvbnRyaWJ1dGVkCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCAgICBUT0tFTlNfUEVSX1VTRCAgPSAyOwoKICAgIC8vIEV0aGVyIG1hcmtldCBwcmljZSBpbiBVU0QKICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIFVTRF9QRVJfRVRIICAgICA9IDMwMDsgLy8gYXBwcm94IDcgZGF5IGF2ZXJhZ2UgSGlnaCBMb3cgYXMgYXQgMjl0aCBPQ1QgMjAxNwogICAgCiAgICAvLyBNaW5pbXVtIGFuZCBtYXhpbXVtIHRhcmdldCBpbiBVU0QKICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIE1JTl9VU0RfRlVORCAgICA9IDE7ICAvLyAkMQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgICAgTUFYX1VTRF9GVU5EICAgID0gMjAwMDAwMDsgLy8gJDJtCiAgICAKICAgIC8vIE5vbi1LWUMgY29udHJpYnV0aW9uIGxpbWl0IGluIFVTRAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgICAgS1lDX1VTRF9MTVQgICAgID0gNTAwMDA7CiAgICAKICAgIC8vIFRoZXJlIHdpbGwgYmUgZXhhY3RseSA0MDAwMDAwIHRva2VucyByZWdhcmRsZXNzIG9mIG51bWJlciBzb2xkCiAgICAvLyBVbnNvbGQgdG9rZW5zIGFyZSBwdXQgZ2l2ZW4gdG8gdGhlIEZvdW5kZXIgb24gVHJ1c3QgdG8gZnVuZCBvcGVyYXRpb25zIG9mIHRoZSBQcm9qZWN0CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCAgICBNQVhfVE9LRU5TICAgICAgPSA0MDAwMDAwOyAvLyA0IG1pbwogICAgCiAgICAvLyBGdW5kaW5nIGJlZ2lucyBvbiAzMHRoIE9DVCAyMDE3CiAgICAKICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIFNUQVJUX0RBVEUgICAgICA9IDE1MDkzMTgwMDE7IC8vIDMwLjEwLjIwMTcgMTAgQU0gYW5kIDEgU2VjIFN5ZG5leSBUaW1lCgogICAgLy8gUGVyaW9kIGZvciBmdW5kcmFpc2luZwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgICAgRlVORElOR19QRVJJT0QgID0gNDEgZGF5czsKfQoKCmxpYnJhcnkgU2FmZU1hdGgKewogICAgLy8gYSBhZGQgdG8gYgogICAgCiAgICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYykgewogICAgICAgIGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgIH0KICAgIAogICAgLy8gYSBzdWJ0cmFjdCBiCiAgICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYykgewogICAgICAgIGMgPSBhIC0gYjsKICAgICAgICBhc3NlcnQoYyA8PSBhKTsKICAgIH0KICAgIAogICAgLy8gYSBtdWx0aXBsaWVkIGJ5IGIKICAgIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICB9CiAgICAKICAgIC8vIGEgZGl2aWRlZCBieSBiCiAgICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYykgewogICAgICAgIGMgPSBhIC8gYjsKICAgICAgICAvLyBObyBhc3NlcnQgcmVxdWlyZWQgYXMgbm8gb3ZlcmZsb3dzIGFyZSBwb3NpYmxlLgogICAgfQp9CgoKY29udHJhY3QgUmVlbnRyeVByb3RlY3RlZAp7CiAgICAvLyBUaGUgcmVlbnRyeSBwcm90ZWN0aW9uIHN0YXRlIG11dGV4LgogICAgYm9vbCBfX3JlTXV0ZXg7CgogICAgLy8gU2V0cyBhbmQgcmVzZXRzIG11dGV4IGluIG9yZGVyIHRvIGJsb2NrIGZ1bmN0aW4gcmVlbnRyeQogICAgbW9kaWZpZXIgcHJldmVudFJlZW50cnkoKSB7CiAgICAgICAgcmVxdWlyZSghX19yZU11dGV4KTsKICAgICAgICBfX3JlTXV0ZXggPSB0cnVlOwogICAgICAgIF87CiAgICAgICAgZGVsZXRlIF9fcmVNdXRleDsKICAgIH0KCiAgICAvLyBCbG9ja3MgZnVuY3Rpb24gZW50cnkgaWYgbXV0ZXggaXMgc2V0CiAgICBtb2RpZmllciBub1JlZW50cnkoKSB7CiAgICAgICAgcmVxdWlyZSghX19yZU11dGV4KTsKICAgICAgICBfOwogICAgfQp9Cgpjb250cmFjdCBFUkMyMFRva2VuCnsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKLyogQ29uc3RhbnRzICovCgogICAgLy8gbm9uZQogICAgCi8qIFN0YXRlIHZhcmlhYmxlICovCgogICAgLy8vIEByZXR1cm4gVGhlIFRvdGFsIHN1cHBseSBvZiB0b2tlbnMKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogICAgCiAgICAvLy8gQHJldHVybiBUb2tlbiBzeW1ib2wKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgCiAgICAvLyBUb2tlbiBvd25lcnNoaXAgbWFwcGluZwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKICAgIAogICAgLy8gQWxsb3dhbmNlcyBtYXBwaW5nCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgovKiBFdmVudHMgKi8KCiAgICAvLyBUcmlnZ2VyZWQgd2hlbiB0b2tlbnMgYXJlIHRyYW5zZmVycmVkLgogICAgZXZlbnQgVHJhbnNmZXIoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIF9mcm9tLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfdG8sCiAgICAgICAgdWludDI1NiBfYW1vdW50KTsKCiAgICAvLyBUcmlnZ2VyZWQgd2hlbmV2ZXIgYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpIGlzIGNhbGxlZC4KICAgIGV2ZW50IEFwcHJvdmFsKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLAogICAgICAgIHVpbnQyNTYgX2Ftb3VudCk7CgovKiBNb2RpZmllcnMgKi8KCiAgICAvLyBub25lCiAgICAKLyogRnVuY3Rpb25zICovCgogICAgLy8gVXNpbmcgYW4gZXhwbGljaXQgZ2V0dGVyIGFsbG93cyBmb3IgZnVuY3Rpb24gb3ZlcmxvYWRpbmcgICAgCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfYWRkcikKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19hZGRyXTsKICAgIH0KICAgIAogICAgLy8gVXNpbmcgYW4gZXhwbGljaXQgZ2V0dGVyIGFsbG93cyBmb3IgZnVuY3Rpb24gb3ZlcmxvYWRpbmcgICAgCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIC8vIFNlbmQgX3ZhbHVlIGFtb3VudCBvZiB0b2tlbnMgdG8gYWRkcmVzcyBfdG8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4geGZlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOwogICAgfQoKICAgIC8vIFNlbmQgX3ZhbHVlIGFtb3VudCBvZiB0b2tlbnMgZnJvbSBhZGRyZXNzIF9mcm9tIHRvIGFkZHJlc3MgX3RvCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoX2Ftb3VudCA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CiAgICAgICAgCiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHhmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICB9CgogICAgLy8gUHJvY2VzcyBhIHRyYW5zZmVyIGludGVybmFsbHkuCiAgICBmdW5jdGlvbiB4ZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoX2Ftb3VudCA8PSBiYWxhbmNlc1tfZnJvbV0pOwoKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgICAgICAKICAgICAgICAvLyBhdm9pZCB3YXN0aW5nIGdhcyBvbiAwIHRva2VuIHRyYW5zZmVycwogICAgICAgIGlmKF9hbW91bnQgPT0gMCkgcmV0dXJuIHRydWU7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1tfdG9dICAgPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBBcHByb3ZlcyBhIHRoaXJkLXBhcnR5IHNwZW5kZXIKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfYW1vdW50OwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKCgovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXAoKIyMgQ29uZGl0aW9uYWwgRW50cnkgVGFibGUKCkZ1bmN0aW9ucyBtdXN0IHRocm93IG9uIEYgY29uZGl0aW9ucwoKQ29uZGl0aW9uYWwgRW50cnkgVGFibGUgKGZ1bmN0aW9ucyBtdXN0IHRocm93IG9uIEYgY29uZGl0aW9ucykKCnJlbmV0cnkgcHJldmVudGlvbiBvbiBhbGwgcHVibGljIG11dGF0aW5nIGZ1bmN0aW9ucwpSZWVudHJ5IG11dGV4IHNldCBpbiBtb3ZlRnVuZHNUb1dhbGxldCgpLCByZWZ1bmQoKQoKfGZ1bmN0aW9uICAgICAgICAgICAgICAgIHw8U1RBUlRfREFURXw8RU5EX0RBVEUgfGZ1bmRGYWlsZWQgIHxmdW5kU3VjY2VlZGVkfGljb1N1Y2NlZWRlZAp8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfDotLS0tLS0tLS06fDotLS0tLS0tLTp8Oi0tLS0tLS0tLS06fDotLS0tLS0tLS0tLTp8Oi0tLS0tLS0tLTp8CnwoKSAgICAgICAgICAgICAgICAgICAgICB8S1lDICAgICAgICB8VCAgICAgICAgIHxGICAgICAgICAgICB8VCAgICAgICAgICAgIHxGICAgICAgICAgIHwKfGFib3J0KCkgICAgICAgICAgICAgICAgIHxUICAgICAgICAgIHxUICAgICAgICAgfFQgICAgICAgICAgIHxUICAgICAgICAgICAgfEYgICAgICAgICAgfAp8cHJveHlQdXJjaGFzZSgpICAgICAgICAgfEtZQyAgICAgICAgfFQgICAgICAgICB8RiAgICAgICAgICAgfFQgICAgICAgICAgICB8RiAgICAgICAgICB8CnxhZGRLeWNBZGRyZXNzKCkgICAgICAgICB8VCAgICAgICAgICB8VCAgICAgICAgIHxGICAgICAgICAgICB8VCAgICAgICAgICAgIHxUICAgICAgICAgIHwKfGZpbmFsaXNlSUNPKCkgICAgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfEYgICAgICAgICAgIHxUICAgICAgICAgICAgfFQgICAgICAgICAgfAp8cmVmdW5kKCkgICAgICAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8VCAgICAgICAgICAgfEYgICAgICAgICAgICB8RiAgICAgICAgICB8Cnx0cmFuc2ZlcigpICAgICAgICAgICAgICB8RiAgICAgICAgICB8RiAgICAgICAgIHxGICAgICAgICAgICB8RiAgICAgICAgICAgIHxUICAgICAgICAgIHwKfHRyYW5zZmVyRnJvbSgpICAgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfEYgICAgICAgICAgIHxGICAgICAgICAgICAgfFQgICAgICAgICAgfAp8YXBwcm92ZSgpICAgICAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8RiAgICAgICAgICAgfEYgICAgICAgICAgICB8VCAgICAgICAgICB8CnxjaGFuZ2VPd25lcigpICAgICAgICAgICB8VCAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgICB8VCAgICAgICAgICAgIHxUICAgICAgICAgIHwKfGFjY2VwdE93bmVyc2hpcCgpICAgICAgIHxUICAgICAgICAgIHxUICAgICAgICAgfFQgICAgICAgICAgIHxUICAgICAgICAgICAgfFQgICAgICAgICAgfAp8Y2hhbmdlZGVwb3NpdG8oKSAgICAgICAgICB8VCAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgICB8VCAgICAgICAgICAgIHxUICAgICAgICAgIHwKfGRlc3Ryb3koKSAgICAgICAgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfCFfX2Fib3J0RnVzZXxGICAgICAgICAgICAgfEYgICAgICAgICAgfAp8dHJhbnNmZXJBbnlFUkMyMFRva2VucygpfFQgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICAgfFQgICAgICAgICAgICB8VCAgICAgICAgICB8CgpcKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKY29udHJhY3QgZGVwb3NpdG9mZmVyVG9rZW5BYnN0cmFjdAp7Ci8vIFRPRE8gY29tbWVudCBldmVudHMKCi8vIExvZ2dlZCB3aGVuIGZ1bmRlciBleGNlZWRzIHRoZSBLWUMgbGltaXQKICAgIGV2ZW50IEtZQ0FkZHJlc3MoYWRkcmVzcyBpbmRleGVkIF9hZGRyLCBib29sIGluZGV4ZWQgX2t5Yyk7CgovLyBMb2dnZWQgdXBvbiByZWZ1bmQKICAgIGV2ZW50IFJlZnVuZGVkKGFkZHJlc3MgaW5kZXhlZCBfYWRkciwgdWludCBpbmRleGVkIF92YWx1ZSk7CgovLyBMb2dnZWQgd2hlbiBuZXcgb3duZXIgYWNjZXB0cyBvd25lcnNoaXAKICAgIGV2ZW50IENoYW5nZWRPd25lcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8pOwogICAgCi8vIExvZ2dlZCB3aGVuIG93bmVyIGluaXRpYXRlcyBhIGNoYW5nZSBvZiBvd25lcnNoaXAKICAgIGV2ZW50IENoYW5nZU93bmVyVG8oYWRkcmVzcyBpbmRleGVkIF90byk7CgovLyBMb2dnZWQgd2hlbiBJQ08gZXRoZXIgZnVuZHMgYXJlIHRyYW5zZmVycmVkIHRvIGFuIGFkZHJlc3MKICAgIGV2ZW50IEZ1bmRzVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIF93YWxsZXQsIHVpbnQgaW5kZXhlZCBfdmFsdWUpOwoKCiAgICAvLyBUaGlzIGZ1c2UgYmxvd3MgdXBvbiBjYWxsaW5nIGFib3J0KCkgd2hpY2ggZm9yY2VzIGEgZmFpbCBzdGF0ZQogICAgYm9vbCBwdWJsaWMgX19hYm9ydEZ1c2UgPSB0cnVlOwogICAgCiAgICAvLyBTZXQgdG8gdHJ1ZSBhZnRlciB0aGUgZnVuZCBpcyBzd2VwdCB0byB0aGUgZnVuZCB3YWxsZXQsIGFsbG93cyB0b2tlbgogICAgLy8gdHJhbnNmZXJzIGFuZCBwcmV2ZW50cyBhYm9ydCgpCiAgICBib29sIHB1YmxpYyBpY29TdWNjZXNzZnVsOwoKICAgIC8vIFRva2VuIGNvbnZlcnNpb24gZmFjdG9ycyBhcmUgY2FsY3VsYXRlZCB3aXRoIGRlY2ltYWwgcGxhY2VzIGF0IHBhcml0eSB3aXRoIGV0aGVyCiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICAvLyBBbiBhZGRyZXNzIGF1dGhvcmlzZWQgdG8gdGFrZSBvd25lcnNoaXAKICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwogICAgCiAgICAvLyBUaGUgZGVwb3NpdG8gc21hcnQgY29udHJhY3QgYWRkcmVzcwogICAgYWRkcmVzcyBwdWJsaWMgZGVwb3NpdG87CiAgICAKICAgIC8vIFRvdGFsIGV0aGVyIHJhaXNlZCBkdXJpbmcgZnVuZGluZwogICAgdWludCBwdWJsaWMgZXRoZXJSYWlzZWQ7CiAgICAKICAgIC8vIFByZWF1dGhvcml6ZWQgdHJhbmNoIGRpc2NvdW50IGFkZHJlc3NlcwogICAgLy8gaG9sZGVyID0+IGRpc2NvdW50CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBreWNBZGRyZXNzZXM7CiAgICAKICAgIC8vIFJlY29yZCBvZiBldGhlciBwYWlkIHBlciBhZGRyZXNzCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBldGhlckNvbnRyaWJ1dGVkOwoKICAgIC8vIFJldHVybiBgdHJ1ZWAgaWYgTUlOX0ZVTkRTIHdlcmUgcmFpc2VkCiAgICBmdW5jdGlvbiBmdW5kU3VjY2VlZGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwogICAgCiAgICAvLyBSZXR1cm4gYHRydWVgIGlmIE1JTl9GVU5EUyB3ZXJlIG5vdCByYWlzZWQgYmVmb3JlIEVORF9EQVRFCiAgICBmdW5jdGlvbiBmdW5kRmFpbGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwoKICAgIC8vIFJldHVybnMgVVNEIHJhaXNlZCBmb3Igc2V0IEVUSC9VU0QgcmF0ZQogICAgZnVuY3Rpb24gdXNkUmFpc2VkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKICAgIC8vIFJldHVybnMgYW4gYW1vdW50IGluIGV0aCBlcXVpdmlsZW50IHRvIFVTRCBhdCB0aGUgc2V0IHJhdGUKICAgIGZ1bmN0aW9uIHVzZFRvRXRoKHVpbnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpOwogICAgCiAgICAvLyBSZXR1cm5zIHRoZSBVU0QgdmFsdWUgb2YgZXRoZXIgYXQgdGhlIHNldCBVU0QvRVRIIHJhdGUKICAgIGZ1bmN0aW9uIGV0aFRvVXNkKHVpbnQgX3dlaSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKICAgIC8vIFJldHVybnMgdG9rZW4vZXRoZXIgY29udmVyc2lvbiBnaXZlbiBldGhlciB2YWx1ZSBhbmQgYWRkcmVzcy4gCiAgICBmdW5jdGlvbiBldGhUb1Rva2Vucyh1aW50IF9ldGgpCiAgICAgICAgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKICAgIC8vIFByb2Nlc3NlcyBhIHRva2VuIHB1cmNoYXNlIGZvciBhIGdpdmVuIGFkZHJlc3MKICAgIGZ1bmN0aW9uIHByb3h5UHVyY2hhc2UoYWRkcmVzcyBfYWRkcikgcGF5YWJsZSByZXR1cm5zIChib29sKTsKCiAgICAvLyBPd25lciBjYW4gbW92ZSBmdW5kcyBvZiBzdWNjZXNzZnVsIGZ1bmQgdG8gZnVuZFdhbGxldCAKICAgIGZ1bmN0aW9uIGZpbmFsaXNlSUNPKCkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgCiAgICAvLyBSZWdpc3RlcnMgYSBkaXNjb3VudGVkIGFkZHJlc3MKICAgIGZ1bmN0aW9uIGFkZEt5Y0FkZHJlc3MoYWRkcmVzcyBfYWRkciwgYm9vbCBfa3ljKQogICAgICAgIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgICAvLyBSZWZ1bmQgb24gZmFpbGVkIG9yIGFib3J0ZWQgc2FsZSAKICAgIGZ1bmN0aW9uIHJlZnVuZChhZGRyZXNzIF9hZGRyKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgLy8gVG8gY2FuY2VsIHRva2VuIHNhbGUgcHJpb3IgdG8gU1RBUlRfREFURQogICAgZnVuY3Rpb24gYWJvcnQoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICAKICAgIC8vIENoYW5nZSB0aGUgZGVwb3NpdG8gYmFja2VuZCBjb250cmFjdCBhZGRyZXNzCiAgICBmdW5jdGlvbiBjaGFuZ2VkZXBvc2l0byhhZGRyZXNzIF9hZGRyKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICAKICAgIC8vIEZvciBvd25lciB0byBzYWx2YWdlIHRva2VucyBzZW50IHRvIGNvbnRyYWN0CiAgICBmdW5jdGlvbiB0cmFuc2ZlckFueUVSQzIwVG9rZW4oYWRkcmVzcyB0b2tlbkFkZHJlc3MsIHVpbnQgYW1vdW50KQogICAgICAgIHJldHVybnMgKGJvb2wpOwp9CgoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwKCiBkZXBvc2l0b2ZmZXIgdG9rZW4gaW1wbGltZW50YXRpb24KClwqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgpjb250cmFjdCBkZXBvc2l0b2ZmZXJUb2tlbiBpcyAKICAgIFJlZW50cnlQcm90ZWN0ZWQsCiAgICBFUkMyMFRva2VuLAogICAgZGVwb3NpdG9mZmVyVG9rZW5BYnN0cmFjdCwKICAgIGRlcG9zaXRvZmZlclRva2VuQ29uZmlnCnsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKLy8KLy8gQ29uc3RhbnRzCi8vCgogICAgLy8gVVNEIHRvIGV0aGVyIGNvbnZlcnNpb24gZmFjdG9ycyBjYWxjdWxhdGVkIGZyb20gYGRlcG9zaXRvZmZlclRva2VuQ29uZmlnYCBjb25zdGFudHMgCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBUT0tFTlNfUEVSX0VUSCA9IFRPS0VOU19QRVJfVVNEICogVVNEX1BFUl9FVEg7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fRVRIX0ZVTkQgICA9IDEgZXRoZXIgKiBNSU5fVVNEX0ZVTkQgLyBVU0RfUEVSX0VUSDsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1BWF9FVEhfRlVORCAgID0gMSBldGhlciAqIE1BWF9VU0RfRlVORCAvIFVTRF9QRVJfRVRIOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgS1lDX0VUSF9MTVQgICAgPSAxIGV0aGVyICogS1lDX1VTRF9MTVQgIC8gVVNEX1BFUl9FVEg7CgogICAgLy8gR2VuZXJhbCBmdW5kaW5nIG9wZW5zIExFQURfSU5fUEVSSU9EIGFmdGVyIGRlcGxveW1lbnQgKHRpbWVzdGFtcHMgY2FuJ3QgYmUgY29uc3RhbnQpCiAgICB1aW50IHB1YmxpYyBFTkRfREFURSAgPSBTVEFSVF9EQVRFICsgRlVORElOR19QRVJJT0Q7CgovLwovLyBNb2RpZmllcnMKLy8KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCi8vCi8vIEZ1bmN0aW9ucwovLwoKICAgIC8vIENvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBkZXBvc2l0b2ZmZXJUb2tlbigpCiAgICB7CiAgICAgICAgLy8gSUNPIHBhcmFtZXRlcnMgYXJlIHNldCBpbiBkZXBvc2l0b2ZmZXJUU0NvbmZpZwogICAgICAgIC8vIEludmFsaWQgY29uZmlndXJhdGlvbiBjYXRjaGluZyBoZXJlCiAgICAgICAgcmVxdWlyZShieXRlcyhzeW1ib2wpLmxlbmd0aCA+IDApOwogICAgICAgIHJlcXVpcmUoYnl0ZXMobmFtZSkubGVuZ3RoID4gMCk7CiAgICAgICAgcmVxdWlyZShvd25lciAhPSAweDApOwogICAgICAgIHJlcXVpcmUoZnVuZFdhbGxldCAhPSAweDApOwogICAgICAgIHJlcXVpcmUoVE9LRU5TX1BFUl9VU0QgPiAwKTsKICAgICAgICByZXF1aXJlKFVTRF9QRVJfRVRIID4gMCk7CiAgICAgICAgcmVxdWlyZShNSU5fVVNEX0ZVTkQgPiAwKTsKICAgICAgICByZXF1aXJlKE1BWF9VU0RfRlVORCA+IE1JTl9VU0RfRlVORCk7CiAgICAgICAgcmVxdWlyZShTVEFSVF9EQVRFID4gMCk7CiAgICAgICAgcmVxdWlyZShGVU5ESU5HX1BFUklPRCA+IDApOwogICAgICAgIAogICAgICAgIC8vIFNldHVwIGFuZCBhbGxvY2F0ZSB0b2tlbiBzdXBwbHkgdG8gMTggZGVjaW1hbCBwbGFjZXMKICAgICAgICB0b3RhbFN1cHBseSA9IE1BWF9UT0tFTlMgKiAxZTE4OwogICAgICAgIGJhbGFuY2VzW2Z1bmRXYWxsZXRdID0gdG90YWxTdXBwbHk7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBmdW5kV2FsbGV0LCB0b3RhbFN1cHBseSk7CiAgICB9CiAgICAKICAgIC8vIERlZmF1bHQgZnVuY3Rpb24KICAgIGZ1bmN0aW9uICgpCiAgICAgICAgcGF5YWJsZQogICAgewogICAgICAgIC8vIFBhc3MgdGhyb3VnaCB0byBwdXJjaGFzaW5nIGZ1bmN0aW9uLiBXaWxsIHRocm93IG9uIGZhaWxlZCBvcgogICAgICAgIC8vIHN1Y2Nlc3NmdWwgSUNPCiAgICAgICAgcHJveHlQdXJjaGFzZShtc2cuc2VuZGVyKTsKICAgIH0KCi8vCi8vIEdldHRlcnMKLy8KCiAgICAvLyBJQ08gZmFpbHMgaWYgYWJvcnRlZCBvciBtaW5pbXVtIGZ1bmRzIGFyZSBub3QgcmFpc2VkIGJ5IHRoZSBlbmQgZGF0ZQogICAgZnVuY3Rpb24gZnVuZEZhaWxlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiAhX19hYm9ydEZ1c2UKICAgICAgICAgICAgfHwgKG5vdyA+IEVORF9EQVRFICYmIGV0aGVyUmFpc2VkIDwgTUlOX0VUSF9GVU5EKTsKICAgIH0KICAgIAogICAgLy8gRnVuZGluZyBzdWNjZWVkcyBpZiBub3QgYWJvcnRlZCwgbWluaW11bSBmdW5kcyBhcmUgcmFpc2VkIGJlZm9yZSBlbmQgZGF0ZQogICAgZnVuY3Rpb24gZnVuZFN1Y2NlZWRlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiAhZnVuZEZhaWxlZCgpCiAgICAgICAgICAgICYmIGV0aGVyUmFpc2VkID49IE1JTl9FVEhfRlVORDsKICAgIH0KCiAgICAvLyBSZXR1cm5zIHRoZSBVU0QgdmFsdWUgb2YgZXRoZXIgYXQgdGhlIHNldCBVU0QvRVRIIHJhdGUKICAgIGZ1bmN0aW9uIGV0aFRvVXNkKHVpbnQgX3dlaSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIFVTRF9QRVJfRVRILm11bChfd2VpKS5kaXYoMSBldGhlcik7CiAgICB9CiAgICAKICAgIC8vIFJldHVybnMgdGhlIGV0aGVyIHZhbHVlIG9mIFVTRCBhdCB0aGUgc2V0IFVTRC9FVEggcmF0ZQogICAgZnVuY3Rpb24gdXNkVG9FdGgodWludCBfdXNkKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICByZXR1cm4gX3VzZC5tdWwoMSBldGhlcikuZGl2KFVTRF9QRVJfRVRIKTsKICAgIH0KICAgIAogICAgLy8gUmV0dXJucyB0aGUgVVNEIHZhbHVlIG9mIGV0aGVyIHJhaXNlZCBhdCB0aGUgc2V0IFVTRC9FVEggcmF0ZQogICAgZnVuY3Rpb24gdXNkUmFpc2VkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIGV0aFRvVXNkKGV0aGVyUmFpc2VkKTsKICAgIH0KICAgIAogICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRva2VucyBmb3IgZ2l2ZW4gYW1vdW50IG9mIGV0aGVyIGZvciBhbiBhZGRyZXNzIAogICAgZnVuY3Rpb24gZXRoVG9Ub2tlbnModWludCBfd2VpKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICB1aW50IHVzZCA9IGV0aFRvVXNkKF93ZWkpOwogICAgICAgIAogICAgICAgIC8vIFBlcmNlbnQgYm9udXMgZnVuZGluZyB0aWVycyBmb3IgVVNEIGZ1bmRpbmcKICAgICAgICB1aW50IGJvbnVzID0gMDsKICAgIC8vICAgICAgICB1c2QgPj0gMjAwMDAwMCA/IDM1IDoKICAgIC8vICAgICAgICB1c2QgPj0gNTAwMDAwICA/IDMwIDoKICAgIC8vICAgICAgICB1c2QgPj0gMTAwMDAwICA/IDIwIDoKICAgIC8vICAgICAgICB1c2QgPj0gMjUwMDAgICA/IDE1IDoKICAgIC8vICAgICAgICB1c2QgPj0gMTAwMDAgICA/IDEwIDoKICAgIC8vICAgICAgICB1c2QgPj0gNTAwMCAgICA/IDUgIDoKICAgIC8vICAgICAgICB1c2QgPj0gMTAwMCAgICA/IDEgIDogICAgICAgICAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIC8vIHVzaW5nIG4uMiBmaXhlZCBwb2ludCBkZWNpbWFsIGZvciB3aG9sZSBudW1iZXIgcGVyY2VudGFnZS4KICAgICAgICByZXR1cm4gX3dlaS5tdWwoVE9LRU5TX1BFUl9FVEgpLm11bChib251cyArIDEwMCkuZGl2KDEwMCk7CiAgICB9CgovLwovLyBJQ08gZnVuY3Rpb25zCi8vCgogICAgLy8gVGhlIGZ1bmRyYWlzaW5nIGNhbiBiZSBhYm9ydGVkIGFueSB0aW1lIGJlZm9yZSBmdW5kcyBhcmUgc3dlcHQgdG8gdGhlCiAgICAvLyBmdW5kV2FsbGV0LgogICAgLy8gVGhpcyB3aWxsIGZvcmNlIGEgZmFpbCBzdGF0ZSBhbmQgYWxsb3cgcmVmdW5kcyB0byBiZSBjb2xsZWN0ZWQuCiAgICBmdW5jdGlvbiBhYm9ydCgpCiAgICAgICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgb25seU93bmVyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKCFpY29TdWNjZXNzZnVsKTsKICAgICAgICBkZWxldGUgX19hYm9ydEZ1c2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIEdlbmVyYWwgYWRkcmVzc2VzIGNhbiBwdXJjaGFzZSB0b2tlbnMgZHVyaW5nIGZ1bmRpbmcKICAgIGZ1bmN0aW9uIHByb3h5UHVyY2hhc2UoYWRkcmVzcyBfYWRkcikKICAgICAgICBwYXlhYmxlCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKCFmdW5kRmFpbGVkKCkpOwogICAgICAgIHJlcXVpcmUoIWljb1N1Y2Nlc3NmdWwpOwogICAgICAgIHJlcXVpcmUobm93IDw9IEVORF9EQVRFKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwogICAgICAgIAogICAgICAgIC8vIE5vbi1LWUMnZWQgZnVuZGVycyBjYW4gb25seSBjb250cmlidXRlIHVwIHRvICQxMDAwMCBhZnRlciBwcmVmdW5kIHBlcmlvZAogICAgICAgIGlmKCFreWNBZGRyZXNzZXNbX2FkZHJdKQogICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZShub3cgPj0gU1RBUlRfREFURSk7CiAgICAgICAgICAgIHJlcXVpcmUoKGV0aGVyQ29udHJpYnV0ZWRbX2FkZHJdLmFkZChtc2cudmFsdWUpKSA8PSBLWUNfRVRIX0xNVCk7CiAgICAgICAgfQoKICAgICAgICAvLyBHZXQgZXRoZXIgdG8gdG9rZW4gY29udmVyc2lvbgogICAgICAgIHVpbnQgdG9rZW5zID0gZXRoVG9Ub2tlbnMobXNnLnZhbHVlKTsKICAgICAgICAKICAgICAgICAvLyB0cmFuc2ZlciB0b2tlbnMgZnJvbSBmdW5kIHdhbGxldAogICAgICAgIAogICAgICAgIHhmZXIoZnVuZFdhbGxldCwgX2FkZHIsIHRva2Vucyk7CiAgICAgICAgCiAgICAgICAgLy8gVXBkYXRlIGhvbGRlciBwYXltZW50cwogICAgICAgIGV0aGVyQ29udHJpYnV0ZWRbX2FkZHJdID0gZXRoZXJDb250cmlidXRlZFtfYWRkcl0uYWRkKG1zZy52YWx1ZSk7CiAgICAgICAgCiAgICAgICAgLy8gVXBkYXRlIGZ1bmRzIHJhaXNlZAogICAgICAgIGV0aGVyUmFpc2VkID0gZXRoZXJSYWlzZWQuYWRkKG1zZy52YWx1ZSk7CiAgICAgICAgCiAgICAgICAgLy8gQmFpbCBpZiB0aGlzIHB1c2hlcyB0aGUgZnVuZCBvdmVyIHRoZSBVU0QgY2FwIG9yIFRva2VuIGNhcAogICAgICAgIHJlcXVpcmUoZXRoZXJSYWlzZWQgPD0gTUFYX0VUSF9GVU5EKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIE93bmVyIGNhbiBLWUMgKG9yIHJldm9rZSkgYWRkcmVzc2VzIHVudGlsIGNsb3NlIG9mIGZ1bmRpbmcKICAgIGZ1bmN0aW9uIGFkZEt5Y0FkZHJlc3MoYWRkcmVzcyBfYWRkciwgYm9vbCBfa3ljKQogICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgb25seU93bmVyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgIHJlcXVpcmUoIWZ1bmRGYWlsZWQoKSk7CgogICAgICAgIGt5Y0FkZHJlc3Nlc1tfYWRkcl0gPSBfa3ljOwogICAgICAgIEtZQ0FkZHJlc3MoX2FkZHIsIF9reWMpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gT3duZXIgY2FuIHN3ZWVwIGEgc3VjY2Vzc2Z1bCBmdW5kaW5nIHRvIHRoZSBmdW5kV2FsbGV0CiAgICAvLyBDb250cmFjdCBjYW4gYmUgYWJvcnRlZCB1cCB1bnRpbCB0aGlzIGFjdGlvbi4KICAgIC8vIEVmZmVjdGl2ZSBvbmNlIGJ1dCBjYW4gYmUgY2FsbGVkIG11bHRpcGxlIHRpbWUgdG8gd2l0aGRyYXcgZWRnZSBjYXNlCiAgICAvLyBmdW5kcyByZWNpZXZlZCBieSBjb250cmFjdCB3aGljaCBjYW4gc2VsZmRlc3RydWN0IHRvIHRoaXMgYWRkcmVzcwogCiAgICAKICAgIGZ1bmN0aW9uIGZpbmFsaXNlSUNPKCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgICAgICBwcmV2ZW50UmVlbnRyeSgpCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKGZ1bmRTdWNjZWVkZWQoKSk7CgogICAgICAgIGljb1N1Y2Nlc3NmdWwgPSB0cnVlOwoKICAgICAgICBGdW5kc1RyYW5zZmVycmVkKGZ1bmRXYWxsZXQsIHRoaXMuYmFsYW5jZSk7CiAgICAgICAgZnVuZFdhbGxldC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBSZWZ1bmRzIGNhbiBiZSBjbGFpbWVkIGZyb20gYSBmYWlsZWQgSUNPCiAgICBmdW5jdGlvbiByZWZ1bmQoYWRkcmVzcyBfYWRkcikKICAgICAgICBwdWJsaWMKICAgICAgICBwcmV2ZW50UmVlbnRyeSgpCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKGZ1bmRGYWlsZWQoKSk7CiAgICAgICAgCiAgICAgICAgdWludCB2YWx1ZSA9IGV0aGVyQ29udHJpYnV0ZWRbX2FkZHJdOwoKICAgICAgICAvLyBUcmFuc2ZlciB0b2tlbnMgYmFjayB0byBvcmlnaW4KICAgICAgICAvLyAoTm90IHJlYWxseSBuZWNlc3NhcnkgYnV0IGxvb2tpbmcgZm9yIGdyYWNlZnVsIGV4aXQpCiAgICAgICAgeGZlcihfYWRkciwgZnVuZFdhbGxldCwgYmFsYW5jZXNbX2FkZHJdKTsKCiAgICAgICAgLy8gZ2FyYmFnZSBjb2xsZWN0CiAgICAgICAgZGVsZXRlIGV0aGVyQ29udHJpYnV0ZWRbX2FkZHJdOwogICAgICAgIGRlbGV0ZSBreWNBZGRyZXNzZXNbX2FkZHJdOwogICAgICAgIAogICAgICAgIFJlZnVuZGVkKF9hZGRyLCB2YWx1ZSk7CiAgICAgICAgaWYgKHZhbHVlID4gMCkgewogICAgICAgICAgICBfYWRkci50cmFuc2Zlcih2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKLy8KLy8gRVJDMjAgb3ZlcmxvYWRlZCBmdW5jdGlvbnMKLy8KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHByZXZlbnRSZWVudHJ5CiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICAvLyBJQ08gbXVzdCBiZSBzdWNjZXNzZnVsCiAgICAgICAgcmVxdWlyZShpY29TdWNjZXNzZnVsKTsKICAgICAgICBzdXBlci50cmFuc2ZlcihfdG8sIF9hbW91bnQpOwoKICAgICAgICBpZiAoX3RvID09IGRlcG9zaXRvKQogICAgICAgICAgICAvLyBOb3RpZnkgdGhlIGRlcG9zaXRvIGNvbnRyYWN0IGl0IGhhcyBiZWVuIHNlbnQgdG9rZW5zCiAgICAgICAgICAgIHJlcXVpcmUoTm90aWZ5KGRlcG9zaXRvKS5ub3RpZnkobXNnLnNlbmRlciwgX2Ftb3VudCkpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHByZXZlbnRSZWVudHJ5CiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICAvLyBJQ08gbXVzdCBiZSBzdWNjZXNzZnVsCiAgICAgICAgcmVxdWlyZShpY29TdWNjZXNzZnVsKTsKICAgICAgICBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX2Ftb3VudCk7CgogICAgICAgIGlmIChfdG8gPT0gZGVwb3NpdG8pCiAgICAgICAgICAgIC8vIE5vdGlmeSB0aGUgZGVwb3NpdG8gY29udHJhY3QgaXQgaGFzIGJlZW4gc2VudCB0b2tlbnMKICAgICAgICAgICAgcmVxdWlyZShOb3RpZnkoZGVwb3NpdG8pLm5vdGlmeShtc2cuc2VuZGVyLCBfYW1vdW50KSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgLy8gSUNPIG11c3QgYmUgc3VjY2Vzc2Z1bAogICAgICAgIHJlcXVpcmUoaWNvU3VjY2Vzc2Z1bCk7CiAgICAgICAgc3VwZXIuYXBwcm92ZShfc3BlbmRlciwgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgovLwovLyBDb250cmFjdCBtYW5hZ21lbnQgZnVuY3Rpb25zCi8vCgogICAgLy8gVG8gaW5pdGlhdGUgYW4gb3duZXJzaGlwIGNoYW5nZQogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfbmV3T3duZXIpCiAgICAgICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgb25seU93bmVyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBDaGFuZ2VPd25lclRvKF9uZXdPd25lcik7CiAgICAgICAgbmV3T3duZXIgPSBfbmV3T3duZXI7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gVG8gYWNjZXB0IG93bmVyc2hpcC4gUmVxdWlyZWQgdG8gcHJvdmUgbmV3IGFkZHJlc3MgY2FuIGNhbGwgdGhlIGNvbnRyYWN0LgogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkKICAgICAgICBwdWJsaWMKICAgICAgICBub1JlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lcik7CiAgICAgICAgQ2hhbmdlZE93bmVyKG93bmVyLCBuZXdPd25lcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBDaGFuZ2UgdGhlIGFkZHJlc3Mgb2YgdGhlIGRlcG9zaXRvIGNvbnRyYWN0IGFkZHJlc3MuIFRoZSBjb250cmFjdAogICAgLy8gbXVzdCBpbXBsaW1lbnQgdGhlIGBOb3RpZnlgIGludGVyZmFjZS4KICAgIGZ1bmN0aW9uIGNoYW5nZWRlcG9zaXRvKGFkZHJlc3MgX2FkZHIpCiAgICAgICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgb25seU93bmVyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBkZXBvc2l0byA9IF9hZGRyOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBUaGUgY29udHJhY3QgY2FuIGJlIHNlbGZkZXN0cnVjdGVkIGFmdGVyIGFib3J0IGFuZCBldGhlciBiYWxhbmNlIGlzIDAuCiAgICBmdW5jdGlvbiBkZXN0cm95KCkKICAgICAgICBwdWJsaWMKICAgICAgICBub1JlZW50cnkKICAgICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICByZXF1aXJlKCFfX2Fib3J0RnVzZSk7CiAgICAgICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgPT0gMCk7CiAgICAgICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICAgIH0KICAgIAogICAgLy8gT3duZXIgY2FuIHNhbHZhZ2UgQU5ZVFlQRSBFUkMyMCB0b2tlbnMgdGhhdCBtYXkgaGF2ZSBiZWVuIHNlbnQgdG8gdGhlIGFjY291bnQgYnkgYWNjaWRlbnQgCiAgICBmdW5jdGlvbiB0cmFuc2ZlckFueUVSQzIwVG9rZW4oYWRkcmVzcyB0b2tlbkFkZHJlc3MsIHVpbnQgYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgICAgIHByZXZlbnRSZWVudHJ5CiAgICAgICAgcmV0dXJucyAoYm9vbCkgCiAgICB7CiAgICAgICAgcmVxdWlyZShFUkMyMFRva2VuKHRva2VuQWRkcmVzcykudHJhbnNmZXIob3duZXIsIGFtb3VudCkpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgoKaW50ZXJmYWNlIE5vdGlmeQp7CiAgICBldmVudCBOb3RpZmllZChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIHVpbnQgaW5kZXhlZCBfYW1vdW50KTsKICAgIAogICAgZnVuY3Rpb24gbm90aWZ5KGFkZHJlc3MgX2Zyb20sIHVpbnQgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wpOwp9CgoKY29udHJhY3QgZGVwb3NpdG9UZXN0IGlzIE5vdGlmeQp7CiAgICBhZGRyZXNzIHB1YmxpYyBkb3Q7CiAgICAKICAgIGZ1bmN0aW9uIHNldGRvdChhZGRyZXNzIF9hZGRyKSB7IGRvdCA9IF9hZGRyOyB9CiAgICAKICAgIGZ1bmN0aW9uIG5vdGlmeShhZGRyZXNzIF9mcm9tLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBkb3QpOwogICAgICAgIE5vdGlmaWVkKF9mcm9tLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ=='.
	

]
