Class {
	#name : #SRTdae1baf249964bc4b6ac98c3122f0e3e785fd279,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdae1baf249964bc4b6ac98c3122f0e3e785fd279 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgcmVxdWlyZShhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmVxdWlyZShiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIHJlcXVpcmUoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlczsKCiAgICAvKioKICAgICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAgICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAgICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIFNhZmVFUkMyMAogKiBAZGV2IFdyYXBwZXJzIGFyb3VuZCBFUkMyMCBvcGVyYXRpb25zIHRoYXQgdGhyb3cgb24gZmFpbHVyZS4KICogVG8gdXNlIHRoaXMgbGlicmFyeSB5b3UgY2FuIGFkZCBhIGB1c2luZyBTYWZlRVJDMjAgZm9yIEVSQzIwO2Agc3RhdGVtZW50IHRvIHlvdXIgY29udHJhY3QsCiAqIHdoaWNoIGFsbG93cyB5b3UgdG8gY2FsbCB0aGUgc2FmZSBvcGVyYXRpb25zIGFzIGB0b2tlbi5zYWZlVHJhbnNmZXIoLi4uKWAsIGV0Yy4KICovCmxpYnJhcnkgU2FmZUVSQzIwIHsKICAgIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlcihFUkMyMEJhc2ljIHRva2VuLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgYXNzZXJ0KHRva2VuLnRyYW5zZmVyKHRvLCB2YWx1ZSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlckZyb20oRVJDMjAgdG9rZW4sIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIGFzc2VydCh0b2tlbi50cmFuc2ZlckZyb20oZnJvbSwgdG8sIHZhbHVlKSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZUFwcHJvdmUoRVJDMjAgdG9rZW4sIGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIGFzc2VydCh0b2tlbi5hcHByb3ZlKHNwZW5kZXIsIHZhbHVlKSk7CiAgICB9Cn0KCi8qKgogKiBAdGl0bGUgVG9rZW5UaW1lbG9jawogKiBAZGV2IFRva2VuVGltZWxvY2sgaXMgYSB0b2tlbiBob2xkZXIgY29udHJhY3QgdGhhdCB3aWxsIGFsbG93IGEKICogYmVuZWZpY2lhcnkgdG8gZXh0cmFjdCB0aGUgdG9rZW5zIGFmdGVyIGEgZ2l2ZW4gcmVsZWFzZSB0aW1lCiAqLwpjb250cmFjdCBUb2tlblRpbWVsb2NrIHsKICAgIHVzaW5nIFNhZmVFUkMyMCBmb3IgRVJDMjBCYXNpYzsKCiAgICAvLyBFUkMyMCBiYXNpYyB0b2tlbiBjb250cmFjdCBiZWluZyBoZWxkCiAgICBFUkMyMEJhc2ljIHB1YmxpYyB0b2tlbjsKCiAgICAvLyBiZW5lZmljaWFyeSBvZiB0b2tlbnMgYWZ0ZXIgdGhleSBhcmUgcmVsZWFzZWQKICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwoKICAgIC8vIHRpbWVzdGFtcCB3aGVuIHRva2VuIHJlbGVhc2UgaXMgZW5hYmxlZAogICAgdWludDY0IHB1YmxpYyByZWxlYXNlVGltZTsKCiAgICBmdW5jdGlvbiBUb2tlblRpbWVsb2NrKEVSQzIwQmFzaWMgX3Rva2VuLCBhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDY0IF9yZWxlYXNlVGltZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9yZWxlYXNlVGltZSA+IHVpbnQ2NChibG9jay50aW1lc3RhbXApKTsKICAgICAgICB0b2tlbiA9IF90b2tlbjsKICAgICAgICBiZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgICAgICByZWxlYXNlVGltZSA9IF9yZWxlYXNlVGltZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBub3RpY2UgVHJhbnNmZXJzIHRva2VucyBoZWxkIGJ5IHRpbWVsb2NrIHRvIGJlbmVmaWNpYXJ5LgogICAgICovCiAgICBmdW5jdGlvbiByZWxlYXNlKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKHVpbnQ2NChibG9jay50aW1lc3RhbXApID49IHJlbGVhc2VUaW1lKTsKCiAgICAgICAgdWludDI1NiBhbW91bnQgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgcmVxdWlyZShhbW91bnQgPiAwKTsKCiAgICAgICAgdG9rZW4uc2FmZVRyYW5zZmVyKGJlbmVmaWNpYXJ5LCBhbW91bnQpOwogICAgfQp9CgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CgogICAgLyoqCiAgICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgICAqCiAgICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICAgKiByYWNlIGNvbmRpdGlvbiBpcyB0byBmaXJzdCByZWR1Y2UgdGhlIHNwZW5kZXIncyBhbGxvd2FuY2UgdG8gMCBhbmQgc2V0IHRoZSBkZXNpcmVkIHZhbHVlIGFmdGVyd2FyZHM6CiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgLyoqCiAgICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAgICovCiAgICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgICAgIH0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKfQoKY29udHJhY3QgT3duZWQgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgZnVuY3Rpb24gT3duZWQoKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KfQoKY29udHJhY3QgVG9raWFUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25lZCB7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiVG9raWFUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJUS0EiOwogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogICAgLy8vIE1heGltdW0gdG9rZW5zIHRvIGJlIGFsbG9jYXRlZC4KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IEhBUkRfQ0FQID0gNjI1MDAwMDAgKiAxMCoqdWludDI1NihkZWNpbWFscyk7CgogICAgLy8vIE1heGltdW0gdG9rZW5zIHRvIGJlIGFsbG9jYXRlZCBvbiB0aGUgc2FsZSAoNzUlIG9mIHRoZSBoYXJkIGNhcCkKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOU19TQUxFX0hBUkRfQ0FQID0gNTAwMDAwMDAgKiAxMCoqdWludDI1NihkZWNpbWFscyk7CgogICAgLy8vIEJhc2UgZXhjaGFuZ2UgcmF0ZSBpcyBzZXQgdG8gMSBFVEggPSA3MTQgVEtBLgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgQkFTRV9SQVRFID0gNzE0OwoKICAgIC8vLyBzZWNvbmRzIHNpbmNlIDAxLjAxLjE5NzAgdG8gMDQuMTIuMjAxNyAoYm90aCAwMDowMDowMCBvJ2Nsb2NrIFVUQykKICAgIC8vLyBwcmVzYWxlIHN0YXJ0IHRpbWUKICAgIHVpbnQ2NCBwcml2YXRlIGNvbnN0YW50IGRhdGUwNERlYzIwMTcgPSAxNTEyMzQ1NjAwOwoKICAgIC8vLyBwcmVzYWxlIGVuZCB0aW1lOyByb3VuZCAxIHN0YXJ0IHRpbWUKICAgIHVpbnQ2NCBwcml2YXRlIGNvbnN0YW50IGRhdGUwMUphbjIwMTggPSAxNTE0NzY0ODAwOwoKICAgIC8vLyByb3VuZCAxIGVuZCB0aW1lOyByb3VuZCAyIHN0YXJ0IHRpbWUKICAgIHVpbnQ2NCBwcml2YXRlIGNvbnN0YW50IGRhdGUwMUZlYjIwMTggPSAxNTE3NDQzMjAwOwoKICAgIC8vLyByb3VuZCAyIGVuZCB0aW1lOyByb3VuZCAzIHN0YXJ0IHRpbWUKICAgIHVpbnQ2NCBwcml2YXRlIGNvbnN0YW50IGRhdGUxNUZlYjIwMTggPSAxNTE4NjUyODAwOwoKICAgIC8vLyByb3VuZCAzIGVuZCB0aW1lOyByb3VuZCA0IHN0YXJ0IHRpbWUKICAgIHVpbnQ2NCBwcml2YXRlIGNvbnN0YW50IGRhdGUwMU1hcjIwMTggPSAxNTE5ODYyNDAwOwoKICAgIC8vLyByb3VuZCA0IGVuZCB0aW1lOyBjbG9zaW5nIHRva2VuIHNhbGUKICAgIHVpbnQ2NCBwcml2YXRlIGNvbnN0YW50IGRhdGUxNU1hcjIwMTggPSAxNTIxMDcyMDAwOwoKICAgIC8vLyB0ZWFtIHRva2VucyBhcmUgbG9ja2VkIHVudGlsIHRoaXMgZGF0ZSAoMDEuMDEuMjAxOSkKICAgIHVpbnQ2NCBwcml2YXRlIGNvbnN0YW50IGRhdGUwMUphbjIwMTkgPSAxNTQ2MzAwODAwOwoKICAgIC8vLyB0b2tlbiB0cmFkaW5nIG9wZW5pbmcgdGltZSAoMDEuMDUuMjAxOCkKICAgIHVpbnQ2NCBwcml2YXRlIGNvbnN0YW50IGRhdGUwMU1heTIwMTggPSAxNTI1MjE5MTk5OwoKICAgIC8vLyBubyB0b2tlbnMgY2FuIGJlIGV2ZXIgaXNzdWVkIHdoZW4gdGhpcyBpcyBzZXQgdG8gInRydWUiCiAgICBib29sIHB1YmxpYyB0b2tlblNhbGVDbG9zZWQgPSBmYWxzZTsKCiAgICAvLy8gY29udHJhY3QgdG8gYmUgY2FsbGVkIHRvIHJlbGVhc2UgdGhlIFRva2lhIHRlYW0gdG9rZW5zCiAgICBhZGRyZXNzIHB1YmxpYyB0aW1lbG9ja0NvbnRyYWN0QWRkcmVzczsKCiAgICAvLy8gSXNzdWUgZXZlbnQgaW5kZXggc3RhcnRpbmcgZnJvbSAwLgogICAgdWludDY0IHB1YmxpYyBpc3N1ZUluZGV4ID0gMDsKCiAgICAvLy8gRW1pdHRlZCBmb3IgZWFjaCBzdWN1ZXNzZnVsIHRva2VuIHB1cmNoYXNlLgogICAgZXZlbnQgSXNzdWUodWludDY0IGlzc3VlSW5kZXgsIGFkZHJlc3MgYWRkciwgdWludDI1NiB0b2tlbkFtb3VudCk7CgogICAgbW9kaWZpZXIgaW5Qcm9ncmVzcyB7CiAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSA8IFRPS0VOU19TQUxFX0hBUkRfQ0FQCiAgICAgICAgICAgICYmICF0b2tlblNhbGVDbG9zZWQpOwogICAgICAgIF87CiAgICB9CgogICAgLy8vIEFsbG93IHRoZSBjbG9zaW5nIHRvIGhhcHBlbiBvbmx5IG9uY2UKICAgIG1vZGlmaWVyIGJlZm9yZUVuZCB7CiAgICAgICAgcmVxdWlyZSghdG9rZW5TYWxlQ2xvc2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLyBSZXF1aXJlIHRoYXQgdGhlIGVuZCBvZiB0aGUgc2FsZSBoYXMgcGFzc2VkICh0aW1lIGlzIDAxIE1heSAyMDE4IG9yIGxhdGVyKQogICAgbW9kaWZpZXIgdHJhZGluZ09wZW4gewogICAgICAgIHJlcXVpcmUodWludDY0KGJsb2NrLnRpbWVzdGFtcCkgPiBkYXRlMDFNYXkyMDE4KTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIFRva2lhVG9rZW4oKSBwdWJsaWMgewogICAgfQoKICAgIC8vLyBAZGV2IFRoaXMgZGVmYXVsdCBmdW5jdGlvbiBhbGxvd3MgdG9rZW4gdG8gYmUgcHVyY2hhc2VkIGJ5IGRpcmVjdGx5CiAgICAvLy8gc2VuZGluZyBldGhlciB0byB0aGlzIHNtYXJ0IGNvbnRyYWN0LgogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgICAgIHB1cmNoYXNlVG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vLyBAZGV2IElzc3VlIHRva2VuIGJhc2VkIG9uIEV0aGVyIHJlY2VpdmVkLgogICAgLy8vIEBwYXJhbSBfYmVuZWZpY2lhcnkgQWRkcmVzcyB0aGF0IG5ld2x5IGlzc3VlZCB0b2tlbiB3aWxsIGJlIHNlbnQgdG8uCiAgICBmdW5jdGlvbiBwdXJjaGFzZVRva2VucyhhZGRyZXNzIF9iZW5lZmljaWFyeSkgcHVibGljIHBheWFibGUgaW5Qcm9ncmVzcyB7CiAgICAgICAgLy8gb25seSBhY2NlcHQgYSBtaW5pbXVtIGFtb3VudCBvZiBFVEg/CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gMC4wMSBldGhlcik7CgogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gY29tcHV0ZVRva2VuQW1vdW50KG1zZy52YWx1ZSk7CiAgICAgICAgZG9Jc3N1ZVRva2VucyhfYmVuZWZpY2lhcnksIHRva2Vucyk7CgogICAgICAgIC8vLyBmb3J3YXJkIHRoZSByYWlzZWQgZnVuZHMgdG8gdGhlIGNvbnRyYWN0IGNyZWF0b3IKICAgICAgICBvd25lci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfQoKICAgIC8vLyBAZGV2IEJhdGNoIGlzc3VlIHRva2VucyBvbiB0aGUgcHJlc2FsZQogICAgLy8vIEBwYXJhbSBfYWRkcmVzc2VzIGFkZHJlc3NlcyB0aGF0IHRoZSBwcmVzYWxlIHRva2VucyB3aWxsIGJlIHNlbnQgdG8uCiAgICAvLy8gQHBhcmFtIF9hZGRyZXNzZXMgdGhlIGFtb3VudHMgb2YgdG9rZW5zLCB3aXRoIGRlY2ltYWxzIGV4cGFuZGVkIChmdWxsKS4KICAgIGZ1bmN0aW9uIGlzc3VlVG9rZW5zTXVsdGkoYWRkcmVzc1tdIF9hZGRyZXNzZXMsIHVpbnQyNTZbXSBfdG9rZW5zKSBwdWJsaWMgb25seU93bmVyIGluUHJvZ3Jlc3MgewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3Nlcy5sZW5ndGggPT0gX3Rva2Vucy5sZW5ndGgpOwogICAgICAgIHJlcXVpcmUoX2FkZHJlc3Nlcy5sZW5ndGggPD0gMTAwKTsKCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX3Rva2Vucy5sZW5ndGg7IGkgPSBpLmFkZCgxKSkgewogICAgICAgICAgICBkb0lzc3VlVG9rZW5zKF9hZGRyZXNzZXNbaV0sIF90b2tlbnNbaV0ubXVsKDEwKip1aW50MjU2KGRlY2ltYWxzKSkpOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBJc3N1ZSB0b2tlbnMgZm9yIGEgc2luZ2xlIGJ1eWVyIG9uIHRoZSBwcmVzYWxlCiAgICAvLy8gQHBhcmFtIF9iZW5lZmljaWFyeSBhZGRyZXNzZXMgdGhhdCB0aGUgcHJlc2FsZSB0b2tlbnMgd2lsbCBiZSBzZW50IHRvLgogICAgLy8vIEBwYXJhbSBfdG9rZW5zIHRoZSBhbW91bnQgb2YgdG9rZW5zLCB3aXRoIGRlY2ltYWxzIGV4cGFuZGVkIChmdWxsKS4KICAgIGZ1bmN0aW9uIGlzc3VlVG9rZW5zKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF90b2tlbnMpIHB1YmxpYyBvbmx5T3duZXIgaW5Qcm9ncmVzcyB7CiAgICAgICAgZG9Jc3N1ZVRva2VucyhfYmVuZWZpY2lhcnksIF90b2tlbnMubXVsKDEwKip1aW50MjU2KGRlY2ltYWxzKSkpOwogICAgfQoKICAgIC8vLyBAZGV2IGlzc3VlIHRva2VucyBmb3IgYSBzaW5nbGUgYnV5ZXIKICAgIC8vLyBAcGFyYW0gX2JlbmVmaWNpYXJ5IGFkZHJlc3NlcyB0aGF0IHRoZSB0b2tlbnMgd2lsbCBiZSBzZW50IHRvLgogICAgLy8vIEBwYXJhbSBfdG9rZW5zIHRoZSBhbW91bnQgb2YgdG9rZW5zLCB3aXRoIGRlY2ltYWxzIGV4cGFuZGVkIChmdWxsKS4KICAgIGZ1bmN0aW9uIGRvSXNzdWVUb2tlbnMoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQyNTYgX3Rva2VucykgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICAvLyBjb21wdXRlIHdpdGhvdXQgYWN0dWFsbHkgaW5jcmVhc2luZyBpdAogICAgICAgIHVpbnQyNTYgaW5jcmVhc2VkVG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX3Rva2Vucyk7CiAgICAgICAgLy8gcm9sbCBiYWNrIGlmIGhhcmQgY2FwIHJlYWNoZWQKICAgICAgICByZXF1aXJlKGluY3JlYXNlZFRvdGFsU3VwcGx5IDw9IFRPS0VOU19TQUxFX0hBUkRfQ0FQKTsKCiAgICAgICAgLy8gaW5jcmVhc2UgdG9rZW4gdG90YWwgc3VwcGx5CiAgICAgICAgdG90YWxTdXBwbHkgPSBpbmNyZWFzZWRUb3RhbFN1cHBseTsKICAgICAgICAvLyB1cGRhdGUgdGhlIGJlbmVmaWNpYXJ5IGJhbGFuY2UgdG8gbnVtYmVyIG9mIHRva2VucyBzZW50CiAgICAgICAgYmFsYW5jZXNbX2JlbmVmaWNpYXJ5XSA9IGJhbGFuY2VzW19iZW5lZmljaWFyeV0uYWRkKF90b2tlbnMpOwoKICAgICAgICAvLyBldmVudCBpcyBmaXJlZCB3aGVuIHRva2VucyBpc3N1ZWQKICAgICAgICBJc3N1ZSgKICAgICAgICAgICAgaXNzdWVJbmRleCsrLAogICAgICAgICAgICBfYmVuZWZpY2lhcnksCiAgICAgICAgICAgIF90b2tlbnMKICAgICAgICApOwogICAgfQoKICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIGN1cnJlbnQgcHJpY2UuCiAgICBmdW5jdGlvbiBwcmljZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG9rZW5zKSB7CiAgICAgICAgcmV0dXJuIGNvbXB1dGVUb2tlbkFtb3VudCgxIGV0aGVyKTsKICAgIH0KCiAgICAvLy8gQGRldiBDb21wdXRlIHRoZSBhbW91bnQgb2YgVEtBIHRva2VuIHRoYXQgY2FuIGJlIHB1cmNoYXNlZC4KICAgIC8vLyBAcGFyYW0gZXRoQW1vdW50IEFtb3VudCBvZiBFdGhlciB0byBwdXJjaGFzZSBUS0EuCiAgICAvLy8gQHJldHVybiBBbW91bnQgb2YgVEtBIHRva2VuIHRvIHB1cmNoYXNlCiAgICBmdW5jdGlvbiBjb21wdXRlVG9rZW5BbW91bnQodWludDI1NiBldGhBbW91bnQpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiB0b2tlbnMpIHsKICAgICAgICB1aW50MjU2IHRva2VuQmFzZSA9IGV0aEFtb3VudC5tdWwoQkFTRV9SQVRFKTsKICAgICAgICB1aW50OFs1XSBtZW1vcnkgcm91bmREaXNjb3VudFBlcmNlbnRhZ2VzID0gWzQ3LCAzNSwgMjUsIDE1LCA1XTsKCiAgICAgICAgdWludDggcm91bmREaXNjb3VudFBlcmNlbnRhZ2UgPSByb3VuZERpc2NvdW50UGVyY2VudGFnZXNbY3VycmVudFJvdW5kSW5kZXgoKV07CiAgICAgICAgdWludDggYW1vdW50RGlzY291bnRQZXJjZW50YWdlID0gZ2V0QW1vdW50RGlzY291bnRQZXJjZW50YWdlKHRva2VuQmFzZSk7CgogICAgICAgIHRva2VucyA9IHRva2VuQmFzZS5tdWwoMTAwKS5kaXYoMTAwIC0gKHJvdW5kRGlzY291bnRQZXJjZW50YWdlICsgYW1vdW50RGlzY291bnRQZXJjZW50YWdlKSk7CiAgICB9CgogICAgLy8vIEBkZXYgQ29tcHV0ZSB0aGUgYWRkaXRpb25hbCBkaXNjb3VudCBmb3IgdGhlIHB1cmNoYWVkIGFtb3VudCBvZiBUS0EKICAgIC8vLyBAcGFyYW0gdG9rZW5CYXNlIHRoZSBiYXNlIHRva2VucyBhbW91bnQgY29tcHV0ZWQgb25seSBhZ2FpbnN0IHRoZSBiYXNlIHJhdGUKICAgIC8vLyBAcmV0dXJuIGludGVnZXIgcmVwcmVzZW50aW5nIHRoZSBwZXJjZW50YWdlIGRpc2NvdW50CiAgICBmdW5jdGlvbiBnZXRBbW91bnREaXNjb3VudFBlcmNlbnRhZ2UodWludDI1NiB0b2tlbkJhc2UpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDgpIHsKICAgICAgICBpZih0b2tlbkJhc2UgPj0gMTUwMCAqIDEwKip1aW50MjU2KGRlY2ltYWxzKSkgcmV0dXJuIDk7CiAgICAgICAgaWYodG9rZW5CYXNlID49IDEwMDAgKiAxMCoqdWludDI1NihkZWNpbWFscykpIHJldHVybiA1OwogICAgICAgIGlmKHRva2VuQmFzZSA+PSA1MDAgKiAxMCoqdWludDI1NihkZWNpbWFscykpIHJldHVybiAzOwogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIC8vLyBAZGV2IERldGVybWluZSB0aGUgY3VycmVudCBzYWxlIHJvdW5kCiAgICAvLy8gQHJldHVybiBpbnRlZ2VyIHJlcHJlc2VudGluZyB0aGUgaW5kZXggb2YgdGhlIGN1cnJlbnQgc2FsZSByb3VuZAogICAgZnVuY3Rpb24gY3VycmVudFJvdW5kSW5kZXgoKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQ4IHJvdW5kTnVtKSB7CiAgICAgICAgcm91bmROdW0gPSBjdXJyZW50Um91bmRJbmRleEJ5RGF0ZSgpOwoKICAgICAgICAvLy8gdG9rZW4gY2FwcyBmb3IgZWFjaCByb3VuZAogICAgICAgIHVpbnQyNTZbNV0gbWVtb3J5IHJvdW5kQ2FwcyA9IFsKICAgICAgICAgICAgMTAwMDAwMDAgKiAxMCoqdWludDI1NihkZWNpbWFscyksCiAgICAgICAgICAgIDIyNTAwMDAwICogMTAqKnVpbnQyNTYoZGVjaW1hbHMpLCAvLyArIHJvdW5kIDEKICAgICAgICAgICAgMzUwMDAwMDAgKiAxMCoqdWludDI1NihkZWNpbWFscyksIC8vICsgcm91bmQgMgogICAgICAgICAgICA0MDAwMDAwMCAqIDEwKip1aW50MjU2KGRlY2ltYWxzKSwgLy8gKyByb3VuZCAzCiAgICAgICAgICAgIDUwMDAwMDAwICogMTAqKnVpbnQyNTYoZGVjaW1hbHMpICAvLyArIHJvdW5kIDQKICAgICAgICBdOwoKICAgICAgICAvLy8gcm91bmQgZGV0ZXJtaW5lZCBieSBjb25qdW5jdGlvbiBvZiBib3RoIHRpbWUgYW5kIHRvdGFsIHNvbGQgdG9rZW5zCiAgICAgICAgd2hpbGUocm91bmROdW0gPCA0ICYmIHRvdGFsU3VwcGx5ID4gcm91bmRDYXBzW3JvdW5kTnVtXSkgewogICAgICAgICAgICByb3VuZE51bSsrOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBEZXRlcm1pbmUgdGhlIGN1cnJlbnQgc2FsZSB0aWVyLgogICAgLy8vIEByZXR1cm4gdGhlIGluZGV4IG9mIHRoZSBjdXJyZW50IHNhbGUgdGllciBieSBkYXRlLgogICAgZnVuY3Rpb24gY3VycmVudFJvdW5kSW5kZXhCeURhdGUoKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQ4IHJvdW5kTnVtKSB7CiAgICAgICAgdWludDY0IF9ub3cgPSB1aW50NjQoYmxvY2sudGltZXN0YW1wKTsKICAgICAgICByZXF1aXJlKF9ub3cgPD0gZGF0ZTE1TWFyMjAxOCk7CgogICAgICAgIHJvdW5kTnVtID0gMDsKICAgICAgICBpZihfbm93ID4gZGF0ZTAxTWFyMjAxOCkgcm91bmROdW0gPSA0OwogICAgICAgIGlmKF9ub3cgPiBkYXRlMTVGZWIyMDE4KSByb3VuZE51bSA9IDM7CiAgICAgICAgaWYoX25vdyA+IGRhdGUwMUZlYjIwMTgpIHJvdW5kTnVtID0gMjsKICAgICAgICBpZihfbm93ID4gZGF0ZTAxSmFuMjAxOCkgcm91bmROdW0gPSAxOwogICAgICAgIHJldHVybiByb3VuZE51bTsKICAgIH0KCiAgICAvLy8gQGRldiBDbG9zZXMgdGhlIHNhbGUsIGlzc3VlcyB0aGUgdGVhbSB0b2tlbnMgYW5kIGJ1cm5zIHRoZSB1bnNvbGQKICAgIGZ1bmN0aW9uIGNsb3NlKCkgcHVibGljIG9ubHlPd25lciBiZWZvcmVFbmQgewogICAgICAgIC8vLyB0ZWFtIHRva2VucyBhcmUgZXF1YWwgdG8gMjUlIG9mIHRoZSBzb2xkIHRva2VucwogICAgICAgIHVpbnQyNTYgdGVhbVRva2VucyA9IHRvdGFsU3VwcGx5Lm11bCgyNSkuZGl2KDEwMCk7CgogICAgICAgIC8vLyBjaGVjayBmb3Igcm91bmRpbmcgZXJyb3JzIHdoZW4gY2FwIGlzIHJlYWNoZWQKICAgICAgICBpZih0b3RhbFN1cHBseS5hZGQodGVhbVRva2VucykgPiBIQVJEX0NBUCkgewogICAgICAgICAgICB0ZWFtVG9rZW5zID0gSEFSRF9DQVAuc3ViKHRvdGFsU3VwcGx5KTsKICAgICAgICB9CgogICAgICAgIC8vLyB0ZWFtIHRva2VucyBhcmUgbG9ja2VkIHVudGlsIHRoaXMgZGF0ZSAoMDEuMDEuMjAxOSkKICAgICAgICBUb2tlblRpbWVsb2NrIGxvY2tlZFRlYW1Ub2tlbnMgPSBuZXcgVG9rZW5UaW1lbG9jayh0aGlzLCBvd25lciwgZGF0ZTAxSmFuMjAxOSk7CiAgICAgICAgdGltZWxvY2tDb250cmFjdEFkZHJlc3MgPSBhZGRyZXNzKGxvY2tlZFRlYW1Ub2tlbnMpOwogICAgICAgIGJhbGFuY2VzW3RpbWVsb2NrQ29udHJhY3RBZGRyZXNzXSA9IGJhbGFuY2VzW3RpbWVsb2NrQ29udHJhY3RBZGRyZXNzXS5hZGQodGVhbVRva2Vucyk7CiAgICAgICAgLy8vIGluY3JlYXNlIHRva2VuIHRvdGFsIHN1cHBseQogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKHRlYW1Ub2tlbnMpOwogICAgICAgIC8vLyBmaXJlIGV2ZW50IHdoZW4gdG9rZW5zIGlzc3VlZAogICAgICAgIElzc3VlKAogICAgICAgICAgICBpc3N1ZUluZGV4KyssCiAgICAgICAgICAgIHRpbWVsb2NrQ29udHJhY3RBZGRyZXNzLAogICAgICAgICAgICB0ZWFtVG9rZW5zCiAgICAgICAgKTsKCiAgICAgICAgLy8vIGJ1cm4gdGhlIHVuYWxsb2NhdGVkIHRva2VucyAtIG5vIG1vcmUgdG9rZW5zIGNhbiBiZSBpc3N1ZWQgYWZ0ZXIgdGhpcyBsaW5lCiAgICAgICAgdG9rZW5TYWxlQ2xvc2VkID0gdHJ1ZTsKCiAgICAgICAgLy8vIGZvcndhcmQgdGhlIHJhaXNlZCBmdW5kcyB0byB0aGUgY29udHJhY3QgY3JlYXRvcgogICAgICAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgLy8vIFRyYW5zZmVyIGxpbWl0ZWQgYnkgdGhlIHRyYWRpbmdPcGVuIG1vZGlmaWVyICh0aW1lIGlzIDAxIE1heSAyMDE4IG9yIGxhdGVyKQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHRyYWRpbmdPcGVuIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgLy8vIFRyYW5zZmVyIGxpbWl0ZWQgYnkgdGhlIHRyYWRpbmdPcGVuIG1vZGlmaWVyICh0aW1lIGlzIDAxIE1heSAyMDE4IG9yIGxhdGVyKQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgdHJhZGluZ09wZW4gcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICB9Cn0='.
	

]
