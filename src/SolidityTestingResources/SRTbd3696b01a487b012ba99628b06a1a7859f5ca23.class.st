Class {
	#name : #SRTbd3696b01a487b012ba99628b06a1a7859f5ca23,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbd3696b01a487b012ba99628b06a1a7859f5ca23 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQ29pbkNyb3dkIElDTy4gTW9yZSBpbmZvIHd3dy5jb2luY3Jvd2QuaXQgCiAqLwoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgaW50ZXJuYWwgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KfQoKY29udHJhY3QgdG9rZW5JbnRlcmZhY2UgewoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwp9Cgpjb250cmFjdCBBbWJhc3NhZG9yIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgQ29pbkNyb3dkSUNPIGljb0NvbnRyYWN0OwogICAgdWludDI1NiBwdWJsaWMgc3RhcnRSQzsKICAgIHVpbnQyNTYgcHVibGljIGVuZFJDOwogICAgYWRkcmVzcyBpbnRlcm5hbCBjb250cmFjdE93bmVyOyAKICAgIAogICAgdWludDI1NiBwdWJsaWMgc29sZFRva2Vuc1dpdGhvdXRCb251czsgLy8gd2VpIG9mIFhDQyBzb2xkIHRva2VuIHdpdGhvdXQgYm9udXNlcwoJZnVuY3Rpb24gZXVyb1JhaXNlZFJjKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2IGV1cm8pIHsKICAgICAgICByZXR1cm4gaWNvQ29udHJhY3QuZXVyb1JhaXNlZChzb2xkVG9rZW5zV2l0aG91dEJvbnVzKTsKICAgIH0KICAgIAogICAgdWludDI1NltdIHB1YmxpYyBldXJvVGhyZXNob2xkOyAvLyBhcnJheSBvZiBldXJvKGspIHRocmVzaG9sZCByZWFjaGVkIC0gMTAwSyA9IDEwMC4wMDDigqwKICAgIHVpbnQyNTZbXSBwdWJsaWMgYm9udXNUaHJlc2hvbGQ7IC8vIGFycmF5IG9mIGJvbnVzIG9mIGVhY2ggZXVyb1RocmVzaG9sZCByZWFjaGVkIC0gMjAlID0gMjAwMAogICAgCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VVc2VyOyAvLyBhZGRyZXNzID0+IHRva2VuIGFtb3VudAoKICAgIGZ1bmN0aW9uIEFtYmFzc2Fkb3IoYWRkcmVzcyBfaWNvQ29udHJhY3QsIGFkZHJlc3MgX2FtYmFzc2Fkb3JBZGRyLCB1aW50MjU2W10gX2V1cm9UaHJlc2hvbGQsIHVpbnQyNTZbXSBfYm9udXNUaHJlc2hvbGQsIHVpbnQyNTYgX3N0YXJ0UkMgLCB1aW50MjU2IF9lbmRSQyApIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSAoIF9pY29Db250cmFjdCAhPSAwICk7CiAgICAgICAgcmVxdWlyZSAoIF9hbWJhc3NhZG9yQWRkciAhPSAwICk7CiAgICAgICAgcmVxdWlyZSAoIF9ldXJvVGhyZXNob2xkLmxlbmd0aCAhPSAwICk7CiAgICAgICAgcmVxdWlyZSAoIF9ldXJvVGhyZXNob2xkLmxlbmd0aCA9PSBfYm9udXNUaHJlc2hvbGQubGVuZ3RoICk7CiAgICAgICAgCiAgICAgICAgaWNvQ29udHJhY3QgPSBDb2luQ3Jvd2RJQ08oX2ljb0NvbnRyYWN0KTsKICAgICAgICBjb250cmFjdE93bmVyID0gX2ljb0NvbnRyYWN0OwogICAgICAgIAogICAgICAgIGljb0NvbnRyYWN0LmFkZE1lQnlSQyhfYW1iYXNzYWRvckFkZHIpOwogICAgICAgIAogICAgICAgIGJvbnVzVGhyZXNob2xkID0gX2JvbnVzVGhyZXNob2xkOwogICAgICAgIGV1cm9UaHJlc2hvbGQgPSBfZXVyb1RocmVzaG9sZDsKICAgICAgICAKICAgICAgICBzb2xkVG9rZW5zV2l0aG91dEJvbnVzID0gMDsKICAgICAgICAKICAgICAgICBzZXRUaW1lUkMoIF9zdGFydFJDLCBfZW5kUkMgKTsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgb25seUljb0NvbnRyYWN0KCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cmFjdE93bmVyKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRUaW1lUkModWludDI1NiBfc3RhcnRSQywgdWludDI1NiBfZW5kUkMgKSBpbnRlcm5hbCB7CiAgICAgICAgaWYoIF9zdGFydFJDID09IDAgKSB7CiAgICAgICAgICAgIHN0YXJ0UkMgPSBpY29Db250cmFjdC5zdGFydFRpbWUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdGFydFJDID0gX3N0YXJ0UkM7CiAgICAgICAgfQogICAgICAgIGlmKCBfZW5kUkMgPT0gMCApIHsKICAgICAgICAgICAgZW5kUkMgPSBpY29Db250cmFjdC5lbmRUaW1lKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZW5kUkMgPSBfZW5kUkM7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKHVpbnQyNTYgX25ld1N0YXJ0LCB1aW50MjU2IF9uZXdFbmQpIHB1YmxpYyBvbmx5SWNvQ29udHJhY3QgewogICAgICAgIGlmICggX25ld1N0YXJ0ICE9IDAgKSBzdGFydFJDID0gX25ld1N0YXJ0OwogICAgICAgIGlmICggX25ld0VuZCAhPSAwICkgZW5kUkMgPSBfbmV3RW5kOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKCBub3cgPiBzdGFydFJDICk7CiAgICAgICAgaWYoIG5vdyA8IGVuZFJDICkgewogICAgICAgICAgICB1aW50MjU2IHRva2VuQW1vdW50ID0gaWNvQ29udHJhY3QuYnV5LnZhbHVlKG1zZy52YWx1ZSkobXNnLnNlbmRlcik7CiAgICAgICAgICAgIGJhbGFuY2VVc2VyW21zZy5zZW5kZXJdID0gYmFsYW5jZVVzZXJbbXNnLnNlbmRlcl0uYWRkKHRva2VuQW1vdW50KTsKICAgICAgICAgICAgc29sZFRva2Vuc1dpdGhvdXRCb251cyA9IHNvbGRUb2tlbnNXaXRob3V0Qm9udXMuYWRkKHRva2VuQW1vdW50KTsKICAgICAgICB9IGVsc2UgeyAvL2NsYWltIHByZW1pdW0gYm9udXMgbG9naWMKICAgICAgICAgICAgcmVxdWlyZSggYmFsYW5jZVVzZXJbbXNnLnNlbmRlcl0gPiAwICk7CiAgICAgICAgICAgIHVpbnQyNTYgYm9udXNBcHBsaWVkID0gMDsKICAgICAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgZXVyb1RocmVzaG9sZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKCBpY29Db250cmFjdC5ldXJvUmFpc2VkKHNvbGRUb2tlbnNXaXRob3V0Qm9udXMpLmRpdigxMDAwKSA+IGV1cm9UaHJlc2hvbGRbaV0gKSB7CiAgICAgICAgICAgICAgICAgICAgYm9udXNBcHBsaWVkID0gYm9udXNUaHJlc2hvbGRbaV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gICAgCiAgICAgICAgICAgIHJlcXVpcmUoIGJvbnVzQXBwbGllZCA+IDAgKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHVpbnQyNTYgYWRkVG9rZW5BbW91bnQgPSBiYWxhbmNlVXNlclttc2cuc2VuZGVyXS5tdWwoIGJvbnVzQXBwbGllZCApLmRpdigxMCoqMik7CiAgICAgICAgICAgIGJhbGFuY2VVc2VyW21zZy5zZW5kZXJdID0gMDsgCiAgICAgICAgICAgIAogICAgICAgICAgICBpY29Db250cmFjdC5jbGFpbVByZW1pdW0obXNnLnNlbmRlciwgYWRkVG9rZW5BbW91bnQpOwogICAgICAgICAgICBpZiggbXNnLnZhbHVlID4gMCApIG1zZy5zZW5kZXIudHJhbnNmZXIobXNnLnZhbHVlKTsgLy8gZ2l2ZSBiYWNrIGV0aCAKICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IENvaW5Dcm93ZElDTyBpcyBPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgdG9rZW5JbnRlcmZhY2UgcHVibGljIHRva2VuQ29udHJhY3Q7CiAgICAKCXVpbnQyNTYgcHVibGljIGRlY2ltYWxzID0gMTg7CiAgICB1aW50MjU2IHB1YmxpYyB0b2tlblZhbHVlOyAgLy8gMSBYQ0MgaW4gd2VpCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBjZW50VG9rZW4gPSAyMDsgLy8gZXVybyBjZW50cyB2YWx1ZSBvZiAxIHRva2VuIAogICAgCiAgICBmdW5jdGlvbiBldXJvUmFpc2VkKHVpbnQyNTYgX3dlaVRva2VucykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgeyAvLyBjb252ZXJ0aW9uIG9mIHNvbGQgdG9rZW4gaW4gZXVybyByYWlzZWQgaW4gd2VpCiAgICAgICAgcmV0dXJuIF93ZWlUb2tlbnMubXVsKGNlbnRUb2tlbikuZGl2KDEwMCkuZGl2KDEwKipkZWNpbWFscyk7CiAgICB9CiAgICAKICAgIHVpbnQyNTYgcHVibGljIGVuZFRpbWU7ICAvLyBzZWNvbmRzIGZyb20gMTk3MC0wMS0wMVQwMDowMDowMFoKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZTsgIC8vIHNlY29uZHMgZnJvbSAxOTcwLTAxLTAxVDAwOjAwOjAwWgogICAgdWludDI1NiBpbnRlcm5hbCBjb25zdGFudCB3ZWVrSW5TZWNvbmRzID0gNjA0ODAwOyAvLyBzZWNvbmRzIGluIGEgd2VlawogICAgCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFNvbGRUb2tlbnNXaXRoQm9udXM7IC8vIHRvdGFsIHdlaSBvZiBYQ0MgZGlzdHJpYnVpdGVkIGZyb20gdGhpcyBJQ08KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU29sZFRva2Vuc1dpdGhvdXRCb251czsgLy8gdG90YWwgd2VpIG9mIFhDQyBkaXN0cmlidWl0ZWQgZnJvbSB0aGlzIElDTyB3aXRob3V0IGJvbnVzCglmdW5jdGlvbiBldXJvUmFpc2VkSUNPKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2IGV1cm8pIHsKICAgICAgICByZXR1cm4gZXVyb1JhaXNlZCh0b3RhbFNvbGRUb2tlbnNXaXRob3V0Qm9udXMpOwogICAgfQoJCiAgICB1aW50MjU2IHB1YmxpYyByZW1haW5pbmdUb2tlbnM7IC8vIHRvdGFsIHdlaSBvZiBYQ0MgcmVtYWluaW5nICh3aXRob3V0IGJvbnVzZXMpCgogICAgbWFwcGluZyhhZGRyZXNzID0+IGFkZHJlc3MpIHB1YmxpYyBhbWJhc3NhZG9yQWRkcmVzc09mOyAvLyBhbWJhc3NhZG9yQ29udHJhY3QgPT4gYW1iYXNzYWRvckFkZHJlc3MKCgogICAgZnVuY3Rpb24gQ29pbkNyb3dkSUNPKGFkZHJlc3MgX3Rva2VuQWRkcmVzcywgdWludDI1NiBfdG9rZW5WYWx1ZSwgdWludDI1NiBfc3RhcnRUaW1lKSBwdWJsaWMgewogICAgICAgIHRva2VuQ29udHJhY3QgPSB0b2tlbkludGVyZmFjZShfdG9rZW5BZGRyZXNzKTsKICAgICAgICB0b2tlblZhbHVlID0gX3Rva2VuVmFsdWU7CiAgICAgICAgc3RhcnRJQ08oX3N0YXJ0VGltZSk7IAogICAgICAgIHRvdGFsU29sZFRva2Vuc1dpdGhCb251cyA9IDA7CiAgICAgICAgdG90YWxTb2xkVG9rZW5zV2l0aG91dEJvbnVzID0gMDsKICAgICAgICByZW1haW5pbmdUb2tlbnMgPSAyNDUwMDAwMCAgKiAxMCAqKiBkZWNpbWFsczsgLy8gMjQuNTAwLjAwMCAqIDAuMjDigqwgPSA0LjkwMC4wMDDigqwgQ0FQUEVECiAgICB9CgogICAgYWRkcmVzcyBwdWJsaWMgdXBkYXRlcjsgIC8vIGFjY291bnQgaW4gY2hhcmdlIG9mIHVwZGF0aW5nIHRoZSB0b2tlbiB2YWx1ZQogICAgZXZlbnQgVXBkYXRlVmFsdWUodWludDI1NiBuZXdWYWx1ZSk7CgogICAgZnVuY3Rpb24gdXBkYXRlVmFsdWUodWludDI1NiBuZXdWYWx1ZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gdXBkYXRlciB8fCBtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICB0b2tlblZhbHVlID0gbmV3VmFsdWU7CiAgICAgICAgVXBkYXRlVmFsdWUobmV3VmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZVVwZGF0ZXIoYWRkcmVzcyBuZXdVcGRhdGVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB1cGRhdGVyID0gbmV3VXBkYXRlcjsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKHVpbnQyNTYgX25ld1N0YXJ0LCB1aW50MjU2IF9uZXdFbmQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGlmICggX25ld1N0YXJ0ICE9IDAgKSBzdGFydFRpbWUgPSBfbmV3U3RhcnQ7CiAgICAgICAgaWYgKCBfbmV3RW5kICE9IDAgKSBlbmRUaW1lID0gX25ld0VuZDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdXBkYXRlVGltZVJDKGFkZHJlc3MgX3JjQ29udHJhY3QsIHVpbnQyNTYgX25ld1N0YXJ0LCB1aW50MjU2IF9uZXdFbmQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIEFtYmFzc2Fkb3IoX3JjQ29udHJhY3QpLnVwZGF0ZVRpbWUoIF9uZXdTdGFydCwgX25ld0VuZCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHN0YXJ0SUNPKHVpbnQyNTYgX3N0YXJ0VGltZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaWYoX3N0YXJ0VGltZSA9PSAwICkgewogICAgICAgICAgICBzdGFydFRpbWUgPSBub3c7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RhcnRUaW1lID0gX3N0YXJ0VGltZTsKICAgICAgICB9CiAgICAgICAgZW5kVGltZSA9IHN0YXJ0VGltZSArIDEyKndlZWtJblNlY29uZHM7CiAgICB9CiAgICAKICAgIGV2ZW50IEJ1eShhZGRyZXNzIGJ1eWVyLCB1aW50MjU2IHZhbHVlLCBhZGRyZXNzIGluZGV4ZWQgYW1iYXNzYWRvcik7CgogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgX2J1eWVyKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICByZXF1aXJlKG5vdyA8IGVuZFRpbWUpOyAvLyBjaGVjayBpZiBlbmRlZAogICAgICAgIHJlcXVpcmUoIHJlbWFpbmluZ1Rva2VucyA+IDAgKTsgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSByZW1haW5pbmcgdG9rZW5zIGV4Y2x1ZGluZyBib251c2VzCiAgICAgICAgCiAgICAgICAgcmVxdWlyZSggdG9rZW5Db250cmFjdC5iYWxhbmNlT2YodGhpcykgPiByZW1haW5pbmdUb2tlbnMpOyAvLyBzaG91bGQgaGF2ZSBlbm91Z2ggYmFsYW5jZQogICAgICAgIAogICAgICAgIHVpbnQyNTYgb25lWENDID0gMTAgKiogZGVjaW1hbHM7CiAgICAgICAgdWludDI1NiB0b2tlbkFtb3VudCA9IG1zZy52YWx1ZS5tdWwob25lWENDKS5kaXYodG9rZW5WYWx1ZSk7CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgdWludDI1NiBib251c1JhdGU7IC8vIGRlY2ltYWxzIG9mIGJvbnVzIDIwJSA9IDIwMDAKICAgICAgICBhZGRyZXNzIGN1cnJlbnRBbWJhc3NhZG9yID0gYWRkcmVzcygwKTsKICAgICAgICBpZiAoIGFtYmFzc2Fkb3JBZGRyZXNzT2ZbbXNnLnNlbmRlcl0gIT0gYWRkcmVzcygwKSApIHsgLy8gaWYgaXMgYW4gYXV0aG9yaXplZCBhbWJhc3NhZG9yQ29udHJhY3QKICAgICAgICAgICAgY3VycmVudEFtYmFzc2Fkb3IgPSBtc2cuc2VuZGVyOwogICAgICAgICAgICBib251c1JhdGUgPSAwOyAvLyBBbWJhc3NhZG9yIENvbXVuaXR5IHNob3VsZCBjbGFpbSBvd24gYm9udXMgYXQgdGhlIGVuZCBvZiBSQyAKICAgICAgICAgICAgCiAgICAgICAgfSBlbHNlIHsgLy8gaWYgaXMgZGlyZWN0bHkgY2FsbGVkIHRvIENvaW5Dcm93ZElDTyBjb250cmFjdAogICAgICAgICAgICByZXF1aXJlKG5vdyA+IHN0YXJ0VGltZSk7IC8vIGNoZWNrIGlmIHN0YXJ0ZWQgZm9yIHB1YmxpYyB1c2VyCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyowICApIHsgYm9udXNSYXRlID0gMjAwMDsgfQogICAgICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyoxICApIHsgYm9udXNSYXRlID0gMTgzMzsgfQogICAgICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyoyICApIHsgYm9udXNSYXRlID0gMTY2NzsgfQogICAgICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyozICApIHsgYm9udXNSYXRlID0gMTUwMDsgfQogICAgICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyo0ICApIHsgYm9udXNSYXRlID0gMTMzMzsgfQogICAgICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyo1ICApIHsgYm9udXNSYXRlID0gMTE2NzsgfQogICAgICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyo2ICApIHsgYm9udXNSYXRlID0gMTAwMDsgfQogICAgICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyo3ICApIHsgYm9udXNSYXRlID0gODMzOyB9CiAgICAgICAgICAgIGlmKCBub3cgPiBzdGFydFRpbWUgKyB3ZWVrSW5TZWNvbmRzKjggICkgeyBib251c1JhdGUgPSA2Njc7IH0KICAgICAgICAgICAgaWYoIG5vdyA+IHN0YXJ0VGltZSArIHdlZWtJblNlY29uZHMqOSAgKSB7IGJvbnVzUmF0ZSA9IDUwMDsgfQogICAgICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyoxMCApIHsgYm9udXNSYXRlID0gMzMzOyB9CiAgICAgICAgICAgIGlmKCBub3cgPiBzdGFydFRpbWUgKyB3ZWVrSW5TZWNvbmRzKjExICkgeyBib251c1JhdGUgPSAxNjc7IH0KICAgICAgICAgICAgaWYoIG5vdyA+IHN0YXJ0VGltZSArIHdlZWtJblNlY29uZHMqMTIgKSB7IGJvbnVzUmF0ZSA9IDA7IH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKCByZW1haW5pbmdUb2tlbnMgPCB0b2tlbkFtb3VudCApIHsKICAgICAgICAgICAgdWludDI1NiByZWZ1bmQgPSAodG9rZW5BbW91bnQgLSByZW1haW5pbmdUb2tlbnMpLm11bCh0b2tlblZhbHVlKS5kaXYob25lWENDKTsKICAgICAgICAgICAgdG9rZW5BbW91bnQgPSByZW1haW5pbmdUb2tlbnM7CiAgICAgICAgICAgIG93bmVyLnRyYW5zZmVyKG1zZy52YWx1ZS1yZWZ1bmQpOwoJCQlyZW1haW5pbmdUb2tlbnMgPSAwOyAvLyBzZXQgcmVtYWluaW5nIHRva2VuIHRvIDAKICAgICAgICAgICAgIF9idXllci50cmFuc2ZlcihyZWZ1bmQpOwogICAgICAgIH0gZWxzZSB7CgkJCXJlbWFpbmluZ1Rva2VucyA9IHJlbWFpbmluZ1Rva2Vucy5zdWIodG9rZW5BbW91bnQpOyAvLyB1cGRhdGUgcmVtYWluaW5nIHRva2VuIHdpdGhvdXQgYm9udXMKICAgICAgICAgICAgb3duZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdWludDI1NiB0b2tlbkFtb3VudFdpdGhCb251cyA9IHRva2VuQW1vdW50LmFkZCh0b2tlbkFtb3VudC5tdWwoIGJvbnVzUmF0ZSApLmRpdigxMCoqNCkpOyAvL2FkZCB0b2tlbiBib251cwogICAgICAgIAogICAgICAgIHRva2VuQ29udHJhY3QudHJhbnNmZXIoX2J1eWVyLCB0b2tlbkFtb3VudFdpdGhCb251cyk7CiAgICAgICAgQnV5KF9idXllciwgdG9rZW5BbW91bnRXaXRoQm9udXMsIGN1cnJlbnRBbWJhc3NhZG9yKTsKICAgICAgICAKICAgICAgICB0b3RhbFNvbGRUb2tlbnNXaXRoQm9udXMgKz0gdG9rZW5BbW91bnRXaXRoQm9udXM7IAoJCXRvdGFsU29sZFRva2Vuc1dpdGhvdXRCb251cyArPSB0b2tlbkFtb3VudDsKCQkKICAgICAgICByZXR1cm4gdG9rZW5BbW91bnQ7IC8vIHJldHVuIHRva2VuQW1vdW50IHdpdGhvdXQgYm9udXNlcyBmb3IgZWFzaWVyIGNhbGN1bGF0aW9ucwogICAgfQoKICAgIGV2ZW50IE5ld0FtYmFzc2Fkb3IoYWRkcmVzcyBhbWJhc3NhZG9yLCBhZGRyZXNzIGNvbnRyKTsKICAgIAogICAgZnVuY3Rpb24gYWRkTWVCeVJDKGFkZHJlc3MgX2FtYmFzc2Fkb3JBZGRyKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUodHgub3JpZ2luID09IG93bmVyKTsKICAgICAgICAKICAgICAgICBhbWJhc3NhZG9yQWRkcmVzc09mWyBtc2cuc2VuZGVyIF0gID0gX2FtYmFzc2Fkb3JBZGRyOwogICAgICAgIAogICAgICAgIE5ld0FtYmFzc2Fkb3IoX2FtYmFzc2Fkb3JBZGRyLCBtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhdyhhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB0by50cmFuc2Zlcih2YWx1ZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHVwZGF0ZVRva2VuQ29udHJhY3QoYWRkcmVzcyBfdG9rZW5Db250cmFjdCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgdG9rZW5Db250cmFjdCA9IHRva2VuSW50ZXJmYWNlKF90b2tlbkNvbnRyYWN0KTsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhd1Rva2VucyhhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdG9rZW5Db250cmFjdC50cmFuc2Zlcih0bywgdmFsdWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjbGFpbVByZW1pdW0oYWRkcmVzcyBfYnV5ZXIsIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHJldHVybnMoYm9vbCkgewogICAgICAgIHJlcXVpcmUoIGFtYmFzc2Fkb3JBZGRyZXNzT2ZbbXNnLnNlbmRlcl0gIT0gYWRkcmVzcygwKSApOyAvLyBDaGVjayBpZiBpcyBhbiBhdXRob3JpemVkIF9hbWJhc3NhZG9yQ29udHJhY3QKICAgICAgICByZXR1cm4gdG9rZW5Db250cmFjdC50cmFuc2ZlcihfYnV5ZXIsIF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBidXkobXNnLnNlbmRlcik7CiAgICB9Cn0='.
	

]
