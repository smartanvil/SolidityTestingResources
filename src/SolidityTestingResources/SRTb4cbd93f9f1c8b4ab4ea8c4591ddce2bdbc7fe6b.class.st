Class {
	#name : #SRTb4cbd93f9f1c8b4ab4ea8c4591ddce2bdbc7fe6b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb4cbd93f9f1c8b4ab4ea8c4591ddce2bdbc7fe6b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CiAKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmIChhID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KIAogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQogCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KIAogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQogCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogCiAgICAvKioKICAgICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgICAgKiBhY2NvdW50LgogICAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQogCiAgICAvKioKICAgICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQogCiAgICAvKioKICAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIH0KICAgIH0KfQogCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICAgIHVpbnQgcHVibGljIF90b3RhbFN1cHBseTsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWM7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKfQogCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWM7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSkgcHVibGljOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KIAovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIE93bmFibGUsIEVSQzIwQmFzaWMgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYmFsYW5jZXM7CiAKICAgIC8vIGFkZGl0aW9uYWwgdmFyaWFibGVzIGZvciB1c2UgaWYgdHJhbnNhY3Rpb24gZmVlcyBldmVyIGJlY2FtZSBuZWNlc3NhcnkKICAgIHVpbnQgcHVibGljIGJhc2lzUG9pbnRzUmF0ZSA9IDA7CiAgICB1aW50IHB1YmxpYyBtYXhpbXVtRmVlID0gMDsKIAogICAgLyoqCiAgICAqIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suCiAgICAqLwogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgICAgIHJlcXVpcmUoIShtc2cuZGF0YS5sZW5ndGggPCBzaXplICsgNCkpOwogICAgICAgIF87CiAgICB9CiAKICAgIC8qKgogICAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CiAgICAgICAgdWludCBmZWUgPSAoX3ZhbHVlLm11bChiYXNpc1BvaW50c1JhdGUpKS5kaXYoMTAwMDApOwogICAgICAgIGlmIChmZWUgPiBtYXhpbXVtRmVlKSB7CiAgICAgICAgICAgIGZlZSA9IG1heGltdW1GZWU7CiAgICAgICAgfQogICAgICAgIHVpbnQgc2VuZEFtb3VudCA9IF92YWx1ZS5zdWIoZmVlKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChzZW5kQW1vdW50KTsKICAgICAgICBpZiAoZmVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0uYWRkKGZlZSk7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIG93bmVyLCBmZWUpOwogICAgICAgIH0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIHNlbmRBbW91bnQpOwogICAgfQogCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludCByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CiAKfQogCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb25jb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBCYXNpY1Rva2VuLCBFUkMyMCB7CiAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgcHVibGljIGFsbG93ZWQ7CiAKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1BWF9VSU5UID0gMioqMjU2IC0gMTsKIAogICAgLyoqCiAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgb25seVBheWxvYWRTaXplKDMgKiAzMikgewogICAgICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CiAKICAgICAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgICAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7CiAKICAgICAgICB1aW50IGZlZSA9IChfdmFsdWUubXVsKGJhc2lzUG9pbnRzUmF0ZSkpLmRpdigxMDAwMCk7CiAgICAgICAgaWYgKGZlZSA+IG1heGltdW1GZWUpIHsKICAgICAgICAgICAgZmVlID0gbWF4aW11bUZlZTsKICAgICAgICB9CiAgICAgICAgaWYgKF9hbGxvd2FuY2UgPCBNQVhfVUlOVCkgewogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICAgICAgfQogICAgICAgIHVpbnQgc2VuZEFtb3VudCA9IF92YWx1ZS5zdWIoZmVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKHNlbmRBbW91bnQpOwogICAgICAgIGlmIChmZWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5hZGQoZmVlKTsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIG93bmVyLCBmZWUpOwogICAgICAgIH0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBzZW5kQW1vdW50KTsKICAgIH0KIAogICAgLyoqCiAgICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcHVibGljIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKIAogICAgICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAgICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICByZXF1aXJlKCEoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpKTsKIAogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfQogCiAgICAvKioKICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGFuIGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgKiBAcmV0dXJuIEEgdWludCBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KIAp9CiAKIAovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwogCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CiAKIAogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQogCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCgpIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQogCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gdHJ1ZTsKICAgIFBhdXNlKCk7CiAgfQogCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9Cn0KIApjb250cmFjdCBCbGFja0xpc3QgaXMgT3duYWJsZSwgQmFzaWNUb2tlbiB7CiAKICAgIC8vLy8vLy8gR2V0dGVycyB0byBhbGxvdyB0aGUgc2FtZSBibGFja2xpc3QgdG8gYmUgdXNlZCBhbHNvIGJ5IG90aGVyIGNvbnRyYWN0cyAoaW5jbHVkaW5nIHVwZ3JhZGVkIEVVUk9RVUlOTlRva2VuKSAvLy8vLy8vCiAgICBmdW5jdGlvbiBnZXRCbGFja0xpc3RTdGF0dXMoYWRkcmVzcyBfbWFrZXIpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gaXNCbGFja0xpc3RlZFtfbWFrZXJdOwogICAgfQogCiAgICBmdW5jdGlvbiBnZXRPd25lcigpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gb3duZXI7CiAgICB9CiAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGlzQmxhY2tMaXN0ZWQ7CiAgICAgCiAgICBmdW5jdGlvbiBhZGRCbGFja0xpc3QgKGFkZHJlc3MgX2V2aWxVc2VyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpc0JsYWNrTGlzdGVkW19ldmlsVXNlcl0gPSB0cnVlOwogICAgICAgIEFkZGVkQmxhY2tMaXN0KF9ldmlsVXNlcik7CiAgICB9CiAKICAgIGZ1bmN0aW9uIHJlbW92ZUJsYWNrTGlzdCAoYWRkcmVzcyBfY2xlYXJlZFVzZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGlzQmxhY2tMaXN0ZWRbX2NsZWFyZWRVc2VyXSA9IGZhbHNlOwogICAgICAgIFJlbW92ZWRCbGFja0xpc3QoX2NsZWFyZWRVc2VyKTsKICAgIH0KIAogICAgZnVuY3Rpb24gZGVzdHJveUJsYWNrRnVuZHMgKGFkZHJlc3MgX2JsYWNrTGlzdGVkVXNlcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShpc0JsYWNrTGlzdGVkW19ibGFja0xpc3RlZFVzZXJdKTsKICAgICAgICB1aW50IGRpcnR5RnVuZHMgPSBiYWxhbmNlT2YoX2JsYWNrTGlzdGVkVXNlcik7CiAgICAgICAgYmFsYW5jZXNbX2JsYWNrTGlzdGVkVXNlcl0gPSAwOwogICAgICAgIF90b3RhbFN1cHBseSAtPSBkaXJ0eUZ1bmRzOwogICAgICAgIERlc3Ryb3llZEJsYWNrRnVuZHMoX2JsYWNrTGlzdGVkVXNlciwgZGlydHlGdW5kcyk7CiAgICB9CiAKICAgIGV2ZW50IERlc3Ryb3llZEJsYWNrRnVuZHMoYWRkcmVzcyBfYmxhY2tMaXN0ZWRVc2VyLCB1aW50IF9iYWxhbmNlKTsKIAogICAgZXZlbnQgQWRkZWRCbGFja0xpc3QoYWRkcmVzcyBfdXNlcik7CiAKICAgIGV2ZW50IFJlbW92ZWRCbGFja0xpc3QoYWRkcmVzcyBfdXNlcik7CiAKfQogCmNvbnRyYWN0IFVwZ3JhZGVkU3RhbmRhcmRUb2tlbiBpcyBTdGFuZGFyZFRva2VuewogICAgLy8gdGhvc2UgbWV0aG9kcyBhcmUgY2FsbGVkIGJ5IHRoZSBsZWdhY3kgY29udHJhY3QKICAgIC8vIGFuZCB0aGV5IG11c3QgZW5zdXJlIG1zZy5zZW5kZXIgdG8gYmUgdGhlIGNvbnRyYWN0IGFkZHJlc3MKICAgIGZ1bmN0aW9uIHRyYW5zZmVyQnlMZWdhY3koYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWM7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb21CeUxlZ2FjeShhZGRyZXNzIHNlbmRlciwgYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGFwcHJvdmVCeUxlZ2FjeShhZGRyZXNzIGZyb20sIGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSkgcHVibGljOwp9CiAKY29udHJhY3QgRVVST1FVSU5OVG9rZW4gaXMgUGF1c2FibGUsIFN0YW5kYXJkVG9rZW4sIEJsYWNrTGlzdCB7CiAKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludCBwdWJsaWMgZGVjaW1hbHM7CiAgICBhZGRyZXNzIHB1YmxpYyB1cGdyYWRlZEFkZHJlc3M7CiAgICBib29sIHB1YmxpYyBkZXByZWNhdGVkOwogCiAgICAvLyAgVGhlIGNvbnRyYWN0IGNhbiBiZSBpbml0aWFsaXplZCB3aXRoIGEgbnVtYmVyIG9mIHRva2VucwogICAgLy8gIEFsbCB0aGUgdG9rZW5zIGFyZSBkZXBvc2l0ZWQgdG8gdGhlIG93bmVyIGFkZHJlc3MKICAgIC8vCiAgICAvLyBAcGFyYW0gX2JhbGFuY2UgSW5pdGlhbCBzdXBwbHkgb2YgdGhlIGNvbnRyYWN0CiAgICAvLyBAcGFyYW0gX25hbWUgVG9rZW4gTmFtZQogICAgLy8gQHBhcmFtIF9zeW1ib2wgVG9rZW4gc3ltYm9sCiAgICAvLyBAcGFyYW0gX2RlY2ltYWxzIFRva2VuIGRlY2ltYWxzCiAgICBmdW5jdGlvbiBFVVJPUVVJTk5Ub2tlbih1aW50IF9pbml0aWFsU3VwcGx5LCBzdHJpbmcgX25hbWUsIHN0cmluZyBfc3ltYm9sLCB1aW50IF9kZWNpbWFscykgcHVibGljIHsKICAgICAgICBfdG90YWxTdXBwbHkgPSBfaW5pdGlhbFN1cHBseTsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBfaW5pdGlhbFN1cHBseTsKICAgICAgICBkZXByZWNhdGVkID0gZmFsc2U7CiAgICB9CiAKICAgIC8vIEZvcndhcmQgRVJDMjAgbWV0aG9kcyB0byB1cGdyYWRlZCBjb250cmFjdCBpZiB0aGlzIG9uZSBpcyBkZXByZWNhdGVkCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHsKICAgICAgICByZXF1aXJlKCFpc0JsYWNrTGlzdGVkW21zZy5zZW5kZXJdKTsKICAgICAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICAgICAgICByZXR1cm4gVXBncmFkZWRTdGFuZGFyZFRva2VuKHVwZ3JhZGVkQWRkcmVzcykudHJhbnNmZXJCeUxlZ2FjeShtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgICAgICB9CiAgICB9CiAKICAgIC8vIEZvcndhcmQgRVJDMjAgbWV0aG9kcyB0byB1cGdyYWRlZCBjb250cmFjdCBpZiB0aGlzIG9uZSBpcyBkZXByZWNhdGVkCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgcmVxdWlyZSghaXNCbGFja0xpc3RlZFtfZnJvbV0pOwogICAgICAgIGlmIChkZXByZWNhdGVkKSB7CiAgICAgICAgICAgIHJldHVybiBVcGdyYWRlZFN0YW5kYXJkVG9rZW4odXBncmFkZWRBZGRyZXNzKS50cmFuc2ZlckZyb21CeUxlZ2FjeShtc2cuc2VuZGVyLCBfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICB9CiAgICB9CiAKICAgIC8vIEZvcndhcmQgRVJDMjAgbWV0aG9kcyB0byB1cGdyYWRlZCBjb250cmFjdCBpZiB0aGlzIG9uZSBpcyBkZXByZWNhdGVkCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgICAgICAgcmV0dXJuIFVwZ3JhZGVkU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLmJhbGFuY2VPZih3aG8pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBzdXBlci5iYWxhbmNlT2Yod2hvKTsKICAgICAgICB9CiAgICB9CiAKICAgIC8vIEZvcndhcmQgRVJDMjAgbWV0aG9kcyB0byB1cGdyYWRlZCBjb250cmFjdCBpZiB0aGlzIG9uZSBpcyBkZXByZWNhdGVkCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMgb25seVBheWxvYWRTaXplKDIgKiAzMikgewogICAgICAgIGlmIChkZXByZWNhdGVkKSB7CiAgICAgICAgICAgIHJldHVybiBVcGdyYWRlZFN0YW5kYXJkVG9rZW4odXBncmFkZWRBZGRyZXNzKS5hcHByb3ZlQnlMZWdhY3kobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgfQogICAgfQogCiAgICAvLyBGb3J3YXJkIEVSQzIwIG1ldGhvZHMgdG8gdXBncmFkZWQgY29udHJhY3QgaWYgdGhpcyBvbmUgaXMgZGVwcmVjYXRlZAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgICAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICAgICAgICByZXR1cm4gU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLmFsbG93YW5jZShfb3duZXIsIF9zcGVuZGVyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gc3VwZXIuYWxsb3dhbmNlKF9vd25lciwgX3NwZW5kZXIpOwogICAgICAgIH0KICAgIH0KIAogICAgLy8gZGVwcmVjYXRlIGN1cnJlbnQgY29udHJhY3QgaW4gZmF2b3VyIG9mIGEgbmV3IG9uZQogICAgZnVuY3Rpb24gZGVwcmVjYXRlKGFkZHJlc3MgX3VwZ3JhZGVkQWRkcmVzcykgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgZGVwcmVjYXRlZCA9IHRydWU7CiAgICAgICAgdXBncmFkZWRBZGRyZXNzID0gX3VwZ3JhZGVkQWRkcmVzczsKICAgICAgICBEZXByZWNhdGUoX3VwZ3JhZGVkQWRkcmVzcyk7CiAgICB9CiAKICAgIC8vIGRlcHJlY2F0ZSBjdXJyZW50IGNvbnRyYWN0IGlmIGZhdm91ciBvZiBhIG5ldyBvbmUKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICAgICAgICByZXR1cm4gU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLnRvdGFsU3VwcGx5KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIF90b3RhbFN1cHBseTsKICAgICAgICB9CiAgICB9CiAKICAgIC8vIElzc3VlIGEgbmV3IGFtb3VudCBvZiB0b2tlbnMKICAgIC8vIHRoZXNlIHRva2VucyBhcmUgZGVwb3NpdGVkIGludG8gdGhlIG93bmVyIGFkZHJlc3MKICAgIC8vCiAgICAvLyBAcGFyYW0gX2Ftb3VudCBOdW1iZXIgb2YgdG9rZW5zIHRvIGJlIGlzc3VlZGkKICAgIGZ1bmN0aW9uIGlzc3VlKHVpbnQgYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF90b3RhbFN1cHBseSArIGFtb3VudCA+IF90b3RhbFN1cHBseSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tvd25lcl0gKyBhbW91bnQgPiBiYWxhbmNlc1tvd25lcl0pOwogCiAgICAgICAgYmFsYW5jZXNbb3duZXJdICs9IGFtb3VudDsKICAgICAgICBfdG90YWxTdXBwbHkgKz0gYW1vdW50OwogICAgICAgIElzc3VlKGFtb3VudCk7CiAgICB9CiAKICAgIC8vIFJlZGVlbSB0b2tlbnMuCiAgICAvLyBUaGVzZSB0b2tlbnMgYXJlIHdpdGhkcmF3biBmcm9tIHRoZSBvd25lciBhZGRyZXNzCiAgICAvLyBpZiB0aGUgYmFsYW5jZSBtdXN0IGJlIGVub3VnaCB0byBjb3ZlciB0aGUgcmVkZWVtCiAgICAvLyBvciB0aGUgY2FsbCB3aWxsIGZhaWwuCiAgICAvLyBAcGFyYW0gX2Ftb3VudCBOdW1iZXIgb2YgdG9rZW5zIHRvIGJlIGlzc3VlZAogICAgZnVuY3Rpb24gcmVkZWVtKHVpbnQgYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF90b3RhbFN1cHBseSA+PSBhbW91bnQpOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbb3duZXJdID49IGFtb3VudCk7CiAKICAgICAgICBfdG90YWxTdXBwbHkgLT0gYW1vdW50OwogICAgICAgIGJhbGFuY2VzW293bmVyXSAtPSBhbW91bnQ7CiAgICAgICAgUmVkZWVtKGFtb3VudCk7CiAgICB9CiAKICAgIGZ1bmN0aW9uIHNldFBhcmFtcyh1aW50IG5ld0Jhc2lzUG9pbnRzLCB1aW50IG5ld01heEZlZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgLy8gRW5zdXJlIHRyYW5zcGFyZW5jeSBieSBoYXJkY29kaW5nIGxpbWl0IGJleW9uZCB3aGljaCBmZWVzIGNhbiBuZXZlciBiZSBhZGRlZAogICAgICAgIHJlcXVpcmUobmV3QmFzaXNQb2ludHMgPCAyMCk7CiAgICAgICAgcmVxdWlyZShuZXdNYXhGZWUgPCA1MCk7CiAKICAgICAgICBiYXNpc1BvaW50c1JhdGUgPSBuZXdCYXNpc1BvaW50czsKICAgICAgICBtYXhpbXVtRmVlID0gbmV3TWF4RmVlLm11bCgxMCoqZGVjaW1hbHMpOwogCiAgICAgICAgUGFyYW1zKGJhc2lzUG9pbnRzUmF0ZSwgbWF4aW11bUZlZSk7CiAgICB9CiAKICAgIC8vIENhbGxlZCB3aGVuIG5ldyB0b2tlbiBhcmUgaXNzdWVkCiAgICBldmVudCBJc3N1ZSh1aW50IGFtb3VudCk7CiAKICAgIC8vIENhbGxlZCB3aGVuIHRva2VucyBhcmUgcmVkZWVtZWQKICAgIGV2ZW50IFJlZGVlbSh1aW50IGFtb3VudCk7CiAKICAgIC8vIENhbGxlZCB3aGVuIGNvbnRyYWN0IGlzIGRlcHJlY2F0ZWQKICAgIGV2ZW50IERlcHJlY2F0ZShhZGRyZXNzIG5ld0FkZHJlc3MpOwogCiAgICAvLyBDYWxsZWQgaWYgY29udHJhY3QgZXZlciBhZGRzIGZlZXMKICAgIGV2ZW50IFBhcmFtcyh1aW50IGZlZUJhc2lzUG9pbnRzLCB1aW50IG1heEZlZSk7Cn0='.
	

]
