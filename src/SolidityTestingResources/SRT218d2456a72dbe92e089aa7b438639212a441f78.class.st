Class {
	#name : #SRT218d2456a72dbe92e089aa7b438639212a441f78,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT218d2456a72dbe92e089aa7b438639212a441f78 >> base64 [
	^ 'Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBEZXZlbG9wZXIgTmVjaGVzb3YgQW5kcmV5OiBGYWNlYm9vay5jb20vTmVjaGVzb3YgICAKLy8gRW5qb3kuIChjKSBQUkNSLm9yZyBJQ08gQnVzaW5lc3MgUGxhdGZvcm0gMjAxNy4gVGhlIFBSQ1IgTGljZW5jZS4KLy8gRXRoIGFkZHJlc3M6IDB4Nzg4QzQ1RGQ2MGFFNGRCRTUwNTViNUFjMDIzODRENWRjODQ2NzdiMAovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIEVSQyBUb2tlbiBTdGFuZGFyZCAjMjAgSW50ZXJmYWNlCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7ICAgIAoKICBsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgcmV0dXJuIGM7CiAgICB9CiAgfQoKICBjb250cmFjdCBFUkMyMEludGVyZmFjZSB7CiAgICAgIC8vIEdldCB0aGUgdG90YWwgdG9rZW4gc3VwcGx5CiAgICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSk7CiAgIAogICAgICAvLyBHZXQgdGhlIGFjY291bnQgYmFsYW5jZSBvZiBhbm90aGVyIGFjY291bnQgd2l0aCBhZGRyZXNzIF9vd25lcgogICAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgIAogICAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIHRvIGFkZHJlc3MgX3RvCiAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgCiAgICAgIC8vIFNlbmQgX3ZhbHVlIGFtb3VudCBvZiB0b2tlbnMgZnJvbSBhZGRyZXNzIF9mcm9tIHRvIGFkZHJlc3MgX3RvCiAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgIAogICAgICAvLyBBbGxvdyBfc3BlbmRlciB0byB3aXRoZHJhdyBmcm9tIHlvdXIgYWNjb3VudCwgbXVsdGlwbGUgdGltZXMsIHVwIHRvIHRoZSBfdmFsdWUgYW1vdW50LgogICAgICAvLyBJZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhZ2FpbiBpdCBvdmVyd3JpdGVzIHRoZSBjdXJyZW50IGFsbG93YW5jZSB3aXRoIF92YWx1ZS4KICAgICAgLy8gdGhpcyBmdW5jdGlvbiBpcyByZXF1aXJlZCBmb3Igc29tZSBERVggZnVuY3Rpb25hbGl0eQogICAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAKICAgICAgLy8gUmV0dXJucyB0aGUgYW1vdW50IHdoaWNoIF9zcGVuZGVyIGlzIHN0aWxsIGFsbG93ZWQgdG8gd2l0aGRyYXcgZnJvbSBfb3duZXIKICAgICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CiAgIAogICAgICAvLyBUcmlnZ2VyZWQgd2hlbiB0b2tlbnMgYXJlIHRyYW5zZmVycmVkLgogICAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgCiAgICAgIC8vIFRyaWdnZXJlZCB3aGVuZXZlciBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBpcyBjYWxsZWQuCiAgICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwogIH0gIAogICAKICBjb250cmFjdCBJb3VfVG9rZW4gaXMgRVJDMjBJbnRlcmZhY2UgewoKICAgICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiSU9VIjsKICAgICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIklPVSB0b2tlbiI7CiAgICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OyAKICAgICAgICAgICAKICAgICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgbWF4VG9rZW5zID0gODAwKjEwKio2KjEwKioxODsgCiAgICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IG93bmVyU3VwcGx5ID0gbWF4VG9rZW5zKjMwLzEwMDsKICAgICAgdWludDI1NiBfdG90YWxTdXBwbHkgPSBvd25lclN1cHBseTsgIAoKICAgICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5fcHJpY2UgPSAxMCoqMTgqMS84MDA7IAogICAgICB1aW50MjU2IHB1YmxpYyBwcmVfaWNvX3N0YXJ0ID0gMTUxNTk3NDQwMDsgLy8gSmFuIDE1LCAyMDE4IHV0YwogICAgICB1aW50MjU2IHB1YmxpYyBpY29fc3RhcnQgPSAxNTE4MDQ4MDAwOyAvLyBGZWIgOCwgMjAxOCB1dGMKICAgICAgdWludDI1NiBwdWJsaWMgaWNvX2ZpbmlzaCA9IDE1MjE5MzYwMDA7IC8vIE1hciAyNSwgMjAxOCB1dGMKICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWluVmFsdWVQcmUgPSAxMCoqMTgqMS8xMDAwMDAwOyAKICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWluVmFsdWUgPSAxMCoqMTgqMS8xMDAwMDAwOyAKICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWF4VmFsdWUgPSAzMDAwKjEwKioxODsKCiAgICAgIHVpbnQgcHVibGljIGNvZWYgPSAxMDI7CgogICAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKICAgICAgCiAgICAgIC8vIE93bmVyIG9mIHRoaXMgY29udHJhY3QKICAgICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgIAogICAgICAvLyBCYWxhbmNlcyBmb3IgZWFjaCBhY2NvdW50CiAgICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgCiAgICAgIC8vIE93bmVyIG9mIGFjY291bnQgYXBwcm92ZXMgdGhlIHRyYW5zZmVyIG9mIGFuIGFtb3VudCB0byBhbm90aGVyIGFjY291bnQKICAgICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgICAvLyBPcmRlcnMgaG9sZGVycyB3aG8gd2lzaCBzZWxsIHRva2Vucywgc2F2ZSBhbW91bnQKICAgICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBvcmRlcnNfc2VsbF9hbW91bnQ7CgogICAgICAvLyBPcmRlcnMgaG9sZGVycyB3aG8gd2lzaCBzZWxsIHRva2Vucywgc2F2ZSBwcmljZQogICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIG9yZGVyc19zZWxsX3ByaWNlOwoKICAgICAgLy9vcmRlcnMgbGlzdAogICAgICBhZGRyZXNzW10gcHVibGljIG9yZGVyc19zZWxsX2xpc3Q7CgogICAgICAvLyBUcmlnZ2VyZWQgb24gc2V0IFNFTEwgb3JkZXIKICAgICAgZXZlbnQgT3JkZXJfc2VsbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50MjU2IF9tYXhfYW1vdW50LCB1aW50MjU2IF9wcmljZSk7ICAgICAgCgogICAgICAvLyBUcmlnZ2VyZWQgb24gZXhlY3V0ZSBTRUxMIG9yZGVyCiAgICAgIGV2ZW50IE9yZGVyX2V4ZWN1dGUoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgX3ByaWNlKTsgICAgICAKICAgCiAgICAgIC8vIEZ1bmN0aW9ucyB3aXRoIHRoaXMgbW9kaWZpZXIgY2FuIG9ubHkgYmUgZXhlY3V0ZWQgYnkgdGhlIG93bmVyCiAgICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICB9CiAgICAgICAgICBfOwogICAgICB9ICAgICAgCiAgIAogICAgICAvLyBDb25zdHJ1Y3RvcgogICAgICBmdW5jdGlvbiBJb3VfVG9rZW4oKSB7CiAgICAgICAgICAvL293bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICAgIG93bmVyID0gMHgwYTE2NkU5MDA3MWIwRmZFNzc3MjRGNWIxY0RBREY2MkFDQzYzZDEwOwogICAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gb3duZXJTdXBwbHk7CiAgICAgIH0KICAgICAgCiAgICAgIC8vZGVmYXVsdCBmdW5jdGlvbiAgICAgIAogICAgICBmdW5jdGlvbigpIHBheWFibGUgeyAgICAgICAgCiAgICAgICAgICB0b2tlbnNfYnV5KCk7ICAgICAgICAKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRvdGFsU3VwcGx5KSB7CiAgICAgICAgICB0b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseTsKICAgICAgfQoKICAgICAgLy9XaXRoZHJhdyBtb25leSBmcm9tIGNvbnRyYWN0IGJhbGFuY2UgdG8gb3duZXIKICAgICAgZnVuY3Rpb24gd2l0aGRyYXcodWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCByZXN1bHQpIHsKICAgICAgICAgIHVpbnQyNTYgYmFsYW5jZTsKICAgICAgICAgIGJhbGFuY2UgPSB0aGlzLmJhbGFuY2U7CiAgICAgICAgICBpZihfYW1vdW50ID4gMCkgYmFsYW5jZSA9IF9hbW91bnQ7CiAgICAgICAgICBvd25lci5zZW5kKGJhbGFuY2UpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIC8vQ2hhbmdlIGNvZWYKICAgICAgZnVuY3Rpb24gY2hhbmdlX2NvZWYodWludDI1NiBfY29lZikgb25seU93bmVyIHJldHVybnMgKGJvb2wgcmVzdWx0KSB7CiAgICAgICAgICBjb2VmID0gX2NvZWY7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgLy9DaGFuZ2UgaWNvX3N0YXJ0IGRhdGUKICAgICAgZnVuY3Rpb24gY2hhbmdlX2ljb19zdGFydCh1aW50MjU2IF9pY29fc3RhcnQpIG9ubHlPd25lciByZXR1cm5zIChib29sIHJlc3VsdCkgewogICAgICAgICAgaWNvX3N0YXJ0ID0gX2ljb19zdGFydDsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICAvL0NoYW5nZSBpY29fZmluaXNoIGRhdGUKICAgICAgZnVuY3Rpb24gY2hhbmdlX2ljb19maW5pc2godWludDI1NiBfaWNvX2ZpbmlzaCkgb25seU93bmVyIHJldHVybnMgKGJvb2wgcmVzdWx0KSB7CiAgICAgICAgICBpY29fZmluaXNoID0gX2ljb19maW5pc2g7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAKICAgICAgLy8gVG90YWwgdG9rZW5zIG9uIHVzZXIgYWRkcmVzcwogICAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICAgIH0KICAgCiAgICAgIC8vIFRyYW5zZmVyIHRoZSBiYWxhbmNlIGZyb20gb3duZXIncyBhY2NvdW50IHRvIGFub3RoZXIgYWNjb3VudAogICAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsgICAgICAgICAgCgogICAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQgCiAgICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAKICAgICAgICAgICAgICAmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfYW1vdW50OwogICAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX2Ftb3VudDsKICAgICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOwogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgIH0KICAgCiAgICAgIC8vIFNlbmQgX3ZhbHVlIGFtb3VudCBvZiB0b2tlbnMgZnJvbSBhZGRyZXNzIF9mcm9tIHRvIGFkZHJlc3MgX3RvCiAgICAgIC8vIFRoZSB0cmFuc2ZlckZyb20gbWV0aG9kIGlzIHVzZWQgZm9yIGEgd2l0aGRyYXcgd29ya2Zsb3csIGFsbG93aW5nIGNvbnRyYWN0cyB0byBzZW5kCiAgICAgIC8vIHRva2VucyBvbiB5b3VyIGJlaGFsZiwgZm9yIGV4YW1wbGUgdG8gImRlcG9zaXQiIHRvIGEgY29udHJhY3QgYWRkcmVzcyBhbmQvb3IgdG8gY2hhcmdlCiAgICAgIC8vIGZlZXMgaW4gc3ViLWN1cnJlbmNpZXM7IHRoZSBjb21tYW5kIHNob3VsZCBmYWlsIHVubGVzcyB0aGUgX2Zyb20gYWNjb3VudCBoYXMKICAgICAgLy8gZGVsaWJlcmF0ZWx5IGF1dGhvcml6ZWQgdGhlIHNlbmRlciBvZiB0aGUgbWVzc2FnZSB2aWEgc29tZSBtZWNoYW5pc207IHdlIHByb3Bvc2UKICAgICAgLy8gdGhlc2Ugc3RhbmRhcmRpemVkIEFQSXMgZm9yIGFwcHJvdmFsOgogICAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oCiAgICAgICAgICBhZGRyZXNzIF9mcm9tLAogICAgICAgICAgYWRkcmVzcyBfdG8sCiAgICAgICAgICB1aW50MjU2IF9hbW91bnQKICAgICApIHJldHVybnMgKGJvb2wgc3VjY2VzcykgeyAgICAgICAgIAoKICAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50CiAgICAgICAgICAgICAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50CiAgICAgICAgICAgICAmJiBfYW1vdW50ID4gMAogICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX2Ftb3VudDsKICAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7CiAgICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF9hbW91bnQ7CiAgICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICB9CiAgICAgfQogIAogICAgIC8vIEFsbG93IF9zcGVuZGVyIHRvIHdpdGhkcmF3IGZyb20geW91ciBhY2NvdW50LCBtdWx0aXBsZSB0aW1lcywgdXAgdG8gdGhlIF92YWx1ZSBhbW91bnQuCiAgICAgLy8gSWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYWdhaW4gaXQgb3ZlcndyaXRlcyB0aGUgY3VycmVudCBhbGxvd2FuY2Ugd2l0aCBfdmFsdWUuCiAgICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYW1vdW50KTsKICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgfQogICAgCiAgICAgLy9SZXR1cm4gcGFyYW0sIGhvdyBtYW55IHRva2VucyBjYW4gc2VuZCBfc3BlbmRlciBmcm9tIF9vd25lciBhY2NvdW50ICAKICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgIH0gCgogICAgICAvKioKICAgICAgKiBCdXkgdG9rZW5zIG9uIHByZS1pY28gYW5kIGljbyB3aXRoIGJvbnVzZXMgb24gdGltZSBib3VuZGFyaWVzCiAgICAgICovCiAgICAgIGZ1bmN0aW9uIHRva2Vuc19idXkoKSBwYXlhYmxlIHJldHVybnMgKGJvb2wpIHsgCgogICAgICAgIHVpbnQyNTYgdG5vdyA9IG5vdzsKICAgICAgICAKICAgICAgICBpZih0bm93IDwgcHJlX2ljb19zdGFydCkgdGhyb3c7CiAgICAgICAgaWYodG5vdyA+IGljb19maW5pc2gpIHRocm93OwogICAgICAgIGlmKF90b3RhbFN1cHBseSA+PSBtYXhUb2tlbnMpIHRocm93OwogICAgICAgIGlmKCEobXNnLnZhbHVlID49IHRva2VuX3ByaWNlKSkgdGhyb3c7CiAgICAgICAgaWYoIShtc2cudmFsdWUgPj0gbWluVmFsdWUpKSB0aHJvdzsKICAgICAgICBpZihtc2cudmFsdWUgPiBtYXhWYWx1ZSkgdGhyb3c7CgogICAgICAgIHVpbnQgdG9rZW5zX2J1eSA9IChtc2cudmFsdWUqMTAqKjE4KS5kaXYodG9rZW5fcHJpY2UpOwogICAgICAgIHVpbnQgdG9rZW5zX2J1eV90b3RhbDsKCiAgICAgICAgaWYoISh0b2tlbnNfYnV5ID4gMCkpIHRocm93OyAgIAogICAgICAgIAogICAgICAgIC8vQm9udXMgZm9yIHRvdGFsIHRva2VucyBhbW91bnQgZm9yIGFsbCBjb250cmFjdAogICAgICAgIHVpbnQgYjEgPSAwOwogICAgICAgIC8vVGltZSBib251cyBvbiBQcmUtSUNPICYmIElDTwogICAgICAgIHVpbnQgYjIgPSAwOwogICAgICAgIC8vSW5kaXZpZHVhbCBib251cyBmb3IgdG9rZW5zIGFtb3VudAogICAgICAgIHVpbnQgYjMgPSAwOwoKICAgICAgICBpZihfdG90YWxTdXBwbHkgPD0gMTAqMTAqKjYqMTAqKjE4KSB7CiAgICAgICAgICBiMSA9IHRva2Vuc19idXkqMzAvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoMTAqMTAqKjYqMTAqKjE4IDwgX3RvdGFsU3VwcGx5KSYmKF90b3RhbFN1cHBseSA8PSAyMCoxMCoqNioxMCoqMTgpKSB7CiAgICAgICAgICBiMSA9IHRva2Vuc19idXkqMjUvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoMjAqMTAqKjYqMTAqKjE4IDwgX3RvdGFsU3VwcGx5KSYmKF90b3RhbFN1cHBseSA8PSAzMCoxMCoqNioxMCoqMTgpKSB7CiAgICAgICAgICBiMSA9IHRva2Vuc19idXkqMjAvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoMzAqMTAqKjYqMTAqKjE4IDwgX3RvdGFsU3VwcGx5KSYmKF90b3RhbFN1cHBseSA8PSA0MCoxMCoqNioxMCoqMTgpKSB7CiAgICAgICAgICBiMSA9IHRva2Vuc19idXkqMTUvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoNDAqMTAqKjYqMTAqKjE4IDwgX3RvdGFsU3VwcGx5KSYmKF90b3RhbFN1cHBseSA8PSA1MCoxMCoqNioxMCoqMTgpKSB7CiAgICAgICAgICBiMSA9IHRva2Vuc19idXkqMTAvMTAwOwogICAgICAgIH0KICAgICAgICBpZig1MCoxMCoqNioxMCoqMTggPD0gX3RvdGFsU3VwcGx5KSB7CiAgICAgICAgICBiMSA9IHRva2Vuc19idXkqNS8xMDA7CiAgICAgICAgfSAgICAgICAgCgogICAgICAgIGlmKHRub3cgPCBpY29fc3RhcnQpIHsKICAgICAgICAgIGIyID0gdG9rZW5zX2J1eSo0MC8xMDA7CiAgICAgICAgfQogICAgICAgIGlmKChpY29fc3RhcnQgKyA4NjQwMCowIDw9IHRub3cpJiYodG5vdyA8IGljb19zdGFydCArIDg2NDAwKjUpKXsKICAgICAgICAgIGIyID0gdG9rZW5zX2J1eSo1LzEwMDsKICAgICAgICB9IAogICAgICAgIGlmKChpY29fc3RhcnQgKyA4NjQwMCo1IDw9IHRub3cpJiYodG5vdyA8IGljb19zdGFydCArIDg2NDAwKjEwKSl7CiAgICAgICAgICBiMiA9IHRva2Vuc19idXkqNC8xMDA7ICAgICAgICAKICAgICAgICB9IAogICAgICAgIGlmKChpY29fc3RhcnQgKyA4NjQwMCoxMCA8PSB0bm93KSYmKHRub3cgPCBpY29fc3RhcnQgKyA4NjQwMCoyMCkpewogICAgICAgICAgYjIgPSB0b2tlbnNfYnV5KjUvMTAwOyAgICAgICAgCiAgICAgICAgfSAKICAgICAgICBpZigoaWNvX3N0YXJ0ICsgODY0MDAqMjAgPD0gdG5vdykmJih0bm93IDwgaWNvX3N0YXJ0ICsgODY0MDAqMzApKXsKICAgICAgICAgIGIyID0gdG9rZW5zX2J1eSoyLzEwMDsgICAgICAgIAogICAgICAgIH0gCiAgICAgICAgaWYoaWNvX3N0YXJ0ICsgODY0MDAqMzAgPD0gdG5vdyl7CiAgICAgICAgICBiMiA9IHRva2Vuc19idXkqMS8xMDA7ICAgICAgICAKICAgICAgICB9CiAgICAgICAgCgogICAgICAgIGlmKCgxMDAwKjEwKioxOCA8PSB0b2tlbnNfYnV5KSYmKDUwMDAqMTAqKjE4IDw9IHRva2Vuc19idXkpKSB7CiAgICAgICAgICBiMyA9IHRva2Vuc19idXkqNS8xMDA7CiAgICAgICAgfQogICAgICAgIGlmKCg1MDAxKjEwKioxOCA8PSB0b2tlbnNfYnV5KSYmKDEwMDAwKjEwKioxOCA8IHRva2Vuc19idXkpKSB7CiAgICAgICAgICBiMyA9IHRva2Vuc19idXkqNzUvMTAvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoMTAwMDEqMTAqKjE4IDw9IHRva2Vuc19idXkpJiYoMTUwMDAqMTAqKjE4IDwgdG9rZW5zX2J1eSkpIHsKICAgICAgICAgIGIzID0gdG9rZW5zX2J1eSoxMC8xMDA7CiAgICAgICAgfQogICAgICAgIGlmKCgxNTAwMSoxMCoqMTggPD0gdG9rZW5zX2J1eSkmJigyMDAwMCoxMCoqMTggPCB0b2tlbnNfYnV5KSkgewogICAgICAgICAgYjMgPSB0b2tlbnNfYnV5KjEyNS8xMC8xMDA7CiAgICAgICAgfQogICAgICAgIGlmKDIwMDAxKjEwKioxOCA8PSB0b2tlbnNfYnV5KSB7CiAgICAgICAgICBiMyA9IHRva2Vuc19idXkqMTUvMTAwOwogICAgICAgIH0KCiAgICAgICAgdG9rZW5zX2J1eV90b3RhbCA9IHRva2Vuc19idXkuYWRkKGIxKTsKICAgICAgICB0b2tlbnNfYnV5X3RvdGFsID0gdG9rZW5zX2J1eV90b3RhbC5hZGQoYjIpOwogICAgICAgIHRva2Vuc19idXlfdG90YWwgPSB0b2tlbnNfYnV5X3RvdGFsLmFkZChiMyk7ICAgICAgICAKCiAgICAgICAgaWYoX3RvdGFsU3VwcGx5LmFkZCh0b2tlbnNfYnV5X3RvdGFsKSA+IG1heFRva2VucykgdGhyb3c7CiAgICAgICAgX3RvdGFsU3VwcGx5ID0gX3RvdGFsU3VwcGx5LmFkZCh0b2tlbnNfYnV5X3RvdGFsKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZCh0b2tlbnNfYnV5X3RvdGFsKTsgICAgICAgICAKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgCiAgICAgIC8qKgogICAgICAqIEdldCB0b3RhbCBTRUxMIG9yZGVycwogICAgICAqLyAgICAgIAogICAgICBmdW5jdGlvbiBvcmRlcnNfc2VsbF90b3RhbCAoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIG9yZGVyc19zZWxsX2xpc3QubGVuZ3RoOwogICAgICB9IAoKICAgICAgLyoqCiAgICAgICogR2V0IGhvdyBtYW55IHRva2VucyBjYW4gYnV5IGZyb20gdGhpcyBTRUxMIG9yZGVyCiAgICAgICovCiAgICAgIGZ1bmN0aW9uIGdldF9vcmRlcnNfc2VsbF9hbW91bnQoYWRkcmVzcyBfZnJvbSkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CgogICAgICAgIHVpbnQgX2Ftb3VudF9tYXggPSAwOwoKICAgICAgICBpZighKG9yZGVyc19zZWxsX2Ftb3VudFtfZnJvbV0gPiAwKSkgcmV0dXJuIF9hbW91bnRfbWF4OwoKICAgICAgICBpZihiYWxhbmNlT2YoX2Zyb20pID4gMCkgX2Ftb3VudF9tYXggPSBiYWxhbmNlT2YoX2Zyb20pOwogICAgICAgIGlmKG9yZGVyc19zZWxsX2Ftb3VudFtfZnJvbV0gPCBfYW1vdW50X21heCkgX2Ftb3VudF9tYXggPSBvcmRlcnNfc2VsbF9hbW91bnRbX2Zyb21dOwoKICAgICAgICByZXR1cm4gX2Ftb3VudF9tYXg7CiAgICAgIH0KCiAgICAgIC8qKgogICAgICAqIFVzZXIgY3JlYXRlIFNFTEwgb3JkZXIuICAKICAgICAgKi8KICAgICAgZnVuY3Rpb24gb3JkZXJfc2VsbCh1aW50MjU2IF9tYXhfYW1vdW50LCB1aW50MjU2IF9wcmljZSkgcmV0dXJucyAoYm9vbCkgewoKICAgICAgICBpZighKF9tYXhfYW1vdW50ID4gMCkpIHRocm93OwogICAgICAgIGlmKCEoX3ByaWNlID4gMCkpIHRocm93OyAgICAgICAgCgogICAgICAgIG9yZGVyc19zZWxsX2Ftb3VudFttc2cuc2VuZGVyXSA9IF9tYXhfYW1vdW50OwogICAgICAgIG9yZGVyc19zZWxsX3ByaWNlW21zZy5zZW5kZXJdID0gKF9wcmljZSpjb2VmKS5kaXYoMTAwKTsKICAgICAgICBvcmRlcnNfc2VsbF9saXN0LnB1c2gobXNnLnNlbmRlcik7ICAgICAgICAKCiAgICAgICAgT3JkZXJfc2VsbChtc2cuc2VuZGVyLCBfbWF4X2Ftb3VudCwgb3JkZXJzX3NlbGxfcHJpY2VbbXNnLnNlbmRlcl0pOyAgICAgIAoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgLyoqCiAgICAgICogT3JkZXIgQnV5IHRva2VucyAtIGl0J3Mgb3JkZXIgc2VhcmNoIHNlbGwgb3JkZXIgZnJvbSB1c2VyIF9mcm9tIGFuZCBpZiBhbGwgb2ssIHNlbmQgdG9rZW4gYW5kIG1vbmV5IAogICAgICAqLwogICAgICBmdW5jdGlvbiBvcmRlcl9idXkoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfbWF4X3ByaWNlKSBwYXlhYmxlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAKICAgICAgICBpZighKG1zZy52YWx1ZSA+IDApKSB0aHJvdzsKICAgICAgICBpZighKF9tYXhfcHJpY2UgPiAwKSkgdGhyb3c7ICAgICAgICAKICAgICAgICBpZighKG9yZGVyc19zZWxsX2Ftb3VudFtfZnJvbV0gPiAwKSkgdGhyb3c7CiAgICAgICAgaWYoIShvcmRlcnNfc2VsbF9wcmljZVtfZnJvbV0gPiAwKSkgdGhyb3c7IAogICAgICAgIGlmKG9yZGVyc19zZWxsX3ByaWNlW19mcm9tXSA+IF9tYXhfcHJpY2UpIHRocm93OwoKICAgICAgICB1aW50IF9hbW91bnQgPSAobXNnLnZhbHVlKjEwKioxOCkuZGl2KG9yZGVyc19zZWxsX3ByaWNlW19mcm9tXSk7CiAgICAgICAgdWludCBfYW1vdW50X2Zyb20gPSBnZXRfb3JkZXJzX3NlbGxfYW1vdW50KF9mcm9tKTsKCiAgICAgICAgaWYoX2Ftb3VudCA+IF9hbW91bnRfZnJvbSkgX2Ftb3VudCA9IF9hbW91bnRfZnJvbTsgICAgICAgIAogICAgICAgIGlmKCEoX2Ftb3VudCA+IDApKSB0aHJvdzsgICAgICAgIAoKICAgICAgICB1aW50IF90b3RhbF9tb25leSA9IChvcmRlcnNfc2VsbF9wcmljZVtfZnJvbV0qX2Ftb3VudCkuZGl2KDEwKioxOCk7CiAgICAgICAgaWYoX3RvdGFsX21vbmV5ID4gbXNnLnZhbHVlKSB0aHJvdzsKCiAgICAgICAgdWludCBfc2VsbGVyX21vbmV5ID0gKF90b3RhbF9tb25leSoxMDApLmRpdihjb2VmKTsKICAgICAgICB1aW50IF9idXllcl9tb25leSA9IG1zZy52YWx1ZSAtIF90b3RhbF9tb25leTsKCiAgICAgICAgaWYoX3NlbGxlcl9tb25leSA+IG1zZy52YWx1ZSkgdGhyb3c7CiAgICAgICAgaWYoX3NlbGxlcl9tb25leSArIF9idXllcl9tb25leSA+IG1zZy52YWx1ZSkgdGhyb3c7CgogICAgICAgIGlmKF9zZWxsZXJfbW9uZXkgPiAwKSBfZnJvbS5zZW5kKF9zZWxsZXJfbW9uZXkpOwogICAgICAgIGlmKF9idXllcl9tb25leSA+IDApIG1zZy5zZW5kZXIuc2VuZChfYnV5ZXJfbW9uZXkpOwoKICAgICAgICBvcmRlcnNfc2VsbF9hbW91bnRbX2Zyb21dIC09IF9hbW91bnQ7ICAgICAgICAKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX2Ftb3VudDsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBfYW1vdW50OyAKCiAgICAgICAgT3JkZXJfZXhlY3V0ZShfZnJvbSwgbXNnLnNlbmRlciwgX2Ftb3VudCwgb3JkZXJzX3NlbGxfcHJpY2VbX2Zyb21dKTsKCiAgICAgIH0KICAgICAgCiB9'.
	

]
