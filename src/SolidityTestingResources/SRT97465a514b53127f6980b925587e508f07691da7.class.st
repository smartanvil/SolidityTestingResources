Class {
	#name : #SRT97465a514b53127f6980b925587e508f07691da7,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT97465a514b53127f6980b925587e508f07691da7 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogQHRpdGxlIE93bmVkIGNvbnRyYWN0IHdpdGggc2FmZSBvd25lcnNoaXAgcGFzcy4KICoKICogTm90ZTogYWxsIHRoZSBub24gY29uc3RhbnQgZnVuY3Rpb25zIHJldHVybiBmYWxzZSBpbnN0ZWFkIG9mIHRocm93aW5nIGluIGNhc2UgaWYgc3RhdGUgY2hhbmdlCiAqIGRpZG4ndCBoYXBwZW4geWV0LgogKi8KY29udHJhY3QgT3duZWQgewogICAgLyoqCiAgICAgKiBDb250cmFjdCBvd25lciBhZGRyZXNzCiAgICAgKi8KICAgIGFkZHJlc3MgcHVibGljIGNvbnRyYWN0T3duZXI7CgogICAgLyoqCiAgICAgKiBDb250cmFjdCBvd25lciBhZGRyZXNzCiAgICAgKi8KICAgIGFkZHJlc3MgcHVibGljIHBlbmRpbmdDb250cmFjdE93bmVyOwoKICAgIGZ1bmN0aW9uIE93bmVkKCkgewogICAgICAgIGNvbnRyYWN0T3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IE93bmVyIGNoZWNrIG1vZGlmaWVyCiAgICAqLwogICAgbW9kaWZpZXIgb25seUNvbnRyYWN0T3duZXIoKSB7CiAgICAgICAgaWYgKGNvbnRyYWN0T3duZXIgPT0gbXNnLnNlbmRlcikgewogICAgICAgICAgICBfOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRGVzdHJveSBjb250cmFjdCBhbmQgc2NydWIgYSBkYXRhCiAgICAgKiBAbm90aWNlIE9ubHkgb3duZXIgY2FuIGNhbGwgaXQKICAgICAqLwogICAgZnVuY3Rpb24gZGVzdHJveSgpIG9ubHlDb250cmFjdE93bmVyIHsKICAgICAgICBzdWljaWRlKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogUHJlcGFyZXMgb3duZXJzaGlwIHBhc3MuCiAgICAgKgogICAgICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJ5IGN1cnJlbnQgb3duZXIuCiAgICAgKgogICAgICogQHBhcmFtIF90byBhZGRyZXNzIG9mIHRoZSBuZXh0IG93bmVyLiAweDAgaXMgbm90IGFsbG93ZWQuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBjaGFuZ2VDb250cmFjdE93bmVyc2hpcChhZGRyZXNzIF90bykgb25seUNvbnRyYWN0T3duZXIoKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAoX3RvICA9PSAweDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcGVuZGluZ0NvbnRyYWN0T3duZXIgPSBfdG87CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBGaW5hbGl6ZSBvd25lcnNoaXAgcGFzcy4KICAgICAqCiAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgYnkgcGVuZGluZyBvd25lci4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNsYWltQ29udHJhY3RPd25lcnNoaXAoKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAocGVuZGluZ0NvbnRyYWN0T3duZXIgIT0gbXNnLnNlbmRlcikgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBjb250cmFjdE93bmVyID0gcGVuZGluZ0NvbnRyYWN0T3duZXI7CiAgICAgICAgZGVsZXRlIHBlbmRpbmdDb250cmFjdE93bmVyOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKCmNvbnRyYWN0IEVSQzIwSW50ZXJmYWNlIHsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKfQoKLyoqCiAqIEB0aXRsZSBHZW5lcmljIG93bmVkIGRlc3Ryb3lhYmxlIGNvbnRyYWN0CiAqLwpjb250cmFjdCBPYmplY3QgaXMgT3duZWQgewogICAgLyoqCiAgICAqICBDb21tb24gcmVzdWx0IGNvZGUuIE1lYW5zIGV2ZXJ5dGhpbmcgaXMgZmluZS4KICAgICovCiAgICB1aW50IGNvbnN0YW50IE9LID0gMTsKICAgIHVpbnQgY29uc3RhbnQgT1dORURfQUNDRVNTX0RFTklFRF9PTkxZX0NPTlRSQUNUX09XTkVSID0gODsKCiAgICBmdW5jdGlvbiB3aXRoZHJhd25Ub2tlbnMoYWRkcmVzc1tdIHRva2VucywgYWRkcmVzcyBfdG8pIG9ubHlDb250cmFjdE93bmVyIHJldHVybnModWludCkgewogICAgICAgIGZvcih1aW50IGk9MDtpPHRva2Vucy5sZW5ndGg7aSsrKSB7CiAgICAgICAgICAgIGFkZHJlc3MgdG9rZW4gPSB0b2tlbnNbaV07CiAgICAgICAgICAgIHVpbnQgYmFsYW5jZSA9IEVSQzIwSW50ZXJmYWNlKHRva2VuKS5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgICAgIGlmKGJhbGFuY2UgIT0gMCkKICAgICAgICAgICAgICAgIEVSQzIwSW50ZXJmYWNlKHRva2VuKS50cmFuc2ZlcihfdG8sYmFsYW5jZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBPSzsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja09ubHlDb250cmFjdE93bmVyKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgaWYgKGNvbnRyYWN0T3duZXIgPT0gbXNnLnNlbmRlcikgewogICAgICAgICAgICByZXR1cm4gT0s7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gT1dORURfQUNDRVNTX0RFTklFRF9PTkxZX0NPTlRSQUNUX09XTkVSOwogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBHZW5lcmFsIE11bHRpRXZlbnRzSGlzdG9yeSB1c2VyLgogKgogKi8KY29udHJhY3QgTXVsdGlFdmVudHNIaXN0b3J5QWRhcHRlciB7CgogICAgLyoqCiAgICAqICAgQGRldiBJdCBpcyBhZGRyZXNzIG9mIE11bHRpRXZlbnRzSGlzdG9yeSBjYWxsZXIgYXNzdW1pbmcgd2UgYXJlIGluc2lkZSBvZiBkZWxlZ2F0ZSBjYWxsLgogICAgKi8KICAgIGZ1bmN0aW9uIF9zZWxmKCkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBtc2cuc2VuZGVyOwogICAgfQp9Cgpjb250cmFjdCBEZWxheWVkUGF5bWVudHNFbWl0dGVyIGlzIE11bHRpRXZlbnRzSGlzdG9yeUFkYXB0ZXIgewogICAgZXZlbnQgRXJyb3IoYnl0ZXMzMiBtZXNzYWdlKTsKCiAgICBmdW5jdGlvbiBlbWl0RXJyb3IoYnl0ZXMzMiBfbWVzc2FnZSkgewogICAgICAgIEVycm9yKF9tZXNzYWdlKTsKICAgIH0KfQoKY29udHJhY3QgRGVsYXllZFBheW1lbnRzIGlzIE9iamVjdCB7CiAgIAogICAgdWludCBjb25zdGFudCBERUxBWUVEX1BBWU1FTlRTX1NDT1BFID0gNTIwMDA7CiAgICB1aW50IGNvbnN0YW50IERFTEFZRURfUEFZTUVOVFNfSU5WQUxJRF9JTlZPQ0FUSU9OID0gREVMQVlFRF9QQVlNRU5UU19TQ09QRSArIDE3OwoKICAgIC8vLyBAZGV2IGBQYXltZW50YCBpcyBhIHB1YmxpYyBzdHJ1Y3R1cmUgdGhhdCBkZXNjcmliZXMgdGhlIGRldGFpbHMgb2YKICAgIC8vLyAgZWFjaCBwYXltZW50IG1ha2luZyBpdCBlYXN5IHRvIHRyYWNrIHRoZSBtb3ZlbWVudCBvZiBmdW5kcwogICAgLy8vICB0cmFuc3BhcmVudGx5CiAgICBzdHJ1Y3QgUGF5bWVudCB7CiAgICAgICAgYWRkcmVzcyBzcGVuZGVyOyAgICAgICAgLy8gV2hvIGlzIHNlbmRpbmcgdGhlIGZ1bmRzCiAgICAgICAgdWludCBlYXJsaWVzdFBheVRpbWU7ICAgLy8gVGhlIGVhcmxpZXN0IGEgcGF5bWVudCBjYW4gYmUgbWFkZSAoVW5peCBUaW1lKQogICAgICAgIGJvb2wgY2FuY2VsZWQ7ICAgICAgICAgLy8gSWYgVHJ1ZSB0aGVuIHRoZSBwYXltZW50IGhhcyBiZWVuIGNhbmNlbGVkCiAgICAgICAgYm9vbCBwYWlkOyAgICAgICAgICAgICAgLy8gSWYgVHJ1ZSB0aGVuIHRoZSBwYXltZW50IGhhcyBiZWVuIHBhaWQKICAgICAgICBhZGRyZXNzIHJlY2lwaWVudDsgICAgICAvLyBXaG8gaXMgcmVjZWl2aW5nIHRoZSBmdW5kcwogICAgICAgIHVpbnQgYW1vdW50OyAgICAgICAgICAgIC8vIFRoZSBhbW91bnQgb2Ygd2VpIHNlbnQgaW4gdGhlIHBheW1lbnQKICAgICAgICB1aW50IHNlY3VyaXR5R3VhcmREZWxheTsvLyBUaGUgc2Vjb25kcyBgc2VjdXJpdHlHdWFyZGAgY2FuIGRlbGF5IHBheW1lbnQKICAgIH0KCiAgICBQYXltZW50W10gcHVibGljIGF1dGhvcml6ZWRQYXltZW50czsKCiAgICBhZGRyZXNzIHB1YmxpYyBzZWN1cml0eUd1YXJkOwogICAgdWludCBwdWJsaWMgYWJzb2x1dGVNaW5UaW1lTG9jazsKICAgIHVpbnQgcHVibGljIHRpbWVMb2NrOwogICAgdWludCBwdWJsaWMgbWF4U2VjdXJpdHlHdWFyZERlbGF5OwoKICAgIC8vIFNob3VsZCB1c2UgaW50ZXJmYWNlIG9mIHRoZSBlbWl0dGVyLCBidXQgYWRkcmVzcyBvZiBldmVudHMgaGlzdG9yeS4KICAgIGFkZHJlc3MgcHVibGljIGV2ZW50c0hpc3Rvcnk7CgogICAgLy8vIEBkZXYgVGhlIHdoaXRlIGxpc3Qgb2YgYXBwcm92ZWQgYWRkcmVzc2VzIGFsbG93ZWQgdG8gc2V0IHVwICYmIHJlY2VpdmUKICAgIC8vLyAgcGF5bWVudHMgZnJvbSB0aGlzIHZhdWx0CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBhbGxvd2VkU3BlbmRlcnM7CgogICAgLy8vIEBkZXYgVGhlIGFkZHJlc3MgYXNzaWduZWQgdGhlIHJvbGUgb2YgYHNlY3VyaXR5R3VhcmRgIGlzIHRoZSBvbmx5CiAgICAvLy8gIGFkZHJlc3NlcyB0aGF0IGNhbiBjYWxsIGEgZnVuY3Rpb24gd2l0aCB0aGlzIG1vZGlmaWVyCiAgICBtb2RpZmllciBvbmx5U2VjdXJpdHlHdWFyZCB7IGlmIChtc2cuc2VuZGVyICE9IHNlY3VyaXR5R3VhcmQpIHRocm93OyBfOyB9CgogICAgLy8gQGRldiBFdmVudHMgdG8gbWFrZSB0aGUgcGF5bWVudCBtb3ZlbWVudHMgZWFzeSB0byBmaW5kIG9uIHRoZSBibG9ja2NoYWluCiAgICBldmVudCBQYXltZW50QXV0aG9yaXplZCh1aW50IGluZGV4ZWQgaWRQYXltZW50LCBhZGRyZXNzIGluZGV4ZWQgcmVjaXBpZW50LCB1aW50IGFtb3VudCk7CiAgICBldmVudCBQYXltZW50RXhlY3V0ZWQodWludCBpbmRleGVkIGlkUGF5bWVudCwgYWRkcmVzcyBpbmRleGVkIHJlY2lwaWVudCwgdWludCBhbW91bnQpOwogICAgZXZlbnQgUGF5bWVudENhbmNlbGVkKHVpbnQgaW5kZXhlZCBpZFBheW1lbnQpOwogICAgZXZlbnQgRXRoZXJSZWNlaXZlZChhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludCBhbW91bnQpOwogICAgZXZlbnQgU3BlbmRlckF1dGhvcml6YXRpb24oYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIGJvb2wgYXV0aG9yaXplZCk7CgovLy8vLy8vLy8KLy8gQ29uc3RydWN0b3IKLy8vLy8vLy8vCgogICAgLy8vIEBub3RpY2UgVGhlIENvbnN0cnVjdG9yIGNyZWF0ZXMgdGhlIFZhdWx0IG9uIHRoZSBibG9ja2NoYWluCiAgICAvLy8gQHBhcmFtIF9hYnNvbHV0ZU1pblRpbWVMb2NrIFRoZSBtaW5pbXVtIG51bWJlciBvZiBzZWNvbmRzIGB0aW1lbG9ja2AgY2FuCiAgICAvLy8gIGJlIHNldCB0bywgaWYgc2V0IHRvIDAgdGhlIGBvd25lcmAgY2FuIHJlbW92ZSB0aGUgYHRpbWVMb2NrYCBjb21wbGV0ZWx5CiAgICAvLy8gQHBhcmFtIF90aW1lTG9jayBJbml0aWFsIG51bWJlciBvZiBzZWNvbmRzIHRoYXQgcGF5bWVudHMgYXJlIGRlbGF5ZWQKICAgIC8vLyAgYWZ0ZXIgdGhleSBhcmUgYXV0aG9yaXplZCAoYSBzZWN1cml0eSBwcmVjYXV0aW9uKQogICAgLy8vIEBwYXJhbSBfbWF4U2VjdXJpdHlHdWFyZERlbGF5IFRoZSBtYXhpbXVtIG51bWJlciBvZiBzZWNvbmRzIGluIHRvdGFsCiAgICAvLy8gICB0aGF0IGBzZWN1cml0eUd1YXJkYCBjYW4gZGVsYXkgYSBwYXltZW50IHNvIHRoYXQgdGhlIG93bmVyIGNhbiBjYW5jZWwKICAgIC8vLyAgIHRoZSBwYXltZW50IGlmIG5lZWRlZAogICAgZnVuY3Rpb24gRGVsYXllZFBheW1lbnRzKAogICAgICAgIHVpbnQgX2Fic29sdXRlTWluVGltZUxvY2ssCiAgICAgICAgdWludCBfdGltZUxvY2ssCiAgICAgICAgdWludCBfbWF4U2VjdXJpdHlHdWFyZERlbGF5KSAKICAgIHsKICAgICAgICBhYnNvbHV0ZU1pblRpbWVMb2NrID0gX2Fic29sdXRlTWluVGltZUxvY2s7CiAgICAgICAgdGltZUxvY2sgPSBfdGltZUxvY2s7CiAgICAgICAgc2VjdXJpdHlHdWFyZCA9IG1zZy5zZW5kZXI7CiAgICAgICAgbWF4U2VjdXJpdHlHdWFyZERlbGF5ID0gX21heFNlY3VyaXR5R3VhcmREZWxheTsKICAgIH0KCiAgICAvKioKICAgICAqIEVtaXRzIEVycm9yIGV2ZW50IHdpdGggc3BlY2lmaWVkIGVycm9yIG1lc3NhZ2UuCiAgICAgKgogICAgICogU2hvdWxkIG9ubHkgYmUgdXNlZCBpZiBubyBzdGF0ZSBjaGFuZ2VzIGhhcHBlbmVkLgogICAgICoKICAgICAqIEBwYXJhbSBfZXJyb3JDb2RlIGNvZGUgb2YgYW4gZXJyb3IKICAgICAqIEBwYXJhbSBfbWVzc2FnZSBlcnJvciBtZXNzYWdlLgogICAgICovCiAgICBmdW5jdGlvbiBfZXJyb3IodWludCBfZXJyb3JDb2RlLCBieXRlczMyIF9tZXNzYWdlKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQpIHsKICAgICAgICBEZWxheWVkUGF5bWVudHNFbWl0dGVyKGV2ZW50c0hpc3RvcnkpLmVtaXRFcnJvcihfbWVzc2FnZSk7CiAgICAgICAgcmV0dXJuIF9lcnJvckNvZGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIEV2ZW50c0hzdG9yeSBjb250cmFjdCBhZGRyZXNzLgogICAgICoKICAgICAqIENhbiBiZSBzZXQgb25seSBvbmNlLCBhbmQgb25seSBieSBjb250cmFjdCBvd25lci4KICAgICAqCiAgICAgKiBAcGFyYW0gX2V2ZW50c0hpc3RvcnkgTXVsdGlFdmVudHNIaXN0b3J5IGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBzZXR1cEV2ZW50c0hpc3RvcnkoYWRkcmVzcyBfZXZlbnRzSGlzdG9yeSkgcmV0dXJucyh1aW50IGVycm9yQ29kZSkgewogICAgICAgIGVycm9yQ29kZSA9IGNoZWNrT25seUNvbnRyYWN0T3duZXIoKTsKICAgICAgICBpZiAoZXJyb3JDb2RlICE9IE9LKSB7CiAgICAgICAgICAgIHJldHVybiBlcnJvckNvZGU7CiAgICAgICAgfQogICAgICAgIGlmIChldmVudHNIaXN0b3J5ICE9IDB4MCAmJiBldmVudHNIaXN0b3J5ICE9IF9ldmVudHNIaXN0b3J5KSB7CiAgICAgICAgICAgIHJldHVybiBERUxBWUVEX1BBWU1FTlRTX0lOVkFMSURfSU5WT0NBVElPTjsKICAgICAgICB9CiAgICAgICAgZXZlbnRzSGlzdG9yeSA9IF9ldmVudHNIaXN0b3J5OwogICAgICAgIHJldHVybiBPSzsKICAgIH0KCi8vLy8vLy8vLwovLyBIZWxwZXIgZnVuY3Rpb25zCi8vLy8vLy8vLwoKICAgIC8vLyBAbm90aWNlIFN0YXRlcyB0aGUgdG90YWwgbnVtYmVyIG9mIGF1dGhvcml6ZWQgcGF5bWVudHMgaW4gdGhpcyBjb250cmFjdAogICAgLy8vIEByZXR1cm4gVGhlIG51bWJlciBvZiBwYXltZW50cyBldmVyIGF1dGhvcml6ZWQgZXZlbiBpZiB0aGV5IHdlcmUgY2FuY2VsZWQKICAgIGZ1bmN0aW9uIG51bWJlck9mQXV0aG9yaXplZFBheW1lbnRzKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBhdXRob3JpemVkUGF5bWVudHMubGVuZ3RoOwogICAgfQoKLy8vLy8vCi8vIFJlY2VpdmUgRXRoZXIKLy8vLy8vCgogICAgLy8vIEBub3RpY2UgQ2FsbGVkIGFueXRpbWUgZXRoZXIgaXMgc2VudCB0byB0aGUgY29udHJhY3QgJiYgY3JlYXRlcyBhbiBldmVudAogICAgLy8vIHRvIG1vcmUgZWFzaWx5IHRyYWNrIHRoZSBpbmNvbWluZyB0cmFuc2FjdGlvbnMKICAgIGZ1bmN0aW9uIHJlY2VpdmVFdGhlcigpIHBheWFibGUgewogICAgICAgIEV0aGVyUmVjZWl2ZWQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBUaGUgZmFsbCBiYWNrIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuZXZlciBldGhlciBpcyBzZW50IHRvIHRoaXMKICAgIC8vLyAgY29udHJhY3QKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgIHJlY2VpdmVFdGhlcigpOwogICAgfQoKLy8vLy8vLy8KLy8gU3BlbmRlciBJbnRlcmZhY2UKLy8vLy8vLy8KCiAgICAvLy8gQG5vdGljZSBvbmx5IGBhbGxvd2VkU3BlbmRlcnNbXWAgQ3JlYXRlcyBhIG5ldyBgUGF5bWVudGAKICAgIC8vLyBAcGFyYW0gX3JlY2lwaWVudCBEZXN0aW5hdGlvbiBvZiB0aGUgcGF5bWVudAogICAgLy8vIEBwYXJhbSBfYW1vdW50IEFtb3VudCB0byBiZSBwYWlkIGluIHdlaQogICAgLy8vIEBwYXJhbSBfcGF5bWVudERlbGF5IE51bWJlciBvZiBzZWNvbmRzIHRoZSBwYXltZW50IGlzIHRvIGJlIGRlbGF5ZWQsIGlmCiAgICAvLy8gIHRoaXMgdmFsdWUgaXMgYmVsb3cgYHRpbWVMb2NrYCB0aGVuIHRoZSBgdGltZUxvY2tgIGRldGVybWluZXMgdGhlIGRlbGF5CiAgICAvLy8gQHJldHVybiBUaGUgUGF5bWVudCBJRCBudW1iZXIgZm9yIHRoZSBuZXcgYXV0aG9yaXplZCBwYXltZW50CiAgICBmdW5jdGlvbiBhdXRob3JpemVQYXltZW50KAogICAgICAgIGFkZHJlc3MgX3JlY2lwaWVudCwKICAgICAgICB1aW50IF9hbW91bnQsCiAgICAgICAgdWludCBfcGF5bWVudERlbGF5CiAgICApIHJldHVybnModWludCkgewoKICAgICAgICAvLyBGYWlsIGlmIHlvdSBhcmVudCBvbiB0aGUgYGFsbG93ZWRTcGVuZGVyc2Agd2hpdGUgbGlzdAogICAgICAgIGlmICghYWxsb3dlZFNwZW5kZXJzW21zZy5zZW5kZXJdKSB0aHJvdzsKICAgICAgICB1aW50IGlkUGF5bWVudCA9IGF1dGhvcml6ZWRQYXltZW50cy5sZW5ndGg7ICAgICAgIC8vIFVuaXF1ZSBQYXltZW50IElECiAgICAgICAgYXV0aG9yaXplZFBheW1lbnRzLmxlbmd0aCsrOwoKICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGxpbmVzIGZpbGwgb3V0IHRoZSBwYXltZW50IHN0cnVjdAogICAgICAgIFBheW1lbnQgcCA9IGF1dGhvcml6ZWRQYXltZW50c1tpZFBheW1lbnRdOwogICAgICAgIHAuc3BlbmRlciA9IG1zZy5zZW5kZXI7CgogICAgICAgIC8vIE92ZXJmbG93IHByb3RlY3Rpb24KICAgICAgICBpZiAoX3BheW1lbnREZWxheSA+IDEwKioxOCkgdGhyb3c7CgogICAgICAgIC8vIERldGVybWluZXMgdGhlIGVhcmxpZXN0IHRoZSByZWNpcGllbnQgY2FuIHJlY2VpdmUgcGF5bWVudCAoVW5peCB0aW1lKQogICAgICAgIHAuZWFybGllc3RQYXlUaW1lID0gX3BheW1lbnREZWxheSA+PSB0aW1lTG9jayA/CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93ICsgX3BheW1lbnREZWxheSA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93ICsgdGltZUxvY2s7CiAgICAgICAgcC5yZWNpcGllbnQgPSBfcmVjaXBpZW50OwogICAgICAgIHAuYW1vdW50ID0gX2Ftb3VudDsKICAgICAgICBQYXltZW50QXV0aG9yaXplZChpZFBheW1lbnQsIHAucmVjaXBpZW50LCBwLmFtb3VudCk7CiAgICAgICAgcmV0dXJuIGlkUGF5bWVudDsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBvbmx5IGBhbGxvd2VkU3BlbmRlcnNbXWAgVGhlIHJlY2lwaWVudCBvZiBhIHBheW1lbnQgY2FsbHMgdGhpcwogICAgLy8vICBmdW5jdGlvbiB0byBzZW5kIHRoZW1zZWx2ZXMgdGhlIGV0aGVyIGFmdGVyIHRoZSBgZWFybGllc3RQYXlUaW1lYCBoYXMKICAgIC8vLyAgZXhwaXJlZAogICAgLy8vIEBwYXJhbSBfaWRQYXltZW50IFRoZSBwYXltZW50IElEIHRvIGJlIGV4ZWN1dGVkCiAgICBmdW5jdGlvbiBjb2xsZWN0QXV0aG9yaXplZFBheW1lbnQodWludCBfaWRQYXltZW50KSB7CgogICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIGBfaWRQYXltZW50YCBoYXMgYmVlbiBhZGRlZCB0byB0aGUgcGF5bWVudHMgc3RydWN0CiAgICAgICAgaWYgKF9pZFBheW1lbnQgPj0gYXV0aG9yaXplZFBheW1lbnRzLmxlbmd0aCkgcmV0dXJuOwoKICAgICAgICBQYXltZW50IHAgPSBhdXRob3JpemVkUGF5bWVudHNbX2lkUGF5bWVudF07CgogICAgICAgIC8vIENoZWNraW5nIGZvciByZWFzb25zIG5vdCB0byBleGVjdXRlIHRoZSBwYXltZW50CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gcC5yZWNpcGllbnQpIHJldHVybjsKICAgICAgICBpZiAobm93IDwgcC5lYXJsaWVzdFBheVRpbWUpIHJldHVybjsKICAgICAgICBpZiAocC5jYW5jZWxlZCkgcmV0dXJuOwogICAgICAgIGlmIChwLnBhaWQpIHJldHVybjsKICAgICAgICBpZiAodGhpcy5iYWxhbmNlIDwgcC5hbW91bnQpIHJldHVybjsKCiAgICAgICAgcC5wYWlkID0gdHJ1ZTsgLy8gU2V0IHRoZSBwYXltZW50IHRvIGJlaW5nIHBhaWQKICAgICAgICBpZiAoIXAucmVjaXBpZW50LnNlbmQocC5hbW91bnQpKSB7ICAvLyBNYWtlIHRoZSBwYXltZW50CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgUGF5bWVudEV4ZWN1dGVkKF9pZFBheW1lbnQsIHAucmVjaXBpZW50LCBwLmFtb3VudCk7CiAgICAgfQoKLy8vLy8vLy8vCi8vIFNlY3VyaXR5R3VhcmQgSW50ZXJmYWNlCi8vLy8vLy8vLwoKICAgIC8vLyBAbm90aWNlIGBvbmx5U2VjdXJpdHlHdWFyZGAgRGVsYXlzIGEgcGF5bWVudCBmb3IgYSBzZXQgbnVtYmVyIG9mIHNlY29uZHMKICAgIC8vLyBAcGFyYW0gX2lkUGF5bWVudCBJRCBvZiB0aGUgcGF5bWVudCB0byBiZSBkZWxheWVkCiAgICAvLy8gQHBhcmFtIF9kZWxheSBUaGUgbnVtYmVyIG9mIHNlY29uZHMgdG8gZGVsYXkgdGhlIHBheW1lbnQKICAgIGZ1bmN0aW9uIGRlbGF5UGF5bWVudCh1aW50IF9pZFBheW1lbnQsIHVpbnQgX2RlbGF5KSBvbmx5U2VjdXJpdHlHdWFyZCB7CiAgICAgICAgaWYgKF9pZFBheW1lbnQgPj0gYXV0aG9yaXplZFBheW1lbnRzLmxlbmd0aCkgdGhyb3c7CgogICAgICAgIC8vIE92ZXJmbG93IHRlc3QKICAgICAgICBpZiAoX2RlbGF5ID4gMTAqKjE4KSB0aHJvdzsKCiAgICAgICAgUGF5bWVudCBwID0gYXV0aG9yaXplZFBheW1lbnRzW19pZFBheW1lbnRdOwoKICAgICAgICBpZiAoKHAuc2VjdXJpdHlHdWFyZERlbGF5ICsgX2RlbGF5ID4gbWF4U2VjdXJpdHlHdWFyZERlbGF5KSB8fAogICAgICAgICAgICAocC5wYWlkKSB8fAogICAgICAgICAgICAocC5jYW5jZWxlZCkpCiAgICAgICAgICAgIHRocm93OwoKICAgICAgICBwLnNlY3VyaXR5R3VhcmREZWxheSArPSBfZGVsYXk7CiAgICAgICAgcC5lYXJsaWVzdFBheVRpbWUgKz0gX2RlbGF5OwogICAgfQoKLy8vLy8vLy8KLy8gT3duZXIgSW50ZXJmYWNlCi8vLy8vLy8KCiAgICAvLy8gQG5vdGljZSBgb25seU93bmVyYCBDYW5jZWwgYSBwYXltZW50IGFsbCB0b2dldGhlcgogICAgLy8vIEBwYXJhbSBfaWRQYXltZW50IElEIG9mIHRoZSBwYXltZW50IHRvIGJlIGNhbmNlbGVkLgogICAgZnVuY3Rpb24gY2FuY2VsUGF5bWVudCh1aW50IF9pZFBheW1lbnQpIG9ubHlDb250cmFjdE93bmVyIHsKICAgICAgICBpZiAoX2lkUGF5bWVudCA+PSBhdXRob3JpemVkUGF5bWVudHMubGVuZ3RoKSB0aHJvdzsKCiAgICAgICAgUGF5bWVudCBwID0gYXV0aG9yaXplZFBheW1lbnRzW19pZFBheW1lbnRdOwoKCiAgICAgICAgaWYgKHAuY2FuY2VsZWQpIHRocm93OwogICAgICAgIGlmIChwLnBhaWQpIHRocm93OwoKICAgICAgICBwLmNhbmNlbGVkID0gdHJ1ZTsKICAgICAgICBQYXltZW50Q2FuY2VsZWQoX2lkUGF5bWVudCk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgYG9ubHlPd25lcmAgQWRkcyBhIHNwZW5kZXIgdG8gdGhlIGBhbGxvd2VkU3BlbmRlcnNbXWAgd2hpdGUgbGlzdAogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgY29udHJhY3QgYmVpbmcgYXV0aG9yaXplZC91bmF1dGhvcml6ZWQKICAgIC8vLyBAcGFyYW0gX2F1dGhvcml6ZSBgdHJ1ZWAgaWYgYXV0aG9yaXppbmcgYW5kIGBmYWxzZWAgaWYgdW5hdXRob3JpemluZwogICAgZnVuY3Rpb24gYXV0aG9yaXplU3BlbmRlcihhZGRyZXNzIF9zcGVuZGVyLCBib29sIF9hdXRob3JpemUpIG9ubHlDb250cmFjdE93bmVyIHsKICAgICAgICBhbGxvd2VkU3BlbmRlcnNbX3NwZW5kZXJdID0gX2F1dGhvcml6ZTsKICAgICAgICBTcGVuZGVyQXV0aG9yaXphdGlvbihfc3BlbmRlciwgX2F1dGhvcml6ZSk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgYG9ubHlPd25lcmAgU2V0cyB0aGUgYWRkcmVzcyBvZiBgc2VjdXJpdHlHdWFyZGAKICAgIC8vLyBAcGFyYW0gX25ld1NlY3VyaXR5R3VhcmQgQWRkcmVzcyBvZiB0aGUgbmV3IHNlY3VyaXR5IGd1YXJkCiAgICBmdW5jdGlvbiBzZXRTZWN1cml0eUd1YXJkKGFkZHJlc3MgX25ld1NlY3VyaXR5R3VhcmQpIG9ubHlDb250cmFjdE93bmVyIHsKICAgICAgICBzZWN1cml0eUd1YXJkID0gX25ld1NlY3VyaXR5R3VhcmQ7CiAgICB9CgogICAgLy8vIEBub3RpY2UgYG9ubHlPd25lcmAgQ2hhbmdlcyBgdGltZUxvY2tgOyB0aGUgbmV3IGB0aW1lTG9ja2AgY2Fubm90IGJlCiAgICAvLy8gIGxvd2VyIHRoYW4gYGFic29sdXRlTWluVGltZUxvY2tgCiAgICAvLy8gQHBhcmFtIF9uZXdUaW1lTG9jayBTZXRzIHRoZSBuZXcgbWluaW11bSBkZWZhdWx0IGB0aW1lTG9ja2AgaW4gc2Vjb25kczsKICAgIC8vLyAgcGVuZGluZyBwYXltZW50cyBtYWludGFpbiB0aGVpciBgZWFybGllc3RQYXlUaW1lYAogICAgZnVuY3Rpb24gc2V0VGltZWxvY2sodWludCBfbmV3VGltZUxvY2spIG9ubHlDb250cmFjdE93bmVyIHsKICAgICAgICBpZiAoX25ld1RpbWVMb2NrIDwgYWJzb2x1dGVNaW5UaW1lTG9jaykgdGhyb3c7CiAgICAgICAgdGltZUxvY2sgPSBfbmV3VGltZUxvY2s7CiAgICB9CgogICAgLy8vIEBub3RpY2UgYG9ubHlPd25lcmAgQ2hhbmdlcyB0aGUgbWF4aW11bSBudW1iZXIgb2Ygc2Vjb25kcwogICAgLy8vIGBzZWN1cml0eUd1YXJkYCBjYW4gZGVsYXkgYSBwYXltZW50CiAgICAvLy8gQHBhcmFtIF9tYXhTZWN1cml0eUd1YXJkRGVsYXkgVGhlIG5ldyBtYXhpbXVtIGRlbGF5IGluIHNlY29uZHMgdGhhdAogICAgLy8vICBgc2VjdXJpdHlHdWFyZGAgY2FuIGRlbGF5IHRoZSBwYXltZW50J3MgZXhlY3V0aW9uIGluIHRvdGFsCiAgICBmdW5jdGlvbiBzZXRNYXhTZWN1cml0eUd1YXJkRGVsYXkodWludCBfbWF4U2VjdXJpdHlHdWFyZERlbGF5KSBvbmx5Q29udHJhY3RPd25lciB7CiAgICAgICAgbWF4U2VjdXJpdHlHdWFyZERlbGF5ID0gX21heFNlY3VyaXR5R3VhcmREZWxheTsKICAgIH0KfQ=='.
	

]
