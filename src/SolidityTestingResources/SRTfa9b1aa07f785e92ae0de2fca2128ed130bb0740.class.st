Class {
	#name : #SRTfa9b1aa07f785e92ae0de2fca2128ed130bb0740,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfa9b1aa07f785e92ae0de2fca2128ed130bb0740 >> base64 [
	^ 'LyoKVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIE5ldXJvREFPIENvbnRyYWN0LgoKVGhlIE5ldXJvREFPIENvbnRyYWN0IGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgptb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgbGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkCmJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCihhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCgpUaGUgTmV1cm9EQU8gQ29udHJhY3QgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlCkdOVSBsZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIGxlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCmFsb25nIHdpdGggdGhlIE5ldXJvREFPIENvbnRyYWN0LiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCgpAYXV0aG9yIElseWEgU3ZpcmluIDw8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjA3NmUyOTc0NzE2ZTc1NmU2OTQ3Njk2ODc1NjM2NjcxNmU2OTYzMjk3NTcyIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPj4KCklGIFlPVSBBUkUgRU5KT1lFRCBJVCBET05BVEUgVE8gMHgzQWQzOEQxMDYwZDFjMzUwYUYyOTY4NUIyYjhFYzNlREU1Mjc0NTJCICEgOikKKi8KCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCmNvbnRyYWN0IG93bmVkIHsKCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIGNhbmRpZGF0ZTsKCiAgICBmdW5jdGlvbiBvd25lZCgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShvd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9vd25lciAhPSAwKTsKICAgICAgICBjYW5kaWRhdGUgPSBfb3duZXI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNvbmZpcm1Pd25lcigpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShjYW5kaWRhdGUgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgb3duZXIgPSBjYW5kaWRhdGU7CiAgICAgICAgZGVsZXRlIGNhbmRpZGF0ZTsKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCB7CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcHVibGljOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcHVibGljOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpIHB1YmxpYzsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEJhc2VOZXVyb0RBTyB7CiAgICBzdHJ1Y3QgU3BlY2lhbFRva2VuSG9sZGVyIHsKICAgICAgICB1aW50IGxpbWl0OwogICAgICAgIGJvb2wgaXNUZWFtOwogICAgfQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBTcGVjaWFsVG9rZW5Ib2xkZXIpIHB1YmxpYyBzcGVjaWFsczsKCiAgICBzdHJ1Y3QgVG9rZW5Ib2xkZXIgewogICAgICAgIHVpbnQgYmFsYW5jZTsKICAgICAgICB1aW50IGJhbGFuY2VCZWZvcmVVcGRhdGU7CiAgICAgICAgdWludCBiYWxhbmNlVXBkYXRlVGltZTsKICAgIH0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gVG9rZW5Ib2xkZXIpIHB1YmxpYyBob2xkZXJzOwoKICAgIGZ1bmN0aW9uIGZyZWV6ZWRCYWxhbmNlT2YoYWRkcmVzcyBfd2hvKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50KTsKfQoKY29udHJhY3QgTWFudWFsTWlncmF0aW9uIGlzIG93bmVkLCBFUkMyMCwgQmFzZU5ldXJvREFPIHsKCiAgICB1aW50ICAgIHB1YmxpYyBmcmVlemVkTW9tZW50OwogICAgYWRkcmVzcyBwdWJsaWMgb3JpZ2luYWw7CgogICAgbW9kaWZpZXIgZW5hYmxlZCB7CiAgICAgICAgcmVxdWlyZShvcmlnaW5hbCA9PSAwKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBNYW51YWxNaWdyYXRpb24oYWRkcmVzcyBfb3JpZ2luYWwpIHBheWFibGUgcHVibGljIG93bmVkKCkgewogICAgICAgIG9yaWdpbmFsID0gX29yaWdpbmFsOwogICAgICAgIHRvdGFsU3VwcGx5ID0gRVJDMjAob3JpZ2luYWwpLnRvdGFsU3VwcGx5KCk7CiAgICAgICAgaG9sZGVyc1t0aGlzXS5iYWxhbmNlID0gRVJDMjAob3JpZ2luYWwpLmJhbGFuY2VPZihvcmlnaW5hbCk7CiAgICAgICAgaG9sZGVyc1tvcmlnaW5hbF0uYmFsYW5jZSA9IHRvdGFsU3VwcGx5IC0gaG9sZGVyc1t0aGlzXS5iYWxhbmNlOwogICAgICAgIFRyYW5zZmVyKHRoaXMsIG9yaWdpbmFsLCBob2xkZXJzW29yaWdpbmFsXS5iYWxhbmNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBtaWdyYXRlTWFudWFsKGFkZHJlc3MgX3dobykgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShvcmlnaW5hbCAhPSAwKTsKICAgICAgICByZXF1aXJlKGhvbGRlcnNbX3dob10uYmFsYW5jZSA9PSAwKTsKICAgICAgICBib29sIGlzVGVhbTsKICAgICAgICB1aW50IGxpbWl0OwogICAgICAgIHVpbnQgYmFsYW5jZSA9IEJhc2VOZXVyb0RBTyhvcmlnaW5hbCkuZnJlZXplZEJhbGFuY2VPZihfd2hvKTsKICAgICAgICBob2xkZXJzW193aG9dLmJhbGFuY2UgPSBiYWxhbmNlOwogICAgICAgIChsaW1pdCwgaXNUZWFtKSA9IEJhc2VOZXVyb0RBTyhvcmlnaW5hbCkuc3BlY2lhbHMoX3dobyk7CiAgICAgICAgc3BlY2lhbHNbX3dob10gPSBTcGVjaWFsVG9rZW5Ib2xkZXIoe2xpbWl0OiBsaW1pdCwgaXNUZWFtOiBpc1RlYW19KTsKICAgICAgICBob2xkZXJzW29yaWdpbmFsXS5iYWxhbmNlIC09IGJhbGFuY2U7CiAgICAgICAgVHJhbnNmZXIob3JpZ2luYWwsIF93aG8sIGJhbGFuY2UpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBtaWdyYXRlTWFudWFsMihhZGRyZXNzIFtdIF93aG8sIHVpbnQgY291bnQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgY291bnQ7ICsraSkgewogICAgICAgICAgICBtaWdyYXRlTWFudWFsKF93aG9baV0pOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2VhbE1hbnVhbE1pZ3JhdGlvbihib29sIGZvcmNlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGZvcmNlIHx8IGhvbGRlcnNbb3JpZ2luYWxdLmJhbGFuY2UgPT0gMCk7CiAgICAgICAgZGVsZXRlIG9yaWdpbmFsOwogICAgfQoKICAgIGZ1bmN0aW9uIGJlZm9yZUJhbGFuY2VDaGFuZ2VzKGFkZHJlc3MgX3dobykgaW50ZXJuYWwgewogICAgICAgIGlmIChob2xkZXJzW193aG9dLmJhbGFuY2VVcGRhdGVUaW1lIDw9IGZyZWV6ZWRNb21lbnQpIHsKICAgICAgICAgICAgaG9sZGVyc1tfd2hvXS5iYWxhbmNlVXBkYXRlVGltZSA9IG5vdzsKICAgICAgICAgICAgaG9sZGVyc1tfd2hvXS5iYWxhbmNlQmVmb3JlVXBkYXRlID0gaG9sZGVyc1tfd2hvXS5iYWxhbmNlOwogICAgICAgIH0KICAgIH0KfQoKY29udHJhY3QgVG9rZW4gaXMgTWFudWFsTWlncmF0aW9uIHsKCiAgICBzdHJpbmcgIHB1YmxpYyBzdGFuZGFyZCAgICA9ICdUb2tlbiAwLjEnOwogICAgc3RyaW5nICBwdWJsaWMgbmFtZSAgICAgICAgPSAnTmV1cm9EQU8gMy4wJzsKICAgIHN0cmluZyAgcHVibGljIHN5bWJvbCAgICAgID0gIk5EQU8iOwogICAgdWludDggICBwdWJsaWMgZGVjaW1hbHMgICAgPSAwOwoKICAgIHVpbnQgICAgcHVibGljIHN0YXJ0VGltZTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2VkOwoKICAgIGV2ZW50IEJ1cm5lZChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAgIGZ1bmN0aW9uIFRva2VuKGFkZHJlc3MgX29yaWdpbmFsLCB1aW50IF9zdGFydFRpbWUpCiAgICAgICAgcGF5YWJsZSBwdWJsaWMgTWFudWFsTWlncmF0aW9uKF9vcmlnaW5hbCkgewogICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7ICAgIAogICAgfQoKICAgIGZ1bmN0aW9uIGF2YWlsYWJsZVRva2VucyhhZGRyZXNzIF93aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IF9hdmFpbCkgewogICAgICAgIF9hdmFpbCA9IGhvbGRlcnNbX3dob10uYmFsYW5jZTsKICAgICAgICB1aW50IGxpbWl0ID0gc3BlY2lhbHNbX3dob10ubGltaXQ7CiAgICAgICAgaWYgKGxpbWl0ICE9IDApIHsKICAgICAgICAgICAgdWludCBibG9ja2VkOwogICAgICAgICAgICB1aW50IHBlcmlvZHMgPSBmaXJzdFllYXJQZXJpb2RzKCk7CiAgICAgICAgICAgIGlmIChzcGVjaWFsc1tfd2hvXS5pc1RlYW0pIHsKICAgICAgICAgICAgICAgIGlmIChwZXJpb2RzICE9IDApIHsKICAgICAgICAgICAgICAgICAgICBibG9ja2VkID0gbGltaXQgKiAoNTAwIC0gcGVyaW9kcykgLyA1MDA7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBlcmlvZHMgPSAobm93IC0gc3RhcnRUaW1lKSAvIDEgeWVhcnM7CiAgICAgICAgICAgICAgICAgICAgKytwZXJpb2RzOwogICAgICAgICAgICAgICAgICAgIGlmIChwZXJpb2RzIDwgNSkgewogICAgICAgICAgICAgICAgICAgICAgICBibG9ja2VkID0gbGltaXQgKiAoMTAwIC0gcGVyaW9kcyAqIDIwKSAvIDEwMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAocGVyaW9kcyAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgYmxvY2tlZCA9IGxpbWl0ICogKDEwMCAtIHBlcmlvZHMpIC8gMTAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChfYXZhaWwgPD0gYmxvY2tlZCkgewogICAgICAgICAgICAgICAgX2F2YWlsID0gMDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF9hdmFpbCAtPSBibG9ja2VkOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBmaXJzdFllYXJQZXJpb2RzKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCBfcGVyaW9kcykgewogICAgICAgIF9wZXJpb2RzID0gMDsKICAgICAgICBpZiAobm93IDwgc3RhcnRUaW1lICsgMSB5ZWFycykgewogICAgICAgICAgICB1aW50OFsxMl0gbWVtb3J5IGxvZ2ljID0gWzEsIDIsIDMsIDQsIDQsIDQsIDUsIDYsIDcsIDgsIDksIDEwXTsKICAgICAgICAgICAgX3BlcmlvZHMgPSBsb2dpY1sobm93IC0gc3RhcnRUaW1lKSAvIDI4IGRheXNdOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfd2hvKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBob2xkZXJzW193aG9dLmJhbGFuY2U7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgZW5hYmxlZCB7CiAgICAgICAgcmVxdWlyZShhdmFpbGFibGVUb2tlbnMobXNnLnNlbmRlcikgPj0gX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKGhvbGRlcnNbX3RvXS5iYWxhbmNlICsgX3ZhbHVlID49IGhvbGRlcnNbX3RvXS5iYWxhbmNlKTsgLy8gb3ZlcmZsb3cKICAgICAgICBiZWZvcmVCYWxhbmNlQ2hhbmdlcyhtc2cuc2VuZGVyKTsKICAgICAgICBiZWZvcmVCYWxhbmNlQ2hhbmdlcyhfdG8pOwogICAgICAgIGhvbGRlcnNbbXNnLnNlbmRlcl0uYmFsYW5jZSAtPSBfdmFsdWU7CiAgICAgICAgaG9sZGVyc1tfdG9dLmJhbGFuY2UgKz0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIGVuYWJsZWQgewogICAgICAgIHJlcXVpcmUoYXZhaWxhYmxlVG9rZW5zKF9mcm9tKSA+PSBfdmFsdWUpOwogICAgICAgIHJlcXVpcmUoaG9sZGVyc1tfdG9dLmJhbGFuY2UgKyBfdmFsdWUgPj0gaG9sZGVyc1tfdG9dLmJhbGFuY2UpOyAvLyBvdmVyZmxvdwogICAgICAgIHJlcXVpcmUoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKICAgICAgICBiZWZvcmVCYWxhbmNlQ2hhbmdlcyhfZnJvbSk7CiAgICAgICAgYmVmb3JlQmFsYW5jZUNoYW5nZXMoX3RvKTsKICAgICAgICBob2xkZXJzW19mcm9tXS5iYWxhbmNlIC09IF92YWx1ZTsKICAgICAgICBob2xkZXJzW190b10uYmFsYW5jZSArPSBfdmFsdWU7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHB1YmxpYyBlbmFibGVkIHsKICAgICAgICByZXF1aXJlKGhvbGRlcnNbbXNnLnNlbmRlcl0uYmFsYW5jZSA+PSBfdmFsdWUpOwogICAgICAgIGJlZm9yZUJhbGFuY2VDaGFuZ2VzKG1zZy5zZW5kZXIpOwogICAgICAgIGhvbGRlcnNbbXNnLnNlbmRlcl0uYmFsYW5jZSAtPSBfdmFsdWU7CiAgICAgICAgdG90YWxTdXBwbHkgLT0gX3ZhbHVlOwogICAgICAgIEJ1cm5lZChtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgfQp9Cgpjb250cmFjdCBNaWdyYXRpb25BZ2VudCB7CiAgICBmdW5jdGlvbiBtaWdyYXRlRnJvbShhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSkgcHVibGljOwp9Cgpjb250cmFjdCBUb2tlbk1pZ3JhdGlvbiBpcyBUb2tlbiB7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIG1pZ3JhdGlvbkFnZW50OwogICAgdWludDI1NiBwdWJsaWMgdG90YWxNaWdyYXRlZDsKCiAgICBldmVudCBNaWdyYXRlKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICAgIGZ1bmN0aW9uIFRva2VuTWlncmF0aW9uKGFkZHJlc3MgX29yaWdpbmFsLCB1aW50IF9zdGFydFRpbWUpCiAgICAgICAgcGF5YWJsZSBwdWJsaWMgVG9rZW4oX29yaWdpbmFsLCBfc3RhcnRUaW1lKSB7fQoKICAgIC8vIE1pZ3JhdGUgX3ZhbHVlIG9mIHRva2VucyB0byB0aGUgbmV3IHRva2VuIGNvbnRyYWN0CiAgICBmdW5jdGlvbiBtaWdyYXRlKCkgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUobWlncmF0aW9uQWdlbnQgIT0gMCk7CiAgICAgICAgdWludCB2YWx1ZSA9IGhvbGRlcnNbbXNnLnNlbmRlcl0uYmFsYW5jZTsKICAgICAgICByZXF1aXJlKHZhbHVlICE9IDApOwogICAgICAgIGJlZm9yZUJhbGFuY2VDaGFuZ2VzKG1zZy5zZW5kZXIpOwogICAgICAgIGJlZm9yZUJhbGFuY2VDaGFuZ2VzKHRoaXMpOwogICAgICAgIGhvbGRlcnNbbXNnLnNlbmRlcl0uYmFsYW5jZSAtPSB2YWx1ZTsKICAgICAgICBob2xkZXJzW3RoaXNdLmJhbGFuY2UgKz0gdmFsdWU7CiAgICAgICAgdG90YWxNaWdyYXRlZCArPSB2YWx1ZTsKICAgICAgICBNaWdyYXRpb25BZ2VudChtaWdyYXRpb25BZ2VudCkubWlncmF0ZUZyb20obXNnLnNlbmRlciwgdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIHRoaXMsIHZhbHVlKTsKICAgICAgICBNaWdyYXRlKG1zZy5zZW5kZXIsIG1pZ3JhdGlvbkFnZW50LCB2YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TWlncmF0aW9uQWdlbnQoYWRkcmVzcyBfYWdlbnQpIGV4dGVybmFsIG9ubHlPd25lciBlbmFibGVkIHsKICAgICAgICByZXF1aXJlKG1pZ3JhdGlvbkFnZW50ID09IDApOwogICAgICAgIG1pZ3JhdGlvbkFnZW50ID0gX2FnZW50OwogICAgfQp9Cgpjb250cmFjdCBOZXVyb0RBTyBpcyBUb2tlbk1pZ3JhdGlvbiB7CgogICAgZnVuY3Rpb24gTmV1cm9EQU8oYWRkcmVzcyBfb3JpZ2luYWwsIHVpbnQgX3N0YXJ0VGltZSkKICAgICAgICBwYXlhYmxlIHB1YmxpYyBUb2tlbk1pZ3JhdGlvbihfb3JpZ2luYWwsIF9zdGFydFRpbWUpIHt9CiAgICAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZnJlZXplVGhlTW9tZW50KCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgZnJlZXplZE1vbWVudCA9IG5vdzsKICAgIH0KCiAgICAvKiogR2V0IGJhbGFuY2Ugb2YgX3dobyBmb3IgZnJlZXplZCBtb21lbnQKICAgICAqICBmcmVlemVUaGVNb21lbnQoKQogICAgICovCiAgICBmdW5jdGlvbiBmcmVlemVkQmFsYW5jZU9mKGFkZHJlc3MgX3dobykgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCkgewogICAgICAgIGlmIChob2xkZXJzW193aG9dLmJhbGFuY2VVcGRhdGVUaW1lIDw9IGZyZWV6ZWRNb21lbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGhvbGRlcnNbX3dob10uYmFsYW5jZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gaG9sZGVyc1tfd2hvXS5iYWxhbmNlQmVmb3JlVXBkYXRlOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24ga2lsbE1lKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSA9PSAwKTsKICAgICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbnRUb2tlbnModWludCBfdG9rZW5zLCBhZGRyZXNzIF93aG8sIGJvb2wgX2lzVGVhbSkgZW5hYmxlZCBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGhvbGRlcnNbdGhpc10uYmFsYW5jZSA+IDApOwogICAgICAgIHJlcXVpcmUoaG9sZGVyc1ttc2cuc2VuZGVyXS5iYWxhbmNlICsgX3Rva2VucyA+IGhvbGRlcnNbbXNnLnNlbmRlcl0uYmFsYW5jZSk7IC8vIG92ZXJmbG93CiAgICAgICAgcmVxdWlyZShfdG9rZW5zID4gMCk7CiAgICAgICAgYmVmb3JlQmFsYW5jZUNoYW5nZXMoX3dobyk7CiAgICAgICAgYmVmb3JlQmFsYW5jZUNoYW5nZXModGhpcyk7CiAgICAgICAgaWYgKGhvbGRlcnNbX3dob10uYmFsYW5jZSA9PSAwKSB7CiAgICAgICAgICAgIC8vIHNldCBpc1RlYW0gb25seSBvbmNlIQogICAgICAgICAgICBzcGVjaWFsc1tfd2hvXS5pc1RlYW0gPSBfaXNUZWFtOwogICAgICAgIH0KICAgICAgICBob2xkZXJzW193aG9dLmJhbGFuY2UgKz0gX3Rva2VuczsKICAgICAgICBzcGVjaWFsc1tfd2hvXS5saW1pdCArPSBfdG9rZW5zOwogICAgICAgIGhvbGRlcnNbdGhpc10uYmFsYW5jZSAtPSBfdG9rZW5zOwogICAgICAgIFRyYW5zZmVyKHRoaXMsIF93aG8sIF90b2tlbnMpOwogICAgfQp9'.
	

]
