Class {
	#name : #SRT1c43991F89A000A803e0443d68a26684cdE6dC2F,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1c43991F89A000A803e0443d68a26684cdE6dC2F >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgppbnRlcmZhY2UgR2FtZSB7CiAgICBldmVudCBHYW1lU3RhcnRlZCh1aW50IGJldEFtb3VudCk7CiAgICBldmVudCBOZXdQbGF5ZXJBZGRlZCh1aW50IG51bVBsYXllcnMsIHVpbnQgcHJpemVBbW91bnQpOwogICAgZXZlbnQgR2FtZUZpbmlzaGVkKGFkZHJlc3Mgd2lubmVyKTsKCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUGFydGljaXBhdGUgaW4gZ2FtZS4gUHJveHkgZm9yIHBsYXkgbWV0aG9kCiAgICBmdW5jdGlvbiBnZXRQcml6ZUFtb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsgICAgIC8vR2V0IHBvdGVudGlhbCBvciBhY3R1YWwgcHJpemUgYW1vdW50CiAgICBmdW5jdGlvbiBnZXROdW1XaW5uZXJzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCwgdWludCk7CiAgICBmdW5jdGlvbiBnZXRQbGF5ZXJzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYWRkcmVzc1tdKTsgICAgICAgICAgIC8vR2V0IGZ1bGwgbGlzdCBvZiBwbGF5ZXJzCiAgICBmdW5jdGlvbiBnZXRXaW5uZXJzKCkgcHVibGljIHZpZXcgcmV0dXJucyhhZGRyZXNzW10gbWVtb3J5IHBsYXllcnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnRbXSBtZW1vcnkgcHJpemVzKTsgIC8vR2V0IHdpbm5lcnMuIEFjY2Vzc2FibGUgb25seSB3aGVuIGZpbmlzaGVkCiAgICBmdW5jdGlvbiBnZXRTdGF0KCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCwgdWludCwgdWludCk7ICAgICAgIC8vU2hvcnQgc3RhdCBvbiBnYW1lCgogICAgZnVuY3Rpb24gY2FsY2F1bHRlUHJpemVzKCkgcHVibGljIHJldHVybnMgKHVpbnRbXSk7CgogICAgZnVuY3Rpb24gZmluaXNoKCkgcHVibGljOyAgICAgICAgICAgICAgICAgICAgICAgIC8vQ2xvc2VzIGdhbWUgY2hvb3NlcyB3aW5uZXIKCiAgICBmdW5jdGlvbiByZXZva2UoKSBwdWJsaWM7ICAgICAgICAgICAgICAgICAgICAgICAgLy9TdG9wIGdhbWUgYW5kIHJldHVybiBtb25leSB0byBwbGF5ZXJzCiAgICAvLyBmdW5jdGlvbiBtb3ZlKGFkZHJlc3MgbmV4dEdhbWUpOyAgICAgICAgICAgICAgLy9Nb3ZlIHBsYXllcnMgYmV0cyB0byBhbm90aGVyIGdhbWUKfQoKbGlicmFyeSBUaWNrZXRMaWIgewogICAgc3RydWN0IFRpY2tldCB7CiAgICAgICAgdWludDQwIGJsb2NrX251bWJlcjsKICAgICAgICB1aW50MzIgYmxvY2tfdGltZTsKICAgICAgICB1aW50IHByaXplOwogICAgfQp9Cgpjb250cmFjdCBVbmlsb3RQcml6ZUNhbGN1bGF0b3IgewogICAgLy9DYWxjdWxhdGlvbiBjb25zdGFudHMKICAgIHVpbnQ2NCAgY29uc3RhbnQgYWNjdXJhY3kgICAgICAgICAgICAgICAgICAgPSAxMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgdWludDggIGNvbnN0YW50IE1BWF9YX0ZPUl9ZICAgICAgICAgICAgICAgID0gMTk1OyAgLy8gMTkuNQoKICAgIHVpbnQ4ICBjb25zdGFudCBtaW5Qcml6ZUNvZWZpY2VudCAgICAgICAgICA9IDE7CiAgICB1aW50OCAgY29uc3RhbnQgcGVyY2VudE9mV2lubmVycyAgICAgICAgICAgPSA1OyAgICAvLyA1JQogICAgdWludDggIGNvbnN0YW50IHBlcmNlbnRPZkZpeGVkUHJpemVXaW5uZXJzID0gMjA7ICAgLy8gMjAlCgogICAgdWludDggIGNvbnN0YW50IGdhbWVDb21taXNpb24gICAgICAgICAgICAgID0gMTA7ICAgLy8gMTAlCiAgICB1aW50OCAgY29uc3RhbnQgYm9udXNHYW1lQ29tbWlzaW9uICAgICAgICAgPSAxMDsgICAvLyAxMCUKICAgIHVpbnQ4ICBjb25zdGFudCB0b2tlbkhvbGVyR2FtZUNvbW1pc2lvbiAgICA9IDA7ICAgIC8vIDAlCiAgICAvLyBFbmQgQ2FsY3VsYXRpb24gY29uc3RhbnRzCgogICAgZXZlbnQgRGVidWcodWludCk7CgogICAgZnVuY3Rpb24gZ2V0UHJpemVBbW91bnQodWludCB0b3RhbEFtb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICBwdXJlCiAgICAgICAgcmV0dXJucyAodWludCByZXN1bHQpCiAgICB7CiAgICAgICAgdWludCB0b3RhbENvbW1pc2lvbiA9IGdhbWVDb21taXNpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYm9udXNHYW1lQ29tbWlzaW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIHRva2VuSG9sZXJHYW1lQ29tbWlzaW9uOwoKICAgICAgICAvL0NhbGN1bGF0aW9uIGlzIG9kZCBvbiBwdXJwb3NlLiAgSXQgaXMgYSBzb3J0IG9mIGNlaWxpbmcgZWZmZWN0IHRvCiAgICAgICAgLy8gbWF4aW1pemUgYW1vdW50IG9mIHByaXplCiAgICAgICAgcmVzdWx0ID0gKCB0b3RhbEFtb3VudCAtICggKCB0b3RhbEFtb3VudCAqIHRvdGFsQ29tbWlzaW9uKSAvIDEwMCkgKTsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXROdW1XaW5uZXJzKHVpbnQgbnVtUGxheWVycykKICAgICAgICBwdWJsaWMKICAgICAgICBwdXJlCiAgICAgICAgcmV0dXJucyAodWludDE2IG51bVdpbm5lcnMsIHVpbnQxNiBudW1GaXhlZEFtb3VudFdpbm5lcnMpCiAgICB7CiAgICAgICAgLy8gQ2FsY3VsYXRpb24gaXMgb2RkIG9uIHB1cnBvc2UuIEl0IGlzIGEgc29ydCBvZiBjZWlsaW5nIGVmZmVjdCB0bwogICAgICAgIC8vIG1heGltaXplIG51bWJlciBvZiB3aW5uZXJzCiAgICAgICAgdWludDE2IHRvdGFOdW1sV2lubmVycyA9IHVpbnQxNiggbnVtUGxheWVycyAtICggKG51bVBsYXllcnMgKiAoIDEwMCAtIHBlcmNlbnRPZldpbm5lcnMgKSApIC8gMTAwICkgKTsKCgogICAgICAgIG51bUZpeGVkQW1vdW50V2lubmVycyA9IHVpbnQxNiggKHRvdGFOdW1sV2lubmVycyAqIHBlcmNlbnRPZkZpeGVkUHJpemVXaW5uZXJzKSAvIDEwMCApOwogICAgICAgIG51bVdpbm5lcnMgPSB1aW50MTYoIHRvdGFOdW1sV2lubmVycyAtIG51bUZpeGVkQW1vdW50V2lubmVycyApOwoKICAgICAgICByZXR1cm4gKG51bVdpbm5lcnMsIG51bUZpeGVkQW1vdW50V2lubmVycyk7CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY2F1bHRlUHJpemVzKHVpbnQgYmV0LCB1aW50IG51bVBsYXllcnMpCiAgICAgICAgcHVibGljCiAgICAgICAgcHVyZQogICAgICAgIHJldHVybnMgKHVpbnRbNTBdIG1lbW9yeSBwcml6ZXMpCiAgICB7CiAgICAgICAgdmFyIChudW1XaW5uZXJzLCBudW1GaXhlZEFtb3VudFdpbm5lcnMpID0gZ2V0TnVtV2lubmVycyhudW1QbGF5ZXJzKTsKCiAgICAgICAgcmVxdWlyZSggdWludChudW1XaW5uZXJzICsgbnVtRml4ZWRBbW91bnRXaW5uZXJzKSA8PSBwcml6ZXMubGVuZ3RoICk7CgogICAgICAgIHVpbnRbXSBtZW1vcnkgeSA9IG5ldyB1aW50W10oKG51bVdpbm5lcnMgLSAxKSk7CiAgICAgICAgdWludCB6ID0gMDsgLy8gU3VtIG9mIGFsbCBZIHZhbHVlcwoKICAgICAgICBpZiAoIG51bVdpbm5lcnMgPT0gMSApIHsKICAgICAgICAgICAgcHJpemVzWzBdID0gZ2V0UHJpemVBbW91bnQodWludChiZXQqbnVtUGxheWVycykpOwoKICAgICAgICAgICAgcmV0dXJuIHByaXplczsKICAgICAgICB9IGVsc2UgaWYgKCBudW1XaW5uZXJzIDwgMSApIHsKICAgICAgICAgICAgcmV0dXJuIHByaXplczsKICAgICAgICB9CgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IHkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgeVtpXSA9IGZvcm11bGEoIChjYWxjdWxhdGVTdGVwKG51bVdpbm5lcnMpICogaSkgKTsKICAgICAgICAgICAgeiArPSB5W2ldOwogICAgICAgIH0KCiAgICAgICAgYm9vbCBzdG9wID0gZmFsc2U7CgogICAgICAgIGZvciAoaSA9IDA7IGkgPCAxMDsgaSsrKSB7CiAgICAgICAgICAgIHVpbnRbNV0gbWVtb3J5IGNodW5rID0gZGlzdHJpYnV0ZVByaXplQ2FsY3VsYXRpb24oCiAgICAgICAgICAgICAgICBpLCB6LCB5LCBudW1QbGF5ZXJzLCBiZXQpOwoKICAgICAgICAgICAgZm9yICggdWludCBqID0gMDsgaiA8IGNodW5rLmxlbmd0aDsgaisrICkgewogICAgICAgICAgICAgICAgaWYgKCAoIChpICogY2h1bmsubGVuZ3RoKSArIGogKSA+PSAoIG51bVdpbm5lcnMgKyBudW1GaXhlZEFtb3VudFdpbm5lcnMgKSApIHsKICAgICAgICAgICAgICAgICAgICBzdG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBwcml6ZXNbIChpICogY2h1bmsubGVuZ3RoKSArIGogXSA9IGNodW5rW2pdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIHN0b3AgKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHByaXplczsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXN0cmlidXRlUHJpemVDYWxjdWxhdGlvbiAodWludCBjaHVua051bWJlciwgdWludCB6LCB1aW50W10gbWVtb3J5IHksIHVpbnQgdG90YWxOdW1QbGF5ZXJzLCB1aW50IGJldCkKICAgICAgICBwcml2YXRlCiAgICAgICAgcHVyZQogICAgICAgIHJldHVybnMgKHVpbnRbNV0gbWVtb3J5IHByaXplcykKICAgIHsKICAgICAgICB2YXIobnVtV2lubmVycywgbnVtRml4ZWRBbW91bnRXaW5uZXJzKSA9IGdldE51bVdpbm5lcnModG90YWxOdW1QbGF5ZXJzKTsKICAgICAgICB1aW50IHByaXplQW1vdW50Rm9yRGVsaWdhdGlvbiA9IGdldFByaXplQW1vdW50KCAodG90YWxOdW1QbGF5ZXJzICogYmV0KSApOwogICAgICAgIHByaXplQW1vdW50Rm9yRGVsaWdhdGlvbiAtPSB1aW50KCAoIGJldCAqIG1pblByaXplQ29lZmljZW50ICkgKiB1aW50KCBudW1XaW5uZXJzICsgbnVtRml4ZWRBbW91bnRXaW5uZXJzICkgKTsKCiAgICAgICAgdWludCBtYWluV2lubmVyQmFzZUFtb3VudCA9ICggKHByaXplQW1vdW50Rm9yRGVsaWdhdGlvbiAqIGFjY3VyYWN5KSAvICggKCAoIHogKiBhY2N1cmFjeSApIC8gKCAyICogeVswXSApICkgKyAoIDEgKiBhY2N1cmFjeSApICkgKTsKICAgICAgICB1aW50IHVuZGVsaWdhdGVkQW1vdW50ICAgID0gcHJpemVBbW91bnRGb3JEZWxpZ2F0aW9uOwoKICAgICAgICB1aW50IHN0YXJ0UG9pbnQgPSBjaHVua051bWJlciAqIHByaXplcy5sZW5ndGg7CgogICAgICAgIGZvciAoIHVpbnQgaSA9IDA7IGkgPCBwcml6ZXMubGVuZ3RoOyBpKysgKSB7CiAgICAgICAgICAgIGlmICggaSA+PSB1aW50KG51bVdpbm5lcnMgKyBudW1GaXhlZEFtb3VudFdpbm5lcnMpICkgewogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcHJpemVzWyBpIF0gPSAoYmV0ICogbWluUHJpemVDb2VmaWNlbnQpOwogICAgICAgICAgICB1aW50IGV4dHJhUHJpemUgPSAwOwoKICAgICAgICAgICAgaWYgKCBpID09ICggbnVtV2lubmVycyAtIDEgKSApIHsKICAgICAgICAgICAgICAgIGV4dHJhUHJpemUgPSB1bmRlbGlnYXRlZEFtb3VudDsKICAgICAgICAgICAgfSBlbHNlIGlmICggaSA9PSAwICYmIGNodW5rTnVtYmVyID09IDAgKSB7CiAgICAgICAgICAgICAgICBleHRyYVByaXplID0gbWFpbldpbm5lckJhc2VBbW91bnQ7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoICggc3RhcnRQb2ludCArIGkgKSA8IG51bVdpbm5lcnMgKSB7CiAgICAgICAgICAgICAgICBleHRyYVByaXplID0gKCAoIHlbICggc3RhcnRQb2ludCArIGkgKSAtIDEgXSAqIChwcml6ZUFtb3VudEZvckRlbGlnYXRpb24gLSBtYWluV2lubmVyQmFzZUFtb3VudCkgKSAvIHopOwogICAgICAgICAgICB9CgogICAgICAgICAgICBwcml6ZXNbIGkgXSArPSBleHRyYVByaXplOwogICAgICAgICAgICB1bmRlbGlnYXRlZEFtb3VudCAtPSBleHRyYVByaXplOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHByaXplczsKICAgIH0KCiAgICBmdW5jdGlvbiBmb3JtdWxhKHVpbnQgeCkKICAgICAgICBwdWJsaWMKICAgICAgICBwdXJlCiAgICAgICAgcmV0dXJucyAodWludCB5KQogICAgewogICAgICAgIHkgPSAoICgxICogYWNjdXJhY3kqKjIpIC8gKHggKyAoNSphY2N1cmFjeS8xMCkpKSAtICgoNSAqIGFjY3VyYWN5KSAvIDEwMCk7CgogICAgICAgIHJldHVybiB5OwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVN0ZXAodWludCBudW1XaW5uZXJzKQogICAgICAgIHB1YmxpYwogICAgICAgIHB1cmUKICAgICAgICByZXR1cm5zKHVpbnQgc3RlcCkKICAgIHsKICAgICAgICBzdGVwID0gKCBNQVhfWF9GT1JfWSAqIGFjY3VyYWN5IC8gMTAgKSAvIG51bVdpbm5lcnM7CgogICAgICAgIHJldHVybiBzdGVwOwogICAgfQp9Cgpjb250cmFjdCBCYXNlVW5pbG90R2FtZSBpcyBHYW1lIHsKICAgIGVudW0gU3RhdGUgewogICAgICAgIEFDVElWRSwKICAgICAgICBFTkRFRCwKICAgICAgICBSRVZPS0lORywKICAgICAgICBSRVZPS0VELAogICAgICAgIE1PVkVECiAgICB9CgogICAgZXZlbnQgUHJpemVSZXN1bHRDYWxjdWxhdGVkKHVpbnQgc2l6ZSwgdWludFtdIHByaXplcyk7CgogICAgU3RhdGUgc3RhdGU7CiAgICBhZGRyZXNzIGFkbWluaXN0cmF0b3I7CiAgICB1aW50IGJldDsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IFRpY2tldExpYi5UaWNrZXQpIGludGVybmFsIHRpY2tldHM7CiAgICBhZGRyZXNzW10gaW50ZXJuYWwgdGlja2V0SW5kZXg7CgogICAgVW5pbG90UHJpemVDYWxjdWxhdG9yIGNhbGN1bGF0b3I7CgogICAgLy9Nb2RpZmllcnMKICAgIG1vZGlmaWVyIG9ubHlBZG1pbmlzdHJhdG9yKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhZG1pbmlzdHJhdG9yKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlQbGF5ZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IGFkbWluaXN0cmF0b3IpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgdmFsaWRCZXQoKSB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPT0gYmV0KTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGFjdGl2ZUdhbWUoKSB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5BQ1RJVkUpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaW5hY3RpdmVHYW1lKCkgewogICAgICAgIHJlcXVpcmUoc3RhdGUgIT0gU3RhdGUuQUNUSVZFKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGZpbmlzaGVkR2FtZSgpIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkVOREVEKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vUHJpdmF0ZSBtZXRob2RzCgogICAgZnVuY3Rpb24gZ2V0U3RhdGUoKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zKFN0YXRlKQogICAgewogICAgICAgIHJldHVybiBzdGF0ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRCZXQoKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHJldHVybiBiZXQ7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UGxheWVycygpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zKGFkZHJlc3NbXSkKICAgIHsKICAgICAgICByZXR1cm4gdGlja2V0SW5kZXg7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UGxheWVyRGV0YWlscyhhZGRyZXNzIHBsYXllcikKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgaW5hY3RpdmVHYW1lCiAgICAgICAgcmV0dXJucyAodWludCwgdWludCwgdWludCkKICAgIHsKICAgICAgICBUaWNrZXRMaWIuVGlja2V0IG1lbW9yeSB0aWNrZXQgPSB0aWNrZXRzW3BsYXllcl07CgogICAgICAgIHJldHVybiAodGlja2V0LmJsb2NrX251bWJlciwgdGlja2V0LmJsb2NrX3RpbWUsIHRpY2tldC5wcml6ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TnVtV2lubmVycygpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50LCB1aW50KQogICAgewogICAgICAgIHZhcihudW1XaW5uZXJzLCBudW1GaXhlZEFtb3VudFdpbm5lcnMpID0gY2FsY3VsYXRvci5nZXROdW1XaW5uZXJzKHRpY2tldEluZGV4Lmxlbmd0aCk7CgogICAgICAgIHJldHVybiAobnVtV2lubmVycywgbnVtRml4ZWRBbW91bnRXaW5uZXJzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQcml6ZUFtb3VudCgpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50IHJlc3VsdCkKICAgIHsKICAgICAgICB1aW50IHRvdGFsQW1vdW50ID0gdGhpcy5iYWxhbmNlOwoKICAgICAgICBpZiAoIHN0YXRlID09IFN0YXRlLkVOREVEICkgewogICAgICAgICAgICB0b3RhbEFtb3VudCA9IGJldCAqIHRpY2tldEluZGV4Lmxlbmd0aDsKICAgICAgICB9CgogICAgICAgIHJlc3VsdCA9IGNhbGN1bGF0b3IuZ2V0UHJpemVBbW91bnQodG90YWxBbW91bnQpOwoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFN0YXQoKQogICAgICAgIHB1YmxpYwogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAoIHVpbnQsIHVpbnQsIHVpbnQgKQogICAgewogICAgICAgIHZhciAobnVtV2lubmVycywgbnVtRml4ZWRBbW91bnRXaW5uZXJzKSA9IGdldE51bVdpbm5lcnMoKTsKICAgICAgICByZXR1cm4gKHRpY2tldEluZGV4Lmxlbmd0aCwgZ2V0UHJpemVBbW91bnQoKSwgdWludChudW1XaW5uZXJzICsgbnVtRml4ZWRBbW91bnRXaW5uZXJzKSk7CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY2F1bHRlUHJpemVzKCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zKHVpbnRbXSBtZW1vcnkgcmVzdWx0KQogICAgewogICAgICAgIHZhcihudW1XaW5uZXJzLCBudW1GaXhlZEFtb3VudFdpbm5lcnMpID0gZ2V0TnVtV2lubmVycygpOwogICAgICAgIHVpbnQxNiB0b3RhbE51bVdpbm5lcnMgPSB1aW50MTYoIG51bVdpbm5lcnMgKyBudW1GaXhlZEFtb3VudFdpbm5lcnMgKTsKICAgICAgICByZXN1bHQgPSBuZXcgdWludFtdKCB0b3RhbE51bVdpbm5lcnMgKTsKCgogICAgICAgIHVpbnRbNTBdIG1lbW9yeSBwcml6ZXMgPSBjYWxjdWxhdG9yLmNhbGNhdWx0ZVByaXplcygKICAgICAgICBiZXQsIHRpY2tldEluZGV4Lmxlbmd0aCk7CgogICAgICAgIGZvciAodWludDE2IGkgPSAwOyBpIDwgdG90YWxOdW1XaW5uZXJzOyBpKyspIHsKICAgICAgICAgICAgcmVzdWx0W2ldID0gcHJpemVzW2ldOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICBmdW5jdGlvbiByZXZva2UoKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yCiAgICAgICAgYWN0aXZlR2FtZQogICAgewogICAgICAgIGZvciAodWludDI0IGkgPSAwOyBpIDwgdGlja2V0SW5kZXgubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGlja2V0SW5kZXhbaV0udHJhbnNmZXIoYmV0KTsKICAgICAgICB9CgogICAgICAgIHN0YXRlID0gU3RhdGUuUkVWT0tFRDsKICAgIH0KfQoKY29udHJhY3QgVW5pbG90VGFpbEV0aGVyIGlzIEJhc2VVbmlsb3RHYW1lIHsKCiAgICB1aW50NjQgd2lubmVySW5kZXg7CgogICAgLy9QdWJsaWMgbWV0aG9kcwogICAgZnVuY3Rpb24gVW5pbG90VGFpbEV0aGVyKHVpbnQgYmV0QW1vdW50LCBhZGRyZXNzIGNhbGN1bGF0b3JDb250cmFjdEFkZHJlc3MpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5BQ1RJVkU7CiAgICAgICAgYWRtaW5pc3RyYXRvciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYmV0ID0gYmV0QW1vdW50OwoKICAgICAgICBjYWxjdWxhdG9yID0gVW5pbG90UHJpemVDYWxjdWxhdG9yKGNhbGN1bGF0b3JDb250cmFjdEFkZHJlc3MpOwoKICAgICAgICBHYW1lU3RhcnRlZChiZXRBbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFdpbm5lcnMoKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICBmaW5pc2hlZEdhbWUKICAgICAgICByZXR1cm5zKGFkZHJlc3NbXSBtZW1vcnkgcGxheWVycywgdWludFtdIG1lbW9yeSBwcml6ZXMpCiAgICB7CiAgICAgICAgdmFyKG51bVdpbm5lcnMsIG51bUZpeGVkQW1vdW50V2lubmVycykgPSBnZXROdW1XaW5uZXJzKCk7CiAgICAgICAgdWludCB0b3RhbE51bVdpbm5lcnMgPSBudW1XaW5uZXJzICsgbnVtRml4ZWRBbW91bnRXaW5uZXJzOwoKICAgICAgICBwbGF5ZXJzID0gbmV3IGFkZHJlc3NbXSh0b3RhbE51bVdpbm5lcnMpOwogICAgICAgIHByaXplcyA9IG5ldyB1aW50W10odG90YWxOdW1XaW5uZXJzKTsKCiAgICAgICAgdWludCBpbmRleDsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdG90YWxOdW1XaW5uZXJzOyBpKyspIHsKICAgICAgICAgICAgaWYgKCBpID4gd2lubmVySW5kZXggKSB7CiAgICAgICAgICAgICAgICBpbmRleCA9ICggKCBwbGF5ZXJzLmxlbmd0aCApIC0gKCBpIC0gd2lubmVySW5kZXggKSApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaW5kZXggPSAoIHdpbm5lckluZGV4IC0gaSApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBwbGF5ZXJzW2ldID0gdGlja2V0SW5kZXhbaW5kZXhdOwogICAgICAgICAgICBwcml6ZXNbaV0gPSB0aWNrZXRzW3BsYXllcnNbaV1dLnByaXplOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIChwbGF5ZXJzLCBwcml6ZXMpOwogICAgfQoKICAgIGZ1bmN0aW9uICgpCiAgICAgICAgcHVibGljCiAgICAgICAgcGF5YWJsZQogICAgICAgIHZhbGlkQmV0CiAgICAgICAgb25seVBsYXllcgogICAgewogICAgICAgIHJlcXVpcmUodGlja2V0c1ttc2cuc2VuZGVyXS5ibG9ja19udW1iZXIgPT0gMCk7CiAgICAgICAgcmVxdWlyZSh0aWNrZXRJbmRleC5sZW5ndGggPD0gMTAwMCk7CgogICAgICAgIHRpY2tldHNbbXNnLnNlbmRlcl0uYmxvY2tfbnVtYmVyID0gdWludDQwKGJsb2NrLm51bWJlcik7CiAgICAgICAgdGlja2V0c1ttc2cuc2VuZGVyXS5ibG9ja190aW1lICAgPSB1aW50MzIoYmxvY2sudGltZXN0YW1wKTsKCiAgICAgICAgdGlja2V0SW5kZXgucHVzaChtc2cuc2VuZGVyKTsKCiAgICAgICAgTmV3UGxheWVyQWRkZWQodGlja2V0SW5kZXgubGVuZ3RoLCBnZXRQcml6ZUFtb3VudCgpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5pc2goKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yCiAgICAgICAgYWN0aXZlR2FtZQogICAgewogICAgICAgIHVpbnQ2NCBtYXhfdm90ZXM7CiAgICAgICAgdWludDY0W10gbWVtb3J5IG51bV92b3RlcyA9IG5ldyB1aW50NjRbXSh0aWNrZXRJbmRleC5sZW5ndGgpOwoKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCB0aWNrZXRJbmRleC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBUaWNrZXRMaWIuVGlja2V0IG1lbW9yeSB0aWNrZXQgPSB0aWNrZXRzW3RpY2tldEluZGV4W2ldXTsKICAgICAgICAgICAgdWludDY0IHZvdGUgPSB1aW50NjQoICggKCB0aWNrZXQuYmxvY2tfbnVtYmVyICogdGlja2V0LmJsb2NrX3RpbWUgKSArIHVpbnQoIHRpY2tldEluZGV4W2ldKSApICUgdGlja2V0SW5kZXgubGVuZ3RoICk7CgogICAgICAgICAgICBudW1fdm90ZXNbdm90ZV0gKz0gMTsKCiAgICAgICAgICAgIGlmICggbnVtX3ZvdGVzW3ZvdGVdID4gbWF4X3ZvdGVzICkgewogICAgICAgICAgICAgICAgbWF4X3ZvdGVzID0gbnVtX3ZvdGVzW3ZvdGVdOwogICAgICAgICAgICAgICAgd2lubmVySW5kZXggPSB2b3RlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB1aW50W10gbWVtb3J5IHByaXplcyA9IGNhbGNhdWx0ZVByaXplcygpOwoKICAgICAgICB1aW50IGxhc3RJZCA9IHdpbm5lckluZGV4OwoKICAgICAgICBmb3IgKCBpID0gMDsgaSA8IHByaXplcy5sZW5ndGg7IGkrKyApIHsKICAgICAgICAgICAgdGlja2V0c1t0aWNrZXRJbmRleFtsYXN0SWRdXS5wcml6ZSA9IHByaXplc1tpXTsKICAgICAgICAgICAgdGlja2V0SW5kZXhbbGFzdElkXS50cmFuc2Zlcihwcml6ZXNbaV0pOwoKICAgICAgICAgICAgaWYgKCBsYXN0SWQgPD0gMCApIHsKICAgICAgICAgICAgICAgIGxhc3RJZCA9IHRpY2tldEluZGV4Lmxlbmd0aDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGFzdElkIC09IDE7CiAgICAgICAgfQoKICAgICAgICBhZG1pbmlzdHJhdG9yLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CgogICAgICAgIHN0YXRlID0gU3RhdGUuRU5ERUQ7CgogICAgICAgIEdhbWVGaW5pc2hlZCh0aWNrZXRJbmRleFt3aW5uZXJJbmRleF0pOwogICAgfQp9'.
	

]
