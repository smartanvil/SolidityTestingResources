Class {
	#name : #SRTae7fd76ac0237d23934b59150f8e5e419d2f4631,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTae7fd76ac0237d23934b59150f8e5e419d2f4631 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiogQHRpdGxlIFNhZmVNYXRoCiogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogICAgLyoqCiAgICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICAgKi8KICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICAgKi8KICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBTdWJzdHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgICAqLwogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICAgKi8KICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCiAgICAvKioKICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAqIGFjY291bnQuCiAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICAqLwogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGVtaXQgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQp9CgppbnRlcmZhY2UgdG9rZW5SZWNpcGllbnQgeyBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKSBleHRlcm5hbDsgfQoKY29udHJhY3QgVG9rZW5FUkMyMCB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICAvLyBQdWJsaWMgdmFyaWFibGVzIG9mIHRoZSB0b2tlbgogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKICAgIC8vIDE4IGRlY2ltYWxzIGlzIHRoZSBzdHJvbmdseSBzdWdnZXN0ZWQgZGVmYXVsdCwgYXZvaWQgY2hhbmdpbmcgaXQKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vIFRoaXMgY3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBiYWxhbmNlcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIC8vIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CgogICAgLy8gVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgYnVybnQKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8qKgogICAgKiBDb25zdHJ1Y3RvciBmdW5jdGlvbgogICAgKgogICAgKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QKICAgICovCiAgICBmdW5jdGlvbiBUb2tlbkVSQzIwKAogICAgICAgIHVpbnQyNTYgaW5pdGlhbFN1cHBseSwKICAgICAgICBzdHJpbmcgdG9rZW5OYW1lLAogICAgICAgIHN0cmluZyB0b2tlblN5bWJvbAogICAgKSBwdWJsaWMgewogICAgICAgIHRvdGFsU3VwcGx5ID0gaW5pdGlhbFN1cHBseSAqIDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpOyAgLy8gVXBkYXRlIHRvdGFsIHN1cHBseSB3aXRoIHRoZSBkZWNpbWFsIGFtb3VudAogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IHRvdGFsU3VwcGx5OyAgICAgICAgICAgICAgICAvLyBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucwogICAgICAgIG5hbWUgPSB0b2tlbk5hbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIG5hbWUgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgICAgICBzeW1ib2wgPSB0b2tlblN5bWJvbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBzeW1ib2wgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgIH0KCiAgICAvKioKICAgICogSW50ZXJuYWwgdHJhbnNmZXIsIG9ubHkgY2FuIGJlIGNhbGxlZCBieSB0aGlzIGNvbnRyYWN0CiAgICAqLwogICAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIC8vIFByZXZlbnQgdHJhbnNmZXIgdG8gMHgwIGFkZHJlc3MuIFVzZSBidXJuKCkgaW5zdGVhZAogICAgICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7CiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7CgogICAgICAgIC8vIENoZWNrIGZvciBvdmVyZmxvd3MKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfdG9dLmFkZChfdmFsdWUpID4gYmFsYW5jZU9mW190b10pOwoKICAgICAgICAvLyBTYXZlIHRoaXMgZm9yIGFuIGFzc2VydGlvbiBpbiB0aGUgZnV0dXJlCiAgICAgICAgdWludCBwcmV2aW91c0JhbGFuY2VzID0gYmFsYW5jZU9mW19mcm9tXS5hZGQoYmFsYW5jZU9mW190b10pOwoKICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dID0gYmFsYW5jZU9mW19mcm9tXS5zdWIoX3ZhbHVlKTsKCiAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQKICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IGJhbGFuY2VPZltfdG9dLmFkZChfdmFsdWUpOwoKICAgICAgICBlbWl0IFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgLy8gQXNzZXJ0cyBhcmUgdXNlZCB0byB1c2Ugc3RhdGljIGFuYWx5c2lzIHRvIGZpbmQgYnVncyBpbiB5b3VyIGNvZGUuIFRoZXkgc2hvdWxkIG5ldmVyIGZhaWwKICAgICAgICBhc3NlcnQoYmFsYW5jZU9mW19mcm9tXS5hZGQoYmFsYW5jZU9mW190b10pID09IHByZXZpb3VzQmFsYW5jZXMpOwogICAgfQoKICAgIC8qKgogICAgKiBUcmFuc2ZlciB0b2tlbnMKICAgICoKICAgICogU2VuZCBgX3ZhbHVlYCB0b2tlbnMgdG8gYF90b2AgZnJvbSB5b3VyIGFjY291bnQKICAgICoKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCB0byBzZW5kCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRyYW5zZmVyIHRva2VucyBmcm9tIG90aGVyIGFkZHJlc3MKICAgICoKICAgICogU2VuZCBgX3ZhbHVlYCB0b2tlbnMgdG8gYF90b2AgaW4gYmVoYWxmIG9mIGBfZnJvbWAKICAgICoKICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCB0byBzZW5kCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pOyAgICAgLy8gQ2hlY2sgYWxsb3dhbmNlCiAgICAgICAgLy9hbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogU2V0IGFsbG93YW5jZSBmb3Igb3RoZXIgYWRkcmVzcwogICAgKgogICAgKiBBbGxvd3MgYF9zcGVuZGVyYCB0byBzcGVuZCBubyBtb3JlIHRoYW4gYF92YWx1ZWAgdG9rZW5zIGluIHlvdXIgYmVoYWxmCiAgICAqCiAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBhdXRob3JpemVkIHRvIHNwZW5kCiAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIG1heCBhbW91bnQgdGhleSBjYW4gc3BlbmQKICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBTZXQgYWxsb3dhbmNlIGZvciBvdGhlciBhZGRyZXNzIGFuZCBub3RpZnkKICAgICoKICAgICogQWxsb3dzIGBfc3BlbmRlcmAgdG8gc3BlbmQgbm8gbW9yZSB0aGFuIGBfdmFsdWVgIHRva2VucyBpbiB5b3VyIGJlaGFsZiwgYW5kIHRoZW4gcGluZyB0aGUgY29udHJhY3QgYWJvdXQgaXQKICAgICoKICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIGF1dGhvcml6ZWQgdG8gc3BlbmQKICAgICogQHBhcmFtIF92YWx1ZSB0aGUgbWF4IGFtb3VudCB0aGV5IGNhbiBzcGVuZAogICAgKiBAcGFyYW0gX2V4dHJhRGF0YSBzb21lIGV4dHJhIGluZm9ybWF0aW9uIHRvIHNlbmQgdG8gdGhlIGFwcHJvdmVkIGNvbnRyYWN0CiAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICB0b2tlblJlY2lwaWVudCBzcGVuZGVyID0gdG9rZW5SZWNpcGllbnQoX3NwZW5kZXIpOwogICAgICAgIGlmIChhcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpKSB7CiAgICAgICAgICAgIHNwZW5kZXIucmVjZWl2ZUFwcHJvdmFsKG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0JCiAgICB9CgogICAgLyoqCiAgICAgKiBEZXN0cm95IHRva2VucwogICAgICoKICAgICAqIFJlbW92ZSBgX3ZhbHVlYCB0b2tlbnMgZnJvbSB0aGUgc3lzdGVtIGlycmV2ZXJzaWJseQogICAgICoKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiBtb25leSB0byBidXJuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOyAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgdG90YWxTdXBwbHkgLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGVzIHRvdGFsU3VwcGx5CiAgICAgICAgZW1pdCBCdXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZXN0cm95IHRva2VucyBmcm9tIG90aGVyIGFjY291bnQKICAgICAqCiAgICAgKiBSZW1vdmUgYF92YWx1ZWAgdG9rZW5zIGZyb20gdGhlIHN5c3RlbSBpcnJldmVyc2libHkgb24gYmVoYWxmIG9mIGBfZnJvbWAuCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIHRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiBtb25leSB0byBidXJuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YXJnZXRlZCBiYWxhbmNlIGlzIGVub3VnaAogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pOyAgICAvLyBDaGVjayBhbGxvd2FuY2UKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgdGFyZ2V0ZWQgYmFsYW5jZQogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIncyBhbGxvd2FuY2UKICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRvdGFsU3VwcGx5CiAgICAgICAgZW1pdCBCdXJuKF9mcm9tLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKiAgICAgICBBRFZBTkNFRCBUT0tFTiBTVEFSVFMgSEVSRSAgICAgICAqLwovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwpjb250cmFjdCBDaW5vY2lDb2luIGlzIE93bmFibGUsIFRva2VuRVJDMjAgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSAgICBwdWJsaWMgIGZyb3plbkFjY291bnQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBmcmVlemluZ1BlcmlvZDsgLy8gaG93IG1hbnkgZGF5cyB0aGUgYWNjb3VudCBtdXN0IHJlbWFpbiBmcm96ZW4/CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgZXhjaGFuZ2VzQWNjb3VudHM7CgogICAgYWRkcmVzcyBwdWJsaWMgYm91bnR5TWFuYWdlckFkZHJlc3M7CiAgICBhZGRyZXNzIHB1YmxpYyBib3VudHlNYW5hZ2VyRGlzdHJpYnV0aW9uQ29udHJhY3QgPSAweDA7CgogICAgYWRkcmVzcyBwdWJsaWMgZnVuZEFjY291bnQ7IAkvLyBiYWxsYXN0IGZ1bmQgYWRkcmVzcwogICAgYm9vbCBwdWJsaWMgaXNTZXRGdW5kID0gZmFsc2U7CS8vIGlmIGJhbGxhc3QgZnVuZCBpcyBzZXQKCiAgICB1aW50MjU2IHB1YmxpYyBjcmVhdGlvbkRhdGU7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBmcm96ZW5EYXlzRm9yQWR2aXNvciAgICAgICA9IDE4NzsgIAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZnJvemVuRGF5c0ZvckJvdW50eSAgICAgICAgPSAxODc7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBmcm96ZW5EYXlzRm9yRWFybHlJbnZlc3RvciA9IDUyOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZnJvemVuRGF5c0ZvcklDTyAgICAgICAgICAgPSA2NjsgICAKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGZyb3plbkRheXNGb3JQYXJ0bmVyICAgICAgID0gMzcwOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZnJvemVuRGF5c0ZvclByZUlDTyAgICAgICAgPSA1MjsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGZyb3plbkRheXNmb3JUZXN0RXhjaGFuZ2UgID0gMDsKCiAgICAvKioKICAgICogYWxsb3dlZCBmb3IgYSBib3VudHkgbWFuYWdlciBhY2NvdW50IG9ubHkKICAgICovCiAgICBtb2RpZmllciBvbmx5Qm91bnR5TWFuYWdlcigpewogICAgICAgIHJlcXVpcmUoKG1zZy5zZW5kZXIgPT0gYm91bnR5TWFuYWdlckRpc3RyaWJ1dGlvbkNvbnRyYWN0KSB8fCAobXNnLnNlbmRlciA9PSBib3VudHlNYW5hZ2VyQWRkcmVzcykpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUV4Y2hhbmdlc0FjY291bnRzKCl7CiAgICAgICAgcmVxdWlyZShleGNoYW5nZXNBY2NvdW50c1ttc2cuc2VuZGVyXSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICogYWxsb3dlZCBmb3IgYSBmdW5kIGFjY291bnQgb25seQogICAgKi8KICAgIG1vZGlmaWVyIG9ubHlGdW5kKCl7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGZ1bmRBY2NvdW50KTsKICAgICAgICBfOwogICAgfQoKICAgIC8qIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cyAqLwogICAgZXZlbnQgRnJvemVuRnVuZHMoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJvemVuKTsKCiAgICAvKioKICAgICogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0CiAgICAqCiAgICAqCiAgICAqLwogICAgZnVuY3Rpb24gQ2lub2NpQ29pbigKICAgICAgICB1aW50MjU2IGluaXRpYWxTdXBwbHksCiAgICAgICAgc3RyaW5nIHRva2VuTmFtZSwKICAgICAgICBzdHJpbmcgdG9rZW5TeW1ib2wKICAgICkgVG9rZW5FUkMyMChpbml0aWFsU3VwcGx5LCB0b2tlbk5hbWUsIHRva2VuU3ltYm9sKSBwdWJsaWMgCiAgICB7CiAgICAgICAgLyogc29saXVtLWRpc2FibGUtbmV4dC1saW5lICovCiAgICAgICAgY3JlYXRpb25EYXRlID0gbm93OwoKICAgICAgICBhZGRyZXNzIGFkdmlzb3IgPSAweDMyYzVFYzg1OGM1MkY4NjM1QmQ5MmU0NGQ4Nzk3ZTVkMzU2ZUJkMDU7CiAgICAgICAgYWRkcmVzcyBib3VudHlNYW5hZ2VyID0gMHhkRGE5YmNmMzBBRkRDNDBhNWZGYTZlMWI2ZjcwZWYwMzBBM0UzMmY0OwogICAgICAgIGFkZHJlc3MgZWFybHlJbnZlc3RvciA9IDB4MDJGRjJiQTYyNDQwYzkyRDJBMDJEOTVEZjZmYzIzM2VBNjhjMjA5MTsKICAgICAgICBhZGRyZXNzIHBhcnRuZXIgPSAweDZBNDViYUFFYjIxRDQ5ZkQ4NUIzMDkyMzVFZjI5MjBkM0E2NDg4NTg7CiAgICAgICAgYWRkcmVzcyBleGNoYW5nZTEgPSAweDhCZDEwZDMzODM1MDRhMTJGRDI3QTFGZDVjMEU3YkNlYWUzQzg5OTc7CiAgICAgICAgYWRkcmVzcyBleGNoYW5nZTIgPSAweGNlOGI4ZTcxMTMwNzJDNTMwOGNlYzY2OTM3NUUwQWIzNjRiMzQzNUM7CgogICAgICAgIF9pbml0aWFsaXplQWNjb3VudChwYXJ0bmVyLCBmcm96ZW5EYXlzRm9yUGFydG5lciwgMzAwMDAwMDApOwogICAgICAgIF9pbml0aWFsaXplQWNjb3VudChhZHZpc29yLCBmcm96ZW5EYXlzRm9yQWR2aXNvciwgMjAwMDAwMDApOwogICAgICAgIF9pbml0aWFsaXplQWNjb3VudChlYXJseUludmVzdG9yLCBmcm96ZW5EYXlzRm9yRWFybHlJbnZlc3RvciwgMTAwMDAwMDApOyAgCiAgICAgICAgX2luaXRpYWxpemVBY2NvdW50KGV4Y2hhbmdlMSwgZnJvemVuRGF5c2ZvclRlc3RFeGNoYW5nZSwgMTAwMCk7CiAgICAgICAgX2luaXRpYWxpemVBY2NvdW50KGV4Y2hhbmdlMiwgZnJvemVuRGF5c2ZvclRlc3RFeGNoYW5nZSwgMTAwMCk7CiAgICAgICAgX2luaXRpYWxpemVBY2NvdW50KGJvdW50eU1hbmFnZXIsIGZyb3plbkRheXNGb3JCb3VudHksIDE1MDAwMDAwKTsKICAgICAgICBib3VudHlNYW5hZ2VyQWRkcmVzcyA9IGJvdW50eU1hbmFnZXI7CiAgICB9CgogICAgLyoqCiAgICAqIE9ubHkgb3duZXIgZnVuY3Rpb24gdG8gc2V0IGJhbGxhc3QgZnVuZCBhY2NvdW50IGFkZHJlc3MKICAgICogCiAgICAqIEBkZXYgaXQgY2FuIGJlIHNldCBvbmx5IG9uY2UKICAgICogQHBhcmFtIF9hZGRyZXNzIHNtYXJ0IGNvbnRyYWN0IGFkZHJlc3Mgb2YgYmFsbGFzdCBmdW5kCiAgICAqLwogICAgZnVuY3Rpb24gc2V0RnVuZEFjY291bnQoYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHB1YmxpY3sKICAgICAgICByZXF1aXJlIChfYWRkcmVzcyAhPSAweDApOwogICAgICAgIHJlcXVpcmUgKCFpc1NldEZ1bmQpOwogICAgICAgIGZ1bmRBY2NvdW50ID0gX2FkZHJlc3M7CiAgICAgICAgaXNTZXRGdW5kID0gdHJ1ZTsgICAgCiAgICB9CgogICAgZnVuY3Rpb24gYWRkRXhjaGFuZ2VBY2NvdW50cyhhZGRyZXNzIF9hZGRyZXNzKSBvbmx5T3duZXIgcHVibGljewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3MgIT0gMHgwKTsKICAgICAgICBleGNoYW5nZXNBY2NvdW50c1tfYWRkcmVzc10gPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZUV4Y2hhbmdlQWNjb3VudHMoYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHB1YmxpY3sKICAgICAgICBkZWxldGUgZXhjaGFuZ2VzQWNjb3VudHNbX2FkZHJlc3NdOwogICAgfQoKICAgIC8qKgogICAgKiBJbml0aWFsaXplIGFjY291bnRzIHdoZW4gdG9rZW4gZGVwbG95IG9jY3VycwogICAgKgogICAgKiBpbml0aWFsaXplIGBfYWRkcmVzc2AgYWNjb3VudCwgd2l0aCBiYWxhbmNlIGVxdWFsIGBfdmFsdWVgIGFuZCBmcm96ZW4gZm9yIGBfZnJvemVuRGF5c2AKICAgICoKICAgICogQHBhcmFtIF9hZGRyZXNzIHdhbGxldCBhZGRyZXNzIHRvIGluaXRpYWxpemUKICAgICogQHBhcmFtIF9mcm96ZW5EYXlzIHF1YW50aXR5IG9mIGRheXMgdG8gZnJlZXplIGFjY291bnQKICAgICogQHBhcmFtIF92YWx1ZSBxdWFudGl0eSBvZiB0b2tlbnMgdG8gc2VuZCB0byBhY2NvdW50CiAgICAqLwogICAgZnVuY3Rpb24gX2luaXRpYWxpemVBY2NvdW50KGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX2Zyb3plbkRheXMsIHVpbnQgX3ZhbHVlKSBpbnRlcm5hbHsKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX2FkZHJlc3MsIF92YWx1ZSAqIDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsKICAgICAgICBmcmVlemluZ1BlcmlvZFtfYWRkcmVzc10gPSBfZnJvemVuRGF5czsKICAgICAgICBfZnJlZXplQWNjb3VudChfYWRkcmVzcywgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAqIENoZWNrIGlmIGFjY291bnQgZnJlZXppbmcgcGVyaW9kIGV4cGlyZWQKICAgICoKICAgICogYG5vd2AgaGFzIHRvIGJlIGdyZWF0ZXIgb3IgZXF1YWwgdGhhbiBgY3JlYXRpb25EYXRlYCArIGBmcmVlemluZ1BlcmlvZFtfYWRkcmVzc11gICogYDEgZGF5YAogICAgKgogICAgKiBAcGFyYW0gX2FkZHJlc3MgYWNjb3VudCBhZGRyZXNzIHRvIGNoZWNrIGlmIGFsbG93ZWQgdG8gdHJhbnNmZXIgdG9rZW5zCiAgICAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIGlzIGFsbG93ZWQgdG8gdHJhbnNmZXIgYW5kIGZhbHNlIGlmIG5vdAogICAgKi8KICAgIGZ1bmN0aW9uIF9pc1RyYW5zZmVyQWxsb3dlZCggYWRkcmVzcyBfYWRkcmVzcyApIHZpZXcgcHVibGljIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgLyogc29saXVtLWRpc2FibGUtbmV4dC1saW5lICovCiAgICAgICAgaWYoIG5vdyA+PSBjcmVhdGlvbkRhdGUgKyBmcmVlemluZ1BlcmlvZFtfYWRkcmVzc10gKiAxIGRheXMgKXsKICAgICAgICAgICAgcmV0dXJuICggdHJ1ZSApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAoIGZhbHNlICk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBJbnRlcm5hbCBmdW5jdGlvbiB0byB0cmFuc2ZlciB0b2tlbnMKICAgICoKICAgICogQHBhcmFtIF9mcm9tIGFjY291bnQgdG8gd2l0aGRyYXcgdG9rZW5zCiAgICAqIEBwYXJhbSBfdG8gYWNjb3VudCB0byByZWNlaXZlIHRva2VucwogICAgKiBAcGFyYW0gX3ZhbHVlIHF1YW50aXR5IG9mIHRva2VucyB0byB0cmFuc2ZlcgogICAgKi8KICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlIChfdG8gIT0gMHgwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCB0cmFuc2ZlciB0byAweDAgYWRkcmVzcy4gVXNlIGJ1cm4oKSBpbnN0ZWFkCiAgICAgICAgcmVxdWlyZSAoYmFsYW5jZU9mW19mcm9tXSA+PSBfdmFsdWUpOyAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIHJlcXVpcmUgKGJhbGFuY2VPZltfdG9dLmFkZChfdmFsdWUpID4gYmFsYW5jZU9mW190b10pOyAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCgogICAgICAgIC8vIGNoZWNrIGlmIHRoZSBzZW5kZXIgaXMgdW5kZXIgYSBmcmVlemluZyBwZXJpb2QKICAgICAgICBpZihfaXNUcmFuc2ZlckFsbG93ZWQoX2Zyb20pKXsgCiAgICAgICAgICAgIF9zZXRGcmVlemluZ1BlcmlvZChfZnJvbSwgZmFsc2UsIDApOwogICAgICAgIH0KCiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHJlY2lwaWVudCBpcyB1bmRlciBhIGZyZWV6aW5nIHBlcmlvZAogICAgICAgIGlmKF9pc1RyYW5zZmVyQWxsb3dlZChfdG8pKXsKICAgICAgICAgICAgX3NldEZyZWV6aW5nUGVyaW9kKF90bywgZmFsc2UsIDApOwogICAgICAgIH0KCiAgICAgICAgcmVxdWlyZSghZnJvemVuQWNjb3VudFtfZnJvbV0pOyAgICAgLy8gQ2hlY2sgaWYgc2VuZGVyIGlzIGZyb3plbgogICAgICAgIHJlcXVpcmUoIWZyb3plbkFjY291bnRbX3RvXSk7ICAgICAgIC8vIENoZWNrIGlmIHJlY2lwaWVudCBpcyBmcm96ZW4gICAgICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSA9IGJhbGFuY2VPZltfZnJvbV0uc3ViKF92YWx1ZSk7ICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIGJhbGFuY2VPZltfdG9dID0gYmFsYW5jZU9mW190b10uYWRkKF92YWx1ZSk7ICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudAoKICAgICAgICBlbWl0IFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CiAgICAKICAgIC8qKgogICAgKiBJbnRlcm5hbCBmdW5jdGlvbiB0byBkZWxpdmVyIHRva2VucyBmb3IgYm91bnR5LCBwcmUtSUNPIG9yIElDTyB3aXRoIGRldGVybWluZWQgZnJlZXppbmcgcGVyaW9kcwogICAgKgogICAgKiBAcGFyYW0gX2Zyb20gYWNjb3VudCBhZGRyZXNzIHRvIHdpdGhkcmF3IHRva2VucwogICAgKiBAcGFyYW0gX3RvIGFjY291bnQgYWRkcmVzcyB0byBzZW5kIHRva2VucwogICAgKiBAcGFyYW0gX3ZhbHVlIHF1YW50aXR5IG9mIHRva2VzIHRvIHNlbmQKICAgICogQHBhcmFtIF9mcm96ZW5EYXlzIHF1YW50aXR5IG9mIGRheXMgdG8gZnJlZXplIGFjY291bnQKICAgICovCiAgICBmdW5jdGlvbiBfdG9rZW5EZWxpdmVyeShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIHVpbnQgX2Zyb3plbkRheXMpIGludGVybmFsIHsKICAgICAgICBmcmVlemluZ1BlcmlvZFtfdG9dID0gMDsKICAgICAgICBfZnJlZXplQWNjb3VudChfdG8sIGZhbHNlKTsKICAgICAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICBmcmVlemluZ1BlcmlvZFtfdG9dID0gX2Zyb3plbkRheXM7CiAgICAgICAgX2ZyZWV6ZUFjY291bnQoX3RvLCB0cnVlKTsgCiAgICB9CiAgICAKICAgIC8qKgogICAgKiBPbmx5IG93bmVyIGZ1bmN0aW9uIHRvIGRlbGl2ZXIgdG9rZW5zIGZvciBwcmUtSUNPIGludmVzdG9ycwogICAgKgogICAgKiBAcGFyYW0gX3RvIGFjY291bnQgYWRkcmVzcyB3aG8gd2lsbCByZWNlaXZlIHRoZSB0b2tlbnMKICAgICogQHBhcmFtIF92YWx1ZSBxdWFudGl0eSBvZiB0b2tlbnMgdG8gZGVsaXZlcgogICAgKi8KICAgIGZ1bmN0aW9uIHByZUlDT1Rva2VuRGVsaXZlcnkoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBfdG9rZW5EZWxpdmVyeShtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgZnJvemVuRGF5c0ZvclByZUlDTyk7CiAgICB9CiAgICAKICAgIC8qKgogICAgKiBPbmx5IG93bmVyIGZ1bmN0aW9uIHRvIGRlbGl2ZXIgdG9rZW5zIGZvciBJQ08gaW52ZXN0b3JzCiAgICAqCiAgICAqIEBwYXJhbSBfdG8gYWNjb3VudCBhZGRyZXNzIHdobyB3aWxsIHJlY2VpdmUgdG9rZW5zCiAgICAqIEBwYXJhbSBfdmFsdWUgcXVhbnRpdHkgb2YgdG9rZW5zIHRvIGRlbGl2ZXIKICAgICovCiAgICBmdW5jdGlvbiBJQ09Ub2tlbkRlbGl2ZXJ5KGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgX3Rva2VuRGVsaXZlcnkobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIGZyb3plbkRheXNGb3JJQ08pOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRCb3VudHlEaXN0cmlidXRpb25Db250cmFjdChhZGRyZXNzIF9jb250cmFjdEFkZHJlc3MpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGJvdW50eU1hbmFnZXJEaXN0cmlidXRpb25Db250cmFjdCA9IF9jb250cmFjdEFkZHJlc3M7CiAgICB9CgogICAgLyoqb25seUJvdW50eQogICAgKiBPbmx5IGJvdW50eSBtYW5hZ2VyIGRpc3RyaWJ1dGlvbiBjb250cmFjdCBmdW5jdGlvbiB0byBkZWxpdmVyIHRva2VucyBmb3IgYm91bnR5IGNvbW11bml0eQogICAgKgogICAgKiBAcGFyYW0gX3RvIGFjY291bnQgYWRkcmVzIHdobyB3aWxsIHJlY2VpdmUgdG9rZW5zCiAgICAqIEBwYXJhbSBfdmFsdWUgcXVhbnRpdHkgb2YgdG9rZW5zIHRvIGRlbGl2ZXIKICAgICovCiAgICBmdW5jdGlvbiBib3VudHlUcmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlCb3VudHlNYW5hZ2VyIHB1YmxpYyB7CiAgICAgICAgX2ZyZWV6ZUFjY291bnQoYm91bnR5TWFuYWdlckFkZHJlc3MsIGZhbHNlKTsKICAgICAgICBfdG9rZW5EZWxpdmVyeShib3VudHlNYW5hZ2VyQWRkcmVzcywgX3RvLCBfdmFsdWUsIGZyb3plbkRheXNGb3JCb3VudHkpOwogICAgICAgIF9mcmVlemVBY2NvdW50KGJvdW50eU1hbmFnZXJBZGRyZXNzLCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICogRnVuY3Rpb24gdG8gZ2V0IGRheXMgdG8gdW5mcmVlemUgc29tZSBhY2NvdW50CiAgICAqCiAgICAqIEBwYXJhbSBfYWRkcmVzcyBhY2NvdW50IGFkZHJlc3MgdG8gZ2V0IGRheXMKICAgICogQHJldHVybiByZXN1bHQgcXVhbnRpdHkgb2YgZGF5cyB0byB1bmZyZWV6ZSBgYWRkcmVzc2AKICAgICovCiAgICBmdW5jdGlvbiBkYXlzVG9VbmZyZWV6ZShhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmVxdWlyZShfYWRkcmVzcyAhPSAweDApOwoKICAgICAgICAvKiBzb2xpdW0tZGlzYWJsZS1uZXh0LWxpbmUgKi8KICAgICAgICB1aW50MjU2IF9ub3cgPSBub3c7CiAgICAgICAgdWludDI1NiByZXN1bHQgPSAwOwoKICAgICAgICBpZiggX25vdyA8PSBjcmVhdGlvbkRhdGUgKyBmcmVlemluZ1BlcmlvZFtfYWRkcmVzc10gKiAxIGRheXMgKSB7CiAgICAgICAgICAgIC8vIHN0aWxsIHVuZGVyIHRoZSBmcmVlemluZyBwZXJpb2QuCiAgICAgICAgICAgIHVpbnQyNTYgZmluYWxQZXJpb2QgPSAoY3JlYXRpb25EYXRlICsgZnJlZXppbmdQZXJpb2RbX2FkZHJlc3NdICogMSBkYXlzKSAvIDEgZGF5czsKICAgICAgICAgICAgdWludDI1NiBjdXJyZVBlcmlvZCA9IF9ub3cgLyAxIGRheXM7CiAgICAgICAgICAgIHJlc3VsdCA9IGZpbmFsUGVyaW9kIC0gY3VycmVQZXJpb2Q7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8qKgogICAgKiBAbm90aWNlIGBmcmVlemU/IFByZXZlbnQgfCBBbGxvd2AgYHRhcmdldGAgZnJvbSBzZW5kaW5nICYgcmVjZWl2aW5nIHRva2VucwogICAgKiBAcGFyYW0gdGFyZ2V0IEFkZHJlc3MgdG8gYmUgZnJvemVuCiAgICAqIEBwYXJhbSBmcmVlemUgZWl0aGVyIHRvIGZyZWV6ZSBpdCBvciBub3QKICAgICovCiAgICBmdW5jdGlvbiBfZnJlZXplQWNjb3VudChhZGRyZXNzIHRhcmdldCwgYm9vbCBmcmVlemUpIGludGVybmFsIHsKICAgICAgICBmcm96ZW5BY2NvdW50W3RhcmdldF0gPSBmcmVlemU7CiAgICAgICAgZW1pdCBGcm96ZW5GdW5kcyh0YXJnZXQsIGZyZWV6ZSk7CiAgICB9CgogICAgLyoqCiAgICAqIE9ubHkgb3duZXIgZnVuY3Rpb24gdG8gY2FsbCBgX2ZyZWV6ZUFjY291bnRgIGRpcmVjdGx5CiAgICAqCiAgICAqIEBwYXJhbSB0YXJnZXQgYWNjb3VudCBhZGRyZXNzIHRvIGZyZWV6ZQogICAgKiBAcGFyYW0gZnJlZXplIHRydWUgdG8gZnJlZXplIGFjY291bnQgYW5kIGZhbHNlIHRvIHVuZnJlZXplCiAgICAqLwogICAgZnVuY3Rpb24gZnJlZXplQWNjb3VudChhZGRyZXNzIHRhcmdldCwgYm9vbCBmcmVlemUpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIF9mcmVlemVBY2NvdW50KHRhcmdldCwgZnJlZXplKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAqIEludGVybmFsIGNhbGwgdG8gc2V0IGZyZWV6aW5nIHBlcmlvZCBmb3Igc29tZSBhY2NvdW50CiAgICAqCiAgICAqIEBwYXJhbSBfdGFyZ2V0IGFjY291bnQgYWRkcmVzcyB0byBmcmVlemUKICAgICogQHBhcmFtIF9mcmVlemUgdHJ1ZSB0byBmcmVlemUgYWNjb3VudCBhbmQgZmFsc2UgdG8gdW5mcmVlemUKICAgICogQHBhcmFtIF9kYXlzIHBlcmlvZCB0byBrZWVwIGFjY291bnQgZnJvemVuCiAgICAqLwogICAgZnVuY3Rpb24gX3NldEZyZWV6aW5nUGVyaW9kKGFkZHJlc3MgX3RhcmdldCwgYm9vbCBfZnJlZXplLCB1aW50MjU2IF9kYXlzKSBpbnRlcm5hbCB7CiAgICAgICAgX2ZyZWV6ZUFjY291bnQoX3RhcmdldCwgX2ZyZWV6ZSk7CiAgICAgICAgZnJlZXppbmdQZXJpb2RbX3RhcmdldF0gPSBfZGF5czsKICAgIH0KICAgIAogICAgLyoqCiAgICAqIE9ubHkgb3duZXIgZnVuY3Rpb24gdG8gY2FsbCBgX3NldEZyZWV6aW5nUGVyaW9kYCBkaXJlY3RseQogICAgKgogICAgKiBAcGFyYW0gX3RhcmdldCBhY2NvdW50IGFkZHJlc3MgdG8gZnJlZXplCiAgICAqIEBwYXJhbSBfZnJlZXplIHRydWUgdG8gZnJlZXplIGFjY291bnQgYW5kIGZhbHNlIHRvIHVuZnJlZXplCiAgICAqIEBwYXJhbSBfZGF5cyBwZXJpb2QgdG8ga2VlcCBhY2NvdW50IGZyb3plbgogICAgKi8KICAgIGZ1bmN0aW9uIHNldEZyZWV6aW5nUGVyaW9kKGFkZHJlc3MgX3RhcmdldCwgYm9vbCBfZnJlZXplLCB1aW50MjU2IF9kYXlzKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBfc2V0RnJlZXppbmdQZXJpb2QoX3RhcmdldCwgX2ZyZWV6ZSwgX2RheXMpOwogICAgfQogICAgCiAgICAvKioKICAgICogVHJhbnNmZXIgdG9rZW5zIGZyb20gb3RoZXIgYWRkcmVzcwogICAgKgogICAgKiBTZW5kIGBfdmFsdWVgIHRva2VucyB0byBgX3RvYCBpbiBiZWhhbGYgb2YgYF9mcm9tYAogICAgKgogICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICogQHBhcmFtIF92YWx1ZSB0aGUgYW1vdW50IHRvIHNlbmQKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSk7ICAgICAvLyBDaGVjayBhbGxvd2FuY2UKICAgICAgICAvL2FsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBTZXQgYWxsb3dhbmNlIGZvciBvdGhlciBhZGRyZXNzCiAgICAqCiAgICAqIEFsbG93cyBgX3NwZW5kZXJgIHRvIHNwZW5kIG5vIG1vcmUgdGhhbiBgX3ZhbHVlYCB0b2tlbnMgaW4geW91ciBiZWhhbGYKICAgICoKICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIGF1dGhvcml6ZWQgdG8gc3BlbmQKICAgICogQHBhcmFtIF92YWx1ZSB0aGUgbWF4IGFtb3VudCB0aGV5IGNhbiBzcGVuZAogICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvLyBjaGVjayBpZiB0aGUgc2VuZGVyIGlzIHVuZGVyIGEgZnJlZXppbmcgcGVyaW9kCiAgICAgICAgaWYoIF9pc1RyYW5zZmVyQWxsb3dlZChtc2cuc2VuZGVyKSApICB7CiAgICAgICAgICAgIF9zZXRGcmVlemluZ1BlcmlvZChtc2cuc2VuZGVyLCBmYWxzZSwgMCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAqIFNldCBhbGxvd2FuY2UgZm9yIG90aGVyIGFkZHJlc3MgYW5kIG5vdGlmeQogICAgKgogICAgKiBBbGxvd3MgYF9zcGVuZGVyYCB0byBzcGVuZCBubyBtb3JlIHRoYW4gYF92YWx1ZWAgdG9rZW5zIGluIHlvdXIgYmVoYWxmLCBhbmQgdGhlbiBwaW5nIHRoZSBjb250cmFjdCBhYm91dCBpdAogICAgKgogICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3MgYXV0aG9yaXplZCB0byBzcGVuZAogICAgKiBAcGFyYW0gX3ZhbHVlIHRoZSBtYXggYW1vdW50IHRoZXkgY2FuIHNwZW5kCiAgICAqIEBwYXJhbSBfZXh0cmFEYXRhIHNvbWUgZXh0cmEgaW5mb3JtYXRpb24gdG8gc2VuZCB0byB0aGUgYXBwcm92ZWQgY29udHJhY3QKICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vIGNoZWNrIGlmIHRoZSBzZW5kZXIgaXMgdW5kZXIgYSBmcmVlemluZyBwZXJpb2QKICAgICAgICBpZiggX2lzVHJhbnNmZXJBbGxvd2VkKG1zZy5zZW5kZXIpICkgewogICAgICAgICAgICBfc2V0RnJlZXppbmdQZXJpb2QobXNnLnNlbmRlciwgZmFsc2UsIDApOwogICAgICAgIH0KCiAgICAgICAgdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsKCiAgICAgICAgaWYgKGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSkpIHsKICAgICAgICAgICAgc3BlbmRlci5yZWNlaXZlQXBwcm92YWwobXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBEZXN0cm95IHRva2VucwogICAgKgogICAgKiBSZW1vdmUgYF92YWx1ZWAgdG9rZW5zIGZyb20gdGhlIHN5c3RlbSBpcnJldmVyc2libHkKICAgICoKICAgICogQHBhcmFtIF92YWx1ZSB0aGUgYW1vdW50IG9mIG1vbmV5IHRvIGJ1cm4KICAgICovCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICByZXR1cm4gX2J1cm4obXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICoKICAgICAqLwogICAgZnVuY3Rpb24gX2J1cm4oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIGludGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gPSBiYWxhbmNlT2ZbX2Zyb21dLnN1YihfdmFsdWUpOyAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZXMgdG90YWxTdXBwbHkKICAgICAgICBlbWl0IEJ1cm4oX2Zyb20sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAqIERlc3Ryb3kgdG9rZW5zIGZyb20gb3RoZXIgYWNjb3VudAogICAgKgogICAgKiBSZW1vdmUgYF92YWx1ZWAgdG9rZW5zIGZyb20gdGhlIHN5c3RlbSBpcnJldmVyc2libHkgb24gYmVoYWxmIG9mIGBfZnJvbWAuCiAgICAqCiAgICAqIEBwYXJhbSBfZnJvbSB0aGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiBtb25leSB0byBidXJuCiAgICAqLwogICAgZnVuY3Rpb24gYnVybkZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRhcmdldGVkIGJhbGFuY2UgaXMgZW5vdWdoCiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSk7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGFsbG93YW5jZQogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOyAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIncyBhbGxvd2FuY2UKICAgICAgICByZXR1cm4gX2J1cm4oX2Zyb20sIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAqIE9ubHkgYmFsbGFzdCBmdW5kIGZ1bmN0aW9uIHRvIGJ1cm4gdG9rZW5zIGZyb20gYWNjb3VudAogICAgKgogICAgKiBBbGxvd3MgYGZ1bmRBY2NvdW50YCBidXJuIHRva2VucyB0byBzZW5kIGVxdWl2YWxlbnQgZXRoZXIgZm9yIGFjY291bnQgdGhhdCBjbGFpbWVkIGl0CiAgICAqIEBwYXJhbSBfZnJvbSBhY2NvdW50IGFkZHJlc3MgdG8gYnVybiB0b2tlbnMKICAgICogQHBhcmFtIF92YWx1ZSBxdWFudGl0eSBvZiB0b2tlbnMgdG8gYnVybgogICAgKi8KICAgIGZ1bmN0aW9uIHJlZGVtcHRpb25CdXJuKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5RnVuZCBwdWJsaWN7CiAgICAgICAgX2J1cm4oX2Zyb20sIF92YWx1ZSk7CiAgICB9ICAgCn0='.
	

]
