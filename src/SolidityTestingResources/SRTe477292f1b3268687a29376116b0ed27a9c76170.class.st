Class {
	#name : #SRTe477292f1b3268687a29376116b0ed27a9c76170,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe477292f1b3268687a29376116b0ed27a9c76170 >> base64 [
	^ 'bGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9Cgp9Cgpjb250cmFjdCBIZXJvQ29pbiBpcyBTdGFuZGFyZFRva2VuIHsKCiAgICAvLyBkYXRhIHN0cnVjdHVyZXMKICAgIGVudW0gU3RhdGVzIHsKICAgIEluaXRpYWwsIC8vIGRlcGxveW1lbnQgdGltZQogICAgVmFsdWF0aW9uU2V0LAogICAgSWNvLCAvLyB3aGl0ZWxpc3QgYWRkcmVzc2VzLCBhY2NlcHQgZnVuZHMsIHVwZGF0ZSBiYWxhbmNlcwogICAgVW5kZXJmdW5kZWQsIC8vIElDTyB0aW1lIGZpbmlzaGVkIGFuZCBtaW5pbWFsIGFtb3VudCBub3QgcmFpc2VkCiAgICBPcGVyYXRpb25hbCwgLy8gbWFuYWdlIGNvbnRlc3RzCiAgICBQYXVzZWQgICAgICAgICAvLyBmb3IgY29udHJhY3QgdXBncmFkZXMKICAgIH0KCiAgICAvL3Nob3VsZCBiZSBjb25zdGFudCwgYnV0IGlzIG5vdCwgdG8gYXZvaWQgY29tcGlsZXIgd2FybmluZwogICAgYWRkcmVzcyBwdWJsaWMgIHJha2VFdmVudFBsYWNlaG9sZGVyQWRkcmVzcyA9IDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiSGVyb2NvaW4iOwoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlBMQVkiOwoKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHdoaXRlbGlzdDsKCiAgICBhZGRyZXNzIHB1YmxpYyBpbml0aWFsSG9sZGVyOwoKICAgIGFkZHJlc3MgcHVibGljIHN0YXRlQ29udHJvbDsKCiAgICBhZGRyZXNzIHB1YmxpYyB3aGl0ZWxpc3RDb250cm9sOwoKICAgIGFkZHJlc3MgcHVibGljIHdpdGhkcmF3Q29udHJvbDsKCiAgICBTdGF0ZXMgcHVibGljIHN0YXRlOwoKICAgIHVpbnQyNTYgcHVibGljIHdlaUlDT01pbmltdW07CgogICAgdWludDI1NiBwdWJsaWMgd2VpSUNPTWF4aW11bTsKCiAgICB1aW50MjU2IHB1YmxpYyBzaWxlbmNlUGVyaW9kOwoKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0QWNjZXB0aW5nRnVuZHNCbG9jazsKCiAgICB1aW50MjU2IHB1YmxpYyBlbmRCbG9jazsKCiAgICB1aW50MjU2IHB1YmxpYyBFVEhfSEVST0NPSU47IC8vbnVtYmVyIG9mIGhlcm9jb2lucyBwZXIgRVRICgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBsYXN0UmFrZVBvaW50czsKCgogICAgdWludDI1NiBwb2ludE11bHRpcGxpZXIgPSAxZTE4OyAvLzEwMCUgPSAxKjEwXjE4IHBvaW50cwogICAgdWludDI1NiB0b3RhbFJha2VQb2ludHM7IC8vdG90YWwgYW1vdW50IG9mIHJha2VzIGV2ZXIgcGFpZCBvdXQgYXMgYSBwb2ludHMgdmFsdWUuIGluY3JlYXNlcyBtb25vdG9uaWNhbGx5LCBidXQgdGhlIG51bWJlciByYW5nZSBpcyAyXjI1NiwgdGhhdCdzIGVub3VnaC4KICAgIHVpbnQyNTYgdW5jbGFpbWVkUmFrZXM7IC8vYW1vdW50IG9mIGNvaW5zIHVuY2xhaW1lZC4gYWN0cyBsaWtlIGEgc3BlY2lhbCBlbnRyeSB0byBiYWxhbmNlcwogICAgdWludDI1NiBjb25zdGFudCBwZXJjZW50Rm9yU2FsZSA9IDMwOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGNvbnRlc3RzOyAvLyB0cnVlIGlmIHRoaXMgYWRkcmVzcyBob2xkcyBhIGNvbnRlc3QKCiAgICAvL3RoaXMgY3JlYXRlcyB0aGUgY29udHJhY3QgYW5kIHN0b3JlcyB0aGUgb3duZXIuIGl0IGFsc28gcGFzc2VzIGluIDMgYWRkcmVzc2VzIHRvIGJlIHVzZWQgbGF0ZXIgZHVyaW5nIHRoZSBsaWZldGltZSBvZiB0aGUgY29udHJhY3QuCiAgICBmdW5jdGlvbiBIZXJvQ29pbihhZGRyZXNzIF9zdGF0ZUNvbnRyb2wsIGFkZHJlc3MgX3doaXRlbGlzdENvbnRyb2wsIGFkZHJlc3MgX3dpdGhkcmF3LCBhZGRyZXNzIF9pbml0aWFsSG9sZGVyKSB7CiAgICAgICAgaW5pdGlhbEhvbGRlciA9IF9pbml0aWFsSG9sZGVyOwogICAgICAgIHN0YXRlQ29udHJvbCA9IF9zdGF0ZUNvbnRyb2w7CiAgICAgICAgd2hpdGVsaXN0Q29udHJvbCA9IF93aGl0ZWxpc3RDb250cm9sOwogICAgICAgIHdpdGhkcmF3Q29udHJvbCA9IF93aXRoZHJhdzsKICAgICAgICBtb3ZlVG9TdGF0ZShTdGF0ZXMuSW5pdGlhbCk7CiAgICAgICAgd2VpSUNPTWluaW11bSA9IDA7CiAgICAgICAgLy90byBiZSBvdmVycmlkZGVuCiAgICAgICAgd2VpSUNPTWF4aW11bSA9IDA7CiAgICAgICAgZW5kQmxvY2sgPSAwOwogICAgICAgIEVUSF9IRVJPQ09JTiA9IDA7CiAgICAgICAgdG90YWxTdXBwbHkgPSAyMDAwMDAwMDAwICogcG9pbnRNdWx0aXBsaWVyOwogICAgICAgIC8vc2V0cyB0aGUgdmFsdWUgaW4gdGhlIHN1cGVyY2xhc3MuCiAgICAgICAgYmFsYW5jZXNbaW5pdGlhbEhvbGRlcl0gPSB0b3RhbFN1cHBseTsKICAgICAgICAvL2luaXRpYWxseSwgaW5pdGlhbEhvbGRlciBoYXMgMTAwJQogICAgfQoKICAgIGV2ZW50IENvbnRlc3RBbm5vdW5jZW1lbnQoYWRkcmVzcyBhZGRyKTsKCiAgICBldmVudCBXaGl0ZWxpc3RlZChhZGRyZXNzIGFkZHIpOwoKICAgIGV2ZW50IENyZWRpdGVkKGFkZHJlc3MgYWRkciwgdWludCBiYWxhbmNlLCB1aW50IHR4QW1vdW50KTsKCiAgICBldmVudCBTdGF0ZVRyYW5zaXRpb24oU3RhdGVzIG9sZFN0YXRlLCBTdGF0ZXMgbmV3U3RhdGUpOwoKICAgIG1vZGlmaWVyIG9ubHlXaGl0ZWxpc3QoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHdoaXRlbGlzdENvbnRyb2wpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBpbml0aWFsSG9sZGVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlTdGF0ZUNvbnRyb2woKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHN0YXRlQ29udHJvbCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5V2l0aGRyYXcoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHdpdGhkcmF3Q29udHJvbCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciByZXF1aXJlU3RhdGUoU3RhdGVzIF9yZXF1aXJlZFN0YXRlKSB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBfcmVxdWlyZWRTdGF0ZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgIEJFR0lOIElDTyBmdW5jdGlvbnMKICAgICovCgogICAgLy90aGlzIGlzIHRoZSBtYWluIGZ1bmRpbmcgZnVuY3Rpb24sIGl0IHVwZGF0ZXMgdGhlIGJhbGFuY2VzIG9mIEhlcm9jb2lucyBkdXJpbmcgdGhlIElDTy4KICAgIC8vbm8gcGFydGljdWxhciBpbmNlbnRpdmUgc2NoZW1lcyBoYXZlIGJlZW4gaW1wbGVtZW50ZWQgaGVyZQogICAgLy9pdCBpcyBvbmx5IGFjY2Vzc2libGUgZHVyaW5nIHRoZSAiSUNPIiBwaGFzZS4KICAgIGZ1bmN0aW9uKCkgcGF5YWJsZQogICAgcmVxdWlyZVN0YXRlKFN0YXRlcy5JY28pCiAgICB7CiAgICAgICAgcmVxdWlyZSh3aGl0ZWxpc3RbbXNnLnNlbmRlcl0gPT0gdHJ1ZSk7CiAgICAgICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgPD0gd2VpSUNPTWF4aW11bSk7IC8vbm90ZSB0aGF0IG1zZy52YWx1ZSBpcyBhbHJlYWR5IGluY2x1ZGVkIGluIHRoaXMuYmFsYW5jZQogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyIDwgZW5kQmxvY2spOwogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID49IHN0YXJ0QWNjZXB0aW5nRnVuZHNCbG9jayk7CiAgICAgICAgdWludDI1NiBoZXJvQ29pbkluY3JlYXNlID0gbXNnLnZhbHVlICogRVRIX0hFUk9DT0lOOwogICAgICAgIGJhbGFuY2VzW2luaXRpYWxIb2xkZXJdIC09IGhlcm9Db2luSW5jcmVhc2U7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gaGVyb0NvaW5JbmNyZWFzZTsKICAgICAgICBDcmVkaXRlZChtc2cuc2VuZGVyLCBiYWxhbmNlc1ttc2cuc2VuZGVyXSwgbXNnLnZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBtb3ZlVG9TdGF0ZShTdGF0ZXMgX25ld1N0YXRlKQogICAgaW50ZXJuYWwKICAgIHsKICAgICAgICBTdGF0ZVRyYW5zaXRpb24oc3RhdGUsIF9uZXdTdGF0ZSk7CiAgICAgICAgc3RhdGUgPSBfbmV3U3RhdGU7CiAgICB9CgogICAgLy8gSUNPIGNvbnRyYWN0IGNvbmZpZ3VyYXRpb24gZnVuY3Rpb24KICAgIC8vIG5ld0V0aElDT01pbmltdW0gaXMgdGhlIG1pbmltdW0gYW1vdW50IG9mIGZ1bmRzIHRvIHJhaXNlCiAgICAvLyBuZXdFdGhJQ09NYXhpbXVtIGlzIHRoZSBtYXhpbXVtIGFtb3VudCBvZiBmdW5kcyB0byByYWlzZQogICAgLy8gc2lsZW5jZVBlcmlvZCBpcyBhIG51bWJlciBvZiBibG9ja3MgdG8gd2FpdCBhZnRlciBzdGFydGluZyB0aGUgSUNPLiBObyBmdW5kcyBhcmUgYWNjZXB0ZWQgZHVyaW5nIHRoZSBzaWxlbmNlIHBlcmlvZC4gSXQgY2FuIGJlIHNldCB0byB6ZXJvLgogICAgLy8gbmV3RW5kQmxvY2sgaXMgdGhlIGFic29sdXRlIGJsb2NrIG51bWJlciBhdCB3aGljaCB0aGUgSUNPIG11c3Qgc3RvcC4gSXQgbXVzdCBiZSBzZXQgYWZ0ZXIgbm93ICsgc2lsZW5jZSBwZXJpb2QuCiAgICBmdW5jdGlvbiB1cGRhdGVFdGhJQ09UaHJlc2hvbGRzKHVpbnQyNTYgX25ld1dlaUlDT01pbmltdW0sIHVpbnQyNTYgX25ld1dlaUlDT01heGltdW0sIHVpbnQyNTYgX3NpbGVuY2VQZXJpb2QsIHVpbnQyNTYgX25ld0VuZEJsb2NrKQogICAgb25seVN0YXRlQ29udHJvbAogICAgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGVzLkluaXRpYWwgfHwgc3RhdGUgPT0gU3RhdGVzLlZhbHVhdGlvblNldCk7CiAgICAgICAgcmVxdWlyZShfbmV3V2VpSUNPTWF4aW11bSA+IF9uZXdXZWlJQ09NaW5pbXVtKTsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciArIHNpbGVuY2VQZXJpb2QgPCBfbmV3RW5kQmxvY2spOwogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyIDwgX25ld0VuZEJsb2NrKTsKICAgICAgICB3ZWlJQ09NaW5pbXVtID0gX25ld1dlaUlDT01pbmltdW07CiAgICAgICAgd2VpSUNPTWF4aW11bSA9IF9uZXdXZWlJQ09NYXhpbXVtOwogICAgICAgIHNpbGVuY2VQZXJpb2QgPSBfc2lsZW5jZVBlcmlvZDsKICAgICAgICBlbmRCbG9jayA9IF9uZXdFbmRCbG9jazsKICAgICAgICAvLyBpbml0aWFsIGNvbnZlcnNpb24gcmF0ZSBvZiBFVEhfSEVST0NPSU4gc2V0IG5vdywgdGhpcyBpcyB1c2VkIGR1cmluZyB0aGUgSWNvIHBoYXNlLgogICAgICAgIEVUSF9IRVJPQ09JTiA9ICgodG90YWxTdXBwbHkgKiBwZXJjZW50Rm9yU2FsZSkgLyAxMDApIC8gd2VpSUNPTWF4aW11bTsKICAgICAgICAvLyBjaGVjayBwb2ludE11bHRpcGxpZXIKICAgICAgICBtb3ZlVG9TdGF0ZShTdGF0ZXMuVmFsdWF0aW9uU2V0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdGFydElDTygpCiAgICBvbmx5U3RhdGVDb250cm9sCiAgICByZXF1aXJlU3RhdGUoU3RhdGVzLlZhbHVhdGlvblNldCkKICAgIHsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA8IGVuZEJsb2NrKTsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciArIHNpbGVuY2VQZXJpb2QgPCBlbmRCbG9jayk7CiAgICAgICAgc3RhcnRBY2NlcHRpbmdGdW5kc0Jsb2NrID0gYmxvY2subnVtYmVyICsgc2lsZW5jZVBlcmlvZDsKICAgICAgICBtb3ZlVG9TdGF0ZShTdGF0ZXMuSWNvKTsKICAgIH0KCgogICAgZnVuY3Rpb24gZW5kSUNPKCkKICAgIG9ubHlTdGF0ZUNvbnRyb2wKICAgIHJlcXVpcmVTdGF0ZShTdGF0ZXMuSWNvKQogICAgewogICAgICAgIGlmICh0aGlzLmJhbGFuY2UgPCB3ZWlJQ09NaW5pbXVtKSB7CiAgICAgICAgICAgIG1vdmVUb1N0YXRlKFN0YXRlcy5VbmRlcmZ1bmRlZCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBidXJuVW5zb2xkQ29pbnMoKTsKICAgICAgICAgICAgbW92ZVRvU3RhdGUoU3RhdGVzLk9wZXJhdGlvbmFsKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYW55b25lRW5kSUNPKCkKICAgIHJlcXVpcmVTdGF0ZShTdGF0ZXMuSWNvKQogICAgewogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID4gZW5kQmxvY2spOwogICAgICAgIGlmICh0aGlzLmJhbGFuY2UgPCB3ZWlJQ09NaW5pbXVtKSB7CiAgICAgICAgICAgIG1vdmVUb1N0YXRlKFN0YXRlcy5VbmRlcmZ1bmRlZCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBidXJuVW5zb2xkQ29pbnMoKTsKICAgICAgICAgICAgbW92ZVRvU3RhdGUoU3RhdGVzLk9wZXJhdGlvbmFsKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYnVyblVuc29sZENvaW5zKCkKICAgIGludGVybmFsCiAgICB7CiAgICAgICAgdWludDI1NiBzb2xkY29pbnMgPSB0aGlzLmJhbGFuY2UgKiBFVEhfSEVST0NPSU47CiAgICAgICAgdG90YWxTdXBwbHkgPSBzb2xkY29pbnMgKiAxMDAgLyBwZXJjZW50Rm9yU2FsZTsKICAgICAgICBiYWxhbmNlc1tpbml0aWFsSG9sZGVyXSA9IHRvdGFsU3VwcGx5IC0gc29sZGNvaW5zOwogICAgICAgIC8vc2xhc2hpbmcgdGhlIGluaXRpYWwgc3VwcGx5LCBzbyB0aGF0IHRoZSBpY28gaXMgc2VsbGluZyAzMCUgdG90YWwKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRUb1doaXRlbGlzdChhZGRyZXNzIF93aGl0ZWxpc3RlZCkKICAgIG9ubHlXaGl0ZWxpc3QKICAgICAgICAvLyAgICByZXF1aXJlU3RhdGUoU3RhdGVzLkljbykKICAgIHsKICAgICAgICB3aGl0ZWxpc3RbX3doaXRlbGlzdGVkXSA9IHRydWU7CiAgICAgICAgV2hpdGVsaXN0ZWQoX3doaXRlbGlzdGVkKTsKICAgIH0KCgogICAgLy9lbWVyZ2VuY3kgcGF1c2UgZm9yIHRoZSBJQ08KICAgIGZ1bmN0aW9uIHBhdXNlKCkKICAgIG9ubHlTdGF0ZUNvbnRyb2wKICAgIHJlcXVpcmVTdGF0ZShTdGF0ZXMuSWNvKQogICAgewogICAgICAgIG1vdmVUb1N0YXRlKFN0YXRlcy5QYXVzZWQpOwogICAgfQoKICAgIC8vaW4gY2FzZSB3ZSB3YW50IHRvIGNvbXBsZXRlbHkgYWJvcnQKICAgIGZ1bmN0aW9uIGFib3J0KCkKICAgIG9ubHlTdGF0ZUNvbnRyb2wKICAgIHJlcXVpcmVTdGF0ZShTdGF0ZXMuUGF1c2VkKQogICAgewogICAgICAgIG1vdmVUb1N0YXRlKFN0YXRlcy5VbmRlcmZ1bmRlZCk7CiAgICB9CgogICAgLy91bi1wYXVzZQogICAgZnVuY3Rpb24gcmVzdW1lSUNPKCkKICAgIG9ubHlTdGF0ZUNvbnRyb2wKICAgIHJlcXVpcmVTdGF0ZShTdGF0ZXMuUGF1c2VkKQogICAgewogICAgICAgIG1vdmVUb1N0YXRlKFN0YXRlcy5JY28pOwogICAgfQoKICAgIC8vaW4gY2FzZSBvZiBhIGZhaWxlZC9hYm9ydGVkIElDTyBldmVyeSBpbnZlc3RvciBjYW4gZ2V0IGJhY2sgdGhlaXIgbW9uZXkKICAgIGZ1bmN0aW9uIHJlcXVlc3RSZWZ1bmQoKQogICAgcmVxdWlyZVN0YXRlKFN0YXRlcy5VbmRlcmZ1bmRlZCkKICAgIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID4gMCk7CiAgICAgICAgLy90aGVyZSBpcyBubyBuZWVkIGZvciB1cGRhdGVBY2NvdW50KG1zZy5zZW5kZXIpIHNpbmNlIHRoZSB0b2tlbiBuZXZlciBiZWNhbWUgYWN0aXZlLgogICAgICAgIHVpbnQyNTYgcGF5b3V0ID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0gLyBFVEhfSEVST0NPSU47CiAgICAgICAgLy9yZXZlcnNlIGNhbGN1bGF0ZSB0aGUgYW1vdW50IHRvIHBheSBvdXQKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihwYXlvdXQpOwogICAgfQoKICAgIC8vYWZ0ZXIgdGhlIGljbyBoYXMgcnVuIGl0cyBjb3Vyc2UsIHRoZSB3aXRoZHJhdyBhY2NvdW50IGNhbiBkcmFpbiBmdW5kcyBiaXQtYnktYml0IGFzIG5lZWRlZC4KICAgIGZ1bmN0aW9uIHJlcXVlc3RQYXlvdXQodWludCBfYW1vdW50KQogICAgb25seVdpdGhkcmF3IC8vdmVyeSBpbXBvcnRhbnQhCiAgICByZXF1aXJlU3RhdGUoU3RhdGVzLk9wZXJhdGlvbmFsKQogICAgewogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoX2Ftb3VudCk7CiAgICB9CiAgICAvKioKICAgIEVORCBJQ08gZnVuY3Rpb25zCiAgICAqLwoKICAgIC8qKgogICAgQkVHSU4gRVJDMjAgZnVuY3Rpb25zCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgcmVxdWlyZVN0YXRlKFN0YXRlcy5PcGVyYXRpb25hbCkKICAgIHVwZGF0ZUFjY291bnQobXNnLnNlbmRlcikgLy91cGRhdGUgc2VuZGVycyByYWtlIGJlZm9yZSB0cmFuc2Zlciwgc28gdGhleSBjYW4gYWNjZXNzIHRoZWlyIGZ1bGwgYmFsYW5jZQogICAgdXBkYXRlQWNjb3VudChfdG8pIC8vdXBkYXRlIHJlY2VpdmVycyByYWtlIGJlZm9yZSB0cmFuc2ZlciBhcyB3ZWxsLCB0byBhdm9pZCBvdmVyLWF0dHJpYnV0aW5nIHJha2UKICAgIGVuZm9yY2VSYWtlKG1zZy5zZW5kZXIsIF92YWx1ZSkKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkKICAgIHJlcXVpcmVTdGF0ZShTdGF0ZXMuT3BlcmF0aW9uYWwpCiAgICB1cGRhdGVBY2NvdW50KF9mcm9tKSAvL3VwZGF0ZSBzZW5kZXJzIHJha2UgYmVmb3JlIHRyYW5zZmVyLCBzbyB0aGV5IGNhbiBhY2Nlc3MgdGhlaXIgZnVsbCBiYWxhbmNlCiAgICB1cGRhdGVBY2NvdW50KF90bykgLy91cGRhdGUgcmVjZWl2ZXJzIHJha2UgYmVmb3JlIHRyYW5zZmVyIGFzIHdlbGwsIHRvIGF2b2lkIG92ZXItYXR0cmlidXRpbmcgcmFrZQogICAgZW5mb3JjZVJha2UoX2Zyb20sIF92YWx1ZSkKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfYWNjb3VudCkKICAgIGNvbnN0YW50CiAgICByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX2FjY291bnRdICsgcmFrZXNPd2luZyhfYWNjb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gcGF5UmFrZSh1aW50MjU2IF92YWx1ZSkKICAgIHJlcXVpcmVTdGF0ZShTdGF0ZXMuT3BlcmF0aW9uYWwpCiAgICB1cGRhdGVBY2NvdW50KG1zZy5zZW5kZXIpCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gcGF5UmFrZUludGVybmFsKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICB9CgoKICAgIGZ1bmN0aW9uCiAgICBwYXlSYWtlSW50ZXJuYWwoYWRkcmVzcyBfc2VuZGVyLCB1aW50MjU2IF92YWx1ZSkKICAgIGludGVybmFsCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgaWYgKGJhbGFuY2VzW19zZW5kZXJdIDw9IF92YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChfdmFsdWUgIT0gMCkgewogICAgICAgICAgICBUcmFuc2Zlcihfc2VuZGVyLCByYWtlRXZlbnRQbGFjZWhvbGRlckFkZHJlc3MsIF92YWx1ZSk7CiAgICAgICAgICAgIGJhbGFuY2VzW19zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgdW5jbGFpbWVkUmFrZXMgKz0gX3ZhbHVlOwogICAgICAgICAgICAvLyAgIGNhbGMgYW1vdW50IG9mIHBvaW50cyBmcm9tIHRvdGFsOgogICAgICAgICAgICB1aW50MjU2IHBvaW50c1BhaWQgPSBfdmFsdWUgKiBwb2ludE11bHRpcGxpZXIgLyB0b3RhbFN1cHBseTsKICAgICAgICAgICAgdG90YWxSYWtlUG9pbnRzICs9IHBvaW50c1BhaWQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwoKICAgIH0KICAgIC8qKgogICAgRU5EIEVSQzIwIGZ1bmN0aW9ucwogICAgKi8KICAgIC8qKgogICAgQkVHSU4gUmFrZSBtb2RpZmllciB1cGRhdGVBY2NvdW50CiAgICAqLwogICAgbW9kaWZpZXIgdXBkYXRlQWNjb3VudChhZGRyZXNzIF9hY2NvdW50KSB7CiAgICAgICAgdWludDI1NiBvd2luZyA9IHJha2VzT3dpbmcoX2FjY291bnQpOwogICAgICAgIGlmIChvd2luZyAhPSAwKSB7CiAgICAgICAgICAgIHVuY2xhaW1lZFJha2VzIC09IG93aW5nOwogICAgICAgICAgICBiYWxhbmNlc1tfYWNjb3VudF0gKz0gb3dpbmc7CiAgICAgICAgICAgIFRyYW5zZmVyKHJha2VFdmVudFBsYWNlaG9sZGVyQWRkcmVzcywgX2FjY291bnQsIG93aW5nKTsKICAgICAgICB9CiAgICAgICAgLy9hbHNvIGlmIDAgdGhpcyBuZWVkcyB0byBiZSBjYWxsZWQsIHNpbmNlIGxhc3RSYWtlUG9pbnRzIG5lZWQgdGhlIHJpZ2h0IHZhbHVlCiAgICAgICAgbGFzdFJha2VQb2ludHNbX2FjY291bnRdID0gdG90YWxSYWtlUG9pbnRzOwogICAgICAgIF87CiAgICB9CgogICAgLy90b2RvIHVzZSBzYWZlbWF0aC5zb2wKICAgIGZ1bmN0aW9uIHJha2VzT3dpbmcoYWRkcmVzcyBfYWNjb3VudCkKICAgIGludGVybmFsCiAgICBjb25zdGFudAogICAgcmV0dXJucyAodWludDI1Nikgey8vcmV0dXJucyBhbHdheXMgPiAwIHZhbHVlCiAgICAgICAgLy9ob3cgbXVjaCBpcyBfYWNjb3VudCBvd2VkLCBkZW5vbWluYXRlZCBpbiBwb2ludHMgZnJvbSB0b3RhbCBzdXBwbHkKICAgICAgICB1aW50MjU2IG5ld1Jha2VQb2ludHMgPSB0b3RhbFJha2VQb2ludHMgLSBsYXN0UmFrZVBvaW50c1tfYWNjb3VudF07CiAgICAgICAgLy9hbHdheXMgcG9zaXRpdmUKICAgICAgICAvL3dlaWdoIGJ5IG15IGJhbGFuY2UgKGRpbWVuc2lvbiBIQyoxMF4xOCkKICAgICAgICB1aW50MjU2IGJhc2ljUG9pbnRzID0gYmFsYW5jZXNbX2FjY291bnRdICogbmV3UmFrZVBvaW50czsKICAgICAgICAvL3N0aWxsIHBvc2l0aXZlCiAgICAgICAgLy9ub3JtYWxpemUgdG8gZGltZW5zaW9uIEhDIGJ5IG1vdmluZyBjb21tYSBsZWZ0IGJ5IDE4IHBsYWNlcwogICAgICAgIHJldHVybiAoYmFzaWNQb2ludHMpIC8gcG9pbnRNdWx0aXBsaWVyOwogICAgfQogICAgLyoqCiAgICBFTkQgUmFrZSBtb2RpZmllciB1cGRhdGVBY2NvdW50CiAgICAqLwoKICAgIC8vIGNvbnRlc3QgbWFuYWdlbWVudCBmdW5jdGlvbnMKCiAgICBtb2RpZmllciBlbmZvcmNlUmFrZShhZGRyZXNzIF9jb250ZXN0LCB1aW50MjU2IF92YWx1ZSl7CiAgICAgICAgLy93ZSBjYWxjdWxhdGUgMSUgb2YgdGhlIHRvdGFsIHZhbHVlLCByb3VuZGVkIHVwLiBkaXZpc2lvbiB3b3VsZCByb3VuZCBkb3duIG90aGVyd2lzZS4KICAgICAgICAvL2V4cGxpY2l0IGJyYWNrZXRzIGlsbHVzdHJhdGUgdGhhdCB0aGUgY2FsY3VsYXRpb24gb25seSByb3VuZCBkb3duIHdoZW4gZGl2aWRpbmcgYnkgMTAwLCB0byBhdm9pZCBhbiBleHByZXNzaW9uCiAgICAgICAgLy8gbGlrZSB2YWx1ZSAqICg5OS8xMDApCiAgICAgICAgaWYgKGNvbnRlc3RzW19jb250ZXN0XSkgewogICAgICAgICAgICB1aW50MjU2IHRvUGF5ID0gX3ZhbHVlIC0gKChfdmFsdWUgKiA5OSkgLyAxMDApOwogICAgICAgICAgICBib29sIHBhaWQgPSBwYXlSYWtlSW50ZXJuYWwoX2NvbnRlc3QsIHRvUGF5KTsKICAgICAgICAgICAgcmVxdWlyZShwYWlkKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBhbGwgZnVuY3Rpb25zIHJlcXVpcmUgSGVyb0NvaW4gb3BlcmF0aW9uYWwgc3RhdGUKCgogICAgLy8gcmVnaXN0ZXJDb250ZXN0IGRlY2xhcmVzIGEgY29udGVzdCB0byBIZXJvQ29pbi4KICAgIC8vIEl0IG11c3QgYmUgY2FsbGVkIGZyb20gYW4gYWRkcmVzcyB0aGF0IGhhcyBIZXJvQ29pbi4KICAgIC8vIFRoaXMgYWRkcmVzcyBpcyByZWNvcmRlZCBhcyB0aGUgY29udHJhY3QgYWRtaW4uCiAgICBmdW5jdGlvbiByZWdpc3RlckNvbnRlc3QoKQogICAgewogICAgICAgIGNvbnRlc3RzW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgICBDb250ZXN0QW5ub3VuY2VtZW50KG1zZy5zZW5kZXIpOwogICAgfQp9'.
	

]
