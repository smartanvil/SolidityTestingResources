Class {
	#name : #SRT9a31c2c7b5f0f5a41ad923fd0bea73ece3361575,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9a31c2c7b5f0f5a41ad923fd0bea73ece3361575 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBwZW5kaW5nV2l0aGRyYXdhbHM7CiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCgoKZnVuY3Rpb24gd2l0aGRyYXcoKSB7CiAgICAgICAgdWludCBhbW91bnQgPSBwZW5kaW5nV2l0aGRyYXdhbHNbbXNnLnNlbmRlcl07CiAgICAgICAgcGVuZGluZ1dpdGhkcmF3YWxzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudCk7CiAgICB9Cgp9Ci8qKgogKiBAdGl0bGUgQ2xhaW1hYmxlCiAqIEBkZXYgRXh0ZW5zaW9uIGZvciB0aGUgT3duYWJsZSBjb250cmFjdCwgd2hlcmUgdGhlIG93bmVyc2hpcCBuZWVkcyB0byBiZSBjbGFpbWVkLgogKiBUaGlzIGFsbG93cyB0aGUgbmV3IG93bmVyIHRvIGFjY2VwdCB0aGUgdHJhbnNmZXIuCiAqLwoKY29udHJhY3QgQWlyRHJvcCBpcyBPd25hYmxlIHsKCiAgVG9rZW4gdG9rZW47CgogIGV2ZW50IFRyYW5zZmVycmVkVG9rZW4oYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBGYWlsZWRUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICBtb2RpZmllciB3aGVuRHJvcElzQWN0aXZlKCkgewogICAgYXNzZXJ0KGlzQWN0aXZlKCkpOwoKICAgIF87CiAgfQphZGRyZXNzIHB1YmxpYyBjcmVhdG9yOwogIGZ1bmN0aW9uIEFpckRyb3AgKCkgewogICAgICBhZGRyZXNzIF90b2tlbkFkZHIgPSBjcmVhdG9yOyAvL2hlcmUgcGFzcyBhZGRyZXNzIG9mIHlvdXIgdG9rZW4KICAgICAgdG9rZW4gPSBUb2tlbihfdG9rZW5BZGRyKTsKICB9CgogIGZ1bmN0aW9uIGlzQWN0aXZlKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuICgKICAgICAgICB0b2tlbnNBdmFpbGFibGUoKSA+IDAgLy8gVG9rZW5zIG11c3QgYmUgYXZhaWxhYmxlIHRvIHNlbmQKICAgICk7CiAgfQogIC8vYmVsb3cgZnVuY3Rpb24gY2FuIGJlIHVzZWQgd2hlbiB5b3Ugd2FudCB0byBzZW5kIGV2ZXJ5IHJlY2lwZWludCB3aXRoIGRpZmZlcmVudCBudW1iZXIgb2YgdG9rZW5zCiAgZnVuY3Rpb24gc2VuZFRva2VucyhhZGRyZXNzW10gZGVzdHMsIHVpbnQyNTZbXSB2YWx1ZXMpIHdoZW5Ecm9wSXNBY3RpdmUgb25seU93bmVyIGV4dGVybmFsIHsKICAgIHVpbnQyNTYgaSA9IDA7CiAgICB3aGlsZSAoaSA8IGRlc3RzLmxlbmd0aCkgewogICAgICAgIHVpbnQyNTYgdG9TZW5kID0gdmFsdWVzW2ldIDsKICAgICAgICBzZW5kSW50ZXJuYWxseShkZXN0c1tpXSAsIHRvU2VuZCwgdmFsdWVzW2ldKTsKICAgICAgICBpKys7CiAgICB9CiAgfQoKICAvLyB0aGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHdoZW4geW91IHdhbnQgdG8gc2VuZCBzYW1lIG51bWJlciBvZiB0b2tlbnMgdG8gYWxsIHRoZSByZWNpcGllbnRzCiAgZnVuY3Rpb24gc2VuZFRva2Vuc1NpbmdsZVZhbHVlKGFkZHJlc3NbXSBkZXN0cywgdWludDI1NiB2YWx1ZSkgd2hlbkRyb3BJc0FjdGl2ZSBvbmx5T3duZXIgZXh0ZXJuYWwgewogICAgdWludDI1NiBpID0gMDsKICAgIHVpbnQyNTYgdG9TZW5kID0gdmFsdWU7CiAgICB3aGlsZSAoaSA8IGRlc3RzLmxlbmd0aCkgewogICAgICAgIHNlbmRJbnRlcm5hbGx5KGRlc3RzW2ldICwgdG9TZW5kLCB2YWx1ZSk7CiAgICAgICAgaSsrOwogICAgfQogIH0gIAoKICBmdW5jdGlvbiBzZW5kSW50ZXJuYWxseShhZGRyZXNzIHJlY2lwaWVudCwgdWludDI1NiB0b2tlbnNUb1NlbmQsIHVpbnQyNTYgdmFsdWVUb1ByZXNlbnQpIGludGVybmFsIHsKICAgIGlmKHJlY2lwaWVudCA9PSBhZGRyZXNzKDApKSByZXR1cm47CgogICAgaWYodG9rZW5zQXZhaWxhYmxlKCkgPj0gdG9rZW5zVG9TZW5kKSB7CiAgICAgIHRva2VuLnRyYW5zZmVyKHJlY2lwaWVudCwgdG9rZW5zVG9TZW5kKTsKICAgICAgVHJhbnNmZXJyZWRUb2tlbihyZWNpcGllbnQsIHZhbHVlVG9QcmVzZW50KTsKICAgIH0gZWxzZSB7CiAgICAgIEZhaWxlZFRyYW5zZmVyKHJlY2lwaWVudCwgdmFsdWVUb1ByZXNlbnQpOyAKICAgIH0KICB9ICAgCgoKICBmdW5jdGlvbiB0b2tlbnNBdmFpbGFibGUoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogIH0KCiAgZnVuY3Rpb24gZGVzdHJveSgpIG9ubHlPd25lciB7CiAgICB1aW50MjU2IGJhbGFuY2UgPSB0b2tlbnNBdmFpbGFibGUoKTsKICAgIHJlcXVpcmUgKGJhbGFuY2UgPiAwKTsKICAgIHRva2VuLnRyYW5zZmVyKG93bmVyLCBiYWxhbmNlKTsKICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgfQp9CmNvbnRyYWN0IENsYWltYWJsZSBpcyBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIHBlbmRpbmdPd25lcjsKCiAgICAvKioKICAgICAqIEBkZXYgTW9kaWZpZXIgdGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBwZW5kaW5nT3duZXIuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlQZW5kaW5nT3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHBlbmRpbmdPd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHNldCB0aGUgcGVuZGluZ093bmVyIGFkZHJlc3MuCiAgICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBwZW5kaW5nT3duZXIgPSBuZXdPd25lcjsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBwZW5kaW5nT3duZXIgYWRkcmVzcyB0byBmaW5hbGl6ZSB0aGUgdHJhbnNmZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNsYWltT3duZXJzaGlwKCkgb25seVBlbmRpbmdPd25lciBwdWJsaWMgewogICAgICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBwZW5kaW5nT3duZXIpOwogICAgICAgIG93bmVyID0gcGVuZGluZ093bmVyOwogICAgICAgIHBlbmRpbmdPd25lciA9IGFkZHJlc3MoMCk7CiAgICB9CgoKfQoKCmNvbnRyYWN0IEV0aGVyVG9GQVJNIGlzIE93bmFibGUgewogdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCgp1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsvLyB0b3RhbCBubyBvZiB0b2tlbnMgaW4gc3VwcGx5CnVpbnQgcmVtYWluaW5nOwp1aW50IHByaWNlOwoKbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBpbnZlc3RvcnM7IC8vaXQgbWFwcyBubyBvZiBGYXJtQ29pbiBnaXZlbiB0byBlYWNoIGFkZHJlc3MKCiBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CgpmdW5jdGlvbiAoKSAgcGF5YWJsZSB7Ly8gY2FsbGVkIHdoZW4gZXRoZXIgaXMgc2VuZAoKICAgIHVpbnQyNTYgcmVtYWluaW5nOwogICAgdWludDI1NiB0b3RhbFN1cHBseTsKICAgIHVpbnQgcHJpY2U7CiAgICBhc3NlcnQocmVtYWluaW5nIDwgdG90YWxTdXBwbHkpOwogICAgdWludCBGYXJtQ29pbiA9IGRpdihtc2cudmFsdWUscHJpY2UpOyAvLyBjYWxjdWxhdGUgbm8gb2YgRmFybUNvaW4gdG8gYmUgaXNzdWVkIGRlcGVuZGluZyBvbiB0aGUgcHJpY2UgYW5kIGV0aGVyIHNlbmQKICAgIGFzc2VydChGYXJtQ29pbiA8IHN1Yih0b3RhbFN1cHBseSxyZW1haW5pbmcpKTsgLy9GYXJtQ29pbiBhdmFpbGFibGUgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiB0aGUgb25lIHRvIGJlIGlzc3VlZAogICAgYWRkKGludmVzdG9yc1ttc2cuc2VuZGVyXSxGYXJtQ29pbik7CiAgICByZW1haW5pbmcgPSBhZGQocmVtYWluaW5nLCBGYXJtQ29pbik7CiAgICB0cmFuc2Zlcihtc2cuc2VuZGVyLCBGYXJtQ29pbik7Cn0KCmZ1bmN0aW9uIHNldFByaWNlKHVpbnQgX3ByaWNlKQp7IC8vICBwcmljZSBuZWVkIHRvIGJlIHNldCBtYXVhbGx5IGFzIGl0IGNhbm5vdCBiZSBkb25lIHZpYSBldGhlcmV1bSBuZXR3b3JrCiAgICB1aW50IHByaWNlOwogICAgcHJpY2UgPSBfcHJpY2U7Cn0KCmZ1bmN0aW9uIGdpdmVSZXdhcmQoYWRkcmVzcyBfcGF5ZXIsdWludCBfcGF5bWVudCkgcHVibGljIHBheWFibGUgcmV0dXJucyAoYm9vbCBfc3VjY2Vzcyl7CiAgICAgICAgdWludCB0b2tlbmFtb3VudCA9IF9wYXltZW50IC8gcHJpY2U7CiAgICAgICAgcmV0dXJuIHRyYW5zZmVyKF9wYXllcix0b2tlbmFtb3VudCk7CiAgICB9ICAgIAp9Cgpjb250cmFjdCBQYXlUb2tlbiBpcyBFdGhlclRvRkFSTSB7CiBmdW5jdGlvbigpIHB1YmxpYyBwYXlhYmxlewogICAgICAgICBpZihtc2cuc2VuZGVyIT1vd25lcikKICAgICAgIGdpdmVSZXdhcmQobXNnLnNlbmRlcixtc2cudmFsdWUpOwp9Cn0KCmNvbnRyYWN0IFRva2VuIGlzIEV0aGVyVG9GQVJNIHsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHt9CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CgogICAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfYWRkcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB3ZWkgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykge30KCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwogICAgCn0KCgoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBUb2tlbiB7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvL0RlZmF1bHQgYXNzdW1lcyB0b3RhbFN1cHBseSBjYW4ndCBiZSBvdmVyIG1heCAoMl4yNTYgLSAxKS4KICAgICAgICAvL0lmIHlvdXIgdG9rZW4gbGVhdmVzIG91dCB0b3RhbFN1cHBseSBhbmQgY2FuIGlzc3VlIG1vcmUgdG9rZW5zIGFzIHRpbWUgZ29lcyBvbiwgeW91IG5lZWQgdG8gY2hlY2sgaWYgaXQgZG9lc24ndCB3cmFwLgogICAgICAgIC8vUmVwbGFjZSB0aGUgaWYgd2l0aCB0aGlzIG9uZSBpbnN0ZWFkLgogICAgICAgIC8vaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgICAgICAvL2lmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7Cn0KCgoKLy9uYW1lIHRoaXMgY29udHJhY3Qgd2hhdGV2ZXIgeW91J2QgbGlrZQpjb250cmFjdCBGYXJtQ29pbiBpcyBTdGFuZGFyZFRva2VuIHsKCiAgIAogICAgLyogUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gKi8KCiAgICAvKgogICAgTk9URToKICAgIFRoZSBmb2xsb3dpbmcgdmFyaWFibGVzIGFyZSBPUFRJT05BTCB2YW5pdGllcy4gT25lIGRvZXMgbm90IGhhdmUgdG8gaW5jbHVkZSB0aGVtLgogICAgVGhleSBhbGxvdyBvbmUgdG8gY3VzdG9taXNlIHRoZSB0b2tlbiBjb250cmFjdCAmIGluIG5vIHdheSBpbmZsdWVuY2VzIHRoZSBjb3JlIGZ1bmN0aW9uYWxpdHkuCiAgICBTb21lIHdhbGxldHMvaW50ZXJmYWNlcyBtaWdodCBub3QgZXZlbiBib3RoZXIgdG8gbG9vayBhdCB0aGlzIGluZm9ybWF0aW9uLgogICAgKi8KICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICdGYXJtQ29pbic7ICAgICAgICAgICAgICAgICAgIC8vZmFuY3kgbmFtZTogZWcgU2ltb24gQnVja3MKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDE4OyAgICAgICAgICAgICAgICAvL0hvdyBtYW55IGRlY2ltYWxzIHRvIHNob3cuIGllLiBUaGVyZSBjb3VsZCAxMDAwIGJhc2UgdW5pdHMgd2l0aCAzIGRlY2ltYWxzLiBNZWFuaW5nIDAuOTgwIFNCWCA9IDk4MCBiYXNlIHVuaXRzLiBJdCdzIGxpa2UgY29tcGFyaW5nIDEgd2VpIHRvIDEgZXRoZXIuCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICdGQVJNJzsgICAgICAgICAgICAgICAgIC8vQW4gaWRlbnRpZmllcjogZWcgU0JYCiAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAnSDEuMCc7ICAgICAgIC8vaHVtYW4gMC4xIHN0YW5kYXJkLiBKdXN0IGFuIGFyYml0cmFyeSB2ZXJzaW9uaW5nIHNjaGVtZS4KCi8vCi8vIENIQU5HRSBUSEVTRSBWQUxVRVMgRk9SIFlPVVIgVE9LRU4KLy8KCi8vbWFrZSBzdXJlIHRoaXMgZnVuY3Rpb24gbmFtZSBtYXRjaGVzIHRoZSBjb250cmFjdCBuYW1lIGFib3ZlLiBTbyBpZiB5b3UncmUgdG9rZW4gaXMgY2FsbGVkIFR1dG9yaWFsVG9rZW4sIG1ha2Ugc3VyZSB0aGUgLy9jb250cmFjdCBuYW1lIGFib3ZlIGlzIGFsc28gVHV0b3JpYWxUb2tlbiBpbnN0ZWFkIG9mIEVSQzIwVG9rZW4KCiAgICBmdW5jdGlvbiBGYXJtQ29pbigKICAgICAgICApIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDUwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7ICAgICAgICAgICAgICAgLy8gR2l2ZSB0aGUgY3JlYXRvciBhbGwgaW5pdGlhbCB0b2tlbnMgKDEwMDAwMCBmb3IgZXhhbXBsZSkKICAgICAgICB0b3RhbFN1cHBseSA9IDUwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRvdGFsIHN1cHBseSAoMTAwMDAwIGZvciBleGFtcGxlKQogICAgICAgIG5hbWUgPSAiRmFybUNvaW4iOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBuYW1lIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgZGVjaW1hbHMgPSAxODsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW1vdW50IG9mIGRlY2ltYWxzIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgc3ltYm9sID0gIkZBUk0iOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgfQoKICAgIC8qIEFwcHJvdmVzIGFuZCB0aGVuIGNhbGxzIHRoZSByZWNlaXZpbmcgY29udHJhY3QgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKCiAgICAgICAgLy9jYWxsIHRoZSByZWNlaXZlQXBwcm92YWwgZnVuY3Rpb24gb24gdGhlIGNvbnRyYWN0IHlvdSB3YW50IHRvIGJlIG5vdGlmaWVkLiBUaGlzIGNyYWZ0cyB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIG1hbnVhbGx5IHNvIG9uZSBkb2Vzbid0IGhhdmUgdG8gaW5jbHVkZSBhIGNvbnRyYWN0IGluIGhlcmUganVzdCBmb3IgdGhpcy4KICAgICAgICAvL3JlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW5Db250cmFjdCwgYnl0ZXMgX2V4dHJhRGF0YSkKICAgICAgICAvL2l0IGlzIGFzc3VtZWQgdGhhdCB3aGVuIGRvZXMgdGhpcyB0aGF0IHRoZSBjYWxsICpzaG91bGQqIHN1Y2NlZWQsIG90aGVyd2lzZSBvbmUgd291bGQgdXNlIHZhbmlsbGEgYXBwcm92ZSBpbnN0ZWFkLgogICAgICAgIGlmKCFfc3BlbmRlci5jYWxsKGJ5dGVzNChieXRlczMyKHNoYTMoInJlY2VpdmVBcHByb3ZhbChhZGRyZXNzLHVpbnQyNTYsYWRkcmVzcyxieXRlcykiKSkpLCBtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpKSB7IHJldmVydDsgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgoKY29udHJhY3QgRmFybUNvaW5TYWxlIGlzIEZhcm1Db2luIHsKCiAgICB1aW50MjU2IHB1YmxpYyBtYXhNaW50YWJsZTsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsTWludGVkOwogICAgdWludDI1NiBwdWJsaWMgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQgcHVibGljIGVuZEJsb2NrOwogICAgdWludCBwdWJsaWMgc3RhcnRCbG9jazsKICAgIHVpbnQyNTYgcHVibGljIGV4Y2hhbmdlUmF0ZTsKICAgIHVpbnQgcHVibGljIHN0YXJ0VGltZTsKICAgIGJvb2wgcHVibGljIGlzRnVuZGluZzsKICAgIGFkZHJlc3MgcHVibGljIEVUSFdhbGxldDsKICAgIHVpbnQyNTYgcHVibGljIGhlbGRUb3RhbDsKCiAgICBib29sIHByaXZhdGUgY29uZmlnU2V0OwogICAgYWRkcmVzcyBwdWJsaWMgY3JlYXRvcjsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBoZWxkVG9rZW5zOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgaGVsZFRpbWVsaW5lOwoKICAgIGV2ZW50IENvbnRyaWJ1dGlvbihhZGRyZXNzIGZyb20sIHVpbnQyNTYgYW1vdW50KTsKICAgIGV2ZW50IFJlbGVhc2VUb2tlbnMoYWRkcmVzcyBmcm9tLCB1aW50MjU2IGFtb3VudCk7CgovLyBzdGFydCBhbmQgZW5kIGRhdGVzIHdoZXJlIGNyb3dkc2FsZSBpcyBhbGxvd2VkIChib3RoIGluY2x1c2l2ZSkKICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBTVEFSVCA9IDE1MTc0NjEyMDAwMDA7IC8vICtuZXcgRGF0ZSgyMDE4LCAyLCAxKSAvIDEwMDAKICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBFTkQgPSAxNTIyNTU1MjAwMDAwOyAvLyArbmV3IERhdGUoMjAxOCwgNCwgMSkgLyAxMDAwCgovLyBAcmV0dXJuIHRoZSByYXRlIGluIEZBUk0gcGVyIDEgRVRIIGFjY29yZGluZyB0byB0aGUgdGltZSBvZiB0aGUgdHggYW5kIHRoZSBGQVJNIHByaWNpbmcgcHJvZ3JhbS4KICAgIC8vIEBPdmVycmlkZQogIGZ1bmN0aW9uIGdldFJhdGUoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJhdGUpIHsKICAgIGlmICAgICAgKG5vdyA8IFNUQVJUKSAgICAgICAgICAgIHJldHVybiByYXRlID0gODQwOyAvLyBwcmVzYWxlLCA0MCUgYm9udXMKICAgIGVsc2UgaWYgKG5vdyA8PSBTVEFSVCArICA2IGRheXMpIHJldHVybiByYXRlID0gODEwOyAvLyBkYXkgMSB0byA2LCAzNSUgYm9udXMKICAgIGVsc2UgaWYgKG5vdyA8PSBTVEFSVCArIDEzIGRheXMpIHJldHVybiByYXRlID0gNzgwOyAvLyBkYXkgNyB0byAxMywgMzAlIGJvbnVzCiAgICBlbHNlIGlmIChub3cgPD0gU1RBUlQgKyAyMCBkYXlzKSByZXR1cm4gcmF0ZSA9IDc1MDsgLy8gZGF5IDE0IHRvIDIwLCAyNSUgYm9udXMKICAgIGVsc2UgaWYgKG5vdyA8PSBTVEFSVCArIDI4IGRheXMpIHJldHVybiByYXRlID0gNzIwOyAvLyBkYXkgMjEgdG8gMjgsIDIwJSBib251cwogICAgcmV0dXJuIHJhdGUgPSA2MDA7IC8vIG5vIGJvbnVzCiAgfQoKCiAgICBmdW5jdGlvbiBGYXJtQ29pblNhbGUoKSB7CiAgICAgICAgc3RhcnRCbG9jayA9IGJsb2NrLm51bWJlcjsKICAgICAgICBtYXhNaW50YWJsZSA9IDUwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7IC8vIDMgbWlsbGlvbiBtYXggc2VsbGFibGUgKDE4IGRlY2ltYWxzKQogICAgICAgIEVUSFdhbGxldCA9IDB4M2I0NDRmQzhjMkM0NURDYTVlNjYxMEU0OWRDNTQ0MjNjNURjZDg2RTsKICAgICAgICBpc0Z1bmRpbmcgPSB0cnVlOwogICAgICAgIAogICAgICAgIGNyZWF0b3IgPSBtc2cuc2VuZGVyOwogICAgICAgIGNyZWF0ZUhlbGRDb2lucygpOwogICAgICAgIHN0YXJ0VGltZSA9IDE1MTc0NjEyMDAwMDA7CiAgICAgICAgZXhjaGFuZ2VSYXRlPSA2MDA7CiAgICAgICAgfQoKIAogICAgLy8gc2V0dXAgZnVuY3Rpb24gdG8gYmUgcmFuIG9ubHkgMSB0aW1lCiAgICAvLyBzZXR1cCB0b2tlbiBhZGRyZXNzCiAgICAvLyBzZXR1cCBlbmQgQmxvY2sgbnVtYmVyCiAgICBmdW5jdGlvbiBzZXR1cChhZGRyZXNzIFRPS0VOLCB1aW50IGVuZEJsb2NrVGltZSkgewogICAgICAgIHJlcXVpcmUoIWNvbmZpZ1NldCk7CiAgICAgICAgZW5kQmxvY2sgPSBlbmRCbG9ja1RpbWU7CiAgICAgICAgY29uZmlnU2V0ID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZVNhbGUoKSBleHRlcm5hbCB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlcj09Y3JlYXRvcik7CiAgICAgIGlzRnVuZGluZyA9IGZhbHNlOwogICAgfQoKICAgIC8vIENPTlRSSUJVVEUgRlVOQ1RJT04KICAgIC8vIGNvbnZlcnRzIEVUSCB0byBUT0tFTiBhbmQgc2VuZHMgbmV3IFRPS0VOIHRvIHRoZSBzZW5kZXIKICAgIGZ1bmN0aW9uIGNvbnRyaWJ1dGUoKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZT4wKTsKICAgICAgICByZXF1aXJlKGlzRnVuZGluZyk7CiAgICAgICAgcmVxdWlyZShibG9jay5udW1iZXIgPD0gZW5kQmxvY2spOwogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gbXNnLnZhbHVlICogZXhjaGFuZ2VSYXRlOwogICAgICAgIHVpbnQyNTYgdG90YWwgPSB0b3RhbE1pbnRlZCArIGFtb3VudDsKICAgICAgICByZXF1aXJlKHRvdGFsPD1tYXhNaW50YWJsZSk7CiAgICAgICAgdG90YWxNaW50ZWQgKz0gdG90YWw7CiAgICAgICAgRVRIV2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgICAgQ29udHJpYnV0aW9uKG1zZy5zZW5kZXIsIGFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gZGVwb3NpdCgpIHBheWFibGUgewogICAgICBjcmVhdGUobXNnLnNlbmRlcik7CiAgICB9CiAgICBmdW5jdGlvbiByZWdpc3RlcihhZGRyZXNzIHNlbmRlcikgcGF5YWJsZSB7CiAgICB9CiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgIH0KICAKICAgIGZ1bmN0aW9uIGNyZWF0ZShhZGRyZXNzIF9iZW5lZmljaWFyeSkgcGF5YWJsZXsKICAgIHVpbnQyNTYgYW1vdW50ID0gbXNnLnZhbHVlOwogICAgLy8vIAogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgewogICAgcmVxdWlyZSAoIG1zZy5zZW5kZXIgPT0gb3duZXIgKTsKICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKfQogICAgLy8gdXBkYXRlIHRoZSBFVEgvQ09JTiByYXRlCiAgICBmdW5jdGlvbiB1cGRhdGVSYXRlKHVpbnQyNTYgcmF0ZSkgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlcj09Y3JlYXRvcik7CiAgICAgICAgcmVxdWlyZShpc0Z1bmRpbmcpOwogICAgICAgIGV4Y2hhbmdlUmF0ZSA9IHJhdGU7CiAgICB9CgogICAgLy8gY2hhbmdlIGNyZWF0b3IgYWRkcmVzcwogICAgZnVuY3Rpb24gY2hhbmdlQ3JlYXRvcihhZGRyZXNzIF9jcmVhdG9yKSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyPT1jcmVhdG9yKTsKICAgICAgICBjcmVhdG9yID0gX2NyZWF0b3I7CiAgICB9CgogICAgLy8gY2hhbmdlIHRyYW5zZmVyIHN0YXR1cyBmb3IgRmFybUNvaW4gdG9rZW4KICAgIGZ1bmN0aW9uIGNoYW5nZVRyYW5zZmVyU3RhdHMoYm9vbCBfYWxsb3dlZCkgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlcj09Y3JlYXRvcik7CiAgICAgfQoKICAgIC8vIGludGVybmFsIGZ1bmN0aW9uIHRoYXQgYWxsb2NhdGVzIGEgc3BlY2lmaWMgYW1vdW50IG9mIEFUWVggYXQgYSBzcGVjaWZpYyBibG9jayBudW1iZXIuCiAgICAvLyBvbmx5IHJhbiAxIHRpbWUgb24gaW5pdGlhbGl6YXRpb24KICAgIGZ1bmN0aW9uIGNyZWF0ZUhlbGRDb2lucygpIGludGVybmFsIHsKICAgICAgICAvLyBUT1RBTCBTVVBQTFkgPSA1LDAwMCwwMDAKICAgICAgICBjcmVhdGVIb2xkVG9rZW4obXNnLnNlbmRlciwgMTAwMCk7CiAgICAgICAgY3JlYXRlSG9sZFRva2VuKDB4ZDk3MTBEODI5ZmE3YzM2RTAyNTAxMWI4MDE2NjQwMDlFNGU3YzY5RCwgMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKTsKICAgICAgICBjcmVhdGVIb2xkVG9rZW4oMHhkOTcxMEQ4MjlmYTdjMzZFMDI1MDExYjgwMTY2NDAwOUU0ZTdjNjlELCAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApOwogICAgfQoKICAgIC8vIGZ1bmN0aW9uIHRvIGNyZWF0ZSBoZWxkIHRva2VucyBmb3IgZGV2ZWxvcGVyCiAgICBmdW5jdGlvbiBjcmVhdGVIb2xkVG9rZW4oYWRkcmVzcyBfdG8sIHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB7CiAgICAgICAgaGVsZFRva2Vuc1tfdG9dID0gYW1vdW50OwogICAgICAgIGhlbGRUaW1lbGluZVtfdG9dID0gYmxvY2subnVtYmVyICsgMDsKICAgICAgICBoZWxkVG90YWwgKz0gYW1vdW50OwogICAgICAgIHRvdGFsTWludGVkICs9IGhlbGRUb3RhbDsKICAgIH0KCiAgICAvLyBmdW5jdGlvbiB0byByZWxlYXNlIGhlbGQgdG9rZW5zIGZvciBkZXZlbG9wZXJzCiAgICBmdW5jdGlvbiByZWxlYXNlSGVsZENvaW5zKCkgZXh0ZXJuYWwgewogICAgICAgIHVpbnQyNTYgaGVsZCA9IGhlbGRUb2tlbnNbbXNnLnNlbmRlcl07CiAgICAgICAgdWludCBoZWxkQmxvY2sgPSBoZWxkVGltZWxpbmVbbXNnLnNlbmRlcl07CiAgICAgICAgcmVxdWlyZSghaXNGdW5kaW5nKTsKICAgICAgICByZXF1aXJlKGhlbGQgPj0gMCk7CiAgICAgICAgcmVxdWlyZShibG9jay5udW1iZXIgPj0gaGVsZEJsb2NrKTsKICAgICAgICBoZWxkVG9rZW5zW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBoZWxkVGltZWxpbmVbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIFJlbGVhc2VUb2tlbnMobXNnLnNlbmRlciwgaGVsZCk7CiAgICB9Cgp9'.
	

]
