Class {
	#name : #SRTa660b00c28b0eb2cf57787abf60e3b0c44e9325b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa660b00c28b0eb2cf57787abf60e3b0c44e9325b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFJlYWQtb25seSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBSZWFkT25seVRva2VuIHsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgVG9rZW4gaXMgUmVhZE9ubHlUb2tlbiB7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBNaW50YWJsZVRva2VuIGlzIFRva2VuIHsKICAgIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CgogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7Cn0KCi8qKgogKiBAdGl0bGUgU2FsZSBjb250cmFjdCBmb3IgRGFvbm9taWMgcGxhdGZvcm0gc2hvdWxkIGltcGxlbWVudCB0aGlzCiAqLwpjb250cmFjdCBTYWxlIHsKICAgIC8qKgogICAgICogQGRldiBUaGlzIGV2ZW50IHNob3VsZCBiZSBlbWl0dGVkIHdoZW4gdXNlciBidXlzIHNvbWV0aGluZwogICAgICovCiAgICBldmVudCBQdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgYnV5ZXIsIGFkZHJlc3MgdG9rZW4sIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgc29sZCwgdWludDI1NiBib251cyk7CiAgICAvKioKICAgICAqIEBkZXYgU2hvdWxkIGJlIGVtaXR0ZWQgaWYgbmV3IHBheW1lbnQgbWV0aG9kIGFkZGVkCiAgICAgKi8KICAgIGV2ZW50IFJhdGVBZGQoYWRkcmVzcyB0b2tlbik7CiAgICAvKioKICAgICAqIEBkZXYgU2hvdWxkIGJlIGVtaXR0ZWQgaWYgcGF5bWVudCBtZXRob2QgcmVtb3ZlZAogICAgICovCiAgICBldmVudCBSYXRlUmVtb3ZlKGFkZHJlc3MgdG9rZW4pOwoKICAgIC8qKgogICAgICogQGRldiBDYWxjdWxhdGUgcmF0ZSBmb3Igc3BlY2lmaWVkIHBheW1lbnQgbWV0aG9kCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFJhdGUoYWRkcmVzcyB0b2tlbikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpOwogICAgLyoqCiAgICAgKiBAZGV2IENhbGN1bGF0ZSBjdXJyZW50IGJvbnVzIGluIHRva2VucwogICAgICovCiAgICBmdW5jdGlvbiBnZXRCb251cyh1aW50MjU2IHNvbGQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KTsKfQoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKiBAZGV2IHRoaXMgdmVyc2lvbiBjb3BpZWQgZnJvbSB6ZXBwZWxpbi1zb2xpZGl0eSwgY29uc3RhbnQgY2hhbmdlZCB0byBwdXJlCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBBZGRzIG9ubHlPd25lciBtb2RpZmllci4gU3ViY29udHJhY3RzIHNob3VsZCBpbXBsZW1lbnQgY2hlY2tPd25lciB0byBjaGVjayBpZiBjYWxsZXIgaXMgb3duZXIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICBjaGVja093bmVyKCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja093bmVyKCkgaW50ZXJuYWw7Cn0KCi8qKgogKiBAdGl0bGUgVG9rZW4gcmVwcmVzZW50cyBzb21lIGV4dGVybmFsIHZhbHVlIChmb3IgZXhhbXBsZSwgQlRDKQogKi8KY29udHJhY3QgRXh0ZXJuYWxUb2tlbiBpcyBUb2tlbiB7CiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgYnl0ZXMgZGF0YSk7CiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUsIGJ5dGVzIGRhdGEpOwoKICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWM7Cn0KCi8qKgogKiBAZGV2IFRoaXMgYWRhcHRlciBoZWxwcyB0byByZWNlaXZlIHRva2Vucy4gSXQgaGFzIHNvbWUgc3ViY29udHJhY3RzIGZvciBkaWZmZXJlbnQgdG9rZW5zOgogKiAgIEVSQzIwUmVjZWl2ZUFkYXB0ZXIgLSBmb3IgcmVjZWl2aW5nIHNpbXBsZSBFUkMyMCB0b2tlbnMKICogICBFUkMyMjNSZWNlaXZlQWRhcHRlciAtIGZvciByZWNlaXZpbmcgRVJDMjIzIHRva2VucwogKiAgIFJlY2VpdmVBcHByb3ZhbEFkYXB0ZXIgLSBmb3IgcmVjZWl2aW5nIEVSQzIwIHRva2VucyB3aGVuIHRva2VuIG5vdGlmaWVzIHJlY2VpdmVyIHdpdGggcmVjZWl2ZUFwcHJvdmFsCiAqICAgRXRoZXJSZWNlaXZlQWRhcHRlciAtIGZvciByZWNlaXZpbmcgZXRoZXIgKG9uUmVjZWl2ZSBjYWxsYmFjayB3aWxsIGJlIHVzZWQpLiB0aGlzIGlzIG5lZWRlZCBmb3IgaGFuZGxpbmcgZXRoZXIgbGlrZSB0b2tlbnMKICogICBDb21wYXRSZWNlaXZlQXBwcm92YWwgLSBpbXBsZW1lbnRzIGFsbCB0aGVzZSBhZGFwdGVycwogKi8KY29udHJhY3QgUmVjZWl2ZUFkYXB0ZXIgewoKICAgIC8qKgogICAgICogQGRldiBSZWNlaXZlIHRva2VucyBmcm9tIHNvbWVvbmUuIE93bmVyIG9mIHRoZSB0b2tlbnMgc2hvdWxkIGFwcHJvdmUgZmlyc3QKICAgICAqLwogICAgZnVuY3Rpb24gb25SZWNlaXZlKGFkZHJlc3MgX3Rva2VuLCBhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGludGVybmFsOwp9CgovKioKICogQGRldiBIZWxwcyB0byByZWNlaXZlIEVSQzIwLWNvbXBsYWludCB0b2tlbnMuIE93bmVyIHNob3VsZCBjYWxsIHRva2VuLmFwcHJvdmUgZmlyc3QKICovCmNvbnRyYWN0IEVSQzIwUmVjZWl2ZUFkYXB0ZXIgaXMgUmVjZWl2ZUFkYXB0ZXIgewogICAgZnVuY3Rpb24gcmVjZWl2ZShhZGRyZXNzIF90b2tlbiwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgewogICAgICAgIFRva2VuIHRva2VuID0gVG9rZW4oX3Rva2VuKTsKICAgICAgICB0b2tlbi50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgX3ZhbHVlKTsKICAgICAgICBvblJlY2VpdmUoX3Rva2VuLCBtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMjMgVG9rZW5SZWNlaXZlciBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIyMwogKi8KY29udHJhY3QgVG9rZW5SZWNlaXZlciB7CiAgICBmdW5jdGlvbiBvblRva2VuVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWM7Cn0KCi8qKgogKiBAZGV2IEhlbHBzIHRvIHJlY2VpdmUgRVJDMjIzLWNvbXBsYWludCB0b2tlbnMuIEVSQzIyMyBUb2tlbiBjb250cmFjdCBzaG91bGQgbm90aWZ5IHJlY2VpdmVyLgogKi8KY29udHJhY3QgRVJDMjIzUmVjZWl2ZUFkYXB0ZXIgaXMgVG9rZW5SZWNlaXZlciwgUmVjZWl2ZUFkYXB0ZXIgewogICAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHB1YmxpYyB7CiAgICAgICAgb25SZWNlaXZlKG1zZy5zZW5kZXIsIF9mcm9tLCBfdmFsdWUsIF9kYXRhKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvblRva2VuVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgewogICAgICAgIG9uUmVjZWl2ZShtc2cuc2VuZGVyLCBfZnJvbSwgX3ZhbHVlLCBfZGF0YSk7CiAgICB9Cn0KCmNvbnRyYWN0IEV0aGVyUmVjZWl2ZXIgewoJZnVuY3Rpb24gcmVjZWl2ZVdpdGhEYXRhKGJ5dGVzIF9kYXRhKSBwYXlhYmxlIHB1YmxpYzsKfQoKY29udHJhY3QgRXRoZXJSZWNlaXZlQWRhcHRlciBpcyBFdGhlclJlY2VpdmVyLCBSZWNlaXZlQWRhcHRlciB7CiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHB1YmxpYyB7CiAgICAgICAgcmVjZWl2ZVdpdGhEYXRhKCIiKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWNlaXZlV2l0aERhdGEoYnl0ZXMgX2RhdGEpIHBheWFibGUgcHVibGljIHsKICAgICAgICBvblJlY2VpdmUoYWRkcmVzcygwKSwgbXNnLnNlbmRlciwgbXNnLnZhbHVlLCBfZGF0YSk7CiAgICB9Cn0KCi8qKgogKiBAZGV2IFRoaXMgUmVjZWl2ZUFkYXB0ZXIgc3VwcG9ydHMgYWxsIHBvc3NpYmxlIHRva2VucwogKi8KY29udHJhY3QgQ29tcGF0UmVjZWl2ZUFkYXB0ZXIgaXMgRVJDMjBSZWNlaXZlQWRhcHRlciwgRVJDMjIzUmVjZWl2ZUFkYXB0ZXIsIEV0aGVyUmVjZWl2ZUFkYXB0ZXIgewoKfQoKY29udHJhY3QgQWJzdHJhY3RTYWxlIGlzIFNhbGUsIENvbXBhdFJlY2VpdmVBZGFwdGVyLCBPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIGV2ZW50IFdpdGhkcmF3KGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQnVybihhZGRyZXNzIHRva2VuLCB1aW50MjU2IHZhbHVlLCBieXRlcyBkYXRhKTsKCiAgICBmdW5jdGlvbiBvblJlY2VpdmUoYWRkcmVzcyBfdG9rZW4sIGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQyNTYgc29sZCA9IGdldFNvbGQoX3Rva2VuLCBfdmFsdWUpOwogICAgICAgIHJlcXVpcmUoc29sZCA+IDApOwogICAgICAgIHVpbnQyNTYgYm9udXMgPSBnZXRCb251cyhzb2xkKTsKICAgICAgICBhZGRyZXNzIGJ1eWVyOwogICAgICAgIGlmIChfZGF0YS5sZW5ndGggPT0gMjApIHsKICAgICAgICAgICAgYnV5ZXIgPSBhZGRyZXNzKHRvQnl0ZXMyMChfZGF0YSwgMCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUoX2RhdGEubGVuZ3RoID09IDApOwogICAgICAgICAgICBidXllciA9IF9mcm9tOwogICAgICAgIH0KICAgICAgICBjaGVja1B1cmNoYXNlVmFsaWQoYnV5ZXIsIHNvbGQsIGJvbnVzKTsKICAgICAgICBkb1B1cmNoYXNlKGJ1eWVyLCBzb2xkLCBib251cyk7CiAgICAgICAgUHVyY2hhc2UoYnV5ZXIsIF90b2tlbiwgX3ZhbHVlLCBzb2xkLCBib251cyk7CiAgICAgICAgb25QdXJjaGFzZShidXllciwgX3Rva2VuLCBfdmFsdWUsIHNvbGQsIGJvbnVzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTb2xkKGFkZHJlc3MgX3Rva2VuLCB1aW50MjU2IF92YWx1ZSkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHJhdGUgPSBnZXRSYXRlKF90b2tlbik7CiAgICAgICAgcmVxdWlyZShyYXRlID4gMCk7CiAgICAgICAgcmV0dXJuIF92YWx1ZS5tdWwocmF0ZSkuZGl2KDEwKioxOCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Qm9udXModWludDI1NiBzb2xkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1Nik7CgogICAgZnVuY3Rpb24gZ2V0UmF0ZShhZGRyZXNzIF90b2tlbikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpOwoKICAgIGZ1bmN0aW9uIGRvUHVyY2hhc2UoYWRkcmVzcyBidXllciwgdWludDI1NiBzb2xkLCB1aW50MjU2IGJvbnVzKSBpbnRlcm5hbDsKCiAgICBmdW5jdGlvbiBjaGVja1B1cmNoYXNlVmFsaWQoYWRkcmVzcyAvKmJ1eWVyKi8sIHVpbnQyNTYgLypzb2xkKi8sIHVpbnQyNTYgLypib251cyovKSBpbnRlcm5hbCB7CgogICAgfQoKICAgIGZ1bmN0aW9uIG9uUHVyY2hhc2UoYWRkcmVzcyAvKmJ1eWVyKi8sIGFkZHJlc3MgLyp0b2tlbiovLCB1aW50MjU2IC8qdmFsdWUqLywgdWludDI1NiAvKnNvbGQqLywgdWludDI1NiAvKmJvbnVzKi8pIGludGVybmFsIHsKCiAgICB9CgogICAgZnVuY3Rpb24gdG9CeXRlczIwKGJ5dGVzIGIsIHVpbnQyNTYgX3N0YXJ0KSBwdXJlIGludGVybmFsIHJldHVybnMgKGJ5dGVzMjAgcmVzdWx0KSB7CiAgICAgICAgcmVxdWlyZShfc3RhcnQgKyAyMCA8PSBiLmxlbmd0aCk7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBsZXQgZnJvbSA6PSBhZGQoX3N0YXJ0LCBhZGQoYiwgMHgyMCkpCiAgICAgICAgICAgIHJlc3VsdCA6PSBtbG9hZChmcm9tKQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aChhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHdpdGhkcmF3KGFkZHJlc3MoMCksIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhdyhhZGRyZXNzIF90b2tlbiwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICB2ZXJpZnlDYW5XaXRoZHJhdyhfdG9rZW4sIF90bywgX3ZhbHVlKTsKICAgICAgICBpZiAoX3Rva2VuID09IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgX3RvLnRyYW5zZmVyKF92YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgVG9rZW4oX3Rva2VuKS50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICAgICAgfQogICAgICAgIFdpdGhkcmF3KF90b2tlbiwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHZlcmlmeUNhbldpdGhkcmF3KGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgdG8sIHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbDsKCiAgICBmdW5jdGlvbiBidXJuV2l0aERhdGEoYWRkcmVzcyBfdG9rZW4sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgRXh0ZXJuYWxUb2tlbihfdG9rZW4pLmJ1cm4oX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgQnVybihfdG9rZW4sIF92YWx1ZSwgX2RhdGEpOwogICAgfQp9CgovKioKICogQHRpdGxlIFRoaXMgc2FsZSBtaW50cyB0b2tlbiB3aGVuIHVzZXIgc2VuZHMgYWNjZXB0ZWQgcGF5bWVudHMKICovCmNvbnRyYWN0IE1pbnRpbmdTYWxlIGlzIEFic3RyYWN0U2FsZSB7CiAgICBNaW50YWJsZVRva2VuIHB1YmxpYyB0b2tlbjsKCiAgICBmdW5jdGlvbiBNaW50aW5nU2FsZShhZGRyZXNzIF90b2tlbikgcHVibGljIHsKICAgICAgICB0b2tlbiA9IE1pbnRhYmxlVG9rZW4oX3Rva2VuKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkb1B1cmNoYXNlKGFkZHJlc3MgYnV5ZXIsIHVpbnQyNTYgc29sZCwgdWludDI1NiBib251cykgaW50ZXJuYWwgewogICAgICAgIHRva2VuLm1pbnQoYnV5ZXIsIHNvbGQuYWRkKGJvbnVzKSk7CiAgICB9CgogICAgZnVuY3Rpb24gdmVyaWZ5Q2FuV2l0aGRyYXcoYWRkcmVzcywgYWRkcmVzcywgdWludDI1NikgaW50ZXJuYWwgewoKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBPd25hYmxlSW1wbAogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlSW1wbCBpcyBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlSW1wbCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBmdW5jdGlvbiBjaGVja093bmVyKCkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9Cn0KCmNvbnRyYWN0IENhcHBlZEJvbnVzU2FsZSBpcyBBYnN0cmFjdFNhbGUgewogICAgdWludDI1NiBwdWJsaWMgY2FwOwogICAgdWludDI1NiBwdWJsaWMgaW5pdGlhbENhcDsKCiAgICBmdW5jdGlvbiBDYXBwZWRCb251c1NhbGUodWludDI1NiBfY2FwKSBwdWJsaWMgewogICAgICAgIGNhcCA9IF9jYXA7CiAgICAgICAgaW5pdGlhbENhcCA9IF9jYXA7CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tQdXJjaGFzZVZhbGlkKGFkZHJlc3MgYnV5ZXIsIHVpbnQyNTYgc29sZCwgdWludDI1NiBib251cykgaW50ZXJuYWwgewogICAgICAgIHN1cGVyLmNoZWNrUHVyY2hhc2VWYWxpZChidXllciwgc29sZCwgYm9udXMpOwogICAgICAgIHJlcXVpcmUoY2FwID49IHNvbGQuYWRkKGJvbnVzKSk7CiAgICB9CgogICAgZnVuY3Rpb24gb25QdXJjaGFzZShhZGRyZXNzIGJ1eWVyLCBhZGRyZXNzIHRva2VuLCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IHNvbGQsIHVpbnQyNTYgYm9udXMpIGludGVybmFsIHsKICAgICAgICBzdXBlci5vblB1cmNoYXNlKGJ1eWVyLCB0b2tlbiwgdmFsdWUsIHNvbGQsIGJvbnVzKTsKICAgICAgICBjYXAgPSBjYXAuc3ViKHNvbGQpLnN1Yihib251cyk7CiAgICB9Cn0KCi8qKgogKiBAdGl0bGUgU2VjdXJlZAogKiBAZGV2IEFkZHMgb25seShyb2xlKSBtb2RpZmllci4gU3ViY29udHJhY3RzIHNob3VsZCBpbXBsZW1lbnQgY2hlY2tSb2xlIHRvIGNoZWNrIGlmIGNhbGxlciBpcyBhbGxvd2VkIHRvIGRvIGFjdGlvbi4KICovCmNvbnRyYWN0IFNlY3VyZWQgewogICAgbW9kaWZpZXIgb25seShzdHJpbmcgcm9sZSkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBnZXRSb2xlKHJvbGUpKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFJvbGUoc3RyaW5nIHJvbGUpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChhZGRyZXNzKTsKfQoKY29udHJhY3QgU2VjdXJlZEltcGwgaXMgT3duYWJsZSwgU2VjdXJlZCB7CgltYXBwaW5nKHN0cmluZyA9PiBhZGRyZXNzKSB1c2VyczsKCWV2ZW50IFJvbGVUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNVc2VyLCBhZGRyZXNzIGluZGV4ZWQgbmV3VXNlciwgc3RyaW5nIHJvbGUpOwoKCWZ1bmN0aW9uIGdldFJvbGUoc3RyaW5nIHJvbGUpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChhZGRyZXNzKSB7CgkJcmV0dXJuIHVzZXJzW3JvbGVdOwoJfQoKCWZ1bmN0aW9uIHRyYW5zZmVyUm9sZShzdHJpbmcgcm9sZSwgYWRkcmVzcyB0bykgb25seU93bmVyIHB1YmxpYyB7CgkJcmVxdWlyZSh0byAhPSBhZGRyZXNzKDApKTsKCQlSb2xlVHJhbnNmZXJyZWQodXNlcnNbcm9sZV0sIHRvLCByb2xlKTsKCQl1c2Vyc1tyb2xlXSA9IHRvOwoJfQp9Cgpjb250cmFjdCBXaGl0ZWxpc3QgaXMgU2VjdXJlZCB7CgltYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgd2hpdGVsaXN0OwoJZXZlbnQgV2hpdGVsaXN0Q2hhbmdlKGFkZHJlc3MgaW5kZXhlZCBhZGRyLCBib29sIGFsbG93KTsKCglmdW5jdGlvbiBpc0luV2hpdGVsaXN0KGFkZHJlc3MgYWRkcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKGJvb2wpIHsKCQlyZXR1cm4gd2hpdGVsaXN0W2FkZHJdOwoJfQoKCWZ1bmN0aW9uIHNldFdoaXRlbGlzdChhZGRyZXNzIGFkZHIsIGJvb2wgYWxsb3cpIG9ubHkoIm9wZXJhdG9yIikgcHVibGljIHsKCQlzZXRXaGl0ZWxpc3RJbnRlcm5hbChhZGRyLCBhbGxvdyk7Cgl9CgoJZnVuY3Rpb24gc2V0V2hpdGVsaXN0SW50ZXJuYWwoYWRkcmVzcyBhZGRyLCBib29sIGFsbG93KSBpbnRlcm5hbCB7CgkJd2hpdGVsaXN0W2FkZHJdID0gYWxsb3c7CgkJV2hpdGVsaXN0Q2hhbmdlKGFkZHIsIGFsbG93KTsKCX0KfQoKY29udHJhY3QgV2hpdGVsaXN0U2FsZSBpcyBBYnN0cmFjdFNhbGUsIFdoaXRlbGlzdCB7CglmdW5jdGlvbiBjaGVja1B1cmNoYXNlVmFsaWQoYWRkcmVzcyBidXllciwgdWludDI1NiBzb2xkLCB1aW50MjU2IGJvbnVzKSBpbnRlcm5hbCB7CgkJc3VwZXIuY2hlY2tQdXJjaGFzZVZhbGlkKGJ1eWVyLCBzb2xkLCBib251cyk7CgkJcmVxdWlyZShpc0luV2hpdGVsaXN0KGJ1eWVyKSk7Cgl9Cn0KCmNvbnRyYWN0IERhb3hDb21taXNzaW9uU2FsZSBpcyBBYnN0cmFjdFNhbGUgewoJZnVuY3Rpb24gZ2V0U29sZChhZGRyZXNzIF90b2tlbiwgdWludDI1NiBfdmFsdWUpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CgkJcmV0dXJuIHN1cGVyLmdldFNvbGQoX3Rva2VuLCBfdmFsdWUpLmRpdig5OSkubXVsKDEwMCk7Cgl9Cn0KCmNvbnRyYWN0IFJlYWRPbmx5VG9rZW5JbXBsIGlzIFJlYWRPbmx5VG9rZW4gewogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgVG9rZW5JbXBsIGlzIFRva2VuLCBSZWFkT25seVRva2VuSW1wbCB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGVtaXRUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGVtaXRUcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGludGVybmFsIHsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBlbWl0VHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICoKICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9Cgpjb250cmFjdCBCdXJuYWJsZVRva2VuIGlzIFRva2VuIHsKCWV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CglmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWM7Cn0KCmNvbnRyYWN0IEJ1cm5hYmxlVG9rZW5JbXBsIGlzIFRva2VuSW1wbCwgQnVybmFibGVUb2tlbiB7CgkvKioKCSAqIEBkZXYgQnVybnMgYSBzcGVjaWZpYyBhbW91bnQgb2YgdG9rZW5zLgoJICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIGJ1cm5lZC4KCSAqLwoJZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgcHVibGljIHsKCQlyZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgkJLy8gbm8gbmVlZCB0byByZXF1aXJlIHZhbHVlIDw9IHRvdGFsU3VwcGx5LCBzaW5jZSB0aGF0IHdvdWxkIGltcGx5IHRoZQoJCS8vIHNlbmRlcidzIGJhbGFuY2UgaXMgZ3JlYXRlciB0aGFuIHRoZSB0b3RhbFN1cHBseSwgd2hpY2ggKnNob3VsZCogYmUgYW4gYXNzZXJ0aW9uIGZhaWx1cmUKCgkJYWRkcmVzcyBidXJuZXIgPSBtc2cuc2VuZGVyOwoJCWJhbGFuY2VzW2J1cm5lcl0gPSBiYWxhbmNlc1tidXJuZXJdLnN1YihfdmFsdWUpOwoJCXRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CgkJQnVybihidXJuZXIsIF92YWx1ZSk7Cgl9Cn0KCmNvbnRyYWN0IE1pbnRhYmxlVG9rZW5JbXBsIGlzIE93bmFibGUsIFRva2VuSW1wbCwgTWludGFibGVUb2tlbiB7CiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIG1pbnRlZCB0b2tlbnMuCiAgICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqLwogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CiAgICAgICAgZW1pdE1pbnQoX3RvLCBfYW1vdW50KTsKICAgICAgICBlbWl0VHJhbnNmZXIoYWRkcmVzcygwKSwgX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBlbWl0TWludChhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGludGVybmFsIHsKICAgICAgICBNaW50KF90bywgX3ZhbHVlKTsKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICAgIGV2ZW50IFBhdXNlKCk7CiAgICBldmVudCBVbnBhdXNlKCk7CgogICAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAgIC8qKgogICAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBub3QgcGF1c2VkLgogICAgICovCiAgICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgcGF1c2VkLgogICAgICovCiAgICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgICAgIHJlcXVpcmUocGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICAgKi8KICAgIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgICAgICBwYXVzZWQgPSB0cnVlOwogICAgICAgIFBhdXNlKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgICAqLwogICAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICAgICAgcGF1c2VkID0gZmFsc2U7CiAgICAgICAgVW5wYXVzZSgpOwogICAgfQp9Cgpjb250cmFjdCBQYXVzYWJsZVRva2VuIGlzIFBhdXNhYmxlLCBUb2tlbkltcGwgewoKCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewoJCXJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7Cgl9CgoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewoJCXJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKCX0KCglmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CgkJcmV0dXJuIHN1cGVyLmFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSk7Cgl9CgoJZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCQlyZXR1cm4gc3VwZXIuaW5jcmVhc2VBcHByb3ZhbChfc3BlbmRlciwgX2FkZGVkVmFsdWUpOwoJfQoKCWZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCQlyZXR1cm4gc3VwZXIuZGVjcmVhc2VBcHByb3ZhbChfc3BlbmRlciwgX3N1YnRyYWN0ZWRWYWx1ZSk7Cgl9Cn0KCmNvbnRyYWN0IFplbm9tZVRva2VuIGlzIE93bmFibGVJbXBsLCBQYXVzYWJsZVRva2VuLCBNaW50YWJsZVRva2VuSW1wbCwgQnVybmFibGVUb2tlbkltcGwgewoJc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlplbm9tZSI7CglzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJzWk5BIjsKCXVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKCWZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHsKCQlzdXBlci5idXJuKF92YWx1ZSk7Cgl9Cn0KCmNvbnRyYWN0IFplbm9tZVNhbGUgaXMgT3duYWJsZUltcGwsIFNlY3VyZWRJbXBsLCBEYW94Q29tbWlzc2lvblNhbGUsIE1pbnRpbmdTYWxlLCBDYXBwZWRCb251c1NhbGUsIFdoaXRlbGlzdFNhbGUgewoJYWRkcmVzcyBwdWJsaWMgYnRjVG9rZW47Cgl1aW50MjU2IHB1YmxpYyBldGhSYXRlID0gMTM1MCAqIDEwKioxODsKCXVpbnQyNTYgcHVibGljIGJ0Y0V0aFJhdGUgPSAxMCAqIDEwKioxMDsKCglmdW5jdGlvbiBaZW5vbWVTYWxlKAoJCWFkZHJlc3MgX21pbnRhYmxlVG9rZW4sCgkJYWRkcmVzcyBfYnRjVG9rZW4sCgkJdWludDI1NiBfY2FwKQoJTWludGluZ1NhbGUoX21pbnRhYmxlVG9rZW4pCglDYXBwZWRCb251c1NhbGUoX2NhcCkgewoJCWJ0Y1Rva2VuID0gX2J0Y1Rva2VuOwoJCVJhdGVBZGQoYWRkcmVzcygwKSk7CgkJUmF0ZUFkZChfYnRjVG9rZW4pOwoJfQoKCWZ1bmN0aW9uIGdldFJhdGUoYWRkcmVzcyBfdG9rZW4pIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CgkJaWYgKF90b2tlbiA9PSBidGNUb2tlbikgewoJCQlyZXR1cm4gYnRjRXRoUmF0ZSAqIGV0aFJhdGU7CgkJfSBlbHNlIGlmIChfdG9rZW4gPT0gYWRkcmVzcygwKSkgewoJCQlyZXR1cm4gZXRoUmF0ZTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gMDsKCQl9Cgl9CgoJZnVuY3Rpb24gZ2V0Qm9udXModWludDI1NiBzb2xkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewoJCWlmIChzb2xkID4gODUwMDAwICogMTAqKjE4KSB7CgkJCXJldHVybiBzb2xkLm11bCg1MCkuZGl2KDEwMCk7CgkJfSBlbHNlIGlmIChzb2xkID4gMzQwMDAwICogMTAqKjE4KSB7CgkJCXJldHVybiBzb2xkLm11bCgzMykuZGl2KDEwMCk7CgkJfSBlbHNlIGlmIChzb2xkID4gODUwMDAgKiAxMCoqMTgpIHsKCQkJcmV0dXJuIHNvbGQubXVsKDIwKS5kaXYoMTAwKTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gMDsKCQl9Cgl9CgoJZXZlbnQgRXRoUmF0ZUNoYW5nZSh1aW50MjU2IHJhdGUpOwoKCWZ1bmN0aW9uIHNldEV0aFJhdGUodWludDI1NiBfZXRoUmF0ZSkgb25seU93bmVyIHB1YmxpYyB7CgkJZXRoUmF0ZSA9IF9ldGhSYXRlOwoJCUV0aFJhdGVDaGFuZ2UoX2V0aFJhdGUpOwoJfQoKCWV2ZW50IEJ0Y0V0aFJhdGVDaGFuZ2UodWludDI1NiByYXRlKTsKCglmdW5jdGlvbiBzZXRCdGNFdGhSYXRlKHVpbnQyNTYgX2J0Y0V0aFJhdGUpIG9ubHlPd25lciBwdWJsaWMgewoJCWJ0Y0V0aFJhdGUgPSBfYnRjRXRoUmF0ZTsKCQlCdGNFdGhSYXRlQ2hhbmdlKF9idGNFdGhSYXRlKTsKCX0KCglmdW5jdGlvbiB3aXRoZHJhd0J0YyhieXRlcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgcHVibGljIHsKCQlidXJuV2l0aERhdGEoYnRjVG9rZW4sIF92YWx1ZSwgX3RvKTsKCX0KCglmdW5jdGlvbiB0cmFuc2ZlclRva2VuT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewoJCU93bmFibGVJbXBsKHRva2VuKS50cmFuc2Zlck93bmVyc2hpcChuZXdPd25lcik7Cgl9CgoJZnVuY3Rpb24gcGF1c2VUb2tlbigpIG9ubHlPd25lciBwdWJsaWMgewoJCVBhdXNhYmxlKHRva2VuKS5wYXVzZSgpOwoJfQoKCWZ1bmN0aW9uIHVucGF1c2VUb2tlbigpIG9ubHlPd25lciBwdWJsaWMgewoJCVBhdXNhYmxlKHRva2VuKS51bnBhdXNlKCk7Cgl9CgoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBiZW5lZmljaWFyeSwgdWludDI1NiBhbW91bnQpIG9ubHlPd25lciBwdWJsaWMgewoJCWVtdWxhdGVQdXJjaGFzZShiZW5lZmljaWFyeSwgYWRkcmVzcygxKSwgMCwgYW1vdW50LCAwKTsKCX0KCglmdW5jdGlvbiBlbXVsYXRlUHVyY2hhc2UoYWRkcmVzcyBiZW5lZmljaWFyeSwgYWRkcmVzcyBwYXltZW50TWV0aG9kLCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFtb3VudCwgdWludDI1NiBib251cykgb25seU93bmVyIHB1YmxpYyB7CgkJc2V0V2hpdGVsaXN0SW50ZXJuYWwoYmVuZWZpY2lhcnksIHRydWUpOwoJCWRvUHVyY2hhc2UoYmVuZWZpY2lhcnksIGFtb3VudCwgYm9udXMpOwoJCVB1cmNoYXNlKGJlbmVmaWNpYXJ5LCBwYXltZW50TWV0aG9kLCB2YWx1ZSwgYW1vdW50LCBib251cyk7CgkJb25QdXJjaGFzZShiZW5lZmljaWFyeSwgcGF5bWVudE1ldGhvZCwgdmFsdWUsIGFtb3VudCwgYm9udXMpOwoJfQp9'.
	

]
