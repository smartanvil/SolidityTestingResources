Class {
	#name : #SRT2d3b62a8b756103e417d161c20e97e76ed5ef0c2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2d3b62a8b756103e417d161c20e97e76ed5ef0c2 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOyAgICAgIAogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKaW50ZXJmYWNlIE9yYWNsaXplSSB7CiAgICAvLyBhZGRyZXNzIHB1YmxpYyBjYkFkZHJlc3M7CiAgICBmdW5jdGlvbiBjYkFkZHJlc3MoKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKTsgLy8gUmVhZHMgcHVibGljIHZhcmlhYmxlIGNiQWRkcmVzcwogICAgZnVuY3Rpb24gcXVlcnkodWludCBfdGltZXN0YW1wLCBzdHJpbmcgX2RhdGFzb3VyY2UsIHN0cmluZyBfYXJnKSBwYXlhYmxlIHJldHVybnMgKGJ5dGVzMzIgX2lkKTsKICAgIGZ1bmN0aW9uIHF1ZXJ5X3dpdGhHYXNMaW1pdCh1aW50IF90aW1lc3RhbXAsIHN0cmluZyBfZGF0YXNvdXJjZSwgc3RyaW5nIF9hcmcsIHVpbnQgX2dhc2xpbWl0KSBwYXlhYmxlIHJldHVybnMgKGJ5dGVzMzIgX2lkKTsKICAgIGZ1bmN0aW9uIHF1ZXJ5Mih1aW50IF90aW1lc3RhbXAsIHN0cmluZyBfZGF0YXNvdXJjZSwgc3RyaW5nIF9hcmcxLCBzdHJpbmcgX2FyZzIpIHBheWFibGUgcmV0dXJucyAoYnl0ZXMzMiBfaWQpOwogICAgZnVuY3Rpb24gcXVlcnkyX3dpdGhHYXNMaW1pdCh1aW50IF90aW1lc3RhbXAsIHN0cmluZyBfZGF0YXNvdXJjZSwgc3RyaW5nIF9hcmcxLCBzdHJpbmcgX2FyZzIsIHVpbnQgX2dhc2xpbWl0KSBwYXlhYmxlIHJldHVybnMgKGJ5dGVzMzIgX2lkKTsKICAgIGZ1bmN0aW9uIHF1ZXJ5Tih1aW50IF90aW1lc3RhbXAsIHN0cmluZyBfZGF0YXNvdXJjZSwgYnl0ZXMgX2FyZ04pIHBheWFibGUgcmV0dXJucyAoYnl0ZXMzMiBfaWQpOwogICAgZnVuY3Rpb24gcXVlcnlOX3dpdGhHYXNMaW1pdCh1aW50IF90aW1lc3RhbXAsIHN0cmluZyBfZGF0YXNvdXJjZSwgYnl0ZXMgX2FyZ04sIHVpbnQgX2dhc2xpbWl0KSBwYXlhYmxlIHJldHVybnMgKGJ5dGVzMzIgX2lkKTsKICAgIGZ1bmN0aW9uIGdldFByaWNlKHN0cmluZyBfZGF0YXNvYXVyY2UpIHJldHVybnMgKHVpbnQgX2RzcHJpY2UpOwogICAgZnVuY3Rpb24gZ2V0UHJpY2Uoc3RyaW5nIF9kYXRhc291cmNlLCB1aW50IGdhc2xpbWl0KSByZXR1cm5zICh1aW50IF9kc3ByaWNlKTsKICAgIGZ1bmN0aW9uIHVzZUNvdXBvbihzdHJpbmcgX2NvdXBvbik7CiAgICBmdW5jdGlvbiBzZXRQcm9vZlR5cGUoYnl0ZSBfcHJvb2ZUeXBlKTsKICAgIGZ1bmN0aW9uIHNldENvbmZpZyhieXRlczMyIF9jb25maWcpOwogICAgZnVuY3Rpb24gc2V0Q3VzdG9tR2FzUHJpY2UodWludCBfZ2FzUHJpY2UpOwogICAgZnVuY3Rpb24gcmFuZG9tRFNfZ2V0U2Vzc2lvblB1YktleUhhc2goKSByZXR1cm5zKGJ5dGVzMzIpOwp9CgppbnRlcmZhY2UgT3JhY2xpemVBZGRyUmVzb2x2ZXJJIHsKICAgIGZ1bmN0aW9uIGdldEFkZHJlc3MoKSByZXR1cm5zIChhZGRyZXNzIF9hZGRyKTsKfQoKLy8gdGhpcyBpcyBhIHJlZHVjZWQgYW5kIG9wdGltaXplIHZlcnNpb24gb2YgdGhlIHVzaW5nT3JhY2xpemUgY29udHJhY3QgaW4gaHR0cHM6Ly9naXRodWIuY29tL29yYWNsaXplL2V0aGVyZXVtLWFwaS9ibG9iL21hc3Rlci9vcmFjbGl6ZUFQSV8wLjQuc29sCmNvbnRyYWN0IG15VXNpbmdPcmFjbGl6ZSBpcyBPd25hYmxlIHsKICAgIE9yYWNsaXplQWRkclJlc29sdmVySSBPQVI7CiAgICBPcmFjbGl6ZUkgcHVibGljIG9yYWNsaXplOwogICAgdWludCBwdWJsaWMgb3JhY2xpemVfZ2FzbGltaXQgPSAxMjAwMDA7CgogICAgZnVuY3Rpb24gbXlVc2luZ09yYWNsaXplKCkgewogICAgICAgIG9yYWNsaXplX3NldE5ldHdvcmsoKTsKICAgICAgICB1cGRhdGVfb3JhY2xpemUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVfb3JhY2xpemUoKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBvcmFjbGl6ZSA9IE9yYWNsaXplSShPQVIuZ2V0QWRkcmVzcygpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvcmFjbGl6ZV9xdWVyeShzdHJpbmcgZGF0YXNvdXJjZSwgc3RyaW5nIGFyZzEsIHN0cmluZyBhcmcyKSBpbnRlcm5hbCByZXR1cm5zIChieXRlczMyIGlkKSB7CiAgICAgICAgdWludCBwcmljZSA9IG9yYWNsaXplLmdldFByaWNlKGRhdGFzb3VyY2UsIG9yYWNsaXplX2dhc2xpbWl0KTsKICAgICAgICBpZiAocHJpY2UgPiAxIGV0aGVyICsgdHguZ2FzcHJpY2Uqb3JhY2xpemVfZ2FzbGltaXQpIHJldHVybiAwOyAvLyB1bmV4cGVjdGVkbHkgaGlnaCBwcmljZQogICAgICAgIHJldHVybiBvcmFjbGl6ZS5xdWVyeTJfd2l0aEdhc0xpbWl0LnZhbHVlKHByaWNlKSgwLCBkYXRhc291cmNlLCBhcmcxLCBhcmcyLCBvcmFjbGl6ZV9nYXNsaW1pdCk7CiAgICB9CgogICAgZnVuY3Rpb24gb3JhY2xpemVfZ2V0UHJpY2Uoc3RyaW5nIGRhdGFzb3VyY2UpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gb3JhY2xpemUuZ2V0UHJpY2UoZGF0YXNvdXJjZSwgb3JhY2xpemVfZ2FzbGltaXQpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBvcmFjbGl6ZV9zZXRHYXNQcmljZSh1aW50IF9nYXNQcmljZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgb3JhY2xpemUuc2V0Q3VzdG9tR2FzUHJpY2UoX2dhc1ByaWNlKTsKICAgIH0KCgogICAgZnVuY3Rpb24gc2V0R2FzTGltaXQodWludCBfbmV3TGltaXQpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIG9yYWNsaXplX2dhc2xpbWl0ID0gX25ld0xpbWl0OwogICAgfQoKICAgIGZ1bmN0aW9uIG9yYWNsaXplX3NldE5ldHdvcmsoKSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKGdldENvZGVTaXplKDB4MWQzQjI2MzhhN2NDOWYyQ0IzRDI5OEEzREE3YTkwQjY3RTU1MDZlZCk+MCl7IC8vbWFpbm5ldAogICAgICAgICAgICBPQVIgPSBPcmFjbGl6ZUFkZHJSZXNvbHZlckkoMHgxZDNCMjYzOGE3Y0M5ZjJDQjNEMjk4QTNEQTdhOTBCNjdFNTUwNmVkKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoZ2V0Q29kZVNpemUoMHhjMDNBMjYxNUQ1ZWZhZjVGNDlGNjBCN0JCNjU4M2VhZWMyMTJmZGYxKT4wKXsgLy9yb3BzdGVuIHRlc3RuZXQKICAgICAgICAgICAgT0FSID0gT3JhY2xpemVBZGRyUmVzb2x2ZXJJKDB4YzAzQTI2MTVENWVmYWY1RjQ5RjYwQjdCQjY1ODNlYWVjMjEyZmRmMSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGdldENvZGVTaXplKDB4QjdBMDdCY0YyQmEyZjI3MDNiMjRDMDY5MWI1Mjc4OTk5QzU5QUM3ZSk+MCl7IC8va292YW4gdGVzdG5ldAogICAgICAgICAgICBPQVIgPSBPcmFjbGl6ZUFkZHJSZXNvbHZlckkoMHhCN0EwN0JjRjJCYTJmMjcwM2IyNEMwNjkxYjUyNzg5OTlDNTlBQzdlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoZ2V0Q29kZVNpemUoMHgxNDY1MDBjZmQzNUIyMkU0QTM5MkZlMGFEYzA2RGUxYTEzNjhFZDQ4KT4wKXsgLy9yaW5rZWJ5IHRlc3RuZXQKICAgICAgICAgICAgT0FSID0gT3JhY2xpemVBZGRyUmVzb2x2ZXJJKDB4MTQ2NTAwY2ZkMzVCMjJFNEEzOTJGZTBhRGMwNkRlMWExMzY4RWQ0OCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGdldENvZGVTaXplKDB4NmY0ODVDOEJGNmZjNDNlQTIxMkU5M0JCRjhjZTA0NkM3ZjFjYjQ3NSk+MCl7IC8vZXRoZXJldW0tYnJpZGdlCiAgICAgICAgICAgIE9BUiA9IE9yYWNsaXplQWRkclJlc29sdmVySSgweDZmNDg1QzhCRjZmYzQzZUEyMTJFOTNCQkY4Y2UwNDZDN2YxY2I0NzUpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChnZXRDb2RlU2l6ZSgweDIwZTEyQTFGODU5QjNGZWFFNUZiMkEwQTMyQzE4RjVhNjU1NTViQkYpPjApeyAvL2V0aGVyLmNhbXAgaWRlCiAgICAgICAgICAgIE9BUiA9IE9yYWNsaXplQWRkclJlc29sdmVySSgweDIwZTEyQTFGODU5QjNGZWFFNUZiMkEwQTMyQzE4RjVhNjU1NTViQkYpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChnZXRDb2RlU2l6ZSgweDUxZWZhRjRjOEIzQzlBZkJENWFCOUY0YmJDODI3ODRBYjZlZjhmQUEpPjApeyAvL2Jyb3dzZXItc29saWRpdHkKICAgICAgICAgICAgT0FSID0gT3JhY2xpemVBZGRyUmVzb2x2ZXJJKDB4NTFlZmFGNGM4QjNDOUFmQkQ1YUI5RjRiYkM4Mjc4NEFiNmVmOGZBQSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Q29kZVNpemUoYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyh1aW50IF9zaXplKSB7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBfc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF9zaXplOwogICAgfQoKICAgIC8vIFRoaXMgd2lsbCBub3QgdGhyb3cgZXJyb3Igb24gd3JvbmcgaW5wdXQsIGJ1dCBpbnN0ZWFkIGNvbnN1bWUgbGFyZ2UgYW5kIHVua25vd24gYW1vdW50IG9mIGdhcwogICAgLy8gVGhpcyBzaG91bGQgbmV2ZXIgb2NjdXJlIGFzIGl0J3MgdXNlIHdpdGggdGhlIFNoYXBlU2hpZnQgZGVwb3NpdCByZXR1cm4gdmFsdWUgaXMgY2hlY2tlZCBiZWZvcmUgY2FsbGluZyBmdW5jdGlvbgogICAgZnVuY3Rpb24gcGFyc2VBZGRyKHN0cmluZyBfYSkgaW50ZXJuYWwgcmV0dXJucyAoYWRkcmVzcyl7CiAgICAgICAgYnl0ZXMgbWVtb3J5IHRtcCA9IGJ5dGVzKF9hKTsKICAgICAgICB1aW50MTYwIGlhZGRyID0gMDsKICAgICAgICB1aW50MTYwIGIxOwogICAgICAgIHVpbnQxNjAgYjI7CiAgICAgICAgZm9yICh1aW50IGk9MjsgaTwyKzIqMjA7IGkrPTIpewogICAgICAgICAgICBpYWRkciAqPSAyNTY7CiAgICAgICAgICAgIGIxID0gdWludDE2MCh0bXBbaV0pOwogICAgICAgICAgICBiMiA9IHVpbnQxNjAodG1wW2krMV0pOwogICAgICAgICAgICBpZiAoKGIxID49IDk3KSYmKGIxIDw9IDEwMikpIGIxIC09IDg3OwogICAgICAgICAgICBlbHNlIGlmICgoYjEgPj0gNjUpJiYoYjEgPD0gNzApKSBiMSAtPSA1NTsKICAgICAgICAgICAgZWxzZSBpZiAoKGIxID49IDQ4KSYmKGIxIDw9IDU3KSkgYjEgLT0gNDg7CiAgICAgICAgICAgIGlmICgoYjIgPj0gOTcpJiYoYjIgPD0gMTAyKSkgYjIgLT0gODc7CiAgICAgICAgICAgIGVsc2UgaWYgKChiMiA+PSA2NSkmJihiMiA8PSA3MCkpIGIyIC09IDU1OwogICAgICAgICAgICBlbHNlIGlmICgoYjIgPj0gNDgpJiYoYjIgPD0gNTcpKSBiMiAtPSA0ODsKICAgICAgICAgICAgaWFkZHIgKz0gKGIxKjE2K2IyKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFkZHJlc3MoaWFkZHIpOwogICAgfQp9CgovKioKICogQHRpdGxlIEludGVyQ3J5cHRvCiAqIEBkZXYgVGhlIEludGVyQ3J5cHRvIG9mZmVycyBhIG5vLWNvbW1pc3Npb24gc2VydmljZSB1c2luZyBPcmFjbGl6ZSBhbmQgU2hhcGVTaGlmdAogKiB0aGF0IGFsbG93cyBmb3Igb24tYmxvY2tjaGFpbiBjb252ZXJzaW9uIGZyb20gRXRoZXIgdG8gYW55IG90aGVyIGJsb2NrY2hhaW4gdGhhdCBTaGFwZVNoaWZ0IHN1cHBvcnRzLgogKiBAYXV0aG9yIEphY2sgVGFubmVyIC0gPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSIxNzdkNzk2MzI2MjE1NzdlNzQzOTc2NzQzOTYyN2MiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgogKi8KY29udHJhY3QgSW50ZXJDcnlwdG8gaXMgT3duYWJsZSwgbXlVc2luZ09yYWNsaXplIHsKICAgIC8vIF9fX19fX19fX19fX19fX1ZBUklBQkxFU19fX19fX19fX19fX19fXwogICAgc3RydWN0IENvbnZlcnNpb24gewogICAgICAgIGFkZHJlc3MgcmV0dXJuQWRkcmVzczsKICAgICAgICB1aW50IGFtb3VudDsKICAgIH0KCiAgICBtYXBwaW5nICh1aW50ID0+IENvbnZlcnNpb24pIHB1YmxpYyBjb252ZXJzaW9uczsKICAgIHVpbnQgY29udmVyc2lvbkNvdW50ID0gMDsKICAgIG1hcHBpbmcgKGJ5dGVzMzIgPT4gdWludCkgb3JhY2xpemVNeUlkMmNvbnZlcnNpb25JRDsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIHJlY292ZXJhYmxlOwoKICAgIC8vIF9fX19fX19fX19fX19fX0VWRU5UU19fX19fX19fX19fX19fXwogICAgZXZlbnQgQ29udmVyc2lvblN0YXJ0ZWQodWludCBpbmRleGVkIGNvbnZlcnNpb25JRCk7CiAgICBldmVudCBDb252ZXJzaW9uU2VudFRvU2hhcGVTaGlmdCh1aW50IGluZGV4ZWQgY29udmVyc2lvbklELCBhZGRyZXNzIGluZGV4ZWQgcmV0dXJuQWRkcmVzcywgYWRkcmVzcyBpbmRleGVkIGRlcG9zaXRBZGRyZXNzLCB1aW50IGFtb3VudCk7CiAgICBldmVudCBDb252ZXJzaW9uQWJvcnRlZCh1aW50IGluZGV4ZWQgY29udmVyc2lvbklELCBzdHJpbmcgcmVhc29uKTsKICAgIGV2ZW50IFJlY292ZXJlZChhZGRyZXNzIGluZGV4ZWQgcmVjb3ZlcmVkVG8sIHVpbnQgYW1vdW50KTsKCiAgICAvLyBfX19fX19fX19fX19fX19FWFRFUk5BTCBGVU5DVElPTlNfX19fX19fX19fX19fX18KICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuCiAgICAgKi8KICAgIGZ1bmN0aW9uIEludGVyQ3J5cHRvKCkge30KCiAgICAvKioKICAgICAqIERlc3Ryb3lzIHRoZSBjb250cmFjdCBhbmQgcmV0dXJucyBhbmQgRXRoZXIgdG8gdGhlIG93bmVyLgogICAgICovCiAgICBmdW5jdGlvbiBraWxsKCkgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgfQoKICAgIC8qKgogICAgICogRmFsbGJhY2sgZnVuY3Rpb24gdG8gYWxsb3cgY29udHJhY3QgdG8gYWNjZXB0IEV0aGVyLgogICAgICovCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHt9CgogICAgLyoqCiAgICAgKiBTZXRzIHVwIGEgU2hhcGVTaGlmdCBjcnlwdG9jdXJyZW5jeSBjb252ZXJzaW9uIHVzaW5nIE9yYWNsaXplIGFuZCB0aGUgU2hhcGVTaGlmdCBBUEkuIE11c3QgYmUgc2VudCBtb3JlIEV0aGVyIHRoYW4gdGhlIE9yYWNsaXplIHByaWNlLgogICAgICogUmV0dXJucyBhIGNvbnZlcnNpb25JRCB3aGljaCBjYW4gYmUgdXNlZCBmb3IgdHJhY2tpbmcgb2YgdGhlIGNvbnZlcnNpb24uCiAgICAgKiBAcGFyYW0gX2NvaW5TeW1ib2wgVGhlIGNvaW5zeW1ib2wgb2YgdGhlIG90aGVyIGJsb2NrY2hhaW4gdG8gYmUgdXNlZCBieSBTaGFwZVNoaWZ0LiBTZWUgZW5naW5lKCkgZnVuY3Rpb24gZm9yIG1vcmUgZGV0YWlscy4KICAgICAqIEBwYXJhbSBfdG9BZGRyZXNzIFRoZSBhZGRyZXNzIG9uIHRoZSBvdGhlciBibG9ja2NoYWluIHRoYXQgdGhlIGNvbnZlcnRlZCBjcnlwdG9jdXJyZW5jeSB3aWxsIGJlIHNlbnQgdG8uCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbnZlcnQxKHN0cmluZyBfY29pblN5bWJvbCwgc3RyaW5nIF90b0FkZHJlc3MpIGV4dGVybmFsIHBheWFibGUgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIGVuZ2luZShfY29pblN5bWJvbCwgX3RvQWRkcmVzcywgbXNnLnNlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIHVwIGEgU2hhcGVTaGlmdCBjcnlwdG9jdXJyZW5jeSBjb252ZXJzaW9uIHVzaW5nIE9yYWNsaXplIGFuZCB0aGUgU2hhcGVTaGlmdCBBUEkuIE11c3QgYmUgc2VudCBtb3JlIEV0aGVyIHRoYW4gdGhlIE9yYWNsaXplIHByaWNlLgogICAgICogUmV0dXJucyBhIGNvbnZlcnNpb25JRCB3aGljaCBjYW4gYmUgdXNlZCBmb3IgdHJhY2tpbmcgb2YgdGhlIGNvbnZlcnNpb24uCiAgICAgKiBAcGFyYW0gX2NvaW5TeW1ib2wgVGhlIGNvaW5zeW1ib2wgb2YgdGhlIG90aGVyIGJsb2NrY2hhaW4gdG8gYmUgdXNlZCBieSBTaGFwZVNoaWZ0LiBTZWUgZW5naW5lKCkgZnVuY3Rpb24gZm9yIG1vcmUgZGV0YWlscy4KICAgICAqIEBwYXJhbSBfdG9BZGRyZXNzIFRoZSBhZGRyZXNzIG9uIHRoZSBvdGhlciBibG9ja2NoYWluIHRoYXQgdGhlIGNvbnZlcnRlZCBjcnlwdG9jdXJyZW5jeSB3aWxsIGJlIHNlbnQgdG8uCiAgICAgKiBAcGFyYW0gX3JldHVybkFkZHJlc3MgVGhlIEV0aGVyZXVtIGFkZHJlc3MgdGhhdCBhbnkgRXRoZXIgc2hvdWxkIGJlIHNlbnQgYmFjayB0byBpbiB0aGUgZXZlbnQgdGhhdCB0aGUgU2hhcGVTaGlmdCBjb252ZXJzaW9uIGlzIGludmFsaWQgb3IgZmFpbHMKICAgICAqLwogICAgZnVuY3Rpb24gY29udmVydDIoc3RyaW5nIF9jb2luU3ltYm9sLCBzdHJpbmcgX3RvQWRkcmVzcywgYWRkcmVzcyBfcmV0dXJuQWRkcmVzcykgZXh0ZXJuYWwgcGF5YWJsZSByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gZW5naW5lKF9jb2luU3ltYm9sLCBfdG9BZGRyZXNzLCBfcmV0dXJuQWRkcmVzcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmb3IgdXNlIGV4Y2x1c2l2ZWx5IGJ5IE9yYWNsaXplLgogICAgICogQHBhcmFtIG15aWQgVGhlIE9yYWNsaXplIGlkIG9mIHRoZSBxdWVyeS4KICAgICAqIEBwYXJhbSByZXN1bHQgVGhlIHJlc3VsdCBvZiB0aGUgcXVlcnkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIF9fY2FsbGJhY2soYnl0ZXMzMiBteWlkLCBzdHJpbmcgcmVzdWx0KSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3JhY2xpemUuY2JBZGRyZXNzKCkpIHJldmVydCgpOwoKICAgICAgICB1aW50IGNvbnZlcnNpb25JRCA9IG9yYWNsaXplTXlJZDJjb252ZXJzaW9uSURbbXlpZF07CgogICAgICAgIGlmKCBieXRlcyhyZXN1bHQpLmxlbmd0aCA9PSAwICkgewogICAgICAgICAgICBDb252ZXJzaW9uQWJvcnRlZChjb252ZXJzaW9uSUQsICJPcmFjbGl6ZSByZXR1cm4gdmFsdWUgd2FzIGludmFsaWQsIHRoaXMgaXMgcHJvYmFibHkgZHVlIHRvIGluY29ycmVjdCBjb252ZXJ0KCkgYXJnbWVudHMiKTsKICAgICAgICAgICAgcmVjb3ZlcmFibGVbY29udmVyc2lvbnNbY29udmVyc2lvbklEXS5yZXR1cm5BZGRyZXNzXSArPSBjb252ZXJzaW9uc1tjb252ZXJzaW9uSURdLmFtb3VudDsKICAgICAgICAgICAgY29udmVyc2lvbnNbY29udmVyc2lvbklEXS5hbW91bnQgPSAwOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgYWRkcmVzcyBkZXBvc2l0QWRkcmVzcyA9IHBhcnNlQWRkcihyZXN1bHQpOwogICAgICAgICAgICByZXF1aXJlKGRlcG9zaXRBZGRyZXNzICE9IG1zZy5zZW5kZXIpOyAvLyBwcmV2ZW50IERBTyB0cGUgcmUtZW50cmFjeSB2dWxuZXJhYmlsaXR5IHRoYXQgY2FuIHBvdGVudGlhbGx5IGJlIGRvbmUgYnkgT3JhY2xpemUKICAgICAgICAgICAgdWludCBzZW5kQW1vdW50ID0gY29udmVyc2lvbnNbY29udmVyc2lvbklEXS5hbW91bnQ7CiAgICAgICAgICAgIGNvbnZlcnNpb25zW2NvbnZlcnNpb25JRF0uYW1vdW50ID0gMDsKICAgICAgICAgICAgaWYgKGRlcG9zaXRBZGRyZXNzLnNlbmQoc2VuZEFtb3VudCkpIHsKICAgICAgICAgICAgICAgIENvbnZlcnNpb25TZW50VG9TaGFwZVNoaWZ0KGNvbnZlcnNpb25JRCwgY29udmVyc2lvbnNbY29udmVyc2lvbklEXS5yZXR1cm5BZGRyZXNzLCBkZXBvc2l0QWRkcmVzcywgc2VuZEFtb3VudCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBDb252ZXJzaW9uQWJvcnRlZChjb252ZXJzaW9uSUQsICJkZXBvc2l0IHRvIGFkZHJlc3MgcmV0dXJuZWQgYnkgT3JhY2xpemUgZmFpbGVkIik7CiAgICAgICAgICAgICAgICByZWNvdmVyYWJsZVtjb252ZXJzaW9uc1tjb252ZXJzaW9uSURdLnJldHVybkFkZHJlc3NdICs9IHNlbmRBbW91bnQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDYW5jZWwgYSBjcnlwdG9jdXJyZW5jeSBjb252ZXJzaW9uLgogICAgICogVGhpcyBzaG91bGQgb25seSBiZSByZXF1aXJlZCB0byBiZSBjYWxsZWQgaWYgT3JhY2xpemUgZmFpbHMgbWFrZSBhIHJldHVybiBjYWxsIHRvIF9fY2FsbGJhY2soKS4KICAgICAqIEBwYXJhbSBjb252ZXJzaW9uSUQgVGhlIGNvbnZlcnNpb24gSUQgb2YgdGhlIGNyeXB0b2N1cnJlbmN5IGNvbnZlcnNpb24sIGdlbmVyYXRlZCBkdXJpbmcgZW5naW5lKCkuCiAgICAgKi8KICAgICBmdW5jdGlvbiBjYW5jZWxDb252ZXJzaW9uKHVpbnQgY29udmVyc2lvbklEKSBleHRlcm5hbCB7CiAgICAgICAgQ29udmVyc2lvbiBtZW1vcnkgY29udmVyc2lvbiA9IGNvbnZlcnNpb25zW2NvbnZlcnNpb25JRF07CgogICAgICAgIGlmIChjb252ZXJzaW9uLmFtb3VudCA+IDApIHsKICAgICAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbnZlcnNpb24ucmV0dXJuQWRkcmVzcyk7CiAgICAgICAgICAgIHJlY292ZXJhYmxlW21zZy5zZW5kZXJdICs9IGNvbnZlcnNpb24uYW1vdW50OwogICAgICAgICAgICBjb252ZXJzaW9uc1tjb252ZXJzaW9uSURdLmFtb3VudCA9IDA7CiAgICAgICAgICAgIENvbnZlcnNpb25BYm9ydGVkKGNvbnZlcnNpb25JRCwgImNvbnZlcnNpb24gY2FuY2VsbGVkIGJ5IGNyZWF0b3IiKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZWNvdmVyIGFueSByZWNvdmVyYWJsZSBmdW5kcyBkdWUgdG8gdGhlIGZhaWx1cmUgb2YgSW50ZXJDcnlwdG8uIEZhaWx1cmUgY2FuIG9jY3VyZSBkdWUgdG86CiAgICAgKiAxLiBCYWQgdXNlciBpbnB1dHMgdG8gY29udmVydCgpLgogICAgICogMi4gU2hhcGVTaGlmdCB0ZW1wb3JhcmlseSBvciBwZXJtYW5lbnRseSBkaXNjb250aW51ZXMgc3VwcG9ydCBvZiBvdGhlciBibG9ja2NoYWluLgogICAgICogMy4gU2hhcGVTaGlmdCBzZXJ2aWNlIGJlY29tZXMgdW5hdmFpbGFibGUuCiAgICAgKiA0LiBPcmFjbGl6ZSBzZXJ2aWNlIGJlY29tZSB1bmF2YWlsYWJsZS4KICAgICAqLwogICAgIGZ1bmN0aW9uIHJlY292ZXIoKSBleHRlcm5hbCB7CiAgICAgICAgdWludCBhbW91bnQgPSByZWNvdmVyYWJsZVttc2cuc2VuZGVyXTsKICAgICAgICByZWNvdmVyYWJsZVttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIuc2VuZChhbW91bnQpKSB7CiAgICAgICAgICAgIFJlY292ZXJlZChtc2cuc2VuZGVyLCBhbW91bnQpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmVjb3ZlcmFibGVbbXNnLnNlbmRlcl0gPSBhbW91bnQ7CiAgICAgICAgfQogICAgfQogICAgLy8gX19fX19fX19fX19fX19fUFVCTElDIEZVTkNUSU9OU19fX19fX19fX19fX19fXwogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBwcmljZSBpbiBXZWkgcGFpZCB0byBPcmFjbGl6ZS4KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0SW50ZXJDcnlwdG9QcmljZSgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIG9yYWNsaXplX2dldFByaWNlKCdVUkwnKTsKICAgIH0KCiAgICAvLyBfX19fX19fX19fX19fX19JTlRFUk5BTCBGVU5DVElPTlNfX19fX19fX19fX19fX18KICAgIC8qKgogICAgICogU2V0cyB1cCBhIFNoYXBlU2hpZnQgY3J5cHRvY3VycmVuY3kgY29udmVyc2lvbiB1c2luZyBPcmFjbGl6ZSBhbmQgdGhlIFNoYXBlU2hpZnQgQVBJLiBNdXN0IGJlIHNlbnQgbW9yZSBFdGhlciB0aGFuIHRoZSBPcmFjbGl6ZSBwcmljZS4KICAgICAqIFJldHVybnMgYSBjb252ZXJzaW9uSUQgd2hpY2ggY2FuIGJlIHVzZWQgZm9yIHRyYWNraW5nIG9mIHRoZSBjb252ZXJzaW9uLgogICAgICogQHBhcmFtIF9jb2luU3ltYm9sIFRoZSBjb2luc3ltYm9sIG9mIHRoZSBvdGhlciBibG9ja2NoYWluIHRvIGJlIHVzZWQgYnkgU2hhcGVTaGlmdC4gU2VlIGVuZ2luZSgpIGZ1bmN0aW9uIGZvciBtb3JlIGRldGFpbHMuCiAgICAgKiBAcGFyYW0gX3RvQWRkcmVzcyBUaGUgYWRkcmVzcyBvbiB0aGUgb3RoZXIgYmxvY2tjaGFpbiB0aGF0IHRoZSBjb252ZXJ0ZWQgY3J5cHRvY3VycmVuY3kgd2lsbCBiZSBzZW50IHRvLgogICAgICogRXhhbXBsZSBmaXJzdCB0d28gYXJndW1lbnRzOgogICAgICogImx0YyIsICJMYlpjRGRNZVA5NmtvODVIMjFUUWlpOThZRkY5UmdaZzNEIiAgICBMaXRlY29pbgogICAgICogImJ0YyIsICIxTDhvUmlqZ21rZmNaRFlBMjFiNzNiNkRld0x0eVlzODdzIiAgICBCaXRjb2luCiAgICAgKiAiZGFzaCIsICJYb29wb3dzMTdpZGtUd05yTVp1eVNYQndRRG9yc2V6UUF4IiAgIERhc2gKICAgICAqICJ6ZWMiLCAidDFON3RmMXhSeHo1Y0JLNTFKQURpakxEV1M1OTJGUEp0eWEiICAgWkNhc2gKICAgICAqICJkb2dlIiwgIkRNQUZ2d1RIMnVwbmk3ZVRhdThhdTZSa3RnbTJiVWtNZWkiICAgRG9nZWNvaW4KICAgICAqIFRlc3Qgc3ltYm9sIHBhaXJzIHVzaW5nIFNoYXBlU2hpZnQgQVBJIChzaGFwZXNoaWZ0LmlvL3ZhbGlkYXRlQWRkcmVzcy9bYWRkcmVzc10vW2NvaW5TeW1ib2xdKSBvciBieSBjcmVhdGluZyBhIHRlc3QKICAgICAqIGNvbnZlcnNpb24gb24gaHR0cHM6Ly9zaGFwZXNoaWZ0LmlvIGZpcnN0IHdoZW5ldmVyIHBvc3NpYmxlIGJlZm9yZSB1c2luZyBpdCB3aXRoIEludGVyQ3J5cHRvLgogICAgICogQHBhcmFtIF9yZXR1cm5BZGRyZXNzIFRoZSBFdGhlcmV1bSBhZGRyZXNzIHRoYXQgYW55IEV0aGVyIHNob3VsZCBiZSBzZW50IGJhY2sgdG8gaW4gdGhlIGV2ZW50IHRoYXQgdGhlIFNoYXBlU2hpZnQgY29udmVyc2lvbiBpcyBpbnZhbGlkIG9yIGZhaWxzLgogICAgICovCiAgICBmdW5jdGlvbiBlbmdpbmUoc3RyaW5nIF9jb2luU3ltYm9sLCBzdHJpbmcgX3RvQWRkcmVzcywgYWRkcmVzcyBfcmV0dXJuQWRkcmVzcykgaW50ZXJuYWwgcmV0dXJucyh1aW50IGNvbnZlcnNpb25JRCkgewogICAgICAgIGNvbnZlcnNpb25JRCA9IGNvbnZlcnNpb25Db3VudCsrOwoKICAgICAgICBpZiAoCiAgICAgICAgICAgICFpc1ZhbGlkU3RyaW5nKF9jb2luU3ltYm9sLCA2KSB8fCAvLyBXYXZlcyBzbWJvbCBpcyAid2F2ZXMiCiAgICAgICAgICAgICFpc1ZhbGlkU3RyaW5nKF90b0FkZHJlc3MsIDEyMCkgICAvLyBNb25lcm8gaW50ZWdyYXRlZCBhZGRyZXNzZXMgYXJlIDEwNiBjaGFyYWN0ZXJzCiAgICAgICAgICAgICkgewogICAgICAgICAgICBDb252ZXJzaW9uQWJvcnRlZChjb252ZXJzaW9uSUQsICJpbnB1dCBwYXJhbWV0ZXJzIGFyZSB0b28gbG9uZyBvciBjb250YWluIGludmFsaWQgc3ltYm9scyIpOwogICAgICAgICAgICByZWNvdmVyYWJsZVttc2cuc2VuZGVyXSArPSBtc2cudmFsdWU7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHVpbnQgb3JhY2xpemVQcmljZSA9IGdldEludGVyQ3J5cHRvUHJpY2UoKTsKCiAgICAgICAgaWYgKG1zZy52YWx1ZSA+IG9yYWNsaXplUHJpY2UpIHsKICAgICAgICAgICAgQ29udmVyc2lvbiBtZW1vcnkgY29udmVyc2lvbiA9IENvbnZlcnNpb24oX3JldHVybkFkZHJlc3MsIG1zZy52YWx1ZS1vcmFjbGl6ZVByaWNlKTsKICAgICAgICAgICAgY29udmVyc2lvbnNbY29udmVyc2lvbklEXSA9IENvbnZlcnNpb24oX3JldHVybkFkZHJlc3MsIG1zZy52YWx1ZS1vcmFjbGl6ZVByaWNlKTsKCiAgICAgICAgICAgIHN0cmluZyBtZW1vcnkgcG9zdERhdGEgPSBjcmVhdGVTaGFwZVNoaWZ0Q29udmVyc2lvblBvc3QoX2NvaW5TeW1ib2wsIF90b0FkZHJlc3MpOwogICAgICAgICAgICBieXRlczMyIG15UXVlcnlJZCA9IG9yYWNsaXplX3F1ZXJ5KCJVUkwiLCAianNvbihodHRwczovL3NoYXBlc2hpZnQuaW8vc2hpZnQpLmRlcG9zaXQiLCBwb3N0RGF0YSk7CgogICAgICAgICAgICBpZiAobXlRdWVyeUlkID09IDApIHsKICAgICAgICAgICAgICAgIENvbnZlcnNpb25BYm9ydGVkKGNvbnZlcnNpb25JRCwgInVuZXhwZWN0ZWRseSBoaWdoIE9yYWNsaXplIHByaWNlIHdoZW4gY2FsbGluZyBvcmFjbGl6ZV9xdWVyeSIpOwogICAgICAgICAgICAgICAgcmVjb3ZlcmFibGVbbXNnLnNlbmRlcl0gKz0gbXNnLnZhbHVlLW9yYWNsaXplUHJpY2U7CiAgICAgICAgICAgICAgICBjb252ZXJzaW9uc1tjb252ZXJzaW9uSURdLmFtb3VudCA9IDA7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3JhY2xpemVNeUlkMmNvbnZlcnNpb25JRFtteVF1ZXJ5SWRdID0gY29udmVyc2lvbklEOwogICAgICAgICAgICBDb252ZXJzaW9uU3RhcnRlZChjb252ZXJzaW9uSUQpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgQ29udmVyc2lvbkFib3J0ZWQoY29udmVyc2lvbklELCAiTm90IGVub3VnaCBFdGhlciBzZW50IHRvIGNvdmVyIE9yYWNsaXplIGZlZSIpOwogICAgICAgICAgICBjb252ZXJzaW9uc1tjb252ZXJzaW9uSURdLmFtb3VudCA9IDA7CiAgICAgICAgICAgIHJlY292ZXJhYmxlW21zZy5zZW5kZXJdICs9IG1zZy52YWx1ZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYSBnaXZlbiBzdHJpbmcgY29udGFpbnMgb25seSBudW1iZXJzIGFuZCBsZXR0ZXJzLCBhbmQgaXMgYmVsb3cgYSBtYXhpbXVtIGxlbmd0aC4KICAgICAqIEBwYXJhbSBfc3RyaW5nIFN0cmluZyB0byBiZSBjaGVja2VkLgogICAgICogQHBhcmFtIG1heFNpemUgVGhlIG1heGltdW0gYWxsb3dhYmxlIHN0aW5nIGNoYXJhY3RlciBsZW5ndGguIFRoZSBhZGRyZXNzIG9uIHRoZSBvdGhlciBibG9ja2NoYWluIHRoYXQgdGhlIGNvbnZlcnRlZCBjcnlwdG9jdXJyZW5jeSB3aWxsIGJlIHNlbnQgdG8uCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzVmFsaWRTdHJpbmcoc3RyaW5nIF9zdHJpbmcsIHVpbnQgbWF4U2l6ZSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCBhbGxvd2VkKSB7CiAgICAgICAgYnl0ZXMgbWVtb3J5IHN0cmluZ0J5dGVzID0gYnl0ZXMoX3N0cmluZyk7CiAgICAgICAgdWludCBsZW5ndGhCeXRlcyA9IHN0cmluZ0J5dGVzLmxlbmd0aDsKICAgICAgICBpZiAobGVuZ3RoQnl0ZXMgPCAxIHx8CiAgICAgICAgICAgIGxlbmd0aEJ5dGVzID4gbWF4U2l6ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBsZW5ndGhCeXRlczsgaSsrKSB7CiAgICAgICAgICAgIGJ5dGUgYiA9IHN0cmluZ0J5dGVzW2ldOwogICAgICAgICAgICBpZiAoICEoCiAgICAgICAgICAgICAgICAoYiA+PSA0OCAmJiBiIDw9IDU3KSB8fCAvLyAwIC0gOQogICAgICAgICAgICAgICAgKGIgPj0gNjUgJiYgYiA8PSA5MCkgfHwgLy8gQSAtIFoKICAgICAgICAgICAgICAgIChiID49IDk3ICYmIGIgPD0gMTIyKSAgIC8vIGEgLSB6CiAgICAgICAgICAgICkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBjb25jYXRlbmF0aW9uIG9mIHNldmVuIGJ5dGVzLgogICAgICogQHBhcmFtIGIxIFRoZSBmaXJzdCBieXRlcyB0byBiZSBjb25jYXRlbmF0ZWQuCiAgICAgKiAuLi4KICAgICAqIEBwYXJhbSBiNyBUaGUgbGFzdCBieXRlcyB0byBiZSBjb25jYXRlbmF0ZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbmNhdEJ5dGVzKGJ5dGVzIGIxLCBieXRlcyBiMiwgYnl0ZXMgYjMsIGJ5dGVzIGI0LCBieXRlcyBiNSwgYnl0ZXMgYjYsIGJ5dGVzIGI3KSBpbnRlcm5hbCByZXR1cm5zIChieXRlcyBiRmluYWwpIHsKICAgICAgICBiRmluYWwgPSBuZXcgYnl0ZXMoYjEubGVuZ3RoICsgYjIubGVuZ3RoICsgYjMubGVuZ3RoICsgYjQubGVuZ3RoICsgYjUubGVuZ3RoICsgYjYubGVuZ3RoICsgYjcubGVuZ3RoKTsKCiAgICAgICAgdWludCBpID0gMDsKICAgICAgICB1aW50IGo7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IGIxLmxlbmd0aDsgaisrKSBiRmluYWxbaSsrXSA9IGIxW2pdOwogICAgICAgIGZvciAoaiA9IDA7IGogPCBiMi5sZW5ndGg7IGorKykgYkZpbmFsW2krK10gPSBiMltqXTsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgYjMubGVuZ3RoOyBqKyspIGJGaW5hbFtpKytdID0gYjNbal07CiAgICAgICAgZm9yIChqID0gMDsgaiA8IGI0Lmxlbmd0aDsgaisrKSBiRmluYWxbaSsrXSA9IGI0W2pdOwogICAgICAgIGZvciAoaiA9IDA7IGogPCBiNS5sZW5ndGg7IGorKykgYkZpbmFsW2krK10gPSBiNVtqXTsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgYjYubGVuZ3RoOyBqKyspIGJGaW5hbFtpKytdID0gYjZbal07CiAgICAgICAgZm9yIChqID0gMDsgaiA8IGI3Lmxlbmd0aDsgaisrKSBiRmluYWxbaSsrXSA9IGI3W2pdOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgU2hhcGVTaGlmdCBzaGlmdCBBUEkgc3RyaW5nIHRoYXQgaXMgbmVlZGVkIHRvIGJlIHNlbnQgdG8gT3JhY2xpemUuCiAgICAgKiBAcGFyYW0gX2NvaW5TeW1ib2wgVGhlIGNvaW5zeW1ib2wgb2YgdGhlIG90aGVyIGJsb2NrY2hhaW4gdG8gYmUgdXNlZCBieSBTaGFwZVNoaWZ0LiBTZWUgZW5naW5lKCkgZnVuY3Rpb24gZm9yIG1vcmUgZGV0YWlscy4KICAgICAqIEBwYXJhbSBfdG9BZGRyZXNzIFRoZSBhZGRyZXNzIG9uIHRoZSBvdGhlciBibG9ja2NoYWluIHRoYXQgdGhlIGNvbnZlcnRlZCBjcnlwdG9jdXJyZW5jeSB3aWxsIGJlIHNlbnQgdG8uCiAgICAgKiBFeGFtcGxlIG91dHB1dDoKICAgICAqICcgeyJ3aXRoZHJhd2FsIjoiTGJaY0RkTWVQOTZrbzg1SDIxVFFpaTk4WUZGOVJnWmczRCIsInBhaXIiOiJldGhfbHRjIiwicmV0dXJuQWRkcmVzcyI6IjU1ODk5OWZmMmUwZGFlZmNiNGZjZGVkNGM4OWUwN2ZkZjljY2I1NmMifScKICAgICAqIE5vdGUgdGhhdCBhbiBleHRyYSBzcGFjZSAnICcgaXMgbmVlZGVkIGF0IHRoZSBzdGFydCB0byB0ZWxsIE9yYWNsaXplIHRvIG1ha2UgYSBQT1NUIHF1ZXJ5CiAgICAgKi8KICAgIGZ1bmN0aW9uIGNyZWF0ZVNoYXBlU2hpZnRDb252ZXJzaW9uUG9zdChzdHJpbmcgX2NvaW5TeW1ib2wsIHN0cmluZyBfdG9BZGRyZXNzKSBpbnRlcm5hbCByZXR1cm5zIChzdHJpbmcgc0ZpbmFsKSB7CiAgICAgICAgc3RyaW5nIG1lbW9yeSBzMSA9ICcgeyJ3aXRoZHJhd2FsIjoiJzsKICAgICAgICBzdHJpbmcgbWVtb3J5IHMzID0gJyIsInBhaXIiOiJldGhfJzsKICAgICAgICBzdHJpbmcgbWVtb3J5IHM1ID0gJyIsInJldHVybkFkZHJlc3MiOiInOwogICAgICAgIHN0cmluZyBtZW1vcnkgczcgPSAnIn0nOwoKICAgICAgICBieXRlcyBtZW1vcnkgYkZpbmFsID0gY29uY2F0Qnl0ZXMoYnl0ZXMoczEpLCBieXRlcyhfdG9BZGRyZXNzKSwgYnl0ZXMoczMpLCBieXRlcyhfY29pblN5bWJvbCksIGJ5dGVzKHM1KSwgYnl0ZXMoYWRkcmVzc1RvQnl0ZXMobXNnLnNlbmRlcikpLCBieXRlcyhzNykpOwoKICAgICAgICBzRmluYWwgPSBzdHJpbmcoYkZpbmFsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIEFTQ0lJIG51bWVyaWMgb3IgbG93ZXIgY2FzZSBjaGFyYWN0ZXIgcmVwcmVzZW50YXRpb24gb2YgYSBudW1iZXIuCiAgICAgKiBBdXRob3JlZCBieSBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9heGljCiAgICAgKiBAcGFyYW0gbmliYmxlIE51YmVyIHRvIGJlIGNvbnZlcnRlZAogICAgICovCiAgICBmdW5jdGlvbiBuaWJibGVUb0NoYXIodWludCBuaWJibGUpIGludGVybmFsIHJldHVybnMgKHVpbnQgcmV0KSB7CiAgICAgICAgaWYgKG5pYmJsZSA+IDkpCiAgICAgICAgcmV0dXJuIG5pYmJsZSArIDg3OyAvLyBuaWJibGUgKyAnYSctIDEwCiAgICAgICAgZWxzZQogICAgICAgIHJldHVybiBuaWJibGUgKyA0ODsgLy8gJzAnCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBieXRlcyByZXByZXNlbnRhdGlvbiBvZiBhIHByb3ZpZGVkIEV0aGVyZXVtIGFkZHJlc3MKICAgICAqIEF1dGhvcmVkIGJ5IGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2F4aWMKICAgICAqIEBwYXJhbSBfYWRkcmVzcyBFdGhlcmV1bSBhZGRyZXNzIHRvIGJlIGNhc3QgdG8gYnl0ZXMKICAgICAqLwogICAgZnVuY3Rpb24gYWRkcmVzc1RvQnl0ZXMoYWRkcmVzcyBfYWRkcmVzcykgaW50ZXJuYWwgcmV0dXJucyAoYnl0ZXMpIHsKICAgICAgICB1aW50MTYwIHRtcCA9IHVpbnQxNjAoX2FkZHJlc3MpOwoKICAgICAgICAvLyA0MCBieXRlcyBvZiBzcGFjZSwgYnV0IGFjdHVhbGx5IHVzZXMgNjQgYnl0ZXMKICAgICAgICBzdHJpbmcgbWVtb3J5IGhvbGRlciA9ICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIjsKICAgICAgICBieXRlcyBtZW1vcnkgcmV0ID0gYnl0ZXMoaG9sZGVyKTsKCiAgICAgICAgLy8gTk9URTogdGhpcyBpcyB3cml0dGVuIGluIGFuIGV4cGVuc2l2ZSB3YXksIGFzIG91dC1vZi1vcmRlciBhcnJheSBhY2Nlc3MKICAgICAgICAvLyAgICAgICBpcyBub3Qgc3VwcG9ydGVkIHlldCwgZS5nLiB3ZSBjYW5ub3QgZ28gaW4gcmV2ZXJzZSBlYXNpbHkKICAgICAgICAvLyAgICAgICAob3IgbWF5YmUgaXQgaXMgYSBidWc6IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9zb2xpZGl0eS9pc3N1ZXMvMjEyKQogICAgICAgIHVpbnQgaiA9IDA7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgMjA7IGkrKykgewogICAgICAgICAgICB1aW50IF90bXAgPSB0bXAgLyAoMiAqKiAoOCooMTktaSkpKTsgLy8gc2hyKHRtcCwgOCooMTktaSkpCiAgICAgICAgICAgIHVpbnQgbmIxID0gKF90bXAgLyAweDEwKSAmIDB4MGY7ICAgICAvLyBzaHIodG1wLCA4KSAmIDB4MGYKICAgICAgICAgICAgdWludCBuYjIgPSBfdG1wICYgMHgwZjsKICAgICAgICAgICAgcmV0W2orK10gPSBieXRlKG5pYmJsZVRvQ2hhcihuYjEpKTsKICAgICAgICAgICAgcmV0W2orK10gPSBieXRlKG5pYmJsZVRvQ2hhcihuYjIpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXQ7CiAgICB9CgogICAgLy8gX19fX19fX19fX19fX19fUFJJVkFURSBGVU5DVElPTlNfX19fX19fX19fX19fX18KCn0='.
	

]
