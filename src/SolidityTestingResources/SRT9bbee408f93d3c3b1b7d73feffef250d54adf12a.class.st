Class {
	#name : #SRT9bbee408f93d3c3b1b7d73feffef250d54adf12a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9bbee408f93d3c3b1b7d73feffef250d54adf12a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgovKioKICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPiAwKTsKICAgIHVpbnQgYyA9IGEgLyBiOwogICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSB7CiAgICAgIHJldmVydCgpOwogICAgfQogIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAgIC8qCiAgICAgKiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjawogICAgICovCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgICAgaWYgKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSAgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAgICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAgICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCn0KCgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgIHJldmVydCgpOwogICAgfQogICAgXzsKICB9Cn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCiAgICAvKioKICAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAgKgogICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCn0KCgpjb250cmFjdCBSQkluZm9ybWF0aW9uU3RvcmUgaXMgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBwcm9maXRDb250YWluZXJBZGRyZXNzOwogICAgYWRkcmVzcyBwdWJsaWMgY29tcGFueVdhbGxldEFkZHJlc3M7CiAgICB1aW50IHB1YmxpYyBldGhlclJhdGlvRm9yT3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBtdWx0aVNpZ0FkZHJlc3M7CiAgICBhZGRyZXNzIHB1YmxpYyBhY2NvdW50QWRkcmVzc0ZvclNwb25zZWU7CiAgICBib29sIHB1YmxpYyBpc1BheWFibGVFbmFibGVkRm9yQWxsID0gdHJ1ZTsKCiAgICBtb2RpZmllciBvbmx5TXVsdGlTaWcoKSB7CiAgICAgICAgcmVxdWlyZShtdWx0aVNpZ0FkZHJlc3MgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBSQkluZm9ybWF0aW9uU3RvcmUKICAgICgKICAgICAgICBhZGRyZXNzIF9wcm9maXRDb250YWluZXJBZGRyZXNzLAogICAgICAgIGFkZHJlc3MgX2NvbXBhbnlXYWxsZXRBZGRyZXNzLAogICAgICAgIHVpbnQgX2V0aGVyUmF0aW9Gb3JPd25lciwKICAgICAgICBhZGRyZXNzIF9tdWx0aVNpZ0FkZHJlc3MsCiAgICAgICAgYWRkcmVzcyBfYWNjb3VudEFkZHJlc3NGb3JTcG9uc2VlCiAgICApIHsKICAgICAgICBwcm9maXRDb250YWluZXJBZGRyZXNzID0gX3Byb2ZpdENvbnRhaW5lckFkZHJlc3M7CiAgICAgICAgY29tcGFueVdhbGxldEFkZHJlc3MgPSBfY29tcGFueVdhbGxldEFkZHJlc3M7CiAgICAgICAgZXRoZXJSYXRpb0Zvck93bmVyID0gX2V0aGVyUmF0aW9Gb3JPd25lcjsKICAgICAgICBtdWx0aVNpZ0FkZHJlc3MgPSBfbXVsdGlTaWdBZGRyZXNzOwogICAgICAgIGFjY291bnRBZGRyZXNzRm9yU3BvbnNlZSA9IF9hY2NvdW50QWRkcmVzc0ZvclNwb25zZWU7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlUHJvZml0Q29udGFpbmVyQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSBvbmx5TXVsdGlTaWcgewogICAgICAgIHByb2ZpdENvbnRhaW5lckFkZHJlc3MgPSBfYWRkcmVzczsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VDb21wYW55V2FsbGV0QWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSBvbmx5TXVsdGlTaWcgewogICAgICAgIGNvbXBhbnlXYWxsZXRBZGRyZXNzID0gX2FkZHJlc3M7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlRXRoZXJSYXRpb0Zvck93bmVyKHVpbnQgX3ZhbHVlKSBvbmx5TXVsdGlTaWcgewogICAgICAgIGV0aGVyUmF0aW9Gb3JPd25lciA9IF92YWx1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VNdWx0aVNpZ0FkZHJlc3MoYWRkcmVzcyBfYWRkcmVzcykgb25seU11bHRpU2lnIHsKICAgICAgICBtdWx0aVNpZ0FkZHJlc3MgPSBfYWRkcmVzczsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9hZGRyZXNzKSBvbmx5TXVsdGlTaWcgewogICAgICAgIG93bmVyID0gX2FkZHJlc3M7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlQWNjb3VudEFkZHJlc3NGb3JTcG9uc2VlKGFkZHJlc3MgX2FkZHJlc3MpIG9ubHlNdWx0aVNpZyB7CiAgICAgICAgYWNjb3VudEFkZHJlc3NGb3JTcG9uc2VlID0gX2FkZHJlc3M7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlSXNQYXlhYmxlRW5hYmxlZEZvckFsbCgpIG9ubHlNdWx0aVNpZyB7CiAgICAgICAgaXNQYXlhYmxlRW5hYmxlZEZvckFsbCA9ICFpc1BheWFibGVFbmFibGVkRm9yQWxsOwogICAgfQp9CgoKY29udHJhY3QgUmF0ZSB7CiAgICB1aW50IHB1YmxpYyBFVEhfVVNEX3JhdGU7CiAgICBSQkluZm9ybWF0aW9uU3RvcmUgcHVibGljIHJiSW5mb3JtYXRpb25TdG9yZTsKCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHJiSW5mb3JtYXRpb25TdG9yZS5vd25lcigpKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIFJhdGUodWludCBfcmF0ZSwgYWRkcmVzcyBfYWRkcmVzcykgewogICAgICAgIEVUSF9VU0RfcmF0ZSA9IF9yYXRlOwogICAgICAgIHJiSW5mb3JtYXRpb25TdG9yZSA9IFJCSW5mb3JtYXRpb25TdG9yZShfYWRkcmVzcyk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UmF0ZSh1aW50IF9yYXRlKSBvbmx5T3duZXIgewogICAgICAgIEVUSF9VU0RfcmF0ZSA9IF9yYXRlOwogICAgfQp9CgoKCi8qKgpAdGl0bGUgU3BvbnNlZVRva2VuTW9kZWwKKi8KY29udHJhY3QgU3BvbnNlZVRva2VuTW9kZWwgaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAwOwogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHkgPSAwOwogICAgdWludCBwdWJsaWMgY2FwID0gMTAwMDAwMDAwOyAgICAgICAgICAgICAgICAgICAgLy8gbWF4aW11bSBjYXAgPSAxIDAwMCAwMDAgJCA9IDEwMCAwMDAgMDAwIHRva2VucwogICAgdWludCBwdWJsaWMgbWluaW11bVN1cHBvcnQgPSA1MDA7ICAgICAgICAgICAgICAgLy8gbWluaW11bSBzdXBwb3J0IGlzIDUkKDUwMCBjZW50cykKICAgIHVpbnQgcHVibGljIGV0aGVyUmF0aW9Gb3JJbnZlc3RvciA9IDEwOyAgICAgICAgIC8vIGV0aGVyUmF0aW8gKDEwJSkgdG8gc2VuZCBldGhlciB0byBpbnZlc3RvcgogICAgYWRkcmVzcyBwdWJsaWMgc3BvbnNlZUFkZHJlc3M7CiAgICBib29sIHB1YmxpYyBpc1BheWFibGVFbmFibGVkID0gdHJ1ZTsKICAgIFJCSW5mb3JtYXRpb25TdG9yZSBwdWJsaWMgcmJJbmZvcm1hdGlvblN0b3JlOwogICAgUmF0ZSBwdWJsaWMgcmF0ZTsKCiAgICBldmVudCBMb2dSZWNlaXZlZEV0aGVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgZXRoZXJWYWx1ZSwgc3RyaW5nIHRva2VuTmFtZSk7CiAgICBldmVudCBMb2dCdXkoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCBpbmRleGVkIHZhbHVlLCB1aW50IHBheW1lbnRJZCk7CiAgICBldmVudCBMb2dSb2xsYmFja1RyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgTG9nRXhjaGFuZ2UoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0b2tlbiwgdWludCB2YWx1ZSk7CiAgICBldmVudCBMb2dJbmNyZWFzZUNhcCh1aW50IHZhbHVlKTsKICAgIGV2ZW50IExvZ0RlY3JlYXNlQ2FwKHVpbnQgdmFsdWUpOwogICAgZXZlbnQgTG9nU2V0UkJJbmZvcm1hdGlvblN0b3JlQWRkcmVzcyhhZGRyZXNzIGluZGV4ZWQgdG8pOwogICAgZXZlbnQgTG9nU2V0TmFtZShzdHJpbmcgbmFtZSk7CiAgICBldmVudCBMb2dTZXRTeW1ib2woc3RyaW5nIHN5bWJvbCk7CiAgICBldmVudCBMb2dNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CiAgICBldmVudCBMb2dDaGFuZ2VTcG9uc2VlQWRkcmVzcyhhZGRyZXNzIGluZGV4ZWQgdG8pOwogICAgZXZlbnQgTG9nQ2hhbmdlSXNQYXlhYmxlRW5hYmxlZChib29sIGZsYWcpOwoKICAgIG1vZGlmaWVyIG9ubHlBY2NvdW50QWRkcmVzc0ZvclNwb25zZWUoKSB7CiAgICAgICAgcmVxdWlyZShyYkluZm9ybWF0aW9uU3RvcmUuYWNjb3VudEFkZHJlc3NGb3JTcG9uc2VlKCkgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5TXVsdGlTaWcoKSB7CiAgICAgICAgcmVxdWlyZShyYkluZm9ybWF0aW9uU3RvcmUubXVsdGlTaWdBZGRyZXNzKCkgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBjb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gU3BvbnNlZVRva2VuTW9kZWwoCiAgICAgICAgc3RyaW5nIF9uYW1lLAogICAgICAgIHN0cmluZyBfc3ltYm9sLAogICAgICAgIGFkZHJlc3MgX3JiSW5mb3JtYXRpb25TdG9yZUFkZHJlc3MsCiAgICAgICAgYWRkcmVzcyBfcmF0ZUFkZHJlc3MsCiAgICAgICAgYWRkcmVzcyBfc3BvbnNlZQogICAgKSB7CiAgICAgICAgbmFtZSA9IF9uYW1lOwogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICAgICAgcmJJbmZvcm1hdGlvblN0b3JlID0gUkJJbmZvcm1hdGlvblN0b3JlKF9yYkluZm9ybWF0aW9uU3RvcmVBZGRyZXNzKTsKICAgICAgICByYXRlID0gUmF0ZShfcmF0ZUFkZHJlc3MpOwogICAgICAgIHNwb25zZWVBZGRyZXNzID0gX3Nwb25zZWU7CiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIFJlY2VpdmUgZXRoZXIgZnJvbSBhbnkgRU9BIGFjY291bnRzLiBBbW91bnQgb2YgZXRoZXIgcmVjZWl2ZWQgaW4gdGhpcyBmdW5jdGlvbiBpcyBkaXN0cmlidXRlZCB0byAzIHBhcnRzLgogICAgT25lIGlzIGEgcHJvZml0Q29udGFpbmVyQWRkcmVzcyB3aGljaCBpcyBhZGRyZXNzIG9mIGNvbnRhaW5lcldhbGxldCB0byBkaXZpZGVuZCB0byBpbnZlc3RvciBvZiBCb29zdCB0b2tlbi4KICAgIEFub3RoZXIgaXMgYW4gb3duZXJBZGRyZXNzIHdoaWNoIGlzIGFkZHJlc3Mgb2Ygb3duZXIgb2YgUkVBTEJPT1NUIHNpdGUuCiAgICBUaGUgb3RoZXIgaXMgYW4gc3BvbnNlZUFkZHJlc3Mgd2hpY2ggaXMgYWRkcmVzcyBvZiBvd25lciBvZiB0aGlzIGNvbnRyYWN0LgogICAgVGhlbiwgcmV0dXJuIHRva2VuIG9mIHRoaXMgY29udHJhY3QgdG8gbXNnLnNlbmRlciByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2YgZXRoZXIgdGhhdCBtc2cuc2VuZGVyIHNlbnQgYW5kIHJhdGUgKFVTIGNlbnQpIG9mIGVodGVyIHN0b3JlZCBpbiBSYXRlIGNvbnRyYWN0LgogICAgKi8KICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CgogICAgICAgIC8vIGNoZWNrIGNvbmRpdGlvbgogICAgICAgIHJlcXVpcmUoaXNQYXlhYmxlRW5hYmxlZCAmJiByYkluZm9ybWF0aW9uU3RvcmUuaXNQYXlhYmxlRW5hYmxlZEZvckFsbCgpKTsKCiAgICAgICAgLy8gY2hlY2sgdmFsaWRhdGlvbgogICAgICAgIGlmIChtc2cudmFsdWUgPD0gMCkgeyByZXZlcnQoKTsgfQoKICAgICAgICAvLyBjYWxjdWxhdGUgc3VwcG9ydCBhbW91bnQgaW4gVVMKICAgICAgICB1aW50IHN1cHBvcnRlZEFtb3VudCA9IG1zZy52YWx1ZS5tdWwocmF0ZS5FVEhfVVNEX3JhdGUoKSkuZGl2KDEwKioxOCk7CgogICAgICAgIC8vIGlmIHN1cHBvcnQgaXMgbGVzcyB0aGFuIG1pbmltdW0gPT4gcmV0dXJuIG1vbmV5IHRvIHN1cHBvcnRlcgogICAgICAgIGlmIChzdXBwb3J0ZWRBbW91bnQgPCBtaW5pbXVtU3VwcG9ydCkgeyByZXZlcnQoKTsgfQoKICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIHJhdGlvIG9mIEV0aGVyIGZvciBkaXN0cmlidXRpb24KICAgICAgICB1aW50IGV0aGVyUmF0aW9Gb3JPd25lciA9IHJiSW5mb3JtYXRpb25TdG9yZS5ldGhlclJhdGlvRm9yT3duZXIoKTsKICAgICAgICB1aW50IGV0aGVyUmF0aW9Gb3JTcG9uc2VlID0gdWludCgxMDApLnN1YihldGhlclJhdGlvRm9yT3duZXIpLnN1YihldGhlclJhdGlvRm9ySW52ZXN0b3IpOwoKICAgICAgICAvKiBkaXZpZGUgRXRoZXIgKi8KICAgICAgICAvLyBjYWxjdWxhdGUKICAgICAgICB1aW50IGV0aGVyRm9yT3duZXIgPSBtc2cudmFsdWUubXVsKGV0aGVyUmF0aW9Gb3JPd25lcikuZGl2KDEwMCk7CiAgICAgICAgdWludCBldGhlckZvckludmVzdG9yID0gbXNnLnZhbHVlLm11bChldGhlclJhdGlvRm9ySW52ZXN0b3IpLmRpdigxMDApOwogICAgICAgIHVpbnQgZXRoZXJGb3JTcG9uc2VlID0gbXNnLnZhbHVlLm11bChldGhlclJhdGlvRm9yU3BvbnNlZSkuZGl2KDEwMCk7CgogICAgICAgIC8vIGdldCBhZGRyZXNzCiAgICAgICAgYWRkcmVzcyBwcm9maXRDb250YWluZXJBZGRyZXNzID0gcmJJbmZvcm1hdGlvblN0b3JlLnByb2ZpdENvbnRhaW5lckFkZHJlc3MoKTsKICAgICAgICBhZGRyZXNzIGNvbXBhbnlXYWxsZXRBZGRyZXNzID0gcmJJbmZvcm1hdGlvblN0b3JlLmNvbXBhbnlXYWxsZXRBZGRyZXNzKCk7CgogICAgICAgIC8vIHNlbmQgRXRoZXIKICAgICAgICBpZiAoIXByb2ZpdENvbnRhaW5lckFkZHJlc3Muc2VuZChldGhlckZvckludmVzdG9yKSkgeyByZXZlcnQoKTsgfQogICAgICAgIGlmICghY29tcGFueVdhbGxldEFkZHJlc3Muc2VuZChldGhlckZvck93bmVyKSkgeyByZXZlcnQoKTsgfQogICAgICAgIGlmICghc3BvbnNlZUFkZHJlc3Muc2VuZChldGhlckZvclNwb25zZWUpKSB7IHJldmVydCgpOyB9CgogICAgICAgIC8vIHRva2VuIGFtb3VudCBpcyB0cmFuc2ZlcmVkIHRvIHNlbmRlcgogICAgICAgIC8vIDEgdG9rZW4gPSAxIGNlbnQsIDEgdXNkID0gMTAwIGNlbnRzCiAgICAgICAgdWludCB0b2tlbkFtb3VudCA9IG1zZy52YWx1ZS5tdWwocmF0ZS5FVEhfVVNEX3JhdGUoKSkuZGl2KDEwKioxOCk7CgogICAgICAgIC8vIGFkZCB0b2tlbnMKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZCh0b2tlbkFtb3VudCk7CgogICAgICAgIC8vIGluY3JlYXNlIHRvdGFsIHN1cHBseQogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKHRva2VuQW1vdW50KTsKCiAgICAgICAgLy8gY2hlY2sgY2FwCiAgICAgICAgaWYgKHRvdGFsU3VwcGx5ID4gY2FwKSB7IHJldmVydCgpOyB9CgogICAgICAgIC8vIHNlbmQgRXZlbnQKICAgICAgICBMb2dFeGNoYW5nZShtc2cuc2VuZGVyLCB0aGlzLCB0b2tlbkFtb3VudCk7CiAgICAgICAgTG9nUmVjZWl2ZWRFdGhlcihtc2cuc2VuZGVyLCB0aGlzLCBtc2cudmFsdWUsIG5hbWUpOwogICAgICAgIFRyYW5zZmVyKGFkZHJlc3MoMHgwKSwgbXNnLnNlbmRlciwgdG9rZW5BbW91bnQpOwogICAgfQoKICAgIC8qKgogICAgQG5vdGljZSBDaGFuZ2UgcmJJbmZvcm1hdGlvblN0b3JlQWRkcmVzcy4KICAgIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyBvZiBuZXcgcmJJbmZvcm1hdGlvblN0b3JlCiAgICAqLwogICAgZnVuY3Rpb24gc2V0UkJJbmZvcm1hdGlvblN0b3JlQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSBvbmx5TXVsdGlTaWcgewoKICAgICAgICByYkluZm9ybWF0aW9uU3RvcmUgPSBSQkluZm9ybWF0aW9uU3RvcmUoX2FkZHJlc3MpOwoKICAgICAgICAvLyBzZW5kIEV2ZW50CiAgICAgICAgTG9nU2V0UkJJbmZvcm1hdGlvblN0b3JlQWRkcmVzcyhfYWRkcmVzcyk7CiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIENoYW5nZSBuYW1lLgogICAgQHBhcmFtIF9uYW1lIFRoZSBuZXcgbmFtZSBvZiB0b2tlbgogICAgKi8KICAgIGZ1bmN0aW9uIHNldE5hbWUoc3RyaW5nIF9uYW1lKSBvbmx5QWNjb3VudEFkZHJlc3NGb3JTcG9uc2VlIHsKCiAgICAgICAgbmFtZSA9IF9uYW1lOwoKICAgICAgICAvLyBzZW5kIEV2ZW50CiAgICAgICAgTG9nU2V0TmFtZShfbmFtZSk7CiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIENoYW5nZSBzeW1ib2wuCiAgICBAcGFyYW0gX3N5bWJvbCBUaGUgbmV3IHN5bWJvbCBvZiB0b2tlbgogICAgKi8KICAgIGZ1bmN0aW9uIHNldFN5bWJvbChzdHJpbmcgX3N5bWJvbCkgb25seUFjY291bnRBZGRyZXNzRm9yU3BvbnNlZSB7CgogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CgogICAgICAgIC8vIHNlbmQgRXZlbnQKICAgICAgICBMb2dTZXRTeW1ib2woX3N5bWJvbCk7CiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIE1pbnQgbmV3IHRva2VuIGFtb3VudC4KICAgIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyB0aGF0IG5ldyB0b2tlbiBhbW91bnQgaXMgYWRkZWQKICAgIEBwYXJhbSBfdmFsdWUgVGhlIG5ldyBhbW91bnQgb2YgdG9rZW4KICAgICovCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX3ZhbHVlKSBvbmx5QWNjb3VudEFkZHJlc3NGb3JTcG9uc2VlIHsKCiAgICAgICAgLy8gYWRkIHRva2VucwogICAgICAgIGJhbGFuY2VzW19hZGRyZXNzXSA9IGJhbGFuY2VzW19hZGRyZXNzXS5hZGQoX3ZhbHVlKTsKCiAgICAgICAgLy8gaW5jcmVhc2UgdG90YWwgc3VwcGx5CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX3ZhbHVlKTsKCiAgICAgICAgLy8gY2hlY2sgY2FwCiAgICAgICAgaWYgKHRvdGFsU3VwcGx5ID4gY2FwKSB7IHJldmVydCgpOyB9CgogICAgICAgIC8vIHNlbmQgRXZlbnQKICAgICAgICBMb2dNaW50KF9hZGRyZXNzLCBfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKGFkZHJlc3MoMHgwKSwgX2FkZHJlc3MsIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIEluY3JlYXNlIGNhcC4KICAgIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0aGF0IHNob3VsZCBiZSBpbmNyZWFzZWQKICAgICovCiAgICBmdW5jdGlvbiBpbmNyZWFzZUNhcCh1aW50IF92YWx1ZSkgb25seUFjY291bnRBZGRyZXNzRm9yU3BvbnNlZSB7CgogICAgICAgIC8vIGNoYW5nZSBjYXAgaGVyZQogICAgICAgIGNhcCA9IGNhcC5hZGQoX3ZhbHVlKTsKCiAgICAgICAgLy8gc2VuZCBFdmVudAogICAgICAgIExvZ0luY3JlYXNlQ2FwKF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIERlY3JlYXNlIGNhcC4KICAgIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0aGF0IHNob3VsZCBiZSBkZWNyZWFzZWQKICAgICovCiAgICBmdW5jdGlvbiBkZWNyZWFzZUNhcCh1aW50IF92YWx1ZSkgb25seUFjY291bnRBZGRyZXNzRm9yU3BvbnNlZSB7CgogICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgY2FwIGlzIGxvd2VyIHRoYW4gdG90YWxTdXBwbHkgb3Igbm90CiAgICAgICAgaWYgKHRvdGFsU3VwcGx5ID4gY2FwLnN1YihfdmFsdWUpKSB7IHJldmVydCgpOyB9CgogICAgICAgIC8vIGNoYW5nZSBjYXAgaGVyZQogICAgICAgIGNhcCA9IGNhcC5zdWIoX3ZhbHVlKTsKCiAgICAgICAgLy8gc2VuZCBFdmVudAogICAgICAgIExvZ0RlY3JlYXNlQ2FwKF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIFJvbGxiYWNrIHRyYW5zZmVyLgogICAgQHBhcmFtIF9mcm9tIFRoZSBFT0EgYWRkcmVzcyBmb3Igcm9sbGJhY2sgdHJhbnNmZXIKICAgIEBwYXJhbSBfdG8gVGhlIEVPQSBhZGRyZXNzIGZvciByb2xsYmFjayB0cmFuc2ZlcgogICAgQHBhcmFtIF92YWx1ZSBUaGUgbnVtYmVyIG9mIHRva2VuIGZvciByb2xsYmFjayB0cmFuc2ZlcgogICAgKi8KICAgIGZ1bmN0aW9uIHJvbGxiYWNrVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSBvbmx5TXVsdGlTaWcgewoKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uYWRkKF92YWx1ZSk7CgogICAgICAgIC8vIHNlbmQgRXZlbnQKICAgICAgICBMb2dSb2xsYmFja1RyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgIEBub3RpY2UgVHJhbnNmZXIgZnJvbSBtc2cuc2VuZGVyIGZvciBkb3dubG9hZGluZyBvZiBjb250ZW50LgogICAgQHBhcmFtIF90byBUaGUgRU9BIGFkZHJlc3MgZm9yIGJ1eSBjb250ZW50CiAgICBAcGFyYW0gX3ZhbHVlIFRoZSBudW1iZXIgb2YgdG9rZW4gZm9yIGJ1eSBjb250ZW50CiAgICBAcGFyYW0gX3BheW1lbnRJZCBUaGUgaWQgb2YgY29udGVudCB3aGljaCBtc2cuc2VuZGVyIHdhbnQgdG8gYnV5CiAgICAqLwogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgdWludCBfcGF5bWVudElkKSB7CgogICAgICAgIHRyYW5zZmVyKF90bywgX3ZhbHVlKTsKCiAgICAgICAgLy8gc2VuZCBFdmVudAogICAgICAgIExvZ0J1eShtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX3BheW1lbnRJZCk7CiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIFRoaXMgbWV0aG9kIHdpbGwgY2hhbmdlIG9sZCBzcG9uc2VlIGFkZHJlc3Mgd2l0aCBhIG5ldyBvbmUuCiAgICBAcGFyYW0gX25ld0FkZHJlc3MgbmV3IGFkZHJlc3MgaXMgc2V0CiAgICAqLwogICAgZnVuY3Rpb24gY2hhbmdlU3BvbnNlZUFkZHJlc3MoYWRkcmVzcyBfbmV3QWRkcmVzcykgb25seUFjY291bnRBZGRyZXNzRm9yU3BvbnNlZSB7CgogICAgICAgIHNwb25zZWVBZGRyZXNzID0gX25ld0FkZHJlc3M7CgogICAgICAgIC8vIHNlbmQgRXZlbnQKICAgICAgICBMb2dDaGFuZ2VTcG9uc2VlQWRkcmVzcyhfbmV3QWRkcmVzcyk7CiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIFRoaXMgbWV0aG9kIHdpbGwgY2hhbmdlIGlzUGF5YWJsZUVuYWJsZWQgZmxhZy4KICAgICovCiAgICBmdW5jdGlvbiBjaGFuZ2VJc1BheWFibGVFbmFibGVkKCkgb25seU11bHRpU2lnIHsKCiAgICAgICAgaXNQYXlhYmxlRW5hYmxlZCA9ICFpc1BheWFibGVFbmFibGVkOwoKICAgICAgICAvLyBzZW5kIEV2ZW50CiAgICAgICAgTG9nQ2hhbmdlSXNQYXlhYmxlRW5hYmxlZChpc1BheWFibGVFbmFibGVkKTsKICAgIH0KfQ=='.
	

]
