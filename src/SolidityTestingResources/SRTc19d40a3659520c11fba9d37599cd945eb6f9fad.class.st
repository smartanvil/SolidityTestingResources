Class {
	#name : #SRTc19d40a3659520c11fba9d37599cd945eb6f9fad,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc19d40a3659520c11fba9d37599cd945eb6f9fad >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgoKY29udHJhY3QgVG9rZW4gewogICAgLyogVGhpcyBpcyBhIHNsaWdodCBjaGFuZ2UgdG8gdGhlIEVSQzIwIGJhc2Ugc3RhbmRhcmQuCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKICAgIGlzIHJlcGxhY2VkIHdpdGg6CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIFRoaXMgYXV0b21hdGljYWxseSBjcmVhdGVzIGEgZ2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgdG90YWxTdXBwbHkuCiAgICBUaGlzIGlzIG1vdmVkIHRvIHRoZSBiYXNlIGNvbnRyYWN0IHNpbmNlIHB1YmxpYyBnZXR0ZXIgZnVuY3Rpb25zIGFyZSBub3QKICAgIGN1cnJlbnRseSByZWNvZ25pc2VkIGFzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBtYXRjaGluZyBhYnN0cmFjdAogICAgZnVuY3Rpb24gYnkgdGhlIGNvbXBpbGVyLgogICAgKi8KICAgIC8vLyB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCgpjb250cmFjdCBBYnN0cmFjdFNpbmd1bGFyRFRWVG9rZW4gaXMgVG9rZW4gewoKfQoKCi8vLyBAdGl0bGUgVG9rZW4gQ3JlYXRpb24gY29udHJhY3QgLSBJbXBsZW1lbnRzIHRva2VuIGNyZWF0aW9uIGZ1bmN0aW9uYWxpdHkuCi8vLyBAYXV0aG9yIFN0ZWZhbiBHZW9yZ2UgLSA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI4OGZiZmNlZGVlZTllNmE2ZWZlZGU3ZmFlZmVkYzhlYmU3ZTZmYmVkZTZmYmYxZmJhNmU2ZWRmYyI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+Ci8vLyBAYXV0aG9yIFJhenZhbiBQb3AgLSA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSIzNTQ3NTQ0ZjQzNTQ1YjFiNDU1YTQ1NzU1NjVhNWI0NjUwNWI0NjRjNDYxYjViNTA0MSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+Ci8vLyBAYXV0aG9yIE1pbGFkIE1vc3RhdmkgLSA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJiNWQ4ZGNkOWQ0ZDE5YmQ4ZGFjNmMxZDRjM2RjZjVkNmRhZGJjNmQwZGJjNmNjYzY5YmRiZDBjMSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+CmNvbnRyYWN0IFNpbmd1bGFyRFRWTGF1bmNoIHsKICAgIHN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICIwLjEuMCI7CgogICAgZXZlbnQgQ29udHJpYnV0ZWQoYWRkcmVzcyBpbmRleGVkIGNvbnRyaWJ1dG9yLCB1aW50IGNvbnRyaWJ1dGlvbiwgdWludCB0b2tlbnMpOwoKICAgIC8qCiAgICAgKiAgRXh0ZXJuYWwgY29udHJhY3RzCiAgICAgKi8KICAgIEFic3RyYWN0U2luZ3VsYXJEVFZUb2tlbiBwdWJsaWMgc2luZ3VsYXJEVFZUb2tlbjsKICAgIGFkZHJlc3MgcHVibGljIHdvcmtzaG9wOwogICAgYWRkcmVzcyBwdWJsaWMgU2luZ3VsYXJEVFZXb3Jrc2hvcCA9IDB4Yzc4MzEwMjMxYUE1M2JEM0QwRkVBMkY4YzcwNUM2NzczMDkyOUQ4ZjsKICAgIHVpbnQgcHVibGljIFNpbmd1bGFyRFRWV29ya3Nob3BGZWU7CgogICAgLyoKICAgICAqICBDb25zdGFudHMKICAgICAqLwogICAgdWludCBwdWJsaWMgQ0FQOyAvLyBpbiB3ZWkgc2NhbGUgb2YgdG9rZW5zCiAgICB1aW50IHB1YmxpYyBEVVJBVElPTjsgLy8gaW4gc2Vjb25kcwogICAgdWludCBwdWJsaWMgVE9LRU5fVEFSR0VUOyAvLyBHb2FsIHRocmVzaG9sZCBpbiB3ZWkgc2NhbGUgb2YgdG9rZW5zCgogICAgLyoKICAgICAqICBFbnVtcwogICAgICovCiAgICBlbnVtIFN0YWdlcyB7CiAgICAgICAgRGVwbG95ZWQsCiAgICAgICAgR29pbmdBbmRHb2FsTm90UmVhY2hlZCwKICAgICAgICBFbmRlZEFuZEdvYWxOb3RSZWFjaGVkLAogICAgICAgIEdvaW5nQW5kR29hbFJlYWNoZWQsCiAgICAgICAgRW5kZWRBbmRHb2FsUmVhY2hlZAogICAgfQoKICAgIC8qCiAgICAgKiAgU3RvcmFnZQogICAgICovCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIHVpbnQgcHVibGljIHN0YXJ0RGF0ZTsKICAgIHVpbnQgcHVibGljIGZ1bmRCYWxhbmNlOwogICAgdWludCBwdWJsaWMgdmFsdWVQZXJUb2tlbjsgLy9pbiB3ZWkKICAgIHVpbnQgcHVibGljIHRva2Vuc1NlbnQ7CgogICAgLy8gcGFydGljaXBhbnQgYWRkcmVzcyA9PiB2YWx1ZSBpbiBXZWkKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGNvbnRyaWJ1dGlvbnM7CgogICAgLy8gcGFydGljaXBhbnQgYWRkcmVzcyA9PiB0b2tlbiBhbW91bnQgaW4gd2VpIHNjYWxlCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBzZW50VG9rZW5zOwoKICAgIC8vIEluaXRpYWxpemUgc3RhZ2UKICAgIFN0YWdlcyBwdWJsaWMgc3RhZ2UgPSBTdGFnZXMuRGVwbG95ZWQ7CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIC8vIE9ubHkgb3duZXIgaXMgYWxsb3dlZCB0byBkbyB0aGlzIGFjdGlvbi4KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBhdFN0YWdlKFN0YWdlcyBfc3RhZ2UpIHsKICAgICAgICBpZiAoc3RhZ2UgIT0gX3N0YWdlKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGF0U3RhZ2VPUihTdGFnZXMgX3N0YWdlMSwgU3RhZ2VzIF9zdGFnZTIpIHsKICAgICAgICBpZiAoc3RhZ2UgIT0gX3N0YWdlMSAmJiBzdGFnZSAhPSBfc3RhZ2UyKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHRpbWVkVHJhbnNpdGlvbnMoKSB7CiAgICAgICAgdWludCB0aW1lRWxhcHNlZCA9IG5vdyAtIHN0YXJ0RGF0ZTsKCiAgICAgICAgaWYgKHRpbWVFbGFwc2VkID49IERVUkFUSU9OKSB7CiAgICAgICAgICAgIGlmIChzdGFnZSA9PSBTdGFnZXMuR29pbmdBbmRHb2FsTm90UmVhY2hlZCkgewogICAgICAgICAgICAgICAgc3RhZ2UgPSBTdGFnZXMuRW5kZWRBbmRHb2FsTm90UmVhY2hlZDsKICAgICAgICAgICAgfSBlbHNlIGlmIChzdGFnZSA9PSBTdGFnZXMuR29pbmdBbmRHb2FsUmVhY2hlZCkgewogICAgICAgICAgICAgICAgc3RhZ2UgPSBTdGFnZXMuRW5kZWRBbmRHb2FsUmVhY2hlZDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIC8qCiAgICAgKiAgQ29udHJhY3QgZnVuY3Rpb25zCiAgICAgKi8KICAgIC8vLyBkZXYgVmFsaWRhdGVzIGludmFyaWFudHMuCiAgICBmdW5jdGlvbiBjaGVja0ludmFyaWFudHMoKSBjb25zdGFudCBpbnRlcm5hbCB7CiAgICAgICAgaWYgKGZ1bmRCYWxhbmNlID4gdGhpcy5iYWxhbmNlKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBDYW4gYmUgdHJpZ2dlcmVkIGlmIGFuIGludmFyaWFudCBmYWlscy4KICAgIGZ1bmN0aW9uIGVtZXJnZW5jeUNhbGwoKQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgaWYgKGZ1bmRCYWxhbmNlID4gdGhpcy5iYWxhbmNlKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmJhbGFuY2UgPiAwICYmICFTaW5ndWxhckRUVldvcmtzaG9wLnNlbmQodGhpcy5iYWxhbmNlKSkgewogICAgICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgdXNlciB0byBjcmVhdGUgdG9rZW5zIGlmIHRva2VuIGNyZWF0aW9uIGlzIHN0aWxsIGdvaW5nIGFuZCBjYXAgbm90IHJlYWNoZWQuIFJldHVybnMgdG9rZW4gY291bnQuCiAgICBmdW5jdGlvbiBmdW5kKCkKICAgICAgICBwdWJsaWMKICAgICAgICB0aW1lZFRyYW5zaXRpb25zCiAgICAgICAgYXRTdGFnZU9SKFN0YWdlcy5Hb2luZ0FuZEdvYWxOb3RSZWFjaGVkLCBTdGFnZXMuR29pbmdBbmRHb2FsUmVhY2hlZCkKICAgICAgICBwYXlhYmxlCiAgICAgICAgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICB1aW50IHRva2VuQ291bnQgPSAobXNnLnZhbHVlICogKDEwKioxOCkpIC8gdmFsdWVQZXJUb2tlbjsgLy8gVG9rZW4gY291bnQgaW4gd2VpIGlzIHJvdW5kZWQgZG93bi4gU2VudCBFVEggc2hvdWxkIGJlIG11bHRpcGxlcyBvZiB2YWx1ZVBlclRva2VuLgogICAgICAgIHJlcXVpcmUodG9rZW5Db3VudCA+IDApOwogICAgICAgIGlmICh0b2tlbnNTZW50ICsgdG9rZW5Db3VudCA+IENBUCkgewogICAgICAgICAgICAvLyBVc2VyIHdhbnRzIHRvIGNyZWF0ZSBtb3JlIHRva2VucyB0aGFuIGF2YWlsYWJsZS4gU2V0IHRva2VucyB0byBwb3NzaWJsZSBtYXhpbXVtLgogICAgICAgICAgICB0b2tlbkNvdW50ID0gQ0FQIC0gdG9rZW5zU2VudDsKICAgICAgICB9CiAgICAgICAgdG9rZW5zU2VudCArPSB0b2tlbkNvdW50OwoKICAgICAgICB1aW50IGNvbnRyaWJ1dGlvbiA9ICh0b2tlbkNvdW50ICogdmFsdWVQZXJUb2tlbikgLyAoMTAqKjE4KTsgLy8gRXRoZXIgc3BlbnQgYnkgdXNlci4KICAgICAgICAvLyBTZW5kIGNoYW5nZSBiYWNrIHRvIHVzZXIuCiAgICAgICAgaWYgKG1zZy52YWx1ZSA+IGNvbnRyaWJ1dGlvbiAmJiAhbXNnLnNlbmRlci5zZW5kKG1zZy52YWx1ZSAtIGNvbnRyaWJ1dGlvbikpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIC8vIFVwZGF0ZSBmdW5kIGFuZCB1c2VyJ3MgYmFsYW5jZSBhbmQgdG90YWwgc3VwcGx5IG9mIHRva2Vucy4KICAgICAgICBmdW5kQmFsYW5jZSArPSBjb250cmlidXRpb247CiAgICAgICAgY29udHJpYnV0aW9uc1ttc2cuc2VuZGVyXSArPSBjb250cmlidXRpb247CiAgICAgICAgc2VudFRva2Vuc1ttc2cuc2VuZGVyXSArPSB0b2tlbkNvdW50OwogICAgICAgIGlmICghc2luZ3VsYXJEVFZUb2tlbi50cmFuc2Zlcihtc2cuc2VuZGVyLCB0b2tlbkNvdW50KSkgewogICAgICAgICAgICAvLyBUb2tlbnMgY291bGQgbm90IGJlIGlzc3VlZC4KICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIC8vIFVwZGF0ZSBzdGFnZQogICAgICAgIGlmIChzdGFnZSA9PSBTdGFnZXMuR29pbmdBbmRHb2FsTm90UmVhY2hlZCkgewogICAgICAgICAgICBpZiAodG9rZW5zU2VudCA+PSBUT0tFTl9UQVJHRVQpIHsKICAgICAgICAgICAgICAgIHN0YWdlID0gU3RhZ2VzLkdvaW5nQW5kR29hbFJlYWNoZWQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gbm90IGFuIGVsc2UgY2xhdXNlIGZvciB0aGUgZWRnZSBjYXNlIHRoYXQgdGhlIENBUCBhbmQgVE9LRU5fVEFSR0VUIGFyZSByZWFjaGVkIGluIG9uZSBjYWxsCiAgICAgICAgaWYgKHN0YWdlID09IFN0YWdlcy5Hb2luZ0FuZEdvYWxSZWFjaGVkKSB7CiAgICAgICAgICAgIGlmICh0b2tlbnNTZW50ID09IENBUCkgewogICAgICAgICAgICAgICAgc3RhZ2UgPSBTdGFnZXMuRW5kZWRBbmRHb2FsUmVhY2hlZDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjaGVja0ludmFyaWFudHMoKTsKCiAgICAgICAgQ29udHJpYnV0ZWQobXNnLnNlbmRlciwgY29udHJpYnV0aW9uLCB0b2tlbkNvdW50KTsKCiAgICAgICAgcmV0dXJuIHRva2VuQ291bnQ7CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIHVzZXIgdG8gd2l0aGRyYXcgRVRIIGlmIHRva2VuIGNyZWF0aW9uIHBlcmlvZCBlbmRlZCBhbmQgdGFyZ2V0IHdhcyBub3QgcmVhY2hlZC4gUmV0dXJucyBjb250cmlidXRpb24uCiAgICBmdW5jdGlvbiB3aXRoZHJhd0NvbnRyaWJ1dGlvbigpCiAgICAgICAgcHVibGljCiAgICAgICAgdGltZWRUcmFuc2l0aW9ucwogICAgICAgIGF0U3RhZ2UoU3RhZ2VzLkVuZGVkQW5kR29hbE5vdFJlYWNoZWQpCiAgICAgICAgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICAvLyBXZSBnZXQgYmFjayB0aGUgdG9rZW5zIGZyb20gdGhlIGNvbnRyaWJ1dG9yIGJlZm9yZSBnaXZpbmcgYmFjayBoaXMgY29udHJpYnV0aW9uCiAgICAgICAgdWludCB0b2tlbnNSZWNlaXZlZCA9IHNlbnRUb2tlbnNbbXNnLnNlbmRlcl07CiAgICAgICAgc2VudFRva2Vuc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgaWYgKCFzaW5ndWxhckRUVlRva2VuLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBvd25lciwgdG9rZW5zUmVjZWl2ZWQpKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KCiAgICAgICAgLy8gVXBkYXRlIGZ1bmQncyBhbmQgdXNlcidzIGJhbGFuY2UgYW5kIHRvdGFsIHN1cHBseSBvZiB0b2tlbnMuCiAgICAgICAgdWludCBjb250cmlidXRpb24gPSBjb250cmlidXRpb25zW21zZy5zZW5kZXJdOwogICAgICAgIGNvbnRyaWJ1dGlvbnNbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIGZ1bmRCYWxhbmNlIC09IGNvbnRyaWJ1dGlvbjsKICAgICAgICAvLyBTZW5kIEVUSCBiYWNrIHRvIHVzZXIuCiAgICAgICAgaWYgKGNvbnRyaWJ1dGlvbiA+IDApIHsKICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcihjb250cmlidXRpb24pOwogICAgICAgIH0KICAgICAgICBjaGVja0ludmFyaWFudHMoKTsKICAgICAgICByZXR1cm4gY29udHJpYnV0aW9uOwogICAgfQoKICAgIC8vLyBAZGV2IFdpdGhkcmF3cyBFVEggdG8gd29ya3Nob3AgYWRkcmVzcy4gUmV0dXJucyBzdWNjZXNzLgogICAgZnVuY3Rpb24gd2l0aGRyYXdGb3JXb3Jrc2hvcCgpCiAgICAgICAgcHVibGljCiAgICAgICAgdGltZWRUcmFuc2l0aW9ucwogICAgICAgIGF0U3RhZ2UoU3RhZ2VzLkVuZGVkQW5kR29hbFJlYWNoZWQpCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICB1aW50IHZhbHVlID0gZnVuZEJhbGFuY2U7CiAgICAgICAgZnVuZEJhbGFuY2UgPSAwOwoKICAgICAgICByZXF1aXJlKHZhbHVlID4gMCk7CgogICAgICAgIHVpbnQgbmV0d29ya0ZlZSA9IHZhbHVlICogU2luZ3VsYXJEVFZXb3Jrc2hvcEZlZSAvIDEwMDsKICAgICAgICB3b3Jrc2hvcC50cmFuc2Zlcih2YWx1ZSAtIG5ldHdvcmtGZWUpOwogICAgICAgIFNpbmd1bGFyRFRWV29ya3Nob3AudHJhbnNmZXIobmV0d29ya0ZlZSk7CgogICAgICAgIHVpbnQgcmVtYWluaW5nVG9rZW5zID0gQ0FQIC0gdG9rZW5zU2VudDsKICAgICAgICBpZiAocmVtYWluaW5nVG9rZW5zID4gMCAmJiAhc2luZ3VsYXJEVFZUb2tlbi50cmFuc2Zlcihvd25lciwgcmVtYWluaW5nVG9rZW5zKSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CgogICAgICAgIGNoZWNrSW52YXJpYW50cygpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IEFsbG93cyBvd25lciB0byBnZXQgYmFjayB1bnNlbnQgdG9rZW5zIGluIGNhc2Ugb2YgbGF1bmNoIGZhaWx1cmUgKEVuZGVkQW5kR29hbE5vdFJlYWNoZWQpLgogICAgZnVuY3Rpb24gd2l0aGRyYXdVbnNlbnRUb2tlbnNGb3JPd25lcigpCiAgICAgICAgcHVibGljCiAgICAgICAgdGltZWRUcmFuc2l0aW9ucwogICAgICAgIGF0U3RhZ2UoU3RhZ2VzLkVuZGVkQW5kR29hbE5vdFJlYWNoZWQpCiAgICAgICAgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICB1aW50IHJlbWFpbmluZ1Rva2VucyA9IENBUCAtIHRva2Vuc1NlbnQ7CiAgICAgICAgaWYgKHJlbWFpbmluZ1Rva2VucyA+IDAgJiYgIXNpbmd1bGFyRFRWVG9rZW4udHJhbnNmZXIob3duZXIsIHJlbWFpbmluZ1Rva2VucykpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQoKICAgICAgICBjaGVja0ludmFyaWFudHMoKTsKICAgICAgICByZXR1cm4gcmVtYWluaW5nVG9rZW5zOwogICAgfQoKICAgIC8vLyBAZGV2IFNldHMgdG9rZW4gdmFsdWUgaW4gV2VpLgogICAgLy8vIEBwYXJhbSB2YWx1ZUluV2VpIE5ldyB2YWx1ZS4KICAgIGZ1bmN0aW9uIGNoYW5nZVZhbHVlUGVyVG9rZW4odWludCB2YWx1ZUluV2VpKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgICAgIGF0U3RhZ2UoU3RhZ2VzLkRlcGxveWVkKQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgdmFsdWVQZXJUb2tlbiA9IHZhbHVlSW5XZWk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gdXBkYXRlU3RhZ2UgYWxsb3dzIGNhbGxzIHRvIHJlY2VpdmUgY29ycmVjdCBzdGFnZS4gSXQgY2FuIGJlIHVzZWQgZm9yIHRyYW5zYWN0aW9ucyBidXQgaXMgbm90IHBhcnQgb2YgdGhlIHJlZ3VsYXIgdG9rZW4gY3JlYXRpb24gcm91dGluZS4KICAgIC8vIEl0IGlzIG5vdCBtYXJrZWQgYXMgY29uc3RhbnQgYmVjYXVzZSB0aW1lZFRyYW5zaXRpb25zIG1vZGlmaWVyIGlzIGFsdGVyaW5nIHN0YXRlIGFuZCBjb25zdGFudCBpcyBub3QgeWV0IGVuZm9yY2VkIGJ5IHNvbGMuCiAgICAvLy8gQGRldiByZXR1cm5zIGNvcnJlY3Qgc3RhZ2UsIGV2ZW4gaWYgYSBmdW5jdGlvbiB3aXRoIHRpbWVkVHJhbnNpdGlvbnMgbW9kaWZpZXIgaGFzIG5vdCB5ZXQgYmVlbiBjYWxsZWQgc3VjY2Vzc2Z1bGx5LgogICAgZnVuY3Rpb24gdXBkYXRlU3RhZ2UoKQogICAgICAgIHB1YmxpYwogICAgICAgIHRpbWVkVHJhbnNpdGlvbnMKICAgICAgICByZXR1cm5zIChTdGFnZXMpCiAgICB7CiAgICAgICAgcmV0dXJuIHN0YWdlOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0KCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgICAgICBhdFN0YWdlKFN0YWdlcy5EZXBsb3llZCkKICAgICAgICByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIGlmICghc2luZ3VsYXJEVFZUb2tlbi50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgQ0FQKSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CgogICAgICAgIHN0YXJ0RGF0ZSA9IG5vdzsKICAgICAgICBzdGFnZSA9IFN0YWdlcy5Hb2luZ0FuZEdvYWxOb3RSZWFjaGVkOwoKICAgICAgICBjaGVja0ludmFyaWFudHMoKTsKICAgICAgICByZXR1cm4gc3RhcnREYXRlOwogICAgfQoKICAgIC8vLyBAZGV2IENvbnRyYWN0IGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHNldHMgb3duZXIgYW5kIHN0YXJ0IGRhdGUuCiAgICBmdW5jdGlvbiBTaW5ndWxhckRUVkxhdW5jaCgKICAgICAgICBhZGRyZXNzIHNpbmd1bGFyRFRWVG9rZW5BZGRyZXNzLAogICAgICAgIGFkZHJlc3MgX3dvcmtzaG9wLAogICAgICAgIGFkZHJlc3MgX293bmVyLAogICAgICAgIHVpbnQgX3RvdGFsLAogICAgICAgIHVpbnQgX3VuaXRfcHJpY2UsCiAgICAgICAgdWludCBfZHVyYXRpb24sCiAgICAgICAgdWludCBfdGhyZXNob2xkLAogICAgICAgIHVpbnQgX3Npbmd1bGFyZHR2d29za2hvcF9mZWUKICAgICAgICApIHsKICAgICAgICBzaW5ndWxhckRUVlRva2VuID0gQWJzdHJhY3RTaW5ndWxhckRUVlRva2VuKHNpbmd1bGFyRFRWVG9rZW5BZGRyZXNzKTsKICAgICAgICB3b3Jrc2hvcCA9IF93b3Jrc2hvcDsKICAgICAgICBvd25lciA9IF9vd25lcjsKICAgICAgICBDQVAgPSBfdG90YWw7IC8vIFRvdGFsIG51bWJlciBvZiB0b2tlbnMgKHdlaSBzY2FsZSkKICAgICAgICB2YWx1ZVBlclRva2VuID0gX3VuaXRfcHJpY2U7IC8vIHdlaSBwZXIgdG9rZW4KICAgICAgICBEVVJBVElPTiA9IF9kdXJhdGlvbjsgLy8gaW4gc2Vjb25kcwogICAgICAgIFRPS0VOX1RBUkdFVCA9IF90aHJlc2hvbGQ7IC8vIEdvYWwgdGhyZXNob2xkCiAgICAgICAgU2luZ3VsYXJEVFZXb3Jrc2hvcEZlZSA9IF9zaW5ndWxhcmR0dndvc2tob3BfZmVlOwogICAgfQoKICAgIC8vLyBAZGV2IEZhbGxiYWNrIGZ1bmN0aW9uIGFjdHMgYXMgZnVuZCgpIHdoZW4gc3RhZ2UgR29pbmdBbmRHb2FsTm90UmVhY2hlZAogICAgLy8vIG9yIEdvaW5nQW5kR29hbFJlYWNoZWQuIEFuZCBhY3QgYXMgd2l0aGRyYXdGdW5kaW5nKCkgd2hlbiBFbmRlZEFuZEdvYWxOb3RSZWFjaGVkLgogICAgLy8vIG90aGVyd2lzZSB0aHJvdy4KICAgIGZ1bmN0aW9uICgpCiAgICAgICAgcHVibGljCiAgICAgICAgcGF5YWJsZQogICAgewogICAgICAgIGlmIChzdGFnZSA9PSBTdGFnZXMuR29pbmdBbmRHb2FsTm90UmVhY2hlZCB8fCBzdGFnZSA9PSBTdGFnZXMuR29pbmdBbmRHb2FsUmVhY2hlZCkKICAgICAgICAgICAgZnVuZCgpOwogICAgICAgIGVsc2UgaWYgKHN0YWdlID09IFN0YWdlcy5FbmRlZEFuZEdvYWxOb3RSZWFjaGVkKQogICAgICAgICAgICB3aXRoZHJhd0NvbnRyaWJ1dGlvbigpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICB9Cn0='.
	

]
