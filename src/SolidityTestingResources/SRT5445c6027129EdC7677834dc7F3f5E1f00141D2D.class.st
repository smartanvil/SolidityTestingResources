Class {
	#name : #SRT5445c6027129EdC7677834dc7F3f5E1f00141D2D,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5445c6027129EdC7677834dc7F3f5E1f00141D2D >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8vIEBhZGRyZXNzIDB4NTQ0NWM2MDI3MTI5RWRDNzY3NzgzNGRjN0YzZjVFMWYwMDE0MUQyRAovLyBUaGUgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBHYW1lIElDTyBzbWFydCBjb250cmFjdCB3YXMgaW5zcGlyZWQgYnkKLy8gdGhlIEV0aGVyZXVtIHRva2VuIGNyZWF0aW9uIHR1dG9yaWFsLCB0aGUgRmlyc3RCbG9vZCB0b2tlbiwgYW5kIHRoZSBCQVQgdG9rZW4uCi8vIGNvbXBpbGVyOiAwLjQuMTcrY29tbWl0LmJkZWI5ZTUyCgovLy8vLy8vLy8vLy8vLy8KLy8gU0FGRSBNQVRIIC8vCi8vLy8vLy8vLy8vLy8vLwoKY29udHJhY3QgU2FmZU1hdGggewoKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludDI1NiB4LCB1aW50MjU2IHkpIGludGVybmFsIHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgeiA9IHggKyB5OwogICAgICAgIHJlcXVpcmUoKHogPj0geCkgJiYgKHogPj0geSkpOwogICAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVTdWJ0cmFjdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmVxdWlyZSh4ID49IHkpOwogICAgICAgIHVpbnQyNTYgeiA9IHggLSB5OwogICAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVNdWx0KHVpbnQyNTYgeCwgdWludDI1NiB5KSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHogPSB4ICogeTsKICAgICAgICByZXF1aXJlKCh4ID09IDApfHwoei94ID09IHkpKTsKICAgICAgICByZXR1cm4gejsKICAgIH0KCn0KCgovLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBTVEFOREFSRCBUT0tFTiAvLwovLy8vLy8vLy8vLy8vLy8vLy8vLwoKY29udHJhY3QgVG9rZW4gewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKLyogIEVSQyAyMCB0b2tlbiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgYm9vbCBhbGxvd1RyYW5zZmVyID0gZmFsc2U7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDAgJiYgYWxsb3dUcmFuc2ZlcikgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDAgJiYgYWxsb3dUcmFuc2ZlcikgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQp9CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy9HQU1FLkNPTSBJQ08gVE9LRU4vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8KCmNvbnRyYWN0IEdhbWVJQ08gaXMgU3RhbmRhcmRUb2tlbiwgU2FmZU1hdGggewogICAgLy8gRGVzY3JpcHRpdmUgcHJvcGVydGllcwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkdhbWUuY29tIFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkdUQyI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gIjEuMCI7CgogICAgLy8gQWNjb3VudCBmb3IgZXRoZXIgcHJvY2VlZC4KICAgIGFkZHJlc3MgcHVibGljIGV0aGVyUHJvY2VlZHNBY2NvdW50ID0gMHgwOwogICAgYWRkcmVzcyBwdWJsaWMgbXVsdGlXYWxsZXQgPSAweDA7CgogICAgLy8gVGhlc2UgcGFyYW1zIHNwZWNpZnkgdGhlIHN0YXJ0LCBlbmQsIG1pbiwgYW5kIG1heCBvZiB0aGUgc2FsZS4KICAgIGJvb2wgcHVibGljIGlzRmluYWxpemVkOwoKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzBUb3RhbFN1cHBseSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cxVG90YWxTdXBwbHkgPSAwOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93MlRvdGFsU3VwcGx5ID0gMDsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzNUb3RhbFN1cHBseSA9IDA7CgogICAgdWludDI1NiBwdWJsaWMgd2luZG93MFN0YXJ0VGltZSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cwRW5kVGltZSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cxU3RhcnRUaW1lID0gMDsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzFFbmRUaW1lID0gMDsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzJTdGFydFRpbWUgPSAwOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93MkVuZFRpbWUgPSAwOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93M1N0YXJ0VGltZSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3czRW5kVGltZSA9IDA7CgogICAgLy8gc2V0dGluZyB0aGUgY2FwYWNpdHkgb2YgZXZlcnkgcGFydCBvZiBpY28KICAgIHVpbnQyNTYgcHVibGljIHByZXNlcnZlZFRva2VucyA9IDEzMDAwMDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cwVG9rZW5DcmVhdGlvbkNhcCA9IDIwMDAwMDAwMCAqIDEwKipkZWNpbWFsczsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzFUb2tlbkNyZWF0aW9uQ2FwID0gMjAwMDAwMDAwICogMTAqKmRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93MlRva2VuQ3JlYXRpb25DYXAgPSAzMDAwMDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3czVG9rZW5DcmVhdGlvbkNhcCA9IDAgKiAxMCoqZGVjaW1hbHM7CgogICAgLy8gU2V0dGluZyB0aGUgZXhjaGFuZ2UgcmF0ZSBmb3IgdGhlIElDTy4KICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzBUb2tlbkV4Y2hhbmdlUmF0ZSA9IDUwMDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cxVG9rZW5FeGNoYW5nZVJhdGUgPSA0MDAwOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93MlRva2VuRXhjaGFuZ2VSYXRlID0gMzAwMDsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzNUb2tlbkV4Y2hhbmdlUmF0ZSA9IDA7CgogICAgdWludDI1NiBwdWJsaWMgcHJlSUNPTGltaXQgPSAwOwogICAgYm9vbCBwdWJsaWMgaW5zdGFudFRyYW5zZmVyID0gZmFsc2U7CgogICAgLy8gRXZlbnRzIGZvciBsb2dnaW5nIHJlZnVuZHMgYW5kIHRva2VuIGNyZWF0aW9uLgogICAgZXZlbnQgQ3JlYXRlR2FtZUljbyhhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBQcmVJQ09Ub2tlblB1c2hlZChhZGRyZXNzIGluZGV4ZWQgX2J1eWVyLCB1aW50MjU2IF9hbW91bnQpOwoKICAgIC8vIGNvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBHYW1lSUNPKCkKICAgIHsKICAgICAgICB0b3RhbFN1cHBseSAgICAgICAgICAgICA9IDIwMDAwMDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgICAgICAgaXNGaW5hbGl6ZWQgICAgICAgICAgICAgPSBmYWxzZTsKICAgICAgICBldGhlclByb2NlZWRzQWNjb3VudCAgICA9IG1zZy5zZW5kZXI7CiAgICB9CiAgICBmdW5jdGlvbiBhZGp1c3RUaW1lKAogICAgdWludDI1NiBfd2luZG93MFN0YXJ0VGltZSwgdWludDI1NiBfd2luZG93MEVuZFRpbWUsCiAgICB1aW50MjU2IF93aW5kb3cxU3RhcnRUaW1lLCB1aW50MjU2IF93aW5kb3cxRW5kVGltZSwKICAgIHVpbnQyNTYgX3dpbmRvdzJTdGFydFRpbWUsIHVpbnQyNTYgX3dpbmRvdzJFbmRUaW1lKXsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoZXJQcm9jZWVkc0FjY291bnQpOwogICAgICAgIHdpbmRvdzBTdGFydFRpbWUgPSBfd2luZG93MFN0YXJ0VGltZTsKICAgICAgICB3aW5kb3cwRW5kVGltZSA9IF93aW5kb3cwRW5kVGltZTsKICAgICAgICB3aW5kb3cxU3RhcnRUaW1lID0gX3dpbmRvdzFTdGFydFRpbWU7CiAgICAgICAgd2luZG93MUVuZFRpbWUgPSBfd2luZG93MUVuZFRpbWU7CiAgICAgICAgd2luZG93MlN0YXJ0VGltZSA9IF93aW5kb3cyU3RhcnRUaW1lOwogICAgICAgIHdpbmRvdzJFbmRUaW1lID0gX3dpbmRvdzJFbmRUaW1lOwogICAgfQogICAgZnVuY3Rpb24gYWRqdXN0U3VwcGx5KAogICAgdWludDI1NiBfd2luZG93MFRvdGFsU3VwcGx5LAogICAgdWludDI1NiBfd2luZG93MVRvdGFsU3VwcGx5LAogICAgdWludDI1NiBfd2luZG93MlRvdGFsU3VwcGx5KXsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoZXJQcm9jZWVkc0FjY291bnQpOwogICAgICAgIHdpbmRvdzBUb3RhbFN1cHBseSA9IF93aW5kb3cwVG90YWxTdXBwbHkgKiAxMCoqZGVjaW1hbHM7CiAgICAgICAgd2luZG93MVRvdGFsU3VwcGx5ID0gX3dpbmRvdzFUb3RhbFN1cHBseSAqIDEwKipkZWNpbWFsczsKICAgICAgICB3aW5kb3cyVG90YWxTdXBwbHkgPSBfd2luZG93MlRvdGFsU3VwcGx5ICogMTAqKmRlY2ltYWxzOwogICAgfQogICAgZnVuY3Rpb24gYWRqdXN0Q2FwKAogICAgdWludDI1NiBfcHJlc2VydmVkVG9rZW5zLAogICAgdWludDI1NiBfd2luZG93MFRva2VuQ3JlYXRpb25DYXAsCiAgICB1aW50MjU2IF93aW5kb3cxVG9rZW5DcmVhdGlvbkNhcCwKICAgIHVpbnQyNTYgX3dpbmRvdzJUb2tlbkNyZWF0aW9uQ2FwKXsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoZXJQcm9jZWVkc0FjY291bnQpOwogICAgICAgIHByZXNlcnZlZFRva2VucyA9IF9wcmVzZXJ2ZWRUb2tlbnMgKiAxMCoqZGVjaW1hbHM7CiAgICAgICAgd2luZG93MFRva2VuQ3JlYXRpb25DYXAgPSBfd2luZG93MFRva2VuQ3JlYXRpb25DYXAgKiAxMCoqZGVjaW1hbHM7CiAgICAgICAgd2luZG93MVRva2VuQ3JlYXRpb25DYXAgPSBfd2luZG93MVRva2VuQ3JlYXRpb25DYXAgKiAxMCoqZGVjaW1hbHM7CiAgICAgICAgd2luZG93MlRva2VuQ3JlYXRpb25DYXAgPSBfd2luZG93MlRva2VuQ3JlYXRpb25DYXAgKiAxMCoqZGVjaW1hbHM7CiAgICB9CiAgICBmdW5jdGlvbiBhZGp1c3RSYXRlKAogICAgdWludDI1NiBfd2luZG93MFRva2VuRXhjaGFuZ2VSYXRlLAogICAgdWludDI1NiBfd2luZG93MVRva2VuRXhjaGFuZ2VSYXRlLAogICAgdWludDI1NiBfd2luZG93MlRva2VuRXhjaGFuZ2VSYXRlKXsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoZXJQcm9jZWVkc0FjY291bnQpOwogICAgICAgIHdpbmRvdzBUb2tlbkV4Y2hhbmdlUmF0ZSA9IF93aW5kb3cwVG9rZW5FeGNoYW5nZVJhdGU7CiAgICAgICAgd2luZG93MVRva2VuRXhjaGFuZ2VSYXRlID0gX3dpbmRvdzFUb2tlbkV4Y2hhbmdlUmF0ZTsKICAgICAgICB3aW5kb3cyVG9rZW5FeGNoYW5nZVJhdGUgPSBfd2luZG93MlRva2VuRXhjaGFuZ2VSYXRlOwogICAgfQogICAgZnVuY3Rpb24gc2V0UHJvY2VlZHNBY2NvdW50KGFkZHJlc3MgX25ld0V0aGVyUHJvY2VlZHNBY2NvdW50KSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKICAgICAgICBldGhlclByb2NlZWRzQWNjb3VudCA9IF9uZXdFdGhlclByb2NlZWRzQWNjb3VudDsKICAgIH0KICAgIGZ1bmN0aW9uIHNldE11bHRpV2FsbGV0KGFkZHJlc3MgX25ld1dhbGxldCl7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKICAgICAgICBtdWx0aVdhbGxldCA9IF9uZXdXYWxsZXQ7CiAgICB9CiAgICBmdW5jdGlvbiBzZXRQcmVJQ09MaW1pdCh1aW50MjU2IF9wcmVJQ09MaW1pdCl7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKICAgICAgICBwcmVJQ09MaW1pdCA9IF9wcmVJQ09MaW1pdDsvLyAqIDEwKipkZWNpbWFsczsKICAgIH0KICAgIGZ1bmN0aW9uIHNldEluc3RhbnRUcmFuc2Zlcihib29sIF9pbnN0YW50VHJhbnNmZXIpewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBldGhlclByb2NlZWRzQWNjb3VudCk7CiAgICAgICAgaW5zdGFudFRyYW5zZmVyID0gX2luc3RhbnRUcmFuc2ZlcjsKICAgIH0KICAgIGZ1bmN0aW9uIHNldEFsbG93VHJhbnNmZXIoYm9vbCBfYWxsb3dUcmFuc2Zlcil7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKICAgICAgICBhbGxvd1RyYW5zZmVyID0gX2FsbG93VHJhbnNmZXI7CiAgICB9CgogICAgZnVuY3Rpb24gcHJlSUNPUHVzaChhZGRyZXNzIGJ1eWVyLCB1aW50MjU2IGFtb3VudCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBldGhlclByb2NlZWRzQWNjb3VudCk7CgogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gMDsKICAgICAgICB1aW50MjU2IGNoZWNrZWRTdXBwbHkgPSAwOwogICAgICAgIGNoZWNrZWRTdXBwbHkgPSBzYWZlQWRkKHdpbmRvdzBUb3RhbFN1cHBseSwgYW1vdW50KTsKICAgICAgICByZXF1aXJlKHdpbmRvdzBUb2tlbkNyZWF0aW9uQ2FwID49IGNoZWNrZWRTdXBwbHkpOwogICAgICAgIGJhbGFuY2VzW2J1eWVyXSArPSB0b2tlbnM7CiAgICAgICAgd2luZG93MFRvdGFsU3VwcGx5ID0gY2hlY2tlZFN1cHBseTsKICAgICAgICBQcmVJQ09Ub2tlblB1c2hlZChidXllciwgYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICBjcmVhdGUoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGNyZWF0ZSgpIGludGVybmFsewogICAgICAgIHJlcXVpcmUoIWlzRmluYWxpemVkKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSAwLjAxIGV0aGVyKTsKICAgICAgICB1aW50MjU2IHRva2VucyA9IDA7CiAgICAgICAgdWludDI1NiBjaGVja2VkU3VwcGx5ID0gMDsKCiAgICAgICAgaWYod2luZG93MFN0YXJ0VGltZSAhPSAwICYmIHdpbmRvdzBFbmRUaW1lICE9IDAgJiYgdGltZSgpID49IHdpbmRvdzBTdGFydFRpbWUgJiYgdGltZSgpIDw9IHdpbmRvdzBFbmRUaW1lKXsKICAgICAgICAgICAgaWYocHJlSUNPTGltaXQgPiAwKXsKICAgICAgICAgICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByZUlDT0xpbWl0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0b2tlbnMgPSBzYWZlTXVsdChtc2cudmFsdWUsIHdpbmRvdzBUb2tlbkV4Y2hhbmdlUmF0ZSk7CiAgICAgICAgICAgIGNoZWNrZWRTdXBwbHkgPSBzYWZlQWRkKHdpbmRvdzBUb3RhbFN1cHBseSwgdG9rZW5zKTsKICAgICAgICAgICAgcmVxdWlyZSh3aW5kb3cwVG9rZW5DcmVhdGlvbkNhcCA+PSBjaGVja2VkU3VwcGx5KTsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gdG9rZW5zOwogICAgICAgICAgICB3aW5kb3cwVG90YWxTdXBwbHkgPSBjaGVja2VkU3VwcGx5OwogICAgICAgICAgICBpZihtdWx0aVdhbGxldCAhPSAweDAgJiYgaW5zdGFudFRyYW5zZmVyKSBtdWx0aVdhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgICAgICAgICBDcmVhdGVHYW1lSWNvKG1zZy5zZW5kZXIsIHRva2Vucyk7CiAgICAgICAgfWVsc2UgaWYod2luZG93MVN0YXJ0VGltZSAhPSAwICYmIHdpbmRvdzFFbmRUaW1lIT0gMCAmJiB0aW1lKCkgPj0gd2luZG93MVN0YXJ0VGltZSAmJiB0aW1lKCkgPD0gd2luZG93MUVuZFRpbWUpewogICAgICAgICAgICB0b2tlbnMgPSBzYWZlTXVsdChtc2cudmFsdWUsIHdpbmRvdzFUb2tlbkV4Y2hhbmdlUmF0ZSk7CiAgICAgICAgICAgIGNoZWNrZWRTdXBwbHkgPSBzYWZlQWRkKHdpbmRvdzFUb3RhbFN1cHBseSwgdG9rZW5zKTsKICAgICAgICAgICAgcmVxdWlyZSh3aW5kb3cxVG9rZW5DcmVhdGlvbkNhcCA+PSBjaGVja2VkU3VwcGx5KTsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gdG9rZW5zOwogICAgICAgICAgICB3aW5kb3cxVG90YWxTdXBwbHkgPSBjaGVja2VkU3VwcGx5OwogICAgICAgICAgICBpZihtdWx0aVdhbGxldCAhPSAweDAgJiYgaW5zdGFudFRyYW5zZmVyKSBtdWx0aVdhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgICAgICAgICBDcmVhdGVHYW1lSWNvKG1zZy5zZW5kZXIsIHRva2Vucyk7CiAgICAgICAgfWVsc2UgaWYod2luZG93MlN0YXJ0VGltZSAhPSAwICYmIHdpbmRvdzJFbmRUaW1lICE9IDAgJiYgdGltZSgpID49IHdpbmRvdzJTdGFydFRpbWUgJiYgdGltZSgpIDw9IHdpbmRvdzJFbmRUaW1lKXsKICAgICAgICAgICAgdG9rZW5zID0gc2FmZU11bHQobXNnLnZhbHVlLCB3aW5kb3cyVG9rZW5FeGNoYW5nZVJhdGUpOwogICAgICAgICAgICBjaGVja2VkU3VwcGx5ID0gc2FmZUFkZCh3aW5kb3cyVG90YWxTdXBwbHksIHRva2Vucyk7CiAgICAgICAgICAgIHJlcXVpcmUod2luZG93MlRva2VuQ3JlYXRpb25DYXAgPj0gY2hlY2tlZFN1cHBseSk7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IHRva2VuczsKICAgICAgICAgICAgd2luZG93MlRvdGFsU3VwcGx5ID0gY2hlY2tlZFN1cHBseTsKICAgICAgICAgICAgaWYobXVsdGlXYWxsZXQgIT0gMHgwICYmIGluc3RhbnRUcmFuc2ZlcikgbXVsdGlXYWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICAgICAgQ3JlYXRlR2FtZUljbyhtc2cuc2VuZGVyLCB0b2tlbnMpOwogICAgICAgIH1lbHNlewogICAgICAgICAgICByZXF1aXJlKGZhbHNlKTsKICAgICAgICB9CgogICAgfQoKICAgIGZ1bmN0aW9uIHRpbWUoKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGJsb2NrLnRpbWVzdGFtcDsKICAgIH0KCiAgICBmdW5jdGlvbiB0b2RheSh1aW50IHN0YXJ0VGltZSkgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBkYXlGb3IodGltZSgpLCBzdGFydFRpbWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRheUZvcih1aW50IHRpbWVzdGFtcCwgdWludCBzdGFydFRpbWUpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdGltZXN0YW1wIDwgc3RhcnRUaW1lID8gMCA6IHNhZmVTdWJ0cmFjdCh0aW1lc3RhbXAsIHN0YXJ0VGltZSkgLyAyNCBob3VycyArIDE7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aERyYXcodWludDI1NiBfdmFsdWUpewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBldGhlclByb2NlZWRzQWNjb3VudCk7CiAgICAgICAgaWYobXVsdGlXYWxsZXQgIT0gMHgwKXsKICAgICAgICAgICAgaWYgKCFtdWx0aVdhbGxldC5zZW5kKF92YWx1ZSkpIHJlcXVpcmUoZmFsc2UpOwogICAgICAgIH1lbHNlewogICAgICAgICAgICBpZiAoIWV0aGVyUHJvY2VlZHNBY2NvdW50LnNlbmQoX3ZhbHVlKSkgcmVxdWlyZShmYWxzZSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmFsaXplKCkgewogICAgICAgIHJlcXVpcmUoIWlzRmluYWxpemVkKTsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoZXJQcm9jZWVkc0FjY291bnQpOwogICAgICAgIGlzRmluYWxpemVkID0gdHJ1ZTsKICAgICAgICBpZihtdWx0aVdhbGxldCAhPSAweDApewogICAgICAgICAgICBiYWxhbmNlc1ttdWx0aVdhbGxldF0gKz0gdG90YWxTdXBwbHktIHdpbmRvdzBUb3RhbFN1cHBseS0gd2luZG93MVRvdGFsU3VwcGx5IC0gd2luZG93MlRvdGFsU3VwcGx5OwogICAgICAgICAgICBpZiAoIW11bHRpV2FsbGV0LnNlbmQodGhpcy5iYWxhbmNlKSkgcmVxdWlyZShmYWxzZSk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGJhbGFuY2VzW2V0aGVyUHJvY2VlZHNBY2NvdW50XSArPSB0b3RhbFN1cHBseS0gd2luZG93MFRvdGFsU3VwcGx5LSB3aW5kb3cxVG90YWxTdXBwbHkgLSB3aW5kb3cyVG90YWxTdXBwbHk7CiAgICAgICAgICAgIGlmICghZXRoZXJQcm9jZWVkc0FjY291bnQuc2VuZCh0aGlzLmJhbGFuY2UpKSByZXF1aXJlKGZhbHNlKTsKICAgICAgICB9CiAgICB9Cgp9'.
	

]
