Class {
	#name : #SRT33b7a018934c6e90fd63189d7c4517f0f776142f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT33b7a018934c6e90fd63189d7c4517f0f776142f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKY29udHJhY3QgQ2hyb25vQmFua1BsYXRmb3JtIHsKICAgIG1hcHBpbmcoYnl0ZXMzMiA9PiBhZGRyZXNzKSBwdWJsaWMgcHJveGllczsKCiAgICBmdW5jdGlvbiBzeW1ib2xzKHVpbnQgX2lkeCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzMzIpOwogICAgZnVuY3Rpb24gc3ltYm9sc0NvdW50KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKICAgIGZ1bmN0aW9uIG5hbWUoYnl0ZXMzMiBfc3ltYm9sKSByZXR1cm5zKHN0cmluZyk7CiAgICBmdW5jdGlvbiBzZXRQcm94eShhZGRyZXNzIF9hZGRyZXNzLCBieXRlczMyIF9zeW1ib2wpIHJldHVybnModWludCBlcnJvckNvZGUpOwogICAgZnVuY3Rpb24gaXNDcmVhdGVkKGJ5dGVzMzIgX3N5bWJvbCkgY29uc3RhbnQgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBfb3duZXIsIGJ5dGVzMzIgX3N5bWJvbCkgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIG93bmVyKGJ5dGVzMzIgX3N5bWJvbCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KGJ5dGVzMzIgX3N5bWJvbCkgcmV0dXJucyh1aW50KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9ob2xkZXIsIGJ5dGVzMzIgX3N5bWJvbCkgcmV0dXJucyh1aW50KTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9zcGVuZGVyLCBieXRlczMyIF9zeW1ib2wpIHJldHVybnModWludCk7CiAgICBmdW5jdGlvbiBiYXNlVW5pdChieXRlczMyIF9zeW1ib2wpIHJldHVybnModWludDgpOwogICAgZnVuY3Rpb24gcHJveHlUcmFuc2ZlcldpdGhSZWZlcmVuY2UoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlczMyIF9zeW1ib2wsIHN0cmluZyBfcmVmZXJlbmNlLCBhZGRyZXNzIF9zZW5kZXIpIHJldHVybnModWludCBlcnJvckNvZGUpOwogICAgZnVuY3Rpb24gcHJveHlUcmFuc2ZlckZyb21XaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMzMiBfc3ltYm9sLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKHVpbnQgZXJyb3JDb2RlKTsKICAgIGZ1bmN0aW9uIHByb3h5QXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSwgYnl0ZXMzMiBfc3ltYm9sLCBhZGRyZXNzIF9zZW5kZXIpIHJldHVybnModWludCBlcnJvckNvZGUpOwogICAgZnVuY3Rpb24gaXNzdWVBc3NldChieXRlczMyIF9zeW1ib2wsIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX25hbWUsIHN0cmluZyBfZGVzY3JpcHRpb24sIHVpbnQ4IF9iYXNlVW5pdCwgYm9vbCBfaXNSZWlzc3VhYmxlKSByZXR1cm5zKHVpbnQgZXJyb3JDb2RlKTsKICAgIGZ1bmN0aW9uIGlzc3VlQXNzZXQoYnl0ZXMzMiBfc3ltYm9sLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9uYW1lLCBzdHJpbmcgX2Rlc2NyaXB0aW9uLCB1aW50OCBfYmFzZVVuaXQsIGJvb2wgX2lzUmVpc3N1YWJsZSwgYWRkcmVzcyBfYWNjb3VudCkgcmV0dXJucyh1aW50IGVycm9yQ29kZSk7CiAgICBmdW5jdGlvbiByZWlzc3VlQXNzZXQoYnl0ZXMzMiBfc3ltYm9sLCB1aW50IF92YWx1ZSkgcmV0dXJucyh1aW50IGVycm9yQ29kZSk7CiAgICBmdW5jdGlvbiByZXZva2VBc3NldChieXRlczMyIF9zeW1ib2wsIHVpbnQgX3ZhbHVlKSByZXR1cm5zKHVpbnQgZXJyb3JDb2RlKTsKICAgIGZ1bmN0aW9uIGlzUmVpc3N1YWJsZShieXRlczMyIF9zeW1ib2wpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcnNoaXAoYnl0ZXMzMiBfc3ltYm9sLCBhZGRyZXNzIF9uZXdPd25lcikgcmV0dXJucyh1aW50IGVycm9yQ29kZSk7Cn0KCmNvbnRyYWN0IENocm9ub0JhbmtBc3NldCB7CiAgICBmdW5jdGlvbiBfX3RyYW5zZmVyV2l0aFJlZmVyZW5jZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIHN0cmluZyBfcmVmZXJlbmNlLCBhZGRyZXNzIF9zZW5kZXIpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBfX3RyYW5zZmVyRnJvbVdpdGhSZWZlcmVuY2UoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX19hcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlLCBhZGRyZXNzIF9zZW5kZXIpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBfX3Byb2Nlc3MoYnl0ZXMgX2RhdGEsIGFkZHJlc3MgX3NlbmRlcikgcGF5YWJsZSB7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICB9Cn0KCmNvbnRyYWN0IEVSQzIwIHsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKfQoKLyoqCiAqIEB0aXRsZSBDaHJvbm9CYW5rIEFzc2V0IFByb3h5LgogKgogKiBQcm94eSBpbXBsZW1lbnRzIEVSQzIwIGludGVyZmFjZSBhbmQgYWN0cyBhcyBhIGdhdGV3YXkgdG8gYSBzaW5nbGUgcGxhdGZvcm0gYXNzZXQuCiAqIFByb3h5IGFkZHMgc3ltYm9sIGFuZCBjYWxsZXIoc2VuZGVyKSB3aGVuIGZvcndhcmRpbmcgcmVxdWVzdHMgdG8gcGxhdGZvcm0uCiAqIEV2ZXJ5IHJlcXVlc3QgdGhhdCBpcyBtYWRlIGJ5IGNhbGxlciBmaXJzdCBzZW50IHRvIHRoZSBzcGVjaWZpYyBhc3NldCBpbXBsZW1lbnRhdGlvbgogKiBjb250cmFjdCwgd2hpY2ggdGhlbiBjYWxscyBiYWNrIHRvIGJlIGZvcndhcmRlZCBvbnRvIHBsYXRmb3JtLgogKgogKiBDYWxscyBmbG93OiBDYWxsZXIgLT4KICogICAgICAgICAgICAgUHJveHkuZnVuYyguLi4pIC0+CiAqICAgICAgICAgICAgIEFzc2V0Ll9fZnVuYyguLi4sIENhbGxlci5hZGRyZXNzKSAtPgogKiAgICAgICAgICAgICBQcm94eS5fX2Z1bmMoLi4uLCBDYWxsZXIuYWRkcmVzcykgLT4KICogICAgICAgICAgICAgUGxhdGZvcm0ucHJveHlGdW5jKC4uLiwgc3ltYm9sLCBDYWxsZXIuYWRkcmVzcykKICoKICogQXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgaXMgbXV0YWJsZSwgYnV0IGVhY2ggdXNlciBoYXZlIGFuIG9wdGlvbiB0byBzdGljayB3aXRoCiAqIG9sZCBpbXBsZW1lbnRhdGlvbiwgdGhyb3VnaCBleHBsaWNpdCBkZWNpc2lvbiBtYWRlIGluIHRpbWVseSBtYW5uZXIsIGlmIGhlIGRvZXNuJ3QgYWdyZWUKICogd2l0aCBuZXcgcnVsZXMuCiAqIEVhY2ggdXNlciBoYXZlIGEgcG9zc2liaWxpdHkgdG8gdXBncmFkZSB0byBsYXRlc3QgYXNzZXQgY29udHJhY3QgaW1wbGVtZW50YXRpb24sIHdpdGhvdXQgdGhlCiAqIHBvc3NpYmlsaXR5IHRvIHJvbGxiYWNrLgogKgogKiBOb3RlOiBhbGwgdGhlIG5vbiBjb25zdGFudCBmdW5jdGlvbnMgcmV0dXJuIGZhbHNlIGluc3RlYWQgb2YgdGhyb3dpbmcgaW4gY2FzZSBpZiBzdGF0ZSBjaGFuZ2UKICogZGlkbid0IGhhcHBlbiB5ZXQuCiAqLwogY29udHJhY3QgQ2hyb25vQmFua0Fzc2V0UHJveHkgaXMgRVJDMjAgewoKICAgICAvLyBTdXBwb3J0cyBDaHJvbm9CYW5rUGxhdGZvcm0gYWJpbGl0eSB0byByZXR1cm4gZXJyb3IgY29kZXMgZnJvbSBtZXRob2RzCiAgICAgdWludCBjb25zdGFudCBPSyA9IDE7CgogICAgIC8vIEFzc2lnbmVkIHBsYXRmb3JtLCBpbW11dGFibGUuCiAgICAgQ2hyb25vQmFua1BsYXRmb3JtIHB1YmxpYyBjaHJvbm9CYW5rUGxhdGZvcm07CgogICAgIC8vIEFzc2lnbmVkIHN5bWJvbCwgaW1tdXRhYmxlLgogICAgIGJ5dGVzMzIgcHVibGljIHNtYmw7CgogICAgIC8vIEFzc2lnbmVkIG5hbWUsIGltbXV0YWJsZS4KICAgICBzdHJpbmcgcHVibGljIG5hbWU7CgogICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwoKICAgICAvKioKICAgICAgKiBTZXRzIHBsYXRmb3JtIGFkZHJlc3MsIGFzc2lnbnMgc3ltYm9sIGFuZCBuYW1lLgogICAgICAqCiAgICAgICogQ2FuIGJlIHNldCBvbmx5IG9uY2UuCiAgICAgICoKICAgICAgKiBAcGFyYW0gX2Nocm9ub0JhbmtQbGF0Zm9ybSBwbGF0Zm9ybSBjb250cmFjdCBhZGRyZXNzLgogICAgICAqIEBwYXJhbSBfc3ltYm9sIGFzc2lnbmVkIHN5bWJvbC4KICAgICAgKiBAcGFyYW0gX25hbWUgYXNzaWduZWQgbmFtZS4KICAgICAgKgogICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAgKi8KICAgICBmdW5jdGlvbiBpbml0KENocm9ub0JhbmtQbGF0Zm9ybSBfY2hyb25vQmFua1BsYXRmb3JtLCBzdHJpbmcgX3N5bWJvbCwgc3RyaW5nIF9uYW1lKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICAgaWYgKGFkZHJlc3MoY2hyb25vQmFua1BsYXRmb3JtKSAhPSAweDApIHsKICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgfQogICAgICAgICBjaHJvbm9CYW5rUGxhdGZvcm0gPSBfY2hyb25vQmFua1BsYXRmb3JtOwogICAgICAgICBzeW1ib2wgPSBfc3ltYm9sOwogICAgICAgICBzbWJsID0gc3RyaW5nVG9CeXRlczMyKF9zeW1ib2wpOwogICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KCiAgICAgZnVuY3Rpb24gc3RyaW5nVG9CeXRlczMyKHN0cmluZyBtZW1vcnkgc291cmNlKSByZXR1cm5zIChieXRlczMyIHJlc3VsdCkgewogICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgIHJlc3VsdCA6PSBtbG9hZChhZGQoc291cmNlLCAzMikpCiAgICAgICAgIH0KICAgICB9CgogICAgIC8qKgogICAgICAqIE9ubHkgcGxhdGZvcm0gaXMgYWxsb3dlZCB0byBjYWxsLgogICAgICAqLwogICAgIG1vZGlmaWVyIG9ubHlDaHJvbm9CYW5rUGxhdGZvcm0oKSB7CiAgICAgICAgIGlmIChtc2cuc2VuZGVyID09IGFkZHJlc3MoY2hyb25vQmFua1BsYXRmb3JtKSkgewogICAgICAgICAgICAgXzsKICAgICAgICAgfQogICAgIH0KCiAgICAgLyoqCiAgICAgICogT25seSBjdXJyZW50IGFzc2V0IG93bmVyIGlzIGFsbG93ZWQgdG8gY2FsbC4KICAgICAgKi8KICAgICBtb2RpZmllciBvbmx5QXNzZXRPd25lcigpIHsKICAgICAgICAgaWYgKGNocm9ub0JhbmtQbGF0Zm9ybS5pc093bmVyKG1zZy5zZW5kZXIsIHNtYmwpKSB7CiAgICAgICAgICAgICBfOwogICAgICAgICB9CiAgICAgfQoKICAgICAvKioKICAgICAgKiBSZXR1cm5zIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGZvciBjdXJyZW50IGNhbGxlci4KICAgICAgKgogICAgICAqIEByZXR1cm4gYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QuCiAgICAgICovCiAgICAgZnVuY3Rpb24gX2dldEFzc2V0KCkgaW50ZXJuYWwgcmV0dXJucyhDaHJvbm9CYW5rQXNzZXQpIHsKICAgICAgICAgcmV0dXJuIENocm9ub0JhbmtBc3NldChnZXRWZXJzaW9uRm9yKG1zZy5zZW5kZXIpKTsKICAgICB9CgogICAgIC8qKgogICAgICAqIFJldHVybnMgYXNzZXQgdG90YWwgc3VwcGx5LgogICAgICAqCiAgICAgICogQHJldHVybiBhc3NldCB0b3RhbCBzdXBwbHkuCiAgICAgICovCiAgICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICAgcmV0dXJuIGNocm9ub0JhbmtQbGF0Zm9ybS50b3RhbFN1cHBseShzbWJsKTsKICAgICB9CgogICAgIC8qKgogICAgICAqIFJldHVybnMgYXNzZXQgYmFsYW5jZSBmb3IgYSBwYXJ0aWN1bGFyIGhvbGRlci4KICAgICAgKgogICAgICAqIEBwYXJhbSBfb3duZXIgaG9sZGVyIGFkZHJlc3MuCiAgICAgICoKICAgICAgKiBAcmV0dXJuIGhvbGRlciBiYWxhbmNlLgogICAgICAqLwogICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgIHJldHVybiBjaHJvbm9CYW5rUGxhdGZvcm0uYmFsYW5jZU9mKF9vd25lciwgc21ibCk7CiAgICAgfQoKICAgICAvKioKICAgICAgKiBSZXR1cm5zIGFzc2V0IGFsbG93YW5jZSBmcm9tIG9uZSBob2xkZXIgdG8gYW5vdGhlci4KICAgICAgKgogICAgICAqIEBwYXJhbSBfZnJvbSBob2xkZXIgdGhhdCBhbGxvd2VkIHNwZW5kaW5nLgogICAgICAqIEBwYXJhbSBfc3BlbmRlciBob2xkZXIgdGhhdCBpcyBhbGxvd2VkIHRvIHNwZW5kLgogICAgICAqCiAgICAgICogQHJldHVybiBob2xkZXIgdG8gc3BlbmRlciBhbGxvd2FuY2UuCiAgICAgICovCiAgICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgICByZXR1cm4gY2hyb25vQmFua1BsYXRmb3JtLmFsbG93YW5jZShfZnJvbSwgX3NwZW5kZXIsIHNtYmwpOwogICAgIH0KCiAgICAgLyoqCiAgICAgICogUmV0dXJucyBhc3NldCBkZWNpbWFscy4KICAgICAgKgogICAgICAqIEByZXR1cm4gYXNzZXQgZGVjaW1hbHMuCiAgICAgICovCiAgICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBjb25zdGFudCByZXR1cm5zKHVpbnQ4KSB7CiAgICAgICAgIHJldHVybiBjaHJvbm9CYW5rUGxhdGZvcm0uYmFzZVVuaXQoc21ibCk7CiAgICAgfQoKICAgICAvKioKICAgICAgKiBUcmFuc2ZlcnMgYXNzZXQgYmFsYW5jZSBmcm9tIHRoZSBjYWxsZXIgdG8gc3BlY2lmaWVkIHJlY2VpdmVyLgogICAgICAqCiAgICAgICogQHBhcmFtIF90byBob2xkZXIgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICAqCiAgICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICAqLwogICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyhib29sKSB7CiAgICAgICAgIGlmIChfdG8gIT0gMHgwKSB7CiAgICAgICAgICAgcmV0dXJuIF90cmFuc2ZlcldpdGhSZWZlcmVuY2UoX3RvLCBfdmFsdWUsICIiKTsKICAgICAgICAgfQogICAgICAgICBlbHNlIHsKICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgfQogICAgIH0KCiAgICAgLyoqCiAgICAgICogVHJhbnNmZXJzIGFzc2V0IGJhbGFuY2UgZnJvbSB0aGUgY2FsbGVyIHRvIHNwZWNpZmllZCByZWNlaXZlciBhZGRpbmcgc3BlY2lmaWVkIGNvbW1lbnQuCiAgICAgICoKICAgICAgKiBAcGFyYW0gX3RvIGhvbGRlciBhZGRyZXNzIHRvIGdpdmUgdG8uCiAgICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgICogQHBhcmFtIF9yZWZlcmVuY2UgdHJhbnNmZXIgY29tbWVudCB0byBiZSBpbmNsdWRlZCBpbiBhIHBsYXRmb3JtJ3MgVHJhbnNmZXIgZXZlbnQuCiAgICAgICoKICAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgICovCiAgICAgZnVuY3Rpb24gdHJhbnNmZXJXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UpIHJldHVybnMoYm9vbCkgewogICAgICAgICBpZiAoX3RvICE9IDB4MCkgewogICAgICAgICAgICAgcmV0dXJuIF90cmFuc2ZlcldpdGhSZWZlcmVuY2UoX3RvLCBfdmFsdWUsIF9yZWZlcmVuY2UpOwogICAgICAgICB9CiAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICB9CiAgICAgfQoKICAgICAvKioKICAgICAgKiBSZXNvbHZlcyBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBmb3IgdGhlIGNhbGxlciBhbmQgZm9yd2FyZHMgdGhlcmUgYXJndW1lbnRzIGFsb25nIHdpdGgKICAgICAgKiB0aGUgY2FsbGVyIGFkZHJlc3MuCiAgICAgICoKICAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgICovCiAgICAgZnVuY3Rpb24gX3RyYW5zZmVyV2l0aFJlZmVyZW5jZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIHN0cmluZyBfcmVmZXJlbmNlKSBpbnRlcm5hbCByZXR1cm5zKGJvb2wpIHsKICAgICAgICAgcmV0dXJuIF9nZXRBc3NldCgpLl9fdHJhbnNmZXJXaXRoUmVmZXJlbmNlKF90bywgX3ZhbHVlLCBfcmVmZXJlbmNlLCBtc2cuc2VuZGVyKTsKICAgICB9CgogICAgIC8qKgogICAgICAqIFBlcmZvcm1zIHRyYW5zZmVyIGNhbGwgb24gdGhlIHBsYXRmb3JtIGJ5IHRoZSBuYW1lIG9mIHNwZWNpZmllZCBzZW5kZXIuCiAgICAgICoKICAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgYnkgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYXNzaWduZWQgdG8gc2VuZGVyLgogICAgICAqCiAgICAgICogQHBhcmFtIF90byBob2xkZXIgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICAqIEBwYXJhbSBfcmVmZXJlbmNlIHRyYW5zZmVyIGNvbW1lbnQgdG8gYmUgaW5jbHVkZWQgaW4gYSBwbGF0Zm9ybSdzIFRyYW5zZmVyIGV2ZW50LgogICAgICAqIEBwYXJhbSBfc2VuZGVyIGluaXRpYWwgY2FsbGVyLgogICAgICAqCiAgICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICAqLwogICAgIGZ1bmN0aW9uIF9fdHJhbnNmZXJXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UsIGFkZHJlc3MgX3NlbmRlcikgb25seUFjY2Vzcyhfc2VuZGVyKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICAgcmV0dXJuIGNocm9ub0JhbmtQbGF0Zm9ybS5wcm94eVRyYW5zZmVyV2l0aFJlZmVyZW5jZShfdG8sIF92YWx1ZSwgc21ibCwgX3JlZmVyZW5jZSwgX3NlbmRlcikgPT0gT0s7CiAgICAgfQoKICAgICAvKioKICAgICAgKiBQcmZvcm1zIGFsbG93YW5jZSB0cmFuc2ZlciBvZiBhc3NldCBiYWxhbmNlIGJldHdlZW4gaG9sZGVycy4KICAgICAgKgogICAgICAqIEBwYXJhbSBfZnJvbSBob2xkZXIgYWRkcmVzcyB0byB0YWtlIGZyb20uCiAgICAgICogQHBhcmFtIF90byBob2xkZXIgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICAqCiAgICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICAqLwogICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMoYm9vbCkgewogICAgICAgICBpZiAoX3RvICE9IDB4MCkgewogICAgICAgICAgICAgcmV0dXJuIF9nZXRBc3NldCgpLl9fdHJhbnNmZXJGcm9tV2l0aFJlZmVyZW5jZShfZnJvbSwgX3RvLCBfdmFsdWUsICIiLCBtc2cuc2VuZGVyKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICB9CgogICAgIC8qKgogICAgICAqIFBlcmZvcm1zIGFsbG93YW5jZSB0cmFuc2ZlciBjYWxsIG9uIHRoZSBwbGF0Zm9ybSBieSB0aGUgbmFtZSBvZiBzcGVjaWZpZWQgc2VuZGVyLgogICAgICAqCiAgICAgICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJ5IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFzc2lnbmVkIHRvIHNlbmRlci4KICAgICAgKgogICAgICAqIEBwYXJhbSBfZnJvbSBob2xkZXIgYWRkcmVzcyB0byB0YWtlIGZyb20uCiAgICAgICogQHBhcmFtIF90byBob2xkZXIgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICAqIEBwYXJhbSBfcmVmZXJlbmNlIHRyYW5zZmVyIGNvbW1lbnQgdG8gYmUgaW5jbHVkZWQgaW4gYSBwbGF0Zm9ybSdzIFRyYW5zZmVyIGV2ZW50LgogICAgICAqIEBwYXJhbSBfc2VuZGVyIGluaXRpYWwgY2FsbGVyLgogICAgICAqCiAgICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICAqLwogICAgIGZ1bmN0aW9uIF9fdHJhbnNmZXJGcm9tV2l0aFJlZmVyZW5jZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIHN0cmluZyBfcmVmZXJlbmNlLCBhZGRyZXNzIF9zZW5kZXIpIG9ubHlBY2Nlc3MoX3NlbmRlcikgcmV0dXJucyhib29sKSB7CiAgICAgICAgIHJldHVybiBjaHJvbm9CYW5rUGxhdGZvcm0ucHJveHlUcmFuc2ZlckZyb21XaXRoUmVmZXJlbmNlKF9mcm9tLCBfdG8sIF92YWx1ZSwgc21ibCwgX3JlZmVyZW5jZSwgX3NlbmRlcikgPT0gT0s7CiAgICAgfQoKICAgICAvKioKICAgICAgKiBTZXRzIGFzc2V0IHNwZW5kaW5nIGFsbG93YW5jZSBmb3IgYSBzcGVjaWZpZWQgc3BlbmRlci4KICAgICAgKgogICAgICAqIEBwYXJhbSBfc3BlbmRlciBob2xkZXIgYWRkcmVzcyB0byBzZXQgYWxsb3dhbmNlIHRvLgogICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIGFsbG93LgogICAgICAqCiAgICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICAqLwogICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMoYm9vbCkgewogICAgICAgICBpZiAoX3NwZW5kZXIgIT0gMHgwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9nZXRBc3NldCgpLl9fYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlLCBtc2cuc2VuZGVyKTsKICAgICAgICAgfQogICAgICAgICBlbHNlIHsKICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgfQogICAgIH0KCiAgICAgLyoqCiAgICAgICogUGVyZm9ybXMgYWxsb3dhbmNlIHNldHRpbmcgY2FsbCBvbiB0aGUgcGxhdGZvcm0gYnkgdGhlIG5hbWUgb2Ygc3BlY2lmaWVkIHNlbmRlci4KICAgICAgKgogICAgICAqIENhbiBvbmx5IGJlIGNhbGxlZCBieSBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhc3NpZ25lZCB0byBzZW5kZXIuCiAgICAgICoKICAgICAgKiBAcGFyYW0gX3NwZW5kZXIgaG9sZGVyIGFkZHJlc3MgdG8gc2V0IGFsbG93YW5jZSB0by4KICAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCB0byBhbGxvdy4KICAgICAgKiBAcGFyYW0gX3NlbmRlciBpbml0aWFsIGNhbGxlci4KICAgICAgKgogICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAgKi8KICAgICBmdW5jdGlvbiBfX2FwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUsIGFkZHJlc3MgX3NlbmRlcikgb25seUFjY2Vzcyhfc2VuZGVyKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICAgcmV0dXJuIGNocm9ub0JhbmtQbGF0Zm9ybS5wcm94eUFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSwgc21ibCwgX3NlbmRlcikgPT0gT0s7CiAgICAgfQoKICAgICAvKioKICAgICAgKiBFbWl0cyBFUkMyMCBUcmFuc2ZlciBldmVudCBvbiB0aGlzIGNvbnRyYWN0LgogICAgICAqCiAgICAgICogQ2FuIG9ubHkgYmUsIGFuZCwgY2FsbGVkIGJ5IGFzc2lnbmVkIHBsYXRmb3JtIHdoZW4gYXNzZXQgdHJhbnNmZXIgaGFwcGVucy4KICAgICAgKi8KICAgICBmdW5jdGlvbiBlbWl0VHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5Q2hyb25vQmFua1BsYXRmb3JtKCkgewogICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgIH0KCiAgICAgLyoqCiAgICAgICogRW1pdHMgRVJDMjAgQXBwcm92YWwgZXZlbnQgb24gdGhpcyBjb250cmFjdC4KICAgICAgKgogICAgICAqIENhbiBvbmx5IGJlLCBhbmQsIGNhbGxlZCBieSBhc3NpZ25lZCBwbGF0Zm9ybSB3aGVuIGFzc2V0IGFsbG93YW5jZSBzZXQgaGFwcGVucy4KICAgICAgKi8KICAgICBmdW5jdGlvbiBlbWl0QXBwcm92ZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgb25seUNocm9ub0JhbmtQbGF0Zm9ybSgpIHsKICAgICAgICAgQXBwcm92YWwoX2Zyb20sIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgIH0KCiAgICAgLyoqCiAgICAgICogUmVzb2x2ZXMgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgZm9yIHRoZSBjYWxsZXIgYW5kIGZvcndhcmRzIHRoZXJlIHRyYW5zYWN0aW9uIGRhdGEsCiAgICAgICogYWxvbmcgd2l0aCB0aGUgdmFsdWUuIFRoaXMgYWxsb3dzIGZvciBwcm94eSBpbnRlcmZhY2UgZ3Jvd3RoLgogICAgICAqLwogICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgICBfZ2V0QXNzZXQoKS5fX3Byb2Nlc3MudmFsdWUobXNnLnZhbHVlKShtc2cuZGF0YSwgbXNnLnNlbmRlcik7CiAgICAgfQoKICAgICAvKioKICAgICAgKiBJbmRpY2F0ZXMgYW4gdXBncmFkZSBmcmVlemUtdGltZSBzdGFydCwgYW5kIHRoZSBuZXh0IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0LgogICAgICAqLwogICAgIGV2ZW50IFVwZ3JhZGVQcm9wb3NhbChhZGRyZXNzIG5ld1ZlcnNpb24pOwoKICAgICAvLyBDdXJyZW50IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgYWRkcmVzcyBsYXRlc3RWZXJzaW9uOwoKICAgICAvLyBQcm9wb3NlZCBuZXh0IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgYWRkcmVzcyBwZW5kaW5nVmVyc2lvbjsKCiAgICAgLy8gVXBncmFkZSBmcmVlemUtdGltZSBzdGFydC4KICAgICB1aW50IHBlbmRpbmdWZXJzaW9uVGltZXN0YW1wOwoKICAgICAvLyBUaW1lc3BhbiBmb3IgdXNlcnMgdG8gcmV2aWV3IHRoZSBuZXcgaW1wbGVtZW50YXRpb24gYW5kIG1ha2UgZGVjaXNpb24uCiAgICAgdWludCBjb25zdGFudCBVUEdSQURFX0ZSRUVaRV9USU1FID0gMyBkYXlzOwoKICAgICAvLyBBc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzIHRoYXQgdXNlciBkZWNpZGVkIHRvIHN0aWNrIHdpdGguCiAgICAgLy8gMHgwIG1lYW5zIHRoYXQgdXNlciB1c2VzIGxhdGVzdCB2ZXJzaW9uLgogICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBhZGRyZXNzKSB1c2VyT3B0T3V0VmVyc2lvbjsKCiAgICAgLyoqCiAgICAgICogT25seSBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhc3NpZ25lZCB0byBzZW5kZXIgaXMgYWxsb3dlZCB0byBjYWxsLgogICAgICAqLwogICAgIG1vZGlmaWVyIG9ubHlBY2Nlc3MoYWRkcmVzcyBfc2VuZGVyKSB7CiAgICAgICAgIGlmIChnZXRWZXJzaW9uRm9yKF9zZW5kZXIpID09IG1zZy5zZW5kZXIpIHsKICAgICAgICAgICAgIF87CiAgICAgICAgIH0KICAgICB9CgogICAgIC8qKgogICAgICAqIFJldHVybnMgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcyBhc3NpZ25lZCB0byBzZW5kZXIuCiAgICAgICoKICAgICAgKiBAcGFyYW0gX3NlbmRlciBzZW5kZXIgYWRkcmVzcy4KICAgICAgKgogICAgICAqIEByZXR1cm4gYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAgKi8KICAgICBmdW5jdGlvbiBnZXRWZXJzaW9uRm9yKGFkZHJlc3MgX3NlbmRlcikgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKSB7CiAgICAgICAgIHJldHVybiB1c2VyT3B0T3V0VmVyc2lvbltfc2VuZGVyXSA9PSAwID8gbGF0ZXN0VmVyc2lvbiA6IHVzZXJPcHRPdXRWZXJzaW9uW19zZW5kZXJdOwogICAgIH0KCiAgICAgLyoqCiAgICAgICogUmV0dXJucyBjdXJyZW50IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgICoKICAgICAgKiBAcmV0dXJuIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgICovCiAgICAgZnVuY3Rpb24gZ2V0TGF0ZXN0VmVyc2lvbigpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcykgewogICAgICAgICByZXR1cm4gbGF0ZXN0VmVyc2lvbjsKICAgICB9CgogICAgIC8qKgogICAgICAqIFJldHVybnMgcHJvcG9zZWQgbmV4dCBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgICAqCiAgICAgICogQHJldHVybiBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgICAqLwogICAgIGZ1bmN0aW9uIGdldFBlbmRpbmdWZXJzaW9uKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKSB7CiAgICAgICAgIHJldHVybiBwZW5kaW5nVmVyc2lvbjsKICAgICB9CgogICAgIC8qKgogICAgICAqIFJldHVybnMgdXBncmFkZSBmcmVlemUtdGltZSBzdGFydC4KICAgICAgKgogICAgICAqIEByZXR1cm4gZnJlZXplLXRpbWUgc3RhcnQuCiAgICAgICovCiAgICAgZnVuY3Rpb24gZ2V0UGVuZGluZ1ZlcnNpb25UaW1lc3RhbXAoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICAgcmV0dXJuIHBlbmRpbmdWZXJzaW9uVGltZXN0YW1wOwogICAgIH0KCiAgICAgLyoqCiAgICAgICogUHJvcG9zZSBuZXh0IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgICoKICAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgYnkgY3VycmVudCBhc3NldCBvd25lci4KICAgICAgKgogICAgICAqIE5vdGU6IGZyZWV6ZS10aW1lIHNob3VsZCBub3QgYmUgYXBwbGllZCBmb3IgdGhlIGluaXRpYWwgc2V0dXAuCiAgICAgICoKICAgICAgKiBAcGFyYW0gX25ld1ZlcnNpb24gYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAgKgogICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAgKi8KICAgICBmdW5jdGlvbiBwcm9wb3NlVXBncmFkZShhZGRyZXNzIF9uZXdWZXJzaW9uKSBvbmx5QXNzZXRPd25lcigpIHJldHVybnMoYm9vbCkgewogICAgICAgICAvLyBTaG91bGQgbm90IGFscmVhZHkgYmUgaW4gdGhlIHVwZ3JhZGluZyBwcm9jZXNzLgogICAgICAgICBpZiAocGVuZGluZ1ZlcnNpb24gIT0gMHgwKSB7CiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgIH0KICAgICAgICAgLy8gTmV3IHZlcnNpb24gYWRkcmVzcyBzaG91bGQgYmUgb3RoZXIgdGhhbiAweDAuCiAgICAgICAgIGlmIChfbmV3VmVyc2lvbiA9PSAweDApIHsKICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgfQogICAgICAgICAvLyBEb24ndCBhcHBseSBmcmVlemUtdGltZSBmb3IgdGhlIGluaXRpYWwgc2V0dXAuCiAgICAgICAgIGlmIChsYXRlc3RWZXJzaW9uID09IDB4MCkgewogICAgICAgICAgICAgbGF0ZXN0VmVyc2lvbiA9IF9uZXdWZXJzaW9uOwogICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgIH0KICAgICAgICAgcGVuZGluZ1ZlcnNpb24gPSBfbmV3VmVyc2lvbjsKICAgICAgICAgcGVuZGluZ1ZlcnNpb25UaW1lc3RhbXAgPSBub3c7CiAgICAgICAgIFVwZ3JhZGVQcm9wb3NhbChfbmV3VmVyc2lvbik7CiAgICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KCiAgICAgLyoqCiAgICAgICogQ2FuY2VsIHRoZSBwZW5kaW5nIHVwZ3JhZGUgcHJvY2Vzcy4KICAgICAgKgogICAgICAqIENhbiBvbmx5IGJlIGNhbGxlZCBieSBjdXJyZW50IGFzc2V0IG93bmVyLgogICAgICAqCiAgICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICAqLwogICAgIGZ1bmN0aW9uIHB1cmdlVXBncmFkZSgpIG9ubHlBc3NldE93bmVyKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgIGlmIChwZW5kaW5nVmVyc2lvbiA9PSAweDApIHsKICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgfQogICAgICAgICBkZWxldGUgcGVuZGluZ1ZlcnNpb247CiAgICAgICAgIGRlbGV0ZSBwZW5kaW5nVmVyc2lvblRpbWVzdGFtcDsKICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgfQoKICAgICAvKioKICAgICAgKiBGaW5hbGl6ZSBhbiB1cGdyYWRlIHByb2Nlc3Mgc2V0dGluZyBuZXcgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAgKgogICAgICAqIENhbiBvbmx5IGJlIGNhbGxlZCBhZnRlciBhbiB1cGdyYWRlIGZyZWV6ZS10aW1lLgogICAgICAqCiAgICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICAqLwogICAgIGZ1bmN0aW9uIGNvbW1pdFVwZ3JhZGUoKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICAgaWYgKHBlbmRpbmdWZXJzaW9uID09IDB4MCkgewogICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICB9CiAgICAgICAgIGlmIChwZW5kaW5nVmVyc2lvblRpbWVzdGFtcCArIFVQR1JBREVfRlJFRVpFX1RJTUUgPiBub3cpIHsKICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgfQogICAgICAgICBsYXRlc3RWZXJzaW9uID0gcGVuZGluZ1ZlcnNpb247CiAgICAgICAgIGRlbGV0ZSBwZW5kaW5nVmVyc2lvbjsKICAgICAgICAgZGVsZXRlIHBlbmRpbmdWZXJzaW9uVGltZXN0YW1wOwogICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICB9CgogICAgIC8qKgogICAgICAqIERpc2FncmVlIHdpdGggcHJvcG9zZWQgdXBncmFkZSwgYW5kIHN0aWNrIHdpdGggY3VycmVudCBhc3NldCBpbXBsZW1lbnRhdGlvbgogICAgICAqIHVudGlsIGZ1cnRoZXIgZXhwbGljaXQgYWdyZWVtZW50IHRvIHVwZ3JhZGUuCiAgICAgICoKICAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgICovCiAgICAgZnVuY3Rpb24gb3B0T3V0KCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgIGlmICh1c2VyT3B0T3V0VmVyc2lvblttc2cuc2VuZGVyXSAhPSAweDApIHsKICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgfQogICAgICAgICB1c2VyT3B0T3V0VmVyc2lvblttc2cuc2VuZGVyXSA9IGxhdGVzdFZlcnNpb247CiAgICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KCiAgICAgLyoqCiAgICAgICogSW1wbGljaXRseSBhZ3JlZSB0byB1cGdyYWRlIHRvIGN1cnJlbnQgYW5kIGZ1dHVyZSBhc3NldCBpbXBsZW1lbnRhdGlvbiB1cGdyYWRlcywKICAgICAgKiB1bnRpbCBmdXJ0aGVyIGV4cGxpY2l0IGRpc2FncmVlbWVudC4KICAgICAgKgogICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAgKi8KICAgICBmdW5jdGlvbiBvcHRJbigpIHJldHVybnMoYm9vbCkgewogICAgICAgICBkZWxldGUgdXNlck9wdE91dFZlcnNpb25bbXNnLnNlbmRlcl07CiAgICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KIH0='.
	

]
