Class {
	#name : #SRT3F500A7e3783FBd228DDB894DE2Db110eED83A5b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3F500A7e3783FBd228DDB894DE2Db110eED83A5b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4gMC40LjEzOwoKY29udHJhY3QgTWlncmF0aW9uQWdlbnQgewogICAgZnVuY3Rpb24gbWlncmF0ZUZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBQcmVBcnRleFRva2VuIHsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2IGJhbGFuY2UpOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBkZXBvc2l0czsKICAgIHVpbnQgcHVibGljIHRva2VuUHJpY2VVU0RXRUk7Cn0KCmNvbnRyYWN0IE93bmVkIHsKCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgb3JhY2xlOwogICAgYWRkcmVzcyBwdWJsaWMgYnRjT3JhY2xlOwoKICAgIGZ1bmN0aW9uIE93bmVkKCkgcGF5YWJsZSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShvd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lck9yT3JhY2xlIHsKICAgICAgICByZXF1aXJlKG93bmVyID09IG1zZy5zZW5kZXIgfHwgb3JhY2xlID09IG1zZy5zZW5kZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyT3JCdGNPcmFjbGUgewogICAgICAgIHJlcXVpcmUob3duZXIgPT0gbXNnLnNlbmRlciB8fCBidGNPcmFjbGUgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9vd25lcikgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKF9vd25lciAhPSAwKTsKICAgICAgICBuZXdPd25lciA9IF9vd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBjb25maXJtT3duZXIoKSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIGRlbGV0ZSBuZXdPd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VPcmFjbGUoYWRkcmVzcyBfb3JhY2xlKSBvbmx5T3duZXIgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUoX29yYWNsZSAhPSAwKTsKICAgICAgICBvcmFjbGUgPSBfb3JhY2xlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUJ0Y09yYWNsZShhZGRyZXNzIF9idGNPcmFjbGUpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfYnRjT3JhY2xlICE9IDApOwogICAgICAgIGJ0Y09yYWNsZSA9IF9idGNPcmFjbGU7CiAgICB9Cn0KCmNvbnRyYWN0IEtub3duQ29udHJhY3QgewogICAgZnVuY3Rpb24gdHJhbnNmZXJlZChhZGRyZXNzIF9zZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlczMyW10gX2RhdGEpIGV4dGVybmFsOwp9Cgpjb250cmFjdCBFUkMyMCB7CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnModWludCk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyh1aW50KTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSk7CgogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KCmNvbnRyYWN0IFN0YXRlZnVsIHsKICAgIGVudW0gU3RhdGUgewogICAgICAgIEluaXRpYWwsCiAgICAgICAgUHJlU2FsZSwKICAgICAgICBXYWl0aW5nRm9yU2FsZSwKICAgICAgICBTYWxlLAogICAgICAgIENyb3dkc2FsZUNvbXBsZXRlZCwKICAgICAgICBTYWxlRmFpbGVkCiAgICB9CgogICAgU3RhdGUgcHVibGljIHN0YXRlID0gU3RhdGUuSW5pdGlhbDsKCiAgICBldmVudCBTdGF0ZUNoYW5nZWQoU3RhdGUgb2xkU3RhdGUsIFN0YXRlIG5ld1N0YXRlKTsKCiAgICBmdW5jdGlvbiBzZXRTdGF0ZShTdGF0ZSBuZXdTdGF0ZSkgaW50ZXJuYWwgewogICAgICAgIFN0YXRlIG9sZFN0YXRlID0gc3RhdGU7CiAgICAgICAgc3RhdGUgPSBuZXdTdGF0ZTsKICAgICAgICBTdGF0ZUNoYW5nZWQob2xkU3RhdGUsIG5ld1N0YXRlKTsKICAgIH0KfQoKY29udHJhY3QgQ3Jvd2RzYWxlIGlzIE93bmVkLCBTdGF0ZWZ1bCB7CgogICAgdWludCBwdWJsaWMgZXRoZXJQcmljZVVTRFdFSTsKICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwogICAgdWludCBwdWJsaWMgdG90YWxMaW1pdFVTRFdFSTsKICAgIHVpbnQgcHVibGljIG1pbmltYWxTdWNjZXNzVVNEV0VJOwogICAgdWludCBwdWJsaWMgY29sbGVjdGVkVVNEV0VJOwoKICAgIHVpbnQgcHVibGljIGNyb3dkc2FsZVN0YXJ0VGltZTsKICAgIHVpbnQgcHVibGljIGNyb3dkc2FsZUZpbmlzaFRpbWU7CgogICAgc3RydWN0IEludmVzdG9yIHsKICAgICAgICB1aW50IGFtb3VudFRva2VuczsKICAgICAgICB1aW50IGFtb3VudFdlaTsKICAgIH0KCiAgICBzdHJ1Y3QgQnRjRGVwb3NpdCB7CiAgICAgICAgdWludCBhbW91bnRCVENXRUk7CiAgICAgICAgdWludCBidGNQcmljZVVTRFdFSTsKICAgICAgICBhZGRyZXNzIGludmVzdG9yOwogICAgfQoKICAgIG1hcHBpbmcoYnl0ZXMzMiA9PiBCdGNEZXBvc2l0KSBwdWJsaWMgYnRjRGVwb3NpdHM7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IEludmVzdG9yKSBwdWJsaWMgaW52ZXN0b3JzOwogICAgbWFwcGluZyh1aW50ID0+IGFkZHJlc3MpIHB1YmxpYyBpbnZlc3RvcnNJdGVyOwogICAgdWludCBwdWJsaWMgbnVtYmVyT2ZJbnZlc3RvcnM7CgogICAgbWFwcGluZyh1aW50ID0+IGFkZHJlc3MpIHB1YmxpYyBpbnZlc3RvcnNUb1dpdGhkcmF3SXRlcjsKICAgIHVpbnQgcHVibGljIG51bWJlck9mSW52ZXN0b3JzVG9XaXRoZHJhdzsKCiAgICBmdW5jdGlvbiBDcm93ZHNhbGUoKSBwYXlhYmxlIE93bmVkKCkge30KCiAgICAvL2Fic3RyYWN0IG1ldGhvZHMKICAgIGZ1bmN0aW9uIGVtaXRUb2tlbnMoYWRkcmVzcyBfaW52ZXN0b3IsIHVpbnQgX3Rva2VuUHJpY2VVU0RXRUksIHVpbnQgX3VzZHdlaSkgaW50ZXJuYWwgcmV0dXJucyh1aW50IHRva2Vuc1RvRW1pdCk7CgogICAgZnVuY3Rpb24gZW1pdEFkZGl0aW9uYWxUb2tlbnMoKSBpbnRlcm5hbDsKCiAgICBmdW5jdGlvbiBidXJuVG9rZW5zKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX2Ftb3VudCkgaW50ZXJuYWw7CgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIGNyb3dkc2FsZVN0YXRlIGxpbWl0Tm90RXhjZWVkZWQgY3Jvd2RzYWxlTm90RmluaXNoZWQgewogICAgICAgIHVpbnQgdmFsdWVXRUkgPSBtc2cudmFsdWU7CiAgICAgICAgdWludCB2YWx1ZVVTRFdFSSA9IHZhbHVlV0VJICogZXRoZXJQcmljZVVTRFdFSSAvIDEgZXRoZXI7CiAgICAgICAgdWludCB0b2tlblByaWNlVVNEV0VJID0gZ2V0VG9rZW5QcmljZVVTRFdFSSgpOwogICAgICAgIGlmIChjb2xsZWN0ZWRVU0RXRUkgKyB2YWx1ZVVTRFdFSSA+IHRvdGFsTGltaXRVU0RXRUkpIHsgLy8gZG9uJ3QgbmVlZCBzbyBtdWNoIGV0aGVyCiAgICAgICAgICAgIHZhbHVlVVNEV0VJID0gdG90YWxMaW1pdFVTRFdFSSAtIGNvbGxlY3RlZFVTRFdFSTsKICAgICAgICAgICAgdmFsdWVXRUkgPSB2YWx1ZVVTRFdFSSAqIDEgZXRoZXIgLyBldGhlclByaWNlVVNEV0VJOwogICAgICAgICAgICB1aW50IHdlaVRvUmV0dXJuID0gbXNnLnZhbHVlIC0gdmFsdWVXRUk7CiAgICAgICAgICAgIGJvb2wgaXNTZW50ID0gbXNnLnNlbmRlci5jYWxsLmdhcygzMDAwMDAwKS52YWx1ZSh3ZWlUb1JldHVybikoKTsKICAgICAgICAgICAgcmVxdWlyZShpc1NlbnQpOwogICAgICAgICAgICBjb2xsZWN0ZWRVU0RXRUkgPSB0b3RhbExpbWl0VVNEV0VJOyAvLyB0byBiZSBzdXJlISAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb2xsZWN0ZWRVU0RXRUkgKz0gdmFsdWVVU0RXRUk7CiAgICAgICAgfQogICAgICAgIGVtaXRUb2tlbnNGb3IobXNnLnNlbmRlciwgdG9rZW5QcmljZVVTRFdFSSwgdmFsdWVVU0RXRUksIHZhbHVlV0VJKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZXBvc2l0VVNEKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnRVU0RXRUkpIGV4dGVybmFsIG9ubHlPd25lciBjcm93ZHNhbGVTdGF0ZSBsaW1pdE5vdEV4Y2VlZGVkIGNyb3dkc2FsZU5vdEZpbmlzaGVkIHsKICAgICAgICB1aW50IHRva2VuUHJpY2VVU0RXRUkgPSBnZXRUb2tlblByaWNlVVNEV0VJKCk7CiAgICAgICAgY29sbGVjdGVkVVNEV0VJICs9IF9hbW91bnRVU0RXRUk7CiAgICAgICAgZW1pdFRva2Vuc0ZvcihfdG8sIHRva2VuUHJpY2VVU0RXRUksIF9hbW91bnRVU0RXRUksIDApOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlcG9zaXRCVEMoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudEJUQ1dFSSwgdWludCBfYnRjUHJpY2VVU0RXRUksIGJ5dGVzMzIgX2J0Y1R4SWQpIGV4dGVybmFsIG9ubHlPd25lck9yQnRjT3JhY2xlIGNyb3dkc2FsZVN0YXRlIGxpbWl0Tm90RXhjZWVkZWQgY3Jvd2RzYWxlTm90RmluaXNoZWQgewogICAgICAgIHVpbnQgdmFsdWVVU0RXRUkgPSBfYW1vdW50QlRDV0VJICogX2J0Y1ByaWNlVVNEV0VJIC8gMSBldGhlcjsKICAgICAgICB1aW50IHRva2VuUHJpY2VVU0RXRUkgPSBnZXRUb2tlblByaWNlVVNEV0VJKCk7CiAgICAgICAgQnRjRGVwb3NpdCBzdG9yYWdlIGJ0Y0RlcCA9IGJ0Y0RlcG9zaXRzW19idGNUeElkXTsKICAgICAgICByZXF1aXJlKGJ0Y0RlcC5hbW91bnRCVENXRUkgPT0gMCk7CiAgICAgICAgYnRjRGVwLmFtb3VudEJUQ1dFSSA9IF9hbW91bnRCVENXRUk7CiAgICAgICAgYnRjRGVwLmJ0Y1ByaWNlVVNEV0VJID0gX2J0Y1ByaWNlVVNEV0VJOwogICAgICAgIGJ0Y0RlcC5pbnZlc3RvciA9IF90bzsKICAgICAgICBjb2xsZWN0ZWRVU0RXRUkgKz0gdmFsdWVVU0RXRUk7CiAgICAgICAgZW1pdFRva2Vuc0ZvcihfdG8sIHRva2VuUHJpY2VVU0RXRUksIHZhbHVlVVNEV0VJLCAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBlbWl0VG9rZW5zRm9yKGFkZHJlc3MgX2ludmVzdG9yLCB1aW50IF90b2tlblByaWNlVVNEV0VJLCB1aW50IF92YWx1ZVVTRFdFSSwgdWludCBfdmFsdWVXRUkpIGludGVybmFsIHsKICAgICAgICB2YXIgZW1pdHRlZFRva2VucyA9IGVtaXRUb2tlbnMoX2ludmVzdG9yLCBfdG9rZW5QcmljZVVTRFdFSSwgX3ZhbHVlVVNEV0VJKTsKICAgICAgICBJbnZlc3RvciBzdG9yYWdlIGludiA9IGludmVzdG9yc1tfaW52ZXN0b3JdOwogICAgICAgIGlmIChpbnYuYW1vdW50VG9rZW5zID09IDApIHsgLy8gbmV3IGludmVzdG9yCiAgICAgICAgICAgIGludmVzdG9yc0l0ZXJbbnVtYmVyT2ZJbnZlc3RvcnMrK10gPSBfaW52ZXN0b3I7CiAgICAgICAgfQogICAgICAgIGludi5hbW91bnRUb2tlbnMgKz0gZW1pdHRlZFRva2VuczsKICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuU2FsZSkgewogICAgICAgICAgICBpbnYuYW1vdW50V2VpICs9IF92YWx1ZVdFSTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VG9rZW5QcmljZVVTRFdFSSgpIGludGVybmFsIHJldHVybnModWludCB0b2tlblByaWNlVVNEV0VJKSB7CiAgICAgICAgdG9rZW5QcmljZVVTRFdFSSA9IDA7CiAgICAgICAgaWYgKHN0YXRlID09IFN0YXRlLlByZVNhbGUpIHsKICAgICAgICAgICAgdG9rZW5QcmljZVVTRFdFSSA9IDc2OTIzMDc2OTIzMDc2OTAwOwogICAgICAgIH0KICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuU2FsZSkgewogICAgICAgICAgICBpZiAobm93IDwgY3Jvd2RzYWxlU3RhcnRUaW1lICsgMSBkYXlzKSB7CiAgICAgICAgICAgICAgICB0b2tlblByaWNlVVNEV0VJID0gODY5NTY1MjE3MzAwMDAwMDA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobm93IDwgY3Jvd2RzYWxlU3RhcnRUaW1lICsgMSB3ZWVrcykgewogICAgICAgICAgICAgICAgdG9rZW5QcmljZVVTRFdFSSA9IDkwOTA5MDkwOTAwMDAwMDAwOwogICAgICAgICAgICB9IGVsc2UgaWYgKG5vdyA8IGNyb3dkc2FsZVN0YXJ0VGltZSArIDIgd2Vla3MpIHsKICAgICAgICAgICAgICAgIHRva2VuUHJpY2VVU0RXRUkgPSA5NTIzODA5NTIzMDAwMDAwMDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRva2VuUHJpY2VVU0RXRUkgPSAxMDAwMDAwMDAwMDAwMDAwMDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc3RhcnRQcmVTYWxlKAogICAgICAgIGFkZHJlc3MgX2JlbmVmaWNpYXJ5LAogICAgICAgIHVpbnQgX2V0aGVyUHJpY2VVU0RXRUksCiAgICAgICAgdWludCBfdG90YWxMaW1pdFVTRFdFSSwKICAgICAgICB1aW50IF9jcm93ZHNhbGVEdXJhdGlvbkRheXMpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5Jbml0aWFsKTsKICAgICAgICBjcm93ZHNhbGVTdGFydFRpbWUgPSBub3c7CiAgICAgICAgYmVuZWZpY2lhcnkgPSBfYmVuZWZpY2lhcnk7CiAgICAgICAgZXRoZXJQcmljZVVTRFdFSSA9IF9ldGhlclByaWNlVVNEV0VJOwogICAgICAgIHRvdGFsTGltaXRVU0RXRUkgPSBfdG90YWxMaW1pdFVTRFdFSTsKICAgICAgICBjcm93ZHNhbGVGaW5pc2hUaW1lID0gbm93ICsgX2Nyb3dkc2FsZUR1cmF0aW9uRGF5cyAqIDEgZGF5czsKICAgICAgICBjb2xsZWN0ZWRVU0RXRUkgPSAwOwogICAgICAgIHNldFN0YXRlKFN0YXRlLlByZVNhbGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmlzaFByZVNhbGUoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlByZVNhbGUpOwogICAgICAgIGJvb2wgaXNTZW50ID0gYmVuZWZpY2lhcnkuY2FsbC5nYXMoMzAwMDAwMCkudmFsdWUodGhpcy5iYWxhbmNlKSgpOwogICAgICAgIHJlcXVpcmUoaXNTZW50KTsKICAgICAgICBzZXRTdGF0ZShTdGF0ZS5XYWl0aW5nRm9yU2FsZSk7CiAgICB9CgogICAgZnVuY3Rpb24gc3RhcnRTYWxlKAogICAgICAgIGFkZHJlc3MgX2JlbmVmaWNpYXJ5LAogICAgICAgIHVpbnQgX2V0aGVyUHJpY2VVU0RXRUksCiAgICAgICAgdWludCBfdG90YWxMaW1pdFVTRFdFSSwKICAgICAgICB1aW50IF9jcm93ZHNhbGVEdXJhdGlvbkRheXMsCiAgICAgICAgdWludCBfbWluaW1hbFN1Y2Nlc3NVU0RXRUkpIGV4dGVybmFsIG9ubHlPd25lciB7CgogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuV2FpdGluZ0ZvclNhbGUpOwogICAgICAgIGNyb3dkc2FsZVN0YXJ0VGltZSA9IG5vdzsKICAgICAgICBiZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgICAgICBldGhlclByaWNlVVNEV0VJID0gX2V0aGVyUHJpY2VVU0RXRUk7CiAgICAgICAgdG90YWxMaW1pdFVTRFdFSSA9IF90b3RhbExpbWl0VVNEV0VJOwogICAgICAgIGNyb3dkc2FsZUZpbmlzaFRpbWUgPSBub3cgKyBfY3Jvd2RzYWxlRHVyYXRpb25EYXlzICogMSBkYXlzOwogICAgICAgIG1pbmltYWxTdWNjZXNzVVNEV0VJID0gX21pbmltYWxTdWNjZXNzVVNEV0VJOwogICAgICAgIGNvbGxlY3RlZFVTRFdFSSA9IDA7CiAgICAgICAgc2V0U3RhdGUoU3RhdGUuU2FsZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZmFpbFNhbGUodWludCBfaW52ZXN0b3JzVG9Qcm9jZXNzKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuU2FsZSk7CiAgICAgICAgcmVxdWlyZShub3cgPj0gY3Jvd2RzYWxlRmluaXNoVGltZSAmJiBjb2xsZWN0ZWRVU0RXRUkgPCBtaW5pbWFsU3VjY2Vzc1VTRFdFSSk7CiAgICAgICAgd2hpbGUgKF9pbnZlc3RvcnNUb1Byb2Nlc3MgPiAwICYmIG51bWJlck9mSW52ZXN0b3JzID4gMCkgewogICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBpbnZlc3RvcnNJdGVyWy0tbnVtYmVyT2ZJbnZlc3RvcnNdOwogICAgICAgICAgICBJbnZlc3RvciBtZW1vcnkgaW52ID0gaW52ZXN0b3JzW2FkZHJdOwogICAgICAgICAgICBidXJuVG9rZW5zKGFkZHIsIGludi5hbW91bnRUb2tlbnMpOwogICAgICAgICAgICAtLV9pbnZlc3RvcnNUb1Byb2Nlc3M7CiAgICAgICAgICAgIGRlbGV0ZSBpbnZlc3RvcnNJdGVyW251bWJlck9mSW52ZXN0b3JzXTsKCiAgICAgICAgICAgIGludmVzdG9yc1RvV2l0aGRyYXdJdGVyW251bWJlck9mSW52ZXN0b3JzVG9XaXRoZHJhd10gPSBhZGRyOwogICAgICAgICAgICBudW1iZXJPZkludmVzdG9yc1RvV2l0aGRyYXcrKzsKICAgICAgICB9CiAgICAgICAgaWYgKG51bWJlck9mSW52ZXN0b3JzID4gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHNldFN0YXRlKFN0YXRlLlNhbGVGYWlsZWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbXBsZXRlU2FsZSh1aW50IF9pbnZlc3RvcnNUb1Byb2Nlc3MpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuU2FsZSk7CiAgICAgICAgcmVxdWlyZShjb2xsZWN0ZWRVU0RXRUkgPj0gbWluaW1hbFN1Y2Nlc3NVU0RXRUkpOwoKICAgICAgICB3aGlsZSAoX2ludmVzdG9yc1RvUHJvY2VzcyA+IDAgJiYgbnVtYmVyT2ZJbnZlc3RvcnMgPiAwKSB7CiAgICAgICAgICAgIC0tbnVtYmVyT2ZJbnZlc3RvcnM7CiAgICAgICAgICAgIC0tX2ludmVzdG9yc1RvUHJvY2VzczsKICAgICAgICAgICAgZGVsZXRlIGludmVzdG9yc1tpbnZlc3RvcnNJdGVyW251bWJlck9mSW52ZXN0b3JzXV07CiAgICAgICAgICAgIGRlbGV0ZSBpbnZlc3RvcnNJdGVyW251bWJlck9mSW52ZXN0b3JzXTsKICAgICAgICB9CgogICAgICAgIGlmIChudW1iZXJPZkludmVzdG9ycyA+IDApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgZW1pdEFkZGl0aW9uYWxUb2tlbnMoKTsKCiAgICAgICAgYm9vbCBpc1NlbnQgPSBiZW5lZmljaWFyeS5jYWxsLmdhcygzMDAwMDAwKS52YWx1ZSh0aGlzLmJhbGFuY2UpKCk7CiAgICAgICAgcmVxdWlyZShpc1NlbnQpOwogICAgICAgIHNldFN0YXRlKFN0YXRlLkNyb3dkc2FsZUNvbXBsZXRlZCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0RXRoZXJQcmljZVVTRFdFSSh1aW50IF9ldGhlclByaWNlVVNEV0VJKSBleHRlcm5hbCBvbmx5T3duZXJPck9yYWNsZSB7CiAgICAgICAgZXRoZXJQcmljZVVTRFdFSSA9IF9ldGhlclByaWNlVVNEV0VJOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJlbmVmaWNpYXJ5KGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBleHRlcm5hbCBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShfYmVuZWZpY2lhcnkgIT0gMCk7CiAgICAgICAgYmVuZWZpY2lhcnkgPSBfYmVuZWZpY2lhcnk7CiAgICB9CgogICAgLy8gVGhpcyBmdW5jdGlvbiBtdXN0IGJlIGNhbGxlZCBieSB0b2tlbiBob2xkZXIgaW4gY2FzZSBvZiBjcm93ZHNhbGUgZmFpbGVkCiAgICBmdW5jdGlvbiB3aXRoZHJhd0JhY2soKSBleHRlcm5hbCBzYWxlRmFpbGVkU3RhdGUgewogICAgICAgIHJldHVybkludmVzdG1lbnRzVG9JbnRlcm5hbChtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXR1cm5JbnZlc3RtZW50cyh1aW50IF9pbnZlc3RvcnNUb1Byb2Nlc3MpIHB1YmxpYyBzYWxlRmFpbGVkU3RhdGUgewogICAgICAgIHdoaWxlIChfaW52ZXN0b3JzVG9Qcm9jZXNzID4gMCAmJiBudW1iZXJPZkludmVzdG9yc1RvV2l0aGRyYXcgPiAwKSB7CiAgICAgICAgICAgIGFkZHJlc3MgYWRkciA9IGludmVzdG9yc1RvV2l0aGRyYXdJdGVyWy0tbnVtYmVyT2ZJbnZlc3RvcnNUb1dpdGhkcmF3XTsKICAgICAgICAgICAgZGVsZXRlIGludmVzdG9yc1RvV2l0aGRyYXdJdGVyW251bWJlck9mSW52ZXN0b3JzVG9XaXRoZHJhd107CiAgICAgICAgICAgIC0tX2ludmVzdG9yc1RvUHJvY2VzczsKICAgICAgICAgICAgcmV0dXJuSW52ZXN0bWVudHNUb0ludGVybmFsKGFkZHIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZXR1cm5JbnZlc3RtZW50c1RvKGFkZHJlc3MgX3RvKSBwdWJsaWMgc2FsZUZhaWxlZFN0YXRlIHsKICAgICAgICByZXR1cm5JbnZlc3RtZW50c1RvSW50ZXJuYWwoX3RvKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXR1cm5JbnZlc3RtZW50c1RvSW50ZXJuYWwoYWRkcmVzcyBfdG8pIGludGVybmFsIHsKICAgICAgICBJbnZlc3RvciBtZW1vcnkgaW52ID0gaW52ZXN0b3JzW190b107CiAgICAgICAgdWludCB2YWx1ZSA9IGludi5hbW91bnRXZWk7CiAgICAgICAgaWYgKHZhbHVlID4gMCkgewogICAgICAgICAgICBkZWxldGUgaW52ZXN0b3JzW190b107CiAgICAgICAgICAgIHJlcXVpcmUoX3RvLmNhbGwuZ2FzKDMwMDAwMDApLnZhbHVlKHZhbHVlKSgpKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdGdW5kcyh1aW50IF92YWx1ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5QcmVTYWxlIHx8IChzdGF0ZSA9PSBTdGF0ZS5TYWxlICYmIGNvbGxlY3RlZFVTRFdFSSA+IG1pbmltYWxTdWNjZXNzVVNEV0VJKSk7CiAgICAgICAgaWYgKF92YWx1ZSA9PSAwKSB7CiAgICAgICAgICAgIF92YWx1ZSA9IHRoaXMuYmFsYW5jZTsKICAgICAgICB9CiAgICAgICAgYm9vbCBpc1NlbnQgPSBiZW5lZmljaWFyeS5jYWxsLmdhcygzMDAwMDAwKS52YWx1ZShfdmFsdWUpKCk7CiAgICAgICAgcmVxdWlyZShpc1NlbnQpOwogICAgfQoKICAgIG1vZGlmaWVyIGNyb3dkc2FsZU5vdEZpbmlzaGVkIHsKICAgICAgICByZXF1aXJlKG5vdyA8IGNyb3dkc2FsZUZpbmlzaFRpbWUpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbGltaXROb3RFeGNlZWRlZCB7CiAgICAgICAgcmVxdWlyZShjb2xsZWN0ZWRVU0RXRUkgPCB0b3RhbExpbWl0VVNEV0VJKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGNyb3dkc2FsZVN0YXRlIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlByZVNhbGUgfHwgc3RhdGUgPT0gU3RhdGUuU2FsZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBzYWxlRmFpbGVkU3RhdGUgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuU2FsZUZhaWxlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBjb21wbGV0ZWRTYWxlU3RhdGUgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQ3Jvd2RzYWxlQ29tcGxldGVkKTsKICAgICAgICBfOwogICAgfQp9Cgpjb250cmFjdCBUb2tlbiBpcyBDcm93ZHNhbGUsIEVSQzIwIHsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgaW50ZXJuYWwgYmFsYW5jZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpKSBwdWJsaWMgYWxsb3dlZDsKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDg7CgoKICAgIGZ1bmN0aW9uIFRva2VuKCkgcGF5YWJsZSBDcm93ZHNhbGUoKSB7fQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW3dob107CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgY29tcGxldGVkU2FsZVN0YXRlIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID49IGJhbGFuY2VzW190b10pOyAvLyBvdmVyZmxvdwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIGNvbXBsZXRlZFNhbGVTdGF0ZSBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW190b10gKyBfdmFsdWUgPj0gYmFsYW5jZXNbX3RvXSk7IC8vIG92ZXJmbG93CiAgICAgICAgcmVxdWlyZShhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcHVibGljIGNvbXBsZXRlZFNhbGVTdGF0ZSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgY29tcGxldGVkU2FsZVN0YXRlIHJldHVybnModWludCByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgICAgcmVxdWlyZShtc2cuZGF0YS5sZW5ndGggPj0gc2l6ZSArIDQpOwogICAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IE1pZ3JhdGFibGVUb2tlbiBpcyBUb2tlbiB7CgogICAgZnVuY3Rpb24gTWlncmF0YWJsZVRva2VuKCkgcGF5YWJsZSBUb2tlbigpIHt9CgogICAgYWRkcmVzcyBwdWJsaWMgbWlncmF0aW9uQWdlbnQ7CiAgICB1aW50IHB1YmxpYyB0b3RhbE1pZ3JhdGVkOwogICAgYWRkcmVzcyBwdWJsaWMgbWlncmF0aW9uSG9zdDsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBtaWdyYXRlZEludmVzdG9yczsKCiAgICBldmVudCBNaWdyYXRlZChhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKCiAgICBmdW5jdGlvbiBzZXRNaWdyYXRpb25Ib3N0KGFkZHJlc3MgX2FkZHJlc3MpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfYWRkcmVzcyAhPSAwKTsKICAgICAgICBtaWdyYXRpb25Ib3N0ID0gX2FkZHJlc3M7CiAgICB9CgogICAgLy9tYW51YWwgbWlncmF0aW9uIGJ5IG93bmVyCiAgICBmdW5jdGlvbiBtaWdyYXRlSW52ZXN0b3JGcm9tSG9zdChhZGRyZXNzIF9hZGRyZXNzKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobWlncmF0aW9uSG9zdCAhPSAwICYmCiAgICAgICAgICAgIHN0YXRlICE9IFN0YXRlLlNhbGVGYWlsZWQgJiYKICAgICAgICAgICAgZXRoZXJQcmljZVVTRFdFSSAhPSAwICYmCiAgICAgICAgICAgIG1pZ3JhdGVkSW52ZXN0b3JzW19hZGRyZXNzXSA9PSBmYWxzZSk7CgogICAgICAgIFByZUFydGV4VG9rZW4gcHJlQXJ0ZXggPSBQcmVBcnRleFRva2VuKG1pZ3JhdGlvbkhvc3QpOwogICAgICAgIHVpbnQgdG9rZW5zRGVjaW1hbHMgPSBwcmVBcnRleC5iYWxhbmNlT2YoX2FkZHJlc3MpOwogICAgICAgIHJlcXVpcmUodG9rZW5zRGVjaW1hbHMgPiAwKTsKICAgICAgICB1aW50IGRlcG9zaXRXRUkgPSBwcmVBcnRleC5kZXBvc2l0cyhfYWRkcmVzcyk7CiAgICAgICAgdWludCBwcmVBcnRleFRva2VuUHJpY2VVU0RXRUkgPSBwcmVBcnRleC50b2tlblByaWNlVVNEV0VJKCk7CiAgICAgICAgdWludCB0b2tlbnNUb1RyYW5zZmVyID0gMDsKCiAgICAgICAgaWYgKHRva2Vuc0RlY2ltYWxzICE9IDAgJiYgZGVwb3NpdFdFSSA9PSAwKSB7CiAgICAgICAgICAgIHRva2Vuc1RvVHJhbnNmZXIgPSB0b2tlbnNEZWNpbWFscyAqIDE0MCAvIDEzMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgcHJlQXJ0ZXhFdGhlclByaWNlVVNEV0VJID0gKCh0b2tlbnNEZWNpbWFscyAqIHByZUFydGV4VG9rZW5QcmljZVVTRFdFSSAqIDEgZXRoZXIpIC8gKGRlcG9zaXRXRUkgKiAoMTAgKiogdWludChkZWNpbWFscykpKSk7CiAgICAgICAgICAgIGlmIChldGhlclByaWNlVVNEV0VJID4gcHJlQXJ0ZXhFdGhlclByaWNlVVNEV0VJKSB7CiAgICAgICAgICAgICAgICB0b2tlbnNUb1RyYW5zZmVyID0gKHRva2Vuc0RlY2ltYWxzICogZXRoZXJQcmljZVVTRFdFSSAqIDE0MCkgLyAocHJlQXJ0ZXhFdGhlclByaWNlVVNEV0VJICogMTMwKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRva2Vuc1RvVHJhbnNmZXIgPSB0b2tlbnNEZWNpbWFscyAqIDE0MCAvIDEzMDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgYmFsYW5jZXNbX2FkZHJlc3NdID0gdG9rZW5zVG9UcmFuc2ZlcjsKICAgICAgICB0b3RhbFN1cHBseSArPSB0b2tlbnNUb1RyYW5zZmVyOwogICAgICAgIG1pZ3JhdGVkSW52ZXN0b3JzW19hZGRyZXNzXSA9IHRydWU7CgogICAgICAgIGlmIChzdGF0ZSAhPSBTdGF0ZS5Dcm93ZHNhbGVDb21wbGV0ZWQpIHsKICAgICAgICAgICAgSW52ZXN0b3Igc3RvcmFnZSBpbnYgPSBpbnZlc3RvcnNbX2FkZHJlc3NdOwogICAgICAgICAgICBpbnZlc3RvcnNJdGVyW251bWJlck9mSW52ZXN0b3JzKytdID0gX2FkZHJlc3M7CiAgICAgICAgICAgIGludi5hbW91bnRUb2tlbnMgKz0gdG9rZW5zVG9UcmFuc2ZlcjsKICAgICAgICB9CgogICAgICAgIFRyYW5zZmVyKHRoaXMsIF9hZGRyZXNzLCB0b2tlbnNUb1RyYW5zZmVyKTsKICAgIH0KCiAgICAvL21pZ3JhdGlvbiBieSBpbnZlc3RvcgogICAgZnVuY3Rpb24gbWlncmF0ZSgpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKG1pZ3JhdGlvbkFnZW50ICE9IDApOwogICAgICAgIHVpbnQgdmFsdWUgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSB2YWx1ZTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCB0aGlzLCB2YWx1ZSk7CiAgICAgICAgdG90YWxTdXBwbHkgLT0gdmFsdWU7CiAgICAgICAgdG90YWxNaWdyYXRlZCArPSB2YWx1ZTsKICAgICAgICBNaWdyYXRpb25BZ2VudChtaWdyYXRpb25BZ2VudCkubWlncmF0ZUZyb20obXNnLnNlbmRlciwgdmFsdWUpOwogICAgICAgIE1pZ3JhdGVkKG1zZy5zZW5kZXIsIG1pZ3JhdGlvbkFnZW50LCB2YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TWlncmF0aW9uQWdlbnQoYWRkcmVzcyBfYWdlbnQpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtaWdyYXRpb25BZ2VudCA9PSAwKTsKICAgICAgICBtaWdyYXRpb25BZ2VudCA9IF9hZ2VudDsKICAgIH0KfQoKY29udHJhY3QgQXJ0ZXhUb2tlbiBpcyBNaWdyYXRhYmxlVG9rZW4gewoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkFSVCI7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkFydGV4IFRva2VuIjsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFsbG93ZWRDb250cmFjdHM7CgogICAgZnVuY3Rpb24gQXJ0ZXhUb2tlbigpIHBheWFibGUgTWlncmF0YWJsZVRva2VuKCkge30KCiAgICBmdW5jdGlvbiBlbWl0VG9rZW5zKGFkZHJlc3MgX2ludmVzdG9yLCB1aW50IF90b2tlblByaWNlVVNEV0VJLCB1aW50IF92YWx1ZVVTRFdFSSkgaW50ZXJuYWwgcmV0dXJucyh1aW50IHRva2Vuc1RvRW1pdCkgewogICAgICAgIHRva2Vuc1RvRW1pdCA9IChfdmFsdWVVU0RXRUkgKiAoMTAgKiogdWludChkZWNpbWFscykpKSAvIF90b2tlblByaWNlVVNEV0VJOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2ludmVzdG9yXSArIHRva2Vuc1RvRW1pdCA+IGJhbGFuY2VzW19pbnZlc3Rvcl0pOyAvLyBvdmVyZmxvdwogICAgICAgIHJlcXVpcmUodG9rZW5zVG9FbWl0ID4gMCk7CiAgICAgICAgYmFsYW5jZXNbX2ludmVzdG9yXSArPSB0b2tlbnNUb0VtaXQ7CiAgICAgICAgdG90YWxTdXBwbHkgKz0gdG9rZW5zVG9FbWl0OwogICAgICAgIFRyYW5zZmVyKHRoaXMsIF9pbnZlc3RvciwgdG9rZW5zVG9FbWl0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBlbWl0QWRkaXRpb25hbFRva2VucygpIGludGVybmFsIHsKICAgICAgICB1aW50IHRva2Vuc1RvRW1pdCA9IHRvdGFsU3VwcGx5ICogMTAwIC8gNzQgLSB0b3RhbFN1cHBseTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW2JlbmVmaWNpYXJ5XSArIHRva2Vuc1RvRW1pdCA+IGJhbGFuY2VzW2JlbmVmaWNpYXJ5XSk7IC8vIG92ZXJmbG93CiAgICAgICAgcmVxdWlyZSh0b2tlbnNUb0VtaXQgPiAwKTsKICAgICAgICBiYWxhbmNlc1tiZW5lZmljaWFyeV0gKz0gdG9rZW5zVG9FbWl0OwogICAgICAgIHRvdGFsU3VwcGx5ICs9IHRva2Vuc1RvRW1pdDsKICAgICAgICBUcmFuc2Zlcih0aGlzLCBiZW5lZmljaWFyeSwgdG9rZW5zVG9FbWl0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJuVG9rZW5zKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX2Ftb3VudCkgaW50ZXJuYWwgewogICAgICAgIGJhbGFuY2VzW19hZGRyZXNzXSAtPSBfYW1vdW50OwogICAgICAgIHRvdGFsU3VwcGx5IC09IF9hbW91bnQ7CiAgICAgICAgVHJhbnNmZXIoX2FkZHJlc3MsIHRoaXMsIF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZEFsbG93ZWRDb250cmFjdChhZGRyZXNzIF9hZGRyZXNzKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3MgIT0gMCk7CiAgICAgICAgYWxsb3dlZENvbnRyYWN0c1tfYWRkcmVzc10gPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZUFsbG93ZWRDb250cmFjdChhZGRyZXNzIF9hZGRyZXNzKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3MgIT0gMCk7CiAgICAgICAgZGVsZXRlIGFsbG93ZWRDb250cmFjdHNbX2FkZHJlc3NdOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9Lbm93bkNvbnRyYWN0KGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMzMltdIF9kYXRhKSBleHRlcm5hbCBvbmx5QWxsb3dlZENvbnRyYWN0cyhfdG8pIHsKICAgICAgICB2YXIga25vd25Db250cmFjdCA9IEtub3duQ29udHJhY3QoX3RvKTsKICAgICAgICB0cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICAgICAga25vd25Db250cmFjdC50cmFuc2ZlcmVkKG1zZy5zZW5kZXIsIF92YWx1ZSwgX2RhdGEpOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlBbGxvd2VkQ29udHJhY3RzKGFkZHJlc3MgX2FkZHJlc3MpIHsKICAgICAgICByZXF1aXJlKGFsbG93ZWRDb250cmFjdHNbX2FkZHJlc3NdID09IHRydWUpOwogICAgICAgIF87CiAgICB9Cn0='.
	

]
