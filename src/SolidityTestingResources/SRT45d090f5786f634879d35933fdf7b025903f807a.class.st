Class {
	#name : #SRT45d090f5786f634879d35933fdf7b025903f807a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT45d090f5786f634879d35933fdf7b025903f807a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCgovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9Cn0KCgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogIC8qKgogICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgKi8KICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBTdWJ0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCi8vIFRoaXMgaXMgYW4gRVJDLTIwIHRva2VuIGNvbnRyYWN0IGJhc2VkIG9uIE9wZW4gWmVwcGxpbidzIFN0YW5kYXJkVG9rZW4KLy8gYW5kIE1pbnRhYmxlVG9rZW4gcGx1cyB0aGUgYWJpbGl0eSB0byBidXJuIHRva2Vucy4KLy8KLy8gV2UgaGFkIHRvIGNvcHkgb3ZlciB0aGUgY29kZSBpbnN0ZWFkIG9mIGluaGVyaXRpbmcgYmVjYXVzZSBvZiBjaGFuZ2VzCi8vIHRvIHRoZSBtb2RpZmllciBsaXN0cyBvZiBzb21lIGZ1bmN0aW9uczoKLy8gICAqIHRyYW5zZmVyKCksIHRyYW5zZmVyRnJvbSgpIGFuZCBhcHByb3ZlKCkgYXJlIG5vdCBjYWxsYWJsZSBkdXJpbmcKLy8gICAgIHRoZSBtaW50aW5nIHBlcmlvZCwgb25seSBhZnRlciBNaW50aW5nRmluaXNoZWQoKQovLyAgICogbWludCgpIGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgbWludGVyIHdobyBpcyBub3QgdGhlIG93bmVyCi8vICAgICBidXQgdGhlIEhvbG9Ub2tlblNhbGUgY29udHJhY3QuCi8vCi8vIFRva2VuIGNhbiBiZSBidXJuZWQgYnkgYSBzcGVjaWFsICdkZXN0cm95ZXInIHJvbGUgdGhhdCBjYW4gb25seQovLyBidXJuIGl0cyB0b2tlbnMuCmNvbnRyYWN0IEhvbG9Ub2tlbiBpcyBPd25hYmxlIHsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiSG9sb1Rva2VuIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJIT1QiOwogIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IE1pbnRpbmdGaW5pc2hlZCgpOwogIGV2ZW50IEJ1cm4odWludDI1NiBhbW91bnQpOwoKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCgogIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogIC8vIFplcHBlbGluIEJhc2ljVG9rZW4gKHBsdXMgbW9kaWZpZXIgdG8gbm90IGFsbG93IHRyYW5zZmVycyBkdXJpbmcgbWludGluZyBwZXJpb2QpOgogIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgd2hlbk1pbnRpbmdGaW5pc2hlZCByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9CgoKICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAvLyBaZXBwZWxpbiBTdGFuZGFyZFRva2VuIChwbHVzIG1vZGlmaWVyIHRvIG5vdCBhbGxvdyB0cmFuc2ZlcnMgZHVyaW5nIG1pbnRpbmcgcGVyaW9kKToKICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgd2hlbk1pbnRpbmdGaW5pc2hlZCByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW19mcm9tXSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CgogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICoKICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB3aGVuTWludGluZ0ZpbmlzaGVkIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgoKICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAvLyBNaW50aW5nOgogIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKICBhZGRyZXNzIHB1YmxpYyBkZXN0cm95ZXI7CiAgYWRkcmVzcyBwdWJsaWMgbWludGVyOwoKICBtb2RpZmllciBjYW5NaW50KCkgewogICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKICAgIF87CiAgfQoKICBtb2RpZmllciB3aGVuTWludGluZ0ZpbmlzaGVkKCkgewogICAgcmVxdWlyZShtaW50aW5nRmluaXNoZWQpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIG9ubHlNaW50ZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbWludGVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBzZXRNaW50ZXIoYWRkcmVzcyBfbWludGVyKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgbWludGVyID0gX21pbnRlcjsKICB9CgogIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgZXh0ZXJuYWwgb25seU1pbnRlciBjYW5NaW50ICByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKGJhbGFuY2VzW190b10gKyBfYW1vdW50ID4gYmFsYW5jZXNbX3RvXSk7IC8vIEd1YXJkIGFnYWluc3Qgb3ZlcmZsb3cKICAgIHJlcXVpcmUodG90YWxTdXBwbHkgKyBfYW1vdW50ID4gdG90YWxTdXBwbHkpOyAgICAgLy8gR3VhcmQgYWdhaW5zdCBvdmVyZmxvdyAgKHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbikKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgZXh0ZXJuYWwgb25seU1pbnRlciByZXR1cm5zIChib29sKSB7CiAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgTWludGluZ0ZpbmlzaGVkKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgoKICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAvLyBCdXJuaW5nOgogIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCiAgbW9kaWZpZXIgb25seURlc3Ryb3llcigpIHsKICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZGVzdHJveWVyKTsKICAgICBfOwogIH0KCiAgZnVuY3Rpb24gc2V0RGVzdHJveWVyKGFkZHJlc3MgX2Rlc3Ryb3llcikgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIGRlc3Ryb3llciA9IF9kZXN0cm95ZXI7CiAgfQoKICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX2Ftb3VudCkgZXh0ZXJuYWwgb25seURlc3Ryb3llciB7CiAgICByZXF1aXJlKGJhbGFuY2VzW2Rlc3Ryb3llcl0gPj0gX2Ftb3VudCAmJiBfYW1vdW50ID4gMCk7CiAgICBiYWxhbmNlc1tkZXN0cm95ZXJdID0gYmFsYW5jZXNbZGVzdHJveWVyXS5zdWIoX2Ftb3VudCk7CiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfYW1vdW50KTsKICAgIEJ1cm4oX2Ftb3VudCk7CiAgfQp9CgoKLy8gVGhpcyBjb250cmFjdCBob2xkcyBhIG1hcHBpbmcgb2Yga25vd24gZnVuZGVycyB3aXRoOgovLyAqIGEgYm9vbGVhbiBmbGFnIGZvciB3aGl0ZWxpc3Qgc3RhdHVzCi8vICogbnVtYmVyIG9mIHJlc2VydmVkIHRva2VucyBmb3IgZWFjaCBkYXkKY29udHJhY3QgSG9sb1doaXRlbGlzdCBpcyBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyB1cGRhdGVyOwoKICBzdHJ1Y3QgS25vd25GdW5kZXIgewogICAgYm9vbCB3aGl0ZWxpc3RlZDsKICAgIG1hcHBpbmcodWludCA9PiB1aW50MjU2KSByZXNlcnZlZFRva2Vuc1BlckRheTsKICB9CgogIG1hcHBpbmcoYWRkcmVzcyA9PiBLbm93bkZ1bmRlcikgcHVibGljIGtub3duRnVuZGVyczsKCiAgZXZlbnQgV2hpdGVsaXN0ZWQoYWRkcmVzc1tdIGZ1bmRlcnMpOwogIGV2ZW50IFJlc2VydmVkVG9rZW5zU2V0KHVpbnQgZGF5LCBhZGRyZXNzW10gZnVuZGVycywgdWludDI1NltdIHJlc2VydmVkVG9rZW5zKTsKCiAgbW9kaWZpZXIgb25seVVwZGF0ZXIgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHVwZGF0ZXIpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIEhvbG9XaGl0ZWxpc3QoKSBwdWJsaWMgewogICAgdXBkYXRlciA9IG1zZy5zZW5kZXI7CiAgfQoKICBmdW5jdGlvbiBzZXRVcGRhdGVyKGFkZHJlc3MgbmV3X3VwZGF0ZXIpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICB1cGRhdGVyID0gbmV3X3VwZGF0ZXI7CiAgfQoKICAvLyBBZGRzIGZ1bmRlcnMgdG8gdGhlIHdoaXRlbGlzdCBpbiBiYXRjaGVzLgogIGZ1bmN0aW9uIHdoaXRlbGlzdChhZGRyZXNzW10gZnVuZGVycykgZXh0ZXJuYWwgb25seVVwZGF0ZXIgewogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgZnVuZGVycy5sZW5ndGg7IGkrKykgewogICAgICAgIGtub3duRnVuZGVyc1tmdW5kZXJzW2ldXS53aGl0ZWxpc3RlZCA9IHRydWU7CiAgICB9CiAgICBXaGl0ZWxpc3RlZChmdW5kZXJzKTsKICB9CgogIC8vIFJlbW92ZXMgZnVuZGVycyBmcm9tIHRoZSB3aGl0ZWxpc3QgaW4gYmF0Y2hlcy4KICBmdW5jdGlvbiB1bndoaXRlbGlzdChhZGRyZXNzW10gZnVuZGVycykgZXh0ZXJuYWwgb25seVVwZGF0ZXIgewogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgZnVuZGVycy5sZW5ndGg7IGkrKykgewogICAgICAgIGtub3duRnVuZGVyc1tmdW5kZXJzW2ldXS53aGl0ZWxpc3RlZCA9IGZhbHNlOwogICAgfQogIH0KCiAgLy8gU3RvcmVzIHJlc2VydmVkIHRva2VucyBmb3Igc2V2ZXJhbCBmdW5kZXJzIGluIGEgYmF0Y2gKICAvLyBidXQgYWxsIGZvciB0aGUgc2FtZSBkYXkuCiAgLy8gKiBkYXkgaXMgMC1iYXNlZAogIGZ1bmN0aW9uIHNldFJlc2VydmVkVG9rZW5zKHVpbnQgZGF5LCBhZGRyZXNzW10gZnVuZGVycywgdWludDI1NltdIHJlc2VydmVkVG9rZW5zKSBleHRlcm5hbCBvbmx5VXBkYXRlciB7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBmdW5kZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAga25vd25GdW5kZXJzW2Z1bmRlcnNbaV1dLnJlc2VydmVkVG9rZW5zUGVyRGF5W2RheV0gPSByZXNlcnZlZFRva2Vuc1tpXTsKICAgIH0KICAgIFJlc2VydmVkVG9rZW5zU2V0KGRheSwgZnVuZGVycywgcmVzZXJ2ZWRUb2tlbnMpOwogIH0KCiAgLy8gVXNlZCBpbiBIb2xvU2FsZSB0byBjaGVjayBpZiBmdW5kZXIgaXMgYWxsb3dlZAogIGZ1bmN0aW9uIGlzV2hpdGVsaXN0ZWQoYWRkcmVzcyBmdW5kZXIpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIGtub3duRnVuZGVyc1tmdW5kZXJdLndoaXRlbGlzdGVkOwogIH0KCiAgLy8gVXNlZCBpbiBIb2xvU2FsZSB0byBnZXQgcmVzZXJ2ZWQgdG9rZW5zIHBlciBmdW5kZXIKICAvLyBhbmQgcGVyIGRheS4KICAvLyAqIGRheSBpcyAwLWJhc2VkCiAgZnVuY3Rpb24gcmVzZXJ2ZWRUb2tlbnMoYWRkcmVzcyBmdW5kZXIsIHVpbnQgZGF5KSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBrbm93bkZ1bmRlcnNbZnVuZGVyXS5yZXNlcnZlZFRva2Vuc1BlckRheVtkYXldOwogIH0KCgp9CgoKLy8gVGhpcyBjb250cmFjdCBpcyBhIGNyb3dkc2FsZSBiYXNlZCBvbiBaZXBwZWxpbidzIENyb3dkc2FsZS5zb2wgYnV0IHdpdGgKLy8gc2V2ZXJhbCBjaGFuZ2VzOgovLyAgICogdGhlIHRva2VuIGNvbnRyYWN0IGFzIHdlbGwgYXMgdGhlIHN1cHBseSBjb250cmFjdCBnZXQgaW5qZWN0ZWQKLy8gICAgIHdpdGggc2V0VG9rZW5Db250cmFjdCgpIGFuZCBzZXRTdXBwbHlDb250cmFjdCgpCi8vICAgKiB3ZSBoYXZlIGEgZHluYW1pYyB0b2tlbiBzdXBwbHkgcGVyIGRheSB3aGljaCB3ZSBob2xkIGluIHRoZSBzdGF0c0J5RGF5Ci8vICAgKiBvbmNlIHBlciBkYXksIHRoZSAqdXBkYXRlciogcm9sZSBydW5zIHRoZSB1cGRhdGUgZnVuY3Rpb24gdG8gbWFrZSB0aGUKLy8gICAgIGNvbnRyYWN0IHJlYWQgdGhlIG5ldyBzdXBwbHkgYW5kIHN3aXRjaCB0byB0aGUgbmV4dCBkYXkKLy8gICAqIHdlIGhhdmUgYSBtaW5pbXVtIGFtb3VudCBpbiBFVEggcGVyIHRyYW5zYWN0aW9uCi8vICAgKiB3ZSBoYXZlIGEgbWF4aW11bSBhbW91bnQgcGVyIHRyYW5zYWN0aW9uIHJlbGF0aXZlIHRvIHRoZSBkYWlseSBzdXBwbHkKLy8KLy8KY29udHJhY3QgSG9sb1NhbGUgaXMgT3duYWJsZSwgUGF1c2FibGV7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIC8vIFN0YXJ0IGFuZCBlbmQgYmxvY2sgd2hlcmUgcHVyY2hhc2VzIGFyZSBhbGxvd2VkIChib3RoIGluY2x1c2l2ZSkKICB1aW50MjU2IHB1YmxpYyBzdGFydEJsb2NrOwogIHVpbnQyNTYgcHVibGljIGVuZEJsb2NrOwogIC8vIEZhY3RvciBiZXR3ZWVuIHdlaSBhbmQgZnVsbCBIb2xvIHRva2Vucy4KICAvLyAoaS5lLiBhIHJhdGUgb2YgMTBeMTggbWVhbnMgb25lIEhvbG8gcGVyIEV0aGVyKQogIHVpbnQyNTYgcHVibGljIHJhdGU7CiAgLy8gUmF0aW8gb2YgdGhlIGN1cnJlbnQgc3VwcGx5IGEgdHJhbnNhY3Rpb24gaXMgYWxsb3dlZCB0byBieQogIHVpbnQyNTYgcHVibGljIG1heGltdW1QZXJjZW50YWdlT2ZEYXlzU3VwcGx5OwogIC8vIE1pbmltdW0gYW1vdW50IG9mIHdlaSBhIHRyYW5zYWN0aW9uIGhhcyB0byBzZW5kCiAgdWludDI1NiBwdWJsaWMgbWluaW11bUFtb3VudFdlaTsKICAvLyBhZGRyZXNzIHdoZXJlIGZ1bmRzIGFyZSBiZWluZyBzZW5kIHRvIG9uIHN1Y2Nlc3NmdWwgYnV5CiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwoKICAvLyBUaGUgdG9rZW4gYmVpbmcgbWludGVkIG9uIHNhbGUKICBIb2xvVG9rZW4gcHJpdmF0ZSB0b2tlbkNvbnRyYWN0OwogIC8vIFRoZSBjb250cmFjdCB0byBjaGVjayBiZW5lZmljaWFyaWVzJyBhZGRyZXNzIGFnYWluc3QKICAvLyBhbmQgdG8gaG9sZCBudW1iZXIgb2YgcmVzZXJ2ZWQgdG9rZW5zIHBlciBkYXkKICBIb2xvV2hpdGVsaXN0IHByaXZhdGUgd2hpdGVsaXN0Q29udHJhY3Q7CgogIC8vIFRoZSBhY2NvdW50IHRoYXQgaXMgYWxsb3dlZCB0byBjYWxsIHVwZGF0ZSgpCiAgLy8gd2hpY2ggd2lsbCBoYXBwZW4gb25jZSBwZXIgZGF5IGR1cmluZyB0aGUgc2FsZSBwZXJpb2QKICBhZGRyZXNzIHByaXZhdGUgdXBkYXRlcjsKCiAgLy8gV2lsbCBiZSBzZXQgdG8gdHJ1ZSBieSBmaW5hbGl6ZSgpCiAgYm9vbCBwcml2YXRlIGZpbmFsaXplZCA9IGZhbHNlOwoKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgLy8gRm9yIGV2ZXJ5IGRheSBvZiB0aGUgc2FsZSB3ZSBzdG9yZSBvbmUgaW5zdGFuY2Ugb2YgdGhpcyBzdHJ1Y3QKICBzdHJ1Y3QgRGF5IHsKICAgIC8vIFRoZSBzdXBwbHkgYXZhaWxhYmxlIHRvIHNlbGwgb24gdGhpcyBkYXkKICAgIHVpbnQyNTYgc3VwcGx5OwogICAgLy8gVGhlIG51bWJlciBvZiB1bnJlc2VydmVkIHRva2VucyBzb2xkIG9uIHRoaXMgZGF5CiAgICB1aW50MjU2IHNvbGRGcm9tVW5yZXNlcnZlZDsKICAgIC8vIE51bWJlciBvZiB0b2tlbnMgcmVzZXJ2ZWQgdG9kYXkKICAgIHVpbnQyNTYgcmVzZXJ2ZWQ7CiAgICAvLyBOdW1iZXIgb2YgcmVzZXJ2ZWQgdG9rZW5zIHNvbGQgdG9kYXkKICAgIHVpbnQyNTYgc29sZEZyb21SZXNlcnZlZDsKICAgIC8vIFdlIGFyZSBzdG9yaW5nIGhvdyBtdWNoIGZ1ZWwgZWFjaCB1c2VyIGhhcyBib3VnaHQgcGVyIGRheQogICAgLy8gdG8gYmUgYWJsZSB0byBhcHBseSBvdXIgcmVsYXRpdmUgY2FwIHBlciB1c2VyIHBlciBkYXkKICAgIC8vIChpLmUuIG5vYm9keSBpcyBhbGxvd2VkIHRvIGJ1eSBtb3JlIHRoYW4gMTAlIG9mIGVhY2ggZGF5J3Mgc3VwcGx5KQogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGZ1ZWxCb3VnaHRCeUFkZHJlc3M7CiAgfQoKICAvLyBHcm93aW5nIGxpc3Qgb2YgZGF5cwogIERheVtdIHB1YmxpYyBzdGF0c0J5RGF5OwoKICBldmVudCBDcmVkaXRzQ3JlYXRlZChhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50MjU2IGFtb3VudFdlaSwgdWludDI1NiBhbW91bnRIb2xvcyk7CiAgZXZlbnQgVXBkYXRlKHVpbnQyNTYgbmV3VG90YWxTdXBwbHksIHVpbnQyNTYgcmVzZXJ2ZWRUb2tlbnNOZXh0RGF5KTsKCiAgbW9kaWZpZXIgb25seVVwZGF0ZXIgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHVwZGF0ZXIpOwogICAgXzsKICB9CgogIC8vIENvbnZlcnRzIHdlaSB0byBzbWFsbGVzdCBmcmFjdGlvbiBvZiBIb2xvIHRva2Vucy4KICAvLyAncmF0ZScgaXMgbWVhbnQgdG8gZ2l2ZSB0aGUgZmFjdG9yIGJldHdlZW4gd2VpcyBhbmQgZnVsbCBIb2xvIHRva2VucywKICAvLyBoZW5jZSB0aGUgZGl2aXNpb24gYnkgMTBeMTguCiAgZnVuY3Rpb24gaG9sb3NGb3JXZWkodWludDI1NiBhbW91bnRXZWkpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGFtb3VudFdlaSAqIHJhdGUgLyAxMDAwMDAwMDAwMDAwMDAwMDAwOwogIH0KCiAgLy8gQ29udHN0cnVjdG9yIHRha2VzIHN0YXJ0IGFuZCBlbmQgYmxvY2sgb2YgdGhlIHNhbGUgcGVyaW9kLAogIC8vIHRoZSByYXRlIHRoYXQgZGVmaW5lcyBob3cgbWFueSBmdWxsIEhvbG8gdG9rZW4gYXJlIGJlaW5nIG1pbnRlZCBwZXIgd2VpCiAgLy8gKHNpbmNlIHRoZSBIb2xvIHRva2VuIGhhcyAxOCBkZWNpbWFscywgMTAwMDAwMDAwMDAwMDAwMDAwMCB3b3VsZCBtZWFuIHRoYXQKICAvLyBvbmUgZnVsbCBIb2xvIGlzIG1pbnRlZCBwZXIgRXRoZXIpLAogIC8vIG1pbmltdW0gYW5kIG1heGltdW0gbGltaXRzIGZvciBpbmNvbWluZyBFVEggdHJhbnNmZXJzCiAgLy8gYW5kIHRoZSB3YWxsZXQgdG8gd2hpY2ggdGhlIEV0aGVycyBhcmUgYmVpbmcgdHJhbnNmZXJlZCBvbiB1cGRhdGVkKCkKICBmdW5jdGlvbiBIb2xvU2FsZSgKICAgIHVpbnQyNTYgX3N0YXJ0QmxvY2ssIHVpbnQyNTYgX2VuZEJsb2NrLAogICAgdWludDI1NiBfcmF0ZSwKICAgIHVpbnQyNTYgX21pbmltdW1BbW91bnRXZWksIHVpbnQyNTYgX21heGltdW1QZXJjZW50YWdlT2ZEYXlzU3VwcGx5LAogICAgYWRkcmVzcyBfd2FsbGV0KSBwdWJsaWMKICB7CiAgICByZXF1aXJlKF9zdGFydEJsb2NrID49IGJsb2NrLm51bWJlcik7CiAgICByZXF1aXJlKF9lbmRCbG9jayA+PSBfc3RhcnRCbG9jayk7CiAgICByZXF1aXJlKF9yYXRlID4gMCk7CiAgICByZXF1aXJlKF93YWxsZXQgIT0gMHgwKTsKCiAgICB1cGRhdGVyID0gbXNnLnNlbmRlcjsKICAgIHN0YXJ0QmxvY2sgPSBfc3RhcnRCbG9jazsKICAgIGVuZEJsb2NrID0gX2VuZEJsb2NrOwogICAgcmF0ZSA9IF9yYXRlOwogICAgbWF4aW11bVBlcmNlbnRhZ2VPZkRheXNTdXBwbHkgPSBfbWF4aW11bVBlcmNlbnRhZ2VPZkRheXNTdXBwbHk7CiAgICBtaW5pbXVtQW1vdW50V2VpID0gX21pbmltdW1BbW91bnRXZWk7CiAgICB3YWxsZXQgPSBfd2FsbGV0OwogIH0KCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBTZXR0ZXJzIGFuZCBHZXR0ZXJzOgogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIGZ1bmN0aW9uIHNldFVwZGF0ZXIoYWRkcmVzcyBfdXBkYXRlcikgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIHVwZGF0ZXIgPSBfdXBkYXRlcjsKICB9CgogIGZ1bmN0aW9uIHNldFRva2VuQ29udHJhY3QoSG9sb1Rva2VuIF90b2tlbkNvbnRyYWN0KSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgdG9rZW5Db250cmFjdCA9IF90b2tlbkNvbnRyYWN0OwogIH0KCiAgZnVuY3Rpb24gc2V0V2hpdGVsaXN0Q29udHJhY3QoSG9sb1doaXRlbGlzdCBfd2hpdGVsaXN0Q29udHJhY3QpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICB3aGl0ZWxpc3RDb250cmFjdCA9IF93aGl0ZWxpc3RDb250cmFjdDsKICB9CgogIGZ1bmN0aW9uIGN1cnJlbnREYXkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gc3RhdHNCeURheS5sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiB0b2RheXNTdXBwbHkoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiBzdGF0c0J5RGF5W2N1cnJlbnREYXkoKS0xXS5zdXBwbHk7CiAgfQoKICBmdW5jdGlvbiB0b2RheVNvbGQoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiBzdGF0c0J5RGF5W2N1cnJlbnREYXkoKS0xXS5zb2xkRnJvbVVucmVzZXJ2ZWQgKyBzdGF0c0J5RGF5W2N1cnJlbnREYXkoKS0xXS5zb2xkRnJvbVJlc2VydmVkOwogIH0KCiAgZnVuY3Rpb24gdG9kYXlSZXNlcnZlZCgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIHN0YXRzQnlEYXlbY3VycmVudERheSgpLTFdLnJlc2VydmVkOwogIH0KCiAgZnVuY3Rpb24gYm91Z2h0VG9kYXkoYWRkcmVzcyBiZW5lZmljaWFyeSkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gc3RhdHNCeURheVtjdXJyZW50RGF5KCktMV0uZnVlbEJvdWdodEJ5QWRkcmVzc1tiZW5lZmljaWFyeV07CiAgfQoKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIFNlbmRpbmcgbW9uZXkgLyBhZGRpbmcgYXNrcwogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8vIEZhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGJ1eSBmdWVsCiAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgYnV5RnVlbChtc2cuc2VuZGVyKTsKICB9CgogIC8vIE1haW4gZnVuY3Rpb24gdGhhdCBjaGVja3MgYWxsIGNvbmRpdGlvbnMgYW5kIHRoZW4gbWludHMgZnVlbCB0b2tlbnMKICAvLyBhbmQgdHJhbnNmZXJzIHRoZSBFVEggdG8gb3VyIHdhbGxldAogIGZ1bmN0aW9uIGJ1eUZ1ZWwoYWRkcmVzcyBiZW5lZmljaWFyeSkgcHVibGljIHBheWFibGUgd2hlbk5vdFBhdXNlZHsKICAgIHJlcXVpcmUoY3VycmVudERheSgpID4gMCk7CiAgICByZXF1aXJlKHdoaXRlbGlzdENvbnRyYWN0LmlzV2hpdGVsaXN0ZWQoYmVuZWZpY2lhcnkpKTsKICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gMHgwKTsKICAgIHJlcXVpcmUod2l0aGluUGVyaW9kKCkpOwoKICAgIC8vIENhbGN1bGF0ZSBob3cgbWFueSBIb2xvcyB0aGlzIHRyYW5zYWN0aW9uIHdvdWxkIGJ1eQogICAgdWludDI1NiBhbW91bnRPZkhvbG9zQXNrZWQgPSBob2xvc0ZvcldlaShtc2cudmFsdWUpOwoKICAgIC8vIEdldCBjdXJyZW50IGRheQogICAgdWludCBkYXlJbmRleCA9IHN0YXRzQnlEYXkubGVuZ3RoLTE7CiAgICBEYXkgc3RvcmFnZSB0b2RheSA9IHN0YXRzQnlEYXlbZGF5SW5kZXhdOwoKICAgIC8vIEZ1bmRlcnMgd2hvIHRvb2sgcGFydCBpbiB0aGUgY3Jvd2RmdW5kIGNvdWxkIGhhdmUgcmVzZXJ2ZWQgdG9rZW5zCiAgICB1aW50MjU2IHJlc2VydmVkSG9sb3MgPSB3aGl0ZWxpc3RDb250cmFjdC5yZXNlcnZlZFRva2VucyhiZW5lZmljaWFyeSwgZGF5SW5kZXgpOwogICAgLy8gSWYgdGhleSBkbywgbWFrZSBzdXJlIHRvIHN1YnRyYWN0IHdoYXQgdGhleSBib3VnaHQgYWxyZWFkeSB0b2RheQogICAgdWludDI1NiBhbHJlYWR5Qm91Z2h0ID0gdG9kYXkuZnVlbEJvdWdodEJ5QWRkcmVzc1tiZW5lZmljaWFyeV07CiAgICBpZihhbHJlYWR5Qm91Z2h0ID49IHJlc2VydmVkSG9sb3MpIHsKICAgICAgcmVzZXJ2ZWRIb2xvcyA9IDA7CiAgICB9IGVsc2UgewogICAgICByZXNlcnZlZEhvbG9zID0gcmVzZXJ2ZWRIb2xvcy5zdWIoYWxyZWFkeUJvdWdodCk7CiAgICB9CgogICAgLy8gQ2FsY3VsYXRlIGlmIHRoZXkgYXNrZWQgbW9yZSB0aGFuIHRoZXkgaGF2ZSByZXNlcnZlZAogICAgdWludDI1NiBhc2tlZE1vcmVUaGFuUmVzZXJ2ZWQ7CiAgICB1aW50MjU2IHVzZUZyb21SZXNlcnZlZDsKICAgIGlmKGFtb3VudE9mSG9sb3NBc2tlZCA+IHJlc2VydmVkSG9sb3MpIHsKICAgICAgYXNrZWRNb3JlVGhhblJlc2VydmVkID0gYW1vdW50T2ZIb2xvc0Fza2VkLnN1YihyZXNlcnZlZEhvbG9zKTsKICAgICAgdXNlRnJvbVJlc2VydmVkID0gcmVzZXJ2ZWRIb2xvczsKICAgIH0gZWxzZSB7CiAgICAgIGFza2VkTW9yZVRoYW5SZXNlcnZlZCA9IDA7CiAgICAgIHVzZUZyb21SZXNlcnZlZCA9IGFtb3VudE9mSG9sb3NBc2tlZDsKICAgIH0KCiAgICBpZihyZXNlcnZlZEhvbG9zID09IDApIHsKICAgICAgLy8gSWYgdGhpcyB0cmFuc2FjdGlvbiBpcyBub3QgY2xhaW1pbmcgcmVzZXJ2ZWQgdG9rZW5zCiAgICAgIC8vIGl0IGhhcyB0byBiZSBvdmVyIHRoZSBtaW5pbXVtLgogICAgICAvLyAoUmVzZXJ2ZWQgdG9rZW5zIG11c3QgYmUgY2xhaW1hYmxlIGV2ZW4gaWYgaXQgd291bGQgYmUganVzdCBmZXcpCiAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IG1pbmltdW1BbW91bnRXZWkpOwogICAgfQoKICAgIC8vIFRoZSBub24tcmVzZXJ2ZWQgdG9rZW5zIGFza2VkIG11c3Qgbm90IGV4Y2VlZCB0aGUgbWF4LXJhdGlvCiAgICAvLyBub3IgdGhlIGF2YWlsYWJsZSBzdXBwbHkuCiAgICByZXF1aXJlKGxlc3NUaGFuTWF4UmF0aW8oYmVuZWZpY2lhcnksIGFza2VkTW9yZVRoYW5SZXNlcnZlZCwgdG9kYXkpKTsKICAgIHJlcXVpcmUobGVzc1RoYW5TdXBwbHkoYXNrZWRNb3JlVGhhblJlc2VydmVkLCB0b2RheSkpOwoKICAgIC8vIEV2ZXJ5dGhpbmcgZmluZSBpZiB3ZSdyZSBoZXJlCiAgICAvLyBTZW5kIEVUSCB0byBvdXIgd2FsbGV0CiAgICB3YWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIC8vIE1pbnQgcmVjZWlwdHMKICAgIHRva2VuQ29udHJhY3QubWludChiZW5lZmljaWFyeSwgYW1vdW50T2ZIb2xvc0Fza2VkKTsKICAgIC8vIExvZyB0aGlzIHNhbGUKICAgIHRvZGF5LnNvbGRGcm9tVW5yZXNlcnZlZCA9IHRvZGF5LnNvbGRGcm9tVW5yZXNlcnZlZC5hZGQoYXNrZWRNb3JlVGhhblJlc2VydmVkKTsKICAgIHRvZGF5LnNvbGRGcm9tUmVzZXJ2ZWQgPSB0b2RheS5zb2xkRnJvbVJlc2VydmVkLmFkZCh1c2VGcm9tUmVzZXJ2ZWQpOwogICAgdG9kYXkuZnVlbEJvdWdodEJ5QWRkcmVzc1tiZW5lZmljaWFyeV0gPSB0b2RheS5mdWVsQm91Z2h0QnlBZGRyZXNzW2JlbmVmaWNpYXJ5XS5hZGQoYW1vdW50T2ZIb2xvc0Fza2VkKTsKICAgIENyZWRpdHNDcmVhdGVkKGJlbmVmaWNpYXJ5LCBtc2cudmFsdWUsIGFtb3VudE9mSG9sb3NBc2tlZCk7CiAgfQoKICAvLyBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIGluIHRoZSBsaXZlIHBlcmlvZCBvZiB0aGUgc2FsZQogIGZ1bmN0aW9uIHdpdGhpblBlcmlvZCgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHVpbnQyNTYgY3VycmVudCA9IGJsb2NrLm51bWJlcjsKICAgIHJldHVybiBjdXJyZW50ID49IHN0YXJ0QmxvY2sgJiYgY3VycmVudCA8PSBlbmRCbG9jazsKICB9CgogIC8vIFJldHVybnMgdHJ1ZSBpZiBhbW91bnQgKyBwbHVzIGZ1ZWwgYm91Z2h0IHRvZGF5IGFscmVhZHkgaXMgbm90IGFib3ZlCiAgLy8gdGhlIG1heGltdW0gc2hhcmUgb25lIGNvdWxkIGJ1eSB0b2RheQogIGZ1bmN0aW9uIGxlc3NUaGFuTWF4UmF0aW8oYWRkcmVzcyBiZW5lZmljaWFyeSwgdWludDI1NiBhbW91bnQsIERheSBzdG9yYWdlIHRvZGF5KSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHVpbnQyNTYgYm91Z2h0VG9kYXlCZWZvcmUgPSB0b2RheS5mdWVsQm91Z2h0QnlBZGRyZXNzW2JlbmVmaWNpYXJ5XTsKICAgIHJldHVybiBib3VnaHRUb2RheUJlZm9yZS5hZGQoYW1vdW50KS5tdWwoMTAwKS5kaXYobWF4aW11bVBlcmNlbnRhZ2VPZkRheXNTdXBwbHkpIDw9IHRvZGF5LnN1cHBseTsKICB9CgogIC8vIFJldHVybnMgZmFsc2UgaWYgYW1vdW50IHdvdWxkIGJ1eSBtb3JlIGZ1ZWwgdGhhbiB3ZSBjYW4gc2VsbCB0b2RheQogIGZ1bmN0aW9uIGxlc3NUaGFuU3VwcGx5KHVpbnQyNTYgYW1vdW50LCBEYXkgdG9kYXkpIGludGVybmFsIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHRvZGF5LnNvbGRGcm9tVW5yZXNlcnZlZC5hZGQoYW1vdW50KSA8PSB0b2RheS5zdXBwbHkuc3ViKHRvZGF5LnJlc2VydmVkKTsKICB9CgogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gVXBkYXRlCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgogIGZ1bmN0aW9uIHVwZGF0ZSh1aW50MjU2IG5ld1RvdGFsU3VwcGx5LCB1aW50MjU2IHJlc2VydmVkVG9rZW5zTmV4dERheSkgZXh0ZXJuYWwgb25seVVwZGF0ZXIgewogICAgdG90YWxTdXBwbHkgPSBuZXdUb3RhbFN1cHBseTsKICAgIC8vIGRheXNTdXBwbHkgaXMgdGhlIGFtb3VudCBvZiB0b2tlbnMgKCoxMF4xOCkgdGhhdCB3ZSBjYW4gc2VsbCB0b2RheQogICAgdWludDI1NiBkYXlzU3VwcGx5ID0gbmV3VG90YWxTdXBwbHkuc3ViKHRva2VuQ29udHJhY3QudG90YWxTdXBwbHkoKSk7CiAgICBzdGF0c0J5RGF5LnB1c2goRGF5KGRheXNTdXBwbHksIDAsIHJlc2VydmVkVG9rZW5zTmV4dERheSwgMCkpOwogICAgVXBkYXRlKG5ld1RvdGFsU3VwcGx5LCByZXNlcnZlZFRva2Vuc05leHREYXkpOwogIH0KCiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBGaW5hbGl6ZQogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8vIFJldHVybnMgdHJ1ZSBpZiBjcm93ZHNhbGUgZXZlbnQgaGFzIGVuZGVkCiAgZnVuY3Rpb24gaGFzRW5kZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIGJsb2NrLm51bWJlciA+IGVuZEJsb2NrOwogIH0KCiAgLy8gTWludHMgYSB0aGlyZCBvZiBhbGwgdG9rZW5zIG1pbnRlZCBzbyBmYXIgZm9yIHRoZSB0ZWFtLgogIC8vID0+IFRlYW0gZW5kcyB1cCB3aXRoIDI1JSBvZiBhbGwgdG9rZW5zLgogIC8vIEFsc28gY2FsbHMgZmluaXNoTWludGluZygpIG9uIHRoZSB0b2tlbiBjb250cmFjdCB3aGljaCBtYWtlcyBpdAogIC8vIGltcG9zc2libGUgdG8gbWludCBtb3JlLgogIGZ1bmN0aW9uIGZpbmFsaXplKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIHJlcXVpcmUoIWZpbmFsaXplZCk7CiAgICByZXF1aXJlKGhhc0VuZGVkKCkpOwogICAgdWludDI1NiByZWNlaXB0c01pbnRlZCA9IHRva2VuQ29udHJhY3QudG90YWxTdXBwbHkoKTsKICAgIHVpbnQyNTYgc2hhcmVGb3JUaGVUZWFtID0gcmVjZWlwdHNNaW50ZWQuZGl2KDMpOwogICAgdG9rZW5Db250cmFjdC5taW50KHdhbGxldCwgc2hhcmVGb3JUaGVUZWFtKTsKICAgIHRva2VuQ29udHJhY3QuZmluaXNoTWludGluZygpOwogICAgZmluYWxpemVkID0gdHJ1ZTsKICB9Cn0='.
	

]
