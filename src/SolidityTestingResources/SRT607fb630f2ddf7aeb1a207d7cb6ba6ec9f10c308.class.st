Class {
	#name : #SRT607fb630f2ddf7aeb1a207d7cb6ba6ec9f10c308,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT607fb630f2ddf7aeb1a207d7cb6ba6ec9f10c308 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBEU05vdGUgewogICAgZXZlbnQgTG9nTm90ZSgKICAgIGJ5dGVzNCAgIGluZGV4ZWQgIHNpZywKICAgIGFkZHJlc3MgIGluZGV4ZWQgIGd1eSwKICAgIGJ5dGVzMzIgIGluZGV4ZWQgIGZvbywKICAgIGJ5dGVzMzIgIGluZGV4ZWQgIGJhciwKICAgIHVpbnQJIAkgIHdhZCwKICAgIGJ5dGVzICAgICAgICAgICAgIGZheAogICAgKSBhbm9ueW1vdXM7CgogICAgbW9kaWZpZXIgbm90ZSB7CiAgICAgICAgYnl0ZXMzMiBmb287CiAgICAgICAgYnl0ZXMzMiBiYXI7CgogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICBmb28gOj0gY2FsbGRhdGFsb2FkKDQpCiAgICAgICAgYmFyIDo9IGNhbGxkYXRhbG9hZCgzNikKICAgICAgICB9CgogICAgICAgIExvZ05vdGUobXNnLnNpZywgbXNnLnNlbmRlciwgZm9vLCBiYXIsIG1zZy52YWx1ZSwgbXNnLmRhdGEpOwoKICAgICAgICBfOwogICAgfQp9Cgpjb250cmFjdCBFUkMyMCB7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgc3VwcGx5KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZiggYWRkcmVzcyB3aG8gKSBjb25zdGFudCByZXR1cm5zICh1aW50IHZhbHVlKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZSggYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyICkgY29uc3RhbnQgcmV0dXJucyAodWludCBfYWxsb3dhbmNlKTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlciggYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUgKSByZXR1cm5zIChib29sIG9rKTsKCiAgICBldmVudCBUcmFuc2ZlciggYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbCggYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCmNvbnRyYWN0IERTQXV0aG9yaXR5IHsKICAgIGZ1bmN0aW9uIGNhbkNhbGwoCiAgICBhZGRyZXNzIHNyYywgYWRkcmVzcyBkc3QsIGJ5dGVzNCBzaWcKICAgICkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IERTQXV0aEV2ZW50cyB7CiAgICBldmVudCBMb2dTZXRBdXRob3JpdHkgKGFkZHJlc3MgaW5kZXhlZCBhdXRob3JpdHkpOwogICAgZXZlbnQgTG9nU2V0T3duZXIgICAgIChhZGRyZXNzIGluZGV4ZWQgb3duZXIpOwp9Cgpjb250cmFjdCBEU0F1dGggaXMgRFNBdXRoRXZlbnRzIHsKICAgIERTQXV0aG9yaXR5ICBwdWJsaWMgIGF1dGhvcml0eTsKICAgIGFkZHJlc3MgICAgICBwdWJsaWMgIG93bmVyOwoKICAgIGZ1bmN0aW9uIERTQXV0aCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgTG9nU2V0T3duZXIobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0T3duZXIoYWRkcmVzcyBvd25lcl8pCiAgICBhdXRoCiAgICB7CiAgICAgICAgb3duZXIgPSBvd25lcl87CiAgICAgICAgTG9nU2V0T3duZXIob3duZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEF1dGhvcml0eShEU0F1dGhvcml0eSBhdXRob3JpdHlfKQogICAgYXV0aAogICAgewogICAgICAgIGF1dGhvcml0eSA9IGF1dGhvcml0eV87CiAgICAgICAgTG9nU2V0QXV0aG9yaXR5KGF1dGhvcml0eSk7CiAgICB9CgogICAgbW9kaWZpZXIgYXV0aCB7CiAgICAgICAgYXNzZXJ0KGlzQXV0aG9yaXplZChtc2cuc2VuZGVyLCBtc2cuc2lnKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBhdXRob3JpemVkKGJ5dGVzNCBzaWcpIHsKICAgICAgICBhc3NlcnQoaXNBdXRob3JpemVkKG1zZy5zZW5kZXIsIHNpZykpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gaXNBdXRob3JpemVkKGFkZHJlc3Mgc3JjLCBieXRlczQgc2lnKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKHNyYyA9PSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoc3JjID09IG93bmVyKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoYXV0aG9yaXR5ID09IERTQXV0aG9yaXR5KDApKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gYXV0aG9yaXR5LmNhbkNhbGwoc3JjLCB0aGlzLCBzaWcpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnQoYm9vbCB4KSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKCF4KSByZXZlcnQoKTsKICAgIH0KfQoKY29udHJhY3QgRFNFeGVjIHsKICAgIGZ1bmN0aW9uIHRyeUV4ZWMoIGFkZHJlc3MgdGFyZ2V0LCBieXRlcyBjYWxsZGF0YSwgdWludCB2YWx1ZSkKICAgIGludGVybmFsCiAgICByZXR1cm5zIChib29sIGNhbGxfcmV0KQogICAgewogICAgICAgIHJldHVybiB0YXJnZXQuY2FsbC52YWx1ZSh2YWx1ZSkoY2FsbGRhdGEpOwogICAgfQogICAgZnVuY3Rpb24gZXhlYyggYWRkcmVzcyB0YXJnZXQsIGJ5dGVzIGNhbGxkYXRhLCB1aW50IHZhbHVlKQogICAgaW50ZXJuYWwKICAgIHsKICAgICAgICBpZighdHJ5RXhlYyh0YXJnZXQsIGNhbGxkYXRhLCB2YWx1ZSkpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIENvbnZlbmllbmNlIGFsaWFzZXMKICAgIGZ1bmN0aW9uIGV4ZWMoIGFkZHJlc3MgdCwgYnl0ZXMgYyApCiAgICBpbnRlcm5hbAogICAgewogICAgICAgIGV4ZWModCwgYywgMCk7CiAgICB9CiAgICBmdW5jdGlvbiBleGVjKCBhZGRyZXNzIHQsIHVpbnQyNTYgdiApCiAgICBpbnRlcm5hbAogICAgewogICAgICAgIGJ5dGVzIG1lbW9yeSBjOyBleGVjKHQsIGMsIHYpOwogICAgfQogICAgZnVuY3Rpb24gdHJ5RXhlYyggYWRkcmVzcyB0LCBieXRlcyBjICkKICAgIGludGVybmFsCiAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiB0cnlFeGVjKHQsIGMsIDApOwogICAgfQogICAgZnVuY3Rpb24gdHJ5RXhlYyggYWRkcmVzcyB0LCB1aW50MjU2IHYgKQogICAgaW50ZXJuYWwKICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgYnl0ZXMgbWVtb3J5IGM7IHJldHVybiB0cnlFeGVjKHQsIGMsIHYpOwogICAgfQp9Cgpjb250cmFjdCBEU01hdGggewoKICAgIC8qCiAgICBzdGFuZGFyZCB1aW50MjU2IGZ1bmN0aW9ucwogICAgICovCgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB4ICsgeSkgPj0geCk7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB4IC0geSkgPD0geCk7CiAgICB9CgogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB4ICogeSkgPj0geCk7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICB6ID0geCAvIHk7CiAgICB9CgogICAgZnVuY3Rpb24gbWluKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICByZXR1cm4geCA8PSB5ID8geCA6IHk7CiAgICB9CiAgICBmdW5jdGlvbiBtYXgodWludDI1NiB4LCB1aW50MjU2IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgICAgIHJldHVybiB4ID49IHkgPyB4IDogeTsKICAgIH0KCiAgICAvKgogICAgdWludDEyOCBmdW5jdGlvbnMgKGggaXMgZm9yIGhhbGYpCiAgICAgKi8KCgogICAgZnVuY3Rpb24gaGFkZCh1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCB6KSB7CiAgICAgICAgYXNzZXJ0KCh6ID0geCArIHkpID49IHgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGhzdWIodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIGFzc2VydCgoeiA9IHggLSB5KSA8PSB4KTsKICAgIH0KCiAgICBmdW5jdGlvbiBobXVsKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB4ICogeSkgPj0geCk7CiAgICB9CgogICAgZnVuY3Rpb24gaGRpdih1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCB6KSB7CiAgICAgICAgeiA9IHggLyB5OwogICAgfQoKICAgIGZ1bmN0aW9uIGhtaW4odWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIHJldHVybiB4IDw9IHkgPyB4IDogeTsKICAgIH0KICAgIGZ1bmN0aW9uIGhtYXgodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIHJldHVybiB4ID49IHkgPyB4IDogeTsKICAgIH0KCgogICAgLyoKICAgIGludDI1NiBmdW5jdGlvbnMKICAgICAqLwoKICAgIGZ1bmN0aW9uIGltaW4oaW50MjU2IHgsIGludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChpbnQyNTYgeikgewogICAgICAgIHJldHVybiB4IDw9IHkgPyB4IDogeTsKICAgIH0KICAgIGZ1bmN0aW9uIGltYXgoaW50MjU2IHgsIGludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChpbnQyNTYgeikgewogICAgICAgIHJldHVybiB4ID49IHkgPyB4IDogeTsKICAgIH0KCiAgICAvKgogICAgV0FEIG1hdGgKICAgICAqLwoKICAgIHVpbnQxMjggY29uc3RhbnQgV0FEID0gMTAgKiogMTg7CgogICAgZnVuY3Rpb24gd2FkZCh1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCkgewogICAgICAgIHJldHVybiBoYWRkKHgsIHkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdzdWIodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjgpIHsKICAgICAgICByZXR1cm4gaHN1Yih4LCB5KTsKICAgIH0KCiAgICBmdW5jdGlvbiB3bXVsKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICB6ID0gY2FzdCgodWludDI1Nih4KSAqIHkgKyBXQUQgLyAyKSAvIFdBRCk7CiAgICB9CgogICAgZnVuY3Rpb24gd2Rpdih1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCB6KSB7CiAgICAgICAgeiA9IGNhc3QoKHVpbnQyNTYoeCkgKiBXQUQgKyB5IC8gMikgLyB5KTsKICAgIH0KCiAgICBmdW5jdGlvbiB3bWluKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4KSB7CiAgICAgICAgcmV0dXJuIGhtaW4oeCwgeSk7CiAgICB9CiAgICBmdW5jdGlvbiB3bWF4KHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4KSB7CiAgICAgICAgcmV0dXJuIGhtYXgoeCwgeSk7CiAgICB9CgogICAgLyoKICAgIFJBWSBtYXRoCiAgICAgKi8KCiAgICB1aW50MTI4IGNvbnN0YW50IFJBWSA9IDEwICoqIDI3OwoKICAgIGZ1bmN0aW9uIHJhZGQodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjgpIHsKICAgICAgICByZXR1cm4gaGFkZCh4LCB5KTsKICAgIH0KCiAgICBmdW5jdGlvbiByc3ViKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4KSB7CiAgICAgICAgcmV0dXJuIGhzdWIoeCwgeSk7CiAgICB9CgogICAgZnVuY3Rpb24gcm11bCh1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCB6KSB7CiAgICAgICAgeiA9IGNhc3QoKHVpbnQyNTYoeCkgKiB5ICsgUkFZIC8gMikgLyBSQVkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJkaXYodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIHogPSBjYXN0KCh1aW50MjU2KHgpICogUkFZICsgeSAvIDIpIC8geSk7CiAgICB9CgogICAgZnVuY3Rpb24gcnBvdyh1aW50MTI4IHgsIHVpbnQ2NCBuKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICAvLyBUaGlzIGZhbW91cyBhbGdvcml0aG0gaXMgY2FsbGVkICJleHBvbmVudGlhdGlvbiBieSBzcXVhcmluZyIKICAgICAgICAvLyBhbmQgY2FsY3VsYXRlcyB4Xm4gd2l0aCB4IGFzIGZpeGVkLXBvaW50IGFuZCBuIGFzIHJlZ3VsYXIgdW5zaWduZWQuCiAgICAgICAgLy8KICAgICAgICAvLyBJdCdzIE8obG9nIG4pLCBpbnN0ZWFkIG9mIE8obikgZm9yIG5haXZlIHJlcGVhdGVkIG11bHRpcGxpY2F0aW9uLgogICAgICAgIC8vCiAgICAgICAgLy8gVGhlc2UgZmFjdHMgYXJlIHdoeSBpdCB3b3JrczoKICAgICAgICAvLwogICAgICAgIC8vICBJZiBuIGlzIGV2ZW4sIHRoZW4geF5uID0gKHheMileKG4vMikuCiAgICAgICAgLy8gIElmIG4gaXMgb2RkLCAgdGhlbiB4Xm4gPSB4ICogeF4obi0xKSwKICAgICAgICAvLyAgIGFuZCBhcHBseWluZyB0aGUgZXF1YXRpb24gZm9yIGV2ZW4geCBnaXZlcwogICAgICAgIC8vICAgIHhebiA9IHggKiAoeF4yKV4oKG4tMSkgLyAyKS4KICAgICAgICAvLwogICAgICAgIC8vICBBbHNvLCBFVk0gZGl2aXNpb24gaXMgZmxvb3JpbmcgYW5kCiAgICAgICAgLy8gICAgZmxvb3JbKG4tMSkgLyAyXSA9IGZsb29yW24gLyAyXS4KCiAgICAgICAgeiA9IG4gJSAyICE9IDAgPyB4IDogUkFZOwoKICAgICAgICBmb3IgKG4gLz0gMjsgbiAhPSAwOyBuIC89IDIpIHsKICAgICAgICAgICAgeCA9IHJtdWwoeCwgeCk7CgogICAgICAgICAgICBpZiAobiAlIDIgIT0gMCkgewogICAgICAgICAgICAgICAgeiA9IHJtdWwoeiwgeCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcm1pbih1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCkgewogICAgICAgIHJldHVybiBobWluKHgsIHkpOwogICAgfQogICAgZnVuY3Rpb24gcm1heCh1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCkgewogICAgICAgIHJldHVybiBobWF4KHgsIHkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhc3QodWludDI1NiB4KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB1aW50MTI4KHgpKSA9PSB4KTsKICAgIH0KCn0KCmNvbnRyYWN0IERTU3RvcCBpcyBEU0F1dGgsIERTTm90ZSB7CgogICAgYm9vbCBwdWJsaWMgc3RvcHBlZDsKCiAgICBtb2RpZmllciBzdG9wcGFibGUgewogICAgICAgIGFzc2VydCAoIXN0b3BwZWQpOwogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbiBzdG9wKCkgYXV0aCBub3RlIHsKICAgICAgICBzdG9wcGVkID0gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIHN0YXJ0KCkgYXV0aCBub3RlIHsKICAgICAgICBzdG9wcGVkID0gZmFsc2U7CiAgICB9Cgp9Cgpjb250cmFjdCBEU1Rva2VuQmFzZSBpcyBFUkMyMCwgRFNNYXRoIHsKICAgIHVpbnQyNTYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdXBwbHk7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpICAgICAgICAgICAgICAgICAgICAgICBfYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpICBfYXBwcm92YWxzOwoKICAgIGZ1bmN0aW9uIERTVG9rZW5CYXNlKHVpbnQyNTYgc3VwcGx5KSB7CiAgICAgICAgX2JhbGFuY2VzW21zZy5zZW5kZXJdID0gc3VwcGx5OwogICAgICAgIF9zdXBwbHkgPSBzdXBwbHk7CiAgICB9CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIF9zdXBwbHk7CiAgICB9CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBzcmMpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gX2JhbGFuY2VzW3NyY107CiAgICB9CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBzcmMsIGFkZHJlc3MgZ3V5KSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIF9hcHByb3ZhbHNbc3JjXVtndXldOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgZHN0LCB1aW50IHdhZCkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFzc2VydChfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gd2FkKTsKCiAgICAgICAgX2JhbGFuY2VzW21zZy5zZW5kZXJdID0gc3ViKF9iYWxhbmNlc1ttc2cuc2VuZGVyXSwgd2FkKTsKICAgICAgICBfYmFsYW5jZXNbZHN0XSA9IGFkZChfYmFsYW5jZXNbZHN0XSwgd2FkKTsKCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgZHN0LCB3YWQpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBzcmMsIGFkZHJlc3MgZHN0LCB1aW50IHdhZCkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFzc2VydChfYmFsYW5jZXNbc3JjXSA+PSB3YWQpOwogICAgICAgIGFzc2VydChfYXBwcm92YWxzW3NyY11bbXNnLnNlbmRlcl0gPj0gd2FkKTsKCiAgICAgICAgX2FwcHJvdmFsc1tzcmNdW21zZy5zZW5kZXJdID0gc3ViKF9hcHByb3ZhbHNbc3JjXVttc2cuc2VuZGVyXSwgd2FkKTsKICAgICAgICBfYmFsYW5jZXNbc3JjXSA9IHN1YihfYmFsYW5jZXNbc3JjXSwgd2FkKTsKICAgICAgICBfYmFsYW5jZXNbZHN0XSA9IGFkZChfYmFsYW5jZXNbZHN0XSwgd2FkKTsKCiAgICAgICAgVHJhbnNmZXIoc3JjLCBkc3QsIHdhZCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBndXksIHVpbnQyNTYgd2FkKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgX2FwcHJvdmFsc1ttc2cuc2VuZGVyXVtndXldID0gd2FkOwoKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBndXksIHdhZCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKfQoKY29udHJhY3QgRFNUb2tlbiBpcyBEU1Rva2VuQmFzZSgwKSwgRFNTdG9wIHsKCiAgICBzdHJpbmcgIHB1YmxpYyAgc3ltYm9sOwogICAgdWludDI1NiAgcHVibGljICBkZWNpbWFscyA9IDg7IC8vIHN0YW5kYXJkIHRva2VuIHByZWNpc2lvbi4gb3ZlcnJpZGUgdG8gY3VzdG9taXplCgogICAgZnVuY3Rpb24gRFNUb2tlbihzdHJpbmcgc3ltYm9sXykgewogICAgICAgIHN5bWJvbCA9IHN5bWJvbF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBkc3QsIHVpbnQgd2FkKSBzdG9wcGFibGUgbm90ZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKGRzdCwgd2FkKTsKICAgIH0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgKICAgIGFkZHJlc3Mgc3JjLCBhZGRyZXNzIGRzdCwgdWludCB3YWQKICAgICkgc3RvcHBhYmxlIG5vdGUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oc3JjLCBkc3QsIHdhZCk7CiAgICB9CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgZ3V5LCB1aW50IHdhZCkgc3RvcHBhYmxlIG5vdGUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdXBlci5hcHByb3ZlKGd1eSwgd2FkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwdXNoKGFkZHJlc3MgZHN0LCB1aW50MTI4IHdhZCkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB0cmFuc2Zlcihkc3QsIHdhZCk7CiAgICB9CgogICAgZnVuY3Rpb24gcHVsbChhZGRyZXNzIHNyYywgdWludDEyOCB3YWQpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXJGcm9tKHNyYywgbXNnLnNlbmRlciwgd2FkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50KHVpbnQxMjggd2FkKSBhdXRoIHN0b3BwYWJsZSBub3RlIHsKICAgICAgICBfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBhZGQoX2JhbGFuY2VzW21zZy5zZW5kZXJdLCB3YWQpOwogICAgICAgIF9zdXBwbHkgPSBhZGQoX3N1cHBseSwgd2FkKTsKICAgIH0KICAgIGZ1bmN0aW9uIGJ1cm4odWludDEyOCB3YWQpIGF1dGggc3RvcHBhYmxlIG5vdGUgewogICAgICAgIF9iYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHN1YihfYmFsYW5jZXNbbXNnLnNlbmRlcl0sIHdhZCk7CiAgICAgICAgX3N1cHBseSA9IHN1Yihfc3VwcGx5LCB3YWQpOwogICAgfQoKICAgIC8vIE9wdGlvbmFsIHRva2VuIG5hbWUKCiAgICBzdHJpbmcgcHVibGljICBuYW1lID0gIiI7CgogICAgZnVuY3Rpb24gc2V0TmFtZShzdHJpbmcgbmFtZV8pIGF1dGggewogICAgICAgIG5hbWUgPSBuYW1lXzsKICAgIH0KCn0KCmNvbnRyYWN0IFdvcmRDb2luIGlzIERTVG9rZW4oJ1dvcmQnKXsKICAgIGFkZHJlc3MgcHVibGljIE9mZmVyQ29udHJhY3Q7CgogICAgdWludCBwdWJsaWMgdG9rZW5TZWxsQ29zdDsKICAgIHVpbnQgcHVibGljIHRva2VuQnV5Q29zdDsKICAgIGJvb2wgcHVibGljIGlzU2VsbGFibGU7CiAgICB1aW50IHB1YmxpYyBzZWNvbmRzQWZ0ZXI7CiAgICB1aW50IHB1YmxpYyBkZXBvc2l0UGVyY2VudHM7CgogICAgYWRkcmVzcyBwdWJsaWMgSUNPQ29udHJhY3Q7CiAgICBhZGRyZXNzIHB1YmxpYyBwcmVJQ09Db250cmFjdDsKCiAgICBzdHJ1Y3QgRGVwb3NpdCB7CiAgICB1aW50IGFtb3VudDsKICAgIHVpbnQgdGltZTsKICAgIH0KCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyByZXNlcnZlZENvaW5zOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBEZXBvc2l0KSBwdWJsaWMgZGVwb3NpdHM7CgogICAgZXZlbnQgTG9nQm91bnR5KGFkZHJlc3MgdXNlciwgdWludCBhbW91bnQsIHN0cmluZyBtZXNzYWdlKTsKICAgIGV2ZW50IExvZ0V0aGVyQm91bnR5KGFkZHJlc3MgdXNlciwgdWludCBhbW91bnQsIHN0cmluZyBtZXNzYWdlKTsKICAgIGV2ZW50IExvZ1NlbmRSZXdhcmQoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCBzdHJpbmcgbWVzc2FnZSk7CiAgICBldmVudCBMb2dCdXlDb2lucyhhZGRyZXNzIHVzZXIsIHVpbnQgdmFsdWUsIHN0cmluZyBtZXNzYWdlKTsKICAgIGV2ZW50IExvZ0dldEV0aGVyKGFkZHJlc3MgdXNlciwgdWludCB2YWx1ZSwgc3RyaW5nIG1lc3NhZ2UpOwogICAgZXZlbnQgTG9nTWFrZURlcG9zaXQoYWRkcmVzcyB1c2VyLCB1aW50IHZhbHVlLCBzdHJpbmcgbWVzc2FnZSk7CiAgICBldmVudCBMb2dHZXREZXBvc2l0KGFkZHJlc3MgdXNlciwgdWludCB2YWx1ZSwgc3RyaW5nIG1lc3NhZ2UpOwoKICAgIGZ1bmN0aW9uIFdvcmRDb2luKCl7CiAgICB9CgoKICAgIG1vZGlmaWVyIHNlbGxhYmxlIHsKICAgICAgICBhc3NlcnQoaXNTZWxsYWJsZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T2ZmZXIgewogICAgICAgIGFzc2VydChtc2cuc2VuZGVyID09IE9mZmVyQ29udHJhY3QpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seXByZUlDTyB7CiAgICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gcHJlSUNPQ29udHJhY3QpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUlDTyB7CiAgICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gSUNPQ29udHJhY3QpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gc2V0SUNPKGFkZHJlc3MgSUNPKSBhdXRoIHsKICAgICAgICBJQ09Db250cmFjdCA9IElDTzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRQcmVJQ08oYWRkcmVzcyBwcmVJQ08pIGF1dGggewogICAgICAgIHByZUlDT0NvbnRyYWN0ID0gcHJlSUNPOwogICAgfQoKICAgIGZ1bmN0aW9uIHByZUlDT21pbnQodWludDEyOCB3YWQpIG9ubHlwcmVJQ08gewogICAgICAgIF9iYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGFkZChfYmFsYW5jZXNbbXNnLnNlbmRlcl0sIHdhZCk7CiAgICAgICAgX3N1cHBseSA9IGFkZChfc3VwcGx5LCB3YWQpOwogICAgfQoKCiAgICBmdW5jdGlvbiBJQ09taW50KHVpbnQxMjggd2FkKSBvbmx5SUNPIHsKICAgICAgICBfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBhZGQoX2JhbGFuY2VzW21zZy5zZW5kZXJdLCB3YWQpOwogICAgICAgIF9zdXBwbHkgPSBhZGQoX3N1cHBseSwgd2FkKTsKICAgIH0KCgogICAgZnVuY3Rpb24gYm91bnR5KGFkZHJlc3MgdXNlciwgdWludCBhbW91bnQpIGF1dGggewogICAgICAgIGFzc2VydChfYmFsYW5jZXNbdGhpc10gPj0gYW1vdW50KTsKCiAgICAgICAgX2JhbGFuY2VzW3VzZXJdICs9IGFtb3VudDsKICAgICAgICBfYmFsYW5jZXNbdGhpc10gLT0gYW1vdW50OwogICAgICAgIExvZ0JvdW50eSh1c2VyLCBhbW91bnQsICJTZW50IGJvdW50eSIpOwogICAgfQoKCiAgICBmdW5jdGlvbiBldGhlckJvdW50eShhZGRyZXNzIHVzZXIsIHVpbnQgYW1vdW50KSBhdXRoIHsKICAgICAgICBhc3NlcnQodGhpcy5iYWxhbmNlID49IGFtb3VudCk7CiAgICAgICAgdXNlci50cmFuc2ZlcihhbW91bnQpOwogICAgICAgIExvZ0V0aGVyQm91bnR5KHVzZXIsIGFtb3VudCwgIlNlbnQgZXRoZXIgYm91bnR5Iik7CiAgICB9CgoKICAgIGZ1bmN0aW9uIHNlbmRSZXdhcmQoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBvbmx5T2ZmZXIgewogICAgICAgIHJlc2VydmVkQ29pbnNbZnJvbV0gLT0gdmFsdWU7CiAgICAgICAgX2JhbGFuY2VzW3RvXSArPSB2YWx1ZTsKICAgICAgICBMb2dTZW5kUmV3YXJkKGZyb20sIHRvLCAiU2VudCByZXdhcmQiKTsKICAgIH0KCgogICAgZnVuY3Rpb24gcmVzZXJ2ZUNvaW5zKGFkZHJlc3MgZnJvbSwgdWludCB2YWx1ZSkgb25seU9mZmVyIHsKICAgICAgICBfYmFsYW5jZXNbZnJvbV0gLT0gdmFsdWU7CiAgICAgICAgcmVzZXJ2ZWRDb2luc1tmcm9tXSArPSB2YWx1ZTsKICAgIH0KCgogICAgZnVuY3Rpb24gZGVjbGluZUNvaW5zKGFkZHJlc3MgZnJvbSwgdWludCB2YWx1ZSkgb25seU9mZmVyIHsKICAgICAgICBfYmFsYW5jZXNbZnJvbV0gKz0gdmFsdWU7CiAgICAgICAgcmVzZXJ2ZWRDb2luc1tmcm9tXSAtPSB2YWx1ZTsKICAgIH0KCgogICAgZnVuY3Rpb24gZ2V0RXRoZXIodWludDEyOCBhbW91bnQpIHNlbGxhYmxlIHsKICAgICAgICAvLyBleGNoYW5nZSBjb2lucyB0byBFdGhlcnMgd2l0aCBleGNoYW5nZSBjb3Vyc2UKICAgICAgICBhc3NlcnQodG9rZW5TZWxsQ29zdCA+IDApOwogICAgICAgIGFzc2VydChkaXYobXVsKF9iYWxhbmNlc1ttc2cuc2VuZGVyXSwgMTApLCAxMDApID49IGFtb3VudCk7CiAgICAgICAgc3VwZXIucHVzaCh0aGlzLCBhbW91bnQpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoYW1vdW50ICogdG9rZW5TZWxsQ29zdCk7CiAgICAgICAgTG9nR2V0RXRoZXIobXNnLnNlbmRlciwgYW1vdW50ICogdG9rZW5TZWxsQ29zdCwgIkdvdCBFdGhlciIpOwogICAgfQoKCiAgICBmdW5jdGlvbiBtYWtlRGVwb3NpdCh1aW50IGFtb3VudCkgewogICAgICAgIGFzc2VydChfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPiBhbW91bnQpOwogICAgICAgIGFzc2VydChkZXBvc2l0c1ttc2cuc2VuZGVyXS5hbW91bnQgPT0gMCk7CgogICAgICAgIGRlcG9zaXRzW21zZy5zZW5kZXJdLmFtb3VudCA9IGFtb3VudDsKICAgICAgICBkZXBvc2l0c1ttc2cuc2VuZGVyXS50aW1lID0gbm93OwogICAgICAgIF9iYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBhbW91bnQ7CiAgICAgICAgX2JhbGFuY2VzW3RoaXNdICs9IGFtb3VudDsKICAgICAgICBMb2dNYWtlRGVwb3NpdChtc2cuc2VuZGVyLCBhbW91bnQsICJNYWRlIGRlcG9zaXQiKTsKICAgIH0KCgogICAgZnVuY3Rpb24gZ2V0RGVwb3NpdCgpIHsKICAgICAgICBhc3NlcnQoZGVwb3NpdHNbbXNnLnNlbmRlcl0uYW1vdW50ICE9IDApOwogICAgICAgIGFzc2VydChub3cgPiAoZGVwb3NpdHNbbXNnLnNlbmRlcl0udGltZSArIG11bChzZWNvbmRzQWZ0ZXIsIDEgc2Vjb25kcykpKTsKICAgICAgICBhc3NlcnQoX2JhbGFuY2VzW3RoaXNdID4gZGl2KG11bChkZXBvc2l0c1ttc2cuc2VuZGVyXS5hbW91bnQsIGFkZCgxMDAsIGRlcG9zaXRQZXJjZW50cykpLCAxMDApKTsKCiAgICAgICAgdWludCBhbW91bnQgPSBkaXYobXVsKGRlcG9zaXRzW21zZy5zZW5kZXJdLmFtb3VudCwgYWRkKDEwMCwgZGVwb3NpdFBlcmNlbnRzKSksIDEwMCk7CiAgICAgICAgZGVwb3NpdHNbbXNnLnNlbmRlcl0uYW1vdW50ID0gMDsKICAgICAgICBfYmFsYW5jZXNbbXNnLnNlbmRlcl0gICs9IGFtb3VudDsKICAgICAgICBfYmFsYW5jZXNbdGhpc10gLT0gYW1vdW50OwogICAgICAgIExvZ0dldERlcG9zaXQobXNnLnNlbmRlciwgYW1vdW50LCAiR290IGRlcG9zaXQiKTsKICAgIH0KCgogICAgZnVuY3Rpb24gc2V0QnV5Q291cnNlKHVpbnQgY291cnNlKSBhdXRoIHsKICAgICAgICBpc1NlbGxhYmxlID0gZmFsc2U7CiAgICAgICAgdG9rZW5CdXlDb3N0ID0gY291cnNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFNlbGxDb3Vyc2UodWludCBjb3Vyc2UpIGF1dGggewogICAgICAgIGlzU2VsbGFibGUgPSBmYWxzZTsKICAgICAgICB0b2tlblNlbGxDb3N0ID0gY291cnNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFNlbGxhYmxlKGJvb2wgc2VsbGFibGUpIGF1dGggewogICAgICAgIGlzU2VsbGFibGUgPSBzZWxsYWJsZTsKICAgIH0KCgogICAgZnVuY3Rpb24gc2V0T2ZmZXJDb250cmFjdChhZGRyZXNzIG9mZmVyQ29udHJhY3QpIGF1dGggewogICAgICAgIE9mZmVyQ29udHJhY3QgPSBvZmZlckNvbnRyYWN0OwogICAgfQoKCiAgICBmdW5jdGlvbiBzZXRTZWNvbmRzQWZ0ZXIodWludCBzZWNvbmRzRm9yRGVwb3NpdCkgYXV0aCB7CiAgICAgICAgc2Vjb25kc0FmdGVyID0gc2Vjb25kc0ZvckRlcG9zaXQ7CiAgICB9CgoKICAgIGZ1bmN0aW9uIHNldERlcG9zaXRQZXJjZW50cyh1aW50IHBlcmNlbnRzKSBhdXRoIHsKICAgICAgICBkZXBvc2l0UGVyY2VudHMgPSBwZXJjZW50czsKICAgIH0KCgogICAgZnVuY3Rpb24gdGFrZUV0aGVyKCkgcGF5YWJsZSBhdXRoIHt9CgoKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgc2VsbGFibGUgewogICAgICAgIHVpbnQgYW1vdW50ID0gZGl2KG1zZy52YWx1ZSwgdG9rZW5CdXlDb3N0KTsKICAgICAgICBfYmFsYW5jZXNbdGhpc10gLT0gYW1vdW50OwogICAgICAgIF9iYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBhbW91bnQ7CiAgICAgICAgTG9nQnV5Q29pbnMobXNnLnNlbmRlciwgYW1vdW50LCAiQ29pbnMgYm91Z2h0Iik7CiAgICB9Cn0KCmNvbnRyYWN0IHByZUlDTyBpcyBEU0F1dGgsIERTRXhlYywgRFNNYXRoIHsKCiAgICBXb3JkQ29pbiAgcHVibGljICBjb2luOwogICAgYWRkcmVzcyBwdWJsaWMgSUNPOwoKICAgIGFkZHJlc3NbXSBpbnZlc3RvcnNBcnJheTsKCiAgICBzdHJ1Y3QgSW52ZXN0b3IgewogICAgdWludCBhbW91bnQ7CiAgICB1aW50IHRva2VuQW1vdW50OwogICAgYm9vbCB0b2tlblNlbnQ7CiAgICBib29sIHJld2FyZFNlbnQ7CiAgICBib29sIGxhcmdlQm9udXNTZW50OwogICAgfQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gSW52ZXN0b3IpIHB1YmxpYyBpbnZlc3RvcnM7CgogICAgdWludCBwdWJsaWMgZGVhZGxpbmU7CiAgICB1aW50IHB1YmxpYyBzdGFydDsKICAgIHVpbnQgcHVibGljIGNvdW50RGF5czsKCiAgICBib29sIHB1YmxpYyBhdXRvVG9rZW5TZW50OwoKICAgIHVpbnQgcHVibGljIHRvdGFsRG9uYXRpb25zOwogICAgdWludCBwdWJsaWMgdG90YWxEb25hdGlvbnNXaXRoQm9udXNlczsKICAgIHVpbnQgcHVibGljIGRvbmF0aW9uc0NvdW50OwogICAgdWludCBwdWJsaWMgZXRoUmV3YXJkOwoKICAgIHVpbnQxMjggcHVibGljIHByZUlDT1Rva2VuQW1vdW50OwogICAgdWludDEyOCBwdWJsaWMgcHJlSUNPVG9rZW5SZW1haW5pbmc7CgogICAgdWludDEyOCBwdWJsaWMgcHJlSUNPVG9rZW5SZXdhcmQ7CiAgICB1aW50MTI4IHB1YmxpYyBwcmVJQ09Ub2tlblJld2FyZFJlbWFpbmluZzsKCiAgICBldmVudCBMb2dCb3VudHkoYWRkcmVzcyB1c2VyLCB1aW50MTI4IGFtb3VudCwgc3RyaW5nIHJlc3VsdCk7CiAgICBldmVudCBMb2dCb3VudHkyNTYoYWRkcmVzcyB1c2VyLCB1aW50IGFtb3VudCwgc3RyaW5nIHJlc3VsdCk7CiAgICBldmVudCBMb2dQdXNoKGFkZHJlc3MgdXNlciwgdWludDEyOCBhbW91bnQsIHN0cmluZyByZXN1bHQpOwogICAgZXZlbnQgTG9nVG9rZW5TZW50KGFkZHJlc3MgdXNlciwgYm9vbCBhbW91bnQsIHN0cmluZyByZXN1bHQpOwoKICAgIG1vZGlmaWVyIGFmdGVyRGVhZGxpbmUoKSB7CiAgICAgICAgYXNzZXJ0KG5vdyA+PSBkZWFkbGluZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBldmVudCBMb2dEb25hdGlvbihhZGRyZXNzIHVzZXIsIHN0cmluZyBtZXNzYWdlKTsKICAgIGV2ZW50IExvZ1RyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgdXNlciwgc3RyaW5nIG1lc3NhZ2UpOwogICAgZXZlbnQgTG9nU2VuZFRva2VucyhhZGRyZXNzIHVzZXIsIHVpbnQgYW1vdW50LCBzdHJpbmcgbWVzc2FnZSk7CiAgICBldmVudCBMb2dTZW5kUE9TVG9rZW5zKGFkZHJlc3MgdXNlciwgdWludCBhbW91bnQsIHN0cmluZyBtZXNzYWdlKTsKCiAgICBmdW5jdGlvbiBwcmVJQ08odWludCBpbml0Q291bnREYXlzKXsKICAgICAgICBjb3VudERheXMgPSBpbml0Q291bnREYXlzOwogICAgICAgIHByZUlDT1Rva2VuQW1vdW50ID0gMjAwMDAwMDAwMDAwMDAwOwogICAgICAgIHByZUlDT1Rva2VuUmVtYWluaW5nID0gMjAwMDAwMDAwMDAwMDAwOwogICAgICAgIHByZUlDT1Rva2VuUmV3YXJkID0gMjAwMDAwMDAwMDAwMDA7CiAgICAgICAgcHJlSUNPVG9rZW5SZXdhcmRSZW1haW5pbmcgPSAyMDAwMDAwMDAwMDAwMDsKICAgIH0KCgogICAgZnVuY3Rpb24gc2V0Q29pbihXb3JkQ29pbiBpbml0Q29pbikgYXV0aCB7CiAgICAgICAgYXNzZXJ0KHByZUlDT1Rva2VuQW1vdW50ID4gMCk7CiAgICAgICAgc3RhcnQgPSBub3c7CiAgICAgICAgZGVhZGxpbmUgPSBub3cgKyBjb3VudERheXMgKiAxIGRheXM7CiAgICAgICAgY29pbiA9IGluaXRDb2luOwogICAgICAgIGNvaW4ucHJlSUNPbWludCh1aW50MTI4KGFkZCh1aW50MjU2KHByZUlDT1Rva2VuUmV3YXJkKSx1aW50MjU2KHByZUlDT1Rva2VuQW1vdW50KSkpKTsKICAgIH0KCgogICAgZnVuY3Rpb24gc2VuZFRva2VucygpIGFmdGVyRGVhZGxpbmUgewogICAgICAgIGFzc2VydCghaW52ZXN0b3JzW21zZy5zZW5kZXJdLnRva2VuU2VudCk7CgogICAgICAgIHVpbnQgYW1vdW50ID0gZGl2KG11bChpbnZlc3RvcnNbbXNnLnNlbmRlcl0uYW1vdW50LCBwcmVJQ09Ub2tlbkFtb3VudCksIHVpbnQyNTYodG90YWxEb25hdGlvbnNXaXRoQm9udXNlcykpOwoKICAgICAgICBjb2luLnB1c2gobXNnLnNlbmRlciwgdWludDEyOChhbW91bnQpKTsKICAgICAgICBwcmVJQ09Ub2tlblJlbWFpbmluZyAtPSB1aW50MTI4KGFtb3VudCk7CiAgICAgICAgaW52ZXN0b3JzW21zZy5zZW5kZXJdLnRva2VuU2VudCA9IHRydWU7CiAgICAgICAgaW52ZXN0b3JzW21zZy5zZW5kZXJdLnRva2VuQW1vdW50ID0gYW1vdW50OwogICAgICAgIExvZ1NlbmRUb2tlbnMobXNnLnNlbmRlciwgYW1vdW50LCAiU2VudCB0b2tlbnMiKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhdXRvU2VuZCgpIGFmdGVyRGVhZGxpbmUgewogICAgICAgIExvZ0RvbmF0aW9uKG1zZy5zZW5kZXIsICJTVEFSVCIpOwogICAgICAgIGFzc2VydCghYXV0b1Rva2VuU2VudCk7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgaW52ZXN0b3JzQXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgTG9nU2VuZFRva2Vucyhtc2cuc2VuZGVyLCB1aW50MjU2KHRvdGFsRG9uYXRpb25zV2l0aEJvbnVzZXMpLCAiVE9UQUwiKTsKICAgICAgICAgICAgdWludCBhbW91bnQgPSBkaXYobXVsKGludmVzdG9yc1tpbnZlc3RvcnNBcnJheVtpXV0uYW1vdW50LCBwcmVJQ09Ub2tlbkFtb3VudCksIHVpbnQyNTYodG90YWxEb25hdGlvbnNXaXRoQm9udXNlcykpOwogICAgICAgICAgICBMb2dTZW5kVG9rZW5zKG1zZy5zZW5kZXIsIGFtb3VudCwgIlRPVEFMIik7CiAgICAgICAgICAgIGlmICghaW52ZXN0b3JzW2ludmVzdG9yc0FycmF5W2ldXS50b2tlblNlbnQpIHsKICAgICAgICAgICAgICAgIGNvaW4ucHVzaChpbnZlc3RvcnNBcnJheVtpXSwgdWludDEyOChhbW91bnQpKTsKICAgICAgICAgICAgICAgIExvZ1NlbmRUb2tlbnMobXNnLnNlbmRlciwgYW1vdW50LCAiUFVTSCIpOwogICAgICAgICAgICAgICAgaW52ZXN0b3JzW2ludmVzdG9yc0FycmF5W2ldXS50b2tlbkFtb3VudCA9IGFtb3VudDsKICAgICAgICAgICAgICAgIGludmVzdG9yc1tpbnZlc3RvcnNBcnJheVtpXV0udG9rZW5TZW50ID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhdXRvVG9rZW5TZW50ID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRJQ09Db250cmFjdChhZGRyZXNzIGljbykgYXV0aHsKICAgICAgICBJQ08gPSBpY287CiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldEV0aGVycyh1aW50IGFtb3VudCkgYXV0aCB7CiAgICAgICAgYXNzZXJ0KGFtb3VudCA+IDApOwogICAgICAgIGFzc2VydCh0aGlzLmJhbGFuY2UgLSBhbW91bnQgPj0gMCk7CiAgICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIG93bmVyLnRyYW5zZmVyKGFtb3VudCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldExhcmdlQm9udXMoKSB7CiAgICAgICAgYXNzZXJ0KGludmVzdG9yc1ttc2cuc2VuZGVyXS5hbW91bnQgPiA3IGV0aGVyKTsKICAgICAgICBhc3NlcnQoIWludmVzdG9yc1ttc2cuc2VuZGVyXS5sYXJnZUJvbnVzU2VudCk7CgogICAgICAgIHVpbnQgYW1vdW50ID0gZGl2KG11bChpbnZlc3RvcnNbbXNnLnNlbmRlcl0udG9rZW5BbW91bnQsMTApLDEwMCk7CiAgICAgICAgY29pbi5wdXNoKG1zZy5zZW5kZXIsIHVpbnQxMjgoYW1vdW50KSk7CiAgICAgICAgcHJlSUNPVG9rZW5SZXdhcmRSZW1haW5pbmcgLT0gdWludDEyOChhbW91bnQpOwogICAgICAgIGludmVzdG9yc1ttc2cuc2VuZGVyXS5sYXJnZUJvbnVzU2VudCA9IHRydWU7CgogICAgICAgIExvZ1NlbmRUb2tlbnMobXNnLnNlbmRlciwgYW1vdW50LCAiU2VudCB0b2tlbnMgZm9yIDcgRXRoIGRvbmF0ZSIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbmRJQ09Ub2tlbnNCYWNrKHVpbnQxMjggYW1vdW50KSBhZnRlckRlYWRsaW5lIGF1dGh7CiAgICAgICAgYXNzZXJ0KGNvaW4uYmFsYW5jZU9mKHRoaXMpID4gYW1vdW50KTsKICAgICAgICBjb2luLnB1c2gobXNnLnNlbmRlciwgYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBwYXJ0KCBhZGRyZXNzIHdobyApIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHBhcnQpIHsKICAgICAgICBwYXJ0ID0gZGl2KG11bChpbnZlc3RvcnNbd2hvXS5hbW91bnQsIDEwMDAwMDApLCB0b3RhbERvbmF0aW9uc1dpdGhCb251c2VzKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXdhcmRXYXNTZW50IChhZGRyZXNzIHdobykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wgd2FzU2VudCkgIHsKICAgICAgICB3YXNTZW50ID0gaW52ZXN0b3JzW3dob10ucmV3YXJkU2VudDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRSZXdhcmRXYXNTZW50IChhZGRyZXNzIHdobykgewogICAgICAgIGFzc2VydChtc2cuc2VuZGVyID09IElDTyk7CiAgICAgICAgaW52ZXN0b3JzW3dob10ucmV3YXJkU2VudCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgYXNzZXJ0KG5vdyA8PSBkZWFkbGluZSk7CiAgICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgIT0gIGFkZHJlc3MoMCkpOwogICAgICAgIGFzc2VydChtc2cudmFsdWUgIT0gMCk7CiAgICAgICAgYXNzZXJ0KHByZUlDT1Rva2VuUmVtYWluaW5nID4gMCk7CgogICAgICAgIHVpbnQgcGVyY2VudHMgPSAwOwoKICAgICAgICBpZiAoc3ViKG5vdyxzdGFydCkgPCAyNCBob3VycykgewogICAgICAgICAgICBwZXJjZW50cyA9IHN1YigyNCwgZGl2KHN1Yihub3csc3RhcnQpLCAxIGhvdXJzKSk7CiAgICAgICAgfQoKICAgICAgICB1aW50IGV4dHJhRG9uYXRpb24gPSBkaXYobXNnLnZhbHVlLCAxMDApICogcGVyY2VudHM7CgogICAgICAgIGludmVzdG9yc1ttc2cuc2VuZGVyXS50b2tlblNlbnQgPSBmYWxzZTsKICAgICAgICB0b3RhbERvbmF0aW9uc1dpdGhCb251c2VzICs9IGFkZChtc2cudmFsdWUsIGV4dHJhRG9uYXRpb24pOwogICAgICAgIHRvdGFsRG9uYXRpb25zICs9IG1zZy52YWx1ZTsKCiAgICAgICAgaW52ZXN0b3JzW21zZy5zZW5kZXJdLmFtb3VudCArPSBhZGQobXNnLnZhbHVlLCBleHRyYURvbmF0aW9uKTsKICAgICAgICBkb25hdGlvbnNDb3VudCsrOwoKICAgICAgICBpbnZlc3RvcnNBcnJheS5wdXNoKG1zZy5zZW5kZXIpOwoKICAgICAgICBMb2dEb25hdGlvbihtc2cuc2VuZGVyLCAiRG9uYXRpb24gd2FzIG1hZGUiKTsKICAgIH0KfQoKCmNvbnRyYWN0IElDTyBpcyBEU0F1dGgsIERTRXhlYywgRFNNYXRoIHsKICAgIHVpbnQxMjggcHVibGljIElDT0Ftb3VudDsKICAgIHVpbnQxMjggcHVibGljIElDT1Jld2FyZDsKCiAgICBhZGRyZXNzW10gaW52ZXN0b3JzQXJyYXk7CgogICAgc3RydWN0IHByZUlDT0ludmVzdG9yIHsKICAgIHVpbnQgYW1vdW50OwogICAgYm9vbCB0b2tlblNlbnQ7CiAgICBib29sIHJld2FyZFNlbnQ7CiAgICBib29sIGxhcmdlQm9udXNTZW50OwogICAgfQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gcHJlSUNPSW52ZXN0b3IpIHB1YmxpYyBpbnZlc3RvcnM7CgogICAgcHJlSUNPIHB1YmxpYyBwcmVpY287CiAgICBXb3JkQ29pbiBwdWJsaWMgY29pbjsKICAgIGJvb2wgcHVibGljIGNhbkdpdmVNb25leUJhY2s7CiAgICBib29sIHB1YmxpYyByZXdhcmRTZW50OwogICAgdWludCBwdWJsaWMgY29zdDsKICAgIHVpbnQgcHVibGljIHRva2VuQ29zdDsKCiAgICBib29sIHB1YmxpYyBpc0lDT1N0b3BwZWQ7CgogICAgdWludCBwdWJsaWMgdG90YWxEb25hdGlvbnM7CgogICAgdWludCBwdWJsaWMgdG90YWxEb25hdGlvbnNXaXRoQm9udXNlczsKCiAgICBtb2RpZmllciBhbGxvd0dldE1vbmV5QmFjaygpIHsKICAgICAgICBhc3NlcnQoY2FuR2l2ZU1vbmV5QmFjayk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBJQ09TdG9wcGVkKCkgewogICAgICAgIGFzc2VydChpc0lDT1N0b3BwZWQpOwogICAgICAgIF87CiAgICB9CgogICAgZXZlbnQgTG9nU2V0UHJlSUNPKHByZUlDTyBwcmVpY29BZGRyZXNzLCBzdHJpbmcgbWVzc2FnZSk7CiAgICBldmVudCBMb2dTdGFydFdlZWsoc3RyaW5nIG1lc3NhZ2UpOwogICAgZXZlbnQgTG9nR2V0TW9uZXlCYWNrKGFkZHJlc3MgdXNlciwgdWludCB2YWx1ZSwgc3RyaW5nIG1lc3NhZ2UpOwogICAgZXZlbnQgTG9nTW9uZXlUb1ByZUlDTyhhZGRyZXNzIHVzZXIsIHVpbnQgdmFsdWUsIHN0cmluZyBtZXNzYWdlKTsKICAgIGV2ZW50IExvZ0J1eVRva2VucyhhZGRyZXNzIHVzZXIsIHVpbnQgdmFsdWUsIHN0cmluZyBtZXNzYWdlKTsKICAgIGV2ZW50IExvZ1NlbmRQT1NUb2tlbnMoYWRkcmVzcyB1c2VyLCB1aW50IHZhbHVlLCBzdHJpbmcgbWVzc2FnZSk7CiAgICBldmVudCBMb2dUcmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIHVzZXIsIHN0cmluZyBtZXNzYWdlKTsKICAgIGV2ZW50IExvZzEodWludDEyOCBsYSwgc3RyaW5nIG1lc3NhZ2UpOwogICAgZXZlbnQgTG9nMihib29sIGxhLCBzdHJpbmcgbWVzc2FnZSk7CgogICAgZnVuY3Rpb24gSUNPKCl7CiAgICAgICAgSUNPQW1vdW50ID0gNTAwMDAwMDAwMDAwMDAwOwogICAgICAgIElDT1Jld2FyZCA9IDEwMDAwMDAwMDAwMDAwOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByZUlDTyhwcmVJQ08gaW5pdFByZUlDTykgYXV0aCB7CiAgICAgICAgYXNzZXJ0KGluaXRQcmVJQ08gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcHJlaWNvID0gaW5pdFByZUlDTzsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRFdGhlcnModWludCBhbW91bnQpIGF1dGggewogICAgICAgIGFzc2VydChhbW91bnQgPiAwKTsKICAgICAgICBhc3NlcnQodGhpcy5iYWxhbmNlIC0gYW1vdW50ID49IDApOwogICAgICAgIGFzc2VydChtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBvd25lci50cmFuc2ZlcihhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0V2Vla09uZSgpIGF1dGggewogICAgICAgIGFzc2VydChwcmVpY28gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgdG9rZW5Db3N0ID0gZGl2KHByZWljby50b3RhbERvbmF0aW9ucygpLCBwcmVpY28ucHJlSUNPVG9rZW5BbW91bnQoKSk7CiAgICAgICAgY29zdCA9IDEwMDsKICAgICAgICBMb2dTdGFydFdlZWsoIkZpcnN0IHdlZWsgc3RhcnRlZCIpOwogICAgfQoKCiAgICBmdW5jdGlvbiBzdGFydFdlZWtUd28oKSBhdXRoIHsKICAgICAgICBjb3N0ID0gMTA1OwogICAgICAgIExvZ1N0YXJ0V2VlaygiU2Vjb25kIHdlZWsgc3RhcnRlZCIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0V2Vla1RocmVlKCkgYXV0aCB7CiAgICAgICAgY29zdCA9IDExMDsKICAgICAgICBMb2dTdGFydFdlZWsoIlRoaXJkIHdlZWsgc3RhcnRlZCIpOwogICAgfQoKCiAgICBmdW5jdGlvbiBzdGFydFdlZWtGb3VyKCkgYXV0aCB7CiAgICAgICAgY29zdCA9IDExNTsKICAgICAgICBMb2dTdGFydFdlZWsoIkZvdXJ0aCB3ZWVrIHN0YXJ0ZWQiKTsKICAgIH0KCgogICAgZnVuY3Rpb24gc3RhcnRXZWVrRml2ZSgpIGF1dGggewogICAgICAgIGNvc3QgPSAxMjA7CiAgICAgICAgTG9nU3RhcnRXZWVrKCJMYXN0IHdlZWsgc3RhcnRlZCIpOwogICAgfQoKCiAgICBmdW5jdGlvbiBzZXRDYW5HZXRNb25leUJhY2soYm9vbCB2YWx1ZSkgYXV0aCB7CiAgICAgICAgY2FuR2l2ZU1vbmV5QmFjayA9IHZhbHVlOwogICAgfQoKCiAgICBmdW5jdGlvbiBzZXRUb2tlbkNvc3QodWludCBuZXdUb2tlbkNvc3QpIGF1dGggewogICAgICAgIGFzc2VydChuZXdUb2tlbkNvc3QgPiAwKTsKICAgICAgICB0b2tlbkNvc3QgPSBuZXdUb2tlbkNvc3Q7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldE1vbmV5QmFjaygpIGFsbG93R2V0TW9uZXlCYWNrIHsKICAgICAgICBhc3NlcnQoaW52ZXN0b3JzW21zZy5zZW5kZXJdLmFtb3VudCA+IDApOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoaW52ZXN0b3JzW21zZy5zZW5kZXJdLmFtb3VudCk7CiAgICAgICAgaW52ZXN0b3JzW21zZy5zZW5kZXJdLmFtb3VudCA9IDA7CiAgICAgICAgTG9nR2V0TW9uZXlCYWNrKG1zZy5zZW5kZXIsIGludmVzdG9yc1ttc2cuc2VuZGVyXS5hbW91bnQsICJNb25leSByZXR1cm5lZCIpOwogICAgfQoKCiAgICBmdW5jdGlvbiBzZXRDb2luKFdvcmRDb2luIGluaXRDb2luKSBhdXRoIHsKICAgICAgICBhc3NlcnQoSUNPQW1vdW50ID4gMCk7CiAgICAgICAgY29pbiA9IGluaXRDb2luOwogICAgICAgIGNvaW4uSUNPbWludCh1aW50MTI4KGFkZCh1aW50MjU2KElDT0Ftb3VudCksdWludDI1NihJQ09SZXdhcmQpKSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbmRQT1NUb2tlbnMoKSBJQ09TdG9wcGVkIHsKICAgICAgICBhc3NlcnQoIWludmVzdG9yc1ttc2cuc2VuZGVyXS5yZXdhcmRTZW50KTsKICAgICAgICBhc3NlcnQoaW52ZXN0b3JzW21zZy5zZW5kZXJdLmFtb3VudCA+IDApOwogICAgICAgIGFzc2VydChJQ09SZXdhcmQgPiAwKTsKCiAgICAgICAgdWludCBhbW91bnQgPSBkaXYobXVsKGludmVzdG9yc1ttc2cuc2VuZGVyXS5hbW91bnQsIElDT1Jld2FyZCksIHVpbnQyNTYodG90YWxEb25hdGlvbnMpKTsKCiAgICAgICAgaW52ZXN0b3JzW21zZy5zZW5kZXJdLnJld2FyZFNlbnQgPSB0cnVlOwoKICAgICAgICBjb2luLnB1c2gobXNnLnNlbmRlciwgdWludDEyOChhbW91bnQpKTsKICAgICAgICBJQ09SZXdhcmQgLT0gdWludDEyOChhbW91bnQpOwogICAgICAgIExvZ1NlbmRQT1NUb2tlbnMobXNnLnNlbmRlciwgYW1vdW50LCAiU2VudCBwcml6ZSB0b2tlbnMiKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZW5kRXRoRm9yUmV3YXJkKCkgSUNPU3RvcHBlZCB7CiAgICAgICAgYXNzZXJ0KCFwcmVpY28ucmV3YXJkV2FzU2VudChtc2cuc2VuZGVyKSk7CiAgICAgICAgdWludCBhbW91bnQgPSBkaXYobXVsKHRvdGFsRG9uYXRpb25zLCAzKSwgMTAwKTsKICAgICAgICB1aW50IGV0aEFtb3VudEZvclJld2FyZCA9IGRpdihtdWwoYW1vdW50LHByZWljby5wYXJ0KG1zZy5zZW5kZXIpKSwgMTAwMDAwMCk7CiAgICAgICAgcHJlaWNvLnNldFJld2FyZFdhc1NlbnQobXNnLnNlbmRlcik7CiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihldGhBbW91bnRGb3JSZXdhcmQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbmRJQ09Ub2tlbnNCYWNrKHVpbnQxMjggYW1vdW50KSBJQ09TdG9wcGVkIGF1dGh7CiAgICAgICAgYXNzZXJ0KGNvaW4uYmFsYW5jZU9mKHRoaXMpID4gYW1vdW50KTsKICAgICAgICBjb2luLnB1c2gobXNnLnNlbmRlciwgYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRCaWdJQ09TdG9wcGVkKGJvb2wgc3RvcCkgYXV0aHsKICAgICAgICBpc0lDT1N0b3BwZWQgPSBzdG9wOwogICAgfQoKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgIT0gIGFkZHJlc3MoMCkpOwogICAgICAgIGFzc2VydChtc2cudmFsdWUgIT0gMCk7CiAgICAgICAgYXNzZXJ0KGNvc3QgPiAwKTsKICAgICAgICBhc3NlcnQodG9rZW5Db3N0ID4gMCk7CiAgICAgICAgYXNzZXJ0KElDT0Ftb3VudCA+IDApOwogICAgICAgIGFzc2VydCghaXNJQ09TdG9wcGVkKTsKCiAgICAgICAgaW52ZXN0b3JzW21zZy5zZW5kZXJdLmFtb3VudCArPSBtc2cudmFsdWU7CgogICAgICAgIHRvdGFsRG9uYXRpb25zICs9IG1zZy52YWx1ZTsKICAgICAgICB1aW50IGFtb3VudCA9IGRpdihtc2cudmFsdWUsIGRpdihtdWwodG9rZW5Db3N0LCBjb3N0KSwgMTAwKSk7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA+IDcgZXRoZXIpIHsKICAgICAgICAgICAgYW1vdW50ID0gZGl2KG11bChhbW91bnQsIDExMCksMTAwKTsKICAgICAgICB9CiAgICAgICAgY29pbi5wdXNoKG1zZy5zZW5kZXIsIHVpbnQxMjgoYW1vdW50KSk7CiAgICAgICAgSUNPQW1vdW50IC09IHVpbnQxMjgoYW1vdW50KTsKCiAgICAgICAgaW52ZXN0b3JzQXJyYXkucHVzaChtc2cuc2VuZGVyKTsKCiAgICAgICAgTG9nQnV5VG9rZW5zKG1zZy5zZW5kZXIsIGFtb3VudCwgIlRva2VucyBib3VnaHQiKTsKICAgIH0KfQ=='.
	

]
