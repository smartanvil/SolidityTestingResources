Class {
	#name : #SRTbc9ccc8a46d424de38b2e4df5f4a5001321c5d4c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbc9ccc8a46d424de38b2e4df5f4a5001321c5d4c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuNjsKCgpjb250cmFjdCBpRTRSb3dFc2Nyb3cgewogICAgICAgIGZ1bmN0aW9uIGdldE51bUdhbWVzU3RhcnRlZCgpIGNvbnN0YW50IHJldHVybnMgKGludCBuZ2FtZXMpOwp9CgoKY29udHJhY3QgRTRSb3dFc2Nyb3dVIGlzIGlFNFJvd0VzY3JvdyB7CgpldmVudCBTdGF0RXZlbnQoc3RyaW5nIG1zZyk7CmV2ZW50IFN0YXRFdmVudEkoc3RyaW5nIG1zZywgdWludCB2YWwpOwpldmVudCBTdGF0RXZlbnRBKHN0cmluZyBtc2csIGFkZHJlc3MgYWRkcik7CgogICAgICAgIHVpbnQgY29uc3RhbnQgTUFYX1BMQVlFUlMgPSA1OwoKICAgICAgICBlbnVtIEVuZFJlYXNvbiAge2VyV2lubmVyLCBlclRpbWVPdXQsIGVyQ2hlYXR9CiAgICAgICAgZW51bSBTZXR0aW5nU3RhdGVWYWx1ZSAge2RlYnVnLCByZWxlYXNlLCBsb2NrZWRSZWxlYXNlfQoKICAgICAgICBzdHJ1Y3QgZ2FtZUluc3RhbmNlIHsKICAgICAgICAgICAgICAgIGFkZHJlc3NbNV0gcGxheWVyczsKICAgICAgICAgICAgICAgIHVpbnRbNV0gcGxheWVyUG90czsKICAgICAgICAgICAgICAgIHVpbnQgbnVtUGxheWVyczsKCiAgICAgICAgICAgICAgICBib29sIGFjdGl2ZTsgLy8gYWN0aXZlCiAgICAgICAgICAgICAgICBib29sIGFsbG9jZDsgLy8gIGFsbG9jYXRlZCBhbHJlYWR5LiAKICAgICAgICAgICAgICAgIHVpbnQgc3RhcnRlZDsgLy8gdGltZSBnYW1lIHN0YXJ0ZWQKICAgICAgICAgICAgICAgIHVpbnQgbGFzdE1vdmVkOyAvLyB0aW1lIGdhbWUgbGFzdCBtb3ZlZAogICAgICAgICAgICAgICAgdWludCBwYXlvdXQ7IC8vIHBheW91dCBhbW9udAogICAgICAgICAgICAgICAgYWRkcmVzcyB3aW5uZXI7IC8vIGFkZHJlc3Mgb2Ygd2lubmVyCgoKICAgICAgICAgICAgICAgIEVuZFJlYXNvbiByZWFzb25FbmRlZDsgLy8gZW51bSByZWFzb24gb2YgZW5kZWQKCiAgICAgICAgfQoKICAgICAgICBzdHJ1Y3QgYXJiaXRlciB7CiAgICAgICAgICAgICAgICBtYXBwaW5nICh1aW50ID0+IHVpbnQpICBnYW1lSW5kZXhlczsgLy8gZ2FtZSBoYW5kbGVzCgogICAgICAgICAgICAgICAgdWludCBhcmJUb2tlbjsgLy8gMiBieXRlcwogICAgICAgICAgICAgICAgdWludCBnYW1lU2xvdHM7IC8vIGEgY291bnRlciBvZiBhbGxvYydkIGdhbWUgc3RydWN0cyAodGhleSBjYW4gYmUgcmV1c2VkKQogICAgICAgICAgICAgICAgdWludCBnYW1lc1N0YXJ0ZWQ7IC8vIHRvdGFsIGdhbWVzIHN0YXJ0ZWQKICAgICAgICAgICAgICAgIHVpbnQgZ2FtZXNDb21wbGV0ZWQ7CiAgICAgICAgICAgICAgICB1aW50IGdhbWVzQ2hlYXRlZDsKICAgICAgICAgICAgICAgIHVpbnQgZ2FtZXNUaW1lZG91dDsKICAgICAgICAgICAgICAgIHVpbnQgbnVtUGxheWVyczsKICAgICAgICAgICAgICAgIGJvb2wgcmVnaXN0ZXJlZDsgCiAgICAgICAgICAgICAgICBib29sIGxvY2tlZDsKICAgICAgICB9CgoKICAgICAgICBhZGRyZXNzIHB1YmxpYyAgb3duZXI7ICAvLyBvd25lciBpcyBhZGRyZXNzIHRoYXQgZGVwbG95ZWQgY29udHJhY3QKICAgICAgICBhZGRyZXNzIHB1YmxpYyAgdG9rZW5QYXJ0bmVyOyAgIC8vIHRoZSBhZGRyZXNzIG9mIHBhcnRuZXIgdGhhdCByZWNlaXZlcyByYWtlIGZlZXMKICAgICAgICB1aW50IHB1YmxpYyBudW1BcmJpdGVyczsgICAgICAgIC8vIG51bWJlciBvZiBhcmJpdGVycwoKICAgICAgICBpbnQgbnVtR2FtZXNTdGFydGVkOyAgICAvLyB0b3RhbCBzdGF0cyBmcm9tIGFsbCBhcmJpdGVycwoKICAgICAgICB1aW50IHB1YmxpYyBudW1HYW1lc0NvbXBsZXRlZDsgLy8gLi4uCiAgICAgICAgdWludCBwdWJsaWMgbnVtR2FtZXNDaGVhdGVkOyAgICAvLyAuLi4KICAgICAgICB1aW50IHB1YmxpYyBudW1HYW1lc1RpbWVkT3V0OyAgIC8vIC4uLgoKICAgICAgICB1aW50IHB1YmxpYyBob3VzZUZlZUhvbGRvdmVyOyAvLyBob2xkIGZlZSB0aWxsIHRocmVzaG9sZAogICAgICAgIHVpbnQgcHVibGljIGxhc3RQYXlvdXRUaW1lOyAgICAgLy8gdGltZXN0YW1wIG9mIGxhc3QgcGF5b3V0IHRpbWUKCgogICAgICAgIC8vIGNvbmZpZ3VyYWJsZXMKICAgICAgICB1aW50IHB1YmxpYyBnYW1lVGltZU91dDsKICAgICAgICB1aW50IHB1YmxpYyByZWdpc3RyYXRpb25GZWU7CiAgICAgICAgdWludCBwdWJsaWMgaG91c2VGZWVUaHJlc2hvbGQ7CiAgICAgICAgdWludCBwdWJsaWMgcGF5b3V0SW50ZXJ2YWw7CgogICAgICAgIHVpbnQgcmFHYXM7IC8vIGZvciByZWdpc3RlciBhcmIKICAgICAgICB1aW50IHNnR2FzOy8vIGZvciBzdGFydCBnYW1lCiAgICAgICAgdWludCB3cEdhczsgLy8gZm9yIHdpbm5lciBwYWlkCiAgICAgICAgdWludCByZkdhczsgLy8gZm9yIHJlZnVuZAogICAgICAgIHVpbnQgZmVlR2FzOyAvLyBmb3IgcmFrZSBmZWUgcGF5b3V0CgogICAgICAgIFNldHRpbmdTdGF0ZVZhbHVlIHB1YmxpYyBzZXR0aW5nc1N0YXRlID0gU2V0dGluZ1N0YXRlVmFsdWUuZGVidWc7IAoKCiAgICAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiBhcmJpdGVyKSAgYXJiaXRlcnM7CiAgICAgICAgbWFwcGluZyAodWludCA9PiBhZGRyZXNzKSAgYXJiaXRlclRva2VuczsKICAgICAgICBtYXBwaW5nICh1aW50ID0+IGFkZHJlc3MpICBhcmJpdGVySW5kZXhlczsKICAgICAgICBtYXBwaW5nICh1aW50ID0+IGdhbWVJbnN0YW5jZSkgIGdhbWVzOwoKCiAgICAgICAgZnVuY3Rpb24gRTRSb3dFc2Nyb3dVKCkgcHVibGljCiAgICAgICAgewogICAgICAgICAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIGFwcGx5U2V0dGluZ3MoU2V0dGluZ1N0YXRlVmFsdWUgX3N0YXRlLCB1aW50IF9mZWUsIHVpbnQgX3RocmVzaG9sZCwgdWludCBfdGltZW91dCwgdWludCBfaW50ZXJ2YWwpCiAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIAogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzsKCiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICAgICAvLyB0aGVzZSBpdGVtcyBhcmUgdHdlYWthYmxlIGZvciBnYW1lIG9wdGltaXphdGlvbgogICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAgICAgaG91c2VGZWVUaHJlc2hvbGQgPSBfdGhyZXNob2xkOwogICAgICAgICAgICAgICAgZ2FtZVRpbWVPdXQgPSBfdGltZW91dDsKICAgICAgICAgICAgICAgIHBheW91dEludGVydmFsID0gX2ludGVydmFsOwoKICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc1N0YXRlID09IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZFJlbGVhc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJTZXR0aW5ncyBUd2Vha2VkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZXR0aW5nc1N0YXRlID0gX3N0YXRlOwogICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uRmVlID0gX2ZlZTsKCiAgICAgICAgICAgICAgICAvLyBzZXQgZGVmYXVsdCBvcCBnYXMgLSAgYW55IGZ1dGhlciBzZXR0aW5ncyBkb25lIGluIHNldCB1cCBnYXMKICAgICAgICAgICAgICAgIHJhR2FzID0gMTUwMDAwOyAKICAgICAgICAgICAgICAgIHNnR2FzID0gMTEwMDAwOwogICAgICAgICAgICAgICAgd3BHYXMgPSAyMDAwMDsgCiAgICAgICAgICAgICAgICByZkdhcyA9IDIwMDAwOyAKICAgICAgICAgICAgICAgIGZlZUdhcyA9IDM2MDAwMDsgCgogICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJTZXR0aW5ncyBDaGFuZ2VkIik7CgoKICAgICAgICB9CgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyByZXR1cm4gYW4gYXJiaXRlciB0b2tlbiBmcm9tIGFuIGhHYW1lCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIEFyYlRva0Zyb21IR2FtZSh1aW50IF9oR2FtZSkgcmV0dXJucyAodWludCBfdG9rKQogICAgICAgIHsgCiAgICAgICAgICAgICAgICBfdG9rID0gIChfaEdhbWUgLyAoMiAqKiA0OCkpICYgMHhmZmZmOwogICAgICAgIH0KCgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBzdWljaWRlIHRoZSBjb250cmFjdCwgbm90IGNhbGxlZCBmb3IgcmVsZWFzZQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiBIYXJhS2lyaSgpCiAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKChtc2cuc2VuZGVyID09IG93bmVyKSAmJiAoc2V0dGluZ3NTdGF0ZSAhPSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWRSZWxlYXNlKSkKICAgICAgICAgICAgICAgICAgICAgICAgICBzdWljaWRlKHRva2VuUGFydG5lcik7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiS2lsbCBhdHRlbXB0IGZhaWxlZCIpOwogICAgICAgIH0KCgoKCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIGRlZmF1bHQgZnVuY3Rpb24KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24oKSBwYXlhYmxlICB7CiAgICAgICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gY2hlY2sgYWN0aXZlIGdhbWUgYW5kIHZhbGlkIHBsYXllciwgcmV0dXJuIHBsYXllciBpbmRleAogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIHZhbGlkUGxheWVyKHVpbnQgX2hHYW1lLCBhZGRyZXNzIF9hZGRyKSAgaW50ZXJuYWwgcmV0dXJucyggYm9vbCBfdmFsaWQsIHVpbnQgX3BpZHgpCiAgICAgICAgewogICAgICAgICAgICAgICAgX3ZhbGlkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlR2FtZShfaEdhbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGdhbWVzW19oR2FtZV0ubnVtUGxheWVyczsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVzW19oR2FtZV0ucGxheWVyc1tpXSA9PSBfYWRkcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZhbGlkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGlkeCA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gY2hlY2sgdmFsaWQgcGxheWVyLCByZXR1cm4gcGxheWVyIGluZGV4CiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gdmFsaWRQbGF5ZXIyKHVpbnQgX2hHYW1lLCBhZGRyZXNzIF9hZGRyKSBpbnRlcm5hbCAgcmV0dXJucyggYm9vbCBfdmFsaWQsIHVpbnQgX3BpZHgpCiAgICAgICAgewogICAgICAgICAgICAgICAgX3ZhbGlkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBnYW1lc1tfaEdhbWVdLm51bVBsYXllcnM7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZXNbX2hHYW1lXS5wbGF5ZXJzW2ldID09IF9hZGRyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZhbGlkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3BpZHggPSBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIGNoZWNrIHRoZSBhcmJpdGVyIGlzIHZhbGlkIGJ5IGNvbXBhcmluZyB0b2tlbgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gdmFsaWRBcmIoYWRkcmVzcyBfYWRkciwgdWludCBfdG9rKSBpbnRlcm5hbCAgcmV0dXJucyggYm9vbCBfdmFsaWQpCiAgICAgICAgewogICAgICAgICAgICAgICAgX3ZhbGlkID0gZmFsc2U7CgogICAgICAgICAgICAgICAgaWYgKChhcmJpdGVyc1tfYWRkcl0ucmVnaXN0ZXJlZCkKICAgICAgICAgICAgICAgICAgICAgICAgJiYgKGFyYml0ZXJzW19hZGRyXS5hcmJUb2tlbiA9PSBfdG9rKSkgCiAgICAgICAgICAgICAgICAgICAgICAgIF92YWxpZCA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIGNoZWNrIHRoZSBhcmJpdGVyIGlzIHZhbGlkIHdpdGhvdXQgY29tcGFyaW5nIHRva2VuCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiB2YWxpZEFyYjIoYWRkcmVzcyBfYWRkcikgaW50ZXJuYWwgIHJldHVybnMoIGJvb2wgX3ZhbGlkKQogICAgICAgIHsKICAgICAgICAgICAgICAgIF92YWxpZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKGFyYml0ZXJzW19hZGRyXS5yZWdpc3RlcmVkKQogICAgICAgICAgICAgICAgICAgICAgICBfdmFsaWQgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBjaGVjayBpZiBhcmJpdGVyIGlzIGxvY2tlZCBvdXQKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGFyYkxvY2tlZChhZGRyZXNzIF9hZGRyKSBpbnRlcm5hbCAgcmV0dXJucyggYm9vbCBfbG9ja2VkKQogICAgICAgIHsKICAgICAgICAgICAgICAgIF9sb2NrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmICh2YWxpZEFyYjIoX2FkZHIpKSAKICAgICAgICAgICAgICAgICAgICAgICAgX2xvY2tlZCA9IGFyYml0ZXJzW19hZGRyXS5sb2NrZWQ7CiAgICAgICAgfQoKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIHJldHVybiBpZiBnYW1lIGlzIGFjdGl2ZQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gYWN0aXZlR2FtZSh1aW50IF9oR2FtZSkgaW50ZXJuYWwgIHJldHVybnMoIGJvb2wgX3ZhbGlkKQogICAgICAgIHsKICAgICAgICAgICAgICAgIF92YWxpZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKChfaEdhbWUgPiAwKQogICAgICAgICAgICAgICAgICAgICAgICAmJiAoZ2FtZXNbX2hHYW1lXS5hY3RpdmUpKQogICAgICAgICAgICAgICAgICAgICAgICBfdmFsaWQgPSB0cnVlOwogICAgICAgIH0KCgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gcmVnaXN0ZXIgZ2FtZSBhcmJpdGVyLCBtYXggcGxheWVycyBvZiA1LCBwYXNzIGluIGV4YWN0IHJlZ2lzdHJhdGlvbiBmZWUKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQXJiaXRlcih1aW50IF9udW1QbGF5ZXJzLCB1aW50IF9hcmJUb2tlbikgcHVibGljIHBheWFibGUgCiAgICAgICAgewoKICAgICAgICAgICAgICAgIGlmIChtc2cudmFsdWUgIT0gcmVnaXN0cmF0aW9uRmVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93OyAgLy9JbnN1ZmZpY2llbnQgRmVlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF9hcmJUb2tlbiA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93OyAvLyBpbnZhbGlkIHRva2VuCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGFyYlRva2VuRXhpc3RzKF9hcmJUb2tlbiAmIDB4ZmZmZikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7IC8vIFRva2VuIEFscmVhZHkgRXhpc3RzCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGFyYml0ZXJzW21zZy5zZW5kZXJdLnJlZ2lzdGVyZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7IC8vIEFyYiBBbHJlYWR5IFJlZ2lzdGVyZWQKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX251bVBsYXllcnMgPiBNQVhfUExBWUVSUykgewogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzsgLy8gRXhjZWVkcyBNYXggUGxheWVycwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFyYml0ZXJzW21zZy5zZW5kZXJdLmdhbWVzU3RhcnRlZCA9IDA7CiAgICAgICAgICAgICAgICBhcmJpdGVyc1ttc2cuc2VuZGVyXS5nYW1lc0NvbXBsZXRlZCA9IDA7CiAgICAgICAgICAgICAgICBhcmJpdGVyc1ttc2cuc2VuZGVyXS5nYW1lc0NoZWF0ZWQgPSAwOwogICAgICAgICAgICAgICAgYXJiaXRlcnNbbXNnLnNlbmRlcl0uZ2FtZXNUaW1lZG91dCA9IDA7CiAgICAgICAgICAgICAgICBhcmJpdGVyc1ttc2cuc2VuZGVyXS5sb2NrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGFyYml0ZXJzW21zZy5zZW5kZXJdLmFyYlRva2VuID0gX2FyYlRva2VuICYgMHhmZmZmOwogICAgICAgICAgICAgICAgYXJiaXRlcnNbbXNnLnNlbmRlcl0ubnVtUGxheWVycyA9IF9udW1QbGF5ZXJzOwogICAgICAgICAgICAgICAgYXJiaXRlcnNbbXNnLnNlbmRlcl0ucmVnaXN0ZXJlZCA9IHRydWU7CgogICAgICAgICAgICAgICAgYXJiaXRlclRva2Vuc1soX2FyYlRva2VuICYgMHhmZmZmKV0gPSBtc2cuc2VuZGVyOwogICAgICAgICAgICAgICAgYXJiaXRlckluZGV4ZXNbbnVtQXJiaXRlcnMrK10gPSBtc2cuc2VuZGVyOwoKCiAgICAgICAgICAgICAgICBpZiAoIXRva2VuUGFydG5lci5jYWxsLmdhcyhyYUdhcykudmFsdWUobXNnLnZhbHVlKSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vU3RhdHZlbnQoIlNlbmQgRXJyb3IiKTsgLy8gZXZlbnQgbmV2ZXIgcmVnaXN0ZXJzCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgiQXJiIEFkZGVkIiwgX2FyYlRva2VuKTsKICAgICAgICB9CgoKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIHN0YXJ0IGdhbWUuICBwYXNzIGluIHZhbGlkIGhHYW1lIGNvbnRhaW5pbmcgdG9rZW4gaW4gdG9wIHR3byBieXRlcwogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gc3RhcnRHYW1lKHVpbnQgX2hHYW1lLCBpbnQgX2hrTWF4LCBhZGRyZXNzW10gX3BsYXllcnMpIHB1YmxpYyAKICAgICAgICB7CiAgICAgICAgICAgICAgICB1aW50IG50b2sgPSBBcmJUb2tGcm9tSEdhbWUoX2hHYW1lKTsKICAgICAgICAgICAgICAgIGlmICghdmFsaWRBcmIobXNnLnNlbmRlciwgbnRvayApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiSW52YWxpZCBBcmIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAKICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgaWYgKGFyYkxvY2tlZChtc2cuc2VuZGVyKSkgewogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIkFyYiBMb2NrZWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhcmJpdGVyIHhhcmIgPSBhcmJpdGVyc1ttc2cuc2VuZGVyXTsKICAgICAgICAgICAgICAgIGlmIChfcGxheWVycy5sZW5ndGggIT0geGFyYi5udW1QbGF5ZXJzKSB7IAogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIkluY29ycmVjdCBudW0gcGxheWVycyIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfaGtNYXggPiAwKQogICAgICAgICAgICAgICAgICAgICAgICBob3VzZUtlZXAoX2hrTWF4LCBudG9rKTsgCgogICAgICAgICAgICAgICAgaWYgKCFnYW1lc1tfaEdhbWVdLmFsbG9jZCkgewogICAgICAgICAgICAgICAgICAgICAgICBnYW1lc1tfaEdhbWVdLmFsbG9jZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHhhcmIuZ2FtZUluZGV4ZXNbeGFyYi5nYW1lU2xvdHMrK10gPSBfaEdhbWU7CiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgbnVtR2FtZXNTdGFydGVkKys7IC8vIGFsd2F5cyBpbmMgdGhpcyBvbmUKICAgICAgICAgICAgICAgIHhhcmIuZ2FtZXNTdGFydGVkKys7CgogICAgICAgICAgICAgICAgZ2FtZXNbX2hHYW1lXS5hY3RpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgZ2FtZXNbX2hHYW1lXS5zdGFydGVkID0gbm93OyAKICAgICAgICAgICAgICAgIGdhbWVzW19oR2FtZV0ubGFzdE1vdmVkID0gbm93OyAKICAgICAgICAgICAgICAgIGdhbWVzW19oR2FtZV0ucGF5b3V0ID0gMDsgCiAgICAgICAgICAgICAgICBnYW1lc1tfaEdhbWVdLndpbm5lciA9IGFkZHJlc3MoMCk7CgogICAgICAgICAgICAgICAgZ2FtZXNbX2hHYW1lXS5udW1QbGF5ZXJzID0gX3BsYXllcnMubGVuZ3RoOyAvLyB3ZSdsbCBiZSB0aGUganVkZ2Ugb2YgaG93IG1hbnkgdW5pcXVlIHBsYXllcnMKICAgICAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaTwgX3BsYXllcnMubGVuZ3RoICYmIGkgPCBNQVhfUExBWUVSUzsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgZ2FtZXNbX2hHYW1lXS5wbGF5ZXJzW2ldID0gX3BsYXllcnNbaV07CiAgICAgICAgICAgICAgICAgICAgZ2FtZXNbX2hHYW1lXS5wbGF5ZXJQb3RzW2ldID0gMDsKICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgiR2FtZSBBZGRlZCIsIF9oR2FtZSk7CgoKICAgICAgICB9CgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gY2xlYW4gdXAgZ2FtZSwgc2V0IHRvIGluYWN0aXZlLCByZWZ1bmQgYW55IGJhbGFuY2VzCiAgICAgICAgLy8gY2FsbGVkIGJ5IGhvdXNla2VlcCBPTkxZCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiBhYm9ydEdhbWUoYWRkcmVzcyBfYXJiLCB1aW50ICBfaEdhbWUsIEVuZFJlYXNvbiBfcmVhc29uKSBwcml2YXRlIHJldHVybnMoYm9vbCBfc3VjY2VzcykKICAgICAgICB7CiAgICAgICAgICAgICBnYW1lSW5zdGFuY2UgbkdhbWUgPSBnYW1lc1tfaEdhbWVdOwogICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBmaW5kIGdhbWUgaW4gZ2FtZSBpZCwgCiAgICAgICAgICAgICAgICBpZiAobkdhbWUuYWN0aXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9zdWNjZXNzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbkdhbWUubnVtUGxheWVyczsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5HYW1lLnBsYXllclBvdHNbaV0gPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIGEgPSBuR2FtZS5wbGF5ZXJzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBuc2VuZCA9IG5HYW1lLnBsYXllclBvdHNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuR2FtZS5wbGF5ZXJQb3RzW2ldID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYS5jYWxsLmdhcyhyZkdhcykudmFsdWUobnNlbmQpKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91c2VGZWVIb2xkb3ZlciArPSBuc2VuZDsgLy8gY2Fubm90IHJlZnVuZCBkdWUgdG8gZXJyb3IsIGdpdmUgdG8gdGhlIGhvdXNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudEEoIkNhbm5vdCBSZWZ1bmQgQWRkcmVzcyIsIGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBuR2FtZS5hY3RpdmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgbkdhbWUucmVhc29uRW5kZWQgPSBfcmVhc29uOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3JlYXNvbiA9PSBFbmRSZWFzb24uZXJDaGVhdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bUdhbWVzQ2hlYXRlZCsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyYml0ZXJzW19hcmJdLmdhbWVzQ2hlYXRlZCsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiR2FtZSBBYm9ydGVkLUNoZWF0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3JlYXNvbiA9PSBFbmRSZWFzb24uZXJUaW1lT3V0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtR2FtZXNUaW1lZE91dCsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyYml0ZXJzW19hcmJdLmdhbWVzVGltZWRvdXQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIkdhbWUgQWJvcnRlZC1UaW1lT3V0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIkdhbWUgQWJvcnRlZCEiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgoKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIGNhbGxlZCBieSBhcmJpdGVyIHdoZW4gd2lubmVyIGlzIGRlY2lkZWQKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIHdpbm5lckRlY2lkZWQodWludCBfaEdhbWUsIGFkZHJlc3MgX3dpbm5lciwgdWludCBfd2lubmVyQmFsKSBwdWJsaWMKICAgICAgICB7CgogICAgICAgICAgICAgICAgaWYgKCF2YWxpZEFyYihtc2cuc2VuZGVyLCBBcmJUb2tGcm9tSEdhbWUoX2hHYW1lKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJJbnZhbGlkIEFyYiIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIG5vIHRocm93IG5vIGNoYW5nZSBtYWRlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyICh2YWxpZCwgcGlkeCkgPSB2YWxpZFBsYXllcihfaEdhbWUsIF93aW5uZXIpOwogICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIkludmFsaWQgUGxheWVyIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhcmJpdGVyIHhhcmIgPSBhcmJpdGVyc1ttc2cuc2VuZGVyXTsKICAgICAgICAgICAgICAgIGdhbWVJbnN0YW5jZSB4Z2FtZSA9IGdhbWVzW19oR2FtZV07CgogICAgICAgICAgICAgICAgdWludCB0b3RhbFBvdCA9IDA7CgogICAgICAgICAgICAgICAgaWYgKHhnYW1lLnBsYXllclBvdHNbcGlkeF0gIT0gX3dpbm5lckJhbCkgewogICAgICAgICAgICAgICAgICAgIGFib3J0R2FtZShtc2cuc2VuZGVyLCBfaEdhbWUsIEVuZFJlYXNvbi5lckNoZWF0KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgeGdhbWUubnVtUGxheWVyczsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsUG90ICs9IHhnYW1lLnBsYXllclBvdHNbaV07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdWludCBucG9ydGlvbjsKICAgICAgICAgICAgICAgIHVpbnQgbnJlbW5hbnQ7CiAgICAgICAgICAgICAgICBpZiAodG90YWxQb3QgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5wb3J0aW9uID0gdG90YWxQb3QvNTA7IC8vIDIgcGVyY2VudCBmaXhlZAogICAgICAgICAgICAgICAgICAgICAgICBucmVtbmFudCA9IHRvdGFsUG90LW5wb3J0aW9uOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbnBvcnRpb24gPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBucmVtbmFudCA9IDA7CiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgIHhnYW1lLmxhc3RNb3ZlZCA9IG5vdzsKICAgICAgICAgICAgICAgIHhnYW1lLmFjdGl2ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgeGdhbWUucmVhc29uRW5kZWQgPSBFbmRSZWFzb24uZXJXaW5uZXI7CiAgICAgICAgICAgICAgICB4Z2FtZS53aW5uZXIgPSBfd2lubmVyOwogICAgICAgICAgICAgICAgeGdhbWUucGF5b3V0ID0gbnJlbW5hbnQ7CgogICAgICAgICAgICAgICAgaWYgKG5wb3J0aW9uID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBob3VzZUZlZUhvbGRvdmVyICs9IG5wb3J0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGhvdXNlRmVlSG9sZG92ZXIgPiBob3VzZUZlZVRocmVzaG9sZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAobm93ID4gKGxhc3RQYXlvdXRUaW1lICsgcGF5b3V0SW50ZXJ2YWwpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgbnRtcGhvID0gaG91c2VGZWVIb2xkb3ZlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VzZUZlZUhvbGRvdmVyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGF5b3V0VGltZSA9IG5vdzsgLy8gcmVzZXQgcmVnYXJkbGVzcyBvZiBzdWNjZWVkL2ZhaWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRva2VuUGFydG5lci5jYWxsLmdhcyhmZWVHYXMpLnZhbHVlKG50bXBobykoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91c2VGZWVIb2xkb3ZlciA9IG50bXBobzsgLy8gcHV0IGl0IGJhY2sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiSG91c2UtRmVlIEVycm9yMSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgeGdhbWUubnVtUGxheWVyczsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHhnYW1lLnBsYXllclBvdHNbaV0gPSAwOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHhhcmIuZ2FtZXNDb21wbGV0ZWQrKzsKICAgICAgICAgICAgICAgIG51bUdhbWVzQ29tcGxldGVkKys7CiAgICAgICAgICAgICAgICBpZiAobnJlbW5hbnQgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3dpbm5lci5jYWxsLmdhcyh3cEdhcykudmFsdWUodWludChucmVtbmFudCkpKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGF0RXZlbnQoIlNlbmQgRXJyb3IiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzsgLy8gaWYgeW91IGNhbnQgcGF5IHRoZSB3aW5uZXIgLSB2ZXJ5IGJhZAogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudEkoIldpbm5lciBQYWlkIiwgX2hHYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBoYW5kbGUgYSBiZXQgbWFkZSBieSBhIHBsYXllciwgdmFsaWRhdGUgdGhlIHBsYXllciBhbmQgZ2FtZQogICAgICAgIC8vIGFkZCB0byBwbGF5ZXJzIGJhbGFuY2UKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUJldCh1aW50IF9oR2FtZSkgcHVibGljIHBheWFibGUgCiAgICAgICAgewogICAgICAgICAgICAgICAgYWRkcmVzcyBuYXJiID0gYXJiaXRlclRva2Vuc1tBcmJUb2tGcm9tSEdhbWUoX2hHYW1lKV07CiAgICAgICAgICAgICAgICBpZiAobmFyYiA9PSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiSW52YWxpZCBoR2FtZSIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NTdGF0ZSAhPSBTZXR0aW5nU3RhdGVWYWx1ZS5kZWJ1ZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgKHZhbGlkLCBwaWR4KSA9IHZhbGlkUGxheWVyKF9oR2FtZSwgbXNnLnNlbmRlcik7CiAgICAgICAgICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiSW52YWxpZCBQbGF5ZXIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzU3RhdGUgIT0gU2V0dGluZ1N0YXRlVmFsdWUuZGVidWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZ2FtZXNbX2hHYW1lXS5wbGF5ZXJQb3RzW3BpZHhdICs9IG1zZy52YWx1ZTsKICAgICAgICAgICAgICAgIGdhbWVzW19oR2FtZV0ubGFzdE1vdmVkID0gbm93OwoKICAgICAgICAgICAgICAgIFN0YXRFdmVudEkoIkJldCBBZGRlZCIsIF9oR2FtZSk7CgogICAgICAgIH0KCgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gcmV0dXJuIGlmIGFyYiB0b2tlbiBleGlzdHMKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGFyYlRva2VuRXhpc3RzKHVpbnQgX3RvaykgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBfZXhpc3RzKQogICAgICAgIHsKICAgICAgICAgICAgICAgIF9leGlzdHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmICgoX3RvayA+IDApCiAgICAgICAgICAgICAgICAgICAgICAgICYmIChhcmJpdGVyVG9rZW5zW190b2tdICE9IGFkZHJlc3MoMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICYmIGFyYml0ZXJzW2FyYml0ZXJUb2tlbnNbX3Rva11dLnJlZ2lzdGVyZWQpCiAgICAgICAgICAgICAgICAgICAgICAgIF9leGlzdHMgPSB0cnVlOwoKICAgICAgICB9CgoKCgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gY2FsbGVkIGJ5IGljbyB0b2tlbiBjb250cmFjdCAKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGdldE51bUdhbWVzU3RhcnRlZCgpIGNvbnN0YW50IHJldHVybnMgKGludCBfZ2FtZXMpIAogICAgICAgIHsKICAgICAgICAgICAgICAgIF9nYW1lcyA9IG51bUdhbWVzU3RhcnRlZDsKICAgICAgICB9CgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gcmV0dXJuIGFyYml0ZXIgZ2FtZSBzdGF0cwogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gZ2V0QXJiSW5mbyh1aW50IF9pZHgpIGNvbnN0YW50ICByZXR1cm5zIChhZGRyZXNzIF9hZGRyLCB1aW50IF9zdGFydGVkLCB1aW50IF9jb21wbGV0ZWQsIHVpbnQgX2NoZWF0ZWQsIHVpbnQgX3RpbWVkT3V0KSAKICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoX2lkeCA+PSBudW1BcmJpdGVycykgewogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIkludmFsaWQgQXJiIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9hZGRyID0gYXJiaXRlckluZGV4ZXNbX2lkeF07CiAgICAgICAgICAgICAgICBpZiAoKF9hZGRyID09IGFkZHJlc3MoMCkpCiAgICAgICAgICAgICAgICAgICAgICAgIHx8ICghYXJiaXRlcnNbX2FkZHJdLnJlZ2lzdGVyZWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiSW52YWxpZCBBcmIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYXJiaXRlciB4YXJiID0gYXJiaXRlcnNbX2FkZHJdOwogICAgICAgICAgICAgICAgX3N0YXJ0ZWQgPSB4YXJiLmdhbWVzU3RhcnRlZDsKICAgICAgICAgICAgICAgIF9jb21wbGV0ZWQgPSB4YXJiLmdhbWVzQ29tcGxldGVkOwogICAgICAgICAgICAgICAgX3RpbWVkT3V0ID0geGFyYi5nYW1lc1RpbWVkb3V0OwogICAgICAgICAgICAgICAgX2NoZWF0ZWQgPSB4YXJiLmdhbWVzQ2hlYXRlZDsKICAgICAgICB9CgoKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIHNjYW4gZm9yIGEgZ2FtZSAxMCBtaW51dGVzIG9sZAogICAgICAgIC8vIGlmIGZvdW5kIGFib3J0IHRoZSBnYW1lLCBjYXVzaW5nIGZ1bmRzIHRvIGJlIHJldHVybmVkCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiBob3VzZUtlZXAoaW50IF9tYXgsIHVpbnQgX2FyYlRva2VuKSBwdWJsaWMKICAgICAgICB7CiAgICAgICAgICAgICAgICB1aW50IGdpOwogICAgICAgICAgICAgICAgYWRkcmVzcyBhOwogICAgICAgICAgICAgICAgaW50IGFib3J0ZWQgPSAwOwoKICAgICAgICAgICAgICAgIGFyYml0ZXIgeGFyYiA9IGFyYml0ZXJzW21zZy5zZW5kZXJdOy8vIGhhdmUgdG8gc2V0IGl0IHRvIHNvbWV0aGluZwogICAgICAgICAgICAgICAgCiAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gb3duZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh1aW50IGFyID0gMDsgKGFyIDwgbnVtQXJiaXRlcnMpICYmIChhYm9ydGVkIDwgX21heCkgOyBhcisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gYXJiaXRlckluZGV4ZXNbYXJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeGFyYiA9IGFyYml0ZXJzW2FdOyAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCBnaSA9IDA7IChnaSA8IHhhcmIuZ2FtZVNsb3RzKSAmJiAoYWJvcnRlZCA8IF9tYXgpOyBnaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUluc3RhbmNlIG5nYW1lMCA9IGdhbWVzW3hhcmIuZ2FtZUluZGV4ZXNbZ2ldXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG5nYW1lMC5hY3RpdmUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICgobm93IC0gbmdhbWUwLmxhc3RNb3ZlZCkgPiBnYW1lVGltZU91dCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0R2FtZShhLCB4YXJiLmdhbWVJbmRleGVzW2dpXSwgRW5kUmVhc29uLmVyVGltZU91dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2Fib3J0ZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZEFyYihtc2cuc2VuZGVyLCBfYXJiVG9rZW4pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiSG91c2VrZWVwIGludmFsaWQgYXJiaXRlciIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBtc2cuc2VuZGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeGFyYiA9IGFyYml0ZXJzW2FdOyAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZ2kgPSAwOyAoZ2kgPCB4YXJiLmdhbWVTbG90cykgJiYgKGFib3J0ZWQgPCBfbWF4KTsgZ2krKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVJbnN0YW5jZSBuZ2FtZTEgPSBnYW1lc1t4YXJiLmdhbWVJbmRleGVzW2dpXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChuZ2FtZTEuYWN0aXZlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAoKG5vdyAtIG5nYW1lMS5sYXN0TW92ZWQpID4gZ2FtZVRpbWVPdXQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydEdhbWUoYSwgeGFyYi5nYW1lSW5kZXhlc1tnaV0sIEVuZFJlYXNvbi5lclRpbWVPdXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKythYm9ydGVkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgoKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIHJldHVybiBnYW1lIGluZm8KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGdldEdhbWVJbmZvKHVpbnQgX2hHYW1lKSAgY29uc3RhbnQgIHJldHVybnMgKEVuZFJlYXNvbiBfcmVhc29uLCB1aW50IF9wbGF5ZXJzLCB1aW50IF9wYXlvdXQsIGJvb2wgX2FjdGl2ZSwgYWRkcmVzcyBfd2lubmVyICkKICAgICAgICB7CiAgICAgICAgICAgICAgICBnYW1lSW5zdGFuY2UgbmdhbWUgPSBnYW1lc1tfaEdhbWVdOwogICAgICAgICAgICAgICAgX2FjdGl2ZSA9IG5nYW1lLmFjdGl2ZTsKICAgICAgICAgICAgICAgIF9wbGF5ZXJzID0gbmdhbWUubnVtUGxheWVyczsKICAgICAgICAgICAgICAgIF93aW5uZXIgPSBuZ2FtZS53aW5uZXI7CiAgICAgICAgICAgICAgICBfcGF5b3V0ID0gbmdhbWUucGF5b3V0OwogICAgICAgICAgICAgICAgX3JlYXNvbiA9IG5nYW1lLnJlYXNvbkVuZGVkOwoKICAgICAgICB9CgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gcmV0dXJuIGFyYlRva2VuIGFuZCBsb3cgYnl0ZXMgZnJvbSBhbiBIR2FtZQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gY2hlY2tIR2FtZSh1aW50IF9oR2FtZSkgY29uc3RhbnQgcmV0dXJucyh1aW50IF9hcmJUb2ssIHVpbnQgX2xvd1dvcmRzKQogICAgICAgIHsKICAgICAgICAgICAgICAgIF9hcmJUb2sgPSBBcmJUb2tGcm9tSEdhbWUoX2hHYW1lKTsKICAgICAgICAgICAgICAgIF9sb3dXb3JkcyA9IF9oR2FtZSAmIDB4ZmZmZmZmZmZmZmZmOwoKICAgICAgICB9CgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gZ2V0IG9wZXJhdGlvbiBnYXMgYW1vdW50cwogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gZ2V0T3BHYXMoKSBjb25zdGFudCByZXR1cm5zICh1aW50IF9yYSwgdWludCBfc2csIHVpbnQgX3dwLCB1aW50IF9yZiwgdWludCBfZmcpIAogICAgICAgIHsKICAgICAgICAgICAgICAgIF9yYSA9IHJhR2FzOyAvLyByZWdpc3RlciBhcmIKICAgICAgICAgICAgICAgIF9zZyA9IHNnR2FzOyAvLyBzdGFydCBnYW1lCiAgICAgICAgICAgICAgICBfd3AgPSB3cEdhczsgLy8gd2lubmVyIHBhaWQKICAgICAgICAgICAgICAgIF9yZiA9IHJmR2FzOyAvLyByZWZ1bmQKICAgICAgICAgICAgICAgIF9mZyA9IGZlZUdhczsgLy8gcmFrZSBmZWUgZ2FzCiAgICAgICAgfQoKCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBzZXQgb3BlcmF0aW9uIGdhcyBhbW91bnRzIGZvciBmb3J3YWRpbmcgb3BlcmF0aW9ucwogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gc2V0T3BHYXModWludCBfcmEsIHVpbnQgX3NnLCB1aW50IF93cCwgdWludCBfcmYsIHVpbnQgX2ZnKSAKICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CgogICAgICAgICAgICAgICAgcmFHYXMgPSBfcmE7CiAgICAgICAgICAgICAgICBzZ0dhcyA9IF9zZzsKICAgICAgICAgICAgICAgIHdwR2FzID0gX3dwOwogICAgICAgICAgICAgICAgcmZHYXMgPSBfcmY7CiAgICAgICAgICAgICAgICBmZWVHYXMgPSBfZmc7CiAgICAgICAgfQoKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIHNldCBhIG1pY2hlaXZvdXMgYXJiaXRlciB0byBsb2NrZWQKICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIHNldEFyYml0ZXJMb2NrZWQoYWRkcmVzcyBfYWRkciwgYm9vbCBfbG9jaykgIHB1YmxpYyAKICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAob3duZXIgIT0gbXNnLnNlbmRlcikgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7IAogICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdmFsaWRBcmIyKF9hZGRyKSkgewogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoImludmFsaWQgYXJiIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBhcmJpdGVyc1tfYWRkcl0ubG9ja2VkID0gX2xvY2s7CiAgICAgICAgICAgICAgICB9CgogICAgICAgIH0KCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBmbHVzaCB0aGUgaG91c2UgZmVlcyB3aGVuZXZlciBjb21tYW5kZWQgdG8uCiAgICAgICAgLy8gaWdub3JlIHRoZSB0aHJlc2hvbGQgYW5kIHRoZSBsYXN0IHBheW91dCB0aW1lCiAgICAgICAgLy8gYnV0IHRoaXMgdGltZSBvbmx5IHJlc2V0IGxhc3RwYXlvdXR0aW1lIHVwb24gc3VjY2VzcwogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gZmx1c2hIb3VzZUZlZXMoKQogICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgib25seSBvd25lciBjYWxscyB0aGlzIGZ1bmN0aW9uIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhvdXNlRmVlSG9sZG92ZXIgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgbnRtcGhvID0gaG91c2VGZWVIb2xkb3ZlcjsKICAgICAgICAgICAgICAgICAgICAgICAgaG91c2VGZWVIb2xkb3ZlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdG9rZW5QYXJ0bmVyLmNhbGwuZ2FzKGZlZUdhcykudmFsdWUobnRtcGhvKSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91c2VGZWVIb2xkb3ZlciA9IG50bXBobzsgLy8gcHV0IGl0IGJhY2sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIkhvdXNlLUZlZSBFcnJvcjIiKTsgCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBheW91dFRpbWUgPSBub3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJIb3VzZS1GZWUgUGFpZCIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgIH0KCgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gc2V0IHRoZSB0b2tlbiBwYXJ0bmVyCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiBzZXRUb2tlblBhcnRuZXIoYWRkcmVzcyBfYWRkcikgcHVibGljCiAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICB9IAoKICAgICAgICAgICAgICAgIGlmICgoc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWRSZWxlYXNlKSAKICAgICAgICAgICAgICAgICAgICAgICAgJiYgKHRva2VuUGFydG5lciA9PSBhZGRyZXNzKDApKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0b2tlblBhcnRuZXIgPSBfYWRkcjsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJUb2tlbiBQYXJ0bmVyIEZpbmFsISIpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZXR0aW5nc1N0YXRlICE9IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZFJlbGVhc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJ0bmVyID0gX2FkZHI7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiVG9rZW4gUGFydG5lciBBc3NpZ25lZCEiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gc3dhcCBleGVjdXRvcgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9hZGRyKSAKICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcgogICAgICAgICAgICAgICAgICAgICAgICB8fCBzZXR0aW5nc1N0YXRlID09IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZFJlbGVhc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzsKCiAgICAgICAgICAgICAgICBvd25lciA9IF9hZGRyOwogICAgICAgIH0KCgoKfQ=='.
	

]
