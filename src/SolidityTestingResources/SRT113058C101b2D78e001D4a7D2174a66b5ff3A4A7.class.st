Class {
	#name : #SRT113058C101b2D78e001D4a7D2174a66b5ff3A4A7,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT113058C101b2D78e001D4a7D2174a66b5ff3A4A7 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuNDsKCi8qKgogKiBAdGl0bGUgQ29udHJhY3QgZm9yIG9iamVjdCB0aGF0IGhhdmUgYW4gb3duZXIKICovCmNvbnRyYWN0IE93bmVkIHsKICAgIC8qKgogICAgICogQ29udHJhY3Qgb3duZXIgYWRkcmVzcwogICAgICovCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICAvKioKICAgICAqIEBkZXYgRGVsZWdhdGUgY29udHJhY3QgdG8gYW5vdGhlciBwZXJzb24KICAgICAqIEBwYXJhbSBfb3duZXIgTmV3IG93bmVyIGFkZHJlc3MgCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldE93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5T3duZXIKICAgIHsgb3duZXIgPSBfb3duZXI7IH0KCiAgICAvKioKICAgICAqIEBkZXYgT3duZXIgY2hlY2sgbW9kaWZpZXIKICAgICAqLwogICAgbW9kaWZpZXIgb25seU93bmVyIHsgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OyBfOyB9Cn0KCi8qKgogKiBAdGl0bGUgQ29tbW9uIHBhdHRlcm4gZm9yIGRlc3Ryb3lhYmxlIGNvbnRyYWN0cyAKICovCmNvbnRyYWN0IERlc3Ryb3lhYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIGhhbW1lcjsKCiAgICAvKioKICAgICAqIEBkZXYgSGFtbWVyIHNldHRlcgogICAgICogQHBhcmFtIF9oYW1tZXIgTmV3IGhhbW1lciBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldEhhbW1lcihhZGRyZXNzIF9oYW1tZXIpIG9ubHlIYW1tZXIKICAgIHsgaGFtbWVyID0gX2hhbW1lcjsgfQoKICAgIC8qKgogICAgICogQGRldiBEZXN0cm95IGNvbnRyYWN0IGFuZCBzY3J1YiBhIGRhdGEKICAgICAqIEBub3RpY2UgT25seSBoYW1tZXIgY2FuIGNhbGwgaXQgCiAgICAgKi8KICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSBvbmx5SGFtbWVyCiAgICB7IHN1aWNpZGUobXNnLnNlbmRlcik7IH0KCiAgICAvKioKICAgICAqIEBkZXYgSGFtbWVyIGNoZWNrIG1vZGlmaWVyCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlIYW1tZXIgeyBpZiAobXNnLnNlbmRlciAhPSBoYW1tZXIpIHRocm93OyBfOyB9Cn0KCi8qKgogKiBAdGl0bGUgR2VuZXJpYyBvd25lZCBkZXN0cm95YWJsZSBjb250cmFjdAogKi8KY29udHJhY3QgT2JqZWN0IGlzIE93bmVkLCBEZXN0cm95YWJsZSB7CiAgICBmdW5jdGlvbiBPYmplY3QoKSB7CiAgICAgICAgb3duZXIgID0gbXNnLnNlbmRlcjsKICAgICAgICBoYW1tZXIgPSBtc2cuc2VuZGVyOwogICAgfQp9CgovLyBTdGFuZGFyZCB0b2tlbiBpbnRlcmZhY2UgKEVSQyAyMCkKLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCmNvbnRyYWN0IEVSQzIwIAp7Ci8vIEZ1bmN0aW9uczoKICAgIC8vLyBAcmV0dXJuIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9hZGRyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHdlaSB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CgovLyBFdmVudHM6CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEFzc2V0IHJlY2lwaWVudCBpbnRlcmZhY2UKICovCmNvbnRyYWN0IFJlY2lwaWVudCB7CiAgICAvKioKICAgICAqIEBkZXYgT24gcmVjZWl2ZWQgZXRoZXJzCiAgICAgKiBAcGFyYW0gc2VuZGVyIEV0aGVyIHNlbmRlcgogICAgICogQHBhcmFtIGFtb3VudCBFdGhlciB2YWx1ZQogICAgICovCiAgICBldmVudCBSZWNlaXZlZEV0aGVyKGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgaW5kZXhlZCBhbW91bnQpOwoKICAgIC8qKgogICAgICogQGRldiBPbiByZWNlaXZlZCBjdXN0b20gRVJDMjAgdG9rZW5zCiAgICAgKiBAcGFyYW0gZnJvbSBUb2tlbiBzZW5kZXIKICAgICAqIEBwYXJhbSB2YWx1ZSBUb2tlbiB2YWx1ZQogICAgICogQHBhcmFtIHRva2VuIFRva2VuIGNvbnRyYWN0IGFkZHJlc3MKICAgICAqIEBwYXJhbSBleHRyYURhdGEgQ3VzdG9tIGFkZGl0aW9uYWwgZGF0YQogICAgICovCiAgICBldmVudCBSZWNlaXZlZFRva2VucyhhZGRyZXNzIGluZGV4ZWQgZnJvbSwKICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgaW5kZXhlZCB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgaW5kZXhlZCB0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzIGV4dHJhRGF0YSk7CgogICAgLyoqCiAgICAgKiBAZGV2IFJlY2VpdmUgYXBwcm92ZWQgRVJDMjAgdG9rZW5zCiAgICAgKiBAcGFyYW0gX2Zyb20gU3BlbmRlciBhZGRyZXNzCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRyYW5zYWN0aW9uIHZhbHVlCiAgICAgKiBAcGFyYW0gX3Rva2VuIEVSQzIwIHRva2VuIGNvbnRyYWN0IGFkZHJlc3MKICAgICAqIEBwYXJhbSBfZXh0cmFEYXRhIEN1c3RvbSBhZGRpdGlvbmFsIGRhdGEKICAgICAqLwogICAgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVSQzIwIF90b2tlbiwgYnl0ZXMgX2V4dHJhRGF0YSkgewogICAgICAgIGlmICghX3Rva2VuLnRyYW5zZmVyRnJvbShfZnJvbSwgdGhpcywgX3ZhbHVlKSkgdGhyb3c7CiAgICAgICAgUmVjZWl2ZWRUb2tlbnMoX2Zyb20sIF92YWx1ZSwgX3Rva2VuLCBfZXh0cmFEYXRhKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQ2F0Y2ggc2VuZGVkIHRvIGNvbnRyYWN0IGV0aGVycwogICAgICovCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlCiAgICB7IFJlY2VpdmVkRXRoZXIobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgfQp9CgoKLyoqCiAqIEB0aXRsZSBUb2tlbiBjb250cmFjdCByZXByZXNlbnRzIGFueSBhc3NldCBpbiBkaWdpdGFsIGVjb25vbXkKICovCmNvbnRyYWN0IFRva2VuIGlzIE9iamVjdCwgRVJDMjAgewogICAgLyogU2hvcnQgZGVzY3JpcHRpb24gb2YgdG9rZW4gKi8KICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwoKICAgIC8qIFRvdGFsIGNvdW50IG9mIHRva2VucyBleGlzdCAqLwogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLyogRml4ZWQgcG9pbnQgcG9zaXRpb24gKi8KICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsKICAgIAogICAgLyogVG9rZW4gYXBwcm92ZW1lbnQgc3lzdGVtICovCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2FuY2VzOwogCiAgICAvKioKICAgICAqIEBkZXYgR2V0IGJhbGFuY2Ugb2YgcGxhaW4gYWRkcmVzcwogICAgICogQHBhcmFtIF9vd25lciBpcyBhIHRhcmdldCBhZGRyZXNzCiAgICAgKiBAcmV0dXJuIGFtb3VudCBvZiB0b2tlbnMgb24gYmFsYW5jZQogICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpCiAgICB7IHJldHVybiBiYWxhbmNlc1tfb3duZXJdOyB9CiAKICAgIC8qKgogICAgICogQGRldiBUYWtlIGFsbG93ZWQgdG9rZW5zCiAgICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgICAqIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpCiAgICB7IHJldHVybiBhbGxvd2FuY2VzW19vd25lcl1bX3NwZW5kZXJdOyB9CgogICAgLyogVG9rZW4gY29uc3RydWN0b3IgKi8KICAgIGZ1bmN0aW9uIFRva2VuKHN0cmluZyBfbmFtZSwgc3RyaW5nIF9zeW1ib2wsIHVpbnQ4IF9kZWNpbWFscywgdWludCBfY291bnQpIHsKICAgICAgICBuYW1lICAgICAgICA9IF9uYW1lOwogICAgICAgIHN5bWJvbCAgICAgID0gX3N5bWJvbDsKICAgICAgICBkZWNpbWFscyAgICA9IF9kZWNpbWFsczsKICAgICAgICB0b3RhbFN1cHBseSA9IF9jb3VudDsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IF9jb3VudDsKICAgIH0KIAogICAgLyoqCiAgICAgKiBAZGV2IFRyYW5zZmVyIHNlbGYgdG9rZW5zIHRvIGdpdmVuIGFkZHJlc3MKICAgICAqIEBwYXJhbSBfdG8gZGVzdGluYXRpb24gYWRkcmVzcwogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgb2YgdG9rZW4gdmFsdWVzIHRvIHNlbmQKICAgICAqIEBub3RpY2UgYF92YWx1ZWAgdG9rZW5zIHdpbGwgYmUgc2VuZGVkIHRvIGBfdG9gCiAgICAgKiBAcmV0dXJuIGB0cnVlYCB3aGVuIHRyYW5zZmVyIGRvbmUKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gICAgICAgICs9IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUcmFuc2ZlciB3aXRoIGFwcHJvdmVtZW50IG1lY2hhaW5zbQogICAgICogQHBhcmFtIF9mcm9tIHNvdXJjZSBhZGRyZXNzLCBgX3ZhbHVlYCB0b2tlbnMgc2hvbGQgYmUgYXBwcm92ZWQgZm9yIGBzZW5kZXJgCiAgICAgKiBAcGFyYW0gX3RvIGRlc3RpbmF0aW9uIGFkZHJlc3MKICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IG9mIHRva2VuIHZhbHVlcyB0byBzZW5kIAogICAgICogQG5vdGljZSBmcm9tIGBfZnJvbWAgd2lsbCBiZSBzZW5kZWQgYF92YWx1ZWAgdG9rZW5zIHRvIGBfdG9gCiAgICAgKiBAcmV0dXJuIGB0cnVlYCB3aGVuIHRyYW5zZmVyIGlzIGRvbmUKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHZhciBhdmFpbCA9IGFsbG93YW5jZXNbX2Zyb21dW21zZy5zZW5kZXJdCiAgICAgICAgICAgICAgICAgID4gYmFsYW5jZXNbX2Zyb21dID8gYmFsYW5jZXNbX2Zyb21dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYWxsb3dhbmNlc1tfZnJvbV1bbXNnLnNlbmRlcl07CiAgICAgICAgaWYgKGF2YWlsID49IF92YWx1ZSkgewogICAgICAgICAgICBhbGxvd2FuY2VzW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gICArPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEdpdmUgdG8gdGFyZ2V0IGFkZHJlc3MgYWJpbGl0eSBmb3Igc2VsZiB0b2tlbiBtYW5pcHVsYXRpb24gd2l0aG91dCBzZW5kaW5nCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgdGFyZ2V0IGFkZHJlc3MgKGZ1dHVyZSByZXF1ZXN0ZXIpCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCBvZiB0b2tlbiB2YWx1ZXMgZm9yIGFwcHJvdmluZwogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWxsb3dhbmNlc1ttc2cuc2VuZGVyXVtfc3BlbmRlcl0gKz0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBSZXNldCBjb3VudCBvZiB0b2tlbnMgYXBwcm92ZWQgZm9yIGdpdmVuIGFkZHJlc3MKICAgICAqIEBwYXJhbSBfc3BlbmRlciB0YXJnZXQgYWRkcmVzcyAoZnV0dXJlIHJlcXVlc3RlcikKICAgICAqLwogICAgZnVuY3Rpb24gdW5hcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIpCiAgICB7IGFsbG93YW5jZXNbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsgfQp9Cgpjb250cmFjdCBUb2tlbkVtaXNzaW9uIGlzIFRva2VuIHsKICAgIGZ1bmN0aW9uIFRva2VuRW1pc3Npb24oc3RyaW5nIF9uYW1lLCBzdHJpbmcgX3N5bWJvbCwgdWludDggX2RlY2ltYWxzLAogICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50IF9zdGFydF9jb3VudCkKICAgICAgICAgICAgIFRva2VuKF9uYW1lLCBfc3ltYm9sLCBfZGVjaW1hbHMsIF9zdGFydF9jb3VudCkKICAgIHt9CgogICAgLyoqCiAgICAgKiBAZGV2IFRva2VuIGVtaXNzaW9uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCBvZiB0b2tlbiB2YWx1ZXMgdG8gZW1pdAogICAgICogQG5vdGljZSBvd25lciBiYWxhbmNlIHdpbGwgYmUgaW5jcmVhc2VkIGJ5IGBfdmFsdWVgCiAgICAgKi8KICAgIGZ1bmN0aW9uIGVtaXNzaW9uKHVpbnQgX3ZhbHVlKSBvbmx5T3duZXIgewogICAgICAgIC8vIE92ZXJmbG93IGNoZWNrCiAgICAgICAgaWYgKF92YWx1ZSArIHRvdGFsU3VwcGx5IDwgdG90YWxTdXBwbHkpIHRocm93OwoKICAgICAgICB0b3RhbFN1cHBseSAgICAgKz0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VzW293bmVyXSArPSBfdmFsdWU7CiAgICB9CiAKICAgIC8qKgogICAgICogQGRldiBCdXJuIHRoZSB0b2tlbiB2YWx1ZXMgZnJvbSBzZW5kZXIgYmFsYW5jZSBhbmQgZnJvbSB0b3RhbAogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgb2YgdG9rZW4gdmFsdWVzIGZvciBidXJuIAogICAgICogQG5vdGljZSBzZW5kZXIgYmFsYW5jZSB3aWxsIGJlIGRlY3JlYXNlZCBieSBgX3ZhbHVlYAogICAgICovCiAgICBmdW5jdGlvbiBidXJuKHVpbnQgX3ZhbHVlKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5ICAgICAgLT0gX3ZhbHVlOwogICAgICAgIH0KICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBDcm93ZGZ1bmRpbmcgY29udHJhY3QKICovCmNvbnRyYWN0IENyb3dkZnVuZGluZyBpcyBPYmplY3QsIFJlY2lwaWVudCB7CiAgICAvKioKICAgICAqIEBkZXYgVGFyZ2V0IGZ1bmQgYWNjb3VudCBhZGRyZXNzCiAgICAgKi8KICAgIGFkZHJlc3MgcHVibGljIGZ1bmQ7CgogICAgLyoqCiAgICAgKiBAZGV2IEJvdW50eSB0b2tlbiBhZGRyZXNzCiAgICAgKi8KICAgIFRva2VuRW1pc3Npb24gcHVibGljIGJvdW50eTsKICAgIAogICAgLyoqCiAgICAgKiBAZGV2IERpc3RyaWJ1dGlvbiBvZiBkb25hdGlvbnMKICAgICAqLwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkb25hdGlvbnM7CgogICAgLyoqCiAgICAgKiBAZGV2IFRvdGFsIGZ1bmRlZCB2YWx1ZQogICAgICovCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbEZ1bmRlZDsKCiAgICAvKioKICAgICAqIEBkZXYgRG9jdW1lbnRhdGlvbiByZWZlcmVuY2UKICAgICAqLwogICAgc3RyaW5nIHB1YmxpYyByZWZlcmVuY2U7CgogICAgLyoqCiAgICAgKiBAZGV2IENyb3dkZnVuZGluZyBjb25maWd1cmF0aW9uCiAgICAgKi8KICAgIFBhcmFtcyBwdWJsaWMgY29uZmlnOwoKICAgIHN0cnVjdCBQYXJhbXMgewogICAgICAgIC8qIHN0YXJ0L3N0b3AgYmxvY2sgc3RhbXBzICovCiAgICAgICAgdWludDI1NiBzdGFydEJsb2NrOwogICAgICAgIHVpbnQyNTYgc3RvcEJsb2NrOwoKICAgICAgICAvKiBNaW5pbWFsL21heGltYWwgZnVuZGVkIHZhbHVlICovCiAgICAgICAgdWludDI1NiBtaW5WYWx1ZTsKICAgICAgICB1aW50MjU2IG1heFZhbHVlOwogICAgICAgIAogICAgICAgIC8qKgogICAgICAgICAqIEJvdW50eSByYXRpbyBlcXVhdGlvbjoKICAgICAgICAgKiAgIGJvdW50eVZhbHVlID0gdmFsdWUgKiByYXRpbyAvIHNjYWxlCiAgICAgICAgICogd2hlcmUKICAgICAgICAgKiAgIHJhdGlvID0gUiAtIChibG9jayAtIEIpIC8gUyAqIFYKICAgICAgICAgKiAgUiAtIHN0YXJ0IGJvdW50eSByYXRpbwogICAgICAgICAqICBCIC0gc3RhcnQgYmxvY2sgbnVtYmVyCiAgICAgICAgICogIFMgLSBib3VudHkgcmVkdWN0aW9uIHN0ZXAgaW4gYmxvY2tzIAogICAgICAgICAqICBWIC0gYm91bnR5IHJlZHVjdGlvbiB2YWx1ZQogICAgICAgICAqLwogICAgICAgIHVpbnQyNTYgYm91bnR5U2NhbGU7CiAgICAgICAgdWludDI1NiBzdGFydFJhdGlvOwogICAgICAgIHVpbnQyNTYgcmVkdWN0aW9uU3RlcDsKICAgICAgICB1aW50MjU2IHJlZHVjdGlvblZhbHVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBDYWxjdWxhdGUgYm91bnR5IHZhbHVlIGJ5IHJlZHVjdGlvbiBlcXVhdGlvbgogICAgICogQHBhcmFtIF92YWx1ZSBJbnB1dCBkb25hdGlvbiB2YWx1ZQogICAgICogQHBhcmFtIF9ibG9jayBJbnB1dCBibG9jayBudW1iZXIKICAgICAqIEByZXR1cm4gQm91bnR5IHZhbHVlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJvdW50eVZhbHVlKHVpbnQyNTYgX3ZhbHVlLCB1aW50MjU2IF9ibG9jaykgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmIChfYmxvY2sgPCBjb25maWcuc3RhcnRCbG9jayB8fCBfYmxvY2sgPiBjb25maWcuc3RvcEJsb2NrKQogICAgICAgICAgICByZXR1cm4gMDsKCiAgICAgICAgdmFyIFIgPSBjb25maWcuc3RhcnRSYXRpbzsKICAgICAgICB2YXIgQiA9IGNvbmZpZy5zdGFydEJsb2NrOwogICAgICAgIHZhciBTID0gY29uZmlnLnJlZHVjdGlvblN0ZXA7CiAgICAgICAgdmFyIFYgPSBjb25maWcucmVkdWN0aW9uVmFsdWU7CiAgICAgICAgdWludDI1NiByYXRpbyA9IFIgLSAoX2Jsb2NrIC0gQikgLyBTICogVjsgCiAgICAgICAgcmV0dXJuIF92YWx1ZSAqIHJhdGlvIC8gY29uZmlnLmJvdW50eVNjYWxlOyAKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQ3Jvd2RmdW5kaW5nIHJ1bm5pbmcgY2hlY2tzCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlSdW5uaW5nIHsKICAgICAgICBib29sIGlzUnVubmluZyA9IHRvdGFsRnVuZGVkICsgbXNnLnZhbHVlIDw9IGNvbmZpZy5tYXhWYWx1ZQogICAgICAgICAgICAgICAgICAgICAgJiYgYmxvY2subnVtYmVyID49IGNvbmZpZy5zdGFydEJsb2NrCiAgICAgICAgICAgICAgICAgICAgICAmJiBibG9jay5udW1iZXIgPD0gY29uZmlnLnN0b3BCbG9jazsKICAgICAgICBpZiAoIWlzUnVubmluZykgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQ3Jvd2RmdW5kdW5nIGZhaWx1cmUgY2hlY2tzCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlGYWlsdXJlIHsKICAgICAgICBib29sIGlzRmFpbHVyZSA9IHRvdGFsRnVuZGVkICA8IGNvbmZpZy5taW5WYWx1ZQogICAgICAgICAgICAgICAgICAgICAgJiYgYmxvY2subnVtYmVyID4gY29uZmlnLnN0b3BCbG9jazsKICAgICAgICBpZiAoIWlzRmFpbHVyZSkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQ3Jvd2RmdW5kaW5nIHN1Y2Nlc3MgY2hlY2tzCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlTdWNjZXNzIHsKICAgICAgICBib29sIGlzU3VjY2VzcyA9IHRvdGFsRnVuZGVkID49IGNvbmZpZy5taW5WYWx1ZQogICAgICAgICAgICAgICAgICAgICAgJiYgYmxvY2subnVtYmVyID4gY29uZmlnLnN0b3BCbG9jazsKICAgICAgICBpZiAoIWlzU3VjY2VzcykgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQ3Jvd2RmdW5kaW5nIGNvbnRyYWN0IGluaXRpYWwgCiAgICAgKiBAcGFyYW0gX2Z1bmQgRGVzdGluYXRpb24gYWNjb3VudCBhZGRyZXNzCiAgICAgKiBAcGFyYW0gX2JvdW50eSBCb3VudHkgdG9rZW4gYWRkcmVzcwogICAgICogQHBhcmFtIF9yZWZlcmVuY2UgUmVmZXJlbmNlIGRvY3VtZW50YXRpb24gbGluawogICAgICogQHBhcmFtIF9zdGFydEJsb2NrIEZ1bmRpbmcgc3RhcnQgYmxvY2sgbnVtYmVyCiAgICAgKiBAcGFyYW0gX3N0b3BCbG9jayBGdW5kaW5nIHN0b3AgYmxvY2sgbnVibWVyCiAgICAgKiBAcGFyYW0gX21pblZhbHVlIE1pbmltYWwgZnVuZGVkIHZhbHVlIGluIHdlaSAKICAgICAqIEBwYXJhbSBfbWF4VmFsdWUgTWF4aW1hbCBmdW5kZWQgdmFsdWUgaW4gd2VpCiAgICAgKiBAcGFyYW0gX3NjYWxlIEJvdW50eSBzY2FsaW5nIGZhY3RvciBieSBmdW5kZWQgdmFsdWUKICAgICAqIEBwYXJhbSBfc3RhcnRSYXRpbyBJbml0aWFsIGJvdW50eSByYXRpbwogICAgICogQHBhcmFtIF9yZWR1Y3Rpb25TdGVwIEJvdW50eSByZWR1Y3Rpb24gc3RlcCBpbiBibG9ja3MgCiAgICAgKiBAcGFyYW0gX3JlZHVjdGlvblZhbHVlIEJvdW50eSByZWR1Y3Rpb24gdmFsdWUKICAgICAqIEBub3RpY2UgdGhpcyBjb250cmFjdCBzaG91bGQgYmUgb3duZXIgb2YgYm91bnR5IHRva2VuCiAgICAgKi8KICAgIGZ1bmN0aW9uIENyb3dkZnVuZGluZygKICAgICAgICBhZGRyZXNzIF9mdW5kLAogICAgICAgIGFkZHJlc3MgX2JvdW50eSwKICAgICAgICBzdHJpbmcgIF9yZWZlcmVuY2UsCiAgICAgICAgdWludDI1NiBfc3RhcnRCbG9jaywKICAgICAgICB1aW50MjU2IF9zdG9wQmxvY2ssCiAgICAgICAgdWludDI1NiBfbWluVmFsdWUsCiAgICAgICAgdWludDI1NiBfbWF4VmFsdWUsCiAgICAgICAgdWludDI1NiBfc2NhbGUsCiAgICAgICAgdWludDI1NiBfc3RhcnRSYXRpbywKICAgICAgICB1aW50MjU2IF9yZWR1Y3Rpb25TdGVwLAogICAgICAgIHVpbnQyNTYgX3JlZHVjdGlvblZhbHVlCiAgICApIHsKICAgICAgICBmdW5kICAgICAgPSBfZnVuZDsKICAgICAgICBib3VudHkgICAgPSBUb2tlbkVtaXNzaW9uKF9ib3VudHkpOwogICAgICAgIHJlZmVyZW5jZSA9IF9yZWZlcmVuY2U7CgogICAgICAgIGNvbmZpZy5zdGFydEJsb2NrICAgICA9IF9zdGFydEJsb2NrOwogICAgICAgIGNvbmZpZy5zdG9wQmxvY2sgICAgICA9IF9zdG9wQmxvY2s7CiAgICAgICAgY29uZmlnLm1pblZhbHVlICAgICAgID0gX21pblZhbHVlOwogICAgICAgIGNvbmZpZy5tYXhWYWx1ZSAgICAgICA9IF9tYXhWYWx1ZTsKICAgICAgICBjb25maWcuYm91bnR5U2NhbGUgICAgPSBfc2NhbGU7CiAgICAgICAgY29uZmlnLnN0YXJ0UmF0aW8gICAgID0gX3N0YXJ0UmF0aW87CiAgICAgICAgY29uZmlnLnJlZHVjdGlvblN0ZXAgID0gX3JlZHVjdGlvblN0ZXA7CiAgICAgICAgY29uZmlnLnJlZHVjdGlvblZhbHVlID0gX3JlZHVjdGlvblZhbHVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBSZWNlaXZlIEV0aGVyIHRva2VuIGFuZCBzZW5kIGJvdW50eQogICAgICovCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIG9ubHlSdW5uaW5nIHsKICAgICAgICBSZWNlaXZlZEV0aGVyKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CgogICAgICAgIHRvdGFsRnVuZGVkICAgICAgICAgICArPSBtc2cudmFsdWU7CiAgICAgICAgZG9uYXRpb25zW21zZy5zZW5kZXJdICs9IG1zZy52YWx1ZTsKCiAgICAgICAgdmFyIGJvdW50eVZhbCA9IGJvdW50eVZhbHVlKG1zZy52YWx1ZSwgYmxvY2subnVtYmVyKTsKICAgICAgICBpZiAoYm91bnR5VmFsID09IDApIHRocm93OwoKICAgICAgICBib3VudHkuZW1pc3Npb24oYm91bnR5VmFsKTsKICAgICAgICBib3VudHkudHJhbnNmZXIobXNnLnNlbmRlciwgYm91bnR5VmFsKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgV2l0aGRyYXdhbCBiYWxhbmNlIG9uIHN1Y2Nlc3NmdWxsIGZpbmlzaAogICAgICovCiAgICBmdW5jdGlvbiB3aXRoZHJhdygpIG9ubHlTdWNjZXNzCiAgICB7IGlmICghZnVuZC5zZW5kKHRoaXMuYmFsYW5jZSkpIHRocm93OyB9CgogICAgLyoqCiAgICAgKiBAZGV2IFJlZnVuZCBkb25hdGlvbnMgd2hlbiBubyBtaW5pbWFsIHZhbHVlIGFjaGlldmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlZnVuZCgpIG9ubHlGYWlsdXJlIHsKICAgICAgICB2YXIgZG9uYXRpb24gPSBkb25hdGlvbnNbbXNnLnNlbmRlcl07CiAgICAgICAgZG9uYXRpb25zW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChkb25hdGlvbikpIHRocm93OwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBEaXNhYmxlIHJlY2VpdmUgYW5vdGhlciB0b2tlbnMKICAgICAqLwogICAgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVSQzIwIF90b2tlbiwgYnl0ZXMgX2V4dHJhRGF0YSkKICAgIHsgdGhyb3c7IH0KfQoKbGlicmFyeSBDcmVhdG9yQ3Jvd2RmdW5kaW5nIHsKICAgIGZ1bmN0aW9uIGNyZWF0ZShhZGRyZXNzIF9mdW5kLCBhZGRyZXNzIF9ib3VudHksIHN0cmluZyBfcmVmZXJlbmNlLCB1aW50MjU2IF9zdGFydEJsb2NrLCB1aW50MjU2IF9zdG9wQmxvY2ssIHVpbnQyNTYgX21pblZhbHVlLCB1aW50MjU2IF9tYXhWYWx1ZSwgdWludDI1NiBfc2NhbGUsIHVpbnQyNTYgX3N0YXJ0UmF0aW8sIHVpbnQyNTYgX3JlZHVjdGlvblN0ZXAsIHVpbnQyNTYgX3JlZHVjdGlvblZhbHVlKSByZXR1cm5zIChDcm93ZGZ1bmRpbmcpCiAgICB7IHJldHVybiBuZXcgQ3Jvd2RmdW5kaW5nKF9mdW5kLCBfYm91bnR5LCBfcmVmZXJlbmNlLCBfc3RhcnRCbG9jaywgX3N0b3BCbG9jaywgX21pblZhbHVlLCBfbWF4VmFsdWUsIF9zY2FsZSwgX3N0YXJ0UmF0aW8sIF9yZWR1Y3Rpb25TdGVwLCBfcmVkdWN0aW9uVmFsdWUpOyB9CgogICAgZnVuY3Rpb24gdmVyc2lvbigpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZykKICAgIHsgcmV0dXJuICJ2MC42LjMiOyB9CgogICAgZnVuY3Rpb24gYWJpKCkgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nKQogICAgeyByZXR1cm4gJ1t7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX293bmVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJzZXRPd25lciIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W10sIm5hbWUiOiJ3aXRoZHJhdyIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6ImhhbW1lciIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoicmVmdW5kIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoiY29uZmlnIiwib3V0cHV0cyI6W3sibmFtZSI6InN0YXJ0QmxvY2siLCJ0eXBlIjoidWludDI1NiJ9LHsibmFtZSI6InN0b3BCbG9jayIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoibWluVmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9LHsibmFtZSI6Im1heFZhbHVlIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJib3VudHlTY2FsZSIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoic3RhcnRSYXRpbyIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoicmVkdWN0aW9uU3RlcCIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoicmVkdWN0aW9uVmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoiZGVzdHJveSIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbeyJuYW1lIjoiX3ZhbHVlIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJfYmxvY2siLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6ImJvdW50eVZhbHVlIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6Im93bmVyIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9mcm9tIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfdmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9LHsibmFtZSI6Il90b2tlbiIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX2V4dHJhRGF0YSIsInR5cGUiOiJieXRlcyJ9XSwibmFtZSI6InJlY2VpdmVBcHByb3ZhbCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6ImJvdW50eSIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJ0b3RhbEZ1bmRlZCIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoidWludDI1NiJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJmdW5kIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6InJlZmVyZW5jZSIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoic3RyaW5nIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJkb25hdGlvbnMiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2hhbW1lciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoic2V0SGFtbWVyIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImlucHV0cyI6W3sibmFtZSI6Il9mdW5kIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfYm91bnR5IiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfcmVmZXJlbmNlIiwidHlwZSI6InN0cmluZyJ9LHsibmFtZSI6Il9zdGFydEJsb2NrIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJfc3RvcEJsb2NrIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJfbWluVmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9LHsibmFtZSI6Il9tYXhWYWx1ZSIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoiX3NjYWxlIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJfc3RhcnRSYXRpbyIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoiX3JlZHVjdGlvblN0ZXAiLCJ0eXBlIjoidWludDI1NiJ9LHsibmFtZSI6Il9yZWR1Y3Rpb25WYWx1ZSIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImNvbnN0cnVjdG9yIn0seyJwYXlhYmxlIjp0cnVlLCJ0eXBlIjoiZmFsbGJhY2sifSx7ImFub255bW91cyI6ZmFsc2UsImlucHV0cyI6W3siaW5kZXhlZCI6dHJ1ZSwibmFtZSI6InNlbmRlciIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjp0cnVlLCJuYW1lIjoiYW1vdW50IiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJSZWNlaXZlZEV0aGVyIiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJmcm9tIiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJ2YWx1ZSIsInR5cGUiOiJ1aW50MjU2In0seyJpbmRleGVkIjp0cnVlLCJuYW1lIjoidG9rZW4iLCJ0eXBlIjoiYWRkcmVzcyJ9LHsiaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJleHRyYURhdGEiLCJ0eXBlIjoiYnl0ZXMifV0sIm5hbWUiOiJSZWNlaXZlZFRva2VucyIsInR5cGUiOiJldmVudCJ9XSc7IH0KfQoKLyoqCiAqIEB0aXRsZSBCdWlsZGVyIGJhc2VkIGNvbnRyYWN0CiAqLwpjb250cmFjdCBCdWlsZGVyIGlzIE9iamVjdCB7CiAgICAvKioKICAgICAqIEBkZXYgdGhpcyBldmVudCBlbWl0dGVkIGZvciBldmVyeSBidWlsZGVkIGNvbnRyYWN0CiAgICAgKi8KICAgIGV2ZW50IEJ1aWxkZWQoYWRkcmVzcyBpbmRleGVkIGNsaWVudCwgYWRkcmVzcyBpbmRleGVkIGluc3RhbmNlKTsKIAogICAgLyogQWRkcmVzc2VzIGJ1aWxkZWQgY29udHJhY3RzIGF0IHNlbmRlciAqLwogICAgbWFwcGluZyhhZGRyZXNzID0+IGFkZHJlc3NbXSkgcHVibGljIGdldENvbnRyYWN0c09mOwogCiAgICAvKioKICAgICAqIEBkZXYgR2V0IGxhc3QgYWRkcmVzcwogICAgICogQHJldHVybiBsYXN0IGFkZHJlc3MgY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0TGFzdENvbnRyYWN0KCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHZhciBzZW5kZXJfY29udHJhY3RzID0gZ2V0Q29udHJhY3RzT2ZbbXNnLnNlbmRlcl07CiAgICAgICAgcmV0dXJuIHNlbmRlcl9jb250cmFjdHNbc2VuZGVyX2NvbnRyYWN0cy5sZW5ndGggLSAxXTsKICAgIH0KCiAgICAvKiBCdWlsZGluZyBiZW5lZmljaWFyeSAqLwogICAgYWRkcmVzcyBwdWJsaWMgYmVuZWZpY2lhcnk7CgogICAgLyoqCiAgICAgKiBAZGV2IFNldCBiZW5lZmljaWFyeQogICAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBpcyBhZGRyZXNzIG9mIGJlbmVmaWNpYXJ5CiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldEJlbmVmaWNpYXJ5KGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBvbmx5T3duZXIKICAgIHsgYmVuZWZpY2lhcnkgPSBfYmVuZWZpY2lhcnk7IH0KCiAgICAvKiBCdWlsZGluZyBjb3N0ICAqLwogICAgdWludCBwdWJsaWMgYnVpbGRpbmdDb3N0V2VpOwoKICAgIC8qKgogICAgICogQGRldiBTZXQgYnVpbGRpbmcgY29zdAogICAgICogQHBhcmFtIF9idWlsZGluZ0Nvc3RXZWkgaXMgY29zdAogICAgICovCiAgICBmdW5jdGlvbiBzZXRDb3N0KHVpbnQgX2J1aWxkaW5nQ29zdFdlaSkgb25seU93bmVyCiAgICB7IGJ1aWxkaW5nQ29zdFdlaSA9IF9idWlsZGluZ0Nvc3RXZWk7IH0KCiAgICAvKiBTZWN1cml0eSBjaGVjayByZXBvcnQgKi8KICAgIHN0cmluZyBwdWJsaWMgc2VjdXJpdHlDaGVja1VSSTsKCiAgICAvKioKICAgICAqIEBkZXYgU2V0IHNlY3VyaXR5IGNoZWNrIHJlcG9ydCBVUkkKICAgICAqIEBwYXJhbSBfdXJpIGlzIGFuIFVSSSB0byByZXBvcnQKICAgICAqLwogICAgZnVuY3Rpb24gc2V0U2VjdXJpdHlDaGVjayhzdHJpbmcgX3VyaSkgb25seU93bmVyCiAgICB7IHNlY3VyaXR5Q2hlY2tVUkkgPSBfdXJpOyB9Cn0KCi8vCi8vIEFJUkEgQnVpbGRlciBmb3IgQ3Jvd2RmdW5kaW5nIGNvbnRyYWN0Ci8vCmNvbnRyYWN0IEJ1aWxkZXJDcm93ZGZ1bmRpbmcgaXMgQnVpbGRlciB7CiAgICAvKioKICAgICAqIEBkZXYgUnVuIHNjcmlwdCBjcmVhdGlvbiBjb250cmFjdAogICAgICogQHJldHVybiBhZGRyZXNzIG5ldyBjb250cmFjdAogICAgICovCiAgICBmdW5jdGlvbiBjcmVhdGUoCiAgICAgICAgYWRkcmVzcyBfZnVuZCwKICAgICAgICBhZGRyZXNzIF9ib3VudHksCiAgICAgICAgc3RyaW5nIF9yZWZlcmVuY2UsCiAgICAgICAgdWludDI1NiBfc3RhcnRCbG9jaywKICAgICAgICB1aW50MjU2IF9zdG9wQmxvY2ssCiAgICAgICAgdWludDI1NiBfbWluVmFsdWUsCiAgICAgICAgdWludDI1NiBfbWF4VmFsdWUsCiAgICAgICAgdWludDI1NiBfc2NhbGUsCiAgICAgICAgdWludDI1NiBfc3RhcnRSYXRpbywKICAgICAgICB1aW50MjU2IF9yZWR1Y3Rpb25TdGVwLAogICAgICAgIHVpbnQyNTYgX3JlZHVjdGlvblZhbHVlLAogICAgICAgIGFkZHJlc3MgX2NsaWVudAogICAgKSBwYXlhYmxlIHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICBpZiAoYnVpbGRpbmdDb3N0V2VpID4gMCAmJiBiZW5lZmljaWFyeSAhPSAwKSB7CiAgICAgICAgICAgIC8vIFRvbyBsb3cgdmFsdWUKICAgICAgICAgICAgaWYgKG1zZy52YWx1ZSA8IGJ1aWxkaW5nQ29zdFdlaSkgdGhyb3c7CiAgICAgICAgICAgIC8vIEJlbmVmaWNpYXJ5IHNlbmQKICAgICAgICAgICAgaWYgKCFiZW5lZmljaWFyeS5zZW5kKGJ1aWxkaW5nQ29zdFdlaSkpIHRocm93OwogICAgICAgICAgICAvLyBSZWZ1bmQKICAgICAgICAgICAgaWYgKG1zZy52YWx1ZSA+IGJ1aWxkaW5nQ29zdFdlaSkgewogICAgICAgICAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlIC0gYnVpbGRpbmdDb3N0V2VpKSkgdGhyb3c7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBSZWZ1bmQgYWxsCiAgICAgICAgICAgIGlmIChtc2cudmFsdWUgPiAwKSB7CiAgICAgICAgICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChtc2cudmFsdWUpKSB0aHJvdzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKF9jbGllbnQgPT0gMCkKICAgICAgICAgICAgX2NsaWVudCA9IG1zZy5zZW5kZXI7CiAKICAgICAgICB2YXIgaW5zdCA9IENyZWF0b3JDcm93ZGZ1bmRpbmcuY3JlYXRlKF9mdW5kLCBfYm91bnR5LCBfcmVmZXJlbmNlLCBfc3RhcnRCbG9jaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdG9wQmxvY2ssIF9taW5WYWx1ZSwgX21heFZhbHVlLCBfc2NhbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RhcnRSYXRpbywgX3JlZHVjdGlvblN0ZXAsIF9yZWR1Y3Rpb25WYWx1ZSk7CiAgICAgICAgaW5zdC5zZXRPd25lcihfY2xpZW50KTsKICAgICAgICBpbnN0LnNldEhhbW1lcihfY2xpZW50KTsKICAgICAgICBnZXRDb250cmFjdHNPZltfY2xpZW50XS5wdXNoKGluc3QpOwogICAgICAgIEJ1aWxkZWQoX2NsaWVudCwgaW5zdCk7CiAgICAgICAgcmV0dXJuIGluc3Q7CiAgICB9Cn0='.
	

]
