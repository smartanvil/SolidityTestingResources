Class {
	#name : #SRT78F7eF08b4583F9866D8a98A9f2D9B64d9c02380,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT78F7eF08b4583F9866D8a98A9f2D9B64d9c02380 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCgpjb250cmFjdCBUZWxjb2luIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludCBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlRlbGNvaW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiVEVMIjsKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDI7CgogICAgLy8vIFRoZSBFUkMyMCB0b3RhbCBmaXhlZCBzdXBwbHkgb2YgdG9rZW5zLgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG90YWxTdXBwbHkgPSAxMDAwMDAwMDAwMDAgKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwoKICAgIC8vLyBBY2NvdW50IGJhbGFuY2VzLgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAgIC8vLyBUaGUgdHJhbnNmZXIgYWxsb3dhbmNlcy4KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCiAgICAvLy8gVGhlIGluaXRpYWwgZGlzdHJpYnV0b3IgaXMgcmVzcG9uc2libGUgZm9yIGFsbG9jYXRpbmcgdGhlIHN1cHBseQogICAgLy8vIGludG8gdGhlIHZhcmlvdXMgcG9vbHMgZGVzY3JpYmVkIGluIHRoZSB3aGl0ZXBhcGVyLiBUaGlzIGNhbiBiZQogICAgLy8vIHZlcmlmaWVkIGxhdGVyIGZyb20gdGhlIGV2ZW50IGxvZy4KICAgIGZ1bmN0aW9uIFRlbGNvaW4oYWRkcmVzcyBfZGlzdHJpYnV0b3IpIHB1YmxpYyB7CiAgICAgICAgYmFsYW5jZXNbX2Rpc3RyaWJ1dG9yXSA9IHRvdGFsU3VwcGx5OwogICAgICAgIFRyYW5zZmVyKDB4MCwgX2Rpc3RyaWJ1dG9yLCB0b3RhbFN1cHBseSk7CiAgICB9CgogICAgLy8vIEVSQzIwIGJhbGFuY2VPZigpLgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLy8vIEVSQzIwIHRyYW5zZmVyKCkuCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgICAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEVSQzIwIHRyYW5zZmVyRnJvbSgpLgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gRVJDMjAgYXBwcm92ZSgpLiBDb21lcyB3aXRoIHRoZSBzdGFuZGFyZCBjYXZlYXQgdGhhdCBhbiBhcHByb3ZhbAogICAgLy8vIG1lYW50IHRvIGxpbWl0IHNwZW5kaW5nIG1heSBhY3R1YWxseSBhbGxvdyBtb3JlIHRvIGJlIHNwZW50IGR1ZSB0bwogICAgLy8vIHVuZm9ydHVuYXRlIG9yZGVyaW5nIG9mIHRyYW5zYWN0aW9ucy4gRm9yIHNhZmV0eSwgdGhpcyBtZXRob2QKICAgIC8vLyBzaG91bGQgb25seSBiZSBjYWxsZWQgaWYgdGhlIGN1cnJlbnQgYWxsb3dhbmNlIGlzIDAuIEFsdGVybmF0aXZlbHksCiAgICAvLy8gbm9uLUVSQzIwIGluY3JlYXNlQXBwcm92YWwoKSBhbmQgZGVjcmVhc2VBcHByb3ZhbCgpIGNhbiBiZSB1c2VkLgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gRVJDMjAgYWxsb3dhbmNlKCkuCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICAvLy8gTm90IG9mZmljaWFsbHkgRVJDMjAuIEFsbG93cyBhbiBhbGxvd2FuY2UgdG8gYmUgaW5jcmVhc2VkIHNhZmVseS4KICAgIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gTm90IG9mZmljaWFsbHkgRVJDMjAuIEFsbG93cyBhbiBhbGxvd2FuY2UgdG8gYmUgZGVjcmVhc2VkIHNhZmVseS4KICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgICAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgICAgICB9CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKCmNvbnRyYWN0IFRlbGNvaW5TYWxlVG9rZW4gewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgTWludEZpbmlzaGVkKCk7CiAgICBldmVudCBSZWRlZW0oYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHNhY3JpZmljZWRWYWx1ZSwgdWludDI1NiBncmFudGVkVmFsdWUpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CgogICAgLy8vIFRoZSBvd25lciBvZiB0aGUgY29udHJhY3QuCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICAvLy8gVGhlIHRvdGFsIG51bWJlciBvZiBtaW50ZWQgdG9rZW5zLCBleGNsdWRpbmcgZGVzdHJveWVkIHRva2Vucy4KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vLyBUaGUgdG9rZW4gYmFsYW5jZSBhbmQgcmVsZWFzZWQgYW1vdW50IG9mIGVhY2ggYWRkcmVzcy4KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSByZWRlZW1lZDsKCiAgICAvLy8gV2hldGhlciB0aGUgdG9rZW4gaXMgc3RpbGwgbWludGFibGUuCiAgICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCiAgICAvLy8gUmVkZWVtYWJsZSB0ZWxjb2luLgogICAgVGVsY29pbiB0ZWxjb2luOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxSZWRlZW1lZDsKCiAgICAvLy8gVmVzdGluZyBwZXJpb2QuCiAgICB1aW50MjU2IHZlc3RpbmdTdGFydDsKICAgIHVpbnQyNTYgdmVzdGluZ0R1cmF0aW9uOwoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gVGVsY29pblNhbGVUb2tlbigKICAgICAgICBUZWxjb2luIF90ZWxjb2luLAogICAgICAgIHVpbnQyNTYgX3Zlc3RpbmdTdGFydCwKICAgICAgICB1aW50MjU2IF92ZXN0aW5nRHVyYXRpb24KICAgICkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgdGVsY29pbiA9IF90ZWxjb2luOwogICAgICAgIHZlc3RpbmdTdGFydCA9IF92ZXN0aW5nU3RhcnQ7CiAgICAgICAgdmVzdGluZ0R1cmF0aW9uID0gX3Zlc3RpbmdEdXJhdGlvbjsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKCiAgICAgICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICBNaW50RmluaXNoZWQoKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSAweDApOwogICAgICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICAgICAgcmVxdWlyZShfYW1vdW50ID4gMCk7CgogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgICAgICBNaW50KF90bywgX2Ftb3VudCk7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBfdG8sIF9hbW91bnQpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWRlZW1NYW55KGFkZHJlc3NbXSBfYmVuZWZpY2lhcmllcykgcHVibGljIHsKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfYmVuZWZpY2lhcmllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICByZWRlZW0oX2JlbmVmaWNpYXJpZXNbaV0pOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZWRlZW0oYWRkcmVzcyBfYmVuZWZpY2lhcnkpIHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmVxdWlyZShtaW50aW5nRmluaXNoZWQpOwogICAgICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IDB4MCk7CgogICAgICAgIHVpbnQyNTYgYmFsYW5jZSA9IHJlZGVlbWFibGVCYWxhbmNlKF9iZW5lZmljaWFyeSk7CiAgICAgICAgaWYgKGJhbGFuY2UgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgICAgIHVpbnQyNTYgdG90YWxEaXN0cmlidXRhYmxlID0gdGVsY29pbi5iYWxhbmNlT2YodGhpcykuYWRkKHRvdGFsUmVkZWVtZWQpOwoKICAgICAgICAvLyBBdm9pZCBsb3NzIG9mIHByZWNpc2lvbiBieSBtdWx0aXBseWluZyBhbmQgbGF0ZXIgZGl2aWRpbmcgYnkKICAgICAgICAvLyBhIGxhcmdlIHZhbHVlLgogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gYmFsYW5jZS5tdWwoMTAgKiogMTgpLmRpdih0b3RhbFN1cHBseSkubXVsKHRvdGFsRGlzdHJpYnV0YWJsZSkuZGl2KDEwICoqIDE4KTsKCiAgICAgICAgYmFsYW5jZXNbX2JlbmVmaWNpYXJ5XSA9IGJhbGFuY2VzW19iZW5lZmljaWFyeV0uc3ViKGJhbGFuY2UpOwogICAgICAgIHJlZGVlbWVkW19iZW5lZmljaWFyeV0gPSByZWRlZW1lZFtfYmVuZWZpY2lhcnldLmFkZChiYWxhbmNlKTsKICAgICAgICBiYWxhbmNlc1t0ZWxjb2luXSA9IGJhbGFuY2VzW3RlbGNvaW5dLmFkZChiYWxhbmNlKTsKICAgICAgICB0b3RhbFJlZGVlbWVkID0gdG90YWxSZWRlZW1lZC5hZGQoYW1vdW50KTsKCiAgICAgICAgVHJhbnNmZXIoX2JlbmVmaWNpYXJ5LCB0ZWxjb2luLCBiYWxhbmNlKTsKICAgICAgICBSZWRlZW0oX2JlbmVmaWNpYXJ5LCBiYWxhbmNlLCBhbW91bnQpOwoKICAgICAgICB0ZWxjb2luLnRyYW5zZmVyKF9iZW5lZmljaWFyeSwgYW1vdW50KTsKCiAgICAgICAgcmV0dXJuIGFtb3VudDsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF90bykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIF90byk7CiAgICAgICAgb3duZXIgPSBfdG87CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlZGVlbWFibGVCYWxhbmNlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiB2ZXN0ZWRCYWxhbmNlKF9iZW5lZmljaWFyeSkuc3ViKHJlZGVlbWVkW19iZW5lZmljaWFyeV0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHZlc3RlZEJhbGFuY2UoYWRkcmVzcyBfYmVuZWZpY2lhcnkpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjdXJyZW50QmFsYW5jZSA9IGJhbGFuY2VzW19iZW5lZmljaWFyeV07CiAgICAgICAgdWludDI1NiB0b3RhbEJhbGFuY2UgPSBjdXJyZW50QmFsYW5jZS5hZGQocmVkZWVtZWRbX2JlbmVmaWNpYXJ5XSk7CgogICAgICAgIGlmIChub3cgPCB2ZXN0aW5nU3RhcnQpIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQoKICAgICAgICBpZiAobm93ID49IHZlc3RpbmdTdGFydC5hZGQodmVzdGluZ0R1cmF0aW9uKSkgewogICAgICAgICAgICByZXR1cm4gdG90YWxCYWxhbmNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRvdGFsQmFsYW5jZS5tdWwobm93LnN1Yih2ZXN0aW5nU3RhcnQpKS5kaXYodmVzdGluZ0R1cmF0aW9uKTsKICAgIH0KfQoKCmNvbnRyYWN0IFRlbGNvaW5TYWxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwogICAgZXZlbnQgV2FsbGV0Q2hhbmdlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNXYWxsZXQsIGFkZHJlc3MgaW5kZXhlZCBuZXdXYWxsZXQpOwogICAgZXZlbnQgVG9rZW5QdXJjaGFzZSgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwKICAgICAgICB1aW50MjU2IHZhbHVlLAogICAgICAgIHVpbnQyNTYgYW1vdW50LAogICAgICAgIHVpbnQyNTYgYm9udXNBbW91bnQKICAgICk7CiAgICBldmVudCBUb2tlbkFsdFB1cmNoYXNlKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LAogICAgICAgIHVpbnQyNTYgdmFsdWUsCiAgICAgICAgdWludDI1NiBhbW91bnQsCiAgICAgICAgdWludDI1NiBib251c0Ftb3VudCwKICAgICAgICBzdHJpbmcgc3ltYm9sLAogICAgICAgIHN0cmluZyB0cmFuc2FjdGlvbklkCiAgICApOwogICAgZXZlbnQgUGF1c2UoKTsKICAgIGV2ZW50IFVucGF1c2UoKTsKICAgIGV2ZW50IFdpdGhkcmF3YWwoYWRkcmVzcyBpbmRleGVkIHdhbGxldCwgdWludDI1NiB3ZWlBbW91bnQpOwogICAgZXZlbnQgRXh0ZW5kZWQodWludDI1NiB1bnRpbCk7CiAgICBldmVudCBGaW5hbGl6ZWQoKTsKICAgIGV2ZW50IFJlZnVuZGluZygpOwogICAgZXZlbnQgUmVmdW5kZWQoYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHdlaUFtb3VudCk7CiAgICBldmVudCBXaGl0ZWxpc3RlZCgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgcGFydGljaXBhbnQsCiAgICAgICAgdWludDI1NiBtaW5XZWlBbW91bnQsCiAgICAgICAgdWludDI1NiBtYXhXZWlBbW91bnQsCiAgICAgICAgdWludDMyIGJvbnVzUmF0ZQogICAgKTsKICAgIGV2ZW50IENhcEZsZXhlZCh1aW50MzIgZmxleCk7CgogICAgLy8vIFRoZSBvd25lciBvZiB0aGUgY29udHJhY3QuCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICAvLy8gVGhlIHRlbXBvcmFyeSB0b2tlbiB3ZSdyZSBzZWxsaW5nLiBTYWxlIHRva2VucyBjYW4gYmUgY29udmVydGVkCiAgICAvLy8gaW1tZWRpYXRlbHkgdXBvbiBzdWNjZXNzZnVsIGNvbXBsZXRpb24gb2YgdGhlIHNhbGUuIEJvbnVzIHRva2VucwogICAgLy8vIGFyZSBvbiBhIHNlcGFyYXRlIHZlc3Rpbmcgc2NoZWR1bGUuCiAgICBUZWxjb2luU2FsZVRva2VuIHB1YmxpYyBzYWxlVG9rZW47CiAgICBUZWxjb2luU2FsZVRva2VuIHB1YmxpYyBib251c1Rva2VuOwoKICAgIC8vLyBUaGUgdG9rZW4gd2UnbGwgY29udmVydCB0byBhZnRlciB0aGUgc2FsZSBlbmRzLgogICAgVGVsY29pbiBwdWJsaWMgdGVsY29pbjsKCiAgICAvLy8gVGhlIG1pbmltdW0gYW5kIG1heGltdW0gZ29hbHMgdG8gcmVhY2guIElmIHRoZSBzb2Z0IGNhcCBpcyBub3QgcmVhY2hlZAogICAgLy8vIGJ5IHRoZSBlbmQgb2YgdGhlIHNhbGUsIHRoZSBjb250cmFjdCB3aWxsIGVudGVyIHJlZnVuZCBtb2RlLiBJZiB0aGUKICAgIC8vLyBoYXJkIGNhcCBpcyByZWFjaGVkLCB0aGUgY29udHJhY3QgY2FuIGJlIGZpbmlzaGVkIGVhcmx5LgogICAgLy8vCiAgICAvLy8gRHVlIHRvIG91ciBhY3R1YWwgc29mdCBjYXAgYmVpbmcgdGllZCB0byBVU0QgYW5kIHRoZSBhc3N1bXB0aW9uIHRoYXQKICAgIC8vLyB0aGUgdmFsdWUgb2YgRXRoZXIgd2lsbCBjb250aW51ZSB0byBpbmNyZWFzZSBkdXJpbmcgdGhlIElDTywgd2UKICAgIC8vLyBpbXBsZW1lbnQgYSBmaXhlZCBtaW5pbXVtIHNvZnRjYXAgdGhhdCBhY2NvdW50cyBmb3IgYSAyLjV4IHZhbHVlCiAgICAvLy8gaW5jcmVhc2UuIFRoZSBjYXBGbGV4IGlzIGEgc2NhbGUgZmFjdG9yIHRoYXQgYWxsb3dzIHVzIHRvIHNjYWxlIHRoZQogICAgLy8vIGNhcHMgYWJvdmUgdGhlIGZpeGVkIG1pbmltdW0gdmFsdWVzLiBJbml0aWFsbHkgdGhlIHNjYWxlIGZhY3RvciB3aWxsCiAgICAvLy8gYmUgc2V0IHNvIHRoYXQgb3VyIGVmZmVjdGl2ZSBzb2Z0IGNhcCBpcyB+MTBNIFVTRC4KICAgIHVpbnQyNTYgcHVibGljIHNvZnRDYXA7CiAgICB1aW50MjU2IHB1YmxpYyBoYXJkQ2FwOwogICAgdWludDMyIHB1YmxpYyBjYXBGbGV4OwoKICAgIC8vLyBUaGUgc2FsZSBwZXJpb2QuCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWU7CiAgICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOwogICAgdWludDI1NiBwdWJsaWMgdGltZUV4dGVuc2lvbjsKCiAgICAvLy8gVGhlIG51bW5iZXIgb2YgdG9rZW5zIHRvIG1pbnQgcGVyIHdlaS4KICAgIHVpbnQyNTYgcHVibGljIHJhdGU7CgogICAgLy8vIFRoZSB0b3RhbCBudW1iZXIgb2Ygd2VpIHJhaXNlZC4gTm90ZSB0aGF0IHRoZSBjb250cmFjdCdzIGJhbGFuY2UgbWF5CiAgICAvLy8gZGlmZmVyIGZyb20gdGhpcyB2YWx1ZSBpZiBzb21lb25lIGhhcyBkZWNpZGVkIHRvIGZvcmNlZnVsbHkgc2VuZCB1cwogICAgLy8vIGV0aGVyLgogICAgdWludDI1NiBwdWJsaWMgd2VpUmFpc2VkOwoKICAgIC8vLyBUaGUgd2FsbGV0IHRoYXQgd2lsbCByZWNlaXZlIHRoZSBjb250cmFjdCdzIGJhbGFuY2Ugb25jZSB0aGUgc2FsZQogICAgLy8vIGZpbmlzaGVzIGFuZCB0aGUgc29mdCBjYXAgaXMgcmVhY2hlZC4KICAgIGFkZHJlc3MgcHVibGljIHdhbGxldDsKCiAgICAvLy8gVGhlIGxpc3Qgb2YgYWRkcmVzc2VzIHRoYXQgYXJlIGFsbG93ZWQgdG8gcGFydGljaXBhdGUgaW4gdGhlIHNhbGUsCiAgICAvLy8gdXAgdG8gd2hhdCBhbW91bnQsIGFuZCBhbnkgc3BlY2lhbCByYXRlIHRoZXkgbWF5IGhhdmUsIHByb3ZpZGVkCiAgICAvLy8gdGhhdCB0aGV5IGRvIGluIGZhY3QgcGFydGljaXBhdGUgd2l0aCBhdCBsZWFzdCB0aGUgbWluaW11bSB2YWx1ZQogICAgLy8vIHRoZXkgYWdyZWVkIHRvLgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyB3aGl0ZWxpc3RlZE1pbjsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgd2hpdGVsaXN0ZWRNYXg7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDMyKSBwdWJsaWMgYm9udXNSYXRlczsKCiAgICAvLy8gVGhlIGFtb3VudCBvZiB3ZWkgYW5kIHdlaSBlcXVpdmFsZW50cyBpbnZlc3RlZCBieSBlYWNoIGludmVzdG9yLgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkZXBvc2l0ZWQ7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGFsdERlcG9zaXRlZDsKCiAgICAvLy8gQW4gZW51bWVyYWJsZSBsaXN0IG9mIGludmVzdG9ycy4KICAgIGFkZHJlc3NbXSBwdWJsaWMgaW52ZXN0b3JzOwoKICAgIC8vLyBXaGV0aGVyIHRoZSBzYWxlIGlzIHBhdXNlZC4KICAgIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKICAgIC8vLyBXaGV0aGVyIHRoZSBzYWxlIGhhcyBmaW5pc2hlZCwgYW5kIHdoZW4uCiAgICBib29sIHB1YmxpYyBmaW5pc2hlZCA9IGZhbHNlOwogICAgdWludDI1NiBwdWJsaWMgZmluaXNoZWRBdDsKCiAgICAvLy8gV2hldGhlciB3ZSdyZSBhY2NlcHRpbmcgcmVmdW5kcy4KICAgIGJvb2wgcHVibGljIHJlZnVuZGluZyA9IGZhbHNlOwoKICAgIC8vLyBUaGUgdG90YWwgbnVtYmVyIG9mIHdlaSByZWZ1bmRlZC4KICAgIHVpbnQyNTYgcHVibGljIHdlaVJlZnVuZGVkOwoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgc2FsZU9wZW4oKSB7CiAgICAgICAgcmVxdWlyZSghZmluaXNoZWQpOwogICAgICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICAgICAgcmVxdWlyZShub3cgPj0gc3RhcnRUaW1lKTsKICAgICAgICByZXF1aXJlKG5vdyA8PSBlbmRUaW1lICsgdGltZUV4dGVuc2lvbik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBUZWxjb2luU2FsZSgKICAgICAgICB1aW50MjU2IF9zb2Z0Q2FwLAogICAgICAgIHVpbnQyNTYgX2hhcmRDYXAsCiAgICAgICAgdWludDMyIF9jYXBGbGV4LAogICAgICAgIHVpbnQyNTYgX3N0YXJ0VGltZSwKICAgICAgICB1aW50MjU2IF9lbmRUaW1lLAogICAgICAgIHVpbnQyNTYgX3JhdGUsCiAgICAgICAgYWRkcmVzcyBfd2FsbGV0LAogICAgICAgIFRlbGNvaW4gX3RlbGNvaW4sCiAgICAgICAgdWludDI1NiBfYm9udXNWZXN0aW5nU3RhcnQsCiAgICAgICAgdWludDI1NiBfYm9udXNWZXN0aW5nRHVyYXRpb24KICAgICkKICAgICAgICBwdWJsaWMKICAgICAgICBwYXlhYmxlCiAgICB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgICAgICByZXF1aXJlKF9zb2Z0Q2FwID4gMCk7CiAgICAgICAgcmVxdWlyZShfaGFyZENhcCA+PSBfc29mdENhcCk7CiAgICAgICAgcmVxdWlyZShfc3RhcnRUaW1lID49IG5vdyk7CiAgICAgICAgcmVxdWlyZShfZW5kVGltZSA+PSBfc3RhcnRUaW1lKTsKICAgICAgICByZXF1aXJlKF9yYXRlID4gMCk7CiAgICAgICAgcmVxdWlyZShfd2FsbGV0ICE9IDB4MCk7CgogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBzb2Z0Q2FwID0gX3NvZnRDYXA7CiAgICAgICAgaGFyZENhcCA9IF9oYXJkQ2FwOwogICAgICAgIGNhcEZsZXggPSBfY2FwRmxleDsKICAgICAgICBzdGFydFRpbWUgPSBfc3RhcnRUaW1lOwogICAgICAgIGVuZFRpbWUgPSBfZW5kVGltZTsKICAgICAgICByYXRlID0gX3JhdGU7CiAgICAgICAgd2FsbGV0ID0gX3dhbGxldDsKICAgICAgICB0ZWxjb2luID0gX3RlbGNvaW47CgogICAgICAgIHNhbGVUb2tlbiA9IG5ldyBUZWxjb2luU2FsZVRva2VuKHRlbGNvaW4sIDAsIDApOwogICAgICAgIGJvbnVzVG9rZW4gPSBuZXcgVGVsY29pblNhbGVUb2tlbigKICAgICAgICAgICAgdGVsY29pbiwKICAgICAgICAgICAgX2JvbnVzVmVzdGluZ1N0YXJ0LAogICAgICAgICAgICBfYm9udXNWZXN0aW5nRHVyYXRpb24KICAgICAgICApOwoKICAgICAgICB3YWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIF9iZW5lZmljaWFyeSkgc2FsZU9wZW4gcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKICAgICAgICByZXF1aXJlKHdlaUFtb3VudCA+IDApOwogICAgICAgIHJlcXVpcmUod2VpUmFpc2VkLmFkZCh3ZWlBbW91bnQpIDw9IGhhcmRDYXApOwoKICAgICAgICB1aW50MjU2IHRvdGFsUHJpb3IgPSB0b3RhbERlcG9zaXRlZChfYmVuZWZpY2lhcnkpOwogICAgICAgIHVpbnQyNTYgdG90YWxBZnRlciA9IHRvdGFsUHJpb3IuYWRkKHdlaUFtb3VudCk7CiAgICAgICAgcmVxdWlyZSh0b3RhbEFmdGVyIDw9IHdoaXRlbGlzdGVkTWF4W19iZW5lZmljaWFyeV0pOwoKICAgICAgICB1aW50MjU2IHNhbGVUb2tlbnM7CiAgICAgICAgdWludDI1NiBib251c1Rva2VuczsKCiAgICAgICAgKHNhbGVUb2tlbnMsIGJvbnVzVG9rZW5zKSA9IHRva2Vuc0ZvclB1cmNoYXNlKF9iZW5lZmljaWFyeSwgd2VpQW1vdW50KTsKCiAgICAgICAgdWludDI1NiBuZXdEZXBvc2l0ZWQgPSBkZXBvc2l0ZWRbX2JlbmVmaWNpYXJ5XS5hZGQod2VpQW1vdW50KTsKICAgICAgICBkZXBvc2l0ZWRbX2JlbmVmaWNpYXJ5XSA9IG5ld0RlcG9zaXRlZDsKICAgICAgICBpbnZlc3RvcnMucHVzaChfYmVuZWZpY2lhcnkpOwoKICAgICAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgICAgIHNhbGVUb2tlbi5taW50KF9iZW5lZmljaWFyeSwgc2FsZVRva2Vucyk7CiAgICAgICAgaWYgKGJvbnVzVG9rZW5zID4gMCkgewogICAgICAgICAgICBib251c1Rva2VuLm1pbnQoX2JlbmVmaWNpYXJ5LCBib251c1Rva2Vucyk7CiAgICAgICAgfQoKICAgICAgICBUb2tlblB1cmNoYXNlKAogICAgICAgICAgICBtc2cuc2VuZGVyLAogICAgICAgICAgICBfYmVuZWZpY2lhcnksCiAgICAgICAgICAgIHdlaUFtb3VudCwKICAgICAgICAgICAgc2FsZVRva2VucywKICAgICAgICAgICAgYm9udXNUb2tlbnMKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVdhbGxldChhZGRyZXNzIF93YWxsZXQpIG9ubHlPd25lciBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShfd2FsbGV0ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKCiAgICAgICAgV2FsbGV0Q2hhbmdlZCh3YWxsZXQsIF93YWxsZXQpOwogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7CgogICAgICAgIHdhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGV4dGVuZFRpbWUodWludDI1NiBfdGltZUV4dGVuc2lvbikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSghZmluaXNoZWQpOwogICAgICAgIHJlcXVpcmUobm93IDwgZW5kVGltZSArIHRpbWVFeHRlbnNpb24pOwogICAgICAgIHJlcXVpcmUoX3RpbWVFeHRlbnNpb24gPiAwKTsKCiAgICAgICAgdGltZUV4dGVuc2lvbiA9IHRpbWVFeHRlbnNpb24uYWRkKF90aW1lRXh0ZW5zaW9uKTsKICAgICAgICByZXF1aXJlKHRpbWVFeHRlbnNpb24gPD0gNyBkYXlzKTsKCiAgICAgICAgRXh0ZW5kZWQoZW5kVGltZS5hZGQodGltZUV4dGVuc2lvbikpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmlzaCgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoIWZpbmlzaGVkKTsKICAgICAgICByZXF1aXJlKGhhcmRDYXBSZWFjaGVkKCkgfHwgbm93ID4gZW5kVGltZSArIHRpbWVFeHRlbnNpb24pOwoKICAgICAgICBmaW5pc2hlZCA9IHRydWU7CiAgICAgICAgZmluaXNoZWRBdCA9IG5vdzsKICAgICAgICBzYWxlVG9rZW4uZmluaXNoTWludGluZygpOwogICAgICAgIGJvbnVzVG9rZW4uZmluaXNoTWludGluZygpOwoKICAgICAgICB1aW50MjU2IGRpc3RyaWJ1dGFibGVDb2lucyA9IHRlbGNvaW4uYmFsYW5jZU9mKHRoaXMpOwoKICAgICAgICBpZiAoc29mdENhcFJlYWNoZWQoKSkgewogICAgICAgICAgICB1aW50MjU2IHNhbGVUb2tlbnMgPSBzYWxlVG9rZW4udG90YWxTdXBwbHkoKTsKICAgICAgICAgICAgdWludDI1NiBib251c1Rva2VucyA9IGJvbnVzVG9rZW4udG90YWxTdXBwbHkoKTsKICAgICAgICAgICAgdWludDI1NiB0b3RhbFRva2VucyA9IHNhbGVUb2tlbnMuYWRkKGJvbnVzVG9rZW5zKTsKCiAgICAgICAgICAgIC8vIEF2b2lkIGxvc3Mgb2YgcHJlY2lzaW9uIGJ5IG11bHRpcGx5aW5nIGFuZCBsYXRlciBkaXZpZGluZyBieQogICAgICAgICAgICAvLyBhIGxhcmdlIHZhbHVlLgogICAgICAgICAgICB1aW50MjU2IGJvbnVzUG9ydGlvbiA9IGJvbnVzVG9rZW5zLm11bCgxMCAqKiAxOCkuZGl2KHRvdGFsVG9rZW5zKS5tdWwoZGlzdHJpYnV0YWJsZUNvaW5zKS5kaXYoMTAgKiogMTgpOwogICAgICAgICAgICB1aW50MjU2IHNhbGVQb3J0aW9uID0gZGlzdHJpYnV0YWJsZUNvaW5zLnN1Yihib251c1BvcnRpb24pOwoKICAgICAgICAgICAgc2FsZVRva2VuLnRyYW5zZmVyT3duZXJzaGlwKG93bmVyKTsKICAgICAgICAgICAgYm9udXNUb2tlbi50cmFuc2Zlck93bmVyc2hpcChvd25lcik7CgogICAgICAgICAgICB0ZWxjb2luLnRyYW5zZmVyKHNhbGVUb2tlbiwgc2FsZVBvcnRpb24pOwogICAgICAgICAgICB0ZWxjb2luLnRyYW5zZmVyKGJvbnVzVG9rZW4sIGJvbnVzUG9ydGlvbik7CgogICAgICAgICAgICB3aXRoZHJhdygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlZnVuZGluZyA9IHRydWU7CiAgICAgICAgICAgIHRlbGNvaW4udHJhbnNmZXIod2FsbGV0LCBkaXN0cmlidXRhYmxlQ29pbnMpOwogICAgICAgICAgICBSZWZ1bmRpbmcoKTsKICAgICAgICB9CgogICAgICAgIEZpbmFsaXplZCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSghcGF1c2VkKTsKICAgICAgICBwYXVzZWQgPSB0cnVlOwogICAgICAgIFBhdXNlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kTWFueShhZGRyZXNzW10gX2ludmVzdG9ycykgcHVibGljIHsKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfaW52ZXN0b3JzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHJlZnVuZChfaW52ZXN0b3JzW2ldKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kKGFkZHJlc3MgX2ludmVzdG9yKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoZmluaXNoZWQpOwogICAgICAgIHJlcXVpcmUocmVmdW5kaW5nKTsKICAgICAgICByZXF1aXJlKGRlcG9zaXRlZFtfaW52ZXN0b3JdID4gMCk7CgogICAgICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gZGVwb3NpdGVkW19pbnZlc3Rvcl07CiAgICAgICAgZGVwb3NpdGVkW19pbnZlc3Rvcl0gPSAwOwogICAgICAgIHdlaVJlZnVuZGVkID0gd2VpUmVmdW5kZWQuYWRkKHdlaUFtb3VudCk7CiAgICAgICAgUmVmdW5kZWQoX2ludmVzdG9yLCB3ZWlBbW91bnQpOwoKICAgICAgICBfaW52ZXN0b3IudHJhbnNmZXIod2VpQW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWdpc3RlckFsdFB1cmNoYXNlKAogICAgICAgIGFkZHJlc3MgX2JlbmVmaWNpYXJ5LAogICAgICAgIHN0cmluZyBfc3ltYm9sLAogICAgICAgIHN0cmluZyBfdHJhbnNhY3Rpb25JZCwKICAgICAgICB1aW50MjU2IF93ZWlBbW91bnQKICAgICkKICAgICAgICBzYWxlT3BlbgogICAgICAgIG9ubHlPd25lcgogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUodG90YWxEZXBvc2l0ZWQoX2JlbmVmaWNpYXJ5KS5hZGQoX3dlaUFtb3VudCkgPD0gd2hpdGVsaXN0ZWRNYXhbX2JlbmVmaWNpYXJ5XSk7CgogICAgICAgIHVpbnQyNTYgc2FsZVRva2VuczsKICAgICAgICB1aW50MjU2IGJvbnVzVG9rZW5zOwoKICAgICAgICAoc2FsZVRva2VucywgYm9udXNUb2tlbnMpID0gdG9rZW5zRm9yUHVyY2hhc2UoX2JlbmVmaWNpYXJ5LCBfd2VpQW1vdW50KTsKCiAgICAgICAgdWludDI1NiBuZXdBbHREZXBvc2l0ZWQgPSBhbHREZXBvc2l0ZWRbX2JlbmVmaWNpYXJ5XS5hZGQoX3dlaUFtb3VudCk7CiAgICAgICAgYWx0RGVwb3NpdGVkW19iZW5lZmljaWFyeV0gPSBuZXdBbHREZXBvc2l0ZWQ7CiAgICAgICAgaW52ZXN0b3JzLnB1c2goX2JlbmVmaWNpYXJ5KTsKCiAgICAgICAgd2VpUmFpc2VkID0gd2VpUmFpc2VkLmFkZChfd2VpQW1vdW50KTsKCiAgICAgICAgc2FsZVRva2VuLm1pbnQoX2JlbmVmaWNpYXJ5LCBzYWxlVG9rZW5zKTsKICAgICAgICBpZiAoYm9udXNUb2tlbnMgPiAwKSB7CiAgICAgICAgICAgIGJvbnVzVG9rZW4ubWludChfYmVuZWZpY2lhcnksIGJvbnVzVG9rZW5zKTsKICAgICAgICB9CgogICAgICAgIFRva2VuQWx0UHVyY2hhc2UoCiAgICAgICAgICAgIG1zZy5zZW5kZXIsCiAgICAgICAgICAgIF9iZW5lZmljaWFyeSwKICAgICAgICAgICAgX3dlaUFtb3VudCwKICAgICAgICAgICAgc2FsZVRva2VucywKICAgICAgICAgICAgYm9udXNUb2tlbnMsCiAgICAgICAgICAgIF9zeW1ib2wsCiAgICAgICAgICAgIF90cmFuc2FjdGlvbklkCiAgICAgICAgKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF90bykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIF90byk7CiAgICAgICAgb3duZXIgPSBfdG87CiAgICB9CgogICAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUocGF1c2VkKTsKICAgICAgICBwYXVzZWQgPSBmYWxzZTsKICAgICAgICBVbnBhdXNlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlQ2FwRmxleCh1aW50MzIgX2NhcEZsZXgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoIWZpbmlzaGVkKTsKICAgICAgICBjYXBGbGV4ID0gX2NhcEZsZXg7CiAgICAgICAgQ2FwRmxleGVkKGNhcEZsZXgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdoaXRlbGlzdE1hbnkoCiAgICAgICAgYWRkcmVzc1tdIF9wYXJ0aWNpcGFudHMsCiAgICAgICAgdWludDI1NiBfbWluV2VpQW1vdW50LAogICAgICAgIHVpbnQyNTYgX21heFdlaUFtb3VudCwKICAgICAgICB1aW50MzIgX2JvbnVzUmF0ZQogICAgKQogICAgICAgIG9ubHlPd25lcgogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IF9wYXJ0aWNpcGFudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgd2hpdGVsaXN0KAogICAgICAgICAgICAgICAgX3BhcnRpY2lwYW50c1tpXSwKICAgICAgICAgICAgICAgIF9taW5XZWlBbW91bnQsCiAgICAgICAgICAgICAgICBfbWF4V2VpQW1vdW50LAogICAgICAgICAgICAgICAgX2JvbnVzUmF0ZQogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB3aGl0ZWxpc3QoCiAgICAgICAgYWRkcmVzcyBfcGFydGljaXBhbnQsCiAgICAgICAgdWludDI1NiBfbWluV2VpQW1vdW50LAogICAgICAgIHVpbnQyNTYgX21heFdlaUFtb3VudCwKICAgICAgICB1aW50MzIgX2JvbnVzUmF0ZQogICAgKQogICAgICAgIG9ubHlPd25lcgogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUoX3BhcnRpY2lwYW50ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfYm9udXNSYXRlIDw9IDQwMCk7CgogICAgICAgIHdoaXRlbGlzdGVkTWluW19wYXJ0aWNpcGFudF0gPSBfbWluV2VpQW1vdW50OwogICAgICAgIHdoaXRlbGlzdGVkTWF4W19wYXJ0aWNpcGFudF0gPSBfbWF4V2VpQW1vdW50OwogICAgICAgIGJvbnVzUmF0ZXNbX3BhcnRpY2lwYW50XSA9IF9ib251c1JhdGU7CiAgICAgICAgV2hpdGVsaXN0ZWQoCiAgICAgICAgICAgIF9wYXJ0aWNpcGFudCwKICAgICAgICAgICAgX21pbldlaUFtb3VudCwKICAgICAgICAgICAgX21heFdlaUFtb3VudCwKICAgICAgICAgICAgX2JvbnVzUmF0ZQogICAgICAgICk7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXcoKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKHNvZnRDYXBSZWFjaGVkKCkgfHwgKGZpbmlzaGVkICYmIG5vdyA+IGZpbmlzaGVkQXQgKyAxNCBkYXlzKSk7CgogICAgICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gdGhpcy5iYWxhbmNlOwoKICAgICAgICBpZiAod2VpQW1vdW50ID4gMCkgewogICAgICAgICAgICB3YWxsZXQudHJhbnNmZXIod2VpQW1vdW50KTsKICAgICAgICAgICAgV2l0aGRyYXdhbCh3YWxsZXQsIHdlaUFtb3VudCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGhhcmRDYXBSZWFjaGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gd2VpUmFpc2VkID49IGhhcmRDYXAubXVsKDEwMDAgKyBjYXBGbGV4KS5kaXYoMTAwMCk7CiAgICB9CgogICAgZnVuY3Rpb24gdG9rZW5zRm9yUHVyY2hhc2UoCiAgICAgICAgYWRkcmVzcyBfYmVuZWZpY2lhcnksCiAgICAgICAgdWludDI1NiBfd2VpQW1vdW50CiAgICApCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50MjU2LCB1aW50MjU2KQogICAgewogICAgICAgIHVpbnQyNTYgYmFzZVRva2VucyA9IF93ZWlBbW91bnQubXVsKHJhdGUpOwogICAgICAgIHVpbnQyNTYgdG90YWxQcmlvciA9IHRvdGFsRGVwb3NpdGVkKF9iZW5lZmljaWFyeSk7CiAgICAgICAgdWludDI1NiB0b3RhbEFmdGVyID0gdG90YWxQcmlvci5hZGQoX3dlaUFtb3VudCk7CgogICAgICAgIC8vIEhhcyB0aGUgYmVuZWZpY2lhcnkgcGFzc2VkIHRoZSBhc3NpZ25lZCBtaW5pbXVtIHB1cmNoYXNlIGxldmVsPwogICAgICAgIGlmICh0b3RhbEFmdGVyIDwgd2hpdGVsaXN0ZWRNaW5bX2JlbmVmaWNpYXJ5XSkgewogICAgICAgICAgICByZXR1cm4gKGJhc2VUb2tlbnMsIDApOwogICAgICAgIH0KCiAgICAgICAgdWludDMyIGJvbnVzUmF0ZSA9IGJvbnVzUmF0ZXNbX2JlbmVmaWNpYXJ5XTsKICAgICAgICB1aW50MjU2IGJhc2VCb251cyA9IGJhc2VUb2tlbnMubXVsKDEwMDAgKyBib251c1JhdGUpLmRpdigxMDAwKS5zdWIoYmFzZVRva2Vucyk7CgogICAgICAgIC8vIERvIHdlIHBhc3MgdGhlIG1pbmltdW0gcHVyY2hhc2UgbGV2ZWwgd2l0aCB0aGlzIHB1cmNoYXNlPwogICAgICAgIGlmICh0b3RhbFByaW9yIDwgd2hpdGVsaXN0ZWRNaW5bX2JlbmVmaWNpYXJ5XSkgewogICAgICAgICAgICB1aW50MjU2IGJhbGFuY2VQcmlvciA9IHRvdGFsUHJpb3IubXVsKHJhdGUpOwogICAgICAgICAgICB1aW50MjU2IGFjY3VtdWxhdGVkQm9udXMgPSBiYWxhbmNlUHJpb3IubXVsKDEwMDAgKyBib251c1JhdGUpLmRpdigxMDAwKS5zdWIoYmFsYW5jZVByaW9yKTsKICAgICAgICAgICAgcmV0dXJuIChiYXNlVG9rZW5zLCBhY2N1bXVsYXRlZEJvbnVzLmFkZChiYXNlQm9udXMpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAoYmFzZVRva2VucywgYmFzZUJvbnVzKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b3RhbERlcG9zaXRlZChhZGRyZXNzIF9pbnZlc3RvcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gZGVwb3NpdGVkW19pbnZlc3Rvcl0uYWRkKGFsdERlcG9zaXRlZFtfaW52ZXN0b3JdKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzb2Z0Q2FwUmVhY2hlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHdlaVJhaXNlZCA+PSBzb2Z0Q2FwLm11bCgxMDAwICsgY2FwRmxleCkuZGl2KDEwMDApOwogICAgfQp9'.
	

]
