Class {
	#name : #SRTf5096917729885ef5b1a8c4ef238d3cf06028ee7,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf5096917729885ef5b1a8c4ef238d3cf06028ee7 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKgogIENvcHlyaWdodCAyMDE3LCBBbnRvbiBFZ29yb3YgKE1vdGhlcnNoaXAgRm91bmRhdGlvbikKICBDb3B5cmlnaHQgMjAxNywgS2xhdXMgSG90dCAoQmxvY2tjaGFpbkxhYnMubnopCiAgQ29weXJpZ2h0IDIwMTcsIEpvcmdlIEl6cXVpZXJkbyAoQXJhZ29uIEZvdW5kYXRpb24pCiAgQ29weXJpZ2h0IDIwMTcsIEpvcmRpIEJheWxpbmEgKEdpdmV0aCkKCiAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQogIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCiAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KCiAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KCiAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KCiAgQmFzZWQgb24gU2FtcGxlQ2FtcGFpZ24tVG9rZW5Db250cm9sbGVyLnNvbCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9HaXZldGgvbWluaW1lCiAgT3JpZ2luYWwgY29udHJhY3QgaXMgaHR0cHM6Ly9naXRodWIuY29tL3N0YXR1cy1pbS9zdGF0dXMtbmV0d29yay10b2tlbi9ibG9iL21hc3Rlci9jb250cmFjdHMvU3RhdHVzQ29udHJpYnV0aW9uLnNvbAoqLwoKbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQp9Cgpjb250cmFjdCBDb250cm9sbGVkIHsKICAvLy8gQG5vdGljZSBUaGUgYWRkcmVzcyBvZiB0aGUgY29udHJvbGxlciBpcyB0aGUgb25seSBhZGRyZXNzIHRoYXQgY2FuIGNhbGwKICAvLy8gIGEgZnVuY3Rpb24gd2l0aCB0aGlzIG1vZGlmaWVyCiAgbW9kaWZpZXIgb25seUNvbnRyb2xsZXIgeyBpZiAobXNnLnNlbmRlciAhPSBjb250cm9sbGVyKSB0aHJvdzsgXzsgfQoKICBhZGRyZXNzIHB1YmxpYyBjb250cm9sbGVyOwoKICBmdW5jdGlvbiBDb250cm9sbGVkKCkgeyBjb250cm9sbGVyID0gbXNnLnNlbmRlcjt9CgogIC8vLyBAbm90aWNlIENoYW5nZXMgdGhlIGNvbnRyb2xsZXIgb2YgdGhlIGNvbnRyYWN0CiAgLy8vIEBwYXJhbSBfbmV3Q29udHJvbGxlciBUaGUgbmV3IGNvbnRyb2xsZXIgb2YgdGhlIGNvbnRyYWN0CiAgZnVuY3Rpb24gY2hhbmdlQ29udHJvbGxlcihhZGRyZXNzIF9uZXdDb250cm9sbGVyKSBvbmx5Q29udHJvbGxlciB7CiAgICBjb250cm9sbGVyID0gX25ld0NvbnRyb2xsZXI7CiAgfQp9Cgpjb250cmFjdCBSZWZ1bmRhYmxlIHsKICBmdW5jdGlvbiByZWZ1bmQoYWRkcmVzcyB0aCwgdWludCBhbW91bnQpIHJldHVybnMgKGJvb2wpOwp9CgovLy8gQGRldiBUaGUgdG9rZW4gY29udHJvbGxlciBjb250cmFjdCBtdXN0IGltcGxlbWVudCB0aGVzZSBmdW5jdGlvbnMKY29udHJhY3QgVG9rZW5Db250cm9sbGVyIHsKICAvLy8gQG5vdGljZSBDYWxsZWQgd2hlbiBgX293bmVyYCBzZW5kcyBldGhlciB0byB0aGUgTWluaU1lIFRva2VuIGNvbnRyYWN0CiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdGhhdCBzZW50IHRoZSBldGhlciB0byBjcmVhdGUgdG9rZW5zCiAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgZXRoZXIgaXMgYWNjZXB0ZWQsIGZhbHNlIGlmIGl0IHRocm93cwogIGZ1bmN0aW9uIHByb3h5UGF5bWVudChhZGRyZXNzIF9vd25lcikgcGF5YWJsZSByZXR1cm5zKGJvb2wpOwoKICAvLy8gQG5vdGljZSBOb3RpZmllcyB0aGUgY29udHJvbGxlciBhYm91dCBhIHRva2VuIHRyYW5zZmVyIGFsbG93aW5nIHRoZQogIC8vLyAgY29udHJvbGxlciB0byByZWFjdCBpZiBkZXNpcmVkCiAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2ZlcgogIC8vLyBAcGFyYW0gX3RvIFRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgdHJhbnNmZXIKICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiB0aGUgdHJhbnNmZXIKICAvLy8gQHJldHVybiBGYWxzZSBpZiB0aGUgY29udHJvbGxlciBkb2VzIG5vdCBhdXRob3JpemUgdGhlIHRyYW5zZmVyCiAgZnVuY3Rpb24gb25UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSByZXR1cm5zKGJvb2wpOwoKICAvLy8gQG5vdGljZSBOb3RpZmllcyB0aGUgY29udHJvbGxlciBhYm91dCBhbiBhcHByb3ZhbCBhbGxvd2luZyB0aGUKICAvLy8gIGNvbnRyb2xsZXIgdG8gcmVhY3QgaWYgZGVzaXJlZAogIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRoYXQgY2FsbHMgYGFwcHJvdmUoKWAKICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBzcGVuZGVyIGluIHRoZSBgYXBwcm92ZSgpYCBjYWxsCiAgLy8vIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgaW4gdGhlIGBhcHByb3ZlKClgIGNhbGwKICAvLy8gQHJldHVybiBGYWxzZSBpZiB0aGUgY29udHJvbGxlciBkb2VzIG5vdCBhdXRob3JpemUgdGhlIGFwcHJvdmFsCiAgZnVuY3Rpb24gb25BcHByb3ZlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hbW91bnQpCiAgICByZXR1cm5zKGJvb2wpOwp9Cgpjb250cmFjdCBFUkMyMFRva2VuIHsKICAvKiBUaGlzIGlzIGEgc2xpZ2h0IGNoYW5nZSB0byB0aGUgRVJDMjAgYmFzZSBzdGFuZGFyZC4KICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKICAgICBpcyByZXBsYWNlZCB3aXRoOgogICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgIFRoaXMgYXV0b21hdGljYWxseSBjcmVhdGVzIGEgZ2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgdG90YWxTdXBwbHkuCiAgICAgVGhpcyBpcyBtb3ZlZCB0byB0aGUgYmFzZSBjb250cmFjdCBzaW5jZSBwdWJsaWMgZ2V0dGVyIGZ1bmN0aW9ucyBhcmUgbm90CiAgICAgY3VycmVudGx5IHJlY29nbmlzZWQgYXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIG1hdGNoaW5nIGFic3RyYWN0CiAgICAgZnVuY3Rpb24gYnkgdGhlIGNvbXBpbGVyLgogICovCiAgLy8vIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgogIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKY29udHJhY3QgQnVybmFibGUgaXMgQ29udHJvbGxlZCB7CiAgLy8vIEBub3RpY2UgVGhlIGFkZHJlc3Mgb2YgdGhlIGNvbnRyb2xsZXIgaXMgdGhlIG9ubHkgYWRkcmVzcyB0aGF0IGNhbiBjYWxsCiAgLy8vICBhIGZ1bmN0aW9uIHdpdGggdGhpcyBtb2RpZmllciwgYWxzbyB0aGUgYnVybmVyIGNhbiBjYWxsIGJ1dCBhbHNvIHRoZQogIC8vLyB0YXJnZXQgb2YgdGhlIGZ1bmN0aW9uIG11c3QgYmUgdGhlIGJ1cm5lcgogIG1vZGlmaWVyIG9ubHlDb250cm9sbGVyT3JCdXJuZXIoYWRkcmVzcyB0YXJnZXQpIHsKICAgIGFzc2VydChtc2cuc2VuZGVyID09IGNvbnRyb2xsZXIgfHwgKG1zZy5zZW5kZXIgPT0gYnVybmVyICYmIG1zZy5zZW5kZXIgPT0gdGFyZ2V0KSk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUJ1cm5lciB7CiAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBidXJuZXIpOwogICAgXzsKICB9CiAgYWRkcmVzcyBwdWJsaWMgYnVybmVyOwoKICBmdW5jdGlvbiBCdXJuYWJsZSgpIHsgYnVybmVyID0gbXNnLnNlbmRlcjt9CgogIC8vLyBAbm90aWNlIENoYW5nZXMgdGhlIGJ1cm5lciBvZiB0aGUgY29udHJhY3QKICAvLy8gQHBhcmFtIF9uZXdCdXJuZXIgVGhlIG5ldyBidXJuZXIgb2YgdGhlIGNvbnRyYWN0CiAgZnVuY3Rpb24gY2hhbmdlQnVybmVyKGFkZHJlc3MgX25ld0J1cm5lcikgb25seUJ1cm5lciB7CiAgICBidXJuZXIgPSBfbmV3QnVybmVyOwogIH0KfQoKY29udHJhY3QgTWluaU1lVG9rZW5JIGlzIEVSQzIwVG9rZW4sIEJ1cm5hYmxlIHsKCiAgICAgIHN0cmluZyBwdWJsaWMgbmFtZTsgICAgICAgICAgICAgICAgLy9UaGUgVG9rZW4ncyBuYW1lOiBlLmcuIERpZ2l4REFPIFRva2VucwogICAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7ICAgICAgICAgICAgIC8vTnVtYmVyIG9mIGRlY2ltYWxzIG9mIHRoZSBzbWFsbGVzdCB1bml0CiAgICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOyAgICAgICAgICAgICAgLy9BbiBpZGVudGlmaWVyOiBlLmcuIFJFUAogICAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAnTU1UXzAuMSc7IC8vQW4gYXJiaXRyYXJ5IHZlcnNpb25pbmcgc2NoZW1lCgovLy8vLy8vLy8vLy8vLy8vLy8vCi8vIEVSQzIwIE1ldGhvZHMKLy8vLy8vLy8vLy8vLy8vLy8vLwoKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzZW5kIGBfYW1vdW50YCB0b2tlbnMgb24KICAgIC8vLyAgaXRzIGJlaGFsZiwgYW5kIHRoZW4gYSBmdW5jdGlvbiBpcyB0cmlnZ2VyZWQgaW4gdGhlIGNvbnRyYWN0IHRoYXQgaXMKICAgIC8vLyAgYmVpbmcgYXBwcm92ZWQsIGBfc3BlbmRlcmAuIFRoaXMgYWxsb3dzIHVzZXJzIHRvIHVzZSB0aGVpciB0b2tlbnMgdG8KICAgIC8vLyAgaW50ZXJhY3Qgd2l0aCBjb250cmFjdHMgaW4gb25lIGZ1bmN0aW9uIGNhbGwgaW5zdGVhZCBvZiB0d28KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGNvbnRyYWN0IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlcgogICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgZnVuY3Rpb24gY2FsbCB3YXMgc3VjY2Vzc2Z1bAogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoCiAgICAgICAgYWRkcmVzcyBfc3BlbmRlciwKICAgICAgICB1aW50MjU2IF9hbW91bnQsCiAgICAgICAgYnl0ZXMgX2V4dHJhRGF0YQogICAgKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKLy8vLy8vLy8vLy8vLy8vLwovLyBRdWVyeSBiYWxhbmNlIGFuZCB0b3RhbFN1cHBseSBpbiBIaXN0b3J5Ci8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLy8gQGRldiBRdWVyaWVzIHRoZSBiYWxhbmNlIG9mIGBfb3duZXJgIGF0IGEgc3BlY2lmaWMgYF9ibG9ja051bWJlcmAKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcGFyYW0gX2Jsb2NrTnVtYmVyIFRoZSBibG9jayBudW1iZXIgd2hlbiB0aGUgYmFsYW5jZSBpcyBxdWVyaWVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZSBhdCBgX2Jsb2NrTnVtYmVyYAogICAgZnVuY3Rpb24gYmFsYW5jZU9mQXQoCiAgICAgICAgYWRkcmVzcyBfb3duZXIsCiAgICAgICAgdWludCBfYmxvY2tOdW1iZXIKICAgICkgY29uc3RhbnQgcmV0dXJucyAodWludCk7CgogICAgLy8vIEBub3RpY2UgVG90YWwgYW1vdW50IG9mIHRva2VucyBhdCBhIHNwZWNpZmljIGBfYmxvY2tOdW1iZXJgLgogICAgLy8vIEBwYXJhbSBfYmxvY2tOdW1iZXIgVGhlIGJsb2NrIG51bWJlciB3aGVuIHRoZSB0b3RhbFN1cHBseSBpcyBxdWVyaWVkCiAgICAvLy8gQHJldHVybiBUaGUgdG90YWwgYW1vdW50IG9mIHRva2VucyBhdCBgX2Jsb2NrTnVtYmVyYAogICAgZnVuY3Rpb24gdG90YWxTdXBwbHlBdCh1aW50IF9ibG9ja051bWJlcikgY29uc3RhbnQgcmV0dXJucyh1aW50KTsKCi8vLy8vLy8vLy8vLy8vLy8KLy8gQ2xvbmUgVG9rZW4gTWV0aG9kCi8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLy8gQG5vdGljZSBDcmVhdGVzIGEgbmV3IGNsb25lIHRva2VuIHdpdGggdGhlIGluaXRpYWwgZGlzdHJpYnV0aW9uIGJlaW5nCiAgICAvLy8gIHRoaXMgdG9rZW4gYXQgYF9zbmFwc2hvdEJsb2NrYAogICAgLy8vIEBwYXJhbSBfY2xvbmVUb2tlbk5hbWUgTmFtZSBvZiB0aGUgY2xvbmUgdG9rZW4KICAgIC8vLyBAcGFyYW0gX2Nsb25lRGVjaW1hbFVuaXRzIE51bWJlciBvZiBkZWNpbWFscyBvZiB0aGUgc21hbGxlc3QgdW5pdAogICAgLy8vIEBwYXJhbSBfY2xvbmVUb2tlblN5bWJvbCBTeW1ib2wgb2YgdGhlIGNsb25lIHRva2VuCiAgICAvLy8gQHBhcmFtIF9zbmFwc2hvdEJsb2NrIEJsb2NrIHdoZW4gdGhlIGRpc3RyaWJ1dGlvbiBvZiB0aGUgcGFyZW50IHRva2VuIGlzCiAgICAvLy8gIGNvcGllZCB0byBzZXQgdGhlIGluaXRpYWwgZGlzdHJpYnV0aW9uIG9mIHRoZSBuZXcgY2xvbmUgdG9rZW47CiAgICAvLy8gIGlmIHRoZSBibG9jayBpcyB6ZXJvIHRoYW4gdGhlIGFjdHVhbCBibG9jaywgdGhlIGN1cnJlbnQgYmxvY2sgaXMgdXNlZAogICAgLy8vIEBwYXJhbSBfdHJhbnNmZXJzRW5hYmxlZCBUcnVlIGlmIHRyYW5zZmVycyBhcmUgYWxsb3dlZCBpbiB0aGUgY2xvbmUKICAgIC8vLyBAcmV0dXJuIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgTWluaU1lVG9rZW4gQ29udHJhY3QKICAgIGZ1bmN0aW9uIGNyZWF0ZUNsb25lVG9rZW4oCiAgICAgICAgc3RyaW5nIF9jbG9uZVRva2VuTmFtZSwKICAgICAgICB1aW50OCBfY2xvbmVEZWNpbWFsVW5pdHMsCiAgICAgICAgc3RyaW5nIF9jbG9uZVRva2VuU3ltYm9sLAogICAgICAgIHVpbnQgX3NuYXBzaG90QmxvY2ssCiAgICAgICAgYm9vbCBfdHJhbnNmZXJzRW5hYmxlZAogICAgKSByZXR1cm5zKGFkZHJlc3MpOwoKLy8vLy8vLy8vLy8vLy8vLwovLyBHZW5lcmF0ZSBhbmQgZGVzdHJveSB0b2tlbnMKLy8vLy8vLy8vLy8vLy8vLwoKICAgIC8vLyBAbm90aWNlIEdlbmVyYXRlcyBgX2Ftb3VudGAgdG9rZW5zIHRoYXQgYXJlIGFzc2lnbmVkIHRvIGBfb3duZXJgCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgYmUgYXNzaWduZWQgdGhlIG5ldyB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX2Ftb3VudCBUaGUgcXVhbnRpdHkgb2YgdG9rZW5zIGdlbmVyYXRlZAogICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgdG9rZW5zIGFyZSBnZW5lcmF0ZWQgY29ycmVjdGx5CiAgICBmdW5jdGlvbiBnZW5lcmF0ZVRva2VucyhhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sKTsKCgogICAgLy8vIEBub3RpY2UgQnVybnMgYF9hbW91bnRgIHRva2VucyBmcm9tIGBfb3duZXJgCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgbG9zZSB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIHF1YW50aXR5IG9mIHRva2VucyB0byBidXJuCiAgICAvLy8gQHJldHVybiBUcnVlIGlmIHRoZSB0b2tlbnMgYXJlIGJ1cm5lZCBjb3JyZWN0bHkKICAgIGZ1bmN0aW9uIGRlc3Ryb3lUb2tlbnMoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCk7CgovLy8vLy8vLy8vLy8vLy8vCi8vIEVuYWJsZSB0b2tlbnMgdHJhbnNmZXJzCi8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLy8gQG5vdGljZSBFbmFibGVzIHRva2VuIGhvbGRlcnMgdG8gdHJhbnNmZXIgdGhlaXIgdG9rZW5zIGZyZWVseSBpZiB0cnVlCiAgICAvLy8gQHBhcmFtIF90cmFuc2ZlcnNFbmFibGVkIFRydWUgaWYgdHJhbnNmZXJzIGFyZSBhbGxvd2VkIGluIHRoZSBjbG9uZQogICAgZnVuY3Rpb24gZW5hYmxlVHJhbnNmZXJzKGJvb2wgX3RyYW5zZmVyc0VuYWJsZWQpOwoKLy8vLy8vLy8vLwovLyBTYWZldHkgTWV0aG9kcwovLy8vLy8vLy8vCgogICAgLy8vIEBub3RpY2UgVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgYnkgdGhlIGNvbnRyb2xsZXIgdG8gZXh0cmFjdCBtaXN0YWtlbmx5CiAgICAvLy8gIHNlbnQgdG9rZW5zIHRvIHRoaXMgY29udHJhY3QuCiAgICAvLy8gQHBhcmFtIF90b2tlbiBUaGUgYWRkcmVzcyBvZiB0aGUgdG9rZW4gY29udHJhY3QgdGhhdCB5b3Ugd2FudCB0byByZWNvdmVyCiAgICAvLy8gIHNldCB0byAwIGluIGNhc2UgeW91IHdhbnQgdG8gZXh0cmFjdCBldGhlci4KICAgIGZ1bmN0aW9uIGNsYWltVG9rZW5zKGFkZHJlc3MgX3Rva2VuKTsKCi8vLy8vLy8vLy8vLy8vLy8KLy8gRXZlbnRzCi8vLy8vLy8vLy8vLy8vLy8KCiAgICBldmVudCBDbGFpbWVkVG9rZW5zKGFkZHJlc3MgaW5kZXhlZCBfdG9rZW4sIGFkZHJlc3MgaW5kZXhlZCBfY29udHJvbGxlciwgdWludCBfYW1vdW50KTsKICAgIGV2ZW50IE5ld0Nsb25lVG9rZW4oYWRkcmVzcyBpbmRleGVkIF9jbG9uZVRva2VuLCB1aW50IF9zbmFwc2hvdEJsb2NrKTsKfQoKY29udHJhY3QgRmluYWxpemFibGUgewogIHVpbnQyNTYgcHVibGljIGZpbmFsaXplZEJsb2NrOwogIGJvb2wgcHVibGljIGdvYWxNZXQ7CgogIGZ1bmN0aW9uIGZpbmFsaXplKCk7Cn0KCmNvbnRyYWN0IENvbnRyaWJ1dGlvbiBpcyBDb250cm9sbGVkLCBUb2tlbkNvbnRyb2xsZXIsIEZpbmFsaXphYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHlDYXA7IC8vIFRvdGFsIE1TUCBzdXBwbHkgdG8gYmUgZ2VuZXJhdGVkCiAgdWludDI1NiBwdWJsaWMgZXhjaGFuZ2VSYXRlOyAvLyBFVEgtTVNQIGV4Y2hhbmdlIHJhdGUKICB1aW50MjU2IHB1YmxpYyB0b3RhbFNvbGQ7IC8vIEhvdyBtdWNoIHRva2VucyBzb2xkCiAgdWludDI1NiBwdWJsaWMgdG90YWxTYWxlU3VwcGx5Q2FwOyAvLyBUb2tlbiBzYWxlIGNhcAoKICBNaW5pTWVUb2tlbkkgcHVibGljIHNpdDsKICBNaW5pTWVUb2tlbkkgcHVibGljIG1zcDsKCiAgdWludDI1NiBwdWJsaWMgc3RhcnRCbG9jazsKICB1aW50MjU2IHB1YmxpYyBlbmRCbG9jazsKCiAgYWRkcmVzcyBwdWJsaWMgZGVzdEV0aERldnM7CiAgYWRkcmVzcyBwdWJsaWMgZGVzdFRva2Vuc1NpdDsKICBhZGRyZXNzIHB1YmxpYyBkZXN0VG9rZW5zVGVhbTsKICBhZGRyZXNzIHB1YmxpYyBkZXN0VG9rZW5zUmVmZXJhbHM7CgogIGFkZHJlc3MgcHVibGljIG1zcENvbnRyb2xsZXI7CgogIHVpbnQyNTYgcHVibGljIGluaXRpYWxpemVkQmxvY2s7CiAgdWludDI1NiBwdWJsaWMgZmluYWxpemVkVGltZTsKCiAgdWludDI1NiBwdWJsaWMgbWluaW11bV9pbnZlc3RtZW50OwogIHVpbnQyNTYgcHVibGljIG1pbmltdW1fZ29hbDsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkOwoKICBtb2RpZmllciBpbml0aWFsaXplZCgpIHsKICAgIGFzc2VydChhZGRyZXNzKG1zcCkgIT0gMHgwKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBjb250cmlidXRpb25PcGVuKCkgewogICAgYXNzZXJ0KGdldEJsb2NrTnVtYmVyKCkgPj0gc3RhcnRCbG9jayAmJgogICAgICAgICAgICBnZXRCbG9ja051bWJlcigpIDw9IGVuZEJsb2NrICYmCiAgICAgICAgICAgIGZpbmFsaXplZEJsb2NrID09IDAgJiYKICAgICAgICAgICAgYWRkcmVzcyhtc3ApICE9IDB4MCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgbm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBDb250cmlidXRpb24oKSB7CiAgICAvLyBCb29sZWFucyBhcmUgZmFsc2UgYnkgZGVmYXVsdCBjb25zaWRlciByZW1vdmluZyB0aGlzCiAgICBwYXVzZWQgPSBmYWxzZTsKICB9CgogIC8vLyBAbm90aWNlIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgYnkgdGhlIGNvbnRyb2xsZXIgYmVmb3JlIHRoZSBjb250cmlidXRpb24KICAvLy8gIHBlcmlvZCBzdGFydHMgVGhpcyBpbml0aWFsaXplcyBtb3N0IG9mIHRoZSBwYXJhbWV0ZXJzCiAgLy8vIEBwYXJhbSBfbXNwIEFkZHJlc3Mgb2YgdGhlIE1TUCB0b2tlbiBjb250cmFjdAogIC8vLyBAcGFyYW0gX21zcENvbnRyb2xsZXIgVG9rZW4gY29udHJvbGxlciBmb3IgdGhlIE1TUCB0aGF0IHdpbGwgYmUgdHJhbnNmZXJyZWQgYWZ0ZXIKICAvLy8gIHRoZSBjb250cmlidXRpb24gZmluYWxpemVzLgogIC8vLyBAcGFyYW0gX3RvdGFsU3VwcGx5Q2FwIE1heGltdW0gYW1vdW50IG9mIHRva2VucyB0byBnZW5lcmF0ZSBkdXJpbmcgdGhlIGNvbnRyaWJ1dGlvbgogIC8vLyBAcGFyYW0gX2V4Y2hhbmdlUmF0ZSBFVEggdG8gTVNQIHJhdGUgZm9yIHRoZSB0b2tlbiBzYWxlCiAgLy8vIEBwYXJhbSBfc3RhcnRCbG9jayBCbG9jayB3aGVuIHRoZSBjb250cmlidXRpb24gcGVyaW9kIHN0YXJ0cwogIC8vLyBAcGFyYW0gX2VuZEJsb2NrIFRoZSBsYXN0IGJsb2NrIHRoYXQgdGhlIGNvbnRyaWJ1dGlvbiBwZXJpb2QgaXMgYWN0aXZlCiAgLy8vIEBwYXJhbSBfZGVzdEV0aERldnMgRGVzdGluYXRpb24gYWRkcmVzcyB3aGVyZSB0aGUgY29udHJpYnV0aW9uIGV0aGVyIGlzIHNlbnQKICAvLy8gQHBhcmFtIF9kZXN0VG9rZW5zU2l0IEFkZHJlc3Mgb2YgdGhlIGV4Y2hhbmdlciBTSVQtTVNQIHdoZXJlIHRoZSBNU1AgYXJlIHNlbnQKICAvLy8gIHRvIGJlIGRpc3RyaWJ1dGVkIHRvIHRoZSBTSVQgaG9sZGVycy4KICAvLy8gQHBhcmFtIF9kZXN0VG9rZW5zVGVhbSBBZGRyZXNzIHdoZXJlIHRoZSB0b2tlbnMgZm9yIHRoZSB0ZWFtIGFyZSBzZW50CiAgLy8vIEBwYXJhbSBfZGVzdFRva2Vuc1JlZmVyYWxzIEFkZHJlc3Mgd2hlcmUgdGhlIHRva2VucyBmb3IgdGhlIHJlZmVyYWwgc3lzdGVtIGFyZSBzZW50CiAgLy8vIEBwYXJhbSBfc2l0IEFkZHJlc3Mgb2YgdGhlIFNJVCB0b2tlbiBjb250cmFjdAogIGZ1bmN0aW9uIGluaXRpYWxpemUoCiAgICAgIGFkZHJlc3MgX21zcCwKICAgICAgYWRkcmVzcyBfbXNwQ29udHJvbGxlciwKCiAgICAgIHVpbnQyNTYgX3RvdGFsU3VwcGx5Q2FwLAogICAgICB1aW50MjU2IF9leGNoYW5nZVJhdGUsCiAgICAgIHVpbnQyNTYgX21pbmltdW1fZ29hbCwKCiAgICAgIHVpbnQyNTYgX3N0YXJ0QmxvY2ssCiAgICAgIHVpbnQyNTYgX2VuZEJsb2NrLAoKICAgICAgYWRkcmVzcyBfZGVzdEV0aERldnMsCiAgICAgIGFkZHJlc3MgX2Rlc3RUb2tlbnNTaXQsCiAgICAgIGFkZHJlc3MgX2Rlc3RUb2tlbnNUZWFtLAogICAgICBhZGRyZXNzIF9kZXN0VG9rZW5zUmVmZXJhbHMsCgogICAgICBhZGRyZXNzIF9zaXQKICApIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICAvLyBJbml0aWFsaXplIG9ubHkgb25jZQogICAgYXNzZXJ0KGFkZHJlc3MobXNwKSA9PSAweDApOwoKICAgIG1zcCA9IE1pbmlNZVRva2VuSShfbXNwKTsKICAgIGFzc2VydChtc3AudG90YWxTdXBwbHkoKSA9PSAwKTsKICAgIGFzc2VydChtc3AuY29udHJvbGxlcigpID09IGFkZHJlc3ModGhpcykpOwogICAgYXNzZXJ0KG1zcC5kZWNpbWFscygpID09IDE4KTsgIC8vIFNhbWUgYW1vdW50IG9mIGRlY2ltYWxzIGFzIEVUSAoKICAgIHJlcXVpcmUoX21zcENvbnRyb2xsZXIgIT0gMHgwKTsKICAgIG1zcENvbnRyb2xsZXIgPSBfbXNwQ29udHJvbGxlcjsKCiAgICByZXF1aXJlKF9leGNoYW5nZVJhdGUgPiAwKTsKICAgIGV4Y2hhbmdlUmF0ZSA9IF9leGNoYW5nZVJhdGU7CgogICAgYXNzZXJ0KF9zdGFydEJsb2NrID49IGdldEJsb2NrTnVtYmVyKCkpOwogICAgcmVxdWlyZShfc3RhcnRCbG9jayA8IF9lbmRCbG9jayk7CiAgICBzdGFydEJsb2NrID0gX3N0YXJ0QmxvY2s7CiAgICBlbmRCbG9jayA9IF9lbmRCbG9jazsKCiAgICByZXF1aXJlKF9kZXN0RXRoRGV2cyAhPSAweDApOwogICAgZGVzdEV0aERldnMgPSBfZGVzdEV0aERldnM7CgogICAgcmVxdWlyZShfZGVzdFRva2Vuc1NpdCAhPSAweDApOwogICAgZGVzdFRva2Vuc1NpdCA9IF9kZXN0VG9rZW5zU2l0OwoKICAgIHJlcXVpcmUoX2Rlc3RUb2tlbnNUZWFtICE9IDB4MCk7CiAgICBkZXN0VG9rZW5zVGVhbSA9IF9kZXN0VG9rZW5zVGVhbTsKCiAgICByZXF1aXJlKF9kZXN0VG9rZW5zUmVmZXJhbHMgIT0gMHgwKTsKICAgIGRlc3RUb2tlbnNSZWZlcmFscyA9IF9kZXN0VG9rZW5zUmVmZXJhbHM7CgogICAgcmVxdWlyZShfc2l0ICE9IDB4MCk7CiAgICBzaXQgPSBNaW5pTWVUb2tlbkkoX3NpdCk7CgogICAgaW5pdGlhbGl6ZWRCbG9jayA9IGdldEJsb2NrTnVtYmVyKCk7CiAgICAvLyBTSVQgYW1vdW50IHNob3VsZCBiZSBubyBtb3JlIHRoYW4gMjAlIG9mIE1TUCB0b3RhbCBzdXBwbHkgY2FwCiAgICBhc3NlcnQoc2l0LnRvdGFsU3VwcGx5QXQoaW5pdGlhbGl6ZWRCbG9jaykgKiA1IDw9IF90b3RhbFN1cHBseUNhcCk7CiAgICB0b3RhbFN1cHBseUNhcCA9IF90b3RhbFN1cHBseUNhcDsKCiAgICAvLyBXZSBhcmUgZ29pbmcgdG8gc2FsZSA3MCUgb2YgdG90YWwgc3VwcGx5IGNhcAogICAgdG90YWxTYWxlU3VwcGx5Q2FwID0gcGVyY2VudCg3MCkubXVsKF90b3RhbFN1cHBseUNhcCkuZGl2KHBlcmNlbnQoMTAwKSk7CgogICAgbWluaW11bV9nb2FsID0gX21pbmltdW1fZ29hbDsKICB9CgogIGZ1bmN0aW9uIHNldE1pbmltdW1JbnZlc3RtZW50KAogICAgICB1aW50IF9taW5pbXVtX2ludmVzdG1lbnQKICApIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICBtaW5pbXVtX2ludmVzdG1lbnQgPSBfbWluaW11bV9pbnZlc3RtZW50OwogIH0KCiAgZnVuY3Rpb24gc2V0RXhjaGFuZ2VSYXRlKAogICAgICB1aW50IF9leGNoYW5nZVJhdGUKICApIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICBhc3NlcnQoZ2V0QmxvY2tOdW1iZXIoKSA8IHN0YXJ0QmxvY2spOwogICAgZXhjaGFuZ2VSYXRlID0gX2V4Y2hhbmdlUmF0ZTsKICB9CgogIC8vLyBAbm90aWNlIElmIGFueWJvZHkgc2VuZHMgRXRoZXIgZGlyZWN0bHkgdG8gdGhpcyBjb250cmFjdCwgY29uc2lkZXIgaGUgaXMKICAvLy8gIGdldHRpbmcgTVNQcy4KICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSBub3RQYXVzZWQgewogICAgcHJveHlQYXltZW50KG1zZy5zZW5kZXIpOwogIH0KCgogIC8vLy8vLy8vLy8KICAvLyBUb2tlbkNvbnRyb2xsZXIgZnVuY3Rpb25zCiAgLy8vLy8vLy8vLwoKICAvLy8gQG5vdGljZSBUaGlzIG1ldGhvZCB3aWxsIGdlbmVyYWxseSBiZSBjYWxsZWQgYnkgdGhlIE1TUCB0b2tlbiBjb250cmFjdCB0bwogIC8vLyAgYWNxdWlyZSBNU1BzLiBPciBkaXJlY3RseSBmcm9tIHRoaXJkIHBhcnRpZXMgdGhhdCB3YW50IHRvIGFjcXVpcmUgTVNQcyBpbgogIC8vLyAgYmVoYWxmIG9mIGEgdG9rZW4gaG9sZGVyLgogIC8vLyBAcGFyYW0gX3RoIE1TUCBob2xkZXIgd2hlcmUgdGhlIE1TUHMgd2lsbCBiZSBtaW50ZWQuCiAgZnVuY3Rpb24gcHJveHlQYXltZW50KGFkZHJlc3MgX3RoKSBwdWJsaWMgcGF5YWJsZSBub3RQYXVzZWQgaW5pdGlhbGl6ZWQgY29udHJpYnV0aW9uT3BlbiByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90aCAhPSAweDApOwogICAgZG9CdXkoX3RoKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gb25UcmFuc2ZlcihhZGRyZXNzLCBhZGRyZXNzLCB1aW50MjU2KSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gb25BcHByb3ZlKGFkZHJlc3MsIGFkZHJlc3MsIHVpbnQyNTYpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBkb0J1eShhZGRyZXNzIF90aCkgaW50ZXJuYWwgewogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gbWluaW11bV9pbnZlc3RtZW50KTsKCiAgICAvLyBBbnRpc3BhbSBtZWNoYW5pc20KICAgIGFkZHJlc3MgY2FsbGVyOwogICAgaWYgKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhtc3ApKSB7CiAgICAgIGNhbGxlciA9IF90aDsKICAgIH0gZWxzZSB7CiAgICAgIGNhbGxlciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLy8gRG8gbm90IGFsbG93IGNvbnRyYWN0cyB0byBnYW1lIHRoZSBzeXN0ZW0KICAgIGFzc2VydCghaXNDb250cmFjdChjYWxsZXIpKTsKCiAgICB1aW50MjU2IHRvRnVuZCA9IG1zZy52YWx1ZTsKICAgIHVpbnQyNTYgbGVmdEZvclNhbGUgPSB0b2tlbnNGb3JTYWxlKCk7CiAgICBpZiAodG9GdW5kID4gMCkgewogICAgICBpZiAobGVmdEZvclNhbGUgPiAwKSB7CiAgICAgICAgdWludDI1NiB0b2tlbnNHZW5lcmF0ZWQgPSB0b0Z1bmQubXVsKGV4Y2hhbmdlUmF0ZSk7CgogICAgICAgIC8vIENoZWNrIHRvdGFsIHN1cHBseSBjYXAgcmVhY2hlZCwgc2VsbCB0aGUgYWxsIHJlbWFpbmluZyB0b2tlbnMKICAgICAgICBpZiAodG9rZW5zR2VuZXJhdGVkID4gbGVmdEZvclNhbGUpIHsKICAgICAgICAgIHRva2Vuc0dlbmVyYXRlZCA9IGxlZnRGb3JTYWxlOwogICAgICAgICAgdG9GdW5kID0gbGVmdEZvclNhbGUuZGl2KGV4Y2hhbmdlUmF0ZSk7CiAgICAgICAgfQoKICAgICAgICBhc3NlcnQobXNwLmdlbmVyYXRlVG9rZW5zKF90aCwgdG9rZW5zR2VuZXJhdGVkKSk7CiAgICAgICAgdG90YWxTb2xkID0gdG90YWxTb2xkLmFkZCh0b2tlbnNHZW5lcmF0ZWQpOwogICAgICAgIGlmICh0b3RhbFNvbGQgPj0gbWluaW11bV9nb2FsKSB7CiAgICAgICAgICBnb2FsTWV0ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZGVzdEV0aERldnMudHJhbnNmZXIodG9GdW5kKTsKICAgICAgICBOZXdTYWxlKF90aCwgdG9GdW5kLCB0b2tlbnNHZW5lcmF0ZWQpOwogICAgICB9IGVsc2UgewogICAgICAgIHRvRnVuZCA9IDA7CiAgICAgIH0KICAgIH0KCiAgICB1aW50MjU2IHRvUmV0dXJuID0gbXNnLnZhbHVlLnN1Yih0b0Z1bmQpOwogICAgaWYgKHRvUmV0dXJuID4gMCkgewogICAgICAvLyBJZiB0aGUgY2FsbCBjb21lcyBmcm9tIHRoZSBUb2tlbiBjb250cm9sbGVyLAogICAgICAvLyB0aGVuIHdlIHJldHVybiBpdCB0byB0aGUgdG9rZW4gSG9sZGVyLgogICAgICAvLyBPdGhlcndpc2Ugd2UgcmV0dXJuIHRvIHRoZSBzZW5kZXIuCiAgICAgIGlmIChtc2cuc2VuZGVyID09IGFkZHJlc3MobXNwKSkgewogICAgICAgIF90aC50cmFuc2Zlcih0b1JldHVybik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcih0b1JldHVybik7CiAgICAgIH0KICAgIH0KICB9CgogIC8vLyBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGRldGVybWluZSBpZiBhbiBhZGRyZXNzIGlzIGEgY29udHJhY3QKICAvLy8gQHBhcmFtIF9hZGRyIFRoZSBhZGRyZXNzIGJlaW5nIHF1ZXJpZWQKICAvLy8gQHJldHVybiBUcnVlIGlmIGBfYWRkcmAgaXMgYSBjb250cmFjdAogIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgaWYgKF9hZGRyID09IDApIHJldHVybiBmYWxzZTsKICAgIHVpbnQyNTYgc2l6ZTsKICAgIGFzc2VtYmx5IHsKICAgICAgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgIH0KICAgIHJldHVybiAoc2l6ZSA+IDApOwogIH0KCiAgZnVuY3Rpb24gcmVmdW5kKCkgcHVibGljIHsKICAgIHJlcXVpcmUoZmluYWxpemVkQmxvY2sgIT0gMCk7CiAgICByZXF1aXJlKCFnb2FsTWV0KTsKCiAgICB1aW50MjU2IGFtb3VudFRva2VucyA9IG1zcC5iYWxhbmNlT2YobXNnLnNlbmRlcik7CiAgICByZXF1aXJlKGFtb3VudFRva2VucyA+IDApOwogICAgdWludDI1NiBhbW91bnRFdGhlciA9IGFtb3VudFRva2Vucy5kaXYoZXhjaGFuZ2VSYXRlKTsKICAgIGFkZHJlc3MgdGggPSBtc2cuc2VuZGVyOwoKICAgIFJlZnVuZGFibGUobXNwQ29udHJvbGxlcikucmVmdW5kKHRoLCBhbW91bnRUb2tlbnMpOwogICAgUmVmdW5kYWJsZShkZXN0RXRoRGV2cykucmVmdW5kKHRoLCBhbW91bnRFdGhlcik7CgogICAgUmVmdW5kKHRoLCBhbW91bnRUb2tlbnMsIGFtb3VudEV0aGVyKTsKICB9CgogIGV2ZW50IFJlZnVuZChhZGRyZXNzIF90b2tlbl9ob2xkZXIsIHVpbnQyNTYgX2Ftb3VudF90b2tlbnMsIHVpbnQyNTYgX2Ftb3VudF9ldGhlcik7CgogIC8vLyBAbm90aWNlIFRoaXMgbWV0aG9kIHdpbGwgY2FuIGJlIGNhbGxlZCBieSB0aGUgY29udHJvbGxlciBiZWZvcmUgdGhlIGNvbnRyaWJ1dGlvbiBwZXJpb2QKICAvLy8gIGVuZCBvciBieSBhbnlib2R5IGFmdGVyIHRoZSBgZW5kQmxvY2tgLiBUaGlzIG1ldGhvZCBmaW5hbGl6ZXMgdGhlIGNvbnRyaWJ1dGlvbiBwZXJpb2QKICAvLy8gIGJ5IGNyZWF0aW5nIHRoZSByZW1haW5pbmcgdG9rZW5zIGFuZCB0cmFuc2ZlcnJpbmcgdGhlIGNvbnRyb2xsZXIgdG8gdGhlIGNvbmZpZ3VyZWQKICAvLy8gIGNvbnRyb2xsZXIuCiAgZnVuY3Rpb24gZmluYWxpemUoKSBwdWJsaWMgaW5pdGlhbGl6ZWQgewogICAgYXNzZXJ0KGdldEJsb2NrTnVtYmVyKCkgPj0gc3RhcnRCbG9jayk7CiAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBjb250cm9sbGVyIHx8IGdldEJsb2NrTnVtYmVyKCkgPiBlbmRCbG9jayB8fCB0b2tlbnNGb3JTYWxlKCkgPT0gMCk7CiAgICByZXF1aXJlKGZpbmFsaXplZEJsb2NrID09IDApOwoKICAgIGZpbmFsaXplZEJsb2NrID0gZ2V0QmxvY2tOdW1iZXIoKTsKICAgIGZpbmFsaXplZFRpbWUgPSBub3c7CgogICAgaWYgKGdvYWxNZXQpIHsKICAgICAgLy8gR2VuZXJhdGUgNSUgZm9yIHRoZSB0ZWFtCiAgICAgIGFzc2VydChtc3AuZ2VuZXJhdGVUb2tlbnMoCiAgICAgICAgZGVzdFRva2Vuc1RlYW0sCiAgICAgICAgcGVyY2VudCg1KS5tdWwodG90YWxTdXBwbHlDYXApLmRpdihwZXJjZW50KDEwMCkpKSk7CgogICAgICAvLyBHZW5lcmF0ZSA1JSBmb3IgdGhlIHJlZmVyYWwgYm9udXNlcwogICAgICBhc3NlcnQobXNwLmdlbmVyYXRlVG9rZW5zKAogICAgICAgIGRlc3RUb2tlbnNSZWZlcmFscywKICAgICAgICBwZXJjZW50KDUpLm11bCh0b3RhbFN1cHBseUNhcCkuZGl2KHBlcmNlbnQoMTAwKSkpKTsKCiAgICAgIC8vIEdlbmVyYXRlIHRva2VucyBmb3IgU0lUIGV4Y2hhbmdlcgogICAgICBhc3NlcnQobXNwLmdlbmVyYXRlVG9rZW5zKAogICAgICAgIGRlc3RUb2tlbnNTaXQsCiAgICAgICAgc2l0LnRvdGFsU3VwcGx5QXQoaW5pdGlhbGl6ZWRCbG9jaykpKTsKICAgIH0KCiAgICBtc3AuY2hhbmdlQ29udHJvbGxlcihtc3BDb250cm9sbGVyKTsKICAgIEZpbmFsaXplZCgpOwogIH0KCiAgZnVuY3Rpb24gcGVyY2VudCh1aW50MjU2IHApIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBwLm11bCgxMCoqMTYpOwogIH0KCgogIC8vLy8vLy8vLy8KICAvLyBDb25zdGFudCBmdW5jdGlvbnMKICAvLy8vLy8vLy8vCgogIC8vLyBAcmV0dXJuIFRvdGFsIHRva2VucyBpc3N1ZWQgaW4gd2Vpcy4KICBmdW5jdGlvbiB0b2tlbnNJc3N1ZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIG1zcC50b3RhbFN1cHBseSgpOwogIH0KCiAgLy8vIEByZXR1cm4gVG90YWwgdG9rZW5zIGF2YWlsYWxlIGZvciB0aGUgc2FsZSBpbiB3ZWlzLgogIGZ1bmN0aW9uIHRva2Vuc0ZvclNhbGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICByZXR1cm4gdG90YWxTYWxlU3VwcGx5Q2FwID4gdG90YWxTb2xkID8gdG90YWxTYWxlU3VwcGx5Q2FwIC0gdG90YWxTb2xkIDogMDsKICB9CgoKICAvLy8vLy8vLy8vCiAgLy8gVGVzdGluZyBzcGVjaWZpYyBtZXRob2RzCiAgLy8vLy8vLy8vLwoKICAvLy8gQG5vdGljZSBUaGlzIGZ1bmN0aW9uIGlzIG92ZXJyaWRkZW4gYnkgdGhlIHRlc3QgTW9ja3MuCiAgZnVuY3Rpb24gZ2V0QmxvY2tOdW1iZXIoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYmxvY2subnVtYmVyOwogIH0KCgogIC8vLy8vLy8vLy8KICAvLyBTYWZldHkgTWV0aG9kcwogIC8vLy8vLy8vLy8KCiAgLy8vIEBub3RpY2UgVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgYnkgdGhlIGNvbnRyb2xsZXIgdG8gZXh0cmFjdCBtaXN0YWtlbmx5CiAgLy8vICBzZW50IHRva2VucyB0byB0aGlzIGNvbnRyYWN0LgogIC8vLyBAcGFyYW0gX3Rva2VuIFRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlbiBjb250cmFjdCB0aGF0IHlvdSB3YW50IHRvIHJlY292ZXIKICAvLy8gIHNldCB0byAwIGluIGNhc2UgeW91IHdhbnQgdG8gZXh0cmFjdCBldGhlci4KICBmdW5jdGlvbiBjbGFpbVRva2VucyhhZGRyZXNzIF90b2tlbikgcHVibGljIG9ubHlDb250cm9sbGVyIHsKICAgIGlmIChtc3AuY29udHJvbGxlcigpID09IGFkZHJlc3ModGhpcykpIHsKICAgICAgbXNwLmNsYWltVG9rZW5zKF90b2tlbik7CiAgICB9CiAgICBpZiAoX3Rva2VuID09IDB4MCkgewogICAgICBjb250cm9sbGVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBFUkMyMFRva2VuIHRva2VuID0gRVJDMjBUb2tlbihfdG9rZW4pOwogICAgdWludDI1NiBiYWxhbmNlID0gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgdG9rZW4udHJhbnNmZXIoY29udHJvbGxlciwgYmFsYW5jZSk7CiAgICBDbGFpbWVkVG9rZW5zKF90b2tlbiwgY29udHJvbGxlciwgYmFsYW5jZSk7CiAgfQoKCiAgLy8vIEBub3RpY2UgUGF1c2VzIHRoZSBjb250cmlidXRpb24gaWYgdGhlcmUgaXMgYW55IGlzc3VlCiAgZnVuY3Rpb24gcGF1c2VDb250cmlidXRpb24oKSBvbmx5Q29udHJvbGxlciB7CiAgICBwYXVzZWQgPSB0cnVlOwogIH0KCiAgLy8vIEBub3RpY2UgUmVzdW1lcyB0aGUgY29udHJpYnV0aW9uCiAgZnVuY3Rpb24gcmVzdW1lQ29udHJpYnV0aW9uKCkgb25seUNvbnRyb2xsZXIgewogICAgcGF1c2VkID0gZmFsc2U7CiAgfQoKICBldmVudCBDbGFpbWVkVG9rZW5zKGFkZHJlc3MgaW5kZXhlZCBfdG9rZW4sIGFkZHJlc3MgaW5kZXhlZCBfY29udHJvbGxlciwgdWludDI1NiBfYW1vdW50KTsKICBldmVudCBOZXdTYWxlKGFkZHJlc3MgaW5kZXhlZCBfdGgsIHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBfdG9rZW5zKTsKICBldmVudCBGaW5hbGl6ZWQoKTsKfQ=='.
	

]
