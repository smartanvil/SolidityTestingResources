Class {
	#name : #SRT3b1f334c7003d55591cbbff548ffb522b72f557c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3b1f334c7003d55591cbbff548ffb522b72f557c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgovKiBFUkMyMCBjb250cmFjdCBpbnRlcmZhY2UgKi8KLyogV2l0aCBFUkMyMy9FUkMyMjMgRXh0ZW5zaW9ucyAqLwovKiBGdWxseSBiYWNrd2FyZCBjb21wYXRpYmxlIHdpdGggRVJDMjAgKi8KLyogUmVjb21tZW5kZWQgaW1wbGVtZW50YXRpb24gdXNlZCBhdCBodHRwczovL2dpdGh1Yi5jb20vRGV4YXJhbi9FUkMyMjMtdG9rZW4tc3RhbmRhcmQvdHJlZS9SZWNvbW1lbmRlZCAqLwoKY29udHJhY3QgRVJDMjAgewogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLy8gRVJDMjIzIGFuZCBFUkMyMCBmdW5jdGlvbnMgYW5kIGV2ZW50cwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IF9zdXBwbHkpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgb2spOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wgb2spOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSwgc3RyaW5nIGN1c3RvbUZhbGxiYWNrKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlLCBieXRlcyBpbmRleGVkIGRhdGEpOwoKICAgIC8vIEVSQzIyMyBmdW5jdGlvbnMKICAgIGZ1bmN0aW9uIG5hbWUoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAoc3RyaW5nIF9uYW1lKTsKICAgIGZ1bmN0aW9uIHN5bWJvbCgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChzdHJpbmcgX3N5bWJvbCk7CiAgICBmdW5jdGlvbiBkZWNpbWFscygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50OCBfZGVjaW1hbHMpOwoKICAgIC8vIEVSQzIwIGZ1bmN0aW9ucyBhbmQgZXZlbnRzCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKTsKfQoKLyoqCiAqIEluY2x1ZGUgU2FmZU1hdGggTGliCiAqLwogCmNvbnRyYWN0IFNhZmVNYXRoIHsKICAgIHVpbnQyNTYgY29uc3RhbnQgcHVibGljIE1BWF9VSU5UMjU2ID0KICAgIDB4RkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRjsKCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBpZiAoeCA+IE1BWF9VSU5UMjU2IC0geSkKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgcmV0dXJuIHggKyB5OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVTdWIodWludDI1NiB4LCB1aW50MjU2IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgICAgIGlmICh4IDwgeSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHggLSB5OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVNdWwodWludDI1NiB4LCB1aW50MjU2IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgICAgIGlmICh5ID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIGlmICh4ID4gTUFYX1VJTlQyNTYgLyB5KSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4geCAqIHk7CiAgICB9Cn0KCi8qCiAqIENvbnRyYWN0IHRoYXQgaXMgd29ya2luZyB3aXRoIEVSQzIyMyB0b2tlbnMKICovCiAKIGNvbnRyYWN0IENvbnRyYWN0UmVjZWl2ZXIgewoKICAgIHN0cnVjdCBUS04gewogICAgICAgIGFkZHJlc3Mgc2VuZGVyOwogICAgICAgIHVpbnQgdmFsdWU7CiAgICAgICAgYnl0ZXMgZGF0YTsKICAgICAgICBieXRlczQgc2lnOwogICAgfQoKICAgIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfZnJvbSwgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgewogICAgICBUS04gbWVtb3J5IHRrbjsKICAgICAgdGtuLnNlbmRlciA9IF9mcm9tOwogICAgICB0a24udmFsdWUgPSBfdmFsdWU7CiAgICAgIHRrbi5kYXRhID0gX2RhdGE7CiAgICAgIHVpbnQzMiB1ID0gdWludDMyKF9kYXRhWzNdKSArICh1aW50MzIoX2RhdGFbMl0pIDw8IDgpICsgKHVpbnQzMihfZGF0YVsxXSkgPDwgMTYpICsgKHVpbnQzMihfZGF0YVswXSkgPDwgMjQpOwogICAgICB0a24uc2lnID0gYnl0ZXM0KHUpOwoKICAgICAgLyogdGtuIHZhcmlhYmxlIGlzIGFuYWxvZ3VlIG9mIG1zZyB2YXJpYWJsZSBvZiBFdGhlciB0cmFuc2FjdGlvbgogICAgICAqICB0a24uc2VuZGVyIGlzIHBlcnNvbiB3aG8gaW5pdGlhdGVkIHRoaXMgdG9rZW4gdHJhbnNhY3Rpb24gICAoYW5hbG9ndWUgb2YgbXNnLnNlbmRlcikKICAgICAgKiAgdGtuLnZhbHVlIHRoZSBudW1iZXIgb2YgdG9rZW5zIHRoYXQgd2VyZSBzZW50ICAgKGFuYWxvZ3VlIG9mIG1zZy52YWx1ZSkKICAgICAgKiAgdGtuLmRhdGEgaXMgZGF0YSBvZiB0b2tlbiB0cmFuc2FjdGlvbiAgIChhbmFsb2d1ZSBvZiBtc2cuZGF0YSkKICAgICAgKiAgdGtuLnNpZyBpcyA0IGJ5dGVzIHNpZ25hdHVyZSBvZiBmdW5jdGlvbgogICAgICAqICBpZiBkYXRhIG9mIHRva2VuIHRyYW5zYWN0aW9uIGlzIGEgZnVuY3Rpb24gZXhlY3V0aW9uCiAgICAgICovCiAgICB9Cn0KCi8qCiAqIFBoYXJhbW9yZSBpcyBhbiBFUkMyMCB0b2tlbiB3aXRoIEVSQzIyMyBFeHRlbnNpb25zCiAqLwpjb250cmFjdCBQaGFyYW1vcmUgaXMgRVJDMjAsIFNhZmVNYXRoIHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiUGhhcmFtb3JlIjsKCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJNT1JFIjsKCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSA4OwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5ID0gOTUwMDAwICogMTAqKjg7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgYm9vbCBwdWJsaWMgdW5sb2NrZWQgPSBmYWxzZTsKCiAgICBib29sIHB1YmxpYyB0b2tlbkNyZWF0ZWQgPSBmYWxzZTsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgoKICAgIC8vIENvbnN0cnVjdG9yIGlzIGNhbGxlZCBvbmx5IG9uY2UgYW5kIGNhbiBub3QgYmUgY2FsbGVkIGFnYWluIChFdGhlcmV1bSBTb2xpZGl0eSBzcGVjaWZpY2F0aW9uKQoJCiAgICBmdW5jdGlvbiBQaGFyYW1vcmUoKSBwdWJsaWMgewoKICAgICAgICAvLyBTZWN1cml0eSBjaGVjayBpbiBjYXNlIEVWTSBoYXMgZnV0dXJlIGZsYXcgb3IgZXhwbG9pdCB0byBjYWxsIGNvbnN0cnVjdG9yIG11bHRpcGxlIHRpbWVzCiAgICAgICAgLy8gRW5zdXJlIHRva2VuIGdldHMgY3JlYXRlZCBvbmNlIG9ubHkKICAgICAgICByZXF1aXJlKHRva2VuQ3JlYXRlZCA9PSBmYWxzZSk7CiAgICAgICAgdG9rZW5DcmVhdGVkID0gdHJ1ZTsKCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IHRvdGFsU3VwcGx5OwoKICAgICAgICAvLyBGaW5hbCBzYW5pdHkgY2hlY2sgdG8gZW5zdXJlIG93bmVyIGJhbGFuY2UgaXMgZ3JlYXRlciB0aGFuIHplcm8KICAgICAgICByZXF1aXJlKGJhbGFuY2VzW293bmVyXSA+IDApOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLy8gRnVuY3Rpb24gdG8gZGlzdHJpYnV0ZSB0b2tlbnMgdG8gbGlzdCBvZiBhZGRyZXNzZXMgYnkgdGhlIHByb3ZpZGVkIGFtb3VudAogICAgLy8gVmVyaWZ5IGFuZCByZXF1aXJlIHRoYXQ6CiAgICAvLyAtIEJhbGFuY2Ugb2Ygb3duZXIgY2Fubm90IGJlIG5lZ2F0aXZlCiAgICAvLyAtIEFsbCB0cmFuc2ZlcnMgY2FuIGJlIGZ1bGZpbGxlZCB3aXRoIHJlbWFpbmluZyBvd25lciBiYWxhbmNlCiAgICAvLyAtIE5vIG5ldyB0b2tlbnMgY2FuIGV2ZXIgYmUgbWludGVkIGV4Y2VwdCBvcmlnaW5hbGx5IGNyZWF0ZWQgMTAwLDAwMCwwMDAsMDAwCgkKICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGVBaXJkcm9wKGFkZHJlc3NbXSBhZGRyZXNzZXMsIHVpbnQyNTYgYW1vdW50KSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICAvLyBPbmx5IGFsbG93IHVuZHJvcCB3aGlsZSB0b2tlbiBpcyBsb2NrZWQKICAgICAgICAvLyBBZnRlciB0b2tlbiBpcyB1bmxvY2tlZCwgdGhpcyBtZXRob2QgYmVjb21lcyBwZXJtYW5lbnRseSBkaXNhYmxlZAogICAgICAgIHJlcXVpcmUoIXVubG9ja2VkKTsKCiAgICAgICAgdWludDI1NiBub3JtYWxpemVkQW1vdW50ID0gYW1vdW50ICogMTAqKjg7CgkJCiAgICAgICAgLy8gT25seSBwcm9jZWVkIGlmIHRoZXJlIGFyZSBlbm91Z2ggdG9rZW5zIHRvIGJlIGRpc3RyaWJ1dGVkIHRvIGFsbCBhZGRyZXNzZXMKICAgICAgICAvLyBOZXZlciBhbGxvdyBiYWxhbmNlIG9mIG93bmVyIHRvIGJlY29tZSBuZWdhdGl2ZQoJCQogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbb3duZXJdID49IHNhZmVNdWwoYWRkcmVzc2VzLmxlbmd0aCwgbm9ybWFsaXplZEFtb3VudCkpOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGFkZHJlc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBzYWZlU3ViKGJhbGFuY2VPZihvd25lciksIG5vcm1hbGl6ZWRBbW91bnQpOwogICAgICAgICAgICBiYWxhbmNlc1thZGRyZXNzZXNbaV1dID0gc2FmZUFkZChiYWxhbmNlT2YoYWRkcmVzc2VzW2ldKSwgbm9ybWFsaXplZEFtb3VudCk7CiAgICAgICAgICAgIFRyYW5zZmVyKG93bmVyLCBhZGRyZXNzZXNbaV0sIG5vcm1hbGl6ZWRBbW91bnQpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBGdW5jdGlvbiB0byBhY2Nlc3MgbmFtZSBvZiB0b2tlbiAuc2hhCiAgICBmdW5jdGlvbiBuYW1lKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHN0cmluZyBfbmFtZSkgewogICAgICAgIHJldHVybiBuYW1lOwogICAgfQogICAgLy8gRnVuY3Rpb24gdG8gYWNjZXNzIHN5bWJvbCBvZiB0b2tlbiAuCiAgICBmdW5jdGlvbiBzeW1ib2woKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAoc3RyaW5nIF9zeW1ib2wpIHsKICAgICAgICByZXR1cm4gc3ltYm9sOwogICAgfQogICAgLy8gRnVuY3Rpb24gdG8gYWNjZXNzIGRlY2ltYWxzIG9mIHRva2VuIC4KICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscykgewogICAgICAgIHJldHVybiBkZWNpbWFsczsKICAgIH0KICAgIC8vIEZ1bmN0aW9uIHRvIGFjY2VzcyB0b3RhbCBzdXBwbHkgb2YgdG9rZW5zIC4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KSB7CiAgICAgICAgcmV0dXJuIHRvdGFsU3VwcGx5OwogICAgfQoKICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSB1c2VyIG9yIGFub3RoZXIgY29udHJhY3Qgd2FudHMgdG8gdHJhbnNmZXIgZnVuZHMgLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSwgc3RyaW5nIF9jdXN0b21fZmFsbGJhY2spIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgLy8gT25seSBhbGxvdyB0cmFuc2ZlciBvbmNlIHVubG9ja2VkCiAgICAgICAgLy8gT25jZSBpdCBpcyB1bmxvY2tlZCwgaXQgaXMgdW5sb2NrZWQgZm9yZXZlciBhbmQgbm8gb25lIGNhbiBsb2NrIGFnYWluCiAgICAgICAgcmVxdWlyZSh1bmxvY2tlZCk7CgogICAgICAgIGlmIChpc0NvbnRyYWN0KF90bykpIHsKICAgICAgICAgICAgaWYgKGJhbGFuY2VPZihtc2cuc2VuZGVyKSA8IF92YWx1ZSkgewogICAgICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VPZihtc2cuc2VuZGVyKSwgX3ZhbHVlKTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZU9mKF90byksIF92YWx1ZSk7CiAgICAgICAgICAgIENvbnRyYWN0UmVjZWl2ZXIgcmVjZWl2ZXIgPSBDb250cmFjdFJlY2VpdmVyKF90byk7CiAgICAgICAgICAgIHJlY2VpdmVyLmNhbGwudmFsdWUoMCkoYnl0ZXM0KHNoYTMoX2N1c3RvbV9mYWxsYmFjaykpLCBtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9BZGRyZXNzKF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSB1c2VyIG9yIGFub3RoZXIgY29udHJhY3Qgd2FudHMgdG8gdHJhbnNmZXIgZnVuZHMgLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgLy8gT25seSBhbGxvdyB0cmFuc2ZlciBvbmNlIHVubG9ja2VkCiAgICAgICAgLy8gT25jZSBpdCBpcyB1bmxvY2tlZCwgaXQgaXMgdW5sb2NrZWQgZm9yZXZlciBhbmQgbm8gb25lIGNhbiBsb2NrIGFnYWluCiAgICAgICAgcmVxdWlyZSh1bmxvY2tlZCk7CgogICAgICAgIGlmIChpc0NvbnRyYWN0KF90bykpIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9Db250cmFjdChfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBTdGFuZGFyZCBmdW5jdGlvbiB0cmFuc2ZlciBzaW1pbGFyIHRvIEVSQzIwIHRyYW5zZmVyIHdpdGggbm8gX2RhdGEgLgogICAgLy8gQWRkZWQgZHVlIHRvIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHJlYXNvbnMgLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIC8vIE9ubHkgYWxsb3cgdHJhbnNmZXIgb25jZSB1bmxvY2tlZAogICAgICAgIC8vIE9uY2UgaXQgaXMgdW5sb2NrZWQsIGl0IGlzIHVubG9ja2VkIGZvcmV2ZXIgYW5kIG5vIG9uZSBjYW4gbG9jayBhZ2FpbgogICAgICAgIHJlcXVpcmUodW5sb2NrZWQpOwoKICAgICAgICAvL3N0YW5kYXJkIGZ1bmN0aW9uIHRyYW5zZmVyIHNpbWlsYXIgdG8gRVJDMjAgdHJhbnNmZXIgd2l0aCBubyBfZGF0YQogICAgICAgIC8vYWRkZWQgZHVlIHRvIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHJlYXNvbnMKICAgICAgICBieXRlcyBtZW1vcnkgZW1wdHk7CiAgICAgICAgaWYgKGlzQ29udHJhY3QoX3RvKSkgewogICAgICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0NvbnRyYWN0KF90bywgX3ZhbHVlLCBlbXB0eSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9BZGRyZXNzKF90bywgX3ZhbHVlLCBlbXB0eSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIGFzc2VtYmxlIHRoZSBnaXZlbiBhZGRyZXNzIGJ5dGVjb2RlLiBJZiBieXRlY29kZSBleGlzdHMgdGhlbiB0aGUgX2FkZHIgaXMgYSBjb250cmFjdC4KICAgIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgcHJpdmF0ZSByZXR1cm5zIChib29sIGlzX2NvbnRyYWN0KSB7CiAgICAgICAgdWludCBsZW5ndGg7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICAvL3JldHJpZXZlIHRoZSBzaXplIG9mIHRoZSBjb2RlIG9uIHRhcmdldCBhZGRyZXNzLCB0aGlzIG5lZWRzIGFzc2VtYmx5CiAgICAgICAgICAgIGxlbmd0aCA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChsZW5ndGggPiAwKTsKICAgIH0KCiAgICAvLyBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhbiBhZGRyZXNzCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvQWRkcmVzcyhhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwcml2YXRlIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlT2YobXNnLnNlbmRlcikgPCBfdmFsdWUpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlT2YobXNnLnNlbmRlciksIF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZU9mKF90byksIF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhIGNvbnRyYWN0CiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvQ29udHJhY3QoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHJpdmF0ZSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZU9mKG1zZy5zZW5kZXIpIDwgX3ZhbHVlKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZU9mKG1zZy5zZW5kZXIpLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZihfdG8pLCBfdmFsdWUpOwogICAgICAgIENvbnRyYWN0UmVjZWl2ZXIgcmVjZWl2ZXIgPSBDb250cmFjdFJlY2VpdmVyKF90byk7CiAgICAgICAgcmVjZWl2ZXIudG9rZW5GYWxsYmFjayhtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEdldCBiYWxhbmNlIG9mIHRoZSBhZGRyZXNzIHByb3ZpZGVkCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAgLy8gQ3JlYXRvci9Pd25lciBjYW4gdW5sb2NrZWQgaXQgb25jZSBhbmQgaXQgY2FuIG5ldmVyIGJlIGxvY2tlZCBhZ2FpbgogICAgIC8vIFVzZSBhZnRlciBhaXJkcm9wIGlzIGNvbXBsZXRlCiAgICBmdW5jdGlvbiB1bmxvY2tGb3JldmVyKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgdW5sb2NrZWQgPSB0cnVlOwogICAgfQoKICAgIC8vIEFsbG93IHRyYW5zZmVycyBpZiB0aGUgb3duZXIgcHJvdmlkZWQgYW4gYWxsb3dhbmNlCiAgICAvLyBQcmV2ZW50IGZyb20gYW55IHRyYW5zZmVycyBpZiB0b2tlbiBpcyBub3QgeWV0IHVubG9ja2VkCiAgICAvLyBVc2UgU2FmZU1hdGggZm9yIHRoZSBtYWluIGxvZ2ljCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy8gT25seSBhbGxvdyB0cmFuc2ZlciBvbmNlIHVubG9ja2VkCiAgICAgICAgLy8gT25jZSBpdCBpcyB1bmxvY2tlZCwgaXQgaXMgdW5sb2NrZWQgZm9yZXZlciBhbmQgbm8gb25lIGNhbiBsb2NrIGFnYWluCiAgICAgICAgcmVxdWlyZSh1bmxvY2tlZCk7CiAgICAgICAgLy8gUHJvdGVjdCBhZ2FpbnN0IHdyYXBwaW5nIHVpbnRzLgogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pOwogICAgICAgIHVpbnQyNTYgYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93YW5jZSA+PSBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZihfdG8pLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZU9mKF9mcm9tKSwgX3ZhbHVlKTsKICAgICAgICBpZiAoYWxsb3dhbmNlIDwgTUFYX1VJTlQyNTYpIHsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgICAgIH0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvLyBPbmx5IGFsbG93IHRyYW5zZmVyIG9uY2UgdW5sb2NrZWQKICAgICAgICAvLyBPbmNlIGl0IGlzIHVubG9ja2VkLCBpdCBpcyB1bmxvY2tlZCBmb3JldmVyIGFuZCBubyBvbmUgY2FuIGxvY2sgYWdhaW4KICAgICAgICByZXF1aXJlKHVubG9ja2VkKTsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KfQ=='.
	

]
