Class {
	#name : #SRT96d0b9AA47356Dc088B50D4e4ce72af31C8ae9B5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT96d0b9AA47356Dc088B50D4e4ce72af31C8ae9B5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICAvKioKICAgICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAgICogYWNjb3VudC4KICAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgfQogICAgfQp9Cgpjb250cmFjdCB0b2tlblJlY2lwaWVudCB7IGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9leHRyYURhdGEpOyB9Cgpjb250cmFjdCBMb2dnZWRFUkMyMCBpcyBPd25hYmxlIHsKICAgIC8qIFN0cnVjdHVyZXMgKi8KICAgIHN0cnVjdCBMb2dWYWx1ZUJsb2NrIHsKICAgIHVpbnQyNTYgdmFsdWU7CiAgICB1aW50MjU2IGJsb2NrOwogICAgfQoKICAgIC8qIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovCiAgICBzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gJ0xvZ1ZhbHVlQmxvY2tUb2tlbiAwLjEnOwogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7CiAgICBMb2dWYWx1ZUJsb2NrW10gcHVibGljIGxvZ2dlZFRvdGFsU3VwcGx5OwoKICAgIGJvb2wgcHVibGljIGxvY2tlZDsKCiAgICB1aW50MjU2IHB1YmxpYyBjcmVhdGlvbkJsb2NrOwoKICAgIC8qIFRoaXMgY3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBiYWxhbmNlcyAqLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBMb2dWYWx1ZUJsb2NrW10pIHB1YmxpYyBsb2dnZWRCYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93YW5jZTsKCiAgICAvKiBUaGlzIGdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMgKi8KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGZyb3plbkFjY291bnQ7CgogICAgLyogVGhpcyBnZW5lcmF0ZXMgYSBwdWJsaWMgZXZlbnQgb24gdGhlIGJsb2NrY2hhaW4gdGhhdCB3aWxsIG5vdGlmeSBjbGllbnRzICovCiAgICBldmVudCBGcm96ZW5GdW5kcyhhZGRyZXNzIHRhcmdldCwgYm9vbCBmcm96ZW4pOwoKICAgIC8qIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdCAqLwogICAgZnVuY3Rpb24gTG9nZ2VkRVJDMjAoCiAgICB1aW50MjU2IGluaXRpYWxTdXBwbHksCiAgICBzdHJpbmcgdG9rZW5OYW1lLAogICAgdWludDggZGVjaW1hbFVuaXRzLAogICAgc3RyaW5nIHRva2VuU3ltYm9sLAogICAgYm9vbCB0cmFuc2ZlckFsbFN1cHBseVRvT3duZXIsCiAgICBib29sIF9sb2NrZWQKICAgICkgewogICAgICAgIExvZ1ZhbHVlQmxvY2sgbWVtb3J5IHZhbHVlQmxvY2sgPSBMb2dWYWx1ZUJsb2NrKGluaXRpYWxTdXBwbHksIGJsb2NrLm51bWJlcik7CgogICAgICAgIGxvZ2dlZFRvdGFsU3VwcGx5LnB1c2godmFsdWVCbG9jayk7CgogICAgICAgIGlmKHRyYW5zZmVyQWxsU3VwcGx5VG9Pd25lcikgewogICAgICAgICAgICBsb2dnZWRCYWxhbmNlc1ttc2cuc2VuZGVyXS5wdXNoKHZhbHVlQmxvY2spOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgbG9nZ2VkQmFsYW5jZXNbdGhpc10ucHVzaCh2YWx1ZUJsb2NrKTsKICAgICAgICB9CgogICAgICAgIG5hbWUgPSB0b2tlbk5hbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIG5hbWUgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgICAgICBzeW1ib2wgPSB0b2tlblN5bWJvbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBzeW1ib2wgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgICAgICBkZWNpbWFscyA9IGRlY2ltYWxVbml0czsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW1vdW50IG9mIGRlY2ltYWxzIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgbG9ja2VkID0gX2xvY2tlZDsKICAgIH0KCiAgICBmdW5jdGlvbiB2YWx1ZUF0KExvZ1ZhbHVlQmxvY2sgW10gc3RvcmFnZSB2YWx1ZUJsb2NrcywgdWludDI1NiBibG9jaykgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmKHZhbHVlQmxvY2tzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KCiAgICAgICAgTG9nVmFsdWVCbG9jayBtZW1vcnkgcHJldkxvZ1ZhbHVlQmxvY2s7CgogICAgICAgIGZvcih1aW50MjU2IGkgPSAwOyBpIDwgdmFsdWVCbG9ja3MubGVuZ3RoOyBpKyspIHsKCiAgICAgICAgICAgIExvZ1ZhbHVlQmxvY2sgbWVtb3J5IHZhbHVlQmxvY2sgPSB2YWx1ZUJsb2Nrc1tpXTsKCiAgICAgICAgICAgIGlmKHZhbHVlQmxvY2suYmxvY2sgPiBibG9jaykgewogICAgICAgICAgICAgICAgcmV0dXJuIHByZXZMb2dWYWx1ZUJsb2NrLnZhbHVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBwcmV2TG9nVmFsdWVCbG9jayA9IHZhbHVlQmxvY2s7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcHJldkxvZ1ZhbHVlQmxvY2sudmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0QmFsYW5jZShhZGRyZXNzIF9hZGRyZXNzLCB1aW50MjU2IHZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgbG9nZ2VkQmFsYW5jZXNbX2FkZHJlc3NdLnB1c2goTG9nVmFsdWVCbG9jayh2YWx1ZSwgYmxvY2subnVtYmVyKSk7CiAgICB9CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHZhbHVlQXQobG9nZ2VkVG90YWxTdXBwbHksIGJsb2NrLm51bWJlcik7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX2FkZHJlc3MpIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gdmFsdWVBdChsb2dnZWRCYWxhbmNlc1tfYWRkcmVzc10sIGJsb2NrLm51bWJlcik7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJJbnRlcm5hbChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdWludDI1NiBiYWxhbmNlRnJvbSA9IHZhbHVlQXQobG9nZ2VkQmFsYW5jZXNbbXNnLnNlbmRlcl0sIGJsb2NrLm51bWJlcik7CiAgICAgICAgdWludDI1NiBiYWxhbmNlVG8gPSB2YWx1ZUF0KGxvZ2dlZEJhbGFuY2VzW190b10sIGJsb2NrLm51bWJlcik7CgogICAgICAgIGlmKHZhbHVlID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYoZnJvemVuQWNjb3VudFtfZnJvbV0gPT0gdHJ1ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZihiYWxhbmNlRnJvbSA8IHZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmKGJhbGFuY2VUbyArIHZhbHVlIDw9IGJhbGFuY2VUbykgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBsb2dnZWRCYWxhbmNlc1tfZnJvbV0ucHVzaChMb2dWYWx1ZUJsb2NrKGJhbGFuY2VGcm9tIC0gdmFsdWUsIGJsb2NrLm51bWJlcikpOwogICAgICAgIGxvZ2dlZEJhbGFuY2VzW190b10ucHVzaChMb2dWYWx1ZUJsb2NrKGJhbGFuY2VUbyArIHZhbHVlLCBibG9jay5udW1iZXIpKTsKCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKiBTZW5kIGNvaW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHsKICAgICAgICByZXF1aXJlKGxvY2tlZCA9PSBmYWxzZSk7CgogICAgICAgIGJvb2wgc3RhdHVzID0gdHJhbnNmZXJJbnRlcm5hbChtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CgogICAgICAgIHJlcXVpcmUoc3RhdHVzID09IHRydWUpOwogICAgfQoKICAgIC8qIEFsbG93IGFub3RoZXIgY29udHJhY3QgdG8gc3BlbmQgc29tZSB0b2tlbnMgaW4geW91ciBiZWhhbGYgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmKGxvY2tlZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qIEFwcHJvdmUgYW5kIHRoZW4gY29tbXVuaWNhdGUgdGhlIGFwcHJvdmVkIGNvbnRyYWN0IGluIGEgc2luZ2xlIHR4ICovCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYobG9ja2VkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHRva2VuUmVjaXBpZW50IHNwZW5kZXIgPSB0b2tlblJlY2lwaWVudChfc3BlbmRlcik7CiAgICAgICAgaWYgKGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSkpIHsKICAgICAgICAgICAgc3BlbmRlci5yZWNlaXZlQXBwcm92YWwobXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIC8qIEEgY29udHJhY3QgYXR0ZW1wdHMgdG8gZ2V0IHRoZSBjb2lucyAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYobG9ja2VkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGJvb2wgX3N1Y2Nlc3MgPSB0cmFuc2ZlckludGVybmFsKF9mcm9tLCBfdG8sIF92YWx1ZSk7CgogICAgICAgIGlmKF9zdWNjZXNzKSB7CiAgICAgICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIF9zdWNjZXNzOwogICAgfQp9Cgpjb250cmFjdCBMb2dnZWREaXZpZGVuZCBpcyBPd25hYmxlLCBMb2dnZWRFUkMyMCB7CiAgICAvKiBTdHJ1Y3RzICovCiAgICBzdHJ1Y3QgRGl2aWRlbmQgewogICAgdWludDI1NiBpZDsKCiAgICB1aW50MjU2IGJsb2NrOwogICAgdWludDI1NiB0aW1lOwogICAgdWludDI1NiBhbW91bnQ7CgogICAgdWludDI1NiBjbGFpbWVkQW1vdW50OwogICAgdWludDI1NiB0cmFuc2ZlcmVkQmFjazsKCiAgICB1aW50MjU2IHRvdGFsU3VwcGx5OwogICAgdWludDI1NiByZWN5Y2xlVGltZTsKCiAgICBib29sIHJlY3ljbGVkOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgY2xhaW1lZDsKICAgIH0KCiAgICAvKiB2YXJpYWJsZXMgKi8KICAgIERpdmlkZW5kIFtdIHB1YmxpYyBkaXZpZGVuZHM7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBkaXZpZGVuZHNDbGFpbWVkOwoKICAgIC8qIEV2ZW50cyAqLwogICAgZXZlbnQgRGl2aWRlbmRUcmFuc2ZlcmVkKHVpbnQyNTYgaWQsIGFkZHJlc3MgaW5kZXhlZCBfYWRkcmVzcywgdWludDI1NiBfYmxvY2ssIHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBfdG90YWxTdXBwbHkpOwogICAgZXZlbnQgRGl2aWRlbmRDbGFpbWVkKHVpbnQyNTYgaWQsIGFkZHJlc3MgaW5kZXhlZCBfYWRkcmVzcywgdWludDI1NiBfY2xhaW0pOwogICAgZXZlbnQgVW5jbGFpbWVkRGl2aWRlbmRUcmFuc2Zlcih1aW50MjU2IGlkLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBEaXZpZGVuZFJlY3ljbGVkKHVpbnQyNTYgaWQsIGFkZHJlc3MgaW5kZXhlZCBfcmVjeWNsZXIsIHVpbnQyNTYgX2Jsb2NrTnVtYmVyLCB1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgX3RvdGFsU3VwcGx5KTsKCiAgICBmdW5jdGlvbiBMb2dnZWREaXZpZGVuZCgKICAgIHVpbnQyNTYgaW5pdGlhbFN1cHBseSwKICAgIHN0cmluZyB0b2tlbk5hbWUsCiAgICB1aW50OCBkZWNpbWFsVW5pdHMsCiAgICBzdHJpbmcgdG9rZW5TeW1ib2wsCiAgICBib29sIHRyYW5zZmVyQWxsU3VwcGx5VG9Pd25lciwKICAgIGJvb2wgX2xvY2tlZAogICAgKSBMb2dnZWRFUkMyMChpbml0aWFsU3VwcGx5LCB0b2tlbk5hbWUsIGRlY2ltYWxVbml0cywgdG9rZW5TeW1ib2wsIHRyYW5zZmVyQWxsU3VwcGx5VG9Pd25lciwgX2xvY2tlZCkgewoKICAgIH0KCiAgICBmdW5jdGlvbiBhZGREaXZpZGVuZCh1aW50MjU2IHJlY3ljbGVUaW1lKSBwYXlhYmxlIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKCiAgICAgICAgdWludDI1NiBpZCA9IGRpdmlkZW5kcy5sZW5ndGg7CiAgICAgICAgdWludDI1NiBfdG90YWxTdXBwbHkgPSB2YWx1ZUF0KGxvZ2dlZFRvdGFsU3VwcGx5LCBibG9jay5udW1iZXIpOwoKICAgICAgICBkaXZpZGVuZHMucHVzaCgKICAgICAgICBEaXZpZGVuZCgKICAgICAgICBpZCwKICAgICAgICBibG9jay5udW1iZXIsCiAgICAgICAgbm93LAogICAgICAgIG1zZy52YWx1ZSwKICAgICAgICAwLAogICAgICAgIDAsCiAgICAgICAgX3RvdGFsU3VwcGx5LAogICAgICAgIHJlY3ljbGVUaW1lLAogICAgICAgIGZhbHNlCiAgICAgICAgKQogICAgICAgICk7CgogICAgICAgIERpdmlkZW5kVHJhbnNmZXJlZChpZCwgbXNnLnNlbmRlciwgYmxvY2subnVtYmVyLCBtc2cudmFsdWUsIF90b3RhbFN1cHBseSk7CiAgICB9CgogICAgZnVuY3Rpb24gY2xhaW1EaXZpZGVuZCh1aW50MjU2IGRpdmlkZW5kSWQpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYoZGl2aWRlbmRzLmxlbmd0aCAtIDEgPCBkaXZpZGVuZElkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIERpdmlkZW5kIHN0b3JhZ2UgZGl2aWRlbmQgPSBkaXZpZGVuZHNbZGl2aWRlbmRJZF07CgogICAgICAgIGlmKGRpdmlkZW5kLmNsYWltZWRbbXNnLnNlbmRlcl0gPT0gdHJ1ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZihkaXZpZGVuZC5yZWN5Y2xlZCA9PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmKG5vdyA+PSBkaXZpZGVuZC50aW1lICsgZGl2aWRlbmQucmVjeWNsZVRpbWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdWludDI1NiBiYWxhbmNlID0gdmFsdWVBdChsb2dnZWRCYWxhbmNlc1ttc2cuc2VuZGVyXSwgZGl2aWRlbmQuYmxvY2spOwoKICAgICAgICBpZihiYWxhbmNlID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdWludDI1NiBjbGFpbSA9IGJhbGFuY2UgKiBkaXZpZGVuZC5hbW91bnQgLyBkaXZpZGVuZC50b3RhbFN1cHBseTsKCiAgICAgICAgZGl2aWRlbmQuY2xhaW1lZFttc2cuc2VuZGVyXSA9IHRydWU7CgogICAgICAgIGRpdmlkZW5kLmNsYWltZWRBbW91bnQgPSBkaXZpZGVuZC5jbGFpbWVkQW1vdW50ICsgY2xhaW07CgogICAgICAgIGlmIChjbGFpbSA+IDApIHsKICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihjbGFpbSk7CiAgICAgICAgICAgIERpdmlkZW5kQ2xhaW1lZChkaXZpZGVuZElkLCBtc2cuc2VuZGVyLCBjbGFpbSk7CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbGFpbURpdmlkZW5kcygpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShkaXZpZGVuZHNDbGFpbWVkW21zZy5zZW5kZXJdIDwgZGl2aWRlbmRzLmxlbmd0aCk7CiAgICAgICAgZm9yICh1aW50IGkgPSBkaXZpZGVuZHNDbGFpbWVkW21zZy5zZW5kZXJdOyBpIDwgZGl2aWRlbmRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICgoZGl2aWRlbmRzW2ldLmNsYWltZWRbbXNnLnNlbmRlcl0gPT0gZmFsc2UpICYmIChkaXZpZGVuZHNbaV0ucmVjeWNsZWQgPT0gZmFsc2UpKSB7CiAgICAgICAgICAgICAgICBkaXZpZGVuZHNDbGFpbWVkW21zZy5zZW5kZXJdID0gaSArIDE7CiAgICAgICAgICAgICAgICBjbGFpbURpdmlkZW5kKGkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlY3ljbGVEaXZpZGVuZCh1aW50MjU2IGRpdmlkZW5kSWQpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYoZGl2aWRlbmRzLmxlbmd0aCAtIDEgPCBkaXZpZGVuZElkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIERpdmlkZW5kIHN0b3JhZ2UgZGl2aWRlbmQgPSBkaXZpZGVuZHNbZGl2aWRlbmRJZF07CgogICAgICAgIGlmKGRpdmlkZW5kLnJlY3ljbGVkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGRpdmlkZW5kLnJlY3ljbGVkID0gdHJ1ZTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kVW5jbGFpbWVkRXRoZXJzKHVpbnQyNTYgZGl2aWRlbmRJZCkgcHVibGljIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZihkaXZpZGVuZHMubGVuZ3RoIC0gMSA8IGRpdmlkZW5kSWQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgRGl2aWRlbmQgc3RvcmFnZSBkaXZpZGVuZCA9IGRpdmlkZW5kc1tkaXZpZGVuZElkXTsKCiAgICAgICAgaWYoZGl2aWRlbmQucmVjeWNsZWQgPT0gZmFsc2UpIHsKICAgICAgICAgICAgaWYobm93IDwgZGl2aWRlbmQudGltZSArIGRpdmlkZW5kLnJlY3ljbGVUaW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHVpbnQyNTYgY2xhaW1lZEJhY2tBbW91bnQgPSBkaXZpZGVuZC5hbW91bnQgLSBkaXZpZGVuZC5jbGFpbWVkQW1vdW50OwoKICAgICAgICBkaXZpZGVuZC50cmFuc2ZlcmVkQmFjayA9IGNsYWltZWRCYWNrQW1vdW50OwoKICAgICAgICBpZihjbGFpbWVkQmFja0Ftb3VudCA+IDApIHsKICAgICAgICAgICAgb3duZXIudHJhbnNmZXIoY2xhaW1lZEJhY2tBbW91bnQpOwoKICAgICAgICAgICAgVW5jbGFpbWVkRGl2aWRlbmRUcmFuc2ZlcihkaXZpZGVuZElkLCBjbGFpbWVkQmFja0Ftb3VudCk7CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KfQoKY29udHJhY3QgTG9nZ2VkUGhhc2VJQ08gaXMgTG9nZ2VkRGl2aWRlbmQgewogICAgdWludDI1NiBwdWJsaWMgaWNvU2luY2U7CiAgICB1aW50MjU2IHB1YmxpYyBpY29UaWxsOwoKICAgIHVpbnQyNTYgcHVibGljIGNvbGxlY3RlZEV0aGVyczsKCiAgICBQaGFzZVtdIHB1YmxpYyBwaGFzZXM7CgogICAgc3RydWN0IFBoYXNlIHsKICAgIHVpbnQyNTYgcHJpY2U7CiAgICB1aW50MjU2IG1heEFtb3VudDsKICAgIH0KCiAgICBmdW5jdGlvbiBMb2dnZWRQaGFzZUlDTygKICAgIHVpbnQyNTYgX2ljb1NpbmNlLAogICAgdWludDI1NiBfaWNvVGlsbCwKICAgIHVpbnQyNTYgaW5pdGlhbFN1cHBseSwKICAgIHN0cmluZyB0b2tlbk5hbWUsCiAgICBzdHJpbmcgdG9rZW5TeW1ib2wsCiAgICB1aW50OCBwcmVjaXNpb24sCiAgICBib29sIHRyYW5zZmVyQWxsU3VwcGx5VG9Pd25lciwKICAgIGJvb2wgX2xvY2tlZAogICAgKSBMb2dnZWREaXZpZGVuZChpbml0aWFsU3VwcGx5LCB0b2tlbk5hbWUsIHByZWNpc2lvbiwgdG9rZW5TeW1ib2wsIHRyYW5zZmVyQWxsU3VwcGx5VG9Pd25lciwgX2xvY2tlZCkgewogICAgICAgIHN0YW5kYXJkID0gJ0xvZ2dlZFBoYXNlSUNPIDAuMSc7CgogICAgICAgIGljb1NpbmNlID0gX2ljb1NpbmNlOwogICAgICAgIGljb1RpbGwgPSBfaWNvVGlsbDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRJY29Ub2tlbnNBbW91bnQodWludDI1NiBjb2xsZWN0ZWRFdGhlcnMsIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGFtb3VudDsKCiAgICAgICAgdWludDI1NiBuZXdDb2xsZWN0ZWRFdGhlcnMgPSBjb2xsZWN0ZWRFdGhlcnM7CiAgICAgICAgdWludDI1NiByZW1haW5pbmdWYWx1ZSA9IHZhbHVlOwoKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBwaGFzZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgUGhhc2Ugc3RvcmFnZSBwaGFzZSA9IHBoYXNlc1tpXTsKCiAgICAgICAgICAgIGlmKHBoYXNlLm1heEFtb3VudCA+IG5ld0NvbGxlY3RlZEV0aGVycykgewogICAgICAgICAgICAgICAgaWYgKG5ld0NvbGxlY3RlZEV0aGVycyArIHJlbWFpbmluZ1ZhbHVlID4gcGhhc2UubWF4QW1vdW50KSB7CiAgICAgICAgICAgICAgICAgICAgdWludDI1NiBkaWZmID0gcGhhc2UubWF4QW1vdW50IC0gbmV3Q29sbGVjdGVkRXRoZXJzOwoKICAgICAgICAgICAgICAgICAgICBhbW91bnQgKz0gZGlmZiAqIDEgZXRoZXIgLyBwaGFzZS5wcmljZTsKCiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nVmFsdWUgLT0gZGlmZjsKICAgICAgICAgICAgICAgICAgICBuZXdDb2xsZWN0ZWRFdGhlcnMgKz0gZGlmZjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGFtb3VudCArPSByZW1haW5pbmdWYWx1ZSAqIDEgZXRoZXIgLyBwaGFzZS5wcmljZTsKCiAgICAgICAgICAgICAgICAgICAgbmV3Q29sbGVjdGVkRXRoZXJzICs9IHJlbWFpbmluZ1ZhbHVlOwoKICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdWYWx1ZSA9IDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChyZW1haW5pbmdWYWx1ZSA9PSAwKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHJlbWFpbmluZ1ZhbHVlID4gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBhbW91bnQ7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgdGltZSwgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChsb2NrZWQgPT0gdHJ1ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAodGltZSA8IGljb1NpbmNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmICh0aW1lID4gaWNvVGlsbCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAodmFsdWUgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB1aW50MjU2IGFtb3VudCA9IGdldEljb1Rva2Vuc0Ftb3VudChjb2xsZWN0ZWRFdGhlcnMsIHZhbHVlKTsKCiAgICAgICAgaWYoYW1vdW50ID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdWludDI1NiBzZWxmQmFsYW5jZSA9IHZhbHVlQXQobG9nZ2VkQmFsYW5jZXNbdGhpc10sIGJsb2NrLm51bWJlcik7CiAgICAgICAgdWludDI1NiBob2xkZXJCYWxhbmNlID0gdmFsdWVBdChsb2dnZWRCYWxhbmNlc1tfYWRkcmVzc10sIGJsb2NrLm51bWJlcik7CgogICAgICAgIGlmIChzZWxmQmFsYW5jZSA8IGFtb3VudCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAoaG9sZGVyQmFsYW5jZSArIGFtb3VudCA8IGhvbGRlckJhbGFuY2UpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgc2V0QmFsYW5jZShfYWRkcmVzcywgaG9sZGVyQmFsYW5jZSArIGFtb3VudCk7CiAgICAgICAgc2V0QmFsYW5jZSh0aGlzLCBzZWxmQmFsYW5jZSAtIGFtb3VudCk7CgogICAgICAgIGNvbGxlY3RlZEV0aGVycyArPSB2YWx1ZTsKCiAgICAgICAgVHJhbnNmZXIodGhpcywgX2FkZHJlc3MsIGFtb3VudCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgIGJvb2wgc3RhdHVzID0gYnV5KG1zZy5zZW5kZXIsIG5vdywgbXNnLnZhbHVlKTsKCiAgICAgICAgcmVxdWlyZShzdGF0dXMgPT0gdHJ1ZSk7CiAgICB9Cn0KCmNvbnRyYWN0IENhanV0ZWwgaXMgTG9nZ2VkUGhhc2VJQ08gewogICAgZnVuY3Rpb24gQ2FqdXRlbCgKICAgIHVpbnQyNTYgaW5pdGlhbFN1cHBseSwKICAgIHN0cmluZyB0b2tlbk5hbWUsCiAgICBzdHJpbmcgdG9rZW5TeW1ib2wsCiAgICBhZGRyZXNzIGZvdW5kZXIxLAogICAgYWRkcmVzcyBmb3VuZGVyMiwKICAgIGFkZHJlc3MgbWFya2V0aW5nLAogICAgdWludDI1NiBpY29TaW5jZSwKICAgIHVpbnQyNTYgaWNvVGlsbAogICAgKSBMb2dnZWRQaGFzZUlDTyhpY29TaW5jZSwgaWNvVGlsbCwgaW5pdGlhbFN1cHBseSwgdG9rZW5OYW1lLCB0b2tlblN5bWJvbCwgMTgsIGZhbHNlLCBmYWxzZSkgewogICAgICAgIHN0YW5kYXJkID0gJ0NhanV0ZWwgMC4xJzsKCiAgICAgICAgcGhhc2VzLnB1c2goUGhhc2UoMC4wNSBldGhlciwgNTAwIGV0aGVyKSk7CiAgICAgICAgcGhhc2VzLnB1c2goUGhhc2UoMC4wNzUgZXRoZXIsIDc1MCBldGhlciArIDUwMCBldGhlcikpOwogICAgICAgIHBoYXNlcy5wdXNoKFBoYXNlKDAuMSBldGhlciwgMTAwMDAgZXRoZXIgKyA3NTAgZXRoZXIgKyA1MDAgZXRoZXIpKTsKICAgICAgICBwaGFzZXMucHVzaChQaGFzZSgwLjE1IGV0aGVyLCAzMDAwMCBldGhlciArIDEwMDAwIGV0aGVyICsgNzUwIGV0aGVyICsgNTAwIGV0aGVyKSk7CiAgICAgICAgcGhhc2VzLnB1c2goUGhhc2UoMC4yIGV0aGVyLCA4MDAwMCBldGhlciArIDMwMDAwIGV0aGVyICsgMTAwMDAgZXRoZXIgKyA3NTAgZXRoZXIgKyA1MDAgZXRoZXIpKTsKCiAgICAgICAgdWludDI1NiBmb3VuZGVyMVRva2VucyA9IDkwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgICAgICB1aW50MjU2IGZvdW5kZXIyVG9rZW5zID0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgICAgIHVpbnQyNTYgbWFya2V0aW5nVG9rZW5zID0gNjAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CgogICAgICAgIHNldEJhbGFuY2UoZm91bmRlcjEsIGZvdW5kZXIxVG9rZW5zKTsKCiAgICAgICAgVHJhbnNmZXIodGhpcywgZm91bmRlcjEsIGZvdW5kZXIxVG9rZW5zKTsKCiAgICAgICAgc2V0QmFsYW5jZShmb3VuZGVyMiwgZm91bmRlcjJUb2tlbnMpOwoKICAgICAgICBUcmFuc2Zlcih0aGlzLCBmb3VuZGVyMiwgZm91bmRlcjJUb2tlbnMpOwoKICAgICAgICBzZXRCYWxhbmNlKG1hcmtldGluZywgbWFya2V0aW5nVG9rZW5zKTsKCiAgICAgICAgVHJhbnNmZXIodGhpcywgbWFya2V0aW5nLCBtYXJrZXRpbmdUb2tlbnMpOwoKICAgICAgICBzZXRCYWxhbmNlKHRoaXMsIGluaXRpYWxTdXBwbHkgLSBmb3VuZGVyMVRva2VucyAtIGZvdW5kZXIyVG9rZW5zIC0gbWFya2V0aW5nVG9rZW5zKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckV0aGVycygpIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRMb2NrZWQoYm9vbCBfbG9ja2VkKSBvbmx5T3duZXIgewogICAgICAgIGxvY2tlZCA9IF9sb2NrZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0SWNvRGF0ZXModWludDI1NiBfaWNvU2luY2UsIHVpbnQyNTYgX2ljb1RpbGwpIG9ubHlPd25lciB7CiAgICAgICAgaWNvU2luY2UgPSBfaWNvU2luY2U7CiAgICAgICAgaWNvVGlsbCA9IF9pY29UaWxsOwogICAgfQp9'.
	

]
