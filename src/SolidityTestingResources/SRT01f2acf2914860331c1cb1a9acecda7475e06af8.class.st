Class {
	#name : #SRT01f2acf2914860331c1cb1a9acecda7475e06af8,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT01f2acf2914860331c1cb1a9acecda7475e06af8 >> base64 [
	^ 'Ly8gQWJzdHJhY3QgY29udHJhY3QgZm9yIHRoZSBmdWxsIEVSQyAyMCBUb2tlbiBzdGFuZGFyZAovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBUb2tlbiB7CiAgICAvKiBUaGlzIGlzIGEgc2xpZ2h0IGNoYW5nZSB0byB0aGUgRVJDMjAgYmFzZSBzdGFuZGFyZC4qLwogICAgLy8vIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBPd25lZCB7CgogICAgLy8vIGBvd25lcmAgaXMgdGhlIG9ubHkgYWRkcmVzcyB0aGF0IGNhbiBjYWxsIGEgZnVuY3Rpb24gd2l0aCB0aGlzCiAgICAvLy8gbW9kaWZpZXIKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgLy8vIEBub3RpY2UgVGhlIENvbnN0cnVjdG9yIGFzc2lnbnMgdGhlIG1lc3NhZ2Ugc2VuZGVyIHRvIGJlIGBvd25lcmAKICAgIGZ1bmN0aW9uIE93bmVkKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgYWRkcmVzcyBuZXdPd25lcj0weDA7CgogICAgZXZlbnQgT3duZXJVcGRhdGUoYWRkcmVzcyBfcHJldk93bmVyLCBhZGRyZXNzIF9uZXdPd25lcik7CgogICAgLy8vY2hhbmdlIHRoZSBvd25lcgogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX25ld093bmVyICE9IG93bmVyKTsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KCiAgICAvLy8gYWNjZXB0IHRoZSBvd25lcnNoaXAKICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHB1YmxpY3sKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpOwogICAgICAgIE93bmVyVXBkYXRlKG93bmVyLCBuZXdPd25lcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICBuZXdPd25lciA9IDB4MDsKICAgIH0KfQoKY29udHJhY3QgQ29udHJvbGxlZCBpcyBPd25lZHsKCiAgICBmdW5jdGlvbiBDb250cm9sbGVkKCkgcHVibGljIHsKICAgICAgIHNldEV4Y2x1ZGUobXNnLnNlbmRlcik7CiAgICB9CgogICAgLy8gRmxhZyB0aGF0IGRldGVybWluZXMgaWYgdGhlIHRva2VuIGlzIHRyYW5zZmVyYWJsZSBvciBub3QuCiAgICBib29sIHB1YmxpYyB0cmFuc2ZlckVuYWJsZWQgPSBmYWxzZTsKCiAgICAvLyBmbGFnIHRoYXQgbWFrZXMgbG9ja2VkIGFkZHJlc3MgZWZmZWN0CiAgICBib29sIGxvY2tGbGFnPXRydWU7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgbG9ja2VkOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIGV4Y2x1ZGU7CgogICAgZnVuY3Rpb24gZW5hYmxlVHJhbnNmZXIoYm9vbCBfZW5hYmxlKSBwdWJsaWMgb25seU93bmVyewogICAgICAgIHRyYW5zZmVyRW5hYmxlZD1fZW5hYmxlOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpc2FibGVMb2NrKGJvb2wgX2VuYWJsZSkgcHVibGljIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpewogICAgICAgIGxvY2tGbGFnPV9lbmFibGU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkTG9jayhhZGRyZXNzW10gX2FkZHJzKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX2FkZHJzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgbG9ja2VkW19hZGRyc1tpXV09dHJ1ZTsKICAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEV4Y2x1ZGUoYWRkcmVzcyBfYWRkcikgcHVibGljIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpewogICAgICAgIGV4Y2x1ZGVbX2FkZHJdPXRydWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlTG9jayhhZGRyZXNzW10gX2FkZHJzKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX2FkZHJzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgbG9ja2VkW19hZGRyc1tpXV09ZmFsc2U7CiAgICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBtb2RpZmllciB0cmFuc2ZlckFsbG93ZWQoYWRkcmVzcyBfYWRkcikgewogICAgICAgIGlmICghZXhjbHVkZVtfYWRkcl0pIHsKICAgICAgICAgICAgYXNzZXJ0KHRyYW5zZmVyRW5hYmxlZCk7CiAgICAgICAgICAgIGlmKGxvY2tGbGFnKXsKICAgICAgICAgICAgICAgIGFzc2VydCghbG9ja2VkW19hZGRyXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgXzsKICAgIH0KCn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4sQ29udHJvbGxlZCB7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgdHJhbnNmZXJBbGxvd2VkKG1zZy5zZW5kZXIpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vRGVmYXVsdCBhc3N1bWVzIHRvdGFsU3VwcGx5IGNhbid0IGJlIG92ZXIgbWF4ICgyXjI1NiAtIDEpLgogICAgICAgIC8vSWYgeW91ciB0b2tlbiBsZWF2ZXMgb3V0IHRvdGFsU3VwcGx5IGFuZCBjYW4gaXNzdWUgbW9yZSB0b2tlbnMgYXMgdGltZSBnb2VzIG9uLCB5b3UgbmVlZCB0byBjaGVjayBpZiBpdCBkb2Vzbid0IHdyYXAuCiAgICAgICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB0cmFuc2ZlckFsbG93ZWQoX2Zyb20pIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7Cn0KCmNvbnRyYWN0IE1FU0ggaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgZnVuY3Rpb24gKCkgcHVibGljIHsKICAgICAgICByZXZlcnQoKTsKICAgIH0KCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiTWVzaEJveCI7ICAgICAgICAgICAgICAgICAgIC8vZmFuY3kgbmFtZQogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gMTg7ICAgICAgICAgICAgICAgIC8vSG93IG1hbnkgZGVjaW1hbHMgdG8gc2hvdy4gaWUuIFRoZXJlIGNvdWxkIDEwMDAgYmFzZSB1bml0cyB3aXRoIDMgZGVjaW1hbHMuIE1lYW5pbmcgMC45ODAgU0JYID0gOTgwIGJhc2UgdW5pdHMuIEl0J3MgbGlrZSBjb21wYXJpbmcgMSB3ZWkgdG8gMSBldGhlci4KICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIk1FU0giOyAgICAgICAgICAgICAgICAgLy9BbiBpZGVudGlmaWVyCiAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAndjAuMSc7ICAgICAgIC8vTUVTSCAwLjEgc3RhbmRhcmQuIEp1c3QgYW4gYXJiaXRyYXJ5IHZlcnNpb25pbmcgc2NoZW1lLgogICAgdWludDI1NiBwdWJsaWMgYWxsb2NhdGVFbmRUaW1lOwoKICAgIAogICAgLy8gVGhlIG5vbmNlIGZvciBhdm9pZCB0cmFuc2ZlciByZXBsYXkgYXR0YWNrcwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIG5vbmNlczsKCiAgICBmdW5jdGlvbiBNRVNIKCkgcHVibGljIHsKICAgICAgICBhbGxvY2F0ZUVuZFRpbWUgPSBub3cgKyAxIGRheXM7CiAgICB9CgogICAgLyoKICAgICAqIFByb3h5IHRyYW5zZmVyIE1FU0guIFdoZW4gc29tZSB1c2VycyBvZiB0aGUgZXRoZXJldW0gYWNjb3VudCBoYXMgbm8gZXRoZXIsCiAgICAgKiBoZSBvciBzaGUgY2FuIGF1dGhvcml6ZSB0aGUgYWdlbnQgZm9yIGJyb2FkY2FzdCB0cmFuc2FjdGlvbnMsIGFuZCBhZ2VudHMgbWF5IGNoYXJnZSBhZ2VuY3kgZmVlcwogICAgICogQHBhcmFtIF9mcm9tCiAgICAgKiBAcGFyYW0gX3RvCiAgICAgKiBAcGFyYW0gX3ZhbHVlCiAgICAgKiBAcGFyYW0gZmVlTWVzaAogICAgICogQHBhcmFtIF92CiAgICAgKiBAcGFyYW0gX3IKICAgICAqIEBwYXJhbSBfcwogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlclByb3h5KGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgdWludDI1NiBfZmVlTWVzaCwKICAgICAgICB1aW50OCBfdixieXRlczMyIF9yLCBieXRlczMyIF9zKSBwdWJsaWMgdHJhbnNmZXJBbGxvd2VkKF9mcm9tKSByZXR1cm5zIChib29sKXsKCiAgICAgICAgaWYoYmFsYW5jZXNbX2Zyb21dIDwgX2ZlZU1lc2ggKyBfdmFsdWUpIHJldmVydCgpOwoKICAgICAgICB1aW50MjU2IG5vbmNlID0gbm9uY2VzW19mcm9tXTsKICAgICAgICBieXRlczMyIGggPSBrZWNjYWsyNTYoX2Zyb20sX3RvLF92YWx1ZSxfZmVlTWVzaCxub25jZSxuYW1lKTsKICAgICAgICBpZihfZnJvbSAhPSBlY3JlY292ZXIoaCxfdixfcixfcykpIHJldmVydCgpOwoKICAgICAgICBpZihiYWxhbmNlc1tfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZXNbX3RvXQogICAgICAgICAgICB8fCBiYWxhbmNlc1ttc2cuc2VuZGVyXSArIF9mZWVNZXNoIDwgYmFsYW5jZXNbbXNnLnNlbmRlcl0pIHJldmVydCgpOwogICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IF9mZWVNZXNoOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBtc2cuc2VuZGVyLCBfZmVlTWVzaCk7CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWUgKyBfZmVlTWVzaDsKICAgICAgICBub25jZXNbX2Zyb21dID0gbm9uY2UgKyAxOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qCiAgICAgKiBQcm94eSBhcHByb3ZlIHRoYXQgc29tZSBvbmUgY2FuIGF1dGhvcml6ZSB0aGUgYWdlbnQgZm9yIGJyb2FkY2FzdCB0cmFuc2FjdGlvbgogICAgICogd2hpY2ggY2FsbCBhcHByb3ZlIG1ldGhvZCwgYW5kIGFnZW50cyBtYXkgY2hhcmdlIGFnZW5jeSBmZWVzCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgd2hpY2ggc2hvdWxkIHRyYW5mZXIgTUVTSCB0byBvdGhlcnMKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgc3BlbmRlciB3aG8gYWxsb3dlZCBieSBfZnJvbQogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgdmFsdWUgdGhhdCBzaG91bGQgYmUgdHJhbmZlcmVkLgogICAgICogQHBhcmFtIF92CiAgICAgKiBAcGFyYW0gX3IKICAgICAqIEBwYXJhbSBfcwogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlUHJveHkoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsCiAgICAgICAgdWludDggX3YsYnl0ZXMzMiBfciwgYnl0ZXMzMiBfcykgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgICAgICB1aW50MjU2IG5vbmNlID0gbm9uY2VzW19mcm9tXTsKICAgICAgICBieXRlczMyIGhhc2ggPSBrZWNjYWsyNTYoX2Zyb20sX3NwZW5kZXIsX3ZhbHVlLG5vbmNlLG5hbWUpOwogICAgICAgIGlmKF9mcm9tICE9IGVjcmVjb3ZlcihoYXNoLF92LF9yLF9zKSkgcmV2ZXJ0KCk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKF9mcm9tLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICBub25jZXNbX2Zyb21dID0gbm9uY2UgKyAxOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvKgogICAgICogR2V0IHRoZSBub25jZQogICAgICogQHBhcmFtIF9hZGRyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldE5vbmNlKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICByZXR1cm4gbm9uY2VzW19hZGRyXTsKICAgIH0KCiAgICAvKiBBcHByb3ZlcyBhbmQgdGhlbiBjYWxscyB0aGUgcmVjZWl2aW5nIGNvbnRyYWN0ICovCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwoKICAgICAgICAvL2NhbGwgdGhlIHJlY2VpdmVBcHByb3ZhbCBmdW5jdGlvbiBvbiB0aGUgY29udHJhY3QgeW91IHdhbnQgdG8gYmUgbm90aWZpZWQuIFRoaXMgY3JhZnRzIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgbWFudWFsbHkgc28gb25lIGRvZXNuJ3QgaGF2ZSB0byBpbmNsdWRlIGEgY29udHJhY3QgaW4gaGVyZSBqdXN0IGZvciB0aGlzLgogICAgICAgIC8vcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90b2tlbkNvbnRyYWN0LCBieXRlcyBfZXh0cmFEYXRhKQogICAgICAgIC8vaXQgaXMgYXNzdW1lZCB0aGF0IHdoZW4gZG9lcyB0aGlzIHRoYXQgdGhlIGNhbGwgKnNob3VsZCogc3VjY2VlZCwgb3RoZXJ3aXNlIG9uZSB3b3VsZCB1c2UgdmFuaWxsYSBhcHByb3ZlIGluc3RlYWQuCiAgICAgICAgaWYoIV9zcGVuZGVyLmNhbGwoYnl0ZXM0KGJ5dGVzMzIoa2VjY2FrMjU2KCJyZWNlaXZlQXBwcm92YWwoYWRkcmVzcyx1aW50MjU2LGFkZHJlc3MsYnl0ZXMpIikpKSwgbXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKSkgeyByZXZlcnQoKTsgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qIEFwcHJvdmVzIGFuZCB0aGVuIGNhbGxzIHRoZSBjb250cmFjdCBjb2RlICovCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbGNvZGUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKCiAgICAgICAgLy9DYWxsIHRoZSBjb250cmFjdCBjb2RlCiAgICAgICAgaWYoIV9zcGVuZGVyLmNhbGwoX2V4dHJhRGF0YSkpIHsgcmV2ZXJ0KCk7IH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgIC8qIFJlZnVuZGFibGUgdG9rZW5zIHNlbnQgdG8gdGhlIHNtYXJ0IGNvbnRyYWN0IGZvciBtaXNvcGVyYXRpb24gb2YgdGhlIHVzZXIgKi8KICAgIGZ1bmN0aW9uIGdldEJhY2tUb2tlbihhZGRyZXNzIF9zcGVuZGVyLGFkZHJlc3MgX3RvLHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgb25seU93bmVyewogICAgICAgIGlmKCFfc3BlbmRlci5jYWxsKGJ5dGVzNChieXRlczMyKGtlY2NhazI1NigidHJhbnNmZXIoYWRkcmVzcyx1aW50MjU2KSIpKSksIF90bywgX3ZhbHVlKSkgeyByZXZlcnQoKTsgfQogICAgfQoKICAgIC8vIEFsbG9jYXRlIHRva2VucyB0byB0aGUgdXNlcnMKICAgIC8vIEBwYXJhbSBfb3duZXJzIFRoZSBvd25lcnMgbGlzdCBvZiB0aGUgdG9rZW4KICAgIC8vIEBwYXJhbSBfdmFsdWVzIFRoZSB2YWx1ZSBsaXN0IG9mIHRoZSB0b2tlbgogICAgZnVuY3Rpb24gYWxsb2NhdGVUb2tlbnMoYWRkcmVzc1tdIF9vd25lcnMsIHVpbnQyNTZbXSBfdmFsdWVzKSBwdWJsaWMgb25seU93bmVyIHsKCiAgICAgICAgaWYoYWxsb2NhdGVFbmRUaW1lIDwgbm93KSByZXZlcnQoKTsKICAgICAgICBpZihfb3duZXJzLmxlbmd0aCAhPSBfdmFsdWVzLmxlbmd0aCkgcmV2ZXJ0KCk7CgogICAgICAgIGZvcih1aW50MjU2IGkgPSAwOyBpIDwgX293bmVycy5sZW5ndGggOyBpKyspewogICAgICAgICAgICBhZGRyZXNzIHRvID0gX293bmVyc1tpXTsKICAgICAgICAgICAgdWludDI1NiB2YWx1ZSA9IF92YWx1ZXNbaV07CiAgICAgICAgICAgIGlmKHRvdGFsU3VwcGx5ICsgdmFsdWUgPD0gdG90YWxTdXBwbHkgfHwgYmFsYW5jZXNbdG9dICsgdmFsdWUgPD0gYmFsYW5jZXNbdG9dKSByZXZlcnQoKTsKICAgICAgICAgICAgdG90YWxTdXBwbHkgKz0gdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW3RvXSArPSB2YWx1ZTsKICAgICAgICB9CiAgICB9Cn0='.
	

]
