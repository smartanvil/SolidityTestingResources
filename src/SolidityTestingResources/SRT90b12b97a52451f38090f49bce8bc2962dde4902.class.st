Class {
	#name : #SRT90b12b97a52451f38090f49bce8bc2962dde4902,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT90b12b97a52451f38090f49bce8bc2962dde4902 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgoKLy8vIEB0aXRsZSBJbnRlcmZhY2UgZm9yIGNvbnRyYWN0cyBjb25mb3JtaW5nIHRvIEVSQy03MjE6IE5vbi1GdW5naWJsZSBUb2tlbnMKLy8vIEBhdXRob3IgRGlldGVyIFNoaXJsZXkgPDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iOTVmMWYwZTFmMGQ1ZjRlZGZjZmFmOGVmZjBmYmJiZjZmYSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+IChodHRwczovL2dpdGh1Yi5jb20vZGV0ZSkKY29udHJhY3QgRVJDNzIxIHsKICAvLyBSZXF1aXJlZCBtZXRob2RzCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICBmdW5jdGlvbiBpbXBsZW1lbnRzRVJDNzIxKCkgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIGFkZHIpOwogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiB0b3RhbCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB0b2tlbklkKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBhcHByb3ZlZCwgdWludDI1NiB0b2tlbklkKTsKCiAgLy8gT3B0aW9uYWwKICAvLyBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIG5hbWUpOwogIC8vIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBzeW1ib2wpOwogIC8vIGZ1bmN0aW9uIHRva2VuT2ZPd25lckJ5SW5kZXgoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX2luZGV4KSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG9rZW5JZCk7CiAgLy8gZnVuY3Rpb24gdG9rZW5NZXRhZGF0YSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgaW5mb1VybCk7Cn0KCmNvbnRyYWN0IE93bmFibGUgewogICAgCgkgIC8vIFRoZSBhZGRyZXNzZXMgb2YgdGhlIGFjY291bnRzIChvciBjb250cmFjdHMpIHRoYXQgY2FuIGV4ZWN1dGUgYWN0aW9ucyB3aXRoaW4gZWFjaCByb2xlcy4KCWFkZHJlc3MgcHVibGljIGhvc3RBZGRyZXNzOwoJYWRkcmVzcyBwdWJsaWMgYWRtaW5BZGRyZXNzOwogICAgCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKCQlob3N0QWRkcmVzcyA9IG1zZy5zZW5kZXI7CgkJYWRtaW5BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5SG9zdCgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gaG9zdEFkZHJlc3MpOyAKICAgICAgICBfOwogICAgfQoJCiAgICBtb2RpZmllciBvbmx5QWRtaW4oKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCQoJLy8vIEFjY2VzcyBtb2RpZmllciBmb3IgY29udHJhY3Qgb3duZXIgb25seSBmdW5jdGlvbmFsaXR5Cgltb2RpZmllciBvbmx5SG9zdE9yQWRtaW4oKSB7CgkJcmVxdWlyZSgKCQkgIG1zZy5zZW5kZXIgPT0gaG9zdEFkZHJlc3MgfHwKCQkgIG1zZy5zZW5kZXIgPT0gYWRtaW5BZGRyZXNzCgkJKTsKCQlfOwoJfQoKCWZ1bmN0aW9uIHNldEhvc3QoYWRkcmVzcyBfbmV3SG9zdCkgcHVibGljIG9ubHlIb3N0IHsKCQlyZXF1aXJlKF9uZXdIb3N0ICE9IGFkZHJlc3MoMCkpOwoKCQlob3N0QWRkcmVzcyA9IF9uZXdIb3N0OwoJfQogICAgCglmdW5jdGlvbiBzZXRBZG1pbihhZGRyZXNzIF9uZXdBZG1pbikgcHVibGljIG9ubHlIb3N0IHsKCQlyZXF1aXJlKF9uZXdBZG1pbiAhPSBhZGRyZXNzKDApKTsKCgkJYWRtaW5BZGRyZXNzID0gX25ld0FkbWluOwoJfQp9Cgpjb250cmFjdCBUb2tlbnNXYXJDb250cmFjdCBpcyBFUkM3MjEsIE93bmFibGUgewogICAgICAgIAogICAgLyoqKiBFVkVOVFMgKioqLwogICAgICAgIAogICAgLy8vIEBkZXYgVGhlIE5ld0hlcm8gZXZlbnQgaXMgZmlyZWQgd2hlbmV2ZXIgYSBuZXcgY2FyZCBjb21lcyBpbnRvIGV4aXN0ZW5jZS4KICAgIGV2ZW50IE5ld1Rva2VuKHVpbnQyNTYgdG9rZW5JZCwgc3RyaW5nIG5hbWUsIGFkZHJlc3Mgb3duZXIpOwogICAgICAgIAogICAgLy8vIEBkZXYgVGhlIE5ld1Rva2VuT3duZXIgZXZlbnQgaXMgZmlyZWQgd2hlbmV2ZXIgYSB0b2tlbiBpcyBzb2xkLgogICAgZXZlbnQgTmV3VG9rZW5Pd25lcih1aW50MjU2IG9sZFByaWNlLCB1aW50MjU2IG5ld1ByaWNlLCBhZGRyZXNzIHByZXZPd25lciwgYWRkcmVzcyB3aW5uZXIsIHN0cmluZyBuYW1lLCB1aW50MjU2IHRva2VuSWQpOwogICAgCiAgICAvLy8gQGRldiBUaGUgTmV3R29sZGVuQ2FyZCBldmVudCBpcyBmaXJlZCB3aGVuZXZlciBhIGdvbGRlbiBjYXJkIGlzIGNoYW5nZS4KICAgIGV2ZW50IE5ld0dvbGRlblRva2VuKHVpbnQyNTYgZ29sZGVuUGF5bWVudCk7CiAgICAgICAgCiAgICAvLy8gQGRldiBUcmFuc2ZlciBldmVudCBhcyBkZWZpbmVkIGluIGN1cnJlbnQgZHJhZnQgb2YgRVJDNzIxLiBvd25lcnNoaXAgaXMgYXNzaWduZWQsIGluY2x1ZGluZyBiaXJ0aHMuCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CiAgICAgICAgCiAgICAvKioqIENPTlNUQU5UUyAqKiovCiAgICAgICAgCiAgICAvLy8gQG5vdGljZSBOYW1lIGFuZCBzeW1ib2wgb2YgdGhlIG5vbiBmdW5naWJsZSB0b2tlbiwgYXMgZGVmaW5lZCBpbiBFUkM3MjEuCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IE5BTUUgPSAiVG9rZW5zV2FyQ29udHJhY3QiOyAvLyBzb2xoaW50LWRpc2FibGUtbGluZQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBTWU1CT0wgPSAiVFdDIjsgLy8gc29saGludC1kaXNhYmxlLWxpbmUKICAgICAgCiAgICB1aW50MjU2IHByaXZhdGUgc3RhcnRpbmdQcmljZSA9IDAuMDAxIGV0aGVyOyAKICAgIHVpbnQyNTYgcHJpdmF0ZSBmaXJzdFN0ZXBMaW1pdCA9ICAwLjA0NSBldGhlcjsgLy81IGl0ZXJhdGlvbgogICAgdWludDI1NiBwcml2YXRlIHNlY29uZFN0ZXBMaW1pdCA9ICAwLjQ1IGV0aGVyOyAvLzggaXRlcmF0aW9uCiAgICB1aW50MjU2IHByaXZhdGUgdGhpcmRTdGVwTGltaXQgPSAxLjAwIGV0aGVyOyAvLzEwIGl0ZXJhdGlvbgogICAgICAgIAogICAgLyoqKiBTVE9SQUdFICoqKi8KICAgICAgICAKICAgIC8vLyBAZGV2IEEgbWFwcGluZyBmcm9tIGNhcmQgSURzIHRvIHRoZSBhZGRyZXNzIHRoYXQgb3ducyB0aGVtLiBBbGwgY2FyZHMgaGF2ZQogICAgLy8vICBzb21lIHZhbGlkIG93bmVyIGFkZHJlc3MuCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBjYXJkVG9rZW5Ub093bmVyOwogICAgICAgIAogICAgLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBvd25lciBhZGRyZXNzIHRvIGNvdW50IG9mIHRva2VucyB0aGF0IGFkZHJlc3Mgb3ducy4KICAgIC8vICBVc2VkIGludGVybmFsbHkgaW5zaWRlIGJhbGFuY2VPZigpIHRvIHJlc29sdmUgb3duZXJzaGlwIGNvdW50LgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIG93bmVyc2hpcFRva2VuQ291bnQ7CiAgICAgICAgCiAgICAvLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBDYXJkSURzIHRvIGFuIGFkZHJlc3MgdGhhdCBoYXMgYmVlbiBhcHByb3ZlZCB0byBjYWxsCiAgICAvLy8gIHRyYW5zZmVyRnJvbSgpLiBFYWNoIGNhcmQgY2FuIG9ubHkgaGF2ZSBvbmUgYXBwcm92ZWQgYWRkcmVzcyBmb3IgdHJhbnNmZXIKICAgIC8vLyAgYXQgYW55IHRpbWUuIEEgemVybyB2YWx1ZSBtZWFucyBubyBhcHByb3ZhbCBpcyBvdXRzdGFuZGluZy4KICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGNhcmRUb2tlblRvQXBwcm92ZWQ7CiAgICAgICAgCiAgICAvLyBAZGV2IEEgbWFwcGluZyBmcm9tIENhcmRJRHMgdG8gdGhlIHByaWNlIG9mIHRoZSB0b2tlbi4KICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSBjYXJkVG9rZW5Ub1ByaWNlOwogICAgICAgIAogICAgLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBDYXJkSURzIHRvIHRoZSBwb3NpdGlvbiBvZiB0aGUgaXRlbSBpbiBhcnJheS4KICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSBjYXJkVG9rZW5Ub1Bvc2l0aW9uOwogICAgCiAgICAvLyBAZGV2IHRva2VuSWQgb2YgZ29sZGVuIGNhcmQuCiAgICB1aW50MjU2IHB1YmxpYyBnb2xkZW5Ub2tlbklkOwogICAgCiAgICAvKioqIFNUT1JBR0UgKioqLwogICAgCgkvKioqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKioqLwogICAgCiAgICAvKioqIENBUkRTICoqKi8KICAgIAoJLyoqKiBEQVRBVFlQRVMgKioqLwoJc3RydWN0IENhcmQgewoJCXVpbnQyNTYgdG9rZW47CgkJc3RyaW5nIG5hbWU7Cgl9CgoJQ2FyZFtdIHByaXZhdGUgY2FyZHM7CiAgICAKCQoJLy8vIEBub3RpY2UgUmV0dXJucyBhbGwgdGhlIHJlbGV2YW50IGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgY2FyZC4KCS8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIHRva2VuSWQgb2YgdGhlIGNhcmQgb2YgaW50ZXJlc3QuCglmdW5jdGlvbiBnZXRDYXJkKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKAoJCXN0cmluZyBuYW1lLAoJCXVpbnQyNTYgdG9rZW4KCSkgewoJICAgIAoJICAgIGFkZHJlc3Mgb3duZXIgPSBjYXJkVG9rZW5Ub093bmVyW190b2tlbklkXTsKICAgICAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCkpOwoJICAgIAoJICAgIHVpbnQyNTYgaW5kZXggPSBjYXJkVG9rZW5Ub1Bvc2l0aW9uW190b2tlbklkXTsKCSAgICBDYXJkIHN0b3JhZ2UgY2FyZCA9IGNhcmRzW2luZGV4XTsKCQluYW1lID0gY2FyZC5uYW1lOwoJCXRva2VuID0gY2FyZC50b2tlbjsKCX0KICAgIAogICAgLy8vIEBkZXYgQ3JlYXRlcyBhIG5ldyB0b2tlbiB3aXRoIHRoZSBnaXZlbiBuYW1lLgoJZnVuY3Rpb24gY3JlYXRlVG9rZW4oc3RyaW5nIF9uYW1lLCB1aW50MjU2IF9pZCkgcHVibGljIG9ubHlBZG1pbiB7CgkJX2NyZWF0ZVRva2VuKF9uYW1lLCBfaWQsIGFkZHJlc3ModGhpcyksIHN0YXJ0aW5nUHJpY2UpOwoJfQoJCiAgICAvLy8gQGRldiBzZXQgZ29sZGVuIGNhcmQgdG9rZW4uCglmdW5jdGlvbiBzZXRHb2xkZW5DYXJkVG9rZW4odWludDI1NiB0b2tlbklkKSBwdWJsaWMgb25seUFkbWluIHsKCQlnb2xkZW5Ub2tlbklkID0gdG9rZW5JZDsKCQlOZXdHb2xkZW5Ub2tlbihnb2xkZW5Ub2tlbklkKTsKCX0KCQoJZnVuY3Rpb24gX2NyZWF0ZVRva2VuKHN0cmluZyBfbmFtZSwgdWludDI1NiBfaWQsIGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSkgcHJpdmF0ZSB7CgkgICAgCgkJQ2FyZCBtZW1vcnkgX2NhcmQgPSBDYXJkKHsKCQkgIG5hbWU6IF9uYW1lLAoJCSAgdG9rZW46IF9pZAoJCX0pOwoJCQkKCQl1aW50MjU2IGluZGV4ID0gY2FyZHMucHVzaChfY2FyZCkgLSAxOwoJCWNhcmRUb2tlblRvUG9zaXRpb25bX2lkXSA9IGluZGV4OwoJCS8vIEl0J3MgcHJvYmFibHkgbmV2ZXIgZ29pbmcgdG8gaGFwcGVuLCA0IGJpbGxpb24gdG9rZW5zIGFyZSBBIExPVCwgYnV0CgkJLy8gbGV0J3MganVzdCBiZSAxMDAlIHN1cmUgd2UgbmV2ZXIgbGV0IHRoaXMgaGFwcGVuLgoJCXJlcXVpcmUoX2lkID09IHVpbnQyNTYodWludDMyKF9pZCkpKTsKCgkJTmV3VG9rZW4oX2lkLCBfbmFtZSwgX293bmVyKTsKCQljYXJkVG9rZW5Ub1ByaWNlW19pZF0gPSBfcHJpY2U7CgkJLy8gVGhpcyB3aWxsIGFzc2lnbiBvd25lcnNoaXAsIGFuZCBhbHNvIGVtaXQgdGhlIFRyYW5zZmVyIGV2ZW50IGFzCgkJLy8gcGVyIEVSQzcyMSBkcmFmdAoJCV90cmFuc2ZlcihhZGRyZXNzKDApLCBfb3duZXIsIF9pZCk7Cgl9CgkvKioqIENBUkRTICoqKi8KCQoJLyoqKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICoqKi8KCQoJLyoqKiBFUkM3MjEgRlVOQ1RJT05TICoqKi8KICAgIC8vLyBAbm90aWNlIEdyYW50IGFub3RoZXIgYWRkcmVzcyB0aGUgcmlnaHQgdG8gdHJhbnNmZXIgdG9rZW4gdmlhIHRha2VPd25lcnNoaXAoKSBhbmQgdHJhbnNmZXJGcm9tKCkuCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byBiZSBncmFudGVkIHRyYW5zZmVyIGFwcHJvdmFsLiBQYXNzIGFkZHJlc3MoMCkgdG8KICAgIC8vLyAgY2xlYXIgYWxsIGFwcHJvdmFscy4KICAgIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIElEIG9mIHRoZSBUb2tlbiB0aGF0IGNhbiBiZSB0cmFuc2ZlcnJlZCBpZiB0aGlzIGNhbGwgc3VjY2VlZHMuCiAgICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogICAgZnVuY3Rpb24gYXBwcm92ZSgKICAgICAgICBhZGRyZXNzIF90bywKICAgICAgICB1aW50MjU2IF90b2tlbklkCiAgICAgICkgcHVibGljIHsKICAgICAgICAvLyBDYWxsZXIgbXVzdCBvd24gdG9rZW4uCiAgICAgICAgcmVxdWlyZShfb3ducyhtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgCiAgICAgICAgY2FyZFRva2VuVG9BcHByb3ZlZFtfdG9rZW5JZF0gPSBfdG87CiAgICAKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICAgIH0KICAgIAogICAgLy8vIEZvciBxdWVyeWluZyBiYWxhbmNlIG9mIGEgcGFydGljdWxhciBhY2NvdW50CiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmb3IgYmFsYW5jZSBxdWVyeQogICAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIG93bmVyc2hpcFRva2VuQ291bnRbX293bmVyXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAoKICAgIC8vLyBGb3IgcXVlcnlpbmcgb3duZXIgb2YgdG9rZW4KICAgIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIHRva2VuSUQgZm9yIG93bmVyIGlucXVpcnkKICAgIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpIHsKICAgICAgICBvd25lciA9IGNhcmRUb2tlblRvT3duZXJbX3Rva2VuSWRdOwogICAgICAgIHJlcXVpcmUob3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICB9CiAgICAKICAgIC8vLyBAbm90aWNlIEFsbG93IHByZS1hcHByb3ZlZCB1c2VyIHRvIHRha2Ugb3duZXJzaGlwIG9mIGEgdG9rZW4KICAgIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIElEIG9mIHRoZSBUb2tlbiB0aGF0IGNhbiBiZSB0cmFuc2ZlcnJlZCBpZiB0aGlzIGNhbGwgc3VjY2VlZHMuCiAgICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogICAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBjYXJkVG9rZW5Ub093bmVyW190b2tlbklkXTsKICAgIAogICAgICAgIC8vIFNhZmV0eSBjaGVjayB0byBwcmV2ZW50IGFnYWluc3QgYW4gdW5leHBlY3RlZCAweDAgZGVmYXVsdC4KICAgICAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChuZXdPd25lcikpOwoKICAgICAgICAvLyBNYWtpbmcgc3VyZSB0cmFuc2ZlciBpcyBhcHByb3ZlZAogICAgICAgIHJlcXVpcmUoX2FwcHJvdmVkKG5ld093bmVyLCBfdG9rZW5JZCkpOwogICAgCiAgICAgICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwogICAgfQogICAgCiAgICAvLy8gRm9yIHF1ZXJ5aW5nIHRvdGFsU3VwcGx5IG9mIHRva2VuCiAgICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKSB7CiAgICAgICAgcmV0dXJuIGNhcmRzLmxlbmd0aDsKICAgIH0KICAgIAogICAgLy8vIFRoaXJkLXBhcnR5IGluaXRpYXRlcyB0cmFuc2ZlciBvZiB0b2tlbiBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8KICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3MgZm9yIHRoZSB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZCBmcm9tLgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgZm9yIHRoZSB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZCB0by4KICAgIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIElEIG9mIHRoZSBUb2tlbiB0aGF0IGNhbiBiZSB0cmFuc2ZlcnJlZCBpZiB0aGlzIGNhbGwgc3VjY2VlZHMuCiAgICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX293bnMoX2Zyb20sIF90b2tlbklkKSk7CiAgICAgICAgcmVxdWlyZShfYXBwcm92ZWQoX3RvLCBfdG9rZW5JZCkpOwogICAgICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKF90bykpOwogICAgCiAgICAgICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICAgIH0KCiAgICAvLy8gT3duZXIgaW5pdGF0ZXMgdGhlIHRyYW5zZmVyIG9mIHRoZSB0b2tlbiB0byBhbm90aGVyIGFjY291bnQKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgdG8uCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogICAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKICAgICAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChfdG8pKTsKICAgIAogICAgICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICAgIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsKICAgICAgICByZXR1cm4gTkFNRTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICAgIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgICAgIHJldHVybiBTWU1CT0w7CiAgICB9CgoJLyoqKiBFUkM3MjEgRlVOQ1RJT05TICoqKi8KCQoJLyoqKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICoqKi8KCQoJLyoqKiBBRE1JTklTVFJBVE9SIEZVTkNUSU9OUyAqKiovCgkKCS8vc2VuZCBiYWxhbmNlIG9mIGNvbnRyYWN0IG9uIHdhbGxldAoJZnVuY3Rpb24gcGF5b3V0KGFkZHJlc3MgX3RvKSBwdWJsaWMgb25seUhvc3RPckFkbWluIHsKCQlfcGF5b3V0KF90byk7Cgl9CgkKCWZ1bmN0aW9uIF9wYXlvdXQoYWRkcmVzcyBfdG8pIHByaXZhdGUgewoJCWlmIChfdG8gPT0gYWRkcmVzcygwKSkgewoJCQlob3N0QWRkcmVzcy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwoJCX0gZWxzZSB7CgkJCV90by50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwoJCX0KCX0KCQoJLyoqKiBBRE1JTklTVFJBVE9SIEZVTkNUSU9OUyAqKiovCgkKCiAgICAvKioqIFBVQkxJQyBGVU5DVElPTlMgKioqLwoKICAgIGZ1bmN0aW9uIGNvbnRyYWN0QmFsYW5jZSgpIHB1YmxpYyAgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYWRkcmVzcyh0aGlzKS5iYWxhbmNlOwogICAgfQogICAgCgoKICAvLyBBbGxvd3Mgc29tZW9uZSB0byBzZW5kIGV0aGVyIGFuZCBvYnRhaW4gdGhlIHRva2VuCiAgZnVuY3Rpb24gcHVyY2hhc2UodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHBheWFibGUgewogICAgYWRkcmVzcyBvbGRPd25lciA9IGNhcmRUb2tlblRvT3duZXJbX3Rva2VuSWRdOwogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICAKICAgIHJlcXVpcmUob2xkT3duZXIgIT0gYWRkcmVzcygwKSk7CgogICAgdWludDI1NiBzZWxsaW5nUHJpY2UgPSBjYXJkVG9rZW5Ub1ByaWNlW190b2tlbklkXTsKCiAgICAvLyBNYWtpbmcgc3VyZSB0b2tlbiBvd25lciBpcyBub3Qgc2VuZGluZyB0byBzZWxmCiAgICByZXF1aXJlKG9sZE93bmVyICE9IG5ld093bmVyKTsKCiAgICAvLyBTYWZldHkgY2hlY2sgdG8gcHJldmVudCBhZ2FpbnN0IGFuIHVuZXhwZWN0ZWQgMHgwIGRlZmF1bHQuCiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChuZXdPd25lcikpOwoKICAgIC8vIE1ha2luZyBzdXJlIHNlbnQgYW1vdW50IGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgc2VsbGluZ1ByaWNlCiAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBzZWxsaW5nUHJpY2UpOwoKICAgIHVpbnQyNTYgcGF5bWVudCA9IHVpbnQyNTYoSGVscGVyLmRpdihIZWxwZXIubXVsKHNlbGxpbmdQcmljZSwgOTMpLCAxMDApKTsKICAgIHVpbnQyNTYgZ29sZGVuUGF5bWVudCA9IHVpbnQyNTYoSGVscGVyLmRpdihIZWxwZXIubXVsKHNlbGxpbmdQcmljZSwgMiksIDEwMCkpOwogICAgCiAgICB1aW50MjU2IHB1cmNoYXNlRXhjZXNzID0gSGVscGVyLnN1Yihtc2cudmFsdWUsIHNlbGxpbmdQcmljZSk7CgogICAgLy8gVXBkYXRlIHByaWNlcwogICAgaWYgKHNlbGxpbmdQcmljZSA8IGZpcnN0U3RlcExpbWl0KSB7CiAgICAgIC8vIGZpcnN0IHN0YWdlCiAgICAgIGNhcmRUb2tlblRvUHJpY2VbX3Rva2VuSWRdID0gSGVscGVyLmRpdihIZWxwZXIubXVsKHNlbGxpbmdQcmljZSwgMzAwKSwgOTMpOwogICAgfSBlbHNlIGlmIChzZWxsaW5nUHJpY2UgPCBzZWNvbmRTdGVwTGltaXQpIHsKICAgICAgLy8gc2Vjb25kIHN0YWdlCiAgICAgIGNhcmRUb2tlblRvUHJpY2VbX3Rva2VuSWRdID0gSGVscGVyLmRpdihIZWxwZXIubXVsKHNlbGxpbmdQcmljZSwgMjAwKSwgOTMpOwogICAgfSBlbHNlIGlmIChzZWxsaW5nUHJpY2UgPCB0aGlyZFN0ZXBMaW1pdCkgewogICAgICAvLyBzZWNvbmQgc3RhZ2UKICAgICAgY2FyZFRva2VuVG9QcmljZVtfdG9rZW5JZF0gPSBIZWxwZXIuZGl2KEhlbHBlci5tdWwoc2VsbGluZ1ByaWNlLCAxMjApLCA5Myk7CiAgICB9IGVsc2UgewogICAgICAvLyB0aGlyZCBzdGFnZQogICAgICBjYXJkVG9rZW5Ub1ByaWNlW190b2tlbklkXSA9IEhlbHBlci5kaXYoSGVscGVyLm11bChzZWxsaW5nUHJpY2UsIDExNSksIDkzKTsKICAgIH0KCiAgICBfdHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfdG9rZW5JZCk7CgogICAgLy8gUGF5IHByZXZpb3VzIHRva2VuT3duZXIgaWYgb3duZXIgaXMgbm90IGNvbnRyYWN0CiAgICBpZiAob2xkT3duZXIgIT0gYWRkcmVzcyh0aGlzKSkgewogICAgICBvbGRPd25lci50cmFuc2ZlcihwYXltZW50KTsgLy8tMC4wNQogICAgfQogICAgCiAgICAvL1BheSBnb2xkZW4gY29tbWlzc2lvbgogICAgYWRkcmVzcyBnb2xkZW5Pd25lciA9IGNhcmRUb2tlblRvT3duZXJbZ29sZGVuVG9rZW5JZF07CiAgICBpZiAoZ29sZGVuT3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBnb2xkZW5Pd25lci50cmFuc2Zlcihnb2xkZW5QYXltZW50KTsgLy8tMC4wMgogICAgfQoKCS8vQ09OVFJBQ1QgRVZFTlQgCgl1aW50MjU2IGluZGV4ID0gY2FyZFRva2VuVG9Qb3NpdGlvbltfdG9rZW5JZF07CiAgICBOZXdUb2tlbk93bmVyKHNlbGxpbmdQcmljZSwgY2FyZFRva2VuVG9QcmljZVtfdG9rZW5JZF0sIG9sZE93bmVyLCBuZXdPd25lciwgY2FyZHNbaW5kZXhdLm5hbWUsIF90b2tlbklkKTsKCiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHB1cmNoYXNlRXhjZXNzKTsKICAgIAogIH0KCiAgZnVuY3Rpb24gcHJpY2VPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHByaWNlKSB7CiAgICByZXR1cm4gY2FyZFRva2VuVG9QcmljZVtfdG9rZW5JZF07CiAgfQoKCgogIC8vLyBAcGFyYW0gX293bmVyIFRoZSBvd25lciB3aG9zZSBjZWxlYnJpdHkgdG9rZW5zIHdlIGFyZSBpbnRlcmVzdGVkIGluLgogIC8vLyBAZGV2IFRoaXMgbWV0aG9kIE1VU1QgTkVWRVIgYmUgY2FsbGVkIGJ5IHNtYXJ0IGNvbnRyYWN0IGNvZGUuIEZpcnN0LCBpdCdzIGZhaXJseQogIC8vLyAgZXhwZW5zaXZlIChpdCB3YWxrcyB0aGUgZW50aXJlIGNhcmRzIGFycmF5IGxvb2tpbmcgZm9yIGNhcmRzIGJlbG9uZ2luZyB0byBvd25lciksCiAgLy8vICBidXQgaXQgYWxzbyByZXR1cm5zIGEgZHluYW1pYyBhcnJheSwgd2hpY2ggaXMgb25seSBzdXBwb3J0ZWQgZm9yIHdlYjMgY2FsbHMsIGFuZAogIC8vLyAgbm90IGNvbnRyYWN0LXRvLWNvbnRyYWN0IGNhbGxzLgogIGZ1bmN0aW9uIHRva2Vuc09mT3duZXIoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NltdIG93bmVyVG9rZW5zKSB7CiAgICB1aW50MjU2IHRva2VuQ291bnQgPSBiYWxhbmNlT2YoX293bmVyKTsKICAgIGlmICh0b2tlbkNvdW50ID09IDApIHsKICAgICAgICAvLyBSZXR1cm4gYW4gZW1wdHkgYXJyYXkKICAgICAgcmV0dXJuIG5ldyB1aW50MjU2W10oMCk7CiAgICB9IGVsc2UgewogICAgICB1aW50MjU2W10gbWVtb3J5IHJlc3VsdCA9IG5ldyB1aW50MjU2W10odG9rZW5Db3VudCk7CiAgICAgIHVpbnQyNTYgdG90YWxDYXJkcyA9IHRvdGFsU3VwcGx5KCk7CiAgICAgIHVpbnQyNTYgcmVzdWx0SW5kZXggPSAwOwoKICAgICAgdWludDI1NiBpbmRleDsKICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDw9IHRvdGFsQ2FyZHMtMTsgaW5kZXgrKykgewogICAgICAgIGlmIChjYXJkVG9rZW5Ub093bmVyW2NhcmRzW2luZGV4XS50b2tlbl0gPT0gX293bmVyKSB7CiAgICAgICAgICByZXN1bHRbcmVzdWx0SW5kZXhdID0gY2FyZHNbaW5kZXhdLnRva2VuOwogICAgICAgICAgcmVzdWx0SW5kZXgrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9CgogIC8qKiogUFJJVkFURSBGVU5DVElPTlMgKioqLwogIC8vLyBTYWZldHkgY2hlY2sgb24gX3RvIGFkZHJlc3MgdG8gcHJldmVudCBhZ2FpbnN0IGFuIHVuZXhwZWN0ZWQgMHgwIGRlZmF1bHQuCiAgZnVuY3Rpb24gX2FkZHJlc3NOb3ROdWxsKGFkZHJlc3MgX3RvKSBwcml2YXRlIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIF90byAhPSBhZGRyZXNzKDApOwogIH0KCiAgLy8vIEZvciBjaGVja2luZyBhcHByb3ZhbCBvZiB0cmFuc2ZlciBmb3IgYWRkcmVzcyBfdG8KICBmdW5jdGlvbiBfYXBwcm92ZWQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gY2FyZFRva2VuVG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX3RvOwogIH0KCiAgLy8vIENoZWNrIGZvciB0b2tlbiBvd25lcnNoaXAKICBmdW5jdGlvbiBfb3ducyhhZGRyZXNzIGNsYWltYW50LCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIGNsYWltYW50ID09IGNhcmRUb2tlblRvT3duZXJbX3Rva2VuSWRdOwogIH0KCgogIC8vLyBAZGV2IEFzc2lnbnMgb3duZXJzaGlwIG9mIGEgc3BlY2lmaWMgY2FyZCB0byBhbiBhZGRyZXNzLgogIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICAvLyBTaW5jZSB0aGUgbnVtYmVyIG9mIGNhcmRzIGlzIGNhcHBlZCB0byAyXjMyIHdlIGNhbid0IG92ZXJmbG93IHRoaXMKICAgIG93bmVyc2hpcFRva2VuQ291bnRbX3RvXSsrOwogICAgLy90cmFuc2ZlciBvd25lcnNoaXAKICAgIGNhcmRUb2tlblRvT3duZXJbX3Rva2VuSWRdID0gX3RvOwoKICAgIC8vIFdoZW4gY3JlYXRpbmcgbmV3IGNhcmRzIF9mcm9tIGlzIDB4MCwgYnV0IHdlIGNhbid0IGFjY291bnQgdGhhdCBhZGRyZXNzLgogICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXJzaGlwVG9rZW5Db3VudFtfZnJvbV0tLTsKICAgICAgLy8gY2xlYXIgYW55IHByZXZpb3VzbHkgYXBwcm92ZWQgb3duZXJzaGlwIGV4Y2hhbmdlCiAgICAgIGRlbGV0ZSBjYXJkVG9rZW5Ub0FwcHJvdmVkW190b2tlbklkXTsKICAgIH0KCiAgICAvLyBFbWl0IHRoZSB0cmFuc2ZlciBldmVudC4KICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICB9CiAgCgogICAgZnVuY3Rpb24gVG9rZW5zV2FyQ29udHJhY3QoKSBwdWJsaWMgewogICAgfQogICAgCn0KCmxpYnJhcnkgSGVscGVyIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQ=='.
	

]
