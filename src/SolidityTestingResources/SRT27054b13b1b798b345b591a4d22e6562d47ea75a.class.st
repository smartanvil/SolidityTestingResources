Class {
	#name : #SRT27054b13b1b798b345b591a4d22e6562d47ea75a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT27054b13b1b798b345b591a4d22e6562d47ea75a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovLyBTZWUgdGhlIEdpdGh1YiBhdCBnaXRodWIuY29tL2FpcnN3YXAvY29udHJhY3RzCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCgovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9Cn0KCgpjb250cmFjdCBUb2tlbiB7CiAgICAvKiBUaGlzIGlzIGEgc2xpZ2h0IGNoYW5nZSB0byB0aGUgRVJDMjAgYmFzZSBzdGFuZGFyZC4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgaXMgcmVwbGFjZWQgd2l0aDoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgVGhpcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgYSBnZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSB0b3RhbFN1cHBseS4KICAgIFRoaXMgaXMgbW92ZWQgdG8gdGhlIGJhc2UgY29udHJhY3Qgc2luY2UgcHVibGljIGdldHRlciBmdW5jdGlvbnMgYXJlIG5vdAogICAgY3VycmVudGx5IHJlY29nbmlzZWQgYXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIG1hdGNoaW5nIGFic3RyYWN0CiAgICBmdW5jdGlvbiBieSB0aGUgY29tcGlsZXIuCiAgICAqLwogICAgLy8vIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBgX2Zyb21gCiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4gewoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZXM7IC8vICphZGRlZCBwdWJsaWMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93ZWQ7IC8vICphZGRlZCBwdWJsaWMKfQoKCgoKLyoqIEB0aXRsZSBUaGUgQWlyU3dhcCBUb2tlbgogICogQW4gRVJDMjAtY29tcGxpYW50IHRva2VuIHRoYXQgaXMgb25seSB0cmFuc2ZlcmFibGUgYWZ0ZXIgYQogICogc3BlY2lmaWVkIHRpbWUuIEhvbGRlcnMgYWxzbyBoYXZlIHRoZSBhYmlsaXR5IHRvIGxvY2sgYW4gYW1vdW50IG9mIHRva2VucwogICogZm9yIGEgcGVyaW9kIG9mIHRpbWUgZm9yIGFwcGxpY2F0aW9ucyB0aGF0IHJlZmVyZW5jZSB0aGlzIGxvY2tlZCBhbW91bnQKICAqIGZvciBleGFtcGxlIGZvciBsaWNlbnNpbmcgZmVhdHVyZXMuCiAgKi8KY29udHJhY3QgQWlyU3dhcFRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIFBhdXNhYmxlIHsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiQWlyU3dhcCBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJBU1QiOwogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gNDsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRvdGFsU3VwcGx5ID0gNTAwMDAwMDAwMDAwMDsKCiAgICAvLyBUaGUgdGltZSBhZnRlciB3aGljaCBBaXJTd2FwIHRva2VucyBiZWNvbWUgdHJhbnNmZXJhYmxlLgogICAgLy8gQ3VycmVudCB2YWx1ZSBpcyBPY3RvYmVyIDE3LCAyMDE3IDEwOjEwOjEwIEVhc3Rlcm4gVGltZS4KICAgIHVpbnQyNTYgYmVjb21lc1RyYW5zZmVyYWJsZSA9IDE1MDgyNDk0MTA7CgogICAgLy8gVGhlIHRpbWUgdGhhdCB0b2tlbnMgYXJlIHRvIGJlIGxvY2tlZCBiZWZvcmUgYmVjb21pbmcgdW5sb2NrYWJsZS4KICAgIC8vIEN1cnJlbnQgdmFsdWUgaXMgNyBkYXlzLgogICAgdWludDI1NiBsb2NraW5nUGVyaW9kID0gNjA0ODAwOwoKICAgIC8vIFByZXZlbnRzIHByZW1hdHVyZSBleGVjdXRpb24uCiAgICBtb2RpZmllciBvbmx5QWZ0ZXIodWludDI1NiBfdGltZSkgewogICAgICAgIHJlcXVpcmUobm93ID49IF90aW1lKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vIFByZXZlbnQgcHJlbWF0dXJlIGV4ZWN1dGlvbiBmb3IgYW55b25lIGJ1dCB0aGUgb3duZXIuCiAgICBtb2RpZmllciBvbmx5QWZ0ZXJPck93bmVyKHVpbnQyNTYgX3RpbWUsIGFkZHJlc3MgX2Zyb20pIHsKICAgICAgICBpZiAoX2Zyb20gIT0gb3duZXIpIHsKICAgICAgICAgICAgcmVxdWlyZShub3cgPj0gX3RpbWUpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIC8vIEhvbGRzIHRoZSBhbW91bnQgYW5kIGRhdGUgb2YgYSBnaXZlbiBiYWxhbmNlIGxvY2suCiAgICBzdHJ1Y3QgQmFsYW5jZUxvY2sgewogICAgICAgIHVpbnQyNTYgYW1vdW50OwogICAgICAgIHVpbnQyNTYgdW5sb2NrRGF0ZTsKICAgIH0KCiAgICAvLyBBIG1hcHBpbmcgb2YgYmFsYW5jZSBsb2NrIHRvIGEgZ2l2ZW4gYWRkcmVzcy4KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gQmFsYW5jZUxvY2spIHB1YmxpYyBiYWxhbmNlTG9ja3M7CgogICAgLy8gQW4gZXZlbnQgdG8gbm90aWZ5IHRoYXQgX293bmVyIGhhcyBsb2NrZWQgYSBiYWxhbmNlLgogICAgZXZlbnQgQmFsYW5jZUxvY2tlZChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50MjU2IF9vbGRMb2NrZWRBbW91bnQsCiAgICB1aW50MjU2IF9uZXdMb2NrZWRBbW91bnQsIHVpbnQyNTYgX2V4cGlyeSk7CgogICAgLyoqIEBkZXYgQ29uc3RydWN0b3IgZm9yIHRoZSBjb250cmFjdC4KICAgICAgKiBAcGFyYW0gX2RlcGxveWVyIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCBpbml0aWFsbHkgaG9sZCBhbGwgdG9rZW5zLgogICAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdGhhdCB3aWxsIGJlIGFibGUgdG8gdHJhbnNmZXIgZWFybHkuCiAgICAgICogQHBhcmFtIF9iYWxhbmNlIFRoZSBpbml0aWFsIGJhbGFuY2UgZm9yIHRoZSBvd25lci4KICAgICAgKi8KICAgIGZ1bmN0aW9uIEFpclN3YXBUb2tlbihhZGRyZXNzIF9kZXBsb3llciwgYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX2JhbGFuY2UpCiAgICAgICAgUGF1c2FibGUoKSB7CiAgICAgICAgdHJhbnNmZXJPd25lcnNoaXAoX293bmVyKTsKICAgICAgICBiYWxhbmNlc1tfZGVwbG95ZXJdID0gdG90YWxTdXBwbHkgLSBfYmFsYW5jZTsKICAgICAgICBiYWxhbmNlc1tfb3duZXJdID0gX2JhbGFuY2U7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBfZGVwbG95ZXIsIHRvdGFsU3VwcGx5KTsKICAgICAgICBUcmFuc2ZlcihfZGVwbG95ZXIsIF9vd25lciwgX2JhbGFuY2UpOwogICAgfQoKICAgIC8qKiBAZGV2IFNldHMgYSB0b2tlbiBiYWxhbmNlIHRvIGJlIGxvY2tlZCBieSB0aGUgc2VuZGVyLCBvbiB0aGUgY29uZGl0aW9uCiAgICAgICogdGhhdCB0aGUgYW1vdW50IGlzIGVxdWFsIG9yIGdyZWF0ZXIgdGhhbiB0aGUgcHJldmlvdXMgYW1vdW50LCBvciBpZiB0aGUKICAgICAgKiBwcmV2aW91cyBsb2NrIHRpbWUgaGFzIGV4cGlyZWQuCiAgICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IGJlIGxvY2tlZC4KICAgICAgKi8KICAgIGZ1bmN0aW9uIGxvY2tCYWxhbmNlKHVpbnQyNTYgX3ZhbHVlKSB7CgogICAgICAgIC8vIENoZWNrIGlmIHRoZSBsb2NrIG9uIHByZXZpb3VzbHkgbG9ja2VkIHRva2VucyBpcyBzdGlsbCBhY3RpdmUuCiAgICAgICAgaWYgKGJhbGFuY2VMb2Nrc1ttc2cuc2VuZGVyXS51bmxvY2tEYXRlID4gbm93KSB7CiAgICAgICAgICAgIC8vIE9ubHkgYWxsb3cgY29uZmlybWluZyB0aGUgbG9jayBvciBhZGRpbmcgdG8gaXQuCiAgICAgICAgICAgIHJlcXVpcmUoX3ZhbHVlID49IGJhbGFuY2VMb2Nrc1ttc2cuc2VuZGVyXS5hbW91bnQpOwogICAgICAgIH0KICAgICAgICAvLyBFbnN1cmUgdGhhdCBubyBtb3JlIHRoYW4gdGhlIGJhbGFuY2UgY2FuIGJlIGxvY2tlZC4KICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CgogICAgICAgIC8vIExvY2sgdG9rZW5zIGFuZCBub3RpZnkuCiAgICAgICAgdWludDI1NiBfZXhwaXJ5ID0gbm93ICsgbG9ja2luZ1BlcmlvZDsKICAgICAgICBCYWxhbmNlTG9ja2VkKG1zZy5zZW5kZXIsIGJhbGFuY2VMb2Nrc1ttc2cuc2VuZGVyXS5hbW91bnQsIF92YWx1ZSwgX2V4cGlyeSk7CiAgICAgICAgYmFsYW5jZUxvY2tzW21zZy5zZW5kZXJdID0gQmFsYW5jZUxvY2soX3ZhbHVlLCBfZXhwaXJ5KTsKICAgIH0KCiAgICAvKiogQGRldiBSZXR1cm5zIHRoZSBiYWxhbmNlIHRoYXQgYSBnaXZlbiBhZGRyZXNzIGhhcyBhdmFpbGFibGUgZm9yIHRyYW5zZmVyLgogICAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIHRva2VuIG93bmVyLgogICAgICAqLwogICAgZnVuY3Rpb24gYXZhaWxhYmxlQmFsYW5jZShhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgaWYgKGJhbGFuY2VMb2Nrc1tfb3duZXJdLnVubG9ja0RhdGUgPCBub3cpIHsKICAgICAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYXNzZXJ0KGJhbGFuY2VzW19vd25lcl0gPj0gYmFsYW5jZUxvY2tzW19vd25lcl0uYW1vdW50KTsKICAgICAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl0gLSBiYWxhbmNlTG9ja3NbX293bmVyXS5hbW91bnQ7CiAgICAgICAgfQogICAgfQoKICAgIC8qKiBAZGV2IFNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAsIG9uIHRoZSBjb25kaXRpb24KICAgICAgKiB0aGF0IHRoZXJlIGFyZSBlbm91Z2ggdW5sb2NrZWQgdG9rZW5zIGluIHRoZSBgbXNnLnNlbmRlcmAgYWNjb3VudC4KICAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQuCiAgICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkLgogICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90LgogICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgICAgIG9ubHlBZnRlcihiZWNvbWVzVHJhbnNmZXJhYmxlKSB3aGVuTm90UGF1c2VkCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShhdmFpbGFibGVCYWxhbmNlKG1zZy5zZW5kZXIpID49IF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKiogQGRldiBTZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uCiAgICAgICogdGhhdCB0aGVyZSBhcmUgZW5vdWdoIHVubG9ja2VkIHRva2VucyBpbiB0aGUgYF9mcm9tYCBhY2NvdW50LgogICAgICAqIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyLgogICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudC4KICAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQuCiAgICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QuCiAgICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgICAgIG9ubHlBZnRlck9yT3duZXIoYmVjb21lc1RyYW5zZmVyYWJsZSwgX2Zyb20pIHdoZW5Ob3RQYXVzZWQKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGF2YWlsYWJsZUJhbGFuY2UoX2Zyb20pID49IF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQp9'.
	

]
