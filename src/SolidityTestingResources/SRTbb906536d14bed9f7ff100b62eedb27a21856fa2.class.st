Class {
	#name : #SRTbb906536d14bed9f7ff100b62eedb27a21856fa2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbb906536d14bed9f7ff100b62eedb27a21856fa2 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgoKCgoKLy8vIEBkZXYgQmFzZSBjb250cmFjdCBmb3IgYWxsIEV0aGVybmF1dHMgY29udHJhY3RzIGhvbGRpbmcgZ2xvYmFsIGNvbnN0YW50cyBhbmQgZnVuY3Rpb25zLgpjb250cmFjdCBFdGhlcm5hdXRzQmFzZSB7CgogICAgLyoqKiBDT05TVEFOVFMgVVNFRCBBQ1JPU1MgQ09OVFJBQ1RTICoqKi8KCiAgICAvLy8gQGRldiBVc2VkIGJ5IGFsbCBjb250cmFjdHMgdGhhdCBpbnRlcmZhY2VzIHdpdGggRXRoZXJuYXV0cwogICAgLy8vICAgICAgVGhlIEVSQy0xNjUgaW50ZXJmYWNlIHNpZ25hdHVyZSBmb3IgRVJDLTcyMS4KICAgIC8vLyAgUmVmOiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTY1CiAgICAvLy8gIFJlZjogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzcyMQogICAgYnl0ZXM0IGNvbnN0YW50IEludGVyZmFjZVNpZ25hdHVyZV9FUkM3MjEgPQogICAgYnl0ZXM0KGtlY2NhazI1NignbmFtZSgpJykpIF4KICAgIGJ5dGVzNChrZWNjYWsyNTYoJ3N5bWJvbCgpJykpIF4KICAgIGJ5dGVzNChrZWNjYWsyNTYoJ3RvdGFsU3VwcGx5KCknKSkgXgogICAgYnl0ZXM0KGtlY2NhazI1NignYmFsYW5jZU9mKGFkZHJlc3MpJykpIF4KICAgIGJ5dGVzNChrZWNjYWsyNTYoJ293bmVyT2YodWludDI1NiknKSkgXgogICAgYnl0ZXM0KGtlY2NhazI1NignYXBwcm92ZShhZGRyZXNzLHVpbnQyNTYpJykpIF4KICAgIGJ5dGVzNChrZWNjYWsyNTYoJ3RyYW5zZmVyKGFkZHJlc3MsdWludDI1NiknKSkgXgogICAgYnl0ZXM0KGtlY2NhazI1NigndHJhbnNmZXJGcm9tKGFkZHJlc3MsYWRkcmVzcyx1aW50MjU2KScpKSBeCiAgICBieXRlczQoa2VjY2FrMjU2KCd0YWtlT3duZXJzaGlwKHVpbnQyNTYpJykpIF4KICAgIGJ5dGVzNChrZWNjYWsyNTYoJ3Rva2Vuc09mT3duZXIoYWRkcmVzcyknKSkgXgogICAgYnl0ZXM0KGtlY2NhazI1NigndG9rZW5NZXRhZGF0YSh1aW50MjU2LHN0cmluZyknKSk7CgogICAgLy8vIEBkZXYgZHVlIHNvbGlkaXR5IGxpbWl0YXRpb24gd2UgY2Fubm90IHJldHVybiBkeW5hbWljIGFycmF5IGZyb20gbWV0aG9kcwogICAgLy8vIHNvIGl0IGNyZWF0ZXMgaW5jb21wYWJpbGl0eSBiZXR3ZWVuIGZ1bmN0aW9ucyBhY3Jvc3MgZGlmZmVyZW50IGNvbnRyYWN0cwogICAgdWludDggcHVibGljIGNvbnN0YW50IFNUQVRTX1NJWkUgPSAxMDsKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBTSElQX1NMT1RTID0gNTsKCiAgICAvLyBQb3NzaWJsZSBzdGF0ZSBvZiBhbnkgYXNzZXQKICAgIGVudW0gQXNzZXRTdGF0ZSB7IEF2YWlsYWJsZSwgVXBGb3JMZWFzZSwgVXNlZCB9CgogICAgLy8gUG9zc2libGUgc3RhdGUgb2YgYW55IGFzc2V0CiAgICAvLyBOb3RWYWxpZCBpcyB0byBhdm9pZCAwIGluIHBsYWNlcyB3aGVyZSBjYXRlZ29yeSBtdXN0IGJlIGJpZ2dlciB0aGFuIHplcm8KICAgIGVudW0gQXNzZXRDYXRlZ29yeSB7IE5vdFZhbGlkLCBTZWN0b3IsIE1hbnVmYWN0dXJlciwgU2hpcCwgT2JqZWN0LCBGYWN0b3J5LCBDcmV3TWVtYmVyIH0KCiAgICAvLy8gQGRldiBTZWN0b3Igc3RhdHMKICAgIGVudW0gU2hpcFN0YXRzIHtMZXZlbCwgQXR0YWNrLCBEZWZlbnNlLCBTcGVlZCwgUmFuZ2UsIEx1Y2t9CiAgICAvLy8gQG5vdGljZSBQb3NzaWJsZSBhdHRyaWJ1dGVzIGZvciBlYWNoIGFzc2V0CiAgICAvLy8gMDAwMDAwMDEgLSBTZWVkZWQgLSBPZmZlcmVkIHRvIHRoZSBlY29ub215IGJ5IHVzLCB0aGUgZGV2ZWxvcGVycy4gUG90ZW50aWFsbHkgYXQgcmVndWxhciBpbnRlcnZhbHMuCiAgICAvLy8gMDAwMDAwMTAgLSBQcm9kdWNpYmxlIC0gUHJvZHVjdCBvZiBhIGZhY3RvcnkgYW5kL29yIGZhY3RvcnkgY29udHJhY3QuCiAgICAvLy8gMDAwMDAxMDAgLSBFeHBsb3JhYmxlLSBQcm9kdWN0IG9mIGV4cGxvcmF0aW9uLgogICAgLy8vIDAwMDAxMDAwIC0gTGVhc2FibGUgLSBDYW4gYmUgcmVudGVkIHRvIG90aGVyIHVzZXJzIGFuZCB3aWxsIHJldHVybiB0byB0aGUgb3JpZ2luYWwgb3duZXIgb25jZSB0aGUgYWN0aW9uIGlzIGNvbXBsZXRlLgogICAgLy8vIDAwMDEwMDAwIC0gUGVybWFuZW50IC0gQ2Fubm90IGJlIHJlbW92ZWQsIGFsd2F5cyBvd25lZCBieSBhIHVzZXIuCiAgICAvLy8gMDAxMDAwMDAgLSBDb25zdW1hYmxlIC0gRGVzdHJveWVkIGFmdGVyIE4gZXhwbG9yYXRpb24gZXhwZWRpdGlvbnMuCiAgICAvLy8gMDEwMDAwMDAgLSBUcmFkYWJsZSAtIEJ1eWFibGUgYW5kIHNlbGxhYmxlIG9uIHRoZSBtYXJrZXQuCiAgICAvLy8gMTAwMDAwMDAgLSBIb3QgUG90YXRvIC0gQXV0b21hdGljYWxseSBnZXRzIHB1dCB1cCBmb3Igc2FsZSBhZnRlciBhY3F1aXJpbmcuCiAgICBieXRlczIgcHVibGljIEFUVFJfU0VFREVEICAgICA9IGJ5dGVzMigyKiowKTsKICAgIGJ5dGVzMiBwdWJsaWMgQVRUUl9QUk9EVUNJQkxFID0gYnl0ZXMyKDIqKjEpOwogICAgYnl0ZXMyIHB1YmxpYyBBVFRSX0VYUExPUkFCTEUgPSBieXRlczIoMioqMik7CiAgICBieXRlczIgcHVibGljIEFUVFJfTEVBU0FCTEUgICA9IGJ5dGVzMigyKiozKTsKICAgIGJ5dGVzMiBwdWJsaWMgQVRUUl9QRVJNQU5FTlQgID0gYnl0ZXMyKDIqKjQpOwogICAgYnl0ZXMyIHB1YmxpYyBBVFRSX0NPTlNVTUFCTEUgPSBieXRlczIoMioqNSk7CiAgICBieXRlczIgcHVibGljIEFUVFJfVFJBREFCTEUgICA9IGJ5dGVzMigyKio2KTsKICAgIGJ5dGVzMiBwdWJsaWMgQVRUUl9HT0xERU5HT09TRSA9IGJ5dGVzMigyKio3KTsKfQoKLy8vIEB0aXRsZSBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vYXhpb216ZW4vY3J5cHRva2l0dGllcy1ib3VudHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzL0tpdHR5QWNjZXNzQ29udHJvbC5zb2wKLy8vIEBub3RpY2UgVGhpcyBjb250cmFjdCBtYW5hZ2VzIHRoZSB2YXJpb3VzIGFkZHJlc3NlcyBhbmQgY29uc3RyYWludHMgZm9yIG9wZXJhdGlvbnMKLy8gICAgICAgICAgdGhhdCBjYW4gYmUgZXhlY3V0ZWQgb25seSBieSBzcGVjaWZpYyByb2xlcy4gTmFtZWx5IENFTyBhbmQgQ1RPLiBpdCBhbHNvIGluY2x1ZGVzIHBhdXNhYmxlIHBhdHRlcm4uCmNvbnRyYWN0IEV0aGVybmF1dHNBY2Nlc3NDb250cm9sIGlzIEV0aGVybmF1dHNCYXNlIHsKCiAgICAvLyBUaGlzIGZhY2V0IGNvbnRyb2xzIGFjY2VzcyBjb250cm9sIGZvciBFdGhlcm5hdXRzLgogICAgLy8gQWxsIHJvbGVzIGhhdmUgc2FtZSByZXNwb25zaWJpbGl0aWVzIGFuZCByaWdodHMsIGJ1dCB0aGVyZSBpcyBzbGlnaHQgZGlmZmVyZW5jZXMgYmV0d2VlbiB0aGVtOgogICAgLy8KICAgIC8vICAgICAtIFRoZSBDRU86IFRoZSBDRU8gY2FuIHJlYXNzaWduIG90aGVyIHJvbGVzIGFuZCBvbmx5IHJvbGUgdGhhdCBjYW4gdW5wYXVzZSB0aGUgc21hcnQgY29udHJhY3QuCiAgICAvLyAgICAgICBJdCBpcyBpbml0aWFsbHkgc2V0IHRvIHRoZSBhZGRyZXNzIHRoYXQgY3JlYXRlZCB0aGUgc21hcnQgY29udHJhY3QuCiAgICAvLwogICAgLy8gICAgIC0gVGhlIENUTzogVGhlIENUTyBjYW4gY2hhbmdlIGNvbnRyYWN0IGFkZHJlc3MsIG9yYWNsZSBhZGRyZXNzIGFuZCBwbGFuIGZvciB1cGdyYWRlcy4KICAgIC8vCiAgICAvLyAgICAgLSBUaGUgQ09POiBUaGUgQ09PIGNhbiBjaGFuZ2UgY29udHJhY3QgYWRkcmVzcyBhbmQgYWRkIGNyZWF0ZSBhc3NldHMuCiAgICAvLwogICAgLy8vIEBkZXYgRW1pdGVkIHdoZW4gY29udHJhY3QgaXMgdXBncmFkZWQgLSBTZWUgUkVBRE1FLm1kIGZvciB1cGRncmFkZSBwbGFuCiAgICAvLy8gQHBhcmFtIG5ld0NvbnRyYWN0IGFkZHJlc3MgcG9pbnRpbmcgdG8gbmV3IGNvbnRyYWN0CiAgICBldmVudCBDb250cmFjdFVwZ3JhZGUoYWRkcmVzcyBuZXdDb250cmFjdCk7CgogICAgLy8gVGhlIGFkZHJlc3NlcyBvZiB0aGUgYWNjb3VudHMgKG9yIGNvbnRyYWN0cykgdGhhdCBjYW4gZXhlY3V0ZSBhY3Rpb25zIHdpdGhpbiBlYWNoIHJvbGVzLgogICAgYWRkcmVzcyBwdWJsaWMgY2VvQWRkcmVzczsKICAgIGFkZHJlc3MgcHVibGljIGN0b0FkZHJlc3M7CiAgICBhZGRyZXNzIHB1YmxpYyBjb29BZGRyZXNzOwogICAgYWRkcmVzcyBwdWJsaWMgb3JhY2xlQWRkcmVzczsKCiAgICAvLyBAZGV2IEtlZXBzIHRyYWNrIHdoZXRoZXIgdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4gV2hlbiB0aGF0IGlzIHRydWUsIG1vc3QgYWN0aW9ucyBhcmUgYmxvY2tlZAogICAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgogICAgLy8vIEBkZXYgQWNjZXNzIG1vZGlmaWVyIGZvciBDRU8tb25seSBmdW5jdGlvbmFsaXR5CiAgICBtb2RpZmllciBvbmx5Q0VPKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjZW9BZGRyZXNzKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLyBAZGV2IEFjY2VzcyBtb2RpZmllciBmb3IgQ1RPLW9ubHkgZnVuY3Rpb25hbGl0eQogICAgbW9kaWZpZXIgb25seUNUTygpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY3RvQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBBY2Nlc3MgbW9kaWZpZXIgZm9yIENUTy1vbmx5IGZ1bmN0aW9uYWxpdHkKICAgIG1vZGlmaWVyIG9ubHlPcmFjbGUoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG9yYWNsZUFkZHJlc3MpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUNMZXZlbCgpIHsKICAgICAgICByZXF1aXJlKAogICAgICAgICAgICBtc2cuc2VuZGVyID09IGNlb0FkZHJlc3MgfHwKICAgICAgICAgICAgbXNnLnNlbmRlciA9PSBjdG9BZGRyZXNzIHx8CiAgICAgICAgICAgIG1zZy5zZW5kZXIgPT0gY29vQWRkcmVzcwogICAgICAgICk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBBc3NpZ25zIGEgbmV3IGFkZHJlc3MgdG8gYWN0IGFzIHRoZSBDRU8uIE9ubHkgYXZhaWxhYmxlIHRvIHRoZSBjdXJyZW50IENFTy4KICAgIC8vLyBAcGFyYW0gX25ld0NFTyBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IENFTwogICAgZnVuY3Rpb24gc2V0Q0VPKGFkZHJlc3MgX25ld0NFTykgZXh0ZXJuYWwgb25seUNFTyB7CiAgICAgICAgcmVxdWlyZShfbmV3Q0VPICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICBjZW9BZGRyZXNzID0gX25ld0NFTzsKICAgIH0KCiAgICAvLy8gQGRldiBBc3NpZ25zIGEgbmV3IGFkZHJlc3MgdG8gYWN0IGFzIHRoZSBDVE8uIE9ubHkgYXZhaWxhYmxlIHRvIHRoZSBjdXJyZW50IENUTyBvciBDRU8uCiAgICAvLy8gQHBhcmFtIF9uZXdDVE8gVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBDVE8KICAgIGZ1bmN0aW9uIHNldENUTyhhZGRyZXNzIF9uZXdDVE8pIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKAogICAgICAgICAgICBtc2cuc2VuZGVyID09IGNlb0FkZHJlc3MgfHwKICAgICAgICAgICAgbXNnLnNlbmRlciA9PSBjdG9BZGRyZXNzCiAgICAgICAgKTsKICAgICAgICByZXF1aXJlKF9uZXdDVE8gIT0gYWRkcmVzcygwKSk7CgogICAgICAgIGN0b0FkZHJlc3MgPSBfbmV3Q1RPOwogICAgfQoKICAgIC8vLyBAZGV2IEFzc2lnbnMgYSBuZXcgYWRkcmVzcyB0byBhY3QgYXMgdGhlIENPTy4gT25seSBhdmFpbGFibGUgdG8gdGhlIGN1cnJlbnQgQ09PIG9yIENFTy4KICAgIC8vLyBAcGFyYW0gX25ld0NPTyBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IENPTwogICAgZnVuY3Rpb24gc2V0Q09PKGFkZHJlc3MgX25ld0NPTykgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyB8fAogICAgICAgICAgICBtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MKICAgICAgICApOwogICAgICAgIHJlcXVpcmUoX25ld0NPTyAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgY29vQWRkcmVzcyA9IF9uZXdDT087CiAgICB9CgogICAgLy8vIEBkZXYgQXNzaWducyBhIG5ldyBhZGRyZXNzIHRvIGFjdCBhcyBvcmFjbGUuCiAgICAvLy8gQHBhcmFtIF9uZXdPcmFjbGUgVGhlIGFkZHJlc3Mgb2Ygb3JhY2xlCiAgICBmdW5jdGlvbiBzZXRPcmFjbGUoYWRkcmVzcyBfbmV3T3JhY2xlKSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGN0b0FkZHJlc3MpOwogICAgICAgIHJlcXVpcmUoX25ld09yYWNsZSAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgb3JhY2xlQWRkcmVzcyA9IF9uZXdPcmFjbGU7CiAgICB9CgogICAgLyoqKiBQYXVzYWJsZSBmdW5jdGlvbmFsaXR5IGFkYXB0ZWQgZnJvbSBPcGVuWmVwcGVsaW4gKioqLwoKICAgIC8vLyBAZGV2IE1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgcGF1c2VkCiAgICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBNb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgSVMgcGF1c2VkCiAgICBtb2RpZmllciB3aGVuUGF1c2VkIHsKICAgICAgICByZXF1aXJlKHBhdXNlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBDYWxsZWQgYnkgYW55ICJDLWxldmVsIiByb2xlIHRvIHBhdXNlIHRoZSBjb250cmFjdC4gVXNlZCBvbmx5IHdoZW4KICAgIC8vLyAgYSBidWcgb3IgZXhwbG9pdCBpcyBkZXRlY3RlZCBhbmQgd2UgbmVlZCB0byBsaW1pdCBkYW1hZ2UuCiAgICBmdW5jdGlvbiBwYXVzZSgpIGV4dGVybmFsIG9ubHlDTGV2ZWwgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgcGF1c2VkID0gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBVbnBhdXNlcyB0aGUgc21hcnQgY29udHJhY3QuIENhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgQ0VPLCBzaW5jZQogICAgLy8vICBvbmUgcmVhc29uIHdlIG1heSBwYXVzZSB0aGUgY29udHJhY3QgaXMgd2hlbiBDVE8gYWNjb3VudCBpcyBjb21wcm9taXNlZC4KICAgIC8vLyBAbm90aWNlIFRoaXMgaXMgcHVibGljIHJhdGhlciB0aGFuIGV4dGVybmFsIHNvIGl0IGNhbiBiZSBjYWxsZWQgYnkKICAgIC8vLyAgZGVyaXZlZCBjb250cmFjdHMuCiAgICBmdW5jdGlvbiB1bnBhdXNlKCkgcHVibGljIG9ubHlDRU8gd2hlblBhdXNlZCB7CiAgICAgICAgLy8gY2FuJ3QgdW5wYXVzZSBpZiBjb250cmFjdCB3YXMgdXBncmFkZWQKICAgICAgICBwYXVzZWQgPSBmYWxzZTsKICAgIH0KCn0KCi8vLyBAdGl0bGUgU3RvcmFnZSBjb250cmFjdCBmb3IgRXRoZXJuYXV0cyBEYXRhLiBDb21tb24gc3RydWN0cyBhbmQgY29uc3RhbnRzLgovLy8gQG5vdGljZSBUaGlzIGlzIG91ciBtYWluIGRhdGEgc3RvcmFnZSwgY29uc3RhbnRzIGFuZCBkYXRhIHR5cGVzLCBwbHVzCi8vICAgICAgICAgIGludGVybmFsIGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgdGhlIGFzc2V0cy4gSXQgaXMgaXNvbGF0ZWQgYW5kIG9ubHkgaW50ZXJmYWNlIHdpdGgKLy8gICAgICAgICAgYSBsaXN0IG9mIGdyYW50ZWQgY29udHJhY3RzIGRlZmluZWQgYnkgQ1RPCi8vLyBAYXV0aG9yIEV0aGVybmF1dHMgLSBGZXJuYW5kbyBQYXVlcgpjb250cmFjdCBFdGhlcm5hdXRzU3RvcmFnZSBpcyBFdGhlcm5hdXRzQWNjZXNzQ29udHJvbCB7CgogICAgZnVuY3Rpb24gRXRoZXJuYXV0c1N0b3JhZ2UoKSBwdWJsaWMgewogICAgICAgIC8vIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdCBpcyB0aGUgaW5pdGlhbCBDRU8KICAgICAgICBjZW9BZGRyZXNzID0gbXNnLnNlbmRlcjsKCiAgICAgICAgLy8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0IGlzIHRoZSBpbml0aWFsIENUTyBhcyB3ZWxsCiAgICAgICAgY3RvQWRkcmVzcyA9IG1zZy5zZW5kZXI7CgogICAgICAgIC8vIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdCBpcyB0aGUgaW5pdGlhbCBDVE8gYXMgd2VsbAogICAgICAgIGNvb0FkZHJlc3MgPSBtc2cuc2VuZGVyOwoKICAgICAgICAvLyB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QgaXMgdGhlIGluaXRpYWwgT3JhY2xlIGFzIHdlbGwKICAgICAgICBvcmFjbGVBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBObyB0aXBwaW5nIQogICAgLy8vIEBkZXYgUmVqZWN0IGFsbCBFdGhlciBmcm9tIGJlaW5nIHNlbnQgaGVyZS4gSG9wZWZ1bGx5LCB3ZSBjYW4gcHJldmVudCB1c2VyIGFjY2lkZW50cy4KICAgIGZ1bmN0aW9uKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkZHJlc3ModGhpcykpOwogICAgfQoKICAgIC8qKiogTWFwcGluZyBmb3IgQ29udHJhY3RzIHdpdGggZ3JhbnRlZCBwZXJtaXNzaW9uICoqKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGNvbnRyYWN0c0dyYW50ZWRBY2Nlc3M7CgogICAgLy8vIEBkZXYgZ3JhbnQgYWNjZXNzIGZvciBhIGNvbnRyYWN0IHRvIGludGVyYWN0IHdpdGggdGhpcyBjb250cmFjdC4KICAgIC8vLyBAcGFyYW0gX3YyQWRkcmVzcyBUaGUgY29udHJhY3QgYWRkcmVzcyB0byBncmFudCBhY2Nlc3MKICAgIGZ1bmN0aW9uIGdyYW50QWNjZXNzKGFkZHJlc3MgX3YyQWRkcmVzcykgcHVibGljIG9ubHlDVE8gewogICAgICAgIC8vIFNlZSBSRUFETUUubWQgZm9yIHVwZGdyYWRlIHBsYW4KICAgICAgICBjb250cmFjdHNHcmFudGVkQWNjZXNzW192MkFkZHJlc3NdID0gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiByZW1vdmUgYWNjZXNzIGZyb20gYSBjb250cmFjdCB0byBpbnRlcmFjdCB3aXRoIHRoaXMgY29udHJhY3QuCiAgICAvLy8gQHBhcmFtIF92MkFkZHJlc3MgVGhlIGNvbnRyYWN0IGFkZHJlc3MgdG8gYmUgcmVtb3ZlZAogICAgZnVuY3Rpb24gcmVtb3ZlQWNjZXNzKGFkZHJlc3MgX3YyQWRkcmVzcykgcHVibGljIG9ubHlDVE8gewogICAgICAgIC8vIFNlZSBSRUFETUUubWQgZm9yIHVwZGdyYWRlIHBsYW4KICAgICAgICBkZWxldGUgY29udHJhY3RzR3JhbnRlZEFjY2Vzc1tfdjJBZGRyZXNzXTsKICAgIH0KCiAgICAvLy8gQGRldiBPbmx5IGFsbG93IHBlcm1pdHRlZCBjb250cmFjdHMgdG8gaW50ZXJhY3Qgd2l0aCB0aGlzIGNvbnRyYWN0CiAgICBtb2RpZmllciBvbmx5R3JhbnRlZENvbnRyYWN0cygpIHsKICAgICAgICByZXF1aXJlKGNvbnRyYWN0c0dyYW50ZWRBY2Nlc3NbbXNnLnNlbmRlcl0gPT0gdHJ1ZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciB2YWxpZEFzc2V0KHVpbnQyNTYgX3Rva2VuSWQpIHsKICAgICAgICByZXF1aXJlKGFzc2V0c1tfdG9rZW5JZF0uSUQgPiAwKTsKICAgICAgICBfOwogICAgfQogICAgLyoqKiBEQVRBIFRZUEVTICoqKi8KCiAgICAvLy8gQGRldiBUaGUgbWFpbiBFdGhlcm5hdXRzIGFzc2V0IHN0cnVjdC4gRXZlcnkgYXNzZXQgaW4gRXRoZXJuYXV0cyBpcyByZXByZXNlbnRlZCBieSBhIGNvcHkKICAgIC8vLyAgb2YgdGhpcyBzdHJ1Y3R1cmUuIE5vdGUgdGhhdCB0aGUgb3JkZXIgb2YgdGhlIG1lbWJlcnMgaW4gdGhpcyBzdHJ1Y3R1cmUKICAgIC8vLyAgaXMgaW1wb3J0YW50IGJlY2F1c2Ugb2YgdGhlIGJ5dGUtcGFja2luZyBydWxlcyB1c2VkIGJ5IEV0aGVyZXVtLgogICAgLy8vICBSZWY6IGh0dHA6Ly9zb2xpZGl0eS5yZWFkdGhlZG9jcy5pby9lbi9kZXZlbG9wL21pc2NlbGxhbmVvdXMuaHRtbAogICAgc3RydWN0IEFzc2V0IHsKCiAgICAgICAgLy8gQXNzZXQgSUQgaXMgYSBpZGVudGlmaWVyIGZvciBsb29rIGFuZCBmZWVsIGluIGZyb250ZW5kCiAgICAgICAgdWludDE2IElEOwoKICAgICAgICAvLyBDYXRlZ29yeSA9IFNlY3RvcnMsIE1hbnVmYWN0dXJlcnMsIFNoaXBzLCBPYmplY3RzIChVcGdyYWRlcy9NaXNjKSwgRmFjdG9yaWVzIGFuZCBDcmV3TWVtYmVycwogICAgICAgIHVpbnQ4IGNhdGVnb3J5OwoKICAgICAgICAvLyBUaGUgU3RhdGUgb2YgYW4gYXNzZXQ6IEF2YWlsYWJsZSwgT24gc2FsZSwgVXAgZm9yIGxlYXNlLCBDb29sZG93biwgRXhwbG9yaW5nCiAgICAgICAgdWludDggc3RhdGU7CgogICAgICAgIC8vIEF0dHJpYnV0ZXMKICAgICAgICAvLyBieXRlIHBvcyAtIERlZmluaXRpb24KICAgICAgICAvLyAwMDAwMDAwMSAtIFNlZWRlZCAtIE9mZmVyZWQgdG8gdGhlIGVjb25vbXkgYnkgdXMsIHRoZSBkZXZlbG9wZXJzLiBQb3RlbnRpYWxseSBhdCByZWd1bGFyIGludGVydmFscy4KICAgICAgICAvLyAwMDAwMDAxMCAtIFByb2R1Y2libGUgLSBQcm9kdWN0IG9mIGEgZmFjdG9yeSBhbmQvb3IgZmFjdG9yeSBjb250cmFjdC4KICAgICAgICAvLyAwMDAwMDEwMCAtIEV4cGxvcmFibGUtIFByb2R1Y3Qgb2YgZXhwbG9yYXRpb24uCiAgICAgICAgLy8gMDAwMDEwMDAgLSBMZWFzYWJsZSAtIENhbiBiZSByZW50ZWQgdG8gb3RoZXIgdXNlcnMgYW5kIHdpbGwgcmV0dXJuIHRvIHRoZSBvcmlnaW5hbCBvd25lciBvbmNlIHRoZSBhY3Rpb24gaXMgY29tcGxldGUuCiAgICAgICAgLy8gMDAwMTAwMDAgLSBQZXJtYW5lbnQgLSBDYW5ub3QgYmUgcmVtb3ZlZCwgYWx3YXlzIG93bmVkIGJ5IGEgdXNlci4KICAgICAgICAvLyAwMDEwMDAwMCAtIENvbnN1bWFibGUgLSBEZXN0cm95ZWQgYWZ0ZXIgTiBleHBsb3JhdGlvbiBleHBlZGl0aW9ucy4KICAgICAgICAvLyAwMTAwMDAwMCAtIFRyYWRhYmxlIC0gQnV5YWJsZSBhbmQgc2VsbGFibGUgb24gdGhlIG1hcmtldC4KICAgICAgICAvLyAxMDAwMDAwMCAtIEhvdCBQb3RhdG8gLSBBdXRvbWF0aWNhbGx5IGdldHMgcHV0IHVwIGZvciBzYWxlIGFmdGVyIGFjcXVpcmluZy4KICAgICAgICBieXRlczIgYXR0cmlidXRlczsKCiAgICAgICAgLy8gVGhlIHRpbWVzdGFtcCBmcm9tIHRoZSBibG9jayB3aGVuIHRoaXMgYXNzZXQgd2FzIGNyZWF0ZWQuCiAgICAgICAgdWludDY0IGNyZWF0ZWRBdDsKCiAgICAgICAgLy8gVGhlIG1pbmltdW0gdGltZXN0YW1wIGFmdGVyIHdoaWNoIHRoaXMgYXNzZXQgY2FuIGVuZ2FnZSBpbiBleHBsb3JpbmcgYWN0aXZpdGllcyBhZ2Fpbi4KICAgICAgICB1aW50NjQgY29vbGRvd25FbmRCbG9jazsKCiAgICAgICAgLy8gVGhlIEFzc2V0J3Mgc3RhdHMgY2FuIGJlIHVwZ3JhZGVkIG9yIGNoYW5nZWQgYmFzZWQgb24gZXhwbG9yYXRpb24gY29uZGl0aW9ucy4KICAgICAgICAvLyBJdCB3aWxsIGJlIGRlZmluZWQgcGVyIGNoaWxkIGNvbnRyYWN0LCBidXQgYWxsIHN0YXRzIGhhdmUgYSByYW5nZSBmcm9tIDAgdG8gMjU1CiAgICAgICAgLy8gRXhhbXBsZXMKICAgICAgICAvLyAwID0gU2hpcCBMZXZlbAogICAgICAgIC8vIDEgPSBTaGlwIEF0dGFjawogICAgICAgIHVpbnQ4W1NUQVRTX1NJWkVdIHN0YXRzOwoKICAgICAgICAvLyBTZXQgdG8gdGhlIGNvb2xkb3duIHRpbWUgdGhhdCByZXByZXNlbnRzIGV4cGxvcmF0aW9uIGR1cmF0aW9uIGZvciB0aGlzIGFzc2V0LgogICAgICAgIC8vIERlZmluZWQgYnkgYSBzdWNjZXNzZnVsIGV4cGxvcmF0aW9uIGFjdGlvbiwgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoaXMgYXNzZXQgaXMgYWN0aW5nIGFzIHNoaXAgb3IgYSBwYXJ0LgogICAgICAgIHVpbnQyNTYgY29vbGRvd247CgogICAgICAgIC8vIGEgcmVmZXJlbmNlIHRvIGEgc3VwZXIgYXNzZXQgdGhhdCBtYW51ZmFjdHVyZWQgdGhlIGFzc2V0CiAgICAgICAgdWludDI1NiBidWlsdEJ5OwogICAgfQoKICAgIC8qKiogQ09OU1RBTlRTICoqKi8KCiAgICAvLyBAZGV2IFNhbml0eSBjaGVjayB0aGF0IGFsbG93cyB1cyB0byBlbnN1cmUgdGhhdCB3ZSBhcmUgcG9pbnRpbmcgdG8gdGhlCiAgICAvLyAgcmlnaHQgc3RvcmFnZSBjb250cmFjdCBpbiBvdXIgRXRoZXJuYXV0c0xvZ2ljKGFkZHJlc3MgX0NTdG9yYWdlQWRkcmVzcykgY2FsbC4KICAgIGJvb2wgcHVibGljIGlzRXRoZXJuYXV0c1N0b3JhZ2UgPSB0cnVlOwoKICAgIC8qKiogU1RPUkFHRSAqKiovCgogICAgLy8vIEBkZXYgQW4gYXJyYXkgY29udGFpbmluZyB0aGUgQXNzZXQgc3RydWN0IGZvciBhbGwgYXNzZXRzIGluIGV4aXN0ZW5jZS4gVGhlIEFzc2V0IFVuaXF1ZUlkCiAgICAvLy8gIG9mIGVhY2ggYXNzZXQgaXMgYWN0dWFsbHkgYW4gaW5kZXggaW50byB0aGlzIGFycmF5LgogICAgQXNzZXRbXSBwdWJsaWMgYXNzZXRzOwoKICAgIC8vLyBAZGV2IEEgbWFwcGluZyBmcm9tIEFzc2V0IFVuaXF1ZUlEcyB0byB0aGUgcHJpY2Ugb2YgdGhlIHRva2VuLgogICAgLy8vIHN0b3JlZCBvdXRzaWRlIEFzc2V0IFN0cnVjdCB0byBzYXZlIGdhcywgYmVjYXVzZSBwcmljZSBjYW4gY2hhbmdlIGZyZXF1ZW50bHkKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgaW50ZXJuYWwgYXNzZXRJbmRleFRvUHJpY2U7CgogICAgLy8vIEBkZXYgQSBtYXBwaW5nIGZyb20gYXNzZXQgVW5pcXVlSURzIHRvIHRoZSBhZGRyZXNzIHRoYXQgb3ducyB0aGVtLiBBbGwgYXNzZXRzIGhhdmUgc29tZSB2YWxpZCBvd25lciBhZGRyZXNzLgogICAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBpbnRlcm5hbCBhc3NldEluZGV4VG9Pd25lcjsKCiAgICAvLyBAZGV2IEEgbWFwcGluZyBmcm9tIG93bmVyIGFkZHJlc3MgdG8gY291bnQgb2YgdG9rZW5zIHRoYXQgYWRkcmVzcyBvd25zLgogICAgLy8gIFVzZWQgaW50ZXJuYWxseSBpbnNpZGUgYmFsYW5jZU9mKCkgdG8gcmVzb2x2ZSBvd25lcnNoaXAgY291bnQuCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIG93bmVyc2hpcFRva2VuQ291bnQ7CgogICAgLy8vIEBkZXYgQSBtYXBwaW5nIGZyb20gQXNzZXRVbmlxdWVJRHMgdG8gYW4gYWRkcmVzcyB0aGF0IGhhcyBiZWVuIGFwcHJvdmVkIHRvIGNhbGwKICAgIC8vLyAgdHJhbnNmZXJGcm9tKCkuIEVhY2ggQXNzZXQgY2FuIG9ubHkgaGF2ZSBvbmUgYXBwcm92ZWQgYWRkcmVzcyBmb3IgdHJhbnNmZXIKICAgIC8vLyAgYXQgYW55IHRpbWUuIEEgemVybyB2YWx1ZSBtZWFucyBubyBhcHByb3ZhbCBpcyBvdXRzdGFuZGluZy4KICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgaW50ZXJuYWwgYXNzZXRJbmRleFRvQXBwcm92ZWQ7CgoKICAgIC8qKiogU0VUVEVSUyAqKiovCgogICAgLy8vIEBkZXYgc2V0IG5ldyBhc3NldCBwcmljZQogICAgLy8vIEBwYXJhbSBfdG9rZW5JZCAgYXNzZXQgVW5pcXVlSWQKICAgIC8vLyBAcGFyYW0gX3ByaWNlICAgIGFzc2V0IHByaWNlCiAgICBmdW5jdGlvbiBzZXRQcmljZSh1aW50MjU2IF90b2tlbklkLCB1aW50MjU2IF9wcmljZSkgcHVibGljIG9ubHlHcmFudGVkQ29udHJhY3RzIHsKICAgICAgICBhc3NldEluZGV4VG9QcmljZVtfdG9rZW5JZF0gPSBfcHJpY2U7CiAgICB9CgogICAgLy8vIEBkZXYgTWFyayB0cmFuc2ZlciBhcyBhcHByb3ZlZAogICAgLy8vIEBwYXJhbSBfdG9rZW5JZCAgYXNzZXQgVW5pcXVlSWQKICAgIC8vLyBAcGFyYW0gX2FwcHJvdmVkIGFkZHJlc3MgYXBwcm92ZWQKICAgIGZ1bmN0aW9uIGFwcHJvdmUodWludDI1NiBfdG9rZW5JZCwgYWRkcmVzcyBfYXBwcm92ZWQpIHB1YmxpYyBvbmx5R3JhbnRlZENvbnRyYWN0cyB7CiAgICAgICAgYXNzZXRJbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdID0gX2FwcHJvdmVkOwogICAgfQoKICAgIC8vLyBAZGV2IEFzc2lnbnMgb3duZXJzaGlwIG9mIGEgc3BlY2lmaWMgQXNzZXQgdG8gYW4gYWRkcmVzcy4KICAgIC8vLyBAcGFyYW0gX2Zyb20gICAgY3VycmVudCBvd25lciBhZGRyZXNzCiAgICAvLy8gQHBhcmFtIF90byAgICAgIG5ldyBvd25lciBhZGRyZXNzCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIGFzc2V0IFVuaXF1ZUlkCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIG9ubHlHcmFudGVkQ29udHJhY3RzIHsKICAgICAgICAvLyBTaW5jZSB0aGUgbnVtYmVyIG9mIGFzc2V0cyBpcyBjYXBwZWQgdG8gMl4zMiB3ZSBjYW4ndCBvdmVyZmxvdyB0aGlzCiAgICAgICAgb3duZXJzaGlwVG9rZW5Db3VudFtfdG9dKys7CiAgICAgICAgLy8gdHJhbnNmZXIgb3duZXJzaGlwCiAgICAgICAgYXNzZXRJbmRleFRvT3duZXJbX3Rva2VuSWRdID0gX3RvOwogICAgICAgIC8vIFdoZW4gY3JlYXRpbmcgbmV3IGFzc2V0cyBfZnJvbSBpcyAweDAsIGJ1dCB3ZSBjYW4ndCBhY2NvdW50IHRoYXQgYWRkcmVzcy4KICAgICAgICBpZiAoX2Zyb20gIT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICBvd25lcnNoaXBUb2tlbkNvdW50W19mcm9tXS0tOwogICAgICAgICAgICAvLyBjbGVhciBhbnkgcHJldmlvdXNseSBhcHByb3ZlZCBvd25lcnNoaXAgZXhjaGFuZ2UKICAgICAgICAgICAgZGVsZXRlIGFzc2V0SW5kZXhUb0FwcHJvdmVkW190b2tlbklkXTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIEBkZXYgQSBwdWJsaWMgbWV0aG9kIHRoYXQgY3JlYXRlcyBhIG5ldyBhc3NldCBhbmQgc3RvcmVzIGl0LiBUaGlzCiAgICAvLy8gIG1ldGhvZCBkb2VzIGJhc2ljIGNoZWNraW5nIGFuZCBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSBvdGhlciBjb250cmFjdCB3aGVuIHRoZQogICAgLy8vICBpbnB1dCBkYXRhIGlzIGtub3duIHRvIGJlIHZhbGlkLiBXaWxsIE5PVCBnZW5lcmF0ZSBhbnkgZXZlbnQgaXQgaXMgZGVsZWdhdGUgdG8gYnVzaW5lc3MgbG9naWMgY29udHJhY3RzLgogICAgLy8vIEBwYXJhbSBfY3JlYXRvclRva2VuSUQgVGhlIGFzc2V0IHdobyBpcyBmYXRoZXIgb2YgdGhpcyBhc3NldAogICAgLy8vIEBwYXJhbSBfb3duZXIgRmlyc3Qgb3duZXIgb2YgdGhpcyBhc3NldAogICAgLy8vIEBwYXJhbSBfcHJpY2UgYXNzZXQgcHJpY2UKICAgIC8vLyBAcGFyYW0gX0lEIGFzc2V0IElECiAgICAvLy8gQHBhcmFtIF9jYXRlZ29yeSBzZWUgQXNzZXQgU3RydWN0IGRlc2NyaXB0aW9uCiAgICAvLy8gQHBhcmFtIF9zdGF0ZSBzZWUgQXNzZXQgU3RydWN0IGRlc2NyaXB0aW9uCiAgICAvLy8gQHBhcmFtIF9hdHRyaWJ1dGVzIHNlZSBBc3NldCBTdHJ1Y3QgZGVzY3JpcHRpb24KICAgIC8vLyBAcGFyYW0gX3N0YXRzIHNlZSBBc3NldCBTdHJ1Y3QgZGVzY3JpcHRpb24KICAgIGZ1bmN0aW9uIGNyZWF0ZUFzc2V0KAogICAgICAgIHVpbnQyNTYgX2NyZWF0b3JUb2tlbklELAogICAgICAgIGFkZHJlc3MgX293bmVyLAogICAgICAgIHVpbnQyNTYgX3ByaWNlLAogICAgICAgIHVpbnQxNiBfSUQsCiAgICAgICAgdWludDggX2NhdGVnb3J5LAogICAgICAgIHVpbnQ4IF9zdGF0ZSwKICAgICAgICB1aW50OCBfYXR0cmlidXRlcywKICAgICAgICB1aW50OFtTVEFUU19TSVpFXSBfc3RhdHMsCiAgICAgICAgdWludDI1NiBfY29vbGRvd24sCiAgICAgICAgdWludDY0IF9jb29sZG93bkVuZEJsb2NrCiAgICApCiAgICBwdWJsaWMgb25seUdyYW50ZWRDb250cmFjdHMKICAgIHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgLy8gRW5zdXJlIG91ciBkYXRhIHN0cnVjdHVyZXMgYXJlIGFsd2F5cyB2YWxpZC4KICAgICAgICByZXF1aXJlKF9JRCA+IDApOwogICAgICAgIHJlcXVpcmUoX2NhdGVnb3J5ID4gMCk7CiAgICAgICAgcmVxdWlyZShfYXR0cmlidXRlcyAhPSAweDApOwogICAgICAgIHJlcXVpcmUoX3N0YXRzLmxlbmd0aCA+IDApOwoKICAgICAgICBBc3NldCBtZW1vcnkgYXNzZXQgPSBBc3NldCh7CiAgICAgICAgICAgIElEOiBfSUQsCiAgICAgICAgICAgIGNhdGVnb3J5OiBfY2F0ZWdvcnksCiAgICAgICAgICAgIGJ1aWx0Qnk6IF9jcmVhdG9yVG9rZW5JRCwKICAgICAgICAgICAgYXR0cmlidXRlczogYnl0ZXMyKF9hdHRyaWJ1dGVzKSwKICAgICAgICAgICAgc3RhdHM6IF9zdGF0cywKICAgICAgICAgICAgc3RhdGU6IF9zdGF0ZSwKICAgICAgICAgICAgY3JlYXRlZEF0OiB1aW50NjQobm93KSwKICAgICAgICAgICAgY29vbGRvd25FbmRCbG9jazogX2Nvb2xkb3duRW5kQmxvY2ssCiAgICAgICAgICAgIGNvb2xkb3duOiBfY29vbGRvd24KICAgICAgICB9KTsKCiAgICAgICAgdWludDI1NiBuZXdBc3NldFVuaXF1ZUlkID0gYXNzZXRzLnB1c2goYXNzZXQpIC0gMTsKCiAgICAgICAgLy8gQ2hlY2sgaXQgcmVhY2hlZCA0IGJpbGxpb24gYXNzZXRzIGJ1dCBsZXQncyBqdXN0IGJlIDEwMCUgc3VyZS4KICAgICAgICByZXF1aXJlKG5ld0Fzc2V0VW5pcXVlSWQgPT0gdWludDI1Nih1aW50MzIobmV3QXNzZXRVbmlxdWVJZCkpKTsKCiAgICAgICAgLy8gc3RvcmUgcHJpY2UKICAgICAgICBhc3NldEluZGV4VG9QcmljZVtuZXdBc3NldFVuaXF1ZUlkXSA9IF9wcmljZTsKCiAgICAgICAgLy8gVGhpcyB3aWxsIGFzc2lnbiBvd25lcnNoaXAKICAgICAgICB0cmFuc2ZlcihhZGRyZXNzKDApLCBfb3duZXIsIG5ld0Fzc2V0VW5pcXVlSWQpOwoKICAgICAgICByZXR1cm4gbmV3QXNzZXRVbmlxdWVJZDsKICAgIH0KCiAgICAvLy8gQGRldiBBIHB1YmxpYyBtZXRob2QgdGhhdCBlZGl0IGFzc2V0IGluIGNhc2Ugb2YgYW55IG1pc3Rha2UgaXMgZG9uZSBkdXJpbmcgcHJvY2VzcyBvZiBjcmVhdGlvbiBieSB0aGUgZGV2ZWxvcGVyLiBUaGlzCiAgICAvLy8gVGhpcyBtZXRob2QgZG9lc24ndCBkbyBhbnkgY2hlY2tpbmcgYW5kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuIHRoZQogICAgLy8vICBpbnB1dCBkYXRhIGlzIGtub3duIHRvIGJlIHZhbGlkLgogICAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgdG9rZW4gSUQKICAgIC8vLyBAcGFyYW0gX2NyZWF0b3JUb2tlbklEIFRoZSBhc3NldCB0aGF0IGNyZWF0ZSB0aGF0IHRva2VuCiAgICAvLy8gQHBhcmFtIF9wcmljZSBhc3NldCBwcmljZQogICAgLy8vIEBwYXJhbSBfSUQgYXNzZXQgSUQKICAgIC8vLyBAcGFyYW0gX2NhdGVnb3J5IHNlZSBBc3NldCBTdHJ1Y3QgZGVzY3JpcHRpb24KICAgIC8vLyBAcGFyYW0gX3N0YXRlIHNlZSBBc3NldCBTdHJ1Y3QgZGVzY3JpcHRpb24KICAgIC8vLyBAcGFyYW0gX2F0dHJpYnV0ZXMgc2VlIEFzc2V0IFN0cnVjdCBkZXNjcmlwdGlvbgogICAgLy8vIEBwYXJhbSBfc3RhdHMgc2VlIEFzc2V0IFN0cnVjdCBkZXNjcmlwdGlvbgogICAgLy8vIEBwYXJhbSBfY29vbGRvd24gYXNzZXQgY29vbGRvd24gaW5kZXgKICAgIGZ1bmN0aW9uIGVkaXRBc3NldCgKICAgICAgICB1aW50MjU2IF90b2tlbklkLAogICAgICAgIHVpbnQyNTYgX2NyZWF0b3JUb2tlbklELAogICAgICAgIHVpbnQyNTYgX3ByaWNlLAogICAgICAgIHVpbnQxNiBfSUQsCiAgICAgICAgdWludDggX2NhdGVnb3J5LAogICAgICAgIHVpbnQ4IF9zdGF0ZSwKICAgICAgICB1aW50OCBfYXR0cmlidXRlcywKICAgICAgICB1aW50OFtTVEFUU19TSVpFXSBfc3RhdHMsCiAgICAgICAgdWludDE2IF9jb29sZG93bgogICAgKQogICAgZXh0ZXJuYWwgdmFsaWRBc3NldChfdG9rZW5JZCkgb25seUNMZXZlbAogICAgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICAvLyBFbnN1cmUgb3VyIGRhdGEgc3RydWN0dXJlcyBhcmUgYWx3YXlzIHZhbGlkLgogICAgICAgIHJlcXVpcmUoX0lEID4gMCk7CiAgICAgICAgcmVxdWlyZShfY2F0ZWdvcnkgPiAwKTsKICAgICAgICByZXF1aXJlKF9hdHRyaWJ1dGVzICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfc3RhdHMubGVuZ3RoID4gMCk7CgogICAgICAgIC8vIHN0b3JlIHByaWNlCiAgICAgICAgYXNzZXRJbmRleFRvUHJpY2VbX3Rva2VuSWRdID0gX3ByaWNlOwoKICAgICAgICBBc3NldCBzdG9yYWdlIGFzc2V0ID0gYXNzZXRzW190b2tlbklkXTsKICAgICAgICBhc3NldC5JRCA9IF9JRDsKICAgICAgICBhc3NldC5jYXRlZ29yeSA9IF9jYXRlZ29yeTsKICAgICAgICBhc3NldC5idWlsdEJ5ID0gX2NyZWF0b3JUb2tlbklEOwogICAgICAgIGFzc2V0LmF0dHJpYnV0ZXMgPSBieXRlczIoX2F0dHJpYnV0ZXMpOwogICAgICAgIGFzc2V0LnN0YXRzID0gX3N0YXRzOwogICAgICAgIGFzc2V0LnN0YXRlID0gX3N0YXRlOwogICAgICAgIGFzc2V0LmNvb2xkb3duID0gX2Nvb2xkb3duOwogICAgfQoKICAgIC8vLyBAZGV2IFVwZGF0ZSBvbmx5IHN0YXRzCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIGFzc2V0IFVuaXF1ZUlkCiAgICAvLy8gQHBhcmFtIF9zdGF0cyBhc3NldCBzdGF0ZSwgc2VlIEFzc2V0IFN0cnVjdCBkZXNjcmlwdGlvbgogICAgZnVuY3Rpb24gdXBkYXRlU3RhdHModWludDI1NiBfdG9rZW5JZCwgdWludDhbU1RBVFNfU0laRV0gX3N0YXRzKSBwdWJsaWMgdmFsaWRBc3NldChfdG9rZW5JZCkgb25seUdyYW50ZWRDb250cmFjdHMgewogICAgICAgIGFzc2V0c1tfdG9rZW5JZF0uc3RhdHMgPSBfc3RhdHM7CiAgICB9CgogICAgLy8vIEBkZXYgVXBkYXRlIG9ubHkgYXNzZXQgc3RhdGUKICAgIC8vLyBAcGFyYW0gX3Rva2VuSWQgYXNzZXQgVW5pcXVlSWQKICAgIC8vLyBAcGFyYW0gX3N0YXRlIGFzc2V0IHN0YXRlLCBzZWUgQXNzZXQgU3RydWN0IGRlc2NyaXB0aW9uCiAgICBmdW5jdGlvbiB1cGRhdGVTdGF0ZSh1aW50MjU2IF90b2tlbklkLCB1aW50OCBfc3RhdGUpIHB1YmxpYyB2YWxpZEFzc2V0KF90b2tlbklkKSBvbmx5R3JhbnRlZENvbnRyYWN0cyB7CiAgICAgICAgYXNzZXRzW190b2tlbklkXS5zdGF0ZSA9IF9zdGF0ZTsKICAgIH0KCiAgICAvLy8gQGRldiBVcGRhdGUgQ29vbGRvd24gZm9yIGEgc2luZ2xlIGFzc2V0CiAgICAvLy8gQHBhcmFtIF90b2tlbklkIGFzc2V0IFVuaXF1ZUlkCiAgICAvLy8gQHBhcmFtIF9jb29sZG93biBhc3NldCBzdGF0ZSwgc2VlIEFzc2V0IFN0cnVjdCBkZXNjcmlwdGlvbgogICAgZnVuY3Rpb24gc2V0QXNzZXRDb29sZG93bih1aW50MjU2IF90b2tlbklkLCB1aW50MjU2IF9jb29sZG93biwgdWludDY0IF9jb29sZG93bkVuZEJsb2NrKQogICAgcHVibGljIHZhbGlkQXNzZXQoX3Rva2VuSWQpIG9ubHlHcmFudGVkQ29udHJhY3RzIHsKICAgICAgICBhc3NldHNbX3Rva2VuSWRdLmNvb2xkb3duID0gX2Nvb2xkb3duOwogICAgICAgIGFzc2V0c1tfdG9rZW5JZF0uY29vbGRvd25FbmRCbG9jayA9IF9jb29sZG93bkVuZEJsb2NrOwogICAgfQoKICAgIC8qKiogR0VUVEVSUyAqKiovCgogICAgLy8vIEBub3RpY2UgUmV0dXJucyBvbmx5IHN0YXRzIGRhdGEgYWJvdXQgYSBzcGVjaWZpYyBhc3NldC4KICAgIC8vLyBAZGV2IGl0IGlzIG5lY2Vzc2FyeSBkdWUgc29saWRpdHkgY29tcGlsZXIgbGltaXRhdGlvbnMKICAgIC8vLyAgICAgIHdoZW4gd2UgaGF2ZSBsYXJnZSBxdHkgb2YgcGFyYW1ldGVycyBpdCB0aHJvd3MgU3RhY2tUb29EZWVwRXhjZXB0aW9uCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBVbmlxdWVJZCBvZiB0aGUgYXNzZXQgb2YgaW50ZXJlc3QuCiAgICBmdW5jdGlvbiBnZXRTdGF0cyh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50OFtTVEFUU19TSVpFXSkgewogICAgICAgIHJldHVybiBhc3NldHNbX3Rva2VuSWRdLnN0YXRzOwogICAgfQoKICAgIC8vLyBAZGV2IHJldHVybiBjdXJyZW50IHByaWNlIG9mIGFuIGFzc2V0CiAgICAvLy8gQHBhcmFtIF90b2tlbklkIGFzc2V0IFVuaXF1ZUlkCiAgICBmdW5jdGlvbiBwcmljZU9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgcHJpY2UpIHsKICAgICAgICByZXR1cm4gYXNzZXRJbmRleFRvUHJpY2VbX3Rva2VuSWRdOwogICAgfQoKICAgIC8vLyBAbm90aWNlIENoZWNrIGlmIGFzc2V0IGhhcyBhbGwgYXR0cmlidXRlcyBwYXNzZWQgYnkgcGFyYW1ldGVyCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBVbmlxdWVJZCBvZiB0aGUgYXNzZXQgb2YgaW50ZXJlc3QuCiAgICAvLy8gQHBhcmFtIF9hdHRyaWJ1dGVzIHNlZSBBc3NldCBTdHJ1Y3QgZGVzY3JpcHRpb24KICAgIGZ1bmN0aW9uIGhhc0FsbEF0dHJzKHVpbnQyNTYgX3Rva2VuSWQsIGJ5dGVzMiBfYXR0cmlidXRlcykgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBhc3NldHNbX3Rva2VuSWRdLmF0dHJpYnV0ZXMgJiBfYXR0cmlidXRlcyA9PSBfYXR0cmlidXRlczsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBDaGVjayBpZiBhc3NldCBoYXMgYW55IGF0dHJpYnV0ZSBwYXNzZWQgYnkgcGFyYW1ldGVyCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBVbmlxdWVJZCBvZiB0aGUgYXNzZXQgb2YgaW50ZXJlc3QuCiAgICAvLy8gQHBhcmFtIF9hdHRyaWJ1dGVzIHNlZSBBc3NldCBTdHJ1Y3QgZGVzY3JpcHRpb24KICAgIGZ1bmN0aW9uIGhhc0FueUF0dHJzKHVpbnQyNTYgX3Rva2VuSWQsIGJ5dGVzMiBfYXR0cmlidXRlcykgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBhc3NldHNbX3Rva2VuSWRdLmF0dHJpYnV0ZXMgJiBfYXR0cmlidXRlcyAhPSAweDA7CiAgICB9CgogICAgLy8vIEBub3RpY2UgQ2hlY2sgaWYgYXNzZXQgaXMgaW4gdGhlIHN0YXRlIHBhc3NlZCBieSBwYXJhbWV0ZXIKICAgIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIFVuaXF1ZUlkIG9mIHRoZSBhc3NldCBvZiBpbnRlcmVzdC4KICAgIC8vLyBAcGFyYW0gX2NhdGVnb3J5IHNlZSBBc3NldENhdGVnb3J5IGluIEV0aGVybmF1dHNCYXNlIGZvciBwb3NzaWJsZSBzdGF0ZXMKICAgIGZ1bmN0aW9uIGlzQ2F0ZWdvcnkodWludDI1NiBfdG9rZW5JZCwgdWludDggX2NhdGVnb3J5KSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGFzc2V0c1tfdG9rZW5JZF0uY2F0ZWdvcnkgPT0gX2NhdGVnb3J5OwogICAgfQoKICAgIC8vLyBAbm90aWNlIENoZWNrIGlmIGFzc2V0IGlzIGluIHRoZSBzdGF0ZSBwYXNzZWQgYnkgcGFyYW1ldGVyCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBVbmlxdWVJZCBvZiB0aGUgYXNzZXQgb2YgaW50ZXJlc3QuCiAgICAvLy8gQHBhcmFtIF9zdGF0ZSBzZWUgZW51bSBBc3NldFN0YXRlIGluIEV0aGVybmF1dHNCYXNlIGZvciBwb3NzaWJsZSBzdGF0ZXMKICAgIGZ1bmN0aW9uIGlzU3RhdGUodWludDI1NiBfdG9rZW5JZCwgdWludDggX3N0YXRlKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGFzc2V0c1tfdG9rZW5JZF0uc3RhdGUgPT0gX3N0YXRlOwogICAgfQoKICAgIC8vLyBAbm90aWNlIFJldHVybnMgb3duZXIgb2YgYSBnaXZlbiBBc3NldChUb2tlbikuCiAgICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogICAgLy8vIEBwYXJhbSBfdG9rZW5JZCBhc3NldCBVbmlxdWVJZAogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIG93bmVyKQogICAgewogICAgICAgIHJldHVybiBhc3NldEluZGV4VG9Pd25lcltfdG9rZW5JZF07CiAgICB9CgogICAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZQogICAgLy8vIEBub3RpY2UgUmV0dXJucyB0aGUgbnVtYmVyIG9mIEFzc2V0cyBvd25lZCBieSBhIHNwZWNpZmljIGFkZHJlc3MuCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgb3duZXIgYWRkcmVzcyB0byBjaGVjay4KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBjb3VudCkgewogICAgICAgIHJldHVybiBvd25lcnNoaXBUb2tlbkNvdW50W19vd25lcl07CiAgICB9CgogICAgLy8vIEBkZXYgQ2hlY2tzIGlmIGEgZ2l2ZW4gYWRkcmVzcyBjdXJyZW50bHkgaGFzIHRyYW5zZmVyQXBwcm92YWwgZm9yIGEgcGFydGljdWxhciBBc3NldC4KICAgIC8vLyBAcGFyYW0gX3Rva2VuSWQgYXNzZXQgVW5pcXVlSWQKICAgIGZ1bmN0aW9uIGFwcHJvdmVkRm9yKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IG9ubHlHcmFudGVkQ29udHJhY3RzIHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gYXNzZXRJbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdOwogICAgfQoKICAgIC8vLyBAbm90aWNlIFJldHVybnMgdGhlIHRvdGFsIG51bWJlciBvZiBBc3NldHMgY3VycmVudGx5IGluIGV4aXN0ZW5jZS4KICAgIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYXNzZXRzLmxlbmd0aDsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBMaXN0IGFsbCBleGlzdGluZyB0b2tlbnMuIEl0IGNhbiBiZSBmaWx0ZXJlZCBieSBhdHRyaWJ1dGVzIG9yIGFzc2V0cyB3aXRoIG93bmVyCiAgICAvLy8gQHBhcmFtIF9vd25lciBmaWx0ZXIgYWxsIGFzc2V0cyBieSBvd25lcgogICAgZnVuY3Rpb24gZ2V0VG9rZW5MaXN0KGFkZHJlc3MgX293bmVyLCB1aW50OCBfd2l0aEF0dHJpYnV0ZXMsIHVpbnQyNTYgc3RhcnQsIHVpbnQyNTYgY291bnQpIGV4dGVybmFsIHZpZXcgcmV0dXJucygKICAgICAgICB1aW50MjU2WzZdW10KICAgICkgewogICAgICAgIHVpbnQyNTYgdG90YWxBc3NldHMgPSBhc3NldHMubGVuZ3RoOwoKICAgICAgICBpZiAodG90YWxBc3NldHMgPT0gMCkgewogICAgICAgICAgICAvLyBSZXR1cm4gYW4gZW1wdHkgYXJyYXkKICAgICAgICAgICAgcmV0dXJuIG5ldyB1aW50MjU2WzZdW10oMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdWludDI1Nls2XVtdIG1lbW9yeSByZXN1bHQgPSBuZXcgdWludDI1Nls2XVtdKHRvdGFsQXNzZXRzID4gY291bnQgPyBjb3VudCA6IHRvdGFsQXNzZXRzKTsKICAgICAgICAgICAgdWludDI1NiByZXN1bHRJbmRleCA9IDA7CiAgICAgICAgICAgIGJ5dGVzMiBoYXNBdHRyaWJ1dGVzICA9IGJ5dGVzMihfd2l0aEF0dHJpYnV0ZXMpOwogICAgICAgICAgICBBc3NldCBtZW1vcnkgYXNzZXQ7CgogICAgICAgICAgICBmb3IgKHVpbnQyNTYgdG9rZW5JZCA9IHN0YXJ0OyB0b2tlbklkIDwgdG90YWxBc3NldHMgJiYgcmVzdWx0SW5kZXggPCBjb3VudDsgdG9rZW5JZCsrKSB7CiAgICAgICAgICAgICAgICBhc3NldCA9IGFzc2V0c1t0b2tlbklkXTsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAoYXNzZXQuc3RhdGUgIT0gdWludDgoQXNzZXRTdGF0ZS5Vc2VkKSkgJiYKICAgICAgICAgICAgICAgICAgICAoYXNzZXRJbmRleFRvT3duZXJbdG9rZW5JZF0gPT0gX293bmVyIHx8IF9vd25lciA9PSBhZGRyZXNzKDApKSAmJgogICAgICAgICAgICAgICAgICAgIChhc3NldC5hdHRyaWJ1dGVzICYgaGFzQXR0cmlidXRlcyA9PSBoYXNBdHRyaWJ1dGVzKQogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdEluZGV4XVswXSA9IHRva2VuSWQ7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdEluZGV4XVsxXSA9IGFzc2V0LklEOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRJbmRleF1bMl0gPSBhc3NldC5jYXRlZ29yeTsKICAgICAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0SW5kZXhdWzNdID0gdWludDI1Nihhc3NldC5hdHRyaWJ1dGVzKTsKICAgICAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0SW5kZXhdWzRdID0gYXNzZXQuY29vbGRvd247CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdEluZGV4XVs1XSA9IGFzc2V0SW5kZXhUb1ByaWNlW3Rva2VuSWRdOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgfQp9'.
	

]
