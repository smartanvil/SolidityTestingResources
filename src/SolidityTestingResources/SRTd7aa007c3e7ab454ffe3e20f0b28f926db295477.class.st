Class {
	#name : #SRTd7aa007c3e7ab454ffe3e20f0b28f926db295477,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd7aa007c3e7ab454ffe3e20f0b28f926db295477 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIAogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBpbnRlcm5hbCB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgZW1pdCBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cn0KCmNvbnRyYWN0IHRva2VuSW50ZXJmYWNlIHsKCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKfQoKY29udHJhY3QgcmF0ZUludGVyZmFjZSB7CiAgICBmdW5jdGlvbiByZWFkUmF0ZShzdHJpbmcgX2N1cnJlbmN5KSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IG9uZUV0aGVyVmFsdWUpOwp9Cgpjb250cmFjdCBJQ09FbmdpbmVJbnRlcmZhY2UgewoKICAgIC8vIGZhbHNlIGlmIHRoZSBpY28gaXMgbm90IHN0YXJ0ZWQsIHRydWUgaWYgdGhlIGljbyBpcyBzdGFydGVkIGFuZCBydW5uaW5nLCB0cnVlIGlmIHRoZSBpY28gaXMgY29tcGxldGVkCiAgICBmdW5jdGlvbiBzdGFydGVkKCkgcHVibGljIHZpZXcgcmV0dXJucyhib29sKTsKCiAgICAvLyBmYWxzZSBpZiB0aGUgaWNvIGlzIG5vdCBzdGFydGVkLCBmYWxzZSBpZiB0aGUgaWNvIGlzIHN0YXJ0ZWQgYW5kIHJ1bm5pbmcsIHRydWUgaWYgdGhlIGljbyBpcyBjb21wbGV0ZWQKICAgIGZ1bmN0aW9uIGVuZGVkKCkgcHVibGljIHZpZXcgcmV0dXJucyhib29sKTsKCiAgICAvLyB0aW1lIHN0YW1wIG9mIHRoZSBzdGFydGluZyB0aW1lIG9mIHRoZSBpY28sIG11c3QgcmV0dXJuIDAgaWYgaXQgZGVwZW5kcyBvbiB0aGUgYmxvY2sgbnVtYmVyCiAgICBmdW5jdGlvbiBzdGFydFRpbWUoKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQpOwoKICAgIC8vIHRpbWUgc3RhbXAgb2YgdGhlIGVuZGluZyB0aW1lIG9mIHRoZSBpY28sIG11c3QgcmV0cnVuIDAgaWYgaXQgZGVwZW5kcyBvbiB0aGUgYmxvY2sgbnVtYmVyCiAgICBmdW5jdGlvbiBlbmRUaW1lKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KTsKCiAgICAvLyBPcHRpb25hbCBmdW5jdGlvbiwgY2FuIGJlIGltcGxlbWVudGVkIGluIHBsYWNlIG9mIHN0YXJ0VGltZQogICAgLy8gUmV0dXJucyB0aGUgc3RhcnRpbmcgYmxvY2sgbnVtYmVyIG9mIHRoZSBpY28sIG11c3QgcmV0dXJuIDAgaWYgaXQgZGVwZW5kcyBvbiB0aGUgdGltZSBzdGFtcAogICAgLy8gZnVuY3Rpb24gc3RhcnRCbG9jaygpIHB1YmxpYyB2aWV3IHJldHVybnModWludCk7CgogICAgLy8gT3B0aW9uYWwgZnVuY3Rpb24sIGNhbiBiZSBpbXBsZW1lbnRlZCBpbiBwbGFjZSBvZiBlbmRUaW1lCiAgICAvLyBSZXR1cm5zIHRoZWVuZGluZyBibG9jayBudW1iZXIgb2YgdGhlIGljbywgbXVzdCByZXRydW4gMCBpZiBpdCBkZXBlbmRzIG9uIHRoZSB0aW1lIHN0YW1wCiAgICAvLyBmdW5jdGlvbiBlbmRCbG9jaygpIHB1YmxpYyB2aWV3IHJldHVybnModWludCk7CgogICAgLy8gcmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIHRoZSB0b2tlbnMgYXZhaWxhYmxlIGZvciB0aGUgc2FsZSwgbXVzdCBub3QgY2hhbmdlIHdoZW4gdGhlIGljbyBpcyBzdGFydGVkCiAgICBmdW5jdGlvbiB0b3RhbFRva2VucygpIHB1YmxpYyB2aWV3IHJldHVybnModWludCk7CgogICAgLy8gcmV0dXJucyB0aGUgbnVtYmVyIG9mIHRoZSB0b2tlbnMgYXZhaWxhYmxlIGZvciB0aGUgaWNvLiBBdCB0aGUgbW9tZW50IHRoYXQgdGhlIGljbyBzdGFydHMgaXQgbXVzdCBiZSBlcXVhbCB0byB0b3RhbFRva2VucygpLAogICAgLy8gdGhlbiBpdCB3aWxsIGRlY3JlYXNlLiBJdCBpcyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgcGVyY2VudGFnZSBvZiBzb2xkIHRva2VucyBhcyByZW1haW5pbmdUb2tlbnMoKSAvIHRvdGFsVG9rZW5zKCkKICAgIGZ1bmN0aW9uIHJlbWFpbmluZ1Rva2VucygpIHB1YmxpYyB2aWV3IHJldHVybnModWludCk7CgogICAgLy8gcmV0dXJuIHRoZSBwcmljZSBhcyBudW1iZXIgb2YgdG9rZW5zIHJlbGVhc2VkIGZvciBlYWNoIGV0aGVyCiAgICBmdW5jdGlvbiBwcmljZSgpIHB1YmxpYyB2aWV3IHJldHVybnModWludCk7Cn0KCmNvbnRyYWN0IEtZQ0Jhc2UgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgaXNLeWNTaWduZXI7CiAgICBtYXBwaW5nICh1aW50NjQgPT4gdWludDI1NikgcHVibGljIGFscmVhZHlQYXllZDsKCiAgICBldmVudCBLeWNWZXJpZmllZChhZGRyZXNzIGluZGV4ZWQgc2lnbmVyLCBhZGRyZXNzIGJ1eWVyQWRkcmVzcywgdWludDY0IGJ1eWVySWQsIHVpbnQgbWF4QW1vdW50KTsKCiAgICBmdW5jdGlvbiBLWUNCYXNlKGFkZHJlc3MgW10ga3ljU2lnbmVycykgaW50ZXJuYWwgewogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGt5Y1NpZ25lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaXNLeWNTaWduZXJba3ljU2lnbmVyc1tpXV0gPSB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBNdXN0IGJlIGltcGxlbWVudGVkIGluIGRlc2NlbmRpbmcgY29udHJhY3QgdG8gYXNzaWduIHRva2VucyB0byB0aGUgYnV5ZXJzLiBDYWxsZWQgYWZ0ZXIgdGhlIEtZQyB2ZXJpZmljYXRpb24gaXMgcGFzc2VkCiAgICBmdW5jdGlvbiByZWxlYXNlVG9rZW5zVG8oYWRkcmVzcyBidXllcikgaW50ZXJuYWwgcmV0dXJucyhib29sKTsKCiAgICAvLyBUaGlzIG1ldGhvZCBjYW4gYmUgb3ZlcnJpZGRlbiB0byBlbmFibGUgc29tZSBzZW5kZXIgdG8gYnV5IHRva2VuIGZvciBhIGRpZmZlcmVudCBhZGRyZXNzCiAgICBmdW5jdGlvbiBzZW5kZXJBbGxvd2VkRm9yKGFkZHJlc3MgYnV5ZXIpCiAgICAgICAgaW50ZXJuYWwgdmlldyByZXR1cm5zKGJvb2wpCiAgICB7CiAgICAgICAgcmV0dXJuIGJ1eWVyID09IG1zZy5zZW5kZXI7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zRm9yKGFkZHJlc3MgYnV5ZXJBZGRyZXNzLCB1aW50NjQgYnV5ZXJJZCwgdWludCBtYXhBbW91bnQsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKQogICAgICAgIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShzZW5kZXJBbGxvd2VkRm9yKGJ1eWVyQWRkcmVzcykpOwogICAgICAgIHJldHVybiBidXlJbXBsZW1lbnRhdGlvbihidXllckFkZHJlc3MsIGJ1eWVySWQsIG1heEFtb3VudCwgdiwgciwgcyk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKHVpbnQ2NCBidXllcklkLCB1aW50IG1heEFtb3VudCwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpCiAgICAgICAgcHVibGljIHBheWFibGUgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gYnV5SW1wbGVtZW50YXRpb24obXNnLnNlbmRlciwgYnV5ZXJJZCwgbWF4QW1vdW50LCB2LCByLCBzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXlJbXBsZW1lbnRhdGlvbihhZGRyZXNzIGJ1eWVyQWRkcmVzcywgdWludDY0IGJ1eWVySWQsIHVpbnQgbWF4QW1vdW50LCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykKICAgICAgICBwcml2YXRlIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgLy8gY2hlY2sgdGhlIHNpZ25hdHVyZQogICAgICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTI1NigiRWlkb28gaWNvZW5naW5lIGF1dGhvcml6YXRpb24iLCB0aGlzLCBidXllckFkZHJlc3MsIGJ1eWVySWQsIG1heEFtb3VudCk7CiAgICAgICAgYWRkcmVzcyBzaWduZXIgPSBlY3JlY292ZXIoaGFzaCwgdiwgciwgcyk7CiAgICAgICAgaWYgKCFpc0t5Y1NpZ25lcltzaWduZXJdKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVpbnQyNTYgdG90YWxQYXllZCA9IGFscmVhZHlQYXllZFtidXllcklkXS5hZGQobXNnLnZhbHVlKTsKICAgICAgICAgICAgcmVxdWlyZSh0b3RhbFBheWVkIDw9IG1heEFtb3VudCk7CiAgICAgICAgICAgIGFscmVhZHlQYXllZFtidXllcklkXSA9IHRvdGFsUGF5ZWQ7CiAgICAgICAgICAgIGVtaXQgS3ljVmVyaWZpZWQoc2lnbmVyLCBidXllckFkZHJlc3MsIGJ1eWVySWQsIG1heEFtb3VudCk7CiAgICAgICAgICAgIHJldHVybiByZWxlYXNlVG9rZW5zVG8oYnV5ZXJBZGRyZXNzKTsKICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IFJDIGlzIElDT0VuZ2luZUludGVyZmFjZSwgS1lDQmFzZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIFRva2VuU2FsZSB0b2tlblNhbGVDb250cmFjdDsKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZTsKICAgIHVpbnQyNTYgcHVibGljIGVuZFRpbWU7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIHNvbGRUb2tlbnM7CiAgICB1aW50MjU2IHB1YmxpYyByZW1haW5pbmdUb2tlbnM7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIG9uZVRva2VuSW5Vc2RXZWk7CgkKCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZVVzZXI7IC8vIGFkZHJlc3MgPT4gdG9rZW4gYW1vdW50Cgl1aW50MjU2W10gcHVibGljIHRva2VuVGhyZXNob2xkOyAvLyBhcnJheSBvZiB0b2tlbiB0aHJlc2hvbGQgcmVhY2hlZCBpbiB3ZWkgb2YgdG9rZW4KICAgIHVpbnQyNTZbXSBwdWJsaWMgYm9udXNUaHJlc2hvbGQ7IC8vIGFycmF5IG9mIGJvbnVzIG9mIGVhY2ggdG9rZW5UaHJlc2hvbGQgcmVhY2hlZCAtIDIwJSA9IDIwCgogICAgZnVuY3Rpb24gUkMoYWRkcmVzcyBfdG9rZW5TYWxlQ29udHJhY3QsIHVpbnQyNTYgX29uZVRva2VuSW5Vc2RXZWksIHVpbnQyNTYgX3JlbWFpbmluZ1Rva2VucywgIHVpbnQyNTYgX3N0YXJ0VGltZSAsIHVpbnQyNTYgX2VuZFRpbWUsIGFkZHJlc3MgW10ga3ljU2lnbmVyLCB1aW50MjU2W10gX3Rva2VuVGhyZXNob2xkLCB1aW50MjU2W10gX2JvbnVzVGhyZXNob2xkICkgcHVibGljIEtZQ0Jhc2Uoa3ljU2lnbmVyKSB7CiAgICAgICAgcmVxdWlyZSAoIF90b2tlblNhbGVDb250cmFjdCAhPSAwICk7CiAgICAgICAgcmVxdWlyZSAoIF9vbmVUb2tlbkluVXNkV2VpICE9IDAgKTsKICAgICAgICByZXF1aXJlKCBfcmVtYWluaW5nVG9rZW5zICE9IDAgKTsKICAgICAgICByZXF1aXJlICggX3Rva2VuVGhyZXNob2xkLmxlbmd0aCAhPSAwICk7CiAgICAgICAgcmVxdWlyZSAoIF90b2tlblRocmVzaG9sZC5sZW5ndGggPT0gX2JvbnVzVGhyZXNob2xkLmxlbmd0aCApOwogICAgICAgIGJvbnVzVGhyZXNob2xkID0gX2JvbnVzVGhyZXNob2xkOwogICAgICAgIHRva2VuVGhyZXNob2xkID0gX3Rva2VuVGhyZXNob2xkOwogICAgICAgIAogICAgICAgIAogICAgICAgIHRva2VuU2FsZUNvbnRyYWN0ID0gVG9rZW5TYWxlKF90b2tlblNhbGVDb250cmFjdCk7CiAgICAgICAgCiAgICAgICAgdG9rZW5TYWxlQ29udHJhY3QuYWRkTWVCeVJDKCk7CiAgICAgICAgCiAgICAgICAgc29sZFRva2VucyA9IDA7CiAgICAgICAgcmVtYWluaW5nVG9rZW5zID0gX3JlbWFpbmluZ1Rva2VuczsKICAgICAgICBvbmVUb2tlbkluVXNkV2VpID0gX29uZVRva2VuSW5Vc2RXZWk7CiAgICAgICAgCiAgICAgICAgc2V0VGltZVJDKCBfc3RhcnRUaW1lLCBfZW5kVGltZSApOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRUaW1lUkModWludDI1NiBfc3RhcnRUaW1lLCB1aW50MjU2IF9lbmRUaW1lICkgaW50ZXJuYWwgewogICAgICAgIGlmKCBfc3RhcnRUaW1lID09IDAgKSB7CiAgICAgICAgICAgIHN0YXJ0VGltZSA9IHRva2VuU2FsZUNvbnRyYWN0LnN0YXJ0VGltZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICAgICAgfQogICAgICAgIGlmKCBfZW5kVGltZSA9PSAwICkgewogICAgICAgICAgICBlbmRUaW1lID0gdG9rZW5TYWxlQ29udHJhY3QuZW5kVGltZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVuZFRpbWUgPSBfZW5kVGltZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlUb2tlblNhbGVPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gdG9rZW5TYWxlQ29udHJhY3Qub3duZXIoKSApOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFRpbWUodWludDI1NiBfbmV3U3RhcnQsIHVpbnQyNTYgX25ld0VuZCkgcHVibGljIG9ubHlUb2tlblNhbGVPd25lciB7CiAgICAgICAgaWYgKCBfbmV3U3RhcnQgIT0gMCApIHN0YXJ0VGltZSA9IF9uZXdTdGFydDsKICAgICAgICBpZiAoIF9uZXdFbmQgIT0gMCApIGVuZFRpbWUgPSBfbmV3RW5kOwogICAgfQogICAgCiAgICBldmVudCBCdXlSQyhhZGRyZXNzIGluZGV4ZWQgYnV5ZXIsIGJ5dGVzIHRyYWNrSUQsIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgc29sZFRva2VuLCB1aW50MjU2IHZhbHVlVG9rZW5JblVzZFdlaSApOwogICAgCiAgICBmdW5jdGlvbiByZWxlYXNlVG9rZW5zVG8oYWRkcmVzcyBidXllcikgaW50ZXJuYWwgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmVxdWlyZSggbm93ID4gc3RhcnRUaW1lICk7CiAgICAgICAgcmVxdWlyZSggbm93IDwgZW5kVGltZSApOwogICAgICAgIC8vcmVxdWlyZSggbXNnLnZhbHVlID49IDEqMTAqKjE4KTsgLy8xIEV0aGVyCiAgICAgICAgcmVxdWlyZSggcmVtYWluaW5nVG9rZW5zID4gMCApOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgdG9rZW5BbW91bnQgPSB0b2tlblNhbGVDb250cmFjdC5idXlGcm9tUkMudmFsdWUobXNnLnZhbHVlKShidXllciwgb25lVG9rZW5JblVzZFdlaSwgcmVtYWluaW5nVG9rZW5zKTsKICAgICAgICAKCQliYWxhbmNlVXNlclttc2cuc2VuZGVyXSA9IGJhbGFuY2VVc2VyW21zZy5zZW5kZXJdLmFkZCh0b2tlbkFtb3VudCk7CQkKICAgICAgICByZW1haW5pbmdUb2tlbnMgPSByZW1haW5pbmdUb2tlbnMuc3ViKHRva2VuQW1vdW50KTsKICAgICAgICBzb2xkVG9rZW5zID0gc29sZFRva2Vucy5hZGQodG9rZW5BbW91bnQpOwogICAgICAgIAogICAgICAgIGVtaXQgQnV5UkMoIG1zZy5zZW5kZXIsIG1zZy5kYXRhLCBtc2cudmFsdWUsIHRva2VuQW1vdW50LCBvbmVUb2tlbkluVXNkV2VpICk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHN0YXJ0ZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gbm93ID4gc3RhcnRUaW1lIHx8IHJlbWFpbmluZ1Rva2VucyA9PSAwOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBlbmRlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBub3cgPiBlbmRUaW1lIHx8IHJlbWFpbmluZ1Rva2VucyA9PSAwOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzdGFydFRpbWUoKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gc3RhcnRUaW1lOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBlbmRUaW1lKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIGVuZFRpbWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRvdGFsVG9rZW5zKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIHJlbWFpbmluZ1Rva2Vucy5hZGQoc29sZFRva2Vucyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlbWFpbmluZ1Rva2VucygpIHB1YmxpYyB2aWV3IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiByZW1haW5pbmdUb2tlbnM7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHByaWNlKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICAgICAgdWludDI1NiBvbmVFdGhlciA9IDEwKioxODsKICAgICAgICByZXR1cm4gb25lRXRoZXIubXVsKDEwKioxOCkuZGl2KCB0b2tlblNhbGVDb250cmFjdC50b2tlblZhbHVlSW5FdGhlcihvbmVUb2tlbkluVXNkV2VpKSApOwogICAgfQoJCglmdW5jdGlvbiAoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoIG5vdyA+IGVuZFRpbWUgKTsKICAgICAgICByZXF1aXJlKCBiYWxhbmNlVXNlclttc2cuc2VuZGVyXSA+IDAgKTsKICAgICAgICB1aW50MjU2IGJvbnVzQXBwbGllZCA9IDA7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdG9rZW5UaHJlc2hvbGQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKCBzb2xkVG9rZW5zID4gdG9rZW5UaHJlc2hvbGRbaV0gKSB7CiAgICAgICAgICAgICAgICBib251c0FwcGxpZWQgPSBib251c1RocmVzaG9sZFtpXTsKCQkJfQoJCX0gICAgCgkJcmVxdWlyZSggYm9udXNBcHBsaWVkID4gMCApOwoJCQoJCXVpbnQyNTYgYWRkVG9rZW5BbW91bnQgPSBiYWxhbmNlVXNlclttc2cuc2VuZGVyXS5tdWwoIGJvbnVzQXBwbGllZCApLmRpdigxMCoqMik7CgkJYmFsYW5jZVVzZXJbbXNnLnNlbmRlcl0gPSAwOyAKCQkKCQl0b2tlblNhbGVDb250cmFjdC5jbGFpbShtc2cuc2VuZGVyLCBhZGRUb2tlbkFtb3VudCk7Cgl9Cn0KCmNvbnRyYWN0IFRva2VuU2FsZSBpcyBPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgdG9rZW5JbnRlcmZhY2UgcHVibGljIHRva2VuQ29udHJhY3Q7CiAgICByYXRlSW50ZXJmYWNlIHB1YmxpYyByYXRlQ29udHJhY3Q7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIHdhbGxldDsKICAgIGFkZHJlc3MgcHVibGljIGFkdmlzb3I7CiAgICB1aW50MjU2IHB1YmxpYyBhZHZpc29yRmVlOyAvLyAxID0gMCwxJQogICAgCgl1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgCiAgICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOyAgLy8gc2Vjb25kcyBmcm9tIDE5NzAtMDEtMDFUMDA6MDA6MDBaCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWU7ICAvLyBzZWNvbmRzIGZyb20gMTk3MC0wMS0wMVQwMDowMDowMFoKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHJjOwoKCiAgICBmdW5jdGlvbiBUb2tlblNhbGUoYWRkcmVzcyBfdG9rZW5BZGRyZXNzLCBhZGRyZXNzIF9yYXRlQWRkcmVzcywgdWludDI1NiBfc3RhcnRUaW1lLCB1aW50MjU2IF9lbmRUaW1lKSBwdWJsaWMgewogICAgICAgIHRva2VuQ29udHJhY3QgPSB0b2tlbkludGVyZmFjZShfdG9rZW5BZGRyZXNzKTsKICAgICAgICByYXRlQ29udHJhY3QgPSByYXRlSW50ZXJmYWNlKF9yYXRlQWRkcmVzcyk7CiAgICAgICAgc2V0VGltZShfc3RhcnRUaW1lLCBfZW5kVGltZSk7IAogICAgICAgIHdhbGxldCA9IG1zZy5zZW5kZXI7CiAgICAgICAgYWR2aXNvciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYWR2aXNvckZlZSA9IDAgKiAxMCoqMzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdG9rZW5WYWx1ZUluRXRoZXIodWludDI1NiBfb25lVG9rZW5JblVzZFdlaSkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2IHRrblZhbHVlKSB7CiAgICAgICAgdWludDI1NiBvbmVFdGhlckluVXNkID0gcmF0ZUNvbnRyYWN0LnJlYWRSYXRlKCJ1c2QiKTsKICAgICAgICB0a25WYWx1ZSA9IF9vbmVUb2tlbkluVXNkV2VpLm11bCgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSkuZGl2KG9uZUV0aGVySW5Vc2QpOwogICAgICAgIHJldHVybiB0a25WYWx1ZTsKICAgIH0gCiAgICAKICAgIG1vZGlmaWVyIGlzQnV5YWJsZSgpIHsKICAgICAgICByZXF1aXJlKCBub3cgPiBzdGFydFRpbWUgKTsgLy8gY2hlY2sgaWYgc3RhcnRlZAogICAgICAgIHJlcXVpcmUoIG5vdyA8IGVuZFRpbWUgKTsgLy8gY2hlY2sgaWYgZW5kZWQKICAgICAgICByZXF1aXJlKCBtc2cudmFsdWUgPiAwICk7CgkJCgkJdWludDI1NiByZW1haW5pbmdUb2tlbnMgPSB0b2tlbkNvbnRyYWN0LmJhbGFuY2VPZih0aGlzKTsKICAgICAgICByZXF1aXJlKCByZW1haW5pbmdUb2tlbnMgPiAwICk7IC8vIENoZWNrIGlmIHRoZXJlIGFyZSBhbnkgcmVtYWluaW5nIHRva2VucyAKICAgICAgICBfOwogICAgfQogICAgCiAgICBldmVudCBCdXkoYWRkcmVzcyBidXllciwgdWludDI1NiB2YWx1ZSwgYWRkcmVzcyBpbmRleGVkIGFtYmFzc2Fkb3IpOwogICAgCiAgICBtb2RpZmllciBvbmx5UkMoKSB7CiAgICAgICAgcmVxdWlyZSggcmNbbXNnLnNlbmRlcl0gKTsgLy9jaGVjayBpZiBpcyBhbiBhdXRob3JpemVkIHJjQ29udHJhY3QKICAgICAgICBfOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBidXlGcm9tUkMoYWRkcmVzcyBfYnV5ZXIsIHVpbnQyNTYgX3JjVG9rZW5WYWx1ZSwgdWludDI1NiBfcmVtYWluaW5nVG9rZW5zKSBvbmx5UkMgaXNCdXlhYmxlIHB1YmxpYyBwYXlhYmxlIHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgb25lVG9rZW4gPSAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKTsKICAgICAgICB1aW50MjU2IHRva2VuVmFsdWUgPSB0b2tlblZhbHVlSW5FdGhlcihfcmNUb2tlblZhbHVlKTsKICAgICAgICB1aW50MjU2IHRva2VuQW1vdW50ID0gbXNnLnZhbHVlLm11bChvbmVUb2tlbikuZGl2KHRva2VuVmFsdWUpOwogICAgICAgIGFkZHJlc3MgX2FtYmFzc2Fkb3IgPSBtc2cuc2VuZGVyOwogICAgICAgIAogICAgICAgIAogICAgICAgIHVpbnQyNTYgcmVtYWluaW5nVG9rZW5zID0gdG9rZW5Db250cmFjdC5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgaWYgKCBfcmVtYWluaW5nVG9rZW5zIDwgcmVtYWluaW5nVG9rZW5zICkgewogICAgICAgICAgICByZW1haW5pbmdUb2tlbnMgPSBfcmVtYWluaW5nVG9rZW5zOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAoIHJlbWFpbmluZ1Rva2VucyA8IHRva2VuQW1vdW50ICkgewogICAgICAgICAgICB1aW50MjU2IHJlZnVuZCA9ICh0b2tlbkFtb3VudCAtIHJlbWFpbmluZ1Rva2VucykubXVsKHRva2VuVmFsdWUpLmRpdihvbmVUb2tlbik7CiAgICAgICAgICAgIHRva2VuQW1vdW50ID0gcmVtYWluaW5nVG9rZW5zOwogICAgICAgICAgICBmb3J3YXJkKG1zZy52YWx1ZS1yZWZ1bmQpOwoJCQlyZW1haW5pbmdUb2tlbnMgPSAwOyAvLyBzZXQgcmVtYWluaW5nIHRva2VuIHRvIDAKICAgICAgICAgICAgIF9idXllci50cmFuc2ZlcihyZWZ1bmQpOwogICAgICAgIH0gZWxzZSB7CgkJCXJlbWFpbmluZ1Rva2VucyA9IHJlbWFpbmluZ1Rva2Vucy5zdWIodG9rZW5BbW91bnQpOyAvLyB1cGRhdGUgcmVtYWluaW5nIHRva2VuIHdpdGhvdXQgYm9udXMKICAgICAgICAgICAgZm9yd2FyZChtc2cudmFsdWUpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICB0b2tlbkNvbnRyYWN0LnRyYW5zZmVyKF9idXllciwgdG9rZW5BbW91bnQpOwogICAgICAgIGVtaXQgQnV5KF9idXllciwgdG9rZW5BbW91bnQsIF9hbWJhc3NhZG9yKTsKCQkKICAgICAgICByZXR1cm4gdG9rZW5BbW91bnQ7IAogICAgfQogICAgCiAgICBmdW5jdGlvbiBmb3J3YXJkKHVpbnQyNTYgX2Ftb3VudCkgaW50ZXJuYWwgewogICAgICAgIHVpbnQyNTYgYWR2aXNvckFtb3VudCA9IF9hbW91bnQubXVsKGFkdmlzb3JGZWUpLmRpdigxMCoqMyk7CiAgICAgICAgdWludDI1NiB3YWxsZXRBbW91bnQgPSBfYW1vdW50IC0gYWR2aXNvckFtb3VudDsKICAgICAgICBhZHZpc29yLnRyYW5zZmVyKGFkdmlzb3JBbW91bnQpOwogICAgICAgIHdhbGxldC50cmFuc2Zlcih3YWxsZXRBbW91bnQpOwogICAgfQoKICAgIGV2ZW50IE5ld1JDKGFkZHJlc3MgY29udHIpOwogICAgCiAgICBmdW5jdGlvbiBhZGRNZUJ5UkMoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUodHgub3JpZ2luID09IG93bmVyKTsKICAgICAgICAKICAgICAgICByY1sgbXNnLnNlbmRlciBdICA9IHRydWU7CiAgICAgICAgCiAgICAgICAgZW1pdCBOZXdSQyhtc2cuc2VuZGVyKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0VGltZSh1aW50MjU2IF9uZXdTdGFydCwgdWludDI1NiBfbmV3RW5kKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpZiAoIF9uZXdTdGFydCAhPSAwICkgc3RhcnRUaW1lID0gX25ld1N0YXJ0OwogICAgICAgIGlmICggX25ld0VuZCAhPSAwICkgZW5kVGltZSA9IF9uZXdFbmQ7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXcoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgdG8udHJhbnNmZXIodmFsdWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB3aXRoZHJhd1Rva2VucyhhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdG9rZW5Db250cmFjdC50cmFuc2Zlcih0bywgdmFsdWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRUb2tlbkNvbnRyYWN0KGFkZHJlc3MgX3Rva2VuQ29udHJhY3QpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHRva2VuQ29udHJhY3QgPSB0b2tlbkludGVyZmFjZShfdG9rZW5Db250cmFjdCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0V2FsbGV0QWRkcmVzcyhhZGRyZXNzIF93YWxsZXQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldEFkdmlzb3JBZGRyZXNzKGFkZHJlc3MgX2Fkdmlzb3IpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgICAgICBhZHZpc29yID0gX2Fkdmlzb3I7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldEFkdmlzb3JGZWUodWludDI1NiBfYWR2aXNvckZlZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgICAgIGFkdmlzb3JGZWUgPSBfYWR2aXNvckZlZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0UmF0ZUNvbnRyYWN0KGFkZHJlc3MgX3JhdGVBZGRyZXNzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByYXRlQ29udHJhY3QgPSByYXRlSW50ZXJmYWNlKF9yYXRlQWRkcmVzcyk7CiAgICB9CgkKCWZ1bmN0aW9uIGNsYWltKGFkZHJlc3MgX2J1eWVyLCB1aW50MjU2IF9hbW91bnQpIG9ubHlSQyBwdWJsaWMgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIHRva2VuQ29udHJhY3QudHJhbnNmZXIoX2J1eWVyLCBfYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICB9Cn0='.
	

]
