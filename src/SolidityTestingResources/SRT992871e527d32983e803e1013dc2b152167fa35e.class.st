Class {
	#name : #SRT992871e527d32983e803e1013dc2b152167fa35e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT992871e527d32983e803e1013dc2b152167fa35e >> base64 [
	^ 'Ly8gQWJzdHJhY3QgY29udHJhY3QgZm9yIHRoZSBmdWxsIEVSQyAyMCBUb2tlbiBzdGFuZGFyZAovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKcHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCmNvbnRyYWN0IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIHNhZmVEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBhc3NlcnQoYiA+IDApOwogICAgICAgIHVpbnQgYyA9IGEgLyBiOwogICAgICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludDI1NiB4LCB1aW50MjU2IHkpIGludGVybmFsIHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgeiA9IHggKyB5OwogICAgICAgIGFzc2VydCgoeiA+PSB4KSAmJiAoeiA+PSB5KSk7CiAgICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZVN1YnRyYWN0KHVpbnQyNTYgeCwgdWludDI1NiB5KSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoeCA+PSB5KTsKICAgICAgICB1aW50MjU2IHogPSB4IC0geTsKICAgICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlTXVsdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0geCAqIHk7CiAgICAgICAgYXNzZXJ0KCh4ID09IDApfHwoei94ID09IHkpKTsKICAgICAgICByZXR1cm4gejsKICAgIH0KfQoKY29udHJhY3QgVG9rZW4gewogICAgLyogVGhpcyBpcyBhIHNsaWdodCBjaGFuZ2UgdG8gdGhlIEVSQzIwIGJhc2Ugc3RhbmRhcmQuCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKICAgIGlzIHJlcGxhY2VkIHdpdGg6CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIFRoaXMgYXV0b21hdGljYWxseSBjcmVhdGVzIGEgZ2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgdG90YWxTdXBwbHkuCiAgICBUaGlzIGlzIG1vdmVkIHRvIHRoZSBiYXNlIGNvbnRyYWN0IHNpbmNlIHB1YmxpYyBnZXR0ZXIgZnVuY3Rpb25zIGFyZSBub3QKICAgIGN1cnJlbnRseSByZWNvZ25pc2VkIGFzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBtYXRjaGluZyBhYnN0cmFjdAogICAgZnVuY3Rpb24gYnkgdGhlIGNvbXBpbGVyLgogICAgKi8KICAgIC8vLyB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4gewoKICAgIHVpbnQyNTYgY29uc3RhbnQgTUFYX1VJTlQyNTYgPSAyKioyNTYgLSAxOwoKICAgIGJvb2wgcHVibGljIGlzRnJvemVuOyAgICAgICAgICAgICAgLy8gc3dpdGNoZWQgdG8gdHJ1ZSBpbiBmcm96ZW4gc3RhdGUKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChpc0Zyb3plbikgcmV2ZXJ0KCk7CiAgICAgICAgLy9EZWZhdWx0IGFzc3VtZXMgdG90YWxTdXBwbHkgY2FuJ3QgYmUgb3ZlciBtYXggKDJeMjU2IC0gMSkuCiAgICAgICAgLy9JZiB5b3VyIHRva2VuIGxlYXZlcyBvdXQgdG90YWxTdXBwbHkgYW5kIGNhbiBpc3N1ZSBtb3JlIHRva2VucyBhcyB0aW1lIGdvZXMgb24sIHlvdSBuZWVkIHRvIGNoZWNrIGlmIGl0IGRvZXNuJ3Qgd3JhcC4KICAgICAgICAvL1JlcGxhY2UgdGhlIGlmIHdpdGggdGhpcyBvbmUgaW5zdGVhZC4KICAgICAgICAvL3JlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoaXNGcm96ZW4pIHJldmVydCgpOwogICAgICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgICAgICAvL3JlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pOwogICAgICAgIHVpbnQyNTYgYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93YW5jZSA+PSBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgaWYgKGFsbG93YW5jZSA8IE1BWF9VSU5UMjU2KSB7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICB9CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwp9Cgpjb250cmFjdCBQcmVBZHNNb2JpbGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBTYWZlTWF0aCB7CgogICAgLyogUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gKi8KCiAgICAvKgogICAgICAgIE5PVEU6CiAgICAgICAgVGhlIGZvbGxvd2luZyB2YXJpYWJsZXMgYXJlIE9QVElPTkFMIHZhbml0aWVzLiBPbmUgZG9lcyBub3QgaGF2ZSB0byBpbmNsdWRlIHRoZW0uCiAgICAgICAgVGhleSBhbGxvdyBvbmUgdG8gY3VzdG9taXNlIHRoZSB0b2tlbiBjb250cmFjdCAmIGluIG5vIHdheSBpbmZsdWVuY2VzIHRoZSBjb3JlIGZ1bmN0aW9uYWxpdHkuCiAgICAgICAgU29tZSB3YWxsZXRzL2ludGVyZmFjZXMgbWlnaHQgbm90IGV2ZW4gYm90aGVyIHRvIGxvb2sgYXQgdGhpcyBpbmZvcm1hdGlvbi4KICAgICovCiAgICBzdHJpbmcgcHVibGljIG5hbWU7ICAgICAgICAgICAgICAgICAgIC8vZmFuY3kgbmFtZTogZWcgU2ltb24gQnVja3MKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDE4OyAgICAgICAgICAgICAgICAvL0hvdyBtYW55IGRlY2ltYWxzIHRvIHNob3cuIGllLiBUaGVyZSBjb3VsZCAxMDAwIGJhc2UgdW5pdHMgd2l0aCAzIGRlY2ltYWxzLiBNZWFuaW5nIDAuOTgwIFNCWCA9IDk4MCBiYXNlIHVuaXRzLiBJdCdzIGxpa2UgY29tcGFyaW5nIDEgd2VpIHRvIDEgZXRoZXIuCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsgICAgICAgICAgICAgICAgIC8vQW4gaWRlbnRpZmllcjogZWcgU0JYCiAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAnSDAuMSc7ICAgICAgIC8vaHVtYW4gMC4xIHN0YW5kYXJkLiBKdXN0IGFuIGFyYml0cmFyeSB2ZXJzaW9uaW5nIHNjaGVtZS4KCiAgICAvLyBjb250cmFjdHMKICAgIGFkZHJlc3MgcHVibGljIGV0aEZ1bmREZXBvc2l0OyAgICAgIC8vIGRlcG9zaXQgYWRkcmVzcyBmb3IgRVRIIGZvciBBZHNNb2JpbGUKCiAgICAvLyBjcm93ZHNhbGUgcGFyYW1ldGVycwogICAgYm9vbCBwdWJsaWMgaXNGaW5hbGl6ZWQ7ICAgICAgICAgICAgICAvLyBzd2l0Y2hlZCB0byB0cnVlIGluIG9wZXJhdGlvbmFsIHN0YXRlCiAgICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nU3RhcnRCbG9jazsKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdFbmRCbG9jazsKICAgIHVpbnQyNTYgcHVibGljIGNoZWNrTnVtYmVyOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHlXaXRoT3V0Qm9udXM7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlbkV4Y2hhbmdlUmF0ZSAgICAgICAgICAgICAgID0gNDAwOyAvLyA0MDAgQWRzTW9iaWxlIHRva2VucyBwZXIgMSBFVEgKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuQ3JlYXRpb25DYXBXaXRoT3V0Qm9udXMgICAgPSAzICogKDEwKio2KSAqIDEwKioxODsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuTmVlZEZvckJvbnVzTGV2ZWwwICAgICAgICAgPSAxMDAgKiAoMTAqKjMpICogMTAqKjE4OwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgYm9udXNMZXZlbDBQZXJjZW50TW9kaWZpZXIgICAgICA9IDMwMDsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuTmVlZEZvckJvbnVzTGV2ZWwxICAgICAgICAgPSA1MCAqICgxMCoqMykgKiAxMCoqMTg7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBib251c0xldmVsMVBlcmNlbnRNb2RpZmllciAgICAgID0gMjAwOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5DcmVhdGlvbk1pblBheW1lbnQgICAgICAgICA9IDUwICogKDEwKiozKSAqIDEwKioxODsKCiAgICAvLyBldmVudHMKICAgIGV2ZW50IENyZWF0ZUFkcyhhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CgogICAgLy8gY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIFByZUFkc01vYmlsZVRva2VuKAogICAgc3RyaW5nIF90b2tlbk5hbWUsCiAgICBzdHJpbmcgX3Rva2VuU3ltYm9sLAogICAgYWRkcmVzcyBfZXRoRnVuZERlcG9zaXQsCiAgICB1aW50MjU2IF9mdW5kaW5nU3RhcnRCbG9jaywKICAgIHVpbnQyNTYgX2Z1bmRpbmdFbmRCbG9jawogICAgKQogICAgewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsgICAgICAgICAgICAgICAvLyBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucwogICAgICAgIHRvdGFsU3VwcGx5ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdG90YWwgc3VwcGx5CiAgICAgICAgbmFtZSA9IF90b2tlbk5hbWU7ICAgICAgICAgICAvLyBTZXQgdGhlIG5hbWUgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgICAgICBkZWNpbWFscyA9IDE4OyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW1vdW50IG9mIGRlY2ltYWxzIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgc3ltYm9sID0gX3Rva2VuU3ltYm9sOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgc3ltYm9sIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgaXNGaW5hbGl6ZWQgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRyb2xzIHByZSB0aHJvdWdoIGNyb3dkc2FsZSBzdGF0ZQogICAgICAgIGlzRnJvemVuID0gZmFsc2U7CiAgICAgICAgZXRoRnVuZERlcG9zaXQgPSBfZXRoRnVuZERlcG9zaXQ7CiAgICAgICAgZnVuZGluZ1N0YXJ0QmxvY2sgPSBfZnVuZGluZ1N0YXJ0QmxvY2s7CiAgICAgICAgZnVuZGluZ0VuZEJsb2NrID0gX2Z1bmRpbmdFbmRCbG9jazsKICAgICAgICBjaGVja051bWJlciA9IDQyOyAgICAgICAgICAgICAgICAgICAgICAgLy9BbnN3ZXIgdG8gdGhlIFVsdGltYXRlIFF1ZXN0aW9uIG9mIExpZmUsIHRoZSBVbml2ZXJzZSwgYW5kIEV2ZXJ5dGhpbmcKICAgIH0KCiAgICAvLy8gQGRldiBBY2NlcHRzIGV0aGVyIGFuZCBjcmVhdGVzIG5ldyBBRFMgdG9rZW5zLgogICAgZnVuY3Rpb24gY3JlYXRlVG9rZW5zKCkgcHVibGljIHBheWFibGUgewogICAgICAgIGlmIChpc0ZpbmFsaXplZCkgcmV2ZXJ0KCk7CiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8IGZ1bmRpbmdTdGFydEJsb2NrKSByZXZlcnQoKTsKICAgICAgICBpZiAoYmxvY2subnVtYmVyID4gZnVuZGluZ0VuZEJsb2NrKSByZXZlcnQoKTsKICAgICAgICBpZiAobXNnLnZhbHVlID09IDApIHJldmVydCgpOwogICAgICAgIHVpbnQyNTYgdG9rZW5zV2l0aE91dEJvbnVzID0gc2FmZU11bHQobXNnLnZhbHVlLCB0b2tlbkV4Y2hhbmdlUmF0ZSk7IC8vIGNoZWNrIHRoYXQgd2UncmUgbm90IG92ZXIgdG90YWxzCiAgICAgICAgaWYgKHRva2Vuc1dpdGhPdXRCb251cyA8IHRva2VuQ3JlYXRpb25NaW5QYXltZW50KSByZXZlcnQoKTsKICAgICAgICB1aW50MjU2IGNoZWNrZWRTdXBwbHlXaXRoT3V0Qm9udXMgPSBzYWZlQWRkKHRvdGFsU3VwcGx5V2l0aE91dEJvbnVzLCB0b2tlbnNXaXRoT3V0Qm9udXMpOwogICAgICAgIC8vIHJldHVybiBtb25leSBpZiBzb21ldGhpbmcgZ29lcyB3cm9uZwogICAgICAgIGlmICh0b2tlbkNyZWF0aW9uQ2FwV2l0aE91dEJvbnVzIDwgY2hlY2tlZFN1cHBseVdpdGhPdXRCb251cykgcmV2ZXJ0KCk7ICAvLyBvZGQgZnJhY3Rpb25zIHdvbid0IGJlIGZvdW5kCiAgICAgICAgdG90YWxTdXBwbHlXaXRoT3V0Qm9udXMgPSBjaGVja2VkU3VwcGx5V2l0aE91dEJvbnVzOwoKICAgICAgICB1aW50MjU2IHRva2VucyA9IHRva2Vuc1dpdGhPdXRCb251czsKICAgICAgICBpZih0b2tlbnMgPj0gdG9rZW5OZWVkRm9yQm9udXNMZXZlbDApIHsKICAgICAgICAgICAgdG9rZW5zID0gc2FmZURpdih0b2tlbnMsIDEwMCk7CiAgICAgICAgICAgIHRva2VucyA9IHNhZmVNdWx0KHRva2VucywgYm9udXNMZXZlbDBQZXJjZW50TW9kaWZpZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmKHRva2VucyA+PSB0b2tlbk5lZWRGb3JCb251c0xldmVsMSkgewogICAgICAgICAgICAgICAgdG9rZW5zID0gc2FmZURpdih0b2tlbnMsIDEwMCk7CiAgICAgICAgICAgICAgICB0b2tlbnMgPSBzYWZlTXVsdCh0b2tlbnMsIGJvbnVzTGV2ZWwxUGVyY2VudE1vZGlmaWVyKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB1aW50MjU2IGNoZWNrZWRTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCB0b2tlbnMpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gY2hlY2tlZFN1cHBseTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSB0b2tlbnM7ICAvLyBzYWZlQWRkIG5vdCBuZWVkZWQ7IGJhZCBzZW1hbnRpY3MgdG8gdXNlIGhlcmUKICAgICAgICBDcmVhdGVBZHMobXNnLnNlbmRlciwgdG9rZW5zKTsgIC8vIGxvZ3MgdG9rZW4gY3JlYXRpb24KICAgIH0KCiAgICAvL2p1c3QgZm9yIHRlc3QgY2FzaGluIGFuZCBjYXNob3V0IG9uIHNtYWxsIGFtb3VudCBiZWZvcmUgbGV0IGl0IGdvCiAgICBmdW5jdGlvbiBjYXNoaW4oKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgICAgICBpZiAoaXNGaW5hbGl6ZWQpIHJldmVydCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhc2hvdXQodWludDI1NiBhbW91bnQpIGV4dGVybmFsIHsKICAgICAgICBpZiAoaXNGaW5hbGl6ZWQpIHJldmVydCgpOwogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGV0aEZ1bmREZXBvc2l0KSByZXZlcnQoKTsgLy8gbG9ja3MgZmluYWxpemUgdG8gdGhlIHVsdGltYXRlIEVUSCBvd25lcgogICAgICAgIGlmICghZXRoRnVuZERlcG9zaXQuc2VuZChhbW91bnQpKSByZXZlcnQoKTsgIC8vIHNlbmQgdGhlIGV0aCB0byBBZHNNb2JpbGUKICAgIH0KCiAgICAvL2luIGNhc2Ugd2Ugd2FudCB0byB0cmFuc2ZlciB0b2tlbiB0byBvdGhlciBjb250cmFjdCB3ZSBuZWVkIGZyZWV6ZSBhbGwgZnV0dXJlIHRyYW5zZmVycwogICAgZnVuY3Rpb24gZnJlZXplKCkgZXh0ZXJuYWwgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGV0aEZ1bmREZXBvc2l0KSByZXZlcnQoKTsgLy8gbG9ja3MgZmluYWxpemUgdG8gdGhlIHVsdGltYXRlIEVUSCBvd25lcgogICAgICAgIGlzRnJvemVuID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB1bkZyZWV6ZSgpIGV4dGVybmFsIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBldGhGdW5kRGVwb3NpdCkgcmV2ZXJ0KCk7IC8vIGxvY2tzIGZpbmFsaXplIHRvIHRoZSB1bHRpbWF0ZSBFVEggb3duZXIKICAgICAgICBpc0Zyb3plbiA9IGZhbHNlOwogICAgfQoKICAgIC8vLyBAZGV2IEVuZHMgdGhlIGZ1bmRpbmcgcGVyaW9kIGFuZCBzZW5kcyB0aGUgRVRIIGhvbWUKICAgIGZ1bmN0aW9uIGZpbmFsaXplKCkgZXh0ZXJuYWwgewogICAgICAgIGlmIChpc0ZpbmFsaXplZCkgcmV2ZXJ0KCk7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gZXRoRnVuZERlcG9zaXQpIHJldmVydCgpOyAvLyBsb2NrcyBmaW5hbGl6ZSB0byB0aGUgdWx0aW1hdGUgRVRIIG93bmVyCiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8PSBmdW5kaW5nRW5kQmxvY2sgJiYgdG90YWxTdXBwbHlXaXRoT3V0Qm9udXMgPCB0b2tlbkNyZWF0aW9uQ2FwV2l0aE91dEJvbnVzIC0gdG9rZW5DcmVhdGlvbk1pblBheW1lbnQpIHJldmVydCgpOwogICAgICAgIC8vIG1vdmUgdG8gb3BlcmF0aW9uYWwKICAgICAgICBpZiAoIWV0aEZ1bmREZXBvc2l0LnNlbmQodGhpcy5iYWxhbmNlKSkgcmV2ZXJ0KCk7ICAvLyBzZW5kIHRoZSBldGggdG8gQWRzTW9iaWxlCiAgICAgICAgaXNGaW5hbGl6ZWQgPSB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGYWxsYmFjayBmdW5jdGlvbiB3aGljaCByZWNlaXZlcyBldGhlciBhbmQgY3JlYXRlZCB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIHRva2VucyBmb3IgdGhlCiAgICAgKiBtc2cuc2VuZGVyLgogICAgICovCiAgICBmdW5jdGlvbigpIGV4dGVybmFsIHBheWFibGUgewogICAgICAgIGNyZWF0ZVRva2VucygpOwogICAgfQoKfQ=='.
	

]
