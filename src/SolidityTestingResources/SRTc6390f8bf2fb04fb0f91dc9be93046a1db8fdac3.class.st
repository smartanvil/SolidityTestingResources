Class {
	#name : #SRTc6390f8bf2fb04fb0f91dc9be93046a1db8fdac3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc6390f8bf2fb04fb0f91dc9be93046a1db8fdac3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBUb2tlbkZhY3RvcnlJbnRlcmZhY2UgewoKICAgIGZ1bmN0aW9uIGNyZWF0ZUNsb25lVG9rZW4oCiAgICAgICAgYWRkcmVzcyBfcGFyZW50VG9rZW4sCiAgICAgICAgdWludCBfc25hcHNob3RCbG9jaywKICAgICAgICBzdHJpbmcgX3Rva2VuTmFtZSwKICAgICAgICBzdHJpbmcgX3Rva2VuU3ltYm9sCiAgICAgICkgcHVibGljIHJldHVybnMgKFByb29mVG9rZW4gbmV3VG9rZW4pOwp9Cgpjb250cmFjdCBDb250cm9sbGVySW50ZXJmYWNlIHsKCiAgICBmdW5jdGlvbiBwcm94eVBheW1lbnQoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBvblRyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gb25BcHByb3ZlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zKGJvb2wpOwp9CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgQXBwcm92ZUFuZENhbGxSZWNlaXZlciB7CiAgICBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBmcm9tLCB1aW50MjU2IF9hbW91bnQsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZGF0YSkgcHVibGljOwp9Cgpjb250cmFjdCBDb250cm9sbGFibGUgewogIGFkZHJlc3MgcHVibGljIGNvbnRyb2xsZXI7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIgYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBDb250cm9sbGFibGUoKSBwdWJsaWMgewogICAgY29udHJvbGxlciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seUNvbnRyb2xsZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY29udHJvbGxlcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3Q29udHJvbGxlciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJDb250cm9sKGFkZHJlc3MgbmV3Q29udHJvbGxlcikgcHVibGljIG9ubHlDb250cm9sbGVyIHsKICAgIGlmIChuZXdDb250cm9sbGVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgY29udHJvbGxlciA9IG5ld0NvbnRyb2xsZXI7CiAgICB9CiAgfQoKfQoKY29udHJhY3QgUHJvb2ZUb2tlbkludGVyZmFjZSBpcyBDb250cm9sbGFibGUgewoKICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwogIGV2ZW50IENsYWltZWRUb2tlbnMoYWRkcmVzcyBpbmRleGVkIF90b2tlbiwgYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfYW1vdW50KTsKICBldmVudCBOZXdDbG9uZVRva2VuKGFkZHJlc3MgaW5kZXhlZCBfY2xvbmVUb2tlbiwgdWludCBfc25hcHNob3RCbG9jayk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiB0b3RhbFN1cHBseUF0KHVpbnQgX2Jsb2NrTnVtYmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogIGZ1bmN0aW9uIGJhbGFuY2VPZkF0KGFkZHJlc3MgX293bmVyLCB1aW50IF9ibG9ja051bWJlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50LCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gaW1wb3J0UHJlc2FsZUJhbGFuY2VzKGFkZHJlc3NbXSBfYWRkcmVzc2VzLCB1aW50MjU2W10gX2JhbGFuY2VzLCBhZGRyZXNzIF9wcmVzYWxlQWRkcmVzcykgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGxvY2tQcmVzYWxlQmFsYW5jZXMoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBlbmFibGVUcmFuc2ZlcnMoYm9vbCBfdHJhbnNmZXJzRW5hYmxlZCkgcHVibGljOwogIGZ1bmN0aW9uIGNyZWF0ZUNsb25lVG9rZW4odWludCBfc25hcHNob3RCbG9jaywgc3RyaW5nIF9jbG9uZVRva2VuTmFtZSwgc3RyaW5nIF9jbG9uZVRva2VuU3ltYm9sKSBwdWJsaWMgcmV0dXJucyAoYWRkcmVzcyk7Cgp9Cgpjb250cmFjdCBQcm9vZlRva2VuIGlzIENvbnRyb2xsYWJsZSB7CgogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogIFByb29mVG9rZW5JbnRlcmZhY2UgcHVibGljIHBhcmVudFRva2VuOwogIFRva2VuRmFjdG9yeUludGVyZmFjZSBwdWJsaWMgdG9rZW5GYWN0b3J5OwoKICBzdHJpbmcgcHVibGljIG5hbWU7CiAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uOwogIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsKCiAgc3RydWN0IENoZWNrcG9pbnQgewogICAgdWludDEyOCBmcm9tQmxvY2s7CiAgICB1aW50MTI4IHZhbHVlOwogIH0KCiAgdWludDI1NiBwdWJsaWMgcGFyZW50U25hcFNob3RCbG9jazsKICB1aW50MjU2IHB1YmxpYyBjcmVhdGlvbkJsb2NrOwogIGJvb2wgcHVibGljIHRyYW5zZmVyc0VuYWJsZWQ7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiBDaGVja3BvaW50W10pIGJhbGFuY2VzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgQ2hlY2twb2ludFtdIHRvdGFsU3VwcGx5SGlzdG9yeTsKCiAgYm9vbCBwdWJsaWMgbWludGluZ0ZpbmlzaGVkID0gZmFsc2U7CiAgYm9vbCBwdWJsaWMgcHJlc2FsZUJhbGFuY2VzTG9ja2VkID0gZmFsc2U7CgogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOU19BTExPQ0FURURfVE9fUFJPT0YgPSAxMTgxMDMxICogKDEwICoqIDE4KTsKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT1RBTF9QUkVTQUxFX1RPS0VOUyA9IDExMjM4NjcxMjkyNDcyNTUwODgwMjQwMDsKCiAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBNaW50RmluaXNoZWQoKTsKICBldmVudCBDbGFpbWVkVG9rZW5zKGFkZHJlc3MgaW5kZXhlZCBfdG9rZW4sIGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIHVpbnQgX2Ftb3VudCk7CiAgZXZlbnQgTmV3Q2xvbmVUb2tlbihhZGRyZXNzIGluZGV4ZWQgY2xvbmVUb2tlbik7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKCgoKICBmdW5jdGlvbiBQcm9vZlRva2VuKAogICAgYWRkcmVzcyBfdG9rZW5GYWN0b3J5LAogICAgYWRkcmVzcyBfcGFyZW50VG9rZW4sCiAgICB1aW50MjU2IF9wYXJlbnRTbmFwU2hvdEJsb2NrLAogICAgc3RyaW5nIF90b2tlbk5hbWUsCiAgICBzdHJpbmcgX3Rva2VuU3ltYm9sCiAgICApIHB1YmxpYyB7CiAgICAgIHRva2VuRmFjdG9yeSA9IFRva2VuRmFjdG9yeUludGVyZmFjZShfdG9rZW5GYWN0b3J5KTsKICAgICAgcGFyZW50VG9rZW4gPSBQcm9vZlRva2VuSW50ZXJmYWNlKF9wYXJlbnRUb2tlbik7CiAgICAgIHBhcmVudFNuYXBTaG90QmxvY2sgPSBfcGFyZW50U25hcFNob3RCbG9jazsKICAgICAgbmFtZSA9IF90b2tlbk5hbWU7CiAgICAgIHN5bWJvbCA9IF90b2tlblN5bWJvbDsKICAgICAgZGVjaW1hbHMgPSAxODsKICAgICAgdHJhbnNmZXJzRW5hYmxlZCA9IGZhbHNlOwogICAgICBjcmVhdGlvbkJsb2NrID0gYmxvY2subnVtYmVyOwogICAgICB2ZXJzaW9uID0gJzAuMSc7CiAgfQoKICBmdW5jdGlvbigpIHB1YmxpYyBwYXlhYmxlIHsKICAgIHJldmVydCgpOwogIH0KCgogIC8qKgogICogUmV0dXJucyB0aGUgdG90YWwgUHJvb2YgdG9rZW4gc3VwcGx5IGF0IHRoZSBjdXJyZW50IGJsb2NrCiAgKiBAcmV0dXJuIHRvdGFsIHN1cHBseSB7dWludH0KICAqLwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiB0b3RhbFN1cHBseUF0KGJsb2NrLm51bWJlcik7CiAgfQoKICAvKioKICAqIFJldHVybnMgdGhlIHRvdGFsIFByb29mIHRva2VuIHN1cHBseSBhdCB0aGUgZ2l2ZW4gYmxvY2sgbnVtYmVyCiAgKiBAcGFyYW0gX2Jsb2NrTnVtYmVyIHt1aW50fQogICogQHJldHVybiB0b3RhbCBzdXBwbHkge3VpbnR9CiAgKi8KICBmdW5jdGlvbiB0b3RhbFN1cHBseUF0KHVpbnQgX2Jsb2NrTnVtYmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAvLyBUaGVzZSBuZXh0IGZldyBsaW5lcyBhcmUgdXNlZCB3aGVuIHRoZSB0b3RhbFN1cHBseSBvZiB0aGUgdG9rZW4gaXMKICAgIC8vICByZXF1ZXN0ZWQgYmVmb3JlIGEgY2hlY2sgcG9pbnQgd2FzIGV2ZXIgY3JlYXRlZCBmb3IgdGhpcyB0b2tlbiwgaXQKICAgIC8vICByZXF1aXJlcyB0aGF0IHRoZSBgcGFyZW50VG9rZW4udG90YWxTdXBwbHlBdGAgYmUgcXVlcmllZCBhdCB0aGUKICAgIC8vICBnZW5lc2lzIGJsb2NrIGZvciB0aGlzIHRva2VuIGFzIHRoYXQgY29udGFpbnMgdG90YWxTdXBwbHkgb2YgdGhpcwogICAgLy8gIHRva2VuIGF0IHRoaXMgYmxvY2sgbnVtYmVyLgogICAgaWYgKCh0b3RhbFN1cHBseUhpc3RvcnkubGVuZ3RoID09IDApIHx8ICh0b3RhbFN1cHBseUhpc3RvcnlbMF0uZnJvbUJsb2NrID4gX2Jsb2NrTnVtYmVyKSkgewogICAgICAgIGlmIChhZGRyZXNzKHBhcmVudFRva2VuKSAhPSAwKSB7CiAgICAgICAgICAgIHJldHVybiBwYXJlbnRUb2tlbi50b3RhbFN1cHBseUF0KG1pbihfYmxvY2tOdW1iZXIsIHBhcmVudFNuYXBTaG90QmxvY2spKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgLy8gVGhpcyB3aWxsIHJldHVybiB0aGUgZXhwZWN0ZWQgdG90YWxTdXBwbHkgZHVyaW5nIG5vcm1hbCBzaXR1YXRpb25zCiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBnZXRWYWx1ZUF0KHRvdGFsU3VwcGx5SGlzdG9yeSwgX2Jsb2NrTnVtYmVyKTsKICAgIH0KICB9CgogIC8qKgogICogUmV0dXJucyB0aGUgdG9rZW4gaG9sZGVyIGJhbGFuY2UgYXQgdGhlIGN1cnJlbnQgYmxvY2sKICAqIEBwYXJhbSBfb3duZXIge2FkZHJlc3N9CiAgKiBAcmV0dXJuIGJhbGFuY2Uge3VpbnR9CiAgICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZU9mQXQoX293bmVyLCBibG9jay5udW1iZXIpOwogIH0KCiAgLyoqCiAgKiBSZXR1cm5zIHRoZSB0b2tlbiBob2xkZXIgYmFsYW5jZSB0aGUgdGhlIGdpdmVuIGJsb2NrIG51bWJlcgogICogQHBhcmFtIF9vd25lciB7YWRkcmVzc30KICAqIEBwYXJhbSBfYmxvY2tOdW1iZXIge3VpbnR9CiAgKiBAcmV0dXJuIGJhbGFuY2Uge3VpbnR9CiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2ZBdChhZGRyZXNzIF9vd25lciwgdWludCBfYmxvY2tOdW1iZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAvLyBUaGVzZSBuZXh0IGZldyBsaW5lcyBhcmUgdXNlZCB3aGVuIHRoZSBiYWxhbmNlIG9mIHRoZSB0b2tlbiBpcwogICAgLy8gIHJlcXVlc3RlZCBiZWZvcmUgYSBjaGVjayBwb2ludCB3YXMgZXZlciBjcmVhdGVkIGZvciB0aGlzIHRva2VuLCBpdAogICAgLy8gIHJlcXVpcmVzIHRoYXQgdGhlIGBwYXJlbnRUb2tlbi5iYWxhbmNlT2ZBdGAgYmUgcXVlcmllZCBhdCB0aGUKICAgIC8vICBnZW5lc2lzIGJsb2NrIGZvciB0aGF0IHRva2VuIGFzIHRoaXMgY29udGFpbnMgaW5pdGlhbCBiYWxhbmNlIG9mCiAgICAvLyAgdGhpcyB0b2tlbgogICAgaWYgKChiYWxhbmNlc1tfb3duZXJdLmxlbmd0aCA9PSAwKSB8fCAoYmFsYW5jZXNbX293bmVyXVswXS5mcm9tQmxvY2sgPiBfYmxvY2tOdW1iZXIpKSB7CiAgICAgICAgaWYgKGFkZHJlc3MocGFyZW50VG9rZW4pICE9IDApIHsKICAgICAgICAgICAgcmV0dXJuIHBhcmVudFRva2VuLmJhbGFuY2VPZkF0KF9vd25lciwgbWluKF9ibG9ja051bWJlciwgcGFyZW50U25hcFNob3RCbG9jaykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIEhhcyBubyBwYXJlbnQKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQoKICAgIC8vIFRoaXMgd2lsbCByZXR1cm4gdGhlIGV4cGVjdGVkIGJhbGFuY2UgZHVyaW5nIG5vcm1hbCBzaXR1YXRpb25zCiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBnZXRWYWx1ZUF0KGJhbGFuY2VzW19vd25lcl0sIF9ibG9ja051bWJlcik7CiAgICB9CiAgfQoKICAvKioKICAqIFN0YW5kYXJkIEVSQzIwIHRyYW5zZmVyIHRva2VucwogICogQHBhcmFtIF90byB7YWRkcmVzc30KICAqIEBwYXJhbSBfYW1vdW50IHt1aW50fQogICogQHJldHVybiBzdWNjZXNzIHtib29sfQogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmV0dXJuIGRvVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICB9CgogIC8qKgogICogU3RhbmRhcmQgRVJDMjAgdHJhbnNmZXJGcm9tIGludGVyZmFjZQogICogQHBhcmFtIF9mcm9tIHthZGRyZXNzfQogICogQHBhcmFtIF90byB7YWRkcmVzc30KICAqIEBwYXJhbSBfYW1vdW50IHt1aW50MjU2fQogICogQHJldHVybiBzdWNjZXNzIHtib29sfQogICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHJlcXVpcmUoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfYW1vdW50OwogICAgcmV0dXJuIGRvVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgfQoKICAvKioKICAqIFN0YW5kYXJkIEVSQzIwIGFwcHJvdmUgaW50ZXJmYWNlCiAgKiBAcGFyYW0gX3NwZW5kZXIge2FkZHJlc3N9CiAgKiBAcGFyYW0gX2Ftb3VudCB7dWludDI1Nn0KICAqIEByZXR1cm4gc3VjY2VzcyB7Ym9vbH0KICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXF1aXJlKHRyYW5zZmVyc0VuYWJsZWQpOwoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX2Ftb3VudCA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgIC8vIEFsZXJ0cyB0aGUgdG9rZW4gY29udHJvbGxlciBvZiB0aGUgYXBwcm92ZSBmdW5jdGlvbiBjYWxsCiAgICBpZiAoaXNDb250cmFjdChjb250cm9sbGVyKSkgewogICAgICAgIHJlcXVpcmUoQ29udHJvbGxlckludGVyZmFjZShjb250cm9sbGVyKS5vbkFwcHJvdmUobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpKTsKICAgIH0KCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX2Ftb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCwgYnl0ZXMgX2V4dHJhRGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYXBwcm92ZShfc3BlbmRlciwgX2Ftb3VudCk7CgogICAgQXBwcm92ZUFuZENhbGxSZWNlaXZlcihfc3BlbmRlcikucmVjZWl2ZUFwcHJvdmFsKAogICAgICAgIG1zZy5zZW5kZXIsCiAgICAgICAgX2Ftb3VudCwKICAgICAgICB0aGlzLAogICAgICAgIF9leHRyYURhdGEKICAgICk7CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKCiAgZnVuY3Rpb24gZG9UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBpbnRlcm5hbCByZXR1cm5zKGJvb2wpIHsKICAgIHJlcXVpcmUodHJhbnNmZXJzRW5hYmxlZCk7CiAgICByZXF1aXJlKF9hbW91bnQgPiAwKTsKICAgIHJlcXVpcmUocGFyZW50U25hcFNob3RCbG9jayA8IGJsb2NrLm51bWJlcik7CiAgICByZXF1aXJlKChfdG8gIT0gMCkgJiYgKF90byAhPSBhZGRyZXNzKHRoaXMpKSk7CgogICAgLy8gSWYgdGhlIGFtb3VudCBiZWluZyB0cmFuc2ZlcmVkIGlzIG1vcmUgdGhhbiB0aGUgYmFsYW5jZSBvZiB0aGUKICAgIC8vICBhY2NvdW50IHRoZSB0cmFuc2ZlciByZXR1cm5zIGZhbHNlCiAgICB2YXIgcHJldmlvdXNCYWxhbmNlRnJvbSA9IGJhbGFuY2VPZkF0KF9mcm9tLCBibG9jay5udW1iZXIpOwogICAgcmVxdWlyZShwcmV2aW91c0JhbGFuY2VGcm9tID49IF9hbW91bnQpOwoKICAgIC8vIEFsZXJ0cyB0aGUgdG9rZW4gY29udHJvbGxlciBvZiB0aGUgdHJhbnNmZXIKICAgIGlmIChpc0NvbnRyYWN0KGNvbnRyb2xsZXIpKSB7CiAgICAgIHJlcXVpcmUoQ29udHJvbGxlckludGVyZmFjZShjb250cm9sbGVyKS5vblRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpKTsKICAgIH0KCiAgICAvLyBGaXJzdCB1cGRhdGUgdGhlIGJhbGFuY2UgYXJyYXkgd2l0aCB0aGUgbmV3IHZhbHVlIGZvciB0aGUgYWRkcmVzcwogICAgLy8gIHNlbmRpbmcgdGhlIHRva2VucwogICAgdXBkYXRlVmFsdWVBdE5vdyhiYWxhbmNlc1tfZnJvbV0sIHByZXZpb3VzQmFsYW5jZUZyb20gLSBfYW1vdW50KTsKCiAgICAvLyBUaGVuIHVwZGF0ZSB0aGUgYmFsYW5jZSBhcnJheSB3aXRoIHRoZSBuZXcgdmFsdWUgZm9yIHRoZSBhZGRyZXNzCiAgICAvLyAgcmVjZWl2aW5nIHRoZSB0b2tlbnMKICAgIHZhciBwcmV2aW91c0JhbGFuY2VUbyA9IGJhbGFuY2VPZkF0KF90bywgYmxvY2subnVtYmVyKTsKICAgIHJlcXVpcmUocHJldmlvdXNCYWxhbmNlVG8gKyBfYW1vdW50ID49IHByZXZpb3VzQmFsYW5jZVRvKTsgLy8gQ2hlY2sgZm9yIG92ZXJmbG93CiAgICB1cGRhdGVWYWx1ZUF0Tm93KGJhbGFuY2VzW190b10sIHByZXZpb3VzQmFsYW5jZVRvICsgX2Ftb3VudCk7CgogICAgLy8gQW4gZXZlbnQgdG8gbWFrZSB0aGUgdHJhbnNmZXIgZWFzeSB0byBmaW5kIG9uIHRoZSBibG9ja2NoYWluCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCgogIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2Ftb3VudCkgcHVibGljIG9ubHlDb250cm9sbGVyIGNhbk1pbnQgcmV0dXJucyAoYm9vbCkgewogICAgdWludCBjdXJUb3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5KCk7CiAgICB1aW50IHByZXZpb3VzQmFsYW5jZVRvID0gYmFsYW5jZU9mKF9vd25lcik7CgogICAgcmVxdWlyZShjdXJUb3RhbFN1cHBseSArIF9hbW91bnQgPj0gY3VyVG90YWxTdXBwbHkpOyAvLyBDaGVjayBmb3Igb3ZlcmZsb3cKICAgIHJlcXVpcmUocHJldmlvdXNCYWxhbmNlVG8gKyBfYW1vdW50ID49IHByZXZpb3VzQmFsYW5jZVRvKTsgLy8gQ2hlY2sgZm9yIG92ZXJmbG93CgogICAgdXBkYXRlVmFsdWVBdE5vdyh0b3RhbFN1cHBseUhpc3RvcnksIGN1clRvdGFsU3VwcGx5ICsgX2Ftb3VudCk7CiAgICB1cGRhdGVWYWx1ZUF0Tm93KGJhbGFuY2VzW19vd25lcl0sIHByZXZpb3VzQmFsYW5jZVRvICsgX2Ftb3VudCk7CiAgICBUcmFuc2ZlcigwLCBfb3duZXIsIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBtb2RpZmllciBjYW5NaW50KCkgewogICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogSW1wb3J0IHByZXNhbGUgYmFsYW5jZXMgYmVmb3JlIHRoZSBzdGFydCBvZiB0aGUgdG9rZW4gc2FsZS4gQWZ0ZXIgaW1wb3J0aW5nCiAgICogYmFsYW5jZXMsIGxvY2tQcmVzYWxlQmFsYW5jZXMoKSBoYXMgdG8gYmUgY2FsbGVkIHRvIHByZXZlbnQgZnVydGhlciBtb2RpZmljYXRpb24KICAgKiBvZiBwcmVzYWxlIGJhbGFuY2VzLgogICAqIEBwYXJhbSBfYWRkcmVzc2VzIHthZGRyZXNzW119IEFycmF5IG9mIHByZXNhbGUgYWRkcmVzc2VzCiAgICogQHBhcmFtIF9iYWxhbmNlcyB7dWludDI1NltdfSBBcnJheSBvZiBiYWxhbmNlcyBjb3JyZXNwb25kaW5nIHRvIHByZXNhbGUgYWRkcmVzc2VzLgogICAqIEByZXR1cm4gc3VjY2VzcyB7Ym9vbH0KICAgKi8KICBmdW5jdGlvbiBpbXBvcnRQcmVzYWxlQmFsYW5jZXMoYWRkcmVzc1tdIF9hZGRyZXNzZXMsIHVpbnQyNTZbXSBfYmFsYW5jZXMpIHB1YmxpYyBvbmx5Q29udHJvbGxlciByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKHByZXNhbGVCYWxhbmNlc0xvY2tlZCA9PSBmYWxzZSk7CgogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX2FkZHJlc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICB1cGRhdGVWYWx1ZUF0Tm93KGJhbGFuY2VzW19hZGRyZXNzZXNbaV1dLCBfYmFsYW5jZXNbaV0pOwogICAgICBUcmFuc2ZlcigwLCBfYWRkcmVzc2VzW2ldLCBfYmFsYW5jZXNbaV0pOwogICAgfQoKICAgIHVwZGF0ZVZhbHVlQXROb3codG90YWxTdXBwbHlIaXN0b3J5LCBUT1RBTF9QUkVTQUxFX1RPS0VOUyk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIExvY2sgcHJlc2FsZSBiYWxhbmNlcyBhZnRlciBzdWNjZXNzZnVsIHByZXNhbGUgYmFsYW5jZSBpbXBvcnQKICAgKiBAcmV0dXJuIEEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIGxvY2tQcmVzYWxlQmFsYW5jZXMoKSBwdWJsaWMgb25seUNvbnRyb2xsZXIgcmV0dXJucyAoYm9vbCkgewogICAgcHJlc2FsZUJhbGFuY2VzTG9ja2VkID0gdHJ1ZTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogTG9jayB0aGUgbWludGluZyBvZiBQcm9vZiBUb2tlbnMgLSB0byBiZSBjYWxsZWQgYWZ0ZXIgdGhlIHByZXNhbGUKICAgKiBAcmV0dXJuIHtib29sfSBzdWNjZXNzCiAgKi8KICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgcHVibGljIG9ubHlDb250cm9sbGVyIHJldHVybnMgKGJvb2wpIHsKICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICBNaW50RmluaXNoZWQoKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogRW5hYmxlIG9yIGJsb2NrIHRyYW5zZmVycyAtIHRvIGJlIGNhbGxlZCBpbiBjYXNlIG9mIGVtZXJnZW5jeQogICovCiAgZnVuY3Rpb24gZW5hYmxlVHJhbnNmZXJzKGJvb2wgX3RyYW5zZmVyc0VuYWJsZWQpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICAgIHRyYW5zZmVyc0VuYWJsZWQgPSBfdHJhbnNmZXJzRW5hYmxlZDsKICB9CgoKICBmdW5jdGlvbiBnZXRWYWx1ZUF0KENoZWNrcG9pbnRbXSBzdG9yYWdlIGNoZWNrcG9pbnRzLCB1aW50IF9ibG9jaykgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewoKICAgICAgaWYgKGNoZWNrcG9pbnRzLmxlbmd0aCA9PSAwKQogICAgICAgIHJldHVybiAwOwogICAgICAvLyBTaG9ydGN1dCBmb3IgdGhlIGFjdHVhbCB2YWx1ZQogICAgICBpZiAoX2Jsb2NrID49IGNoZWNrcG9pbnRzW2NoZWNrcG9pbnRzLmxlbmd0aC0xXS5mcm9tQmxvY2spCiAgICAgICAgcmV0dXJuIGNoZWNrcG9pbnRzW2NoZWNrcG9pbnRzLmxlbmd0aC0xXS52YWx1ZTsKICAgICAgaWYgKF9ibG9jayA8IGNoZWNrcG9pbnRzWzBdLmZyb21CbG9jaykKICAgICAgICByZXR1cm4gMDsKCiAgICAgIC8vIEJpbmFyeSBzZWFyY2ggb2YgdGhlIHZhbHVlIGluIHRoZSBhcnJheQogICAgICB1aW50IG1pbiA9IDA7CiAgICAgIHVpbnQgbWF4ID0gY2hlY2twb2ludHMubGVuZ3RoLTE7CiAgICAgIHdoaWxlIChtYXggPiBtaW4pIHsKICAgICAgICAgIHVpbnQgbWlkID0gKG1heCArIG1pbiArIDEpIC8gMjsKICAgICAgICAgIGlmIChjaGVja3BvaW50c1ttaWRdLmZyb21CbG9jazw9X2Jsb2NrKSB7CiAgICAgICAgICAgICAgbWluID0gbWlkOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtYXggPSBtaWQtMTsKICAgICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gY2hlY2twb2ludHNbbWluXS52YWx1ZTsKICB9CgogIGZ1bmN0aW9uIHVwZGF0ZVZhbHVlQXROb3coQ2hlY2twb2ludFtdIHN0b3JhZ2UgY2hlY2twb2ludHMsIHVpbnQgX3ZhbHVlCiAgKSBpbnRlcm5hbAogIHsKICAgICAgaWYgKChjaGVja3BvaW50cy5sZW5ndGggPT0gMCkgfHwgKGNoZWNrcG9pbnRzW2NoZWNrcG9pbnRzLmxlbmd0aC0xXS5mcm9tQmxvY2sgPCBibG9jay5udW1iZXIpKSB7CiAgICAgICAgICAgICAgQ2hlY2twb2ludCBzdG9yYWdlIG5ld0NoZWNrUG9pbnQgPSBjaGVja3BvaW50c1tjaGVja3BvaW50cy5sZW5ndGgrK107CiAgICAgICAgICAgICAgbmV3Q2hlY2tQb2ludC5mcm9tQmxvY2sgPSB1aW50MTI4KGJsb2NrLm51bWJlcik7CiAgICAgICAgICAgICAgbmV3Q2hlY2tQb2ludC52YWx1ZSA9IHVpbnQxMjgoX3ZhbHVlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgQ2hlY2twb2ludCBzdG9yYWdlIG9sZENoZWNrUG9pbnQgPSBjaGVja3BvaW50c1tjaGVja3BvaW50cy5sZW5ndGgtMV07CiAgICAgICAgICAgICAgb2xkQ2hlY2tQb2ludC52YWx1ZSA9IHVpbnQxMjgoX3ZhbHVlKTsKICAgICAgICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyhib29sKSB7CiAgICAgIHVpbnQgc2l6ZTsKICAgICAgaWYgKF9hZGRyID09IDApCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICBhc3NlbWJseSB7CiAgICAgICAgICBzaXplIDo9IGV4dGNvZGVzaXplKF9hZGRyKQogICAgICB9CiAgICAgIHJldHVybiBzaXplPjA7CiAgfQoKICAvLy8gQGRldiBIZWxwZXIgZnVuY3Rpb24gdG8gcmV0dXJuIGEgbWluIGJldHdlbiB0aGUgdHdvIHVpbnRzCiAgZnVuY3Rpb24gbWluKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgLyoqCiAgKiBDbG9uZXMgUHJvb2YgVG9rZW4gYXQgdGhlIGdpdmVuIHNuYXBzaG90IGJsb2NrCiAgKiBAcGFyYW0gX3NuYXBzaG90QmxvY2sge3VpbnR9CiAgKiBAcGFyYW0gX2Nsb25lVG9rZW5OYW1lIHtzdHJpbmd9CiAgKiBAcGFyYW0gX2Nsb25lVG9rZW5TeW1ib2wge3N0cmluZ30KICAgKi8KICBmdW5jdGlvbiBjcmVhdGVDbG9uZVRva2VuKAogICAgICAgIHVpbnQgX3NuYXBzaG90QmxvY2ssCiAgICAgICAgc3RyaW5nIF9jbG9uZVRva2VuTmFtZSwKICAgICAgICBzdHJpbmcgX2Nsb25lVG9rZW5TeW1ib2wKICAgICkgcHVibGljIHJldHVybnMoYWRkcmVzcykgewoKICAgICAgaWYgKF9zbmFwc2hvdEJsb2NrID09IDApIHsKICAgICAgICBfc25hcHNob3RCbG9jayA9IGJsb2NrLm51bWJlcjsKICAgICAgfQoKICAgICAgaWYgKF9zbmFwc2hvdEJsb2NrID4gYmxvY2subnVtYmVyKSB7CiAgICAgICAgX3NuYXBzaG90QmxvY2sgPSBibG9jay5udW1iZXI7CiAgICAgIH0KCiAgICAgIFByb29mVG9rZW4gY2xvbmVUb2tlbiA9IHRva2VuRmFjdG9yeS5jcmVhdGVDbG9uZVRva2VuKAogICAgICAgICAgdGhpcywKICAgICAgICAgIF9zbmFwc2hvdEJsb2NrLAogICAgICAgICAgX2Nsb25lVG9rZW5OYW1lLAogICAgICAgICAgX2Nsb25lVG9rZW5TeW1ib2wKICAgICAgICApOwoKCiAgICAgIGNsb25lVG9rZW4udHJhbnNmZXJDb250cm9sKG1zZy5zZW5kZXIpOwoKICAgICAgLy8gQW4gZXZlbnQgdG8gbWFrZSB0aGUgdG9rZW4gZWFzeSB0byBmaW5kIG9uIHRoZSBibG9ja2NoYWluCiAgICAgIE5ld0Nsb25lVG9rZW4oYWRkcmVzcyhjbG9uZVRva2VuKSk7CiAgICAgIHJldHVybiBhZGRyZXNzKGNsb25lVG9rZW4pOwogICAgfQoKfQ=='.
	

]
