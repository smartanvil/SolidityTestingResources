Class {
	#name : #SRT9a9ae6884c65725c8f5378dbb6d3900bff36da53,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9a9ae6884c65725c8f5378dbb6d3900bff36da53 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzL21hdGgvU2FmZU1hdGguc29sCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCWZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CgkJdWludDI1NiBjID0gYSAqIGI7CgkJYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKCQlyZXR1cm4gYzsKCX0KCglmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewoJCS8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAoJCXVpbnQyNTYgYyA9IGEgLyBiOwoJCS8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCgkJcmV0dXJuIGM7Cgl9CgoJZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBwdXJlIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKCQlhc3NlcnQoYiA8PSBhKTsKCQlyZXR1cm4gYSAtIGI7Cgl9CgoJZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBwdXJlIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKCQl1aW50MjU2IGMgPSBhICsgYjsKCQlhc3NlcnQoYyA+PSBhKTsKCQlyZXR1cm4gYzsKCX0KfQoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewoJYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKCS8qKgoJICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCgkgKiBhY2NvdW50LgoJICovCglmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKCQlvd25lciA9IG1zZy5zZW5kZXI7Cgl9CgoKCS8qKgoJICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgoJICovCgltb2RpZmllciBvbmx5T3duZXIoKSB7CgkJaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsKCQkJcmV2ZXJ0KCk7CgkJfQoJCV87Cgl9CgoKCS8qKgoJICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KCSAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCgkgKi8KCWZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewoJCWlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CgkJCW93bmVyID0gbmV3T3duZXI7CgkJfQoJfQoKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCB7Cgl1aW50MjU2IHB1YmxpYyB0b2tlblRvdGFsU3VwcGx5OwoKCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2KTsKCglmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTYpOwoKCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoJZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CgoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgoJZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoJZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CgoJZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGF2YWlsYWJsZVN1cHBseSk7Cn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1hbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcnQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFNhdmVUb2tlbiBpcyBFUkMyMCwgT3duYWJsZSB7Cgl1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCglzdHJpbmcgcHVibGljIG5hbWUgPSAiU2F2ZVRva2VuIjsKCXN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlNBVkUiOwoJdWludCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYWZmaWxpYXRlOwoJZnVuY3Rpb24gZ2V0QWZmaWxpYXRlKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTYpIHsKCQlyZXR1cm4gYWZmaWxpYXRlW3dob107Cgl9CgogICAgc3RydWN0IEFmZlNlbmRlciB7CiAgICAgICAgYnl0ZXMzMiBhZmZfY29kZTsKICAgICAgICB1aW50MjU2IGFtb3VudDsKICAgIH0KICAgIHVpbnQgcHVibGljIG5vX2FmZiA9IDA7CgltYXBwaW5nKHVpbnQgPT4gQWZmU2VuZGVyKSBhZmZpbGlhdGVfc2VuZGVyczsKCWZ1bmN0aW9uIGdldEFmZmlsaWF0ZVNlbmRlcihieXRlczMyIHdobykgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2KSB7CgkgICAgCgkgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbm9fYWZmOyBpKyspIHsKICAgICAgICAgICAgaWYoYWZmaWxpYXRlX3NlbmRlcnNbaV0uYWZmX2NvZGUgPT0gd2hvKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICByZXR1cm4gYWZmaWxpYXRlX3NlbmRlcnNbaV0uYW1vdW50OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAoJCXJldHVybiAxOwoJfQoJZnVuY3Rpb24gZ2V0QWZmaWxpYXRlU2VuZGVyUG9zQ29kZSh1aW50IHBvcykgcHVibGljIHZpZXcgcmV0dXJucyhieXRlczMyKSB7CgkgICAgaWYocG9zID49IG5vX2FmZikKCSAgICB7CgkgICAgICAgIHJldHVybiAxOwoJICAgIH0KCSAgICByZXR1cm4gYWZmaWxpYXRlX3NlbmRlcnNbcG9zXS5hZmZfY29kZTsKCX0KCWZ1bmN0aW9uIGdldEFmZmlsaWF0ZVNlbmRlclBvc0Ftb3VudCh1aW50IHBvcykgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2KSB7CgkgICAgaWYocG9zID49IG5vX2FmZikKCSAgICB7CgkgICAgICAgIHJldHVybiAyOwoJICAgIH0KCSAgICByZXR1cm4gYWZmaWxpYXRlX3NlbmRlcnNbcG9zXS5hbW91bnQ7Cgl9CgoJdWludDI1NiBwdWJsaWMgdG9rZW5Ub3RhbFN1cHBseSA9IDA7Cgl1aW50MjU2IHB1YmxpYyB0cmFzaGVkVG9rZW5zID0gMDsKCXVpbnQyNTYgcHVibGljIGhhcmRjYXAgPSAzNTAgKiAxMDAwMDAwICogKDEwICoqIGRlY2ltYWxzKTsgLy8gMzUwIG1pbGxpb24gdG9rZW5zCgoJdWludCBwdWJsaWMgZXRoVG9Ub2tlbiA9IDYwMDA7IC8vIDEgZXRoIGJ1eXMgNiB0aG91c2FuZHMgdG9rZW5zCgl1aW50IHB1YmxpYyBub0NvbnRyaWJ1dG9ycyA9IDA7CgoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1ib251cyBwZXJpb2RzCgl1aW50IHB1YmxpYyB0b2tlbkJvbnVzRm9yRmlyc3QgPSAxMDsgLy8gbXVsdGlwbHllciBpbiAlCgl1aW50MjU2IHB1YmxpYyBzb2xkRm9yRmlyc3QgPSAwOwoJdWludDI1NiBwdWJsaWMgbWF4aW11bVRva2Vuc0ZvckZpcnN0ID0gNTUgKiAxMDAwMDAwICogKDEwICoqIGRlY2ltYWxzKTsgLy8gNTUgbWlsbGlvbgoKCXVpbnQgcHVibGljIHRva2VuQm9udXNGb3JTZWNvbmQgPSA1OyAvLyBtdWx0aXBseWVyIGluICUKCXVpbnQyNTYgcHVibGljIHNvbGRGb3JTZWNvbmQgPSAwOwoJdWludDI1NiBwdWJsaWMgbWF4aW11bVRva2Vuc0ZvclNlY29uZCA9IDUyLjUgKiAxMDAwMDAwICogKDEwICoqIGRlY2ltYWxzKTsgLy8gNTIgbWlsbGlvbiA1MDAgdGhvdXNhbmRzCgoJdWludCBwdWJsaWMgdG9rZW5Cb251c0ZvclRoaXJkID0gNDsgLy8gbXVsdGlwbHllciBpbiAlCgl1aW50MjU2IHB1YmxpYyBzb2xkRm9yVGhpcmQgPSAwOwoJdWludDI1NiBwdWJsaWMgbWF4aW11bVRva2Vuc0ZvclRoaXJkID0gNTIgKiAxMDAwMDAwICogKDEwICoqIGRlY2ltYWxzKTsgLy8gNTIgbWlsbGlvbgoKCXVpbnQgcHVibGljIHRva2VuQm9udXNGb3JGb3J0aCA9IDM7IC8vIG11bHRpcGx5ZXIgaW4gJQoJdWludDI1NiBwdWJsaWMgc29sZEZvckZvcnRoID0gMDsKCXVpbnQyNTYgcHVibGljIG1heGltdW1Ub2tlbnNGb3JGb3J0aCA9IDUxLjUgKiAxMDAwMDAwICogKDEwICoqIGRlY2ltYWxzKTsgLy8gNTEgbWlsbGlvbiA1MDAgdGhvdXNhbmRzCgoJdWludCBwdWJsaWMgdG9rZW5Cb251c0ZvckZpZnRoID0gMDsgLy8gbXVsdGlwbHllciBpbiAlCgl1aW50MjU2IHB1YmxpYyBzb2xkRm9yRmlmdGggPSAwOwoJdWludDI1NiBwdWJsaWMgbWF4aW11bVRva2Vuc0ZvckZpZnRoID0gNTAgKiAxMDAwMDAwICogKDEwICoqIGRlY2ltYWxzKTsgLy8gNTAgbWlsbGlvbgoKCXVpbnQgcHVibGljIHByZXNhbGVTdGFydCA9IDE1MTkzNDQwMDA7IC8vMjAxOC0wMi0yM1QwMDowMDowMCswMDowMAoJdWludCBwdWJsaWMgcHJlc2FsZUVuZCA9IDE1MjE4NDk2MDA7IC8vMjAxOC0wMy0yNFQwMDowMDowMCswMDowMAogICAgdWludCBwdWJsaWMgd2Vla09uZVN0YXJ0ID0gMTUyNDM1NTIwMDsgLy8yMDE4LTA0LTIyVDAwOjAwOjAwKzAwOjAwCiAgICB1aW50IHB1YmxpYyB3ZWVrVHdvU3RhcnQgPSAxNTI1MTMyODAwOyAvLzIwMTgtMDUtMDFUMDA6MDA6MDArMDA6MDAKICAgIHVpbnQgcHVibGljIHdlZWtUaHJlZVN0YXJ0ID0gMTUyNTgyNDAwMDsgLy8yMDE4LTA1LTA5VDAwOjAwOjAwKzAwOjAwCiAgICB1aW50IHB1YmxpYyB3ZWVrRm91clN0YXJ0ID0gMTUyNjYwMTYwMDsgLy8yMDE4LTA1LTE4VDAwOjAwOjAwKzAwOjAwCiAgICB1aW50IHB1YmxpYyB0b2tlblNhbGVFbmQgPSAxNTI3MjkyODAwOyAvLzIwMTgtMDUtMjZUMDA6MDA6MDArMDA6MDAKICAgIAogICAgdWludCBwdWJsaWMgc2FsZU9uID0gMTsKICAgIHVpbnQgcHVibGljIGRpc293biA9IDA7CgoJLy91aW50MjU2IHB1YmxpYyBtYXhpbXVtVG9rZW5zRm9yUmVzZXJ2ZSA9IDg5ICogMTAwMDAwMCAqICgxMCAqKiBkZWNpbWFscyk7IC8vIDg5IG1pbGxpb24KCWFkZHJlc3MgcHVibGljIG93bmVyVmF1bHQ7CgoJbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoJbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgkvKioKCSAqIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suCgkgKi8KCW1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKCQlpZiAobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsKCQkJcmV2ZXJ0KCk7CgkJfQoJCV87Cgl9CgoJLyoqCgkgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IHRva2VuIGNyZWF0aW9uIG9ubHkgd2hlbiB0aGUgaGFyZGNhcCBoYXMgbm90IGJlZW4gcmVhY2hlZAoJICovCgltb2RpZmllciBpc1VuZGVySGFyZENhcCgpIHsKCQlyZXF1aXJlKHRva2VuVG90YWxTdXBwbHkgPD0gaGFyZGNhcCk7CgkJXzsKCX0KCgkvKioKCSAqIEBkZXYgQ29uc3RydWN0b3IKCSAqLwoJZnVuY3Rpb24gU2F2ZVRva2VuKCkgcHVibGljIHsKCQlvd25lclZhdWx0ID0gbXNnLnNlbmRlcjsKCX0KCgkvKioKCSAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKCSAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCgkgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCgkgKi8KCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKCQliYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwoJCWJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwoJCVRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKCgkJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCgkgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKCSAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KCSAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwoJICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAoJICovCglmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgb25seVBheWxvYWRTaXplKDMgKiAzMikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgkJdWludDI1NiBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgkJYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CgkJYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwoJCWFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKCQlUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwoKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvKioKCSAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlciBhY2NvcmRpbmcgdG8gb2ZmIGV4Y2hhbmdlIGFncmVlbWVudHMKCSAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KCSAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwoJICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCgkgKi8KCWZ1bmN0aW9uIG1hc3RlclRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgkgICAgaWYoZGlzb3duID09IDEpIHJldmVydCgpOwoJICAgIAoJCWJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwoJCWJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKCQlUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwoKCQlyZXR1cm4gdHJ1ZTsKCX0KCglmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYXZhaWxhYmxlU3VwcGx5KSB7CgkJcmV0dXJuIHRva2VuVG90YWxTdXBwbHk7Cgl9CgoJLyoqCgkgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgoJICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCgkgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgoJICovCglmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NiBiYWxhbmNlKSB7CgkJcmV0dXJuIGJhbGFuY2VzW19vd25lcl07Cgl9CgoJLyoqCgkgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KCSAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KCSAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCgkgKi8KCWZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCgkJLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKCQkvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAoJCS8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgoJCS8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQoJCWlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgewoJCQlyZXZlcnQoKTsKCQl9CgoJCWFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwoJCUFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwoKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvKioKCSAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhbiBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KCSAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KCSAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgoJICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgoJICovCglmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NiByZW1haW5pbmcpIHsKCQlyZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKCX0KCgkvKioKCSAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byBjaGFuZ2UgdGhlIHRva2VuIGV4Y2hhbmdlIHJhdGUuCgkgKiBAcGFyYW0gX3JhdGlvIHRoZSBuZXcgZXRoIHRvIHRva2VuIHJhdGlvbgoJICovCglmdW5jdGlvbiBjaGFuZ2VFdGhUb1Rva2VuUmF0aW9uKHVpbnQ4IF9yYXRpbykgcHVibGljIG9ubHlPd25lciB7CgkJaWYgKF9yYXRpbyAhPSAwKSB7CgkJCWV0aFRvVG9rZW4gPSBfcmF0aW87CgkJfQoJfQoKCS8qKgoJICogQGRldiBjb252ZW5pZW5jZSBzaG93IGJhbGFuY2UKCSAqLwoJZnVuY3Rpb24gc2hvd0V0aEJhbGFuY2UoKSB2aWV3IHB1YmxpYyByZXR1cm5zKHVpbnQyNTYgcmVtYWluaW5nKSB7CgkJcmV0dXJuIHRoaXMuYmFsYW5jZTsKCX0KCgkvKioKCSAqIEBkZXYgYnVybiB0b2tlbnMgaWYgbmVlZCB0bwoJICogQHBhcmFtIHZhbHVlIHRva2VuIHdpdGggZGVjaW1hbHMKCSAqIEBwYXJhbSBmcm9tIGJ1cm4gYWRkcmVzcwoJICovCglmdW5jdGlvbiBkZWNyZWFzZVN1cHBseSh1aW50MjU2IHZhbHVlLCBhZGRyZXNzIGZyb20pIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewoJICAgIGlmKGRpc293biA9PSAxKSByZXZlcnQoKTsKCSAgICAKCQliYWxhbmNlc1tmcm9tXSA9IGJhbGFuY2VzW2Zyb21dLnN1Yih2YWx1ZSk7CgkJdHJhc2hlZFRva2VucyA9IHRyYXNoZWRUb2tlbnMuYWRkKHZhbHVlKTsKCQl0b2tlblRvdGFsU3VwcGx5ID0gdG9rZW5Ub3RhbFN1cHBseS5zdWIodmFsdWUpOwoJCVRyYW5zZmVyKGZyb20sIDAsIHZhbHVlKTsKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvKioKCSAqICBTZW5kIEVUSCB3aXRoIGFmZmlsYXRlIGNvZGUuCgkgKi8KCWZ1bmN0aW9uIEJ1eVRva2Vuc1dpdGhBZmZpbGlhdGUoYWRkcmVzcyBfYWZmaWxpYXRlKSBwdWJsaWMgaXNVbmRlckhhcmRDYXAgcGF5YWJsZQoJewoJCWFmZmlsaWF0ZVtfYWZmaWxpYXRlXSArPSBtc2cudmFsdWU7CgkJaWYgKF9hZmZpbGlhdGUgPT0gbXNnLnNlbmRlcil7ICByZXZlcnQoKTsgfQoJCUJ1eVRva2VucygpOwoJfQoKCS8qKgoJICogIEFsbG93cyBvd25lciB0byBjcmVhdGUgdG9rZW5zIHdpdGhvdXQgRVRICgkgKi8KCWZ1bmN0aW9uIG1pbnRUb2tlbnMoYWRkcmVzcyBfYWRkcmVzcywgdWludDI1NiBhbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgaXNVbmRlckhhcmRDYXAKCXsKCSAgICBpZihkaXNvd24gPT0gMSkgcmV2ZXJ0KCk7CgkgICAgCgkJaWYgKGFtb3VudCArIHRva2VuVG90YWxTdXBwbHkgPiBoYXJkY2FwKSByZXZlcnQoKTsKCQlpZiAoYW1vdW50IDwgMSkgcmV2ZXJ0KCk7CgoJCS8vYWRkIHRva2VucyB0byBiYWxhbmNlCgkJYmFsYW5jZXNbX2FkZHJlc3NdID0gYmFsYW5jZXNbX2FkZHJlc3NdICsgYW1vdW50OwoKCQkvL2luY3JlYXNlIHRvdGFsIHRva2VucwoJCXRva2VuVG90YWxTdXBwbHkgPSB0b2tlblRvdGFsU3VwcGx5LmFkZChhbW91bnQpOwoJCVRyYW5zZmVyKHRoaXMsIF9hZGRyZXNzLCBhbW91bnQpOwoJCW5vQ29udHJpYnV0b3JzKys7Cgl9CgoJLyoqCgkgKiAgQGRldiBDaGFuZ2Ugb3duZXIgdmF1bHQuCgkgKi8KCWZ1bmN0aW9uIGNoYW5nZU93bmVyVmF1bHQoYWRkcmVzcyBuZXdfdmF1bHQpIHB1YmxpYyBvbmx5T3duZXIKCXsKCSAgICBvd25lclZhdWx0ID0gbmV3X3ZhdWx0OwogICAgfQogICAgCgkvKioKCSAqICBAZGV2IENoYW5nZSBwZXJpb2RzLgoJICovCglmdW5jdGlvbiBjaGFuZ2VQZXJpb2QodWludCBwZXJpb2Rfbm8sIHVpbnQgbmV3X3ZhbHVlKSBwdWJsaWMgb25seU93bmVyCgl7CgkJaWYocGVyaW9kX25vID09IDEpCgkJewoJCSAgICBwcmVzYWxlU3RhcnQgPSBuZXdfdmFsdWU7CgkJfQoJCWVsc2UgaWYocGVyaW9kX25vID09IDIpCgkJewoJCSAgICBwcmVzYWxlRW5kID0gbmV3X3ZhbHVlOwoJCX0KCQllbHNlIGlmKHBlcmlvZF9ubyA9PSAzKQoJCXsKCQkgICAgd2Vla09uZVN0YXJ0ID0gbmV3X3ZhbHVlOwoJCX0KCQllbHNlIGlmKHBlcmlvZF9ubyA9PSA0KQoJCXsKCQkgICAgd2Vla1R3b1N0YXJ0ID0gbmV3X3ZhbHVlOwoJCX0KCQllbHNlIGlmKHBlcmlvZF9ubyA9PSA1KQoJCXsKCQkgICAgd2Vla1RocmVlU3RhcnQgPSBuZXdfdmFsdWU7CgkJfQoJCWVsc2UgaWYocGVyaW9kX25vID09IDYpCgkJewoJCSAgICB3ZWVrRm91clN0YXJ0ID0gbmV3X3ZhbHVlOwoJCX0KCQllbHNlIGlmKHBlcmlvZF9ubyA9PSA3KQoJCXsKCQkgICAgdG9rZW5TYWxlRW5kID0gbmV3X3ZhbHVlOwoJCX0KCX0KCgkvKioKCSAqICBAZGV2IENoYW5nZSBzYWxlT24uCgkgKi8KCWZ1bmN0aW9uIGNoYW5nZVNhbGVPbih1aW50IG5ld192YWx1ZSkgcHVibGljIG9ubHlPd25lcgoJewoJICAgIGlmKGRpc293biA9PSAxKSByZXZlcnQoKTsKCSAgICAKCQlzYWxlT24gPSBuZXdfdmFsdWU7Cgl9CgoJLyoqCgkgKiAgQGRldiBObyBtb3JlIGdvZCBsaWtlLgoJICovCglmdW5jdGlvbiBjaGFuZ2VEaXNvd24odWludCBuZXdfdmFsdWUpIHB1YmxpYyBvbmx5T3duZXIKCXsKCSAgICBpZihuZXdfdmFsdWUgPT0gMSkKCSAgICB7CgkgICAgICAgIGRpc293biA9IDE7CgkgICAgfQoJfQoKCS8qKgoJICogQGRldiBBbGxvd3MgYW55b25lIHRvIGNyZWF0ZSB0b2tlbnMgYnkgZGVwb3NpdGluZyBldGhlci4KCSAqLwoJZnVuY3Rpb24gQnV5VG9rZW5zKCkgcHVibGljIGlzVW5kZXJIYXJkQ2FwIHBheWFibGUgewoJCXVpbnQyNTYgdG9rZW5zOwoJCXVpbnQyNTYgYm9udXM7CgogICAgICAgIGlmKHNhbGVPbiA9PSAwKSByZXZlcnQoKTsKICAgICAgICAKCQlpZiAobm93IDwgcHJlc2FsZVN0YXJ0KSByZXZlcnQoKTsKCgkJLy90aGlzIGlzIHBhdXNlIHBlcmlvZAoJCWlmIChub3cgPj0gcHJlc2FsZUVuZCAmJiBub3cgPD0gd2Vla09uZVN0YXJ0KSByZXZlcnQoKTsKCgkJLy9zYWxlIGhhcyBlbmRlZAoJCWlmIChub3cgPj0gdG9rZW5TYWxlRW5kKSByZXZlcnQoKTsKCgkJLy9wcmUtc2FsZQoJCWlmIChub3cgPj0gcHJlc2FsZVN0YXJ0ICYmIG5vdyA8PSBwcmVzYWxlRW5kKQoJCXsKCQkJYm9udXMgPSBldGhUb1Rva2VuLm11bChtc2cudmFsdWUpLm11bCh0b2tlbkJvbnVzRm9yRmlyc3QpLmRpdigxMDApOwoJCQl0b2tlbnMgPSBldGhUb1Rva2VuLm11bChtc2cudmFsdWUpLmFkZChib251cyk7CgkJCXNvbGRGb3JGaXJzdCA9IHNvbGRGb3JGaXJzdC5hZGQodG9rZW5zKTsKCQkJaWYgKHNvbGRGb3JGaXJzdCA+IG1heGltdW1Ub2tlbnNGb3JGaXJzdCkgcmV2ZXJ0KCk7CgkJfQoKCQkvL3B1YmxpYyBmaXJzdCB3ZWVrCgkJaWYgKG5vdyA+PSB3ZWVrT25lU3RhcnQgJiYgbm93IDw9IHdlZWtUd29TdGFydCkKCQl7CgkJCWJvbnVzID0gZXRoVG9Ub2tlbi5tdWwobXNnLnZhbHVlKS5tdWwodG9rZW5Cb251c0ZvclNlY29uZCkuZGl2KDEwMCk7CgkJCXRva2VucyA9IGV0aFRvVG9rZW4ubXVsKG1zZy52YWx1ZSkuYWRkKGJvbnVzKTsKCQkJc29sZEZvclNlY29uZCA9IHNvbGRGb3JTZWNvbmQuYWRkKHRva2Vucyk7CgkJCWlmIChzb2xkRm9yU2Vjb25kID4gbWF4aW11bVRva2Vuc0ZvclNlY29uZC5hZGQobWF4aW11bVRva2Vuc0ZvckZpcnN0KS5zdWIoc29sZEZvckZpcnN0KSkgcmV2ZXJ0KCk7CgkJfQoKCQkvL3B1YmxpYyBzZWNvbmQgd2VlawoJCWlmIChub3cgPj0gd2Vla1R3b1N0YXJ0ICYmIG5vdyA8PSB3ZWVrVGhyZWVTdGFydCkKCQl7CgkJCWJvbnVzID0gZXRoVG9Ub2tlbi5tdWwobXNnLnZhbHVlKS5tdWwodG9rZW5Cb251c0ZvclRoaXJkKS5kaXYoMTAwKTsKCQkJdG9rZW5zID0gZXRoVG9Ub2tlbi5tdWwobXNnLnZhbHVlKS5hZGQoYm9udXMpOwoJCQlzb2xkRm9yVGhpcmQgPSBzb2xkRm9yVGhpcmQuYWRkKHRva2Vucyk7CgkJCWlmIChzb2xkRm9yVGhpcmQgPiBtYXhpbXVtVG9rZW5zRm9yVGhpcmQuYWRkKG1heGltdW1Ub2tlbnNGb3JGaXJzdCkuc3ViKHNvbGRGb3JGaXJzdCkuYWRkKG1heGltdW1Ub2tlbnNGb3JTZWNvbmQpLnN1Yihzb2xkRm9yU2Vjb25kKSkgcmV2ZXJ0KCk7CgkJfQoKCQkvL3B1YmxpYyB0aGlyZCB3ZWVrCgkJaWYgKG5vdyA+PSB3ZWVrVGhyZWVTdGFydCAmJiBub3cgPD0gd2Vla0ZvdXJTdGFydCkKCQl7CgkJCWJvbnVzID0gZXRoVG9Ub2tlbi5tdWwobXNnLnZhbHVlKS5tdWwodG9rZW5Cb251c0ZvckZvcnRoKS5kaXYoMTAwKTsKCQkJdG9rZW5zID0gZXRoVG9Ub2tlbi5tdWwobXNnLnZhbHVlKS5hZGQoYm9udXMpOwoJCQlzb2xkRm9yRm9ydGggPSBzb2xkRm9yRm9ydGguYWRkKHRva2Vucyk7CgkJCWlmIChzb2xkRm9yRm9ydGggPiBtYXhpbXVtVG9rZW5zRm9yRm9ydGguYWRkKG1heGltdW1Ub2tlbnNGb3JGaXJzdCkuc3ViKHNvbGRGb3JGaXJzdCkuYWRkKG1heGltdW1Ub2tlbnNGb3JTZWNvbmQpLnN1Yihzb2xkRm9yU2Vjb25kKS5hZGQobWF4aW11bVRva2Vuc0ZvclRoaXJkKS5zdWIoc29sZEZvclRoaXJkKSkgcmV2ZXJ0KCk7CgkJfQoKCQkvL3B1YmxpYyBmb3J0aCB3ZWVrCgkJaWYgKG5vdyA+PSB3ZWVrRm91clN0YXJ0ICYmIG5vdyA8PSB0b2tlblNhbGVFbmQpCgkJewoJCQlib251cyA9IGV0aFRvVG9rZW4ubXVsKG1zZy52YWx1ZSkubXVsKHRva2VuQm9udXNGb3JGaWZ0aCkuZGl2KDEwMCk7CgkJCXRva2VucyA9IGV0aFRvVG9rZW4ubXVsKG1zZy52YWx1ZSkuYWRkKGJvbnVzKTsKCQkJc29sZEZvckZpZnRoID0gc29sZEZvckZpZnRoLmFkZCh0b2tlbnMpOwoJCQlpZiAoc29sZEZvckZpZnRoID4gbWF4aW11bVRva2Vuc0ZvckZpZnRoLmFkZChtYXhpbXVtVG9rZW5zRm9yRmlyc3QpLnN1Yihzb2xkRm9yRmlyc3QpLmFkZChtYXhpbXVtVG9rZW5zRm9yU2Vjb25kKS5zdWIoc29sZEZvclNlY29uZCkuYWRkKG1heGltdW1Ub2tlbnNGb3JUaGlyZCkuc3ViKHNvbGRGb3JUaGlyZCkuYWRkKG1heGltdW1Ub2tlbnNGb3JGb3J0aCkuc3ViKHNvbGRGb3JGb3J0aCkpIHJldmVydCgpOwoJCX0KCgkJaWYgKHRva2VucyA9PSAwKQoJCXsKCQkJcmV2ZXJ0KCk7CgkJfQoKICAgICAgICBpZiAodG9rZW5zICsgdG9rZW5Ub3RhbFN1cHBseSA+IGhhcmRjYXApIHJldmVydCgpOwoJCQoJCS8vYWRkIHRva2VucyB0byBiYWxhbmNlCgkJYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXSArIHRva2VuczsKCgkJLy9pbmNyZWFzZSB0b3RhbCB0b2tlbnMKCQl0b2tlblRvdGFsU3VwcGx5ID0gdG9rZW5Ub3RhbFN1cHBseS5hZGQodG9rZW5zKTsKCQlUcmFuc2Zlcih0aGlzLCBtc2cuc2VuZGVyLCB0b2tlbnMpOwoJCW5vQ29udHJpYnV0b3JzKys7Cgl9CgoJLyoqCiAgICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byBzZW5kIHRoZSBmdW5kcyB0byB0aGUgdmF1bHQuCiAgICAqIEBwYXJhbSBfYW1vdW50IHRoZSBhbW91bnQgaW4gd2VpIHRvIHNlbmQKICAgICovCglmdW5jdGlvbiB3aXRoZHJhd0V0aGVyZXVtKHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIG9ubHlPd25lciB7CgkJcmVxdWlyZShfYW1vdW50IDw9IHRoaXMuYmFsYW5jZSk7IC8vIHdlaQoKCQlpZiAoIW93bmVyVmF1bHQuc2VuZChfYW1vdW50KSkgewoJCQlyZXZlcnQoKTsKCQl9CgkJVHJhbnNmZXIodGhpcywgb3duZXJWYXVsdCwgX2Ftb3VudCk7Cgl9CgoKCS8vIAlmdW5jdGlvbiBnZXRSZXNlcnZlZFRva2VucygpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpCgkvLyAJewoJLy8gCQlpZiAoY2hlY2tJc1B1YmxpY1RpbWUoKSA9PSBmYWxzZSkgcmV0dXJuIDA7CgkvLyAJCXJldHVybiBoYXJkY2FwIC0gbWF4aW11bVRva2Vuc0ZvclB1YmxpYyArIG1heGltdW1Ub2tlbnNGb3JQcml2YXRlIC0gdG9rZW5Ub3RhbFN1cHBseTsKCS8vIAl9CgoJZnVuY3Rpb24gdHJhbnNmZXJSZXNlcnZlZFRva2Vucyh1aW50MjU2IF9hbW91bnQpIHB1YmxpYyBvbmx5T3duZXIKCXsKCSAgICBpZihkaXNvd24gPT0gMSkgcmV2ZXJ0KCk7CgkgICAgCgkJaWYgKG5vdyA8PSB0b2tlblNhbGVFbmQpIHJldmVydCgpOwoKCQlhc3NlcnQoX2Ftb3VudCA8PSAoaGFyZGNhcCAtIHRva2VuVG90YWxTdXBwbHkpICk7CgoJCWJhbGFuY2VzW293bmVyVmF1bHRdID0gYmFsYW5jZXNbb3duZXJWYXVsdF0gKyBfYW1vdW50OwoJCXRva2VuVG90YWxTdXBwbHkgPSB0b2tlblRvdGFsU3VwcGx5ICsgX2Ftb3VudDsKCQlUcmFuc2Zlcih0aGlzLCBvd25lclZhdWx0LCBfYW1vdW50KTsKCX0KCglmdW5jdGlvbigpIGV4dGVybmFsIHBheWFibGUgewoJCUJ1eVRva2VucygpOwoKCX0KfQ=='.
	

]
