Class {
	#name : #SRTd0a6e6c54dbc68db5db3a091b171a77407ff7ccf,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd0a6e6c54dbc68db5db3a091b171a77407ff7ccf >> base64 [
	^ 'Y29udHJhY3QgRFNOb3RlIHsKICAgIGV2ZW50IExvZ05vdGUoCiAgICAgICAgYnl0ZXM0ICAgaW5kZXhlZCAgc2lnLAogICAgICAgIGFkZHJlc3MgIGluZGV4ZWQgIGd1eSwKICAgICAgICBieXRlczMyICBpbmRleGVkICBmb28sCiAgICAgICAgYnl0ZXMzMiAgaW5kZXhlZCAgYmFyLAoJdWludAkgCSAgd2FkLAogICAgICAgIGJ5dGVzICAgICAgICAgICAgIGZheAogICAgKSBhbm9ueW1vdXM7CgogICAgbW9kaWZpZXIgbm90ZSB7CiAgICAgICAgYnl0ZXMzMiBmb287CiAgICAgICAgYnl0ZXMzMiBiYXI7CgogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgZm9vIDo9IGNhbGxkYXRhbG9hZCg0KQogICAgICAgICAgICBiYXIgOj0gY2FsbGRhdGFsb2FkKDM2KQogICAgICAgIH0KCiAgICAgICAgTG9nTm90ZShtc2cuc2lnLCBtc2cuc2VuZGVyLCBmb28sIGJhciwgbXNnLnZhbHVlLCBtc2cuZGF0YSk7CgogICAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IEVSQzIwIHsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCBzdXBwbHkpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKCBhZGRyZXNzIHdobyApIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdmFsdWUpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKCBhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIgKSBjb25zdGFudCByZXR1cm5zICh1aW50IF9hbGxvd2FuY2UpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSggYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoIGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSApIHJldHVybnMgKGJvb2wgb2spOwoKICAgIGV2ZW50IFRyYW5zZmVyKCBhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKCBhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsKfQoKY29udHJhY3QgRFNBdXRob3JpdHkgewogICAgZnVuY3Rpb24gY2FuQ2FsbCgKICAgICAgICBhZGRyZXNzIHNyYywgYWRkcmVzcyBkc3QsIGJ5dGVzNCBzaWcKICAgICkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IERTQXV0aEV2ZW50cyB7CiAgICBldmVudCBMb2dTZXRBdXRob3JpdHkgKGFkZHJlc3MgaW5kZXhlZCBhdXRob3JpdHkpOwogICAgZXZlbnQgTG9nU2V0T3duZXIgICAgIChhZGRyZXNzIGluZGV4ZWQgb3duZXIpOwp9Cgpjb250cmFjdCBEU0F1dGggaXMgRFNBdXRoRXZlbnRzIHsKICAgIERTQXV0aG9yaXR5ICBwdWJsaWMgIGF1dGhvcml0eTsKICAgIGFkZHJlc3MgICAgICBwdWJsaWMgIG93bmVyOwoKICAgIGZ1bmN0aW9uIERTQXV0aCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgTG9nU2V0T3duZXIobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0T3duZXIoYWRkcmVzcyBvd25lcl8pCiAgICAgICAgYXV0aAogICAgewogICAgICAgIG93bmVyID0gb3duZXJfOwogICAgICAgIExvZ1NldE93bmVyKG93bmVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRBdXRob3JpdHkoRFNBdXRob3JpdHkgYXV0aG9yaXR5XykKICAgICAgICBhdXRoCiAgICB7CiAgICAgICAgYXV0aG9yaXR5ID0gYXV0aG9yaXR5XzsKICAgICAgICBMb2dTZXRBdXRob3JpdHkoYXV0aG9yaXR5KTsKICAgIH0KCiAgICBtb2RpZmllciBhdXRoIHsKICAgICAgICBhc3NlcnQoaXNBdXRob3JpemVkKG1zZy5zZW5kZXIsIG1zZy5zaWcpKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGF1dGhvcml6ZWQoYnl0ZXM0IHNpZykgewogICAgICAgIGFzc2VydChpc0F1dGhvcml6ZWQobXNnLnNlbmRlciwgc2lnKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0F1dGhvcml6ZWQoYWRkcmVzcyBzcmMsIGJ5dGVzNCBzaWcpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoc3JjID09IGFkZHJlc3ModGhpcykpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIGlmIChzcmMgPT0gb3duZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIGlmIChhdXRob3JpdHkgPT0gRFNBdXRob3JpdHkoMCkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBhdXRob3JpdHkuY2FuQ2FsbChzcmMsIHRoaXMsIHNpZyk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGFzc2VydChib29sIHgpIGludGVybmFsIHsKICAgICAgICBpZiAoIXgpIHRocm93OwogICAgfQp9Cgpjb250cmFjdCBEU0V4ZWMgewogICAgZnVuY3Rpb24gdHJ5RXhlYyggYWRkcmVzcyB0YXJnZXQsIGJ5dGVzIGNhbGxkYXRhLCB1aW50IHZhbHVlKQogICAgICAgICAgICAgaW50ZXJuYWwKICAgICAgICAgICAgIHJldHVybnMgKGJvb2wgY2FsbF9yZXQpCiAgICB7CiAgICAgICAgcmV0dXJuIHRhcmdldC5jYWxsLnZhbHVlKHZhbHVlKShjYWxsZGF0YSk7CiAgICB9CiAgICBmdW5jdGlvbiBleGVjKCBhZGRyZXNzIHRhcmdldCwgYnl0ZXMgY2FsbGRhdGEsIHVpbnQgdmFsdWUpCiAgICAgICAgICAgICBpbnRlcm5hbAogICAgewogICAgICAgIGlmKCF0cnlFeGVjKHRhcmdldCwgY2FsbGRhdGEsIHZhbHVlKSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICB9CgogICAgLy8gQ29udmVuaWVuY2UgYWxpYXNlcwogICAgZnVuY3Rpb24gZXhlYyggYWRkcmVzcyB0LCBieXRlcyBjICkKICAgICAgICBpbnRlcm5hbAogICAgewogICAgICAgIGV4ZWModCwgYywgMCk7CiAgICB9CiAgICBmdW5jdGlvbiBleGVjKCBhZGRyZXNzIHQsIHVpbnQyNTYgdiApCiAgICAgICAgaW50ZXJuYWwKICAgIHsKICAgICAgICBieXRlcyBtZW1vcnkgYzsgZXhlYyh0LCBjLCB2KTsKICAgIH0KICAgIGZ1bmN0aW9uIHRyeUV4ZWMoIGFkZHJlc3MgdCwgYnl0ZXMgYyApCiAgICAgICAgaW50ZXJuYWwKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiB0cnlFeGVjKHQsIGMsIDApOwogICAgfQogICAgZnVuY3Rpb24gdHJ5RXhlYyggYWRkcmVzcyB0LCB1aW50MjU2IHYgKQogICAgICAgIGludGVybmFsCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBieXRlcyBtZW1vcnkgYzsgcmV0dXJuIHRyeUV4ZWModCwgYywgdik7CiAgICB9Cn0KCmNvbnRyYWN0IERTTWF0aCB7CiAgICAKICAgIC8qCiAgICBzdGFuZGFyZCB1aW50MjU2IGZ1bmN0aW9ucwogICAgICovCgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB4ICsgeSkgPj0geCk7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB4IC0geSkgPD0geCk7CiAgICB9CgogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB4ICogeSkgPj0geCk7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICB6ID0geCAvIHk7CiAgICB9CgogICAgZnVuY3Rpb24gbWluKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICByZXR1cm4geCA8PSB5ID8geCA6IHk7CiAgICB9CiAgICBmdW5jdGlvbiBtYXgodWludDI1NiB4LCB1aW50MjU2IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgICAgIHJldHVybiB4ID49IHkgPyB4IDogeTsKICAgIH0KCiAgICAvKgogICAgdWludDEyOCBmdW5jdGlvbnMgKGggaXMgZm9yIGhhbGYpCiAgICAgKi8KCgogICAgZnVuY3Rpb24gaGFkZCh1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCB6KSB7CiAgICAgICAgYXNzZXJ0KCh6ID0geCArIHkpID49IHgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGhzdWIodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIGFzc2VydCgoeiA9IHggLSB5KSA8PSB4KTsKICAgIH0KCiAgICBmdW5jdGlvbiBobXVsKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB4ICogeSkgPj0geCk7CiAgICB9CgogICAgZnVuY3Rpb24gaGRpdih1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCB6KSB7CiAgICAgICAgeiA9IHggLyB5OwogICAgfQoKICAgIGZ1bmN0aW9uIGhtaW4odWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIHJldHVybiB4IDw9IHkgPyB4IDogeTsKICAgIH0KICAgIGZ1bmN0aW9uIGhtYXgodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIHJldHVybiB4ID49IHkgPyB4IDogeTsKICAgIH0KCgogICAgLyoKICAgIGludDI1NiBmdW5jdGlvbnMKICAgICAqLwoKICAgIGZ1bmN0aW9uIGltaW4oaW50MjU2IHgsIGludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChpbnQyNTYgeikgewogICAgICAgIHJldHVybiB4IDw9IHkgPyB4IDogeTsKICAgIH0KICAgIGZ1bmN0aW9uIGltYXgoaW50MjU2IHgsIGludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChpbnQyNTYgeikgewogICAgICAgIHJldHVybiB4ID49IHkgPyB4IDogeTsKICAgIH0KCiAgICAvKgogICAgV0FEIG1hdGgKICAgICAqLwoKICAgIHVpbnQxMjggY29uc3RhbnQgV0FEID0gMTAgKiogMTg7CgogICAgZnVuY3Rpb24gd2FkZCh1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCkgewogICAgICAgIHJldHVybiBoYWRkKHgsIHkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdzdWIodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjgpIHsKICAgICAgICByZXR1cm4gaHN1Yih4LCB5KTsKICAgIH0KCiAgICBmdW5jdGlvbiB3bXVsKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICB6ID0gY2FzdCgodWludDI1Nih4KSAqIHkgKyBXQUQgLyAyKSAvIFdBRCk7CiAgICB9CgogICAgZnVuY3Rpb24gd2Rpdih1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCB6KSB7CiAgICAgICAgeiA9IGNhc3QoKHVpbnQyNTYoeCkgKiBXQUQgKyB5IC8gMikgLyB5KTsKICAgIH0KCiAgICBmdW5jdGlvbiB3bWluKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4KSB7CiAgICAgICAgcmV0dXJuIGhtaW4oeCwgeSk7CiAgICB9CiAgICBmdW5jdGlvbiB3bWF4KHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4KSB7CiAgICAgICAgcmV0dXJuIGhtYXgoeCwgeSk7CiAgICB9CgogICAgLyoKICAgIFJBWSBtYXRoCiAgICAgKi8KCiAgICB1aW50MTI4IGNvbnN0YW50IFJBWSA9IDEwICoqIDI3OwoKICAgIGZ1bmN0aW9uIHJhZGQodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjgpIHsKICAgICAgICByZXR1cm4gaGFkZCh4LCB5KTsKICAgIH0KCiAgICBmdW5jdGlvbiByc3ViKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4KSB7CiAgICAgICAgcmV0dXJuIGhzdWIoeCwgeSk7CiAgICB9CgogICAgZnVuY3Rpb24gcm11bCh1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCB6KSB7CiAgICAgICAgeiA9IGNhc3QoKHVpbnQyNTYoeCkgKiB5ICsgUkFZIC8gMikgLyBSQVkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJkaXYodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIHogPSBjYXN0KCh1aW50MjU2KHgpICogUkFZICsgeSAvIDIpIC8geSk7CiAgICB9CgogICAgZnVuY3Rpb24gcnBvdyh1aW50MTI4IHgsIHVpbnQ2NCBuKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICAvLyBUaGlzIGZhbW91cyBhbGdvcml0aG0gaXMgY2FsbGVkICJleHBvbmVudGlhdGlvbiBieSBzcXVhcmluZyIKICAgICAgICAvLyBhbmQgY2FsY3VsYXRlcyB4Xm4gd2l0aCB4IGFzIGZpeGVkLXBvaW50IGFuZCBuIGFzIHJlZ3VsYXIgdW5zaWduZWQuCiAgICAgICAgLy8KICAgICAgICAvLyBJdCdzIE8obG9nIG4pLCBpbnN0ZWFkIG9mIE8obikgZm9yIG5haXZlIHJlcGVhdGVkIG11bHRpcGxpY2F0aW9uLgogICAgICAgIC8vCiAgICAgICAgLy8gVGhlc2UgZmFjdHMgYXJlIHdoeSBpdCB3b3JrczoKICAgICAgICAvLwogICAgICAgIC8vICBJZiBuIGlzIGV2ZW4sIHRoZW4geF5uID0gKHheMileKG4vMikuCiAgICAgICAgLy8gIElmIG4gaXMgb2RkLCAgdGhlbiB4Xm4gPSB4ICogeF4obi0xKSwKICAgICAgICAvLyAgIGFuZCBhcHBseWluZyB0aGUgZXF1YXRpb24gZm9yIGV2ZW4geCBnaXZlcwogICAgICAgIC8vICAgIHhebiA9IHggKiAoeF4yKV4oKG4tMSkgLyAyKS4KICAgICAgICAvLwogICAgICAgIC8vICBBbHNvLCBFVk0gZGl2aXNpb24gaXMgZmxvb3JpbmcgYW5kCiAgICAgICAgLy8gICAgZmxvb3JbKG4tMSkgLyAyXSA9IGZsb29yW24gLyAyXS4KCiAgICAgICAgeiA9IG4gJSAyICE9IDAgPyB4IDogUkFZOwoKICAgICAgICBmb3IgKG4gLz0gMjsgbiAhPSAwOyBuIC89IDIpIHsKICAgICAgICAgICAgeCA9IHJtdWwoeCwgeCk7CgogICAgICAgICAgICBpZiAobiAlIDIgIT0gMCkgewogICAgICAgICAgICAgICAgeiA9IHJtdWwoeiwgeCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcm1pbih1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCkgewogICAgICAgIHJldHVybiBobWluKHgsIHkpOwogICAgfQogICAgZnVuY3Rpb24gcm1heCh1aW50MTI4IHgsIHVpbnQxMjggeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCkgewogICAgICAgIHJldHVybiBobWF4KHgsIHkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhc3QodWludDI1NiB4KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB1aW50MTI4KHgpKSA9PSB4KTsKICAgIH0KCn0KCmNvbnRyYWN0IERTU3RvcCBpcyBEU0F1dGgsIERTTm90ZSB7CgogICAgYm9vbCBwdWJsaWMgc3RvcHBlZDsKCiAgICBtb2RpZmllciBzdG9wcGFibGUgewogICAgICAgIGFzc2VydCAoIXN0b3BwZWQpOwogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbiBzdG9wKCkgYXV0aCBub3RlIHsKICAgICAgICBzdG9wcGVkID0gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIHN0YXJ0KCkgYXV0aCBub3RlIHsKICAgICAgICBzdG9wcGVkID0gZmFsc2U7CiAgICB9Cgp9Cgpjb250cmFjdCBEU1Rva2VuQmFzZSBpcyBFUkMyMCwgRFNNYXRoIHsKICAgIHVpbnQyNTYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdXBwbHk7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpICAgICAgICAgICAgICAgICAgICAgICBfYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpICBfYXBwcm92YWxzOwogICAgCiAgICBmdW5jdGlvbiBEU1Rva2VuQmFzZSh1aW50MjU2IHN1cHBseSkgewogICAgICAgIF9iYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHN1cHBseTsKICAgICAgICBfc3VwcGx5ID0gc3VwcGx5OwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gX3N1cHBseTsKICAgIH0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHNyYykgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBfYmFsYW5jZXNbc3JjXTsKICAgIH0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIHNyYywgYWRkcmVzcyBndXkpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gX2FwcHJvdmFsc1tzcmNdW2d1eV07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgZHN0LCB1aW50IHdhZCkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFzc2VydChfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gd2FkKTsKICAgICAgICAKICAgICAgICBfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzdWIoX2JhbGFuY2VzW21zZy5zZW5kZXJdLCB3YWQpOwogICAgICAgIF9iYWxhbmNlc1tkc3RdID0gYWRkKF9iYWxhbmNlc1tkc3RdLCB3YWQpOwogICAgICAgIAogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIGRzdCwgd2FkKTsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3Mgc3JjLCBhZGRyZXNzIGRzdCwgdWludCB3YWQpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhc3NlcnQoX2JhbGFuY2VzW3NyY10gPj0gd2FkKTsKICAgICAgICBhc3NlcnQoX2FwcHJvdmFsc1tzcmNdW21zZy5zZW5kZXJdID49IHdhZCk7CiAgICAgICAgCiAgICAgICAgX2FwcHJvdmFsc1tzcmNdW21zZy5zZW5kZXJdID0gc3ViKF9hcHByb3ZhbHNbc3JjXVttc2cuc2VuZGVyXSwgd2FkKTsKICAgICAgICBfYmFsYW5jZXNbc3JjXSA9IHN1YihfYmFsYW5jZXNbc3JjXSwgd2FkKTsKICAgICAgICBfYmFsYW5jZXNbZHN0XSA9IGFkZChfYmFsYW5jZXNbZHN0XSwgd2FkKTsKICAgICAgICAKICAgICAgICBUcmFuc2ZlcihzcmMsIGRzdCwgd2FkKTsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIGd1eSwgdWludDI1NiB3YWQpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBfYXBwcm92YWxzW21zZy5zZW5kZXJdW2d1eV0gPSB3YWQ7CiAgICAgICAgCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgZ3V5LCB3YWQpOwogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKfQoKY29udHJhY3QgRFNUb2tlbiBpcyBEU1Rva2VuQmFzZSgwKSwgRFNTdG9wIHsKCiAgICBieXRlczMyICBwdWJsaWMgIHN5bWJvbDsKICAgIHVpbnQyNTYgIHB1YmxpYyAgZGVjaW1hbHMgPSAxODsgLy8gc3RhbmRhcmQgdG9rZW4gcHJlY2lzaW9uLiBvdmVycmlkZSB0byBjdXN0b21pemUKCiAgICBmdW5jdGlvbiBEU1Rva2VuKGJ5dGVzMzIgc3ltYm9sXykgewogICAgICAgIHN5bWJvbCA9IHN5bWJvbF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBkc3QsIHVpbnQgd2FkKSBzdG9wcGFibGUgbm90ZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKGRzdCwgd2FkKTsKICAgIH0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgKICAgICAgICBhZGRyZXNzIHNyYywgYWRkcmVzcyBkc3QsIHVpbnQgd2FkCiAgICApIHN0b3BwYWJsZSBub3RlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKHNyYywgZHN0LCB3YWQpOwogICAgfQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIGd1eSwgdWludCB3YWQpIHN0b3BwYWJsZSBub3RlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VwZXIuYXBwcm92ZShndXksIHdhZCk7CiAgICB9CgogICAgZnVuY3Rpb24gcHVzaChhZGRyZXNzIGRzdCwgdWludDEyOCB3YWQpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXIoZHN0LCB3YWQpOwogICAgfQogICAgZnVuY3Rpb24gcHVsbChhZGRyZXNzIHNyYywgdWludDEyOCB3YWQpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXJGcm9tKHNyYywgbXNnLnNlbmRlciwgd2FkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50KHVpbnQxMjggd2FkKSBhdXRoIHN0b3BwYWJsZSBub3RlIHsKICAgICAgICBfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBhZGQoX2JhbGFuY2VzW21zZy5zZW5kZXJdLCB3YWQpOwogICAgICAgIF9zdXBwbHkgPSBhZGQoX3N1cHBseSwgd2FkKTsKICAgIH0KICAgIGZ1bmN0aW9uIGJ1cm4odWludDEyOCB3YWQpIGF1dGggc3RvcHBhYmxlIG5vdGUgewogICAgICAgIF9iYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHN1YihfYmFsYW5jZXNbbXNnLnNlbmRlcl0sIHdhZCk7CiAgICAgICAgX3N1cHBseSA9IHN1Yihfc3VwcGx5LCB3YWQpOwogICAgfQoKICAgIC8vIE9wdGlvbmFsIHRva2VuIG5hbWUKCiAgICBieXRlczMyICAgcHVibGljICBuYW1lID0gIiI7CiAgICAKICAgIGZ1bmN0aW9uIHNldE5hbWUoYnl0ZXMzMiBuYW1lXykgYXV0aCB7CiAgICAgICAgbmFtZSA9IG5hbWVfOwogICAgfQoKfQoKY29udHJhY3QgRU9TU2FsZSBpcyBEU0F1dGgsIERTRXhlYywgRFNNYXRoIHsKICAgIERTVG9rZW4gIHB1YmxpYyAgRU9TOyAgICAgICAgICAgICAgICAgIC8vIFRoZSBFT1MgdG9rZW4gaXRzZWxmCiAgICB1aW50MTI4ICBwdWJsaWMgIHRvdGFsU3VwcGx5OyAgICAgICAgICAvLyBUb3RhbCBFT1MgYW1vdW50IGNyZWF0ZWQKICAgIHVpbnQxMjggIHB1YmxpYyAgZm91bmRlcnNBbGxvY2F0aW9uOyAgIC8vIEFtb3VudCBnaXZlbiB0byBmb3VuZGVycwogICAgc3RyaW5nICAgcHVibGljICBmb3VuZGVyc0tleTsgICAgICAgICAgLy8gUHVibGljIGtleSBvZiBmb3VuZGVycwoKICAgIHVpbnQgICAgIHB1YmxpYyAgb3BlblRpbWU7ICAgICAgICAgICAgIC8vIFRpbWUgb2Ygd2luZG93IDAgb3BlbmluZwogICAgdWludCAgICAgcHVibGljICBjcmVhdGVGaXJzdERheTsgICAgICAgLy8gVG9rZW5zIHNvbGQgaW4gd2luZG93IDAKCiAgICB1aW50ICAgICBwdWJsaWMgIHN0YXJ0VGltZTsgICAgICAgICAgICAvLyBUaW1lIG9mIHdpbmRvdyAxIG9wZW5pbmcKICAgIHVpbnQgICAgIHB1YmxpYyAgbnVtYmVyT2ZEYXlzOyAgICAgICAgIC8vIE51bWJlciBvZiB3aW5kb3dzIGFmdGVyIDAKICAgIHVpbnQgICAgIHB1YmxpYyAgY3JlYXRlUGVyRGF5OyAgICAgICAgIC8vIFRva2VucyBzb2xkIGluIGVhY2ggd2luZG93CgogICAgbWFwcGluZyAodWludCA9PiB1aW50KSAgICAgICAgICAgICAgICAgICAgICAgcHVibGljICBkYWlseVRvdGFsczsKICAgIG1hcHBpbmcgKHVpbnQgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgIHB1YmxpYyAgdXNlckJ1eXM7CiAgICBtYXBwaW5nICh1aW50ID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkpICBwdWJsaWMgIGNsYWltZWQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHN0cmluZykgICAgICAgICAgICAgICAgICBwdWJsaWMgIGtleXM7CgogICAgZXZlbnQgTG9nQnV5ICAgICAgKHVpbnQgd2luZG93LCBhZGRyZXNzIHVzZXIsIHVpbnQgYW1vdW50KTsKICAgIGV2ZW50IExvZ0NsYWltICAgICh1aW50IHdpbmRvdywgYWRkcmVzcyB1c2VyLCB1aW50IGFtb3VudCk7CiAgICBldmVudCBMb2dSZWdpc3RlciAoYWRkcmVzcyB1c2VyLCBzdHJpbmcga2V5KTsKICAgIGV2ZW50IExvZ0NvbGxlY3QgICh1aW50IGFtb3VudCk7CiAgICBldmVudCBMb2dGcmVlemUgICAoKTsKCiAgICBmdW5jdGlvbiBFT1NTYWxlKAogICAgICAgIHVpbnQgICAgIF9udW1iZXJPZkRheXMsCiAgICAgICAgdWludDEyOCAgX3RvdGFsU3VwcGx5LAogICAgICAgIHVpbnQgICAgIF9vcGVuVGltZSwKICAgICAgICB1aW50ICAgICBfc3RhcnRUaW1lLAogICAgICAgIHVpbnQxMjggIF9mb3VuZGVyc0FsbG9jYXRpb24sCiAgICAgICAgc3RyaW5nICAgX2ZvdW5kZXJzS2V5CiAgICApIHsKICAgICAgICBudW1iZXJPZkRheXMgICAgICAgPSBfbnVtYmVyT2ZEYXlzOwogICAgICAgIHRvdGFsU3VwcGx5ICAgICAgICA9IF90b3RhbFN1cHBseTsKICAgICAgICBvcGVuVGltZSAgICAgICAgICAgPSBfb3BlblRpbWU7CiAgICAgICAgc3RhcnRUaW1lICAgICAgICAgID0gX3N0YXJ0VGltZTsKICAgICAgICBmb3VuZGVyc0FsbG9jYXRpb24gPSBfZm91bmRlcnNBbGxvY2F0aW9uOwogICAgICAgIGZvdW5kZXJzS2V5ICAgICAgICA9IF9mb3VuZGVyc0tleTsKCiAgICAgICAgY3JlYXRlRmlyc3REYXkgPSB3bXVsKHRvdGFsU3VwcGx5LCAwLjIgZXRoZXIpOwogICAgICAgIGNyZWF0ZVBlckRheSA9IGRpdigKICAgICAgICAgICAgc3ViKHN1Yih0b3RhbFN1cHBseSwgZm91bmRlcnNBbGxvY2F0aW9uKSwgY3JlYXRlRmlyc3REYXkpLAogICAgICAgICAgICBudW1iZXJPZkRheXMKICAgICAgICApOwoKICAgICAgICBhc3NlcnQobnVtYmVyT2ZEYXlzID4gMCk7CiAgICAgICAgYXNzZXJ0KHRvdGFsU3VwcGx5ID4gZm91bmRlcnNBbGxvY2F0aW9uKTsKICAgICAgICBhc3NlcnQob3BlblRpbWUgPCBzdGFydFRpbWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGluaXRpYWxpemUoRFNUb2tlbiBlb3MpIGF1dGggewogICAgICAgIGFzc2VydChhZGRyZXNzKEVPUykgPT0gYWRkcmVzcygwKSk7CiAgICAgICAgYXNzZXJ0KGVvcy5vd25lcigpID09IGFkZHJlc3ModGhpcykpOwogICAgICAgIGFzc2VydChlb3MuYXV0aG9yaXR5KCkgPT0gRFNBdXRob3JpdHkoMCkpOwogICAgICAgIGFzc2VydChlb3MudG90YWxTdXBwbHkoKSA9PSAwKTsKCiAgICAgICAgRU9TID0gZW9zOwogICAgICAgIEVPUy5taW50KHRvdGFsU3VwcGx5KTsKCiAgICAgICAgLy8gQWRkcmVzcyAweGIxIGlzIHByb3ZhYmx5IG5vbi10cmFuc2ZlcnJhYmxlCiAgICAgICAgRU9TLnB1c2goMHhiMSwgZm91bmRlcnNBbGxvY2F0aW9uKTsKICAgICAgICBrZXlzWzB4YjFdID0gZm91bmRlcnNLZXk7CiAgICAgICAgTG9nUmVnaXN0ZXIoMHhiMSwgZm91bmRlcnNLZXkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRpbWUoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGJsb2NrLnRpbWVzdGFtcDsKICAgIH0KCiAgICBmdW5jdGlvbiB0b2RheSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gZGF5Rm9yKHRpbWUoKSk7CiAgICB9CgogICAgLy8gRWFjaCB3aW5kb3cgaXMgMjMgaG91cnMgbG9uZyBzbyB0aGF0IGVuZC1vZi13aW5kb3cgcm90YXRlcwogICAgLy8gYXJvdW5kIHRoZSBjbG9jayBmb3IgYWxsIHRpbWV6b25lcy4KICAgIGZ1bmN0aW9uIGRheUZvcih1aW50IHRpbWVzdGFtcCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiB0aW1lc3RhbXAgPCBzdGFydFRpbWUKICAgICAgICAgICAgPyAwCiAgICAgICAgICAgIDogc3ViKHRpbWVzdGFtcCwgc3RhcnRUaW1lKSAvIDIzIGhvdXJzICsgMTsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVPbkRheSh1aW50IGRheSkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBkYXkgPT0gMCA/IGNyZWF0ZUZpcnN0RGF5IDogY3JlYXRlUGVyRGF5OwogICAgfQoKICAgIC8vIFRoaXMgbWV0aG9kIHByb3ZpZGVzIHRoZSBidXllciBzb21lIHByb3RlY3Rpb25zIHJlZ2FyZGluZyB3aGljaAogICAgLy8gZGF5IHRoZSBidXkgb3JkZXIgaXMgc3VibWl0dGVkIGFuZCB0aGUgbWF4aW11bSBwcmljZSBwcmlvciB0bwogICAgLy8gYXBwbHlpbmcgdGhpcyBwYXltZW50IHRoYXQgd2lsbCBiZSBhbGxvd2VkLgogICAgZnVuY3Rpb24gYnV5V2l0aExpbWl0KHVpbnQgZGF5LCB1aW50IGxpbWl0KSBwYXlhYmxlIHsKICAgICAgICBhc3NlcnQodGltZSgpID49IG9wZW5UaW1lICYmIHRvZGF5KCkgPD0gbnVtYmVyT2ZEYXlzKTsKICAgICAgICBhc3NlcnQobXNnLnZhbHVlID49IDAuMDEgZXRoZXIpOwoKICAgICAgICBhc3NlcnQoZGF5ID49IHRvZGF5KCkpOwogICAgICAgIGFzc2VydChkYXkgPD0gbnVtYmVyT2ZEYXlzKTsKCiAgICAgICAgdXNlckJ1eXNbZGF5XVttc2cuc2VuZGVyXSArPSBtc2cudmFsdWU7CiAgICAgICAgZGFpbHlUb3RhbHNbZGF5XSArPSBtc2cudmFsdWU7CgogICAgICAgIGlmIChsaW1pdCAhPSAwKSB7CiAgICAgICAgICAgIGFzc2VydChkYWlseVRvdGFsc1tkYXldIDw9IGxpbWl0KTsKICAgICAgICB9CgogICAgICAgIExvZ0J1eShkYXksIG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5KCkgcGF5YWJsZSB7CiAgICAgICBidXlXaXRoTGltaXQodG9kYXkoKSwgMCk7CiAgICB9CgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICBidXkoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbGFpbSh1aW50IGRheSkgewogICAgICAgIGFzc2VydCh0b2RheSgpID4gZGF5KTsKCiAgICAgICAgaWYgKGNsYWltZWRbZGF5XVttc2cuc2VuZGVyXSB8fCBkYWlseVRvdGFsc1tkYXldID09IDApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gVGhpcyB3aWxsIGhhdmUgc21hbGwgcm91bmRpbmcgZXJyb3JzLCBidXQgdGhlIHRva2VuIGlzCiAgICAgICAgLy8gZ29pbmcgdG8gYmUgdHJ1bmNhdGVkIHRvIDggZGVjaW1hbCBwbGFjZXMgb3IgbGVzcyBhbnl3YXkKICAgICAgICAvLyB3aGVuIGxhdW5jaGVkIG9uIGl0cyBvd24gY2hhaW4uCgogICAgICAgIHZhciBkYWlseVRvdGFsID0gY2FzdChkYWlseVRvdGFsc1tkYXldKTsKICAgICAgICB2YXIgdXNlclRvdGFsICA9IGNhc3QodXNlckJ1eXNbZGF5XVttc2cuc2VuZGVyXSk7CiAgICAgICAgdmFyIHByaWNlICAgICAgPSB3ZGl2KGNhc3QoY3JlYXRlT25EYXkoZGF5KSksIGRhaWx5VG90YWwpOwogICAgICAgIHZhciByZXdhcmQgICAgID0gd211bChwcmljZSwgdXNlclRvdGFsKTsKCiAgICAgICAgY2xhaW1lZFtkYXldW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgICBFT1MucHVzaChtc2cuc2VuZGVyLCByZXdhcmQpOwoKICAgICAgICBMb2dDbGFpbShkYXksIG1zZy5zZW5kZXIsIHJld2FyZCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2xhaW1BbGwoKSB7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdG9kYXkoKTsgaSsrKSB7CiAgICAgICAgICAgIGNsYWltKGkpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBWYWx1ZSBzaG91bGQgYmUgYSBwdWJsaWMga2V5LiAgUmVhZCBmdWxsIGtleSBpbXBvcnQgcG9saWN5LgogICAgLy8gTWFudWFsbHkgcmVnaXN0ZXJpbmcgcmVxdWlyZXMgYSBiYXNlNTgKICAgIC8vIGVuY29kZWQgdXNpbmcgdGhlIFNURUVNLCBCVFMsIG9yIEVPUyBwdWJsaWMga2V5IGZvcm1hdC4KICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKHN0cmluZyBrZXkpIHsKICAgICAgICBhc3NlcnQodG9kYXkoKSA8PSAgbnVtYmVyT2ZEYXlzICsgMSk7CiAgICAgICAgYXNzZXJ0KGJ5dGVzKGtleSkubGVuZ3RoIDw9IDY0KTsKCiAgICAgICAga2V5c1ttc2cuc2VuZGVyXSA9IGtleTsKCiAgICAgICAgTG9nUmVnaXN0ZXIobXNnLnNlbmRlciwga2V5KTsKICAgIH0KCiAgICAvLyBDcm93ZHNhbGUgb3duZXJzIGNhbiBjb2xsZWN0IEVUSCBhbnkgbnVtYmVyIG9mIHRpbWVzCiAgICBmdW5jdGlvbiBjb2xsZWN0KCkgYXV0aCB7CiAgICAgICAgYXNzZXJ0KHRvZGF5KCkgPiAwKTsgLy8gUHJldmVudCByZWN5Y2xpbmcgZHVyaW5nIHdpbmRvdyAwCiAgICAgICAgZXhlYyhtc2cuc2VuZGVyLCB0aGlzLmJhbGFuY2UpOwogICAgICAgIExvZ0NvbGxlY3QodGhpcy5iYWxhbmNlKTsKICAgIH0KCiAgICAvLyBBbnlvbmUgY2FuIGZyZWV6ZSB0aGUgdG9rZW4gMSBkYXkgYWZ0ZXIgdGhlIHNhbGUgZW5kcwogICAgZnVuY3Rpb24gZnJlZXplKCkgewogICAgICAgIGFzc2VydCh0b2RheSgpID4gbnVtYmVyT2ZEYXlzICsgMSk7CiAgICAgICAgRU9TLnN0b3AoKTsKICAgICAgICBMb2dGcmVlemUoKTsKICAgIH0KfQ=='.
	

]
