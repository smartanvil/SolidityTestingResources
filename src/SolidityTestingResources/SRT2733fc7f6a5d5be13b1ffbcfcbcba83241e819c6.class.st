Class {
	#name : #SRT2733fc7f6a5d5be13b1ffbcfcbcba83241e819c6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2733fc7f6a5d5be13b1ffbcfcbcba83241e819c6 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7Cgpjb250cmFjdCBEaWdpeENvbnN0YW50cyB7CiAgLy8vIGdlbmVyYWwgY29uc3RhbnRzCiAgdWludDI1NiBjb25zdGFudCBTRUNPTkRTX0lOX0FfREFZID0gMjQgKiA2MCAqIDYwOwoKICAvLy8gYXNzZXQgZXZlbnRzCiAgdWludDI1NiBjb25zdGFudCBBU1NFVF9FVkVOVF9DUkVBVEVEX1ZFTkRPUl9PUkRFUiA9IDE7CiAgdWludDI1NiBjb25zdGFudCBBU1NFVF9FVkVOVF9DUkVBVEVEX1RSQU5TRkVSX09SREVSID0gMjsKICB1aW50MjU2IGNvbnN0YW50IEFTU0VUX0VWRU5UX0NSRUFURURfUkVQTEFDRU1FTlRfT1JERVIgPSAzOwogIHVpbnQyNTYgY29uc3RhbnQgQVNTRVRfRVZFTlRfRlVMRklMTEVEX1ZFTkRPUl9PUkRFUiA9IDQ7CiAgdWludDI1NiBjb25zdGFudCBBU1NFVF9FVkVOVF9GVUxGSUxMRURfVFJBTlNGRVJfT1JERVIgPSA1OwogIHVpbnQyNTYgY29uc3RhbnQgQVNTRVRfRVZFTlRfRlVMRklMTEVEX1JFUExBQ0VNRU5UX09SREVSID0gNjsKICB1aW50MjU2IGNvbnN0YW50IEFTU0VUX0VWRU5UX01JTlRFRCA9IDc7CiAgdWludDI1NiBjb25zdGFudCBBU1NFVF9FVkVOVF9NSU5URURfUkVQTEFDRU1FTlQgPSA4OwogIHVpbnQyNTYgY29uc3RhbnQgQVNTRVRfRVZFTlRfUkVDQVNURUQgPSA5OwogIHVpbnQyNTYgY29uc3RhbnQgQVNTRVRfRVZFTlRfUkVERUVNRUQgPSAxMDsKICB1aW50MjU2IGNvbnN0YW50IEFTU0VUX0VWRU5UX0ZBSUxFRF9BVURJVCA9IDExOwogIHVpbnQyNTYgY29uc3RhbnQgQVNTRVRfRVZFTlRfQURNSU5fRkFJTEVEID0gMTI7CiAgdWludDI1NiBjb25zdGFudCBBU1NFVF9FVkVOVF9SRU1JTlRFRCA9IDEzOwoKICAvLy8gcm9sZXMKICB1aW50MjU2IGNvbnN0YW50IFJPTEVfWkVST19BTllPTkUgPSAwOwogIHVpbnQyNTYgY29uc3RhbnQgUk9MRV9ST09UID0gMTsKICB1aW50MjU2IGNvbnN0YW50IFJPTEVfVkVORE9SID0gMjsKICB1aW50MjU2IGNvbnN0YW50IFJPTEVfWEZFUkFVVEggPSAzOwogIHVpbnQyNTYgY29uc3RhbnQgUk9MRV9QT1BBRE1JTiA9IDQ7CiAgdWludDI1NiBjb25zdGFudCBST0xFX0NVU1RPRElBTiA9IDU7CiAgdWludDI1NiBjb25zdGFudCBST0xFX0FVRElUT1IgPSA2OwogIHVpbnQyNTYgY29uc3RhbnQgUk9MRV9NQVJLRVRQTEFDRV9BRE1JTiA9IDc7CiAgdWludDI1NiBjb25zdGFudCBST0xFX0tZQ19BRE1JTiA9IDg7CiAgdWludDI1NiBjb25zdGFudCBST0xFX0ZFRVNfQURNSU4gPSA5OwogIHVpbnQyNTYgY29uc3RhbnQgUk9MRV9ET0NTX1VQTE9BREVSID0gMTA7CiAgdWludDI1NiBjb25zdGFudCBST0xFX0tZQ19SRUNBU1RFUiA9IDExOwogIHVpbnQyNTYgY29uc3RhbnQgUk9MRV9GRUVTX0RJU1RSSUJVVElPTl9BRE1JTiA9IDEyOwoKICAvLy8gc3RhdGVzCiAgdWludDI1NiBjb25zdGFudCBTVEFURV9aRVJPX1VOREVGSU5FRCA9IDA7CiAgdWludDI1NiBjb25zdGFudCBTVEFURV9DUkVBVEVEID0gMTsKICB1aW50MjU2IGNvbnN0YW50IFNUQVRFX1ZFTkRPUl9PUkRFUiA9IDI7CiAgdWludDI1NiBjb25zdGFudCBTVEFURV9UUkFOU0ZFUiA9IDM7CiAgdWludDI1NiBjb25zdGFudCBTVEFURV9DVVNUT0RJQU5fREVMSVZFUlkgPSA0OwogIHVpbnQyNTYgY29uc3RhbnQgU1RBVEVfTUlOVEVEID0gNTsKICB1aW50MjU2IGNvbnN0YW50IFNUQVRFX0FVRElUX0ZBSUxVUkUgPSA2OwogIHVpbnQyNTYgY29uc3RhbnQgU1RBVEVfUkVQTEFDRU1FTlRfT1JERVIgPSA3OwogIHVpbnQyNTYgY29uc3RhbnQgU1RBVEVfUkVQTEFDRU1FTlRfREVMSVZFUlkgPSA4OwogIHVpbnQyNTYgY29uc3RhbnQgU1RBVEVfUkVDQVNURUQgPSA5OwogIHVpbnQyNTYgY29uc3RhbnQgU1RBVEVfUkVERUVNRUQgPSAxMDsKICB1aW50MjU2IGNvbnN0YW50IFNUQVRFX0FETUlOX0ZBSUxVUkUgPSAxMTsKCiAgLy8vIGludGVyYWN0aXZlIGNvbnRyYWN0cwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfSU5URVJBQ1RJVkVfQVNTRVRTX0VYUExPUkVSID0gImk6YXNzZXQ6ZXhwbG9yZXIiOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfSU5URVJBQ1RJVkVfRElHSVhfRElSRUNUT1JZID0gImk6ZGlyZWN0b3J5IjsKICBieXRlczMyIGNvbnN0YW50IENPTlRSQUNUX0lOVEVSQUNUSVZFX01BUktFVFBMQUNFID0gImk6bXAiOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfSU5URVJBQ1RJVkVfTUFSS0VUUExBQ0VfQURNSU4gPSAiaTptcGFkbWluIjsKICBieXRlczMyIGNvbnN0YW50IENPTlRSQUNUX0lOVEVSQUNUSVZFX1BPUEFETUlOID0gImk6cG9wYWRtaW4iOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfSU5URVJBQ1RJVkVfUFJPRFVDVFNfTElTVCA9ICJpOnByb2R1Y3RzIjsKICBieXRlczMyIGNvbnN0YW50IENPTlRSQUNUX0lOVEVSQUNUSVZFX1RPS0VOID0gImk6dG9rZW4iOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfSU5URVJBQ1RJVkVfQlVMS19XUkFQUEVSID0gImk6YnVsay13cmFwcGVyIjsKICBieXRlczMyIGNvbnN0YW50IENPTlRSQUNUX0lOVEVSQUNUSVZFX1RPS0VOX0NPTkZJRyA9ICJpOnRva2VuOmNvbmZpZyI7CiAgYnl0ZXMzMiBjb25zdGFudCBDT05UUkFDVF9JTlRFUkFDVElWRV9UT0tFTl9JTkZPUk1BVElPTiA9ICJpOnRva2VuOmluZm9ybWF0aW9uIjsKICBieXRlczMyIGNvbnN0YW50IENPTlRSQUNUX0lOVEVSQUNUSVZFX01BUktFVFBMQUNFX0lORk9STUFUSU9OID0gImk6bXA6aW5mb3JtYXRpb24iOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfSU5URVJBQ1RJVkVfSURFTlRJVFkgPSAiaTppZGVudGl0eSI7CgogIC8vLyBjb250cm9sbGVyIGNvbnRyYWN0cwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfQ09OVFJPTExFUl9BU1NFVFMgPSAiYzphc3NldCI7CiAgYnl0ZXMzMiBjb25zdGFudCBDT05UUkFDVF9DT05UUk9MTEVSX0FTU0VUU19SRUNBU1QgPSAiYzphc3NldDpyZWNhc3QiOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfQ09OVFJPTExFUl9BU1NFVFNfRVhQTE9SRVIgPSAiYzpleHBsb3JlciI7CiAgYnl0ZXMzMiBjb25zdGFudCBDT05UUkFDVF9DT05UUk9MTEVSX0RJR0lYX0RJUkVDVE9SWSA9ICJjOmRpcmVjdG9yeSI7CiAgYnl0ZXMzMiBjb25zdGFudCBDT05UUkFDVF9DT05UUk9MTEVSX01BUktFVFBMQUNFID0gImM6bXAiOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfQ09OVFJPTExFUl9NQVJLRVRQTEFDRV9BRE1JTiA9ICJjOm1wYWRtaW4iOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfQ09OVFJPTExFUl9QUk9EVUNUU19MSVNUID0gImM6cHJvZHVjdHMiOwoKICBieXRlczMyIGNvbnN0YW50IENPTlRSQUNUX0NPTlRST0xMRVJfVE9LRU5fQVBQUk9WQUwgPSAiYzp0b2tlbjphcHByb3ZhbCI7CiAgYnl0ZXMzMiBjb25zdGFudCBDT05UUkFDVF9DT05UUk9MTEVSX1RPS0VOX0NPTkZJRyA9ICJjOnRva2VuOmNvbmZpZyI7CiAgYnl0ZXMzMiBjb25zdGFudCBDT05UUkFDVF9DT05UUk9MTEVSX1RPS0VOX0lORk8gPSAiYzp0b2tlbjppbmZvIjsKICBieXRlczMyIGNvbnN0YW50IENPTlRSQUNUX0NPTlRST0xMRVJfVE9LRU5fVFJBTlNGRVIgPSAiYzp0b2tlbjp0cmFuc2ZlciI7CgogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfQ09OVFJPTExFUl9KT0JfSUQgPSAiYzpqb2JpZCI7CiAgYnl0ZXMzMiBjb25zdGFudCBDT05UUkFDVF9DT05UUk9MTEVSX0lERU5USVRZID0gImM6aWRlbnRpdHkiOwoKICAvLy8gc3RvcmFnZSBjb250cmFjdHMKICBieXRlczMyIGNvbnN0YW50IENPTlRSQUNUX1NUT1JBR0VfQVNTRVRTID0gInM6YXNzZXQiOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfU1RPUkFHRV9BU1NFVF9FVkVOVFMgPSAiczphc3NldDpldmVudHMiOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfU1RPUkFHRV9ESUdJWF9ESVJFQ1RPUlkgPSAiczpkaXJlY3RvcnkiOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfU1RPUkFHRV9NQVJLRVRQTEFDRSA9ICJzOm1wIjsKICBieXRlczMyIGNvbnN0YW50IENPTlRSQUNUX1NUT1JBR0VfUFJPRFVDVFNfTElTVCA9ICJzOnByb2R1Y3RzIjsKICBieXRlczMyIGNvbnN0YW50IENPTlRSQUNUX1NUT1JBR0VfR09MRF9UT0tFTiA9ICJzOmdvbGR0b2tlbiI7CiAgYnl0ZXMzMiBjb25zdGFudCBDT05UUkFDVF9TVE9SQUdFX0pPQl9JRCA9ICJzOmpvYmlkIjsKICBieXRlczMyIGNvbnN0YW50IENPTlRSQUNUX1NUT1JBR0VfSURFTlRJVFkgPSAiczppZGVudGl0eSI7CgogIC8vLyBzZXJ2aWNlIGNvbnRyYWN0cwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfU0VSVklDRV9UT0tFTl9ERU1VUlJBR0UgPSAic3Y6dGRlbXVycmFnZSI7CiAgYnl0ZXMzMiBjb25zdGFudCBDT05UUkFDVF9TRVJWSUNFX01BUktFVFBMQUNFID0gInN2Om1wIjsKICBieXRlczMyIGNvbnN0YW50IENPTlRSQUNUX1NFUlZJQ0VfRElSRUNUT1JZID0gInN2OmRpcmVjdG9yeSI7CgogIC8vLyBmZWVzIGRpc3RyaWJ1dG9ycwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfREVNVVJSQUdFX0ZFRVNfRElTVFJJQlVUT1IgPSAiZmVlczpkaXN0cmlidXRvcjpkZW11cnJhZ2UiOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfUkVDQVNUX0ZFRVNfRElTVFJJQlVUT1IgPSAiZmVlczpkaXN0cmlidXRvcjpyZWNhc3QiOwogIGJ5dGVzMzIgY29uc3RhbnQgQ09OVFJBQ1RfVFJBTlNGRVJfRkVFU19ESVNUUklCVVRPUiA9ICJmZWVzOmRpc3RyaWJ1dG9yOnRyYW5zZmVyIjsKfQoKY29udHJhY3QgQ29udHJhY3RSZXNvbHZlciB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgYm9vbCBwdWJsaWMgbG9ja2VkOwogIGZ1bmN0aW9uIGluaXRfcmVnaXN0ZXJfY29udHJhY3QoYnl0ZXMzMiBfa2V5LCBhZGRyZXNzIF9jb250cmFjdF9hZGRyZXNzKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBfc3VjY2Vzcyk7CiAgZnVuY3Rpb24gdW5yZWdpc3Rlcl9jb250cmFjdChieXRlczMyIF9rZXkpIHB1YmxpYyByZXR1cm5zIChib29sIF9zdWNjZXNzKTsKICBmdW5jdGlvbiBnZXRfY29udHJhY3QoYnl0ZXMzMiBfa2V5KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyBfY29udHJhY3QpOwp9Cgpjb250cmFjdCBSZXNvbHZlckNsaWVudCB7CgogIC8vLyBUaGUgYWRkcmVzcyBvZiB0aGUgcmVzb2x2ZXIgY29udHJhY3QgZm9yIHRoaXMgcHJvamVjdAogIGFkZHJlc3MgcHVibGljIHJlc29sdmVyOwogIC8vLyBUaGUga2V5IHRvIGlkZW50aWZ5IHRoaXMgY29udHJhY3QKICBieXRlczMyIHB1YmxpYyBrZXk7CgogIC8vLyBNYWtlIG91ciBvd24gYWRkcmVzcyBhdmFpbGFibGUgdG8gdXMgYXMgYSBjb25zdGFudAogIGFkZHJlc3MgcHVibGljIENPTlRSQUNUX0FERFJFU1M7CgogIC8vLyBGdW5jdGlvbiBtb2RpZmllciB0byBjaGVjayBpZiBtc2cuc2VuZGVyIGNvcnJlc3BvbmRzIHRvIHRoZSByZXNvbHZlZCBhZGRyZXNzIG9mIGEgZ2l2ZW4ga2V5CiAgLy8vIEBwYXJhbSBfY29udHJhY3QgVGhlIHJlc29sdmVyIGtleQogIG1vZGlmaWVyIGlmX3NlbmRlcl9pcyhieXRlczMyIF9jb250cmFjdCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IENvbnRyYWN0UmVzb2x2ZXIocmVzb2x2ZXIpLmdldF9jb250cmFjdChfY29udHJhY3QpKTsKICAgIF87CiAgfQoKICAvLy8gRnVuY3Rpb24gbW9kaWZpZXIgdG8gY2hlY2sgcmVzb2x2ZXIncyBsb2NraW5nIHN0YXR1cy4KICBtb2RpZmllciB1bmxlc3NfcmVzb2x2ZXJfaXNfbG9ja2VkKCkgewogICAgcmVxdWlyZShpc19sb2NrZWQoKSA9PSBmYWxzZSk7CiAgICBfOwogIH0KCiAgLy8vIEBkZXYgSW5pdGlhbGl6ZSBuZXcgY29udHJhY3QKICAvLy8gQHBhcmFtIF9rZXkgdGhlIHJlc29sdmVyIGtleSBmb3IgdGhpcyBjb250cmFjdAogIC8vLyBAcmV0dXJuIF9zdWNjZXNzIGlmIHRoZSBpbml0aWFsaXphdGlvbiBpcyBzdWNjZXNzZnVsCiAgZnVuY3Rpb24gaW5pdChieXRlczMyIF9rZXksIGFkZHJlc3MgX3Jlc29sdmVyKQogICAgICAgICAgIGludGVybmFsCiAgICAgICAgICAgcmV0dXJucyAoYm9vbCBfc3VjY2VzcykKICB7CiAgICBib29sIF9pc19sb2NrZWQgPSBDb250cmFjdFJlc29sdmVyKF9yZXNvbHZlcikubG9ja2VkKCk7CiAgICBpZiAoX2lzX2xvY2tlZCA9PSBmYWxzZSkgewogICAgICBDT05UUkFDVF9BRERSRVNTID0gYWRkcmVzcyh0aGlzKTsKICAgICAgcmVzb2x2ZXIgPSBfcmVzb2x2ZXI7CiAgICAgIGtleSA9IF9rZXk7CiAgICAgIHJlcXVpcmUoQ29udHJhY3RSZXNvbHZlcihyZXNvbHZlcikuaW5pdF9yZWdpc3Rlcl9jb250cmFjdChrZXksIENPTlRSQUNUX0FERFJFU1MpKTsKICAgICAgX3N1Y2Nlc3MgPSB0cnVlOwogICAgfSAgZWxzZSB7CiAgICAgIF9zdWNjZXNzID0gZmFsc2U7CiAgICB9CiAgfQoKICAvLy8gQGRldiBEZXN0cm95IHRoZSBjb250cmFjdCBhbmQgdW5yZWdpc3RlciBzZWxmIGZyb20gdGhlIENvbnRyYWN0UmVzb2x2ZXIKICAvLy8gQGRldiBDYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIG93bmVyIG9mIENvbnRyYWN0UmVzb2x2ZXIKICBmdW5jdGlvbiBkZXN0cm95KCkKICAgICAgICAgICBwdWJsaWMKICAgICAgICAgICByZXR1cm5zIChib29sIF9zdWNjZXNzKQogIHsKICAgIGJvb2wgX2lzX2xvY2tlZCA9IENvbnRyYWN0UmVzb2x2ZXIocmVzb2x2ZXIpLmxvY2tlZCgpOwogICAgcmVxdWlyZSghX2lzX2xvY2tlZCk7CgogICAgYWRkcmVzcyBfb3duZXJfb2ZfY29udHJhY3RfcmVzb2x2ZXIgPSBDb250cmFjdFJlc29sdmVyKHJlc29sdmVyKS5vd25lcigpOwogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IF9vd25lcl9vZl9jb250cmFjdF9yZXNvbHZlcik7CgogICAgX3N1Y2Nlc3MgPSBDb250cmFjdFJlc29sdmVyKHJlc29sdmVyKS51bnJlZ2lzdGVyX2NvbnRyYWN0KGtleSk7CiAgICByZXF1aXJlKF9zdWNjZXNzKTsKCiAgICBzZWxmZGVzdHJ1Y3QoX293bmVyX29mX2NvbnRyYWN0X3Jlc29sdmVyKTsKICB9CgogIC8vLyBAZGV2IENoZWNrIGlmIHJlc29sdmVyIGlzIGxvY2tlZAogIC8vLyBAcmV0dXJuIF9sb2NrZWQgaWYgdGhlIHJlc29sdmVyIGlzIGN1cnJlbnRseSBsb2NrZWQKICBmdW5jdGlvbiBpc19sb2NrZWQoKQogICAgICAgICAgIHByaXZhdGUKICAgICAgICAgICBjb25zdGFudAogICAgICAgICAgIHJldHVybnMgKGJvb2wgX2xvY2tlZCkKICB7CiAgICBfbG9ja2VkID0gQ29udHJhY3RSZXNvbHZlcihyZXNvbHZlcikubG9ja2VkKCk7CiAgfQoKICAvLy8gQGRldiBHZXQgdGhlIGFkZHJlc3Mgb2YgYSBjb250cmFjdAogIC8vLyBAcGFyYW0gX2tleSB0aGUgcmVzb2x2ZXIga2V5IHRvIGxvb2sgdXAKICAvLy8gQHJldHVybiBfY29udHJhY3QgdGhlIGFkZHJlc3Mgb2YgdGhlIGNvbnRyYWN0CiAgZnVuY3Rpb24gZ2V0X2NvbnRyYWN0KGJ5dGVzMzIgX2tleSkKICAgICAgICAgICBwdWJsaWMKICAgICAgICAgICBjb25zdGFudAogICAgICAgICAgIHJldHVybnMgKGFkZHJlc3MgX2NvbnRyYWN0KQogIHsKICAgIF9jb250cmFjdCA9IENvbnRyYWN0UmVzb2x2ZXIocmVzb2x2ZXIpLmdldF9jb250cmFjdChfa2V5KTsKICB9Cn0KCi8vLyBAdGl0bGUgU29tZSB1c2VmdWwgY29uc3RhbnRzCi8vLyBAYXV0aG9yIERpZ2l4IEhvbGRpbmdzIFB0ZSBMdGQKY29udHJhY3QgQ29uc3RhbnRzIHsKICBhZGRyZXNzIGNvbnN0YW50IE5VTExfQUREUkVTUyA9IGFkZHJlc3MoMHgwKTsKICB1aW50MjU2IGNvbnN0YW50IFpFUk8gPSB1aW50MjU2KDApOwogIGJ5dGVzMzIgY29uc3RhbnQgRU1QVFkgPSBieXRlczMyKDB4MCk7Cn0KCi8vLyBAdGl0bGUgQ29uZGl0aW9uIGJhc2VkIGFjY2VzcyBjb250cm9sCi8vLyBAYXV0aG9yIERpZ2l4IEhvbGRpbmdzIFB0ZSBMdGQKY29udHJhY3QgQUNDb25kaXRpb25zIGlzIENvbnN0YW50cyB7CgogIG1vZGlmaWVyIG5vdF9udWxsX2FkZHJlc3MoYWRkcmVzcyBfaXRlbSkgewogICAgcmVxdWlyZShfaXRlbSAhPSBOVUxMX0FERFJFU1MpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIGlmX251bGxfYWRkcmVzcyhhZGRyZXNzIF9pdGVtKSB7CiAgICByZXF1aXJlKF9pdGVtID09IE5VTExfQUREUkVTUyk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgbm90X251bGxfdWludCh1aW50MjU2IF9pdGVtKSB7CiAgICByZXF1aXJlKF9pdGVtICE9IFpFUk8pOwogICAgXzsKICB9CgogIG1vZGlmaWVyIGlmX251bGxfdWludCh1aW50MjU2IF9pdGVtKSB7CiAgICByZXF1aXJlKF9pdGVtID09IFpFUk8pOwogICAgXzsKICB9CgogIG1vZGlmaWVyIG5vdF9lbXB0eV9ieXRlcyhieXRlczMyIF9pdGVtKSB7CiAgICByZXF1aXJlKF9pdGVtICE9IEVNUFRZKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBpZl9lbXB0eV9ieXRlcyhieXRlczMyIF9pdGVtKSB7CiAgICByZXF1aXJlKF9pdGVtID09IEVNUFRZKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBub3RfbnVsbF9zdHJpbmcoc3RyaW5nIF9pdGVtKSB7CiAgICBieXRlcyBtZW1vcnkgX2kgPSBieXRlcyhfaXRlbSk7CiAgICByZXF1aXJlKF9pLmxlbmd0aCA+IDApOwogICAgXzsKICB9CgogIG1vZGlmaWVyIGlmX251bGxfc3RyaW5nKHN0cmluZyBfaXRlbSkgewogICAgYnl0ZXMgbWVtb3J5IF9pID0gYnl0ZXMoX2l0ZW0pOwogICAgcmVxdWlyZShfaS5sZW5ndGggPT0gMCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgcmVxdWlyZV9nYXModWludDI1NiBfcmVxdWlyZWRnYXMpIHsKICAgIHJlcXVpcmUobXNnLmdhcyAgPj0gKF9yZXF1aXJlZGdhcyAtIDIyMDAwKSk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gaXNfY29udHJhY3QoYWRkcmVzcyBfY29udHJhY3QpCiAgICAgICAgICAgcHVibGljCiAgICAgICAgICAgY29uc3RhbnQKICAgICAgICAgICByZXR1cm5zIChib29sIF9pc19jb250cmFjdCkKICB7CiAgICB1aW50MzIgX2NvZGVfbGVuZ3RoOwoKICAgIGFzc2VtYmx5IHsKICAgICAgX2NvZGVfbGVuZ3RoIDo9IGV4dGNvZGVzaXplKF9jb250cmFjdCkKICAgIH0KCiAgICBpZihfY29kZV9sZW5ndGggPiAxKSB7CiAgICAgIF9pc19jb250cmFjdCA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBfaXNfY29udHJhY3QgPSBmYWxzZTsKICAgIH0KICB9CgogIG1vZGlmaWVyIGlmX2NvbnRyYWN0KGFkZHJlc3MgX2NvbnRyYWN0KSB7CiAgICByZXF1aXJlKGlzX2NvbnRyYWN0KF9jb250cmFjdCkgPT0gdHJ1ZSk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgdW5sZXNzX2NvbnRyYWN0KGFkZHJlc3MgX2NvbnRyYWN0KSB7CiAgICByZXF1aXJlKGlzX2NvbnRyYWN0KF9jb250cmFjdCkgPT0gZmFsc2UpOwogICAgXzsKICB9Cn0KCmNvbnRyYWN0IElkZW50aXR5U3RvcmFnZSB7CiAgZnVuY3Rpb24gcmVhZF91c2VyKGFkZHJlc3MgX3VzZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9pZF9leHBpcmF0aW9uLCBieXRlczMyIF9kb2MpOwp9Cgpjb250cmFjdCBNYXJrZXRwbGFjZVN0b3JhZ2UgewogIGZ1bmN0aW9uIHJlYWRfdXNlcihhZGRyZXNzIF91c2VyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBfZGFpbHlfZGd4X2xpbWl0LCB1aW50MjU2IF90b3RhbF9wdXJjaGFzZWRfdG9kYXkpOwogIGZ1bmN0aW9uIHJlYWRfdXNlcl9kYWlseV9saW1pdChhZGRyZXNzIF91c2VyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBfZGFpbHlfZGd4X2xpbWl0KTsKICBmdW5jdGlvbiByZWFkX2NvbmZpZygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9nbG9iYWxfZGFpbHlfZGd4X25nX2xpbWl0LCB1aW50MjU2IF9taW5pbXVtX3B1cmNoYXNlX2RneF9uZywgdWludDI1NiBfbWF4aW11bV9ibG9ja19kcmlmdCwgYWRkcmVzcyBfcGF5bWVudF9jb2xsZWN0b3IpOwogIGZ1bmN0aW9uIHJlYWRfZGd4X2ludmVudG9yeV9iYWxhbmNlX25nKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX2JhbGFuY2UpOwogIGZ1bmN0aW9uIHJlYWRfdG90YWxfbnVtYmVyX29mX3B1cmNoYXNlcygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF90b3RhbF9udW1iZXJfb2ZfcHVyY2hhc2VzKTsKICBmdW5jdGlvbiByZWFkX3RvdGFsX251bWJlcl9vZl91c2VyX3B1cmNoYXNlcyhhZGRyZXNzIF91c2VyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBfdG90YWxfbnVtYmVyX29mX3VzZXJfcHVyY2hhc2VzKTsKICBmdW5jdGlvbiByZWFkX3B1cmNoYXNlX2F0X2luZGV4KHVpbnQyNTYgX2luZGV4KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyBfcmVjaXBpZW50LCB1aW50MjU2IF90aW1lc3RhbXAsIHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBfcHJpY2UpOwogIGZ1bmN0aW9uIHJlYWRfdXNlcl9wdXJjaGFzZV9hdF9pbmRleChhZGRyZXNzIF91c2VyLCB1aW50MjU2IF9pbmRleCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfdGltZXN0YW1wLCB1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgX3ByaWNlKTsKICBmdW5jdGlvbiByZWFkX3RvdGFsX2dsb2JhbF9wdXJjaGFzZWRfdG9kYXkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBfdG90YWxfZ2xvYmFsX3B1cmNoYXNlZF90b2RheSk7CiAgZnVuY3Rpb24gcmVhZF90b3RhbF9wdXJjaGFzZWRfdG9kYXkoYWRkcmVzcyBfdXNlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsX3B1cmNoYXNlZF90b2RheSk7CiAgZnVuY3Rpb24gcmVhZF9tYXhfZGd4X2F2YWlsYWJsZV9kYWlseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9tYXhfZGd4X2F2YWlsYWJsZV9kYWlseSk7CiAgZnVuY3Rpb24gcmVhZF9wcmljZV9mbG9vcigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9wcmljZV9mbG9vcl93ZWlfcGVyX2RneF9tZyk7Cn0KCmNvbnRyYWN0IE1hcmtldHBsYWNlQ29udHJvbGxlckNvbW1vbiB7Cn0KCmNvbnRyYWN0IE1hcmtldHBsYWNlQ29udHJvbGxlciB7Cn0KCmNvbnRyYWN0IE1hcmtldHBsYWNlQWRtaW5Db250cm9sbGVyIHsKfQoKY29udHJhY3QgTWFya2V0cGxhY2VDb21tb24gaXMgUmVzb2x2ZXJDbGllbnQsIEFDQ29uZGl0aW9ucywgRGlnaXhDb25zdGFudHMgewoKICBmdW5jdGlvbiBtYXJrZXRwbGFjZV9hZG1pbl9jb250cm9sbGVyKCkKICAgICAgICAgICBpbnRlcm5hbAogICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgcmV0dXJucyAoTWFya2V0cGxhY2VBZG1pbkNvbnRyb2xsZXIgX2NvbnRyYWN0KQogIHsKICAgIF9jb250cmFjdCA9IE1hcmtldHBsYWNlQWRtaW5Db250cm9sbGVyKGdldF9jb250cmFjdChDT05UUkFDVF9DT05UUk9MTEVSX01BUktFVFBMQUNFX0FETUlOKSk7CiAgfQoKICBmdW5jdGlvbiBtYXJrZXRwbGFjZV9zdG9yYWdlKCkKICAgICAgICAgICBpbnRlcm5hbAogICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgcmV0dXJucyAoTWFya2V0cGxhY2VTdG9yYWdlIF9jb250cmFjdCkKICB7CiAgICBfY29udHJhY3QgPSBNYXJrZXRwbGFjZVN0b3JhZ2UoZ2V0X2NvbnRyYWN0KENPTlRSQUNUX1NUT1JBR0VfTUFSS0VUUExBQ0UpKTsKICB9CgogIGZ1bmN0aW9uIG1hcmtldHBsYWNlX2NvbnRyb2xsZXIoKQogICAgICAgICAgIGludGVybmFsCiAgICAgICAgICAgY29uc3RhbnQKICAgICAgICAgICByZXR1cm5zIChNYXJrZXRwbGFjZUNvbnRyb2xsZXIgX2NvbnRyYWN0KQogIHsKICAgIF9jb250cmFjdCA9IE1hcmtldHBsYWNlQ29udHJvbGxlcihnZXRfY29udHJhY3QoQ09OVFJBQ1RfQ09OVFJPTExFUl9NQVJLRVRQTEFDRSkpOwogIH0KfQoKLy8vIEB0aXRsZSBEaWdpeCBNYXJrZXRwbGFjZSBJbmZvcm1hdGlvbgovLy8gQGF1dGhvciBEaWdpeCBIb2xkaW5ncyBQdGUgTHRkCi8vLyBAbm90aWNlIFRoaXMgY29udHJhY3QgaXMgdXNlZCB0byByZWFkIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBEaWdpeCdzIE1hcmtldHBsYWNlCmNvbnRyYWN0IE1hcmtldHBsYWNlSW5mb3JtYXRpb24gaXMgTWFya2V0cGxhY2VDb21tb24gewoKICBmdW5jdGlvbiBNYXJrZXRwbGFjZUluZm9ybWF0aW9uKGFkZHJlc3MgX3Jlc29sdmVyKSBwdWJsaWMKICB7CiAgICByZXF1aXJlKGluaXQoQ09OVFJBQ1RfSU5URVJBQ1RJVkVfTUFSS0VUUExBQ0VfSU5GT1JNQVRJT04sIF9yZXNvbHZlcikpOwogIH0KCiAgZnVuY3Rpb24gaWRlbnRpdHlfc3RvcmFnZSgpCiAgICAgICAgICAgaW50ZXJuYWwKICAgICAgICAgICBjb25zdGFudAogICAgICAgICAgIHJldHVybnMgKElkZW50aXR5U3RvcmFnZSBfY29udHJhY3QpCiAgewogICAgX2NvbnRyYWN0ID0gSWRlbnRpdHlTdG9yYWdlKGdldF9jb250cmFjdChDT05UUkFDVF9TVE9SQUdFX0lERU5USVRZKSk7CiAgfQoKICAvLy8gQGRldiBzaG93IHVzZXIncyBjdXJyZW50IG1hcmtldHBsYWNlIGluZm9ybWF0aW9uIGFuZCBjb25maWd1cmF0aW9uLCBhcyB3ZWxsIGFzIHNvbWUgZ2xvYmFsIGNvbmZpZ3VyYXRpb25zCiAgLy8vIEBwYXJhbSBfdXNlciB0aGUgdXNlcidzIGV0aGVyZXVtIGFkZHJlc3MKICAvLy8gQHJldHVybiB7CiAgLy8vICAgIl91c2VyX2RhaWx5X2RneF9saW1pdCI6ICJ0aGUgYW1vdW50IG9mIERHWCB0aGF0IHRoZSB1c2VyIGNhbiBwdXJjaGFzZSBhdCBhbnkgZ2l2ZW4gZGF5IiwKICAvLy8gICAiX3VzZXJfaWRfZXhwaXJhdGlvbiI6ICJpZiBLWUMgYXBwcm92ZWQgdGhpcyB3aWxsIGJlIGEgbm9uLXplcm8gdmFsdWUgYXMgVW5peCB0aW1lc3RhbXAgd2hlbiB0aGUgc3VibWl0dGVkIElEIHdpbGwgZXhwaXJlIiwKICAvLy8gICAiX3VzZXJfdG90YWxfcHVyY2hhc2VkX3RvZGF5IjogIlRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgdGhlIHVzZXIgaGFzIHB1cmNoYXNlZCBpbiB0aGUgbGFzdCAyNCBob3VycyIsCiAgLy8vICAgIl9jb25maWdfbWF4aW11bV9ibG9ja19kcmlmdCI6ICJUaGUgbnVtYmVyIG9mIGV0aGVyZXVtIGJsb2NrcyBmb3Igd2hpY2ggYSBwcmljZWZlZWQgaXMgdmFsaWQgZm9yIgogIC8vLyAgICJfY29uZmlnX21pbmltdW1fcHVyY2hhc2VfZGd4X25nIjogIlRoZSBtaW5pbXVtIGFtb3VudCBvZiBER1ggdGhhdCBoYXMgdG8gYmUgcHVyY2hhc2VkIGluIG9uZSBvcmRlciIsCiAgLy8vICAgIl9jb25maWdfcGF5bWVudF9jb2xsZWN0b3IiOiAiRXRoZXJldW0gYWRkcmVzcyBvZiB0aGUgY29sbGVjdG9yIHdoaWNoIGNvbGxlY3RzIG1hcmtldHBsYWNlIGV0aGVyIHNlbnQgYnkgYnV5ZXJzIHRvIGJ1eSBER1giCiAgLy8vIH0KICBmdW5jdGlvbiBnZXRVc2VySW5mb0FuZENvbmZpZyhhZGRyZXNzIF91c2VyKQogICAgICAgICAgIHB1YmxpYwogICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgcmV0dXJucyAodWludDI1NiBfdXNlcl9kYWlseV9kZ3hfbGltaXQsIHVpbnQyNTYgX3VzZXJfaWRfZXhwaXJhdGlvbiwgdWludDI1NiBfdXNlcl90b3RhbF9wdXJjaGFzZWRfdG9kYXksCiAgICAgICAgICAgICAgICAgICAgdWludDI1NiBfY29uZmlnX2dsb2JhbF9kYWlseV9kZ3hfbmdfbGltaXQsIHVpbnQyNTYgX2NvbmZpZ19tYXhpbXVtX2Jsb2NrX2RyaWZ0LAogICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgX2NvbmZpZ19taW5pbXVtX3B1cmNoYXNlX2RneF9uZywgYWRkcmVzcyBfY29uZmlnX3BheW1lbnRfY29sbGVjdG9yKQogIHsKICAgIChfdXNlcl9kYWlseV9kZ3hfbGltaXQsIF91c2VyX3RvdGFsX3B1cmNoYXNlZF90b2RheSkgPQogICAgICBtYXJrZXRwbGFjZV9zdG9yYWdlKCkucmVhZF91c2VyKF91c2VyKTsKCiAgICAoX3VzZXJfaWRfZXhwaXJhdGlvbiwpID0gaWRlbnRpdHlfc3RvcmFnZSgpLnJlYWRfdXNlcihfdXNlcik7CgogICAgKF9jb25maWdfZ2xvYmFsX2RhaWx5X2RneF9uZ19saW1pdCwgX2NvbmZpZ19taW5pbXVtX3B1cmNoYXNlX2RneF9uZywgX2NvbmZpZ19tYXhpbXVtX2Jsb2NrX2RyaWZ0LCBfY29uZmlnX3BheW1lbnRfY29sbGVjdG9yKSA9CiAgICAgIG1hcmtldHBsYWNlX3N0b3JhZ2UoKS5yZWFkX2NvbmZpZygpOwogIH0KCiAgLy8vIEBkZXYgZ2V0IGdsb2JhbCBtYXJrZXRwbGFjZSBjb25maWd1cmF0aW9uCiAgLy8vIEByZXR1cm4gewogIC8vLyAgICAgIl9nbG9iYWxfZGFpbHlfZGd4X25nX2xpbWl0LCI6ICJ0aGUgZGVmYXVsdCBtYXggYW1vdW50IG9mIERHWCBpbiBuYW5vZ3JhbXMgdGhlIHVzZXIgY2FuIHB1cmNoYXNlIGRhaWx5IiwKICAvLy8gICAgICJfbWluaW11bV9wdXJjaGFzZV9kZ3hfbmciOiAiVGhlIG1pbmltdW0gREdYIG5hbm9ncmFtcyB0aGF0IGNhbiBiZSBwdXJjaGFzZWQiLAogIC8vLyAgICAgIl9tYXhpbXVtX2Jsb2NrX2RyaWZ0IjogIlRoZSBudW1iZXIgb2YgYmxvY2tzIGEgcHJpY2VmZWVkIGlzIHZhbGlkIGZvciIsCiAgLy8vICAgICAiX3BheW1lbnRfY29sbGVjdG9yIjogIlRoZSBFVEggYWRkcmVzcyB3aGVyZSB0aGUgcGF5bWVudCBzaG91bGQgYmUgc2VudCB0byIKICAvLy8gfQogIGZ1bmN0aW9uIGdldENvbmZpZygpCiAgICAgICAgICAgcHVibGljCiAgICAgICAgICAgY29uc3RhbnQKICAgICAgICAgICByZXR1cm5zICh1aW50MjU2IF9nbG9iYWxfZGFpbHlfZGd4X25nX2xpbWl0LCB1aW50MjU2IF9taW5pbXVtX3B1cmNoYXNlX2RneF9uZywgdWludDI1NiBfbWF4aW11bV9ibG9ja19kcmlmdCwgYWRkcmVzcyBfcGF5bWVudF9jb2xsZWN0b3IpCiAgewogICAgIChfZ2xvYmFsX2RhaWx5X2RneF9uZ19saW1pdCwgX21pbmltdW1fcHVyY2hhc2VfZGd4X25nLCBfbWF4aW11bV9ibG9ja19kcmlmdCwgX3BheW1lbnRfY29sbGVjdG9yKSA9CiAgICAgICBtYXJrZXRwbGFjZV9zdG9yYWdlKCkucmVhZF9jb25maWcoKTsKICB9CgogIC8vLyBAZGV2IHNob3cgdGhlIHVzZXIncyBkYWlseSBsaW1pdCBvbiBER1ggcHVyY2hhc2UKICAvLy8gQHBhcmFtIF91c2VyIHRoZSB1c2VyJ3MgZXRoZXJldW0gYWRkcmVzcwogIC8vLyBAcmV0dXJuIHsKICAvLy8gICAiX21heGltdW1fcHVyY2hhc2VfYW1vdW50X25nIjogIlRoZSBhbW91bnQgaW4gREdYIG5hbm9ncmFtcyB0aGF0IHRoZSB1c2VyIGNhbiBwdXJjaGFzZSBkYWlseSIKICAvLy8gfQogIGZ1bmN0aW9uIHVzZXJNYXhpbXVtUHVyY2hhc2VBbW91bnROZyhhZGRyZXNzIF91c2VyKQogICAgICAgICAgIHB1YmxpYwogICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgcmV0dXJucyAodWludDI1NiBfbWF4aW11bV9wdXJjaGFzZV9hbW91bnRfbmcpCiAgewogICAgX21heGltdW1fcHVyY2hhc2VfYW1vdW50X25nID0gbWFya2V0cGxhY2Vfc3RvcmFnZSgpLnJlYWRfdXNlcl9kYWlseV9saW1pdChfdXNlcik7CiAgfQoKICAvLy8gQGRldiBzaG93IGhvdyBtYW55IG5hbm9ncmFtcyBvZiBER1ggaXMgaW4gdGhlIE1hcmtldHBsYWNlJ3MgaW52ZW50b3J5CiAgLy8vIEByZXR1cm4gewogIC8vLyAgICJfYXZhaWxhYmxlX25nIjogIlRoZSBhbW91bnQgaW4gREdYIG5hbm9ncmFtcyBpbiB0aGUgaW52ZW50b3J5IgogIC8vLyB9CiAgZnVuY3Rpb24gYXZhaWxhYmxlRGd4TmcoKQogICAgICAgICAgIHB1YmxpYwogICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgcmV0dXJucyAodWludDI1NiBfYXZhaWxhYmxlX25nKQogIHsKICAgIF9hdmFpbGFibGVfbmcgPSBtYXJrZXRwbGFjZV9zdG9yYWdlKCkucmVhZF9kZ3hfaW52ZW50b3J5X2JhbGFuY2VfbmcoKTsKICB9CgogIC8vLyBAZGV2IHJldHVybiB0aGUgdG90YWwgbnVtYmVyIG9mIHB1cmNoYXNlcyBkb25lIG9uIG1hcmtldHBsYWNlCiAgLy8vIEByZXR1cm4gX3RvdGFsX251bWJlcl9vZl9wdXJjaGFzZXMgdGhlIHRvdGFsIG51bWJlciBvZiBwdXJjaGFzZXMgb24gbWFya2V0cGxhY2UKICBmdW5jdGlvbiByZWFkVG90YWxOdW1iZXJPZlB1cmNoYXNlcygpCiAgICAgICAgICAgcHVibGljCiAgICAgICAgICAgY29uc3RhbnQKICAgICAgICAgICByZXR1cm5zICh1aW50MjU2IF90b3RhbF9udW1iZXJfb2ZfcHVyY2hhc2VzKQogIHsKICAgIF90b3RhbF9udW1iZXJfb2ZfcHVyY2hhc2VzID0gbWFya2V0cGxhY2Vfc3RvcmFnZSgpLnJlYWRfdG90YWxfbnVtYmVyX29mX3B1cmNoYXNlcygpOwogIH0KCiAgLy8vIEBkZXYgcmVhZCB0aGUgdG90YWwgbnVtYmVyIG9mIHB1cmNoYXNlcyBieSBhIHVzZXIKICAvLy8gQHBhcmFtIF91c2VyIEV0aGVyZXVtIGFkZHJlc3Mgb2YgdGhlIHVzZXIKICAvLy8gQHJldHVybiBfdG90YWxfbnVtYmVyX29mX3VzZXJfcHVyY2hhc2VzIHRoZSB0b3RhbCBudW1iZXIgb2YgcHVyY2hhc2VzIG1hZGUgYnkgdGhlIHVzZXIgb24gbWFya2V0cGxhY2UKICBmdW5jdGlvbiByZWFkVG90YWxOdW1iZXJPZlVzZXJQdXJjaGFzZXMoYWRkcmVzcyBfdXNlcikKICAgICAgICAgICBwdWJsaWMKICAgICAgICAgICBjb25zdGFudAogICAgICAgICAgIHJldHVybnMgKHVpbnQyNTYgX3RvdGFsX251bWJlcl9vZl91c2VyX3B1cmNoYXNlcykKICB7CiAgICBfdG90YWxfbnVtYmVyX29mX3VzZXJfcHVyY2hhc2VzID0gbWFya2V0cGxhY2Vfc3RvcmFnZSgpLnJlYWRfdG90YWxfbnVtYmVyX29mX3VzZXJfcHVyY2hhc2VzKF91c2VyKTsKICB9CgogIC8vLyBAZGV2IHJlYWQgdGhlIHB1cmNoYXNlIGRldGFpbHMgYXQgYW4gaW5kZXggZnJvbSBhbGwgcHVyY2hhc2VzCiAgLy8vIEBwYXJhbSBfaW5kZXggdGhlIGluZGV4IG9mIHRoZSBwdXJjaGFzZSBpbiBhbGwgcHVyY2hhc2VzIChpbmRleCBzdGFydHMgZnJvbSAwKQogIC8vLyBAcmV0dXJuIHsKICAvLy8gICAiX3JlY2lwaWVudCI6ICJER1ggd2FzIHB1cmNoYXNlcyB0byB0aGlzIEV0aGVyZXVtIGFkZHJlc3MiLAogIC8vLyAgICJfdGltZXN0YW1wIjogInRoZSB0aW1lIGF0IHdoaWNoIHRoZSBwdXJjaGFzZSB3YXMgbWFkZSIsCiAgLy8vICAgIl9hbW91bnQiOiAidGhlIGFtb3VudCBvZiBER1ggbmFub2dyYW1zIHB1cmNoYXNlZCBpbiB0aGlzIHB1cmNoYXNlIiwKICAvLy8gICAiX3ByaWNlIjogInRoZSBwcmljZSBwYWlkIGJ5IHB1cmNoYXNlciBpbiB3ZWIgcGVyIGRneCBtaWxsaWdyYW0iCiAgLy8vIH0KICBmdW5jdGlvbiByZWFkUHVyY2hhc2VBdEluZGV4KHVpbnQyNTYgX2luZGV4KQogICAgICAgICAgIHB1YmxpYwogICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgcmV0dXJucyAoYWRkcmVzcyBfcmVjaXBpZW50LCB1aW50MjU2IF90aW1lc3RhbXAsIHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBfcHJpY2UpCiAgewogICAgKF9yZWNpcGllbnQsIF90aW1lc3RhbXAsIF9hbW91bnQsIF9wcmljZSkgPSBtYXJrZXRwbGFjZV9zdG9yYWdlKCkucmVhZF9wdXJjaGFzZV9hdF9pbmRleChfaW5kZXgpOwogIH0KCiAgLy8vIEBkZXYgcmVhZCB0aGUgcHVyY2hhc2UgZGV0YWlscyBieSBhIHVzZXIgYXQgYW4gaW5kZXggZnJvbSBhbGwgdGhlIHVzZXIncyBwdXJjaGFzZXMKICAvLy8gQHBhcmFtIF9pbmRleCB0aGUgaW5kZXggb2YgdGhlIHB1cmNoYXNlIGluIGFsbCBwdXJjaGFzZXMgYnkgdGhpcyB1c2VyIChpbmRleCBzdGFydHMgZnJvbSAwKQogIC8vLyBAcmV0dXJuIHsKICAvLy8gICAiX3JlY2lwaWVudCI6ICJER1ggd2FzIHB1cmNoYXNlcyB0byB0aGlzIEV0aGVyZXVtIGFkZHJlc3MiLAogIC8vLyAgICJfdGltZXN0YW1wIjogInRoZSB0aW1lIGF0IHdoaWNoIHRoZSBwdXJjaGFzZSB3YXMgbWFkZSIsCiAgLy8vICAgIl9hbW91bnQiOiAidGhlIGFtb3VudCBvZiBER1ggbmFub2dyYW1zIHB1cmNoYXNlZCBpbiB0aGlzIHB1cmNoYXNlIiwKICAvLy8gICAiX3ByaWNlIjogInRoZSBwcmljZSBwYWlkIGJ5IHB1cmNoYXNlciBpbiB3ZWIgcGVyIGRneCBtaWxsaWdyYW0iCiAgLy8vIH0KICBmdW5jdGlvbiByZWFkVXNlclB1cmNoYXNlQXRJbmRleChhZGRyZXNzIF91c2VyLCB1aW50MjU2IF9pbmRleCkKICAgICAgICAgICBwdWJsaWMKICAgICAgICAgICBjb25zdGFudAogICAgICAgICAgIHJldHVybnMgKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfdGltZXN0YW1wLCB1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgX3ByaWNlKQogIHsKICAgIChfcmVjaXBpZW50LCBfdGltZXN0YW1wLCBfYW1vdW50LCBfcHJpY2UpID0gbWFya2V0cGxhY2Vfc3RvcmFnZSgpLnJlYWRfdXNlcl9wdXJjaGFzZV9hdF9pbmRleChfdXNlciwgX2luZGV4KTsKICB9CgogIC8vLyBAZGV2IHJlYWQgdGhlIHRvdGFsIGFtb3VudCBvZiBER1ggcHVyY2hhc2VkIHRvZGF5CiAgLy8vIEByZXR1cm4gX3RvdGFsX3B1cmNoYXNlZF90b2RheSB0aGUgdG90YWwgYW1vdW50IG9mIERHWCBwdXJjaGFzZWQgdG9kYXkgYXQgbWFya2V0cGxhY2UKICBmdW5jdGlvbiByZWFkR2xvYmFsUHVyY2hhc2VkVG9kYXkoKQogICAgICAgICAgIHB1YmxpYwogICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgcmV0dXJucyAodWludDI1NiBfdG90YWxfcHVyY2hhc2VkX3RvZGF5KQogIHsKICAgIF90b3RhbF9wdXJjaGFzZWRfdG9kYXkgPSBtYXJrZXRwbGFjZV9zdG9yYWdlKCkucmVhZF90b3RhbF9nbG9iYWxfcHVyY2hhc2VkX3RvZGF5KCk7CiAgfQoKICAvLy8gQGRldiByZWFkIHRoZSBhbW91bnQgb2YgREdYIHB1cmNoYXNlZCB0b2RheSBieSBhIHVzZXIKICAvLy8gQHBhcmFtIF91c2VyIEV0aGVyZXVtIGFkZHJlc3Mgb2YgdGhlIHVzZXIKICAvLy8gQHJldHVybiBfdXNlcl90b3RhbF9wdXJjaGFzZWRfdG9kYXkgdGhlIHRvdGFsIGFtb3VudCBvZiBER1ggcHVyY2hhc2VkIHRvZGF5IGJ5IGEgdXNlcgogIGZ1bmN0aW9uIHJlYWRVc2VyUHVyY2hhc2VkVG9kYXkoYWRkcmVzcyBfdXNlcikKICAgICAgICAgICBwdWJsaWMKICAgICAgICAgICBjb25zdGFudAogICAgICAgICAgIHJldHVybnMgKHVpbnQyNTYgX3VzZXJfdG90YWxfcHVyY2hhc2VkX3RvZGF5KQogIHsKICAgIF91c2VyX3RvdGFsX3B1cmNoYXNlZF90b2RheSA9IG1hcmtldHBsYWNlX3N0b3JhZ2UoKS5yZWFkX3RvdGFsX3B1cmNoYXNlZF90b2RheShfdXNlcik7CiAgfQoKICAvLy8gQGRldiByZWFkIHRoZSBtYXJrZXRwbGFjZSBjb25maWd1cmF0aW9ucwogIC8vLyBAcmV0dXJuIHsKICAvLy8gICAiX2dsb2JhbF9kZWZhdWx0X3VzZXJfZGFpbHlfbGltaXQsIjogIkRlZmF1bHQgbWF4aW11bSBudW1iZXIgb2YgREdYIG5hbm9ncmFtcyB0aGF0IGEgdXNlciBjYW4gcHVyY2hhc2UgcGVyIGRheSIsCiAgLy8vICAgIl9taW5pbXVtX3B1cmNoYXNlX2RneF9uZyI6ICJtaW5pbXVtIG51bWJlciBvZiBER1ggbmFub2dyYW1zIHRoYXQgaGFzIHRvIGJlIHB1cmNoYXNlZCBpbiBhIHNpbmdsZSBwdXJjaGFzZSIsCiAgLy8vICAgIl9tYXhpbXVtX2Jsb2NrX2RyaWZ0IjogInRoZSBudW1iZXIgb2YgZXRoZXJldW0gYmxvY2tzIGZvciB3aGljaCB0aGUgcHJpY2VmZWVkIGlzIHZhbGlkIGZvciIsCiAgLy8vICAgIl9wYXltZW50X2NvbGxlY3RvciI6ICJ0aGUgZXRoZXJldW0gYWRkcmVzcyB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgZXRoIHBhaWQgZm9yIGEgcHVyY2hhc2UiLAogIC8vLyAgICJfbWF4X2RneF9hdmFpbGFibGVfZGFpbHkiOiAibWF4aW11bSBudW1iZXIgb2YgREdYIG5hbm9ncmFtcyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHB1cmNoYXNlIG9uIG1hcmtldHBsYWNlIGluIGEgZGF5IiwKICAvLy8gICAiX3ByaWNlX2Zsb29yX3dlaV9wZXJfZGd4X21nIjogInRoZSBwcmljZSBmbG9vciwgbWluaW11bSBwcmljZSwgYmVsb3cgd2hpY2ggYSBwdXJjaGFzZSBpcyBpbnZhbGlkIgogIGZ1bmN0aW9uIHJlYWRNYXJrZXRwbGFjZUNvbmZpZ3MoKQogICAgICAgICAgIHB1YmxpYwogICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgcmV0dXJucyAodWludDI1NiBfZ2xvYmFsX2RlZmF1bHRfdXNlcl9kYWlseV9saW1pdCwKICAgICAgICAgICAgICAgICAgICB1aW50MjU2IF9taW5pbXVtX3B1cmNoYXNlX2RneF9uZywKICAgICAgICAgICAgICAgICAgICB1aW50MjU2IF9tYXhpbXVtX2Jsb2NrX2RyaWZ0LAogICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgX3BheW1lbnRfY29sbGVjdG9yLAogICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgX21heF9kZ3hfYXZhaWxhYmxlX2RhaWx5LAogICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgX3ByaWNlX2Zsb29yX3dlaV9wZXJfZGd4X21nKQogIHsKICAgIChfZ2xvYmFsX2RlZmF1bHRfdXNlcl9kYWlseV9saW1pdCwgX21pbmltdW1fcHVyY2hhc2VfZGd4X25nLCBfbWF4aW11bV9ibG9ja19kcmlmdCwgX3BheW1lbnRfY29sbGVjdG9yKQogICAgICA9IG1hcmtldHBsYWNlX3N0b3JhZ2UoKS5yZWFkX2NvbmZpZygpOwogICAgX21heF9kZ3hfYXZhaWxhYmxlX2RhaWx5ID0gbWFya2V0cGxhY2Vfc3RvcmFnZSgpLnJlYWRfbWF4X2RneF9hdmFpbGFibGVfZGFpbHkoKTsKICAgIF9wcmljZV9mbG9vcl93ZWlfcGVyX2RneF9tZyA9IG1hcmtldHBsYWNlX3N0b3JhZ2UoKS5yZWFkX3ByaWNlX2Zsb29yKCk7CiAgfQoKfQ=='.
	

]
