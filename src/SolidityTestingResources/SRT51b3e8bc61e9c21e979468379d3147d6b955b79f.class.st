Class {
	#name : #SRT51b3e8bc61e9c21e979468379d3147d6b955b79f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT51b3e8bc61e9c21e979468379d3147d6b955b79f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLgogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICB1aW50MjU2IHRvdGFsU3VwcGx5XzsKCiAgLyoqCiAgKiBAZGV2IHRvdGFsIG51bWJlciBvZiB0b2tlbnMgaW4gZXhpc3RlbmNlCiAgKi8KICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiB0b3RhbFN1cHBseV87CiAgfQoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBCdXJuYWJsZSBUb2tlbgogKiBAZGV2IFRva2VuIHRoYXQgY2FuIGJlIGlycmV2ZXJzaWJseSBidXJuZWQgKGRlc3Ryb3llZCkuCiAqLwpjb250cmFjdCBCdXJuYWJsZVRva2VuIGlzIEJhc2ljVG9rZW4gewoKICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAvKioKICAgKiBAZGV2IEJ1cm5zIGEgc3BlY2lmaWMgYW1vdW50IG9mIHRva2Vucy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgYnVybmVkLgogICAqLwogIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHB1YmxpYyB7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CiAgICAvLyBubyBuZWVkIHRvIHJlcXVpcmUgdmFsdWUgPD0gdG90YWxTdXBwbHksIHNpbmNlIHRoYXQgd291bGQgaW1wbHkgdGhlCiAgICAvLyBzZW5kZXIncyBiYWxhbmNlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgdG90YWxTdXBwbHksIHdoaWNoICpzaG91bGQqIGJlIGFuIGFzc2VydGlvbiBmYWlsdXJlCgogICAgYWRkcmVzcyBidXJuZXIgPSBtc2cuc2VuZGVyOwogICAgYmFsYW5jZXNbYnVybmVyXSA9IGJhbGFuY2VzW2J1cm5lcl0uc3ViKF92YWx1ZSk7CiAgICB0b3RhbFN1cHBseV8gPSB0b3RhbFN1cHBseV8uc3ViKF92YWx1ZSk7CiAgICBCdXJuKGJ1cm5lciwgX3ZhbHVlKTsKICB9Cn0KCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9Cgpjb250cmFjdCBVQk9DT0lOIGlzIEJ1cm5hYmxlVG9rZW4sIE93bmFibGUKewogICAgLy8gRVJDMjAgdG9rZW4gcGFyYW1ldGVycwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlVCT0NPSU4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiVUJPIjsKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgCiAgICAKICAgIC8vIENyb3dkc2FsZSBiYXNlIHByaWNlIChiZWZvcmUgYm9udXNlcyk6IDAuMDAxIEVUSCBwZXIgVUJPCiAgICB1aW50MjU2IHByaXZhdGUgVUJPX3Blcl9FVEggPSAxMDAwICogKHVpbnQyNTYoMTApICoqIGRlY2ltYWxzKTsKICAgIAogICAgLy8gMTQgZGF5cyB3aXRoIDQzJSBib251cyBmb3IgcHVyY2hhc2VzIG9mIGF0IGxlYXN0IDEwMDAgVUJPICgxOSBmZWJydWFyeSAtIDUgbWFyY2gpCiAgICB1aW50MjU2IHByaXZhdGUgY29uc3RhbnQgcHJlX0lDT19kdXJhdGlvbiA9IDE1IGRheXM7CiAgICB1aW50MjU2IHByaXZhdGUgY29uc3RhbnQgcHJlX0lDT19ib251c19wZXJjZW50YWdlID0gNDM7CiAgICB1aW50MjU2IHByaXZhdGUgY29uc3RhbnQgcHJlX0lDT19ib251c19taW5pbXVtX3B1cmNoYXNlZF9VQk8gPSAxMDAwICogKHVpbnQyNTYoMTApICoqIGRlY2ltYWxzKTsKICAgIAogICAgLy8gMjEgZGF5cyB3aXRoIDE1JSBib251cyAoNiBtYXJjaCAtIDI2IG1hcmNoKQogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IGZpcnN0X2JvbnVzX3NhbGVfZHVyYXRpb24gPSAyMSBkYXlzOwogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IGZpcnN0X2JvbnVzX3NhbGVfYm9udXMgPSAxNTsKICAgIAogICAgLy8gMTUgZGF5cyB3aXRoIDEwJSBib251cyAoMjcgbWFyY2ggLSAxMCBhcHJpbCkKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBzZWNvbmRfYm9udXNfc2FsZV9kdXJhdGlvbiA9IDE1IGRheXM7CiAgICB1aW50MjU2IHByaXZhdGUgY29uc3RhbnQgc2Vjb25kX2JvbnVzX3NhbGVfYm9udXMgPSAxMDsKICAgIAogICAgLy8gOCBkYXlzIHdpdGggNiUgYm9udXMgKDExIGFwcmlsIC0gMTggYXByaWwpCiAgICB1aW50MjU2IHByaXZhdGUgY29uc3RhbnQgdGhpcmRfYm9udXNfc2FsZV9kdXJhdGlvbiA9IDggZGF5czsKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCB0aGlyZF9ib251c19zYWxlX2JvbnVzID0gNjsKICAgIAogICAgLy8gNyBkYXlzIHdpdGggMyUgYm9udXMgKDE5IGFwcmlsIC0gMjUgYXByaWwpCiAgICB1aW50MjU2IHByaXZhdGUgY29uc3RhbnQgZm91cnRoX2JvbnVzX3NhbGVfZHVyYXRpb24gPSA3IGRheXM7CiAgICB1aW50MjU2IHByaXZhdGUgY29uc3RhbnQgZm91cnRoX2JvbnVzX3NhbGVfYm9udXMgPSAzOwogICAgCiAgICAvLyA1IGRheXMgd2l0aCBubyBib251cyAoMjYgYXByaWwgLSAzMCBhcHJpbCkKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBmaW5hbF9zYWxlX2R1cmF0aW9uID0gNSBkYXlzOwogICAgCiAgICAKICAgIC8vIFRoZSB0YXJnZXQgb2YgdGhlIGNyb3dkc2FsZSBpcyAzNTAwMDAwIFVCSUNPSU5TLgogICAgLy8gSWYgdGhlIGNyb3dkc2FsZSBoYXMgZmluaXNoZWQsIGFuZCB0aGUgdGFyZ2V0IGhhcyBub3QgYmVlbiByZWFjaGVkLAogICAgLy8gYWxsIGNyb3dkc2FsZSBwYXJ0aWNpcGFudHMgd2lsbCBiZSBhYmxlIHRvIGNhbGwgcmVmdW5kKCkgYW5kIGdldCB0aGVpcgogICAgLy8gRVRIIGJhY2suIFRoZSByZWZ1bmRNYW55KCkgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gcmVmdW5kIG11bHRpcGxlCiAgICAvLyBwYXJ0aWNpcGFudHMgaW4gb25lIHRyYW5zYWN0aW9uLgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgY3Jvd2RzYWxlVGFyZ2V0VUJPID0gMzUwMDAwMCAqICh1aW50MjU2KDEwKSAqKiBkZWNpbWFscyk7CiAgICAKICAgIAogICAgLy8gVmFyaWFibGVzIHRoYXQgcmVtZW1iZXIgdGhlIHN0YXJ0IHRpbWVzIG9mIHRoZSB2YXJpb3VzIGNyb3dkc2FsZSBwZXJpb2RzCiAgICB1aW50MjU2IHByaXZhdGUgcHJlX0lDT19zdGFydF90aW1lc3RhbXA7CiAgICB1aW50MjU2IHByaXZhdGUgZmlyc3RfYm9udXNfc2FsZV9zdGFydF90aW1lc3RhbXA7CiAgICB1aW50MjU2IHByaXZhdGUgc2Vjb25kX2JvbnVzX3NhbGVfc3RhcnRfdGltZXN0YW1wOwogICAgdWludDI1NiBwcml2YXRlIHRoaXJkX2JvbnVzX3NhbGVfc3RhcnRfdGltZXN0YW1wOwogICAgdWludDI1NiBwcml2YXRlIGZvdXJ0aF9ib251c19zYWxlX3N0YXJ0X3RpbWVzdGFtcDsKICAgIHVpbnQyNTYgcHJpdmF0ZSBmaW5hbF9zYWxlX3N0YXJ0X3RpbWVzdGFtcDsKICAgIHVpbnQyNTYgcHJpdmF0ZSBjcm93ZHNhbGVfZW5kX3RpbWVzdGFtcDsKICAgIAogICAgCiAgICAvLyBQdWJsaWNseSBhY2Nlc3NpYmxlIHRyYWNrZXJzIHRoYXQgaW5kaWNhdGUgaG93IG11Y2ggVUJPIGlzIGxlZnQKICAgIC8vIGluIGVhY2ggY2F0ZWdvcnkKICAgIHVpbnQyNTYgcHVibGljIGNyb3dkc2FsZUFtb3VudExlZnQ7CiAgICB1aW50MjU2IHB1YmxpYyBmb3VuZGVyc0Ftb3VudExlZnQ7CiAgICB1aW50MjU2IHB1YmxpYyBlYXJseUJhY2tlcnNBbW91bnRMZWZ0OwogICAgdWludDI1NiBwdWJsaWMgdGVhbUFtb3VudExlZnQ7CiAgICB1aW50MjU2IHB1YmxpYyBib3VudHlBbW91bnRMZWZ0OwogICAgdWludDI1NiBwdWJsaWMgcmVzZXJ2ZWRGdW5kTGVmdDsKICAgIAogICAgLy8gS2VlcCB0cmFjayBvZiBhbGwgcGFydGljaXBhbnRzLCBob3cgbXVjaCB0aGV5IGJvdWdodCBhbmQgaG93IG11Y2ggdGhleSBzcGVudC4KICAgIGFkZHJlc3NbXSBwdWJsaWMgYWxsUGFydGljaXBhbnRzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBwYXJ0aWNpcGFudFRvRXRoZXJTcGVudDsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgcGFydGljaXBhbnRUb1VCT2JvdWdodDsKICAgIAogICAgCiAgICBmdW5jdGlvbiBjcm93ZHNhbGVUYXJnZXRSZWFjaGVkKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gYW1vdW50T2ZVQk9zb2xkKCkgPj0gY3Jvd2RzYWxlVGFyZ2V0VUJPOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjcm93ZHNhbGVTdGFydGVkKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gcHJlX0lDT19zdGFydF90aW1lc3RhbXAgPiAwICYmIG5vdyA+PSBwcmVfSUNPX3N0YXJ0X3RpbWVzdGFtcDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY3Jvd2RzYWxlRmluaXNoZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiBwcmVfSUNPX3N0YXJ0X3RpbWVzdGFtcCA+IDAgJiYgbm93ID49IGNyb3dkc2FsZV9lbmRfdGltZXN0YW1wOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhbW91bnRPZlBhcnRpY2lwYW50cygpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICByZXR1cm4gYWxsUGFydGljaXBhbnRzLmxlbmd0aDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYW1vdW50T2ZVQk9zb2xkKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICByZXR1cm4gdG90YWxTdXBwbHlfICogNzAgLyAxMDAgLSBjcm93ZHNhbGVBbW91bnRMZWZ0OwogICAgfQogICAgCiAgICAvLyBJZiB0aGUgY3Jvd2RzYWxlIHRhcmdldCBoYXMgbm90IGJlZW4gcmVhY2hlZCwgb3IgdGhlIGNyb3dkc2FsZSBoYXMgbm90IGZpbmlzaGVkLAogICAgLy8gZG9uJ3QgYWxsb3cgdGhlIHRyYW5zZmVyIG9mIHRva2VucyBwdXJjaGFzZWQgaW4gdGhlIGNyb3dkc2FsZS4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKQogICAgewogICAgICAgIGlmICghY3Jvd2RzYWxlVGFyZ2V0UmVhY2hlZCgpIHx8ICFjcm93ZHNhbGVGaW5pc2hlZCgpKQogICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZShiYWxhbmNlc1ttc2cuc2VuZGVyXSAtIHBhcnRpY2lwYW50VG9VQk9ib3VnaHRbbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF9hbW91bnQpOwogICAgfQogICAgCiAgICAKICAgIC8vIENvbnN0cnVjdG9yIGZ1bmN0aW9uCiAgICBmdW5jdGlvbiBVQk9DT0lOKCkgcHVibGljCiAgICB7CiAgICAgICAgdG90YWxTdXBwbHlfID0gMzAwMDAwMDAwICogKHVpbnQyNTYoMTApICoqIGRlY2ltYWxzKTsKICAgICAgICBiYWxhbmNlc1t0aGlzXSA9IHRvdGFsU3VwcGx5XzsKICAgICAgICBUcmFuc2ZlcigweDAsIHRoaXMsIHRvdGFsU3VwcGx5Xyk7CiAgICAgICAgCiAgICAgICAgY3Jvd2RzYWxlQW1vdW50TGVmdCA9IHRvdGFsU3VwcGx5XyAqIDcwIC8gMTAwOyAgIC8vIDcwJQogICAgICAgIGZvdW5kZXJzQW1vdW50TGVmdCA9IHRvdGFsU3VwcGx5XyAqIDEwIC8gMTAwOyAgICAvLyAxMCUKICAgICAgICBlYXJseUJhY2tlcnNBbW91bnRMZWZ0ID0gdG90YWxTdXBwbHlfICogNSAvIDEwMDsgLy8gNSUKICAgICAgICB0ZWFtQW1vdW50TGVmdCA9IHRvdGFsU3VwcGx5XyAqIDUgLyAxMDA7ICAgICAgICAgLy8gNSUKICAgICAgICBib3VudHlBbW91bnRMZWZ0ID0gdG90YWxTdXBwbHlfICogNSAvIDEwMDsgICAgICAgLy8gNSUKICAgICAgICByZXNlcnZlZEZ1bmRMZWZ0ID0gdG90YWxTdXBwbHlfICogNSAvIDEwMDsgICAgICAgLy8gNSUKICAgICAgICAKICAgICAgICBzZXRQcmVJQ09TdGFydFRpbWUoMTUxODk5ODQwMCk7IC8vIFRoaXMgdGltc3RhbXAgaW5kaWNhdGVzIDIwMTgtMDItMTkgMDA6MDAgVVRDCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFByZUlDT1N0YXJ0VGltZSh1aW50MjU2IF90aW1lc3RhbXApIHB1YmxpYyBvbmx5T3duZXIKICAgIHsKICAgICAgICAvLyBJZiB0aGUgY3Jvd2RzYWxlIGhhcyBhbHJlYWR5IHN0YXJ0ZWQsIGRvbid0IGFsbG93IHJlLXNjaGVkdWxpbmcgaXQuCiAgICAgICAgcmVxdWlyZSghY3Jvd2RzYWxlU3RhcnRlZCgpKTsKICAgICAgICAKICAgICAgICBwcmVfSUNPX3N0YXJ0X3RpbWVzdGFtcCA9IF90aW1lc3RhbXA7CiAgICAgICAgZmlyc3RfYm9udXNfc2FsZV9zdGFydF90aW1lc3RhbXAgPSBwcmVfSUNPX3N0YXJ0X3RpbWVzdGFtcCArIHByZV9JQ09fZHVyYXRpb247CiAgICAgICAgc2Vjb25kX2JvbnVzX3NhbGVfc3RhcnRfdGltZXN0YW1wID0gZmlyc3RfYm9udXNfc2FsZV9zdGFydF90aW1lc3RhbXAgKyBmaXJzdF9ib251c19zYWxlX2R1cmF0aW9uOwogICAgICAgIHRoaXJkX2JvbnVzX3NhbGVfc3RhcnRfdGltZXN0YW1wID0gc2Vjb25kX2JvbnVzX3NhbGVfc3RhcnRfdGltZXN0YW1wICsgc2Vjb25kX2JvbnVzX3NhbGVfZHVyYXRpb247CiAgICAgICAgZm91cnRoX2JvbnVzX3NhbGVfc3RhcnRfdGltZXN0YW1wID0gdGhpcmRfYm9udXNfc2FsZV9zdGFydF90aW1lc3RhbXAgKyB0aGlyZF9ib251c19zYWxlX2R1cmF0aW9uOwogICAgICAgIGZpbmFsX3NhbGVfc3RhcnRfdGltZXN0YW1wID0gZm91cnRoX2JvbnVzX3NhbGVfc3RhcnRfdGltZXN0YW1wICsgZm91cnRoX2JvbnVzX3NhbGVfZHVyYXRpb247CiAgICAgICAgY3Jvd2RzYWxlX2VuZF90aW1lc3RhbXAgPSBmaW5hbF9zYWxlX3N0YXJ0X3RpbWVzdGFtcCArIGZpbmFsX3NhbGVfZHVyYXRpb247CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHN0YXJ0UHJlSUNPbm93KCkgZXh0ZXJuYWwgb25seU93bmVyCiAgICB7CiAgICAgICAgc2V0UHJlSUNPU3RhcnRUaW1lKG5vdyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGRlc3Ryb3lVbnNvbGRUb2tlbnMoKSBleHRlcm5hbAogICAgewogICAgICAgIHJlcXVpcmUoY3Jvd2RzYWxlU3RhcnRlZCgpICYmIGNyb3dkc2FsZUZpbmlzaGVkKCkpOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgYW1vdW50VG9CdXJuID0gY3Jvd2RzYWxlQW1vdW50TGVmdDsKICAgICAgICBjcm93ZHNhbGVBbW91bnRMZWZ0ID0gMDsKICAgICAgICB0aGlzLmJ1cm4oYW1vdW50VG9CdXJuKTsKICAgIH0KICAgIAogICAgLy8gSWYgc29tZW9uZSBzZW5kcyBFVEggdG8gdGhlIGNvbnRyYWN0IGFkZHJlc3MsCiAgICAvLyBhc3N1bWUgdGhhdCB0aGV5IGFyZSB0cnlpbmcgdG8gYnV5IHRva2Vucy4KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgZXh0ZXJuYWwKICAgIHsKICAgICAgICBidXlUb2tlbnMoKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYnV5VG9rZW5zKCkgcGF5YWJsZSBwdWJsaWMKICAgIHsKICAgICAgICB1aW50MjU2IGFtb3VudE9mVUJPcHVyY2hhc2VkID0gbXNnLnZhbHVlICogVUJPX3Blcl9FVEggLyAoMSBldGhlcik7CiAgICAgICAgCiAgICAgICAgLy8gT25seSBhbGxvdyBidXlpbmcgdG9rZW5zIGlmIHRoZSBJQ08gaGFzIHN0YXJ0ZWQsIGFuZCBoYXMgbm90IGZpbmlzaGVkCiAgICAgICAgcmVxdWlyZShjcm93ZHNhbGVTdGFydGVkKCkpOwogICAgICAgIHJlcXVpcmUoIWNyb3dkc2FsZUZpbmlzaGVkKCkpOwogICAgICAgIAogICAgICAgIC8vIElmIHRoZSBwcmUtSUNPIGhhc24ndCBzdGFydGVkIHlldCwgY2FuY2VsIHRoZSB0cmFuc2FjdGlvbgogICAgICAgIGlmIChub3cgPCBwcmVfSUNPX3N0YXJ0X3RpbWVzdGFtcCkKICAgICAgICB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBJZiB3ZSBhcmUgaW4gdGhlIHByZS1JQ08uLi4KICAgICAgICBlbHNlIGlmIChub3cgPj0gcHJlX0lDT19zdGFydF90aW1lc3RhbXAgJiYgbm93IDwgZmlyc3RfYm9udXNfc2FsZV9zdGFydF90aW1lc3RhbXApCiAgICAgICAgewogICAgICAgICAgICAvLyBJZiB0aGV5IHB1cmNoYXNlZCBlbm91Z2ggdG8gYmUgZWxpZ2libGUgZm9yIHRoZSBwcmUtSUNPIGJvbnVzLAogICAgICAgICAgICAvLyB0aGVuIGdpdmUgdGhlbSB0aGUgYm9udXMKICAgICAgICAgICAgaWYgKGFtb3VudE9mVUJPcHVyY2hhc2VkID49IHByZV9JQ09fYm9udXNfbWluaW11bV9wdXJjaGFzZWRfVUJPKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBhbW91bnRPZlVCT3B1cmNoYXNlZCA9IGFtb3VudE9mVUJPcHVyY2hhc2VkICogKDEwMCArIHByZV9JQ09fYm9udXNfcGVyY2VudGFnZSkgLyAxMDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gSWYgd2UgYXJlIGluIHRoZSBmaXJzdCBib251cyBzYWxlLi4uCiAgICAgICAgZWxzZSBpZiAobm93ID49IGZpcnN0X2JvbnVzX3NhbGVfc3RhcnRfdGltZXN0YW1wICYmIG5vdyA8IHNlY29uZF9ib251c19zYWxlX3N0YXJ0X3RpbWVzdGFtcCkKICAgICAgICB7CiAgICAgICAgICAgIGFtb3VudE9mVUJPcHVyY2hhc2VkID0gYW1vdW50T2ZVQk9wdXJjaGFzZWQgKiAoMTAwICsgZmlyc3RfYm9udXNfc2FsZV9ib251cykgLyAxMDA7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIElmIHdlIGFyZSBpbiB0aGUgc2Vjb25kIGJvbnVzIHNhbGUuLi4KICAgICAgICBlbHNlIGlmIChub3cgPj0gc2Vjb25kX2JvbnVzX3NhbGVfc3RhcnRfdGltZXN0YW1wICYmIG5vdyA8IHRoaXJkX2JvbnVzX3NhbGVfc3RhcnRfdGltZXN0YW1wKQogICAgICAgIHsKICAgICAgICAgICAgYW1vdW50T2ZVQk9wdXJjaGFzZWQgPSBhbW91bnRPZlVCT3B1cmNoYXNlZCAqICgxMDAgKyBzZWNvbmRfYm9udXNfc2FsZV9ib251cykgLyAxMDA7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIElmIHdlIGFyZSBpbiB0aGUgdGhpcmQgYm9udXMgc2FsZS4uLgogICAgICAgIGVsc2UgaWYgKG5vdyA+PSB0aGlyZF9ib251c19zYWxlX3N0YXJ0X3RpbWVzdGFtcCAmJiBub3cgPCBmb3VydGhfYm9udXNfc2FsZV9zdGFydF90aW1lc3RhbXApCiAgICAgICAgewogICAgICAgICAgICBhbW91bnRPZlVCT3B1cmNoYXNlZCA9IGFtb3VudE9mVUJPcHVyY2hhc2VkICogKDEwMCArIHRoaXJkX2JvbnVzX3NhbGVfYm9udXMpIC8gMTAwOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBJZiB3ZSBhcmUgaW4gdGhlIGZvdXJ0aCBib251cyBzYWxlLi4uCiAgICAgICAgZWxzZSBpZiAobm93ID49IGZvdXJ0aF9ib251c19zYWxlX3N0YXJ0X3RpbWVzdGFtcCAmJiBub3cgPCBmaW5hbF9zYWxlX3N0YXJ0X3RpbWVzdGFtcCkKICAgICAgICB7CiAgICAgICAgICAgIGFtb3VudE9mVUJPcHVyY2hhc2VkID0gYW1vdW50T2ZVQk9wdXJjaGFzZWQgKiAoMTAwICsgZm91cnRoX2JvbnVzX3NhbGVfYm9udXMpIC8gMTAwOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBJZiB3ZSBhcmUgaW4gdGhlIGZpbmFsIHNhbGUuLi4KICAgICAgICBlbHNlIGlmIChub3cgPj0gZmluYWxfc2FsZV9zdGFydF90aW1lc3RhbXAgJiYgbm93IDwgY3Jvd2RzYWxlX2VuZF90aW1lc3RhbXApCiAgICAgICAgewogICAgICAgICAgICAvLyBObyBib251cwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBJZiB3ZSBhcmUgcGFzc2VkIHRoZSBmaW5hbCBzYWxlLCBjYW5jZWwgdGhlIHRyYW5zYWN0aW9uLgogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGNyb3dkc2FsZSBoYXMgZW5vdWdoIFVCTyBsZWZ0CiAgICAgICAgcmVxdWlyZShhbW91bnRPZlVCT3B1cmNoYXNlZCA8PSBjcm93ZHNhbGVBbW91bnRMZWZ0KTsKICAgICAgICAKICAgICAgICAvLyBSZW1vdmUgdGhlIHRva2VucyBmcm9tIHRoaXMgY29udHJhY3QgYW5kIHRoZSBjcm93ZHNhbGUgdG9rZW5zLAogICAgICAgIC8vIGFkZCB0aGVtIHRvIHRoZSBidXllcgogICAgICAgIGNyb3dkc2FsZUFtb3VudExlZnQgLT0gYW1vdW50T2ZVQk9wdXJjaGFzZWQ7CiAgICAgICAgYmFsYW5jZXNbdGhpc10gLT0gYW1vdW50T2ZVQk9wdXJjaGFzZWQ7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gYW1vdW50T2ZVQk9wdXJjaGFzZWQ7CiAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgYW1vdW50T2ZVQk9wdXJjaGFzZWQpOwogICAgICAgIAogICAgICAgIC8vIFRyYWNrIHN0YXRpc3RpY3MKICAgICAgICBpZiAocGFydGljaXBhbnRUb0V0aGVyU3BlbnRbbXNnLnNlbmRlcl0gPT0gMCkKICAgICAgICB7CiAgICAgICAgICAgIGFsbFBhcnRpY2lwYW50cy5wdXNoKG1zZy5zZW5kZXIpOwogICAgICAgIH0KICAgICAgICBwYXJ0aWNpcGFudFRvVUJPYm91Z2h0W21zZy5zZW5kZXJdICs9IGFtb3VudE9mVUJPcHVyY2hhc2VkOwogICAgICAgIHBhcnRpY2lwYW50VG9FdGhlclNwZW50W21zZy5zZW5kZXJdICs9IG1zZy52YWx1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gcmVmdW5kKCkgZXh0ZXJuYWwKICAgIHsKICAgICAgICAvLyBJZiB0aGUgY3Jvd2RzYWxlIGhhcyBub3Qgc3RhcnRlZCB5ZXQsIGRvbid0IGFsbG93IHJlZnVuZAogICAgICAgIHJlcXVpcmUoY3Jvd2RzYWxlU3RhcnRlZCgpKTsKICAgICAgICAKICAgICAgICAvLyBJZiB0aGUgY3Jvd2RzYWxlIGhhcyBub3QgZmluaXNoZWQgeWV0LCBkb24ndCBhbGxvdyByZWZ1bmQKICAgICAgICByZXF1aXJlKGNyb3dkc2FsZUZpbmlzaGVkKCkpOwogICAgICAgIAogICAgICAgIC8vIElmIHRoZSB0YXJnZXQgd2FzIHJlYWNoZWQsIGRvbid0IGFsbG93IHJlZnVuZAogICAgICAgIHJlcXVpcmUoIWNyb3dkc2FsZVRhcmdldFJlYWNoZWQoKSk7CiAgICAgICAgCiAgICAgICAgX3JlZnVuZFBhcnRpY2lwYW50KG1zZy5zZW5kZXIpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiByZWZ1bmRNYW55KHVpbnQyNTYgX3N0YXJ0SW5kZXgsIHVpbnQyNTYgX2VuZEluZGV4KSBleHRlcm5hbAogICAgewogICAgICAgIC8vIElmIHRoZSBjcm93ZHNhbGUgaGFzIG5vdCBzdGFydGVkIHlldCwgZG9uJ3QgYWxsb3cgcmVmdW5kCiAgICAgICAgcmVxdWlyZShjcm93ZHNhbGVTdGFydGVkKCkpOwogICAgICAgIAogICAgICAgIC8vIElmIHRoZSBjcm93ZHNhbGUgaGFzIG5vdCBmaW5pc2hlZCB5ZXQsIGRvbid0IGFsbG93IHJlZnVuZAogICAgICAgIHJlcXVpcmUoY3Jvd2RzYWxlRmluaXNoZWQoKSk7CiAgICAgICAgCiAgICAgICAgLy8gSWYgdGhlIHRhcmdldCB3YXMgcmVhY2hlZCwgZG9uJ3QgYWxsb3cgcmVmdW5kCiAgICAgICAgcmVxdWlyZSghY3Jvd2RzYWxlVGFyZ2V0UmVhY2hlZCgpKTsKICAgICAgICAKICAgICAgICBmb3IgKHVpbnQyNTYgaT1fc3RhcnRJbmRleDsgaTw9X2VuZEluZGV4ICYmIGk8YWxsUGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKQogICAgICAgIHsKICAgICAgICAgICAgX3JlZnVuZFBhcnRpY2lwYW50KGFsbFBhcnRpY2lwYW50c1tpXSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBfcmVmdW5kUGFydGljaXBhbnQoYWRkcmVzcyBfcGFydGljaXBhbnQpIGludGVybmFsCiAgICB7CiAgICAgICAgaWYgKHBhcnRpY2lwYW50VG9FdGhlclNwZW50W19wYXJ0aWNpcGFudF0gPiAwKQogICAgICAgIHsKICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBVQk8gdGhleSBib3VnaHQgaW50byB0aGUgY3Jvd2RzYWxlIGZ1bmRzCiAgICAgICAgICAgIHVpbnQyNTYgcmVmdW5kVUJPID0gcGFydGljaXBhbnRUb1VCT2JvdWdodFtfcGFydGljaXBhbnRdOwogICAgICAgICAgICBwYXJ0aWNpcGFudFRvVUJPYm91Z2h0W19wYXJ0aWNpcGFudF0gPSAwOwogICAgICAgICAgICBiYWxhbmNlc1tfcGFydGljaXBhbnRdIC09IHJlZnVuZFVCTzsKICAgICAgICAgICAgYmFsYW5jZXNbdGhpc10gKz0gcmVmdW5kVUJPOwogICAgICAgICAgICBjcm93ZHNhbGVBbW91bnRMZWZ0ICs9IHJlZnVuZFVCTzsKICAgICAgICAgICAgVHJhbnNmZXIoX3BhcnRpY2lwYW50LCB0aGlzLCByZWZ1bmRVQk8pOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBFVEggdGhleSBzcGVudCB0byBidXkgdGhlbQogICAgICAgICAgICB1aW50MjU2IHJlZnVuZEVUSCA9IHBhcnRpY2lwYW50VG9FdGhlclNwZW50W19wYXJ0aWNpcGFudF07CiAgICAgICAgICAgIHBhcnRpY2lwYW50VG9FdGhlclNwZW50W19wYXJ0aWNpcGFudF0gPSAwOwogICAgICAgICAgICBfcGFydGljaXBhbnQudHJhbnNmZXIocmVmdW5kRVRIKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGVGb3VuZGVyVG9rZW5zKGFkZHJlc3MgX2ZvdW5kZXJBZGRyZXNzLCB1aW50MjU2IF9hbW91bnQpIGV4dGVybmFsIG9ubHlPd25lcgogICAgewogICAgICAgIHJlcXVpcmUoX2Ftb3VudCA8PSBmb3VuZGVyc0Ftb3VudExlZnQpOwogICAgICAgIGZvdW5kZXJzQW1vdW50TGVmdCAtPSBfYW1vdW50OwogICAgICAgIHRoaXMudHJhbnNmZXIoX2ZvdW5kZXJBZGRyZXNzLCBfYW1vdW50KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZGlzdHJpYnV0ZUVhcmx5QmFja2VyVG9rZW5zKGFkZHJlc3MgX2Vhcmx5QmFja2VyQWRkcmVzcywgdWludDI1NiBfYW1vdW50KSBleHRlcm5hbCBvbmx5T3duZXIKICAgIHsKICAgICAgICByZXF1aXJlKF9hbW91bnQgPD0gZWFybHlCYWNrZXJzQW1vdW50TGVmdCk7CiAgICAgICAgZWFybHlCYWNrZXJzQW1vdW50TGVmdCAtPSBfYW1vdW50OwogICAgICAgIHRoaXMudHJhbnNmZXIoX2Vhcmx5QmFja2VyQWRkcmVzcywgX2Ftb3VudCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGVUZWFtVG9rZW5zKGFkZHJlc3MgX3RlYW1NZW1iZXJBZGRyZXNzLCB1aW50MjU2IF9hbW91bnQpIGV4dGVybmFsIG9ubHlPd25lcgogICAgewogICAgICAgIHJlcXVpcmUoX2Ftb3VudCA8PSB0ZWFtQW1vdW50TGVmdCk7CiAgICAgICAgdGVhbUFtb3VudExlZnQgLT0gX2Ftb3VudDsKICAgICAgICB0aGlzLnRyYW5zZmVyKF90ZWFtTWVtYmVyQWRkcmVzcywgX2Ftb3VudCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGVCb3VudHlUb2tlbnMoYWRkcmVzcyBfYm91bnR5UmVjZWl2ZXJBZGRyZXNzLCB1aW50MjU2IF9hbW91bnQpIGV4dGVybmFsIG9ubHlPd25lcgogICAgewogICAgICAgIHJlcXVpcmUoX2Ftb3VudCA8PSBib3VudHlBbW91bnRMZWZ0KTsKICAgICAgICBib3VudHlBbW91bnRMZWZ0IC09IF9hbW91bnQ7CiAgICAgICAgdGhpcy50cmFuc2ZlcihfYm91bnR5UmVjZWl2ZXJBZGRyZXNzLCBfYW1vdW50KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZGlzdHJpYnV0ZVJlc2VydmVkVG9rZW5zKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIGV4dGVybmFsIG9ubHlPd25lcgogICAgewogICAgICAgIHJlcXVpcmUoX2Ftb3VudCA8PSByZXNlcnZlZEZ1bmRMZWZ0KTsKICAgICAgICByZXNlcnZlZEZ1bmRMZWZ0IC09IF9hbW91bnQ7CiAgICAgICAgdGhpcy50cmFuc2ZlcihfdG8sIF9hbW91bnQpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBkaXN0cmlidXRlQ3Jvd2RzYWxlVG9rZW5zKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIGV4dGVybmFsIG9ubHlPd25lcgogICAgewogICAgICAgIHJlcXVpcmUoX2Ftb3VudCA8PSBjcm93ZHNhbGVBbW91bnRMZWZ0KTsKICAgICAgICBjcm93ZHNhbGVBbW91bnRMZWZ0IC09IF9hbW91bnQ7CiAgICAgICAgdGhpcy50cmFuc2ZlcihfdG8sIF9hbW91bnQpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBvd25lcldpdGhkcmF3RVRIKCkgZXh0ZXJuYWwgb25seU93bmVyCiAgICB7CiAgICAgICAgLy8gT25seSBhbGxvdyB0aGUgb3duZXIgdG8gd2l0aGRyYXcgaWYgdGhlIGNyb3dkc2FsZSB0YXJnZXQgaGFzIGJlZW4gcmVhY2hlZAogICAgICAgIHJlcXVpcmUoY3Jvd2RzYWxlVGFyZ2V0UmVhY2hlZCgpKTsKICAgICAgICAKICAgICAgICBvd25lci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfQp9'.
	

]
