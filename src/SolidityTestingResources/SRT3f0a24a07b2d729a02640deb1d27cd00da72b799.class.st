Class {
	#name : #SRT3f0a24a07b2d729a02640deb1d27cd00da72b799,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3f0a24a07b2d729a02640deb1d27cd00da72b799 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBaaXBwZXJXaXRoZHJhd2FsUmlnaHQKewogICAgYWRkcmVzcyByZWFsemlwcGVyOwoKICAgIGZ1bmN0aW9uIFppcHBlcldpdGhkcmF3YWxSaWdodChhZGRyZXNzIF9yZWFsemlwcGVyKSBwdWJsaWMKICAgIHsKICAgICAgICByZWFsemlwcGVyID0gX3JlYWx6aXBwZXI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KE11bHRpU2lnV2FsbGV0IF93YWxsZXQsIHVpbnQgX3ZhbHVlKSBwdWJsaWMKICAgIHsKICAgICAgICByZXF1aXJlIChfd2FsbGV0LmlzT3duZXIobXNnLnNlbmRlcikpOwogICAgICAgIHJlcXVpcmUgKF93YWxsZXQuaXNPd25lcih0aGlzKSk7CiAgICAgICAgCiAgICAgICAgX3dhbGxldC5zdWJtaXRUcmFuc2FjdGlvbihtc2cuc2VuZGVyLCBfdmFsdWUsICIiKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VSZWFsWmlwcGVyKGFkZHJlc3MgX25ld1JlYWxaaXBwZXIpIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSByZWFsemlwcGVyKTsKICAgICAgICByZWFsemlwcGVyID0gX25ld1JlYWxaaXBwZXI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHN1Ym1pdFRyYW5zYWN0aW9uKE11bHRpU2lnV2FsbGV0IF93YWxsZXQsIGFkZHJlc3MgX2Rlc3RpbmF0aW9uLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHB1YmxpYyByZXR1cm5zICh1aW50IHRyYW5zYWN0aW9uSWQpCiAgICB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHJlYWx6aXBwZXIpOwogICAgICAgIHJldHVybiBfd2FsbGV0LnN1Ym1pdFRyYW5zYWN0aW9uKF9kZXN0aW5hdGlvbiwgX3ZhbHVlLCBfZGF0YSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNvbmZpcm1UcmFuc2FjdGlvbihNdWx0aVNpZ1dhbGxldCBfd2FsbGV0LCB1aW50IHRyYW5zYWN0aW9uSWQpIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSByZWFsemlwcGVyKTsKICAgICAgICBfd2FsbGV0LmNvbmZpcm1UcmFuc2FjdGlvbih0cmFuc2FjdGlvbklkKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gcmV2b2tlQ29uZmlybWF0aW9uKE11bHRpU2lnV2FsbGV0IF93YWxsZXQsIHVpbnQgdHJhbnNhY3Rpb25JZCkgcHVibGljCiAgICB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHJlYWx6aXBwZXIpOwogICAgICAgIF93YWxsZXQucmV2b2tlQ29uZmlybWF0aW9uKHRyYW5zYWN0aW9uSWQpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBleGVjdXRlVHJhbnNhY3Rpb24oTXVsdGlTaWdXYWxsZXQgX3dhbGxldCwgdWludCB0cmFuc2FjdGlvbklkKSBwdWJsaWMKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gcmVhbHppcHBlcik7CiAgICAgICAgX3dhbGxldC5jb25maXJtVHJhbnNhY3Rpb24odHJhbnNhY3Rpb25JZCk7CiAgICB9Cn0KCmNvbnRyYWN0IFppcHBlck11bHRpc2lnRmFjdG9yeQp7CiAgICBhZGRyZXNzIHppcHBlcjsKICAgIAogICAgZnVuY3Rpb24gWmlwcGVyTXVsdGlzaWdGYWN0b3J5KGFkZHJlc3MgX3ppcHBlcikgcHVibGljCiAgICB7CiAgICAgICAgemlwcGVyID0gX3ppcHBlcjsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVNdWx0aXNpZygpIHB1YmxpYyByZXR1cm5zIChhZGRyZXNzIF9tdWx0aXNpZykKICAgIHsKICAgICAgICBhZGRyZXNzW10gbWVtb3J5IGFkZHlzID0gbmV3IGFkZHJlc3NbXSgyKTsKICAgICAgICBhZGR5c1swXSA9IHppcHBlcjsKICAgICAgICBhZGR5c1sxXSA9IG1zZy5zZW5kZXI7CiAgICAgICAgCiAgICAgICAgTXVsdGlTaWdXYWxsZXQgYSA9IG5ldyBNdWx0aVNpZ1dhbGxldChhZGR5cywgMik7CiAgICAgICAgCiAgICAgICAgTXVsdGlzaWdDcmVhdGVkKGFkZHJlc3MoYSksIG1zZy5zZW5kZXIsIHppcHBlcik7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIGFkZHJlc3MoYSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZVppcHBlcihhZGRyZXNzIF9uZXdaaXBwZXIpIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB6aXBwZXIpOwogICAgICAgIHppcHBlciA9IF9uZXdaaXBwZXI7CiAgICB9CgogICAgZXZlbnQgTXVsdGlzaWdDcmVhdGVkKGFkZHJlc3MgX211bHRpc2lnLCBhZGRyZXNzIGluZGV4ZWQgX3NlbmRlciwgYWRkcmVzcyBpbmRleGVkIF96aXBwZXIpOwp9CgoKICAgIC8vIGI3ZjAxYWY4YmQ4ODI1MDFmNjgwMWViMWVlYThiMjJhYTJhNDk3OWUgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZ25vc2lzL011bHRpU2lnV2FsbGV0L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9NdWx0aVNpZ1dhbGxldC5zb2wKICAgIAogICAgLy8vIEB0aXRsZSBNdWx0aXNpZ25hdHVyZSB3YWxsZXQgLSBBbGxvd3MgbXVsdGlwbGUgcGFydGllcyB0byBhZ3JlZSBvbiB0cmFuc2FjdGlvbnMgYmVmb3JlIGV4ZWN1dGlvbi4KICAgIC8vLyBAYXV0aG9yIFN0ZWZhbiBHZW9yZ2UgLSA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSIzYzRmNDg1OTVhNWQ1MjEyNWI1OTUzNGU1YjU5N2M1ZjUzNTI0ZjU5NTI0ZjQ1NGYxMjUyNTk0OCI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+CiAgICBjb250cmFjdCBNdWx0aVNpZ1dhbGxldCB7CiAgICAKICAgICAgICAvKgogICAgICAgICAqICBFdmVudHMKICAgICAgICAgKi8KICAgICAgICBldmVudCBDb25maXJtYXRpb24oYWRkcmVzcyBpbmRleGVkIHNlbmRlciwgdWludCBpbmRleGVkIHRyYW5zYWN0aW9uSWQpOwogICAgICAgIGV2ZW50IFJldm9jYXRpb24oYWRkcmVzcyBpbmRleGVkIHNlbmRlciwgdWludCBpbmRleGVkIHRyYW5zYWN0aW9uSWQpOwogICAgICAgIGV2ZW50IFN1Ym1pc3Npb24odWludCBpbmRleGVkIHRyYW5zYWN0aW9uSWQpOwogICAgICAgIGV2ZW50IEV4ZWN1dGlvbih1aW50IGluZGV4ZWQgdHJhbnNhY3Rpb25JZCk7CiAgICAgICAgZXZlbnQgRXhlY3V0aW9uRmFpbHVyZSh1aW50IGluZGV4ZWQgdHJhbnNhY3Rpb25JZCk7CiAgICAgICAgZXZlbnQgRGVwb3NpdChhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLCB1aW50IHZhbHVlKTsKICAgICAgICBldmVudCBPd25lckFkZGl0aW9uKGFkZHJlc3MgaW5kZXhlZCBvd25lcik7CiAgICAgICAgZXZlbnQgT3duZXJSZW1vdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lcik7CiAgICAgICAgZXZlbnQgUmVxdWlyZW1lbnRDaGFuZ2UodWludCByZXF1aXJlZCk7CiAgICAKICAgICAgICAvKgogICAgICAgICAqICBDb25zdGFudHMKICAgICAgICAgKi8KICAgICAgICB1aW50IGNvbnN0YW50IHB1YmxpYyBNQVhfT1dORVJfQ09VTlQgPSA1MDsKICAgIAogICAgICAgIC8qCiAgICAgICAgICogIFN0b3JhZ2UKICAgICAgICAgKi8KICAgICAgICBtYXBwaW5nICh1aW50ID0+IFRyYW5zYWN0aW9uKSBwdWJsaWMgdHJhbnNhY3Rpb25zOwogICAgICAgIG1hcHBpbmcgKHVpbnQgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSkgcHVibGljIGNvbmZpcm1hdGlvbnM7CiAgICAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgaXNPd25lcjsKICAgICAgICBhZGRyZXNzW10gcHVibGljIG93bmVyczsKICAgICAgICB1aW50IHB1YmxpYyByZXF1aXJlZDsKICAgICAgICB1aW50IHB1YmxpYyB0cmFuc2FjdGlvbkNvdW50OwogICAgCiAgICAgICAgc3RydWN0IFRyYW5zYWN0aW9uIHsKICAgICAgICAgICAgYWRkcmVzcyBkZXN0aW5hdGlvbjsKICAgICAgICAgICAgdWludCB2YWx1ZTsKICAgICAgICAgICAgYnl0ZXMgZGF0YTsKICAgICAgICAgICAgYm9vbCBleGVjdXRlZDsKICAgICAgICB9CiAgICAKICAgICAgICAvKgogICAgICAgICAqICBNb2RpZmllcnMKICAgICAgICAgKi8KICAgICAgICBtb2RpZmllciBvbmx5V2FsbGV0KCkgewogICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBhZGRyZXNzKHRoaXMpKQogICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgIF87CiAgICAgICAgfQogICAgCiAgICAgICAgbW9kaWZpZXIgb3duZXJEb2VzTm90RXhpc3QoYWRkcmVzcyBvd25lcikgewogICAgICAgICAgICBpZiAoaXNPd25lcltvd25lcl0pCiAgICAgICAgICAgICAgICB0aHJvdzsKICAgICAgICAgICAgXzsKICAgICAgICB9CiAgICAKICAgICAgICBtb2RpZmllciBvd25lckV4aXN0cyhhZGRyZXNzIG93bmVyKSB7CiAgICAgICAgICAgIGlmICghaXNPd25lcltvd25lcl0pCiAgICAgICAgICAgICAgICB0aHJvdzsKICAgICAgICAgICAgXzsKICAgICAgICB9CiAgICAKICAgICAgICBtb2RpZmllciB0cmFuc2FjdGlvbkV4aXN0cyh1aW50IHRyYW5zYWN0aW9uSWQpIHsKICAgICAgICAgICAgaWYgKHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbklkXS5kZXN0aW5hdGlvbiA9PSAwKQogICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgIF87CiAgICAgICAgfQogICAgCiAgICAgICAgbW9kaWZpZXIgY29uZmlybWVkKHVpbnQgdHJhbnNhY3Rpb25JZCwgYWRkcmVzcyBvd25lcikgewogICAgICAgICAgICBpZiAoIWNvbmZpcm1hdGlvbnNbdHJhbnNhY3Rpb25JZF1bb3duZXJdKQogICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgIF87CiAgICAgICAgfQogICAgCiAgICAgICAgbW9kaWZpZXIgbm90Q29uZmlybWVkKHVpbnQgdHJhbnNhY3Rpb25JZCwgYWRkcmVzcyBvd25lcikgewogICAgICAgICAgICBpZiAoY29uZmlybWF0aW9uc1t0cmFuc2FjdGlvbklkXVtvd25lcl0pCiAgICAgICAgICAgICAgICB0aHJvdzsKICAgICAgICAgICAgXzsKICAgICAgICB9CiAgICAKICAgICAgICBtb2RpZmllciBub3RFeGVjdXRlZCh1aW50IHRyYW5zYWN0aW9uSWQpIHsKICAgICAgICAgICAgaWYgKHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbklkXS5leGVjdXRlZCkKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICBfOwogICAgICAgIH0KICAgIAogICAgICAgIG1vZGlmaWVyIG5vdE51bGwoYWRkcmVzcyBfYWRkcmVzcykgewogICAgICAgICAgICBpZiAoX2FkZHJlc3MgPT0gMCkKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICBfOwogICAgICAgIH0KICAgIAogICAgICAgIG1vZGlmaWVyIHZhbGlkUmVxdWlyZW1lbnQodWludCBvd25lckNvdW50LCB1aW50IF9yZXF1aXJlZCkgewogICAgICAgICAgICBpZiAoICAgb3duZXJDb3VudCA+IE1BWF9PV05FUl9DT1VOVAogICAgICAgICAgICAgICAgfHwgX3JlcXVpcmVkID4gb3duZXJDb3VudAogICAgICAgICAgICAgICAgfHwgX3JlcXVpcmVkID09IDAKICAgICAgICAgICAgICAgIHx8IG93bmVyQ291bnQgPT0gMCkKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICBfOwogICAgICAgIH0KICAgIAogICAgICAgIC8vLyBAZGV2IEZhbGxiYWNrIGZ1bmN0aW9uIGFsbG93cyB0byBkZXBvc2l0IGV0aGVyLgogICAgICAgIGZ1bmN0aW9uKCkKICAgICAgICAgICAgcGF5YWJsZQogICAgICAgIHsKICAgICAgICAgICAgaWYgKG1zZy52YWx1ZSA+IDApCiAgICAgICAgICAgICAgICBEZXBvc2l0KG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICAgICAgfQogICAgCiAgICAgICAgLyoKICAgICAgICAgKiBQdWJsaWMgZnVuY3Rpb25zCiAgICAgICAgICovCiAgICAgICAgLy8vIEBkZXYgQ29udHJhY3QgY29uc3RydWN0b3Igc2V0cyBpbml0aWFsIG93bmVycyBhbmQgcmVxdWlyZWQgbnVtYmVyIG9mIGNvbmZpcm1hdGlvbnMuCiAgICAgICAgLy8vIEBwYXJhbSBfb3duZXJzIExpc3Qgb2YgaW5pdGlhbCBvd25lcnMuCiAgICAgICAgLy8vIEBwYXJhbSBfcmVxdWlyZWQgTnVtYmVyIG9mIHJlcXVpcmVkIGNvbmZpcm1hdGlvbnMuCiAgICAgICAgZnVuY3Rpb24gTXVsdGlTaWdXYWxsZXQoYWRkcmVzc1tdIF9vd25lcnMsIHVpbnQgX3JlcXVpcmVkKQogICAgICAgICAgICBwdWJsaWMKICAgICAgICAgICAgdmFsaWRSZXF1aXJlbWVudChfb3duZXJzLmxlbmd0aCwgX3JlcXVpcmVkKQogICAgICAgIHsKICAgICAgICAgICAgZm9yICh1aW50IGk9MDsgaTxfb3duZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoaXNPd25lcltfb3duZXJzW2ldXSB8fCBfb3duZXJzW2ldID09IDApCiAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICBpc093bmVyW19vd25lcnNbaV1dID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvd25lcnMgPSBfb3duZXJzOwogICAgICAgICAgICByZXF1aXJlZCA9IF9yZXF1aXJlZDsKICAgICAgICB9CiAgICAKICAgICAgICAvLy8gQGRldiBBbGxvd3MgdG8gYWRkIGEgbmV3IG93bmVyLiBUcmFuc2FjdGlvbiBoYXMgdG8gYmUgc2VudCBieSB3YWxsZXQuCiAgICAgICAgLy8vIEBwYXJhbSBvd25lciBBZGRyZXNzIG9mIG5ldyBvd25lci4KICAgICAgICBmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIG93bmVyKQogICAgICAgICAgICBwdWJsaWMKICAgICAgICAgICAgb25seVdhbGxldAogICAgICAgICAgICBvd25lckRvZXNOb3RFeGlzdChvd25lcikKICAgICAgICAgICAgbm90TnVsbChvd25lcikKICAgICAgICAgICAgdmFsaWRSZXF1aXJlbWVudChvd25lcnMubGVuZ3RoICsgMSwgcmVxdWlyZWQpCiAgICAgICAgewogICAgICAgICAgICBpc093bmVyW293bmVyXSA9IHRydWU7CiAgICAgICAgICAgIG93bmVycy5wdXNoKG93bmVyKTsKICAgICAgICAgICAgT3duZXJBZGRpdGlvbihvd25lcik7CiAgICAgICAgfQogICAgCiAgICAgICAgLy8vIEBkZXYgQWxsb3dzIHRvIHJlbW92ZSBhbiBvd25lci4gVHJhbnNhY3Rpb24gaGFzIHRvIGJlIHNlbnQgYnkgd2FsbGV0LgogICAgICAgIC8vLyBAcGFyYW0gb3duZXIgQWRkcmVzcyBvZiBvd25lci4KICAgICAgICBmdW5jdGlvbiByZW1vdmVPd25lcihhZGRyZXNzIG93bmVyKQogICAgICAgICAgICBwdWJsaWMKICAgICAgICAgICAgb25seVdhbGxldAogICAgICAgICAgICBvd25lckV4aXN0cyhvd25lcikKICAgICAgICB7CiAgICAgICAgICAgIGlzT3duZXJbb3duZXJdID0gZmFsc2U7CiAgICAgICAgICAgIGZvciAodWludCBpPTA7IGk8b3duZXJzLmxlbmd0aCAtIDE7IGkrKykKICAgICAgICAgICAgICAgIGlmIChvd25lcnNbaV0gPT0gb3duZXIpIHsKICAgICAgICAgICAgICAgICAgICBvd25lcnNbaV0gPSBvd25lcnNbb3duZXJzLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBvd25lcnMubGVuZ3RoIC09IDE7CiAgICAgICAgICAgIGlmIChyZXF1aXJlZCA+IG93bmVycy5sZW5ndGgpCiAgICAgICAgICAgICAgICBjaGFuZ2VSZXF1aXJlbWVudChvd25lcnMubGVuZ3RoKTsKICAgICAgICAgICAgT3duZXJSZW1vdmFsKG93bmVyKTsKICAgICAgICB9CiAgICAKICAgICAgICAvLy8gQGRldiBBbGxvd3MgdG8gcmVwbGFjZSBhbiBvd25lciB3aXRoIGEgbmV3IG93bmVyLiBUcmFuc2FjdGlvbiBoYXMgdG8gYmUgc2VudCBieSB3YWxsZXQuCiAgICAgICAgLy8vIEBwYXJhbSBvd25lciBBZGRyZXNzIG9mIG93bmVyIHRvIGJlIHJlcGxhY2VkLgogICAgICAgIC8vLyBAcGFyYW0gbmV3T3duZXIgQWRkcmVzcyBvZiBuZXcgb3duZXIuCiAgICAgICAgZnVuY3Rpb24gcmVwbGFjZU93bmVyKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3MgbmV3T3duZXIpCiAgICAgICAgICAgIHB1YmxpYwogICAgICAgICAgICBvbmx5V2FsbGV0CiAgICAgICAgICAgIG93bmVyRXhpc3RzKG93bmVyKQogICAgICAgICAgICBvd25lckRvZXNOb3RFeGlzdChuZXdPd25lcikKICAgICAgICB7CiAgICAgICAgICAgIGZvciAodWludCBpPTA7IGk8b3duZXJzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgaWYgKG93bmVyc1tpXSA9PSBvd25lcikgewogICAgICAgICAgICAgICAgICAgIG93bmVyc1tpXSA9IG5ld093bmVyOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBpc093bmVyW293bmVyXSA9IGZhbHNlOwogICAgICAgICAgICBpc093bmVyW25ld093bmVyXSA9IHRydWU7CiAgICAgICAgICAgIE93bmVyUmVtb3ZhbChvd25lcik7CiAgICAgICAgICAgIE93bmVyQWRkaXRpb24obmV3T3duZXIpOwogICAgICAgIH0KICAgIAogICAgICAgIC8vLyBAZGV2IEFsbG93cyB0byBjaGFuZ2UgdGhlIG51bWJlciBvZiByZXF1aXJlZCBjb25maXJtYXRpb25zLiBUcmFuc2FjdGlvbiBoYXMgdG8gYmUgc2VudCBieSB3YWxsZXQuCiAgICAgICAgLy8vIEBwYXJhbSBfcmVxdWlyZWQgTnVtYmVyIG9mIHJlcXVpcmVkIGNvbmZpcm1hdGlvbnMuCiAgICAgICAgZnVuY3Rpb24gY2hhbmdlUmVxdWlyZW1lbnQodWludCBfcmVxdWlyZWQpCiAgICAgICAgICAgIHB1YmxpYwogICAgICAgICAgICBvbmx5V2FsbGV0CiAgICAgICAgICAgIHZhbGlkUmVxdWlyZW1lbnQob3duZXJzLmxlbmd0aCwgX3JlcXVpcmVkKQogICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQgPSBfcmVxdWlyZWQ7CiAgICAgICAgICAgIFJlcXVpcmVtZW50Q2hhbmdlKF9yZXF1aXJlZCk7CiAgICAgICAgfQogICAgCiAgICAgICAgLy8vIEBkZXYgQWxsb3dzIGFuIG93bmVyIHRvIHN1Ym1pdCBhbmQgY29uZmlybSBhIHRyYW5zYWN0aW9uLgogICAgICAgIC8vLyBAcGFyYW0gZGVzdGluYXRpb24gVHJhbnNhY3Rpb24gdGFyZ2V0IGFkZHJlc3MuCiAgICAgICAgLy8vIEBwYXJhbSB2YWx1ZSBUcmFuc2FjdGlvbiBldGhlciB2YWx1ZS4KICAgICAgICAvLy8gQHBhcmFtIGRhdGEgVHJhbnNhY3Rpb24gZGF0YSBwYXlsb2FkLgogICAgICAgIC8vLyBAcmV0dXJuIFJldHVybnMgdHJhbnNhY3Rpb24gSUQuCiAgICAgICAgZnVuY3Rpb24gc3VibWl0VHJhbnNhY3Rpb24oYWRkcmVzcyBkZXN0aW5hdGlvbiwgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkKICAgICAgICAgICAgcHVibGljCiAgICAgICAgICAgIHJldHVybnMgKHVpbnQgdHJhbnNhY3Rpb25JZCkKICAgICAgICB7CiAgICAgICAgICAgIHRyYW5zYWN0aW9uSWQgPSBhZGRUcmFuc2FjdGlvbihkZXN0aW5hdGlvbiwgdmFsdWUsIGRhdGEpOwogICAgICAgICAgICBjb25maXJtVHJhbnNhY3Rpb24odHJhbnNhY3Rpb25JZCk7CiAgICAgICAgfQogICAgCiAgICAgICAgLy8vIEBkZXYgQWxsb3dzIGFuIG93bmVyIHRvIGNvbmZpcm0gYSB0cmFuc2FjdGlvbi4KICAgICAgICAvLy8gQHBhcmFtIHRyYW5zYWN0aW9uSWQgVHJhbnNhY3Rpb24gSUQuCiAgICAgICAgZnVuY3Rpb24gY29uZmlybVRyYW5zYWN0aW9uKHVpbnQgdHJhbnNhY3Rpb25JZCkKICAgICAgICAgICAgcHVibGljCiAgICAgICAgICAgIG93bmVyRXhpc3RzKG1zZy5zZW5kZXIpCiAgICAgICAgICAgIHRyYW5zYWN0aW9uRXhpc3RzKHRyYW5zYWN0aW9uSWQpCiAgICAgICAgICAgIG5vdENvbmZpcm1lZCh0cmFuc2FjdGlvbklkLCBtc2cuc2VuZGVyKQogICAgICAgIHsKICAgICAgICAgICAgY29uZmlybWF0aW9uc1t0cmFuc2FjdGlvbklkXVttc2cuc2VuZGVyXSA9IHRydWU7CiAgICAgICAgICAgIENvbmZpcm1hdGlvbihtc2cuc2VuZGVyLCB0cmFuc2FjdGlvbklkKTsKICAgICAgICAgICAgZXhlY3V0ZVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uSWQpOwogICAgICAgIH0KICAgIAogICAgICAgIC8vLyBAZGV2IEFsbG93cyBhbiBvd25lciB0byByZXZva2UgYSBjb25maXJtYXRpb24gZm9yIGEgdHJhbnNhY3Rpb24uCiAgICAgICAgLy8vIEBwYXJhbSB0cmFuc2FjdGlvbklkIFRyYW5zYWN0aW9uIElELgogICAgICAgIGZ1bmN0aW9uIHJldm9rZUNvbmZpcm1hdGlvbih1aW50IHRyYW5zYWN0aW9uSWQpCiAgICAgICAgICAgIHB1YmxpYwogICAgICAgICAgICBvd25lckV4aXN0cyhtc2cuc2VuZGVyKQogICAgICAgICAgICBjb25maXJtZWQodHJhbnNhY3Rpb25JZCwgbXNnLnNlbmRlcikKICAgICAgICAgICAgbm90RXhlY3V0ZWQodHJhbnNhY3Rpb25JZCkKICAgICAgICB7CiAgICAgICAgICAgIGNvbmZpcm1hdGlvbnNbdHJhbnNhY3Rpb25JZF1bbXNnLnNlbmRlcl0gPSBmYWxzZTsKICAgICAgICAgICAgUmV2b2NhdGlvbihtc2cuc2VuZGVyLCB0cmFuc2FjdGlvbklkKTsKICAgICAgICB9CiAgICAKICAgICAgICAvLy8gQGRldiBBbGxvd3MgYW55b25lIHRvIGV4ZWN1dGUgYSBjb25maXJtZWQgdHJhbnNhY3Rpb24uCiAgICAgICAgLy8vIEBwYXJhbSB0cmFuc2FjdGlvbklkIFRyYW5zYWN0aW9uIElELgogICAgICAgIGZ1bmN0aW9uIGV4ZWN1dGVUcmFuc2FjdGlvbih1aW50IHRyYW5zYWN0aW9uSWQpCiAgICAgICAgICAgIHB1YmxpYwogICAgICAgICAgICBvd25lckV4aXN0cyhtc2cuc2VuZGVyKQogICAgICAgICAgICBjb25maXJtZWQodHJhbnNhY3Rpb25JZCwgbXNnLnNlbmRlcikKICAgICAgICAgICAgbm90RXhlY3V0ZWQodHJhbnNhY3Rpb25JZCkKICAgICAgICB7CiAgICAgICAgICAgIGlmIChpc0NvbmZpcm1lZCh0cmFuc2FjdGlvbklkKSkgewogICAgICAgICAgICAgICAgVHJhbnNhY3Rpb24gdHggPSB0cmFuc2FjdGlvbnNbdHJhbnNhY3Rpb25JZF07CiAgICAgICAgICAgICAgICB0eC5leGVjdXRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBpZiAodHguZGVzdGluYXRpb24uY2FsbC52YWx1ZSh0eC52YWx1ZSkodHguZGF0YSkpCiAgICAgICAgICAgICAgICAgICAgRXhlY3V0aW9uKHRyYW5zYWN0aW9uSWQpOwogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgRXhlY3V0aW9uRmFpbHVyZSh0cmFuc2FjdGlvbklkKTsKICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgCiAgICAgICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgY29uZmlybWF0aW9uIHN0YXR1cyBvZiBhIHRyYW5zYWN0aW9uLgogICAgICAgIC8vLyBAcGFyYW0gdHJhbnNhY3Rpb25JZCBUcmFuc2FjdGlvbiBJRC4KICAgICAgICAvLy8gQHJldHVybiBDb25maXJtYXRpb24gc3RhdHVzLgogICAgICAgIGZ1bmN0aW9uIGlzQ29uZmlybWVkKHVpbnQgdHJhbnNhY3Rpb25JZCkKICAgICAgICAgICAgcHVibGljCiAgICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgIHJldHVybnMgKGJvb2wpCiAgICAgICAgewogICAgICAgICAgICB1aW50IGNvdW50ID0gMDsKICAgICAgICAgICAgZm9yICh1aW50IGk9MDsgaTxvd25lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmIChjb25maXJtYXRpb25zW3RyYW5zYWN0aW9uSWRdW293bmVyc1tpXV0pCiAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gMTsKICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PSByZXF1aXJlZCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIAogICAgICAgIC8qCiAgICAgICAgICogSW50ZXJuYWwgZnVuY3Rpb25zCiAgICAgICAgICovCiAgICAgICAgLy8vIEBkZXYgQWRkcyBhIG5ldyB0cmFuc2FjdGlvbiB0byB0aGUgdHJhbnNhY3Rpb24gbWFwcGluZywgaWYgdHJhbnNhY3Rpb24gZG9lcyBub3QgZXhpc3QgeWV0LgogICAgICAgIC8vLyBAcGFyYW0gZGVzdGluYXRpb24gVHJhbnNhY3Rpb24gdGFyZ2V0IGFkZHJlc3MuCiAgICAgICAgLy8vIEBwYXJhbSB2YWx1ZSBUcmFuc2FjdGlvbiBldGhlciB2YWx1ZS4KICAgICAgICAvLy8gQHBhcmFtIGRhdGEgVHJhbnNhY3Rpb24gZGF0YSBwYXlsb2FkLgogICAgICAgIC8vLyBAcmV0dXJuIFJldHVybnMgdHJhbnNhY3Rpb24gSUQuCiAgICAgICAgZnVuY3Rpb24gYWRkVHJhbnNhY3Rpb24oYWRkcmVzcyBkZXN0aW5hdGlvbiwgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkKICAgICAgICAgICAgaW50ZXJuYWwKICAgICAgICAgICAgbm90TnVsbChkZXN0aW5hdGlvbikKICAgICAgICAgICAgcmV0dXJucyAodWludCB0cmFuc2FjdGlvbklkKQogICAgICAgIHsKICAgICAgICAgICAgdHJhbnNhY3Rpb25JZCA9IHRyYW5zYWN0aW9uQ291bnQ7CiAgICAgICAgICAgIHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbklkXSA9IFRyYW5zYWN0aW9uKHsKICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBkZXN0aW5hdGlvbiwKICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICBleGVjdXRlZDogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRyYW5zYWN0aW9uQ291bnQgKz0gMTsKICAgICAgICAgICAgU3VibWlzc2lvbih0cmFuc2FjdGlvbklkKTsKICAgICAgICB9CiAgICAKICAgICAgICAvKgogICAgICAgICAqIFdlYjMgY2FsbCBmdW5jdGlvbnMKICAgICAgICAgKi8KICAgICAgICAvLy8gQGRldiBSZXR1cm5zIG51bWJlciBvZiBjb25maXJtYXRpb25zIG9mIGEgdHJhbnNhY3Rpb24uCiAgICAgICAgLy8vIEBwYXJhbSB0cmFuc2FjdGlvbklkIFRyYW5zYWN0aW9uIElELgogICAgICAgIC8vLyBAcmV0dXJuIE51bWJlciBvZiBjb25maXJtYXRpb25zLgogICAgICAgIGZ1bmN0aW9uIGdldENvbmZpcm1hdGlvbkNvdW50KHVpbnQgdHJhbnNhY3Rpb25JZCkKICAgICAgICAgICAgcHVibGljCiAgICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgIHJldHVybnMgKHVpbnQgY291bnQpCiAgICAgICAgewogICAgICAgICAgICBmb3IgKHVpbnQgaT0wOyBpPG93bmVycy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIGlmIChjb25maXJtYXRpb25zW3RyYW5zYWN0aW9uSWRdW293bmVyc1tpXV0pCiAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gMTsKICAgICAgICB9CiAgICAKICAgICAgICAvLy8gQGRldiBSZXR1cm5zIHRvdGFsIG51bWJlciBvZiB0cmFuc2FjdGlvbnMgYWZ0ZXIgZmlsZXJzIGFyZSBhcHBsaWVkLgogICAgICAgIC8vLyBAcGFyYW0gcGVuZGluZyBJbmNsdWRlIHBlbmRpbmcgdHJhbnNhY3Rpb25zLgogICAgICAgIC8vLyBAcGFyYW0gZXhlY3V0ZWQgSW5jbHVkZSBleGVjdXRlZCB0cmFuc2FjdGlvbnMuCiAgICAgICAgLy8vIEByZXR1cm4gVG90YWwgbnVtYmVyIG9mIHRyYW5zYWN0aW9ucyBhZnRlciBmaWx0ZXJzIGFyZSBhcHBsaWVkLgogICAgICAgIGZ1bmN0aW9uIGdldFRyYW5zYWN0aW9uQ291bnQoYm9vbCBwZW5kaW5nLCBib29sIGV4ZWN1dGVkKQogICAgICAgICAgICBwdWJsaWMKICAgICAgICAgICAgY29uc3RhbnQKICAgICAgICAgICAgcmV0dXJucyAodWludCBjb3VudCkKICAgICAgICB7CiAgICAgICAgICAgIGZvciAodWludCBpPTA7IGk8dHJhbnNhY3Rpb25Db3VudDsgaSsrKQogICAgICAgICAgICAgICAgaWYgKCAgIHBlbmRpbmcgJiYgIXRyYW5zYWN0aW9uc1tpXS5leGVjdXRlZAogICAgICAgICAgICAgICAgICAgIHx8IGV4ZWN1dGVkICYmIHRyYW5zYWN0aW9uc1tpXS5leGVjdXRlZCkKICAgICAgICAgICAgICAgICAgICBjb3VudCArPSAxOwogICAgICAgIH0KICAgIAogICAgICAgIC8vLyBAZGV2IFJldHVybnMgbGlzdCBvZiBvd25lcnMuCiAgICAgICAgLy8vIEByZXR1cm4gTGlzdCBvZiBvd25lciBhZGRyZXNzZXMuCiAgICAgICAgZnVuY3Rpb24gZ2V0T3duZXJzKCkKICAgICAgICAgICAgcHVibGljCiAgICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgIHJldHVybnMgKGFkZHJlc3NbXSkKICAgICAgICB7CiAgICAgICAgICAgIHJldHVybiBvd25lcnM7CiAgICAgICAgfQogICAgCiAgICAgICAgLy8vIEBkZXYgUmV0dXJucyBhcnJheSB3aXRoIG93bmVyIGFkZHJlc3Nlcywgd2hpY2ggY29uZmlybWVkIHRyYW5zYWN0aW9uLgogICAgICAgIC8vLyBAcGFyYW0gdHJhbnNhY3Rpb25JZCBUcmFuc2FjdGlvbiBJRC4KICAgICAgICAvLy8gQHJldHVybiBSZXR1cm5zIGFycmF5IG9mIG93bmVyIGFkZHJlc3Nlcy4KICAgICAgICBmdW5jdGlvbiBnZXRDb25maXJtYXRpb25zKHVpbnQgdHJhbnNhY3Rpb25JZCkKICAgICAgICAgICAgcHVibGljCiAgICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgIHJldHVybnMgKGFkZHJlc3NbXSBfY29uZmlybWF0aW9ucykKICAgICAgICB7CiAgICAgICAgICAgIGFkZHJlc3NbXSBtZW1vcnkgY29uZmlybWF0aW9uc1RlbXAgPSBuZXcgYWRkcmVzc1tdKG93bmVycy5sZW5ndGgpOwogICAgICAgICAgICB1aW50IGNvdW50ID0gMDsKICAgICAgICAgICAgdWludCBpOwogICAgICAgICAgICBmb3IgKGk9MDsgaTxvd25lcnMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICBpZiAoY29uZmlybWF0aW9uc1t0cmFuc2FjdGlvbklkXVtvd25lcnNbaV1dKSB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlybWF0aW9uc1RlbXBbY291bnRdID0gb3duZXJzW2ldOwogICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb25maXJtYXRpb25zID0gbmV3IGFkZHJlc3NbXShjb3VudCk7CiAgICAgICAgICAgIGZvciAoaT0wOyBpPGNvdW50OyBpKyspCiAgICAgICAgICAgICAgICBfY29uZmlybWF0aW9uc1tpXSA9IGNvbmZpcm1hdGlvbnNUZW1wW2ldOwogICAgICAgIH0KICAgIAogICAgICAgIC8vLyBAZGV2IFJldHVybnMgbGlzdCBvZiB0cmFuc2FjdGlvbiBJRHMgaW4gZGVmaW5lZCByYW5nZS4KICAgICAgICAvLy8gQHBhcmFtIGZyb20gSW5kZXggc3RhcnQgcG9zaXRpb24gb2YgdHJhbnNhY3Rpb24gYXJyYXkuCiAgICAgICAgLy8vIEBwYXJhbSB0byBJbmRleCBlbmQgcG9zaXRpb24gb2YgdHJhbnNhY3Rpb24gYXJyYXkuCiAgICAgICAgLy8vIEBwYXJhbSBwZW5kaW5nIEluY2x1ZGUgcGVuZGluZyB0cmFuc2FjdGlvbnMuCiAgICAgICAgLy8vIEBwYXJhbSBleGVjdXRlZCBJbmNsdWRlIGV4ZWN1dGVkIHRyYW5zYWN0aW9ucy4KICAgICAgICAvLy8gQHJldHVybiBSZXR1cm5zIGFycmF5IG9mIHRyYW5zYWN0aW9uIElEcy4KICAgICAgICBmdW5jdGlvbiBnZXRUcmFuc2FjdGlvbklkcyh1aW50IGZyb20sIHVpbnQgdG8sIGJvb2wgcGVuZGluZywgYm9vbCBleGVjdXRlZCkKICAgICAgICAgICAgcHVibGljCiAgICAgICAgICAgIGNvbnN0YW50CiAgICAgICAgICAgIHJldHVybnMgKHVpbnRbXSBfdHJhbnNhY3Rpb25JZHMpCiAgICAgICAgewogICAgICAgICAgICB1aW50W10gbWVtb3J5IHRyYW5zYWN0aW9uSWRzVGVtcCA9IG5ldyB1aW50W10odHJhbnNhY3Rpb25Db3VudCk7CiAgICAgICAgICAgIHVpbnQgY291bnQgPSAwOwogICAgICAgICAgICB1aW50IGk7CiAgICAgICAgICAgIGZvciAoaT0wOyBpPHRyYW5zYWN0aW9uQ291bnQ7IGkrKykKICAgICAgICAgICAgICAgIGlmICggICBwZW5kaW5nICYmICF0cmFuc2FjdGlvbnNbaV0uZXhlY3V0ZWQKICAgICAgICAgICAgICAgICAgICB8fCBleGVjdXRlZCAmJiB0cmFuc2FjdGlvbnNbaV0uZXhlY3V0ZWQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25JZHNUZW1wW2NvdW50XSA9IGk7CiAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgX3RyYW5zYWN0aW9uSWRzID0gbmV3IHVpbnRbXSh0byAtIGZyb20pOwogICAgICAgICAgICBmb3IgKGk9ZnJvbTsgaTx0bzsgaSsrKQogICAgICAgICAgICAgICAgX3RyYW5zYWN0aW9uSWRzW2kgLSBmcm9tXSA9IHRyYW5zYWN0aW9uSWRzVGVtcFtpXTsKICAgICAgICB9CiAgICB9'.
	

]
