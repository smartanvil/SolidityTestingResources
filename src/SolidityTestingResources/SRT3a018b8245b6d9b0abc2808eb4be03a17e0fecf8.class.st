Class {
	#name : #SRT3a018b8245b6d9b0abc2808eb4be03a17e0fecf8,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3a018b8245b6d9b0abc2808eb4be03a17e0fecf8 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Ci8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CglpZiAoYSA9PSAwKSB7CiAgCXJldHVybiAwOwoJfQoJdWludDI1NiBjID0gYSAqIGI7Cglhc3NlcnQoYyAvIGEgPT0gYik7CglyZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CgkvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKCXVpbnQyNTYgYyA9IGEgLyBiOwoJLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKCXJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCWFzc2VydChiIDw9IGEpOwoJcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCXVpbnQyNTYgYyA9IGEgKyBiOwoJYXNzZXJ0KGMgPj0gYSk7CglyZXR1cm4gYzsKICB9Cn0KY29udHJhY3Qgb3duZWQgewoJYWRkcmVzcyBwdWJsaWMgb3duZXI7CglldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKICAgIAoJZnVuY3Rpb24gb3duZWQoKSBwdWJsaWMgewogICAgCW93bmVyID0gbXNnLnNlbmRlcjsKCX0KCgltb2RpZmllciBvbmx5T3duZXIgewogICAgCXJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAJXzsKCX0KCglmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgIAlyZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgCU93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICAJb3duZXIgPSBuZXdPd25lcjsKCX0KfQoKY29udHJhY3QgUGF1c2FibGUgaXMgb3duZWQgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBub3QgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CglyZXF1aXJlKCFwYXVzZWQpOwoJXzsKICB9CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CglyZXF1aXJlKHBhdXNlZCk7CglfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewoJcGF1c2VkID0gdHJ1ZTsKCVBhdXNlKCk7CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgKi8KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcHVibGljIHsKCXBhdXNlZCA9IGZhbHNlOwoJVW5wYXVzZSgpOwogIH0KfQoKaW50ZXJmYWNlIHRva2VuUmVjaXBpZW50IHsgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90b2tlbiwgYnl0ZXMgX2V4dHJhRGF0YSkgZXh0ZXJuYWw7IH0KaW50ZXJmYWNlIEVSQzIwVG9rZW4gewoKIAoKCS8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKCS8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCglmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgoJLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAoJLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAoJLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAoJLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGV4dGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgoJLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBgX2Zyb21gCgkvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKCS8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKCS8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKCS8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAKCglldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIAp9CgoKCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjBUb2tlbiwgUGF1c2FibGUgewogdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogCWFzc2VydChtc2cuZGF0YS5sZW5ndGggPT0gc2l6ZS5hZGQoNCkpOwogCV87CiAgIH0KCglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHdoZW5Ob3RQYXVzZWQgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAJLy9EZWZhdWx0IGFzc3VtZXMgdG90YWxTdXBwbHkgY2FuJ3QgYmUgb3ZlciBtYXggKDJeMjU2IC0gMSkuCiAgICAJLy9JZiB5b3VyIHRva2VuIGxlYXZlcyBvdXQgdG90YWxTdXBwbHkgYW5kIGNhbiBpc3N1ZSBtb3JlIHRva2VucyBhcyB0aW1lIGdvZXMgb24sIHlvdSBuZWVkIHRvIGNoZWNrIGlmIGl0IGRvZXNuJ3Qgd3JhcC4KICAgIAkvL1JlcGxhY2UgdGhlIGlmIHdpdGggdGhpcyBvbmUgaW5zdGVhZC4KICAgIAkvL2lmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgIAlpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAJYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICAJYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgCVRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAJcmV0dXJuIHRydWU7CiAgICAJfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9Cgl9CgoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgd2hlbk5vdFBhdXNlZCBleHRlcm5hbCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIAkvL3NhbWUgYXMgYWJvdmUuIFJlcGxhY2UgdGhpcyBsaW5lIHdpdGggdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBwcm90ZWN0IGFnYWluc3Qgd3JhcHBpbmcgdWludHMuCiAgICAJLy9pZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgIAlpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgIAliYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICAJYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIAlhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIAlUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIAlyZXR1cm4gdHJ1ZTsKICAgIAl9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KCX0KCglmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgCXJldHVybiBiYWxhbmNlc1tfb3duZXJdOwoJfQogICAgCgkvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9hZGRyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKCS8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCgkvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHdlaSB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKCS8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAoJZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgd2hlbk5vdFBhdXNlZCBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAJcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CiAgICAJYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAJQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAJcmV0dXJuIHRydWU7Cgl9CgoKICAgCgkvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCgkvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwoJLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAJcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07Cgl9CgoJZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgltYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoJbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoJdWludDI1NiBwdWJsaWMgX3RvdGFsU3VwcGx5Owp9CgoKLy9uYW1lIHRoaXMgY29udHJhY3Qgd2hhdGV2ZXIgeW91J2QgbGlrZQpjb250cmFjdCBDcnlwdG95YSBpcyBTdGFuZGFyZFRva2VuewogdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgoKCS8qIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovCgoJLyoKCU5PVEU6CglUaGUgZm9sbG93aW5nIHZhcmlhYmxlcyBhcmUgT1BUSU9OQUwgdmFuaXRpZXMuIE9uZSBkb2VzIG5vdCBoYXZlIHRvIGluY2x1ZGUgdGhlbS4KCVRoZXkgYWxsb3cgb25lIHRvIGN1c3RvbWlzZSB0aGUgdG9rZW4gY29udHJhY3QgJiBpbiBubyB3YXkgaW5mbHVlbmNlcyB0aGUgY29yZSBmdW5jdGlvbmFsaXR5LgoJU29tZSB3YWxsZXRzL2ludGVyZmFjZXMgbWlnaHQgbm90IGV2ZW4gYm90aGVyIHRvIGxvb2sgYXQgdGhpcyBpbmZvcm1hdGlvbi4KCSovCglzdHJpbmcgcHVibGljIG5hbWU7ICAgICAgICAgICAgICAgCS8vZmFuY3kgbmFtZTogZWcgU2ltb24gQnVja3MKCXVpbnQ4IHB1YmxpYyBkZWNpbWFsczsgICAgICAgICAgICAJLy9Ib3cgbWFueSBkZWNpbWFscyB0byBzaG93LiBpZS4gVGhlcmUgY291bGQgMTAwMCBiYXNlIHVuaXRzIHdpdGggMyBkZWNpbWFscy4gTWVhbmluZyAwLjk4MCBTQlggPSA5ODAgYmFzZSB1bml0cy4gSXQncyBsaWtlIGNvbXBhcmluZyAxIHdlaSB0byAxIGV0aGVyLgoJc3RyaW5nIHB1YmxpYyBzeW1ib2w7ICAgICAgICAgICAgIAkvL0FuIGlkZW50aWZpZXI6IGVnIFNCWAoJc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gJ1YxLjAnOyAgIAkvL1ZlcnNpb24gMC4xIHN0YW5kYXJkLiBKdXN0IGFuIGFyYml0cmFyeSB2ZXJzaW9uaW5nIHNjaGVtZS4KCXVpbnQyNTYgcHJpdmF0ZSBmdWxsdG9rZW47CgkvLyBUaGlzIG5vdGlmaWVzIGNsaWVudHMgYWJvdXQgdGhlIGFtb3VudCBidXJudAoJZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiB2YWx1ZSk7CiAgICAKLy8KLy8gQ0hBTkdFIFRIRVNFIFZBTFVFUyBGT1IgWU9VUiBUT0tFTgovLwoKLy9tYWtlIHN1cmUgdGhpcyBmdW5jdGlvbiBuYW1lIG1hdGNoZXMgdGhlIGNvbnRyYWN0IG5hbWUgYWJvdmUuIEVSQzIwVG9rZW4KCglmdW5jdGlvbiBDcnlwdG95YSgKICAgIAkpIHB1YmxpY3sKICAgIAlmdWxsdG9rZW4gPSA1MDAwMDAwMDA7ICAJIAogICAgCWRlY2ltYWxzID0gMTg7ICAgICAgICAgICAgICAgICAgICAgICAgCS8vIEFtb3VudCBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgCV90b3RhbFN1cHBseSA9IGZ1bGx0b2tlbi5tdWwoMTAgKiogdWludDI1NihkZWNpbWFscykpOyAvLyBVcGRhdGUgdG90YWwgc3VwcGx5ICgxMDAwMDAgZm9yIGV4YW1wbGUpCiAgICAJYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBfdG90YWxTdXBwbHk7ICAgICAgICAgICAJLy8gR2l2ZSB0aGUgY3JlYXRvciBhbGwgaW5pdGlhbCB0b2tlbnMgKDEwMDAwMCBmb3IgZXhhbXBsZSkKICAgIAluYW1lID0gIkNyeXB0b3lhIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCS8vIFNldCB0aGUgbmFtZSBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgCXN5bWJvbCA9ICJDUkEiOyAgICAgICAgICAgICAgICAgICAgICAgICAgIAkvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlcwoJfQogCWZ1bmN0aW9uKCkgcHVibGljIHsKICAgICAJLy9ub3QgcGF5YWJsZSBmYWxsYmFjayBmdW5jdGlvbgogICAgICAJcmV2ZXJ0KCk7Cgl9CiAgICAJLyoqCiAJKiBTZXQgYWxsb3dhbmNlIGZvciBvdGhlciBhZGRyZXNzIGFuZCBub3RpZnkKIAkqCiAJKiBBbGxvd3MgYF9zcGVuZGVyYCB0byBzcGVuZCBubyBtb3JlIHRoYW4gYF92YWx1ZWAgdG9rZW5zIGluIHlvdXIgYmVoYWxmLCBhbmQgdGhlbiBwaW5nIHRoZSBjb250cmFjdCBhYm91dCBpdAogCSoKIAkqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBhdXRob3JpemVkIHRvIHNwZW5kCiAJKiBAcGFyYW0gX3ZhbHVlIHRoZSBtYXggYW1vdW50IHRoZXkgY2FuIHNwZW5kCiAJKiBAcGFyYW0gX2V4dHJhRGF0YSBzb21lIGV4dHJhIGluZm9ybWF0aW9uIHRvIHNlbmQgdG8gdGhlIGFwcHJvdmVkIGNvbnRyYWN0CiAJKi8KCWZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAJdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsKICAgIAlpZiAoYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgewogICAgICAgIAlzcGVuZGVyLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpOwogICAgICAgIAlyZXR1cm4gdHJ1ZTsKICAgICAgIAl9Cgl9CiAgICAKICAJLy8vIEByZXR1cm4gdG90YWwgYW1vdW50IG9mIHRva2VucwoJZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NiBzdXBwbHkpewogICAJIAogICAgCXJldHVybiBfdG90YWxTdXBwbHk7Cgl9CgoJLyoqCiAJKiBEZXN0cm95IHRva2VucwogCSoKIAkqIFJlbW92ZSBgX3ZhbHVlYCB0b2tlbnMgZnJvbSB0aGUgc3lzdGVtIGlycmV2ZXJzaWJseQogCSoKIAkqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiBtb25leSB0byBidXJuCiAJKi8KCWZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAJcmVxdWlyZShiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOyAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgCWJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7ICAgICAgICAJLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAJX3RvdGFsU3VwcGx5ID0gX3RvdGFsU3VwcGx5LnN1YihfdmFsdWUpOyAgICAgICAgICAgICAgICAgIAkvLyBVcGRhdGVzIHRvdGFsU3VwcGx5CiAgICAJQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgCVRyYW5zZmVyKG1zZy5zZW5kZXIsIGFkZHJlc3MoMCksIF92YWx1ZSk7CiAgICAJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCiAJKiBEZXN0cm95IHRva2VucyBmcm9tIG90aGVyIGFjY291bnQKIAkqCiAJKiBSZW1vdmUgYF92YWx1ZWAgdG9rZW5zIGZyb20gdGhlIHN5c3RlbSBpcnJldmVyc2libHkgb24gYmVoYWxmIG9mIGBfZnJvbWAuCiAJKgogCSogQHBhcmFtIF9mcm9tIHRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKIAkqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiBtb25leSB0byBidXJuCiAJKi8KCWZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgCXJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSk7ICAgICAgICAgICAgCS8vIENoZWNrIGlmIHRoZSB0YXJnZXRlZCBiYWxhbmNlIGlzIGVub3VnaAogICAgCXJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsJLy8gQ2hlY2sgYWxsb3dhbmNlCiAgICAJYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAgIAkvLyBTdWJ0cmFjdCBmcm9tIHRoZSB0YXJnZXRlZCBiYWxhbmNlCiAgICAJYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsgICAgICAgICAJLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyJ3MgYWxsb3dhbmNlCiAgICAJX3RvdGFsU3VwcGx5ID0gX3RvdGFsU3VwcGx5LnN1YihfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgCS8vIFVwZGF0ZSB0b3RhbFN1cHBseQogICAgCUJ1cm4oX2Zyb20sIF92YWx1ZSk7CiAgICAJVHJhbnNmZXIoX2Zyb20sIGFkZHJlc3MoMCksIF92YWx1ZSk7CiAgICAJcmV0dXJuIHRydWU7Cgl9CiAJZnVuY3Rpb24gb25seVBheUZvckZ1ZWwoKSBwdWJsaWMgcGF5YWJsZSBvbmx5T3duZXJ7CiAgICAJLy8gT3duZXIgd2lsbCBwYXkgaW4gY29udHJhY3QgdG8gYmVhciB0aGUgZ2FzIHByaWNlIGlmIHRyYW5zYWN0aW9ucyBtYWRlIGZyb20gY29udHJhY3QKICAgCSAKCX0KCWZ1bmN0aW9uIHdpdGhkcmF3RXRoZXJGcm9tY29udHJhY3QodWludCBfYW1vdW50aW5ldGgpIHB1YmxpYyBvbmx5T3duZXJ7CiAgICAJdWludCBfYW1vdW50SW53ZWkgPSBfYW1vdW50aW5ldGgubXVsKDEwICoqIDE4KTsKICAgIAlyZXF1aXJlKHRoaXMuYmFsYW5jZSA+IF9hbW91bnRJbndlaSk7CiAgCXJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgCW93bmVyLnRyYW5zZmVyKF9hbW91bnRJbndlaSk7CgkgCgl9CiAgICAgZnVuY3Rpb24gd2l0aGRyYXdUb2tlbnNGcm9tQ29udHJhY3QodWludCBfYW1vdW50T2ZUb2tlbnMpIHB1YmxpYyBvbmx5T3duZXJ7CiAgICAJcmVxdWlyZShiYWxhbmNlc1t0aGlzXSA+IF9hbW91bnRPZlRva2Vucyk7CiAgICAJcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIAliYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZChfYW1vdW50T2ZUb2tlbnMpOyAgICAgICAgICAgICAgICAgICAgCS8vIGFkZHMgdGhlIGFtb3VudCB0byBvd25lcidzIGJhbGFuY2UKICAgIAliYWxhbmNlc1t0aGlzXSA9IGJhbGFuY2VzW3RoaXNdLnN1YihfYW1vdW50T2ZUb2tlbnMpOyAgICAgICAgICAgICAgCS8vIHN1YnRyYWN0cyB0aGUgYW1vdW50IGZyb20gY29udHJhY3QgYmFsYW5jZQogICAJIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIF9hbW91bnRPZlRva2Vucyk7ICAgICAgICAgICAJLy8gZXhlY3V0ZSBhbiBldmVudCByZWZsZWN0aW5nIHRoZSBjaGFuZ2UKCSAKCX0KIAkgCn0='.
	

]
