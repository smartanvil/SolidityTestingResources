Class {
	#name : #SRTcdf89e7f44fcc837630fb4a10387ca81eba6932a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTcdf89e7f44fcc837630fb4a10387ca81eba6932a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgovLy8gQHRpdGxlIE11bHRpIHNpZ25hdHVyZSB0b2tlbiB3YWxsZXQgLSBBbGxvd3MgbXVsdGlwbGUgcGFydGllcyB0byBhcHByb3ZlIHRva2VucyB0cmFuc2ZlcgovLy8gQGF1dGhvciBwb3BvZmUgKEF2YWxvbiBQbGF0Zm9ybSkgLSA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjFlNmU3MTZlNzE3ODdiNWU3ZjY4N2Y3MjcxNzAzMDcwNmIiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgoKY29udHJhY3QgTXVsdGlTaWdUb2tlbldhbGxldCB7CiAgICAvLy8gQGRldiBObyBmYWxsYmFjayBmdW5jdGlvbiB0byBwcmV2ZW50IGV0aGVyIGRlcG9zaXQKCiAgICBhZGRyZXNzIGNvbnN0YW50IHB1YmxpYyBUT0tFTiA9IDB4ZUQyNDc5ODAzOTZCMTAxNjlCQjFkMzZmNmUyNzhlRDE2NzAwYTYwZjsKCiAgICBldmVudCBDb25maXJtYXRpb24oYWRkcmVzcyBzb3VyY2UsIHVpbnQgYWN0aW9uSWQpOwogICAgZXZlbnQgUmV2b2NhdGlvbihhZGRyZXNzIHNvdXJjZSwgdWludCBhY3Rpb25JZCk7CiAgICBldmVudCBOZXdBY3Rpb24odWludCBhY3Rpb25JZCk7CiAgICBldmVudCBFeGVjdXRpb24odWludCBhY3Rpb25JZCk7CiAgICBldmVudCBFeGVjdXRpb25GYWlsdXJlKHVpbnQgYWN0aW9uSWQpOwogICAgZXZlbnQgT3duZXJBZGRpdGlvbihhZGRyZXNzIG93bmVyKTsKICAgIGV2ZW50IE93bmVyV2l0aGRyYXcoYWRkcmVzcyBvd25lcik7CiAgICBldmVudCBRdW9ydW1DaGFuZ2UodWludCBxdW9ydW0pOwoKICAgIGVudW0gQWN0aW9uQ2hvaWNlcyB7IEFkZE93bmVyLCBDaGFuZ2VRdW9ydW0sIERlbGV0ZUFjdGlvbiwgVHJhbnNmZXJUb2tlbiwgV2l0aGRyYXdPd25lcn0KICAgIG1hcHBpbmcgKHVpbnQgPT4gQWN0aW9uKSBwdWJsaWMgYWN0aW9uczsKICAgIG1hcHBpbmcgKHVpbnQgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSkgcHVibGljIGNvbmZpcm1hdGlvbnM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBpc093bmVyOwogICAgYWRkcmVzc1tdIHB1YmxpYyBvd25lcnM7CiAgICB1aW50IHB1YmxpYyBxdW9ydW07CiAgICB1aW50IHB1YmxpYyBhY3Rpb25Db3VudDsKCiAgICBzdHJ1Y3QgQWN0aW9uIHsKICAgICAgICBhZGRyZXNzIGFkZHJlc3NGaWVsZDsKICAgICAgICB1aW50IHZhbHVlOwogICAgICAgIEFjdGlvbkNob2ljZXMgYWN0aW9uVHlwZTsKICAgICAgICBib29sIGV4ZWN1dGVkOwogICAgICAgIGJvb2wgZGVsZXRlZDsKICAgIH0KCiAgICBtb2RpZmllciBvd25lckRlY2xhcmVkKGFkZHJlc3Mgb3duZXIpIHsKICAgICAgICByZXF1aXJlIChpc093bmVyW293bmVyXSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBhY3Rpb25TdWJtaXR0ZWQodWludCBhY3Rpb25JZCkgewogICAgICAgIHJlcXVpcmUgKCAgIGFjdGlvbnNbYWN0aW9uSWRdLmFkZHJlc3NGaWVsZCAhPSAwCiAgICAgICAgICAgICAgICAgfHwgYWN0aW9uc1thY3Rpb25JZF0udmFsdWUgIT0gMCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBjb25maXJtZWQodWludCBhY3Rpb25JZCwgYWRkcmVzcyBvd25lcikgewogICAgICAgIHJlcXVpcmUgKGNvbmZpcm1hdGlvbnNbYWN0aW9uSWRdW293bmVyXSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBub3RDb25maXJtZWQodWludCBhY3Rpb25JZCwgYWRkcmVzcyBvd25lcikgewogICAgICAgIHJlcXVpcmUgKCFjb25maXJtYXRpb25zW2FjdGlvbklkXVtvd25lcl0pOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbm90RXhlY3V0ZWQodWludCBhY3Rpb25JZCkgewogICAgICAgIHJlcXVpcmUgKCFhY3Rpb25zW2FjdGlvbklkXS5leGVjdXRlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBub3REZWxldGVkKHVpbnQgYWN0aW9uSWQpIHsKICAgICAgICByZXF1aXJlICghYWN0aW9uc1thY3Rpb25JZF0uZGVsZXRlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciB2YWxpZFF1b3J1bSh1aW50IG93bmVyQ291bnQsIHVpbnQgX3F1b3J1bSkgewogICAgICAgIHJlcXVpcmUgKF9xdW9ydW0gPD0gb3duZXJDb3VudCAmJiBfcXVvcnVtID4gMCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciB2YWxpZEFjdGlvbihhZGRyZXNzICBhZGRyZXNzRmllbGQsIHVpbnQgdmFsdWUsIEFjdGlvbkNob2ljZXMgYWN0aW9uVHlwZSkgewogICAgICAgIHJlcXVpcmUgKChhY3Rpb25UeXBlID09IEFjdGlvbkNob2ljZXMuQWRkT3duZXIgJiYgYWRkcmVzc0ZpZWxkICE9IDAgJiYgdmFsdWUgPT0gMCkKICAgICAgICAgICAgICAgIHx8IChhY3Rpb25UeXBlID09IEFjdGlvbkNob2ljZXMuQ2hhbmdlUXVvcnVtICYmIGFkZHJlc3NGaWVsZCA9PSAwICYmIHZhbHVlID4gMCkKICAgICAgICAgICAgICAgIHx8IChhY3Rpb25UeXBlID09IEFjdGlvbkNob2ljZXMuRGVsZXRlQWN0aW9uICYmIGFkZHJlc3NGaWVsZCA9PSAwICYmIHZhbHVlID4gMCkKICAgICAgICAgICAgICAgIHx8IChhY3Rpb25UeXBlID09IEFjdGlvbkNob2ljZXMuVHJhbnNmZXJUb2tlbiAmJiBhZGRyZXNzRmllbGQgIT0gMCAmJiB2YWx1ZSA+IDApCiAgICAgICAgICAgICAgICB8fCAoYWN0aW9uVHlwZSA9PSBBY3Rpb25DaG9pY2VzLldpdGhkcmF3T3duZXIgJiYgYWRkcmVzc0ZpZWxkICE9IDAgJiYgdmFsdWUgPT0gMCkpOwogICAgICAgIF87CiAgICB9CgogICAgLyoKICAgICAqIFB1YmxpYyBmdW5jdGlvbnMKICAgICAqLwogICAgLy8vIEBkZXYgQ29udHJhY3QgY29uc3RydWN0b3Igc2V0cyBpbml0aWFsIG93bmVycyBhbmQgcmVxdWlyZWQgbnVtYmVyIG9mIGNvbmZpcm1hdGlvbnMuCiAgICAvLy8gQHBhcmFtIF9vd25lcnMgTGlzdCBvZiBpbml0aWFsIG93bmVycy4KICAgIC8vLyBAcGFyYW0gX3F1b3J1bSBOdW1iZXIgb2YgcmVxdWlyZWQgY29uZmlybWF0aW9ucy4KICAgIGZ1bmN0aW9uIE11bHRpU2lnVG9rZW5XYWxsZXQoYWRkcmVzc1tdIF9vd25lcnMsIHVpbnQgX3F1b3J1bSkKICAgICAgICBwdWJsaWMKICAgICAgICB2YWxpZFF1b3J1bShfb3duZXJzLmxlbmd0aCwgX3F1b3J1bSkKICAgIHsKICAgICAgICBmb3IgKHVpbnQgaT0wOyBpPF9vd25lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcmVxdWlyZSAoIWlzT3duZXJbX293bmVyc1tpXV0gJiYgX293bmVyc1tpXSAhPSAwKTsKICAgICAgICAgICAgaXNPd25lcltfb3duZXJzW2ldXSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIG93bmVycyA9IF9vd25lcnM7CiAgICAgICAgcXVvcnVtID0gX3F1b3J1bTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgdG8gYWRkIGEgbmV3IG93bmVyLiAKICAgIC8vLyBAcGFyYW0gb3duZXIgQWRkcmVzcyBvZiBuZXcgb3duZXIuCiAgICBmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIG93bmVyKQogICAgICAgIHByaXZhdGUKICAgIHsKICAgICAgICByZXF1aXJlKCFpc093bmVyW293bmVyXSk7CiAgICAgICAgaXNPd25lcltvd25lcl0gPSB0cnVlOwogICAgICAgIG93bmVycy5wdXNoKG93bmVyKTsKICAgICAgICBPd25lckFkZGl0aW9uKG93bmVyKTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgdG8gd2l0aGRyYXcgYW4gb3duZXIuIAogICAgLy8vIEBwYXJhbSBvd25lciBBZGRyZXNzIG9mIG93bmVyLgogICAgZnVuY3Rpb24gd2l0aGRyYXdPd25lcihhZGRyZXNzIG93bmVyKQogICAgICAgIHByaXZhdGUKICAgIHsKICAgICAgICByZXF1aXJlIChpc093bmVyW293bmVyXSk7CiAgICAgICAgcmVxdWlyZSAob3duZXJzLmxlbmd0aCAtIDEgPj0gcXVvcnVtKTsKICAgICAgICBpc093bmVyW293bmVyXSA9IGZhbHNlOwogICAgICAgIGZvciAodWludCBpPTA7IGk8b3duZXJzLmxlbmd0aCAtIDE7IGkrKykKICAgICAgICAgICAgaWYgKG93bmVyc1tpXSA9PSBvd25lcikgewogICAgICAgICAgICAgICAgb3duZXJzW2ldID0gb3duZXJzW293bmVycy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgb3duZXJzLmxlbmd0aCAtPSAxOwogICAgICAgIE93bmVyV2l0aGRyYXcob3duZXIpOwogICAgfQoKICAgIC8vLyBAZGV2IEFsbG93cyB0byBjaGFuZ2UgdGhlIG51bWJlciBvZiByZXF1aXJlZCBjb25maXJtYXRpb25zLgogICAgLy8vIEBwYXJhbSBfcXVvcnVtIE51bWJlciBvZiByZXF1aXJlZCBjb25maXJtYXRpb25zLgogICAgZnVuY3Rpb24gY2hhbmdlUXVvcnVtKHVpbnQgX3F1b3J1bSkKICAgICAgICBwcml2YXRlCiAgICB7CiAgICAgICAgcmVxdWlyZSAoX3F1b3J1bSA+IDAgJiYgX3F1b3J1bSA8PSBvd25lcnMubGVuZ3RoKTsKICAgICAgICBxdW9ydW0gPSBfcXVvcnVtOwogICAgICAgIFF1b3J1bUNoYW5nZShfcXVvcnVtKTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgdG8gZGVsZXRlIGEgcHJldmlvdXMgYWN0aW9uIG5vdCBleGVjdXRlZAogICAgLy8vIEBwYXJhbSBfYWN0aW9uSWQgTnVtYmVyIG9mIHJlcXVpcmVkIGNvbmZpcm1hdGlvbnMuCiAgICBmdW5jdGlvbiBkZWxldGVBY3Rpb24odWludCBfYWN0aW9uSWQpCiAgICAgICAgcHJpdmF0ZQogICAgICAgIG5vdEV4ZWN1dGVkKF9hY3Rpb25JZCkKICAgIHsKICAgICAgICBhY3Rpb25zW19hY3Rpb25JZF0uZGVsZXRlZCA9IHRydWU7CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIHRvIGRlbGV0ZSBhIHByZXZpb3VzIGFjdGlvbiBub3QgZXhlY3V0ZWQKICAgIC8vLyBAcGFyYW0gX2Rlc3RpbmF0aW9uIGFkZHJlc3MgdGhhdCByZWNlaXZlIHRva2Vucy4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIE51bWJlciBvZiB0b2tlbnMuCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRva2VuKGFkZHJlc3MgX2Rlc3RpbmF0aW9uLCB1aW50IF92YWx1ZSkKICAgICAgICBwcml2YXRlCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBFUkMyMEJhc2ljIEVSQzIwQ29udHJhY3QgPSBFUkMyMEJhc2ljKFRPS0VOKTsKICAgICAgICByZXR1cm4gRVJDMjBDb250cmFjdC50cmFuc2ZlcihfZGVzdGluYXRpb24sIF92YWx1ZSk7CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIGFuIG93bmVyIHRvIHN1Ym1pdCBhbmQgY29uZmlybSBhIHRyYW5zYWN0aW9uLgogICAgLy8vIEBwYXJhbSBhZGRyZXNzRmllbGQgQWN0aW9uIHRhcmdldCBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSB2YWx1ZSBOdW1iZXIgb2YgdG9rZW4gLyBuZXcgcXVvcnVtIHRvIHJlYWNoLgogICAgLy8vIEByZXR1cm4gUmV0dXJucyB0cmFuc2FjdGlvbiBJRC4KICAgIGZ1bmN0aW9uIHN1Ym1pdEFjdGlvbihhZGRyZXNzIGFkZHJlc3NGaWVsZCwgdWludCB2YWx1ZSwgQWN0aW9uQ2hvaWNlcyBhY3Rpb25UeXBlKQogICAgICAgIHB1YmxpYwogICAgICAgIG93bmVyRGVjbGFyZWQobXNnLnNlbmRlcikKICAgICAgICB2YWxpZEFjdGlvbihhZGRyZXNzRmllbGQsIHZhbHVlLCBhY3Rpb25UeXBlKQogICAgICAgIHJldHVybnMgKHVpbnQgYWN0aW9uSWQpCiAgICB7CiAgICAgICAgYWN0aW9uSWQgPSBhZGRBY3Rpb24oYWRkcmVzc0ZpZWxkLCB2YWx1ZSwgYWN0aW9uVHlwZSk7CiAgICAgICAgY29uZmlybUFjdGlvbihhY3Rpb25JZCk7CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIGFuIG93bmVyIHRvIGNvbmZpcm0gYSB0cmFuc2FjdGlvbi4KICAgIC8vLyBAcGFyYW0gYWN0aW9uSWQgQWN0aW9uIElELgogICAgZnVuY3Rpb24gY29uZmlybUFjdGlvbih1aW50IGFjdGlvbklkKQogICAgICAgIHB1YmxpYwogICAgICAgIG93bmVyRGVjbGFyZWQobXNnLnNlbmRlcikKICAgICAgICBhY3Rpb25TdWJtaXR0ZWQoYWN0aW9uSWQpCiAgICAgICAgbm90Q29uZmlybWVkKGFjdGlvbklkLCBtc2cuc2VuZGVyKQogICAgewogICAgICAgIGNvbmZpcm1hdGlvbnNbYWN0aW9uSWRdW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgICBDb25maXJtYXRpb24obXNnLnNlbmRlciwgYWN0aW9uSWQpOwogICAgfQoKICAgIC8vLyBAZGV2IEFsbG93cyBhbiBvd25lciB0byByZXZva2UgYSBjb25maXJtYXRpb24gZm9yIGEgdHJhbnNhY3Rpb24uCiAgICAvLy8gQHBhcmFtIGFjdGlvbklkIEFjdGlvbiBJRC4KICAgIGZ1bmN0aW9uIHJldm9rZUNvbmZpcm1hdGlvbih1aW50IGFjdGlvbklkKQogICAgICAgIHB1YmxpYwogICAgICAgIG93bmVyRGVjbGFyZWQobXNnLnNlbmRlcikKICAgICAgICBjb25maXJtZWQoYWN0aW9uSWQsIG1zZy5zZW5kZXIpCiAgICAgICAgbm90RXhlY3V0ZWQoYWN0aW9uSWQpCiAgICB7CiAgICAgICAgY29uZmlybWF0aW9uc1thY3Rpb25JZF1bbXNnLnNlbmRlcl0gPSBmYWxzZTsKICAgICAgICBSZXZvY2F0aW9uKG1zZy5zZW5kZXIsIGFjdGlvbklkKTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgYW55b25lIHRvIGV4ZWN1dGUgYSBjb25maXJtZWQgdHJhbnNhY3Rpb24uCiAgICAvLy8gQHBhcmFtIGFjdGlvbklkIEFjdGlvbiBJRC4KICAgIGZ1bmN0aW9uIGV4ZWN1dGVBY3Rpb24odWludCBhY3Rpb25JZCkKICAgICAgICBwdWJsaWMKICAgICAgICBvd25lckRlY2xhcmVkKG1zZy5zZW5kZXIpCiAgICAgICAgYWN0aW9uU3VibWl0dGVkKGFjdGlvbklkKQogICAgICAgIG5vdEV4ZWN1dGVkKGFjdGlvbklkKQogICAgICAgIG5vdERlbGV0ZWQoYWN0aW9uSWQpCiAgICB7CiAgICAgICAgaWYgKGlzQ29uZmlybWVkKGFjdGlvbklkKSkgewogICAgICAgICAgICBBY3Rpb24gbWVtb3J5IGFjdGlvbiA9IGFjdGlvbnNbYWN0aW9uSWRdOwogICAgICAgICAgICBhY3Rpb24uZXhlY3V0ZWQgPSB0cnVlOwogICAgICAgICAgICBpZiAoYWN0aW9uLmFjdGlvblR5cGUgPT0gQWN0aW9uQ2hvaWNlcy5BZGRPd25lcikKICAgICAgICAgICAgICAgIGFkZE93bmVyKGFjdGlvbi5hZGRyZXNzRmllbGQpOwogICAgICAgICAgICBlbHNlIGlmIChhY3Rpb24uYWN0aW9uVHlwZSA9PSBBY3Rpb25DaG9pY2VzLkNoYW5nZVF1b3J1bSkKICAgICAgICAgICAgICAgIGNoYW5nZVF1b3J1bShhY3Rpb24udmFsdWUpOwogICAgICAgICAgICBlbHNlIGlmIChhY3Rpb24uYWN0aW9uVHlwZSA9PSBBY3Rpb25DaG9pY2VzLkRlbGV0ZUFjdGlvbikKICAgICAgICAgICAgICAgIGRlbGV0ZUFjdGlvbihhY3Rpb24udmFsdWUpOwogICAgICAgICAgICBlbHNlIGlmIChhY3Rpb24uYWN0aW9uVHlwZSA9PSBBY3Rpb25DaG9pY2VzLlRyYW5zZmVyVG9rZW4pCiAgICAgICAgICAgICAgICBpZiAodHJhbnNmZXJUb2tlbihhY3Rpb24uYWRkcmVzc0ZpZWxkLCBhY3Rpb24udmFsdWUpKQogICAgICAgICAgICAgICAgICAgIEV4ZWN1dGlvbihhY3Rpb25JZCk7CiAgICAgICAgICAgICAgICBlbHNlIHsgICAgCiAgICAgICAgICAgICAgICAgICAgRXhlY3V0aW9uRmFpbHVyZShhY3Rpb25JZCk7CiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmV4ZWN1dGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGFjdGlvbi5hY3Rpb25UeXBlID09IEFjdGlvbkNob2ljZXMuV2l0aGRyYXdPd25lcikKICAgICAgICAgICAgICAgIHdpdGhkcmF3T3duZXIoYWN0aW9uLmFkZHJlc3NGaWVsZCk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSBjb25maXJtYXRpb24gc3RhdHVzIG9mIGEgdHJhbnNhY3Rpb24uCiAgICAvLy8gQHBhcmFtIGFjdGlvbklkIEFjdGlvbiBJRC4KICAgIC8vLyBAcmV0dXJuIENvbmZpcm1hdGlvbiBzdGF0dXMuCiAgICBmdW5jdGlvbiBpc0NvbmZpcm1lZCh1aW50IGFjdGlvbklkKQogICAgICAgIHB1YmxpYwogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICB1aW50IGNvdW50ID0gMDsKICAgICAgICBmb3IgKHVpbnQgaT0wOyBpPG93bmVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoY29uZmlybWF0aW9uc1thY3Rpb25JZF1bb3duZXJzW2ldXSkKICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7CiAgICAgICAgICAgIGlmIChjb3VudCA9PSBxdW9ydW0pCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vLyBAZGV2IEFkZHMgYSBuZXcgYWN0aW9uIHRvIHRoZSB0cmFuc2FjdGlvbiBsaXN0LCBpZiBhY3Rpb24gZG9lcyBub3QgZXhpc3QgeWV0LgogICAgLy8vIEBwYXJhbSBhZGRyZXNzRmllbGQgYWRkcmVzcyB0byBzZW5kIHRva2VuIG9yIHRvbyBhZGQgb3Igd2l0aGFkcmF3IGFzIG93bmVyLgogICAgLy8vIEBwYXJhbSB2YWx1ZSBudW1iZXIgb2YgdG9rZW5zICh1c2VmdWwgb25seSBmb3IgdG9rZW4gdHJhbnNmZXIpLgogICAgLy8vIEByZXR1cm4gUmV0dXJucyB0cmFuc2FjdGlvbiBJRC4KICAgIGZ1bmN0aW9uIGFkZEFjdGlvbihhZGRyZXNzIGFkZHJlc3NGaWVsZCwgdWludCB2YWx1ZSwgQWN0aW9uQ2hvaWNlcyBhY3Rpb25UeXBlKQogICAgICAgIHByaXZhdGUKICAgICAgICByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIGFjdGlvbkNvdW50ICs9IDE7CiAgICAgICAgdWludCBhY3Rpb25JZCA9IGFjdGlvbkNvdW50OwogICAgICAgIGFjdGlvbnNbYWN0aW9uSWRdID0gQWN0aW9uKHsKICAgICAgICAgICAgYWRkcmVzc0ZpZWxkOiBhZGRyZXNzRmllbGQsCiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgYWN0aW9uVHlwZTogYWN0aW9uVHlwZSwKICAgICAgICAgICAgZXhlY3V0ZWQ6IGZhbHNlLAogICAgICAgICAgICBkZWxldGVkOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIE5ld0FjdGlvbihhY3Rpb25JZCk7CiAgICAgICAgcmV0dXJuIGFjdGlvbklkOwogICAgfQoKICAgIC8vLyBAZGV2IFJldHVybnMgbnVtYmVyIG9mIGNvbmZpcm1hdGlvbnMgb2YgYW4gYWN0aW9uLgogICAgLy8vIEBwYXJhbSBhY3Rpb25JZCBBY3Rpb24gSUQuCiAgICAvLy8gQHJldHVybiBOdW1iZXIgb2YgY29uZmlybWF0aW9ucy4KICAgIGZ1bmN0aW9uIGdldENvbmZpcm1hdGlvbkNvdW50KHVpbnQgYWN0aW9uSWQpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50IGNvdW50KQogICAgewogICAgICAgIGZvciAodWludCBpPTA7IGk8b3duZXJzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoY29uZmlybWF0aW9uc1thY3Rpb25JZF1bb3duZXJzW2ldXSkKICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7CiAgICB9CgogICAgLy8vIEBkZXYgUmV0dXJucyB0b3RhbCBudW1iZXIgb2YgYWN0aW9ucyBhZnRlciBmaWxlcnMgYXJlIGFwcGxpZWQuCiAgICAvLy8gQHBhcmFtIHBlbmRpbmcgSW5jbHVkZSBwZW5kaW5nIGFjdGlvbnMuCiAgICAvLy8gQHBhcmFtIGV4ZWN1dGVkIEluY2x1ZGUgZXhlY3V0ZWQgYWN0aW9ucy4KICAgIC8vLyBAcmV0dXJuIFRvdGFsIG51bWJlciBvZiBhY3Rpb25zIGFmdGVyIGZpbHRlcnMgYXJlIGFwcGxpZWQuCiAgICBmdW5jdGlvbiBnZXRBY3Rpb25Db3VudChib29sIHBlbmRpbmcsIGJvb2wgZXhlY3V0ZWQsIGJvb2wgZXhjZXB0RGVsZXRlZCkKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQgY291bnQpCiAgICB7CiAgICAgICAgZm9yICh1aW50IGk9MDsgaTxhY3Rpb25Db3VudDsgaSsrKQogICAgICAgICAgICBpZiAoICAgKChwZW5kaW5nICYmICFhY3Rpb25zW2ldLmV4ZWN1dGVkKQogICAgICAgICAgICAgICAgICAgIHx8IChleGVjdXRlZCAmJiBhY3Rpb25zW2ldLmV4ZWN1dGVkKSkKICAgICAgICAgICAgICAgICYmICghZXhjZXB0RGVsZXRlZCB8fCAhYWN0aW9uc1tpXS5kZWxldGVkKSkKICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7CiAgICB9CgogICAgLy8vIEBkZXYgUmV0dXJucyBsaXN0IG9mIG93bmVycy4KICAgIC8vLyBAcmV0dXJuIExpc3Qgb2Ygb3duZXIgYWRkcmVzc2VzLgogICAgZnVuY3Rpb24gZ2V0T3duZXJzKCkKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKGFkZHJlc3NbXSkKICAgIHsKICAgICAgICByZXR1cm4gb3duZXJzOwogICAgfQoKICAgIC8vLyBAZGV2IFJldHVybnMgYXJyYXkgd2l0aCBvd25lciBhZGRyZXNzZXMsIHdoaWNoIGNvbmZpcm1lZCB0cmFuc2FjdGlvbi4KICAgIC8vLyBAcGFyYW0gYWN0aW9uSWQgQWN0aW9uIElELgogICAgLy8vIEByZXR1cm4gUmV0dXJucyBhcnJheSBvZiBvd25lciBhZGRyZXNzZXMuCiAgICBmdW5jdGlvbiBnZXRDb25maXJtYXRpb25zKHVpbnQgYWN0aW9uSWQpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zIChhZGRyZXNzW10gX2NvbmZpcm1hdGlvbnMpCiAgICB7CiAgICAgICAgYWRkcmVzc1tdIG1lbW9yeSBjb25maXJtYXRpb25zVGVtcCA9IG5ldyBhZGRyZXNzW10ob3duZXJzLmxlbmd0aCk7CiAgICAgICAgdWludCBjb3VudCA9IDA7CiAgICAgICAgdWludCBpOwogICAgICAgIGZvciAoaT0wOyBpPG93bmVycy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKGNvbmZpcm1hdGlvbnNbYWN0aW9uSWRdW293bmVyc1tpXV0pIHsKICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvbnNUZW1wW2NvdW50XSA9IG93bmVyc1tpXTsKICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7CiAgICAgICAgICAgIH0KICAgICAgICBfY29uZmlybWF0aW9ucyA9IG5ldyBhZGRyZXNzW10oY291bnQpOwogICAgICAgIGZvciAoaT0wOyBpPGNvdW50OyBpKyspCiAgICAgICAgICAgIF9jb25maXJtYXRpb25zW2ldID0gY29uZmlybWF0aW9uc1RlbXBbaV07CiAgICB9CgogICAgLy8vIEBkZXYgUmV0dXJucyBsaXN0IG9mIGFjdGlvbiBJRHMgaW4gZGVmaW5lZCByYW5nZS4KICAgIC8vLyBAcGFyYW0gcGVuZGluZyBJbmNsdWRlIHBlbmRpbmcgYWN0aW9ucy4KICAgIC8vLyBAcGFyYW0gZXhlY3V0ZWQgSW5jbHVkZSBleGVjdXRlZCBhY3Rpb25zLgogICAgLy8vIEBwYXJhbSBleGNlcHREZWxldGVkIEV4Y2x1ZGUgZGVsZXRlZCBhY3Rpb25zLgogICAgLy8vIEByZXR1cm4gUmV0dXJucyBhcnJheSBvZiB0cmFuc2FjdGlvbiBJRHMuCiAgICBmdW5jdGlvbiBnZXRBY3Rpb25JZHMoYm9vbCBwZW5kaW5nLCBib29sIGV4ZWN1dGVkLCBib29sIGV4Y2VwdERlbGV0ZWQpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50W10gbWVtb3J5KQogICAgewogICAgICAgIHVpbnRbXSBtZW1vcnkgYWN0aW9uSWRzOwogICAgICAgIHVpbnQgY291bnQgPSAwOwogICAgICAgIHVpbnQgaTsKICAgICAgICBmb3IgKGk9MDsgaTxhY3Rpb25Db3VudDsgaSsrKQogICAgICAgICAgICBpZiAoKChwZW5kaW5nICYmICFhY3Rpb25zW2ldLmV4ZWN1dGVkKQogICAgICAgICAgICAgICAgIHx8IChleGVjdXRlZCAmJiBhY3Rpb25zW2ldLmV4ZWN1dGVkKSkKICAgICAgICAgICAgICAgICYmICghZXhjZXB0RGVsZXRlZCB8fCAhYWN0aW9uc1tpXS5kZWxldGVkKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYWN0aW9uSWRzW2NvdW50XSA9IGk7CiAgICAgICAgICAgICAgICBjb3VudCArPSAxOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9'.
	

]
