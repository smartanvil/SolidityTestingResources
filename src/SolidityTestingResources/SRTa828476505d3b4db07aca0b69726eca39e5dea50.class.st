Class {
	#name : #SRTa828476505d3b4db07aca0b69726eca39e5dea50,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa828476505d3b4db07aca0b69726eca39e5dea50 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CgogIGFkZHJlc3MgcHVibGljIGNvbnRyYWN0T3duZXI7CgogIGV2ZW50IENvbnRyYWN0T3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgY29udHJhY3RPd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBtb2RpZmllciBvbmx5Q29udHJhY3RPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cmFjdE93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckNvbnRyYWN0T3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWMgb25seUNvbnRyYWN0T3duZXIgewogICAgcmVxdWlyZShfbmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBDb250cmFjdE93bmVyc2hpcFRyYW5zZmVycmVkKGNvbnRyYWN0T3duZXIsIF9uZXdPd25lcik7CiAgICBjb250cmFjdE93bmVyID0gX25ld093bmVyOwogIH0KICAKICBmdW5jdGlvbiBwYXlvdXRGcm9tQ29udHJhY3QoKSBwdWJsaWMgb25seUNvbnRyYWN0T3duZXIgewogICAgICBjb250cmFjdE93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfSAgCgp9CgovLy8gQHRpdGxlIEludGVyZmFjZSBmb3IgY29udHJhY3RzIGNvbmZvcm1pbmcgdG8gRVJDLTcyMTogTm9uLUZ1bmdpYmxlIFRva2VucwovLy8gQGF1dGhvciBEaWV0ZXIgU2hpcmxleSA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjdmMWIxYTBiMWEzZjFlMDcxNjEwMTIwNTFhMTE1MTFjMTAiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PiAoaHR0cHM6Ly9naXRodWIuY29tL2RldGUpCmNvbnRyYWN0IEVSQzcyMSB7CiAgLy8gUmVxdWlyZWQgbWV0aG9kcwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBhZGRyKTsKICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgYXBwcm92ZWQsIHVpbnQyNTYgdG9rZW5JZCk7CgogIC8vIE9wdGlvbmFsCiAgLy8gZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBuYW1lKTsKICAvLyBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgc3ltYm9sKTsKICAvLyBmdW5jdGlvbiB0b2tlbk9mT3duZXJCeUluZGV4KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9pbmRleCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2IHRva2VuSWQpOwogIC8vIGZ1bmN0aW9uIHRva2Vuc09mT3duZXIoYWRkcmVzcyBfb3duZXIpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NltdIHRva2VuSWRzKTsKICAvLyBmdW5jdGlvbiB0b2tlbk1ldGFkYXRhKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBpbmZvVXJsKTsKfQoKY29udHJhY3QgRG9nZ3lFdGhQaWNzIGlzIEVSQzcyMSwgT3duYWJsZSB7CgogIGV2ZW50IERvZ2d5Q3JlYXRlZCh1aW50MjU2IHRva2VuSWQsIHN0cmluZyBuYW1lLCBhZGRyZXNzIG93bmVyKTsKICBldmVudCBUb2tlblNvbGQodWludDI1NiB0b2tlbklkLCB1aW50MjU2IG9sZFByaWNlLCB1aW50MjU2IG5ld1ByaWNlLCBhZGRyZXNzIHByZXZPd25lciwgYWRkcmVzcyB3aW5uZXIsIHN0cmluZyBuYW1lKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CgogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgTkFNRSA9ICJEb2dneUV0aFBpY3MiOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1lNQk9MID0gIkRvZ2d5UGljc1Rva2VuIjsKCiAgdWludDI1NiBwcml2YXRlIHN0YXJ0aW5nUHJpY2UgPSAwLjAxIGV0aGVyOwoKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBkb2dneUlkVG9Pd25lcjsKCiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgZG9nZ3lJZFRvRGl2czsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIG93bmVyc2hpcFRva2VuQ291bnQ7CgogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGRvZ2d5SWRUb0FwcHJvdmVkOwoKICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgZG9nZ3lJZFRvUHJpY2U7CgogIC8qKiogREFUQVRZUEVTICoqKi8KICBzdHJ1Y3QgRG9nZ3kgewogICAgc3RyaW5nIG5hbWU7CiAgfQoKICBEb2dneVtdIHByaXZhdGUgZG9nZ2llczsKCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsgLy9FUkM3MjEKICAgIC8vIENhbGxlciBtdXN0IG93biB0b2tlbi4KICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKICAgIGRvZ2d5SWRUb0FwcHJvdmVkW190b2tlbklkXSA9IF90bzsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsgLy9FUkM3MjEKICAgIHJldHVybiBvd25lcnNoaXBUb2tlbkNvdW50W19vd25lcl07CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVEb2dneVRva2VuKHN0cmluZyBfbmFtZSwgdWludDI1NiBfcHJpY2UpIHByaXZhdGUgewogICAgX2NyZWF0ZURvZ2d5KF9uYW1lLCBtc2cuc2VuZGVyLCBfcHJpY2UpOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlM0RvZ2dpZXNUb2tlbnMoKSBwdWJsaWMgb25seUNvbnRyYWN0T3duZXIgewogICAgIHVpbnQyNTYgdG90YWxEb2dnaWVzID0gdG90YWxTdXBwbHkoKTsKCSAKCSByZXF1aXJlICh0b3RhbERvZ2dpZXM8MSk7IC8vIG9ubHkgMyB0b2tlbnMgZm9yIHN0YXJ0CgkgCgkgZm9yICh1aW50OCBpPTE7IGk8PTM7IGkrKykKCQlfY3JlYXRlRG9nZ3koIkV0aERvZ2d5IiwgYWRkcmVzcyh0aGlzKSwgc3RhcnRpbmdQcmljZSk7CgkKICB9CiAgCiAgZnVuY3Rpb24gZ2V0RG9nZ3kodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIGRvZ2d5TmFtZSwgdWludDI1NiBzZWxsaW5nUHJpY2UsIGFkZHJlc3Mgb3duZXIpIHsKICAgIERvZ2d5IHN0b3JhZ2UgZG9nZ3kgPSBkb2dnaWVzW190b2tlbklkXTsKICAgIGRvZ2d5TmFtZSA9IGRvZ2d5Lm5hbWU7CiAgICBzZWxsaW5nUHJpY2UgPSBkb2dneUlkVG9QcmljZVtfdG9rZW5JZF07CiAgICBvd25lciA9IGRvZ2d5SWRUb093bmVyW190b2tlbklkXTsKICB9CgogIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsgLy9FUkM3MjEKICAgIHJldHVybiBOQU1FOwogIH0KCiAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIG93bmVyKSB7IC8vRVJDNzIxCiAgICBvd25lciA9IGRvZ2d5SWRUb093bmVyW190b2tlbklkXTsKICAgIHJlcXVpcmUob3duZXIgIT0gYWRkcmVzcygwKSk7CiAgfQoKICAvLyBBbGxvd3Mgc29tZW9uZSB0byBzZW5kIGV0aGVyIGFuZCBvYnRhaW4gdGhlIHRva2VuCiAgZnVuY3Rpb24gcHVyY2hhc2UodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHBheWFibGUgewogICAgYWRkcmVzcyBvbGRPd25lciA9IGRvZ2d5SWRUb093bmVyW190b2tlbklkXTsKICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwoKICAgIHVpbnQyNTYgc2VsbGluZ1ByaWNlID0gZG9nZ3lJZFRvUHJpY2VbX3Rva2VuSWRdOwoKICAgIHJlcXVpcmUob2xkT3duZXIgIT0gbmV3T3duZXIpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwobmV3T3duZXIpKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHNlbGxpbmdQcmljZSk7CgogICAgdWludDI1NiBwYXltZW50ID0gdWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgOSksIDEwKSk7IC8vOTAlIHRvIHByZXZpb3VzIG93bmVyCiAgICB1aW50MjU2IGRpdnNfcGF5bWVudCA9IHVpbnQyNTYoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsaW5nUHJpY2UsIDEpLCAyMCkpOyAvLzUlIGRpdnMKICAgIAoJYWRkcmVzcyBkaXZzX2FkZHJlc3MgPSBkb2dneUlkVG9EaXZzW190b2tlbklkXTsKCQogICAgLy8gTmV4dCBwcmljZSB3aWxsIHJpc2Ugb24gNTAlCiAgICBkb2dneUlkVG9QcmljZVtfdG9rZW5JZF0gPSB1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCAzKSwgMikpOyAKCiAgICBfdHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfdG9rZW5JZCk7CgogICAgLy8gUGF5IHByZXZpb3VzIHRva2VuT3duZXIgaWYgb3duZXIgaXMgbm90IGNvbnRyYWN0CiAgICBpZiAob2xkT3duZXIgIT0gYWRkcmVzcyh0aGlzKSkgewogICAgICBvbGRPd25lci50cmFuc2ZlcihwYXltZW50KTsgLy8KICAgIH0KCiAgICAvLyBQYXkgd2lubmVyIHRva2VuT3duZXIgaWYgb3duZXIgaXMgbm90IGNvbnRyYWN0CiAgICBpZiAoZGl2c19hZGRyZXNzICE9IGFkZHJlc3ModGhpcykpIHsKICAgICAgZGl2c19hZGRyZXNzLnRyYW5zZmVyKGRpdnNfcGF5bWVudCk7IC8vCiAgICB9CgogICAgVG9rZW5Tb2xkKF90b2tlbklkLCBzZWxsaW5nUHJpY2UsIGRvZ2d5SWRUb1ByaWNlW190b2tlbklkXSwgb2xkT3duZXIsIG5ld093bmVyLCBkb2dnaWVzW190b2tlbklkXS5uYW1lKTsKCQogICAgaWYgKG1zZy52YWx1ZSA+IHNlbGxpbmdQcmljZSkgeyAvL2lmIGV4Y2VzcyBwYXkKCSAgICB1aW50MjU2IHB1cmNoYXNlRXhjZXNzID0gU2FmZU1hdGguc3ViKG1zZy52YWx1ZSwgc2VsbGluZ1ByaWNlKTsKCQltc2cuc2VuZGVyLnRyYW5zZmVyKHB1cmNoYXNlRXhjZXNzKTsKCX0KICB9CiAgCiAgZnVuY3Rpb24gY2hhbmdlRG9nZ3kodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHBheWFibGUgeyAvLwogICAgcmVxdWlyZShkb2dneUlkVG9QcmljZVtfdG9rZW5JZF0gPj0gMSBldGhlcik7CgkKICAgIHJlcXVpcmUoZG9nZ3lJZFRvT3duZXJbX3Rva2VuSWRdID09IG1zZy5zZW5kZXIgJiYgbXNnLnZhbHVlID09IDIwIGZpbm5leSk7IC8vdGF4IDAuMDJldGggZm9yIGNoYW5nZQoJCgl1aW50MjU2IG5ld1ByaWNlMSA9ICB1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoZG9nZ3lJZFRvUHJpY2VbX3Rva2VuSWRdLCAzKSwgMTApKTsgLy8zMCUKCXVpbnQyNTYgbmV3UHJpY2UyID0gIHVpbnQyNTYoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChkb2dneUlkVG9QcmljZVtfdG9rZW5JZF0sIDcpLCAxMCkpOyAvLzcwJQogICAgCiAgICAvL2dldCB0d28gZG9nZ2llcyB3aXRoaW4gb25lCgljcmVhdGVEb2dneVRva2VuKCJFdGhEb2dneSIsIG5ld1ByaWNlMSk7CgljcmVhdGVEb2dneVRva2VuKCJFdGhEb2dneSIsIG5ld1ByaWNlMik7CgkKCWRvZ2d5SWRUb093bmVyW190b2tlbklkXSA9IGFkZHJlc3ModGhpcyk7IC8vcmV0dXJuIGNoYW5nZWQgZG9nZ3kgdG8gZG9nZ3lwaWNzCglkb2dneUlkVG9QcmljZVtfdG9rZW5JZF0gPSAxMCBmaW5uZXk7CgkgCiAgfQoKCiAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7IC8vRVJDNzIxCiAgICByZXR1cm4gU1lNQk9MOwogIH0KCgogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsgLy9FUkM3MjEKICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwogICAgYWRkcmVzcyBvbGRPd25lciA9IGRvZ2d5SWRUb093bmVyW190b2tlbklkXTsKCiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChuZXdPd25lcikpOwogICAgcmVxdWlyZShfYXBwcm92ZWQobmV3T3duZXIsIF90b2tlbklkKSk7CgogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gcHJpY2VPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHByaWNlKSB7IC8vZm9yIHdlYiBzaXRlIHZpZXcKICAgIHJldHVybiBkb2dneUlkVG9QcmljZVtfdG9rZW5JZF07CiAgfQoKICBmdW5jdGlvbiBBTExvd25lcnNBTkRwcmljZXModWludDI1NiBfc3RhcnREb2dneUlkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzW10gb3duZXJzLCBhZGRyZXNzW10gZGl2cywgdWludDI1NltdIHByaWNlcykgeyAvL2ZvciB3ZWIgc2l0ZSB2aWV3CgkKCXVpbnQyNTYgdG90YWxEb2dnaWVzID0gdG90YWxTdXBwbHkoKTsKCQogICAgaWYgKHRvdGFsRG9nZ2llcyA9PSAwIHx8IF9zdGFydERvZ2d5SWQgPj0gdG90YWxEb2dnaWVzKSB7CiAgICAgICAgLy8gUmV0dXJuIGFuIGVtcHR5IGFycmF5CiAgICAgIHJldHVybiAobmV3IGFkZHJlc3NbXSgwKSxuZXcgYWRkcmVzc1tdKDApLG5ldyB1aW50MjU2W10oMCkpOwogICAgfQoJCgl1aW50MjU2IGluZGV4VG87CglpZiAodG90YWxEb2dnaWVzID4gX3N0YXJ0RG9nZ3lJZCsxMDAwKQoJCWluZGV4VG8gPSBfc3RhcnREb2dneUlkICsgMTAwMDsKCWVsc2UgCQoJCWluZGV4VG8gPSB0b3RhbERvZ2dpZXM7CgkJCiAgICB1aW50MjU2IHRvdGFsUmVzdWx0RG9nZ2llcyA9IGluZGV4VG8gLSBfc3RhcnREb2dneUlkOwkJCgkJCglhZGRyZXNzW10gbWVtb3J5IG93bmVyc19yZXMgPSBuZXcgYWRkcmVzc1tdKHRvdGFsUmVzdWx0RG9nZ2llcyk7CglhZGRyZXNzW10gbWVtb3J5IGRpdnNfcmVzID0gbmV3IGFkZHJlc3NbXSh0b3RhbFJlc3VsdERvZ2dpZXMpOwoJdWludDI1NltdIG1lbW9yeSBwcmljZXNfcmVzID0gbmV3IHVpbnQyNTZbXSh0b3RhbFJlc3VsdERvZ2dpZXMpOwoJCglmb3IgKHVpbnQyNTYgZG9nZ3lJZCA9IF9zdGFydERvZ2d5SWQ7IGRvZ2d5SWQgPCBpbmRleFRvOyBkb2dneUlkKyspIHsKCSAgb3duZXJzX3Jlc1tkb2dneUlkIC0gX3N0YXJ0RG9nZ3lJZF0gPSBkb2dneUlkVG9Pd25lcltkb2dneUlkXTsKCSAgZGl2c19yZXNbZG9nZ3lJZCAtIF9zdGFydERvZ2d5SWRdID0gZG9nZ3lJZFRvRGl2c1tkb2dneUlkXTsKCSAgcHJpY2VzX3Jlc1tkb2dneUlkIC0gX3N0YXJ0RG9nZ3lJZF0gPSBkb2dneUlkVG9QcmljZVtkb2dneUlkXTsKCX0KCQoJcmV0dXJuIChvd25lcnNfcmVzLCBkaXZzX3JlcywgcHJpY2VzX3Jlcyk7CiAgfQogIAogIGZ1bmN0aW9uIHRva2Vuc09mT3duZXIoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NltdIG93bmVyVG9rZW4pIHsgLy9FUkM3MjEgZm9yIHdlYiBzaXRlIHZpZXcKICAgIHVpbnQyNTYgdG9rZW5Db3VudCA9IGJhbGFuY2VPZihfb3duZXIpOwogICAgaWYgKHRva2VuQ291bnQgPT0gMCkgewogICAgICAgIC8vIFJldHVybiBhbiBlbXB0eSBhcnJheQogICAgICByZXR1cm4gbmV3IHVpbnQyNTZbXSgwKTsKICAgIH0gZWxzZSB7CiAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXSh0b2tlbkNvdW50KTsKICAgICAgdWludDI1NiB0b3RhbERvZ2dpZXMgPSB0b3RhbFN1cHBseSgpOwogICAgICB1aW50MjU2IHJlc3VsdEluZGV4ID0gMDsKCiAgICAgIHVpbnQyNTYgZG9nZ3lJZDsKICAgICAgZm9yIChkb2dneUlkID0gMDsgZG9nZ3lJZCA8PSB0b3RhbERvZ2dpZXM7IGRvZ2d5SWQrKykgewogICAgICAgIGlmIChkb2dneUlkVG9Pd25lcltkb2dneUlkXSA9PSBfb3duZXIpIHsKICAgICAgICAgIHJlc3VsdFtyZXN1bHRJbmRleF0gPSBkb2dneUlkOwogICAgICAgICAgcmVzdWx0SW5kZXgrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiB0b3RhbCkgeyAvL0VSQzcyMQogICAgcmV0dXJuIGRvZ2dpZXMubGVuZ3RoOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7IC8vRVJDNzIxCiAgICByZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChfdG8pKTsKCglfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7IC8vRVJDNzIxCiAgICByZXF1aXJlKF9vd25zKF9mcm9tLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYXBwcm92ZWQoX3RvLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CgogICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICB9CgoKICAvKiBQUklWQVRFIEZVTkNUSU9OUyAqLwogIGZ1bmN0aW9uIF9hZGRyZXNzTm90TnVsbChhZGRyZXNzIF90bykgcHJpdmF0ZSBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBfdG8gIT0gYWRkcmVzcygwKTsKICB9CgogIGZ1bmN0aW9uIF9hcHByb3ZlZChhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBkb2dneUlkVG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX3RvOwogIH0KCiAgZnVuY3Rpb24gX2NyZWF0ZURvZ2d5KHN0cmluZyBfbmFtZSwgYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3ByaWNlKSBwcml2YXRlIHsKICAgIERvZ2d5IG1lbW9yeSBfZG9nZ3kgPSBEb2dneSh7CiAgICAgIG5hbWU6IF9uYW1lCiAgICB9KTsKICAgIHVpbnQyNTYgbmV3RG9nZ3lJZCA9IGRvZ2dpZXMucHVzaChfZG9nZ3kpIC0gMTsKCiAgICByZXF1aXJlKG5ld0RvZ2d5SWQgPT0gdWludDI1Nih1aW50MzIobmV3RG9nZ3lJZCkpKTsgLy9jaGVjayBtYXhpbXVtIGxpbWl0IG9mIHRva2VucwoKICAgIERvZ2d5Q3JlYXRlZChuZXdEb2dneUlkLCBfbmFtZSwgX293bmVyKTsKCiAgICBkb2dneUlkVG9QcmljZVtuZXdEb2dneUlkXSA9IF9wcmljZTsKCWRvZ2d5SWRUb0RpdnNbbmV3RG9nZ3lJZF0gPSBfb3duZXI7IC8vZGl2aWRlbnRzIGFkZHJlc3M7CgogICAgX3RyYW5zZmVyKGFkZHJlc3MoMCksIF9vd25lciwgbmV3RG9nZ3lJZCk7CiAgfQoKICBmdW5jdGlvbiBfb3ducyhhZGRyZXNzIF9jaGVja2VkQWRkciwgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBfY2hlY2tlZEFkZHIgPT0gZG9nZ3lJZFRvT3duZXJbX3Rva2VuSWRdOwogIH0KCmZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICBvd25lcnNoaXBUb2tlbkNvdW50W190b10rKzsKICAgIGRvZ2d5SWRUb093bmVyW190b2tlbklkXSA9IF90bzsKCiAgICAvLyBXaGVuIGNyZWF0aW5nIG5ldyBkb2dnaWVzIF9mcm9tIGlzIDB4MCwgYnV0IHdlIGNhbid0IGFjY291bnQgdGhhdCBhZGRyZXNzLgogICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXJzaGlwVG9rZW5Db3VudFtfZnJvbV0tLTsKICAgICAgLy8gY2xlYXIgYW55IHByZXZpb3VzbHkgYXBwcm92ZWQgb3duZXJzaGlwIGV4Y2hhbmdlCiAgICAgIGRlbGV0ZSBkb2dneUlkVG9BcHByb3ZlZFtfdG9rZW5JZF07CiAgICB9CgogICAgLy8gRW1pdCB0aGUgdHJhbnNmZXIgZXZlbnQuCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQp9'.
	

]
