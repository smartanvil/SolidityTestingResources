Class {
	#name : #SRT105b2b74fe6de95b68d435f3a3bc8ace03cf1658,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT105b2b74fe6de95b68d435f3a3bc8ace03cf1658 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmludGVyZmFjZSBJRVJDMjAgewogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgovKgpDb3B5cmlnaHQgKGMpIDIwMTYgU21hcnQgQ29udHJhY3QgU29sdXRpb25zLCBJbmMuCgpQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcKYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCiJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLApkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8KcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvCnRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKClRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCmluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgoKVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MKT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgpNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuCklOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZCkNMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsClRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFClNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgoqLwoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IFBvbHlUb2tlbiBpcyBJRVJDMjAgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAvLyBQb2x5IFRva2VuIHBhcmFtZXRlcnMKICBzdHJpbmcgcHVibGljIG5hbWUgPSAnUG9seW1hdGgnOwogIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gJ1BPTFknOwogIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxGYWN0b3IgPSAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKTsKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b3RhbFN1cHBseSA9IDEwMDAwMDAwMDAgKiBkZWNpbWFsRmFjdG9yOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKCiAgLyoqCiAgKiBAZGV2IENvbnN0cnVjdG9yIGZvciBQb2x5IGNyZWF0aW9uCiAgKiBAZGV2IEFzc2lnbnMgdGhlIHRvdGFsU3VwcGx5IHRvIHRoZSBQb2x5RGlzdHJpYnV0aW9uIGNvbnRyYWN0CiAgKi8KICBmdW5jdGlvbiBQb2x5VG9rZW4oYWRkcmVzcyBfcG9seURpc3RyaWJ1dGlvbkNvbnRyYWN0QWRkcmVzcykgcHVibGljIHsKICAgIHJlcXVpcmUoX3BvbHlEaXN0cmlidXRpb25Db250cmFjdEFkZHJlc3MgIT0gYWRkcmVzcygwKSk7CiAgICBiYWxhbmNlc1tfcG9seURpc3RyaWJ1dGlvbkNvbnRyYWN0QWRkcmVzc10gPSB0b3RhbFN1cHBseTsKICAgIFRyYW5zZmVyKGFkZHJlc3MoMCksIF9wb2x5RGlzdHJpYnV0aW9uQ29udHJhY3RBZGRyZXNzLCB0b3RhbFN1cHBseSk7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgSW5jcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfYWRkZWRWYWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBpbmNyZWFzZSB0aGUgYWxsb3dhbmNlIGJ5LgogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRGVjcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGRlY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3VidHJhY3RlZFZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGRlY3JlYXNlIHRoZSBhbGxvd2FuY2UgYnkuCiAgICovCiAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgfQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCn0KCi8qCkNvcHlyaWdodCAoYykgMjAxNiBTbWFydCBDb250cmFjdCBTb2x1dGlvbnMsIEluYy4KClBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZwphIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwp3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCmRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0bwpwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8KdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgoKVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCgpUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwpPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCk1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4KSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkKQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwKVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUKU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiovCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgUE9MWSB0b2tlbiBpbml0aWFsIGRpc3RyaWJ1dGlvbgogKgogKiBAZGV2IERpc3RyaWJ1dGUgcHVyY2hhc2VycywgYWlyZHJvcCwgcmVzZXJ2ZSwgYW5kIGZvdW5kZXIgdG9rZW5zCiAqLwpjb250cmFjdCBQb2x5RGlzdHJpYnV0aW9uIGlzIE93bmFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBQb2x5VG9rZW4gcHVibGljIFBPTFk7CgogIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBkZWNpbWFsRmFjdG9yID0gMTAqKnVpbnQyNTYoMTgpOwogIGVudW0gQWxsb2NhdGlvblR5cGUgeyBQUkVTQUxFLCBGT1VOREVSLCBBSVJEUk9QLCBBRFZJU09SLCBSRVNFUlZFLCBCT05VUzEsIEJPTlVTMiwgQk9OVVMzIH0KICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBJTklUSUFMX1NVUFBMWSAgID0gMTAwMDAwMDAwMCAqIGRlY2ltYWxGYWN0b3I7CiAgdWludDI1NiBwdWJsaWMgQVZBSUxBQkxFX1RPVEFMX1NVUFBMWSAgICA9IDEwMDAwMDAwMDAgKiBkZWNpbWFsRmFjdG9yOwogIHVpbnQyNTYgcHVibGljIEFWQUlMQUJMRV9QUkVTQUxFX1NVUFBMWSAgPSAgMjMwMDAwMDAwICogZGVjaW1hbEZhY3RvcjsgLy8gMTAwJSBSZWxlYXNlZCBhdCBUb2tlbiBEaXN0cmlidXRpb24gKFREKQogIHVpbnQyNTYgcHVibGljIEFWQUlMQUJMRV9GT1VOREVSX1NVUFBMWSAgPSAgMTUwMDAwMDAwICogZGVjaW1hbEZhY3RvcjsgLy8gMzMlIFJlbGVhc2VkIGF0IFREICsxIHllYXIgLT4gMTAwJSBhdCBURCArMyB5ZWFycwogIHVpbnQyNTYgcHVibGljIEFWQUlMQUJMRV9BSVJEUk9QX1NVUFBMWSAgPSAgIDEwMDAwMDAwICogZGVjaW1hbEZhY3RvcjsgLy8gMTAwJSBSZWxlYXNlZCBhdCBURAogIHVpbnQyNTYgcHVibGljIEFWQUlMQUJMRV9BRFZJU09SX1NVUFBMWSAgPSAgIDIwMDAwMDAwICogZGVjaW1hbEZhY3RvcjsgLy8gMTAwJSBSZWxlYXNlZCBhdCBURCArNyBtb250aHMKICB1aW50MjU2IHB1YmxpYyBBVkFJTEFCTEVfUkVTRVJWRV9TVVBQTFkgID0gIDUxMzExNjY1OCAqIGRlY2ltYWxGYWN0b3I7IC8vIDYuOCUgUmVsZWFzZWQgYXQgVEQgKzEwMCBkYXlzIC0+IDEwMCUgYXQgVEQgKzQgeWVhcnMKICB1aW50MjU2IHB1YmxpYyBBVkFJTEFCTEVfQk9OVVMxX1NVUFBMWSAgPSAgICAzOTA1MzMzMCAqIGRlY2ltYWxGYWN0b3I7IC8vIDEwMCUgUmVsZWFzZWQgYXQgVEQgKzEgeWVhcgogIHVpbnQyNTYgcHVibGljIEFWQUlMQUJMRV9CT05VUzJfU1VQUExZICA9ICAgICA5MzU0NDA4ICogZGVjaW1hbEZhY3RvcjsgLy8gMTAwJSBSZWxlYXNlZCBhdCBURCArMiB5ZWFycwogIHVpbnQyNTYgcHVibGljIEFWQUlMQUJMRV9CT05VUzNfU1VQUExZICA9ICAgIDI4NDc1NjA0ICogZGVjaW1hbEZhY3RvcjsgLy8gMTAwJSBSZWxlYXNlZCBhdCBURCArMyB5ZWFycwoKICB1aW50MjU2IHB1YmxpYyBncmFuZFRvdGFsQ2xhaW1lZCA9IDA7CiAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lOwoKICAvLyBBbGxvY2F0aW9uIHdpdGggdmVzdGluZyBpbmZvcm1hdGlvbgogIHN0cnVjdCBBbGxvY2F0aW9uIHsKICAgIHVpbnQ4IEFsbG9jYXRpb25TdXBwbHk7IC8vIFR5cGUgb2YgYWxsb2NhdGlvbgogICAgdWludDI1NiBlbmRDbGlmZjsgICAgICAgLy8gVG9rZW5zIGFyZSBsb2NrZWQgdW50aWwKICAgIHVpbnQyNTYgZW5kVmVzdGluZzsgICAgIC8vIFRoaXMgaXMgd2hlbiB0aGUgdG9rZW5zIGFyZSBmdWxseSB1bnZlc3RlZAogICAgdWludDI1NiB0b3RhbEFsbG9jYXRlZDsgLy8gVG90YWwgdG9rZW5zIGFsbG9jYXRlZAogICAgdWludDI1NiBhbW91bnRDbGFpbWVkOyAgLy8gVG90YWwgdG9rZW5zIGNsYWltZWQKICB9CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBBbGxvY2F0aW9uKSBwdWJsaWMgYWxsb2NhdGlvbnM7CgogIC8vIExpc3Qgb2YgYWRtaW5zCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgYWlyZHJvcEFkbWluczsKCiAgLy8gS2VlcHMgdHJhY2sgb2Ygd2hldGhlciBvciBub3QgYSAyNTAgUE9MWSBhaXJkcm9wIGhhcyBiZWVuIG1hZGUgdG8gYSBwYXJ0aWN1bGFyIGFkZHJlc3MKICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBhaXJkcm9wczsKCiAgbW9kaWZpZXIgb25seU93bmVyT3JBZG1pbigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lciB8fCBhaXJkcm9wQWRtaW5zW21zZy5zZW5kZXJdKTsKICAgIF87CiAgfQoKICBldmVudCBMb2dOZXdBbGxvY2F0aW9uKGFkZHJlc3MgaW5kZXhlZCBfcmVjaXBpZW50LCBBbGxvY2F0aW9uVHlwZSBpbmRleGVkIF9mcm9tU3VwcGx5LCB1aW50MjU2IF90b3RhbEFsbG9jYXRlZCwgdWludDI1NiBfZ3JhbmRUb3RhbEFsbG9jYXRlZCk7CiAgZXZlbnQgTG9nUG9seUNsYWltZWQoYWRkcmVzcyBpbmRleGVkIF9yZWNpcGllbnQsIHVpbnQ4IGluZGV4ZWQgX2Zyb21TdXBwbHksIHVpbnQyNTYgX2Ftb3VudENsYWltZWQsIHVpbnQyNTYgX3RvdGFsQWxsb2NhdGVkLCB1aW50MjU2IF9ncmFuZFRvdGFsQ2xhaW1lZCk7CgogIC8qKgogICAgKiBAZGV2IENvbnN0cnVjdG9yIGZ1bmN0aW9uIC0gU2V0IHRoZSBwb2x5IHRva2VuIGFkZHJlc3MKICAgICogQHBhcmFtIF9zdGFydFRpbWUgVGhlIHRpbWUgd2hlbiBQb2x5RGlzdHJpYnV0aW9uIGdvZXMgbGl2ZQogICAgKi8KICBmdW5jdGlvbiBQb2x5RGlzdHJpYnV0aW9uKHVpbnQyNTYgX3N0YXJ0VGltZSkgcHVibGljIHsKICAgIHJlcXVpcmUoX3N0YXJ0VGltZSA+PSBub3cpOwogICAgcmVxdWlyZShBVkFJTEFCTEVfVE9UQUxfU1VQUExZID09IEFWQUlMQUJMRV9QUkVTQUxFX1NVUFBMWS5hZGQoQVZBSUxBQkxFX0ZPVU5ERVJfU1VQUExZKS5hZGQoQVZBSUxBQkxFX0FJUkRST1BfU1VQUExZKS5hZGQoQVZBSUxBQkxFX0FEVklTT1JfU1VQUExZKS5hZGQoQVZBSUxBQkxFX0JPTlVTMV9TVVBQTFkpLmFkZChBVkFJTEFCTEVfQk9OVVMyX1NVUFBMWSkuYWRkKEFWQUlMQUJMRV9CT05VUzNfU1VQUExZKS5hZGQoQVZBSUxBQkxFX1JFU0VSVkVfU1VQUExZKSk7CiAgICBzdGFydFRpbWUgPSBfc3RhcnRUaW1lOwogICAgUE9MWSA9IG5ldyBQb2x5VG9rZW4odGhpcyk7CiAgfQoKICAvKioKICAgICogQGRldiBBbGxvdyB0aGUgb3duZXIgb2YgdGhlIGNvbnRyYWN0IHRvIGFzc2lnbiBhIG5ldyBhbGxvY2F0aW9uCiAgICAqIEBwYXJhbSBfcmVjaXBpZW50IFRoZSByZWNpcGllbnQgb2YgdGhlIGFsbG9jYXRpb24KICAgICogQHBhcmFtIF90b3RhbEFsbG9jYXRlZCBUaGUgdG90YWwgYW1vdW50IG9mIFBPTFkgYXZhaWxhYmxlIHRvIHRoZSByZWNlaXBpZW50IChhZnRlciB2ZXN0aW5nKQogICAgKiBAcGFyYW0gX3N1cHBseSBUaGUgUE9MWSBzdXBwbHkgdGhlIGFsbG9jYXRpb24gd2lsbCBiZSB0YWtlbiBmcm9tCiAgICAqLwogIGZ1bmN0aW9uIHNldEFsbG9jYXRpb24gKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfdG90YWxBbGxvY2F0ZWQsIEFsbG9jYXRpb25UeXBlIF9zdXBwbHkpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShhbGxvY2F0aW9uc1tfcmVjaXBpZW50XS50b3RhbEFsbG9jYXRlZCA9PSAwICYmIF90b3RhbEFsbG9jYXRlZCA+IDApOwogICAgcmVxdWlyZShfc3VwcGx5ID49IEFsbG9jYXRpb25UeXBlLlBSRVNBTEUgJiYgX3N1cHBseSA8PSBBbGxvY2F0aW9uVHlwZS5CT05VUzMpOwogICAgcmVxdWlyZShfcmVjaXBpZW50ICE9IGFkZHJlc3MoMCkpOwogICAgaWYgKF9zdXBwbHkgPT0gQWxsb2NhdGlvblR5cGUuUFJFU0FMRSkgewogICAgICBBVkFJTEFCTEVfUFJFU0FMRV9TVVBQTFkgPSBBVkFJTEFCTEVfUFJFU0FMRV9TVVBQTFkuc3ViKF90b3RhbEFsbG9jYXRlZCk7CiAgICAgIGFsbG9jYXRpb25zW19yZWNpcGllbnRdID0gQWxsb2NhdGlvbih1aW50OChBbGxvY2F0aW9uVHlwZS5QUkVTQUxFKSwgMCwgMCwgX3RvdGFsQWxsb2NhdGVkLCAwKTsKICAgIH0gZWxzZSBpZiAoX3N1cHBseSA9PSBBbGxvY2F0aW9uVHlwZS5GT1VOREVSKSB7CiAgICAgIEFWQUlMQUJMRV9GT1VOREVSX1NVUFBMWSA9IEFWQUlMQUJMRV9GT1VOREVSX1NVUFBMWS5zdWIoX3RvdGFsQWxsb2NhdGVkKTsKICAgICAgYWxsb2NhdGlvbnNbX3JlY2lwaWVudF0gPSBBbGxvY2F0aW9uKHVpbnQ4KEFsbG9jYXRpb25UeXBlLkZPVU5ERVIpLCBzdGFydFRpbWUgKyAxIHllYXJzLCBzdGFydFRpbWUgKyAzIHllYXJzLCBfdG90YWxBbGxvY2F0ZWQsIDApOwogICAgfSBlbHNlIGlmIChfc3VwcGx5ID09IEFsbG9jYXRpb25UeXBlLkFEVklTT1IpIHsKICAgICAgQVZBSUxBQkxFX0FEVklTT1JfU1VQUExZID0gQVZBSUxBQkxFX0FEVklTT1JfU1VQUExZLnN1YihfdG90YWxBbGxvY2F0ZWQpOwogICAgICBhbGxvY2F0aW9uc1tfcmVjaXBpZW50XSA9IEFsbG9jYXRpb24odWludDgoQWxsb2NhdGlvblR5cGUuQURWSVNPUiksIHN0YXJ0VGltZSArIDIwOSBkYXlzLCAwLCBfdG90YWxBbGxvY2F0ZWQsIDApOwogICAgfSBlbHNlIGlmIChfc3VwcGx5ID09IEFsbG9jYXRpb25UeXBlLlJFU0VSVkUpIHsKICAgICAgQVZBSUxBQkxFX1JFU0VSVkVfU1VQUExZID0gQVZBSUxBQkxFX1JFU0VSVkVfU1VQUExZLnN1YihfdG90YWxBbGxvY2F0ZWQpOwogICAgICBhbGxvY2F0aW9uc1tfcmVjaXBpZW50XSA9IEFsbG9jYXRpb24odWludDgoQWxsb2NhdGlvblR5cGUuUkVTRVJWRSksIHN0YXJ0VGltZSArIDEwMCBkYXlzLCBzdGFydFRpbWUgKyA0IHllYXJzLCBfdG90YWxBbGxvY2F0ZWQsIDApOwogICAgfSBlbHNlIGlmIChfc3VwcGx5ID09IEFsbG9jYXRpb25UeXBlLkJPTlVTMSkgewogICAgICBBVkFJTEFCTEVfQk9OVVMxX1NVUFBMWSA9IEFWQUlMQUJMRV9CT05VUzFfU1VQUExZLnN1YihfdG90YWxBbGxvY2F0ZWQpOwogICAgICBhbGxvY2F0aW9uc1tfcmVjaXBpZW50XSA9IEFsbG9jYXRpb24odWludDgoQWxsb2NhdGlvblR5cGUuQk9OVVMxKSwgc3RhcnRUaW1lICsgMSB5ZWFycywgc3RhcnRUaW1lICsgMSB5ZWFycywgX3RvdGFsQWxsb2NhdGVkLCAwKTsKICAgIH0gZWxzZSBpZiAoX3N1cHBseSA9PSBBbGxvY2F0aW9uVHlwZS5CT05VUzIpIHsKICAgICAgQVZBSUxBQkxFX0JPTlVTMl9TVVBQTFkgPSBBVkFJTEFCTEVfQk9OVVMyX1NVUFBMWS5zdWIoX3RvdGFsQWxsb2NhdGVkKTsKICAgICAgYWxsb2NhdGlvbnNbX3JlY2lwaWVudF0gPSBBbGxvY2F0aW9uKHVpbnQ4KEFsbG9jYXRpb25UeXBlLkJPTlVTMiksIHN0YXJ0VGltZSArIDIgeWVhcnMsIHN0YXJ0VGltZSArIDIgeWVhcnMsIF90b3RhbEFsbG9jYXRlZCwgMCk7CiAgICB9IGVsc2UgaWYgKF9zdXBwbHkgPT0gQWxsb2NhdGlvblR5cGUuQk9OVVMzKSB7CiAgICAgIEFWQUlMQUJMRV9CT05VUzNfU1VQUExZID0gQVZBSUxBQkxFX0JPTlVTM19TVVBQTFkuc3ViKF90b3RhbEFsbG9jYXRlZCk7CiAgICAgIGFsbG9jYXRpb25zW19yZWNpcGllbnRdID0gQWxsb2NhdGlvbih1aW50OChBbGxvY2F0aW9uVHlwZS5CT05VUzMpLCBzdGFydFRpbWUgKyAzIHllYXJzLCBzdGFydFRpbWUgKyAzIHllYXJzLCBfdG90YWxBbGxvY2F0ZWQsIDApOwogICAgfQogICAgQVZBSUxBQkxFX1RPVEFMX1NVUFBMWSA9IEFWQUlMQUJMRV9UT1RBTF9TVVBQTFkuc3ViKF90b3RhbEFsbG9jYXRlZCk7CiAgICBMb2dOZXdBbGxvY2F0aW9uKF9yZWNpcGllbnQsIF9zdXBwbHksIF90b3RhbEFsbG9jYXRlZCwgZ3JhbmRUb3RhbEFsbG9jYXRlZCgpKTsKICB9CgogIC8qKgogICAgKiBAZGV2IEFkZCBhbiBhaXJkcm9wIGFkbWluCiAgICAqLwogIGZ1bmN0aW9uIHNldEFpcmRyb3BBZG1pbihhZGRyZXNzIF9hZG1pbiwgYm9vbCBfaXNBZG1pbikgcHVibGljIG9ubHlPd25lciB7CiAgICBhaXJkcm9wQWRtaW5zW19hZG1pbl0gPSBfaXNBZG1pbjsKICB9CgogIC8qKgogICAgKiBAZGV2IHBlcmZvcm0gYSB0cmFuc2ZlciBvZiBhbGxvY2F0aW9ucwogICAgKiBAcGFyYW0gX3JlY2lwaWVudCBpcyBhIGxpc3Qgb2YgcmVjaXBpZW50cwogICAgKi8KICBmdW5jdGlvbiBhaXJkcm9wVG9rZW5zKGFkZHJlc3NbXSBfcmVjaXBpZW50KSBwdWJsaWMgb25seU93bmVyT3JBZG1pbiB7CiAgICByZXF1aXJlKG5vdyA+PSBzdGFydFRpbWUpOwogICAgdWludCBhaXJkcm9wcGVkOwogICAgZm9yKHVpbnQyNTYgaSA9IDA7IGk8IF9yZWNpcGllbnQubGVuZ3RoOyBpKyspCiAgICB7CiAgICAgICAgaWYgKCFhaXJkcm9wc1tfcmVjaXBpZW50W2ldXSkgewogICAgICAgICAgYWlyZHJvcHNbX3JlY2lwaWVudFtpXV0gPSB0cnVlOwogICAgICAgICAgcmVxdWlyZShQT0xZLnRyYW5zZmVyKF9yZWNpcGllbnRbaV0sIDI1MCAqIGRlY2ltYWxGYWN0b3IpKTsKICAgICAgICAgIGFpcmRyb3BwZWQgPSBhaXJkcm9wcGVkLmFkZCgyNTAgKiBkZWNpbWFsRmFjdG9yKTsKICAgICAgICB9CiAgICB9CiAgICBBVkFJTEFCTEVfQUlSRFJPUF9TVVBQTFkgPSBBVkFJTEFCTEVfQUlSRFJPUF9TVVBQTFkuc3ViKGFpcmRyb3BwZWQpOwogICAgQVZBSUxBQkxFX1RPVEFMX1NVUFBMWSA9IEFWQUlMQUJMRV9UT1RBTF9TVVBQTFkuc3ViKGFpcmRyb3BwZWQpOwogICAgZ3JhbmRUb3RhbENsYWltZWQgPSBncmFuZFRvdGFsQ2xhaW1lZC5hZGQoYWlyZHJvcHBlZCk7CiAgfQoKICAvKioKICAgICogQGRldiBUcmFuc2ZlciBhIHJlY2lwaWVudHMgYXZhaWxhYmxlIGFsbG9jYXRpb24gdG8gdGhlaXIgYWRkcmVzcwogICAgKiBAcGFyYW0gX3JlY2lwaWVudCBUaGUgYWRkcmVzcyB0byB3aXRoZHJhdyB0b2tlbnMgZm9yCiAgICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyVG9rZW5zIChhZGRyZXNzIF9yZWNpcGllbnQpIHB1YmxpYyB7CiAgICByZXF1aXJlKGFsbG9jYXRpb25zW19yZWNpcGllbnRdLmFtb3VudENsYWltZWQgPCBhbGxvY2F0aW9uc1tfcmVjaXBpZW50XS50b3RhbEFsbG9jYXRlZCk7CiAgICByZXF1aXJlKG5vdyA+PSBhbGxvY2F0aW9uc1tfcmVjaXBpZW50XS5lbmRDbGlmZik7CiAgICByZXF1aXJlKG5vdyA+PSBzdGFydFRpbWUpOwogICAgdWludDI1NiBuZXdBbW91bnRDbGFpbWVkOwogICAgaWYgKGFsbG9jYXRpb25zW19yZWNpcGllbnRdLmVuZFZlc3RpbmcgPiBub3cpIHsKICAgICAgLy8gVHJhbnNmZXIgYXZhaWxhYmxlIGFtb3VudCBiYXNlZCBvbiB2ZXN0aW5nIHNjaGVkdWxlIGFuZCBhbGxvY2F0aW9uCiAgICAgIG5ld0Ftb3VudENsYWltZWQgPSBhbGxvY2F0aW9uc1tfcmVjaXBpZW50XS50b3RhbEFsbG9jYXRlZC5tdWwobm93LnN1YihzdGFydFRpbWUpKS5kaXYoYWxsb2NhdGlvbnNbX3JlY2lwaWVudF0uZW5kVmVzdGluZy5zdWIoc3RhcnRUaW1lKSk7CiAgICB9IGVsc2UgewogICAgICAvLyBUcmFuc2ZlciB0b3RhbCBhbGxvY2F0ZWQgKG1pbnVzIHByZXZpb3VzbHkgY2xhaW1lZCB0b2tlbnMpCiAgICAgIG5ld0Ftb3VudENsYWltZWQgPSBhbGxvY2F0aW9uc1tfcmVjaXBpZW50XS50b3RhbEFsbG9jYXRlZDsKICAgIH0KICAgIHVpbnQyNTYgdG9rZW5zVG9UcmFuc2ZlciA9IG5ld0Ftb3VudENsYWltZWQuc3ViKGFsbG9jYXRpb25zW19yZWNpcGllbnRdLmFtb3VudENsYWltZWQpOwogICAgYWxsb2NhdGlvbnNbX3JlY2lwaWVudF0uYW1vdW50Q2xhaW1lZCA9IG5ld0Ftb3VudENsYWltZWQ7CiAgICByZXF1aXJlKFBPTFkudHJhbnNmZXIoX3JlY2lwaWVudCwgdG9rZW5zVG9UcmFuc2ZlcikpOwogICAgZ3JhbmRUb3RhbENsYWltZWQgPSBncmFuZFRvdGFsQ2xhaW1lZC5hZGQodG9rZW5zVG9UcmFuc2Zlcik7CiAgICBMb2dQb2x5Q2xhaW1lZChfcmVjaXBpZW50LCBhbGxvY2F0aW9uc1tfcmVjaXBpZW50XS5BbGxvY2F0aW9uU3VwcGx5LCB0b2tlbnNUb1RyYW5zZmVyLCBuZXdBbW91bnRDbGFpbWVkLCBncmFuZFRvdGFsQ2xhaW1lZCk7CiAgfQoKICAvLyBSZXR1cm5zIHRoZSBhbW91bnQgb2YgUE9MWSBhbGxvY2F0ZWQKICBmdW5jdGlvbiBncmFuZFRvdGFsQWxsb2NhdGVkKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIElOSVRJQUxfU1VQUExZIC0gQVZBSUxBQkxFX1RPVEFMX1NVUFBMWTsKICB9CgogIC8vIEFsbG93IHRyYW5zZmVyIG9mIGFjY2lkZW50YWxseSBzZW50IEVSQzIwIHRva2VucwogIGZ1bmN0aW9uIHJlZnVuZFRva2VucyhhZGRyZXNzIF9yZWNpcGllbnQsIGFkZHJlc3MgX3Rva2VuKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUoX3Rva2VuICE9IGFkZHJlc3MoUE9MWSkpOwogICAgSUVSQzIwIHRva2VuID0gSUVSQzIwKF90b2tlbik7CiAgICB1aW50MjU2IGJhbGFuY2UgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICByZXF1aXJlKHRva2VuLnRyYW5zZmVyKF9yZWNpcGllbnQsIGJhbGFuY2UpKTsKICB9Cn0='.
	

]
