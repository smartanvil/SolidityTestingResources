Class {
	#name : #SRT21ca8ee818f008692d3a6abd1a1beda5aaecf0e3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT21ca8ee818f008692d3a6abd1a1beda5aaecf0e3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuNDsKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBUb2tlblRyYWRlckZhY3RvcnkKLy8KLy8gRGVjZW50cmFsaXNlZCB0cnVzdGxlc3MgRVJDMjAtY29tcGxpYW50IHRva2VuIHRvIEVUSCBleGNoYW5nZSBjb250cmFjdAovLyBvbiB0aGUgRXRoZXJldW0gYmxvY2tjaGFpbi4KLy8KLy8gTm90ZSB0aGF0IHRoaXMgVG9rZW5UcmFkZXIgY2Fubm90IGJlIHVzZWQgd2l0aCB0aGUgR29sZW0gTmV0d29yayBUb2tlbgovLyBkaXJlY3RseSBhcyB0aGUgdG9rZW4gZG9lcyBub3QgaW1wbGVtZW50IHRoZSBFUkMyMAovLyB0cmFuc2ZlckZyb20oLi4uKSwgYXBwcm92ZSguLi4pIGFuZCBhbGxvd2FuY2UoLi4uKSBtZXRob2RzCi8vCi8vIEhpc3Rvcnk6Ci8vICAgSmFuIDI1IDIwMTcgLSBCUEIgQWRkZWQgbWFrZXJUcmFuc2ZlckFzc2V0KC4uLikgYW5kCi8vICAgICAgICAgICAgICAgICAgICAgbWFrZXJUcmFuc2ZlckV0aGVyKC4uLikKLy8gICBGZWIgMDUgMjAxNyAtIEJQQiBCdWcgZml4IGluIHRoZSBjaGFuZ2UgY2FsY3VsYXRpb24gZm9yIHRoZSBVbmljb3JuCi8vICAgICAgICAgICAgICAgICAgICAgdG9rZW4gd2l0aCBuYXR1cmFsIG51bWJlciAxCi8vCi8vIEVuam95LiAoYykgSm9ubnlMYXR0ZSAmIEJva2t5UG9vQmFoIDIwMTcuIFRoZSBNSVQgbGljZW5jZS4KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKY29udHJhY3QgRVJDMjAgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50IHRvdGFsU3VwcGx5KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZyk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOwp9Cgpjb250cmFjdCBPd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7CgogICAgZnVuY3Rpb24gT3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyT3JUb2tlblRyYWRlcldpdGhTYW1lT3duZXIgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyICYmIFRva2VuVHJhZGVyKG1zZy5zZW5kZXIpLm93bmVyKCkgIT0gb3duZXIpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9Cn0KCi8vIGNvbnRyYWN0IGNhbiBidXkgb3Igc2VsbCB0b2tlbnMgZm9yIEVUSAovLyBwcmljZXMgYXJlIGluIGFtb3VudCBvZiB3ZWkgcGVyIGJhdGNoIG9mIHRva2VuIHVuaXRzCgpjb250cmFjdCBUb2tlblRyYWRlciBpcyBPd25lZCB7CgogICAgYWRkcmVzcyBwdWJsaWMgYXNzZXQ7ICAgICAgIC8vIGFkZHJlc3Mgb2YgdG9rZW4KICAgIHVpbnQyNTYgcHVibGljIGJ1eVByaWNlOyAgICAvLyBjb250cmFjdCBidXlzIGxvdHMgb2YgdG9rZW4gYXQgdGhpcyBwcmljZQogICAgdWludDI1NiBwdWJsaWMgc2VsbFByaWNlOyAgIC8vIGNvbnRyYWN0IHNlbGxzIGxvdHMgYXQgdGhpcyBwcmljZQogICAgdWludDI1NiBwdWJsaWMgdW5pdHM7ICAgICAgIC8vIGxvdCBzaXplICh0b2tlbi13ZWkpCgogICAgYm9vbCBwdWJsaWMgYnV5c1Rva2VuczsgICAgIC8vIGlzIGNvbnRyYWN0IGJ1eWluZwogICAgYm9vbCBwdWJsaWMgc2VsbHNUb2tlbnM7ICAgIC8vIGlzIGNvbnRyYWN0IHNlbGxpbmcKCiAgICBldmVudCBBY3RpdmF0ZWRFdmVudChib29sIGJ1eXMsIGJvb2wgc2VsbHMpOwogICAgZXZlbnQgTWFrZXJEZXBvc2l0ZWRFdGhlcih1aW50MjU2IGFtb3VudCk7CiAgICBldmVudCBNYWtlcldpdGhkcmV3QXNzZXQodWludDI1NiB0b2tlbnMpOwogICAgZXZlbnQgTWFrZXJUcmFuc2ZlcnJlZEFzc2V0KGFkZHJlc3MgdG9Ub2tlblRyYWRlciwgdWludDI1NiB0b2tlbnMpOwogICAgZXZlbnQgTWFrZXJXaXRoZHJld0VSQzIwVG9rZW4oYWRkcmVzcyB0b2tlbkFkZHJlc3MsIHVpbnQyNTYgdG9rZW5zKTsKICAgIGV2ZW50IE1ha2VyV2l0aGRyZXdFdGhlcih1aW50MjU2IGV0aGVycyk7CiAgICBldmVudCBNYWtlclRyYW5zZmVycmVkRXRoZXIoYWRkcmVzcyB0b1Rva2VuVHJhZGVyLCB1aW50MjU2IGV0aGVycyk7CiAgICBldmVudCBUYWtlckJvdWdodEFzc2V0KGFkZHJlc3MgaW5kZXhlZCBidXllciwgdWludDI1NiBldGhlcnNTZW50LAogICAgICAgIHVpbnQyNTYgZXRoZXJzUmV0dXJuZWQsIHVpbnQyNTYgdG9rZW5zQm91Z2h0KTsKICAgIGV2ZW50IFRha2VyU29sZEFzc2V0KGFkZHJlc3MgaW5kZXhlZCBzZWxsZXIsIHVpbnQyNTYgZXRoZXJWYWx1ZU9mVG9rZW5zVG9TZWxsLAogICAgICAgIHVpbnQyNTYgdG9rZW5zU29sZCwgdWludDI1NiBldGhlclZhbHVlT2ZUb2tlbnNTb2xkKTsKCiAgICAvLyBDb25zdHJ1Y3RvciAtIG9ubHkgdG8gYmUgY2FsbGVkIGJ5IHRoZSBUb2tlblRyYWRlckZhY3RvcnkgY29udHJhY3QKICAgIGZ1bmN0aW9uIFRva2VuVHJhZGVyICgKICAgICAgICBhZGRyZXNzIF9hc3NldCwKICAgICAgICB1aW50MjU2IF9idXlQcmljZSwKICAgICAgICB1aW50MjU2IF9zZWxsUHJpY2UsCiAgICAgICAgdWludDI1NiBfdW5pdHMsCiAgICAgICAgYm9vbCAgICBfYnV5c1Rva2VucywKICAgICAgICBib29sICAgIF9zZWxsc1Rva2VucwogICAgKSB7CiAgICAgICAgYXNzZXQgICAgICAgPSBfYXNzZXQ7CiAgICAgICAgYnV5UHJpY2UgICAgPSBfYnV5UHJpY2U7CiAgICAgICAgc2VsbFByaWNlICAgPSBfc2VsbFByaWNlOwogICAgICAgIHVuaXRzICAgICAgID0gX3VuaXRzOwogICAgICAgIGJ1eXNUb2tlbnMgID0gX2J1eXNUb2tlbnM7CiAgICAgICAgc2VsbHNUb2tlbnMgPSBfc2VsbHNUb2tlbnM7CiAgICAgICAgQWN0aXZhdGVkRXZlbnQoYnV5c1Rva2Vucywgc2VsbHNUb2tlbnMpOwogICAgfQoKICAgIC8vIE1ha2VyIGNhbiBhY3RpdmF0ZSBvciBkZWFjdGl2YXRlIHRoaXMgY29udHJhY3QncyBidXlpbmcgYW5kCiAgICAvLyBzZWxsaW5nIHN0YXR1cwogICAgLy8KICAgIC8vIFRoZSBBY3RpdmF0ZWRFdmVudCgpIGV2ZW50IGlzIGxvZ2dlZCB3aXRoIHRoZSBmb2xsb3dpbmcKICAgIC8vIHBhcmFtZXRlcjoKICAgIC8vICAgYnV5c1Rva2VucyAgIHRoaXMgY29udHJhY3QgY2FuIGJ1eSBhc3NldCB0b2tlbnMKICAgIC8vICAgc2VsbHNUb2tlbnMgIHRoaXMgY29udHJhY3QgY2FuIHNlbGwgYXNzZXQgdG9rZW5zCiAgICAvLwogICAgZnVuY3Rpb24gYWN0aXZhdGUgKAogICAgICAgIGJvb2wgX2J1eXNUb2tlbnMsCiAgICAgICAgYm9vbCBfc2VsbHNUb2tlbnMKICAgICkgb25seU93bmVyIHsKICAgICAgICBidXlzVG9rZW5zICA9IF9idXlzVG9rZW5zOwogICAgICAgIHNlbGxzVG9rZW5zID0gX3NlbGxzVG9rZW5zOwogICAgICAgIEFjdGl2YXRlZEV2ZW50KGJ1eXNUb2tlbnMsIHNlbGxzVG9rZW5zKTsKICAgIH0KCiAgICAvLyBNYWtlciBjYW4gZGVwb3NpdCBldGhlcnMgdG8gdGhpcyBjb250cmFjdCBzbyB0aGlzIGNvbnRyYWN0CiAgICAvLyBjYW4gYnV5IGFzc2V0IHRva2Vucy4KICAgIC8vCiAgICAvLyBNYWtlciBkZXBvc2l0cyBhc3NldCB0b2tlbnMgdG8gdGhpcyBjb250cmFjdCBieSBjYWxsaW5nIHRoZQogICAgLy8gYXNzZXQncyB0cmFuc2ZlcigpIG1ldGhvZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVycwogICAgLy8gICBfdG8gICAgIGlzIHRoZSBhZGRyZXNzIG9mIFRISVMgY29udHJhY3QKICAgIC8vICAgX3ZhbHVlICBpcyB0aGUgbnVtYmVyIG9mIGFzc2V0IHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8KICAgIC8vIFRha2VyIE1VU1QgTk9UIHNlbmQgdG9rZW5zIGRpcmVjdGx5IHRvIHRoaXMgY29udHJhY3QuIFRha2VycwogICAgLy8gTVVTVCB1c2UgdGhlIHRha2VyU2VsbEFzc2V0KCkgbWV0aG9kIHRvIHNlbGwgYXNzZXQgdG9rZW5zCiAgICAvLyB0byB0aGlzIGNvbnRyYWN0CiAgICAvLwogICAgLy8gTWFrZXIgY2FuIGFsc28gdHJhbnNmZXIgZXRoZXJzIGZyb20gb25lIFRva2VuVHJhZGVyIGNvbnRyYWN0CiAgICAvLyB0byBhbm90aGVyIFRva2VuVHJhZGVyIGNvbnRyYWN0LCBib3RoIG93bmVkIGJ5IHRoZSBNYWtlcgogICAgLy8KICAgIC8vIFRoZSBNYWtlckRlcG9zaXRlZEV0aGVyKCkgZXZlbnQgaXMgbG9nZ2VkIHdpdGggdGhlIGZvbGxvd2luZwogICAgLy8gcGFyYW1ldGVyOgogICAgLy8gICBldGhlcnMgIGlzIHRoZSBudW1iZXIgb2YgZXRoZXJzIGRlcG9zaXRlZCBieSB0aGUgbWFrZXIKICAgIC8vCiAgICAvLyBUaGlzIG1ldGhvZCB3YXMgY2FsbGVkIGRlcG9zaXQoKSBpbiB0aGUgb2xkIHZlcnNpb24KICAgIC8vCiAgICBmdW5jdGlvbiBtYWtlckRlcG9zaXRFdGhlcigpIHBheWFibGUgb25seU93bmVyT3JUb2tlblRyYWRlcldpdGhTYW1lT3duZXIgewogICAgICAgIE1ha2VyRGVwb3NpdGVkRXRoZXIobXNnLnZhbHVlKTsKICAgIH0KCiAgICAvLyBNYWtlciBjYW4gd2l0aGRyYXcgYXNzZXQgdG9rZW5zIGZyb20gdGhpcyBjb250cmFjdCwgd2l0aCB0aGUKICAgIC8vIGZvbGxvd2luZyBwYXJhbWV0ZXI6CiAgICAvLyAgIHRva2VucyAgaXMgdGhlIG51bWJlciBvZiBhc3NldCB0b2tlbnMgdG8gYmUgd2l0aGRyYXduCiAgICAvLwogICAgLy8gVGhlIE1ha2VyV2l0aGRyZXdBc3NldCgpIGV2ZW50IGlzIGxvZ2dlZCB3aXRoIHRoZSBmb2xsb3dpbmcKICAgIC8vIHBhcmFtZXRlcjoKICAgIC8vICAgdG9rZW5zICBpcyB0aGUgbnVtYmVyIG9mIHRva2VucyB3aXRoZHJhd24gYnkgdGhlIG1ha2VyCiAgICAvLwogICAgLy8gVGhpcyBtZXRob2Qgd2FzIGNhbGxlZCB3aXRoZHJhd0Fzc2V0KCkgaW4gdGhlIG9sZCB2ZXJzaW9uCiAgICAvLwogICAgZnVuY3Rpb24gbWFrZXJXaXRoZHJhd0Fzc2V0KHVpbnQyNTYgdG9rZW5zKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBvaykgewogICAgICAgIE1ha2VyV2l0aGRyZXdBc3NldCh0b2tlbnMpOwogICAgICAgIHJldHVybiBFUkMyMChhc3NldCkudHJhbnNmZXIob3duZXIsIHRva2Vucyk7CiAgICB9CgogICAgLy8gTWFrZXIgY2FuIHRyYW5zZmVyIGFzc2V0IHRva2VucyBmcm9tIHRoaXMgY29udHJhY3QgdG8gYW5vdGhlcgogICAgLy8gVG9rZW5UcmFkZXIgY29udHJhY3QsIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXI6CiAgICAvLyAgIHRvVG9rZW5UcmFkZXIgIEFub3RoZXIgVG9rZW5UcmFkZXIgY29udHJhY3Qgb3duZWQgYnkgdGhlCiAgICAvLyAgICAgICAgICAgICAgICAgIHNhbWUgb3duZXIgYW5kIHdpdGggdGhlIHNhbWUgYXNzZXQKICAgIC8vICAgdG9rZW5zICAgICAgICAgaXMgdGhlIG51bWJlciBvZiBhc3NldCB0b2tlbnMgdG8gYmUgbW92ZWQKICAgIC8vCiAgICAvLyBUaGUgTWFrZXJUcmFuc2ZlcnJlZEFzc2V0KCkgZXZlbnQgaXMgbG9nZ2VkIHdpdGggdGhlIGZvbGxvd2luZwogICAgLy8gcGFyYW1ldGVyczoKICAgIC8vICAgdG9Ub2tlblRyYWRlciAgVGhlIG90aGVyIFRva2VuVHJhZGVyIGNvbnRyYWN0IG93bmVkIGJ5CiAgICAvLyAgICAgICAgICAgICAgICAgIHRoZSBzYW1lIG93bmVyIGFuZCB3aXRoIHRoZSBzYW1lIGFzc2V0CiAgICAvLyAgIHRva2VucyAgICAgICAgIGlzIHRoZSBudW1iZXIgb2YgdG9rZW5zIHRyYW5zZmVycmVkCiAgICAvLwogICAgLy8gVGhlIGFzc2V0IFRyYW5zZmVyKCkgZXZlbnQgaXMgYWxzbyBsb2dnZWQgZnJvbSB0aGlzIGNvbnRyYWN0CiAgICAvLyB0byB0aGUgb3RoZXIgY29udHJhY3QKICAgIC8vCiAgICBmdW5jdGlvbiBtYWtlclRyYW5zZmVyQXNzZXQoCiAgICAgICAgVG9rZW5UcmFkZXIgdG9Ub2tlblRyYWRlciwKICAgICAgICB1aW50MjU2IHRva2VucwogICAgKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBvaykgewogICAgICAgIGlmIChvd25lciAhPSB0b1Rva2VuVHJhZGVyLm93bmVyKCkgfHwgYXNzZXQgIT0gdG9Ub2tlblRyYWRlci5hc3NldCgpKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICBNYWtlclRyYW5zZmVycmVkQXNzZXQodG9Ub2tlblRyYWRlciwgdG9rZW5zKTsKICAgICAgICByZXR1cm4gRVJDMjAoYXNzZXQpLnRyYW5zZmVyKHRvVG9rZW5UcmFkZXIsIHRva2Vucyk7CiAgICB9CgogICAgLy8gTWFrZXIgY2FuIHdpdGhkcmF3IGFueSBFUkMyMCBhc3NldCB0b2tlbnMgZnJvbSB0aGlzIGNvbnRyYWN0CiAgICAvLwogICAgLy8gVGhpcyBtZXRob2QgaXMgaW5jbHVkZWQgaW4gdGhlIGNhc2Ugd2hlcmUgdGhpcyBjb250cmFjdCByZWNlaXZlcwogICAgLy8gdGhlIHdyb25nIHRva2VucwogICAgLy8KICAgIC8vIFRoZSBNYWtlcldpdGhkcmV3RVJDMjBUb2tlbigpIGV2ZW50IGlzIGxvZ2dlZCB3aXRoIHRoZSBmb2xsb3dpbmcKICAgIC8vIHBhcmFtZXRlcjoKICAgIC8vICAgdG9rZW5BZGRyZXNzICBpcyB0aGUgYWRkcmVzcyBvZiB0aGUgdG9rZW5zIHdpdGhkcmF3biBieSB0aGUgbWFrZXIKICAgIC8vICAgdG9rZW5zICAgICAgICBpcyB0aGUgbnVtYmVyIG9mIHRva2VucyB3aXRoZHJhd24gYnkgdGhlIG1ha2VyCiAgICAvLwogICAgLy8gVGhpcyBtZXRob2Qgd2FzIGNhbGxlZCB3aXRoZHJhd1Rva2VuKCkgaW4gdGhlIG9sZCB2ZXJzaW9uCiAgICAvLwogICAgZnVuY3Rpb24gbWFrZXJXaXRoZHJhd0VSQzIwVG9rZW4oCiAgICAgICAgYWRkcmVzcyB0b2tlbkFkZHJlc3MsCiAgICAgICAgdWludDI1NiB0b2tlbnMKICAgICkgb25seU93bmVyIHJldHVybnMgKGJvb2wgb2spIHsKICAgICAgICBNYWtlcldpdGhkcmV3RVJDMjBUb2tlbih0b2tlbkFkZHJlc3MsIHRva2Vucyk7CiAgICAgICAgcmV0dXJuIEVSQzIwKHRva2VuQWRkcmVzcykudHJhbnNmZXIob3duZXIsIHRva2Vucyk7CiAgICB9CgogICAgLy8gTWFrZXIgY2FuIHdpdGhkcmF3IGV0aGVycyBmcm9tIHRoaXMgY29udHJhY3QKICAgIC8vCiAgICAvLyBUaGUgTWFrZXJXaXRoZHJld0V0aGVyKCkgZXZlbnQgaXMgbG9nZ2VkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXIKICAgIC8vICAgZXRoZXJzICBpcyB0aGUgbnVtYmVyIG9mIGV0aGVycyB3aXRoZHJhd24gYnkgdGhlIG1ha2VyCiAgICAvLwogICAgLy8gVGhpcyBtZXRob2Qgd2FzIGNhbGxlZCB3aXRoZHJhdygpIGluIHRoZSBvbGQgdmVyc2lvbgogICAgLy8KICAgIGZ1bmN0aW9uIG1ha2VyV2l0aGRyYXdFdGhlcih1aW50MjU2IGV0aGVycykgb25seU93bmVyIHJldHVybnMgKGJvb2wgb2spIHsKICAgICAgICBpZiAodGhpcy5iYWxhbmNlID49IGV0aGVycykgewogICAgICAgICAgICBNYWtlcldpdGhkcmV3RXRoZXIoZXRoZXJzKTsKICAgICAgICAgICAgcmV0dXJuIG93bmVyLnNlbmQoZXRoZXJzKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gTWFrZXIgY2FuIHRyYW5zZmVyIGV0aGVycyBmcm9tIHRoaXMgY29udHJhY3QgdG8gYW5vdGhlciBUb2tlblRyYWRlcgogICAgLy8gY29udHJhY3QsIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzOgogICAgLy8gICB0b1Rva2VuVHJhZGVyICBBbm90aGVyIFRva2VuVHJhZGVyIGNvbnRyYWN0IG93bmVkIGJ5IHRoZQogICAgLy8gICAgICAgICAgICAgICAgICBzYW1lIG93bmVyIGFuZCB3aXRoIHRoZSBzYW1lIGFzc2V0CiAgICAvLyAgIGV0aGVycyAgICAgICAgIGlzIHRoZSBudW1iZXIgb2YgZXRoZXJzIHRvIGJlIG1vdmVkCiAgICAvLwogICAgLy8gVGhlIE1ha2VyVHJhbnNmZXJyZWRFdGhlcigpIGV2ZW50IGlzIGxvZ2dlZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyCiAgICAvLyAgIHRvVG9rZW5UcmFkZXIgIFRoZSBvdGhlciBUb2tlblRyYWRlciBjb250cmFjdCBvd25lZCBieSB0aGUKICAgIC8vICAgICAgICAgICAgICAgICAgc2FtZSBvd25lciBhbmQgd2l0aCB0aGUgc2FtZSBhc3NldAogICAgLy8gICBldGhlcnMgICAgICAgICBpcyB0aGUgbnVtYmVyIG9mIGV0aGVycyB0cmFuc2ZlcnJlZAogICAgLy8KICAgIC8vIFRoZSBNYWtlckRlcG9zaXRlZEV0aGVyKCkgZXZlbnQgaXMgbG9nZ2VkIG9uIHRoZSBvdGhlcgogICAgLy8gY29udHJhY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcjoKICAgIC8vICAgZXRoZXJzICBpcyB0aGUgbnVtYmVyIG9mIGV0aGVycyBkZXBvc2l0ZWQgYnkgdGhlIG1ha2VyCiAgICAvLwogICAgZnVuY3Rpb24gbWFrZXJUcmFuc2ZlckV0aGVyKAogICAgICAgIFRva2VuVHJhZGVyIHRvVG9rZW5UcmFkZXIsCiAgICAgICAgdWludDI1NiBldGhlcnMKICAgICkgb25seU93bmVyIHJldHVybnMgKGJvb2wgb2spIHsKICAgICAgICBpZiAob3duZXIgIT0gdG9Ub2tlblRyYWRlci5vd25lcigpIHx8IGFzc2V0ICE9IHRvVG9rZW5UcmFkZXIuYXNzZXQoKSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuYmFsYW5jZSA+PSBldGhlcnMpIHsKICAgICAgICAgICAgTWFrZXJUcmFuc2ZlcnJlZEV0aGVyKHRvVG9rZW5UcmFkZXIsIGV0aGVycyk7CiAgICAgICAgICAgIHRvVG9rZW5UcmFkZXIubWFrZXJEZXBvc2l0RXRoZXIudmFsdWUoZXRoZXJzKSgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBUYWtlciBidXlzIGFzc2V0IHRva2VucyBieSBzZW5kaW5nIGV0aGVycwogICAgLy8KICAgIC8vIFRoZSBUYWtlckJvdWdodEFzc2V0KCkgZXZlbnQgaXMgbG9nZ2VkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzCiAgICAvLyAgIGJ1eWVyICAgICAgICAgICBpcyB0aGUgYnV5ZXIncyBhZGRyZXNzCiAgICAvLyAgIGV0aGVyc1NlbnQgICAgICBpcyB0aGUgbnVtYmVyIG9mIGV0aGVycyBzZW50IGJ5IHRoZSBidXllcgogICAgLy8gICBldGhlcnNSZXR1cm5lZCAgaXMgdGhlIG51bWJlciBvZiBldGhlcnMgc2VudCBiYWNrIHRvIHRoZSBidXllciBhcwogICAgLy8gICAgICAgICAgICAgICAgICAgY2hhbmdlCiAgICAvLyAgIHRva2Vuc0JvdWdodCAgICBpcyB0aGUgbnVtYmVyIG9mIGFzc2V0IHRva2VucyBzZW50IHRvIHRoZSBidXllcgogICAgLy8KICAgIC8vIFRoaXMgbWV0aG9kIHdhcyBjYWxsZWQgYnV5KCkgaW4gdGhlIG9sZCB2ZXJzaW9uCiAgICAvLwogICAgZnVuY3Rpb24gdGFrZXJCdXlBc3NldCgpIHBheWFibGUgewogICAgICAgIGlmIChzZWxsc1Rva2VucyB8fCBtc2cuc2VuZGVyID09IG93bmVyKSB7CiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBzZWxsUHJpY2UgaGFzIGFscmVhZHkgYmVlbiB2YWxpZGF0ZWQgYXMgPiAwCiAgICAgICAgICAgIHVpbnQgb3JkZXIgICAgPSBtc2cudmFsdWUgLyBzZWxsUHJpY2U7CiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB1bml0cyBoYXMgYWxyZWFkeSBiZWVuIHZhbGlkYXRlZCBhcyA+IDAKICAgICAgICAgICAgdWludCBjYW5fc2VsbCA9IEVSQzIwKGFzc2V0KS5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSkgLyB1bml0czsKICAgICAgICAgICAgdWludDI1NiBjaGFuZ2UgPSAwOwogICAgICAgICAgICBpZiAobXNnLnZhbHVlID4gKGNhbl9zZWxsICogc2VsbFByaWNlKSkgewogICAgICAgICAgICAgICAgY2hhbmdlICA9IG1zZy52YWx1ZSAtIChjYW5fc2VsbCAqIHNlbGxQcmljZSk7CiAgICAgICAgICAgICAgICBvcmRlciA9IGNhbl9zZWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjaGFuZ2UgPiAwKSB7CiAgICAgICAgICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChjaGFuZ2UpKSB0aHJvdzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAob3JkZXIgPiAwKSB7CiAgICAgICAgICAgICAgICBpZiAoIUVSQzIwKGFzc2V0KS50cmFuc2Zlcihtc2cuc2VuZGVyLCBvcmRlciAqIHVuaXRzKSkgdGhyb3c7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgVGFrZXJCb3VnaHRBc3NldChtc2cuc2VuZGVyLCBtc2cudmFsdWUsIGNoYW5nZSwgb3JkZXIgKiB1bml0cyk7CiAgICAgICAgfQogICAgICAgIC8vIFJldHVybiB1c2VyIGZ1bmRzIGlmIHRoZSBjb250cmFjdCBpcyBub3Qgc2VsbGluZwogICAgICAgIGVsc2UgaWYgKCFtc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlKSkgdGhyb3c7CiAgICB9CgogICAgLy8gVGFrZXIgc2VsbHMgYXNzZXQgdG9rZW5zIGZvciBldGhlcnMgYnk6CiAgICAvLyAxLiBDYWxsaW5nIHRoZSBhc3NldCdzIGFwcHJvdmUoKSBtZXRob2Qgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnMKICAgIC8vICAgIF9zcGVuZGVyICAgICAgICAgICAgaXMgdGhlIGFkZHJlc3Mgb2YgdGhpcyBjb250cmFjdAogICAgLy8gICAgX3ZhbHVlICAgICAgICAgICAgICBpcyB0aGUgbnVtYmVyIG9mIHRva2VucyB0byBiZSBzb2xkCiAgICAvLyAyLiBDYWxsaW5nIHRoaXMgdGFrZXJTZWxsQXNzZXQoKSBtZXRob2Qgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcgogICAgLy8gICAgZXRoZXJWYWx1ZU9mVG9rZW5zICBpcyB0aGUgZXRoZXIgdmFsdWUgb2YgdGhlIGFzc2V0IHRva2VucyB0byBiZSBzb2xkCiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIGJ5IHRoZSB0YWtlcgogICAgLy8KICAgIC8vIFRoZSBUYWtlclNvbGRBc3NldCgpIGV2ZW50IGlzIGxvZ2dlZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVycwogICAgLy8gICBzZWxsZXIgICAgICAgICAgICAgICAgICAgIGlzIHRoZSBzZWxsZXIncyBhZGRyZXNzCiAgICAvLyAgIGV0aGVyVmFsdWVPZlRva2Vuc1RvU2VsbCAgaXMgdGhlIGV0aGVyIHZhbHVlIG9mIHRoZSBhc3NldCB0b2tlbnMgYmVpbmcKICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2xkIGJ5IHRoZSB0YWtlcgogICAgLy8gICB0b2tlbnNTb2xkICAgICAgICAgICAgICAgIGlzIHRoZSBudW1iZXIgb2YgdGhlIGFzc2V0IHRva2VucyBzb2xkCiAgICAvLyAgIGV0aGVyVmFsdWVPZlRva2Vuc1NvbGQgICAgaXMgdGhlIGV0aGVyIHZhbHVlIG9mIHRoZSBhc3NldCB0b2tlbnMgc29sZAogICAgLy8KICAgIC8vIFRoaXMgbWV0aG9kIHdhcyBjYWxsZWQgc2VsbCgpIGluIHRoZSBvbGQgdmVyc2lvbgogICAgLy8KICAgIGZ1bmN0aW9uIHRha2VyU2VsbEFzc2V0KHVpbnQyNTYgZXRoZXJWYWx1ZU9mVG9rZW5zVG9TZWxsKSB7CiAgICAgICAgaWYgKGJ1eXNUb2tlbnMgfHwgbXNnLnNlbmRlciA9PSBvd25lcikgewogICAgICAgICAgICAvLyBNYXhpbXVtIG51bWJlciBvZiB0b2tlbiB0aGUgY29udHJhY3QgY2FuIGJ1eQogICAgICAgICAgICAvLyBOb3RlIHRoYXQgYnV5UHJpY2UgaGFzIGFscmVhZHkgYmVlbiB2YWxpZGF0ZWQgYXMgPiAwCiAgICAgICAgICAgIHVpbnQyNTYgY2FuX2J1eSA9IHRoaXMuYmFsYW5jZSAvIGJ1eVByaWNlOwogICAgICAgICAgICAvLyBUb2tlbiBsb3RzIGF2YWlsYWJsZQogICAgICAgICAgICAvLyBOb3RlIHRoYXQgdW5pdHMgaGFzIGFscmVhZHkgYmVlbiB2YWxpZGF0ZWQgYXMgPiAwCiAgICAgICAgICAgIHVpbnQyNTYgb3JkZXIgPSBldGhlclZhbHVlT2ZUb2tlbnNUb1NlbGwgLyB1bml0czsKICAgICAgICAgICAgLy8gQWRqdXN0IG9yZGVyIGZvciBmdW5kcyBhdmFpbGFibGUKICAgICAgICAgICAgaWYgKG9yZGVyID4gY2FuX2J1eSkgb3JkZXIgPSBjYW5fYnV5OwogICAgICAgICAgICBpZiAob3JkZXIgPiAwKSB7CiAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IHVzZXIgdG9rZW5zCiAgICAgICAgICAgICAgICBpZiAoIUVSQzIwKGFzc2V0KS50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgYWRkcmVzcyh0aGlzKSwgb3JkZXIgKiB1bml0cykpIHRocm93OwogICAgICAgICAgICAgICAgLy8gUGF5IHVzZXIKICAgICAgICAgICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKG9yZGVyICogYnV5UHJpY2UpKSB0aHJvdzsKICAgICAgICAgICAgfQogICAgICAgICAgICBUYWtlclNvbGRBc3NldChtc2cuc2VuZGVyLCBldGhlclZhbHVlT2ZUb2tlbnNUb1NlbGwsIG9yZGVyICogdW5pdHMsIG9yZGVyICogYnV5UHJpY2UpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBUYWtlciBidXlzIHRva2VucyBieSBzZW5kaW5nIGV0aGVycwogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgdGFrZXJCdXlBc3NldCgpOwogICAgfQp9CgovLyBUaGlzIGNvbnRyYWN0IGRlcGxveXMgVG9rZW5UcmFkZXIgY29udHJhY3RzIGFuZCBsb2dzIHRoZSBldmVudApjb250cmFjdCBUb2tlblRyYWRlckZhY3RvcnkgaXMgT3duZWQgewoKICAgIGV2ZW50IFRyYWRlTGlzdGluZyhhZGRyZXNzIGluZGV4ZWQgb3duZXJBZGRyZXNzLCBhZGRyZXNzIGluZGV4ZWQgdG9rZW5UcmFkZXJBZGRyZXNzLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBhc3NldCwgdWludDI1NiBidXlQcmljZSwgdWludDI1NiBzZWxsUHJpY2UsIHVpbnQyNTYgdW5pdHMsCiAgICAgICAgYm9vbCBidXlzVG9rZW5zLCBib29sIHNlbGxzVG9rZW5zKTsKICAgIGV2ZW50IE93bmVyV2l0aGRyZXdFUkMyMFRva2VuKGFkZHJlc3MgaW5kZXhlZCB0b2tlbkFkZHJlc3MsIHVpbnQyNTYgdG9rZW5zKTsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgX3ZlcmlmeTsKCiAgICAvLyBBbnlvbmUgY2FuIGNhbGwgdGhpcyBtZXRob2QgdG8gdmVyaWZ5IHRoZSBzZXR0aW5ncyBvZiBhCiAgICAvLyBUb2tlblRyYWRlciBjb250cmFjdC4gVGhlIHBhcmFtZXRlcnMgYXJlOgogICAgLy8gICB0cmFkZUNvbnRyYWN0ICBpcyB0aGUgYWRkcmVzcyBvZiBhIFRva2VuVHJhZGVyIGNvbnRyYWN0CiAgICAvLwogICAgLy8gUmV0dXJuIHZhbHVlczoKICAgIC8vICAgdmFsaWQgICAgICAgIGRpZCB0aGlzIFRva2VuVHJhZGVyRmFjdG9yeSBjcmVhdGUgdGhlIFRva2VuVHJhZGVyIGNvbnRyYWN0PwogICAgLy8gICBvd25lciAgICAgICAgaXMgdGhlIG93bmVyIG9mIHRoZSBUb2tlblRyYWRlciBjb250cmFjdAogICAgLy8gICBhc3NldCAgICAgICAgaXMgdGhlIEVSQzIwIGFzc2V0IGFkZHJlc3MKICAgIC8vICAgYnV5UHJpY2UgICAgIGlzIHRoZSBidXkgcHJpY2UgaW4gZXRoZXJzIHBlciBgdW5pdHNgIG9mIGFzc2V0IHRva2VucwogICAgLy8gICBzZWxsUHJpY2UgICAgaXMgdGhlIHNlbGwgcHJpY2UgaW4gZXRoZXJzIHBlciBgdW5pdHNgIG9mIGFzc2V0IHRva2VucwogICAgLy8gICB1bml0cyAgICAgICAgaXMgdGhlIG51bWJlciBvZiB1bml0cyBvZiBhc3NldCB0b2tlbnMKICAgIC8vICAgYnV5c1Rva2VucyAgIGlzIHRoZSBUb2tlblRyYWRlciBjb250cmFjdCBidXlpbmcgdG9rZW5zPwogICAgLy8gICBzZWxsc1Rva2VucyAgaXMgdGhlIFRva2VuVHJhZGVyIGNvbnRyYWN0IHNlbGxpbmcgdG9rZW5zPwogICAgLy8KICAgIGZ1bmN0aW9uIHZlcmlmeShhZGRyZXNzIHRyYWRlQ29udHJhY3QpIGNvbnN0YW50IHJldHVybnMgKAogICAgICAgIGJvb2wgICAgdmFsaWQsCiAgICAgICAgYWRkcmVzcyBvd25lciwKICAgICAgICBhZGRyZXNzIGFzc2V0LAogICAgICAgIHVpbnQyNTYgYnV5UHJpY2UsCiAgICAgICAgdWludDI1NiBzZWxsUHJpY2UsCiAgICAgICAgdWludDI1NiB1bml0cywKICAgICAgICBib29sICAgIGJ1eXNUb2tlbnMsCiAgICAgICAgYm9vbCAgICBzZWxsc1Rva2VucwogICAgKSB7CiAgICAgICAgdmFsaWQgPSBfdmVyaWZ5W3RyYWRlQ29udHJhY3RdOwogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICBUb2tlblRyYWRlciB0ID0gVG9rZW5UcmFkZXIodHJhZGVDb250cmFjdCk7CiAgICAgICAgICAgIG93bmVyICAgICAgICAgPSB0Lm93bmVyKCk7CiAgICAgICAgICAgIGFzc2V0ICAgICAgICAgPSB0LmFzc2V0KCk7CiAgICAgICAgICAgIGJ1eVByaWNlICAgICAgPSB0LmJ1eVByaWNlKCk7CiAgICAgICAgICAgIHNlbGxQcmljZSAgICAgPSB0LnNlbGxQcmljZSgpOwogICAgICAgICAgICB1bml0cyAgICAgICAgID0gdC51bml0cygpOwogICAgICAgICAgICBidXlzVG9rZW5zICAgID0gdC5idXlzVG9rZW5zKCk7CiAgICAgICAgICAgIHNlbGxzVG9rZW5zICAgPSB0LnNlbGxzVG9rZW5zKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIE1ha2VyIGNhbiBjYWxsIHRoaXMgbWV0aG9kIHRvIGNyZWF0ZSBhIG5ldyBUb2tlblRyYWRlciBjb250cmFjdAogICAgLy8gd2l0aCB0aGUgbWFrZXIgYmVpbmcgdGhlIG93bmVyIG9mIHRoaXMgbmV3IGNvbnRyYWN0CiAgICAvLwogICAgLy8gUGFyYW1ldGVyczoKICAgIC8vICAgYXNzZXQgICAgICAgIGlzIHRoZSBFUkMyMCBhc3NldCBhZGRyZXNzCiAgICAvLyAgIGJ1eVByaWNlICAgICBpcyB0aGUgYnV5IHByaWNlIGluIGV0aGVycyBwZXIgYHVuaXRzYCBvZiBhc3NldCB0b2tlbnMKICAgIC8vICAgc2VsbFByaWNlICAgIGlzIHRoZSBzZWxsIHByaWNlIGluIGV0aGVycyBwZXIgYHVuaXRzYCBvZiBhc3NldCB0b2tlbnMKICAgIC8vICAgdW5pdHMgICAgICAgIGlzIHRoZSBudW1iZXIgb2YgdW5pdHMgb2YgYXNzZXQgdG9rZW5zCiAgICAvLyAgIGJ1eXNUb2tlbnMgICBpcyB0aGUgVG9rZW5UcmFkZXIgY29udHJhY3QgYnV5aW5nIHRva2Vucz8KICAgIC8vICAgc2VsbHNUb2tlbnMgIGlzIHRoZSBUb2tlblRyYWRlciBjb250cmFjdCBzZWxsaW5nIHRva2Vucz8KICAgIC8vCiAgICAvLyBGb3IgZXhhbXBsZSwgbGlzdGluZyBhIFRva2VuVHJhZGVyIGNvbnRyYWN0IG9uIHRoZSBSRVAgQXVndXIgdG9rZW4gd2hlcmUKICAgIC8vIHRoZSBjb250cmFjdCB3aWxsIGJ1eSBSRVAgdG9rZW5zIGF0IGEgcmF0ZSBvZiAzOTAwMC8xMDAwMDAgPSAwLjM5IEVUSAogICAgLy8gcGVyIFJFUCB0b2tlbiBhbmQgc2VsbCBSRVAgdG9rZW5zIGF0IGEgcmF0ZSBvZiA0MTAwMC8xMDAwMDAgPSAwLjQxIEVUSAogICAgLy8gcGVyIFJFUCB0b2tlbjoKICAgIC8vICAgYXNzZXQgICAgICAgIDB4NDhjODBmMWY0ZDUzZDU5NTFlNWQ1NDM4YjU0Y2JhODRmMjlmMzJhNQogICAgLy8gICBidXlQcmljZSAgICAgMzkwMDAKICAgIC8vICAgc2VsbFByaWNlICAgIDQxMDAwCiAgICAvLyAgIHVuaXRzICAgICAgICAxMDAwMDAKICAgIC8vICAgYnV5c1Rva2VucyAgIHRydWUKICAgIC8vICAgc2VsbHNUb2tlbnMgIHRydWUKICAgIC8vCiAgICAvLyBUaGUgVHJhZGVMaXN0aW5nKCkgZXZlbnQgaXMgbG9nZ2VkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzCiAgICAvLyAgIG93bmVyQWRkcmVzcyAgICAgICAgaXMgdGhlIE1ha2VyJ3MgYWRkcmVzcwogICAgLy8gICB0b2tlblRyYWRlckFkZHJlc3MgIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSBuZXdseSBjcmVhdGVkIFRva2VuVHJhZGVyIGNvbnRyYWN0CiAgICAvLyAgIGFzc2V0ICAgICAgICAgICAgICAgaXMgdGhlIEVSQzIwIGFzc2V0IGFkZHJlc3MKICAgIC8vICAgYnV5UHJpY2UgICAgICAgICAgICBpcyB0aGUgYnV5IHByaWNlIGluIGV0aGVycyBwZXIgYHVuaXRzYCBvZiBhc3NldCB0b2tlbnMKICAgIC8vICAgc2VsbFByaWNlICAgICAgICAgICBpcyB0aGUgc2VsbCBwcmljZSBpbiBldGhlcnMgcGVyIGB1bml0c2Agb2YgYXNzZXQgdG9rZW5zCiAgICAvLyAgIHVuaXQgICAgICAgICAgICAgICAgaXMgdGhlIG51bWJlciBvZiB1bml0cyBvZiBhc3NldCB0b2tlbnMKICAgIC8vICAgYnV5c1Rva2VucyAgICAgICAgICBpcyB0aGUgVG9rZW5UcmFkZXIgY29udHJhY3QgYnV5aW5nIHRva2Vucz8KICAgIC8vICAgc2VsbHNUb2tlbnMgICAgICAgICBpcyB0aGUgVG9rZW5UcmFkZXIgY29udHJhY3Qgc2VsbGluZyB0b2tlbnM/CiAgICAvLwogICAgZnVuY3Rpb24gY3JlYXRlVHJhZGVDb250cmFjdCgKICAgICAgICBhZGRyZXNzIGFzc2V0LAogICAgICAgIHVpbnQyNTYgYnV5UHJpY2UsCiAgICAgICAgdWludDI1NiBzZWxsUHJpY2UsCiAgICAgICAgdWludDI1NiB1bml0cywKICAgICAgICBib29sICAgIGJ1eXNUb2tlbnMsCiAgICAgICAgYm9vbCAgICBzZWxsc1Rva2VucwogICAgKSByZXR1cm5zIChhZGRyZXNzIHRyYWRlcikgewogICAgICAgIC8vIENhbm5vdCBoYXZlIGludmFsaWQgYXNzZXQKICAgICAgICBpZiAoYXNzZXQgPT0gMHgwKSB0aHJvdzsKICAgICAgICAvLyBDYW5ub3Qgc2V0IHplcm8gb3IgbmVnYXRpdmUgcHJpY2UKICAgICAgICBpZiAoYnV5UHJpY2UgPD0gMCB8fCBzZWxsUHJpY2UgPD0gMCkgdGhyb3c7CiAgICAgICAgLy8gTXVzdCBtYWtlIHByb2ZpdCBvbiBzcHJlYWQKICAgICAgICBpZiAoYnV5UHJpY2UgPj0gc2VsbFByaWNlKSB0aHJvdzsKICAgICAgICAvLyBDYW5ub3QgYnV5IG9yIHNlbGwgemVybyBvciBuZWdhdGl2ZSB1bml0cwogICAgICAgIGlmICh1bml0cyA8PSAwKSB0aHJvdzsKICAgICAgICB0cmFkZXIgPSBuZXcgVG9rZW5UcmFkZXIoCiAgICAgICAgICAgIGFzc2V0LAogICAgICAgICAgICBidXlQcmljZSwKICAgICAgICAgICAgc2VsbFByaWNlLAogICAgICAgICAgICB1bml0cywKICAgICAgICAgICAgYnV5c1Rva2VucywKICAgICAgICAgICAgc2VsbHNUb2tlbnMpOwogICAgICAgIC8vIFJlY29yZCB0aGF0IHRoaXMgZmFjdG9yeSBjcmVhdGVkIHRoZSB0cmFkZXIKICAgICAgICBfdmVyaWZ5W3RyYWRlcl0gPSB0cnVlOwogICAgICAgIC8vIFNldCB0aGUgb3duZXIgdG8gd2hvZXZlciBjYWxsZWQgdGhlIGZ1bmN0aW9uCiAgICAgICAgVG9rZW5UcmFkZXIodHJhZGVyKS50cmFuc2Zlck93bmVyc2hpcChtc2cuc2VuZGVyKTsKICAgICAgICBUcmFkZUxpc3RpbmcobXNnLnNlbmRlciwgdHJhZGVyLCBhc3NldCwgYnV5UHJpY2UsIHNlbGxQcmljZSwgdW5pdHMsIGJ1eXNUb2tlbnMsIHNlbGxzVG9rZW5zKTsKICAgIH0KCiAgICAvLyBGYWN0b3J5IG93bmVyIGNhbiB3aXRoZHJhdyBhbnkgRVJDMjAgYXNzZXQgdG9rZW5zIGZyb20gdGhpcyBjb250cmFjdAogICAgLy8KICAgIC8vIFRoaXMgbWV0aG9kIGlzIGluY2x1ZGVkIGluIHRoZSBjYXNlIHdoZXJlIHRoaXMgY29udHJhY3QgcmVjZWl2ZXMKICAgIC8vIHRoZSB3cm9uZyB0b2tlbnMKICAgIC8vCiAgICAvLyBUaGUgT3duZXJXaXRoZHJld0VSQzIwVG9rZW4oKSBldmVudCBpcyBsb2dnZWQgd2l0aCB0aGUgZm9sbG93aW5nCiAgICAvLyBwYXJhbWV0ZXI6CiAgICAvLyAgIHRva2VuQWRkcmVzcyAgaXMgdGhlIGFkZHJlc3Mgb2YgdGhlIHRva2VucyB3aXRoZHJhd24gYnkgdGhlIG1ha2VyCiAgICAvLyAgIHRva2VucyAgICAgICAgaXMgdGhlIG51bWJlciBvZiB0b2tlbnMgd2l0aGRyYXduIGJ5IHRoZSBtYWtlcgogICAgLy8KICAgIGZ1bmN0aW9uIG93bmVyV2l0aGRyYXdFUkMyMFRva2VuKGFkZHJlc3MgdG9rZW5BZGRyZXNzLCB1aW50MjU2IHRva2Vucykgb25seU93bmVyIHJldHVybnMgKGJvb2wgb2spIHsKICAgICAgICBPd25lcldpdGhkcmV3RVJDMjBUb2tlbih0b2tlbkFkZHJlc3MsIHRva2Vucyk7CiAgICAgICAgcmV0dXJuIEVSQzIwKHRva2VuQWRkcmVzcykudHJhbnNmZXIob3duZXIsIHRva2Vucyk7CiAgICB9CgogICAgLy8gUHJldmVudHMgYWNjaWRlbnRhbCBzZW5kaW5nIG9mIGV0aGVyIHRvIHRoZSBmYWN0b3J5CiAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb3c7CiAgICB9Cn0='.
	

]
