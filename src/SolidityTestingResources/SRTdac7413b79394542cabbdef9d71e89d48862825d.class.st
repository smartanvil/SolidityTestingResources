Class {
	#name : #SRTdac7413b79394542cabbdef9d71e89d48862825d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdac7413b79394542cabbdef9d71e89d48862825d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBGaWxlOiBjb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgovLyBGaWxlOiBjb250cmFjdHMvRGl2aWRlbmRzLnNvbAoKY29udHJhY3QgRGl2aWRlbmRDb250cmFjdCB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgZXZlbnQgRGl2aWRlbmRzKHVpbnQyNTYgcm91bmQsIHVpbnQyNTYgdmFsdWUpOwogIGV2ZW50IENsYWltRGl2aWRlbmRzKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQyNTYgdmFsdWUpOwoKICB1aW50MjU2IHRvdGFsRGl2aWRlbmRzQW1vdW50ID0gMDsKICB1aW50MjU2IHRvdGFsRGl2aWRlbmRzUm91bmRzID0gMDsKICB1aW50MjU2IHRvdGFsVW5QYXllZERpdmlkZW5kc0Ftb3VudCA9IDA7CiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHBheWVkRGl2aWRlbmRzOwoKCiAgZnVuY3Rpb24gZ2V0VG90YWxEaXZpZGVuZHNBbW91bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHRvdGFsRGl2aWRlbmRzQW1vdW50OwogIH0KCiAgZnVuY3Rpb24gZ2V0VG90YWxEaXZpZGVuZHNSb3VuZHMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHRvdGFsRGl2aWRlbmRzUm91bmRzOwogIH0KCiAgZnVuY3Rpb24gZ2V0VG90YWxVblBheWVkRGl2aWRlbmRzQW1vdW50KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiB0b3RhbFVuUGF5ZWREaXZpZGVuZHNBbW91bnQ7CiAgfQoKICBmdW5jdGlvbiBkaXZpZGVuZHNBbW91bnQoYWRkcmVzcyBpbnZlc3RvcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIGNsYWltRGl2aWRlbmRzKCkgcGF5YWJsZSBwdWJsaWM7CgogIGZ1bmN0aW9uIHBheURpdmlkZW5kcygpIHBheWFibGUgcHVibGljIHsKICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CiAgICB0b3RhbERpdmlkZW5kc0Ftb3VudCA9IHRvdGFsRGl2aWRlbmRzQW1vdW50LmFkZChtc2cudmFsdWUpOwogICAgdG90YWxVblBheWVkRGl2aWRlbmRzQW1vdW50ID0gdG90YWxVblBheWVkRGl2aWRlbmRzQW1vdW50LmFkZChtc2cudmFsdWUpOwogICAgdG90YWxEaXZpZGVuZHNSb3VuZHMgKz0gMTsKICAgIERpdmlkZW5kcyh0b3RhbERpdmlkZW5kc1JvdW5kcywgbXNnLnZhbHVlKTsKICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy90b2tlbi9FUkMyMC9FUkMyMEJhc2ljLnNvbAoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovLyBGaWxlOiBjb250cmFjdHMvdG9rZW4vRVJDMjAvRVJDMjAuc29sCgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgovLyBGaWxlOiBjb250cmFjdHMvRVNsb3RzSUNPVG9rZW4uc29sCgpjb250cmFjdCBFU2xvdHNJQ09Ub2tlbiBpcyBFUkMyMCwgRGl2aWRlbmRDb250cmFjdCB7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkV0aGVyZXVtIFNsb3QgTWFjaGluZSBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJFU1QiOwogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogICAgZnVuY3Rpb24gbWF4VG9rZW5zVG9TYWxlKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiBhdmFpbGFibGVUb2tlbnMoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGNvbXBsZXRlSUNPKCkgcHVibGljOwogICAgZnVuY3Rpb24gY29ubmVjdENyb3dkc2FsZUNvbnRyYWN0KGFkZHJlc3MgY3Jvd2RzYWxlQ29udHJhY3QpIHB1YmxpYzsKfQoKLy8gRmlsZTogY29udHJhY3RzL0VTbG90c0lDT1Rva2VuRGVwbG95ZWQuc29sCgpjb250cmFjdCBFU2xvdHNJQ09Ub2tlbkRlcGxveWVkIHsKCiAgICAvLyBhZGRyZXNzIG9mIHRva2VuIGNvbnRyYWN0IChmb3IgZGl2aWRlbmQgcGF5bWVudHMpCiAgICBhZGRyZXNzIGludGVybmFsIHRva2VuQ29udHJhY3RBZGRyZXNzOwogICAgRVNsb3RzSUNPVG9rZW4gaWNvQ29udHJhY3Q7CgogICAgZnVuY3Rpb24gRVNsb3RzSUNPVG9rZW5EZXBsb3llZChhZGRyZXNzIHRva2VuQ29udHJhY3QpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSh0b2tlbkNvbnRyYWN0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHRva2VuQ29udHJhY3RBZGRyZXNzID0gdG9rZW5Db250cmFjdDsKICAgICAgICBpY29Db250cmFjdCA9IEVTbG90c0lDT1Rva2VuKHRva2VuQ29udHJhY3RBZGRyZXNzKTsKICAgIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL293bmVyc2hpcC9Pd25hYmxlLnNvbAoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9FU2xvdHNDcm93ZHNhbGUuc29sCgpjb250cmFjdCBFU2xvdHNDcm93ZHNhbGUgaXMgT3duYWJsZSwgRVNsb3RzSUNPVG9rZW5EZXBsb3llZCB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBlbnVtIFN0YXRlIHsgUHJpdmF0ZVByZVNhbGUsIFByZVNhbGUsIEFjdGl2ZUlDTywgSUNPQ29tcGxldGUgfQogICAgU3RhdGUgcHVibGljIHN0YXRlOwoKICAgIC8vIHN0YXJ0IGFuZCBlbmQgdGltZXN0YW1wcyBmb3IgZGF0ZXMgd2hlbiBpbnZlc3RtZW50cyBhcmUgYWxsb3dlZCAoYm90aCBpbmNsdXNpdmUpCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWU7CiAgICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOwoKICAgIC8vIGFkZHJlc3MgZm9yIGZ1bmRzIGNvbGxlY3RpbmcKICAgIGFkZHJlc3MgcHVibGljIHdhbGxldCA9IDB4N2I5N0IzMUUxMmY3ZDAyOTc2OWM1M2NCOTFjODNkMjk2MTFBNEY3QTsKCiAgICAvLyBob3cgbWFueSB0b2tlbiB1bml0cyBhIGJ1eWVyIGdldHMgcGVyIHdlaQogICAgdWludDI1NiBwdWJsaWMgcmF0ZSA9IDEwMDA7IC8vYmFzZSBwcmljZTogMSBFU1QgdG9rZW4gY29zdHMgMC4wMDEgRXRoZXIKCiAgICAvLyBhbW91bnQgb2YgcmFpc2VkIG1vbmV5IGluIHdlaQogICAgdWludDI1NiBwdWJsaWMgd2VpUmFpc2VkOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHByaXZhdGVJbnZlc3RvcnM7CgogICAgLyoqCiAgICogZXZlbnQgZm9yIHRva2VuIHB1cmNoYXNlIGxvZ2dpbmcKICAgKiBAcGFyYW0gcHVyY2hhc2VyIHdobyBwYWlkIGZvciB0aGUgdG9rZW5zCiAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IHdobyBnb3QgdGhlIHRva2VucwogICAqIEBwYXJhbSB2YWx1ZSB3ZWlzIHBhaWQgZm9yIHB1cmNoYXNlCiAgICogQHBhcmFtIGFtb3VudCBhbW91bnQgb2YgdG9rZW5zIHB1cmNoYXNlZAogICAqLwogICAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKCiAgICBmdW5jdGlvbiBFU2xvdHNDcm93ZHNhbGUoYWRkcmVzcyB0b2tlbkNvbnRyYWN0KSBwdWJsaWMKICAgIEVTbG90c0lDT1Rva2VuRGVwbG95ZWQodG9rZW5Db250cmFjdCkKICAgIHsKICAgICAgICBzdGF0ZSA9IFN0YXRlLlByaXZhdGVQcmVTYWxlOwogICAgICAgIHN0YXJ0VGltZSA9IDA7CiAgICAgICAgZW5kVGltZSA9IDA7CiAgICAgICAgd2VpUmFpc2VkID0gMDsKICAgICAgICAvL2RvIG5vdCBmb3JnZXQgdG8gY2FsbAogICAgICAgIC8vaWNvQ29udHJhY3QuY29ubmVjdENyb3dkc2FsZUNvbnRyYWN0KHRoaXMpOwogICAgfQoKICAgIC8vIGZhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGJ1eSB0b2tlbnMKICAgIGZ1bmN0aW9uICgpIGV4dGVybmFsIHBheWFibGUgewogICAgICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvLyBsb3cgbGV2ZWwgdG9rZW4gcHVyY2hhc2UgZnVuY3Rpb24KICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIGJlbmVmaWNpYXJ5KSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShiZW5lZmljaWFyeSAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKHZhbGlkUHVyY2hhc2UoKSk7CgoKICAgICAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKICAgICAgICAvLyBjYWxjdWxhdGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBjcmVhdGVkCiAgICAgICAgdWludDI1NiB0b2tlbnMgPSBnZXRUb2tlbkFtb3VudCh3ZWlBbW91bnQpOwogICAgICAgIHVpbnQyNTYgYXZfdG9rZW5zID0gaWNvQ29udHJhY3QuYXZhaWxhYmxlVG9rZW5zKCk7CiAgICAgICAgcmVxdWlyZShhdl90b2tlbnMgPj0gdG9rZW5zKTsKICAgICAgICBpZihzdGF0ZSA9PSBTdGF0ZS5Qcml2YXRlUHJlU2FsZSkgewogICAgICAgICAgICByZXF1aXJlKHByaXZhdGVJbnZlc3RvcnNbYmVuZWZpY2lhcnldID4gMCk7CiAgICAgICAgICAgIC8vcmVzdHJpY3Qgc2FsZXMgaW4gcHJpdmF0ZSBwZXJpb2QKICAgICAgICAgICAgaWYocHJpdmF0ZUludmVzdG9yc1tiZW5lZmljaWFyeV0gPCB0b2tlbnMpIHsKICAgICAgICAgICAgICAgIHRva2VucyA9IHByaXZhdGVJbnZlc3RvcnNbYmVuZWZpY2lhcnldOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICAgICAvLyB1cGRhdGUgc3RhdGUKICAgICAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CiAgICAgICAgLy93ZSBjYW4gZ2V0IG9ubHkgNzUlIHRvIGRldmVsb3BtZW50LCAyNSUgd2lsbCBiZSB1bmxvY2tlZCBhZnRlciAyIG1vbnRocyB0byBmaWxsIG91dCBjYXNpbm8gY29udHJhY3QgYmFua3JvbGwKICAgICAgICB3YWxsZXQudHJhbnNmZXIocGVyY2VudHMod2VpQW1vdW50LCA3NSkpOwogICAgICAgIGljb0NvbnRyYWN0LnRyYW5zZmVyRnJvbShvd25lciwgYmVuZWZpY2lhcnksIHRva2Vucyk7CiAgICAgICAgVG9rZW5QdXJjaGFzZShtc2cuc2VuZGVyLCBiZW5lZmljaWFyeSwgd2VpQW1vdW50LCB0b2tlbnMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZFByaXZhdGVJbnZlc3RvcihhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlByaXZhdGVQcmVTYWxlKTsKICAgICAgICBwcml2YXRlSW52ZXN0b3JzW2JlbmVmaWNpYXJ5XSA9IHByaXZhdGVJbnZlc3RvcnNbYmVuZWZpY2lhcnldLmFkZCh2YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gc3RhcnRQcmVTYWxlKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5Qcml2YXRlUHJlU2FsZSk7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5QcmVTYWxlOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0SUNPKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5QcmVTYWxlKTsKICAgICAgICBzdGF0ZSA9IFN0YXRlLkFjdGl2ZUlDTzsKICAgICAgICBzdGFydFRpbWUgPSBub3c7CiAgICAgICAgZW5kVGltZSA9IHN0YXJ0VGltZSArIDcgd2Vla3M7CiAgICB9CgogICAgZnVuY3Rpb24gc3RvcElDTygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlSUNPKTsKICAgICAgICByZXF1aXJlKGljb0NvbnRyYWN0LmF2YWlsYWJsZVRva2VucygpID09IDAgfHwgKGVuZFRpbWUgPiAwICYmIG5vdyA+PSBlbmRUaW1lKSk7CiAgICAgICAgcmVxdWlyZSh3ZWlSYWlzZWQgPiAwKTsKICAgICAgICBzdGF0ZSA9IFN0YXRlLklDT0NvbXBsZXRlOwogICAgICAgIGVuZFRpbWUgPSBub3c7CiAgICB9CgogICAgLy8gQWxsb3cgZ2V0dGluZyBzbG90cyBiYW5rcm9sbCBhZnRlciA2MCBkYXlzIG9ubHkKICAgIGZ1bmN0aW9uIGNsZWFudXAoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLklDT0NvbXBsZXRlKTsKICAgICAgICByZXF1aXJlKG5vdyA+PSAoZW5kVGltZSArIDYwIGRheXMpKTsKICAgICAgICB3YWxsZXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KCiAgICAvLyBAcmV0dXJuIHRydWUgaWYgY3Jvd2RzYWxlIGVuZGVkCiAgICBmdW5jdGlvbiBoYXNFbmRlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3RhdGUgPT0gU3RhdGUuSUNPQ29tcGxldGUgfHwgaWNvQ29udHJhY3QuYXZhaWxhYmxlVG9rZW5zKCkgPT0gMCB8fCAoZW5kVGltZSA+IDAgJiYgbm93ID49IGVuZFRpbWUpOwogICAgfQoKICAgIC8vIENhbGN1bGF0ZSBhbW91bnQgb2YgdG9rZW5zIGRlcGVuZGluZyBvbiBjcm93ZHNhbGUgcGhhc2UgYW5kIHRpbWUKICAgIGZ1bmN0aW9uIGdldFRva2VuQW1vdW50KHVpbnQyNTYgd2VpQW1vdW50KSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHRvdGFsVG9rZW5zID0gd2VpQW1vdW50Lm11bChyYXRlKTsKICAgICAgICB1aW50MjU2IGJvbnVzID0gZ2V0TGFyZ2VBbW91bnRCb251cyh3ZWlBbW91bnQpOwogICAgICAgIGlmKHN0YXRlID09IFN0YXRlLlByaXZhdGVQcmVTYWxlIHx8ICBzdGF0ZSA9PSBTdGF0ZS5QcmVTYWxlKSB7CiAgICAgICAgICAgIC8vUHJlU2FsZSBoYXMgNTAlIGJvbnVzIQogICAgICAgICAgICBib251cyA9IGJvbnVzLmFkZCg1MCk7CiAgICAgICAgfSBlbHNlIGlmKHN0YXRlID09IFN0YXRlLkFjdGl2ZUlDTykgewogICAgICAgICAgICBpZigobm93IC0gc3RhcnRUaW1lKSA8IDEgd2Vla3MpIHsKICAgICAgICAgICAgICAgIC8vMzAlIGZpcnN0IHdlZWsKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuYWRkKDMwKTsKICAgICAgICAgICAgfSBlbHNlIGlmKChub3cgLSBzdGFydFRpbWUpIDwgMyB3ZWVrcykgewogICAgICAgICAgICAgICAgLy8xNSUgc2Vjb25kIGFuZCB0aGlyZCB3ZWVrcwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5hZGQoMTUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBhZGRQZXJjZW50cyh0b3RhbFRva2VucywgYm9udXMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZFBlcmNlbnRzKHVpbnQyNTYgYW1vdW50LCB1aW50MjU2IHBlcmNlbnQpIGludGVybmFsIHB1cmUgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgaWYocGVyY2VudCA9PSAwKSByZXR1cm4gYW1vdW50OwogICAgICAgIHJldHVybiBhbW91bnQuYWRkKHBlcmNlbnRzKGFtb3VudCwgcGVyY2VudCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHBlcmNlbnRzKHVpbnQyNTYgYW1vdW50LCB1aW50MjU2IHBlcmNlbnQpIGludGVybmFsIHB1cmUgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgaWYocGVyY2VudCA9PSAwKSByZXR1cm4gMDsKICAgICAgICByZXR1cm4gYW1vdW50Lm11bChwZXJjZW50KS5kaXYoMTAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRMYXJnZUFtb3VudEJvbnVzKHVpbnQyNTYgd2VpQW1vdW50KSBpbnRlcm5hbCBwdXJlIHJldHVybnModWludDI1NikgewogICAgICAgIGlmKHdlaUFtb3VudCA+PSAxMDAwIGV0aGVyKSB7CiAgICAgICAgICAgIHJldHVybiA1MDsKICAgICAgICB9CiAgICAgICAgaWYod2VpQW1vdW50ID49IDUwMCBldGhlcikgewogICAgICAgICAgICByZXR1cm4gMzA7CiAgICAgICAgfQogICAgICAgIGlmKHdlaUFtb3VudCA+PSAxMDAgZXRoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIDE1OwogICAgICAgIH0KICAgICAgICBpZih3ZWlBbW91bnQgPj0gNTAgZXRoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIDEwOwogICAgICAgIH0KICAgICAgICBpZih3ZWlBbW91bnQgPj0gMTAgZXRoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIDU7CiAgICAgICAgfQogICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgLy8gcmV0dXJuIHRydWUgaWYgdGhlIHRyYW5zYWN0aW9uIGlzIHN1aXRhYmxlIGZvciBidXlpbmcgdG9rZW5zCiAgICBmdW5jdGlvbiB2YWxpZFB1cmNoYXNlKCkgaW50ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYm9vbCBub25aZXJvUHVyY2hhc2UgPSBtc2cudmFsdWUgIT0gMDsKICAgICAgICByZXR1cm4gaGFzRW5kZWQoKSA9PSBmYWxzZSAmJiBub25aZXJvUHVyY2hhc2U7CiAgICB9Cgp9'.
	

]
