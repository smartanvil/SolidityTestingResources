Class {
	#name : #SRT53325828EdDECdC4378acB9d2d116ba6B38BD35a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT53325828EdDECdC4378acB9d2d116ba6B38BD35a >> base64 [
	^ 'Y29udHJhY3QgUmFuZG9tSW50ZXJmYWNlIHsKCWZ1bmN0aW9uIGdldFJhbmRvbSgpIHJldHVybnMgKGJ5dGVzMzIgaGFzaCkge30KfQpjb250cmFjdCBXaW5uZXJEQkludGVyZmFjZSB7CglmdW5jdGlvbiBXaW5uZXJzKHVpbnQgaWQpIGNvbnN0YW50IHJldHVybnModWludCBkYXRlLCBhZGRyZXNzIGFkZHIsIHVpbnQgdmFsdWUsIHVpbnQgcmF0ZSwgdWludCBiZXQpIHt9CglmdW5jdGlvbiBuZXdXaW5uZXIodWludCBkYXRlLCBhZGRyZXNzIGFkZHIsIHVpbnQgdmFsdWUsIHVpbnQgcmF0ZSwgdWludCBiZXQpIGV4dGVybmFsIHJldHVybnMgKGJvb2wpIHt9Cn0KY29udHJhY3QgZEV0aGVyZXVtbG90dGVyeU5ldCB7CgkvKgoJCWRFdGhlcmV1bWxvdHRlcnlOZXQKCQlDb2RlZCBieTogaUZBCgkJaHR0cDovL2QuZXRoZXJldW1sb3R0ZXJ5Lm5ldAoJCXZlcjogMi4yLjIKCSovCgkKCS8qCgkJVmFycwoJKi8KCWFkZHJlc3MgcHJpdmF0ZSBvd25lcjsKCWFkZHJlc3MgcHJpdmF0ZSB3aW5uZXJzREI7CglhZGRyZXNzIHByaXZhdGUgcmFuZG9tQWRkcjsKCXVpbnQgcHJpdmF0ZSBjb25zdGFudCBmZWUgPSA1OwoJdWludCBwcml2YXRlIGNvbnN0YW50IGludmVzdG9yRmVlID0gNzA7Cgl1aW50IHByaXZhdGUgY29uc3RhbnQgcHJlcGFyZUJsb2NrRGVsYXkgPSA0OwoJdWludCBwcml2YXRlIGNvbnN0YW50IHJvbGxMb3NzQmxvY2tEZWxheSA9IDMwOwoJdWludCBwcml2YXRlIGNvbnN0YW50IGludmVzdFVuaXQgPSAxIGV0aGVyOwoJdWludCBwcml2YXRlIGNvbnN0YW50IGV4dHJhUmF0ZSA9IDEzMDsKCXVpbnQgcHJpdmF0ZSBjb25zdGFudCBtaW5pbXVtUm9sbFByaWNlID0gMTAgZmlubmV5OwoJdWludCBwcml2YXRlIGNvbnN0YW50IGludmVzdE1pbkR1cmF0aW9uID0gMSBkYXlzOwoJdWludCBwcml2YXRlIGNvbnN0YW50IEJlc3RSb2xsUmF0ZSA9IDEwMDsKCQoJYm9vbCBwdWJsaWMgQ29udHJhY3RFbmFibGVkID0gdHJ1ZTsKCXVpbnQgcHVibGljIEphY2twb3Q7Cgl1aW50IHB1YmxpYyBSb2xsQ291bnQ7Cgl1aW50IHB1YmxpYyBKYWNrcG90SGl0czsKCQoJdWludCBwcml2YXRlIENvbnRyYWN0RGlzYWJsZWRCbG9jazsKCXVpbnQgcHJpdmF0ZSBqYWNrcG90XzsKCXVpbnQgcHJpdmF0ZSBleHRyYUphY2twb3RfOwoJdWludCBwcml2YXRlIGZlZVZhbHVlOwoJdWludCBwcml2YXRlIHBsYXllcnNQb3Q7CgkKCXN0cnVjdCByb2xsc19zIHsKCQl1aW50IGJsb2NrTnVtYmVyOwoJCWJ5dGVzMzIgZXh0cmFIYXNoOwoJCWJvb2wgdmFsaWQ7CgkJdWludCB2YWx1ZTsKCQl1aW50IGdhbWU7CgkJdWludCBpZDsKCQl1aW50IHN1bUludmVzdDsKCX0KCQoJbWFwcGluZyhhZGRyZXNzID0+IHJvbGxzX3NbXSkgcHJpdmF0ZSBwbGF5ZXJzOwoJCglzdHJ1Y3QgaW52ZXN0b3JzX3MgewoJCWFkZHJlc3Mgb3duZXI7CgkJdWludCB2YWx1ZTsKCQl1aW50IGJhbGFuY2U7CgkJYm9vbCBsaXZlOwoJCWJvb2wgdmFsaWQ7CgkJdWludCB0aW1lc3RhbXA7Cgl9CgkKCWludmVzdG9yc19zW10gcHJpdmF0ZSBpbnZlc3RvcnM7CgkKCXN0cmluZyBjb25zdGFudCBwdWJsaWMgSW5mb3JtYXRpb24gPSAiaHR0cDovL2QuZXRoZXJldW1sb3R0ZXJ5Lm5ldCI7CgkKCS8qCgkJRGVwbG95CgkqLwoJZnVuY3Rpb24gZEV0aGVyZXVtbG90dGVyeU5ldChhZGRyZXNzIF93aW5uZXJzREIsIGFkZHJlc3MgX3JhbmRvbUFkZHIsIGJvb2wgX29sZENvbnRyYWN0LCBhZGRyZXNzIF9vbGRDb250cmFjdEFkZHJlc3MpIHsKCQlvd25lciA9IG1zZy5zZW5kZXI7CgkJd2lubmVyc0RCID0gX3dpbm5lcnNEQjsKCQlyYW5kb21BZGRyID0gX3JhbmRvbUFkZHI7CgkJaWYgKF9vbGRDb250cmFjdCAmJiBfb2xkQ29udHJhY3RBZGRyZXNzICE9IDB4MCkgewoJCQlSb2xsQ291bnQgPSBkRXRoZXJldW1sb3R0ZXJ5TmV0KCBfb2xkQ29udHJhY3RBZGRyZXNzICkuUm9sbENvdW50KCk7CgkJCUphY2twb3RIaXRzID0gZEV0aGVyZXVtbG90dGVyeU5ldCggX29sZENvbnRyYWN0QWRkcmVzcyApLkphY2twb3RIaXRzKCk7CgkJfQoJfQoJCgkvKiAKCQlDb25zdGFucyBmdW5jdGlvbnMKCSovCglmdW5jdGlvbiBDaGFuY2VPZldpbm5pbmcodWludCBWYWx1ZSkgY29uc3RhbnQgcmV0dXJucyh1aW50IFJhdGUsIHVpbnQgQmV0KSB7CgkJaWYgKGphY2twb3RfID09IDApIHsKCQkJUmF0ZSA9IDA7CgkJCUJldCA9IDA7CgkJCXJldHVybjsKCQl9CgkJaWYgKFZhbHVlIDwgbWluaW11bVJvbGxQcmljZSkgewoJCQlWYWx1ZSA9IG1pbmltdW1Sb2xsUHJpY2U7CgkJfQoJCVJhdGUgPSBnZXRSYXRlKFZhbHVlKTsKCQlCZXQgPSBnZXRSZWFsQmV0KFJhdGUpOwoJCXdoaWxlIChWYWx1ZSA8IEJldCkgewoJCQlSYXRlKys7CgkJCUJldCA9IGdldFJlYWxCZXQoUmF0ZSk7CgkJfQoJCWlmIChSYXRlIDwgQmVzdFJvbGxSYXRlKSB7IAoJCQlSYXRlID0gQmVzdFJvbGxSYXRlOwoJCQlCZXQgPSBnZXRSZWFsQmV0KFJhdGUpOwoJCX0KCX0KCWZ1bmN0aW9uIEJldFByaWNlTGltaXQoKSBjb25zdGFudCByZXR1cm5zKHVpbnQgbWluLHVpbnQgbWF4KSB7CgkJbWluID0gbWluaW11bVJvbGxQcmljZTsKCQltYXggPSBnZXRSZWFsQmV0KEJlc3RSb2xsUmF0ZSk7Cgl9CglmdW5jdGlvbiBJbnZlc3RvcnMoYWRkcmVzcyBBZGRyZXNzKSBjb25zdGFudCByZXR1cm5zKHVpbnQgSW52ZXN0bWVudCwgdWludCBCYWxhbmNlLCBib29sIExpdmUpIHsKCQl2YXIgKGZvdW5kLCBJbnZlc3RvcklEKSA9IGdldEludmVzdG9yQnlBZGRyZXNzKEFkZHJlc3MpOwoJCWlmIChmb3VuZCA9PSBmYWxzZSB8fCAhIGludmVzdG9yc1tJbnZlc3RvcklEXS52YWxpZCkgewoJCQlJbnZlc3RtZW50ID0gMDsKCQkJQmFsYW5jZSA9IDA7CgkJCUxpdmUgPSBmYWxzZTsKCQkJcmV0dXJuOwoJCX0KCQlJbnZlc3RtZW50ID0gaW52ZXN0b3JzW0ludmVzdG9ySURdLnZhbHVlOwoJCUJhbGFuY2UgPSBpbnZlc3RvcnNbSW52ZXN0b3JJRF0uYmFsYW5jZTsKCQlMaXZlID0gaW52ZXN0b3JzW0ludmVzdG9ySURdLmxpdmU7Cgl9CglmdW5jdGlvbiBXaW5uZXJzKHVpbnQgaWQpIGNvbnN0YW50IHJldHVybnModWludCBkYXRlLCBhZGRyZXNzIGFkZHIsIHVpbnQgdmFsdWUsIHVpbnQgcmF0ZSwgdWludCBiZXQpIHsKCQlyZXR1cm4gV2lubmVyREJJbnRlcmZhY2Uod2lubmVyc0RCKS5XaW5uZXJzKGlkKTsKCX0KCQoJLyoKCQlFeHRlcm5hbCBmdW5jdGlvbnMKCSovCgkvKiBGYWxsYmFjayAqLwoJZnVuY3Rpb24gKCkgewoJCVByZXBhcmVSb2xsKDApOwoJfQoJLyogRm9yIEludmVzdG9ycyAqLwoJZnVuY3Rpb24gSW52ZXN0KCkgZXh0ZXJuYWwgT25seUVuYWJsZWQgbm9Db250cmFjdCB7CgkJdWludCB2YWx1ZV8gPSBtc2cudmFsdWU7CgkJaWYgKHZhbHVlXyA8IGludmVzdFVuaXQpIHsgdGhyb3c7IH0KCQlpZiAodmFsdWVfICUgaW52ZXN0VW5pdCA+IDApIHsgCgkJCWlmICggISBtc2cuc2VuZGVyLnNlbmQodmFsdWVfICUgaW52ZXN0VW5pdCkpIHsgdGhyb3c7IH0gCgkJCXZhbHVlXyA9IHZhbHVlXyAtICh2YWx1ZV8gJSBpbnZlc3RVbml0KTsKCQl9CgkJdmFyIChmb3VuZCwgSW52ZXN0b3JJRCkgPSBnZXRJbnZlc3RvckJ5QWRkcmVzcyhtc2cuc2VuZGVyKTsKCQlpZiAoZm91bmQgPT0gZmFsc2UpIHsKCQkJSW52ZXN0b3JJRCA9IGludmVzdG9ycy5sZW5ndGg7CgkJCWludmVzdG9ycy5sZW5ndGgrKzsKCQl9CgkJaWYgKGludmVzdG9yc1tJbnZlc3RvcklEXS52YWxpZCAmJiBpbnZlc3RvcnNbSW52ZXN0b3JJRF0ubGl2ZSkgewoJCQlpbnZlc3RvcnNbSW52ZXN0b3JJRF0udmFsdWUgKz0gdmFsdWVfOwoJCX0gZWxzZSB7CgkJCWludmVzdG9yc1tJbnZlc3RvcklEXS52YWx1ZSA9IHZhbHVlXzsKCQl9CgkJaW52ZXN0b3JzW0ludmVzdG9ySURdLnRpbWVzdGFtcCA9IG5vdyArIGludmVzdE1pbkR1cmF0aW9uOwoJCWludmVzdG9yc1tJbnZlc3RvcklEXS52YWxpZCA9IHRydWU7CgkJaW52ZXN0b3JzW0ludmVzdG9ySURdLmxpdmUgPSB0cnVlOwoJCWludmVzdG9yc1tJbnZlc3RvcklEXS5vd25lciA9IG1zZy5zZW5kZXI7CgkJamFja3BvdF8gKz0gdmFsdWVfOwoJCXNldEphY2twb3QoKTsKCX0KCWZ1bmN0aW9uIEdldE15SW52ZXN0bWVudEJhbGFuY2UoKSBleHRlcm5hbCBub0V0aGVyIHsKCQl2YXIgKGZvdW5kLCBJbnZlc3RvcklEKSA9IGdldEludmVzdG9yQnlBZGRyZXNzKG1zZy5zZW5kZXIpOwoJCWlmIChmb3VuZCA9PSBmYWxzZSkgeyB0aHJvdzsgfQoJCWlmICggISBpbnZlc3RvcnNbSW52ZXN0b3JJRF0udmFsaWQpIHsgdGhyb3c7IH0KCQl1aW50IF9iYWxhbmNlID0gaW52ZXN0b3JzW0ludmVzdG9ySURdLmJhbGFuY2U7CgkJaWYgKF9iYWxhbmNlID09IDApIHsgdGhyb3c7IH0KCQlpbnZlc3RvcnNbSW52ZXN0b3JJRF0uYmFsYW5jZSA9IDA7CgkJaWYgKCAhIG1zZy5zZW5kZXIuc2VuZCggX2JhbGFuY2UgKSkgeyB0aHJvdzsgfQoJfQoJZnVuY3Rpb24gQ2FuY2VsTXlJbnZlc3RtZW50KCkgZXh0ZXJuYWwgbm9FdGhlciB7CgkJdmFyIChmb3VuZCwgSW52ZXN0b3JJRCkgPSBnZXRJbnZlc3RvckJ5QWRkcmVzcyhtc2cuc2VuZGVyKTsKCQlpZiAoZm91bmQgPT0gZmFsc2UpIHsgdGhyb3c7IH0KCQlpZiAoICEgaW52ZXN0b3JzW0ludmVzdG9ySURdLnZhbGlkKSB7IHRocm93OyB9CgkJaWYgKGludmVzdG9yc1tJbnZlc3RvcklEXS50aW1lc3RhbXAgPiBub3cgJiYgQ29udHJhY3RFbmFibGVkKSB7IHRocm93OyB9CgkJdWludCBiYWxhbmNlXzsKCQlpZiAoaW52ZXN0b3JzW0ludmVzdG9ySURdLmxpdmUpIHsKCQkJamFja3BvdF8gLT0gaW52ZXN0b3JzW0ludmVzdG9ySURdLnZhbHVlOwoJCQliYWxhbmNlXyA9IGludmVzdG9yc1tJbnZlc3RvcklEXS52YWx1ZTsKCQkJc2V0SmFja3BvdCgpOwoJCX0KCQlpZiAoaW52ZXN0b3JzW0ludmVzdG9ySURdLmJhbGFuY2UgPiAwKSB7CgkJCWJhbGFuY2VfICs9IGludmVzdG9yc1tJbnZlc3RvcklEXS5iYWxhbmNlOwoJCX0KCQlkZWxldGUgaW52ZXN0b3JzW0ludmVzdG9ySURdOwoJCWlmICggISBtc2cuc2VuZGVyLnNlbmQoIGJhbGFuY2VfICkpIHsgdGhyb3c7IH0KCX0KCS8qIEZvciBQbGF5ZXJzICovCglmdW5jdGlvbiBEb1JvbGwoKSBleHRlcm5hbCBub0V0aGVyIHsKCQl1aW50IHZhbHVlXzsKCQlib29sIGZvdW5kOwoJCWJvb2wgc3ViRm91bmQ7CgkJZm9yICggdWludCBhPTAgOyBhIDwgcGxheWVyc1ttc2cuc2VuZGVyXS5sZW5ndGggOyBhKysgKSB7CgkJCWlmIChwbGF5ZXJzW21zZy5zZW5kZXJdW2FdLnZhbGlkKSB7CgkJCQlzdWJGb3VuZCA9IGZhbHNlOwoJCQkJaWYgKHBsYXllcnNbbXNnLnNlbmRlcl1bYV0uYmxvY2tOdW1iZXIrcm9sbExvc3NCbG9ja0RlbGF5IDw9IGJsb2NrLm51bWJlcikgewoJCQkJCXVpbnQgZmVlVmFsdWVfID0gcGxheWVyc1ttc2cuc2VuZGVyXVthXS52YWx1ZS8yOwoJCQkJCWZlZVZhbHVlICs9IGZlZVZhbHVlXzsKCQkJCQlpbnZlc3RvckFkZEZlZShwbGF5ZXJzW21zZy5zZW5kZXJdW2FdLnZhbHVlIC0gZmVlVmFsdWVfKTsKCQkJCQlEb1JvbGxFdmVudChtc2cuc2VuZGVyLCBwbGF5ZXJzW21zZy5zZW5kZXJdW2FdLnZhbHVlLCBwbGF5ZXJzW21zZy5zZW5kZXJdW2FdLmlkLCBmYWxzZSwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCAwLCAwLCAwKTsKCQkJCQlzdWJGb3VuZCA9IHRydWU7CgkJCQl9CgkJCQlpZiAoICEgQ29udHJhY3RFbmFibGVkIHx8IHBsYXllcnNbbXNnLnNlbmRlcl1bYV0uc3VtSW52ZXN0ICE9IGphY2twb3RfIHx8IHBsYXllcnNbbXNnLnNlbmRlcl1bYV0uZ2FtZSAhPSBKYWNrcG90SGl0cykgewoJCQkJCXZhbHVlXyArPSBwbGF5ZXJzW21zZy5zZW5kZXJdW2FdLnZhbHVlOwoJCQkJCURvUm9sbEV2ZW50KG1zZy5zZW5kZXIsIHBsYXllcnNbbXNnLnNlbmRlcl1bYV0udmFsdWUsIHBsYXllcnNbbXNnLnNlbmRlcl1bYV0uaWQsIHRydWUsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIDAsIDApOwoJCQkJCXN1YkZvdW5kID0gdHJ1ZTsKCQkJCX0KCQkJCWlmIChwbGF5ZXJzW21zZy5zZW5kZXJdW2FdLmJsb2NrTnVtYmVyIDwgYmxvY2subnVtYmVyKSB7CgkJCQkJdmFsdWVfICs9IG1ha2VSb2xsKGEpOwoJCQkJCXN1YkZvdW5kID0gdHJ1ZTsKCQkJCX0KCQkJCWlmIChzdWJGb3VuZCkgewoJCQkJCXBsYXllcnNQb3QgLT0gcGxheWVyc1ttc2cuc2VuZGVyXVthXS52YWx1ZTsKCQkJCQlkZWxldGUgcGxheWVyc1ttc2cuc2VuZGVyXVthXTsKCQkJCQlmb3VuZCA9IHRydWU7CgkJCQkJY29udGludWU7CgkJCQl9CgkJCX0KCQl9CgkJaWYgKCAhIGZvdW5kKSB7IHRocm93OyB9CgkJaWYgKHZhbHVlXyA+IDApIHsgaWYgKCAhIG1zZy5zZW5kZXIuc2VuZCh2YWx1ZV8pKSB7IHRocm93OyB9IH0KCX0KCWZ1bmN0aW9uIFByZXBhcmVSb2xsKHVpbnQgc2VlZCkgT25seUVuYWJsZWQgbm9Db250cmFjdCB7CgkJaWYgKG1zZy52YWx1ZSA8IG1pbmltdW1Sb2xsUHJpY2UpIHsgdGhyb3c7IH0KCQlpZiAoamFja3BvdF8gPT0gMCkgeyB0aHJvdzsgfQoJCXZhciAoX3JhdGUsIF9yZWFsQmV0KSA9IENoYW5jZU9mV2lubmluZyhtc2cudmFsdWUpOwoJCWlmIChfcmVhbEJldCA+IG1zZy52YWx1ZSkgeyB0aHJvdzsgfQoJCWlmIChtc2cudmFsdWUtX3JlYWxCZXQgPiAwKSB7CgkJCWlmICggISBtc2cuc2VuZGVyLnNlbmQoIG1zZy52YWx1ZS1fcmVhbEJldCApKSB7IHRocm93OyB9CgkJfQoJCWZvciAodWludCBhID0gMCA7IGEgPCBwbGF5ZXJzW21zZy5zZW5kZXJdLmxlbmd0aCA7IGErKykgewoJCQlpZiAoICEgcGxheWVyc1ttc2cuc2VuZGVyXVthXS52YWxpZCkgewoJCQkJcHJlcGFyZVJvbGwoIGEsIF9yZWFsQmV0LCBzZWVkICk7CgkJCQlyZXR1cm47CgkJCX0KCQl9CgkJcGxheWVyc1ttc2cuc2VuZGVyXS5sZW5ndGgrKzsKCQlwcmVwYXJlUm9sbCggcGxheWVyc1ttc2cuc2VuZGVyXS5sZW5ndGgtMSwgX3JlYWxCZXQsIHNlZWQgKTsKCX0KCS8qIEZvciBPd25lciAqLwoJZnVuY3Rpb24gT3duZXJDbG9zZUNvbnRyYWN0KCkgZXh0ZXJuYWwgT25seU93bmVyIG5vRXRoZXIgewoJCWlmICggISBDb250cmFjdEVuYWJsZWQpIHsKCQkJaWYgKENvbnRyYWN0RGlzYWJsZWRCbG9jayA8IGJsb2NrLm51bWJlcikgewoJCQkJaWYgKHBsYXllcnNQb3QgPT0gMCkgeyB0aHJvdzsgfQoJCQkJdWludCBfdmFsdWUgPSBwbGF5ZXJzUG90OwoJCQkJcGxheWVyc1BvdCA9IDA7CgkJCQlpZiAoICEgbXNnLnNlbmRlci5zZW5kKCBfdmFsdWUgKSkgeyB0aHJvdzsgfQoJCQl9CgkJfSBlbHNlIHsKCQkJQ29udHJhY3RFbmFibGVkID0gZmFsc2U7CgkJCUNvbnRyYWN0RGlzYWJsZWRCbG9jayA9IGJsb2NrLm51bWJlcityb2xsTG9zc0Jsb2NrRGVsYXk7CgkJCUNvbnRyYWN0RGlzYWJsZWQoQ29udHJhY3REaXNhYmxlZEJsb2NrKTsKCQkJZmVlVmFsdWUgKz0gZXh0cmFKYWNrcG90XzsKCQkJZXh0cmFKYWNrcG90XyA9IDA7CgkJfQoJfQoJZnVuY3Rpb24gT3duZXJHZXRGZWUoKSBleHRlcm5hbCBPbmx5T3duZXIgbm9FdGhlciB7CgkJaWYgKGZlZVZhbHVlID09IDApIHsgdGhyb3c7IH0KCQl1aW50IF92YWx1ZSA9IHBsYXllcnNQb3Q7CgkJZmVlVmFsdWUgPSAwOwoJCWlmICggISBvd25lci5zZW5kKF92YWx1ZSkpIHsgdGhyb3c7IH0KCX0KCQoJLyoKCQlQcml2YXRlIGZ1bmN0aW9ucwoJKi8KCWZ1bmN0aW9uIHNldEphY2twb3QoKSBwcml2YXRlIHsKCQlKYWNrcG90ID0gZXh0cmFKYWNrcG90XyArIGphY2twb3RfOwoJfQoJZnVuY3Rpb24gbWFrZVJvbGwodWludCBpZCkgcHJpdmF0ZSByZXR1cm5zKHVpbnQgd2luKSB7CgkJdWludCBmZWVWYWx1ZV8gPSBwbGF5ZXJzW21zZy5zZW5kZXJdW2lkXS52YWx1ZSAqIGZlZSAvIDEwMCA7CgkJZmVlVmFsdWUgKz0gZmVlVmFsdWVfOwoJCXVpbnQgaW52ZXN0b3JGZWVfID0gcGxheWVyc1ttc2cuc2VuZGVyXVtpZF0udmFsdWUgKiBpbnZlc3RvckZlZSAvIDEwMDsKCQlpbnZlc3RvckFkZEZlZShpbnZlc3RvckZlZV8pOwoJCWV4dHJhSmFja3BvdF8gKz0gcGxheWVyc1ttc2cuc2VuZGVyXVtpZF0udmFsdWUgLSBmZWVWYWx1ZV8gLSBpbnZlc3RvckZlZV87CgkJc2V0SmFja3BvdCgpOwoJCWJ5dGVzMzIgaGFzaF8gPSBwbGF5ZXJzW21zZy5zZW5kZXJdW2lkXS5leHRyYUhhc2g7CgkJZm9yICggdWludCBhID0gMSA7IGEgPD0gcHJlcGFyZUJsb2NrRGVsYXkgOyBhKysgKSB7CgkJCWhhc2hfID0gc2hhMyhoYXNoXywgYmxvY2suYmxvY2toYXNoKHBsYXllcnNbbXNnLnNlbmRlcl1baWRdLmJsb2NrTnVtYmVyIC0gcHJlcGFyZUJsb2NrRGVsYXkrYSkpOwoJCX0KCQl1aW50IF9yYXRlID0gZ2V0UmF0ZShwbGF5ZXJzW21zZy5zZW5kZXJdW2lkXS52YWx1ZSk7CgkJdWludCBiaWdOdW1iZXIgPSB1aW50NjQoaGFzaF8pOwoJCWlmIChiaWdOdW1iZXIgPT0gMCB8fCBfcmF0ZSA9PSAwKSB7IHJldHVybjsgfQoJCWlmIChiaWdOdW1iZXIgJSBfcmF0ZSA9PSAwICkgewoJCQl3aW4gPSBKYWNrcG90OwoJCQlmb3IgKCBhPTAgOyBhIDwgaW52ZXN0b3JzLmxlbmd0aCA7IGErKyApIHsKCQkJCWludmVzdG9yc1thXS5saXZlID0gZmFsc2U7CgkJCX0KCQkJSmFja3BvdEhpdHMrKzsKCQkJZXh0cmFKYWNrcG90XyA9IDA7CgkJCWphY2twb3RfID0gMDsKCQkJSmFja3BvdCA9IDA7CgkJCVdpbm5lckRCSW50ZXJmYWNlKCB3aW5uZXJzREIgKS5uZXdXaW5uZXIobm93LCBtc2cuc2VuZGVyLCB3aW4sIF9yYXRlLCBwbGF5ZXJzW21zZy5zZW5kZXJdW2lkXS52YWx1ZSk7CgkJCURvUm9sbEV2ZW50KG1zZy5zZW5kZXIsIHdpbiwgcGxheWVyc1ttc2cuc2VuZGVyXVtpZF0uaWQsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIHRydWUsIGJpZ051bWJlciwgX3JhdGUsIGJpZ051bWJlciAlIF9yYXRlKTsKCQl9IGVsc2UgewoJCQlEb1JvbGxFdmVudChtc2cuc2VuZGVyLCBwbGF5ZXJzW21zZy5zZW5kZXJdW2lkXS52YWx1ZSwgcGxheWVyc1ttc2cuc2VuZGVyXVtpZF0uaWQsIGZhbHNlLCBmYWxzZSwgdHJ1ZSwgZmFsc2UsIGJpZ051bWJlciwgX3JhdGUsIGJpZ051bWJlciAlIF9yYXRlKTsKCQl9Cgl9CglmdW5jdGlvbiBpbnZlc3RvckFkZEZlZSh1aW50IHZhbHVlKSBwcml2YXRlIHsKCQlib29sIGRvbmU7CgkJZm9yICggdWludCBhPTAgOyBhIDwgaW52ZXN0b3JzLmxlbmd0aCA7IGErKyApIHsKCQkJaWYgKGludmVzdG9yc1thXS5saXZlICYmIGludmVzdG9yc1thXS52YWxpZCkgewoJCQkJaW52ZXN0b3JzW2FdLmJhbGFuY2UgKz0gdmFsdWUgKiBpbnZlc3RvcnNbYV0udmFsdWUgLyBqYWNrcG90XzsKCQkJCWRvbmUgPSB0cnVlOwoJCQl9CgkJfQoJCWlmICggISBkb25lKSB7CgkJCWZlZVZhbHVlICs9IHZhbHVlOwoJCX0KCX0KCWZ1bmN0aW9uIHByZXBhcmVSb2xsKHVpbnQgcm9sbElELCB1aW50IGJldCwgdWludCBzZWVkKSBwcml2YXRlIHsKCQlSb2xsQ291bnQrKzsKCQlwbGF5ZXJzW21zZy5zZW5kZXJdW3JvbGxJRF0uYmxvY2tOdW1iZXIgPSBibG9jay5udW1iZXIgKyBwcmVwYXJlQmxvY2tEZWxheTsKCQlwbGF5ZXJzW21zZy5zZW5kZXJdW3JvbGxJRF0uZXh0cmFIYXNoID0gc2hhMyhSb2xsQ291bnQsIG5vdywgc2VlZCwgUmFuZG9tSW50ZXJmYWNlKHJhbmRvbUFkZHIpLmdldFJhbmRvbSgpLCBhZGRyZXNzKHNlZWQpLmJhbGFuY2UpOwoJCXBsYXllcnNbbXNnLnNlbmRlcl1bcm9sbElEXS52YWxpZCA9IHRydWU7CgkJcGxheWVyc1ttc2cuc2VuZGVyXVtyb2xsSURdLnZhbHVlID0gYmV0OwoJCXBsYXllcnNbbXNnLnNlbmRlcl1bcm9sbElEXS5nYW1lID0gSmFja3BvdEhpdHM7CgkJcGxheWVyc1ttc2cuc2VuZGVyXVtyb2xsSURdLmlkID0gUm9sbENvdW50OwoJCXBsYXllcnNbbXNnLnNlbmRlcl1bcm9sbElEXS5zdW1JbnZlc3QgPSBqYWNrcG90XzsJCgkJcGxheWVyc1BvdCArPSBiZXQ7CgkJUHJlcGFyZVJvbGxFdmVudChtc2cuc2VuZGVyLCBwbGF5ZXJzW21zZy5zZW5kZXJdW3JvbGxJRF0uYmxvY2tOdW1iZXIsIHBsYXllcnNbbXNnLnNlbmRlcl1bcm9sbElEXS52YWx1ZSwgcGxheWVyc1ttc2cuc2VuZGVyXVtyb2xsSURdLmlkKTsKCX0KCQoJLyoKCQlJbnRlcm5hbCBmdW5jdGlvbnMKCSovCQoJZnVuY3Rpb24gZ2V0UmF0ZSh1aW50IHZhbHVlKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQpewoJCXJldHVybiBqYWNrcG90XyAqIDEgZXRoZXIgLyB2YWx1ZSAqIDEwMCAvIGludmVzdG9yRmVlICogZXh0cmFSYXRlIC8gMTAwIC8gMSBldGhlcjsKCX0KCWZ1bmN0aW9uIGdldFJlYWxCZXQodWludCByYXRlKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CgkJcmV0dXJuIGphY2twb3RfICogMSBldGhlciAvICggcmF0ZSAqIDEgZXRoZXIgKiBpbnZlc3RvckZlZSAvIGV4dHJhUmF0ZSk7Cgl9CglmdW5jdGlvbiBnZXRJbnZlc3RvckJ5QWRkcmVzcyhhZGRyZXNzIEFkZHJlc3MpIGludGVybmFsIHJldHVybnMgKGJvb2wgZm91bmQsIHVpbnQgaWQpIHsKCQlmb3IgKCBpZD0wIDsgaWQgPCBpbnZlc3RvcnMubGVuZ3RoIDsgaWQrKyApIHsKCQkJaWYgKGludmVzdG9yc1tpZF0ub3duZXIgPT0gQWRkcmVzcykgewoJCQkJcmV0dXJuICh0cnVlLCBpZCk7CgkJCX0KCQl9CgkJcmV0dXJuIChmYWxzZSwgMCk7Cgl9CgkKCS8qCgkJRXZlbnRzCgkqLwkKCWV2ZW50IERvUm9sbEV2ZW50KGFkZHJlc3MgUGxheWVyLCB1aW50IFZhbHVlLCB1aW50IFJvbGxJRCwgYm9vbCBSZWZ1bmQsIGJvb2wgTG9zdEJldCwgYm9vbCBMb3NzUm9sbCwgYm9vbCBXaW5Sb2xsLCB1aW50IEJpZ051bWJlciwgdWludCBSYXRlLCB1aW50IFJvbGxSZXN1bHQpOwoJZXZlbnQgUHJlcGFyZVJvbGxFdmVudChhZGRyZXNzIFBsYXllciwgdWludCBCbG9jaywgdWludCBCZXQsIHVpbnQgUm9sbElEKTsKCWV2ZW50IENvbnRyYWN0RGlzYWJsZWQodWludCBMb3NzQWxsQmV0QmxvY2tOdW1iZXIpOwoJCgkvKgoJCU1vZGlmaWVycwoJKi8KCW1vZGlmaWVyIG5vQ29udHJhY3QoKSB7aWYgKHR4Lm9yaWdpbiAhPSBtc2cuc2VuZGVyKSB7IHRocm93OyB9IF87IH0JbW9kaWZpZXIgbm9FdGhlcigpIHsgaWYgKG1zZy52YWx1ZSA+IDApIHsgdGhyb3c7IH0gXzsgfQltb2RpZmllciBPbmx5T3duZXIoKSB7IGlmIChvd25lciAhPSBtc2cuc2VuZGVyKSB7IHRocm93OyB9IF87IH0JbW9kaWZpZXIgT25seUVuYWJsZWQoKSB7IGlmICggISBDb250cmFjdEVuYWJsZWQpIHsgdGhyb3c7IH0gXzsgfX0='.
	

]
