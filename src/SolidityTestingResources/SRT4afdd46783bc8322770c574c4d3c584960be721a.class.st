Class {
	#name : #SRT4afdd46783bc8322770c574c4d3c584960be721a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4afdd46783bc8322770c574c4d3c584960be721a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgoKbGlicmFyeSBTYWZlTWF0aCB7CiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLy8vIEB0aXRsZSBJbnRlcmZhY2UgZm9yIGNvbnRyYWN0cyBjb25mb3JtaW5nIHRvIEVSQy03MjE6IE5vbi1GdW5naWJsZSBUb2tlbnMKLy8vIEBhdXRob3IgRGlldGVyIFNoaXJsZXkgPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI0OTJkMmMzZDJjMDkyODMxMjAyNjI0MzMyYzI3NjcyYTI2Ij5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPj4gKGh0dHBzOi8vZ2l0aHViLmNvbS9kZXRlKQpjb250cmFjdCBFUkM3MjEgewogICAgLy8gUmVxdWlyZWQgbWV0aG9kcwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBvd25lcik7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CgogICAgLy8gRXZlbnRzCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIG93bmVyLCBhZGRyZXNzIGFwcHJvdmVkLCB1aW50MjU2IHRva2VuSWQpOwoKICAgIC8vIE9wdGlvbmFsCiAgICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIF9uYW1lKTsKICAgIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBfc3ltYm9sKTsKICAgIC8vIGZ1bmN0aW9uIHRva2Vuc09mT3duZXIoYWRkcmVzcyBfb3duZXIpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NltdIHRva2VuSWRzKTsKICAgIC8vIGZ1bmN0aW9uIHRva2VuTWV0YWRhdGEodWludDI1NiBfdG9rZW5JZCwgc3RyaW5nIF9wcmVmZXJyZWRUcmFuc3BvcnQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBpbmZvVXJsKTsKCiAgICAvLyBFUkMtMTY1IENvbXBhdGliaWxpdHkgKGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNjUpCiAgICAvLyBmdW5jdGlvbiBzdXBwb3J0c0ludGVyZmFjZShieXRlczQgX2ludGVyZmFjZUlEKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpOwp9Cgpjb250cmFjdCBDcnlwdG9EeW5hc3R5IGlzIEVSQzcyMXsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgZXZlbnQgQm91Z2h0ICh1aW50MjU2IGluZGV4ZWQgX2l0ZW1JZCwgYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludDI1NiBfcHJpY2UpOwogIGV2ZW50IFNvbGQgKHVpbnQyNTYgaW5kZXhlZCBfaXRlbUlkLCBhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50MjU2IF9wcmljZSk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF90b2tlbklkKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX2FwcHJvdmVkLCB1aW50MjU2IF90b2tlbklkKTsKCiAgYWRkcmVzcyBwcml2YXRlIG93bmVyOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHJpdmF0ZSBhZG1pbnM7CiAgSUl0ZW1SZWdpc3RyeSBwcml2YXRlIGl0ZW1SZWdpc3RyeTsKCiAgdWludDI1NiBwcml2YXRlIGluY3JlYXNlTGltaXQxID0gMC4wMiBldGhlcjsKICB1aW50MjU2IHByaXZhdGUgaW5jcmVhc2VMaW1pdDIgPSAwLjUgZXRoZXI7CiAgdWludDI1NiBwcml2YXRlIGluY3JlYXNlTGltaXQzID0gMi4wIGV0aGVyOwogIHVpbnQyNTYgcHJpdmF0ZSBpbmNyZWFzZUxpbWl0NCA9IDUuMCBldGhlcjsKCiAgdWludDI1NltdIHByaXZhdGUgbGlzdGVkSXRlbXM7CiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwcml2YXRlIG93bmVyT2ZJdGVtOwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSBwcmljZU9mSXRlbTsKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgYXBwcm92ZWRPZkl0ZW07CgogIGZ1bmN0aW9uIENyeXB0b0R5bmFzdHkgKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIGFkbWluc1tvd25lcl0gPSB0cnVlOyAgICAKICAgIGlzc3VlQ2FyZHMoMSwgMywgMC4xMDggZXRoZXIpOwogICAgaXNzdWVDYXJkcyg0LCA3LCAwLjA4OCBldGhlcik7CiAgfQoKICAvKiBNb2RpZmllcnMgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG93bmVyID09IG1zZy5zZW5kZXIpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIG9ubHlBZG1pbnMoKSB7CiAgICByZXF1aXJlKGFkbWluc1ttc2cuc2VuZGVyXSk7CiAgICBfOwogIH0KCiAgLyogT3duZXIgKi8KICBmdW5jdGlvbiBzZXRPd25lciAoYWRkcmVzcyBfb3duZXIpIG9ubHlPd25lcigpIHB1YmxpYyB7CiAgICBvd25lciA9IF9vd25lcjsKICB9CgogIGZ1bmN0aW9uIHNldEl0ZW1SZWdpc3RyeSAoYWRkcmVzcyBfaXRlbVJlZ2lzdHJ5KSBvbmx5T3duZXIoKSBwdWJsaWMgewogICAgaXRlbVJlZ2lzdHJ5ID0gSUl0ZW1SZWdpc3RyeShfaXRlbVJlZ2lzdHJ5KTsKICB9CgogIGZ1bmN0aW9uIGFkZEFkbWluIChhZGRyZXNzIF9hZG1pbikgb25seU93bmVyKCkgcHVibGljIHsKICAgIGFkbWluc1tfYWRtaW5dID0gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZUFkbWluIChhZGRyZXNzIF9hZG1pbikgb25seU93bmVyKCkgcHVibGljIHsKICAgIGRlbGV0ZSBhZG1pbnNbX2FkbWluXTsKICB9CgogIC8qIFdpdGhkcmF3ICovCiAgLyoKICAgIE5PVElDRTogVGhlc2UgZnVuY3Rpb25zIHdpdGhkcmF3IHRoZSBkZXZlbG9wZXIncyBjdXQgd2hpY2ggaXMgbGVmdAogICAgaW4gdGhlIGNvbnRyYWN0IGJ5IGBidXlgLiBVc2VyIGZ1bmRzIGFyZSBpbW1lZGlhdGVseSBzZW50IHRvIHRoZSBvbGQKICAgIG93bmVyIGluIGBidXlgLCBubyB1c2VyIGZ1bmRzIGFyZSBsZWZ0IGluIHRoZSBjb250cmFjdC4KICAqLwogIGZ1bmN0aW9uIHdpdGhkcmF3QWxsICgpIG9ubHlBZG1pbnMoKSBwdWJsaWMgewogICBtc2cuc2VuZGVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhd0Ftb3VudCAodWludDI1NiBfYW1vdW50KSBvbmx5QWRtaW5zKCkgcHVibGljIHsKICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoX2Ftb3VudCk7CiAgfQoKICAvKiBMaXN0aW5nICovCiAgZnVuY3Rpb24gcG9wdWxhdGVGcm9tSXRlbVJlZ2lzdHJ5ICh1aW50MjU2W10gX2l0ZW1JZHMpIG9ubHlPd25lcigpIHB1YmxpYyB7CiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfaXRlbUlkcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAocHJpY2VPZkl0ZW1bX2l0ZW1JZHNbaV1dID4gMCB8fCBpdGVtUmVnaXN0cnkucHJpY2VPZihfaXRlbUlkc1tpXSkgPT0gMCkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBsaXN0SXRlbUZyb21SZWdpc3RyeShfaXRlbUlkc1tpXSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBsaXN0SXRlbUZyb21SZWdpc3RyeSAodWludDI1NiBfaXRlbUlkKSBvbmx5T3duZXIoKSBwdWJsaWMgewogICAgcmVxdWlyZShpdGVtUmVnaXN0cnkgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKGl0ZW1SZWdpc3RyeS5vd25lck9mKF9pdGVtSWQpICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShpdGVtUmVnaXN0cnkucHJpY2VPZihfaXRlbUlkKSA+IDApOwoKICAgIHVpbnQyNTYgcHJpY2UgPSBpdGVtUmVnaXN0cnkucHJpY2VPZihfaXRlbUlkKTsKICAgIGFkZHJlc3MgaXRlbU93bmVyID0gaXRlbVJlZ2lzdHJ5Lm93bmVyT2YoX2l0ZW1JZCk7CiAgICBsaXN0SXRlbShfaXRlbUlkLCBwcmljZSwgaXRlbU93bmVyKTsKICB9CgogIGZ1bmN0aW9uIGxpc3RNdWx0aXBsZUl0ZW1zICh1aW50MjU2W10gX2l0ZW1JZHMsIHVpbnQyNTYgX3ByaWNlLCBhZGRyZXNzIF9vd25lcikgb25seUFkbWlucygpIGV4dGVybmFsIHsKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IF9pdGVtSWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGxpc3RJdGVtKF9pdGVtSWRzW2ldLCBfcHJpY2UsIF9vd25lcik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBsaXN0SXRlbSAodWludDI1NiBfaXRlbUlkLCB1aW50MjU2IF9wcmljZSwgYWRkcmVzcyBfb3duZXIpIG9ubHlBZG1pbnMoKSBwdWJsaWMgewogICAgcmVxdWlyZShfcHJpY2UgPiAwKTsKICAgIHJlcXVpcmUocHJpY2VPZkl0ZW1bX2l0ZW1JZF0gPT0gMCk7CiAgICByZXF1aXJlKG93bmVyT2ZJdGVtW19pdGVtSWRdID09IGFkZHJlc3MoMCkpOwoKICAgIG93bmVyT2ZJdGVtW19pdGVtSWRdID0gX293bmVyOwogICAgcHJpY2VPZkl0ZW1bX2l0ZW1JZF0gPSBfcHJpY2U7CiAgICBsaXN0ZWRJdGVtcy5wdXNoKF9pdGVtSWQpOwogIH0KCiAgLyogQnV5aW5nICovCiAgZnVuY3Rpb24gY2FsY3VsYXRlTmV4dFByaWNlICh1aW50MjU2IF9wcmljZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfbmV4dFByaWNlKSB7CiAgICBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDEpIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMjAwKS5kaXYoOTUpOwogICAgfSBlbHNlIGlmIChfcHJpY2UgPCBpbmNyZWFzZUxpbWl0MikgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgxMzUpLmRpdig5Nik7CiAgICB9IGVsc2UgaWYgKF9wcmljZSA8IGluY3JlYXNlTGltaXQzKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDEyNSkuZGl2KDk3KTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDQpIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTE3KS5kaXYoOTcpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTE1KS5kaXYoOTgpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gY2FsY3VsYXRlRGV2Q3V0ICh1aW50MjU2IF9wcmljZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfZGV2Q3V0KSB7CiAgICBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDEpIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoNSkuZGl2KDEwMCk7IC8vIDUlCiAgICB9IGVsc2UgaWYgKF9wcmljZSA8IGluY3JlYXNlTGltaXQyKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDYpLmRpdigxMDApOyAvLyA2JQogICAgfSBlbHNlIGlmIChfcHJpY2UgPCBpbmNyZWFzZUxpbWl0MykgewogICAgICByZXR1cm4gX3ByaWNlLm11bCg0KS5kaXYoMTAwKTsgLy8gNCUKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDQpIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoNCkuZGl2KDEwMCk7IC8vIDQlCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgzKS5kaXYoMTAwKTsgLy8gMyUKICAgIH0KICB9CgogIC8qCiAgICAgQnV5IGEgY291bnRyeSBkaXJlY3RseSBmcm9tIHRoZSBjb250cmFjdCBmb3IgdGhlIGNhbGN1bGF0ZWQgcHJpY2UKICAgICB3aGljaCBlbnN1cmVzIHRoYXQgdGhlIG93bmVyIGdldHMgYSBwcm9maXQuICBBbGwgY291bnRyaWVzIHRoYXQKICAgICBoYXZlIGJlZW4gbGlzdGVkIGNhbiBiZSBib3VnaHQgYnkgdGhpcyBtZXRob2QuIFVzZXIgZnVuZHMgYXJlIHNlbnQKICAgICBkaXJlY3RseSB0byB0aGUgcHJldmlvdXMgb3duZXIgYW5kIGFyZSBuZXZlciBzdG9yZWQgaW4gdGhlIGNvbnRyYWN0LgogICovCiAgZnVuY3Rpb24gYnV5ICh1aW50MjU2IF9pdGVtSWQpIHBheWFibGUgcHVibGljIHsKICAgIHJlcXVpcmUocHJpY2VPZihfaXRlbUlkKSA+IDApOwogICAgcmVxdWlyZShvd25lck9mKF9pdGVtSWQpICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gcHJpY2VPZihfaXRlbUlkKSk7CiAgICByZXF1aXJlKG93bmVyT2YoX2l0ZW1JZCkgIT0gbXNnLnNlbmRlcik7CiAgICByZXF1aXJlKCFpc0NvbnRyYWN0KG1zZy5zZW5kZXIpKTsKICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBhZGRyZXNzKDApKTsKCiAgICBhZGRyZXNzIG9sZE93bmVyID0gb3duZXJPZihfaXRlbUlkKTsKICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwogICAgdWludDI1NiBwcmljZSA9IHByaWNlT2YoX2l0ZW1JZCk7CiAgICB1aW50MjU2IGV4Y2VzcyA9IG1zZy52YWx1ZS5zdWIocHJpY2UpOwoKICAgIF90cmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIF9pdGVtSWQpOwogICAgcHJpY2VPZkl0ZW1bX2l0ZW1JZF0gPSBuZXh0UHJpY2VPZihfaXRlbUlkKTsKCiAgICBCb3VnaHQoX2l0ZW1JZCwgbmV3T3duZXIsIHByaWNlKTsKICAgIFNvbGQoX2l0ZW1JZCwgb2xkT3duZXIsIHByaWNlKTsKCiAgICAvLyBEZXZldmxvcGVyJ3MgY3V0IHdoaWNoIGlzIGxlZnQgaW4gY29udHJhY3QgYW5kIGFjY2VzZWQgYnkKICAgIC8vIGB3aXRoZHJhd0FsbGAgYW5kIGB3aXRoZHJhd0Ftb3VudFRvYCBtZXRob2RzLgogICAgdWludDI1NiBkZXZDdXQgPSBjYWxjdWxhdGVEZXZDdXQocHJpY2UpOwoKICAgIC8vIFRyYW5zZmVyIHBheW1lbnQgdG8gb2xkIG93bmVyIG1pbnVzIHRoZSBkZXZlbG9wZXIncyBjdXQuCiAgICBvbGRPd25lci50cmFuc2ZlcihwcmljZS5zdWIoZGV2Q3V0KSk7CgogICAgaWYgKGV4Y2VzcyA+IDApIHsKICAgICAgbmV3T3duZXIudHJhbnNmZXIoZXhjZXNzKTsKICAgIH0KICB9CgogIC8qIEVSQzcyMSAqLwoKICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIF9uYW1lKSB7CiAgICByZXR1cm4gIkNyeXB0b0R5bmFzdHkiOwogIH0KCiAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIF9zeW1ib2wpIHsKICAgIHJldHVybiAiRFlOIjsKICB9CgogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfdG90YWxTdXBwbHkpIHsKICAgIHJldHVybiBsaXN0ZWRJdGVtcy5sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBiYWxhbmNlT2YgKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9iYWxhbmNlKSB7CiAgICB1aW50MjU2IGNvdW50ZXIgPSAwOwoKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IGxpc3RlZEl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChvd25lck9mKGxpc3RlZEl0ZW1zW2ldKSA9PSBfb3duZXIpIHsKICAgICAgICBjb3VudGVyKys7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gY291bnRlcjsKICB9CgogIGZ1bmN0aW9uIG93bmVyT2YgKHVpbnQyNTYgX2l0ZW1JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIpIHsKICAgIHJldHVybiBvd25lck9mSXRlbVtfaXRlbUlkXTsKICB9CgogIGZ1bmN0aW9uIHRva2Vuc09mIChhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NltdIF90b2tlbklkcykgewogICAgdWludDI1NltdIG1lbW9yeSBpdGVtcyA9IG5ldyB1aW50MjU2W10oYmFsYW5jZU9mKF9vd25lcikpOwoKICAgIHVpbnQyNTYgaXRlbUNvdW50ZXIgPSAwOwogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgbGlzdGVkSXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKG93bmVyT2YobGlzdGVkSXRlbXNbaV0pID09IF9vd25lcikgewogICAgICAgIGl0ZW1zW2l0ZW1Db3VudGVyXSA9IGxpc3RlZEl0ZW1zW2ldOwogICAgICAgIGl0ZW1Db3VudGVyICs9IDE7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gaXRlbXM7CiAgfQoKICBmdW5jdGlvbiB0b2tlbkV4aXN0cyAodWludDI1NiBfaXRlbUlkKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sIF9leGlzdHMpIHsKICAgIHJldHVybiBwcmljZU9mKF9pdGVtSWQpID4gMDsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmVkRm9yKHVpbnQyNTYgX2l0ZW1JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfYXBwcm92ZWQpIHsKICAgIHJldHVybiBhcHByb3ZlZE9mSXRlbVtfaXRlbUlkXTsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2l0ZW1JZCkgcHVibGljIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBfdG8pOwogICAgcmVxdWlyZSh0b2tlbkV4aXN0cyhfaXRlbUlkKSk7CiAgICByZXF1aXJlKG93bmVyT2YoX2l0ZW1JZCkgPT0gbXNnLnNlbmRlcik7CgogICAgaWYgKF90byA9PSAwKSB7CiAgICAgIGlmIChhcHByb3ZlZE9mSXRlbVtfaXRlbUlkXSAhPSAwKSB7CiAgICAgICAgZGVsZXRlIGFwcHJvdmVkT2ZJdGVtW19pdGVtSWRdOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIDAsIF9pdGVtSWQpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBhcHByb3ZlZE9mSXRlbVtfaXRlbUlkXSA9IF90bzsKICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfaXRlbUlkKTsKICAgIH0KICB9CgogIC8qIFRyYW5zZmVycmluZyBhIGNvdW50cnkgdG8gYW5vdGhlciBvd25lciB3aWxsIGVudGl0bGUgdGhlIG5ldyBvd25lciB0aGUgcHJvZml0cyBmcm9tIGBidXlgICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2l0ZW1JZCkgcHVibGljIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lck9mKF9pdGVtSWQpKTsKICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9pdGVtSWQpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9pdGVtSWQpIHB1YmxpYyB7CiAgICByZXF1aXJlKGFwcHJvdmVkRm9yKF9pdGVtSWQpID09IG1zZy5zZW5kZXIpOwogICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF9pdGVtSWQpOwogIH0KCiAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9pdGVtSWQpIGludGVybmFsIHsKICAgIHJlcXVpcmUodG9rZW5FeGlzdHMoX2l0ZW1JZCkpOwogICAgcmVxdWlyZShvd25lck9mKF9pdGVtSWQpID09IF9mcm9tKTsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcyh0aGlzKSk7CgogICAgb3duZXJPZkl0ZW1bX2l0ZW1JZF0gPSBfdG87CiAgICBhcHByb3ZlZE9mSXRlbVtfaXRlbUlkXSA9IDA7CgogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX2l0ZW1JZCk7CiAgfQoKICAvKiBSZWFkICovCiAgZnVuY3Rpb24gaXNBZG1pbiAoYWRkcmVzcyBfYWRtaW4pIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wgX2lzQWRtaW4pIHsKICAgIHJldHVybiBhZG1pbnNbX2FkbWluXTsKICB9CgogIGZ1bmN0aW9uIHByaWNlT2YgKHVpbnQyNTYgX2l0ZW1JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfcHJpY2UpIHsKICAgIHJldHVybiBwcmljZU9mSXRlbVtfaXRlbUlkXTsKICB9CgogIGZ1bmN0aW9uIG5leHRQcmljZU9mICh1aW50MjU2IF9pdGVtSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX25leHRQcmljZSkgewogICAgcmV0dXJuIGNhbGN1bGF0ZU5leHRQcmljZShwcmljZU9mKF9pdGVtSWQpKTsKICB9CgogIGZ1bmN0aW9uIGFsbE9mICh1aW50MjU2IF9pdGVtSWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3ByaWNlLCB1aW50MjU2IF9uZXh0UHJpY2UpIHsKICAgIHJldHVybiAob3duZXJPZihfaXRlbUlkKSwgcHJpY2VPZihfaXRlbUlkKSwgbmV4dFByaWNlT2YoX2l0ZW1JZCkpOwogIH0KCiAgZnVuY3Rpb24gaXRlbXNGb3JTYWxlTGltaXQgKHVpbnQyNTYgX2Zyb20sIHVpbnQyNTYgX3Rha2UpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTZbXSBfaXRlbXMpIHsKICAgIHVpbnQyNTZbXSBtZW1vcnkgaXRlbXMgPSBuZXcgdWludDI1NltdKF90YWtlKTsKCiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfdGFrZTsgaSsrKSB7CiAgICAgIGl0ZW1zW2ldID0gbGlzdGVkSXRlbXNbX2Zyb20gKyBpXTsKICAgIH0KCiAgICByZXR1cm4gaXRlbXM7CiAgfQoKICAvKiBVdGlsICovCiAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHVpbnQgc2l6ZTsKICAgIGFzc2VtYmx5IHsgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikgfSAvLyBzb2xpdW0tZGlzYWJsZS1saW5lCiAgICByZXR1cm4gc2l6ZSA+IDA7CiAgfQogIAogIGZ1bmN0aW9uIGNoYW5nZVByaWNlKHVpbnQyNTYgX2l0ZW1JZCwgdWludDI1NiBfcHJpY2UpIHB1YmxpYyBvbmx5QWRtaW5zKCkgewogICAgcmVxdWlyZShfcHJpY2UgPiAwKTsKICAgIHJlcXVpcmUoYWRtaW5zW293bmVyT2ZJdGVtW19pdGVtSWRdXSk7CiAgICBwcmljZU9mSXRlbVtfaXRlbUlkXSA9IF9wcmljZTsKICB9CiAgCiAgZnVuY3Rpb24gaXNzdWVDYXJkcyh1aW50MjU2IF9mcm9tLCB1aW50MjU2IF90bywgdWludDI1NiBfcHJpY2UpIHB1YmxpYyBvbmx5QWRtaW5zKCkgewogICAgZm9yICh1aW50MjU2IGkgPSBfZnJvbTsgaSA8PSBfdG87IGkrKykgewogICAgICAvLyBETyBOT1QgaXNzdWUgdHdpY2UsIGJsb2NrIGl0CiAgICAgIGlmIChvd25lck9mSXRlbVtpXSA9PSBhZGRyZXNzKDApKSB7CiAgICAgICAgb3duZXJPZkl0ZW1baV0gPSBtc2cuc2VuZGVyOwogICAgICAgIHByaWNlT2ZJdGVtW2ldID0gX3ByaWNlOwogICAgICAgIGxpc3RlZEl0ZW1zLnB1c2goaSk7CiAgICAgIH0KICAgIH0gICAgICAKICAgfSAgCn0gICAKCmludGVyZmFjZSBJSXRlbVJlZ2lzdHJ5IHsKICBmdW5jdGlvbiBpdGVtc0ZvclNhbGVMaW1pdCAodWludDI1NiBfZnJvbSwgdWludDI1NiBfdGFrZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NltdIF9pdGVtcyk7CiAgZnVuY3Rpb24gb3duZXJPZiAodWludDI1NiBfaXRlbUlkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIF9vd25lcik7CiAgZnVuY3Rpb24gcHJpY2VPZiAodWludDI1NiBfaXRlbUlkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9wcmljZSk7Cn0='.
	

]
