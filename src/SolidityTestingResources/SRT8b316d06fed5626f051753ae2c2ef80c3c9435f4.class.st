Class {
	#name : #SRT8b316d06fed5626f051753ae2c2ef80c3c9435f4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8b316d06fed5626f051753ae2c2ef80c3c9435f4 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgoKY29udHJhY3QgUHJlc2FsZUZhbGxiYWNrUmVjZWl2ZXIgewogIGJvb2wgcHVibGljIHByZXNhbGVGYWxsQmFja0NhbGxlZDsKCiAgZnVuY3Rpb24gcHJlc2FsZUZhbGxCYWNrKHVpbnQyNTYgX3ByZXNhbGVXZWlSYWlzZWQpIHB1YmxpYyByZXR1cm5zIChib29sKTsKfQoKCgoKCgoKCgoKCi8qKgogKiBAdGl0bGUgUGF1c2FibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgogKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CiAgZXZlbnQgUGF1c2UoKTsKICBldmVudCBVbnBhdXNlKCk7CgogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBub3QgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gdHJ1ZTsKICAgIFBhdXNlKCk7CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgKi8KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogIH0KfQoKCgoKCgovKioKICogQHRpdGxlIFJlZnVuZFZhdWx0CiAqIEBkZXYgVGhpcyBjb250cmFjdCBpcyB1c2VkIGZvciBzdG9yaW5nIGZ1bmRzIHdoaWxlIGEgY3Jvd2RzYWxlCiAqIGlzIGluIHByb2dyZXNzLiBTdXBwb3J0cyByZWZ1bmRpbmcgdGhlIG1vbmV5IGlmIGNyb3dkc2FsZSBmYWlscywKICogYW5kIGZvcndhcmRpbmcgaXQgaWYgY3Jvd2RzYWxlIGlzIHN1Y2Nlc3NmdWwuCiAqLwpjb250cmFjdCBSZWZ1bmRWYXVsdCBpcyBPd25hYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgZW51bSBTdGF0ZSB7IEFjdGl2ZSwgUmVmdW5kaW5nLCBDbG9zZWQgfQoKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkZXBvc2l0ZWQ7CiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwogIFN0YXRlIHB1YmxpYyBzdGF0ZTsKCiAgZXZlbnQgQ2xvc2VkKCk7CiAgZXZlbnQgUmVmdW5kc0VuYWJsZWQoKTsKICBldmVudCBSZWZ1bmRlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgd2VpQW1vdW50KTsKCiAgZnVuY3Rpb24gUmVmdW5kVmF1bHQoYWRkcmVzcyBfd2FsbGV0KSBwdWJsaWMgewogICAgcmVxdWlyZShfd2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgd2FsbGV0ID0gX3dhbGxldDsKICAgIHN0YXRlID0gU3RhdGUuQWN0aXZlOwogIH0KCiAgZnVuY3Rpb24gZGVwb3NpdChhZGRyZXNzIGludmVzdG9yKSBvbmx5T3duZXIgcHVibGljIHBheWFibGUgewogICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5BY3RpdmUpOwogICAgZGVwb3NpdGVkW2ludmVzdG9yXSA9IGRlcG9zaXRlZFtpbnZlc3Rvcl0uYWRkKG1zZy52YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiBjbG9zZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5BY3RpdmUpOwogICAgc3RhdGUgPSBTdGF0ZS5DbG9zZWQ7CiAgICBDbG9zZWQoKTsKICAgIHdhbGxldC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0KCiAgZnVuY3Rpb24gZW5hYmxlUmVmdW5kcygpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5BY3RpdmUpOwogICAgc3RhdGUgPSBTdGF0ZS5SZWZ1bmRpbmc7CiAgICBSZWZ1bmRzRW5hYmxlZCgpOwogIH0KCiAgZnVuY3Rpb24gcmVmdW5kKGFkZHJlc3MgaW52ZXN0b3IpIHB1YmxpYyB7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlJlZnVuZGluZyk7CiAgICB1aW50MjU2IGRlcG9zaXRlZFZhbHVlID0gZGVwb3NpdGVkW2ludmVzdG9yXTsKICAgIGRlcG9zaXRlZFtpbnZlc3Rvcl0gPSAwOwogICAgaW52ZXN0b3IudHJhbnNmZXIoZGVwb3NpdGVkVmFsdWUpOwogICAgUmVmdW5kZWQoaW52ZXN0b3IsIGRlcG9zaXRlZFZhbHVlKTsKICB9Cn0KCgoKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgoKCmNvbnRyYWN0IENvbnRyb2xsZWQgewogICAgLy8vIEBub3RpY2UgVGhlIGFkZHJlc3Mgb2YgdGhlIGNvbnRyb2xsZXIgaXMgdGhlIG9ubHkgYWRkcmVzcyB0aGF0IGNhbiBjYWxsCiAgICAvLy8gIGEgZnVuY3Rpb24gd2l0aCB0aGlzIG1vZGlmaWVyCiAgICBtb2RpZmllciBvbmx5Q29udHJvbGxlciB7IHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cm9sbGVyKTsgXzsgfQoKICAgIGFkZHJlc3MgcHVibGljIGNvbnRyb2xsZXI7CgogICAgZnVuY3Rpb24gQ29udHJvbGxlZCgpIHB1YmxpYyB7IGNvbnRyb2xsZXIgPSBtc2cuc2VuZGVyO30KCiAgICAvLy8gQG5vdGljZSBDaGFuZ2VzIHRoZSBjb250cm9sbGVyIG9mIHRoZSBjb250cmFjdAogICAgLy8vIEBwYXJhbSBfbmV3Q29udHJvbGxlciBUaGUgbmV3IGNvbnRyb2xsZXIgb2YgdGhlIGNvbnRyYWN0CiAgICBmdW5jdGlvbiBjaGFuZ2VDb250cm9sbGVyKGFkZHJlc3MgX25ld0NvbnRyb2xsZXIpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICAgICAgY29udHJvbGxlciA9IF9uZXdDb250cm9sbGVyOwogICAgfQp9CgoKCgoKCgoKCgpjb250cmFjdCBCVENQYXltZW50SSBpcyBPd25hYmxlLCBQcmVzYWxlRmFsbGJhY2tSZWNlaXZlciB7CiAgUGF5bWVudEZhbGxiYWNrUmVjZWl2ZXIgcHVibGljIHByZXNhbGU7CiAgUGF5bWVudEZhbGxiYWNrUmVjZWl2ZXIgcHVibGljIG1haW5zYWxlOwoKICBmdW5jdGlvbiBhZGRQYXltZW50KGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF90b2tlbnMpIHB1YmxpYzsKICBmdW5jdGlvbiBzZXRQcmVzYWxlKGFkZHJlc3MgX3ByZXNhbGUpIGV4dGVybmFsOwogIGZ1bmN0aW9uIHNldE1haW5zYWxlKGFkZHJlc3MgX21haW5zYWxlKSBleHRlcm5hbDsKICBmdW5jdGlvbiBwcmVzYWxlRmFsbEJhY2sodWludDI1NikgcHVibGljIHJldHVybnMgKGJvb2wpOwp9CgoKY29udHJhY3QgUGF5bWVudEZhbGxiYWNrUmVjZWl2ZXIgewogIEJUQ1BheW1lbnRJIHB1YmxpYyBwYXltZW50OwoKICBlbnVtIFNhbGVUeXBlIHsgcHJlLCBtYWluIH0KCiAgZnVuY3Rpb24gUGF5bWVudEZhbGxiYWNrUmVjZWl2ZXIoYWRkcmVzcyBfcGF5bWVudCkgcHVibGljIHsKICAgIHJlcXVpcmUoX3BheW1lbnQgIT0gYWRkcmVzcygwKSk7CiAgICBwYXltZW50ID0gQlRDUGF5bWVudEkoX3BheW1lbnQpOwogIH0KCiAgbW9kaWZpZXIgb25seVBheW1lbnQoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhwYXltZW50KSk7CiAgICBfOwogIH0KCiAgZXZlbnQgTWludEJ5QlRDKFNhbGVUeXBlIF9zYWxlVHlwZSwgYWRkcmVzcyBpbmRleGVkIF9iZW5lZmljaWFyeSwgdWludDI1NiBfdG9rZW5zKTsKCiAgLyoqCiAgICogQGRldiBwYXltZW50RmFsbEJhY2soKSBpcyBjYWxsZWQgaW4gQlRDUGF5bWVudC5hZGRQYXltZW50KCkuCiAgICogUHJlc2FsZSBvciBNYWluc2FsZSBjb250cmFjdCBzaG91bGQgbWludCB0b2tlbiB0byBiZW5lZmljaWFyeSwKICAgKiBhbmQgYXBwbHkgY29ycmVzcG9uZGluZyBldGhlciBhbW91bnQgdG8gbWF4IGV0aGVyIGNhcC4KICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IGV0aGVyZXVtIGFkZHJlc3Mgd2hvIHJlY2VpdmVzIHRva2VucwogICAqIEBwYXJhbSBfdG9rZW5zIGFtb3VudCBvZiBGWFQgdG8gbWludAogICAqLwogIGZ1bmN0aW9uIHBheW1lbnRGYWxsQmFjayhhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfdG9rZW5zKSBleHRlcm5hbCBvbmx5UGF5bWVudCgpOwp9CgoKCgoKCi8qKgogKiBAdGl0bGUgU3VkbwogKiBAZGV2IFNvbWUgZnVuY3Rpb25zIHNob3VsZCBiZSByZXN0cmljdGVkIHNvIGFzIG5vdCB0byBiZSBhdmFpbGFibGUgaW4gYW55IHNpdHVhdGlvbi4KICogYG9ubHlTdWRvRW5hYmxlZGAgbW9kaWZpZXIgY29udHJvbGxzIGl0LgogKi8KY29udHJhY3QgU3VkbyBpcyBPd25hYmxlIHsKICBib29sIHB1YmxpYyBzdWRvRW5hYmxlZDsKCiAgbW9kaWZpZXIgb25seVN1ZG9FbmFibGVkKCkgewogICAgcmVxdWlyZShzdWRvRW5hYmxlZCk7CiAgICBfOwogIH0KCiAgZXZlbnQgU3Vkb0VuYWJsZWQoYm9vbCBfc3Vkb0VuYWJsZWQpOwoKICBmdW5jdGlvbiBTdWRvKGJvb2wgX3N1ZG9FbmFibGVkKSBwdWJsaWMgewogICAgc3Vkb0VuYWJsZWQgPSBfc3Vkb0VuYWJsZWQ7CiAgfQoKICBmdW5jdGlvbiBlbmFibGVTdWRvKGJvb2wgX3N1ZG9FbmFibGVkKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHN1ZG9FbmFibGVkID0gX3N1ZG9FbmFibGVkOwogICAgU3Vkb0VuYWJsZWQoX3N1ZG9FbmFibGVkKTsKICB9Cn0KCgoKCgoKCgoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgpjb250cmFjdCBGWFRJIGlzIEVSQzIwIHsKICBib29sIHB1YmxpYyBzdWRvRW5hYmxlZCA9IHRydWU7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogIGZ1bmN0aW9uIGdlbmVyYXRlVG9rZW5zKGFkZHJlc3MgX293bmVyLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgZnVuY3Rpb24gZGVzdHJveVRva2VucyhhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogIGZ1bmN0aW9uIGJsb2NrQWRkcmVzcyhhZGRyZXNzIF9hZGRyKSBwdWJsaWM7CgogIGZ1bmN0aW9uIHVuYmxvY2tBZGRyZXNzKGFkZHJlc3MgX2FkZHIpIHB1YmxpYzsKCiAgZnVuY3Rpb24gZW5hYmxlU3Vkbyhib29sIF9zdWRvRW5hYmxlZCkgcHVibGljOwoKICBmdW5jdGlvbiBlbmFibGVUcmFuc2ZlcnMoYm9vbCBfdHJhbnNmZXJzRW5hYmxlZCkgcHVibGljOwoKICAvLyBieUxpc3QgZnVuY3Rpb25zCgogIGZ1bmN0aW9uIGdlbmVyYXRlVG9rZW5zQnlMaXN0KGFkZHJlc3NbXSBfb3duZXJzLCB1aW50W10gX2Ftb3VudHMpIHB1YmxpYyByZXR1cm5zIChib29sKTsKfQoKCgoKCi8qKgogKiBAdGl0bGUgS1lDSW50ZXJmYWNlCiAqLwpjb250cmFjdCBLWUNJIGlzIE93bmFibGUgewogIGZ1bmN0aW9uIHNldEFkbWluKGFkZHJlc3MgX2FkZHIsIGJvb2wgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gaXNSZWdpc3RlcmVkKGFkZHJlc3MgX2FkZHIsIGJvb2wgX2lzUHJlc2FsZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIHJlZ2lzdGVyKGFkZHJlc3MgX2FkZHIsIGJvb2wgX2lzUHJlc2FsZSkgcHVibGljOwogIGZ1bmN0aW9uIHJlZ2lzdGVyQnlMaXN0KGFkZHJlc3NbXSBfYWRkcnMsIGJvb2wgX2lzUHJlc2FsZSkgcHVibGljOwogIGZ1bmN0aW9uIHVucmVnaXN0ZXIoYWRkcmVzcyBfYWRkciwgYm9vbCBfaXNQcmVzYWxlKXB1YmxpYzsKICBmdW5jdGlvbiB1bnJlZ2lzdGVyQnlMaXN0KGFkZHJlc3NbXSBfYWRkcnMsIGJvb2wgX2lzUHJlc2FsZSkgcHVibGljOwp9CgoKLyoqCiAqIEBkZXYgVGhpcyBiYXNlIGNvbnRyYWN0IGlzIGluaGVyaXRlZCBieSBGWFRQcmVzYWxlIGFuZCBGWFRNYWluc2FsZQogKiBhbmQgaGF2ZSByZWxhdGVkIGNvbnRyYWN0cyBhZGRyZXNzIGFuZCBldGhlciBmdW5kZWQgaW4gdGhlIHNhbGUgYXMgc3RhdGUuCiAqIE1haW4gcHVycG9zZSBvZiB0aGlzIGJhc2UgY29udHJhY3QgaXMgdG8gcHJvdmlkZSB0aGUgaW50ZXJmYWNlIHRvIGNvbnRyb2wKICogZ2VuZXJhdGluZyAvIGJ1cm5pbmcgdG9rZW4gYW5kIGluY3JlYXNlIC8gZGVjcmVhc2UgZXRoZXIgZXRoZXIgZnVuZGVkIGluIHRoZSBzYWxlLgogKiBUaG9zZSBmdW5jdGlvbnMgYXJlIG9ubHkgY2FsbGVkIGluIGNhc2Ugb2YgZW1lcmdlbmN5IHNpdHVhdGlvbiBzdWNoIGFzCiAqIGVycm9uZW91cyBhY3Rpb24gaGFuZGxpbmcgQml0Y29pbiBwYXltZW50LgogKi8KY29udHJhY3QgU2FsZUJhc2UgaXMgU3VkbywgUGF1c2FibGUsIFBheW1lbnRGYWxsYmFja1JlY2VpdmVyIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgLy8gcmVsYXRlZCBjb250cmFjdHMKICBGWFRJIHB1YmxpYyB0b2tlbjsKICBLWUNJIHB1YmxpYyBreWM7CiAgUmVmdW5kVmF1bHQgcHVibGljIHZhdWx0OwoKICAvLyBmdXpleCBhY2NvdW50IHRvIGhvbGQgb3duZXJzaGlwIG9mIGNvbnRyYWN0cyBhZnRlciBzYWxlIGZpbmFsaXplZAogIGFkZHJlc3MgcHVibGljIGZ1emV4QWNjb3VudDsKCiAgLy8gY29tbW9uIHNhbGUgcGFyYW1ldGVycwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJlbmVmaWNpYXJ5RnVuZGVkOwogIHVpbnQyNTYgcHVibGljIHdlaVJhaXNlZDsKCiAgYm9vbCBwdWJsaWMgaXNGaW5hbGl6ZWQ7IC8vIHdoZXRoZXIgc2FsZSBpcyBmaW5hbGl6ZWQKCiAgLyoqCiAgICogQGRldiBBZnRlciBzYWxlIGZpbmFsaXplZCwgdG9rZW4gYW5kIG90aGVyIGNvbnRyYWN0IG93bmVyc2hpcCBpcyB0cmFuc2ZlcnJlZCB0bwogICAqIGFub3RoZXIgY29udHJhY3Qgb3IgYWNjb3VudC4gU28gdGhpcyBtb2RpZmllciBkb2Vzbid0IGVmZmVjdCBjb250cmFjdCBsb2dpYywganVzdAogICAqIG1ha2Ugc3VyZSBvZiBpdC4KICAgKi8KICBtb2RpZmllciBvbmx5Tm90RmluYWxpemVkKCkgewogICAgcmVxdWlyZSghaXNGaW5hbGl6ZWQpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIFNhbGVCYXNlKAogICAgYWRkcmVzcyBfdG9rZW4sCiAgICBhZGRyZXNzIF9reWMsCiAgICBhZGRyZXNzIF92YXVsdCwKICAgIGFkZHJlc3MgX3BheW1lbnQsCiAgICBhZGRyZXNzIF9mdXpleEFjY291bnQpCiAgICBTdWRvKGZhbHNlKSAvLyBzdWRvRW5hYmxlZAogICAgUGF5bWVudEZhbGxiYWNrUmVjZWl2ZXIoX3BheW1lbnQpCiAgICBwdWJsaWMKICB7CiAgICByZXF1aXJlKF90b2tlbiAhPSBhZGRyZXNzKDApCiAgICAgJiYgX2t5YyAhPSBhZGRyZXNzKDApCiAgICAgJiYgX3ZhdWx0ICE9IGFkZHJlc3MoMCkKICAgICAmJiBfZnV6ZXhBY2NvdW50ICE9IGFkZHJlc3MoMCkpOwoKICAgIHRva2VuID0gRlhUSShfdG9rZW4pOwogICAga3ljID0gS1lDSShfa3ljKTsKICAgIHZhdWx0ID0gUmVmdW5kVmF1bHQoX3ZhdWx0KTsKICAgIGZ1emV4QWNjb3VudCA9IF9mdXpleEFjY291bnQ7CiAgfQoKICAvKioKICAgKiBAZGV2IEJlbG93IDQgZnVuY3Rpb25zIGFyZSBvbmx5IGNhbGxlZCBpbiBjYXNlIG9mIGVtZXJnZW5jeSBhbmQgY2VydGFpbiBzaXR1YXRpb24uCiAgICogZS5nLiBXcm9uZyBwYXJhbWV0ZXJzIGZvciBCVENQYXltZW50LmFkZFBheW1lbnQgZnVuY3Rpb24gc28gdGhhdCB0b2tlbiBzaG91bGQgYmUgYnVybmVkIGFuZAogICAqIHdlaS1yYWlzZWQgc2hvdWxkIGJlIG1vZGlmaWVkLgogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlV2VpUmFpc2VkKHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIG9ubHlPd25lciBvbmx5Tm90RmluYWxpemVkIG9ubHlTdWRvRW5hYmxlZCB7CiAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKF9hbW91bnQpOwogIH0KCiAgZnVuY3Rpb24gZGVjcmVhc2VXZWlSYWlzZWQodWludDI1NiBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIG9ubHlOb3RGaW5hbGl6ZWQgb25seVN1ZG9FbmFibGVkIHsKICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5zdWIoX2Ftb3VudCk7CiAgfQoKICBmdW5jdGlvbiBnZW5lcmF0ZVRva2VucyhhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIG9ubHlOb3RGaW5hbGl6ZWQgb25seVN1ZG9FbmFibGVkIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB0b2tlbi5nZW5lcmF0ZVRva2Vucyhfb3duZXIsIF9hbW91bnQpOwogIH0KCiAgZnVuY3Rpb24gZGVzdHJveVRva2VucyhhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIG9ubHlOb3RGaW5hbGl6ZWQgb25seVN1ZG9FbmFibGVkIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB0b2tlbi5kZXN0cm95VG9rZW5zKF9vd25lciwgX2Ftb3VudCk7CiAgfQoKICAvKioKICAgKiBAZGV2IFByZXZlbnQgdG9rZW4gaG9sZGVyIGZyb20gdHJhbnNmZXIuCiAgICovCiAgZnVuY3Rpb24gYmxvY2tBZGRyZXNzKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBvbmx5T3duZXIgb25seU5vdEZpbmFsaXplZCBvbmx5U3Vkb0VuYWJsZWQgewogICAgdG9rZW4uYmxvY2tBZGRyZXNzKF9hZGRyKTsKICB9CgogIGZ1bmN0aW9uIHVuYmxvY2tBZGRyZXNzKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBvbmx5T3duZXIgb25seU5vdEZpbmFsaXplZCBvbmx5U3Vkb0VuYWJsZWQgewogICAgdG9rZW4udW5ibG9ja0FkZHJlc3MoX2FkZHIpOwogIH0KCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciBvd25lcnNoaXAgb2Ygb3RoZXIgY29udHJhY3Qgd2hvZXMgb3duZXIgaXMgYHRoaXNgIHRvIG90aGVyIGFkZHJlc3MuCiAgICovCiAgZnVuY3Rpb24gY2hhbmdlT3duZXJzaGlwKGFkZHJlc3MgX3RhcmdldCwgYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgT3duYWJsZShfdGFyZ2V0KS50cmFuc2Zlck93bmVyc2hpcChfbmV3T3duZXIpOwogIH0KCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciBvd25lcnNoaXAgb2YgTWluaU1lVG9rZW4gd2hvZXMgY29udHJvbGxlciBpcyBgdGhpc2AgdG8gb3RoZXIgYWRkcmVzcy4KICAgKi8KICBmdW5jdGlvbiBjaGFuZ2VDb250cm9sbGVyKGFkZHJlc3MgX3RhcmdldCwgYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgQ29udHJvbGxlZChfdGFyZ2V0KS5jaGFuZ2VDb250cm9sbGVyKF9uZXdPd25lcik7CiAgfQoKICBmdW5jdGlvbiBzZXRGaW5hbGl6ZSgpIGludGVybmFsIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCFpc0ZpbmFsaXplZCk7CiAgICBpc0ZpbmFsaXplZCA9IHRydWU7CiAgfQp9CgoKCi8qKgogKiBAdGl0bGUgRlhUUHJlc2FsZQogKiBAZGV2IFByaXZhdGUtc2FsZSBpcyBmaW5pc2hlZCBiZWZvcmUgdGhpcyBjb250cmFjdCBpcyBkZXBsb3llZC4KICoKICovCmNvbnRyYWN0IEZYVFByZXNhbGUgaXMgU2FsZUJhc2UgewogIHVpbnQyNTYgcHVibGljIGJhc2VSYXRlID0gMTIwMDA7ICAgIC8vIDEgRVRIID0gMTIwMDAgRlhUCiAgdWludDI1NiBwdWJsaWMgUFJFX0JPTlVTID0gMjU7ICAgICAvLyBwcmVzYWxlIGJvbnVzIDI1JQogIHVpbnQyNTYgcHVibGljIEJPTlVTX0NPRUZGID0gMTAwOwoKICAvLyBwcml2YXRlLXNhbGUgcGFyYW1ldGVycwogIHVpbnQyNTYgcHVibGljIHByaXZhdGVFdGhlckZ1bmRlZDsKICB1aW50MjU2IHB1YmxpYyBwcml2YXRlTWF4RXRoZXJDYXA7CgogIC8vIHByZXNhbGUgcGFyYW1ldGVycwogIHVpbnQyNTYgcHVibGljIHByZXNhbGVNYXhFdGhlckNhcDsKICB1aW50MjU2IHB1YmxpYyBwcmVzYWxlTWluUHVyY2hhc2U7CgogIHVpbnQyNTYgcHVibGljIG1heEV0aGVyQ2FwOyAgIC8vIG1heCBldGhlciBjYXAgZm9yIGJvdGggcHJpdmF0ZS1zYWxlICYgcHJlc2FsZQoKICB1aW50NjQgcHVibGljIHN0YXJ0VGltZTsgICAgIC8vIHdoZW4gcHJlc2FsZSBzdGFydHMKICB1aW50NjQgcHVibGljIGVuZFRpbWU7ICAgICAgIC8vIHdoZW4gcHJlc2FsZSBlbmRzCgogIGV2ZW50IFByZXNhbGVUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBfcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IHRvRnVuZCwgdWludDI1NiB0b2tlbnMpOwoKICAvKioKICAgKiBAZGV2IG9ubHkgcHJlc2FsZSByZWdpc3RlcmVkIGFkZHJlc3MgY2FuIHBhcnRpY2lwYXRlIHByZXNhbGUuCiAgICogcHJpdmF0ZS1zYWxlIGRvZXNuJ3QgcmVxdWlyZSB0byBjaGVjayBhZGRyZXNzIGJlY2F1c2Ugb3duZXIgZGVhbHMgd2l0aCBpdC4KICAgKi8KICBtb2RpZmllciBvbmx5UmVnaXN0ZXJlZChhZGRyZXNzIF9hZGRyKSB7CiAgICByZXF1aXJlKGt5Yy5pc1JlZ2lzdGVyZWQoX2FkZHIsIHRydWUpKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBGWFRQcmVzYWxlKAogICAgYWRkcmVzcyBfdG9rZW4sCiAgICBhZGRyZXNzIF9reWMsCiAgICBhZGRyZXNzIF92YXVsdCwKICAgIGFkZHJlc3MgX3BheW1lbnQsCiAgICBhZGRyZXNzIF9mdXpleEFjY291bnQsCiAgICB1aW50NjQgX3N0YXJ0VGltZSwKICAgIHVpbnQ2NCBfZW5kVGltZSwKICAgIHVpbnQyNTYgX3ByaXZhdGVFdGhlckZ1bmRlZCwKICAgIHVpbnQyNTYgX3ByaXZhdGVNYXhFdGhlckNhcCwKICAgIHVpbnQyNTYgX3ByZXNhbGVNYXhFdGhlckNhcCwKICAgIHVpbnQyNTYgX3ByZXNhbGVNaW5QdXJjaGFzZSkKICAgIFNhbGVCYXNlKF90b2tlbiwgX2t5YywgX3ZhdWx0LCBfcGF5bWVudCwgX2Z1emV4QWNjb3VudCkKICAgIHB1YmxpYwogIHsKICAgIHJlcXVpcmUobm93IDwgX3N0YXJ0VGltZSAmJiBfc3RhcnRUaW1lIDwgX2VuZFRpbWUpOwoKICAgIHJlcXVpcmUoX3ByaXZhdGVFdGhlckZ1bmRlZCA+PSAwKTsKICAgIHJlcXVpcmUoX3ByaXZhdGVNYXhFdGhlckNhcCA+IDApOwogICAgcmVxdWlyZShfcHJlc2FsZU1heEV0aGVyQ2FwID4gMCk7CiAgICByZXF1aXJlKF9wcmVzYWxlTWluUHVyY2hhc2UgPiAwKTsKCiAgICByZXF1aXJlKF9wcmVzYWxlTWluUHVyY2hhc2UgPCBfcHJlc2FsZU1heEV0aGVyQ2FwKTsKCiAgICBzdGFydFRpbWUgPSBfc3RhcnRUaW1lOwogICAgZW5kVGltZSA9IF9lbmRUaW1lOwoKICAgIHByaXZhdGVFdGhlckZ1bmRlZCA9IF9wcml2YXRlRXRoZXJGdW5kZWQ7CiAgICBwcml2YXRlTWF4RXRoZXJDYXAgPSBfcHJpdmF0ZU1heEV0aGVyQ2FwOwoKICAgIHByZXNhbGVNYXhFdGhlckNhcCA9IF9wcmVzYWxlTWF4RXRoZXJDYXA7CiAgICBwcmVzYWxlTWluUHVyY2hhc2UgPSBfcHJlc2FsZU1pblB1cmNoYXNlOwoKICAgIG1heEV0aGVyQ2FwID0gcHJpdmF0ZU1heEV0aGVyQ2FwLmFkZChwcmVzYWxlTWF4RXRoZXJDYXApOwogICAgd2VpUmFpc2VkID0gX3ByaXZhdGVFdGhlckZ1bmRlZDsgLy8gZXRoZXIgZnVuZGVkIGR1cmluZyBwcml2YXRlLXNhbGUKCiAgICByZXF1aXJlKHdlaVJhaXNlZCA8PSBtYXhFdGhlckNhcCk7CiAgfQoKICBmdW5jdGlvbiAoKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgIGJ1eVByZXNhbGUobXNnLnNlbmRlcik7CiAgfQoKICAvKioKICAgKiBAZGV2IHBheW1lbnRGYWxsQmFjaygpIGFzc3VtZXMgdGhhdCBwYWlkIEJUQyBkb2Vzbid0IGV4Y2VlZCB0aGUgbWF4IGV0aGVyIGNhcC4KICAgKiBCVEMgLyBFVEggcHJpY2UgKG9yIHJhdGUpIGlzIGRldGVybWluZWQgdXNpbmcgcmVsaWFibGUgb3V0ZXIgcmVzb3VyY2VzLgogICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgZXRoZXJldW0gYWRkcmVzcyB3aG8gcmVjZWl2ZXMgdG9rZW5zCiAgICogQHBhcmFtIF90b2tlbnMgYW1vdW50IG9mIEZYVCB0byBtaW50CiAgICovCiAgZnVuY3Rpb24gcGF5bWVudEZhbGxCYWNrKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF90b2tlbnMpCiAgICBleHRlcm5hbAogICAgb25seVBheW1lbnQKICB7CiAgICAvLyBvbmx5IGNoZWNrIHRpbWUgYW5kIHBhcmFtZXRlcnMKICAgIHJlcXVpcmUoc3RhcnRUaW1lIDw9IG5vdyAmJiBub3cgPD0gZW5kVGltZSk7CiAgICByZXF1aXJlKF9iZW5lZmljaWFyeSAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3Rva2VucyA+IDApOwoKICAgIHVpbnQyNTYgcmF0ZSA9IGdldFJhdGUoKTsKICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gX3Rva2Vucy5kaXYocmF0ZSk7CgogICAgcmVxdWlyZSh3ZWlBbW91bnQgPj0gcHJlc2FsZU1pblB1cmNoYXNlKTsKCiAgICAvLyBmdW5kZWQgZXRoZXIgc2hvdWxkIG5vdCBleGNlZWQgbWF4IGV0aGVyIGNhcC4KICAgIHJlcXVpcmUod2VpUmFpc2VkLmFkZCh3ZWlBbW91bnQpIDw9IG1heEV0aGVyQ2FwKTsKCiAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CiAgICBiZW5lZmljaWFyeUZ1bmRlZFtfYmVuZWZpY2lhcnldID0gYmVuZWZpY2lhcnlGdW5kZWRbX2JlbmVmaWNpYXJ5XS5hZGQod2VpQW1vdW50KTsKCiAgICB0b2tlbi5nZW5lcmF0ZVRva2VucyhfYmVuZWZpY2lhcnksIF90b2tlbnMpOwogICAgTWludEJ5QlRDKFNhbGVUeXBlLnByZSwgX2JlbmVmaWNpYXJ5LCBfdG9rZW5zKTsKICB9CgogIGZ1bmN0aW9uIGJ1eVByZXNhbGUoYWRkcmVzcyBfYmVuZWZpY2lhcnkpCiAgICBwdWJsaWMKICAgIHBheWFibGUKICAgIG9ubHlSZWdpc3RlcmVkKF9iZW5lZmljaWFyeSkKICAgIHdoZW5Ob3RQYXVzZWQKICB7CiAgICAvLyBjaGVjayB2YWxpZGl0eQogICAgcmVxdWlyZShfYmVuZWZpY2lhcnkgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBwcmVzYWxlTWluUHVyY2hhc2UpOwogICAgcmVxdWlyZSh2YWxpZFB1cmNoYXNlKCkpOwoKICAgIHVpbnQyNTYgdG9GdW5kOwogICAgdWludDI1NiB0b2tlbnM7CgogICAgKHRvRnVuZCwgdG9rZW5zKSA9IGJ1eShfYmVuZWZpY2lhcnkpOwoKICAgIFByZXNhbGVUb2tlblB1cmNoYXNlKG1zZy5zZW5kZXIsIF9iZW5lZmljaWFyeSwgdG9GdW5kLCB0b2tlbnMpOwogIH0KCiAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgX2JlbmVmaWNpYXJ5KQogICAgaW50ZXJuYWwKICAgIHJldHVybnMgKHVpbnQyNTYgdG9GdW5kLCB1aW50MjU2IHRva2VucykKICB7CiAgICAvLyBjYWxjdWxhdGUgZXRoIGFtb3VudAogICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICB1aW50MjU2IHRvdGFsQW1vdW50ID0gd2VpUmFpc2VkLmFkZCh3ZWlBbW91bnQpOwoKICAgIGlmICh0b3RhbEFtb3VudCA+IG1heEV0aGVyQ2FwKSB7CiAgICAgIHRvRnVuZCA9IG1heEV0aGVyQ2FwLnN1Yih3ZWlSYWlzZWQpOwogICAgfSBlbHNlIHsKICAgICAgdG9GdW5kID0gd2VpQW1vdW50OwogICAgfQoKICAgIHJlcXVpcmUodG9GdW5kID4gMCk7CiAgICByZXF1aXJlKHdlaUFtb3VudCA+PSB0b0Z1bmQpOwoKICAgIHVpbnQyNTYgcmF0ZSA9IGdldFJhdGUoKTsKICAgIHRva2VucyA9IHRvRnVuZC5tdWwocmF0ZSk7CiAgICB1aW50MjU2IHRvUmV0dXJuID0gd2VpQW1vdW50LnN1Yih0b0Z1bmQpOwoKICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQodG9GdW5kKTsKICAgIGJlbmVmaWNpYXJ5RnVuZGVkW19iZW5lZmljaWFyeV0gPSBiZW5lZmljaWFyeUZ1bmRlZFtfYmVuZWZpY2lhcnldLmFkZCh0b0Z1bmQpOwoKICAgIHRva2VuLmdlbmVyYXRlVG9rZW5zKF9iZW5lZmljaWFyeSwgdG9rZW5zKTsKCiAgICBpZiAodG9SZXR1cm4gPiAwKSB7CiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodG9SZXR1cm4pOwogICAgfQoKICAgIGZvcndhcmRGdW5kcyh0b0Z1bmQpOwogIH0KCiAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZSgpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgYm9vbCBub25aZXJvUHVyY2hhc2UgPSBtc2cudmFsdWUgIT0gMDsKICAgIGJvb2wgdmFsaWRUaW1lID0gbm93ID49IHN0YXJ0VGltZSAmJiBub3cgPD0gZW5kVGltZTsKICAgIHJldHVybiBub25aZXJvUHVyY2hhc2UgJiYgIW1heFJlYWNoZWQoKSAmJiB2YWxpZFRpbWU7CiAgfQoKICAvKioKICAgKiBAZGV2IGdldCBjdXJyZW50IHJhdGUKICAgKi8KICBmdW5jdGlvbiBnZXRSYXRlKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGNhbGNSYXRlKFBSRV9CT05VUyk7CiAgfQoKICAvKioKICAgKiBAZGV2IENhbGN1bGF0ZSByYXRlIHdydCBfYm9udXMuIGlmIF9ib251cyBpcyAxNSwgdGhpcyBmdW5jdGlvbgogICAqIHJldHVybnMgYmFzZVJhdGUgKiAxLjE1LgogICAqIHJhdGUgPSAxMjAwMCAqICgyNSArIDEwMCkgLyAxMDAgZm9yIDI1JSBib251cwogICAqLwogIGZ1bmN0aW9uIGNhbGNSYXRlKHVpbnQyNTYgX2JvbnVzKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBfYm9udXMuYWRkKEJPTlVTX0NPRUZGKS5tdWwoYmFzZVJhdGUpLmRpdihCT05VU19DT0VGRik7CiAgfQoKICAvKioKICAgKiBAZGV2IENoZWNrcyB3aGV0aGVyIG1heCBldGhlciBjYXAgaXMgcmVhY2hlZCBmb3IgcHJlc2FsZQogICAqIEByZXR1cm4gdHJ1ZSBpZiBtYXggZXRoZXIgY2FwIGlzIHJlYWNlZAogICAqLwogIGZ1bmN0aW9uIG1heFJlYWNoZWQoKSBwdWJsaWMgdmlldyAgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHdlaVJhaXNlZCA9PSBtYXhFdGhlckNhcDsKICB9CgogIGZ1bmN0aW9uIGZvcndhcmRGdW5kcyh1aW50MjU2IF90b0Z1bmQpIGludGVybmFsIHsKICAgIHZhdWx0LmRlcG9zaXQudmFsdWUoX3RvRnVuZCkobXNnLnNlbmRlcik7CiAgfQoKICBmdW5jdGlvbiBmaW5hbGl6ZVByZXNhbGUoYWRkcmVzcyBfbWFpbnNhbGUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICByZXF1aXJlKCFpc0ZpbmFsaXplZCk7CiAgICAgIHJlcXVpcmUobWF4UmVhY2hlZCgpIHx8IG5vdyA+IGVuZFRpbWUpOwoKICAgICAgUHJlc2FsZUZhbGxiYWNrUmVjZWl2ZXIgbWFpbnNhbGUgPSBQcmVzYWxlRmFsbGJhY2tSZWNlaXZlcihfbWFpbnNhbGUpOwoKICAgICAgcmVxdWlyZShtYWluc2FsZS5wcmVzYWxlRmFsbEJhY2sod2VpUmFpc2VkKSk7CiAgICAgIHJlcXVpcmUocGF5bWVudC5wcmVzYWxlRmFsbEJhY2sod2VpUmFpc2VkKSk7CgogICAgICB2YXVsdC5jbG9zZSgpOwoKICAgICAgY2hhbmdlQ29udHJvbGxlcihhZGRyZXNzKHRva2VuKSwgX21haW5zYWxlKTsKICAgICAgY2hhbmdlT3duZXJzaGlwKGFkZHJlc3ModmF1bHQpLCBmdXpleEFjY291bnQpOwoKICAgICAgZW5hYmxlU3VkbyhmYWxzZSk7CiAgICAgIHNldEZpbmFsaXplKCk7CiAgfQp9'.
	

]
