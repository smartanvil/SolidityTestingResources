Class {
	#name : #SRT5ca71ea65acb6293e71e62c41b720698b0aa611c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5ca71ea65acb6293e71e62c41b720698b0aa611c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLiAKICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLiAKICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogIH0KCn0KCmNvbnRyYWN0IE1pZ3JhdGlvbkFnZW50IHsKICAgIGZ1bmN0aW9uIG1pZ3JhdGVGcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKTsKfQoKLyoqCiAgICBCbG9ja0NoYWluIEJvYXJkIE9mIERlcml2YXRpdmVzIFRva2VuLgogKi8KY29udHJhY3QgQkJEVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CgogICAgLy8gTWV0YWRhdGEKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJCbG9ja0NoYWluIEJvYXJkIE9mIERlcml2YXRpdmVzIFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkJCRCI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgc3RyaW5nIHByaXZhdGUgY29uc3RhbnQgdmVyc2lvbiA9ICcxLjAuMCc7CgogICAgLy8gQ3Jvd2RzYWxlIHBhcmFtZXRlcnMKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHN0YXJ0VGltZSA9IDE1MDY4NDQ4MDA7IC8vU3VuZGF5LCAxIE9jdG9iZXIgMjAxNyAwODowMDowMCBHTVQKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGVuZFRpbWUgPSAxNTA5NTIzMjAwOyAgLy8gV2VkbmVzZGF5LCAxIE5vdmVtYmVyIDIwMTcgMDg6MDA6MDAgR01UCgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgY3JlYXRpb25NYXhDYXAgPSAzMDAwMDAwMDAgKiAxMCAqKiBkZWNpbWFsczsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGNyZWF0aW9uTWluQ2FwID0gMjUwMDAwMCAqIDEwICoqIGRlY2ltYWxzOwoKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBzdGFydENyZWF0aW9uUmF0ZU9uVGltZSA9IDE2NjY7IC8vIDE2NjYgQkREIHBlciAxIEVUSAogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IGVuZENyZWF0aW9uUmF0ZU9uVGltZSA9IDEwMDA7IC8vIDEwMDAgQkREIHBlciAxIEVUSAoKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBxdWFudGl0eVRocmVzaG9sZF8xMCA9IDEwIGV0aGVyOwogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IHF1YW50aXR5VGhyZXNob2xkXzMwID0gMzAgZXRoZXI7CiAgICB1aW50MjU2IHByaXZhdGUgY29uc3RhbnQgcXVhbnRpdHlUaHJlc2hvbGRfMTAwID0gMTAwIGV0aGVyOwogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IHF1YW50aXR5VGhyZXNob2xkXzMwMCA9IDMwMCBldGhlcjsKCiAgICB1aW50MjU2IHByaXZhdGUgY29uc3RhbnQgcXVhbnRpdHlCb251c18xMCA9IDUwMDsgICAgLy8gNSUKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBxdWFudGl0eUJvbnVzXzMwID0gMTAwMDsgIC8vIDEwJQogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IHF1YW50aXR5Qm9udXNfMTAwID0gMTUwMDsgLy8gMTUlCiAgICB1aW50MjU2IHByaXZhdGUgY29uc3RhbnQgcXVhbnRpdHlCb251c18zMDAgPSAyMDAwOyAvLyAyMCUKCiAgICAvLyBUaGUgZmxhZyBpbmRpY2F0ZXMgaWYgdGhlIGNyb3dkc2FsZSB3YXMgZmluYWxpemVkCiAgICBib29sIHB1YmxpYyBmaW5hbGl6ZWQgPSBmYWxzZTsKCiAgICAvLyBNaWdyYXRpb24gaW5mb3JtYXRpb24KICAgIGFkZHJlc3MgcHVibGljIG1pZ3JhdGlvbkFnZW50OwogICAgdWludDI1NiBwdWJsaWMgdG90YWxNaWdyYXRlZDsKCiAgICAvLyBFeGNoYW5nZSBhZGRyZXNzCiAgICBhZGRyZXNzIHB1YmxpYyBleGNoYW5nZUFkZHJlc3M7CgogICAgLy8gVGVhbSBhY2NvdW50cwogICAgYWRkcmVzcyBwcml2YXRlIGNvbnN0YW50IG1haW5BY2NvdW50ID0gMHhFQjFENDBmNkRBMEU3N0UyY0EwNDYzMjVGNkYyYTc2MDgxQjRjN2Y0OwogICAgYWRkcmVzcyBwcml2YXRlIGNvbnN0YW50IGNvcmVUZWFtTWVtYmVyT25lID0gMHhlNDMwODhFODIzZUE3NDIyRDc3RTMyYTE5NTI2N2FFOTc3OUE4QjA3OwogICAgYWRkcmVzcyBwcml2YXRlIGNvbnN0YW50IGNvcmVUZWFtTWVtYmVyVHdvID0gMHhhZDAwODg0ZDFFN0QwMzU0ZDE2ZmE4QWIwODMyMDhjMmNDM0VkNTE1OwoKICAgIC8vIEV0aGVyIHJhaXNlZAogICAgdWludDI1NiBwcml2YXRlIHJhaXNlZCA9IDA7CgogICAgLy8gU2luY2Ugd2UgaGF2ZSBkaWZmZXJlbnQgZXhjaGFuZ2UgcmF0ZXMsIHdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiBob3cKICAgIC8vIG11Y2ggZXRoZXIgZWFjaCBjb250cmlidXRlZCBpbiBjYXNlIHRoYXQgd2UgbmVlZCB0byBpc3N1ZSBhIHJlZnVuZAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIGV0aEJhbGFuY2VzOwoKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBkaXZpc29yID0gMTAwMDA7CgogICAgLy8gRXZlbnRzCiAgICBldmVudCBMb2dSZWZ1bmQoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBMb2dNaWdyYXRlKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgTG9nQnV5KGFkZHJlc3MgaW5kZXhlZCBfcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF92YWx1ZSwgdWludDI1NiBfYW1vdW50KTsKCiAgICAvLyBDaGVjayBpZiBtaW4gY2FwIHdhcyBhcmNoaXZlZC4KICAgIG1vZGlmaWVyIG9ubHlXaGVuSUNPUmVhY2hlZENyZWF0aW9uTWluQ2FwKCkgewogICAgICAgIHJlcXVpcmUoIHRvdGFsU3VwcGx5ID49IGNyZWF0aW9uTWluQ2FwICk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbigpIHBheWFibGUgewogICAgICAgIGJ1eShtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGlvblJhdGVPblRpbWUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgY3VycmVudFByaWNlOwoKICAgICAgICBpZiAobm93ID4gZW5kVGltZSkgewogICAgICAgICAgICBjdXJyZW50UHJpY2UgPSBlbmRDcmVhdGlvblJhdGVPblRpbWU7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAvL1ByaWNlIGlzIGNoYW5naW5nIGxpbmVyYWwgc3RhcnRpbmcgZnJvbSAgc3RhcnRDcmVhdGlvblJhdGVPblRpbWUgdG8gZW5kQ3JlYXRpb25SYXRlT25UaW1lCiAgICAgICAgICAgIHVpbnQyNTYgcmF0ZVJhbmdlID0gc3RhcnRDcmVhdGlvblJhdGVPblRpbWUgLSBlbmRDcmVhdGlvblJhdGVPblRpbWU7CiAgICAgICAgICAgIHVpbnQyNTYgdGltZVJhbmdlID0gZW5kVGltZSAtIHN0YXJ0VGltZTsKICAgICAgICAgICAgY3VycmVudFByaWNlID0gc3RhcnRDcmVhdGlvblJhdGVPblRpbWUuc3ViKHJhdGVSYW5nZS5tdWwobm93LnN1YihzdGFydFRpbWUpKS5kaXYodGltZVJhbmdlKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gY3VycmVudFByaWNlOwogICAgfQoKICAgIC8vQ2FsY3VsYXRlIG51bWJlciBvZiBCQkQgdG9rZW5zIGZvciBwcm92aWRlZCBldGhlcgogICAgZnVuY3Rpb24gY2FsY3VsYXRlQkREKHVpbnQyNTYgX2V0aFZhbCkgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBib251czsKCiAgICAgICAgLy9XZSBwcm92aWRlIGJvbnVzIGRlcGVuZGluZyBvbiBldGggdmFsdWUKICAgICAgICBpZiAoX2V0aFZhbCA8IHF1YW50aXR5VGhyZXNob2xkXzEwKSB7CiAgICAgICAgICAgIGJvbnVzID0gMDsgLy8gMCUgYm9udXMKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoX2V0aFZhbCA8IHF1YW50aXR5VGhyZXNob2xkXzMwKSB7CiAgICAgICAgICAgIGJvbnVzID0gcXVhbnRpdHlCb251c18xMDsgLy8gNSUgYm9udXMKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoX2V0aFZhbCA8IHF1YW50aXR5VGhyZXNob2xkXzEwMCkgewogICAgICAgICAgICBib251cyA9IHF1YW50aXR5Qm9udXNfMzA7IC8vIDEwJSBib251cwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChfZXRoVmFsIDwgcXVhbnRpdHlUaHJlc2hvbGRfMzAwKSB7CiAgICAgICAgICAgIGJvbnVzID0gcXVhbnRpdHlCb251c18xMDA7IC8vIDE1JSBib251cwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgYm9udXMgPSBxdWFudGl0eUJvbnVzXzMwMDsgLy8gMjAlIGJvbnVzCiAgICAgICAgfQoKICAgICAgICAvLyBHZXQgbnVtYmVyIG9mIEJCRCB0b2tlbnMKICAgICAgICByZXR1cm4gX2V0aFZhbC5tdWwoY3JlYXRpb25SYXRlT25UaW1lKCkpLm11bChkaXZpc29yLmFkZChib251cykpLmRpdihkaXZpc29yKTsKICAgIH0KCiAgICAvLyBCdXkgQkJECiAgICBmdW5jdGlvbiBidXkoYWRkcmVzcyBfYmVuZWZpY2lhcnkpIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoIWZpbmFsaXplZCk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgIT0gMCk7CiAgICAgICAgcmVxdWlyZShub3cgPD0gZW5kVGltZSk7CiAgICAgICAgcmVxdWlyZShub3cgPj0gc3RhcnRUaW1lKTsKCiAgICAgICAgdWludDI1NiBiYmRUb2tlbnMgPSBjYWxjdWxhdGVCREQobXNnLnZhbHVlKTsKICAgICAgICB1aW50MjU2IGFkZGl0aW9uYWxCQkRUb2tlbnNGb3JNYWluQWNjb3VudCA9IGJiZFRva2Vucy5tdWwoMjI1MCkuZGl2KGRpdmlzb3IpOyAvLyAyMi41JQogICAgICAgIHVpbnQyNTYgYWRkaXRpb25hbEJCRFRva2Vuc0ZvckNvcmVUZWFtTWVtYmVyID0gYmJkVG9rZW5zLm11bCgxMjUpLmRpdihkaXZpc29yKTsgLy8gMS4yNSUKCiAgICAgICAgLy9JbmNyZWFzZSBieSAyNSUgbnVtYmVyIG9mIGJiZCB0b2tlbnMgb24gZWFjaCBidXkuCiAgICAgICAgdWludDI1NiBjaGVja2VkU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKGJiZFRva2VucykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGQoYWRkaXRpb25hbEJCRFRva2Vuc0Zvck1haW5BY2NvdW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZCgyICogYWRkaXRpb25hbEJCRFRva2Vuc0ZvckNvcmVUZWFtTWVtYmVyKTsKCiAgICAgICAgcmVxdWlyZShjcmVhdGlvbk1heENhcCA+PSBjaGVja2VkU3VwcGx5KTsKCiAgICAgICAgdG90YWxTdXBwbHkgPSBjaGVja2VkU3VwcGx5OwoKICAgICAgICAvL1VwZGF0ZSBiYWxhbmNlcwogICAgICAgIGJhbGFuY2VzW19iZW5lZmljaWFyeV0gPSBiYWxhbmNlc1tfYmVuZWZpY2lhcnldLmFkZChiYmRUb2tlbnMpOwogICAgICAgIGJhbGFuY2VzW21haW5BY2NvdW50XSA9IGJhbGFuY2VzW21haW5BY2NvdW50XS5hZGQoYWRkaXRpb25hbEJCRFRva2Vuc0Zvck1haW5BY2NvdW50KTsKICAgICAgICBiYWxhbmNlc1tjb3JlVGVhbU1lbWJlck9uZV0gPSBiYWxhbmNlc1tjb3JlVGVhbU1lbWJlck9uZV0uYWRkKGFkZGl0aW9uYWxCQkRUb2tlbnNGb3JDb3JlVGVhbU1lbWJlcik7CiAgICAgICAgYmFsYW5jZXNbY29yZVRlYW1NZW1iZXJUd29dID0gYmFsYW5jZXNbY29yZVRlYW1NZW1iZXJUd29dLmFkZChhZGRpdGlvbmFsQkJEVG9rZW5zRm9yQ29yZVRlYW1NZW1iZXIpOwoKICAgICAgICBldGhCYWxhbmNlc1tfYmVuZWZpY2lhcnldID0gZXRoQmFsYW5jZXNbX2JlbmVmaWNpYXJ5XS5hZGQobXNnLnZhbHVlKTsKCiAgICAgICAgcmFpc2VkICs9IG1zZy52YWx1ZTsKCiAgICAgICAgaWYgKGV4Y2hhbmdlQWRkcmVzcyAhPSAweDAgJiYgdG90YWxTdXBwbHkgPj0gY3JlYXRpb25NaW5DYXAgJiYgbXNnLnZhbHVlID49IDEgZXRoZXIpIHsKICAgICAgICAgICAgLy8gQWZ0ZXIgYXJjaGl2aW5nIG1pbiBjYXAgd2Ugc3RhcnQgbW92aW5nIDEwJSB0byBleGNoYW5nZS4gSXQgd2lsbCBoZWxwIHdpdGggbGlxdWlkaXR5IG9uIGV4Y2hhbmdlLgogICAgICAgICAgICBleGNoYW5nZUFkZHJlc3MudHJhbnNmZXIobXNnLnZhbHVlLm11bCgxMDAwKS5kaXYoZGl2aXNvcikpOyAvLyAxMCUKICAgICAgICB9CgogICAgICAgIExvZ0J1eShtc2cuc2VuZGVyLCBfYmVuZWZpY2lhcnksIG1zZy52YWx1ZSwgYmJkVG9rZW5zKTsKICAgIH0KCiAgICAvLyBGaW5hbGl6ZSBmb3Igc3VjY2Vzc2Z1bCBJQ08KICAgIGZ1bmN0aW9uIGZpbmFsaXplKCkgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKCFmaW5hbGl6ZWQpOwogICAgICAgIHJlcXVpcmUobm93ID49IGVuZFRpbWUgfHwgdG90YWxTdXBwbHkgPj0gY3JlYXRpb25NYXhDYXApOwoKICAgICAgICBmaW5hbGl6ZWQgPSB0cnVlOwoKICAgICAgICB1aW50MjU2IGV0aEZvckNvcmVNZW1iZXIgPSByYWlzZWQubXVsKDUwMCkuZGl2KGRpdmlzb3IpOwoKICAgICAgICBjb3JlVGVhbU1lbWJlck9uZS50cmFuc2ZlcihldGhGb3JDb3JlTWVtYmVyKTsgLy8gNSUKICAgICAgICBjb3JlVGVhbU1lbWJlclR3by50cmFuc2ZlcihldGhGb3JDb3JlTWVtYmVyKTsgLy8gNSUKICAgICAgICBtYWluQWNjb3VudC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOyAvLzkwJQogICAgfQoKICAgIC8vIFJlZnVuZCBpZiBJQ08gd29uJ3QgcmVhY2ggbWluIGNhcAogICAgZnVuY3Rpb24gcmVmdW5kKCkgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUobm93ID4gZW5kVGltZSk7CiAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSA8IGNyZWF0aW9uTWluQ2FwKTsKCiAgICAgICAgdWludDI1NiBiZGRWYWwgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXTsKICAgICAgICByZXF1aXJlKGJkZFZhbCA+IDApOwogICAgICAgIHVpbnQyNTYgZXRoVmFsID0gZXRoQmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgICAgcmVxdWlyZShldGhWYWwgPiAwKTsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIGV0aEJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihiZGRWYWwpOwoKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV0aFZhbCk7CgogICAgICAgIExvZ1JlZnVuZChtc2cuc2VuZGVyLCBldGhWYWwpOwogICAgfQoKICAgIC8vIEFsbG93IHRvIG1pZ3JhdGUgdG8gbmV4dCB2ZXJzaW9uIG9mIGNvbnRyYWN0CiAgICBmdW5jdGlvbiBtaWdyYXRlKHVpbnQyNTYgX3ZhbHVlKSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShmaW5hbGl6ZWQpOwogICAgICAgIHJlcXVpcmUobWlncmF0aW9uQWdlbnQgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIHRvdGFsTWlncmF0ZWQgPSB0b3RhbE1pZ3JhdGVkLmFkZChfdmFsdWUpOwoKICAgICAgICBNaWdyYXRpb25BZ2VudChtaWdyYXRpb25BZ2VudCkubWlncmF0ZUZyb20obXNnLnNlbmRlciwgX3ZhbHVlKTsKCiAgICAgICAgTG9nTWlncmF0ZShtc2cuc2VuZGVyLCBtaWdyYXRpb25BZ2VudCwgX3ZhbHVlKTsKICAgIH0KCiAgICAvLyBTZXQgbWlncmF0aW9uIEFnZW50CiAgICBmdW5jdGlvbiBzZXRNaWdyYXRpb25BZ2VudChhZGRyZXNzIF9hZ2VudCkgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKGZpbmFsaXplZCk7CiAgICAgICAgcmVxdWlyZShtaWdyYXRpb25BZ2VudCA9PSAweDApOwoKICAgICAgICBtaWdyYXRpb25BZ2VudCA9IF9hZ2VudDsKICAgIH0KCiAgICAvLyBTZXQgZXhjaGFuZ2UgYWRkcmVzcwogICAgZnVuY3Rpb24gc2V0RXhjaGFuZ2VBZGRyZXNzKGFkZHJlc3MgX2V4Y2hhbmdlQWRkcmVzcykgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKGV4Y2hhbmdlQWRkcmVzcyA9PSAweDApOwoKICAgICAgICBleGNoYW5nZUFkZHJlc3MgPSBfZXhjaGFuZ2VBZGRyZXNzOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVdoZW5JQ09SZWFjaGVkQ3JlYXRpb25NaW5DYXAgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVdoZW5JQ09SZWFjaGVkQ3JlYXRpb25NaW5DYXAgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvLyBUcmFuc2ZlciBCQkQgdG8gZXhjaGFuZ2UuCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvRXhjaGFuZ2UoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIG9ubHlXaGVuSUNPUmVhY2hlZENyZWF0aW9uTWluQ2FwIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXhjaGFuZ2VBZGRyZXNzKTsKCiAgICAgICAgYmFsYW5jZXNbZXhjaGFuZ2VBZGRyZXNzXSA9IGJhbGFuY2VzW2V4Y2hhbmdlQWRkcmVzc10uYWRkKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwoKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgZXhjaGFuZ2VBZGRyZXNzLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBJQ08gb3ZlcnZpZXcKICAgIGZ1bmN0aW9uIGljb092ZXJ2aWV3KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBjdXJyZW50bHlSYWlzZWQsIHVpbnQyNTYgY3VycmVudGx5VG90YWxTdXBwbHksIHVpbnQyNTYgY3VycmVudGx5Q3JlYXRpb25SYXRlT25UaW1lKXsKICAgICAgICBjdXJyZW50bHlSYWlzZWQgPSByYWlzZWQ7CiAgICAgICAgY3VycmVudGx5VG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseTsKICAgICAgICBjdXJyZW50bHlDcmVhdGlvblJhdGVPblRpbWUgPSBjcmVhdGlvblJhdGVPblRpbWUoKTsKICAgIH0KfQ=='.
	

]
