Class {
	#name : #SRT08d32b0da63e2C3bcF8019c9c5d849d7a9d791e6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT08d32b0da63e2C3bcF8019c9c5d849d7a9d791e6 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCgoKLyoqCiAqIERlbnRhY29pbiBleHRlbmRlZCBFUkMyMCB0b2tlbiBjb250cmFjdCBjcmVhdGVkIG9uIEZlYnJ1YXJ5IHRoZSAxNHRoLCAyMDE3IGJ5IERlbnRhY29pbiBCLlYuIGluIHRoZSBOZXRoZXJsYW5kcyAKICoKICogRm9yIHRlcm1zIGFuZCBjb25kaXRpb25zIHZpc2l0IGh0dHBzOi8vZGVudGFjb2luLmNvbQogKi8KCgoKY29udHJhY3Qgb3duZWQgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgZnVuY3Rpb24gb3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBpZiAobmV3T3duZXIgPT0gMHgwKSB0aHJvdzsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQp9CgoKCgovKioKICogT3ZlcmZsb3cgYXdhcmUgdWludCBtYXRoIGZ1bmN0aW9ucy4KICovCmNvbnRyYWN0IFNhZmVNYXRoIHsKICAvL2ludGVybmFscwoKICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7CiAgICBpZiAoIWFzc2VydGlvbikgdGhyb3c7CiAgfQp9CgoKCgpjb250cmFjdCBUb2tlbiB7CiAgICAvKiBUaGlzIGlzIGEgc2xpZ2h0IGNoYW5nZSB0byB0aGUgRVJDMjAgYmFzZSBzdGFuZGFyZC4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgaXMgcmVwbGFjZWQgd2l0aDoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgVGhpcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgYSBnZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSB0b3RhbFN1cHBseS4KICAgIFRoaXMgaXMgbW92ZWQgdG8gdGhlIGJhc2UgY29udHJhY3Qgc2luY2UgcHVibGljIGdldHRlciBmdW5jdGlvbnMgYXJlIG5vdAogICAgY3VycmVudGx5IHJlY29nbmlzZWQgYXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIG1hdGNoaW5nIGFic3RyYWN0CiAgICBmdW5jdGlvbiBieSB0aGUgY29tcGlsZXIuCiAgICAqLwogICAgLy8vIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCgoKCgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vRGVmYXVsdCBhc3N1bWVzIHRvdGFsU3VwcGx5IGNhbid0IGJlIG92ZXIgbWF4ICgyXjI1NiAtIDEpLgogICAgICAgIC8vSWYgeW91ciB0b2tlbiBsZWF2ZXMgb3V0IHRvdGFsU3VwcGx5IGFuZCBjYW4gaXNzdWUgbW9yZSB0b2tlbnMgYXMgdGltZSBnb2VzIG9uLCB5b3UgbmVlZCB0byBjaGVjayBpZiBpdCBkb2Vzbid0IHdyYXAuCiAgICAgICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIC8vaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy9zYW1lIGFzIGFib3ZlLiBSZXBsYWNlIHRoaXMgbGluZSB3aXRoIHRoZSBmb2xsb3dpbmcgaWYgeW91IHdhbnQgdG8gcHJvdGVjdCBhZ2FpbnN0IHdyYXBwaW5nIHVpbnRzLgogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIC8vaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7Cn0KCgoKCgoKCi8qIERlbnRhY29pbiBDb250cmFjdCAqLwpjb250cmFjdCBEZW50YWNvaW5Ub2tlbiBpcyBvd25lZCwgU2FmZU1hdGgsIFN0YW5kYXJkVG9rZW4gewogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIkRlbnRhY29pbiI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBuYW1lIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICLZqCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBzeW1ib2wgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgIGFkZHJlc3MgcHVibGljIERlbnRhY29pbkFkZHJlc3MgPSB0aGlzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZHJlc3Mgb2YgdGhlIERlbnRhY29pbiB0b2tlbgogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW1vdW50IG9mIGRlY2ltYWxzIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDgwMDAwMDAwMDAwMDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdG90YWwgc3VwcGx5IG9mIERlbnRhY29pbnMgKGVpZ2h0IHRyaWxsaW9uKQogICAgdWludDI1NiBwdWJsaWMgYnV5UHJpY2VFdGggPSAxIGZpbm5leTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnV5IHByaWNlIGZvciBEZW50YWNvaW5zCiAgICB1aW50MjU2IHB1YmxpYyBzZWxsUHJpY2VFdGggPSAxIGZpbm5leTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZWxsIHByaWNlIGZvciBEZW50YWNvaW5zCiAgICB1aW50MjU2IHB1YmxpYyBnYXNGb3JEQ04gPSA1IGZpbm5leTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFdGggZnJvbSBjb250cmFjdCBhZ2FpbnN0IERDTiB0byBwYXkgdHggKDEwIHRpbWVzIHNlbGxQcmljZUV0aCkKICAgIHVpbnQyNTYgcHVibGljIERDTkZvckdhcyA9IDEwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERDTiB0byBjb250cmFjdCBhZ2FpbnN0IGV0aCB0byBwYXkgdHgKICAgIHVpbnQyNTYgcHVibGljIGdhc1Jlc2VydmUgPSAxIGV0aGVyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV0aCBhbW91bnQgdGhhdCByZW1haW5zIGluIHRoZSBjb250cmFjdCBmb3IgZ2FzIGFuZCBjYW4ndCBiZSBzb2xkCiAgICB1aW50MjU2IHB1YmxpYyBtaW5CYWxhbmNlRm9yQWNjb3VudHMgPSAxMCBmaW5uZXk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBNaW5pbWFsIGV0aCBiYWxhbmNlIG9mIHNlbmRlciBhbmQgcmVjaXBpZW50CiAgICBib29sIHB1YmxpYyBkaXJlY3RUcmFkZUFsbG93ZWQgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIYWx0IHRyYWRpbmcgRENOIGJ5IHNlbmRpbmcgdG8gdGhlIGNvbnRyYWN0IGRpcmVjdGx5CgoKLyogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0ICovCiAgICBmdW5jdGlvbiBEZW50YWNvaW5Ub2tlbigpIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHRvdGFsU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdpdmUgdGhlIGNyZWF0b3IgYWxsIHRva2VucwogICAgfQoKCi8qIENvbnN0cnVjdG9yIHBhcmFtZXRlcnMgKi8KICAgIGZ1bmN0aW9uIHNldEV0aGVyUHJpY2VzKHVpbnQyNTYgbmV3QnV5UHJpY2VFdGgsIHVpbnQyNTYgbmV3U2VsbFByaWNlRXRoKSBvbmx5T3duZXIgewogICAgICAgIGJ1eVByaWNlRXRoID0gbmV3QnV5UHJpY2VFdGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHByaWNlcyB0byBidXkgYW5kIHNlbGwgRENOCiAgICAgICAgc2VsbFByaWNlRXRoID0gbmV3U2VsbFByaWNlRXRoOwogICAgfQogICAgZnVuY3Rpb24gc2V0R2FzRm9yRENOKHVpbnQgbmV3R2FzQW1vdW50SW5XZWkpIG9ubHlPd25lciB7CiAgICAgICAgZ2FzRm9yRENOID0gbmV3R2FzQW1vdW50SW5XZWk7CiAgICB9CiAgICBmdW5jdGlvbiBzZXREQ05Gb3JHYXModWludCBuZXdEQ05BbW91bnQpIG9ubHlPd25lciB7CiAgICAgICAgRENORm9yR2FzID0gbmV3RENOQW1vdW50OwogICAgfQogICAgZnVuY3Rpb24gc2V0R2FzUmVzZXJ2ZSh1aW50IG5ld0dhc1Jlc2VydmVJbldlaSkgb25seU93bmVyIHsKICAgICAgICBnYXNSZXNlcnZlID0gbmV3R2FzUmVzZXJ2ZUluV2VpOwogICAgfQogICAgZnVuY3Rpb24gc2V0TWluQmFsYW5jZSh1aW50IG1pbmltdW1CYWxhbmNlSW5XZWkpIG9ubHlPd25lciB7CiAgICAgICAgbWluQmFsYW5jZUZvckFjY291bnRzID0gbWluaW11bUJhbGFuY2VJbldlaTsKICAgIH0KCgovKiBIYWx0cyBvciB1bmhhbHRzIGRpcmVjdCB0cmFkZXMgd2l0aG91dCB0aGUgc2VsbC9idXkgZnVuY3Rpb25zIGJlbG93ICovCiAgICBmdW5jdGlvbiBoYWx0RGlyZWN0VHJhZGUoKSBvbmx5T3duZXIgewogICAgICAgIGRpcmVjdFRyYWRlQWxsb3dlZCA9IGZhbHNlOwogICAgfQogICAgZnVuY3Rpb24gdW5oYWx0RGlyZWN0VHJhZGUoKSBvbmx5T3duZXIgewogICAgICAgIGRpcmVjdFRyYWRlQWxsb3dlZCA9IHRydWU7CiAgICB9CgoKLyogVHJhbnNmZXIgZnVuY3Rpb24gZXh0ZW5kZWQgYnkgY2hlY2sgb2YgZXRoIGJhbGFuY2VzIGFuZCBwYXkgdHJhbnNhY3Rpb24gY29zdHMgd2l0aCBEQ04gaWYgbm90IGVub3VnaCBldGggKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKF92YWx1ZSA8IERDTkZvckdhcykgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50cyBkcmFpbiBhbmQgc3BhbQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyICYmIF90byA9PSBEZW50YWNvaW5BZGRyZXNzICYmIGRpcmVjdFRyYWRlQWxsb3dlZCkgewogICAgICAgICAgICBzZWxsRGVudGFjb2luc0FnYWluc3RFdGhlcihfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJhZGUgRGVudGFjb2lucyBhZ2FpbnN0IGV0aCBieSBzZW5kaW5nIHRvIHRoZSB0b2tlbiBjb250cmFjdAogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBzZW5kZXIgaGFzIGVub3VnaCBhbmQgZm9yIG92ZXJmbG93cwogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIF92YWx1ZSk7ICAgLy8gU3VidHJhY3QgRENOIGZyb20gdGhlIHNlbmRlcgoKICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIuYmFsYW5jZSA+PSBtaW5CYWxhbmNlRm9yQWNjb3VudHMgJiYgX3RvLmJhbGFuY2UgPj0gbWluQmFsYW5jZUZvckFjY291bnRzKSB7ICAgIC8vIENoZWNrIGlmIHNlbmRlciBjYW4gcGF5IGdhcyBhbmQgaWYgcmVjaXBpZW50IGNvdWxkCiAgICAgICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOyAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgYW1vdW50IG9mIERDTiB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RpZnkgYW55b25lIGxpc3RlbmluZyB0aGF0IHRoaXMgdHJhbnNmZXIgdG9vayBwbGFjZQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBiYWxhbmNlc1t0aGlzXSA9IHNhZmVBZGQoYmFsYW5jZXNbdGhpc10sIERDTkZvckdhcyk7ICAgICAgICAvLyBQYXkgRENORm9yR2FzIHRvIHRoZSBjb250cmFjdAogICAgICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgc2FmZVN1YihfdmFsdWUsIERDTkZvckdhcykpOyAgLy8gUmVjaXBpZW50IGJhbGFuY2UgLURDTkZvckdhcwogICAgICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBzYWZlU3ViKF92YWx1ZSwgRENORm9yR2FzKSk7ICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UKCiAgICAgICAgICAgICAgICBpZihtc2cuc2VuZGVyLmJhbGFuY2UgPCBtaW5CYWxhbmNlRm9yQWNjb3VudHMpIHsKICAgICAgICAgICAgICAgICAgICBpZighbXNnLnNlbmRlci5zZW5kKGdhc0ZvckRDTikpIHRocm93OyAgICAgICAgICAgICAgICAgIC8vIFNlbmQgZXRoIHRvIHNlbmRlcgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihfdG8uYmFsYW5jZSA8IG1pbkJhbGFuY2VGb3JBY2NvdW50cykgewogICAgICAgICAgICAgICAgICAgIGlmKCFfdG8uc2VuZChnYXNGb3JEQ04pKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VuZCBldGggdG8gcmVjaXBpZW50CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgeyB0aHJvdzsgfQogICAgfQoKCi8qIFVzZXIgYnV5cyBEZW50YWNvaW5zIGFuZCBwYXlzIGluIEV0aGVyICovCiAgICBmdW5jdGlvbiBidXlEZW50YWNvaW5zQWdhaW5zdEV0aGVyKCkgcGF5YWJsZSByZXR1cm5zICh1aW50IGFtb3VudCkgewogICAgICAgIGlmIChidXlQcmljZUV0aCA9PSAwIHx8IG1zZy52YWx1ZSA8IGJ1eVByaWNlRXRoKSB0aHJvdzsgICAgICAgICAgICAgLy8gQXZvaWQgZGl2aWRpbmcgMCwgc2VuZGluZyBzbWFsbCBhbW91bnRzIGFuZCBzcGFtCiAgICAgICAgYW1vdW50ID0gbXNnLnZhbHVlIC8gYnV5UHJpY2VFdGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGFtb3VudCBvZiBEZW50YWNvaW5zCiAgICAgICAgaWYgKGJhbGFuY2VzW3RoaXNdIDwgYW1vdW50KSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBpdCBoYXMgZW5vdWdoIHRvIHNlbGwKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVBZGQoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIGFtb3VudCk7ICAgICAgIC8vIEFkZCB0aGUgYW1vdW50IHRvIGJ1eWVyJ3MgYmFsYW5jZQogICAgICAgIGJhbGFuY2VzW3RoaXNdID0gc2FmZVN1YihiYWxhbmNlc1t0aGlzXSwgYW1vdW50KTsgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgYW1vdW50IGZyb20gRGVudGFjb2luIGJhbGFuY2UKICAgICAgICBUcmFuc2Zlcih0aGlzLCBtc2cuc2VuZGVyLCBhbW91bnQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgYW4gZXZlbnQgcmVmbGVjdGluZyB0aGUgY2hhbmdlCiAgICAgICAgcmV0dXJuIGFtb3VudDsKICAgIH0KCgovKiBVc2VyIHNlbGxzIERlbnRhY29pbnMgYW5kIGdldHMgRXRoZXIgKi8KICAgIGZ1bmN0aW9uIHNlbGxEZW50YWNvaW5zQWdhaW5zdEV0aGVyKHVpbnQyNTYgYW1vdW50KSByZXR1cm5zICh1aW50IHJldmVudWUpIHsKICAgICAgICBpZiAoc2VsbFByaWNlRXRoID09IDAgfHwgYW1vdW50IDwgRENORm9yR2FzKSB0aHJvdzsgICAgICAgICAgICAgICAgIC8vIEF2b2lkIHNlbGxpbmcgYW5kIHNwYW0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCBhbW91bnQpIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaCB0byBzZWxsCiAgICAgICAgcmV2ZW51ZSA9IHNhZmVNdWwoYW1vdW50LCBzZWxsUHJpY2VFdGgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXZlbnVlID0gZXRoIHRoYXQgd2lsbCBiZSBzZW5kIHRvIHRoZSB1c2VyCiAgICAgICAgaWYgKHNhZmVTdWIodGhpcy5iYWxhbmNlLCByZXZlbnVlKSA8IGdhc1Jlc2VydmUpIHRocm93OyAgICAgICAgICAgICAvLyBLZWVwIG1pbiBhbW91bnQgb2YgZXRoIGluIGNvbnRyYWN0IHRvIHByb3ZpZGUgZ2FzIGZvciB0cmFuc2FjdGlvbnMKICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChyZXZlbnVlKSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgZXRoZXIgdG8gdGhlIHNlbGxlci4gSXQncyBpbXBvcnRhbnQKICAgICAgICAgICAgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRvIGRvIHRoaXMgbGFzdCB0byBhdm9pZCByZWN1cnNpb24gYXR0YWNrcwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJhbGFuY2VzW3RoaXNdID0gc2FmZUFkZChiYWxhbmNlc1t0aGlzXSwgYW1vdW50KTsgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGFtb3VudCB0byBEZW50YWNvaW4gYmFsYW5jZQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIGFtb3VudCk7ICAgLy8gU3VidHJhY3QgdGhlIGFtb3VudCBmcm9tIHNlbGxlcidzIGJhbGFuY2UKICAgICAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgcmV2ZW51ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgYW4gZXZlbnQgcmVmbGVjdGluZyBvbiB0aGUgY2hhbmdlCiAgICAgICAgICAgIHJldHVybiByZXZlbnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbmQgZnVuY3Rpb24gYW5kIHJldHVybnMKICAgICAgICB9CiAgICB9CgoKLyogcmVmdW5kIHRvIG93bmVyICovCiAgICBmdW5jdGlvbiByZWZ1bmRUb093bmVyICh1aW50MjU2IGFtb3VudE9mRXRoLCB1aW50MjU2IGRjbikgb25seU93bmVyIHsKICAgICAgICB1aW50MjU2IGV0aCA9IHNhZmVNdWwoYW1vdW50T2ZFdGgsIDEgZXRoZXIpOwogICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKGV0aCkpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VuZCBldGhlciB0byB0aGUgb3duZXIuIEl0J3MgaW1wb3J0YW50CiAgICAgICAgICAgIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUbyBkbyB0aGlzIGxhc3QgdG8gYXZvaWQgcmVjdXJzaW9uIGF0dGFja3MKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBUcmFuc2Zlcih0aGlzLCBtc2cuc2VuZGVyLCBldGgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSBhbiBldmVudCByZWZsZWN0aW5nIG9uIHRoZSBjaGFuZ2UKICAgICAgICB9CiAgICAgICAgaWYgKGJhbGFuY2VzW3RoaXNdIDwgZGNuKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBpdCBoYXMgZW5vdWdoIHRvIHNlbGwKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVBZGQoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIGRjbik7ICAgICAgICAgIC8vIEFkZCB0aGUgYW1vdW50IHRvIGJ1eWVyJ3MgYmFsYW5jZQogICAgICAgIGJhbGFuY2VzW3RoaXNdID0gc2FmZVN1YihiYWxhbmNlc1t0aGlzXSwgZGNuKTsgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgYW1vdW50IGZyb20gc2VsbGVyJ3MgYmFsYW5jZQogICAgICAgIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIGRjbik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSBhbiBldmVudCByZWZsZWN0aW5nIHRoZSBjaGFuZ2UKICAgIH0KCgovKiBUaGlzIHVubmFtZWQgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW5ldmVyIHNvbWVvbmUgdHJpZXMgdG8gc2VuZCBldGhlciB0byBpdCBhbmQgcG9zc2libHkgc2VsbHMgRGVudGFjb2lucyAqLwogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgICAgICBpZiAoIWRpcmVjdFRyYWRlQWxsb3dlZCkgdGhyb3c7CiAgICAgICAgICAgIGJ1eURlbnRhY29pbnNBZ2FpbnN0RXRoZXIoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbGxvdyBkaXJlY3QgdHJhZGVzIGJ5IHNlbmRpbmcgZXRoIHRvIHRoZSBjb250cmFjdAogICAgICAgIH0KICAgIH0KfQoKLyogSkpHICov'.
	

]
