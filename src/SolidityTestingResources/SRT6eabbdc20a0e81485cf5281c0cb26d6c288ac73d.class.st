Class {
	#name : #SRT6eabbdc20a0e81485cf5281c0cb26d6c288ac73d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6eabbdc20a0e81485cf5281c0cb26d6c288ac73d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBSZWdpc3RyeUlDQVBJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gcGFyc2UoYnl0ZXMzMiBfaWNhcCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzLCBieXRlczMyLCBib29sKTsKICAgIGZ1bmN0aW9uIGluc3RpdHV0aW9ucyhieXRlczMyIF9pbnN0aXR1dGlvbikgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKTsKfQoKY29udHJhY3QgRVRva2VuMkludGVyZmFjZSB7CiAgICBmdW5jdGlvbiByZWdpc3RyeUlDQVAoKSBjb25zdGFudCByZXR1cm5zKFJlZ2lzdHJ5SUNBUEludGVyZmFjZSk7CiAgICBmdW5jdGlvbiBiYXNlVW5pdChieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnModWludDgpOwogICAgZnVuY3Rpb24gZGVzY3JpcHRpb24oYnl0ZXMzMiBfc3ltYm9sKSBjb25zdGFudCByZXR1cm5zKHN0cmluZyk7CiAgICBmdW5jdGlvbiBvd25lcihieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcyk7CiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX293bmVyLCBieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseShieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnModWludCk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfaG9sZGVyLCBieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnModWludCk7CiAgICBmdW5jdGlvbiBpc0xvY2tlZChieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBpc3N1ZUFzc2V0KGJ5dGVzMzIgX3N5bWJvbCwgdWludCBfdmFsdWUsIHN0cmluZyBfbmFtZSwgc3RyaW5nIF9kZXNjcmlwdGlvbiwgdWludDggX2Jhc2VVbml0LCBib29sIF9pc1JlaXNzdWFibGUpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiByZWlzc3VlQXNzZXQoYnl0ZXMzMiBfc3ltYm9sLCB1aW50IF92YWx1ZSkgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIHJldm9rZUFzc2V0KGJ5dGVzMzIgX3N5bWJvbCwgdWludCBfdmFsdWUpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBzZXRQcm94eShhZGRyZXNzIF9hZGRyZXNzLCBieXRlczMyIF9zeW1ib2wpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBsb2NrQXNzZXQoYnl0ZXMzMiBfc3ltYm9sKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gcHJveHlUcmFuc2ZlckZyb21Ub0lDQVBXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGJ5dGVzMzIgX2ljYXAsIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gcHJveHlBcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlLCBieXRlczMyIF9zeW1ib2wsIGFkZHJlc3MgX3NlbmRlcikgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9zcGVuZGVyLCBieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnModWludCk7CiAgICBmdW5jdGlvbiBwcm94eVRyYW5zZmVyRnJvbVdpdGhSZWZlcmVuY2UoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlczMyIF9zeW1ib2wsIHN0cmluZyBfcmVmZXJlbmNlLCBhZGRyZXNzIF9zZW5kZXIpIHJldHVybnMoYm9vbCk7Cn0KCmNvbnRyYWN0IEFzc2V0SW50ZXJmYWNlIHsKICAgIGZ1bmN0aW9uIF9wZXJmb3JtVHJhbnNmZXJXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UsIGFkZHJlc3MgX3NlbmRlcikgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIF9wZXJmb3JtVHJhbnNmZXJUb0lDQVBXaXRoUmVmZXJlbmNlKGJ5dGVzMzIgX2ljYXAsIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX3BlcmZvcm1BcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlLCBhZGRyZXNzIF9zZW5kZXIpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBfcGVyZm9ybVRyYW5zZmVyRnJvbVdpdGhSZWZlcmVuY2UoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX3BlcmZvcm1UcmFuc2ZlckZyb21Ub0lDQVBXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGJ5dGVzMzIgX2ljYXAsIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX3BlcmZvcm1HZW5lcmljKGJ5dGVzIF9kYXRhLCBhZGRyZXNzIF9zZW5kZXIpIHBheWFibGUgcmV0dXJucyhieXRlczMyKSB7CiAgICAgICAgdGhyb3c7CiAgICB9Cn0KCmNvbnRyYWN0IEVSQzIwSW50ZXJmYWNlIHsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnModWludDI1NiBzdXBwbHkpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgLy8gZnVuY3Rpb24gc3ltYm9sKCkgY29uc3RhbnQgcmV0dXJucyhzdHJpbmcpOwogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBjb25zdGFudCByZXR1cm5zKHVpbnQ4KTsKICAgIC8vIGZ1bmN0aW9uIG5hbWUoKSBjb25zdGFudCByZXR1cm5zKHN0cmluZyk7Cn0KCmNvbnRyYWN0IEFzc2V0UHJveHlJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gX2ZvcndhcmRBcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlLCBhZGRyZXNzIF9zZW5kZXIpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBfZm9yd2FyZFRyYW5zZmVyRnJvbVdpdGhSZWZlcmVuY2UoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX2ZvcndhcmRUcmFuc2ZlckZyb21Ub0lDQVBXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGJ5dGVzMzIgX2ljYXAsIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpOwp9Cgpjb250cmFjdCBCeXRlczMyIHsKICAgIGZ1bmN0aW9uIF9ieXRlczMyKHN0cmluZyBfaW5wdXQpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMoYnl0ZXMzMiByZXN1bHQpIHsKICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgIHJlc3VsdCA6PSBtbG9hZChhZGQoX2lucHV0LCAzMikpCiAgICAgICAgfQogICAgfQp9CgovKioKICogQHRpdGxlIEVUb2tlbjIgQXNzZXQgUHJveHkuCiAqCiAqIFByb3h5IGltcGxlbWVudHMgRVJDMjAgaW50ZXJmYWNlIGFuZCBhY3RzIGFzIGEgZ2F0ZXdheSB0byBhIHNpbmdsZSBFVG9rZW4yIGFzc2V0LgogKiBQcm94eSBhZGRzIGV0b2tlbjJTeW1ib2wgYW5kIGNhbGxlcihzZW5kZXIpIHdoZW4gZm9yd2FyZGluZyByZXF1ZXN0cyB0byBFVG9rZW4yLgogKiBFdmVyeSByZXF1ZXN0IHRoYXQgaXMgbWFkZSBieSBjYWxsZXIgZmlyc3Qgc2VudCB0byB0aGUgc3BlY2lmaWMgYXNzZXQgaW1wbGVtZW50YXRpb24KICogY29udHJhY3QsIHdoaWNoIHRoZW4gY2FsbHMgYmFjayB0byBiZSBmb3J3YXJkZWQgb250byBFVG9rZW4yLgogKgogKiBDYWxscyBmbG93OiBDYWxsZXIgLT4KICogICAgICAgICAgICAgUHJveHkuZnVuYyguLi4pIC0+CiAqICAgICAgICAgICAgIEFzc2V0Ll9wZXJmb3JtRnVuYyguLi4sIENhbGxlci5hZGRyZXNzKSAtPgogKiAgICAgICAgICAgICBQcm94eS5fZm9yd2FyZEZ1bmMoLi4uLCBDYWxsZXIuYWRkcmVzcykgLT4KICogICAgICAgICAgICAgUGxhdGZvcm0ucHJveHlGdW5jKC4uLiwgc3ltYm9sLCBDYWxsZXIuYWRkcmVzcykKICoKICogR2VuZXJpYyBjYWxsIGZsb3c6IENhbGxlciAtPgogKiAgICAgICAgICAgICBQcm94eS51bmtub3duRnVuYyguLi4pIC0+CiAqICAgICAgICAgICAgIEFzc2V0Ll9wZXJmb3JtR2VuZXJpYyguLi4sIENhbGxlci5hZGRyZXNzKSAtPgogKiAgICAgICAgICAgICBBc3NldC51bmtub3duRnVuYyguLi4pCiAqCiAqIEFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGlzIG11dGFibGUsIGJ1dCBlYWNoIHVzZXIgaGF2ZSBhbiBvcHRpb24gdG8gc3RpY2sgd2l0aAogKiBvbGQgaW1wbGVtZW50YXRpb24sIHRocm91Z2ggZXhwbGljaXQgZGVjaXNpb24gbWFkZSBpbiB0aW1lbHkgbWFubmVyLCBpZiBoZSBkb2Vzbid0IGFncmVlCiAqIHdpdGggbmV3IHJ1bGVzLgogKiBFYWNoIHVzZXIgaGF2ZSBhIHBvc3NpYmlsaXR5IHRvIHVwZ3JhZGUgdG8gbGF0ZXN0IGFzc2V0IGNvbnRyYWN0IGltcGxlbWVudGF0aW9uLCB3aXRob3V0IHRoZQogKiBwb3NzaWJpbGl0eSB0byByb2xsYmFjay4KICoKICogTm90ZTogYWxsIHRoZSBub24gY29uc3RhbnQgZnVuY3Rpb25zIHJldHVybiBmYWxzZSBpbnN0ZWFkIG9mIHRocm93aW5nIGluIGNhc2UgaWYgc3RhdGUgY2hhbmdlCiAqIGRpZG4ndCBoYXBwZW4geWV0LgogKi8KY29udHJhY3QgQXNzZXRQcm94eSBpcyBFUkMyMEludGVyZmFjZSwgQXNzZXRQcm94eUludGVyZmFjZSwgQnl0ZXMzMiB7CiAgICAvLyBBc3NpZ25lZCBFVG9rZW4yLCBpbW11dGFibGUuCiAgICBFVG9rZW4ySW50ZXJmYWNlIHB1YmxpYyBldG9rZW4yOwoKICAgIC8vIEFzc2lnbmVkIHN5bWJvbCwgaW1tdXRhYmxlLgogICAgYnl0ZXMzMiBwdWJsaWMgZXRva2VuMlN5bWJvbDsKCiAgICAvLyBBc3NpZ25lZCBuYW1lLCBpbW11dGFibGUuIEZvciBVSS4KICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwoKICAgIC8qKgogICAgICogU2V0cyBFVG9rZW4yIGFkZHJlc3MsIGFzc2lnbnMgc3ltYm9sIGFuZCBuYW1lLgogICAgICoKICAgICAqIENhbiBiZSBzZXQgb25seSBvbmNlLgogICAgICoKICAgICAqIEBwYXJhbSBfZXRva2VuMiBFVG9rZW4yIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKiBAcGFyYW0gX3N5bWJvbCBhc3NpZ25lZCBzeW1ib2wuCiAgICAgKiBAcGFyYW0gX25hbWUgYXNzaWduZWQgbmFtZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGluaXQoRVRva2VuMkludGVyZmFjZSBfZXRva2VuMiwgc3RyaW5nIF9zeW1ib2wsIHN0cmluZyBfbmFtZSkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKGFkZHJlc3MoZXRva2VuMikgIT0gMHgwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgZXRva2VuMiA9IF9ldG9rZW4yOwogICAgICAgIGV0b2tlbjJTeW1ib2wgPSBfYnl0ZXMzMihfc3ltYm9sKTsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIE9ubHkgRVRva2VuMiBpcyBhbGxvd2VkIHRvIGNhbGwuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlFVG9rZW4yKCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyID09IGFkZHJlc3MoZXRva2VuMikpIHsKICAgICAgICAgICAgXzsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBPbmx5IGN1cnJlbnQgYXNzZXQgb3duZXIgaXMgYWxsb3dlZCB0byBjYWxsLgogICAgICovCiAgICBtb2RpZmllciBvbmx5QXNzZXRPd25lcigpIHsKICAgICAgICBpZiAoZXRva2VuMi5pc093bmVyKG1zZy5zZW5kZXIsIGV0b2tlbjJTeW1ib2wpKSB7CiAgICAgICAgICAgIF87CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBmb3IgY3VycmVudCBjYWxsZXIuCiAgICAgKgogICAgICogQHJldHVybiBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdC4KICAgICAqLwogICAgZnVuY3Rpb24gX2dldEFzc2V0KCkgaW50ZXJuYWwgcmV0dXJucyhBc3NldEludGVyZmFjZSkgewogICAgICAgIHJldHVybiBBc3NldEludGVyZmFjZShnZXRWZXJzaW9uRm9yKG1zZy5zZW5kZXIpKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWNvdmVyVG9rZW5zKHVpbnQgX3ZhbHVlKSBvbmx5QXNzZXRPd25lcigpIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiB0aGlzLnRyYW5zZmVyV2l0aFJlZmVyZW5jZShtc2cuc2VuZGVyLCBfdmFsdWUsICdUb2tlbnMgcmVjb3ZlcnknKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYXNzZXQgdG90YWwgc3VwcGx5LgogICAgICoKICAgICAqIEByZXR1cm4gYXNzZXQgdG90YWwgc3VwcGx5LgogICAgICovCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBldG9rZW4yLnRvdGFsU3VwcGx5KGV0b2tlbjJTeW1ib2wpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhc3NldCBiYWxhbmNlIGZvciBhIHBhcnRpY3VsYXIgaG9sZGVyLgogICAgICoKICAgICAqIEBwYXJhbSBfb3duZXIgaG9sZGVyIGFkZHJlc3MuCiAgICAgKgogICAgICogQHJldHVybiBob2xkZXIgYmFsYW5jZS4KICAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gZXRva2VuMi5iYWxhbmNlT2YoX293bmVyLCBldG9rZW4yU3ltYm9sKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYXNzZXQgYWxsb3dhbmNlIGZyb20gb25lIGhvbGRlciB0byBhbm90aGVyLgogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBob2xkZXIgdGhhdCBhbGxvd2VkIHNwZW5kaW5nLgogICAgICogQHBhcmFtIF9zcGVuZGVyIGhvbGRlciB0aGF0IGlzIGFsbG93ZWQgdG8gc3BlbmQuCiAgICAgKgogICAgICogQHJldHVybiBob2xkZXIgdG8gc3BlbmRlciBhbGxvd2FuY2UuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gZXRva2VuMi5hbGxvd2FuY2UoX2Zyb20sIF9zcGVuZGVyLCBldG9rZW4yU3ltYm9sKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYXNzZXQgZGVjaW1hbHMuCiAgICAgKgogICAgICogQHJldHVybiBhc3NldCBkZWNpbWFscy4KICAgICAqLwogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBjb25zdGFudCByZXR1cm5zKHVpbnQ4KSB7CiAgICAgICAgcmV0dXJuIGV0b2tlbjIuYmFzZVVuaXQoZXRva2VuMlN5bWJvbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2ZlcnMgYXNzZXQgYmFsYW5jZSBmcm9tIHRoZSBjYWxsZXIgdG8gc3BlY2lmaWVkIHJlY2VpdmVyLgogICAgICoKICAgICAqIEBwYXJhbSBfdG8gaG9sZGVyIGFkZHJlc3MgdG8gZ2l2ZSB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXJXaXRoUmVmZXJlbmNlKF90bywgX3ZhbHVlLCAnJyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2ZlcnMgYXNzZXQgYmFsYW5jZSBmcm9tIHRoZSBjYWxsZXIgdG8gc3BlY2lmaWVkIHJlY2VpdmVyIGFkZGluZyBzcGVjaWZpZWQgY29tbWVudC4KICAgICAqIFJlc29sdmVzIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGZvciB0aGUgY2FsbGVyIGFuZCBmb3J3YXJkcyB0aGVyZSBhcmd1bWVudHMgYWxvbmcgd2l0aAogICAgICogdGhlIGNhbGxlciBhZGRyZXNzLgogICAgICoKICAgICAqIEBwYXJhbSBfdG8gaG9sZGVyIGFkZHJlc3MgdG8gZ2l2ZSB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICogQHBhcmFtIF9yZWZlcmVuY2UgdHJhbnNmZXIgY29tbWVudCB0byBiZSBpbmNsdWRlZCBpbiBhIEVUb2tlbjIncyBUcmFuc2ZlciBldmVudC4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyV2l0aFJlZmVyZW5jZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIHN0cmluZyBfcmVmZXJlbmNlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gX2dldEFzc2V0KCkuX3BlcmZvcm1UcmFuc2ZlcldpdGhSZWZlcmVuY2UoX3RvLCBfdmFsdWUsIF9yZWZlcmVuY2UsIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXJzIGFzc2V0IGJhbGFuY2UgZnJvbSB0aGUgY2FsbGVyIHRvIHNwZWNpZmllZCBJQ0FQLgogICAgICoKICAgICAqIEBwYXJhbSBfaWNhcCByZWNpcGllbnQgSUNBUCB0byBnaXZlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvSUNBUChieXRlczMyIF9pY2FwLCB1aW50IF92YWx1ZSkgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9JQ0FQV2l0aFJlZmVyZW5jZShfaWNhcCwgX3ZhbHVlLCAnJyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2ZlcnMgYXNzZXQgYmFsYW5jZSBmcm9tIHRoZSBjYWxsZXIgdG8gc3BlY2lmaWVkIElDQVAgYWRkaW5nIHNwZWNpZmllZCBjb21tZW50LgogICAgICogUmVzb2x2ZXMgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgZm9yIHRoZSBjYWxsZXIgYW5kIGZvcndhcmRzIHRoZXJlIGFyZ3VtZW50cyBhbG9uZyB3aXRoCiAgICAgKiB0aGUgY2FsbGVyIGFkZHJlc3MuCiAgICAgKgogICAgICogQHBhcmFtIF9pY2FwIHJlY2lwaWVudCBJQ0FQIHRvIGdpdmUgdG8uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCB0byB0cmFuc2Zlci4KICAgICAqIEBwYXJhbSBfcmVmZXJlbmNlIHRyYW5zZmVyIGNvbW1lbnQgdG8gYmUgaW5jbHVkZWQgaW4gYSBFVG9rZW4yJ3MgVHJhbnNmZXIgZXZlbnQuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvSUNBUFdpdGhSZWZlcmVuY2UoYnl0ZXMzMiBfaWNhcCwgdWludCBfdmFsdWUsIHN0cmluZyBfcmVmZXJlbmNlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gX2dldEFzc2V0KCkuX3BlcmZvcm1UcmFuc2ZlclRvSUNBUFdpdGhSZWZlcmVuY2UoX2ljYXAsIF92YWx1ZSwgX3JlZmVyZW5jZSwgbXNnLnNlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBQcmZvcm1zIGFsbG93YW5jZSB0cmFuc2ZlciBvZiBhc3NldCBiYWxhbmNlIGJldHdlZW4gaG9sZGVycy4KICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gaG9sZGVyIGFkZHJlc3MgdG8gdGFrZSBmcm9tLgogICAgICogQHBhcmFtIF90byBob2xkZXIgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXJGcm9tV2l0aFJlZmVyZW5jZShfZnJvbSwgX3RvLCBfdmFsdWUsICcnKTsKICAgIH0KCiAgICAvKioKICAgICAqIFByZm9ybXMgYWxsb3dhbmNlIHRyYW5zZmVyIG9mIGFzc2V0IGJhbGFuY2UgYmV0d2VlbiBob2xkZXJzIGFkZGluZyBzcGVjaWZpZWQgY29tbWVudC4KICAgICAqIFJlc29sdmVzIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGZvciB0aGUgY2FsbGVyIGFuZCBmb3J3YXJkcyB0aGVyZSBhcmd1bWVudHMgYWxvbmcgd2l0aAogICAgICogdGhlIGNhbGxlciBhZGRyZXNzLgogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBob2xkZXIgYWRkcmVzcyB0byB0YWtlIGZyb20uCiAgICAgKiBAcGFyYW0gX3RvIGhvbGRlciBhZGRyZXNzIHRvIGdpdmUgdG8uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCB0byB0cmFuc2Zlci4KICAgICAqIEBwYXJhbSBfcmVmZXJlbmNlIHRyYW5zZmVyIGNvbW1lbnQgdG8gYmUgaW5jbHVkZWQgaW4gYSBFVG9rZW4yJ3MgVHJhbnNmZXIgZXZlbnQuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb21XaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UpIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBfZ2V0QXNzZXQoKS5fcGVyZm9ybVRyYW5zZmVyRnJvbVdpdGhSZWZlcmVuY2UoX2Zyb20sIF90bywgX3ZhbHVlLCBfcmVmZXJlbmNlLCBtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIFBlcmZvcm1zIHRyYW5zZmVyIGNhbGwgb24gdGhlIEVUb2tlbjIgYnkgdGhlIG5hbWUgb2Ygc3BlY2lmaWVkIHNlbmRlci4KICAgICAqCiAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgYnkgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYXNzaWduZWQgdG8gc2VuZGVyLgogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBob2xkZXIgYWRkcmVzcyB0byB0YWtlIGZyb20uCiAgICAgKiBAcGFyYW0gX3RvIGhvbGRlciBhZGRyZXNzIHRvIGdpdmUgdG8uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCB0byB0cmFuc2Zlci4KICAgICAqIEBwYXJhbSBfcmVmZXJlbmNlIHRyYW5zZmVyIGNvbW1lbnQgdG8gYmUgaW5jbHVkZWQgaW4gYSBFVG9rZW4yJ3MgVHJhbnNmZXIgZXZlbnQuCiAgICAgKiBAcGFyYW0gX3NlbmRlciBpbml0aWFsIGNhbGxlci4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIF9mb3J3YXJkVHJhbnNmZXJGcm9tV2l0aFJlZmVyZW5jZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIHN0cmluZyBfcmVmZXJlbmNlLCBhZGRyZXNzIF9zZW5kZXIpIG9ubHlJbXBsZW1lbnRhdGlvbkZvcihfc2VuZGVyKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gZXRva2VuMi5wcm94eVRyYW5zZmVyRnJvbVdpdGhSZWZlcmVuY2UoX2Zyb20sIF90bywgX3ZhbHVlLCBldG9rZW4yU3ltYm9sLCBfcmVmZXJlbmNlLCBfc2VuZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIFByZm9ybXMgYWxsb3dhbmNlIHRyYW5zZmVyIG9mIGFzc2V0IGJhbGFuY2UgYmV0d2VlbiBob2xkZXJzLgogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBob2xkZXIgYWRkcmVzcyB0byB0YWtlIGZyb20uCiAgICAgKiBAcGFyYW0gX2ljYXAgcmVjaXBpZW50IElDQVAgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb21Ub0lDQVAoYWRkcmVzcyBfZnJvbSwgYnl0ZXMzMiBfaWNhcCwgdWludCBfdmFsdWUpIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiB0cmFuc2ZlckZyb21Ub0lDQVBXaXRoUmVmZXJlbmNlKF9mcm9tLCBfaWNhcCwgX3ZhbHVlLCAnJyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBQcmZvcm1zIGFsbG93YW5jZSB0cmFuc2ZlciBvZiBhc3NldCBiYWxhbmNlIGJldHdlZW4gaG9sZGVycyBhZGRpbmcgc3BlY2lmaWVkIGNvbW1lbnQuCiAgICAgKiBSZXNvbHZlcyBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBmb3IgdGhlIGNhbGxlciBhbmQgZm9yd2FyZHMgdGhlcmUgYXJndW1lbnRzIGFsb25nIHdpdGgKICAgICAqIHRoZSBjYWxsZXIgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gaG9sZGVyIGFkZHJlc3MgdG8gdGFrZSBmcm9tLgogICAgICogQHBhcmFtIF9pY2FwIHJlY2lwaWVudCBJQ0FQIGFkZHJlc3MgdG8gZ2l2ZSB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICogQHBhcmFtIF9yZWZlcmVuY2UgdHJhbnNmZXIgY29tbWVudCB0byBiZSBpbmNsdWRlZCBpbiBhIEVUb2tlbjIncyBUcmFuc2ZlciBldmVudC4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbVRvSUNBUFdpdGhSZWZlcmVuY2UoYWRkcmVzcyBfZnJvbSwgYnl0ZXMzMiBfaWNhcCwgdWludCBfdmFsdWUsIHN0cmluZyBfcmVmZXJlbmNlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gX2dldEFzc2V0KCkuX3BlcmZvcm1UcmFuc2ZlckZyb21Ub0lDQVBXaXRoUmVmZXJlbmNlKF9mcm9tLCBfaWNhcCwgX3ZhbHVlLCBfcmVmZXJlbmNlLCBtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIFBlcmZvcm1zIGFsbG93YW5jZSB0cmFuc2ZlciB0byBJQ0FQIGNhbGwgb24gdGhlIEVUb2tlbjIgYnkgdGhlIG5hbWUgb2Ygc3BlY2lmaWVkIHNlbmRlci4KICAgICAqCiAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgYnkgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYXNzaWduZWQgdG8gc2VuZGVyLgogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBob2xkZXIgYWRkcmVzcyB0byB0YWtlIGZyb20uCiAgICAgKiBAcGFyYW0gX2ljYXAgcmVjaXBpZW50IElDQVAgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgKiBAcGFyYW0gX3JlZmVyZW5jZSB0cmFuc2ZlciBjb21tZW50IHRvIGJlIGluY2x1ZGVkIGluIGEgRVRva2VuMidzIFRyYW5zZmVyIGV2ZW50LgogICAgICogQHBhcmFtIF9zZW5kZXIgaW5pdGlhbCBjYWxsZXIuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBfZm9yd2FyZFRyYW5zZmVyRnJvbVRvSUNBUFdpdGhSZWZlcmVuY2UoYWRkcmVzcyBfZnJvbSwgYnl0ZXMzMiBfaWNhcCwgdWludCBfdmFsdWUsIHN0cmluZyBfcmVmZXJlbmNlLCBhZGRyZXNzIF9zZW5kZXIpIG9ubHlJbXBsZW1lbnRhdGlvbkZvcihfc2VuZGVyKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gZXRva2VuMi5wcm94eVRyYW5zZmVyRnJvbVRvSUNBUFdpdGhSZWZlcmVuY2UoX2Zyb20sIF9pY2FwLCBfdmFsdWUsIF9yZWZlcmVuY2UsIF9zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyBhc3NldCBzcGVuZGluZyBhbGxvd2FuY2UgZm9yIGEgc3BlY2lmaWVkIHNwZW5kZXIuCiAgICAgKiBSZXNvbHZlcyBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBmb3IgdGhlIGNhbGxlciBhbmQgZm9yd2FyZHMgdGhlcmUgYXJndW1lbnRzIGFsb25nIHdpdGgKICAgICAqIHRoZSBjYWxsZXIgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgaG9sZGVyIGFkZHJlc3MgdG8gc2V0IGFsbG93YW5jZSB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIGFsbG93LgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIF9nZXRBc3NldCgpLl9wZXJmb3JtQXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlLCBtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIFBlcmZvcm1zIGFsbG93YW5jZSBzZXR0aW5nIGNhbGwgb24gdGhlIEVUb2tlbjIgYnkgdGhlIG5hbWUgb2Ygc3BlY2lmaWVkIHNlbmRlci4KICAgICAqCiAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgYnkgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYXNzaWduZWQgdG8gc2VuZGVyLgogICAgICoKICAgICAqIEBwYXJhbSBfc3BlbmRlciBob2xkZXIgYWRkcmVzcyB0byBzZXQgYWxsb3dhbmNlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gYWxsb3cuCiAgICAgKiBAcGFyYW0gX3NlbmRlciBpbml0aWFsIGNhbGxlci4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIF9mb3J3YXJkQXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSwgYWRkcmVzcyBfc2VuZGVyKSBvbmx5SW1wbGVtZW50YXRpb25Gb3IoX3NlbmRlcikgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIGV0b2tlbjIucHJveHlBcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUsIGV0b2tlbjJTeW1ib2wsIF9zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogRW1pdHMgRVJDMjAgVHJhbnNmZXIgZXZlbnQgb24gdGhpcyBjb250cmFjdC4KICAgICAqCiAgICAgKiBDYW4gb25seSBiZSwgYW5kLCBjYWxsZWQgYnkgYXNzaWduZWQgRVRva2VuMiB3aGVuIGFzc2V0IHRyYW5zZmVyIGhhcHBlbnMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGVtaXRUcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlFVG9rZW4yKCkgewogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBFbWl0cyBFUkMyMCBBcHByb3ZhbCBldmVudCBvbiB0aGlzIGNvbnRyYWN0LgogICAgICoKICAgICAqIENhbiBvbmx5IGJlLCBhbmQsIGNhbGxlZCBieSBhc3NpZ25lZCBFVG9rZW4yIHdoZW4gYXNzZXQgYWxsb3dhbmNlIHNldCBoYXBwZW5zLgogICAgICovCiAgICBmdW5jdGlvbiBlbWl0QXBwcm92ZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgb25seUVUb2tlbjIoKSB7CiAgICAgICAgQXBwcm92YWwoX2Zyb20sIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogUmVzb2x2ZXMgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgZm9yIHRoZSBjYWxsZXIgYW5kIGZvcndhcmRzIHRoZXJlIHRyYW5zYWN0aW9uIGRhdGEsCiAgICAgKiBhbG9uZyB3aXRoIHRoZSB2YWx1ZS4gVGhpcyBhbGxvd3MgZm9yIHByb3h5IGludGVyZmFjZSBncm93dGguCiAgICAgKi8KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgIGJ5dGVzMzIgcmVzdWx0ID0gX2dldEFzc2V0KCkuX3BlcmZvcm1HZW5lcmljLnZhbHVlKG1zZy52YWx1ZSkobXNnLmRhdGEsIG1zZy5zZW5kZXIpOwogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgbXN0b3JlKDAsIHJlc3VsdCkKICAgICAgICAgICAgcmV0dXJuKDAsIDMyKQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEluZGljYXRlcyBhbiB1cGdyYWRlIGZyZWV6ZS10aW1lIHN0YXJ0LCBhbmQgdGhlIG5leHQgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QuCiAgICAgKi8KICAgIGV2ZW50IFVwZ3JhZGVQcm9wb3NhbChhZGRyZXNzIG5ld1ZlcnNpb24pOwoKICAgIC8vIEN1cnJlbnQgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgIGFkZHJlc3MgbGF0ZXN0VmVyc2lvbjsKCiAgICAvLyBQcm9wb3NlZCBuZXh0IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICBhZGRyZXNzIHBlbmRpbmdWZXJzaW9uOwoKICAgIC8vIFVwZ3JhZGUgZnJlZXplLXRpbWUgc3RhcnQuCiAgICB1aW50IHBlbmRpbmdWZXJzaW9uVGltZXN0YW1wOwoKICAgIC8vIFRpbWVzcGFuIGZvciB1c2VycyB0byByZXZpZXcgdGhlIG5ldyBpbXBsZW1lbnRhdGlvbiBhbmQgbWFrZSBkZWNpc2lvbi4KICAgIHVpbnQgY29uc3RhbnQgVVBHUkFERV9GUkVFWkVfVElNRSA9IDMgZGF5czsKCiAgICAvLyBBc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzIHRoYXQgdXNlciBkZWNpZGVkIHRvIHN0aWNrIHdpdGguCiAgICAvLyAweDAgbWVhbnMgdGhhdCB1c2VyIHVzZXMgbGF0ZXN0IHZlcnNpb24uCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYWRkcmVzcykgdXNlck9wdE91dFZlcnNpb247CgogICAgLyoqCiAgICAgKiBPbmx5IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFzc2lnbmVkIHRvIHNlbmRlciBpcyBhbGxvd2VkIHRvIGNhbGwuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlJbXBsZW1lbnRhdGlvbkZvcihhZGRyZXNzIF9zZW5kZXIpIHsKICAgICAgICBpZiAoZ2V0VmVyc2lvbkZvcihfc2VuZGVyKSA9PSBtc2cuc2VuZGVyKSB7CiAgICAgICAgICAgIF87CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzIGFzc2lnbmVkIHRvIHNlbmRlci4KICAgICAqCiAgICAgKiBAcGFyYW0gX3NlbmRlciBzZW5kZXIgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcmV0dXJuIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFZlcnNpb25Gb3IoYWRkcmVzcyBfc2VuZGVyKSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gdXNlck9wdE91dFZlcnNpb25bX3NlbmRlcl0gPT0gMCA/IGxhdGVzdFZlcnNpb24gOiB1c2VyT3B0T3V0VmVyc2lvbltfc2VuZGVyXTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgY3VycmVudCBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgICoKICAgICAqIEByZXR1cm4gYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0TGF0ZXN0VmVyc2lvbigpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcykgewogICAgICAgIHJldHVybiBsYXRlc3RWZXJzaW9uOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBwcm9wb3NlZCBuZXh0IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKgogICAgICogQHJldHVybiBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBnZXRQZW5kaW5nVmVyc2lvbigpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcykgewogICAgICAgIHJldHVybiBwZW5kaW5nVmVyc2lvbjsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdXBncmFkZSBmcmVlemUtdGltZSBzdGFydC4KICAgICAqCiAgICAgKiBAcmV0dXJuIGZyZWV6ZS10aW1lIHN0YXJ0LgogICAgICovCiAgICBmdW5jdGlvbiBnZXRQZW5kaW5nVmVyc2lvblRpbWVzdGFtcCgpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBwZW5kaW5nVmVyc2lvblRpbWVzdGFtcDsKICAgIH0KCiAgICAvKioKICAgICAqIFByb3Bvc2UgbmV4dCBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgICoKICAgICAqIENhbiBvbmx5IGJlIGNhbGxlZCBieSBjdXJyZW50IGFzc2V0IG93bmVyLgogICAgICoKICAgICAqIE5vdGU6IGZyZWV6ZS10aW1lIHNob3VsZCBub3QgYmUgYXBwbGllZCBmb3IgdGhlIGluaXRpYWwgc2V0dXAuCiAgICAgKgogICAgICogQHBhcmFtIF9uZXdWZXJzaW9uIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBwcm9wb3NlVXBncmFkZShhZGRyZXNzIF9uZXdWZXJzaW9uKSBvbmx5QXNzZXRPd25lcigpIHJldHVybnMoYm9vbCkgewogICAgICAgIC8vIFNob3VsZCBub3QgYWxyZWFkeSBiZSBpbiB0aGUgdXBncmFkaW5nIHByb2Nlc3MuCiAgICAgICAgaWYgKHBlbmRpbmdWZXJzaW9uICE9IDB4MCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIC8vIE5ldyB2ZXJzaW9uIGFkZHJlc3Mgc2hvdWxkIGJlIG90aGVyIHRoYW4gMHgwLgogICAgICAgIGlmIChfbmV3VmVyc2lvbiA9PSAweDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICAvLyBEb24ndCBhcHBseSBmcmVlemUtdGltZSBmb3IgdGhlIGluaXRpYWwgc2V0dXAuCiAgICAgICAgaWYgKGxhdGVzdFZlcnNpb24gPT0gMHgwKSB7CiAgICAgICAgICAgIGxhdGVzdFZlcnNpb24gPSBfbmV3VmVyc2lvbjsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHBlbmRpbmdWZXJzaW9uID0gX25ld1ZlcnNpb247CiAgICAgICAgcGVuZGluZ1ZlcnNpb25UaW1lc3RhbXAgPSBub3c7CiAgICAgICAgVXBncmFkZVByb3Bvc2FsKF9uZXdWZXJzaW9uKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIENhbmNlbCB0aGUgcGVuZGluZyB1cGdyYWRlIHByb2Nlc3MuCiAgICAgKgogICAgICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJ5IGN1cnJlbnQgYXNzZXQgb3duZXIuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBwdXJnZVVwZ3JhZGUoKSBvbmx5QXNzZXRPd25lcigpIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChwZW5kaW5nVmVyc2lvbiA9PSAweDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBkZWxldGUgcGVuZGluZ1ZlcnNpb247CiAgICAgICAgZGVsZXRlIHBlbmRpbmdWZXJzaW9uVGltZXN0YW1wOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogRmluYWxpemUgYW4gdXBncmFkZSBwcm9jZXNzIHNldHRpbmcgbmV3IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKgogICAgICogQ2FuIG9ubHkgYmUgY2FsbGVkIGFmdGVyIGFuIHVwZ3JhZGUgZnJlZXplLXRpbWUuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBjb21taXRVcGdyYWRlKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKHBlbmRpbmdWZXJzaW9uID09IDB4MCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChwZW5kaW5nVmVyc2lvblRpbWVzdGFtcCArIFVQR1JBREVfRlJFRVpFX1RJTUUgPiBub3cpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBsYXRlc3RWZXJzaW9uID0gcGVuZGluZ1ZlcnNpb247CiAgICAgICAgZGVsZXRlIHBlbmRpbmdWZXJzaW9uOwogICAgICAgIGRlbGV0ZSBwZW5kaW5nVmVyc2lvblRpbWVzdGFtcDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIERpc2FncmVlIHdpdGggcHJvcG9zZWQgdXBncmFkZSwgYW5kIHN0aWNrIHdpdGggY3VycmVudCBhc3NldCBpbXBsZW1lbnRhdGlvbgogICAgICogdW50aWwgZnVydGhlciBleHBsaWNpdCBhZ3JlZW1lbnQgdG8gdXBncmFkZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIG9wdE91dCgpIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmICh1c2VyT3B0T3V0VmVyc2lvblttc2cuc2VuZGVyXSAhPSAweDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICB1c2VyT3B0T3V0VmVyc2lvblttc2cuc2VuZGVyXSA9IGxhdGVzdFZlcnNpb247CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbXBsaWNpdGx5IGFncmVlIHRvIHVwZ3JhZGUgdG8gY3VycmVudCBhbmQgZnV0dXJlIGFzc2V0IGltcGxlbWVudGF0aW9uIHVwZ3JhZGVzLAogICAgICogdW50aWwgZnVydGhlciBleHBsaWNpdCBkaXNhZ3JlZW1lbnQuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBvcHRJbigpIHJldHVybnMoYm9vbCkgewogICAgICAgIGRlbGV0ZSB1c2VyT3B0T3V0VmVyc2lvblttc2cuc2VuZGVyXTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4KICAgIGZ1bmN0aW9uIG11bHRpQXNzZXQoKSBjb25zdGFudCByZXR1cm5zKEVUb2tlbjJJbnRlcmZhY2UpIHsKICAgICAgICByZXR1cm4gZXRva2VuMjsKICAgIH0KfQoKY29udHJhY3QgQXNzZXRQcm94eVdpdGhMb2NrIGlzIEFzc2V0UHJveHkgewogICAgZnVuY3Rpb24gY2hhbmdlKHN0cmluZyBfc3ltYm9sLCBzdHJpbmcgX25hbWUpIG9ubHlBc3NldE93bmVyKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKGV0b2tlbjIuaXNMb2NrZWQoZXRva2VuMlN5bWJvbCkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ=='.
	

]
