Class {
	#name : #SRT84178d97a442cab8b584917cbab6342ab9a1e137,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT84178d97a442cab8b584917cbab6342ab9a1e137 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0geCArIHk7CiAgICAgICAgYXNzZXJ0KCh6ID49IHgpICYmICh6ID49IHkpKTsKICAgICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiB4LCB1aW50MjU2IHkpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydCh4ID49IHkpOwogICAgICAgIHVpbnQyNTYgeiA9IHggLSB5OwogICAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0geCAqIHk7CiAgICAgICAgYXNzZXJ0KCh4ID09IDApIHx8ICh6IC8geCA9PSB5KSk7CiAgICAgICAgcmV0dXJuIHo7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9Cn0KLyoKICogSGFsdGFibGUKICoKICogQWJzdHJhY3QgY29udHJhY3QgdGhhdCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuCiAqIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4gRGlmZmVycyBmcm9tIFBhdXNhYmxlIGJ5IGNhdXNpbmcgYSB0aHJvdyB3aGVuIGluIGhhbHQgbW9kZS4KICoKICoKICogT3JpZ2luYWxseSBlbnZpc2lvbmVkIGluIEZpcnN0Qmxvb2QgSUNPIGNvbnRyYWN0LgogKi8KY29udHJhY3QgSGFsdGFibGUgaXMgT3duYWJsZSB7CiAgYm9vbCBwdWJsaWMgaGFsdGVkOwoKICBtb2RpZmllciBzdG9wSW5FbWVyZ2VuY3kgewogICAgcmVxdWlyZSAoIWhhbHRlZCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUluRW1lcmdlbmN5IHsKICAgIHJlcXVpcmUgKGhhbHRlZCk7CiAgICBfOwogIH0KCiAgLy8gY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbWVyZ2VuY3ksIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICBmdW5jdGlvbiBoYWx0KCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIGhhbHRlZCA9IHRydWU7CiAgfQoKICAvLyBjYWxsZWQgYnkgdGhlIG93bmVyIG9uIGVuZCBvZiBlbWVyZ2VuY3ksIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgZnVuY3Rpb24gdW5oYWx0KCkgZXh0ZXJuYWwgb25seU93bmVyIG9ubHlJbkVtZXJnZW5jeSB7CiAgICBoYWx0ZWQgPSBmYWxzZTsKICB9Cgp9CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgoKCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4gCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKY29udHJhY3QgREdaVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICAvKi8gUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gLyovCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiRG9nZXplciBER1ogVG9rZW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiREdaIjsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDg7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDEwMCAqIDAuMSBmaW5uZXk7CgogICAgLyovIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdCAvKi8KICAgIGZ1bmN0aW9uIERHWlRva2VuKCkgcHVibGljCiAgICB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSB0b3RhbFN1cHBseTsgICAgICAgICAgICAgIC8vIEdpdmUgdGhlIGNyZWF0b3IgYWxsIGluaXRpYWwgdG9rZW5zCiAgICB9Cn0KCgpjb250cmFjdCBEb2dlemVySUNPUHJpdmF0ZUNyb3dkU2FsZSBpcyBIYWx0YWJsZXsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIkRvZ2V6ZXIgUHJpdmF0ZSBTYWxlIElUTyI7CgogICAgYWRkcmVzcyBwdWJsaWMgYmVuZWZpY2lhcnk7CiAgICB1aW50IHB1YmxpYyBzdGFydFRpbWU7CiAgICB1aW50IHB1YmxpYyBkdXJhdGlvbjsKICAgIHVpbnQgcHVibGljIHRva2Vuc0NvbnRyYWN0QmFsYW5jZTsKICAgIHVpbnQgcHVibGljIHByaWNlOyAKICAgIHVpbnQgcHVibGljIGRpc2NvdW50UHJpY2U7IAogICAgREdaVG9rZW4gcHVibGljIHRva2VuUmV3YXJkOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyB3aGl0ZUxpc3Q7CgogICAgZXZlbnQgRnVuZFRyYW5zZmVyKGFkZHJlc3MgYmFja2VyLCB1aW50IGFtb3VudCwgYm9vbCBpc0NvbnRyaWJ1dGlvbik7CiAgICAKICAgIGJvb2wgcHVibGljIGNyb3dkc2FsZUNsb3NlZCA9IGZhbHNlOwogICAgdWludCBwdWJsaWMgdG9rZW5Pd25lck51bWJlciA9IDA7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCB0b2tlbk93bmVyTnVtYmVyTWF4ID0gMTIwOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWluUHVyY2hhc2UgPSAyNS4wICogMSBldGhlcjsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGRpc2NvdW50VmFsdWUgPSAxMDAuMCAqIDEgZXRoZXI7CgogICAgLyogIGF0IGluaXRpYWxpemF0aW9uLCBzZXR1cCB0aGUgb3duZXIgKi8KICAgIGZ1bmN0aW9uIERvZ2V6ZXJJQ09Qcml2YXRlQ3Jvd2RTYWxlKAogICAgICAgIGFkZHJlc3MgYWRkcmVzc09mVG9rZW5Vc2VkQXNSZXdhcmQsCgkJYWRkcmVzcyBhZGRyZXNzT2ZCZW5lZmljaWFyeQogICAgKSBwdWJsaWMKICAgIHsKICAgICAgICBiZW5lZmljaWFyeSA9IGFkZHJlc3NPZkJlbmVmaWNpYXJ5OwogICAgICAgIHN0YXJ0VGltZSA9IDE1MTYwMjEyMDA7CiAgICAgICAgZHVyYXRpb24gPSA3NDQgaG91cnM7CgkJdG9rZW5zQ29udHJhY3RCYWxhbmNlID0gIDUwMDAwMDAwMDAwMDAwMDsKICAgICAgICBwcmljZSA9IDUwMDAwMDA7CiAgICAgICAgZGlzY291bnRQcmljZSA9IDQ1MDAwMDA7CiAgICAgICAgdG9rZW5SZXdhcmQgPSBER1pUb2tlbihhZGRyZXNzT2ZUb2tlblVzZWRBc1Jld2FyZCk7CiAgICB9CgogICAgbW9kaWZpZXIgb25seUFmdGVyU3RhcnQoKSB7CiAgICAgICAgcmVxdWlyZSAobm93ID49IHN0YXJ0VGltZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5QmVmb3JlRW5kKCkgewogICAgICAgIHJlcXVpcmUgKG5vdyA8PSBzdGFydFRpbWUgKyBkdXJhdGlvbik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKiBUaGUgZnVuY3Rpb24gd2l0aG91dCBuYW1lIGlzIHRoZSBkZWZhdWx0IGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW5ldmVyIGFueW9uZSBzZW5kcyBmdW5kcyB0byBhIGNvbnRyYWN0ICovCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHN0b3BJbkVtZXJnZW5jeSBvbmx5QWZ0ZXJTdGFydCBvbmx5QmVmb3JlRW5kIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUgKG1zZy52YWx1ZSA+PSBtaW5QdXJjaGFzZSk7CiAgICAgICAgcmVxdWlyZSAoY3Jvd2RzYWxlQ2xvc2VkID09IGZhbHNlKTsKICAgICAgICByZXF1aXJlICh0b2tlbnNDb250cmFjdEJhbGFuY2UgPiAwKTsKICAgICAgICByZXF1aXJlICh3aGl0ZUxpc3RbbXNnLnNlbmRlcl0gPT0gdHJ1ZSk7CgkJCgkJdWludCBjdXJyZW50UHJpY2UgPSBwcmljZTsKCQkKICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdID09IDApCiAgICAgICAgewogICAgICAgICAgICByZXF1aXJlICh0b2tlbk93bmVyTnVtYmVyIDwgdG9rZW5Pd25lck51bWJlck1heCk7CiAgICAgICAgICAgIHRva2VuT3duZXJOdW1iZXIrKzsKICAgICAgICB9CgogICAgICAgIGlmIChtc2cudmFsdWUgPj0gZGlzY291bnRWYWx1ZSkKICAgICAgICB7CiAgICAgICAgICAgIGN1cnJlbnRQcmljZSA9IGRpc2NvdW50UHJpY2U7CiAgICAgICAgfQkJCgkJCgkJdWludCBhbW91bnRTZW5kVG9rZW5zID0gbXNnLnZhbHVlIC8gY3VycmVudFByaWNlOwoJCQoJCWlmIChhbW91bnRTZW5kVG9rZW5zID4gdG9rZW5zQ29udHJhY3RCYWxhbmNlKQoJCXsKCQkJdWludCByZWZ1bmQgPSBtc2cudmFsdWUgLSAodG9rZW5zQ29udHJhY3RCYWxhbmNlICogY3VycmVudFByaWNlKTsKCQkJYW1vdW50U2VuZFRva2VucyA9IHRva2Vuc0NvbnRyYWN0QmFsYW5jZTsKCQkJbXNnLnNlbmRlci50cmFuc2ZlcihyZWZ1bmQpOwoJCQlGdW5kVHJhbnNmZXIobXNnLnNlbmRlciwgcmVmdW5kLCB0cnVlKTsKCQkJYmFsYW5jZU9mW21zZy5zZW5kZXJdICs9IChtc2cudmFsdWUgLSByZWZ1bmQpOwoJCX0KCQllbHNlIAoJCXsKCQkJYmFsYW5jZU9mW21zZy5zZW5kZXJdICs9IG1zZy52YWx1ZTsKCQl9CgkJCgkJdG9rZW5SZXdhcmQudHJhbnNmZXIobXNnLnNlbmRlciwgYW1vdW50U2VuZFRva2Vucyk7CgkJRnVuZFRyYW5zZmVyKG1zZy5zZW5kZXIsIGFtb3VudFNlbmRUb2tlbnMsIHRydWUpOwoJCQoJCXRva2Vuc0NvbnRyYWN0QmFsYW5jZSAtPSBhbW91bnRTZW5kVG9rZW5zOwoKICAgIH0KCiAgICBmdW5jdGlvbiBqb2luV2hpdGVMaXN0IChhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgb25seU93bmVyCiAgICB7CiAgICAgICAgaWYgKF9hZGRyZXNzICE9IGFkZHJlc3MoMCkpIAogICAgICAgIHsKICAgICAgICAgICAgd2hpdGVMaXN0W19hZGRyZXNzXSA9IHRydWU7CiAgICAgICAgfQogICAgfQoJCiAgICBmdW5jdGlvbiBmaW5hbGl6ZVNhbGUgKCkgcHVibGljIG9ubHlPd25lcgogICAgewogICAgICAgcmVxdWlyZSAoY3Jvd2RzYWxlQ2xvc2VkID09IGZhbHNlKTsKICAgICAgIGNyb3dkc2FsZUNsb3NlZCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcmVvcGVuU2FsZSAoKSBwdWJsaWMgb25seU93bmVyCiAgICB7CiAgICAgICBjcm93ZHNhbGVDbG9zZWQgPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRQcmljZSAodWludCBfcHJpY2UpIHB1YmxpYyBvbmx5T3duZXIKICAgIHsKICAgICAgICBpZiAoX3ByaWNlICE9IDApCiAgICAgICAgewogICAgICAgICAgICBwcmljZSA9IF9wcmljZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0RGlzY291bnQgKHVpbnQgX2Rpc2NvdW50UHJpY2UpIHB1YmxpYyBvbmx5T3duZXIKICAgIHsKICAgICAgICBpZiAoX2Rpc2NvdW50UHJpY2UgIT0gMCkKICAgICAgICB7CiAgICAgICAgICAgIGRpc2NvdW50UHJpY2UgPSBfZGlzY291bnRQcmljZTsKICAgICAgICB9CiAgICB9CgkKICAgIGZ1bmN0aW9uIGZ1bmRXaXRoZHJhd2FsICh1aW50IF9hbW91bnQpIHB1YmxpYyBvbmx5T3duZXIKICAgIHsKICAgICAgICBiZW5lZmljaWFyeS50cmFuc2ZlcihfYW1vdW50KTsKICAgIH0KICAgCiAgICBmdW5jdGlvbiB0b2tlbldpdGhkcmF3YWwgKHVpbnQgX2Ftb3VudCkgcHVibGljIG9ubHlPd25lcgogICAgewogICAgICAgIHRva2VuUmV3YXJkLnRyYW5zZmVyKGJlbmVmaWNpYXJ5LCBfYW1vdW50KTsKCQl0b2tlbnNDb250cmFjdEJhbGFuY2UgLT0gX2Ftb3VudDsKICAgIH0KCQogICAgZnVuY3Rpb24gY2hhbmdlQmVuZWZpY2lhcnkoYWRkcmVzcyBfbmV3QmVuZWZpY2lhcnkpIHB1YmxpYyBvbmx5T3duZXIgCgl7CiAgICAgICAgaWYgKF9uZXdCZW5lZmljaWFyeSAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIGJlbmVmaWNpYXJ5ID0gX25ld0JlbmVmaWNpYXJ5OwogICAgICAgIH0KCX0JCn0='.
	

]
