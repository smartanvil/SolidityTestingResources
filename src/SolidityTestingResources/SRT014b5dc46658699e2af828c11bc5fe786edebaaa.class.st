Class {
	#name : #SRT014b5dc46658699e2af828c11bc5fe786edebaaa,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT014b5dc46658699e2af828c11bc5fe786edebaaa >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogICAgLyoqCiAgICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICAgKi8KICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICAgKi8KICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBTdWJ0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAgICovCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgICAvKioKICAgICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAgICogYWNjb3VudC4KICAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQoKfQoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIG5vdCBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCgpIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgd2hlblBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgfQp9CgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMsIFBhdXNhYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIC8vICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGZyZWVCYWxhbmNlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBmcm96ZW5CYWxhbmNlczsKCiAgICB1aW50MjU2IHRvdGFsU3VwcGx5XzsKCiAgICAvKioKICAgICogQGRldiB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGluIGV4aXN0ZW5jZQogICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiB0b3RhbFN1cHBseV87CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBmcmVlQmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgICAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICAgICAgZnJlZUJhbGFuY2VzW21zZy5zZW5kZXJdID0gZnJlZUJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGZyZWVCYWxhbmNlc1tfdG9dID0gZnJlZUJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAgICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBmcmVlQmFsYW5jZXNbX293bmVyXSArIGZyb3plbkJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gZnJlZUJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGZyZWVCYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGZyb3plbkJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGZyb3plbkJhbGFuY2VzW19vd25lcl07CiAgICB9Cn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGZyZWVCYWxhbmNlc1tfZnJvbV0pOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICAgICAgZnJlZUJhbGFuY2VzW19mcm9tXSA9IGZyZWVCYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgZnJlZUJhbGFuY2VzW190b10gPSBmcmVlQmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgICAqCiAgICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICAgKiByYWNlIGNvbmRpdGlvbiBpcyB0byBmaXJzdCByZWR1Y2UgdGhlIHNwZW5kZXIncyBhbGxvd2FuY2UgdG8gMCBhbmQgc2V0IHRoZSBkZXNpcmVkIHZhbHVlIGFmdGVyd2FyZHM6CiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBJbmNyZWFzZSB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgICoKICAgICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX2FkZGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gaW5jcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KICAgICAqLwogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IERlY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAgKgogICAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gZGVjcmVtZW50CiAgICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEBwYXJhbSBfc3VidHJhY3RlZFZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGRlY3JlYXNlIHRoZSBhbGxvd2FuY2UgYnkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICAgICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgICAgIH0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKfQoKLyoqCiAqIEB0aXRsZSBDWFRDVG9rZW4KICogQGRldiBWZXJ5IHNpbXBsZSBFUkMyMCBUb2tlbiBleGFtcGxlLCB3aGVyZSBhbGwgdG9rZW5zIGFyZSBwcmUtYXNzaWduZWQgdG8gdGhlIGNyZWF0b3IuCiAqIE5vdGUgdGhleSBjYW4gbGF0ZXIgZGlzdHJpYnV0ZSB0aGVzZSB0b2tlbnMgYXMgdGhleSB3aXNoIHVzaW5nIGB0cmFuc2ZlcmAgYW5kIG90aGVyCiAqIGBTdGFuZGFyZFRva2VuYCBmdW5jdGlvbnMuCiAqLwpjb250cmFjdCBDWFRDQ29udHJhY3QgaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkN1bHR1cmUgZVhjaGFuZ2UgVG9rZW4gQ2hhaW4iOyAvLyBzb2xpdW0tZGlzYWJsZS1saW5lIHVwcGVyY2FzZQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiQ1hUQyI7IC8vIHNvbGl1bS1kaXNhYmxlLWxpbmUgdXBwZXJjYXNlCiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSA4OyAvLyBzb2xpdW0tZGlzYWJsZS1saW5lIHVwcGVyY2FzZQoKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGZyZWVTdXBwbHkgPSAyMTAwMDAwMCAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7IC8vIDEwJeiHqueUsemHjwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZnJvemVuU3VwcGx5ID0gMTg5MDAwMDAwICogKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsgLy8gOTAl5Ya757uT6YePCgogICAgYWRkcmVzcyBwdWJsaWMgc3lzdGVtQWNjOyAvLyBjaGFyZ2UgZmVlCiAgICBhZGRyZXNzW10gcGFydGVyQWNjOwogICAgdWludDI1NiBpbnRlcm5hbCBmZWU7CiAgICAKICAgIHN0cnVjdCBBcnRJbmZvIHsKICAgICAgICBzdHJpbmcgaWR0UmVwb3J0OwogICAgICAgIHN0cmluZyBldnRSZXBvcnQ7CiAgICAgICAgc3RyaW5nIGVzY1JlcG9ydDsKICAgICAgICBzdHJpbmcgcmVnUmVwb3J0OwogICAgfQogICAgCiAgICBtYXBwaW5nIChzdHJpbmcgPT4gQXJ0SW5mbykgaW50ZXJuYWwgYXJ0SW5mb3M7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikpIGludGVybmFsIGZyZWV6ZVJlY29yZDsKCiAgICBldmVudCBGcmVlemUoYWRkcmVzcyBpbmRleGVkIF9hZGRyLCB1aW50MjU2IGluZGV4ZWQgX2Ftb3VudCwgdWludDI1NiBfdGltZXN0YW1wKTsKICAgIGV2ZW50IFJlbGVhc2UoYWRkcmVzcyBpbmRleGVkIF9hZGRyLCB1aW50MjU2IGluZGV4ZWQgX2Ftb3VudCk7CiAgICBldmVudCBTZXRQYXJ0ZXIoYWRkcmVzcyBpbmRleGVkIF9hZGRyLCB1aW50MjU2IGluZGV4ZWQgX2Ftb3VudCk7CiAgICBldmVudCBTZXRGb3VuZEFjYyhhZGRyZXNzIGluZGV4ZWQgX2FkZHIpOwogICAgZXZlbnQgTmV3QXJ0KHN0cmluZyBpbmRleGVkIF9pZCk7CiAgICBldmVudCBTZXRBcnRJZHQoc3RyaW5nIGluZGV4ZWQgX2lkLCBzdHJpbmcgaW5kZXhlZCBfaWR0UmVwb3J0KTsKICAgIGV2ZW50IFNldEFydEV2dChzdHJpbmcgaW5kZXhlZCBfaWQsIHN0cmluZyBpbmRleGVkIF9ldnRSZXBvcnQpOwogICAgZXZlbnQgU2V0QXJ0RXNjKHN0cmluZyBpbmRleGVkIF9pZCwgc3RyaW5nIGluZGV4ZWQgX2VzY1JlcG9ydCk7CiAgICBldmVudCBTZXRBcnRSZWcoc3RyaW5nIGluZGV4ZWQgX2lkLCBzdHJpbmcgaW5kZXhlZCBfcmVnUmVwb3J0KTsKICAgIGV2ZW50IFNldEZlZSh1aW50MjU2IGluZGV4ZWQgX2ZlZSk7CgogICAgLyoqCiAgICAgKiBAZGV2IENvbnN0cnVjdG9yCiAgICAgKi8KICAgIGZ1bmN0aW9uIENYVENDb250cmFjdCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHRvdGFsU3VwcGx5XyA9IGZyZWVTdXBwbHkgKyBmcm96ZW5TdXBwbHk7CiAgICAgICAgZnJlZUJhbGFuY2VzW293bmVyXSA9IGZyZWVTdXBwbHk7CiAgICAgICAgZnJvemVuQmFsYW5jZXNbb3duZXJdID0gZnJvemVuU3VwcGx5OwogICAgfQoKICAgIC8qKgogICAgICogaW5pdCBwYXJ0ZXIKICAgICAqLwogICAgZnVuY3Rpb24gc2V0UGFydGVyKGFkZHJlc3MgX3BhcnRlciwgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICAvL3JlcXVpcmUoX2Ftb3VudCA9PSAyMTAwMDApOwogICAgICAgIHJlcXVpcmUocGFydGVyQWNjLmxlbmd0aCA8PSA0OSk7CiAgICAgICAgcGFydGVyQWNjLnB1c2goX3BhcnRlcik7CiAgICAgICAgZnJvemVuQmFsYW5jZXNbX3BhcnRlcl0gPSBfYW1vdW50OwogICAgICAgIFNldFBhcnRlcihfcGFydGVyLCBfYW1vdW50KTsKICAgIH0KCiAgICAvKioKICAgICAqIHNldCBzeXN0ZW1BY2NvdW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldEZvdW5kQWNjKGFkZHJlc3MgX3N5c0FjYykgcHVibGljIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICAgICAgc3lzdGVtQWNjID0gX3N5c0FjYzsKICAgICAgICBTZXRGb3VuZEFjYyhfc3lzQWNjKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBzZXQgZmVlCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldEZlZSh1aW50MjU2IF9mZWUpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGZlZSA9IF9mZWU7CiAgICAgICAgU2V0RmVlKF9mZWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIG5ldyBhcnQgaGFzaCBpbmZvCiAgICAgKi8KICAgIGZ1bmN0aW9uIG5ld0FydChzdHJpbmcgX2lkLCBzdHJpbmcgX3JlZ1JlcG9ydCkgcHVibGljIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICAgICAgQXJ0SW5mbyBtZW1vcnkgaW5mbyA9IEFydEluZm8oe2lkdFJlcG9ydDogIiIsIGV2dFJlcG9ydDogIiIsIGVzY1JlcG9ydDogIiIsIHJlZ1JlcG9ydDogX3JlZ1JlcG9ydH0pOwogICAgICAgIGFydEluZm9zW19pZF0gPSBpbmZvOwogICAgICAgIE5ld0FydChfaWQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIGdldCBhcnRJbmZvCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldEFydChzdHJpbmcgX2lkKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcsIHN0cmluZywgc3RyaW5nLCBzdHJpbmcpIHsKICAgICAgICBBcnRJbmZvIG1lbW9yeSBpbmZvID0gYXJ0SW5mb3NbX2lkXTsKICAgICAgICByZXR1cm4gKGluZm8ucmVnUmVwb3J0LCBpbmZvLmlkdFJlcG9ydCwgaW5mby5ldnRSZXBvcnQsIGluZm8uZXNjUmVwb3J0KTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBzZXQgYXJ0IGlkdFJlcG9ydAogICAgICovCiAgICBmdW5jdGlvbiBzZXRBcnRJZHQoc3RyaW5nIF9pZCwgc3RyaW5nIF9pZHRSZXBvcnQpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHN0cmluZyBpZHRSZXBvcnQgPSBhcnRJbmZvc1tfaWRdLmlkdFJlcG9ydDsKICAgICAgICBieXRlcyBtZW1vcnkgaWR0UmVwb3J0TGVuID0gYnl0ZXMoaWR0UmVwb3J0KTsKICAgICAgICBpZiAoaWR0UmVwb3J0TGVuLmxlbmd0aCA9PSAwKXsKICAgICAgICAgICAgYXJ0SW5mb3NbX2lkXS5pZHRSZXBvcnQgPSBfaWR0UmVwb3J0OwogICAgICAgICAgICBTZXRBcnRJZHQoX2lkLCBfaWR0UmVwb3J0KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBzZXQgYXJ0IGV2dFJlcG9ydAogICAgICovCiAgICBmdW5jdGlvbiBzZXRBcnRFdnQoc3RyaW5nIF9pZCwgc3RyaW5nIF9ldnRSZXBvcnQpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHN0cmluZyBldnRSZXBvcnQgPSBhcnRJbmZvc1tfaWRdLmV2dFJlcG9ydDsKICAgICAgICBieXRlcyBtZW1vcnkgZXZ0UmVwb3J0TGVuID0gYnl0ZXMoZXZ0UmVwb3J0KTsKICAgICAgICBpZiAoZXZ0UmVwb3J0TGVuLmxlbmd0aCA9PSAwKXsKICAgICAgICAgICAgYXJ0SW5mb3NbX2lkXS5ldnRSZXBvcnQgPSBfZXZ0UmVwb3J0OwogICAgICAgICAgICBTZXRBcnRFdnQoX2lkLCBfZXZ0UmVwb3J0KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBzZXQgYXJ0IGVzY3JvdyByZXBvcnQKICAgICAqLwogICAgZnVuY3Rpb24gc2V0QXJ0RXNjKHN0cmluZyBfaWQsIHN0cmluZyBfZXNjUmVwb3J0KSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBzdHJpbmcgZXNjUmVwb3J0ID0gYXJ0SW5mb3NbX2lkXS5lc2NSZXBvcnQ7CiAgICAgICAgYnl0ZXMgbWVtb3J5IGVzY1JlcG9ydExlbiA9IGJ5dGVzKGVzY1JlcG9ydCk7CiAgICAgICAgaWYgKGVzY1JlcG9ydExlbi5sZW5ndGggPT0gMCl7CiAgICAgICAgICAgIGFydEluZm9zW19pZF0uZXNjUmVwb3J0ID0gX2VzY1JlcG9ydDsKICAgICAgICAgICAgU2V0QXJ0RXNjKF9pZCwgX2VzY1JlcG9ydCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8qKgogICAgICogZGlzdHJpYnV0ZSBhcnQgY29pbiB0byB1c2VyLgogICAgICovCiAgICBmdW5jdGlvbiBpc3N1ZShhZGRyZXNzIF9hZGRyLCB1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgX3RpbWVzdGFtcCkgcHVibGljIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICAgICAgLy8gMjAxOC8wMy8yMyA9IDE1MjE3MzQ0MDAKICAgICAgICByZXF1aXJlKGZyb3plbkJhbGFuY2VzW293bmVyXSA+PSBfYW1vdW50KTsKICAgICAgICBmcm96ZW5CYWxhbmNlc1tvd25lcl0gPSBmcm96ZW5CYWxhbmNlc1tvd25lcl0uc3ViKF9hbW91bnQpOwogICAgICAgIGZyb3plbkJhbGFuY2VzW19hZGRyXT0gZnJvemVuQmFsYW5jZXNbX2FkZHJdLmFkZChfYW1vdW50KTsKICAgICAgICBmcmVlemVSZWNvcmRbX2FkZHJdW190aW1lc3RhbXBdID0gZnJlZXplUmVjb3JkW19hZGRyXVtfdGltZXN0YW1wXS5hZGQoX2Ftb3VudCk7CiAgICAgICAgRnJlZXplKF9hZGRyLCBfYW1vdW50LCBfdGltZXN0YW1wKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIGNoYXJnZSBmZWUKICAgICAqLwogICAgZnVuY3Rpb24gY2hhcmdlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgX3RpbWVzdGFtcCkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoZnJlZUJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQpOwogICAgICAgIHJlcXVpcmUoX2Ftb3VudCA+PSBmZWUpOwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHVpbnQyNTYgdG9BbXQgPSBfYW1vdW50LnN1YihmZWUpOwogICAgICAgIGZyZWVCYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGZyZWVCYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX2Ftb3VudCk7CiAgICAgICAgZnJlZUJhbGFuY2VzW190b10gPSBmcmVlQmFsYW5jZXNbX3RvXS5hZGQodG9BbXQpOwogICAgICAgIC8vIHN5c3RlbUFjYwogICAgICAgIGZyb3plbkJhbGFuY2VzW3N5c3RlbUFjY10gPSBmcm96ZW5CYWxhbmNlc1tzeXN0ZW1BY2NdLmFkZChmZWUpOwogICAgICAgIGZyZWV6ZVJlY29yZFtzeXN0ZW1BY2NdW190aW1lc3RhbXBdID0gZnJlZXplUmVjb3JkW3N5c3RlbUFjY11bX3RpbWVzdGFtcF0uYWRkKGZlZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCB0b0FtdCk7CiAgICAgICAgRnJlZXplKF90bywgZmVlLCBfdGltZXN0YW1wKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIHVzZXIgZnJlZXplIGZyZWUgYmFsYW5jZQogICAgICovCiAgICBmdW5jdGlvbiBmcmVlemUodWludDI1NiBfYW1vdW50LCB1aW50MjU2IF90aW1lc3RhbXApIHB1YmxpYyB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKGZyZWVCYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50KTsKICAgICAgICBmcmVlQmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBmcmVlQmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOwogICAgICAgIGZyb3plbkJhbGFuY2VzW21zZy5zZW5kZXJdID0gZnJvemVuQmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKF9hbW91bnQpOwogICAgICAgIGZyZWV6ZVJlY29yZFttc2cuc2VuZGVyXVtfdGltZXN0YW1wXSA9IGZyZWV6ZVJlY29yZFttc2cuc2VuZGVyXVtfdGltZXN0YW1wXS5hZGQoX2Ftb3VudCk7CiAgICAgICAgRnJlZXplKG1zZy5zZW5kZXIsIF9hbW91bnQsIF90aW1lc3RhbXApOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIGF1dG8gcmVsZWFzZQogICAgICovCiAgICBmdW5jdGlvbiByZWxlYXNlKGFkZHJlc3NbXSBfYWRkcmVzc0xzdCwgdWludDI1NltdIF9hbW91bnRMc3QpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3NMc3QubGVuZ3RoID09IF9hbW91bnRMc3QubGVuZ3RoKTsKICAgICAgICBmb3IodWludCBpID0gMDsgaSA8IF9hZGRyZXNzTHN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGZyZWVCYWxhbmNlc1tfYWRkcmVzc0xzdFtpXV0gPSBmcmVlQmFsYW5jZXNbX2FkZHJlc3NMc3RbaV1dLmFkZChfYW1vdW50THN0W2ldKTsKICAgICAgICAgICAgZnJvemVuQmFsYW5jZXNbX2FkZHJlc3NMc3RbaV1dID0gZnJvemVuQmFsYW5jZXNbX2FkZHJlc3NMc3RbaV1dLnN1YihfYW1vdW50THN0W2ldKTsKICAgICAgICAgICAgUmVsZWFzZShfYWRkcmVzc0xzdFtpXSwgX2Ftb3VudExzdFtpXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIGJvbnVzIHNoYXJlcwogICAgICovCiAgICBmdW5jdGlvbiBib251cyh1aW50MjU2IF9zdW0sIGFkZHJlc3NbXSBfYWRkcmVzc0xzdCwgdWludDI1NltdIF9hbW91bnRMc3QpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoZnJlZUJhbGFuY2VzW3N5c3RlbUFjY10gPj0gX3N1bSk7CiAgICAgICAgcmVxdWlyZShfYWRkcmVzc0xzdC5sZW5ndGggPT0gX2Ftb3VudExzdC5sZW5ndGgpOwogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgX2FkZHJlc3NMc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgZnJlZUJhbGFuY2VzW19hZGRyZXNzTHN0W2ldXSA9IGZyZWVCYWxhbmNlc1tfYWRkcmVzc0xzdFtpXV0uYWRkKF9hbW91bnRMc3RbaV0pOwogICAgICAgICAgICBUcmFuc2ZlcihzeXN0ZW1BY2MsIF9hZGRyZXNzTHN0W2ldLCBfYW1vdW50THN0W2ldKTsKICAgICAgICB9CiAgICAgICAgZnJlZUJhbGFuY2VzW3N5c3RlbUFjY10uc3ViKF9zdW0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9'.
	

]
