Class {
	#name : #SRT2d4c0a94ecc29513972b302ea143aa6e0412fcde,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2d4c0a94ecc29513972b302ea143aa6e0412fcde >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBDcmVhdGVkIGJ5IFJvbWFuIE96bm9iaW4gKDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI3YTE1MDAyNTA4M2ExNzFiMTMxNjU0MDgwZiI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvYT4pIC0gaHR0cDovL2NvZGUtZXhwZXJ0LnBybwovLyBPd25lciBpcyBBbGV4ZXkgTWFsYXNoa2luICg8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iNjIwZTA3MGMwYjBjMDUxMDAzMDY1MzVhMjIxYjAzMGMwNjA3MWE0YzEwMTciPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+KQovLyBTbWFydCBjb250cmFjdCBmb3IgQmFzaXNUb2tlbiBvZiBMdGQgIktLTSIgKDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJiMWQwYzNkY2QwYzVjNGMzZDBjMWRkYzRjMmYxZGNkMGQ4ZGQ5ZmMzYzQiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+KSAtIGh0dHA6Ly9ydWFybWF0dXJhLnJ1LwoKbGlicmFyeSBTYWZlTWF0aCB7CgogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cgp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CgogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICBhZGRyZXNzIGlucF9zZW5kZXIgPSBtc2cuc2VuZGVyOwogICAgIGJvb2wgY2hla2sgPSBtc2cuc2VuZGVyID09IG93bmVyOwogICAgcmVxdWlyZShjaGVrayk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLy8gVGhlIGNvbnRyYWN0Li4uCgpjb250cmFjdCBCYXNpc0ljbyAgewoKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKICAKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJCYXNpcyBUb2tlbiI7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiQlNTIjsKCiAgICB1aW50MzIgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMDsgIAogICAgCiAgICBzdHJ1Y3QgSW52ZXN0b3IgewogICAgICAgIGFkZHJlc3MgaG9sZGVyOwogICAgICAgIHVpbnQgdG9rZW5zOwoKICAgIH0KICAKICAgIEludmVzdG9yW10gaW50ZXJuYWwgQ2FzdF9BcnI7CiAgICAgCiAgICBJbnZlc3RvciB0bXBfaW52ZXN0b3I7ICAKICAgICAgCiAgCiAgLy8gVXNlZCB0byBzZXQgd2FsbGV0IGZvciBvd25lciwgYm91bnR5IGFuZCBkZXZlbG9wZXIKICAvLyBUbyB0aGF0IGFkZHJlc3MgRXRoZXIgd2lsbCBiZSBzZW5kZWQgaWYgSWNvIHdpbGwgaGF2ZSBzdWNzZXNzIGRvbmUKICAvLyBVbnRpbGwgSWNvIGlzIG5vIGZpbmlzaCBhbmQgaXMgbm8gc3Vjc2VzcywgYWxsIEV0aGVyIGFyZSBjbG9zZWQgZnJvbSBhbnlib2R5IG9uIElDTyBjb250cmFjdCB3YWxsZXQKICBhZGRyZXNzIGludGVybmFsIGNvbnN0YW50IG93bmVyX3dhbGxldCA9IDB4NzlkOGFmNmVFQTZBZWVhZjdhM2E5MkQzNDg0NTdhNUM0ZjBlRWUxQjsKICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBvd25lciA9IDB4NzlkOGFmNmVFQTZBZWVhZjdhM2E5MkQzNDg0NTdhNUM0ZjBlRWUxQjsKICBhZGRyZXNzIGludGVybmFsIGNvbnN0YW50IGRldmVsb3BlciA9IDB4ZjJGMUE5MkFEN2YxMTI0ZWY4OTAwOTMxRUQwMDY4M2YwQjNBNWRhNzsKCiAgLy8KICAvL2FkZHJlc3MgcHVibGljIGJvdW50eV93YWxsZXQgPSAweDc5ZDhhZjZlRUE2QWVlYWY3YTNhOTJEMzQ4NDU3YTVDNGYwZUVlMUI7CgogIHVpbnQgcHVibGljIGNvbnN0YW50IGJvdW50eVBlcmNlbnQgPSA0OwogIAoKICAvL2FkZHJlc3MgcHVibGljIGJvdW50eV9yZWF0cmljdGVkX2FkZHI7CiAgLy9CYXNlIHByaWNlIGZvciBCU1MgSUNPLiBTaG93IGhvdyBtdWNoIFdlaSBpcyBpbiAxIEJTUy4gRHVyaW5nIElDTyBwcmljZSBjYWxjdWxhdGUgZnJvbSB0aGUgJHJhdGUKICB1aW50IGludGVybmFsIGNvbnN0YW50IHJhdGUgPSAzMzAwMDAwMDAwMDAwMDAwOwogIAogICAgdWludCBwdWJsaWMgdG9rZW5faXNvX3ByaWNlOwovLyDQk9C10L3QtdGA0LjRgNGD0LXRgtGB0Y8g0LIgQ3Jvd2RzYWxlIGNvbnN0cnVjdG9yCi8vICBCYXNpc1Rva2VuIHB1YmxpYyB0b2tlbiA9IG5ldyBCYXNpc1Rva2VuKCk7CgogIC8vIFRpbWUgc3J1Y3R1cmUgb2YgQmFzaXMgaWNvCiAgLy8gc3RhcnRfZGVjbGFyYXRpb24gb2YgZmlyc3Qgcm91bmQgb2YgQmFzaXMgaWNvIC0gUHJlc2FsZSAoIHN0YXJ0X2RlY2xhcmF0aW9uIG9mIHRva2VuIGNyZWF0aW9uIGFuZCBpY28gUHJlc2FsZSApCiAgdWludCBwdWJsaWMgc3RhcnRfZGVjbGFyYXRpb24gPSAxNTExMzg0NDAwOwogIC8vIFRoZSBwZXJpb2QgZm9yIGNhbGN1bGF0ZSB0aGUgdGltZSBzdHJ1Y3R1cmUgb2YgQmFzaXMgaWNvLCBhbW91bnQgb2YgdGhlIGRheXMKICB1aW50IHB1YmxpYyBpY29fcGVyaW9kID0gMTU7CiAgLy8gRmlyc3Qgcm91bmQgZmluaXNoIC0gUHJlc2FsZSBmaW5pc2gKICB1aW50IHB1YmxpYyBwcmVzYWxlX2ZpbmlzaDsKICAvLyBpY28gU2Vjb25kIHJhdW5kIHN0YXJ0LgogIHVpbnQgcHVibGljIHNlY29uZF9yb3VuZF9zdGFydDsKICAvLyBCYXNpcyBpY28gZmluaXNoLCBhbGwgbWludCBhcmUgY2xvc2VkCiAgdWludCBwdWJsaWMgaWNvX2ZpbmlzaCA9IHN0YXJ0X2RlY2xhcmF0aW9uICsgKGljb19wZXJpb2QgKiAxIGRheXMpLm11bCg2KTsKCgogIC8vIExpbW1pdHMgYW5kIGNhbGxjdWxhdGlvbiBvZiB0b3RhbCBtaW50ZWQgQmFzaXMgdG9rZW4KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGhhcmRjYXAgPSAxNTM2MDAwOwogICAgLy8gbWluaW1hbCBmb3Igc29mdGNhcAogICAgdWludCBwdWJsaWMgc29mdGNhcCA9IDE1MDAwMDsKICAgIC8vIFRvdGFsIHN1cGxpZWQgQmFzaXMgdG9rZW4gZHVyaW5nIElDTwogICAgdWludCBwdWJsaWMgYnNzVG90YWxTdXBseTsKICAgIC8vIFdlaSByYWlzZWQgZHVyaW5nIElDTwogICAgdWludCBwdWJsaWMgd2VpUmFpc2VkOwogIC8vICBsaXN0IG9mIG93bmVycyBhbmQgdG9rZW4gYmFsYW5jZXMgCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGljb19iYWxhbmNlczsKICAvLyAgbGlzdCBvZiBvd25lcnMgYW5kIGV0aGVyIGJhbGFuY2VzIGZvciByZWZ1bmQgICAgCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGljb19pbnZlc3RvcjsKICAgCiAgICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgIEZpbmFsaXplZCgpOyAgCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsgICAgCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICAKICAgIGJvb2wgUmVmdW5kSUNPID1mYWxzZTsKICAgIGJvb2wgaXNGaW5hbGl6ZWQgPWZhbHNlOwogICAgLy8gVGhlIG1hcCBvZiBhbGxvd2VkIHRva2VucyBmb3IgZXh0ZXJuYWwgYWRkcmVzcyBhY2Nlc3MKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIAovLyBUaGUgY29uc3RyYWN0b3Igb2YgY29udHJhY3QgLi4uCiAgZnVuY3Rpb24gQmFzaXNJY28oKSBwdWJsaWMgICAgIHsKCiAKICAgIHdlaVJhaXNlZCA9IDA7CiAgICBic3NUb3RhbFN1cGx5ID0gMDsKICAKICAgIAogICAgdG9rZW5faXNvX3ByaWNlID0gcmF0ZS5tdWwoODApLmRpdigxMDApOyAKCgoKICAgIHByZXNhbGVfZmluaXNoID0gc3RhcnRfZGVjbGFyYXRpb24gKyAoaWNvX3BlcmlvZCAqIDEgZGF5cyk7CiAgICBzZWNvbmRfcm91bmRfc3RhcnQgPSBzdGFydF9kZWNsYXJhdGlvbiArIChpY29fcGVyaW9kICogMSBkYXlzKS5tdWwoMik7CiAgfQogIAogICAgbW9kaWZpZXIgc2FsZUlzT24oKSB7CiAgICAgIHJlcXVpcmUobm93ID4gc3RhcnRfZGVjbGFyYXRpb24gJiYgbm93IDwgaWNvX2ZpbmlzaCk7CiAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgTm9CcmVhaygpIHsKICAgICAgcmVxdWlyZShub3cgPCBwcmVzYWxlX2ZpbmlzaCAgfHwgbm93ID4gc2Vjb25kX3JvdW5kX3N0YXJ0KTsKICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpc1VuZGVySGFyZENhcCgpIHsKICAgICAgcmVxdWlyZSAoYnNzVG90YWxTdXBseSA8PSBoYXJkY2FwKTsKICAgICAgXzsKICAgIH0gIAogICAgCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgIGFkZHJlc3MgaW5wX3NlbmRlciA9IG1zZy5zZW5kZXI7CiAgICAgICAgIGJvb2wgY2hla2sgPSBtc2cuc2VuZGVyID09IG93bmVyOwogICAgICAgIHJlcXVpcmUoY2hla2spOwogICAgXzsKICAgICB9CiAgCiAgICBmdW5jdGlvbiBzZXRQcmljZSAoKSBwdWJsaWMgaXNVbmRlckhhcmRDYXAgc2FsZUlzT24gewogICAgICAgICAgaWYgIChub3cgPCBwcmVzYWxlX2ZpbmlzaCApewogICAgICAgICAgICAgICAvLyBDaGVrIHRvdGFsIHN1cHBseSBCU1MgZm9yIHByaWNlIGxldmVsIGNoYW5nZXMKICAgICAgICAgICAgICBpZiggYnNzVG90YWxTdXBseSA+IDUwMDAwICYmIGJzc1RvdGFsU3VwbHkgPD0gMTAwMDAwICkgewogICAgICAgICAgICAgICAgICB0b2tlbl9pc29fcHJpY2UgPSByYXRlLm11bCg4NSkuZGl2KDEwMCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoIGJzc1RvdGFsU3VwbHkgPiAxMDAwMDAgJiYgYnNzVG90YWxTdXBseSA8PSAxNTAwMDAgKSB7CiAgICAgICAgICAgICAgICAgIHRva2VuX2lzb19wcmljZSA9IHJhdGUubXVsKDkwKS5kaXYoMTAwKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICBpZihic3NUb3RhbFN1cGx5IDw9IDIwMDAwMCkgewogICAgICAgICAgICAgICAgICAgdG9rZW5faXNvX3ByaWNlID0gcmF0ZS5tdWwoOTApLmRpdigxMDApOwogICAgICAgICAgICAgICB9IGVsc2UgeyBpZihic3NUb3RhbFN1cGx5IDw9IDQwMDAwMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0b2tlbl9pc29fcHJpY2UgPSByYXRlLm11bCg5NSkuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuX2lzb19wcmljZSA9IHJhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICB9CiAgICB9IAogICAgCiAgICBmdW5jdGlvbiBnZXRBY3R1YWxQcmljZSgpIHB1YmxpYyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgc2V0UHJpY2UgKCk7ICAgICAgICAKICAgICAgICByZXR1cm4gdG9rZW5faXNvX3ByaWNlOwogICAgfSAgCiAgICAKICAgICBmdW5jdGlvbiB2YWxpZFB1cmNoYXNlKHVpbnQgX21zZ192YWx1ZSkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgIGJvb2wgd2l0aGluUGVyaW9kID0gbm93ID49IHN0YXJ0X2RlY2xhcmF0aW9uICYmIG5vdyA8PSBpY29fZmluaXNoOwogICAgIGJvb2wgbm9uWmVyb1B1cmNoYXNlID0gX21zZ192YWx1ZSAhPSAwOwogICAgIHJldHVybiB3aXRoaW5QZXJpb2QgJiYgbm9uWmVyb1B1cmNoYXNlOwogICB9CiAgIAogICBmdW5jdGlvbiB0b2tlbl9taW50KGFkZHJlc3MgX2ludmVzdG9yLCB1aW50IF90b2tlbnMsIHVpbnQgX3dlaSkgaW50ZXJuYWwgewogICAgICAgCiAgICAgICBpY29fYmFsYW5jZXNbX2ludmVzdG9yXSA9IGljb19iYWxhbmNlc1tfaW52ZXN0b3JdLmFkZChfdG9rZW5zKTsKICAgICAgIHRtcF9pbnZlc3Rvci5ob2xkZXIgPSBfaW52ZXN0b3I7CiAgICAgICB0bXBfaW52ZXN0b3IudG9rZW5zID0gX3Rva2VuczsKICAgICAgIENhc3RfQXJyLnB1c2godG1wX2ludmVzdG9yKTsKICAgICAgIGljb19pbnZlc3RvcltfaW52ZXN0b3JdPSBpY29faW52ZXN0b3JbX2ludmVzdG9yXS5hZGQoX3dlaSk7CiAgIH0KICAgIAogICBmdW5jdGlvbiBidXlUb2tlbnMoKSBleHRlcm5hbCBwYXlhYmxlIHNhbGVJc09uIE5vQnJlYWsgewogICAgIAogICAgIC8vcmVxdWlyZShiZW5lZmljaWFyeSAhPSBhZGRyZXNzKDApKTsKICAgICByZXF1aXJlKHZhbGlkUHVyY2hhc2UobXNnLnZhbHVlKSk7CgogICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwoKICAgICAvLyBjYWxjdWxhdGUgdG9rZW4gYW1vdW50IHRvIGJlIGNyZWF0ZWQKICAgICB1aW50MjU2IHRva2VucyA9IHdlaUFtb3VudC5kaXYodG9rZW5faXNvX3ByaWNlKTsKICAgICBpZiAgKG5vdyA8IHByZXNhbGVfZmluaXNoICl7CiAgICAgICAgIHJlcXVpcmUgKChic3NUb3RhbFN1cGx5ICsgdG9rZW5zKSA8PSBzb2Z0Y2FwKTsKICAgICB9CiAgICByZXF1aXJlICgoYnNzVG90YWxTdXBseSArIHRva2VucykgPCBoYXJkY2FwKTsKICAgICAvLyB1cGRhdGUgc3RhdGUKICAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgIHRva2VuX21pbnQoIG1zZy5zZW5kZXIsIHRva2VucywgbXNnLnZhbHVlKTsKICAgICBUb2tlblB1cmNoYXNlKG1zZy5zZW5kZXIsIG1zZy5zZW5kZXIsIHdlaUFtb3VudCwgdG9rZW5zKTsKCiAgICAgLy9mb3J3YXJkRnVuZHMoKTsKICAgICBic3NUb3RhbFN1cGx5ICs9IHRva2VuczsKICAgIH0KCiAgIC8vIGZhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGJ1eSB0b2tlbnMKICAgZnVuY3Rpb24gKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgYnV5VG9rZW5zRm9yKG1zZy5zZW5kZXIpOwogICB9IAoKICAgZnVuY3Rpb24gYnV5VG9rZW5zRm9yKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHB1YmxpYyBwYXlhYmxlIHNhbGVJc09uIE5vQnJlYWsgewogICAgIAogICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gYWRkcmVzcygwKSk7CiAgICAgcmVxdWlyZSh2YWxpZFB1cmNoYXNlKG1zZy52YWx1ZSkpOwoKICAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKCiAgICAgLy8gY2FsY3VsYXRlIHRva2VuIGFtb3VudCB0byBiZSBjcmVhdGVkCiAgICAgdWludDI1NiB0b2tlbnMgPSB3ZWlBbW91bnQuZGl2KHRva2VuX2lzb19wcmljZSk7CiAgICAgIGlmICAobm93IDwgcHJlc2FsZV9maW5pc2ggKXsKICAgICAgICAgcmVxdWlyZSAoKGJzc1RvdGFsU3VwbHkgKyB0b2tlbnMpIDw9IHNvZnRjYXApOwogICAgIH0KICAgIHJlcXVpcmUgKChic3NUb3RhbFN1cGx5ICsgdG9rZW5zKSA8IGhhcmRjYXApOwogICAgIC8vIHVwZGF0ZSBzdGF0ZQogICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKCiAgICAgdG9rZW5fbWludCggYmVuZWZpY2lhcnksIHRva2VucywgbXNnLnZhbHVlKTsKICAgICBUb2tlblB1cmNoYXNlKG1zZy5zZW5kZXIsIGJlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRva2Vucyk7CgogICAgIC8vZm9yd2FyZEZ1bmRzKCk7CiAgICAgYnNzVG90YWxTdXBseSArPSB0b2tlbnM7CiB9CiAKICAgZnVuY3Rpb24gZXh0cmFUb2tlbk1pbnQoYWRkcmVzcyBiZW5lZmljaWFyeSwgdWludCBfdG9rZW5zKSBleHRlcm5hbCBwYXlhYmxlIHNhbGVJc09uIG9ubHlPd25lciB7CiAgICAgCiAgICByZXF1aXJlKGJlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZSAoKGJzc1RvdGFsU3VwbHkgKyBfdG9rZW5zKSA8IGhhcmRjYXApOwogICAgCiAgICB1aW50IHdlaUFtb3VudCA9IF90b2tlbnMubXVsKHRva2VuX2lzb19wcmljZSk7CiAgICAgLy8gdXBkYXRlIHN0YXRlCiAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgIHRva2VuX21pbnQoIGJlbmVmaWNpYXJ5LCBfdG9rZW5zLCBtc2cudmFsdWUpOwogICAgIFRva2VuUHVyY2hhc2UobXNnLnNlbmRlciwgYmVuZWZpY2lhcnksIHdlaUFtb3VudCwgX3Rva2Vucyk7CgogICAgIC8vZm9yd2FyZEZ1bmRzKCk7CiAgICAgYnNzVG90YWxTdXBseSArPSBfdG9rZW5zOwogIH0KCiAgZnVuY3Rpb24gZ29hbFJlYWNoZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIGJzc1RvdGFsU3VwbHkgPj0gc29mdGNhcDsKICB9CiAgCiAgZnVuY3Rpb24gYm91bnR5X21pbmluZyAoKSBpbnRlcm5hbCB7CiAgICB1aW50IGJvdW50eV90b2tlbnMgPSBic3NUb3RhbFN1cGx5Lm11bChib3VudHlQZXJjZW50KS5kaXYoMTAwKTsKICAgIHVpbnQgdG1wX3ogPSAwOwogICAgdG9rZW5fbWludChvd25lcl93YWxsZXQsIGJvdW50eV90b2tlbnMsIHRtcF96KTsKICAgIGJzc1RvdGFsU3VwbHkgKz0gYm91bnR5X3Rva2VuczsKICAgIH0gIAogIAogIC8vIHZhdWx0IGZpbmFsaXphdGlvbiB0YXNrLCBjYWxsZWQgd2hlbiBvd25lciBjYWxscyBmaW5hbGl6ZSgpCiAgZnVuY3Rpb24gZmluYWxpemF0aW9uKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlIChub3cgPiBpY29fZmluaXNoKTsKICAgIGlmIChnb2FsUmVhY2hlZCgpKSB7CiAgICAgICAgYm91bnR5X21pbmluZyAoKTsKICAgICAgICBFdGhlclRha2VBZnRlclNvZnRjYXAgKCk7CiAgICAgICAgfSAKICAgIGVsc2UgewogICAgICAgIFJlZnVuZElDTyA9IHRydWU7ICAgIAogICAgfQogICAgaXNGaW5hbGl6ZWQgPSB0cnVlOwogICAgRmluYWxpemVkKCk7CiAgfSAgCgogIGZ1bmN0aW9uIGludmVzdG9yX1JlZnVuZCgpICBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKFJlZnVuZElDTyAmJiBpc0ZpbmFsaXplZCk7CiAgICAgICAgYWRkcmVzcyBpbnZlc3RvciA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludCBmb3JfcmVmdW5kID0gaWNvX2ludmVzdG9yW21zZy5zZW5kZXJdOwogICAgICAgIGludmVzdG9yLnRyYW5zZmVyKGZvcl9yZWZ1bmQpOwoKICB9CiAgCiAgZnVuY3Rpb24gRXRoZXJUYWtlQWZ0ZXJTb2Z0Y2FwICgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICByZXF1aXJlICggYnNzVG90YWxTdXBseSA+PSBzb2Z0Y2FwICk7CiAgICAgIHVpbnQgZm9yX2RldmVsb3BlciA9IHRoaXMuYmFsYW5jZTsKICAgICAgZm9yX2RldmVsb3BlciA9IGZvcl9kZXZlbG9wZXIubXVsKDYpLmRpdigxMDApOwogICAgICBkZXZlbG9wZXIudHJhbnNmZXIoZm9yX2RldmVsb3Blcik7CiAgICAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBpY29fYmFsYW5jZXNbX293bmVyXTsKICB9CiAgCiAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGljb19iYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGljb19iYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGljb19iYWxhbmNlc1tfdG9dID0gaWNvX2JhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9IAoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICBpY29fYmFsYW5jZXNbX3RvXSA9IGljb19iYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgaWNvX2JhbGFuY2VzW19mcm9tXSA9IGljb19iYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQogIAogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CgogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0gIAoKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQ=='.
	

]
