Class {
	#name : #SRTe386B139Ed3715Ca4B18Fd52671bDcea1cdFE4b1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe386B139Ed3715Ca4B18Fd52671bDcea1cdFE4b1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4gMC40LjEzOwoKY29udHJhY3QgTWlncmF0aW9uQWdlbnQgewogICAgZnVuY3Rpb24gbWlncmF0ZUZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBQcmVaZXVzVG9rZW4gewogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgYmFsYW5jZSk7Cn0KCmNvbnRyYWN0IE93bmVkIHsKCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgb3JhY2xlOwogICAgYWRkcmVzcyBwdWJsaWMgYnRjT3JhY2xlOwoKICAgIGZ1bmN0aW9uIE93bmVkKCkgcGF5YWJsZSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShvd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lck9yT3JhY2xlIHsKICAgICAgICByZXF1aXJlKG93bmVyID09IG1zZy5zZW5kZXIgfHwgb3JhY2xlID09IG1zZy5zZW5kZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyT3JCdGNPcmFjbGUgewogICAgICAgIHJlcXVpcmUob3duZXIgPT0gbXNnLnNlbmRlciB8fCBidGNPcmFjbGUgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9vd25lcikgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKF9vd25lciAhPSAwKTsKICAgICAgICBuZXdPd25lciA9IF9vd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBjb25maXJtT3duZXIoKSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIGRlbGV0ZSBuZXdPd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VPcmFjbGUoYWRkcmVzcyBfb3JhY2xlKSBvbmx5T3duZXIgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUoX29yYWNsZSAhPSAwKTsKICAgICAgICBvcmFjbGUgPSBfb3JhY2xlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUJ0Y09yYWNsZShhZGRyZXNzIF9idGNPcmFjbGUpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfYnRjT3JhY2xlICE9IDApOwogICAgICAgIGJ0Y09yYWNsZSA9IF9idGNPcmFjbGU7CiAgICB9Cn0KCmNvbnRyYWN0IEtub3duQ29udHJhY3QgewogICAgZnVuY3Rpb24gdHJhbnNmZXJlZChhZGRyZXNzIF9zZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlczMyW10gX2RhdGEpIGV4dGVybmFsOwp9Cgpjb250cmFjdCBFUkMyMCB7CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnModWludCk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyh1aW50KTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwp9Cgpjb250cmFjdCBTdGF0ZWZ1bCB7CiAgICBlbnVtIFN0YXRlIHsKICAgICAgICBJbml0aWFsLAogICAgICAgIFByaXZhdGVTYWxlLAogICAgICAgIFByZVNhbGUsCiAgICAgICAgV2FpdGluZ0ZvclNhbGUsCiAgICAgICAgU2FsZSwKICAgICAgICBDcm93ZHNhbGVDb21wbGV0ZWQsCiAgICAgICAgU2FsZUZhaWxlZAogICAgfQogICAgU3RhdGUgcHVibGljIHN0YXRlID0gU3RhdGUuSW5pdGlhbDsKCiAgICBldmVudCBTdGF0ZUNoYW5nZWQoU3RhdGUgb2xkU3RhdGUsIFN0YXRlIG5ld1N0YXRlKTsKCiAgICBmdW5jdGlvbiBzZXRTdGF0ZShTdGF0ZSBuZXdTdGF0ZSkgaW50ZXJuYWwgewogICAgICAgIFN0YXRlIG9sZFN0YXRlID0gc3RhdGU7CiAgICAgICAgc3RhdGUgPSBuZXdTdGF0ZTsKICAgICAgICBTdGF0ZUNoYW5nZWQob2xkU3RhdGUsIG5ld1N0YXRlKTsKICAgIH0KfQoKY29udHJhY3QgQ3Jvd2RzYWxlIGlzIE93bmVkLCBTdGF0ZWZ1bCB7CgogICAgdWludCBwdWJsaWMgZXRoZXJQcmljZVVTRFdFSTsKICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwogICAgdWludCBwdWJsaWMgdG90YWxMaW1pdFVTRFdFSTsKICAgIHVpbnQgcHVibGljIG1pbmltYWxTdWNjZXNzVVNEV0VJOwogICAgdWludCBwdWJsaWMgY29sbGVjdGVkVVNEV0VJOwoKICAgIHVpbnQgcHVibGljIGNyb3dkc2FsZVN0YXJ0VGltZTsKICAgIHVpbnQgcHVibGljIGNyb3dkc2FsZUZpbmlzaFRpbWU7CgogICAgc3RydWN0IEludmVzdG9yIHsKICAgICAgICB1aW50IGFtb3VudFRva2VuczsKICAgICAgICB1aW50IGFtb3VudFdlaTsKICAgIH0KCiAgICBzdHJ1Y3QgQnRjRGVwb3NpdCB7CiAgICAgICAgdWludCBhbW91bnRCVENXRUk7CiAgICAgICAgdWludCBidGNQcmljZVVTRFdFSTsKICAgICAgICBhZGRyZXNzIGludmVzdG9yOwogICAgfQoKICAgIG1hcHBpbmcoYnl0ZXMzMiA9PiBCdGNEZXBvc2l0KSBwdWJsaWMgYnRjRGVwb3NpdHM7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IEludmVzdG9yKSBwdWJsaWMgaW52ZXN0b3JzOwogICAgbWFwcGluZyh1aW50ID0+IGFkZHJlc3MpIHB1YmxpYyBpbnZlc3RvcnNJdGVyOwogICAgdWludCBwdWJsaWMgbnVtYmVyT2ZJbnZlc3RvcnM7CgogICAgbWFwcGluZyh1aW50ID0+IGFkZHJlc3MpIHB1YmxpYyBpbnZlc3RvcnNUb1dpdGhkcmF3SXRlcjsKICAgIHVpbnQgcHVibGljIG51bWJlck9mSW52ZXN0b3JzVG9XaXRoZHJhdzsKCiAgICBmdW5jdGlvbiBDcm93ZHNhbGUoKSBwYXlhYmxlIE93bmVkKCkge30KCiAgICAvL2Fic3RyYWN0IG1ldGhvZHMKICAgIGZ1bmN0aW9uIGVtaXRUb2tlbnMoYWRkcmVzcyBfaW52ZXN0b3IsIHVpbnQgX3Rva2VuUHJpY2VVU0RXRUksIHVpbnQgX3VzZHdlaSkgaW50ZXJuYWwgcmV0dXJucyh1aW50IHRva2Vuc1RvRW1pdCk7CgogICAgZnVuY3Rpb24gZW1pdEFkZGl0aW9uYWxUb2tlbnMoKSBpbnRlcm5hbDsKCiAgICBmdW5jdGlvbiBidXJuVG9rZW5zKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX2Ftb3VudCkgaW50ZXJuYWw7CgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIGNyb3dkc2FsZVN0YXRlIGxpbWl0Tm90RXhjZWVkZWQgewogICAgICAgIHVpbnQgdmFsdWVXRUkgPSBtc2cudmFsdWU7CiAgICAgICAgdWludCB2YWx1ZVVTRFdFSSA9IHZhbHVlV0VJICogZXRoZXJQcmljZVVTRFdFSSAvIDEgZXRoZXI7CiAgICAgICAgdWludCB0b2tlblByaWNlVVNEV0VJID0gZ2V0VG9rZW5QcmljZVVTRFdFSSh2YWx1ZVVTRFdFSSk7CgogICAgICAgIGlmIChjb2xsZWN0ZWRVU0RXRUkgKyB2YWx1ZVVTRFdFSSA+IHRvdGFsTGltaXRVU0RXRUkpIHsgLy8gZG9uJ3QgbmVlZCBzbyBtdWNoIGV0aGVyCiAgICAgICAgICAgIHZhbHVlVVNEV0VJID0gdG90YWxMaW1pdFVTRFdFSSAtIGNvbGxlY3RlZFVTRFdFSTsKICAgICAgICAgICAgdmFsdWVXRUkgPSB2YWx1ZVVTRFdFSSAqIDEgZXRoZXIgLyBldGhlclByaWNlVVNEV0VJOwogICAgICAgICAgICB1aW50IHdlaVRvUmV0dXJuID0gbXNnLnZhbHVlIC0gdmFsdWVXRUk7CiAgICAgICAgICAgIGJvb2wgaXNTZW50ID0gbXNnLnNlbmRlci5jYWxsLmdhcygzMDAwMDAwKS52YWx1ZSh3ZWlUb1JldHVybikoKTsKICAgICAgICAgICAgcmVxdWlyZShpc1NlbnQpOwogICAgICAgICAgICBjb2xsZWN0ZWRVU0RXRUkgPSB0b3RhbExpbWl0VVNEV0VJOyAvLyB0byBiZSBzdXJlISAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbGxlY3RlZFVTRFdFSSArPSB2YWx1ZVVTRFdFSTsKICAgICAgICB9CiAgICAgICAgZW1pdFRva2Vuc0Zvcihtc2cuc2VuZGVyLCB0b2tlblByaWNlVVNEV0VJLCB2YWx1ZVVTRFdFSSwgdmFsdWVXRUkpOwoKICAgIH0KCiAgICBmdW5jdGlvbiBkZXBvc2l0VVNEKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnRVU0RXRUkpIGV4dGVybmFsIG9ubHlPd25lciBjcm93ZHNhbGVTdGF0ZSBsaW1pdE5vdEV4Y2VlZGVkIHsKICAgICAgICB1aW50IHRva2VuUHJpY2VVU0RXRUkgPSBnZXRUb2tlblByaWNlVVNEV0VJKF9hbW91bnRVU0RXRUkpOwogICAgICAgIGNvbGxlY3RlZFVTRFdFSSArPSBfYW1vdW50VVNEV0VJOwogICAgICAgIGVtaXRUb2tlbnNGb3IoX3RvLCB0b2tlblByaWNlVVNEV0VJLCBfYW1vdW50VVNEV0VJLCAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZXBvc2l0QlRDKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnRCVENXRUksIHVpbnQgX2J0Y1ByaWNlVVNEV0VJLCBieXRlczMyIF9idGNUeElkKSBleHRlcm5hbCBvbmx5T3duZXJPckJ0Y09yYWNsZSBjcm93ZHNhbGVTdGF0ZSBsaW1pdE5vdEV4Y2VlZGVkIHsKICAgICAgICB1aW50IHZhbHVlVVNEV0VJID0gX2Ftb3VudEJUQ1dFSSAqIF9idGNQcmljZVVTRFdFSSAvIDEgZXRoZXI7CiAgICAgICAgdWludCB0b2tlblByaWNlVVNEV0VJID0gZ2V0VG9rZW5QcmljZVVTRFdFSSh2YWx1ZVVTRFdFSSk7CiAgICAgICAgQnRjRGVwb3NpdCBzdG9yYWdlIGJ0Y0RlcCA9IGJ0Y0RlcG9zaXRzW19idGNUeElkXTsKICAgICAgICByZXF1aXJlKGJ0Y0RlcC5hbW91bnRCVENXRUkgPT0gMCk7CiAgICAgICAgYnRjRGVwLmFtb3VudEJUQ1dFSSA9IF9hbW91bnRCVENXRUk7CiAgICAgICAgYnRjRGVwLmJ0Y1ByaWNlVVNEV0VJID0gX2J0Y1ByaWNlVVNEV0VJOwogICAgICAgIGJ0Y0RlcC5pbnZlc3RvciA9IF90bzsKICAgICAgICBjb2xsZWN0ZWRVU0RXRUkgKz0gdmFsdWVVU0RXRUk7CiAgICAgICAgZW1pdFRva2Vuc0ZvcihfdG8sIHRva2VuUHJpY2VVU0RXRUksIHZhbHVlVVNEV0VJLCAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBlbWl0VG9rZW5zRm9yKGFkZHJlc3MgX2ludmVzdG9yLCB1aW50IF90b2tlblByaWNlVVNEV0VJLCB1aW50IF92YWx1ZVVTRFdFSSwgdWludCBfdmFsdWVXRUkpIGludGVybmFsIHsKICAgICAgICB2YXIgZW1pdHRlZFRva2VucyA9IGVtaXRUb2tlbnMoX2ludmVzdG9yLCBfdG9rZW5QcmljZVVTRFdFSSwgX3ZhbHVlVVNEV0VJKTsKICAgICAgICBJbnZlc3RvciBzdG9yYWdlIGludiA9IGludmVzdG9yc1tfaW52ZXN0b3JdOwogICAgICAgIGlmIChpbnYuYW1vdW50VG9rZW5zID09IDApIHsgLy8gbmV3IGludmVzdG9yCiAgICAgICAgICAgIGludmVzdG9yc0l0ZXJbbnVtYmVyT2ZJbnZlc3RvcnMrK10gPSBfaW52ZXN0b3I7CiAgICAgICAgfQogICAgICAgIGludi5hbW91bnRUb2tlbnMgKz0gZW1pdHRlZFRva2VuczsKICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuU2FsZSkgewogICAgICAgICAgICBpbnYuYW1vdW50V2VpICs9IF92YWx1ZVdFSTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VG9rZW5QcmljZVVTRFdFSSh1aW50IF92YWx1ZVVTRFdFSSkgaW50ZXJuYWwgcmV0dXJucyh1aW50IHRva2VuUHJpY2VVU0RXRUkpIHsKICAgICAgICB0b2tlblByaWNlVVNEV0VJID0gMDsKICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuUHJpdmF0ZVNhbGUpIHsKICAgICAgICAgICAgdG9rZW5QcmljZVVTRFdFSSA9IDYwMDAwMDAwMDAwMDAwMDA7CiAgICAgICAgfQogICAgICAgIGlmIChzdGF0ZSA9PSBTdGF0ZS5QcmVTYWxlKSB7CiAgICAgICAgICAgIHJlcXVpcmUobm93IDwgY3Jvd2RzYWxlRmluaXNoVGltZSk7CiAgICAgICAgICAgIHRva2VuUHJpY2VVU0RXRUkgPSA3MDAwMDAwMDAwMDAwMDAwOwogICAgICAgIH0KICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuU2FsZSkgewogICAgICAgICAgICByZXF1aXJlKG5vdyA8IGNyb3dkc2FsZUZpbmlzaFRpbWUpOwogICAgICAgICAgICBpZiAobm93IDwgY3Jvd2RzYWxlU3RhcnRUaW1lICsgMSBkYXlzKSB7CiAgICAgICAgICAgICAgICBpZiAoX3ZhbHVlVVNEV0VJID4gMzAwMDAgKiAxIGV0aGVyKSB7CiAgICAgICAgICAgICAgICAgICAgdG9rZW5QcmljZVVTRFdFSSA9IDc1MDAwMDAwMDAwMDAwMDA7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRva2VuUHJpY2VVU0RXRUkgPSA4NTAwMDAwMDAwMDAwMDAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKG5vdyA8IGNyb3dkc2FsZVN0YXJ0VGltZSArIDEgd2Vla3MpIHsKICAgICAgICAgICAgICAgIHRva2VuUHJpY2VVU0RXRUkgPSA5MDAwMDAwMDAwMDAwMDAwOwogICAgICAgICAgICB9IGVsc2UgaWYgKG5vdyA8IGNyb3dkc2FsZVN0YXJ0VGltZSArIDIgd2Vla3MpIHsKICAgICAgICAgICAgICAgIHRva2VuUHJpY2VVU0RXRUkgPSA5NTAwMDAwMDAwMDAwMDAwOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdG9rZW5QcmljZVVTRFdFSSA9IDEwMDAwMDAwMDAwMDAwMDAwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0UHJpdmF0ZVNhbGUoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQgX2V0aGVyUHJpY2VVU0RXRUksIHVpbnQgX3RvdGFsTGltaXRVU0RXRUkpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5Jbml0aWFsKTsKICAgICAgICBiZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgICAgICBldGhlclByaWNlVVNEV0VJID0gX2V0aGVyUHJpY2VVU0RXRUk7CiAgICAgICAgdG90YWxMaW1pdFVTRFdFSSA9IF90b3RhbExpbWl0VVNEV0VJOwogICAgICAgIGNyb3dkc2FsZVN0YXJ0VGltZSA9IG5vdzsKICAgICAgICBzZXRTdGF0ZShTdGF0ZS5Qcml2YXRlU2FsZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZmluaXNoUHJpdmF0ZVNhbGVBbmRTdGFydFByZVNhbGUoCiAgICAgICAgYWRkcmVzcyBfYmVuZWZpY2lhcnksCiAgICAgICAgdWludCBfZXRoZXJQcmljZVVTRFdFSSwKICAgICAgICB1aW50IF90b3RhbExpbWl0VVNEV0VJLAogICAgICAgIHVpbnQgX2Nyb3dkc2FsZUR1cmF0aW9uRGF5cykgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5Qcml2YXRlU2FsZSk7CgogICAgICAgIGJvb2wgaXNTZW50ID0gYmVuZWZpY2lhcnkuY2FsbC5nYXMoMzAwMDAwMCkudmFsdWUodGhpcy5iYWxhbmNlKSgpOwogICAgICAgIHJlcXVpcmUoaXNTZW50KTsKCiAgICAgICAgY3Jvd2RzYWxlU3RhcnRUaW1lID0gbm93OwogICAgICAgIGJlbmVmaWNpYXJ5ID0gX2JlbmVmaWNpYXJ5OwogICAgICAgIGV0aGVyUHJpY2VVU0RXRUkgPSBfZXRoZXJQcmljZVVTRFdFSTsKICAgICAgICB0b3RhbExpbWl0VVNEV0VJID0gX3RvdGFsTGltaXRVU0RXRUk7CiAgICAgICAgY3Jvd2RzYWxlRmluaXNoVGltZSA9IG5vdyArIF9jcm93ZHNhbGVEdXJhdGlvbkRheXMgKiAxIGRheXM7CiAgICAgICAgY29sbGVjdGVkVVNEV0VJID0gMDsKICAgICAgICBzZXRTdGF0ZShTdGF0ZS5QcmVTYWxlKTsKICAgIH0KCgogICAgZnVuY3Rpb24gZmluaXNoUHJlU2FsZSgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUHJlU2FsZSk7CiAgICAgICAgYm9vbCBpc1NlbnQgPSBiZW5lZmljaWFyeS5jYWxsLmdhcygzMDAwMDAwKS52YWx1ZSh0aGlzLmJhbGFuY2UpKCk7CiAgICAgICAgcmVxdWlyZShpc1NlbnQpOwogICAgICAgIHNldFN0YXRlKFN0YXRlLldhaXRpbmdGb3JTYWxlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdGFydFNhbGUoCiAgICAgICAgYWRkcmVzcyBfYmVuZWZpY2lhcnksCiAgICAgICAgdWludCBfZXRoZXJQcmljZVVTRFdFSSwKICAgICAgICB1aW50IF90b3RhbExpbWl0VVNEV0VJLAogICAgICAgIHVpbnQgX2Nyb3dkc2FsZUR1cmF0aW9uRGF5cywKICAgICAgICB1aW50IF9taW5pbWFsU3VjY2Vzc1VTRFdFSSkgZXh0ZXJuYWwgb25seU93bmVyIHsKCiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5XYWl0aW5nRm9yU2FsZSk7CiAgICAgICAgY3Jvd2RzYWxlU3RhcnRUaW1lID0gbm93OwogICAgICAgIGJlbmVmaWNpYXJ5ID0gX2JlbmVmaWNpYXJ5OwogICAgICAgIGV0aGVyUHJpY2VVU0RXRUkgPSBfZXRoZXJQcmljZVVTRFdFSTsKICAgICAgICB0b3RhbExpbWl0VVNEV0VJID0gX3RvdGFsTGltaXRVU0RXRUk7CiAgICAgICAgY3Jvd2RzYWxlRmluaXNoVGltZSA9IG5vdyArIF9jcm93ZHNhbGVEdXJhdGlvbkRheXMgKiAxIGRheXM7CiAgICAgICAgbWluaW1hbFN1Y2Nlc3NVU0RXRUkgPSBfbWluaW1hbFN1Y2Nlc3NVU0RXRUk7CiAgICAgICAgY29sbGVjdGVkVVNEV0VJID0gMDsKICAgICAgICBzZXRTdGF0ZShTdGF0ZS5TYWxlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmYWlsU2FsZSh1aW50IF9pbnZlc3RvcnNUb1Byb2Nlc3MpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5TYWxlKTsKICAgICAgICByZXF1aXJlKG5vdyA+PSBjcm93ZHNhbGVGaW5pc2hUaW1lICYmIGNvbGxlY3RlZFVTRFdFSSA8IG1pbmltYWxTdWNjZXNzVVNEV0VJKTsKICAgICAgICB3aGlsZSAoX2ludmVzdG9yc1RvUHJvY2VzcyA+IDAgJiYgbnVtYmVyT2ZJbnZlc3RvcnMgPiAwKSB7CiAgICAgICAgICAgIGFkZHJlc3MgYWRkciA9IGludmVzdG9yc0l0ZXJbLS1udW1iZXJPZkludmVzdG9yc107CiAgICAgICAgICAgIEludmVzdG9yIG1lbW9yeSBpbnYgPSBpbnZlc3RvcnNbYWRkcl07CiAgICAgICAgICAgIGJ1cm5Ub2tlbnMoYWRkciwgaW52LmFtb3VudFRva2Vucyk7CiAgICAgICAgICAgIC0tX2ludmVzdG9yc1RvUHJvY2VzczsKICAgICAgICAgICAgZGVsZXRlIGludmVzdG9yc0l0ZXJbbnVtYmVyT2ZJbnZlc3RvcnNdOwoKICAgICAgICAgICAgaW52ZXN0b3JzVG9XaXRoZHJhd0l0ZXJbbnVtYmVyT2ZJbnZlc3RvcnNUb1dpdGhkcmF3XSA9IGFkZHI7CiAgICAgICAgICAgIG51bWJlck9mSW52ZXN0b3JzVG9XaXRoZHJhdysrOwogICAgICAgIH0KICAgICAgICBpZiAobnVtYmVyT2ZJbnZlc3RvcnMgPiAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgc2V0U3RhdGUoU3RhdGUuU2FsZUZhaWxlZCk7CiAgICB9CgogICAgZnVuY3Rpb24gY29tcGxldGVTYWxlKHVpbnQgX2ludmVzdG9yc1RvUHJvY2VzcykgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5TYWxlKTsKICAgICAgICByZXF1aXJlKGNvbGxlY3RlZFVTRFdFSSA+PSBtaW5pbWFsU3VjY2Vzc1VTRFdFSSk7CgogICAgICAgIHdoaWxlIChfaW52ZXN0b3JzVG9Qcm9jZXNzID4gMCAmJiBudW1iZXJPZkludmVzdG9ycyA+IDApIHsKICAgICAgICAgICAgLS1udW1iZXJPZkludmVzdG9yczsKICAgICAgICAgICAgLS1faW52ZXN0b3JzVG9Qcm9jZXNzOwogICAgICAgICAgICBkZWxldGUgaW52ZXN0b3JzW2ludmVzdG9yc0l0ZXJbbnVtYmVyT2ZJbnZlc3RvcnNdXTsKICAgICAgICAgICAgZGVsZXRlIGludmVzdG9yc0l0ZXJbbnVtYmVyT2ZJbnZlc3RvcnNdOwogICAgICAgIH0KCiAgICAgICAgaWYgKG51bWJlck9mSW52ZXN0b3JzID4gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBlbWl0QWRkaXRpb25hbFRva2VucygpOwoKICAgICAgICBib29sIGlzU2VudCA9IGJlbmVmaWNpYXJ5LmNhbGwuZ2FzKDMwMDAwMDApLnZhbHVlKHRoaXMuYmFsYW5jZSkoKTsKICAgICAgICByZXF1aXJlKGlzU2VudCk7CiAgICAgICAgc2V0U3RhdGUoU3RhdGUuQ3Jvd2RzYWxlQ29tcGxldGVkKTsKICAgIH0KCgogICAgZnVuY3Rpb24gc2V0RXRoZXJQcmljZVVTRFdFSSh1aW50IF9ldGhlclByaWNlVVNEV0VJKSBleHRlcm5hbCBvbmx5T3duZXJPck9yYWNsZSB7CiAgICAgICAgZXRoZXJQcmljZVVTRFdFSSA9IF9ldGhlclByaWNlVVNEV0VJOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJlbmVmaWNpYXJ5KGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IDApOwogICAgICAgIGJlbmVmaWNpYXJ5ID0gX2JlbmVmaWNpYXJ5OwogICAgfQoKICAgIC8vIFRoaXMgZnVuY3Rpb24gbXVzdCBiZSBjYWxsZWQgYnkgdG9rZW4gaG9sZGVyIGluIGNhc2Ugb2YgY3Jvd2RzYWxlIGZhaWxlZAogICAgZnVuY3Rpb24gd2l0aGRyYXdCYWNrKCkgZXh0ZXJuYWwgc2FsZUZhaWxlZFN0YXRlIHsKICAgICAgICByZXR1cm5JbnZlc3RtZW50c1RvSW50ZXJuYWwobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gcmV0dXJuSW52ZXN0bWVudHModWludCBfaW52ZXN0b3JzVG9Qcm9jZXNzKSBwdWJsaWMgc2FsZUZhaWxlZFN0YXRlIHsKICAgICAgICB3aGlsZSAoX2ludmVzdG9yc1RvUHJvY2VzcyA+IDAgJiYgbnVtYmVyT2ZJbnZlc3RvcnNUb1dpdGhkcmF3ID4gMCkgewogICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBpbnZlc3RvcnNUb1dpdGhkcmF3SXRlclstLW51bWJlck9mSW52ZXN0b3JzVG9XaXRoZHJhd107CiAgICAgICAgICAgIGRlbGV0ZSBpbnZlc3RvcnNUb1dpdGhkcmF3SXRlcltudW1iZXJPZkludmVzdG9yc1RvV2l0aGRyYXddOwogICAgICAgICAgICAtLV9pbnZlc3RvcnNUb1Byb2Nlc3M7CiAgICAgICAgICAgIHJldHVybkludmVzdG1lbnRzVG9JbnRlcm5hbChhZGRyKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmV0dXJuSW52ZXN0bWVudHNUbyhhZGRyZXNzIF90bykgcHVibGljIHNhbGVGYWlsZWRTdGF0ZSB7CiAgICAgICAgcmV0dXJuSW52ZXN0bWVudHNUb0ludGVybmFsKF90byk7CiAgICB9CgogICAgZnVuY3Rpb24gcmV0dXJuSW52ZXN0bWVudHNUb0ludGVybmFsKGFkZHJlc3MgX3RvKSBpbnRlcm5hbCB7CiAgICAgICAgSW52ZXN0b3IgbWVtb3J5IGludiA9IGludmVzdG9yc1tfdG9dOwogICAgICAgIHVpbnQgdmFsdWUgPSBpbnYuYW1vdW50V2VpOwogICAgICAgIGlmICh2YWx1ZSA+IDApIHsKICAgICAgICAgICAgZGVsZXRlIGludmVzdG9yc1tfdG9dOwogICAgICAgICAgICByZXF1aXJlKF90by5jYWxsLmdhcygzMDAwMDAwKS52YWx1ZSh2YWx1ZSkoKSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RnVuZHModWludCBfdmFsdWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUHJpdmF0ZVNhbGUgfHwgc3RhdGUgPT0gU3RhdGUuUHJlU2FsZSB8fCAoc3RhdGUgPT0gU3RhdGUuU2FsZSAmJiBjb2xsZWN0ZWRVU0RXRUkgPiBtaW5pbWFsU3VjY2Vzc1VTRFdFSSkpOwogICAgICAgIGlmIChfdmFsdWUgPT0gMCkgewogICAgICAgICAgICBfdmFsdWUgPSB0aGlzLmJhbGFuY2U7CiAgICAgICAgfQogICAgICAgIGJvb2wgaXNTZW50ID0gYmVuZWZpY2lhcnkuY2FsbC5nYXMoMzAwMDAwMCkudmFsdWUoX3ZhbHVlKSgpOwogICAgICAgIHJlcXVpcmUoaXNTZW50KTsKICAgIH0KCiAgICBtb2RpZmllciBsaW1pdE5vdEV4Y2VlZGVkIHsKICAgICAgICByZXF1aXJlKGNvbGxlY3RlZFVTRFdFSSA8IHRvdGFsTGltaXRVU0RXRUkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgY3Jvd2RzYWxlU3RhdGUgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUHJpdmF0ZVNhbGUgfHwgc3RhdGUgPT0gU3RhdGUuUHJlU2FsZSB8fCBzdGF0ZSA9PSBTdGF0ZS5TYWxlKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHNhbGVGYWlsZWRTdGF0ZSB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5TYWxlRmFpbGVkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGNvbXBsZXRlZFNhbGVTdGF0ZSB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5Dcm93ZHNhbGVDb21wbGV0ZWQpOwogICAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IFRva2VuIGlzIENyb3dkc2FsZSwgRVJDMjAgewoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBpbnRlcm5hbCBiYWxhbmNlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkpIHB1YmxpYyBhbGxvd2VkOwogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gODsKCiAgICBmdW5jdGlvbiBUb2tlbigpIHBheWFibGUgQ3Jvd2RzYWxlKCkge30KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1t3aG9dOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIGNvbXBsZXRlZFNhbGVTdGF0ZSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+PSBiYWxhbmNlc1tfdG9dKTsgLy8gb3ZlcmZsb3cKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyBjb21wbGV0ZWRTYWxlU3RhdGUgb25seVBheWxvYWRTaXplKDMgKiAzMikgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID49IGJhbGFuY2VzW190b10pOyAvLyBvdmVyZmxvdwogICAgICAgIHJlcXVpcmUoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHB1YmxpYyBjb21wbGV0ZWRTYWxlU3RhdGUgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IGNvbXBsZXRlZFNhbGVTdGF0ZSByZXR1cm5zKHVpbnQgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgICAgIHJlcXVpcmUobXNnLmRhdGEubGVuZ3RoID49IHNpemUgKyA0KTsKICAgICAgICBfOwogICAgfQp9Cgpjb250cmFjdCBNaWdyYXRhYmxlVG9rZW4gaXMgVG9rZW4gewoKICAgIGZ1bmN0aW9uIE1pZ3JhdGFibGVUb2tlbigpIHBheWFibGUgVG9rZW4oKSB7fQoKICAgIGFkZHJlc3MgcHVibGljIG1pZ3JhdGlvbkFnZW50OwogICAgdWludCBwdWJsaWMgdG90YWxNaWdyYXRlZDsKICAgIGFkZHJlc3MgcHVibGljIG1pZ3JhdGlvbkhvc3Q7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgbWlncmF0ZWRJbnZlc3RvcnM7CgogICAgZXZlbnQgTWlncmF0ZWQoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CgogICAgZnVuY3Rpb24gc2V0TWlncmF0aW9uSG9zdChhZGRyZXNzIF9hZGRyZXNzKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3MgIT0gMCk7CiAgICAgICAgbWlncmF0aW9uSG9zdCA9IF9hZGRyZXNzOwogICAgfQoKICAgIC8vbWFudWFsIG1pZ3JhdGlvbiBieSBvd25lcgogICAgZnVuY3Rpb24gbWlncmF0ZUludmVzdG9yRnJvbUhvc3QoYWRkcmVzcyBfYWRkcmVzcykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1pZ3JhdGlvbkhvc3QgIT0gMCAmJiBzdGF0ZSAhPSBTdGF0ZS5TYWxlRmFpbGVkICYmIG1pZ3JhdGVkSW52ZXN0b3JzW19hZGRyZXNzXSA9PSBmYWxzZSk7CiAgICAgICAgUHJlWmV1c1Rva2VuIHByZVpldXMgPSBQcmVaZXVzVG9rZW4obWlncmF0aW9uSG9zdCk7CiAgICAgICAgdWludCB0b2tlbnNUb1RyYW5zZmVyID0gcHJlWmV1cy5iYWxhbmNlT2YoX2FkZHJlc3MpOwogICAgICAgIHJlcXVpcmUodG9rZW5zVG9UcmFuc2ZlciA+IDApOwoKICAgICAgICBiYWxhbmNlc1tfYWRkcmVzc10gPSB0b2tlbnNUb1RyYW5zZmVyOwogICAgICAgIHRvdGFsU3VwcGx5ICs9IHRva2Vuc1RvVHJhbnNmZXI7CiAgICAgICAgbWlncmF0ZWRJbnZlc3RvcnNbX2FkZHJlc3NdID0gdHJ1ZTsKCiAgICAgICAgaWYgKHN0YXRlICE9IFN0YXRlLkNyb3dkc2FsZUNvbXBsZXRlZCkgewogICAgICAgICAgICBJbnZlc3RvciBzdG9yYWdlIGludiA9IGludmVzdG9yc1tfYWRkcmVzc107CiAgICAgICAgICAgIGludmVzdG9yc0l0ZXJbbnVtYmVyT2ZJbnZlc3RvcnMrK10gPSBfYWRkcmVzczsKICAgICAgICAgICAgaW52LmFtb3VudFRva2VucyArPSB0b2tlbnNUb1RyYW5zZmVyOwogICAgICAgIH0KCiAgICAgICAgVHJhbnNmZXIodGhpcywgX2FkZHJlc3MsIHRva2Vuc1RvVHJhbnNmZXIpOwogICAgfQoKICAgIC8vbWlncmF0aW9uIGJ5IGludmVzdG9yCiAgICBmdW5jdGlvbiBtaWdyYXRlKCkgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUobWlncmF0aW9uQWdlbnQgIT0gMCk7CiAgICAgICAgdWludCB2YWx1ZSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IHZhbHVlOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIHRoaXMsIHZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSAtPSB2YWx1ZTsKICAgICAgICB0b3RhbE1pZ3JhdGVkICs9IHZhbHVlOwogICAgICAgIE1pZ3JhdGlvbkFnZW50KG1pZ3JhdGlvbkFnZW50KS5taWdyYXRlRnJvbShtc2cuc2VuZGVyLCB2YWx1ZSk7CiAgICAgICAgTWlncmF0ZWQobXNnLnNlbmRlciwgbWlncmF0aW9uQWdlbnQsIHZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRNaWdyYXRpb25BZ2VudChhZGRyZXNzIF9hZ2VudCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1pZ3JhdGlvbkFnZW50ID09IDApOwogICAgICAgIG1pZ3JhdGlvbkFnZW50ID0gX2FnZW50OwogICAgfQp9Cgpjb250cmFjdCBaZXVzVG9rZW4gaXMgTWlncmF0YWJsZVRva2VuIHsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJaU1QiOwoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJaZXVzIFRva2VuIjsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFsbG93ZWRDb250cmFjdHM7CgogICAgZnVuY3Rpb24gWmV1c1Rva2VuKCkgcGF5YWJsZSBNaWdyYXRhYmxlVG9rZW4oKSB7fQoKICAgIGZ1bmN0aW9uIGVtaXRUb2tlbnMoYWRkcmVzcyBfaW52ZXN0b3IsIHVpbnQgX3Rva2VuUHJpY2VVU0RXRUksIHVpbnQgX3ZhbHVlVVNEV0VJKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQgdG9rZW5zVG9FbWl0KSB7CiAgICAgICAgdG9rZW5zVG9FbWl0ID0gKF92YWx1ZVVTRFdFSSAqICgxMCAqKiB1aW50KGRlY2ltYWxzKSkpIC8gX3Rva2VuUHJpY2VVU0RXRUk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfaW52ZXN0b3JdICsgdG9rZW5zVG9FbWl0ID4gYmFsYW5jZXNbX2ludmVzdG9yXSk7IC8vIG92ZXJmbG93CiAgICAgICAgcmVxdWlyZSh0b2tlbnNUb0VtaXQgPiAwKTsKICAgICAgICBiYWxhbmNlc1tfaW52ZXN0b3JdICs9IHRva2Vuc1RvRW1pdDsKICAgICAgICB0b3RhbFN1cHBseSArPSB0b2tlbnNUb0VtaXQ7CiAgICAgICAgVHJhbnNmZXIodGhpcywgX2ludmVzdG9yLCB0b2tlbnNUb0VtaXQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGVtaXRBZGRpdGlvbmFsVG9rZW5zKCkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgdG9rZW5zVG9FbWl0ID0gdG90YWxTdXBwbHkgKiAxMDAwIC8gNzA1IC0gdG90YWxTdXBwbHk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tiZW5lZmljaWFyeV0gKyB0b2tlbnNUb0VtaXQgPiBiYWxhbmNlc1tiZW5lZmljaWFyeV0pOyAvLyBvdmVyZmxvdwogICAgICAgIHJlcXVpcmUodG9rZW5zVG9FbWl0ID4gMCk7CiAgICAgICAgYmFsYW5jZXNbYmVuZWZpY2lhcnldICs9IHRva2Vuc1RvRW1pdDsKICAgICAgICB0b3RhbFN1cHBseSArPSB0b2tlbnNUb0VtaXQ7CiAgICAgICAgVHJhbnNmZXIodGhpcywgYmVuZWZpY2lhcnksIHRva2Vuc1RvRW1pdCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnVyblRva2VucyhhZGRyZXNzIF9hZGRyZXNzLCB1aW50IF9hbW91bnQpIGludGVybmFsIHsKICAgICAgICBiYWxhbmNlc1tfYWRkcmVzc10gLT0gX2Ftb3VudDsKICAgICAgICB0b3RhbFN1cHBseSAtPSBfYW1vdW50OwogICAgICAgIFRyYW5zZmVyKF9hZGRyZXNzLCB0aGlzLCBfYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRBbGxvd2VkQ29udHJhY3QoYWRkcmVzcyBfYWRkcmVzcykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9hZGRyZXNzICE9IDApOwogICAgICAgIGFsbG93ZWRDb250cmFjdHNbX2FkZHJlc3NdID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVBbGxvd2VkQ29udHJhY3QoYWRkcmVzcyBfYWRkcmVzcykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9hZGRyZXNzICE9IDApOwogICAgICAgIGRlbGV0ZSBhbGxvd2VkQ29udHJhY3RzW19hZGRyZXNzXTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvS25vd25Db250cmFjdChhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzMzJbXSBfZGF0YSkgZXh0ZXJuYWwgb25seUFsbG93ZWRDb250cmFjdHMoX3RvKSB7CiAgICAgICAgdmFyIGtub3duQ29udHJhY3QgPSBLbm93bkNvbnRyYWN0KF90byk7CiAgICAgICAgdHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgICAgIGtub3duQ29udHJhY3QudHJhbnNmZXJlZChtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5QWxsb3dlZENvbnRyYWN0cyhhZGRyZXNzIF9hZGRyZXNzKSB7CiAgICAgICAgcmVxdWlyZShhbGxvd2VkQ29udHJhY3RzW19hZGRyZXNzXSA9PSB0cnVlKTsKICAgICAgICBfOwogICAgfQp9'.
	

]
