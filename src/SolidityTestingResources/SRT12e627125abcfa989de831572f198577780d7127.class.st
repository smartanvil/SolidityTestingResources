Class {
	#name : #SRT12e627125abcfa989de831572f198577780d7127,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT12e627125abcfa989de831572f198577780d7127 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuNDsKCmxpYnJhcnkgQXJyYXlMaWJ7CiAgZnVuY3Rpb24gZmluZEFkZHJlc3MoYWRkcmVzcyBhLCBhZGRyZXNzW10gc3RvcmFnZSBhcnJ5KSByZXR1cm5zIChpbnQpewogICAgZm9yICh1aW50IGkgPSAwIDsgaSA8IGFycnkubGVuZ3RoIDsgaSsrKXsKICAgICAgaWYoYXJyeVtpXSA9PSBhKXtyZXR1cm4gaW50KGkpO30KICAgIH0KICAgIHJldHVybiAtMTsKICB9CiAgZnVuY3Rpb24gcmVtb3ZlQWRkcmVzcyh1aW50IGksIGFkZHJlc3NbXSBzdG9yYWdlIGFycnkpewogICAgdWludCBsZW5ndGhNaW51c09uZSA9IGFycnkubGVuZ3RoIC0gMTsKICAgIGFycnlbaV0gPSBhcnJ5W2xlbmd0aE1pbnVzT25lXTsKICAgIGRlbGV0ZSBhcnJ5W2xlbmd0aE1pbnVzT25lXTsKICAgIGFycnkubGVuZ3RoID0gbGVuZ3RoTWludXNPbmU7CiAgfQp9Cgpjb250cmFjdCBPd25lZCB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgbW9kaWZpZXIgb25seU93bmVyKCl7IGlmIChpc093bmVyKG1zZy5zZW5kZXIpKSBfOyB9CiAgbW9kaWZpZXIgaWZPd25lcihhZGRyZXNzIHNlbmRlcikgeyBpZihpc093bmVyKHNlbmRlcikpIF87IH0KCiAgZnVuY3Rpb24gT3duZWQoKXsgb3duZXIgPSBtc2cuc2VuZGVyOyB9CgogIGZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBhZGRyKSBwdWJsaWMgcmV0dXJucyhib29sKSB7IHJldHVybiBhZGRyID09IG93bmVyOyB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX293bmVyKSBvbmx5T3duZXIgeyBvd25lciA9IF9vd25lcjsgfQp9Cgpjb250cmFjdCBQcm94eSBpcyBPd25lZCB7CiAgZXZlbnQgRm9yd2FyZGVkIChhZGRyZXNzIGluZGV4ZWQgZGVzdGluYXRpb24sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEgKTsKICBldmVudCBSZWNlaXZlZCAoYWRkcmVzcyBpbmRleGVkIHNlbmRlciwgdWludCB2YWx1ZSk7CgogIGZ1bmN0aW9uICgpIHBheWFibGUgeyBSZWNlaXZlZChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOyB9CgogIGZ1bmN0aW9uIGZvcndhcmQoYWRkcmVzcyBkZXN0aW5hdGlvbiwgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkgb25seU93bmVyIHsKICAgIGlmICghZGVzdGluYXRpb24uY2FsbC52YWx1ZSh2YWx1ZSkoZGF0YSkpIHsgdGhyb3c7IH0KICAgIEZvcndhcmRlZChkZXN0aW5hdGlvbiwgdmFsdWUsIGRhdGEpOwogIH0KfQoKY29udHJhY3QgUmVjb3ZlcmFibGVDb250cm9sbGVyIHsKICB1aW50ICAgIHB1YmxpYyB2ZXJzaW9uOwogIFByb3h5ICAgcHVibGljIHByb3h5OwoKICBhZGRyZXNzIHB1YmxpYyB1c2VyS2V5OwogIGFkZHJlc3MgcHVibGljIHByb3Bvc2VkVXNlcktleTsKICB1aW50ICAgIHB1YmxpYyBwcm9wb3NlZFVzZXJLZXlQZW5kaW5nVW50aWw7CgogIGFkZHJlc3MgcHVibGljIHJlY292ZXJ5S2V5OwogIGFkZHJlc3MgcHVibGljIHByb3Bvc2VkUmVjb3ZlcnlLZXk7CiAgdWludCAgICBwdWJsaWMgcHJvcG9zZWRSZWNvdmVyeUtleVBlbmRpbmdVbnRpbDsKCiAgYWRkcmVzcyBwdWJsaWMgcHJvcG9zZWRDb250cm9sbGVyOwogIHVpbnQgICAgcHVibGljIHByb3Bvc2VkQ29udHJvbGxlclBlbmRpbmdVbnRpbDsKCiAgdWludCAgICBwdWJsaWMgc2hvcnRUaW1lTG9jazsvLyB1c2UgOTAwIGZvciAxNSBtaW51dGVzCiAgdWludCAgICBwdWJsaWMgbG9uZ1RpbWVMb2NrOyAvLyB1c2UgMjU5MjAwIGZvciAzIGRheXMKCiAgZXZlbnQgUmVjb3ZlcnlFdmVudChzdHJpbmcgYWN0aW9uLCBhZGRyZXNzIGluaXRpYXRlZEJ5KTsKCiAgbW9kaWZpZXIgb25seVVzZXJLZXkoKSB7IGlmIChtc2cuc2VuZGVyID09IHVzZXJLZXkpIF87IH0KICBtb2RpZmllciBvbmx5UmVjb3ZlcnlLZXkoKSB7IGlmIChtc2cuc2VuZGVyID09IHJlY292ZXJ5S2V5KSBfOyB9CgogIGZ1bmN0aW9uIFJlY292ZXJhYmxlQ29udHJvbGxlcihhZGRyZXNzIHByb3h5QWRkcmVzcywgYWRkcmVzcyBfdXNlcktleSwgdWludCBfbG9uZ1RpbWVMb2NrLCB1aW50IF9zaG9ydFRpbWVMb2NrKSB7CiAgICB2ZXJzaW9uID0gMTsKICAgIHByb3h5ID0gUHJveHkocHJveHlBZGRyZXNzKTsKICAgIHVzZXJLZXkgPSBfdXNlcktleTsKICAgIHNob3J0VGltZUxvY2sgPSBfc2hvcnRUaW1lTG9jazsKICAgIGxvbmdUaW1lTG9jayA9IF9sb25nVGltZUxvY2s7CiAgICByZWNvdmVyeUtleSA9IG1zZy5zZW5kZXI7CiAgfQoKICBmdW5jdGlvbiBmb3J3YXJkKGFkZHJlc3MgZGVzdGluYXRpb24sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEpIG9ubHlVc2VyS2V5IHsKICAgIHByb3h5LmZvcndhcmQoZGVzdGluYXRpb24sIHZhbHVlLCBkYXRhKTsKICB9CiAgLy9wYXNzIDB4MCB0byBjYW5jZWwgCiAgZnVuY3Rpb24gc2lnblJlY292ZXJ5Q2hhbmdlKGFkZHJlc3MgX3Byb3Bvc2VkUmVjb3ZlcnlLZXkpIG9ubHlVc2VyS2V5ewogICAgcHJvcG9zZWRSZWNvdmVyeUtleVBlbmRpbmdVbnRpbCA9IG5vdyArIGxvbmdUaW1lTG9jazsKICAgIHByb3Bvc2VkUmVjb3ZlcnlLZXkgPSBfcHJvcG9zZWRSZWNvdmVyeUtleTsKICAgIFJlY292ZXJ5RXZlbnQoInNpZ25SZWNvdmVyeUNoYW5nZSIsIG1zZy5zZW5kZXIpOwogIH0KICBmdW5jdGlvbiBjaGFuZ2VSZWNvdmVyeSgpIHsKICAgIGlmKHByb3Bvc2VkUmVjb3ZlcnlLZXlQZW5kaW5nVW50aWwgPCBub3cgJiYgcHJvcG9zZWRSZWNvdmVyeUtleSAhPSAweDApewogICAgICByZWNvdmVyeUtleSA9IHByb3Bvc2VkUmVjb3ZlcnlLZXk7CiAgICAgIGRlbGV0ZSBwcm9wb3NlZFJlY292ZXJ5S2V5OwogICAgfQogIH0KICAvL3Bhc3MgMHgwIHRvIGNhbmNlbCAKICBmdW5jdGlvbiBzaWduQ29udHJvbGxlckNoYW5nZShhZGRyZXNzIF9wcm9wb3NlZENvbnRyb2xsZXIpIG9ubHlVc2VyS2V5ewogICAgcHJvcG9zZWRDb250cm9sbGVyUGVuZGluZ1VudGlsID0gbm93ICsgbG9uZ1RpbWVMb2NrOwogICAgcHJvcG9zZWRDb250cm9sbGVyID0gX3Byb3Bvc2VkQ29udHJvbGxlcjsKICAgIFJlY292ZXJ5RXZlbnQoInNpZ25Db250cm9sbGVyQ2hhbmdlIiwgbXNnLnNlbmRlcik7CiAgfQogIGZ1bmN0aW9uIGNoYW5nZUNvbnRyb2xsZXIoKSB7CiAgICBpZihwcm9wb3NlZENvbnRyb2xsZXJQZW5kaW5nVW50aWwgPCBub3cgJiYgcHJvcG9zZWRDb250cm9sbGVyICE9IDB4MCl7CiAgICAgIHByb3h5LnRyYW5zZmVyKHByb3Bvc2VkQ29udHJvbGxlcik7CiAgICAgIHN1aWNpZGUocHJvcG9zZWRDb250cm9sbGVyKTsKICAgIH0KICB9CiAgLy9wYXNzIDB4MCB0byBjYW5jZWwgCiAgZnVuY3Rpb24gc2lnblVzZXJLZXlDaGFuZ2UoYWRkcmVzcyBfcHJvcG9zZWRVc2VyS2V5KSBvbmx5VXNlcktleXsKICAgIHByb3Bvc2VkVXNlcktleVBlbmRpbmdVbnRpbCA9IG5vdyArIHNob3J0VGltZUxvY2s7CiAgICBwcm9wb3NlZFVzZXJLZXkgPSBfcHJvcG9zZWRVc2VyS2V5OwogICAgUmVjb3ZlcnlFdmVudCgic2lnblVzZXJLZXlDaGFuZ2UiLCBtc2cuc2VuZGVyKTsKICB9CiAgZnVuY3Rpb24gY2hhbmdlVXNlcktleSgpewogICAgaWYocHJvcG9zZWRVc2VyS2V5UGVuZGluZ1VudGlsIDwgbm93ICYmIHByb3Bvc2VkVXNlcktleSAhPSAweDApewogICAgICB1c2VyS2V5ID0gcHJvcG9zZWRVc2VyS2V5OwogICAgICBkZWxldGUgcHJvcG9zZWRVc2VyS2V5OwogICAgICBSZWNvdmVyeUV2ZW50KCJjaGFuZ2VVc2VyS2V5IiwgbXNnLnNlbmRlcik7CiAgICB9CiAgfQogIAogIGZ1bmN0aW9uIGNoYW5nZVJlY292ZXJ5RnJvbVJlY292ZXJ5KGFkZHJlc3MgX3JlY292ZXJ5S2V5KSBvbmx5UmVjb3ZlcnlLZXl7IHJlY292ZXJ5S2V5ID0gX3JlY292ZXJ5S2V5OyB9CiAgZnVuY3Rpb24gY2hhbmdlVXNlcktleUZyb21SZWNvdmVyeShhZGRyZXNzIF91c2VyS2V5KSBvbmx5UmVjb3ZlcnlLZXl7CiAgICBkZWxldGUgcHJvcG9zZWRVc2VyS2V5OwogICAgdXNlcktleSA9IF91c2VyS2V5OwogIH0KfQoKY29udHJhY3QgUmVjb3ZlcnlRdW9ydW0gewogIFJlY292ZXJhYmxlQ29udHJvbGxlciBwdWJsaWMgY29udHJvbGxlcjsKCiAgYWRkcmVzc1tdIHB1YmxpYyBkZWxlZ2F0ZUFkZHJlc3NlczsgLy8gbmVlZGVkIGZvciBpdGVyYXRpb24gb2YgbWFwcGluZwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gRGVsZWdhdGUpIHB1YmxpYyBkZWxlZ2F0ZXM7CiAgc3RydWN0IERlbGVnYXRlewogICAgdWludCBkZWxldGVkQWZ0ZXI7IC8vIGRlbGVnYXRlIGV4aXN0cyBpZiBub3QgMAogICAgdWludCBwZW5kaW5nVW50aWw7CiAgICBhZGRyZXNzIHByb3Bvc2VkVXNlcktleTsKICB9CgogIGV2ZW50IFJlY292ZXJ5RXZlbnQoc3RyaW5nIGFjdGlvbiwgYWRkcmVzcyBpbml0aWF0ZWRCeSk7CgogIG1vZGlmaWVyIG9ubHlVc2VyS2V5KCl7IGlmIChtc2cuc2VuZGVyID09IGNvbnRyb2xsZXIudXNlcktleSgpKSBfOyB9CgogIGZ1bmN0aW9uIFJlY292ZXJ5UXVvcnVtKGFkZHJlc3MgX2NvbnRyb2xsZXIsIGFkZHJlc3NbXSBfZGVsZWdhdGVzKXsKICAgIGNvbnRyb2xsZXIgPSBSZWNvdmVyYWJsZUNvbnRyb2xsZXIoX2NvbnRyb2xsZXIpOwogICAgZm9yKHVpbnQgaSA9IDA7IGkgPCBfZGVsZWdhdGVzLmxlbmd0aDsgaSsrKXsKICAgICAgZGVsZWdhdGVBZGRyZXNzZXMucHVzaChfZGVsZWdhdGVzW2ldKTsKICAgICAgZGVsZWdhdGVzW19kZWxlZ2F0ZXNbaV1dID0gRGVsZWdhdGUoe3Byb3Bvc2VkVXNlcktleTogMHgwLCBwZW5kaW5nVW50aWw6IDAsIGRlbGV0ZWRBZnRlcjogMzE1MzYwMDAwMDAwMDB9KTsKICAgIH0KICB9CiAgZnVuY3Rpb24gc2lnblVzZXJDaGFuZ2UoYWRkcmVzcyBwcm9wb3NlZFVzZXJLZXkpIHsKICAgIGlmKGRlbGVnYXRlUmVjb3JkRXhpc3RzKGRlbGVnYXRlc1ttc2cuc2VuZGVyXSkpIHsKICAgICAgZGVsZWdhdGVzW21zZy5zZW5kZXJdLnByb3Bvc2VkVXNlcktleSA9IHByb3Bvc2VkVXNlcktleTsKICAgICAgY2hhbmdlVXNlcktleShwcm9wb3NlZFVzZXJLZXkpOwogICAgICBSZWNvdmVyeUV2ZW50KCJzaWduVXNlckNoYW5nZSIsIG1zZy5zZW5kZXIpOwogICAgfQogIH0KICBmdW5jdGlvbiBjaGFuZ2VVc2VyS2V5KGFkZHJlc3MgbmV3VXNlcktleSkgewogICAgaWYoY29sbGVjdGVkU2lnbmF0dXJlcyhuZXdVc2VyS2V5KSA+PSBuZWVkZWRTaWduYXR1cmVzKCkpewogICAgICBjb250cm9sbGVyLmNoYW5nZVVzZXJLZXlGcm9tUmVjb3ZlcnkobmV3VXNlcktleSk7CiAgICAgIGZvcih1aW50IGkgPSAwIDsgaSA8IGRlbGVnYXRlQWRkcmVzc2VzLmxlbmd0aCA7IGkrKyl7CiAgICAgICAgLy9yZW1vdmUgYW55IHBlbmRpbmcgZGVsZWdhdGVzIGFmdGVyIGEgcmVjb3ZlcnkKICAgICAgICBpZihkZWxlZ2F0ZXNbZGVsZWdhdGVBZGRyZXNzZXNbaV1dLnBlbmRpbmdVbnRpbCA+IG5vdyl7IAogICAgICAgICAgICBkZWxlZ2F0ZXNbZGVsZWdhdGVBZGRyZXNzZXNbaV1dLmRlbGV0ZWRBZnRlciA9IG5vdzsKICAgICAgICB9CiAgICAgICAgZGVsZXRlIGRlbGVnYXRlc1tkZWxlZ2F0ZUFkZHJlc3Nlc1tpXV0ucHJvcG9zZWRVc2VyS2V5OwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiByZXBsYWNlRGVsZWdhdGVzKGFkZHJlc3NbXSBkZWxlZ2F0ZXNUb1JlbW92ZSwgYWRkcmVzc1tdIGRlbGVnYXRlc1RvQWRkKSBvbmx5VXNlcktleXsKICAgIGZvcih1aW50IGkgPSAwIDsgaSA8IGRlbGVnYXRlc1RvUmVtb3ZlLmxlbmd0aCA7IGkrKyl7CiAgICAgIHJlbW92ZURlbGVnYXRlKGRlbGVnYXRlc1RvUmVtb3ZlW2ldKTsKICAgIH0KICAgIGdhcmJhZ2VDb2xsZWN0KCk7CiAgICBmb3IodWludCBqID0gMCA7IGogPCBkZWxlZ2F0ZXNUb0FkZC5sZW5ndGggOyBqKyspewogICAgICBhZGREZWxlZ2F0ZShkZWxlZ2F0ZXNUb0FkZFtqXSk7CiAgICB9CiAgICBSZWNvdmVyeUV2ZW50KCJyZXBsYWNlRGVsZWdhdGVzIiwgbXNnLnNlbmRlcik7CiAgfQogIGZ1bmN0aW9uIGNvbGxlY3RlZFNpZ25hdHVyZXMoYWRkcmVzcyBfcHJvcG9zZWRVc2VyS2V5KSByZXR1cm5zICh1aW50IHNpZ25hdHVyZXMpewogICAgZm9yKHVpbnQgaSA9IDAgOyBpIDwgZGVsZWdhdGVBZGRyZXNzZXMubGVuZ3RoIDsgaSsrKXsKICAgICAgaWYgKGRlbGVnYXRlSGFzVmFsaWRTaWduYXR1cmUoZGVsZWdhdGVzW2RlbGVnYXRlQWRkcmVzc2VzW2ldXSkgJiYgZGVsZWdhdGVzW2RlbGVnYXRlQWRkcmVzc2VzW2ldXS5wcm9wb3NlZFVzZXJLZXkgPT0gX3Byb3Bvc2VkVXNlcktleSl7CiAgICAgICAgc2lnbmF0dXJlcysrOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZXRBZGRyZXNzZXMoKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzW10peyByZXR1cm4gZGVsZWdhdGVBZGRyZXNzZXM7IH0KCiAgZnVuY3Rpb24gbmVlZGVkU2lnbmF0dXJlcygpIHJldHVybnMgKHVpbnQpewogICAgdWludCBjdXJyZW50RGVsZWdhdGVDb3VudDsgLy9hbHdheXMgMCBhdCB0aGlzIHBvaW50CiAgICBmb3IodWludCBpID0gMCA7IGkgPCBkZWxlZ2F0ZUFkZHJlc3Nlcy5sZW5ndGggOyBpKyspewogICAgICBpZihkZWxlZ2F0ZUlzQ3VycmVudChkZWxlZ2F0ZXNbZGVsZWdhdGVBZGRyZXNzZXNbaV1dKSl7IGN1cnJlbnREZWxlZ2F0ZUNvdW50Kys7IH0KICAgIH0KICAgIHJldHVybiBjdXJyZW50RGVsZWdhdGVDb3VudC8yICsgMTsKICB9CiAgZnVuY3Rpb24gYWRkRGVsZWdhdGUoYWRkcmVzcyBkZWxlZ2F0ZSkgcHJpdmF0ZSB7CiAgICBpZighZGVsZWdhdGVSZWNvcmRFeGlzdHMoZGVsZWdhdGVzW2RlbGVnYXRlXSkgJiYgZGVsZWdhdGVBZGRyZXNzZXMubGVuZ3RoIDwgMTUpIHsKICAgICAgZGVsZWdhdGVzW2RlbGVnYXRlXSA9IERlbGVnYXRlKHtwcm9wb3NlZFVzZXJLZXk6IDB4MCwgcGVuZGluZ1VudGlsOiBub3cgKyBjb250cm9sbGVyLmxvbmdUaW1lTG9jaygpLCBkZWxldGVkQWZ0ZXI6IDMxNTM2MDAwMDAwMDAwfSk7CiAgICAgIGRlbGVnYXRlQWRkcmVzc2VzLnB1c2goZGVsZWdhdGUpOwogICAgfQogIH0KICBmdW5jdGlvbiByZW1vdmVEZWxlZ2F0ZShhZGRyZXNzIGRlbGVnYXRlKSBwcml2YXRlIHsKICAgIGlmKGRlbGVnYXRlc1tkZWxlZ2F0ZV0uZGVsZXRlZEFmdGVyID4gY29udHJvbGxlci5sb25nVGltZUxvY2soKSArIG5vdyl7IAogICAgICAvL3JlbW92ZSByaWdodCBhd2F5IGlmIHRoZXkgYXJlIHN0aWxsIHBlbmRpbmcKICAgICAgaWYoZGVsZWdhdGVzW2RlbGVnYXRlXS5wZW5kaW5nVW50aWwgPiBub3cpeyAKICAgICAgICBkZWxlZ2F0ZXNbZGVsZWdhdGVdLmRlbGV0ZWRBZnRlciA9IG5vdzsKICAgICAgfSBlbHNlewogICAgICAgIGRlbGVnYXRlc1tkZWxlZ2F0ZV0uZGVsZXRlZEFmdGVyID0gY29udHJvbGxlci5sb25nVGltZUxvY2soKSArIG5vdzsKICAgICAgfQogICAgfQogIH0KICBmdW5jdGlvbiBnYXJiYWdlQ29sbGVjdCgpIHByaXZhdGV7CiAgICB1aW50IGkgPSAwOwogICAgd2hpbGUoaSA8IGRlbGVnYXRlQWRkcmVzc2VzLmxlbmd0aCl7CiAgICAgIGlmKGRlbGVnYXRlSXNEZWxldGVkKGRlbGVnYXRlc1tkZWxlZ2F0ZUFkZHJlc3Nlc1tpXV0pKXsKICAgICAgICBkZWxlZ2F0ZXNbZGVsZWdhdGVBZGRyZXNzZXNbaV1dLmRlbGV0ZWRBZnRlciA9IDA7CiAgICAgICAgZGVsZWdhdGVzW2RlbGVnYXRlQWRkcmVzc2VzW2ldXS5wZW5kaW5nVW50aWwgPSAwOwogICAgICAgIGRlbGVnYXRlc1tkZWxlZ2F0ZUFkZHJlc3Nlc1tpXV0ucHJvcG9zZWRVc2VyS2V5ID0gMDsKICAgICAgICBBcnJheUxpYi5yZW1vdmVBZGRyZXNzKGksIGRlbGVnYXRlQWRkcmVzc2VzKTsKICAgICAgfWVsc2V7aSsrO30KICAgIH0KICB9CiAgZnVuY3Rpb24gZGVsZWdhdGVSZWNvcmRFeGlzdHMoRGVsZWdhdGUgZCkgcHJpdmF0ZSByZXR1cm5zIChib29sKXsKICAgICAgcmV0dXJuIGQuZGVsZXRlZEFmdGVyICE9IDA7CiAgfQogIGZ1bmN0aW9uIGRlbGVnYXRlSXNEZWxldGVkKERlbGVnYXRlIGQpIHByaXZhdGUgcmV0dXJucyAoYm9vbCl7CiAgICAgIHJldHVybiBkLmRlbGV0ZWRBZnRlciA8PSBub3c7IC8vZG9lc250IGNoZWNrIHJlY29yZCBleGlzdGVuY2UKICB9CiAgZnVuY3Rpb24gZGVsZWdhdGVJc0N1cnJlbnQoRGVsZWdhdGUgZCkgcHJpdmF0ZSByZXR1cm5zIChib29sKXsKICAgICAgcmV0dXJuIGRlbGVnYXRlUmVjb3JkRXhpc3RzKGQpICYmICFkZWxlZ2F0ZUlzRGVsZXRlZChkKSAmJiBub3cgPiBkLnBlbmRpbmdVbnRpbDsKICB9CiAgZnVuY3Rpb24gZGVsZWdhdGVIYXNWYWxpZFNpZ25hdHVyZShEZWxlZ2F0ZSBkKSBwcml2YXRlIHJldHVybnMgKGJvb2wpewogICAgICByZXR1cm4gZGVsZWdhdGVJc0N1cnJlbnQoZCkgJiYgZC5wcm9wb3NlZFVzZXJLZXkgIT0gMHgwOwogIH0KfQoKY29udHJhY3QgSWRlbnRpdHlGYWN0b3J5IHsKICAgIGV2ZW50IElkZW50aXR5Q3JlYXRlZCgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgdXNlcktleSwKICAgICAgICBhZGRyZXNzIHByb3h5LAogICAgICAgIGFkZHJlc3MgY29udHJvbGxlciwKICAgICAgICBhZGRyZXNzIHJlY292ZXJ5UXVvcnVtKTsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYWRkcmVzcykgcHVibGljIHNlbmRlclRvUHJveHk7CgogICAgLy9jb3N0IH4yLjRNIGdhcwogICAgZnVuY3Rpb24gQ3JlYXRlUHJveHlXaXRoQ29udHJvbGxlckFuZFJlY292ZXJ5KGFkZHJlc3MgdXNlcktleSwgYWRkcmVzc1tdIGRlbGVnYXRlcywgdWludCBsb25nVGltZUxvY2ssIHVpbnQgc2hvcnRUaW1lTG9jaykgewogICAgICAgIFByb3h5IHByb3h5ID0gbmV3IFByb3h5KCk7CiAgICAgICAgUmVjb3ZlcmFibGVDb250cm9sbGVyIGNvbnRyb2xsZXIgPSBuZXcgUmVjb3ZlcmFibGVDb250cm9sbGVyKHByb3h5LCB1c2VyS2V5LCBsb25nVGltZUxvY2ssIHNob3J0VGltZUxvY2spOwogICAgICAgIHByb3h5LnRyYW5zZmVyKGNvbnRyb2xsZXIpOwogICAgICAgIFJlY292ZXJ5UXVvcnVtIHJlY292ZXJ5UXVvcnVtID0gbmV3IFJlY292ZXJ5UXVvcnVtKGNvbnRyb2xsZXIsIGRlbGVnYXRlcyk7CiAgICAgICAgY29udHJvbGxlci5jaGFuZ2VSZWNvdmVyeUZyb21SZWNvdmVyeShyZWNvdmVyeVF1b3J1bSk7CgogICAgICAgIElkZW50aXR5Q3JlYXRlZCh1c2VyS2V5LCBwcm94eSwgY29udHJvbGxlciwgcmVjb3ZlcnlRdW9ydW0pOwogICAgICAgIHNlbmRlclRvUHJveHlbbXNnLnNlbmRlcl0gPSBwcm94eTsKICAgIH0KfQ=='.
	

]
