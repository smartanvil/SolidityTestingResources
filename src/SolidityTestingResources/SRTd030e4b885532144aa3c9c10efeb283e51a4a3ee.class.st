Class {
	#name : #SRTd030e4b885532144aa3c9c10efeb283e51a4a3ee,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd030e4b885532144aa3c9c10efeb283e51a4a3ee >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7IC8vIHNvbGhpbnQtZGlzYWJsZS1saW5lCgoKCi8vLyBAdGl0bGUgSW50ZXJmYWNlIGZvciBjb250cmFjdHMgY29uZm9ybWluZyB0byBFUkMtNzIxOiBOb24tRnVuZ2libGUgVG9rZW5zCi8vLyBAYXV0aG9yIERpZXRlciBTaGlybGV5IDw8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjBmNmI2YTdiNmE0ZjZlNzc2NjYwNjI3NTZhNjEyMTZjNjAiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L3NwYW4+PiAoaHR0cHM6Ly9naXRodWIuY29tL2RldGUpCmNvbnRyYWN0IEVSQzcyMSB7CiAgLy8gUmVxdWlyZWQgbWV0aG9kcwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBhZGRyKTsKICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgYXBwcm92ZWQsIHVpbnQyNTYgdG9rZW5JZCk7CgogIC8vIE9wdGlvbmFsCiAgLy8gZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBuYW1lKTsKICAvLyBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgc3ltYm9sKTsKICAvLyBmdW5jdGlvbiB0b2tlbk9mT3duZXJCeUluZGV4KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9pbmRleCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2IHRva2VuSWQpOwogIC8vIGZ1bmN0aW9uIHRva2VuTWV0YWRhdGEodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIGluZm9VcmwpOwp9CgovLy8gTW9kaWZpZWQgZnJvbSB0aGUgQ3J5cHRvQ2VsZWJyaXRpZXMgY29udHJhY3QKY29udHJhY3QgRW1vamlUb2tlbiBpcyBFUkM3MjEgewoKICAvKioqIEVWRU5UUyAqKiovCgogIC8vLyBAZGV2IFRoZSBCaXJ0aCBldmVudCBpcyBmaXJlZCB3aGVuZXZlciBhIG5ldyBlbW9qaSBjb21lcyBpbnRvIGV4aXN0ZW5jZS4KICBldmVudCBCaXJ0aCh1aW50MjU2IHRva2VuSWQsIHN0cmluZyBuYW1lLCBhZGRyZXNzIG93bmVyKTsKCiAgLy8vIEBkZXYgVGhlIFRva2VuU29sZCBldmVudCBpcyBmaXJlZCB3aGVuZXZlciBhIHRva2VuIGlzIHNvbGQuCiAgZXZlbnQgVG9rZW5Tb2xkKHVpbnQyNTYgdG9rZW5JZCwgdWludDI1NiBvbGRQcmljZSwgdWludDI1NiBuZXdQcmljZSwgYWRkcmVzcyBwcmV2T3duZXIsIGFkZHJlc3Mgd2lubmVyLCBzdHJpbmcgbmFtZSk7CgogIC8vLyBAZGV2IFRyYW5zZmVyIGV2ZW50IGFzIGRlZmluZWQgaW4gY3VycmVudCBkcmFmdCBvZiBFUkM3MjEuIAogIC8vLyAgb3duZXJzaGlwIGlzIGFzc2lnbmVkLCBpbmNsdWRpbmcgYmlydGhzLgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB0b2tlbklkKTsKCiAgLyoqKiBDT05TVEFOVFMgKioqLwoKICAvLy8gQG5vdGljZSBOYW1lIGFuZCBzeW1ib2wgb2YgdGhlIG5vbiBmdW5naWJsZSB0b2tlbiwgYXMgZGVmaW5lZCBpbiBFUkM3MjEuCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBOQU1FID0gIkVtb2ppQmxvY2tjaGFpbiI7IC8vIHNvbGhpbnQtZGlzYWJsZS1saW5lCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBTWU1CT0wgPSAiRW1vamlUb2tlbiI7IC8vIHNvbGhpbnQtZGlzYWJsZS1saW5lCgogIHVpbnQyNTYgcHJpdmF0ZSBzdGFydGluZ1ByaWNlID0gMC4wMDEgZXRoZXI7CiAgLy8gVGhlIGxpbWl0IHdhcyA3NywgYW5kIHRoZSByZWRlcGxveW1lbnQgd2FzIGZvciA2NSBlbW9qaQogIC8vIFRoYXQncyB3aHkgdGhlIGxpbWl0IGhlcmUgaXMgMTQyCiAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IFBST01PX0NSRUFUSU9OX0xJTUlUID0gMTQyOwogIHVpbnQyNTYgcHJpdmF0ZSBmaXJzdFN0ZXBMaW1pdCA9ICAwLjA1IGV0aGVyOwogIHVpbnQyNTYgcHJpdmF0ZSBzZWNvbmRTdGVwTGltaXQgPSAwLjU1IGV0aGVyOwoKICAvKioqIFNUT1JBR0UgKioqLwoKICAvLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBlbW9qaSBJRHMgdG8gdGhlIGFkZHJlc3MgdGhhdCBvd25zIHRoZW0uIEFsbCBlbW9qaXMgaGF2ZQogIC8vLyAgc29tZSB2YWxpZCBvd25lciBhZGRyZXNzLgogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGVtb2ppSW5kZXhUb093bmVyOwoKICAvLyBAZGV2IEEgbWFwcGluZyBmcm9tIG93bmVyIGFkZHJlc3MgdG8gY291bnQgb2YgdG9rZW5zIHRoYXQgYWRkcmVzcyBvd25zLgogIC8vICBVc2VkIGludGVybmFsbHkgaW5zaWRlIGJhbGFuY2VPZigpIHRvIHJlc29sdmUgb3duZXJzaGlwIGNvdW50LgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBvd25lcnNoaXBUb2tlbkNvdW50OwoKICAvLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBFbW9qaUlEcyB0byBhbiBhZGRyZXNzIHRoYXQgaGFzIGJlZW4gYXBwcm92ZWQgdG8gY2FsbAogIC8vLyAgdHJhbnNmZXJGcm9tKCkuIEVhY2ggRW1vamkgY2FuIG9ubHkgaGF2ZSBvbmUgYXBwcm92ZWQgYWRkcmVzcyBmb3IgdHJhbnNmZXIKICAvLy8gIGF0IGFueSB0aW1lLiBBIHplcm8gdmFsdWUgbWVhbnMgbm8gYXBwcm92YWwgaXMgb3V0c3RhbmRpbmcuCiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgZW1vamlJbmRleFRvQXBwcm92ZWQ7CgogIC8vIEBkZXYgQSBtYXBwaW5nIGZyb20gRW1vamlJRHMgdG8gdGhlIHByaWNlIG9mIHRoZSB0b2tlbi4KICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgZW1vamlJbmRleFRvUHJpY2U7CiAgCiAgLy8vIEBkZXYgQSBtYXBwaW5nIGZyb20gRW1vamlJRHMgdG8gdGhlIHByZXZpcHVzIHByaWNlIG9mIHRoZSB0b2tlbi4gVXNlZAogIC8vLyB0byBjYWxjdWxhdGUgcHJpY2UgZGVsdGEgZm9yIHBheW91dHMKICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgZW1vamlJbmRleFRvUHJldmlvdXNQcmljZTsKCiAgLy8gTVkgVEhJTkcKICAvLyBAZGV2IEEgbWFwcGluZyBmcm9tIGVtb2ppSWQgdG8gdGhlIGN1c3RvbSBtZXNzYWdlIHRoZSBvd25lciBzZXQuCiAgbWFwcGluZyAodWludDI1NiA9PiBzdHJpbmcpIHByaXZhdGUgZW1vamlJbmRleFRvQ3VzdG9tTWVzc2FnZTsKCiAgLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBlbW9qaUlkIHRvIHRoZSA3IGxhc3Qgb3duZXJzLgogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzc1s3XSkgcHJpdmF0ZSBlbW9qaUluZGV4VG9QcmV2aW91c093bmVyczsKCgogIC8vIFRoZSBhZGRyZXNzZXMgb2YgdGhlIGFjY291bnRzIChvciBjb250cmFjdHMpIHRoYXQgY2FuIGV4ZWN1dGUgYWN0aW9ucyB3aXRoaW4gZWFjaCByb2xlcy4KICBhZGRyZXNzIHB1YmxpYyBjZW9BZGRyZXNzOwogIGFkZHJlc3MgcHVibGljIGNvb0FkZHJlc3M7CgogIHVpbnQyNTYgcHVibGljIHByb21vQ3JlYXRlZENvdW50OwoKICAvKioqIERBVEFUWVBFUyAqKiovCiAgc3RydWN0IEVtb2ppIHsKICAgIHN0cmluZyBuYW1lOwogIH0KCiAgRW1vamlbXSBwcml2YXRlIGVtb2ppczsKCiAgLyoqKiBBQ0NFU1MgTU9ESUZJRVJTICoqKi8KICAvLy8gQGRldiBBY2Nlc3MgbW9kaWZpZXIgZm9yIENFTy1vbmx5IGZ1bmN0aW9uYWxpdHkKICBtb2RpZmllciBvbmx5Q0VPKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNlb0FkZHJlc3MpOwogICAgXzsKICB9CgogIC8vLyBAZGV2IEFjY2VzcyBtb2RpZmllciBmb3IgQ09PLW9ubHkgZnVuY3Rpb25hbGl0eQogIG1vZGlmaWVyIG9ubHlDT08oKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY29vQWRkcmVzcyk7CiAgICBfOwogIH0KCiAgLy8vIEFjY2VzcyBtb2RpZmllciBmb3IgY29udHJhY3Qgb3duZXIgb25seSBmdW5jdGlvbmFsaXR5CiAgbW9kaWZpZXIgb25seUNMZXZlbCgpIHsKICAgIHJlcXVpcmUoCiAgICAgIG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyB8fAogICAgICBtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MKICAgICk7CiAgICBfOwogIH0KCiAgLyoqKiBDT05TVFJVQ1RPUiAqKiovCiAgZnVuY3Rpb24gRW1vamlUb2tlbigpIHB1YmxpYyB7CiAgICBjZW9BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgIGNvb0FkZHJlc3MgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqKiBQVUJMSUMgRlVOQ1RJT05TICoqKi8KICAvLy8gQG5vdGljZSBHcmFudCBhbm90aGVyIGFkZHJlc3MgdGhlIHJpZ2h0IHRvIHRyYW5zZmVyIHRva2VuIHZpYSB0YWtlT3duZXJzaGlwKCkgYW5kIHRyYW5zZmVyRnJvbSgpLgogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIGJlIGdyYW50ZWQgdHJhbnNmZXIgYXBwcm92YWwuIFBhc3MgYWRkcmVzcygwKSB0bwogIC8vLyAgY2xlYXIgYWxsIGFwcHJvdmFscy4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gYXBwcm92ZSgKICAgIGFkZHJlc3MgX3RvLAogICAgdWludDI1NiBfdG9rZW5JZAogICkgcHVibGljIHsKICAgIC8vIENhbGxlciBtdXN0IG93biB0b2tlbi4KICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKCiAgICBlbW9qaUluZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF0gPSBfdG87CgogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvLy8gRm9yIHF1ZXJ5aW5nIGJhbGFuY2Ugb2YgYSBwYXJ0aWN1bGFyIGFjY291bnQKICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmb3IgYmFsYW5jZSBxdWVyeQogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBvd25lcnNoaXBUb2tlbkNvdW50W19vd25lcl07CiAgfQoKICAvLy8gQGRldiBDcmVhdGVzIGEgbmV3IHByb21vIEVtb2ppIHdpdGggdGhlIGdpdmVuIG5hbWUsIHdpdGggZ2l2ZW4gX3ByaWNlIGFuZCBhc3NpZ25lcyBpdCB0byBhbiBhZGRyZXNzLgogIGZ1bmN0aW9uIGNyZWF0ZVByb21vRW1vamkoYWRkcmVzcyBfb3duZXIsIHN0cmluZyBfbmFtZSwgdWludDI1NiBfcHJpY2UpIHB1YmxpYyBvbmx5Q09PIHsKICAgIHJlcXVpcmUocHJvbW9DcmVhdGVkQ291bnQgPCBQUk9NT19DUkVBVElPTl9MSU1JVCk7CgogICAgYWRkcmVzcyBlbW9qaU93bmVyID0gX293bmVyOwogICAgaWYgKGVtb2ppT3duZXIgPT0gYWRkcmVzcygwKSkgewogICAgICBlbW9qaU93bmVyID0gY29vQWRkcmVzczsKICAgIH0KCiAgICBpZiAoX3ByaWNlIDw9IDApIHsKICAgICAgX3ByaWNlID0gc3RhcnRpbmdQcmljZTsKICAgIH0KCiAgICBwcm9tb0NyZWF0ZWRDb3VudCsrOwogICAgX2NyZWF0ZUVtb2ppKF9uYW1lLCBlbW9qaU93bmVyLCBfcHJpY2UpOwogIH0KCiAgLy8vIEBkZXYgQ3JlYXRlcyBhIG5ldyBFbW9qaSB3aXRoIHRoZSBnaXZlbiBuYW1lLgogIGZ1bmN0aW9uIGNyZWF0ZUNvbnRyYWN0RW1vamkoc3RyaW5nIF9uYW1lKSBwdWJsaWMgb25seUNPTyB7CiAgICBfY3JlYXRlRW1vamkoX25hbWUsIGFkZHJlc3ModGhpcyksIHN0YXJ0aW5nUHJpY2UpOwogIH0KCiAgLy8vIEBub3RpY2UgUmV0dXJucyBhbGwgdGhlIHJlbGV2YW50IGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgZW1vamkuCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgdG9rZW5JZCBvZiB0aGUgZW1vamkgb2YgaW50ZXJlc3QuCiAgZnVuY3Rpb24gZ2V0RW1vamkodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoCiAgICBzdHJpbmcgZW1vamlOYW1lLAogICAgdWludDI1NiBzZWxsaW5nUHJpY2UsCiAgICBhZGRyZXNzIG93bmVyLAogICAgc3RyaW5nIG1lc3NhZ2UsCiAgICB1aW50MjU2IHByZXZpb3VzUHJpY2UsCiAgICBhZGRyZXNzWzddIHByZXZpb3VzT3duZXJzCiAgKSB7CiAgICBFbW9qaSBzdG9yYWdlIGVtb2ppID0gZW1vamlzW190b2tlbklkXTsKICAgIGVtb2ppTmFtZSA9IGVtb2ppLm5hbWU7CiAgICBzZWxsaW5nUHJpY2UgPSBlbW9qaUluZGV4VG9QcmljZVtfdG9rZW5JZF07CiAgICBvd25lciA9IGVtb2ppSW5kZXhUb093bmVyW190b2tlbklkXTsKICAgIG1lc3NhZ2UgPSBlbW9qaUluZGV4VG9DdXN0b21NZXNzYWdlW190b2tlbklkXTsKICAgIHByZXZpb3VzUHJpY2UgPSBlbW9qaUluZGV4VG9QcmV2aW91c1ByaWNlW190b2tlbklkXTsKICAgIHByZXZpb3VzT3duZXJzID0gZW1vamlJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdOwogIH0KCiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICByZXR1cm4gTkFNRTsKICB9CgogIC8vLyBGb3IgcXVlcnlpbmcgb3duZXIgb2YgdG9rZW4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSB0b2tlbklEIGZvciBvd25lciBpbnF1aXJ5CiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpCiAgICBwdWJsaWMKICAgIHZpZXcKICAgIHJldHVybnMgKGFkZHJlc3Mgb3duZXIpCiAgewogICAgb3duZXIgPSBlbW9qaUluZGV4VG9Pd25lcltfdG9rZW5JZF07CiAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCkpOwogIH0KCiAgZnVuY3Rpb24gcGF5b3V0KGFkZHJlc3MgX3RvKSBwdWJsaWMgb25seUNMZXZlbCB7CiAgICBfcGF5b3V0KF90byk7CiAgfQoKICAvLyBBbGxvd3Mgb3duZXIgdG8gYWRkIHNob3J0IG1lc3NhZ2UgdG8gdG9rZW4KICAvLyBMaW1pdCBpcyBiYXNlZCBvbiBUd2l0dGVyJ3MgdHdlZXQgY2hhcmFjdGVybGltaXQKICBmdW5jdGlvbiBhZGRNZXNzYWdlKHVpbnQyNTYgX3Rva2VuSWQsIHN0cmluZyBfbWVzc2FnZSkgcHVibGljIHsKICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUoYnl0ZXMoX21lc3NhZ2UpLmxlbmd0aDwyODEpOwogICAgZW1vamlJbmRleFRvQ3VzdG9tTWVzc2FnZVtfdG9rZW5JZF0gPSBfbWVzc2FnZTsKICB9CgogIC8vIFRoaXMgZnVuY3Rpb24gd2FzIGFkZGVkIGluIG9yZGVyIHRvIGdpdmUgdGhlIGFiaWxpdHkKICAvLyB0byBtYW51YWxseSBzZXQgb3duZXJzaGlwIGhpc3Rvcnkgc2luY2UgdGhpcyBoYWQgdG8gYmUKICAvLyByZWRlcGxveWVkCiAgZnVuY3Rpb24gc2V0T3duZXJzaGlwSGlzdG9yeSh1aW50MjU2IF90b2tlbklkLCBhZGRyZXNzWzddIF9wcmV2aW91c093bmVycykgcHVibGljIG9ubHlDT08gewogICAgZW1vamlJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdID0gX3ByZXZpb3VzT3duZXJzOwogIH0KCiAgLy8gVGhpcyBmdW5jdGlvbiB3YXMgYWRkZWQgaW4gb3JkZXIgdG8gZ2l2ZSB0aGUgYWJpbGl0eQogIC8vIHRvIG1hbnVhbGx5IHNldCB0aGUgcHJldmlvdXMgcHJpY2Ugc2luY2UgdGhpcyBoYWQgdG8gCiAgLy8gYmUgcmVkZXBsb3llZAogIGZ1bmN0aW9uIHNldFByZXZpb3VzUHJpY2UodWludDI1NiBfdG9rZW5JZCwgdWludDI1NiBfcHJldmlvdXNQcmljZSkgcHVibGljIG9ubHlDT08gewogICAgZW1vamlJbmRleFRvUHJldmlvdXNQcmljZVtfdG9rZW5JZF0gPSBfcHJldmlvdXNQcmljZTsKICB9CgogIC8vIEFsbG93cyBzb21lb25lIHRvIHNlbmQgZXRoZXIgYW5kIG9idGFpbiB0aGUgdG9rZW4KICBmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgcGF5YWJsZSB7CiAgICBhZGRyZXNzIG9sZE93bmVyID0gZW1vamlJbmRleFRvT3duZXJbX3Rva2VuSWRdOwogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICAKICAgIGFkZHJlc3NbN10gc3RvcmFnZSBwcmV2aW91c093bmVycyA9IGVtb2ppSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXTsKCiAgICB1aW50MjU2IHNlbGxpbmdQcmljZSA9IGVtb2ppSW5kZXhUb1ByaWNlW190b2tlbklkXTsKICAgIHVpbnQyNTYgcHJldmlvdXNQcmljZSA9IGVtb2ppSW5kZXhUb1ByZXZpb3VzUHJpY2VbX3Rva2VuSWRdOwoKICAgIC8vIE1ha2luZyBzdXJlIHRva2VuIG93bmVyIGlzIG5vdCBzZW5kaW5nIHRvIHNlbGYKICAgIHJlcXVpcmUob2xkT3duZXIgIT0gbmV3T3duZXIpOwoKICAgIC8vIFNhZmV0eSBjaGVjayB0byBwcmV2ZW50IGFnYWluc3QgYW4gdW5leHBlY3RlZCAweDAgZGVmYXVsdC4KICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKG5ld093bmVyKSk7CgogICAgLy8gTWFraW5nIHN1cmUgc2VudCBhbW91bnQgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzZWxsaW5nUHJpY2UKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHNlbGxpbmdQcmljZSk7CgogICAgdWludDI1NiBwcmljZURlbHRhID0gU2FmZU1hdGguc3ViKHNlbGxpbmdQcmljZSwgcHJldmlvdXNQcmljZSk7CiAgICB1aW50MjU2IHBheW91dFRvdGFsID0gdWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHByaWNlRGVsdGEsIDkwKSwgMTAwKSk7CiAgICB1aW50MjU2IHB1cmNoYXNlRXhjZXNzID0gU2FmZU1hdGguc3ViKG1zZy52YWx1ZSwgc2VsbGluZ1ByaWNlKTsKICAgIC8vIFVwZGF0ZSBwcmV2aW91cyBwcmljZQogICAgZW1vamlJbmRleFRvUHJldmlvdXNQcmljZVtfdG9rZW5JZF0gPSBzZWxsaW5nUHJpY2U7IAogICAgLy8gVXBkYXRlIHByaWNlcwogICAgaWYgKHNlbGxpbmdQcmljZSA8IGZpcnN0U3RlcExpbWl0KSB7CiAgICAgIC8vIGZpcnN0IHN0YWdlCiAgICAgIGVtb2ppSW5kZXhUb1ByaWNlW190b2tlbklkXSA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCAyMDApLCA5MCk7CiAgICB9IGVsc2UgaWYgKHNlbGxpbmdQcmljZSA8IHNlY29uZFN0ZXBMaW1pdCkgewogICAgICAvLyBzZWNvbmQgc3RhZ2UKICAgICAgZW1vamlJbmRleFRvUHJpY2VbX3Rva2VuSWRdID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsaW5nUHJpY2UsIDEyMCksIDkwKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIHRoaXJkIHN0YWdlCiAgICAgIGVtb2ppSW5kZXhUb1ByaWNlW190b2tlbklkXSA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCAxMTUpLCA5MCk7CiAgICB9CgogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwoKICAgIC8vIFBheSBwcmV2aW91cyB0b2tlbk93bmVyIGlmIG93bmVyIGlzIG5vdCBjb250cmFjdAogICAgLy8gYW5kIGlmIHByZXZpb3VzIHByaWNlIGlzIG5vdCAwCiAgICBpZiAob2xkT3duZXIgIT0gYWRkcmVzcyh0aGlzKSAmJiBwcmV2aW91c1ByaWNlID4gMCkgewogICAgICAvLyBvbGQgb3duZXIgZ2V0cyBlbnRpcmUgaW5pdGlhbCBwYXltZW50IGJhY2sKICAgICAgb2xkT3duZXIudHJhbnNmZXIocHJldmlvdXNQcmljZSk7CiAgICB9CiAgICAKICAgIC8vIE5leHQgZGlzdHJpYnV0ZSBwYXlvdXRUb3RhbCBhbW9uZyBwcmV2aW91cyBPd25lcnMKICAgIC8vIERvIG5vdCBkaXN0cmlidXRlIGlmIHByZXZpb3VzIG93bmVyIGlzIGNvbnRyYWN0LgogICAgLy8gU3BsaXQgaXM6IDc1LCAxMiwgNiwgMywgMiwgMS41LCAwLjUKICAgIGlmIChwcmV2aW91c093bmVyc1swXSAhPSBhZGRyZXNzKHRoaXMpICYmIHBheW91dFRvdGFsID4gMCkgewogICAgICBwcmV2aW91c093bmVyc1swXS50cmFuc2Zlcih1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwocGF5b3V0VG90YWwsIDc1KSwgMTAwKSkpOwogICAgfQogICAgaWYgKHByZXZpb3VzT3duZXJzWzFdICE9IGFkZHJlc3ModGhpcykgJiYgcGF5b3V0VG90YWwgPiAwKSB7CiAgICAgIHByZXZpb3VzT3duZXJzWzFdLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChwYXlvdXRUb3RhbCwgMTIpLCAxMDApKSk7CiAgICB9CiAgICBpZiAocHJldmlvdXNPd25lcnNbMl0gIT0gYWRkcmVzcyh0aGlzKSAmJiBwYXlvdXRUb3RhbCA+IDApIHsKICAgICAgcHJldmlvdXNPd25lcnNbMl0udHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHBheW91dFRvdGFsLCA2KSwgMTAwKSkpOwogICAgfQogICAgaWYgKHByZXZpb3VzT3duZXJzWzNdICE9IGFkZHJlc3ModGhpcykgJiYgcGF5b3V0VG90YWwgPiAwKSB7CiAgICAgIHByZXZpb3VzT3duZXJzWzNdLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChwYXlvdXRUb3RhbCwgMyksIDEwMCkpKTsKICAgIH0KICAgIGlmIChwcmV2aW91c093bmVyc1s0XSAhPSBhZGRyZXNzKHRoaXMpICYmIHBheW91dFRvdGFsID4gMCkgewogICAgICBwcmV2aW91c093bmVyc1s0XS50cmFuc2Zlcih1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwocGF5b3V0VG90YWwsIDIpLCAxMDApKSk7CiAgICB9CiAgICBpZiAocHJldmlvdXNPd25lcnNbNV0gIT0gYWRkcmVzcyh0aGlzKSAmJiBwYXlvdXRUb3RhbCA+IDApIHsKICAgICAgLy8gZGl2aWRlIGJ5IDEwMDAgc2luY2UgcGVyY2VudGFnZSBpcyAxLjUKICAgICAgcHJldmlvdXNPd25lcnNbNV0udHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHBheW91dFRvdGFsLCAxNSksIDEwMDApKSk7CiAgICB9CiAgICBpZiAocHJldmlvdXNPd25lcnNbNl0gIT0gYWRkcmVzcyh0aGlzKSAmJiBwYXlvdXRUb3RhbCA+IDApIHsKICAgICAgLy8gZGl2aWRlIGJ5IDEwMDAgc2luY2UgcGVyY2VudGFnZSBpcyAwLjUKICAgICAgcHJldmlvdXNPd25lcnNbNl0udHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHBheW91dFRvdGFsLCA1KSwgMTAwMCkpKTsKICAgIH0KICAgIAogICAgVG9rZW5Tb2xkKF90b2tlbklkLCBzZWxsaW5nUHJpY2UsIGVtb2ppSW5kZXhUb1ByaWNlW190b2tlbklkXSwgb2xkT3duZXIsIG5ld093bmVyLCBlbW9qaXNbX3Rva2VuSWRdLm5hbWUpOwoKICAgIG1zZy5zZW5kZXIudHJhbnNmZXIocHVyY2hhc2VFeGNlc3MpOwogIH0KCiAgZnVuY3Rpb24gcHJpY2VPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHByaWNlKSB7CiAgICByZXR1cm4gZW1vamlJbmRleFRvUHJpY2VbX3Rva2VuSWRdOwogIH0KCiAgLy8vIEBkZXYgQXNzaWducyBhIG5ldyBhZGRyZXNzIHRvIGFjdCBhcyB0aGUgQ0VPLiBPbmx5IGF2YWlsYWJsZSB0byB0aGUgY3VycmVudCBDRU8uCiAgLy8vIEBwYXJhbSBfbmV3Q0VPIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgQ0VPCiAgZnVuY3Rpb24gc2V0Q0VPKGFkZHJlc3MgX25ld0NFTykgcHVibGljIG9ubHlDRU8gewogICAgcmVxdWlyZShfbmV3Q0VPICE9IGFkZHJlc3MoMCkpOwoKICAgIGNlb0FkZHJlc3MgPSBfbmV3Q0VPOwogIH0KCiAgLy8vIEBkZXYgQXNzaWducyBhIG5ldyBhZGRyZXNzIHRvIGFjdCBhcyB0aGUgQ09PLiBPbmx5IGF2YWlsYWJsZSB0byB0aGUgY3VycmVudCBDT08uCiAgLy8vIEBwYXJhbSBfbmV3Q09PIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgQ09PCiAgZnVuY3Rpb24gc2V0Q09PKGFkZHJlc3MgX25ld0NPTykgcHVibGljIG9ubHlDRU8gewogICAgcmVxdWlyZShfbmV3Q09PICE9IGFkZHJlc3MoMCkpOwogICAgY29vQWRkcmVzcyA9IF9uZXdDT087CiAgfQoKICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuIFNZTUJPTDsKICB9CgogIC8vLyBAbm90aWNlIEFsbG93IHByZS1hcHByb3ZlZCB1c2VyIHRvIHRha2Ugb3duZXJzaGlwIG9mIGEgdG9rZW4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICBhZGRyZXNzIG9sZE93bmVyID0gZW1vamlJbmRleFRvT3duZXJbX3Rva2VuSWRdOwoKICAgIC8vIFNhZmV0eSBjaGVjayB0byBwcmV2ZW50IGFnYWluc3QgYW4gdW5leHBlY3RlZCAweDAgZGVmYXVsdC4KICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKG5ld093bmVyKSk7CgogICAgLy8gTWFraW5nIHN1cmUgdHJhbnNmZXIgaXMgYXBwcm92ZWQKICAgIHJlcXVpcmUoX2FwcHJvdmVkKG5ld093bmVyLCBfdG9rZW5JZCkpOwoKICAgIF90cmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIF90b2tlbklkKTsKICB9CgogIC8vLyBAcGFyYW0gX293bmVyIFRoZSBvd25lciB3aG9zZSBlbW9qaSB0b2tlbnMgd2UgYXJlIGludGVyZXN0ZWQgaW4uCiAgLy8vIEBkZXYgVGhpcyBtZXRob2QgTVVTVCBORVZFUiBiZSBjYWxsZWQgYnkgc21hcnQgY29udHJhY3QgY29kZS4gRmlyc3QsIGl0J3MgZmFpcmx5CiAgLy8vICBleHBlbnNpdmUgKGl0IHdhbGtzIHRoZSBlbnRpcmUgRW1vamlzIGFycmF5IGxvb2tpbmcgZm9yIGVtb2ppcyBiZWxvbmdpbmcgdG8gb3duZXIpLAogIC8vLyAgYnV0IGl0IGFsc28gcmV0dXJucyBhIGR5bmFtaWMgYXJyYXksIHdoaWNoIGlzIG9ubHkgc3VwcG9ydGVkIGZvciB3ZWIzIGNhbGxzLCBhbmQKICAvLy8gIG5vdCBjb250cmFjdC10by1jb250cmFjdCBjYWxscy4KICBmdW5jdGlvbiB0b2tlbnNPZk93bmVyKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTZbXSBvd25lclRva2VucykgewogICAgdWludDI1NiB0b2tlbkNvdW50ID0gYmFsYW5jZU9mKF9vd25lcik7CiAgICBpZiAodG9rZW5Db3VudCA9PSAwKSB7CiAgICAgICAgLy8gUmV0dXJuIGFuIGVtcHR5IGFycmF5CiAgICAgIHJldHVybiBuZXcgdWludDI1NltdKDApOwogICAgfSBlbHNlIHsKICAgICAgdWludDI1NltdIG1lbW9yeSByZXN1bHQgPSBuZXcgdWludDI1NltdKHRva2VuQ291bnQpOwogICAgICB1aW50MjU2IHRvdGFsRW1vamlzID0gdG90YWxTdXBwbHkoKTsKICAgICAgdWludDI1NiByZXN1bHRJbmRleCA9IDA7CiAgICAgIHVpbnQyNTYgZW1vamlJZDsKICAgICAgZm9yIChlbW9qaUlkID0gMDsgZW1vamlJZCA8PSB0b3RhbEVtb2ppczsgZW1vamlJZCsrKSB7CiAgICAgICAgaWYgKGVtb2ppSW5kZXhUb093bmVyW2Vtb2ppSWRdID09IF9vd25lcikgewogICAgICAgICAgcmVzdWx0W3Jlc3VsdEluZGV4XSA9IGVtb2ppSWQ7CiAgICAgICAgICByZXN1bHRJbmRleCsrOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0KCiAgLy8vIEZvciBxdWVyeWluZyB0b3RhbFN1cHBseSBvZiB0b2tlbgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKSB7CiAgICByZXR1cm4gZW1vamlzLmxlbmd0aDsKICB9CgogIC8vLyBPd25lciBpbml0YXRlcyB0aGUgdHJhbnNmZXIgb2YgdGhlIHRva2VuIHRvIGFub3RoZXIgYWNjb3VudAogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgdG8uCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgSUQgb2YgdGhlIFRva2VuIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGlmIHRoaXMgY2FsbCBzdWNjZWVkcy4KICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIHRyYW5zZmVyKAogICAgYWRkcmVzcyBfdG8sCiAgICB1aW50MjU2IF90b2tlbklkCiAgKSBwdWJsaWMgewogICAgcmVxdWlyZShfb3ducyhtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CiAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvLy8gVGhpcmQtcGFydHkgaW5pdGlhdGVzIHRyYW5zZmVyIG9mIHRva2VuIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3MgZm9yIHRoZSB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZCBmcm9tLgogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgdG8uCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgSUQgb2YgdGhlIFRva2VuIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGlmIHRoaXMgY2FsbCBzdWNjZWVkcy4KICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgKICAgIGFkZHJlc3MgX2Zyb20sCiAgICBhZGRyZXNzIF90bywKICAgIHVpbnQyNTYgX3Rva2VuSWQKICApIHB1YmxpYyB7CiAgICByZXF1aXJlKF9vd25zKF9mcm9tLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYXBwcm92ZWQoX3RvLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CiAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KCiAgLyoqKiBQUklWQVRFIEZVTkNUSU9OUyAqKiovCiAgLy8vIFNhZmV0eSBjaGVjayBvbiBfdG8gYWRkcmVzcyB0byBwcmV2ZW50IGFnYWluc3QgYW4gdW5leHBlY3RlZCAweDAgZGVmYXVsdC4KICBmdW5jdGlvbiBfYWRkcmVzc05vdE51bGwoYWRkcmVzcyBfdG8pIHByaXZhdGUgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gX3RvICE9IGFkZHJlc3MoMCk7CiAgfQoKICAvLy8gRm9yIGNoZWNraW5nIGFwcHJvdmFsIG9mIHRyYW5zZmVyIGZvciBhZGRyZXNzIF90bwogIGZ1bmN0aW9uIF9hcHByb3ZlZChhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBlbW9qaUluZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX3RvOwogIH0KCiAgLy8vIEZvciBjcmVhdGluZyBFbW9qaQogIGZ1bmN0aW9uIF9jcmVhdGVFbW9qaShzdHJpbmcgX25hbWUsIGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSkgcHJpdmF0ZSB7CiAgICBFbW9qaSBtZW1vcnkgX2Vtb2ppID0gRW1vamkoewogICAgICBuYW1lOiBfbmFtZQogICAgfSk7CiAgICB1aW50MjU2IG5ld0Vtb2ppSWQgPSBlbW9qaXMucHVzaChfZW1vamkpIC0gMTsKCiAgICAvLyBJdCdzIHByb2JhYmx5IG5ldmVyIGdvaW5nIHRvIGhhcHBlbiwgNCBiaWxsaW9uIHRva2VucyBhcmUgQSBMT1QsIGJ1dAogICAgLy8gbGV0J3MganVzdCBiZSAxMDAlIHN1cmUgd2UgbmV2ZXIgbGV0IHRoaXMgaGFwcGVuLgogICAgcmVxdWlyZShuZXdFbW9qaUlkID09IHVpbnQyNTYodWludDMyKG5ld0Vtb2ppSWQpKSk7CgogICAgQmlydGgobmV3RW1vamlJZCwgX25hbWUsIF9vd25lcik7CgogICAgZW1vamlJbmRleFRvUHJpY2VbbmV3RW1vamlJZF0gPSBfcHJpY2U7CiAgICBlbW9qaUluZGV4VG9QcmV2aW91c1ByaWNlW25ld0Vtb2ppSWRdID0gMDsKICAgIGVtb2ppSW5kZXhUb0N1c3RvbU1lc3NhZ2VbbmV3RW1vamlJZF0gPSAnaGknOwogICAgZW1vamlJbmRleFRvUHJldmlvdXNPd25lcnNbbmV3RW1vamlJZF0gPQogICAgICAgIFthZGRyZXNzKHRoaXMpLCBhZGRyZXNzKHRoaXMpLCBhZGRyZXNzKHRoaXMpLCBhZGRyZXNzKHRoaXMpLCBhZGRyZXNzKHRoaXMpLCBhZGRyZXNzKHRoaXMpLCBhZGRyZXNzKHRoaXMpXTsKCiAgICAvLyBUaGlzIHdpbGwgYXNzaWduIG93bmVyc2hpcCwgYW5kIGFsc28gZW1pdCB0aGUgVHJhbnNmZXIgZXZlbnQgYXMKICAgIC8vIHBlciBFUkM3MjEgZHJhZnQKICAgIF90cmFuc2ZlcihhZGRyZXNzKDApLCBfb3duZXIsIG5ld0Vtb2ppSWQpOwogIH0KCiAgLy8vIENoZWNrIGZvciB0b2tlbiBvd25lcnNoaXAKICBmdW5jdGlvbiBfb3ducyhhZGRyZXNzIGNsYWltYW50LCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIGNsYWltYW50ID09IGVtb2ppSW5kZXhUb093bmVyW190b2tlbklkXTsKICB9CgogIC8vLyBGb3IgcGF5aW5nIG91dCBiYWxhbmNlIG9uIGNvbnRyYWN0CiAgZnVuY3Rpb24gX3BheW91dChhZGRyZXNzIF90bykgcHJpdmF0ZSB7CiAgICBpZiAoX3RvID09IGFkZHJlc3MoMCkpIHsKICAgICAgY2VvQWRkcmVzcy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfSBlbHNlIHsKICAgICAgX3RvLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CiAgfQoKICAvLy8gQGRldiBBc3NpZ25zIG93bmVyc2hpcCBvZiBhIHNwZWNpZmljIEVtb2ppIHRvIGFuIGFkZHJlc3MuCiAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHsKICAgIC8vIFNpbmNlIHRoZSBudW1iZXIgb2YgZW1vamlzIGlzIGNhcHBlZCB0byAyXjMyIHdlIGNhbid0IG92ZXJmbG93IHRoaXMKICAgIG93bmVyc2hpcFRva2VuQ291bnRbX3RvXSsrOwogICAgLy90cmFuc2ZlciBvd25lcnNoaXAKICAgIGVtb2ppSW5kZXhUb093bmVyW190b2tlbklkXSA9IF90bzsKICAgIC8vIFdoZW4gY3JlYXRpbmcgbmV3IGVtb2ppcyBfZnJvbSBpcyAweDAsIGJ1dCB3ZSBjYW4ndCBhY2NvdW50IHRoYXQgYWRkcmVzcy4KICAgIGlmIChfZnJvbSAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyc2hpcFRva2VuQ291bnRbX2Zyb21dLS07CiAgICAgIC8vIGNsZWFyIGFueSBwcmV2aW91c2x5IGFwcHJvdmVkIG93bmVyc2hpcCBleGNoYW5nZQogICAgICBkZWxldGUgZW1vamlJbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdOwogICAgfQogICAgLy8gVXBkYXRlIHRoZSBlbW9qaUluZGV4VG9QcmV2aW91c093bmVycwogICAgZW1vamlJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzZdPWVtb2ppSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXVs1XTsKICAgIGVtb2ppSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXVs1XT1lbW9qaUluZGV4VG9QcmV2aW91c093bmVyc1tfdG9rZW5JZF1bNF07CiAgICBlbW9qaUluZGV4VG9QcmV2aW91c093bmVyc1tfdG9rZW5JZF1bNF09ZW1vamlJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzNdOwogICAgZW1vamlJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzNdPWVtb2ppSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXVsyXTsKICAgIGVtb2ppSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXVsyXT1lbW9qaUluZGV4VG9QcmV2aW91c093bmVyc1tfdG9rZW5JZF1bMV07CiAgICBlbW9qaUluZGV4VG9QcmV2aW91c093bmVyc1tfdG9rZW5JZF1bMV09ZW1vamlJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzBdOwogICAgLy8gdGhlIF9mcm9tIGFkZHJlc3MgZm9yIGNyZWF0aW9uIGlzIDAsIHNvIGluc3RlYWQgc2V0IGl0IHRvIHRoZSBjb250cmFjdCBhZGRyZXNzCiAgICBpZiAoX2Zyb20gIT0gYWRkcmVzcygwKSkgewogICAgICAgIGVtb2ppSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXVswXT1fZnJvbTsKICAgIH0gZWxzZSB7CiAgICAgICAgZW1vamlJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzBdPWFkZHJlc3ModGhpcyk7CiAgICB9CiAgICAvLyBFbWl0IHRoZSB0cmFuc2ZlciBldmVudC4KICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICB9Cn0KbGlicmFyeSBTYWZlTWF0aCB7CgogIC8qKgogICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgKi8KICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBTdWJzdHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgKi8KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICAvKioKICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0='.
	

]
