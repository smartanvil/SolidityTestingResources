Class {
	#name : #SRT15e3eb661149489ccadac1bb8f51e9941e8ed885,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT15e3eb661149489ccadac1bb8f51e9941e8ed885 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwoKY29udHJhY3QgU2FmZU1hdGggewoKICAgIHVpbnQgY29uc3RhbnQgREFZX0lOX1NFQ09ORFMgPSA4NjQwMDsKICAgIHVpbnQgY29uc3RhbnQgQkFTRSA9IDEwMDAwMDAwMDAwMDAwMDAwMDA7CgogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiAhPSAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gbXVsQnlGcmFjdGlvbih1aW50MjU2IG51bWJlciwgdWludDI1NiBudW1lcmF0b3IsIHVpbnQyNTYgZGVub21pbmF0b3IpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gZGl2KG11bChudW1iZXIsIG51bWVyYXRvciksIGRlbm9taW5hdG9yKTsKICAgIH0KCiAgICAvLyBJQ08gZGF0ZSBib251cyBjYWxjdWxhdGlvbgogICAgZnVuY3Rpb24gZGF0ZUJvbnVzKHVpbnQgcm91bmRJY28sIHVpbnQgZW5kSWNvLCB1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmKGVuZEljbyA+PSBub3cgJiYgcm91bmRJY28gPT0gMCl7CiAgICAgICAgICAgIHJldHVybiBhZGQoYW1vdW50LG11bEJ5RnJhY3Rpb24oYW1vdW50LCAxNSwgMTAwKSk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHJldHVybiBhbW91bnQ7CiAgICAgICAgfQogICAgfQoKfQoKCi8vLyBJbXBsZW1lbnRzIEVSQyAyMCBUb2tlbiBzdGFuZGFyZDogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCi8vLyBAdGl0bGUgQWJzdHJhY3QgdG9rZW4gY29udHJhY3QgLSBGdW5jdGlvbnMgdG8gYmUgaW1wbGVtZW50ZWQgYnkgdG9rZW4gY29udHJhY3RzLgpjb250cmFjdCBBYnN0cmFjdFRva2VuIHsKICAgIC8vIFRoaXMgaXMgbm90IGFuIGFic3RyYWN0IGZ1bmN0aW9uLCBiZWNhdXNlIHNvbGMgd29uJ3QgcmVjb2duaXplIGdlbmVyYXRlZCBnZXR0ZXIgZnVuY3Rpb25zIGZvciBwdWJsaWMgdmFyaWFibGVzIGFzIGZ1bmN0aW9ucwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7fQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBJc3N1YW5jZShhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEFic3RyYWN0VG9rZW4gewogICAgLyoKICAgICAqICBEYXRhIHN0cnVjdHVyZXMKICAgICAqLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgb3duZXJBcHBlbmRlZDsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgYWRkcmVzc1tdIHB1YmxpYyBvd25lcnM7CgogICAgLyoKICAgICAqICBSZWFkIGFuZCB3cml0ZSBzdG9yYWdlIGZ1bmN0aW9ucwogICAgICovCiAgICAvLy8gQGRldiBUcmFuc2ZlcnMgc2VuZGVyJ3MgdG9rZW5zIHRvIGEgZ2l2ZW4gYWRkcmVzcy4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiB0b2tlbiByZWNlaXZlci4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIE51bWJlciBvZiB0b2tlbnMgdG8gdHJhbnNmZXIuCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgaWYoIW93bmVyQXBwZW5kZWRbX3RvXSkgewogICAgICAgICAgICAgICAgb3duZXJBcHBlbmRlZFtfdG9dID0gdHJ1ZTsKICAgICAgICAgICAgICAgIG93bmVycy5wdXNoKF90byk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIGFsbG93ZWQgdGhpcmQgcGFydHkgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIGZyb20gd2hlcmUgdG9rZW5zIGFyZSB3aXRoZHJhd24uCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIHRvIHdoZXJlIHRva2VucyBhcmUgc2VudC4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIE51bWJlciBvZiB0b2tlbnMgdG8gdHJhbnNmZXIuCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgaWYoIW93bmVyQXBwZW5kZWRbX3RvXSkgewogICAgICAgICAgICAgICAgb3duZXJBcHBlbmRlZFtfdG9dID0gdHJ1ZTsKICAgICAgICAgICAgICAgIG93bmVycy5wdXNoKF90byk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBAZGV2IFJldHVybnMgbnVtYmVyIG9mIHRva2VucyBvd25lZCBieSBnaXZlbiBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLy8vIEBkZXYgU2V0cyBhcHByb3ZlZCBhbW91bnQgb2YgdG9rZW5zIGZvciBzcGVuZGVyLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgYWxsb3dlZCBhY2NvdW50LgogICAgLy8vIEBwYXJhbSBfdmFsdWUgTnVtYmVyIG9mIGFwcHJvdmVkIHRva2Vucy4KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qCiAgICAgKiBSZWFkIHN0b3JhZ2UgZnVuY3Rpb25zCiAgICAgKi8KICAgIC8vLyBAZGV2IFJldHVybnMgbnVtYmVyIG9mIGFsbG93ZWQgdG9rZW5zIGZvciBnaXZlbiBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiB0b2tlbiBzcGVuZGVyLgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQp9CgoKY29udHJhY3QgUm9ib3RUcmFkaW5nVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgU2FmZU1hdGggewogICAgLyoKICAgICAqIFRva2VuIG1ldGEgZGF0YQogICAgICovCiAgICAgCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiUm9ib3QgVHJhZGluZyI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJSVEQiOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICAvLyB0b3R0YWwgc3VwcGx5CgogICAgYWRkcmVzcyBwdWJsaWMgaWNvQ29udHJhY3QgPSAweDA7CiAgICAvKgogICAgICogTW9kaWZpZXJzCiAgICAgKi8KCiAgICBtb2RpZmllciBvbmx5SWNvQ29udHJhY3QoKSB7CiAgICAgICAgLy8gb25seSBJQ08gY29udHJhY3QgaXMgYWxsb3dlZCB0byBwcm9jZWVkCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGljb0NvbnRyYWN0KTsKICAgICAgICBfOwogICAgfQoKICAgIC8qCiAgICAgKiBDb250cmFjdCBmdW5jdGlvbnMKICAgICAqLwoKICAgIC8vLyBAZGV2IENvbnRyYWN0IGlzIG5lZWRlZCBpbiBpY29Db250cmFjdCBhZGRyZXNzCiAgICAvLy8gQHBhcmFtIF9pY29Db250cmFjdCBBZGRyZXNzIG9mIGFjY291bnQgd2hpY2ggd2lsbCBiZSBtaW50IHRva2VucwogICAgZnVuY3Rpb24gUm9ib3RUcmFkaW5nVG9rZW4oYWRkcmVzcyBfaWNvQ29udHJhY3QpIHsKICAgICAgICBhc3NlcnQoX2ljb0NvbnRyYWN0ICE9IDB4MCk7CiAgICAgICAgaWNvQ29udHJhY3QgPSBfaWNvQ29udHJhY3Q7CiAgICB9CgogICAgLy8vIEBkZXYgQnVybnMgdG9rZW5zIGZyb20gYWRkcmVzcy4gSXQncyBjYW4gYmUgYXBwbGllZCBieSBhY2NvdW50IHdpdGggYWRkcmVzcyB0aGlzLmljb0NvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9mcm9tIEFkZHJlc3Mgb2YgYWNjb3VudCwgZnJvbSB3aGljaCB3aWxsIGJlIGJ1cm5lZCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEFtb3VudCBvZiB0b2tlbnMsIHRoYXQgd2lsbCBiZSBidXJuZWQKICAgIGZ1bmN0aW9uIGJ1cm5Ub2tlbnMoYWRkcmVzcyBfZnJvbSwgdWludCBfdmFsdWUpIG9ubHlJY29Db250cmFjdCB7CiAgICAgICAgYXNzZXJ0KF9mcm9tICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gc3ViKGJhbGFuY2VzW19mcm9tXSwgX3ZhbHVlKTsKICAgIH0KCiAgICAvLy8gQGRldiBBZGRzIHRva2VucyB0byBhZGRyZXNzLiBJdCdzIGNhbiBiZSBhcHBsaWVkIGJ5IGFjY291bnQgd2l0aCBhZGRyZXNzIHRoaXMuaWNvQ29udHJhY3QKICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgYWNjb3VudCB0byB3aGljaCB0aGUgdG9rZW5zIHdpbGwgcGFzcwogICAgLy8vIEBwYXJhbSBfdmFsdWUgQW1vdW50IG9mIHRva2VucwogICAgZnVuY3Rpb24gZW1pdFRva2VucyhhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlJY29Db250cmFjdCB7CiAgICAgICAgYXNzZXJ0KF90byAhPSAweDApOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CgogICAgICAgIGJhbGFuY2VzW190b10gPSBhZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKCiAgICAgICAgaWYoIW93bmVyQXBwZW5kZWRbX3RvXSkgewogICAgICAgICAgICBvd25lckFwcGVuZGVkW190b10gPSB0cnVlOwogICAgICAgICAgICBvd25lcnMucHVzaChfdG8pOwogICAgICAgIH0KCiAgICB9CgogICAgZnVuY3Rpb24gZ2V0T3duZXIodWludCBpbmRleCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcywgdWludDI1NikgewogICAgICAgIHJldHVybiAob3duZXJzW2luZGV4XSwgYmFsYW5jZXNbb3duZXJzW2luZGV4XV0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE93bmVyQ291bnQoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIG93bmVycy5sZW5ndGg7CiAgICB9Cgp9CgoKY29udHJhY3QgUm9ib3RUcmFkaW5nSWNvIGlzIFNhZmVNYXRoIHsKICAgIC8qCiAgICAgKiBJQ08gbWV0YSBkYXRhCiAgICAgKi8KICAgIFJvYm90VHJhZGluZ1Rva2VuIHB1YmxpYyByb2JvdHRyYWRpbmdUb2tlbjsKCiAgICBlbnVtIFN0YXRlewogICAgICAgIEluaXQsCiAgICAgICAgUGF1c2UsCiAgICAgICAgUnVubmluZywKICAgICAgICBTdG9wcGVkLAogICAgICAgIE1pZ3JhdGVkCiAgICB9CgogICAgU3RhdGUgcHVibGljIGN1cnJlbnRTdGF0ZSA9IFN0YXRlLlBhdXNlOwoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJSb2JvdCBUcmFkaW5nIElDTyI7CgogICAgLy8gQWRkcmVzc2VzIG9mIGZvdW5kZXJzIGFuZCBvdGhlciBsZXZlbAogICAgYWRkcmVzcyBwdWJsaWMgYWNjTWFuYWdlcjsKICAgIGFkZHJlc3MgcHVibGljIGFjY0ZvdW5kZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBhY2NQYXJ0bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgYWNjQ29tcGFueTsKICAgIGFkZHJlc3MgcHVibGljIGFjY1JlY2l2ZTsKCiAgICAvLyAxMCwwMDAgTSBSRFQgdG9rZW5zCiAgICB1aW50IHB1YmxpYyBzdXBwbHlMaW1pdCA9IDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwoKICAgIC8vIEJBU0UgPSAxMF4xOAogICAgdWludCBjb25zdGFudCBCQVNFID0gMTAwMDAwMDAwMDAwMDAwMDAwMDsKCiAgICAvLyBjdXJyZW50IHJvdW5kIElDTwogICAgdWludCBwdWJsaWMgcm91bmRJQ08gPSAwOwoKICAgIHN0cnVjdCBSb3VuZFN0cnVjdCB7CiAgICAgICAgdWludCByb3VuZDsvL0lDTyByb3VuZCAwIGlzIHByZUlDTyBvdGhlciBpcyBub3JtYWwgSUNPCiAgICAgICAgdWludCBwcmljZTsvL0lDTyBwcmljZSBmb3IgdGhpcyByb3VuZCAxIEVUSCA9IDEwMDAwIFJEVAogICAgICAgIHVpbnQgc3VwcGx5Oy8vdG90YWwgc3VwcGx5IHN0YXJ0IGF0IDElCiAgICAgICAgdWludCByZWNpdmU7Ly90b3RhbCByZWNpdmUgRVRICiAgICAgICAgdWludCBzb2xkVG9rZW5zOy8vdG90YWwgdG9rZW5zIHNvbGQKICAgICAgICB1aW50IHNlbmRUb2tlbnM7Ly90b3RhbCB0b2tlbnMgc29sZAogICAgICAgIHVpbnQgZGF0ZVN0YXJ0Oy8vc3RhcnQgSUNPIGRhdGUKICAgICAgICB1aW50IGRhdGVFbmQ7IC8vZW5kIElDTyBkYXRlCiAgICB9CgogICAgUm91bmRTdHJ1Y3RbXSBwdWJsaWMgcm91bmREYXRhOwoKICAgIGJvb2wgcHVibGljIHNlbnRUb2tlbnNUb0ZvdW5kZXIgPSBmYWxzZTsKICAgIGJvb2wgcHVibGljIHNlbnRUb2tlbnNUb1BhcnRuZXIgPSBmYWxzZTsKICAgIGJvb2wgcHVibGljIHNlbnRUb2tlbnNUb0NvbXBhbnkgPSBmYWxzZTsKCiAgICB1aW50IHB1YmxpYyB0b2tlbnNUb0Z1bmRlciA9IDA7CiAgICB1aW50IHB1YmxpYyB0b2tlbnNUb1BhcnRuZXIgPSAwOwogICAgdWludCBwdWJsaWMgdG9rZW5zVG9Db21wYW55ID0gMDsKICAgIHVpbnQgcHVibGljIGV0aGVyUmFpc2VkID0gMDsKCiAgICAvKgogICAgICogTW9kaWZpZXJzCiAgICAgKi8KCiAgICBtb2RpZmllciB3aGVuSW5pdGlhbGl6ZWQoKSB7CiAgICAgICAgLy8gb25seSB3aGVuIGNvbnRyYWN0IGlzIGluaXRpYWxpemVkCiAgICAgICAgcmVxdWlyZShjdXJyZW50U3RhdGUgPj0gU3RhdGUuSW5pdCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5TWFuYWdlcigpIHsKICAgICAgICAvLyBvbmx5IElDTyBtYW5hZ2VyIGNhbiBkbyB0aGlzIGFjdGlvbgogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhY2NNYW5hZ2VyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9uSWNvUnVubmluZygpIHsKICAgICAgICAvLyBDaGVja3MsIGlmIElDTyBpcyBydW5uaW5nIGFuZCBoYXMgbm90IGJlZW4gc3RvcHBlZAogICAgICAgIHJlcXVpcmUoY3VycmVudFN0YXRlID09IFN0YXRlLlJ1bm5pbmcpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25JY29TdG9wcGVkKCkgewogICAgICAgIC8vIENoZWNrcyBpZiBJQ08gd2FzIHN0b3BwZWQgb3IgZGVhZGxpbmUgaXMgcmVhY2hlZAogICAgICAgIHJlcXVpcmUoY3VycmVudFN0YXRlID09IFN0YXRlLlN0b3BwZWQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbm90TWlncmF0ZWQoKSB7CiAgICAgICAgLy8gQ2hlY2tzIGlmIGJhc2UgY2FuIGJlIG1pZ3JhdGVkCiAgICAgICAgcmVxdWlyZShjdXJyZW50U3RhdGUgIT0gU3RhdGUuTWlncmF0ZWQpOwogICAgICAgIF87CiAgICB9CgogICAgLy8vIEBkZXYgQ29uc3RydWN0b3Igb2YgSUNPLiBSZXF1aXJlcyBhZGRyZXNzIG9mIGFjY01hbmFnZXIsCiAgICAvLy8gQHBhcmFtIF9hY2NNYW5hZ2VyIEFkZHJlc3Mgb2YgSUNPIG1hbmFnZXIKICAgIGZ1bmN0aW9uIFJvYm90VHJhZGluZ0ljbyhhZGRyZXNzIF9hY2NNYW5hZ2VyKSB7CiAgICAgICAgYXNzZXJ0KF9hY2NNYW5hZ2VyICE9IDB4MCk7CgogICAgICAgIHJvYm90dHJhZGluZ1Rva2VuID0gbmV3IFJvYm90VHJhZGluZ1Rva2VuKHRoaXMpOwogICAgICAgIGFjY01hbmFnZXIgPSBfYWNjTWFuYWdlcjsKICAgIH0KCiAgICAvLy8gQGRldiBJbml0aWFsaXNlcyBhZGRyZXNzZXMgb2YgZm91bmRlcnMsIHRva2VucyBvd25lciwgYWNjUmVjaXZlLgogICAgLy8vIEluaXRpYWxpc2VzIGJhbGFuY2VzIG9mIHRva2VucyBvd25lcgogICAgLy8vIEBwYXJhbSBfZm91bmRlciBBZGRyZXNzIG9mIGZvdW5kZXIKICAgIC8vLyBAcGFyYW0gX3BhcnRuZXIgQWRkcmVzcyBvZiBwYXJ0bmVyCiAgICAvLy8gQHBhcmFtIF9jb21wYW55IEFkZHJlc3Mgb2YgY29tcGFueQogICAgLy8vIEBwYXJhbSBfcmVjaXZlIEFkZHJlc3Mgb2YgcmVjaXZlCiAgICBmdW5jdGlvbiBpbml0KGFkZHJlc3MgX2ZvdW5kZXIsIGFkZHJlc3MgX3BhcnRuZXIsIGFkZHJlc3MgX2NvbXBhbnksIGFkZHJlc3MgX3JlY2l2ZSkgb25seU1hbmFnZXIgewogICAgICAgIGFzc2VydChjdXJyZW50U3RhdGUgIT0gU3RhdGUuSW5pdCk7CiAgICAgICAgYXNzZXJ0KF9mb3VuZGVyICE9IDB4MCk7CiAgICAgICAgYXNzZXJ0KF9yZWNpdmUgIT0gMHgwKTsKCiAgICAgICAgYWNjRm91bmRlciA9IF9mb3VuZGVyOwogICAgICAgIGFjY1BhcnRuZXIgPSBfcGFydG5lcjsKICAgICAgICBhY2NDb21wYW55ID0gX2NvbXBhbnk7CiAgICAgICAgYWNjUmVjaXZlID0gX3JlY2l2ZTsKCiAgICAgICAgY3VycmVudFN0YXRlID0gU3RhdGUuSW5pdDsKICAgIH0KCiAgICAvLy8gQGRldiBTZXRzIG5ldyBzdGF0ZQogICAgLy8vIEBwYXJhbSBfbmV3U3RhdGUgVmFsdWUgb2YgbmV3IHN0YXRlCiAgICBmdW5jdGlvbiBzZXRTdGF0ZShTdGF0ZSBfbmV3U3RhdGUpIHB1YmxpYyBvbmx5TWFuYWdlcgogICAgewogICAgICAgIGN1cnJlbnRTdGF0ZSA9IF9uZXdTdGF0ZTsKICAgICAgICBpZihjdXJyZW50U3RhdGUgPT0gU3RhdGUuUnVubmluZykgewogICAgICAgICAgICByb3VuZERhdGFbcm91bmRJQ09dLmRhdGVTdGFydCA9IG5vdzsKICAgICAgICB9CiAgICB9CiAgICAvLy8gQGRldiBTZXRzIG5ldyByb3VuZCBpY28KICAgIGZ1bmN0aW9uIHNldE5ld0ljbyh1aW50IF9yb3VuZCwgdWludCBfcHJpY2UsIHVpbnQgX3N0YXJ0RGF0ZSwgdWludCBfZW5kRGF0ZSwgIHVpbnQgX25ld0Ftb3VudCkgcHVibGljIG9ubHlNYW5hZ2VyICB3aGVuSW5pdGlhbGl6ZWQgewogCiAgICAgICAgcmVxdWlyZShyb3VuZERhdGEubGVuZ3RoID09IF9yb3VuZCk7CgogICAgICAgIFJvdW5kU3RydWN0IG1lbW9yeSByb3VuZFN0cnVjdDsKICAgICAgICByb3VuZERhdGEucHVzaChyb3VuZFN0cnVjdCk7CgogICAgICAgIHJvdW5kSUNPID0gX3JvdW5kOyAvLyByb3VuZCAxIGlucHV0IDEKICAgICAgICByb3VuZERhdGFbX3JvdW5kXS5yb3VuZCA9IF9yb3VuZDsKICAgICAgICByb3VuZERhdGFbX3JvdW5kXS5wcmljZSA9IF9wcmljZTsKICAgICAgICByb3VuZERhdGFbX3JvdW5kXS5zdXBwbHkgPSBtdWwoX25ld0Ftb3VudCwgQkFTRSk7IC8vaW5wdXQgMTAwMDAgZ290IDEwMDAwIHRva2VuIGZvciB0aGlzIGljbwogICAgICAgIHJvdW5kRGF0YVtfcm91bmRdLnJlY2l2ZSA9IDA7CiAgICAgICAgcm91bmREYXRhW19yb3VuZF0uc29sZFRva2VucyA9IDA7CiAgICAgICAgcm91bmREYXRhW19yb3VuZF0uc2VuZFRva2VucyA9IDA7CiAgICAgICAgcm91bmREYXRhW19yb3VuZF0uZGF0ZVN0YXJ0ID0gX3N0YXJ0RGF0ZTsKICAgICAgICByb3VuZERhdGFbX3JvdW5kXS5kYXRlRW5kID0gX2VuZERhdGU7CgogICAgfQoKCiAgICAvLy8gQGRldiBTZXRzIG1hbmFnZXIuIE9ubHkgbWFuYWdlciBjYW4gZG8gaXQKICAgIC8vLyBAcGFyYW0gX2FjY01hbmFnZXIgQWRkcmVzcyBvZiBuZXcgSUNPIG1hbmFnZXIKICAgIGZ1bmN0aW9uIHNldE1hbmFnZXIoYWRkcmVzcyBfYWNjTWFuYWdlcikgb25seU1hbmFnZXIgewogICAgICAgIGFzc2VydChfYWNjTWFuYWdlciAhPSAweDApOwogICAgICAgIGFjY01hbmFnZXIgPSBfYWNjTWFuYWdlcjsKICAgIH0KCiAgICAvLy8gQGRldiBCdXkgcXVhbnRpdHkgb2YgdG9rZW5zIGRlcGVuZGluZyBvbiB0aGUgYW1vdW50IG9mIHNlbnQgZXRoZXJzLgogICAgLy8vIEBwYXJhbSBfYnV5ZXIgQWRkcmVzcyBvZiBhY2NvdW50IHdoaWNoIHdpbGwgcmVjZWl2ZSB0b2tlbnMKICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIF9idXllcikgcHJpdmF0ZSB7CiAgICAgICAgYXNzZXJ0KF9idXllciAhPSAweDAgJiYgcm91bmREYXRhW3JvdW5kSUNPXS5kYXRlRW5kID49IG5vdyAmJiByb3VuZERhdGFbcm91bmRJQ09dLmRhdGVTdGFydCA8PSBub3cpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CgogICAgICAgIHVpbnQgdG9rZW5zVG9FbWl0ID0gIG11bChtc2cudmFsdWUsIHJvdW5kRGF0YVtyb3VuZElDT10ucHJpY2UpOwoKICAgICAgICBpZihyb3VuZElDTz09MCl7CiAgICAgICAgICAgIHRva2Vuc1RvRW1pdCA9ICBkYXRlQm9udXMocm91bmRJQ08sIHJvdW5kRGF0YVtyb3VuZElDT10uZGF0ZUVuZCwgdG9rZW5zVG9FbWl0KTsKICAgICAgICB9CiAgICAgICAgcmVxdWlyZShhZGQocm91bmREYXRhW3JvdW5kSUNPXS5zb2xkVG9rZW5zLCB0b2tlbnNUb0VtaXQpIDw9IHJvdW5kRGF0YVtyb3VuZElDT10uc3VwcGx5KTsKICAgICAgICByb3VuZERhdGFbcm91bmRJQ09dLnNvbGRUb2tlbnMgPSBhZGQocm91bmREYXRhW3JvdW5kSUNPXS5zb2xkVG9rZW5zLCB0b2tlbnNUb0VtaXQpOwogCiAgICAgICAgLy9lbWl0IHRva2VucyB0byB0b2tlbiBob2xkZXIKICAgICAgICByb2JvdHRyYWRpbmdUb2tlbi5lbWl0VG9rZW5zKF9idXllciwgdG9rZW5zVG9FbWl0KTsKICAgICAgICBldGhlclJhaXNlZCA9IGFkZChldGhlclJhaXNlZCwgbXNnLnZhbHVlKTsKICAgIH0KCiAgICAvLy8gQGRldiBGYWxsIGJhY2sgZnVuY3Rpb24gfjUway0xMDBrIGdhcwogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSBvbkljb1J1bm5pbmcgewogICAgICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvLy8gQGRldiBCdXJuIHRva2VucyBmcm9tIGFjY291bnRzIG9ubHkgaW4gc3RhdGUgIm5vdCBtaWdyYXRlZCIuIE9ubHkgbWFuYWdlciBjYW4gZG8gaXQKICAgIC8vLyBAcGFyYW0gX2Zyb20gQWRkcmVzcyBvZiBhY2NvdW50CiAgICBmdW5jdGlvbiBidXJuVG9rZW5zKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKSBvbmx5TWFuYWdlciBub3RNaWdyYXRlZCB7CiAgICAgICAgcm9ib3R0cmFkaW5nVG9rZW4uYnVyblRva2VucyhfZnJvbSwgX3ZhbHVlKTsKICAgIH0KCiAgICAvLy8gQGRldiBQYXJ0aWFsIHdpdGhkcmF3LiBPbmx5IG1hbmFnZXIgY2FuIGRvIGl0CiAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aGVyKHVpbnQgX3ZhbHVlKSBvbmx5TWFuYWdlciB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKICAgICAgICBhc3NlcnQoX3ZhbHVlIDw9IHRoaXMuYmFsYW5jZSk7CiAgICAgICAgLy8gc2VuZCAxMjMgdG8gZ2V0IDEuMjMKICAgICAgICBhY2NSZWNpdmUudHJhbnNmZXIoX3ZhbHVlICogMTAwMDAwMDAwMDAwMDAwMDApOyAvLyAxMF4xNgogICAgfQoKICAgIC8vLyBAZGV2IEV0aGVyIHdpdGhkcmF3LiBPbmx5IG1hbmFnZXIgY2FuIGRvIGl0CiAgICBmdW5jdGlvbiB3aXRoZHJhd0FsbEV0aGVyKCkgb25seU1hbmFnZXIgewogICAgICAgIGlmKHRoaXMuYmFsYW5jZSA+IDApCiAgICAgICAgewogICAgICAgICAgICBhY2NSZWNpdmUudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgICB9CiAgICB9CgogICAgLy8vQGRldiBTZW5kIHRva2VucyB0byBQYXJ0bmVyLgogICAgZnVuY3Rpb24gc2VuZFRva2Vuc1RvUGFydG5lcigpIG9ubHlNYW5hZ2VyIHdoZW5Jbml0aWFsaXplZCB7CiAgICAgICAgcmVxdWlyZSghc2VudFRva2Vuc1RvUGFydG5lcik7CgogICAgICAgIHVpbnQgdG9rZW5zU29sZCA9IGFkZChyb3VuZERhdGFbMF0uc29sZFRva2Vucywgcm91bmREYXRhWzFdLnNvbGRUb2tlbnMpOwogICAgICAgIHVpbnQgcGFydG5lclRva2VucyA9IG11bEJ5RnJhY3Rpb24oc3VwcGx5TGltaXQsIDExLCAxMDApOyAvLyAxMSUKCiAgICAgICAgdG9rZW5zVG9QYXJ0bmVyID0gc3ViKHBhcnRuZXJUb2tlbnMsdG9rZW5zU29sZCk7CiAgICAgICAgcm9ib3R0cmFkaW5nVG9rZW4uZW1pdFRva2VucyhhY2NQYXJ0bmVyLCBwYXJ0bmVyVG9rZW5zKTsKICAgICAgICBzZW50VG9rZW5zVG9QYXJ0bmVyID0gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBTZW5kIGxpbWl0IHRva2VucyB0byBQYXJ0bmVyLiBDYW4ndCBiZSBzZW50IG5vIG1vcmUgbGltaXQgMTElCiAgICBmdW5jdGlvbiBzZW5kTGltaXRUb2tlbnNUb1BhcnRuZXIodWludCBfdmFsdWUpIG9ubHlNYW5hZ2VyIHdoZW5Jbml0aWFsaXplZCB7CiAgICAgICAgcmVxdWlyZSghc2VudFRva2Vuc1RvUGFydG5lcik7CiAgICAgICAgdWludCBwYXJ0bmVyTGltaXQgPSBtdWxCeUZyYWN0aW9uKHN1cHBseUxpbWl0LCAxMSwgMTAwKTsgLy8gY2FsYyB0b2tlbiAxMSUKICAgICAgICB1aW50IHBhcnRuZXJSZXdhcmQgPSBzdWIocGFydG5lckxpbWl0LCB0b2tlbnNUb1BhcnRuZXIpOyAvLyBjYWxjIHRva2VuIDw9IDExJQogICAgICAgIHVpbnQgcGFydG5lclZhbHVlID0gbXVsKF92YWx1ZSwgQkFTRSk7IC8vIHNlbmQgMTIzIHRvIGdldCAxMjMgdG9rZW4gbm8gZGVjaW1lbAoKICAgICAgICByZXF1aXJlKHBhcnRuZXJSZXdhcmQgPj0gcGFydG5lclZhbHVlKTsKICAgICAgICB0b2tlbnNUb1BhcnRuZXIgPSBhZGQodG9rZW5zVG9QYXJ0bmVyLCBwYXJ0bmVyVmFsdWUpOwogICAgICAgIHJvYm90dHJhZGluZ1Rva2VuLmVtaXRUb2tlbnMoYWNjUGFydG5lciwgcGFydG5lclZhbHVlKTsKICAgIH0KCiAgICAvLy8gQGRldiBTZW5kIGFsbCB0b2tlbnMgdG8gZm91bmRlcnMuIENhbid0IGJlIHNlbnQgbm8gbW9yZSBsaW1pdCAzMCUKICAgIGZ1bmN0aW9uIHNlbmRUb2tlbnNUb0NvbXBhbnkoKSBvbmx5TWFuYWdlciB3aGVuSW5pdGlhbGl6ZWQgewogICAgICAgIHJlcXVpcmUoIXNlbnRUb2tlbnNUb0NvbXBhbnkpOwoKICAgICAgICAvL0NhbGN1bGF0ZSBmb3VuZGVyIHJld2FyZCBkZXBlbmRpbmcgb24gdG90YWwgdG9rZW5zIHNvbGQKICAgICAgICB1aW50IGNvbXBhbnlMaW1pdCA9IG11bEJ5RnJhY3Rpb24oc3VwcGx5TGltaXQsIDMwLCAxMDApOyAvLyBjYWxjIHRva2VuIDMwJQogICAgICAgIHVpbnQgY29tcGFueVJld2FyZCA9IHN1Yihjb21wYW55TGltaXQsIHRva2Vuc1RvQ29tcGFueSk7IC8vIDMwJSAtIHRva2Vuc1RvQ29tcGFueSA9IGFtb3VudCBmb3IgY29tcGFueQoKICAgICAgICByZXF1aXJlKGNvbXBhbnlSZXdhcmQgPiAwKTsKCiAgICAgICAgdG9rZW5zVG9Db21wYW55ID0gYWRkKHRva2Vuc1RvQ29tcGFueSwgY29tcGFueVJld2FyZCk7CgogICAgICAgIHJvYm90dHJhZGluZ1Rva2VuLmVtaXRUb2tlbnMoYWNjQ29tcGFueSwgY29tcGFueVJld2FyZCk7CiAgICAgICAgc2VudFRva2Vuc1RvQ29tcGFueSA9IHRydWU7CiAgICB9CgogICAgLy8vIEBkZXYgU2VuZCBsaW1pdCB0b2tlbnMgdG8gY29tcGFueS4gQ2FuJ3QgYmUgc2VudCBubyBtb3JlIGxpbWl0IDMwJQogICAgZnVuY3Rpb24gc2VuZExpbWl0VG9rZW5zVG9Db21wYW55KHVpbnQgX3ZhbHVlKSBvbmx5TWFuYWdlciB3aGVuSW5pdGlhbGl6ZWQgewogICAgICAgIHJlcXVpcmUoIXNlbnRUb2tlbnNUb0NvbXBhbnkpOwogICAgICAgIHVpbnQgY29tcGFueUxpbWl0ID0gbXVsQnlGcmFjdGlvbihzdXBwbHlMaW1pdCwgMzAsIDEwMCk7IC8vIGNhbGMgdG9rZW4gMzAlCiAgICAgICAgdWludCBjb21wYW55UmV3YXJkID0gc3ViKGNvbXBhbnlMaW1pdCwgdG9rZW5zVG9Db21wYW55KTsgLy8gY2FsYyB0b2tlbiA8PSAzMCUKICAgICAgICB1aW50IGNvbXBhbnlWYWx1ZSA9IG11bChfdmFsdWUsIEJBU0UpOyAvLyBzZW5kIDEyMyB0byBnZXQgMTIzIHRva2VuIG5vIGRlY2ltZWwKCiAgICAgICAgcmVxdWlyZShjb21wYW55UmV3YXJkID49IGNvbXBhbnlWYWx1ZSk7CiAgICAgICAgdG9rZW5zVG9Db21wYW55ID0gYWRkKHRva2Vuc1RvQ29tcGFueSwgY29tcGFueVZhbHVlKTsKICAgICAgICByb2JvdHRyYWRpbmdUb2tlbi5lbWl0VG9rZW5zKGFjY0NvbXBhbnksIGNvbXBhbnlWYWx1ZSk7CiAgICB9CgogICAgLy8vIEBkZXYgU2VuZCBhbGwgdG9rZW5zIHRvIGZvdW5kZXJzLiAKICAgIGZ1bmN0aW9uIHNlbmRBbGxUb2tlbnNUb0ZvdW5kZXIodWludCBfcm91bmQpIG9ubHlNYW5hZ2VyIHdoZW5Jbml0aWFsaXplZCB7CiAgICAgICAgcmVxdWlyZShyb3VuZERhdGFbX3JvdW5kXS5zb2xkVG9rZW5zPj0xKTsKCiAgICAgICAgdWludCBpY29Ub2tlbiA9IGFkZChyb3VuZERhdGFbX3JvdW5kXS5zb2xkVG9rZW5zLHJvdW5kRGF0YVtfcm91bmRdLnNlbmRUb2tlbnMpOwogICAgICAgIHVpbnQgaWNvU3VwcGx5ID0gcm91bmREYXRhW19yb3VuZF0uc3VwcGx5OwoKICAgICAgICB1aW50IGZvdW5kZXJWYWx1ZSA9IHN1YihpY29TdXBwbHksIGljb1Rva2VuKTsKCiAgICAgICAgcm91bmREYXRhW19yb3VuZF0uc2VuZFRva2VucyA9IGFkZChyb3VuZERhdGFbX3JvdW5kXS5zZW5kVG9rZW5zLCBmb3VuZGVyVmFsdWUpOwogICAgICAgIHRva2Vuc1RvRnVuZGVyID0gYWRkKHRva2Vuc1RvRnVuZGVyLGZvdW5kZXJWYWx1ZSk7CiAgICAgICAgcm9ib3R0cmFkaW5nVG9rZW4uZW1pdFRva2VucyhhY2NGb3VuZGVyLCBmb3VuZGVyVmFsdWUpOwogICAgfQoKICAgIC8vLyBAZGV2IFNlbmQgbGltaXQgdG9rZW5zIHRvIGZvdW5kZXJzLiAKICAgIGZ1bmN0aW9uIHNlbmRMaW1pdFRva2Vuc1RvRm91bmRlcih1aW50IF9yb3VuZCwgdWludCBfdmFsdWUpIG9ubHlNYW5hZ2VyIHdoZW5Jbml0aWFsaXplZCB7CiAgICAgICAgcmVxdWlyZShyb3VuZERhdGFbX3JvdW5kXS5zb2xkVG9rZW5zPj0xKTsKCiAgICAgICAgdWludCBpY29Ub2tlbiA9IGFkZChyb3VuZERhdGFbX3JvdW5kXS5zb2xkVG9rZW5zLHJvdW5kRGF0YVtfcm91bmRdLnNlbmRUb2tlbnMpOwogICAgICAgIHVpbnQgaWNvU3VwcGx5ID0gcm91bmREYXRhW19yb3VuZF0uc3VwcGx5OwoKICAgICAgICB1aW50IGZvdW5kZXJSZXdhcmQgPSBzdWIoaWNvU3VwcGx5LCBpY29Ub2tlbik7CiAgICAgICAgdWludCBmb3VuZGVyVmFsdWUgPSBtdWwoX3ZhbHVlLCBCQVNFKTsgLy8gc2VuZCAxMjMgdG8gZ2V0IDEyMyB0b2tlbiBubyBkZWNpbWVsCgogICAgICAgIHJlcXVpcmUoZm91bmRlclJld2FyZCA+PSBmb3VuZGVyVmFsdWUpOwoKICAgICAgICByb3VuZERhdGFbX3JvdW5kXS5zZW5kVG9rZW5zID0gYWRkKHJvdW5kRGF0YVtfcm91bmRdLnNlbmRUb2tlbnMsIGZvdW5kZXJWYWx1ZSk7CiAgICAgICAgdG9rZW5zVG9GdW5kZXIgPSBhZGQodG9rZW5zVG9GdW5kZXIsZm91bmRlclZhbHVlKTsKICAgICAgICByb2JvdHRyYWRpbmdUb2tlbi5lbWl0VG9rZW5zKGFjY0ZvdW5kZXIsIGZvdW5kZXJWYWx1ZSk7CiAgICB9CgogICAgLy8vIEBkZXYgaW5jIFN1cHBseSB0b2tlbnMgLiBDYW4ndCBiZSBpbmMgbm8gbW9yZSAzNSUKICAgIGZ1bmN0aW9uIGluY1N1cHBseSh1aW50IF9wZXJjZW50KSBvbmx5TWFuYWdlciB3aGVuSW5pdGlhbGl6ZWQgewogICAgICAgIHJlcXVpcmUoX3BlcmNlbnQ8PTM1KTsKICAgICAgICBzdXBwbHlMaW1pdCA9IGFkZChzdXBwbHlMaW1pdCxtdWxCeUZyYWN0aW9uKHN1cHBseUxpbWl0LCBfcGVyY2VudCwgMTAwKSk7CiAgICB9Cgp9'.
	

]
