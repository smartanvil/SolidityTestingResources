Class {
	#name : #SRT0465028899f4a56b13eef1725f95998a1b73a4f3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0465028899f4a56b13eef1725f95998a1b73a4f3 >> base64 [
	^ 'LyoqCiAqIFRoaXMgaXMgYSBtdWx0aXNpZyB3YWxsZXQgYmFzZWQgb24gR2F2J3Mgb3JpZ2luYWwgaW1wbGVtZW50YXRpb24sIGRhaWx5IHdpdGhkcmF3IGxpbWl0cyByZW1vdmVkLgogKgogKgogKiBGb3Igb3RoZXIgbXVsdGlzaWcgd2FsbGV0IGltcGxlbWVudGF0aW9ucywgc2VlIGh0dHBzOi8vYmxvZy5nbm9zaXMucG0vcmVsZWFzZS1vZi1uZXctbXVsdGlzaWctd2FsbGV0LTU5YjY4MTFmN2VkYwogKi8KCi8vIE11bHRpLXNpZywgZGFpbHktbGltaXRlZCBhY2NvdW50IHByb3h5L3dhbGxldC4KLy8gQGF1dGhvcnM6Ci8vIEdhdiBXb29kIDw8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iYWFjZGVhY2ZkZWMyY2VjZmRjODRjOWM1YzciPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgovLyBpbmhlcml0YWJsZSAicHJvcGVydHkiIGNvbnRyYWN0IHRoYXQgZW5hYmxlcyBtZXRob2RzIHRvIGJlIHByb3RlY3RlZCBieSByZXF1aXJpbmcgdGhlIGFjcXVpZXNjZW5jZSBvZiBlaXRoZXIgYQovLyBzaW5nbGUsIG9yLCBjcnVjaWFsbHksIGVhY2ggb2YgYSBudW1iZXIgb2YsIGRlc2lnbmF0ZWQgb3duZXJzLgovLyB1c2FnZToKLy8gdXNlIG1vZGlmaWVycyBvbmx5b3duZXIgKGp1c3Qgb3duIG93bmVkKSBvciBvbmx5bWFueW93bmVycyhoYXNoKSwgd2hlcmVieSB0aGUgc2FtZSBoYXNoIG11c3QgYmUgcHJvdmlkZWQgYnkKLy8gc29tZSBudW1iZXIgKHNwZWNpZmllZCBpbiBjb25zdHJ1Y3Rvcikgb2YgdGhlIHNldCBvZiBvd25lcnMgKHNwZWNpZmllZCBpbiB0aGUgY29uc3RydWN0b3IsIG1vZGlmaWFibGUpIGJlZm9yZSB0aGUKLy8gaW50ZXJpb3IgaXMgZXhlY3V0ZWQuCmNvbnRyYWN0IG11bHRpb3duZWQgewoKCS8vIFRZUEVTCgogICAgLy8gc3RydWN0IGZvciB0aGUgc3RhdHVzIG9mIGEgcGVuZGluZyBvcGVyYXRpb24uCiAgICBzdHJ1Y3QgUGVuZGluZ1N0YXRlIHsKICAgICAgICB1aW50IHlldE5lZWRlZDsKICAgICAgICB1aW50IG93bmVyc0RvbmU7CiAgICAgICAgdWludCBpbmRleDsKICAgIH0KCgkvLyBFVkVOVFMKCiAgICAvLyB0aGlzIGNvbnRyYWN0IG9ubHkgaGFzIHNpeCB0eXBlcyBvZiBldmVudHM6IGl0IGNhbiBhY2NlcHQgYSBjb25maXJtYXRpb24sIGluIHdoaWNoIGNhc2UKICAgIC8vIHdlIHJlY29yZCBvd25lciBhbmQgb3BlcmF0aW9uIChoYXNoKSBhbG9uZ3NpZGUgaXQuCiAgICBldmVudCBDb25maXJtYXRpb24oYWRkcmVzcyBvd25lciwgYnl0ZXMzMiBvcGVyYXRpb24pOwogICAgZXZlbnQgUmV2b2tlKGFkZHJlc3Mgb3duZXIsIGJ5dGVzMzIgb3BlcmF0aW9uKTsKICAgIC8vIHNvbWUgb3RoZXJzIGFyZSBpbiB0aGUgY2FzZSBvZiBhbiBvd25lciBjaGFuZ2luZy4KICAgIGV2ZW50IE93bmVyQ2hhbmdlZChhZGRyZXNzIG9sZE93bmVyLCBhZGRyZXNzIG5ld093bmVyKTsKICAgIGV2ZW50IE93bmVyQWRkZWQoYWRkcmVzcyBuZXdPd25lcik7CiAgICBldmVudCBPd25lclJlbW92ZWQoYWRkcmVzcyBvbGRPd25lcik7CiAgICAvLyB0aGUgbGFzdCBvbmUgaXMgZW1pdHRlZCBpZiB0aGUgcmVxdWlyZWQgc2lnbmF0dXJlcyBjaGFuZ2UKICAgIGV2ZW50IFJlcXVpcmVtZW50Q2hhbmdlZCh1aW50IG5ld1JlcXVpcmVtZW50KTsKCgkvLyBNT0RJRklFUlMKCiAgICAvLyBzaW1wbGUgc2luZ2xlLXNpZyBmdW5jdGlvbiBtb2RpZmllci4KICAgIG1vZGlmaWVyIG9ubHlvd25lciB7CiAgICAgICAgaWYgKGlzT3duZXIobXNnLnNlbmRlcikpCiAgICAgICAgICAgIF87CiAgICB9CiAgICAvLyBtdWx0aS1zaWcgZnVuY3Rpb24gbW9kaWZpZXI6IHRoZSBvcGVyYXRpb24gbXVzdCBoYXZlIGFuIGludHJpbnNpYyBoYXNoIGluIG9yZGVyCiAgICAvLyB0aGF0IGxhdGVyIGF0dGVtcHRzIGNhbiBiZSByZWFsaXNlZCBhcyB0aGUgc2FtZSB1bmRlcmx5aW5nIG9wZXJhdGlvbiBhbmQKICAgIC8vIHRodXMgY291bnQgYXMgY29uZmlybWF0aW9ucy4KICAgIG1vZGlmaWVyIG9ubHltYW55b3duZXJzKGJ5dGVzMzIgX29wZXJhdGlvbikgewogICAgICAgIGlmIChjb25maXJtQW5kQ2hlY2soX29wZXJhdGlvbikpCiAgICAgICAgICAgIF87CiAgICB9CgoJLy8gTUVUSE9EUwoKICAgIC8vIGNvbnN0cnVjdG9yIGlzIGdpdmVuIG51bWJlciBvZiBzaWdzIHJlcXVpcmVkIHRvIGRvIHByb3RlY3RlZCAib25seW1hbnlvd25lcnMiIHRyYW5zYWN0aW9ucwogICAgLy8gYXMgd2VsbCBhcyB0aGUgc2VsZWN0aW9uIG9mIGFkZHJlc3NlcyBjYXBhYmxlIG9mIGNvbmZpcm1pbmcgdGhlbS4KICAgIGZ1bmN0aW9uIG11bHRpb3duZWQoYWRkcmVzc1tdIF9vd25lcnMsIHVpbnQgX3JlcXVpcmVkKSB7CiAgICAgICAgbV9udW1Pd25lcnMgPSBfb3duZXJzLmxlbmd0aCArIDE7CiAgICAgICAgbV9vd25lcnNbMV0gPSB1aW50KG1zZy5zZW5kZXIpOwogICAgICAgIG1fb3duZXJJbmRleFt1aW50KG1zZy5zZW5kZXIpXSA9IDE7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX293bmVycy5sZW5ndGg7ICsraSkKICAgICAgICB7CiAgICAgICAgICAgIG1fb3duZXJzWzIgKyBpXSA9IHVpbnQoX293bmVyc1tpXSk7CiAgICAgICAgICAgIG1fb3duZXJJbmRleFt1aW50KF9vd25lcnNbaV0pXSA9IDIgKyBpOwogICAgICAgIH0KICAgICAgICBtX3JlcXVpcmVkID0gX3JlcXVpcmVkOwogICAgfQoKICAgIC8vIFJldm9rZXMgYSBwcmlvciBjb25maXJtYXRpb24gb2YgdGhlIGdpdmVuIG9wZXJhdGlvbgogICAgZnVuY3Rpb24gcmV2b2tlKGJ5dGVzMzIgX29wZXJhdGlvbikgZXh0ZXJuYWwgewogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KG1zZy5zZW5kZXIpXTsKICAgICAgICAvLyBtYWtlIHN1cmUgdGhleSdyZSBhbiBvd25lcgogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybjsKICAgICAgICB1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4OwogICAgICAgIHZhciBwZW5kaW5nID0gbV9wZW5kaW5nW19vcGVyYXRpb25dOwogICAgICAgIGlmIChwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID4gMCkgewogICAgICAgICAgICBwZW5kaW5nLnlldE5lZWRlZCsrOwogICAgICAgICAgICBwZW5kaW5nLm93bmVyc0RvbmUgLT0gb3duZXJJbmRleEJpdDsKICAgICAgICAgICAgUmV2b2tlKG1zZy5zZW5kZXIsIF9vcGVyYXRpb24pOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBSZXBsYWNlcyBhbiBvd25lciBgX2Zyb21gIHdpdGggYW5vdGhlciBgX3RvYC4KICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgewogICAgICAgIGlmIChpc093bmVyKF90bykpIHJldHVybjsKICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChfZnJvbSldOwogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybjsKCiAgICAgICAgY2xlYXJQZW5kaW5nKCk7CiAgICAgICAgbV9vd25lcnNbb3duZXJJbmRleF0gPSB1aW50KF90byk7CiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX2Zyb20pXSA9IDA7CiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX3RvKV0gPSBvd25lckluZGV4OwogICAgICAgIE93bmVyQ2hhbmdlZChfZnJvbSwgX3RvKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIF9vd25lcikgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsKICAgICAgICBpZiAoaXNPd25lcihfb3duZXIpKSByZXR1cm47CgogICAgICAgIGNsZWFyUGVuZGluZygpOwogICAgICAgIGlmIChtX251bU93bmVycyA+PSBjX21heE93bmVycykKICAgICAgICAgICAgcmVvcmdhbml6ZU93bmVycygpOwogICAgICAgIGlmIChtX251bU93bmVycyA+PSBjX21heE93bmVycykKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIG1fbnVtT3duZXJzKys7CiAgICAgICAgbV9vd25lcnNbbV9udW1Pd25lcnNdID0gdWludChfb3duZXIpOwogICAgICAgIG1fb3duZXJJbmRleFt1aW50KF9vd25lcildID0gbV9udW1Pd25lcnM7CiAgICAgICAgT3duZXJBZGRlZChfb3duZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZU93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgewogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KF9vd25lcildOwogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybjsKICAgICAgICBpZiAobV9yZXF1aXJlZCA+IG1fbnVtT3duZXJzIC0gMSkgcmV0dXJuOwoKICAgICAgICBtX293bmVyc1tvd25lckluZGV4XSA9IDA7CiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX293bmVyKV0gPSAwOwogICAgICAgIGNsZWFyUGVuZGluZygpOwogICAgICAgIHJlb3JnYW5pemVPd25lcnMoKTsgLy9tYWtlIHN1cmUgbV9udW1Pd25lciBpcyBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG93bmVycyBhbmQgYWx3YXlzIHBvaW50cyB0byB0aGUgb3B0aW1hbCBmcmVlIHNsb3QKICAgICAgICBPd25lclJlbW92ZWQoX293bmVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VSZXF1aXJlbWVudCh1aW50IF9uZXdSZXF1aXJlZCkgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsKICAgICAgICBpZiAoX25ld1JlcXVpcmVkID4gbV9udW1Pd25lcnMpIHJldHVybjsKICAgICAgICBtX3JlcXVpcmVkID0gX25ld1JlcXVpcmVkOwogICAgICAgIGNsZWFyUGVuZGluZygpOwogICAgICAgIFJlcXVpcmVtZW50Q2hhbmdlZChfbmV3UmVxdWlyZWQpOwogICAgfQoKICAgIC8vIEdldHMgYW4gb3duZXIgYnkgMC1pbmRleGVkIHBvc2l0aW9uICh1c2luZyBudW1Pd25lcnMgYXMgdGhlIGNvdW50KQogICAgZnVuY3Rpb24gZ2V0T3duZXIodWludCBvd25lckluZGV4KSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIGFkZHJlc3MobV9vd25lcnNbb3duZXJJbmRleCArIDFdKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FkZHIpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gbV9vd25lckluZGV4W3VpbnQoX2FkZHIpXSA+IDA7CiAgICB9CgogICAgZnVuY3Rpb24gaGFzQ29uZmlybWVkKGJ5dGVzMzIgX29wZXJhdGlvbiwgYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICB2YXIgcGVuZGluZyA9IG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsKICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChfb3duZXIpXTsKCiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXkncmUgYW4gb3duZXIKICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm4gZmFsc2U7CgogICAgICAgIC8vIGRldGVybWluZSB0aGUgYml0IHRvIHNldCBmb3IgdGhpcyBvd25lci4KICAgICAgICB1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4OwogICAgICAgIHJldHVybiAhKHBlbmRpbmcub3duZXJzRG9uZSAmIG93bmVySW5kZXhCaXQgPT0gMCk7CiAgICB9CgogICAgLy8gSU5URVJOQUwgTUVUSE9EUwoKICAgIGZ1bmN0aW9uIGNvbmZpcm1BbmRDaGVjayhieXRlczMyIF9vcGVyYXRpb24pIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvLyBkZXRlcm1pbmUgd2hhdCBpbmRleCB0aGUgcHJlc2VudCBzZW5kZXIgaXM6CiAgICAgICAgdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQobXNnLnNlbmRlcildOwogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG93bmVyCiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOwoKICAgICAgICB2YXIgcGVuZGluZyA9IG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsKICAgICAgICAvLyBpZiB3ZSdyZSBub3QgeWV0IHdvcmtpbmcgb24gdGhpcyBvcGVyYXRpb24sIHN3aXRjaCBvdmVyIGFuZCByZXNldCB0aGUgY29uZmlybWF0aW9uIHN0YXR1cy4KICAgICAgICBpZiAocGVuZGluZy55ZXROZWVkZWQgPT0gMCkgewogICAgICAgICAgICAvLyByZXNldCBjb3VudCBvZiBjb25maXJtYXRpb25zIG5lZWRlZC4KICAgICAgICAgICAgcGVuZGluZy55ZXROZWVkZWQgPSBtX3JlcXVpcmVkOwogICAgICAgICAgICAvLyByZXNldCB3aGljaCBvd25lcnMgaGF2ZSBjb25maXJtZWQgKG5vbmUpIC0gc2V0IG91ciBiaXRtYXAgdG8gMC4KICAgICAgICAgICAgcGVuZGluZy5vd25lcnNEb25lID0gMDsKICAgICAgICAgICAgcGVuZGluZy5pbmRleCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aCsrOwogICAgICAgICAgICBtX3BlbmRpbmdJbmRleFtwZW5kaW5nLmluZGV4XSA9IF9vcGVyYXRpb247CiAgICAgICAgfQogICAgICAgIC8vIGRldGVybWluZSB0aGUgYml0IHRvIHNldCBmb3IgdGhpcyBvd25lci4KICAgICAgICB1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4OwogICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSAodGhlIG1lc3NhZ2Ugc2VuZGVyKSBoYXZlbid0IGNvbmZpcm1lZCB0aGlzIG9wZXJhdGlvbiBwcmV2aW91c2x5LgogICAgICAgIGlmIChwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID09IDApIHsKICAgICAgICAgICAgQ29uZmlybWF0aW9uKG1zZy5zZW5kZXIsIF9vcGVyYXRpb24pOwogICAgICAgICAgICAvLyBvayAtIGNoZWNrIGlmIGNvdW50IGlzIGVub3VnaCB0byBnbyBhaGVhZC4KICAgICAgICAgICAgaWYgKHBlbmRpbmcueWV0TmVlZGVkIDw9IDEpIHsKICAgICAgICAgICAgICAgIC8vIGVub3VnaCBjb25maXJtYXRpb25zOiByZXNldCBhbmQgcnVuIGludGVyaW9yLgogICAgICAgICAgICAgICAgZGVsZXRlIG1fcGVuZGluZ0luZGV4W21fcGVuZGluZ1tfb3BlcmF0aW9uXS5pbmRleF07CiAgICAgICAgICAgICAgICBkZWxldGUgbV9wZW5kaW5nW19vcGVyYXRpb25dOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAvLyBub3QgZW5vdWdoOiByZWNvcmQgdGhhdCB0aGlzIG93bmVyIGluIHBhcnRpY3VsYXIgY29uZmlybWVkLgogICAgICAgICAgICAgICAgcGVuZGluZy55ZXROZWVkZWQtLTsKICAgICAgICAgICAgICAgIHBlbmRpbmcub3duZXJzRG9uZSB8PSBvd25lckluZGV4Qml0OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlb3JnYW5pemVPd25lcnMoKSBwcml2YXRlIHsKICAgICAgICB1aW50IGZyZWUgPSAxOwogICAgICAgIHdoaWxlIChmcmVlIDwgbV9udW1Pd25lcnMpCiAgICAgICAgewogICAgICAgICAgICB3aGlsZSAoZnJlZSA8IG1fbnVtT3duZXJzICYmIG1fb3duZXJzW2ZyZWVdICE9IDApIGZyZWUrKzsKICAgICAgICAgICAgd2hpbGUgKG1fbnVtT3duZXJzID4gMSAmJiBtX293bmVyc1ttX251bU93bmVyc10gPT0gMCkgbV9udW1Pd25lcnMtLTsKICAgICAgICAgICAgaWYgKGZyZWUgPCBtX251bU93bmVycyAmJiBtX293bmVyc1ttX251bU93bmVyc10gIT0gMCAmJiBtX293bmVyc1tmcmVlXSA9PSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBtX293bmVyc1tmcmVlXSA9IG1fb3duZXJzW21fbnVtT3duZXJzXTsKICAgICAgICAgICAgICAgIG1fb3duZXJJbmRleFttX293bmVyc1tmcmVlXV0gPSBmcmVlOwogICAgICAgICAgICAgICAgbV9vd25lcnNbbV9udW1Pd25lcnNdID0gMDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjbGVhclBlbmRpbmcoKSBpbnRlcm5hbCB7CiAgICAgICAgdWludCBsZW5ndGggPSBtX3BlbmRpbmdJbmRleC5sZW5ndGg7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpCiAgICAgICAgICAgIGlmIChtX3BlbmRpbmdJbmRleFtpXSAhPSAwKQogICAgICAgICAgICAgICAgZGVsZXRlIG1fcGVuZGluZ1ttX3BlbmRpbmdJbmRleFtpXV07CiAgICAgICAgZGVsZXRlIG1fcGVuZGluZ0luZGV4OwogICAgfQoKICAgCS8vIEZJRUxEUwoKICAgIC8vIHRoZSBudW1iZXIgb2Ygb3duZXJzIHRoYXQgbXVzdCBjb25maXJtIHRoZSBzYW1lIG9wZXJhdGlvbiBiZWZvcmUgaXQgaXMgcnVuLgogICAgdWludCBwdWJsaWMgbV9yZXF1aXJlZDsKICAgIC8vIHBvaW50ZXIgdXNlZCB0byBmaW5kIGEgZnJlZSBzbG90IGluIG1fb3duZXJzCiAgICB1aW50IHB1YmxpYyBtX251bU93bmVyczsKCiAgICAvLyBsaXN0IG9mIG93bmVycwogICAgdWludFsyNTZdIG1fb3duZXJzOwogICAgdWludCBjb25zdGFudCBjX21heE93bmVycyA9IDI1MDsKICAgIC8vIGluZGV4IG9uIHRoZSBsaXN0IG9mIG93bmVycyB0byBhbGxvdyByZXZlcnNlIGxvb2t1cAogICAgbWFwcGluZyh1aW50ID0+IHVpbnQpIG1fb3duZXJJbmRleDsKICAgIC8vIHRoZSBvbmdvaW5nIG9wZXJhdGlvbnMuCiAgICBtYXBwaW5nKGJ5dGVzMzIgPT4gUGVuZGluZ1N0YXRlKSBtX3BlbmRpbmc7CiAgICBieXRlczMyW10gbV9wZW5kaW5nSW5kZXg7Cn0KCi8vIGluaGVyaXRhYmxlICJwcm9wZXJ0eSIgY29udHJhY3QgdGhhdCBlbmFibGVzIG1ldGhvZHMgdG8gYmUgcHJvdGVjdGVkIGJ5IHBsYWNpbmcgYSBsaW5lYXIgbGltaXQgKHNwZWNpZmlhYmxlKQovLyBvbiBhIHBhcnRpY3VsYXIgcmVzb3VyY2UgcGVyIGNhbGVuZGFyIGRheS4gaXMgbXVsdGlvd25lZCB0byBhbGxvdyB0aGUgbGltaXQgdG8gYmUgYWx0ZXJlZC4gcmVzb3VyY2UgdGhhdCBtZXRob2QKLy8gdXNlcyBpcyBzcGVjaWZpZWQgaW4gdGhlIG1vZGlmaWVyLgpjb250cmFjdCBkYXlsaW1pdCBpcyBtdWx0aW93bmVkIHsKCgkvLyBNT0RJRklFUlMKCiAgICAvLyBzaW1wbGUgbW9kaWZpZXIgZm9yIGRhaWx5IGxpbWl0LgogICAgbW9kaWZpZXIgbGltaXRlZERhaWx5KHVpbnQgX3ZhbHVlKSB7CiAgICAgICAgaWYgKHVuZGVyTGltaXQoX3ZhbHVlKSkKICAgICAgICAgICAgXzsKICAgIH0KCgkvLyBNRVRIT0RTCgogICAgLy8gY29uc3RydWN0b3IgLSBzdG9yZXMgaW5pdGlhbCBkYWlseSBsaW1pdCBhbmQgcmVjb3JkcyB0aGUgcHJlc2VudCBkYXkncyBpbmRleC4KICAgIGZ1bmN0aW9uIGRheWxpbWl0KHVpbnQgX2xpbWl0KSB7CiAgICAgICAgbV9kYWlseUxpbWl0ID0gX2xpbWl0OwogICAgICAgIG1fbGFzdERheSA9IHRvZGF5KCk7CiAgICB9CiAgICAvLyAocmUpc2V0cyB0aGUgZGFpbHkgbGltaXQuIG5lZWRzIG1hbnkgb2YgdGhlIG93bmVycyB0byBjb25maXJtLiBkb2Vzbid0IGFsdGVyIHRoZSBhbW91bnQgYWxyZWFkeSBzcGVudCB0b2RheS4KICAgIGZ1bmN0aW9uIHNldERhaWx5TGltaXQodWludCBfbmV3TGltaXQpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7CiAgICAgICAgbV9kYWlseUxpbWl0ID0gX25ld0xpbWl0OwogICAgfQogICAgLy8gcmVzZXRzIHRoZSBhbW91bnQgYWxyZWFkeSBzcGVudCB0b2RheS4gbmVlZHMgbWFueSBvZiB0aGUgb3duZXJzIHRvIGNvbmZpcm0uCiAgICBmdW5jdGlvbiByZXNldFNwZW50VG9kYXkoKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgewogICAgICAgIG1fc3BlbnRUb2RheSA9IDA7CiAgICB9CgogICAgLy8gSU5URVJOQUwgTUVUSE9EUwoKICAgIC8vIGNoZWNrcyB0byBzZWUgaWYgdGhlcmUgaXMgYXQgbGVhc3QgYF92YWx1ZWAgbGVmdCBmcm9tIHRoZSBkYWlseSBsaW1pdCB0b2RheS4gaWYgdGhlcmUgaXMsIHN1YnRyYWN0cyBpdCBhbmQKICAgIC8vIHJldHVybnMgdHJ1ZS4gb3RoZXJ3aXNlIGp1c3QgcmV0dXJucyBmYWxzZS4KICAgIGZ1bmN0aW9uIHVuZGVyTGltaXQodWludCBfdmFsdWUpIGludGVybmFsIG9ubHlvd25lciByZXR1cm5zIChib29sKSB7CiAgICAgICAgLy8gcmVzZXQgdGhlIHNwZW5kIGxpbWl0IGlmIHdlJ3JlIG9uIGEgZGlmZmVyZW50IGRheSB0byBsYXN0IHRpbWUuCiAgICAgICAgLyppZiAodG9kYXkoKSA+IG1fbGFzdERheSkgewogICAgICAgICAgICBtX3NwZW50VG9kYXkgPSAwOwogICAgICAgICAgICBtX2xhc3REYXkgPSB0b2RheSgpOwogICAgICAgIH0KICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgdGhlcmUncyBlbm91Z2ggbGVmdCAtIGlmIHNvLCBzdWJ0cmFjdCBhbmQgcmV0dXJuIHRydWUuCiAgICAgICAgLy8gb3ZlcmZsb3cgcHJvdGVjdGlvbiAgICAgICAgICAgICAgICAgICAgLy8gZGFpbHlMaW1pdCBjaGVjawogICAgICAgIGlmIChtX3NwZW50VG9kYXkgKyBfdmFsdWUgPj0gbV9zcGVudFRvZGF5ICYmIG1fc3BlbnRUb2RheSArIF92YWx1ZSA8PSBtX2RhaWx5TGltaXQpIHsKICAgICAgICAgICAgbV9zcGVudFRvZGF5ICs9IF92YWx1ZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsqLwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8vIGRldGVybWluZXMgdG9kYXkncyBpbmRleC4KICAgIGZ1bmN0aW9uIHRvZGF5KCkgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7IHJldHVybiBub3cgLyAxIGRheXM7IH0KCgkvLyBGSUVMRFMKCiAgICB1aW50IHB1YmxpYyBtX2RhaWx5TGltaXQ7CiAgICB1aW50IHB1YmxpYyBtX3NwZW50VG9kYXk7CiAgICB1aW50IHB1YmxpYyBtX2xhc3REYXk7Cn0KCi8vIGludGVyZmFjZSBjb250cmFjdCBmb3IgbXVsdGlzaWcgcHJveHkgY29udHJhY3RzOyBzZWUgYmVsb3cgZm9yIGRvY3MuCmNvbnRyYWN0IG11bHRpc2lnIHsKCgkvLyBFVkVOVFMKCiAgICAvLyBsb2dnZWQgZXZlbnRzOgogICAgLy8gRnVuZHMgaGFzIGFycml2ZWQgaW50byB0aGUgd2FsbGV0IChyZWNvcmQgaG93IG11Y2gpLgogICAgZXZlbnQgRGVwb3NpdChhZGRyZXNzIF9mcm9tLCB1aW50IHZhbHVlKTsKICAgIC8vIFNpbmdsZSB0cmFuc2FjdGlvbiBnb2luZyBvdXQgb2YgdGhlIHdhbGxldCAocmVjb3JkIHdobyBzaWduZWQgZm9yIGl0LCBob3cgbXVjaCwgYW5kIHRvIHdob20gaXQncyBnb2luZykuCiAgICBldmVudCBTaW5nbGVUcmFuc2FjdChhZGRyZXNzIG93bmVyLCB1aW50IHZhbHVlLCBhZGRyZXNzIHRvLCBieXRlcyBkYXRhKTsKICAgIC8vIE11bHRpLXNpZyB0cmFuc2FjdGlvbiBnb2luZyBvdXQgb2YgdGhlIHdhbGxldCAocmVjb3JkIHdobyBzaWduZWQgZm9yIGl0IGxhc3QsIHRoZSBvcGVyYXRpb24gaGFzaCwgaG93IG11Y2gsIGFuZCB0byB3aG9tIGl0J3MgZ29pbmcpLgogICAgZXZlbnQgTXVsdGlUcmFuc2FjdChhZGRyZXNzIG93bmVyLCBieXRlczMyIG9wZXJhdGlvbiwgdWludCB2YWx1ZSwgYWRkcmVzcyB0bywgYnl0ZXMgZGF0YSk7CiAgICAvLyBDb25maXJtYXRpb24gc3RpbGwgbmVlZGVkIGZvciBhIHRyYW5zYWN0aW9uLgogICAgZXZlbnQgQ29uZmlybWF0aW9uTmVlZGVkKGJ5dGVzMzIgb3BlcmF0aW9uLCBhZGRyZXNzIGluaXRpYXRvciwgdWludCB2YWx1ZSwgYWRkcmVzcyB0bywgYnl0ZXMgZGF0YSk7CgogICAgLy8gRlVOQ1RJT05TCgogICAgLy8gVE9ETzogZG9jdW1lbnQKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvKSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIGV4ZWN1dGUoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgZXh0ZXJuYWwgcmV0dXJucyAoYnl0ZXMzMik7CiAgICBmdW5jdGlvbiBjb25maXJtKGJ5dGVzMzIgX2gpIHJldHVybnMgKGJvb2wpOwp9CgovLyB1c2FnZToKLy8gYnl0ZXMzMiBoID0gV2FsbGV0KHcpLmZyb20ob25lT3duZXIpLnRyYW5zYWN0KHRvLCB2YWx1ZSwgZGF0YSk7Ci8vIFdhbGxldCh3KS5mcm9tKGFub3RoZXJPd25lcikuY29uZmlybShoKTsKY29udHJhY3QgV2FsbGV0IGlzIG11bHRpc2lnLCBtdWx0aW93bmVkLCBkYXlsaW1pdCB7CgoJLy8gVFlQRVMKCiAgICAvLyBUcmFuc2FjdGlvbiBzdHJ1Y3R1cmUgdG8gcmVtZW1iZXIgZGV0YWlscyBvZiB0cmFuc2FjdGlvbiBsZXN0IGl0IG5lZWQgYmUgc2F2ZWQgZm9yIGEgbGF0ZXIgY2FsbC4KICAgIHN0cnVjdCBUcmFuc2FjdGlvbiB7CiAgICAgICAgYWRkcmVzcyB0bzsKICAgICAgICB1aW50IHZhbHVlOwogICAgICAgIGJ5dGVzIGRhdGE7CiAgICB9CgogICAgLy8gTUVUSE9EUwoKICAgIC8vIGNvbnN0cnVjdG9yIC0ganVzdCBwYXNzIG9uIHRoZSBvd25lciBhcnJheSB0byB0aGUgbXVsdGlvd25lZCBhbmQKICAgIC8vIHRoZSBsaW1pdCB0byBkYXlsaW1pdAogICAgZnVuY3Rpb24gV2FsbGV0KGFkZHJlc3NbXSBfb3duZXJzLCB1aW50IF9yZXF1aXJlZCwgdWludCBfZGF5bGltaXQpCiAgICAgICAgICAgIG11bHRpb3duZWQoX293bmVycywgX3JlcXVpcmVkKSBkYXlsaW1pdChfZGF5bGltaXQpIHsKICAgIH0KCiAgICAvLyBraWxscyB0aGUgY29udHJhY3Qgc2VuZGluZyBldmVyeXRoaW5nIHRvIGBfdG9gLgogICAgZnVuY3Rpb24ga2lsbChhZGRyZXNzIF90bykgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsKICAgICAgICBzdWljaWRlKF90byk7CiAgICB9CgogICAgLy8gZ2V0cyBjYWxsZWQgd2hlbiBubyBvdGhlciBmdW5jdGlvbiBtYXRjaGVzCiAgICBmdW5jdGlvbigpIHBheWFibGUgewogICAgICAgIC8vIGp1c3QgYmVpbmcgc2VudCBzb21lIGNhc2g/CiAgICAgICAgaWYgKG1zZy52YWx1ZSA+IDApCiAgICAgICAgICAgIERlcG9zaXQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgIH0KCiAgICAvLyBPdXRzaWRlLXZpc2libGUgdHJhbnNhY3QgZW50cnkgcG9pbnQuIEV4ZWN1dGVzIHRyYW5zYWN0aW9uIGltbWVkaWF0ZWx5IGlmIGJlbG93IGRhaWx5IHNwZW5kIGxpbWl0LgogICAgLy8gSWYgbm90LCBnb2VzIGludG8gbXVsdGlzaWcgcHJvY2Vzcy4gV2UgcHJvdmlkZSBhIGhhc2ggb24gcmV0dXJuIHRvIGFsbG93IHRoZSBzZW5kZXIgdG8gcHJvdmlkZQogICAgLy8gc2hvcnRjdXRzIGZvciB0aGUgb3RoZXIgY29uZmlybWF0aW9ucyAoYWxsb3dpbmcgdGhlbSB0byBhdm9pZCByZXBsaWNhdGluZyB0aGUgX3RvLCBfdmFsdWUKICAgIC8vIGFuZCBfZGF0YSBhcmd1bWVudHMpLiBUaGV5IHN0aWxsIGdldCB0aGUgb3B0aW9uIG9mIHVzaW5nIHRoZW0gaWYgdGhleSB3YW50LCBhbnl3YXlzLgogICAgZnVuY3Rpb24gZXhlY3V0ZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBleHRlcm5hbCBvbmx5b3duZXIgcmV0dXJucyAoYnl0ZXMzMiBfcikgewogICAgICAgIC8vIGZpcnN0LCB0YWtlIHRoZSBvcHBvcnR1bml0eSB0byBjaGVjayB0aGF0IHdlJ3JlIHVuZGVyIHRoZSBkYWlseSBsaW1pdC4KICAgICAgICBpZiAodW5kZXJMaW1pdChfdmFsdWUpKSB7CiAgICAgICAgICAgIFNpbmdsZVRyYW5zYWN0KG1zZy5zZW5kZXIsIF92YWx1ZSwgX3RvLCBfZGF0YSk7CiAgICAgICAgICAgIC8vIHllcyAtIGp1c3QgZXhlY3V0ZSB0aGUgY2FsbC4KICAgICAgICAgICAgX3RvLmNhbGwudmFsdWUoX3ZhbHVlKShfZGF0YSk7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICAvLyBkZXRlcm1pbmUgb3VyIG9wZXJhdGlvbiBoYXNoLgogICAgICAgIF9yID0gc2hhMyhtc2cuZGF0YSwgYmxvY2subnVtYmVyKTsKICAgICAgICBpZiAoIWNvbmZpcm0oX3IpICYmIG1fdHhzW19yXS50byA9PSAwKSB7CiAgICAgICAgICAgIG1fdHhzW19yXS50byA9IF90bzsKICAgICAgICAgICAgbV90eHNbX3JdLnZhbHVlID0gX3ZhbHVlOwogICAgICAgICAgICBtX3R4c1tfcl0uZGF0YSA9IF9kYXRhOwogICAgICAgICAgICBDb25maXJtYXRpb25OZWVkZWQoX3IsIG1zZy5zZW5kZXIsIF92YWx1ZSwgX3RvLCBfZGF0YSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIGNvbmZpcm0gYSB0cmFuc2FjdGlvbiB0aHJvdWdoIGp1c3QgdGhlIGhhc2guIHdlIHVzZSB0aGUgcHJldmlvdXMgdHJhbnNhY3Rpb25zIG1hcCwgbV90eHMsIGluIG9yZGVyCiAgICAvLyB0byBkZXRlcm1pbmUgdGhlIGJvZHkgb2YgdGhlIHRyYW5zYWN0aW9uIGZyb20gdGhlIGhhc2ggcHJvdmlkZWQuCiAgICBmdW5jdGlvbiBjb25maXJtKGJ5dGVzMzIgX2gpIG9ubHltYW55b3duZXJzKF9oKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKG1fdHhzW19oXS50byAhPSAwKSB7CiAgICAgICAgICAgIG1fdHhzW19oXS50by5jYWxsLnZhbHVlKG1fdHhzW19oXS52YWx1ZSkobV90eHNbX2hdLmRhdGEpOwogICAgICAgICAgICBNdWx0aVRyYW5zYWN0KG1zZy5zZW5kZXIsIF9oLCBtX3R4c1tfaF0udmFsdWUsIG1fdHhzW19oXS50bywgbV90eHNbX2hdLmRhdGEpOwogICAgICAgICAgICBkZWxldGUgbV90eHNbX2hdOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgLy8gSU5URVJOQUwgTUVUSE9EUwoKICAgIGZ1bmN0aW9uIGNsZWFyUGVuZGluZygpIGludGVybmFsIHsKICAgICAgICB1aW50IGxlbmd0aCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aDsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkKICAgICAgICAgICAgZGVsZXRlIG1fdHhzW21fcGVuZGluZ0luZGV4W2ldXTsKICAgICAgICBzdXBlci5jbGVhclBlbmRpbmcoKTsKICAgIH0KCgkvLyBGSUVMRFMKCiAgICAvLyBwZW5kaW5nIHRyYW5zYWN0aW9ucyB3ZSBoYXZlIGF0IHByZXNlbnQuCiAgICBtYXBwaW5nIChieXRlczMyID0+IFRyYW5zYWN0aW9uKSBtX3R4czsKfQ=='.
	

]
