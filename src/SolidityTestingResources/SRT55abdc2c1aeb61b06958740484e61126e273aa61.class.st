Class {
	#name : #SRT55abdc2c1aeb61b06958740484e61126e273aa61,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT55abdc2c1aeb61b06958740484e61126e273aa61 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KICB9Cgp9Cgpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgcGF1c2VkCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9Cgpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCmNvbnRyYWN0IFBhdXNhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgUGF1c2FibGUgewoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogIH0KfQoKY29udHJhY3QgRmFjdG9yeSB7CgogICAgLy8gYWRkcmVzcyBwdWJsaWMgbWFpbm5ldFByZXNhbGVDb250cmFjdEFkZHJlc3MgPSAweDZhNUIwZmEwMTU5MGVjMkYwMzY4MjAyMzE5MkM5NUEyRUJkOGUzQjk7CiAgICAvLyBhZGRyZXNzW10gcHVibGljIG1haW5uZXRQcmVzYWxlQnV5ZXJzID0gWwogICAgLy8gICAgIDB4MDAwMTBiZDg2MDZhODRiMWJiYWQwZjJjNzBiMTNjY2U0NGE0NjkxMCwKICAgIC8vICAgICAweDAwYTEwOWFiMDEwMjgwNTY3Njg0NjlhYTExMzI4YzhmOWQzZGI0NWIsCiAgICAvLyAgICAgMHgwMWUyZjliYTUzYjZjYjkxZTdmMTU4MDkwZDI0ZWJiY2FkZjBjNTY0LAogICAgLy8gICAgIDB4MDM0NzI5N2M4YzFmMjc4YzczOWZmOGQ3NjU1MGEzMzg2Y2Y4OGI2MCwKICAgIC8vICAgICAweDA5YjQ2NzQ5OWNmYTViMDk0YWE5NmVlYTgwZmE3MDk1YTI1MDg3MzEsCiAgICAvLyAgICAgMHgwY2VhM2U1YzM2NjNmODYzNGI2MjMzMjdhNjM1Y2E4YzJlMGNhMjc2LAogICAgLy8gICAgIDB4MGY2NTliODM4MjcwMzkwYWFhNmJmMTZlMGI5ZDAxYWQxNWQ0M2YwMCwKICAgIC8vICAgICAweDE4OGNhYzM0OWM2YTE1NjQ3NjcxMWEyMzU3Nzc5NzA2Y2ZlZDQwM2YsCiAgICAvLyAgICAgMHgxOGVhMzliMjdiMWRkMGU1M2E0NmE5MGY1NDRhM2VlNmUxNmY5NGM0LAogICAgLy8gICAgIDB4MWIzYjM2YjM2YTY0YWFlZjcxMzU0ZWY2NTViZmZkNTc3YmEwMjc2YywKICAgIC8vICAgICAweDFlNzRhNDZlOTY4YmMwNDcyZDA5NTMzYmY5M2RhMjdhNmMyMWIwNzksCiAgICAvLyAgICAgMHgyMGFiZjY1NjM0MjE5NTEyYzZjOThhNjQ2MTRjNDMyMjBjYTIwODViLAogICAgLy8gICAgIDB4MjE5NWZlNzZkMzU4YWNkMmRjN2U4MDRmNjBiYjVmNGQ1M2Q5ZjkwNywKICAgIC8vICAgICAweDIzY2RjZGZjZjU4YTU5M2VkMTZjZjhmZjU1MTZhMzdmZWUxZDQ4ZDgsCiAgICAvLyAgICAgMHgyNDcxY2ViNzUyMGI5MjZiYTAyZDg3NmNkMDMyZmQwMjAyMzdlNDEzLAogICAgLy8gICAgIDB4MjQ5ZjYwMGZkMTU4Y2NkODFhNDE4ZGI5M2E1ZDNkMWIzYzQyMGIxMywKICAgIC8vICAgICAweDI2N2JlMWMxZDY4NGY3OGNiNGY2YTE3NmM0OTExYjc0MWU0ZmZkYzAsCiAgICAvLyAgICAgMHgyYzAyZDAzZjUzNDg5YmQyNzc0ZjllMzYwZWEzOTNhNmM2MzI5YmRiLAogICAgLy8gICAgIDB4MzMwYzYzYTViNzM3YjU1NDJiZTEwOGE3NGIzZmVmNjI3MjYxOTU4NSwKICAgIC8vICAgICAweDM1OGMzOWNjMGFiYTVmY2MwNjg5ZDg0MDAyNGM0Y2FlYjA2Zjg1YzAsCiAgICAvLyAgICAgMHgzNmNhMTMyMmYyMzIwOTcwM2Q3YmZjNDY2M2QyMjY3YjA3YTRjYmU4LAogICAgLy8gICAgIDB4MzgzM2Y4ZGJkYmQ2YmRjYjZhODgzZmYyMDliODY5MTQ4OTY1YjM2NCwKICAgIC8vICAgICAweDM4N2ZhNDExZmFlNjc2OWU0ZmNlZGNiYTgzOGQyMmVhMmRkOWZmZWQsCiAgICAvLyAgICAgMHgzZDZmMjljNjdmNTcxY2FkODI3YmI1MTJjNzk0OWIwYTFjMGI5ODk5LAogICAgLy8gICAgIDB4M2ViMGFlZmFiZWM0MjkxNDlkZDBkNGFlNTYwMjM4ZmIwYjY4OTc2ZSwKICAgIC8vICAgICAweDNmMDRiNzEwMTcwOGI3ZTRhMmM2OTMyNzAyNTRlZjhhMzI5NzdiMzYsCiAgICAvLyAgICAgMHg0MWU4Mzc0Mjg2YWFjYjJiODUxODljYzc0YjRkMWMwMzYyZDRmYzgwLAogICAgLy8gICAgIDB4NDY0NGM4OGI5OGRkNWRkYTBjYjYwNDAzNjZkZjJiNGYzN2U2YjUwZiwKICAgIC8vICAgICAweDRhODNjZWU3ZDgzYzI4ODkxZDg1MTkxMGY3YTI0MGE0YzJjNGQ5ZWIsCiAgICAvLyAgICAgMHg0YjAyNTAwOThjZjNmNjJmNDU5NWJlOTNkOGMwYWZjZmUwYmQ2M2YxLAogICAgLy8gICAgIDB4NGY4MTNiNWNmMjc1MGE1OWE0NWYzYzVlNTAzOTdkNmFjMDJiNjRmOSwKICAgIC8vICAgICAweDUwMzBiYWY1OGZhYjNjOTU3OTllZGM5ZTZjZDA4YWJmZGU1ZjFlNWEsCiAgICAvLyAgICAgMHg1MTA3MmM0ZjliY2E4OGJjOWIzYjIzMjdmYjQ0YjEyNzJiYTExNWMwLAogICAgLy8gICAgIDB4NTMyY2JjNjhmNjZiYjc0ODIwODZhMTU5NzJmYTIwZWUzYWNhMjFjNCwKICAgIC8vICAgICAweDUzNTY0NTgxYTQ1YTU1MjAyNDMwODNjZTA1MGY3NmVmOTMzYTFlNjYsCiAgICAvLyAgICAgMHg1NWM4NmU4MGZiZTJkYjBkODFmZjg1NjExMDU1NmIxZGYxNzEzODk5LAogICAgLy8gICAgIDB4NTk4ZjY1YzM0NGIzNjQ0YTliNmJkMjNhOTk4NjBjZDhkMGMzZTIwYSwKICAgIC8vICAgICAweDVmMmJkZjI2ZjY1MjhjZTA1YWFjNzdkN2ZhNTJiYWM3YTgzNmVmNjYsCiAgICAvLyAgICAgMHg2M2UwZDg3NTM0ODBmZmNjNmNlNjVlYzQ2ZjllZmIwNjc3OGU4MTljLAogICAgLy8gICAgIDB4NjYyOTRhMDBlODAxZGI1MjRiMjE1OTUyYmY2MGU4NWUxYTk0NTg5NSwKICAgIC8vICAgICAweDY3NzFiYjcwZDg0YmVkZWI2MDE2NmRmNDdlYmI5MDU2MTY5ZDdhMGQsCiAgICAvLyAgICAgMHg2N2FkZmFiMDU2ZWRjMWEwMzYwMjEzOWI4YWMzNmEwNmZjNjJmMWJiLAogICAgLy8gICAgIDB4NzJkZjg5NGMzMzRhMGI4YTU4YjdkMjIwYjcyZDI5YTUwNTIxZDlhNCwKICAgIC8vICAgICAweDcyZjA4NGY1ZWQ5Mzg0MTk0ODcwYjg1NWMyMmIwMDY1OTYxMzA1YjQsCiAgICAvLyAgICAgMHg3NTM2MGNiZThjN2NiODE3NGIxYjYyM2E2ZDlhYWNmOTUyYzExN2UzLAogICAgLy8gICAgIDB4NzVlN2Y2NDBiZjY5NjhiNmYzMmM0N2EzY2Q4MmMzYzJjOWRjYWU2OCwKICAgIC8vICAgICAweDc2ZDM0NTFiZWM1NzEzMTZjZmUwOTZiMWFiNjQ2ODEyODZiMDc4ZDUsCiAgICAvLyAgICAgMHg3ODNiZDhhNjA3N2QwMmVlZWNiZmMxNDI5MjlkNzFmZjRhYTI3NjJkLAogICAgLy8gICAgIDB4N2MwMTExM2MzYzM4MmQ5YzFjMzllM2RhYTkyNjJlMjc3ODdhMDJlZSwKICAgIC8vICAgICAweDdlZDFlNDY5ZmNiM2VlMTljMDM2NmQ4MjllMjkxNDUxYmU2MzhlNTksCiAgICAvLyAgICAgMHg3ZmVjM2FmYjEwNzVkM2VlMmNhNmJkNjg1YTk4OTUyOTBhZDkxN2RmLAogICAgLy8gICAgIDB4ODNlMDlhZWUzODJjNzRhYzBjMzA5NGQ0YTk5YTQ1ZDYwNzU5MGMyOCwKICAgIC8vICAgICAweDg2YTM5MmI0MGM2YjMzZmRiYjE0MmVhZTRjNDBmZjA1ZDNkYWE4MmYsCiAgICAvLyAgICAgMHg4N2IxMGRhZjA1MjJlNTRjZDRjZGQzMDI5ZWFjMGZkZDMwNmY2NDRlLAogICAgLy8gICAgIDB4ODdiMzI1Y2YwMDBlNDI2YjY0NTE4ZDUwYmYzZmIxMWMyOGVlZTg5ZSwKICAgIC8vICAgICAweDhjNDZkYzgyOTk1ZDNiYWQzMzc0MThkZjlhMTExYjI4OWZkNTBhYmMsCiAgICAvLyAgICAgMHg5M2ZiN2JlYTM2ZDc4OGJjYjg3YmE5MjA5NGI3MmM2YzQzNTg2YmRiLAogICAgLy8gICAgIDB4OTUyYWEyMDJmOTY1NmVjYTA1MWVmMzZjZTY2OTI1YTBkMGUzNDcyMywKICAgIC8vICAgICAweDk5MDMzMjIxMjQ2NzdjMmFhZjI4OWVlYzUxMTdiZmE4YWVhYzNmNDIsCiAgICAvLyAgICAgMHg5OTM4NDFhYjUwMjhlZTc0MjQ1ZDM1MGVkZDNjODk0MDVkNDIxMmVhLAogICAgLy8gICAgIDB4OWFjMDIzM2E5N2IwMDA1NDYyZjdkNjU5NDNiOGNmNmQ3ZDA3NDI4MCwKICAgIC8vICAgICAweDlkOGQxN2QxMzRiZTg5YzgzMjU1OWUxNjUzZjhlMTVkNmI4YmIwNWEsCiAgICAvLyAgICAgMHhhMTAyZDM5ZjRhYTY3ZjQ1OGU5NTM2YjA0ZGE5YjgwODQ3YzA0YTU3LAogICAgLy8gICAgIDB4YTE2M2Q0MGRlOWRjNjgxZDc4NTBlZDI0NTY0ZDE4MDU0MTRhYzQ2OCwKICAgIC8vICAgICAweGEyNjMzMjcyMDBhOTY0OGMwNjNlZjFkOWYwNzQ2YTUwYjIzY2FhNTYsCiAgICAvLyAgICAgMHhhZWZiNTQ2NGZhZGM5MjkzNzAwYTljNGJjNGZiZWZiNGQ3Njg5MzFkLAogICAgLy8gICAgIDB4YWYzMDJhYTc1MTA1ODc5N2M2YWI1MjQ5Y2I4MzU0N2E2MzU3NzYzYSwKICAgIC8vICAgICAweGIzN2U2MmRjZTlkYWVlNWEyZGU0MWU0NDc1YzgyNjJmNWJiOWVkYWUsCiAgICAvLyAgICAgMHhiOTNiNmU4ODE2MDkxY2ViNzhjY2EzNWY3MDIyYjQ3N2U0NGM0OTBhLAogICAgLy8gICAgIDB4Yjk0MTQyZjUyMmJmZTc3YjEwNzU1MjdkOGU2YTExY2JjZDkwMWUyNiwKICAgIC8vICAgICAweGJiNGU2ZmRmYmMwMWIxZjJiNTIyNzJkOTk4ZmNhYTI3NGQ3ZjE2NTEsCiAgICAvLyAgICAgMHhiZGY5YjViZGE1M2M3MDljY2U0NGEwNzMwNjdiM2UyNmFmZTFkODE2LAogICAgLy8gICAgIDB4Y2Q3M2ZkNWRlZWMzNjcwOTI2ZDBjZDI5YjYzNGY2YzI5MzhiMWRmNiwKICAgIC8vICAgICAweGNmMTk5NmMzYjdmOWZmODkxZWJmOTQwNjdiNmQwZWRmYTFiMTgxZjAsCiAgICAvLyAgICAgMHhkMWY2NzA3NzkyNDYzNDk5MzFiYTc2ZmZkZjhjOTBkZTcwOTQ2Y2FjLAogICAgLy8gICAgIDB4ZDJlM2M0ODU2ZDI1YTcxZmE3Nzc3NjliNWRjOTU5Njg5MDU2ODAyNiwKICAgIC8vICAgICAweGQ0Y2I3ZmQ4ZTJiMjE0NTk2YzFjYmQ0YmEwZjFjNzAxZmJmMmJjYjgsCiAgICAvLyAgICAgMHhkNTc0MmMwNWU2YWU5ZWE5OWFmNDVhN2M3ZDE1MTdjZTZjMDQyZDI1LAogICAgLy8gICAgIDB4ZTQxY2UyNDc3NTZkNzU3ZTMwNjBlYzM2MWMyMDFiZTAxOWJkNTRmNiwKICAgIC8vICAgICAweGU3MDJhZmI5OWE0NmY5YTZlMTVkMzU2NTgyMzg2N2I4YjQwYzQ5OWMsCiAgICAvLyAgICAgMHhlYzMwZWFjZGIzOTcwNWVjMjgxZTEwODkxZDYwNWNiMGJlNDFlMDk0LAogICAgLy8gICAgIDB4ZWU1NTE4MTM4NmQ5Yjc0MzA2NGM1NzA2MDEwMTRkZjE2M2Q1NTU0YywKICAgIC8vICAgICAweGVlOGNlNmYwZWJlZjQyMzEwNjhkYjM3MDVmYWRmZjVlZjlhMWY0NWUsCiAgICAvLyAgICAgMHhlZjU4MzIxMDMyY2Y2OTNmYTdlMzlmMzFlNDVjYmMzMmYyMDkyY2IzLAogICAgLy8gICAgIDB4ZWY5YTFiMjAzODQ5ODlmNzlmNzNmZDVhMjYxZTI3MGQ2ZDE4ODhkMywKICAgIC8vICAgICAweGY2NTZkMDRmMTNiN2JkZjA5NDEwYjhiNWNiNzViYmUzYWM1YTM3ZTcsCiAgICAvLyAgICAgMHhmNmRjNDNiYTMyOGFmZmVjMmFmZWJkYTQ3MmFjNjk3NzIwMGRhOTU3LAogICAgLy8gICAgIDB4ZjZlZGY1ZGNkZmJhNTVmM2NlY2VlMmE0MzBiYjZjMmQzMGE0YTFhOCwKICAgIC8vICAgICAweGY4YWMzNzQwNjIyMzA4NDE0YTQxNjE5YWYwNjQ4MzI4ZjY5YjZmYzAsCiAgICAvLyAgICAgMHhmOGYzMzdjNTE4YjQ5NzlmMTIzNDhjMjc5Njk2YTViNzc1NGY2NjJlLAogICAgLy8gICAgIDB4ZmJiMWI3M2M0ZjBiZGE0ZjY3ZGNhMjY2Y2U2ZWY0MmY1MjBmYmI5OCwKICAgIC8vICAgICAweGZjN2Q1ZTQ5OWY4NjlkOGVlMGIxN2M2MWIwZjZmODNiYmFjMmZiYzIsCiAgICAvLyAgICAgMHhmZmNhMWUyZTBlNTBmYWYxMGNkNGE4ZTFkNWJkMmY1ZGI1N2EwNzcxCiAgICAvLyBdOwoKICAgIC8vIGFkZHJlc3MgcHVibGljIHRlc3RuZXRQcmVzYWxlQ29udHJhY3RBZGRyZXNzID0gMHg2ZmI4QTYzODAwYTAwMTQxMDUyRWE1MjRmNDE1Mzk4MTg4ODc5MDg2OwogICAgLy8gYWRkcmVzc1tdIHB1YmxpYyB0ZXN0bmV0UHJlc2FsZUJ1eWVycyA9IFsKICAgIC8vICAgICAweGY2YzZmYWM4Yjc4ZTMxOTZlY2VkNjFkZjQyYTBkMzdjZmRkYmYzZjggIAogICAgLy8gXTsKCiAgICBmdW5jdGlvbiBjcmVhdGVDb250cmFjdCgKICAgICAgICBhZGRyZXNzIG5ld1dhbGxldCwKICAgICAgICBhZGRyZXNzIG5ld01hcmtldGluZ1dhbGxldCwKICAgICAgICBhZGRyZXNzIG5ld0xpcXVpZGl0eVJlc2VydmVXYWxsZXQsCiAgICAgICAgdWludDI1NiBuZXdJY29FdGhlck1pbkNhcCwKICAgICAgICB1aW50MjU2IG5ld0ljb0V0aGVyTWF4Q2FwLAogICAgICAgIHVpbnQyNTYgdG90YWxQcmVzYWxlUmFpc2VkKSByZXR1cm5zKGFkZHJlc3MgY3JlYXRlZCkKICAgIHsKICAgICAgICByZXR1cm4gbmV3IFNvbWFJY28oCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1dhbGxldCwKICAgICAgICAgICAgICAgICAgICAgICAgbmV3TWFya2V0aW5nV2FsbGV0LAogICAgICAgICAgICAgICAgICAgICAgICBuZXdMaXF1aWRpdHlSZXNlcnZlV2FsbGV0LAogICAgICAgICAgICAgICAgICAgICAgICBuZXdJY29FdGhlck1pbkNhcCAqIDEgZXRoZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0ljb0V0aGVyTWF4Q2FwICogMSBldGhlciwKICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxQcmVzYWxlUmFpc2VkCiAgICAgICAgKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVUZXN0TmV0Q29udHJhY3QoCiAgICAgICAgYWRkcmVzcyB3YWxsZXQsCiAgICAgICAgYWRkcmVzcyBtYXJrZXRpbmdXYWxsZXQsCiAgICAgICAgYWRkcmVzcyBsaXF1aWRpdHlSZXNlcnZlV2FsbGV0LAogICAgICAgIHVpbnQyNTYgbmV3SWNvRXRoZXJNaW5DYXAsCiAgICAgICAgdWludDI1NiBuZXdJY29FdGhlck1heENhcCwKICAgICAgICB1aW50MjU2IHRvdGFsUHJlc2FsZVJhaXNlZCkgcmV0dXJucyhhZGRyZXNzIGNyZWF0ZWQpCiAgICB7CiAgICAKICAgICAvKgogICAgIENvbnRyYWN0IEFkbWluL093bmVyOiAweDY5NUNBMmE5M0E1M2Y4MWE3YmM0OEUyYzkyODAxQTljMEQ0ODlhNEMKICAgICBGdW5kcyBXYWxsZXQ6IDB4MTE0MTg5OTI4MDIwNjQxQzM4OGNCRDYxMjZFNjE1ZjgzMjhBNzQwOQogICAgIE1hcmtldGluZyB3YWxsZXQ6IDB4MTE0MTg5OTI4MDIwNjQxQzM4OGNCRDYxMjZFNjE1ZjgzMjhBNzQwOQogICAgIExpcXVpZGl0eSByZXNlcnZlIDB4MDg3M0Q4YzQ3OEEyRTgwQzU0NjczNzQ2NjFlOTAzYzEyMWMzQThDNAogICAgIFByZXNhbGUgdG90YWwgc3VwcGx5OiAyMDA3NTAwMDAwMDAwMDAwMDAwMDAwCiAgICAgKi8KICAgICAKICAgICAgICBhZGRyZXNzIGNvbnRyYWN0QWRkcmVzcyA9IGNyZWF0ZUNvbnRyYWN0KAogICAgICAgICAgICB3YWxsZXQsCiAgICAgICAgICAgIG1hcmtldGluZ1dhbGxldCwKICAgICAgICAgICAgbGlxdWlkaXR5UmVzZXJ2ZVdhbGxldCwKICAgICAgICAgICAgbmV3SWNvRXRoZXJNaW5DYXAsCiAgICAgICAgICAgIG5ld0ljb0V0aGVyTWF4Q2FwLAogICAgICAgICAgICB0b3RhbFByZXNhbGVSYWlzZWQKICAgICAgICApOwoKICAgICAgICAvL21pZ3JhdGVQcmVzYWxlQmFsYW5jZXMoY29udHJhY3RBZGRyZXNzLCB0ZXN0bmV0UHJlc2FsZUNvbnRyYWN0QWRkcmVzcywgdGVzdG5ldFByZXNhbGVCdXllcnMpOwoKICAgICAgICAvL3RyYW5zZmVyT3duZXJzaGlwKG93bmVyLCBjb250cmFjdEFkZHJlc3MpOwoKICAgICAgICByZXR1cm4gY29udHJhY3RBZGRyZXNzOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZU1haW5OZXRDb250cmFjdCgKICAgICAgICB1aW50MjU2IG5ld0ljb0V0aGVyTWluQ2FwLAogICAgICAgIHVpbnQyNTYgbmV3SWNvRXRoZXJNYXhDYXApIHJldHVybnMoYWRkcmVzcyBjcmVhdGVkKQogICAgewogICAgICAgIC8vYWRkcmVzcyBvd25lciA9IDB4MTAyNTM3NmI4OTkxQUNBRkJjN2Q4NEZhMWE1NmE2M0RjZkJGMDRDQjsgLy8gbWFpbm5ldCBhZG1pbgogICAgICAgIGFkZHJlc3Mgd2FsbGV0ID0gMHgyMmM2NzMxQTIxYUQ5NDZCY2Q5MzRmNjJmMDRCMkQwNkVCRmJlZEM5OyAvLyBtYWlubmV0IGZ1bmRzCiAgICAgICAgYWRkcmVzcyBtYXJrZXRpbmdXYWxsZXQgPSAweDRBNTQ2NzQzMWI1NEMxNTJFNDA0RUI3MDIyNDJFNzgwMzA5NzJERTc7IC8vIG1hcmtldGluZyB3YWxsZXQKICAgICAgICBhZGRyZXNzIGxpcXVpZGl0eVJlc2VydmVXYWxsZXQgPSAweGRmMzk4RTBiRTllMERhMkQ4RjhENjg3RkQ2QjJjOTA4MmVFRkMyOWE7CgogICAgICAgIHVpbnQyNTYgdG90YWxQcmVzYWxlUmFpc2VkID0gMjU4NDA1MzEyMjc3OTc4NjI0MDAwOwoKICAgICAgICBhZGRyZXNzIGNvbnRyYWN0QWRkcmVzcyA9IGNyZWF0ZUNvbnRyYWN0KAogICAgICAgICAgICB3YWxsZXQsCiAgICAgICAgICAgIG1hcmtldGluZ1dhbGxldCwKICAgICAgICAgICAgbGlxdWlkaXR5UmVzZXJ2ZVdhbGxldCwKICAgICAgICAgICAgbmV3SWNvRXRoZXJNaW5DYXAsCiAgICAgICAgICAgIG5ld0ljb0V0aGVyTWF4Q2FwLAogICAgICAgICAgICB0b3RhbFByZXNhbGVSYWlzZWQKICAgICAgICApOwoKICAgICAgICAvL21pZ3JhdGVQcmVzYWxlQmFsYW5jZXMoY29udHJhY3RBZGRyZXNzLCBtYWlubmV0UHJlc2FsZUNvbnRyYWN0QWRkcmVzcywgbWFpbm5ldFByZXNhbGVCdXllcnMpOwoKICAgICAgICAvL3RyYW5zZmVyT3duZXJzaGlwKG93bmVyLCBjb250cmFjdEFkZHJlc3MpOwoKICAgICAgICByZXR1cm4gY29udHJhY3RBZGRyZXNzOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3MgY29udHJhY3RBZGRyZXNzKSBwdWJsaWMgewogICAgICAgIE93bmFibGUgb3duYWJsZUNvbnRyYWN0ID0gT3duYWJsZShjb250cmFjdEFkZHJlc3MpOwogICAgICAgIG93bmFibGVDb250cmFjdC50cmFuc2Zlck93bmVyc2hpcChvd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gbWlncmF0ZVByZXNhbGVCYWxhbmNlcygKICAgICAgICBhZGRyZXNzIGljb0NvbnRyYWN0QWRkcmVzcywKICAgICAgICBhZGRyZXNzIHByZXNhbGVDb250cmFjdEFkZHJlc3MsCiAgICAgICAgYWRkcmVzc1tdIGJ1eWVycykgcHVibGljCiAgICB7CiAgICAgICAgU29tYUljbyBpY29Db250cmFjdCA9IFNvbWFJY28oaWNvQ29udHJhY3RBZGRyZXNzKTsKICAgICAgICBFUkMyMEJhc2ljIHByZXNhbGVDb250cmFjdCA9IEVSQzIwQmFzaWMocHJlc2FsZUNvbnRyYWN0QWRkcmVzcyk7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgYnV5ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGFkZHJlc3MgYnV5ZXIgPSBidXllcnNbaV07CiAgICAgICAgICAgIGlmIChpY29Db250cmFjdC5iYWxhbmNlT2YoYnV5ZXIpID4gMCkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdWludDI1NiBiYWxhbmNlID0gcHJlc2FsZUNvbnRyYWN0LmJhbGFuY2VPZihidXllcik7CiAgICAgICAgICAgIGlmIChiYWxhbmNlID4gMCkgewogICAgICAgICAgICAgICAgaWNvQ29udHJhY3QubWFudWFsbHlBc3NpZ25Ub2tlbnMoYnV5ZXIsIGJhbGFuY2UpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cgpjb250cmFjdCBTb21hSWNvIGlzIFBhdXNhYmxlVG9rZW4gewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIlNvbWEgQ29tbXVuaXR5IFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlNDVCI7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKCiAgICBhZGRyZXNzIHB1YmxpYyBsaXF1aWRpdHlSZXNlcnZlV2FsbGV0OyAvLyBhZGRyZXNzIHdoZXJlIGxpcXVpZGl0eSByZXNlcnZlIHRva2VucyB3aWxsIGJlIGRlbGl2ZXJlZAogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OyAvLyBhZGRyZXNzIHdoZXJlIGZ1bmRzIGFyZSBjb2xsZWN0ZWQKICAgIGFkZHJlc3MgcHVibGljIG1hcmtldGluZ1dhbGxldDsgLy8gYWRkcmVzcyB3aGljaCBjb250cm9scyBtYXJrZXRpbmcgdG9rZW4gcG9vbAoKICAgIHVpbnQyNTYgcHVibGljIGljb1N0YXJ0VGltZXN0YW1wOyAvLyBJQ08gc3RhcnQgdGltZXN0YW1wCiAgICB1aW50MjU2IHB1YmxpYyBpY29FbmRUaW1lc3RhbXA7IC8vIElDTyBlbmQgdGltZXN0YW1wCgogICAgdWludDI1NiBwdWJsaWMgdG90YWxSYWlzZWQgPSAwOyAvLyB0b3RhbCBhbW91bnQgb2YgbW9uZXkgcmFpc2VkIGluIHdlaQogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7IC8vIHRvdGFsIHRva2VuIHN1cHBseSB3aXRoIGRlY2ltYWxzIHByZWNpc29pbgogICAgdWludDI1NiBwdWJsaWMgbWFya2V0aW5nUG9vbDsgLy8gbWFya2V0aW5nIHBvb2wgd2l0aCBkZWNpbWFscyBwcmVjaXNvaW4KICAgIHVpbnQyNTYgcHVibGljIHRva2Vuc1NvbGQgPSAwOyAvLyB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIHNvbGQKCiAgICBib29sIHB1YmxpYyBoYWx0ZWQgPSBmYWxzZTsgLy90aGUgb3duZXIgYWRkcmVzcyBjYW4gc2V0IHRoaXMgdG8gdHJ1ZSB0byBoYWx0IHRoZSBjcm93ZHNhbGUgZHVlIHRvIGVtZXJnZW5jeQoKICAgIHVpbnQyNTYgcHVibGljIGljb0V0aGVyTWluQ2FwOyAvLyBzaG91bGQgYmUgc3BlY2lmaWVkIGFzOiA4MDAwICogMSBldGhlcgogICAgdWludDI1NiBwdWJsaWMgaWNvRXRoZXJNYXhDYXA7IC8vIHNob3VsZCBiZSBzcGVjaWZpZWQgYXM6IDEyMDAwMCAqIDEgZXRoZXIKICAgIHVpbnQyNTYgcHVibGljIHJhdGUgPSA0NTA7IC8vIHN0YW5kYXJkIFNDVC9FVEggcmF0ZQoKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CgogICAgZnVuY3Rpb24gU29tYUljbygKICAgICAgICBhZGRyZXNzIG5ld1dhbGxldCwKICAgICAgICBhZGRyZXNzIG5ld01hcmtldGluZ1dhbGxldCwKICAgICAgICBhZGRyZXNzIG5ld0xpcXVpZGl0eVJlc2VydmVXYWxsZXQsCiAgICAgICAgdWludDI1NiBuZXdJY29FdGhlck1pbkNhcCwKICAgICAgICB1aW50MjU2IG5ld0ljb0V0aGVyTWF4Q2FwLAogICAgICAgIHVpbnQyNTYgdG90YWxQcmVzYWxlUmFpc2VkCiAgICApIHsKICAgICAgICByZXF1aXJlKG5ld1dhbGxldCAhPSAweDApOwogICAgICAgIHJlcXVpcmUobmV3TWFya2V0aW5nV2FsbGV0ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShuZXdMaXF1aWRpdHlSZXNlcnZlV2FsbGV0ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShuZXdJY29FdGhlck1pbkNhcCA8PSBuZXdJY29FdGhlck1heENhcCk7CiAgICAgICAgcmVxdWlyZShuZXdJY29FdGhlck1pbkNhcCA+IDApOwogICAgICAgIHJlcXVpcmUobmV3SWNvRXRoZXJNYXhDYXAgPiAwKTsKCiAgICAgICAgcGF1c2UoKTsKCiAgICAgICAgaWNvRXRoZXJNaW5DYXAgPSBuZXdJY29FdGhlck1pbkNhcDsKICAgICAgICBpY29FdGhlck1heENhcCA9IG5ld0ljb0V0aGVyTWF4Q2FwOwogICAgICAgIHdhbGxldCA9IG5ld1dhbGxldDsKICAgICAgICBtYXJrZXRpbmdXYWxsZXQgPSBuZXdNYXJrZXRpbmdXYWxsZXQ7CiAgICAgICAgbGlxdWlkaXR5UmVzZXJ2ZVdhbGxldCA9IG5ld0xpcXVpZGl0eVJlc2VydmVXYWxsZXQ7CgogICAgICAgIC8vIGNhbGN1bGF0ZSBtYXJrZXRpbmdQb29sIGFuZCB0b3RhbFN1cHBseSBiYXNlZCBvbiB0aGUgbWF4IGNhcDoKICAgICAgICAvLyB0b3RhbFN1cHBseSA9IHJhdGUgKiBpY29FdGhlck1heENhcCArIG1hcmtldGluZ1Bvb2wKICAgICAgICAvLyBtYXJrZXRpbmdQb29sID0gMTAlICogdG90YWxTdXBwbHkKICAgICAgICAvLyBoZW5jZToKICAgICAgICAvLyB0b3RhbFN1cHBseSA9IDEwLzkgKiByYXRlICogaWNvRXRoZXJNYXhDYXAKICAgICAgICB0b3RhbFN1cHBseSA9IGljb0V0aGVyTWF4Q2FwLm11bChyYXRlKS5tdWwoMTApLmRpdig5KTsKICAgICAgICBtYXJrZXRpbmdQb29sID0gdG90YWxTdXBwbHkuZGl2KDEwKTsKCiAgICAgICAgLy8gYWNjb3VudCBmb3IgdGhlIGZ1bmRzIHJhaXNlZCBkdXJpbmcgdGhlIHByZXNhbGUKICAgICAgICB0b3RhbFJhaXNlZCA9IHRvdGFsUmFpc2VkLmFkZCh0b3RhbFByZXNhbGVSYWlzZWQpOwoKICAgICAgICAvLyBhc3NpZ24gbWFya2V0aW5nIHBvb2wgdG8gbWFya2V0aW5nIHdhbGxldAogICAgICAgIGFzc2lnblRva2VucyhtYXJrZXRpbmdXYWxsZXQsIG1hcmtldGluZ1Bvb2wpOwogICAgfQoKICAgIC8vLyBmYWxsYmFjayBmdW5jdGlvbiB0byBidXkgdG9rZW5zCiAgICBmdW5jdGlvbiAoKSBub25IYWx0ZWQgbm9uWmVyb1B1cmNoYXNlIGFjY2VwdHNGdW5kcyBwYXlhYmxlIHsKICAgICAgICBhZGRyZXNzIHJlY2lwaWVudCA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CgogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gd2VpQW1vdW50Lm11bChyYXRlKTsKCiAgICAgICAgYXNzaWduVG9rZW5zKHJlY2lwaWVudCwgYW1vdW50KTsKICAgICAgICB0b3RhbFJhaXNlZCA9IHRvdGFsUmFpc2VkLmFkZCh3ZWlBbW91bnQpOwoKICAgICAgICBmb3J3YXJkRnVuZHNUb1dhbGxldCgpOwogICAgfQoKICAgIG1vZGlmaWVyIGFjY2VwdHNGdW5kcygpIHsKICAgICAgICBib29sIGhhc1N0YXJ0ZWQgPSBpY29TdGFydFRpbWVzdGFtcCAhPSAwICYmIG5vdyA+PSBpY29TdGFydFRpbWVzdGFtcDsKICAgICAgICByZXF1aXJlKGhhc1N0YXJ0ZWQpOwoKICAgICAgICAvLyBJQ08gaXMgY29udGludWVkIG92ZXIgdGhlIGVuZCBkYXRlIHVudGlsIHRoZSBtaW4gY2FwIGlzIHJlYWNoZWQKICAgICAgICBib29sIGlzSWNvSW5Qcm9ncmVzcyA9IG5vdyA8PSBpY29FbmRUaW1lc3RhbXAKICAgICAgICAgICAgICAgIHx8IChpY29FbmRUaW1lc3RhbXAgPT0gMCkgLy8gYmVmb3JlIGRhdGVzIGFyZSBzZXQKICAgICAgICAgICAgICAgIHx8IHRvdGFsUmFpc2VkIDwgaWNvRXRoZXJNaW5DYXA7CiAgICAgICAgcmVxdWlyZShpc0ljb0luUHJvZ3Jlc3MpOwoKICAgICAgICBib29sIGlzQmVsb3dNYXhDYXAgPSB0b3RhbFJhaXNlZCA8IGljb0V0aGVyTWF4Q2FwOwogICAgICAgIHJlcXVpcmUoaXNCZWxvd01heENhcCk7CgogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbm9uSGFsdGVkKCkgewogICAgICAgIHJlcXVpcmUoIWhhbHRlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBub25aZXJvUHVyY2hhc2UoKSB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIGZvcndhcmRGdW5kc1RvV2FsbGV0KCkgaW50ZXJuYWwgewogICAgICAgIHdhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOyAvLyBpbW1lZGlhdGVseSBzZW5kIEV0aGVyIHRvIHdhbGxldCBhZGRyZXNzLCBwcm9wYWdhdGVzIGV4Y2VwdGlvbiBpZiBleGVjdXRpb24gZmFpbHMKICAgIH0KCiAgICBmdW5jdGlvbiBhc3NpZ25Ub2tlbnMoYWRkcmVzcyByZWNpcGllbnQsIHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB7CiAgICAgICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IGJhbGFuY2VzW3JlY2lwaWVudF0uYWRkKGFtb3VudCk7CiAgICAgICAgdG9rZW5zU29sZCA9IHRva2Vuc1NvbGQuYWRkKGFtb3VudCk7CgogICAgICAgIC8vIHNhbml0eSBzYWZlZ3VhcmQKICAgICAgICBpZiAodG9rZW5zU29sZCA+IHRvdGFsU3VwcGx5KSB7CiAgICAgICAgICAgIC8vIHRoZXJlIGlzIGEgY2hhbmNlIHRoYXQgdG9rZW5zIGFyZSBzb2xkIG92ZXIgdGhlIHN1cHBseToKICAgICAgICAgICAgLy8gYSkgd2hlbjogdG90YWwgcHJlc2FsZSBib251c2VzID4gKG1heENhcCAtIHRvdGFsUmFpc2VkKSAqIHJhdGUKICAgICAgICAgICAgLy8gYikgd2hlbjogbGFzdCBwYXltZW50IGdvZXMgb3ZlciB0aGUgbWF4Q2FwCiAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gdG9rZW5zU29sZDsKICAgICAgICB9CgogICAgICAgIFRyYW5zZmVyKDB4MCwgcmVjaXBpZW50LCBhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEljb0RhdGVzKHVpbnQyNTYgbmV3SWNvU3RhcnRUaW1lc3RhbXAsIHVpbnQyNTYgbmV3SWNvRW5kVGltZXN0YW1wKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5ld0ljb1N0YXJ0VGltZXN0YW1wIDwgbmV3SWNvRW5kVGltZXN0YW1wKTsKICAgICAgICByZXF1aXJlKCFpc0ljb0ZpbmlzaGVkKCkpOwogICAgICAgIGljb1N0YXJ0VGltZXN0YW1wID0gbmV3SWNvU3RhcnRUaW1lc3RhbXA7CiAgICAgICAgaWNvRW5kVGltZXN0YW1wID0gbmV3SWNvRW5kVGltZXN0YW1wOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFJhdGUodWludDI1NiBfcmF0ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZSghaXNJY29GaW5pc2hlZCgpKTsKICAgICAgICByYXRlID0gX3JhdGU7CiAgICB9CgogICAgZnVuY3Rpb24gaGFsdEZ1bmRyYWlzaW5nKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaGFsdGVkID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB1bmhhbHRGdW5kcmFpc2luZygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGhhbHRlZCA9IGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzSWNvRmluaXNoZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBpY29GaW5pc2hlZCkgewogICAgICAgIHJldHVybiAodG90YWxSYWlzZWQgPj0gaWNvRXRoZXJNaW5DYXAgJiYgaWNvRW5kVGltZXN0YW1wICE9IDAgJiYgbm93ID4gaWNvRW5kVGltZXN0YW1wKSB8fAogICAgICAgICAgICAgICAodG90YWxSYWlzZWQgPj0gaWNvRXRoZXJNYXhDYXApOwogICAgfQoKICAgIGZ1bmN0aW9uIHByZXBhcmVMaXF1aWRpdHlSZXNlcnZlKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShpc0ljb0ZpbmlzaGVkKCkpOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgdW5zb2xkVG9rZW5zID0gdG90YWxTdXBwbHkuc3ViKHRva2Vuc1NvbGQpOwogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGVyZSBhcmUgYW55IHVuc29sZCB0b2tlbnMgdG8gYmUgYXNzaWduZWQKICAgICAgICByZXF1aXJlKHVuc29sZFRva2VucyA+IDApOwoKICAgICAgICAvLyB0cnkgdG8gYWxsb2NhdGUgdXAgdG8gMTAlIG9mIHRvdGFsIHNvbGQgdG9rZW5zIHRvIExpcXVpZGl0eSBSZXNlcnZlIGZ1bmQ6CiAgICAgICAgdWludDI1NiBsaXF1aWRpdHlSZXNlcnZlVG9rZW5zID0gdG9rZW5zU29sZC5kaXYoMTApOwogICAgICAgIGlmIChsaXF1aWRpdHlSZXNlcnZlVG9rZW5zID4gdW5zb2xkVG9rZW5zKSB7CiAgICAgICAgICAgIGxpcXVpZGl0eVJlc2VydmVUb2tlbnMgPSB1bnNvbGRUb2tlbnM7CiAgICAgICAgfQogICAgICAgIGFzc2lnblRva2VucyhsaXF1aWRpdHlSZXNlcnZlV2FsbGV0LCBsaXF1aWRpdHlSZXNlcnZlVG9rZW5zKTsKICAgICAgICB1bnNvbGRUb2tlbnMgPSB1bnNvbGRUb2tlbnMuc3ViKGxpcXVpZGl0eVJlc2VydmVUb2tlbnMpOwoKICAgICAgICAvLyBpZiB0aGVyZSBhcmUgc3RpbGwgdW5zb2xkIHRva2VuczoKICAgICAgICBpZiAodW5zb2xkVG9rZW5zID4gMCkgewogICAgICAgICAgICAvLyBkZWNyZWFzZSAgKGJ1cm4pIHRvdGFsIHN1cHBseSBieSB0aGUgbnVtYmVyIG9mIHVuc29sZCB0b2tlbnM6CiAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKHVuc29sZFRva2Vucyk7CiAgICAgICAgfQoKICAgICAgICAvLyBtYWtlIHN1cmUgdGhlcmUgYXJlIG5vIHRva2VucyBsZWZ0CiAgICAgICAgYXNzZXJ0KHRva2Vuc1NvbGQgPT0gdG90YWxTdXBwbHkpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1hbnVhbGx5QXNzaWduVG9rZW5zKGFkZHJlc3MgcmVjaXBpZW50LCB1aW50MjU2IGFtb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZSh0b2tlbnNTb2xkIDwgdG90YWxTdXBwbHkpOwogICAgICAgIGFzc2lnblRva2VucyhyZWNpcGllbnQsIGFtb3VudCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEJ1cm5zIGEgc3BlY2lmaWMgYW1vdW50IG9mIHRva2Vucy4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSBidXJuZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwoKICAgICAgICBhZGRyZXNzIGJ1cm5lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYmFsYW5jZXNbYnVybmVyXSA9IGJhbGFuY2VzW2J1cm5lcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgICAgICBCdXJuKGJ1cm5lciwgX3ZhbHVlKTsKICAgIH0KCn0='.
	

]
