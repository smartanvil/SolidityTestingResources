Class {
	#name : #SRT488872fB7c7DBE61018E7a65F88aA4b239649d62,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT488872fB7c7DBE61018E7a65F88aA4b239649d62 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Ci8qKgogKiBPdmVyZmxvdyBhd2FyZSB1aW50IG1hdGggZnVuY3Rpb25zLgogKi8KY29udHJhY3QgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBwY3QodWludCBudW1lcmF0b3IsIHVpbnQgZGVub21pbmF0b3IsIHVpbnQgcHJlY2lzaW9uKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQgcXVvdGllbnQpIHsKICAgIHVpbnQgX251bWVyYXRvciA9IG51bWVyYXRvciAqIDEwICoqIChwcmVjaXNpb24rMSk7CiAgICB1aW50IF9xdW90aWVudCA9ICgoX251bWVyYXRvciAvIGRlbm9taW5hdG9yKSArIDUpIC8gMTA7CiAgICByZXR1cm4gKF9xdW90aWVudCk7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCn0KCi8qKgogKiBFUkMgMjAgdG9rZW4KICovCmNvbnRyYWN0IFRva2VuIGlzIFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gYWRkKGJhbGFuY2VzW190b10sIF92YWx1ZSk7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzdWIoYmFsYW5jZXNbX2Zyb21dLCBfdmFsdWUpOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHN1YihhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLy8gQSB2dWxlcm5hYmlsaXR5IG9mIHRoZSBhcHByb3ZlIG1ldGhvZCBpbiB0aGUgRVJDMjAgc3RhbmRhcmQgd2FzIGlkZW50aWZpZWQgYnkKICAgIC8vIE1pa2hhaWwgVmxhZGltaXJvdiBhbmQgRG1pdHJ5IEtob3ZyYXRvdmljaCBoZXJlOgogICAgLy8gaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xWUxQdFF4WnUxVUF2TzljWjFPMlJQWEJiVDBtb29oNERZS2pBX2pwLVJMTQogICAgLy8gSXQncyBiZXR0ZXIgdG8gdXNlIHRoaXMgbWV0aG9kIHdoaWNoIGlzIG5vdCBzdXNjZXB0aWJsZSB0byBvdmVyLXdpdGhkcmF3aW5nIGJ5IHRoZSBhcHByb3ZlZS4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3MgdG8gYXBwcm92ZQogICAgLy8vIEBwYXJhbSBfY3VycmVudFZhbHVlIFRoZSBwcmV2aW91cyB2YWx1ZSBhcHByb3ZlZCwgd2hpY2ggY2FuIGJlIHJldHJpZXZlZCB3aXRoIGFsbG93YW5jZShtc2cuc2VuZGVyLCBfc3BlbmRlcikKICAgIC8vLyBAcGFyYW0gX25ld1ZhbHVlIFRoZSBuZXcgdmFsdWUgdG8gYXBwcm92ZSwgdGhpcyB3aWxsIHJlcGxhY2UgdGhlIF9jdXJyZW50VmFsdWUKICAgIC8vLyBAcmV0dXJuIGJvb2wgV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIGEgc3VjY2VzcyAoc2VlIEVSQzIwJ3MgYGFwcHJvdmVgKQogICAgZnVuY3Rpb24gY29tcGFyZUFuZEFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfY3VycmVudFZhbHVlLCB1aW50MjU2IF9uZXdWYWx1ZSkgcHVibGljIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSBfY3VycmVudFZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBhcHByb3ZlKF9zcGVuZGVyLCBfbmV3VmFsdWUpOwogICAgfQp9Cgpjb250cmFjdCBDSEVYVG9rZW4gaXMgVG9rZW4gewoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJDSEVYIFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkNIWCI7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgdWludCBwdWJsaWMgc3RhcnRCbG9jazsgLy9jcm93ZHNhbGUgc3RhcnQgYmxvY2sKICAgIHVpbnQgcHVibGljIGVuZEJsb2NrOyAvL2Nyb3dkc2FsZSBlbmQgYmxvY2sKCiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGVyOwogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICAKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5ID0gMjAwMDAwMDAwMCAqIDEwKipkZWNpbWFsczsgLy8gMmIgdG9rZW5zLCBlYWNoIGRpdmlkZWQgdG8gdXAgdG8gMTBeZGVjaW1hbHMgdW5pdHMuCiAgICB1aW50IHB1YmxpYyBldGhlckNhcCA9IDI1MDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgICAKICAgIHVpbnQgcHVibGljIHRvdGFsVG9rZW5zID0gMDsKICAgIHVpbnQgcHVibGljIHByZXNhbGVTdXBwbHkgPSAwOwogICAgdWludCBwdWJsaWMgcHJlc2FsZUV0aGVyUmFpc2VkID0gMDsKCiAgICBldmVudCBCdXkoYWRkcmVzcyBpbmRleGVkIHJlY2lwaWVudCwgdWludCBldGgsIHVpbnQgY2h4KTsKICAgIGV2ZW50IERlbGl2ZXIoYWRkcmVzcyBpbmRleGVkIHJlY2lwaWVudCwgdWludCBjaHgsIHN0cmluZyBfZm9yKTsKCiAgICB1aW50IHB1YmxpYyBwcmVzYWxlQWxsb2NhdGlvbiA9IHRvdGFsU3VwcGx5IC8gMjsgLy81MCUgb2YgdG9rZW4gc3VwcGx5IGFsbG9jYXRlZCBmb3IgY3Jvd2RzYWxlCiAgICB1aW50IHB1YmxpYyBzdHJhdGVnaWNBbGxvY2F0aW9uID0gdG90YWxTdXBwbHkgLyA0OyAvLzI1JSBvZiB0b2tlbiBzdXBwbHkgYWxsb2NhdGVkIHBvc3QtY3Jvd2RzYWxlIGZvciBzdHJhdGVnaWMgc3VwcGx5CiAgICB1aW50IHB1YmxpYyByZXNlcnZlQWxsb2NhdGlvbiA9IHRvdGFsU3VwcGx5IC8gNDsgLy8yNSUgb2YgdG9rZW4gc3VwcGx5IGFsbG9jYXRlZCBwb3N0LWNyb3dkc2FsZSBmb3IgaW50ZXJuYWwKICAgIGJvb2wgcHVibGljIHN0cmF0ZWdpY0FsbG9jYXRlZCA9IGZhbHNlOwogICAgYm9vbCBwdWJsaWMgcmVzZXJ2ZUFsbG9jYXRlZCA9IGZhbHNlOwoKICAgIHVpbnQgcHVibGljIHRyYW5zZmVyTG9ja3VwID0gNTc2MDsgLy9ubyB0cmFuc2ZlcnMgdW50aWwgMSBkYXkgYWZ0ZXIgc2FsZSBpcyBvdmVyCiAgICB1aW50IHB1YmxpYyBzdHJhdGVnaWNMb2NrdXAgPSA4MDY0MDsgLy9zdHJhdGVnaWMgc3VwcGx5IGxvY2tlZCB1bnRpbCAxNCBkYXlzIGFmdGVyIHNhbGUgaXMgb3ZlcgogICAgdWludCBwdWJsaWMgcmVzZXJ2ZUxvY2t1cCA9IDI0MTkyMDsgLy9maXJzdCB3YXZlIG9mIHJlc2VydmUgbG9ja2VkIHVudGlsIDQyIGRheXMgYWZ0ZXIgc2FsZSBpcyBvdmVyCgogICAgdWludCBwdWJsaWMgcmVzZXJ2ZVdhdmUgPSAwOyAvL2luY3JlbWVudHMgZWFjaCB0aW1lIDEwJSBvZiByZXNlcnZlIGlzIGFsbG9jYXRlZCwgdG8gYSBtYXggb2YgMTAKICAgIHVpbnQgcHVibGljIHJlc2VydmVXYXZlVG9rZW5zID0gcmVzZXJ2ZUFsbG9jYXRpb24gLyAxMDsgLy8xMCUgb2YgcmVzZXJ2ZSB3aWxsIGJlIHJlbGVhc2VkIG9uIGVhY2ggd2F2ZQogICAgdWludCBwdWJsaWMgcmVzZXJ2ZVdhdmVMb2NrdXAgPSAxNzI4MDA7IC8vMzAgZGF5IGludGVydmFscyBiZWZvcmUgc3Vic2VxdWVudCB3YXZlIG9mIHJlc2VydmUgdG9rZW5zIGNhbiBiZSByZWxlYXNlZAoKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9FVEhFUiA9IDEgZmlubmV5OwoKICAgIGVudW0gVG9rZW5TYWxlU3RhdGUgewogICAgICAgIEluaXRpYWwsICAgIC8vY29udHJhY3QgaW5pdGlhbGl6ZWQsIGJvbnVzIHRva2VuCiAgICAgICAgUHJlc2FsZSwgICAgLy9saW1pdGVkIHRpbWUgY3Jvd2RzYWxlCiAgICAgICAgTGl2ZSwgICAgICAgLy9kZWZhdWx0IHByaWNlCiAgICAgICAgRnJvemVuICAgICAgLy9wcmV2ZW50IHNhbGUgb2YgdG9rZW5zCiAgICB9CgogICAgVG9rZW5TYWxlU3RhdGUgcHVibGljIF9zYWxlU3RhdGUgPSBUb2tlblNhbGVTdGF0ZS5Jbml0aWFsOwoKICAgIGZ1bmN0aW9uIENIRVhUb2tlbihhZGRyZXNzIGZvdW5kZXJJbnB1dCwgYWRkcmVzcyBvd25lcklucHV0LCB1aW50IHN0YXJ0QmxvY2tJbnB1dCwgdWludCBlbmRCbG9ja0lucHV0KSB7CiAgICAgICAgZm91bmRlciA9IGZvdW5kZXJJbnB1dDsKICAgICAgICBvd25lciA9IG93bmVySW5wdXQ7CiAgICAgICAgc3RhcnRCbG9jayA9IHN0YXJ0QmxvY2tJbnB1dDsKICAgICAgICBlbmRCbG9jayA9IGVuZEJsb2NrSW5wdXQ7CiAgICAgICAgCiAgICAgICAgdXBkYXRlVG9rZW5TYWxlU3RhdGUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmljZSgpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIGlmIChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLkluaXRpYWwpIHJldHVybiA2MDAxOwogICAgICAgIGlmIChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLlByZXNhbGUpIHsKICAgICAgICAgICAgdWludCBwZXJjZW50UmVtYWluaW5nID0gcGN0KChlbmRCbG9jayAtIGJsb2NrLm51bWJlciksIChlbmRCbG9jayAtIHN0YXJ0QmxvY2spLCAzKTsKICAgICAgICAgICAgcmV0dXJuIDMwMDAgKyAzICogcGVyY2VudFJlbWFpbmluZzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIDMwMDA7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlVG9rZW5TYWxlU3RhdGUgKCkgewogICAgICAgIGlmIChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLkZyb3plbikgcmV0dXJuOwoKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5MaXZlICYmIGJsb2NrLm51bWJlciA+IGVuZEJsb2NrKSByZXR1cm47CiAgICAgICAgCiAgICAgICAgaWYgKF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuSW5pdGlhbCAmJiBibG9jay5udW1iZXIgPj0gc3RhcnRCbG9jaykgewogICAgICAgICAgICBfc2FsZVN0YXRlID0gVG9rZW5TYWxlU3RhdGUuUHJlc2FsZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuUHJlc2FsZSAmJiBibG9jay5udW1iZXIgPiBlbmRCbG9jaykgewogICAgICAgICAgICBfc2FsZVN0YXRlID0gVG9rZW5TYWxlU3RhdGUuTGl2ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBidXkobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgcmVjaXBpZW50KSBwYXlhYmxlIHsKICAgICAgICBpZiAocmVjaXBpZW50ID09IDB4MCkgdGhyb3c7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA8IE1JTl9FVEhFUikgdGhyb3c7CiAgICAgICAgaWYgKHRvdGFsVG9rZW5zID49IHRvdGFsU3VwcGx5KSB0aHJvdzsKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5Gcm96ZW4pIHRocm93OwogICAgICAgIGlmICgoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5Jbml0aWFsIHx8IF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuUHJlc2FsZSkgJiYgcHJlc2FsZVN1cHBseSA+PSBwcmVzYWxlQWxsb2NhdGlvbikgdGhyb3c7CiAgICAgICAgaWYgKChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLkluaXRpYWwgfHwgX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5QcmVzYWxlKSAmJiBwcmVzYWxlRXRoZXJSYWlzZWQgPj0gZXRoZXJDYXApIHRocm93OwoKICAgICAgICB1cGRhdGVUb2tlblNhbGVTdGF0ZSgpOwogICAgICAgIHVpbnQgdG9rZW5zID0gbXVsKG1zZy52YWx1ZSwgcHJpY2UoKSk7CgogICAgICAgIGlmICh0b2tlbnMgPT0gMCkgdGhyb3c7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IGFkZChiYWxhbmNlc1tyZWNpcGllbnRdLCB0b2tlbnMpOwogICAgICAgIHRvdGFsVG9rZW5zID0gYWRkKHRvdGFsVG9rZW5zLCB0b2tlbnMpOwoKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5Jbml0aWFsIHx8IF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuUHJlc2FsZSkgewogICAgICAgICAgICBwcmVzYWxlRXRoZXJSYWlzZWQgPSBhZGQocHJlc2FsZUV0aGVyUmFpc2VkLCBtc2cudmFsdWUpOwogICAgICAgICAgICBwcmVzYWxlU3VwcGx5ID0gYWRkKHByZXNhbGVTdXBwbHksIHRva2Vucyk7CiAgICAgICAgfQoKICAgICAgICBmb3VuZGVyLnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgICAgCiAgICAgICAgVHJhbnNmZXIoMCwgcmVjaXBpZW50LCB0b2tlbnMpOwogICAgICAgIEJ1eShyZWNpcGllbnQsIG1zZy52YWx1ZSwgdG9rZW5zKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChibG9jay5udW1iZXIgPD0gZW5kQmxvY2sgKyB0cmFuc2ZlckxvY2t1cCAmJiBtc2cuc2VuZGVyICE9IGZvdW5kZXIgJiYgbXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmxvY2subnVtYmVyIDw9IGVuZEJsb2NrICsgdHJhbnNmZXJMb2NrdXAgJiYgbXNnLnNlbmRlciAhPSBmb3VuZGVyICYmIG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5SW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lciB8fCBtc2cuc2VuZGVyID09IGZvdW5kZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gZGVsaXZlcihhZGRyZXNzIHJlY2lwaWVudCwgdWludCB0b2tlbnMsIHN0cmluZyBfZm9yKSBvbmx5SW50ZXJuYWwgewogICAgICAgIGlmICh0b2tlbnMgPT0gMCkgdGhyb3c7CiAgICAgICAgaWYgKHRvdGFsVG9rZW5zID49IHRvdGFsU3VwcGx5KSB0aHJvdzsKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5Gcm96ZW4pIHRocm93OwogICAgICAgIGlmICgoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5Jbml0aWFsIHx8IF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuUHJlc2FsZSkgJiYgcHJlc2FsZVN1cHBseSA+PSBwcmVzYWxlQWxsb2NhdGlvbikgdGhyb3c7CgogICAgICAgIHVwZGF0ZVRva2VuU2FsZVN0YXRlKCk7CgogICAgICAgIGJhbGFuY2VzW3JlY2lwaWVudF0gPSBhZGQoYmFsYW5jZXNbcmVjaXBpZW50XSwgdG9rZW5zKTsKICAgICAgICB0b3RhbFRva2VucyA9IGFkZCh0b3RhbFRva2VucywgdG9rZW5zKTsKCiAgICAgICAgaWYgKF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuSW5pdGlhbCB8fCBfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLlByZXNhbGUpIHsKICAgICAgICAgICAgcHJlc2FsZVN1cHBseSA9IGFkZChwcmVzYWxlU3VwcGx5LCB0b2tlbnMpOwogICAgICAgIH0KCiAgICAgICAgVHJhbnNmZXIoMCwgcmVjaXBpZW50LCB0b2tlbnMpOyAgICAKICAgICAgICBEZWxpdmVyKHJlY2lwaWVudCwgdG9rZW5zLCBfZm9yKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvY2F0ZVN0cmF0ZWdpY1Rva2VucygpIG9ubHlJbnRlcm5hbCB7CiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8PSBlbmRCbG9jayArIHN0cmF0ZWdpY0xvY2t1cCkgdGhyb3c7CiAgICAgICAgaWYgKHN0cmF0ZWdpY0FsbG9jYXRlZCkgdGhyb3c7CgogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGFkZChiYWxhbmNlc1tvd25lcl0sIHN0cmF0ZWdpY0FsbG9jYXRpb24pOwogICAgICAgIHRvdGFsVG9rZW5zID0gYWRkKHRvdGFsVG9rZW5zLCBzdHJhdGVnaWNBbGxvY2F0aW9uKTsKCiAgICAgICAgc3RyYXRlZ2ljQWxsb2NhdGVkID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvY2F0ZVJlc2VydmVUb2tlbnMoKSBvbmx5SW50ZXJuYWwgewogICAgICAgIGlmIChibG9jay5udW1iZXIgPD0gZW5kQmxvY2sgKyByZXNlcnZlTG9ja3VwICsgKHJlc2VydmVXYXZlTG9ja3VwICogcmVzZXJ2ZVdhdmUpKSB0aHJvdzsKICAgICAgICBpZiAocmVzZXJ2ZUFsbG9jYXRlZCkgdGhyb3c7CgogICAgICAgIGJhbGFuY2VzW2ZvdW5kZXJdID0gYWRkKGJhbGFuY2VzW2ZvdW5kZXJdLCByZXNlcnZlV2F2ZVRva2Vucyk7CiAgICAgICAgdG90YWxUb2tlbnMgPSBhZGQodG90YWxUb2tlbnMsIHJlc2VydmVXYXZlVG9rZW5zKTsKCiAgICAgICAgcmVzZXJ2ZVdhdmUrKzsKICAgICAgICBpZiAocmVzZXJ2ZVdhdmUgPj0gMTApIHsKICAgICAgICAgICAgcmVzZXJ2ZUFsbG9jYXRlZCA9IHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGZyZWV6ZSgpIG9ubHlJbnRlcm5hbCB7CiAgICAgICAgX3NhbGVTdGF0ZSA9IFRva2VuU2FsZVN0YXRlLkZyb3plbjsKICAgIH0KCiAgICBmdW5jdGlvbiB1bmZyZWV6ZSgpIG9ubHlJbnRlcm5hbCB7CiAgICAgICAgX3NhbGVTdGF0ZSA9IFRva2VuU2FsZVN0YXRlLlByZXNhbGU7CiAgICAgICAgdXBkYXRlVG9rZW5TYWxlU3RhdGUoKTsKICAgIH0KCn0='.
	

]
