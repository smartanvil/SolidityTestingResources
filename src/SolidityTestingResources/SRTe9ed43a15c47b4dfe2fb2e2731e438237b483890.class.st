Class {
	#name : #SRTe9ed43a15c47b4dfe2fb2e2731e438237b483890,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe9ed43a15c47b4dfe2fb2e2731e438237b483890 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMDsKCmNvbnRyYWN0IENyeXB0ZWxvRVJDMjB7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgYW1vdW50KTsKICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKfQoKY29udHJhY3QgQ3J5cHRlbG9QcmVTYWxlewogIGZ1bmN0aW9uIGlzV2hpdGVMaXN0KGFkZHJlc3MgX2FkZHIpIHB1YmxpYyByZXR1cm5zICh1aW50IF9ncm91cCk7Cn0KCmNvbnRyYWN0IFRhZGFtV2hpdGVsaXN0UHVibGljU2FsZXsKICAgIGZ1bmN0aW9uIGlzV2hpdGVMaXN0ZWQoYWRkcmVzcyBfYWRkcikgcmV0dXJucyAodWludCBfZ3JvdXApOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgUHVibGljU2FsZVdoaXRlTGlzdGVkOwp9Cgpjb250cmFjdCBDcnlwdGVsb1B1YmxpY1NhbGV7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHJpdmF0ZSBvd25lcjsKCiAgICAKICAgIHVpbnQgcHVibGljIGNvbnRyaWJ1dG9yQ291bnRlciA9IDA7CiAgICBtYXBwaW5nICh1aW50ID0+IGFkZHJlc3MpIGNvbnRyaWJ1dG9yOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBjb250cmlidXRvckFtb3VudDsKICAgIAogICAgLyoKICAgICAgICBQdWJsaWMgU2FsZSBUaW1pbmdzIGFuZCBib251c2VzCiAgICAqLwogICAgCiAgICAKICAgIHVpbnQgSUNPc3RhcnRUaW1lID0gMDsgCiAgICB1aW50IElDT2VuZFRpbWUgPSBub3cgKyA0NiBkYXlzOwogICAgCiAgICAvL2ZpcnN0IDcgZGF5cyBib251cyAyNSUKICAgIHVpbnQgZmlyc3REaXNjb3VudFN0YXJ0VGltZSA9IElDT3N0YXJ0VGltZTsKICAgIHVpbnQgZmlyc3REaXNjb3VudEVuZFRpbWUgPSBJQ09zdGFydFRpbWUgKyA3IGRheXM7CiAgICAKICAgIC8vZGF5IDcgdG8gZGF5IDE0IGJvbnVzIDIwJQogICAgdWludCBzZWNEaXNjb3VudFN0YXJ0VGltZSA9IElDT3N0YXJ0VGltZSArIDcgZGF5czsKICAgIHVpbnQgc2VjRGlzY291bnRFbmRUaW1lID0gSUNPc3RhcnRUaW1lICsgMTQgZGF5czsKICAgIAogICAgLy9kYXkgMTQgdG8gZGF5IDIxIGJvbnVzIDE1JQogICAgdWludCB0aGlyZERpc2NvdW50U3RhcnRUaW1lID0gSUNPc3RhcnRUaW1lICsgMTQgZGF5czsKICAgIHVpbnQgdGhpcmREaXNjb3VudEVuZFRpbWUgPSBJQ09zdGFydFRpbWUgKyAyMSBkYXlzOwogICAgCiAgICAvL2RheSAyMSB0byBkYXkgMjggYm9udXMgMTAlCiAgICB1aW50IGZvdXJ0aERpc2NvdW50U3RhcnRUaW1lID0gSUNPc3RhcnRUaW1lICsgMjEgZGF5czsKICAgIHVpbnQgZm91cnRoRGlzY291bnRFbmRUaW1lID0gSUNPc3RhcnRUaW1lICsgMjggZGF5czsKCiAgICAvKgogICAgICAgIEV4dGVybmFsIGFkZHJlc3NlcwogICAgKi8KICAgIGFkZHJlc3MgcHVibGljIEVSQzIwQWRkcmVzczsgCiAgICBhZGRyZXNzIHB1YmxpYyBwcmVTYWxlQ29udHJhY3Q7CiAgICBhZGRyZXNzIHByaXZhdGUgZm9yd2FyZEZ1bmRzV2FsbGV0OwogICAgYWRkcmVzcyBwdWJsaWMgd2hpdGVMaXN0QWRkcmVzczsKICAgIAogICAgZXZlbnQgZVNlbmRUb2tlbnMoYWRkcmVzcyBfYWRkciwgdWludCBfYW1vdW50KTsKICAgIGV2ZW50IGVTdGF0ZUNoYW5nZShib29sIHN0YXRlKTsKICAgIGV2ZW50IGVMb2coc3RyaW5nIHN0ciwgdWludCBubyk7CiAgICBldmVudCBlV2hpdGVMaXN0KGFkZHJlc3MgYWRyLCB1aW50IGdyb3VwKTsKICAgIAogICAgZnVuY3Rpb24gY2FsY3VsYXRlQm9udXModWludCBfd2hpdGVMaXN0TGV2ZWwpIHJldHVybnMgKHVpbnQgX3RvdGFsQm9udXMpewogICAgICAgIHVpbnQgdGltZUJvbnVzID0gY3VycmVudFRpbWVCb251cygpOwogICAgICAgIHVpbnQgdG90YWxCb251cyA9IDA7CiAgICAgICAgdWludCB3aGl0ZUxpc3RCb251cyA9IDA7CiAgICAgICAgaWYgKF93aGl0ZUxpc3RMZXZlbCA9PSAxKXsKICAgICAgICAgICAgd2hpdGVMaXN0Qm9udXMgPSB3aGl0ZUxpc3RCb251cy5hZGQoNSk7CiAgICAgICAgfQogICAgICAgIHRvdGFsQm9udXMgPSB0b3RhbEJvbnVzLmFkZCh0aW1lQm9udXMpLmFkZCh3aGl0ZUxpc3RCb251cyk7CiAgICAgICAgcmV0dXJuIHRvdGFsQm9udXM7CiAgICB9CiAgICBmdW5jdGlvbiBjdXJyZW50VGltZUJvbnVzICgpIHB1YmxpYyByZXR1cm5zICh1aW50IF9ib251cyl7CiAgICAgICAgdWludCBib251cyA9IDA7CiAgICAgICAgLy9JQ08gaXMgcnVubmluZwogICAgICAgIGlmIChub3cgPj0gZmlyc3REaXNjb3VudFN0YXJ0VGltZSAmJiBub3cgPD0gZmlyc3REaXNjb3VudEVuZFRpbWUpewogICAgICAgICAgICBib251cyA9IDI1OwogICAgICAgIH1lbHNlIGlmKG5vdyA+PSBzZWNEaXNjb3VudFN0YXJ0VGltZSAmJiBub3cgPD0gc2VjRGlzY291bnRFbmRUaW1lKXsKICAgICAgICAgICAgYm9udXMgPSAyMDsKICAgICAgICB9ZWxzZSBpZihub3cgPj0gdGhpcmREaXNjb3VudFN0YXJ0VGltZSAmJiBub3cgPD0gdGhpcmREaXNjb3VudEVuZFRpbWUpewogICAgICAgICAgICBib251cyA9IDE1OwogICAgICAgIH1lbHNlIGlmKG5vdyA+PSBmb3VydGhEaXNjb3VudFN0YXJ0VGltZSAmJiBub3cgPD0gZm91cnRoRGlzY291bnRFbmRUaW1lKXsKICAgICAgICAgICAgYm9udXMgPSAxMDsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgYm9udXMgPSA1OwogICAgICAgIH0KICAgICAgICByZXR1cm4gYm9udXM7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIENyeXB0ZWxvUHVibGljU2FsZShhZGRyZXNzIF9FUkMyMEFkZHJlc3MsIGFkZHJlc3MgX3ByZVNhbGVDb250cmFjdCwgYWRkcmVzcyBfZm9yd2FyZEZ1bmRzV2FsbGV0LCBhZGRyZXNzIF93aGl0ZUxpc3RBZGRyZXNzICl7CiAgICAgICAgb3duZXJbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgICAgIEVSQzIwQWRkcmVzcyA9IF9FUkMyMEFkZHJlc3M7CiAgICAgICAgcHJlU2FsZUNvbnRyYWN0ID0gX3ByZVNhbGVDb250cmFjdDsKICAgICAgICBmb3J3YXJkRnVuZHNXYWxsZXQgPSBfZm9yd2FyZEZ1bmRzV2FsbGV0OwogICAgICAgIHdoaXRlTGlzdEFkZHJlc3MgPSBfd2hpdGVMaXN0QWRkcmVzczsgICAgCiAgICB9CiAgICAvKgogICAgICAgIFN0YXRlcyBhcmUKICAgICAgICAgICAgZmFsc2UgLSBQYXVzZWQgLSBpdCBkb2Vzbid0IGFjY2VwdCBwYXltZW50cwogICAgICAgICAgICB0cnVlIC0gTGl2ZSAtIGFjY2VwdHMgcGF5bWVudHMgYW5kIGRpc2J1cnNlIHRva2VucyBpZiBjb25kaXRpb25zIG1lZXQKICAgICovCiAgICBib29sIHB1YmxpYyBjdXJyZW50U3RhdGUgPSBmYWxzZTsKCiAgICAKICAgIC8qCiAgICAgICAgRmluYW5jaWFsIFJhdGlvcyAKICAgICovCiAgICB1aW50IGhhcmRDYXBUb2tlbnMgPSBhZGREZWNpbWFscyg4LDE4NzUwMDAwMCk7CiAgICB1aW50IHJhaXNlZFdlaSA9IDA7CiAgICB1aW50IHRva2Vuc0xlZnQgPSBoYXJkQ2FwVG9rZW5zOwogICAgdWludCByZXNlcnZlZFRva2VucyA9IDA7CiAgICB1aW50IG1pbmltdW1Eb25hdGlvbldlaSA9IDEwMDAwMDAwMDAwMDAwMDAwMDsKICAgIHVpbnQgcHVibGljIHRva2Vuc1BlckV0aGVyID0gYWRkRGVjaW1hbHMoOCwgMTI1MDApOyAvLzEyNTAwMDAwMDAwMDAKICAgIHVpbnQgcHVibGljIHRva2Vuc1Blck1pY3JvRXRoZXIgPSB0b2tlbnNQZXJFdGhlci5kaXYoMTAwMDAwMCk7CiAgICAKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewoKICAgICAgICB1aW50IHRva2Vuc1RvU2VuZCA9IDA7CiAgICAgICAgdWludCBhbW91bnRFdGhXZWkgPSBtc2cudmFsdWU7CiAgICAgICAgYWRkcmVzcyBzZW5kZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIAogICAgICAgIC8vY2hlY2sgaWYgaXRzIGxpdmUKICAgICAgICAKICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGF0ZSk7CiAgICAgICAgZUxvZygic3RhdGUgT0siLCAwKTsKICAgICAgICByZXF1aXJlKGFtb3VudEV0aFdlaSA+PSBtaW5pbXVtRG9uYXRpb25XZWkpOwogICAgICAgIGVMb2coImFtb3VudCBPSyIsIGFtb3VudEV0aFdlaSk7CiAgICAgICAgCiAgICAgICAgdWludCB3aGl0ZUxpc3RlZExldmVsID0gaXNXaGl0ZUxpc3RlZChzZW5kZXIpOwogICAgICAgIHJlcXVpcmUoIHdoaXRlTGlzdGVkTGV2ZWwgPiAwKTsKCiAgICAgICAgdG9rZW5zVG9TZW5kID0gY2FsY3VsYXRlVG9rZW5zVG9TZW5kKGFtb3VudEV0aFdlaSwgd2hpdGVMaXN0ZWRMZXZlbCk7CiAgICAgICAgCiAgICAgICAgcmVxdWlyZSh0b2tlbnNMZWZ0ID49IHRva2Vuc1RvU2VuZCk7CiAgICAgICAgZUxvZygidG9rZW5zIGxlZnQgdnMgdG9rZW5zIHRvIHNlbmQgb2siLCB0b2tlbnNMZWZ0KTsgICAgCiAgICAgICAgZUxvZygidG9rZW5zVG9TZW5kIiwgdG9rZW5zVG9TZW5kKTsKICAgICAgICAKICAgICAgICAvL3Rlc3QgZm9yIG1pbnVzCiAgICAgICAgaWYgKHRva2Vuc1RvU2VuZCA8PSB0b2tlbnNMZWZ0KXsKICAgICAgICAgICAgdG9rZW5zTGVmdCA9IHRva2Vuc0xlZnQuc3ViKHRva2Vuc1RvU2VuZCk7ICAgIAogICAgICAgIH0KICAgICAgICAKICAgICAgICBhZGRDb250cmlidXRvcihzZW5kZXIsIHRva2Vuc1RvU2VuZCk7CiAgICAgICAgcmVzZXJ2ZWRUb2tlbnMgPSByZXNlcnZlZFRva2Vucy5hZGQodG9rZW5zVG9TZW5kKTsKICAgICAgICBlTG9nKCJzZW5kIHRva2VucyBvayIsIDApOwogICAgICAgIAogICAgICAgIGZvcndhcmRGdW5kcyhhbW91bnRFdGhXZWkpOwogICAgICAgIGVMb2coImZvcndhcmQgZnVuZHMgb2siLCBhbW91bnRFdGhXZWkpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiAgY2FsY3VsYXRlVG9rZW5zVG9TZW5kKHVpbnQgX2Ftb3VudF93ZWksIHVpbnQgX3doaXRlTGlzdExldmVsKSBwdWJsaWMgcmV0dXJucyAodWludCBfdG9rZW5zVG9TZW5kKXsKICAgICAgICB1aW50IHRva2Vuc1RvU2VuZCA9IDA7CiAgICAgICAgdWludCBhbW91bnRNaWNyb0V0aGVyID0gX2Ftb3VudF93ZWkuZGl2KDEwMDAwMDAwMDAwMDApOwogICAgICAgIHVpbnQgdG9rZW5zID0gYW1vdW50TWljcm9FdGhlci5tdWwodG9rZW5zUGVyTWljcm9FdGhlcik7CiAgICAgICAgCiAgICAgICAgZUxvZygidG9rZW5zOiAiLCB0b2tlbnMpOwogICAgICAgIHVpbnQgYm9udXNQZXJjID0gY2FsY3VsYXRlQm9udXMoX3doaXRlTGlzdExldmVsKTsgCiAgICAgICAgdWludCBib251c1Rva2VucyA9IDA7CiAgICAgICAgaWYgKGJvbnVzUGVyYyA+IDApewogICAgICAgICAgICBib251c1Rva2VucyA9IHRva2Vucy5kaXYoMTAwKS5tdWwoYm9udXNQZXJjKTsgICAgCiAgICAgICAgfQogICAgICAgIGVMb2coImJvbnVzVG9rZW5zIiwgYm9udXNUb2tlbnMpOyAKICAgICAgICAKICAgICAgICB0b2tlbnNUb1NlbmQgPSB0b2tlbnMuYWRkKGJvbnVzVG9rZW5zKTsKCiAgICAgICAgZUxvZygidG9rZW5zVG9TZW5kIiwgdG9rZW5zVG9TZW5kKTsgIAogICAgICAgIHJldHVybiB0b2tlbnNUb1NlbmQ7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHBheUNvbnRyaWJ1dG9yQnlOdW1iZXIodWludCBfbikgb25seU93bmVyewogICAgICAgIHJlcXVpcmUobm93ID4gSUNPZW5kVGltZSk7CiAgICAgICAgCiAgICAgICAgYWRkcmVzcyBhZHIgPSBjb250cmlidXRvcltfbl07CiAgICAgICAgdWludCBhbW91bnQgPSBjb250cmlidXRvckFtb3VudFthZHJdOwogICAgICAgIHNlbmRUb2tlbnMoYWRyLCBhbW91bnQpOwogICAgICAgIGNvbnRyaWJ1dG9yQW1vdW50W2Fkcl0gPSAwOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBwYXlDb250cmlidXRvckJ5QWRyZXNzKGFkZHJlc3MgX2FkcikgewogICAgICAgIHJlcXVpcmUobm93ID4gSUNPZW5kVGltZSk7CiAgICAgICAgdWludCBhbW91bnQgPSBjb250cmlidXRvckFtb3VudFtfYWRyXTsKICAgICAgICBzZW5kVG9rZW5zKF9hZHIsIGFtb3VudCk7CiAgICAgICAgY29udHJpYnV0b3JBbW91bnRbX2Fkcl0gPSAwOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZGRDb250cmlidXRvcihhZGRyZXNzIF9hZGRyLCB1aW50IF9hbW91bnQpIHByaXZhdGV7CiAgICAgICAgY29udHJpYnV0b3JbY29udHJpYnV0b3JDb3VudGVyXSA9IF9hZGRyOwogICAgICAgIGlmIChjb250cmlidXRvckFtb3VudFtfYWRkcl0gPiAwKXsKICAgICAgICAgICAgY29udHJpYnV0b3JBbW91bnRbX2FkZHJdICs9IF9hbW91bnQ7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGNvbnRyaWJ1dG9yQW1vdW50W19hZGRyXSA9IF9hbW91bnQ7ICAgIAogICAgICAgIH0KICAgICAgICAKICAgICAgICBjb250cmlidXRvckNvdW50ZXIrKzsKICAgIH0KICAgIGZ1bmN0aW9uIGdldENvbnRyaWJ1dG9yQnlBZGRyZXNzKGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgX2Ftb3VudCl7CiAgICAgICAgcmV0dXJuIGNvbnRyaWJ1dG9yQW1vdW50W19hZGRyXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0Q29udHJpYnV0b3JCeU51bWJlcih1aW50IF9uKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzIF9hZHIsIHVpbnQgX2Ftb3VudCl7CiAgICAgICAgYWRkcmVzcyBjb250cmliQWRyID0gY29udHJpYnV0b3JbX25dOwogICAgICAgIHVpbnQgYW1vdW50ID0gY29udHJpYnV0b3JBbW91bnRbY29udHJpYkFkcl07CiAgICAgICAgcmV0dXJuIChjb250cmliQWRyLCBhbW91bnQpOwogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBmb3J3YXJkRnVuZHModWludCBfYW1vdW50RXRoV2VpKSBwcml2YXRlewogICAgICAgIHJhaXNlZFdlaSArPSBfYW1vdW50RXRoV2VpOwogICAgICAgIGZvcndhcmRGdW5kc1dhbGxldC50cmFuc2ZlcihfYW1vdW50RXRoV2VpKTsgIC8vZmluZCBiYWxhbmNlCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNlbmRUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudENSTCkgcHJpdmF0ZXsKICAgICAgICAvL2ludm9rZSBjYWxsIG9uIHRva2VuIGFkZHJlc3MKICAgICAgIENyeXB0ZWxvRVJDMjAgX3RhZGFtZXJjMjA7CiAgICAgICAgX3RhZGFtZXJjMjAgPSBDcnlwdGVsb0VSQzIwKEVSQzIwQWRkcmVzcyk7CiAgICAgICAgX3RhZGFtZXJjMjAudHJhbnNmZXIoX3RvLCBfYW1vdW50Q1JMKTsKICAgICAgICBlU2VuZFRva2VucyhfdG8sIF9hbW91bnRDUkwpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRDdXJyZW50U3RhdGUoYm9vbCBfc3RhdGUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGN1cnJlbnRTdGF0ZSA9IF9zdGF0ZTsKICAgICAgICBlU3RhdGVDaGFuZ2UoX3N0YXRlKTsKICAgIH0gCiAgICAKICAgIGZ1bmN0aW9uIGJ1cm5BbGxUb2tlbnMoKSBwdWJsaWMgb25seU93bmVyewogICAgICAgIENyeXB0ZWxvRVJDMjAgX3RhZGFtZXJjMjA7CiAgICAgICAgX3RhZGFtZXJjMjAgPSBDcnlwdGVsb0VSQzIwKEVSQzIwQWRkcmVzcyk7CiAgICAgICAgdWludCB0b2tlbnNUb0J1cm4gPSBfdGFkYW1lcmMyMC5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgcmVxdWlyZSAodG9rZW5zVG9CdXJuID4gcmVzZXJ2ZWRUb2tlbnMpOwogICAgICAgIHRva2Vuc1RvQnVybiAtPSByZXNlcnZlZFRva2VuczsKICAgICAgICBlTG9nKCJ0b2tlbnMgYnVybmVkIiwgdG9rZW5zVG9CdXJuKTsKICAgICAgICBfdGFkYW1lcmMyMC5idXJuKHRva2Vuc1RvQnVybik7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGlzV2hpdGVMaXN0ZWQoYWRkcmVzcyBfYWRkcmVzcykgcmV0dXJucyAodWludCl7CiAgICAgICAgCiAgICAgICAgLyoKICAgICAgICAgICAgcmV0dXJuIHZhbHVlcyA6CiAgICAgICAgICAgIDAgPSBub3Qgd2hpdGVsaXN0ZWQgYXQgYWxsLAogICAgICAgICAgICAxID0gd2hpdGUgbGlzdGVkIGVhcmx5IChwcmUgc2FsZSBvciBiZWZvcmUgMTV0aCBvZiBNYXJjaCkKICAgICAgICAgICAgMiA9IHdoaXRlIGxpc3RlZCBhZnRlciAxNXRoIG9mIE1hcmNoCiAgICAgICAgKi8KICAgICAgICB1aW50MjU2IHdoaXRlTGlzdGVkU3RhdHVzID0gMDsKICAgICAgICAKICAgICAgICBUYWRhbVdoaXRlbGlzdFB1YmxpY1NhbGUgd2hpdGVsaXN0UHVibGljOwogICAgICAgIHdoaXRlbGlzdFB1YmxpYyA9IFRhZGFtV2hpdGVsaXN0UHVibGljU2FsZSh3aGl0ZUxpc3RBZGRyZXNzKTsKICAgICAgICAKICAgICAgICB1aW50MjU2IFBTYWxlR3JvdXAgPSB3aGl0ZWxpc3RQdWJsaWMuUHVibGljU2FsZVdoaXRlTGlzdGVkKF9hZGRyZXNzKTsKICAgICAgICAvL2lmIHdlIGhhdmUgaXQgaW4gdGhlIFB1YmxpY1NhbGUgYWRkIGl0CiAgICAgICAgaWYgKFBTYWxlR3JvdXAgPiAwKXsKICAgICAgICAgICAgd2hpdGVMaXN0ZWRTdGF0dXMgPSBQU2FsZUdyb3VwOwogICAgICAgIH1lbHNlewogICAgICAgICAgICBDcnlwdGVsb1ByZVNhbGUgX3Rlc3RQcmVTYWxlOwogICAgICAgICAgICBfdGVzdFByZVNhbGUgPSBDcnlwdGVsb1ByZVNhbGUocHJlU2FsZUNvbnRyYWN0KTsKICAgICAgICAgICAgaWYgKF90ZXN0UHJlU2FsZS5pc1doaXRlTGlzdChfYWRkcmVzcykgPiAwKXsKICAgICAgICAgICAgICAgIC8vZXhpc3RzIGluIHRoZSBwcmUtc2FsZSB3aGl0ZSBsaXN0IHRocmVmb3JlIGdpdmUgZW0gZWFybHkgMQogICAgICAgICAgICAgICAgd2hpdGVMaXN0ZWRTdGF0dXMgPSAxOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIC8vbm90IGZvdW5kIG9uIGVpdGhlcgogICAgICAgICAgICAgICAgd2hpdGVMaXN0ZWRTdGF0dXMgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVXaGl0ZUxpc3QoX2FkZHJlc3MsIHdoaXRlTGlzdGVkU3RhdHVzKTsKICAgICAgICByZXR1cm4gd2hpdGVMaXN0ZWRTdGF0dXM7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkZERlY2ltYWxzKHVpbnQgX25vRGVjaW1hbHMsIHVpbnQgX3RvTnVtYmVyKSBwcml2YXRlIHJldHVybnMgKHVpbnQgX2ZpbmFsTm8pIHsKICAgICAgICB1aW50IGZpbmFsTm8gPSBfdG9OdW1iZXIgKiAoMTAgKiogX25vRGVjaW1hbHMpOwogICAgICAgIHJldHVybiBmaW5hbE5vOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB3aXRoZHJhd0FsbFRva2VucygpIHB1YmxpYyBvbmx5T3duZXJ7CiAgICAgICAgQ3J5cHRlbG9FUkMyMCBfdGFkYW1lcmMyMDsKICAgICAgICBfdGFkYW1lcmMyMCA9IENyeXB0ZWxvRVJDMjAoRVJDMjBBZGRyZXNzKTsKICAgICAgICB1aW50IHRvdGFsQW1vdW50ID0gX3RhZGFtZXJjMjAuYmFsYW5jZU9mKHRoaXMpOwogICAgICAgIHJlcXVpcmUodG90YWxBbW91bnQgPiByZXNlcnZlZFRva2Vucyk7CiAgICAgICAgdWludCB0b1dpdGhkcmF3ID0gdG90YWxBbW91bnQuc3ViKHJlc2VydmVkVG9rZW5zKTsKICAgICAgICBzZW5kVG9rZW5zKG1zZy5zZW5kZXIsIHRvV2l0aGRyYXcpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB3aXRoZHJhd0FsbEV0aGVyKCkgcHVibGljIG9ubHlPd25lcnsKICAgICAgICBtc2cuc2VuZGVyLnNlbmQodGhpcy5iYWxhbmNlKTsKICAgIH0KICAgICAKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpewogICAgICAgIHJlcXVpcmUob3duZXJbbXNnLnNlbmRlcl0pOwogICAgICAgIF87CiAgICB9CiAgICAKfQoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogIC8qKgogICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgKi8KICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBTdWJzdHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgKi8KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICAvKioKICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0='.
	

]
