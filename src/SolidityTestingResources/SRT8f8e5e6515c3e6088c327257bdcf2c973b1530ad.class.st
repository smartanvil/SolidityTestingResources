Class {
	#name : #SRT8f8e5e6515c3e6088c327257bdcf2c973b1530ad,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8f8e5e6515c3e6088c327257bdcf2c973b1530ad >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7Cgpjb250cmFjdCBvd25lZCB7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgCiAgICBmdW5jdGlvbiBvd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIF87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KfQoKY29udHJhY3QgSVZhbHVzVG9rZW4gewogIGZ1bmN0aW9uIG1pbnRUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCk7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRvdGFsU3VwcGx5KTsKfQoKY29udHJhY3QgSUVSQzIwVG9rZW4gewogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHt9CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fQoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKY29udHJhY3QgVmFsdXNDcm93ZHNhbGUgaXMgb3duZWQgewogICAgdWludDI1NiBwdWJsaWMgc3RhcnRCbG9jazsKICAgIHVpbnQyNTYgcHVibGljIGVuZEJsb2NrOwogICAgdWludDI1NiBwdWJsaWMgbWluRXRoVG9SYWlzZTsKICAgIHVpbnQyNTYgcHVibGljIG1heEV0aFRvUmFpc2U7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbEV0aFJhaXNlZDsKICAgIGFkZHJlc3MgcHVibGljIG11bHRpc2lnQWRkcmVzczsKICAgIAogICAgSVZhbHVzVG9rZW4gdmFsdXNUb2tlbkNvbnRyYWN0OyAKCiAgICB1aW50MjU2IG5leHRGcmVlUGFydGljaXBhbnRJbmRleDsKICAgIG1hcHBpbmcgKHVpbnQgPT4gYWRkcmVzcykgcGFydGljaXBhbnRJbmRleDsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcGFydGljaXBhbnRDb250cmlidXRpb247CiAgICAKICAgIGJvb2wgY3Jvd2RzYWxlSGFzU3RhcnRlZDsKICAgIGJvb2wgc29mdENhcFJlYWNoZWQ7CiAgICBib29sIGhhcmRDYXBSZWFjaGVkOwogICAgYm9vbCBjcm93ZHNhbGVIYXNTdWNlc3NmdWx5RW5kZWQ7CiAgICB1aW50MjU2IGJsb2Nrc0luQURheTsKICAgIGJvb2wgb3duZXJIYXNDbGFpbWVkVG9rZW5zOwogICAgCiAgICB1aW50MjU2IGxhc3RFdGhSZXR1cm5JbmRleDsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgaGFzQ2xhaW1lZEV0aFdoZW5GYWlsOwogICAgCiAgICBldmVudCBDcm93ZHNhbGVTdGFydGVkKHVpbnQyNTYgX2Jsb2NrTnVtYmVyKTsKICAgIGV2ZW50IENyb3dkc2FsZVNvZnRDYXBSZWFjaGVkKHVpbnQyNTYgX2Jsb2NrTnVtYmVyKTsKICAgIGV2ZW50IENyb3dkc2FsZUhhcmRDYXBSZWFjaGVkKHVpbnQyNTYgX2Jsb2NrTnVtYmVyKTsKICAgIGV2ZW50IENyb3dkc2FsZUVuZGVkU3VjY2Vzc2Z1bHkodWludDI1NiBfYmxvY2tOdW1iZXIsIHVpbnQyNTYgX2Ftb3VudFJhaXNlZCk7CiAgICBldmVudCBDcm93ZHNhbGUodWludDI1NiBfYmxvY2tOdW1iZXIsIHVpbnQyNTYgX2FtbW91bnRSYWlzZWQpOwogICAgZXZlbnQgRXJyb3JTZW5kaW5nRVRIKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX2Ftb3VudCk7CiAgICAKICAgIGZ1bmN0aW9uIFZhbHVzQ3Jvd2RzYWxlKCl7CiAgICAgICAgCiAgICAgICAgYmxvY2tzSW5BRGF5ID0gMjk1MDsKICAgICAgICBzdGFydEJsb2NrID0gNDM2MzMxMDsKICAgICAgICBlbmRCbG9jayA9IHN0YXJ0QmxvY2sgKyBibG9ja3NJbkFEYXkgKiAyOTsgICAgICAKICAgICAgICBtaW5FdGhUb1JhaXNlID0gMzAzMCAqIDEwKioxODsgICAgICAgICAgICAgICAgICAgICAKICAgICAgICBtYXhFdGhUb1JhaXNlID0gMzAzMDMgKiAxMCoqMTg7ICAgICAgICAgICAgICAgICAKICAgICAgICBtdWx0aXNpZ0FkZHJlc3MgPSAweDRlOEZENTYwNTAyOEUxMkUxZTdiMUZhNjBkNDM3ZDMxMGZhOTdCYjI7CiAgICB9CiAgICAKICAvLyAgCiAgLyogVXNlciBhY2Nlc3NpYmxlIG1ldGhvZHMgKi8gICAKICAvLyAgCiAgICAKICAgIGZ1bmN0aW9uICgpIHBheWFibGV7CiAgICAgIGlmKG1zZy52YWx1ZSA9PSAwKSB0aHJvdzsKICAgICAgaWYgKGNyb3dkc2FsZUhhc1N1Y2Vzc2Z1bHlFbmRlZCB8fCBibG9jay5udW1iZXIgPiBlbmRCbG9jaykgdGhyb3c7ICAgICAgICAvLyBUaHJvdyBpZiB0aGUgQ3Jvd2RzYWxlIGhhcyBlbmRlZCAgICAgCiAgICAgIGlmICghY3Jvd2RzYWxlSGFzU3RhcnRlZCl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyB0aGUgZmlyc3QgQ3Jvd2RzYWxlIHRyYW5zYWN0aW9uICAgICAgIAogICAgICAgIGlmIChibG9jay5udW1iZXIgPj0gc3RhcnRCbG9jayl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBDcm93ZHNhbGUgc2hvdWxkIHN0YXJ0ICAgICAgICAKICAgICAgICAgIGNyb3dkc2FsZUhhc1N0YXJ0ZWQgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhhdCB0aGUgQ3Jvd2RzYWxlIGhhcyBzdGFydGVkICAgICAgICAgCiAgICAgICAgICBDcm93ZHNhbGVTdGFydGVkKGJsb2NrLm51bWJlcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgQ3Jvd2RzYWxlU3RhcnRlZCBldmVudCAgICAgCiAgICAgICAgfSBlbHNlewogICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChwYXJ0aWNpcGFudENvbnRyaWJ1dGlvblttc2cuc2VuZGVyXSA9PSAwKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBpcyBhIG5ldyB1c2VyICAgICAgIAogICAgICAgIHBhcnRpY2lwYW50SW5kZXhbbmV4dEZyZWVQYXJ0aWNpcGFudEluZGV4XSA9IG1zZy5zZW5kZXI7ICAgICAgICAgICAgICAgIC8vIEFkZCBhIG5ldyB1c2VyIHRvIHRoZSBwYXJ0aWNpcGFudCBpbmRleCAgICAgICAKICAgICAgICBuZXh0RnJlZVBhcnRpY2lwYW50SW5kZXggKz0gMTsKICAgICAgfSAgCiAgICAgIGlmIChtYXhFdGhUb1JhaXNlID4gKHRvdGFsRXRoUmFpc2VkICsgbXNnLnZhbHVlKSl7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHVzZXIgc2VudCB0b28gbXVjaCBFVEggICAgICAgCiAgICAgICAgcGFydGljaXBhbnRDb250cmlidXRpb25bbXNnLnNlbmRlcl0gKz0gbXNnLnZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGNvbnRyaWJ1dGlvbiAgICAgIAogICAgICAgIHRvdGFsRXRoUmFpc2VkICs9IG1zZy52YWx1ZTsgLy8gQWRkIHRvIHRvdGFsIGV0aCBSYWlzZWQKICAgICAgICB2YWx1c1Rva2VuQ29udHJhY3QubWludFRva2Vucyhtc2cuc2VuZGVyLCBnZXRWYWx1c1Rva2VuSXNzdWFuY2UoYmxvY2subnVtYmVyLCBtc2cudmFsdWUpKTsKICAgICAgICBpZiAoIXNvZnRDYXBSZWFjaGVkICYmIHRvdGFsRXRoUmFpc2VkID49IG1pbkV0aFRvUmFpc2UpeyAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgbWluIHRyZXNob2xkIGhhcyBiZWVuIHJlYWNoZWQgb25lIHRpbWUgICAgICAgIAogICAgICAgICAgQ3Jvd2RzYWxlU29mdENhcFJlYWNoZWQoYmxvY2subnVtYmVyKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJhaXNlIENyb3dkc2FsZXNvZnRDYXBSZWFjaGVkIGV2ZW50ICAgICAgICAKICAgICAgICAgIHNvZnRDYXBSZWFjaGVkID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhhdCB0aGUgbWluIHRyZXNob2xkIGhhcyBiZWVuIHJlYWNoZWQgICAgICAgCiAgICAgICAgfSAgICAgCiAgICAgIH1lbHNleyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdXNlciBzZW50IHRvIG11Y2ggZXRoICAgICAgIAogICAgICAgIHVpbnQgbWF4Q29udHJpYnV0aW9uID0gbWF4RXRoVG9SYWlzZSAtIHRvdGFsRXRoUmFpc2VkOyAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBtYXhpbXVtIGNvbnRyaWJ1dGlvbiAgICAgICAKICAgICAgICBwYXJ0aWNpcGFudENvbnRyaWJ1dGlvblttc2cuc2VuZGVyXSArPSBtYXhDb250cmlidXRpb247ICAgICAgICAgICAgICAgICAvLyBBZGQgbWF4aW11bSBjb250cmlidXRpb24gdG8gYWNjb3VudCAgICAgIAogICAgICAgIHRvdGFsRXRoUmFpc2VkICs9IG1heENvbnRyaWJ1dGlvbjsgIAogICAgICAgIHZhbHVzVG9rZW5Db250cmFjdC5taW50VG9rZW5zKG1zZy5zZW5kZXIsIGdldFZhbHVzVG9rZW5Jc3N1YW5jZShibG9jay5udW1iZXIsIG1heENvbnRyaWJ1dGlvbikpOwogICAgICAgIHVpbnQgdG9SZXR1cm4gPSBtc2cudmFsdWUgLSBtYXhDb250cmlidXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBob3cgbXVjaCBzaG91bGQgYmUgcmV0dXJuZWQgICAgICAgCiAgICAgICAgY3Jvd2RzYWxlSGFzU3VjZXNzZnVseUVuZGVkID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoYXQgQ3Jvd2RzYWxlIGhhcyBzdWNjZXNzZnVsbHkgZW5kZWQgICAgCiAgICAgICAgQ3Jvd2RzYWxlSGFyZENhcFJlYWNoZWQoYmxvY2subnVtYmVyKTsKICAgICAgICBoYXJkQ2FwUmVhY2hlZCA9IHRydWU7CiAgICAgICAgQ3Jvd2RzYWxlRW5kZWRTdWNjZXNzZnVseShibG9jay5udW1iZXIsIHRvdGFsRXRoUmFpc2VkKTsgICAgICAKICAgICAgICBpZighbXNnLnNlbmRlci5zZW5kKHRvUmV0dXJuKSl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZnVuZCB0aGUgYmFsYW5jZSB0aGF0IGlzIG92ZXIgdGhlIGNhcCAgICAgICAgIAogICAgICAgICAgRXJyb3JTZW5kaW5nRVRIKG1zZy5zZW5kZXIsIHRvUmV0dXJuKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQgZm9yIG1hbnVhbCByZXR1cm4gaWYgdHJhbnNhY3Rpb24gdGhyb3dzICAgICAgIAogICAgICAgIH0gICAgIAogICAgICB9ICAgICAKICAgIH0KICAgIAogICAgLyogVXNlcnMgY2FuIGNsYWltIEVUSCBieSB0aGVtc2VsdmVzIGlmIHRoZXkgd2FudCB0byBpbiBjYXNlIG9mIEVUSCBmYWlsdXJlICovICAgCiAgICBmdW5jdGlvbiBjbGFpbUV0aElmRmFpbGVkKCl7ICAgIAogICAgICBpZiAoYmxvY2subnVtYmVyIDw9IGVuZEJsb2NrIHx8IHRvdGFsRXRoUmFpc2VkID49IG1pbkV0aFRvUmFpc2UpIHRocm93OyAvLyBDaGVjayBpZiBDcm93ZHNhbGUgaGFzIGZhaWxlZCAgICAKICAgICAgaWYgKHBhcnRpY2lwYW50Q29udHJpYnV0aW9uW21zZy5zZW5kZXJdID09IDApIHRocm93OyAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBoYXMgcGFydGljaXBhdGVkICAgICAKICAgICAgaWYgKGhhc0NsYWltZWRFdGhXaGVuRmFpbFttc2cuc2VuZGVyXSkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBhY2NvdW50IGhhcyBhbHJlYWR5IGNsYWltZWQgRVRIICAgIAogICAgICB1aW50MjU2IGV0aENvbnRyaWJ1dGVkID0gcGFydGljaXBhbnRDb250cmlidXRpb25bbXNnLnNlbmRlcl07ICAgICAgICAgICAvLyBHZXQgcGFydGljaXBhbnQgRVRIIENvbnRyaWJ1dGlvbiAgICAgCiAgICAgIGhhc0NsYWltZWRFdGhXaGVuRmFpbFttc2cuc2VuZGVyXSA9IHRydWU7ICAgICAKICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoZXRoQ29udHJpYnV0ZWQpKXsgICAgICAKICAgICAgICBFcnJvclNlbmRpbmdFVEgobXNnLnNlbmRlciwgZXRoQ29udHJpYnV0ZWQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQgaWYgc2VuZCBmYWlsZWQsIHNvbHZlIG1hbnVhbGx5ICAgICAKICAgICAgfSAgIAogICAgfSAKCiAgICAvKiBPd25lciBjYW4gcmV0dXJuIGV0aCBmb3IgbXVsdGlwbGUgdXNlcnMgaW4gb25lIGNhbGwgKi8gIAogICAgZnVuY3Rpb24gYmF0Y2hSZXR1cm5FdGhJZkZhaWxlZCh1aW50MjU2IF9udW1iZXJPZlJldHVybnMpIG9ubHlPd25lcnsgICAgCiAgICAgIGlmIChibG9jay5udW1iZXIgPCBlbmRCbG9jayB8fCB0b3RhbEV0aFJhaXNlZCA+PSBtaW5FdGhUb1JhaXNlKSB0aHJvdzsgICAgLy8gQ2hlY2sgaWYgQ3Jvd2RzYWxlIGZhaWxlZCAgCiAgICAgIGFkZHJlc3MgY3VycmVudFBhcnRpY2lwYW50QWRkcmVzczsgICAgCiAgICAgIHVpbnQyNTYgY29udHJpYnV0aW9uOwogICAgICBmb3IgKHVpbnQgY250ID0gMDsgY250IDwgX251bWJlck9mUmV0dXJuczsgY250KyspeyAgICAgIAogICAgICAgIGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MgPSBwYXJ0aWNpcGFudEluZGV4W2xhc3RFdGhSZXR1cm5JbmRleF07ICAgICAgIC8vIEdldCBuZXh0IGFjY291bnQgICAgICAgCiAgICAgICAgaWYgKGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MgPT0gMHgwKSByZXR1cm47ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcGFydGljaXBhbnRzIHdlcmUgcmVpbWJ1cnNlZCAgICAgIAogICAgICAgIGlmICghaGFzQ2xhaW1lZEV0aFdoZW5GYWlsW2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdKSB7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaGFzIG1hbnVhbGx5IHJlY292ZXJlZCBFVEggICAgICAgICAKICAgICAgICAgIGNvbnRyaWJ1dGlvbiA9IHBhcnRpY2lwYW50Q29udHJpYnV0aW9uW2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdOyAgICAvLyBHZXQgYWNjb3VudHMgY29udHJpYnV0aW9uICAgICAgICAKICAgICAgICAgIGhhc0NsYWltZWRFdGhXaGVuRmFpbFttc2cuc2VuZGVyXSA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhhdCB1c2VyIGdvdCBoaXMgRVRIIGJhY2sgICAgICAgICAKICAgICAgICAgIGlmICghY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcy5zZW5kKGNvbnRyaWJ1dGlvbikpeyAgICAgICAgICAgICAgICAgICAvLyBTZW5kIGZ1bmQgYmFjayB0byBhY2NvdW50ICAgICAgICAgIAogICAgICAgICAgICAgRXJyb3JTZW5kaW5nRVRIKGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MsIGNvbnRyaWJ1dGlvbik7ICAgICAgICAgICAvLyBSYWlzZSBldmVudCBpZiBzZW5kIGZhaWxlZCwgcmVzb2x2ZSBtYW51YWxseSAgICAgICAgIAogICAgICAgICAgfSAgICAgICAKICAgICAgICB9ICAgICAgIAogICAgICAgIGxhc3RFdGhSZXR1cm5JbmRleCArPSAxOyAgICAKICAgICAgfSAgIAogICAgfQogICAgICAKICAgIC8qIE93bmVyIHNldHMgbmV3IGFkZHJlc3Mgb2YgZXNjcm93ICovCiAgICBmdW5jdGlvbiBjaGFuZ2VNdWx0aXNpZ0FkZHJlc3MoYWRkcmVzcyBfbmV3QWRkcmVzcykgb25seU93bmVyIHsgICAgIAogICAgICBtdWx0aXNpZ0FkZHJlc3MgPSBfbmV3QWRkcmVzczsKICAgIH0gCiAgICAKICAgIC8qIFNob3cgaG93IG1hbnkgcGFydGljaXBhbnRzIHdhcyAqLwogICAgZnVuY3Rpb24gcGFydGljaXBhbnRDb3VudCgpIGNvbnN0YW50IHJldHVybnModWludCl7CiAgICAgIHJldHVybiBuZXh0RnJlZVBhcnRpY2lwYW50SW5kZXg7CiAgICB9CgogICAgLyogT3duZXIgY2FuIGNsYWltIHJlc2VydmVkIHRva2VucyBvbiB0aGUgZW5kIG9mIGNyb3dzYWxlICovICAKICAgIGZ1bmN0aW9uIGNsYWltVGVhbVRva2VucyhhZGRyZXNzIF90bykgb25seU93bmVyeyAgICAgCiAgICAgIGlmICghY3Jvd2RzYWxlSGFzU3VjZXNzZnVseUVuZGVkKSB0aHJvdzsgCiAgICAgIGlmIChvd25lckhhc0NsYWltZWRUb2tlbnMpIHRocm93OwogICAgICAgIAogICAgICB2YWx1c1Rva2VuQ29udHJhY3QubWludFRva2VucyhfdG8sIHZhbHVzVG9rZW5Db250cmFjdC50b3RhbFN1cHBseSgpICogNDkvNTEpOyAvKiA1MSUgQ3Jvd2RzYWxlIC0gNDklIFZBTFVTICovCiAgICAgIG93bmVySGFzQ2xhaW1lZFRva2VucyA9IHRydWU7CiAgICB9IAogICAgICAKICAgIC8qIFNldCB0b2tlbiBjb250cmFjdCB3aGVyZSBtaW50cyB3aWxsIGJlIGRvbmUgKHRva2VucyB3aWxsIGJlIGlzc3VlZCkgKi8gIAogICAgZnVuY3Rpb24gc2V0VG9rZW5Db250cmFjdChhZGRyZXNzIF92YWx1c1Rva2VuQ29udHJhY3RBZGRyZXNzKSBvbmx5T3duZXIgeyAgICAgCiAgICAgIHZhbHVzVG9rZW5Db250cmFjdCA9IElWYWx1c1Rva2VuKF92YWx1c1Rva2VuQ29udHJhY3RBZGRyZXNzKTsgICAKICAgIH0gICAKICAgICAgIAogICAgZnVuY3Rpb24gZ2V0VmFsdXNUb2tlbklzc3VhbmNlKHVpbnQyNTYgX2Jsb2NrTnVtYmVyLCB1aW50MjU2IF9ldGhTZW50KSBjb25zdGFudCByZXR1cm5zKHVpbnQpewogICAgICBpZiAoX2Jsb2NrTnVtYmVyID49IHN0YXJ0QmxvY2sgJiYgX2Jsb2NrTnVtYmVyIDwgc3RhcnRCbG9jayArIGJsb2Nrc0luQURheSAqIDIpIHJldHVybiBfZXRoU2VudCAqIDM4ODI7CiAgICAgIGlmIChfYmxvY2tOdW1iZXIgPj0gc3RhcnRCbG9jayArIGJsb2Nrc0luQURheSAqIDIgJiYgX2Jsb2NrTnVtYmVyIDwgc3RhcnRCbG9jayArIGJsb2Nrc0luQURheSAqIDcpIHJldHVybiBfZXRoU2VudCAqIDM2Njc7IAogICAgICBpZiAoX2Jsb2NrTnVtYmVyID49IHN0YXJ0QmxvY2sgKyBibG9ja3NJbkFEYXkgKiA3ICYmIF9ibG9ja051bWJlciA8IHN0YXJ0QmxvY2sgKyBibG9ja3NJbkFEYXkgKiAxNCkgcmV0dXJuIF9ldGhTZW50ICogMzUxMTsgCiAgICAgIGlmIChfYmxvY2tOdW1iZXIgPj0gc3RhcnRCbG9jayArIGJsb2Nrc0luQURheSAqIDE0ICYmIF9ibG9ja051bWJlciA8IHN0YXJ0QmxvY2sgKyBibG9ja3NJbkFEYXkgKiAyMSkgcmV0dXJuIF9ldGhTZW50ICogMzQwMjsgCiAgICAgIGlmIChfYmxvY2tOdW1iZXIgPj0gc3RhcnRCbG9jayArIGJsb2Nrc0luQURheSAqIDIxICkgcmV0dXJuIF9ldGhTZW50ICogMzMwMDsKICAgIH0KICAgIAogICAgLyogV2l0aGRyYXcgZnVuZHMgZnJvbSBjb250cmFjdCAqLyAgCiAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aGVyKCkgb25seU93bmVyeyAgICAgCiAgICAgIGlmICh0aGlzLmJhbGFuY2UgPT0gMCkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBiYWxhbmNlIG9uIHRoZSBjb250cmFjdCAgICAgCiAgICAgIGlmICh0b3RhbEV0aFJhaXNlZCA8IG1pbkV0aFRvUmFpc2UpIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBtaW5FdGhUb1JhaXNlIHRyZXNob2xkIGlzIGV4Y2VlZGVkICAgICAKICAgICAgICAgIAogICAgICBpZihtdWx0aXNpZ0FkZHJlc3Muc2VuZCh0aGlzLmJhbGFuY2UpKXt9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VuZCB0aGUgY29udHJhY3QncyBiYWxhbmNlIHRvIG11bHRpc2lnIGFkZHJlc3MgICAKICAgIH0KCiAgICBmdW5jdGlvbiBlbmRDcm93ZHNhbGUoKSBvbmx5T3duZXJ7CiAgICAgIGlmICh0b3RhbEV0aFJhaXNlZCA8IG1pbkV0aFRvUmFpc2UpIHRocm93OwogICAgICBpZiAoYmxvY2subnVtYmVyIDwgZW5kQmxvY2spIHRocm93OwogICAgICBjcm93ZHNhbGVIYXNTdWNlc3NmdWx5RW5kZWQgPSB0cnVlOwogICAgICBDcm93ZHNhbGVFbmRlZFN1Y2Nlc3NmdWx5KGJsb2NrLm51bWJlciwgdG90YWxFdGhSYWlzZWQpOwogICAgfQogICAgCiAgICAKICAgIGZ1bmN0aW9uIHNhbHZhZ2VUb2tlbnNGcm9tQ29udHJhY3QoYWRkcmVzcyBfdG9rZW5BZGRyZXNzLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBvbmx5T3duZXJ7CiAgICBJRVJDMjBUb2tlbihfdG9rZW5BZGRyZXNzKS50cmFuc2ZlcihfdG8sIF9hbW91bnQpOwogICAgfQogICAgLyogR2V0dGVycyAqLyAgICAgCiAgICAKICAgIGZ1bmN0aW9uIGdldFZsc1Rva2VuQWRkcmVzcygpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcyBfdG9rZW5BZGRyZXNzKXsgICAgCiAgICAgIHJldHVybiBhZGRyZXNzKHZhbHVzVG9rZW5Db250cmFjdCk7ICAgCiAgICB9ICAgCiAgICAKICAgIGZ1bmN0aW9uIGNyb3dkc2FsZUluUHJvZ3Jlc3MoKSBjb25zdGFudCByZXR1cm5zIChib29sIGFuc3dlcil7ICAgIAogICAgICByZXR1cm4gY3Jvd2RzYWxlSGFzU3RhcnRlZCAmJiAhY3Jvd2RzYWxlSGFzU3VjZXNzZnVseUVuZGVkOyAgIAogICAgfSAgIAogICAgCiAgICBmdW5jdGlvbiBwYXJ0aWNpcGFudENvbnRyaWJ1dGlvbkluRXRoKGFkZHJlc3MgX3F1ZXJyeUFkZHJlc3MpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW5zd2VyKXsgICAgCiAgICAgIHJldHVybiBwYXJ0aWNpcGFudENvbnRyaWJ1dGlvbltfcXVlcnJ5QWRkcmVzc107ICAgCiAgICB9CiAgICAKICAgIC8qIFdpdGhkcmF3IHJlbWFpbmluZyBiYWxhbmNlIHRvIG1hbnVhbGx5IHJldHVybiB3aGVyZSBjb250cmFjdCBzZW5kIGhhcyBmYWlsZWQgKi8gIAogICAgZnVuY3Rpb24gd2l0aGRyYXdSZW1haW5pbmdCYWxhbmNlRm9yTWFudWFsUmVjb3ZlcnkoKSBvbmx5T3duZXJ7ICAgICAKICAgICAgaWYgKHRoaXMuYmFsYW5jZSA9PSAwKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGJhbGFuY2Ugb24gdGhlIGNvbnRyYWN0ICAgIAogICAgICBpZiAoYmxvY2subnVtYmVyIDwgZW5kQmxvY2spIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgQ3Jvd2RzYWxlIGZhaWxlZCAgICAKICAgICAgaWYgKHBhcnRpY2lwYW50SW5kZXhbbGFzdEV0aFJldHVybkluZGV4XSAhPSAweDApIHRocm93OyAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGFsbCB0aGUgcGFydGljaXBhbnRzIGhhdmUgYmVlbiByZWltYnVyc2VkICAgICAKICAgICAgaWYgKG11bHRpc2lnQWRkcmVzcy5zZW5kKHRoaXMuYmFsYW5jZSkpe30gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgcmVtYWluZGVyIHNvIGl0IGNhbiBiZSBtYW51YWxseSBwcm9jZXNzZWQgICAKICAgIH0KfQ=='.
	

]
