Class {
	#name : #SRTd7ee73ee5a1456c1c644692685608b4b0338063d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd7ee73ee5a1456c1c644692685608b4b0338063d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTA7Ci8qKgoqIEhvZGxkIERBTyBhbmQgRVJDMjAgdG9rZW4KKiBBdXRob3I6IEN1cnJlbmN5VHljb29uIG9uIEdpdEh1YgoqIExpY2Vuc2U6IE1JVAoqIERhdGU6IDIwMTcKKgoqIERlcGxveSB3aXRoIHRoZSBmb2xsb3dpbmcgYXJnczoKKiAiSG9kbCBEQU8iLCAxOCwgIkhPREwiCioKKi8KY29udHJhY3QgSG9kbERBTyB7CiAgICAvKiBFUkMyMCBQdWJsaWMgdmFyaWFibGVzIG9mIHRoZSB0b2tlbiAqLwogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gJ0hEQU8gMC40JzsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDggcHVibGljIGRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLyogRVJDMjAgVGhpcyBjcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGJhbGFuY2VzICovCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlT2Y7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2FuY2U7CgoKICAgIC8qIHN0b3JlIHRoZSBibG9jayBudW1iZXIgd2hlbiBhIHdpdGhkcmF3YWwgaGFzIGJlZW4gcmVxdWVzdGVkKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gd2l0aGRyYXdhbFJlcXVlc3QpIHB1YmxpYyB3aXRoZHJhd2FsUmVxdWVzdHM7CiAgICBzdHJ1Y3Qgd2l0aGRyYXdhbFJlcXVlc3QgewogICAgdWludCBzaW5jZUJsb2NrOwogICAgdWludDI1NiBhbW91bnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBmZWVQb3QgY29sbGVjdHMgZmVlcyBmcm9tIHF1aWNrIHdpdGhkcmF3YWxzLiBUaGlzIGdldHMgcmUtZGlzdHJpYnV0ZWQgdG8gc2xvdy13aXRoZHJhd2FscwogICAgKi8KICAgIHVpbnQyNTYgcHVibGljIGZlZVBvdDsKCiAgICB1aW50MzIgcHVibGljIGNvbnN0YW50IGJsb2NrV2FpdCA9IDE3MjgwMDsgLy8gcm91Z2hseSAzMCBkYXlzLCAgKDI1OTIwMDAgLyAxNSkgLSBhc3N1bWluZyBibG9jayB0aW1lIGlzIH4xNSBzZWMuCiAgICAvL3VpbnQgcHVibGljIGNvbnN0YW50IGJsb2NrV2FpdCA9IDg7IC8vIHJvdWdobHkgYXNzdW1pbmcgYmxvY2sgdGltZSBpcyB+MTUgc2VjLiAodW5jb21tZW50IHdoZW4gdGVzdGluZyBvbiB0ZXN0bmV0KQoKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGluaXRpYWxTdXBwbHkgPSAwOwoKICAgIC8qKgogICAgICogRVJDMjAgZXZlbnRzIHRoZXNlIGdlbmVyYXRlIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cwogICAgKi8KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgogICAgZXZlbnQgV2l0aGRyYXdhbFF1aWNrKGFkZHJlc3MgaW5kZXhlZCBieSwgdWludDI1NiBhbW91bnQsIHVpbnQyNTYgZmVlKTsgLy8gcXVpY2sgd2l0aGRyYXdhbCBkb25lCiAgICBldmVudCBJbmNvcnJlY3RGZWUoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50MjU2IGZlZVJlcXVpcmVkKTsgIC8vIGluY29ycmVjdCBmZWUgcGFpZCBmb3IgcXVpY2sgd2l0aGRyYXdhbAogICAgZXZlbnQgV2l0aGRyYXdhbFN0YXJ0ZWQoYWRkcmVzcyBpbmRleGVkIGJ5LCB1aW50MjU2IGFtb3VudCk7CiAgICBldmVudCBXaXRoZHJhd2FsRG9uZShhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQyNTYgYW1vdW50LCB1aW50MjU2IHJld2FyZCk7IC8vIGFtb3VudCBpcyB0aGUgYW1vdW50IHRoYXQgd2FzIHVzZWQgdG8gY2FsY3VsYXRlIHJld2FyZAogICAgZXZlbnQgV2l0aGRyYXdhbFByZW1hdHVyZShhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQgYmxvY2tzVG9XYWl0KTsgLy8gTmVlZHMgdG8gd2FpdCBibG9ja3NUb1dhaXQgYmVmb3JlIHdpdGhkcmF3YWwgdW5sb2NrZWQKICAgIGV2ZW50IERlcG9zaXRlZChhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQyNTYgYW1vdW50KTsKCiAgICAvKioKICAgICAqIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdAogICAgICogSW4gb3VyIGNhc2UsIHRoZXJlJ3Mgbm8gaW5pdGlhbCBzdXBwbHkuIFRva2VucyB3aWxsIGJlIGNyZWF0ZWQgYXMgZXRoZXIgaXMgc2VudAogICAgICogdG8gdGhlIGZhbGwtYmFjayBmdW5jdGlvbi4gVGhlbiB0b2tlbnMgYXJlIGJ1cm5lZCB3aGVuIGV0aGVyIGlzIHdpdGhkcmF3bi4KICAgICAqLwogICAgZnVuY3Rpb24gSG9kbERBTygKICAgIHN0cmluZyB0b2tlbk5hbWUsCiAgICB1aW50OCBkZWNpbWFsVW5pdHMsCiAgICBzdHJpbmcgdG9rZW5TeW1ib2wKICAgICkgewoKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBpbml0aWFsU3VwcGx5OyAgICAgICAgICAgICAgLy8gR2l2ZSB0aGUgY3JlYXRvciBhbGwgaW5pdGlhbCB0b2tlbnMgKDAgaW4gdGhpcyBjYXNlKQogICAgICAgIHRvdGFsU3VwcGx5ID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdG90YWwgc3VwcGx5ICgwIGluIHRoaXMgY2FzZSkKICAgICAgICBuYW1lID0gdG9rZW5OYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBuYW1lIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgc3ltYm9sID0gdG9rZW5TeW1ib2w7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgc3ltYm9sIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgZGVjaW1hbHMgPSBkZWNpbWFsVW5pdHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtb3VudCBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgfQoKICAgIC8qKgogICAgICogbm90UGVuZGluZ1dpdGhkcmF3YWwgbW9kaWZpZXIgZ3VhcmRzIHRoZSBmdW5jdGlvbiBmcm9tIGV4ZWN1dGluZyB3aGVuIGEKICAgICAqIHdpdGhkcmF3YWwgaGFzIGJlZW4gcmVxdWVzdGVkIGFuZCBpcyBjdXJyZW50bHkgcGVuZGluZwogICAgICovCiAgICBtb2RpZmllciBub3RQZW5kaW5nV2l0aGRyYXdhbCB7CiAgICAgICAgaWYgKHdpdGhkcmF3YWxSZXF1ZXN0c1ttc2cuc2VuZGVyXS5zaW5jZUJsb2NrID4gMCkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKiogRVJDMjAgLSB0cmFuc2ZlciBzZW5kcyB0b2tlbnMKICAgICAqIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgbm90UGVuZGluZ1dpdGhkcmF3YWwgewogICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHRocm93OyAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHRocm93OyAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAvLyBOb3RpZnkgYW55b25lIGxpc3RlbmluZyB0aGF0IHRoaXMgdHJhbnNmZXIgdG9vayBwbGFjZQogICAgfQoKICAgIC8qKiBFUkMyMCBhcHByb3ZlIGFsbG93cyBhbm90aGVyIGNvbnRyYWN0IHRvIHNwZW5kIHNvbWUgdG9rZW5zIGluIHlvdXIgYmVoYWxmCiAgICAgKiBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgKgogICAgICoKICAgICAqIE5vdGUsIHRoZXJlIGFyZSBzb21lIGVkZ2UtY2FzZXMgd2l0aCB0aGUgRVJDLTIwIGFwcHJvdmUgbWVjaGFuaXNtLiBJbiB0aGlzIGNhc2UgYSAnYm91bmRzIGNoZWNrJwogICAgICogd2FzIGFkZGVkIHRvIG1ha2Ugc3VyZSBBbGljZSBjYW50JyBhcHByb3ZlIEJvYiBmb3IgbW9yZSB0b2tlbnMgdGhhbiBzaGUgaGFzLgogICAgICogVGhlIGFzc3VtcHRpb25zIGFyZSB0aGF0IHRoZXNlIHNjZW5hcmlvcyBjb3VsZCBzdGlsbCBoYXBwZW4gaWYgbm90IG1pdGlnYXRlZCBieSBBbGljZToKICAgICAqCiAgICAgKiBTY2VuYXJpbyAxOgogICAgICoKICAgICAqIFRoZSBmb2xsb3dpbmcgc2NlbmFyaW8gY291bGQgYmUgdGhlIGV4cGVjdGVkIG91dGNvbWUgYnkgQWxpY2UsIGJ1dCBpZiBub3QsIEFsaWNlIHdvdWxkIG5lZWQgdG8gc2V0CiAgICAgKiBoZXIgYXBwcm92YWwgdG8gQm9iIHRvIDAgYmVmb3JlIEFsaWNlIHB1cmNoYXNlcyBtb3JlIHRva2Vucy4KICAgICAqCiAgICAgKiAgMS4gQWxpY2UgaGFzIDEwMCB0b2tlbnMuCiAgICAgKiAgMi4gQWxpY2UgYXBwcm92ZXMgNTAgdG9rZW5zIGZvciBCb2IuCiAgICAgKiAgMy4gQWxpY2UgYXBwcm92ZXMgMTAwIHRva2VucyBmb3IgQ2hhcmxlcwogICAgICogIDQuIEJvYiBjYWxscyB0cmFuc2ZlckZyb20gYW5kIHJlY2VpdmVzIGhpcyA1MCB0b2tlbnMuCiAgICAgKiAgNS4gQ2hhcmxlcyBjYWxscyB0cmFuc2ZlckZyb20gYW5kIHJlY2VpdmVzIHRoZSByZW1haW5pbmcgNTAgdG9rZW5zCiAgICAgKiAgNi4gQ2hhcmxlcyBzdGlsbCBoYXMgYW4gYXBwcm92YWwgZm9yIDUwIG1vcmUgdG9rZW5zIGZyb20gQWxpY2UsIGV2ZW4gdGhvdWdoIHNoZSBub3cgb3ducyAwIHRva2Vucy4KICAgICAqICA3LiBBbGljZSBwdXJjaGFzZXMgNTAgbW9yZSB0b2tlbnMKICAgICAqICA4LiBDaGFybGVzIHNlZXMgdGhpcywgYW5kIGltbWVkaWF0ZWx5IGNhbGxzIHRyYW5zZmVyRnJvbSBhbmQgcmVjZWl2ZXMgdGhvc2UgNTAgdG9rZW5zLgogICAgICoKICAgICAqIFNjZW5hcmlvIDI6CiAgICAgKgogICAgICogVGhpcyBpcyBhIHJhY2UgY29uZGl0aW9uLiBUbyBtaXRpZ2F0ZSB0aGlzIHByb2JsZW0sIEFsaWNlIHNob3VsZCBzZXQgdGhlIGFsbG93YW5jZSB0byAwIGluIHN0ZXAgMiwKICAgICAqIHRoZW4gd2FpdCB1bnRpbCBpdCdzIG1pbmVkLCB0aGVuIGlmIEJvYiBkaWRuJ3QgdGFrZSB0aGUgMTAwIHNoZSBjYW4gc2V0IHRvIDUwLiAoT3RoZXJ3aXNlIEJvYiBtYXkKICAgICAqIHBvdGVudGlhbGx5IGdldCAxNTAgdG9rZW5zKQogICAgICoKICAgICAqCiAgICAgKiAgMS4gQWxpY2UgYXBwcm92ZXMgQm9iIGZvciAxMDAsCiAgICAgKiAgMi4gQWxpY2UgY2hhbmdlcyBpdCB0byA1MAogICAgICogIDMuIEJvYiBzZWVzIHRoZSBjaGFuZ2UgaW4gdGhlIG1lbXBvb2wgYmVmb3JlIGl0J3MgbWluZWQsIGFuZCBzZW5kcyBhIG5ldyB0cmFuc2FjdGlvbgogICAgICogICAgIHRoYXQgd2lsbCBob3BlZnVsbHkgd2luIHRoZSByYWNlIGFuZCB3aXRoZHJhdyB0aGUgMTAwIGZpcnN0LCBtZWFud2hpbGUgdGhlIDUwIHdpbGwKICAgICAqICAgICBiZSBtaW5lZCBhZnRlciBhbmQgYWxsb3cgQm9iIHRvIHdpdGhkcmF3IGFub3RoZXIgNTAuCiAgICAgKgogICAgICoKICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgbm90UGVuZGluZ1dpdGhkcmF3YWwKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGxpbmUgaGFzIGJlZW4gY29tbWVudGVkIG91dCBhZnRlciBwZWVyIHJldmlldyAjMgogICAgICAgIC8vIEl0IG1heSBiZSBwb3NzaWJsZSB0aGF0IEFsaWNlIGNhbiBwcmUtYXBwcm92ZSB0aGUgcmVjaXBpZW50IGluIGFkdmFuY2UsIGJlZm9yZSBzaGUgaGFzIGEgYmFsYW5jZS4KICAgICAgICAvLyBlZy4gQWxpY2UgbWF5IGFwcHJvdmUgYSB0b3RhbCBsaWZldGltZSBhbW91bnQgZm9yIGhlciBjaGlsZCB0byBzcGVuZCwgYnV0IG9ubHkgZnVuZCBoZXIgYWNjb3VudCBtb250aGx5LgogICAgICAgIC8vIEl0IGFsc28gYWxsb3dzIGhlciB0byBoYXZlIG11bHRpcGxlIGVxdWFsIGFwcHJvdmVlcwoKICAgICAgICAvL2lmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHJldHVybiBmYWxzZTsgLy8gRG9uJ3QgYWxsb3cgbW9yZSB0aGFuIHRoZXkgY3VycmVudGx5IGhhdmUgKGJvdW5kcyBjaGVjaykKCiAgICAgICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3NlcyYjMTgwOwogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLDApYCBpZiBpdCBpcyBub3QKICAgICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7CiAgICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIG11c3QgcmV0dXJuIGEgYm9vbCBhcyBwYXJ0IG9mIHRoZSBFUkMyMAogICAgfQoKCiAgICAvKioKICAgICAqIEVSQy0yMCBBcHByb3ZlcyBhbmQgdGhlbiBjYWxscyB0aGUgcmVjZWl2aW5nIGNvbnRyYWN0CiAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpIG5vdFBlbmRpbmdXaXRoZHJhd2FsCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgaWYgKCFhcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpKSByZXR1cm4gZmFsc2U7CgogICAgICAgIC8vY2FsbCB0aGUgcmVjZWl2ZUFwcHJvdmFsIGZ1bmN0aW9uIG9uIHRoZSBjb250cmFjdCB5b3Ugd2FudCB0byBiZSBub3RpZmllZC4gVGhpcyBjcmFmdHMgdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBtYW51YWxseSBzbyBvbmUgZG9lc24ndCBoYXZlIHRvIGluY2x1ZGUgYSBjb250cmFjdCBpbiBoZXJlIGp1c3QgZm9yIHRoaXMuCiAgICAgICAgLy9yZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuQ29udHJhY3QsIGJ5dGVzIF9leHRyYURhdGEpCiAgICAgICAgLy9pdCBpcyBhc3N1bWVkIHRoYXQgd2hlbiBkb2VzIHRoaXMgdGhhdCB0aGUgY2FsbCAqc2hvdWxkKiBzdWNjZWVkLCBvdGhlcndpc2Ugb25lIHdvdWxkIHVzZSB2YW5pbGxhIGFwcHJvdmUgaW5zdGVhZC4KICAgICAgICBpZighX3NwZW5kZXIuY2FsbChieXRlczQoYnl0ZXMzMihzaGEzKCJyZWNlaXZlQXBwcm92YWwoYWRkcmVzcyx1aW50MjU2LGFkZHJlc3MsYnl0ZXMpIikpKSwgbXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBFUkMyMCBBIGNvbnRyYWN0IGF0dGVtcHRzIHRvIGdldCB0aGUgY29pbnMuIE5vdGU6IFdlIGFyZSBub3QgYWxsb3dpbmcgYSB0cmFuc2ZlciBpZgogICAgICogZWl0aGVyIHRoZSBmcm9tIG9yIHRvIGFkZHJlc3MgaXMgcGVuZGluZyB3aXRoZHJhd2FsCiAgICAgKiBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy8gbm90ZSB0aGF0IHdlIGNhbid0IHVzZSBub3RQZW5kaW5nV2l0aGRyYXdhbCBtb2RpZmllciBoZXJlIHNpbmNlIHRoaXMgZnVuY3Rpb24gZG9lcyBhIHRyYW5zZmVyCiAgICAgICAgLy8gb24gdGhlIGJlaGFsZiBvZiBfZnJvbQogICAgICAgIGlmICh3aXRoZHJhd2FsUmVxdWVzdHNbX2Zyb21dLnNpbmNlQmxvY2sgPiAwKSB0aHJvdzsgIC8vIGNhbid0IG1vdmUgdG9rZW5zIHdoZW4gX2Zyb20gaXMgcGVuZGluZyB3aXRoZHJhd2FsCiAgICAgICAgaWYgKHdpdGhkcmF3YWxSZXF1ZXN0c1tfdG9dLnNpbmNlQmxvY2sgPiAwKSB0aHJvdzsgICAgLy8gY2FuJ3QgbW92ZSB0b2tlbnMgd2hlbiBfdG8gaXMgcGVuZGluZyB3aXRoZHJhd2FsCiAgICAgICAgaWYgKGJhbGFuY2VPZltfZnJvbV0gPCBfdmFsdWUpIHRocm93OyAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHRocm93OyAgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIGlmIChfdmFsdWUgPiBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKSB0aHJvdzsgICAgIC8vIENoZWNrIGFsbG93YW5jZQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIHdpdGhkcmF3YWxJbml0aWF0ZSBpbml0aWF0ZXMgdGhlIHdpdGhkcmF3YWwgYnkgZ29pbmcgaW50byBhIHdhaXRpbmcgcGVyaW9kCiAgICAgKiBJdCByZW1lbWJlcnMgdGhlIGJsb2NrIG51bWJlciAmIGFtb3VudCBoZWxkIGF0IHRoZSB0aW1lIG9mIHJlcXVlc3QuCiAgICAgKiBUb2tlbnMgY2Fubm90IGJlIG1vdmVkIG91dCBkdXJpbmcgdGhlIHdhaXRpbmcgcGVyaW9kLCBsb2NraW5nIHRoZSB0b2tlbnMgdW50aWwgdGhlbi4KICAgICAqIEFmdGVyIHRoZSB3YWl0aW5nIHBlcmlvZCBmaW5pc2hlcywgdGhlIGNhbGwgd2l0aGRyYXdhbENvbXBsZXRlCiAgICAgKgogICAgICogR2FzOiA2NDQ5MAogICAgICoKICAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXdhbEluaXRpYXRlKCkgbm90UGVuZGluZ1dpdGhkcmF3YWwgewogICAgICAgIFdpdGhkcmF3YWxTdGFydGVkKG1zZy5zZW5kZXIsIGJhbGFuY2VPZlttc2cuc2VuZGVyXSk7CiAgICAgICAgd2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdID0gd2l0aGRyYXdhbFJlcXVlc3QoYmxvY2subnVtYmVyLCBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0pOwogICAgfQoKICAgIC8qKgogICAgICogd2l0aGRyYXdhbENvbXBsZXRlIGlzIGNhbGxlZCBhZnRlciB0aGUgd2FpdGluZyBwZXJpb2QuIFRoZSBldGhlciB3aWxsIGJlCiAgICAgKiByZXR1cm5lZCB0byB0aGUgY2FsbGVyIGFuZCB0aGUgdG9rZW5zIHdpbGwgYmUgYnVybmVkLgogICAgICogQSByZXdhcmQgd2lsbCBiZSBpc3N1ZWQgYmFzZWQgb24gdGhlIGN1cnJlbnQgYW1vdW50IGluIHRoZSBmZWVQb3QsIHJlbGF0aXZlIHRvIHRoZQogICAgICogYW1vdW50IHRoYXQgd2FzIHJlcXVlc3RlZCBmb3Igd2l0aGRyYXdhbCB3aGVuIHdpdGhkcmF3YWxJbml0aWF0ZSgpIHdhcyBjYWxsZWQuCiAgICAgKgogICAgICogR2FzOiAzMDk0NgogICAgICovCiAgICBmdW5jdGlvbiB3aXRoZHJhd2FsQ29tcGxldGUoKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgd2l0aGRyYXdhbFJlcXVlc3QgciA9IHdpdGhkcmF3YWxSZXF1ZXN0c1ttc2cuc2VuZGVyXTsKICAgICAgICBpZiAoci5zaW5jZUJsb2NrID09IDApIHRocm93OwogICAgICAgIGlmICgoci5zaW5jZUJsb2NrICsgYmxvY2tXYWl0KSA+IGJsb2NrLm51bWJlcikgewogICAgICAgICAgICAvLyBob2xkZXIgbmVlZHMgdG8gd2FpdCBzb21lIG1vcmUgYmxvY2tzCiAgICAgICAgICAgIFdpdGhkcmF3YWxQcmVtYXR1cmUobXNnLnNlbmRlciwgci5zaW5jZUJsb2NrICsgYmxvY2tXYWl0IC0gYmxvY2subnVtYmVyKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IGFtb3VudCA9IHdpdGhkcmF3YWxSZXF1ZXN0c1ttc2cuc2VuZGVyXS5hbW91bnQ7CiAgICAgICAgdWludDI1NiByZXdhcmQgPSBjYWxjdWxhdGVSZXdhcmQoci5hbW91bnQpOwogICAgICAgIHdpdGhkcmF3YWxSZXF1ZXN0c1ttc2cuc2VuZGVyXS5zaW5jZUJsb2NrID0gMDsgIC8vIFRoaXMgd2lsbCB1bmxvY2sgdGhlIGhvbGRlcnMgdG9rZW5zCiAgICAgICAgd2l0aGRyYXdhbFJlcXVlc3RzW21zZy5zZW5kZXJdLmFtb3VudCA9IDA7ICAgICAgLy8gY2xlYXIgdGhlIGFtb3VudCB0aGF0IHdhcyByZXF1ZXN0ZWQKCiAgICAgICAgaWYgKHJld2FyZCA+IDApIHsKICAgICAgICAgICAgaWYgKGZlZVBvdCAtIHJld2FyZCA+IGZlZVBvdCkgewogICAgICAgICAgICAgICAgZmVlUG90ID0gMDsgLy8gb3ZlcmZsb3cKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZlZVBvdCAtPSByZXdhcmQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZG9XaXRoZHJhd2FsKHJld2FyZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVybiB0aGUgdG9rZW5zIGFuZCBzZW5kIGJhY2sgdGhlIGV0aGVyCiAgICAgICAgV2l0aGRyYXdhbERvbmUobXNnLnNlbmRlciwgYW1vdW50LCByZXdhcmQpOwogICAgICAgIHJldHVybiB0cnVlOwoKICAgIH0KCiAgICAvKioKICAgICAqIFJld2FyZCBpcyBiYXNlZCBvbiB0aGUgYW1vdW50IGhlbGQsIHJlbGF0aXZlIHRvIHRvdGFsIHN1cHBseSBvZiB0b2tlbnMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVJld2FyZCh1aW50MjU2IHYpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHJld2FyZCA9IDA7CiAgICAgICAgaWYgKGZlZVBvdCA+IDApIHsKICAgICAgICAgICAgcmV3YXJkID0gZmVlUG90ICogdiAvIHRvdGFsU3VwcGx5OwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmV3YXJkOwogICAgfQoKICAgIC8qKiBjYWxjdWxhdGUgdGhlIGZlZSBmb3IgcXVpY2sgd2l0aGRyYXdhbAogICAgICovCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVGZWUodWludDI1NiB2KSBjb25zdGFudCByZXR1cm5zICAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgZmVlUmVxdWlyZWQgPSB2IC8gMTAwOyAvLyAxJQogICAgICAgIHJldHVybiBmZWVSZXF1aXJlZDsKICAgIH0KCiAgICAvKioKICAgICAqIFF1aWNrIHdpdGhkcmF3YWwsIG5lZWRzIHRvIHNlbmQgZXRoZXIgdG8gdGhpcyBmdW5jdGlvbiBmb3IgdGhlIGZlZS4KICAgICAqCiAgICAgKiBHYXMgdXNlOiA/IChpbmNsdWRpbmcgY2FsbCB0byBwcm9jZXNzV2l0aGRyYXdhbCkKICAgICovCiAgICBmdW5jdGlvbiBxdWlja1dpdGhkcmF3KCkgcGF5YWJsZSBub3RQZW5kaW5nV2l0aGRyYXdhbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgdWludDI1NiBhbW91bnQgPSBiYWxhbmNlT2ZbbXNnLnNlbmRlcl07CiAgICAgICAgaWYgKGFtb3VudCA8PSAwKSB0aHJvdzsKICAgICAgICAvLyBjYWxjdWxhdGUgcmVxdWlyZWQgZmVlCiAgICAgICAgdWludDI1NiBmZWVSZXF1aXJlZCA9IGNhbGN1bGF0ZUZlZShhbW91bnQpOwogICAgICAgIGlmIChtc2cudmFsdWUgIT0gZmVlUmVxdWlyZWQpIHsKICAgICAgICAgICAgSW5jb3JyZWN0RmVlKG1zZy5zZW5kZXIsIGZlZVJlcXVpcmVkKTsgICAvLyBub3RpZnkgdGhlIGV4YWN0IGZlZSB0aGF0IG5lZWRzIHRvIGJlIHNlbnQKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIGZlZVBvdCArPSBtc2cudmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBmZWUgdG8gdGhlIGZlZVBvdAogICAgICAgIGRvV2l0aGRyYXdhbCgwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGhkcmF3LCAwIHJld2FyZAogICAgICAgIFdpdGhkcmF3YWxEb25lKG1zZy5zZW5kZXIsIGFtb3VudCwgMCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBkbyB3aXRoZHJhd2FsCiAgICAgKi8KICAgIGZ1bmN0aW9uIGRvV2l0aGRyYXdhbCh1aW50MjU2IGV4dHJhKSBpbnRlcm5hbCB7CiAgICAgICAgdWludDI1NiBhbW91bnQgPSBiYWxhbmNlT2ZbbXNnLnNlbmRlcl07CiAgICAgICAgaWYgKGFtb3VudCA8PSAwKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgLy8gY2Fubm90IHdpdGhkcmF3CiAgICAgICAgaWYgKGFtb3VudCArIGV4dHJhID4gdGhpcy5iYWxhbmNlKSB7CiAgICAgICAgICAgIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29udHJhY3QgZG9lc24ndCBoYXZlIGVub3VnaCBiYWxhbmNlCiAgICAgICAgfQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgaWYgKHRvdGFsU3VwcGx5ID4gdG90YWxTdXBwbHkgLSBhbW91bnQpIHsKICAgICAgICAgICAgdG90YWxTdXBwbHkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBsZXQgaXQgb3ZlcmZsb3cKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0b3RhbFN1cHBseSAtPSBhbW91bnQ7ICAgICAgICAgICAgICAgICAgIC8vIGRlZmxhdGUgdGhlIHN1cHBseSEKICAgICAgICB9CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgMCwgYW1vdW50KTsgICAgICAgICAgICAgLy8gYnVybiBiYWJ5IGJ1cm4KICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChhbW91bnQgKyBleHRyYSkpIHRocm93OyAvLyByZXR1cm4gYmFjayB0aGUgZXRoZXIgb3Igcm9sbGJhY2sgaWYgZmFpbGVkCiAgICB9CgoKICAgIC8qKgogICAgICogRmFsbGJhY2sgZnVuY3Rpb24gd2hlbiBzZW5kaW5nIGV0aGVyIHRvIHRoZSBjb250cmFjdAogICAgICogR2FzIHVzZTogNjUwNTEKICAgICovCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIG5vdFBlbmRpbmdXaXRoZHJhd2FsIHsKICAgICAgICB1aW50MjU2IGFtb3VudCA9IG1zZy52YWx1ZTsgICAgICAgICAvLyBhbW91bnQgdGhhdCB3YXMgc2VudAogICAgICAgIGlmIChhbW91bnQgPD0gMCkgdGhyb3c7ICAgICAgICAgICAgIC8vIG5lZWQgdG8gc2VuZCBzb21lIEVUSAogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSArPSBhbW91bnQ7ICAgIC8vIG1pbnQgbmV3IHRva2VucwogICAgICAgIHRvdGFsU3VwcGx5ICs9IGFtb3VudDsgICAgICAgICAgICAgIC8vIHRyYWNrIHRoZSBzdXBwbHkKICAgICAgICBUcmFuc2ZlcigwLCBtc2cuc2VuZGVyLCBhbW91bnQpOyAgICAvLyBub3RpZnkgb2YgdGhlIGV2ZW50CiAgICAgICAgRGVwb3NpdGVkKG1zZy5zZW5kZXIsIGFtb3VudCk7CiAgICB9Cn0='.
	

]
