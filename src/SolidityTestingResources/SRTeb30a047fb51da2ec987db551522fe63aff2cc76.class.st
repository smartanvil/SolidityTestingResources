Class {
	#name : #SRTeb30a047fb51da2ec987db551522fe63aff2cc76,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTeb30a047fb51da2ec987db551522fe63aff2cc76 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBwZW5kaW5nV2l0aGRyYXdhbHM7CiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCgoKZnVuY3Rpb24gd2l0aGRyYXcoKSB7CiAgICAgICAgdWludCBhbW91bnQgPSBwZW5kaW5nV2l0aGRyYXdhbHNbbXNnLnNlbmRlcl07CiAgICAgICAgcGVuZGluZ1dpdGhkcmF3YWxzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudCk7CiAgICB9Cgp9Ci8qKgogKiBAdGl0bGUgQ2xhaW1hYmxlCiAqIEBkZXYgRXh0ZW5zaW9uIGZvciB0aGUgT3duYWJsZSBjb250cmFjdCwgd2hlcmUgdGhlIG93bmVyc2hpcCBuZWVkcyB0byBiZSBjbGFpbWVkLgogKiBUaGlzIGFsbG93cyB0aGUgbmV3IG93bmVyIHRvIGFjY2VwdCB0aGUgdHJhbnNmZXIuCiAqLwoKY29udHJhY3QgQWlyRHJvcCBpcyBPd25hYmxlIHsKCiAgVG9rZW4gdG9rZW47CgogIGV2ZW50IFRyYW5zZmVycmVkVG9rZW4oYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBGYWlsZWRUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICBtb2RpZmllciB3aGVuRHJvcElzQWN0aXZlKCkgewogICAgYXNzZXJ0KGlzQWN0aXZlKCkpOwoKICAgIF87CiAgfQphZGRyZXNzIHB1YmxpYyBjcmVhdG9yOwogIGZ1bmN0aW9uIEFpckRyb3AgKCkgewogICAgICBhZGRyZXNzIF90b2tlbkFkZHIgPSBjcmVhdG9yOyAvL2hlcmUgcGFzcyBhZGRyZXNzIG9mIHlvdXIgdG9rZW4KICAgICAgdG9rZW4gPSBUb2tlbihfdG9rZW5BZGRyKTsKICB9CgogIGZ1bmN0aW9uIGlzQWN0aXZlKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuICgKICAgICAgICB0b2tlbnNBdmFpbGFibGUoKSA+IDAgLy8gVG9rZW5zIG11c3QgYmUgYXZhaWxhYmxlIHRvIHNlbmQKICAgICk7CiAgfQogIC8vYmVsb3cgZnVuY3Rpb24gY2FuIGJlIHVzZWQgd2hlbiB5b3Ugd2FudCB0byBzZW5kIGV2ZXJ5IHJlY2lwZWludCB3aXRoIGRpZmZlcmVudCBudW1iZXIgb2YgdG9rZW5zCiAgZnVuY3Rpb24gc2VuZFRva2VucyhhZGRyZXNzW10gZGVzdHMsIHVpbnQyNTZbXSB2YWx1ZXMpIHdoZW5Ecm9wSXNBY3RpdmUgb25seU93bmVyIGV4dGVybmFsIHsKICAgIHVpbnQyNTYgaSA9IDA7CiAgICB3aGlsZSAoaSA8IGRlc3RzLmxlbmd0aCkgewogICAgICAgIHVpbnQyNTYgdG9TZW5kID0gdmFsdWVzW2ldIDsKICAgICAgICBzZW5kSW50ZXJuYWxseShkZXN0c1tpXSAsIHRvU2VuZCwgdmFsdWVzW2ldKTsKICAgICAgICBpKys7CiAgICB9CiAgfQoKICAvLyB0aGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHdoZW4geW91IHdhbnQgdG8gc2VuZCBzYW1lIG51bWJlciBvZiB0b2tlbnMgdG8gYWxsIHRoZSByZWNpcGllbnRzCiAgZnVuY3Rpb24gc2VuZFRva2Vuc1NpbmdsZVZhbHVlKGFkZHJlc3NbXSBkZXN0cywgdWludDI1NiB2YWx1ZSkgd2hlbkRyb3BJc0FjdGl2ZSBvbmx5T3duZXIgZXh0ZXJuYWwgewogICAgdWludDI1NiBpID0gMDsKICAgIHVpbnQyNTYgdG9TZW5kID0gdmFsdWU7CiAgICB3aGlsZSAoaSA8IGRlc3RzLmxlbmd0aCkgewogICAgICAgIHNlbmRJbnRlcm5hbGx5KGRlc3RzW2ldICwgdG9TZW5kLCB2YWx1ZSk7CiAgICAgICAgaSsrOwogICAgfQogIH0gIAoKICBmdW5jdGlvbiBzZW5kSW50ZXJuYWxseShhZGRyZXNzIHJlY2lwaWVudCwgdWludDI1NiB0b2tlbnNUb1NlbmQsIHVpbnQyNTYgdmFsdWVUb1ByZXNlbnQpIGludGVybmFsIHsKICAgIGlmKHJlY2lwaWVudCA9PSBhZGRyZXNzKDApKSByZXR1cm47CgogICAgaWYodG9rZW5zQXZhaWxhYmxlKCkgPj0gdG9rZW5zVG9TZW5kKSB7CiAgICAgIHRva2VuLnRyYW5zZmVyKHJlY2lwaWVudCwgdG9rZW5zVG9TZW5kKTsKICAgICAgVHJhbnNmZXJyZWRUb2tlbihyZWNpcGllbnQsIHZhbHVlVG9QcmVzZW50KTsKICAgIH0gZWxzZSB7CiAgICAgIEZhaWxlZFRyYW5zZmVyKHJlY2lwaWVudCwgdmFsdWVUb1ByZXNlbnQpOyAKICAgIH0KICB9ICAgCgoKICBmdW5jdGlvbiB0b2tlbnNBdmFpbGFibGUoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogIH0KCiAgZnVuY3Rpb24gZGVzdHJveSgpIG9ubHlPd25lciB7CiAgICB1aW50MjU2IGJhbGFuY2UgPSB0b2tlbnNBdmFpbGFibGUoKTsKICAgIHJlcXVpcmUgKGJhbGFuY2UgPiAwKTsKICAgIHRva2VuLnRyYW5zZmVyKG93bmVyLCBiYWxhbmNlKTsKICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgfQp9CmNvbnRyYWN0IENsYWltYWJsZSBpcyBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIHBlbmRpbmdPd25lcjsKCiAgICAvKioKICAgICAqIEBkZXYgTW9kaWZpZXIgdGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBwZW5kaW5nT3duZXIuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlQZW5kaW5nT3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHBlbmRpbmdPd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHNldCB0aGUgcGVuZGluZ093bmVyIGFkZHJlc3MuCiAgICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBwZW5kaW5nT3duZXIgPSBuZXdPd25lcjsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBwZW5kaW5nT3duZXIgYWRkcmVzcyB0byBmaW5hbGl6ZSB0aGUgdHJhbnNmZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNsYWltT3duZXJzaGlwKCkgb25seVBlbmRpbmdPd25lciBwdWJsaWMgewogICAgICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBwZW5kaW5nT3duZXIpOwogICAgICAgIG93bmVyID0gcGVuZGluZ093bmVyOwogICAgICAgIHBlbmRpbmdPd25lciA9IGFkZHJlc3MoMCk7CiAgICB9CgoKfQoKCmNvbnRyYWN0IEV0aGVyVG9GQVJNIGlzIE93bmFibGUgewogdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCgp1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsvLyB0b3RhbCBubyBvZiB0b2tlbnMgaW4gc3VwcGx5CnVpbnQgcmVtYWluaW5nOwp1aW50IHByaWNlOwoKbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBpbnZlc3RvcnM7IC8vaXQgbWFwcyBubyBvZiBGYXJtQ29pbiBnaXZlbiB0byBlYWNoIGFkZHJlc3MKCiBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CgpmdW5jdGlvbiAoKSAgcGF5YWJsZSB7Ly8gY2FsbGVkIHdoZW4gZXRoZXIgaXMgc2VuZAoKICAgIHVpbnQyNTYgcmVtYWluaW5nOwogICAgdWludDI1NiB0b3RhbFN1cHBseTsKICAgIHVpbnQgcHJpY2U7CiAgICBhc3NlcnQocmVtYWluaW5nIDwgdG90YWxTdXBwbHkpOwogICAgdWludCBGYXJtQ29pbiA9IGRpdihtc2cudmFsdWUscHJpY2UpOyAvLyBjYWxjdWxhdGUgbm8gb2YgRmFybUNvaW4gdG8gYmUgaXNzdWVkIGRlcGVuZGluZyBvbiB0aGUgcHJpY2UgYW5kIGV0aGVyIHNlbmQKICAgIGFzc2VydChGYXJtQ29pbiA8IHN1Yih0b3RhbFN1cHBseSxyZW1haW5pbmcpKTsgLy9GYXJtQ29pbiBhdmFpbGFibGUgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiB0aGUgb25lIHRvIGJlIGlzc3VlZAogICAgYWRkKGludmVzdG9yc1ttc2cuc2VuZGVyXSxGYXJtQ29pbik7CiAgICByZW1haW5pbmcgPSBhZGQocmVtYWluaW5nLCBGYXJtQ29pbik7CiAgICB0cmFuc2Zlcihtc2cuc2VuZGVyLCBGYXJtQ29pbik7Cn0KCmZ1bmN0aW9uIHNldFByaWNlKHVpbnQgX3ByaWNlKQp7IC8vICBwcmljZSBuZWVkIHRvIGJlIHNldCBtYXVhbGx5IGFzIGl0IGNhbm5vdCBiZSBkb25lIHZpYSBldGhlcmV1bSBuZXR3b3JrCiAgICB1aW50IHByaWNlOwogICAgcHJpY2UgPSBfcHJpY2U7Cn0KCmZ1bmN0aW9uIGdpdmVSZXdhcmQoYWRkcmVzcyBfcGF5ZXIsdWludCBfcGF5bWVudCkgcHVibGljIHBheWFibGUgcmV0dXJucyAoYm9vbCBfc3VjY2Vzcyl7CiAgICAgICAgdWludCB0b2tlbmFtb3VudCA9IF9wYXltZW50IC8gcHJpY2U7CiAgICAgICAgcmV0dXJuIHRyYW5zZmVyKF9wYXllcix0b2tlbmFtb3VudCk7CiAgICB9ICAgIAp9Cgpjb250cmFjdCBQYXlUb2tlbiBpcyBFdGhlclRvRkFSTSB7CiBmdW5jdGlvbigpIHB1YmxpYyBwYXlhYmxlewogICAgICAgICBpZihtc2cuc2VuZGVyIT1vd25lcikKICAgICAgIGdpdmVSZXdhcmQobXNnLnNlbmRlcixtc2cudmFsdWUpOwp9Cn0KCmNvbnRyYWN0IFRva2VuIGlzIEV0aGVyVG9GQVJNIHsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHt9CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CgogICAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfYWRkcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB3ZWkgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykge30KCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwogICAgCn0KCgoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBUb2tlbiB7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvL0RlZmF1bHQgYXNzdW1lcyB0b3RhbFN1cHBseSBjYW4ndCBiZSBvdmVyIG1heCAoMl4yNTYgLSAxKS4KICAgICAgICAvL0lmIHlvdXIgdG9rZW4gbGVhdmVzIG91dCB0b3RhbFN1cHBseSBhbmQgY2FuIGlzc3VlIG1vcmUgdG9rZW5zIGFzIHRpbWUgZ29lcyBvbiwgeW91IG5lZWQgdG8gY2hlY2sgaWYgaXQgZG9lc24ndCB3cmFwLgogICAgICAgIC8vUmVwbGFjZSB0aGUgaWYgd2l0aCB0aGlzIG9uZSBpbnN0ZWFkLgogICAgICAgIC8vaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgCnVpbnQgY29uc3RhbnQgTUFYX1VJTlQgPSAyKioyNTYgLSAxOwoKLy8vIEBkZXYgRVJDMjAgdHJhbnNmZXJGcm9tLCBtb2RpZmllZCBzdWNoIHRoYXQgYW4gYWxsb3dhbmNlIG9mIE1BWF9VSU5UIHJlcHJlc2VudHMgYW4gdW5saW1pdGVkIGFsbG93YW5jZS4KLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIHRvIHRyYW5zZmVyIGZyb20uCi8vLyBAcGFyYW0gX3RvIEFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCi8vLyBAcGFyYW0gX3ZhbHVlIEFtb3VudCB0byB0cmFuc2Zlci4KLy8vIEByZXR1cm4gU3VjY2VzcyBvZiB0cmFuc2Zlci4KZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkKICAgIHB1YmxpYwogICAgcmV0dXJucyAoYm9vbCkKewogICAgdWludCBhbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKICAgIHJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZQogICAgICAgICAgICAmJiBhbGxvd2FuY2UgPj0gX3ZhbHVlCiAgICAgICAgICAgICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPj0gYmFsYW5jZXNbX3RvXSk7CiAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICBpZiAoYWxsb3dhbmNlIDwgTUFYX1VJTlQpIHsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICB9CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7Cn0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5Owp9CgoKCi8vbmFtZSB0aGlzIGNvbnRyYWN0IHdoYXRldmVyIHlvdSdkIGxpa2UKY29udHJhY3QgRmFybUNvaW4gaXMgU3RhbmRhcmRUb2tlbiB7CgogICAKICAgIC8qIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovCgogICAgLyoKICAgIE5PVEU6CiAgICBUaGUgZm9sbG93aW5nIHZhcmlhYmxlcyBhcmUgT1BUSU9OQUwgdmFuaXRpZXMuIE9uZSBkb2VzIG5vdCBoYXZlIHRvIGluY2x1ZGUgdGhlbS4KICAgIFRoZXkgYWxsb3cgb25lIHRvIGN1c3RvbWlzZSB0aGUgdG9rZW4gY29udHJhY3QgJiBpbiBubyB3YXkgaW5mbHVlbmNlcyB0aGUgY29yZSBmdW5jdGlvbmFsaXR5LgogICAgU29tZSB3YWxsZXRzL2ludGVyZmFjZXMgbWlnaHQgbm90IGV2ZW4gYm90aGVyIHRvIGxvb2sgYXQgdGhpcyBpbmZvcm1hdGlvbi4KICAgICovCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAnRmFybUNvaW4nOyAgICAgICAgICAgICAgICAgICAvL2ZhbmN5IG5hbWU6IGVnIFNpbW9uIEJ1Y2tzCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAxODsgICAgICAgICAgICAgICAgLy9Ib3cgbWFueSBkZWNpbWFscyB0byBzaG93LiBpZS4gVGhlcmUgY291bGQgMTAwMCBiYXNlIHVuaXRzIHdpdGggMyBkZWNpbWFscy4gTWVhbmluZyAwLjk4MCBTQlggPSA5ODAgYmFzZSB1bml0cy4gSXQncyBsaWtlIGNvbXBhcmluZyAxIHdlaSB0byAxIGV0aGVyLgogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAnRkFSTSc7ICAgICAgICAgICAgICAgICAvL0FuIGlkZW50aWZpZXI6IGVnIFNCWAogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gJ0gxLjAnOyAgICAgICAvL2h1bWFuIDAuMSBzdGFuZGFyZC4gSnVzdCBhbiBhcmJpdHJhcnkgdmVyc2lvbmluZyBzY2hlbWUuCgovLwovLyBDSEFOR0UgVEhFU0UgVkFMVUVTIEZPUiBZT1VSIFRPS0VOCi8vCgovL21ha2Ugc3VyZSB0aGlzIGZ1bmN0aW9uIG5hbWUgbWF0Y2hlcyB0aGUgY29udHJhY3QgbmFtZSBhYm92ZS4gU28gaWYgeW91J3JlIHRva2VuIGlzIGNhbGxlZCBUdXRvcmlhbFRva2VuLCBtYWtlIHN1cmUgdGhlIC8vY29udHJhY3QgbmFtZSBhYm92ZSBpcyBhbHNvIFR1dG9yaWFsVG9rZW4gaW5zdGVhZCBvZiBFUkMyMFRva2VuCgogICAgZnVuY3Rpb24gRmFybUNvaW4oCiAgICAgICAgKSB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOyAgICAgICAgICAgICAgIC8vIEdpdmUgdGhlIGNyZWF0b3IgYWxsIGluaXRpYWwgdG9rZW5zICgxMDAwMDAgZm9yIGV4YW1wbGUpCiAgICAgICAgdG90YWxTdXBwbHkgPSA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbCBzdXBwbHkgKDEwMDAwMCBmb3IgZXhhbXBsZSkKICAgICAgICBuYW1lID0gIkZhcm1Db2luIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgbmFtZSBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIGRlY2ltYWxzID0gMTg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtb3VudCBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIHN5bWJvbCA9ICJGQVJNIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBzeW1ib2wgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgIH0KCiAgICAvKiBBcHByb3ZlcyBhbmQgdGhlbiBjYWxscyB0aGUgcmVjZWl2aW5nIGNvbnRyYWN0ICovCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgogICAgICAgIC8vY2FsbCB0aGUgcmVjZWl2ZUFwcHJvdmFsIGZ1bmN0aW9uIG9uIHRoZSBjb250cmFjdCB5b3Ugd2FudCB0byBiZSBub3RpZmllZC4gVGhpcyBjcmFmdHMgdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBtYW51YWxseSBzbyBvbmUgZG9lc24ndCBoYXZlIHRvIGluY2x1ZGUgYSBjb250cmFjdCBpbiBoZXJlIGp1c3QgZm9yIHRoaXMuCiAgICAgICAgLy9yZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuQ29udHJhY3QsIGJ5dGVzIF9leHRyYURhdGEpCiAgICAgICAgLy9pdCBpcyBhc3N1bWVkIHRoYXQgd2hlbiBkb2VzIHRoaXMgdGhhdCB0aGUgY2FsbCAqc2hvdWxkKiBzdWNjZWVkLCBvdGhlcndpc2Ugb25lIHdvdWxkIHVzZSB2YW5pbGxhIGFwcHJvdmUgaW5zdGVhZC4KICAgICAgICBpZighX3NwZW5kZXIuY2FsbChieXRlczQoYnl0ZXMzMihzaGEzKCJyZWNlaXZlQXBwcm92YWwoYWRkcmVzcyx1aW50MjU2LGFkZHJlc3MsYnl0ZXMpIikpKSwgbXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKSkgeyByZXZlcnQ7IH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKCmNvbnRyYWN0IEZhcm1Db2luU2FsZSBpcyBGYXJtQ29pbiB7CgogICAgdWludDI1NiBwdWJsaWMgbWF4TWludGFibGU7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbE1pbnRlZDsKICAgIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzID0gMTg7CiAgICB1aW50IHB1YmxpYyBlbmRCbG9jazsKICAgIHVpbnQgcHVibGljIHN0YXJ0QmxvY2s7CiAgICB1aW50MjU2IHB1YmxpYyBleGNoYW5nZVJhdGU7CiAgICB1aW50IHB1YmxpYyBzdGFydFRpbWU7CiAgICBib29sIHB1YmxpYyBpc0Z1bmRpbmc7CiAgICBhZGRyZXNzIHB1YmxpYyBFVEhXYWxsZXQ7CiAgICB1aW50MjU2IHB1YmxpYyBoZWxkVG90YWw7CgogICAgYm9vbCBwcml2YXRlIGNvbmZpZ1NldDsKICAgIGFkZHJlc3MgcHVibGljIGNyZWF0b3I7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgaGVsZFRva2VuczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGhlbGRUaW1lbGluZTsKCiAgICBldmVudCBDb250cmlidXRpb24oYWRkcmVzcyBmcm9tLCB1aW50MjU2IGFtb3VudCk7CiAgICBldmVudCBSZWxlYXNlVG9rZW5zKGFkZHJlc3MgZnJvbSwgdWludDI1NiBhbW91bnQpOwoKLy8gc3RhcnQgYW5kIGVuZCBkYXRlcyB3aGVyZSBjcm93ZHNhbGUgaXMgYWxsb3dlZCAoYm90aCBpbmNsdXNpdmUpCiAgdWludDI1NiBjb25zdGFudCBwdWJsaWMgU1RBUlQgPSAxNTE3NDYxMjAwMDAwOyAvLyArbmV3IERhdGUoMjAxOCwgMiwgMSkgLyAxMDAwCiAgdWludDI1NiBjb25zdGFudCBwdWJsaWMgRU5EID0gMTUyMjU1NTIwMDAwMDsgLy8gK25ldyBEYXRlKDIwMTgsIDQsIDEpIC8gMTAwMAoKLy8gQHJldHVybiB0aGUgcmF0ZSBpbiBGQVJNIHBlciAxIEVUSCBhY2NvcmRpbmcgdG8gdGhlIHRpbWUgb2YgdGhlIHR4IGFuZCB0aGUgRkFSTSBwcmljaW5nIHByb2dyYW0uCiAgICAvLyBAT3ZlcnJpZGUKICBmdW5jdGlvbiBnZXRSYXRlKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByYXRlKSB7CiAgICBpZiAgICAgIChub3cgPCBTVEFSVCkgICAgICAgICAgICByZXR1cm4gcmF0ZSA9IDg0MDsgLy8gcHJlc2FsZSwgNDAlIGJvbnVzCiAgICBlbHNlIGlmIChub3cgPD0gU1RBUlQgKyAgNiBkYXlzKSByZXR1cm4gcmF0ZSA9IDgxMDsgLy8gZGF5IDEgdG8gNiwgMzUlIGJvbnVzCiAgICBlbHNlIGlmIChub3cgPD0gU1RBUlQgKyAxMyBkYXlzKSByZXR1cm4gcmF0ZSA9IDc4MDsgLy8gZGF5IDcgdG8gMTMsIDMwJSBib251cwogICAgZWxzZSBpZiAobm93IDw9IFNUQVJUICsgMjAgZGF5cykgcmV0dXJuIHJhdGUgPSA3NTA7IC8vIGRheSAxNCB0byAyMCwgMjUlIGJvbnVzCiAgICBlbHNlIGlmIChub3cgPD0gU1RBUlQgKyAyOCBkYXlzKSByZXR1cm4gcmF0ZSA9IDcyMDsgLy8gZGF5IDIxIHRvIDI4LCAyMCUgYm9udXMKICAgIHJldHVybiByYXRlID0gNjAwOyAvLyBubyBib251cwogIH0KCgogICAgZnVuY3Rpb24gRmFybUNvaW5TYWxlKCkgewogICAgICAgIHN0YXJ0QmxvY2sgPSBibG9jay5udW1iZXI7CiAgICAgICAgbWF4TWludGFibGUgPSA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOyAvLyAzIG1pbGxpb24gbWF4IHNlbGxhYmxlICgxOCBkZWNpbWFscykKICAgICAgICBFVEhXYWxsZXQgPSAweDNiNDQ0ZkM4YzJDNDVEQ2E1ZTY2MTBFNDlkQzU0NDIzYzVEY2Q4NkU7CiAgICAgICAgaXNGdW5kaW5nID0gdHJ1ZTsKICAgICAgICAKICAgICAgICBjcmVhdG9yID0gbXNnLnNlbmRlcjsKICAgICAgICBjcmVhdGVIZWxkQ29pbnMoKTsKICAgICAgICBzdGFydFRpbWUgPSAxNTE3NDYxMjAwMDAwOwogICAgICAgIGV4Y2hhbmdlUmF0ZT0gNjAwOwogICAgICAgIH0KCiAKICAgIC8vIHNldHVwIGZ1bmN0aW9uIHRvIGJlIHJhbiBvbmx5IDEgdGltZQogICAgLy8gc2V0dXAgdG9rZW4gYWRkcmVzcwogICAgLy8gc2V0dXAgZW5kIEJsb2NrIG51bWJlcgogICAgZnVuY3Rpb24gc2V0dXAoYWRkcmVzcyBUT0tFTiwgdWludCBlbmRCbG9ja1RpbWUpIHsKICAgICAgICByZXF1aXJlKCFjb25maWdTZXQpOwogICAgICAgIGVuZEJsb2NrID0gZW5kQmxvY2tUaW1lOwogICAgICAgIGNvbmZpZ1NldCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gY2xvc2VTYWxlKCkgZXh0ZXJuYWwgewogICAgICByZXF1aXJlKG1zZy5zZW5kZXI9PWNyZWF0b3IpOwogICAgICBpc0Z1bmRpbmcgPSBmYWxzZTsKICAgIH0KCiAgICAvLyBDT05UUklCVVRFIEZVTkNUSU9OCiAgICAvLyBjb252ZXJ0cyBFVEggdG8gVE9LRU4gYW5kIHNlbmRzIG5ldyBUT0tFTiB0byB0aGUgc2VuZGVyCiAgICBmdW5jdGlvbiBjb250cmlidXRlKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWU+MCk7CiAgICAgICAgcmVxdWlyZShpc0Z1bmRpbmcpOwogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyIDw9IGVuZEJsb2NrKTsKICAgICAgICB1aW50MjU2IGFtb3VudCA9IG1zZy52YWx1ZSAqIGV4Y2hhbmdlUmF0ZTsKICAgICAgICB1aW50MjU2IHRvdGFsID0gdG90YWxNaW50ZWQgKyBhbW91bnQ7CiAgICAgICAgcmVxdWlyZSh0b3RhbDw9bWF4TWludGFibGUpOwogICAgICAgIHRvdGFsTWludGVkICs9IHRvdGFsOwogICAgICAgIEVUSFdhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgICAgIENvbnRyaWJ1dGlvbihtc2cuc2VuZGVyLCBhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlcG9zaXQoKSBwYXlhYmxlIHsKICAgICAgY3JlYXRlKG1zZy5zZW5kZXIpOwogICAgfQogICAgZnVuY3Rpb24gcmVnaXN0ZXIoYWRkcmVzcyBzZW5kZXIpIHBheWFibGUgewogICAgfQogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICB9CiAgCiAgICBmdW5jdGlvbiBjcmVhdGUoYWRkcmVzcyBfYmVuZWZpY2lhcnkpIHBheWFibGV7CiAgICB1aW50MjU2IGFtb3VudCA9IG1zZy52YWx1ZTsKICAgIC8vLyAKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhdygpIHsKICAgIHJlcXVpcmUgKCBtc2cuc2VuZGVyID09IG93bmVyICk7CiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7Cn0KICAgIC8vIHVwZGF0ZSB0aGUgRVRIL0NPSU4gcmF0ZQogICAgZnVuY3Rpb24gdXBkYXRlUmF0ZSh1aW50MjU2IHJhdGUpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXI9PWNyZWF0b3IpOwogICAgICAgIHJlcXVpcmUoaXNGdW5kaW5nKTsKICAgICAgICBleGNoYW5nZVJhdGUgPSByYXRlOwogICAgfQoKICAgIC8vIGNoYW5nZSBjcmVhdG9yIGFkZHJlc3MKICAgIGZ1bmN0aW9uIGNoYW5nZUNyZWF0b3IoYWRkcmVzcyBfY3JlYXRvcikgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlcj09Y3JlYXRvcik7CiAgICAgICAgY3JlYXRvciA9IF9jcmVhdG9yOwogICAgfQoKICAgIC8vIGNoYW5nZSB0cmFuc2ZlciBzdGF0dXMgZm9yIEZhcm1Db2luIHRva2VuCiAgICBmdW5jdGlvbiBjaGFuZ2VUcmFuc2ZlclN0YXRzKGJvb2wgX2FsbG93ZWQpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXI9PWNyZWF0b3IpOwogICAgIH0KCiAgICAvLyBpbnRlcm5hbCBmdW5jdGlvbiB0aGF0IGFsbG9jYXRlcyBhIHNwZWNpZmljIGFtb3VudCBvZiBBVFlYIGF0IGEgc3BlY2lmaWMgYmxvY2sgbnVtYmVyLgogICAgLy8gb25seSByYW4gMSB0aW1lIG9uIGluaXRpYWxpemF0aW9uCiAgICBmdW5jdGlvbiBjcmVhdGVIZWxkQ29pbnMoKSBpbnRlcm5hbCB7CiAgICAgICAgLy8gVE9UQUwgU1VQUExZID0gNSwwMDAsMDAwCiAgICAgICAgY3JlYXRlSG9sZFRva2VuKG1zZy5zZW5kZXIsIDEwMDApOwogICAgICAgIGNyZWF0ZUhvbGRUb2tlbigweGQ5NzEwRDgyOWZhN2MzNkUwMjUwMTFiODAxNjY0MDA5RTRlN2M2OUQsIDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCk7CiAgICAgICAgY3JlYXRlSG9sZFRva2VuKDB4ZDk3MTBEODI5ZmE3YzM2RTAyNTAxMWI4MDE2NjQwMDlFNGU3YzY5RCwgMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKTsKICAgIH0KCiAgICAvLyBmdW5jdGlvbiB0byBjcmVhdGUgaGVsZCB0b2tlbnMgZm9yIGRldmVsb3BlcgogICAgZnVuY3Rpb24gY3JlYXRlSG9sZFRva2VuKGFkZHJlc3MgX3RvLCB1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgewogICAgICAgIGhlbGRUb2tlbnNbX3RvXSA9IGFtb3VudDsKICAgICAgICBoZWxkVGltZWxpbmVbX3RvXSA9IGJsb2NrLm51bWJlciArIDA7CiAgICAgICAgaGVsZFRvdGFsICs9IGFtb3VudDsKICAgICAgICB0b3RhbE1pbnRlZCArPSBoZWxkVG90YWw7CiAgICB9CgogICAgLy8gZnVuY3Rpb24gdG8gcmVsZWFzZSBoZWxkIHRva2VucyBmb3IgZGV2ZWxvcGVycwogICAgZnVuY3Rpb24gcmVsZWFzZUhlbGRDb2lucygpIGV4dGVybmFsIHsKICAgICAgICB1aW50MjU2IGhlbGQgPSBoZWxkVG9rZW5zW21zZy5zZW5kZXJdOwogICAgICAgIHVpbnQgaGVsZEJsb2NrID0gaGVsZFRpbWVsaW5lW21zZy5zZW5kZXJdOwogICAgICAgIHJlcXVpcmUoIWlzRnVuZGluZyk7CiAgICAgICAgcmVxdWlyZShoZWxkID49IDApOwogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID49IGhlbGRCbG9jayk7CiAgICAgICAgaGVsZFRva2Vuc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgaGVsZFRpbWVsaW5lW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBSZWxlYXNlVG9rZW5zKG1zZy5zZW5kZXIsIGhlbGQpOwogICAgfQoKfQ=='.
	

]
