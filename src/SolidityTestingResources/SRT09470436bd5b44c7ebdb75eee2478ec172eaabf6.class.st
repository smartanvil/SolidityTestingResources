Class {
	#name : #SRT09470436bd5b44c7ebdb75eee2478ec172eaabf6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT09470436bd5b44c7ebdb75eee2478ec172eaabf6 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgovLyBFUkMyMCBjb250cmFjdCB3aGljaCBoYXMgdGhlIGRpdmlkZW5kIHNoYXJlcyBvZiBFdGhvcG9saXMgaW4gaXQgCi8vIFRoZSBvbGQgY29udHJhY3QgaGFkIGEgYnVnIGluIGl0LCB0aGFua3MgdG8gY2Nhc2h3ZWxsIGZvciBub3RpZnlpbmcuCi8vIENvbnRhY3Q6IDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iZGViYmFhYjZiYmFjYjlhYmE3OWViM2JmYjdiMmYwYmRiMWIzIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPiAKLy8gZXRob3BvbGlzLmlvIAovLyBldGhlcmd1eS5zdXJnZS5zaCBbaWYgdGhlIC5pbyBzaXRlIGlzIHVwIHRoaXMgbWlnaHQgYmUgb3V0ZGF0ZWQsIG9uZSBvZiB0aG9zZSBzaXRlcyB3aWxsIGJlIHVwLXRvLWRhdGVdCi8vIFNlbGxpbmcgdG9rZW5zIChhbmQgYnV5aW5nIHRoZW0pIHdpbGwgYmUgb25saW5lIGF0IGV0aGVyZ3V5LnN1cmdlLnNoL2RpdmlkZW5kcy5odG1sIGFuZCBtaWdodCBiZSBtb3ZlZCB0byB0aGUgZXRob3BvbGlzIHNpdGUuCgpjb250cmFjdCBEaXZpZGVuZHMgewoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJFdGhvcG9saXMgU2hhcmVzIjsgICAgICAvLyAgdG9rZW4gbmFtZQogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiRVBTIjsgICAgICAgICAgIC8vICB0b2tlbiBzeW1ib2wKICAgIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzID0gMTg7ICAgICAgICAgICAgLy8gIHRva2VuIGRpZ2l0CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5ID0gMTAwMDAwMDAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CiAgICAKICAgIHVpbnQyNTYgU2VsbEZlZSA9IDEyNTA7IC8vIG1heCBpcyAxMCAwMDAKCgogICAgYWRkcmVzcyBvd25lciA9IDB4MDsKCiAgICBtb2RpZmllciBpc093bmVyIHsKICAgICAgICBhc3NlcnQob3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KCgoKICAgIG1vZGlmaWVyIHZhbGlkQWRkcmVzcyB7CiAgICAgICAgYXNzZXJ0KDB4MCAhPSBtc2cuc2VuZGVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIERpdmlkZW5kcygpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwoKCiAgICAgICAgLy8gUFJFTUlORUQgVE9LRU5TIAogICAgICAgIAogICAgICAgIC8vIEVHCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gIDgwMDAwMDAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7Ly8gd2FzOiBUb2tlblN1cHBseSAtIDQwMDAwMDsKICAgICAgICAvLyBIRQogICAgICAgIGJhbGFuY2VPZlthZGRyZXNzKDB4ODNjMEVmYzZkOEIxNkQ4N0JGZTEzMzVBQjZCY0FiM0VkMzk2MDI4NSldID0gMjAwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgIC8vIFBHCiAgICAgICAgYmFsYW5jZU9mW2FkZHJlc3MoMHgyNjU4MWQxOTgzY2VkODk1NUMxNzBlQjRkMzIyMkRDZDM4NDVhMDkyKV0gPSAyMDAwMDAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CgogICAgICAgIC8vIEJPVUdIVCB0b2tlbnMgaW4gdGhlIE9MRCBjb250cmFjdCAgICAgICAgIAogICAgICAgIGJhbGFuY2VPZlthZGRyZXNzKDB4MzEzMDI1OWRlRWRiMzA1MkUyNEZBRDlkNUUxZjQ5MENCOENDY2FhMCldID0gMTAwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgIGJhbGFuY2VPZlthZGRyZXNzKDB4NGYwZDg2MTI4MTE2MWYzOWM2MkI3OTA5OTVmYjFlN2EwQjgxQjA3YildID0gMjAwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgIGJhbGFuY2VPZlthZGRyZXNzKDB4MzZFMDU4MzMyYUUzOWVmYUQyMzE1Nzc2QjljODQ0RTMwZDA3Mzg4QildID0gIDIwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgIGJhbGFuY2VPZlthZGRyZXNzKDB4MWYyNjcyRTE3ZkQ3RWM0YjUyQjdGNDBENDFlQzVDNDc3ZmU4NWMwYyldID0gIDQwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgIGJhbGFuY2VPZlthZGRyZXNzKDB4ZWREYUQ1NEU5ZTFGOGRkMDFlODE1ZDg0YjI1NTk5OGEwYTkwMUJiRildID0gIDIwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgIGJhbGFuY2VPZlthZGRyZXNzKDB4MGEzMjM5Nzk5NTE4RTdGN0YzMzk4NjdBNDczOTI4MjAxNGI5N0RjZildID0gNTAwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgIGJhbGFuY2VPZlthZGRyZXNzKDB4MjlBOWM3NmFEMDkxYzAxNUMxMjA4MUExQjIwMWMzZWE1Njg4NDU3OSldID0gNjAwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgIGJhbGFuY2VPZlthZGRyZXNzKDB4MDY2OGRlQTZCNWVjOTREN0NlM0M0M0ZlNDc3ODg4ZWVlMkZDMWIyQyldID0gMTAwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgIGJhbGFuY2VPZlthZGRyZXNzKDB4MDk4MmEwYmYwNjFmM2NlYzJhMDA0YjRkMmM4MDJGNDc5MDk5Qzk3MSldID0gIDIwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwoKICAgICAgICAvLyBFdGhlcnNjYW4gbGlrZXMgaXQgdmVyeSBtdWNoIGlmIHdlIGVtaXQgdGhlc2UgZXZlbnRzIAogICAgICAgIGVtaXQgVHJhbnNmZXIoMHgwLCBtc2cuc2VuZGVyLCA4MDAwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpKTsKICAgICAgICBlbWl0IFRyYW5zZmVyKDB4MCwgMHg4M2MwRWZjNmQ4QjE2RDg3QkZlMTMzNUFCNkJjQWIzRWQzOTYwMjg1LCAyMDAwMDAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSkpOwogICAgICAgIGVtaXQgVHJhbnNmZXIoMHgwLCAweDI2NTgxZDE5ODNjZWQ4OTU1QzE3MGVCNGQzMjIyRENkMzg0NWEwOTIsIDIwMDAwMCogKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKSk7CiAgICAgICAgZW1pdCBUcmFuc2ZlcigweDAsIDB4MzEzMDI1OWRlRWRiMzA1MkUyNEZBRDlkNUUxZjQ5MENCOENDY2FhMCwgMTAwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpKTsKICAgICAgICBlbWl0IFRyYW5zZmVyKDB4MCwgMHg0ZjBkODYxMjgxMTYxZjM5YzYyQjc5MDk5NWZiMWU3YTBCODFCMDdiLCAyMDAwMDAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSkpOwogICAgICAgIGVtaXQgVHJhbnNmZXIoMHgwLCAweDM2RTA1ODMzMmFFMzllZmFEMjMxNTc3NkI5Yzg0NEUzMGQwNzM4OEIsIDIwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpKTsKICAgICAgICBlbWl0IFRyYW5zZmVyKDB4MCwgMHgxZjI2NzJFMTdmRDdFYzRiNTJCN0Y0MEQ0MWVDNUM0NzdmZTg1YzBjLCA0MDAwMCogKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKSk7CiAgICAgICAgZW1pdCBUcmFuc2ZlcigweDAsIDB4ZWREYUQ1NEU5ZTFGOGRkMDFlODE1ZDg0YjI1NTk5OGEwYTkwMUJiRiwgMjAwMDAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSkpOwogICAgICAgIGVtaXQgVHJhbnNmZXIoMHgwLCAweDBhMzIzOTc5OTUxOEU3RjdGMzM5ODY3QTQ3MzkyODIwMTRiOTdEY2YsIDUwMDAwMCogKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKSk7CiAgICAgICAgZW1pdCBUcmFuc2ZlcigweDAsIDB4MjlBOWM3NmFEMDkxYzAxNUMxMjA4MUExQjIwMWMzZWE1Njg4NDU3OSwgNjAwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpKTsKICAgICAgICBlbWl0IFRyYW5zZmVyKDB4MCwgMHgwNjY4ZGVBNkI1ZWM5NEQ3Q2UzQzQzRmU0Nzc4ODhlZWUyRkMxYjJDLCAxMDAwMDAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSkpOwogICAgICAgIGVtaXQgVHJhbnNmZXIoMHgwLCAweDA5ODJhMGJmMDYxZjNjZWMyYTAwNGI0ZDJjODAyRjQ3OTA5OUM5NzEsIDIwMDAwKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpKTsKICAgICAgIAogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgIHB1YmxpYyB2YWxpZEFkZHJlc3MgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlID49IGJhbGFuY2VPZltfdG9dKTsKICAgICAgICAvLyBhZnRlciB0cmFuc2ZlciBoYXZlIGVub3VnaCB0byBwYXkgc2VsbCBvcmRlciAKICAgICAgICByZXF1aXJlKHN1YihiYWxhbmNlT2ZbbXNnLnNlbmRlcl0sIFNlbGxPcmRlcnNbbXNnLnNlbmRlcl1bMF0pID49IF92YWx1ZSk7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IF90byk7CgogICAgICAgIHVpbnQyNTYgX3RvQmFsID0gYmFsYW5jZU9mW190b107CiAgICAgICAgdWludDI1NiBfZnJvbUJhbCA9IGJhbGFuY2VPZlttc2cuc2VuZGVyXTsKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsKICAgICAgICBlbWl0IFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAKICAgICAgICB1aW50MjU2IF9zZW5kRnJvbSA9IF93aXRoZHJhdyhtc2cuc2VuZGVyLCBfZnJvbUJhbCwgZmFsc2UpOwogICAgICAgIHVpbnQyNTYgX3NlbmRUbyA9IF93aXRoZHJhdyhfdG8sIF90b0JhbCwgZmFsc2UpOwogICAgICAgIAogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoX3NlbmRGcm9tKTsKICAgICAgICBfdG8udHJhbnNmZXIoX3NlbmRUbyk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIGZvcmNldHJhbnNmZXIgZG9lcyBub3QgZG8gYW55IHdpdGhkcmF3YWxzCiAgICBmdW5jdGlvbiBfZm9yY2VUcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiAgX3ZhbHVlKSBpbnRlcm5hbCB2YWxpZEFkZHJlc3MgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW19mcm9tXSA+PSBfdmFsdWUpOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPj0gYmFsYW5jZU9mW190b10pOwogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsKICAgICAgICBlbWl0IFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHZhbGlkQWRkcmVzcyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIC8vIGFmdGVyIHRyYW5zZmVyIGhhdmUgZW5vdWdoIHRvIHBheSBzZWxsIG9yZGVyIAogICAgICAgIHJlcXVpcmUoX2Zyb20gIT0gX3RvKTsKICAgICAgICByZXF1aXJlKHN1YihiYWxhbmNlT2ZbX2Zyb21dLCBTZWxsT3JkZXJzW19mcm9tXVswXSkgPj0gX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlID49IGJhbGFuY2VPZltfdG9dKTsKICAgICAgICByZXF1aXJlKGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKICAgICAgICB1aW50MjU2IF90b0JhbCA9IGJhbGFuY2VPZltfdG9dOwogICAgICAgIHVpbnQyNTYgX2Zyb21CYWwgPSBiYWxhbmNlT2ZbX2Zyb21dOwogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBlbWl0IFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgCiAgICAgICAgLy8gQ2FsbCB3aXRoZHJhd2FsIG9mIG9sZCBhbW91bnRzIAogICAgICAgIENhbmNlbE9yZGVyKCk7CiAgICAgICAgdWludDI1NiBfc2VuZEZyb20gPSBfd2l0aGRyYXcoX2Zyb20sIF9mcm9tQmFsLGZhbHNlKTsKICAgICAgICB1aW50MjU2IF9zZW5kVG8gPSBfd2l0aGRyYXcoX3RvLCBfdG9CYWwsZmFsc2UpOwogICAgICAgIAogICAgICAgIF9mcm9tLnRyYW5zZmVyKF9zZW5kRnJvbSk7CiAgICAgICAgX3RvLnRyYW5zZmVyKF9zZW5kVG8pOwogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB2YWxpZEFkZHJlc3MgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPT0gMCB8fCBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApOwogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgZW1pdCBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRTeW1ib2woc3RyaW5nIF9zeW1iKSBwdWJsaWMgaXNPd25lciB7CiAgICAgICAgc3ltYm9sID0gX3N5bWI7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TmFtZShzdHJpbmcgX25hbWUpIHB1YmxpYyBpc093bmVyIHsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIG5ld093bmVyKGFkZHJlc3Mgd2hvKSBwdWJsaWMgaXNPd25lciB2YWxpZEFkZHJlc3MgewogICAgICAgIG93bmVyID0gd2hvOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRGZWUodWludDI1NiBmZWUpIHB1YmxpYyBpc093bmVyIHsKICAgICAgICByZXF1aXJlIChmZWUgPD0gMjUwMCk7CiAgICAgICAgU2VsbEZlZSA9IGZlZTsKICAgIH0KCgovLyBNYXJrZXQgc3R1ZmYgc3RhcnQgCiAgICAKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2WzJdKSBwdWJsaWMgU2VsbE9yZGVyczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgTGFzdEJhbGFuY2VXaXRoZHJhd247CiAgICB1aW50MjU2IFRvdGFsT3V0OwogICAgCiAgICBmdW5jdGlvbiBXaXRoZHJhdygpIHB1YmxpY3sKICAgICAgICBfd2l0aGRyYXcobXNnLnNlbmRlciwgYmFsYW5jZU9mW21zZy5zZW5kZXJdLCB0cnVlKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gVmlld1NlbGxPcmRlcihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiwgdWludDI1Nil7CiAgICAgICAgcmV0dXJuIChTZWxsT3JkZXJzW3dob11bMF0sIFNlbGxPcmRlcnNbd2hvXVsxXSk7CiAgICB9CiAgICAKICAgIC8vIGlmIGRvc2VuZCBpcyBzZXQgdG8gZmFsc2UgdGhlbiB0aGUgY2FsbGluZyBmdW5jdGlvbiBNVVNUIHNlbmQgdGhlIGZlZXMgCiAgICBmdW5jdGlvbiBfd2l0aGRyYXcoYWRkcmVzcyB0bywgdWludDI1NiB0a25zLCBib29sIGRvc2VuZCkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgLy8gY2FsY3VsYXRlIGhvdyBtdWNoIHdlaSB5b3UgZ2V0IAogICAgICAgIGlmICh0a25zID09IDApewogICAgICAgICAgICAvLyBvayB3ZSBqdXN0IHJlc2V0IHRoZSB0aW1lciB0aGVuIAogICAgICAgICAgICBMYXN0QmFsYW5jZVdpdGhkcmF3blttc2cuc2VuZGVyXSA9IHN1YihhZGQoYWRkcmVzcyh0aGlzKS5iYWxhbmNlLCBUb3RhbE91dCksbXNnLnZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvLyByZW1vdmUgbXNnLnZhbHVlIGlzIGV4aXN0cy4gaWYgaXQgaXMgbm9uemVybyB0aGVuIHRoZSBjYWxsIGNhbWUgZnJvbSBCdXksIGRvIG5vdCBpbmNsdWRlIHRoaXMgaW4gYmFsYW5jZS4gCiAgICAgICAgdWludDI1NiB0b3RhbF92b2x1bWVfaW4gPSBhZGRyZXNzKHRoaXMpLmJhbGFuY2UgKyBUb3RhbE91dCAtIG1zZy52YWx1ZTsKICAgICAgICAvLyBnZXQgdm9sdW1lIGluIHNpbmNlIGxhc3Qgd2l0aGRyYXdhbDsgCiAgICAgICAgdWludDI1NiBEZWx0YSA9IHN1Yih0b3RhbF92b2x1bWVfaW4sIExhc3RCYWxhbmNlV2l0aGRyYXduW3RvXSk7CiAgICAgICAgCiAgICAgICAgdWludDI1NiBHZXQgPSAodGtucyAqIERlbHRhKSAvIHRvdGFsU3VwcGx5OwogICAgICAgIAogICAgICAgIFRvdGFsT3V0ID0gVG90YWxPdXQgKyBHZXQ7CiAgICAgICAgCiAgICAgICAgTGFzdEJhbGFuY2VXaXRoZHJhd25bdG9dID0gc3ViKHN1YihhZGQoYWRkcmVzcyh0aGlzKS5iYWxhbmNlLCBUb3RhbE91dCksIEdldCksbXNnLnZhbHVlKTsKICAgICAgICAKICAgICAgICBlbWl0IFdpdGhkcmF3YWxDb21wbGV0ZSh0bywgR2V0KTsKICAgICAgICBpZiAoZG9zZW5kKXsKICAgICAgICAgICAgdG8udHJhbnNmZXIoR2V0KTsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIGVsc2V7CiAgICAgICAgICAgIHJldHVybiBHZXQ7CiAgICAgICAgfQogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBHZXREaXZzKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICAgdWludDI1NiB0b3RhbF92b2x1bWVfaW4gPSBhZGRyZXNzKHRoaXMpLmJhbGFuY2UgKyBUb3RhbE91dDsKICAgICAgICAgdWludDI1NiBEZWx0YSA9IHN1Yih0b3RhbF92b2x1bWVfaW4sIExhc3RCYWxhbmNlV2l0aGRyYXduW3dob10pOwogICAgICAgICB1aW50MjU2IEdldCA9IChiYWxhbmNlT2Zbd2hvXSAqIERlbHRhKSAvIHRvdGFsU3VwcGx5OwogICAgICAgICByZXR1cm4gKEdldCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIENhbmNlbE9yZGVyKCkgcHVibGljIHsKICAgICAgICBfY2FuY2VsT3JkZXIobXNnLnNlbmRlcik7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIF9jYW5jZWxPcmRlcihhZGRyZXNzIHRhcmdldCkgaW50ZXJuYWx7CiAgICAgICAgIFNlbGxPcmRlcnNbdGFyZ2V0XVswXSA9IDA7CiAgICAgICAgIGVtaXQgU2VsbE9yZGVyQ2FuY2VsbGVkKHRhcmdldCk7CiAgICB9CiAgICAKICAgIAogICAgLy8gdGhlIHByaWNlIGlzIHBlciAxMF5kZWNpbWFscyB0b2tlbnMgCiAgICBmdW5jdGlvbiBQbGFjZVNlbGxPcmRlcih1aW50MjU2IGFtb3VudCwgdWludDI1NiBwcmljZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlKHByaWNlID4gMCk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPj0gYW1vdW50KTsKICAgICAgICBTZWxsT3JkZXJzW21zZy5zZW5kZXJdID0gW2Ftb3VudCwgcHJpY2VdOwogICAgICAgIGVtaXQgU2VsbE9yZGVyUGxhY2VkKG1zZy5zZW5kZXIsIGFtb3VudCwgcHJpY2UpOwogICAgfQoKICAgIC8vIFNhZmUgYnV5IG9yZGVyIHdoZXJlIHVzZXIgc3BlY2lmaWVzIHRoZSBtYXggYW1vdW50IHRvIGJ1eSBhbmQgdGhlIG1heCBwcmljZTsgcHJldmVudHMgc25pcGVycyBjaGFuZ2luZyB0aGVpciBwcmljZSAKICAgIGZ1bmN0aW9uIEJ1eShhZGRyZXNzIHRhcmdldCwgdWludDI1NiBtYXhhbW91bnQsIHVpbnQyNTYgbWF4cHJpY2UpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKFNlbGxPcmRlcnNbdGFyZ2V0XVswXSA+IDApOwogICAgICAgIHJlcXVpcmUoU2VsbE9yZGVyc1t0YXJnZXRdWzFdIDw9IG1heHByaWNlKTsKICAgICAgICB1aW50MjU2IHByaWNlID0gU2VsbE9yZGVyc1t0YXJnZXRdWzFdOwogICAgICAgIHVpbnQyNTYgYW1vdW50X2J1eWFibGUgPSAobXVsKG1zZy52YWx1ZSwgdWludDI1NigxMCoqZGVjaW1hbHMpKSkgLyBwcmljZTsgCiAgICAgICAgCiAgICAgICAgLy8gZGVjaWRlIGhvdyBtdWNoIHdlIGJ1eSAKICAgICAgICAKICAgICAgICBpZiAoYW1vdW50X2J1eWFibGUgPiBTZWxsT3JkZXJzW3RhcmdldF1bMF0pewogICAgICAgICAgICBhbW91bnRfYnV5YWJsZSA9IFNlbGxPcmRlcnNbdGFyZ2V0XVswXTsKICAgICAgICB9CiAgICAgICAgaWYgKGFtb3VudF9idXlhYmxlID4gbWF4YW1vdW50KXsKICAgICAgICAgICAgYW1vdW50X2J1eWFibGUgPSBtYXhhbW91bnQ7CiAgICAgICAgfQogICAgICAgIC8vMTAwMDAwMDAwMDAwMDAwMDAwMDAsMTAwMAogICAgICAgIC8vIjB4Y2EzNWI3ZDkxNTQ1OGVmNTQwYWRlNjA2OGRmZTJmNDRlOGZhNzMzYyIsMTAwMDAwMDAwMDAwMDAwMDAwMDAsMTAwMAogICAgICAgIHVpbnQyNTYgdG90YWxfcGF5bWVudCA9IG11bChhbW91bnRfYnV5YWJsZSwgcHJpY2UpIC8gKHVpbnQyNTYoMTAgKiogZGVjaW1hbHMpKTsKICAgICAgICAKICAgICAgICAvLyBMZXQncyBidXkgdG9rZW5zIGFuZCBhY3R1YWxseSBwYXksIG9rYXk/CiAgICAgICAgcmVxdWlyZShhbW91bnRfYnV5YWJsZSA+IDAgJiYgdG90YWxfcGF5bWVudCA+IDApOyAKICAgICAgICAKICAgICAgICAvLyBGcm9tIHRoZSBhbW91bnQgd2UgYWN0dWFsbHkgcGF5LCB3ZSB0YWtlIGV4Y2hhbmdlIGZlZSBmcm9tIGl0IAogICAgICAgIAogICAgICAgIHVpbnQyNTYgRmVlID0gbXVsKHRvdGFsX3BheW1lbnQsIFNlbGxGZWUpIC8gMTAwMDA7CiAgICAgICAgdWludDI1NiBMZWZ0ID0gdG90YWxfcGF5bWVudCAtIEZlZTsgCiAgICAgICAgCiAgICAgICAgdWludDI1NiBFeGNlc3MgPSBtc2cudmFsdWUgLSB0b3RhbF9wYXltZW50OwogICAgICAgIAogICAgICAgIHVpbnQyNTYgT2xkVG9rZW5zU2VsbGVyID0gYmFsYW5jZU9mW3RhcmdldF07CiAgICAgICAgdWludDI1NiBPbGRUb2tlbnNCdXllciA9IGJhbGFuY2VPZlttc2cuc2VuZGVyXTsKCiAgICAgICAgLy8gQ2hhbmdlIGl0IGluIG1lbW9yeSAKICAgICAgICBfZm9yY2VUcmFuc2Zlcih0YXJnZXQsIG1zZy5zZW5kZXIsIGFtb3VudF9idXlhYmxlKTsKICAgICAgICAKICAgICAgICAvLyBQYXkgb3V0IHdpdGhkcmF3YWxzIGFuZCByZXNldCB0aW1lcgogICAgICAgIC8vIFByZXZlbnRzIGRvdWJsZSB3aXRoZHJhd2FscyBpbiBzYW1lIHR4CiAgICAgICAgCiAgICAgICAgLy8gQ2hhbmdlIHNlbGwgb3JkZXIgCiAgICAgICAgU2VsbE9yZGVyc1t0YXJnZXRdWzBdID0gc3ViKFNlbGxPcmRlcnNbdGFyZ2V0XVswXSxhbW91bnRfYnV5YWJsZSk7CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgLy8gc3RhcnQgYWxsIHRyYW5zZmVyIHN0dWZmIAoKICAgICAgICB1aW50MjU2IF9zZW5kVGFyZ2V0ID0gX3dpdGhkcmF3KHRhcmdldCwgT2xkVG9rZW5zU2VsbGVyLCBmYWxzZSk7CiAgICAgICAgdWludDI1NiBfc2VuZEJ1eWVyID0gX3dpdGhkcmF3KG1zZy5zZW5kZXIsIE9sZFRva2Vuc0J1eWVyLCBmYWxzZSApOwogICAgICAgIAogICAgICAgIC8vIGluIG9uZSB0cmFuc2ZlciBzYXZlcyBnYXMsIGJ1dCBpdHMgbm90IG5pY2UgaW4gdGhlIGV0aGVyc2NhbiBsb2dzIAogICAgICAgIHRhcmdldC50cmFuc2ZlcihhZGQoTGVmdCwgX3NlbmRUYXJnZXQpKTsKICAgICAgICAKICAgICAgICBpZiAoYWRkKEV4Y2VzcywgX3NlbmRCdXllcikgPiAwKXsKICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihhZGQoRXhjZXNzLF9zZW5kQnV5ZXIpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKEZlZSA+IDApewogICAgICAgICAgICBvd25lci50cmFuc2ZlcihGZWUpOwogICAgICAgIH0KICAgICAKICAgICAgICBlbWl0IFNlbGxPcmRlckZpbGxlZChtc2cuc2VuZGVyLCB0YXJnZXQsIGFtb3VudF9idXlhYmxlLCAgcHJpY2UsIExlZnQpOwogICAgfQoKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgU2VsbE9yZGVyUGxhY2VkKGFkZHJlc3Mgd2hvLCB1aW50MjU2IGF2YWlsYWJsZSwgdWludDI1NiBwcmljZSk7CiAgICBldmVudCBTZWxsT3JkZXJGaWxsZWQoYWRkcmVzcyBidXllciwgYWRkcmVzcyBzZWxsZXIsIHVpbnQyNTYgdG9rZW5zLCB1aW50MjU2IHByaWNlLCB1aW50MjU2IHBheW1lbnQpOwogICAgZXZlbnQgU2VsbE9yZGVyQ2FuY2VsbGVkKGFkZHJlc3Mgd2hvKTsKICAgIGV2ZW50IFdpdGhkcmF3YWxDb21wbGV0ZShhZGRyZXNzIHdobywgdWludDI1NiBnb3QpOwogICAgCiAgICAKICAgIC8vIHRoYW5rcyBmb3IgZGl2cyAKICAgIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGV7CiAgICAgICAgCiAgICB9CiAgICAKICAgIC8vIHNhZmVtYXRoIAogICAgCiAgICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIC8vIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBhIC8gYjsKICB9CgogIC8qKgogICogQGRldiBTdWJ0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQ=='.
	

]
