Class {
	#name : #SRT7e66e6d17a5ffa489e5f6fd04c084b708897977b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7e66e6d17a5ffa489e5f6fd04c084b708897977b >> base64 [
	^ 'LyoKZmlsZTogICBIdXQzNElDTy5zb2wKdmVyOiAgICAwLjIuNF9kZXBsb3kKYXV0aG9yOiBEYXJyeWwgTW9ycmlzCmRhdGU6ICAgMjctT2N0LTIwMTcKZW1haWw6ICBvMHJhZ21hbjBvIEFUIGdtYWlsLmNvbQooYykgRGFycnlsIE1vcnJpcyAyMDE3CgpBIGNvbGxhdGVkIGNvbnRyYWN0IHNldCBmb3IgdGhlIHJlY2VpcHQgb2YgZnVuZHMgYW5kIHByb2R1Y3Rpb24gYW5kIHRyYW5zZmVyCm9mIEVSQzIwIHRva2VucyBhcyBzcGVjaWZpZWQgYnkgSHV0MzQuCgpMaWNlbnNlCi0tLS0tLS0KVGhpcyBzb2Z0d2FyZSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLApidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgpNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuClNlZSBNSVQgTGljZW5jZSBmb3IgZnVydGhlciBkZXRhaWxzLgo8aHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQ+LgoKUmVsZWFzZSBOb3RlcwotLS0tLS0tLS0tLS0tCiogQWRkZWQgYGV2ZW50IEFib3J0ZWQoKWAKKiBjb3JyZWN0IGB3aG9sZXNhbGVMZWZ0YCBtYWduaXR1ZGUgYnVnCiogQWxsIHRlc3RzIHBhc3NlZAoKRGVkaWNhdGlvbnMKLS0tLS0tLS0tLS0tLQoqIHdpdGggbG92ZSB0byBJc2FiZWxsYSBhbmQgcGVhIGZyb20geW91ciBkYWQKKiB4eCB0byBlZGllLCByb2Jpbiwgd2lsbGlhbSBhbmQgY2hhcmxvdHRlIHgKKi8KCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xNzsKCi8vIEF1ZGl0ZWQgMjcgT2N0b2JlciAyMDE3IGJ5IERhcnJ5bCBNb3JyaXMsIFBldGVyIEdvZGJvbHQKY29udHJhY3QgSHV0MzRDb25maWcKewogICAgLy8gRVJDMjAgdG9rZW4gbmFtZQogICAgc3RyaW5nICBwdWJsaWMgY29uc3RhbnQgbmFtZSAgICAgICAgICAgID0gIkh1dDM0IEVudHJvcHkiOwoKICAgIC8vIEVSQzIwIHRyYWRpbmcgc3ltYm9sCiAgICBzdHJpbmcgIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgICAgICAgICAgPSAiRU5UIjsKCiAgICAvLyBFUkMyMCBkZWNpbWFsIHBsYWNlcwogICAgdWludDggICBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgICAgICAgID0gMTg7CgogICAgLy8gVG90YWwgc3VwcGx5ICgqIGluIHVuaXQgRU5UICopCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBUT1RBTF9UT0tFTlMgICAgPSAxMDAwMDAwMDA7CgogICAgLy8gQ29udHJhY3Qgb3duZXIgYXQgdGltZSBvZiBkZXBsb3ltZW50LgogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgT1dORVIgICAgICAgICAgID0gMHhkQTM3ODBDZmYyYUUzYTU5YWUxNmVDMTczNERFZWM3N2E3ZmQ4ZGIyOwoKICAgIC8vICsgbmV3IERhdGUoIjAwOjAwIDIgTm92ZW1iZXIgMjAxNyB1dGMiKS8xMDAwCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBTVEFSVF9EQVRFICAgICAgPSAxNTA5NTgwODAwOwoKICAgIC8vIEEgSHV0MzQgYWRkcmVzcyB0byBvd24gdG9rZW5zCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBIVVQzNF9SRVRBSU4gICAgPSAweDMxMzVGNGFjQTNDMUFkNDc1ODk4MTUwMGY4ZEIyMEViRGM1QTFjYUI7CgogICAgLy8gQSBIdXQzNCBhZGRyZXNzIHRvIGFjY2VwdCByYWlzZWQgZnVuZHMKICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEhVVDM0X1dBTExFVCAgICA9IDB4QTcwZDA0ZEM0YTY0OTYwYzQwQ0QyRUQyQ0RFMzZENzZDQTRFREZhQjsKCiAgICAvLyBQZXJjZW50YWdlIG9mIHRva2VucyB0byBiZSB2ZXN0ZWQgb3ZlciAyIHllYXJzLiAyMCUKICAgIHVpbnQgICAgcHVibGljIGNvbnN0YW50IFZFU1RFRF9QRVJDRU5UICA9IDIwOwoKICAgIC8vIFZlc3RpbmcgcGVyaW9kCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBWRVNUSU5HX1BFUklPRCAgPSAyNiB3ZWVrczsKCiAgICAvLyBNaW5pbXVtIGNhcCBvdmVyIHdoaWNoIHRoZSBmdW5kaW5nIGlzIGNvbnNpZGVyZWQgc3VjY2Vzc2Z1bAogICAgdWludCAgICBwdWJsaWMgY29uc3RhbnQgTUlOX0NBUCAgICAgICAgID0gMzAwMCAqIDEgZXRoZXI7CgogICAgLy8gQW4gZXRoZXIgdGhyZXNob2xkIG92ZXIgd2hpY2ggYSBmdW5kZXIgbXVzdCBLWUMgYmVmb3JlIHRva2VucyBjYW4gYmUKICAgIC8vIHRyYW5zZmVycmVkICh1bml0IG9mIGV0aGVyKTsKICAgIHVpbnQgICAgcHVibGljIGNvbnN0YW50IEtZQ19USFJFU0hPTEQgICA9IDE1MCAqIDEgZXRoZXI7CgogICAgLy8gQSBtaW5pbXVtIGFtb3VudCBvZiBldGhlciBmdW5kaW5nIGJlZm9yZSB0aGUgY29uY2llcmdlIHJhdGUgaXMgYXBwbGllZAogICAgLy8gdG8gdG9rZW5zCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBXSE9MRVNBTEVfVEhSRVNIT0xEICA9IDE1MCAqIDEgZXRoZXI7CgogICAgLy8gTnVtYmVyIG9mIHRva2VucyB1cCBmb3Igd2hvbGVzYWxlIHB1cmNoYXNlcnMgKCogaW4gdW5pdCBFTlQgKikKICAgIHVpbnQgICAgcHVibGljIGNvbnN0YW50IFdIT0xFU0FMRV9UT0tFTlMgPSAxMjUwMDAwMDsKCiAgICAvLyBUb2tlbnMgc29sZCB0byBwcmVmdW5kZXJzICgqIGluIHVuaXQgRU5UICopCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBQUkVTT0xEX1RPS0VOUyAgPSAxODE3NTAwOwoKICAgIC8vIFByZXNhbGUgZXRoZXIgaXMgZXN0aW1hdGVlZCBmcm9tIGZpYXQgcmFpc2VkIHByaW9yIHRvIElDTyBhdCB0aGUgRVRIL0FVRAogICAgLy8gcmF0ZSBhdCB0aGUgdGltZSBvZiBjb250cmFjdCBkZXBsb3ltZW50CiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBQUkVTQUxFX0VUSF9SQUlTRSA9IDI4MDcgKiAxIGV0aGVyOwoKICAgIC8vIEFkZHJlc3MgaG9sZGluZyBwcmVzb2xkIHRva2VucyB0byBiZSBkaXN0cmlidXRlZCBhZnRlciBJQ08KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IFBSRVNPTERfQUREUkVTUyA9IDB4NkJGNzA4ZUYyQzFGRGNlMzYwM2MwNENFOTU0N0FBNkUxMzQwOTNiNjsKCiAgICAvLyB3aG9sZXNhbGUgcmF0ZSBmb3IgcHVyY2hhc2VzIG92ZXIgV0hPTEVTQUxFX1RIUkVTSE9MRCBldGhlcgogICAgdWludCAgICBwdWJsaWMgY29uc3RhbnQgUkFURV9XSE9MRVNBTEUgID0gMTAwMDsKCiAgICAvLyBUaW1lIGRlcGVuZGFudCByZXRhaWwgcmF0ZXMKICAgIC8vIEZpcnN0IERheQogICAgdWludCAgICBwdWJsaWMgY29uc3RhbnQgUkFURV9EQVlfMCAgICAgID0gNzUwOwoKICAgIC8vIEZpcnN0IFdlZWsgKFRoZSBzaXggZGF5cyBhZnRlciBmaXJzdCBkYXkpCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBSQVRFX0RBWV8xICAgICAgPSA2NTI7CgogICAgLy8gU2Vjb25kIFdlZWsKICAgIHVpbnQgICAgcHVibGljIGNvbnN0YW50IFJBVEVfREFZXzcgICAgICA9IDU4ODsKCiAgICAvLyBUaGlyZCBXZWVrCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBSQVRFX0RBWV8xNCAgICAgPSA1NDU7CgogICAgLy8gRm91cnRoIFdlZWsKICAgIHVpbnQgICAgcHVibGljIGNvbnN0YW50IFJBVEVfREFZXzIxICAgICA9IDUxNzsKCiAgICAvLyBGaWZ0aCBXZWVrCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBSQVRFX0RBWV8yOCAgICAgPSA1MDA7Cn0KCgpsaWJyYXJ5IFNhZmVNYXRoCnsKICAgIC8vIGEgYWRkIHRvIGIKICAgIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICB9CgogICAgLy8gYSBzdWJ0cmFjdCBiCiAgICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgYyA9IGEgLSBiOwogICAgICAgIGFzc2VydChjIDw9IGEpOwogICAgfQoKICAgIC8vIGEgbXVsdGlwbGllZCBieSBiCiAgICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICB9CgogICAgLy8gYSBkaXZpZGVkIGJ5IGIKICAgIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICBhc3NlcnQoYiAhPSAwKTsKICAgICAgICBjID0gYSAvIGI7CiAgICB9Cn0KCgpjb250cmFjdCBSZWVudHJ5UHJvdGVjdGVkCnsKICAgIC8vIFRoZSByZWVudHJ5IHByb3RlY3Rpb24gc3RhdGUgbXV0ZXguCiAgICBib29sIF9fcmVNdXRleDsKCiAgICAvLyBTZXRzIGFuZCBjbGVhcnMgbXV0ZXggaW4gb3JkZXIgdG8gYmxvY2sgZnVuY3Rpb24gcmVlbnRyeQogICAgbW9kaWZpZXIgcHJldmVudFJlZW50cnkoKSB7CiAgICAgICAgcmVxdWlyZSghX19yZU11dGV4KTsKICAgICAgICBfX3JlTXV0ZXggPSB0cnVlOwogICAgICAgIF87CiAgICAgICAgZGVsZXRlIF9fcmVNdXRleDsKICAgIH0KCiAgICAvLyBCbG9ja3MgZnVuY3Rpb24gZW50cnkgaWYgbXV0ZXggaXMgc2V0CiAgICBtb2RpZmllciBub1JlZW50cnkoKSB7CiAgICAgICAgcmVxdWlyZSghX19yZU11dGV4KTsKICAgICAgICBfOwogICAgfQp9CgoKY29udHJhY3QgRVJDMjBUb2tlbgp7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCi8qIENvbnN0YW50cyAqLwoKICAgIC8vIG5vbmUKCi8qIFN0YXRlIHZhcmlhYmxlICovCgogICAgLy8vIEByZXR1cm4gVGhlIFRvdGFsIHN1cHBseSBvZiB0b2tlbnMKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vLyBAcmV0dXJuIFRva2VucyBvd25lZCBieSBhbiBhZGRyZXNzCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAgIC8vLyBAcmV0dXJuIFRva2VucyBzcGVuZGFibGUgYnkgYSB0aHJpZHBhcnR5CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgovKiBFdmVudHMgKi8KCiAgICAvLyBUcmlnZ2VyZWQgd2hlbiB0b2tlbnMgYXJlIHRyYW5zZmVycmVkLgogICAgZXZlbnQgVHJhbnNmZXIoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIF9mcm9tLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfdG8sCiAgICAgICAgdWludDI1NiBfYW1vdW50KTsKCiAgICAvLyBUcmlnZ2VyZWQgd2hlbmV2ZXIgYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpIGlzIGNhbGxlZC4KICAgIGV2ZW50IEFwcHJvdmFsKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLAogICAgICAgIHVpbnQyNTYgX2Ftb3VudCk7CgovKiBNb2RpZmllcnMgKi8KCiAgICAvLyBub25lCgovKiBGdW5jdGlvbnMgKi8KCiAgICAvLyBVc2luZyBhbiBleHBsaWNpdCBnZXR0ZXIgYWxsb3dzIGZvciBmdW5jdGlvbiBvdmVybG9hZGluZwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX2FkZHIpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19hZGRyXTsKICAgIH0KCiAgICAvLyBVc2luZyBhbiBleHBsaWNpdCBnZXR0ZXIgYWxsb3dzIGZvciBmdW5jdGlvbiBvdmVybG9hZGluZwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKQogICAgICAgIHB1YmxpYwogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIHRvIGFkZHJlc3MgX3RvCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmV0dXJuIHhmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICAgIH0KCiAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKF9hbW91bnQgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsKICAgICAgICByZXR1cm4geGZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgIH0KCiAgICAvLyBQcm9jZXNzIGEgdHJhbnNmZXIgaW50ZXJuYWxseS4KICAgIGZ1bmN0aW9uIHhmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShfYW1vdW50IDw9IGJhbGFuY2VzW19mcm9tXSk7CgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwoKICAgICAgICAvLyBhdm9pZCB3YXN0aW5nIGdhcyBvbiAwIHRva2VuIHRyYW5zZmVycwogICAgICAgIGlmKF9hbW91bnQgPT0gMCkgcmV0dXJuIHRydWU7CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSAgID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEFwcHJvdmVzIGEgdGhpcmQtcGFydHkgc3BlbmRlcgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwKCiMjIENvbmRpdGlvbmFsIEVudHJ5IFRhYmxlCgpGdW5jdGlvbnMgbXVzdCB0aHJvdyBvbiBGIGNvbmRpdGlvbnMKClJlbmV0cnkgcHJldmVudGlvbiBpcyBvbiBhbGwgcHVibGljIG11dGF0aW5nIGZ1bmN0aW9ucwpSZWVudHJ5IG11dGV4IHNldCBpbiBmaW5hbGl6ZUlDTygpLCBleHRlcm5hbFhmZXIoKSwgcmVmdW5kKCkKCnxmdW5jdGlvbiAgICAgICAgICAgICAgICB8PHN0YXJ0RGF0ZSB8PGVuZERhdGUgIHxmdW5kRmFpbGVkICB8ZnVuZFJhaXNlZHxpY29TdWNjZWVkZWQKfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tOnw6LS0tLS0tLS06fDotLS0tLS0tLS0tOnw6LS0tLS0tLS06fDotLS0tLS0tLS06fAp8KCkgICAgICAgICAgICAgICAgICAgICAgfEYgICAgICAgICAgfFQgICAgICAgICB8RiAgICAgICAgICAgfFQgICAgICAgICB8RiAgICAgICAgICB8CnxhYm9ydCgpICAgICAgICAgICAgICAgICB8VCAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgICB8VCAgICAgICAgIHxGICAgICAgICAgIHwKfHByb3h5UHVyY2hhc2UoKSAgICAgICAgIHxGICAgICAgICAgIHxUICAgICAgICAgfEYgICAgICAgICAgIHxUICAgICAgICAgfEYgICAgICAgICAgfAp8ZmluYWxpemVJQ08oKSAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8RiAgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICB8CnxyZWZ1bmQoKSAgICAgICAgICAgICAgICB8RiAgICAgICAgICB8RiAgICAgICAgIHxUICAgICAgICAgICB8RiAgICAgICAgIHxGICAgICAgICAgIHwKfHJlZnVuZEZvcigpICAgICAgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfFQgICAgICAgICAgIHxGICAgICAgICAgfEYgICAgICAgICAgfAp8dHJhbnNmZXIoKSAgICAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8RiAgICAgICAgICAgfEYgICAgICAgICB8VCAgICAgICAgICB8Cnx0cmFuc2ZlckZyb20oKSAgICAgICAgICB8RiAgICAgICAgICB8RiAgICAgICAgIHxGICAgICAgICAgICB8RiAgICAgICAgIHxUICAgICAgICAgIHwKfHRyYW5zZmVyVG9NYW55KCkgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfEYgICAgICAgICAgIHxGICAgICAgICAgfFQgICAgICAgICAgfAp8YXBwcm92ZSgpICAgICAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8RiAgICAgICAgICAgfEYgICAgICAgICB8VCAgICAgICAgICB8CnxjbGVhckt5YygpICAgICAgICAgICAgICB8VCAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgIHwKfHJlbGVhc2VWZXN0ZWQoKSAgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfEYgICAgICAgICAgIHxGICAgICAgICAgfG5vdz5yZWxlYXNlfAp8Y2hhbmdlT3duZXIoKSAgICAgICAgICAgfFQgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICB8CnxhY2NlcHRPd25lcnNoaXAoKSAgICAgICB8VCAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgIHwKfHRyYW5zZmVyRXh0ZXJuYWxUb2tlbnMoKXxUICAgICAgICAgIHxUICAgICAgICAgfFQgICAgICAgICAgIHxUICAgICAgICAgfFQgICAgICAgICAgfAp8ZGVzdHJveSgpICAgICAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8IV9fYWJvcnRGdXNlfEYgICAgICAgICB8RiAgICAgICAgICB8CgpcKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKY29udHJhY3QgSHV0MzRJQ09BYnN0cmFjdAp7CiAgICAvLy8gQGRldiBMb2dnZWQgdXBvbiByZWNlaXZpbmcgYSBkZXBvc2l0CiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdmFsdWUgaGFzIGJlZW4gcmVjaWV2ZWQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSB2YWx1ZSBvZiBldGhlciByZWNlaXZlZAogICAgZXZlbnQgRGVwb3NpdChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIHVpbnQgX3ZhbHVlKTsKCiAgICAvLy8gQGRldiBMb2dnZWQgdXBvbiBhIHdpdGhkcmF3YWwKICAgIC8vLyBAcGFyYW0gX2Zyb20gdGhlIGFkZHJlc3Mgb2YgdGhlIHdpdGhkcmF3ZXIKICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3MgdG8gd2hpY2ggdmFsdWUgd2FzIHNlbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSB2YWx1ZSBpbiBldGhlciB3aGljaCB3YXMgd2l0aGRyYXduCiAgICBldmVudCBXaXRoZHJhd2FsKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludCBfdmFsdWUpOwoKICAgIC8vLyBAZGV2IExvZ2dlZCB3aGVuIG5ldyBvd25lciBhY2NlcHRzIG93bmVyc2hpcAogICAgLy8vIEBwYXJhbSBfZnJvbSB0aGUgb2xkIG93bmVyIGFkZHJlc3MKICAgIC8vLyBAcGFyYW0gX3RvIHRoZSBuZXcgb3duZXIgYWRkcmVzcwogICAgZXZlbnQgQ2hhbmdlZE93bmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7CgogICAgLy8vIEBkZXYgTG9nZ2VkIHdoZW4gb3duZXIgaW5pdGlhdGVzIGEgY2hhbmdlIG9mIG93bmVyc2hpcAogICAgLy8vIEBwYXJhbSBfdG8gdGhlIG5ldyBvd25lciBhZGRyZXNzCiAgICBldmVudCBDaGFuZ2VPd25lclRvKGFkZHJlc3MgaW5kZXhlZCBfdG8pOwoKICAgIC8vLyBAZGV2IExvZ2dlZCB3aGVuIGEgZnVuZGVyIGV4Y2VlZHMgdGhlIEtZQyBsaW1pdAogICAgLy8vIEBwYXJhbSBfYWRkciBBZGRyZXNzIHRvIHNldCBvciBjbGVhciBLWUMgZmxhZwogICAgLy8vIEBwYXJhbSBfa3ljIEEgYm9vbGVhbiBmbGFnCiAgICBldmVudCBLeWMoYWRkcmVzcyBpbmRleGVkIF9hZGRyLCBib29sIF9reWMpOwoKICAgIC8vLyBAZGV2IExvZ2dlZCB3aGVuIHZlc3RlZCB0b2tlbnMgYXJlIHJlbGVhc2VkIGJhY2sgdG8gSFVUMzJfV0FMTEVUCiAgICAvLy8gQHBhcmFtIF9yZWxlYXNlRGF0ZSBUaGUgb2ZmaWNpYWwgcmVsZWFzZSBkYXRlIChldmVuIGlmIHJlbGVhc2VkIGF0CiAgICAvLy8gbGF0ZXIgZGF0ZSkKICAgIGV2ZW50IFZlc3RpbmdSZWxlYXNlZCh1aW50IF9yZWxlYXNlRGF0ZSk7CgogICAgLy8vIEBkZXYgTG9nZ2VkIGlmIHRoZSBjb250cmFjdCBpcyBhYm9ydGVkCiAgICBldmVudCBBYm9ydGVkKCk7CgovLwovLyBDb25zdGFudHMKLy8KCiAgICAvLy8gQGRldiBUaGUgSHV0MzQgdmVzdGluZyAncHN1ZG8tYWRkcmVzcycgZm9yIHRyYW5zZmVycmluZyBhbmQgcmVsZWFzaW5nCiAgICAvLy8gdmVzdGVkIHRva2VucyB0byB0aGUgSHV0MzQgV2FsbGV0LiBUaGUgYWRkcmVzcyBpcyBVVEY4IGVuY29kaW5nIG9mIHRoZQogICAgLy8vIHN0cmluZyBhbmQgY2FuIG9ubHkgYmUgYWNjZXNzZWQgYnkgdGhlICdyZWxlYXNlVmVzdGVkKCknIGZ1bmN0aW9uLgogICAgLy8vIEByZXR1cm4gYDB4NDg3NTc0MzMzNDIwNTY2NTczNzQ2OTZlNjcwMDAwMDAwMDAwMDAwMGAKICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEhVVDM0X1ZFU1RfQUREUiA9IGFkZHJlc3MoYnl0ZXMyMCgiSHV0MzQgVmVzdGluZyIpKTsKCi8vCi8vIFN0YXRlIFZhcmlhYmxlcwovLwoKICAgIC8vLyBAZGV2IFRoaXMgZnVzZSBibG93cyB1cG9uIGNhbGxpbmcgYWJvcnQoKSB3aGljaCBmb3JjZXMgYSBmYWlsIHN0YXRlCiAgICAvLy8gQHJldHVybiB0aGUgYWJvcnQgc3RhdGUuIHRydWUgPT0gbm90IGFib3J0ZWQKICAgIGJvb2wgcHVibGljIF9fYWJvcnRGdXNlID0gdHJ1ZTsKCiAgICAvLy8gQGRldiBTZXRzIHRvIHRydWUgYWZ0ZXIgdGhlIGZ1bmQgaXMgc3dlcHQgdG8gdGhlIGZ1bmQgd2FsbGV0LCBhbGxvd3MKICAgIC8vLyB0b2tlbiB0cmFuc2ZlcnMgYW5kIHByZXZlbnRzIGFib3J0KCkKICAgIC8vLyBAcmV0dXJuIGZpbmFsIHN1Y2Nlc3Mgc3RhdGUgb2YgSUNPCiAgICBib29sIHB1YmxpYyBpY29TdWNjZWVkZWQ7CgogICAgLy8vIEBkZXYgQW4gYWRkcmVzcyBwZXJtaXNzaW9uZWQgdG8gZW5hY3Qgb3duZXIgcmVzdHJpY3RlZCBmdW5jdGlvbnMKICAgIC8vLyBAcmV0dXJuIG93bmVyCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICAvLy8gQGRldiBBbiBhZGRyZXNzIHBlcm1pc3Npb25lZCB0byB0YWtlIG93bmVyc2hpcCBvZiB0aGUgY29udHJhY3QKICAgIC8vLyBAcmV0dXJuIG5ldyBvd25lciBhZGRyZXNzCiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKCiAgICAvLy8gQGRldiBBIHRhbGx5IG9mIHRvdGFsIGV0aGVyIHJhaXNlZCBkdXJpbmcgdGhlIGZ1bmRpbmcgcGVyaW9kCiAgICAvLy8gQHJldHVybiBUb3RhbCBldGhlciByYWlzZWQgZHVyaW5nIGZ1bmRpbmcKICAgIHVpbnQgcHVibGljIGV0aGVyUmFpc2VkOwoKICAgIC8vLyBAcmV0dXJuIFdob2xlc2FsZSB0b2tlbnMgYXZhaWxhYmxlIGZvciBzYWxlCiAgICB1aW50IHB1YmxpYyB3aG9sZXNhbGVMZWZ0OwoKICAgIC8vLyBAcmV0dXJuIFRvdGFsIGV0aGVyIHJlZnVuZGVkLiBVc2VkIHRvIHBlcm1pc2lvbiBjYWxsIHRvIGBkZXN0cm95KClgCiAgICB1aW50IHB1YmxpYyByZWZ1bmRlZDsKCiAgICAvLy8gQHJldHVybnMgRGF0ZSBvZiBuZXh0IHZlc3RpbmcgcmVsZWFzZQogICAgdWludCBwdWJsaWMgbmV4dFJlbGVhc2VEYXRlOwoKICAgIC8vLyBAcmV0dXJuIEV0aGVyIHBhaWQgYnkgYW4gYWRkcmVzcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgZXRoZXJDb250cmlidXRlZDsKCiAgICAvLy8gQHJldHVybnMgS1lDIGZsYWcgZm9yIGFuIGFkZHJlc3MKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIG11c3RLeWM7CgovLwovLyBNb2RpZmllcnMKLy8KCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKLy8KLy8gRnVuY3Rpb24gQWJzdHJhY3RzCi8vCgogICAgLy8vIEByZXR1cm4gYHRydWVgIGlmIE1JTl9GVU5EUyB3ZXJlIHJhaXNlZAogICAgZnVuY3Rpb24gZnVuZFJhaXNlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpOwoKICAgIC8vLyBAcmV0dXJuIGB0cnVlYCBpZiBNSU5fRlVORFMgd2VyZSBub3QgcmFpc2VkIGJlZm9yZSBFTkRfREFURSBvciBjb250cmFjdAogICAgLy8vIGhhcyBiZWVuIGFib3J0ZWQKICAgIGZ1bmN0aW9uIGZ1bmRGYWlsZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKTsKCiAgICAvLy8gQHJldHVybiBUaGUgY3VycmVudCByZXRhaWwgcmF0ZSBmb3IgdG9rZW4gcHVyY2hhc2UKICAgIGZ1bmN0aW9uIGN1cnJlbnRSYXRlKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCk7CgogICAgLy8vIEBwYXJhbSBfd2VpIEEgdmFsdWUgb2YgZXRoZXIgaW4gdW5pdHMgb2Ygd2VpCiAgICAvLy8gQHJldHVybiBhbGxUb2tlbnNfIHJldHVybmFibGUgdG9rZW5zIGZvciB0aGUgZnVuZGluZyBhbW91bnQKICAgIC8vLyBAcmV0dXJuIHdob2xlc2FsZVRva2VuXyBOdW1iZXIgb2YgdG9rZW5zIHB1cmNoYXNlZCBhdCB3aG9sZXNhbGUgcmF0ZQogICAgZnVuY3Rpb24gZXRoVG9Ub2tlbnModWludCBfd2VpKQogICAgICAgIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQgYWxsVG9rZW5zXywgdWludCB3aG9sZXNhbGVUb2tlbnNfKTsKCiAgICAvLy8gQG5vdGljZSBQcm9jZXNzZXMgYSB0b2tlbiBwdXJjaGFzZSBmb3IgYF9hZGRyYAogICAgLy8vIEBwYXJhbSBfYWRkciBBbiBhZGRyZXNzIHRvIHB1cmNoYXNlIHRva2VucwogICAgLy8vIEByZXR1cm4gQm9vbGVhbiBzdWNjZXNzIHZhbHVlCiAgICAvLy8gQGRldiBSZXF1aXJlcyA8MTUwLDAwMCBnYXMKICAgIGZ1bmN0aW9uIHByb3h5UHVyY2hhc2UoYWRkcmVzcyBfYWRkcikgcHVibGljIHBheWFibGUgcmV0dXJucyAoYm9vbCk7CgogICAgLy8vIEBub3RpY2UgRmluYWxpemUgdGhlIElDTyBhbmQgdHJhbnNmZXIgZnVuZHMKICAgIC8vLyBAcmV0dXJuIEJvb2xlYW4gc3VjY2VzcyB2YWx1ZQogICAgZnVuY3Rpb24gZmluYWxpemVJQ08oKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgLy8vIEBub3RpY2UgQ2xlYXIgdGhlIEtZQyBmbGFncyBmb3IgYW4gYXJyYXkgb2YgYWRkcmVzc2VzIHRvIGFsbG93IHRva2VucwogICAgLy8vIHRyYW5zZmVycwogICAgZnVuY3Rpb24gY2xlYXJLeWMoYWRkcmVzc1tdIF9hZGRycykgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIC8vLyBAbm90aWNlIE1ha2UgYnVsayB0cmFuc2ZlciBvZiB0b2tlbnMgdG8gbWFueSBhZGRyZXNzZXMKICAgIC8vLyBAcGFyYW0gX2FkZHJzIEFuIGFycmF5IG9mIHJlY2lwaWVudCBhZGRyZXNzZXMKICAgIC8vLyBAcGFyYW0gX2Ftb3VudHMgQW4gYXJyYXkgb2YgYW1vdW50cyB0byB0cmFuc2ZlciB0byByZXNwZWN0aXZlIGFkZHJlc3NlcwogICAgLy8vIEByZXR1cm4gQm9vbGVhbiBzdWNjZXNzIHZhbHVlCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvTWFueShhZGRyZXNzW10gX2FkZHJzLCB1aW50W10gX2Ftb3VudHMpCiAgICAgICAgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIC8vLyBAbm90aWNlIFJlbGVhc2UgdmVzdGVkIHRva2VucyBhZnRlciBhIG1hdHVyaXR5IGRhdGUKICAgIC8vLyBAcmV0dXJuIEJvb2xlYW4gc3VjY2VzcyB2YWx1ZQogICAgZnVuY3Rpb24gcmVsZWFzZVZlc3RlZCgpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgICAvLy8gQG5vdGljZSBDbGFpbSByZWZ1bmQgb24gZmFpbGVkIElDTwogICAgLy8vIEByZXR1cm4gQm9vbGVhbiBzdWNjZXNzIHZhbHVlCiAgICBmdW5jdGlvbiByZWZ1bmQoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgLy8vIEBub3RpY2UgUHVzaCByZWZ1bmQgZm9yIGBfYWRkcmAgZnJvbSBmYWlsZWQgSUNPCiAgICAvLy8gQHBhcmFtIF9hZGRycyBBbiBhcnJheSBvZiBhZGRyZXNzIHRvIHJlZnVuZAogICAgLy8vIEByZXR1cm4gQm9vbGVhbiBzdWNjZXNzIHZhbHVlCiAgICBmdW5jdGlvbiByZWZ1bmRGb3IoYWRkcmVzc1tdIF9hZGRycykgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIC8vLyBAbm90aWNlIEFib3J0IHRoZSB0b2tlbiBzYWxlIHByaW9yIHRvIGZpbmFsaXplSUNPKCkKICAgIGZ1bmN0aW9uIGFib3J0KCkgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIC8vLyBAbm90aWNlIFNhbHZhZ2UgYF9hbW91bnRgIHRva2VucyBhdCBgX2thZGRyYCBhbmQgc2VuZCB0aGVtIHRvIGBfdG9gCiAgICAvLy8gQHBhcmFtIF9rQWRkciBBbiBFUkMyMCBjb250cmFjdCBhZGRyZXNzCiAgICAvLy8gQHBhcmFtIF90byBhbmQgYWRkcmVzcyB0byBzZW5kIHRva2VucwogICAgLy8vIEBwYXJhbSBfYW1vdW50IFRoZSBudW1iZXIgb2YgdG9rZW5zIHRvIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBCb29sZWFuIHN1Y2Nlc3MgdmFsdWUKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRXh0ZXJuYWxUb2tlbihhZGRyZXNzIF9rQWRkciwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkKICAgICAgICBwdWJsaWMgcmV0dXJucyAoYm9vbCk7Cn0KCgovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXAoKIEh1dDM0SUNPIGltcGxpbWVudGF0aW9uCgpcKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKY29udHJhY3QgSHV0MzRJQ08gaXMKICAgIFJlZW50cnlQcm90ZWN0ZWQsCiAgICBFUkMyMFRva2VuLAogICAgSHV0MzRJQ09BYnN0cmFjdCwKICAgIEh1dDM0Q29uZmlnCnsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKLy8KLy8gQ29uc3RhbnRzCi8vCgogICAgLy8gVG9rZW4gZml4ZWQgcG9pbnQgZm9yIGRlY2ltYWwgcGxhY2VzCiAgICB1aW50IGNvbnN0YW50IFRPS0VOID0gdWludCgxMCkqKmRlY2ltYWxzOwoKICAgIC8vIENhbGN1bGF0ZSB2ZXN0ZWQgdG9rZW5zCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBWRVNURURfVE9LRU5TID0KICAgICAgICAgICAgVE9UQUxfVE9LRU5TICogVE9LRU4gKiBWRVNURURfUEVSQ0VOVCAvIDEwMDsKCiAgICAvLyBIdXQzNCByZXRhaW5zIDUwJSBvZiB0b2tlbnMgKDcwJSAtIDIwJSB2ZXN0ZWQgdG9rZW5zKQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUkVUQUlORURfVE9LRU5TID0gVE9LRU4gKiBUT1RBTF9UT0tFTlMgLyAyOwoKICAgIC8vIENhbGN1bGF0ZSBlbmQgZGF0ZQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgRU5EX0RBVEUgPSBTVEFSVF9EQVRFICsgMzUgZGF5czsKCiAgICAvLyBEaXZpZGVzIGBldGhlclJhaXNlZGAgdG8gY2FsY3VsYXRlIGNvbW1pc2lvbgogICAgLy8gZXRoZXJSYWlzZWQvNi42Ni4uLiA9PSBldGhlclJhaXNlZCAqIDEuNSUgLyAxMDAKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IENPTU1JU1NJT05fRElWID0gNjc7CgogICAgLy8gRGV2ZWxvcGVyIGNvbW1pc3Npb24gd2FsbGV0CiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBDT01NSVNTSU9OX1dBTExFVCA9CiAgICAgICAgMHgwMDY1RDUwNkU0NzVCNURCRDc2NDgwYkFGYTU3ZmU3QzQxYzc4M2FmOwoKLy8KLy8gRnVuY3Rpb25zCi8vCgogICAgZnVuY3Rpb24gSHV0MzRJQ08oKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIC8vIFJ1biBzYW5pdHkgY2hlY2tzCiAgICAgICAgcmVxdWlyZShUT1RBTF9UT0tFTlMgIT0gMCk7CiAgICAgICAgcmVxdWlyZShPV05FUiAhPSAweDApOwogICAgICAgIHJlcXVpcmUoSFVUMzRfUkVUQUlOICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShIVVQzNF9XQUxMRVQgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKFBSRVNPTERfVE9LRU5TIDw9IFdIT0xFU0FMRV9UT0tFTlMpOwogICAgICAgIHJlcXVpcmUoUFJFU09MRF9UT0tFTlMgPT0gMCB8fCBQUkVTT0xEX0FERFJFU1MgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKE1JTl9DQVAgIT0gMCk7CiAgICAgICAgcmVxdWlyZShTVEFSVF9EQVRFID49IG5vdyk7CiAgICAgICAgcmVxdWlyZShieXRlcyhuYW1lKS5sZW5ndGggIT0gMCk7CiAgICAgICAgcmVxdWlyZShieXRlcyhzeW1ib2wpLmxlbmd0aCAhPSAwKTsKICAgICAgICByZXF1aXJlKEtZQ19USFJFU0hPTEQgIT0gMCk7CiAgICAgICAgcmVxdWlyZShSQVRFX0RBWV8wID49IFJBVEVfREFZXzEpOwogICAgICAgIHJlcXVpcmUoUkFURV9EQVlfMSA+PSBSQVRFX0RBWV83KTsKICAgICAgICByZXF1aXJlKFJBVEVfREFZXzcgPj0gUkFURV9EQVlfMTQpOwogICAgICAgIHJlcXVpcmUoUkFURV9EQVlfMTQgPj0gUkFURV9EQVlfMjEpOwogICAgICAgIHJlcXVpcmUoUkFURV9EQVlfMjEgPj0gUkFURV9EQVlfMjgpOwoKICAgICAgICBvd25lciA9IE9XTkVSOwogICAgICAgIHRvdGFsU3VwcGx5ID0gVE9UQUxfVE9LRU5TLm11bChUT0tFTik7CiAgICAgICAgd2hvbGVzYWxlTGVmdCA9IFdIT0xFU0FMRV9UT0tFTlMubXVsKFRPS0VOKTsKICAgICAgICB1aW50IHByZXNvbGQgPSBQUkVTT0xEX1RPS0VOUy5tdWwoVE9LRU4pOwogICAgICAgIHdob2xlc2FsZUxlZnQgPSB3aG9sZXNhbGVMZWZ0LnN1YihwcmVzb2xkKTsKCiAgICAgICAgLy8gUHJlc2FsZSByYWlzZSBpcyBhcHBveGltYXRlIGdpdmVuIGl0IHdhcyBjb25kdWN0ZWQgaW4gRmlhdC4KICAgICAgICBldGhlclJhaXNlZCA9IFBSRVNBTEVfRVRIX1JBSVNFOwoKICAgICAgICAvLyBNaW50IHRoZSB0b3RhbCBzdXBwbHkgaW50byBIdXQzNCB0b2tlbiBob2xkaW5nIGFkZHJlc3MKICAgICAgICBiYWxhbmNlc1tIVVQzNF9SRVRBSU5dID0gdG90YWxTdXBwbHk7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBIVVQzNF9SRVRBSU4sIHRvdGFsU3VwcGx5KTsKCiAgICAgICAgLy8gVHJhbnNmZXIgdmVzdGVkIHRva2VucyBmcm9tIGhvbGRpbmcgd2FsbGV0IHRvIHZlc3RpbmcgcHNldWRvLWFkZHJlc3MKICAgICAgICBiYWxhbmNlc1tIVVQzNF9SRVRBSU5dID0gYmFsYW5jZXNbSFVUMzRfUkVUQUlOXS5zdWIoVkVTVEVEX1RPS0VOUyk7CiAgICAgICAgYmFsYW5jZXNbSFVUMzRfVkVTVF9BRERSXSA9IGJhbGFuY2VzW0hVVDM0X1ZFU1RfQUREUl0uYWRkKFZFU1RFRF9UT0tFTlMpOwogICAgICAgIFRyYW5zZmVyKEhVVDM0X1JFVEFJTiwgSFVUMzRfVkVTVF9BRERSLCBWRVNURURfVE9LRU5TKTsKCiAgICAgICAgLy8gVHJhbnNmZXIgcHJlc29sZCB0b2tlbnMgdG8gaG9sZGluZyBhZGRyZXNzOwogICAgICAgIGJhbGFuY2VzW0hVVDM0X1JFVEFJTl0gPSBiYWxhbmNlc1tIVVQzNF9SRVRBSU5dLnN1YihwcmVzb2xkKTsKICAgICAgICBiYWxhbmNlc1tQUkVTT0xEX0FERFJFU1NdID0gYmFsYW5jZXNbUFJFU09MRF9BRERSRVNTXS5hZGQocHJlc29sZCk7CiAgICAgICAgVHJhbnNmZXIoSFVUMzRfUkVUQUlOLCBQUkVTT0xEX0FERFJFU1MsIHByZXNvbGQpOwogICAgfQoKICAgIC8vIERlZmF1bHQgZnVuY3Rpb24uIEFjY2VwdHMgcGF5bWVudHMgZHVyaW5nIGZ1bmRpbmcgcGVyaW9kCiAgICBmdW5jdGlvbiAoKQogICAgICAgIHB1YmxpYwogICAgICAgIHBheWFibGUKICAgIHsKICAgICAgICAvLyBQYXNzIHRocm91Z2ggdG8gcHVyY2hhc2luZyBmdW5jdGlvbi4gV2lsbCB0aHJvdyBvbiBmYWlsZWQgb3IKICAgICAgICAvLyBzdWNjZXNzZnVsIElDTwogICAgICAgIHByb3h5UHVyY2hhc2UobXNnLnNlbmRlcik7CiAgICB9CgovLwovLyBHZXR0ZXJzCi8vCgogICAgLy8gSUNPIGZhaWxzIGlmIGFib3J0ZWQgb3IgbWluaW11bSBmdW5kcyBhcmUgbm90IHJhaXNlZCBieSB0aGUgZW5kIGRhdGUKICAgIGZ1bmN0aW9uIGZ1bmRGYWlsZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiAhX19hYm9ydEZ1c2UKICAgICAgICAgICAgfHwgKG5vdyA+IEVORF9EQVRFICYmIGV0aGVyUmFpc2VkIDwgTUlOX0NBUCk7CiAgICB9CgogICAgLy8gRnVuZGluZyBzdWNjZWVkcyBpZiBub3QgYWJvcnRlZCwgbWluaW11bSBmdW5kcyBhcmUgcmFpc2VkIGJlZm9yZSBlbmQgZGF0ZQogICAgZnVuY3Rpb24gZnVuZFJhaXNlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmV0dXJuICFmdW5kRmFpbGVkKCkKICAgICAgICAgICAgJiYgZXRoZXJSYWlzZWQgPj0gTUlOX0NBUAogICAgICAgICAgICAmJiBub3cgPiBTVEFSVF9EQVRFOwogICAgfQoKICAgIC8vIFJldHVybnMgd2hvbGVzYWxlIHZhbHVlIGluIHdlaQogICAgZnVuY3Rpb24gd2hvbGVTYWxlVmFsdWVMZWZ0KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICByZXR1cm4gd2hvbGVzYWxlTGVmdCAvIFJBVEVfV0hPTEVTQUxFOwogICAgfQoKICAgIGZ1bmN0aW9uIGN1cnJlbnRSYXRlKCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICByZXR1cm4KICAgICAgICAgICAgZnVuZEZhaWxlZCgpID8gMCA6CiAgICAgICAgICAgIGljb1N1Y2NlZWRlZCA/IDAgOgogICAgICAgICAgICBub3cgPCBTVEFSVF9EQVRFID8gMCA6CiAgICAgICAgICAgIG5vdyA8IFNUQVJUX0RBVEUgKyAxIGRheXMgPyBSQVRFX0RBWV8wIDoKICAgICAgICAgICAgbm93IDwgU1RBUlRfREFURSArIDcgZGF5cyA/IFJBVEVfREFZXzEgOgogICAgICAgICAgICBub3cgPCBTVEFSVF9EQVRFICsgMTQgZGF5cyA/IFJBVEVfREFZXzcgOgogICAgICAgICAgICBub3cgPCBTVEFSVF9EQVRFICsgMjEgZGF5cyA/IFJBVEVfREFZXzE0IDoKICAgICAgICAgICAgbm93IDwgU1RBUlRfREFURSArIDI4IGRheXMgPyBSQVRFX0RBWV8yMSA6CiAgICAgICAgICAgIG5vdyA8IEVORF9EQVRFID8gUkFURV9EQVlfMjggOgogICAgICAgICAgICAwOwogICAgfQoKICAgIC8vIENhbGN1bGF0ZXMgdGhlIHNhbGUgYW5kIHdob2xlc2FsZSBwb3J0aW9uIG9mIHRva2VucyBmb3IgYSBnaXZlbiB2YWx1ZQogICAgLy8gb2Ygd2VpIGF0IHRoZSB0aW1lIG9mIGNhbGxpbmcuCiAgICBmdW5jdGlvbiBldGhUb1Rva2Vucyh1aW50IF93ZWkpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnMgKHVpbnQgYWxsVG9rZW5zXywgdWludCB3aG9sZXNhbGVUb2tlbnNfKQogICAgewogICAgICAgIC8vIEdldCB3aG9sZXNhbGUgcG9ydGlvbiBvZiBldGhlciBhbmQgdG9rZW5zCiAgICAgICAgdWludCB3c1ZhbHVlTGVmdCA9IHdob2xlU2FsZVZhbHVlTGVmdCgpOwogICAgICAgIHVpbnQgd2hvbGVzYWxlU3BlbmQgPQogICAgICAgICAgICAgICAgZnVuZEZhaWxlZCgpID8gMCA6CiAgICAgICAgICAgICAgICBpY29TdWNjZWVkZWQgPyAwIDoKICAgICAgICAgICAgICAgIG5vdyA8IFNUQVJUX0RBVEUgPyAwIDoKICAgICAgICAgICAgICAgIG5vdyA+IEVORF9EQVRFID8gMCA6CiAgICAgICAgICAgICAgICAvLyBObyB3aG9sZXNhbGUgcHVyY2hzZQogICAgICAgICAgICAgICAgX3dlaSA8IFdIT0xFU0FMRV9USFJFU0hPTEQgPyAwIDoKICAgICAgICAgICAgICAgIC8vIFRvdGFsIHdob2xlc2FsZSBwdXJjaGFzZQogICAgICAgICAgICAgICAgX3dlaSA8IHdzVmFsdWVMZWZ0ID8gIF93ZWkgOgogICAgICAgICAgICAgICAgLy8gb3ZlciBmdW5kZWQgZm9yIHJlbWFpbmluZyB3aG9sZXNhbGUgdG9rZW5zCiAgICAgICAgICAgICAgICB3c1ZhbHVlTGVmdDsKCiAgICAgICAgd2hvbGVzYWxlVG9rZW5zXyA9IHdob2xlc2FsZVNwZW5kCiAgICAgICAgICAgICAgICAubXVsKFJBVEVfV0hPTEVTQUxFKQogICAgICAgICAgICAgICAgLm11bChUT0tFTikKICAgICAgICAgICAgICAgIC5kaXYoMSBldGhlcik7CgogICAgICAgIC8vIFJlbWFpbmluZyB3ZWkgdXNlZCB0byBwdXJjaGFzZSByZXRhaWwgdG9rZW5zCiAgICAgICAgX3dlaSA9IF93ZWkuc3ViKHdob2xlc2FsZVNwZW5kKTsKCiAgICAgICAgLy8gR2V0IHJldGFpbCByYXRlCiAgICAgICAgdWludCBzYWxlUmF0ZSA9IGN1cnJlbnRSYXRlKCk7CgogICAgICAgIGFsbFRva2Vuc18gPSBfd2VpCiAgICAgICAgICAgICAgICAubXVsKHNhbGVSYXRlKQogICAgICAgICAgICAgICAgLm11bChUT0tFTikKICAgICAgICAgICAgICAgIC5kaXYoMSBldGhlcikKICAgICAgICAgICAgICAgIC5hZGQod2hvbGVzYWxlVG9rZW5zXyk7CiAgICB9CgovLwovLyBJQ08gZnVuY3Rpb25zCi8vCgogICAgLy8gVGhlIGZ1bmRyYWlzaW5nIGNhbiBiZSBhYm9ydGVkIGFueSB0aW1lIGJlZm9yZSBgZmluYWxpc2VJQ08oKWAgaXMgY2FsbGVkLgogICAgLy8gVGhpcyB3aWxsIGZvcmNlIGEgZmFpbCBzdGF0ZSBhbmQgYWxsb3cgcmVmdW5kcyB0byBiZSBjb2xsZWN0ZWQuCiAgICAvLyBUaGUgb3duZXIgY2FuIGFib3J0IG9yIGFueW9uZSBlbHNlIGlmIGEgc3VjY2Vzc2Z1bCBmdW5kIGhhcyBub3QgYmVlbgogICAgLy8gZmluYWxpc2VkIGJlZm9yZSA3IGRheXMgYWZ0ZXIgdGhlIGVuZCBkYXRlLgogICAgZnVuY3Rpb24gYWJvcnQoKQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZSghaWNvU3VjY2VlZGVkKTsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbm93ID4gRU5EX0RBVEUgICsgMTQgZGF5cyk7CiAgICAgICAgZGVsZXRlIF9fYWJvcnRGdXNlOwogICAgICAgIEFib3J0ZWQoKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBHZW5lcmFsIGFkZHJlc3NlcyBjYW4gcHVyY2hhc2UgdG9rZW5zIGR1cmluZyBmdW5kaW5nCiAgICBmdW5jdGlvbiBwcm94eVB1cmNoYXNlKGFkZHJlc3MgX2FkZHIpCiAgICAgICAgcHVibGljCiAgICAgICAgcGF5YWJsZQogICAgICAgIG5vUmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZSghZnVuZEZhaWxlZCgpKTsKICAgICAgICByZXF1aXJlKCFpY29TdWNjZWVkZWQpOwogICAgICAgIHJlcXVpcmUobm93ID4gU1RBUlRfREFURSk7CiAgICAgICAgcmVxdWlyZShub3cgPD0gRU5EX0RBVEUpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CgogICAgICAgIC8vIExvZyBldGhlciBkZXBvc2l0CiAgICAgICAgRGVwb3NpdCAoX2FkZHIsIG1zZy52YWx1ZSk7CgogICAgICAgIC8vIEdldCBldGhlciB0byB0b2tlbiBjb252ZXJzaW9uCiAgICAgICAgdWludCB0b2tlbnM7CiAgICAgICAgLy8gUG9ydGlvbiBvZiB0b2tlbnMgc29sZCBhdCB3aG9sZXNhbGUgcmF0ZQogICAgICAgIHVpbnQgd2hvbGVzYWxlVG9rZW5zOwoKICAgICAgICAodG9rZW5zLCB3aG9sZXNhbGVUb2tlbnMpID0gZXRoVG9Ub2tlbnMobXNnLnZhbHVlKTsKCiAgICAgICAgLy8gQmxvY2sgYW55IGZhaWxlZCB0b2tlbiBjcmVhdGlvbgogICAgICAgIHJlcXVpcmUodG9rZW5zID4gMCk7CgogICAgICAgIC8vIFByZXZlbnQgb3ZlciBzdWJzY3JpYmluZwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbSFVUMzRfUkVUQUlOXSAtIHRva2VucyA+PSBSRVRBSU5FRF9UT0tFTlMpOwoKICAgICAgICAvLyBBZGp1c3Qgd2hvbGVzYWxlIHRva2VucyBsZWZ0IGZvciBzYWxlCiAgICAgICAgaWYgKHdob2xlc2FsZVRva2VucyAhPSAwKSB7CiAgICAgICAgICAgIHdob2xlc2FsZUxlZnQgPSB3aG9sZXNhbGVMZWZ0LnN1Yih3aG9sZXNhbGVUb2tlbnMpOwogICAgICAgIH0KCiAgICAgICAgLy8gdHJhbnNmZXIgdG9rZW5zIGZyb20gZnVuZCB3YWxsZXQKICAgICAgICBiYWxhbmNlc1tIVVQzNF9SRVRBSU5dID0gYmFsYW5jZXNbSFVUMzRfUkVUQUlOXS5zdWIodG9rZW5zKTsKICAgICAgICBiYWxhbmNlc1tfYWRkcl0gPSBiYWxhbmNlc1tfYWRkcl0uYWRkKHRva2Vucyk7CiAgICAgICAgVHJhbnNmZXIoSFVUMzRfUkVUQUlOLCBfYWRkciwgdG9rZW5zKTsKCiAgICAgICAgLy8gVXBkYXRlIGZ1bmRzIHJhaXNlZAogICAgICAgIGV0aGVyUmFpc2VkID0gZXRoZXJSYWlzZWQuYWRkKG1zZy52YWx1ZSk7CgogICAgICAgIC8vIFVwZGF0ZSBob2xkZXIgcGF5bWVudHMKICAgICAgICBldGhlckNvbnRyaWJ1dGVkW19hZGRyXSA9IGV0aGVyQ29udHJpYnV0ZWRbX2FkZHJdLmFkZChtc2cudmFsdWUpOwoKICAgICAgICAvLyBDaGVjayBLWUMgcmVxdWlyZW1lbnQKICAgICAgICBpZihldGhlckNvbnRyaWJ1dGVkW19hZGRyXSA+PSBLWUNfVEhSRVNIT0xEICYmICFtdXN0S3ljW19hZGRyXSkgewogICAgICAgICAgICBtdXN0S3ljW19hZGRyXSA9IHRydWU7CiAgICAgICAgICAgIEt5YyhfYWRkciwgdHJ1ZSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBPd25lciBjYW4gc3dlZXAgYSBzdWNjZXNzZnVsIGZ1bmRpbmcgdG8gdGhlIGZ1bmRXYWxsZXQuCiAgICAvLyBDYW4gYmUgY2FsbGVkIHJlcGVhdGVkbHkgdG8gcmVjb3ZlciBlcnJhbnQgZXRoZXIgd2hpY2ggbWF5IGhhdmUgYmVlbgogICAgLy8gYHNlbGZkZXN0cnVjdGVkYCB0byB0aGUgY29udHJhY3QKICAgIC8vIENvbnRyYWN0IGNhbiBiZSBhYm9ydGVkIHVwIHVudGlsIHRoaXMgcmV0dXJucyBgdHJ1ZWAKICAgIGZ1bmN0aW9uIGZpbmFsaXplSUNPKCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgICAgICBwcmV2ZW50UmVlbnRyeSgpCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICAvLyBNdXN0IGhhdmUgcmVhY2hlZCBtaW5pbXVtIGNhcAogICAgICAgIHJlcXVpcmUoZnVuZFJhaXNlZCgpKTsKCiAgICAgICAgLy8gU2V0IGZpcnN0IHZlc3RpbmcgZGF0ZSAob25seSBvbmNlIGFzIHRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBhZ2FpbikKICAgICAgICBpZighaWNvU3VjY2VlZGVkKSB7CiAgICAgICAgICAgIG5leHRSZWxlYXNlRGF0ZSA9IG5vdyArIFZFU1RJTkdfUEVSSU9EOwogICAgICAgIH0KCiAgICAgICAgLy8gU2V0IHN1Y2Nlc3MgZmxhZzsKICAgICAgICBpY29TdWNjZWVkZWQgPSB0cnVlOwoKICAgICAgICAvLyBUcmFuc2ZlciAlIERldmVsb3BlciBjb21taXNzaW9uCiAgICAgICAgdWludCBkZXZDb21taXNzaW9uID0gY2FsY0NvbW1pc3Npb24oKTsKICAgICAgICBXaXRoZHJhd2FsKHRoaXMsIENPTU1JU1NJT05fV0FMTEVULCBkZXZDb21taXNzaW9uKTsKICAgICAgICBDT01NSVNTSU9OX1dBTExFVC50cmFuc2ZlcihkZXZDb21taXNzaW9uKTsKCiAgICAgICAgLy8gUmVtYWluaW5nICUgdG8gdGhlIGZ1bmQgd2FsbGV0CiAgICAgICAgV2l0aGRyYXdhbCh0aGlzLCBIVVQzNF9XQUxMRVQsIHRoaXMuYmFsYW5jZSk7CiAgICAgICAgSFVUMzRfV0FMTEVULnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gY2xlYXJLeWMoYWRkcmVzc1tdIF9hZGRycykKICAgICAgICBwdWJsaWMKICAgICAgICBub1JlZW50cnkKICAgICAgICBvbmx5T3duZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHVpbnQgbGVuID0gX2FkZHJzLmxlbmd0aDsKICAgICAgICBmb3IodWludCBpOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgZGVsZXRlIG11c3RLeWNbX2FkZHJzW2ldXTsKICAgICAgICAgICAgS3ljKF9hZGRyc1tpXSwgZmFsc2UpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBSZWxlYXNlcyB2ZXN0ZWQgdG9rZW5zIGJhY2sgdG8gSHV0MzQgd2FsbGV0CiAgICBmdW5jdGlvbiByZWxlYXNlVmVzdGVkKCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUobm93ID4gbmV4dFJlbGVhc2VEYXRlKTsKICAgICAgICBWZXN0aW5nUmVsZWFzZWQobmV4dFJlbGVhc2VEYXRlKTsKICAgICAgICBuZXh0UmVsZWFzZURhdGUgPSBuZXh0UmVsZWFzZURhdGUuYWRkKFZFU1RJTkdfUEVSSU9EKTsKICAgICAgICByZXR1cm4geGZlcihIVVQzNF9WRVNUX0FERFIsIEhVVDM0X1JFVEFJTiwgVkVTVEVEX1RPS0VOUyAvIDQpOwogICAgfQoKICAgIC8vIERpcmVjdCByZWZ1bmQgdG8gY2FsbGVyCiAgICBmdW5jdGlvbiByZWZ1bmQoKQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgYWRkcmVzc1tdIG1lbW9yeSBhZGRycyA9IG5ldyBhZGRyZXNzW10oMSk7CiAgICAgICAgYWRkcnNbMF0gPSBtc2cuc2VuZGVyOwogICAgICAgIHJldHVybiByZWZ1bmRGb3IoYWRkcnMpOwogICAgfQoKICAgIC8vIEJ1bGsgcmVmdW5kcyBjYW4gYmUgcHVzaGVkIGZyb20gYSBmYWlsZWQgSUNPCiAgICBmdW5jdGlvbiByZWZ1bmRGb3IoYWRkcmVzc1tdIF9hZGRycykKICAgICAgICBwdWJsaWMKICAgICAgICBwcmV2ZW50UmVlbnRyeSgpCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKGZ1bmRGYWlsZWQoKSk7CiAgICAgICAgdWludCBpOwogICAgICAgIHVpbnQgbGVuID0gX2FkZHJzLmxlbmd0aDsKICAgICAgICB1aW50IHZhbHVlOwogICAgICAgIHVpbnQgdG9rZW5zOwogICAgICAgIGFkZHJlc3MgYWRkcjsKCiAgICAgICAgZm9yIChpOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgYWRkciA9IF9hZGRyc1tpXTsKICAgICAgICAgICAgdmFsdWUgPSBldGhlckNvbnRyaWJ1dGVkW2FkZHJdOwogICAgICAgICAgICB0b2tlbnMgPSBiYWxhbmNlc1thZGRyXTsKICAgICAgICAgICAgaWYgKHRva2VucyA+IDApIHsKICAgICAgICAgICAgICAgIC8vIFJldHVybiB0b2tlbnMKICAgICAgICAgICAgICAgIC8vIHRyYW5zZmVyIHRva2VucyBmcm9tIGZ1bmQgd2FsbGV0CiAgICAgICAgICAgICAgICBiYWxhbmNlc1tIVVQzNF9SRVRBSU5dID0gYmFsYW5jZXNbSFVUMzRfUkVUQUlOXS5hZGQodG9rZW5zKTsKICAgICAgICAgICAgICAgIGRlbGV0ZSBiYWxhbmNlc1thZGRyXTsKICAgICAgICAgICAgICAgIFRyYW5zZmVyKGFkZHIsIEhVVDM0X1JFVEFJTiwgdG9rZW5zKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHZhbHVlID4gMCkgewogICAgICAgICAgICAgICAgLy8gUmVmdW5kIGV0aGVyIGNvbnRyaWJ1dGlvbgogICAgICAgICAgICAgICAgZGVsZXRlIGV0aGVyQ29udHJpYnV0ZWRbYWRkcl07CiAgICAgICAgICAgICAgICBkZWxldGUgbXVzdEt5Y1thZGRyXTsKICAgICAgICAgICAgICAgIHJlZnVuZGVkID0gcmVmdW5kZWQuYWRkKHZhbHVlKTsKICAgICAgICAgICAgICAgIFdpdGhkcmF3YWwodGhpcywgYWRkciwgdmFsdWUpOwogICAgICAgICAgICAgICAgYWRkci50cmFuc2Zlcih2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgovLwovLyBFUkMyMCBhZGRpdGlvbmFsIGFuZCBvdmVybG9hZGVkIGZ1bmN0aW9ucwovLwoKICAgIC8vIEFsbG93cyBhIHNlbmRlciB0byB0cmFuc2ZlciB0b2tlbnMgdG8gYW4gYXJyYXkgb2YgcmVjaXBpZW50cwogICAgZnVuY3Rpb24gdHJhbnNmZXJUb01hbnkoYWRkcmVzc1tdIF9hZGRycywgdWludFtdIF9hbW91bnRzKQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShfYWRkcnMubGVuZ3RoID09IF9hbW91bnRzLmxlbmd0aCk7CiAgICAgICAgdWludCBsZW4gPSBfYWRkcnMubGVuZ3RoOwogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgeGZlcihtc2cuc2VuZGVyLCBfYWRkcnNbaV0sIF9hbW91bnRzW2ldKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gT3ZlcmxvYWQgdG8gY2hlY2sgSUNPIHN1Y2Nlc3MgYW5kIEtZQyBmbGFncy4KICAgIGZ1bmN0aW9uIHhmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkKICAgICAgICBpbnRlcm5hbAogICAgICAgIG5vUmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShpY29TdWNjZWVkZWQpOwogICAgICAgIHJlcXVpcmUoIW11c3RLeWNbX2Zyb21dKTsKICAgICAgICBzdXBlci54ZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIE92ZXJsb2FkIHRvIHJlcXVpcmUgSUNPIHN1Y2Nlc3MKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgLy8gSUNPIG11c3QgYmUgc3VjY2Vzc2Z1bAogICAgICAgIHJlcXVpcmUoaWNvU3VjY2VlZGVkKTsKICAgICAgICBzdXBlci5hcHByb3ZlKF9zcGVuZGVyLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCi8vCi8vIENvbnRyYWN0IG1hbmFnZW1lbnQgZnVuY3Rpb25zCi8vCgogICAgLy8gSW5pdGlhdGUgYSBjaGFuZ2Ugb2Ygb3duZXIgdG8gYF9vd25lcmAKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX293bmVyKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgQ2hhbmdlT3duZXJUbyhfb3duZXIpOwogICAgICAgIG5ld093bmVyID0gX293bmVyOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEZpbmFsaXNlIGNoYW5nZSBvZiBvd25lcnNoaXAgdG8gbmV3T3duZXIKICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpOwogICAgICAgIENoYW5nZWRPd25lcihvd25lciwgbXNnLnNlbmRlcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICBkZWxldGUgbmV3T3duZXI7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gVGhpcyB3aWxsIHNlbGZkZXN0cnVjdCB0aGUgY29udHJhY3Qgb24gdGhlIGNvbmRpdHRpb24gYWxsIGhhdmUgYmVlbgogICAgLy8gcHJvY2Vzc2VkLgogICAgZnVuY3Rpb24gZGVzdHJveSgpCiAgICAgICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgb25seU93bmVyCiAgICB7CiAgICAgICAgcmVxdWlyZSghX19hYm9ydEZ1c2UpOwogICAgICAgIHJlcXVpcmUocmVmdW5kZWQgPT0gKGV0aGVyUmFpc2VkIC0gUFJFU0FMRV9FVEhfUkFJU0UpKTsKICAgICAgICAvLyBMb2cgYnVybmVkIHRva2VucyBmb3IgY29tcGxldGUgbGVkZ2VyIGFjY291bnRpbmcgb24gYXJjaGl2YWwgbm9kZXMKICAgICAgICBUcmFuc2ZlcihIVVQzNF9SRVRBSU4sIDB4MCwgYmFsYW5jZXNbSFVUMzRfUkVUQUlOXSk7CiAgICAgICAgVHJhbnNmZXIoSFVUMzRfVkVTVF9BRERSLCAweDAsIFZFU1RFRF9UT0tFTlMpOwogICAgICAgIFRyYW5zZmVyKFBSRVNPTERfQUREUkVTUywgMHgwLCBQUkVTT0xEX1RPS0VOUyk7CiAgICAgICAgLy8gR2FyYmFnZSBjb2xsZWN0IG1hcHBlZCBzdGF0ZQogICAgICAgIGRlbGV0ZSBiYWxhbmNlc1tIVVQzNF9SRVRBSU5dOwogICAgICAgIGRlbGV0ZSBiYWxhbmNlc1tQUkVTT0xEX0FERFJFU1NdOwogICAgICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgICB9CgogICAgLy8gT3duZXIgY2FuIHNhbHZhZ2UgRVJDMjAgdG9rZW5zIHRoYXQgbWF5IGhhdmUgYmVlbiBzZW50IHRvIHRoZSBhY2NvdW50CiAgICBmdW5jdGlvbiB0cmFuc2ZlckV4dGVybmFsVG9rZW4oYWRkcmVzcyBfa0FkZHIsIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICAgICAgcHJldmVudFJlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoRVJDMjBUb2tlbihfa0FkZHIpLnRyYW5zZmVyKF90bywgX2Ftb3VudCkpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIENhbGN1bGF0ZSBjb21taXNzaW9uIG9uIHByZWZ1bmRlZCBhbmQgcmFpc2VkIGV0aGVyLgogICAgZnVuY3Rpb24gY2FsY0NvbW1pc3Npb24oKQogICAgICAgIGludGVybmFsCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnModWludCkKICAgIHsKICAgICAgICB1aW50IGNvbW1pc3Npb24gPSAodGhpcy5iYWxhbmNlICsgUFJFU0FMRV9FVEhfUkFJU0UpIC8gQ09NTUlTU0lPTl9ESVY7CiAgICAgICAgLy8gRWRnZSBjYXNlIHRoYXQgcHJlZnVuZCBjYXVzZXMgY29tbWlzc2lvbiB0byBiZSBncmVhdGVyIHRoYW4gYmFsYW5jZQogICAgICAgIHJldHVybiBjb21taXNzaW9uIDw9IHRoaXMuYmFsYW5jZSA/IGNvbW1pc3Npb24gOiB0aGlzLmJhbGFuY2U7CiAgICB9Cn0='.
	

]
