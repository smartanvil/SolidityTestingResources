Class {
	#name : #SRTb589ef3af084cc5ec905d23112520ec168478582,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb589ef3af084cc5ec905d23112520ec168478582 >> base64 [
	^ 'LyoKICogRVJDMjAgaW50ZXJmYWNlCiAqIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIHsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCgovKioKICogU2FmZSB1bnNpZ25lZCBzYWZlIG1hdGguCiAqCiAqIGh0dHBzOi8vYmxvZy5hcmFnb24ub25lL2xpYnJhcnktZHJpdmVuLWRldmVsb3BtZW50LWluLXNvbGlkaXR5LTJiZWJjYWY4ODczNiMuNzUwZ3d0d2xpCiAqCiAqIE9yaWdpbmFsbHkgZnJvbSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vQXJhZ29uT25lL3plcHBlbGluLXNvbGlkaXR5L21hc3Rlci9jb250cmFjdHMvU2FmZU1hdGhMaWIuc29sCiAqCiAqIE1haW50YWluZWQgaGVyZSB1bnRpbCBtZXJnZWQgdG8gbWFpbmxpbmUgemVwcGVsaW4tc29saWRpdHkuCiAqCiAqLwpsaWJyYXJ5IFNhZmVNYXRoTGliIHsKCiAgZnVuY3Rpb24gdGltZXModWludCBhLCB1aW50IGIpIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbWludXModWludCBhLCB1aW50IGIpIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gcGx1cyh1aW50IGEsIHVpbnQgYikgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBwcml2YXRlIHsKICAgIGlmICghYXNzZXJ0aW9uKSB0aHJvdzsKICB9Cn0KCgoKCi8qCiAqIE93bmFibGUKICoKICogQmFzZSBjb250cmFjdCB3aXRoIGFuIG93bmVyLgogKiBQcm92aWRlcyBvbmx5T3duZXIgbW9kaWZpZXIsIHdoaWNoIHByZXZlbnRzIGZ1bmN0aW9uIGZyb20gcnVubmluZyBpZiBpdCBpcyBjYWxsZWQgYnkgYW55b25lIG90aGVyIHRoYW4gdGhlIG93bmVyLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICB0aHJvdzsKICAgIH0KICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KICB9Cgp9CgoKLyoKICogSGFsdGFibGUKICoKICogQWJzdHJhY3QgY29udHJhY3QgdGhhdCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuCiAqIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4gRGlmZmVycyBmcm9tIFBhdXNhYmxlIGJ5IGNhdXNpbmcgYSB0aHJvdyB3aGVuIGluIGhhbHQgbW9kZS4KICoKICoKICogT3JpZ2luYWxseSBlbnZpc2lvbmVkIGluIEZpcnN0Qmxvb2QgSUNPIGNvbnRyYWN0LgogKi8KY29udHJhY3QgSGFsdGFibGUgaXMgT3duYWJsZSB7CiAgYm9vbCBwdWJsaWMgaGFsdGVkOwoKICBtb2RpZmllciBzdG9wSW5FbWVyZ2VuY3kgewogICAgaWYgKGhhbHRlZCkgdGhyb3c7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUluRW1lcmdlbmN5IHsKICAgIGlmICghaGFsdGVkKSB0aHJvdzsKICAgIF87CiAgfQoKICAvLyBjYWxsZWQgYnkgdGhlIG93bmVyIG9uIGVtZXJnZW5jeSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogIGZ1bmN0aW9uIGhhbHQoKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgaGFsdGVkID0gdHJ1ZTsKICB9CgogIC8vIGNhbGxlZCBieSB0aGUgb3duZXIgb24gZW5kIG9mIGVtZXJnZW5jeSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICBmdW5jdGlvbiB1bmhhbHQoKSBleHRlcm5hbCBvbmx5T3duZXIgb25seUluRW1lcmdlbmN5IHsKICAgIGhhbHRlZCA9IGZhbHNlOwogIH0KCn0KCgovKioKICogSW50ZXJmYWNlIGZvciBkZWZpbmluZyBjcm93ZHNhbGUgcHJpY2luZy4KICovCmNvbnRyYWN0IFByaWNpbmdTdHJhdGVneSB7CgogIC8qKgogICAqIFdoZW4gc29tZWJvZHkgdHJpZXMgdG8gYnV5IHRva2VucyBmb3IgWCBldGgsIGNhbGN1bGF0ZSBob3cgbWFueSB0b2tlbnMgdGhleSBnZXQuCiAgICovCiAgZnVuY3Rpb24gY2FsY3VsYXRlUHJpY2UodWludCB2YWx1ZSwgdWludCB0b2tlbnNTb2xkLCB1aW50IHdlaVJhaXNlZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdG9rZW5BbW91bnQpOwp9CgoKLyoqCiAqIEZpbmFsaXplIGFnZW50IGRlZmluZXMgd2hhdCBoYXBwZW5zIGF0IHRoZSBlbmQgb2Ygc3VjY2VzZWZ1bCBjcm93ZHNhbGUuCiAqCiAqIC0gQWxsb2NhdGUgdG9rZW5zIGZvciBmb3VuZGVycywgYm91bnRpZXMgYW5kIGNvbW11bml0eQogKiAtIE1ha2UgdG9rZW5zIHRyYW5zZmVyYWJsZQogKiAtIGV0Yy4KICovCmNvbnRyYWN0IEZpbmFsaXplQWdlbnQgewoKICBmdW5jdGlvbiBpc0ZpbmFsaXplQWdlbnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKiBDYWxsZWQgb25jZSBieSBjcm93ZHNhbGUgZmluYWxpemUoKSBpZiB0aGUgc2FsZSB3YXMgc3VjY2Vzcy4gKi8KICBmdW5jdGlvbiBmaW5hbGl6ZUNyb3dkc2FsZSgpOwoKfQoKCgovKioKICogQWJzdHJhY3QgYmFzZSBjb250cmFjdCBmb3IgdG9rZW4gc2FsZXMuCiAqCiAqIEhhbmRsZQogKiAtIHN0YXJ0IGFuZCBlbmQgZGF0ZXMKICogLSBhY2NlcHRpbmcgaW52ZXN0bWVudHMKICogLSBtaW5pbXVtIGZ1bmRpbmcgZ29hbCBhbmQgcmVmdW5kCiAqIC0gdmFyaW91cyBzdGF0aXN0aWNzIGR1cmluZyB0aGUgY3Jvd2RmdW5kCiAqIC0gZGlmZmVyZW50IHByaWNpbmcgc3RyYXRlZ2llcwogKgogKi8KY29udHJhY3QgQ3Jvd2RzYWxlIGlzIEhhbHRhYmxlIHsKCiAgdXNpbmcgU2FmZU1hdGhMaWIgZm9yIHVpbnQ7CgogIC8qIFRoZSB0b2tlbiB3ZSBhcmUgc2VsbGluZyAqLwogIEVSQzIwIHB1YmxpYyB0b2tlbjsKCiAgLyogSG93IHdlIGFyZSBnb2luZyB0byBwcmljZSBvdXIgb2ZmZXJpbmcgKi8KICBQcmljaW5nU3RyYXRlZ3kgcHVibGljIHByaWNpbmdTdHJhdGVneTsKCiAgLyogUG9zdC1zdWNjZXNzIGNhbGxiYWNrICovCiAgRmluYWxpemVBZ2VudCBwdWJsaWMgZmluYWxpemVBZ2VudDsKCiAgLyogdG9rZW5zIHdpbGwgYmUgdHJhbnNmZXJlZCBmcm9tIHRoaXMgYWRkcmVzcyAqLwogIGFkZHJlc3MgcHVibGljIG11bHRpc2lnV2FsbGV0OwoKICAvKiBUaGUgcGFydHkgd2hvIGhvbGRzIHRoZSBmdWxsIHRva2VuIHBvb2wgYW5kIGhhcyBhcHByb3ZlKCknZWQgdG9rZW5zIGZvciB0aGlzIGNyb3dkc2FsZSAqLwogIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwoKICAvKiBpZiB0aGUgZnVuZGluZyBnb2FsIGlzIG5vdCByZWFjaGVkLCBpbnZlc3RvcnMgbWF5IHdpdGhkcmF3IHRoZWlyIGZ1bmRzICovCiAgdWludCBwdWJsaWMgbWluaW11bUZ1bmRpbmdHb2FsOwoKICAvKiB0aGUgVU5JWCB0aW1lc3RhbXAgc3RhcnQgZGF0ZSBvZiB0aGUgY3Jvd2RzYWxlICovCiAgdWludCBwdWJsaWMgc3RhcnRzQXQ7CgogIC8qIHRoZSBVTklYIHRpbWVzdGFtcCBlbmQgZGF0ZSBvZiB0aGUgY3Jvd2RzYWxlICovCiAgdWludCBwdWJsaWMgZW5kc0F0OwoKICAvKiB0aGUgbnVtYmVyIG9mIHRva2VucyBhbHJlYWR5IHNvbGQgdGhyb3VnaCB0aGlzIGNvbnRyYWN0Ki8KICB1aW50IHB1YmxpYyB0b2tlbnNTb2xkID0gMDsKCiAgLyogSG93IG1hbnkgd2VpIG9mIGZ1bmRpbmcgd2UgaGF2ZSByYWlzZWQgKi8KICB1aW50IHB1YmxpYyB3ZWlSYWlzZWQgPSAwOwoKICAvKiBIb3cgbWFueSBkaXN0aW5jdCBhZGRyZXNzZXMgaGF2ZSBpbnZlc3RlZCAqLwogIHVpbnQgcHVibGljIGludmVzdG9yQ291bnQgPSAwOwoKICAvKiBIb3cgbXVjaCB3ZWkgd2UgaGF2ZSByZXR1cm5lZCBiYWNrIHRvIHRoZSBjb250cmFjdCBhZnRlciBhIGZhaWxlZCBjcm93ZGZ1bmQuICovCiAgdWludCBwdWJsaWMgbG9hZGVkUmVmdW5kID0gMDsKCiAgLyogSG93IG11Y2ggd2VpIHdlIGhhdmUgZ2l2ZW4gYmFjayB0byBpbnZlc3RvcnMuKi8KICB1aW50IHB1YmxpYyB3ZWlSZWZ1bmRlZCA9IDA7CgogIC8qIEhhcyB0aGlzIGNyb3dkc2FsZSBiZWVuIGZpbmFsaXplZCAqLwogIGJvb2wgcHVibGljIGZpbmFsaXplZDsKCiAgLyoqIEhvdyBtdWNoIEVUSCBlYWNoIGFkZHJlc3MgaGFzIGludmVzdGVkIHRvIHRoaXMgY3Jvd2RzYWxlICovCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgaW52ZXN0ZWRBbW91bnRPZjsKCiAgLyoqIEhvdyBtdWNoIHRva2VucyB0aGlzIGNyb3dkc2FsZSBoYXMgY3JlZGl0ZWQgZm9yIGVhY2ggaW52ZXN0b3IgYWRkcmVzcyAqLwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHRva2VuQW1vdW50T2Y7CgogIC8qKiBTdGF0ZSBtYWNoaW5lCiAgICoKICAgKiAtIFByZWZ1bmRpbmc6IFdlIGhhdmUgbm90IHN0YXJ0ZWQgeWV0CiAgICogLSBGdW5kaW5nOiBBY3RpdmUgY3Jvd2RzYWxlCiAgICogLSBTdWNjZXNzOiBNaW5pbXVtIGZ1bmRpbmcgZ29hbCByZWFjaGVkCiAgICogLSBGYWlsdXJlOiBNaW5pbXVtIGZ1bmRpbmcgZ29hbCBub3QgcmVhY2hlZCBiZWZvcmUgZW5kaW5nIHRpbWUKICAgKiAtIEZpbmFsaXplZDogVGhlIGZpbmFsaXplZCBoYXMgYmVlbiBjYWxsZWQgYW5kIHN1Y2Nlc2Z1bGx5IGV4ZWN1dGVkCiAgICogLSBSZWZ1bmRpbmc6IFJlZnVuZHMgYXJlIGxvYWRlZCBvbiB0aGUgY29udHJhY3QgZm9yIHJlY2xhaW0uCiAgICovCiAgZW51bSBTdGF0ZXtVbmtub3duLCBQcmVGdW5kaW5nLCBGdW5kaW5nLCBTdWNjZXNzLCBGYWlsdXJlLCBGaW5hbGl6ZWQsIFJlZnVuZGluZ30KCiAgZXZlbnQgSW52ZXN0ZWQoYWRkcmVzcyBpbnZlc3RvciwgdWludCB3ZWlBbW91bnQsIHVpbnQgdG9rZW5BbW91bnQpOwogIGV2ZW50IFJlZnVuZChhZGRyZXNzIGludmVzdG9yLCB1aW50IHdlaUFtb3VudCk7CgogIGZ1bmN0aW9uIENyb3dkc2FsZShhZGRyZXNzIF90b2tlbiwgYWRkcmVzcyBfcHJpY2luZ1N0cmF0ZWd5LCBhZGRyZXNzIF9tdWx0aXNpZ1dhbGxldCwgYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQgX3N0YXJ0LCB1aW50IF9lbmQsIHVpbnQgX21pbmltdW1GdW5kaW5nR29hbCkgewoKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKCiAgICB0b2tlbiA9IEVSQzIwKF90b2tlbik7CgogICAgcHJpY2luZ1N0cmF0ZWd5ID0gUHJpY2luZ1N0cmF0ZWd5KF9wcmljaW5nU3RyYXRlZ3kpOwoKICAgIG11bHRpc2lnV2FsbGV0ID0gX211bHRpc2lnV2FsbGV0OwogICAgaWYobXVsdGlzaWdXYWxsZXQgPT0gMCkgewogICAgICAgIHRocm93OwogICAgfQoKICAgIC8vIFRPRE86IHJlbW92ZSBiZW5lZmljaWFyeSBmcm9tIHRoZSBiYXNlIGNsYXNzCiAgICBiZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgIGlmKGJlbmVmaWNpYXJ5ID09IDApIHsKICAgICAgICB0aHJvdzsKICAgIH0KCiAgICBpZihfc3RhcnQgPT0gMCkgewogICAgICAgIHRocm93OwogICAgfQoKICAgIHN0YXJ0c0F0ID0gX3N0YXJ0OwoKICAgIGlmKF9lbmQgPT0gMCkgewogICAgICAgIHRocm93OwogICAgfQoKICAgIGVuZHNBdCA9IF9lbmQ7CgogICAgLy8gRG9uJ3QgbWVzcyB0aGUgZGF0ZXMKICAgIGlmKHN0YXJ0c0F0ID49IGVuZHNBdCkgewogICAgICAgIHRocm93OwogICAgfQoKICAgIC8vIE1pbmltdW0gZnVuZGluZyBnb2FsIGNhbiBiZSB6ZXJvCiAgICBtaW5pbXVtRnVuZGluZ0dvYWwgPSBfbWluaW11bUZ1bmRpbmdHb2FsOwogIH0KCiAgLyoqCiAgICogRG9uJ3QgZXhwZWN0IHRvIGp1c3Qgc2VuZCBpbiBtb25leSBhbmQgZ2V0IHRva2Vucy4KICAgKi8KICBmdW5jdGlvbigpIHBheWFibGUgewogICAgdGhyb3c7CiAgfQoKICAvKioKICAgKiBNYWtlIGFuIGludmVzdG1lbnQuCiAgICoKICAgKiBDcm93ZHNhbGUgbXVzdCBiZSBydW5uaW5nIGZvciBvbmUgdG8gaW52ZXN0LgogICAqIFdlIG11c3QgaGF2ZSBub3QgcHJlc3NlZCB0aGUgZW1lcmdlbmN5IGJyYWtlLgogICAqCiAgICoKICAgKi8KICBmdW5jdGlvbiBpbnZlc3QoYWRkcmVzcyByZWNlaXZlcikgaW5TdGF0ZShTdGF0ZS5GdW5kaW5nKSBzdG9wSW5FbWVyZ2VuY3kgcGF5YWJsZSBwdWJsaWMgewoKICAgIHVpbnQgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwogICAgdWludCB0b2tlbkFtb3VudCA9IHByaWNpbmdTdHJhdGVneS5jYWxjdWxhdGVQcmljZSh3ZWlBbW91bnQsIHdlaVJhaXNlZCwgdG9rZW5zU29sZCk7CgogICAgaWYodG9rZW5BbW91bnQgPT0gMCkgewogICAgICAvLyBEdXN0IHRyYW5zYWN0aW9uCiAgICAgIHRocm93OwogICAgfQoKICAgIGlmKGludmVzdGVkQW1vdW50T2ZbcmVjZWl2ZXJdICE9IDApIHsKICAgICAgIC8vIEEgbmV3IGludmVzdG9yCiAgICAgICBpbnZlc3RvckNvdW50Kys7CiAgICB9CgogICAgLy8gVXBkYXRlIGludmVzdG9yCiAgICBpbnZlc3RlZEFtb3VudE9mW3JlY2VpdmVyXSA9IGludmVzdGVkQW1vdW50T2ZbcmVjZWl2ZXJdLnBsdXMod2VpQW1vdW50KTsKICAgIHRva2VuQW1vdW50T2ZbcmVjZWl2ZXJdID0gdG9rZW5BbW91bnRPZltyZWNlaXZlcl0ucGx1cyh0b2tlbkFtb3VudCk7CgogICAgLy8gVXBkYXRlIHRvdGFscwogICAgd2VpUmFpc2VkID0gd2VpUmFpc2VkLnBsdXMod2VpQW1vdW50KTsKICAgIHRva2Vuc1NvbGQgPSB0b2tlbnNTb2xkLnBsdXModG9rZW5BbW91bnQpOwoKICAgIC8vIENoZWNrIHRoYXQgd2UgZGlkIG5vdCBidXN0IHRoZSBjYXAKICAgIGlmKGlzQnJlYWtpbmdDYXAodG9rZW5BbW91bnQsIHdlaUFtb3VudCwgd2VpUmFpc2VkLCB0b2tlbnNTb2xkKSkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICBhc3NpZ25Ub2tlbnMocmVjZWl2ZXIsIHRva2VuQW1vdW50KTsKCiAgICAvLyBQb2NrZXQgdGhlIG1vbmV5CiAgICBpZighbXVsdGlzaWdXYWxsZXQuc2VuZCh3ZWlBbW91bnQpKSB0aHJvdzsKCiAgICAvLyBUZWxsIHVzIGludmVzdCB3YXMgc3VjY2VzcwogICAgSW52ZXN0ZWQocmVjZWl2ZXIsIHdlaUFtb3VudCwgdG9rZW5BbW91bnQpOwogIH0KCiAgLyoqCiAgICogVGhlIGJhc2ljIGVudHJ5IHBvaW50IHRvIHBhcnRpY2lwYXRlIHRoZSBjcm93ZHNhbGUgcHJvY2Vzcy4KICAgKgogICAqIFBheSBmb3IgZnVuZGluZywgZ2V0IGludmVzdGVkIHRva2VucyBiYWNrIGluIHRoZSBzZW5kZXIgYWRkcmVzcy4KICAgKi8KICBmdW5jdGlvbiBidXkoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICBpbnZlc3QobXNnLnNlbmRlcik7CiAgfQoKICAvKioKICAgKiBGaW5hbGl6ZSBhIHN1Y2NjZXNmdWwgY3Jvd2RzYWxlLgogICAqCiAgICogQW55Ym9keSBjYW4gY2FsbCB0byB0cmlnZ2VyIHRoZSBlbmQgb2YgdGhlIGNyb3dkc2FsZS4KICAgKgogICAqIENhbGwgdGhlIGNvbnRyYWN0IHRoYXQgcHJvdmlkZXMgcG9zdC1jcm93ZHNhbGUgYWN0aW9ucywgbGlrZSByZWxlYXNpbmcgdGhlIHRva2Vucy4KICAgKi8KICBmdW5jdGlvbiBmaW5hbGl6ZSgpIHB1YmxpYyBpblN0YXRlKFN0YXRlLlN1Y2Nlc3MpIHN0b3BJbkVtZXJnZW5jeSB7CgogICAgLy8gQWxyZWFkeSBmaW5hbGl6ZWQKICAgIGlmKGZpbmFsaXplZCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICAvLyBGaW5hbGl6aW5nIGlzIG9wdGlvbmFsLiBXZSBvbmx5IGNhbGwgaXQgaWYgd2UgYXJlIGdpdmVuIGEgZmluYWxpemluZyBhZ2VudC4KICAgIGlmKGFkZHJlc3MoZmluYWxpemVBZ2VudCkgIT0gMCkgewogICAgICBmaW5hbGl6ZUFnZW50LmZpbmFsaXplQ3Jvd2RzYWxlKCk7CiAgICB9CgogICAgZmluYWxpemVkID0gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIHNldEZpbmFsaXplQWdlbnQoRmluYWxpemVBZ2VudCBhZGRyKSBvbmx5T3duZXIgaW5TdGF0ZShTdGF0ZS5QcmVGdW5kaW5nKSB7CiAgICBmaW5hbGl6ZUFnZW50ID0gYWRkcjsKCiAgICAvLyBEb24ndCBhbGxvdyBzZXR0aW5nIGJhZCBhZ2VudAogICAgaWYoIWZpbmFsaXplQWdlbnQuaXNGaW5hbGl6ZUFnZW50KCkpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgfQoKICAvKioKICAgKiBBbGxvdyBsb2FkIHJlZnVuZHMgYmFjayBvbiB0aGUgY29udHJhY3QgZm9yIHRoZSByZWZ1bmRpbmcuCiAgICoKICAgKiBUaGUgdGVhbSBjYW4gdHJhbnNmZXIgdGhlIGZ1bmRzIGJhY2sgb24gdGhlIHNtYXJ0IGNvbnRyYWN0IGluIHRoZSBjYXNlIHRoZSBtaW5pbXVtIGdvYWwgd2FzIG5vdCByZWFjaGVkLi4KICAgKi8KICBmdW5jdGlvbiBsb2FkUmVmdW5kKCkgcHVibGljIHBheWFibGUgaW5TdGF0ZShTdGF0ZS5GYWlsdXJlKSB7CiAgICBpZihtc2cudmFsdWUgPT0gMCkgdGhyb3c7CiAgICBsb2FkZWRSZWZ1bmQgPSBsb2FkZWRSZWZ1bmQucGx1cyhtc2cudmFsdWUpOwogIH0KCiAgLyoqCiAgICogSW52ZXN0b3JzIGNhbiBjbGFpbSByZWZ1bmQuCiAgICovCiAgZnVuY3Rpb24gcmVmdW5kKCkgcHVibGljIGluU3RhdGUoU3RhdGUuUmVmdW5kaW5nKSB7CiAgICB1aW50MjU2IHdlaVZhbHVlID0gaW52ZXN0ZWRBbW91bnRPZlttc2cuc2VuZGVyXTsKICAgIGlmICh3ZWlWYWx1ZSA9PSAwKSB0aHJvdzsKICAgIGludmVzdGVkQW1vdW50T2ZbbXNnLnNlbmRlcl0gPSAwOwogICAgd2VpUmVmdW5kZWQgPSB3ZWlSZWZ1bmRlZC5wbHVzKHdlaVZhbHVlKTsKICAgIFJlZnVuZChtc2cuc2VuZGVyLCB3ZWlWYWx1ZSk7CiAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZCh3ZWlWYWx1ZSkpIHRocm93OwogIH0KCiAgLyoqCiAgICogQHJldHVybiB0cnVlIGlmIHRoZSBjcm93ZHNhbGUgaGFzIHJhaXNlZCBlbm91Z2ggbW9uZXkgdG8gYmUgYSBzdWNjZXMKICAgKi8KICBmdW5jdGlvbiBpc01pbmltdW1Hb2FsUmVhY2hlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sIHJlYWNoZWQpIHsKICAgIHJldHVybiB3ZWlSYWlzZWQgPj0gbWluaW11bUZ1bmRpbmdHb2FsOwogIH0KCiAgLyoqCiAgICogQ3Jvd2RmdW5kIHN0YXRlIG1hY2hpbmUgbWFuYWdlbWVudC4KICAgKgogICAqIFdlIG1ha2UgaXQgYSBmdW5jdGlvbiBhbmQgZG8gbm90IGFzc2lnbiB0aGUgcmVzdWx0IHRvIGEgdmFyaWFibGUsIHNvIHRoZXJlIGlzIG5vIGNoYW5jZSBvZiB0aGUgdmFyaWFibGUgYmVpbmcgc3RhbGUuCiAgICovCiAgZnVuY3Rpb24gZ2V0U3RhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoU3RhdGUpIHsKICAgIGlmKGZpbmFsaXplZCkgcmV0dXJuIFN0YXRlLkZpbmFsaXplZDsKICAgIGVsc2UgaWYgKGJsb2NrLnRpbWVzdGFtcCA8IHN0YXJ0c0F0KSByZXR1cm4gU3RhdGUuUHJlRnVuZGluZzsKICAgIGVsc2UgaWYgKGJsb2NrLnRpbWVzdGFtcCA8PSBlbmRzQXQgJiYgIWlzQ3Jvd2RzYWxlRnVsbCgpKSByZXR1cm4gU3RhdGUuRnVuZGluZzsKICAgIGVsc2UgaWYgKGlzTWluaW11bUdvYWxSZWFjaGVkKCkpIHJldHVybiBTdGF0ZS5TdWNjZXNzOwogICAgZWxzZSBpZiAoIWlzTWluaW11bUdvYWxSZWFjaGVkKCkgJiYgd2VpUmFpc2VkID4gMCAmJiBsb2FkZWRSZWZ1bmQgPj0gd2VpUmFpc2VkKSByZXR1cm4gU3RhdGUuUmVmdW5kaW5nOwogICAgZWxzZSByZXR1cm4gU3RhdGUuRmFpbHVyZTsKICB9CgogIC8vCiAgLy8gTW9kaWZpZXJzCiAgLy8KCiAgLyoqIE1vZGlmaWVkIGFsbG93aW5nIGV4ZWN1dGlvbiBvbmx5IGlmIHRoZSBjcm93ZHNhbGUgaXMgY3VycmVudGx5IHJ1bm5pbmcuICAqLwogIG1vZGlmaWVyIGluU3RhdGUoU3RhdGUgc3RhdGUpIHsKICAgIGlmKGdldFN0YXRlKCkgIT0gc3RhdGUpIHRocm93OwogICAgXzsKICB9CgogIC8vCiAgLy8gQWJzdHJhY3QgZnVuY3Rpb25zCiAgLy8KCiAgLyoqCiAgICogQ2hlY2sgaWYgdGhlIGN1cnJlbnQgaW52ZXN0ZWQgYnJlYWtzIG91ciBjYXAgcnVsZXMuCiAgICoKICAgKgogICAqIFRoZSBjaGlsZCBjb250cmFjdCBtdXN0IGRlZmluZSB0aGVpciBvd24gY2FwIHNldHRpbmcgcnVsZXMuCiAgICogV2UgYWxsb3cgYSBsb3Qgb2YgZmxleGliaWxpdHkgdGhyb3VnaCBkaWZmZXJlbnQgY2FwcGluZyBzdHJhdGVnaWVzIChFVEgsIHRva2VuIGNvdW50KQogICAqIENhbGxlZCBmcm9tIGludmVzdCgpLgogICAqCiAgICogQHBhcmFtIHdlaUFtb3VudCBUaGUgYW1vdW50IG9mIHdlaSB0aGUgaW52ZXN0b3IgdHJpZXMgdG8gaW52ZXN0IGluIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uCiAgICogQHBhcmFtIHRva2VuQW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHdlIHRyeSB0byBnaXZlIHRvIHRoZSBpbnZlc3RvciBpbiB0aGUgY3VycmVudCB0cmFuc2FjdGlvbgogICAqIEBwYXJhbSB3ZWlSYWlzZWRUb3RhbCBXaGF0IHdvdWxkIGJlIG91ciB0b3RhbCByYWlzZWQgYmFsYW5jZSBhZnRlciB0aGlzIHRyYW5zYWN0aW9uCiAgICogQHBhcmFtIHRva2Vuc1NvbGRUb3RhbCBXaGF0IHdvdWxkIGJlIG91ciB0b3RhbCBzb2xkIHRva2VucyBjb3VudGFmdGVyIHRoaXMgdHJhbnNhY3Rpb24KICAgKgogICAqIEByZXR1cm4gdHJ1ZSBpZiB0YWtpbmcgdGhpcyBpbnZlc3RtZW50IHdvdWxkIGJyZWFrIG91ciBjYXAgcnVsZXMKICAgKi8KICBmdW5jdGlvbiBpc0JyZWFraW5nQ2FwKHVpbnQgd2VpQW1vdW50LCB1aW50IHRva2VuQW1vdW50LCB1aW50IHdlaVJhaXNlZFRvdGFsLCB1aW50IHRva2Vuc1NvbGRUb3RhbCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBsaW1pdEJyb2tlbik7CgogIC8qKgogICAqIENoZWNrIGlmIHRoZSBjdXJyZW50IGNyb3dkc2FsZSBpcyBmdWxsIGFuZCB3ZSBjYW4gbm8gbG9uZ2VyIHNlbGwgYW55IHRva2Vucy4KICAgKi8KICBmdW5jdGlvbiBpc0Nyb3dkc2FsZUZ1bGwoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7CgogIC8qKgogICAqIENyZWF0ZSBuZXcgdG9rZW5zIG9yIHRyYW5zZmVyIGlzc3VlZCB0b2tlbnMgdG8gdGhlIGludmVzdG9yIGRlcGVuZGluZyBvbiB0aGUgY2FwIG1vZGVsLgogICAqLwogIGZ1bmN0aW9uIGFzc2lnblRva2VucyhhZGRyZXNzIHJlY2VpdmVyLCB1aW50IHRva2VuQW1vdW50KSBwcml2YXRlOwp9CgoKCi8qKgogKiBDb2xsZWN0IGZ1bmRzIGZyb20gcHJlc2FsZSBpbnZlc3RvcnMgdG8gYmUgc2VuZCB0byB0aGUgY3Jvd2RzYWxlIHNtYXJ0IGNvbnRyYWN0IGxhdGVyLgogKgogKiAtIENvbGxlY3QgZnVuZHMgZnJvbSBwcmUtc2FsZSBpbnZlc3RvcnMKICogLSBTZW5kIGZ1bmRzIHRvIHRoZSBjcm93ZHNhbGUgd2hlbiBpdCBvcGVucwogKiAtIEFsbG93IG93bmVyIHRvIHNldCB0aGUgY3Jvd2RzYWxlCiAqIC0gSGF2ZSByZWZ1bmQgYWZ0ZXIgWCBkYXlzIGFzIGEgc2FmZXR5IGhhdGNoIGlmIHRoZSBjcm93ZHNhbGUgZG9lc24ndCBtYXRlcmlsaXplCiAqCiAqLwpjb250cmFjdCBQcmVzYWxlRnVuZENvbGxlY3RvciBpcyBPd25hYmxlIHsKCiAgdXNpbmcgU2FmZU1hdGhMaWIgZm9yIHVpbnQ7CgogIC8qKiBIb3cgbWFueSBpbnZlc3RvcnMgd2hlbiBjYW4gY2FycnkgcGVyIGEgc2luZ2xlIGNvbnRyYWN0ICovCiAgdWludCBwdWJsaWMgTUFYX0lOVkVTVE9SUyA9IDMyOwoKICAvKiogSG93IG1hbnkgaW52ZXN0b3JzIHdlIGhhdmUgbm93ICovCiAgdWludCBwdWJsaWMgaW52ZXN0b3JDb3VudDsKCiAgLyoqIFdobyBhcmUgb3VyIGludmVzdG9ycyAoaXRlcmFibGUpICovCiAgYWRkcmVzc1tdIHB1YmxpYyBpbnZlc3RvcnM7CgogIC8qKiBIb3cgbXVjaCB0aGV5IGhhdmUgaW52ZXN0ZWQgKi8KICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGJhbGFuY2VzOwoKICAvKiogV2hlbiBvdXIgcmVmdW5kIGZyZWV6ZSBpcyBvdmVyIChVTklUIHRpbWVzdGFtcCkgKi8KICB1aW50IHB1YmxpYyBmcmVlemVFbmRzQXQ7CgogIC8qKiBXaGF0IGlzIHRoZSBtaW5pbXVtIGJ1eSBpbiAqLwogIHVpbnQgcHVibGljIHdlaU1pbmltdW1MaW1pdDsKCiAgLyoqIEhhdmUgd2UgYmVndW4gdG8gbW92ZSBmdW5kcyAqLwogIGJvb2wgcHVibGljIG1vdmluZzsKCiAgLyoqIE91ciBJQ08gY29udHJhY3Qgd2hlcmUgd2Ugd2lsbCBtb3ZlIHRoZSBmdW5kcyAqLwogIENyb3dkc2FsZSBwdWJsaWMgY3Jvd2RzYWxlOwoKICBldmVudCBJbnZlc3RlZChhZGRyZXNzIGludmVzdG9yLCB1aW50IHZhbHVlKTsKICBldmVudCBSZWZ1bmRlZChhZGRyZXNzIGludmVzdG9yLCB1aW50IHZhbHVlKTsKCiAgLyoqCiAgICogQ3JlYXRlIHByZXNhbGUgY29udHJhY3Qgd2hlcmUgbG9jayB1cCBwZXJpb2QgaXMgZ2l2ZW4gZGF5cwogICAqLwogIGZ1bmN0aW9uIFByZXNhbGVGdW5kQ29sbGVjdG9yKGFkZHJlc3MgX293bmVyLCB1aW50IF9mcmVlemVFbmRzQXQsIHVpbnQgX3dlaU1pbmltdW1MaW1pdCkgewoKICAgIG93bmVyID0gX293bmVyOwoKICAgIC8vIEdpdmUgYXJndW1lbnQKICAgIGlmKF9mcmVlemVFbmRzQXQgPT0gMCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICAvLyBHaXZlIGFyZ3VtZW50CiAgICBpZihfd2VpTWluaW11bUxpbWl0ID09IDApIHsKICAgICAgdGhyb3c7CiAgICB9CgogICAgd2VpTWluaW11bUxpbWl0ID0gX3dlaU1pbmltdW1MaW1pdDsKICAgIGZyZWV6ZUVuZHNBdCA9IF9mcmVlemVFbmRzQXQ7CiAgfQoKICAvKioKICAgKiBQYXJ0aWNpcGF0ZSB0byBhIHByZXNhbGUuCiAgICovCiAgZnVuY3Rpb24gaW52ZXN0KCkgcHVibGljIHBheWFibGUgewoKICAgIC8vIENhbm5vdCBpbnZlc3QgYW55bW9yZSB0aHJvdWdoIGNyb3dkc2FsZSB3aGVuIG1vdmluZyBoYXMgYmVndW4KICAgIGlmKG1vdmluZykgdGhyb3c7CgogICAgYWRkcmVzcyBpbnZlc3RvciA9IG1zZy5zZW5kZXI7CgogICAgYm9vbCBleGlzdGluZyA9IGJhbGFuY2VzW2ludmVzdG9yXSA+IDA7CgogICAgYmFsYW5jZXNbaW52ZXN0b3JdID0gYmFsYW5jZXNbaW52ZXN0b3JdLnBsdXMobXNnLnZhbHVlKTsKCiAgICAvLyBOZWVkIHRvIGZ1bGZpbGwgbWluaW11bSBsaW1pdAogICAgaWYoYmFsYW5jZXNbaW52ZXN0b3JdIDwgd2VpTWluaW11bUxpbWl0KSB7CiAgICAgIHRocm93OwogICAgfQoKICAgIC8vIFRoaXMgaXMgYSBuZXcgaW52ZXN0b3IKICAgIGlmKCFleGlzdGluZykgewoKICAgICAgLy8gTGltaXQgbnVtYmVyIG9mIGludmVzdG9ycyB0byBwcmV2ZW50IHRvbyBsb25nIGxvb3BzCiAgICAgIGlmKGludmVzdG9yQ291bnQgPj0gTUFYX0lOVkVTVE9SUykgdGhyb3c7CgogICAgICBpbnZlc3RvcnMucHVzaChpbnZlc3Rvcik7CiAgICAgIGludmVzdG9yQ291bnQrKzsKICAgIH0KCiAgICBJbnZlc3RlZChpbnZlc3RvciwgbXNnLnZhbHVlKTsKICB9CgogIC8qKgogICAqIExvYWQgZnVuZHMgdG8gdGhlIGNyb3dkc2FsZSBmb3IgYSBzaW5nbGUgaW52ZXN0b3IuCiAgICovCiAgZnVuY3Rpb24gcGFyY2lwYXRlQ3Jvd2RzYWxlSW52ZXN0b3IoYWRkcmVzcyBpbnZlc3RvcikgcHVibGljIHsKCiAgICAvLyBDcm93ZHNhbGUgbm90IHlldCBzZXQKICAgIGlmKGFkZHJlc3MoY3Jvd2RzYWxlKSA9PSAwKSB0aHJvdzsKCiAgICBtb3ZpbmcgPSB0cnVlOwoKICAgIGlmKGJhbGFuY2VzW2ludmVzdG9yXSA+IDApIHsKICAgICAgdWludCBhbW91bnQgPSBiYWxhbmNlc1tpbnZlc3Rvcl07CiAgICAgIGRlbGV0ZSBiYWxhbmNlc1tpbnZlc3Rvcl07CiAgICAgIGNyb3dkc2FsZS5pbnZlc3QudmFsdWUoYW1vdW50KShpbnZlc3Rvcik7CiAgICB9CiAgfQoKICAvKioKICAgKiBMb2FkIGZ1bmRzIHRvIHRoZSBjcm93ZHNhbGUgZm9yIGFsbCBpbnZlc3Rvci4KICAgKgogICAqLwogIGZ1bmN0aW9uIHBhcmNpcGF0ZUNyb3dkc2FsZUFsbCgpIHB1YmxpYyB7CgogICAgLy8gV2UgbWlnaHQgaGl0IGEgbWF4IGdhcyBsaW1pdCBpbiB0aGlzIGxvb3AsCiAgICAvLyBhbmQgaW4gdGhpcyBjYXNlIHlvdSBjYW4gc2ltcGx5IGNhbGwgcGFyY2lwYXRlQ3Jvd2RzYWxlSW52ZXN0b3IoKSBmb3IgYWxsIGludmVzdG9ycwogICAgZm9yKHVpbnQgaT0wOyBpPGludmVzdG9ycy5sZW5ndGg7IGkrKykgewogICAgICAgcGFyY2lwYXRlQ3Jvd2RzYWxlSW52ZXN0b3IoaW52ZXN0b3JzW2ldKTsKICAgIH0KICB9CgogIC8qKgogICAqIElDTyBuZXZlciBoYXBwZW5lZC4gQWxsb3cgcmVmdW5kLgogICAqLwogIGZ1bmN0aW9uIHJlZnVuZCgpIHsKCiAgICAvLyBUcnlpbmcgdG8gYXNrIHJlZnVuZCB0b28gc29vbgogICAgaWYobm93IDwgZnJlZXplRW5kc0F0KSB0aHJvdzsKCiAgICAvLyBXZSBoYXZlIHN0YXJ0ZWQgdG8gbW92ZSBmdW5kcwogICAgbW92aW5nID0gdHJ1ZTsKCiAgICBhZGRyZXNzIGludmVzdG9yID0gbXNnLnNlbmRlcjsKICAgIGlmKGJhbGFuY2VzW2ludmVzdG9yXSA9PSAwKSB0aHJvdzsKICAgIHVpbnQgYW1vdW50ID0gYmFsYW5jZXNbaW52ZXN0b3JdOwogICAgZGVsZXRlIGJhbGFuY2VzW2ludmVzdG9yXTsKICAgIGlmKCFpbnZlc3Rvci5zZW5kKGFtb3VudCkpIHRocm93OwogICAgUmVmdW5kZWQoaW52ZXN0b3IsIGFtb3VudCk7CiAgfQoKICAvKioKICAgKiBTZXQgdGhlIHRhcmdldCBjcm93ZHNhbGUgd2hlcmUgd2Ugd2lsbCBtb3ZlIHByZXNhbGUgZnVuZHMgd2hlbiB0aGUgY3Jvd2RzYWxlIG9wZW5zLgogICAqLwogIGZ1bmN0aW9uIHNldENyb3dkc2FsZShDcm93ZHNhbGUgX2Nyb3dkc2FsZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgY3Jvd2RzYWxlID0gX2Nyb3dkc2FsZTsKICB9CgogIC8qKiBFeHBsaWNpdGx5IGNhbGwgZnVuY3Rpb24gZnJvbSB5b3VyIHdhbGxldC4gKi8KICBmdW5jdGlvbigpIHBheWFibGUgewogICAgdGhyb3c7CiAgfQp9'.
	

]
