Class {
	#name : #SRT13bb437ceb28d37cf1a1f711112d9b111f0a11cb,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT13bb437ceb28d37cf1a1f711112d9b111f0a11cb >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBGaWxlOiBjb250cmFjdHMvUmVjZWl2aW5nQ29udHJhY3RDYWxsYmFjay5zb2wKCmNvbnRyYWN0IFJlY2VpdmluZ0NvbnRyYWN0Q2FsbGJhY2sgewoKICBmdW5jdGlvbiB0b2tlbkZhbGxiYWNrKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKSBwdWJsaWM7Cgp9CgovLyBGaWxlOiBjb250cmFjdHMvb3duZXJzaGlwL093bmFibGUuc29sCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgovLyBGaWxlOiBjb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy90b2tlbi9FUkMyMEJhc2ljLnNvbAoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLy8gRmlsZTogY29udHJhY3RzL3Rva2VuL0Jhc2ljVG9rZW4uc29sCgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCi8vIEZpbGU6IGNvbnRyYWN0cy90b2tlbi9FUkMyMC5zb2wKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy90b2tlbi9TdGFuZGFyZFRva2VuLnNvbAoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqCiAgICogQmV3YXJlIHRoYXQgY2hhbmdpbmcgYW4gYWxsb3dhbmNlIHdpdGggdGhpcyBtZXRob2QgYnJpbmdzIHRoZSByaXNrIHRoYXQgc29tZW9uZSBtYXkgdXNlIGJvdGggdGhlIG9sZAogICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgKiByYWNlIGNvbmRpdGlvbiBpcyB0byBmaXJzdCByZWR1Y2UgdGhlIHNwZW5kZXIncyBhbGxvd2FuY2UgdG8gMCBhbmQgc2V0IHRoZSBkZXNpcmVkIHZhbHVlIGFmdGVyd2FyZHM6CiAgICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIC8qKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICovCiAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgfQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9MaWdodGNhc2hDcnlwdG9Ub2tlbi5zb2wKCmNvbnRyYWN0IExpZ2h0Y2FzaENyeXB0b1Rva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewoKICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwoKICBldmVudCBNaW50RmluaXNoZWQoKTsKCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gJ0xpZ2h0Y2FzaCBjcnlwdG8nOwoKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICdMQ1NIJzsKCiAgdWludDMyIHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCiAgYWRkcmVzcyBwdWJsaWMgc2FsZUFnZW50OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGF1dGhvcml6ZWQ7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSAgcHVibGljIHJlZ2lzdGVyZWRDYWxsYmFja3M7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBwcm9jZXNzQ2FsbGJhY2soc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpLCBtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHByb2Nlc3NDYWxsYmFjayhzdXBlci50cmFuc2ZlckZyb20oZnJvbSwgdG8sIHZhbHVlKSwgZnJvbSwgdG8sIHZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIHNldFNhbGVBZ2VudChhZGRyZXNzIG5ld1NhbGVBZ2VudCkgcHVibGljIHsKICAgIHJlcXVpcmUoc2FsZUFnZW50ID09IG1zZy5zZW5kZXIgfHwgb3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICBzYWxlQWdlbnQgPSBuZXdTYWxlQWdlbnQ7CiAgfQoKICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHNhbGVBZ2VudCk7CiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgIE1pbnQoYWRkcmVzcygwKSwgX2Ftb3VudCk7CiAgICBUcmFuc2ZlcihhZGRyZXNzKDApLCBfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSBzYWxlQWdlbnQpOwogICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgIE1pbnRGaW5pc2hlZCgpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiByZWdpc3RlckNhbGxiYWNrKGFkZHJlc3MgY2FsbGJhY2spIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVnaXN0ZXJlZENhbGxiYWNrc1tjYWxsYmFja10gPSB0cnVlOwogIH0KCiAgZnVuY3Rpb24gZGVyZWdpc3RlckNhbGxiYWNrKGFkZHJlc3MgY2FsbGJhY2spIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVnaXN0ZXJlZENhbGxiYWNrc1tjYWxsYmFja10gPSBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NDYWxsYmFjayhib29sIHJlc3VsdCwgYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBpbnRlcm5hbCByZXR1cm5zKGJvb2wpIHsKICAgIGlmIChyZXN1bHQgJiYgcmVnaXN0ZXJlZENhbGxiYWNrc1t0b10pIHsKICAgICAgUmVjZWl2aW5nQ29udHJhY3RDYWxsYmFjayB0YXJnZXRDYWxsYmFjayA9IFJlY2VpdmluZ0NvbnRyYWN0Q2FsbGJhY2sodG8pOwogICAgICB0YXJnZXRDYWxsYmFjay50b2tlbkZhbGxiYWNrKGZyb20sIHZhbHVlKTsKICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfQoKfQoKLy8gRmlsZTogY29udHJhY3RzL0NvbW1vblRva2VuRXZlbnQuc29sCgpjb250cmFjdCBDb21tb25Ub2tlbkV2ZW50IGlzIE93bmFibGUgewoKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgdWludCBwdWJsaWMgY29uc3RhbnQgUEVSQ0VOVF9SQVRFID0gMTAwOwoKICB1aW50IHB1YmxpYyBwcmljZTsKCiAgdWludCBwdWJsaWMgc3RhcnQ7CgogIHVpbnQgcHVibGljIHBlcmlvZDsKCiAgdWludCBwdWJsaWMgbWluUHVyY2hhc2VMaW1pdDsKCiAgdWludCBwdWJsaWMgbWludGVkOwoKICB1aW50IHB1YmxpYyBoYXJkY2FwOwoKICB1aW50IHB1YmxpYyBpbnZlc3RlZDsKCiAgdWludCBwdWJsaWMgcmVmZXJyZXJQZXJjZW50OwoKICB1aW50IHB1YmxpYyBtYXhSZWZlcnJlclRva2VuczsKCiAgYWRkcmVzcyBwdWJsaWMgZGlyZWN0TWludEFnZW50OwoKICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CgogIExpZ2h0Y2FzaENyeXB0b1Rva2VuIHB1YmxpYyB0b2tlbjsKCiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIHJlcXVpcmUobm93ID49IHN0YXJ0ICYmIG5vdyA8IGxhc3RTYWxlRGF0ZSgpICYmIG1zZy52YWx1ZSA+PSBtaW5QdXJjaGFzZUxpbWl0ICYmIG1pbnRlZCA8IGhhcmRjYXApOwogICAgXzsKICB9CgogIG1vZGlmaWVyIG9ubHlEaXJlY3RNaW50QWdlbnRPck93bmVyKCkgewogICAgcmVxdWlyZShkaXJlY3RNaW50QWdlbnQgPT0gbXNnLnNlbmRlciB8fCBvd25lciA9PSBtc2cuc2VuZGVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBzZW5kUmVmZXJyZXJUb2tlbnModWludCB0b2tlbnMpIGludGVybmFsIHsKICAgIGlmIChtc2cuZGF0YS5sZW5ndGggPT0gMjApIHsKICAgICAgYWRkcmVzcyByZWZlcnJlciA9IGJ5dGVzVG9BZGRyZXMoYnl0ZXMobXNnLmRhdGEpKTsKICAgICAgcmVxdWlyZShyZWZlcnJlciAhPSBhZGRyZXNzKHRva2VuKSAmJiByZWZlcnJlciAhPSBtc2cuc2VuZGVyKTsKICAgICAgdWludCByZWZlcnJlclRva2VucyA9IHRva2Vucy5tdWwocmVmZXJyZXJQZXJjZW50KS5kaXYoUEVSQ0VOVF9SQVRFKTsKICAgICAgaWYocmVmZXJyZXJUb2tlbnMgPiBtYXhSZWZlcnJlclRva2VucykgewogICAgICAgIHJlZmVycmVyVG9rZW5zID0gbWF4UmVmZXJyZXJUb2tlbnM7CiAgICAgIH0KICAgICAgbWludEFuZFNlbmRUb2tlbnMocmVmZXJyZXIsIHJlZmVycmVyVG9rZW5zKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGJ5dGVzVG9BZGRyZXMoYnl0ZXMgc291cmNlKSBpbnRlcm5hbCBwdXJlIHJldHVybnMoYWRkcmVzcykgewogICAgdWludCByZXN1bHQ7CiAgICB1aW50IG11bCA9IDE7CiAgICBmb3IgKHVpbnQgaSA9IDIwOyBpID4gMDsgaS0tKSB7CiAgICAgIHJlc3VsdCArPSB1aW50OChzb3VyY2VbaS0xXSkqbXVsOwogICAgICBtdWwgPSBtdWwqMjU2OwogICAgfQogICAgcmV0dXJuIGFkZHJlc3MocmVzdWx0KTsKICB9CgogIGZ1bmN0aW9uIHNldE1heFJlZmVycmVyVG9rZW5zKHVpbnQgbmV3TWF4UmVmZXJyZXJUb2tlbnMpIHB1YmxpYyBvbmx5T3duZXIgewogICAgbWF4UmVmZXJyZXJUb2tlbnMgPSBuZXdNYXhSZWZlcnJlclRva2VuczsKICB9CgogIGZ1bmN0aW9uIHNldEhhcmRjYXAodWludCBuZXdIYXJkY2FwKSBwdWJsaWMgb25seU93bmVyIHsKICAgIGhhcmRjYXAgPSBuZXdIYXJkY2FwOwogIH0KCiAgZnVuY3Rpb24gc2V0VG9rZW4oYWRkcmVzcyBuZXdUb2tlbikgcHVibGljIG9ubHlPd25lciB7CiAgICB0b2tlbiA9IExpZ2h0Y2FzaENyeXB0b1Rva2VuKG5ld1Rva2VuKTsKICB9CgogIGZ1bmN0aW9uIHNldFJlZmVycmVyUGVyY2VudCh1aW50IG5ld1JlZmVycmVyUGVyY2VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZWZlcnJlclBlcmNlbnQgPSBuZXdSZWZlcnJlclBlcmNlbnQ7CiAgfQoKICBmdW5jdGlvbiBzZXRTdGFydCh1aW50IG5ld1N0YXJ0KSBwdWJsaWMgb25seU93bmVyIHsKICAgIHN0YXJ0ID0gbmV3U3RhcnQ7CiAgfQoKICBmdW5jdGlvbiBzZXRQcmljZSh1aW50IG5ld1ByaWNlKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHByaWNlID0gbmV3UHJpY2U7CiAgfQoKICBmdW5jdGlvbiBsYXN0U2FsZURhdGUoKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQpIHsKICAgIHJldHVybiBzdGFydCArIHBlcmlvZCAqIDEgZGF5czsKICB9CgogIGZ1bmN0aW9uIHNldE1pblB1cmNoYXNlTGltaXQodWludCBuZXdNaW5QdXJjaGFzZUxpbWl0KSBwdWJsaWMgb25seU93bmVyIHsKICAgIG1pblB1cmNoYXNlTGltaXQgPSBuZXdNaW5QdXJjaGFzZUxpbWl0OwogIH0KCiAgZnVuY3Rpb24gc2V0V2FsbGV0KGFkZHJlc3MgbmV3V2FsbGV0KSBwdWJsaWMgb25seU93bmVyIHsKICAgIHdhbGxldCA9IG5ld1dhbGxldDsKICB9CgogIGZ1bmN0aW9uIHNldERpcmVjdE1pbnRBZ2VudChhZGRyZXNzIG5ld0RpcmVjdE1pbnRBZ2VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICBkaXJlY3RNaW50QWdlbnQgPSBuZXdEaXJlY3RNaW50QWdlbnQ7CiAgfQoKICBmdW5jdGlvbiBkaXJlY3RNaW50KGFkZHJlc3MgdG8sIHVpbnQgaW52ZXN0ZWRXZWkpIHB1YmxpYyBvbmx5RGlyZWN0TWludEFnZW50T3JPd25lciB7CiAgICBjYWxjdWxhdGVBbmRUcmFuc2ZlclRva2Vucyh0bywgaW52ZXN0ZWRXZWkpOwogIH0KCiAgZnVuY3Rpb24gZGlyZWN0TWludFRva2VucyhhZGRyZXNzIHRvLCB1aW50IGNvdW50KSBwdWJsaWMgb25seURpcmVjdE1pbnRBZ2VudE9yT3duZXIgewogICAgbWludEFuZFNlbmRUb2tlbnModG8sIGNvdW50KTsKICB9CgogIGZ1bmN0aW9uIG1pbnRBbmRTZW5kVG9rZW5zKGFkZHJlc3MgdG8sIHVpbnQgYW1vdW50KSBpbnRlcm5hbCB7CiAgICB0b2tlbi5taW50KHRvLCBhbW91bnQpOwogICAgbWludGVkID0gbWludGVkLmFkZChhbW91bnQpOwogIH0KCiAgZnVuY3Rpb24gY2FsY3VsYXRlQW5kVHJhbnNmZXJUb2tlbnMoYWRkcmVzcyB0bywgdWludCBpbnZlc3RlZEluV2VpKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQpIHsKICAgIHVpbnQgdG9rZW5zID0gY2FsY3VsYXRlVG9rZW5zKGludmVzdGVkSW5XZWkpOwogICAgbWludEFuZFNlbmRUb2tlbnModG8sIHRva2Vucyk7CiAgICBpbnZlc3RlZCA9IGludmVzdGVkLmFkZChpbnZlc3RlZEluV2VpKTsKICAgIHJldHVybiB0b2tlbnM7CiAgfQoKICBmdW5jdGlvbiBjYWxjdWxhdGVBbmRUcmFuc2ZlclRva2Vuc1dpdGhSZWZlcnJlcihhZGRyZXNzIHRvLCB1aW50IGludmVzdGVkSW5XZWkpIGludGVybmFsIHsKICAgIHVpbnQgdG9rZW5zID0gY2FsY3VsYXRlQW5kVHJhbnNmZXJUb2tlbnModG8sIGludmVzdGVkSW5XZWkpOwogICAgc2VuZFJlZmVycmVyVG9rZW5zKHRva2Vucyk7CiAgfQoKICBmdW5jdGlvbiBjYWxjdWxhdGVUb2tlbnModWludCBpbnZlc3RlZEluV2VpKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQpOwoKICBmdW5jdGlvbiBjcmVhdGVUb2tlbnMoKSBwdWJsaWMgcGF5YWJsZTsKCiAgZnVuY3Rpb24oKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgIGNyZWF0ZVRva2VucygpOwogIH0KCiAgZnVuY3Rpb24gcmV0cmlldmVUb2tlbnMoYWRkcmVzcyB0bywgYWRkcmVzcyBhbm90aGVyVG9rZW4pIHB1YmxpYyBvbmx5T3duZXIgewogICAgRVJDMjAgYWxpZW5Ub2tlbiA9IEVSQzIwKGFub3RoZXJUb2tlbik7CiAgICBhbGllblRva2VuLnRyYW5zZmVyKHRvLCBhbGllblRva2VuLmJhbGFuY2VPZih0aGlzKSk7CiAgfQoKfQoKLy8gRmlsZTogY29udHJhY3RzL1ByZVRHRS5zb2wKCmNvbnRyYWN0IFByZVRHRSBpcyBDb21tb25Ub2tlbkV2ZW50IHsKCiAgdWludCBwdWJsaWMgc29mdGNhcDsKCiAgYm9vbCBwdWJsaWMgcmVmdW5kT247CgogIGJvb2wgcHVibGljIHNvZnRjYXBBY2hpZXZlZDsKCiAgYWRkcmVzcyBwdWJsaWMgbmV4dFNhbGVBZ2VudDsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYmFsYW5jZXM7CgogIGV2ZW50IFJlZnVuZHNFbmFibGVkKCk7CgogIGV2ZW50IFNvZnRjYXBSZWFjaGVkKCk7CgogIGV2ZW50IFJlZnVuZGVkKGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB3ZWlBbW91bnQpOwoKICBmdW5jdGlvbiBzZXRQZXJpb2QodWludCBuZXdQZXJpb2QpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcGVyaW9kID0gbmV3UGVyaW9kOwogIH0KCiAgZnVuY3Rpb24gY2FsY3VsYXRlVG9rZW5zKHVpbnQgaW52ZXN0ZWRJbldlaSkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICByZXR1cm4gaW52ZXN0ZWRJbldlaS5tdWwocHJpY2UpLmRpdigxIGV0aGVyKTsKICB9CgogIGZ1bmN0aW9uIHNldE5leHRTYWxlQWdlbnQoYWRkcmVzcyBuZXdOZXh0U2FsZUFnZW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgIG5leHRTYWxlQWdlbnQgPSBuZXdOZXh0U2FsZUFnZW50OwogIH0KCiAgZnVuY3Rpb24gc2V0U29mdGNhcCh1aW50IG5ld1NvZnRjYXApIHB1YmxpYyBvbmx5T3duZXIgewogICAgc29mdGNhcCA9IG5ld1NvZnRjYXA7CiAgfQoKICBmdW5jdGlvbiByZWZ1bmQoKSBwdWJsaWMgewogICAgcmVxdWlyZShub3cgPiBzdGFydCAmJiByZWZ1bmRPbiAmJiBiYWxhbmNlc1ttc2cuc2VuZGVyXSA+IDApOwogICAgdWludCB2YWx1ZSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAwOwogICAgbXNnLnNlbmRlci50cmFuc2Zlcih2YWx1ZSk7CiAgICBSZWZ1bmRlZChtc2cuc2VuZGVyLCB2YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiB3aWR0aHJhdygpIHB1YmxpYyB7CiAgICByZXF1aXJlKHNvZnRjYXBBY2hpZXZlZCk7CiAgICB3YWxsZXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZVRva2VucygpIHB1YmxpYyBwYXlhYmxlIGNhbk1pbnQgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQobXNnLnZhbHVlKTsKICAgIHN1cGVyLmNhbGN1bGF0ZUFuZFRyYW5zZmVyVG9rZW5zV2l0aFJlZmVycmVyKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICBpZiAoIXNvZnRjYXBBY2hpZXZlZCAmJiBtaW50ZWQgPj0gc29mdGNhcCkgewogICAgICBzb2Z0Y2FwQWNoaWV2ZWQgPSB0cnVlOwogICAgICBTb2Z0Y2FwUmVhY2hlZCgpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZmluaXNoKCkgcHVibGljIG9ubHlPd25lciB7CiAgICBpZiAoIXNvZnRjYXBBY2hpZXZlZCkgewogICAgICByZWZ1bmRPbiA9IHRydWU7CiAgICAgIFJlZnVuZHNFbmFibGVkKCk7CiAgICB9IGVsc2UgewogICAgICB3aWR0aHJhdygpOwogICAgICB0b2tlbi5zZXRTYWxlQWdlbnQobmV4dFNhbGVBZ2VudCk7CiAgICB9CiAgfQoKfQoKLy8gRmlsZTogY29udHJhY3RzL1N0YWdlZFRva2VuRXZlbnQuc29sCgpjb250cmFjdCBTdGFnZWRUb2tlbkV2ZW50IGlzIENvbW1vblRva2VuRXZlbnQgewoKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgc3RydWN0IFN0YWdlIHsKICAgIHVpbnQgcGVyaW9kOwogICAgdWludCBkaXNjb3VudDsKICB9CgogIHVpbnQgcHVibGljIGNvbnN0YW50IFNUQUdFU19QRVJDRU5UX1JBVEUgPSAxMDA7CgogIFN0YWdlW10gcHVibGljIHN0YWdlczsKCiAgZnVuY3Rpb24gc3RhZ2VzQ291bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICByZXR1cm4gc3RhZ2VzLmxlbmd0aDsKICB9CgogIGZ1bmN0aW9uIGFkZFN0YWdlKHVpbnQgc3RhZ2VQZXJpb2QsIHVpbnQgZGlzY291bnQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShzdGFnZVBlcmlvZCA+IDApOwogICAgc3RhZ2VzLnB1c2goU3RhZ2Uoc3RhZ2VQZXJpb2QsIGRpc2NvdW50KSk7CiAgICBwZXJpb2QgPSBwZXJpb2QuYWRkKHN0YWdlUGVyaW9kKTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZVN0YWdlKHVpbnQ4IG51bWJlcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG51bWJlciA+PSAwICYmIG51bWJlciA8IHN0YWdlcy5sZW5ndGgpOwoKICAgIFN0YWdlIHN0b3JhZ2Ugc3RhZ2UgPSBzdGFnZXNbbnVtYmVyXTsKICAgIHBlcmlvZCA9IHBlcmlvZC5zdWIoc3RhZ2UucGVyaW9kKTsKCiAgICBkZWxldGUgc3RhZ2VzW251bWJlcl07CgogICAgZm9yICh1aW50IGkgPSBudW1iZXI7IGkgPCBzdGFnZXMubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgIHN0YWdlc1tpXSA9IHN0YWdlc1tpKzFdOwogICAgfQoKICAgIHN0YWdlcy5sZW5ndGgtLTsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZVN0YWdlKHVpbnQ4IG51bWJlciwgdWludCBzdGFnZVBlcmlvZCwgdWludCBkaXNjb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG51bWJlciA+PSAwICYmIG51bWJlciA8IHN0YWdlcy5sZW5ndGgpOwoKICAgIFN0YWdlIHN0b3JhZ2Ugc3RhZ2UgPSBzdGFnZXNbbnVtYmVyXTsKCiAgICBwZXJpb2QgPSBwZXJpb2Quc3ViKHN0YWdlLnBlcmlvZCk7CgogICAgc3RhZ2UucGVyaW9kID0gc3RhZ2VQZXJpb2Q7CiAgICBzdGFnZS5kaXNjb3VudCA9IGRpc2NvdW50OwoKICAgIHBlcmlvZCA9IHBlcmlvZC5hZGQoc3RhZ2VQZXJpb2QpOwogIH0KCiAgZnVuY3Rpb24gaW5zZXJ0U3RhZ2UodWludDggbnVtYmVyQWZ0ZXIsIHVpbnQgc3RhZ2VQZXJpb2QsIHVpbnQgZGlzY291bnQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShudW1iZXJBZnRlciA8IHN0YWdlcy5sZW5ndGgpOwoKCiAgICBwZXJpb2QgPSBwZXJpb2QuYWRkKHN0YWdlUGVyaW9kKTsKCiAgICBzdGFnZXMubGVuZ3RoKys7CgogICAgZm9yICh1aW50IGkgPSBzdGFnZXMubGVuZ3RoIC0gMjsgaSA+IG51bWJlckFmdGVyOyBpLS0pIHsKICAgICAgc3RhZ2VzW2kgKyAxXSA9IHN0YWdlc1tpXTsKICAgIH0KCiAgICBzdGFnZXNbbnVtYmVyQWZ0ZXIgKyAxXSA9IFN0YWdlKHBlcmlvZCwgZGlzY291bnQpOwogIH0KCiAgZnVuY3Rpb24gY2xlYXJTdGFnZXMoKSBwdWJsaWMgb25seU93bmVyIHsKICAgIGZvciAodWludCBpID0gMDsgaSA8IHN0YWdlcy5sZW5ndGg7IGkrKykgewogICAgICBkZWxldGUgc3RhZ2VzW2ldOwogICAgfQogICAgc3RhZ2VzLmxlbmd0aCAtPSBzdGFnZXMubGVuZ3RoOwogICAgcGVyaW9kID0gMDsKICB9CgogIGZ1bmN0aW9uIGdldERpc2NvdW50KCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgdWludCBwcmV2VGltZUxpbWl0ID0gc3RhcnQ7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBzdGFnZXMubGVuZ3RoOyBpKyspIHsKICAgICAgU3RhZ2Ugc3RvcmFnZSBzdGFnZSA9IHN0YWdlc1tpXTsKICAgICAgcHJldlRpbWVMaW1pdCArPSBzdGFnZS5wZXJpb2QgKiAxIGRheXM7CiAgICAgIGlmIChub3cgPCBwcmV2VGltZUxpbWl0KQogICAgICAgIHJldHVybiBzdGFnZS5kaXNjb3VudDsKICAgIH0KICAgIHJldmVydCgpOwogIH0KCn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9UR0Uuc29sCgpjb250cmFjdCBUR0UgaXMgU3RhZ2VkVG9rZW5FdmVudCB7CgogIGFkZHJlc3MgcHVibGljIGV4dHJhVG9rZW5zV2FsbGV0OwoKICB1aW50IHB1YmxpYyBleHRyYVRva2Vuc1BlcmNlbnQ7CgogIGJvb2wgcHVibGljIGZpbmlzaGVkID0gZmFsc2U7CgogIGZ1bmN0aW9uIHNldEV4dHJhVG9rZW5zV2FsbGV0KGFkZHJlc3MgbmV3RXh0cmFUb2tlbnNXYWxsZXQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgZXh0cmFUb2tlbnNXYWxsZXQgPSBuZXdFeHRyYVRva2Vuc1dhbGxldDsKICB9CgogIGZ1bmN0aW9uIHNldEV4dHJhVG9rZW5zUGVyY2VudCh1aW50IG5ld0V4dHJhVG9rZW5zUGVyY2VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICBleHRyYVRva2Vuc1BlcmNlbnQgPSBuZXdFeHRyYVRva2Vuc1BlcmNlbnQ7CiAgfQoKICBmdW5jdGlvbiBjYWxjdWxhdGVUb2tlbnModWludCBpbnZlc3RlZEluV2VpKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQpIHsKICAgIHJldHVybiBpbnZlc3RlZEluV2VpLm11bChwcmljZSkubXVsKFNUQUdFU19QRVJDRU5UX1JBVEUpLmRpdihTVEFHRVNfUEVSQ0VOVF9SQVRFLnN1YihnZXREaXNjb3VudCgpKSkuZGl2KDEgZXRoZXIpOwogIH0KCiAgZnVuY3Rpb24gZmluaXNoKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCFmaW5pc2hlZCk7CiAgICBmaW5pc2hlZCA9IHRydWU7CiAgICB1aW50MjU2IHRvdGFsU3VwcGx5ID0gdG9rZW4udG90YWxTdXBwbHkoKTsKICAgIHVpbnQgYWxsVG9rZW5zID0gdG90YWxTdXBwbHkubXVsKFBFUkNFTlRfUkFURSkuZGl2KFBFUkNFTlRfUkFURS5zdWIoZXh0cmFUb2tlbnNQZXJjZW50KSk7CiAgICB1aW50IGV4dHJhVG9rZW5zID0gYWxsVG9rZW5zLm11bChleHRyYVRva2Vuc1BlcmNlbnQpLmRpdihQRVJDRU5UX1JBVEUpOwogICAgbWludEFuZFNlbmRUb2tlbnMoZXh0cmFUb2tlbnNXYWxsZXQsIGV4dHJhVG9rZW5zKTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZVRva2VucygpIHB1YmxpYyBwYXlhYmxlIGNhbk1pbnQgewogICAgcmVxdWlyZSghZmluaXNoZWQpOwogICAgd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICBjYWxjdWxhdGVBbmRUcmFuc2ZlclRva2Vuc1dpdGhSZWZlcnJlcihtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogIH0KCn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9EZXBsb3llci5zb2wKCmNvbnRyYWN0IERlcGxveWVyIGlzIE93bmFibGUgewoKICBMaWdodGNhc2hDcnlwdG9Ub2tlbiBwdWJsaWMgdG9rZW47CgogIFByZVRHRSBwdWJsaWMgcHJlVEdFOwoKICBUR0UgcHVibGljIHRnZTsKCiAgZnVuY3Rpb24gZGVwbG95KCkgcHVibGljIG9ubHlPd25lciB7CiAgICB0b2tlbiA9IG5ldyBMaWdodGNhc2hDcnlwdG9Ub2tlbigpOwoKICAgIHByZVRHRSA9IG5ldyBQcmVUR0UoKTsKICAgIHByZVRHRS5zZXRQcmljZSg3MTQzMDAwMDAwMDAwMDAwMDAwMDAwKTsKICAgIHByZVRHRS5zZXRNaW5QdXJjaGFzZUxpbWl0KDEwMDAwMDAwMDAwMDAwMDAwMCk7CiAgICBwcmVUR0Uuc2V0U29mdGNhcCg3MTQyODU3MDAwMDAwMDAwMDAwMDAwMDAwKTsKICAgIHByZVRHRS5zZXRIYXJkY2FwKDUyNTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKTsKICAgIHByZVRHRS5zZXRTdGFydCgxNTE3MjMwODAwKTsKICAgIHByZVRHRS5zZXRQZXJpb2QoMTEpOwogICAgcHJlVEdFLnNldFdhbGxldCgweERGRENBYzBjOUViNDVDNjNCY2ZmOTEyMjBBNDg2ODQ4ODJGMURBZDApOwogICAgcHJlVEdFLnNldE1heFJlZmVycmVyVG9rZW5zKDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKTsKICAgIHByZVRHRS5zZXRSZWZlcnJlclBlcmNlbnQoMTApOwoKICAgIHRnZSA9IG5ldyBUR0UoKTsKICAgIHRnZS5zZXRQcmljZSg1MDAwMDAwMDAwMDAwMDAwMDAwMDAwKTsKICAgIHRnZS5zZXRNaW5QdXJjaGFzZUxpbWl0KDEwMDAwMDAwMDAwMDAwMDAwKTsKICAgIHRnZS5zZXRIYXJkY2FwKDEyNjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCk7CiAgICB0Z2Uuc2V0U3RhcnQoMTUxNzgzNTYwMCk7CiAgICB0Z2Uuc2V0V2FsbGV0KDB4M2FDNDViNDlBNEQzQ0IzNTAyMmZkODEyMkZkODY1Y2QxQjQ3OTMyZik7CiAgICB0Z2Uuc2V0RXh0cmFUb2tlbnNXYWxsZXQoMHhGMGU4MzAxNDhGM2QxQzQ2NTY3NzBEQWEyODJGZGE2RkFBQTBGZTBCKTsKICAgIHRnZS5zZXRFeHRyYVRva2Vuc1BlcmNlbnQoMTUpOwogICAgdGdlLmFkZFN0YWdlKDcsIDIwKTsKICAgIHRnZS5hZGRTdGFnZSg3LCAxNSk7CiAgICB0Z2UuYWRkU3RhZ2UoNywgMTApOwogICAgdGdlLmFkZFN0YWdlKDEwMDAsIDUpOwogICAgdGdlLnNldE1heFJlZmVycmVyVG9rZW5zKDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKTsKICAgIHRnZS5zZXRSZWZlcnJlclBlcmNlbnQoMTApOwoKICAgIHByZVRHRS5zZXRUb2tlbih0b2tlbik7CiAgICB0Z2Uuc2V0VG9rZW4odG9rZW4pOwogICAgcHJlVEdFLnNldE5leHRTYWxlQWdlbnQodGdlKTsKICAgIHRva2VuLnNldFNhbGVBZ2VudChwcmVUR0UpOwoKICAgIGFkZHJlc3MgbmV3T253ZXIgPSAweEY1MUUwYTNhMTc5OTBENDFDNWYxRmYxZDBENzcyYjI2RTRENkI2ZDA7CiAgICB0b2tlbi50cmFuc2Zlck93bmVyc2hpcChuZXdPbndlcik7CiAgICBwcmVUR0UudHJhbnNmZXJPd25lcnNoaXAobmV3T253ZXIpOwogICAgdGdlLnRyYW5zZmVyT3duZXJzaGlwKG5ld09ud2VyKTsKICB9Cgp9'.
	

]
