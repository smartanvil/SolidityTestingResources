Class {
	#name : #SRTdb5e04dc9c94bc8310e8885c85a4d0666ccaecae,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdb5e04dc9c94bc8310e8885c85a4d0666ccaecae >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLy8+WyBDcnlwdG8gQnJhbmRzIF0+Pj4+CgovLy8gQHRpdGxlIEludGVyZmFjZSBmb3IgY29udHJhY3RzIGNvbmZvcm1pbmcgdG8gRVJDLTcyMTogTm9uLUZ1bmdpYmxlIFRva2VucwovLy8gQGF1dGhvciBEaWV0ZXIgU2hpcmxleSA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI4NGUwZTFmMGUxYzRlNWZjZWRlYmU5ZmVlMWVhYWFlN2ViIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPj4gKGh0dHBzOi8vZ2l0aHViLmNvbS9kZXRlKQpjb250cmFjdCBFUkM3MjEgewogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIGFkZHIpOwogICAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBhcHByb3ZlZCwgdWludDI1NiB0b2tlbklkKTsKfQoKY29udHJhY3QgRXRoZXJCcmFuZCBpcyBFUkM3MjEgewoKICAvKioqIEVWRU5UUyAqKiovCiAgZXZlbnQgQmlydGgodWludDI1NiB0b2tlbklkLCBieXRlczMyIG5hbWUsIGFkZHJlc3Mgb3duZXIpOwogIGV2ZW50IFRva2VuU29sZCh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgb2xkUHJpY2UsIHVpbnQyNTYgbmV3UHJpY2UsIGFkZHJlc3MgcHJldk93bmVyLCBhZGRyZXNzIHdpbm5lciwgYnl0ZXMzMiBuYW1lKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CgogIC8qKiogU1RSVUNUUyAqKiovCiAgc3RydWN0IEJyYW5kIHsKICAgIGJ5dGVzMzIgbmFtZTsKICAgIGFkZHJlc3Mgb3duZXI7CiAgICB1aW50MjU2IHByaWNlOwogICAgdWludDI1NiBsYXN0X3ByaWNlOwogICAgYWRkcmVzcyBhcHByb3ZlX3RyYW5zZmVyX3RvOwogIH0KICAKICBzdHJ1Y3QgVG9wT3duZXIgewogICAgYWRkcmVzcyBhZGRyOwogICAgdWludDI1NiBwcmljZTsKICB9CgogIC8qKiogQ09OU1RBTlRTICoqKi8KICBzdHJpbmcgcHVibGljIGNvbnN0YW50IE5BTUUgPSAiRXRoZXJCcmFuZHMiOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1lNQk9MID0gIkV0aGVyQnJhbmQiOwogIAogIGJvb2wgcHVibGljIGdhbWVPcGVuID0gZmFsc2U7CgogIC8qKiogU1RPUkFHRSAqKiovCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIG93bmVyQ291bnQ7CiAgbWFwcGluZyAodWludDI1NiA9PiBUb3BPd25lcikgcHJpdmF0ZSB0b3BPd25lcjsKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgbGFzdEJ1eWVyOwoKICBhZGRyZXNzIHB1YmxpYyBjZW9BZGRyZXNzOwogIGFkZHJlc3MgcHVibGljIGNvb0FkZHJlc3M7CiAgYWRkcmVzcyBwdWJsaWMgY2ZvQWRkcmVzczsKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBleHRyYTsKICAKICB1aW50MjU2IGJyYW5kX2NvdW50OwogIHVpbnQyNTYgbG93ZXN0X3RvcF9icmFuZDsKIAogIG1hcHBpbmcgKHVpbnQyNTYgPT4gQnJhbmQpIHByaXZhdGUgYnJhbmRzOwoKICAvKioqIEFDQ0VTUyBNT0RJRklFUlMgKioqLwogIG1vZGlmaWVyIG9ubHlDRU8oKSB7IHJlcXVpcmUobXNnLnNlbmRlciA9PSBjZW9BZGRyZXNzKTsgXzsgfQogIG1vZGlmaWVyIG9ubHlDT08oKSB7IHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb29BZGRyZXNzKTsgXzsgfQogIG1vZGlmaWVyIG9ubHlDWFgoKSB7IHJlcXVpcmUobXNnLnNlbmRlciA9PSBjZW9BZGRyZXNzIHx8IG1zZy5zZW5kZXIgPT0gY29vQWRkcmVzcyk7IF87IH0KCiAgLyoqKiBBQ0NFU1MgTU9ESUZJRVMgKioqLwogIGZ1bmN0aW9uIHNldENFTyhhZGRyZXNzIF9uZXdDRU8pIHB1YmxpYyBvbmx5Q0VPIHsKICAgIHJlcXVpcmUoX25ld0NFTyAhPSBhZGRyZXNzKDApKTsKICAgIGNlb0FkZHJlc3MgPSBfbmV3Q0VPOwogIH0KICBmdW5jdGlvbiBzZXRDT08oYWRkcmVzcyBfbmV3Q09PKSBwdWJsaWMgb25seUNFTyB7CiAgICByZXF1aXJlKF9uZXdDT08gIT0gYWRkcmVzcygwKSk7CiAgICBjb29BZGRyZXNzID0gX25ld0NPTzsKICB9CiAgZnVuY3Rpb24gc2V0Q0ZPKGFkZHJlc3MgX25ld0NGTykgcHVibGljIG9ubHlDRU8gewogICAgcmVxdWlyZShfbmV3Q0ZPICE9IGFkZHJlc3MoMCkpOwogICAgY2ZvQWRkcmVzcyA9IF9uZXdDRk87CiAgfQogIGZ1bmN0aW9uIHNldEV4dHJhKHVpbnQyNTYgX2lkLCBhZGRyZXNzIF9uZXdFeHRyYSkgcHVibGljIG9ubHlDWFggewogICAgcmVxdWlyZShfbmV3RXh0cmEgIT0gYWRkcmVzcygwKSk7CiAgICAvLyBmYWlsc2F2ZSA6MyByZXF1aXJlKF9pZCA8PSAyKTsgLy8gMyA9IDEgRVRILCA0ID0gMi41IEVUSCwgNSA9IDUgRVRICiAgICBleHRyYVtfaWRdID0gX25ld0V4dHJhOwogIH0KCiAgLyoqKiBERUZBVUxUIE1FVEhPRFMgKioqLwogIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgeyByZXR1cm4gU1lNQk9MOyB9CiAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgeyByZXR1cm4gTkFNRTsgfQogIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKSB7IHJldHVybiB0cnVlOyB9CgogIC8qKiogQ09OU1RSVUNUT1IgKioqLwogIGZ1bmN0aW9uIEV0aGVyQnJhbmQoKSBwdWJsaWMgewogICAgY2VvQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICBjb29BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgIGNmb0FkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgdG9wT3duZXJbMV0gPSBUb3BPd25lcihtc2cuc2VuZGVyLCAwKTsgLy8gMC41CiAgICB0b3BPd25lclsyXSA9IFRvcE93bmVyKG1zZy5zZW5kZXIsIDApOyAvLyAwLjEKICAgIHRvcE93bmVyWzNdID0gVG9wT3duZXIobXNnLnNlbmRlciwgMCk7IC8vIDAuMDUKICAgIHRvcE93bmVyWzRdID0gVG9wT3duZXIobXNnLnNlbmRlciwgMCk7CiAgICB0b3BPd25lcls1XSA9IFRvcE93bmVyKG1zZy5zZW5kZXIsIDApOwogICAgbGFzdEJ1eWVyWzFdID0gbXNnLnNlbmRlcjsKICAgIGxhc3RCdXllclsyXSA9IG1zZy5zZW5kZXI7CiAgICBsYXN0QnV5ZXJbM10gPSBtc2cuc2VuZGVyOwogICAgZXh0cmFbMV0gPSBtc2cuc2VuZGVyOwogICAgZXh0cmFbMl0gPSBtc2cuc2VuZGVyOwogICAgZXh0cmFbM10gPSBtc2cuc2VuZGVyOwogICAgZXh0cmFbNF0gPSBtc2cuc2VuZGVyOwogICAgZXh0cmFbNV0gPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqKiBJTlRFUkZBQ0UgTUVUSE9EUyAqKiovCgogIGZ1bmN0aW9uIGNyZWF0ZUJyYW5kKGJ5dGVzMzIgX25hbWUsIHVpbnQyNTYgX3ByaWNlKSBwdWJsaWMgb25seUNYWCB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gYWRkcmVzcygwKSk7CiAgICBfY3JlYXRlX2JyYW5kKF9uYW1lLCBhZGRyZXNzKHRoaXMpLCBfcHJpY2UsIDApOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlUHJvbW9CcmFuZChieXRlczMyIF9uYW1lLCBhZGRyZXNzIF9vd25lciwgdWludDI1NiBfcHJpY2UsIHVpbnQyNTYgX2xhc3RfcHJpY2UpIHB1YmxpYyBvbmx5Q1hYIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX293bmVyICE9IGFkZHJlc3MoMCkpOwogICAgX2NyZWF0ZV9icmFuZChfbmFtZSwgX293bmVyLCBfcHJpY2UsIF9sYXN0X3ByaWNlKTsKICB9CgogIGZ1bmN0aW9uIG9wZW5HYW1lKCkgcHVibGljIG9ubHlDWFggewogICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IGFkZHJlc3MoMCkpOwogICAgZ2FtZU9wZW4gPSB0cnVlOwogIH0KCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKSB7CiAgICByZXR1cm4gYnJhbmRfY291bnQ7CiAgfQoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIG93bmVyQ291bnRbX293bmVyXTsKICB9CiAgZnVuY3Rpb24gcHJpY2VPZih1aW50MjU2IF9icmFuZF9pZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBwcmljZSkgewogICAgcmV0dXJuIGJyYW5kc1tfYnJhbmRfaWRdLnByaWNlOwogIH0KCiAgZnVuY3Rpb24gZ2V0QnJhbmQodWludDI1NiBfYnJhbmRfaWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKAogICAgdWludDI1NiBpZCwKICAgIGJ5dGVzMzIgYnJhbmRfbmFtZSwKICAgIGFkZHJlc3Mgb3duZXIsCiAgICB1aW50MjU2IHByaWNlLAogICAgdWludDI1NiBsYXN0X3ByaWNlCiAgKSB7CiAgICBpZCA9IF9icmFuZF9pZDsKICAgIGJyYW5kX25hbWUgPSBicmFuZHNbX2JyYW5kX2lkXS5uYW1lOwogICAgb3duZXIgPSBicmFuZHNbX2JyYW5kX2lkXS5vd25lcjsKICAgIHByaWNlID0gYnJhbmRzW19icmFuZF9pZF0ucHJpY2U7CiAgICBsYXN0X3ByaWNlID0gYnJhbmRzW19icmFuZF9pZF0ubGFzdF9wcmljZTsKICB9CiAgCiAgZnVuY3Rpb24gZ2V0QnJhbmRzKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NltdLCBieXRlczMyW10sIGFkZHJlc3NbXSwgdWludDI1NltdKSB7CiAgICB1aW50MjU2W10gbWVtb3J5IGlkcyA9IG5ldyB1aW50MjU2W10oYnJhbmRfY291bnQpOwogICAgYnl0ZXMzMltdIG1lbW9yeSBuYW1lcyA9IG5ldyBieXRlczMyW10oYnJhbmRfY291bnQpOwogICAgYWRkcmVzc1tdIG1lbW9yeSBvd25lcnMgPSBuZXcgYWRkcmVzc1tdKGJyYW5kX2NvdW50KTsKICAgIHVpbnQyNTZbXSBtZW1vcnkgcHJpY2VzID0gbmV3IHVpbnQyNTZbXShicmFuZF9jb3VudCk7CiAgICBmb3IodWludDI1NiBfaWQgPSAwOyBfaWQgPCBicmFuZF9jb3VudDsgX2lkKyspewogICAgICBpZHNbX2lkXSA9IF9pZDsKICAgICAgbmFtZXNbX2lkXSA9IGJyYW5kc1tfaWRdLm5hbWU7CiAgICAgIG93bmVyc1tfaWRdID0gYnJhbmRzW19pZF0ub3duZXI7CiAgICAgIHByaWNlc1tfaWRdID0gYnJhbmRzW19pZF0ucHJpY2U7CiAgICB9CiAgICByZXR1cm4gKGlkcywgbmFtZXMsIG93bmVycywgcHJpY2VzKTsKICB9CiAgCiAgZnVuY3Rpb24gcHVyY2hhc2UodWludDI1NiBfYnJhbmRfaWQpIHB1YmxpYyBwYXlhYmxlIHsKICAgIHJlcXVpcmUoZ2FtZU9wZW4gPT0gdHJ1ZSk7CiAgICBCcmFuZCBzdG9yYWdlIGJyYW5kID0gYnJhbmRzW19icmFuZF9pZF07CgogICAgcmVxdWlyZShicmFuZC5vd25lciAhPSBtc2cuc2VuZGVyKTsKICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IGJyYW5kLnByaWNlKTsKCiAgICB1aW50MjU2IGV4Y2VzcyA9IFNhZmVNYXRoLnN1Yihtc2cudmFsdWUsIGJyYW5kLnByaWNlKTsKICAgIHVpbnQyNTYgaGFsZl9kaWZmID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLnN1YihicmFuZC5wcmljZSwgYnJhbmQubGFzdF9wcmljZSksIDIpOwogICAgdWludDI1NiByZXdhcmQgPSBTYWZlTWF0aC5hZGQoaGFsZl9kaWZmLCBicmFuZC5sYXN0X3ByaWNlKTsKCiAgICB0b3BPd25lclsxXS5hZGRyLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDE1KSkpOyAgLy8gMTUlCiAgICB0b3BPd25lclsyXS5hZGRyLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDEyKSkpOyAgLy8gMTIlCiAgICB0b3BPd25lclszXS5hZGRyLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDkpKSk7ICAgLy8gOSUKICAgIHRvcE93bmVyWzRdLmFkZHIudHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGhhbGZfZGlmZiwgMTAwKSwgNSkpKTsgICAvLyA1JQogICAgdG9wT3duZXJbNV0uYWRkci50cmFuc2Zlcih1aW50MjU2KFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYoaGFsZl9kaWZmLCAxMDApLCAyKSkpOyAgIC8vIDIlID09IDQzJQogIAogICAgbGFzdEJ1eWVyWzFdLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDIwKSkpOyAvLyAyMCUKICAgIGxhc3RCdXllclsyXS50cmFuc2Zlcih1aW50MjU2KFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYoaGFsZl9kaWZmLCAxMDApLCAxNSkpKTsgLy8gMTUlCiAgICBsYXN0QnV5ZXJbM10udHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGhhbGZfZGlmZiwgMTAwKSwgMTApKSk7IC8vIDEwJSA9PSA0NSUKICAKICAgIGV4dHJhWzFdLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDEpKSk7ICAgICAgLy8gMSUKICAgIGV4dHJhWzJdLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDEpKSk7ICAgICAgLy8gMSUKICAgIGV4dHJhWzNdLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDEpKSk7ICAgICAgLy8gMSUKICAgIGV4dHJhWzRdLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDEpKSk7ICAgICAgLy8gMSUKICAgIGV4dHJhWzVdLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDEpKSk7ICAgICAgLy8gMSUKICAgIAogICAgY2ZvQWRkcmVzcy50cmFuc2Zlcih1aW50MjU2KFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYoaGFsZl9kaWZmLCAxMDApLCA2KSkpOyAgICAvLyA2JQogICAgY29vQWRkcmVzcy50cmFuc2Zlcih1aW50MjU2KFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYoaGFsZl9kaWZmLCAxMDApLCAxKSkpOyAgICAvLyAxJQoKICAgIGlmKGJyYW5kLm93bmVyID09IGFkZHJlc3ModGhpcykpewogICAgICBjZm9BZGRyZXNzLnRyYW5zZmVyKHJld2FyZCk7CiAgICB9IGVsc2UgewogICAgICBicmFuZC5vd25lci50cmFuc2ZlcihyZXdhcmQpOwogICAgfQogICAgCiAgICBpZihicmFuZC5wcmljZSA+IHRvcE93bmVyWzVdLnByaWNlKXsKICAgICAgICBmb3IodWludDggaSA9IDE7IGkgPD0gNTsgaSsrKXsKICAgICAgICAgICAgaWYoYnJhbmQucHJpY2UgPiB0b3BPd25lclsoaSsxKV0ucHJpY2UpewogICAgICAgICAgICAgICAgaWYoaSA+PSA0KXsgdG9wT3duZXJbNV0gPSB0b3BPd25lcls0XTsgfQogICAgICAgICAgICAgICAgaWYoaSA+PSAzKXsgdG9wT3duZXJbNF0gPSB0b3BPd25lclszXTsgfQogICAgICAgICAgICAgICAgaWYoaSA+PSAyKXsgdG9wT3duZXJbM10gPSB0b3BPd25lclsyXTsgfQogICAgICAgICAgICAgICAgaWYoaSA+PSAxKXsgdG9wT3duZXJbMl0gPSB0b3BPd25lclsxXTsgfQogICAgICAgICAgICAgICAgdG9wT3duZXJbaV0gPSBUb3BPd25lcihtc2cuc2VuZGVyLCBicmFuZC5wcmljZSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgaWYoZXh0cmFbM10gPT0gY2VvQWRkcmVzcyAmJiBicmFuZC5wcmljZSA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwKXsgZXh0cmFbM10gPT0gbXNnLnNlbmRlcjsgfSAvLyAxIEVUSAogICAgaWYoZXh0cmFbNF0gPT0gY2VvQWRkcmVzcyAmJiBicmFuZC5wcmljZSA+PSAyNTAwMDAwMDAwMDAwMDAwMDAwKXsgZXh0cmFbNF0gPT0gbXNnLnNlbmRlcjsgfSAvLyAyLjUgRVRICiAgICBpZihleHRyYVs1XSA9PSBjZW9BZGRyZXNzICYmIGJyYW5kLnByaWNlID49IDUwMDAwMDAwMDAwMDAwMDAwMDApeyBleHRyYVs1XSA9PSBtc2cuc2VuZGVyOyB9IC8vIDUgRVRICiAgICAKICAgIGJyYW5kLmxhc3RfcHJpY2UgPSBicmFuZC5wcmljZTsKICAgIGFkZHJlc3MgX29sZF9vd25lciA9IGJyYW5kLm93bmVyOwogICAgCiAgICBpZihicmFuZC5wcmljZSA8IDUwMDAwMDAwMDAwMDAwMDAwKXsgLy8gMC4wNQogICAgICAgIGJyYW5kLnByaWNlID0gU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihicmFuZC5wcmljZSwgMTAwKSwgMTUwKTsKICAgIH0gZWxzZSB7CiAgICAgICAgYnJhbmQucHJpY2UgPSBTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGJyYW5kLnByaWNlLCAxMDApLCAxMjUpOwogICAgfQogICAgYnJhbmQub3duZXIgPSBtc2cuc2VuZGVyOwoKICAgIGxhc3RCdXllclszXSA9IGxhc3RCdXllclsyXTsKICAgIGxhc3RCdXllclsyXSA9IGxhc3RCdXllclsxXTsKICAgIGxhc3RCdXllclsxXSA9IG1zZy5zZW5kZXI7CgogICAgVHJhbnNmZXIoX29sZF9vd25lciwgYnJhbmQub3duZXIsIF9icmFuZF9pZCk7CiAgICBUb2tlblNvbGQoX2JyYW5kX2lkLCBicmFuZC5sYXN0X3ByaWNlLCBicmFuZC5wcmljZSwgX29sZF9vd25lciwgYnJhbmQub3duZXIsIGJyYW5kLm5hbWUpOwoKICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZXhjZXNzKTsKICB9CgogIGZ1bmN0aW9uIHBheW91dCgpIHB1YmxpYyBvbmx5Q0VPIHsKICAgIGNmb0FkZHJlc3MudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICB9CgogIGZ1bmN0aW9uIHRva2Vuc09mT3duZXIoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NltdIG93bmVyVG9rZW5zKSB7CiAgICB1aW50MjU2IHRva2VuQ291bnQgPSBiYWxhbmNlT2YoX293bmVyKTsKICAgIGlmICh0b2tlbkNvdW50ID09IDApIHsKICAgICAgcmV0dXJuIG5ldyB1aW50MjU2W10oMCk7CiAgICB9IGVsc2UgewogICAgICB1aW50MjU2W10gbWVtb3J5IHJlc3VsdCA9IG5ldyB1aW50MjU2W10odG9rZW5Db3VudCk7CiAgICAgIHVpbnQyNTYgcmVzdWx0SW5kZXggPSAwOwogICAgICBmb3IgKHVpbnQyNTYgYnJhbmRJZCA9IDA7IGJyYW5kSWQgPD0gdG90YWxTdXBwbHkoKTsgYnJhbmRJZCsrKSB7CiAgICAgICAgaWYgKGJyYW5kc1ticmFuZElkXS5vd25lciA9PSBfb3duZXIpIHsKICAgICAgICAgIHJlc3VsdFtyZXN1bHRJbmRleF0gPSBicmFuZElkOwogICAgICAgICAgcmVzdWx0SW5kZXgrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9CgogIC8qKiogRVJDLTcyMSBjb21wbGlhbmNlLiAqKiovCgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2JyYW5kX2lkKSBwdWJsaWMgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGJyYW5kc1tfYnJhbmRfaWRdLm93bmVyKTsKICAgIGJyYW5kc1tfYnJhbmRfaWRdLmFwcHJvdmVfdHJhbnNmZXJfdG8gPSBfdG87CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfdG8sIF9icmFuZF9pZCk7CiAgfQogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfYnJhbmRfaWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpewogICAgb3duZXIgPSBicmFuZHNbX2JyYW5kX2lkXS5vd25lcjsKICAgIHJlcXVpcmUob3duZXIgIT0gYWRkcmVzcygwKSk7CiAgfQogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfYnJhbmRfaWQpIHB1YmxpYyB7CiAgICBhZGRyZXNzIG9sZE93bmVyID0gYnJhbmRzW19icmFuZF9pZF0ub3duZXI7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKGJyYW5kc1tfYnJhbmRfaWRdLmFwcHJvdmVfdHJhbnNmZXJfdG8gPT0gbXNnLnNlbmRlcik7CiAgICBfdHJhbnNmZXIob2xkT3duZXIsIG1zZy5zZW5kZXIsIF9icmFuZF9pZCk7CiAgfQogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9icmFuZF9pZCkgcHVibGljIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBicmFuZHNbX2JyYW5kX2lkXS5vd25lcik7CiAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYnJhbmRfaWQpOwogIH0KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2JyYW5kX2lkKSBwdWJsaWMgewogICAgcmVxdWlyZShfZnJvbSA9PSBicmFuZHNbX2JyYW5kX2lkXS5vd25lcik7CiAgICByZXF1aXJlKGJyYW5kc1tfYnJhbmRfaWRdLmFwcHJvdmVfdHJhbnNmZXJfdG8gPT0gX3RvKTsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF9icmFuZF9pZCk7CiAgfQoKICAvKioqIFBSSVZBVEUgTUVUSE9EUyAqKiovCgogIGZ1bmN0aW9uIF9jcmVhdGVfYnJhbmQoYnl0ZXMzMiBfbmFtZSwgYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3ByaWNlLCB1aW50MjU2IF9sYXN0X3ByaWNlKSBwcml2YXRlIHsKICAgIC8vIFBhcmFtczogbmFtZSwgb3duZXIsIHByaWNlLCBpc19mb3Jfc2FsZSwgaXNfcHVibGljLCBzaGFyZV9wcmljZSwgaW5jcmVhc2UsIGZlZSwgc2hhcmVfY291bnQsCiAgICBicmFuZHNbYnJhbmRfY291bnRdID0gQnJhbmQoewogICAgICBuYW1lOiBfbmFtZSwKICAgICAgb3duZXI6IF9vd25lciwKICAgICAgcHJpY2U6IF9wcmljZSwKICAgICAgbGFzdF9wcmljZTogX2xhc3RfcHJpY2UsCiAgICAgIGFwcHJvdmVfdHJhbnNmZXJfdG86IGFkZHJlc3MoMCkKICAgIH0pOwogICAgCiAgICBCcmFuZCBzdG9yYWdlIGJyYW5kID0gYnJhbmRzW2JyYW5kX2NvdW50XTsKICAgIAogICAgaWYoYnJhbmQucHJpY2UgPiB0b3BPd25lcls1XS5wcmljZSl7CiAgICAgICAgZm9yKHVpbnQ4IGkgPSAxOyBpIDw9IDU7IGkrKyl7CiAgICAgICAgICAgIGlmKGJyYW5kLnByaWNlID4gdG9wT3duZXJbKGkrMSldLnByaWNlKXsKICAgICAgICAgICAgICAgIGlmKGkgPj0gNCl7IHRvcE93bmVyWzVdID0gdG9wT3duZXJbNF07IH0KICAgICAgICAgICAgICAgIGlmKGkgPj0gMyl7IHRvcE93bmVyWzRdID0gdG9wT3duZXJbM107IH0KICAgICAgICAgICAgICAgIGlmKGkgPj0gMil7IHRvcE93bmVyWzNdID0gdG9wT3duZXJbMl07IH0KICAgICAgICAgICAgICAgIGlmKGkgPj0gMSl7IHRvcE93bmVyWzJdID0gdG9wT3duZXJbMV07IH0KICAgICAgICAgICAgICAgIHRvcE93bmVyW2ldID0gVG9wT3duZXIobXNnLnNlbmRlciwgYnJhbmQucHJpY2UpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAKICAgIEJpcnRoKGJyYW5kX2NvdW50LCBfbmFtZSwgX293bmVyKTsKICAgIFRyYW5zZmVyKGFkZHJlc3ModGhpcyksIF9vd25lciwgYnJhbmRfY291bnQpOwogICAgYnJhbmRfY291bnQrKzsKICB9CgogIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYnJhbmRfaWQpIHByaXZhdGUgewogICAgYnJhbmRzW19icmFuZF9pZF0ub3duZXIgPSBfdG87CiAgICBicmFuZHNbX2JyYW5kX2lkXS5hcHByb3ZlX3RyYW5zZmVyX3RvID0gYWRkcmVzcygwKTsKICAgIG93bmVyQ291bnRbX2Zyb21dIC09IDE7CiAgICBvd25lckNvdW50W190b10gKz0gMTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9icmFuZF9pZCk7CiAgfQp9CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIHJldHVybiBjOwogIH0KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9'.
	

]
