Class {
	#name : #SRTF062783C821E2f5a1d3768a20D2C281d134E0C92,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTF062783C821E2f5a1d3768a20D2C281d134E0C92 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCgovKioKICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogKiBCeSBPcGVuWmVwcGVsaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL1NhZmVNYXRoLnNvbAogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGlmKCEoYSA9PSAwIHx8IGMgLyBhID09IGIpKSB0aHJvdzsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZighKGIgPD0gYSkpIHRocm93OwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGlmKCEoYyA+PSBhKSkgdGhyb3c7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKfQoKY29udHJhY3QgQ29udHJhY3RSZWNlaXZlcnsKICAgIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGJ5dGVzICBfZGF0YSkgZXh0ZXJuYWw7Cn0KCgovL0Jhc2ljIEVSQzIzIHRva2VuLCBiYWNrd2FyZCBjb21wYXRpYmxlIHdpdGggRVJDMjAgdHJhbnNmZXIgZnVuY3Rpb24uCi8vQmFzZWQgaW4gcGFydCBvbiBjb2RlIGJ5IG9wZW4temVwcGVsaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkuZ2l0CmNvbnRyYWN0IEVSQzIzQmFzaWNUb2tlbiB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICAKCiAgICAvKgogICAgICAgKiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjayAgCiAgICAgICovCiAgICAgIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsKICAgICAgICAgICB0aHJvdzsKICAgICAgICAgfQogICAgICAgICBfOwogICAgICB9CgoKICAgIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGJ5dGVzICBfZGF0YSkgZXh0ZXJuYWwgewogICAgICAgIF9mcm9tOwogICAgICAgIF92YWx1ZTsKICAgICAgICBfZGF0YTsKICAgICAgICB0aHJvdzsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIC8vU3RhbmRhcmQgRVJDMjMgdHJhbnNmZXIgZnVuY3Rpb24KCiAgICAgICAgaWYoaXNDb250cmFjdChfdG8pKSB7CiAgICAgICAgICAgIHRyYW5zZmVyVG9Db250cmFjdChfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CgogICAgICAgIC8vc3RhbmRhcmQgZnVuY3Rpb24gdHJhbnNmZXIgc2ltaWxhciB0byBFUkMyMCB0cmFuc2ZlciB3aXRoIG5vIF9kYXRhCiAgICAgICAgLy9hZGRlZCBkdWUgdG8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgcmVhc29ucwoKICAgICAgICBieXRlcyBtZW1vcnkgZW1wdHk7CiAgICAgICAgaWYoaXNDb250cmFjdChfdG8pKSB7CiAgICAgICAgICAgIHRyYW5zZmVyVG9Db250cmFjdChfdG8sIF92YWx1ZSwgZW1wdHkpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIGVtcHR5KTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJUb0FkZHJlc3MoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgIGludGVybmFsIHsKICAgICAgICBfZGF0YTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJUb0NvbnRyYWN0KGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpICBpbnRlcm5hbCB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoIF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKCBfdmFsdWUpOwogICAgICAgIENvbnRyYWN0UmVjZWl2ZXIgcmVjZWl2ZXIgPSBDb250cmFjdFJlY2VpdmVyKF90byk7CiAgICAgICAgcmVjZWl2ZXIudG9rZW5GYWxsYmFjayhtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7ICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIC8vYXNzZW1ibGUgdGhlIGdpdmVuIGFkZHJlc3MgYnl0ZWNvZGUuIElmIGJ5dGVjb2RlIGV4aXN0cyB0aGVuIHRoZSBfYWRkciBpcyBhIGNvbnRyYWN0LgogICAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSByZXR1cm5zIChib29sIGlzX2NvbnRyYWN0KSB7CiAgICAgICAgICAgIF9hZGRyOwogICAgICAgICAgdWludDI1NiBsZW5ndGg7CiAgICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgICAgLy9yZXRyaWV2ZSB0aGUgc2l6ZSBvZiB0aGUgY29kZSBvbiB0YXJnZXQgYWRkcmVzcywgdGhpcyBuZWVkcyBhc3NlbWJseQogICAgICAgICAgICAgIGxlbmd0aCA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgICAgIH0KICAgICAgICAgIGlmKGxlbmd0aD4wKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IEVSQzIzU3RhbmRhcmRUb2tlbiBpcyBFUkMyM0Jhc2ljVG9rZW4gewogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgZXZlbnQgQXBwcm92YWwgKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsKICAgICAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgICAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgICAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7CgogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CgogICAgICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAgICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93OwoKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cgp9CgoKCgovLyBCYXNlZCBpbiBwYXJ0IG9uIGNvZGUgYnkgT3Blbi1aZXBwZWxpbjogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS5naXQKLy8gQmFzZWQgaW4gcGFydCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbApjb250cmFjdCBHYW1lUGxheWVyQ29pbiBpcyBFUkMyM1N0YW5kYXJkVG9rZW4gewogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkdhbWUgUGxheWVyIENvaW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiR1BDIjsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CiAgICBhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZz1hZGRyZXNzKDB4MDAzZjY5Zjg1YmI5N0UyMjE3OTVmNGMyNzA4RUEwMDRDNzMzNzhGYSk7IC8vbXVsdGlzaWcgd2FsbGV0LCB0byB3aGljaCBhbGwgY29udHJpYnV0aW9ucyB3aWxsIGJlIHNlbnQKICAgIGFkZHJlc3MgcHVibGljIGZvdW5kYXRpb247IC8vb3duZXIgYWRkcmVzcwogICAgYWRkcmVzcyBwdWJsaWMgY2FuZGlkYXRlOyAvL293bmVyIGNhbmRpZGF0ZSBpbiAyLXBoYXNlIG93bmVyc2hpcCB0cmFuc2ZlcgogICAgdWludDI1NiBwdWJsaWMgaG91cl9ibG9ja3MgPSAyMTI7IC8vIGV2ZXJ5IGhvdXIgYmxvY2tzIAogICAgdWludDI1NiBwdWJsaWMgZGF5X2Jsb2NrcyA9IGhvdXJfYmxvY2tzICogMjQgOyAvLyBldmVyeSBkYXkgYmxvY2tzIAoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgY29udHJpYnV0aW9uczsgLy9rZWVwcyB0cmFjayBvZiBldGhlciBjb250cmlidXRpb25zIGluIFdlaSBvZiBlYWNoIGNvbnRyaWJ1dG9yIGFkZHJlc3MKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0QmxvY2sgPSA0MDQ3NTAwOyAvL3ByZS1jcm93ZHNhbGUgc3RhcnQgYmxvY2sgCiAgICB1aW50MjU2IHB1YmxpYyBwcmVFbmRCbG9jayA9IHN0YXJ0QmxvY2sgKyBkYXlfYmxvY2tzICogNzsgLy8gd2VlayAxIHByZS1jcm93ZHNhbGUgZW5kIGJsb2NrCiAgICB1aW50MjU2IHB1YmxpYyBwaGFzZTFTdGFydEJsb2NrID0gcHJlRW5kQmxvY2s7IC8vQ3Jvd2RzYWxlIHN0YXJ0IGJsb2NrCiAgICB1aW50MjU2IHB1YmxpYyBwaGFzZTFFbmRCbG9jayA9IHBoYXNlMVN0YXJ0QmxvY2sgKyBkYXlfYmxvY2tzICogNzsgLy9XZWVrIDIgZW5kIGJsb2NrIChlc3RpbWF0ZSkKICAgIHVpbnQyNTYgcHVibGljIHBoYXNlMkVuZEJsb2NrID0gcGhhc2UxRW5kQmxvY2sgKyBkYXlfYmxvY2tzICogNzsgLy9XZWVrIDMgZW5kIGJsb2NrIChlc3RpbWF0ZSkKICAgIHVpbnQyNTYgcHVibGljIHBoYXNlM0VuZEJsb2NrID0gcGhhc2UyRW5kQmxvY2sgKyAgZGF5X2Jsb2NrcyAqIDcgOyAvL1dlZWsgNCBlbmQgYmxvY2sgKGVzdGltYXRlKQogICAgdWludDI1NiBwdWJsaWMgZW5kQmxvY2sgPSBzdGFydEJsb2NrICsgZGF5X2Jsb2NrcyAqIDE4NDsgLy8gd2hvbGUgY3Jvd2RzYWxlIGVuZCBibG9jayAoMTg0IGRheXMgLCA2IG1vbnRoKQogICAgdWludDI1NiBwdWJsaWMgY3Jvd2RzYWxlVG9rZW5TdXBwbHkgPSA3MCAqICgxMCoqNikgKiAoMTAqKjE4KTsgLy9BbW91bnQgb2YgdG9rZW5zIGZvciBzYWxlIGR1cmluZyBjcm93ZHNhbGUKICAgIHVpbnQyNTYgcHVibGljIGJvdW50eVRva2VuU3VwcGx5ID0gMTAgKiAoMTAqKjYpICogKDEwKioxOCk7IC8vVG9rZW5zIGZvciBib3VudHkKICAgIHVpbnQyNTYgcHVibGljIGZvdW5kYXRpb25Ub2tlblN1cHBseSA9IDIwICogKDEwKio2KSAqICgxMCoqMTgpOyAvL1Rva2VucyBmb3IgR2FtZXBsYXllcmNvaW4gdGVhbQogICAgdWludDI1NiBwdWJsaWMgY3Jvd2RzYWxlVG9rZW5Tb2xkID0gMDsgLy9LZWVwcyB0cmFjayBvZiB0aGUgYW1vdW50IG9mIHRva2VucyBzb2xkIGR1cmluZyB0aGUgY3Jvd2RzYWxlCiAgICB1aW50MjU2IHB1YmxpYyBwcmVzYWxlRXRoZXJSYWlzZWQgPSAwOyAvL0tlZXBzIHRyYWNrIG9mIHRoZSBFdGhlciByYWlzZWQgZHVyaW5nIHRoZSBjcm93ZHNhbGUKICAgIAogICAgYm9vbCBwdWJsaWMgaGFsdGVkID0gZmFsc2U7IC8vSGFsdCBjcm93ZHNhbGUgaW4gZW1lcmdlbmN5CiAgICBldmVudCBIYWx0KCk7IC8vSGFsdCBldmVudAogICAgZXZlbnQgVW5oYWx0KCk7IC8vVW5oYWx0IGV2ZW50CgogICAgbW9kaWZpZXIgb25seUZvdW5kYXRpb24oKSB7CiAgICAgICAgLy9vbmx5IGRvIGlmIGNhbGwgaXMgZnJvbSBvd25lciBtb2RpZmllcgogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGZvdW5kYXRpb24pIHRocm93OwogICAgICAgIF87CiAgICB9CgoKICAgIG1vZGlmaWVyIHdoZW5Ob3RIYWx0ZWQoKSB7CiAgICAgICAgLy8gb25seSBkbyB3aGVuIG5vdCBoYWx0ZWQgbW9kaWZpZXIKICAgICAgICBpZiAoaGFsdGVkKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIC8vQ29uc3RydWN0b3I6IHNldCBtdWx0aXNpZyBjcm93ZHNhbGUgcmVjaXBpZW50IHdhbGxldCBhZGRyZXNzIGFuZCBmdW5kIHRoZSBmb3VuZGF0aW9uCiAgICAvL0luaXRpYWxpemUgdG90YWwgc3VwcGx5IGFuZCBhbGxvY2F0ZSBlY29zeXN0ZW0gJiBmb3VuZGF0aW9uIHRva2VucwogIAlmdW5jdGlvbiBHYW1lUGxheWVyQ29pbigpIHsKICAgICAgICBmb3VuZGF0aW9uID0gbXNnLnNlbmRlcjsKICAgICAgICB0b3RhbFN1cHBseSA9IGJvdW50eVRva2VuU3VwcGx5LmFkZChmb3VuZGF0aW9uVG9rZW5TdXBwbHkpOwogICAgICAgIGJhbGFuY2VzW2ZvdW5kYXRpb25dID0gdG90YWxTdXBwbHk7CiAgCX0KCiAgICAvL0ZhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gcmVjZWl2aW5nIEV0aGVyLgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBidXkoKTsKICAgIH0KCgogICAgLy9IYWx0IElDTyBpbiBjYXNlIG9mIGVtZXJnZW5jeS4KICAgIGZ1bmN0aW9uIGhhbHQoKSBvbmx5Rm91bmRhdGlvbiB7CiAgICAgICAgaGFsdGVkID0gdHJ1ZTsKICAgICAgICBIYWx0KCk7CiAgICB9CgogICAgZnVuY3Rpb24gdW5oYWx0KCkgb25seUZvdW5kYXRpb24gewogICAgICAgIGhhbHRlZCA9IGZhbHNlOwogICAgICAgIFVuaGFsdCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eSgpIHBheWFibGUgewogICAgICAgIGJ1eVJlY2lwaWVudChtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvL0FsbG93IGFkZHJlc3NlcyB0byBidXkgdG9rZW4gZm9yIGFub3RoZXIgYWNjb3VudAogICAgZnVuY3Rpb24gYnV5UmVjaXBpZW50KGFkZHJlc3MgcmVjaXBpZW50KSBwdWJsaWMgcGF5YWJsZSB3aGVuTm90SGFsdGVkIHsKICAgICAgICBpZihtc2cudmFsdWUgPT0gMCkgdGhyb3c7CiAgICAgICAgaWYoIShwcmVDcm93ZHNhbGVPbigpfHxjcm93ZHNhbGVPbigpKSkgdGhyb3c7Ly9vbmx5IGFsbG93cyBkdXJpbmcgcHJlc2FsZS9jcm93ZHNhbGUKICAgICAgICBpZihjb250cmlidXRpb25zW3JlY2lwaWVudF0uYWRkKG1zZy52YWx1ZSk+cGVyQWRkcmVzc0NhcCgpKSB0aHJvdzsvL3BlciBhZGRyZXNzIGNhcAogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gbXNnLnZhbHVlLm11bChyZXR1cm5SYXRlKCkpOyAvL2RlY2ltYWxzPTE4LCBzbyBubyBuZWVkIHRvIGFkanVzdCBmb3IgdW5pdAogICAgICAgIGlmKGNyb3dkc2FsZVRva2VuU29sZC5hZGQodG9rZW5zKT5jcm93ZHNhbGVUb2tlblN1cHBseSkgdGhyb3c7Ly9tYXggc3VwcGx5IGxpbWl0CgogICAgICAgIGJhbGFuY2VzW3JlY2lwaWVudF0gPSBiYWxhbmNlc1tyZWNpcGllbnRdLmFkZCh0b2tlbnMpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKHRva2Vucyk7CiAgICAgICAgcHJlc2FsZUV0aGVyUmFpc2VkID0gcHJlc2FsZUV0aGVyUmFpc2VkLmFkZChtc2cudmFsdWUpOwogICAgICAgIGNvbnRyaWJ1dGlvbnNbcmVjaXBpZW50XSA9IGNvbnRyaWJ1dGlvbnNbcmVjaXBpZW50XS5hZGQobXNnLnZhbHVlKTsKICAgICAgICBjcm93ZHNhbGVUb2tlblNvbGQgPSBjcm93ZHNhbGVUb2tlblNvbGQuYWRkKHRva2Vucyk7CiAgICAgICAgaWYoY3Jvd2RzYWxlVG9rZW5Tb2xkID09IGNyb3dkc2FsZVRva2VuU3VwcGx5ICl7CiAgICAgICAgICAgIC8vSWYgY3Jvd2RzYWxlIHRva2VuIHNvbGQgb3V0LCBlbmQgY3Jvd2RzYWxlCiAgICAgICAgICAgIGlmKGJsb2NrLm51bWJlciA8IHByZUVuZEJsb2NrKSB7CiAgICAgICAgICAgICAgICBwcmVFbmRCbG9jayA9IGJsb2NrLm51bWJlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbmRCbG9jayA9IGJsb2NrLm51bWJlcjsKICAgICAgICB9CiAgICAgICAgaWYgKCFtdWx0aXNpZy5zZW5kKG1zZy52YWx1ZSkpIHRocm93OyAvL2ltbWVkaWF0ZWx5IHNlbmQgRXRoZXIgdG8gbXVsdGlzaWcgYWRkcmVzcwogICAgICAgIFRyYW5zZmVyKHRoaXMsIHJlY2lwaWVudCwgdG9rZW5zKTsKICAgIH0KCiAgICAvL0J1cm5zIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBmcm9tIHRoZSBmb3VuZGF0aW9uCiAgICAvL1VzZWQgdG8gYnVybiB1bnNwZW50IGZ1bmRzIGluIGZvdW5kYXRpb24gREFPCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBleHRlcm5hbCBvbmx5Rm91bmRhdGlvbiByZXR1cm5zIChib29sKSB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIGFkZHJlc3MoMCksIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8yLXBoYXNlIG93bmVyc2hpcCB0cmFuc2ZlcjsKICAgIC8vcHJldmVudCB0cmFuc2ZlcnJpbmcgb3duZXJzaGlwIHRvIG5vbi1leGlzdGVudCBhZGRyZXNzZXMgYnkgYWNjaWRlbnQuCiAgICBmdW5jdGlvbiBwcm9wb3NlRm91bmRhdGlvblRyYW5zZmVyKGFkZHJlc3MgbmV3Rm91bmRhdGlvbikgZXh0ZXJuYWwgb25seUZvdW5kYXRpb24gewogICAgICAgIC8vcHJvcG9zZSBuZXcgb3duZXIKICAgICAgICBjYW5kaWRhdGUgPSBuZXdGb3VuZGF0aW9uOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbmNlbEZvdW5kYXRpb25UcmFuc2ZlcigpIGV4dGVybmFsIG9ubHlGb3VuZGF0aW9uIHsKICAgICAgICBjYW5kaWRhdGUgPSBhZGRyZXNzKDApOwogICAgfQoKICAgIGZ1bmN0aW9uIGFjY2VwdEZvdW5kYXRpb25UcmFuc2ZlcigpIGV4dGVybmFsIHsKICAgICAgICAvL25ldyBvd25lciBhY2NlcHQgdHJhbnNmZXIgdG8gY29tcGxldGUgdHJhbnNmZXIKICAgICAgICBpZihtc2cuc2VuZGVyICE9IGNhbmRpZGF0ZSkgdGhyb3c7CiAgICAgICAgZm91bmRhdGlvbiA9IGNhbmRpZGF0ZTsKICAgICAgICBjYW5kaWRhdGUgPSBhZGRyZXNzKDApOwogICAgfQoKICAgIC8vQWxsb3cgdG8gY2hhbmdlIHRoZSByZWNpcGllbnQgbXVsdGlzaWcgYWRkcmVzcwogICAgZnVuY3Rpb24gc2V0TXVsdGlzaWcoYWRkcmVzcyBhZGRyKSBleHRlcm5hbCBvbmx5Rm91bmRhdGlvbiB7CiAgICAgIAlpZiAoYWRkciA9PSBhZGRyZXNzKDApKSB0aHJvdzsKICAgICAgCW11bHRpc2lnID0gYWRkcjsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgfQoKCSAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgIHsKICAgICAgICBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CgkgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgIHsKICAgICAgICBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvL1JldHVybiByYXRlIG9mIHRva2VuIGFnYWluc3QgZXRoZXIuCiAgICBmdW5jdGlvbiByZXR1cm5SYXRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICAgIGlmIChibG9jay5udW1iZXI+PXN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPD1wcmVFbmRCbG9jaykgcmV0dXJuIDMwMDA7IC8vIFdlZWsgMSBQcmUtY3Jvd2RzYWxlICwgNTAlIGJvdW50eQogICAgICAgIGlmIChibG9jay5udW1iZXI+PXBoYXNlMVN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPD1waGFzZTFFbmRCbG9jaykgcmV0dXJuIDI4MDA7IC8vV2VlayAyIENyb3dkc2FsZSBwaGFzZTEgNDAlIGJvdW50eQogICAgICAgIGlmIChibG9jay5udW1iZXI+cGhhc2UxRW5kQmxvY2sgJiYgYmxvY2subnVtYmVyPD1waGFzZTJFbmRCbG9jaykgcmV0dXJuIDI2MDA7IC8vV2VlayAzIFBoYXNlMiAzMCUgYm91bnR5CiAgICAgICAgaWYgKGJsb2NrLm51bWJlcj5waGFzZTJFbmRCbG9jayAmJiBibG9jay5udW1iZXI8PXBoYXNlM0VuZEJsb2NrKSByZXR1cm4gMjQwMDsgLy9XZWVrIDQgUGhhc2UzIDIwJSBib3VudHkKICAgICAgICByZXR1cm4gMjAwMDsvLyByZXN0IGRheXMgLCBub3JtYWwgCiAgICB9CgogICAgLy9wZXIgYWRkcmVzcyBjYXAgaW4gV2VpOiAxMDAwIGV0aGVyICsgMSUgb2YgZXRoZXIgcmVjZWl2ZWQgYXQgdGhlIGdpdmVuIHRpbWUuCiAgICBmdW5jdGlvbiBwZXJBZGRyZXNzQ2FwKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgYmFzZWxpbmUgPSAxMDAwICogKDEwKioxOCk7CiAgICAgICAgcmV0dXJuIGJhc2VsaW5lLmFkZChwcmVzYWxlRXRoZXJSYWlzZWQuZGl2KDEwMCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHByZUNyb3dkc2FsZU9uKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvL3JldHVybiB3aGV0aGVyIHByZXNhbGUgaXMgb24gYWNjb3JkaW5nIHRvIGJsb2NrIG51bWJlcgogICAgICAgIHJldHVybiAoYmxvY2subnVtYmVyPj1zdGFydEJsb2NrICYmIGJsb2NrLm51bWJlcjw9cHJlRW5kQmxvY2spOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyb3dkc2FsZU9uKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvL3JldHVybiB3aGV0aGVyIGNyb3dkc2FsZSBpcyBvbiBhY2NvcmRpbmcgdG8gYmxvY2sgbnVtYmVyCiAgICAgICAgcmV0dXJuIChibG9jay5udW1iZXI+PXBoYXNlMVN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPD1lbmRCbG9jayk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldEV0aGVyUmFpc2VkKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vZ2V0dGVyIGZ1bmN0aW9uIGZvciBldGhlclJhaXNlZAogICAgICAgIHJldHVybiBwcmVzYWxlRXRoZXJSYWlzZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VG9rZW5Tb2xkKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vZ2V0dGVyIGZ1bmN0aW9uIGZvciBjcm93ZHNhbGVUb2tlblNvbGQKICAgICAgICByZXR1cm4gY3Jvd2RzYWxlVG9rZW5Tb2xkOwogICAgfQoKfQ=='.
	

]
