Class {
	#name : #SRT7c1eb207c07e7ab13cf245585bd03d0fa478d034,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7c1eb207c07e7ab13cf245585bd03d0fa478d034 >> base64 [
	^ 'Ly8gR3JvdmUgdjAuMgoKCi8vLyBAdGl0bGUgR3JvdmVMaWIgLSBMaWJyYXJ5IGZvciBxdWVyaWFibGUgaW5kZXhlZCBvcmRlcmVkIGRhdGEuCi8vLyBAYXV0aG9yIFBpcGVyTWVycmlhbSAtIDw8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iMzU0NTVjNDU1MDQ3NTg1MDQ3NDc1YzU0NTg3NTUyNTg1NDVjNTkxYjU2NWE1OCI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvYT4+CmxpYnJhcnkgR3JvdmVMaWIgewogICAgICAgIC8qCiAgICAgICAgICogIEluZGV4ZXMgZm9yIG9yZGVyZWQgZGF0YQogICAgICAgICAqCiAgICAgICAgICogIEFkZHJlc3M6IDB4N2MxZWIyMDdjMDdlN2FiMTNjZjI0NTU4NWJkMDNkMGZhNDc4ZDAzNAogICAgICAgICAqLwogICAgICAgIHN0cnVjdCBJbmRleCB7CiAgICAgICAgICAgICAgICBieXRlczMyIHJvb3Q7CiAgICAgICAgICAgICAgICBtYXBwaW5nIChieXRlczMyID0+IE5vZGUpIG5vZGVzOwogICAgICAgIH0KCiAgICAgICAgc3RydWN0IE5vZGUgewogICAgICAgICAgICAgICAgYnl0ZXMzMiBpZDsKICAgICAgICAgICAgICAgIGludCB2YWx1ZTsKICAgICAgICAgICAgICAgIGJ5dGVzMzIgcGFyZW50OwogICAgICAgICAgICAgICAgYnl0ZXMzMiBsZWZ0OwogICAgICAgICAgICAgICAgYnl0ZXMzMiByaWdodDsKICAgICAgICAgICAgICAgIHVpbnQgaGVpZ2h0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbWF4KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgICAgIGlmIChhID49IGIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBiOwogICAgICAgIH0KCiAgICAgICAgLyoKICAgICAgICAgKiAgTm9kZSBnZXR0ZXJzCiAgICAgICAgICovCiAgICAgICAgLy8vIEBkZXYgUmV0cmlldmUgdGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgbm9kZS4KICAgICAgICAvLy8gQHBhcmFtIGluZGV4IFRoZSBpbmRleCB0aGF0IHRoZSBub2RlIGlzIHBhcnQgb2YuCiAgICAgICAgLy8vIEBwYXJhbSBpZCBUaGUgaWQgZm9yIHRoZSBub2RlIHRvIGJlIGxvb2tlZCB1cC4KICAgICAgICBmdW5jdGlvbiBnZXROb2RlSWQoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgICAgICByZXR1cm4gaW5kZXgubm9kZXNbaWRdLmlkOwogICAgICAgIH0KCiAgICAgICAgLy8vIEBkZXYgUmV0cmlldmUgdGhlIHZhbHVlIGZvciB0aGUgbm9kZS4KICAgICAgICAvLy8gQHBhcmFtIGluZGV4IFRoZSBpbmRleCB0aGF0IHRoZSBub2RlIGlzIHBhcnQgb2YuCiAgICAgICAgLy8vIEBwYXJhbSBpZCBUaGUgaWQgZm9yIHRoZSBub2RlIHRvIGJlIGxvb2tlZCB1cC4KICAgICAgICBmdW5jdGlvbiBnZXROb2RlVmFsdWUoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgY29uc3RhbnQgcmV0dXJucyAoaW50KSB7CiAgICAgICAgICAgIHJldHVybiBpbmRleC5ub2Rlc1tpZF0udmFsdWU7CiAgICAgICAgfQoKICAgICAgICAvLy8gQGRldiBSZXRyaWV2ZSB0aGUgaGVpZ2h0IG9mIHRoZSBub2RlLgogICAgICAgIC8vLyBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHRoYXQgdGhlIG5vZGUgaXMgcGFydCBvZi4KICAgICAgICAvLy8gQHBhcmFtIGlkIFRoZSBpZCBmb3IgdGhlIG5vZGUgdG8gYmUgbG9va2VkIHVwLgogICAgICAgIGZ1bmN0aW9uIGdldE5vZGVIZWlnaHQoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgICAgICByZXR1cm4gaW5kZXgubm9kZXNbaWRdLmhlaWdodDsKICAgICAgICB9CgogICAgICAgIC8vLyBAZGV2IFJldHJpZXZlIHRoZSBwYXJlbnQgaWQgb2YgdGhlIG5vZGUuCiAgICAgICAgLy8vIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggdGhhdCB0aGUgbm9kZSBpcyBwYXJ0IG9mLgogICAgICAgIC8vLyBAcGFyYW0gaWQgVGhlIGlkIGZvciB0aGUgbm9kZSB0byBiZSBsb29rZWQgdXAuCiAgICAgICAgZnVuY3Rpb24gZ2V0Tm9kZVBhcmVudChJbmRleCBzdG9yYWdlIGluZGV4LCBieXRlczMyIGlkKSBjb25zdGFudCByZXR1cm5zIChieXRlczMyKSB7CiAgICAgICAgICAgIHJldHVybiBpbmRleC5ub2Rlc1tpZF0ucGFyZW50OwogICAgICAgIH0KCiAgICAgICAgLy8vIEBkZXYgUmV0cmlldmUgdGhlIGxlZnQgY2hpbGQgaWQgb2YgdGhlIG5vZGUuCiAgICAgICAgLy8vIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggdGhhdCB0aGUgbm9kZSBpcyBwYXJ0IG9mLgogICAgICAgIC8vLyBAcGFyYW0gaWQgVGhlIGlkIGZvciB0aGUgbm9kZSB0byBiZSBsb29rZWQgdXAuCiAgICAgICAgZnVuY3Rpb24gZ2V0Tm9kZUxlZnRDaGlsZChJbmRleCBzdG9yYWdlIGluZGV4LCBieXRlczMyIGlkKSBjb25zdGFudCByZXR1cm5zIChieXRlczMyKSB7CiAgICAgICAgICAgIHJldHVybiBpbmRleC5ub2Rlc1tpZF0ubGVmdDsKICAgICAgICB9CgogICAgICAgIC8vLyBAZGV2IFJldHJpZXZlIHRoZSByaWdodCBjaGlsZCBpZCBvZiB0aGUgbm9kZS4KICAgICAgICAvLy8gQHBhcmFtIGluZGV4IFRoZSBpbmRleCB0aGF0IHRoZSBub2RlIGlzIHBhcnQgb2YuCiAgICAgICAgLy8vIEBwYXJhbSBpZCBUaGUgaWQgZm9yIHRoZSBub2RlIHRvIGJlIGxvb2tlZCB1cC4KICAgICAgICBmdW5jdGlvbiBnZXROb2RlUmlnaHRDaGlsZChJbmRleCBzdG9yYWdlIGluZGV4LCBieXRlczMyIGlkKSBjb25zdGFudCByZXR1cm5zIChieXRlczMyKSB7CiAgICAgICAgICAgIHJldHVybiBpbmRleC5ub2Rlc1tpZF0ucmlnaHQ7CiAgICAgICAgfQoKICAgICAgICAvLy8gQGRldiBSZXRyaWV2ZSB0aGUgbm9kZSBpZCBvZiB0aGUgbmV4dCBub2RlIGluIHRoZSB0cmVlLgogICAgICAgIC8vLyBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHRoYXQgdGhlIG5vZGUgaXMgcGFydCBvZi4KICAgICAgICAvLy8gQHBhcmFtIGlkIFRoZSBpZCBmb3IgdGhlIG5vZGUgdG8gYmUgbG9va2VkIHVwLgogICAgICAgIGZ1bmN0aW9uIGdldFByZXZpb3VzTm9kZShJbmRleCBzdG9yYWdlIGluZGV4LCBieXRlczMyIGlkKSBjb25zdGFudCByZXR1cm5zIChieXRlczMyKSB7CiAgICAgICAgICAgIE5vZGUgc3RvcmFnZSBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2lkXTsKCiAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5pZCA9PSAweDApIHsKICAgICAgICAgICAgICAgIC8vIFVua25vd24gbm9kZSwganVzdCByZXR1cm4gMHgwOwogICAgICAgICAgICAgICAgcmV0dXJuIDB4MDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgTm9kZSBtZW1vcnkgY2hpbGQ7CgogICAgICAgICAgICBpZiAoY3VycmVudE5vZGUubGVmdCAhPSAweDApIHsKICAgICAgICAgICAgICAgIC8vIFRyYWNlIGxlZnQgdG8gbGF0ZXN0IGNoaWxkIGluIGxlZnQgdHJlZS4KICAgICAgICAgICAgICAgIGNoaWxkID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUubGVmdF07CgogICAgICAgICAgICAgICAgd2hpbGUgKGNoaWxkLnJpZ2h0ICE9IDApIHsKICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGluZGV4Lm5vZGVzW2NoaWxkLnJpZ2h0XTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZC5pZDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlLnBhcmVudCAhPSAweDApIHsKICAgICAgICAgICAgICAgIC8vIE5vdyB3ZSB0cmFjZSBiYWNrIHVwIHRocm91Z2ggcGFyZW50IHJlbGF0aW9uc2hpcHMsIGxvb2tpbmcKICAgICAgICAgICAgICAgIC8vIGZvciBhIGxpbmsgd2hlcmUgdGhlIGNoaWxkIGlzIHRoZSByaWdodCBjaGlsZCBvZiBpdCdzCiAgICAgICAgICAgICAgICAvLyBwYXJlbnQuCiAgICAgICAgICAgICAgICBOb2RlIHN0b3JhZ2UgcGFyZW50ID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUucGFyZW50XTsKICAgICAgICAgICAgICAgIGNoaWxkID0gY3VycmVudE5vZGU7CgogICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50LnJpZ2h0ID09IGNoaWxkLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnQuaWQ7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50LnBhcmVudCA9PSAweDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNoaWxkID0gcGFyZW50OwogICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGluZGV4Lm5vZGVzW3BhcmVudC5wYXJlbnRdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBub2RlLCBhbmQgaGFzIG5vIHByZXZpb3VzIG5vZGUuCiAgICAgICAgICAgIHJldHVybiAweDA7CiAgICAgICAgfQoKICAgICAgICAvLy8gQGRldiBSZXRyaWV2ZSB0aGUgbm9kZSBpZCBvZiB0aGUgcHJldmlvdXMgbm9kZSBpbiB0aGUgdHJlZS4KICAgICAgICAvLy8gQHBhcmFtIGluZGV4IFRoZSBpbmRleCB0aGF0IHRoZSBub2RlIGlzIHBhcnQgb2YuCiAgICAgICAgLy8vIEBwYXJhbSBpZCBUaGUgaWQgZm9yIHRoZSBub2RlIHRvIGJlIGxvb2tlZCB1cC4KICAgICAgICBmdW5jdGlvbiBnZXROZXh0Tm9kZShJbmRleCBzdG9yYWdlIGluZGV4LCBieXRlczMyIGlkKSBjb25zdGFudCByZXR1cm5zIChieXRlczMyKSB7CiAgICAgICAgICAgIE5vZGUgc3RvcmFnZSBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2lkXTsKCiAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5pZCA9PSAweDApIHsKICAgICAgICAgICAgICAgIC8vIFVua25vd24gbm9kZSwganVzdCByZXR1cm4gMHgwOwogICAgICAgICAgICAgICAgcmV0dXJuIDB4MDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgTm9kZSBtZW1vcnkgY2hpbGQ7CgogICAgICAgICAgICBpZiAoY3VycmVudE5vZGUucmlnaHQgIT0gMHgwKSB7CiAgICAgICAgICAgICAgICAvLyBUcmFjZSByaWdodCB0byBlYXJsaWVzdCBjaGlsZCBpbiByaWdodCB0cmVlLgogICAgICAgICAgICAgICAgY2hpbGQgPSBpbmRleC5ub2Rlc1tjdXJyZW50Tm9kZS5yaWdodF07CgogICAgICAgICAgICAgICAgd2hpbGUgKGNoaWxkLmxlZnQgIT0gMCkgewogICAgICAgICAgICAgICAgICAgIGNoaWxkID0gaW5kZXgubm9kZXNbY2hpbGQubGVmdF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQuaWQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5wYXJlbnQgIT0gMHgwKSB7CiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgbm9kZSBpcyB0aGUgbGVmdCBjaGlsZCBvZiBpdCdzIHBhcmVudCwgdGhlbiB0aGUKICAgICAgICAgICAgICAgIC8vIHBhcmVudCBpcyB0aGUgbmV4dCBvbmUuCiAgICAgICAgICAgICAgICBOb2RlIHN0b3JhZ2UgcGFyZW50ID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUucGFyZW50XTsKICAgICAgICAgICAgICAgIGNoaWxkID0gY3VycmVudE5vZGU7CgogICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50LmxlZnQgPT0gY2hpbGQuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudC5pZDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQucGFyZW50ID09IDB4MCkgewogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBwYXJlbnQ7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gaW5kZXgubm9kZXNbcGFyZW50LnBhcmVudF07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gTm93IHdlIG5lZWQgdG8gdHJhY2UgYWxsIHRoZSB3YXkgdXAgY2hlY2tpbmcgdG8gc2VlIGlmIGFueSBwYXJlbnQgaXMgdGhlIAogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaW5hbCBub2RlLgogICAgICAgICAgICByZXR1cm4gMHgwOwogICAgICAgIH0KCgogICAgICAgIC8vLyBAZGV2IFVwZGF0ZXMgb3IgSW5zZXJ0cyB0aGUgaWQgaW50byB0aGUgaW5kZXggYXQgaXRzIGFwcHJvcHJpYXRlIGxvY2F0aW9uIGJhc2VkIG9uIHRoZSB2YWx1ZSBwcm92aWRlZC4KICAgICAgICAvLy8gQHBhcmFtIGluZGV4IFRoZSBpbmRleCB0aGF0IHRoZSBub2RlIGlzIHBhcnQgb2YuCiAgICAgICAgLy8vIEBwYXJhbSBpZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIGRhdGEgZWxlbWVudCB0aGUgaW5kZXggbm9kZSB3aWxsIHJlcHJlc2VudC4KICAgICAgICAvLy8gQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSBvZiB0aGUgZGF0YSBlbGVtZW50IHRoYXQgcmVwcmVzZW50cyBpdCdzIHRvdGFsIG9yZGVyaW5nIHdpdGggcmVzcGVjdCB0byBvdGhlciBlbGVtZW50ZXMuCiAgICAgICAgZnVuY3Rpb24gaW5zZXJ0KEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMzIgaWQsIGludCB2YWx1ZSkgcHVibGljIHsKICAgICAgICAgICAgICAgIGlmIChpbmRleC5ub2Rlc1tpZF0uaWQgPT0gaWQpIHsKICAgICAgICAgICAgICAgICAgICAvLyBBIG5vZGUgd2l0aCB0aGlzIGlkIGFscmVhZHkgZXhpc3RzLiAgSWYgdGhlIHZhbHVlIGlzCiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNhbWUsIHRoZW4ganVzdCByZXR1cm4gZWFybHksIG90aGVyd2lzZSwgcmVtb3ZlIGl0CiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHJlaW5zZXJ0IGl0LgogICAgICAgICAgICAgICAgICAgIGlmIChpbmRleC5ub2Rlc1tpZF0udmFsdWUgPT0gdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZW1vdmUoaW5kZXgsIGlkKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB1aW50IGxlZnRIZWlnaHQ7CiAgICAgICAgICAgICAgICB1aW50IHJpZ2h0SGVpZ2h0OwoKICAgICAgICAgICAgICAgIGJ5dGVzMzIgcHJldmlvdXNOb2RlSWQgPSAweDA7CgogICAgICAgICAgICAgICAgaWYgKGluZGV4LnJvb3QgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAgICAgaW5kZXgucm9vdCA9IGlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgTm9kZSBzdG9yYWdlIGN1cnJlbnROb2RlID0gaW5kZXgubm9kZXNbaW5kZXgucm9vdF07CgogICAgICAgICAgICAgICAgLy8gRG8gaW5zZXJ0aW9uCiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5pZCA9PSAweDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIG5ldyB1bnBvcHVsYXRlZCBub2RlLgogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5pZCA9IGlkOwogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5wYXJlbnQgPSBwcmV2aW91c05vZGVJZDsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUudmFsdWUgPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHByZXZpb3VzIG5vZGUgaWQuCiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNOb2RlSWQgPSBjdXJyZW50Tm9kZS5pZDsKCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG5ldyBub2RlIGJlbG9uZ3MgaW4gdGhlIHJpZ2h0IHN1YnRyZWUKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPj0gY3VycmVudE5vZGUudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlLnJpZ2h0ID09IDB4MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUucmlnaHQgPSBpZDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2N1cnJlbnROb2RlLnJpZ2h0XTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbmV3IG5vZGUgYmVsb25ncyBpbiB0aGUgbGVmdCBzdWJ0cmVlLgogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5sZWZ0ID09IDB4MCkgewogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5sZWZ0ID0gaWQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUubGVmdF07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gUmViYWxhbmNlIHRoZSB0cmVlCiAgICAgICAgICAgICAgICBfcmViYWxhbmNlVHJlZShpbmRleCwgY3VycmVudE5vZGUuaWQpOwogICAgICAgIH0KCiAgICAgICAgLy8vIEBkZXYgQ2hlY2tzIHdoZXRoZXIgYSBub2RlIGZvciB0aGUgZ2l2ZW4gdW5pcXVlIGlkZW50aWZpZXIgZXhpc3RzIHdpdGhpbiB0aGUgZ2l2ZW4gaW5kZXguCiAgICAgICAgLy8vIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggdGhhdCBzaG91bGQgYmUgc2VhcmNoZWQKICAgICAgICAvLy8gQHBhcmFtIGlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgZGF0YSBlbGVtZW50IHRvIGNoZWNrIGZvci4KICAgICAgICBmdW5jdGlvbiBleGlzdHMoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgICAgICByZXR1cm4gKGluZGV4Lm5vZGVzW2lkXS5oZWlnaHQgPiAwKTsKICAgICAgICB9CgogICAgICAgIC8vLyBAZGV2IFJlbW92ZSB0aGUgbm9kZSBmb3IgdGhlIGdpdmVuIHVuaXF1ZSBpZGVudGlmaWVyIGZyb20gdGhlIGluZGV4LgogICAgICAgIC8vLyBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHRoYXQgc2hvdWxkIGJlIHJlbW92ZWQKICAgICAgICAvLy8gQHBhcmFtIGlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgZGF0YSBlbGVtZW50IHRvIHJlbW92ZS4KICAgICAgICBmdW5jdGlvbiByZW1vdmUoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgcHVibGljIHsKICAgICAgICAgICAgTm9kZSBzdG9yYWdlIHJlcGxhY2VtZW50Tm9kZTsKICAgICAgICAgICAgTm9kZSBzdG9yYWdlIHBhcmVudDsKICAgICAgICAgICAgTm9kZSBzdG9yYWdlIGNoaWxkOwogICAgICAgICAgICBieXRlczMyIHJlYmFsYW5jZU9yaWdpbjsKCiAgICAgICAgICAgIE5vZGUgc3RvcmFnZSBub2RlVG9EZWxldGUgPSBpbmRleC5ub2Rlc1tpZF07CgogICAgICAgICAgICBpZiAobm9kZVRvRGVsZXRlLmlkICE9IGlkKSB7CiAgICAgICAgICAgICAgICAvLyBUaGUgaWQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIHRyZWUuCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChub2RlVG9EZWxldGUubGVmdCAhPSAweDAgfHwgbm9kZVRvRGVsZXRlLnJpZ2h0ICE9IDB4MCkgewogICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIG5vdCBhIGxlYWYgbm9kZSBhbmQgdGh1cyBtdXN0IHJlcGxhY2UgaXRzZWxmIGluCiAgICAgICAgICAgICAgICAvLyBpdCdzIHRyZWUgYnkgZWl0aGVyIHRoZSBwcmV2aW91cyBvciBuZXh0IG5vZGUuCiAgICAgICAgICAgICAgICBpZiAobm9kZVRvRGVsZXRlLmxlZnQgIT0gMHgwKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGd1YXJhbnRlZWQgdG8gbm90IGhhdmUgYSByaWdodCBjaGlsZC4KICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudE5vZGUgPSBpbmRleC5ub2Rlc1tnZXRQcmV2aW91c05vZGUoaW5kZXgsIG5vZGVUb0RlbGV0ZS5pZCldOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGd1YXJhbnRlZWQgdG8gbm90IGhhdmUgYSBsZWZ0IGNoaWxkLgogICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2dldE5leHROb2RlKGluZGV4LCBub2RlVG9EZWxldGUuaWQpXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIFRoZSByZXBsYWNlbWVudE5vZGUgaXMgZ3VhcmFudGVlZCB0byBoYXZlIGEgcGFyZW50LgogICAgICAgICAgICAgICAgcGFyZW50ID0gaW5kZXgubm9kZXNbcmVwbGFjZW1lbnROb2RlLnBhcmVudF07CgogICAgICAgICAgICAgICAgLy8gS2VlcCBub3RlIG9mIHRoZSBsb2NhdGlvbiB0aGF0IG91ciB0cmVlIHJlYmFsYW5jaW5nIHNob3VsZAogICAgICAgICAgICAgICAgLy8gc3RhcnQgYXQuCiAgICAgICAgICAgICAgICByZWJhbGFuY2VPcmlnaW4gPSByZXBsYWNlbWVudE5vZGUuaWQ7CgogICAgICAgICAgICAgICAgLy8gSm9pbiB0aGUgcGFyZW50IG9mIHRoZSByZXBsYWNlbWVudCBub2RlIHdpdGggYW55IHN1YnRyZWUgb2YKICAgICAgICAgICAgICAgIC8vIHRoZSByZXBsYWNlbWVudCBub2RlLiAgV2UgY2FuIGd1YXJhbnRlZSB0aGF0IHRoZSByZXBsYWNlbWVudAogICAgICAgICAgICAgICAgLy8gbm9kZSBoYXMgYXQgbW9zdCBvbmUgc3VidHJlZSBiZWNhdXNlIG9mIGhvdyBnZXROZXh0Tm9kZSBhbmQKICAgICAgICAgICAgICAgIC8vIGdldFByZXZpb3VzTm9kZSBhcmUgdXNlZC4KICAgICAgICAgICAgICAgIGlmIChwYXJlbnQubGVmdCA9PSByZXBsYWNlbWVudE5vZGUuaWQpIHsKICAgICAgICAgICAgICAgICAgICBwYXJlbnQubGVmdCA9IHJlcGxhY2VtZW50Tm9kZS5yaWdodDsKICAgICAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnROb2RlLnJpZ2h0ICE9IDB4MCkgewogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGluZGV4Lm5vZGVzW3JlcGxhY2VtZW50Tm9kZS5yaWdodF07CiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IHBhcmVudC5pZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocGFyZW50LnJpZ2h0ID09IHJlcGxhY2VtZW50Tm9kZS5pZCkgewogICAgICAgICAgICAgICAgICAgIHBhcmVudC5yaWdodCA9IHJlcGxhY2VtZW50Tm9kZS5sZWZ0OwogICAgICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudE5vZGUubGVmdCAhPSAweDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBpbmRleC5ub2Rlc1tyZXBsYWNlbWVudE5vZGUubGVmdF07CiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IHBhcmVudC5pZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gTm93IHdlIHJlcGxhY2UgdGhlIG5vZGVUb0RlbGV0ZSB3aXRoIHRoZSByZXBsYWNlbWVudE5vZGUuCiAgICAgICAgICAgICAgICAvLyBUaGlzIGluY2x1ZGVzIHBhcmVudC9jaGlsZCByZWxhdGlvbnNoaXBzIGZvciBhbGwgb2YgdGhlCiAgICAgICAgICAgICAgICAvLyBwYXJlbnQsIHRoZSBsZWZ0IGNoaWxkLCBhbmQgdGhlIHJpZ2h0IGNoaWxkLgogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnROb2RlLnBhcmVudCA9IG5vZGVUb0RlbGV0ZS5wYXJlbnQ7CiAgICAgICAgICAgICAgICBpZiAobm9kZVRvRGVsZXRlLnBhcmVudCAhPSAweDApIHsKICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBpbmRleC5ub2Rlc1tub2RlVG9EZWxldGUucGFyZW50XTsKICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50LmxlZnQgPT0gbm9kZVRvRGVsZXRlLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5sZWZ0ID0gcmVwbGFjZW1lbnROb2RlLmlkOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50LnJpZ2h0ID09IG5vZGVUb0RlbGV0ZS5pZCkgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQucmlnaHQgPSByZXBsYWNlbWVudE5vZGUuaWQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5vZGUgd2UgYXJlIGRlbGV0aW5nIGlzIHRoZSByb290IG5vZGUgdXBkYXRlIHRoZQogICAgICAgICAgICAgICAgICAgIC8vIGluZGV4IHJvb3Qgbm9kZSBwb2ludGVyLgogICAgICAgICAgICAgICAgICAgIGluZGV4LnJvb3QgPSByZXBsYWNlbWVudE5vZGUuaWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnROb2RlLmxlZnQgPSBub2RlVG9EZWxldGUubGVmdDsKICAgICAgICAgICAgICAgIGlmIChub2RlVG9EZWxldGUubGVmdCAhPSAweDApIHsKICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGluZGV4Lm5vZGVzW25vZGVUb0RlbGV0ZS5sZWZ0XTsKICAgICAgICAgICAgICAgICAgICBjaGlsZC5wYXJlbnQgPSByZXBsYWNlbWVudE5vZGUuaWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnROb2RlLnJpZ2h0ID0gbm9kZVRvRGVsZXRlLnJpZ2h0OwogICAgICAgICAgICAgICAgaWYgKG5vZGVUb0RlbGV0ZS5yaWdodCAhPSAweDApIHsKICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGluZGV4Lm5vZGVzW25vZGVUb0RlbGV0ZS5yaWdodF07CiAgICAgICAgICAgICAgICAgICAgY2hpbGQucGFyZW50ID0gcmVwbGFjZW1lbnROb2RlLmlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGVUb0RlbGV0ZS5wYXJlbnQgIT0gMHgwKSB7CiAgICAgICAgICAgICAgICAvLyBUaGUgbm9kZSBiZWluZyBkZWxldGVkIGlzIGEgbGVhZiBub2RlIHNvIHdlIG9ubHkgZXJhc2UgaXQncwogICAgICAgICAgICAgICAgLy8gcGFyZW50IGxpbmthZ2UuCiAgICAgICAgICAgICAgICBwYXJlbnQgPSBpbmRleC5ub2Rlc1tub2RlVG9EZWxldGUucGFyZW50XTsKCiAgICAgICAgICAgICAgICBpZiAocGFyZW50LmxlZnQgPT0gbm9kZVRvRGVsZXRlLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmxlZnQgPSAweDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocGFyZW50LnJpZ2h0ID09IG5vZGVUb0RlbGV0ZS5pZCkgewogICAgICAgICAgICAgICAgICAgIHBhcmVudC5yaWdodCA9IDB4MDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBrZWVwIG5vdGUgb2Ygd2hlcmUgdGhlIHJlYmFsYW5jaW5nIHNob3VsZCBiZWdpbi4KICAgICAgICAgICAgICAgIHJlYmFsYW5jZU9yaWdpbiA9IHBhcmVudC5pZDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYm90aCBhIGxlYWYgbm9kZSBhbmQgdGhlIHJvb3Qgbm9kZSwgc28gd2UgbmVlZCB0bwogICAgICAgICAgICAgICAgLy8gdW5zZXQgdGhlIHJvb3Qgbm9kZSBwb2ludGVyLgogICAgICAgICAgICAgICAgaW5kZXgucm9vdCA9IDB4MDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gTm93IHdlIHplcm8gb3V0IGFsbCBvZiB0aGUgZmllbGRzIG9uIHRoZSBub2RlVG9EZWxldGUuCiAgICAgICAgICAgIG5vZGVUb0RlbGV0ZS5pZCA9IDB4MDsKICAgICAgICAgICAgbm9kZVRvRGVsZXRlLnZhbHVlID0gMDsKICAgICAgICAgICAgbm9kZVRvRGVsZXRlLnBhcmVudCA9IDB4MDsKICAgICAgICAgICAgbm9kZVRvRGVsZXRlLmxlZnQgPSAweDA7CiAgICAgICAgICAgIG5vZGVUb0RlbGV0ZS5yaWdodCA9IDB4MDsKICAgICAgICAgICAgbm9kZVRvRGVsZXRlLmhlaWdodCA9IDA7CgogICAgICAgICAgICAvLyBXYWxrIGJhY2sgdXAgdGhlIHRyZWUgcmViYWxhbmNpbmcKICAgICAgICAgICAgaWYgKHJlYmFsYW5jZU9yaWdpbiAhPSAweDApIHsKICAgICAgICAgICAgICAgIF9yZWJhbGFuY2VUcmVlKGluZGV4LCByZWJhbGFuY2VPcmlnaW4pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBieXRlczIgY29uc3RhbnQgR1QgPSAiPiI7CiAgICAgICAgYnl0ZXMyIGNvbnN0YW50IExUID0gIjwiOwogICAgICAgIGJ5dGVzMiBjb25zdGFudCBHVEUgPSAiPj0iOwogICAgICAgIGJ5dGVzMiBjb25zdGFudCBMVEUgPSAiPD0iOwogICAgICAgIGJ5dGVzMiBjb25zdGFudCBFUSA9ICI9PSI7CgogICAgICAgIGZ1bmN0aW9uIF9jb21wYXJlKGludCBsZWZ0LCBieXRlczIgb3BlcmF0b3IsIGludCByaWdodCkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgICAgICBpZiAob3BlcmF0b3IgPT0gR1QpIHsKICAgICAgICAgICAgICAgIHJldHVybiAobGVmdCA+IHJpZ2h0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAob3BlcmF0b3IgPT0gTFQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAobGVmdCA8IHJpZ2h0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAob3BlcmF0b3IgPT0gR1RFKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKGxlZnQgPj0gcmlnaHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PSBMVEUpIHsKICAgICAgICAgICAgICAgIHJldHVybiAobGVmdCA8PSByaWdodCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09IEVRKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKGxlZnQgPT0gcmlnaHQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBJbnZhbGlkIG9wZXJhdG9yLgogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIF9nZXRNYXhpbXVtKEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMzIgaWQpIGludGVybmFsIHJldHVybnMgKGludCkgewogICAgICAgICAgICAgICAgTm9kZSBzdG9yYWdlIGN1cnJlbnROb2RlID0gaW5kZXgubm9kZXNbaWRdOwoKICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlLnJpZ2h0ID09IDB4MCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudE5vZGUudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUucmlnaHRdOwogICAgICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gX2dldE1pbmltdW0oSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgaW50ZXJuYWwgcmV0dXJucyAoaW50KSB7CiAgICAgICAgICAgICAgICBOb2RlIHN0b3JhZ2UgY3VycmVudE5vZGUgPSBpbmRleC5ub2Rlc1tpZF07CgogICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUubGVmdCA9PSAweDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnROb2RlLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2N1cnJlbnROb2RlLmxlZnRdOwogICAgICAgICAgICAgICAgfQogICAgICAgIH0KCgogICAgICAgIC8qKiBAZGV2IFF1ZXJ5IHRoZSBpbmRleCBmb3IgdGhlIGVkZ2UtbW9zdCBub2RlIHRoYXQgc2F0aXNmaWVzIHRoZQogICAgICAgICAqICBnaXZlbiBxdWVyeS4gIEZvciA+LCA+PSwgYW5kID09LCB0aGlzIHdpbGwgYmUgdGhlIGxlZnQtbW9zdCBub2RlCiAgICAgICAgICogIHRoYXQgc2F0aXNmaWVzIHRoZSBjb21wYXJpc29uLiAgRm9yIDwgYW5kIDw9IHRoaXMgd2lsbCBiZSB0aGUKICAgICAgICAgKiAgcmlnaHQtbW9zdCBub2RlIHRoYXQgc2F0aXNmaWVzIHRoZSBjb21wYXJpc29uLgogICAgICAgICAqLwogICAgICAgIC8vLyBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHRoYXQgc2hvdWxkIGJlIHF1ZXJpZWQKICAgICAgICAvKiogQHBhcmFtIG9wZXJhdG9yIE9uZSBvZiAnPicsICc+PScsICc8JywgJzw9JywgJz09JyB0byBzcGVjaWZ5IHdoYXQKICAgICAgICAgKiAgdHlwZSBvZiBjb21wYXJpc29uIG9wZXJhdG9yIHNob3VsZCBiZSB1c2VkLgogICAgICAgICAqLwogICAgICAgIGZ1bmN0aW9uIHF1ZXJ5KEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMiBvcGVyYXRvciwgaW50IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgICAgICAgICAgYnl0ZXMzMiByb290Tm9kZUlkID0gaW5kZXgucm9vdDsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKHJvb3ROb2RlSWQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRW1wdHkgdHJlZS4KICAgICAgICAgICAgICAgICAgICByZXR1cm4gMHgwOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIE5vZGUgc3RvcmFnZSBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW3Jvb3ROb2RlSWRdOwoKICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKF9jb21wYXJlKGN1cnJlbnROb2RlLnZhbHVlLCBvcGVyYXRvciwgdmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgZm91bmQgYSBtYXRjaCBidXQgaXQgbWlnaHQgbm90IGJlIHRoZQogICAgICAgICAgICAgICAgICAgICAgICAvLyAqY29ycmVjdCogbWF0Y2guCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgob3BlcmF0b3IgPT0gTFQpIHx8IChvcGVyYXRvciA9PSBMVEUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIGtlZXAgdHJhdmVyc2luZyByaWdodCB1bnRpbCB0aGlzIGlzIG5vCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb25nZXIgdHJ1ZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5yaWdodCA9PSAweDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudE5vZGUuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2NvbXBhcmUoX2dldE1pbmltdW0oaW5kZXgsIGN1cnJlbnROb2RlLnJpZ2h0KSwgb3BlcmF0b3IsIHZhbHVlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIGFyZSBzdGlsbCBub2RlcyB0byB0aGUgcmlnaHQgdGhhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUucmlnaHRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnROb2RlLmlkOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG9wZXJhdG9yID09IEdUKSB8fCAob3BlcmF0b3IgPT0gR1RFKSB8fCAob3BlcmF0b3IgPT0gRVEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIGtlZXAgdHJhdmVyc2luZyBsZWZ0IHVudGlsIHRoaXMgaXMgbm8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvbmdlciB0cnVlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlLmxlZnQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnROb2RlLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9jb21wYXJlKF9nZXRNYXhpbXVtKGluZGV4LCBjdXJyZW50Tm9kZS5sZWZ0KSwgb3BlcmF0b3IsIHZhbHVlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUubGVmdF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudE5vZGUuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICgob3BlcmF0b3IgPT0gTFQpIHx8IChvcGVyYXRvciA9PSBMVEUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5sZWZ0ID09IDB4MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIG5vIG5vZGVzIHRoYXQgYXJlIGxlc3MgdGhhbiB0aGUgdmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIHJldHVybiBudWxsLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDB4MDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2N1cnJlbnROb2RlLmxlZnRdOwogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICgob3BlcmF0b3IgPT0gR1QpIHx8IChvcGVyYXRvciA9PSBHVEUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5yaWdodCA9PSAweDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIGFyZSBubyBub2RlcyB0aGF0IGFyZSBncmVhdGVyIHRoYW4gdGhlIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyByZXR1cm4gbnVsbC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAweDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUgPSBpbmRleC5ub2Rlc1tjdXJyZW50Tm9kZS5yaWdodF07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09IEVRKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS52YWx1ZSA8IHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUucmlnaHQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDB4MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUucmlnaHRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS52YWx1ZSA+IHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUubGVmdCA9PSAweDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMHgwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUgPSBpbmRleC5ub2Rlc1tjdXJyZW50Tm9kZS5sZWZ0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gX3JlYmFsYW5jZVRyZWUoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgaW50ZXJuYWwgewogICAgICAgICAgICAvLyBUcmFjZSBiYWNrIHVwIHJlYmFsYW5jaW5nIHRoZSB0cmVlIGFuZCB1cGRhdGluZyBoZWlnaHRzIGFzCiAgICAgICAgICAgIC8vIG5lZWRlZC4uCiAgICAgICAgICAgIE5vZGUgc3RvcmFnZSBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2lkXTsKCiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICAgICAgICBpbnQgYmFsYW5jZUZhY3RvciA9IF9nZXRCYWxhbmNlRmFjdG9yKGluZGV4LCBjdXJyZW50Tm9kZS5pZCk7CgogICAgICAgICAgICAgICAgaWYgKGJhbGFuY2VGYWN0b3IgPT0gMikgewogICAgICAgICAgICAgICAgICAgIC8vIFJpZ2h0IHJvdGF0aW9uICh0cmVlIGlzIGhlYXZ5IG9uIHRoZSBsZWZ0KQogICAgICAgICAgICAgICAgICAgIGlmIChfZ2V0QmFsYW5jZUZhY3RvcihpbmRleCwgY3VycmVudE5vZGUubGVmdCkgPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHN1YnRyZWUgaXMgbGVhbmluZyByaWdodCBzbyBpdCBuZWVkIHRvIGJlCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdGF0ZWQgbGVmdCBiZWZvcmUgdGhlIGN1cnJlbnQgbm9kZSBpcyByb3RhdGVkCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJpZ2h0LgogICAgICAgICAgICAgICAgICAgICAgICBfcm90YXRlTGVmdChpbmRleCwgY3VycmVudE5vZGUubGVmdCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF9yb3RhdGVSaWdodChpbmRleCwgY3VycmVudE5vZGUuaWQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChiYWxhbmNlRmFjdG9yID09IC0yKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gTGVmdCByb3RhdGlvbiAodHJlZSBpcyBoZWF2eSBvbiB0aGUgcmlnaHQpCiAgICAgICAgICAgICAgICAgICAgaWYgKF9nZXRCYWxhbmNlRmFjdG9yKGluZGV4LCBjdXJyZW50Tm9kZS5yaWdodCkgPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgc3VidHJlZSBpcyBsZWFuaW5nIGxlZnQgc28gaXQgbmVlZCB0byBiZQogICAgICAgICAgICAgICAgICAgICAgICAvLyByb3RhdGVkIHJpZ2h0IGJlZm9yZSB0aGUgY3VycmVudCBub2RlIGlzIHJvdGF0ZWQKICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGVmdC4KICAgICAgICAgICAgICAgICAgICAgICAgX3JvdGF0ZVJpZ2h0KGluZGV4LCBjdXJyZW50Tm9kZS5yaWdodCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF9yb3RhdGVMZWZ0KGluZGV4LCBjdXJyZW50Tm9kZS5pZCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCgtMSA8PSBiYWxhbmNlRmFjdG9yKSAmJiAoYmFsYW5jZUZhY3RvciA8PSAxKSkgewogICAgICAgICAgICAgICAgICAgIF91cGRhdGVOb2RlSGVpZ2h0KGluZGV4LCBjdXJyZW50Tm9kZS5pZCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlLnBhcmVudCA9PSAweDApIHsKICAgICAgICAgICAgICAgICAgICAvLyBSZWFjaGVkIHRoZSByb290IHdoaWNoIG1heSBiZSBuZXcgZHVlIHRvIHRyZWUKICAgICAgICAgICAgICAgICAgICAvLyByb3RhdGlvbiwgc28gc2V0IGl0IGFzIHRoZSByb290IGFuZCB0aGVuIGJyZWFrLgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUucGFyZW50XTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gX2dldEJhbGFuY2VGYWN0b3IoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgaW50ZXJuYWwgcmV0dXJucyAoaW50KSB7CiAgICAgICAgICAgICAgICBOb2RlIHN0b3JhZ2Ugbm9kZSA9IGluZGV4Lm5vZGVzW2lkXTsKCiAgICAgICAgICAgICAgICByZXR1cm4gaW50KGluZGV4Lm5vZGVzW25vZGUubGVmdF0uaGVpZ2h0KSAtIGludChpbmRleC5ub2Rlc1tub2RlLnJpZ2h0XS5oZWlnaHQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gX3VwZGF0ZU5vZGVIZWlnaHQoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgaW50ZXJuYWwgewogICAgICAgICAgICAgICAgTm9kZSBzdG9yYWdlIG5vZGUgPSBpbmRleC5ub2Rlc1tpZF07CgogICAgICAgICAgICAgICAgbm9kZS5oZWlnaHQgPSBtYXgoaW5kZXgubm9kZXNbbm9kZS5sZWZ0XS5oZWlnaHQsIGluZGV4Lm5vZGVzW25vZGUucmlnaHRdLmhlaWdodCkgKyAxOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gX3JvdGF0ZUxlZnQoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgaW50ZXJuYWwgewogICAgICAgICAgICBOb2RlIHN0b3JhZ2Ugb3JpZ2luYWxSb290ID0gaW5kZXgubm9kZXNbaWRdOwoKICAgICAgICAgICAgaWYgKG9yaWdpbmFsUm9vdC5yaWdodCA9PSAweDApIHsKICAgICAgICAgICAgICAgIC8vIENhbm5vdCByb3RhdGUgbGVmdCBpZiB0aGVyZSBpcyBubyByaWdodCBvcmlnaW5hbFJvb3QgdG8gcm90YXRlIGludG8KICAgICAgICAgICAgICAgIC8vIHBsYWNlLgogICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFRoZSByaWdodCBjaGlsZCBpcyB0aGUgbmV3IHJvb3QsIHNvIGl0IGdldHMgdGhlIG9yaWdpbmFsCiAgICAgICAgICAgIC8vIGBvcmlnaW5hbFJvb3QucGFyZW50YCBhcyBpdCdzIHBhcmVudC4KICAgICAgICAgICAgTm9kZSBzdG9yYWdlIG5ld1Jvb3QgPSBpbmRleC5ub2Rlc1tvcmlnaW5hbFJvb3QucmlnaHRdOwogICAgICAgICAgICBuZXdSb290LnBhcmVudCA9IG9yaWdpbmFsUm9vdC5wYXJlbnQ7CgogICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgcm9vdCBuZWVkcyB0byBoYXZlIGl0J3MgcmlnaHQgY2hpbGQgbnVsbGVkIG91dC4KICAgICAgICAgICAgb3JpZ2luYWxSb290LnJpZ2h0ID0gMHgwOwoKICAgICAgICAgICAgaWYgKG9yaWdpbmFsUm9vdC5wYXJlbnQgIT0gMHgwKSB7CiAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIHBhcmVudCBub2RlLCBpdCBuZWVkcyB0byBub3cgcG9pbnQgZG93bndhcmQgYXQKICAgICAgICAgICAgICAgIC8vIHRoZSBuZXdSb290IHdoaWNoIGlzIHJvdGF0aW5nIGludG8gdGhlIHBsYWNlIHdoZXJlIGBub2RlYCB3YXMuCiAgICAgICAgICAgICAgICBOb2RlIHN0b3JhZ2UgcGFyZW50ID0gaW5kZXgubm9kZXNbb3JpZ2luYWxSb290LnBhcmVudF07CgogICAgICAgICAgICAgICAgLy8gZmlndXJlIG91dCBpZiB3ZSdyZSBhIGxlZnQgb3IgcmlnaHQgY2hpbGQgYW5kIGhhdmUgdGhlCiAgICAgICAgICAgICAgICAvLyBwYXJlbnQgcG9pbnQgdG8gdGhlIG5ldyBub2RlLgogICAgICAgICAgICAgICAgaWYgKHBhcmVudC5sZWZ0ID09IG9yaWdpbmFsUm9vdC5pZCkgewogICAgICAgICAgICAgICAgICAgIHBhcmVudC5sZWZ0ID0gbmV3Um9vdC5pZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChwYXJlbnQucmlnaHQgPT0gb3JpZ2luYWxSb290LmlkKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJpZ2h0ID0gbmV3Um9vdC5pZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIGlmIChuZXdSb290LmxlZnQgIT0gMCkgewogICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5ldyByb290IGhhZCBhIGxlZnQgY2hpbGQsIHRoYXQgbW92ZXMgdG8gYmUgdGhlCiAgICAgICAgICAgICAgICAvLyBuZXcgcmlnaHQgY2hpbGQgb2YgdGhlIG9yaWdpbmFsIHJvb3Qgbm9kZQogICAgICAgICAgICAgICAgTm9kZSBzdG9yYWdlIGxlZnRDaGlsZCA9IGluZGV4Lm5vZGVzW25ld1Jvb3QubGVmdF07CiAgICAgICAgICAgICAgICBvcmlnaW5hbFJvb3QucmlnaHQgPSBsZWZ0Q2hpbGQuaWQ7CiAgICAgICAgICAgICAgICBsZWZ0Q2hpbGQucGFyZW50ID0gb3JpZ2luYWxSb290LmlkOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBVcGRhdGUgdGhlIG5ld1Jvb3QncyBsZWZ0IG5vZGUgdG8gcG9pbnQgYXQgdGhlIG9yaWdpbmFsIG5vZGUuCiAgICAgICAgICAgIG9yaWdpbmFsUm9vdC5wYXJlbnQgPSBuZXdSb290LmlkOwogICAgICAgICAgICBuZXdSb290LmxlZnQgPSBvcmlnaW5hbFJvb3QuaWQ7CgogICAgICAgICAgICBpZiAobmV3Um9vdC5wYXJlbnQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICBpbmRleC5yb290ID0gbmV3Um9vdC5pZDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gVE9ETzogYXJlIGJvdGggb2YgdGhlc2UgdXBkYXRlcyBuZWNlc3Nhcnk/CiAgICAgICAgICAgIF91cGRhdGVOb2RlSGVpZ2h0KGluZGV4LCBvcmlnaW5hbFJvb3QuaWQpOwogICAgICAgICAgICBfdXBkYXRlTm9kZUhlaWdodChpbmRleCwgbmV3Um9vdC5pZCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBfcm90YXRlUmlnaHQoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgaW50ZXJuYWwgewogICAgICAgICAgICBOb2RlIHN0b3JhZ2Ugb3JpZ2luYWxSb290ID0gaW5kZXgubm9kZXNbaWRdOwoKICAgICAgICAgICAgaWYgKG9yaWdpbmFsUm9vdC5sZWZ0ID09IDB4MCkgewogICAgICAgICAgICAgICAgLy8gQ2Fubm90IHJvdGF0ZSByaWdodCBpZiB0aGVyZSBpcyBubyBsZWZ0IG5vZGUgdG8gcm90YXRlIGludG8KICAgICAgICAgICAgICAgIC8vIHBsYWNlLgogICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFRoZSBsZWZ0IGNoaWxkIGlzIHRha2luZyB0aGUgcGxhY2Ugb2Ygbm9kZSwgc28gd2UgdXBkYXRlIGl0J3MKICAgICAgICAgICAgLy8gcGFyZW50IHRvIGJlIHRoZSBvcmlnaW5hbCBwYXJlbnQgb2YgdGhlIG5vZGUuCiAgICAgICAgICAgIE5vZGUgc3RvcmFnZSBuZXdSb290ID0gaW5kZXgubm9kZXNbb3JpZ2luYWxSb290LmxlZnRdOwogICAgICAgICAgICBuZXdSb290LnBhcmVudCA9IG9yaWdpbmFsUm9vdC5wYXJlbnQ7CgogICAgICAgICAgICAvLyBOdWxsIG91dCB0aGUgb3JpZ2luYWxSb290LmxlZnQKICAgICAgICAgICAgb3JpZ2luYWxSb290LmxlZnQgPSAweDA7CgogICAgICAgICAgICBpZiAob3JpZ2luYWxSb290LnBhcmVudCAhPSAweDApIHsKICAgICAgICAgICAgICAgIC8vIElmIHRoZSBub2RlIGhhcyBhIHBhcmVudCwgdXBkYXRlIHRoZSBjb3JyZWN0IGNoaWxkIHRvIHBvaW50CiAgICAgICAgICAgICAgICAvLyBhdCB0aGUgbmV3Um9vdCBub3cuCiAgICAgICAgICAgICAgICBOb2RlIHN0b3JhZ2UgcGFyZW50ID0gaW5kZXgubm9kZXNbb3JpZ2luYWxSb290LnBhcmVudF07CgogICAgICAgICAgICAgICAgaWYgKHBhcmVudC5sZWZ0ID09IG9yaWdpbmFsUm9vdC5pZCkgewogICAgICAgICAgICAgICAgICAgIHBhcmVudC5sZWZ0ID0gbmV3Um9vdC5pZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChwYXJlbnQucmlnaHQgPT0gb3JpZ2luYWxSb290LmlkKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJpZ2h0ID0gbmV3Um9vdC5pZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG5ld1Jvb3QucmlnaHQgIT0gMHgwKSB7CiAgICAgICAgICAgICAgICBOb2RlIHN0b3JhZ2UgcmlnaHRDaGlsZCA9IGluZGV4Lm5vZGVzW25ld1Jvb3QucmlnaHRdOwogICAgICAgICAgICAgICAgb3JpZ2luYWxSb290LmxlZnQgPSBuZXdSb290LnJpZ2h0OwogICAgICAgICAgICAgICAgcmlnaHRDaGlsZC5wYXJlbnQgPSBvcmlnaW5hbFJvb3QuaWQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbmV3IHJvb3QncyByaWdodCBub2RlIHRvIHBvaW50IHRvIHRoZSBvcmlnaW5hbCBub2RlLgogICAgICAgICAgICBvcmlnaW5hbFJvb3QucGFyZW50ID0gbmV3Um9vdC5pZDsKICAgICAgICAgICAgbmV3Um9vdC5yaWdodCA9IG9yaWdpbmFsUm9vdC5pZDsKCiAgICAgICAgICAgIGlmIChuZXdSb290LnBhcmVudCA9PSAweDApIHsKICAgICAgICAgICAgICAgIGluZGV4LnJvb3QgPSBuZXdSb290LmlkOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBSZWNvbXB1dGUgaGVpZ2h0cy4KICAgICAgICAgICAgX3VwZGF0ZU5vZGVIZWlnaHQoaW5kZXgsIG9yaWdpbmFsUm9vdC5pZCk7CiAgICAgICAgICAgIF91cGRhdGVOb2RlSGVpZ2h0KGluZGV4LCBuZXdSb290LmlkKTsKICAgICAgICB9Cn0='.
	

]
