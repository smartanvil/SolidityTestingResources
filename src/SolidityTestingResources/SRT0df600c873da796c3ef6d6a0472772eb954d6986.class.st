Class {
	#name : #SRT0df600c873da796c3ef6d6a0472772eb954d6986,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0df600c873da796c3ef6d6a0472772eb954d6986 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7Ci8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgICAqIGFjY291bnQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKCiAgICAvKioKICAgICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgICAqLwogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQoKfQovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9Ci8qKgogKiBAdGl0bGUgUG9TVG9rZW5TdGFuZGFyZAogKiBAZGV2IHRoZSBpbnRlcmZhY2Ugb2YgUG9TVG9rZW5TdGFuZGFyZAogKi8KY29udHJhY3QgUG9TVG9rZW5TdGFuZGFyZCB7CiAgICB1aW50MjU2IHB1YmxpYyBzdGFrZVN0YXJ0VGltZTsKICAgIHVpbnQyNTYgcHVibGljIHN0YWtlTWluQWdlOwogICAgdWludDI1NiBwdWJsaWMgc3Rha2VNYXhBZ2U7CiAgIC8vU2NhcmNlY29pbiAtCiAgICBmdW5jdGlvbiBtaW50KCkgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBjb2luQWdlKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGFubnVhbEludGVyZXN0KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCBfYWRkcmVzcywgdWludCBfcmV3YXJkKTsKfQovL1NjYXJjZWNvaW4gLSBDaGFuZ2VkIG5hbWUgb2YgY29udHJhY3QKY29udHJhY3QgU2NhcmNlQ29pblRva2VuIGlzIEVSQzIwLFBvU1Rva2VuU3RhbmRhcmQsT3duYWJsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKLy9TY2FyY2Vjb2luIC0gQ2hhbmdlZCBuYW1lIG9mIGNvbnRyYWN0CiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiU2NhcmNlQ29pblRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlNDTyI7CiAgICB1aW50IHB1YmxpYyBkZWNpbWFscyA9IDE4OwoKICAgIHVpbnQgcHVibGljIGNoYWluU3RhcnRUaW1lOyAvL2NoYWluIHN0YXJ0IHRpbWUKICAgIHVpbnQgcHVibGljIGNoYWluU3RhcnRCbG9ja051bWJlcjsgLy9jaGFpbiBzdGFydCBibG9jayBudW1iZXIKICAgIHVpbnQgcHVibGljIHN0YWtlU3RhcnRUaW1lOyAvL3N0YWtlIHN0YXJ0IHRpbWUKICAgIHVpbnQgcHVibGljIHN0YWtlTWluQWdlID0gMyBkYXlzOyAvLyBtaW5pbXVtIGFnZSBmb3IgY29pbiBhZ2U6IDNECiAgICB1aW50IHB1YmxpYyBzdGFrZU1heEFnZSA9IDkwIGRheXM7IC8vIHN0YWtlIGFnZSBvZiBmdWxsIHdlaWdodDogOTBECiAgICB1aW50IHB1YmxpYyBtYXhNaW50UHJvb2ZPZlN0YWtlID0gMTAqKjE3OyAvLyBkZWZhdWx0IDEwJSBhbm51YWwgaW50ZXJlc3QKCiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIHVpbnQgcHVibGljIG1heFRvdGFsU3VwcGx5OwogICAgdWludCBwdWJsaWMgdG90YWxJbml0aWFsU3VwcGx5OwoKICAgIHN0cnVjdCB0cmFuc2ZlckluU3RydWN0ewogICAgdWludDEyOCBhbW91bnQ7CiAgICB1aW50NjQgdGltZTsKICAgIH0KCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB0cmFuc2ZlckluU3RydWN0W10pIHRyYW5zZmVySW5zOwoKLy9TY2FyY2Vjb2luIC0gUmVtb3ZlZCBidXJuIHN5c3RlbQogICAgLy9ldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8qKgogICAgICogQGRldiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjay4KICAgICAqLwogICAgIHVpbnQgZXRoZXJDb3N0T2ZFYWNoVG9rZW4gID0gMTAwMDAwMDAwMDAwMDA7CiAgICAgZnVuY3Rpb24oKSBwYXlhYmxlewogICAgICAgICBhZGRyZXNzIGNvbGxlY3RvciA9IDB4QzU5QzFmNDNkYTAxNjY3NGQ1OTlmOENhREMyOWQyRmU5MzdiQTA2MTsKICAgICAgIC8vICBldGhlckNvc3RPZkVhY2hUb2tlbiA9IDEwMDAwMDAwMDAwMDAwOwogICAgICAgICB1aW50MjU2IF92YWx1ZSA9IG1zZy52YWx1ZSAvIGV0aGVyQ29zdE9mRWFjaFRva2VuICogMSBldGhlcjsKICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQoX3ZhbHVlKTsKICAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgICAgICAgY29sbGVjdG9yLnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgfQogICAgICBmdW5jdGlvbiBzZXRFdGhlckNvc3RPZkVhY2hUb2tlbih1aW50IGV0aGVyQ29zdE9mRWFjaFRva2VuKSBvbmx5T3duZXIgewogICAgICAgIGV0aGVyQ29zdE9mRWFjaFRva2VuICA9IGV0aGVyQ29zdE9mRWFjaFRva2VuOwogICAgfQogICAgIAogICAgIAogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgICAgIHJlcXVpcmUobXNnLmRhdGEubGVuZ3RoID49IHNpemUgKyA0KTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGNhblBvU01pbnQoKSB7CiAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSA8IG1heFRvdGFsU3VwcGx5KTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIFNjYXJjZWNvaW5TdGFydCgpIG9ubHlPd25lciB7CiAgICAgICAgYWRkcmVzcyByZWNpcGllbnQ7CiAgICAgICAgdWludCB2YWx1ZTsKICAgICAgICB1aW50NjQgX25vdyA9IHVpbnQ2NChub3cpOwogICAgICAgIC8va2lsbCBzdGFydCBpZiB0aGlzIGhhcyBhbHJlYWR5IGJlZW4gcmFuCiAgICAgICAgcmVxdWlyZSgobWF4VG90YWxTdXBwbHkgPD0gMCkpOwoKICAgICAgICBtYXhUb3RhbFN1cHBseSA9IDEuNCooMTAqKjI4KTsgLy8gMTQgQmlsLgogICAgICAgIAogICAgICAgIC8vU2NhcmNlY29pbiAtIE1vZGlmaWVkIGluaXRpYWwgc3VwcGx5IHRvIDE0QmlsCiAgICAgICAgdG90YWxJbml0aWFsU3VwcGx5ID0gMSooMTAqKjI3KTsgLy8gMUJpbAoKICAgICAgICBjaGFpblN0YXJ0VGltZSA9IG5vdzsKICAgICAgICBjaGFpblN0YXJ0QmxvY2tOdW1iZXIgPSBibG9jay5udW1iZXI7CgogICAgICAgIC8vUmVzZXJ2ZWQgY29pbiBmb3IgYm91bnR5LCBwcm9tb3Rpb24gYW5kIHRlYW0gLSA0MDBNaWwKICAgICAgICByZWNpcGllbnQgPSAweEM1OUMxZjQzZGEwMTY2NzRkNTk5ZjhDYURDMjlkMkZlOTM3YkEwNjE7CiAgICAgICAgdmFsdWUgPSA0ICogKDEwKioyNik7CgogICAgICAgIC8vcnVuCiAgICAgICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IHZhbHVlOwogICAgICAgIHRyYW5zZmVySW5zW3JlY2lwaWVudF0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQxMjgodmFsdWUpLF9ub3cpKTsKCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbEluaXRpYWxTdXBwbHk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgLy9TY2FyY2Vjb2luIC0gTW9kaWZpZWQgdG8gbWludAogICAgICAgIGlmKG1zZy5zZW5kZXIgPT0gX3RvKSByZXR1cm4gbWludCgpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIGlmKHRyYW5zZmVySW5zW21zZy5zZW5kZXJdLmxlbmd0aCA+IDApIGRlbGV0ZSB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXTsKICAgICAgICB1aW50NjQgX25vdyA9IHVpbnQ2NChub3cpOwogICAgICAgIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KGJhbGFuY2VzW21zZy5zZW5kZXJdKSxfbm93KSk7CiAgICAgICAgdHJhbnNmZXJJbnNbX3RvXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDEyOChfdmFsdWUpLF9ub3cpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAgICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAgICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbX2Zyb21dLmxlbmd0aCA+IDApIGRlbGV0ZSB0cmFuc2Zlckluc1tfZnJvbV07CiAgICAgICAgdWludDY0IF9ub3cgPSB1aW50NjQobm93KTsKICAgICAgICB0cmFuc2Zlckluc1tfZnJvbV0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQxMjgoYmFsYW5jZXNbX2Zyb21dKSxfbm93KSk7CiAgICAgICAgdHJhbnNmZXJJbnNbX3RvXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDEyOChfdmFsdWUpLF9ub3cpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KLy9TY2FyY2Vjb2luIC0gTW9kaWZpZWQgdGhlIGNvcnJlY3QgdGVjaG5pY2FsIHRlcm0gIm1pbnQiIHRvIGEgd2VsbCBrbm93IHRlcm0gIm1pbnQiIGZvciBtYXJrZXRpbmcgcHVycG9zZXMuCiAgICBmdW5jdGlvbiBtaW50KCkgY2FuUG9TTWludCByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPD0gMCkgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmKHRyYW5zZmVySW5zW21zZy5zZW5kZXJdLmxlbmd0aCA8PSAwKSByZXR1cm4gZmFsc2U7CgogICAgICAgIHVpbnQgcmV3YXJkID0gZ2V0UHJvb2ZPZlN0YWtlUmV3YXJkKG1zZy5zZW5kZXIpOwogICAgICAgIGlmKHJld2FyZCA8PSAwKSByZXR1cm4gZmFsc2U7CgogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKHJld2FyZCk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQocmV3YXJkKTsKICAgICAgICBkZWxldGUgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl07CiAgICAgICAgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQxMjgoYmFsYW5jZXNbbXNnLnNlbmRlcl0pLHVpbnQ2NChub3cpKSk7Ci8vU2NhcmNlY29pbiAtIENoYW5nZSBldmVudCB0byBtaW50CiAgICAgICAgTWludChtc2cuc2VuZGVyLCByZXdhcmQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJsb2NrTnVtYmVyKCkgcmV0dXJucyAodWludCBibG9ja051bWJlcikgewogICAgICAgIGJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyLnN1YihjaGFpblN0YXJ0QmxvY2tOdW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvaW5BZ2UoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQgbXlDb2luQWdlKSB7CiAgICAgICAgbXlDb2luQWdlID0gZ2V0Q29pbkFnZSh3aG8sbm93KTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbm51YWxJbnRlcmVzdCgpIGNvbnN0YW50IHJldHVybnModWludCBpbnRlcmVzdCkgewogICAgICAgIHVpbnQgX25vdyA9IG5vdzsKICAgICAgICBpbnRlcmVzdCA9IG1heE1pbnRQcm9vZk9mU3Rha2U7CiAgICAgICAgLy9TY2FyY2Vjb2luIC0gTW9kaWZpZWQgaW5pdGlhbCBpbnRlcmVzdCByYXRlIHRvIDEwMCUKICAgICAgICBpZigoX25vdy5zdWIoc3Rha2VTdGFydFRpbWUpKS5kaXYoMSB5ZWFycykgPT0gMCkgewogICAgICAgICAgICBpbnRlcmVzdCA9ICg3NzAgKiBtYXhNaW50UHJvb2ZPZlN0YWtlKS5kaXYoMTAwKTsKICAgICAgICB9IGVsc2UgaWYoKF9ub3cuc3ViKHN0YWtlU3RhcnRUaW1lKSkuZGl2KDEgeWVhcnMpID09IDEpIHsKICAgICAgICAgICAgaW50ZXJlc3QgPSAoNDM1ICogbWF4TWludFByb29mT2ZTdGFrZSkuZGl2KDEwMCk7CiAgICAgICAgfSAKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQcm9vZk9mU3Rha2VSZXdhcmQoYWRkcmVzcyBfYWRkcmVzcykgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJlcXVpcmUoIChub3cgPj0gc3Rha2VTdGFydFRpbWUpICYmIChzdGFrZVN0YXJ0VGltZSA+IDApICk7CgogICAgICAgIHVpbnQgX25vdyA9IG5vdzsKICAgICAgICB1aW50IF9jb2luQWdlID0gZ2V0Q29pbkFnZShfYWRkcmVzcywgX25vdyk7CiAgICAgICAgaWYoX2NvaW5BZ2UgPD0gMCkgcmV0dXJuIDA7CgogICAgICAgIHVpbnQgaW50ZXJlc3QgPSBtYXhNaW50UHJvb2ZPZlN0YWtlOwogICAgICAgIC8vIER1ZSB0byB0aGUgaGlnaCBpbnRlcmVzdCByYXRlIGZvciB0aGUgZmlyc3QgdHdvIHllYXJzLCBjb21wb3VuZGluZyBzaG91bGQgYmUgdGFrZW4gaW50byBhY2NvdW50LgogICAgICAgIC8vIEVmZmVjdGl2ZSBhbm51YWwgaW50ZXJlc3QgcmF0ZSA9ICgxICsgKG5vbWluYWwgcmF0ZSAvIG51bWJlciBvZiBjb21wb3VuZGluZyBwZXJpb2RzKSkgXiAobnVtYmVyIG9mIGNvbXBvdW5kaW5nIHBlcmlvZHMpIC0gMQogICAgICAgIC8vU2NhcmNlY29pbiAtIE1vZGlmaWVkIGluaXRpYWwgaW50ZXJlc3QgcmF0ZSB0byAxMDAlCiAgICAgICAgaWYoKF9ub3cuc3ViKHN0YWtlU3RhcnRUaW1lKSkuZGl2KDEgeWVhcnMpID09IDApIHsKICAgICAgICAgICAgLy8gMXN0IHllYXIgZWZmZWN0aXZlIGFubnVhbCBpbnRlcmVzdCByYXRlIGlzIDEwMCUgd2hlbiB3ZSBzZWxlY3QgdGhlIHN0YWtlTWF4QWdlICg5MCBkYXlzKSBhcyB0aGUgY29tcG91bmRpbmcgcGVyaW9kLgogICAgICAgICAgICBpbnRlcmVzdCA9ICg3NzAgKiBtYXhNaW50UHJvb2ZPZlN0YWtlKS5kaXYoMTAwKTsKICAgICAgICB9IGVsc2UgaWYoKF9ub3cuc3ViKHN0YWtlU3RhcnRUaW1lKSkuZGl2KDEgeWVhcnMpID09IDEpIHsKICAgICAgICAgICAgLy8gMm5kIHllYXIgZWZmZWN0aXZlIGFubnVhbCBpbnRlcmVzdCByYXRlIGlzIDUwJSB3aGVuIHdlIHNlbGVjdCB0aGUgc3Rha2VNYXhBZ2UgKDkwIGRheXMpIGFzIHRoZSBjb21wb3VuZGluZyBwZXJpb2QuCiAgICAgICAgICAgIGludGVyZXN0ID0gKDQzNSAqIG1heE1pbnRQcm9vZk9mU3Rha2UpLmRpdigxMDApOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIChfY29pbkFnZSAqIGludGVyZXN0KS5kaXYoMzY1ICogKDEwKipkZWNpbWFscykpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldENvaW5BZ2UoYWRkcmVzcyBfYWRkcmVzcywgdWludCBfbm93KSBpbnRlcm5hbCByZXR1cm5zICh1aW50IF9jb2luQWdlKSB7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbX2FkZHJlc3NdLmxlbmd0aCA8PSAwKSByZXR1cm4gMDsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdHJhbnNmZXJJbnNbX2FkZHJlc3NdLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgaWYoIF9ub3cgPCB1aW50KHRyYW5zZmVySW5zW19hZGRyZXNzXVtpXS50aW1lKS5hZGQoc3Rha2VNaW5BZ2UpICkgY29udGludWU7CgogICAgICAgICAgICB1aW50IG5Db2luU2Vjb25kcyA9IF9ub3cuc3ViKHVpbnQodHJhbnNmZXJJbnNbX2FkZHJlc3NdW2ldLnRpbWUpKTsKICAgICAgICAgICAgaWYoIG5Db2luU2Vjb25kcyA+IHN0YWtlTWF4QWdlICkgbkNvaW5TZWNvbmRzID0gc3Rha2VNYXhBZ2U7CgogICAgICAgICAgICBfY29pbkFnZSA9IF9jb2luQWdlLmFkZCh1aW50KHRyYW5zZmVySW5zW19hZGRyZXNzXVtpXS5hbW91bnQpICogbkNvaW5TZWNvbmRzLmRpdigxIGRheXMpKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb3duZXJTZXRTdGFrZVN0YXJ0VGltZSh1aW50IHRpbWVzdGFtcCkgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKChzdGFrZVN0YXJ0VGltZSA8PSAwKSAmJiAodGltZXN0YW1wID49IGNoYWluU3RhcnRUaW1lKSk7CiAgICAgICAgc3Rha2VTdGFydFRpbWUgPSB0aW1lc3RhbXA7CiAgICB9Cgp9'.
	

]
