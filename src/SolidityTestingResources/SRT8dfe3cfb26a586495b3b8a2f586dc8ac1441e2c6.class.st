Class {
	#name : #SRT8dfe3cfb26a586495b3b8a2f586dc8ac1441e2c6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8dfe3cfb26a586495b3b8a2f586dc8ac1441e2c6 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7Ci8vIO+/vSBVYmVjb2luLiBBbGwgUmlnaHRzIFJlc2VydmVkCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBvd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwoKICAgIGZ1bmN0aW9uIG93bmVkKCkgcGF5YWJsZSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQogICAgCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUob3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9vd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfb3duZXIgIT0gMCk7CiAgICAgICAgbmV3T3duZXIgPSBfb3duZXI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNvbmZpcm1Pd25lcigpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIGRlbGV0ZSBuZXdPd25lcjsKICAgIH0KfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsgIAogICAgCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgogICAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKCiAgICAvKioKICAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwoKICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CgogICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CiAgICAKICAgIC8qKgogICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwgCiAgICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgICovCiAgICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMKICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMKICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgICAgfQogICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKCmNvbnRyYWN0IFViZWNvaW5JQ08gaXMgb3duZWQgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAiMS4wIjsKICAgIGFkZHJlc3MgcHJpdmF0ZSBXSVRIRFJBV19XQUxMRVQ7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFNvbGQgPSAwOwogICAgdWludDI1NiBwdWJsaWMgc29sZE9uU3RhZ2UgPSAwOwogICAgdWludDggcHVibGljIGN1cnJlbnRTdGFnZSA9IDA7CiAgICBVYmVjb2luIHB1YmxpYyByZXdhcmRUb2tlbjsKCgogICAgdWludDI1NltdIHRva2Vuc1JhdGUgPSBbNzAwMCw0MjAwXTsKICAgIHVpbnQyNTZbXSB0b2tlbnNDYXAgPSBbNTAwMDAwMDAsODAwMDAwMDBdOwogICAgbWFwcGluZyhhZGRyZXNzPT51aW50MjU2KSBpbnZlc3RtZW50czsKICAgIHVpbnQyNTYgbGltaXRfb25fYmVuZWZpY2lhcnkgPSAxMDAwICogMTAwMCBldGhlcjsKCiAgICBmdW5jdGlvbiBpbnZlc3RtZW50c09mKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIGludmVzdG1lbnRzW2JlbmVmaWNpYXJ5XTsKICAgIH0KICAKICAgIGZ1bmN0aW9uIGF2YWlsYWJsZU9uU3RhZ2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHRva2Vuc0NhcFtjdXJyZW50U3RhZ2VdLm11bCgxIGV0aGVyKS5zdWIoc29sZE9uU3RhZ2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVRva2VuQ29udHJhY3QoKSBpbnRlcm5hbCByZXR1cm5zIChVYmVjb2luKSB7CiAgICAgIHJldHVybiBuZXcgVWJlY29pbigpOwogICAgfQoKICAgIGZ1bmN0aW9uIGN1cnJlbnRTdGFnZVRva2Vuc0NhcCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIHRva2Vuc0NhcFtjdXJyZW50U3RhZ2VdOwogICAgfQogICAgZnVuY3Rpb24gY3VycmVudFN0YWdlVG9rZW5zUmF0ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIHRva2Vuc1JhdGVbY3VycmVudFN0YWdlXTsKICAgIH0KCiAgICBmdW5jdGlvbiBVYmVjb2luSUNPKCkgcGF5YWJsZSBvd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgV0lUSERSQVdfV0FMTEVUID0gbXNnLnNlbmRlcjsgCiAgICAgICAgcmV3YXJkVG9rZW4gPSBjcmVhdGVUb2tlbkNvbnRyYWN0KCk7CiAgICB9CgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIGJlbmVmaWNpYXJ5KSBwYXlhYmxlIHsKICAgICAgYm9vbCBjYW5CdXkgPSBpbnZlc3RtZW50c09mKGJlbmVmaWNpYXJ5KSA8IGxpbWl0X29uX2JlbmVmaWNpYXJ5OwogICAgICBib29sIHZhbGlkUHVyY2hhc2UgPSBiZW5lZmljaWFyeSAhPSAweDAgJiYgbXNnLnZhbHVlICE9IDA7CiAgICAgIHVpbnQyNTYgY3VycmVudFRva2Vuc0Ftb3VudCA9IGF2YWlsYWJsZVRva2VucygpOwogICAgICByZXF1aXJlKGNhbkJ1eSAmJiB2YWxpZFB1cmNoYXNlICYmIGN1cnJlbnRUb2tlbnNBbW91bnQgPiAwKTsKICAgICAgdWludDI1NiBib3VnaHRUb2tlbnM7CiAgICAgIHVpbnQyNTYgcmVmdW5kQW1vdW50ID0gMDsKICAgICAgCiAgICAgIHVpbnQyNTZbMl0gbWVtb3J5IHRva2Vuc0FuZFJlZnVuZCA9IGNhbGNNdWx0aVN0YWdlKCk7CiAgICAgIGJvdWdodFRva2VucyA9IHRva2Vuc0FuZFJlZnVuZFswXTsKICAgICAgcmVmdW5kQW1vdW50ID0gdG9rZW5zQW5kUmVmdW5kWzFdOwoKICAgICAgcmVxdWlyZShib3VnaHRUb2tlbnMgPCBjdXJyZW50VG9rZW5zQW1vdW50KTsKCiAgICAgIHRvdGFsU29sZCA9IHRvdGFsU29sZC5hZGQoYm91Z2h0VG9rZW5zKTsKICAgICAgaW52ZXN0bWVudHNbYmVuZWZpY2lhcnldID0gaW52ZXN0bWVudHNbYmVuZWZpY2lhcnldLmFkZChib3VnaHRUb2tlbnMpOwogICAgICBpZiggc29sZE9uU3RhZ2UgPj0gdG9rZW5zQ2FwW2N1cnJlbnRTdGFnZV0ubXVsKDEgZXRoZXIpKSB7CiAgICAgICAgdG9OZXh0U3RhZ2UoKTsKICAgICAgfSAKICAgICAgCiAgICAgIHJld2FyZFRva2VuLnRyYW5zZmVyKGJlbmVmaWNpYXJ5LGJvdWdodFRva2Vucyk7CiAgICAgIGlmIChyZWZ1bmRBbW91bnQgPiAwKSAKICAgICAgICAgIHJlZnVuZE1vbmV5KHJlZnVuZEFtb3VudCk7CgogICAgICB3aXRoZHJhd0Z1bmRzKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZm9yY2VXaXRoZHJhdygpIG9ubHlPd25lciB7CiAgICAgIHdpdGhkcmF3RnVuZHModGhpcy5iYWxhbmNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjTXVsdGlTdGFnZSgpIGludGVybmFsIHJldHVybnModWludDI1NlsyXSkgewogICAgICB1aW50MjU2IHN0YWdlQm91Z2h0VG9rZW5zOwogICAgICB1aW50MjU2IHVuZGlzdHJpYnV0ZWRBbW91bnQgPSBtc2cudmFsdWU7IAogICAgICB1aW50MjU2IF9ib3VnaHRUb2tlbnMgPSAwOyAKICAgICAgdWludDI1NiB1bmRpc3RyaWJ1dGVkVG9rZW5zID0gYXZhaWxhYmxlVG9rZW5zKCk7IAoKICAgICAgd2hpbGUodW5kaXN0cmlidXRlZEFtb3VudCA+IDAgJiYgdW5kaXN0cmlidXRlZFRva2VucyA+IDApIHsKICAgICAgICBib29sIG5lZWROZXh0U3RhZ2UgPSBmYWxzZTsgCiAgICAgICAgCiAgICAgICAgc3RhZ2VCb3VnaHRUb2tlbnMgPSBnZXRUb2tlbnNBbW91bnQodW5kaXN0cmlidXRlZEFtb3VudCk7CiAgICAgICAgCgogICAgICAgIGlmKHRvdGFsSW52ZXN0bWVudHMoX2JvdWdodFRva2Vucy5hZGQoc3RhZ2VCb3VnaHRUb2tlbnMpKSA+IGxpbWl0X29uX2JlbmVmaWNpYXJ5KXsKICAgICAgICAgIHN0YWdlQm91Z2h0VG9rZW5zID0gbGltaXRfb25fYmVuZWZpY2lhcnkuc3ViKF9ib3VnaHRUb2tlbnMpOwogICAgICAgICAgdW5kaXN0cmlidXRlZFRva2VucyA9IHN0YWdlQm91Z2h0VG9rZW5zOyAKICAgICAgICB9CgogICAgICAgIAogICAgICAgIGlmIChzdGFnZUJvdWdodFRva2VucyA+IGF2YWlsYWJsZU9uU3RhZ2UoKSkgewogICAgICAgICAgc3RhZ2VCb3VnaHRUb2tlbnMgPSBhdmFpbGFibGVPblN0YWdlKCk7CiAgICAgICAgICBuZWVkTmV4dFN0YWdlID0gdHJ1ZTsgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIF9ib3VnaHRUb2tlbnMgPSBfYm91Z2h0VG9rZW5zLmFkZChzdGFnZUJvdWdodFRva2Vucyk7CiAgICAgICAgdW5kaXN0cmlidXRlZFRva2VucyA9IHVuZGlzdHJpYnV0ZWRUb2tlbnMuc3ViKHN0YWdlQm91Z2h0VG9rZW5zKTsgCiAgICAgICAgdW5kaXN0cmlidXRlZEFtb3VudCA9IHVuZGlzdHJpYnV0ZWRBbW91bnQuc3ViKGdldFRva2Vuc0Nvc3Qoc3RhZ2VCb3VnaHRUb2tlbnMpKTsgCiAgICAgICAgc29sZE9uU3RhZ2UgPSBzb2xkT25TdGFnZS5hZGQoc3RhZ2VCb3VnaHRUb2tlbnMpOwogICAgICAgIGlmIChuZWVkTmV4dFN0YWdlKSAKICAgICAgICAgIHRvTmV4dFN0YWdlKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIFtfYm91Z2h0VG9rZW5zLHVuZGlzdHJpYnV0ZWRBbW91bnRdOwogICAgfQoKCiAgICBmdW5jdGlvbiBzZXRXaXRoZHJhd1dhbGxldChhZGRyZXNzIGFkZHJlc3NUb1dpdGhkcmF3KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGFkZHJlc3NUb1dpdGhkcmF3ICE9IDB4MCk7CiAgICAgICAgV0lUSERSQVdfV0FMTEVUID0gYWRkcmVzc1RvV2l0aGRyYXc7CiAgICB9CiAgICBmdW5jdGlvbiB0b3RhbEludmVzdG1lbnRzKHVpbnQgYWRkaXRpb25hbEFtb3VudCkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICByZXR1cm4gaW52ZXN0bWVudHNPZihtc2cuc2VuZGVyKS5hZGQoYWRkaXRpb25hbEFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kTW9uZXkodWludDI1NiByZWZ1bmRBbW91bnQpIGludGVybmFsIHsKICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihyZWZ1bmRBbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1cm5Ub2tlbnModWludDI1NiBhbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICByZXdhcmRUb2tlbi5idXJuKGFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VG9rZW5zQ29zdCh1aW50MjU2IF90b2tlbnNBbW91bnQpIGludGVybmFsIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gX3Rva2Vuc0Ftb3VudC5kaXYodG9rZW5zUmF0ZVtjdXJyZW50U3RhZ2VdKTsKICAgIH0gCgogICAgZnVuY3Rpb24gZ2V0VG9rZW5zQW1vdW50KHVpbnQyNTYgX2Ftb3VudEluV2VpKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIF9hbW91bnRJbldlaS5tdWwodG9rZW5zUmF0ZVtjdXJyZW50U3RhZ2VdKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b05leHRTdGFnZSgpIGludGVybmFsIHsKICAgICAgICAKICAgICAgICBpZihjdXJyZW50U3RhZ2UgPCB0b2tlbnNSYXRlLmxlbmd0aCAmJiBjdXJyZW50U3RhZ2UgPCB0b2tlbnNDYXAubGVuZ3RoKXsKICAgICAgICAgIGN1cnJlbnRTdGFnZSsrOwogICAgICAgICAgc29sZE9uU3RhZ2UgPSAwOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhdmFpbGFibGVUb2tlbnMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHJld2FyZFRva2VuLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhd0Z1bmRzKHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB7CiAgICAgICAgV0lUSERSQVdfV0FMTEVULnRyYW5zZmVyKGFtb3VudCk7CiAgICB9Cn0KCgpjb250cmFjdCBVYmVjb2luIGlzIFN0YW5kYXJkVG9rZW4gewogICAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAgICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlViZWNvaW4iOwogICAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJVQkUiOwogICAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gIjEuMCI7CiAgICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5ICA9IDMwMDAwMDAwMDAgKiAxIGV0aGVyOwogICAgICBtYXBwaW5nKGFkZHJlc3M9PnVpbnQyNTYpIHByZW1pbmVPZjsKICAgICAgYWRkcmVzc1tdIHByaXZhdGUgcHJlbWluZVdhbGxldHMgPSBbCiAgICAgICAgICAweGMxYjFkQ0E2Njc2MTk4ODhFRjAwNWZBNTE1NDcyRkM4MDU4ODU2RDksIAogICAgICAgICAgMHgyYUI1NDlBRjk4NzIyRjAxMzQzMjY5OEQxRDc0MDI3YzU4OTc4NDNCCiAgICAgIF07CgogICAgICBmdW5jdGlvbiBVYmVjb2luKCkgcHVibGljIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHRvdGFsU3VwcGx5OwogICAgICAgIHByZW1pbmVPZltwcmVtaW5lV2FsbGV0c1swXV0gPSAzMDAwMDAwMDAgKiAxIGV0aGVyOyAKICAgICAgICBwcmVtaW5lT2ZbcHJlbWluZVdhbGxldHNbMV1dID0gMjU3MDAwMDAwMCAqIDEgZXRoZXI7CiAgICAgICAgICAgICAgICAKICAgICAgICBmb3IodWludCBpID0gMDsgaTxwcmVtaW5lV2FsbGV0cy5sZW5ndGg7aSsrKSB7CiAgICAgICAgICB0cmFuc2ZlcihwcmVtaW5lV2FsbGV0c1tpXSxwcmVtaW5lT2ZbcHJlbWluZVdhbGxldHNbaV1dKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQnVybnMgYSBzcGVjaWZpYyBhbW91bnQgb2YgdG9rZW5zLgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIGJ1cm5lZC4KICAgICAqLwogICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwoKICAgICAgICBhZGRyZXNzIGJ1cm5lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYmFsYW5jZXNbYnVybmVyXSA9IGJhbGFuY2VzW2J1cm5lcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgICAgICBCdXJuKGJ1cm5lciwgX3ZhbHVlKTsKICAgIH0KICB9'.
	

]
