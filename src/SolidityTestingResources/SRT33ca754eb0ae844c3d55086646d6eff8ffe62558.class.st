Class {
	#name : #SRT33ca754eb0ae844c3d55086646d6eff8ffe62558,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT33ca754eb0ae844c3d55086646d6eff8ffe62558 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIAogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBpbnRlcm5hbCB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgZW1pdCBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cn0KCmNvbnRyYWN0IHRva2VuSW50ZXJmYWNlIHsKCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKfQoKY29udHJhY3QgcmF0ZUludGVyZmFjZSB7CiAgICBmdW5jdGlvbiByZWFkUmF0ZShzdHJpbmcgX2N1cnJlbmN5KSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IG9uZUV0aGVyVmFsdWUpOwp9Cgpjb250cmFjdCBJQ09FbmdpbmVJbnRlcmZhY2UgewoKICAgIC8vIGZhbHNlIGlmIHRoZSBpY28gaXMgbm90IHN0YXJ0ZWQsIHRydWUgaWYgdGhlIGljbyBpcyBzdGFydGVkIGFuZCBydW5uaW5nLCB0cnVlIGlmIHRoZSBpY28gaXMgY29tcGxldGVkCiAgICBmdW5jdGlvbiBzdGFydGVkKCkgcHVibGljIHZpZXcgcmV0dXJucyhib29sKTsKCiAgICAvLyBmYWxzZSBpZiB0aGUgaWNvIGlzIG5vdCBzdGFydGVkLCBmYWxzZSBpZiB0aGUgaWNvIGlzIHN0YXJ0ZWQgYW5kIHJ1bm5pbmcsIHRydWUgaWYgdGhlIGljbyBpcyBjb21wbGV0ZWQKICAgIGZ1bmN0aW9uIGVuZGVkKCkgcHVibGljIHZpZXcgcmV0dXJucyhib29sKTsKCiAgICAvLyB0aW1lIHN0YW1wIG9mIHRoZSBzdGFydGluZyB0aW1lIG9mIHRoZSBpY28sIG11c3QgcmV0dXJuIDAgaWYgaXQgZGVwZW5kcyBvbiB0aGUgYmxvY2sgbnVtYmVyCiAgICBmdW5jdGlvbiBzdGFydFRpbWUoKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQpOwoKICAgIC8vIHRpbWUgc3RhbXAgb2YgdGhlIGVuZGluZyB0aW1lIG9mIHRoZSBpY28sIG11c3QgcmV0cnVuIDAgaWYgaXQgZGVwZW5kcyBvbiB0aGUgYmxvY2sgbnVtYmVyCiAgICBmdW5jdGlvbiBlbmRUaW1lKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KTsKCiAgICAvLyBPcHRpb25hbCBmdW5jdGlvbiwgY2FuIGJlIGltcGxlbWVudGVkIGluIHBsYWNlIG9mIHN0YXJ0VGltZQogICAgLy8gUmV0dXJucyB0aGUgc3RhcnRpbmcgYmxvY2sgbnVtYmVyIG9mIHRoZSBpY28sIG11c3QgcmV0dXJuIDAgaWYgaXQgZGVwZW5kcyBvbiB0aGUgdGltZSBzdGFtcAogICAgLy8gZnVuY3Rpb24gc3RhcnRCbG9jaygpIHB1YmxpYyB2aWV3IHJldHVybnModWludCk7CgogICAgLy8gT3B0aW9uYWwgZnVuY3Rpb24sIGNhbiBiZSBpbXBsZW1lbnRlZCBpbiBwbGFjZSBvZiBlbmRUaW1lCiAgICAvLyBSZXR1cm5zIHRoZWVuZGluZyBibG9jayBudW1iZXIgb2YgdGhlIGljbywgbXVzdCByZXRydW4gMCBpZiBpdCBkZXBlbmRzIG9uIHRoZSB0aW1lIHN0YW1wCiAgICAvLyBmdW5jdGlvbiBlbmRCbG9jaygpIHB1YmxpYyB2aWV3IHJldHVybnModWludCk7CgogICAgLy8gcmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIHRoZSB0b2tlbnMgYXZhaWxhYmxlIGZvciB0aGUgc2FsZSwgbXVzdCBub3QgY2hhbmdlIHdoZW4gdGhlIGljbyBpcyBzdGFydGVkCiAgICBmdW5jdGlvbiB0b3RhbFRva2VucygpIHB1YmxpYyB2aWV3IHJldHVybnModWludCk7CgogICAgLy8gcmV0dXJucyB0aGUgbnVtYmVyIG9mIHRoZSB0b2tlbnMgYXZhaWxhYmxlIGZvciB0aGUgaWNvLiBBdCB0aGUgbW9tZW50IHRoYXQgdGhlIGljbyBzdGFydHMgaXQgbXVzdCBiZSBlcXVhbCB0byB0b3RhbFRva2VucygpLAogICAgLy8gdGhlbiBpdCB3aWxsIGRlY3JlYXNlLiBJdCBpcyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgcGVyY2VudGFnZSBvZiBzb2xkIHRva2VucyBhcyByZW1haW5pbmdUb2tlbnMoKSAvIHRvdGFsVG9rZW5zKCkKICAgIGZ1bmN0aW9uIHJlbWFpbmluZ1Rva2VucygpIHB1YmxpYyB2aWV3IHJldHVybnModWludCk7CgogICAgLy8gcmV0dXJuIHRoZSBwcmljZSBhcyBudW1iZXIgb2YgdG9rZW5zIHJlbGVhc2VkIGZvciBlYWNoIGV0aGVyCiAgICBmdW5jdGlvbiBwcmljZSgpIHB1YmxpYyB2aWV3IHJldHVybnModWludCk7Cn0KCmNvbnRyYWN0IEtZQ0Jhc2UgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgaXNLeWNTaWduZXI7CiAgICBtYXBwaW5nICh1aW50NjQgPT4gdWludDI1NikgcHVibGljIGFscmVhZHlQYXllZDsKCiAgICBldmVudCBLeWNWZXJpZmllZChhZGRyZXNzIGluZGV4ZWQgc2lnbmVyLCBhZGRyZXNzIGJ1eWVyQWRkcmVzcywgdWludDY0IGJ1eWVySWQsIHVpbnQgbWF4QW1vdW50KTsKCiAgICBmdW5jdGlvbiBLWUNCYXNlKGFkZHJlc3MgW10ga3ljU2lnbmVycykgaW50ZXJuYWwgewogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGt5Y1NpZ25lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaXNLeWNTaWduZXJba3ljU2lnbmVyc1tpXV0gPSB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBNdXN0IGJlIGltcGxlbWVudGVkIGluIGRlc2NlbmRpbmcgY29udHJhY3QgdG8gYXNzaWduIHRva2VucyB0byB0aGUgYnV5ZXJzLiBDYWxsZWQgYWZ0ZXIgdGhlIEtZQyB2ZXJpZmljYXRpb24gaXMgcGFzc2VkCiAgICBmdW5jdGlvbiByZWxlYXNlVG9rZW5zVG8oYWRkcmVzcyBidXllcikgaW50ZXJuYWwgcmV0dXJucyhib29sKTsKCiAgICAvLyBUaGlzIG1ldGhvZCBjYW4gYmUgb3ZlcnJpZGRlbiB0byBlbmFibGUgc29tZSBzZW5kZXIgdG8gYnV5IHRva2VuIGZvciBhIGRpZmZlcmVudCBhZGRyZXNzCiAgICBmdW5jdGlvbiBzZW5kZXJBbGxvd2VkRm9yKGFkZHJlc3MgYnV5ZXIpCiAgICAgICAgaW50ZXJuYWwgdmlldyByZXR1cm5zKGJvb2wpCiAgICB7CiAgICAgICAgcmV0dXJuIGJ1eWVyID09IG1zZy5zZW5kZXI7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zRm9yKGFkZHJlc3MgYnV5ZXJBZGRyZXNzLCB1aW50NjQgYnV5ZXJJZCwgdWludCBtYXhBbW91bnQsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKQogICAgICAgIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShzZW5kZXJBbGxvd2VkRm9yKGJ1eWVyQWRkcmVzcykpOwogICAgICAgIHJldHVybiBidXlJbXBsZW1lbnRhdGlvbihidXllckFkZHJlc3MsIGJ1eWVySWQsIG1heEFtb3VudCwgdiwgciwgcyk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKHVpbnQ2NCBidXllcklkLCB1aW50IG1heEFtb3VudCwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpCiAgICAgICAgcHVibGljIHBheWFibGUgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gYnV5SW1wbGVtZW50YXRpb24obXNnLnNlbmRlciwgYnV5ZXJJZCwgbWF4QW1vdW50LCB2LCByLCBzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXlJbXBsZW1lbnRhdGlvbihhZGRyZXNzIGJ1eWVyQWRkcmVzcywgdWludDY0IGJ1eWVySWQsIHVpbnQgbWF4QW1vdW50LCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykKICAgICAgICBwcml2YXRlIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgLy8gY2hlY2sgdGhlIHNpZ25hdHVyZQogICAgICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTI1NigiRWlkb28gaWNvZW5naW5lIGF1dGhvcml6YXRpb24iLCBhZGRyZXNzKDApLCBidXllckFkZHJlc3MsIGJ1eWVySWQsIG1heEFtb3VudCk7IC8vcmVwbGFjZWQgdGhpcyB3aXRoIGFkZHJlc3MoMCk7CiAgICAgICAgYWRkcmVzcyBzaWduZXIgPSBlY3JlY292ZXIoaGFzaCwgdiwgciwgcyk7CiAgICAgICAgaWYgKCFpc0t5Y1NpZ25lcltzaWduZXJdKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVpbnQyNTYgdG90YWxQYXllZCA9IGFscmVhZHlQYXllZFtidXllcklkXS5hZGQobXNnLnZhbHVlKTsKICAgICAgICAgICAgcmVxdWlyZSh0b3RhbFBheWVkIDw9IG1heEFtb3VudCk7CiAgICAgICAgICAgIGFscmVhZHlQYXllZFtidXllcklkXSA9IHRvdGFsUGF5ZWQ7CiAgICAgICAgICAgIGVtaXQgS3ljVmVyaWZpZWQoc2lnbmVyLCBidXllckFkZHJlc3MsIGJ1eWVySWQsIG1heEFtb3VudCk7CiAgICAgICAgICAgIHJldHVybiByZWxlYXNlVG9rZW5zVG8oYnV5ZXJBZGRyZXNzKTsKICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IFJDIGlzIElDT0VuZ2luZUludGVyZmFjZSwgS1lDQmFzZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIFRva2VuU2FsZSB0b2tlblNhbGVDb250cmFjdDsKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZTsKICAgIHVpbnQyNTYgcHVibGljIGVuZFRpbWU7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIGV0aGVyTWluaW11bTsKICAgIHVpbnQyNTYgcHVibGljIHNvbGRUb2tlbnM7CiAgICB1aW50MjU2IHB1YmxpYyByZW1haW5pbmdUb2tlbnM7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIG9uZVRva2VuSW5Vc2RXZWk7CgkKCQoJbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBldGhlclVzZXI7IC8vIGFkZHJlc3MgPT4gZXRoZXIgYW1vdW50CgltYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHBlbmRpbmdUb2tlblVzZXI7IC8vIGFkZHJlc3MgPT4gdG9rZW4gYW1vdW50IHRoYXQgd2lsbCBiZSBjbGFpbWVkCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHRva2VuVXNlcjsgLy8gYWRkcmVzcyA9PiB0b2tlbiBhbW91bnQgb3duZWQKCXVpbnQyNTZbXSBwdWJsaWMgdG9rZW5UaHJlc2hvbGQ7IC8vIGFycmF5IG9mIHRva2VuIHRocmVzaG9sZCByZWFjaGVkIGluIHdlaSBvZiB0b2tlbgogICAgdWludDI1NltdIHB1YmxpYyBib251c1RocmVzaG9sZDsgLy8gYXJyYXkgb2YgYm9udXMgb2YgZWFjaCB0b2tlblRocmVzaG9sZCByZWFjaGVkIC0gMjAlID0gMjAKCiAgICBmdW5jdGlvbiBSQyhhZGRyZXNzIF90b2tlblNhbGVDb250cmFjdCwgdWludDI1NiBfb25lVG9rZW5JblVzZFdlaSwgdWludDI1NiBfcmVtYWluaW5nVG9rZW5zLCB1aW50MjU2IF9ldGhlck1pbmltdW0sIHVpbnQyNTYgX3N0YXJ0VGltZSAsIHVpbnQyNTYgX2VuZFRpbWUsIGFkZHJlc3MgW10ga3ljU2lnbmVyLCB1aW50MjU2W10gX3Rva2VuVGhyZXNob2xkLCB1aW50MjU2W10gX2JvbnVzVGhyZXNob2xkICkgcHVibGljIEtZQ0Jhc2Uoa3ljU2lnbmVyKSB7CiAgICAgICAgcmVxdWlyZSAoIF90b2tlblNhbGVDb250cmFjdCAhPSAwICk7CiAgICAgICAgcmVxdWlyZSAoIF9vbmVUb2tlbkluVXNkV2VpICE9IDAgKTsKICAgICAgICByZXF1aXJlKCBfcmVtYWluaW5nVG9rZW5zICE9IDAgKTsKICAgICAgICByZXF1aXJlICggX3Rva2VuVGhyZXNob2xkLmxlbmd0aCAhPSAwICk7CiAgICAgICAgcmVxdWlyZSAoIF90b2tlblRocmVzaG9sZC5sZW5ndGggPT0gX2JvbnVzVGhyZXNob2xkLmxlbmd0aCApOwogICAgICAgIGJvbnVzVGhyZXNob2xkID0gX2JvbnVzVGhyZXNob2xkOwogICAgICAgIHRva2VuVGhyZXNob2xkID0gX3Rva2VuVGhyZXNob2xkOwogICAgICAgIAogICAgICAgIAogICAgICAgIHRva2VuU2FsZUNvbnRyYWN0ID0gVG9rZW5TYWxlKF90b2tlblNhbGVDb250cmFjdCk7CiAgICAgICAgCiAgICAgICAgdG9rZW5TYWxlQ29udHJhY3QuYWRkTWVCeVJDKCk7CiAgICAgICAgCiAgICAgICAgc29sZFRva2VucyA9IDA7CiAgICAgICAgcmVtYWluaW5nVG9rZW5zID0gX3JlbWFpbmluZ1Rva2VuczsKICAgICAgICBvbmVUb2tlbkluVXNkV2VpID0gX29uZVRva2VuSW5Vc2RXZWk7CiAgICAgICAgZXRoZXJNaW5pbXVtID0gX2V0aGVyTWluaW11bTsKICAgICAgICAKICAgICAgICBzZXRUaW1lUkMoIF9zdGFydFRpbWUsIF9lbmRUaW1lICk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFRpbWVSQyh1aW50MjU2IF9zdGFydFRpbWUsIHVpbnQyNTYgX2VuZFRpbWUgKSBpbnRlcm5hbCB7CiAgICAgICAgaWYoIF9zdGFydFRpbWUgPT0gMCApIHsKICAgICAgICAgICAgc3RhcnRUaW1lID0gdG9rZW5TYWxlQ29udHJhY3Quc3RhcnRUaW1lKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RhcnRUaW1lID0gX3N0YXJ0VGltZTsKICAgICAgICB9CiAgICAgICAgaWYoIF9lbmRUaW1lID09IDAgKSB7CiAgICAgICAgICAgIGVuZFRpbWUgPSB0b2tlblNhbGVDb250cmFjdC5lbmRUaW1lKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZW5kVGltZSA9IF9lbmRUaW1lOwogICAgICAgIH0KICAgIH0KICAgIAogICAgbW9kaWZpZXIgb25seVRva2VuU2FsZU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB0b2tlblNhbGVDb250cmFjdC5vd25lcigpICk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0VGltZSh1aW50MjU2IF9uZXdTdGFydCwgdWludDI1NiBfbmV3RW5kKSBwdWJsaWMgb25seVRva2VuU2FsZU93bmVyIHsKICAgICAgICBpZiAoIF9uZXdTdGFydCAhPSAwICkgc3RhcnRUaW1lID0gX25ld1N0YXJ0OwogICAgICAgIGlmICggX25ld0VuZCAhPSAwICkgZW5kVGltZSA9IF9uZXdFbmQ7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZU1pbmltdW0odWludDI1NiBfbmV3RXRoZXJNaW5pbXVtKSBwdWJsaWMgb25seVRva2VuU2FsZU93bmVyIHsKICAgICAgICBldGhlck1pbmltdW0gPSBfbmV3RXRoZXJNaW5pbXVtOwogICAgfQogICAgCiAgICBmdW5jdGlvbiByZWxlYXNlVG9rZW5zVG8oYWRkcmVzcyBidXllcikgaW50ZXJuYWwgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYoIG1zZy52YWx1ZSA+IDAgKSB0YWtlRXRoZXIoYnV5ZXIpOwogICAgICAgIGdpdmVUb2tlbihidXllcik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHN0YXJ0ZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gbm93ID4gc3RhcnRUaW1lIHx8IHJlbWFpbmluZ1Rva2VucyA9PSAwOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBlbmRlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBub3cgPiBlbmRUaW1lIHx8IHJlbWFpbmluZ1Rva2VucyA9PSAwOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzdGFydFRpbWUoKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gc3RhcnRUaW1lOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBlbmRUaW1lKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIGVuZFRpbWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRvdGFsVG9rZW5zKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIHJlbWFpbmluZ1Rva2Vucy5hZGQoc29sZFRva2Vucyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlbWFpbmluZ1Rva2VucygpIHB1YmxpYyB2aWV3IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiByZW1haW5pbmdUb2tlbnM7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHByaWNlKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICAgICAgdWludDI1NiBvbmVFdGhlciA9IDEwKioxODsKICAgICAgICByZXR1cm4gb25lRXRoZXIubXVsKDEwKioxOCkuZGl2KCB0b2tlblNhbGVDb250cmFjdC50b2tlblZhbHVlSW5FdGhlcihvbmVUb2tlbkluVXNkV2VpKSApOwogICAgfQoJCglmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZXsKCSAgICByZXF1aXJlKCBub3cgPiBzdGFydFRpbWUgKTsKCSAgICBpZihub3cgPCBlbmRUaW1lKSB7CgkgICAgICAgIHRha2VFdGhlcihtc2cuc2VuZGVyKTsKCSAgICB9IGVsc2UgewoJICAgICAgICBjbGFpbVRva2VuQm9udXMobXNnLnNlbmRlcik7CgkgICAgfQoKCX0KCQoJZXZlbnQgQnV5KGFkZHJlc3MgYnV5ZXIsIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgc29sZFRva2VuLCB1aW50MjU2IHZhbHVlVG9rZW5JblVzZFdlaSApOwoJCglmdW5jdGlvbiB0YWtlRXRoZXIoYWRkcmVzcyBfYnV5ZXIpIGludGVybmFsIHsKCSAgICByZXF1aXJlKCBub3cgPiBzdGFydFRpbWUgKTsKICAgICAgICByZXF1aXJlKCBub3cgPCBlbmRUaW1lICk7CiAgICAgICAgcmVxdWlyZSggbXNnLnZhbHVlID49IGV0aGVyTWluaW11bSk7IAogICAgICAgIHJlcXVpcmUoIHJlbWFpbmluZ1Rva2VucyA+IDAgKTsKICAgICAgICAKICAgICAgICB1aW50MjU2IG9uZVRva2VuID0gMTAgKiogdWludDI1Nih0b2tlblNhbGVDb250cmFjdC5kZWNpbWFscygpKTsKICAgICAgICB1aW50MjU2IHRva2VuVmFsdWUgPSB0b2tlblNhbGVDb250cmFjdC50b2tlblZhbHVlSW5FdGhlcihvbmVUb2tlbkluVXNkV2VpKTsKICAgICAgICB1aW50MjU2IHRva2VuQW1vdW50ID0gbXNnLnZhbHVlLm11bChvbmVUb2tlbikuZGl2KHRva2VuVmFsdWUpOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgdW5ib3VnaHRUb2tlbnMgPSB0b2tlbkludGVyZmFjZSh0b2tlblNhbGVDb250cmFjdC50b2tlbkNvbnRyYWN0KCkpLmJhbGFuY2VPZih0b2tlblNhbGVDb250cmFjdCk7CiAgICAgICAgaWYgKCB1bmJvdWdodFRva2VucyA+IHJlbWFpbmluZ1Rva2VucyApIHsKICAgICAgICAgICAgdW5ib3VnaHRUb2tlbnMgPSByZW1haW5pbmdUb2tlbnM7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHVpbnQyNTYgcmVmdW5kID0gMDsKICAgICAgICBpZiAoIHVuYm91Z2h0VG9rZW5zIDwgdG9rZW5BbW91bnQgKSB7CiAgICAgICAgICAgIHJlZnVuZCA9ICh0b2tlbkFtb3VudCAtIHVuYm91Z2h0VG9rZW5zKS5tdWwodG9rZW5WYWx1ZSkuZGl2KG9uZVRva2VuKTsKICAgICAgICAgICAgdG9rZW5BbW91bnQgPSB1bmJvdWdodFRva2VuczsKCQkJcmVtYWluaW5nVG9rZW5zID0gMDsgLy8gc2V0IHJlbWFpbmluZyB0b2tlbiB0byAwCiAgICAgICAgICAgIF9idXllci50cmFuc2ZlcihyZWZ1bmQpOwogICAgICAgIH0gZWxzZSB7CgkJCXJlbWFpbmluZ1Rva2VucyA9IHJlbWFpbmluZ1Rva2Vucy5zdWIodG9rZW5BbW91bnQpOyAvLyB1cGRhdGUgcmVtYWluaW5nIHRva2VuIHdpdGhvdXQgYm9udXMKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZXRoZXJVc2VyW19idXllcl0gPSBldGhlclVzZXJbX2J1eWVyXS5hZGQobXNnLnZhbHVlLnN1YihyZWZ1bmQpKTsKICAgICAgICBwZW5kaW5nVG9rZW5Vc2VyW19idXllcl0gPSBwZW5kaW5nVG9rZW5Vc2VyW19idXllcl0uYWRkKHRva2VuQW1vdW50KTsJCiAgICAgICAgCiAgICAgICAgZW1pdCBCdXkoIF9idXllciwgbXNnLnZhbHVlLCB0b2tlbkFtb3VudCwgb25lVG9rZW5JblVzZFdlaSApOwoJfQoJCglmdW5jdGlvbiBnaXZlVG9rZW4oYWRkcmVzcyBfYnV5ZXIpIGludGVybmFsIHsKCSAgICByZXF1aXJlKCBwZW5kaW5nVG9rZW5Vc2VyW19idXllcl0gPiAwICk7CgoJCXRva2VuVXNlcltfYnV5ZXJdID0gdG9rZW5Vc2VyW19idXllcl0uYWRkKHBlbmRpbmdUb2tlblVzZXJbX2J1eWVyXSk7CgkKCQl0b2tlblNhbGVDb250cmFjdC5jbGFpbShfYnV5ZXIsIHBlbmRpbmdUb2tlblVzZXJbX2J1eWVyXSk7CgkJc29sZFRva2VucyA9IHNvbGRUb2tlbnMuYWRkKHBlbmRpbmdUb2tlblVzZXJbX2J1eWVyXSk7CgkJcGVuZGluZ1Rva2VuVXNlcltfYnV5ZXJdID0gMDsKCQkKCQl0b2tlblNhbGVDb250cmFjdC53YWxsZXQoKS50cmFuc2ZlcihldGhlclVzZXJbX2J1eWVyXSk7CgkJZXRoZXJVc2VyW19idXllcl0gPSAwOwoJfQoKICAgIGZ1bmN0aW9uIGNsYWltVG9rZW5Cb251cyhhZGRyZXNzIF9idXllcikgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoIG5vdyA+IGVuZFRpbWUgKTsKICAgICAgICByZXF1aXJlKCB0b2tlblVzZXJbX2J1eWVyXSA+IDAgKTsKICAgICAgICB1aW50MjU2IGJvbnVzQXBwbGllZCA9IDA7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdG9rZW5UaHJlc2hvbGQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKCBzb2xkVG9rZW5zID4gdG9rZW5UaHJlc2hvbGRbaV0gKSB7CiAgICAgICAgICAgICAgICBib251c0FwcGxpZWQgPSBib251c1RocmVzaG9sZFtpXTsKCQkJfQoJCX0gICAgCgkJcmVxdWlyZSggYm9udXNBcHBsaWVkID4gMCApOwoJCQoJCXVpbnQyNTYgYWRkVG9rZW5BbW91bnQgPSB0b2tlblVzZXJbX2J1eWVyXS5tdWwoIGJvbnVzQXBwbGllZCApLmRpdigxMCoqMik7CgkJdG9rZW5Vc2VyW19idXllcl0gPSAwOyAKCQkKCQl0b2tlblNhbGVDb250cmFjdC5jbGFpbShfYnV5ZXIsIGFkZFRva2VuQW1vdW50KTsKCQlfYnV5ZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gcmVmdW5kRXRoZXIoYWRkcmVzcyB0bykgcHVibGljIG9ubHlUb2tlblNhbGVPd25lciB7CiAgICAgICAgdG8udHJhbnNmZXIoZXRoZXJVc2VyW3RvXSk7CiAgICAgICAgZXRoZXJVc2VyW3RvXSA9IDA7CiAgICAgICAgcGVuZGluZ1Rva2VuVXNlclt0b10gPSAwOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB3aXRoZHJhdyhhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgb25seVRva2VuU2FsZU93bmVyIHsgCiAgICAgICAgdG8udHJhbnNmZXIodmFsdWUpOwogICAgfQoJCglmdW5jdGlvbiB1c2VyQmFsYW5jZShhZGRyZXNzIF91c2VyKSBwdWJsaWMgdmlldyByZXR1cm5zKCB1aW50MjU2IF9wZW5kaW5nVG9rZW5Vc2VyLCB1aW50MjU2IF90b2tlblVzZXIsIHVpbnQyNTYgX2V0aGVyVXNlciApIHsKCQlyZXR1cm4gKHBlbmRpbmdUb2tlblVzZXJbX3VzZXJdLCB0b2tlblVzZXJbX3VzZXJdLCBldGhlclVzZXJbX3VzZXJdKTsKCX0KfQoKY29udHJhY3QgVG9rZW5TYWxlIGlzIE93bmFibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICB0b2tlbkludGVyZmFjZSBwdWJsaWMgdG9rZW5Db250cmFjdDsKICAgIHJhdGVJbnRlcmZhY2UgcHVibGljIHJhdGVDb250cmFjdDsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwogICAgYWRkcmVzcyBwdWJsaWMgYWR2aXNvcjsKICAgIHVpbnQyNTYgcHVibGljIGFkdmlzb3JGZWU7IC8vIDEgPSAwLDElCiAgICAKCXVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIGVuZFRpbWU7ICAvLyBzZWNvbmRzIGZyb20gMTk3MC0wMS0wMVQwMDowMDowMFoKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZTsgIC8vIHNlY29uZHMgZnJvbSAxOTcwLTAxLTAxVDAwOjAwOjAwWgoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgcmM7CgoKICAgIGZ1bmN0aW9uIFRva2VuU2FsZShhZGRyZXNzIF90b2tlbkFkZHJlc3MsIGFkZHJlc3MgX3JhdGVBZGRyZXNzLCB1aW50MjU2IF9zdGFydFRpbWUsIHVpbnQyNTYgX2VuZFRpbWUpIHB1YmxpYyB7CiAgICAgICAgdG9rZW5Db250cmFjdCA9IHRva2VuSW50ZXJmYWNlKF90b2tlbkFkZHJlc3MpOwogICAgICAgIHJhdGVDb250cmFjdCA9IHJhdGVJbnRlcmZhY2UoX3JhdGVBZGRyZXNzKTsKICAgICAgICBzZXRUaW1lKF9zdGFydFRpbWUsIF9lbmRUaW1lKTsgCiAgICAgICAgd2FsbGV0ID0gbXNnLnNlbmRlcjsKICAgICAgICBhZHZpc29yID0gbXNnLnNlbmRlcjsKICAgICAgICBhZHZpc29yRmVlID0gMCAqIDEwKiozOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0b2tlblZhbHVlSW5FdGhlcih1aW50MjU2IF9vbmVUb2tlbkluVXNkV2VpKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTYgdGtuVmFsdWUpIHsKICAgICAgICB1aW50MjU2IG9uZUV0aGVySW5Vc2QgPSByYXRlQ29udHJhY3QucmVhZFJhdGUoInVzZCIpOwogICAgICAgIHRrblZhbHVlID0gX29uZVRva2VuSW5Vc2RXZWkubXVsKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKS5kaXYob25lRXRoZXJJblVzZCk7CiAgICAgICAgcmV0dXJuIHRrblZhbHVlOwogICAgfSAKICAgIAogICAgbW9kaWZpZXIgaXNCdXlhYmxlKCkgewogICAgICAgIHJlcXVpcmUoIG5vdyA+IHN0YXJ0VGltZSApOyAvLyBjaGVjayBpZiBzdGFydGVkCiAgICAgICAgcmVxdWlyZSggbm93IDwgZW5kVGltZSApOyAvLyBjaGVjayBpZiBlbmRlZAogICAgICAgIHJlcXVpcmUoIG1zZy52YWx1ZSA+IDAgKTsKCQkKCQl1aW50MjU2IHJlbWFpbmluZ1Rva2VucyA9IHRva2VuQ29udHJhY3QuYmFsYW5jZU9mKHRoaXMpOwogICAgICAgIHJlcXVpcmUoIHJlbWFpbmluZ1Rva2VucyA+IDAgKTsgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSByZW1haW5pbmcgdG9rZW5zIAogICAgICAgIF87CiAgICB9CiAgICAKICAgIGV2ZW50IEJ1eShhZGRyZXNzIGJ1eWVyLCB1aW50MjU2IHZhbHVlLCBhZGRyZXNzIGluZGV4ZWQgYW1iYXNzYWRvcik7CiAgICAKICAgIG1vZGlmaWVyIG9ubHlSQygpIHsKICAgICAgICByZXF1aXJlKCByY1ttc2cuc2VuZGVyXSApOyAvL2NoZWNrIGlmIGlzIGFuIGF1dGhvcml6ZWQgcmNDb250cmFjdAogICAgICAgIF87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJ1eUZyb21SQyhhZGRyZXNzIF9idXllciwgdWludDI1NiBfcmNUb2tlblZhbHVlLCB1aW50MjU2IF9yZW1haW5pbmdUb2tlbnMpIG9ubHlSQyBpc0J1eWFibGUgcHVibGljIHBheWFibGUgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBvbmVUb2tlbiA9IDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpOwogICAgICAgIHVpbnQyNTYgdG9rZW5WYWx1ZSA9IHRva2VuVmFsdWVJbkV0aGVyKF9yY1Rva2VuVmFsdWUpOwogICAgICAgIHVpbnQyNTYgdG9rZW5BbW91bnQgPSBtc2cudmFsdWUubXVsKG9uZVRva2VuKS5kaXYodG9rZW5WYWx1ZSk7CiAgICAgICAgYWRkcmVzcyBfYW1iYXNzYWRvciA9IG1zZy5zZW5kZXI7CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgdWludDI1NiByZW1haW5pbmdUb2tlbnMgPSB0b2tlbkNvbnRyYWN0LmJhbGFuY2VPZih0aGlzKTsKICAgICAgICBpZiAoIF9yZW1haW5pbmdUb2tlbnMgPCByZW1haW5pbmdUb2tlbnMgKSB7CiAgICAgICAgICAgIHJlbWFpbmluZ1Rva2VucyA9IF9yZW1haW5pbmdUb2tlbnM7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmICggcmVtYWluaW5nVG9rZW5zIDwgdG9rZW5BbW91bnQgKSB7CiAgICAgICAgICAgIHVpbnQyNTYgcmVmdW5kID0gKHRva2VuQW1vdW50IC0gcmVtYWluaW5nVG9rZW5zKS5tdWwodG9rZW5WYWx1ZSkuZGl2KG9uZVRva2VuKTsKICAgICAgICAgICAgdG9rZW5BbW91bnQgPSByZW1haW5pbmdUb2tlbnM7CiAgICAgICAgICAgIGZvcndhcmQobXNnLnZhbHVlLXJlZnVuZCk7CgkJCXJlbWFpbmluZ1Rva2VucyA9IDA7IC8vIHNldCByZW1haW5pbmcgdG9rZW4gdG8gMAogICAgICAgICAgICAgX2J1eWVyLnRyYW5zZmVyKHJlZnVuZCk7CiAgICAgICAgfSBlbHNlIHsKCQkJcmVtYWluaW5nVG9rZW5zID0gcmVtYWluaW5nVG9rZW5zLnN1Yih0b2tlbkFtb3VudCk7IC8vIHVwZGF0ZSByZW1haW5pbmcgdG9rZW4gd2l0aG91dCBib251cwogICAgICAgICAgICBmb3J3YXJkKG1zZy52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHRva2VuQ29udHJhY3QudHJhbnNmZXIoX2J1eWVyLCB0b2tlbkFtb3VudCk7CiAgICAgICAgZW1pdCBCdXkoX2J1eWVyLCB0b2tlbkFtb3VudCwgX2FtYmFzc2Fkb3IpOwoJCQogICAgICAgIHJldHVybiB0b2tlbkFtb3VudDsgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGZvcndhcmQodWludDI1NiBfYW1vdW50KSBpbnRlcm5hbCB7CiAgICAgICAgdWludDI1NiBhZHZpc29yQW1vdW50ID0gX2Ftb3VudC5tdWwoYWR2aXNvckZlZSkuZGl2KDEwKiozKTsKICAgICAgICB1aW50MjU2IHdhbGxldEFtb3VudCA9IF9hbW91bnQgLSBhZHZpc29yQW1vdW50OwogICAgICAgIGFkdmlzb3IudHJhbnNmZXIoYWR2aXNvckFtb3VudCk7CiAgICAgICAgd2FsbGV0LnRyYW5zZmVyKHdhbGxldEFtb3VudCk7CiAgICB9CgogICAgZXZlbnQgTmV3UkMoYWRkcmVzcyBjb250cik7CiAgICAKICAgIGZ1bmN0aW9uIGFkZE1lQnlSQygpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSh0eC5vcmlnaW4gPT0gb3duZXIpOwogICAgICAgIAogICAgICAgIHJjWyBtc2cuc2VuZGVyIF0gID0gdHJ1ZTsKICAgICAgICAKICAgICAgICBlbWl0IE5ld1JDKG1zZy5zZW5kZXIpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRUaW1lKHVpbnQyNTYgX25ld1N0YXJ0LCB1aW50MjU2IF9uZXdFbmQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGlmICggX25ld1N0YXJ0ICE9IDAgKSBzdGFydFRpbWUgPSBfbmV3U3RhcnQ7CiAgICAgICAgaWYgKCBfbmV3RW5kICE9IDAgKSBlbmRUaW1lID0gX25ld0VuZDsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhdyhhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB0by50cmFuc2Zlcih2YWx1ZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW5zKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB0b2tlbkNvbnRyYWN0LnRyYW5zZmVyKHRvLCB2YWx1ZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFRva2VuQ29udHJhY3QoYWRkcmVzcyBfdG9rZW5Db250cmFjdCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgdG9rZW5Db250cmFjdCA9IHRva2VuSW50ZXJmYWNlKF90b2tlbkNvbnRyYWN0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRXYWxsZXRBZGRyZXNzKGFkZHJlc3MgX3dhbGxldCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgd2FsbGV0ID0gX3dhbGxldDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0QWR2aXNvckFkZHJlc3MoYWRkcmVzcyBfYWR2aXNvcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgICAgIGFkdmlzb3IgPSBfYWR2aXNvcjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0QWR2aXNvckZlZSh1aW50MjU2IF9hZHZpc29yRmVlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICAgICAgYWR2aXNvckZlZSA9IF9hZHZpc29yRmVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRSYXRlQ29udHJhY3QoYWRkcmVzcyBfcmF0ZUFkZHJlc3MpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJhdGVDb250cmFjdCA9IHJhdGVJbnRlcmZhY2UoX3JhdGVBZGRyZXNzKTsKICAgIH0KCQoJZnVuY3Rpb24gY2xhaW0oYWRkcmVzcyBfYnV5ZXIsIHVpbnQyNTYgX2Ftb3VudCkgb25seVJDIHB1YmxpYyByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gdG9rZW5Db250cmFjdC50cmFuc2ZlcihfYnV5ZXIsIF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXZlcnQoKTsKICAgIH0KfQ=='.
	

]
