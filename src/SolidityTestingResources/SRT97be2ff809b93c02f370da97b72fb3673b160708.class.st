Class {
	#name : #SRT97be2ff809b93c02f370da97b72fb3673b160708,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT97be2ff809b93c02f370da97b72fb3673b160708 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTA7Cgpjb250cmFjdCBUb2tlbiB7CiAgICAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGFkZHJlc3NlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFkZHJlc3NFeGlzdHM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBhZGRyZXNzSW5kZXg7CiAgICB1aW50MjU2IHB1YmxpYyBudW1iZXJPZkFkZHJlc3MgPSAwOwogICAgCiAgICBzdHJpbmcgcHVibGljIHBoeXNpY2FsU3RyaW5nOwogICAgc3RyaW5nIHB1YmxpYyBjcnlwdG9TdHJpbmc7CiAgICAKICAgIGJvb2wgcHVibGljIGlzU2VjdXJlZDsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBib29sIHB1YmxpYyBjYW5NaW50QnVybjsKICAgIHVpbnQyNTYgcHVibGljIHR4blRheDsKICAgIHVpbnQyNTYgcHVibGljIGhvbGRpbmdUYXg7CiAgICAvL0luIFdlZWtzLCBvbiBGcmlkYXlzCiAgICB1aW50MjU2IHB1YmxpYyBob2xkaW5nVGF4SW50ZXJ2YWw7CiAgICB1aW50MjU2IHB1YmxpYyBsYXN0SG9sZGluZ1RheDsKICAgIHVpbnQyNTYgcHVibGljIGhvbGRpbmdUYXhEZWNpbWFscyA9IDI7CiAgICBib29sIHB1YmxpYyBpc1ByaXZhdGU7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgCiAgICBmdW5jdGlvbiBUb2tlbihzdHJpbmcgbiwgc3RyaW5nIGEsIHVpbnQyNTYgdG90YWxTdXBwbHlUb1VzZSwgYm9vbCBpc1NlY3VyZWQsIGJvb2wgY01CLCBzdHJpbmcgcGh5c2ljYWwsIHN0cmluZyBjcnlwdG8sIHVpbnQyNTYgdHhuVGF4VG9Vc2UsIHVpbnQyNTYgaG9sZGluZ1RheFRvVXNlLCB1aW50MjU2IGhvbGRpbmdUYXhJbnRlcnZhbFRvVXNlLCBib29sIGlzUHJpdmF0ZVRvVXNlKSB7CiAgICAgICAgbmFtZSA9IG47CiAgICAgICAgc3ltYm9sID0gYTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5VG9Vc2U7CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHlUb1VzZTsKICAgICAgICBpc1NlY3VyZWQgPSBpc1NlY3VyZWQ7CiAgICAgICAgcGh5c2ljYWxTdHJpbmcgPSBwaHlzaWNhbDsKICAgICAgICBjcnlwdG9TdHJpbmcgPSBjcnlwdG87CiAgICAgICAgY2FuTWludEJ1cm4gPSBjTUI7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHR4blRheCA9IHR4blRheFRvVXNlOwogICAgICAgIGhvbGRpbmdUYXggPSBob2xkaW5nVGF4VG9Vc2U7CiAgICAgICAgaG9sZGluZ1RheEludGVydmFsID0gaG9sZGluZ1RheEludGVydmFsVG9Vc2U7CiAgICAgICAgaWYoaG9sZGluZ1RheEludGVydmFsIT0wKSB7CiAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4ID0gbm93OwogICAgICAgICAgICB3aGlsZShnZXRIb3VyKGxhc3RIb2xkaW5nVGF4KSE9MjEpIHsKICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IDEgaG91cnM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2hpbGUoZ2V0V2Vla2RheShsYXN0SG9sZGluZ1RheCkhPTUpIHsKICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IDEgZGF5czsKICAgICAgICAgICAgfQogICAgICAgICAgICBsYXN0SG9sZGluZ1RheCAtPSBnZXRNaW51dGUobGFzdEhvbGRpbmdUYXgpICogKDEgbWludXRlcykgKyBnZXRTZWNvbmQobGFzdEhvbGRpbmdUYXgpICogKDEgc2Vjb25kcyk7CiAgICAgICAgfQogICAgICAgIGlzUHJpdmF0ZSA9IGlzUHJpdmF0ZVRvVXNlOwogICAgICAgIAogICAgICAgIGFkZEFkZHJlc3Mob3duZXIpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHBheWFibGUgewogICAgICAgIGNoYXJnZUhvbGRpbmdUYXgoKTsKICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSB0aHJvdzsKICAgICAgICBpZiAoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZbX3RvXSkgdGhyb3c7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIgJiYgX3RvICE9IG93bmVyICYmIHR4blRheCAhPSAwKSB7CiAgICAgICAgICAgIGlmKCFvd25lci5zZW5kKHR4blRheCkpIHsKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmKGlzUHJpdmF0ZSAmJiBtc2cuc2VuZGVyICE9IG93bmVyICYmICFhZGRyZXNzRXhpc3RzW190b10pIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOwogICAgICAgIGFkZEFkZHJlc3MoX3RvKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZVR4blRheCh1aW50MjU2IF9uZXdWYWx1ZSkgewogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIHR4blRheCA9IF9uZXdWYWx1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gbWludCh1aW50MjU2IF92YWx1ZSkgewogICAgICAgIGlmKGNhbk1pbnRCdXJuICYmIG1zZy5zZW5kZXIgPT0gb3duZXIpIHsKICAgICAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSArIF92YWx1ZSA8IGJhbGFuY2VPZlttc2cuc2VuZGVyXSkgdGhyb3c7CiAgICAgICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSArPSBfdmFsdWU7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5ICs9IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIoMCwgbXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHsKICAgICAgICBpZihjYW5NaW50QnVybiAmJiBtc2cuc2VuZGVyID09IG93bmVyKSB7CiAgICAgICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHRocm93OwogICAgICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDAsIF92YWx1ZSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBjaGFyZ2VIb2xkaW5nVGF4KCkgewogICAgICAgIGlmKGhvbGRpbmdUYXhJbnRlcnZhbCE9MCkgewogICAgICAgICAgICB1aW50MjU2IGRhdGVEaWYgPSBub3cgLSBsYXN0SG9sZGluZ1RheDsKICAgICAgICAgICAgYm9vbCBjaGFuZ2VkID0gZmFsc2U7CiAgICAgICAgICAgIHdoaWxlKGRhdGVEaWYgPj0gaG9sZGluZ1RheEludGVydmFsICogKDEgd2Vla3MpKSB7CiAgICAgICAgICAgICAgICBjaGFuZ2VkPXRydWU7CiAgICAgICAgICAgICAgICBkYXRlRGlmIC09IGhvbGRpbmdUYXhJbnRlcnZhbCAqICgxIHdlZWtzKTsKICAgICAgICAgICAgICAgIGZvcih1aW50MjU2IGkgPSAwO2k8bnVtYmVyT2ZBZGRyZXNzO2krKykgewogICAgICAgICAgICAgICAgICAgIGlmKGFkZHJlc3Nlc1tpXSE9b3duZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBhbXRPZlRheFRvUGF5ID0gKChiYWxhbmNlT2ZbYWRkcmVzc2VzW2ldXSkgKiBob2xkaW5nVGF4KSAgLyAoMTAqKmhvbGRpbmdUYXhEZWNpbWFscykvICgxMCoqaG9sZGluZ1RheERlY2ltYWxzKTsKICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZU9mW2FkZHJlc3Nlc1tpXV0gLT0gYW10T2ZUYXhUb1BheTsKICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZU9mW293bmVyXSArPSBhbXRPZlRheFRvUGF5OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZihjaGFuZ2VkKSB7CiAgICAgICAgICAgICAgICBsYXN0SG9sZGluZ1RheCA9IG5vdzsKICAgICAgICAgICAgICAgIHdoaWxlKGdldEhvdXIobGFzdEhvbGRpbmdUYXgpIT0yMSkgewogICAgICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IDEgaG91cnM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB3aGlsZShnZXRXZWVrZGF5KGxhc3RIb2xkaW5nVGF4KSE9NSkgewogICAgICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IDEgZGF5czsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IGdldE1pbnV0ZShsYXN0SG9sZGluZ1RheCkgKiAoMSBtaW51dGVzKSArIGdldFNlY29uZChsYXN0SG9sZGluZ1RheCkgKiAoMSBzZWNvbmRzKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2hhbmdlSG9sZGluZ1RheCh1aW50MjU2IF9uZXdWYWx1ZSkgewogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIGhvbGRpbmdUYXggPSBfbmV3VmFsdWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZUhvbGRpbmdUYXhJbnRlcnZhbCh1aW50MjU2IF9uZXdWYWx1ZSkgewogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIGhvbGRpbmdUYXhJbnRlcnZhbCA9IF9uZXdWYWx1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRkQWRkcmVzcyAoYWRkcmVzcyBhZGRyKSBwcml2YXRlIHsKICAgICAgICBpZighYWRkcmVzc0V4aXN0c1thZGRyXSkgewogICAgICAgICAgICBhZGRyZXNzSW5kZXhbYWRkcl0gPSBudW1iZXJPZkFkZHJlc3M7CiAgICAgICAgICAgIGFkZHJlc3Nlc1tudW1iZXJPZkFkZHJlc3MrK10gPSBhZGRyOwogICAgICAgICAgICBhZGRyZXNzRXhpc3RzW2FkZHJdID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkZEFkZHJlc3NNYW51YWwgKGFkZHJlc3MgYWRkcikgewogICAgICAgIGlmKG1zZy5zZW5kZXIgPT0gb3duZXIgJiYgaXNQcml2YXRlKSB7CiAgICAgICAgICAgIGFkZEFkZHJlc3MoYWRkcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiByZW1vdmVBZGRyZXNzIChhZGRyZXNzIGFkZHIpIHByaXZhdGUgewogICAgICAgIGlmKGFkZHJlc3NFeGlzdHNbYWRkcl0pIHsKICAgICAgICAgICAgbnVtYmVyT2ZBZGRyZXNzLS07CiAgICAgICAgICAgIGFkZHJlc3Nlc1thZGRyZXNzSW5kZXhbYWRkcl1dID0gMHgwOwogICAgICAgICAgICBhZGRyZXNzRXhpc3RzW2FkZHJdID0gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiByZW1vdmVBZGRyZXNzTWFudWFsIChhZGRyZXNzIGFkZHIpIHsKICAgICAgICBpZihtc2cuc2VuZGVyID09IG93bmVyICYmIGlzUHJpdmF0ZSkgewogICAgICAgICAgICByZW1vdmVBZGRyZXNzKGFkZHIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0V2Vla2RheSh1aW50IHRpbWVzdGFtcCkgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgICAgcmV0dXJuIHVpbnQ4KCh0aW1lc3RhbXAgLyA4NjQwMCArIDQpICUgNyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldEhvdXIodWludCB0aW1lc3RhbXApIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgICAgIHJldHVybiB1aW50OCgodGltZXN0YW1wIC8gNjAgLyA2MCkgJSAyNCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TWludXRlKHVpbnQgdGltZXN0YW1wKSByZXR1cm5zICh1aW50OCkgewogICAgICAgICAgICByZXR1cm4gdWludDgoKHRpbWVzdGFtcCAvIDYwKSAlIDYwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTZWNvbmQodWludCB0aW1lc3RhbXApIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgICAgIHJldHVybiB1aW50OCh0aW1lc3RhbXAgJSA2MCk7CiAgICB9CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IHRva2Vuc2FsZSB7CiAgICAKICAgIFRva2VuIHB1YmxpYyB0b2tlbjsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgdWludDI1NiBwdWJsaWMgbnVtYmVyT2ZUb2tlbnM7CiAgICB1aW50MjU2IHB1YmxpYyBudW1iZXJPZlRva2Vuc0xlZnQ7CiAgICB1aW50MjU2IHB1YmxpYyBwcmljZVBlclRva2VuOwogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zRnJvbVByZXNhbGUgPSAwOwogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zRnJvbVByZXZpb3VzVG9rZW5zYWxlID0gMDsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDI7CiAgICB1aW50MjU2IHB1YmxpYyB3aXRoZHJhd0xpbWl0ID0gMjAwMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgCiAgICBhZGRyZXNzIHB1YmxpYyBmaW5hbEFkZHJlc3MgPSAweDU5MDQ5NTdkMjVEMGM2MjEzNDkxODgyYTY0NzY1OTY3Rjg4QkNDQzc7CiAgICAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFkZHJlc3NFeGlzdHM7CiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBhZGRyZXNzZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBhZGRyZXNzSW5kZXg7CiAgICB1aW50MjU2IHB1YmxpYyBudW1iZXJPZkFkZHJlc3MgPSAwOwogICAgCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHB1YmxpYyBkYXRlczsKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHVibGljIHBlcmNlbnRzOwogICAgdWludDI1NiBwdWJsaWMgbnVtYmVyT2ZEYXRlcyA9IDg7CiAgICAKICAgIHRva2Vuc2FsZSBwdHMgPSB0b2tlbnNhbGUoMHhFRDZjMDY1NGNENjFEZTViMTM1NUFlNGU5ZDlDNzg2MDA1ZTlENUJEKTsKICAgIAogICAgZnVuY3Rpb24gdG9rZW5zYWxlKGFkZHJlc3MgdG9rZW5BZGRyZXNzLCB1aW50MjU2IG5vT2ZUb2tlbnMsIHVpbnQyNTYgcHJQZXJUb2tlbikgewogICAgICAgIGRhdGVzWzBdID0gMTUwNTUyMDAwMDsKICAgICAgICBkYXRlc1sxXSA9IDE1MDYwMzg0MDA7CiAgICAgICAgZGF0ZXNbMl0gPSAxNTA2MTI0ODAwOwogICAgICAgIGRhdGVzWzNdID0gMTUwNjgxNjAwMDsKICAgICAgICBkYXRlc1s0XSA9IDE1MDc0MjA4MDA7CiAgICAgICAgZGF0ZXNbNV0gPSAxNTA4MTEyMDAwOwogICAgICAgIGRhdGVzWzZdID0gMTUwODYzMDQwMDsKICAgICAgICBkYXRlc1s3XSA9IDE1MDg4MDMyMDA7CiAgICAgICAgcGVyY2VudHNbMF0gPSA3MDAwMDsKICAgICAgICBwZXJjZW50c1sxXSA9IDQwMDAwOwogICAgICAgIHBlcmNlbnRzWzJdID0gMjAwMDA7CiAgICAgICAgcGVyY2VudHNbM10gPSAxMDAwMDsKICAgICAgICBwZXJjZW50c1s0XSA9IDUwMDA7CiAgICAgICAgcGVyY2VudHNbNV0gPSAwOwogICAgICAgIHBlcmNlbnRzWzZdID0gOTAwMTsKICAgICAgICBwZXJjZW50c1s3XSA9IDkwMDE7CiAgICAgICAgdG9rZW4gPSBUb2tlbih0b2tlbkFkZHJlc3MpOwogICAgICAgIG51bWJlck9mVG9rZW5zID0gbm9PZlRva2VucyAqIDEwMDsKICAgICAgICB0b3RhbFN1cHBseSA9IG5vT2ZUb2tlbnMgKiAxMDA7CiAgICAgICAgbnVtYmVyT2ZUb2tlbnNMZWZ0ID0gbm9PZlRva2VucyAqIDEwMDsKICAgICAgICBwcmljZVBlclRva2VuID0gcHJQZXJUb2tlbjsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgbmFtZSA9ICJBdXRvbmlvIElDTyI7CiAgICAgICAgc3ltYm9sID0gIk5JTyI7CiAgICAgICAgdXBkYXRlUHJlc2FsZU51bWJlcnMoKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRkQWRkcmVzcyAoYWRkcmVzcyBhZGRyKSBwcml2YXRlIHsKICAgICAgICBpZighYWRkcmVzc0V4aXN0c1thZGRyXSkgewogICAgICAgICAgICBhZGRyZXNzSW5kZXhbYWRkcl0gPSBudW1iZXJPZkFkZHJlc3M7CiAgICAgICAgICAgIGFkZHJlc3Nlc1tudW1iZXJPZkFkZHJlc3MrK10gPSBhZGRyOwogICAgICAgICAgICBhZGRyZXNzRXhpc3RzW2FkZHJdID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGVuZFByZXNhbGUoKSB7CiAgICAgICAgaWYobXNnLnNlbmRlciA9PSBvd25lcikgewogICAgICAgICAgICBpZihub3cgPiBkYXRlc1tudW1iZXJPZkRhdGVzLTFdKSB7CiAgICAgICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICAgICAgfSBlbHNlIGlmKG51bWJlck9mVG9rZW5zTGVmdCA9PSAwKSB7CiAgICAgICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBmaW5pc2goKSBwcml2YXRlIHsKICAgICAgICBpZighZmluYWxBZGRyZXNzLnNlbmQodGhpcy5iYWxhbmNlKSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KHVpbnQyNTYgYW1vdW50KSB7CiAgICAgICAgaWYobXNnLnNlbmRlciA9PSBvd25lcikgewogICAgICAgICAgICBpZihhbW91bnQgPD0gd2l0aGRyYXdMaW1pdCkgewogICAgICAgICAgICAgICAgd2l0aGRyYXdMaW1pdC09YW1vdW50OwogICAgICAgICAgICAgICAgaWYoIWZpbmFsQWRkcmVzcy5zZW5kKGFtb3VudCkpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiB1cGRhdGVQcmVzYWxlTnVtYmVycygpIHsKICAgICAgICBpZihtc2cuc2VuZGVyID09IG93bmVyKSB7CiAgICAgICAgICAgIHVpbnQyNTYgcHJldlRva2Vuc0Zyb21QcmV2aW91c1Rva2Vuc2FsZSA9IHRva2Vuc0Zyb21QcmV2aW91c1Rva2Vuc2FsZTsKICAgICAgICAgICAgdG9rZW5zRnJvbVByZXZpb3VzVG9rZW5zYWxlID0gcHRzLm51bWJlck9mVG9rZW5zKCkgLSBwdHMubnVtYmVyT2ZUb2tlbnNMZWZ0KCk7CiAgICAgICAgICAgIHVpbnQyNTYgZGlmZiA9IHRva2Vuc0Zyb21QcmV2aW91c1Rva2Vuc2FsZSAtIHByZXZUb2tlbnNGcm9tUHJldmlvdXNUb2tlbnNhbGU7CiAgICAgICAgICAgIG51bWJlck9mVG9rZW5zTGVmdCAtPSBkaWZmICogMjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgIHVpbnQyNTYgcHJldlRva2Vuc0Zyb21QcmV2aW91c1Rva2Vuc2FsZSA9IHRva2Vuc0Zyb21QcmV2aW91c1Rva2Vuc2FsZTsKICAgICAgICB0b2tlbnNGcm9tUHJldmlvdXNUb2tlbnNhbGUgPSBwdHMubnVtYmVyT2ZUb2tlbnMoKSAtIHB0cy5udW1iZXJPZlRva2Vuc0xlZnQoKTsKICAgICAgICB1aW50MjU2IGRpZmYgPSB0b2tlbnNGcm9tUHJldmlvdXNUb2tlbnNhbGUgLSBwcmV2VG9rZW5zRnJvbVByZXZpb3VzVG9rZW5zYWxlOwogICAgICAgIG51bWJlck9mVG9rZW5zTGVmdCAtPSBkaWZmICogMjsKICAgICAgICAKICAgICAgICB1aW50MjU2IHdlaVNlbnQgPSBtc2cudmFsdWUgKiAxMDA7CiAgICAgICAgaWYod2VpU2VudD09MCkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgdWludDI1NiB3ZWlMZWZ0T3ZlciA9IDA7CiAgICAgICAgaWYobnVtYmVyT2ZUb2tlbnNMZWZ0PD0wIHx8IG5vdzxkYXRlc1swXSB8fCBub3c+ZGF0ZXNbbnVtYmVyT2ZEYXRlcy0xXSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBwZXJjZW50ID0gOTAwMTsKICAgICAgICBmb3IodWludDI1NiBpPTA7aTxudW1iZXJPZkRhdGVzLTE7aSsrKSB7CiAgICAgICAgICAgIGlmKG5vdz49ZGF0ZXNbaV0gJiYgbm93PD1kYXRlc1tpKzFdICkgewogICAgICAgICAgICAgICAgcGVyY2VudCA9IHBlcmNlbnRzW2ldOwogICAgICAgICAgICAgICAgaT1udW1iZXJPZkRhdGVzLTE7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYocGVyY2VudD09OTAwMSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgdWludDI1NiB0b2tlbnNUb0dpdmUgPSB3ZWlTZW50IC8gcHJpY2VQZXJUb2tlbjsKICAgICAgICBpZih0b2tlbnNUb0dpdmUgKiBwcmljZVBlclRva2VuID4gd2VpU2VudCkgdG9rZW5zVG9HaXZlLS07CiAgICAgICAgdG9rZW5zVG9HaXZlPSh0b2tlbnNUb0dpdmUqKDEwMDAwMCtwZXJjZW50KSkvMTAwMDAwOwogICAgICAgIGlmKHRva2Vuc1RvR2l2ZT5udW1iZXJPZlRva2Vuc0xlZnQpIHsKICAgICAgICAgICAgd2VpTGVmdE92ZXIgPSAodG9rZW5zVG9HaXZlIC0gbnVtYmVyT2ZUb2tlbnNMZWZ0KSAqIHByaWNlUGVyVG9rZW47CiAgICAgICAgICAgIHRva2Vuc1RvR2l2ZSA9IG51bWJlck9mVG9rZW5zTGVmdDsKICAgICAgICB9CiAgICAgICAgbnVtYmVyT2ZUb2tlbnNMZWZ0IC09IHRva2Vuc1RvR2l2ZTsKICAgICAgICBpZihhZGRyZXNzRXhpc3RzW21zZy5zZW5kZXJdKSB7CiAgICAgICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSArPSB0b2tlbnNUb0dpdmU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWRkQWRkcmVzcyhtc2cuc2VuZGVyKTsKICAgICAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gdG9rZW5zVG9HaXZlOwogICAgICAgIH0KICAgICAgICBUcmFuc2ZlcigweDAsbXNnLnNlbmRlcix0b2tlbnNUb0dpdmUpOwogICAgICAgIGlmKHdlaUxlZnRPdmVyPjApbXNnLnNlbmRlci5zZW5kKHdlaUxlZnRPdmVyKTsKICAgIH0KICAgIAogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7Cn0='.
	

]
