Class {
	#name : #SRT4d33f3c3de7918c31517dec283d698bf4f17cd60,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4d33f3c3de7918c31517dec283d698bf4f17cd60 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IENvbnRyYWN0UmVjZWl2ZXJ7CiAgICBmdW5jdGlvbiB0b2tlbkZhbGxiYWNrKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyAgX2RhdGEpIGV4dGVybmFsOwp9CgoKLy9CYXNpYyBFUkMyMyB0b2tlbiwgYmFja3dhcmQgY29tcGF0aWJsZSB3aXRoIEVSQzIwIHRyYW5zZmVyIGZ1bmN0aW9uLgovL0Jhc2VkIGluIHBhcnQgb24gY29kZSBieSBvcGVuLXplcHBlbGluOiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5LmdpdApjb250cmFjdCBFUkMyM0Jhc2ljVG9rZW4gewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgYnl0ZXMgZGF0YSk7CgogICAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgIF9kYXRhKSBleHRlcm5hbCB7CiAgICAgICAgdGhyb3c7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIC8vU3RhbmRhcmQgRVJDMjMgdHJhbnNmZXIgZnVuY3Rpb24KCiAgICAgICAgaWYoaXNDb250cmFjdChfdG8pKSB7CiAgICAgICAgICAgIHRyYW5zZmVyVG9Db250cmFjdChfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB7CgogICAgICAgIC8vc3RhbmRhcmQgZnVuY3Rpb24gdHJhbnNmZXIgc2ltaWxhciB0byBFUkMyMCB0cmFuc2ZlciB3aXRoIG5vIF9kYXRhCiAgICAgICAgLy9hZGRlZCBkdWUgdG8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgcmVhc29ucwoKICAgICAgICBieXRlcyBtZW1vcnkgZW1wdHk7CiAgICAgICAgaWYoaXNDb250cmFjdChfdG8pKSB7CiAgICAgICAgICAgIHRyYW5zZmVyVG9Db250cmFjdChfdG8sIF92YWx1ZSwgZW1wdHkpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIGVtcHR5KTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJUb0FkZHJlc3MoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgaW50ZXJuYWwgewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJUb0NvbnRyYWN0KGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGludGVybmFsIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YiggX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoIF92YWx1ZSk7CiAgICAgICAgQ29udHJhY3RSZWNlaXZlciByZWNlaXZlciA9IENvbnRyYWN0UmVjZWl2ZXIoX3RvKTsKICAgICAgICByZWNlaXZlci50b2tlbkZhbGxiYWNrKG1zZy5zZW5kZXIsIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLy9hc3NlbWJsZSB0aGUgZ2l2ZW4gYWRkcmVzcyBieXRlY29kZS4gSWYgYnl0ZWNvZGUgZXhpc3RzIHRoZW4gdGhlIF9hZGRyIGlzIGEgY29udHJhY3QuCiAgICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIHJldHVybnMgKGJvb2wgaXNfY29udHJhY3QpIHsKICAgICAgICAgIHVpbnQyNTYgbGVuZ3RoOwogICAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICAgIC8vcmV0cmlldmUgdGhlIHNpemUgb2YgdGhlIGNvZGUgb24gdGFyZ2V0IGFkZHJlc3MsIHRoaXMgbmVlZHMgYXNzZW1ibHkKICAgICAgICAgICAgICBsZW5ndGggOj0gZXh0Y29kZXNpemUoX2FkZHIpCiAgICAgICAgICB9CiAgICAgICAgICBpZihsZW5ndGg+MCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgfQp9CgovLyBTdGFuZGFyZCBFUkMyMyB0b2tlbiwgYmFja3dhcmQgY29tcGF0aWJsZSB3aXRoIEVSQzIwIHN0YW5kYXJkcy4KLy8gQmFzZWQgb24gY29kZSBieSBvcGVuLXplcHBlbGluOiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5LmdpdApjb250cmFjdCBFUkMyM1N0YW5kYXJkVG9rZW4gaXMgRVJDMjNCYXNpY1Rva2VuIHsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIGV2ZW50IEFwcHJvdmFsIChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB7CiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAgICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAgICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93OwoKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgewoKICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgICAgaWYgKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9IDApKSB0aHJvdzsKCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQp9CgovLyBCYXNlZCBpbiBwYXJ0IG9uIGNvZGUgYnkgT3Blbi1aZXBwZWxpbjogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS5naXQKLy8gQmFzZWQgaW4gcGFydCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAoKY29udHJhY3QgU1RSSU1Ub2tlbiBpcyBFUkMyM1N0YW5kYXJkVG9rZW4gewoKICAgIC8vIG1ldGFkYXRhCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiU1RSSU0gVG9rZW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiU1RSIjsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CiAgICB1aW50MjU2IHB1YmxpYyBmdW5kc0Zyb21QcmVTYWxlOwogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gIjAuNCI7CiAgICBib29sIHB1YmxpYyBoYWx0ZWQ7IC8vSGFsdCBjcm93ZHNhbGUgaW4gZW1lcmdlbmN5CiAgICBib29sIHB1YmxpYyBpc0ZpbmFsaXplZDsgLy8gc3dpdGNoZWQgdG8gdHJ1ZSBpbiBvcGVyYXRpb25hbCBzdGF0ZQoJbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGV4Y2hhbmdlUmF0ZTsKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdTdGFydEJsb2NrOwogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ0VuZEJsb2NrOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5FeGNoYW5nZVJhdGVQcmVTYWxlID0gMTAwMDA7IC8vIDEwMDAwIFNUUiB0b2tlbnMgZm9yIDEgZXRoIGF0IHRoZSBwcmVzYWxlCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlbkV4Y2hhbmdlUmF0ZU1pbGUxID0gMzAwMDsgLy8gMzAwMCBTVFIgdG9rZW5zIGZvciB0aGUgMSBldGggYXQgZmlyc3QgcGhhc2UKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuRXhjaGFuZ2VSYXRlTWlsZTIgPSAyMDAwOyAvLyAyMDAwIFNUUiB0b2tlbnMgZm9yIHRoZSAxIGV0aCBhdCBzZWNvbmQgcGhhc2UKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuRXhjaGFuZ2VSYXRlTWlsZTMgPSAxMDAwOyAvLyAxMDAwIFNUUiB0b2tlbnMgZm9yIHRoZSAxIGV0aCBhdCB0aGlyZCBwaGFzZSAgIAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5DcmVhdGlvbk1pbk1pbGUxID0gMTAgKiAoMTAgKiogNikgKiAxMCAqKiBkZWNpbWFsczsgLy9taW5pbXVtIGFtbW91bnQgb2YgdG9rZW5zIHRvIGJlIGNyZWF0ZWQgZm9yIHRoZSBJQ08gdG8gYmUgc3VjY2VzZnVsbAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5DcmVhdGlvbk1pbk1pbGUyID0gNzggKiAoMTAgKiogNikgKiAxMCAqKiBkZWNpbWFsczsgLy90b2tlbnMgdG8gYmUgY3JlYXRlZCBmb3IgdGhlIElDTyBmb3IgdGhlIHNlY29uZCBtaWxlc3RvbmUgCgl1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlbkNyZWF0aW9uTWF4Q2FwID0gMTY4ICogKDEwICoqIDYpICogMTAgKiogZGVjaW1hbHM7IC8vbWF4IHRva2VucyB0byBiZSBjcmVhdGVkCgogICAgLy8gY29udHJhY3RzCiAgICBhZGRyZXNzIHB1YmxpYyBldGhGdW5kRGVwb3NpdDsgLy8gZGVwb3NpdCBhZGRyZXNzIGZvciBFVEggZm9yIFN0cmltIFRlYW0KICAgIGFkZHJlc3MgcHVibGljIHN0ckZ1bmREZXBvc2l0OyAvLyBkZXBvc2l0IGFkZHJlc3MgZm9yIFN0cmltIFRlYW0gdXNlIGFuZCBTVFIgVXNlciBGdW5kCiAgICBhZGRyZXNzIHB1YmxpYyBTdHJpbVRlYW07IC8vY29udHJhY3Qgb3duZXIKCiAgICAvLyBldmVudHMKICAgIGV2ZW50IExvZ1JlZnVuZChhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBDcmVhdGVTVFIoYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgSGFsdCgpOyAvL0hhbHQgZXZlbnQKICAgIGV2ZW50IFVuaGFsdCgpOyAvL1VuaGFsdCBldmVudAoKICAgIG1vZGlmaWVyIG9ubHlUZWFtKCkgewogICAgICAgIC8vb25seSBkbyBpZiBjYWxsIGlzIGZyb20gb3duZXIgbW9kaWZpZXIKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gU3RyaW1UZWFtKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGNyb3dkc2FsZVRyYW5zZmVyTG9jaygpIHsKICAgICAgICByZXF1aXJlKGlzRmluYWxpemVkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHdoZW5Ob3RIYWx0ZWQoKSB7CiAgICAgICAgLy8gb25seSBkbyB3aGVuIG5vdCBoYWx0ZWQgbW9kaWZpZXIKICAgICAgICByZXF1aXJlKCFoYWx0ZWQpOwogICAgICAgIF87CiAgICB9CgogICAgLy8gY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIFNUUklNVG9rZW4oCiAgICAgICAgYWRkcmVzcyBfZXRoRnVuZERlcG9zaXQsCiAgICAgICAgYWRkcmVzcyBfc3RyRnVuZERlcG9zaXQsCiAgICAgICAgdWludDI1NiBfZnVuZGluZ1N0YXJ0QmxvY2ssCiAgICAgICAgdWludDI1NiBfZnVuZGluZ0VuZEJsb2NrKSB7CiAgICAgICAgaXNGaW5hbGl6ZWQgPSBmYWxzZTsgLy9jb250cm9scyBwcmUgdGhyb3VnaCBjcm93ZHNhbGUgc3RhdGUKICAgICAgICBoYWx0ZWQgPSBmYWxzZTsKICAgICAgICBldGhGdW5kRGVwb3NpdCA9IF9ldGhGdW5kRGVwb3NpdDsKICAgICAgICBzdHJGdW5kRGVwb3NpdCA9IF9zdHJGdW5kRGVwb3NpdDsKICAgICAgICBmdW5kaW5nU3RhcnRCbG9jayA9IF9mdW5kaW5nU3RhcnRCbG9jazsKICAgICAgICBmdW5kaW5nRW5kQmxvY2sgPSBfZnVuZGluZ0VuZEJsb2NrOwogICAgICAgIHRvdGFsU3VwcGx5ID0gMDsKICAgICAgICBTdHJpbVRlYW0gPSBtc2cuc2VuZGVyOwogICAgICAgIGZ1bmRzRnJvbVByZVNhbGUgPSAwOwogICAgfQoKICAgIC8vRmFsbGJhY2sgZnVuY3Rpb24gd2hlbiByZWNlaXZpbmcgRXRoZXIuCiAgICBmdW5jdGlvbigpIHBheWFibGUgewogICAgICAgIGJ1eSgpOwogICAgfQoKICAgIC8vSGFsdCBJQ08gaW4gY2FzZSBvZiBlbWVyZ2VuY3kuCiAgICBmdW5jdGlvbiBoYWx0KCkgb25seVRlYW0gewogICAgICAgIGhhbHRlZCA9IHRydWU7CiAgICAgICAgSGFsdCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVuaGFsdCgpIG9ubHlUZWFtIHsKICAgICAgICBoYWx0ZWQgPSBmYWxzZTsKICAgICAgICBVbmhhbHQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXkoKSBwYXlhYmxlIHsKICAgICAgICBjcmVhdGVUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgoKCiAgICAvL21pbnQgVG9rZW5zLiBBY2NlcHRzIGV0aGVyIGFuZCBjcmVhdGVzIG5ldyBTVFIgdG9rZW5zLgogICAgZnVuY3Rpb24gY3JlYXRlVG9rZW5zKGFkZHJlc3MgcmVjaXBpZW50KSBwdWJsaWMgcGF5YWJsZSB3aGVuTm90SGFsdGVkIHsKICAgICAgICByZXF1aXJlKCFpc0ZpbmFsaXplZCk7CiAgICAgICAgcmVxdWlyZShibG9jay5udW1iZXIgPj0gZnVuZGluZ1N0YXJ0QmxvY2spOwogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyIDw9IGZ1bmRpbmdFbmRCbG9jayk7CgkJcmVxdWlyZSAodG90YWxTdXBwbHkgPCB0b2tlbkNyZWF0aW9uTWF4Q2FwKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwoKICAgICAgICB1aW50MjU2IHJldFJhdGUgPSByZXR1cm5SYXRlKCk7CgogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gbXNnLnZhbHVlLm11bChyZXRSYXRlKTsgLy9kZWNpbWFscz0xOCwgc28gbm8gbmVlZCB0byBhZGp1c3QgZm9yIHVuaXQgICAKICAgICAgICBpZiAocmV0UmF0ZSA9PSAxMDAwMCkgewogICAgICAgICAgICBmdW5kc0Zyb21QcmVTYWxlID0gZnVuZHNGcm9tUHJlU2FsZS5hZGQodG9rZW5zKTsKCQkJZXhjaGFuZ2VSYXRlW3JlY2lwaWVudF09MDsvL3ByZXNhbGUgZXRoZXIgaXMgbm9uIHJlZnVuZGFibGUgYXMgaXQgd2lsbCBiZSB1c2VkIGZvciBtYXJrZXRpbmcgZHVyaW5nIHRoZSBJQ08gcGVyaW9kCiAgICAgICAgfSBlbHNlIHsKCQkgICAgZXhjaGFuZ2VSYXRlW3JlY2lwaWVudF09cmV0UmF0ZTsKCQl9CiAgICAgICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IGJhbGFuY2VzW3JlY2lwaWVudF0uYWRkKHRva2Vucyk7Ly9tYXAgdG9rZW5zIHRvIHRoZSByZWNpZXBpZW50IGFkZHJlc3MJCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQodG9rZW5zKTsKCiAgICAgICAgQ3JlYXRlU1RSKG1zZy5zZW5kZXIsIHRva2Vucyk7IC8vIGxvZ3MgdG9rZW4gY3JlYXRpb24KICAgICAgICBUcmFuc2Zlcih0aGlzLCByZWNpcGllbnQsIHRva2Vucyk7CiAgICB9CgogICAgLy9SZXR1cm4gcmF0ZSBvZiB0b2tlbiBhZ2FpbnN0IGV0aGVyLgogICAgZnVuY3Rpb24gcmV0dXJuUmF0ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICBpZiAoYmxvY2subnVtYmVyIDwgZnVuZGluZ1N0YXJ0QmxvY2suYWRkKDUwMDApKSB7CiAgICAgICAgICAgIHJldHVybiB0b2tlbkV4Y2hhbmdlUmF0ZVByZVNhbGU7CiAgICAgICAgfSBlbHNlIGlmICh0b3RhbFN1cHBseS5zdWIoZnVuZHNGcm9tUHJlU2FsZSkgPCB0b2tlbkNyZWF0aW9uTWluTWlsZTEpIHsKICAgICAgICAgICAgcmV0dXJuIHRva2VuRXhjaGFuZ2VSYXRlTWlsZTE7CiAgICAgICAgfSBlbHNlIGlmICh0b3RhbFN1cHBseS5zdWIoZnVuZHNGcm9tUHJlU2FsZSkgPCB0b2tlbkNyZWF0aW9uTWluTWlsZTIpIHsKICAgICAgICAgICAgcmV0dXJuIHRva2VuRXhjaGFuZ2VSYXRlTWlsZTI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRva2VuRXhjaGFuZ2VSYXRlTWlsZTM7ICAKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZmluYWxpemUoKSBleHRlcm5hbCBvbmx5VGVhbXsKICAgICAgICByZXF1aXJlKCFpc0ZpbmFsaXplZCk7Ly9jaGVjayBpZiBhbHJlYWR5IHJhbiAgICAgICAgCiAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSA+PSB0b2tlbkNyZWF0aW9uTWluTWlsZTEpOyAvLyBoYXZlIHRvIHNlbGwgbWluaW11bSB0byBtb3ZlIHRvIG9wZXJhdGlvbmFsCiAgICAgICAgcmVxdWlyZShibG9jay5udW1iZXIgPiBmdW5kaW5nRW5kQmxvY2sgfHwgdG90YWxTdXBwbHkgPj0gdG9rZW5DcmVhdGlvbk1heENhcCk7Ly9kb24ndCBlbmQgYmVmb3JlIGljbyBwZXJpb2QgZW5kcyBvciBtYXggY2FwIHJlYWNoZWQKCiAgICAgICAgdWludDI1NiBzdHJWYWwgPSB0b3RhbFN1cHBseS5kaXYoMik7CiAgICAgICAgYmFsYW5jZXNbc3RyRnVuZERlcG9zaXRdID0gc3RyVmFsOyAvLyBkZXBvc2l0IFN0cmltIHNoYXJlCiAgICAgICAgQ3JlYXRlU1RSKG1zZy5zZW5kZXIsIHN0clZhbCk7IC8vIGxvZ3MgdG9rZW4gY3JlYXRpb24KCiAgICAgICAgLy8gbW92ZSB0byBvcGVyYXRpb25hbCAgICAgICAgCiAgICAgICAgaWYgKCFldGhGdW5kRGVwb3NpdC5zZW5kKHRoaXMuYmFsYW5jZSkpIHJldmVydCgpOyAvLyBzZW5kIHRoZSBldGggdG8gU3RyaW0gVGVhbQogICAgICAgIGlmICghc3RyRnVuZERlcG9zaXQuc2VuZCh0aGlzLmJhbGFuY2UpKSByZXZlcnQoKTsgLy8gc2VuZCB0aGUgc3RyIHRvIFN0cmltIFRlYW0KICAgICAgICBpc0ZpbmFsaXplZCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2VuZFByZVNhbGVFVEgoKSBleHRlcm5hbCBvbmx5VGVhbXsgICAgICAgIAogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID4gZnVuZGluZ1N0YXJ0QmxvY2suYWRkKDUwMDApKTsgLy9jaGVjayBpZiB0aGUgcHJlc2FsZSBwYXNzZWQgdGhlIDIgZGF5IGxpbWl0IAogICAgICAgIHJlcXVpcmUoZnVuZHNGcm9tUHJlU2FsZSA+IDApOyAvL21ha2Ugc3VyZSB0aGF0IHRoZXJlIGFyZSBmdW5kcyB0byB0cmFuc2ZlcgoKICAgICAgICB1aW50MjU2IGV0aEZyb21QcmVTYWxlID0gZnVuZHNGcm9tUHJlU2FsZS5kaXYoMTAwMDApOyAvL2NvbnZlcnQgZnJvbSB0b2tlbnMgdG8gZXRoZXIKICAgICAgICBmdW5kc0Zyb21QcmVTYWxlID0gMDsgLy9yZXZlcnQgdG8gaW5pdGlhbCBzdGF0ZSBzbyBpdCBjYW4ndCBiZSByZXVzZWQgCgogICAgICAgIGlmICghZXRoRnVuZERlcG9zaXQuc2VuZChldGhGcm9tUHJlU2FsZSkpIHJldmVydCgpOyAvLyBzZW5kIHRoZSBldGggcmFpc2VkIGZvciB0aGUgcHJlIHNhbGUgdG8gU3RyaW0gVGVhbQoKICAgIH0KCiAgICAvLyBBbGxvd3MgY29udHJpYnV0b3JzIHRvIHJlY292ZXIgdGhlaXIgZXRoZXIgaW4gdGhlIGNhc2Ugb2YgYSBmYWlsZWQgZnVuZGluZyBjYW1wYWlnbi4KICAgIGZ1bmN0aW9uIHJlZnVuZCgpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKCFpc0ZpbmFsaXplZCk7IC8vIHByZXZlbnRzIHJlZnVuZCBpZiBvcGVyYXRpb25hbAogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID4gZnVuZGluZ0VuZEJsb2NrKTsgLy8gcHJldmVudHMgcmVmdW5kIHVudGlsIHNhbGUgcGVyaW9kIGlzIG92ZXIKICAgICAgICByZXF1aXJlKHRvdGFsU3VwcGx5IDwgdG9rZW5DcmVhdGlvbk1pbk1pbGUxKTsgLy8gbm8gcmVmdW5kcyBpZiB3ZSBzb2xkIGVub3VnaAogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBzdHJGdW5kRGVwb3NpdCk7IC8vIFN0cmltIG5vdCBlbnRpdGxlZCB0byBhIHJlZnVuZAogICAgICAgIAogICAgICAgIGlmIChleGNoYW5nZVJhdGVbbXNnLnNlbmRlcl0gPiAwKSB7ICAvL3ByZXNhbGUgZXRoZXIgaXMgbm9uIHJlZnVuZGFibGUgYXMgaXQgd2lsbCBiZSB1c2VkIGZvciBtYXJrZXRpbmcgZHVyaW5nIHRoZSBJQ08gcGVyaW9kCgkJICAgIHVpbnQyNTYgc3RyVmFsID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsgLy9pZiByZWZ1bmRlZCBkZWxldGUgdGhlIHVzZXJzIHRva2VucwogICAgICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihzdHJWYWwpOyAvLyBleHRyYSBzYWZlCiAgICAgICAJICAgIHVpbnQyNTYgZXRoVmFsID0gc3RyVmFsIC8gZXhjaGFuZ2VSYXRlW21zZy5zZW5kZXJdOyAvLyBzaG91bGQgYmUgc2FmZTsgY29uc2lkZXJpbmcgaXQgbmV2ZXIgcmVhY2hlZCB0aGUgZmlyc3QgbWlsZXN0b25lOwogICAgICAgICAgICBMb2dSZWZ1bmQobXNnLnNlbmRlciwgZXRoVmFsKTsgLy8gbG9nIGl0IAogICAgICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChldGhWYWwpKSByZXZlcnQoKTsgLy8gaWYgeW91J3JlIHVzaW5nIGEgY29udHJhY3Q7IG1ha2Ugc3VyZSBpdCB3b3JrcyB3aXRoIC5zZW5kIGdhcyBsaW1pdHMKCQl9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljIGNyb3dkc2FsZVRyYW5zZmVyTG9jayByZXR1cm5zKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIGNyb3dkc2FsZVRyYW5zZmVyTG9jayB7CiAgICAgICAgc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBjcm93ZHNhbGVUcmFuc2ZlckxvY2sgewogICAgICAgIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQp9'.
	

]
