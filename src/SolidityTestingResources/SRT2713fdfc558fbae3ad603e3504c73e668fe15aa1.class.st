Class {
	#name : #SRT2713fdfc558fbae3ad603e3504c73e668fe15aa1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2713fdfc558fbae3ad603e3504c73e668fe15aa1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCgoKLyoqCiAqIGZsb2FrcyBleHRlbmRlZCBFUkMyMCB0b2tlbiBjb250cmFjdCBjcmVhdGVkIG9uIEFwcmlsIHRoZSAxNHRoLCAyMDE3IGJ5IGZsb2Frcy4KICoKICogRm9yIHRlcm1zIGFuZCBjb25kaXRpb25zIHZpc2l0IGh0dHBzOi8vd3d3LmZsb2Frcy5jb20KICovCgoKCmNvbnRyYWN0IG93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIG93bmVkKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG5ld093bmVyID09IDB4MCkgdGhyb3c7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KfQoKCgoKLyoqCiAqIE92ZXJmbG93IGF3YXJlIHVpbnQgbWF0aCBmdW5jdGlvbnMuCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CiAgLy9pbnRlcm5hbHMKCiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgaWYgKCFhc3NlcnRpb24pIHRocm93OwogIH0KfQoKCgoKY29udHJhY3QgVG9rZW4gewogICAgLyogVGhpcyBpcyBhIHNsaWdodCBjaGFuZ2UgdG8gdGhlIEVSQzIwIGJhc2Ugc3RhbmRhcmQuCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKICAgIGlzIHJlcGxhY2VkIHdpdGg6CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIFRoaXMgYXV0b21hdGljYWxseSBjcmVhdGVzIGEgZ2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgdG90YWxTdXBwbHkuCiAgICBUaGlzIGlzIG1vdmVkIHRvIHRoZSBiYXNlIGNvbnRyYWN0IHNpbmNlIHB1YmxpYyBnZXR0ZXIgZnVuY3Rpb25zIGFyZSBub3QKICAgIGN1cnJlbnRseSByZWNvZ25pc2VkIGFzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBtYXRjaGluZyBhYnN0cmFjdAogICAgZnVuY3Rpb24gYnkgdGhlIGNvbXBpbGVyLgogICAgKi8KICAgIC8vLyB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogICAgLy8vIEByZXR1cm4gVGhlIGJhbGFuY2UKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlcgogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9CgoKCgoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBUb2tlbiB7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvL0RlZmF1bHQgYXNzdW1lcyB0b3RhbFN1cHBseSBjYW4ndCBiZSBvdmVyIG1heCAoMl4yNTYgLSAxKS4KICAgICAgICAvL0lmIHlvdXIgdG9rZW4gbGVhdmVzIG91dCB0b3RhbFN1cHBseSBhbmQgY2FuIGlzc3VlIG1vcmUgdG9rZW5zIGFzIHRpbWUgZ29lcyBvbiwgeW91IG5lZWQgdG8gY2hlY2sgaWYgaXQgZG9lc24ndCB3cmFwLgogICAgICAgIC8vUmVwbGFjZSB0aGUgaWYgd2l0aCB0aGlzIG9uZSBpbnN0ZWFkLgogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAvL2lmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAvL2lmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwp9CgoKCgoKCgovKiBmbG9ha3MgQ29udHJhY3QgKi8KY29udHJhY3QgZmxvYWtzVG9rZW4gaXMgb3duZWQsIFNhZmVNYXRoLCBTdGFuZGFyZFRva2VuIHsKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJmbG9ha3MgRVRIIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIG5hbWUgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gImZsa2QiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgc3ltYm9sIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICBhZGRyZXNzIHB1YmxpYyBmbG9ha3NBZGRyZXNzID0gdGhpczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRyZXNzIG9mIHRoZSBmbG9ha3MgdG9rZW4KICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtb3VudCBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSA4NTg5OTM0NTkyOyAgCQkJCQkJCQkvLyBTZXQgdG90YWwgc3VwcGx5IG9mIGZsb2FrcycKICAgIHVpbnQyNTYgcHVibGljIGJ1eVByaWNlRXRoID0gMSBmaW5uZXk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJ1eSBwcmljZSBmb3IgZmxvYWtzJwogICAgdWludDI1NiBwdWJsaWMgc2VsbFByaWNlRXRoID0gMSBmaW5uZXk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VsbCBwcmljZSBmb3IgZmxvYWtzJwogICAgdWludDI1NiBwdWJsaWMgZ2FzRm9yRkxLRCA9IDUgZmlubmV5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV0aCBmcm9tIGNvbnRyYWN0IGFnYWluc3QgRkxLRCB0byBwYXkgdHggKDEwIHRpbWVzIHNlbGxQcmljZUV0aCkKICAgIHVpbnQyNTYgcHVibGljIEZMS0RGb3JHYXMgPSAxMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGTEtEIHRvIGNvbnRyYWN0IGFnYWluc3QgZXRoIHRvIHBheSB0eAogICAgdWludDI1NiBwdWJsaWMgZ2FzUmVzZXJ2ZSA9IDEgZXRoZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXRoIGFtb3VudCB0aGF0IHJlbWFpbnMgaW4gdGhlIGNvbnRyYWN0IGZvciBnYXMgYW5kIGNhbid0IGJlIHNvbGQKICAgIHVpbnQyNTYgcHVibGljIG1pbkJhbGFuY2VGb3JBY2NvdW50cyA9IDEwIGZpbm5leTsgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pbmltYWwgZXRoIGJhbGFuY2Ugb2Ygc2VuZGVyIGFuZCByZWNpcGllbnQKICAgIGJvb2wgcHVibGljIGRpcmVjdFRyYWRlQWxsb3dlZCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbHQgdHJhZGluZyBGTEtEIGJ5IHNlbmRpbmcgdG8gdGhlIGNvbnRyYWN0IGRpcmVjdGx5CgoKLyogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0ICovCiAgICBmdW5jdGlvbiBmbG9ha3NUb2tlbigpIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHRvdGFsU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdpdmUgdGhlIGNyZWF0b3IgYWxsIHRva2VucwogICAgfQoKCi8qIENvbnN0cnVjdG9yIHBhcmFtZXRlcnMgKi8KICAgIGZ1bmN0aW9uIHNldEV0aGVyUHJpY2VzKHVpbnQyNTYgbmV3QnV5UHJpY2VFdGgsIHVpbnQyNTYgbmV3U2VsbFByaWNlRXRoKSBvbmx5T3duZXIgewogICAgICAgIGJ1eVByaWNlRXRoID0gbmV3QnV5UHJpY2VFdGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHByaWNlcyB0byBidXkgYW5kIHNlbGwgRkxLRAogICAgICAgIHNlbGxQcmljZUV0aCA9IG5ld1NlbGxQcmljZUV0aDsKICAgIH0KICAgIGZ1bmN0aW9uIHNldEdhc0ZvckZMS0QodWludCBuZXdHYXNBbW91bnRJbldlaSkgb25seU93bmVyIHsKICAgICAgICBnYXNGb3JGTEtEID0gbmV3R2FzQW1vdW50SW5XZWk7CiAgICB9CiAgICBmdW5jdGlvbiBzZXRGTEtERm9yR2FzKHVpbnQgbmV3RkxLREFtb3VudCkgb25seU93bmVyIHsKICAgICAgICBGTEtERm9yR2FzID0gbmV3RkxLREFtb3VudDsKICAgIH0KICAgIGZ1bmN0aW9uIHNldEdhc1Jlc2VydmUodWludCBuZXdHYXNSZXNlcnZlSW5XZWkpIG9ubHlPd25lciB7CiAgICAgICAgZ2FzUmVzZXJ2ZSA9IG5ld0dhc1Jlc2VydmVJbldlaTsKICAgIH0KICAgIGZ1bmN0aW9uIHNldE1pbkJhbGFuY2UodWludCBtaW5pbXVtQmFsYW5jZUluV2VpKSBvbmx5T3duZXIgewogICAgICAgIG1pbkJhbGFuY2VGb3JBY2NvdW50cyA9IG1pbmltdW1CYWxhbmNlSW5XZWk7CiAgICB9CgoKLyogSGFsdHMgb3IgdW5oYWx0cyBkaXJlY3QgdHJhZGVzIHdpdGhvdXQgdGhlIHNlbGwvYnV5IGZ1bmN0aW9ucyBiZWxvdyAqLwogICAgZnVuY3Rpb24gaGFsdERpcmVjdFRyYWRlKCkgb25seU93bmVyIHsKICAgICAgICBkaXJlY3RUcmFkZUFsbG93ZWQgPSBmYWxzZTsKICAgIH0KICAgIGZ1bmN0aW9uIHVuaGFsdERpcmVjdFRyYWRlKCkgb25seU93bmVyIHsKICAgICAgICBkaXJlY3RUcmFkZUFsbG93ZWQgPSB0cnVlOwogICAgfQoKCi8qIFRyYW5zZmVyIGZ1bmN0aW9uIGV4dGVuZGVkIGJ5IGNoZWNrIG9mIGV0aCBiYWxhbmNlcyBhbmQgcGF5IHRyYW5zYWN0aW9uIGNvc3RzIHdpdGggRkxLRCBpZiBub3QgZW5vdWdoIGV0aCAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoX3ZhbHVlIDwgRkxLREZvckdhcykgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50cyBkcmFpbiBhbmQgc3BhbQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyICYmIF90byA9PSBmbG9ha3NBZGRyZXNzICYmIGRpcmVjdFRyYWRlQWxsb3dlZCkgewogICAgICAgICAgICBzZWxsZmxvYWtzQWdhaW5zdEV0aGVyKF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmFkZSBmbG9ha3NzIGFnYWluc3QgZXRoIGJ5IHNlbmRpbmcgdG8gdGhlIHRva2VuIGNvbnRyYWN0CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgeyAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHNlbmRlciBoYXMgZW5vdWdoIGFuZCBmb3Igb3ZlcmZsb3dzCiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSwgX3ZhbHVlKTsgICAvLyBTdWJ0cmFjdCBGTEtEIGZyb20gdGhlIHNlbmRlcgoKICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIuYmFsYW5jZSA+PSBtaW5CYWxhbmNlRm9yQWNjb3VudHMgJiYgX3RvLmJhbGFuY2UgPj0gbWluQmFsYW5jZUZvckFjY291bnRzKSB7ICAgIC8vIENoZWNrIGlmIHNlbmRlciBjYW4gcGF5IGdhcyBhbmQgaWYgcmVjaXBpZW50IGNvdWxkCiAgICAgICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOyAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgYW1vdW50IG9mIEZMS0QgdG8gdGhlIHJlY2lwaWVudAogICAgICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYmFsYW5jZXNbdGhpc10gPSBzYWZlQWRkKGJhbGFuY2VzW3RoaXNdLCBGTEtERm9yR2FzKTsgICAgICAgIC8vIFBheSBGTEtERm9yR2FzIHRvIHRoZSBjb250cmFjdAogICAgICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgc2FmZVN1YihfdmFsdWUsIEZMS0RGb3JHYXMpKTsgIC8vIFJlY2lwaWVudCBiYWxhbmNlIC1GTEtERm9yR2FzCiAgICAgICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIHNhZmVTdWIoX3ZhbHVlLCBGTEtERm9yR2FzKSk7ICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UKCiAgICAgICAgICAgICAgICBpZihtc2cuc2VuZGVyLmJhbGFuY2UgPCBtaW5CYWxhbmNlRm9yQWNjb3VudHMpIHsKICAgICAgICAgICAgICAgICAgICBpZighbXNnLnNlbmRlci5zZW5kKGdhc0ZvckZMS0QpKSB0aHJvdzsgICAgICAgICAgICAgICAgICAvLyBTZW5kIGV0aCB0byBzZW5kZXIKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoX3RvLmJhbGFuY2UgPCBtaW5CYWxhbmNlRm9yQWNjb3VudHMpIHsKICAgICAgICAgICAgICAgICAgICBpZighX3RvLnNlbmQoZ2FzRm9yRkxLRCkpIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZW5kIGV0aCB0byByZWNpcGllbnQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7IHRocm93OyB9CiAgICB9CgoKLyogVXNlciBidXlzIGZsb2Frc3MgYW5kIHBheXMgaW4gRXRoZXIgKi8KICAgIGZ1bmN0aW9uIGJ1eWZsb2Frc0FnYWluc3RFdGhlcigpIHBheWFibGUgcmV0dXJucyAodWludCBhbW91bnQpIHsKICAgICAgICBpZiAoYnV5UHJpY2VFdGggPT0gMCB8fCBtc2cudmFsdWUgPCBidXlQcmljZUV0aCkgdGhyb3c7ICAgICAgICAgICAgIC8vIEF2b2lkIGRpdmlkaW5nIDAsIHNlbmRpbmcgc21hbGwgYW1vdW50cyBhbmQgc3BhbQogICAgICAgIGFtb3VudCA9IG1zZy52YWx1ZSAvIGJ1eVByaWNlRXRoOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBhbW91bnQgb2YgZmxvYWtzcwogICAgICAgIGlmIChiYWxhbmNlc1t0aGlzXSA8IGFtb3VudCkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgaGFzIGVub3VnaCB0byBzZWxsCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlQWRkKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBhbW91bnQpOyAgICAgICAvLyBBZGQgdGhlIGFtb3VudCB0byBidXllcidzIGJhbGFuY2UKICAgICAgICBiYWxhbmNlc1t0aGlzXSA9IHNhZmVTdWIoYmFsYW5jZXNbdGhpc10sIGFtb3VudCk7ICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGFtb3VudCBmcm9tIGZsb2FrcyBiYWxhbmNlCiAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgYW1vdW50KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIGFuIGV2ZW50IHJlZmxlY3RpbmcgdGhlIGNoYW5nZQogICAgICAgIHJldHVybiBhbW91bnQ7CiAgICB9CgoKLyogVXNlciBzZWxscyBmbG9ha3MgYW5kIGdldHMgRXRoZXIgKi8KICAgIGZ1bmN0aW9uIHNlbGxmbG9ha3NBZ2FpbnN0RXRoZXIodWludDI1NiBhbW91bnQpIHJldHVybnMgKHVpbnQgcmV2ZW51ZSkgewogICAgICAgIGlmIChzZWxsUHJpY2VFdGggPT0gMCB8fCBhbW91bnQgPCBGTEtERm9yR2FzKSB0aHJvdzsgICAgICAgICAgICAgICAgIC8vIEF2b2lkIHNlbGxpbmcgYW5kIHNwYW0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCBhbW91bnQpIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaCB0byBzZWxsCiAgICAgICAgcmV2ZW51ZSA9IHNhZmVNdWwoYW1vdW50LCBzZWxsUHJpY2VFdGgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXZlbnVlID0gZXRoIHRoYXQgd2lsbCBiZSBzZW5kIHRvIHRoZSB1c2VyCiAgICAgICAgaWYgKHNhZmVTdWIodGhpcy5iYWxhbmNlLCByZXZlbnVlKSA8IGdhc1Jlc2VydmUpIHRocm93OyAgICAgICAgICAgICAvLyBLZWVwIG1pbiBhbW91bnQgb2YgZXRoIGluIGNvbnRyYWN0IHRvIHByb3ZpZGUgZ2FzIGZvciB0cmFuc2FjdGlvbnMKICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChyZXZlbnVlKSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgZXRoZXIgdG8gdGhlIHNlbGxlci4gSXQncyBpbXBvcnRhbnQKICAgICAgICAgICAgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRvIGRvIHRoaXMgbGFzdCB0byBhdm9pZCByZWN1cnNpb24gYXR0YWNrcwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJhbGFuY2VzW3RoaXNdID0gc2FmZUFkZChiYWxhbmNlc1t0aGlzXSwgYW1vdW50KTsgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGFtb3VudCB0byBmbG9ha3MgYmFsYW5jZQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIGFtb3VudCk7ICAgLy8gU3VidHJhY3QgdGhlIGFtb3VudCBmcm9tIHNlbGxlcidzIGJhbGFuY2UKICAgICAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgcmV2ZW51ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgYW4gZXZlbnQgcmVmbGVjdGluZyBvbiB0aGUgY2hhbmdlCiAgICAgICAgICAgIHJldHVybiByZXZlbnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbmQgZnVuY3Rpb24gYW5kIHJldHVybnMKICAgICAgICB9CiAgICB9CgoKLyogcmVmdW5kIHRvIG93bmVyICovCiAgICBmdW5jdGlvbiByZWZ1bmRUb093bmVyICh1aW50MjU2IGFtb3VudE9mRXRoLCB1aW50MjU2IEZMS0QpIG9ubHlPd25lciB7CiAgICAgICAgdWludDI1NiBldGggPSBzYWZlTXVsKGFtb3VudE9mRXRoLCAxIGV0aGVyKTsKICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChldGgpKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgZXRoZXIgdG8gdGhlIG93bmVyLiBJdCdzIGltcG9ydGFudAogICAgICAgICAgICB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVG8gZG8gdGhpcyBsYXN0IHRvIGF2b2lkIHJlY3Vyc2lvbiBhdHRhY2tzCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgZXRoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgYW4gZXZlbnQgcmVmbGVjdGluZyBvbiB0aGUgY2hhbmdlCiAgICAgICAgfQogICAgICAgIGlmIChiYWxhbmNlc1t0aGlzXSA8IEZMS0QpIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0IGhhcyBlbm91Z2ggdG8gc2VsbAogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZUFkZChiYWxhbmNlc1ttc2cuc2VuZGVyXSwgRkxLRCk7ICAgICAgICAgIC8vIEFkZCB0aGUgYW1vdW50IHRvIGJ1eWVyJ3MgYmFsYW5jZQogICAgICAgIGJhbGFuY2VzW3RoaXNdID0gc2FmZVN1YihiYWxhbmNlc1t0aGlzXSwgRkxLRCk7ICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGFtb3VudCBmcm9tIHNlbGxlcidzIGJhbGFuY2UKICAgICAgICBUcmFuc2Zlcih0aGlzLCBtc2cuc2VuZGVyLCBGTEtEKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIGFuIGV2ZW50IHJlZmxlY3RpbmcgdGhlIGNoYW5nZQogICAgfQoKCi8qIFRoaXMgdW5uYW1lZCBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbmV2ZXIgc29tZW9uZSB0cmllcyB0byBzZW5kIGV0aGVyIHRvIGl0IGFuZCBwb3NzaWJseSBzZWxscyBmbG9ha3MnICovCiAgICBmdW5jdGlvbigpIHBheWFibGUgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgICAgICAgIGlmICghZGlyZWN0VHJhZGVBbGxvd2VkKSB0aHJvdzsKICAgICAgICAgICAgYnV5ZmxvYWtzQWdhaW5zdEV0aGVyKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxsb3cgZGlyZWN0IHRyYWRlcyBieSBzZW5kaW5nIGV0aCB0byB0aGUgY29udHJhY3QKICAgICAgICB9CiAgICB9Cn0KCi8qIEpKRyAqLw=='.
	

]
