Class {
	#name : #SRT91923a5fe80e1246aa137e8bcc0ec94d42432ab0,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT91923a5fe80e1246aa137e8bcc0ec94d42432ab0 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgovKgoKT3B0aW9ucyBFeGNoYW5nZQo9PT09PT09PT09PT09PT09PT09PT09PT0KCkFuIEV4Y2hhbmdlIGZvciBBbWVyaWNhbiBPcHRpb25zLCB3aGljaCBhcmUgYWxzbyByZXZlcnNpYmxlIHVudGlsIHRoZSBkZWFkbGluZSAoTWF0dXJhdGlvbikuCkFuIEFtZXJpY2FuIE9wdGlvbiBpcyBhIGNvbnRyYWN0IGJldHdlZW4gaXRzIEJ1eWVyIGFuZCBpdHMgU2VsbGVyLCBnaXZpbmcgdGhlIEJ1eWVyIHRoZSBhYmlsaXR5CnRvIGJ1eSAob3Igc2VsbCkgYW4gQXNzZXQgYXQgYSBzcGVjaWZpZWQgU3RyaWtlIFByaWNlIGFueSB0aW1lIGJlZm9yZSBhIHNwZWNpZmllZCB0aW1lIChNYXR1cmF0aW9uKS4KCkF1dGhvcnM6IC91L0NpbnRpeCBhbmQgL3UvSGRpenpsZTgzCgoqLwoKbGlicmFyeSBTYWZlTWF0aCB7CgogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydCgoYSA9PSAwKSB8fCAoYyAvIGEgPT0gYikpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKfQoKLy8gRVJDMjAgSW50ZXJmYWNlOiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKY29udHJhY3QgVG9rZW4gewogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KfQoKY29udHJhY3QgT3B0aW9uc0V4Y2hhbmdlIHsKCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIC8vIEFkbWluIHRha2VzIGEgMSUgY3V0IG9mIGVhY2ggcHVyY2hhc2VkIE9wdGlvbidzIFByZW1pdW0sIHN0b3JlZCBhcyBhIHJhdGlvIHdpdGggMSBldGhlciBhcyB0aGUgZGVub21pbmF0b3IuCiAgdWludDI1NiBwdWJsaWMgZmVlX3JhdGlvID0gMTAgKiogMTY7CiAgCiAgLy8gQWRtaW4gaXMgaW5pdGlhbGl6ZWQgdG8gdGhlIGNvbnRyYWN0IGNyZWF0b3IuCiAgYWRkcmVzcyBwdWJsaWMgYWRtaW4gPSBtc2cuc2VuZGVyOwogIAogIC8vIFVzZXIgYmFsYW5jZXMgYXJlIHN0b3JlZCBhcyB1c2VyQmFsYW5jZVt1c2VyXVt0b2tlbl0sIHdoZXJlIEVUSCBpcyBzdG9yZWQgYXMgdG9rZW4gYWRkcmVzcyAwLgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgdXNlckJhbGFuY2U7CiAgCiAgLy8gQW4gT3B0aW9uIGlzIGEgYmV0IGJldHdlZW4gdHdvIHVzZXJzIG9uIHRoZSByZWxhdGl2ZSBwcmljZSBvZiB0d28gdG9rZW5zIG9uIGEgZ2l2ZW4gZGF0ZS4KICAvLyBUaGUgU2VsbGVyIGxvY2tzIHNvbWUgYW1vdW50IG9mIHRva2VuIEEgKEFzc2V0KSBpbiB0aGUgT3B0aW9uIGluIGV4Y2hhbmdlIGZvciBwYXltZW50ICh0aGUgUHJlbWl1bSkgZnJvbSB0aGUgQnV5ZXIuCiAgLy8gVGhlIEJ1eWVyIGlzIHRoZW4gZnJlZSB0byB0cmFkZSBiZXR3ZWVuIHRva2VuIEEgYW5kIHRva2VuIEIgKEJhc2UpIGF0IHRoZSBnaXZlbiBleGNoYW5nZSByYXRlICh0aGUgU3RyaWtlIFByaWNlKS4KICAvLyBBdCB0aGUgY2xvc2luZyBkYXRlIChNYXR1cmF0aW9uKSwgdGhlIE9wdGlvbidzIGZ1bmRzIGFyZSBzZW50IGJhY2sgdG8gdGhlIFNlbGxlci4KICAvLyBUbyByZWR1Y2Ugb25jaGFpbiBzdG9yYWdlLCBPcHRpb25zIGFyZSBpbmRleGVkIGJ5IGEgaGFzaCBvZiB0aGVpciBwYXJhbWV0ZXJzLCBvcHRpb25IYXNoLgogIAogIC8vIEFkZHJlc3Mgb2YgdGhlIE9wdGlvbidzIFRha2VyLCB0aGUgdXNlciB3aG8gZmlsbGVkIHRoZSBvcmRlciBmb3IgdGhlIE9wdGlvbi4KICAvLyBEb3VibGVzIGFzIGFuIGluZGljYXRvciBmb3Igd2hldGhlciBhIGdpdmVuIE9wdGlvbiBpcyBhY3RpdmUuCiAgbWFwcGluZyAoYnl0ZXMzMiA9PiBhZGRyZXNzKSBwdWJsaWMgb3B0aW9uVGFrZXI7CiAgCiAgLy8gQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgYW4gb2ZmY2hhaW4gT3B0aW9uIG9yZGVyIGhhcyBiZWVuIGNhbmNlbGxlZC4KICBtYXBwaW5nIChieXRlczMyID0+IGJvb2wpIHB1YmxpYyBvcHRpb25PcmRlckNhbmNlbGxlZDsKICAKICAvLyBPcHRpb24gYmFsYW5jZXMgYXJlIHN0b3JlZCBhcyBvcHRpb25CYWxhbmNlW29wdGlvbkhhc2hdW3Rva2VuXSwgd2hlcmUgRVRIIGlzIHN0b3JlZCBhcyB0b2tlbiBhZGRyZXNzIDAuCiAgbWFwcGluZyAoYnl0ZXMzMiA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBvcHRpb25CYWxhbmNlOwogIAogIC8vIFBvc3NpYmxlIHN0YXRlcyBhbiBPcHRpb24gKG9yIGl0cyBvZmZjaGFpbiBvcmRlcikgY2FuIGJlIGluLgogIGVudW0gb3B0aW9uU3RhdGVzIHsKICAgIEludmFsaWQsICAgIC8vIE9wdGlvbiBwYXJhbWV0ZXJzIGFyZSBpbnZhbGlkLgogICAgQXZhaWxhYmxlLCAgLy8gT3B0aW9uIGhhc24ndCBiZWVuIGNyZWF0ZWQgb3IgZmlsbGVkIHlldC4KICAgIENhbmNlbGxlZCwgIC8vIE9wdGlvbidzIG9mZmNoYWluIG9yZGVyIGhhcyBiZWVuIGNhbmNlbGxlZCBieSB0aGUgTWFrZXIuCiAgICBFeHBpcmVkLCAgICAvLyBPcHRpb24ncyBvZmZjaGFpbiBvcmRlciBoYXMgcGFzc2VkIGl0cyBFeHBpcmF0aW9uIHRpbWUuCiAgICBUcmFkZWFibGUsICAvLyBPcHRpb24gY2FuIGJlIHRyYWRlZCBieSBpdHMgQnV5ZXIgdW50aWwgaXRzIE1hdHVyYXRpb24gdGltZS4KICAgIE1hdHVyZWQsICAgIC8vIE9wdGlvbiBoYXMgcGFzc2VkIGl0cyBNYXR1cmF0aW9uIHRpbWUgYW5kIGlzIHJlYWR5IHRvIGJlIGNsb3NlZC4KICAgIENsb3NlZCAgICAgIC8vIE9wdGlvbiBoYXMgYmVlbiBjbG9zZWQgYnkgaXRzIFNlbGxlciwgd2l0aGRyYXdpbmcgYWxsIGl0cyBmdW5kcy4KICB9CiAgCiAgLy8gRXZlbnRzIGVtaXR0ZWQgYnkgdGhlIGNvbnRyYWN0IGZvciB1c2UgaW4gdHJhY2tpbmcgZXhjaGFuZ2UgYWN0aXZpdHkuCiAgLy8gRm9yIERlcG9zaXRzIGFuZCBXaXRoZHJhd2FscywgRVRIIGJhbGFuY2VzIGFyZSBzdG9yZWQgYXMgYSB0b2tlbiB3aXRoIGFkZHJlc3MgMC4KICBldmVudCBEZXBvc2l0KGFkZHJlc3MgaW5kZXhlZCB1c2VyLCBhZGRyZXNzIGluZGV4ZWQgdG9rZW4sIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBXaXRoZHJhd2FsKGFkZHJlc3MgaW5kZXhlZCB1c2VyLCBhZGRyZXNzIGluZGV4ZWQgdG9rZW4sIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBPcmRlckZpbGxlZChieXRlczMyIGluZGV4ZWQgb3B0aW9uSGFzaCk7CiAgZXZlbnQgT3JkZXJDYW5jZWxsZWQoYnl0ZXMzMiBpbmRleGVkIG9wdGlvbkhhc2gpOwogIGV2ZW50IE9wdGlvblRyYWRlZChieXRlczMyIGluZGV4ZWQgb3B0aW9uSGFzaCwgdWludDI1NiBhbW91bnRUb09wdGlvbiwgYm9vbCB0cmFkaW5nVG9rZW5BVG9PcHRpb24pOwogIGV2ZW50IE9wdGlvbkNsb3NlZChieXRlczMyIGluZGV4ZWQgb3B0aW9uSGFzaCk7CiAgCiAgLy8gQWxsb3cgdGhlIGFkbWluIHRvIHRyYW5zZmVyIG93bmVyc2hpcC4KICBmdW5jdGlvbiBjaGFuZ2VBZG1pbihhZGRyZXNzIF9hZG1pbikgZXh0ZXJuYWwgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluKTsKICAgIGFkbWluID0gX2FkbWluOwogIH0KICAKICAvLyBVc2VycyBtdXN0IGZpcnN0IGRlcG9zaXQgRVRIIGludG8gdGhlIEV4Y2hhbmdlIGluIG9yZGVyIHRvIHB1cmNoYXNlIE9wdGlvbnMuCiAgLy8gRVRIIGJhbGFuY2VzIGFyZSBzdG9yZWQgYXMgYSB0b2tlbiB3aXRoIGFkZHJlc3MgMC4KICBmdW5jdGlvbiBkZXBvc2l0RVRIKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICB1c2VyQmFsYW5jZVttc2cuc2VuZGVyXVswXSA9IHVzZXJCYWxhbmNlW21zZy5zZW5kZXJdWzBdLmFkZChtc2cudmFsdWUpOwogICAgRGVwb3NpdChtc2cuc2VuZGVyLCAwLCBtc2cudmFsdWUpOwogIH0KICAKICAvLyBVc2VycyBjYW4gd2l0aGRyYXcgYW55IGFtb3VudCBvZiBFVEggdXAgdG8gdGhlaXIgY3VycmVudCBiYWxhbmNlLgogIGZ1bmN0aW9uIHdpdGhkcmF3RVRIKHVpbnQyNTYgYW1vdW50KSBleHRlcm5hbCB7CiAgICByZXF1aXJlKHVzZXJCYWxhbmNlW21zZy5zZW5kZXJdWzBdID49IGFtb3VudCk7CiAgICB1c2VyQmFsYW5jZVttc2cuc2VuZGVyXVswXSA9IHVzZXJCYWxhbmNlW21zZy5zZW5kZXJdWzBdLnN1YihhbW91bnQpOwogICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQpOwogICAgV2l0aGRyYXdhbChtc2cuc2VuZGVyLCAwLCBhbW91bnQpOwogIH0KICAKICAvLyBUbyBkZXBvc2l0IHRva2VucywgdXNlcnMgbXVzdCBmaXJzdCAiYXBwcm92ZSIgdGhlIHRyYW5zZmVyIGluIHRoZSB0b2tlbiBjb250cmFjdC4KICAvLyBVc2VycyBtdXN0IGZpcnN0IGRlcG9zaXQgdG9rZW5zIGludG8gdGhlIEV4Y2hhbmdlIGluIG9yZGVyIHRvIGNyZWF0ZSBvciB0cmFkZSB3aXRoIE9wdGlvbnMuCiAgZnVuY3Rpb24gZGVwb3NpdFRva2VuKGFkZHJlc3MgdG9rZW4sIHVpbnQyNTYgYW1vdW50KSBleHRlcm5hbCB7CiAgICByZXF1aXJlKFRva2VuKHRva2VuKS50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgYW1vdW50KSk7ICAKICAgIHVzZXJCYWxhbmNlW21zZy5zZW5kZXJdW3Rva2VuXSA9IHVzZXJCYWxhbmNlW21zZy5zZW5kZXJdW3Rva2VuXS5hZGQoYW1vdW50KTsKICAgIERlcG9zaXQobXNnLnNlbmRlciwgdG9rZW4sIGFtb3VudCk7CiAgfQogIAogIC8vIFVzZXJzIGNhbiB3aXRoZHJhdyBhbnkgYW1vdW50IG9mIGEgZ2l2ZW4gdG9rZW4gdXAgdG8gdGhlaXIgY3VycmVudCBiYWxhbmNlLgogIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW4oYWRkcmVzcyB0b2tlbiwgdWludDI1NiBhbW91bnQpIGV4dGVybmFsIHsKICAgIHJlcXVpcmUodXNlckJhbGFuY2VbbXNnLnNlbmRlcl1bdG9rZW5dID49IGFtb3VudCk7CiAgICB1c2VyQmFsYW5jZVttc2cuc2VuZGVyXVt0b2tlbl0gPSB1c2VyQmFsYW5jZVttc2cuc2VuZGVyXVt0b2tlbl0uc3ViKGFtb3VudCk7CiAgICByZXF1aXJlKFRva2VuKHRva2VuKS50cmFuc2Zlcihtc2cuc2VuZGVyLCBhbW91bnQpKTsKICAgIFdpdGhkcmF3YWwobXNnLnNlbmRlciwgdG9rZW4sIGFtb3VudCk7CiAgfQogIAogIC8vIFRyYW5zZmVyIGZ1bmRzIGZyb20gb25lIHVzZXIncyBiYWxhbmNlIHRvIGFub3RoZXIncy4gIE5vdCBleHRlcm5hbGx5IGNhbGxhYmxlLgogIGZ1bmN0aW9uIHRyYW5zZmVyVXNlclRvVXNlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIGFkZHJlc3MgdG9rZW4sIHVpbnQyNTYgYW1vdW50KSBwcml2YXRlIHsKICAgIHJlcXVpcmUodXNlckJhbGFuY2VbZnJvbV1bdG9rZW5dID49IGFtb3VudCk7CiAgICB1c2VyQmFsYW5jZVtmcm9tXVt0b2tlbl0gPSB1c2VyQmFsYW5jZVtmcm9tXVt0b2tlbl0uc3ViKGFtb3VudCk7CiAgICB1c2VyQmFsYW5jZVt0b11bdG9rZW5dID0gdXNlckJhbGFuY2VbdG9dW3Rva2VuXS5hZGQoYW1vdW50KTsKICB9CgogIC8vIFRyYW5zZmVyIGZ1bmRzIGZyb20gYSB1c2VyJ3MgYmFsYW5jZSBpbnRvIGFuIE9wdGlvbi4gIE5vdCBleHRlcm5hbGx5IGNhbGxhYmxlLgogIGZ1bmN0aW9uIHRyYW5zZmVyVXNlclRvT3B0aW9uKGFkZHJlc3MgZnJvbSwgYnl0ZXMzMiBvcHRpb25IYXNoLCBhZGRyZXNzIHRva2VuLCB1aW50MjU2IGFtb3VudCkgcHJpdmF0ZSB7CiAgICByZXF1aXJlKHVzZXJCYWxhbmNlW2Zyb21dW3Rva2VuXSA+PSBhbW91bnQpOwogICAgdXNlckJhbGFuY2VbZnJvbV1bdG9rZW5dID0gdXNlckJhbGFuY2VbZnJvbV1bdG9rZW5dLnN1YihhbW91bnQpOwogICAgb3B0aW9uQmFsYW5jZVtvcHRpb25IYXNoXVt0b2tlbl0gPSBvcHRpb25CYWxhbmNlW29wdGlvbkhhc2hdW3Rva2VuXS5hZGQoYW1vdW50KTsKICB9CgogIC8vIFRyYW5zZmVyIGZ1bmRzIGZyb20gYW4gT3B0aW9uIHRvIGEgdXNlcidzIGJhbGFuY2UuICBOb3QgZXh0ZXJuYWxseSBjYWxsYWJsZS4KICBmdW5jdGlvbiB0cmFuc2Zlck9wdGlvblRvVXNlcihieXRlczMyIG9wdGlvbkhhc2gsIGFkZHJlc3MgdG8sIGFkZHJlc3MgdG9rZW4sIHVpbnQyNTYgYW1vdW50KSBwcml2YXRlIHsKICAgIHJlcXVpcmUob3B0aW9uQmFsYW5jZVtvcHRpb25IYXNoXVt0b2tlbl0gPj0gYW1vdW50KTsKICAgIG9wdGlvbkJhbGFuY2Vbb3B0aW9uSGFzaF1bdG9rZW5dID0gb3B0aW9uQmFsYW5jZVtvcHRpb25IYXNoXVt0b2tlbl0uc3ViKGFtb3VudCk7CiAgICB1c2VyQmFsYW5jZVt0b11bdG9rZW5dID0gdXNlckJhbGFuY2VbdG9dW3Rva2VuXS5hZGQoYW1vdW50KTsKICB9CgogIC8vIEhhc2hlcyBhbiBPcHRpb24ncyBwYXJhbWV0ZXJzIGZvciB1c2UgaW4gbG9va2luZyB1cCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgT3B0aW9uLiAgQ2FsbGFibGUgaW50ZXJuYWxseSBhbmQgZXh0ZXJuYWxseS4KICAvLyBWYXJpYWJsZXMgYXJlIGdyb3VwZWQgaW50byBhcnJheXMgYXMgYSB3b3JrYXJvdW5kIGZvciB0aGUgInRvbyBtYW55IGxvY2FsIHZhcmlhYmxlcyIgcHJvYmxlbS4KICAvLyBJbnN0ZWFkIG9mIGRpcmVjdGx5IGVuY29kaW5nIHRoZSB0b2tlbiBleGNoYW5nZSByYXRlIChTdHJpa2UgUHJpY2UpLCBpdCBpcyBpbnN0ZWFkIGltcGxpY2l0bHkKICAvLyBzdG9yZWQgYXMgbGltaXRzIG9uIHRoZSBudW1iZXIgb2YgZWFjaCBraW5kIG9mIHRva2VuIHRoZSBPcHRpb24gY2FuIHN0b3JlLgogIC8vIE5vdGUgdGhhdCBkdWUgdG8gaW50ZWdlciBkaXZpc2lvbiBkdXJpbmcgdHJhZGluZywgT3B0aW9ucyBtYXkgY29sbGVjdCBkdXN0IGFtb3VudHMgb3ZlciB0aGVpciBsaW1pdHMuCiAgLy8gVGhlIG9mZmNoYWluIG9yZGVyIGV4cGlyYXRpb24gdGltZSBkb3VibGVzIGFzIGEgbm9uY2UsIGFsbG93aW5nIE1ha2VycyB0byBjcmVhdGUgb3RoZXJ3aXNlIGlkZW50aWNhbCBPcHRpb25zLgogIGZ1bmN0aW9uIGdldE9wdGlvbkhhc2goYWRkcmVzc1szXSB0b2tlbkFfdG9rZW5CX21ha2VyLAogICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NlszXSBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLAogICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NlsyXSBtYXR1cmF0aW9uX2V4cGlyYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICBib29sIG1ha2VySXNTZWxsZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICBib29sIHByZW1pdW1Jc1Rva2VuQSkgcHVyZSBwdWJsaWMgcmV0dXJucyhieXRlczMyKSB7CiAgICBieXRlczMyIG9wdGlvbkhhc2ggPSBrZWNjYWsyNTYoCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuQV90b2tlbkJfbWFrZXJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuQV90b2tlbkJfbWFrZXJbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuQV90b2tlbkJfbWFrZXJbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW1bMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW1bMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW1bMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdHVyYXRpb25fZXhwaXJhdGlvblswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0dXJhdGlvbl9leHBpcmF0aW9uWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlcklzU2VsbGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVtaXVtSXNUb2tlbkEKICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICByZXR1cm4gb3B0aW9uSGFzaDsKICB9CiAgCiAgLy8gQ29tcHV0ZXMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgYW4gT3B0aW9uIGdpdmVuIGl0cyBwYXJhbWV0ZXJzLiAgQ2FsbGFibGUgaW50ZXJuYWxseSBhbmQgZXh0ZXJuYWxseS4KICBmdW5jdGlvbiBnZXRPcHRpb25TdGF0ZShhZGRyZXNzWzNdIHRva2VuQV90b2tlbkJfbWFrZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NlszXSBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLAogICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTZbMl0gbWF0dXJhdGlvbl9leHBpcmF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgbWFrZXJJc1NlbGxlciwKICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIHByZW1pdW1Jc1Rva2VuQSkgdmlldyBwdWJsaWMgcmV0dXJucyhvcHRpb25TdGF0ZXMpIHsKICAgIC8vIFRva2VucyBtdXN0IGJlIGRpZmZlcmVudCBmb3IgT3B0aW9uIHRvIGJlIFZhbGlkLgogICAgaWYodG9rZW5BX3Rva2VuQl9tYWtlclswXSA9PSB0b2tlbkFfdG9rZW5CX21ha2VyWzFdKSByZXR1cm4gb3B0aW9uU3RhdGVzLkludmFsaWQ7CiAgICAvLyBPcHRpb25zIG11c3QgaGF2ZSBub24temVybyBsaW1pdHMgb24gdGhlaXIgY29udGFpbmVkIFRva2VucyB0byBiZSBWYWxpZC4KICAgIGlmKChsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtWzBdID09IDApIHx8IChsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtWzFdID09IDApKSByZXR1cm4gb3B0aW9uU3RhdGVzLkludmFsaWQ7CiAgICAvLyBPcHRpb25zIG11c3QgcmVhY2ggTWF0dXJpdHkgYWZ0ZXIgdGhlIG9mZmNoYWluIG9yZGVyIGV4cGlyZXMgdG8gYmUgVmFsaWQuCiAgICBpZihtYXR1cmF0aW9uX2V4cGlyYXRpb25bMF0gPD0gbWF0dXJhdGlvbl9leHBpcmF0aW9uWzFdKSByZXR1cm4gb3B0aW9uU3RhdGVzLkludmFsaWQ7CiAgICBieXRlczMyIG9wdGlvbkhhc2ggPSBnZXRPcHRpb25IYXNoKHRva2VuQV90b2tlbkJfbWFrZXIsIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW0sIG1hdHVyYXRpb25fZXhwaXJhdGlvbiwgbWFrZXJJc1NlbGxlciwgcHJlbWl1bUlzVG9rZW5BKTsKICAgIC8vIENoZWNrIGlmIHRoZSBPcHRpb24ncyBvZmZjaGFpbiBvcmRlciB3YXMgY2FuY2VsbGVkLgogICAgaWYob3B0aW9uT3JkZXJDYW5jZWxsZWRbb3B0aW9uSGFzaF0pIHJldHVybiBvcHRpb25TdGF0ZXMuQ2FuY2VsbGVkOwogICAgLy8gQ2hlY2sgaWYgdGhlIE9wdGlvbidzIG9mZmNoYWluIG9yZGVyIGhhc24ndCBiZWVuIGZpbGxlZCB5ZXQuCiAgICBpZihvcHRpb25UYWtlcltvcHRpb25IYXNoXSA9PSAwKSB7CiAgICAgIC8vIENoZWNrIGlmIHRoZSBPcHRpb24ncyBvZmZjaGFpbiBvcmRlciBoYXMgZXhwaXJlZC4KICAgICAgaWYobm93ID49IG1hdHVyYXRpb25fZXhwaXJhdGlvblsxXSkgcmV0dXJuIG9wdGlvblN0YXRlcy5FeHBpcmVkOwogICAgICAvLyBPdGhlcndpc2UsIHRoZSBPcHRpb24ncyBvZmZjaGFpbiBvcmRlciBpcyBzdGlsbCBBdmFpbGFibGUgdG8gYmUgY3JlYXRlZCBvciBmaWxsZWQuCiAgICAgIHJldHVybiBvcHRpb25TdGF0ZXMuQXZhaWxhYmxlOwogICAgfQogICAgLy8gQ2hlY2sgaWYgdGhlIE9wdGlvbiBoYXMgYmVlbiBlbXB0aWVkIG9mIGl0cyBmdW5kcywgd2hpY2ggbWVhbnMgaXQgd2FzIGNsb3NlZCBieSBpdHMgU2VsbGVyLgogICAgaWYoKG9wdGlvbkJhbGFuY2Vbb3B0aW9uSGFzaF1bdG9rZW5BX3Rva2VuQl9tYWtlclswXV0gPT0gMCkgJiYKICAgICAgIChvcHRpb25CYWxhbmNlW29wdGlvbkhhc2hdW3Rva2VuQV90b2tlbkJfbWFrZXJbMV1dID09IDApKSByZXR1cm4gb3B0aW9uU3RhdGVzLkNsb3NlZDsKICAgIC8vIENoZWNrIGlmIHRoZSBPcHRpb24gaGFzIHBhc3NlZCBpdHMgTWF0dXJhdGlvbiB0aW1lLgogICAgaWYobm93ID49IG1hdHVyYXRpb25fZXhwaXJhdGlvblswXSkgcmV0dXJuIG9wdGlvblN0YXRlcy5NYXR1cmVkOwogICAgLy8gT3RoZXJ3aXNlLCB0aGUgT3B0aW9uIG11c3Qgc3RpbGwgYmUgYWN0aXZlIGFuZCB0cmFkZWFibGUgYnkgaXRzIEJ1eWVyLgogICAgcmV0dXJuIG9wdGlvblN0YXRlcy5UcmFkZWFibGU7CiAgfQogIAogIC8vIERldGVybWluZXMgd2hldGhlciB0aGUgU2VsbGVyIGlzIHRoZSBNYWtlciBvciB0aGUgVGFrZXIgZm9yIGEgZ2l2ZW4gT3B0aW9uLiAgTm90IGV4dGVybmFsbHkgY2FsbGFibGUuCiAgZnVuY3Rpb24gZ2V0U2VsbGVyKGFkZHJlc3MgbWFrZXIsIGFkZHJlc3MgdGFrZXIsIGJvb2wgbWFrZXJJc1NlbGxlcikgcHVyZSBwcml2YXRlIHJldHVybnMoYWRkcmVzcykgewogICAgLy8gVGVybmFyeSBvcGVyYXRvciB0byBhc3NpZ24gdGhlIFNlbGxlcidzIGFkZHJlc3M6ICg8Y29uZGl0aW9uYWw+ID8gPGlmLXRydWU+IDogPGlmLWZhbHNlPikKICAgIGFkZHJlc3Mgc2VsbGVyID0gbWFrZXJJc1NlbGxlciA/IG1ha2VyIDogdGFrZXI7CiAgICByZXR1cm4gc2VsbGVyOwogIH0KICAKICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIEJ1eWVyIGlzIHRoZSBNYWtlciBvciB0aGUgVGFrZXIgZm9yIGEgZ2l2ZW4gT3B0aW9uLiAgTm90IGV4dGVybmFsbHkgY2FsbGFibGUuCiAgZnVuY3Rpb24gZ2V0QnV5ZXIoYWRkcmVzcyBtYWtlciwgYWRkcmVzcyB0YWtlciwgYm9vbCBtYWtlcklzU2VsbGVyKSBwdXJlIHByaXZhdGUgcmV0dXJucyhhZGRyZXNzKSB7CiAgICAvLyBUZXJuYXJ5IG9wZXJhdG9yIHRvIGFzc2lnbiB0aGUgQnV5ZXIncyBhZGRyZXNzOiAoPGNvbmRpdGlvbmFsPiA/IDxpZi10cnVlPiA6IDxpZi1mYWxzZT4pCiAgICBhZGRyZXNzIGJ1eWVyID0gbWFrZXJJc1NlbGxlciA/IHRha2VyIDogbWFrZXI7CiAgICByZXR1cm4gYnV5ZXI7CiAgfQogIAogIC8vIFRyYW5zZmVyIHBheW1lbnQgZnJvbSBhbiBPcHRpb24ncyBCdXllciB0byB0aGUgU2VsbGVyIGxlc3MgdGhlIDElIGZlZSBzZW50IHRvIHRoZSBhZG1pbi4gIE5vdCBleHRlcm5hbGx5IGNhbGxhYmxlLgogIGZ1bmN0aW9uIHBheUZvck9wdGlvbihhZGRyZXNzIGJ1eWVyLCBhZGRyZXNzIHNlbGxlciwgdWludDI1NiBwcmVtaXVtLCBhZGRyZXNzIFRva2VuQSwgYWRkcmVzcyBUb2tlbkIsIGJvb2wgcHJlbWl1bUlzVG9rZW5BKSBwcml2YXRlIHsKICAgIHVpbnQyNTYgZmVlID0gKHByZW1pdW0ubXVsKGZlZV9yYXRpbykpLmRpdigxIGV0aGVyKTsKICAgIC8vIFRlcm5hcnkgb3BlcmF0b3IgdG8gYXNzaWduIHRoZSBUb2tlbiB1c2VkIGZvciB0aGUgUHJlbWl1bTogKDxjb25kaXRpb25hbD4gPyA8aWYtdHJ1ZT4gOiA8aWYtZmFsc2U+KQogICAgYWRkcmVzcyBwcmVtaXVtVG9rZW4gPSBwcmVtaXVtSXNUb2tlbkEgPyBUb2tlbkEgOiBUb2tlbkI7CiAgICB0cmFuc2ZlclVzZXJUb1VzZXIoYnV5ZXIsIHNlbGxlciwgcHJlbWl1bVRva2VuLCBwcmVtaXVtLnN1YihmZWUpKTsKICAgIHRyYW5zZmVyVXNlclRvVXNlcihidXllciwgYWRtaW4sIHByZW1pdW1Ub2tlbiwgZmVlKTsKICB9CiAgCiAgLy8gQWxsb3dzIGEgVGFrZXIgdG8gZmlsbCBhbiBvZmZjaGFpbiBvcmRlciBmb3IgYW4gT3B0aW9uIGNyZWF0ZWQgYnkgYSBNYWtlci4KICBmdW5jdGlvbiBmaWxsT3B0aW9uT3JkZXIoYWRkcmVzc1szXSB0b2tlbkFfdG9rZW5CX21ha2VyLAogICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2WzNdIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTZbMl0gbWF0dXJhdGlvbl9leHBpcmF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIG1ha2VySXNTZWxsZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgcHJlbWl1bUlzVG9rZW5BLAogICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50OCB2LAogICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlczMyWzJdIHJfcykgZXh0ZXJuYWwgewogICAgLy8gT3B0aW9uIG11c3QgYmUgQXZhaWxhYmxlLCB3aGljaCBtZWFucyBpdCBpcyB2YWxpZCwgdW5leHBpcmVkLCB1bmZpbGxlZCwgYW5kIHVuY2FuY2VsbGVkLgogICAgcmVxdWlyZShnZXRPcHRpb25TdGF0ZSh0b2tlbkFfdG9rZW5CX21ha2VyLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLCBtYXR1cmF0aW9uX2V4cGlyYXRpb24sIG1ha2VySXNTZWxsZXIsIHByZW1pdW1Jc1Rva2VuQSkgPT0gb3B0aW9uU3RhdGVzLkF2YWlsYWJsZSk7CiAgICBieXRlczMyIG9wdGlvbkhhc2ggPSBnZXRPcHRpb25IYXNoKHRva2VuQV90b2tlbkJfbWFrZXIsIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW0sIG1hdHVyYXRpb25fZXhwaXJhdGlvbiwgbWFrZXJJc1NlbGxlciwgcHJlbWl1bUlzVG9rZW5BKTsKICAgIC8vIFZlcmlmeSB0aGUgTWFrZXIncyBvZmZjaGFpbiBvcmRlciBpcyB2YWxpZCBieSBjaGVja2luZyB3aGV0aGVyIGl0IHdhcyBzaWduZWQgYnkgdGhlIE1ha2VyLgogICAgcmVxdWlyZShlY3JlY292ZXIoa2VjY2FrMjU2KCJceDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XG4zMiIsIG9wdGlvbkhhc2gpLCB2LCByX3NbMF0sIHJfc1sxXSkgPT0gdG9rZW5BX3Rva2VuQl9tYWtlclsyXSk7CiAgICBhZGRyZXNzIHNlbGxlciA9IGdldFNlbGxlcih0b2tlbkFfdG9rZW5CX21ha2VyWzJdLCBtc2cuc2VuZGVyLCBtYWtlcklzU2VsbGVyKTsKICAgIGFkZHJlc3MgYnV5ZXIgPSBnZXRCdXllcih0b2tlbkFfdG9rZW5CX21ha2VyWzJdLCBtc2cuc2VuZGVyLCBtYWtlcklzU2VsbGVyKTsKICAgIC8vIFBheSB0aGUgcHJlbWl1bSBmb3IgdGhlIE9wdGlvbiBpbiB1bml0cyBvZiBlaXRoZXIgVG9rZW5BIG9yIFRva2VuQiwgZGVwZW5kaW5nIG9uIHRoZSBib29sZWFuIHByZW1pdW1Jc1Rva2VuQS4KICAgIHBheUZvck9wdGlvbihidXllciwgc2VsbGVyLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtWzJdLCB0b2tlbkFfdG9rZW5CX21ha2VyWzBdLCB0b2tlbkFfdG9rZW5CX21ha2VyWzFdLCBwcmVtaXVtSXNUb2tlbkEpOwogICAgLy8gVHJhbnNmZXIgdGhlIGFtb3VudCBvZiBUb2tlbiBBIHNwZWNpZmllZCBpbiB0aGUgb3JkZXIgZnJvbSB0aGUgU2VsbGVyIHRvIHRoZSBPcHRpb24uCiAgICB0cmFuc2ZlclVzZXJUb09wdGlvbihzZWxsZXIsIG9wdGlvbkhhc2gsIHRva2VuQV90b2tlbkJfbWFrZXJbMF0sIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW1bMF0pOwogICAgLy8gU2V0IHRoZSBvcmRlciBmaWxsZXIgYXMgdGhlIE9wdGlvbidzIFRha2VyLCBtYXJraW5nIHRoZSBPcHRpb24gYXMgYWN0aXZlLgogICAgb3B0aW9uVGFrZXJbb3B0aW9uSGFzaF0gPSBtc2cuc2VuZGVyOwogICAgT3JkZXJGaWxsZWQob3B0aW9uSGFzaCk7CiAgfQogIAogIC8vIEFsbG93cyBhIE1ha2VyIHRvIGNhbmNlbCB0aGVpciBvZmZjaGFpbiBPcHRpb24gb3JkZXIgZWFybHkgKGkuZS4gYmVmb3JlIGl0cyBleHBpcmF0aW9uKS4KICBmdW5jdGlvbiBjYW5jZWxPcHRpb25PcmRlcihhZGRyZXNzWzNdIHRva2VuQV90b2tlbkJfbWFrZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NlszXSBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTZbMl0gbWF0dXJhdGlvbl9leHBpcmF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgbWFrZXJJc1NlbGxlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIHByZW1pdW1Jc1Rva2VuQSkgZXh0ZXJuYWwgewogICAgLy8gT3B0aW9uIG11c3QgYmUgQXZhaWxhYmxlLCB3aGljaCBtZWFucyBpdCBpcyB2YWxpZCwgdW5leHBpcmVkLCB1bmZpbGxlZCwgYW5kIHVuY2FuY2VsbGVkLgogICAgcmVxdWlyZShnZXRPcHRpb25TdGF0ZSh0b2tlbkFfdG9rZW5CX21ha2VyLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLCBtYXR1cmF0aW9uX2V4cGlyYXRpb24sIG1ha2VySXNTZWxsZXIsIHByZW1pdW1Jc1Rva2VuQSkgPT0gb3B0aW9uU3RhdGVzLkF2YWlsYWJsZSk7CiAgICAvLyBPbmx5IGFsbG93IHRoZSBNYWtlciB0byBjYW5jZWwgdGhlaXIgb3duIG9mZmNoYWluIE9wdGlvbiBvcmRlci4KICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB0b2tlbkFfdG9rZW5CX21ha2VyWzJdKTsKICAgIGJ5dGVzMzIgb3B0aW9uSGFzaCA9IGdldE9wdGlvbkhhc2godG9rZW5BX3Rva2VuQl9tYWtlciwgbGltaXRUb2tlbkFfbGltaXRUb2tlbkJfcHJlbWl1bSwgbWF0dXJhdGlvbl9leHBpcmF0aW9uLCBtYWtlcklzU2VsbGVyLCBwcmVtaXVtSXNUb2tlbkEpOwogICAgLy8gTWFyayB0aGUgb2ZmY2hhaW4gT3B0aW9uIG9yZGVyIGFzIGNhbmNlbGxlZCBvbmNoYWluLgogICAgb3B0aW9uT3JkZXJDYW5jZWxsZWRbb3B0aW9uSGFzaF0gPSB0cnVlOwogICAgT3JkZXJDYW5jZWxsZWQob3B0aW9uSGFzaCk7CiAgfQogIAogIC8vIEhhbmRsZXIgZm9yIHRyYWRpbmcgdG9rZW5zIGludG8gYW5kIG91dCBvZiB0aGUgT3B0aW9uIGF0IHRoZSBnaXZlbiBTdHJpa2UgUHJpY2UuICBOb3QgZXh0ZXJuYWxseSBjYWxsYWJsZS4KICBmdW5jdGlvbiB0cmFkZU9wdGlvbkhlbHBlcihhZGRyZXNzIGJ1eWVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzMzIgb3B0aW9uSGFzaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIHRva2VuVG9PcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyB0b2tlbkZyb21PcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBsaW1pdFRvT3B0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgbGltaXRGcm9tT3B0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgYW1vdW50VG9PcHRpb24pIHByaXZhdGUgewogICAgdHJhbnNmZXJVc2VyVG9PcHRpb24oYnV5ZXIsIG9wdGlvbkhhc2gsIHRva2VuVG9PcHRpb24sIGFtb3VudFRvT3B0aW9uKTsKICAgIC8vIFN0cmlrZSBQcmljZSBpcyBjYWxjdWxhdGVkIGFzIHRoZSByYXRpbyBvZiB0aGUgbWF4aW11bSBhbW91bnRzIG9mIGVhY2ggVG9rZW4gdGhlIE9wdGlvbiBjYW4gaG9sZC4KICAgIHVpbnQyNTYgYW1vdW50RnJvbU9wdGlvbiA9IChhbW91bnRUb09wdGlvbi5tdWwobGltaXRGcm9tT3B0aW9uKSkuZGl2KGxpbWl0VG9PcHRpb24pOwogICAgdHJhbnNmZXJPcHRpb25Ub1VzZXIob3B0aW9uSGFzaCwgYnV5ZXIsIHRva2VuRnJvbU9wdGlvbiwgYW1vdW50RnJvbU9wdGlvbik7CiAgfQoKICAvLyBBbGxvdyBhbiBPcHRpb24ncyBCdXllciB0byB0cmFkZSB0b2tlbnMgaW50byBhbmQgb3V0IG9mIHRoZSBPcHRpb24gYXQgdGhlIFN0cmlrZSBQcmljZSB1bnRpbCB0aGUgT3B0aW9uJ3MgTWF0dXJhdGlvbi4KICAvLyBUaGUgYm9vbGVhbiB0cmFkaW5nVG9rZW5BVG9PcHRpb24gaXMgVHJ1ZSB3aGVuIFRva2VuIEEgaXMgYmVpbmcgdHJhZGVkIHRvIHRoZSBPcHRpb24sIGFuZCBGYWxzZSB3aGVuIFRva2VuIEIgaXMuCiAgLy8gVHJhZGUgbGltaXRzIGFyZW4ndCBleHBsaWNpdGx5IGNoZWNrZWQsIGJ1dCBhcmUgZW5mb3JjZWQgYnkgT3B0aW9uIGJhbGFuY2VzIG5vdCBiZWluZyBkcmFpbmFibGUgYmVsb3cgemVyby4KICAvLyBOb3RlIHRoYXQgZHVlIHRvIGludGVnZXIgZGl2aXNpb24gZHVyaW5nIHRyYWRpbmcsIE9wdGlvbnMgbWF5IGNvbGxlY3QgZHVzdCBhbW91bnRzIG92ZXIgdGhlaXIgbGltaXRzLgogIGZ1bmN0aW9uIHRyYWRlT3B0aW9uKGFkZHJlc3NbM10gdG9rZW5BX3Rva2VuQl9tYWtlciwKICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2WzNdIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW0sCiAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NlsyXSBtYXR1cmF0aW9uX2V4cGlyYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBtYWtlcklzU2VsbGVyLAogICAgICAgICAgICAgICAgICAgICAgIGJvb2wgcHJlbWl1bUlzVG9rZW5BLAogICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgYW1vdW50VG9PcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgYm9vbCB0cmFkaW5nVG9rZW5BVG9PcHRpb24pIGV4dGVybmFsIHsKICAgIC8vIE9wdGlvbiBtdXN0IGJlIFRyYWRlYWJsZSwgd2hpY2ggbWVhbnMgaXQncyBiZWVuIGZpbGxlZCBhbmQgaGFzbid0IHBhc3NlZCBpdHMgdHJhZGluZyBkZWFkbGluZSAoTWF0dXJhdGlvbikuCiAgICByZXF1aXJlKGdldE9wdGlvblN0YXRlKHRva2VuQV90b2tlbkJfbWFrZXIsIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW0sIG1hdHVyYXRpb25fZXhwaXJhdGlvbiwgbWFrZXJJc1NlbGxlciwgcHJlbWl1bUlzVG9rZW5BKSA9PSBvcHRpb25TdGF0ZXMuVHJhZGVhYmxlKTsKICAgIGJ5dGVzMzIgb3B0aW9uSGFzaCA9IGdldE9wdGlvbkhhc2godG9rZW5BX3Rva2VuQl9tYWtlciwgbGltaXRUb2tlbkFfbGltaXRUb2tlbkJfcHJlbWl1bSwgbWF0dXJhdGlvbl9leHBpcmF0aW9uLCBtYWtlcklzU2VsbGVyLCBwcmVtaXVtSXNUb2tlbkEpOwogICAgYWRkcmVzcyBidXllciA9IGdldEJ1eWVyKHRva2VuQV90b2tlbkJfbWFrZXJbMl0sIG9wdGlvblRha2VyW29wdGlvbkhhc2hdLCBtYWtlcklzU2VsbGVyKTsKICAgIC8vIE9ubHkgYWxsb3cgdGhlIEJ1eWVyIHRvIHRyYWRlIHdpdGggdGhlIE9wdGlvbi4KICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBidXllcik7CiAgICBpZih0cmFkaW5nVG9rZW5BVG9PcHRpb24pIHsKICAgICAgdHJhZGVPcHRpb25IZWxwZXIoYnV5ZXIsIG9wdGlvbkhhc2gsIHRva2VuQV90b2tlbkJfbWFrZXJbMF0sIHRva2VuQV90b2tlbkJfbWFrZXJbMV0sIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW1bMF0sIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW1bMV0sIGFtb3VudFRvT3B0aW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIHRyYWRlT3B0aW9uSGVscGVyKGJ1eWVyLCBvcHRpb25IYXNoLCB0b2tlbkFfdG9rZW5CX21ha2VyWzFdLCB0b2tlbkFfdG9rZW5CX21ha2VyWzBdLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtWzFdLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtWzBdLCBhbW91bnRUb09wdGlvbik7CiAgICB9CiAgICBPcHRpb25UcmFkZWQob3B0aW9uSGFzaCwgYW1vdW50VG9PcHRpb24sIHRyYWRpbmdUb2tlbkFUb09wdGlvbik7CiAgfQogIAogIC8vIEFsbG93cyBhbiBPcHRpb24ncyBTZWxsZXIgdG8gd2l0aGRyYXcgdGhlaXIgZnVuZHMgYWZ0ZXIgdGhlIE9wdGlvbidzIE1hdHVyYXRpb24uCiAgZnVuY3Rpb24gY2xvc2VPcHRpb24oYWRkcmVzc1szXSB0b2tlbkFfdG9rZW5CX21ha2VyLAogICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTZbM10gbGltaXRUb2tlbkFfbGltaXRUb2tlbkJfcHJlbWl1bSwKICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2WzJdIG1hdHVyYXRpb25fZXhwaXJhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICBib29sIG1ha2VySXNTZWxsZXIsCiAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBwcmVtaXVtSXNUb2tlbkEpIGV4dGVybmFsIHsKICAgIC8vIE9wdGlvbiBtdXN0IGhhdmUgTWF0dXJlZCwgd2hpY2ggbWVhbnMgaXQncyBmaWxsZWQsIGhhcyBwYXNzZWQgaXRzIE1hdHVyYXRpb24gdGltZSwgYW5kIGlzIHVuY2xvc2VkLgogICAgcmVxdWlyZShnZXRPcHRpb25TdGF0ZSh0b2tlbkFfdG9rZW5CX21ha2VyLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLCBtYXR1cmF0aW9uX2V4cGlyYXRpb24sIG1ha2VySXNTZWxsZXIsIHByZW1pdW1Jc1Rva2VuQSkgPT0gb3B0aW9uU3RhdGVzLk1hdHVyZWQpOwogICAgYnl0ZXMzMiBvcHRpb25IYXNoID0gZ2V0T3B0aW9uSGFzaCh0b2tlbkFfdG9rZW5CX21ha2VyLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLCBtYXR1cmF0aW9uX2V4cGlyYXRpb24sIG1ha2VySXNTZWxsZXIsIHByZW1pdW1Jc1Rva2VuQSk7CiAgICBhZGRyZXNzIHNlbGxlciA9IGdldFNlbGxlcih0b2tlbkFfdG9rZW5CX21ha2VyWzJdLCBvcHRpb25UYWtlcltvcHRpb25IYXNoXSwgbWFrZXJJc1NlbGxlcik7CiAgICAvLyBPbmx5IGFsbG93IHRoZSBTZWxsZXIgdG8gY2xvc2UgdGhlaXIgb3duIE9wdGlvbi4KICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBzZWxsZXIpOwogICAgLy8gVHJhbnNmZXIgdGhlIE9wdGlvbidzIGVudGlyZSBiYWxhbmNlIG9mIGVhY2ggdG9rZW4gYmFjayB0byB0aGUgU2VsbGVyLCBjbG9zaW5nIHRoZSBPcHRpb24uCiAgICB0cmFuc2Zlck9wdGlvblRvVXNlcihvcHRpb25IYXNoLCBzZWxsZXIsIHRva2VuQV90b2tlbkJfbWFrZXJbMF0sIG9wdGlvbkJhbGFuY2Vbb3B0aW9uSGFzaF1bdG9rZW5BX3Rva2VuQl9tYWtlclswXV0pOwogICAgdHJhbnNmZXJPcHRpb25Ub1VzZXIob3B0aW9uSGFzaCwgc2VsbGVyLCB0b2tlbkFfdG9rZW5CX21ha2VyWzFdLCBvcHRpb25CYWxhbmNlW29wdGlvbkhhc2hdW3Rva2VuQV90b2tlbkJfbWFrZXJbMV1dKTsKICAgIE9wdGlvbkNsb3NlZChvcHRpb25IYXNoKTsKICB9CiAgCiAgZnVuY3Rpb24oKSBwYXlhYmxlIGV4dGVybmFsIHsKICAgIHJldmVydCgpOwogIH0KICAKfQ=='.
	

]
