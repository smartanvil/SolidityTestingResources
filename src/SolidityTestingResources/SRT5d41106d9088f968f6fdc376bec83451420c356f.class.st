Class {
	#name : #SRT5d41106d9088f968f6fdc376bec83451420c356f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5d41106d9088f968f6fdc376bec83451420c356f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4gMC40IC4xNTsKCgovKgogKiBFUkMyMCBpbnRlcmZhY2UKICogc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgewogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsKfQoKCi8qKgogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA+IDApOwogICAgdWludCBjID0gYSAvIGI7CiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjPj1hICYmIGM+PWIpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKCi8qKgogKiBTdGFuZGFyZCBFUkMyMCB0b2tlbiB3aXRoIFNob3J0IEhhbmQgQXR0YWNrIGFuZCBhcHByb3ZlKCkgcmFjZSBjb25kaXRpb24gbWl0aWdhdGlvbi4KICoKICogQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOgogKiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIFNhZmVNYXRoIHsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgLyoqCiAgICoKICAgKiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjawogICAqCiAgICogaHR0cDovL3Zlc3NlbmVzLmNvbS90aGUtZXJjMjAtc2hvcnQtYWRkcmVzcy1hdHRhY2stZXhwbGFpbmVkLwogICAqLwogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICBpZihtc2cuZGF0YS5sZW5ndGggPCBzaXplICsgNCkgcmV2ZXJ0KCk7CiAgICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzYWZlU3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIGlmIChfdmFsdWUgPiBfYWxsb3dhbmNlKSB0aHJvdzsKCiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlc1tfZnJvbV0sIF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoX2FsbG93YW5jZSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgcmV2ZXJ0KCk7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKY29udHJhY3Qgb3duZWQgewogICAgYWRkcmVzcyBvd25lcjsKCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IEZpc2ggIGlzIG93bmVkLCBTdGFuZGFyZFRva2VuIHsKCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBUZXJtc09mVVNlID0gImh0dHBzOi8vZ2l0aHViLmNvbS9fX19fX19fX19fX19fX19fX19fX19fXyI7CgogIC8qCiAgICogU3RhdGUgdmFyaWFibGVzCiAgICovCgogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkZTSCI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkZpc2giOwogIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDM7CgogIC8qCiAgICogQ29uc3RydWN0b3IgZnVuY3Rpb24KICAgKi8KCiAgZnVuY3Rpb24gRmlzaCgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPd25lciBjYW4gbm93IGJlIGEgcmVmZXJyYWwKICAgIHRvdGFsU3VwcGx5ID0gMTsKICAgIGJ1eVByaWNlX3dpZT0gMTAwMDAwMDAwMDAwMDAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxMDAgc3phYm8gcGVyIG9uZSB0b2tlbi4gT25lIHVuaXQgPSAxMDAwIHRva2Vucy4gMSBldGhlciA9IDEwIHVuaXRzCiAgICBzZWxsUHJpY2Vfd2llID0gYnV5UHJpY2Vfd2llICogc2VsbF9wcGMgLyAxMDA7CiAgfQoKICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsgcmV2ZXJ0KCk7IH0KCiAgLyoKICAgKiBTRUNUSU9OOiBQUklDRSBHUk9XVEgKICAgKgogICAqIFRoaXMgc2VjdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgZGFpbHkgcHJpY2UgaW5jcmVhc2UuIE9uY2UgcGVyIGRheSB0aGUgYnV5IHByaWNlIHdpbGwgYmUgaW5jcmVhc2VkIAogICAqIHRocm91Z2ggYWRqdXN0UHJpY2UgbW9kaWZpZXIuIFRoZSBwcmljZSB1cGRhdGUgaGFwcGVucyBiZWZvcmUgYnV5IGFuZCBzZWxsIGZ1bmN0aW9ucyBhcmUgZXhlY3V0ZWQuCiAgICogQ29udHJhY3Qgb3duZXIgaGFzIG9ubHkgb25lIHdheSB0byBjb250cm9sIHRoZSBncm93dGggcmF0ZSBoZXJlIC0gc2V0R3Jvd3RoLgogICAqLwoKICAvLyBHcm93dGggcmF0ZSBpcyBwcmVzZW50IGluIHBhcnRzIHBlciBtaWxsaW9uIChwcG0pCiAgdWludDMyIHB1YmxpYyBkYWlseUdyb3d0aF9wcG0gPSA2MTAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmYXVsdCBncm93dGggaXMgMjAlICgwLjYxJSBwZXIgZGF5KQogIHVpbnQgcHVibGljIGRhaWx5R3Jvd3RoVXBkYXRlZF9kYXRlID0gbm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHVwZGF0ZSBpdCBvbiBmaXJzdCBkYXkgb2YgY29udHJhY3QKICAKICB1aW50MzIgcHJpdmF0ZSBjb25zdGFudCBkYWlseUdyb3d0aE1pbl9wcG0gPSAgNjA5NjsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAyMCUgZXZlcnkgbW9udGggaW4gcHJpY2UgZ3Jvd3RoIG9yIDAuMDA2MTAgZGFpbHkKICB1aW50MzIgcHJpdmF0ZSBjb25zdGFudCBkYWlseUdyb3d0aE1heF9wcG0gPSAyMzM3NDsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxMDAlIGluIGdyb3d0aCBldmVyeSBtb250aCBvciAwLDAyMzM3IGRhaWx5CiAgCiAgdWludDMyIHB1YmxpYyBjb25zdGFudCBzZWxsX3BwYyA9IDkwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VsbCBwcmljZSBpcyA5MCUgb2YgYnV5IHByaWNlCgogIGV2ZW50IERhaWx5R3Jvd3RoVXBkYXRlKHVpbnQgX25ld1JhdGVfcHBtKTsKICBldmVudCBQcmljZUFkanVzdGVkKHVpbnQgX25ld0J1eVByaWNlX3dlaSwgdWludCBfbmV3U2VsbFByaWNlX3dlaSk7CgogIC8qCiAgICogTU9ESUZJRVIKICAgKiBJZiBsYXN0IHVwZGF0ZSBoYXBwZW5lZCBtb3JlIHRoYW4gb25lIGRheSBhZ28sIHVwZGF0ZSB0aGUgcHJpY2UsIHNhdmUgdGhlIHRpbWUgb2YgY3VycmVudCBwcmljZSB1cGRhdGUKICAgKiBBZGp1c3Qgc2VsbCBwcmljZSBhbmQgbG9nIHRoZSBldmVudAogICAqLwogIG1vZGlmaWVyIGFkanVzdFByaWNlKCkgewogICAgaWYgKCAoZGFpbHlHcm93dGhVcGRhdGVkX2RhdGUgKyAxIGRheXMpIDwgbm93ICkgewogICAgICBkYWlseUdyb3d0aFVwZGF0ZWRfZGF0ZSA9IG5vdzsKICAgICAgYnV5UHJpY2Vfd2llID0gYnV5UHJpY2Vfd2llICogKDEwMDAwMDAgKyBkYWlseUdyb3d0aF9wcG0pIC8gMTAwMDAwMDsKICAgICAgc2VsbFByaWNlX3dpZSA9IGJ1eVByaWNlX3dpZSAqIHNlbGxfcHBjIC8gMTAwOwogICAgICBQcmljZUFkanVzdGVkKGJ1eVByaWNlX3dpZSwgc2VsbFByaWNlX3dpZSk7CiAgICB9CiAgICBfOwogIH0KCiAgLyogCiAgICogT1dORVIgT05MWTsgRVhURVJOQUwgTUVUSE9ECiAgICogc2V0R3Jvd3RoIGNhbiBhY2NlcHQgdmFsdWVzIHdpdGhpbiByYW5nZSBmcm9tIDIwJSB0byAxMDAlIG9mIGdyb3d0aCBwZXIgbW9udGggKGJhc2VkIG9uIDMwIGRheXMgcGVyIG1vbnRoIGFzc3VtcHRpb24pLgogICAqIAogICAqICAgRm9ybXVsYSBpczoKICAgKgogICAqICAgICAgIGJ1eVByaWNlX2V0aCA9IGJ1eVByaWNlX2V0aCAqICgxMDAwMDAwICsgZGFpbHlHcm93dGhNaW5fcHBtKSAvIDEwMDAwMDA7CiAgICogICAgICAgXm5ldyB2YWx1ZSAgICAgXmN1cnJlbnQgdmFsdWUgIF4xLjAwNjEgKGlmIGRhaWx5R3Jvd3RoX3BwbSA9PSA2MTAwKQogICAqCiAgICogICAgICAgMS4wMDYxXjMwID0gMS4yMCAoaWYgZGFpbHlHcm93dGhfcHBtID09IDYxMDApCiAgICogICAgICAgMS4wMjMzNzReMzAgPSAyIChpZiBkYWlseUdyb3d0aF9wcG0gPT0gMjMzNzQpCiAgICogCiAgICogIFNvbWUgb3RoZXIgZGFpbHkgcmF0ZXMKICAgKgogICAqICAgUGVyIG1vbnRoIC0+IFZhbHVlIGluIHBwbQogICAqICAgICAgMS4zICAgIC0+ICA4NzgzCiAgICogICAgICAxLjQgICAgLT4gMTEyNzgKICAgKiAgICAgIDEuNSAgICAtPiAxMzYwNwogICAqICAgICAgMS42ICAgIC0+IDE1NzkwCiAgICogICAgICAxLjcgICAgLT4gMTc4NDQKICAgKiAgICAgIDEuOCAgICAtPiAxOTc4NgogICAqLwogIGZ1bmN0aW9uIHNldEdyb3d0aCh1aW50MzIgX25ld0dyb3d0aF9wcG0pIG9ubHlPd25lciBleHRlcm5hbCByZXR1cm5zKGJvb2wgcmVzdWx0KSB7CiAgICBpZiAoX25ld0dyb3d0aF9wcG0gPj0gZGFpbHlHcm93dGhNaW5fcHBtICYmCiAgICAgICAgX25ld0dyb3d0aF9wcG0gPD0gZGFpbHlHcm93dGhNYXhfcHBtCiAgICApIHsKICAgICAgZGFpbHlHcm93dGhfcHBtID0gX25ld0dyb3d0aF9wcG07CiAgICAgIERhaWx5R3Jvd3RoVXBkYXRlKF9uZXdHcm93dGhfcHBtKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQoKICAvKiAKICAgKiBTRUNUSU9OOiBUUkFESU5HCiAgICoKICAgKiBUaGlzIHNlY3Rpb24gaXMgcmVzcG9uc2libGUgcHVyZWx5IGZvciB0cmFkaW5nIHRoZSB0b2tlbnMuIFVzZXIgY2FuIGJ1eSB0b2tlbnMsIHVzZXIgY2FuIHNlbGwgdG9rZW5zLgogICAqCiAgICovCgogIHVpbnQyNTYgcHVibGljIHNlbGxQcmljZV93aWU7CiAgdWludDI1NiBwdWJsaWMgYnV5UHJpY2Vfd2llOwoKICAvKgogICAqIEVYVEVSTkFMIE1FVEhPRAogICAqIFVzZXIgY2FuIGJ1eSBhcmJpdHJhcnkgYW1vdW50IG9mIHRva2Vucy4gQmVmb3JlIGFtb3VudCBvZiB0b2tlbnMgd2lsbCBiZSBjYWxjdWxhdGVkLCB0aGUgcHJpY2Ugb2YgdG9rZW5zIAogICAqIGhhcyB0byBiZSBhZGp1c3RlZC4gVGhpcyBoYXBwZW5zIGluIGFkanVzdFByaWNlIG1vZGlmaWVkIGJlZm9yZSBmdW5jdGlvbiBjYWxsLgogICAqCiAgICogU2hvcnQgZGVzY3JpcHRpb24gb2YgdGhpcyBtZXRob2QKICAgKgogICAqICAgQ2FsY3VsYXRlIHRva2VucyB0aGF0IHVzZXIgaXMgYnV5aW5nCiAgICogICBBc3NpZ24gYXdhcmRzIHJvIHJlZmVyZWFscwogICAqICAgQWRkIHNvbWUgYm91bnR5IGZvciBuZXcgdXNlcnMgd2hvIHNldCByZWZlcnJhbCBiZWZvcmUgZmlyc3QgYnV5CiAgICogICBTZW5kIHRva2VucyB0aGF0IGJlbG9uZyB0byBjb250cmFjdCBvciBpZiB0aGVyZSBpcyBub24gaXNzdWUgbW9yZSBhbmQgc2VuZCB0aGVtIHRvIHVzZXIKICAgKgogICAqLwogIGZ1bmN0aW9uIGJ1eSgpIGFkanVzdFByaWNlIHBheWFibGUgZXh0ZXJuYWwgewogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gYnV5UHJpY2Vfd2llKTsKICAgIHZhciBhbW91bnQgPSBzYWZlRGl2KG1zZy52YWx1ZSwgYnV5UHJpY2Vfd2llKTsKCiAgICBhc3NpZ25Cb3VudHJ5VG9SZWZlcmFscyhtc2cuc2VuZGVyLCBhbW91bnQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyc3QgYXNzaWduIGJvdW50eQoKICAgIC8vIEJ1eSBkaXNjb3VudCBpZiBVc2VyIGlzIGEgbmV3IHVzZXIgYW5kIGhhcyBzZXQgcmVmZXJyYWwKICAgIGlmICggYmFsYW5jZXNbbXNnLnNlbmRlcl0gPT0gMCAmJiByZWZlcnJhbHNbbXNnLnNlbmRlcl1bMF0gIT0gMCApIHsKICAgICAgLy8gQ2hlY2sgdGhhdCB1c2VyIGhhcyB0byB3YWl0IGF0IGxlYXN0IHR3byB3ZWVrcyBiZWZvcmUgaGUgZ2V0IGJyZWFrIGV2ZW4gb24gd2hhdCBoZSB3aWxsIGdldAogICAgICBhbW91bnQgPSBhbW91bnQgKiAoMTAwICsgbGFuZGluZ0Rpc2NvdW50X3BwYykgLyAxMDA7CiAgICB9CgogICAgaXNzdWVUbyhtc2cuc2VuZGVyLCBhbW91bnQpOwogIH0KCiAgLyoKICAgKiBFWFRFUk5BTCBNRVRIT0QKICAgKiBVc2VyIGNhbiBzZWxsIHRva2VucyBiYWNrIHRvIGNvbnRyYWN0LgogICAqCiAgICogU2hvcnQgZGVzY3JpcHRpb24gb2YgdGhpcyBtZXRob2QKICAgKgogICAqICAgQWRqdXN0IHByaWNlCiAgICogICBDYWxjdWxhdGUgdG9rZW5zIHByaWNlIHRoYXQgdXNlciBpcyBzZWxsaW5nIAogICAqICAgTWFrZSBhbGwgcG9zc2libGUgY2hlY2tzCiAgICogICBUcmFuc2ZlciB0aGUgbW9uZXkKICAgKi8KICBmdW5jdGlvbiBzZWxsKHVpbnQyNTYgX2Ftb3VudCkgYWRqdXN0UHJpY2UgZXh0ZXJuYWwgewogICAgcmVxdWlyZShfYW1vdW50ID4gMCAmJiBiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50KTsKICAgIHVpbnQgbW9uZXlXb3J0aCA9IHNhZmVNdWwoX2Ftb3VudCwgc2VsbFByaWNlX3dpZSk7CiAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSA+IG1vbmV5V29ydGgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgY2FuJ3Qgc2VsbCBpZiB3ZSBkb24ndCBoYXZlIGVub3VnaCBtb25leQogICAgCiAgICBpZiAoCiAgICAgICAgYmFsYW5jZXNbdGhpc10gKyBfYW1vdW50ID4gYmFsYW5jZXNbdGhpc10gJiYKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtIF9hbW91bnQgPCBiYWxhbmNlc1ttc2cuc2VuZGVyXQogICAgKSB7CiAgICAgIGJhbGFuY2VzW3RoaXNdID0gc2FmZUFkZChiYWxhbmNlc1t0aGlzXSwgX2Ftb3VudCk7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkcyB0aGUgYW1vdW50IHRvIG93bmVyJ3MgYmFsYW5jZQogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIF9hbW91bnQpOyAgICAgICAgICAgIC8vIHN1YnRyYWN0cyB0aGUgYW1vdW50IGZyb20gc2VsbGVyJ3MgYmFsYW5jZQogICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChtb25leVdvcnRoKSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmRzIGV0aGVyIHRvIHRoZSBzZWxsZXIuIEl0J3MgaW1wb3J0YW50CiAgICAgICAgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gZG8gdGhpcyBsYXN0IHRvIGF2b2lkIHJlY3Vyc2lvbiBhdHRhY2tzCiAgICAgIH0gZWxzZSB7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgdGhpcywgX2Ftb3VudCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhlY3V0ZXMgYW4gZXZlbnQgcmVmbGVjdGluZyBvbiB0aGUgY2hhbmdlCiAgICAgIH0gICAgICAgIAogICAgfSBlbHNlIHsKICAgICAgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVja3MgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoIHRvIHNlbGwKICAgIH0gIAogIH0KCiAgLyoKICAgKiBQUklWQVRFIE1FVEhPRAogICAqIElzc3VlICBuZXcgdG9rZW5zIHRvIGNvbnRyYWN0CiAgICovCiAgZnVuY3Rpb24gaXNzdWVUbyhhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfYW1vdW50X3RrbnMpIHByaXZhdGUgewogICAgaWYgKAogICAgICAgIGJhbGFuY2VzW3RoaXNdID49IF9hbW91bnRfdGtucwogICAgKSB7CiAgICAgIC8vIEFsbCB0b2tlbnMgYXJlIHRha2VuIGZyb20gYmFsYW5jZQogICAgICBiYWxhbmNlc1t0aGlzXSA9IHNhZmVTdWIoYmFsYW5jZXNbdGhpc10sIF9hbW91bnRfdGtucyk7CiAgICAgIGJhbGFuY2VzW19iZW5lZmljaWFyeV0gPSBzYWZlQWRkKGJhbGFuY2VzW19iZW5lZmljaWFyeV0sIF9hbW91bnRfdGtucyk7CiAgICB9IGVsc2UgewogICAgICAvLyBCYWxhbmNlIHdpbGwgYmUgbG93ZXJlZCBhbmQgbmV3IHRva2VucyB3aWxsIGJlIGlzc3VlZAogICAgICB1aW50IGRpZmYgPSBzYWZlU3ViKF9hbW91bnRfdGtucywgYmFsYW5jZXNbdGhpc10pOwoKICAgICAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCBkaWZmKTsKICAgICAgYmFsYW5jZXNbdGhpc10gPSAwOwogICAgICBiYWxhbmNlc1tfYmVuZWZpY2lhcnldID0gc2FmZUFkZChiYWxhbmNlc1tfYmVuZWZpY2lhcnldLCBfYW1vdW50X3RrbnMpOwogICAgfQogICAgCiAgICBUcmFuc2Zlcih0aGlzLCBfYmVuZWZpY2lhcnksIF9hbW91bnRfdGtucyk7CiAgfQogIAogIC8qCiAgICogU0VDVElPTjogQk9VTlRJRVMKICAgKgogICAqIFRoaXMgc2VjdGlvbiBkZXNjcmliZXMgYWxsIHBvc3NpYmxlIGF3YXJkcy4KICAgKi8KICAgIAogIG1hcHBpbmcoYWRkcmVzcyA9PiBhZGRyZXNzWzNdKSByZWZlcnJhbHM7CiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJvdW50aWVzOwoKICB1aW50MzIgcHVibGljIGNvbnN0YW50IGxhbmRpbmdEaXNjb3VudF9wcGMgPSA0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMYW5kaW5nIGRpc2NvdW50IGlzIDQlCgogIC8qCiAgICogRVhURVJOQUwgTUVUSE9EIAogICAqIFNldCB5b3VyIHJlZmVycmFsIGZpcnN0LiBZb3Ugd2lsbCBnZXQgNCUgbW9yZSB0b2tlbnMgb24geW91ciBmaXJzdCBidXkgYW5kIHRyaWdnZXIgYQogICAqIHJld2FyZCBvZiB3aG9ldmVyIHRvbGQgeW91IGFib3V0IHRoaXMgY29udHJhY3QuIEEgd2luLXdpbiBzY2VuYXJpby4KICAgKi8KICBmdW5jdGlvbiByZWZlcnJhbChhZGRyZXNzIF9yZWZlcnJhbCkgZXh0ZXJuYWwgcmV0dXJucyhib29sKSB7CiAgICBpZiAoIGJhbGFuY2VzW19yZWZlcnJhbF0gPiAwICYmICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZmVycmFsIHBhcnRpY2lwYXRlZCBhbHJlYWR5CiAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID09IDAgICYmICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VuZGVyIGlzIGEgbmV3IHVzZXIKICAgICAgICAgcmVmZXJyYWxzW21zZy5zZW5kZXJdWzBdID09IDAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IHJldHVybmluZyB1c2VyLiBVc2VyIGNhbiBub3QgcmVhc3NpZ24gdGhlaXIgcmVmZXJyYWxzIGJ1dCB0aGV5IGNhbiBhc3NpZ24gdGhlbSBsYXRlciBvbgogICAgKSB7CiAgICAgIHZhciByZWZlcnJhbF9yZWZlcnJhbHMgPSByZWZlcnJhbHNbX3JlZmVycmFsXTsKICAgICAgcmVmZXJyYWxzW21zZy5zZW5kZXJdID0gW19yZWZlcnJhbCwgcmVmZXJyYWxfcmVmZXJyYWxzWzBdLCByZWZlcnJhbF9yZWZlcnJhbHNbMV1dOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLyoKICAgKiBQUklWQVRFIE1FVEhPRAogICAqIEF3YXJkIGJvdW50aWVzIHRvIHJlZmVycmFscy4KICAgKi8gCiAgZnVuY3Rpb24gYXNzaWduQm91bnRyeVRvUmVmZXJhbHMoYWRkcmVzcyBfcmVmZXJyYWxzT2YsIHVpbnQyNTYgX2Ftb3VudCkgcHJpdmF0ZSB7CiAgICB2YXIgcmVmcyA9IHJlZmVycmFsc1tfcmVmZXJyYWxzT2ZdOwogICAgCiAgICBpZiAocmVmc1swXSAhPSAwKSB7CiAgICAgaXNzdWVUbyhyZWZzWzBdLCAoX2Ftb3VudCAqIDQpIC8gMTAwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gNCUgYm91bnR5IHRvIGRpcmVjdCByZWZlcnJhbAogICAgICBpZiAocmVmc1sxXSAhPSAwKSB7CiAgICAgICAgaXNzdWVUbyhyZWZzWzFdLCAoX2Ftb3VudCAqIDIpIC8gMTAwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMiUgYm91bnR5IHRvIHJlZmVycmFsIG9mIHJlZmVycmFsCiAgICAgICAgaWYgKHJlZnNbMl0gIT0gMCkgewogICAgICAgICAgaXNzdWVUbyhyZWZzWzJdLCAoX2Ftb3VudCAqIDEpIC8gMTAwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDElIGJvdW50eSB0byByZWZlcnJhbCBvZiByZWZlcnJhbCBvZiByZWZlcnJhbAogICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICAvKgogICAqIE9XTkVSIE9OTFk7IEVYVEVSTkFMIE1FVEhPRAogICAqIFNhbnRhIGlzIGNvbWluZyEgV2hvIGV2ZXIgbWFkZSBpbXBhY3QgdG8gcHJvbW90ZSB0aGUgRmlzaCBhbmQgY2FuIHByb3ZlIGl0IHdpbGwgZ2V0IHRoZSBib251cwogICAqLwogIGZ1bmN0aW9uIGFzc2lnbkJvdW50eShhZGRyZXNzIF9hY2NvdW50LCB1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciBleHRlcm5hbCByZXR1cm5zKGJvb2wpIHsKICAgIHJlcXVpcmUoX2Ftb3VudCA+IDApOyAKICAgICAKICAgIGlmIChiYWxhbmNlc1tfYWNjb3VudF0gPiAwICYmICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBY2NvdW50IGhhZCBwYXJ0aWNpcGF0ZWQgYWxyZWFkeQogICAgICAgIGJvdW50aWVzW19hY2NvdW50XSArIF9hbW91bnQgPD0gMTAwMDAwMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIG1vcmUgdGhhbiAxMDAgdG9rZW4gdW5pdHMgcGVyIGFjY291bnQKICAgICkgewogICAgICBpc3N1ZVRvKF9hY2NvdW50LCBfYW1vdW50KTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQp9'.
	

]
