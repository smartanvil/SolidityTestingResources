Class {
	#name : #SRT446D1696a5527018453cdA3d67aa4C2cd189b9f6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT446D1696a5527018453cdA3d67aa4C2cd189b9f6 >> base64 [
	^ 'Y29udHJhY3QgR3JlZWRQaXQgewogICAgCiAgICBhZGRyZXNzIHByaXZhdGUgb3duZXI7CiAgICAKICAgIC8vU3RvcmVkIHZhcmlhYmxlcwogICAgdWludCBwcml2YXRlIGJhbGFuY2UgPSAwOwogICAgdWludCBwcml2YXRlIHVuaXF1ZVVzZXJzID0gMDsKICAgIHVpbnQgcHJpdmF0ZSB1c2Vyc1Byb2ZpdHMgPSAwOwogICAgdWludCBwcml2YXRlIHJlc2N1ZXMgPSAwOwogICAgdWludCBwcml2YXRlIGNvbGxlY3RlZEZlZXMgPSAwOwogICAgdWludCBwcml2YXRlIGp1bXBGZWUgPSAxMDsKICAgIHVpbnQgcHJpdmF0ZSBiYXNlTXVsdGlwbGllciA9IDExMDsKICAgIHVpbnQgcHJpdmF0ZSBtYXhNdWx0aXBsaWVyID0gMjAwOwogICAgdWludCBwcml2YXRlIHBheW91dE9yZGVyID0gMDsKICAgIHVpbnQgcHJpdmF0ZSByZXNjdWVSZWNvcmQgPSAwOwogICAgdWludCB0aW1lT2ZMYXN0RGVwb3NpdCA9IG5vdzsKICAgIGFkZHJlc3MgcHJpdmF0ZSBoZXJvID0gMHgwOwogICAgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IFVzZXIpIHByaXZhdGUgdXNlcnM7CiAgICBFbnRyeVtdIHByaXZhdGUgZW50cmllczsKICAgIAogICAgZXZlbnQgSnVtcChhZGRyZXNzIHdobywgdWludCBkZXBvc2l0LCB1aW50IHBheW91dCk7CiAgICBldmVudCBSZXNjdWUoYWRkcmVzcyB3aG8sIGFkZHJlc3Mgc2F2aW91ciwgdWludCBwYXlvdXQpOwogICAgZXZlbnQgTmV3SGVybyhhZGRyZXNzIHdobyk7CiAgICAKICAgIC8vU2V0IG93bmVyIG9uIGNvbnRyYWN0IGNyZWF0aW9uCiAgICBmdW5jdGlvbiBHcmVlZFBpdCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seW93bmVyIHsgaWYgKG1zZy5zZW5kZXIgPT0gb3duZXIpIF87IH0gICAgCiAgICBzdHJ1Y3QgVXNlciB7CiAgICAgICAgdWludCBpZDsKICAgICAgICBhZGRyZXNzIGFkZHI7CiAgICAgICAgc3RyaW5nIG5pY2tuYW1lOwogICAgICAgIHVpbnQgcmVzY3VlQ291bnQ7CiAgICAgICAgdWludCByZXNjdWVUb2tlbnM7CiAgICB9CiAgICAKICAgIHN0cnVjdCBFbnRyeSB7CiAgICAgICAgYWRkcmVzcyBlbnRyeUFkZHJlc3M7CiAgICAgICAgdWludCBkZXBvc2l0OwogICAgICAgIHVpbnQgcGF5b3V0OwogICAgICAgIHVpbnQgdG9rZW5zOwogICAgfQoKICAgIC8vRmFsbGJhY2sgZnVuY3Rpb24KICAgIGZ1bmN0aW9uKCkgewogICAgICAgIGluaXQoKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gaW5pdCgpIHByaXZhdGV7CiAgICAgICAgLy9Pbmx5IGRlcG9zaXRzID4wLjFFVEggYXJlIGFsbG93ZWQgdG8gam9pbgogICAgICAgIGlmIChtc2cudmFsdWUgPCAxMDAgZmlubmV5KSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAganVtcEluKCk7CiAgICAgICAgCiAgICAgICAgLy9QcmV2ZW50IGNoZWFwIHRyb2xscyBmcm9tIHJldml2aW5nIHRoZSBwaXQgaWYgaXQgZGllcyAoZGVhdGggPSB+M21vbnRocyB3aXRob3V0IGRlcG9zaXRzKQogICAgICAgIGlmIChtc2cudmFsdWUgPiA1KQogICAgICAgICAgICB0aW1lT2ZMYXN0RGVwb3NpdCA9IG5vdzsKICAgIH0KICAgIAogICAgLy9Kb2luIHRoZSBwaXQKICAgIGZ1bmN0aW9uIGp1bXBJbigpIHByaXZhdGUgewogICAgICAgIAogICAgICAgIC8vTGltaXQgZGVwb3NpdHMgdG8gNTBFVEgKCQl1aW50IGRWYWx1ZSA9IDEwMCBmaW5uZXk7CgkJaWYgKG1zZy52YWx1ZSA+IDUwIGV0aGVyKSB7CgkJICAgIC8vTWFrZSBzdXJlIHdlIHJlY2VpZWQgdGhlIG1vbmV5IGJlZm9yZSByZWZ1bmRpbmcgdGhlIHN1cnBsdXMKCQkgICAgaWYgKHRoaXMuYmFsYW5jZSA+PSBiYWxhbmNlICsgY29sbGVjdGVkRmVlcyArIG1zZy52YWx1ZSkKCQkJICAgIG1zZy5zZW5kZXIuc2VuZChtc2cudmFsdWUgLSA1MCBldGhlcik7CQoJCQlkVmFsdWUgPSA1MCBldGhlcjsKCQl9CgkJZWxzZSB7IGRWYWx1ZSA9IG1zZy52YWx1ZTsgfQoKICAgICAgICAvL0FkZCBuZXcgdXNlcnMgdG8gdGhlIHVzZXJzIGFycmF5IGlmIGhlJ3MgYSBuZXcgcGxheWVyCiAgICAgICAgYWRkTmV3VXNlcihtc2cuc2VuZGVyKTsKICAgICAgICAKICAgICAgICAvL01ha2Ugc3VyZSB0aGF0IG9ubHkgdXAgdG8gNSByZXNjdWUgdG9rZW5zIGFyZSBzcGVudCBhdCBhIHRpbWUKICAgICAgICB1aW50IHRva2Vuc1RvVXNlID0gdXNlcnNbbXNnLnNlbmRlcl0ucmVzY3VlVG9rZW5zID49IDUgPyA1IDogdXNlcnNbbXNnLnNlbmRlcl0ucmVzY3VlVG9rZW5zOwogICAgICAgIHVpbnQgdG9rZW5zVXNlZCA9IDA7CiAgICAgICAgCiAgICAgICAgLy9FbmZvcmNlIGxvd2VyIHBheW91dHMgaWYgdG9vIG1hbnkgcGVvcGxlIHN0dWNrIGluIHRoZSBwaXQKICAgICAgICB1aW50IHJhbmRNdWx0aXBsaWVyID0gcmFuZCg1MCk7CiAgICAgICAgdWludCBjdXJyZW50RW50cmllcyA9IGVudHJpZXMubGVuZ3RoIC0gcGF5b3V0T3JkZXI7CiAgICAgICAgcmFuZE11bHRpcGxpZXIgPSBjdXJyZW50RW50cmllcyA+IDE1ID8gKHJhbmRNdWx0aXBsaWVyIC8gMikgOiByYW5kTXVsdGlwbGllcjsKICAgICAgICByYW5kTXVsdGlwbGllciA9IGN1cnJlbnRFbnRyaWVzID4gMjUgPyAwIDogcmFuZE11bHRpcGxpZXI7CiAgICAgICAgLy9JbmNlbnRpdmUgdG8gam9pbiBpZiB0aGUgcGl0IGlzIG5lYXJseSBlbXB0eSAoKzUwJSByYW5kb20gbXVsdGlwbGllcikKICAgICAgICByYW5kTXVsdGlwbGllciA9IGN1cnJlbnRFbnRyaWVzIDw9IDUgJiYgZFZhbHVlIDw9IDIwID8gcmFuZE11bHRpcGxpZXIgKiAzIC8gMiA6IHJhbmRNdWx0aXBsaWVyOwogICAgICAgIAogICAgICAgIC8vQ2FsY3VsYXRlIHRoZSBvcHRpbWFsIGFtb3VudCBvZiByZXNjdWUgdG9rZW5zIHRvIHNwZW5kCiAgICAgICAgd2hpbGUgKHRva2Vuc1RvVXNlID4gMCAmJiAoYmFzZU11bHRpcGxpZXIgKyByYW5kTXVsdGlwbGllciArIHRva2Vuc1VzZWQqMTApIDwgbWF4TXVsdGlwbGllcikKICAgICAgICB7CiAgICAgICAgICAgIHRva2Vuc1RvVXNlLS07CiAgICAgICAgICAgIHRva2Vuc1VzZWQrKzsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdWludCBmaW5hbE11bHRpcGxpZXIgPSAoYmFzZU11bHRpcGxpZXIgKyByYW5kTXVsdGlwbGllciArIHRva2Vuc1VzZWQqMTApOwogICAgICAgIAogICAgICAgIGlmIChmaW5hbE11bHRpcGxpZXIgPiBtYXhNdWx0aXBsaWVyKQogICAgICAgICAgICBmaW5hbE11bHRpcGxpZXIgPSBtYXhNdWx0aXBsaWVyOwogICAgICAgICAgICAKICAgICAgICAvL0FkZCBuZXcgZW50cnkgdG8gdGhlIGVudHJpZXMgYXJyYXkgICAgCiAgICAgICAgaWYgKG1zZy52YWx1ZSA8IDUwIGV0aGVyKQogICAgICAgICAgICBlbnRyaWVzLnB1c2goRW50cnkobXNnLnNlbmRlciwgbXNnLnZhbHVlLCAobXNnLnZhbHVlICogKGZpbmFsTXVsdGlwbGllcikgLyAxMDApLCB0b2tlbnNVc2VkKSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBlbnRyaWVzLnB1c2goRW50cnkobXNnLnNlbmRlciwgNTAgZXRoZXIsKCg1MCBldGhlcikgKiAoZmluYWxNdWx0aXBsaWVyKSAvIDEwMCksIHRva2Vuc1VzZWQpKTsKCiAgICAgICAgLy9UcmlnZ2VyIGp1bXAgZXZlbnQKICAgICAgICBpZiAobXNnLnZhbHVlIDwgNTAgZXRoZXIpCiAgICAgICAgICAgIEp1bXAobXNnLnNlbmRlciwgbXNnLnZhbHVlLCAobXNnLnZhbHVlICogKGZpbmFsTXVsdGlwbGllcikgLyAxMDApKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIEp1bXAobXNnLnNlbmRlciwgNTAgZXRoZXIsICgoNTAgZXRoZXIpICogKGZpbmFsTXVsdGlwbGllcikgLyAxMDApKTsKCiAgICAgICAgdXNlcnNbbXNnLnNlbmRlcl0ucmVzY3VlVG9rZW5zIC09IHRva2Vuc1VzZWQ7CiAgICAgICAgCiAgICAgICAgLy9Db2xsZWN0IGZlZXMgYW5kIHVwZGF0ZSBjb250cmFjdCBiYWxhbmNlCiAgICAgICAgYmFsYW5jZSArPSAoZFZhbHVlICogKDEwMCAtIGp1bXBGZWUpKSAvIDEwMDsKICAgICAgICBjb2xsZWN0ZWRGZWVzICs9IChkVmFsdWUgKiBqdW1wRmVlKSAvIDEwMDsKICAgICAgICAKICAgICAgICBib29sIHNhdmlvdXIgPSBmYWxzZTsKICAgICAgICAKICAgICAgICAvL1BheSBwZW5kaW5nIGVudHJpZXMgaWYgdGhlIG5ldyBiYWxhbmNlIGFsbG93cyBmb3IgaXQKICAgICAgICB3aGlsZSAoYmFsYW5jZSA+IGVudHJpZXNbcGF5b3V0T3JkZXJdLnBheW91dCkgewogICAgICAgICAgICAKICAgICAgICAgICAgc2F2aW91ciA9IGZhbHNlOwogICAgICAgICAgICAKICAgICAgICAgICAgdWludCBlbnRyeVBheW91dCA9IGVudHJpZXNbcGF5b3V0T3JkZXJdLnBheW91dDsKICAgICAgICAgICAgdWludCBlbnRyeURlcG9zaXQgPSBlbnRyaWVzW3BheW91dE9yZGVyXS5kZXBvc2l0OwogICAgICAgICAgICB1aW50IHByb2ZpdCA9IGVudHJ5UGF5b3V0IC0gZW50cnlEZXBvc2l0OwogICAgICAgICAgICB1aW50IHNhdmlvdXJTaGFyZSA9IDA7CiAgICAgICAgICAgIAogICAgICAgICAgICAvL0dpdmUgY3JlZGl0ICYgcmV3YXJkIGZvciB0aGUgcmVzY3VlIGlmIHRoZSB1c2VyIHNhdmVkIHNvbWVvbmUgZWxzZQogICAgICAgICAgICBpZiAodXNlcnNbbXNnLnNlbmRlcl0uYWRkciAhPSBlbnRyaWVzW3BheW91dE9yZGVyXS5lbnRyeUFkZHJlc3MpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHVzZXJzW21zZy5zZW5kZXJdLnJlc2N1ZUNvdW50Kys7CiAgICAgICAgICAgICAgICAvL0RvdWJsZSBvciB0cmlwbGUgdG9rZW4gYm9udXMgaWYgdGhlIHVzZXIgaXMgdGFraW5nIGEgbW9kZXJhdGUvaGlnaCByaXNrIHRvIGhlbHAgdGhvc2UgdHJhcHBlZAogICAgICAgICAgICAgICAgaWYgKGVudHJ5RGVwb3NpdCA+PSAxIGV0aGVyKSB7CiAgICAgICAgICAgICAgICAgICAgdXNlcnNbbXNnLnNlbmRlcl0ucmVzY3VlVG9rZW5zICs9IGRWYWx1ZSA8IDIwIHx8IGN1cnJlbnRFbnRyaWVzIDwgMTUgPyAxIDogMjsKICAgICAgICAgICAgICAgICAgICB1c2Vyc1ttc2cuc2VuZGVyXS5yZXNjdWVUb2tlbnMgKz0gZFZhbHVlIDwgNDAgfHwgY3VycmVudEVudHJpZXMgPCAyNSA/IDAgOiAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2F2aW91ciA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGJvb2wgaXNIZXJvID0gZmFsc2U7CiAgICAgICAgICAgIAogICAgICAgICAgICBpc0hlcm8gPSBlbnRyaWVzW3BheW91dE9yZGVyXS5lbnRyeUFkZHJlc3MgPT0gaGVybzsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vU2hhcmUgcHJvZml0IHdpdGggc2F2aW91ciBpZiB0aGUgZ2FpbiBpcyBzdWJzdGFudGlhbCBlbm91Z2ggYW5kIHRoZSBzYXZpb3VyIGludmVzdGVkIGVub3VnaCAoaGVybyBleGVtcHQpCiAgICAgICAgICAgIGlmIChzYXZpb3VyICYmICFpc0hlcm8gJiYgcHJvZml0ID4gMjAgKiBlbnRyeURlcG9zaXQgLyAxMDAgJiYgcHJvZml0ID4gMTAwIGZpbm5leSAmJiBkVmFsdWUgPj0gNSBldGhlcikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKGRWYWx1ZSA8IDEwIGV0aGVyKQogICAgICAgICAgICAgICAgICAgc2F2aW91clNoYXJlID0gMyArIHJhbmQoNSk7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChkVmFsdWUgPj0gMTAgZXRoZXIgJiYgZFZhbHVlIDwgMjUgZXRoZXIpCiAgICAgICAgICAgICAgICAgIHNhdmlvdXJTaGFyZSA9IDcgKyByYW5kKDgpOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoZFZhbHVlID49IDI1IGV0aGVyICYmIGRWYWx1ZSA8IDQwIGV0aGVyKQogICAgICAgICAgICAgICAgICAgc2F2aW91clNoYXJlID0gMTIgKyByYW5kKDEzKTsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRWYWx1ZSA+PSA0MCBldGhlcikKICAgICAgICAgICAgICAgICAgIHNhdmlvdXJTaGFyZSA9IHJhbmQoNTApOwogICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzYXZpb3VyU2hhcmUgKj0gcHJvZml0IC8gMTAwOwogICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLnNlbmQoc2F2aW91clNoYXJlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgdWludCBwYXlvdXQgPSBlbnRyeVBheW91dCAtIHNhdmlvdXJTaGFyZTsKICAgICAgICAgICAgZW50cmllc1twYXlvdXRPcmRlcl0uZW50cnlBZGRyZXNzLnNlbmQocGF5b3V0KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vVHJpZ2dlciByZXNjdWUgZXZlbnQKICAgICAgICAgICAgUmVzY3VlKGVudHJpZXNbcGF5b3V0T3JkZXJdLmVudHJ5QWRkcmVzcywgbXNnLnNlbmRlciwgcGF5b3V0KTsKCiAgICAgICAgICAgIGJhbGFuY2UgLT0gZW50cnlQYXlvdXQ7CiAgICAgICAgICAgIHVzZXJzUHJvZml0cyArPSBlbnRyeVBheW91dDsKICAgICAgICAgICAgCiAgICAgICAgICAgIHJlc2N1ZXMrKzsKICAgICAgICAgICAgcGF5b3V0T3JkZXIrKzsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy9DaGVjayBmb3IgbmV3IEhlcm8gb2YgdGhlIFBpdAogICAgICAgIGlmIChzYXZpb3VyICYmIHVzZXJzW21zZy5zZW5kZXJdLnJlc2N1ZUNvdW50ID4gcmVzY3VlUmVjb3JkKQogICAgICAgIHsKICAgICAgICAgICAgcmVzY3VlUmVjb3JkID0gdXNlcnNbbXNnLnNlbmRlcl0ucmVzY3VlQ291bnQ7CiAgICAgICAgICAgIGhlcm8gPSBtc2cuc2VuZGVyOwogICAgICAgICAgICAvL1RyaWdnZXIgbmV3IGhlcm8gZXZlbnQKICAgICAgICAgICAgTmV3SGVybyhtc2cuc2VuZGVyKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vR2VuZXJhdGUgcmFuZG9tIG51bWJlciBiZXR3ZWVuIDEgJiBtYXgKICAgIHVpbnQyNTYgY29uc3RhbnQgcHJpdmF0ZSBGQUNUT1IgPSAgMTE1NzkyMDg5MjM3MzE2MTk1NDIzNTcwOTg1MDA4Njg3OTA3ODUzMjY5OTg0NjY1NjQwNTY0MDM5NDU3NTg0MDA3OTEzMTI5NjM5OTsKICAgIGZ1bmN0aW9uIHJhbmQodWludCBtYXgpIGNvbnN0YW50IHByaXZhdGUgcmV0dXJucyAodWludDI1NiByZXN1bHQpewogICAgICAgIHVpbnQyNTYgZmFjdG9yID0gRkFDVE9SICogMTAwIC8gbWF4OwogICAgICAgIHVpbnQyNTYgbGFzdEJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyIC0gMTsKICAgICAgICB1aW50MjU2IGhhc2hWYWwgPSB1aW50MjU2KGJsb2NrLmJsb2NraGFzaChsYXN0QmxvY2tOdW1iZXIpKTsKICAgIAogICAgICAgIHJldHVybiB1aW50MjU2KCh1aW50MjU2KGhhc2hWYWwpIC8gZmFjdG9yKSkgJSBtYXggKyAxOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZGROZXdVc2VyKGFkZHJlc3MgQWRkcmVzcykgcHJpdmF0ZQogICAgewogICAgICAgIGlmICh1c2Vyc1tBZGRyZXNzXS5hZGRyID09IGFkZHJlc3MoMCkpCiAgICAgICAgewogICAgICAgICAgICB1c2Vyc1tBZGRyZXNzXS5pZCA9ICsrdW5pcXVlVXNlcnM7CiAgICAgICAgICAgIHVzZXJzW0FkZHJlc3NdLmFkZHIgPSBBZGRyZXNzOwogICAgICAgICAgICB1c2Vyc1tBZGRyZXNzXS5uaWNrbmFtZSA9ICdVbm5hbWVkUGxheWVyJzsKICAgICAgICAgICAgdXNlcnNbQWRkcmVzc10ucmVzY3VlQ291bnQgPSAwOwogICAgICAgICAgICB1c2Vyc1tBZGRyZXNzXS5yZXNjdWVUb2tlbnMgPSAwOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy9UcmFuc2ZlciBlYXJuaW5ncyBmcm9tIGZlZXMgdG8gdGhlIG93bmVyCiAgICBmdW5jdGlvbiBjb2xsZWN0RmVlcygpIG9ubHlvd25lciB7CiAgICAgICAgaWYgKGNvbGxlY3RlZEZlZXMgPT0gMCkgdGhyb3c7CgogICAgICAgIG93bmVyLnNlbmQoY29sbGVjdGVkRmVlcyk7CiAgICAgICAgY29sbGVjdGVkRmVlcyA9IDA7CiAgICB9CgogICAgLy9Db250cmFjdCBtYW5hZ2VtZW50CiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIG5ld093bmVyKSBvbmx5b3duZXIgewogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZUJhc2VNdWx0aXBsaWVyKHVpbnQgbXVsdGkpIG9ubHlvd25lciB7CiAgICAgICAgaWYgKG11bHRpIDwgMTEwIHx8IG11bHRpID4gMTUwKSB0aHJvdzsKICAgICAgICAKICAgICAgICBiYXNlTXVsdGlwbGllciA9IG11bHRpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjaGFuZ2VNYXhNdWx0aXBsaWVyKHVpbnQgbXVsdGkpIG9ubHlvd25lciB7CiAgICAgICAgaWYgKG11bHRpIDwgMjAwIHx8IG11bHRpID4gMzAwKSB0aHJvdzsKICAgICAgICAKICAgICAgICBtYXhNdWx0aXBsaWVyID0gbXVsdGk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZUZlZSh1aW50IGZlZSkgb25seW93bmVyIHsKICAgICAgICBpZiAoZmVlIDwgMCB8fCBmZWUgPiAxMCkgdGhyb3c7CiAgICAgICAgCiAgICAgICAganVtcEZlZSA9IGZlZTsKICAgIH0KICAgIAogICAgCiAgICAvL0pTT04gZnVuY3Rpb25zCiAgICBmdW5jdGlvbiBzZXROaWNrbmFtZShzdHJpbmcgbmFtZSkgewogICAgICAgIGFkZE5ld1VzZXIobXNnLnNlbmRlcik7CiAgICAgICAgCiAgICAgICAgaWYgKGJ5dGVzKG5hbWUpLmxlbmd0aCA+PSAyICYmIGJ5dGVzKG5hbWUpLmxlbmd0aCA8PSAxNikKICAgICAgICAgICAgdXNlcnNbbXNnLnNlbmRlcl0ubmlja25hbWUgPSBuYW1lOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjdXJyZW50QmFsYW5jZSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcGl0QmFsYW5jZSwgc3RyaW5nIGluZm8pIHsKICAgICAgICBwaXRCYWxhbmNlID0gYmFsYW5jZSAvIDEgZmlubmV5OwogICAgICAgIGluZm8gPSAnVGhlIGJhbGFuY2Ugb2YgdGhlIHBpdCBpbiBGaW5uZXlzIChjb250cmFjdCBiYWxhbmNlIG1pbnVzIGZlZXMpLic7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGhlcm9PZlRoZVBpdCgpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MgdGhlSGVybywgc3RyaW5nIG5pY2tuYW1lLCB1aW50IHBlb3BsZVNhdmVkLCBzdHJpbmcgaW5mbykgewogICAgICAgIHRoZUhlcm8gPSBoZXJvOyAgCiAgICAgICAgbmlja25hbWUgPSB1c2Vyc1t0aGVIZXJvXS5uaWNrbmFtZTsKICAgICAgICBwZW9wbGVTYXZlZCA9IHJlc2N1ZVJlY29yZDsKICAgICAgICBpbmZvID0gJ1RoZSBjdXJyZW50IHJlc2N1ZSByZWNvcmQgaG9sZGVyLiBBbGwgaGFpbCEnOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB1c2VyTmFtZShhZGRyZXNzIEFkZHJlc3MpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBuaWNrbmFtZSkgewogICAgICAgIG5pY2tuYW1lID0gdXNlcnNbQWRkcmVzc10ubmlja25hbWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRvdGFsUmVzY3VlcygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVzY3VlQ291bnQsIHN0cmluZyBpbmZvKSB7CiAgICAgICAgcmVzY3VlQ291bnQgPSByZXNjdWVzOwogICAgICAgIGluZm8gPSAnVGhlIG51bWJlciBvZiB0aW1lcyB0aGF0IHBlb3BsZSBoYXZlIGJlZW4gcmVzY3VlZCBmcm9tIHRoZSBwaXQgKGFrYSB0aGUgbnVtYmVyIG9mIHRpbWVzIHBlb3BsZSBtYWRlIGEgcHJvZml0KS4nOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBtdWx0aXBsaWVycygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgQmFzZU11bHRpcGxpZXIsIHVpbnQgTWF4TXVsdGlwbGllciwgc3RyaW5nIGluZm8pIHsKICAgICAgICBCYXNlTXVsdGlwbGllciA9IGJhc2VNdWx0aXBsaWVyOwogICAgICAgIE1heE11bHRpcGxpZXIgPSBtYXhNdWx0aXBsaWVyOwogICAgICAgIGluZm8gPSAnVGhlIG11bHRpcGxpZXJzIGFwcGxpZWQgdG8gYWxsIGRlcG9zaXRzOiB0aGUgZmluYWwgbXVsdGlwbGllciBpcyBhIHJhbmRvbSBudW1iZXIgYmV0d2VlbiB0aGUgbXVsdHBsaWVycyBzaG93biBkaXZpZGVkIGJ5IDEwMC4gQnkgZGVmYXVsdCB4MS4xfngxLjUgKHVwIHRvIHgyIGlmIHJlc2N1ZSB0b2tlbnMgYXJlIHVzZWQsIGdyYW50aW5nICswLjEgcGVyIHRva2VuKS4gSXQgZGV0ZXJtaW5lcyB0aGUgYW1vdW50IG9mIG1vbmV5IHlvdSB3aWxsIGdldCB3aGVuIHJlc2N1ZWQgKGEgc2F2aW91ciBzaGFyZSBtaWdodCBiZSBkZWR1Y3RlZCkuJzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gcGl0RmVlKCkgY29uc3RhbnQgcmV0dXJucyAodWludCBmZWVQZXJjZW50YWdlLCBzdHJpbmcgaW5mbykgewogICAgICAgIGZlZVBlcmNlbnRhZ2UgPSBqdW1wRmVlOwogICAgICAgIGluZm8gPSAnVGhlIGZlZSBwZXJjZW50YWdlIGFwcGxpZWQgdG8gYWxsIGRlcG9zaXRzLiBJdCBjYW4gY2hhbmdlIHRvIHNwZWVkIHBheW91dHMgKG1heCAxMCUpLic7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIG5leHRQYXlvdXRHb2FsKCkgY29uc3RhbnQgcmV0dXJucyAodWludCBmaW5uZXlzLCBzdHJpbmcgaW5mbykgewogICAgICAgIGZpbm5leXMgPSAoZW50cmllc1twYXlvdXRPcmRlcl0ucGF5b3V0IC0gYmFsYW5jZSkgLyAxIGZpbm5leTsKICAgICAgICBpbmZvID0gJ1RoZSBhbW91bnQgb2YgRmlubmV5cyAoRXRoZXJzICogMTAwMCkgdGhhdCBuZWVkIHRvIGJlIGRlcG9zaXRlZCBmb3IgdGhlIG5leHQgcGF5b3V0IHRvIGJlIGV4ZWN1dGVkLic7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHVuY2xhaW1lZEZlZXMoKSBjb25zdGFudCByZXR1cm5zICh1aW50IGV0aGVycywgc3RyaW5nIGluZm8pIHsKICAgICAgICBldGhlcnMgPSBjb2xsZWN0ZWRGZWVzIC8gMSBldGhlcjsKICAgICAgICBpbmZvID0gJ1RoZSBhbW91bnQgb2YgRXRoZXJzIG9idGFpbmVkIHRocm91Z2ggZmVlcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGNvbGxlY3RlZCBieSB0aGUgb3duZXIuJzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdG90YWxFbnRyaWVzKCkgY29uc3RhbnQgcmV0dXJucyAodWludCBjb3VudCwgc3RyaW5nIGluZm8pIHsKICAgICAgICBjb3VudCA9IGVudHJpZXMubGVuZ3RoOwogICAgICAgIGluZm8gPSAnVGhlIG51bWJlciBvZiB0aW1lcyB0aGF0IHBlb3BsZSBoYXZlIGp1bXBlZCBpbnRvIHRoZSBwaXQuJzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdG90YWxVc2VycygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdXNlcnMsIHN0cmluZyBpbmZvKSB7CiAgICAgICAgdXNlcnMgPSB1bmlxdWVVc2VyczsKICAgICAgICBpbmZvID0gJ1RoZSBudW1iZXIgb2YgdW5pcXVlIHVzZXJzIHRoYXQgaGF2ZSBqb2luZWQgdGhlIHBpdC4nOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhd2FpdGluZ1BheW91dCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgY291bnQsIHN0cmluZyBpbmZvKSB7CiAgICAgICAgY291bnQgPSBlbnRyaWVzLmxlbmd0aCAtIHBheW91dE9yZGVyOwogICAgICAgIGluZm8gPSAnVGhlIG51bWJlciBvZiBwZW9wbGUgd2FpdGluZyB0byBiZSBzYXZlZC4nOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBlbnRyeURldGFpbHModWludCBpbmRleCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyB1c2VyLCBzdHJpbmcgbmlja05hbWUsIHVpbnQgZGVwb3NpdCwgdWludCBwYXlvdXQsIHVpbnQgdG9rZW5zVXNlZCwgc3RyaW5nIGluZm8pCiAgICB7CiAgICAgICAgaWYgKGluZGV4IDw9IGVudHJpZXMubGVuZ3RoKSB7CiAgICAgICAgICAgIHVzZXIgPSBlbnRyaWVzW2luZGV4XS5lbnRyeUFkZHJlc3M7CiAgICAgICAgICAgIG5pY2tOYW1lID0gdXNlcnNbZW50cmllc1tpbmRleF0uZW50cnlBZGRyZXNzXS5uaWNrbmFtZTsKICAgICAgICAgICAgZGVwb3NpdCA9IGVudHJpZXNbaW5kZXhdLmRlcG9zaXQgLyAxIGZpbm5leTsKICAgICAgICAgICAgcGF5b3V0ID0gZW50cmllc1tpbmRleF0ucGF5b3V0IC8gMSBmaW5uZXk7CiAgICAgICAgICAgIHRva2Vuc1VzZWQgPSBlbnRyaWVzW2luZGV4XS50b2tlbnM7CiAgICAgICAgICAgIGluZm8gPSAnRW50cnkgaW5mbzogdXNlciBhZGRyZXNzLCBuYW1lLCBleHBlY3RlZCBwYXlvdXQgaW4gRmlubmV5cyAoYXBwcm94aW1hdGUpLCByZXNjdWUgdG9rZW5zIHVzZWQuJzsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHVzZXJJZChhZGRyZXNzIHVzZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgaWQsIHN0cmluZyBpbmZvKSB7CiAgICAgICAgaWQgPSB1c2Vyc1t1c2VyXS5pZDsKICAgICAgICBpbmZvID0gJ1RoZSBpZCBvZiB0aGUgdXNlciwgcmVwcmVzZW50cyB0aGUgb3JkZXIgaW4gd2hpY2ggaGUgZmlyc3Qgam9pbmVkIHRoZSBwaXQuJzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdXNlclRva2VucyhhZGRyZXNzIHVzZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdG9rZW5zLCBzdHJpbmcgaW5mbykgewogICAgICAgIHRva2VucyA9IHVzZXJzW3VzZXJdLmFkZHIgIT0gYWRkcmVzcygweDApID8gdXNlcnNbdXNlcl0ucmVzY3VlVG9rZW5zIDogMDsKICAgICAgICBpbmZvID0gJ1RoZSBudW1iZXIgb2YgUmVzY3VlIFRva2VucyB0aGUgdXNlciBoYXMuIFRva2VucyBhcmUgYXdhcmRlZCB3aGVuIHlvdXIgZGVwb3NpdHMgc2F2ZSBwZW9wbGUsIGFuZCB1c2VkIGF1dG9tYXRpY2FsbHkgb24geW91ciBuZXh0IGRlcG9zaXQuIFRoZXkgcHJvdmlkZSBhIDAuMSBtdWx0aXBsaWVyIGluY3JlYXNlIHBlciB0b2tlbi4gKCswLjUgbWF4KSc7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHVzZXJSZXNjdWVzKGFkZHJlc3MgdXNlcikgY29uc3RhbnQgcmV0dXJucyh1aW50IHJlc2N1ZUNvdW50LCBzdHJpbmcgaW5mbykgewogICAgICAgIHJlc2N1ZUNvdW50ID0gdXNlcnNbdXNlcl0uYWRkciAhPSBhZGRyZXNzKDB4MCkgPyB1c2Vyc1t1c2VyXS5yZXNjdWVDb3VudCA6IDA7CiAgICAgICAgaW5mbyA9ICdUaGUgbnVtYmVyIG9mIHRpbWVzIHRoZSB1c2VyIGhhcyByZXNjdWVkIHNvbWVvbmUgZnJvbSB0aGUgcGl0Lic7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHVzZXJQcm9maXRzKCkgY29uc3RhbnQgcmV0dXJucyh1aW50IHByb2ZpdHMsIHN0cmluZyBpbmZvKSB7CiAgICAgICAgcHJvZml0cyA9IHVzZXJzUHJvZml0cyAvIDEgZmlubmV5OwogICAgICAgIGluZm8gPSAnVGhlIGNvbWJpbmVkIGVhcm5pbmdzIG9mIGFsbCB1c2VycyBpbiBGaW5uZXkuJzsKICAgIH0KICAgIAogICAgLy9EZXN0cm95IHRoZSBjb250cmFjdCBhZnRlciB+MyBtb250aHMgb2YgaW5hY3Rpdml0eSBhdCB0aGUgb3duZXIncyBkaXNjcmV0aW9uCiAgICBmdW5jdGlvbiByZWN5Y2xlKCkgb25seW93bmVyCiAgICB7CiAgICAgICAgaWYgKG5vdyA+PSB0aW1lT2ZMYXN0RGVwb3NpdCArIDEwIHdlZWtzKSAKICAgICAgICB7IAogICAgICAgICAgICAvL1JlZnVuZCB0aGUgY3VycmVudCBiYWxhbmNlCiAgICAgICAgICAgIGlmIChiYWxhbmNlID4gMCkgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGVudHJpZXNbMF0uZW50cnlBZGRyZXNzLnNlbmQoYmFsYW5jZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vRGVzdHJveSB0aGUgY29udHJhY3QKICAgICAgICAgICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICAgICAgICB9CiAgICB9Cn0='.
	

]
