Class {
	#name : #SRTe9e9fe9b6a3f02c89960d0a256f2cda77d76f80d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe9e9fe9b6a3f02c89960d0a256f2cda77d76f80d >> base64 [
	^ 'Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBEZXZlbG9wZXIgTmVjaGVzb3YgQW5kcmV5ICYgT2JqZWN0TWljcm8sIEluYyAKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBFUkMgVG9rZW4gU3RhbmRhcmQgIzIwIEludGVyZmFjZQovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKCnByYWdtYSBzb2xpZGl0eSBeMC40LjE4OyAgICAKCiAgbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgIHJldHVybiBjOwogICAgfQogIH0KCiAgY29udHJhY3QgRVJDMjBJbnRlcmZhY2UgewogICAgICAvLyBHZXQgdGhlIHRvdGFsIHRva2VuIHN1cHBseQogICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpOwogICAKICAgICAgLy8gR2V0IHRoZSBhY2NvdW50IGJhbGFuY2Ugb2YgYW5vdGhlciBhY2NvdW50IHdpdGggYWRkcmVzcyBfb3duZXIKICAgICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAKICAgICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyB0byBhZGRyZXNzIF90bwogICAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgIAogICAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogICAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAKICAgICAgLy8gQWxsb3cgX3NwZW5kZXIgdG8gd2l0aGRyYXcgZnJvbSB5b3VyIGFjY291bnQsIG11bHRpcGxlIHRpbWVzLCB1cCB0byB0aGUgX3ZhbHVlIGFtb3VudC4KICAgICAgLy8gSWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYWdhaW4gaXQgb3ZlcndyaXRlcyB0aGUgY3VycmVudCBhbGxvd2FuY2Ugd2l0aCBfdmFsdWUuCiAgICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgcmVxdWlyZWQgZm9yIHNvbWUgREVYIGZ1bmN0aW9uYWxpdHkKICAgICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgCiAgICAgIC8vIFJldHVybnMgdGhlIGFtb3VudCB3aGljaCBfc3BlbmRlciBpcyBzdGlsbCBhbGxvd2VkIHRvIHdpdGhkcmF3IGZyb20gX293bmVyCiAgICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwogICAKICAgICAgLy8gVHJpZ2dlcmVkIHdoZW4gdG9rZW5zIGFyZSB0cmFuc2ZlcnJlZC4KICAgICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgIAogICAgICAvLyBUcmlnZ2VyZWQgd2hlbmV2ZXIgYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgaXMgY2FsbGVkLgogICAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKICB9ICAKICAgCiAgY29udHJhY3QgQnF0X1Rva2VuIGlzIEVSQzIwSW50ZXJmYWNlIHsKCiAgICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkJRVCI7CiAgICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJCUVQgdG9rZW4iOwogICAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsgCiAgICAgICAgICAgCiAgICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IG1heFRva2VucyA9IDIwMCoxMCoqNioxMCoqMTg7IAogICAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBvd25lclN1cHBseSA9IG1heFRva2Vucyo1MS8xMDA7CiAgICAgIHVpbnQyNTYgX3RvdGFsU3VwcGx5ID0gb3duZXJTdXBwbHk7ICAKCiAgICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuX3ByaWNlID0gMTAqKjE4KjEvMjUwOyAKICAgICAgdWludDI1NiBwdWJsaWMgcHJlX2ljb19zdGFydCA9IDE1MDY3Mjk2MDA7CiAgICAgIHVpbnQyNTYgcHVibGljIGljb19zdGFydCA9IDE1MTgwNDgwMDA7CiAgICAgIHVpbnQyNTYgcHVibGljIGljb19maW5pc2ggPSAxNTIxOTM2MDAwOyAKICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWluVmFsdWVQcmUgPSAxMCoqMTgqMS8xMDAwMDAwOyAKICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWluVmFsdWUgPSAxMCoqMTgqMS8xMDAwMDAwOyAKICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWF4VmFsdWUgPSAzMDAwKjEwKioxODsKCiAgICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBleGNoYW5nZV9jb2VmZmljaWVudCA9IDEwMjsKCiAgICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogICAgICAKICAgICAgLy8gT3duZXIgb2YgdGhpcyBjb250cmFjdAogICAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgCiAgICAgIC8vIEJhbGFuY2VzIGZvciBlYWNoIGFjY291bnQKICAgICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAKICAgICAgLy8gT3duZXIgb2YgYWNjb3VudCBhcHByb3ZlcyB0aGUgdHJhbnNmZXIgb2YgYW4gYW1vdW50IHRvIGFub3RoZXIgYWNjb3VudAogICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICAgIC8vIE9yZGVycyBob2xkZXJzIHdobyB3aXNoIHNlbGwgdG9rZW5zLCBzYXZlIGFtb3VudAogICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIG9yZGVyc19zZWxsX2Ftb3VudDsKCiAgICAgIC8vIE9yZGVycyBob2xkZXJzIHdobyB3aXNoIHNlbGwgdG9rZW5zLCBzYXZlIHByaWNlCiAgICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgb3JkZXJzX3NlbGxfcHJpY2U7CgogICAgICAvL29yZGVycyBsaXN0CiAgICAgIGFkZHJlc3NbXSBwdWJsaWMgb3JkZXJzX3NlbGxfbGlzdDsKCiAgICAgIC8vIFRyaWdnZXJlZCBvbiBzZXQgU0VMTCBvcmRlcgogICAgICBldmVudCBPcmRlcl9zZWxsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIHVpbnQyNTYgX21heF9hbW91bnQsIHVpbnQyNTYgX3ByaWNlKTsgICAgICAKCiAgICAgIC8vIFRyaWdnZXJlZCBvbiBleGVjdXRlIFNFTEwgb3JkZXIKICAgICAgZXZlbnQgT3JkZXJfZXhlY3V0ZShhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBfcHJpY2UpOyAgICAgIAogICAKICAgICAgLy8gRnVuY3Rpb25zIHdpdGggdGhpcyBtb2RpZmllciBjYW4gb25seSBiZSBleGVjdXRlZCBieSB0aGUgb3duZXIKICAgICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsKICAgICAgICAgICAgICB0aHJvdzsKICAgICAgICAgIH0KICAgICAgICAgIF87CiAgICAgIH0gICAgICAKICAgCiAgICAgIC8vIENvbnN0cnVjdG9yCiAgICAgIGZ1bmN0aW9uIEJxdF9Ub2tlbigpIHsKICAgICAgICAgIC8vb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgICAgb3duZXIgPSAweEM3M2UzN2NiZjUxMjBFNEZhMTEyZWM2NzUxQjcyZDRhQzAyQ0VBQ2E7CiAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBvd25lclN1cHBseTsKICAgICAgfQogICAgICAKICAgICAgLy9kZWZhdWx0IGZ1bmN0aW9uICAgICAgCiAgICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7ICAgICAgICAKICAgICAgICAgIHRva2Vuc19idXkoKTsgICAgICAgIAogICAgICB9CiAgICAgIAogICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpIHsKICAgICAgICAgIHRvdGFsU3VwcGx5ID0gX3RvdGFsU3VwcGx5OwogICAgICB9CgogICAgICAvL1dpdGhkcmF3IG1vbmV5IGZyb20gY29udHJhY3QgYmFsYW5jZSB0byBvd25lcgogICAgICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciByZXR1cm5zIChib29sIHJlc3VsdCkgewogICAgICAgICAgdWludDI1NiBiYWxhbmNlOwogICAgICAgICAgYmFsYW5jZSA9IHRoaXMuYmFsYW5jZTsKICAgICAgICAgIGlmKF9hbW91bnQgPiAwKSBiYWxhbmNlID0gX2Ftb3VudDsKICAgICAgICAgIG93bmVyLnNlbmQoYmFsYW5jZSk7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgLy9DaGFuZ2UgaWNvX3N0YXJ0IGRhdGUKICAgICAgZnVuY3Rpb24gY2hhbmdlX2ljb19zdGFydCh1aW50MjU2IF9pY29fc3RhcnQpIG9ubHlPd25lciByZXR1cm5zIChib29sIHJlc3VsdCkgewogICAgICAgICAgaWNvX3N0YXJ0ID0gX2ljb19zdGFydDsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICAvL0NoYW5nZSBpY29fZmluaXNoIGRhdGUKICAgICAgZnVuY3Rpb24gY2hhbmdlX2ljb19maW5pc2godWludDI1NiBfaWNvX2ZpbmlzaCkgb25seU93bmVyIHJldHVybnMgKGJvb2wgcmVzdWx0KSB7CiAgICAgICAgICBpY29fZmluaXNoID0gX2ljb19maW5pc2g7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAKICAgICAgLy8gVG90YWwgdG9rZW5zIG9uIHVzZXIgYWRkcmVzcwogICAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICAgIH0KICAgCiAgICAgIC8vIFRyYW5zZmVyIHRoZSBiYWxhbmNlIGZyb20gb3duZXIncyBhY2NvdW50IHRvIGFub3RoZXIgYWNjb3VudAogICAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsgICAgICAgICAgCgogICAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQgCiAgICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAKICAgICAgICAgICAgICAmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfYW1vdW50OwogICAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX2Ftb3VudDsKICAgICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOwogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgIH0KICAgCiAgICAgIC8vIFNlbmQgX3ZhbHVlIGFtb3VudCBvZiB0b2tlbnMgZnJvbSBhZGRyZXNzIF9mcm9tIHRvIGFkZHJlc3MgX3RvCiAgICAgIC8vIFRoZSB0cmFuc2ZlckZyb20gbWV0aG9kIGlzIHVzZWQgZm9yIGEgd2l0aGRyYXcgd29ya2Zsb3csIGFsbG93aW5nIGNvbnRyYWN0cyB0byBzZW5kCiAgICAgIC8vIHRva2VucyBvbiB5b3VyIGJlaGFsZiwgZm9yIGV4YW1wbGUgdG8gImRlcG9zaXQiIHRvIGEgY29udHJhY3QgYWRkcmVzcyBhbmQvb3IgdG8gY2hhcmdlCiAgICAgIC8vIGZlZXMgaW4gc3ViLWN1cnJlbmNpZXM7IHRoZSBjb21tYW5kIHNob3VsZCBmYWlsIHVubGVzcyB0aGUgX2Zyb20gYWNjb3VudCBoYXMKICAgICAgLy8gZGVsaWJlcmF0ZWx5IGF1dGhvcml6ZWQgdGhlIHNlbmRlciBvZiB0aGUgbWVzc2FnZSB2aWEgc29tZSBtZWNoYW5pc207IHdlIHByb3Bvc2UKICAgICAgLy8gdGhlc2Ugc3RhbmRhcmRpemVkIEFQSXMgZm9yIGFwcHJvdmFsOgogICAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oCiAgICAgICAgICBhZGRyZXNzIF9mcm9tLAogICAgICAgICAgYWRkcmVzcyBfdG8sCiAgICAgICAgICB1aW50MjU2IF9hbW91bnQKICAgICApIHJldHVybnMgKGJvb2wgc3VjY2VzcykgeyAgICAgICAgIAoKICAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50CiAgICAgICAgICAgICAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50CiAgICAgICAgICAgICAmJiBfYW1vdW50ID4gMAogICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX2Ftb3VudDsKICAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7CiAgICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF9hbW91bnQ7CiAgICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICB9CiAgICAgfQogIAogICAgIC8vIEFsbG93IF9zcGVuZGVyIHRvIHdpdGhkcmF3IGZyb20geW91ciBhY2NvdW50LCBtdWx0aXBsZSB0aW1lcywgdXAgdG8gdGhlIF92YWx1ZSBhbW91bnQuCiAgICAgLy8gSWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYWdhaW4gaXQgb3ZlcndyaXRlcyB0aGUgY3VycmVudCBhbGxvd2FuY2Ugd2l0aCBfdmFsdWUuCiAgICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYW1vdW50KTsKICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgfQogICAgCiAgICAgLy9SZXR1cm4gcGFyYW0sIGhvdyBtYW55IHRva2VucyBjYW4gc2VuZCBfc3BlbmRlciBmcm9tIF9vd25lciBhY2NvdW50ICAKICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgIH0gCgogICAgICAvKioKICAgICAgKiBCdXkgdG9rZW5zIG9uIHByZS1pY28gYW5kIGljbyB3aXRoIGJvbnVzZXMgb24gdGltZSBib3VuZGFyaWVzCiAgICAgICovCiAgICAgIGZ1bmN0aW9uIHRva2Vuc19idXkoKSBwYXlhYmxlIHJldHVybnMgKGJvb2wpIHsgCgogICAgICAgIHVpbnQyNTYgdG5vdyA9IG5vdzsKICAgICAgICAKICAgICAgICAvL2lmKHRub3cgPCBwcmVfaWNvX3N0YXJ0KSB0aHJvdzsKICAgICAgICBpZih0bm93ID4gaWNvX2ZpbmlzaCkgdGhyb3c7CiAgICAgICAgaWYoX3RvdGFsU3VwcGx5ID49IG1heFRva2VucykgdGhyb3c7CiAgICAgICAgaWYoIShtc2cudmFsdWUgPj0gdG9rZW5fcHJpY2UpKSB0aHJvdzsKICAgICAgICBpZighKG1zZy52YWx1ZSA+PSBtaW5WYWx1ZSkpIHRocm93OwogICAgICAgIGlmKG1zZy52YWx1ZSA+IG1heFZhbHVlKSB0aHJvdzsKCiAgICAgICAgdWludCB0b2tlbnNfYnV5ID0gKG1zZy52YWx1ZSoxMCoqMTgpLmRpdih0b2tlbl9wcmljZSk7CiAgICAgICAgdWludCB0b2tlbnNfYnV5X3RvdGFsOwoKICAgICAgICBpZighKHRva2Vuc19idXkgPiAwKSkgdGhyb3c7ICAgCiAgICAgICAgCiAgICAgICAgLy9Cb251cyBmb3IgdG90YWwgdG9rZW5zIGFtb3VudCBmb3IgYWxsIGNvbnRyYWN0CiAgICAgICAgdWludCBiMSA9IDA7CiAgICAgICAgLy9UaW1lIGJvbnVzIG9uIFByZS1JQ08gJiYgSUNPCiAgICAgICAgdWludCBiMiA9IDA7CiAgICAgICAgLy9JbmRpdmlkdWFsIGJvbnVzIGZvciB0b2tlbnMgYW1vdW50CiAgICAgICAgdWludCBiMyA9IDA7CgogICAgICAgIGlmKF90b3RhbFN1cHBseSA8PSA1KjEwKio2KjEwKioxOCkgewogICAgICAgICAgYjEgPSB0b2tlbnNfYnV5KjMwLzEwMDsKICAgICAgICB9CiAgICAgICAgaWYoKDUqMTAqKjYqMTAqKjE4IDwgX3RvdGFsU3VwcGx5KSYmKF90b3RhbFN1cHBseSA8PSAxMCoxMCoqNioxMCoqMTgpKSB7CiAgICAgICAgICBiMSA9IHRva2Vuc19idXkqMjUvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoMTAqMTAqKjYqMTAqKjE4IDwgX3RvdGFsU3VwcGx5KSYmKF90b3RhbFN1cHBseSA8PSAxNSoxMCoqNioxMCoqMTgpKSB7CiAgICAgICAgICBiMSA9IHRva2Vuc19idXkqMjAvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoMTUqMTAqKjYqMTAqKjE4IDwgX3RvdGFsU3VwcGx5KSYmKF90b3RhbFN1cHBseSA8PSAyMCoxMCoqNioxMCoqMTgpKSB7CiAgICAgICAgICBiMSA9IHRva2Vuc19idXkqMTUvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoMjAqMTAqKjYqMTAqKjE4IDwgX3RvdGFsU3VwcGx5KSYmKF90b3RhbFN1cHBseSA8PSAyNSoxMCoqNioxMCoqMTgpKSB7CiAgICAgICAgICBiMSA9IHRva2Vuc19idXkqMTAvMTAwOwogICAgICAgIH0KICAgICAgICBpZigyNSoxMCoqNioxMCoqMTggPD0gX3RvdGFsU3VwcGx5KSB7CiAgICAgICAgICBiMSA9IHRva2Vuc19idXkqNS8xMDA7CiAgICAgICAgfSAgICAgICAgCgogICAgICAgIGlmKHRub3cgPCBpY29fc3RhcnQpIHsKICAgICAgICAgIGIyID0gdG9rZW5zX2J1eSo1MC8xMDA7CiAgICAgICAgfQogICAgICAgIGlmKChpY29fc3RhcnQgKyA4NjQwMCowIDw9IHRub3cpJiYodG5vdyA8IGljb19zdGFydCArIDg2NDAwKjUpKXsKICAgICAgICAgIGIyID0gdG9rZW5zX2J1eSoxMC8xMDA7CiAgICAgICAgfSAKICAgICAgICBpZigoaWNvX3N0YXJ0ICsgODY0MDAqNSA8PSB0bm93KSYmKHRub3cgPCBpY29fc3RhcnQgKyA4NjQwMCoxMCkpewogICAgICAgICAgYjIgPSB0b2tlbnNfYnV5KjgvMTAwOyAgICAgICAgCiAgICAgICAgfSAKICAgICAgICBpZigoaWNvX3N0YXJ0ICsgODY0MDAqMTAgPD0gdG5vdykmJih0bm93IDwgaWNvX3N0YXJ0ICsgODY0MDAqMjApKXsKICAgICAgICAgIGIyID0gdG9rZW5zX2J1eSo2LzEwMDsgICAgICAgIAogICAgICAgIH0gCiAgICAgICAgaWYoKGljb19zdGFydCArIDg2NDAwKjIwIDw9IHRub3cpJiYodG5vdyA8IGljb19zdGFydCArIDg2NDAwKjMwKSl7CiAgICAgICAgICBiMiA9IHRva2Vuc19idXkqNC8xMDA7ICAgICAgICAKICAgICAgICB9IAogICAgICAgIGlmKGljb19zdGFydCArIDg2NDAwKjMwIDw9IHRub3cpewogICAgICAgICAgYjIgPSB0b2tlbnNfYnV5KjIvMTAwOyAgICAgICAgCiAgICAgICAgfQogICAgICAgIAoKICAgICAgICBpZigoMTAwMCoxMCoqMTggPD0gdG9rZW5zX2J1eSkmJig1MDAwKjEwKioxOCA8PSB0b2tlbnNfYnV5KSkgewogICAgICAgICAgYjMgPSB0b2tlbnNfYnV5KjUvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoNTAwMSoxMCoqMTggPD0gdG9rZW5zX2J1eSkmJigxMDAwMCoxMCoqMTggPCB0b2tlbnNfYnV5KSkgewogICAgICAgICAgYjMgPSB0b2tlbnNfYnV5KjEwLzEwMDsKICAgICAgICB9CiAgICAgICAgaWYoKDEwMDAxKjEwKioxOCA8PSB0b2tlbnNfYnV5KSYmKDE1MDAwKjEwKioxOCA8IHRva2Vuc19idXkpKSB7CiAgICAgICAgICBiMyA9IHRva2Vuc19idXkqMTUvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoMTUwMDEqMTAqKjE4IDw9IHRva2Vuc19idXkpJiYoMjAwMDAqMTAqKjE4IDwgdG9rZW5zX2J1eSkpIHsKICAgICAgICAgIGIzID0gdG9rZW5zX2J1eSoyMC8xMDA7CiAgICAgICAgfQogICAgICAgIGlmKDIwMDAxKjEwKioxOCA8PSB0b2tlbnNfYnV5KSB7CiAgICAgICAgICBiMyA9IHRva2Vuc19idXkqMjUvMTAwOwogICAgICAgIH0KCiAgICAgICAgdG9rZW5zX2J1eV90b3RhbCA9IHRva2Vuc19idXkuYWRkKGIxKTsKICAgICAgICB0b2tlbnNfYnV5X3RvdGFsID0gdG9rZW5zX2J1eV90b3RhbC5hZGQoYjIpOwogICAgICAgIHRva2Vuc19idXlfdG90YWwgPSB0b2tlbnNfYnV5X3RvdGFsLmFkZChiMyk7ICAgICAgICAKCiAgICAgICAgaWYoX3RvdGFsU3VwcGx5LmFkZCh0b2tlbnNfYnV5X3RvdGFsKSA+IG1heFRva2VucykgdGhyb3c7CiAgICAgICAgX3RvdGFsU3VwcGx5ID0gX3RvdGFsU3VwcGx5LmFkZCh0b2tlbnNfYnV5X3RvdGFsKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZCh0b2tlbnNfYnV5X3RvdGFsKTsgICAgICAgICAKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgCiAgICAgIC8qKgogICAgICAqIEdldCB0b3RhbCBTRUxMIG9yZGVycwogICAgICAqLyAgICAgIAogICAgICBmdW5jdGlvbiBvcmRlcnNfc2VsbF90b3RhbCAoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIG9yZGVyc19zZWxsX2xpc3QubGVuZ3RoOwogICAgICB9IAoKICAgICAgLyoqCiAgICAgICogR2V0IGhvdyBtYW55IHRva2VucyBjYW4gYnV5IGZyb20gdGhpcyBTRUxMIG9yZGVyCiAgICAgICovCiAgICAgIGZ1bmN0aW9uIGdldF9vcmRlcnNfc2VsbF9hbW91bnQoYWRkcmVzcyBfZnJvbSkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CgogICAgICAgIHVpbnQgX2Ftb3VudF9tYXggPSAwOwoKICAgICAgICBpZighKG9yZGVyc19zZWxsX2Ftb3VudFtfZnJvbV0gPiAwKSkgcmV0dXJuIF9hbW91bnRfbWF4OwoKICAgICAgICBpZihiYWxhbmNlT2YoX2Zyb20pID4gMCkgX2Ftb3VudF9tYXggPSBiYWxhbmNlT2YoX2Zyb20pOwogICAgICAgIGlmKG9yZGVyc19zZWxsX2Ftb3VudFtfZnJvbV0gPCBfYW1vdW50X21heCkgX2Ftb3VudF9tYXggPSBvcmRlcnNfc2VsbF9hbW91bnRbX2Zyb21dOwoKICAgICAgICByZXR1cm4gX2Ftb3VudF9tYXg7CiAgICAgIH0KCiAgICAgIC8qKgogICAgICAqIFVzZXIgY3JlYXRlIFNFTEwgb3JkZXIuICAKICAgICAgKi8KICAgICAgZnVuY3Rpb24gb3JkZXJfc2VsbCh1aW50MjU2IF9tYXhfYW1vdW50LCB1aW50MjU2IF9wcmljZSkgcmV0dXJucyAoYm9vbCkgewoKICAgICAgICBpZighKF9tYXhfYW1vdW50ID4gMCkpIHRocm93OwogICAgICAgIGlmKCEoX3ByaWNlID4gMCkpIHRocm93OyAgICAgICAgCgogICAgICAgIG9yZGVyc19zZWxsX2Ftb3VudFttc2cuc2VuZGVyXSA9IF9tYXhfYW1vdW50OwogICAgICAgIG9yZGVyc19zZWxsX3ByaWNlW21zZy5zZW5kZXJdID0gKF9wcmljZSpleGNoYW5nZV9jb2VmZmljaWVudCkuZGl2KDEwMCk7CiAgICAgICAgb3JkZXJzX3NlbGxfbGlzdC5wdXNoKG1zZy5zZW5kZXIpOyAgICAgICAgCgogICAgICAgIE9yZGVyX3NlbGwobXNnLnNlbmRlciwgX21heF9hbW91bnQsIG9yZGVyc19zZWxsX3ByaWNlW21zZy5zZW5kZXJdKTsgICAgICAKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIC8qKgogICAgICAqIE9yZGVyIEJ1eSB0b2tlbnMgLSBpdCdzIG9yZGVyIHNlYXJjaCBzZWxsIG9yZGVyIGZyb20gdXNlciBfZnJvbSBhbmQgaWYgYWxsIG9rLCBzZW5kIHRva2VuIGFuZCBtb25leSAKICAgICAgKi8KICAgICAgZnVuY3Rpb24gb3JkZXJfYnV5KGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX21heF9wcmljZSkgcGF5YWJsZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgCiAgICAgICAgaWYoIShtc2cudmFsdWUgPiAwKSkgdGhyb3c7CiAgICAgICAgaWYoIShfbWF4X3ByaWNlID4gMCkpIHRocm93OyAgICAgICAgCiAgICAgICAgaWYoIShvcmRlcnNfc2VsbF9hbW91bnRbX2Zyb21dID4gMCkpIHRocm93OwogICAgICAgIGlmKCEob3JkZXJzX3NlbGxfcHJpY2VbX2Zyb21dID4gMCkpIHRocm93OyAKICAgICAgICBpZihvcmRlcnNfc2VsbF9wcmljZVtfZnJvbV0gPiBfbWF4X3ByaWNlKSB0aHJvdzsKCiAgICAgICAgdWludCBfYW1vdW50ID0gKG1zZy52YWx1ZSoxMCoqMTgpLmRpdihvcmRlcnNfc2VsbF9wcmljZVtfZnJvbV0pOwogICAgICAgIHVpbnQgX2Ftb3VudF9mcm9tID0gZ2V0X29yZGVyc19zZWxsX2Ftb3VudChfZnJvbSk7CgogICAgICAgIGlmKF9hbW91bnQgPiBfYW1vdW50X2Zyb20pIF9hbW91bnQgPSBfYW1vdW50X2Zyb207ICAgICAgICAKICAgICAgICBpZighKF9hbW91bnQgPiAwKSkgdGhyb3c7ICAgICAgICAKCiAgICAgICAgdWludCBfdG90YWxfbW9uZXkgPSAob3JkZXJzX3NlbGxfcHJpY2VbX2Zyb21dKl9hbW91bnQpLmRpdigxMCoqMTgpOwogICAgICAgIGlmKF90b3RhbF9tb25leSA+IG1zZy52YWx1ZSkgdGhyb3c7CgogICAgICAgIHVpbnQgX3NlbGxlcl9tb25leSA9IChfdG90YWxfbW9uZXkqMTAwKS5kaXYoZXhjaGFuZ2VfY29lZmZpY2llbnQpOwogICAgICAgIHVpbnQgX2J1eWVyX21vbmV5ID0gbXNnLnZhbHVlIC0gX3RvdGFsX21vbmV5OwoKICAgICAgICBpZihfc2VsbGVyX21vbmV5ID4gbXNnLnZhbHVlKSB0aHJvdzsKICAgICAgICBpZihfc2VsbGVyX21vbmV5ICsgX2J1eWVyX21vbmV5ID4gbXNnLnZhbHVlKSB0aHJvdzsKCiAgICAgICAgaWYoX3NlbGxlcl9tb25leSA+IDApIF9mcm9tLnNlbmQoX3NlbGxlcl9tb25leSk7CiAgICAgICAgaWYoX2J1eWVyX21vbmV5ID4gMCkgbXNnLnNlbmRlci5zZW5kKF9idXllcl9tb25leSk7CgogICAgICAgIG9yZGVyc19zZWxsX2Ftb3VudFtfZnJvbV0gLT0gX2Ftb3VudDsgICAgICAgIAogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfYW1vdW50OwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IF9hbW91bnQ7IAoKICAgICAgICBPcmRlcl9leGVjdXRlKF9mcm9tLCBtc2cuc2VuZGVyLCBfYW1vdW50LCBvcmRlcnNfc2VsbF9wcmljZVtfZnJvbV0pOwoKICAgICAgfQogICAgICAKIH0='.
	

]
