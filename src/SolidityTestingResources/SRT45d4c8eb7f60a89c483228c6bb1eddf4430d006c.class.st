Class {
	#name : #SRT45d4c8eb7f60a89c483228c6bb1eddf4430d006c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT45d4c8eb7f60a89c483228c6bb1eddf4430d006c >> base64 [
	^ 'Ly8gQXV0aG9yIDogc2hpZnQKCnByYWdtYSBzb2xpZGl0eSBeMC40LjE4OwoKLy8tLS0tLS0tLS0gT3BlblplcHBlbGluJ3MgU2FmZSBNYXRoCi8vU291cmNlIDogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBFUkMyMCBJbnRlcmZhY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMApjb250cmFjdCBFUkMyMCB7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwp9CgovKgogIFRoaXMgY29udHJhY3Qgc3RvcmVzIHR3aWNlIGV2ZXJ5IGtleSB2YWx1ZSBpbiBvcmRlciB0byBiZSBhYmxlIHRvIHJlZGlzdHJpYnV0ZSBmdW5kcwogIHdoZW4gdGhlIGJvbnVzIHRva2VucyBhcmUgcmVjZWl2ZWQgKHdoaWNoIGlzIHR5cGljYWxseSBYIG1vbnRocyBhZnRlciB0aGUgaW5pdGlhbCBidXkpLgoqLwoKY29udHJhY3QgTW9vbmdhbmcgewoKICBtb2RpZmllciBvbmx5T3duZXIgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBtaW5BbW91bnRSZWFjaGVkIHsKICAgIC8vSW4gcmVhbGl0eSwgdGhlIGNvcnJlY3QgYW1vdW50IGlzIHRoZSBhbW91bnQgKyAxJQogICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgPj0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChtaW5fYW1vdW50LCAxMDApLCA5OSkpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIHVuZGVyTWF4QW1vdW50IHsKICAgIHJlcXVpcmUobWF4X2Ftb3VudCA9PSAwIHx8IHRoaXMuYmFsYW5jZSA8PSBtYXhfYW1vdW50KTsKICAgIF87CiAgfQoKICAvL0NvbnN0YW50cyBvZiB0aGUgY29udHJhY3QKICB1aW50MjU2IGNvbnN0YW50IEZFRSA9IDEwMDsgICAgLy8xJSBmZWUKICAvL1NhZmVNYXRoLmRpdigyMCwgMykgPSA2CiAgdWludDI1NiBjb25zdGFudCBGRUVfREVWID0gNjsgLy8xNSUgb24gdGhlIDElIGZlZQogIHVpbnQyNTYgY29uc3RhbnQgRkVFX0FVRElUID0gMTI7IC8vNy41JSBvbiB0aGUgMSUgZmVlCiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgYWRkcmVzcyBjb25zdGFudCBwdWJsaWMgZGV2ZWxvcGVyID0gMHhFRTA2QmREYWZGQTU2YTMwMzcxOERFNTNBNWJjMzQ3RWZiRTRDNjhmOwogIGFkZHJlc3MgY29uc3RhbnQgcHVibGljIGF1ZGl0b3IgPSAweDYzRjc1NDdBYzI3N2VhMEI1MkEwQjA2MEJlNmFmOEM1OTA0OTUzYWE7CiAgdWludDI1NiBwdWJsaWMgaW5kaXZpZHVhbF9jYXA7CgogIC8vVmFyaWFibGVzIHN1YmplY3QgdG8gY2hhbmdlcwogIHVpbnQyNTYgcHVibGljIG1heF9hbW91bnQgPSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwOyAgLy8wIG1lYW5zIHRoZXJlIGlzIG5vIGxpbWl0CiAgdWludDI1NiBwdWJsaWMgbWluX2Ftb3VudDsKCiAgLy9TdG9yZSB0aGUgYW1vdW50IG9mIEVUSCBkZXBvc2l0ZWQgYnkgZWFjaCBhY2NvdW50LgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VzX2JvbnVzOwogIC8vd2hpdGVsaXN0CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgd2hpdGVsaXN0OwogIC8vIFRyYWNrIHdoZXRoZXIgdGhlIGNvbnRyYWN0IGhhcyBib3VnaHQgdGhlIHRva2VucyB5ZXQuCiAgYm9vbCBwdWJsaWMgYm91Z2h0X3Rva2VuczsKICAvLyBSZWNvcmQgRVRIIHZhbHVlIG9mIHRva2VucyBjdXJyZW50bHkgaGVsZCBieSBjb250cmFjdC4KICB1aW50MjU2IHB1YmxpYyBjb250cmFjdF9ldGhfdmFsdWU7CiAgdWludDI1NiBwdWJsaWMgY29udHJhY3RfZXRoX3ZhbHVlX2JvbnVzOwogIC8vU2V0IGJ5IHRoZSBvd25lciBpbiBvcmRlciB0byBhbGxvdyB0aGUgd2l0aGRyYXdhbCBvZiBib251cyB0b2tlbnMuCiAgYm9vbCBwdWJsaWMgYm9udXNfcmVjZWl2ZWQ7CiAgLy9UaGUgYWRkcmVzcyBvZiB0aGUgY29udGFjdC4KICBhZGRyZXNzIHB1YmxpYyBzYWxlOwogIC8vVG9rZW4gYWRkcmVzcwogIEVSQzIwIHB1YmxpYyB0b2tlbjsKICAvL1JlY29yZHMgdGhlIGZlZXMgdGhhdCBoYXZlIHRvIGJlIHNlbnQKICB1aW50MjU2IGZlZXM7CiAgLy9TZXQgYnkgdGhlIG93bmVyLiBBbGxvd3MgcGVvcGxlIHRvIHJlZnVuZCB0b3RhbGx5IG9yIHBhcnRpYWxseS4KICBib29sIHB1YmxpYyBhbGxvd19yZWZ1bmRzOwogIC8vVGhlIHJlZHVjdGlvbiBvZiB0aGUgYWxsb2NhdGlvbiBpbiAlIHwgZXhhbXBsZSA6IDQwIC0+IDQwJSByZWR1Y3Rpb24KICB1aW50MjU2IHB1YmxpYyBwZXJjZW50X3JlZHVjdGlvbjsKICAvL2ZsYWcgY29udHJvbGxlZCBieSBvd25lciB0byBlbmFibGUvZGlzYWJsZSB3aGl0ZWxpc3RzCiAgYm9vbCBwdWJsaWMgd2hpdGVsaXN0X2VuYWJsZWQ7CgogIC8vSW50ZXJuYWwgZnVuY3Rpb25zCiAgZnVuY3Rpb24gTW9vbmdhbmcoKSB7CiAgICAvKgogICAgQ29uc3RydWN0b3IKICAgICovCiAgICBvd25lciA9IDB4NzJiNDg1NjM0REY2ZjkwQTc2ODNCZWVkNGVlODkyMjk5Q2Y2RDFhOTsKICAgIC8vZW5hYmxlIHdoaXRlbGlzdCBieSBkZWZhdWx0CiAgICB3aGl0ZWxpc3RfZW5hYmxlZCA9IGZhbHNlOwogIH0KCiAgLy9GdW5jdGlvbnMgZm9yIHRoZSBvd25lcgoKICAvLyBCdXkgdGhlIHRva2Vucy4gU2VuZHMgRVRIIHRvIHRoZSBwcmVzYWxlIHdhbGxldCBhbmQgcmVjb3JkcyB0aGUgRVRIIGFtb3VudCBoZWxkIGluIHRoZSBjb250cmFjdC4KICBmdW5jdGlvbiBidXlfdGhlX3Rva2VucygpIG9ubHlPd25lciBtaW5BbW91bnRSZWFjaGVkIHsKICAgIC8vQXZvaWRzIGJ1cm5pbmcgdGhlIGZ1bmRzCiAgICByZXF1aXJlKCFib3VnaHRfdG9rZW5zICYmIHNhbGUgIT0gMHgwKTsKICAgIC8vUmVjb3JkIHRoYXQgdGhlIGNvbnRyYWN0IGhhcyBib3VnaHQgdGhlIHRva2Vucy4KICAgIGJvdWdodF90b2tlbnMgPSB0cnVlOwogICAgLy9TZW5kcyB0aGUgZmVlIGJlZm9yZSBzbyB0aGUgY29udHJhY3RfZXRoX3ZhbHVlIGNvbnRhaW5zIHRoZSBjb3JyZWN0IGJhbGFuY2UKICAgIHVpbnQyNTYgZGV2X2ZlZSA9IFNhZmVNYXRoLmRpdihmZWVzLCBGRUVfREVWKTsKICAgIHVpbnQyNTYgYXVkaXRfZmVlID0gU2FmZU1hdGguZGl2KGZlZXMsIEZFRV9BVURJVCk7CiAgICBvd25lci50cmFuc2ZlcihTYWZlTWF0aC5zdWIoU2FmZU1hdGguc3ViKGZlZXMsIGRldl9mZWUpLCBhdWRpdF9mZWUpKTsKICAgIGRldmVsb3Blci50cmFuc2ZlcihkZXZfZmVlKTsKICAgIGF1ZGl0b3IudHJhbnNmZXIoYXVkaXRfZmVlKTsKICAgIC8vUmVjb3JkIHRoZSBhbW91bnQgb2YgRVRIIHNlbnQgYXMgdGhlIGNvbnRyYWN0J3MgY3VycmVudCB2YWx1ZS4KICAgIGNvbnRyYWN0X2V0aF92YWx1ZSA9IHRoaXMuYmFsYW5jZTsKICAgIGNvbnRyYWN0X2V0aF92YWx1ZV9ib251cyA9IHRoaXMuYmFsYW5jZTsKICAgIC8vIFRyYW5zZmVyIGFsbCB0aGUgZnVuZHMgdG8gdGhlIGNyb3dkc2FsZSBhZGRyZXNzLgogICAgc2FsZS50cmFuc2Zlcihjb250cmFjdF9ldGhfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gZm9yY2VfcmVmdW5kKGFkZHJlc3MgX3RvX3JlZnVuZCkgb25seU93bmVyIHsKICAgIHJlcXVpcmUoIWJvdWdodF90b2tlbnMpOwogICAgdWludDI1NiBldGhfdG9fd2l0aGRyYXcgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGJhbGFuY2VzW190b19yZWZ1bmRdLCAxMDApLCA5OSk7CiAgICBiYWxhbmNlc1tfdG9fcmVmdW5kXSA9IDA7CiAgICBiYWxhbmNlc19ib251c1tfdG9fcmVmdW5kXSA9IDA7CiAgICBmZWVzID0gU2FmZU1hdGguc3ViKGZlZXMsIFNhZmVNYXRoLmRpdihldGhfdG9fd2l0aGRyYXcsIEZFRSkpOwogICAgX3RvX3JlZnVuZC50cmFuc2ZlcihldGhfdG9fd2l0aGRyYXcpOwogIH0KCiAgZnVuY3Rpb24gZm9yY2VfcGFydGlhbF9yZWZ1bmQoYWRkcmVzcyBfdG9fcmVmdW5kKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShwZXJjZW50X3JlZHVjdGlvbiA+IDApOwogICAgLy9BbW91bnQgdG8gcmVmdW5kIGlzIHRoZSBhbW91bnQgbWludXMgdGhlIFglIG9mIHRoZSByZWR1Y3Rpb24KICAgIC8vYW1vdW50X3RvX3JlZnVuZCA9IGJhbGFuY2UqWAogICAgdWludDI1NiBiYXNpY19hbW91bnQgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGJhbGFuY2VzW190b19yZWZ1bmRdLCBwZXJjZW50X3JlZHVjdGlvbiksIDEwMCk7CiAgICB1aW50MjU2IGV0aF90b193aXRoZHJhdyA9IGJhc2ljX2Ftb3VudDsKICAgIGlmICghYm91Z2h0X3Rva2VucykgewogICAgICAvL1dlIGhhdmUgdG8gdGFrZSBpbiBhY2NvdW50IHRoZSBwYXJ0aWFsIHJlZnVuZCBvZiB0aGUgZmVlIHRvbyBpZiB0aGUgdG9rZW5zIHdlcmVuJ3QgYm91Z2h0IHlldAogICAgICBldGhfdG9fd2l0aGRyYXcgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGJhc2ljX2Ftb3VudCwgMTAwKSwgOTkpOwogICAgICBmZWVzID0gU2FmZU1hdGguc3ViKGZlZXMsIFNhZmVNYXRoLmRpdihldGhfdG9fd2l0aGRyYXcsIEZFRSkpOwogICAgfQogICAgYmFsYW5jZXNbX3RvX3JlZnVuZF0gPSBTYWZlTWF0aC5zdWIoYmFsYW5jZXNbX3RvX3JlZnVuZF0sIGV0aF90b193aXRoZHJhdyk7CiAgICBiYWxhbmNlc19ib251c1tfdG9fcmVmdW5kXSA9IGJhbGFuY2VzW190b19yZWZ1bmRdOwogICAgX3RvX3JlZnVuZC50cmFuc2ZlcihldGhfdG9fd2l0aGRyYXcpOwogIH0KCiAgZnVuY3Rpb24gd2hpdGVsaXN0X2FkZHlzKGFkZHJlc3NbXSBfYWRkeXMpIG9ubHlPd25lciB7CiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfYWRkeXMubGVuZ3RoOyBpKyspIHsKICAgICAgd2hpdGVsaXN0W19hZGR5c1tpXV0gPSB0cnVlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gYmxhY2tsaXN0X2FkZHlzKGFkZHJlc3NbXSBfYWRkeXMpIG9ubHlPd25lciB7CiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfYWRkeXMubGVuZ3RoOyBpKyspIHsKICAgICAgd2hpdGVsaXN0W19hZGR5c1tpXV0gPSBmYWxzZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHNldF9zYWxlX2FkZHJlc3MoYWRkcmVzcyBfc2FsZSkgb25seU93bmVyIHsKICAgIC8vQXZvaWQgbWlzdGFrZSBvZiBwdXR0aW5nIDB4MCBhbmQgY2FuJ3QgY2hhbmdlIHR3aWNlIHRoZSBzYWxlIGFkZHJlc3MKICAgIHJlcXVpcmUoX3NhbGUgIT0gMHgwKTsKICAgIHNhbGUgPSBfc2FsZTsKICB9CgogIGZ1bmN0aW9uIHNldF90b2tlbl9hZGRyZXNzKGFkZHJlc3MgX3Rva2VuKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShfdG9rZW4gIT0gMHgwKTsKICAgIHRva2VuID0gRVJDMjAoX3Rva2VuKTsKICB9CgogIGZ1bmN0aW9uIHNldF9ib251c19yZWNlaXZlZChib29sIF9ib29sZWFuKSBvbmx5T3duZXIgewogICAgYm9udXNfcmVjZWl2ZWQgPSBfYm9vbGVhbjsKICB9CgogIGZ1bmN0aW9uIHNldF9hbGxvd19yZWZ1bmRzKGJvb2wgX2Jvb2xlYW4pIG9ubHlPd25lciB7CiAgICAvKgogICAgSW4gY2FzZSwgZm9yIHNvbWUgcmVhc29ucywgdGhlIHByb2plY3QgcmVmdW5kcyB0aGUgbW9uZXkKICAgICovCiAgICBhbGxvd19yZWZ1bmRzID0gX2Jvb2xlYW47CiAgfQoKICBmdW5jdGlvbiBzZXRfcGVyY2VudF9yZWR1Y3Rpb24odWludDI1NiBfcmVkdWN0aW9uKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShfcmVkdWN0aW9uIDw9IDEwMCk7CiAgICBwZXJjZW50X3JlZHVjdGlvbiA9IF9yZWR1Y3Rpb247CiAgfQoKICBmdW5jdGlvbiBzZXRfd2hpdGVsaXN0X2VuYWJsZWQoYm9vbCBfYm9vbGVhbikgb25seU93bmVyIHsKICAgIHdoaXRlbGlzdF9lbmFibGVkID0gX2Jvb2xlYW47CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VfaW5kaXZpZHVhbF9jYXAodWludDI1NiBfY2FwKSBvbmx5T3duZXIgewogICAgaW5kaXZpZHVhbF9jYXAgPSBfY2FwOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlX293bmVyKGFkZHJlc3MgbmV3X293bmVyKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdfb3duZXIgIT0gMHgwKTsKICAgIG93bmVyID0gbmV3X293bmVyOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlX21heF9hbW91bnQodWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgewogICAgICAvL0FUVEVOVElPTiEgVGhlIG5ldyBhbW91bnQgc2hvdWxkIGJlIGluIHdlaQogICAgICAvL1VzZSBodHRwczovL2V0aGVyY29udmVydGVyLm9ubGluZS8KICAgICAgbWF4X2Ftb3VudCA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoX2Ftb3VudCwgMTAwKSwgOTkpOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlX21pbl9hbW91bnQodWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgewogICAgICAvL0FUVEVOVElPTiEgVGhlIG5ldyBhbW91bnQgc2hvdWxkIGJlIGluIHdlaQogICAgICAvL1VzZSBodHRwczovL2V0aGVyY29udmVydGVyLm9ubGluZS8KICAgICAgbWluX2Ftb3VudCA9IF9hbW91bnQ7CiAgfQoKICAvL1B1YmxpYyBmdW5jdGlvbnMKCiAgLy8gQWxsb3dzIGFueSB1c2VyIHRvIHdpdGhkcmF3IGhpcyB0b2tlbnMuCiAgZnVuY3Rpb24gd2l0aGRyYXcoKSB7CiAgICAvLyBEaXNhbGxvdyB3aXRoZHJhdyBpZiB0b2tlbnMgaGF2ZW4ndCBiZWVuIGJvdWdodCB5ZXQuCiAgICByZXF1aXJlKGJvdWdodF90b2tlbnMpOwogICAgdWludDI1NiBjb250cmFjdF90b2tlbl9iYWxhbmNlID0gdG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOwogICAgLy8gRGlzYWxsb3cgdG9rZW4gd2l0aGRyYXdhbHMgaWYgdGhlcmUgYXJlIG5vIHRva2VucyB0byB3aXRoZHJhdy4KICAgIHJlcXVpcmUoY29udHJhY3RfdG9rZW5fYmFsYW5jZSAhPSAwKTsKICAgIHVpbnQyNTYgdG9rZW5zX3RvX3dpdGhkcmF3ID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChiYWxhbmNlc1ttc2cuc2VuZGVyXSwgY29udHJhY3RfdG9rZW5fYmFsYW5jZSksIGNvbnRyYWN0X2V0aF92YWx1ZSk7CiAgICAvLyBVcGRhdGUgdGhlIHZhbHVlIG9mIHRva2VucyBjdXJyZW50bHkgaGVsZCBieSB0aGUgY29udHJhY3QuCiAgICBjb250cmFjdF9ldGhfdmFsdWUgPSBTYWZlTWF0aC5zdWIoY29udHJhY3RfZXRoX3ZhbHVlLCBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CiAgICAvLyBVcGRhdGUgdGhlIHVzZXIncyBiYWxhbmNlIHByaW9yIHRvIHNlbmRpbmcgdG8gcHJldmVudCByZWN1cnNpdmUgY2FsbC4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgIC8vIFNlbmQgdGhlIGZ1bmRzLiAgVGhyb3dzIG9uIGZhaWx1cmUgdG8gcHJldmVudCBsb3NzIG9mIGZ1bmRzLgogICAgcmVxdWlyZSh0b2tlbi50cmFuc2Zlcihtc2cuc2VuZGVyLCB0b2tlbnNfdG9fd2l0aGRyYXcpKTsKICB9CgogIGZ1bmN0aW9uIHdpdGhkcmF3X2JvbnVzKCkgewogIC8qCiAgICBTcGVjaWFsIGZ1bmN0aW9uIHRvIHdpdGhkcmF3IHRoZSBib251cyB0b2tlbnMgYWZ0ZXIgdGhlIDYgbW9udGhzIGxvY2t1cC4KICAgIGJvbnVzX3JlY2VpdmVkIGhhcyB0byBiZSBzZXQgdG8gdHJ1ZS4KICAqLwogICAgcmVxdWlyZShib3VnaHRfdG9rZW5zICYmIGJvbnVzX3JlY2VpdmVkKTsKICAgIHVpbnQyNTYgY29udHJhY3RfdG9rZW5fYmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKICAgIHJlcXVpcmUoY29udHJhY3RfdG9rZW5fYmFsYW5jZSAhPSAwKTsKICAgIHVpbnQyNTYgdG9rZW5zX3RvX3dpdGhkcmF3ID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChiYWxhbmNlc19ib251c1ttc2cuc2VuZGVyXSwgY29udHJhY3RfdG9rZW5fYmFsYW5jZSksIGNvbnRyYWN0X2V0aF92YWx1ZV9ib251cyk7CiAgICBjb250cmFjdF9ldGhfdmFsdWVfYm9udXMgPSBTYWZlTWF0aC5zdWIoY29udHJhY3RfZXRoX3ZhbHVlX2JvbnVzLCBiYWxhbmNlc19ib251c1ttc2cuc2VuZGVyXSk7CiAgICBiYWxhbmNlc19ib251c1ttc2cuc2VuZGVyXSA9IDA7CiAgICByZXF1aXJlKHRva2VuLnRyYW5zZmVyKG1zZy5zZW5kZXIsIHRva2Vuc190b193aXRoZHJhdykpOwogIH0KCiAgLy8gQWxsb3dzIGFueSB1c2VyIHRvIGdldCBoaXMgZXRoIHJlZnVuZGVkIGJlZm9yZSB0aGUgcHVyY2hhc2UgaXMgbWFkZS4KICBmdW5jdGlvbiByZWZ1bmQoKSB7CiAgICByZXF1aXJlKCFib3VnaHRfdG9rZW5zICYmIGFsbG93X3JlZnVuZHMgJiYgcGVyY2VudF9yZWR1Y3Rpb24gPT0gMCk7CiAgICAvL2JhbGFuY2Ugb2YgY29udHJpYnV0b3IgPSBjb250cmlidXRpb24gKiAwLjk5CiAgICAvL3NvIGNvbnRyaWJ1dGlvbiA9IGJhbGFuY2UvMC45OQogICAgdWludDI1NiBldGhfdG9fd2l0aGRyYXcgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGJhbGFuY2VzW21zZy5zZW5kZXJdLCAxMDApLCA5OSk7CiAgICAvLyBVcGRhdGUgdGhlIHVzZXIncyBiYWxhbmNlIHByaW9yIHRvIHNlbmRpbmcgRVRIIHRvIHByZXZlbnQgcmVjdXJzaXZlIGNhbGwuCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAvL1VwZGF0ZXMgdGhlIGJhbGFuY2VzX2JvbnVzIHRvbwogICAgYmFsYW5jZXNfYm9udXNbbXNnLnNlbmRlcl0gPSAwOwogICAgLy9VcGRhdGVzIHRoZSBmZWVzIHZhcmlhYmxlIGJ5IHN1YnN0cmFjdGluZyB0aGUgcmVmdW5kZWQgZmVlCiAgICBmZWVzID0gU2FmZU1hdGguc3ViKGZlZXMsIFNhZmVNYXRoLmRpdihldGhfdG9fd2l0aGRyYXcsIEZFRSkpOwogICAgLy8gUmV0dXJuIHRoZSB1c2VyJ3MgZnVuZHMuICBUaHJvd3Mgb24gZmFpbHVyZSB0byBwcmV2ZW50IGxvc3Mgb2YgZnVuZHMuCiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV0aF90b193aXRoZHJhdyk7CiAgfQoKICAvL0FsbG93cyBhbnkgdXNlciB0byBnZXQgYSBwYXJ0IG9mIGhpcyBFVEggcmVmdW5kZWQsIGluIHByb3BvcnRpb24KICAvL3RvIHRoZSAlIHJlZHVjZWQgb2YgdGhlIGFsbG9jYXRpb24KICBmdW5jdGlvbiBwYXJ0aWFsX3JlZnVuZCgpIHsKICAgIHJlcXVpcmUoYWxsb3dfcmVmdW5kcyAmJiBwZXJjZW50X3JlZHVjdGlvbiA+IDApOwogICAgLy9BbW91bnQgdG8gcmVmdW5kIGlzIHRoZSBhbW91bnQgbWludXMgdGhlIFglIG9mIHRoZSByZWR1Y3Rpb24KICAgIC8vYW1vdW50X3RvX3JlZnVuZCA9IGJhbGFuY2UqWAogICAgdWludDI1NiBiYXNpY19hbW91bnQgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBwZXJjZW50X3JlZHVjdGlvbiksIDEwMCk7CiAgICB1aW50MjU2IGV0aF90b193aXRoZHJhdyA9IGJhc2ljX2Ftb3VudDsKICAgIGlmICghYm91Z2h0X3Rva2VucykgewogICAgICAvL1dlIGhhdmUgdG8gdGFrZSBpbiBhY2NvdW50IHRoZSBwYXJ0aWFsIHJlZnVuZCBvZiB0aGUgZmVlIHRvbyBpZiB0aGUgdG9rZW5zIHdlcmVuJ3QgYm91Z2h0IHlldAogICAgICBldGhfdG9fd2l0aGRyYXcgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGJhc2ljX2Ftb3VudCwgMTAwKSwgOTkpOwogICAgICBmZWVzID0gU2FmZU1hdGguc3ViKGZlZXMsIFNhZmVNYXRoLmRpdihldGhfdG9fd2l0aGRyYXcsIEZFRSkpOwogICAgfQogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBTYWZlTWF0aC5zdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIGV0aF90b193aXRoZHJhdyk7CiAgICBiYWxhbmNlc19ib251c1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwogICAgbXNnLnNlbmRlci50cmFuc2ZlcihldGhfdG9fd2l0aGRyYXcpOwogIH0KCiAgLy8gRGVmYXVsdCBmdW5jdGlvbi4gIENhbGxlZCB3aGVuIGEgdXNlciBzZW5kcyBFVEggdG8gdGhlIGNvbnRyYWN0LgogIGZ1bmN0aW9uICgpIHBheWFibGUgdW5kZXJNYXhBbW91bnQgewogICAgcmVxdWlyZSghYm91Z2h0X3Rva2Vucyk7CiAgICBpZiAod2hpdGVsaXN0X2VuYWJsZWQpIHsKICAgICAgcmVxdWlyZSh3aGl0ZWxpc3RbbXNnLnNlbmRlcl0pOwogICAgfQogICAgLy8xJSBmZWUgaXMgdGFrZW4gb24gdGhlIEVUSAogICAgdWludDI1NiBmZWUgPSBTYWZlTWF0aC5kaXYobXNnLnZhbHVlLCBGRUUpOwogICAgZmVlcyA9IFNhZmVNYXRoLmFkZChmZWVzLCBmZWUpOwogICAgLy9VcGRhdGVzIGJvdGggb2YgdGhlIGJhbGFuY2VzCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IFNhZmVNYXRoLmFkZChiYWxhbmNlc1ttc2cuc2VuZGVyXSwgU2FmZU1hdGguc3ViKG1zZy52YWx1ZSwgZmVlKSk7CiAgICAvL0NoZWNrcyBpZiB0aGUgaW5kaXZpZHVhbCBjYXAgaXMgcmVzcGVjdGVkCiAgICAvL0lmIGl0J3Mgbm90LCBjaGFuZ2VzIGFyZSByZXZlcnRlZAogICAgcmVxdWlyZShpbmRpdmlkdWFsX2NhcCA9PSAwIHx8IGJhbGFuY2VzW21zZy5zZW5kZXJdIDw9IGluZGl2aWR1YWxfY2FwKTsKICAgIGJhbGFuY2VzX2JvbnVzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgfQp9'.
	

]
