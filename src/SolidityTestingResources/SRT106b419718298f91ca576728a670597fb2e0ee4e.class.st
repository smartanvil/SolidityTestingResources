Class {
	#name : #SRT106b419718298f91ca576728a670597fb2e0ee4e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT106b419718298f91ca576728a670597fb2e0ee4e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICoKICogTmFtZSBvZiB0aGUgcHJvamVjdDogR2VuZXZpZXZlIEdYIFRva2VuCiAqIENvbnRyYWN0IG5hbWU6IEdYRVRva2VuCiAqIEF1dGhvcjogSnVhbiBMaXZpbmdzdG9uICYgRmF0aW1hIEAgRXRoZXJuaXR5LmxpdmUKICogRGV2ZWxvcGVkIGZvcjogR2VuZXZpZXZlIENvLgogKiBHWEUgaXMgYW4gRVJDMjIzIFRva2VuCiAqCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKY29udHJhY3QgQ29udHJhY3RSZWNlaXZlciB7ICAgCiAgICBmdW5jdGlvbiB0b2tlbkZhbGxiYWNrKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSl7CiAgICB9Cn0KCiAvKiBOZXcgRVJDMjIzIGNvbnRyYWN0IGludGVyZmFjZSAqLwoKY29udHJhY3QgRVJDMjIzIHsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIAogIGZ1bmN0aW9uIG5hbWUoKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgX25hbWUpOwogIGZ1bmN0aW9uIHN5bWJvbCgpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBfc3ltYm9sKTsKICBmdW5jdGlvbiBkZWNpbWFscygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscyk7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9zdXBwbHkpOwoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhLCBzdHJpbmcgY3VzdG9tX2ZhbGxiYWNrKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlLCBieXRlcyBpbmRleGVkIGRhdGEpOwp9CgovLyBUaGUgbmV3IEdYRSB0b2tlbiBFUkMyMjMgLSBjbG9uZWQgZnJvbSBHWFZDIHRva2VuCgpjb250cmFjdCBHWEV0b2tlbiB7CgogICAgLy8gVG9rZW4gcHVibGljIHZhcmlhYmxlcwogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7IAogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gJ3YwLjInOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBib29sIGxvY2tlZDsKCiAgICBhZGRyZXNzIHJvb3RBZGRyZXNzOwogICAgYWRkcmVzcyBPd25lcjsKICAgIHVpbnQgbXVsdGlwbGllciA9IDEwMDAwMDAwMDAwOyAvLyBGb3IgMTAgZGVjaW1hbHMKICAgIGFkZHJlc3Mgc3dhcHBlckFkZHJlc3M7IC8vIENhbiBieXBhc3MgYSBsb2NrCgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBmcmVlemVkOyAKCgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSwgYnl0ZXMgaW5kZXhlZCBkYXRhKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8vIE1vZGlmaWVycwoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICBpZiAoIG1zZy5zZW5kZXIgIT0gcm9vdEFkZHJlc3MgJiYgbXNnLnNlbmRlciAhPSBPd25lciApIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVJvb3QoKSB7CiAgICAgICAgaWYgKCBtc2cuc2VuZGVyICE9IHJvb3RBZGRyZXNzICkgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpc1VubG9ja2VkKCkgewogICAgCWlmICggbG9ja2VkICYmIG1zZy5zZW5kZXIgIT0gcm9vdEFkZHJlc3MgJiYgbXNnLnNlbmRlciAhPSBPd25lciApIHJldmVydCgpOwoJCV87ICAgIAkKICAgIH0KCiAgICBtb2RpZmllciBpc1VuZnJlZXplZChhZGRyZXNzIF90bykgewogICAgCWlmICggZnJlZXplZFttc2cuc2VuZGVyXSB8fCBmcmVlemVkW190b10gKSByZXZlcnQoKTsKICAgIAlfOwogICAgfQoKCiAgICAvLyBTYWZlIG1hdGgKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCB4LCB1aW50IHkpIGludGVybmFsIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHJlcXVpcmUoKHogPSB4ICsgeSkgPj0geCk7CiAgICB9CiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCByZXR1cm5zICh1aW50IHopIHsKICAgICAgICByZXF1aXJlKCh6ID0geCAtIHkpIDw9IHgpOwogICAgfQoKCiAgICAvLyBHWEUgVG9rZW4gY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIEdYRXRva2VuKCkgeyAgICAgICAgCiAgICAgICAgbG9ja2VkID0gdHJ1ZTsKICAgICAgICB0b3RhbFN1cHBseSA9IDEwMDAwMDAwMCAqIG11bHRpcGxpZXI7IC8vIDEwMCwwMDAsMDAwIHRva2VucyAqIDEwIGRlY2ltYWxzCiAgICAgICAgbmFtZSA9ICdHZW5ldmlldmUgRXhjaGFuZ2UnOyAKICAgICAgICBzeW1ib2wgPSAnR1hFJzsKICAgICAgICBkZWNpbWFscyA9IDEwOwogICAgICAgIHJvb3RBZGRyZXNzID0gMHgyNDM1MDgwM0JGY0U2RTlEMWY0YmFFMDk0MEU0M2FmMTg2QTZEMTJDOyAgICAgICAgCiAgICAgICAgT3duZXIgPSBtc2cuc2VuZGVyOyAgICAgICAKICAgICAgICBiYWxhbmNlc1tyb290QWRkcmVzc10gPSB0b3RhbFN1cHBseTsgCiAgICAgICAgYWxsb3dlZFtyb290QWRkcmVzc11bc3dhcHBlckFkZHJlc3NdID0gdG90YWxTdXBwbHk7CiAgICB9CgoKCS8vIEVSQzIyMyBBY2Nlc3MgZnVuY3Rpb25zCglmdW5jdGlvbiBuYW1lKCkgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nIF9uYW1lKSB7CgkgICAgICByZXR1cm4gbmFtZTsKCSAgfQoJZnVuY3Rpb24gc3ltYm9sKCkgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nIF9zeW1ib2wpIHsKCSAgICAgIHJldHVybiBzeW1ib2w7CgkgIH0KCWZ1bmN0aW9uIGRlY2ltYWxzKCkgY29uc3RhbnQgcmV0dXJucyAodWludDggX2RlY2ltYWxzKSB7CgkgICAgICByZXR1cm4gZGVjaW1hbHM7CgkgIH0KCWZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBfdG90YWxTdXBwbHkpIHsKCSAgICAgIHJldHVybiB0b3RhbFN1cHBseTsKCSAgfQoKCiAgICAvLyBPbmx5IHJvb3QgZnVuY3Rpb25zCiAgICBmdW5jdGlvbiBjaGFuZ2VSb290KGFkZHJlc3MgX25ld3Jvb3RBZGRyZXNzKSBvbmx5Um9vdCByZXR1cm5zKGJvb2wpewogICAgCQlhbGxvd2VkW3Jvb3RBZGRyZXNzXVtzd2FwcGVyQWRkcmVzc10gPSAwOyAvLyBSZW1vdmVzIGFsbG93YW5jZSB0byBvbGQgcm9vdEFkZHJlc3MKICAgICAgICAgICAgcm9vdEFkZHJlc3MgPSBfbmV3cm9vdEFkZHJlc3M7CiAgICAgICAgICAgIGFsbG93ZWRbX25ld3Jvb3RBZGRyZXNzXVtzd2FwcGVyQWRkcmVzc10gPSB0b3RhbFN1cHBseTsgLy8gR2l2ZXMgYWxsb3dhbmNlIHRvIG5ldyByb290QWRkcmVzcwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgLy8gT25seSBvd25lciBmdW5jdGlvbnMKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgcmV0dXJucyhib29sKXsKICAgICAgICAgICAgT3duZXIgPSBfbmV3T3duZXI7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVN3YXBwZXJBZGQoYWRkcmVzcyBfbmV3U3dhcHBlcikgb25seU93bmVyIHJldHVybnMoYm9vbCl7CiAgICAJCWFsbG93ZWRbcm9vdEFkZHJlc3NdW3N3YXBwZXJBZGRyZXNzXSA9IDA7IC8vIFJlbW92ZXMgYWxsb3dhbmNlIHRvIG9sZCByb290QWRkcmVzcwogICAgICAgICAgICBzd2FwcGVyQWRkcmVzcyA9IF9uZXdTd2FwcGVyOwogICAgICAgICAgICBhbGxvd2VkW3Jvb3RBZGRyZXNzXVtfbmV3U3dhcHBlcl0gPSB0b3RhbFN1cHBseTsgLy8gR2l2ZXMgYWxsb3dhbmNlIHRvIG5ldyByb290QWRkcmVzcwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgICAgIAogICAgZnVuY3Rpb24gdW5sb2NrKCkgb25seU93bmVyIHJldHVybnMoYm9vbCkgewogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGxvY2soKSBvbmx5T3duZXIgcmV0dXJucyhib29sKSB7CiAgICAgICAgbG9ja2VkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBmcmVlemUoYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHJldHVybnMoYm9vbCkgewogICAgICAgIGZyZWV6ZWRbX2FkZHJlc3NdID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB1bmZyZWV6ZShhZGRyZXNzIF9hZGRyZXNzKSBvbmx5T3duZXIgcmV0dXJucyhib29sKSB7CiAgICAgICAgZnJlZXplZFtfYWRkcmVzc10gPSBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgcmV0dXJucyhib29sKSB7CiAgICAJYnl0ZXMgbWVtb3J5IGVtcHR5OwogICAgICAgIGlmICggYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCBfdmFsdWUgKSByZXZlcnQoKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoIGJhbGFuY2VzW21zZy5zZW5kZXJdICwgX3ZhbHVlICk7CiAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlU3ViKCB0b3RhbFN1cHBseSwgIF92YWx1ZSApOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDB4MCwgX3ZhbHVlICwgZW1wdHkpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvLyBQdWJsaWMgZ2V0dGVycwogICAgZnVuY3Rpb24gaXNGcmVlemVkKGFkZHJlc3MgX2FkZHJlc3MpIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBmcmVlemVkW19hZGRyZXNzXTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0xvY2tlZCgpIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBsb2NrZWQ7CiAgICB9CgoKICAvLyBQdWJsaWMgZnVuY3Rpb25zIChmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9EZXhhcmFuL0VSQzIyMy10b2tlbi1zdGFuZGFyZC90cmVlL1JlY29tbWVuZGVkKQoKICAvLyBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgdXNlciBvciBhbm90aGVyIGNvbnRyYWN0IHdhbnRzIHRvIHRyYW5zZmVyIGZ1bmRzCiAgLy8gdG8gYW4gYWRkcmVzcyB0aGF0IGhhcyBhIG5vbi1zdGFuZGFyZCBmYWxsYmFjayBmdW5jdGlvbgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEsIHN0cmluZyBfY3VzdG9tX2ZhbGxiYWNrKQogICAgaXNVbmxvY2tlZCBpc1VuZnJlZXplZChfdG8pIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAKICAgIGlmKGlzQ29udHJhY3QoX3RvKSkgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IF92YWx1ZSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YiggYmFsYW5jZXNbbXNnLnNlbmRlcl0gLCBfdmFsdWUgKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZCggYmFsYW5jZXNbX3RvXSAsIF92YWx1ZSApOwogICAgICAgIENvbnRyYWN0UmVjZWl2ZXIgcmVjZWl2ZXIgPSBDb250cmFjdFJlY2VpdmVyKF90byk7CiAgICAgICAgcmVjZWl2ZXIuY2FsbC52YWx1ZSgwKShieXRlczQoc2hhMyhfY3VzdG9tX2ZhbGxiYWNrKSksIG1zZy5zZW5kZXIsIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgfQogIH0KCiAgLy8gRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIHVzZXIgb3IgYW5vdGhlciBjb250cmFjdCB3YW50cyB0byB0cmFuc2ZlciBmdW5kcwogIC8vIHRvIGFuIGFkZHJlc3Mgd2l0aCB0b2tlbkZhbGxiYWNrIGZ1bmN0aW9uCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkKICAgIGlzVW5sb2NrZWQgaXNVbmZyZWV6ZWQoX3RvKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgCiAgICBpZihpc0NvbnRyYWN0KF90bykpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0NvbnRyYWN0KF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgfQogIH0KCgogIC8vIFN0YW5kYXJkIGZ1bmN0aW9uIHRyYW5zZmVyIHNpbWlsYXIgdG8gRVJDMjAgdHJhbnNmZXIgd2l0aCBubyBfZGF0YS4KICAvLyBBZGRlZCBkdWUgdG8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgcmVhc29ucy4KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIGlzVW5sb2NrZWQgaXNVbmZyZWV6ZWQoX3RvKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICBieXRlcyBtZW1vcnkgZW1wdHk7CiAgICBpZihpc0NvbnRyYWN0KF90bykpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0NvbnRyYWN0KF90bywgX3ZhbHVlLCBlbXB0eSk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIGVtcHR5KTsKICAgIH0KICB9CgogIC8vYXNzZW1ibGUgdGhlIGdpdmVuIGFkZHJlc3MgYnl0ZWNvZGUuIElmIGJ5dGVjb2RlIGV4aXN0cyB0aGVuIHRoZSBfYWRkciBpcyBhIGNvbnRyYWN0LgogIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgcHJpdmF0ZSByZXR1cm5zIChib29sIGlzX2NvbnRyYWN0KSB7CiAgICAgIHVpbnQgbGVuZ3RoOwogICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgIC8vcmV0cmlldmUgdGhlIHNpemUgb2YgdGhlIGNvZGUgb24gdGFyZ2V0IGFkZHJlc3MsIHRoaXMgbmVlZHMgYXNzZW1ibHkKICAgICAgICAgICAgbGVuZ3RoIDo9IGV4dGNvZGVzaXplKF9hZGRyKQogICAgICB9CiAgICAgIHJldHVybiAobGVuZ3RoPjApOwogIH0KCiAgLy9mdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhbiBhZGRyZXNzCiAgZnVuY3Rpb24gdHJhbnNmZXJUb0FkZHJlc3MoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHJpdmF0ZSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IF92YWx1ZSkgcmV0dXJuIGZhbHNlOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgCiAgLy9mdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhIGNvbnRyYWN0CiAgZnVuY3Rpb24gdHJhbnNmZXJUb0NvbnRyYWN0KGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHJldHVybiBmYWxzZTsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSAsIF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dICwgX3ZhbHVlKTsKICAgIENvbnRyYWN0UmVjZWl2ZXIgcmVjZWl2ZXIgPSBDb250cmFjdFJlY2VpdmVyKF90byk7CiAgICByZWNlaXZlci50b2tlbkZhbGxiYWNrKG1zZy5zZW5kZXIsIF92YWx1ZSwgX2RhdGEpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgIHJldHVybiB0cnVlOwogIH0KCgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMoYm9vbCkgewoKICAgICAgICBpZiAoIGxvY2tlZCAmJiBtc2cuc2VuZGVyICE9IHN3YXBwZXJBZGRyZXNzICkgcmV0dXJuIGZhbHNlOyAKICAgICAgICBpZiAoIGZyZWV6ZWRbX2Zyb21dIHx8IGZyZWV6ZWRbX3RvXSApIHJldHVybiBmYWxzZTsgLy8gQ2hlY2sgaWYgZGVzdGluYXRpb24gYWRkcmVzcyBpcyBmcmVlemVkCiAgICAgICAgaWYgKCBiYWxhbmNlc1tfZnJvbV0gPCBfdmFsdWUgKSByZXR1cm4gZmFsc2U7IC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAoJCWlmICggX3ZhbHVlID4gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gKSByZXR1cm4gZmFsc2U7IC8vIENoZWNrIGFsbG93YW5jZQoKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSAsIF92YWx1ZSk7IC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10gLCBfdmFsdWUpOyAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudAoKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdICwgX3ZhbHVlICk7CgogICAgICAgIGJ5dGVzIG1lbW9yeSBlbXB0eTsKCiAgICAgICAgaWYgKCBpc0NvbnRyYWN0KF90bykgKSB7CgkgICAgICAgIENvbnRyYWN0UmVjZWl2ZXIgcmVjZWl2ZXIgPSBDb250cmFjdFJlY2VpdmVyKF90byk7CgkgICAgCXJlY2VpdmVyLnRva2VuRmFsbGJhY2soX2Zyb20sIF92YWx1ZSwgZW1wdHkpOwoJCX0KCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlICwgZW1wdHkpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnModWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMoYm9vbCkgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKfQ=='.
	

]
