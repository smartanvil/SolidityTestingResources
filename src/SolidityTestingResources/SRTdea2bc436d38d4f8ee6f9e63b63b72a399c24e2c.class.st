Class {
	#name : #SRTdea2bc436d38d4f8ee6f9e63b63b72a399c24e2c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdea2bc436d38d4f8ee6f9e63b63b72a399c24e2c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgICAqLwogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KCn0KCgoKCgoKCgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBpZiAoYSAhPSAwICYmIGMgLyBhICE9IGIpIHJldmVydCgpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGIgPiBhKSByZXZlcnQoKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgaWYgKGMgPCBhKSByZXZlcnQoKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQoKCgpjb250cmFjdCBWTEJCb251c1N0b3JlIGlzIE93bmFibGUgewogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQ4KSBwdWJsaWMgcmF0ZXM7CgogICAgZnVuY3Rpb24gY29sbGVjdFJhdGUoYWRkcmVzcyBpbnZlc3Rvcikgb25seU93bmVyIHB1YmxpYyByZXR1cm5zICh1aW50OCkgewogICAgICAgIHJlcXVpcmUoaW52ZXN0b3IgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgdWludDggcmF0ZSA9IHJhdGVzW2ludmVzdG9yXTsKICAgICAgICBpZiAocmF0ZSAhPSAwKSB7CiAgICAgICAgICAgIGRlbGV0ZSByYXRlc1tpbnZlc3Rvcl07CiAgICAgICAgfQogICAgICAgIHJldHVybiByYXRlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZFJhdGUoYWRkcmVzcyBpbnZlc3RvciwgdWludDggcmF0ZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShpbnZlc3RvciAhPSBhZGRyZXNzKDApKTsKICAgICAgICByYXRlc1tpbnZlc3Rvcl0gPSByYXRlOwogICAgfQp9CmNvbnRyYWN0IFZMQlJlZnVuZFZhdWx0IGlzIE93bmFibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgZW51bSBTdGF0ZSB7QWN0aXZlLCBSZWZ1bmRpbmcsIENsb3NlZH0KICAgIFN0YXRlIHB1YmxpYyBzdGF0ZTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkZXBvc2l0ZWQ7CgogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwoKICAgIGV2ZW50IENsb3NlZCgpOwogICAgZXZlbnQgRnVuZHNEcmFpbmVkKHVpbnQyNTYgd2VpQW1vdW50KTsKICAgIGV2ZW50IFJlZnVuZHNFbmFibGVkKCk7CiAgICBldmVudCBSZWZ1bmRlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgd2VpQW1vdW50KTsKCiAgICBmdW5jdGlvbiBWTEJSZWZ1bmRWYXVsdChhZGRyZXNzIF93YWxsZXQpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfd2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5BY3RpdmU7CiAgICB9CgogICAgZnVuY3Rpb24gZGVwb3NpdChhZGRyZXNzIGludmVzdG9yKSBvbmx5T3duZXIgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsKICAgICAgICBkZXBvc2l0ZWRbaW52ZXN0b3JdID0gZGVwb3NpdGVkW2ludmVzdG9yXS5hZGQobXNnLnZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1bmhvbGQoKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICAgICAgRnVuZHNEcmFpbmVkKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgd2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgZnVuY3Rpb24gY2xvc2UoKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5DbG9zZWQ7CiAgICAgICAgQ2xvc2VkKCk7CiAgICAgICAgRnVuZHNEcmFpbmVkKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgd2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZW5hYmxlUmVmdW5kcygpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsKICAgICAgICBzdGF0ZSA9IFN0YXRlLlJlZnVuZGluZzsKICAgICAgICBSZWZ1bmRzRW5hYmxlZCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlZnVuZChhZGRyZXNzIGludmVzdG9yKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUmVmdW5kaW5nKTsKICAgICAgICB1aW50MjU2IGRlcG9zaXRlZFZhbHVlID0gZGVwb3NpdGVkW2ludmVzdG9yXTsKICAgICAgICBkZXBvc2l0ZWRbaW52ZXN0b3JdID0gMDsKICAgICAgICBpbnZlc3Rvci50cmFuc2ZlcihkZXBvc2l0ZWRWYWx1ZSk7CiAgICAgICAgUmVmdW5kZWQoaW52ZXN0b3IsIGRlcG9zaXRlZFZhbHVlKTsKICAgIH0KfQoKCmludGVyZmFjZSBUb2tlbiB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiB0b2tlbnNXYWxsZXQoKSBwdWJsaWMgcmV0dXJucyAoYWRkcmVzcyk7Cn0KCi8qKgogKiBAdGl0bGUgVkxCQ3Jvd2RzYWxlCiAqIEBkZXYgVkxCIGNyb3dkc2FsZSBjb250cmFjdCBib3Jyb3dzIFplcHBlbGluIEZpbmFsaXplZCwgQ2FwcGVkIGFuZCBSZWZ1bmRhYmxlIGNyb3dkc2FsZXMgaW1wbGVtZW50YXRpb25zCiAqLwpjb250cmFjdCBWTEJDcm93ZHNhbGUgaXMgT3duYWJsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICAvKioKICAgICAqIEBkZXYgZXNjcm93IGFkZHJlc3MKICAgICAqLwogICAgYWRkcmVzcyBwdWJsaWMgZXNjcm93OwoKICAgIC8qKgogICAgICogQGRldiB0b2tlbiBjb250cmFjdAogICAgICovCiAgICBUb2tlbiBwdWJsaWMgdG9rZW47CgogICAgLyoqCiAgICAgKiBAZGV2IHJlZnVuZCB2YXVsdCB1c2VkIHRvIGhvbGQgZnVuZHMgd2hpbGUgY3Jvd2RzYWxlIGlzIHJ1bm5pbmcKICAgICAqLwogICAgVkxCUmVmdW5kVmF1bHQgcHVibGljIHZhdWx0OwoKICAgIC8qKgogICAgICogQGRldiByZWZ1bmQgdmF1bHQgdXNlZCB0byBob2xkIGZ1bmRzIHdoaWxlIGNyb3dkc2FsZSBpcyBydW5uaW5nCiAgICAgKi8KICAgIFZMQkJvbnVzU3RvcmUgcHVibGljIGJvbnVzZXM7CgogICAgLyoqCiAgICAgKiBAZGV2IHRva2Vuc2FsZSBzdGFydCB0aW1lOiBEZWMgMTcsIDIwMTcgMTI6MDA6MDAgVVRDICgxNTEzNTEyMDAwKQogICAgICovCiAgICB1aW50IHN0YXJ0VGltZSA9IDE1MTM1MTIwMDA7CgogICAgLyoqCiAgICAgKiBAZGV2IHRva2Vuc2FsZSBlbmQgdGltZTogQXByIDA5LCAyMDE4IDEyOjAwOjAwIFVUQyAoMTUyMzI3NTIwMCkKICAgICAqLwogICAgdWludCBlbmRUaW1lID0gMTUyMzI3NTIwMDsKCiAgICAvKioKICAgICAqIEBkZXYgbWluaW11bSBwdXJjaGFzZSBhbW91bnQgZm9yIHByZXNhbGUKICAgICAqLwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgTUlOX1NBTEVfQU1PVU5UID0gNSAqIDEwKioxNzsgLy8gMC41IGV0aGVyCgogICAgLyoqCiAgICAgKiBAZGV2IG1pbmltdW0gYW5kIG1heGltdW0gYW1vdW50IG9mIGZ1bmRzIHRvIGJlIHJhaXNlZCBpbiBVU0QKICAgICAqLwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgVVNEX0dPQUwgPSA0ICogMTAqKjY7ICAvLyAkNE0KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFVTRF9DQVAgID0gMTIgKiAxMCoqNjsgLy8gJDEyTQoKICAgIC8qKgogICAgICogQGRldiBhbW91bnQgb2YgcmFpc2VkIG1vbmV5IGluIHdlaQogICAgICovCiAgICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWQ7CgogICAgLyoqCiAgICAgKiBAZGV2IHRva2Vuc2FsZSBmaW5hbGl6YXRpb24gZmxhZwogICAgICovCiAgICBib29sIHB1YmxpYyBpc0ZpbmFsaXplZCA9IGZhbHNlOwoKICAgIC8qKgogICAgICogQGRldiB0b2tlbnNhbGUgcGF1c2UgZmxhZwogICAgICovCiAgICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCiAgICAvKioKICAgICAqIEBkZXYgcmVmdW5kaW5nIHNhdGdlIGZsYWcKICAgICAqLwogICAgYm9vbCBwdWJsaWMgcmVmdW5kaW5nID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiBAZGV2IG1pbiBjYXAgcmVhY2ggZmxhZwogICAgICovCiAgICBib29sIHB1YmxpYyBpc01pbkNhcFJlYWNoZWQgPSBmYWxzZTsKCiAgICAvKioKICAgICAqIEBkZXYgRVRIIHggVVNEIGV4Y2hhbmdlIHJhdGUKICAgICAqLwogICAgdWludCBwdWJsaWMgRVRIVVNEOwoKICAgIC8qKgogICAgICogQGRldiBldmVudCBmb3IgdG9rZW4gcHVyY2hhc2UgbG9nZ2luZwogICAgICogQHBhcmFtIHB1cmNoYXNlciB3aG8gcGFpZCBmb3IgdGhlIHRva2VucwogICAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IHdobyBnb3QgdGhlIHRva2VucwogICAgICogQHBhcmFtIHZhbHVlIHdlaXMgcGFpZCBmb3IgcHVyY2hhc2UKICAgICAqIEBwYXJhbSBhbW91bnQgYW1vdW50IG9mIHRva2VucyBwdXJjaGFzZWQKICAgICAqLwogICAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKCiAgICAvKioKICAgICAqIEBkZXYgZXZlbnQgZm9yIHRva2Vuc2FsZSBmaW5hbCBsb2dnaW5nCiAgICAqLwogICAgZXZlbnQgRmluYWxpemVkKCk7CgogICAgLyoqCiAgICAgKiBAZGV2IGV2ZW50IGZvciB0b2tlbnNhbGUgcGF1c2UgbG9nZ2luZwogICAgKi8gICAgCiAgICBldmVudCBQYXVzZSgpOwoKICAgIC8qKgogICAgICogQGRldiBldmVudCBmb3IgdG9rZW5zYWxlIHVwcGF1c2UgbG9nZ2luZwogICAgKi8gICAgCiAgICBldmVudCBVbnBhdXNlKCk7CgogICAgLyoqCiAgICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIG5vdCBwYXVzZWQuCiAgICAgKi8KICAgIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICAgICAgcmVxdWlyZSghcGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuCiAgICAgKi8KICAgIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CiAgICAgICAgcmVxdWlyZShwYXVzZWQpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gaXRzIGNhbGxlZCBieSBlc2Nyb3cuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlFc2Nyb3coKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGVzY3Jvdyk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQ3Jvd2RzYWxlIGluIHRoZSBjb25zdHJ1Y3RvciB0YWtlcyBhZGRyZXNzZXMgb2YKICAgICAqICAgICAgdGhlIGp1c3QgZGVwbG95ZWQgVkxCVG9rZW4gYW5kIFZMQlJlZnVuZFZhdWx0IGNvbnRyYWN0cwogICAgICogQHBhcmFtIF90b2tlbkFkZHJlc3MgYWRkcmVzcyBvZiB0aGUgVkxCVG9rZW4gZGVwbG95ZWQgY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gVkxCQ3Jvd2RzYWxlKGFkZHJlc3MgX3Rva2VuQWRkcmVzcywgYWRkcmVzcyBfd2FsbGV0LCBhZGRyZXNzIF9lc2Nyb3csIHVpbnQgcmF0ZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF90b2tlbkFkZHJlc3MgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfd2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX2VzY3JvdyAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgZXNjcm93ID0gX2VzY3JvdzsKCiAgICAgICAgLy8gU2V0IGluaXRpYWwgZXhjaGFuZ2UgcmF0ZQogICAgICAgIEVUSFVTRCA9IHJhdGU7CgogICAgICAgIC8vIFZMQlRva2Vud2FzIGRlcGxveWVkIHNlcGFyYXRlbHkKICAgICAgICB0b2tlbiA9IFRva2VuKF90b2tlbkFkZHJlc3MpOwoKICAgICAgICB2YXVsdCA9IG5ldyBWTEJSZWZ1bmRWYXVsdChfd2FsbGV0KTsKICAgICAgICBib251c2VzID0gbmV3IFZMQkJvbnVzU3RvcmUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgZmFsbGJhY2sgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYnV5IHRva2VucwogICAgICovCiAgICBmdW5jdGlvbigpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IG1haW4gZnVuY3Rpb24gdG8gYnV5IHRva2VucwogICAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IHRhcmdldCB3YWxsZXQgZm9yIHRva2VucyBjYW4gdmFyeSBmcm9tIHRoZSBzZW5kZXIgb25lCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIGJlbmVmaWNpYXJ5KSB3aGVuTm90UGF1c2VkIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKGJlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUodmFsaWRQdXJjaGFzZShtc2cudmFsdWUpKTsKCiAgICAgICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CgogICAgICAgIC8vIGJ1eWVyIGFuZCBiZW5lZmljaWFyeSBjb3VsZCBiZSB0d28gZGlmZmVyZW50IHdhbGxldHMKICAgICAgICBhZGRyZXNzIGJ1eWVyID0gbXNnLnNlbmRlcjsKCiAgICAgICAgd2VpUmFpc2VkID0gd2VpUmFpc2VkLmFkZCh3ZWlBbW91bnQpOwoKICAgICAgICAvLyBjYWxjdWxhdGUgdG9rZW4gYW1vdW50IHRvIGJlIGNyZWF0ZWQKICAgICAgICB1aW50MjU2IHRva2VucyA9IHdlaUFtb3VudC5tdWwoZ2V0Q29udmVyc2lvblJhdGUoKSk7CgogICAgICAgIHVpbnQ4IHJhdGUgPSBib251c2VzLmNvbGxlY3RSYXRlKGJlbmVmaWNpYXJ5KTsKICAgICAgICBpZiAocmF0ZSAhPSAwKSB7CiAgICAgICAgICAgIHRva2VucyA9IHRva2Vucy5tdWwocmF0ZSkuZGl2KDEwMCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXRva2VuLnRyYW5zZmVyRnJvbSh0b2tlbi50b2tlbnNXYWxsZXQoKSwgYmVuZWZpY2lhcnksIHRva2VucykpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQoKICAgICAgICBUb2tlblB1cmNoYXNlKGJ1eWVyLCBiZW5lZmljaWFyeSwgd2VpQW1vdW50LCB0b2tlbnMpOwoKICAgICAgICB2YXVsdC5kZXBvc2l0LnZhbHVlKHdlaUFtb3VudCkoYnV5ZXIpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBjaGVjayBpZiB0aGUgY3VycmVudCBwdXJjaGFzZSB2YWxpZCBiYXNlZCBvbiB0aW1lIGFuZCBhbW91bnQgb2YgcGFzc2VkIGV0aGVyCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCBvZiBwYXNzZWQgZXRoZXIKICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBpbnZlc3RvcnMgY2FuIGJ1eSBhdCB0aGUgbW9tZW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIHZhbGlkUHVyY2hhc2UodWludDI1NiBfdmFsdWUpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBib29sIG5vblplcm9QdXJjaGFzZSA9IF92YWx1ZSAhPSAwOwogICAgICAgIGJvb2wgd2l0aGluUGVyaW9kID0gbm93ID49IHN0YXJ0VGltZSAmJiBub3cgPD0gZW5kVGltZTsKICAgICAgICBib29sIHdpdGhpbkNhcCA9ICFjYXBSZWFjaGVkKHdlaVJhaXNlZC5hZGQoX3ZhbHVlKSk7CgogICAgICAgIC8vIEZvciBwcmVzYWxlIHdlIHdhbnQgdG8gZGVjbGluZSBhbGwgcGF5bWVudHMgbGVzcyB0aGVuIG1pblByZXNhbGVBbW91bnQKICAgICAgICBib29sIHdpdGhpbkFtb3VudCA9IG1zZy52YWx1ZSA+PSBNSU5fU0FMRV9BTU9VTlQ7CgogICAgICAgIHJldHVybiBub25aZXJvUHVyY2hhc2UgJiYgd2l0aGluUGVyaW9kICYmIHdpdGhpbkNhcCAmJiB3aXRoaW5BbW91bnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IGZpbmlzaCBwcmVzYWxlIHN0YWdlIGFuZCBtb3ZlIHZhdWx0IHRvCiAgICAgKiAgICAgIHJlZnVuZCBzdGF0ZSBpZiBHT0FMIHdhcyBub3QgcmVhY2hlZAogICAgICovCiAgICBmdW5jdGlvbiB1bmhvbGRGdW5kcygpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGlmIChnb2FsUmVhY2hlZCgpKSB7CiAgICAgICAgICAgIGlzTWluQ2FwUmVhY2hlZCA9IHRydWU7CiAgICAgICAgICAgIHZhdWx0LnVuaG9sZCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBAZGV2IGNoZWNrIGlmIGNyb3dkc2FsZSBzdGlsbCBhY3RpdmUgYmFzZWQgb24gY3VycmVudCB0aW1lIGFuZCBjYXAKICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBjcm93ZHNhbGUgZXZlbnQgaGFzIGVuZGVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGhhc0VuZGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBib29sIHRpbWVJc1VwID0gbm93ID4gZW5kVGltZTsKICAgICAgICByZXR1cm4gdGltZUlzVXAgfHwgY2FwUmVhY2hlZCgpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBmaW5hbGl6ZSBjcm93ZHNhbGUuIHRoaXMgbWV0aG9kIHRyaWdnZXJzIHZhdWx0IGFuZCB0b2tlbiBmaW5hbGl6YXRpb24KICAgICAqLwogICAgZnVuY3Rpb24gZmluYWxpemUoKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKCFpc0ZpbmFsaXplZCk7CiAgICAgICAgcmVxdWlyZShoYXNFbmRlZCgpKTsKCiAgICAgICAgaWYgKGdvYWxSZWFjaGVkKCkpIHsKICAgICAgICAgICAgdmF1bHQuY2xvc2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWZ1bmRpbmcgPSB0cnVlOwogICAgICAgICAgICB2YXVsdC5lbmFibGVSZWZ1bmRzKCk7CiAgICAgICAgfQoKICAgICAgICBpc0ZpbmFsaXplZCA9IHRydWU7CiAgICAgICAgRmluYWxpemVkKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IGFkZCBwcmV2aW91cyBpbnZlc3RvciBjb21wZW5zYXRvbiByYXRlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFkZFJhdGUoYWRkcmVzcyBpbnZlc3RvciwgdWludDggcmF0ZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShpbnZlc3RvciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBib251c2VzLmFkZFJhdGUoaW52ZXN0b3IsIHJhdGUpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBjaGVjayBpZiBzb2Z0IGNhcCBnb2FsIGlzIHJlYWNoZWQgaW4gVVNECiAgICAgKi8KICAgIGZ1bmN0aW9uIGdvYWxSZWFjaGVkKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgeyAgICAgICAgCiAgICAgICAgcmV0dXJuIGlzTWluQ2FwUmVhY2hlZCB8fCB3ZWlSYWlzZWQubXVsKEVUSFVTRCkuZGl2KDEwKioyMCkgPj0gVVNEX0dPQUw7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IGNoZWNrIGlmIGhhcmQgY2FwIGdvYWwgaXMgcmVhY2hlZCBpbiBVU0QKICAgICAqLwogICAgZnVuY3Rpb24gY2FwUmVhY2hlZCgpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB3ZWlSYWlzZWQubXVsKEVUSFVTRCkuZGl2KDEwKioyMCkgPj0gVVNEX0NBUDsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgY2hlY2sgaWYgaGFyZCBjYXAgZ29hbCBpcyByZWFjaGVkIGluIFVTRAogICAgICovCiAgICBmdW5jdGlvbiBjYXBSZWFjaGVkKHVpbnQyNTYgcmFpc2VkKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gcmFpc2VkLm11bChFVEhVU0QpLmRpdigxMCoqMjApID49IFVTRF9DQVA7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IGlmIGNyb3dkc2FsZSBpcyB1bnN1Y2Nlc3NmdWwsIGludmVzdG9ycyBjYW4gY2xhaW0gcmVmdW5kcyBoZXJlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNsYWltUmVmdW5kKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKGlzRmluYWxpemVkICYmIHJlZnVuZGluZyk7CgogICAgICAgIHZhdWx0LnJlZnVuZChtc2cuc2VuZGVyKTsKICAgIH0gICAgCgogICAgLyoqCiAgICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgICAqLwogICAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgICAgIHBhdXNlZCA9IHRydWU7CiAgICAgICAgUGF1c2UoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAgICovCiAgICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcHVibGljIHsKICAgICAgICBwYXVzZWQgPSBmYWxzZTsKICAgICAgICBVbnBhdXNlKCk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQGRldiBjYWxsZWQgYnkgdGhlIGVzY3JvdyB0byB1cGRhdGUgY3VycmVudCBFVEggeCBVU0QgZXhjaGFuZ2UgcmF0ZQogICAgICovCiAgICBmdW5jdGlvbiB1cGRhdGVFeGNoYW5nZVJhdGUodWludCByYXRlKSBvbmx5RXNjcm93IHB1YmxpYyB7CiAgICAgICAgRVRIVVNEID0gcmF0ZTsKICAgIH0gCgogICAgLyoqCiAgICAgKiBAZGV2IHJldHVybnMgY3VycmVudCB0b2tlbiBwcmljZSBiYXNlZCBvbiBjdXJyZW50IHByZXNhbGUgdGltZSBmcmFtZQogICAgICovCiAgICBmdW5jdGlvbiBnZXRDb252ZXJzaW9uUmF0ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKG5vdyA+PSBzdGFydFRpbWUgKyAxMDYgZGF5cykgewogICAgICAgICAgICByZXR1cm4gNjUwOwogICAgICAgIH0gZWxzZSBpZiAobm93ID49IHN0YXJ0VGltZSArIDk5IGRheXMpIHsKICAgICAgICAgICAgcmV0dXJuIDY3NjsKICAgICAgICB9IGVsc2UgaWYgKG5vdyA+PSBzdGFydFRpbWUgKyA5MiBkYXlzKSB7CiAgICAgICAgICAgIHJldHVybiA3MTU7CiAgICAgICAgfSBlbHNlIGlmIChub3cgPj0gc3RhcnRUaW1lICsgODUgZGF5cykgewogICAgICAgICAgICByZXR1cm4gNzgwOwogICAgICAgIH0gZWxzZSBpZiAobm93ID49IHN0YXJ0VGltZSkgewogICAgICAgICAgICByZXR1cm4gODQ1OwogICAgICAgIH0KICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYga2lsbGVyIG1ldGhvZCB0aGF0IGNhbiBidSB1c2VkIGJ5IG93bmVyIHRvCiAgICAgKiAgICAgIGtpbGwgdGhlIGNvbnRyYWN0IGFuZCBzZW5kIGZ1bmRzIHRvIG93bmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGtpbGwoKSBvbmx5T3duZXIgd2hlblBhdXNlZCBwdWJsaWMgewogICAgICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgICB9Cn0='.
	

]
