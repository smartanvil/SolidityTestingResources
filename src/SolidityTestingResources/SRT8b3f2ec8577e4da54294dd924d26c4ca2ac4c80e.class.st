Class {
	#name : #SRT8b3f2ec8577e4da54294dd924d26c4ca2ac4c80e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8b3f2ec8577e4da54294dd924d26c4ca2ac4c80e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKgoKT0ZGSUNJQUwgTEFVTkNIIElOIDcgREFZUyAoYmFzZWQgb24gNCBibG9ja3MgcGVyIG1pbnV0ZSkhCgpQcm9vZiBvZiBXZWFrIEhhbmRzICAtICBOZXcgT3BlbiBFZGl0aW9uIQogX19fX18gICAgICAgICAgICAgX19fX18gICAgIF8gXyBfIF9fX19fIAp8ICAgICB8X19fIF9fXyBfX198ICBfICB8X19ffCB8IHwgfCAgfCAgfAp8ICB8ICB8IC4gfCAtX3wgICB8ICAgX198IC4gfCB8IHwgfCAgICAgfAp8X19fX198ICBffF9fX3xffF98X198ICB8X19ffF9fX19ffF9ffF9ffAogICAgICB8X3wgICAgICAgICAgICAgIAogICAgICAKUHJvb2Ygb2YgV2VhayBIYW5kcyAgLSAgTmV3IE9wZW4gRWRpdGlvbiEKCk9wZW5Qb1dIIHdhcyBtYWRlIHRvIGJlIGEgZGVjZW50cmFsaXplZCBjbG9uZSBvZiBQb1dIIHdpdGggYW4gZXZlbiBzdGFydCBmb3IgYWxsLiAKCkl0J3Mgc2ltcGxlOgotIFRoZSBmaXJzdCAyNTAgdHJhbnNhY3Rpb25zIGNhbiBvbmx5IGJ1eSBpbiBmb3IgMC4xIEVUSCBtYXguIEFueXRoaW5nIG1vcmUgZ2V0cyByZWZ1bmRlZC4gCi0gVGhlIGNvbnRyYWN0IGFkZHJlc3MgaXMgcmVsZWFzZWQgcm91Z2hseSA3IGRheXMgcHJpb3IgdG8gdGhlIGdhbWUgc3RhcnRpbmcgKGJhc2VkIG9uIGJsb2NrIG51bWJlciksIGFsb3dpbmcgdGltZSBmb3IgcmV2aWV3IGFuZCBwcmVwYXJhdGlvbi4KLV9BbnkgcHVyY2hhc2VzIGRvbmUgYmVmb3JlIHRoZSBzdGFydCBibG9jayBhcmUgcmVmdW5kZWQuCgpDcmVkaXRzOgoKQmFzZWQgb24gb3JpZ2luYWwgUG9XSCBjb25jZXB0OiBodHRwczovL3Rlc3Quam9jaGVuLWhvZW5pY2tlLmRlL2V0aC9wb256aXRva2VuLwpPcmlnaW5hbCBQb1dIQ29pbiBMYXVuY2g6IFBvbnppQm90CkV0aFB5IFNlY3VyZSBSZXdyaXRlIGFuZCBBdWRpdDogZnVuY3Rpb25aZXJPLCB0b2NzSWNrLCBhcmMsIGR1bXBpbkRpdmluZQpMaW1pdGF0aW9uIG9mIEJ1eWluIEFtb3VudDogdG9jc2ljawpEZWxheWVkIFB1YmxpYyBTdGFydCBUaW1lOiBDb21tb24gU2Vuc2UgLyBodHRwczovL3NvbGlkaXR5LnJlYWR0aGVkb2NzLmlvLyAvIFRoZSBQZW9wbGUKbW9kZXJudmlsbGFpbjogU2hpdCBTaGFkb3cgZGlkbid0IGV2ZW4gZ2V0IGEgbWVudGlvbj8KCgoqLwoKY29udHJhY3QgT3BlblBvV0ggewoKCS8vIHNjYWxlRmFjdG9yIGlzIHVzZWQgdG8gY29udmVydCBFdGhlciBpbnRvIHRva2VucyBhbmQgdmljZS12ZXJzYTogdGhleSdyZSBvZiBkaWZmZXJlbnQKCS8vIG9yZGVycyBvZiBtYWduaXR1ZGUsIGhlbmNlIHRoZSBuZWVkIHRvIGJyaWRnZSBiZXR3ZWVuIHRoZSB0d28uCgl1aW50MjU2IGNvbnN0YW50IHNjYWxlRmFjdG9yID0gMHgxMDAwMDAwMDAwMDAwMDAwMDsgIC8vIDJeNjQKCgkvLyBOdW1iZXIgb2YgZmlyc3QgYnV5ZXJzIHRoYXQgYXJlIGxpbWl0ZWQKCXVpbnQ4IGNvbnN0YW50IGxpbWl0ZWRGaXJzdEJ1eWVycyA9IDI1MDsgICAgLy8gTGltaXQgNTAgYnV5ZXJzIHRvIDAuMQoJdWludDI1NiBjb25zdGFudCBmaXJzdEJ1eWVyTGltaXQgPSAwLjEgZXRoZXI7CgkKCS8vIENSUiA9IDUwJQoJLy8gQ1JSIGlzIENhc2ggUmVzZXJ2ZSBSYXRpbyAoaW4gdGhpcyBjYXNlIENyeXB0byBSZXNlcnZlIFJhdGlvKS4KCS8vIEZvciBtb3JlIG9uIHRoaXM6IGNoZWNrIG91dCBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SZXNlcnZlX3JlcXVpcmVtZW50CglpbnQgY29uc3RhbnQgY3JyX24gPSAxOyAvLyBDUlIgbnVtZXJhdG9yCglpbnQgY29uc3RhbnQgY3JyX2QgPSAyOyAvLyBDUlIgZGVub21pbmF0b3IKCgkvLyBUaGUgcHJpY2UgY29lZmZpY2llbnQuIENob3NlbiBzdWNoIHRoYXQgYXQgMSB0b2tlbiB0b3RhbCBzdXBwbHkKCS8vIHRoZSBhbW91bnQgaW4gcmVzZXJ2ZSBpcyAwLjUgZXRoZXIgYW5kIHRva2VuIHByaWNlIGlzIDEgRXRoZXIuCglpbnQgY29uc3RhbnQgcHJpY2VfY29lZmYgPSAtMHgyOTZBQkY3ODRBMzU4NDY4QzsKCgkvLyBUeXBpY2FsIHZhbHVlcyB0aGF0IHdlIGhhdmUgdG8gZGVjbGFyZS4KCXN0cmluZyBjb25zdGFudCBwdWJsaWMgbmFtZSA9ICJPcGVuUG9XSCI7CglzdHJpbmcgY29uc3RhbnQgcHVibGljIHN5bWJvbCA9ICJPUG9XSCI7Cgl1aW50OCBjb25zdGFudCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKCgkvLyBBcnJheSBiZXR3ZWVuIGVhY2ggYWRkcmVzcyBhbmQgdGhlaXIgbnVtYmVyIG9mIHRva2Vucy4KCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgdG9rZW5CYWxhbmNlOwoJCQoJLy8gQXJyYXkgYmV0d2VlbiBlYWNoIGFkZHJlc3MgYW5kIGhvdyBtdWNoIEV0aGVyIGhhcyBiZWVuIHBhaWQgb3V0IHRvIGl0LgoJLy8gTm90ZSB0aGF0IHRoaXMgaXMgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCW1hcHBpbmcoYWRkcmVzcyA9PiBpbnQyNTYpIHB1YmxpYyBwYXlvdXRzOwoKCS8vIFZhcmlhYmxlIHRyYWNraW5nIGhvdyBtYW55IHRva2VucyBhcmUgaW4gZXhpc3RlbmNlIG92ZXJhbGwuCgl1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCgkvLyBBZ2dyZWdhdGUgc3VtIG9mIGFsbCBwYXlvdXRzLgoJLy8gTm90ZSB0aGF0IHRoaXMgaXMgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCWludDI1NiB0b3RhbFBheW91dHM7CgoJLy8gVmFyaWFibGUgdHJhY2tpbmcgaG93IG11Y2ggRXRoZXIgZWFjaCB0b2tlbiBpcyBjdXJyZW50bHkgd29ydGguCgkvLyBOb3RlIHRoYXQgdGhpcyBpcyBzY2FsZWQgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJdWludDI1NiBlYXJuaW5nc1BlclRva2VuOwoJCgkvLyBDdXJyZW50IGNvbnRyYWN0IGJhbGFuY2UgaW4gRXRoZXIKCXVpbnQyNTYgcHVibGljIGNvbnRyYWN0QmFsYW5jZTsKCQoJLy8gU3RvcmVzIGZpcnN0IGJ1eWVyIGNvdW50ZG93bgoJdWludDggaW5pdGlhbEZ1bmRzOwoKIAkvLyBHYW1lIFN0YXJ0IFRpbWUKIAkvLyBBcm91bmQgNyBkYXlzIEAgMTVzL2Jsb2NrCiAgCXVpbnQgcHVibGljIGdhbWVTdGFydEJsb2NrOwogIAl1aW50IGNvbnN0YW50IGdhbWVTdGFydEJsb2NrT2Zmc2V0ID0gNCAqIDYwICogMjQgKiA3OyAKICAgIAoJZnVuY3Rpb24gT3BlblBvV0goKSBwdWJsaWMgewogICAgCWluaXRpYWxGdW5kcyA9IGxpbWl0ZWRGaXJzdEJ1eWVyczsKICAgIAlnYW1lU3RhcnRCbG9jayA9IGJsb2NrLm51bWJlciArIGdhbWVTdGFydEJsb2NrT2Zmc2V0OyAKICAgIH0KCgkvLyBUaGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBhcmUgdXNlZCBieSB0aGUgZnJvbnQtZW5kIGZvciBkaXNwbGF5IHB1cnBvc2VzLgoKCS8vIFJldHVybnMgdGhlIG51bWJlciBvZiB0b2tlbnMgY3VycmVudGx5IGhlbGQgYnkgX293bmVyLgoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CgkJcmV0dXJuIHRva2VuQmFsYW5jZVtfb3duZXJdOwoJfQoKCS8vIFdpdGhkcmF3cyBhbGwgZGl2aWRlbmRzIGhlbGQgYnkgdGhlIGNhbGxlciBzZW5kaW5nIHRoZSB0cmFuc2FjdGlvbiwgdXBkYXRlcwoJLy8gdGhlIHJlcXVpc2l0ZSBnbG9iYWwgdmFyaWFibGVzLCBhbmQgdHJhbnNmZXJzIEV0aGVyIGJhY2sgdG8gdGhlIGNhbGxlci4KCWZ1bmN0aW9uIHdpdGhkcmF3KCkgcHVibGljIHsKCQkvLyBSZXRyaWV2ZSB0aGUgZGl2aWRlbmRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWRkcmVzcyB0aGUgcmVxdWVzdCBjYW1lIGZyb20uCgkJdmFyIGJhbGFuY2UgPSBkaXZpZGVuZHMobXNnLnNlbmRlcik7CgkJCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5LCBpbmNyZW1lbnRpbmcgdGhlIHJlcXVlc3QgYWRkcmVzcyBieSBgYmFsYW5jZWAuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIFNlbmQgdGhlIGRpdmlkZW5kcyB0byB0aGUgYWRkcmVzcyB0aGF0IHJlcXVlc3RlZCB0aGUgd2l0aGRyYXcuCgkJY29udHJhY3RCYWxhbmNlID0gc3ViKGNvbnRyYWN0QmFsYW5jZSwgYmFsYW5jZSk7CgkJbXNnLnNlbmRlci50cmFuc2ZlcihiYWxhbmNlKTsKCX0KCgkvLyBDb252ZXJ0cyB0aGUgRXRoZXIgYWNjcnVlZCBhcyBkaXZpZGVuZHMgYmFjayBpbnRvIEVQWSB0b2tlbnMgd2l0aG91dCBoYXZpbmcgdG8KCS8vIHdpdGhkcmF3IGl0IGZpcnN0LiBTYXZlcyBvbiBnYXMgYW5kIHBvdGVudGlhbCBwcmljZSBzcGlrZSBsb3NzLgoJZnVuY3Rpb24gcmVpbnZlc3REaXZpZGVuZHMoKSBwdWJsaWMgewoJCS8vIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhZGRyZXNzIHRoZSByZXF1ZXN0IGNhbWUgZnJvbS4KCQl2YXIgYmFsYW5jZSA9IGRpdmlkZW5kcyhtc2cuc2VuZGVyKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dHMgYXJyYXksIGluY3JlbWVudGluZyB0aGUgcmVxdWVzdCBhZGRyZXNzIGJ5IGBiYWxhbmNlYC4KCQkvLyBTaW5jZSB0aGlzIGlzIGVzc2VudGlhbGx5IGEgc2hvcnRjdXQgdG8gd2l0aGRyYXdpbmcgYW5kIHJlaW52ZXN0aW5nLCB0aGlzIHN0ZXAgc3RpbGwgaG9sZHMuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEFzc2lnbiBiYWxhbmNlIHRvIGEgbmV3IHZhcmlhYmxlLgoJCXVpbnQgdmFsdWVfID0gKHVpbnQpIChiYWxhbmNlKTsKCQkKCQkvLyBJZiB5b3VyIGRpdmlkZW5kcyBhcmUgd29ydGggbGVzcyB0aGFuIDEgc3phYm8sIG9yIG1vcmUgdGhhbiBhIG1pbGxpb24gRXRoZXIKCQkvLyAoaW4gd2hpY2ggY2FzZSwgd2h5IGFyZSB5b3UgZXZlbiBoZXJlKSwgYWJvcnQuCgkJaWYgKHZhbHVlXyA8IDAuMDAwMDAxIGV0aGVyIHx8IHZhbHVlXyA+IDEwMDAwMDAgZXRoZXIpCgkJCXJldmVydCgpOwoJCQkKCQkvLyBtc2cuc2VuZGVyIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSBjYWxsZXIuCgkJdmFyIHNlbmRlciA9IG1zZy5zZW5kZXI7CgkJCgkJLy8gQSB0ZW1wb3JhcnkgcmVzZXJ2ZSB2YXJpYWJsZSB1c2VkIGZvciBjYWxjdWxhdGluZyB0aGUgcmV3YXJkIHRoZSBob2xkZXIgZ2V0cyBmb3IgYnV5aW5nIHRva2Vucy4KCQkvLyAoWWVzLCB0aGUgYnV5ZXIgcmVjZWl2ZXMgYSBwYXJ0IG9mIHRoZSBkaXN0cmlidXRpb24gYXMgd2VsbCEpCgkJdmFyIHJlcyA9IHJlc2VydmUoKSAtIGJhbGFuY2U7CgoJCS8vIDEwJSBvZiB0aGUgdG90YWwgRXRoZXIgc2VudCBpcyB1c2VkIHRvIHBheSBleGlzdGluZyBob2xkZXJzLgoJCXZhciBmZWUgPSBkaXYodmFsdWVfLCAxMCk7CgkJCgkJLy8gVGhlIGFtb3VudCBvZiBFdGhlciB1c2VkIHRvIHB1cmNoYXNlIG5ldyB0b2tlbnMgZm9yIHRoZSBjYWxsZXIuCgkJdmFyIG51bUV0aGVyID0gdmFsdWVfIC0gZmVlOwoJCQoJCS8vIFRoZSBudW1iZXIgb2YgdG9rZW5zIHdoaWNoIGNhbiBiZSBwdXJjaGFzZWQgZm9yIG51bUV0aGVyLgoJCXZhciBudW1Ub2tlbnMgPSBjYWxjdWxhdGVEaXZpZGVuZFRva2VucyhudW1FdGhlciwgYmFsYW5jZSk7CgkJCgkJLy8gVGhlIGJ1eWVyIGZlZSwgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCQl2YXIgYnV5ZXJGZWUgPSBmZWUgKiBzY2FsZUZhY3RvcjsKCQkKCQkvLyBDaGVjayB0aGF0IHdlIGhhdmUgdG9rZW5zIGluIGV4aXN0ZW5jZSAodGhpcyBzaG91bGQgYWx3YXlzIGJlIHRydWUpLCBvcgoJCS8vIGVsc2UgeW91J3JlIGdvbm5hIGhhdmUgYSBiYWQgdGltZS4KCQlpZiAodG90YWxTdXBwbHkgPiAwKSB7CgkJCS8vIENvbXB1dGUgdGhlIGJvbnVzIGNvLWVmZmljaWVudCBmb3IgYWxsIGV4aXN0aW5nIGhvbGRlcnMgYW5kIHRoZSBidXllci4KCQkJLy8gVGhlIGJ1eWVyIHJlY2VpdmVzIHBhcnQgb2YgdGhlIGRpc3RyaWJ1dGlvbiBmb3IgZWFjaCB0b2tlbiBib3VnaHQgaW4gdGhlCgkJCS8vIHNhbWUgd2F5IHRoZXkgd291bGQgaGF2ZSBpZiB0aGV5IGJvdWdodCBlYWNoIHRva2VuIGluZGl2aWR1YWxseS4KCQkJdmFyIGJvbnVzQ29FZmYgPQoJCQkgICAgKHNjYWxlRmFjdG9yIC0gKHJlcyArIG51bUV0aGVyKSAqIG51bVRva2VucyAqIHNjYWxlRmFjdG9yIC8gKHRvdGFsU3VwcGx5ICsgbnVtVG9rZW5zKSAvIG51bUV0aGVyKQoJCQkgICAgKiAodWludCkoY3JyX2QpIC8gKHVpbnQpKGNycl9kLWNycl9uKTsKCQkJCQoJCQkvLyBUaGUgdG90YWwgcmV3YXJkIHRvIGJlIGRpc3RyaWJ1dGVkIGFtb25nc3QgdGhlIG1hc3NlcyBpcyB0aGUgZmVlIChpbiBFdGhlcikKCQkJLy8gbXVsdGlwbGllZCBieSB0aGUgYm9udXMgY28tZWZmaWNpZW50LgoJCQl2YXIgaG9sZGVyUmV3YXJkID0gZmVlICogYm9udXNDb0VmZjsKCQkJCgkJCWJ1eWVyRmVlIC09IGhvbGRlclJld2FyZDsKCgkJCS8vIEZlZSBpcyBkaXN0cmlidXRlZCB0byBhbGwgZXhpc3RpbmcgdG9rZW4gaG9sZGVycyBiZWZvcmUgdGhlIG5ldyB0b2tlbnMgYXJlIHB1cmNoYXNlZC4KCQkJLy8gcmV3YXJkUGVyU2hhcmUgaXMgdGhlIGFtb3VudCBnYWluZWQgcGVyIHRva2VuIHRoYW5rcyB0byB0aGlzIGJ1eS1pbi4KCQkJdmFyIHJld2FyZFBlclNoYXJlID0gaG9sZGVyUmV3YXJkIC8gdG90YWxTdXBwbHk7CgkJCQoJCQkvLyBUaGUgRXRoZXIgdmFsdWUgcGVyIHRva2VuIGlzIGluY3JlYXNlZCBwcm9wb3J0aW9uYWxseS4KCQkJZWFybmluZ3NQZXJUb2tlbiArPSByZXdhcmRQZXJTaGFyZTsKCQl9CgkJCgkJLy8gQWRkIHRoZSBudW1Ub2tlbnMgd2hpY2ggd2VyZSBqdXN0IGNyZWF0ZWQgdG8gdGhlIHRvdGFsIHN1cHBseS4gV2UncmUgYSBjcnlwdG8gY2VudHJhbCBiYW5rIQoJCXRvdGFsU3VwcGx5ID0gYWRkKHRvdGFsU3VwcGx5LCBudW1Ub2tlbnMpOwoJCQoJCS8vIEFzc2lnbiB0aGUgdG9rZW5zIHRvIHRoZSBiYWxhbmNlIG9mIHRoZSBidXllci4KCQl0b2tlbkJhbGFuY2Vbc2VuZGVyXSA9IGFkZCh0b2tlbkJhbGFuY2Vbc2VuZGVyXSwgbnVtVG9rZW5zKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dCBhcnJheSBzbyB0aGF0IHRoZSBidXllciBjYW5ub3QgY2xhaW0gZGl2aWRlbmRzIG9uIHByZXZpb3VzIHB1cmNoYXNlcy4KCQkvLyBBbHNvIGluY2x1ZGUgdGhlIGZlZSBwYWlkIGZvciBlbnRlcmluZyB0aGUgc2NoZW1lLgoJCS8vIEZpcnN0IHdlIGNvbXB1dGUgaG93IG11Y2ggd2FzIGp1c3QgcGFpZCBvdXQgdG8gdGhlIGJ1eWVyLi4uCgkJdmFyIHBheW91dERpZmYgID0gKGludDI1NikgKChlYXJuaW5nc1BlclRva2VuICogbnVtVG9rZW5zKSAtIGJ1eWVyRmVlKTsKCQkKCQkvLyBUaGVuIHdlIHVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSBmb3IgdGhlIGJ1eWVyIHdpdGggdGhpcyBhbW91bnQuLi4KCQlwYXlvdXRzW3NlbmRlcl0gKz0gcGF5b3V0RGlmZjsKCQkKCQkvLyBBbmQgdGhlbiB3ZSBmaW5hbGx5IGFkZCBpdCB0byB0aGUgdmFyaWFibGUgdHJhY2tpbmcgdGhlIHRvdGFsIGFtb3VudCBzcGVudCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyAgICArPSBwYXlvdXREaWZmOwoJCQoJfQoKCS8vIFNlbGxzIHlvdXIgdG9rZW5zIGZvciBFdGhlci4gVGhpcyBFdGhlciBpcyBhc3NpZ25lZCB0byB0aGUgY2FsbGVycyBlbnRyeQoJLy8gaW4gdGhlIHRva2VuQmFsYW5jZSBhcnJheSwgYW5kIHRoZXJlZm9yZSBpcyBzaG93biBhcyBhIGRpdmlkZW5kLiBBIHNlY29uZAoJLy8gY2FsbCB0byB3aXRoZHJhdygpIG11c3QgYmUgbWFkZSB0byBpbnZva2UgdGhlIHRyYW5zZmVyIG9mIEV0aGVyIGJhY2sgdG8geW91ciBhZGRyZXNzLgoJZnVuY3Rpb24gc2VsbE15VG9rZW5zKCkgcHVibGljIHsKCQl2YXIgYmFsYW5jZSA9IGJhbGFuY2VPZihtc2cuc2VuZGVyKTsKCQlzZWxsKGJhbGFuY2UpOwoJfQoKCS8vIFRoZSBzbGFtLXRoZS1idXR0b24gZXNjYXBlIGhhdGNoLiBTZWxscyB0aGUgY2FsbGVycyB0b2tlbnMgZm9yIEV0aGVyLCB0aGVuIGltbWVkaWF0ZWx5CgkvLyBpbnZva2VzIHRoZSB3aXRoZHJhdygpIGZ1bmN0aW9uLCBzZW5kaW5nIHRoZSByZXN1bHRpbmcgRXRoZXIgdG8gdGhlIGNhbGxlcnMgYWRkcmVzcy4KICAgIGZ1bmN0aW9uIGdldE1lT3V0T2ZIZXJlKCkgcHVibGljIHsKCQlzZWxsTXlUb2tlbnMoKTsKICAgICAgICB3aXRoZHJhdygpOwoJfQoJCgkvLyBHYXRla2VlcGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIHRoZSBhbW91bnQgb2YgRXRoZXIgYmVpbmcgc2VudCBpc24ndCBlaXRoZXIKCS8vIHRvbyBzbWFsbCBvciB0b28gbGFyZ2UuIElmIGl0IHBhc3NlcywgZ29lcyBkaXJlY3QgdG8gYnV5KCkuCglmdW5jdGlvbiBmdW5kKCkgcGF5YWJsZSBwdWJsaWMgewogIAogICAgcmVxdWlyZShibG9jay5udW1iZXIgPj0gZ2FtZVN0YXJ0QmxvY2spOyAgICAgICAgICAgICAgLy8gSWYgZ2FtZSBoYXMgbm90IHN0YXJ0ZWQgeWV0LCByZWZ1bmQgdGhlIG1vbmV5LgogICAgCgkJLy8gRG9uJ3QgYWxsb3cgZm9yIGZ1bmRpbmcgaWYgdGhlIGFtb3VudCBvZiBFdGhlciBzZW50IGlzIGxlc3MgdGhhbiAxIHN6YWJvLgoJCWlmIChtc2cudmFsdWUgPiAwLjAwMDAwMSBldGhlcikgewoJCQkvLyBMaW1pdCBmaXJzdCBidXllcnMgdG8gMC4xIGV0aGVyCgkJCWlmKCBpbml0aWFsRnVuZHMgPiAwICkgewoJCQkJaW5pdGlhbEZ1bmRzLS07CgkJCQlyZXF1aXJlKCBtc2cudmFsdWUgPD0gZmlyc3RCdXllckxpbWl0ICk7CgkJCX0KCQkgICAgY29udHJhY3RCYWxhbmNlID0gYWRkKGNvbnRyYWN0QmFsYW5jZSwgbXNnLnZhbHVlKTsKCQkJYnV5KCk7CgkJfSBlbHNlIHsKCQkJcmV2ZXJ0KCk7CgkJfQogICAgfQoKCS8vIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgKGR5bmFtaWMpIHByaWNlIG9mIGJ1eWluZyBhIGZpbm5leSB3b3J0aCBvZiB0b2tlbnMuCglmdW5jdGlvbiBidXlQcmljZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CgkJcmV0dXJuIGdldFRva2Vuc0ZvckV0aGVyKDEgZmlubmV5KTsKCX0KCgkvLyBGdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIChkeW5hbWljKSBwcmljZSBvZiBzZWxsaW5nIGEgc2luZ2xlIHRva2VuLgoJZnVuY3Rpb24gc2VsbFByaWNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICB2YXIgZXRoID0gZ2V0RXRoZXJGb3JUb2tlbnMoMSBmaW5uZXkpOwogICAgICAgIHZhciBmZWUgPSBkaXYoZXRoLCAxMCk7CiAgICAgICAgcmV0dXJuIGV0aCAtIGZlZTsKICAgIH0KCgkvLyBDYWxjdWxhdGUgdGhlIGN1cnJlbnQgZGl2aWRlbmRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgY2FsbGVyIGFkZHJlc3MuIFRoaXMgaXMgdGhlIG5ldCByZXN1bHQKCS8vIG9mIG11bHRpcGx5aW5nIHRoZSBudW1iZXIgb2YgdG9rZW5zIGhlbGQgYnkgdGhlaXIgY3VycmVudCB2YWx1ZSBpbiBFdGhlciBhbmQgc3VidHJhY3RpbmcgdGhlCgkvLyBFdGhlciB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gcGFpZCBvdXQuCglmdW5jdGlvbiBkaXZpZGVuZHMoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGFtb3VudCkgewoJCXJldHVybiAodWludDI1NikgKChpbnQyNTYpKGVhcm5pbmdzUGVyVG9rZW4gKiB0b2tlbkJhbGFuY2VbX293bmVyXSkgLSBwYXlvdXRzW19vd25lcl0pIC8gc2NhbGVGYWN0b3I7Cgl9CgoJLy8gVmVyc2lvbiBvZiB3aXRoZHJhdyB0aGF0IGV4dHJhY3RzIHRoZSBkaXZpZGVuZHMgYW5kIHNlbmRzIHRoZSBFdGhlciB0byB0aGUgY2FsbGVyLgoJLy8gVGhpcyBpcyBvbmx5IHVzZWQgaW4gdGhlIGNhc2Ugd2hlbiB0aGVyZSBpcyBubyB0cmFuc2FjdGlvbiBkYXRhLCBhbmQgdGhhdCBzaG91bGQgYmUKCS8vIHF1aXRlIHJhcmUgdW5sZXNzIGludGVyYWN0aW5nIGRpcmVjdGx5IHdpdGggdGhlIHNtYXJ0IGNvbnRyYWN0LgoJZnVuY3Rpb24gd2l0aGRyYXdPbGQoYWRkcmVzcyB0bykgcHVibGljIHsKCQkvLyBSZXRyaWV2ZSB0aGUgZGl2aWRlbmRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWRkcmVzcyB0aGUgcmVxdWVzdCBjYW1lIGZyb20uCgkJdmFyIGJhbGFuY2UgPSBkaXZpZGVuZHMobXNnLnNlbmRlcik7CgkJCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5LCBpbmNyZW1lbnRpbmcgdGhlIHJlcXVlc3QgYWRkcmVzcyBieSBgYmFsYW5jZWAuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCWNvbnRyYWN0QmFsYW5jZSA9IHN1Yihjb250cmFjdEJhbGFuY2UsIGJhbGFuY2UpOwoJCS8vIFNlbmQgdGhlIGRpdmlkZW5kcyB0byB0aGUgYWRkcmVzcyB0aGF0IHJlcXVlc3RlZCB0aGUgd2l0aGRyYXcuCgkJdG8udHJhbnNmZXIoYmFsYW5jZSk7CQkKCX0KCgkvLyBJbnRlcm5hbCBiYWxhbmNlIGZ1bmN0aW9uLCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgZHluYW1pYyByZXNlcnZlIHZhbHVlLgoJZnVuY3Rpb24gYmFsYW5jZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW1vdW50KSB7CgkJLy8gbXNnLnZhbHVlIGlzIHRoZSBhbW91bnQgb2YgRXRoZXIgc2VudCBieSB0aGUgdHJhbnNhY3Rpb24uCgkJcmV0dXJuIGNvbnRyYWN0QmFsYW5jZSAtIG1zZy52YWx1ZTsKCX0KCglmdW5jdGlvbiBidXkoKSBpbnRlcm5hbCB7CgkJLy8gQW55IHRyYW5zYWN0aW9uIG9mIGxlc3MgdGhhbiAxIHN6YWJvIGlzIGxpa2VseSB0byBiZSB3b3J0aCBsZXNzIHRoYW4gdGhlIGdhcyB1c2VkIHRvIHNlbmQgaXQuCgkJaWYgKG1zZy52YWx1ZSA8IDAuMDAwMDAxIGV0aGVyIHx8IG1zZy52YWx1ZSA+IDEwMDAwMDAgZXRoZXIpCgkJCXJldmVydCgpOwoJCQkJCQkKCQkvLyBtc2cuc2VuZGVyIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSBjYWxsZXIuCgkJdmFyIHNlbmRlciA9IG1zZy5zZW5kZXI7CgkJCgkJLy8gMTAlIG9mIHRoZSB0b3RhbCBFdGhlciBzZW50IGlzIHVzZWQgdG8gcGF5IGV4aXN0aW5nIGhvbGRlcnMuCgkJdmFyIGZlZSA9IGRpdihtc2cudmFsdWUsIDEwKTsKCQkKCQkvLyBUaGUgYW1vdW50IG9mIEV0aGVyIHVzZWQgdG8gcHVyY2hhc2UgbmV3IHRva2VucyBmb3IgdGhlIGNhbGxlci4KCQl2YXIgbnVtRXRoZXIgPSBtc2cudmFsdWUgLSBmZWU7CgkJCgkJLy8gVGhlIG51bWJlciBvZiB0b2tlbnMgd2hpY2ggY2FuIGJlIHB1cmNoYXNlZCBmb3IgbnVtRXRoZXIuCgkJdmFyIG51bVRva2VucyA9IGdldFRva2Vuc0ZvckV0aGVyKG51bUV0aGVyKTsKCQkKCQkvLyBUaGUgYnV5ZXIgZmVlLCBzY2FsZWQgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJCXZhciBidXllckZlZSA9IGZlZSAqIHNjYWxlRmFjdG9yOwoJCQoJCS8vIENoZWNrIHRoYXQgd2UgaGF2ZSB0b2tlbnMgaW4gZXhpc3RlbmNlICh0aGlzIHNob3VsZCBhbHdheXMgYmUgdHJ1ZSksIG9yCgkJLy8gZWxzZSB5b3UncmUgZ29ubmEgaGF2ZSBhIGJhZCB0aW1lLgoJCWlmICh0b3RhbFN1cHBseSA+IDApIHsKCQkJLy8gQ29tcHV0ZSB0aGUgYm9udXMgY28tZWZmaWNpZW50IGZvciBhbGwgZXhpc3RpbmcgaG9sZGVycyBhbmQgdGhlIGJ1eWVyLgoJCQkvLyBUaGUgYnV5ZXIgcmVjZWl2ZXMgcGFydCBvZiB0aGUgZGlzdHJpYnV0aW9uIGZvciBlYWNoIHRva2VuIGJvdWdodCBpbiB0aGUKCQkJLy8gc2FtZSB3YXkgdGhleSB3b3VsZCBoYXZlIGlmIHRoZXkgYm91Z2h0IGVhY2ggdG9rZW4gaW5kaXZpZHVhbGx5LgoJCQl2YXIgYm9udXNDb0VmZiA9CgkJCSAgICAoc2NhbGVGYWN0b3IgLSAocmVzZXJ2ZSgpICsgbnVtRXRoZXIpICogbnVtVG9rZW5zICogc2NhbGVGYWN0b3IgLyAodG90YWxTdXBwbHkgKyBudW1Ub2tlbnMpIC8gbnVtRXRoZXIpCgkJCSAgICAqICh1aW50KShjcnJfZCkgLyAodWludCkoY3JyX2QtY3JyX24pOwoJCQkJCgkJCS8vIFRoZSB0b3RhbCByZXdhcmQgdG8gYmUgZGlzdHJpYnV0ZWQgYW1vbmdzdCB0aGUgbWFzc2VzIGlzIHRoZSBmZWUgKGluIEV0aGVyKQoJCQkvLyBtdWx0aXBsaWVkIGJ5IHRoZSBib251cyBjby1lZmZpY2llbnQuCgkJCXZhciBob2xkZXJSZXdhcmQgPSBmZWUgKiBib251c0NvRWZmOwoJCQkKCQkJYnV5ZXJGZWUgLT0gaG9sZGVyUmV3YXJkOwoKCQkJLy8gRmVlIGlzIGRpc3RyaWJ1dGVkIHRvIGFsbCBleGlzdGluZyB0b2tlbiBob2xkZXJzIGJlZm9yZSB0aGUgbmV3IHRva2VucyBhcmUgcHVyY2hhc2VkLgoJCQkvLyByZXdhcmRQZXJTaGFyZSBpcyB0aGUgYW1vdW50IGdhaW5lZCBwZXIgdG9rZW4gdGhhbmtzIHRvIHRoaXMgYnV5LWluLgoJCQl2YXIgcmV3YXJkUGVyU2hhcmUgPSBob2xkZXJSZXdhcmQgLyB0b3RhbFN1cHBseTsKCQkJCgkJCS8vIFRoZSBFdGhlciB2YWx1ZSBwZXIgdG9rZW4gaXMgaW5jcmVhc2VkIHByb3BvcnRpb25hbGx5LgoJCQllYXJuaW5nc1BlclRva2VuICs9IHJld2FyZFBlclNoYXJlOwoJCQkKCQl9CgoJCS8vIEFkZCB0aGUgbnVtVG9rZW5zIHdoaWNoIHdlcmUganVzdCBjcmVhdGVkIHRvIHRoZSB0b3RhbCBzdXBwbHkuIFdlJ3JlIGEgY3J5cHRvIGNlbnRyYWwgYmFuayEKCQl0b3RhbFN1cHBseSA9IGFkZCh0b3RhbFN1cHBseSwgbnVtVG9rZW5zKTsKCgkJLy8gQXNzaWduIHRoZSB0b2tlbnMgdG8gdGhlIGJhbGFuY2Ugb2YgdGhlIGJ1eWVyLgoJCXRva2VuQmFsYW5jZVtzZW5kZXJdID0gYWRkKHRva2VuQmFsYW5jZVtzZW5kZXJdLCBudW1Ub2tlbnMpOwoKCQkvLyBVcGRhdGUgdGhlIHBheW91dCBhcnJheSBzbyB0aGF0IHRoZSBidXllciBjYW5ub3QgY2xhaW0gZGl2aWRlbmRzIG9uIHByZXZpb3VzIHB1cmNoYXNlcy4KCQkvLyBBbHNvIGluY2x1ZGUgdGhlIGZlZSBwYWlkIGZvciBlbnRlcmluZyB0aGUgc2NoZW1lLgoJCS8vIEZpcnN0IHdlIGNvbXB1dGUgaG93IG11Y2ggd2FzIGp1c3QgcGFpZCBvdXQgdG8gdGhlIGJ1eWVyLi4uCgkJdmFyIHBheW91dERpZmYgPSAoaW50MjU2KSAoKGVhcm5pbmdzUGVyVG9rZW4gKiBudW1Ub2tlbnMpIC0gYnV5ZXJGZWUpOwoJCQoJCS8vIFRoZW4gd2UgdXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5IGZvciB0aGUgYnV5ZXIgd2l0aCB0aGlzIGFtb3VudC4uLgoJCXBheW91dHNbc2VuZGVyXSArPSBwYXlvdXREaWZmOwoJCQoJCS8vIEFuZCB0aGVuIHdlIGZpbmFsbHkgYWRkIGl0IHRvIHRoZSB2YXJpYWJsZSB0cmFja2luZyB0aGUgdG90YWwgYW1vdW50IHNwZW50IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICAgICs9IHBheW91dERpZmY7CgkJCgl9CgoJLy8gU2VsbCBmdW5jdGlvbiB0aGF0IHRha2VzIHRva2VucyBhbmQgY29udmVydHMgdGhlbSBpbnRvIEV0aGVyLiBBbHNvIGNvbWVzIHdpdGggYSAxMCUgZmVlCgkvLyB0byBkaXNjb3VyYWdpbmcgZHVtcGluZywgYW5kIG1lYW5zIHRoYXQgaWYgc29tZW9uZSBuZWFyIHRoZSB0b3Agc2VsbHMsIHRoZSBmZWUgZGlzdHJpYnV0ZWQKCS8vIHdpbGwgYmUgKnNpZ25pZmljYW50Ki4KCWZ1bmN0aW9uIHNlbGwodWludDI1NiBhbW91bnQpIGludGVybmFsIHsKCSAgICAvLyBDYWxjdWxhdGUgdGhlIGFtb3VudCBvZiBFdGhlciB0aGF0IHRoZSBob2xkZXJzIHRva2VucyBzZWxsIGZvciBhdCB0aGUgY3VycmVudCBzZWxsIHByaWNlLgoJCXZhciBudW1FdGhlcnNCZWZvcmVGZWUgPSBnZXRFdGhlckZvclRva2VucyhhbW91bnQpOwoJCQoJCS8vIDEwJSBvZiB0aGUgcmVzdWx0aW5nIEV0aGVyIGlzIHVzZWQgdG8gcGF5IHJlbWFpbmluZyBob2xkZXJzLgogICAgICAgIHZhciBmZWUgPSBkaXYobnVtRXRoZXJzQmVmb3JlRmVlLCAxMCk7CgkJCgkJLy8gTmV0IEV0aGVyIGZvciB0aGUgc2VsbGVyIGFmdGVyIHRoZSBmZWUgaGFzIGJlZW4gc3VidHJhY3RlZC4KICAgICAgICB2YXIgbnVtRXRoZXJzID0gbnVtRXRoZXJzQmVmb3JlRmVlIC0gZmVlOwoJCQoJCS8vICpSZW1vdmUqIHRoZSBudW1Ub2tlbnMgd2hpY2ggd2VyZSBqdXN0IHNvbGQgZnJvbSB0aGUgdG90YWwgc3VwcGx5LiBXZSdyZSAvZGVmaW5pdGVseS8gYSBjcnlwdG8gY2VudHJhbCBiYW5rLgoJCXRvdGFsU3VwcGx5ID0gc3ViKHRvdGFsU3VwcGx5LCBhbW91bnQpOwoJCQogICAgICAgIC8vIFJlbW92ZSB0aGUgdG9rZW5zIGZyb20gdGhlIGJhbGFuY2Ugb2YgdGhlIGJ1eWVyLgoJCXRva2VuQmFsYW5jZVttc2cuc2VuZGVyXSA9IHN1Yih0b2tlbkJhbGFuY2VbbXNnLnNlbmRlcl0sIGFtb3VudCk7CgogICAgICAgIC8vIFVwZGF0ZSB0aGUgcGF5b3V0IGFycmF5IHNvIHRoYXQgdGhlIHNlbGxlciBjYW5ub3QgY2xhaW0gZnV0dXJlIGRpdmlkZW5kcyB1bmxlc3MgdGhleSBidXkgYmFjayBpbi4KCQkvLyBGaXJzdCB3ZSBjb21wdXRlIGhvdyBtdWNoIHdhcyBqdXN0IHBhaWQgb3V0IHRvIHRoZSBzZWxsZXIuLi4KCQl2YXIgcGF5b3V0RGlmZiA9IChpbnQyNTYpIChlYXJuaW5nc1BlclRva2VuICogYW1vdW50ICsgKG51bUV0aGVycyAqIHNjYWxlRmFjdG9yKSk7CgkJCiAgICAgICAgLy8gV2UgcmVkdWNlIHRoZSBhbW91bnQgcGFpZCBvdXQgdG8gdGhlIHNlbGxlciAodGhpcyBlZmZlY3RpdmVseSByZXNldHMgdGhlaXIgcGF5b3V0cyB2YWx1ZSB0byB6ZXJvLAoJCS8vIHNpbmNlIHRoZXkncmUgc2VsbGluZyBhbGwgb2YgdGhlaXIgdG9rZW5zKS4gVGhpcyBtYWtlcyBzdXJlIHRoZSBzZWxsZXIgaXNuJ3QgZGlzYWR2YW50YWdlZCBpZgoJCS8vIHRoZXkgZGVjaWRlIHRvIGJ1eSBiYWNrIGluLgoJCXBheW91dHNbbXNnLnNlbmRlcl0gLT0gcGF5b3V0RGlmZjsJCQoJCQoJCS8vIERlY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KICAgICAgICB0b3RhbFBheW91dHMgLT0gcGF5b3V0RGlmZjsKCQkKCQkvLyBDaGVjayB0aGF0IHdlIGhhdmUgdG9rZW5zIGluIGV4aXN0ZW5jZSAodGhpcyBpcyBhIGJpdCBvZiBhbiBpcnJlbGV2YW50IGNoZWNrIHNpbmNlIHdlJ3JlCgkJLy8gc2VsbGluZyB0b2tlbnMsIGJ1dCBpdCBndWFyZHMgYWdhaW5zdCBkaXZpc2lvbiBieSB6ZXJvKS4KCQlpZiAodG90YWxTdXBwbHkgPiAwKSB7CgkJCS8vIFNjYWxlIHRoZSBFdGhlciB0YWtlbiBhcyB0aGUgc2VsbGluZyBmZWUgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJCQl2YXIgZXRoZXJGZWUgPSBmZWUgKiBzY2FsZUZhY3RvcjsKCQkJCgkJCS8vIEZlZSBpcyBkaXN0cmlidXRlZCB0byBhbGwgcmVtYWluaW5nIHRva2VuIGhvbGRlcnMuCgkJCS8vIHJld2FyZFBlclNoYXJlIGlzIHRoZSBhbW91bnQgZ2FpbmVkIHBlciB0b2tlbiB0aGFua3MgdG8gdGhpcyBzZWxsLgoJCQl2YXIgcmV3YXJkUGVyU2hhcmUgPSBldGhlckZlZSAvIHRvdGFsU3VwcGx5OwoJCQkKCQkJLy8gVGhlIEV0aGVyIHZhbHVlIHBlciB0b2tlbiBpcyBpbmNyZWFzZWQgcHJvcG9ydGlvbmFsbHkuCgkJCWVhcm5pbmdzUGVyVG9rZW4gPSBhZGQoZWFybmluZ3NQZXJUb2tlbiwgcmV3YXJkUGVyU2hhcmUpOwoJCX0KCX0KCQoJLy8gRHluYW1pYyB2YWx1ZSBvZiBFdGhlciBpbiByZXNlcnZlLCBhY2NvcmRpbmcgdG8gdGhlIENSUiByZXF1aXJlbWVudC4KCWZ1bmN0aW9uIHJlc2VydmUoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGFtb3VudCkgewoJCXJldHVybiBzdWIoYmFsYW5jZSgpLAoJCQkgKCh1aW50MjU2KSAoKGludDI1NikgKGVhcm5pbmdzUGVyVG9rZW4gKiB0b3RhbFN1cHBseSkgLSB0b3RhbFBheW91dHMpIC8gc2NhbGVGYWN0b3IpKTsKCX0KCgkvLyBDYWxjdWxhdGVzIHRoZSBudW1iZXIgb2YgdG9rZW5zIHRoYXQgY2FuIGJlIGJvdWdodCBmb3IgYSBnaXZlbiBhbW91bnQgb2YgRXRoZXIsIGFjY29yZGluZyB0byB0aGUKCS8vIGR5bmFtaWMgcmVzZXJ2ZSBhbmQgdG90YWxTdXBwbHkgdmFsdWVzIChkZXJpdmVkIGZyb20gdGhlIGJ1eSBhbmQgc2VsbCBwcmljZXMpLgoJZnVuY3Rpb24gZ2V0VG9rZW5zRm9yRXRoZXIodWludDI1NiBldGhlcnZhbHVlKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b2tlbnMpIHsKCQlyZXR1cm4gc3ViKGZpeGVkRXhwKGZpeGVkTG9nKHJlc2VydmUoKSArIGV0aGVydmFsdWUpKmNycl9uL2Nycl9kICsgcHJpY2VfY29lZmYpLCB0b3RhbFN1cHBseSk7Cgl9CgoJLy8gU2VtYW50aWNhbGx5IHNpbWlsYXIgdG8gZ2V0VG9rZW5zRm9yRXRoZXIsIGJ1dCBzdWJ0cmFjdHMgdGhlIGNhbGxlcnMgYmFsYW5jZSBmcm9tIHRoZSBhbW91bnQgb2YgRXRoZXIgcmV0dXJuZWQgZm9yIGNvbnZlcnNpb24uCglmdW5jdGlvbiBjYWxjdWxhdGVEaXZpZGVuZFRva2Vucyh1aW50MjU2IGV0aGVydmFsdWUsIHVpbnQyNTYgc3VidmFsdWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2VucykgewoJCXJldHVybiBzdWIoZml4ZWRFeHAoZml4ZWRMb2cocmVzZXJ2ZSgpIC0gc3VidmFsdWUgKyBldGhlcnZhbHVlKSpjcnJfbi9jcnJfZCArIHByaWNlX2NvZWZmKSwgdG90YWxTdXBwbHkpOwoJfQoKCS8vIENvbnZlcnRzIGEgbnVtYmVyIHRva2VucyBpbnRvIGFuIEV0aGVyIHZhbHVlLgoJZnVuY3Rpb24gZ2V0RXRoZXJGb3JUb2tlbnModWludDI1NiB0b2tlbnMpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGV0aGVydmFsdWUpIHsKCQkvLyBIb3cgbXVjaCByZXNlcnZlIEV0aGVyIGRvIHdlIGhhdmUgbGVmdCBpbiB0aGUgY29udHJhY3Q/CgkJdmFyIHJlc2VydmVBbW91bnQgPSByZXNlcnZlKCk7CgoJCS8vIElmIHlvdSdyZSB0aGUgSGlnaGxhbmRlciAob3IgYmFnaG9sZGVyKSwgeW91IGdldCBUaGUgUHJpemUuIEV2ZXJ5dGhpbmcgbGVmdCBpbiB0aGUgdmF1bHQuCgkJaWYgKHRva2VucyA9PSB0b3RhbFN1cHBseSkKCQkJcmV0dXJuIHJlc2VydmVBbW91bnQ7CgoJCS8vIElmIHRoZXJlIHdvdWxkIGJlIGV4Y2VzcyBFdGhlciBsZWZ0IGFmdGVyIHRoZSB0cmFuc2FjdGlvbiB0aGlzIGlzIGNhbGxlZCB3aXRoaW4sIHJldHVybiB0aGUgRXRoZXIKCQkvLyBjb3JyZXNwb25kaW5nIHRvIHRoZSBlcXVhdGlvbiBpbiBEciBKb2NoZW4gSG9lbmlja2UncyBvcmlnaW5hbCBQb256aSBwYXBlciwgd2hpY2ggY2FuIGJlIGZvdW5kCgkJLy8gYXQgaHR0cHM6Ly90ZXN0LmpvY2hlbi1ob2VuaWNrZS5kZS9ldGgvcG9ueml0b2tlbi8gaW4gdGhlIHRoaXJkIGVxdWF0aW9uLCB3aXRoIHRoZSBDUlIgbnVtZXJhdG9yIAoJCS8vIGFuZCBkZW5vbWluYXRvciBhbHRlcmVkIHRvIDEgYW5kIDIgcmVzcGVjdGl2ZWx5LgoJCXJldHVybiBzdWIocmVzZXJ2ZUFtb3VudCwgZml4ZWRFeHAoKGZpeGVkTG9nKHRvdGFsU3VwcGx5IC0gdG9rZW5zKSAtIHByaWNlX2NvZWZmKSAqIGNycl9kL2Nycl9uKSk7Cgl9CgoJLy8gWW91IGRvbid0IGNhcmUgYWJvdXQgdGhlc2UsIGJ1dCBpZiB5b3UgcmVhbGx5IGRvIHRoZXkncmUgaGV4IHZhbHVlcyBmb3IgCgkvLyBjby1lZmZpY2llbnRzIHVzZWQgdG8gc2ltdWxhdGUgYXBwcm94aW1hdGlvbnMgb2YgdGhlIGxvZyBhbmQgZXhwIGZ1bmN0aW9ucy4KCWludDI1NiAgY29uc3RhbnQgb25lICAgICAgICA9IDB4MTAwMDAwMDAwMDAwMDAwMDA7Cgl1aW50MjU2IGNvbnN0YW50IHNxcnQyICAgICAgPSAweDE2YTA5ZTY2N2YzYmNjOTA4OwoJdWludDI1NiBjb25zdGFudCBzcXJ0ZG90NSAgID0gMHgwYjUwNGYzMzNmOWRlNjQ4NDsKCWludDI1NiAgY29uc3RhbnQgbG4yICAgICAgICA9IDB4MGIxNzIxN2Y3ZDFjZjc5YWM7CglpbnQyNTYgIGNvbnN0YW50IGxuMl82NGRvdDUgPSAweDJjYjUzZjA5ZjA1Y2M2MjdjODsKCWludDI1NiAgY29uc3RhbnQgYzEgICAgICAgICA9IDB4MWZmZmZmZmZmZmY5ZGFjOWI7CglpbnQyNTYgIGNvbnN0YW50IGMzICAgICAgICAgPSAweDBhYWFhYWFhYzE2ODc3OTA4OwoJaW50MjU2ICBjb25zdGFudCBjNSAgICAgICAgID0gMHgwNjY2NjY0ZTVlOWZhMGM5OTsKCWludDI1NiAgY29uc3RhbnQgYzcgICAgICAgICA9IDB4MDQ5MjU0MDI2YTc2MzBhY2Y7CglpbnQyNTYgIGNvbnN0YW50IGM5ICAgICAgICAgPSAweDAzOGJkNzVlZDM3NzUzZDY4OwoJaW50MjU2ICBjb25zdGFudCBjMTEgICAgICAgID0gMHgwMzI4NGEwYzE0NjEwOTI0ZjsKCgkvLyBUaGUgcG9seW5vbWlhbCBSID0gYzEqeCArIGMzKnheMyArIC4uLiArIGMxMSAqIHheMTEKCS8vIGFwcHJveGltYXRlcyB0aGUgZnVuY3Rpb24gbG9nKDEreCktbG9nKDEteCkKCS8vIEhlbmNlIFIocykgPSBsb2coKDErcykvKDEtcykpID0gbG9nKGEpCglmdW5jdGlvbiBmaXhlZExvZyh1aW50MjU2IGEpIGludGVybmFsIHB1cmUgcmV0dXJucyAoaW50MjU2IGxvZykgewoJCWludDMyIHNjYWxlID0gMDsKCQl3aGlsZSAoYSA+IHNxcnQyKSB7CgkJCWEgLz0gMjsKCQkJc2NhbGUrKzsKCQl9CgkJd2hpbGUgKGEgPD0gc3FydGRvdDUpIHsKCQkJYSAqPSAyOwoJCQlzY2FsZS0tOwoJCX0KCQlpbnQyNTYgcyA9ICgoKGludDI1NikoYSkgLSBvbmUpICogb25lKSAvICgoaW50MjU2KShhKSArIG9uZSk7CgkJdmFyIHogPSAocypzKSAvIG9uZTsKCQlyZXR1cm4gc2NhbGUgKiBsbjIgKwoJCQkocyooYzEgKyAoeiooYzMgKyAoeiooYzUgKyAoeiooYzcgKyAoeiooYzkgKyAoeipjMTEvb25lKSkKCQkJCS9vbmUpKS9vbmUpKS9vbmUpKS9vbmUpKS9vbmUpOwoJfQoKCWludDI1NiBjb25zdGFudCBjMiA9ICAweDAyYWFhYWFhYWFhMDE1ZGIwOwoJaW50MjU2IGNvbnN0YW50IGM0ID0gLTB4MDAwYjYwYjYwODA4Mzk5ZDE7CglpbnQyNTYgY29uc3RhbnQgYzYgPSAgMHgwMDAwNDU1OTU2YmNjZGQwNjsKCWludDI1NiBjb25zdGFudCBjOCA9IC0weDAwMDAwMWI4OTNhZDA0YjNhOwoJCgkvLyBUaGUgcG9seW5vbWlhbCBSID0gMiArIGMyKnheMiArIGM0KnheNCArIC4uLgoJLy8gYXBwcm94aW1hdGVzIHRoZSBmdW5jdGlvbiB4KihleHAoeCkrMSkvKGV4cCh4KS0xKQoJLy8gSGVuY2UgZXhwKHgpID0gKFIoeCkreCkvKFIoeCkteCkKCWZ1bmN0aW9uIGZpeGVkRXhwKGludDI1NiBhKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYgZXhwKSB7CgkJaW50MjU2IHNjYWxlID0gKGEgKyAobG4yXzY0ZG90NSkpIC8gbG4yIC0gNjQ7CgkJYSAtPSBzY2FsZSpsbjI7CgkJaW50MjU2IHogPSAoYSphKSAvIG9uZTsKCQlpbnQyNTYgUiA9ICgoaW50MjU2KSgyKSAqIG9uZSkgKwoJCQkoeiooYzIgKyAoeiooYzQgKyAoeiooYzYgKyAoeipjOC9vbmUpKS9vbmUpKS9vbmUpKS9vbmUpOwoJCWV4cCA9ICh1aW50MjU2KSAoKChSICsgYSkgKiBvbmUpIC8gKFIgLSBhKSk7CgkJaWYgKHNjYWxlID49IDApCgkJCWV4cCA8PD0gc2NhbGU7CgkJZWxzZQoJCQlleHAgPj49IC1zY2FsZTsKCQlyZXR1cm4gZXhwOwoJfQoJCgkvLyBUaGUgYmVsb3cgYXJlIHNhZmVtYXRoIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgZm91ciBhcml0aG1ldGljIG9wZXJhdG9ycwoJLy8gZGVzaWduZWQgdG8gZXhwbGljaXRseSBwcmV2ZW50IG92ZXItIGFuZCB1bmRlci1mbG93cyBvZiBpbnRlZ2VyIHZhbHVlcy4KCglmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCWlmIChhID09IDApIHsKCQkJcmV0dXJuIDA7CgkJfQoJCXVpbnQyNTYgYyA9IGEgKiBiOwoJCWFzc2VydChjIC8gYSA9PSBiKTsKCQlyZXR1cm4gYzsKCX0KCglmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCS8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAoJCXVpbnQyNTYgYyA9IGEgLyBiOwoJCS8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCgkJcmV0dXJuIGM7Cgl9CgoJZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCQlhc3NlcnQoYiA8PSBhKTsKCQlyZXR1cm4gYSAtIGI7Cgl9CgoJZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCQl1aW50MjU2IGMgPSBhICsgYjsKCQlhc3NlcnQoYyA+PSBhKTsKCQlyZXR1cm4gYzsKCX0KCgkvLyBUaGlzIGFsbG93cyB5b3UgdG8gYnV5IHRva2VucyBieSBzZW5kaW5nIEV0aGVyIGRpcmVjdGx5IHRvIHRoZSBzbWFydCBjb250cmFjdAoJLy8gd2l0aG91dCBpbmNsdWRpbmcgYW55IHRyYW5zYWN0aW9uIGRhdGEgKHVzZWZ1bCBmb3IsIHNheSwgbW9iaWxlIHdhbGxldCBhcHBzKS4KCWZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKCQkvLyBtc2cudmFsdWUgaXMgdGhlIGFtb3VudCBvZiBFdGhlciBzZW50IGJ5IHRoZSB0cmFuc2FjdGlvbi4KCQlpZiAobXNnLnZhbHVlID4gMCkgewoJCQlmdW5kKCk7CgkJfSBlbHNlIHsKCQkJd2l0aGRyYXdPbGQobXNnLnNlbmRlcik7CgkJfQoJfQp9'.
	

]
