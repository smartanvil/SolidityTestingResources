Class {
	#name : #SRT4fdb91dbce6cee2e08cf85d26eaa3e9bca0c12fe,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4fdb91dbce6cee2e08cf85d26eaa3e9bca0c12fe >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgoKCmNvbnRyYWN0IFVuaWNvcm5NYW5hZ2VtZW50SW50ZXJmYWNlIHsKCiAgICBmdW5jdGlvbiBvd25lckFkZHJlc3MoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gbWFuYWdlckFkZHJlc3MoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gY29tbXVuaXR5QWRkcmVzcygpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyk7CiAgICBmdW5jdGlvbiBkaXZpZGVuZE1hbmFnZXJBZGRyZXNzKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIHdhbGxldEFkZHJlc3MoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gYmxhY2tCb3hBZGRyZXNzKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIHVuaWNvcm5CcmVlZGluZ0FkZHJlc3MoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gZ2VuZUxhYkFkZHJlc3MoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gdW5pY29yblRva2VuQWRkcmVzcygpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyk7CiAgICBmdW5jdGlvbiBjYW5keVRva2VuKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIGNhbmR5UG93ZXJUb2tlbigpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyk7CgogICAgZnVuY3Rpb24gY3JlYXRlRGl2aWRlbmRQZXJjZW50KCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIHNlbGxEaXZpZGVuZFBlcmNlbnQoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gc3ViRnJlZXppbmdQcmljZSgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiBzdWJGcmVlemluZ1RpbWUoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQ2NCk7CiAgICBmdW5jdGlvbiBzdWJUb3VyRnJlZXppbmdQcmljZSgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiBzdWJUb3VyRnJlZXppbmdUaW1lKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50NjQpOwogICAgZnVuY3Rpb24gY3JlYXRlVW5pY29yblByaWNlKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIGNyZWF0ZVVuaWNvcm5QcmljZUluQ2FuZHkoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gb3JhY2xpemVGZWUoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQpOwoKICAgIGZ1bmN0aW9uIHBhdXNlZCgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCk7CiAgICAvLyAgICBmdW5jdGlvbiBsb2NrZWQoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpOwoKICAgIGZ1bmN0aW9uIGlzVG91cm5hbWVudChhZGRyZXNzIF90b3VybmFtZW50QWRkcmVzcykgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChib29sKTsKCiAgICBmdW5jdGlvbiBnZXRDcmVhdGVVbmljb3JuRnVsbFByaWNlKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIGdldEh5YnJpZGl6YXRpb25GdWxsUHJpY2UodWludCBfcHJpY2UpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiBnZXRTZWxsVW5pY29ybkZ1bGxQcmljZSh1aW50IF9wcmljZSkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIGdldENyZWF0ZVVuaWNvcm5GdWxsUHJpY2VJbkNhbmR5KCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50KTsKCgogICAgLy9zZXJ2aWNlCiAgICBmdW5jdGlvbiByZWdpc3RlckluaXQoYWRkcmVzcyBfY29udHJhY3QpIGV4dGVybmFsOwoKfQoKY29udHJhY3QgRVJDMjAgewogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKfQoKY29udHJhY3QgRGl2aWRlbmRNYW5hZ2VySW50ZXJmYWNlIHsKICAgIGZ1bmN0aW9uIHBheURpdmlkZW5kKCkgZXh0ZXJuYWwgcGF5YWJsZTsKfQoKY29udHJhY3QgQmxhY2tCb3hJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gY3JlYXRlR2VuMCh1aW50IF91bmljb3JuSWQpIHB1YmxpYyBwYXlhYmxlOwogICAgZnVuY3Rpb24gZ2VuZUNvcmUodWludCBfY2hpbGRVbmljb3JuSWQsIHVpbnQgX3BhcmVudDFVbmljb3JuSWQsIHVpbnQgX3BhcmVudDJVbmljb3JuSWQpIHB1YmxpYyBwYXlhYmxlOwp9Cgpjb250cmFjdCBVbmljb3JuVG9rZW5JbnRlcmZhY2UgewoKICAgIC8vRVJDNzIxCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2JhbGFuY2UpOwogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF91bmljb3JuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgX293bmVyKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF91bmljb3JuSWQpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3VuaWNvcm5JZCkgcHVibGljOwogICAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF91bmljb3JuSWQpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gb3ducyhhZGRyZXNzIF9jbGFpbWFudCwgdWludDI1NiBfdW5pY29ybklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9jbGFpbWFudCwgdWludDI1NiBfdW5pY29ybklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdW5pY29ybklkKSBwdWJsaWM7CgogICAgLy9zcGVjaWZpYwogICAgZnVuY3Rpb24gY3JlYXRlVW5pY29ybihhZGRyZXNzIF9vd25lcikgZXh0ZXJuYWwgcmV0dXJucyAodWludCk7CiAgICAvLyAgICBmdW5jdGlvbiBidXJuVW5pY29ybih1aW50MjU2IF91bmljb3JuSWQpIGV4dGVybmFsOwogICAgZnVuY3Rpb24gZ2V0R2VuKHVpbnQgX3VuaWNvcm5JZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChieXRlcyk7CiAgICBmdW5jdGlvbiBzZXRHZW5lKHVpbnQgX3VuaWNvcm5JZCwgYnl0ZXMgX2dlbmUpIGV4dGVybmFsOwogICAgZnVuY3Rpb24gdXBkYXRlR2VuZSh1aW50IF91bmljb3JuSWQsIGJ5dGVzIF9nZW5lKSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIGdldFVuaWNvcm5HZW5CeXRlKHVpbnQgX3VuaWNvcm5JZCwgdWludCBfYnl0ZU5vKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQ4KTsKCiAgICBmdW5jdGlvbiBzZXROYW1lKHVpbnQyNTYgX3VuaWNvcm5JZCwgc3RyaW5nIF9uYW1lICkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBwbHVzRnJlZXppbmdUaW1lKHVpbnQgX3VuaWNvcm5JZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBwbHVzVG91ckZyZWV6aW5nVGltZSh1aW50IF91bmljb3JuSWQpIGV4dGVybmFsOwogICAgZnVuY3Rpb24gbWludXNGcmVlemluZ1RpbWUodWludCBfdW5pY29ybklkLCB1aW50NjQgX3RpbWUpIGV4dGVybmFsOwogICAgZnVuY3Rpb24gbWludXNUb3VyRnJlZXppbmdUaW1lKHVpbnQgX3VuaWNvcm5JZCwgdWludDY0IF90aW1lKSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIGlzVW5mcmVlemVkKHVpbnQgX3VuaWNvcm5JZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGlzVG91clVuZnJlZXplZCh1aW50IF91bmljb3JuSWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCk7CgogICAgZnVuY3Rpb24gbWFya2V0VHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3VuaWNvcm5JZCkgZXh0ZXJuYWw7Cn0KCgoKY29udHJhY3QgVW5pY29ybkFjY2Vzc0NvbnRyb2wgewoKICAgIFVuaWNvcm5NYW5hZ2VtZW50SW50ZXJmYWNlIHB1YmxpYyB1bmljb3JuTWFuYWdlbWVudDsKCiAgICBmdW5jdGlvbiBVbmljb3JuQWNjZXNzQ29udHJvbChhZGRyZXNzIF91bmljb3JuTWFuYWdlbWVudEFkZHJlc3MpIHB1YmxpYyB7CiAgICAgICAgdW5pY29ybk1hbmFnZW1lbnQgPSBVbmljb3JuTWFuYWdlbWVudEludGVyZmFjZShfdW5pY29ybk1hbmFnZW1lbnRBZGRyZXNzKTsKICAgICAgICB1bmljb3JuTWFuYWdlbWVudC5yZWdpc3RlckluaXQodGhpcyk7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB1bmljb3JuTWFuYWdlbWVudC5vd25lckFkZHJlc3MoKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5TWFuYWdlcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gdW5pY29ybk1hbmFnZW1lbnQubWFuYWdlckFkZHJlc3MoKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Q29tbXVuaXR5KCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB1bmljb3JuTWFuYWdlbWVudC5jb21tdW5pdHlBZGRyZXNzKCkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVRvdXJuYW1lbnQoKSB7CiAgICAgICAgcmVxdWlyZSh1bmljb3JuTWFuYWdlbWVudC5pc1RvdXJuYW1lbnQobXNnLnNlbmRlcikpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgICAgICByZXF1aXJlKCF1bmljb3JuTWFuYWdlbWVudC5wYXVzZWQoKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciB3aGVuUGF1c2VkIHsKICAgICAgICByZXF1aXJlKHVuaWNvcm5NYW5hZ2VtZW50LnBhdXNlZCgpKTsKICAgICAgICBfOwogICAgfQoKCiAgICBtb2RpZmllciBvbmx5TWFuYWdlbWVudCgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyh1bmljb3JuTWFuYWdlbWVudCkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUJyZWVkaW5nKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB1bmljb3JuTWFuYWdlbWVudC51bmljb3JuQnJlZWRpbmdBZGRyZXNzKCkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUdlbmVMYWIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHVuaWNvcm5NYW5hZ2VtZW50LmdlbmVMYWJBZGRyZXNzKCkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUJsYWNrQm94KCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB1bmljb3JuTWFuYWdlbWVudC5ibGFja0JveEFkZHJlc3MoKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5VW5pY29yblRva2VuKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB1bmljb3JuTWFuYWdlbWVudC51bmljb3JuVG9rZW5BZGRyZXNzKCkpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gaXNHYW1lUGF1c2VkKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHVuaWNvcm5NYW5hZ2VtZW50LnBhdXNlZCgpOwogICAgfQp9Cgpjb250cmFjdCBVbmljb3JuQnJlZWRpbmcgaXMgVW5pY29ybkFjY2Vzc0NvbnRyb2wgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgICAvL29ubHlPd25lcgogICAgVW5pY29yblRva2VuSW50ZXJmYWNlIHB1YmxpYyB1bmljb3JuVG9rZW47IC8vb25seSBvbiBkZXBsb3kKICAgIEJsYWNrQm94SW50ZXJmYWNlIHB1YmxpYyBibGFja0JveDsKCiAgICBldmVudCBIeWJyaWRpemF0aW9uQWRkKHVpbnQgaW5kZXhlZCB1bmljb3JuSWQsIHVpbnQgcHJpY2UpOwogICAgZXZlbnQgSHlicmlkaXphdGlvbkFjY2VwdCh1aW50IGluZGV4ZWQgZmlyc3RVbmljb3JuSWQsIHVpbnQgaW5kZXhlZCBzZWNvbmRVbmljb3JuSWQsIHVpbnQgbmV3VW5pY29ybklkKTsKICAgIGV2ZW50IEh5YnJpZGl6YXRpb25EZWxldGUodWludCBpbmRleGVkIHVuaWNvcm5JZCk7CiAgICBldmVudCBGdW5kc1RyYW5zZmVycmVkKGFkZHJlc3MgZGl2aWRlbmRNYW5hZ2VyLCB1aW50IHZhbHVlKTsKICAgIGV2ZW50IENyZWF0ZVVuaWNvcm4oYWRkcmVzcyBpbmRleGVkIG93bmVyLCB1aW50IGluZGV4ZWQgdW5pY29ybklkLCB1aW50IHBhcmVudDEsIHVpbnQgIHBhcmVudDIpOwogICAgZXZlbnQgTmV3R2VuMExpbWl0KHVpbnQgbGltaXQpOwogICAgZXZlbnQgTmV3R2VuMFN0ZXAodWludCBzdGVwKTsKCgogICAgZXZlbnQgT2ZmZXJBZGQodWludDI1NiBpbmRleGVkIHVuaWNvcm5JZCwgdWludCBwcmljZSk7CiAgICBldmVudCBPZmZlckRlbGV0ZSh1aW50MjU2IGluZGV4ZWQgdW5pY29ybklkKTsKICAgIGV2ZW50IFVuaWNvcm5Tb2xkKHVpbnQyNTYgaW5kZXhlZCB1bmljb3JuSWQpOwoKICAgIEVSQzIwIHB1YmxpYyBjYW5keVRva2VuOwogICAgRVJDMjAgcHVibGljIGNhbmR5UG93ZXJUb2tlbjsKCiAgICAvL2NvdW50ZXIgZm9yIGdlbjAKICAgIHVpbnQgcHVibGljIGdlbjBMaW1pdCA9IDMwMDAwOwogICAgdWludCBwdWJsaWMgZ2VuMENvdW50ID0gMDsKICAgIHVpbnQgcHVibGljIGdlbjBTdGVwID0gMTAwMDsKCiAgICAvL2NvdW50ZXIgZm9yIHByZXNhbGUgZ2VuMAogICAgdWludCBwdWJsaWMgZ2VuMFByZXNhbGVMaW1pdCA9IDEwMDA7CiAgICB1aW50IHB1YmxpYyBnZW4wUHJlc2FsZUNvdW50ID0gMDsKCiAgICBzdHJ1Y3QgSHlicmlkaXphdGlvbnsKICAgICAgICB1aW50IGxpc3RJbmRleDsKICAgICAgICB1aW50IHByaWNlOwogICAgICAgIGJvb2wgZXhpc3RzOwogICAgfQoKICAgIC8vIE1hcHBpbmcgZnJvbSB1bmljb3JuIElEIHRvIEh5YnJpZGl6YXRpb24gc3RydWN0CiAgICBtYXBwaW5nICh1aW50ID0+IEh5YnJpZGl6YXRpb24pIHB1YmxpYyBoeWJyaWRpemF0aW9uczsKICAgIG1hcHBpbmcodWludCA9PiB1aW50KSBwdWJsaWMgaHlicmlkaXphdGlvbkxpc3Q7CiAgICB1aW50IHB1YmxpYyBoeWJyaWRpemF0aW9uTGlzdFNpemUgPSAwOwoKCiAgICBmdW5jdGlvbigpIHB1YmxpYyBwYXlhYmxlIHsKCiAgICB9CgogICAgZnVuY3Rpb24gVW5pY29ybkJyZWVkaW5nKGFkZHJlc3MgX3VuaWNvcm5NYW5hZ2VtZW50QWRkcmVzcykgVW5pY29ybkFjY2Vzc0NvbnRyb2woX3VuaWNvcm5NYW5hZ2VtZW50QWRkcmVzcykgcHVibGljIHsKICAgICAgICBjYW5keVRva2VuID0gRVJDMjAodW5pY29ybk1hbmFnZW1lbnQuY2FuZHlUb2tlbigpKTsKCiAgICB9CgogICAgZnVuY3Rpb24gaW5pdCgpIG9ubHlNYW5hZ2VtZW50IHdoZW5QYXVzZWQgZXh0ZXJuYWwgewogICAgICAgIHVuaWNvcm5Ub2tlbiA9IFVuaWNvcm5Ub2tlbkludGVyZmFjZSh1bmljb3JuTWFuYWdlbWVudC51bmljb3JuVG9rZW5BZGRyZXNzKCkpOwogICAgICAgIGJsYWNrQm94ID0gQmxhY2tCb3hJbnRlcmZhY2UodW5pY29ybk1hbmFnZW1lbnQuYmxhY2tCb3hBZGRyZXNzKCkpOwogICAgICAgIGNhbmR5UG93ZXJUb2tlbiA9IEVSQzIwKHVuaWNvcm5NYW5hZ2VtZW50LmNhbmR5UG93ZXJUb2tlbigpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBtYWtlSHlicmlkaXphdGlvbih1aW50IF91bmljb3JuSWQsIHVpbnQgX3ByaWNlKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUodW5pY29yblRva2VuLm93bnMobXNnLnNlbmRlciwgX3VuaWNvcm5JZCkpOwogICAgICAgIHJlcXVpcmUodW5pY29yblRva2VuLmlzVW5mcmVlemVkKF91bmljb3JuSWQpKTsKICAgICAgICByZXF1aXJlKCFoeWJyaWRpemF0aW9uc1tfdW5pY29ybklkXS5leGlzdHMpOwoKICAgICAgICBoeWJyaWRpemF0aW9uc1tfdW5pY29ybklkXSA9IEh5YnJpZGl6YXRpb24oewogICAgICAgICAgICBwcmljZTogX3ByaWNlLAogICAgICAgICAgICBleGlzdHM6IHRydWUsCiAgICAgICAgICAgIGxpc3RJbmRleDogaHlicmlkaXphdGlvbkxpc3RTaXplCiAgICAgICAgICAgIH0pOwogICAgICAgIGh5YnJpZGl6YXRpb25MaXN0W2h5YnJpZGl6YXRpb25MaXN0U2l6ZSsrXSA9IF91bmljb3JuSWQ7CgogICAgICAgIGVtaXQgSHlicmlkaXphdGlvbkFkZChfdW5pY29ybklkLCBfcHJpY2UpOwogICAgfQoKCiAgICBmdW5jdGlvbiBhY2NlcHRIeWJyaWRpemF0aW9uKHVpbnQgX2ZpcnN0VW5pY29ybklkLCB1aW50IF9zZWNvbmRVbmljb3JuSWQpIHdoZW5Ob3RQYXVzZWQgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUodW5pY29yblRva2VuLm93bnMobXNnLnNlbmRlciwgX3NlY29uZFVuaWNvcm5JZCkpOwogICAgICAgIHJlcXVpcmUoX3NlY29uZFVuaWNvcm5JZCAhPSBfZmlyc3RVbmljb3JuSWQpOwogICAgICAgIHJlcXVpcmUodW5pY29yblRva2VuLmlzVW5mcmVlemVkKF9maXJzdFVuaWNvcm5JZCkgJiYgdW5pY29yblRva2VuLmlzVW5mcmVlemVkKF9zZWNvbmRVbmljb3JuSWQpKTsKICAgICAgICByZXF1aXJlKGh5YnJpZGl6YXRpb25zW19maXJzdFVuaWNvcm5JZF0uZXhpc3RzKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA9PSB1bmljb3JuTWFuYWdlbWVudC5vcmFjbGl6ZUZlZSgpKTsKICAgICAgICBpZiAoaHlicmlkaXphdGlvbnNbX2ZpcnN0VW5pY29ybklkXS5wcmljZSA+IDApIHsKICAgICAgICAgICAgcmVxdWlyZShjYW5keVRva2VuLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCB0aGlzLCBnZXRIeWJyaWRpemF0aW9uUHJpY2UoX2ZpcnN0VW5pY29ybklkKSkpOwogICAgICAgIH0KCiAgICAgICAgcGx1c0ZyZWV6aW5nVGltZShfc2Vjb25kVW5pY29ybklkKTsKICAgICAgICB1aW50MjU2IG5ld1VuaWNvcm5JZCA9IHVuaWNvcm5Ub2tlbi5jcmVhdGVVbmljb3JuKG1zZy5zZW5kZXIpOwogICAgICAgIGJsYWNrQm94LmdlbmVDb3JlLnZhbHVlKHVuaWNvcm5NYW5hZ2VtZW50Lm9yYWNsaXplRmVlKCkpKG5ld1VuaWNvcm5JZCwgX2ZpcnN0VW5pY29ybklkLCBfc2Vjb25kVW5pY29ybklkKTsKICAgICAgICBlbWl0IENyZWF0ZVVuaWNvcm4obXNnLnNlbmRlciwgbmV3VW5pY29ybklkLCBfZmlyc3RVbmljb3JuSWQsIF9zZWNvbmRVbmljb3JuSWQpOwogICAgICAgIGlmIChoeWJyaWRpemF0aW9uc1tfZmlyc3RVbmljb3JuSWRdLnByaWNlID4gMCkgewogICAgICAgICAgICBjYW5keVRva2VuLnRyYW5zZmVyKHVuaWNvcm5Ub2tlbi5vd25lck9mKF9maXJzdFVuaWNvcm5JZCksIGh5YnJpZGl6YXRpb25zW19maXJzdFVuaWNvcm5JZF0ucHJpY2UpOwogICAgICAgIH0KICAgICAgICBlbWl0IEh5YnJpZGl6YXRpb25BY2NlcHQoX2ZpcnN0VW5pY29ybklkLCBfc2Vjb25kVW5pY29ybklkLCBuZXdVbmljb3JuSWQpOwogICAgICAgIF9kZWxldGVIeWJyaWRpemF0aW9uKF9maXJzdFVuaWNvcm5JZCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGNhbmNlbEh5YnJpZGl6YXRpb24gKHVpbnQgX3VuaWNvcm5JZCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKHVuaWNvcm5Ub2tlbi5vd25zKG1zZy5zZW5kZXIsX3VuaWNvcm5JZCkpOwogICAgICAgIHJlcXVpcmUoaHlicmlkaXphdGlvbnNbX3VuaWNvcm5JZF0uZXhpc3RzKTsKICAgICAgICBfZGVsZXRlSHlicmlkaXphdGlvbihfdW5pY29ybklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxldGVIeWJyaWRpemF0aW9uKHVpbnQgX3VuaWNvcm5JZCkgb25seVVuaWNvcm5Ub2tlbiBleHRlcm5hbCB7CiAgICAgICAgX2RlbGV0ZUh5YnJpZGl6YXRpb24oX3VuaWNvcm5JZCk7CiAgICB9CgogICAgZnVuY3Rpb24gX2RlbGV0ZUh5YnJpZGl6YXRpb24odWludCBfdW5pY29ybklkKSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKGh5YnJpZGl6YXRpb25zW191bmljb3JuSWRdLmV4aXN0cykgewogICAgICAgICAgICBoeWJyaWRpemF0aW9uc1toeWJyaWRpemF0aW9uTGlzdFstLWh5YnJpZGl6YXRpb25MaXN0U2l6ZV1dLmxpc3RJbmRleCA9IGh5YnJpZGl6YXRpb25zW191bmljb3JuSWRdLmxpc3RJbmRleDsKICAgICAgICAgICAgaHlicmlkaXphdGlvbkxpc3RbaHlicmlkaXphdGlvbnNbX3VuaWNvcm5JZF0ubGlzdEluZGV4XSA9IGh5YnJpZGl6YXRpb25MaXN0W2h5YnJpZGl6YXRpb25MaXN0U2l6ZV07CiAgICAgICAgICAgIGRlbGV0ZSBoeWJyaWRpemF0aW9uTGlzdFtoeWJyaWRpemF0aW9uTGlzdFNpemVdOwogICAgICAgICAgICBkZWxldGUgaHlicmlkaXphdGlvbnNbX3VuaWNvcm5JZF07CiAgICAgICAgICAgIGVtaXQgSHlicmlkaXphdGlvbkRlbGV0ZShfdW5pY29ybklkKTsKICAgICAgICB9CiAgICB9CgogICAgLy9DcmVhdGUgbmV3IDAgZ2VuCiAgICBmdW5jdGlvbiBjcmVhdGVVbmljb3JuKCkgcHVibGljIHBheWFibGUgd2hlbk5vdFBhdXNlZCByZXR1cm5zKHVpbnQyNTYpICAgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID09IGdldENyZWF0ZVVuaWNvcm5QcmljZSgpKTsKICAgICAgICByZXR1cm4gX2NyZWF0ZVVuaWNvcm4obXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlVW5pY29ybkZvckNhbmR5KCkgcHVibGljIHBheWFibGUgd2hlbk5vdFBhdXNlZCByZXR1cm5zKHVpbnQyNTYpICAgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID09IHVuaWNvcm5NYW5hZ2VtZW50Lm9yYWNsaXplRmVlKCkpOwogICAgICAgIHJlcXVpcmUoY2FuZHlUb2tlbi50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgZ2V0Q3JlYXRlVW5pY29yblByaWNlSW5DYW5keSgpKSk7CiAgICAgICAgcmV0dXJuIF9jcmVhdGVVbmljb3JuKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVByZXNhbGVVbmljb3Jucyh1aW50IF9jb3VudCwgYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBwYXlhYmxlIG9ubHlNYW5hZ2VyIHdoZW5QYXVzZWQgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmVxdWlyZShnZW4wUHJlc2FsZUNvdW50LmFkZChfY291bnQpIDw9IGdlbjBQcmVzYWxlTGltaXQpOwogICAgICAgIHVpbnQyNTYgbmV3VW5pY29ybklkOwogICAgICAgIGFkZHJlc3Mgb3duZXIgPSBfb3duZXIgPT0gYWRkcmVzcygwKSA/IG1zZy5zZW5kZXIgOiBfb3duZXI7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX2NvdW50OyBpKyspewogICAgICAgICAgICBuZXdVbmljb3JuSWQgPSB1bmljb3JuVG9rZW4uY3JlYXRlVW5pY29ybihvd25lcik7CiAgICAgICAgICAgIGJsYWNrQm94LmNyZWF0ZUdlbjAobmV3VW5pY29ybklkKTsKICAgICAgICAgICAgZW1pdCBDcmVhdGVVbmljb3JuKG93bmVyLCBuZXdVbmljb3JuSWQsIDAsIDApOwogICAgICAgICAgICBnZW4wQ291bnQgPSBnZW4wQ291bnQuYWRkKDEpOwogICAgICAgICAgICBnZW4wUHJlc2FsZUNvdW50ID0gZ2VuMFByZXNhbGVDb3VudC5hZGQoMSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIF9jcmVhdGVVbmljb3JuKGFkZHJlc3MgX293bmVyKSBwcml2YXRlIHJldHVybnModWludDI1NikgewogICAgICAgIHJlcXVpcmUoZ2VuMENvdW50IDwgZ2VuMExpbWl0KTsKICAgICAgICB1aW50MjU2IG5ld1VuaWNvcm5JZCA9IHVuaWNvcm5Ub2tlbi5jcmVhdGVVbmljb3JuKF9vd25lcik7CiAgICAgICAgYmxhY2tCb3guY3JlYXRlR2VuMC52YWx1ZSh1bmljb3JuTWFuYWdlbWVudC5vcmFjbGl6ZUZlZSgpKShuZXdVbmljb3JuSWQpOwogICAgICAgIGVtaXQgQ3JlYXRlVW5pY29ybihfb3duZXIsIG5ld1VuaWNvcm5JZCwgMCwgMCk7CiAgICAgICAgZ2VuMENvdW50ID0gZ2VuMENvdW50LmFkZCgxKTsKICAgICAgICByZXR1cm4gbmV3VW5pY29ybklkOwogICAgfQoKICAgIGZ1bmN0aW9uIHBsdXNGcmVlemluZ1RpbWUodWludCBfdW5pY29ybklkKSBwcml2YXRlIHsKICAgICAgICB1bmljb3JuVG9rZW4ucGx1c0ZyZWV6aW5nVGltZShfdW5pY29ybklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwbHVzVG91ckZyZWV6aW5nVGltZSh1aW50IF91bmljb3JuSWQpIG9ubHlUb3VybmFtZW50IHB1YmxpYyB7CiAgICAgICAgdW5pY29yblRva2VuLnBsdXNUb3VyRnJlZXppbmdUaW1lKF91bmljb3JuSWQpOwogICAgfQoKICAgIC8vY2hhbmdlIGZyZWV6aW5nIHRpbWUgZm9yIGNhbmR5CiAgICBmdW5jdGlvbiBtaW51c0ZyZWV6aW5nVGltZSh1aW50IF91bmljb3JuSWQpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShjYW5keVBvd2VyVG9rZW4udHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIHRoaXMsIHVuaWNvcm5NYW5hZ2VtZW50LnN1YkZyZWV6aW5nUHJpY2UoKSkpOwogICAgICAgIHVuaWNvcm5Ub2tlbi5taW51c0ZyZWV6aW5nVGltZShfdW5pY29ybklkLCB1bmljb3JuTWFuYWdlbWVudC5zdWJGcmVlemluZ1RpbWUoKSk7CiAgICB9CgogICAgLy9jaGFuZ2UgdG91ciBmcmVlemluZyB0aW1lIGZvciBjYW5keQogICAgZnVuY3Rpb24gbWludXNUb3VyRnJlZXppbmdUaW1lKHVpbnQgX3VuaWNvcm5JZCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKGNhbmR5UG93ZXJUb2tlbi50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgdW5pY29ybk1hbmFnZW1lbnQuc3ViVG91ckZyZWV6aW5nUHJpY2UoKSkpOwogICAgICAgIHVuaWNvcm5Ub2tlbi5taW51c1RvdXJGcmVlemluZ1RpbWUoX3VuaWNvcm5JZCwgdW5pY29ybk1hbmFnZW1lbnQuc3ViVG91ckZyZWV6aW5nVGltZSgpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRIeWJyaWRpemF0aW9uUHJpY2UodWludCBfdW5pY29ybklkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHVuaWNvcm5NYW5hZ2VtZW50LmdldEh5YnJpZGl6YXRpb25GdWxsUHJpY2UoaHlicmlkaXphdGlvbnNbX3VuaWNvcm5JZF0ucHJpY2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEV0aGVyRmVlRm9yUHJpY2VJbkNhbmR5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiB1bmljb3JuTWFuYWdlbWVudC5vcmFjbGl6ZUZlZSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldENyZWF0ZVVuaWNvcm5QcmljZUluQ2FuZHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHVuaWNvcm5NYW5hZ2VtZW50LmdldENyZWF0ZVVuaWNvcm5GdWxsUHJpY2VJbkNhbmR5KCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldENyZWF0ZVVuaWNvcm5QcmljZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdW5pY29ybk1hbmFnZW1lbnQuZ2V0Q3JlYXRlVW5pY29ybkZ1bGxQcmljZSgpOwogICAgfQoKCiAgICBmdW5jdGlvbiB3aXRoZHJhd1Rva2VucygpIG9ubHlNYW5hZ2VyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShjYW5keVRva2VuLmJhbGFuY2VPZih0aGlzKSA+IDAgfHwgY2FuZHlQb3dlclRva2VuLmJhbGFuY2VPZih0aGlzKSA+IDApOwogICAgICAgIGlmIChjYW5keVRva2VuLmJhbGFuY2VPZih0aGlzKSA+IDApIHsKICAgICAgICAgICAgY2FuZHlUb2tlbi50cmFuc2Zlcih1bmljb3JuTWFuYWdlbWVudC53YWxsZXRBZGRyZXNzKCksIGNhbmR5VG9rZW4uYmFsYW5jZU9mKHRoaXMpKTsKICAgICAgICB9CiAgICAgICAgaWYgKGNhbmR5UG93ZXJUb2tlbi5iYWxhbmNlT2YodGhpcykgPiAwKSB7CiAgICAgICAgICAgIGNhbmR5UG93ZXJUb2tlbi50cmFuc2Zlcih1bmljb3JuTWFuYWdlbWVudC53YWxsZXRBZGRyZXNzKCksIGNhbmR5UG93ZXJUb2tlbi5iYWxhbmNlT2YodGhpcykpOwogICAgICAgIH0KICAgIH0KCgogICAgZnVuY3Rpb24gdHJhbnNmZXJFdGhlcnNUb0RpdmlkZW5kTWFuYWdlcih1aW50IF92YWx1ZSkgb25seU1hbmFnZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKGFkZHJlc3ModGhpcykuYmFsYW5jZSA+PSBfdmFsdWUpOwogICAgICAgIERpdmlkZW5kTWFuYWdlckludGVyZmFjZSBkaXZpZGVuZE1hbmFnZXIgPSBEaXZpZGVuZE1hbmFnZXJJbnRlcmZhY2UodW5pY29ybk1hbmFnZW1lbnQuZGl2aWRlbmRNYW5hZ2VyQWRkcmVzcygpKTsKICAgICAgICBkaXZpZGVuZE1hbmFnZXIucGF5RGl2aWRlbmQudmFsdWUoX3ZhbHVlKSgpOwogICAgICAgIGVtaXQgRnVuZHNUcmFuc2ZlcnJlZCh1bmljb3JuTWFuYWdlbWVudC5kaXZpZGVuZE1hbmFnZXJBZGRyZXNzKCksIF92YWx1ZSk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIHNldEdlbjBMaW1pdCgpIGV4dGVybmFsIG9ubHlDb21tdW5pdHkgewogICAgICAgIHJlcXVpcmUoZ2VuMENvdW50ID09IGdlbjBMaW1pdCk7CiAgICAgICAgZ2VuMExpbWl0ID0gZ2VuMExpbWl0LmFkZChnZW4wU3RlcCk7CiAgICAgICAgZW1pdCBOZXdHZW4wTGltaXQoZ2VuMExpbWl0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRHZW4wU3RlcCh1aW50IF9zdGVwKSBleHRlcm5hbCBvbmx5Q29tbXVuaXR5IHsKICAgICAgICBnZW4wU3RlcCA9IF9zdGVwOwogICAgICAgIGVtaXQgTmV3R2VuMFN0ZXAoZ2VuMExpbWl0KTsKICAgIH0KCgoKCgogICAgLy8vL01BUktFVAogICAgc3RydWN0IE9mZmVyewogICAgICAgIHVpbnQgbWFya2V0SW5kZXg7CiAgICAgICAgdWludCBwcmljZTsKICAgICAgICBib29sIGV4aXN0czsKICAgIH0KCiAgICAvLyBNYXBwaW5nIGZyb20gdW5pY29ybiBJRCB0byBPZmZlciBzdHJ1Y3QKICAgIG1hcHBpbmcgKHVpbnQgPT4gT2ZmZXIpIHB1YmxpYyBvZmZlcnM7CiAgICAvLyBtYXJrZXQgaW5kZXggPT4gb2ZmZXJJZAogICAgbWFwcGluZyh1aW50ID0+IHVpbnQpIHB1YmxpYyBtYXJrZXQ7CiAgICB1aW50IHB1YmxpYyBtYXJrZXRTaXplID0gMDsKCgogICAgZnVuY3Rpb24gc2VsbFVuaWNvcm4odWludCBfdW5pY29ybklkLCB1aW50IF9wcmljZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlKHVuaWNvcm5Ub2tlbi5vd25zKG1zZy5zZW5kZXIsIF91bmljb3JuSWQpKTsKICAgICAgICByZXF1aXJlKCFvZmZlcnNbX3VuaWNvcm5JZF0uZXhpc3RzKTsKCiAgICAgICAgb2ZmZXJzW191bmljb3JuSWRdID0gT2ZmZXIoewogICAgICAgICAgICBwcmljZTogX3ByaWNlLAogICAgICAgICAgICBleGlzdHM6IHRydWUsCiAgICAgICAgICAgIG1hcmtldEluZGV4OiBtYXJrZXRTaXplCiAgICAgICAgICAgIH0pOwoKICAgICAgICBtYXJrZXRbbWFya2V0U2l6ZSsrXSA9IF91bmljb3JuSWQ7CgogICAgICAgIGVtaXQgT2ZmZXJBZGQoX3VuaWNvcm5JZCwgX3ByaWNlKTsKICAgIH0KCgogICAgZnVuY3Rpb24gYnV5VW5pY29ybih1aW50IF91bmljb3JuSWQpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKG9mZmVyc1tfdW5pY29ybklkXS5leGlzdHMpOwogICAgICAgIHVpbnQgcHJpY2UgPSBvZmZlcnNbX3VuaWNvcm5JZF0ucHJpY2U7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPT0gdW5pY29ybk1hbmFnZW1lbnQuZ2V0U2VsbFVuaWNvcm5GdWxsUHJpY2UocHJpY2UpKTsKCiAgICAgICAgYWRkcmVzcyBvd25lciA9IHVuaWNvcm5Ub2tlbi5vd25lck9mKF91bmljb3JuSWQpOwoKICAgICAgICBlbWl0IFVuaWNvcm5Tb2xkKF91bmljb3JuSWQpOwogICAgICAgIC8vZGVsZXRlb2ZmZXIg0LLRi9C30L7QstC10YLRgdGPINCy0L3Rg9GC0YDQuCB0cmFuc2ZlcgogICAgICAgIHVuaWNvcm5Ub2tlbi5tYXJrZXRUcmFuc2Zlcihvd25lciwgbXNnLnNlbmRlciwgX3VuaWNvcm5JZCk7CiAgICAgICAgb3duZXIudHJhbnNmZXIocHJpY2UpOwovLyAgICAgICAgX2RlbGV0ZU9mZmVyKF91bmljb3JuSWQpOwogICAgfQoKCiAgICBmdW5jdGlvbiByZXZva2VVbmljb3JuKHVpbnQgX3VuaWNvcm5JZCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKHVuaWNvcm5Ub2tlbi5vd25zKG1zZy5zZW5kZXIsIF91bmljb3JuSWQpKTsKICAgICAgICByZXF1aXJlKG9mZmVyc1tfdW5pY29ybklkXS5leGlzdHMpOwogICAgICAgIF9kZWxldGVPZmZlcihfdW5pY29ybklkKTsKICAgIH0KCgogICAgZnVuY3Rpb24gZGVsZXRlT2ZmZXIodWludCBfdW5pY29ybklkKSBvbmx5VW5pY29yblRva2VuIGV4dGVybmFsIHsKICAgICAgICBfZGVsZXRlT2ZmZXIoX3VuaWNvcm5JZCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIF9kZWxldGVPZmZlcih1aW50IF91bmljb3JuSWQpIGludGVybmFsIHsKICAgICAgICBpZiAob2ZmZXJzW191bmljb3JuSWRdLmV4aXN0cykgewogICAgICAgICAgICBvZmZlcnNbbWFya2V0Wy0tbWFya2V0U2l6ZV1dLm1hcmtldEluZGV4ID0gb2ZmZXJzW191bmljb3JuSWRdLm1hcmtldEluZGV4OwogICAgICAgICAgICBtYXJrZXRbb2ZmZXJzW191bmljb3JuSWRdLm1hcmtldEluZGV4XSA9IG1hcmtldFttYXJrZXRTaXplXTsKICAgICAgICAgICAgZGVsZXRlIG1hcmtldFttYXJrZXRTaXplXTsKICAgICAgICAgICAgZGVsZXRlIG9mZmVyc1tfdW5pY29ybklkXTsKICAgICAgICAgICAgZW1pdCBPZmZlckRlbGV0ZShfdW5pY29ybklkKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0T2ZmZXJQcmljZSh1aW50IF91bmljb3JuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdW5pY29ybk1hbmFnZW1lbnQuZ2V0U2VsbFVuaWNvcm5GdWxsUHJpY2Uob2ZmZXJzW191bmljb3JuSWRdLnByaWNlKTsKICAgIH0KCn0='.
	

]
