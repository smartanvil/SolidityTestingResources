Class {
	#name : #SRT3f407351f74b1340c3f507dc334dfc8cfb2b7e97,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3f407351f74b1340c3f507dc334dfc8cfb2b7e97 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7Cgpjb250cmFjdCBTYWZlTWF0aCB7CgogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICggdWludDI1NikgewogICAgICAgIHVpbnQyNTYgeiA9IHggKyB5OwogICAgICAgIGFzc2VydCgoeiA+PSB4KSAmJiAoeiA+PSB5KSk7CiAgICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZVN1Yih1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICggdWludDI1NikgewogICAgICAgIGFzc2VydCh4ID49IHkpOwogICAgICAgIHVpbnQyNTYgeiA9IHggLSB5OwogICAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVNdWx0KHVpbnQyNTYgeCwgdWludDI1NiB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKCB1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0geCAqIHk7CiAgICAgICAgYXNzZXJ0KCh4ID09IDApfHwoei94ID09IHkpKTsKICAgICAgICByZXR1cm4gejsKICAgIH0KCn0KCmNvbnRyYWN0IEVSQzIwIHsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKCB1aW50IHN1cHBseSk7CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKCBhZGRyZXNzIHdobyApIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICggdWludCB2YWx1ZSk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoIGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlciApIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50IF9hbGxvd2FuY2UpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIG9rKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSggYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUgKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CgogICAgZXZlbnQgVHJhbnNmZXIoIGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoIGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgovL2ltcGxlbWVudCAKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBTYWZlTWF0aCxFUkMyMCB7CiAgICB1aW50MjU2ICAgICBfdG90YWxTdXBwbHk7CiAgICAKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKCB1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIF90b3RhbFN1cHBseTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIGRzdCwgdWludCB3YWQpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYXNzZXJ0KGJhbGFuY2VzW21zZy5zZW5kZXJdID49IHdhZCk7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCB3YWQpOwogICAgICAgIGJhbGFuY2VzW2RzdF0gPSBzYWZlQWRkKGJhbGFuY2VzW2RzdF0sIHdhZCk7CiAgICAgICAgCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgZHN0LCB3YWQpOwogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBzcmMsIGFkZHJlc3MgZHN0LCB1aW50IHdhZCkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhc3NlcnQod2FkID4gMCApOwogICAgICAgIGFzc2VydChiYWxhbmNlc1tzcmNdID49IHdhZCk7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbc3JjXSA9IHNhZmVTdWIoYmFsYW5jZXNbc3JjXSwgd2FkKTsKICAgICAgICBiYWxhbmNlc1tkc3RdID0gc2FmZUFkZChiYWxhbmNlc1tkc3RdLCB3YWQpOwogICAgICAgIAogICAgICAgIFRyYW5zZmVyKHNyYywgZHN0LCB3YWQpOwogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKCB1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoIGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKCB1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBmcmVlemVPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKCB1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gZnJlZXplc1tfb3duZXJdOwogICAgfQogICAgCgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgZnJlZXplczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKfQoKY29udHJhY3QgRFNBdXRoIHsKICAgIGFkZHJlc3MgcHVibGljIGF1dGhvcml0eTsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIERTQXV0aCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGF1dGhvcml0eSA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0T3duZXIoYWRkcmVzcyBvd25lcl8pIE93bmVyIHB1YmxpYwogICAgewogICAgICAgIG93bmVyID0gb3duZXJfOwogICAgfQoKICAgIG1vZGlmaWVyIEF1dGggewogICAgICAgIGFzc2VydChpc0F1dGhvcml6ZWQobXNnLnNlbmRlcikpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIE93bmVyIHsKICAgICAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0F1dGhvcml6ZWQoYWRkcmVzcyBzcmMpIGludGVybmFsIHZpZXcgcmV0dXJucyAoIGJvb2wpIHsKICAgICAgICBpZiAoc3JjID09IGFkZHJlc3ModGhpcykpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIGlmIChzcmMgPT0gYXV0aG9yaXR5KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChzcmMgPT0gb3duZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCn0KCmNvbnRyYWN0IERSQ1Rva2VuIGlzIFN0YW5kYXJkVG9rZW4sRFNBdXRoIHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiRGlnaXQgUmVkV2luZSBDb2luIjsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDE4OwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiRFJDIjsKICAgIAogICAgLyogVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgZnJvemVuICovCiAgICBldmVudCBGcmVlemUoYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQyNTYgdmFsdWUpOwogICAgCiAgICAvKiBUaGlzIG5vdGlmaWVzIGNsaWVudHMgYWJvdXQgdGhlIGFtb3VudCB1bmZyb3plbiAqLwogICAgZXZlbnQgVW5mcmVlemUoYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQyNTYgdmFsdWUpOwogICAgCiAgICAvKiBUaGlzIG5vdGlmaWVzIGNsaWVudHMgYWJvdXQgdGhlIGFtb3VudCBidXJudCAqLwogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiB2YWx1ZSk7CgogICAgZnVuY3Rpb24gRFJDVG9rZW4oKSBwdWJsaWMgewogICAgICAgIAogICAgfQoKICAgIGZ1bmN0aW9uIG1pbnQodWludDI1NiB3YWQpIE93bmVyIHB1YmxpYyB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlQWRkKGJhbGFuY2VzW21zZy5zZW5kZXJdLCB3YWQpOwogICAgICAgIF90b3RhbFN1cHBseSA9IHNhZmVBZGQoX3RvdGFsU3VwcGx5LCB3YWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiB3YWQpIE93bmVyIHB1YmxpYyB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCB3YWQpOwogICAgICAgIF90b3RhbFN1cHBseSA9IHNhZmVTdWIoX3RvdGFsU3VwcGx5LCB3YWQpOwogICAgICAgIEJ1cm4obXNnLnNlbmRlciwgd2FkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwdXNoKGFkZHJlc3MgZHN0LCB1aW50MjU2IHdhZCkgcHVibGljIHJldHVybnMgKCBib29sKSB7CiAgICAgICAgcmV0dXJuIHRyYW5zZmVyKGRzdCwgd2FkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwdWxsKGFkZHJlc3Mgc3JjLCB1aW50MjU2IHdhZCkgcHVibGljIHJldHVybnMgKCBib29sKSB7CiAgICAgICAgcmV0dXJuIHRyYW5zZmVyRnJvbShzcmMsIG1zZy5zZW5kZXIsIHdhZCk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBkc3QsIHVpbnQgd2FkKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2Zlcihkc3QsIHdhZCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGZyZWV6ZShhZGRyZXNzIGRzdCx1aW50MjU2IF92YWx1ZSkgQXV0aCBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYXNzZXJ0KGJhbGFuY2VzW2RzdF0gPj0gX3ZhbHVlKTsgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgYXNzZXJ0KF92YWx1ZSA+IDApIDsgCiAgICAgICAgYmFsYW5jZXNbZHN0XSA9IFNhZmVNYXRoLnNhZmVTdWIoYmFsYW5jZXNbZHN0XSwgX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgZnJlZXplc1tkc3RdID0gU2FmZU1hdGguc2FmZUFkZChmcmVlemVzW2RzdF0sIF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGVzIHRvdGFsU3VwcGx5CiAgICAgICAgRnJlZXplKGRzdCwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdW5mcmVlemUoYWRkcmVzcyBkc3QsdWludDI1NiBfdmFsdWUpIEF1dGggcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFzc2VydChmcmVlemVzW2RzdF0gPj0gX3ZhbHVlKTsgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBhc3NlcnQoX3ZhbHVlID4gMCkgOyAKICAgICAgICBmcmVlemVzW2RzdF0gPSBTYWZlTWF0aC5zYWZlU3ViKGZyZWV6ZXNbZHN0XSwgX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgYmFsYW5jZXNbZHN0XSA9IFNhZmVNYXRoLnNhZmVBZGQoYmFsYW5jZXNbZHN0XSwgX3ZhbHVlKTsKICAgICAgICBVbmZyZWV6ZShkc3QsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCmNvbnRyYWN0IERSQ0Nyb3dTYWxlIGlzIFNhZmVNYXRoLERTQXV0aCB7CiAgICBEUkNUb2tlbiBwdWJsaWMgRFJDOwoKICAgIC8vIENvbnN0YW50cwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5zUGVyRXRoID0gMTAwMDA7Ly8gRFJDIHBlciBFVEggCiAgICB1aW50MjU2IHB1YmxpYyBwcmVzYWxlUGVyRXRoOy8vIERSQyBwZXIgRVRIIAogICAgCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b3RhbFN1cHBseSA9IDEgKiAxZTkgKiAxZTE4OyAvLyBUb3RhbCBEUkMgYW1vdW50IGNyZWF0ZWQKCiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNGb3JUZWFtICAgICA9IHRvdGFsU3VwcGx5ICogMTUgLyAxMDA7CiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNGb3JQYXJudGVyICA9IHRvdGFsU3VwcGx5ICogMTUgLyAxMDA7CiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNGb3JQbGF0Zm9ybSA9IHRvdGFsU3VwcGx5ICogNDUgLyAxMDA7CgogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zRm9yUHJlc2FsZTEgPSB0b3RhbFN1cHBseSAqIDUgLyAxMDA7CiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNGb3JQcmVzYWxlMiA9IHRvdGFsU3VwcGx5ICogMTAgLyAxMDA7CiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNGb3JTYWxlICAgICA9IHRvdGFsU3VwcGx5ICogMTAgLyAxMDA7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIHRlYW07CiAgICBhZGRyZXNzIHB1YmxpYyBwYXJudGVyOwogICAgYWRkcmVzcyBwdWJsaWMgcGxhdGZvcm07CiAgICBhZGRyZXNzIHB1YmxpYyBwcmVzYWxlMTsKICAgIAogICAgdWludDI1NiBwdWJsaWMgUHJlc2FsZTFTb2xkID0gMDsKICAgIHVpbnQyNTYgcHVibGljIFByZXNhbGUyU29sZCA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyBQdWJsaWNTb2xkID0gMDsKCiAgICBlbnVtIEljb1N0YXRlIHtJbml0LFByZXNhbGUxLCBQcmVzYWxlMiwgUnVubmluZywgUGF1c2VkLCBGaW5pc2hlZH0KICAgIEljb1N0YXRlIHB1YmxpYyBpY29TdGF0ZSA9IEljb1N0YXRlLkluaXQ7CiAgICBJY29TdGF0ZSBwdWJsaWMgcHJlSWNvU3RhdGUgPSBJY29TdGF0ZS5Jbml0OwogICAgCiAgICBmdW5jdGlvbiBzZXRQcmVzYWxlUGVyRXRoKHVpbnQyNTYgZGlzY291bnQpIGV4dGVybmFsIEF1dGh7CiAgICAgICAgcHJlc2FsZVBlckV0aCA9IGRpc2NvdW50OwogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0UHJlU2FsZTEoKSBleHRlcm5hbCBBdXRoIHsKICAgICAgICByZXF1aXJlKGljb1N0YXRlID09IEljb1N0YXRlLkluaXQpOwogICAgICAgIGljb1N0YXRlID0gSWNvU3RhdGUuUHJlc2FsZTE7CiAgICB9CgogICAgZnVuY3Rpb24gc3RhcnRQcmVTYWxlMigpIGV4dGVybmFsIEF1dGggewogICAgICAgIHJlcXVpcmUoaWNvU3RhdGUgPT0gSWNvU3RhdGUuUHJlc2FsZTEpOwogICAgICAgIGljb1N0YXRlID0gSWNvU3RhdGUuUHJlc2FsZTI7CiAgICB9CgogICAgZnVuY3Rpb24gc3RhcnRJY28oKSBleHRlcm5hbCBBdXRoIHsKICAgICAgICByZXF1aXJlKGljb1N0YXRlID09IEljb1N0YXRlLlByZXNhbGUyKTsKICAgICAgICBpY29TdGF0ZSA9IEljb1N0YXRlLlJ1bm5pbmc7CiAgICB9CgogICAgZnVuY3Rpb24gcGF1c2VJY28oKSBleHRlcm5hbCBBdXRoIHsKICAgICAgICByZXF1aXJlKGljb1N0YXRlICE9IEljb1N0YXRlLlBhdXNlZCk7CiAgICAgICAgcHJlSWNvU3RhdGUgPSBpY29TdGF0ZSA7CiAgICAgICAgaWNvU3RhdGUgPSBJY29TdGF0ZS5QYXVzZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gY29udGludWVJY28oKSBleHRlcm5hbCBBdXRoIHsKICAgICAgICByZXF1aXJlKGljb1N0YXRlID09IEljb1N0YXRlLlBhdXNlZCk7CiAgICAgICAgaWNvU3RhdGUgPSBwcmVJY29TdGF0ZTsKICAgIH0KICAgIAogICAgdWludCBwdWJsaWMgZmluaXNoVGltZSA9IDA7CiAgICBmdW5jdGlvbiBmaW5pc2hJY28oKSBleHRlcm5hbCBBdXRoIHsKICAgICAgICByZXF1aXJlKGljb1N0YXRlID09IEljb1N0YXRlLlJ1bm5pbmcpOwogICAgICAgIGljb1N0YXRlID0gSWNvU3RhdGUuRmluaXNoZWQ7CiAgICAgICAgZmluaXNoVGltZSA9IGJsb2NrLnRpbWVzdGFtcDsKICAgIH0KICAgIAogICAgdWludCBwdWJsaWMgdW5mcmVlemVTdGFydFRpbWUgPSAwOwogICAgZnVuY3Rpb24gc2V0VW5mcmVlemVTdGFydFRpbWUodWludCB0aW1lc3RhbXApIGV4dGVybmFsIEF1dGh7CiAgICAgICAgdW5mcmVlemVTdGFydFRpbWUgPSB0aW1lc3RhbXA7CiAgICB9CiAgICAKICAgIG1hcHBpbmcgKHVpbnQgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSkgIHB1YmxpYyAgdW5mcm96ZTsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgICAgICAgICAgICAgICAgIHB1YmxpYyAgdXNlckJ1eXM7CiAgICBtYXBwaW5nICh1aW50ID0+IGJvb2wpICBwdWJsaWMgIGJ1cm5lZDsKICAgIAogICAgLy8gYW55b25lIGNhbiBidXJuCiAgICBmdW5jdGlvbiBidXJuKEljb1N0YXRlIHN0YXRlKSBleHRlcm5hbCBBdXRoewogICAgICAgIHVpbnQyNTYgYnVybkFtb3VudCA9IDA7CiAgICAgICAgLy9vbmx5IGJ1cm4gb25jZQogICAgICAgIGFzc2VydChidXJuZWRbdWludChzdGF0ZSldID09IGZhbHNlKTsKICAgICAgICBpZihzdGF0ZSA9PSBJY29TdGF0ZS5QcmVzYWxlMSAmJiAoaWNvU3RhdGUgPT0gSWNvU3RhdGUuUHJlc2FsZTIgfHwgaWNvU3RhdGUgPT0gSWNvU3RhdGUuRmluaXNoZWQpKXsKICAgICAgICAgICAgYXNzZXJ0KFByZXNhbGUxU29sZCA8IHRva2Vuc0ZvclByZXNhbGUxKTsKICAgICAgICAgICAgYnVybkFtb3VudCA9IHNhZmVTdWIodG9rZW5zRm9yUHJlc2FsZTEsUHJlc2FsZTFTb2xkKTsKICAgICAgICB9IAogICAgICAgIGVsc2UgaWYoc3RhdGUgPT0gSWNvU3RhdGUuUHJlc2FsZTIgJiYgaWNvU3RhdGUgPT0gSWNvU3RhdGUuRmluaXNoZWQpeyAKICAgICAgICAgICAgYXNzZXJ0KFByZXNhbGUyU29sZCA8IHRva2Vuc0ZvclByZXNhbGUyKTsKICAgICAgICAgICAgYnVybkFtb3VudCA9IHNhZmVTdWIodG9rZW5zRm9yUHJlc2FsZTIsUHJlc2FsZTJTb2xkKTsKICAgICAgICB9IAogICAgICAgIGVsc2UgaWYoc3RhdGUgPT0gSWNvU3RhdGUuRmluaXNoZWQgJiYgaWNvU3RhdGUgPT0gSWNvU3RhdGUuRmluaXNoZWQpewogICAgICAgICAgICBhc3NlcnQoUHVibGljU29sZCA8IHRva2Vuc0ZvclNhbGUpOwogICAgICAgICAgICBidXJuQW1vdW50ID0gc2FmZVN1Yih0b2tlbnNGb3JTYWxlLFB1YmxpY1NvbGQpOwogICAgICAgIH0gCiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KCiAgICAgICAgRFJDLmJ1cm4oYnVybkFtb3VudCk7CiAgICAgICAgYnVybmVkW3VpbnQoc3RhdGUpXSA9IHRydWU7CiAgICB9CiAgICAgICAgCiAgICBmdW5jdGlvbiBwcmVzYWxlVW5mcmVlemUodWludCBzdGVwKSBleHRlcm5hbHsKICAgICAgICAKICAgICAgICBhc3NlcnQodW5mcm96ZVtzdGVwXVttc2cuc2VuZGVyXSA9PSBmYWxzZSk7CiAgICAgICAgYXNzZXJ0KERSQy5mcmVlemVPZihtc2cuc2VuZGVyKSA+IDAgKTsKICAgICAgICBhc3NlcnQodW5mcmVlemVTdGFydFRpbWUgPiAwKTsKICAgICAgICBhc3NlcnQobXNnLnNlbmRlciAhPSBwbGF0Zm9ybSk7CiAgICAgICAgCiAgICAgICAgdWludDI1NiBmcmVlemUgID0gRFJDLmZyZWV6ZU9mKG1zZy5zZW5kZXIpOwogICAgICAgIHVpbnQyNTYgdW5mcmVlemVBbW91bnQgPSAwOwoKICAgICAgICBpZihzdGVwID09IDEpewogICAgICAgICAgICByZXF1aXJlKCBibG9jay50aW1lc3RhbXAgPiAodW5mcmVlemVTdGFydFRpbWUgKyAzMCBkYXlzKSk7CiAgICAgICAgICAgIHVuZnJlZXplQW1vdW50ID0gZnJlZXplIC8gMzsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZihzdGVwID09IDIpewogICAgICAgICAgICByZXF1aXJlKCBibG9jay50aW1lc3RhbXAgPiAodW5mcmVlemVTdGFydFRpbWUgKyA2MCBkYXlzKSk7CiAgICAgICAgICAgIHVuZnJlZXplQW1vdW50ID0gZnJlZXplIC8gMjsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZihzdGVwID09IDMpewogICAgICAgICAgICByZXF1aXJlKCBibG9jay50aW1lc3RhbXAgPiAodW5mcmVlemVTdGFydFRpbWUgKyA5MCBkYXlzKSk7CiAgICAgICAgICAgIHVuZnJlZXplQW1vdW50ID0gZnJlZXplOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgICB0aHJvdyA7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJlcXVpcmUodW5mcmVlemVBbW91bnQgPiAwICk7CiAgICAgICAgCiAgICAgICAgRFJDLnVuZnJlZXplKG1zZy5zZW5kZXIsdW5mcmVlemVBbW91bnQpOwogICAgICAgIHVuZnJvemVbc3RlcF1bbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgfQogICAgCiAgICAvL3RlYW0gdW5mcmVlemUKICAgIGZ1bmN0aW9uIHRlYW1VbmZyZWV6ZSgpIGV4dGVybmFsewogICAgICAgIHVpbnQgbW9udGggPSA2OwogICAgICAgIAogICAgICAgIGFzc2VydChEUkMuZnJlZXplT2YobXNnLnNlbmRlcikgPiAwICk7CiAgICAgICAgYXNzZXJ0KGZpbmlzaFRpbWUgPiAwKTsKICAgICAgICBhc3NlcnQobXNnLnNlbmRlciA9PSB0ZWFtKTsKICAgICAgICB1aW50IHN0ZXAgPSBzYWZlU3ViKGJsb2NrLnRpbWVzdGFtcCwgZmluaXNoVGltZSkgLyAoMzYwMCoyNCozMCk7CiAgICAgICAgCiAgICAgICAgdWludDI1NiBmcmVlemUgID0gRFJDLmZyZWV6ZU9mKG1zZy5zZW5kZXIpOwogICAgICAgIHVpbnQyNTYgdW5mcmVlemVBbW91bnQgPSAwOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgcGVyID0gdG9rZW5zRm9yVGVhbSAvIG1vbnRoOwogICAgICAgIAogICAgICAgIGZvcih1aW50IGkgPSAwIDtpIDw9IHN0ZXAgJiYgaSA8IG1vbnRoO2krKyl7CiAgICAgICAgICAgIGlmKHVuZnJvemVbaV1bbXNnLnNlbmRlcl0gPT0gZmFsc2UpewogICAgICAgICAgICAgICAgdW5mcmVlemVBbW91bnQgKz0gcGVyOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJlcXVpcmUodW5mcmVlemVBbW91bnQgPiAwICk7CiAgICAgICAgcmVxdWlyZSh1bmZyZWV6ZUFtb3VudCA8PSBmcmVlemUpOwoKICAgICAgICBEUkMudW5mcmVlemUobXNnLnNlbmRlcix1bmZyZWV6ZUFtb3VudCk7CiAgICAgICAgZm9yKHVpbnQgaiA9IDA7IGogPD0gc3RlcCAmJiBpIDwgbW9udGg7IGorKyl7CiAgICAgICAgICAgIHVuZnJvemVbal1bbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy9wbGF0Zm9ybSB1bmZyZWV6ZQogICAgIGZ1bmN0aW9uIHBsYXRmb3JtVW5mcmVlemUoKSBleHRlcm5hbHsKICAgICAgICB1aW50IG1vbnRoID0gMTI7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0KERSQy5mcmVlemVPZihtc2cuc2VuZGVyKSA+IDAgKTsKICAgICAgICBhc3NlcnQoZmluaXNoVGltZSA+IDApOwogICAgICAgIGFzc2VydChtc2cuc2VuZGVyID09IHBsYXRmb3JtKTsKICAgICAgICB1aW50IHN0ZXAgPSBzYWZlU3ViKGJsb2NrLnRpbWVzdGFtcCwgZmluaXNoVGltZSkgLyAoMzYwMCoyNCozMCk7CiAgICAgICAgCiAgICAgICAgdWludDI1NiBmcmVlemUgID0gRFJDLmZyZWV6ZU9mKG1zZy5zZW5kZXIpOwogICAgICAgIHVpbnQyNTYgdW5mcmVlemVBbW91bnQgPSAwOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgcGVyID0gdG9rZW5zRm9yUGxhdGZvcm0gLyBtb250aDsKICAgICAgICAKICAgICAgICBmb3IodWludCBpID0gMCA7aSA8PSBzdGVwICYmIGkgPCBtb250aDtpKyspewogICAgICAgICAgICBpZih1bmZyb3plW2ldW21zZy5zZW5kZXJdID09IGZhbHNlKXsKICAgICAgICAgICAgICAgIHVuZnJlZXplQW1vdW50ICs9IHBlcjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXF1aXJlKHVuZnJlZXplQW1vdW50ID4gMCApOwogICAgICAgIHJlcXVpcmUodW5mcmVlemVBbW91bnQgPD0gZnJlZXplKTsKCiAgICAgICAgRFJDLnVuZnJlZXplKG1zZy5zZW5kZXIsdW5mcmVlemVBbW91bnQpOwogICAgICAgIGZvcih1aW50IGogPSAwOyBqIDw9IHN0ZXAgJiYgaSA8IG1vbnRoOyBqKyspewogICAgICAgICAgICB1bmZyb3plW2pdW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vIENvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBEUkNDcm93U2FsZSgpIHB1YmxpYyB7CgogICAgfQoKICAgIGZ1bmN0aW9uIGluaXRpYWxpemUoRFJDVG9rZW4gZHJjLGFkZHJlc3MgX3RlYW0sYWRkcmVzcyBfcGFybnRlcixhZGRyZXNzIF9wbGF0Zm9ybSxhZGRyZXNzIF9wcmVzYWxlMSkgQXV0aCBwdWJsaWMgewogICAgICAgIGFzc2VydChhZGRyZXNzKERSQykgPT0gYWRkcmVzcygwKSk7CiAgICAgICAgYXNzZXJ0KGRyYy5vd25lcigpID09IGFkZHJlc3ModGhpcykpOwogICAgICAgIGFzc2VydChkcmMudG90YWxTdXBwbHkoKSA9PSAwKTsKICAgICAgICBhc3NlcnQoX3RlYW0gIT0gX3Bhcm50ZXIgJiYgX3Bhcm50ZXIgIT0gX3BsYXRmb3JtICYmIF90ZWFtICE9IF9wbGF0Zm9ybSk7CiAgICAgICAgCiAgICAgICAgdGVhbSA9X3RlYW07CiAgICAgICAgcGFybnRlcj1fcGFybnRlcjsKICAgICAgICBwbGF0Zm9ybT1fcGxhdGZvcm07CiAgICAgICAgcHJlc2FsZTEgPSBfcHJlc2FsZTE7CgogICAgICAgIERSQyA9IGRyYzsKICAgICAgICBEUkMubWludCh0b3RhbFN1cHBseSk7CiAgICAgICAgCiAgICAgICAgLy8gdHJhbnNmZXIgdG8gdGVhbSBwYXJ0bmVyIHBsYXRmb3JtIAogICAgICAgIERSQy5wdXNoKHRlYW0sIHRva2Vuc0ZvclRlYW0pOwogICAgICAgIERSQy5mcmVlemUodGVhbSx0b2tlbnNGb3JUZWFtKTsKICAgICAgICAKICAgICAgICBEUkMucHVzaChwYXJudGVyLCB0b2tlbnNGb3JQYXJudGVyKTsKICAgICAgICAKICAgICAgICAvLyBmcmVlemUKICAgICAgICBEUkMucHVzaChwbGF0Zm9ybSwgdG9rZW5zRm9yUGxhdGZvcm0pOwogICAgICAgIERSQy5mcmVlemUocGxhdGZvcm0sdG9rZW5zRm9yUGxhdGZvcm0pOwogICAgICAgIAogICAgICAgIERSQy5wdXNoKHByZXNhbGUxLCB0b2tlbnNGb3JQcmVzYWxlMSk7CiAgICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHB1YmxpYyB7CiAgICAgICAgYnV5KCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5KCkgIHBheWFibGUgcHVibGljewogICAgICAgIHJlcXVpcmUoIChpY29TdGF0ZSA9PSBJY29TdGF0ZS5SdW5uaW5nKSAgfHwKICAgICAgICAgICAgICAgICAoaWNvU3RhdGUgPT0gSWNvU3RhdGUuUHJlc2FsZTEpIHx8IAogICAgICAgICAgICAgICAgIChpY29TdGF0ZSA9PSBJY29TdGF0ZS5QcmVzYWxlMikgKTsKICAgICAgICAvLyByZXF1aXJlICAgICAgICAgIAogICAgICAgIGlmKChpY29TdGF0ZSA9PSBJY29TdGF0ZS5QcmVzYWxlMSkgfHwgKGljb1N0YXRlID09IEljb1N0YXRlLlByZXNhbGUyKSl7CiAgICAgICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IDEwIGV0aGVyKTsKICAgICAgICB9IAogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSAwLjAxIGV0aGVyKTsKICAgICAgICAgICAgLy9saW1pdCBwZWVyIHVzZXIgbGVzcyB0aGFuIDEwIGV0aAogICAgICAgICAgICByZXF1aXJlKHVzZXJCdXlzW21zZy5zZW5kZXJdICsgbXNnLnZhbHVlIDw9IDEwIGV0aGVyKTsKICAgICAgICB9CiAKCiAgICAgICAgdWludDI1NiBhbW91bnQgPSBnZXREUkNUb3RhbChtc2cudmFsdWUpOwogICAgICAgIHVpbnQyNTYgc29sZCA9IDA7CiAgICAgICAgdWludDI1NiBjYW5idXkgPSAwOwogICAgICAgIChzb2xkLGNhbmJ1eSkgPSBnZXRTb2xkKCk7CgogICAgICAgIC8vIHJlZnVuZCBldGggZm9yIGxhc3QgYnV5CiAgICAgICAgaWYgKHNvbGQgKyBhbW91bnQgPiBjYW5idXkpewogICAgICAgICAgICB1aW50MjU2IGRlbHRhID0gc29sZCArIGFtb3VudCAtIGNhbmJ1eTsKICAgICAgICAgICAgdWludDI1NiByZWZ1bmRNb25leSA9IG1zZy52YWx1ZSAqIGRlbHRhIC8gYW1vdW50OwogICAgICAgICAgICBhbW91bnQgPSBjYW5idXktc29sZDsKICAgICAgICAgICAgcmVxdWlyZShyZWZ1bmRNb25leSA+IDApOwogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHJlZnVuZE1vbmV5KTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmVxdWlyZShhbW91bnQgPiAwKTsKICAgIAogICAgICAgIERSQy5wdXNoKG1zZy5zZW5kZXIsIGFtb3VudCk7CiAgICAgICAgCiAgICAgICAgLy9wcmVzYWxlIGF1dG8gZnJlZXplCiAgICAgICAgaWYoKGljb1N0YXRlID09IEljb1N0YXRlLlByZXNhbGUxKSAgfHwgKGljb1N0YXRlID09IEljb1N0YXRlLlByZXNhbGUyKSl7CiAgICAgICAgICAgIERSQy5mcmVlemUobXNnLnNlbmRlcixhbW91bnQpOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgICAvL2ZvciBsaW1pdCBhbW91bnQgcGVlciB1c2VyIAogICAgICAgICAgICB1c2VyQnV5c1ttc2cuc2VuZGVyXSArPSBhbW91bnQ7CiAgICAgICAgfQogICAgICAgIAogICAgICAgYWRkU29sZChhbW91bnQpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRTb2xkKCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKCB1aW50MjU2LHVpbnQyNTYpewogICAgICAgIGlmKGljb1N0YXRlID09IEljb1N0YXRlLlByZXNhbGUxKXsKICAgICAgICAgICAgcmV0dXJuKFByZXNhbGUxU29sZCx0b2tlbnNGb3JQcmVzYWxlMSk7CiAgICAgICAgfSAKICAgICAgICBlbHNlIGlmKGljb1N0YXRlID09IEljb1N0YXRlLlByZXNhbGUyKXsKICAgICAgICAgICAgcmV0dXJuKFByZXNhbGUyU29sZCx0b2tlbnNGb3JQcmVzYWxlMik7CiAgICAgICAgfSAKICAgICAgICBlbHNlIGlmKGljb1N0YXRlID09IEljb1N0YXRlLlJ1bm5pbmcpewogICAgICAgICAgICByZXR1cm4oUHVibGljU29sZCx0b2tlbnNGb3JTYWxlKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGFkZFNvbGQodWludDI1NiBhbW91bnQpIHByaXZhdGV7CiAgICAgICAgaWYoaWNvU3RhdGUgPT0gSWNvU3RhdGUuUHJlc2FsZTEpewogICAgICAgICAgICBQcmVzYWxlMVNvbGQgKz0gYW1vdW50OwogICAgICAgIH0gCiAgICAgICAgZWxzZSBpZihpY29TdGF0ZSA9PSBJY29TdGF0ZS5QcmVzYWxlMil7CiAgICAgICAgICAgIFByZXNhbGUyU29sZCArPSBhbW91bnQ7CiAgICAgICAgfSAKICAgICAgICBlbHNlIGlmKGljb1N0YXRlID09IEljb1N0YXRlLlJ1bm5pbmcpewogICAgICAgICAgICBQdWJsaWNTb2xkICs9IGFtb3VudDsKICAgICAgICB9CiAgICAgICAgZWxzZXsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvL2Rpc2NvdW50CiAgICBmdW5jdGlvbiBnZXREUkNUb3RhbCh1aW50MjU2IF9ldGgpIHB1YmxpYyB2aWV3IHJldHVybnMgKCB1aW50MjU2KQogICAgewogICAgICAgIGlmKGljb1N0YXRlID09IEljb1N0YXRlLlByZXNhbGUxKQogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIHNhZmVNdWx0KF9ldGggLCBwcmVzYWxlUGVyRXRoKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZihpY29TdGF0ZSA9PSBJY29TdGF0ZS5QcmVzYWxlMikKICAgICAgICB7CiAgICAgICAgICAgcmV0dXJuIHNhZmVNdWx0KF9ldGggLCBwcmVzYWxlUGVyRXRoKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzYWZlTXVsdChfZXRoICwgdG9rZW5zUGVyRXRoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIGV4dGVybmFsIE93bmVyIHBheWFibGUgewogICAgICAgIHJlcXVpcmUodGhpcy5iYWxhbmNlID4gMCApOwoKICAgICAgICByZXF1aXJlKG93bmVyLnNlbmQodGhpcy5iYWxhbmNlKSk7CiAgICB9Cgp9'.
	

]
