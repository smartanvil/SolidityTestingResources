Class {
	#name : #SRT86a9925d7aa172f2c0307154fb736e89f32c6155,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT86a9925d7aa172f2c0307154fb736e89f32c6155 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjsKCgovLyBFdGhlcm9sbCBGdW5jdGlvbnMKY29udHJhY3QgRFNTYWZlQWRkU3ViIHsKICAgIGZ1bmN0aW9uIHNhZmVUb0FkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAoYSArIGIgPj0gYSk7CiAgICB9CiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmVxdWlyZShzYWZlVG9BZGQoYSwgYikpOwogICAgICAgIHJldHVybiBhICsgYjsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlVG9TdWJ0cmFjdCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAoYiA8PSBhKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmVxdWlyZShzYWZlVG9TdWJ0cmFjdChhLCBiKSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQp9Cgpjb250cmFjdCBNeURpY2U3NSBpcyBEU1NhZmVBZGRTdWIgewoKICAgIC8qCiAgICAgKiBjaGVja3MgcGxheWVyIHByb2ZpdCBhbmQgbnVtYmVyIGlzIHdpdGhpbiByYW5nZQogICAgKi8KICAgIG1vZGlmaWVyIGJldElzVmFsaWQodWludCBfYmV0U2l6ZSwgdWludCBfcGxheWVyTnVtYmVyKSB7CiAgICAgICAgCiAgICByZXF1aXJlKCgoKChfYmV0U2l6ZSAqICgxMDAwMC0oc2FmZVN1YihfcGxheWVyTnVtYmVyLDEpKSkpIC8gKHNhZmVTdWIoX3BsYXllck51bWJlciwxKSkrX2JldFNpemUpKSpob3VzZUVkZ2UvaG91c2VFZGdlRGl2aXNvciktX2JldFNpemUgPD0gbWF4UHJvZml0KTsKCiAgICByZXF1aXJlKF9wbGF5ZXJOdW1iZXIgPCBtYXhOdW1iZXIpOwogICAgcmVxdWlyZShfYmV0U2l6ZSA+PSBtaW5CZXQpOwogICAgXzsKICAgIH0KCiAgICAvKgogICAgICogY2hlY2tzIGdhbWUgaXMgY3VycmVudGx5IGFjdGl2ZQogICAgKi8KICAgIG1vZGlmaWVyIGdhbWVJc0FjdGl2ZSB7CiAgICAgIHJlcXVpcmUoZ2FtZVBhdXNlZCA9PSBmYWxzZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKgogICAgICogY2hlY2tzIHBheW91dHMgYXJlIGN1cnJlbnRseSBhY3RpdmUKICAgICovCiAgICBtb2RpZmllciBwYXlvdXRzQXJlQWN0aXZlIHsKICAgICAgICByZXF1aXJlKHBheW91dHNQYXVzZWQgPT0gZmFsc2UpOwogICAgICAgIF87CiAgICB9CgogCiAgICAvKgogICAgICogY2hlY2tzIG9ubHkgb3duZXIgYWRkcmVzcyBpcyBjYWxsaW5nCiAgICAqLwogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgICBfOwogICAgfQoKICAgIC8qCiAgICAgKiBnYW1lIHZhcnMKICAgICovCgogICAgdWludCBjb25zdGFudCBwdWJsaWMgbWF4QmV0RGl2aXNvciA9IDEwMDAwMDA7CiAgICB1aW50IGNvbnN0YW50IHB1YmxpYyBob3VzZUVkZ2VEaXZpc29yID0gMTAwMDsKICAgIGJvb2wgcHVibGljIGdhbWVQYXVzZWQ7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGJvb2wgcHVibGljIHBheW91dHNQYXVzZWQ7CiAgICB1aW50IHB1YmxpYyBjb250cmFjdEJhbGFuY2U7CiAgICB1aW50IHB1YmxpYyBob3VzZUVkZ2U7CiAgICB1aW50IHB1YmxpYyBtYXhQcm9maXQ7CiAgICB1aW50IHB1YmxpYyBtYXhQcm9maXRBc1BlcmNlbnRPZkhvdXNlOwogICAgdWludCBwdWJsaWMgbWluQmV0OwogICAgdWludCBwdWJsaWMgdG90YWxCZXRzOwogICAgdWludCBwdWJsaWMgdG90YWxVc2VyUHJvZml0OwoKCiAgICB1aW50IHByaXZhdGUgcmFuZG9tTnVtYmVyOyAgICAgICAgICAKICAgIHVpbnQgcHJpdmF0ZSBtYXhOdW1iZXIgPSAxMDAwMDsKICAgIHVpbnQgcHJpdmF0ZSB1bmRlck51bWJlciA9IDc1MDA7CgogICAgc3RydWN0IEJldAogICAgewogICAgICAgIGFkZHJlc3MgYmV0dG9yQWRkcmVzczsKICAgICAgICB1aW50ICAgIGJldFNpemU7CiAgICAgICAgdWludCAgICBiZXRJRDsKICAgIH0KCiAgICB1aW50IHB1YmxpYyBudW1FbGVtZW50cyA9IDA7CiAgICBCZXRbXSBwZW5kaW5nQmV0czsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHBsYXllclBlbmRpbmdXaXRoZHJhd2FsczsKCiAgICAvKgogICAgICogZXZlbnRzCiAgICAqLwogICAgZXZlbnQgTG9nQmV0U3RhcnQodWludCBpbmRleGVkIGJldElEKTsKCiAgICAvKiBTdGF0dXM6IDA9bG9zZSwgMT13aW4sIDI9d2luICsgZmFpbGVkIHNlbmQsKi8KICAgIGV2ZW50IExvZ1Jlc3VsdCh1aW50IGluZGV4ZWQgQmV0SUQsIGFkZHJlc3MgaW5kZXhlZCBQbGF5ZXJBZGRyZXNzLCB1aW50IGluZGV4ZWQgUGxheWVyTnVtYmVyLCB1aW50IERpY2VSZXN1bHQsIHVpbnQgVmFsdWUsIGludCBTdGF0dXMsdWludCBCZXRWYWx1ZSx1aW50IHRhcmdldE51bWJlcik7CiAgICAvKiBsb2cgb3duZXIgdHJhbnNmZXJzICovCiAgICBldmVudCBMb2dPd25lclRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBTZW50VG9BZGRyZXNzLCB1aW50IGluZGV4ZWQgQW1vdW50VHJhbnNmZXJyZWQpOwoKICAgIC8qCiAgICAgKiBpbml0CiAgICAqLwogICAgZnVuY3Rpb24gTXlEaWNlNzUoKSB7CgogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKCiAgICAgICAgb3duZXJTZXRIb3VzZUVkZ2UoOTM1KTsKCiAgICAgICAgb3duZXJTZXRNYXhQcm9maXRBc1BlcmNlbnRPZkhvdXNlKDIwMDAwKTsKICAgICAKICAgICAgICBvd25lclNldE1pbkJldCgyMDAwMDAwMDAwMDAwMDAwMCk7CiAgICB9CgogICAgLypUaGUgZ2VuZXJhdGlvbiBvZiByYW5kb20gbnVtYmVycyBpcyBnZW5lcmF0ZWQgYnkgdGhlIGJhbmtlcidzIHNlZWQgKyBjdXJyZW50IGJsb2NrIG9mIGluZm9ybWF0aW9uCiAgICAqMSxUaGUgYmFua2VyJ3Mgc2VlZCBpcyB1bnRydXN0d29ydGh5LCBidXQgdGhlIGN1cnJlbnQgYmxvY2sgaW5mb3JtYXRpb24gYmFua2VyIGNhbiBub3QgbWFuaXB1bGF0ZSwgaW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgdGhlIGJhbmtlciBjYW4gbm90IG1hbmlwdWxhdGUgdGhlIGZpbmFsIHJhbmRvbSBudW1iZXIgcmVzdWx0cwogICAgKjIsQmxvY2sgaW5mb3JtYXRpb24gYmVjYXVzZSB0aGUgd2hvbGUgbmV0d29yayBpcyBvcGVuLCB0aGVyZSB3aWxsIGJlIG1hbGljaW91cyBwbGF5ZXJzIHRvIHVzZSB0aGlzIHBvaW50IHRvIGF0dGFjayB0aGUgYmFua2VyLCBzbyB3aXRoIHRoZSBiYW5rZXIgaXNzdWVkIHRoZSBzZWVkcyB0byBlbnN1cmUgdGhhdCB0aGUgYmFua2VyIHdpbGwgbm90IGJlIGF0dGFja2VkIGJ5IG1hbGljaW91cyBwbGF5ZXJzCiAgICAqLwogICAKICAgIGZ1bmN0aW9uIEdldFJhbmRvbU51bWJlcih1aW50MzIgc2VlZCkgaW50ZXJuYWwgCiAgICAgICAgcmV0dXJucyh1aW50IHJhbmRvbU51bSkKICAgIHsKICAgICAgICByYW5kb21OdW1iZXIgPSByYW5kb21OdW1iZXIgJSBibG9jay50aW1lc3RhbXAgKyB1aW50MjU2KGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXIgLSAxKSk7CiAgICAgICAgcmFuZG9tTnVtYmVyID0gcmFuZG9tTnVtYmVyICsgYmxvY2sudGltZXN0YW1wICogYmxvY2suZGlmZmljdWx0eSAqIGJsb2NrLm51bWJlciArIDE7CgogICAgICAgIHJhbmRvbU51bWJlciA9IHVpbnQoc2hhMyhyYW5kb21OdW1iZXIsc2VlZCkpOwoKICAgICAgICByZXR1cm4gKG1heE51bWJlciAtIHJhbmRvbU51bWJlciAlIG1heE51bWJlcik7CiAgICB9CgoKICAgIGZ1bmN0aW9uIFN0YXJ0Um9sbERpY2UodWludDMyIHNlZWQpIHB1YmxpYwogICAgICAgIGdhbWVJc0FjdGl2ZQogICAgICAgIG9ubHlPd25lcgogICAgewogICAgICAgIGlmKG51bUVsZW1lbnRzID09IDApCiAgICAgICAgICByZXR1cm47CgogICAgICAgIHVpbnQgaSA9IG51bUVsZW1lbnRzIC0gMTsKICAgICAgICB1aW50IHJhbmRSZXN1bHQgPSBHZXRSYW5kb21OdW1iZXIoc2VlZCk7CiAgICAgICAgLyoKICAgICAgICAqIHBheSB3aW5uZXIKICAgICAgICAqIHVwZGF0ZSBjb250cmFjdCBiYWxhbmNlIHRvIGNhbGN1bGF0ZSBuZXcgbWF4IGJldAogICAgICAgICogc2VuZCByZXdhcmQKICAgICAgICAqIGlmIHNlbmQgb2YgcmV3YXJkIGZhaWxzIHNhdmUgdmFsdWUgdG8gcGxheWVyUGVuZGluZ1dpdGhkcmF3YWxzCiAgICAgICAgKi8KICAgICAgICBpZihyYW5kUmVzdWx0IDwgdW5kZXJOdW1iZXIpewoKICAgICAgICAgICAgdWludCBwbGF5ZXJQcm9maXQgPSAoKCgocGVuZGluZ0JldHNbaV0uYmV0U2l6ZSAqIChtYXhOdW1iZXItKHNhZmVTdWIodW5kZXJOdW1iZXIsMSkpKSkgLyAoc2FmZVN1Yih1bmRlck51bWJlciwxKSkrcGVuZGluZ0JldHNbaV0uYmV0U2l6ZSkpKmhvdXNlRWRnZS9ob3VzZUVkZ2VEaXZpc29yKS1wZW5kaW5nQmV0c1tpXS5iZXRTaXplOwoKICAgICAgICAgICAgLyogc2FmZWx5IHJlZHVjZSBjb250cmFjdCBiYWxhbmNlIGJ5IHBsYXllciBwcm9maXQgKi8KICAgICAgICAgICAgY29udHJhY3RCYWxhbmNlID0gc2FmZVN1Yihjb250cmFjdEJhbGFuY2UsIHBsYXllclByb2ZpdCk7CgogICAgICAgICAgICAvKiBzYWZlbHkgY2FsY3VsYXRlIHRvdGFsIHBheW91dCBhcyBwbGF5ZXIgcHJvZml0IHBsdXMgb3JpZ2luYWwgd2FnZXIgKi8KICAgICAgICAgICAgdWludCByZXdhcmQgPSBzYWZlQWRkKHBsYXllclByb2ZpdCwgcGVuZGluZ0JldHNbaV0uYmV0U2l6ZSk7CgogICAgICAgICAgICB0b3RhbFVzZXJQcm9maXQgPSB0b3RhbFVzZXJQcm9maXQgKyBwbGF5ZXJQcm9maXQ7IC8vIHRvdGFsIHByb2ZpdHMKCiAgICAgICAgICAgIExvZ1Jlc3VsdChwZW5kaW5nQmV0c1tpXS5iZXRJRCwgcGVuZGluZ0JldHNbaV0uYmV0dG9yQWRkcmVzcywgdW5kZXJOdW1iZXIsIHJhbmRSZXN1bHQsIHJld2FyZCwgMSwgcGVuZGluZ0JldHNbaV0uYmV0U2l6ZSx1bmRlck51bWJlcik7CgogICAgICAgICAgICAvKiB1cGRhdGUgbWF4aW11bSBwcm9maXQgKi8KICAgICAgICAgICAgc2V0TWF4UHJvZml0KCk7CgogICAgICAgICAgICAvKgogICAgICAgICAgICAqIHNlbmQgd2luIC0gZXh0ZXJuYWwgY2FsbCB0byBhbiB1bnRydXN0ZWQgY29udHJhY3QKICAgICAgICAgICAgKiBpZiBzZW5kIGZhaWxzIG1hcCByZXdhcmQgdmFsdWUgdG8gcGxheWVyUGVuZGluZ1dpdGhkcmF3YWxzW2FkZHJlc3NdCiAgICAgICAgICAgICogZm9yIHdpdGhkcmF3YWwgbGF0ZXIgdmlhIHBsYXllcldpdGhkcmF3UGVuZGluZ1RyYW5zYWN0aW9ucwogICAgICAgICAgICAqLwogICAgICAgICAgICBpZighcGVuZGluZ0JldHNbaV0uYmV0dG9yQWRkcmVzcy5zZW5kKHJld2FyZCkpewogICAgICAgICAgICAgICAgTG9nUmVzdWx0KHBlbmRpbmdCZXRzW2ldLmJldElELCBwZW5kaW5nQmV0c1tpXS5iZXR0b3JBZGRyZXNzLCB1bmRlck51bWJlciwgcmFuZFJlc3VsdCwgcmV3YXJkLCAyLCBwZW5kaW5nQmV0c1tpXS5iZXRTaXplLHVuZGVyTnVtYmVyKTsKCiAgICAgICAgICAgICAgICAvKiBpZiBzZW5kIGZhaWxlZCBsZXQgcGxheWVyIHdpdGhkcmF3IHZpYSBwbGF5ZXJXaXRoZHJhd1BlbmRpbmdUcmFuc2FjdGlvbnMgKi8KICAgICAgICAgICAgICAgIHBsYXllclBlbmRpbmdXaXRoZHJhd2Fsc1twZW5kaW5nQmV0c1tpXS5iZXR0b3JBZGRyZXNzXSA9IHNhZmVBZGQocGxheWVyUGVuZGluZ1dpdGhkcmF3YWxzW3BlbmRpbmdCZXRzW2ldLmJldHRvckFkZHJlc3NdLCByZXdhcmQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBudW1FbGVtZW50cyAtPSAxOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvKgogICAgICAgICogbm8gd2luCiAgICAgICAgKiBzZW5kIDEgd2VpIHRvIGEgbG9zaW5nIGJldAogICAgICAgICogdXBkYXRlIGNvbnRyYWN0IGJhbGFuY2UgdG8gY2FsY3VsYXRlIG5ldyBtYXggYmV0CiAgICAgICAgKi8KICAgICAgICBpZihyYW5kUmVzdWx0ID49IHVuZGVyTnVtYmVyKXsKCiAgICAgICAgICAgIExvZ1Jlc3VsdChwZW5kaW5nQmV0c1tpXS5iZXRJRCwgcGVuZGluZ0JldHNbaV0uYmV0dG9yQWRkcmVzcywgdW5kZXJOdW1iZXIsIHJhbmRSZXN1bHQsIHBlbmRpbmdCZXRzW2ldLmJldFNpemUsIDAsIHBlbmRpbmdCZXRzW2ldLmJldFNpemUsdW5kZXJOdW1iZXIpOwoKICAgICAgICAgICAgLyoKICAgICAgICAgICAgKiAgc2FmZSBhZGp1c3QgY29udHJhY3RCYWxhbmNlCiAgICAgICAgICAgICogIHNldE1heFByb2ZpdAogICAgICAgICAgICAqICBzZW5kIDEgd2VpIHRvIGxvc2luZyBiZXQKICAgICAgICAgICAgKi8KICAgICAgICAgICAgY29udHJhY3RCYWxhbmNlID0gc2FmZUFkZChjb250cmFjdEJhbGFuY2UsIHBlbmRpbmdCZXRzW2ldLmJldFNpemUtMSk7CgogICAgICAgICAgICAvKiB1cGRhdGUgbWF4aW11bSBwcm9maXQgKi8KICAgICAgICAgICAgc2V0TWF4UHJvZml0KCk7CgogICAgICAgICAgICAvKgogICAgICAgICAgICAqIHNlbmQgMSB3ZWkgLSBleHRlcm5hbCBjYWxsIHRvIGFuIHVudHJ1c3RlZCBjb250cmFjdAogICAgICAgICAgICAqLwogICAgICAgICAgICBpZighcGVuZGluZ0JldHNbaV0uYmV0dG9yQWRkcmVzcy5zZW5kKDEpKXsKICAgICAgICAgICAgICAgIC8qIGlmIHNlbmQgZmFpbGVkIGxldCBwbGF5ZXIgd2l0aGRyYXcgdmlhIHBsYXllcldpdGhkcmF3UGVuZGluZ1RyYW5zYWN0aW9ucyAqLwogICAgICAgICAgICAgICAgcGxheWVyUGVuZGluZ1dpdGhkcmF3YWxzW3BlbmRpbmdCZXRzW2ldLmJldHRvckFkZHJlc3NdID0gc2FmZUFkZChwbGF5ZXJQZW5kaW5nV2l0aGRyYXdhbHNbcGVuZGluZ0JldHNbaV0uYmV0dG9yQWRkcmVzc10sIDEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBudW1FbGVtZW50cyAtPSAxOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgfQoKICAgIC8qCiAgICAgKiBwdWJsaWMgZnVuY3Rpb24KICAgICAqIHBsYXllciBzdWJtaXQgYmV0CiAgICAgKiBvbmx5IGlmIGdhbWUgaXMgYWN0aXZlICYgYmV0IGlzIHZhbGlkIGNhbiBxdWVyeSBhbmQgc2V0IHBsYXllciB2YXJzCiAgICAqLwogICAgZnVuY3Rpb24gcGxheWVyUm9sbERpY2UoKSBwdWJsaWMKICAgICAgICBwYXlhYmxlCiAgICAgICAgZ2FtZUlzQWN0aXZlCiAgICAgICAgYmV0SXNWYWxpZChtc2cudmFsdWUsIHVuZGVyTnVtYmVyKQogICAgewogICAgICAgIHRvdGFsQmV0cysrOwoKICAgICAgICBCZXQgbWVtb3J5IGIgPSBCZXQobXNnLnNlbmRlcixtc2cudmFsdWUsdG90YWxCZXRzKTsKICAgICAgICBpZihudW1FbGVtZW50cyA9PSBwZW5kaW5nQmV0cy5sZW5ndGgpIHsKICAgICAgICAgICAgcGVuZGluZ0JldHMubGVuZ3RoICs9IDE7CiAgICAgICAgfQoKICAgICAgICBwZW5kaW5nQmV0c1tudW1FbGVtZW50cysrXSA9IGI7CgogICAgICAgIC8qCiAgICAgICAgTm90aWNlIHRoYXQgc29tZW9uZSBoYXMgYmV0dGluZyB0aGF0IHRoZSBiYW5rZXIgcmVjZWl2ZXMgTG9nQmV0U3RhcnQgYW5kIG11c3Qgc3RhcnQgU3RhcnRSb2xsRGljZSBpbW1lZGlhdGVseSB0byBlbnN1cmUgdGhhdCB0aGUgYmFua2VyIChpZiB0aGUgYmFua2VyIGlzIGEgbWluZXIpIGNhbiBub3QgbWFuaXB1bGF0ZSB0aGUgY3VycmVudCBibG9jayBpbmZvcm1hdGlvbiBpbiBvcmRlciB0byBhY2hpZXZlIG1hbmlwdWxhdGlvbiBvZiB0aGUgcmFuZG9tIG51bWJlciByZXN1bHRzLiBZb3UgY2FuIHZpZXcgdGhlIHRpbWUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBiZXR0aW5nIHRyYW5zYWN0aW9uIGFuZCB0aGUgYmFua2VyIFN0YXJ0Um9sbERpY2UgYnkgZXRoZXJzY2FuLmlvICh0aGUgZGlmZmVyZW5jZSBpbiB0aGUgbnVtYmVyIG9mIGJsb2NrcykKICAgICAgICAqLwogICAgICAgIExvZ0JldFN0YXJ0KHRvdGFsQmV0cyk7IAogICAgfQoKCiAgICAvKgogICAgKiBwdWJsaWMgZnVuY3Rpb24KICAgICogaW4gY2FzZSBvZiBhIGZhaWxlZCByZWZ1bmQgb3Igd2luIHNlbmQKICAgICovCiAgICBmdW5jdGlvbiBwbGF5ZXJXaXRoZHJhd1BlbmRpbmdUcmFuc2FjdGlvbnMoKSBwdWJsaWMKICAgICAgICBwYXlvdXRzQXJlQWN0aXZlCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgICB7CiAgICAgICAgdWludCB3aXRoZHJhd0Ftb3VudCA9IHBsYXllclBlbmRpbmdXaXRoZHJhd2Fsc1ttc2cuc2VuZGVyXTsKICAgICAgICBwbGF5ZXJQZW5kaW5nV2l0aGRyYXdhbHNbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIC8qIGV4dGVybmFsIGNhbGwgdG8gdW50cnVzdGVkIGNvbnRyYWN0ICovCiAgICAgICAgaWYgKG1zZy5zZW5kZXIuY2FsbC52YWx1ZSh3aXRoZHJhd0Ftb3VudCkoKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvKiBpZiBzZW5kIGZhaWxlZCByZXZlcnQgcGxheWVyUGVuZGluZ1dpdGhkcmF3YWxzW21zZy5zZW5kZXJdID0gMDsgKi8KICAgICAgICAgICAgLyogcGxheWVyIGNhbiB0cnkgdG8gd2l0aGRyYXcgYWdhaW4gbGF0ZXIgKi8KICAgICAgICAgICAgcGxheWVyUGVuZGluZ1dpdGhkcmF3YWxzW21zZy5zZW5kZXJdID0gd2l0aGRyYXdBbW91bnQ7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLyogY2hlY2sgZm9yIHBlbmRpbmcgd2l0aGRyYXdhbHMgICovCiAgICBmdW5jdGlvbiBwbGF5ZXJHZXRQZW5kaW5nVHhCeUFkZHJlc3MoYWRkcmVzcyBhZGRyZXNzVG9DaGVjaykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcGxheWVyUGVuZGluZ1dpdGhkcmF3YWxzW2FkZHJlc3NUb0NoZWNrXTsKICAgIH0KCiAgICAvKgogICAgKiBpbnRlcm5hbCBmdW5jdGlvbgogICAgKiBzZXRzIG1heCBwcm9maXQKICAgICovCiAgICBmdW5jdGlvbiBzZXRNYXhQcm9maXQoKSBpbnRlcm5hbCB7CiAgICAgICAgbWF4UHJvZml0ID0gKGNvbnRyYWN0QmFsYW5jZSptYXhQcm9maXRBc1BlcmNlbnRPZkhvdXNlKS9tYXhCZXREaXZpc29yOwogICAgfQoKICAgIC8qCiAgICAqIG93bmVyIGFkZHJlc3Mgb25seSBmdW5jdGlvbnMKICAgICovCiAgICBmdW5jdGlvbiAoKQogICAgICAgIHBheWFibGUKICAgIHsKICAgICAgICBwbGF5ZXJSb2xsRGljZSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIG93bmVyQWRkQmFua3JvbGwoKQogICAgcGF5YWJsZQogICAgb25seU93bmVyCiAgICB7CiAgICAgICAgLyogc2FmZWx5IHVwZGF0ZSBjb250cmFjdCBiYWxhbmNlICovCiAgICAgICAgY29udHJhY3RCYWxhbmNlID0gc2FmZUFkZChjb250cmFjdEJhbGFuY2UsIG1zZy52YWx1ZSk7CiAgICAgICAgLyogdXBkYXRlIHRoZSBtYXhpbXVtIHByb2ZpdCAqLwogICAgICAgIHNldE1heFByb2ZpdCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldGNvbnRyYWN0QmFsYW5jZSgpIHB1YmxpYyAKICAgIG9ubHlPd25lciAKICAgIHJldHVybnModWludCkKICAgIHsKICAgICAgICByZXR1cm4gY29udHJhY3RCYWxhbmNlOwogICAgfQoKCiAgICAvKiBvbmx5IG93bmVyIGFkZHJlc3MgY2FuIHNldCBob3VzZUVkZ2UgKi8KICAgIGZ1bmN0aW9uIG93bmVyU2V0SG91c2VFZGdlKHVpbnQgbmV3SG91c2VFZGdlKSBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICBob3VzZUVkZ2UgPSBuZXdIb3VzZUVkZ2U7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SG91c2VFZGdlKCkgcHVibGljIAogICAgb25seU93bmVyIAogICAgcmV0dXJucyh1aW50KQogICAgewogICAgICAgIHJldHVybiBob3VzZUVkZ2U7CiAgICB9CgogICAgLyogb25seSBvd25lciBhZGRyZXNzIGNhbiBzZXQgbWF4UHJvZml0QXNQZXJjZW50T2ZIb3VzZSAqLwogICAgZnVuY3Rpb24gb3duZXJTZXRNYXhQcm9maXRBc1BlcmNlbnRPZkhvdXNlKHVpbnQgbmV3TWF4UHJvZml0QXNQZXJjZW50KSBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICAvKiByZXN0cmljdCB0byBtYXhpbXVtIHByb2ZpdCBvZiA1JSBvZiB0b3RhbCBob3VzZSBiYWxhbmNlKi8KICAgICAgICByZXF1aXJlKG5ld01heFByb2ZpdEFzUGVyY2VudCA8PSA1MDAwMCk7CiAgICAgICAgbWF4UHJvZml0QXNQZXJjZW50T2ZIb3VzZSA9IG5ld01heFByb2ZpdEFzUGVyY2VudDsKICAgICAgICBzZXRNYXhQcm9maXQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRNYXhQcm9maXRBc1BlcmNlbnRPZkhvdXNlKCkgcHVibGljIAogICAgb25seU93bmVyIAogICAgcmV0dXJucyh1aW50KQogICAgewogICAgICAgIHJldHVybiBtYXhQcm9maXRBc1BlcmNlbnRPZkhvdXNlOwogICAgfQoKICAgIC8qIG9ubHkgb3duZXIgYWRkcmVzcyBjYW4gc2V0IG1pbkJldCAqLwogICAgZnVuY3Rpb24gb3duZXJTZXRNaW5CZXQodWludCBuZXdNaW5pbXVtQmV0KSBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICBtaW5CZXQgPSBuZXdNaW5pbXVtQmV0OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE1pbkJldCgpIHB1YmxpYyAKICAgIG9ubHlPd25lciAKICAgIHJldHVybnModWludCkKICAgIHsKICAgICAgICByZXR1cm4gbWluQmV0OwogICAgfQoKICAgIC8qIG9ubHkgb3duZXIgYWRkcmVzcyBjYW4gdHJhbnNmZXIgZXRoZXIgKi8KICAgIGZ1bmN0aW9uIG93bmVyVHJhbnNmZXJFdGhlcihhZGRyZXNzIHNlbmRUbywgdWludCBhbW91bnQpIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgewogICAgICAgIC8qIHNhZmVseSB1cGRhdGUgY29udHJhY3QgYmFsYW5jZSB3aGVuIHNlbmRpbmcgb3V0IGZ1bmRzKi8KICAgICAgICBjb250cmFjdEJhbGFuY2UgPSBzYWZlU3ViKGNvbnRyYWN0QmFsYW5jZSwgYW1vdW50KTsKICAgICAgICAvKiB1cGRhdGUgbWF4IHByb2ZpdCAqLwogICAgICAgIHNldE1heFByb2ZpdCgpOwogICAgICAgIHJlcXVpcmUoc2VuZFRvLnNlbmQoYW1vdW50KSk7CiAgICAgICAgTG9nT3duZXJUcmFuc2ZlcihzZW5kVG8sIGFtb3VudCk7CiAgICB9CgogICAgLyogb25seSBvd25lciBhZGRyZXNzIGNhbiBzZXQgZW1lcmdlbmN5IHBhdXNlICMxICovCiAgICBmdW5jdGlvbiBvd25lclBhdXNlR2FtZShib29sIG5ld1N0YXR1cykgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICB7CiAgICAgICAgZ2FtZVBhdXNlZCA9IG5ld1N0YXR1czsKICAgIH0KCiAgICAvKiBvbmx5IG93bmVyIGFkZHJlc3MgY2FuIHNldCBlbWVyZ2VuY3kgcGF1c2UgIzIgKi8KICAgIGZ1bmN0aW9uIG93bmVyUGF1c2VQYXlvdXRzKGJvb2wgbmV3UGF5b3V0U3RhdHVzKSBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICBwYXlvdXRzUGF1c2VkID0gbmV3UGF5b3V0U3RhdHVzOwogICAgfQoKCiAgICAvKiBvbmx5IG93bmVyIGFkZHJlc3MgY2FuIHNldCBvd25lciBhZGRyZXNzICovCiAgICBmdW5jdGlvbiBvd25lckNoYW5nZU93bmVyKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgewogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CgogICAgLyogb25seSBvd25lciBhZGRyZXNzIGNhbiBzdWljaWRlIC0gZW1lcmdlbmN5ICovCiAgICBmdW5jdGlvbiBvd25lcmtpbGwoKSBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICBzdWljaWRlKG93bmVyKTsKICAgIH0KCn0='.
	

]
