Class {
	#name : #SRTf53cbc0a85bc81e1b99d6197d74d735df749f8a5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf53cbc0a85bc81e1b99d6197d74d735df749f8a5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgovKioKICogQHRpdGxlIEVSQzIwCiAqIEBkZXYgRVJDMjAgaW50ZXJmYWNlCiAqLwpjb250cmFjdCBFUkMyMCB7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgovLy8gQGRldiBDcm93ZHNhbGUgaW50ZXJmYWNlIGZvciBFdGhlYWwgTm9ybWFsIFNhbGUsIGZ1bmN0aW9ucyBuZWVkZWQgZnJvbSBvdXRzaWRlLgpjb250cmFjdCBpRXRoZWFsU2FsZSB7CiAgICBib29sIHB1YmxpYyBwYXVzZWQ7CiAgICB1aW50MjU2IHB1YmxpYyBtaW5Db250cmlidXRpb247CiAgICB1aW50MjU2IHB1YmxpYyB3aGl0ZWxpc3RUaHJlc2hvbGQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBzdGFrZXM7CiAgICBmdW5jdGlvbiBzZXRQcm9tb0JvbnVzKGFkZHJlc3MgX2ludmVzdG9yLCB1aW50MjU2IF92YWx1ZSkgcHVibGljOwogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBwdWJsaWMgcGF5YWJsZTsKICAgIGZ1bmN0aW9uIGRlcG9zaXRFdGgoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQyNTYgX3RpbWUsIGJ5dGVzIF93aGl0ZWxpc3RTaWduKSBwdWJsaWMgcGF5YWJsZTsKICAgIGZ1bmN0aW9uIGRlcG9zaXRPZmZjaGFpbihhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfYW1vdW50LCB1aW50MjU2IF90aW1lKSBwdWJsaWM7CiAgICBmdW5jdGlvbiBoYXNFbmRlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKTsKfQoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKCgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCgoKCgovKioKICogQHRpdGxlIGNsYWltIGFjY2lkZW50YWxseSBzZW50IHRva2VucwogKi8KY29udHJhY3QgSGFzTm9Ub2tlbnMgaXMgT3duYWJsZSB7CiAgICBldmVudCBFeHRyYWN0ZWRUb2tlbnMoYWRkcmVzcyBpbmRleGVkIF90b2tlbiwgYWRkcmVzcyBpbmRleGVkIF9jbGFpbWVyLCB1aW50IF9hbW91bnQpOwoKICAgIC8vLyBAbm90aWNlIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIGV4dHJhY3QgbWlzdGFrZW5seQogICAgLy8vICBzZW50IHRva2VucyB0byB0aGlzIGNvbnRyYWN0LgogICAgLy8vIEBwYXJhbSBfdG9rZW4gVGhlIGFkZHJlc3Mgb2YgdGhlIHRva2VuIGNvbnRyYWN0IHRoYXQgeW91IHdhbnQgdG8gcmVjb3ZlcgogICAgLy8vICBzZXQgdG8gMCBpbiBjYXNlIHlvdSB3YW50IHRvIGV4dHJhY3QgZXRoZXIuCiAgICAvLy8gQHBhcmFtIF9jbGFpbWVyIEFkZHJlc3MgdGhhdCB0b2tlbnMgd2lsbCBiZSBzZW5kIHRvCiAgICBmdW5jdGlvbiBleHRyYWN0VG9rZW5zKGFkZHJlc3MgX3Rva2VuLCBhZGRyZXNzIF9jbGFpbWVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBpZiAoX3Rva2VuID09IDB4MCkgewogICAgICAgICAgICBfY2xhaW1lci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBFUkMyMCB0b2tlbiA9IEVSQzIwKF90b2tlbik7CiAgICAgICAgdWludCBiYWxhbmNlID0gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgICAgIHRva2VuLnRyYW5zZmVyKF9jbGFpbWVyLCBiYWxhbmNlKTsKICAgICAgICBFeHRyYWN0ZWRUb2tlbnMoX3Rva2VuLCBfY2xhaW1lciwgYmFsYW5jZSk7CiAgICB9Cn0KCgoKCgoKLyoqCiAqIEB0aXRsZSBFbGlwdGljIGN1cnZlIHNpZ25hdHVyZSBvcGVyYXRpb25zCiAqCiAqIEBkZXYgQmFzZWQgb24gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vYXhpYy81YjMzOTEyYzZmNjFhZTZmZDk2ZDZjNGE0N2FmZGU2ZAogKi8KCmxpYnJhcnkgRUNSZWNvdmVyeSB7CgogIC8qKgogICAqIEBkZXYgUmVjb3ZlciBzaWduZXIgYWRkcmVzcyBmcm9tIGEgbWVzc2FnZSBieSB1c2luZyBoaXMgc2lnbmF0dXJlCiAgICogQHBhcmFtIGhhc2ggYnl0ZXMzMiBtZXNzYWdlLCB0aGUgaGFzaCBpcyB0aGUgc2lnbmVkIG1lc3NhZ2UuIFdoYXQgaXMgcmVjb3ZlcmVkIGlzIHRoZSBzaWduZXIgYWRkcmVzcy4KICAgKiBAcGFyYW0gc2lnIGJ5dGVzIHNpZ25hdHVyZSwgdGhlIHNpZ25hdHVyZSBpcyBnZW5lcmF0ZWQgdXNpbmcgd2ViMy5ldGguc2lnbigpCiAgICovCiAgZnVuY3Rpb24gcmVjb3ZlcihieXRlczMyIGhhc2gsIGJ5dGVzIHNpZykgcHVibGljIHB1cmUgcmV0dXJucyAoYWRkcmVzcykgewogICAgYnl0ZXMzMiByOwogICAgYnl0ZXMzMiBzOwogICAgdWludDggdjsKCiAgICAvL0NoZWNrIHRoZSBzaWduYXR1cmUgbGVuZ3RoCiAgICBpZiAoc2lnLmxlbmd0aCAhPSA2NSkgewogICAgICByZXR1cm4gKGFkZHJlc3MoMCkpOwogICAgfQoKICAgIC8vIERpdmlkZSB0aGUgc2lnbmF0dXJlIGluIHIsIHMgYW5kIHYgdmFyaWFibGVzCiAgICBhc3NlbWJseSB7CiAgICAgIHIgOj0gbWxvYWQoYWRkKHNpZywgMzIpKQogICAgICBzIDo9IG1sb2FkKGFkZChzaWcsIDY0KSkKICAgICAgdiA6PSBieXRlKDAsIG1sb2FkKGFkZChzaWcsIDk2KSkpCiAgICB9CgogICAgLy8gVmVyc2lvbiBvZiBzaWduYXR1cmUgc2hvdWxkIGJlIDI3IG9yIDI4LCBidXQgMCBhbmQgMSBhcmUgYWxzbyBwb3NzaWJsZSB2ZXJzaW9ucwogICAgaWYgKHYgPCAyNykgewogICAgICB2ICs9IDI3OwogICAgfQoKICAgIC8vIElmIHRoZSB2ZXJzaW9uIGlzIGNvcnJlY3QgcmV0dXJuIHRoZSBzaWduZXIgYWRkcmVzcwogICAgaWYgKHYgIT0gMjcgJiYgdiAhPSAyOCkgewogICAgICByZXR1cm4gKGFkZHJlc3MoMCkpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGVjcmVjb3ZlcihoYXNoLCB2LCByLCBzKTsKICAgIH0KICB9Cgp9CgovKioKICogQHRpdGxlIEV0aGVhbFdoaXRlbGlzdAogKiBAYXV0aG9yIHRoZXN2ZWQKICogQG5vdGljZSBFdGhlYWxXaGl0ZWxpc3QgY29udHJhY3Qgd2hpY2ggaGFuZGxlcyBLWUMKICovCmNvbnRyYWN0IEV0aGVhbFdoaXRlbGlzdCBpcyBPd25hYmxlIHsKICAgIHVzaW5nIEVDUmVjb3ZlcnkgZm9yIGJ5dGVzMzI7CgogICAgLy8gc2lnbmVyIGFkZHJlc3MgZm9yIG9mZmNoYWluIHdoaXRlbGlzdCBzaWduaW5nCiAgICBhZGRyZXNzIHB1YmxpYyBzaWduZXI7CgogICAgLy8gc3RvcmluZyB3aGl0ZWxpc3RlZCBhZGRyZXNzZXMKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgaXNXaGl0ZWxpc3RlZDsKCiAgICBldmVudCBXaGl0ZWxpc3RTZXQoYWRkcmVzcyBpbmRleGVkIF9hZGRyZXNzLCBib29sIF9zdGF0ZSk7CgogICAgLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gQ29uc3RydWN0b3IKICAgIC8vLy8vLy8vLy8vLy8vLy8KICAgIGZ1bmN0aW9uIEV0aGVhbFdoaXRlbGlzdChhZGRyZXNzIF9zaWduZXIpIHsKICAgICAgICByZXF1aXJlKF9zaWduZXIgIT0gYWRkcmVzcygwKSk7CgogICAgICAgIHNpZ25lciA9IF9zaWduZXI7CiAgICB9CgogICAgLy8vIEBub3RpY2Ugc2V0IHNpZ25pbmcgYWRkcmVzcyBhZnRlciBkZXBsb3ltZW50CiAgICBmdW5jdGlvbiBzZXRTaWduZXIoYWRkcmVzcyBfc2lnbmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9zaWduZXIgIT0gYWRkcmVzcygwKSk7CgogICAgICAgIHNpZ25lciA9IF9zaWduZXI7CiAgICB9CgogICAgLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gV2hpdGVsaXN0aW5nOiBvbmx5IG93bmVyCiAgICAvLy8vLy8vLy8vLy8vLy8vCgogICAgLy8vJiMxNjA7QG5vdGljZSBTZXQgd2hpdGVsaXN0IHN0YXRlIGZvciBhbiBhZGRyZXNzLgogICAgZnVuY3Rpb24gc2V0V2hpdGVsaXN0KGFkZHJlc3MgX2FkZHIsIGJvb2wgX3N0YXRlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9hZGRyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGlzV2hpdGVsaXN0ZWRbX2FkZHJdID0gX3N0YXRlOwogICAgICAgIFdoaXRlbGlzdFNldChfYWRkciwgX3N0YXRlKTsKICAgIH0KCiAgICAvLy8mIzE2MDtAbm90aWNlIFNldCB3aGl0ZWxpc3Qgc3RhdGUgZm9yIG11bHRpcGxlIGFkZHJlc3NlcwogICAgZnVuY3Rpb24gc2V0TWFueVdoaXRlbGlzdChhZGRyZXNzW10gX2FkZHIsIGJvb2wgX3N0YXRlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfYWRkci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBzZXRXaGl0ZWxpc3QoX2FkZHJbaV0sIF9zdGF0ZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBAbm90aWNlIG9mZmNoYWluIHdoaXRlbGlzdCBjaGVjawogICAgZnVuY3Rpb24gaXNPZmZjaGFpbldoaXRlbGlzdGVkKGFkZHJlc3MgX2FkZHIsIGJ5dGVzIF9zaWcpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBieXRlczMyIGhhc2ggPSBrZWNjYWsyNTYoIlx4MTlFdGhlcmV1bSBTaWduZWQgTWVzc2FnZTpcbjIwIixfYWRkcik7CiAgICAgICAgcmV0dXJuIGhhc2gucmVjb3Zlcihfc2lnKSA9PSBzaWduZXI7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIEV0aGVhbERlcG9zaXQKICogQGF1dGhvciB0aGVzdmVkCiAqIEBkZXYgVGhpcyBjb250cmFjdCBpcyB1c2VkIGZvciBzdG9yaW5nIGZ1bmRzIHdoaWxlIGRvaW5nIFdoaXRlbGlzdAogKi8KY29udHJhY3QgRXRoZWFsRGVwb3NpdCBpcyBPd25hYmxlLCBIYXNOb1Rva2VucyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICAvLyBzdG9yaW5nIGRlcG9zaXRzOiBtYWtlIHN1cmUgdGhleSBmaXQgaW4gMiB4IDMyIGJ5dGUKICAgIHN0cnVjdCBEZXBvc2l0IHsKICAgICAgICB1aW50MjU2IGFtb3VudDsgICAgICAgICAvLyAzMiBieXRlCiAgICAgICAgYWRkcmVzcyBiZW5lZmljaWFyeTsgICAgLy8gMjAgYnl0ZQogICAgICAgIHVpbnQ2NCB0aW1lOyAgICAgICAgICAgIC8vIDggYnl0ZQogICAgICAgIGJvb2wgY2xlYXJlZDsgICAgICAgICAgIC8vIDEgYml0CiAgICB9CiAgICB1aW50MjU2IHB1YmxpYyB0cmFuc2FjdGlvbkNvdW50OwogICAgdWludDI1NiBwdWJsaWMgcGVuZGluZ0NvdW50OwogICAgbWFwcGluZyAodWludDI1NiA9PiBEZXBvc2l0KSBwdWJsaWMgdHJhbnNhY3Rpb25zOyAgICAvLyBzdG9yZSB0cmFuc2FjdGlvbnMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NltdKSBwdWJsaWMgYWRkcmVzc1RyYW5zYWN0aW9uczsgIC8vIHN0b3JlIHRyYW5zYWN0aW9uIGlkcyBmb3IgYWRkcmVzc2VzCiAgICAKICAgIC8vIHNhbGUgY29udHJhY3QgdG8gd2hpY2ggd2UgZm9yd2FyZCBmdW5kcwogICAgaUV0aGVhbFNhbGUgcHVibGljIHNhbGU7CiAgICBFdGhlYWxXaGl0ZWxpc3QgcHVibGljIHdoaXRlbGlzdDsKCiAgICBldmVudCBMb2dEZXBvc2l0ZWQoYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHdlaUFtb3VudCwgdWludDI1NiBpZCk7CiAgICBldmVudCBMb2dSZWZ1bmRlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgd2VpQW1vdW50LCB1aW50MjU2IGlkKTsKICAgIGV2ZW50IExvZ0ZvcndhcmRlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgd2VpQW1vdW50LCB1aW50MjU2IGlkKTsKCiAgICAvLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgLy8vLy8vLy8vLy8vLy8vLwoKICAgIC8vLyBAbm90aWNlIEV0aGVhbCBkZXBvc2l0IGNvbnN0cnVjdG9yCiAgICAvLy8gQHBhcmFtIF9zYWxlIGFkZHJlc3Mgb2Ygc2FsZSBjb250cmFjdAogICAgLy8vIEBwYXJhbSBfd2hpdGVsaXN0IGFkZHJlc3Mgb2Ygd2hpdGVsaXN0IGNvbnRyYWN0CiAgICBmdW5jdGlvbiBFdGhlYWxEZXBvc2l0KGFkZHJlc3MgX3NhbGUsIGFkZHJlc3MgX3doaXRlbGlzdCkgewogICAgICAgIHJlcXVpcmUoX3NhbGUgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgc2FsZSA9IGlFdGhlYWxTYWxlKF9zYWxlKTsKICAgICAgICB3aGl0ZWxpc3QgPSBFdGhlYWxXaGl0ZWxpc3QoX3doaXRlbGlzdCk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgU2V0IHNhbGUgY29udHJhY3QgYWRkcmVzcwogICAgZnVuY3Rpb24gc2V0U2FsZShhZGRyZXNzIF9zYWxlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBzYWxlID0gaUV0aGVhbFNhbGUoX3NhbGUpOwogICAgfQoKICAgIC8vLyBAbm90aWNlIFNldCB3aGl0ZWxpc3QgY29udHJhY3QgYWRkcmVzcwogICAgZnVuY3Rpb24gc2V0V2hpdGVsaXN0KGFkZHJlc3MgX3doaXRlbGlzdCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgd2hpdGVsaXN0ID0gRXRoZWFsV2hpdGVsaXN0KF93aGl0ZWxpc3QpOwogICAgfQoKICAgIC8vLyBAZGV2IE92ZXJyaWRlIEhhc05vVG9rZW5zI2V4dHJhY3RUb2tlbnMgdG8gbm90IGJlIGFibGUgdG8gZXh0cmFjdCB0b2tlbnMgdW50aWwgc2FsZUVuZCBhbmQgZXZlcnlvbmUgZ290IHRoZWlyIGZ1bmRzIGJhY2sKICAgIGZ1bmN0aW9uIGV4dHJhY3RUb2tlbnMoYWRkcmVzcyBfdG9rZW4sIGFkZHJlc3MgX2NsYWltZXIpIHB1YmxpYyBvbmx5T3duZXIgc2FsZUVuZGVkIHsKICAgICAgICByZXF1aXJlKHBlbmRpbmdDb3VudCA9PSAwKTsKCiAgICAgICAgc3VwZXIuZXh0cmFjdFRva2VucyhfdG9rZW4sIF9jbGFpbWVyKTsKICAgIH0KCgogICAgLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gRGVwb3NpdCwgZm9yd2FyZCwgcmVmdW5kCiAgICAvLy8vLy8vLy8vLy8vLy8vCgogICAgbW9kaWZpZXIgd2hpdGVsaXN0U2V0KCkgewogICAgICAgIHJlcXVpcmUoYWRkcmVzcyh3aGl0ZWxpc3QpICE9IGFkZHJlc3MoMCkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgc2FsZU5vdEVuZGVkKCkgewogICAgICAgIHJlcXVpcmUoYWRkcmVzcyhzYWxlKSAhPSBhZGRyZXNzKDApICYmICFzYWxlLmhhc0VuZGVkKCkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgc2FsZU5vdFBhdXNlZCgpIHsKICAgICAgICByZXF1aXJlKGFkZHJlc3Moc2FsZSkgIT0gYWRkcmVzcygwKSAmJiAhc2FsZS5wYXVzZWQoKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBzYWxlRW5kZWQoKSB7CiAgICAgICAgcmVxdWlyZShhZGRyZXNzKHNhbGUpICE9IGFkZHJlc3MoMCkgJiYgc2FsZS5oYXNFbmRlZCgpKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLyBAbm90aWNlIHBheWFibGUgZmFsbGJhY2sgY2FsbHMgdGhlIGRlcG9zaXQgZnVuY3Rpb24KICAgIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUgewogICAgICAgIGRlcG9zaXQobXNnLnNlbmRlciwgIiIpOwogICAgfQoKICAgIC8vLyBAbm90aWNlIGRlcG9zaXRpbmcgZm9yIGludmVzdG9yLCByZXR1cm4gdHJhbnNhY3Rpb24gSWQKICAgIC8vLyBAcGFyYW0gX2ludmVzdG9yIGFkZHJlc3Mgb2YgaW52ZXN0b3IKICAgIC8vLyBAcGFyYW0gX3doaXRlbGlzdFNpZ24gb2ZmY2hhaW4gd2hpdGVsaXN0IHNpZ25pdHVyZSBmb3IgYWRkcmVzcywgb3B0aW9uYWwKICAgIGZ1bmN0aW9uIGRlcG9zaXQoYWRkcmVzcyBfaW52ZXN0b3IsIGJ5dGVzIF93aGl0ZWxpc3RTaWduKSBwdWJsaWMgcGF5YWJsZSB3aGl0ZWxpc3RTZXQgc2FsZU5vdEVuZGVkIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXF1aXJlKF9pbnZlc3RvciAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHNhbGUubWluQ29udHJpYnV0aW9uKCkpOwoKICAgICAgICB1aW50MjU2IHRyYW5zYWN0aW9uSWQgPSBhZGRUcmFuc2FjdGlvbihfaW52ZXN0b3IsIG1zZy52YWx1ZSk7CgogICAgICAgIC8vIGZvcndhcmQgdHJhbnNhY3Rpb24gYXV0b21hdGljYWxseSBpZiB3aGl0ZWxpc3QgaXMgb2theSwgc28gdGhlIHRyYW5zYWN0aW9uIGRvZXNudCByZXZlcnQKICAgICAgICBpZiAod2hpdGVsaXN0LmlzV2hpdGVsaXN0ZWQoX2ludmVzdG9yKSAKICAgICAgICAgICAgfHwgd2hpdGVsaXN0LmlzT2ZmY2hhaW5XaGl0ZWxpc3RlZChfaW52ZXN0b3IsIF93aGl0ZWxpc3RTaWduKSAKICAgICAgICAgICAgfHwgc2FsZS53aGl0ZWxpc3RUaHJlc2hvbGQoKSA+PSBzYWxlLnN0YWtlcyhfaW52ZXN0b3IpLmFkZChtc2cudmFsdWUpCiAgICAgICAgKSB7CiAgICAgICAgICAgIC8vIG9ubHkgZm9yd2FyZCBpZiBzYWxlIGlzIG5vdCBwYXVzZWQKICAgICAgICAgICAgaWYgKCFzYWxlLnBhdXNlZCgpKSB7CiAgICAgICAgICAgICAgICBmb3J3YXJkVHJhbnNhY3Rpb25JbnRlcm5hbCh0cmFuc2FjdGlvbklkLCBfd2hpdGVsaXN0U2lnbik7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB0cmFuc2FjdGlvbklkOwogICAgfQoKICAgIC8vLyBAbm90aWNlIGZvcndhcmRpbmcgYSB0cmFuc2FjdGlvbgogICAgZnVuY3Rpb24gZm9yd2FyZFRyYW5zYWN0aW9uKHVpbnQyNTYgX2lkLCBieXRlcyBfd2hpdGVsaXN0U2lnbikgcHVibGljIHdoaXRlbGlzdFNldCBzYWxlTm90RW5kZWQgc2FsZU5vdFBhdXNlZCB7CiAgICAgICAgcmVxdWlyZShmb3J3YXJkVHJhbnNhY3Rpb25JbnRlcm5hbChfaWQsIF93aGl0ZWxpc3RTaWduKSk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgZm9yd2FyZGluZyBtdWx0aXBsZSB0cmFuc2FjdGlvbnM6IGNoZWNrIHdoaXRlbGlzdAogICAgZnVuY3Rpb24gZm9yd2FyZE1hbnlUcmFuc2FjdGlvbih1aW50MjU2W10gX2lkcykgcHVibGljIHdoaXRlbGlzdFNldCBzYWxlTm90RW5kZWQgc2FsZU5vdFBhdXNlZCB7CiAgICAgICAgdWludDI1NiBfdGhyZXNob2xkID0gc2FsZS53aGl0ZWxpc3RUaHJlc2hvbGQoKTsKCiAgICAgICAgZm9yICh1aW50MjU2IGk9MDsgaTxfaWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIC8vIG9ubHkgZm9yd2FyZCBpZiBpdCBpcyB3aXRoaW4gdGhyZXNob2xkIG9yIHdoaXRlbGlzdGVkLCBzbyB0aGUgdHJhbnNhY3Rpb24gZG9lc250IHJldmVydAogICAgICAgICAgICBpZiAoIHdoaXRlbGlzdC5pc1doaXRlbGlzdGVkKHRyYW5zYWN0aW9uc1tfaWRzW2ldXS5iZW5lZmljaWFyeSkgCiAgICAgICAgICAgICAgICB8fCBfdGhyZXNob2xkID49IHNhbGUuc3Rha2VzKHRyYW5zYWN0aW9uc1tfaWRzW2ldXS5iZW5lZmljaWFyeSkuYWRkKHRyYW5zYWN0aW9uc1tfaWRzW2ldXS5hbW91bnQgKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGZvcndhcmRUcmFuc2FjdGlvbkludGVybmFsKF9pZHNbaV0sIiIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBAbm90aWNlIGZvcndhcmRpbmcgdHJhbnNhY3Rpb25zIGZvciBhbiBpbnZlc3RvcgogICAgZnVuY3Rpb24gZm9yd2FyZEludmVzdG9yVHJhbnNhY3Rpb24oYWRkcmVzcyBfaW52ZXN0b3IsIGJ5dGVzIF93aGl0ZWxpc3RTaWduKSBwdWJsaWMgd2hpdGVsaXN0U2V0IHNhbGVOb3RFbmRlZCBzYWxlTm90UGF1c2VkIHsKICAgICAgICBib29sIF93aGl0ZWxpc3RlZCA9IHdoaXRlbGlzdC5pc1doaXRlbGlzdGVkKF9pbnZlc3RvcikgfHwgd2hpdGVsaXN0LmlzT2ZmY2hhaW5XaGl0ZWxpc3RlZChfaW52ZXN0b3IsIF93aGl0ZWxpc3RTaWduKTsKICAgICAgICB1aW50MjU2IF9hbW91bnQgPSBzYWxlLnN0YWtlcyhfaW52ZXN0b3IpOwogICAgICAgIHVpbnQyNTYgX3RocmVzaG9sZCA9IHNhbGUud2hpdGVsaXN0VGhyZXNob2xkKCk7CgogICAgICAgIGZvciAodWludDI1NiBpPTA7IGk8YWRkcmVzc1RyYW5zYWN0aW9uc1tfaW52ZXN0b3JdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIF9hbW91bnQgPSBfYW1vdW50LmFkZCh0cmFuc2FjdGlvbnNbIGFkZHJlc3NUcmFuc2FjdGlvbnNbX2ludmVzdG9yXVtpXSBdLmFtb3VudCk7CiAgICAgICAgICAgIC8vIG9ubHkgZm9yd2FyZCBpZiBpdCBpcyB3aXRoaW4gdGhyZXNob2xkIG9yIHdoaXRlbGlzdGVkLCBzbyB0aGUgdHJhbnNhY3Rpb24gZG9lc250IHJldmVydAogICAgICAgICAgICBpZiAoX3doaXRlbGlzdGVkIHx8IF90aHJlc2hvbGQgPj0gX2Ftb3VudCkgewogICAgICAgICAgICAgICAgZm9yd2FyZFRyYW5zYWN0aW9uSW50ZXJuYWwoYWRkcmVzc1RyYW5zYWN0aW9uc1tfaW52ZXN0b3JdW2ldLCBfd2hpdGVsaXN0U2lnbik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLy8vIEBub3RpY2UgcmVmdW5kaW5nIGEgdHJhbnNhY3Rpb24KICAgIGZ1bmN0aW9uIHJlZnVuZFRyYW5zYWN0aW9uKHVpbnQyNTYgX2lkKSBwdWJsaWMgc2FsZUVuZGVkIHsKICAgICAgICByZXF1aXJlKHJlZnVuZFRyYW5zYWN0aW9uSW50ZXJuYWwoX2lkKSk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgcmVmdW5kaW5nIG11bHRpcGxlIHRyYW5zYWN0aW9ucwogICAgZnVuY3Rpb24gcmVmdW5kTWFueVRyYW5zYWN0aW9uKHVpbnQyNTZbXSBfaWRzKSBwdWJsaWMgc2FsZUVuZGVkIHsKICAgICAgICBmb3IgKHVpbnQyNTYgaT0wOyBpPF9pZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcmVmdW5kVHJhbnNhY3Rpb25JbnRlcm5hbChfaWRzW2ldKTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIEBub3RpY2UgcmVmdW5kaW5nIGFuIGludmVzdG9yCiAgICBmdW5jdGlvbiByZWZ1bmRJbnZlc3RvcihhZGRyZXNzIF9pbnZlc3RvcikgcHVibGljIHNhbGVFbmRlZCB7CiAgICAgICAgZm9yICh1aW50MjU2IGk9MDsgaTxhZGRyZXNzVHJhbnNhY3Rpb25zW19pbnZlc3Rvcl0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcmVmdW5kVHJhbnNhY3Rpb25JbnRlcm5hbChhZGRyZXNzVHJhbnNhY3Rpb25zW19pbnZlc3Rvcl1baV0pOwogICAgICAgIH0KICAgIH0KCgogICAgLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gSW50ZXJuYWwgZnVuY3Rpb25zCiAgICAvLy8vLy8vLy8vLy8vLy8vCgogICAgLy8vIEBub3RpY2UgYWRkIHRyYW5zYWN0aW9uIGFuZCByZXR1cm5zIGl0cyBpZAogICAgZnVuY3Rpb24gYWRkVHJhbnNhY3Rpb24oYWRkcmVzcyBfaW52ZXN0b3IsIHVpbnQyNTYgX2Ftb3VudCkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgdHJhbnNhY3Rpb25JZCA9IHRyYW5zYWN0aW9uQ291bnQ7CgogICAgICAgIC8vIHNhdmUgdHJhbnNhY3Rpb24KICAgICAgICB0cmFuc2FjdGlvbnNbdHJhbnNhY3Rpb25JZF0gPSBEZXBvc2l0KHsKICAgICAgICAgICAgYW1vdW50OiBfYW1vdW50LAogICAgICAgICAgICBiZW5lZmljaWFyeTogX2ludmVzdG9yLAogICAgICAgICAgICB0aW1lOiB1aW50NjQobm93KSwKICAgICAgICAgICAgY2xlYXJlZCA6IGZhbHNlCiAgICAgICAgfSk7CgogICAgICAgIC8vIHNhdmUgdHJhbnNhY3Rpb25JZCBmb3IgaW52ZXN0b3IgYWRkcmVzcwogICAgICAgIGFkZHJlc3NUcmFuc2FjdGlvbnNbX2ludmVzdG9yXS5wdXNoKHRyYW5zYWN0aW9uSWQpOwoKICAgICAgICB0cmFuc2FjdGlvbkNvdW50ID0gdHJhbnNhY3Rpb25Db3VudC5hZGQoMSk7CiAgICAgICAgcGVuZGluZ0NvdW50ID0gcGVuZGluZ0NvdW50LmFkZCgxKTsKICAgICAgICBMb2dEZXBvc2l0ZWQoX2ludmVzdG9yLCBfYW1vdW50LCB0cmFuc2FjdGlvbklkKTsKCiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uSWQ7CiAgICB9CgogICAgLy8vIEBub3RpY2UgRm9yd2FyZGluZyBhIHRyYW5zYWN0aW9uLCBpbnRlcm5hbCBmdW5jdGlvbiwgZG9lc24ndCBjaGVjayBzYWxlIHN0YXR1cyBmb3Igc3BlZWQgdXAgbWFzcyBhY3Rpb25zLgogICAgLy8vIEByZXR1cm4gd2hldGhlciBmb3J3YXJkIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gZm9yd2FyZFRyYW5zYWN0aW9uSW50ZXJuYWwodWludDI1NiBfaWQsIGJ5dGVzIG1lbW9yeSBfd2hpdGVsaXN0U2lnbikgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX2lkIDwgdHJhbnNhY3Rpb25Db3VudCk7CgogICAgICAgIC8vIGlmIGFscmVhZHkgY2xlYXJlZCB0aGVuIHJldHVybiBmYWxzZQogICAgICAgIGlmICh0cmFuc2FjdGlvbnNbX2lkXS5jbGVhcmVkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIC8vIGZpeGluZyBieXRlcyBkYXRhIHRvIGFyZ3VtZW50IGNhbGwgZGF0YTogZGF0YSAtPiB7ZGF0YSBwb3NpdGlvbn17ZGF0YSBsZW5ndGh9ZGF0YQogICAgICAgIGJ5dGVzIG1lbW9yeSBfd2hpdGVsaXN0Q2FsbCA9IGJ5dGVzVG9Bcmd1bWVudChfd2hpdGVsaXN0U2lnbiwgOTYpOwoKICAgICAgICAvLyBmb3J3YXJkaW5nIHRyYW5zYWN0aW9uIHRvIHNhbGUgY29udHJhY3QKICAgICAgICBpZiAoISBzYWxlLmNhbGwudmFsdWUodHJhbnNhY3Rpb25zW19pZF0uYW1vdW50KShieXRlczQoa2VjY2FrMjU2KCdkZXBvc2l0RXRoKGFkZHJlc3MsdWludDI1NixieXRlcyknKSksIHRyYW5zYWN0aW9uc1tfaWRdLmJlbmVmaWNpYXJ5LCB1aW50MjU2KHRyYW5zYWN0aW9uc1tfaWRdLnRpbWUpLCBfd2hpdGVsaXN0Q2FsbCkgKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdHJhbnNhY3Rpb25zW19pZF0uY2xlYXJlZCA9IHRydWU7CgogICAgICAgIHBlbmRpbmdDb3VudCA9IHBlbmRpbmdDb3VudC5zdWIoMSk7CiAgICAgICAgTG9nRm9yd2FyZGVkKHRyYW5zYWN0aW9uc1tfaWRdLmJlbmVmaWNpYXJ5LCB0cmFuc2FjdGlvbnNbX2lkXS5hbW91bnQsIF9pZCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IEZpeGluZyBsb3cgbGV2ZWwgY2FsbCBmb3IgcHJvdmlkaW5nIHNpZ25hdHVyZSBpbmZvcm1hdGlvbjogY3JlYXRlIHByb3BlciBwYWRkaW5nIGZvciBieXRlcyBpbmZvcm1hdGlvbgogICAgZnVuY3Rpb24gYnl0ZXNUb0FyZ3VtZW50KGJ5dGVzIG1lbW9yeSBfc2lnbiwgdWludDI1NiBfcG9zaXRpb24pIGludGVybmFsIHB1cmUgcmV0dXJucyAoYnl0ZXMgbWVtb3J5IGMpIHsKICAgICAgICB1aW50MjU2IHNpZ25MZW5ndGggPSBfc2lnbi5sZW5ndGg7CiAgICAgICAgdWludDI1NiB0b3RhbExlbmd0aCA9IHNpZ25MZW5ndGguYWRkKDY0KTsKICAgICAgICB1aW50MjU2IGxvb3BNYXggPSBzaWduTGVuZ3RoLmFkZCgzMSkuZGl2KDMyKTsKICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgIGxldCBtIDo9IG1sb2FkKDB4NDApCiAgICAgICAgICAgIG1zdG9yZShtLCB0b3RhbExlbmd0aCkgICAgICAgICAgLy8gc3RvcmUgdGhlIHRvdGFsIGxlbmd0aAogICAgICAgICAgICBtc3RvcmUoYWRkKG0sMzIpLCBfcG9zaXRpb24pICAgIC8vIHdoZXJlIGRvZXMgdGhlIGRhdGEgc3RhcnQKICAgICAgICAgICAgbXN0b3JlKGFkZChtLDY0KSwgc2lnbkxlbmd0aCkgICAvLyBzdG9yZSB0aGUgbGVuZ3RoIG9mIHNpZ25hdHVyZQogICAgICAgICAgICBmb3IgeyAgbGV0IGkgOj0gMCB9IGx0KGksIGxvb3BNYXgpIHsgaSA6PSBhZGQoMSwgaSkgfSB7IG1zdG9yZShhZGQobSwgbXVsKDMyLCBhZGQoMywgaSkpKSwgbWxvYWQoYWRkKF9zaWduLCBtdWwoMzIsIGFkZCgxLCBpKSkpKSkgfQogICAgICAgICAgICBtc3RvcmUoMHg0MCwgYWRkKG0sIGFkZCgzMiwgdG90YWxMZW5ndGgpKSkKICAgICAgICAgICAgYyA6PSBtCiAgICAgICAgfQogICAgfQoKICAgIC8vLyBAbm90aWNlIFNlbmQgYmFjayBub24tY2xlYXJlZCB0cmFuc2FjdGlvbnMgYWZ0ZXIgc2FsZSBpcyBvdmVyLCBub3QgY2hlY2tpbmcgc3RhdHVzIGZvciBzcGVlZGluZyB1cCBtYXNzIGFjdGlvbnMKICAgIGZ1bmN0aW9uIHJlZnVuZFRyYW5zYWN0aW9uSW50ZXJuYWwodWludDI1NiBfaWQpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF9pZCA8IHRyYW5zYWN0aW9uQ291bnQpOwoKICAgICAgICAvLyBpZiBhbHJlYWR5IGNsZWFyZWQgdGhlbiByZXR1cm4gZmFsc2UKICAgICAgICBpZiAodHJhbnNhY3Rpb25zW19pZF0uY2xlYXJlZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAvLyBzZW5kaW5nIGJhY2sgZnVuZHMKICAgICAgICB0cmFuc2FjdGlvbnNbX2lkXS5jbGVhcmVkID0gdHJ1ZTsKICAgICAgICB0cmFuc2FjdGlvbnNbX2lkXS5iZW5lZmljaWFyeS50cmFuc2Zlcih0cmFuc2FjdGlvbnNbX2lkXS5hbW91bnQpOwoKICAgICAgICBwZW5kaW5nQ291bnQgPSBwZW5kaW5nQ291bnQuc3ViKDEpOwogICAgICAgIExvZ1JlZnVuZGVkKHRyYW5zYWN0aW9uc1tfaWRdLmJlbmVmaWNpYXJ5LCB0cmFuc2FjdGlvbnNbX2lkXS5hbW91bnQsIF9pZCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBFeHRlcm5hbCBmdW5jdGlvbnMKICAgIC8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLy8gQG5vdGljZSBnaXZlcyBiYWNrIHRyYW5zYWN0aW9uIGlkcyBiYXNlZCBvbiBmaWx0ZXJpbmcKICAgIGZ1bmN0aW9uIGdldFRyYW5zYWN0aW9uSWRzKHVpbnQyNTYgZnJvbSwgdWludDI1NiB0bywgYm9vbCBfY2xlYXJlZCwgYm9vbCBfbm9uQ2xlYXJlZCkgdmlldyBleHRlcm5hbCByZXR1cm5zICh1aW50MjU2W10gaWRzKSB7CiAgICAgICAgdWludDI1NiBpID0gMDsKICAgICAgICB1aW50MjU2IHJlc3VsdHMgPSAwOwogICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgX2lkcyA9IG5ldyB1aW50MjU2W10odHJhbnNhY3Rpb25Db3VudCk7CgogICAgICAgIC8vIHNlYXJjaCBpbiBjb250cmlidXRvcnMKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdHJhbnNhY3Rpb25Db3VudDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChfY2xlYXJlZCAmJiB0cmFuc2FjdGlvbnNbaV0uY2xlYXJlZCB8fCBfbm9uQ2xlYXJlZCAmJiAhdHJhbnNhY3Rpb25zW2ldLmNsZWFyZWQpIHsKICAgICAgICAgICAgICAgIF9pZHNbcmVzdWx0c10gPSBpOwogICAgICAgICAgICAgICAgcmVzdWx0cysrOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZHMgPSBuZXcgdWludDI1NltdKHJlc3VsdHMpOwogICAgICAgIGZvciAoaSA9IGZyb207IGkgPD0gdG8gJiYgaSA8IHJlc3VsdHM7IGkrKykgewogICAgICAgICAgICBpZHNbaV0gPSBfaWRzW2ldOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGlkczsKICAgIH0KfQ=='.
	

]
