Class {
	#name : #SRT31305680244131824224819256fb9cc851684b98,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT31305680244131824224819256fb9cc851684b98 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovLyBXb2xmIENyeXB0byBwb29saW5nIGNvbnRyYWN0IGZvciBOT1VTCi8vIHdyaXR0ZW4gYnkgQGlhbWRlZmluaXRlbHlhaHVtYW4KCgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIAogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBFUkMyMCB7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHt9CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9Cn0KCmNvbnRyYWN0IFByZXNhbGVQb29sIHsKCiAgLy8gU2FmZU1hdGggaXMgYSBsaWJyYXJ5IHRvIGVuc3VyZSB0aGF0IG1hdGggb3BlcmF0aW9ucyBkbyBub3QgaGF2ZSBvdmVyZmxvdyBlcnJvcnMKICAvLyBodHRwczovL3plcHBlbGluLXNvbGlkaXR5LnJlYWR0aGVkb2NzLmlvL2VuL2xhdGVzdC9zYWZlbWF0aC5odG1sCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgCiAgLy8gVGhlIGNvbnRyYWN0IGhhcyAzIHN0YWdlczoKICAvLyAxIC0gVGhlIGluaXRpYWwgc3RhdGUuIENvbnRyaWJ1dG9ycyBjYW4gZGVwb3NpdCBvciB3aXRoZHJhdyBldGggdG8gdGhlIGNvbnRyYWN0LgogIC8vIDIgLSBUaGUgb3duZXIgaGFzIGNsb3NlZCB0aGUgY29udHJhY3QgZm9yIGZ1cnRoZXIgZGVwb3NpdHMuIENvbnRyaWJ1dGluZyBhZGRyZXNzZXMgY2FuIHN0aWxsIHdpdGhkcmF3IGV0aCBmcm9tIHRoZSBjb250cmFjdC4KICAvLyAzIC0gVGhlIGV0aCBpcyBzZW50IGZyb20gdGhlIGNvbnRyYWN0IHRvIHRoZSByZWNlaXZlci4gVW51c2VkIGV0aCBjYW4gYmUgY2xhaW1lZCBieSBjb250cmlidXRvcnMgaW1tZWRpYXRlbHkuCiAgLy8gICAgIE9uY2UgdG9rZW5zIGFyZSBzZW50IHRvIHRoZSBjb250cmFjdCwgdGhlIG93bmVyIGVuYWJsZXMgd2l0aGRyYXdhbHMgYW5kIGNvbnRyaWJ1dG9ycyBjYW4gd2l0aGRyYXcgdGhlaXIgdG9rZW5zLgogIHVpbnQ4IHB1YmxpYyBjb250cmFjdFN0YWdlID0gMTsKICAKICAvLyBUaGVzZSB2YXJpYWJsZXMgYXJlIHNldCBhdCB0aGUgdGltZSBvZiBjb250cmFjdCBjcmVhdGlvbgogIC8vIHRoZSBhZGRyZXNzIHRoYXQgY3JlYXRlcyB0aGUgY29udHJhY3QKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAvLyB0aGUgbWluaW11bSBldGggYW1vdW50IChpbiB3ZWkpIHRoYXQgY2FuIGJlIHNlbnQgYnkgYSBjb250cmlidXRpbmcgYWRkcmVzcwogIHVpbnQgY29uc3RhbnQgcHVibGljIGNvbnRyaWJ1dGlvbk1pbiA9IDEwMDAwMDAwMDAwMDAwMDAwMDsKICAvLyB0aGUgbWF4aW11bSBldGggYW1vdW50IChpbiB3ZWkpIHRoYXQgY2FuIGJlIGhlbGQgYnkgdGhlIGNvbnRyYWN0CiAgdWludCBwdWJsaWMgbWF4Q29udHJhY3RCYWxhbmNlOwogIC8vIHRoZSAlIG9mIHRva2VucyBrZXB0IGJ5IHRoZSBjb250cmFjdCBvd25lcgogIHVpbnQgcHVibGljIGZlZVBjdDsKICAvLyB0aGUgYWRkcmVzcyB0aGF0IHRoZSBwb29sIHdpbGwgYmUgcGFpZCBvdXQgdG8KICBhZGRyZXNzIHB1YmxpYyByZWNlaXZlckFkZHJlc3M7CiAgCiAgLy8gVGhlc2UgdmFyaWFibGVzIGFyZSBhbGwgaW5pdGlhbGx5IGJsYW5rIGFuZCBhcmUgc2V0IGF0IHNvbWUgcG9pbnQgZHVyaW5nIHRoZSBjb250cmFjdAogIC8vIHRoZSBhbW91bnQgb2YgZXRoIChpbiB3ZWkpIHByZXNlbnQgaW4gdGhlIGNvbnRyYWN0IHdoZW4gaXQgd2FzIHN1Ym1pdHRlZAogIHVpbnQgcHVibGljIGZpbmFsQmFsYW5jZTsKICAvLyBhbiBhcnJheSBjb250YWluaW5nIGV0aCBhbW91bnRzIHRvIGJlIHJlZnVuZGVkIGluIHN0YWdlIDMKICB1aW50W10gcHVibGljIGV0aFJlZnVuZEFtb3VudDsKICAvLyB0aGUgZGVmYXVsdCB0b2tlbiBjb250cmFjdCB0byBiZSB1c2VkIGZvciB3aXRoZHJhd2luZyB0b2tlbnMgaW4gc3RhZ2UgMwogIGFkZHJlc3MgcHVibGljIGFjdGl2ZVRva2VuOwogIAogIC8vIGEgZGF0YSBzdHJ1Y3R1cmUgZm9yIGhvbGRpbmcgdGhlIGNvbnRyaWJ1dGlvbiBhbW91bnQsIGV0aCByZWZ1bmQgc3RhdHVzLCBhbmQgdG9rZW4gd2l0aGRyYXdhbCBzdGF0dXMgZm9yIGVhY2ggYWRkcmVzcwogIHN0cnVjdCBDb250cmlidXRvciB7CiAgICB1aW50IGV0aFJlZnVuZDsKICAgIHVpbnQgYmFsYW5jZTsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgdG9rZW5zQ2xhaW1lZDsKICB9CiAgLy8gYSBtYXBwaW5nIHRoYXQgaG9sZHMgdGhlIGNvbnRyaWJ1dG9yIHN0cnVjdCBmb3IgZWFjaCBhZGRyZXNzCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBDb250cmlidXRvcikgY29udHJpYnV0b3JNYXA7CiAgCiAgLy8gYSBkYXRhIHN0cnVjdHVyZSBmb3IgaG9sZGluZyBpbmZvcm1hdGlvbiByZWxhdGVkIHRvIHRva2VuIHdpdGhkcmF3YWxzLgogIHN0cnVjdCBUb2tlbkFsbG9jYXRpb24gewogICAgRVJDMjAgdG9rZW47CiAgICB1aW50W10gcGN0OwogICAgdWludCBiYWxhbmNlUmVtYWluaW5nOwogIH0KICAvLyBhIG1hcHBpbmcgdGhhdCBob2xkcyB0aGUgdG9rZW4gYWxsb2NhdGlvbiBzdHJ1Y3QgZm9yIGVhY2ggdG9rZW4gYWRkcmVzcwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gVG9rZW5BbGxvY2F0aW9uKSBkaXN0cmlidXRpb25NYXA7CiAgCiAgCiAgLy8gdGhpcyBtb2RpZmllciBpcyB1c2VkIGZvciBmdW5jdGlvbnMgdGhhdCBjYW4gb25seSBiZSBhY2Nlc3NlZCBieSB0aGUgY29udHJhY3QgY3JlYXRvcgogIG1vZGlmaWVyIG9ubHlPd25lciAoKSB7CiAgICByZXF1aXJlIChtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQogIAogIC8vIHRoaXMgbW9kaWZpZXIgaXMgdXNlZCB0byBwcmV2ZW50IHJlLWVudHJhbmN5IGV4cGxvaXRzIGR1cmluZyBjb250cmFjdCA+IGNvbnRyYWN0IGludGVyYWN0aW9uCiAgYm9vbCBsb2NrZWQ7CiAgbW9kaWZpZXIgbm9SZWVudHJhbmN5KCkgewogICAgcmVxdWlyZSAoIWxvY2tlZCk7CiAgICBsb2NrZWQgPSB0cnVlOwogICAgXzsKICAgIGxvY2tlZCA9IGZhbHNlOwogIH0KICAKICAvLyBFdmVudHMgdHJpZ2dlcmVkIHRocm91Z2hvdXQgY29udHJhY3QgZXhlY3V0aW9uCiAgLy8gVGhlc2UgY2FuIGJlIHdhdGNoZWQgdmlhIGdldGggZmlsdGVycyB0byBrZWVwIHVwLXRvLWRhdGUgd2l0aCB0aGUgY29udHJhY3QKICBldmVudCBDb250cmlidXRvckJhbGFuY2VDaGFuZ2VkIChhZGRyZXNzIGNvbnRyaWJ1dG9yLCB1aW50IHRvdGFsQmFsYW5jZSk7CiAgZXZlbnQgUG9vbFN1Ym1pdHRlZCAoYWRkcmVzcyByZWNlaXZlciwgdWludCBhbW91bnQpOwogIGV2ZW50IFdpdGhkcmF3YWxzT3BlbiAoYWRkcmVzcyB0b2tlbkFkZHIpOwogIGV2ZW50IFRva2Vuc1dpdGhkcmF3biAoYWRkcmVzcyByZWNlaXZlciwgdWludCBhbW91bnQpOwogIGV2ZW50IEV0aFJlZnVuZFJlY2VpdmVkIChhZGRyZXNzIHNlbmRlciwgdWludCBhbW91bnQpOwogIGV2ZW50IEV0aFJlZnVuZGVkIChhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCk7CiAgZXZlbnQgRVJDMjIzUmVjZWl2ZWQgKGFkZHJlc3MgdG9rZW4sIHVpbnQgdmFsdWUpOwogICAKICAvLyBUaGVzZSBhcmUgaW50ZXJuYWwgZnVuY3Rpb25zIHVzZWQgZm9yIGNhbGN1bGF0aW5nIGZlZXMsIGV0aCBhbmQgdG9rZW4gYWxsb2NhdGlvbnMgYXMgJQogIC8vIHJldHVybnMgYSB2YWx1ZSBhcyBhICUgYWNjdXJhdGUgdG8gMjAgZGVjaW1hbCBwb2ludHMKICBmdW5jdGlvbiBfdG9QY3QgKHVpbnQgbnVtZXJhdG9yLCB1aW50IGRlbm9taW5hdG9yICkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gbnVtZXJhdG9yLm11bCgxMCAqKiAyMCkgLyBkZW5vbWluYXRvcjsKICB9CiAgCiAgLy8gcmV0dXJucyAlIG9mIGFueSBudW1iZXIsIHdoZXJlICUgZ2l2ZW4gd2FzIGdlbmVyYXRlZCB3aXRoIHRvUGN0CiAgZnVuY3Rpb24gX2FwcGx5UGN0ICh1aW50IG51bWVyYXRvciwgdWludCBwY3QpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIG51bWVyYXRvci5tdWwocGN0KSAvICgxMCAqKiAyMCk7CiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGF0IHRoZSB0aW1lIG9mIGNvbnRyYWN0IGNyZWF0aW9uLAogIC8vIGl0IHNldHMgdGhlIGluaXRpYWwgdmFyaWFibGVzIGFuZCB0aGUgY29udHJhY3Qgb3duZXIuCiAgZnVuY3Rpb24gUHJlc2FsZVBvb2woYWRkcmVzcyByZWNlaXZlckFkZHIsIHVpbnQgY29udHJhY3RNYXhJbldlaSwgdWludCBmZWUpIHB1YmxpYyB7CiAgICByZXF1aXJlIChmZWUgPCAxMDApOwogICAgcmVxdWlyZSAocmVjZWl2ZXJBZGRyICE9IDB4MDApOwogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgcmVjZWl2ZXJBZGRyZXNzID0gcmVjZWl2ZXJBZGRyOwogICAgbWF4Q29udHJhY3RCYWxhbmNlID0gY29udHJhY3RNYXhJbldlaTsKICAgIGZlZVBjdCA9IF90b1BjdChmZWUsMTAwKTsKICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbmV2ZXIgZXRoIGlzIHNlbnQgaW50byB0aGUgY29udHJhY3QuCiAgLy8gVGhlIGFtb3VudCBzZW50IGlzIGFkZGVkIHRvIHRoZSBiYWxhbmNlIGluIHRoZSBDb250cmlidXRvciBzdHJ1Y3QgYXNzb2NpYXRlZCB3aXRoIHRoZSBzZW5kaW5nIGFkZHJlc3MuCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSBwdWJsaWMgewogICAgaWYgKGNvbnRyYWN0U3RhZ2UgPT0gMSkgewogICAgICBfZXRoRGVwb3NpdCgpOwogICAgfSBlbHNlIGlmIChjb250cmFjdFN0YWdlID09IDMpIHsKICAgICAgX2V0aFJlZnVuZCgpOwogICAgfSBlbHNlIHJldmVydCgpOwogIH0KICAKICAvLyBJbnRlcm5hbCBmdW5jdGlvbiBmb3IgaGFuZGxpbmcgZXRoIGRlcG9zaXRzIGR1cmluZyBjb250cmFjdCBzdGFnZSBvbmUuCiAgZnVuY3Rpb24gX2V0aERlcG9zaXQgKCkgaW50ZXJuYWwgewogICAgYXNzZXJ0IChjb250cmFjdFN0YWdlID09IDEpOyAgCiAgICB1aW50IHNpemU7CiAgICBhZGRyZXNzIGFkZHIgPSBtc2cuc2VuZGVyOwogICAgYXNzZW1ibHkgeyBzaXplIDo9IGV4dGNvZGVzaXplKGFkZHIpIH0KICAgIHJlcXVpcmUgKHNpemUgPT0gMCk7CiAgICByZXF1aXJlICh0aGlzLmJhbGFuY2UgPD0gbWF4Q29udHJhY3RCYWxhbmNlKTsKICAgIHZhciBjID0gY29udHJpYnV0b3JNYXBbbXNnLnNlbmRlcl07CiAgICB1aW50IG5ld0JhbGFuY2UgPSBjLmJhbGFuY2UuYWRkKG1zZy52YWx1ZSk7CiAgICByZXF1aXJlIChuZXdCYWxhbmNlID49IGNvbnRyaWJ1dGlvbk1pbik7CiAgICBjLmJhbGFuY2UgPSBuZXdCYWxhbmNlOwogICAgQ29udHJpYnV0b3JCYWxhbmNlQ2hhbmdlZChtc2cuc2VuZGVyLCBuZXdCYWxhbmNlKTsKICB9CiAgCiAgLy8gSW50ZXJuYWwgZnVuY3Rpb24gZm9yIGhhbmRsaW5nIGV0aCByZWZ1bmRzIGR1cmluZyBzdGFnZSB0aHJlZS4KICBmdW5jdGlvbiBfZXRoUmVmdW5kICgpIGludGVybmFsIHsKICAgIGFzc2VydCAoY29udHJhY3RTdGFnZSA9PSAzKTsKICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSByZWNlaXZlckFkZHJlc3MpOwogICAgcmVxdWlyZSAobXNnLnZhbHVlID49IGNvbnRyaWJ1dGlvbk1pbik7CiAgICBldGhSZWZ1bmRBbW91bnQucHVzaChtc2cudmFsdWUpOwogICAgRXRoUmVmdW5kUmVjZWl2ZWQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgdG8gd2l0aGRyYXcgZXRoIG9yIHRva2VucyBmcm9tIHRoZSBjb250cmFjdC4gSXQgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IGFkZHJlc3NlcyB0aGF0IHNob3cgYSBiYWxhbmNlIGdyZWF0ZXIgdGhhbiAwLgogIC8vIElmIGNhbGxlZCBkdXJpbmcgc3RhZ2VzIG9uZSBvciB0d28sIHRoZSBmdWxsIGV0aCBiYWxhbmNlIGRlcG9zaXRlZCBpbnRvIHRoZSBjb250cmFjdCBpcyByZXR1cm5lZCBhbmQgdGhlIGNvbnRyaWJ1dG9yJ3MgYmFsYW5jZSByZXNldCB0byAwLgogIC8vIElmIGNhbGxlZCBkdXJpbmcgc3RhZ2UgdGhyZWUsIHRoZSBjb250cmlidXRvcidzIHVudXNlZCBldGggd2lsbCBiZSByZXR1cm5lZCwgYXMgd2VsbCBhcyBhbnkgYXZhaWxhYmxlIHRva2Vucy4KICAvLyBUaGUgdG9rZW4gYWRkcmVzcyBtYXkgYmUgcHJvdmlkZWQgb3B0aW9uYWxseSB0byB3aXRoZHJhdyB0b2tlbnMgdGhhdCBhcmUgbm90IGN1cnJlbnRseSB0aGUgZGVmYXVsdCB0b2tlbiAoYWlyZHJvcHMpLgogIGZ1bmN0aW9uIHdpdGhkcmF3IChhZGRyZXNzIHRva2VuQWRkcikgcHVibGljIHsKICAgIHZhciBjID0gY29udHJpYnV0b3JNYXBbbXNnLnNlbmRlcl07CiAgICByZXF1aXJlIChjLmJhbGFuY2UgPiAwKTsKICAgIGlmIChjb250cmFjdFN0YWdlIDwgMykgewogICAgICB1aW50IGFtb3VudFRvVHJhbnNmZXIgPSBjLmJhbGFuY2U7CiAgICAgIGMuYmFsYW5jZSA9IDA7CiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoYW1vdW50VG9UcmFuc2Zlcik7CiAgICAgIENvbnRyaWJ1dG9yQmFsYW5jZUNoYW5nZWQobXNnLnNlbmRlciwgMCk7CiAgICB9IGVsc2UgewogICAgICBfd2l0aGRyYXcobXNnLnNlbmRlciwgdG9rZW5BZGRyKTsKICAgIH0gIAogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIGFsbG93cyB0aGUgY29udHJhY3Qgb3duZXIgdG8gZm9yY2UgYSB3aXRoZHJhd2FsIHRvIGFueSBjb250cmlidXRvci4KICBmdW5jdGlvbiB3aXRoZHJhd0ZvciAoYWRkcmVzcyBjb250cmlidXRvciwgYWRkcmVzcyB0b2tlbkFkZHIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZSAoY29udHJhY3RTdGFnZSA9PSAzKTsKICAgIHJlcXVpcmUgKGNvbnRyaWJ1dG9yTWFwW2NvbnRyaWJ1dG9yXS5iYWxhbmNlID4gMCk7CiAgICBfd2l0aGRyYXcoY29udHJpYnV0b3IsIHRva2VuQWRkcik7CiAgfQogIAogIC8vIFRoaXMgaW50ZXJuYWwgZnVuY3Rpb24gaGFuZGxlcyB3aXRoZHJhd2FscyBkdXJpbmcgc3RhZ2UgdGhyZWUuCiAgLy8gVGhlIGFzc29jaWF0ZWQgZXZlbnRzIHdpbGwgZmlyZSB0byBub3RpZnkgd2hlbiBhIHJlZnVuZCBvciB0b2tlbiBhbGxvY2F0aW9uIGlzIGNsYWltZWQuCiAgZnVuY3Rpb24gX3dpdGhkcmF3IChhZGRyZXNzIHJlY2VpdmVyLCBhZGRyZXNzIHRva2VuQWRkcikgaW50ZXJuYWwgewogICAgYXNzZXJ0IChjb250cmFjdFN0YWdlID09IDMpOwogICAgdmFyIGMgPSBjb250cmlidXRvck1hcFtyZWNlaXZlcl07CiAgICBpZiAodG9rZW5BZGRyID09IDB4MDApIHsKICAgICAgdG9rZW5BZGRyID0gYWN0aXZlVG9rZW47CiAgICB9CiAgICB2YXIgZCA9IGRpc3RyaWJ1dGlvbk1hcFt0b2tlbkFkZHJdOwogICAgcmVxdWlyZSAoIGV0aFJlZnVuZEFtb3VudC5sZW5ndGggPiBjLmV0aFJlZnVuZCB8fCBkLnBjdC5sZW5ndGggPiBjLnRva2Vuc0NsYWltZWRbdG9rZW5BZGRyXSApOwogICAgaWYgKGV0aFJlZnVuZEFtb3VudC5sZW5ndGggPiBjLmV0aFJlZnVuZCkgewogICAgICB1aW50IHBjdCA9IF90b1BjdChjLmJhbGFuY2UsIGZpbmFsQmFsYW5jZSk7CiAgICAgIHVpbnQgZXRoQW1vdW50ID0gMDsKICAgICAgZm9yICh1aW50IGkgPSBjLmV0aFJlZnVuZDsgaSA8IGV0aFJlZnVuZEFtb3VudC5sZW5ndGg7IGkrKykgewogICAgICAgIGV0aEFtb3VudCA9IGV0aEFtb3VudC5hZGQoX2FwcGx5UGN0KGV0aFJlZnVuZEFtb3VudFtpXSwgcGN0KSk7CiAgICAgIH0KICAgICAgYy5ldGhSZWZ1bmQgPSBldGhSZWZ1bmRBbW91bnQubGVuZ3RoOwogICAgICBpZiAoZXRoQW1vdW50ID4gMCkgewogICAgICAgIHJlY2VpdmVyLnRyYW5zZmVyKGV0aEFtb3VudCk7CiAgICAgICAgRXRoUmVmdW5kZWQocmVjZWl2ZXIsIGV0aEFtb3VudCk7CiAgICAgIH0KICAgIH0KICAgIGlmIChkLnBjdC5sZW5ndGggPiBjLnRva2Vuc0NsYWltZWRbdG9rZW5BZGRyXSkgewogICAgICB1aW50IHRva2VuQW1vdW50ID0gMDsKICAgICAgZm9yIChpID0gYy50b2tlbnNDbGFpbWVkW3Rva2VuQWRkcl07IGkgPCBkLnBjdC5sZW5ndGg7IGkrKykgewogICAgICAgIHRva2VuQW1vdW50ID0gdG9rZW5BbW91bnQuYWRkKF9hcHBseVBjdChjLmJhbGFuY2UsIGQucGN0W2ldKSk7CiAgICAgIH0KICAgICAgYy50b2tlbnNDbGFpbWVkW3Rva2VuQWRkcl0gPSBkLnBjdC5sZW5ndGg7CiAgICAgIGlmICh0b2tlbkFtb3VudCA+IDApIHsKICAgICAgICByZXF1aXJlIChkLnRva2VuLnRyYW5zZmVyKHJlY2VpdmVyLCB0b2tlbkFtb3VudCkpOwogICAgICAgIGQuYmFsYW5jZVJlbWFpbmluZyA9IGQuYmFsYW5jZVJlbWFpbmluZy5zdWIodG9rZW5BbW91bnQpOwogICAgICAgIFRva2Vuc1dpdGhkcmF3bihyZWNlaXZlciwgdG9rZW5BbW91bnQpOwogICAgICB9ICAKICAgIH0KICAgIAogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgZHVyaW5nIHN0YWdlcyBvbmUgb3IgdHdvIHRvIG1vZGlmeSB0aGUgbWF4aW11bSBiYWxhbmNlIG9mIHRoZSBjb250cmFjdC4KICAvLyBJdCBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIG93bmVyLiBUaGUgYW1vdW50IGNhbm5vdCBiZSBzZXQgdG8gbG93ZXIgdGhhbiB0aGUgY3VycmVudCBiYWxhbmNlIG9mIHRoZSBjb250cmFjdC4KICBmdW5jdGlvbiBtb2RpZnlNYXhDb250cmFjdEJhbGFuY2UgKHVpbnQgYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUgKGNvbnRyYWN0U3RhZ2UgPCAzKTsKICAgIHJlcXVpcmUgKGFtb3VudCA+PSBjb250cmlidXRpb25NaW4pOwogICAgcmVxdWlyZSAoYW1vdW50ID49IHRoaXMuYmFsYW5jZSk7CiAgICBtYXhDb250cmFjdEJhbGFuY2UgPSBhbW91bnQ7CiAgfQogIAogIC8vIFRoaXMgY2FsbGFibGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgdG90YWwgcG9vbCBjYXAsIGN1cnJlbnQgYmFsYW5jZSBhbmQgcmVtYWluaW5nIGJhbGFuY2UgdG8gYmUgZmlsbGVkLgogIGZ1bmN0aW9uIGNoZWNrUG9vbEJhbGFuY2UgKCkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludCBwb29sQ2FwLCB1aW50IGJhbGFuY2UsIHVpbnQgcmVtYWluaW5nKSB7CiAgICBpZiAoY29udHJhY3RTdGFnZSA9PSAxKSB7CiAgICAgIHJlbWFpbmluZyA9IG1heENvbnRyYWN0QmFsYW5jZS5zdWIodGhpcy5iYWxhbmNlKTsKICAgIH0gZWxzZSB7CiAgICAgIHJlbWFpbmluZyA9IDA7CiAgICB9CiAgICByZXR1cm4gKG1heENvbnRyYWN0QmFsYW5jZSx0aGlzLmJhbGFuY2UscmVtYWluaW5nKTsKICB9CiAgCiAgLy8gVGhpcyBjYWxsYWJsZSBmdW5jdGlvbiByZXR1cm5zIHRoZSBiYWxhbmNlLCBjb250cmlidXRpb24gY2FwLCBhbmQgcmVtYWluaW5nIGF2YWlsYWJsZSBiYWxhbmNlIG9mIGFueSBjb250cmlidXRvci4KICBmdW5jdGlvbiBjaGVja0NvbnRyaWJ1dG9yQmFsYW5jZSAoYWRkcmVzcyBhZGRyKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50IGJhbGFuY2UsIHVpbnQgY2FwLCB1aW50IHJlbWFpbmluZykgewogICAgdmFyIGMgPSBjb250cmlidXRvck1hcFthZGRyXTsKICAgIGlmIChjb250cmFjdFN0YWdlID09IDEpIHsKICAgICAgcmVtYWluaW5nID0gbWF4Q29udHJhY3RCYWxhbmNlLnN1Yih0aGlzLmJhbGFuY2UpOwogICAgfSBlbHNlIHsKICAgICAgcmVtYWluaW5nID0gMDsKICAgIH0KICAgIHJldHVybiAoYy5iYWxhbmNlLCBtYXhDb250cmFjdEJhbGFuY2UsIHJlbWFpbmluZyk7CiAgfQogIAogIC8vIFRoaXMgY2FsbGFibGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgdG9rZW4gYmFsYW5jZSB0aGF0IGEgY29udHJpYnV0b3IgY2FuIGN1cnJlbnRseSBjbGFpbS4KICBmdW5jdGlvbiBjaGVja0F2YWlsYWJsZVRva2VucyAoYWRkcmVzcyBhZGRyLCBhZGRyZXNzIHRva2VuQWRkcikgdmlldyBwdWJsaWMgcmV0dXJucyAodWludCB0b2tlbkFtb3VudCkgewogICAgdmFyIGMgPSBjb250cmlidXRvck1hcFthZGRyXTsKICAgIHZhciBkID0gZGlzdHJpYnV0aW9uTWFwW3Rva2VuQWRkcl07CiAgICBmb3IgKHVpbnQgaSA9IGMudG9rZW5zQ2xhaW1lZFt0b2tlbkFkZHJdOyBpIDwgZC5wY3QubGVuZ3RoOyBpKyspIHsKICAgICAgdG9rZW5BbW91bnQgPSB0b2tlbkFtb3VudC5hZGQoX2FwcGx5UGN0KGMuYmFsYW5jZSwgZC5wY3RbaV0pKTsKICAgIH0KICAgIHJldHVybiB0b2tlbkFtb3VudDsKICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiBjbG9zZXMgZnVydGhlciBjb250cmlidXRpb25zIHRvIHRoZSBjb250cmFjdCwgYWR2YW5jaW5nIGl0IHRvIHN0YWdlIHR3by4KICAvLyBJdCBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIG93bmVyLiAgQWZ0ZXIgdGhpcyBjYWxsIGhhcyBiZWVuIG1hZGUsIGNvbnRyaWJ1dGluZyBhZGRyZXNzZXMKICAvLyBjYW4gc3RpbGwgcmVtb3ZlIHRoZWlyIGV0aCBmcm9tIHRoZSBjb250cmFjdCBidXQgY2Fubm90IGNvbnRyaWJ1dGUgYW55IG1vcmUuCiAgZnVuY3Rpb24gY2xvc2VDb250cmlidXRpb25zICgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZSAoY29udHJhY3RTdGFnZSA9PSAxKTsKICAgIGNvbnRyYWN0U3RhZ2UgPSAyOwogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIHJlb3BlbnMgdGhlIGNvbnRyYWN0IHRvIGNvbnRyaWJ1dGlvbnMsIHJldHVybmluZyBpdCB0byBzdGFnZSBvbmUuCiAgLy8gSXQgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBvd25lciBkdXJpbmcgc3RhZ2UgdHdvLgogIGZ1bmN0aW9uIHJlb3BlbkNvbnRyaWJ1dGlvbnMgKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlID09IDIpOwogICAgY29udHJhY3RTdGFnZSA9IDE7CiAgfQoKICAvLyBUaGlzIGZ1bmN0aW9uIHNlbmRzIHRoZSBwb29sZWQgZXRoIHRvIHRoZSByZWNlaXZpbmcgYWRkcmVzcywgY2FsY3VsYXRlcyB0aGUgJSBvZiB1bnVzZWQgZXRoIHRvIGJlIHJldHVybmVkLAogIC8vIGFuZCBhZHZhbmNlcyB0aGUgY29udHJhY3QgdG8gc3RhZ2UgdGhyZWUuIEl0IGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgY29udHJhY3Qgb3duZXIgZHVyaW5nIHN0YWdlcyBvbmUgb3IgdHdvLgogIC8vIFRoZSBhbW91bnQgdG8gc2VuZCAoZ2l2ZW4gaW4gd2VpKSBtdXN0IGJlIHNwZWNpZmllZCBkdXJpbmcgdGhlIGNhbGwuIEFzIHRoaXMgZnVuY3Rpb24gY2FuIG9ubHkgYmUgZXhlY3V0ZWQgb25jZSwKICAvLyBpdCBpcyBWRVJZIElNUE9SVEFOVCBub3QgdG8gZ2V0IHRoZSBhbW91bnQgd3JvbmcuCiAgZnVuY3Rpb24gc3VibWl0UG9vbCAodWludCBhbW91bnRJbldlaSkgcHVibGljIG9ubHlPd25lciBub1JlZW50cmFuY3kgewogICAgcmVxdWlyZSAoY29udHJhY3RTdGFnZSA8IDMpOwogICAgcmVxdWlyZSAoY29udHJpYnV0aW9uTWluIDw9IGFtb3VudEluV2VpICYmIGFtb3VudEluV2VpIDw9IHRoaXMuYmFsYW5jZSk7CiAgICBmaW5hbEJhbGFuY2UgPSB0aGlzLmJhbGFuY2U7CiAgICByZXF1aXJlIChyZWNlaXZlckFkZHJlc3MuY2FsbC52YWx1ZShhbW91bnRJbldlaSkuZ2FzKG1zZy5nYXMuc3ViKDUwMDApKSgpKTsKICAgIGV0aFJlZnVuZEFtb3VudC5wdXNoKHRoaXMuYmFsYW5jZSk7CiAgICBjb250cmFjdFN0YWdlID0gMzsKICAgIFBvb2xTdWJtaXR0ZWQocmVjZWl2ZXJBZGRyZXNzLCBhbW91bnRJbldlaSk7CiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gb3BlbnMgdGhlIGNvbnRyYWN0IHVwIGZvciB0b2tlbiB3aXRoZHJhd2Fscy4KICAvLyBJdCBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIG93bmVyIGR1cmluZyBzdGFnZSAzLiAgVGhlIG93bmVyIHNwZWNpZmllcyB0aGUgYWRkcmVzcyBvZiBhbiBFUkMyMCB0b2tlbgogIC8vIGNvbnRyYWN0IHRoYXQgdGhpcyBjb250cmFjdCBoYXMgYSBiYWxhbmNlIGluLCBhbmQgb3B0aW9uYWxseSBhIGJvb2wgdG8gcHJldmVudCB0aGlzIHRva2VuIGZyb20gYmVpbmcKICAvLyB0aGUgZGVmYXVsdCB3aXRoZHJhd2FsIChpbiB0aGUgZXZlbnQgb2YgYW4gYWlyZHJvcCwgZm9yIGV4YW1wbGUpLgogIGZ1bmN0aW9uIGVuYWJsZVRva2VuV2l0aGRyYXdhbHMgKGFkZHJlc3MgdG9rZW5BZGRyLCBib29sIG5vdERlZmF1bHQpIHB1YmxpYyBvbmx5T3duZXIgbm9SZWVudHJhbmN5IHsKICAgIHJlcXVpcmUgKGNvbnRyYWN0U3RhZ2UgPT0gMyk7CiAgICBpZiAobm90RGVmYXVsdCkgewogICAgICByZXF1aXJlIChhY3RpdmVUb2tlbiAhPSAweDAwKTsKICAgIH0gZWxzZSB7CiAgICAgIGFjdGl2ZVRva2VuID0gdG9rZW5BZGRyOwogICAgfQogICAgdmFyIGQgPSBkaXN0cmlidXRpb25NYXBbdG9rZW5BZGRyXTsgICAgCiAgICBpZiAoZC5wY3QubGVuZ3RoID09IDApIGQudG9rZW4gPSBFUkMyMCh0b2tlbkFkZHIpOwogICAgdWludCBhbW91bnQgPSBkLnRva2VuLmJhbGFuY2VPZih0aGlzKS5zdWIoZC5iYWxhbmNlUmVtYWluaW5nKTsKICAgIHJlcXVpcmUgKGFtb3VudCA+IDApOwogICAgaWYgKGZlZVBjdCA+IDApIHsKICAgICAgcmVxdWlyZSAoZC50b2tlbi50cmFuc2Zlcihvd25lcixfYXBwbHlQY3QoYW1vdW50LCBmZWVQY3QpKSk7CiAgICB9CiAgICBhbW91bnQgPSBkLnRva2VuLmJhbGFuY2VPZih0aGlzKS5zdWIoZC5iYWxhbmNlUmVtYWluaW5nKTsKICAgIGQuYmFsYW5jZVJlbWFpbmluZyA9IGQudG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgZC5wY3QucHVzaChfdG9QY3QoYW1vdW50LCBmaW5hbEJhbGFuY2UpKTsKICAgIFdpdGhkcmF3YWxzT3Blbih0b2tlbkFkZHIpOwogIH0KICAKICAvLyBUaGlzIGlzIGEgc3RhbmRhcmQgZnVuY3Rpb24gcmVxdWlyZWQgZm9yIEVSQzIyMyBjb21wYXRpYmlsaXR5LgogIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2sgKGFkZHJlc3MgZnJvbSwgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkgcHVibGljIHsKICAgIEVSQzIyM1JlY2VpdmVkKGZyb20sIHZhbHVlKTsKICB9CiAgCn0='.
	

]
