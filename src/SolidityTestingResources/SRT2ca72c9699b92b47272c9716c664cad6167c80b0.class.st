Class {
	#name : #SRT2ca72c9699b92b47272c9716c664cad6167c80b0,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2ca72c9699b92b47272c9716c664cad6167c80b0 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKgogICAgQ29weXJpZ2h0IDIwMTcsIFNoYXVuIFNodWxsCgogICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgogICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KCiAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiAgICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KICovCgovLy8gQHRpdGxlIEdVTlMgQ3Jvd2RzYWxlIENvbnRyYWN0IC0gR2VvRm91bmRlcnMuY29tCi8vLyBAYXV0aG9yIFNoYXVuIFNodWxsCi8vLyBAZGV2IFNpbXBsZSBzaW5nbGUgY3Jvd2RzYWxlIGNvbnRyYWN0IGZvciBmaXhlZCBzdXBwbHksIHNpbmdsZS1yYXRlLCAKLy8vICBibG9jay1yYW5nZSBjcm93ZHNhbGUuIEFkZGl0aW9uYWwgdG9rZW4gY2xlYW51cCBmdW5jdGlvbmFsaXR5LgoKCi8vLyBAZGV2IEdlbmVyaWMgRVJDMjAgVG9rZW4gSW50ZXJmYWNlLCB0b3RhbFN1cHBseSBtYWRlIHRvIHZhciBmb3IgY29tcGlsZXIKY29udHJhY3QgVG9rZW4gewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKCi8vLyBAZGV2IEVSQzIwIFN0YW5kYXJkIFRva2VuIENvbnRyYWN0CmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4gewoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7Cn0KCgovLy8gQGRldiBQcmltYXJ5IFRva2VuIENvbnRyYWN0CmNvbnRyYWN0IEdVTlMgaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgLy8gbWV0YWRhdGEKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJHZW9Vbml0cyI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJHVU5TIjsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CiAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAiMS4wIjsKCiAgICAvLyBjb250cmFjdHMKICAgIGFkZHJlc3MgcHVibGljIGhvc3RBY2NvdW50OyAgICAgICAvLyBhZGRyZXNzIHRoYXQga2lja3Mgb2ZmIHRoZSBjcm93ZHNhbGUKICAgIGFkZHJlc3MgcHVibGljIGV0aEZ1bmREZXBvc2l0OyAgICAvLyBkZXBvc2l0IGFkZHJlc3MgZm9yIEVUSCBmb3IgR2VvRm91bmRlcnMKICAgIGFkZHJlc3MgcHVibGljIGd1bnNGdW5kRGVwb3NpdDsgICAvLyBkZXBvc2l0IGFkZHJlc3MgZm9yIEdlb0ZvdW5kZXJzIFRva2VucyAtIEdlb1VuaXRzIChHVU5TKQoKICAgIC8vIGNyb3dkc2FsZSBwYXJhbWV0ZXJzCiAgICBib29sIHB1YmxpYyBpc0ZpbmFsaXplZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmYWxzZSB1bnRpbCBjcm93ZHNhbGUgZmluYWxpemVkCiAgICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nU3RhcnRCbG9jazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydCBibG9jawogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ0VuZEJsb2NrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5kIGJsb2NrCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBndW5zRnVuZCA9IDM1ICogKDEwKio2KSAqIDEwKipkZWNpbWFsczsgICAgICAgICAgICAgICAvLyAzNW0gR1VOUyByZXNlcnZlZCBmb3IgZGV2cwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5FeGNoYW5nZVJhdGUgPSAxMDAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMTAwMCBHVU5TIHBlciAxIEVUSAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5DcmVhdGlvbkNhcCA9ICAxMDAgKiAoMTAqKjYpICogMTAqKmRlY2ltYWxzOyAgICAgLy8gMTAwbSBHVU5TIGZpeGVkIHN1cHBseQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5DcmVhdGlvbk1pbiA9ICAxICogKDEwKio2KSAqIDEwKipkZWNpbWFsczsgICAgICAgLy8gMW0gbWluaW11bSBtdXN0IGJlIGluIHN1cHBseSAobGVnYWN5IGNvZGUpCgogICAgLy8gZXZlbnRzCiAgICBldmVudCBMb2dSZWZ1bmQoYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOyAgIC8vIGV2ZW50IGZvciByZWZ1bmQKICAgIGV2ZW50IENyZWF0ZUdVTlMoYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOyAgLy8gZXZlbnQgZm9yIHRva2VuIGNyZWF0aW9uCgogICAgLy8gc2FmZWx5IGFkZAogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0geCArIHk7CiAgICAgICAgYXNzZXJ0KCh6ID49IHgpICYmICh6ID49IHkpKTsKICAgICAgICByZXR1cm4gejsKICAgIH0KCiAgICAvLyBzYWZlbHkgc3VidHJhY3QKICAgIGZ1bmN0aW9uIHNhZmVTdWJ0cmFjdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIGFzc2VydCh4ID49IHkpOwogICAgICB1aW50MjU2IHogPSB4IC0geTsKICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgLy8gc2FmZWx5IG11bHRpcGx5CiAgICBmdW5jdGlvbiBzYWZlTXVsdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHVpbnQyNTYgeiA9IHggKiB5OwogICAgICBhc3NlcnQoKHggPT0gMCl8fCh6L3ggPT0geSkpOwogICAgICByZXR1cm4gejsKICAgIH0KCiAgICAvLyBjb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gR1VOUygpIHt9CgogICAgLy8gaW5pdGlhbGl6ZSBkZXBsb3llZCBjb250cmFjdAogICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgKICAgICAgICBhZGRyZXNzIF9ldGhGdW5kRGVwb3NpdCwKICAgICAgICBhZGRyZXNzIF9ndW5zRnVuZERlcG9zaXQsCiAgICAgICAgdWludDI1NiBfZnVuZGluZ1N0YXJ0QmxvY2ssCiAgICAgICAgdWludDI1NiBfZnVuZGluZ0VuZEJsb2NrCiAgICApIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShhZGRyZXNzKGhvc3RBY2NvdW50KSA9PSAweDApOyAgICAgLy8gb25lIHRpbWUgaW5pdGlhbGl6ZQogICAgICAgIGhvc3RBY2NvdW50ID0gbXNnLnNlbmRlcjsgICAgICAgICAgICAgICAgIC8vIGFzc2lnbiBpbml0aWFsaXplciB2YXIKICAgICAgICBpc0ZpbmFsaXplZCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAvLyBjcm93ZHNhbGUgc3RhdGUKICAgICAgICBldGhGdW5kRGVwb3NpdCA9IF9ldGhGdW5kRGVwb3NpdDsgICAgICAgICAvLyBzZXQgZmluYWwgRVRIIGRlcG9zaXQgYWRkcmVzcwogICAgICAgIGd1bnNGdW5kRGVwb3NpdCA9IF9ndW5zRnVuZERlcG9zaXQ7ICAgICAgIC8vIHNldCBmaW5hbCBHVU5TIGRldiBkZXBvc2l0IGFkZHJlc3MKICAgICAgICBmdW5kaW5nU3RhcnRCbG9jayA9IF9mdW5kaW5nU3RhcnRCbG9jazsgICAvLyBibG9jayBudW1iZXIgdG8gc3RhcnQgY3Jvd2RzYWxlCiAgICAgICAgZnVuZGluZ0VuZEJsb2NrID0gX2Z1bmRpbmdFbmRCbG9jazsgICAgICAgLy8gYmxvY2sgbnVtYmVyIHRvIGVuZCBjcm93ZHNhbGUKICAgICAgICB0b3RhbFN1cHBseSA9IGd1bnNGdW5kOyAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdG90YWxTdXBwbHkgdG8gcmVzZXJ2ZQogICAgICAgIGJhbGFuY2VzW2d1bnNGdW5kRGVwb3NpdF0gPSBndW5zRnVuZDsgICAgIC8vIGRlcG9zaXQgcmVzZXJ2ZSB0b2tlbnMgdG8gZGV2IGFkZHJlc3MKICAgICAgICBDcmVhdGVHVU5TKGd1bnNGdW5kRGVwb3NpdCwgZ3Vuc0Z1bmQpOyAgICAvLyBsb2dzIHRva2VuIGNyZWF0aW9uIGV2ZW50CiAgICB9CgogICAgLy8gZW5hYmxlIHBlb3BsZSB0byBwYXkgY29udHJhY3QgZGlyZWN0bHkKICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKGFkZHJlc3MoaG9zdEFjY291bnQpICE9IDB4MCk7ICAgICAgICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uIGNoZWNrCgogICAgICAgIGlmIChpc0ZpbmFsaXplZCkgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3Jvd2RzYWxlIHN0YXRlIGNoZWNrCiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8IGZ1bmRpbmdTdGFydEJsb2NrKSB0aHJvdzsgICAgICAgICAgICAgICAvLyB3aXRoaW4gc3RhcnQgYmxvY2sgY2hlY2sKICAgICAgICBpZiAoYmxvY2subnVtYmVyID4gZnVuZGluZ0VuZEJsb2NrKSB0aHJvdzsgICAgICAgICAgICAgICAgIC8vIHdpdGhpbiBlbmQgYmxvY2sgY2hlY2sKICAgICAgICBpZiAobXNnLnZhbHVlID09IDApIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBlcnNvbiBhY3R1YWxseSBzZW50IEVUSCBjaGVjawoKICAgICAgICB1aW50MjU2IHRva2VucyA9IHNhZmVNdWx0KG1zZy52YWx1ZSwgdG9rZW5FeGNoYW5nZVJhdGUpOyAgIC8vIGNhbGN1bGF0ZSBudW0gb2YgdG9rZW5zIHB1cmNoYXNlZAogICAgICAgIHVpbnQyNTYgY2hlY2tlZFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIHRva2Vucyk7ICAgICAgLy8gY2FsY3VsYXRlIHRvdGFsIHN1cHBseSBpZiBwdXJjaGFzZWQKCiAgICAgICAgaWYgKHRva2VuQ3JlYXRpb25DYXAgPCBjaGVja2VkU3VwcGx5KSB0aHJvdzsgICAgICAgICAgICAgICAvLyBpZiBleGNlZWRpbmcgdG9rZW4gbWF4LCBjYW5jZWwgb3JkZXIKCiAgICAgICAgdG90YWxTdXBwbHkgPSBjaGVja2VkU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdG90YWxTdXBwbHkKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSB0b2tlbnM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0b2tlbiBiYWxhbmNlIGZvciBwYXllcgogICAgICAgIENyZWF0ZUdVTlMobXNnLnNlbmRlciwgdG9rZW5zKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9ncyB0b2tlbiBjcmVhdGlvbiBldmVudAogICAgfQoKICAgIC8vIGdlbmVyaWMgZnVuY3Rpb24gdG8gcGF5IHRoaXMgY29udHJhY3QKICAgIGZ1bmN0aW9uIGVtZXJnZW5jeVBheSgpIGV4dGVybmFsIHBheWFibGUge30KCiAgICAvLyB3cmFwIHVwIGNyb3dkc2FsZSBhZnRlciBlbmQgYmxvY2sKICAgIGZ1bmN0aW9uIGZpbmFsaXplKCkgZXh0ZXJuYWwgewogICAgICAgIC8vaWYgKGlzRmluYWxpemVkKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGNyb3dkc2FsZSBzdGF0ZSBpcyBmYWxzZQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGV0aEZ1bmREZXBvc2l0KSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGNhbGxlciBpcyBFVEggZGVwb3NpdCBhZGRyZXNzCiAgICAgICAgLy9pZiAodG90YWxTdXBwbHkgPCB0b2tlbkNyZWF0aW9uTWluKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgbWluaW11bSBpcyBtZXQKICAgICAgICBpZiAoYmxvY2subnVtYmVyIDw9IGZ1bmRpbmdFbmRCbG9jayAmJiB0b3RhbFN1cHBseSA8IHRva2VuQ3JlYXRpb25DYXApIHRocm93OyAgICAvLyBjaGVjayBwYXN0IGVuZCBibG9jayB1bmxlc3MgYXQgY3JlYXRpb24gY2FwCgogICAgICAgIGlmICghZXRoRnVuZERlcG9zaXQuc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgYWNjb3VudCBiYWxhbmNlIHRvIEVUSCBkZXBvc2l0IGFkZHJlc3MKICAgICAgICAKICAgICAgICB1aW50MjU2IHJlbWFpbmluZ1N1cHBseSA9IHNhZmVTdWJ0cmFjdCh0b2tlbkNyZWF0aW9uQ2FwLCB0b3RhbFN1cHBseSk7ICAgICAgICAgICAvLyBjYWxjdWxhdGUgcmVtYWluaW5nIHRva2VucyB0byByZWFjaCBmaXhlZCBzdXBwbHkKICAgICAgICBpZiAocmVtYWluaW5nU3VwcGx5ID4gMCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByZW1haW5pbmcgc3VwcGx5IGxlZnQKICAgICAgICAgICAgdWludDI1NiB1cGRhdGVkU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSwgcmVtYWluaW5nU3VwcGx5KTsgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgdG90YWwgc3VwcGx5IHdpdGggcmVtYWluaW5nIHN1cHBseQogICAgICAgICAgICB0b3RhbFN1cHBseSA9IHVwZGF0ZWRTdXBwbHk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0b3RhbFN1cHBseQogICAgICAgICAgICBiYWxhbmNlc1tndW5zRnVuZERlcG9zaXRdICs9IHJlbWFpbmluZ1N1cHBseTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hbnVhbGx5IHVwZGF0ZSBkZXZzIHRva2VuIGJhbGFuY2UKICAgICAgICAgICAgQ3JlYXRlR1VOUyhndW5zRnVuZERlcG9zaXQsIHJlbWFpbmluZ1N1cHBseSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb2dzIHRva2VuIGNyZWF0aW9uIGV2ZW50CiAgICAgICAgfQoKICAgICAgICBpc0ZpbmFsaXplZCA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgY3Jvd2RzYWxlIHN0YXRlIHRvIHRydWUKICAgIH0KCiAgICAvLyBsZWdhY3kgY29kZSB0byBlbmFibGUgcmVmdW5kcyBpZiBtaW4gdG9rZW4gc3VwcGx5IG5vdCBtZXQgKG5vdCBwb3NzaWJsZSB3aXRoIGZpeGVkIHN1cHBseSkKICAgIGZ1bmN0aW9uIHJlZnVuZCgpIGV4dGVybmFsIHsKICAgICAgICBpZiAoaXNGaW5hbGl6ZWQpIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBjcm93ZHNhbGUgc3RhdGUgaXMgZmFsc2UKICAgICAgICBpZiAoYmxvY2subnVtYmVyIDw9IGZ1bmRpbmdFbmRCbG9jaykgdGhyb3c7ICAgICAgICAgICAvLyBjaGVjayBjcm93ZHNhbGUgc3RpbGwgcnVubmluZwogICAgICAgIGlmICh0b3RhbFN1cHBseSA+PSB0b2tlbkNyZWF0aW9uTWluKSB0aHJvdzsgICAgICAgICAgIC8vIGNoZWNrIGNyZWF0aW9uIG1pbiB3YXMgbm90IG1ldAogICAgICAgIGlmIChtc2cuc2VuZGVyID09IGd1bnNGdW5kRGVwb3NpdCkgdGhyb3c7ICAgICAgICAgICAgIC8vIGRvIG5vdCBhbGxvdyBkZXYgcmVmdW5kCgogICAgICAgIHVpbnQyNTYgZ3Vuc1ZhbCA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOyAgICAgICAgICAgICAgIC8vIGdldCBjYWxsZXJzIHRva2VuIGJhbGFuY2UKICAgICAgICBpZiAoZ3Vuc1ZhbCA9PSAwKSB0aHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBjYWxsZXIgaGFzIHRva2VucwoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY2FsbGVycyB0b2tlbnMgdG8gemVybwogICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZVN1YnRyYWN0KHRvdGFsU3VwcGx5LCBndW5zVmFsKTsgICAgIC8vIHN1YnRyYWN0IGNhbGxlcnMgYmFsYW5jZSBmcm9tIHRvdGFsIHN1cHBseQogICAgICAgIHVpbnQyNTYgZXRoVmFsID0gZ3Vuc1ZhbCAvIHRva2VuRXhjaGFuZ2VSYXRlOyAgICAgICAgIC8vIGNhbGN1bGF0ZSBFVEggZnJvbSB0b2tlbiBleGNoYW5nZSByYXRlCiAgICAgICAgTG9nUmVmdW5kKG1zZy5zZW5kZXIsIGV0aFZhbCk7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9nIHJlZnVuZCBldmVudAoKICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChldGhWYWwpKSB0aHJvdzsgICAgICAgICAgICAgICAgICAvLyBzZW5kIGNhbGxlciB0aGVpciByZWZ1bmQKICAgIH0KCiAgICAvLyBjbGVhbiB1cCBtaXN0YWtlbiB0b2tlbnMgc2VudCB0byB0aGlzIGNvbnRyYWN0CiAgICAvLyBhbHNvIGNoZWNrIGVtcHR5IGFkZHJlc3MgZm9yIHRva2VucyBhbmQgY2xlYW4gb3V0CiAgICAvLyAoR1VOUyBvbmx5LCBkb2VzIG5vdCBzdXBwb3J0IDNyZCBwYXJ0eSB0b2tlbnMpCiAgICBmdW5jdGlvbiBtaXN0YWtlblRva2VucygpIGV4dGVybmFsIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBldGhGdW5kRGVwb3NpdCkgdGhyb3c7ICAgICAgICAgICAgICAgIC8vIGNoZWNrIGNhbGxlciBpcyBFVEggZGVwb3NpdCBhZGRyZXNzCiAgICAgICAgCiAgICAgICAgaWYgKGJhbGFuY2VzW3RoaXNdID4gMCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjb250cmFjdCBoYXMgdG9rZW5zCiAgICAgICAgICAgIFRyYW5zZmVyKHRoaXMsIGd1bnNGdW5kRGVwb3NpdCwgYmFsYW5jZXNbdGhpc10pOyAgICAvLyBsb2cgdHJhbnNmZXIgZXZlbnQKICAgICAgICAgICAgYmFsYW5jZXNbZ3Vuc0Z1bmREZXBvc2l0XSArPSBiYWxhbmNlc1t0aGlzXTsgICAgICAgIC8vIHNlbmQgdG9rZW5zIHRvIGRldiB0b2tlbnMgYWRkcmVzcwogICAgICAgICAgICBiYWxhbmNlc1t0aGlzXSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gemVybyBvdXQgY29udHJhY3QgdG9rZW4gYmFsYW5jZQogICAgICAgIH0KCiAgICAgICAgaWYgKGJhbGFuY2VzWzB4MF0gPiAwKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbXB0eSBhZGRyZXNzIGhhcyB0b2tlbnMKICAgICAgICAgICAgVHJhbnNmZXIoMHgwLCBndW5zRnVuZERlcG9zaXQsIGJhbGFuY2VzWzB4MF0pOyAgICAgIC8vIGxvZyB0cmFuc2ZlciBldmVudAogICAgICAgICAgICBiYWxhbmNlc1tndW5zRnVuZERlcG9zaXRdICs9IGJhbGFuY2VzWzB4MF07ICAgICAgICAgLy8gc2VuZCB0b2tlbnMgdG8gZGV2IHRva2VucyBhZGRyZXNzCiAgICAgICAgICAgIGJhbGFuY2VzWzB4MF0gPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB6ZXJvIG91dCBlbXB0eSBhZGRyZXNzIHRva2VuIGJhbGFuY2UKICAgICAgICB9CiAgICB9Cgp9'.
	

]
