Class {
	#name : #SRTd8bbc96b7e6203a14c96cdc51276cd7a5bec6b8d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd8bbc96b7e6203a14c96cdc51276cd7a5bec6b8d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuNjsKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBPd25lZCB7CgogICAgLy8gVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgdGhhdCBpcyB0aGUgY3VycmVudCBvd25lcgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgLy8gVGhlIHB1Ymxpc2VyIGlzIHRoZSBpbml0YWwgb3duZXIKICAgIGZ1bmN0aW9uIE93bmVkKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvKioKICAgICAqIFJlc3RyaWN0ZWQgYWNjZXNzIHRvIHRoZSBjdXJyZW50IG93bmVyCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZmVyIG93bmVyc2hpcCB0byBgX25ld093bmVyYAogICAgICoKICAgICAqIEBwYXJhbSBfbmV3T3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgdGhhdCB3aWxsIGJlY29tZSB0aGUgbmV3IG93bmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgewogICAgICAgIG93bmVyID0gX25ld093bmVyOwogICAgfQp9CgovLyBBYnN0cmFjdCBjb250cmFjdCBmb3IgdGhlIGZ1bGwgRVJDIDIwIFRva2VuIHN0YW5kYXJkCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMApjb250cmFjdCBUb2tlbiB7CiAgICAvKiBUaGlzIGlzIGEgc2xpZ2h0IGNoYW5nZSB0byB0aGUgRVJDMjAgYmFzZSBzdGFuZGFyZC4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgaXMgcmVwbGFjZWQgd2l0aDoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgVGhpcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgYSBnZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSB0b3RhbFN1cHBseS4KICAgIFRoaXMgaXMgbW92ZWQgdG8gdGhlIGJhc2UgY29udHJhY3Qgc2luY2UgcHVibGljIGdldHRlciBmdW5jdGlvbnMgYXJlIG5vdAogICAgY3VycmVudGx5IHJlY29nbmlzZWQgYXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIG1hdGNoaW5nIGFic3RyYWN0CiAgICBmdW5jdGlvbiBieSB0aGUgY29tcGlsZXIuCiAgICAqLwogICAgLy8vIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBgX2Zyb21gCiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBSSUNIIHRva2VuCiAqCiAqIEltcGxlbWVudHMgRVJDIDIwIFRva2VuIHN0YW5kYXJkOiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAgd2l0aCB0aGUgYWRkaXRpb24KICogb2Ygb3duZXJzaGlwLCBhIGxvY2sgYW5kIGlzc3VpbmcuCiAqCiAqICNjcmVhdGVkIDA1LzAzLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IFJJQ0hUb2tlbiBpcyBPd25lZCwgVG9rZW4gewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIC8vIEV0aGVyZXVtIHRva2VuIHN0YW5kYWFyZAogICAgc3RyaW5nIHB1YmxpYyBzdGFuZGFyZCA9ICJUb2tlbiAwLjEiOwoKICAgIC8vIEZ1bGwgbmFtZQogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIlJJQ0giOwoKICAgIC8vIFN5bWJvbAogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiUklDSCI7CgogICAgLy8gTm8gZGVjaW1hbCBwb2ludHMKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDg7CgogICAgLy8gVG9rZW4gc3RhcnRzIGlmIHRoZSBsb2NrZWQgc3RhdGUgcmVzdHJpY3RpbmcgdHJhbnNmZXJzCiAgICBib29sIHB1YmxpYyBsb2NrZWQ7CgogICAgdWludDI1NiBwdWJsaWMgY3Jvd2RzYWxlU3RhcnQ7IC8vIFJlZmVyZW5jZSB0byB0aW1lIG9mIGZpcnN0IGNyb3dkIHNhbGUKICAgIHVpbnQyNTYgcHVibGljIGljb1BlcmlvZCA9IDEwIGRheXM7CiAgICB1aW50MjU2IHB1YmxpYyBub0ljb1BlcmlvZCA9IDEwIGRheXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikpIGJhbGFuY2VzUGVySWNvUGVyaW9kOwoKICAgIHVpbnQyNTYgcHVibGljIGJ1cm5QZXJjZW50YWdlRGVmYXVsdCA9IDE7IC8vIDAuMDElCiAgICB1aW50MjU2IHB1YmxpYyBidXJuUGVyY2VudGFnZTEwbSA9IDU7IC8vIDAuMDUlCiAgICB1aW50MjU2IHB1YmxpYyBidXJuUGVyY2VudGFnZTEwMG0gPSA1MDsgLy8gMC41JQogICAgdWludDI1NiBwdWJsaWMgYnVyblBlcmNlbnRhZ2UxMDAwbSA9IDEwMDsgLy8gMSUKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgIC8qKgogICAgICogR2V0IGJ1cm5pbmcgbGluZS4gQWxsIGludmVzdG9ycyB0aGF0IG93biBsZXNzIHRoYW4gYnVybmluZyBsaW5lCiAgICAgKiB3aWxsIGxvc2Ugc29tZSB0b2tlbnMgaWYgdGhleSBkb24ndCBpbnZlc3QgZWFjaCByb3VuZCAyMCUgbW9yZSB0b2tlbnMKICAgICAqCiAgICAgKiBAcmV0dXJuIGJ1cm5MaW5lCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldEJ1cm5MaW5lKCkgcmV0dXJucyAodWludDI1NiBidXJuTGluZSkgewogICAgICAgIGlmICh0b3RhbFN1cHBseSA8IDEwKio3ICogMTAqKjgpIHsKICAgICAgICAgICAgcmV0dXJuIHRvdGFsU3VwcGx5ICogYnVyblBlcmNlbnRhZ2VEZWZhdWx0IC8gMTAwMDA7CiAgICAgICAgfQoKICAgICAgICBpZiAodG90YWxTdXBwbHkgPCAxMCoqOCAqIDEwKio4KSB7CiAgICAgICAgICAgIHJldHVybiB0b3RhbFN1cHBseSAqIGJ1cm5QZXJjZW50YWdlMTBtIC8gMTAwMDA7CiAgICAgICAgfQoKICAgICAgICBpZiAodG90YWxTdXBwbHkgPCAxMCoqOSAqIDEwKio4KSB7CiAgICAgICAgICAgIHJldHVybiB0b3RhbFN1cHBseSAqIGJ1cm5QZXJjZW50YWdlMTAwbSAvIDEwMDAwOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRvdGFsU3VwcGx5ICogYnVyblBlcmNlbnRhZ2UxMDAwbSAvIDEwMDAwOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIElDTyBudW1iZXIgKFByZUljbyBoYXMgaW5kZXggMCkKICAgICAqCiAgICAgKiBAcmV0dXJuIElDTyBudW1iZXIKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0Q3VycmVudEljb051bWJlcigpIHJldHVybnMgKHVpbnQyNTYgaWNvTnVtYmVyKSB7CiAgICAgICAgdWludDI1NiB0aW1lQmVoaW5kID0gbm93IC0gY3Jvd2RzYWxlU3RhcnQ7CgogICAgICAgIGlmIChub3cgPCBjcm93ZHNhbGVTdGFydCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiAxICsgKCh0aW1lQmVoaW5kIC0gKHRpbWVCZWhpbmQgJSAoaWNvUGVyaW9kICsgbm9JY29QZXJpb2QpKSkgLyAoaWNvUGVyaW9kICsgbm9JY29QZXJpb2QpKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBiYWxhbmNlIG9mIGBfb3duZXJgCiAgICAgKgogICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAgKiBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLyoqCiAgICAgKiBTdGFydCBvZiB0aGUgY3Jvd2Qgc2FsZSBjYW4gYmUgc2V0IG9ubHkgb25jZQogICAgICoKICAgICAqIEBwYXJhbSBfc3RhcnQgc3RhcnQgb2YgdGhlIGNyb3dkIHNhbGUKICAgICAqLwogICAgZnVuY3Rpb24gc2V0Q3Jvd2RTYWxlU3RhcnQodWludDI1NiBfc3RhcnQpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKGNyb3dkc2FsZVN0YXJ0ID4gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjcm93ZHNhbGVTdGFydCA9IF9zdGFydDsKICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgICAqCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgLy8gVW5hYmxlIHRvIHRyYW5zZmVyIHdoaWxlIHN0aWxsIGxvY2tlZAogICAgICAgIGlmIChsb2NrZWQpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQoKICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2ggdG9rZW5zCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KCiAgICAgICAgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIGlmIChiYWxhbmNlc1tfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZXNbX3RvXSkgIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQoKICAgICAgICAvLyBUcmFuc2ZlciB0b2tlbnMKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CgogICAgICAgIC8vIE5vdGlmeSBsaXN0bmVycwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKCiAgICAgICAgYmFsYW5jZXNQZXJJY29QZXJpb2RbX3RvXVtnZXRDdXJyZW50SWNvTnVtYmVyKCldID0gYmFsYW5jZXNbX3RvXTsKICAgICAgICBiYWxhbmNlc1Blckljb1BlcmlvZFttc2cuc2VuZGVyXVtnZXRDdXJyZW50SWNvTnVtYmVyKCldID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgICAgICAgLy8gVW5hYmxlIHRvIHRyYW5zZmVyIHdoaWxlIHN0aWxsIGxvY2tlZAogICAgICAgIGlmIChsb2NrZWQpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQoKICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dIDwgX3ZhbHVlKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KCiAgICAgICAgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIGlmIChiYWxhbmNlc1tfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIC8vIENoZWNrIGFsbG93YW5jZQogICAgICAgIGlmIChfdmFsdWUgPiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIC8vIFRyYW5zZmVyIHRva2VucwogICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CgogICAgICAgIC8vIFVwZGF0ZSBhbGxvd2FuY2UKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CgogICAgICAgIC8vIE5vdGlmeSBsaXN0bmVycwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CgogICAgICAgIGJhbGFuY2VzUGVySWNvUGVyaW9kW190b11bZ2V0Q3VycmVudEljb051bWJlcigpXSA9IGJhbGFuY2VzW190b107CiAgICAgICAgYmFsYW5jZXNQZXJJY29QZXJpb2RbX2Zyb21dW2dldEN1cnJlbnRJY29OdW1iZXIoKV0gPSBiYWxhbmNlc1tfZnJvbV07CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgICAqCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlcgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIC8vIFVuYWJsZSB0byBhcHByb3ZlIHdoaWxlIHN0aWxsIGxvY2tlZAogICAgICAgIGlmIChsb2NrZWQpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQoKICAgICAgICAvLyBVcGRhdGUgYWxsb3dhbmNlCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CgogICAgICAgIC8vIE5vdGlmeSBsaXN0bmVycwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvKioKICAgICAqIEdldCB0aGUgYW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgdGhhdCBgX3NwZW5kZXJgIGlzIGFsbG93ZWQgdG8gc3BlbmQgZnJvbSBgX293bmVyYAogICAgICoKICAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgICogQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgLyoqCiAgICAgKiBTdGFydHMgd2l0aCBhIHRvdGFsIHN1cHBseSBvZiB6ZXJvIGFuZCB0aGUgY3JlYXRvciBzdGFydHMgd2l0aAogICAgICogemVybyB0b2tlbnMgKGp1c3QgbGlrZSBldmVyeW9uZSBlbHNlKQogICAgICovCiAgICBmdW5jdGlvbiBSSUNIVG9rZW4oKSB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIHRvdGFsU3VwcGx5ID0gMDsKICAgICAgICBsb2NrZWQgPSBmYWxzZTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBVbmxvY2tzIHRoZSB0b2tlbiBpcnJldmVyc2libHkgc28gdGhhdCB0aGUgdHJhbnNmZXJpbmcgb2YgdmFsdWUgaXMgZW5hYmxlZAogICAgICoKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdW5sb2NraW5nIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiB1bmxvY2soKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSAgewogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogUmVzdHJpY3RlZCBhY2Nlc3MgdG8gdGhlIGN1cnJlbnQgb3duZXIKICAgICAqLwogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogSXNzdWVzIGBfdmFsdWVgIG5ldyB0b2tlbnMgdG8gYF9yZWNpcGllbnRgCiAgICAgKgogICAgICogQHBhcmFtIF9yZWNpcGllbnQgVGhlIGFkZHJlc3MgdG8gd2hpY2ggdGhlIHRva2VucyB3aWxsIGJlIGlzc3VlZAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIG5ldyB0b2tlbnMgdG8gaXNzdWUKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzc3VlKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfdmFsdWUpIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgLy8gQ3JlYXRlIHRva2VucwogICAgICAgIGJhbGFuY2VzW19yZWNpcGllbnRdICs9IF92YWx1ZTsKICAgICAgICB0b3RhbFN1cHBseSArPSBfdmFsdWU7CgogICAgICAgIGJhbGFuY2VzUGVySWNvUGVyaW9kW19yZWNpcGllbnRdW2dldEN1cnJlbnRJY29OdW1iZXIoKV0gPSBiYWxhbmNlc1tfcmVjaXBpZW50XTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayBpZiBpbnZlc3RvciBoYXMgaW52ZXN0ZWQgZW5vdWdoIHRvIGF2b2lkIGJ1cm5pbmcKICAgICAqCiAgICAgKiBAcGFyYW0gX2ludmVzdG9yIEludmVzdG9yCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgaW52ZXN0b3IgaGFzIGludmVzdGVkIGVub3VnaCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gaXNJbmNyZWFzZWRFbm91Z2goYWRkcmVzcyBfaW52ZXN0b3IpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHVpbnQyNTYgY3VycmVudEljb051bWJlciA9IGdldEN1cnJlbnRJY29OdW1iZXIoKTsKCiAgICAgICAgaWYgKGN1cnJlbnRJY29OdW1iZXIgLSAyIDwgMCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHVpbnQyNTYgY3VycmVudEJhbGFuY2UgPSBiYWxhbmNlc1tfaW52ZXN0b3JdOwogICAgICAgIHVpbnQyNTYgaWNvc0JlZm9yZSA9IGJhbGFuY2VzUGVySWNvUGVyaW9kW19pbnZlc3Rvcl1bY3VycmVudEljb051bWJlciAtIDJdOwoKICAgICAgICBpZiAoaWNvc0JlZm9yZSA9PSAwKSB7CiAgICAgICAgICAgIGZvcih1aW50IGkgPSBjdXJyZW50SWNvTnVtYmVyOyBpID49IDI7IGktLSkgewogICAgICAgICAgICAgICAgaWNvc0JlZm9yZSA9IGJhbGFuY2VzUGVySWNvUGVyaW9kW19pbnZlc3Rvcl1baS0yXTsKCiAgICAgICAgICAgICAgICBpZiAoaWNvc0JlZm9yZSAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChjdXJyZW50QmFsYW5jZSA8IGljb3NCZWZvcmUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGN1cnJlbnRCYWxhbmNlIC0gaWNvc0JlZm9yZSA+IGljb3NCZWZvcmUgKiAxMiAvIDEwKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogRnVuY3Rpb24gdGhhdCBldmVyeW9uZSBjYW4gY2FsbCBhbmQgYnVybiBmb3Igb3RoZXIgdG9rZW5zIGlmIHRoZXkgY2FuCiAgICAgKiBiZSBidXJuZWQuIEluIHJldHVybiwgMTAlIG9mIGJ1cm5lZCB0b2tlbnMgZ28gdG8gZXhlY3V0b3Igb2YgZnVuY3Rpb24KICAgICAqCiAgICAgKiBAcGFyYW0gX2ludmVzdG9yIEFkZHJlc3Mgb2YgaW52ZXN0b3Igd2hpY2ggdG9rZW5zIGFyZSBzdWJqZWN0IG9mIGJ1cm4KICAgICAqLwogICAgZnVuY3Rpb24gYnVybihhZGRyZXNzIF9pbnZlc3RvcikgcHVibGljIHsKCiAgICAgICAgdWludDI1NiBidXJuTGluZSA9IGdldEJ1cm5MaW5lKCk7CgogICAgICAgIGlmIChiYWxhbmNlc1tfaW52ZXN0b3JdID4gYnVybkxpbmUgfHwgaXNJbmNyZWFzZWRFbm91Z2goX2ludmVzdG9yKSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB1aW50MjU2IHRvQmVCdXJuZWQgPSBidXJuTGluZSAtIGJhbGFuY2VzW19pbnZlc3Rvcl07CiAgICAgICAgaWYgKHRvQmVCdXJuZWQgPiBiYWxhbmNlc1tfaW52ZXN0b3JdKSB7CiAgICAgICAgICAgIHRvQmVCdXJuZWQgPSBiYWxhbmNlc1tfaW52ZXN0b3JdOwogICAgICAgIH0KCiAgICAgICAgLy8gMTAlIGZvciBleGVjdXRvcgogICAgICAgIHVpbnQyNTYgZXhlY3V0b3JSZXdhcmQgPSB0b0JlQnVybmVkIC8gMTA7CgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKGV4ZWN1dG9yUmV3YXJkKTsKICAgICAgICBiYWxhbmNlc1tfaW52ZXN0b3JdID0gYmFsYW5jZXNbX2ludmVzdG9yXS5zdWIodG9CZUJ1cm5lZCk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIodG9CZUJ1cm5lZCAtIGV4ZWN1dG9yUmV3YXJkKTsKICAgICAgICBCdXJuKF9pbnZlc3RvciwgdG9CZUJ1cm5lZCk7CiAgICB9CgogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgYnVybmVyLCB1aW50IGluZGV4ZWQgdmFsdWUpOwoKICAgIC8qKgogICAgICogUHJldmVudHMgYWNjaWRlbnRhbCBzZW5kaW5nIG9mIGV0aGVyCiAgICAgKi8KICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdzsKICAgIH0KfQ=='.
	

]
