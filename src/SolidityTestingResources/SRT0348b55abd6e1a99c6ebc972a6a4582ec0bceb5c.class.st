Class {
	#name : #SRT0348b55abd6e1a99c6ebc972a6a4582ec0bceb5c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0348b55abd6e1a99c6ebc972a6a4582ec0bceb5c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8vVGhpcyBjb250cmFjdCBpcyBiYWNrZWQgYnkgdGhlIGNvbnN0aXR1dGlvbiBvZiBzdXBlckRBTyBkZXBsb3llZCBhdCA6IC4KLy9UaGUgY29uc3RpdHV0aW9uIG9mIHRoZSBzdXBlckRBTyBpcyB0aGUgc29jaWFsIGNvbnRyYWN0LCB0ZXJtcywgZm91bmRpbmcgcHJpbmNpcGxlcyBhbmQgZGVmaW5pdGlvbnMgb2YgdGhlIHZpc2lvbiwKLy9taXNzaW9uLCBhbnRpLW1pc3Npb25zLCBydWxlcyBhbmQgb3BlcmF0aW9uIGd1aWRlbGluZXMgb2Ygc3VwZXJEQU8uCi8vVGhlIHRvdGFsIG51bWJlciBvZiAzLDAwMCwwMDAgcmVwcmVzZW50cyAzJSBvZiAxMDAsMDAwLDAwMCBpbW11dGFibGUgbnVtYmVyIG9mIHN1cGVyREFPIHRva2VucywKLy93aGljaCBpcyB0aGUgYWxsb3RlZCBidWRnZXQgb2Ygb3BlcmF0aW9uIGZvciB0aGUgZWFybGllc3QgZnVuZGluZyBhY3Rpdml0aWVzLgovL0V2ZXJ5IHByb21taXNzb3J5IHRva2VuIGlzIGV4Y2hhbmdlYWJsZSBmb3IgdGhlIHJlYWwgc3VwZXJEQU8gdG9rZW5zIG9uIGEgb25lIG9uIG9uZSBiYXNpcy4KLy9Qcm9taXNzaW9yeSBjb250cmFjdCB3aWxsIGJlIGRlcGxveWVkIHdpdGggdGhlIGFjdHVhbCBzdXBlckRBTyB0b2tlbiBjb250cmFjdC4KLy9FYXJseSBiYWNrZXJzIGNhbiBjYWxsIHRoZSAicmVkZWVtIiBmdW5jdGlvbiBvbiB0aGUgYWN0dWFsIHRva2VuIGNvbnRyYWN0IHRvIGV4Y2hhbmdlIHByb21pc3NvcnkgdG9rZW5zIGZvciB0aGUgZmluYWwgdG9rZW5zLgoKLyoqCiAqIEB0aXRsZSBQcm9taXNvcnkgVG9rZW4gQ29udHJhY3QKICogQGF1dGhvciBvbGEKICogLS0tIENvbGxhYm9yYXRvcnMgLS0tCiAqIEBhdXRob3IgemxhdGlub3YKICogQGF1dGhvciBwYW5vcwogKiBAYXV0aG9yIHllbWkKICogQGF1dGhvciBhcmNoaWwKICogQGF1dGhvciBhbnRob255CiAqLwpjb250cmFjdCBQcm9taXNzb3J5VG9rZW4gewoKICAgIGV2ZW50IEZvdW5kZXJTd2l0Y2hSZXF1ZXN0RXZlbnQoYWRkcmVzcyBfbmV3Rm91bmRlckFkZHIpOwogICAgZXZlbnQgRm91bmRlclN3aXRjaGVkRXZlbnQoYWRkcmVzcyBfbmV3Rm91bmRlckFkZHIpOwogICAgZXZlbnQgQ29mb3VuZGVyU3dpdGNoZWRFdmVudChhZGRyZXNzIF9uZXdDb2ZvdW5kZXJBZGRyKTsKCiAgICBldmVudCBBZGRlZFByZXBhaWRUb2tlbnNFdmVudChhZGRyZXNzIGJhY2tlciwgdWludCBpbmRleCwgdWludCBwcmljZSwgdWludCBhbW91bnQpOwogICAgZXZlbnQgUHJlcGFpZFRva2Vuc0NsYWltZWRFdmVudChhZGRyZXNzIGJhY2tlciwgdWludCBpbmRleCwgdWludCBwcmljZSwgdWludCBhbW91bnQpOwogICAgZXZlbnQgVG9rZW5zQ2xhaW1lZEV2ZW50KGFkZHJlc3MgYmFja2VyLCB1aW50IGluZGV4LCB1aW50IHByaWNlLCB1aW50IGFtb3VudCk7CgogICAgZXZlbnQgUmVkZWVtRXZlbnQoYWRkcmVzcyBiYWNrZXIsIHVpbnQgYW1vdW50KTsKCiAgICBldmVudCBXaXRoZHJhd2FsQ3JlYXRlZEV2ZW50KHVpbnQgd2l0aGRyYXdhbElkLCB1aW50IGFtb3VudCwgYnl0ZXMgcmVhc29uKTsKICAgIGV2ZW50IFdpdGhkcmF3YWxWb3RlZEV2ZW50KHVpbnQgd2l0aGRyYXdhbElkLCBhZGRyZXNzIGJhY2tlciwgdWludCBiYWNrZXJTdGFrZVdlaWd0aCwgdWludCB0b3RhbFN0YWtlV2VpZ2h0KTsKICAgIGV2ZW50IFdpdGhkcmF3YWxBcHByb3ZlZCh1aW50IHdpdGhkcmF3YWxJZCwgdWludCBzdGFrZVdlaWdodCwgYm9vbCBpc011bHRpUGF5bWVudCwgdWludCBhbW91bnQsIGJ5dGVzIHJlYXNvbik7CgogICAgYWRkcmVzcyBmb3VuZGVyOyAvL2RlcGxveWVyIG9mIGNvbnN0aXR1dGlvbiBhbmQgUHJvbWlzc29yeVRva2VuCiAgICBieXRlczMyIGZvdW5kZXJIYXNoOyAvLyBoYXNoIG11c3QgYmUgY29uZmlybWVkIGluIG9yZGVyIHRvIHJlcGxhY2UgZm91bmRlciBhZGRyZXNzCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYnl0ZXMzMikgdGVtcEhhc2hlczsgLy8gc3RydWN0dXJlIHRvIGNvbnRhaW4gbmV3IGFkZHJlc3MgdG8gaGFzaCBzdG9yYWdlLAogICAgYWRkcmVzcyBjb2ZvdW5kZXI7Ly9oZWxwZXIgdG8gYWlkIGZvdW5kZXIga2V5IGV4Y2hhbmdlIGluIGNhc2Ugb2Yga2V5IGxvc3MKICAgIGFkZHJlc3MgW10gcHVibGljIHByZXZpb3VzRm91bmRlcnM7IC8vbGlzdCBvZiBhZGRyZXNzZXMgcmVwbGFjZWQgdXNpbmcgdGhlIHN3aXRjaGluZyBwcm9jZXNzLgogICAgdWludCBjb25zdGFudCBkaXNjb3VudEFtb3VudCA9IDYwOyAvL2Rpc2NvdW50IGFtb3VudAogICAgdWludCBjb25zdGFudCBkaXZpc29yID0gMTAwOyAvL2Rpdmlzb3IgdG8gZ2V0IGRpc2NvdW50IHZhbHVlCgogICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWluaW11bVByZXBhaWRDbGFpbWVkUGVyY2VudCA9IDY1OwogICAgdWludCBwdWJsaWMgcHJvbWlzc29yeVVuaXRzID0gMzAwMDAwMDsgLy9hbW91bnQgb2YgdG9rZW5zIGNvbnRhbnRzIHNldAogICAgdWludCBwdWJsaWMgcHJlcGFpZFVuaXRzID0gMDsgLy9wcmVwYWlkIGFuZCBzZXQgYnkgZm91bmRlciBvdXQgb2YgMyBtaWxsaW9uIHRva2VucwogICAgdWludCBwdWJsaWMgY2xhaW1lZFVuaXRzID0gMDsgLy9jbGFpbWVkIHRva2VucyBvdXQgb2YgMyBtaWxsaW9uIHRva2VucwogICAgdWludCBwdWJsaWMgY2xhaW1lZFByZXBhaWRVbml0cyA9IDA7IC8vY2xhaW1lZCB0b2tlbnMgb3V0IG9mIHRoZSBlYXJseSBiYWNrZXIncyB0b2tlbnMvcHJlcGFpZFVuaXRzCiAgICB1aW50IHB1YmxpYyByZWRlZW1lZFRva2VucyA9IDA7IC8vbnVtYmVyIG9mIHRva2VucyBvdXQgb2YgY2xhaW1lZCB0b2tlbnMsIHJlZGVlbWVkIGJ5IHN1cGVyREFPIHRva2VuIGNhbGwKICAgIHVpbnQgcHVibGljIGxhc3RQcmljZSA9IDA7IC8vbGF0ZXN0IHByaWNlIG9mIHRva2VuIGFjcXVpcmVkIGJ5IGJhY2tlciBpbiBXZWkKICAgIHVpbnQgcHVibGljIG51bU9mQmFja2VyczsgLy9udW1iZXIgb2YgZWFybHkgYmFja2VycwoKICAgIHN0cnVjdCBiYWNrZXJEYXRhIHsKICAgICAgIHVpbnQgdG9rZW5QcmljZTsKICAgICAgIHVpbnQgdG9rZW5BbW91bnQ7CiAgICAgICBieXRlczMyIHByaXZhdGVIYXNoOwogICAgICAgYm9vbCBwcmVwYWlkOwogICAgICAgYm9vbCBjbGFpbWVkOwogICAgICAgdWludCBiYWNrZXJSYW5rOwogICAgfQoKICAgIGFkZHJlc3NbXSBwdWJsaWMgZWFybHlCYWNrZXJMaXN0OyAvL2FkZHJlc3NlcyBvZiBlYXJsaWVzdCBiYWNrZXJzCiAgICBhZGRyZXNzW10gcHVibGljIGJhY2tlcnNBZGRyZXNzZXM7IC8vYWRkcmVzc2VzIG9mIGFsbCBiYWNrZXJzCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYmFja2VyRGF0YVtdKSBwdWJsaWMgYmFja2VyczsvLyBiYWNrZXIgYWRkcmVzcyB0byBiYWNrZXIgaW5mbyBtYXBwaW5nCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGJhY2tlcnNSZWRlZW1lZDsKCiAgICBzdHJ1Y3Qgd2l0aGRyYXdhbERhdGEgewogICAgICAgdWludCBBbW91bnQ7CiAgICAgICBib29sIGFwcHJvdmVkOwogICAgICAgYm9vbCBzcGVudDsKICAgICAgIGJ5dGVzIHJlYXNvbjsKICAgICAgIGFkZHJlc3NbXSBiYWNrZXJBcHByb3ZhbHM7CiAgICAgICB1aW50IHRvdGFsU3Rha2U7CiAgICAgICBhZGRyZXNzW10gZGVzdGluYXRpb247CiAgICB9CgogICAgd2l0aGRyYXdhbERhdGFbXSBwdWJsaWMgd2l0aGRyYXdhbHM7IC8vIERhdGEgc3RydWN0dXJlIHNwZWNpZnlpbmcgd2l0aGRyYXdhbAogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcodWludCA9PiBib29sKSkgcHVibGljIHdpdGhkcmF3YWxzVm90ZXM7CgogICAgLyoqCiAgICAqIEBub3RpY2UgRGVwbG95IFByb21pc3NvcnlUb2tlbiBjb250cmFjdCB3aXRoIGBtc2cuc2VuZGVyLmFkZHJlc3MoKWAgYXMgZm91bmRlciB3aXRoIGBfcHJlcGFpZEJhY2tlcnMubnVtYmVyKClgIHByZXBhaWQgYmFja2VycwogICAgKiBAZGV2IFRoaXMgaXMgdGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBwcm9taXNvcnkgdG9rZW4gY29udHJhY3QKICAgICogQHBhcmFtIF9mb3VuZGVySGFzaCBGb3VuZGVycyBwYXNzd29yZCBoYXNoLCBwcmVmZXJhYmxlIGEgbWVzc2FnZSBkaWdlc3QgdG8gZnVydGhlciBvYmZ1c2NhdGUgZHVwbGljYWlvbgogICAgKiBAcGFyYW0gX2NvZm91bmRlckFkZHJlc3MgVGhlIGhlbHBlciBjb2ZvdW5kZXIgdG8gYWlkIGZvdW5kZXIga2V5IGV4Y2hhbmdlIGluIGNhc2Ugb2Yga2V5IGxvc3MvCiAgICAqIEBwYXJhbSBfbnVtT2ZCYWNrZXJzIFRoZSBudW1iZXIgb2YgRWFybHkgYmFja2Vycy4gV2lsbCBiZSB1c2VkIHRvIGNvbnRyb2wgc2V0dGluZyBlYXJseSBiYWNrZXJzCiAgICAqLwogICAgZnVuY3Rpb24gUHJvbWlzc29yeVRva2VuKCBieXRlczMyIF9mb3VuZGVySGFzaCwgYWRkcmVzcyBfY29mb3VuZGVyQWRkcmVzcywgdWludCBfbnVtT2ZCYWNrZXJzKXsKICAgICAgICBmb3VuZGVyID0gbXNnLnNlbmRlcjsKICAgICAgICBmb3VuZGVySGFzaCA9IHNoYTMoX2ZvdW5kZXJIYXNoKTsKICAgICAgICBjb2ZvdW5kZXIgPSBfY29mb3VuZGVyQWRkcmVzczsKICAgICAgICBudW1PZkJhY2tlcnMgPSBfbnVtT2ZCYWNrZXJzOwogICAgfQoKICAgIC8qKgogICAgKiBAbm90aWNlIGBtc2cuc2VuZGVyLmFkZHJlc3MoKWAgdXBkYXRpbmcgY29mb3VuZGVyIGFkZHJlc3MgdG8gYF9uZXdGb3VuZGVyQWRkci5hZGRyZXNzKClgCiAgICAqIEBkZXYgYWxsb3dzIGNvZm91bmRlciB0byBzd2l0Y2ggb3V0IGFkZHJlcyBmb3IgYSBuZXcgb25lLkNhbiBiZSByZXBlYXRlZCBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZAogICAgKiBAcGFyYW0gX25ld0NvZm91bmRlckFkZHIgTmV3IEFkZHJlc3Mgb2YgQ29mb3VuZGVyCiAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgY29Gb3VuZGVyIGFkZHJlc3Mgc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQKICAgICovCiAgICBmdW5jdGlvbiBjb2ZvdW5kZXJTd2l0Y2hBZGRyZXNzKGFkZHJlc3MgX25ld0NvZm91bmRlckFkZHIpIGV4dGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gY29mb3VuZGVyKSB0aHJvdzsKCiAgICAgICAgY29mb3VuZGVyID0gX25ld0NvZm91bmRlckFkZHI7CiAgICAgICAgQ29mb3VuZGVyU3dpdGNoZWRFdmVudChfbmV3Q29mb3VuZGVyQWRkcik7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBAbm90aWNlIEZvdW5kZXIgYWRkcmVzcyB1cGRhdGUgdG8gYF9uZXdGb3VuZGVyQWRkci5hZGRyZXNzKClgIGlzIGJlaW5nIHJlcXVlc3RlZAogICAgKiBAZGV2IGZvdW5kZXJTd2l0Y2hBZGRyZXNzIGZvdW5kZXIgaW5kaWNhdGVzIGludGVudCB0byBzd2l0Y2ggYWRkcmVzc2VzIHdpdGggbmV3IGFkZHJlc3MsCiAgICAqIGhhc2ggb2YgcGFzcyBwaHJhc2UgYW5kIGEgIm9uZXRpbWUgc2hhcmVkIHBocmFzZSBzaGFyZWQgd2l0aCBjb3Vmb3VuZGVyIgogICAgKiBAcGFyYW0gX2ZvdW5kZXJIYXNoIFNlY3JldCBLZXkgdG8gYmUgdXNlZCB0byBjb25maXJtIEFkZHJlc3MgdXBkYXRlCiAgICAqIEBwYXJhbSBfb25lVGltZXNoYXJlZFBocmFzZSBTaGFyZWQgcHJlLWhhc2hlZCBTZWNyZXQga2V5IGZvciBvZmZsaW5lIHRydXN0IHRvIGJlIHNoYXJlZCB3aXRoIGNvRm91bmRlciB0byBhcHByb3ZlIEFkZHJlc3MgdXBkYXRlCiAgICAqIEByZXR1cm4gVHJ1ZSBpZiBBZGRyZXNzIHN3aXRjaCByZXF1ZXN0IHN1Y2Nlc3NmdWxseSBjcmVhdGVkIGFuZCBUZW1wb3JhcnkgaGFzaCBWYWx1ZXMgc2V0CiAgICAqLwogICAgZnVuY3Rpb24gZm91bmRlclN3aXRjaFJlcXVlc3QoYnl0ZXMzMiBfZm91bmRlckhhc2gsIGJ5dGVzMzIgX29uZVRpbWVzaGFyZWRQaHJhc2UpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgaWYoc2hhMyhfZm91bmRlckhhc2gpICE9IGZvdW5kZXJIYXNoKSB0aHJvdzsKCiAgICAgICAgdGVtcEhhc2hlc1ttc2cuc2VuZGVyXSA9IHNoYTMobXNnLnNlbmRlciwgZm91bmRlckhhc2gsIF9vbmVUaW1lc2hhcmVkUGhyYXNlKTsKICAgICAgICBGb3VuZGVyU3dpdGNoUmVxdWVzdEV2ZW50KG1zZy5zZW5kZXIpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgIC8qKgogICAgKiBAbm90aWNlIGBtc2cuc2VuZGVyLmFkZHJlc3MoKWAgYXBwcm92aW5nIGBfbmV3Rm91bmRlckFkZHIuYWRkcmVzcygpYCBhcyBuZXcgZm91bmRlciBhZGRyZXNzCiAgICAqIEBkZXYgQ29mb3VuZGVyU3dpdGNoQWRkcmVzcyB3aGljaCBhbGxvd3MgcHJldmlvdXNseSBzZXQgY29mb3VuZGVyIHRvIGFwcHJvdmUgYWRkcmVzcwogICAgKiBzd2l0Y2ggYnkgZm91bmRlci4gTXVzdCBoYXZlIGEgb25lIHRpbWUgc2hhcmVkIHBocmFzZSB0aGF0cyBpcyBzaGFyZWQgd2l0aCBmb3VuZGVyIHRoYXQgY29ycmVzcG9uZGluZyB3aXRoIGEKICAgICogaGFzaGVkIHZhbHVlLgogICAgKiBAcGFyYW0gX25ld0ZvdW5kZXJBZGRyIFRoZSBhZGRyZXNzIG9mIEZvdW5kZXIgdG8gYmUgbmV3bHkgc2V0CiAgICAqIEBwYXJhbSBfb25lVGltZXNoYXJlZFBocmFzZSBTaGFyZWQgcHJlLWhhc2hlZCBTZWNyZXQga2V5IGZvciBvZmZsaW5lIHRydXN0LCB0byBwcm92aWRlIGFjY2VzcyB0byB0aGUgYXBwcm92YWwgZnVuY3Rpb24KICAgICogQHJldHVybiBUcnVlIGlmIG5ldyBGb3VuZGVyIGFkZHJlc3Mgc3VjY2Vzc2Z1bGx5IGFwcHJvdmVkCiAgICAqLwogICAgZnVuY3Rpb24gY29mb3VuZGVyQXBwcm92ZVN3aXRjaFJlcXVlc3QoYWRkcmVzcyBfbmV3Rm91bmRlckFkZHIsIGJ5dGVzMzIgX29uZVRpbWVzaGFyZWRQaHJhc2UpIGV4dGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgaWYobXNnLnNlbmRlciAhPSBjb2ZvdW5kZXIgfHwgc2hhMyhfbmV3Rm91bmRlckFkZHIsIGZvdW5kZXJIYXNoLCBfb25lVGltZXNoYXJlZFBocmFzZSkgIT0gdGVtcEhhc2hlc1tfbmV3Rm91bmRlckFkZHJdKSB0aHJvdzsKCiAgICAgICAgcHJldmlvdXNGb3VuZGVycy5wdXNoKGZvdW5kZXIpOwogICAgICAgIGZvdW5kZXIgPSBfbmV3Rm91bmRlckFkZHI7CiAgICAgICAgRm91bmRlclN3aXRjaGVkRXZlbnQoX25ld0ZvdW5kZXJBZGRyKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAqIEBub3RpY2UgQWRkaW5nIGBfYmFja2VyLmFkZHJlc3MoKWAgYXMgYW4gZWFybHkgYmFja2VyCiAgICAqIEBkZXYgQWRkIEVhcmx5IGJhY2tlcnMgdG8gQ29udHJhY3Qgc2V0dGluZyB0aGUgdHJhbnNhY3RvbiBkZXRhaWxzCiAgICAqIEBwYXJhbSBfYmFja2VyIFRoZSBhZGRyZXNzIG9mIHRoZSBzdXBlckRBTyBiYWNrZXIKICAgICogQHBhcmFtIF90b2tlblByaWNlIFRoZSBwcmljZS9yYXRlIGF0IHdoaWNoIHRoZSBzdXBlckRBTyB0b2tlbnMgd2VyZSBib3VnaHQKICAgICogQHBhcmFtIF90b2tlbkFtb3VudCBUaGUgdG90YWwgbnVtYmVyIG9mIHN1cGVyREFPIHRva2VuIHB1cmNnYXNlZCBhdCB0aGUgaW5kaWNhdGVkIHJhdGUKICAgICogQHBhcmFtIF9wcml2YXRlUGhyYXNlIFNoYXJlZCBwcmUtaGFzaGVkIFNlY3JldCBrZXkgZm9yIG9mZmxpbmUgcHJpY2UgbmVnb3RpYXRpb24gdG8gb25saW5lIGF0dGVzdGF0aW9uIG9mIFN1cGVyREFPIHRva2VucyBvd25lcnNoaXAKICAgICogQHBhcmFtIF9iYWNrZXJSYW5rIFJhbmsgb2YgdGhlIGJhY2tlciBpbiB0aGUgYmFja2VycyBsaXN0CiAgICAqIEByZXR1cm4gVGhyZSBpbmRleCBvZiBfYmFja2VyICBpbiB0aGUgYmFja2VycyBsaXN0CiAgICAqLwogICAgZnVuY3Rpb24gc2V0UHJlcGFpZChhZGRyZXNzIF9iYWNrZXIsIHVpbnQgX3Rva2VuUHJpY2UsIHVpbnQgX3Rva2VuQW1vdW50LCBzdHJpbmcgX3ByaXZhdGVQaHJhc2UsIHVpbnQgX2JhY2tlclJhbmspCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBmb3VuZGVyQ2FsbAogICAgICAgIHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgaWYgKF90b2tlblByaWNlID09IDAgfHwgX3Rva2VuQW1vdW50ID09IDAgfHwgY2xhaW1lZFByZXBhaWRVbml0cz4wIHx8CiAgICAgICAgICAgIF90b2tlbkFtb3VudCArIHByZXBhaWRVbml0cyArIGNsYWltZWRVbml0cyA+IHByb21pc3NvcnlVbml0cykgdGhyb3c7CiAgICAgICAgaWYgKGVhcmx5QmFja2VyTGlzdC5sZW5ndGggPT0gbnVtT2ZCYWNrZXJzICYmIGJhY2tlcnNbX2JhY2tlcl0ubGVuZ3RoID09IDApIHRocm93IDsKICAgICAgICBpZiAoYmFja2Vyc1tfYmFja2VyXS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICBlYXJseUJhY2tlckxpc3QucHVzaChfYmFja2VyKTsKICAgICAgICAgICAgYmFja2Vyc0FkZHJlc3Nlcy5wdXNoKF9iYWNrZXIpOwogICAgICAgIH0KICAgICAgICBiYWNrZXJzW19iYWNrZXJdLnB1c2goYmFja2VyRGF0YShfdG9rZW5QcmljZSwgX3Rva2VuQW1vdW50LCBzaGEzKF9wcml2YXRlUGhyYXNlLCBfYmFja2VyKSwgdHJ1ZSwgZmFsc2UsIF9iYWNrZXJSYW5rKSk7CgogICAgICAgIHByZXBhaWRVbml0cyArPV90b2tlbkFtb3VudDsKICAgICAgICBsYXN0UHJpY2UgPSBfdG9rZW5QcmljZTsKCiAgICAgICAgQWRkZWRQcmVwYWlkVG9rZW5zRXZlbnQoX2JhY2tlciwgYmFja2Vyc1tfYmFja2VyXS5sZW5ndGggLSAxLCBfdG9rZW5QcmljZSwgX3Rva2VuQW1vdW50KTsKCiAgICAgICAgcmV0dXJuIGJhY2tlcnNbX2JhY2tlcl0ubGVuZ3RoIC0gMTsKICAgIH0KCiAgICAvKioKICAgICogQG5vdGljZSBDbGFpbWluZyBgX3Rva2VuQW1vdW50Lm51bWJlcigpYCBzdXBlckRBTyB0b2tlbnMgYnkgYG1zZy5zZW5kZXIuYWRkcmVzcygpYAogICAgKiBAZGV2IENsYWltIHN1cGVyREFPIEVhcmx5IGJhY2tlciB0b2tlbnMKICAgICogQHBhcmFtIF9pbmRleCBpbmRleCBvZiB0b2tlbnMgdG8gY2xhaW0KICAgICogQHBhcmFtIF9ib3VnaHRUb2tlbnNQcmljZSBQcmljZSBhdCB3aGljaCB0aGUgc3VwZXJEQU8gdG9rZW5zIHdlcmUgYm91Z2h0CiAgICAqIEBwYXJhbSBfdG9rZW5BbW91bnQgTnVtYmVyIG9mIHN1cGVyREFPIHRva2VucyB0byBiZSBjbGFpbWVkCiAgICAqIEBwYXJhbSBfcHJpdmF0ZVBocmFzZSBTaGFyZWQgcHJlLWhhc2hlZCBTZWNyZXQga2V5IGZvciBvZmZsaW5lIHByaWNlIG5lZ290aWF0aW9uIHRvIG9ubGluZSBhdHRlc3RhdGlvbiBvZiBTdXBlckRBTyB0b2tlbnMgb3duZXJzaGlwCiAgICAqIEBwYXJhbSBfYmFja2VyUmFuayBCYWNrZXIgcmFuayBvZiB0aGUgYmFja2VyIGluIHRoZSBzdXBlckRBTwogICAgKi8KICAgIGZ1bmN0aW9uIGNsYWltUHJlcGFpZCh1aW50IF9pbmRleCwgdWludCBfYm91Z2h0VG9rZW5zUHJpY2UsIHVpbnQgX3Rva2VuQW1vdW50LCBzdHJpbmcgX3ByaXZhdGVQaHJhc2UsIHVpbnQgX2JhY2tlclJhbmspCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBFYXJsaWVzdEJhY2tlcnNTZXQKICAgIHsKICAgICAgICBpZihiYWNrZXJzW21zZy5zZW5kZXJdW19pbmRleF0ucHJlcGFpZCA9PSB0cnVlICYmCiAgICAgICAgICAgYmFja2Vyc1ttc2cuc2VuZGVyXVtfaW5kZXhdLmNsYWltZWQgPT0gZmFsc2UgJiYKICAgICAgICAgICBiYWNrZXJzW21zZy5zZW5kZXJdW19pbmRleF0udG9rZW5BbW91bnQgPT0gX3Rva2VuQW1vdW50ICYmCiAgICAgICAgICAgYmFja2Vyc1ttc2cuc2VuZGVyXVtfaW5kZXhdLnRva2VuUHJpY2UgPT0gX2JvdWdodFRva2Vuc1ByaWNlICYmCiAgICAgICAgICAgYmFja2Vyc1ttc2cuc2VuZGVyXVtfaW5kZXhdLnByaXZhdGVIYXNoID09IHNoYTMoIF9wcml2YXRlUGhyYXNlLCBtc2cuc2VuZGVyKSAmJgogICAgICAgICAgIGJhY2tlcnNbbXNnLnNlbmRlcl1bX2luZGV4XS5iYWNrZXJSYW5rID09IF9iYWNrZXJSYW5rKQogICAgICAgIHsKICAgICAgICAgICAgYmFja2Vyc1ttc2cuc2VuZGVyXVtfaW5kZXhdLmNsYWltZWQgPSB0cnVlOwogICAgICAgICAgICBjbGFpbWVkUHJlcGFpZFVuaXRzICs9IF90b2tlbkFtb3VudDsKCiAgICAgICAgICAgIFByZXBhaWRUb2tlbnNDbGFpbWVkRXZlbnQobXNnLnNlbmRlciwgX2luZGV4LCBfYm91Z2h0VG9rZW5zUHJpY2UsIF90b2tlbkFtb3VudCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBAbm90aWNlIGBtc2cuc2VuZGVyLmFkZHJlc3MoKWAgaXMgUHVyY2hhc2luZyBgKG1zZy52YWx1ZSAvIGxhc3RQcmljZSkudG9GaXhlZCgwKWAgc3VwZXJEQU8gVG9rZW5zIGF0IGBsYXN0UHJpY2VgCiAgICAqIEBkZXYgUHVyY2hhc2UgbmV3IHN1cGVyREFPIFRva2VucyBpZiB0aGUgYW1vdW50IG9mIHRva2VucyBhcmUgc3RpbGwgYXZhaWxhYmxlIGZvciBwdXJjaGFzZQogICAgKi8KICAgIGZ1bmN0aW9uIGNsYWltKCkKICAgICAgICBwYXlhYmxlCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBNaW5pbXVtQmFja2Vyc0NsYWltZWQKICAgewogICAgICAgIGlmIChsYXN0UHJpY2UgPT0gMCkgdGhyb3c7CgogICAgICAgIC8vZG9uYHQgYWNjZXB0IHRyYW5zYWN0aW9ucyB3aXRoIHplcm8gdmFsdWUKICAgICAgICBpZiAobXNnLnZhbHVlID09IDApIHRocm93OwoKCiAgICAgICAgLy9FZmZlY3RpdmUgZGlzY291bnQgZm9yIFByZS1jcm93ZGZ1bmRpbmcgYmFja2VycyBvZiA0MCUgTGVhdmluZyBlZmZlY3RpdmUgcmF0ZSBvZiA2MCUKICAgICAgICB1aW50IGRpc2NvdW50UHJpY2UgPSBsYXN0UHJpY2UgKiBkaXNjb3VudEFtb3VudCAvIGRpdmlzb3I7CgogICAgICAgIHVpbnQgdG9rZW5BbW91bnQgPSAobXNnLnZhbHVlIC8gZGlzY291bnRQcmljZSk7Ly9FZmZlY3QgdGhlIGRpc2NvdW50IHJhdGUgMGYgNDAlCgogICAgICAgIGlmICh0b2tlbkFtb3VudCArIGNsYWltZWRVbml0cyArIHByZXBhaWRVbml0cyA+IHByb21pc3NvcnlVbml0cykgdGhyb3c7CgogICAgICAgIGlmIChiYWNrZXJzW21zZy5zZW5kZXJdLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIGJhY2tlcnNBZGRyZXNzZXMucHVzaChtc2cuc2VuZGVyKTsKICAgICAgICB9CiAgICAgICAgYmFja2Vyc1ttc2cuc2VuZGVyXS5wdXNoKGJhY2tlckRhdGEoZGlzY291bnRQcmljZSwgdG9rZW5BbW91bnQsIHNoYTMobXNnLnNlbmRlciksIGZhbHNlLCB0cnVlLCAwKSk7CgogICAgICAgIGNsYWltZWRVbml0cyArPSB0b2tlbkFtb3VudDsKCiAgICAgICAgVG9rZW5zQ2xhaW1lZEV2ZW50KG1zZy5zZW5kZXIsIGJhY2tlcnNbbXNnLnNlbmRlcl0ubGVuZ3RoIC0gMSwgZGlzY291bnRQcmljZSwgdG9rZW5BbW91bnQpOwogICAgfQoKICAgIC8qKgogICAgICogQG5vdGljZSBjaGVja2luZyBgX2JhY2tlckFkZHJlc3MuYWRkcmVzcygpYCBzdXBlckRBTyBUb2tlbiBiYWxhbmNlOiBgaW5kZXhgCiAgICAgKiBAZGV2IENoZWNrIFRva2VuIGJhbGFuY2UgYnkgaW5kZXggb2YgYmFja2VyLCByZXR1cm4gdmFsdWVzIGNhbiBiZSB1c2VkIHRvIGluc3RhbnRpYXRlIGEgYmFja2VyRGF0YSBzdHJ1Y3QKICAgICAqIEBwYXJhbSBfYmFja2VyQWRkcmVzcyBUaGUgQmFja2VyJ3MgYWRkcmVzcwogICAgICogQHBhcmFtIGluZGV4IFRoZSBiYWxhbmNlIHRvIGNoZWNrCiAgICAgKiBAcmV0dXJuIHRva2VuUHJpY2UgVGhlIFByaWNlIGF0IHdoaWNoIHRoZSB0b2tlbnMgd2VyZSBib3VnaHQKICAgICAqIEByZXR1cm4gdG9rZW5BbW91bnQgVGhlIG51bWJlciBvZiB0b2tlbnMgdGhhdCB3ZXJlIGJvdWdodAogICAgICogQHJldHVybiBTaGFyZWQgcHJlLWhhc2hlZCBTZWNyZXQga2V5IGZvciBvZmZsaW5lIHByaWNlIG5lZ290aWF0aW9uIAogICAgICogQHJldHVybiBwcmVwYWlkIFRydWUgaWYgYmFja2VyIGlzIGFuIGVhcmx5IGJhY2tlcgogICAgICogQHJldHVybiBjbGFpbWVkIFRydWUgaWYgdGhlIFRva2VuIGhhcyBhbHJlYWR5IGJlZW4gY2xhaW1lZCBieSB0aGUgYmFja2VyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNoZWNrQmFsYW5jZShhZGRyZXNzIF9iYWNrZXJBZGRyZXNzLCB1aW50IGluZGV4KSBjb25zdGFudCByZXR1cm5zICh1aW50LCB1aW50LCBieXRlczMyLCBib29sLCBib29sKXsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBiYWNrZXJzW19iYWNrZXJBZGRyZXNzXVtpbmRleF0udG9rZW5QcmljZSwKICAgICAgICAgICAgYmFja2Vyc1tfYmFja2VyQWRkcmVzc11baW5kZXhdLnRva2VuQW1vdW50LAogICAgICAgICAgICBiYWNrZXJzW19iYWNrZXJBZGRyZXNzXVtpbmRleF0ucHJpdmF0ZUhhc2gsCiAgICAgICAgICAgIGJhY2tlcnNbX2JhY2tlckFkZHJlc3NdW2luZGV4XS5wcmVwYWlkLAogICAgICAgICAgICBiYWNrZXJzW19iYWNrZXJBZGRyZXNzXVtpbmRleF0uY2xhaW1lZAogICAgICAgICAgICApOwogICAgfQoKICAgIC8qKgogICAgKiBAbm90aWNlIEFwcHJvdmluZyB3aXRoZHJhd2FsIGBfd2l0aGRyYXdhbElEYAogICAgKiBAZGV2IEFwcHJvdmUgYSB3aXRoZHJhd2FsIGZyb20gdGhlIHN1cGVyREFPIGFuZCBtYXJrIHRoZSB3aXRoZHJhd2FsIGFzIHNwZW50CiAgICAqIEBwYXJhbSBfd2l0aGRyYXdhbElEIFRoZSBJRCBvZiB0aGUgd2l0aGRyYXdhbAogICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmVXaXRoZHJhdyh1aW50IF93aXRoZHJhd2FsSUQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBiYWNrZXJDaGVjayhfd2l0aGRyYXdhbElEKQogICAgewogICAgICAgIHdpdGhkcmF3YWxzVm90ZXNbbXNnLnNlbmRlcl1bX3dpdGhkcmF3YWxJRF0gPSB0cnVlOwoKICAgICAgICB1aW50IGJhY2tlclN0YWtlID0gMDsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBiYWNrZXJzW21zZy5zZW5kZXJdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGJhY2tlclN0YWtlICs9IGJhY2tlcnNbbXNnLnNlbmRlcl1baV0udG9rZW5BbW91bnQ7CiAgICAgICAgfQogICAgICAgIHdpdGhkcmF3YWxzW193aXRoZHJhd2FsSURdLmJhY2tlckFwcHJvdmFscy5wdXNoKG1zZy5zZW5kZXIpOwogICAgICAgIHdpdGhkcmF3YWxzW193aXRoZHJhd2FsSURdLnRvdGFsU3Rha2UgKz0gYmFja2VyU3Rha2U7CgogICAgICAgIFdpdGhkcmF3YWxWb3RlZEV2ZW50KF93aXRoZHJhd2FsSUQsIG1zZy5zZW5kZXIsIGJhY2tlclN0YWtlLCB3aXRoZHJhd2Fsc1tfd2l0aGRyYXdhbElEXS50b3RhbFN0YWtlKTsKCiAgICAgICAgaWYod2l0aGRyYXdhbHNbX3dpdGhkcmF3YWxJRF0udG90YWxTdGFrZSA+PSAoY2xhaW1lZFByZXBhaWRVbml0cyArIGNsYWltZWRVbml0cykgLyAzKSB7CiAgICAgICAgICAgIHVpbnQgYW1vdW50UGVyQWRkcjsKICAgICAgICAgICAgYm9vbCBpc011bHRpUGF5bWVudCA9IHdpdGhkcmF3YWxzW193aXRoZHJhd2FsSURdLmRlc3RpbmF0aW9uLmxlbmd0aCA+IDE7CgogICAgICAgICAgICBpZihpc011bHRpUGF5bWVudCA9PSBmYWxzZSl7CiAgICAgICAgICAgICAgICBhbW91bnRQZXJBZGRyID0gd2l0aGRyYXdhbHNbX3dpdGhkcmF3YWxJRF0uQW1vdW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgYW1vdW50UGVyQWRkciA9IHdpdGhkcmF3YWxzW193aXRoZHJhd2FsSURdLkFtb3VudCAvIHdpdGhkcmF3YWxzW193aXRoZHJhd2FsSURdLmRlc3RpbmF0aW9uLmxlbmd0aDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd2l0aGRyYXdhbHNbX3dpdGhkcmF3YWxJRF0uYXBwcm92ZWQgPSB0cnVlOwogICAgICAgICAgICB3aXRoZHJhd2Fsc1tfd2l0aGRyYXdhbElEXS5zcGVudCA9IHRydWU7CgogICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCB3aXRoZHJhd2Fsc1tfd2l0aGRyYXdhbElEXS5kZXN0aW5hdGlvbi5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICBpZighd2l0aGRyYXdhbHNbX3dpdGhkcmF3YWxJRF0uZGVzdGluYXRpb25baV0uc2VuZChhbW91bnRQZXJBZGRyKSkgdGhyb3c7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFdpdGhkcmF3YWxBcHByb3ZlZChfd2l0aGRyYXdhbElELAogICAgICAgICAgICAgICAgd2l0aGRyYXdhbHNbX3dpdGhkcmF3YWxJRF0udG90YWxTdGFrZSwKICAgICAgICAgICAgICAgIGlzTXVsdGlQYXltZW50LAogICAgICAgICAgICAgICAgd2l0aGRyYXdhbHNbX3dpdGhkcmF3YWxJRF0uQW1vdW50LAogICAgICAgICAgICAgICAgd2l0aGRyYXdhbHNbX3dpdGhkcmF3YWxJRF0ucmVhc29uKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAqIEBub3RpY2UgUmVxdWVzdG5nIHdpdGhkcmF3YWwgb2YgYF90b3RhbEFtb3VudGAgdG8gYF9kZXN0aW5hdGlvbi5hZGRyZXNzKClgCiAgICAqIEBkZXYgQ3JlYXRlIGEgbmV3IHdpdGhkcmF3YWwgcmVxdWVzdAogICAgKiBAcGFyYW0gX3RvdGFsQW1vdW50IFRoZSB0b3RhbCBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHdpdGhkcmF3YW4sIHNob3VsZCBiZSBlcXVhbCB0byB0aGUgdG90YWwgbnVtYmVyIG9mIG93bmVkIHRva2VucwogICAgKiBAcGFyYW0gX3JlYXNvbiBSZWFzb24vRGVzY3JpcHRpb24gZm9yIHRoZSB3aXRoZHJhd2FsCiAgICAqIEBwYXJhbSBfZGVzdGluYXRpb24gVGhlIHJlY2VpdmluZyBhZGRyZXNzCiAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXcodWludCBfdG90YWxBbW91bnQsIGJ5dGVzIF9yZWFzb24sIGFkZHJlc3NbXSBfZGVzdGluYXRpb24pCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBmb3VuZGVyQ2FsbAogICAgewogICAgICAgIGlmICh0aGlzLmJhbGFuY2UgPCBfdG90YWxBbW91bnQpIHRocm93OwoKICAgICAgICB1aW50IHdpdGhkcmF3YWxJRCA9IHdpdGhkcmF3YWxzLmxlbmd0aCsrOwoKICAgICAgICB3aXRoZHJhd2Fsc1t3aXRoZHJhd2FsSURdLkFtb3VudCA9IF90b3RhbEFtb3VudDsKICAgICAgICB3aXRoZHJhd2Fsc1t3aXRoZHJhd2FsSURdLnJlYXNvbiA9IF9yZWFzb247CiAgICAgICAgd2l0aGRyYXdhbHNbd2l0aGRyYXdhbElEXS5kZXN0aW5hdGlvbiA9IF9kZXN0aW5hdGlvbjsKICAgICAgICB3aXRoZHJhd2Fsc1t3aXRoZHJhd2FsSURdLmFwcHJvdmVkID0gZmFsc2U7CiAgICAgICAgd2l0aGRyYXdhbHNbd2l0aGRyYXdhbElEXS5zcGVudCA9IGZhbHNlOwoKICAgICAgICBXaXRoZHJhd2FsQ3JlYXRlZEV2ZW50KHdpdGhkcmF3YWxJRCwgX3RvdGFsQW1vdW50LCBfcmVhc29uKTsKICAgIH0KCiAgICAvKioKICAgICogQG5vdGljZSBCYWNrZXIgYF9iYWNoZXJBZGRyLmFkZHJlc3MoKWAgaXMgcmVkZWVtaW5nIGBfYW1vdW50YCBzdXBlckRBTyBUb2tlbnMKICAgICogQGRldiBDaGVjayBpZiBiYWNrZXIgdG9rZW5zIGhhdmUgYmVlbiBjbGFpbWVkIGJ1dCBub3QgcmVkZWVtZWQsIHRoZW4gcmVkZWVtIHRoZW0KICAgICogQHBhcmFtIF9hbW91bnQgVGhlIHRvdGFsIG51bWJlciBvZiByZWRlZW1hYmxlIHRva2VucwogICAgKiBAcGFyYW0gX2JhY2tlckFkZHIgVGhlIGFkZHJlc3Mgb2YgdGhlIGJhY2tlcgogICAgKiBAcmV0dXJuIFRydWUgaWYgdG9rZW5zIHdlcmUgc3VjY2Vzc2Z1bGx5IHJlZGVlbWVkIGVsc2UgZmFsc2UKICAgICovCiAgICBmdW5jdGlvbiByZWRlZW0odWludCBfYW1vdW50LCBhZGRyZXNzIF9iYWNrZXJBZGRyKSByZXR1cm5zKGJvb2wpewogICAgICAgIGlmIChiYWNrZXJzUmVkZWVtZWRbX2JhY2tlckFkZHJdID09IHRydWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdWludCB0b3RhbFRva2VucyA9IDA7CgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGJhY2tlcnNbX2JhY2tlckFkZHJdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChiYWNrZXJzW19iYWNrZXJBZGRyXVtpXS5jbGFpbWVkID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdG90YWxUb2tlbnMgKz0gYmFja2Vyc1tfYmFja2VyQWRkcl1baV0udG9rZW5BbW91bnQ7CiAgICAgICAgfQoKICAgICAgICBpZiAodG90YWxUb2tlbnMgPT0gX2Ftb3VudCl7CiAgICAgICAgICAgIGJhY2tlcnNSZWRlZW1lZFtfYmFja2VyQWRkcl0gPSB0cnVlOwoKICAgICAgICAgICAgUmVkZWVtRXZlbnQoX2JhY2tlckFkZHIsIHRvdGFsVG9rZW5zKTsKCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogQG5vdGljZSBjaGVjayB3aXRoZHJhd2FsIHN0YXR1cyBvZiBgX3dpdGhkcmF3YWxJRGAKICAgICogQGRldiBHZXQgdGhlIHdpdGhkcmF3YWwgb2YgYSB3aXRoZHJhd2FsLiBSZXR1cm4gdmFsdWVzIGNhbiBiZSB1c2VkIHRvIGluc3RhbnRpYXRlIGEgd2l0aGRyYXdhbERhdGEgc3RydWN0CiAgICAqIEBwYXJhbSBfd2l0aGRyYXdhbElEIFRoZSBJRCBvZiB0aGUgd2l0aGRyYXdhbAogICAgKiBAcmV0dXJuIEFtb3VudCBUaGUgQW1vdW50IHJlcXVlc3RlZCBpbiB0aGUgd2l0aGRyYXdhbAogICAgKiBAcmV0dXJuIGFwcHJvdmVkIFRydWUgaWYgdGhlIHdpdGhkcmF3YWwgaGFzIGJlZW4gYXBwcm92ZWQKICAgICogQHJldHVybiByZWFzb24gUmVhc29uL0Rlc2NyaXB0aW9uIG9mIHRoZSBXaXRoZHJhd2FsCiAgICAqIEByZXR1cm4gYmFja2VyQXBwcm92YWxzIEFkZHJlc3NlcyBvZiBiYWNrZXJzIHdobyBhcHByb3ZlZCB0aGUgd2l0aGRyYXdhbAogICAgKiBAcmV0dXJuIHRvdGFsU3Rha2UgVG90YWwgbnVtYmVyIG9mIHRva2VucyB3aGljaCBiYWNrZWQgdGhlIHdpdGhkcmF3YWwoVG90YWwgbnVtYmVyIG9mIHRva2VucyBvd25lZCBieSBiYWNrZXJzIHdobyBhcHByb3ZlZCB0aGUgd2l0aGRyYXdhbCkKICAgICogQHJldHVybiBkZXN0aW5hdGlvbiBSZWNlaXZpbmcgYWRkcmVzcyBvZiB0aGUgd2l0aGRyYXdhbAogICAgKi8KICAgIGZ1bmN0aW9uIGdldFdpdGhkcmF3YWxEYXRhKHVpbnQgX3dpdGhkcmF3YWxJRCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQsIGJvb2wsIGJ5dGVzLCBhZGRyZXNzW10sIHVpbnQsIGFkZHJlc3NbXSl7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgd2l0aGRyYXdhbHNbX3dpdGhkcmF3YWxJRF0uQW1vdW50LAogICAgICAgICAgICB3aXRoZHJhd2Fsc1tfd2l0aGRyYXdhbElEXS5hcHByb3ZlZCwKICAgICAgICAgICAgd2l0aGRyYXdhbHNbX3dpdGhkcmF3YWxJRF0ucmVhc29uLAogICAgICAgICAgICB3aXRoZHJhd2Fsc1tfd2l0aGRyYXdhbElEXS5iYWNrZXJBcHByb3ZhbHMsCiAgICAgICAgICAgIHdpdGhkcmF3YWxzW193aXRoZHJhd2FsSURdLnRvdGFsU3Rha2UsCiAgICAgICAgICAgIHdpdGhkcmF3YWxzW193aXRoZHJhd2FsSURdLmRlc3RpbmF0aW9uKTsKICAgIH0KCiAgICBtb2RpZmllciBmb3VuZGVyQ2FsbHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBmb3VuZGVyKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGJhY2tlckNoZWNrKHVpbnQgX3dpdGhkcmF3YWxJRCl7CiAgICAgICAgaWYoYmFja2Vyc1ttc2cuc2VuZGVyXS5sZW5ndGggPT0gMCB8fCB3aXRoZHJhd2Fsc1tfd2l0aGRyYXdhbElEXS5zcGVudCA9PSB0cnVlIHx8IHdpdGhkcmF3YWxzVm90ZXNbbXNnLnNlbmRlcl1bX3dpdGhkcmF3YWxJRF0gPT0gdHJ1ZSkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBFYXJsaWVzdEJhY2tlcnNTZXR7CiAgICAgICBpZihlYXJseUJhY2tlckxpc3QubGVuZ3RoIDwgbnVtT2ZCYWNrZXJzKSB0aHJvdzsKICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgTWluaW11bUJhY2tlcnNDbGFpbWVkKCl7CiAgICAgIGlmKHByZXBhaWRVbml0cyA9PSAwIHx8CiAgICAgICAgY2xhaW1lZFByZXBhaWRVbml0cyA9PSAwIHx8CiAgICAgICAgKGNsYWltZWRQcmVwYWlkVW5pdHMgKiBkaXZpc29yIC8gcHJlcGFpZFVuaXRzKSA8IG1pbmltdW1QcmVwYWlkQ2xhaW1lZFBlcmNlbnQpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICBfOwogICAgfQoKICAgIC8qCiAgICAgKiBTYWZlZ3VhcmQgZnVuY3Rpb24uCiAgICAgKiBUaGlzIGZ1bmN0aW9uIGdldHMgZXhlY3V0ZWQgaWYgYSB0cmFuc2FjdGlvbiB3aXRoIGludmFsaWQgZGF0YSBpcyBzZW50IHRvCiAgICAgKiB0aGUgY29udHJhY3Qgb3IganVzdCBldGhlciB3aXRob3V0IGRhdGEuCiAgICAgKi8KICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdzsKICAgIH0KCn0='.
	

]
