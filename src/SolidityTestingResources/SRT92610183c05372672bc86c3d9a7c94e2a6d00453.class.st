Class {
	#name : #SRT92610183c05372672bc86c3d9a7c94e2a6d00453,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT92610183c05372672bc86c3d9a7c94e2a6d00453 >> base64 [
	^ 'Ly9GaWxlOiBjb250cmFjdHMvY29tbW9uL0NvbnRyb2xsZWQuc29sCnByYWdtYSBzb2xpZGl0eSBeMC40LjIxOwoKY29udHJhY3QgQ29udHJvbGxlZCB7CiAgICBtb2RpZmllciBvbmx5Q29udHJvbGxlciB7IHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cm9sbGVyKTsgXzsgfQoKICAgIGFkZHJlc3MgcHVibGljIGNvbnRyb2xsZXI7CgogICAgZnVuY3Rpb24gQ29udHJvbGxlZCgpIHB1YmxpYyB7IGNvbnRyb2xsZXIgPSBtc2cuc2VuZGVyO30KCiAgICBmdW5jdGlvbiBjaGFuZ2VDb250cm9sbGVyKGFkZHJlc3MgX25ld0NvbnRyb2xsZXIpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICAgICAgY29udHJvbGxlciA9IF9uZXdDb250cm9sbGVyOwogICAgfQp9CgovL0ZpbGU6IGNvbnRyYWN0cy9jb21tb24vVG9rZW5Db250cm9sbGVyLnNvbApwcmFnbWEgc29saWRpdHkgXjAuNC4yMTsKCmNvbnRyYWN0IFRva2VuQ29udHJvbGxlciB7CiAgICBmdW5jdGlvbiBwcm94eVBheW1lbnQoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMoYm9vbCk7CgogICAgZnVuY3Rpb24gb25UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyhib29sKTsKCiAgICBmdW5jdGlvbiBvbkFwcHJvdmUoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2Ftb3VudCkgcHVibGljIHJldHVybnMoYm9vbCk7Cn0KCi8vRmlsZTogY29udHJhY3RzL2NvbW1vbi9BcHByb3ZlQW5kQ2FsbEZhbGxCYWNrLnNvbApwcmFnbWEgc29saWRpdHkgXjAuNC4yMTsKCmNvbnRyYWN0IEFwcHJvdmVBbmRDYWxsRmFsbEJhY2sgewogICAgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgZnJvbSwgdWludDI1NiBfYW1vdW50LCBhZGRyZXNzIF90b2tlbiwgYnl0ZXMgX2RhdGEpIHB1YmxpYzsKfQoKLy9GaWxlOiBjb250cmFjdHMvVG9rZW4uc29sCnByYWdtYSBzb2xpZGl0eSBeMC40LjIxOwoKCgoKCgpjb250cmFjdCBUb2tlbiBpcyBDb250cm9sbGVkIHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiU2hpbmVDb2luIjsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDk7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJTSElORSI7CgogICAgc3RydWN0ICBDaGVja3BvaW50IHsKICAgICAgICB1aW50MTI4IGZyb21CbG9jazsKICAgICAgICB1aW50MTI4IHZhbHVlOwogICAgfQoKICAgIHVpbnQgcHVibGljIGNyZWF0aW9uQmxvY2s7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBDaGVja3BvaW50W10pIGJhbGFuY2VzOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICBDaGVja3BvaW50W10gdG90YWxTdXBwbHlIaXN0b3J5OwoKICAgIGJvb2wgcHVibGljIHRyYW5zZmVyc0VuYWJsZWQgPSB0cnVlOwoKICAgIGFkZHJlc3MgcHVibGljIGZyb3plblJlc2VydmVUZWFtV2FsbGV0OwoKICAgIHVpbnQgcHVibGljIHVuZnJlZXplVGVhbVdhbGxldEJsb2NrOwoKICAgIGZ1bmN0aW9uIFRva2VuKGFkZHJlc3MgX2Zyb3plblJlc2VydmVUZWFtV2FsbGV0KSBwdWJsaWMgewogICAgICAgIGNyZWF0aW9uQmxvY2sgPSBibG9jay5udW1iZXI7CiAgICAgICAgZnJvemVuUmVzZXJ2ZVRlYW1XYWxsZXQgPSBfZnJvemVuUmVzZXJ2ZVRlYW1XYWxsZXQ7CiAgICAgICAgdW5mcmVlemVUZWFtV2FsbGV0QmxvY2sgPSBibG9jay5udW1iZXIgKyAoKDM2NSAqIDI0ICogMzYwMCkgLyAxNSk7IC8vIH4gMzk2IGRheXMKICAgIH0KCgovLy8vLy8vLy8vLy8vLy8vLy8vCi8vIEVSQzIwIE1ldGhvZHMKLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKHRyYW5zZmVyc0VuYWJsZWQpOwoKICAgICAgICBpZiAoYWRkcmVzcyhtc2cuc2VuZGVyKSA9PSBmcm96ZW5SZXNlcnZlVGVhbVdhbGxldCkgewogICAgICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+IHVuZnJlZXplVGVhbVdhbGxldEJsb2NrKTsKICAgICAgICB9CgogICAgICAgIGRvVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNvbnRyb2xsZXIpIHsKICAgICAgICAgICAgcmVxdWlyZSh0cmFuc2ZlcnNFbmFibGVkKTsKCiAgICAgICAgICAgIHJlcXVpcmUoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCk7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7CiAgICAgICAgfQogICAgICAgIGRvVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGRvVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgaW50ZXJuYWwgewoKICAgICAgICAgICBpZiAoX2Ftb3VudCA8PSAwKSB7CiAgICAgICAgICAgICAgIGVtaXQgVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICB9CgogICAgICAgICAgIHJlcXVpcmUoKF90byAhPSAwKSAmJiAoX3RvICE9IGFkZHJlc3ModGhpcykpKTsKCiAgICAgICAgICAgdWludDI1NiBwcmV2aW91c0JhbGFuY2VGcm9tID0gYmFsYW5jZU9mQXQoX2Zyb20sIGJsb2NrLm51bWJlcik7CgogICAgICAgICAgIHJlcXVpcmUocHJldmlvdXNCYWxhbmNlRnJvbSA+PSBfYW1vdW50KTsKCiAgICAgICAgICAgdXBkYXRlVmFsdWVBdE5vdyhiYWxhbmNlc1tfZnJvbV0sIHByZXZpb3VzQmFsYW5jZUZyb20gLSBfYW1vdW50KTsKCiAgICAgICAgICAgdWludDI1NiBwcmV2aW91c0JhbGFuY2VUbyA9IGJhbGFuY2VPZkF0KF90bywgYmxvY2subnVtYmVyKTsKICAgICAgICAgICByZXF1aXJlKHByZXZpb3VzQmFsYW5jZVRvICsgX2Ftb3VudCA+PSBwcmV2aW91c0JhbGFuY2VUbyk7CiAgICAgICAgICAgdXBkYXRlVmFsdWVBdE5vdyhiYWxhbmNlc1tfdG9dLCBwcmV2aW91c0JhbGFuY2VUbyArIF9hbW91bnQpOwoKICAgICAgICAgICBlbWl0IFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwoKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZU9mQXQoX293bmVyLCBibG9jay5udW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSh0cmFuc2ZlcnNFbmFibGVkKTsKCiAgICAgICAgcmVxdWlyZSgoX2Ftb3VudCA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgICAgICBpZiAoaXNDb250cmFjdChjb250cm9sbGVyKSkgewogICAgICAgICAgICByZXF1aXJlKFRva2VuQ29udHJvbGxlcihjb250cm9sbGVyKS5vbkFwcHJvdmUobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpKTsKICAgICAgICB9CgogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX2Ftb3VudDsKICAgICAgICBlbWl0IEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCwgYnl0ZXMgX2V4dHJhRGF0YQogICAgKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShhcHByb3ZlKF9zcGVuZGVyLCBfYW1vdW50KSk7CgogICAgICAgIEFwcHJvdmVBbmRDYWxsRmFsbEJhY2soX3NwZW5kZXIpLnJlY2VpdmVBcHByb3ZhbCgKICAgICAgICAgICAgbXNnLnNlbmRlciwKICAgICAgICAgICAgX2Ftb3VudCwKICAgICAgICAgICAgdGhpcywKICAgICAgICAgICAgX2V4dHJhRGF0YQogICAgICAgICk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdG90YWxTdXBwbHlBdChibG9jay5udW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZkF0KGFkZHJlc3MgX293bmVyLCB1aW50IF9ibG9ja051bWJlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKCiAgICAgICAgaWYgKChiYWxhbmNlc1tfb3duZXJdLmxlbmd0aCA9PSAwKQogICAgICAgICAgICB8fCAoYmFsYW5jZXNbX293bmVyXVswXS5mcm9tQmxvY2sgPiBfYmxvY2tOdW1iZXIpKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBnZXRWYWx1ZUF0KGJhbGFuY2VzW19vd25lcl0sIF9ibG9ja051bWJlcik7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5QXQodWludCBfYmxvY2tOdW1iZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKCiAgICAgICAgaWYgKCh0b3RhbFN1cHBseUhpc3RvcnkubGVuZ3RoID09IDApCiAgICAgICAgICAgIHx8ICh0b3RhbFN1cHBseUhpc3RvcnlbMF0uZnJvbUJsb2NrID4gX2Jsb2NrTnVtYmVyKSkgewogICAgICAgICAgICByZXR1cm4gMDsKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGdldFZhbHVlQXQodG90YWxTdXBwbHlIaXN0b3J5LCBfYmxvY2tOdW1iZXIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZW5lcmF0ZVRva2VucyhhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSBwdWJsaWMgb25seUNvbnRyb2xsZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHVpbnQgY3VyVG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseSgpOwogICAgICAgIHJlcXVpcmUoY3VyVG90YWxTdXBwbHkgKyBfYW1vdW50ID49IGN1clRvdGFsU3VwcGx5KTsgLy8gQ2hlY2sgZm9yIG92ZXJmbG93CiAgICAgICAgdWludCBwcmV2aW91c0JhbGFuY2VUbyA9IGJhbGFuY2VPZihfb3duZXIpOwogICAgICAgIHJlcXVpcmUocHJldmlvdXNCYWxhbmNlVG8gKyBfYW1vdW50ID49IHByZXZpb3VzQmFsYW5jZVRvKTsgLy8gQ2hlY2sgZm9yIG92ZXJmbG93CiAgICAgICAgdXBkYXRlVmFsdWVBdE5vdyh0b3RhbFN1cHBseUhpc3RvcnksIGN1clRvdGFsU3VwcGx5ICsgX2Ftb3VudCk7CiAgICAgICAgdXBkYXRlVmFsdWVBdE5vdyhiYWxhbmNlc1tfb3duZXJdLCBwcmV2aW91c0JhbGFuY2VUbyArIF9hbW91bnQpOwogICAgICAgIGVtaXQgVHJhbnNmZXIoMCwgX293bmVyLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZXN0cm95VG9rZW5zKGFkZHJlc3MgX293bmVyLCB1aW50IF9hbW91bnQpIG9ubHlDb250cm9sbGVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgdWludCBjdXJUb3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5KCk7CiAgICAgICAgcmVxdWlyZShjdXJUb3RhbFN1cHBseSA+PSBfYW1vdW50KTsKICAgICAgICB1aW50IHByZXZpb3VzQmFsYW5jZUZyb20gPSBiYWxhbmNlT2YoX293bmVyKTsKICAgICAgICByZXF1aXJlKHByZXZpb3VzQmFsYW5jZUZyb20gPj0gX2Ftb3VudCk7CiAgICAgICAgdXBkYXRlVmFsdWVBdE5vdyh0b3RhbFN1cHBseUhpc3RvcnksIGN1clRvdGFsU3VwcGx5IC0gX2Ftb3VudCk7CiAgICAgICAgdXBkYXRlVmFsdWVBdE5vdyhiYWxhbmNlc1tfb3duZXJdLCBwcmV2aW91c0JhbGFuY2VGcm9tIC0gX2Ftb3VudCk7CiAgICAgICAgZW1pdCBUcmFuc2Zlcihfb3duZXIsIDAsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGVuYWJsZVRyYW5zZmVycyhib29sIF90cmFuc2ZlcnNFbmFibGVkKSBwdWJsaWMgb25seUNvbnRyb2xsZXIgewogICAgICAgIHRyYW5zZmVyc0VuYWJsZWQgPSBfdHJhbnNmZXJzRW5hYmxlZDsKICAgIH0KCgogICAgZnVuY3Rpb24gZ2V0VmFsdWVBdChDaGVja3BvaW50W10gc3RvcmFnZSBjaGVja3BvaW50cywgdWludCBfYmxvY2spIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBpZiAoY2hlY2twb2ludHMubGVuZ3RoID09IDApIHJldHVybiAwOwoKICAgICAgICBpZiAoX2Jsb2NrID49IGNoZWNrcG9pbnRzW2NoZWNrcG9pbnRzLmxlbmd0aC0xXS5mcm9tQmxvY2spCiAgICAgICAgICAgIHJldHVybiBjaGVja3BvaW50c1tjaGVja3BvaW50cy5sZW5ndGgtMV0udmFsdWU7CiAgICAgICAgaWYgKF9ibG9jayA8IGNoZWNrcG9pbnRzWzBdLmZyb21CbG9jaykgcmV0dXJuIDA7CgogICAgICAgIHVpbnQgbWluID0gMDsKICAgICAgICB1aW50IG1heCA9IGNoZWNrcG9pbnRzLmxlbmd0aC0xOwogICAgICAgIHdoaWxlIChtYXggPiBtaW4pIHsKICAgICAgICAgICAgdWludCBtaWQgPSAobWF4ICsgbWluICsgMSkvIDI7CiAgICAgICAgICAgIGlmIChjaGVja3BvaW50c1ttaWRdLmZyb21CbG9jazw9X2Jsb2NrKSB7CiAgICAgICAgICAgICAgICBtaW4gPSBtaWQ7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBtYXggPSBtaWQtMTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gY2hlY2twb2ludHNbbWluXS52YWx1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVWYWx1ZUF0Tm93KENoZWNrcG9pbnRbXSBzdG9yYWdlIGNoZWNrcG9pbnRzLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgIHsKICAgICAgICBpZiAoKGNoZWNrcG9pbnRzLmxlbmd0aCA9PSAwKQogICAgICAgIHx8IChjaGVja3BvaW50c1tjaGVja3BvaW50cy5sZW5ndGggLTFdLmZyb21CbG9jayA8IGJsb2NrLm51bWJlcikpIHsKICAgICAgICAgICAgICAgQ2hlY2twb2ludCBzdG9yYWdlIG5ld0NoZWNrUG9pbnQgPSBjaGVja3BvaW50c1sgY2hlY2twb2ludHMubGVuZ3RoKysgXTsKICAgICAgICAgICAgICAgbmV3Q2hlY2tQb2ludC5mcm9tQmxvY2sgPSAgdWludDEyOChibG9jay5udW1iZXIpOwogICAgICAgICAgICAgICBuZXdDaGVja1BvaW50LnZhbHVlID0gdWludDEyOChfdmFsdWUpOwogICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgIENoZWNrcG9pbnQgc3RvcmFnZSBvbGRDaGVja1BvaW50ID0gY2hlY2twb2ludHNbY2hlY2twb2ludHMubGVuZ3RoLTFdOwogICAgICAgICAgICAgICBvbGRDaGVja1BvaW50LnZhbHVlID0gdWludDEyOChfdmFsdWUpOwogICAgICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMoYm9vbCkgewogICAgICAgIHVpbnQgc2l6ZTsKICAgICAgICBpZiAoX2FkZHIgPT0gMCkgcmV0dXJuIGZhbHNlOwogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNpemU+MDsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW4odWludCBhLCB1aW50IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKGlzQ29udHJhY3QoY29udHJvbGxlcikpOwogICAgICAgIHJlcXVpcmUoVG9rZW5Db250cm9sbGVyKGNvbnRyb2xsZXIpLnByb3h5UGF5bWVudC52YWx1ZShtc2cudmFsdWUpKG1zZy5zZW5kZXIpKTsKICAgIH0KCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX2Ftb3VudCk7CiAgICBldmVudCBBcHByb3ZhbCgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgX293bmVyLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwKICAgICAgICB1aW50MjU2IF9hbW91bnQKICAgICAgICApOwoKfQovL0ZpbGU6IGNvbnRyYWN0cy9jb21tb24vU2FmZU1hdGguc29sCnByYWdtYSBzb2xpZGl0eSBeMC40LjIxOwoKY29udHJhY3QgU2FmZU1hdGggewogICAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgYXNzZXJ0KGIgPiAwKTsKICAgICAgICB1aW50IGMgPSBhIC8gYjsKICAgICAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgovL0ZpbGU6IC4vY29udHJhY3RzL0Nyb3dkRnVuZGVyLnNvbApwcmFnbWEgc29saWRpdHkgXjAuNC4yMTsKCgoKCgpjb250cmFjdCBDcm93ZEZ1bmRlciBpcyBDb250cm9sbGVkLCBTYWZlTWF0aCB7CiAgICBhZGRyZXNzIHB1YmxpYyBjcmVhdG9yOwogICAgYWRkcmVzcyBwdWJsaWMgZnVuZFJlY2lwaWVudDsKICAgIGFkZHJlc3MgcHVibGljIHJlc2VydmVUZWFtUmVjaXBpZW50OwogICAgYWRkcmVzcyBwdWJsaWMgcmVzZXJ2ZUJvdW50eVJlY2lwaWVudDsKICAgIGFkZHJlc3MgcHVibGljIGRldmVsb3BlcnNSZWNpcGllbnQ7CiAgICBhZGRyZXNzIHB1YmxpYyBtYXJrZXRpbmdSZWNpcGllbnQ7CgogICAgYm9vbCBwdWJsaWMgaXNSZXNlcnZlR2VuZXJhdGVkOwoKICAgIHVpbnQgaW52ZXN0b3JDb3VudDsKICAgIHVpbnQgcHVibGljIGN1cnJlbnRCYWxhbmNlOwogICAgdWludCBwdWJsaWMgdG9rZW5zSXNzdWVkOwogICAgdWludCBwdWJsaWMgY2FwVG9rZW5BbW91bnQ7CiAgICB1aW50IHB1YmxpYyBzdGFydEJsb2NrTnVtYmVyOwogICAgdWludCBwdWJsaWMgZW5kQmxvY2tOdW1iZXI7CiAgICB1aW50IHB1YmxpYyB0b2tlbkV4Y2hhbmdlUmF0ZTsKCiAgICBhZGRyZXNzW10gZmlhdEludmVzdG9yczsKCiAgICBUb2tlbiBwdWJsaWMgZXhjaGFuZ2VUb2tlbjsKCiAgICBlbnVtIFN0YXRlIHsKICAgICAgICBXYWl0LAogICAgICAgIEZ1bmRyYWlzaW5nLAogICAgICAgIFN1Y2Nlc3NmdWwsCiAgICAgICAgQ2xvc2VkCiAgICB9CiAgICBTdGF0ZSBwdWJsaWMgc3RhdGUgPSBTdGF0ZS5XYWl0OwoKICAgIGV2ZW50IEdvYWxSZWFjaGVkKGFkZHJlc3MgZnVuZFJlY2lwaWVudCwgdWludCBhbW91bnRSYWlzZWQpOwogICAgZXZlbnQgRnVuZFRyYW5zZmVyKGFkZHJlc3MgYmFja2VyLCB1aW50IGFtb3VudCwgYm9vbCBpc0NvbnRyaWJ1dGlvbik7CiAgICBldmVudCBGcm96ZW5GdW5kcyhhZGRyZXNzIHRhcmdldCwgYm9vbCBmcm96ZW4pOwogICAgZXZlbnQgTG9nRnVuZGluZ1JlY2VpdmVkKGFkZHJlc3MgYWRkciwgdWludCBhbW91bnQsIHVpbnQgY3VycmVudFRvdGFsKTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgZmlhdEludmVzdG9yU2hhcmU7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHByaXZhdGUgZnJvemVuQWNjb3VudDsKCiAgICBtb2RpZmllciBpblN0YXRlKFN0YXRlIF9zdGF0ZSkgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gX3N0YXRlKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGFjY291bnROb3RGcm96ZW4oKSB7CiAgICAgICAgcmVxdWlyZSghKGZyb3plbkFjY291bnRbbXNnLnNlbmRlcl0gPT0gdHJ1ZSkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbWluSW52ZXN0bWVudCgpIHsKICAgICAgICAvLyBVc2VyIGhhcyB0byBzZW5kIGF0IGxlYXN0IDAuMDEgRXRoCiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gMTAgKiogMTYpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gQ3Jvd2RGdW5kZXIoCiAgICAgICAgYWRkcmVzcyBfZnVuZFJlY2lwaWVudCwKICAgICAgICBhZGRyZXNzIF9yZXNlcnZlVGVhbVJlY2lwaWVudCwKICAgICAgICBhZGRyZXNzIF9yZXNlcnZlQm91bnR5UmVjaXBpZW50LAogICAgICAgIGFkZHJlc3MgX2RldmVsb3BlcnNSZWNpcGllbnQsCiAgICAgICAgYWRkcmVzcyBfbWFya2V0aW5nUmVjaXBpZW50LAogICAgICAgIFRva2VuIF9hZGRyZXNzT2ZFeGNoYW5nZVRva2VuCiAgICApIHB1YmxpYyB7CiAgICAgICAgY3JlYXRvciA9IG1zZy5zZW5kZXI7CgogICAgICAgIGZ1bmRSZWNpcGllbnQgPSBfZnVuZFJlY2lwaWVudDsKICAgICAgICByZXNlcnZlVGVhbVJlY2lwaWVudCA9IF9yZXNlcnZlVGVhbVJlY2lwaWVudDsKICAgICAgICByZXNlcnZlQm91bnR5UmVjaXBpZW50ID0gX3Jlc2VydmVCb3VudHlSZWNpcGllbnQ7CiAgICAgICAgZGV2ZWxvcGVyc1JlY2lwaWVudCA9IF9kZXZlbG9wZXJzUmVjaXBpZW50OwogICAgICAgIG1hcmtldGluZ1JlY2lwaWVudCA9IF9tYXJrZXRpbmdSZWNpcGllbnQ7CgogICAgICAgIGlzUmVzZXJ2ZUdlbmVyYXRlZCA9IGZhbHNlOwoKICAgICAgICBjYXBUb2tlbkFtb3VudCA9IDEwMDAwMDAwICogMTAgKiogOTsKCiAgICAgICAgc3RhdGUgPSBTdGF0ZS5XYWl0OwoKICAgICAgICBleGNoYW5nZVRva2VuID0gVG9rZW4oX2FkZHJlc3NPZkV4Y2hhbmdlVG9rZW4pOwoKICAgICAgICBjdXJyZW50QmFsYW5jZSA9IDA7CiAgICAgICAgdG9rZW5zSXNzdWVkID0gMDsKICAgICAgICB0b2tlbkV4Y2hhbmdlUmF0ZSA9IDA7CiAgICB9CgogICAgZnVuY3Rpb24gc3RhcnRGdW5kcmFpc2luZygpIHB1YmxpYyBpblN0YXRlKFN0YXRlLldhaXQpIG9ubHlDb250cm9sbGVyIHsKICAgICAgICBzdGFydEJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyOwogICAgICAgIGVuZEJsb2NrTnVtYmVyID0gc3RhcnRCbG9ja051bWJlciArICgoMzEgKiAyNCAqIDM2MDApIC8gMTUpOyAvLyAzMSBkYXlzCiAgICAgICAgc3RhdGUgPSBTdGF0ZS5GdW5kcmFpc2luZzsKICAgICAgICB0b2tlbnNJc3N1ZWQgPSBleGNoYW5nZVRva2VuLnRvdGFsU3VwcGx5KCk7CiAgICAgICAgdXBkYXRlRXhjaGFuZ2VSYXRlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlUmVzZXJ2ZUJvdW50eVJlY2lwaWVudChhZGRyZXNzIF9yZXNlcnZlQm91bnR5UmVjaXBpZW50KSBwdWJsaWMgb25seUNvbnRyb2xsZXIgewogICAgICAgIHJlc2VydmVCb3VudHlSZWNpcGllbnQgPSBfcmVzZXJ2ZUJvdW50eVJlY2lwaWVudDsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VEZXZlbG9wZXJzUmVjaXBpZW50KGFkZHJlc3MgX2RldmVsb3BlcnNSZWNpcGllbnQpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICAgICAgZGV2ZWxvcGVyc1JlY2lwaWVudCA9IF9kZXZlbG9wZXJzUmVjaXBpZW50OwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZU1hcmtldGluZ1JlY2lwaWVudChhZGRyZXNzIF9tYXJrZXRpbmdSZWNpcGllbnQpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICAgICAgbWFya2V0aW5nUmVjaXBpZW50ID0gX21hcmtldGluZ1JlY2lwaWVudDsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRJbnZlc3RvcihhZGRyZXNzIHRhcmdldCwgdWludCBzaGFyZSkgcHVibGljIG9ubHlDb250cm9sbGVyIHsKICAgICAgICBpZiAoZmlhdEludmVzdG9yU2hhcmVbdGFyZ2V0XSA9PSB1aW50KDB4MCkpIHsgLy8gbmV3IGFkZHJlc3MKICAgICAgICAgICAgZmlhdEludmVzdG9yU2hhcmVbdGFyZ2V0XSA9IHNoYXJlOwogICAgICAgICAgICBmaWF0SW52ZXN0b3JzLnB1c2godGFyZ2V0KTsKICAgICAgICB9IGVsc2UgeyAvLyBhZGRyZXNzIGFscmVhZHkgZXhpc3RzCiAgICAgICAgICAgIGlmIChzaGFyZSA+IDApIHsKICAgICAgICAgICAgICAgIHVpbnQgcHJldlNoYXJlID0gZmlhdEludmVzdG9yU2hhcmVbdGFyZ2V0XTsKICAgICAgICAgICAgICAgIHVpbnQgbmV3U2hhcmUgPSBwcmV2U2hhcmUgKyBzaGFyZTsKCiAgICAgICAgICAgICAgICBmaWF0SW52ZXN0b3JTaGFyZVt0YXJnZXRdID0gbmV3U2hhcmU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZnJlZXplQWNjb3VudChhZGRyZXNzIHRhcmdldCwgYm9vbCBmcmVlemUpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICAgICAgZnJvemVuQWNjb3VudFt0YXJnZXRdID0gZnJlZXplOwogICAgICAgIGVtaXQgRnJvemVuRnVuZHModGFyZ2V0LCBmcmVlemUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUV4Y2hhbmdlUmF0ZSgpIHB1YmxpYyB7CiAgICAgICAgaWYgKHRva2Vuc0lzc3VlZCA+PSAwICYmIHRva2Vuc0lzc3VlZCA8ICgxMDAwMDAwICogMTAgKiogOSkpIHsKICAgICAgICAgICAgdG9rZW5FeGNoYW5nZVJhdGUgPSAxMDAwICogMTAgKiogOTsKICAgICAgICB9CiAgICAgICAgaWYgKHRva2Vuc0lzc3VlZCA+PSAoMTAwMDAwMCAqIDEwICoqIDkpICYmIHRva2Vuc0lzc3VlZCA8ICgyMDAwMDAwICogMTAgKiogOSkpIHsKICAgICAgICAgICAgdG9rZW5FeGNoYW5nZVJhdGUgPSA2MDAgKiAxMCAqKiA5OwogICAgICAgIH0KICAgICAgICBpZiAodG9rZW5zSXNzdWVkID49ICgyMDAwMDAwICogMTAgKiogOSkgJiYgdG9rZW5zSXNzdWVkIDwgKDM1MDAwMDAgKiAxMCAqKiA5KSkgewogICAgICAgICAgICB0b2tlbkV4Y2hhbmdlUmF0ZSA9IDUwMCAqIDEwICoqIDk7CiAgICAgICAgfQogICAgICAgIGlmICh0b2tlbnNJc3N1ZWQgPj0gKDM1MDAwMDAgKiAxMCAqKiA5KSAmJiB0b2tlbnNJc3N1ZWQgPCAoNjAwMDAwMCAqIDEwICoqIDkpKSB7CiAgICAgICAgICAgIHRva2VuRXhjaGFuZ2VSYXRlID0gNDAwICogMTAgKiogOTsKICAgICAgICB9CiAgICAgICAgaWYgKHRva2Vuc0lzc3VlZCA+PSAoNjAwMDAwMCAqIDEwICoqIDkpKSB7CiAgICAgICAgICAgIHRva2VuRXhjaGFuZ2VSYXRlID0gMzAwICogMTAgKiogOTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RXhjaGFuZ2VSYXRlKHVpbnQgYW1vdW50KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiB0b2tlbkV4Y2hhbmdlUmF0ZSAqIGFtb3VudCAvIDEgZXRoZXI7CiAgICB9CgogICAgZnVuY3Rpb24gaW52ZXN0bWVudCgpIHB1YmxpYyBpblN0YXRlKFN0YXRlLkZ1bmRyYWlzaW5nKSBhY2NvdW50Tm90RnJvemVuIG1pbkludmVzdG1lbnQgcGF5YWJsZSByZXR1cm5zICh1aW50KSAgewogICAgICAgIHVpbnQgYW1vdW50ID0gbXNnLnZhbHVlOwoKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gKz0gYW1vdW50OwogICAgICAgIGN1cnJlbnRCYWxhbmNlICs9IGFtb3VudDsKCiAgICAgICAgdXBkYXRlRXhjaGFuZ2VSYXRlKCk7CiAgICAgICAgdWludCB0b2tlbkFtb3VudCA9IGdldEV4Y2hhbmdlUmF0ZShhbW91bnQpOwogICAgICAgIGV4Y2hhbmdlVG9rZW4uZ2VuZXJhdGVUb2tlbnMobXNnLnNlbmRlciwgdG9rZW5BbW91bnQpOwogICAgICAgIHRva2Vuc0lzc3VlZCArPSB0b2tlbkFtb3VudDsKICAgICAgICB1cGRhdGVFeGNoYW5nZVJhdGUoKTsKCiAgICAgICAgZW1pdCBGdW5kVHJhbnNmZXIobXNnLnNlbmRlciwgYW1vdW50LCB0cnVlKTsKICAgICAgICBlbWl0IExvZ0Z1bmRpbmdSZWNlaXZlZChtc2cuc2VuZGVyLCB0b2tlbkFtb3VudCwgdG9rZW5zSXNzdWVkKTsKCiAgICAgICAgY2hlY2tJZkZ1bmRpbmdDb21wbGV0ZU9yRXhwaXJlZCgpOwoKICAgICAgICByZXR1cm4gYmFsYW5jZU9mW21zZy5zZW5kZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrSWZGdW5kaW5nQ29tcGxldGVPckV4cGlyZWQoKSBwcml2YXRlIHsKICAgICAgICBpZiAoYmxvY2subnVtYmVyID4gZW5kQmxvY2tOdW1iZXIgfHwgdG9rZW5zSXNzdWVkID49IGNhcFRva2VuQW1vdW50KSB7CiAgICAgICAgICAgIHN0YXRlID0gU3RhdGUuU3VjY2Vzc2Z1bDsKICAgICAgICAgICAgZW1pdCBHb2FsUmVhY2hlZChmdW5kUmVjaXBpZW50LCBjdXJyZW50QmFsYW5jZSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGVuZEZ1bmRyYWlzaW5nKCkgcHVibGljIGluU3RhdGUoU3RhdGUuU3VjY2Vzc2Z1bCkgb25seUNvbnRyb2xsZXIoKSB7CiAgICAgICAgdWludCBhbW91bnQgPSBjdXJyZW50QmFsYW5jZTsKICAgICAgICB1aW50IGJhbGFuY2UgPSBjdXJyZW50QmFsYW5jZTsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgZmlhdEludmVzdG9ycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhZGRyZXNzIGludmVzdG9yQWRkcmVzcyA9IGZpYXRJbnZlc3RvcnNbaV07CiAgICAgICAgICAgIHVpbnQgaW52ZXN0b3JTaGFyZSA9IGZpYXRJbnZlc3RvclNoYXJlW2ludmVzdG9yQWRkcmVzc107CiAgICAgICAgICAgIHVpbnQgaW52ZXN0b3JBbW91bnQgPSBkaXYobXVsKGJhbGFuY2UsIGludmVzdG9yU2hhcmUpLCAxMDAwMDAwKTsKICAgICAgICAgICAgaW52ZXN0b3JBZGRyZXNzLnRyYW5zZmVyKGludmVzdG9yQW1vdW50KTsKICAgICAgICAgICAgYW1vdW50IC09IGludmVzdG9yQW1vdW50OwogICAgICAgIH0KCiAgICAgICAgdWludCBwZXJjZW50RGV2ZWxvcGVycyA9IDU7CiAgICAgICAgdWludCBwZXJjZW50TWFya2V0aW5nID0gNTsKICAgICAgICB1aW50IGFtb3VudERldmVsb3BlcnMgPSBkaXYobXVsKGJhbGFuY2UsIHBlcmNlbnREZXZlbG9wZXJzKSwgMTAwKTsKICAgICAgICB1aW50IGFtb3VudE1hcmtldGluZyA9IGRpdihtdWwoYmFsYW5jZSwgcGVyY2VudE1hcmtldGluZyksIDEwMCk7CgogICAgICAgIGRldmVsb3BlcnNSZWNpcGllbnQudHJhbnNmZXIoYW1vdW50RGV2ZWxvcGVycyk7CiAgICAgICAgbWFya2V0aW5nUmVjaXBpZW50LnRyYW5zZmVyKGFtb3VudE1hcmtldGluZyk7CgogICAgICAgIGFtb3VudCAtPSAoYW1vdW50RGV2ZWxvcGVycyArIGFtb3VudE1hcmtldGluZyk7CgogICAgICAgIGZ1bmRSZWNpcGllbnQudHJhbnNmZXIoYW1vdW50KTsKCiAgICAgICAgZ2VuZXJhdGVSZXNlcnZlKCk7CgogICAgICAgIGN1cnJlbnRCYWxhbmNlID0gMDsKICAgICAgICBzdGF0ZSA9IFN0YXRlLkNsb3NlZDsKCiAgICAgICAgZXhjaGFuZ2VUb2tlbi5jaGFuZ2VDb250cm9sbGVyKGNvbnRyb2xsZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdlbmVyYXRlUmVzZXJ2ZSgpIHByaXZhdGUgewogICAgICAgIHJlcXVpcmUoaXNSZXNlcnZlR2VuZXJhdGVkID09IGZhbHNlKTsKCiAgICAgICAgdWludCBpc3N1ZWQgPSB0b2tlbnNJc3N1ZWQ7CiAgICAgICAgdWludCBwZXJjZW50VGVhbSA9IDE1OwogICAgICAgIHVpbnQgcGVyY2VudEJvdW50eSA9IDE7CiAgICAgICAgdWludCByZXNlcnZlQW1vdW50VGVhbSA9IGRpdihtdWwoaXNzdWVkLCBwZXJjZW50VGVhbSksIDg1KTsKICAgICAgICB1aW50IHJlc2VydmVBbW91bnRCb3VudHkgPSBkaXYobXVsKGlzc3VlZCwgcGVyY2VudEJvdW50eSksIDk5KTsKCiAgICAgICAgZXhjaGFuZ2VUb2tlbi5nZW5lcmF0ZVRva2VucyhyZXNlcnZlVGVhbVJlY2lwaWVudCwgcmVzZXJ2ZUFtb3VudFRlYW0pOwogICAgICAgIGV4Y2hhbmdlVG9rZW4uZ2VuZXJhdGVUb2tlbnMocmVzZXJ2ZUJvdW50eVJlY2lwaWVudCwgcmVzZXJ2ZUFtb3VudEJvdW50eSk7CgogICAgICAgIGlzUmVzZXJ2ZUdlbmVyYXRlZCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlQ29udHJhY3QoKSBwdWJsaWMgaW5TdGF0ZShTdGF0ZS5DbG9zZWQpIG9ubHlDb250cm9sbGVyIHsKICAgICAgICBzZWxmZGVzdHJ1Y3QobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24oKSBpblN0YXRlKFN0YXRlLkZ1bmRyYWlzaW5nKSBwdWJsaWMgYWNjb3VudE5vdEZyb3plbiBtaW5JbnZlc3RtZW50IHBheWFibGUgewogICAgICAgIGludmVzdG1lbnQoKTsKICAgIH0KCn0='.
	

]
