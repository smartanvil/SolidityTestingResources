Class {
	#name : #SRTaa4ab1c817e4df7d25ce4d42352649d592a3bba0,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTaa4ab1c817e4df7d25ce4d42352649d592a3bba0 >> base64 [
	^ 'bGlicmFyeSBTYWZlTWF0aAp7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIAogIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIAogIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgCiAgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgCiAgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSAKewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICAKICAgIC8vICBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgIC8vICBhY2NvdW50LgogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyAKICAgIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLy8gIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4gCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSAKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIC8vICBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAgLy8gIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uIAogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lcgogICAgewogICAgICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSAKICAgICAgICB7CiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgfQogICAgfQp9Cgpjb250cmFjdCBCYXNpY1Rva2VuCnsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgCiAgICAgLy8gIFRvdGFsIG51bWJlciBvZiBUb2tlbnMKICAgIHVpbnQgdG90YWxDb2luU3VwcGx5OwogICAgCiAgICAvLyAgYWxsb3dhbmNlIG1hcAogICAgLy8gICggb3duZXIgPT4gKHNwZW5kZXIgPT4gYW1vdW50ICkgKSAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIEFsbG93YW5jZUxlZGdlcjsKICAgIAogICAgLy8gIG93bmVyc2hpcCBtYXAKICAgIC8vICAoIG93bmVyID0+IHZhbHVlICkKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsKCiAgICAvLyAgQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICAgLy8gIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgICAvLyAgQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoIGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfdmFsdWUgKSBwdWJsaWMgCiAgICAgICAgcmV0dXJucyggYm9vbCBzdWNjZXNzICkKICAgIHsKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZU9mW19yZWNpcGllbnRdID0gYmFsYW5jZU9mW19yZWNpcGllbnRdLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF9yZWNpcGllbnQsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSggYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfdmFsdWUgKSAKICAgICAgICBwdWJsaWMgcmV0dXJucyggYm9vbCBzdWNjZXNzICkKICAgIHsKICAgICAgICB2YXIgX2FsbG93YW5jZSA9IEFsbG93YW5jZUxlZGdlcltfb3duZXJdW21zZy5zZW5kZXJdOwogICAgICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgCiAgICAgICAgLy8gIHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgICAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgICAgIGJhbGFuY2VPZltfcmVjaXBpZW50XSA9IGJhbGFuY2VPZltfcmVjaXBpZW50XS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlT2ZbX293bmVyXSA9IGJhbGFuY2VPZltfb3duZXJdLnN1YihfdmFsdWUpOwogICAgICAgIEFsbG93YW5jZUxlZGdlcltfb3duZXJdW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihfb3duZXIsIF9yZWNpcGllbnQsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFwcHJvdmUoIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlICkgCiAgICAgICAgcHVibGljIHJldHVybnMoIGJvb2wgc3VjY2VzcyApCiAgICB7CiAgICAgICAgLy8gIF9vd25lciBpcyB0aGUgYWRkcmVzcyBvZiB0aGUgb3duZXIgd2hvIGlzIGdpdmluZyBhcHByb3ZhbCB0bwogICAgICAgIC8vICBfc3BlbmRlciwgd2hvIGNhbiB0aGVuIHRyYW5zYWN0IGNvaW5zIG9uIHRoZSBiZWhhbGYgb2YgX293bmVyCiAgICAgICAgYWRkcmVzcyBfb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIEFsbG93YW5jZUxlZGdlcltfb3duZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICAKICAgICAgICAvLyAgRmlyZSBvZmYgQXBwcm92YWwgZXZlbnQKICAgICAgICBBcHByb3ZhbCggX293bmVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKCBhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciApIHB1YmxpYyBjb25zdGFudCAKICAgICAgICByZXR1cm5zICggdWludDI1NiByZW1haW5pbmcgKQogICAgewogICAgICAgIC8vICByZXR1cm5zIHRoZSBhbW91bnQgX3NwZW5kZXIgY2FuIHRyYW5zYWN0IG9uIGJlaGFsZiBvZiBfb3duZXIKICAgICAgICByZXR1cm4gQWxsb3dhbmNlTGVkZ2VyW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKCB1aW50MjU2IHRvdGFsICkKICAgIHsgIAogICAgICAgIHJldHVybiB0b3RhbENvaW5TdXBwbHk7CiAgICB9CgogICAgLy8gIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgICAvLyAgQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICAgLy8gIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpCiAgICB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VPZltfb3duZXJdOwogICAgfQogICAgCiAgICBldmVudCBUcmFuc2ZlciggYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9yZWNpcGllbnQsIHVpbnQyNTYgX3ZhbHVlICk7CiAgICBldmVudCBBcHByb3ZhbCggYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlICk7Cgp9Cgpjb250cmFjdCBBbmtvcnVzVG9rZW4gaXMgQmFzaWNUb2tlbiwgT3duYWJsZQp7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIAogICAgLy8gVG9rZW4gQ2FwIGZvciBlYWNoIHJvdW5kcwogICAgdWludDI1NiBwdWJsaWMgc2FsZUNhcDsKCiAgICAvLyBBZGRyZXNzIHdoZXJlIGZ1bmRzIGFyZSBjb2xsZWN0ZWQuCiAgICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CiAgICAKICAgIC8vIFNhbGUgcGVyaW9kLgogICAgdWludDI1NiBwdWJsaWMgc3RhcnREYXRlOwogICAgdWludDI1NiBwdWJsaWMgZW5kRGF0ZTsKCiAgICAvLyBBbW91bnQgb2YgcmFpc2VkIG1vbmV5IGluIHdlaS4KICAgIHVpbnQyNTYgcHVibGljIHdlaVJhaXNlZDsKICAgIAogICAgLy8gIFRva2VucyByYXRlIGZvcm11bGUKICAgIHVpbnQyNTYgcHVibGljIHRva2Vuc1NvbGQgPSAwOwogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zUGVyVHJ1bmNoZSA9IDIwMDAwMDA7CiAgICAKICAgIC8vICBXaGl0ZWxpc3QgYXBwcm92YWwgbWFwcGluZwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgd2hpdGVsaXN0OwogICAgYm9vbCBwdWJsaWMgZmluYWxpemVkID0gZmFsc2U7CiAgICAKICAgLy8gIFRoaXMgaXMgdGhlICdUaWNrZXInIHN5bWJvbCBhbmQgbmFtZSBmb3Igb3VyIFRva2VuLgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiQU5LIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJBbmtvcnVzVG9rZW4iOwogICAgCiAgICAvLyAgVGhpcyBpcyBmb3IgaG93IHlvdXIgdG9rZW4gY2FuIGJlIGZyYWNpb25hbGl6ZWQuIAogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gMTg7IAogICAgCiAgICAvLyBFdmVudHMKICAgIGV2ZW50IFRva2VuUHVyY2hhc2UoYWRkcmVzcyBpbmRleGVkIHB1cmNoYXNlciwgdWludDI1NiB2YWx1ZSwgCiAgICAgICAgdWludDI1NiB0b2tlbkFtb3VudCk7CiAgICBldmVudCBDb21wYW55VG9rZW5QdXNoZWQoYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IGFtb3VudCk7CiAgICBldmVudCBCdXJuKCBhZGRyZXNzIGJ1cm5BZGRyZXNzLCB1aW50MjU2IGFtb3VudCk7CiAgICAKICAgIGZ1bmN0aW9uIEFua29ydXNUb2tlbigpIHB1YmxpYyAKICAgIHsKICAgIH0KICAgIAogICAgLy8gIEBkZXYgZ2V0cyB0aGUgc2FsZSBwb29sIGJhbGFuY2UKICAgIC8vICBAcmV0dXJuIHRva2VucyBpbiB0aGUgcG9vbAogICAgZnVuY3Rpb24gc3VwcGx5KCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgCiAgICB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VPZlsweGIxXTsKICAgIH0KCiAgICBtb2RpZmllciB1bmluaXRpYWxpemVkKCkgCiAgICB7CiAgICAgICAgcmVxdWlyZSh3YWxsZXQgPT0gMHgwKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vICBAZGV2IGdldHMgdGhlIGN1cnJlbnQgdGltZQogICAgLy8gIEByZXR1cm4gY3VycmVudCB0aW1lCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50VGltZXN0YW1wKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIAogICAgewogICAgICAgIHJldHVybiBub3c7CiAgICB9CiAgICAKICAgIC8vICBAZGV2IGdldHMgdGhlIGN1cnJlbnQgcmF0ZSBvZiB0b2tlbnMgcGVyIGV0aGVyIGNvbnRyaWJ1dGVkCiAgICAvLyAgQHJldHVybiBudW1iZXIgb2YgdG9rZW5zIHBlciBldGhlcgogICAgZnVuY3Rpb24gZ2V0UmF0ZUF0KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgdWludDI1NiB0cmF1bmNoID0gdG9rZW5zU29sZC5kaXYodG9rZW5zUGVyVHJ1bmNoZSk7CiAgICAgICAgCiAgICAgICAgLy8gIFByaWNlIGN1cnZlIGJhc2VkIG9uIGZ1bmN0aW9uIGF0OgogICAgICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vQW5rb3J1c1Rva2VuSWNvL1NtYXJ0LUNvbnRyYWN0L2Jsb2IvbWFzdGVyL1ByaWNlX2N1cnZlLnBuZwogICAgICAgIGlmICAgICAoIHRyYXVuY2ggPT0gMCApICB7cmV0dXJuIDYwMDt9CiAgICAgICAgZWxzZSBpZiggdHJhdW5jaCA9PSAxICkgIHtyZXR1cm4gNTk4O30KICAgICAgICBlbHNlIGlmKCB0cmF1bmNoID09IDIgKSAge3JldHVybiA1OTY7fQogICAgICAgIGVsc2UgaWYoIHRyYXVuY2ggPT0gMyApICB7cmV0dXJuIDU5Mzt9CiAgICAgICAgZWxzZSBpZiggdHJhdW5jaCA9PSA0ICkgIHtyZXR1cm4gNTg4O30KICAgICAgICBlbHNlIGlmKCB0cmF1bmNoID09IDUgKSAge3JldHVybiA1ODM7fQogICAgICAgIGVsc2UgaWYoIHRyYXVuY2ggPT0gNiApICB7cmV0dXJuIDU3ODt9CiAgICAgICAgZWxzZSBpZiggdHJhdW5jaCA9PSA3ICkgIHtyZXR1cm4gNTcxO30KICAgICAgICBlbHNlIGlmKCB0cmF1bmNoID09IDggKSAge3JldHVybiA1NjQ7fQogICAgICAgIGVsc2UgaWYoIHRyYXVuY2ggPT0gOSApICB7cmV0dXJuIDU1Njt9CiAgICAgICAgZWxzZSBpZiggdHJhdW5jaCA9PSAxMCApIHtyZXR1cm4gNTQ3O30KICAgICAgICBlbHNlIGlmKCB0cmF1bmNoID09IDExICkge3JldHVybiA1Mzg7fQogICAgICAgIGVsc2UgaWYoIHRyYXVuY2ggPT0gMTIgKSB7cmV0dXJuIDUyOTt9CiAgICAgICAgZWxzZSBpZiggdHJhdW5jaCA9PSAxMyApIHtyZXR1cm4gNTE5O30KICAgICAgICBlbHNlIGlmKCB0cmF1bmNoID09IDE0ICkge3JldHVybiA1MDg7fQogICAgICAgIGVsc2UgaWYoIHRyYXVuY2ggPT0gMTUgKSB7cmV0dXJuIDQ5ODt9CiAgICAgICAgZWxzZSBpZiggdHJhdW5jaCA9PSAxNiApIHtyZXR1cm4gNDg3O30KICAgICAgICBlbHNlIGlmKCB0cmF1bmNoID09IDE3ICkge3JldHVybiA0NzY7fQogICAgICAgIGVsc2UgaWYoIHRyYXVuY2ggPT0gMTggKSB7cmV0dXJuIDQ2NTt9CiAgICAgICAgZWxzZSBpZiggdHJhdW5jaCA9PSAxOSApIHtyZXR1cm4gNDU0O30KICAgICAgICBlbHNlIGlmKCB0cmF1bmNoID09IDIwICkge3JldHVybiA0NDM7fQogICAgICAgIGVsc2UgaWYoIHRyYXVuY2ggPT0gMjEgKSB7cmV0dXJuIDQzMjt9CiAgICAgICAgZWxzZSBpZiggdHJhdW5jaCA9PSAyMiApIHtyZXR1cm4gNDIxO30KICAgICAgICBlbHNlIGlmKCB0cmF1bmNoID09IDIzICkge3JldHVybiA0MTA7fQogICAgICAgIGVsc2UgaWYoIHRyYXVuY2ggPT0gMjQgKSB7cmV0dXJuIDQwMDt9CiAgICAgICAgZWxzZSByZXR1cm4gNDAwOwogICAgfQogICAgCiAgICAvLyAgQGRldiBJbml0aWFsaXplIHdhbGxldCBwYXJtcywgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UKICAgIC8vICBAcGFyYW0gX3dhbGxldCAtIGFkZHJlc3Mgb2YgbXVsdGlzaWcgd2FsbGV0IHdoaWNoIHJlY2VpdmVzIGNvbnRyaWJ1dGlvbnMKICAgIC8vICBAcGFyYW0gX3N0YXJ0IC0gc3RhcnQgZGF0ZSBvZiBzYWxlCiAgICAvLyAgQHBhcmFtIF9lbmQgLSBlbmQgZGF0ZSBvZiBzYWxlCiAgICAvLyAgQHBhcmFtIF9zYWxlQ2FwIC0gYW1vdW50IG9mIGNvaW5zIGZvciBzYWxlCiAgICAvLyAgQHBhcmFtIF90b3RhbFN1cHBseSAtIHRvdGFsIHN1cHBseSBvZiBjb2lucwogICAgZnVuY3Rpb24gaW5pdGlhbGl6ZShhZGRyZXNzIF93YWxsZXQsIHVpbnQyNTYgX3N0YXJ0LCB1aW50MjU2IF9lbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgX3NhbGVDYXAsIHVpbnQyNTYgX3RvdGFsU3VwcGx5KQogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgb25seU93bmVyIHVuaW5pdGlhbGl6ZWQKICAgIHsKICAgICAgICByZXF1aXJlKF9zdGFydCA+PSBnZXRDdXJyZW50VGltZXN0YW1wKCkpOwogICAgICAgIHJlcXVpcmUoX3N0YXJ0IDwgX2VuZCk7CiAgICAgICAgcmVxdWlyZShfd2FsbGV0ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfdG90YWxTdXBwbHkgPiBfc2FsZUNhcCk7CgogICAgICAgIGZpbmFsaXplZCA9IGZhbHNlOwogICAgICAgIHN0YXJ0RGF0ZSA9IF9zdGFydDsKICAgICAgICBlbmREYXRlID0gX2VuZDsKICAgICAgICBzYWxlQ2FwID0gX3NhbGVDYXA7CiAgICAgICAgd2FsbGV0ID0gX3dhbGxldDsKICAgICAgICB0b3RhbENvaW5TdXBwbHkgPSBfdG90YWxTdXBwbHk7CgogICAgICAgIC8vICBTZXQgYmFsYW5jZSBvZiBjb21wYW55IHN0b2NrCiAgICAgICAgYmFsYW5jZU9mW3dhbGxldF0gPSBfdG90YWxTdXBwbHkuc3ViKHNhbGVDYXApOwogICAgICAgIAogICAgICAgIC8vICBMb2cgdHJhbnNmZXIgb2YgdG9rZW5zIHRvIGNvbXBhbnkgd2FsbGV0CiAgICAgICAgVHJhbnNmZXIoMHgwLCB3YWxsZXQsIGJhbGFuY2VPZlt3YWxsZXRdKTsKICAgICAgICAKICAgICAgICAvLyAgU2V0IGJhbGFuY2Ugb2Ygc2FsZSBwb29sCiAgICAgICAgYmFsYW5jZU9mWzB4YjFdID0gc2FsZUNhcDsKICAgICAgICAKICAgICAgICAvLyAgTG9nIHRyYW5zZmVyIG9mIHRva2VucyB0byBJQ08gc2FsZSBwb29sCiAgICAgICAgVHJhbnNmZXIoMHgwLCAweGIxLCBzYWxlQ2FwKTsKICAgIH0KICAgIAogICAgLy8gIEZhbGxiYWNrIGZ1bmN0aW9uIGlzIGVudHJ5IHBvaW50IHRvIGJ1eSB0b2tlbnMKICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlCiAgICB7CiAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9CgogICAgLy8gIEBkZXYgSW50ZXJuYWwgdG9rZW4gcHVyY2hhc2UgZnVuY3Rpb24KICAgIC8vICBAcGFyYW0gYmVuZWZpY2lhcnkgLSBUaGUgYWRkcmVzcyBvZiB0aGUgcHVyY2hhc2VyIAogICAgLy8gIEBwYXJhbSB2YWx1ZSAtIFZhbHVlIG9mIGNvbnRyaWJ1dGlvbiwgaW4gZXRoZXIKICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHZhbHVlKSBpbnRlcm5hbAogICAgewogICAgICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKHZhbHVlID49IDAuMSBldGhlcik7CiAgICAgICAgCiAgICAgICAgLy8gQ2FsY3VsYXRlIHRva2VuIGFtb3VudCB0byBiZSBwdXJjaGFzZWQKICAgICAgICB1aW50MjU2IHdlaUFtb3VudCA9IHZhbHVlOwogICAgICAgIHVpbnQyNTYgYWN0dWFsUmF0ZSA9IGdldFJhdGVBdCgpOwogICAgICAgIHVpbnQyNTYgdG9rZW5BbW91bnQgPSB3ZWlBbW91bnQubXVsKGFjdHVhbFJhdGUpOwoKICAgICAgICAvLyAgQ2hlY2sgb3VyIHN1cHBseQogICAgICAgIC8vICBQb3RlbnRpYWxseSByZWR1bmRhbnQgYXMgYmFsYW5jZU9mWzB4YjFdLnN1Yih0b2tlbkFtb3VudCkgd2lsbAogICAgICAgIC8vICB0aHJvdyB3aXRoIGluc3VmZmljaWVudCBzdXBwbHkKICAgICAgICByZXF1aXJlKHN1cHBseSgpID49IHRva2VuQW1vdW50KTsKCiAgICAgICAgLy8gIENoZWNrIGNvbmRpdGlvbnMgZm9yIHNhbGUKICAgICAgICByZXF1aXJlKHNhbGVBY3RpdmUoKSk7CiAgICAgICAgCiAgICAgICAgLy8gVHJhbnNmZXIKICAgICAgICBiYWxhbmNlT2ZbMHhiMV0gPSBiYWxhbmNlT2ZbMHhiMV0uc3ViKHRva2VuQW1vdW50KTsKICAgICAgICBiYWxhbmNlT2ZbYmVuZWZpY2lhcnldID0gYmFsYW5jZU9mW2JlbmVmaWNpYXJ5XS5hZGQodG9rZW5BbW91bnQpOwogICAgICAgIFRva2VuUHVyY2hhc2UobXNnLnNlbmRlciwgd2VpQW1vdW50LCB0b2tlbkFtb3VudCk7CiAgICAgICAgCiAgICAgICAgLy8gIExvZyB0aGUgdHJhbnNmZXIgb2YgdG9rZW5zCiAgICAgICAgVHJhbnNmZXIoMHhiMSwgYmVuZWZpY2lhcnksIHRva2VuQW1vdW50KTsKICAgICAgICAKICAgICAgICAvLyBVcGRhdGUgc3RhdGUuCiAgICAgICAgdWludDI1NiB1cGRhdGVkV2VpUmFpc2VkID0gd2VpUmFpc2VkLmFkZCh3ZWlBbW91bnQpOwogICAgICAgIAogICAgICAgIC8vICBHZXQgdGhlIGJhc2UgdmFsdWUgb2YgdG9rZW5zCiAgICAgICAgdWludDI1NiBiYXNlID0gdG9rZW5BbW91bnQuZGl2KDEgZXRoZXIpOwogICAgICAgIHVpbnQyNTYgdXBkYXRlZFRva2Vuc1NvbGQgPSB0b2tlbnNTb2xkLmFkZChiYXNlKTsKICAgICAgICB3ZWlSYWlzZWQgPSB1cGRhdGVkV2VpUmFpc2VkOwogICAgICAgIHRva2Vuc1NvbGQgPSB1cGRhdGVkVG9rZW5zU29sZDsKCiAgICAgICAgLy8gRm9yd2FyZCB0aGUgZnVuZHMgdG8gZnVuZCBjb2xsZWN0aW9uIHdhbGxldC4KICAgICAgICB3YWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH0KICAgIAogICAgLy8gIEBkZXYgd2hpdGVsaXN0IGEgYmF0Y2ggb2YgYWRkcmVzc2VzLiBOb3RlOkV4cGVuc2l2ZQogICAgLy8gIEBwYXJhbSBbXSBiZW5lZmljaWFyeXMgLSBBcnJheSBzZXQgdG8gd2hpdGVsaXN0CiAgICBmdW5jdGlvbiBiYXRjaEFwcHJvdmVXaGl0ZWxpc3QoYWRkcmVzc1tdIGJlbmVmaWNpYXJ5cykgCiAgICAgICAgcHVibGljIG9ubHlPd25lcgogICAgewogICAgICAgIGZvciAodWludCBpPTA7IGk8YmVuZWZpY2lhcnlzLmxlbmd0aDsgaSsrKSAKICAgICAgICB7CiAgICAgICAgICAgIHdoaXRlbGlzdFtiZW5lZmljaWFyeXNbaV1dID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vICBAZGV2IFNldCB3aGl0ZWxpc3QgZm9yIHNwZWNpZmllZCBhZGRyZXNzCiAgICAvLyAgQHBhcmFtIGJlbmVmaWNpYXJ5IC0gVGhlIGFkZHJlc3MgdG8gd2hpdGVsaXN0CiAgICAvLyAgQHBhcmFtIHZhbHVlIC0gdmFsdWUgdG8gc2V0IChjYW4gc2V0IGFkZHJlc3MgdG8gdHJ1ZSBvciBmYWxzZSkKICAgIGZ1bmN0aW9uIHNldFdoaXRlbGlzdChhZGRyZXNzIGJlbmVmaWNpYXJ5LCBib29sIGluTGlzdCkgcHVibGljIG9ubHlPd25lcgogICAgewogICAgICAgIHdoaXRlbGlzdFtiZW5lZmljaWFyeV0gPSBpbkxpc3Q7CiAgICB9CiAgICAKICAgIC8vICBAZGV2IFRpbWUgcmVtYWluaW5nIHVudGlsIG9mZmljaWFsIHNhbGUgYmVnaW5zCiAgICAvLyAgQHJldHVybnMgdGltZSByZW1haW5pbmcsIGluIHNlY29uZHMKICAgIGZ1bmN0aW9uIGdldFRpbWVVbnRpbFN0YXJ0KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgaWYoZ2V0Q3VycmVudFRpbWVzdGFtcCgpID49IHN0YXJ0RGF0ZSkKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgIAogICAgICAgIHJldHVybiBzdGFydERhdGUuc3ViKGdldEN1cnJlbnRUaW1lc3RhbXAoKSk7CiAgICB9CiAgICAKICAgIAogICAgLy8gIEBkZXYgdHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgLy8gIEBwYXJhbSBfcmVjaXBpZW50IC0gVGhlIGFkZHJlc3MgdG8gcmVjZWl2ZSB0b2tlbnMKICAgIC8vICBAcGFyYW0gX3ZhbHVlIC0gbnVtYmVyIG9mIGNvaW5zIHRvIHNlbmQKICAgIC8vICBAcmV0dXJuIHRydWUgaWYgbm8gcmVxdWlyZXMgdGhyb3duCiAgICBmdW5jdGlvbiB0cmFuc2ZlciggYWRkcmVzcyBfcmVjaXBpZW50LCB1aW50MjU2IF92YWx1ZSApIHB1YmxpYyByZXR1cm5zKGJvb2wpCiAgICB7CiAgICAgICAgLy8gIENoZWNrIHRvIHNlZSBpZiB0aGUgc2FsZSBoYXMgZW5kZWQKICAgICAgICByZXF1aXJlKGZpbmFsaXplZCk7CiAgICAgICAgCiAgICAgICAgLy8gIHRyYW5zZmVyCiAgICAgICAgc3VwZXIudHJhbnNmZXIoX3JlY2lwaWVudCwgX3ZhbHVlKTsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gIEBkZXYgcHVzaCB0b2tlbnMgZnJvbSB0cmVhc3VyeSBzdG9jayB0byBzcGVjaWZpZWQgYWRkcmVzcwogICAgLy8gIEBwYXJhbSBiZW5lZmljaWFyeSAtIFRoZSBhZGRyZXNzIHRvIHJlY2VpdmUgdG9rZW5zCiAgICAvLyAgQHBhcmFtIGFtb3VudCAtIG51bWJlciBvZiBjb2lucyB0byBwdXNoCiAgICAvLyAgQHBhcmFtIGxvY2tvdXQgLSBsb2Nrb3V0IHRpbWUgCiAgICBmdW5jdGlvbiBwdXNoKGFkZHJlc3MgYmVuZWZpY2lhcnksIHVpbnQyNTYgYW1vdW50KSBwdWJsaWMgCiAgICAgICAgb25seU93bmVyIAogICAgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW3dhbGxldF0gPj0gYW1vdW50KTsKCiAgICAgICAgLy8gVHJhbnNmZXIKICAgICAgICBiYWxhbmNlT2Zbd2FsbGV0XSA9IGJhbGFuY2VPZlt3YWxsZXRdLnN1YihhbW91bnQpOwogICAgICAgIGJhbGFuY2VPZltiZW5lZmljaWFyeV0gPSBiYWxhbmNlT2ZbYmVuZWZpY2lhcnldLmFkZChhbW91bnQpOwogICAgICAgIAogICAgICAgIC8vICBMb2cgdHJhbnNmZXIgb2YgdG9rZW5zCiAgICAgICAgQ29tcGFueVRva2VuUHVzaGVkKGJlbmVmaWNpYXJ5LCBhbW91bnQpOwogICAgICAgIFRyYW5zZmVyKHdhbGxldCwgYmVuZWZpY2lhcnksIGFtb3VudCk7CiAgICB9CiAgICAKICAgIC8vICBAZGV2IEJ1cm5zIHRva2VucyBmcm9tIHNhbGUgcG9vbCByZW1haW5pbmcgYWZ0ZXIgdGhlIHNhbGUKICAgIGZ1bmN0aW9uIGZpbmFsaXplKCkgcHVibGljIG9ubHlPd25lciAKICAgIHsKICAgICAgICAvLyAgQ2FuIG9ubHkgZmluYWxpemUgYWZ0ZXIgYWZ0ZXIgc2FsZSBpcyBjb21wbGV0ZWQKICAgICAgICByZXF1aXJlKGdldEN1cnJlbnRUaW1lc3RhbXAoKSA+IGVuZERhdGUpOwoKICAgICAgICAvLyAgU2V0IGZpbmFsaXplZAogICAgICAgIGZpbmFsaXplZCA9IHRydWU7CgogICAgICAgIC8vIEJ1cm4gdG9rZW5zIHJlbWFpbmluZwogICAgICAgIEJ1cm4oMHhiMSwgYmFsYW5jZU9mWzB4YjFdKTsKICAgICAgICB0b3RhbENvaW5TdXBwbHkgPSB0b3RhbENvaW5TdXBwbHkuc3ViKGJhbGFuY2VPZlsweGIxXSk7CiAgICAgICAgCiAgICAgICAgLy8gIExvZyB0cmFuc2ZlciB0byBidXJuIGFkZHJlc3MKICAgICAgICBUcmFuc2ZlcigweGIxLCAweDAsIGJhbGFuY2VPZlsweGIxXSk7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZU9mWzB4YjFdID0gMDsKICAgIH0KCiAgICAvLyAgQGRldiBjaGVjayB0byBzZWUgaWYgdGhlIHNhbGUgcGVyaW9kIGlzIGFjdGl2ZQogICAgLy8gIEByZXR1cm4gdHJ1ZSBpZiBzYWxlIGFjdGl2ZSwgZmFsc2Ugb3RoZXJ3aXNlCiAgICBmdW5jdGlvbiBzYWxlQWN0aXZlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIAogICAgewogICAgICAgIC8vICBBYmlsaXR5IHRvIHB1cmNoYXNlIGhhcyBiZWd1biBmb3IgdGhpcyBwdXJjaGFzZXIgd2l0aCBlaXRoZXIgMiAKICAgICAgICAvLyAgY29uZGl0aW9uczogU2FsZSBoYXMgc3RhcnRlZCAKICAgICAgICAvLyAgT3IgcHVyY2hhc2VyIGhhcyBiZWVuIHdoaXRlbGlzdGVkIHRvIHB1cmNoYXNlIHRva2VucyBiZWZvcmUgVGhlIHN0YXJ0IGRhdGUKICAgICAgICAvLyAgYW5kIHRoZSB3aGl0ZWxpc3REYXRlIGlzIGFjdGl2ZQogICAgICAgIGJvb2wgY2hlY2tTYWxlQmVndW4gPSAod2hpdGVsaXN0W21zZy5zZW5kZXJdICYmIAogICAgICAgICAgICBnZXRDdXJyZW50VGltZXN0YW1wKCkgPj0gKHN0YXJ0RGF0ZS5zdWIoMiBkYXlzKSkpIHx8IAogICAgICAgICAgICAgICAgZ2V0Q3VycmVudFRpbWVzdGFtcCgpID49IHN0YXJ0RGF0ZTsKICAgICAgICAKICAgICAgICAvLyAgU2FsZSBvZiB0b2tlbnMgY2FuIG5vdCBoYXBwZW4gYWZ0ZXIgdGhlIGljbyBkYXRlIG9yIHdpdGggbm8KICAgICAgICAvLyAgc3VwcGx5IGluIGFueSBjYXNlCiAgICAgICAgYm9vbCBjYW5QdXJjaGFzZSA9IGNoZWNrU2FsZUJlZ3VuICYmIAogICAgICAgICAgICBnZXRDdXJyZW50VGltZXN0YW1wKCkgPCBlbmREYXRlICYmCiAgICAgICAgICAgIHN1cHBseSgpID4gMDsKICAgICAgICAgICAgCiAgICAgICAgcmV0dXJuKGNhblB1cmNoYXNlKTsKICAgIH0KfQ=='.
	

]
