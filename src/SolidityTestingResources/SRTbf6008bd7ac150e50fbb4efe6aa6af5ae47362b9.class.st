Class {
	#name : #SRTbf6008bd7ac150e50fbb4efe6aa6af5ae47362b9,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbf6008bd7ac150e50fbb4efe6aa6af5ae47362b9 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBFUkMyMEludGVyZmFjZSB7CiAgICAvLyBHZXQgdGhlIHRvdGFsIHRva2VuIHN1cHBseQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKIAogICAgLy8gR2V0IHRoZSBhY2NvdW50IGJhbGFuY2Ugb2YgYW5vdGhlciBhY2NvdW50IHdpdGggYWRkcmVzcyBfb3duZXIKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKIAogICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyB0byBhZGRyZXNzIF90bwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogCiAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKIAogICAgLy8gQWxsb3cgX3NwZW5kZXIgdG8gd2l0aGRyYXcgZnJvbSB5b3VyIGFjY291bnQsIG11bHRpcGxlIHRpbWVzLCB1cCB0byB0aGUgX3ZhbHVlIGFtb3VudC4KICAgIC8vIElmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGFnYWluIGl0IG92ZXJ3cml0ZXMgdGhlIGN1cnJlbnQgYWxsb3dhbmNlIHdpdGggX3ZhbHVlLgogICAgLy8gdGhpcyBmdW5jdGlvbiBpcyByZXF1aXJlZCBmb3Igc29tZSBERVggZnVuY3Rpb25hbGl0eQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKIAogICAgLy8gUmV0dXJucyB0aGUgYW1vdW50IHdoaWNoIF9zcGVuZGVyIGlzIHN0aWxsIGFsbG93ZWQgdG8gd2l0aGRyYXcgZnJvbSBfb3duZXIKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwogCiAgICAvLyBUcmlnZ2VyZWQgd2hlbiB0b2tlbnMgYXJlIHRyYW5zZmVycmVkLgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAKICAgIC8vIFRyaWdnZXJlZCB3aGVuZXZlciBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBpcyBjYWxsZWQuCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQogCmNvbnRyYWN0IERhdENvaW4gaXMgRVJDMjBJbnRlcmZhY2UgewogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gNTsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkRUQyI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiRGF0Q29pbiI7CgogICAgdWludCBwdWJsaWMgX3RvdGFsU3VwcGx5ID0gMTAgKiogMTQ7CiAgICB1aW50IHB1YmxpYyBfb3JpZ2luYWxCdXlQcmljZSA9IDEwICoqIDEwOwogICAgdWludCBwdWJsaWMgX21pbmltdW1CdXlBbW91bnQgPSAxMCAqKiAxNzsKICAgIHVpbnQgcHVibGljIF90aHJlc2hvbGRPbmUgPSA5ICogKDEwICoqIDEzKTsKICAgIHVpbnQgcHVibGljIF90aHJlc2hvbGRUd28gPSA4NSAqICgxMCAqKiAxMik7CiAgIAogICAgLy8gT3duZXIgb2YgdGhpcyBjb250cmFjdAogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAKICAgIC8vIEJhbGFuY2VzIGZvciBlYWNoIGFjY291bnQKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKIAogICAgLy8gT3duZXIgb2YgYWNjb3VudCBhcHByb3ZlcyB0aGUgdHJhbnNmZXIgb2YgYW4gYW1vdW50IHRvIGFub3RoZXIgYWNjb3VudAogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgLy8gRnVuY3Rpb25zIHdpdGggdGhpcyBtb2RpZmllciBjYW4gb25seSBiZSBleGVjdXRlZCBieSB0aGUgb3duZXIKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciB0aHJlc2hvbGRUd28oKSB7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA8IF9taW5pbXVtQnV5QW1vdW50IHx8IGJhbGFuY2VzW293bmVyXSA8PSBfdGhyZXNob2xkVHdvKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQogCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gRGF0Q29pbigpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gX3RvdGFsU3VwcGx5OwogICAgfQogCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gX3RvdGFsU3VwcGx5OwogICAgfQogCiAgICAvLyBXaGF0IGlzIHRoZSBiYWxhbmNlIG9mIGEgcGFydGljdWxhciBhY2NvdW50PwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CiAKICAgIC8vIFRyYW5zZmVyIHRoZSBiYWxhbmNlIGZyb20gc2VuZGVyJ3MgYWNjb3VudCB0byBhbm90aGVyIGFjY291bnQKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX2Ftb3VudAogICAgICAgICAgICAmJiBfYW1vdW50ID4gMAogICAgICAgICAgICAmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX2Ftb3VudDsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfYW1vdW50OwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQogCiAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogICAgLy8gVGhlIHRyYW5zZmVyRnJvbSBtZXRob2QgaXMgdXNlZCBmb3IgYSB3aXRoZHJhdyB3b3JrZmxvdywgYWxsb3dpbmcgY29udHJhY3RzIHRvIHNlbmQKICAgIC8vIHRva2VucyBvbiB5b3VyIGJlaGFsZiwgZm9yIGV4YW1wbGUgdG8gImRlcG9zaXQiIHRvIGEgY29udHJhY3QgYWRkcmVzcyBhbmQvb3IgdG8gY2hhcmdlCiAgICAvLyBmZWVzIGluIHN1Yi1jdXJyZW5jaWVzOyB0aGUgY29tbWFuZCBzaG91bGQgZmFpbCB1bmxlc3MgdGhlIF9mcm9tIGFjY291bnQgaGFzCiAgICAvLyBkZWxpYmVyYXRlbHkgYXV0aG9yaXplZCB0aGUgc2VuZGVyIG9mIHRoZSBtZXNzYWdlIHZpYSBzb21lIG1lY2hhbmlzbTsgd2UgcHJvcG9zZQogICAgLy8gdGhlc2Ugc3RhbmRhcmRpemVkIEFQSXMgZm9yIGFwcHJvdmFsOgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKAogICAgICAgIGFkZHJlc3MgX2Zyb20sCiAgICAgICAgYWRkcmVzcyBfdG8sCiAgICAgICAgdWludDI1NiBfYW1vdW50CiAgICApIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF9hbW91bnQKICAgICAgICAgICAgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudAogICAgICAgICAgICAmJiBfYW1vdW50ID4gMAogICAgICAgICAgICAmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF9hbW91bnQ7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX2Ftb3VudDsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CiAKICAgIC8vIEFsbG93IF9zcGVuZGVyIHRvIHdpdGhkcmF3IGZyb20geW91ciBhY2NvdW50LCBtdWx0aXBsZSB0aW1lcywgdXAgdG8gdGhlIF92YWx1ZSBhbW91bnQuCiAgICAvLyBJZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhZ2FpbiBpdCBvdmVyd3JpdGVzIHRoZSBjdXJyZW50IGFsbG93YW5jZSB3aXRoIF92YWx1ZS4KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfYW1vdW50OwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KIAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CiAgICAKICAgIC8vIEJ1eSBEYXRDb2luIGJ5IHNlbmRpbmcgRXRoZXIKICAgIGZ1bmN0aW9uIGJ1eSgpIHBheWFibGUgdGhyZXNob2xkVHdvIHJldHVybnMgKHVpbnQyNTYgYW1vdW50KSB7CiAgICAgICAgdWludCB2YWx1ZSA9IG1zZy52YWx1ZTsKICAgICAgICBhbW91bnQgPSB2YWx1ZSAvIF9vcmlnaW5hbEJ1eVByaWNlOwogICAgICAgIAogICAgICAgIGlmIChiYWxhbmNlc1tvd25lcl0gPD0gX3RocmVzaG9sZE9uZSArIGFtb3VudCkgewogICAgICAgICAgICB1aW50IHRlbXAgPSAwOwogICAgICAgICAgICBpZiAoYmFsYW5jZXNbb3duZXJdID4gX3RocmVzaG9sZE9uZSkKICAgICAgICAgICAgICAgIHRlbXAgPSBiYWxhbmNlc1tvd25lcl0gLSBfdGhyZXNob2xkT25lOwogICAgICAgICAgICBhbW91bnQgPSB0ZW1wICsgKGFtb3VudCAtIHRlbXApICogMTAgLyAxMzsKICAgICAgICAgICAgaWYgKGJhbGFuY2VzW293bmVyXSA8IGFtb3VudCkgewogICAgICAgICAgICAgICAgdGVtcCA9IChhbW91bnQgLSBiYWxhbmNlc1tvd25lcl0pICogKF9vcmlnaW5hbEJ1eVByaWNlICogMTMgLyAxMCk7CiAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHRlbXApOwogICAgICAgICAgICAgICAgYW1vdW50ID0gYmFsYW5jZXNbb3duZXJdOwogICAgICAgICAgICAgICAgdmFsdWUgLT0gdGVtcDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgb3duZXIudHJhbnNmZXIodmFsdWUpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IGFtb3VudDsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gLT0gYW1vdW50OwogICAgICAgIFRyYW5zZmVyKG93bmVyLCBtc2cuc2VuZGVyLCBhbW91bnQpOwogICAgICAgIHJldHVybiBhbW91bnQ7CiAgICB9CiAgICAKICAgIC8vIE93bmVyIHdpdGhkcmF3cyBFdGhlciBpbiBjb250cmFjdAogICAgZnVuY3Rpb24gd2l0aGRyYXcoKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBvd25lci5zZW5kKHRoaXMuYmFsYW5jZSk7CiAgICB9Cn0KCi8vLyBAdGl0bGUgTXVsdGlzaWduYXR1cmUgd2FsbGV0IC0gQWxsb3dzIG11bHRpcGxlIHBhcnRpZXMgdG8gYWdyZWUgb24gdHJhbnNhY3Rpb25zIGJlZm9yZSBleGVjdXRpb24uCi8vLyBAYXV0aG9yIFN0ZWZhbiBHZW9yZ2UgLSA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI2MDEzMTQwNTA2MDEwZTRlMDcwNTBmMTIwNzA1MjAwMzBmMGUxMzA1MGUxMzE5MTM0ZTBlMDUxNCI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+CmNvbnRyYWN0IE11bHRpU2lnV2FsbGV0IHsKCiAgICBldmVudCBDb25maXJtYXRpb24oYWRkcmVzcyBzZW5kZXIsIGJ5dGVzMzIgdHJhbnNhY3Rpb25IYXNoKTsKICAgIGV2ZW50IFJldm9jYXRpb24oYWRkcmVzcyBzZW5kZXIsIGJ5dGVzMzIgdHJhbnNhY3Rpb25IYXNoKTsKICAgIGV2ZW50IFN1Ym1pc3Npb24oYnl0ZXMzMiB0cmFuc2FjdGlvbkhhc2gpOwogICAgZXZlbnQgRXhlY3V0aW9uKGJ5dGVzMzIgdHJhbnNhY3Rpb25IYXNoKTsKICAgIGV2ZW50IERlcG9zaXQoYWRkcmVzcyBzZW5kZXIsIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgT3duZXJBZGRpdGlvbihhZGRyZXNzIG93bmVyKTsKICAgIGV2ZW50IE93bmVyUmVtb3ZhbChhZGRyZXNzIG93bmVyKTsKICAgIGV2ZW50IFJlcXVpcmVkVXBkYXRlKHVpbnQgcmVxdWlyZWQpOwogICAgZXZlbnQgQ29pbkNyZWF0aW9uKGFkZHJlc3MgY29pbik7CgogICAgbWFwcGluZyAoYnl0ZXMzMiA9PiBUcmFuc2FjdGlvbikgcHVibGljIHRyYW5zYWN0aW9uczsKICAgIG1hcHBpbmcgKGJ5dGVzMzIgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSkgcHVibGljIGNvbmZpcm1hdGlvbnM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBpc093bmVyOwogICAgYWRkcmVzc1tdIG93bmVyczsKICAgIGJ5dGVzMzJbXSB0cmFuc2FjdGlvbkxpc3Q7CiAgICB1aW50IHB1YmxpYyByZXF1aXJlZDsKCiAgICBzdHJ1Y3QgVHJhbnNhY3Rpb24gewogICAgICAgIGFkZHJlc3MgZGVzdGluYXRpb247CiAgICAgICAgdWludCB2YWx1ZTsKICAgICAgICBieXRlcyBkYXRhOwogICAgICAgIHVpbnQgbm9uY2U7CiAgICAgICAgYm9vbCBleGVjdXRlZDsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5V2FsbGV0KCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGFkZHJlc3ModGhpcykpCiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgc2lnbmF0dXJlc0Zyb21Pd25lcnMoYnl0ZXMzMiB0cmFuc2FjdGlvbkhhc2gsIHVpbnQ4W10gdiwgYnl0ZXMzMltdIHJzKSB7CiAgICAgICAgZm9yICh1aW50IGk9MDsgaTx2Lmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoIWlzT3duZXJbZWNyZWNvdmVyKHRyYW5zYWN0aW9uSGFzaCwgdltpXSwgcnNbaV0sIHJzW3YubGVuZ3RoICsgaV0pXSkKICAgICAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb3duZXJEb2VzTm90RXhpc3QoYWRkcmVzcyBvd25lcikgewogICAgICAgIGlmIChpc093bmVyW293bmVyXSkKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvd25lckV4aXN0cyhhZGRyZXNzIG93bmVyKSB7CiAgICAgICAgaWYgKCFpc093bmVyW293bmVyXSkKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBjb25maXJtZWQoYnl0ZXMzMiB0cmFuc2FjdGlvbkhhc2gsIGFkZHJlc3Mgb3duZXIpIHsKICAgICAgICBpZiAoIWNvbmZpcm1hdGlvbnNbdHJhbnNhY3Rpb25IYXNoXVtvd25lcl0pCiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbm90Q29uZmlybWVkKGJ5dGVzMzIgdHJhbnNhY3Rpb25IYXNoLCBhZGRyZXNzIG93bmVyKSB7CiAgICAgICAgaWYgKGNvbmZpcm1hdGlvbnNbdHJhbnNhY3Rpb25IYXNoXVtvd25lcl0pCiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbm90RXhlY3V0ZWQoYnl0ZXMzMiB0cmFuc2FjdGlvbkhhc2gpIHsKICAgICAgICBpZiAodHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uSGFzaF0uZXhlY3V0ZWQpCiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbm90TnVsbChhZGRyZXNzIGRlc3RpbmF0aW9uKSB7CiAgICAgICAgaWYgKGRlc3RpbmF0aW9uID09IDApCiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgdmFsaWRSZXF1aXJlZCh1aW50IF9vd25lckNvdW50LCB1aW50IF9yZXF1aXJlZCkgewogICAgICAgIGlmICggICBfcmVxdWlyZWQgPiBfb3duZXJDb3VudAogICAgICAgICAgICB8fCBfcmVxdWlyZWQgPT0gMAogICAgICAgICAgICB8fCBfb3duZXJDb3VudCA9PSAwKQogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZE93bmVyKGFkZHJlc3Mgb3duZXIpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBvbmx5V2FsbGV0CiAgICAgICAgb3duZXJEb2VzTm90RXhpc3Qob3duZXIpCiAgICB7CiAgICAgICAgaXNPd25lcltvd25lcl0gPSB0cnVlOwogICAgICAgIG93bmVycy5wdXNoKG93bmVyKTsKICAgICAgICBPd25lckFkZGl0aW9uKG93bmVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVPd25lcihhZGRyZXNzIG93bmVyKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgb25seVdhbGxldAogICAgICAgIG93bmVyRXhpc3RzKG93bmVyKQogICAgewogICAgICAgIGlzT3duZXJbb3duZXJdID0gZmFsc2U7CiAgICAgICAgZm9yICh1aW50IGk9MDsgaTxvd25lcnMubGVuZ3RoIC0gMTsgaSsrKQogICAgICAgICAgICBpZiAob3duZXJzW2ldID09IG93bmVyKSB7CiAgICAgICAgICAgICAgICBvd25lcnNbaV0gPSBvd25lcnNbb3duZXJzLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICBvd25lcnMubGVuZ3RoIC09IDE7CiAgICAgICAgaWYgKHJlcXVpcmVkID4gb3duZXJzLmxlbmd0aCkKICAgICAgICAgICAgdXBkYXRlUmVxdWlyZWQob3duZXJzLmxlbmd0aCk7CiAgICAgICAgT3duZXJSZW1vdmFsKG93bmVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVSZXF1aXJlZCh1aW50IF9yZXF1aXJlZCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5V2FsbGV0CiAgICAgICAgdmFsaWRSZXF1aXJlZChvd25lcnMubGVuZ3RoLCBfcmVxdWlyZWQpCiAgICB7CiAgICAgICAgcmVxdWlyZWQgPSBfcmVxdWlyZWQ7CiAgICAgICAgUmVxdWlyZWRVcGRhdGUoX3JlcXVpcmVkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRUcmFuc2FjdGlvbihhZGRyZXNzIGRlc3RpbmF0aW9uLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhLCB1aW50IG5vbmNlKQogICAgICAgIHByaXZhdGUKICAgICAgICBub3ROdWxsKGRlc3RpbmF0aW9uKQogICAgICAgIHJldHVybnMgKGJ5dGVzMzIgdHJhbnNhY3Rpb25IYXNoKQogICAgewogICAgICAgIHRyYW5zYWN0aW9uSGFzaCA9IHNoYTMoZGVzdGluYXRpb24sIHZhbHVlLCBkYXRhLCBub25jZSk7CiAgICAgICAgaWYgKHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbkhhc2hdLmRlc3RpbmF0aW9uID09IDApIHsKICAgICAgICAgICAgdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uSGFzaF0gPSBUcmFuc2FjdGlvbih7CiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogZGVzdGluYXRpb24sCiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgbm9uY2U6IG5vbmNlLAogICAgICAgICAgICAgICAgZXhlY3V0ZWQ6IGZhbHNlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0cmFuc2FjdGlvbkxpc3QucHVzaCh0cmFuc2FjdGlvbkhhc2gpOwogICAgICAgICAgICBTdWJtaXNzaW9uKHRyYW5zYWN0aW9uSGFzaCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHN1Ym1pdFRyYW5zYWN0aW9uKGFkZHJlc3MgZGVzdGluYXRpb24sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEsIHVpbnQgbm9uY2UpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBvd25lckV4aXN0cyhtc2cuc2VuZGVyKQogICAgICAgIHJldHVybnMgKGJ5dGVzMzIgdHJhbnNhY3Rpb25IYXNoKQogICAgewogICAgICAgIHRyYW5zYWN0aW9uSGFzaCA9IGFkZFRyYW5zYWN0aW9uKGRlc3RpbmF0aW9uLCB2YWx1ZSwgZGF0YSwgbm9uY2UpOwogICAgICAgIGNvbmZpcm1UcmFuc2FjdGlvbih0cmFuc2FjdGlvbkhhc2gpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Ym1pdFRyYW5zYWN0aW9uV2l0aFNpZ25hdHVyZXMoYWRkcmVzcyBkZXN0aW5hdGlvbiwgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSwgdWludCBub25jZSwgdWludDhbXSB2LCBieXRlczMyW10gcnMpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBvd25lckV4aXN0cyhtc2cuc2VuZGVyKQogICAgICAgIHJldHVybnMgKGJ5dGVzMzIgdHJhbnNhY3Rpb25IYXNoKQogICAgewogICAgICAgIHRyYW5zYWN0aW9uSGFzaCA9IGFkZFRyYW5zYWN0aW9uKGRlc3RpbmF0aW9uLCB2YWx1ZSwgZGF0YSwgbm9uY2UpOwogICAgICAgIGNvbmZpcm1UcmFuc2FjdGlvbldpdGhTaWduYXR1cmVzKHRyYW5zYWN0aW9uSGFzaCwgdiwgcnMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZENvbmZpcm1hdGlvbihieXRlczMyIHRyYW5zYWN0aW9uSGFzaCwgYWRkcmVzcyBvd25lcikKICAgICAgICBwcml2YXRlCiAgICAgICAgbm90Q29uZmlybWVkKHRyYW5zYWN0aW9uSGFzaCwgb3duZXIpCiAgICB7CiAgICAgICAgY29uZmlybWF0aW9uc1t0cmFuc2FjdGlvbkhhc2hdW293bmVyXSA9IHRydWU7CiAgICAgICAgQ29uZmlybWF0aW9uKG93bmVyLCB0cmFuc2FjdGlvbkhhc2gpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbmZpcm1UcmFuc2FjdGlvbihieXRlczMyIHRyYW5zYWN0aW9uSGFzaCkKICAgICAgICBwdWJsaWMKICAgICAgICBvd25lckV4aXN0cyhtc2cuc2VuZGVyKQogICAgewogICAgICAgIGFkZENvbmZpcm1hdGlvbih0cmFuc2FjdGlvbkhhc2gsIG1zZy5zZW5kZXIpOwogICAgICAgIGV4ZWN1dGVUcmFuc2FjdGlvbih0cmFuc2FjdGlvbkhhc2gpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbmZpcm1UcmFuc2FjdGlvbldpdGhTaWduYXR1cmVzKGJ5dGVzMzIgdHJhbnNhY3Rpb25IYXNoLCB1aW50OFtdIHYsIGJ5dGVzMzJbXSBycykKICAgICAgICBwdWJsaWMKICAgICAgICBzaWduYXR1cmVzRnJvbU93bmVycyh0cmFuc2FjdGlvbkhhc2gsIHYsIHJzKQogICAgewogICAgICAgIGZvciAodWludCBpPTA7IGk8di5sZW5ndGg7IGkrKykKICAgICAgICAgICAgYWRkQ29uZmlybWF0aW9uKHRyYW5zYWN0aW9uSGFzaCwgZWNyZWNvdmVyKHRyYW5zYWN0aW9uSGFzaCwgdltpXSwgcnNbaV0sIHJzW2kgKyB2Lmxlbmd0aF0pKTsKICAgICAgICBleGVjdXRlVHJhbnNhY3Rpb24odHJhbnNhY3Rpb25IYXNoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBleGVjdXRlVHJhbnNhY3Rpb24oYnl0ZXMzMiB0cmFuc2FjdGlvbkhhc2gpCiAgICAgICAgcHVibGljCiAgICAgICAgbm90RXhlY3V0ZWQodHJhbnNhY3Rpb25IYXNoKQogICAgewogICAgICAgIGlmIChpc0NvbmZpcm1lZCh0cmFuc2FjdGlvbkhhc2gpKSB7CiAgICAgICAgICAgIFRyYW5zYWN0aW9uIHN0b3JhZ2UgdHhuID0gdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uSGFzaF07IC8vCiAgICAgICAgICAgIHR4bi5leGVjdXRlZCA9IHRydWU7CiAgICAgICAgICAgIGlmICghdHhuLmRlc3RpbmF0aW9uLmNhbGwudmFsdWUodHhuLnZhbHVlKSh0eG4uZGF0YSkpCiAgICAgICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICAgICAgRXhlY3V0aW9uKHRyYW5zYWN0aW9uSGFzaCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJldm9rZUNvbmZpcm1hdGlvbihieXRlczMyIHRyYW5zYWN0aW9uSGFzaCkKICAgICAgICBleHRlcm5hbAogICAgICAgIG93bmVyRXhpc3RzKG1zZy5zZW5kZXIpCiAgICAgICAgY29uZmlybWVkKHRyYW5zYWN0aW9uSGFzaCwgbXNnLnNlbmRlcikKICAgICAgICBub3RFeGVjdXRlZCh0cmFuc2FjdGlvbkhhc2gpCiAgICB7CiAgICAgICAgY29uZmlybWF0aW9uc1t0cmFuc2FjdGlvbkhhc2hdW21zZy5zZW5kZXJdID0gZmFsc2U7CiAgICAgICAgUmV2b2NhdGlvbihtc2cuc2VuZGVyLCB0cmFuc2FjdGlvbkhhc2gpOwogICAgfQoKICAgIGZ1bmN0aW9uIE11bHRpU2lnV2FsbGV0KGFkZHJlc3NbXSBfb3duZXJzLCB1aW50IF9yZXF1aXJlZCkKICAgICAgICB2YWxpZFJlcXVpcmVkKF9vd25lcnMubGVuZ3RoLCBfcmVxdWlyZWQpCiAgICB7CiAgICAgICAgZm9yICh1aW50IGk9MDsgaTxfb3duZXJzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpc093bmVyW19vd25lcnNbaV1dID0gdHJ1ZTsKICAgICAgICBvd25lcnMgPSBfb3duZXJzOwogICAgICAgIHJlcXVpcmVkID0gX3JlcXVpcmVkOwogICAgfQoKICAgIGZ1bmN0aW9uKCkKICAgICAgICBwYXlhYmxlCiAgICB7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA+IDApCiAgICAgICAgICAgIERlcG9zaXQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0NvbmZpcm1lZChieXRlczMyIHRyYW5zYWN0aW9uSGFzaCkKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgdWludCBjb3VudCA9IDA7CiAgICAgICAgZm9yICh1aW50IGk9MDsgaTxvd25lcnMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlmIChjb25maXJtYXRpb25zW3RyYW5zYWN0aW9uSGFzaF1bb3duZXJzW2ldXSkKICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7CiAgICAgICAgICAgIGlmIChjb3VudCA9PSByZXF1aXJlZCkKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbmZpcm1hdGlvbkNvdW50KGJ5dGVzMzIgdHJhbnNhY3Rpb25IYXNoKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50IGNvdW50KQogICAgewogICAgICAgIGZvciAodWludCBpPTA7IGk8b3duZXJzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoY29uZmlybWF0aW9uc1t0cmFuc2FjdGlvbkhhc2hdW293bmVyc1tpXV0pCiAgICAgICAgICAgICAgICBjb3VudCArPSAxOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbHRlclRyYW5zYWN0aW9ucyhib29sIGlzUGVuZGluZykKICAgICAgICBwcml2YXRlCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zIChieXRlczMyW10gX3RyYW5zYWN0aW9uTGlzdCkKICAgIHsKICAgICAgICBieXRlczMyW10gbWVtb3J5IF90cmFuc2FjdGlvbkxpc3RUZW1wID0gbmV3IGJ5dGVzMzJbXSh0cmFuc2FjdGlvbkxpc3QubGVuZ3RoKTsKICAgICAgICB1aW50IGNvdW50ID0gMDsKICAgICAgICBmb3IgKHVpbnQgaT0wOyBpPHRyYW5zYWN0aW9uTGlzdC5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKCAgIGlzUGVuZGluZyAmJiAhdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uTGlzdFtpXV0uZXhlY3V0ZWQKICAgICAgICAgICAgICAgIHx8ICFpc1BlbmRpbmcgJiYgdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uTGlzdFtpXV0uZXhlY3V0ZWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIF90cmFuc2FjdGlvbkxpc3RUZW1wW2NvdW50XSA9IHRyYW5zYWN0aW9uTGlzdFtpXTsKICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7CiAgICAgICAgICAgIH0KICAgICAgICBfdHJhbnNhY3Rpb25MaXN0ID0gbmV3IGJ5dGVzMzJbXShjb3VudCk7CiAgICAgICAgZm9yIChpPTA7IGk8Y291bnQ7IGkrKykKICAgICAgICAgICAgaWYgKF90cmFuc2FjdGlvbkxpc3RUZW1wW2ldID4gMCkKICAgICAgICAgICAgICAgIF90cmFuc2FjdGlvbkxpc3RbaV0gPSBfdHJhbnNhY3Rpb25MaXN0VGVtcFtpXTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQZW5kaW5nVHJhbnNhY3Rpb25zKCkKICAgICAgICBleHRlcm5hbAogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAoYnl0ZXMzMltdKQogICAgewogICAgICAgIHJldHVybiBmaWx0ZXJUcmFuc2FjdGlvbnModHJ1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RXhlY3V0ZWRUcmFuc2FjdGlvbnMoKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zIChieXRlczMyW10pCiAgICB7CiAgICAgICAgcmV0dXJuIGZpbHRlclRyYW5zYWN0aW9ucyhmYWxzZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNyZWF0ZUNvaW4oKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgb25seVdhbGxldAogICAgewogICAgICAgIENvaW5DcmVhdGlvbihuZXcgRGF0Q29pbigpKTsKICAgIH0KfQ=='.
	

]
