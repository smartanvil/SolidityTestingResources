Class {
	#name : #SRTe6c06F67dB6D927289A7F79230e3c6bb6EE29E55,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe6c06F67dB6D927289A7F79230e3c6bb6EE29E55 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBBdXRob3JpemFibGUKICogQGRldiBBbGxvd3MgdG8gYXV0aG9yaXplIGFjY2VzcyB0byBjZXJ0YWluIGZ1bmN0aW9uIGNhbGxzCiAqLwpjb250cmFjdCBBdXRob3JpemFibGUgaXMgT3duYWJsZSB7CgogIGFkZHJlc3NbXSBhdXRob3JpemVyczsKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYXV0aG9yaXplckluZGV4OwoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgdGF0IGlzIG5vdCBhdXRob3JpemVkLgogICAqLwogIG1vZGlmaWVyIG9ubHlBdXRob3JpemVkIHsKICAgIHJlcXVpcmUoaXNBdXRob3JpemVkKG1zZy5zZW5kZXIpKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IENvbnRydWN0b3IgdGhhdCBhdXRob3JpemVzIHRoZSBtc2cuc2VuZGVyLgogICAqLwogIGZ1bmN0aW9uIEF1dGhvcml6YWJsZSgpIHB1YmxpYyB7CiAgICBhdXRob3JpemVycy5sZW5ndGggPSAyOwogICAgYXV0aG9yaXplcnNbMV0gPSBtc2cuc2VuZGVyOwogICAgYXV0aG9yaXplckluZGV4W21zZy5zZW5kZXJdID0gMTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gZ2V0IGEgc3BlY2lmaWMgYXV0aG9yaXplcgogICAqIEBwYXJhbSBfYXV0aG9yaXplckluZGV4IGluZGV4IG9mIHRoZSBhdXRob3JpemVyIHRvIGJlIHJldHJpZXZlZC4KICAgKiBAcmV0dXJuIFRoZSBhZGRyZXNzIG9mIHRoZSBhdXRob3JpemVyLgogICAqLwogIGZ1bmN0aW9uIGdldEF1dGhvcml6ZXIodWludCBfYXV0aG9yaXplckluZGV4KSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpIHsKICAgIHJldHVybiBhZGRyZXNzKGF1dGhvcml6ZXJzW19hdXRob3JpemVySW5kZXggKyAxXSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIGlmIGFuIGFkZHJlc3MgaXMgYXV0aG9yaXplZAogICAqIEBwYXJhbSBfYWRkciB0aGUgYWRkcmVzcyB0byBjaGVjayBpZiBpdCBpcyBhdXRob3JpemVkLgogICAqIEByZXR1cm4gYm9vbGVhbiBmbGFnIGlmIGFkZHJlc3MgaXMgYXV0aG9yaXplZC4KICAgKi8KICBmdW5jdGlvbiBpc0F1dGhvcml6ZWQoYWRkcmVzcyBfYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgcmV0dXJuIGF1dGhvcml6ZXJJbmRleFtfYWRkcl0gPiAwOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBhZGQgYSBuZXcgYXV0aG9yaXplcgogICAqIEBwYXJhbSBfYWRkciB0aGUgYWRkcmVzcyB0byBhZGQgYXMgYSBuZXcgYXV0aG9yaXplci4KICAgKi8KICBmdW5jdGlvbiBhZGRBdXRob3JpemVkKGFkZHJlc3MgX2FkZHIpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICBhdXRob3JpemVySW5kZXhbX2FkZHJdID0gYXV0aG9yaXplcnMubGVuZ3RoOwogICAgYXV0aG9yaXplcnMubGVuZ3RoKys7CiAgICBhdXRob3JpemVyc1thdXRob3JpemVycy5sZW5ndGggLSAxXSA9IF9hZGRyOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgRXhjaGFuZ2VSYXRlCiAqIEBkZXYgQWxsb3dzIHVwZGF0aW5nIGFuZCByZXRyaWV2ZWluZyBvZiBDb252ZXJzaW9uIFJhdGVzIGZvciBCT04gdG9rZW5zCiAqCiAqIEFCSQogKiBbeyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9zeW1ib2wiLCJ0eXBlIjoic3RyaW5nIn0seyJuYW1lIjoiX3JhdGUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6InVwZGF0ZVJhdGUiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYXV0aG9yaXplckluZGV4IiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJnZXRBdXRob3JpemVyIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJkYXRhIiwidHlwZSI6InVpbnQyNTZbXSJ9XSwibmFtZSI6InVwZGF0ZVJhdGVzIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24iLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbeyJuYW1lIjoiX3N5bWJvbCIsInR5cGUiOiJzdHJpbmcifV0sIm5hbWUiOiJnZXRSYXRlIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJvd25lciIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6InZpZXcifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2FkZHIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwibmFtZSI6ImFkZEF1dGhvcml6ZWQiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYnl0ZXMzMiJ9XSwibmFtZSI6InJhdGVzIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJuZXdPd25lciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoidHJhbnNmZXJPd25lcnNoaXAiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYWRkciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiaXNBdXRob3JpemVkIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiYW5vbnltb3VzIjpmYWxzZSwiaW5wdXRzIjpbeyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InRpbWVzdGFtcCIsInR5cGUiOiJ1aW50MjU2In0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InN5bWJvbCIsInR5cGUiOiJieXRlczMyIn0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InJhdGUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6IlJhdGVVcGRhdGVkIiwidHlwZSI6ImV2ZW50In1dCiAqLwpjb250cmFjdCBFeGNoYW5nZVJhdGUgaXMgT3duYWJsZSwgQXV0aG9yaXphYmxlIHsKCiAgZXZlbnQgUmF0ZVVwZGF0ZWQodWludCB0aW1lc3RhbXAsIGJ5dGVzMzIgc3ltYm9sLCB1aW50IHJhdGUpOwoKICBtYXBwaW5nKGJ5dGVzMzIgPT4gdWludCkgcHVibGljIHJhdGVzOwoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB1cGRhdGUgYSBzaW5nbGUgcmF0ZS4KICAgKiBAcGFyYW0gX3N5bWJvbCBUaGUgc3ltYm9sIHRvIGJlIHVwZGF0ZWQuCiAgICogQHBhcmFtIF9yYXRlIHRoZSByYXRlIGZvciB0aGUgc3ltYm9sLgogICAqLwogIGZ1bmN0aW9uIHVwZGF0ZVJhdGUoc3RyaW5nIF9zeW1ib2wsIHVpbnQgX3JhdGUpIHB1YmxpYyBvbmx5QXV0aG9yaXplZCB7CiAgICByYXRlc1trZWNjYWsyNTYoX3N5bWJvbCldID0gX3JhdGU7CiAgICBSYXRlVXBkYXRlZChub3csIGtlY2NhazI1Nihfc3ltYm9sKSwgX3JhdGUpOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdXBkYXRlIG11bHRpcGxlIHJhdGVzLgogICAqIFJhdGUgbmFtZSBzaG91bGQgYmUgaGFzaGVkIGJ5IGtlY2NhazI1NjogaHR0cHM6Ly9lbW4xNzguZ2l0aHViLmlvL29ubGluZS10b29scy9rZWNjYWtfMjU2Lmh0bWwKICAgKiBbCiAgICogICAiMHg5Njk2ZjMzZjE4ZTZjMmM1NzhmZTkxN2RkM2Y1ZTE2MTNjYzBhZGQyNDI5NDI4NDBiNzA5ZjllYzM5MmNmYzQ2IiwxMjM0NTY3LAogICAqICAgIjB4OGY2Yzc1YjE5MjkzYjU3MDMwMzdmNDc1OThkNzJhOTE2NDEyNDllNmVjZWM5MWZhNDk5ZmI2ZDY2YTkyZTg2NyIsNTQzMjEKICAgKiBdCiAgICogQHBhcmFtIGRhdGEgYW4gYXJyYXkgdGhhdCBhbHRlcm5hdGVzIGtlY2NhazI1NiBoYXNoZXMgb2YgdGhlIHN5bWJvbCBhbmQgdGhlIGNvcnJlc3BvbmRpbmcgcmF0ZSAuCiAgICovCiAgZnVuY3Rpb24gdXBkYXRlUmF0ZXModWludFtdIGRhdGEpIHB1YmxpYyBvbmx5QXV0aG9yaXplZCB7CiAgICByZXF1aXJlKGRhdGEubGVuZ3RoICUgMiA9PSAwKTsKICAgIHVpbnQgaSA9IDA7CiAgICB3aGlsZSAoaSA8IGRhdGEubGVuZ3RoIC8gMikgewogICAgICBieXRlczMyIHN5bWJvbCA9IGJ5dGVzMzIoZGF0YVtpICogMl0pOwogICAgICB1aW50IHJhdGUgPSBkYXRhW2kgKiAyICsgMV07CiAgICAgIHJhdGVzW3N5bWJvbF0gPSByYXRlOwogICAgICBSYXRlVXBkYXRlZChub3csIHN5bWJvbCwgcmF0ZSk7CiAgICAgIGkrKzsKICAgIH0KICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBhbnlvbmUgdG8gcmVhZCB0aGUgY3VycmVudCByYXRlLgogICAqIEBwYXJhbSBfc3ltYm9sIHRoZSBzeW1ib2wgdG8gYmUgcmV0cmlldmVkLgogICAqLwogIGZ1bmN0aW9uIGdldFJhdGUoc3RyaW5nIF9zeW1ib2wpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgIHJldHVybiByYXRlc1trZWNjYWsyNTYoX3N5bWJvbCldOwogIH0KCn0KCi8qKgogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWM7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHB1YmxpYzsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSkgcHVibGljOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CgogIC8qKgogICAqIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suCiAgICovCiAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgcmVxdWlyZShtc2cuZGF0YS5sZW5ndGggPj0gc2l6ZSArIDQpOwogICAgXzsKICB9CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKiBAZGV2IEltcGxlbWFudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFydCB0b2tlbi4KICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93OwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVhaGxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcHVibGljIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGFuIGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludCBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgTWludGFibGUgdG9rZW4KICovCmNvbnRyYWN0IE1pbnRhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CiAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseSA9IDA7CgoKICBtb2RpZmllciBjYW5NaW50KCkgewogICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIG1pbnQgdG9rZW5zCiAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgcmVjaWV2ZSB0aGUgbWludGVkIHRva2Vucy4KICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAqIEByZXR1cm4gQSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIGNhbk1pbnQgcmV0dXJucyAoYm9vbCkgewogICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CiAgICBNaW50KF90bywgX2Ftb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gc3RvcCBtaW50aW5nIG5ldyB0b2tlbnMuCiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgIE1pbnRGaW5pc2hlZCgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBNeVRva2VuCiAqIEBkZXYgVGhlIG1haW4gQk9OIHRva2VuIGNvbnRyYWN0CiAqCiAqIEFCSQogKiBbeyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6Im1pbnRpbmdGaW5pc2hlZCIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYm9vbCJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6InZpZXcifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoibmFtZSIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoic3RyaW5nIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfc3BlbmRlciIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX3ZhbHVlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJhcHByb3ZlIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24iLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6InRvdGFsU3VwcGx5Iiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfZnJvbSIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX3RvIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfdmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6InRyYW5zZmVyRnJvbSIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoic3RhcnRUcmFkaW5nIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24iLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6ImRlY2ltYWxzIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W3sibmFtZSI6Il9hdXRob3JpemVySW5kZXgiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6ImdldEF1dGhvcml6ZXIiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImFkZHJlc3MifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24iLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3In0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il90byIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX2Ftb3VudCIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoibWludCIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYm9vbCJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoidHJhZGluZ1N0YXJ0ZWQiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImJvb2wifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24iLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3In0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbeyJuYW1lIjoiX293bmVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJiYWxhbmNlT2YiLCJvdXRwdXRzIjpbeyJuYW1lIjoiYmFsYW5jZSIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoiZmluaXNoTWludGluZyIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYm9vbCJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoib3duZXIiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImFkZHJlc3MifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24iLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3In0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6InN5bWJvbCIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoic3RyaW5nIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfdG8iLCJ0eXBlIjoiYWRkcmVzcyJ9LHsibmFtZSI6Il92YWx1ZSIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoidHJhbnNmZXIiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2FkZHIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwibmFtZSI6ImFkZEF1dGhvcml6ZWQiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfb3duZXIiLCJ0eXBlIjoiYWRkcmVzcyJ9LHsibmFtZSI6Il9zcGVuZGVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJhbGxvd2FuY2UiLCJvdXRwdXRzIjpbeyJuYW1lIjoicmVtYWluaW5nIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24iLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3In0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Im5ld093bmVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJ0cmFuc2Zlck93bmVyc2hpcCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W3sibmFtZSI6Il9hZGRyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJpc0F1dGhvcml6ZWQiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImJvb2wifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24iLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJ0byIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InZhbHVlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJNaW50IiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoiTWludEZpbmlzaGVkIiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJvd25lciIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjp0cnVlLCJuYW1lIjoic3BlbmRlciIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InZhbHVlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJBcHByb3ZhbCIsInR5cGUiOiJldmVudCJ9LHsiYW5vbnltb3VzIjpmYWxzZSwiaW5wdXRzIjpbeyJpbmRleGVkIjp0cnVlLCJuYW1lIjoiZnJvbSIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjp0cnVlLCJuYW1lIjoidG8iLCJ0eXBlIjoiYWRkcmVzcyJ9LHsiaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJ2YWx1ZSIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoiVHJhbnNmZXIiLCJ0eXBlIjoiZXZlbnQifV0KICovCmNvbnRyYWN0IE15VG9rZW4gaXMgTWludGFibGVUb2tlbiwgQXV0aG9yaXphYmxlIHsKCiAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIkJvbnBheSBUb2tlbiI7CiAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiQk9OIjsKICB1aW50IHB1YmxpYyBkZWNpbWFscyA9IDE4OwoKICBib29sIHB1YmxpYyB0cmFkaW5nU3RhcnRlZCA9IGZhbHNlOwoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRoYXQgdGhyb3dzIGlmIHRyYWRpbmcgaGFzIG5vdCBzdGFydGVkIHlldAogICAqLwogIG1vZGlmaWVyIGhhc1N0YXJ0ZWRUcmFkaW5nKCkgewogICAgcmVxdWlyZSh0cmFkaW5nU3RhcnRlZCk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwdWJsaWMgb25seUF1dGhvcml6ZWQgY2FuTWludCByZXR1cm5zIChib29sKSB7CiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgIE1pbnQoX3RvLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBzdG9wIG1pbnRpbmcgbmV3IHRva2Vucy4KICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgcHVibGljIG9ubHlBdXRob3JpemVkIHJldHVybnMgKGJvb2wpIHsKICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICBNaW50RmluaXNoZWQoKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvIGVuYWJsZSB0aGUgdHJhZGluZy4gVGhpcyBjYW4gbm90IGJlIHVuZG9uZQogICAqLwogIGZ1bmN0aW9uIHN0YXJ0VHJhZGluZygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgdHJhZGluZ1N0YXJ0ZWQgPSB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgYW55b25lIHRvIHRyYW5zZmVyIHRoZSBCT04gdG9rZW5zIG9uY2UgdHJhZGluZyBoYXMgc3RhcnRlZAogICAqIEBwYXJhbSBfdG8gdGhlIHJlY2lwaWVudCBhZGRyZXNzIG9mIHRoZSB0b2tlbnMuCiAgICogQHBhcmFtIF92YWx1ZSBudW1iZXIgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQuCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgaGFzU3RhcnRlZFRyYWRpbmcgewogICAgc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFsbG93cyBhbnlvbmUgdG8gdHJhbnNmZXIgdGhlIEJPTiB0b2tlbnMgb25jZSB0cmFkaW5nIGhhcyBzdGFydGVkCiAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAqIEBwYXJhbSBfdmFsdWUgdWludCB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyBoYXNTdGFydGVkVHJhZGluZyB7CiAgICBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9Cgp9CgovKioKICogQHRpdGxlIE1haW5TYWxlCiAqIEBkZXYgVGhlIG1haW4gQk9OIHRva2VuIHNhbGUgY29udHJhY3QKICoKICogQUJJCiAqIFt7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX211bHRpc2lnVmF1bHQiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwibmFtZSI6InNldE11bHRpc2lnVmF1bHQiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYXV0aG9yaXplckluZGV4IiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJnZXRBdXRob3JpemVyIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJleGNoYW5nZVJhdGUiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImFkZHJlc3MifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24iLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3In0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6ImFsdERlcG9zaXRzIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJyZWNpcGllbnQiLCJ0eXBlIjoiYWRkcmVzcyJ9LHsibmFtZSI6InRva2VucyIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoiYXV0aG9yaXplZENyZWF0ZVRva2VucyIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoiZmluaXNoTWludGluZyIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJvd25lciIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6InZpZXcifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2V4Y2hhbmdlUmF0ZSIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoic2V0RXhjaGFuZ2VSYXRlIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24iLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il90b2tlbiIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoicmV0cmlldmVUb2tlbnMiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoidG90YWxBbHREZXBvc2l0cyIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoic2V0QWx0RGVwb3NpdCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJzdGFydCIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoidWludDI1NiJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6InZpZXcifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoicmVjaXBpZW50IiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJjcmVhdGVUb2tlbnMiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6dHJ1ZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoicGF5YWJsZSJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYWRkciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiYWRkQXV0aG9yaXplZCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJtdWx0aXNpZ1ZhdWx0Iiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfaGFyZGNhcCIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoic2V0SGFyZENhcCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJuZXdPd25lciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoidHJhbnNmZXJPd25lcnNoaXAiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX3N0YXJ0IiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJzZXRTdGFydCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJ0b2tlbiIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiIsInN0YXRlTXV0YWJpbGl0eSI6InZpZXcifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYWRkciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiaXNBdXRob3JpemVkIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIiwic3RhdGVNdXRhYmlsaXR5IjoidmlldyJ9LHsiaW5wdXRzIjpbeyJuYW1lIjoiX3Rva2VuIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfZXhjaGFuZ2VSYXRlIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfbXVsdGlzaWdWYXVsdCIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX3N0YXJ0IiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiY29uc3RydWN0b3IiLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIn0seyJwYXlhYmxlIjp0cnVlLCJ0eXBlIjoiZmFsbGJhY2siLCJzdGF0ZU11dGFiaWxpdHkiOiJwYXlhYmxlIn0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoicmVjaXBpZW50IiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoiZXRoZXJfYW1vdW50IiwidHlwZSI6InVpbnQyNTYifSx7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoicGF5X2Ftb3VudCIsInR5cGUiOiJ1aW50MjU2In0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6ImV4Y2hhbmdlcmF0ZSIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoiVG9rZW5Tb2xkIiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoicmVjaXBpZW50IiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoicGF5X2Ftb3VudCIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoiQXV0aG9yaXplZENyZWF0ZSIsInR5cGUiOiJldmVudCJ9LHsiYW5vbnltb3VzIjpmYWxzZSwiaW5wdXRzIjpbXSwibmFtZSI6Ik1haW5TYWxlQ2xvc2VkIiwidHlwZSI6ImV2ZW50In1dCiAqLwpjb250cmFjdCBNYWluU2FsZSBpcyBPd25hYmxlLCBBdXRob3JpemFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogIGV2ZW50IFRva2VuU29sZChhZGRyZXNzIHJlY2lwaWVudCwgdWludCBldGhlcl9hbW91bnQsIHVpbnQgcGF5X2Ftb3VudCwgdWludCBleGNoYW5nZXJhdGUpOwogIGV2ZW50IEF1dGhvcml6ZWRDcmVhdGUoYWRkcmVzcyByZWNpcGllbnQsIHVpbnQgcGF5X2Ftb3VudCk7CiAgZXZlbnQgTWFpblNhbGVDbG9zZWQoKTsKCiAgTXlUb2tlbiBwdWJsaWMgdG9rZW47CgogIGFkZHJlc3MgcHVibGljIG11bHRpc2lnVmF1bHQ7CgogIHVpbnQgaGFyZGNhcCA9IDIwMDAwMCBldGhlcjsKICBFeGNoYW5nZVJhdGUgcHVibGljIGV4Y2hhbmdlUmF0ZTsKCiAgdWludCBwdWJsaWMgYWx0RGVwb3NpdHMgPSAwOwogIHVpbnQgcHVibGljIHN0YXJ0ID0gMDsKCiAgLyoqCiAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyB0b2tlbiBjcmVhdGlvbiBvbmx5IHdoZW4gdGhlIHNhbGUgSVMgT04KICAgKi8KICBtb2RpZmllciBzYWxlSXNPbigpIHsKICAgIHJlcXVpcmUobm93ID4gc3RhcnQgJiYgbm93IDwgc3RhcnQgKyAyOCBkYXlzKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IHRva2VuIGNyZWF0aW9uIG9ubHkgd2hlbiB0aGUgaGFyZGNhcCBoYXMgbm90IGJlZW4gcmVhY2hlZAogICAqLwogIG1vZGlmaWVyIGlzVW5kZXJIYXJkQ2FwKCkgewogICAgcmVxdWlyZShtdWx0aXNpZ1ZhdWx0LmJhbGFuY2UgKyBhbHREZXBvc2l0cyA8PSBoYXJkY2FwKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBNYWluU2FsZShhZGRyZXNzIF90b2tlbiwgYWRkcmVzcyBfZXhjaGFuZ2VSYXRlLCBhZGRyZXNzIF9tdWx0aXNpZ1ZhdWx0LCB1aW50IF9zdGFydCkgcHVibGljIG9ubHlPd25lciB7CiAgICB0b2tlbiA9IE15VG9rZW4oX3Rva2VuKTsKICAgIHNldEV4Y2hhbmdlUmF0ZShfZXhjaGFuZ2VSYXRlKTsKICAgIHNldE11bHRpc2lnVmF1bHQoX211bHRpc2lnVmF1bHQpOwogICAgc2V0U3RhcnQoX3N0YXJ0KTsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIGFueW9uZSB0byBjcmVhdGUgdG9rZW5zIGJ5IGRlcG9zaXRpbmcgZXRoZXIuCiAgICogQHBhcmFtIHJlY2lwaWVudCB0aGUgcmVjaXBpZW50IHRvIHJlY2VpdmUgdG9rZW5zLgogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZVRva2VucyhhZGRyZXNzIHJlY2lwaWVudCkgcHVibGljIGlzVW5kZXJIYXJkQ2FwIHNhbGVJc09uIHBheWFibGUgewogICAgdWludCByYXRlID0gZXhjaGFuZ2VSYXRlLmdldFJhdGUoIkVUSCIpOwogICAgdWludCB0b2tlbnMgPSByYXRlLm11bChtc2cudmFsdWUpLmRpdigxIGV0aGVyKTsKICAgIHRva2VuLm1pbnQocmVjaXBpZW50LCB0b2tlbnMpOwogICAgcmVxdWlyZShtdWx0aXNpZ1ZhdWx0LnNlbmQobXNnLnZhbHVlKSk7CiAgICBUb2tlblNvbGQocmVjaXBpZW50LCBtc2cudmFsdWUsIHRva2VucywgcmF0ZSk7CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdG8gc2V0IHRoZSB0b2FsIGFsdCBkZXBvc2l0IG1lYXN1cmVkIGluIEVUSCB0byBtYWtlIHN1cmUgdGhlIGhhcmRjYXAgaW5jbHVkZXMgb3RoZXIgZGVwb3NpdHMKICAgKiBAcGFyYW0gdG90YWxBbHREZXBvc2l0cyB0b3RhbCBhbW91bnQgRVRIIGVxdWl2YWxlbnQKICAgKi8KICBmdW5jdGlvbiBzZXRBbHREZXBvc2l0KHVpbnQgdG90YWxBbHREZXBvc2l0cykgcHVibGljIG9ubHlBdXRob3JpemVkIHsKICAgIGFsdERlcG9zaXRzID0gdG90YWxBbHREZXBvc2l0czsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIGF1dGhvcml6ZWQgYWNjZXMgdG8gY3JlYXRlIHRva2Vucy4gVGhpcyBpcyB1c2VkIGZvciBCaXRjb2luIGFuZCBFUkMyMCBkZXBvc2l0cwogICAqIEBwYXJhbSByZWNpcGllbnQgdGhlIHJlY2lwaWVudCB0byByZWNlaXZlIHRva2Vucy4KICAgKiBAcGFyYW0gdG9rZW5zIG51bWJlciBvZiB0b2tlbnMgdG8gYmUgY3JlYXRlZC4KICAgKi8KICBmdW5jdGlvbiBhdXRob3JpemVkQ3JlYXRlVG9rZW5zKGFkZHJlc3MgcmVjaXBpZW50LCB1aW50IHRva2VucykgcHVibGljIG9ubHlBdXRob3JpemVkIHsKICAgIHRva2VuLm1pbnQocmVjaXBpZW50LCB0b2tlbnMpOwogICAgQXV0aG9yaXplZENyZWF0ZShyZWNpcGllbnQsIHRva2Vucyk7CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgb3duZXIgdG8gc2V0IHRoZSBoYXJkY2FwLgogICAqIEBwYXJhbSBfaGFyZGNhcCB0aGUgbmV3IGhhcmRjYXAKICAgKi8KICBmdW5jdGlvbiBzZXRIYXJkQ2FwKHVpbnQgX2hhcmRjYXApIHB1YmxpYyBvbmx5T3duZXIgewogICAgaGFyZGNhcCA9IF9oYXJkY2FwOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvIHNldCB0aGUgc3RhcnRpbmcgdGltZS4KICAgKiBAcGFyYW0gX3N0YXJ0IHRoZSBuZXcgX3N0YXJ0CiAgICovCiAgZnVuY3Rpb24gc2V0U3RhcnQodWludCBfc3RhcnQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgc3RhcnQgPSBfc3RhcnQ7CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgb3duZXIgdG8gc2V0IHRoZSBtdWx0aXNpZyBjb250cmFjdC4KICAgKiBAcGFyYW0gX211bHRpc2lnVmF1bHQgdGhlIG11bHRpc2lnIGNvbnRyYWN0IGFkZHJlc3MKICAgKi8KICBmdW5jdGlvbiBzZXRNdWx0aXNpZ1ZhdWx0KGFkZHJlc3MgX211bHRpc2lnVmF1bHQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgaWYgKF9tdWx0aXNpZ1ZhdWx0ICE9IGFkZHJlc3MoMCkpIHsKICAgICAgbXVsdGlzaWdWYXVsdCA9IF9tdWx0aXNpZ1ZhdWx0OwogICAgfQogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvIHNldCB0aGUgZXhjaGFuZ2VyYXRlIGNvbnRyYWN0LgogICAqIEBwYXJhbSBfZXhjaGFuZ2VSYXRlIHRoZSBleGNoYW5nZXJhdGUgYWRkcmVzcwogICAqLwogIGZ1bmN0aW9uIHNldEV4Y2hhbmdlUmF0ZShhZGRyZXNzIF9leGNoYW5nZVJhdGUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgZXhjaGFuZ2VSYXRlID0gRXhjaGFuZ2VSYXRlKF9leGNoYW5nZVJhdGUpOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvIGZpbmlzaCB0aGUgbWludGluZy4gVGhpcyB3aWxsIGNyZWF0ZSB0aGUKICAgKiByZXN0cmljdGVkIHRva2VucyBhbmQgdGhlbiBjbG9zZSB0aGUgbWludGluZy4KICAgKiB0byB0aGlzIG93bmVyLgogICAqLwogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHVpbnQgaXNzdWVkVG9rZW5TdXBwbHkgPSB0b2tlbi50b3RhbFN1cHBseSgpOwogICAgdWludCByZXN0cmljdGVkVG9rZW5zID0gaXNzdWVkVG9rZW5TdXBwbHkubXVsKDQ5KS5kaXYoNTEpOwogICAgdG9rZW4ubWludChtdWx0aXNpZ1ZhdWx0LCByZXN0cmljdGVkVG9rZW5zKTsKICAgIHRva2VuLmZpbmlzaE1pbnRpbmcoKTsKICAgIE1haW5TYWxlQ2xvc2VkKCk7CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgb3duZXIgdG8gdHJhbnNmZXIgRVJDMjAgdG9rZW5zIHRvIHRoZSBtdWx0aSBzaWcgdmF1bHQKICAgKiBAcGFyYW0gX3Rva2VuIHRoZSBjb250cmFjdCBhZGRyZXNzIG9mIHRoZSBFUkMyMCBjb250cmFjdAogICAqLwogIGZ1bmN0aW9uIHJldHJpZXZlVG9rZW5zKGFkZHJlc3MgX3Rva2VuKSBwdWJsaWMgb25seUF1dGhvcml6ZWQgewogICAgRVJDMjAgb3RoZXJ0b2tlbiA9IEVSQzIwKF90b2tlbik7CiAgICBvdGhlcnRva2VuLnRyYW5zZmVyKG11bHRpc2lnVmF1bHQsIG90aGVydG9rZW4uYmFsYW5jZU9mKHRoaXMpKTsKICB9CgogIC8qKgogICAqIEBkZXYgRmFsbGJhY2sgZnVuY3Rpb24gd2hpY2ggcmVjZWl2ZXMgZXRoZXIgYW5kIGNyZWF0ZWQgdGhlIGFwcHJvcHJpYXRlIG51bWJlciBvZiB0b2tlbnMgZm9yIHRoZSAKICAgKiBtc2cuc2VuZGVyLgogICAqLwogIGZ1bmN0aW9uKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICBjcmVhdGVUb2tlbnMobXNnLnNlbmRlcik7CiAgfQoKfQ=='.
	

]
