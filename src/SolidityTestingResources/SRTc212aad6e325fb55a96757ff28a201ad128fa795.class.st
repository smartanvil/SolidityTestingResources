Class {
	#name : #SRTc212aad6e325fb55a96757ff28a201ad128fa795,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc212aad6e325fb55a96757ff28a201ad128fa795 >> base64 [
	^ 'LyoqCkNvbnRyYWN0IGludGVyZmFjZToKLSBTdGFuZGFycyBFUkMyMCBtZXRob2RzOiBiYWxhbmNlT2YsIHRvdGFsU3VwcGx5LCB0cmFuc2ZlciwgdHJhbnNmZXJGcm9tLCBhcHByb3ZlLCBhbGxvd2FuY2UKLSBGdW5jdGlvbiBpc3N1ZSwgYXJndW1lbnQgYW1vdW50CiAgICBpc3N1ZSBuZXcgYW1vdW50IGNvaW5zIHRvIHRvdGFsU3VwcGx5Ci0gRnVuY3Rpb24gZGVzdHJveSwgYXJndW1lbnQgYW1vdW50CiAgICByZW1vdmUgYW1vdW50IGNvaW5zIGZyb20gdG90YWxTdXBwbHkgaWYgYXZhaWxhYmxlIGluIGNvbnRyYWN0CiAgICB1c2VkIG9ubHkgYnkgY29udHJhY3Qgb3duZXIKLSBGdW5jdGlvbiBzZWxsIC0gYXJndW1lbnQgYW1vdW50LCB0bwogICAgVXNlZCBvbmx5IGJ5IGNvbnRyYWN0IG93bmVyCiAgICBTZW5kIGFtb3VudCBjb2lucyB0byBhZGRyZXNzIHRvCi0gRnVuY3Rpb24ga2lsbAogICAgVXNlZCBvbmx5IGJ5IGNvbnRyYWN0IG93bmVyCiAgICBkZXN0cm95IGNhbnRyYWN0CiAgICBDb250cmFjdCBjYW4gYmUgZGVzdHJveWVkIGlmIHRvdGFsU3VwcGx5IGlzIGVtcHR5IGFuZCBhbGwgd2FsbGV0cyBhcmUgZW1wdHkKLSBGdW5jdGlvbiBzZXRUcmFuc2ZlckZlZSBhcmd1bWVudHMgbnVtaW5hdG9yLCBkZW51bWluYXRvcgogICAgVXNlZCBvbmx5IGJ5IGNvbnRyYWN0IG93bmVyCiAgICBzZXQgdHJhbnNmZXIgZmVlIHRvIG51bWluYXRvci9kZW51bWluYXRvcgotIEZ1bmN0aW9uIGNoYW5nZVRyYW5zZmVyRmVlT3duZXIsIGFyZ3VtZW50IGFkZHJlc3MgCiAgICBVc2VkIG9ubHkgYnkgY29udHJhY3Qgb3duZXIKICAgIGNoYW5nZSB0cmFuc2ZlciBmZWVzIHJlY2lwaWVudCB0byBhZGRyZXNzCi0gRnVuY3Rpb24gc2VuZERpdmlkZW5kcywgYXJndW1lbnRzIGFkZHJlc3MsIGFtb3VudAogICAgVXNlZCBvbmx5IGJ5IGNvbnRyYWN0IG93bmVyCiAgICBhZGRyZXNzIC0gRVJDMjAgYWRkcmVzcwogICAgaXNzdWUgZGl2aWRlbmRzIHRvIGludmVzdG9ycyAtIGFtb3VudCBpcyB0b2tlbnMKLSBGdW5jdGlvbiBzZW5kRGl2aWRlbmRzRXRoZXJzCiAgICBVc2VkIG9ubHkgYnkgY29udHJhY3Qgb3duZXIKICAgIGlzc3VlIGV0aGVyIGRpdmlkZW5kcyB0byBpbnZlc3RvcnMKLSBGdW5jdGlvbiBhZGRJbnZlc3RvciwgYXJndW1lbnQgLSBhZGRyZXNzCiAgICBVc2VkIG9ubHkgYnkgY29udHJhY3Qgb3duZXIKICAgIGFkZCBhZGRyZXNzIHRvIGludmVzdG9ycyBsaXN0ICh0byBwYXlpbmcgZGl2aWRlbmRzIGluIGZ1dHVyZSkKLSBGdW5jdGlvbiByZW1vdmVJbnZlc3RvciwgYXJndW1lbnQgLSBhZGRyZXNzCiAgICBVc2VkIG9ubHkgYnkgY29udHJhY3Qgb3duZXIKICAgIHJlbW92ZSBhZGRyZXNzIGZyb20gaW52ZXN0b3JzIGxpc3QgKHRvIG5vdCBwYXkgZGl2aWRlbmRzIGluIGZ1dHVyZSkKLSBGdW5jdGlvbiBnZXREaXZpZGVuZHMKICAgIFVzZWQgYnkgaW52ZXN0b3IgdG8gYWN0dWFsIHJlY2VpdmUgZGl2aWRlbmQgY29pbnMKLSBGdW5jdGlvbiBjaGFuZ2VSYXRlLCBhcmd1bWVudCBuZXdfcmF0ZQogICAgQ2hhbmdlIGNvaW4vZXRoIHJhdGUgZm9yIGF1dG9zZWxsCi0gRnVuY3Rpb24gY2hhbmdlTWluaW1hbFdlaSwgYXJndW1lbnQgbmV3X3dlaQogICAgVXNlZCBvbmx5IGJ5IGNvbnRyYWN0IG93bmVyCiAgICBDaGFuZ2UgbWluaW1hbCB3ZWkgYW1vdW50IHRvIHNlbGwgY29pbnMgd2l0IGF1dG9zZWxsCiovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgovL2NvbnRyYWN0IFBEVCBpcyBQRFQgewpjb250cmFjdCBQRFQgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgLy8gdG90YWxTdXBwbHkgaXMgemVybyBieSBkZWZhdWx0LCBvd25lciBjYW4gaXNzdWUgYW5kIGRlc3Ryb3kgY29pbnMgYW55IGFtb3VudCBhbnkgdGltZQogICAgdWludCBjb25zdGFudCB0b3RhbFN1cHBseURlZmF1bHQgPSAwOwoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlBEVCI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiUHJpbWUgRG9ub3IgVG9rZW4iOwogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gNTsKCiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseSA9IDA7CgogICAgLy8gbWluaW11bSBmZWUgaXMgMC4wMDAwMQogICAgdWludDMyIHB1YmxpYyBjb25zdGFudCBtaW5GZWUgPSAxOwogICAgLy8gdHJhbnNmZXIgZmVlIGRlZmF1bHQgPSAwLjE3JSAoMC4wMDE3KQogICAgdWludDMyIHB1YmxpYyB0cmFuc2ZlckZlZU51bSA9IDE3OwogICAgdWludDMyIHB1YmxpYyB0cmFuc2ZlckZlZURlbnVtID0gMTAwMDA7CgogICAgdWludDMyIHB1YmxpYyBjb25zdGFudCBtaW5UcmFuc2ZlciA9IDEwOwoKICAgIC8vIGNvaW4gZXhjaGFuZ2UgcmF0ZSB0byBldGggZm9yIGF1dG9tYXRpYyBzZWxsCiAgICB1aW50MjU2IHB1YmxpYyByYXRlID0gMTAwMDsKCiAgICAvLyBtaW5pbXVtIGV0aGVyIGFtb3VudCB0byBidXkKICAgIHVpbnQyNTYgcHVibGljIG1pbmltYWxXZWkgPSAxIGZpbm5leTsKCiAgICAvLyB3ZWkgcmFpc2VkIGluIGF1dG9tYXRpYyBzYWxlCiAgICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWQ7CgogICAgLy91aW50MjU2IHB1YmxpYyBwYXllZERpdmlkZW5kczsKICAgIC8vdWludDI1NiBwdWJsaWMgZGl2aWRlbmRzOwogICAgYWRkcmVzc1tdIHRva2VuczsKCiAgICAvLyBPd25lciBvZiB0aGlzIGNvbnRyYWN0CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KICAgIGFkZHJlc3MgcHVibGljIHRyYW5zZmVyRmVlT3duZXI7CgogICAgZnVuY3Rpb24gbm90T3duZXIoYWRkcmVzcyBhZGRyKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gYWRkciAhPSBhZGRyZXNzKHRoaXMpICYmIGFkZHIgIT0gb3duZXIgJiYgYWRkciAhPSB0cmFuc2ZlckZlZU93bmVyOwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGRpdmlkZW5kcyByZWxhdGVkIGRlZmluaXRpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBpbnZlc3RvcnMgd2hpdGUgbGlzdAogICAgLy8gZGl2aWRlbmRzIGNhbiBiZSBzZW5kIG9ubHkgaW52ZXN0b3JzIGZyb20gbGlzdAogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBpbnZlc3RvcnM7CgogICAgLy8gbWluaW1hbCBjb2luIGJhbGFuY2UgdG8gcGF5IGRpdmlkZW5kcwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgaW52ZXN0b3JNaW5pbWFsQmFsYW5jZSA9IHVpbnQyNTYoMTAwMDApKih1aW50MjU2KDEwKSoqZGVjaW1hbHMpOwoKICAgIHVpbnQyNTYgcHVibGljIGludmVzdG9yc1RvdGFsU3VwcGx5OwoKICAgIHVpbnQgY29uc3RhbnQgTVVMVElQTElFUiA9IDEwZTE4OwoKICAgIC8vIGRpdmlkZW5kcyBmb3IgY3VzdG9tIGNvaW5zCiAgICBtYXBwaW5nKGFkZHJlc3M9Pm1hcHBpbmcoYWRkcmVzcz0+dWludDI1NikpIGxhc3REaXZpZGVuZHM7CiAgICBtYXBwaW5nKGFkZHJlc3M9PnVpbnQyNTYpIHRvdGFsRGl2aWRlbmRzUGVyQ29pbjsKCiAgICAvLyBkaXZpZGVuZHMgZm9yIGN1c3RvbSBldGhlcnMKICAgIG1hcHBpbmcoYWRkcmVzcz0+dWludDI1NikgbGFzdEV0aGVyczsKICAgIHVpbnQyNTYgZGl2RXRoZXJzOwoKLyoKICAgIGZ1bmN0aW9uIGJhbGFuY2VFbm91Z2godWludDI1NiBhbW91bnQpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1t0aGlzXSA+PSBkaXZpZGVuZHMgJiYgYmFsYW5jZXNbdGhpc10gLSBkaXZpZGVuZHMgPj0gYW1vdW50OwogICAgfQogICAgKi8KCiAgICBmdW5jdGlvbiBhY3RpdmF0ZURpdmlkZW5kc0NvaW5zKGFkZHJlc3MgYWNjb3VudCkgaW50ZXJuYWwgewogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSB0b2tlbnNbaV07CiAgICAgICAgICAgIGlmICh0b3RhbERpdmlkZW5kc1BlckNvaW5bYWRkcl0gIT0gMCAmJiB0b3RhbERpdmlkZW5kc1BlckNvaW5bYWRkcl0gPiBsYXN0RGl2aWRlbmRzW2FkZHJdW2FjY291bnRdKSB7CiAgICAgICAgICAgICAgICBpZiAoaW52ZXN0b3JzW2FjY291bnRdICYmIGJhbGFuY2VzW2FjY291bnRdID49IGludmVzdG9yTWluaW1hbEJhbGFuY2UpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYWN0dWFsID0gdG90YWxEaXZpZGVuZHNQZXJDb2luW2FkZHJdIC0gbGFzdERpdmlkZW5kc1thZGRyXVthY2NvdW50XTsKICAgICAgICAgICAgICAgICAgICB2YXIgZGl2cyA9IChiYWxhbmNlc1thY2NvdW50XSAqIGFjdHVhbCkgLyBNVUxUSVBMSUVSOwogICAgICAgICAgICAgICAgICAgIERlYnVnKGRpdnMsIGFjY291bnQsICJkaXZzIik7CgogICAgICAgICAgICAgICAgICAgIEVSQzIwIHRva2VuID0gRVJDMjAoYWRkcik7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRpdnMgPiAwICYmIHRva2VuLmJhbGFuY2VPZih0aGlzKSA+PSBkaXZzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuLnRyYW5zZmVyKGFjY291bnQsIGRpdnMpOwogICAgICAgICAgICAgICAgICAgICAgICBsYXN0RGl2aWRlbmRzW2FkZHJdW2FjY291bnRdID0gdG90YWxEaXZpZGVuZHNQZXJDb2luW2FkZHJdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxhc3REaXZpZGVuZHNbYWRkcl1bYWNjb3VudF0gPSB0b3RhbERpdmlkZW5kc1BlckNvaW5bYWRkcl07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYWN0aXZhdGVEaXZpZGVuZHNFdGhlcnMoYWRkcmVzcyBhY2NvdW50KSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKGRpdkV0aGVycyAhPSAwICYmIGRpdkV0aGVycyA+IGxhc3RFdGhlcnNbYWNjb3VudF0pIHsKICAgICAgICAgICAgaWYgKGludmVzdG9yc1thY2NvdW50XSAmJiBiYWxhbmNlc1thY2NvdW50XSA+PSBpbnZlc3Rvck1pbmltYWxCYWxhbmNlKSB7CiAgICAgICAgICAgICAgICB2YXIgYWN0dWFsID0gZGl2RXRoZXJzIC0gbGFzdEV0aGVyc1thY2NvdW50XTsKICAgICAgICAgICAgICAgIHZhciBkaXZzID0gKGJhbGFuY2VzW2FjY291bnRdICogYWN0dWFsKSAvIE1VTFRJUExJRVI7CiAgICAgICAgICAgICAgICBEZWJ1ZyhkaXZzLCBhY2NvdW50LCAiZGl2c0V0aGVycyIpOwoKICAgICAgICAgICAgICAgIHJlcXVpcmUoZGl2cyA+IDAgJiYgdGhpcy5iYWxhbmNlID49IGRpdnMpOwogICAgICAgICAgICAgICAgYWNjb3VudC50cmFuc2ZlcihkaXZzKTsKICAgICAgICAgICAgICAgIGxhc3RFdGhlcnNbYWNjb3VudF0gPSBkaXZFdGhlcnM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGFzdEV0aGVyc1thY2NvdW50XSA9IGRpdkV0aGVyczsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYWN0aXZhdGVEaXZpZGVuZHMoYWRkcmVzcyBhY2NvdW50KSBpbnRlcm5hbCB7CiAgICAgICAgYWN0aXZhdGVEaXZpZGVuZHNDb2lucyhhY2NvdW50KTsKICAgICAgICBhY3RpdmF0ZURpdmlkZW5kc0V0aGVycyhhY2NvdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBhY3RpdmF0ZURpdmlkZW5kcyhhZGRyZXNzIGFjY291bnQxLCBhZGRyZXNzIGFjY291bnQyKSBpbnRlcm5hbCB7CiAgICAgICAgYWN0aXZhdGVEaXZpZGVuZHMoYWNjb3VudDEpOwogICAgICAgIGFjdGl2YXRlRGl2aWRlbmRzKGFjY291bnQyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRJbnZlc3RvcihhZGRyZXNzIGludmVzdG9yKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBhY3RpdmF0ZURpdmlkZW5kcyhpbnZlc3Rvcik7CiAgICAgICAgaW52ZXN0b3JzW2ludmVzdG9yXSA9IHRydWU7CiAgICAgICAgaWYgKGJhbGFuY2VzW2ludmVzdG9yXSA+PSBpbnZlc3Rvck1pbmltYWxCYWxhbmNlKSB7CiAgICAgICAgICAgIGludmVzdG9yc1RvdGFsU3VwcGx5ID0gaW52ZXN0b3JzVG90YWxTdXBwbHkuYWRkKGJhbGFuY2VzW2ludmVzdG9yXSk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gcmVtb3ZlSW52ZXN0b3IoYWRkcmVzcyBpbnZlc3RvcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgYWN0aXZhdGVEaXZpZGVuZHMoaW52ZXN0b3IpOwogICAgICAgIGludmVzdG9yc1tpbnZlc3Rvcl0gPSBmYWxzZTsKICAgICAgICBpZiAoYmFsYW5jZXNbaW52ZXN0b3JdID49IGludmVzdG9yTWluaW1hbEJhbGFuY2UpIHsKICAgICAgICAgICAgaW52ZXN0b3JzVG90YWxTdXBwbHkgPSBpbnZlc3RvcnNUb3RhbFN1cHBseS5zdWIoYmFsYW5jZXNbaW52ZXN0b3JdKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2VuZERpdmlkZW5kcyhhZGRyZXNzIHRva2VuX2FkZHJlc3MsIHVpbnQyNTYgYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlICh0b2tlbl9hZGRyZXNzICE9IGFkZHJlc3ModGhpcykpOyAvLyBkbyBub3Qgc2VuZCB0aGlzIGNvbnRyYWN0IGZvciBkaXZpZGVuZHMKICAgICAgICByZXF1aXJlKGludmVzdG9yc1RvdGFsU3VwcGx5ID4gMCk7IC8vIGludmVzdG9yIGNhcGl0YWwgbXVzdCBleGlzdHMgdG8gcGF5IGRpdmlkZW5kcwogICAgICAgIEVSQzIwIHRva2VuID0gRVJDMjAodG9rZW5fYWRkcmVzcyk7CiAgICAgICAgcmVxdWlyZSh0b2tlbi5iYWxhbmNlT2YodGhpcykgPiBhbW91bnQpOwoKICAgICAgICB0b3RhbERpdmlkZW5kc1BlckNvaW5bdG9rZW5fYWRkcmVzc10gPSB0b3RhbERpdmlkZW5kc1BlckNvaW5bdG9rZW5fYWRkcmVzc10uYWRkKGFtb3VudC5tdWwoTVVMVElQTElFUikuZGl2KGludmVzdG9yc1RvdGFsU3VwcGx5KSk7CgogICAgICAgIC8vIGFkZCB0b2tlbnMgdG8gdGhlIHNldAogICAgICAgIHVpbnQgaWR4ID0gdG9rZW5zLmxlbmd0aDsKICAgICAgICBmb3IodWludCBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAodG9rZW5zW2ldID09IHRva2VuX2FkZHJlc3MgfHwgdG9rZW5zW2ldID09IGFkZHJlc3MoMHgwKSkgewogICAgICAgICAgICAgICAgaWR4ID0gaTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChpZHggPT0gdG9rZW5zLmxlbmd0aCkgewogICAgICAgICAgICB0b2tlbnMubGVuZ3RoICs9IDE7CiAgICAgICAgfQogICAgICAgIHRva2Vuc1tpZHhdID0gdG9rZW5fYWRkcmVzczsKICAgIH0KCiAgICBmdW5jdGlvbiBzZW5kRGl2aWRlbmRzRXRoZXJzKCkgcHVibGljIHBheWFibGUgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGludmVzdG9yc1RvdGFsU3VwcGx5ID4gMCk7IC8vIGludmVzdG9yIGNhcGl0YWwgbXVzdCBleGlzdHMgdG8gcGF5IGRpdmlkZW5kcwogICAgICAgIGRpdkV0aGVycyA9IGRpdkV0aGVycy5hZGQoKG1zZy52YWx1ZSkubXVsKE1VTFRJUExJRVIpLmRpdihpbnZlc3RvcnNUb3RhbFN1cHBseSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldERpdmlkZW5kcygpIHB1YmxpYyB7CiAgICAgICAgLy8gQW55IGludmVzdG9yIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24gaW4gYSB0cmFuc2FjdGlvbiB0byByZWNlaXZlIGRpdmlkZW5kcwogICAgICAgIGFjdGl2YXRlRGl2aWRlbmRzKG1zZy5zZW5kZXIpOwogICAgfQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogCiAgICAvLyBCYWxhbmNlcyBmb3IgZWFjaCBhY2NvdW50CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CgogICAgLy8gT3duZXIgb2YgYWNjb3VudCBhcHByb3ZlcyB0aGUgdHJhbnNmZXIgb2YgYW4gYW1vdW50IHRvIGFub3RoZXIgYWNjb3VudAogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgZnJvbSAsIGFkZHJlc3MgaW5kZXhlZCB0byAsIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgVHJhbnNmZXJGZWUoYWRkcmVzcyBpbmRleGVkIHRvICwgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKICAgIGV2ZW50IERlYnVnKHVpbnQyNTYgZnJvbSwgYWRkcmVzcyB0bywgc3RyaW5nIHZhbHVlKTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlckJhbGFuY2UoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgewogICAgICAgIGlmIChmcm9tICE9IGFkZHJlc3MoMHgwKSkgewogICAgICAgICAgICByZXF1aXJlKGJhbGFuY2VzW2Zyb21dID49IGFtb3VudCk7CiAgICAgICAgICAgIGlmIChub3RPd25lcihmcm9tKSAmJiBpbnZlc3RvcnNbZnJvbV0gJiYgYmFsYW5jZXNbZnJvbV0gPj0gaW52ZXN0b3JNaW5pbWFsQmFsYW5jZSkgewogICAgICAgICAgICAgICAgaWYgKGJhbGFuY2VzW2Zyb21dIC0gYW1vdW50ID49IGludmVzdG9yTWluaW1hbEJhbGFuY2UpIHsKICAgICAgICAgICAgICAgICAgICBpbnZlc3RvcnNUb3RhbFN1cHBseSA9IGludmVzdG9yc1RvdGFsU3VwcGx5LnN1YihhbW91bnQpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpbnZlc3RvcnNUb3RhbFN1cHBseSA9IGludmVzdG9yc1RvdGFsU3VwcGx5LnN1YihiYWxhbmNlc1tmcm9tXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYmFsYW5jZXNbZnJvbV0gPSBiYWxhbmNlc1tmcm9tXS5zdWIoYW1vdW50KTsKICAgICAgICB9CiAgICAgICAgaWYgKHRvICE9IGFkZHJlc3MoMHgwKSkgewogICAgICAgICAgICBiYWxhbmNlc1t0b10gPSBiYWxhbmNlc1t0b10uYWRkKGFtb3VudCk7CiAgICAgICAgICAgIGlmIChub3RPd25lcih0bykgJiYgaW52ZXN0b3JzW3RvXSAmJiBiYWxhbmNlc1t0b10gPj0gaW52ZXN0b3JNaW5pbWFsQmFsYW5jZSkgewogICAgICAgICAgICAgICAgaWYgKGJhbGFuY2VzW3RvXSAtIGFtb3VudCA+PSBpbnZlc3Rvck1pbmltYWxCYWxhbmNlKSB7CiAgICAgICAgICAgICAgICAgICAgaW52ZXN0b3JzVG90YWxTdXBwbHkgPSBpbnZlc3RvcnNUb3RhbFN1cHBseS5hZGQoYW1vdW50KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaW52ZXN0b3JzVG90YWxTdXBwbHkgPSBpbnZlc3RvcnNUb3RhbFN1cHBseS5hZGQoYmFsYW5jZXNbdG9dKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvLyBpZiBzdXBwbHkgcHJvdmlkZWQgaXMgMCwgdGhlbiBkZWZhdWx0IGFzc2lnbmVkCiAgICBmdW5jdGlvbiBQRFQodWludCBzdXBwbHkpIHB1YmxpYyB7CiAgICAgICAgaWYgKHN1cHBseSA+IDApIHsKICAgICAgICAgICAgdG90YWxTdXBwbHkgPSBzdXBwbHk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseURlZmF1bHQ7CiAgICAgICAgfQogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICB0cmFuc2ZlckZlZU93bmVyID0gb3duZXI7CiAgICAgICAgYmFsYW5jZXNbdGhpc10gPSB0b3RhbFN1cHBseTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VUcmFuc2ZlckZlZU93bmVyKGFkZHJlc3MgYWRkcikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgdHJhbnNmZXJGZWVPd25lciA9IGFkZHI7CiAgICB9CiAKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIGFkZHIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW2FkZHJdOwogICAgfQoKICAgIC8vIGZlZSBpcyBub3QgYXBwbGllZCB0byBvd25lciBhbmQgdHJhbnNmZXJGZWVPd25lcgogICAgZnVuY3Rpb24gY2hhcmdlVHJhbnNmZXJGZWUoYWRkcmVzcyBhZGRyLCB1aW50IGFtb3VudCkKICAgICAgICBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgYWN0aXZhdGVEaXZpZGVuZHMoYWRkcik7CiAgICAgICAgaWYgKG5vdE93bmVyKGFkZHIpICYmIGJhbGFuY2VzW2FkZHJdID4gMCkgewogICAgICAgICAgICB2YXIgZmVlID0gYW1vdW50ICogdHJhbnNmZXJGZWVOdW0gLyB0cmFuc2ZlckZlZURlbnVtOwogICAgICAgICAgICBpZiAoZmVlIDwgbWluRmVlKSB7CiAgICAgICAgICAgICAgICBmZWUgPSBtaW5GZWU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmVlID4gYmFsYW5jZXNbYWRkcl0pIHsKICAgICAgICAgICAgICAgIGZlZSA9IGJhbGFuY2VzW2FkZHJdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFtb3VudCA9IGFtb3VudCAtIGZlZTsKCiAgICAgICAgICAgIHRyYW5zZmVyQmFsYW5jZShhZGRyLCB0cmFuc2ZlckZlZU93bmVyLCBmZWUpOwogICAgICAgICAgICBUcmFuc2ZlcihhZGRyLCB0cmFuc2ZlckZlZU93bmVyLCBmZWUpOwogICAgICAgICAgICBUcmFuc2ZlckZlZShhZGRyLCBmZWUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYW1vdW50OwogICAgfQogCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IGFtb3VudCkKICAgICAgICBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFjdGl2YXRlRGl2aWRlbmRzKG1zZy5zZW5kZXIsIHRvKTsKICAgICAgICAvL2FjdGl2YXRlRGl2aWRlbmRzRnVuYyh0byk7CiAgICAgICAgaWYgKGFtb3VudCA+PSBtaW5UcmFuc2ZlcgogICAgICAgICAgICAmJiBiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBhbW91bnQKICAgICAgICAgICAgJiYgYmFsYW5jZXNbdG9dICsgYW1vdW50ID4gYmFsYW5jZXNbdG9dCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IGFtb3VudCkgewogICAgICAgICAgICAgICAgICAgIGFtb3VudCA9IGNoYXJnZVRyYW5zZmVyRmVlKG1zZy5zZW5kZXIsIGFtb3VudCk7CgogICAgICAgICAgICAgICAgICAgIHRyYW5zZmVyQmFsYW5jZShtc2cuc2VuZGVyLCB0bywgYW1vdW50KTsKICAgICAgICAgICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCB0bywgYW1vdW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICB9CiAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgYW1vdW50KQogICAgICAgIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWN0aXZhdGVEaXZpZGVuZHMoZnJvbSwgdG8pOwogICAgICAgIC8vYWN0aXZhdGVEaXZpZGVuZHNGdW5jKHRvKTsKICAgICAgICBpZiAoIGFtb3VudCA+PSBtaW5UcmFuc2ZlcgogICAgICAgICAgICAmJiBhbGxvd2VkW2Zyb21dW21zZy5zZW5kZXJdID49IGFtb3VudAogICAgICAgICAgICAmJiBiYWxhbmNlc1tmcm9tXSA+PSBhbW91bnQKICAgICAgICAgICAgJiYgYmFsYW5jZXNbdG9dICsgYW1vdW50ID4gYmFsYW5jZXNbdG9dCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgYWxsb3dlZFtmcm9tXVttc2cuc2VuZGVyXSAtPSBhbW91bnQ7CgogICAgICAgICAgICAgICAgaWYgKGJhbGFuY2VzW2Zyb21dID49IGFtb3VudCkgewogICAgICAgICAgICAgICAgICAgIGFtb3VudCA9IGNoYXJnZVRyYW5zZmVyRmVlKGZyb20sIGFtb3VudCk7CgogICAgICAgICAgICAgICAgICAgIHRyYW5zZmVyQmFsYW5jZShmcm9tLCB0bywgYW1vdW50KTsKICAgICAgICAgICAgICAgICAgICBUcmFuc2Zlcihmcm9tLCB0bywgYW1vdW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CiAKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IGFtb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW3NwZW5kZXJdID0gYW1vdW50OwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIHNwZW5kZXIsIGFtb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIGFkZHIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFthZGRyXVtzcGVuZGVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRUcmFuc2ZlckZlZSh1aW50MzIgbnVtaW5hdG9yLCB1aW50MzIgZGVudW1pbmF0b3IpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoZGVudW1pbmF0b3IgPiAwICYmIG51bWluYXRvciA8IGRlbnVtaW5hdG9yKTsKICAgICAgICB0cmFuc2ZlckZlZU51bSA9IG51bWluYXRvcjsKICAgICAgICB0cmFuc2ZlckZlZURlbnVtID0gZGVudW1pbmF0b3I7CiAgICB9CgogICAgLy8gTWFudWFsIHNlbGwKICAgIGZ1bmN0aW9uIHNlbGwoYWRkcmVzcyB0bywgdWludCBhbW91bnQpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGFjdGl2YXRlRGl2aWRlbmRzKHRvKTsKICAgICAgICAvL3JlcXVpcmUoYW1vdW50ID49IG1pblRyYW5zZmVyICYmIGJhbGFuY2VFbm91Z2goYW1vdW50KSk7CiAgICAgICAgcmVxdWlyZShhbW91bnQgPj0gbWluVHJhbnNmZXIpOwoKICAgICAgICB0cmFuc2ZlckJhbGFuY2UodGhpcywgdG8sIGFtb3VudCk7CiAgICAgICAgVHJhbnNmZXIodGhpcywgdG8sIGFtb3VudCk7CiAgICB9CgogICAgLy8gaXNzdWUgbmV3IGNvaW5zCiAgICBmdW5jdGlvbiBpc3N1ZSh1aW50IGFtb3VudCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1t0aGlzXSA9IGJhbGFuY2VzW3RoaXNdLmFkZChhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVJhdGUodWludDI1NiBuZXdfcmF0ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShuZXdfcmF0ZSA+IDApOwogICAgICAgIHJhdGUgPSBuZXdfcmF0ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VNaW5pbWFsV2VpKHVpbnQyNTYgbmV3X3dlaSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgbWluaW1hbFdlaSA9IG5ld193ZWk7CiAgICB9CgogICAgLy8gYnV5IGZvciBldGhlcmV1bQogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgYWRkcikKICAgICAgICBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgYWN0aXZhdGVEaXZpZGVuZHMobXNnLnNlbmRlcik7CiAgICAgICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICAgICAgcmVxdWlyZSh3ZWlBbW91bnQgPj0gbWluaW1hbFdlaSk7CiAgICAgICAgLy91aW50MjU2IHRrbnMgPSB3ZWlBbW91bnQubXVsKHJhdGUpIC8gMSBldGhlciAqICh1aW50MjU2KDEwKSoqZGVjaW1hbHMpOwogICAgICAgIHVpbnQyNTYgdGtucyA9IHdlaUFtb3VudC5tdWwocmF0ZSkuZGl2KDEgZXRoZXIpLm11bCh1aW50MjU2KDEwKSoqZGVjaW1hbHMpOwogICAgICAgIHJlcXVpcmUodGtucyA+IDApOwoKICAgICAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgICAgIHRyYW5zZmVyQmFsYW5jZSh0aGlzLCBhZGRyLCB0a25zKTsKICAgICAgICBUb2tlblB1cmNoYXNlKHRoaXMsIGFkZHIsIHdlaUFtb3VudCwgdGtucyk7CiAgICAgICAgb3duZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH0KCiAgICAvLyBkZXN0cm95IGV4aXN0aW5nIGNvaW5zCiAgICAvLyBUT0Q6IG5vdCBkZXN0cm95IGRpdmlkZW5kcyB0b2tlbnMKICAgIGZ1bmN0aW9uIGRlc3Ryb3kodWludCBhbW91bnQpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgICAgLy9yZXF1aXJlKGFtb3VudCA+IDAgJiYgYmFsYW5jZUVub3VnaChhbW91bnQpKTsKICAgICAgICAgIHJlcXVpcmUoYW1vdW50ID4gMCk7CiAgICAgICAgICB0cmFuc2ZlckJhbGFuY2UodGhpcywgYWRkcmVzcygweDApLCBhbW91bnQpOwogICAgICAgICAgdG90YWxTdXBwbHkgLT0gYW1vdW50OwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgogICAgLy8ga2lsbCBjb250cmFjdCBvbmx5IGlmIGFsbCB3YWxsZXRzIGFyZSBlbXB0eQogICAgZnVuY3Rpb24ga2lsbCgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKHRvdGFsU3VwcGx5ID09IDApOwogICAgICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgICB9Cn0='.
	

]
