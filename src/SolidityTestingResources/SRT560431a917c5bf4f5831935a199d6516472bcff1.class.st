Class {
	#name : #SRT560431a917c5bf4f5831935a199d6516472bcff1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT560431a917c5bf4f5831935a199d6516472bcff1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgovKgoKICBfX19fXyAgX19fX18gICBfX19fICAgX19fXyAgX19fX19fIAogfCAgX18gXHwgIF9fIFwgLyBfXyBcIC8gX18gXHwgIF9fX198CiB8IHxfXykgfCB8X18pIHwgfCAgfCB8IHwgIHwgfCB8X18gICAKIHwgIF9fXy98ICBfICAvfCB8ICB8IHwgfCAgfCB8ICBfX3wgIAogfCB8ICAgIHwgfCBcIFx8IHxfX3wgfCB8X198IHwgfCAgICAgCiB8X3xfX18gfF98X19cX1xcX19fXy8gXF9fX18vfF98ICAgICAKICAvIF9fIFx8ICBfX19ffCAgICAgICAgICAgICAgICAgICAgIAogfCB8ICB8IHwgfF9fICAgICAgICAgICAgICAgICAgICAgICAgCiB8IHwgIHwgfCAgX198ICAgICAgICAgICAgICAgICAgICAgICAKIHwgfF9ffCB8IHwgICAgICAgICAgICAgICAgICAgICAgICAgIAogIFxfX19fL3xffF9fICBfXyAgX18gIF9fX18gICAgICAgICAgCiB8ICBfX19fLyBfXyBcfCAgXC8gIHwvIF9fIFwgICAgICAgICAKIHwgfF9fIHwgfCAgfCB8IFwgIC8gfCB8ICB8IHwgICAgICAgIAogfCAgX198fCB8ICB8IHwgfFwvfCB8IHwgIHwgfCAgICAgICAgCiB8IHwgICB8IHxfX3wgfCB8ICB8IHwgfF9ffCB8ICAgICAgICAKIHxffCAgICBcX19fXy98X3wgIHxffFxfX19fLyAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgIAogICAgQXV0b25vbW91cyBweXJhbWlkIHdpdGggMjAlIGRpdmlkZW5kcyBhbmQgYSBTTE9XRVIgVE9LRU4gUFJJQ0UgSU5DUkVBU0UgdG8gZ2l2ZSBmYWlyZXIgRk9NTyBmb3IgYWxsLgogICAgTG9uZ2VyIHB5cmFtaWQgbGlmZXNwYW4gPSBtb3JlIGRpdnMgZm9yIGV2ZXJ5b25lIDopCiovCgoKY29udHJhY3QgUE9GT01PIHsKICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICA9ICAgICAgICAgICAgTU9ESUZJRVJTICAgICAgICAgICAgPQogICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAgIC8vIG9ubHkgcGVvcGxlIHdpdGggdG9rZW5zCiAgICBtb2RpZmllciBvbmx5QmFnaG9sZGVycygpIHsKICAgICAgICByZXF1aXJlKG15VG9rZW5zKCkgPiAwKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICAvLyBvbmx5IHBlb3BsZSB3aXRoIHByb2ZpdHMKICAgIG1vZGlmaWVyIG9ubHlTdHJvbmdoYW5kcygpIHsKICAgICAgICByZXF1aXJlKG15RGl2aWRlbmRzKHRydWUpID4gMCk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgLy8gYWRtaW5pc3RyYXRvcnMgY2FuOgogICAgLy8gLT4gY2hhbmdlIHRoZSBuYW1lIG9mIHRoZSBjb250cmFjdAogICAgLy8gLT4gY2hhbmdlIHRoZSBuYW1lIG9mIHRoZSB0b2tlbgogICAgLy8gLT4gY2hhbmdlIHRoZSBQb1MgZGlmZmljdWx0eSAoSG93IG1hbnkgdG9rZW5zIGl0IGNvc3RzIHRvIGhvbGQgYSBtYXN0ZXJub2RlLCBpbiBjYXNlIGl0IGdldHMgY3JhenkgaGlnaCBsYXRlcikKICAgIC8vIHRoZXkgQ0FOTk9UOgogICAgLy8gLT4gdGFrZSBmdW5kcwogICAgLy8gLT4gZGlzYWJsZSB3aXRoZHJhd2FscwogICAgLy8gLT4ga2lsbCB0aGUgY29udHJhY3QKICAgIC8vIC0+IGNoYW5nZSB0aGUgcHJpY2Ugb2YgdG9rZW5zCiAgICBtb2RpZmllciBvbmx5QWRtaW5pc3RyYXRvcigpewogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgcmVxdWlyZShhZG1pbmlzdHJhdG9yc1tfY3VzdG9tZXJBZGRyZXNzXSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgCiAgICAvLyBlbnN1cmVzIHRoYXQgdGhlIGZpcnN0IHRva2VucyBpbiB0aGUgY29udHJhY3Qgd2lsbCBiZSBlcXVhbGx5IGRpc3RyaWJ1dGVkCiAgICAvLyBtZWFuaW5nLCBubyBkaXZpbmUgZHVtcCB3aWxsIGJlIGV2ZXIgcG9zc2libGUKICAgIC8vIHJlc3VsdDogaGVhbHRoeSBsb25nZXZpdHkuCiAgICBtb2RpZmllciBhbnRpRWFybHlXaGFsZSh1aW50MjU2IF9hbW91bnRPZkV0aGVyZXVtKXsKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIAogICAgICAgIC8vIGFyZSB3ZSBzdGlsbCBpbiB0aGUgdnVsbmVyYWJsZSBwaGFzZT8KICAgICAgICAvLyBpZiBzbywgZW5hY3QgYW50aSBlYXJseSB3aGFsZSBwcm90b2NvbCAKICAgICAgICBpZiggb25seUFtYmFzc2Fkb3JzICYmICgodG90YWxFdGhlcmV1bUJhbGFuY2UoKSAtIF9hbW91bnRPZkV0aGVyZXVtKSA8PSBhbWJhc3NhZG9yUXVvdGFfICkpewogICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgLy8gaXMgdGhlIGN1c3RvbWVyIGluIHRoZSBhbWJhc3NhZG9yIGxpc3Q/CiAgICAgICAgICAgICAgICBhbWJhc3NhZG9yc19bX2N1c3RvbWVyQWRkcmVzc10gPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBkb2VzIHRoZSBjdXN0b21lciBwdXJjaGFzZSBleGNlZWQgdGhlIG1heCBhbWJhc3NhZG9yIHF1b3RhPwogICAgICAgICAgICAgICAgKGFtYmFzc2Fkb3JBY2N1bXVsYXRlZFF1b3RhX1tfY3VzdG9tZXJBZGRyZXNzXSArIF9hbW91bnRPZkV0aGVyZXVtKSA8PSBhbWJhc3NhZG9yTWF4UHVyY2hhc2VfCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHVwZGF0ZWQgdGhlIGFjY3VtdWxhdGVkIHF1b3RhICAgIAogICAgICAgICAgICBhbWJhc3NhZG9yQWNjdW11bGF0ZWRRdW90YV9bX2N1c3RvbWVyQWRkcmVzc10gPSBTYWZlTWF0aC5hZGQoYW1iYXNzYWRvckFjY3VtdWxhdGVkUXVvdGFfW19jdXN0b21lckFkZHJlc3NdLCBfYW1vdW50T2ZFdGhlcmV1bSk7CiAgICAgICAgCiAgICAgICAgICAgIC8vIGV4ZWN1dGUKICAgICAgICAgICAgXzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBpbiBjYXNlIHRoZSBldGhlciBjb3VudCBkcm9wcyBsb3csIHRoZSBhbWJhc3NhZG9yIHBoYXNlIHdvbid0IHJlaW5pdGlhdGUKICAgICAgICAgICAgb25seUFtYmFzc2Fkb3JzID0gZmFsc2U7CiAgICAgICAgICAgIF87ICAgIAogICAgICAgIH0KICAgICAgICAKICAgIH0KICAgIAogICAgCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgPSAgICAgICAgICAgIEVWRU5UUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCiAgICBldmVudCBvblRva2VuUHVyY2hhc2UoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGN1c3RvbWVyQWRkcmVzcywKICAgICAgICB1aW50MjU2IGluY29taW5nRXRoZXJldW0sCiAgICAgICAgdWludDI1NiB0b2tlbnNNaW50ZWQsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHJlZmVycmVkQnkKICAgICk7CiAgICAKICAgIGV2ZW50IG9uVG9rZW5TZWxsKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBjdXN0b21lckFkZHJlc3MsCiAgICAgICAgdWludDI1NiB0b2tlbnNCdXJuZWQsCiAgICAgICAgdWludDI1NiBldGhlcmV1bUVhcm5lZAogICAgKTsKICAgIAogICAgZXZlbnQgb25SZWludmVzdG1lbnQoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGN1c3RvbWVyQWRkcmVzcywKICAgICAgICB1aW50MjU2IGV0aGVyZXVtUmVpbnZlc3RlZCwKICAgICAgICB1aW50MjU2IHRva2Vuc01pbnRlZAogICAgKTsKICAgIAogICAgZXZlbnQgb25XaXRoZHJhdygKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgY3VzdG9tZXJBZGRyZXNzLAogICAgICAgIHVpbnQyNTYgZXRoZXJldW1XaXRoZHJhd24KICAgICk7CiAgICAKICAgIC8vIEVSQzIwCiAgICBldmVudCBUcmFuc2ZlcigKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgZnJvbSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgdG8sCiAgICAgICAgdWludDI1NiB0b2tlbnMKICAgICk7CiAgICAKICAgIAogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICA9ICAgICAgICAgICAgQ09ORklHVVJBQkxFUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIlBPRk9NTyI7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJQT0ZPTU8iOwogICAgdWludDggY29uc3RhbnQgcHVibGljIGRlY2ltYWxzID0gMTg7CiAgICB1aW50OCBjb25zdGFudCBpbnRlcm5hbCBkaXZpZGVuZEZlZV8gPSA1OyAKICAgIHVpbnQyNTYgY29uc3RhbnQgaW50ZXJuYWwgdG9rZW5QcmljZUluaXRpYWxfID0gMC4wMDAwMDAwMDAxIGV0aGVyOwogICAgdWludDI1NiBjb25zdGFudCBpbnRlcm5hbCB0b2tlblByaWNlSW5jcmVtZW50YWxfID0gMC4wMDAwMDAwMDcgZXRoZXI7IC8vc2xvd2VyIHByaWNlIGluY3JlYXNlLCBsb25nZXIgRk9NTyEKICAgIHVpbnQyNTYgY29uc3RhbnQgaW50ZXJuYWwgbWFnbml0dWRlID0gMioqNjQ7CiAgICAKICAgIC8vIHByb29mIG9mIHN0YWtlIChkZWZhdWx0cyBhdCAxMDAgdG9rZW5zKQogICAgdWludDI1NiBwdWJsaWMgc3Rha2luZ1JlcXVpcmVtZW50ID0gNWUxODsKICAgIAogICAgLy8gYW1iYXNzYWRvciBwcm9ncmFtCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgaW50ZXJuYWwgYW1iYXNzYWRvcnNfOwogICAgdWludDI1NiBjb25zdGFudCBpbnRlcm5hbCBhbWJhc3NhZG9yTWF4UHVyY2hhc2VfID0gMSBldGhlcjsKICAgIHVpbnQyNTYgY29uc3RhbnQgaW50ZXJuYWwgYW1iYXNzYWRvclF1b3RhXyA9IDIwIGV0aGVyOwogICAgCiAgICAKICAgIAogICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICA9ICAgICAgICAgICAgREFUQVNFVFMgICAgICAgICAgICA9CiAgICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCiAgICAvLyBhbW91bnQgb2Ygc2hhcmVzIGZvciBlYWNoIGFkZHJlc3MgKHNjYWxlZCBudW1iZXIpCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgaW50ZXJuYWwgdG9rZW5CYWxhbmNlTGVkZ2VyXzsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBpbnRlcm5hbCByZWZlcnJhbEJhbGFuY2VfOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGludDI1NikgaW50ZXJuYWwgcGF5b3V0c1RvXzsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBpbnRlcm5hbCBhbWJhc3NhZG9yQWNjdW11bGF0ZWRRdW90YV87CiAgICB1aW50MjU2IGludGVybmFsIHRva2VuU3VwcGx5XyA9IDA7CiAgICB1aW50MjU2IGludGVybmFsIHByb2ZpdFBlclNoYXJlXzsKICAgIAogICAgLy8gYWRtaW5pc3RyYXRvciBsaXN0IChzZWUgYWJvdmUgb24gd2hhdCB0aGV5IGNhbiBkbykKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgYWRtaW5pc3RyYXRvcnM7CiAgICBib29sIHB1YmxpYyBvbmx5QW1iYXNzYWRvcnMgPSBmYWxzZTsKICAgIAoKCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgPSAgICAgICAgICAgIFBVQkxJQyBGVU5DVElPTlMgICAgICAgICAgICA9CiAgICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogICAgLyoKICAgICogLS0gQVBQTElDQVRJT04gRU5UUlkgUE9JTlRTIC0tICAKICAgICovCiAgICBmdW5jdGlvbiBQT0ZPTU8oKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIC8vIGFkZCBhZG1pbmlzdHJhdG9ycyBoZXJlCgogICAgICAgIGFkbWluaXN0cmF0b3JzWzB4NTJGQ2VFNzgxNmI1OUY5OURlNWU1M2U3ZmNBNjQwYTdCNGE5Njg5NF0gPSB0cnVlOwoKICAgIH0KICAgIAogICAgIAogICAgLyoqCiAgICAgKiBDb252ZXJ0cyBhbGwgaW5jb21pbmcgZXRoZXJldW0gdG8gdG9rZW5zIGZvciB0aGUgY2FsbGVyLCBhbmQgcGFzc2VzIGRvd24gdGhlIHJlZmVycmFsIGFkZHkgKGlmIGFueSkKICAgICAqLwogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgX3JlZmVycmVkQnkpCiAgICAgICAgcHVibGljCiAgICAgICAgcGF5YWJsZQogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICBwdXJjaGFzZVRva2Vucyhtc2cudmFsdWUsIF9yZWZlcnJlZEJ5KTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBGYWxsYmFjayBmdW5jdGlvbiB0byBoYW5kbGUgZXRoZXJldW0gdGhhdCB3YXMgc2VuZCBzdHJhaWdodCB0byB0aGUgY29udHJhY3QKICAgICAqIFVuZm9ydHVuYXRlbHkgd2UgY2Fubm90IHVzZSBhIHJlZmVycmFsIGFkZHJlc3MgdGhpcyB3YXkuCiAgICAgKi8KICAgIGZ1bmN0aW9uKCkKICAgICAgICBwYXlhYmxlCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgcHVyY2hhc2VUb2tlbnMobXNnLnZhbHVlLCAweDApOwogICAgfQogICAgCiAgICAvKioKICAgICAqIENvbnZlcnRzIGFsbCBvZiBjYWxsZXIncyBkaXZpZGVuZHMgdG8gdG9rZW5zLgogICAgKi8KICAgIGZ1bmN0aW9uIHJlaW52ZXN0KCkKICAgICAgICBvbmx5U3Ryb25naGFuZHMoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIC8vIGZldGNoIGRpdmlkZW5kcwogICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IG15RGl2aWRlbmRzKGZhbHNlKTsgLy8gcmV0cmlldmUgcmVmLiBib251cyBsYXRlciBpbiB0aGUgY29kZQogICAgICAgIAogICAgICAgIC8vIHBheSBvdXQgdGhlIGRpdmlkZW5kcyB2aXJ0dWFsbHkKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIHBheW91dHNUb19bX2N1c3RvbWVyQWRkcmVzc10gKz0gIChpbnQyNTYpIChfZGl2aWRlbmRzICogbWFnbml0dWRlKTsKICAgICAgICAKICAgICAgICAvLyByZXRyaWV2ZSByZWYuIGJvbnVzCiAgICAgICAgX2RpdmlkZW5kcyArPSByZWZlcnJhbEJhbGFuY2VfW19jdXN0b21lckFkZHJlc3NdOwogICAgICAgIHJlZmVycmFsQmFsYW5jZV9bX2N1c3RvbWVyQWRkcmVzc10gPSAwOwogICAgICAgIAogICAgICAgIC8vIGRpc3BhdGNoIGEgYnV5IG9yZGVyIHdpdGggdGhlIHZpcnR1YWxpemVkICJ3aXRoZHJhd24gZGl2aWRlbmRzIgogICAgICAgIHVpbnQyNTYgX3Rva2VucyA9IHB1cmNoYXNlVG9rZW5zKF9kaXZpZGVuZHMsIDB4MCk7CiAgICAgICAgCiAgICAgICAgLy8gZmlyZSBldmVudAogICAgICAgIG9uUmVpbnZlc3RtZW50KF9jdXN0b21lckFkZHJlc3MsIF9kaXZpZGVuZHMsIF90b2tlbnMpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEFsaWFzIG9mIHNlbGwoKSBhbmQgd2l0aGRyYXcoKS4KICAgICAqLwogICAgZnVuY3Rpb24gZXhpdCgpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgLy8gZ2V0IHRva2VuIGNvdW50IGZvciBjYWxsZXIgJiBzZWxsIHRoZW0gYWxsCiAgICAgICAgYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICB1aW50MjU2IF90b2tlbnMgPSB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdOwogICAgICAgIGlmKF90b2tlbnMgPiAwKSBzZWxsKF90b2tlbnMpOwogICAgICAgIAogICAgICAgIC8vIGxhbWJvIGRlbGl2ZXJ5IHNlcnZpY2UKICAgICAgICB3aXRoZHJhdygpOwogICAgfQoKICAgIC8qKgogICAgICogV2l0aGRyYXdzIGFsbCBvZiB0aGUgY2FsbGVycyBlYXJuaW5ncy4KICAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXcoKQogICAgICAgIG9ubHlTdHJvbmdoYW5kcygpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgLy8gc2V0dXAgZGF0YQogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gbXlEaXZpZGVuZHMoZmFsc2UpOyAvLyBnZXQgcmVmLiBib251cyBsYXRlciBpbiB0aGUgY29kZQogICAgICAgIAogICAgICAgIC8vIHVwZGF0ZSBkaXZpZGVuZCB0cmFja2VyCiAgICAgICAgcGF5b3V0c1RvX1tfY3VzdG9tZXJBZGRyZXNzXSArPSAgKGludDI1NikgKF9kaXZpZGVuZHMgKiBtYWduaXR1ZGUpOwogICAgICAgIAogICAgICAgIC8vIGFkZCByZWYuIGJvbnVzCiAgICAgICAgX2RpdmlkZW5kcyArPSByZWZlcnJhbEJhbGFuY2VfW19jdXN0b21lckFkZHJlc3NdOwogICAgICAgIHJlZmVycmFsQmFsYW5jZV9bX2N1c3RvbWVyQWRkcmVzc10gPSAwOwogICAgICAgIAogICAgICAgIC8vIGxhbWJvIGRlbGl2ZXJ5IHNlcnZpY2UKICAgICAgICBfY3VzdG9tZXJBZGRyZXNzLnRyYW5zZmVyKF9kaXZpZGVuZHMpOwogICAgICAgIAogICAgICAgIC8vIGZpcmUgZXZlbnQKICAgICAgICBvbldpdGhkcmF3KF9jdXN0b21lckFkZHJlc3MsIF9kaXZpZGVuZHMpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIExpcXVpZmllcyB0b2tlbnMgdG8gZXRoZXJldW0uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNlbGwodWludDI1NiBfYW1vdW50T2ZUb2tlbnMpCiAgICAgICAgb25seUJhZ2hvbGRlcnMoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIC8vIHNldHVwIGRhdGEKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIC8vIHJ1c3NpYW4gaGFja2VycyBCVEZPCiAgICAgICAgcmVxdWlyZShfYW1vdW50T2ZUb2tlbnMgPD0gdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSk7CiAgICAgICAgdWludDI1NiBfdG9rZW5zID0gX2Ftb3VudE9mVG9rZW5zOwogICAgICAgIHVpbnQyNTYgX2V0aGVyZXVtID0gdG9rZW5zVG9FdGhlcmV1bV8oX3Rva2Vucyk7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gU2FmZU1hdGguZGl2KF9ldGhlcmV1bSwgZGl2aWRlbmRGZWVfKTsKICAgICAgICB1aW50MjU2IF90YXhlZEV0aGVyZXVtID0gU2FmZU1hdGguc3ViKF9ldGhlcmV1bSwgX2RpdmlkZW5kcyk7CiAgICAgICAgCiAgICAgICAgLy8gYnVybiB0aGUgc29sZCB0b2tlbnMKICAgICAgICB0b2tlblN1cHBseV8gPSBTYWZlTWF0aC5zdWIodG9rZW5TdXBwbHlfLCBfdG9rZW5zKTsKICAgICAgICB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdID0gU2FmZU1hdGguc3ViKHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc10sIF90b2tlbnMpOwogICAgICAgIAogICAgICAgIC8vIHVwZGF0ZSBkaXZpZGVuZHMgdHJhY2tlcgogICAgICAgIGludDI1NiBfdXBkYXRlZFBheW91dHMgPSAoaW50MjU2KSAocHJvZml0UGVyU2hhcmVfICogX3Rva2VucyArIChfdGF4ZWRFdGhlcmV1bSAqIG1hZ25pdHVkZSkpOwogICAgICAgIHBheW91dHNUb19bX2N1c3RvbWVyQWRkcmVzc10gLT0gX3VwZGF0ZWRQYXlvdXRzOyAgICAgICAKICAgICAgICAKICAgICAgICAvLyBkaXZpZGluZyBieSB6ZXJvIGlzIGEgYmFkIGlkZWEKICAgICAgICBpZiAodG9rZW5TdXBwbHlfID4gMCkgewogICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGFtb3VudCBvZiBkaXZpZGVuZHMgcGVyIHRva2VuCiAgICAgICAgICAgIHByb2ZpdFBlclNoYXJlXyA9IFNhZmVNYXRoLmFkZChwcm9maXRQZXJTaGFyZV8sIChfZGl2aWRlbmRzICogbWFnbml0dWRlKSAvIHRva2VuU3VwcGx5Xyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIGZpcmUgZXZlbnQKICAgICAgICBvblRva2VuU2VsbChfY3VzdG9tZXJBZGRyZXNzLCBfdG9rZW5zLCBfdGF4ZWRFdGhlcmV1bSk7CiAgICB9CiAgICAKICAgIAogICAgLyoqCiAgICAgKiBUcmFuc2ZlciB0b2tlbnMgZnJvbSB0aGUgY2FsbGVyIHRvIGEgbmV3IGhvbGRlci4KICAgICAqIFJlbWVtYmVyLCB0aGVyZSdzIGEgMTAlIGZlZSBoZXJlIGFzIHdlbGwuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvQWRkcmVzcywgdWludDI1NiBfYW1vdW50T2ZUb2tlbnMpCiAgICAgICAgb25seUJhZ2hvbGRlcnMoKQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMoYm9vbCkKICAgIHsKICAgICAgICAvLyBzZXR1cAogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgCiAgICAgICAgLy8gbWFrZSBzdXJlIHdlIGhhdmUgdGhlIHJlcXVlc3RlZCB0b2tlbnMKICAgICAgICAvLyBhbHNvIGRpc2FibGVzIHRyYW5zZmVycyB1bnRpbCBhbWJhc3NhZG9yIHBoYXNlIGlzIG92ZXIKICAgICAgICAvLyAoIHdlIGRvbnQgd2FudCB3aGFsZSBwcmVtaW5lcyApCiAgICAgICAgcmVxdWlyZSghb25seUFtYmFzc2Fkb3JzICYmIF9hbW91bnRPZlRva2VucyA8PSB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdKTsKICAgICAgICAKICAgICAgICAvLyB3aXRoZHJhdyBhbGwgb3V0c3RhbmRpbmcgZGl2aWRlbmRzIGZpcnN0CiAgICAgICAgaWYobXlEaXZpZGVuZHModHJ1ZSkgPiAwKSB3aXRoZHJhdygpOwogICAgICAgIAogICAgICAgIC8vIGxpcXVpZnkgMTAlIG9mIHRoZSB0b2tlbnMgdGhhdCBhcmUgdHJhbnNmZXJlZAogICAgICAgIC8vIHRoZXNlIGFyZSBkaXNwZXJzZWQgdG8gc2hhcmVob2xkZXJzCiAgICAgICAgdWludDI1NiBfdG9rZW5GZWUgPSBTYWZlTWF0aC5kaXYoX2Ftb3VudE9mVG9rZW5zLCBkaXZpZGVuZEZlZV8pOwogICAgICAgIHVpbnQyNTYgX3RheGVkVG9rZW5zID0gU2FmZU1hdGguc3ViKF9hbW91bnRPZlRva2VucywgX3Rva2VuRmVlKTsKICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSB0b2tlbnNUb0V0aGVyZXVtXyhfdG9rZW5GZWUpOwogIAogICAgICAgIC8vIGJ1cm4gdGhlIGZlZSB0b2tlbnMKICAgICAgICB0b2tlblN1cHBseV8gPSBTYWZlTWF0aC5zdWIodG9rZW5TdXBwbHlfLCBfdG9rZW5GZWUpOwoKICAgICAgICAvLyBleGNoYW5nZSB0b2tlbnMKICAgICAgICB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdID0gU2FmZU1hdGguc3ViKHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc10sIF9hbW91bnRPZlRva2Vucyk7CiAgICAgICAgdG9rZW5CYWxhbmNlTGVkZ2VyX1tfdG9BZGRyZXNzXSA9IFNhZmVNYXRoLmFkZCh0b2tlbkJhbGFuY2VMZWRnZXJfW190b0FkZHJlc3NdLCBfdGF4ZWRUb2tlbnMpOwogICAgICAgIAogICAgICAgIC8vIHVwZGF0ZSBkaXZpZGVuZCB0cmFja2VycwogICAgICAgIHBheW91dHNUb19bX2N1c3RvbWVyQWRkcmVzc10gLT0gKGludDI1NikgKHByb2ZpdFBlclNoYXJlXyAqIF9hbW91bnRPZlRva2Vucyk7CiAgICAgICAgcGF5b3V0c1RvX1tfdG9BZGRyZXNzXSArPSAoaW50MjU2KSAocHJvZml0UGVyU2hhcmVfICogX3RheGVkVG9rZW5zKTsKICAgICAgICAKICAgICAgICAvLyBkaXNwZXJzZSBkaXZpZGVuZHMgYW1vbmcgaG9sZGVycwogICAgICAgIHByb2ZpdFBlclNoYXJlXyA9IFNhZmVNYXRoLmFkZChwcm9maXRQZXJTaGFyZV8sIChfZGl2aWRlbmRzICogbWFnbml0dWRlKSAvIHRva2VuU3VwcGx5Xyk7CiAgICAgICAgCiAgICAgICAgLy8gZmlyZSBldmVudAogICAgICAgIFRyYW5zZmVyKF9jdXN0b21lckFkZHJlc3MsIF90b0FkZHJlc3MsIF90YXhlZFRva2Vucyk7CiAgICAgICAgCiAgICAgICAgLy8gRVJDMjAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgIAogICAgfQogICAgCiAgICAvKi0tLS0tLS0tLS0gIEFETUlOSVNUUkFUT1IgT05MWSBGVU5DVElPTlMgIC0tLS0tLS0tLS0qLwogICAgLyoqCiAgICAgKiBJbiBjYXNlIHRoZSBhbWFzc2Fkb3IgcXVvdGEgaXMgbm90IG1ldCwgdGhlIGFkbWluaXN0cmF0b3IgY2FuIG1hbnVhbGx5IGRpc2FibGUgdGhlIGFtYmFzc2Fkb3IgcGhhc2UuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGRpc2FibGVJbml0aWFsU3RhZ2UoKQogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICBvbmx5QW1iYXNzYWRvcnMgPSBmYWxzZTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBJbiBjYXNlIG9uZSBvZiB1cyBkaWVzLCB3ZSBuZWVkIHRvIHJlcGxhY2Ugb3Vyc2VsdmVzLgogICAgICovCgogICAgCiAgICAvKioKICAgICAqIFByZWNhdXRpb25hcnkgbWVhc3VyZXMgaW4gY2FzZSB3ZSBuZWVkIHRvIGFkanVzdCB0aGUgbWFzdGVybm9kZSByYXRlLgogICAgICovCiAgICBmdW5jdGlvbiBzZXRTdGFraW5nUmVxdWlyZW1lbnQodWludDI1NiBfYW1vdW50T2ZUb2tlbnMpCiAgICAgICAgb25seUFkbWluaXN0cmF0b3IoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIHN0YWtpbmdSZXF1aXJlbWVudCA9IF9hbW91bnRPZlRva2VuczsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBJZiB3ZSB3YW50IHRvIHJlYnJhbmQsIHdlIGNhbi4KICAgICAqLwogICAgZnVuY3Rpb24gc2V0TmFtZShzdHJpbmcgX25hbWUpCiAgICAgICAgb25seUFkbWluaXN0cmF0b3IoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIG5hbWUgPSBfbmFtZTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBJZiB3ZSB3YW50IHRvIHJlYnJhbmQsIHdlIGNhbi4KICAgICAqLwogICAgZnVuY3Rpb24gc2V0U3ltYm9sKHN0cmluZyBfc3ltYm9sKQogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICBzeW1ib2wgPSBfc3ltYm9sOwogICAgfQoKICAgIAogICAgLyotLS0tLS0tLS0tICBIRUxQRVJTIEFORCBDQUxDVUxBVE9SUyAgLS0tLS0tLS0tLSovCiAgICAvKioKICAgICAqIE1ldGhvZCB0byB2aWV3IHRoZSBjdXJyZW50IEV0aGVyZXVtIHN0b3JlZCBpbiB0aGUgY29udHJhY3QKICAgICAqIEV4YW1wbGU6IHRvdGFsRXRoZXJldW1CYWxhbmNlKCkKICAgICAqLwogICAgZnVuY3Rpb24gdG90YWxFdGhlcmV1bUJhbGFuY2UoKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBSZXRyaWV2ZSB0aGUgdG90YWwgdG9rZW4gc3VwcGx5LgogICAgICovCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICByZXR1cm4gdG9rZW5TdXBwbHlfOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSB0b2tlbnMgb3duZWQgYnkgdGhlIGNhbGxlci4KICAgICAqLwogICAgZnVuY3Rpb24gbXlUb2tlbnMoKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICByZXR1cm4gYmFsYW5jZU9mKF9jdXN0b21lckFkZHJlc3MpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgb3duZWQgYnkgdGhlIGNhbGxlci4KICAgICAqIElmIGBfaW5jbHVkZVJlZmVycmFsQm9udXNgIGlzIHRvIHRvIDEvdHJ1ZSwgdGhlIHJlZmVycmFsIGJvbnVzIHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIGNhbGN1bGF0aW9ucy4KICAgICAqIFRoZSByZWFzb24gZm9yIHRoaXMsIGlzIHRoYXQgaW4gdGhlIGZyb250ZW5kLCB3ZSB3aWxsIHdhbnQgdG8gZ2V0IHRoZSB0b3RhbCBkaXZzIChnbG9iYWwgKyByZWYpCiAgICAgKiBCdXQgaW4gdGhlIGludGVybmFsIGNhbGN1bGF0aW9ucywgd2Ugd2FudCB0aGVtIHNlcGFyYXRlLiAKICAgICAqLyAKICAgIGZ1bmN0aW9uIG15RGl2aWRlbmRzKGJvb2wgX2luY2x1ZGVSZWZlcnJhbEJvbnVzKSAKICAgICAgICBwdWJsaWMgCiAgICAgICAgdmlldyAKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICByZXR1cm4gX2luY2x1ZGVSZWZlcnJhbEJvbnVzID8gZGl2aWRlbmRzT2YoX2N1c3RvbWVyQWRkcmVzcykgKyByZWZlcnJhbEJhbGFuY2VfW19jdXN0b21lckFkZHJlc3NdIDogZGl2aWRlbmRzT2YoX2N1c3RvbWVyQWRkcmVzcykgOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSB0b2tlbiBiYWxhbmNlIG9mIGFueSBzaW5nbGUgYWRkcmVzcy4KICAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcykKICAgICAgICB2aWV3CiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHJldHVybiB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSBkaXZpZGVuZCBiYWxhbmNlIG9mIGFueSBzaW5nbGUgYWRkcmVzcy4KICAgICAqLwogICAgZnVuY3Rpb24gZGl2aWRlbmRzT2YoYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzKQogICAgICAgIHZpZXcKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcmV0dXJuICh1aW50MjU2KSAoKGludDI1NikocHJvZml0UGVyU2hhcmVfICogdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSkgLSBwYXlvdXRzVG9fW19jdXN0b21lckFkZHJlc3NdKSAvIG1hZ25pdHVkZTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGJ1eSBwcmljZSBvZiAxIGluZGl2aWR1YWwgdG9rZW4uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNlbGxQcmljZSgpIAogICAgICAgIHB1YmxpYyAKICAgICAgICB2aWV3IAogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICAvLyBvdXIgY2FsY3VsYXRpb24gcmVsaWVzIG9uIHRoZSB0b2tlbiBzdXBwbHksIHNvIHdlIG5lZWQgc3VwcGx5LiBEb2guCiAgICAgICAgaWYodG9rZW5TdXBwbHlfID09IDApewogICAgICAgICAgICByZXR1cm4gdG9rZW5QcmljZUluaXRpYWxfIC0gdG9rZW5QcmljZUluY3JlbWVudGFsXzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1aW50MjU2IF9ldGhlcmV1bSA9IHRva2Vuc1RvRXRoZXJldW1fKDFlMTgpOwogICAgICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBTYWZlTWF0aC5kaXYoX2V0aGVyZXVtLCBkaXZpZGVuZEZlZV8gICk7CiAgICAgICAgICAgIHVpbnQyNTYgX3RheGVkRXRoZXJldW0gPSBTYWZlTWF0aC5zdWIoX2V0aGVyZXVtLCBfZGl2aWRlbmRzKTsKICAgICAgICAgICAgcmV0dXJuIF90YXhlZEV0aGVyZXVtOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHNlbGwgcHJpY2Ugb2YgMSBpbmRpdmlkdWFsIHRva2VuLgogICAgICovCiAgICBmdW5jdGlvbiBidXlQcmljZSgpIAogICAgICAgIHB1YmxpYyAKICAgICAgICB2aWV3IAogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICAvLyBvdXIgY2FsY3VsYXRpb24gcmVsaWVzIG9uIHRoZSB0b2tlbiBzdXBwbHksIHNvIHdlIG5lZWQgc3VwcGx5LiBEb2guCiAgICAgICAgaWYodG9rZW5TdXBwbHlfID09IDApewogICAgICAgICAgICByZXR1cm4gdG9rZW5QcmljZUluaXRpYWxfICsgdG9rZW5QcmljZUluY3JlbWVudGFsXzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1aW50MjU2IF9ldGhlcmV1bSA9IHRva2Vuc1RvRXRoZXJldW1fKDFlMTgpOwogICAgICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBTYWZlTWF0aC5kaXYoX2V0aGVyZXVtLCBkaXZpZGVuZEZlZV8gICk7CiAgICAgICAgICAgIHVpbnQyNTYgX3RheGVkRXRoZXJldW0gPSBTYWZlTWF0aC5hZGQoX2V0aGVyZXVtLCBfZGl2aWRlbmRzKTsKICAgICAgICAgICAgcmV0dXJuIF90YXhlZEV0aGVyZXVtOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBGdW5jdGlvbiBmb3IgdGhlIGZyb250ZW5kIHRvIGR5bmFtaWNhbGx5IHJldHJpZXZlIHRoZSBwcmljZSBzY2FsaW5nIG9mIGJ1eSBvcmRlcnMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVRva2Vuc1JlY2VpdmVkKHVpbnQyNTYgX2V0aGVyZXVtVG9TcGVuZCkgCiAgICAgICAgcHVibGljIAogICAgICAgIHZpZXcgCiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IFNhZmVNYXRoLmRpdihfZXRoZXJldW1Ub1NwZW5kLCBkaXZpZGVuZEZlZV8pOwogICAgICAgIHVpbnQyNTYgX3RheGVkRXRoZXJldW0gPSBTYWZlTWF0aC5zdWIoX2V0aGVyZXVtVG9TcGVuZCwgX2RpdmlkZW5kcyk7CiAgICAgICAgdWludDI1NiBfYW1vdW50T2ZUb2tlbnMgPSBldGhlcmV1bVRvVG9rZW5zXyhfdGF4ZWRFdGhlcmV1bSk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIF9hbW91bnRPZlRva2VuczsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBGdW5jdGlvbiBmb3IgdGhlIGZyb250ZW5kIHRvIGR5bmFtaWNhbGx5IHJldHJpZXZlIHRoZSBwcmljZSBzY2FsaW5nIG9mIHNlbGwgb3JkZXJzLgogICAgICovCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVFdGhlcmV1bVJlY2VpdmVkKHVpbnQyNTYgX3Rva2Vuc1RvU2VsbCkgCiAgICAgICAgcHVibGljIAogICAgICAgIHZpZXcgCiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHJlcXVpcmUoX3Rva2Vuc1RvU2VsbCA8PSB0b2tlblN1cHBseV8pOwogICAgICAgIHVpbnQyNTYgX2V0aGVyZXVtID0gdG9rZW5zVG9FdGhlcmV1bV8oX3Rva2Vuc1RvU2VsbCk7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gU2FmZU1hdGguZGl2KF9ldGhlcmV1bSwgZGl2aWRlbmRGZWVfKTsKICAgICAgICB1aW50MjU2IF90YXhlZEV0aGVyZXVtID0gU2FmZU1hdGguc3ViKF9ldGhlcmV1bSwgX2RpdmlkZW5kcyk7CiAgICAgICAgcmV0dXJuIF90YXhlZEV0aGVyZXVtOwogICAgfQogICAgCiAgICAKICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICA9ICAgICAgICAgICAgSU5URVJOQUwgRlVOQ1RJT05TICAgICAgICAgICAgPQogICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAgIGZ1bmN0aW9uIHB1cmNoYXNlVG9rZW5zKHVpbnQyNTYgX2luY29taW5nRXRoZXJldW0sIGFkZHJlc3MgX3JlZmVycmVkQnkpCiAgICAgICAgYW50aUVhcmx5V2hhbGUoX2luY29taW5nRXRoZXJldW0pCiAgICAgICAgaW50ZXJuYWwKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgLy8gZGF0YSBzZXR1cAogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludDI1NiBfdW5kaXZpZGVkRGl2aWRlbmRzID0gU2FmZU1hdGguZGl2KF9pbmNvbWluZ0V0aGVyZXVtLCBkaXZpZGVuZEZlZV8pOwogICAgICAgIHVpbnQyNTYgX3JlZmVycmFsQm9udXMgPSBTYWZlTWF0aC5kaXYoX3VuZGl2aWRlZERpdmlkZW5kcywgMik7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gU2FmZU1hdGguc3ViKF91bmRpdmlkZWREaXZpZGVuZHMsIF9yZWZlcnJhbEJvbnVzKTsKICAgICAgICB1aW50MjU2IF90YXhlZEV0aGVyZXVtID0gU2FmZU1hdGguc3ViKF9pbmNvbWluZ0V0aGVyZXVtLCBfdW5kaXZpZGVkRGl2aWRlbmRzKTsKICAgICAgICB1aW50MjU2IF9hbW91bnRPZlRva2VucyA9IGV0aGVyZXVtVG9Ub2tlbnNfKF90YXhlZEV0aGVyZXVtKTsKICAgICAgICB1aW50MjU2IF9mZWUgPSBfZGl2aWRlbmRzICogbWFnbml0dWRlOwogCiAgICAgICAgLy8gbm8gcG9pbnQgaW4gY29udGludWluZyBleGVjdXRpb24gaWYgT1AgaXMgYSBwb29yZmFnIHJ1c3NpYW4gaGFja2VyCiAgICAgICAgLy8gcHJldmVudHMgb3ZlcmZsb3cgaW4gdGhlIGNhc2UgdGhhdCB0aGUgcHlyYW1pZCBzb21laG93IG1hZ2ljYWxseSBzdGFydHMgYmVpbmcgdXNlZCBieSBldmVyeW9uZSBpbiB0aGUgd29ybGQKICAgICAgICAvLyAob3IgaGFja2VycykKICAgICAgICAvLyBhbmQgeWVzIHdlIGtub3cgdGhhdCB0aGUgc2FmZW1hdGggZnVuY3Rpb24gYXV0b21hdGljYWxseSBydWxlcyBvdXQgdGhlICJncmVhdGVyIHRoZW4iIGVxdWFzaW9uLgogICAgICAgIHJlcXVpcmUoX2Ftb3VudE9mVG9rZW5zID4gMCAmJiAoU2FmZU1hdGguYWRkKF9hbW91bnRPZlRva2Vucyx0b2tlblN1cHBseV8pID4gdG9rZW5TdXBwbHlfKSk7CiAgICAgICAgCiAgICAgICAgLy8gaXMgdGhlIHVzZXIgcmVmZXJyZWQgYnkgYSBtYXN0ZXJub2RlPwogICAgICAgIGlmKAogICAgICAgICAgICAvLyBpcyB0aGlzIGEgcmVmZXJyZWQgcHVyY2hhc2U/CiAgICAgICAgICAgIF9yZWZlcnJlZEJ5ICE9IDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCAmJgoKICAgICAgICAgICAgLy8gbm8gY2hlYXRpbmchCiAgICAgICAgICAgIF9yZWZlcnJlZEJ5ICE9IF9jdXN0b21lckFkZHJlc3MgJiYKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIGRvZXMgdGhlIHJlZmVycmVyIGhhdmUgYXQgbGVhc3QgWCB3aG9sZSB0b2tlbnM/CiAgICAgICAgICAgIC8vIGkuZSBpcyB0aGUgcmVmZXJyZXIgYSBnb2RseSBjaGFkIG1hc3Rlcm5vZGUKICAgICAgICAgICAgdG9rZW5CYWxhbmNlTGVkZ2VyX1tfcmVmZXJyZWRCeV0gPj0gc3Rha2luZ1JlcXVpcmVtZW50CiAgICAgICAgKXsKICAgICAgICAgICAgLy8gd2VhbHRoIHJlZGlzdHJpYnV0aW9uCiAgICAgICAgICAgIHJlZmVycmFsQmFsYW5jZV9bX3JlZmVycmVkQnldID0gU2FmZU1hdGguYWRkKHJlZmVycmFsQmFsYW5jZV9bX3JlZmVycmVkQnldLCBfcmVmZXJyYWxCb251cyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gbm8gcmVmIHB1cmNoYXNlCiAgICAgICAgICAgIC8vIGFkZCB0aGUgcmVmZXJyYWwgYm9udXMgYmFjayB0byB0aGUgZ2xvYmFsIGRpdmlkZW5kcyBjYWtlCiAgICAgICAgICAgIF9kaXZpZGVuZHMgPSBTYWZlTWF0aC5hZGQoX2RpdmlkZW5kcywgX3JlZmVycmFsQm9udXMpOwogICAgICAgICAgICBfZmVlID0gX2RpdmlkZW5kcyAqIG1hZ25pdHVkZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gd2UgY2FuJ3QgZ2l2ZSBwZW9wbGUgaW5maW5pdGUgZXRoZXJldW0KICAgICAgICBpZih0b2tlblN1cHBseV8gPiAwKXsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIGFkZCB0b2tlbnMgdG8gdGhlIHBvb2wKICAgICAgICAgICAgdG9rZW5TdXBwbHlfID0gU2FmZU1hdGguYWRkKHRva2VuU3VwcGx5XywgX2Ftb3VudE9mVG9rZW5zKTsKIAogICAgICAgICAgICAvLyB0YWtlIHRoZSBhbW91bnQgb2YgZGl2aWRlbmRzIGdhaW5lZCB0aHJvdWdoIHRoaXMgdHJhbnNhY3Rpb24sIGFuZCBhbGxvY2F0ZXMgdGhlbSBldmVubHkgdG8gZWFjaCBzaGFyZWhvbGRlcgogICAgICAgICAgICBwcm9maXRQZXJTaGFyZV8gKz0gKF9kaXZpZGVuZHMgKiBtYWduaXR1ZGUgLyAodG9rZW5TdXBwbHlfKSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhlIGN1c3RvbWVyIHJlY2VpdmVzIG92ZXIgaGlzIHB1cmNoYXNlIAogICAgICAgICAgICBfZmVlID0gX2ZlZSAtIChfZmVlLShfYW1vdW50T2ZUb2tlbnMgKiAoX2RpdmlkZW5kcyAqIG1hZ25pdHVkZSAvICh0b2tlblN1cHBseV8pKSkpOwogICAgICAgIAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGFkZCB0b2tlbnMgdG8gdGhlIHBvb2wKICAgICAgICAgICAgdG9rZW5TdXBwbHlfID0gX2Ftb3VudE9mVG9rZW5zOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyB1cGRhdGUgY2lyY3VsYXRpbmcgc3VwcGx5ICYgdGhlIGxlZGdlciBhZGRyZXNzIGZvciB0aGUgY3VzdG9tZXIKICAgICAgICB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdID0gU2FmZU1hdGguYWRkKHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc10sIF9hbW91bnRPZlRva2Vucyk7CiAgICAgICAgCiAgICAgICAgLy8gVGVsbHMgdGhlIGNvbnRyYWN0IHRoYXQgdGhlIGJ1eWVyIGRvZXNuJ3QgZGVzZXJ2ZSBkaXZpZGVuZHMgZm9yIHRoZSB0b2tlbnMgYmVmb3JlIHRoZXkgb3duZWQgdGhlbTsKICAgICAgICAvL3JlYWxseSBpIGtub3cgeW91IHRoaW5rIHlvdSBkbyBidXQgeW91IGRvbid0CiAgICAgICAgaW50MjU2IF91cGRhdGVkUGF5b3V0cyA9IChpbnQyNTYpICgocHJvZml0UGVyU2hhcmVfICogX2Ftb3VudE9mVG9rZW5zKSAtIF9mZWUpOwogICAgICAgIHBheW91dHNUb19bX2N1c3RvbWVyQWRkcmVzc10gKz0gX3VwZGF0ZWRQYXlvdXRzOwogICAgICAgIAogICAgICAgIC8vIGZpcmUgZXZlbnQKICAgICAgICBvblRva2VuUHVyY2hhc2UoX2N1c3RvbWVyQWRkcmVzcywgX2luY29taW5nRXRoZXJldW0sIF9hbW91bnRPZlRva2VucywgX3JlZmVycmVkQnkpOwogICAgICAgIAogICAgICAgIHJldHVybiBfYW1vdW50T2ZUb2tlbnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgVG9rZW4gcHJpY2UgYmFzZWQgb24gYW4gYW1vdW50IG9mIGluY29taW5nIGV0aGVyZXVtCiAgICAgKiBJdCdzIGFuIGFsZ29yaXRobSwgaG9wZWZ1bGx5IHdlIGdhdmUgeW91IHRoZSB3aGl0ZXBhcGVyIHdpdGggaXQgaW4gc2NpZW50aWZpYyBub3RhdGlvbjsKICAgICAqIFNvbWUgY29udmVyc2lvbnMgb2NjdXJyZWQgdG8gcHJldmVudCBkZWNpbWFsIGVycm9ycyBvciB1bmRlcmZsb3dzIC8gb3ZlcmZsb3dzIGluIHNvbGlkaXR5IGNvZGUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGV0aGVyZXVtVG9Ub2tlbnNfKHVpbnQyNTYgX2V0aGVyZXVtKQogICAgICAgIGludGVybmFsCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICB1aW50MjU2IF90b2tlblByaWNlSW5pdGlhbCA9IHRva2VuUHJpY2VJbml0aWFsXyAqIDFlMTg7CiAgICAgICAgdWludDI1NiBfdG9rZW5zUmVjZWl2ZWQgPSAKICAgICAgICAgKAogICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAvLyB1bmRlcmZsb3cgYXR0ZW1wdHMgQlRGTwogICAgICAgICAgICAgICAgU2FmZU1hdGguc3ViKAogICAgICAgICAgICAgICAgICAgIChzcXJ0CiAgICAgICAgICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfdG9rZW5QcmljZUluaXRpYWwqKjIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMioodG9rZW5QcmljZUluY3JlbWVudGFsXyAqIDFlMTgpKihfZXRoZXJldW0gKiAxZTE4KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoKHRva2VuUHJpY2VJbmNyZW1lbnRhbF8pKioyKSoodG9rZW5TdXBwbHlfKioyKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgyKih0b2tlblByaWNlSW5jcmVtZW50YWxfKSpfdG9rZW5QcmljZUluaXRpYWwqdG9rZW5TdXBwbHlfKQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKSwgX3Rva2VuUHJpY2VJbml0aWFsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkvKHRva2VuUHJpY2VJbmNyZW1lbnRhbF8pCiAgICAgICAgKS0odG9rZW5TdXBwbHlfKQogICAgICAgIDsKICAKICAgICAgICByZXR1cm4gX3Rva2Vuc1JlY2VpdmVkOwogICAgfQogICAgCiAgICAvKioKICAgICAqIENhbGN1bGF0ZSB0b2tlbiBzZWxsIHZhbHVlLgogICAgICogSXQncyBhbiBhbGdvcml0aG0sIGhvcGVmdWxseSB3ZSBnYXZlIHlvdSB0aGUgd2hpdGVwYXBlciB3aXRoIGl0IGluIHNjaWVudGlmaWMgbm90YXRpb247CiAgICAgKiBTb21lIGNvbnZlcnNpb25zIG9jY3VycmVkIHRvIHByZXZlbnQgZGVjaW1hbCBlcnJvcnMgb3IgdW5kZXJmbG93cyAvIG92ZXJmbG93cyBpbiBzb2xpZGl0eSBjb2RlLgogICAgICovCiAgICAgZnVuY3Rpb24gdG9rZW5zVG9FdGhlcmV1bV8odWludDI1NiBfdG9rZW5zKQogICAgICAgIGludGVybmFsCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKCiAgICAgICAgdWludDI1NiB0b2tlbnNfID0gKF90b2tlbnMgKyAxZTE4KTsKICAgICAgICB1aW50MjU2IF90b2tlblN1cHBseSA9ICh0b2tlblN1cHBseV8gKyAxZTE4KTsKICAgICAgICB1aW50MjU2IF9ldGhlclJlY2VpdmVkID0KICAgICAgICAoCiAgICAgICAgICAgIC8vIHVuZGVyZmxvdyBhdHRlbXB0cyBCVEZPCiAgICAgICAgICAgIFNhZmVNYXRoLnN1YigKICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuUHJpY2VJbml0aWFsXyArKHRva2VuUHJpY2VJbmNyZW1lbnRhbF8gKiAoX3Rva2VuU3VwcGx5LzFlMTgpKQogICAgICAgICAgICAgICAgICAgICAgICApLXRva2VuUHJpY2VJbmNyZW1lbnRhbF8KICAgICAgICAgICAgICAgICAgICApKih0b2tlbnNfIC0gMWUxOCkKICAgICAgICAgICAgICAgICksKHRva2VuUHJpY2VJbmNyZW1lbnRhbF8qKCh0b2tlbnNfKioyLXRva2Vuc18pLzFlMTgpKS8yCiAgICAgICAgICAgICkKICAgICAgICAvMWUxOCk7CiAgICAgICAgcmV0dXJuIF9ldGhlclJlY2VpdmVkOwogICAgfQogICAgCiAgICAKICAgIC8vVGhpcyBpcyB3aGVyZSBhbGwgeW91ciBnYXMgZ29lcywgc29ycnkKICAgIC8vTm90IHNvcnJ5LCB5b3UgcHJvYmFibHkgb25seSBwYWlkIDEgZ3dlaQogICAgZnVuY3Rpb24gc3FydCh1aW50IHgpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCB5KSB7CiAgICAgICAgdWludCB6ID0gKHggKyAxKSAvIDI7CiAgICAgICAgeSA9IHg7CiAgICAgICAgd2hpbGUgKHogPCB5KSB7CiAgICAgICAgICAgIHkgPSB6OwogICAgICAgICAgICB6ID0gKHggLyB6ICsgeikgLyAyOwogICAgICAgIH0KICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogICAgLyoqCiAgICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICAgKi8KICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICAgKi8KICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBTdWJzdHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgICAqLwogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICAgKi8KICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0='.
	

]
