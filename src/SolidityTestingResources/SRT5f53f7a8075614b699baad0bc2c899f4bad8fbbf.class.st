Class {
	#name : #SRT5f53f7a8075614b699baad0bc2c899f4bad8fbbf,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5f53f7a8075614b699baad0bc2c899f4bad8fbbf >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCgogICAgLyoqCiAgICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQoKfQoKCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgUG9TVG9rZW5TdGFuZGFyZAogKiBAZGV2IHRoZSBpbnRlcmZhY2Ugb2YgUG9TVG9rZW5TdGFuZGFyZAogKi8KY29udHJhY3QgUG9TVG9rZW5TdGFuZGFyZCB7CiAgICB1aW50MjU2IHB1YmxpYyBzdGFrZVN0YXJ0VGltZTsKICAgIHVpbnQyNTYgcHVibGljIHN0YWtlTWluQWdlOwogICAgdWludDI1NiBwdWJsaWMgc3Rha2VNYXhBZ2U7CiAgICBmdW5jdGlvbiBtaW50KCkgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBjb2luQWdlKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiBhbm51YWxJbnRlcmVzdCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgX2FkZHJlc3MsIHVpbnQgX3Jld2FyZCk7Cn0KCgpjb250cmFjdCBSZWJlbGxpb3VzIGlzIEVSQzIwLCBQb1NUb2tlblN0YW5kYXJkLCBPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJSZWJlbGxpb3VzIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlJFQkwiOwogICAgdWludCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKCiAgICB1aW50IHB1YmxpYyBjaGFpblN0YXJ0VGltZTsgLy8gY2hhaW4gc3RhcnQgdGltZQogICAgdWludCBwdWJsaWMgY2hhaW5TdGFydEJsb2NrTnVtYmVyOyAvLyBjaGFpbiBzdGFydCBibG9jayBudW1iZXIKICAgIHVpbnQgcHVibGljIHN0YWtlU3RhcnRUaW1lOyAvLyBzdGFrZSBzdGFydCB0aW1lCiAgICB1aW50IHB1YmxpYyBzdGFrZU1pbkFnZSA9IDEwIGRheXM7IC8vIG1pbmltdW0gYWdlIGZvciBjb2luIGFnZTogM0QKICAgIHVpbnQgcHVibGljIHN0YWtlTWF4QWdlID0gMzAgZGF5czsgLy8gc3Rha2UgYWdlIG9mIGZ1bGwgd2VpZ2h0OiA5MEQKICAgIHVpbnQgcHVibGljIG1heE1pbnRQcm9vZk9mU3Rha2UgPSAxMCoqMTc7IC8vIGRlZmF1bHQgMTAlIGFubnVhbCBpbnRlcmVzdAoKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogICAgdWludCBwdWJsaWMgbWF4VG90YWxTdXBwbHk7CiAgICB1aW50IHB1YmxpYyB0b3RhbEluaXRpYWxTdXBwbHk7CgogICAgc3RydWN0IHRyYW5zZmVySW5TdHJ1Y3R7CiAgICB1aW50MTI4IGFtb3VudDsKICAgIHVpbnQ2NCB0aW1lOwogICAgfQoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHRyYW5zZmVySW5TdHJ1Y3RbXSkgdHJhbnNmZXJJbnM7CgogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgYnVybmVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICAvKioKICAgICAqIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICAgICByZXF1aXJlKG1zZy5kYXRhLmxlbmd0aCA+PSBzaXplICsgNCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBjYW5Qb1NNaW50KCkgewogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkgPCBtYXhUb3RhbFN1cHBseSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBSZWJlbGxpb3VzKCkgewogICAgICAgIG1heFRvdGFsU3VwcGx5ID0gNjkuNioxMCoqMjU7IC8vIDY5NiBNaWwuCiAgICAgICAgdG90YWxJbml0aWFsU3VwcGx5ID0gMzkuNioxMCoqMjU7IC8vIDM5NiBNaWwuCgogICAgICAgIGNoYWluU3RhcnRUaW1lID0gbm93OwogICAgICAgIGNoYWluU3RhcnRCbG9ja051bWJlciA9IGJsb2NrLm51bWJlcjsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSB0b3RhbEluaXRpYWxTdXBwbHk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbEluaXRpYWxTdXBwbHk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYobXNnLnNlbmRlciA9PSBfdG8pIHJldHVybiBtaW50KCk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ubGVuZ3RoID4gMCkgZGVsZXRlIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdOwogICAgICAgIHVpbnQ2NCBfbm93ID0gdWludDY0KG5vdyk7CiAgICAgICAgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQxMjgoYmFsYW5jZXNbbXNnLnNlbmRlcl0pLF9ub3cpKTsKICAgICAgICB0cmFuc2Zlckluc1tfdG9dLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KF92YWx1ZSksX25vdykpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgICAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgICAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICBpZih0cmFuc2Zlckluc1tfZnJvbV0ubGVuZ3RoID4gMCkgZGVsZXRlIHRyYW5zZmVySW5zW19mcm9tXTsKICAgICAgICB1aW50NjQgX25vdyA9IHVpbnQ2NChub3cpOwogICAgICAgIHRyYW5zZmVySW5zW19mcm9tXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDEyOChiYWxhbmNlc1tfZnJvbV0pLF9ub3cpKTsKICAgICAgICB0cmFuc2Zlckluc1tfdG9dLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KF92YWx1ZSksX25vdykpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbnQoKSBjYW5Qb1NNaW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZihiYWxhbmNlc1ttc2cuc2VuZGVyXSA8PSAwKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ubGVuZ3RoIDw9IDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgdWludCByZXdhcmQgPSBnZXRQcm9vZk9mU3Rha2VSZXdhcmQobXNnLnNlbmRlcik7CiAgICAgICAgaWYocmV3YXJkIDw9IDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQocmV3YXJkKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZChyZXdhcmQpOwogICAgICAgIGRlbGV0ZSB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXTsKICAgICAgICB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDEyOChiYWxhbmNlc1ttc2cuc2VuZGVyXSksdWludDY0KG5vdykpKTsKCiAgICAgICAgTWludChtc2cuc2VuZGVyLCByZXdhcmQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJsb2NrTnVtYmVyKCkgcmV0dXJucyAodWludCBibG9ja051bWJlcikgewogICAgICAgIGJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyLnN1YihjaGFpblN0YXJ0QmxvY2tOdW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvaW5BZ2UoKSBjb25zdGFudCByZXR1cm5zICh1aW50IG15Q29pbkFnZSkgewogICAgICAgIG15Q29pbkFnZSA9IGdldENvaW5BZ2UobXNnLnNlbmRlcixub3cpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFubnVhbEludGVyZXN0KCkgY29uc3RhbnQgcmV0dXJucyh1aW50IGludGVyZXN0KSB7CiAgICAgICAgaW50ZXJlc3QgPSBtYXhNaW50UHJvb2ZPZlN0YWtlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFByb29mT2ZTdGFrZVJld2FyZChhZGRyZXNzIF9hZGRyZXNzKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmVxdWlyZSggKG5vdyA+PSBzdGFrZVN0YXJ0VGltZSkgJiYgKHN0YWtlU3RhcnRUaW1lID4gMCkgKTsKCiAgICAgICAgdWludCBfbm93ID0gbm93OwogICAgICAgIHVpbnQgX2NvaW5BZ2UgPSBnZXRDb2luQWdlKF9hZGRyZXNzLCBfbm93KTsKICAgICAgICBpZihfY29pbkFnZSA8PSAwKSByZXR1cm4gMDsKCiAgICAgICAgdWludCBpbnRlcmVzdCA9IG1heE1pbnRQcm9vZk9mU3Rha2U7CgogICAgICAgIHJldHVybiAoX2NvaW5BZ2UgKiBpbnRlcmVzdCkuZGl2KDM2NSAqICgxMCoqZGVjaW1hbHMpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRDb2luQWdlKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX25vdykgaW50ZXJuYWwgcmV0dXJucyAodWludCBfY29pbkFnZSkgewogICAgICAgIGlmKHRyYW5zZmVySW5zW19hZGRyZXNzXS5sZW5ndGggPD0gMCkgcmV0dXJuIDA7CgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IHRyYW5zZmVySW5zW19hZGRyZXNzXS5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgIGlmKCBfbm93IDwgdWludCh0cmFuc2Zlckluc1tfYWRkcmVzc11baV0udGltZSkuYWRkKHN0YWtlTWluQWdlKSApIGNvbnRpbnVlOwoKICAgICAgICAgICAgdWludCBuQ29pblNlY29uZHMgPSBfbm93LnN1Yih1aW50KHRyYW5zZmVySW5zW19hZGRyZXNzXVtpXS50aW1lKSk7CiAgICAgICAgICAgIGlmKCBuQ29pblNlY29uZHMgPiBzdGFrZU1heEFnZSApIG5Db2luU2Vjb25kcyA9IHN0YWtlTWF4QWdlOwoKICAgICAgICAgICAgX2NvaW5BZ2UgPSBfY29pbkFnZS5hZGQodWludCh0cmFuc2Zlckluc1tfYWRkcmVzc11baV0uYW1vdW50KSAqIG5Db2luU2Vjb25kcy5kaXYoMSBkYXlzKSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIG93bmVyU2V0U3Rha2VTdGFydFRpbWUodWludCB0aW1lc3RhbXApIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZSgoc3Rha2VTdGFydFRpbWUgPD0gMCkgJiYgKHRpbWVzdGFtcCA+PSBjaGFpblN0YXJ0VGltZSkpOwogICAgICAgIHN0YWtlU3RhcnRUaW1lID0gdGltZXN0YW1wOwogICAgfQoKICAgIGZ1bmN0aW9uIG93bmVyQnVyblRva2VuKHVpbnQgX3ZhbHVlKSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgZGVsZXRlIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdOwogICAgICAgIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KGJhbGFuY2VzW21zZy5zZW5kZXJdKSx1aW50NjQobm93KSkpOwoKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIHRvdGFsSW5pdGlhbFN1cHBseSA9IHRvdGFsSW5pdGlhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgICAgICBtYXhUb3RhbFN1cHBseSA9IG1heFRvdGFsU3VwcGx5LnN1YihfdmFsdWUqMTApOwoKICAgICAgICBCdXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICB9CgogICAgLyogQmF0Y2ggdG9rZW4gdHJhbnNmZXIuIFVzZWQgYnkgY29udHJhY3QgY3JlYXRvciB0byBkaXN0cmlidXRlIGluaXRpYWwgdG9rZW5zIHRvIGhvbGRlcnMgKi8KICAgIGZ1bmN0aW9uIGJhdGNoVHJhbnNmZXIoYWRkcmVzc1tdIF9yZWNpcGllbnRzLCB1aW50W10gX3ZhbHVlcykgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKCBfcmVjaXBpZW50cy5sZW5ndGggPiAwICYmIF9yZWNpcGllbnRzLmxlbmd0aCA9PSBfdmFsdWVzLmxlbmd0aCk7CgogICAgICAgIHVpbnQgdG90YWwgPSAwOwogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgX3ZhbHVlcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgIHRvdGFsID0gdG90YWwuYWRkKF92YWx1ZXNbaV0pOwogICAgICAgIH0KICAgICAgICByZXF1aXJlKHRvdGFsIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAgICAgdWludDY0IF9ub3cgPSB1aW50NjQobm93KTsKICAgICAgICBmb3IodWludCBqID0gMDsgaiA8IF9yZWNpcGllbnRzLmxlbmd0aDsgaisrKXsKICAgICAgICAgICAgYmFsYW5jZXNbX3JlY2lwaWVudHNbal1dID0gYmFsYW5jZXNbX3JlY2lwaWVudHNbal1dLmFkZChfdmFsdWVzW2pdKTsKICAgICAgICAgICAgdHJhbnNmZXJJbnNbX3JlY2lwaWVudHNbal1dLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KF92YWx1ZXNbal0pLF9ub3cpKTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3JlY2lwaWVudHNbal0sIF92YWx1ZXNbal0pOwogICAgICAgIH0KCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIodG90YWwpOwogICAgICAgIGlmKHRyYW5zZmVySW5zW21zZy5zZW5kZXJdLmxlbmd0aCA+IDApIGRlbGV0ZSB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXTsKICAgICAgICBpZihiYWxhbmNlc1ttc2cuc2VuZGVyXSA+IDApIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KGJhbGFuY2VzW21zZy5zZW5kZXJdKSxfbm93KSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9'.
	

]
