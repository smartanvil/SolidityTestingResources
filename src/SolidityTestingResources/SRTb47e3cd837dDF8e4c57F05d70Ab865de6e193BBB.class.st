Class {
	#name : #SRTb47e3cd837dDF8e4c57F05d70Ab865de6e193BBB,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb47e3cd837dDF8e4c57F05d70Ab865de6e193BBB >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKY29udHJhY3QgQ3J5cHRvUHVua3NNYXJrZXQgewoKICAgIC8vIFlvdSBjYW4gdXNlIHRoaXMgaGFzaCB0byB2ZXJpZnkgdGhlIGltYWdlIGZpbGUgY29udGFpbmluZyBhbGwgdGhlIHB1bmtzCiAgICBzdHJpbmcgcHVibGljIGltYWdlSGFzaCA9ICJhYzM5YWY0NzkzMTE5ZWU0NmJiZmYzNTFkOGNiNmI1ZjIzZGE2MDIyMjEyNmFkZDQyNjhlMjYxMTk5YTI5MjFiIjsKCiAgICBhZGRyZXNzIG93bmVyOwoKICAgIHN0cmluZyBwdWJsaWMgc3RhbmRhcmQgPSAnQ3J5cHRvUHVua3MnOwogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICB1aW50IHB1YmxpYyBuZXh0UHVua0luZGV4VG9Bc3NpZ24gPSAwOwoKICAgIGJvb2wgcHVibGljIGFsbFB1bmtzQXNzaWduZWQgPSBmYWxzZTsKICAgIHVpbnQgcHVibGljIHB1bmtzUmVtYWluaW5nVG9Bc3NpZ24gPSAwOwoKICAgIC8vbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYWRkcmVzc1RvUHVua0luZGV4OwogICAgbWFwcGluZyAodWludCA9PiBhZGRyZXNzKSBwdWJsaWMgcHVua0luZGV4VG9BZGRyZXNzOwoKICAgIC8qIFRoaXMgY3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBiYWxhbmNlcyAqLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwoKICAgIHN0cnVjdCBPZmZlciB7CiAgICAgICAgYm9vbCBpc0ZvclNhbGU7CiAgICAgICAgdWludCBwdW5rSW5kZXg7CiAgICAgICAgYWRkcmVzcyBzZWxsZXI7CiAgICAgICAgdWludCBtaW5WYWx1ZTsgICAgICAgICAgLy8gaW4gZXRoZXIKICAgICAgICBhZGRyZXNzIG9ubHlTZWxsVG87ICAgICAvLyBzcGVjaWZ5IHRvIHNlbGwgb25seSB0byBhIHNwZWNpZmljIHBlcnNvbgogICAgfQoKICAgIHN0cnVjdCBCaWQgewogICAgICAgIGJvb2wgaGFzQmlkOwogICAgICAgIHVpbnQgcHVua0luZGV4OwogICAgICAgIGFkZHJlc3MgYmlkZGVyOwogICAgICAgIHVpbnQgdmFsdWU7CiAgICB9CgogICAgLy8gQSByZWNvcmQgb2YgcHVua3MgdGhhdCBhcmUgb2ZmZXJlZCBmb3Igc2FsZSBhdCBhIHNwZWNpZmljIG1pbmltdW0gdmFsdWUsIGFuZCBwZXJoYXBzIHRvIGEgc3BlY2lmaWMgcGVyc29uCiAgICBtYXBwaW5nICh1aW50ID0+IE9mZmVyKSBwdWJsaWMgcHVua3NPZmZlcmVkRm9yU2FsZTsKCiAgICAvLyBBIHJlY29yZCBvZiB0aGUgaGlnaGVzdCBwdW5rIGJpZAogICAgbWFwcGluZyAodWludCA9PiBCaWQpIHB1YmxpYyBwdW5rQmlkczsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBwZW5kaW5nV2l0aGRyYXdhbHM7CgogICAgZXZlbnQgQXNzaWduKGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBwdW5rSW5kZXgpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBQdW5rVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBwdW5rSW5kZXgpOwogICAgZXZlbnQgUHVua09mZmVyZWQodWludCBpbmRleGVkIHB1bmtJbmRleCwgdWludCBtaW5WYWx1ZSwgYWRkcmVzcyBpbmRleGVkIHRvQWRkcmVzcyk7CiAgICBldmVudCBQdW5rQmlkRW50ZXJlZCh1aW50IGluZGV4ZWQgcHVua0luZGV4LCB1aW50IHZhbHVlLCBhZGRyZXNzIGluZGV4ZWQgZnJvbUFkZHJlc3MpOwogICAgZXZlbnQgUHVua0JpZFdpdGhkcmF3bih1aW50IGluZGV4ZWQgcHVua0luZGV4LCB1aW50IHZhbHVlLCBhZGRyZXNzIGluZGV4ZWQgZnJvbUFkZHJlc3MpOwogICAgZXZlbnQgUHVua0JvdWdodCh1aW50IGluZGV4ZWQgcHVua0luZGV4LCB1aW50IHZhbHVlLCBhZGRyZXNzIGluZGV4ZWQgZnJvbUFkZHJlc3MsIGFkZHJlc3MgaW5kZXhlZCB0b0FkZHJlc3MpOwogICAgZXZlbnQgUHVua05vTG9uZ2VyRm9yU2FsZSh1aW50IGluZGV4ZWQgcHVua0luZGV4KTsKCiAgICAvKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QgKi8KICAgIGZ1bmN0aW9uIENyeXB0b1B1bmtzTWFya2V0KCkgcGF5YWJsZSB7CiAgICAgICAgLy8gICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IGluaXRpYWxTdXBwbHk7ICAgICAgICAgICAgICAvLyBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucwogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICB0b3RhbFN1cHBseSA9IDEwMDAwOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbCBzdXBwbHkKICAgICAgICBwdW5rc1JlbWFpbmluZ1RvQXNzaWduID0gdG90YWxTdXBwbHk7CiAgICAgICAgbmFtZSA9ICJDUllQVE9QVU5LUyI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIG5hbWUgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgICAgICBzeW1ib2wgPSAiz74iOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIGRlY2ltYWxzID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbW91bnQgb2YgZGVjaW1hbHMgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRJbml0aWFsT3duZXIoYWRkcmVzcyB0bywgdWludCBwdW5rSW5kZXgpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7CiAgICAgICAgaWYgKGFsbFB1bmtzQXNzaWduZWQpIHRocm93OwogICAgICAgIGlmIChwdW5rSW5kZXggPj0gMTAwMDApIHRocm93OwogICAgICAgIGlmIChwdW5rSW5kZXhUb0FkZHJlc3NbcHVua0luZGV4XSAhPSB0bykgewogICAgICAgICAgICBpZiAocHVua0luZGV4VG9BZGRyZXNzW3B1bmtJbmRleF0gIT0gMHgwKSB7CiAgICAgICAgICAgICAgICBiYWxhbmNlT2ZbcHVua0luZGV4VG9BZGRyZXNzW3B1bmtJbmRleF1dLS07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBwdW5rc1JlbWFpbmluZ1RvQXNzaWduLS07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcHVua0luZGV4VG9BZGRyZXNzW3B1bmtJbmRleF0gPSB0bzsKICAgICAgICAgICAgYmFsYW5jZU9mW3RvXSsrOwogICAgICAgICAgICBBc3NpZ24odG8sIHB1bmtJbmRleCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldEluaXRpYWxPd25lcnMoYWRkcmVzc1tdIGFkZHJlc3NlcywgdWludFtdIGluZGljZXMpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7CiAgICAgICAgdWludCBuID0gYWRkcmVzc2VzLmxlbmd0aDsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgc2V0SW5pdGlhbE93bmVyKGFkZHJlc3Nlc1tpXSwgaW5kaWNlc1tpXSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGFsbEluaXRpYWxPd25lcnNBc3NpZ25lZCgpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7CiAgICAgICAgYWxsUHVua3NBc3NpZ25lZCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UHVuayh1aW50IHB1bmtJbmRleCkgewogICAgICAgIGlmICghYWxsUHVua3NBc3NpZ25lZCkgdGhyb3c7CiAgICAgICAgaWYgKHB1bmtzUmVtYWluaW5nVG9Bc3NpZ24gPT0gMCkgdGhyb3c7CiAgICAgICAgaWYgKHB1bmtJbmRleFRvQWRkcmVzc1twdW5rSW5kZXhdICE9IDB4MCkgdGhyb3c7CiAgICAgICAgaWYgKHB1bmtJbmRleCA+PSAxMDAwMCkgdGhyb3c7CiAgICAgICAgcHVua0luZGV4VG9BZGRyZXNzW3B1bmtJbmRleF0gPSBtc2cuc2VuZGVyOwogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSsrOwogICAgICAgIHB1bmtzUmVtYWluaW5nVG9Bc3NpZ24tLTsKICAgICAgICBBc3NpZ24obXNnLnNlbmRlciwgcHVua0luZGV4KTsKICAgIH0KCiAgICAvLyBUcmFuc2ZlciBvd25lcnNoaXAgb2YgYSBwdW5rIHRvIGFub3RoZXIgdXNlciB3aXRob3V0IHJlcXVpcmluZyBwYXltZW50CiAgICBmdW5jdGlvbiB0cmFuc2ZlclB1bmsoYWRkcmVzcyB0bywgdWludCBwdW5rSW5kZXgpIHsKICAgICAgICBpZiAoIWFsbFB1bmtzQXNzaWduZWQpIHRocm93OwogICAgICAgIGlmIChwdW5rSW5kZXhUb0FkZHJlc3NbcHVua0luZGV4XSAhPSBtc2cuc2VuZGVyKSB0aHJvdzsKICAgICAgICBpZiAocHVua0luZGV4ID49IDEwMDAwKSB0aHJvdzsKICAgICAgICBpZiAocHVua3NPZmZlcmVkRm9yU2FsZVtwdW5rSW5kZXhdLmlzRm9yU2FsZSkgewogICAgICAgICAgICBwdW5rTm9Mb25nZXJGb3JTYWxlKHB1bmtJbmRleCk7CiAgICAgICAgfQogICAgICAgIHB1bmtJbmRleFRvQWRkcmVzc1twdW5rSW5kZXhdID0gdG87CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdLS07CiAgICAgICAgYmFsYW5jZU9mW3RvXSsrOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIHRvLCAxKTsKICAgICAgICBQdW5rVHJhbnNmZXIobXNnLnNlbmRlciwgdG8sIHB1bmtJbmRleCk7CiAgICAgICAgLy8gQ2hlY2sgZm9yIHRoZSBjYXNlIHdoZXJlIHRoZXJlIGlzIGEgYmlkIGZyb20gdGhlIG5ldyBvd25lciBhbmQgcmVmdW5kIGl0LgogICAgICAgIC8vIEFueSBvdGhlciBiaWQgY2FuIHN0YXkgaW4gcGxhY2UuCiAgICAgICAgQmlkIGJpZCA9IHB1bmtCaWRzW3B1bmtJbmRleF07CiAgICAgICAgaWYgKGJpZC5iaWRkZXIgPT0gdG8pIHsKICAgICAgICAgICAgLy8gS2lsbCBiaWQgYW5kIHJlZnVuZCB2YWx1ZQogICAgICAgICAgICBwZW5kaW5nV2l0aGRyYXdhbHNbdG9dICs9IGJpZC52YWx1ZTsKICAgICAgICAgICAgcHVua0JpZHNbcHVua0luZGV4XSA9IEJpZChmYWxzZSwgcHVua0luZGV4LCAweDAsIDApOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBwdW5rTm9Mb25nZXJGb3JTYWxlKHVpbnQgcHVua0luZGV4KSB7CiAgICAgICAgaWYgKCFhbGxQdW5rc0Fzc2lnbmVkKSB0aHJvdzsKICAgICAgICBpZiAocHVua0luZGV4VG9BZGRyZXNzW3B1bmtJbmRleF0gIT0gbXNnLnNlbmRlcikgdGhyb3c7CiAgICAgICAgaWYgKHB1bmtJbmRleCA+PSAxMDAwMCkgdGhyb3c7CiAgICAgICAgcHVua3NPZmZlcmVkRm9yU2FsZVtwdW5rSW5kZXhdID0gT2ZmZXIoZmFsc2UsIHB1bmtJbmRleCwgbXNnLnNlbmRlciwgMCwgMHgwKTsKICAgICAgICBQdW5rTm9Mb25nZXJGb3JTYWxlKHB1bmtJbmRleCk7CiAgICB9CgogICAgZnVuY3Rpb24gb2ZmZXJQdW5rRm9yU2FsZSh1aW50IHB1bmtJbmRleCwgdWludCBtaW5TYWxlUHJpY2VJbldlaSkgewogICAgICAgIGlmICghYWxsUHVua3NBc3NpZ25lZCkgdGhyb3c7CiAgICAgICAgaWYgKHB1bmtJbmRleFRvQWRkcmVzc1twdW5rSW5kZXhdICE9IG1zZy5zZW5kZXIpIHRocm93OwogICAgICAgIGlmIChwdW5rSW5kZXggPj0gMTAwMDApIHRocm93OwogICAgICAgIHB1bmtzT2ZmZXJlZEZvclNhbGVbcHVua0luZGV4XSA9IE9mZmVyKHRydWUsIHB1bmtJbmRleCwgbXNnLnNlbmRlciwgbWluU2FsZVByaWNlSW5XZWksIDB4MCk7CiAgICAgICAgUHVua09mZmVyZWQocHVua0luZGV4LCBtaW5TYWxlUHJpY2VJbldlaSwgMHgwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvZmZlclB1bmtGb3JTYWxlVG9BZGRyZXNzKHVpbnQgcHVua0luZGV4LCB1aW50IG1pblNhbGVQcmljZUluV2VpLCBhZGRyZXNzIHRvQWRkcmVzcykgewogICAgICAgIGlmICghYWxsUHVua3NBc3NpZ25lZCkgdGhyb3c7CiAgICAgICAgaWYgKHB1bmtJbmRleFRvQWRkcmVzc1twdW5rSW5kZXhdICE9IG1zZy5zZW5kZXIpIHRocm93OwogICAgICAgIGlmIChwdW5rSW5kZXggPj0gMTAwMDApIHRocm93OwogICAgICAgIHB1bmtzT2ZmZXJlZEZvclNhbGVbcHVua0luZGV4XSA9IE9mZmVyKHRydWUsIHB1bmtJbmRleCwgbXNnLnNlbmRlciwgbWluU2FsZVByaWNlSW5XZWksIHRvQWRkcmVzcyk7CiAgICAgICAgUHVua09mZmVyZWQocHVua0luZGV4LCBtaW5TYWxlUHJpY2VJbldlaSwgdG9BZGRyZXNzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXlQdW5rKHVpbnQgcHVua0luZGV4KSBwYXlhYmxlIHsKICAgICAgICBpZiAoIWFsbFB1bmtzQXNzaWduZWQpIHRocm93OwogICAgICAgIE9mZmVyIG9mZmVyID0gcHVua3NPZmZlcmVkRm9yU2FsZVtwdW5rSW5kZXhdOwogICAgICAgIGlmIChwdW5rSW5kZXggPj0gMTAwMDApIHRocm93OwogICAgICAgIGlmICghb2ZmZXIuaXNGb3JTYWxlKSB0aHJvdzsgICAgICAgICAgICAgICAgLy8gcHVuayBub3QgYWN0dWFsbHkgZm9yIHNhbGUKICAgICAgICBpZiAob2ZmZXIub25seVNlbGxUbyAhPSAweDAgJiYgb2ZmZXIub25seVNlbGxUbyAhPSBtc2cuc2VuZGVyKSB0aHJvdzsgIC8vIHB1bmsgbm90IHN1cHBvc2VkIHRvIGJlIHNvbGQgdG8gdGhpcyB1c2VyCiAgICAgICAgaWYgKG1zZy52YWx1ZSA8IG9mZmVyLm1pblZhbHVlKSB0aHJvdzsgICAgICAvLyBEaWRuJ3Qgc2VuZCBlbm91Z2ggRVRICiAgICAgICAgaWYgKG9mZmVyLnNlbGxlciAhPSBwdW5rSW5kZXhUb0FkZHJlc3NbcHVua0luZGV4XSkgdGhyb3c7IC8vIFNlbGxlciBubyBsb25nZXIgb3duZXIgb2YgcHVuawoKICAgICAgICBhZGRyZXNzIHNlbGxlciA9IG9mZmVyLnNlbGxlcjsKCiAgICAgICAgcHVua0luZGV4VG9BZGRyZXNzW3B1bmtJbmRleF0gPSBtc2cuc2VuZGVyOwogICAgICAgIGJhbGFuY2VPZltzZWxsZXJdLS07CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdKys7CiAgICAgICAgVHJhbnNmZXIoc2VsbGVyLCBtc2cuc2VuZGVyLCAxKTsKCiAgICAgICAgcHVua05vTG9uZ2VyRm9yU2FsZShwdW5rSW5kZXgpOwogICAgICAgIHBlbmRpbmdXaXRoZHJhd2Fsc1tzZWxsZXJdICs9IG1zZy52YWx1ZTsKICAgICAgICBQdW5rQm91Z2h0KHB1bmtJbmRleCwgbXNnLnZhbHVlLCBzZWxsZXIsIG1zZy5zZW5kZXIpOwoKICAgICAgICAvLyBDaGVjayBmb3IgdGhlIGNhc2Ugd2hlcmUgdGhlcmUgaXMgYSBiaWQgZnJvbSB0aGUgbmV3IG93bmVyIGFuZCByZWZ1bmQgaXQuCiAgICAgICAgLy8gQW55IG90aGVyIGJpZCBjYW4gc3RheSBpbiBwbGFjZS4KICAgICAgICBCaWQgYmlkID0gcHVua0JpZHNbcHVua0luZGV4XTsKICAgICAgICBpZiAoYmlkLmJpZGRlciA9PSBtc2cuc2VuZGVyKSB7CiAgICAgICAgICAgIC8vIEtpbGwgYmlkIGFuZCByZWZ1bmQgdmFsdWUKICAgICAgICAgICAgcGVuZGluZ1dpdGhkcmF3YWxzW21zZy5zZW5kZXJdICs9IGJpZC52YWx1ZTsKICAgICAgICAgICAgcHVua0JpZHNbcHVua0luZGV4XSA9IEJpZChmYWxzZSwgcHVua0luZGV4LCAweDAsIDApOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhdygpIHsKICAgICAgICBpZiAoIWFsbFB1bmtzQXNzaWduZWQpIHRocm93OwogICAgICAgIHVpbnQgYW1vdW50ID0gcGVuZGluZ1dpdGhkcmF3YWxzW21zZy5zZW5kZXJdOwogICAgICAgIC8vIFJlbWVtYmVyIHRvIHplcm8gdGhlIHBlbmRpbmcgcmVmdW5kIGJlZm9yZQogICAgICAgIC8vIHNlbmRpbmcgdG8gcHJldmVudCByZS1lbnRyYW5jeSBhdHRhY2tzCiAgICAgICAgcGVuZGluZ1dpdGhkcmF3YWxzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gZW50ZXJCaWRGb3JQdW5rKHVpbnQgcHVua0luZGV4KSBwYXlhYmxlIHsKICAgICAgICBpZiAocHVua0luZGV4ID49IDEwMDAwKSB0aHJvdzsKICAgICAgICBpZiAoIWFsbFB1bmtzQXNzaWduZWQpIHRocm93OyAgICAgICAgICAgICAgICAKICAgICAgICBpZiAocHVua0luZGV4VG9BZGRyZXNzW3B1bmtJbmRleF0gPT0gMHgwKSB0aHJvdzsKICAgICAgICBpZiAocHVua0luZGV4VG9BZGRyZXNzW3B1bmtJbmRleF0gPT0gbXNnLnNlbmRlcikgdGhyb3c7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA9PSAwKSB0aHJvdzsKICAgICAgICBCaWQgZXhpc3RpbmcgPSBwdW5rQmlkc1twdW5rSW5kZXhdOwogICAgICAgIGlmIChtc2cudmFsdWUgPD0gZXhpc3RpbmcudmFsdWUpIHRocm93OwogICAgICAgIGlmIChleGlzdGluZy52YWx1ZSA+IDApIHsKICAgICAgICAgICAgLy8gUmVmdW5kIHRoZSBmYWlsaW5nIGJpZAogICAgICAgICAgICBwZW5kaW5nV2l0aGRyYXdhbHNbZXhpc3RpbmcuYmlkZGVyXSArPSBleGlzdGluZy52YWx1ZTsKICAgICAgICB9CiAgICAgICAgcHVua0JpZHNbcHVua0luZGV4XSA9IEJpZCh0cnVlLCBwdW5rSW5kZXgsIG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICAgICAgUHVua0JpZEVudGVyZWQocHVua0luZGV4LCBtc2cudmFsdWUsIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFjY2VwdEJpZEZvclB1bmsodWludCBwdW5rSW5kZXgsIHVpbnQgbWluUHJpY2UpIHsKICAgICAgICBpZiAocHVua0luZGV4ID49IDEwMDAwKSB0aHJvdzsKICAgICAgICBpZiAoIWFsbFB1bmtzQXNzaWduZWQpIHRocm93OyAgICAgICAgICAgICAgICAKICAgICAgICBpZiAocHVua0luZGV4VG9BZGRyZXNzW3B1bmtJbmRleF0gIT0gbXNnLnNlbmRlcikgdGhyb3c7CiAgICAgICAgYWRkcmVzcyBzZWxsZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIEJpZCBiaWQgPSBwdW5rQmlkc1twdW5rSW5kZXhdOwogICAgICAgIGlmIChiaWQudmFsdWUgPT0gMCkgdGhyb3c7CiAgICAgICAgaWYgKGJpZC52YWx1ZSA8IG1pblByaWNlKSB0aHJvdzsKCiAgICAgICAgcHVua0luZGV4VG9BZGRyZXNzW3B1bmtJbmRleF0gPSBiaWQuYmlkZGVyOwogICAgICAgIGJhbGFuY2VPZltzZWxsZXJdLS07CiAgICAgICAgYmFsYW5jZU9mW2JpZC5iaWRkZXJdKys7CiAgICAgICAgVHJhbnNmZXIoc2VsbGVyLCBiaWQuYmlkZGVyLCAxKTsKCiAgICAgICAgcHVua3NPZmZlcmVkRm9yU2FsZVtwdW5rSW5kZXhdID0gT2ZmZXIoZmFsc2UsIHB1bmtJbmRleCwgYmlkLmJpZGRlciwgMCwgMHgwKTsKICAgICAgICB1aW50IGFtb3VudCA9IGJpZC52YWx1ZTsKICAgICAgICBwdW5rQmlkc1twdW5rSW5kZXhdID0gQmlkKGZhbHNlLCBwdW5rSW5kZXgsIDB4MCwgMCk7CiAgICAgICAgcGVuZGluZ1dpdGhkcmF3YWxzW3NlbGxlcl0gKz0gYW1vdW50OwogICAgICAgIFB1bmtCb3VnaHQocHVua0luZGV4LCBiaWQudmFsdWUsIHNlbGxlciwgYmlkLmJpZGRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdCaWRGb3JQdW5rKHVpbnQgcHVua0luZGV4KSB7CiAgICAgICAgaWYgKHB1bmtJbmRleCA+PSAxMDAwMCkgdGhyb3c7CiAgICAgICAgaWYgKCFhbGxQdW5rc0Fzc2lnbmVkKSB0aHJvdzsgICAgICAgICAgICAgICAgCiAgICAgICAgaWYgKHB1bmtJbmRleFRvQWRkcmVzc1twdW5rSW5kZXhdID09IDB4MCkgdGhyb3c7CiAgICAgICAgaWYgKHB1bmtJbmRleFRvQWRkcmVzc1twdW5rSW5kZXhdID09IG1zZy5zZW5kZXIpIHRocm93OwogICAgICAgIEJpZCBiaWQgPSBwdW5rQmlkc1twdW5rSW5kZXhdOwogICAgICAgIGlmIChiaWQuYmlkZGVyICE9IG1zZy5zZW5kZXIpIHRocm93OwogICAgICAgIFB1bmtCaWRXaXRoZHJhd24ocHVua0luZGV4LCBiaWQudmFsdWUsIG1zZy5zZW5kZXIpOwogICAgICAgIHVpbnQgYW1vdW50ID0gYmlkLnZhbHVlOwogICAgICAgIHB1bmtCaWRzW3B1bmtJbmRleF0gPSBCaWQoZmFsc2UsIHB1bmtJbmRleCwgMHgwLCAwKTsKICAgICAgICAvLyBSZWZ1bmQgdGhlIGJpZCBtb25leQogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoYW1vdW50KTsKICAgIH0KCn0='.
	

]
