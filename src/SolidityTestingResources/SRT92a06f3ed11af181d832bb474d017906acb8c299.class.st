Class {
	#name : #SRT92a06f3ed11af181d832bb474d017906acb8c299,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT92a06f3ed11af181d832bb474d017906acb8c299 >> base64 [
	^ 'LyoqCiAqIE92ZXJmbG93IGF3YXJlIHVpbnQgbWF0aCBmdW5jdGlvbnMuCiAqCiAqIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9NYWtlckRBTy9tYWtlci1vdGMvYmxvYi9tYXN0ZXIvY29udHJhY3RzL3NpbXBsZV9tYXJrZXQuc29sCiAqLwpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCi8qKgogKiBFUkMgMjAgdG9rZW4KICoKICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBaZWVQaW5Ub2tlbiAgewogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJaZWVQaW4gVG9rZW4iOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiWlBUIjsKICAgIHVpbnQgcHVibGljIGRlY2ltYWxzID0gMTg7CgogICAgdWludCBwdWJsaWMgc3RhcnRUaW1lOyAvL2Nyb3dkc2FsZSBzdGFydCB0aW1lIChzZXQgaW4gY29uc3RydWN0b3IpCiAgICB1aW50IHB1YmxpYyBlbmRUaW1lOyAvL2Nyb3dkc2FsZSBlbmQgdGltZSAoc2V0IGluIGNvbnN0cnVjdG9yKQogICAgdWludCBwdWJsaWMgc3RhcnRFYXJseUJpcmQ7ICAvL2Nyb3dkc2FsZSBlbmQgdGltZSAoc2V0IGluIGNvbnN0cnVjdG9yKQogICAgdWludCBwdWJsaWMgZW5kRWFybHlCaXJkOyAgLy9jcm93ZHNhbGUgZW5kIHRpbWUgKHNldCBpbiBjb25zdHJ1Y3RvcikKICAgIHVpbnQgcHVibGljIHN0YXJ0UGVUaW1lOyAgLy9wZSBzdGFydCB0aW1lIChzZXQgaW4gY29uc3RydWN0b3IpCiAgICB1aW50IHB1YmxpYyBlbmRQZVRpbWU7IC8vcGUgZW5kIHRpbWUgKHNldCBpbiBjb25zdHJ1Y3RvcikKICAgIHVpbnQgcHVibGljIGVuZEZpcnN0V2VlazsKICAgIHVpbnQgcHVibGljIGVuZFNlY29uZFdlZWs7CiAgICB1aW50IHB1YmxpYyBlbmRUaGlyZFdlZWs7CiAgICB1aW50IHB1YmxpYyBlbmRGb3VydGhXZWVrOwogICAgdWludCBwdWJsaWMgZW5kRmlmdGhXZWVrOwoKCiAgICAvLyBJbml0aWFsIGZvdW5kZXIgYWRkcmVzcyAoc2V0IGluIGNvbnN0cnVjdG9yKQogICAgLy8gQWxsIGRlcG9zaXRlZCBFVEggd2lsbCBiZSBpbnN0YW50bHkgZm9yd2FyZGVkIHRvIHRoaXMgYWRkcmVzcy4KICAgIGFkZHJlc3MgcHVibGljIGZvdW5kZXIgPSAweDA7CgogICAgLy8gc2lnbmVyIGFkZHJlc3MgKGZvciBjbGlja3dyYXAgYWdyZWVtZW50KQogICAgLy8gc2VlIGZ1bmN0aW9uKCkge30gZm9yIGNvbW1lbnRzCiAgICBhZGRyZXNzIHB1YmxpYyBzaWduZXIgPSAweDA7CgogICAgLy8gcHJpY2UgaXMgZGVmaW5lZCBieSB0aW1lCiAgICB1aW50MjU2IHB1YmxpYyBwZVByaWNlID0gNjE2MDsKICAgIHVpbnQyNTYgcHVibGljIGVhcmx5QmlyZFByaWNlID0gNTcyMDsKICAgIHVpbnQyNTYgcHVibGljIGZpcnN0V2Vla1Rva2VuUHJpY2UgPSA0ODQwOwogICAgdWludDI1NiBwdWJsaWMgc2Vjb25kV2Vla1Rva2VuUHJpY2UgPSA0NzUyOwogICAgdWludDI1NiBwdWJsaWMgdGhpcmRXZWVrVG9rZW5QcmljZSA9IDQ2MjA7CiAgICB1aW50MjU2IHB1YmxpYyBmb3VydGhXZWVrVG9rZW5QcmljZSA9IDQ1MzI7CiAgICB1aW50MjU2IHB1YmxpYyBmaWZ0aFdlZWtUb2tlblByaWNlID0gNDQwMDsKCiAgICB1aW50MjU2IHB1YmxpYyBldGhlckNhcCA9IDkwOTA5ICogMTAqKmRlY2ltYWxzOyAvL21heCBhbW91bnQgcmFpc2VkIGR1cmluZyBjcm93ZHNhbGUsIHdoaWNoIHJlcHJlc2VudHMgNSwxMDAsMDAwLDAwMCBaUFRzCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbE1pbnRlZFRva2VuID0gMTAwMDAwMDAwMDsKICAgIHVpbnQyNTYgcHVibGljIGV0aGVyTG93TGltaXQgPSAxNjUwMCAqIDEwKipkZWNpbWFsczsKICAgIHVpbnQyNTYgcHVibGljIGVhcmx5QmlyZENhcCA9IDYxMTkgKiAxMCoqZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyBlYXJseUJpcmRNaW5QZXJQZXJzb24gPSA1ICogMTAqKmRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgZWFybHlCaXJkTWF4UGVyUGVyc29uID0gMjAwICogMTAqKmRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgcGVDYXAgPSAyNzAwICogMTAqKmRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgcGVNaW5QZXJQZXJzb24gPSAxNTAgKiAxMCoqZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyBwZU1heFBlclBlcnNvbiA9IDQ1MCAqIDEwKipkZWNpbWFsczsKICAgIHVpbnQyNTYgcHVibGljIHJlZ3VsYXJNaW5QZXJQZXJzb24gPSAxICogMTAqKjE3OwogICAgdWludDI1NiBwdWJsaWMgcmVndWxhck1heFBlclBlcnNvbiA9IDIwMCAqIDEwKipkZWNpbWFsczsKCiAgICB1aW50IHB1YmxpYyB0cmFuc2ZlckxvY2t1cCA9IDE1IGRheXMgOyAvL3RyYW5zZmVycyBhcmUgbG9ja2VkIGZvciB0aGlzIHRpbWUgcGVyaW9kIGFmdGVyCgogICAgdWludCBwdWJsaWMgZm91bmRlckxvY2t1cCA9IDIgd2Vla3M7IC8vZm91bmRlciBhbGxvY2F0aW9uIGNhbm5vdCBiZSBjcmVhdGVkIHVudGlsIHRoaXMgdGltZSBwZXJpb2QgYWZ0ZXIgZW5kVGltZQogICAgCgogICAgdWludDI1NiBwdWJsaWMgZm91bmRlckFsbG9jYXRpb24gPSAxMDAgKiAxMCoqMTY7IC8vMTAwJSBvZiB0b2tlbiBzdXBwbHkgYWxsb2NhdGVkIHBvc3QtY3Jvd2RzYWxlIGZvciB0aGUgZm91bmRlci9vcGVyYXRpb24gYWxsb2NhdGlvbgoKCiAgICBib29sIHB1YmxpYyBmb3VuZGVyQWxsb2NhdGVkID0gZmFsc2U7IC8vdGhpcyB3aWxsIGNoYW5nZSB0byB0cnVlIHdoZW4gdGhlIGZvdW5kZXIgZnVuZCBpcyBhbGxvY2F0ZWQKCiAgICB1aW50MjU2IHB1YmxpYyBzYWxlVG9rZW5TdXBwbHkgPSAwOyAvL3RoaXMgd2lsbCBrZWVwIHRyYWNrIG9mIHRoZSB0b2tlbiBzdXBwbHkgY3JlYXRlZCBkdXJpbmcgdGhlIGNyb3dkc2FsZQogICAgdWludDI1NiBwdWJsaWMgc2FsZUV0aGVyUmFpc2VkID0gMDsgLy90aGlzIHdpbGwga2VlcCB0cmFjayBvZiB0aGUgRXRoZXIgcmFpc2VkIGR1cmluZyB0aGUgY3Jvd2RzYWxlCiAgICBib29sIHB1YmxpYyBoYWx0ZWQgPSBmYWxzZTsgLy90aGUgZm91bmRlciBhZGRyZXNzIGNhbiBzZXQgdGhpcyB0byB0cnVlIHRvIGhhbHQgdGhlIGNyb3dkc2FsZSBkdWUgdG8gZW1lcmdlbmN5CgogICAgZXZlbnQgQnV5KHVpbnQyNTYgZXRoLCB1aW50MjU2IGZidCk7CiAgICBldmVudCBBbGxvY2F0ZUZvdW5kZXJUb2tlbnMoYWRkcmVzcyBpbmRleGVkIHNlbmRlcik7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgcHJpbnQoYnl0ZXMzMiBtc2cpOwoKICAgIC8vY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIFplZVBpblRva2VuKGFkZHJlc3MgZm91bmRlcklucHV0LCBhZGRyZXNzIHNpZ25lcklucHV0LCB1aW50IHN0YXJ0VGltZUlucHV0LCB1aW50IGVuZFRpbWVJbnB1dCwgdWludCBzdGFydEVhcmx5QmlyZElucHV0LCB1aW50IGVuZEVhcmx5QmlyZElucHV0LCB1aW50IHN0YXJ0UGVJbnB1dCwgdWludCBlbmRQZUlucHV0KSB7CiAgICAgICAgZm91bmRlciA9IGZvdW5kZXJJbnB1dDsKICAgICAgICBzaWduZXIgPSBzaWduZXJJbnB1dDsKICAgICAgICBzdGFydFRpbWUgPSBzdGFydFRpbWVJbnB1dDsKICAgICAgICBlbmRUaW1lID0gZW5kVGltZUlucHV0OwogICAgICAgIHN0YXJ0RWFybHlCaXJkID0gc3RhcnRFYXJseUJpcmRJbnB1dDsKICAgICAgICBlbmRFYXJseUJpcmQgPSBlbmRFYXJseUJpcmRJbnB1dDsKICAgICAgICBzdGFydFBlVGltZSA9IHN0YXJ0UGVJbnB1dDsKICAgICAgICBlbmRQZVRpbWUgPSBlbmRQZUlucHV0OwogICAgICAgIAogICAgICAgIGVuZEZpcnN0V2VlayA9IHN0YXJ0VGltZSArIDEgd2Vla3M7CiAgICAgICAgZW5kU2Vjb25kV2VlayA9IHN0YXJ0VGltZSArIDIgd2Vla3M7CiAgICAgICAgZW5kVGhpcmRXZWVrID0gc3RhcnRUaW1lICsgMyB3ZWVrczsKICAgICAgICBlbmRGb3VydGhXZWVrID0gc3RhcnRUaW1lICsgNCB3ZWVrczsKICAgICAgICBlbmRGaWZ0aFdlZWsgPSBzdGFydFRpbWUgKyA1IHdlZWtzOwogICAgfQoKICAgIC8vcHJpY2UgYmFzZWQgb24gY3VycmVudCB0b2tlbiBzdXBwbHkKICAgIGZ1bmN0aW9uIHByaWNlKCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgaWYgKG5vdyA8PSBlbmRFYXJseUJpcmQgJiYgbm93ID49IHN0YXJ0RWFybHlCaXJkKSByZXR1cm4gZWFybHlCaXJkUHJpY2U7CiAgICAgICAgaWYgKG5vdyA8PSBlbmRGaXJzdFdlZWspIHJldHVybiBmaXJzdFdlZWtUb2tlblByaWNlOwogICAgICAgIGlmIChub3cgPD0gZW5kU2Vjb25kV2VlaykgcmV0dXJuIHNlY29uZFdlZWtUb2tlblByaWNlOwogICAgICAgIGlmIChub3cgPD0gZW5kVGhpcmRXZWVrKSByZXR1cm4gdGhpcmRXZWVrVG9rZW5QcmljZTsKICAgICAgICBpZiAobm93IDw9IGVuZEZvdXJ0aFdlZWspIHJldHVybiBmb3VydGhXZWVrVG9rZW5QcmljZTsKICAgICAgICBpZiAobm93IDw9IGVuZEZpZnRoV2VlaykgcmV0dXJuIGZpZnRoV2Vla1Rva2VuUHJpY2U7CiAgICAgICAgcmV0dXJuIGZpZnRoV2Vla1Rva2VuUHJpY2U7CiAgICB9CgogICAgLy8gcHJpY2UoKSBleHBvc2VkIGZvciB1bml0IHRlc3RzCiAgICBmdW5jdGlvbiB0ZXN0UHJpY2UodWludDI1NiBjdXJyZW50VGltZSkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgaWYgKGN1cnJlbnRUaW1lIDwgZW5kRWFybHlCaXJkICYmIGN1cnJlbnRUaW1lID49IHN0YXJ0RWFybHlCaXJkKSByZXR1cm4gZWFybHlCaXJkUHJpY2U7CiAgICAgICAgaWYgKGN1cnJlbnRUaW1lIDwgZW5kRmlyc3RXZWVrICYmIGN1cnJlbnRUaW1lID49IHN0YXJ0VGltZSkgcmV0dXJuIGZpcnN0V2Vla1Rva2VuUHJpY2U7CiAgICAgICAgaWYgKGN1cnJlbnRUaW1lIDwgZW5kU2Vjb25kV2VlayAmJiBjdXJyZW50VGltZSA+PSBlbmRGaXJzdFdlZWspIHJldHVybiBzZWNvbmRXZWVrVG9rZW5QcmljZTsKICAgICAgICBpZiAoY3VycmVudFRpbWUgPCBlbmRUaGlyZFdlZWsgJiYgY3VycmVudFRpbWUgPj0gZW5kU2Vjb25kV2VlaykgcmV0dXJuIHRoaXJkV2Vla1Rva2VuUHJpY2U7CiAgICAgICAgaWYgKGN1cnJlbnRUaW1lIDwgZW5kRm91cnRoV2VlayAmJiBjdXJyZW50VGltZSA+PSBlbmRUaGlyZFdlZWspIHJldHVybiBmb3VydGhXZWVrVG9rZW5QcmljZTsKICAgICAgICBpZiAoY3VycmVudFRpbWUgPCBlbmRGaWZ0aFdlZWsgJiYgY3VycmVudFRpbWUgPj0gZW5kRm91cnRoV2VlaykgcmV0dXJuIGZpZnRoV2Vla1Rva2VuUHJpY2U7CiAgICAgICAgcmV0dXJuIGZpZnRoV2Vla1Rva2VuUHJpY2U7CiAgICB9CgoKICAgIC8vIEJ1eSBlbnRyeSBwb2ludAogICAgZnVuY3Rpb24gYnV5KCBieXRlczMyIGhhc2gpIHBheWFibGUgewogICAgICAgIHByaW50KGhhc2gpOwogICAgICAgIGlmICgoKG5vdyA8IHN0YXJ0VGltZSB8fCBub3cgPj0gZW5kVGltZSkgJiYgKG5vdyA8IHN0YXJ0RWFybHlCaXJkIHx8IG5vdyA+PSBlbmRFYXJseUJpcmQpKSB8fCBoYWx0ZWQpIHJldmVydCgpOwogICAgICAgIGlmIChub3c+PXN0YXJ0RWFybHlCaXJkICYmIG5vdzxlbmRFYXJseUJpcmQpIHsKICAgICAgICAgICAgaWYgKG1zZy52YWx1ZSA8IGVhcmx5QmlyZE1pblBlclBlcnNvbiB8fCBtc2cudmFsdWUgPiBlYXJseUJpcmRNYXhQZXJQZXJzb24gfHwgKHNhbGVFdGhlclJhaXNlZCArIG1zZy52YWx1ZSkgPiAocGVDYXAgKyBlYXJseUJpcmRDYXApKSB7CiAgICAgICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAobm93Pj1zdGFydFRpbWUgJiYgbm93PGVuZFRpbWUpIHsKICAgICAgICAgICAgaWYgKG1zZy52YWx1ZSA8IHJlZ3VsYXJNaW5QZXJQZXJzb24gfHwgbXNnLnZhbHVlID4gcmVndWxhck1heFBlclBlcnNvbiB8fCAoc2FsZUV0aGVyUmFpc2VkICsgbXNnLnZhbHVlKSA+IGV0aGVyQ2FwICkgewogICAgICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdWludDI1NiB0b2tlbnMgPSAobXNnLnZhbHVlICogcHJpY2UoKSk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gKyB0b2tlbnMpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gKHRvdGFsU3VwcGx5ICsgdG9rZW5zKTsKICAgICAgICBzYWxlRXRoZXJSYWlzZWQgPSAoc2FsZUV0aGVyUmFpc2VkICsgbXNnLnZhbHVlKTsKCiAgICAgICAgaWYgKCFmb3VuZGVyLmNhbGwudmFsdWUobXNnLnZhbHVlKSgpKSByZXZlcnQoKTsgLy9pbW1lZGlhdGVseSBzZW5kIEV0aGVyIHRvIGZvdW5kZXIgYWRkcmVzcwoKICAgICAgICBCdXkobXNnLnZhbHVlLCB0b2tlbnMpOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHVwIGZvdW5kZXIgYWRkcmVzcyB0b2tlbiBiYWxhbmNlLgogICAgICoKICAgICAqIFNlY3VyaXR5IHJldmlldwogICAgICoKICAgICAqIC0gSW50ZWdlciBtYXRoOiBvayAtIG9ubHkgY2FsbGVkIG9uY2Ugd2l0aCBmaXhlZCBwYXJhbWV0ZXJzCiAgICAgKgogICAgICogQXBwbGljYWJsZSB0ZXN0czoKICAgICAqCiAgICAgKgogICAgICovCiAgICBmdW5jdGlvbiBhbGxvY2F0ZUZvdW5kZXJUb2tlbnMoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIhPWZvdW5kZXIpIHJldmVydCgpOwogICAgICAgIGlmIChub3cgPD0gZW5kVGltZSArIGZvdW5kZXJMb2NrdXApIHJldmVydCgpOwogICAgICAgIGlmIChmb3VuZGVyQWxsb2NhdGVkKSByZXZlcnQoKTsKICAgICAgICBiYWxhbmNlc1tmb3VuZGVyXSA9IChiYWxhbmNlc1tmb3VuZGVyXSArIHRvdGFsU3VwcGx5ICogZm91bmRlckFsbG9jYXRpb24gLyAoMSBldGhlcikpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gKHRvdGFsU3VwcGx5ICsgdG90YWxTdXBwbHkgKiBmb3VuZGVyQWxsb2NhdGlvbiAvICgxIGV0aGVyKSk7CiAgICAgICAgZm91bmRlckFsbG9jYXRlZCA9IHRydWU7CiAgICAgICAgQWxsb2NhdGVGb3VuZGVyVG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHVwIGZvdW5kZXIgYWRkcmVzcyB0b2tlbiBiYWxhbmNlLgogICAgICoKICAgICAqIFNlY3VyaXR5IHJldmlldwogICAgICoKICAgICAqIC0gSW50ZWdlciBtYXRoOiBvayAtIG9ubHkgY2FsbGVkIG9uY2Ugd2l0aCBmaXhlZCBwYXJhbWV0ZXJzCiAgICAgKgogICAgICogQXBwbGljYWJsZSB0ZXN0czoKICAgICAqCiAgICAgKgogICAgICovCiAgICBmdW5jdGlvbiBvZmZsaW5lU2FsZXModWludDI1NiBvZmZsaW5lTnVtLCB1aW50MjU2IG9mZmxpbmVFdGhlcikgewogICAgICAgIGlmIChtc2cuc2VuZGVyIT1mb3VuZGVyKSByZXZlcnQoKTsKICAgICAgICAvLyBpZiAobm93ID49IHN0YXJ0RWFybHlCaXJkICYmIG5vdyA8PSBlbmRFYXJseUJpcmQpIHJldmVydCgpOyAvL29mZmxpbmUgc2FsZXMgY2FuIGJlIGRvbmUgb25seSBkdXJpbmcgZWFybHkgYmlyZCB0aW1lIAogICAgICAgIGlmIChzYWxlRXRoZXJSYWlzZWQgKyBvZmZsaW5lRXRoZXIgPiBldGhlckNhcCkgcmV2ZXJ0KCk7CiAgICAgICAgdG90YWxTdXBwbHkgPSAodG90YWxTdXBwbHkgKyBvZmZsaW5lTnVtKTsKICAgICAgICBiYWxhbmNlc1tmb3VuZGVyXSA9IChiYWxhbmNlc1tmb3VuZGVyXSArIG9mZmxpbmVOdW0gKTsKICAgICAgICBzYWxlRXRoZXJSYWlzZWQgPSAoc2FsZUV0aGVyUmFpc2VkICsgb2ZmbGluZUV0aGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEVtZXJnZW5jeSBTdG9wIElDTy4KICAgICAqCiAgICAgKiAgQXBwbGljYWJsZSB0ZXN0czoKICAgICAqCiAgICAgKiAtIFRlc3QgdW5oYWx0aW5nLCBidXlpbmcsIGFuZCBzdWNjZWVkaW5nCiAgICAgKi8KICAgIGZ1bmN0aW9uIGhhbHQoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIhPWZvdW5kZXIpIHJldmVydCgpOwogICAgICAgIGhhbHRlZCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdW5oYWx0KCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyIT1mb3VuZGVyKSByZXZlcnQoKTsKICAgICAgICBoYWx0ZWQgPSBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIENoYW5nZSBmb3VuZGVyIGFkZHJlc3MgKHdoZXJlIElDTyBFVEggaXMgYmVpbmcgZm9yd2FyZGVkKS4KICAgICAqCiAgICAgKiBBcHBsaWNhYmxlIHRlc3RzOgogICAgICoKICAgICAqIC0gVGVzdCBmb3VuZGVyIGNoYW5nZSBieSBoYWNrZXIKICAgICAqIC0gVGVzdCBmb3VuZGVyIGNoYW5nZQogICAgICogLSBUZXN0IGZvdW5kZXIgdG9rZW4gYWxsb2NhdGlvbiB0d2ljZQogICAgICovCiAgICBmdW5jdGlvbiBjaGFuZ2VGb3VuZGVyKGFkZHJlc3MgbmV3Rm91bmRlcikgewogICAgICAgIGlmIChtc2cuc2VuZGVyIT1mb3VuZGVyKSByZXZlcnQoKTsKICAgICAgICBmb3VuZGVyID0gbmV3Rm91bmRlcjsKICAgIH0KCiAgICAvKioKICAgICAqIEVSQyAyMCBTdGFuZGFyZCBUb2tlbiBpbnRlcmZhY2UgdHJhbnNmZXIgZnVuY3Rpb24KICAgICAqCiAgICAgKiBQcmV2ZW50IHRyYW5zZmVycyB1bnRpbCBmcmVlemUgcGVyaW9kIGlzIG92ZXIuCiAgICAgKgogICAgICogQXBwbGljYWJsZSB0ZXN0czoKICAgICAqCiAgICAgKiAtIFRlc3QgcmVzdHJpY3RlZCBlYXJseSB0cmFuc2ZlcgogICAgICogLSBUZXN0IHRyYW5zZmVyIGFmdGVyIHJlc3RyaWN0ZWQgcGVyaW9kCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKG5vdyA8PSBlbmRUaW1lICsgdHJhbnNmZXJMb2NrdXApIHJldmVydCgpOwoKICAgICAgICAvL0RlZmF1bHQgYXNzdW1lcyB0b3RhbFN1cHBseSBjYW4ndCBiZSBvdmVyIG1heCAoMl4yNTYgLSAxKS4KICAgICAgICAvL0lmIHlvdXIgdG9rZW4gbGVhdmVzIG91dCB0b3RhbFN1cHBseSBhbmQgY2FuIGlzc3VlIG1vcmUgdG9rZW5zIGFzIHRpbWUgZ29lcyBvbiwgeW91IG5lZWQgdG8gY2hlY2sgaWYgaXQgZG9lc24ndCB3cmFwLgogICAgICAgIC8vUmVwbGFjZSB0aGUgaWYgd2l0aCB0aGlzIG9uZSBpbnN0ZWFkLgogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAvL2lmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQoKICAgIH0KICAgIC8qKgogICAgICogRVJDIDIwIFN0YW5kYXJkIFRva2VuIGludGVyZmFjZSB0cmFuc2ZlciBmdW5jdGlvbgogICAgICoKICAgICAqIFByZXZlbnQgdHJhbnNmZXJzIHVudGlsIGZyZWV6ZSBwZXJpb2QgaXMgb3Zlci4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gZm91bmRlcikgcmV2ZXJ0KCk7CgogICAgICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAvL2lmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIC8qKgogICAgICogRG8gbm90IGFsbG93IGRpcmVjdCBkZXBvc2l0cy4KICAgICAqCiAgICAgKiBBbGwgY3Jvd2RzYWxlIGRlcG9zaXRvcnMgbXVzdCBoYXZlIHJlYWQgdGhlIGxlZ2FsIGFncmVlbWVudC4KICAgICAqIFRoaXMgaXMgY29uZmlybWVkIGJ5IGhhdmluZyB0aGVtIHNpZ25pbmcgdGhlIHRlcm1zIG9mIHNlcnZpY2Ugb24gdGhlIHdlYnNpdGUuCiAgICAgKiBUaGUgZ2l2ZSB0aGVpciBjcm93ZHNhbGUgRXRoZXJldW0gc291cmNlIGFkZHJlc3Mgb24gdGhlIHdlYnNpdGUuCiAgICAgKiBXZWJzaXRlIHNpZ25zIHRoaXMgYWRkcmVzcyB1c2luZyBjcm93ZHNhbGUgcHJpdmF0ZSBrZXkgKGRpZmZlcmVudCBmcm9tIGZvdW5kZXJzIGtleSkuCiAgICAgKiBidXkoKSB0YWtlcyB0aGlzIHNpZ25hdHVyZSBhcyBpbnB1dCBhbmQgcmVqZWN0cyBhbGwgZGVwb3NpdHMgdGhhdCBkbyBub3QgaGF2ZQogICAgICogc2lnbmF0dXJlIHlvdSByZWNlaXZlIGFmdGVyIHJlYWRpbmcgdGVybXMgb2Ygc2VydmljZS4KICAgICAqCiAgICAgKi8KICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICAgICAgYnV5KDB4MzMpOwogICAgfQoKICAgIC8vIG9ubHkgb3duZXIgY2FuIGtpbGwKICAgIGZ1bmN0aW9uIGtpbGwoKSB7IAogICAgICAgIGlmIChtc2cuc2VuZGVyID09IGZvdW5kZXIpIHN1aWNpZGUoZm91bmRlcik7IAogICAgfQoKfQ=='.
	

]
