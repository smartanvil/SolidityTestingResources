Class {
	#name : #SRTaf7d69fc8a14eb37ae07ddef4b209d157cbe4738,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTaf7d69fc8a14eb37ae07ddef4b209d157cbe4738 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgppbnRlcmZhY2UgRGVwbG95ZXJfSW50ZXJmYWNlIHsKICBmdW5jdGlvbiBuZXdDb250cmFjdChhZGRyZXNzIF9wYXJ0eSwgYWRkcmVzcyB1c2VyX2NvbnRyYWN0LCB1aW50IF9zdGFydF9kYXRlKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zIChhZGRyZXNzIGNyZWF0ZWQpOwogIGZ1bmN0aW9uIG5ld1Rva2VuKCkgcHVibGljIHJldHVybnMgKGFkZHJlc3MgY3JlYXRlZCk7Cn0KCmludGVyZmFjZSBEUkNUX1Rva2VuX0ludGVyZmFjZSB7CiAgZnVuY3Rpb24gYWRkcmVzc0NvdW50KGFkZHJlc3MgX3N3YXApIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IGNvdW50KTsKICBmdW5jdGlvbiBnZXRIb2xkZXJCeUluZGV4KHVpbnQgX2luZCwgYWRkcmVzcyBfc3dhcCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MgaG9sZGVyKTsKICBmdW5jdGlvbiBnZXRCYWxhbmNlQnlJbmRleCh1aW50IF9pbmQsIGFkZHJlc3MgX3N3YXApIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbCk7CiAgZnVuY3Rpb24gZ2V0SW5kZXhCeUFkZHJlc3MoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3N3YXApIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IGluZGV4KTsKICBmdW5jdGlvbiBjcmVhdGVUb2tlbih1aW50IF9zdXBwbHksIGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zd2FwKSBwdWJsaWM7CiAgZnVuY3Rpb24gcGF5KGFkZHJlc3MgX3BhcnR5LCBhZGRyZXNzIF9zd2FwKSBwdWJsaWM7CiAgZnVuY3Rpb24gcGFydHlDb3VudChhZGRyZXNzIF9zd2FwKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50IGNvdW50KTsKfQoKaW50ZXJmYWNlIFdyYXBwZWRfRXRoZXJfSW50ZXJmYWNlIHsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHRvdGFsX3N1cHBseSk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYW1vdW50KTsKICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50IF92YWx1ZSkgcHVibGljOwogIGZ1bmN0aW9uIENyZWF0ZVRva2VuKCkgcHVibGljOwoKfQoKbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbWluKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KfQoKCi8vVGhlIEZhY3RvcnkgY29udHJhY3Qgc2V0cyB0aGUgc3RhbmRhcmRpemVkIHZhcmlhYmxlcyBhbmQgYWxzbyBkZXBsb3lzIG5ldyBjb250cmFjdHMgYmFzZWQgb24gdGhlc2UgdmFyaWFibGVzIGZvciB0aGUgdXNlci4gIApjb250cmFjdCBGYWN0b3J5IHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAvL0FkZHJlc3NlcyBvZiB0aGUgRmFjdG9yeSBvd25lciBhbmQgb3JhY2xlLiBGb3Igb3JhY2xlIGluZm9ybWF0aW9uLCBjaGVjayB3d3cuZ2l0aHViLmNvbS9EZWNlbnRyYWxpemVkRGVyaXZhdGl2ZXMvT3JhY2xlcwogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIGFkZHJlc3MgcHVibGljIG9yYWNsZV9hZGRyZXNzOwoKICAvL0FkZHJlc3Mgb2YgdGhlIHVzZXIgY29udHJhY3QKICBhZGRyZXNzIHB1YmxpYyB1c2VyX2NvbnRyYWN0OwogIERSQ1RfVG9rZW5fSW50ZXJmYWNlIGRyY3RfaW50ZXJmYWNlOwogIFdyYXBwZWRfRXRoZXJfSW50ZXJmYWNlIHRva2VuX2ludGVyZmFjZTsKCiAgLy9BZGRyZXNzIG9mIHRoZSBkZXBsb3llciBjb250cmFjdAogIGFkZHJlc3MgZGVwbG95ZXJfYWRkcmVzczsKICBEZXBsb3llcl9JbnRlcmZhY2UgZGVwbG95ZXI7CiAgRGVwbG95ZXJfSW50ZXJmYWNlIHRva2VuRGVwbG95ZXI7CiAgYWRkcmVzcyB0b2tlbl9kZXBsb3llcl9hZGRyZXNzOwoKICBhZGRyZXNzIHB1YmxpYyB0b2tlbl9hOwogIGFkZHJlc3MgcHVibGljIHRva2VuX2I7CgogIC8vQSBmZWUgZm9yIGNyZWF0aW5nIGEgc3dhcCBpbiB3ZWkuICBQbGFuIGlzIGZvciB0aGlzIHRvIGJlIHplcm8sIGhvd2V2ZXIgY2FuIGJlIHJhaXNlZCB0byBwcmV2ZW50IHNwYW0KICB1aW50IHB1YmxpYyBmZWU7CiAgLy9EdXJhdGlvbiBvZiBzd2FwIGNvbnRyYWN0IGluIGRheXMKICB1aW50IHB1YmxpYyBkdXJhdGlvbjsKICAvL011bHRpcGxpZXIgb2YgcmVmZXJlbmNlIHJhdGUuICAyeCByZWZlcnMgdG8gYSA1MCUgbW92ZSBnZW5lcmF0aW5nIGEgMTAwJSBtb3ZlIGluIHRoZSBjb250cmFjdCBwYXlvdXQgdmFsdWVzCiAgdWludCBwdWJsaWMgbXVsdGlwbGllcjsKICAvL1Rva2VuX3JhdGlvIHJlZmVycyB0byB0aGUgbnVtYmVyIG9mIERSQ1QgVG9rZW5zIGEgcGFydHkgd2lsbCBnZXQgYmFzZWQgb24gdGhlIG51bWJlciBvZiBiYXNlIHRva2Vucy4gIEFzIGFuIGV4YW1wbGUsIDFlMTUgaW5kaWNhdGVzIHRoYXQgYSBwYXJ0eSB3aWxsIGdldCAxMDAwIERSQ1QgVG9rZW5zIGJhc2VkIHVwb24gMSBldGhlciBvZiB3cmFwcGVkIHdlaS4gCiAgdWludCBwdWJsaWMgdG9rZW5fcmF0aW8xOwogIHVpbnQgcHVibGljIHRva2VuX3JhdGlvMjsKCgogIC8vQXJyYXkgb2YgZGVwbG95ZWQgY29udHJhY3RzCiAgYWRkcmVzc1tdIHB1YmxpYyBjb250cmFjdHM7CiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBjcmVhdGVkX2NvbnRyYWN0czsKICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgcHVibGljIGxvbmdfdG9rZW5zOwogIG1hcHBpbmcodWludCA9PiBhZGRyZXNzKSBwdWJsaWMgc2hvcnRfdG9rZW5zOwoKICAvL0VtaXR0ZWQgd2hlbiBhIFN3YXAgaXMgY3JlYXRlZAogIGV2ZW50IENvbnRyYWN0Q3JlYXRpb24oYWRkcmVzcyBfc2VuZGVyLCBhZGRyZXNzIF9jcmVhdGVkKTsKCiAgLypNb2RpZmllcnMqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLypGdW5jdGlvbnMqLwogIC8vIENvbnN0cnVjdG9yIC0gU2V0cyBvd25lcgogIGZ1bmN0aW9uIEZhY3RvcnkoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgZnVuY3Rpb24gZ2V0VG9rZW5zKHVpbnQgX2RhdGUpIHB1YmxpYyB2aWV3IHJldHVybnMoYWRkcmVzcyBfbHRva2VuLCBhZGRyZXNzIF9zdG9rZW4pewogICAgcmV0dXJuKGxvbmdfdG9rZW5zW19kYXRlXSxzaG9ydF90b2tlbnNbX2RhdGVdKTsKICB9CgogIC8qCiAgKiBVcGRhdGVzIHRoZSBmZWUgYW1vdW50CiAgKiBAcGFyYW0gIl9mZWUiOiBUaGUgbmV3IGZlZSBhbW91bnQKICAqLwogIGZ1bmN0aW9uIHNldEZlZSh1aW50IF9mZWUpIHB1YmxpYyBvbmx5T3duZXIoKSB7CiAgICBmZWUgPSBfZmVlOwogIH0KCiAgLyoKICAqIFNldHMgdGhlIGRlcGxveWVyIGFkZHJlc3MKICAqIEBwYXJhbSAiX2RlcGxveWVyIjogVGhlIG5ldyBkZXBsb3llciBhZGRyZXNzCiAgKi8KICBmdW5jdGlvbiBzZXREZXBsb3llcihhZGRyZXNzIF9kZXBsb3llcikgcHVibGljIG9ubHlPd25lcigpIHsKICAgIGRlcGxveWVyX2FkZHJlc3MgPSBfZGVwbG95ZXI7CiAgICBkZXBsb3llciA9IERlcGxveWVyX0ludGVyZmFjZShfZGVwbG95ZXIpOwogIH0KCiAgLyoKICAqIFNldHMgdGhlIHRva2VuX2RlcGxveWVyIGFkZHJlc3MKICAqIEBwYXJhbSAiX3RkZXBsb3llciI6IFRoZSBuZXcgdG9rZW4gZGVwbG95ZXIgYWRkcmVzcwogICovICAKICBmdW5jdGlvbiBzZXR0b2tlbkRlcGxveWVyKGFkZHJlc3MgX3RkZXBsb3llcikgcHVibGljIG9ubHlPd25lcigpIHsKICAgIHRva2VuX2RlcGxveWVyX2FkZHJlc3MgPSBfdGRlcGxveWVyOwogICAgdG9rZW5EZXBsb3llciA9IERlcGxveWVyX0ludGVyZmFjZShfdGRlcGxveWVyKTsKICB9CiAgLyoKICAqIFNldHMgdGhlIHVzZXJfY29udHJhY3QgYWRkcmVzcwogICogQHBhcmFtICJfdXNlckNvbnRyYWN0IjogVGhlIG5ldyB1c2VyQ29udHJhY3QgYWRkcmVzcwogICovCiAgZnVuY3Rpb24gc2V0VXNlckNvbnRyYWN0KGFkZHJlc3MgX3VzZXJDb250cmFjdCkgcHVibGljIG9ubHlPd25lcigpIHsKICAgIHVzZXJfY29udHJhY3QgPSBfdXNlckNvbnRyYWN0OwogIH0KCiAgLyoKICAqIFJldHVybnMgdGhlIGJhc2UgdG9rZW4gYWRkcmVzc2VzCiAgKi8KICBmdW5jdGlvbiBnZXRCYXNlKCkgcHVibGljIHZpZXcgcmV0dXJucyhhZGRyZXNzIF9iYXNlMSwgYWRkcmVzcyBiYXNlMil7CiAgICByZXR1cm4gKHRva2VuX2EsIHRva2VuX2IpOwogIH0KCgogIC8qCiAgKiBTZXRzIHRva2VuIHJhdGlvLCBzd2FwIGR1cmF0aW9uLCBhbmQgbXVsdGlwbGllciB2YXJpYWJsZXMgZm9yIGEgc3dhcAogICogQHBhcmFtICJfdG9rZW5fcmF0aW8xIjogVGhlIHJhdGlvIG9mIHRoZSBmaXJzdCB0b2tlbgogICogQHBhcmFtICJfdG9rZW5fcmF0aW8yIjogVGhlIHJhdGlvIG9mIHRoZSBzZWNvbmQgdG9rZW4KICAqIEBwYXJhbSAiX2R1cmF0aW9uIjogVGhlIGR1cmF0aW9uIG9mIHRoZSBzd2FwLCBpbiBzZWNvbmRzCiAgKiBAcGFyYW0gIl9tdWx0aXBsaWVyIjogVGhlIG11bHRpcGxpZXIgdXNlZCBmb3IgdGhlIHN3YXAKICAqLwogIGZ1bmN0aW9uIHNldFZhcmlhYmxlcyh1aW50IF90b2tlbl9yYXRpbzEsIHVpbnQgX3Rva2VuX3JhdGlvMiwgdWludCBfZHVyYXRpb24sIHVpbnQgX211bHRpcGxpZXIpIHB1YmxpYyBvbmx5T3duZXIoKSB7CiAgICB0b2tlbl9yYXRpbzEgPSBfdG9rZW5fcmF0aW8xOwogICAgdG9rZW5fcmF0aW8yID0gX3Rva2VuX3JhdGlvMjsKICAgIGR1cmF0aW9uID0gX2R1cmF0aW9uOwogICAgbXVsdGlwbGllciA9IF9tdWx0aXBsaWVyOwogIH0KCiAgLyoKICAqIFNldHMgdGhlIGFkZHJlc3NlcyBvZiB0aGUgdG9rZW5zIHVzZWQgZm9yIHRoZSBzd2FwCiAgKiBAcGFyYW0gIl90b2tlbl9hIjogVGhlIGFkZHJlc3Mgb2YgYSB0b2tlbiB0byBiZSB1c2VkCiAgKiBAcGFyYW0gIl90b2tlbl9iIjogVGhlIGFkZHJlc3Mgb2YgYW5vdGhlciB0b2tlbiB0byBiZSB1c2VkCiAgKi8KICBmdW5jdGlvbiBzZXRCYXNlVG9rZW5zKGFkZHJlc3MgX3Rva2VuX2EsIGFkZHJlc3MgX3Rva2VuX2IpIHB1YmxpYyBvbmx5T3duZXIoKSB7CiAgICB0b2tlbl9hID0gX3Rva2VuX2E7CiAgICB0b2tlbl9iID0gX3Rva2VuX2I7CiAgfQoKICAvL0FsbG93cyBhIHVzZXIgdG8gZGVwbG95IGEgbmV3IHN3YXAgY29udHJhY3QsIGlmIHRoZXkgcGF5IHRoZSBmZWUKICAvL3JldHVybnMgdGhlIG5ld2x5IGNyZWF0ZWQgc3dhcCBhZGRyZXNzIGFuZCBjYWxscyBldmVudCAnQ29udHJhY3RDcmVhdGlvbicKICBmdW5jdGlvbiBkZXBsb3lDb250cmFjdCh1aW50IF9zdGFydF9kYXRlKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zIChhZGRyZXNzIGNyZWF0ZWQpIHsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IGZlZSk7CiAgICBhZGRyZXNzIG5ld19jb250cmFjdCA9IGRlcGxveWVyLm5ld0NvbnRyYWN0KG1zZy5zZW5kZXIsIHVzZXJfY29udHJhY3QsIF9zdGFydF9kYXRlKTsKICAgIGNvbnRyYWN0cy5wdXNoKG5ld19jb250cmFjdCk7CiAgICBjcmVhdGVkX2NvbnRyYWN0c1tuZXdfY29udHJhY3RdID0gX3N0YXJ0X2RhdGU7CiAgICBDb250cmFjdENyZWF0aW9uKG1zZy5zZW5kZXIsbmV3X2NvbnRyYWN0KTsKICAgIHJldHVybiBuZXdfY29udHJhY3Q7CiAgfQoKCiAgZnVuY3Rpb24gZGVwbG95VG9rZW5Db250cmFjdCh1aW50IF9zdGFydF9kYXRlLCBib29sIF9sb25nKSBwdWJsaWMgcmV0dXJucyhhZGRyZXNzIF90b2tlbikgewogICAgYWRkcmVzcyB0b2tlbjsKICAgIGlmIChfbG9uZyl7CiAgICAgIHJlcXVpcmUobG9uZ190b2tlbnNbX3N0YXJ0X2RhdGVdID09IGFkZHJlc3MoMCkpOwogICAgICB0b2tlbiA9IHRva2VuRGVwbG95ZXIubmV3VG9rZW4oKTsKICAgICAgbG9uZ190b2tlbnNbX3N0YXJ0X2RhdGVdID0gdG9rZW47CiAgICB9CiAgICBlbHNlewogICAgICByZXF1aXJlKHNob3J0X3Rva2Vuc1tfc3RhcnRfZGF0ZV0gPT0gYWRkcmVzcygwKSk7CiAgICAgIHRva2VuID0gdG9rZW5EZXBsb3llci5uZXdUb2tlbigpOwogICAgICBzaG9ydF90b2tlbnNbX3N0YXJ0X2RhdGVdID0gdG9rZW47CiAgICB9CiAgICByZXR1cm4gdG9rZW47CiAgfQoKCgogIC8qCiAgKiBEZXBsb3lzIG5ldyB0b2tlbnMgb24gYSBEUkNUX1Rva2VuIGNvbnRyYWN0IC0tIGNhbGxlZCBmcm9tIHdpdGhpbiBhIHN3YXAKICAqIEBwYXJhbSAiX3N1cHBseSI6IFRoZSBudW1iZXIgb2YgdG9rZW5zIHRvIGNyZWF0ZQogICogQHBhcmFtICJfcGFydHkiOiBUaGUgYWRkcmVzcyB0byBzZW5kIHRoZSB0b2tlbnMgdG8KICAqIEBwYXJhbSAiX2xvbmciOiBXaGV0aGVyIHRoZSBwYXJ0eSBpcyBsb25nIG9yIHNob3J0CiAgKiBAcmV0dXJucyAiY3JlYXRlZCI6IFRoZSBhZGRyZXNzIG9mIHRoZSBjcmVhdGVkIERSQ1QgdG9rZW4KICAqIEByZXR1cm5zICJ0b2tlbl9yYXRpbyI6IFRoZSByYXRpbyBvZiB0aGUgY3JlYXRlZCBEUkNUIHRva2VuCiAgKi8KICBmdW5jdGlvbiBjcmVhdGVUb2tlbih1aW50IF9zdXBwbHksIGFkZHJlc3MgX3BhcnR5LCBib29sIF9sb25nLCB1aW50IF9zdGFydF9kYXRlKSBwdWJsaWMgcmV0dXJucyAoYWRkcmVzcyBjcmVhdGVkLCB1aW50IHRva2VuX3JhdGlvKSB7CiAgICByZXF1aXJlKGNyZWF0ZWRfY29udHJhY3RzW21zZy5zZW5kZXJdID4gMCk7CiAgICBhZGRyZXNzIGx0b2tlbiA9IGxvbmdfdG9rZW5zW19zdGFydF9kYXRlXTsKICAgIGFkZHJlc3Mgc3Rva2VuID0gc2hvcnRfdG9rZW5zW19zdGFydF9kYXRlXTsKICAgIHJlcXVpcmUobHRva2VuICE9IGFkZHJlc3MoMCkgJiYgc3Rva2VuICE9IGFkZHJlc3MoMCkpOwogICAgaWYgKF9sb25nKSB7CiAgICAgIGRyY3RfaW50ZXJmYWNlID0gRFJDVF9Ub2tlbl9JbnRlcmZhY2UobHRva2VuKTsKICAgICAgZHJjdF9pbnRlcmZhY2UuY3JlYXRlVG9rZW4oX3N1cHBseS5kaXYodG9rZW5fcmF0aW8xKSwgX3BhcnR5LG1zZy5zZW5kZXIpOwogICAgICByZXR1cm4gKGx0b2tlbiwgdG9rZW5fcmF0aW8xKTsKICAgIH0gZWxzZSB7CiAgICAgIGRyY3RfaW50ZXJmYWNlID0gRFJDVF9Ub2tlbl9JbnRlcmZhY2Uoc3Rva2VuKTsKICAgICAgZHJjdF9pbnRlcmZhY2UuY3JlYXRlVG9rZW4oX3N1cHBseS5kaXYodG9rZW5fcmF0aW8yKSwgX3BhcnR5LG1zZy5zZW5kZXIpOwogICAgICByZXR1cm4gKHN0b2tlbiwgdG9rZW5fcmF0aW8yKTsKICAgIH0KICB9CiAgCgogIC8vQWxsb3dzIHRoZSBvd25lciB0byBzZXQgYSBuZXcgb3JhY2xlIGFkZHJlc3MKICBmdW5jdGlvbiBzZXRPcmFjbGVBZGRyZXNzKGFkZHJlc3MgX25ld19vcmFjbGVfYWRkcmVzcykgcHVibGljIG9ubHlPd25lcigpIHsgb3JhY2xlX2FkZHJlc3MgPSBfbmV3X29yYWNsZV9hZGRyZXNzOyB9CgogIC8vQWxsb3dzIHRoZSBvd25lciB0byBzZXQgYSBuZXcgb3duZXIgYWRkcmVzcwogIGZ1bmN0aW9uIHNldE93bmVyKGFkZHJlc3MgX25ld19vd25lcikgcHVibGljIG9ubHlPd25lcigpIHsgb3duZXIgPSBfbmV3X293bmVyOyB9CgogIC8vQWxsb3dzIHRoZSBvd25lciB0byBwdWxsIGNvbnRyYWN0IGNyZWF0aW9uIGZlZXMKICBmdW5jdGlvbiB3aXRoZHJhd0ZlZXMoKSBwdWJsaWMgb25seU93bmVyKCkgcmV0dXJucyh1aW50IGF0b2ssIHVpbnQgYnRvaywgdWludCBfZXRoKXsKICAgdG9rZW5faW50ZXJmYWNlID0gV3JhcHBlZF9FdGhlcl9JbnRlcmZhY2UodG9rZW5fYSk7CiAgIHVpbnQgYXZhbCA9IHRva2VuX2ludGVyZmFjZS5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7CiAgIGlmKGF2YWwgPiAwKXsKICAgICAgdG9rZW5faW50ZXJmYWNlLndpdGhkcmF3KGF2YWwpOwogICAgfQogICB0b2tlbl9pbnRlcmZhY2UgPSBXcmFwcGVkX0V0aGVyX0ludGVyZmFjZSh0b2tlbl9iKTsKICAgdWludCBidmFsID0gdG9rZW5faW50ZXJmYWNlLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKICAgaWYgKGJ2YWwgPiAwKXsKICAgIHRva2VuX2ludGVyZmFjZS53aXRoZHJhdyhidmFsKTsKICB9CiAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgIHJldHVybihhdmFsLGJ2YWwsdGhpcy5iYWxhbmNlKTsKICAgfQoKICAgZnVuY3Rpb24oKSBwdWJsaWMgcGF5YWJsZSB7CgogICB9CgogIC8qCiAgKiBSZXR1cm5zIGEgdHVwbGUgb2YgbWFueSBwcml2YXRlIHZhcmlhYmxlcwogICogQHJldHVybnMgIl9vcmFjbGVfYWRyZXNzIjogVGhlIGFkZHJlc3Mgb2YgdGhlIG9yYWNsZQogICogQHJldHVybnMgIl9vcGVyYXRvciI6IFRoZSBhZGRyZXNzIG9mIHRoZSBvd25lciBhbmQgb3BlcmF0b3Igb2YgdGhlIGZhY3RvcnkKICAqIEByZXR1cm5zICJfZHVyYXRpb24iOiBUaGUgZHVyYXRpb24gb2YgdGhlIHN3YXAKICAqIEByZXR1cm5zICJfbXVsdGlwbGllciI6IFRoZSBtdWx0aXBsaWVyIGZvciB0aGUgc3dhcAogICogQHJldHVybnMgInRva2VuX2FfYWRkcmVzcyI6IFRoZSBhZGRyZXNzIG9mIHRva2VuIGEKICAqIEByZXR1cm5zICJ0b2tlbl9iX2FkZHJlc3MiOiBUaGUgYWRkcmVzcyBvZiB0b2tlbiBiCiAgKiBAcmV0dXJucyAic3RhcnRfZGF0ZSI6IFRoZSBzdGFydCBkYXRlIG9mIHRoZSBzd2FwCiAgKi8KICBmdW5jdGlvbiBnZXRWYXJpYWJsZXMoKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIG9yYWNsZV9hZGRyLCB1aW50IHN3YXBfZHVyYXRpb24sIHVpbnQgc3dhcF9tdWx0aXBsaWVyLCBhZGRyZXNzIHRva2VuX2FfYWRkciwgYWRkcmVzcyB0b2tlbl9iX2FkZHIpewogICAgcmV0dXJuIChvcmFjbGVfYWRkcmVzcyxkdXJhdGlvbiwgbXVsdGlwbGllciwgdG9rZW5fYSwgdG9rZW5fYik7CiAgfQoKICAvKgogICogUGF5cyBvdXQgdG8gYSBEUkNUIHRva2VuCiAgKiBAcGFyYW0gIl9wYXJ0eSI6IFRoZSBhZGRyZXNzIGJlaW5nIHBhaWQKICAqIEBwYXJhbSAiX2xvbmciOiBXaGV0aGVyIHRoZSBfcGFydHkgaXMgbG9uZyBvciBub3QKICAqLwogIGZ1bmN0aW9uIHBheVRva2VuKGFkZHJlc3MgX3BhcnR5LCBhZGRyZXNzIF90b2tlbl9hZGQpIHB1YmxpYyB7CiAgICByZXF1aXJlKGNyZWF0ZWRfY29udHJhY3RzW21zZy5zZW5kZXJdID4gMCk7CiAgICBkcmN0X2ludGVyZmFjZSA9IERSQ1RfVG9rZW5fSW50ZXJmYWNlKF90b2tlbl9hZGQpOwogICAgZHJjdF9pbnRlcmZhY2UucGF5KF9wYXJ0eSwgbXNnLnNlbmRlcik7CiAgfQoKICAvL1JldHVybnMgdGhlIG51bWJlciBvZiBjb250cmFjdHMgY3JlYXRlZCBieSB0aGlzIGZhY3RvcnkKICAgIGZ1bmN0aW9uIGdldENvdW50KCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCBjb3VudCkgewogICAgICByZXR1cm4gY29udHJhY3RzLmxlbmd0aDsKICB9Cn0='.
	

]
