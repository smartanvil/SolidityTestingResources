Class {
	#name : #SRT2ff994cdb80144fa84b2ab671fc46816d562b64c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2ff994cdb80144fa84b2ab671fc46816d562b64c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgovKioKICogQHRpdGxlIFNhZmVNYXRoIGZvciBwZXJmb3JtaW5nIHZhbGlkIG1hdGhlbWF0aWNzLgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAKICBmdW5jdGlvbiBNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgLy9hc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIERpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0gCgogIGZ1bmN0aW9uIEFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfSAKfQoKLyoqCiogQHRpdGxlIENvbnRyYWN0IHRoYXQgd2lsbCB3b3JrIHdpdGggRVJDMjIzIHRva2Vucy4KKi8KY29udHJhY3QgRVJDMjIzUmVjZWl2aW5nQ29udHJhY3QgeyAKICAgIC8qKgogICAgICogQGRldiBTdGFuZGFyZCBFUkMyMjMgZnVuY3Rpb24gdGhhdCB3aWxsIGhhbmRsZSBpbmNvbWluZyB0b2tlbiB0cmFuc2ZlcnMuCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tICBUb2tlbiBzZW5kZXIgYWRkcmVzcy4KICAgICAqIEBwYXJhbSBfdmFsdWUgQW1vdW50IG9mIHRva2Vucy4KICAgICAqIEBwYXJhbSBfZGF0YSAgVHJhbnNhY3Rpb24gbWV0YWRhdGEuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfZnJvbSwgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWM7Cn0KCi8qKgogKiBDb250cmFjdCAiT3duYWJsZSIKICogUHVycG9zZTogRGVmaW5lcyBPd25lciBmb3IgY29udHJhY3QgYW5kIHByb3ZpZGUgZnVuY3Rpb25hbGl0eSB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8gYW5vdGhlciBhY2NvdW50CiAqLwpjb250cmFjdCBPd25hYmxlIHsKCiAgLy9vd25lciB2YXJpYWJsZSB0byBzdG9yZSBjb250cmFjdCBvd25lciBhY2NvdW50CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgLy9hZGQgYW5vdGhlciBvd25lcgogIGFkZHJlc3MgZGVwbG95ZXI7CgogIC8vQ29uc3RydWN0b3IgZm9yIHRoZSBjb250cmFjdCB0byBzdG9yZSBvd25lcidzIGFjY291bnQgb24gZGVwbG95ZW1lbnQKICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIGRlcGxveWVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8vbW9kaWZpZXIgdG8gY2hlY2sgdHJhbnNhY3Rpb24gaW5pdGlhdG9yIGlzIG9ubHkgb3duZXIKICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlIChtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gZGVwbG95ZXIpOwogICAgICBfOwogIH0KCiAgLy9vd25lcnNoaXAgY2FuIGJlIHRyYW5zZmVycmVkIHRvIHByb3ZpZGVkIG5ld093bmVyLiBGdW5jdGlvbiBjYW4gb25seSBiZSBpbml0aWF0ZWQgYnkgY29udHJhY3Qgb3duZXIncyBhY2NvdW50CiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZSAoX25ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgb3duZXIgPSBfbmV3T3duZXI7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CiAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lOwogIHVpbnQyNTYgcHVibGljIGVuZFRpbWU7CiAgdWludDI1NiBwcml2YXRlIHBhdXNlVGltZTsKCgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICAvL1JlY29yZCB0aGUgcGF1c2luZyB0aW1lIG9ubHkgaWYgYW55IHN0YXJ0VGltZSBpcyBkZWZpbmVkCiAgICAvL2luIG90aGVyIGNhc2VzLCBpdCB3aWxsIHdvcmsgYXMgYSB0b2dnbGUgc3dpdGNoIG9ubHkKICAgIGlmKHN0YXJ0VGltZSA+IDApewogICAgICAgIHBhdXNlVGltZSA9IG5vdzsKICAgIH0KICAgIGVtaXQgUGF1c2UoKTsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgd2hlblBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICAvL2lmIGVuZFRpbWUgaXMgZGVmaW5lZCwgb25seSB0aGVuIHByb2NlZWQgd2l0aCBpdHMgdXBkYXRpb24KICAgIGlmKGVuZFRpbWUgPiAwICYmIHBhdXNlVGltZSA+IHN0YXJ0VGltZSl7CiAgICAgICAgdWludDI1NiBwYXVzZUR1cmF0aW9uID0gcGF1c2VUaW1lIC0gc3RhcnRUaW1lOwogICAgICAgIGVuZFRpbWUgPSBlbmRUaW1lICsgcGF1c2VEdXJhdGlvbjsKICAgIH0KICAgIGVtaXQgVW5wYXVzZSgpOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICovCmNvbnRyYWN0IEVSQzIwIGlzIFBhdXNhYmxlIHsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHZhbHVlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfdmFsdWUpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIF9zdWNjZXNzKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IEVDSE8gaXMgRVJDMjAgewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgLy9UaGUgbmFtZSBvZiB0aGUgIHRva2VuCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiRUNITyB0b2tlbiI7CiAgICAvL1RoZSB0b2tlbiBzeW1ib2wKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkVDSE8iOwogICAgLy9UbyBkZW5vdGUgdGhlIGxvY2tpbmcgb24gdHJhbnNmZXIgb2YgdG9rZW5zIGFtb25nIHRva2VuIGhvbGRlcnMKICAgIGJvb2wgcHVibGljIGxvY2tlZDsKICAgIC8vVGhlIHByZWNpc2lvbiB1c2VkIGluIHRoZSBjYWxjdWxhdGlvbnMgaW4gY29udHJhY3QKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgLy9udW1iZXIgb2YgdG9rZW5zIGF2YWlsYWJsZSBmb3IgMSBldGgKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFBSSUNFPTQwMDA7CiAgICAvL21heGltdW0gbnVtYmVyIG9mIHRva2VucwogICAgdWludDI1NiBjb25zdGFudCBNQVhDQVAgPSAzMjI1MDAwMDBlMTg7CiAgICAvL21heGltdW0gbnVtYmVyIG9mIHRva2VucyBhdmFpbGFibGUgZm9yIFNhbGUKICAgIHVpbnQyNTYgY29uc3RhbnQgSEFSRF9DQVAgPSA4ZTcqMWUxODsKICAgIC8vdGhlIGFjY291bnQgd2hpY2ggd2lsbCByZWNlaXZlIGFsbCBiYWxhbmNlCiAgICBhZGRyZXNzIGV0aENvbGxlY3RvcjsKICAgIC8vdG8gc2F2ZSB0b3RhbCBudW1iZXIgb2YgZXRoZXJzIHJlY2VpdmVkCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFdlaVJlY2VpdmVkOwogICAgLy90eXBlIG9mIHNhbGU6IDE9cHJlc2FsZSwgMj1JQ08KICAgIHVpbnQyNTYgcHVibGljIHNhbGVUeXBlOwogICAgCgogICAgLy9NYXBwaW5nIHRvIHJlbGF0ZSBvd25lciBhbmQgc3BlbmRlciB0byB0aGUgdG9rZW5zIGFsbG93ZWQgdG8gdHJhbnNmZXIgZnJvbSBvd25lcgogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIC8vTWFwcGluZyB0byByZWxhdGUgbnVtYmVyIG9mIHRva2VuIHRvIHRoZSBhY2NvdW50CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICAKICAgIGZ1bmN0aW9uIGlzU2FsZVJ1bm5pbmcoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKXsKICAgICAgICBib29sIHN0YXR1cyA9IGZhbHNlOwogICAgICAgIC8vIDE1MjI5NzI4MDAgPSA2IGFwcmlsIDIwMTgKICAgICAgICAvLyAxNTI1MzkyMDAwID0gNCBtYXkgMjAxOAogICAgICAgIC8vIDE1Mjc4MTEyMDAgPSAxIGp1bmUgMjAxOAogICAgICAgIC8vIDE1MzEwOTQ0MDAgPSA5IGp1bHkgMjAxOAogICAgICAgIAogICAgICAgIC8vUHJlc2FsZSBpcyBnb2luZyBvbgogICAgICAgIGlmKG5vdyA+PSBzdGFydFRpbWUgICYmIG5vdyA8PSAxNTI1MzkyMDAwKXsKICAgICAgICAgICAgLy9BcHJpbGwgNiB0byBiZWZvcmUgNCBtYXkKICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTsKICAgICAgICB9CiAgICAKICAgICAgICAvL0lDTyBpcyBnb2luZyBvbgogICAgICAgIGlmKG5vdyA+PSAxNTI3ODExMjAwICYmIG5vdyA8PSBlbmRUaW1lKXsKICAgICAgICAgICAgLy8ganVuZSAxIHRvIGJlZm9yZSBqdWx5IDkKICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0YXR1czsKICAgIH0KCiAgICBmdW5jdGlvbiBjb3VudERvd25Ub0VuZENyb3dkc2FsZSgpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1Nil7CiAgICAgICAgYXNzZXJ0KGlzU2FsZVJ1bm5pbmcoKSk7CiAgICAgICAgcmV0dXJuIGVuZFRpbWUuU3ViKG5vdyk7CiAgICB9CiAgICAvL2V2ZW50cwogICAgZXZlbnQgU3RhdGVDaGFuZ2VkKGJvb2wpOwoKICAgIGZ1bmN0aW9uIEVDSE8oKSBwdWJsaWN7CiAgICAgICAgdG90YWxTdXBwbHkgPSAwOwogICAgICAgIHN0YXJ0VGltZSA9IDE1MjI5NzI4MDA7IC8vQXByaWwgNiwgMjAxOCBHTVQKICAgICAgICBlbmRUaW1lID0gMTUzMTA5NDQwMDsgLy85IGp1bHksIDIwMTggR01UCiAgICAgICAgbG9ja2VkID0gdHJ1ZTsKICAgICAgICBzZXRFdGhDb2xsZWN0b3IoMHhjODUyMkUwNDQ0YTk0RWM5YTVBMDgyNDI3NjVlMTE5NkRGMUVDNkI1KTsKICAgIH0KICAgIC8vVG8gaGFuZGxlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgICAgcmVxdWlyZShtc2cuZGF0YS5sZW5ndGggPj0gc2l6ZSArIDQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVVubG9ja2VkKCkgeyAKICAgICAgICByZXF1aXJlICghbG9ja2VkKTsgCiAgICAgICAgXzsgCiAgICB9CgogICAgbW9kaWZpZXIgdmFsaWRUaW1lZnJhbWUoKXsKICAgICAgICByZXF1aXJlKGlzU2FsZVJ1bm5pbmcoKSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0RXRoQ29sbGVjdG9yKGFkZHJlc3MgX2V0aENvbGxlY3RvcikgcHVibGljIG9ubHlPd25lcnsKICAgICAgICByZXF1aXJlKF9ldGhDb2xsZWN0b3IgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgZXRoQ29sbGVjdG9yID0gX2V0aENvbGxlY3RvcjsKICAgIH0KCiAgICAvL1RvIGVuYWJsZSB0cmFuc2ZlciBvZiB0b2tlbnMKICAgIGZ1bmN0aW9uIHVubG9ja1RyYW5zZmVyKCkgZXh0ZXJuYWwgb25seU93bmVyewogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IENoZWNrIGlmIHRoZSBhZGRyZXNzIGJlaW5nIHBhc3NlZCBiZWxvbmdzIHRvIGEgY29udHJhY3QKICAgICoKICAgICogQHBhcmFtIF9hZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHZlcmlmeQogICAgKiBAcmV0dXJuIEEgYm9vbCBzcGVjaWZ5aW5nIGlmIHRoZSBhZGRyZXNzIGlzIHRoYXQgb2YgY29udHJhY3Qgb3Igbm90CiAgICAqLwogICAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyZXNzKSBwcml2YXRlIHZpZXcgcmV0dXJucyhib29sIF9pc0NvbnRyYWN0KXsKICAgICAgICBhc3NlcnQoX2FkZHJlc3MgIT0gYWRkcmVzcygwKSApOwogICAgICAgIHVpbnQgbGVuZ3RoOwogICAgICAgIC8vaW5saW5lIGFzc2VtYmx5IGNvZGUgdG8gY2hlY2sgdGhlIGxlbmd0aCBvZiBhZGRyZXNzCiAgICAgICAgYXNzZW1ibHl7CiAgICAgICAgICAgIGxlbmd0aCA6PSBleHRjb2Rlc2l6ZShfYWRkcmVzcykKICAgICAgICB9CiAgICAgICAgaWYobGVuZ3RoID4gMCl7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IENoZWNrIGJhbGFuY2Ugb2YgZ2l2ZW4gYWNjb3VudCBhZGRyZXNzCiAgICAqCiAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgYWNjb3VudCB3aG9zZSBiYWxhbmNlIHlvdSB3YW50IHRvIGtub3cKICAgICogQHJldHVybiBiYWxhbmNlIG9mIHRoZSBhY2NvdW50CiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF92YWx1ZSl7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgVHJhbnNmZXIgc2VuZGVyJ3MgdG9rZW4gdG8gYSBnaXZlbiBhZGRyZXNzCiAgICAqCiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgICogQHBhcmFtIF92YWx1ZSB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgKiBAcmV0dXJuIEEgYm9vbCBpZiB0aGUgdHJhbnNmZXIgd2FzIGEgc3VjY2VzcyBvciBub3QKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlVbmxvY2tlZCBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSBwdWJsaWMgcmV0dXJucyhib29sIF9zdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSggX3RvICE9IGFkZHJlc3MoMCkgKTsKICAgICAgICBieXRlcyBtZW1vcnkgX2VtcHR5OwogICAgICAgIGFzc2VydCgoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKSAmJiBfdmFsdWUgPiAwICYmIF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLlN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLkFkZChfdmFsdWUpOwogICAgICAgIGlmKGlzQ29udHJhY3QoX3RvKSl7CiAgICAgICAgICAgIEVSQzIyM1JlY2VpdmluZ0NvbnRyYWN0IHJlY2VpdmVyID0gRVJDMjIzUmVjZWl2aW5nQ29udHJhY3QoX3RvKTsKICAgICAgICAgICAgcmVjZWl2ZXIudG9rZW5GYWxsYmFjayhtc2cuc2VuZGVyLCBfdmFsdWUsIF9lbXB0eSk7CiAgICAgICAgfQogICAgICAgIGVtaXQgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyB0byBhbiBhZGRyZXNzIGdpdmVuIGJ5IHNlbmRlci4gVG8gbWFrZSBFUkMyMjMgY29tcGxpYW50CiAgICAqCiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgICogQHBhcmFtIF92YWx1ZSB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgKiBAcGFyYW0gX2RhdGEgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBvZiBhY2NvdW50IGZyb20gd2hlcmUgdG8gdHJhbnNmZXIgZnJvbQogICAgKiBAcmV0dXJuIEEgYm9vbCBpZiB0aGUgdHJhbnNmZXIgd2FzIGEgc3VjY2VzcyBvciBub3QKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBvbmx5VW5sb2NrZWQgb25seVBheWxvYWRTaXplKDMgKiAzMikgcHVibGljIHJldHVybnMoYm9vbCBfc3VjY2VzcykgewogICAgICAgIGFzc2VydCgoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKSAmJiBfdmFsdWUgPiAwICYmIF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLlN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLkFkZChfdmFsdWUpOwogICAgICAgIGlmKGlzQ29udHJhY3QoX3RvKSl7CiAgICAgICAgICAgIEVSQzIyM1JlY2VpdmluZ0NvbnRyYWN0IHJlY2VpdmVyID0gRVJDMjIzUmVjZWl2aW5nQ29udHJhY3QoX3RvKTsKICAgICAgICAgICAgcmVjZWl2ZXIudG9rZW5GYWxsYmFjayhtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICB9CiAgICAgICAgZW1pdCBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgCiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlciwgZm9yIEVSQzIwLgogICAgKgogICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICogQHJldHVybiBBIGJvb2wgaWYgdGhlIHRyYW5zZmVyIHdhcyBhIHN1Y2Nlc3Mgb3Igbm90IAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzKjMyKSBwdWJsaWMgb25seVVubG9ja2VkIHJldHVybnMgKGJvb2wpewogICAgICAgIGJ5dGVzIG1lbW9yeSBfZW1wdHk7CiAgICAgICAgYXNzZXJ0KChfdmFsdWUgPiAwKQogICAgICAgICAgICYmIChfdG8gIT0gYWRkcmVzcygwKSkKICAgICAgICAgICAmJiAoX2Zyb20gIT0gYWRkcmVzcygwKSkKICAgICAgICAgICAmJiAoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICkpOwogICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLlN1YihfdmFsdWUpOwogICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uQWRkKF92YWx1ZSk7CiAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLlN1YihfdmFsdWUpOwogICAgICAgaWYoaXNDb250cmFjdChfdG8pKXsKICAgICAgICAgICBFUkMyMjNSZWNlaXZpbmdDb250cmFjdCByZWNlaXZlciA9IEVSQzIyM1JlY2VpdmluZ0NvbnRyYWN0KF90byk7CiAgICAgICAgICAgcmVjZWl2ZXIudG9rZW5GYWxsYmFjayhtc2cuc2VuZGVyLCBfdmFsdWUsIF9lbXB0eSk7CiAgICAgICB9CiAgICAgICBlbWl0IFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGhhcyBhbGxvd2VkIGEgc3BlbmRlciB0byByZWNpZXZlIGZyb20gb3duZXIuCiAgICAqCiAgICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlciB0byBzcGVuZC4KICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgICoKICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKXsKICAgICAgICBpZiggX3ZhbHVlID4gMCAmJiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKSl7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgICAgICBlbWl0IEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZWxzZXsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBtaW50QW5kVHJhbnNmZXIoYWRkcmVzcyBiZW5lZmljaWFyeSwgdWludDI1NiB0b2tlbnNUb0JlVHJhbnNmZXJyZWQpIHB1YmxpYyB2YWxpZFRpbWVmcmFtZSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkuQWRkKHRva2Vuc1RvQmVUcmFuc2ZlcnJlZCkgPD0gTUFYQ0FQKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LkFkZCh0b2tlbnNUb0JlVHJhbnNmZXJyZWQpOwogICAgICAgIGJhbGFuY2VzW2JlbmVmaWNpYXJ5XSA9IGJhbGFuY2VzW2JlbmVmaWNpYXJ5XS5BZGQodG9rZW5zVG9CZVRyYW5zZmVycmVkKTsKICAgICAgICBlbWl0IFRyYW5zZmVyKDB4MCwgYmVuZWZpY2lhcnkgLHRva2Vuc1RvQmVUcmFuc2ZlcnJlZCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Qm9udXModWludDI1NiBfdG9rZW5zQm91Z2h0KXB1YmxpYyB2aWV3IHJldHVybnModWludDI1Nil7CiAgICAgICAgdWludDI1NiBib251cyA9IDA7CiAgICAgICAgLypBcHJpbCA2LSBBcHJpbCAxMyAtLSAyMCUgCiAgICAgICAgQXByaWwgMTQtIEFwcmlsIDIxIC0tIDEwJSAKICAgICAgICBBcHJpbCAyMiAtIE1heSAzLS0gNSUgCiAgICAgICAgCiAgICAgICAgSUNPIEJPTlVTIFdFRUtTOiAKICAgICAgICBKdW5lIDEgLSBKdW5lIDkgLS0gMjAlIAogICAgICAgIEp1bmUgMTAgLSBKdW5lIDE3IC0tIDEwJSAKICAgICAgICBKdW5lIDE4IC0gSnVuZSAzMCAtLSA1JSAKICAgICAgICBKdWx5IDEgLSBKdWx5IDkgLS0gTm8gYm9udXMgCiAgICAgICAgKi8KICAgICAgICAvLyAxNTIyOTcyODAwID0gNiBhcHJpbCAyMDE4CiAgICAgICAgLy8gMTUyMzU3NzYwMCA9IDEzIEFwcmlsIDIwMTgKICAgICAgICAvLyAxNTIzNjY0MDAwID0gMTQgQXByaWwgMjAxOAogICAgICAgIC8vIDE1MjQyNjg4MDAgPSAyMSBBcHJpbCAyMDE4CiAgICAgICAgLy8gMTUyNDM1NTIwMCA9IDIyIEFwcmlsIDIwMTgKICAgICAgICAvLyAxNTI1MzA1NjAwID0gMyBBcHJpbCAyMDE4CiAgICAgICAgLy8gMTUyNTM5MjAwMCA9IDQgbWF5IDIwMTgKICAgICAgICAvLyAxNTI3ODExMjAwID0gMSBqdW5lIDIwMTgKICAgICAgICAvLyAxNTI4NTAyNDAwID0gOSBqdW5lIDIwMTgKICAgICAgICAvLyAxNTI4NTg4ODAwID0gMTAganVuZSAyMDE4CiAgICAgICAgLy8gMTUyOTE5MzYwMCA9IDE3IGp1bmUgMjAxOAogICAgICAgIC8vIDE1MjkyODAwMDAgPSAxOCBqdW5lIDIwMTgKICAgICAgICAvLyAxNTMwMzE2ODAwID0gMzAganVuZSAyMDE4CiAgICAgICAgLy8gMTUzMDQwMzIwMCA9IDEganVseSAyMDE4CiAgICAgICAgLy8gMTUzMTA5NDQwMCA9IDkganVseSAyMDE4CiAgICAgICAgaWYoc2FsZVR5cGUgPT0gMSl7CiAgICAgICAgICAgIC8vUHJlc2FsZSBpcyBnb2luZyBvbgogICAgICAgICAgICBpZihub3cgPj0gMTUyMjk3MjgwMCAmJiBub3cgPCAxNTIzNjY0MDAwKXsKICAgICAgICAgICAgICAgIC8vNiBhcHJpbCB0byBiZWZvcmUgMTQgYXByaWwKICAgICAgICAgICAgICAgIGJvbnVzID0gX3Rva2Vuc0JvdWdodCoyMC8xMDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZihub3cgPj0gMTUyMzY2NDAwMCAmJiBub3cgPCAxNTI0MzU1MjAwKXsKICAgICAgICAgICAgICAgIC8vMTQgYXByaWwgdG8gYmVmb3JlIDIyIGFwcmlsCiAgICAgICAgICAgICAgICBib251cyA9IF90b2tlbnNCb3VnaHQqMTAvMTAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYobm93ID49IDE1MjQzNTUyMDAgJiYgbm93IDwgMTUyNTM5MjAwMCl7CiAgICAgICAgICAgICAgICAvL0FwcmlsbCAyMiB0byBiZWZvcmUgNCBtYXkKICAgICAgICAgICAgICAgIGJvbnVzID0gX3Rva2Vuc0JvdWdodCo1LzEwMDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZihzYWxlVHlwZSA9PSAyKXsKICAgICAgICAgICAgLy9JQ08gaXMgZ29pbmcgb24KICAgICAgICAgICAgaWYobm93ID49IDE1Mjc4MTEyMDAgJiYgbm93IDwgMTUyODU4ODgwMCl7CiAgICAgICAgICAgICAgICAvLyAxIGp1bmUgdG8gYmVmb3JlIDEwIGp1bmUKICAgICAgICAgICAgICAgIGJvbnVzID0gX3Rva2Vuc0JvdWdodCoyMC8xMDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZihub3cgPj0gMTUyODU4ODgwMCAmJiBub3cgPCAxNTI5MjgwMDAwKXsKICAgICAgICAgICAgICAgIC8vIGp1bmUgMTAgdG8gYmVmb3JlIGp1bmUgMTgKICAgICAgICAgICAgICAgIGJvbnVzID0gX3Rva2Vuc0JvdWdodCoxMC8xMDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZihub3cgPj0gMTUyOTI4MDAwMCAmJiBub3cgPCAxNTMwNDAzMjAwKXsKICAgICAgICAgICAgICAgIC8vIGp1bmUgMTggdG8gYmVmb3JlIGp1bHkgMQogICAgICAgICAgICAgICAgYm9udXMgPSBfdG9rZW5zQm91Z2h0KjUvMTAwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBib251czsKICAgIH0KICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIGJlbmVmaWNpYXJ5KSBpbnRlcm5hbCB2YWxpZFRpbWVmcmFtZSB7CiAgICAgICAgdWludDI1NiB0b2tlbnNCb3VnaHQgPSBtc2cudmFsdWUuTXVsKFBSSUNFKTsKICAgICAgICB0b2tlbnNCb3VnaHQgPSB0b2tlbnNCb3VnaHQuQWRkKGdldEJvbnVzKHRva2Vuc0JvdWdodCkpOwogICAgICAgIGJhbGFuY2VzW2JlbmVmaWNpYXJ5XSA9IGJhbGFuY2VzW2JlbmVmaWNpYXJ5XS5BZGQodG9rZW5zQm91Z2h0KTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LkFkZCh0b2tlbnNCb3VnaHQpOwogICAgICAgCiAgICAgICAgYXNzZXJ0KHRvdGFsU3VwcGx5IDw9IEhBUkRfQ0FQKTsKICAgICAgICB0b3RhbFdlaVJlY2VpdmVkID0gdG90YWxXZWlSZWNlaXZlZC5BZGQobXNnLnZhbHVlKTsKICAgICAgICBldGhDb2xsZWN0b3IudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICBlbWl0IFRyYW5zZmVyKDB4MCwgYmVuZWZpY2lhcnksIHRva2Vuc0JvdWdodCk7CiAgICB9CgogICAgLyoqCiAgICAqIEZpbmFsaXplIHRoZSBjcm93ZHNhbGUKICAgICovCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIHB1YmxpYyBvbmx5VW5sb2NrZWQgb25seU93bmVyIHsKICAgICAgICAvL01ha2Ugc3VyZSBTYWxlIGlzIG5vdCBydW5uaW5nCiAgICAgICAgLy9JZiBzYWxlIGlzIHJ1bm5pbmcsIHRoZW4gY2hlY2sgaWYgdGhlIGhhcmQgY2FwIGhhcyBiZWVuIHJlYWNoZWQgb3Igbm90CiAgICAgICAgYXNzZXJ0KCFpc1NhbGVSdW5uaW5nKCkgfHwgKEhBUkRfQ0FQLlN1Yih0b3RhbFN1cHBseSkpIDw9IDFlMTgpOwogICAgICAgIGVuZFRpbWUgPSBub3c7CgogICAgICAgIC8vZW5hYmxlIHRyYW5zZmVycmluZyBvZiB0b2tlbnMgYW1vbmcgdG9rZW4gaG9sZGVycwogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgICAgIC8vRW1pdCBldmVudCB3aGVuIGNyb3dkc2FsZSBzdGF0ZSBjaGFuZ2VzCiAgICAgICAgZW1pdCBTdGF0ZUNoYW5nZWQodHJ1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvKioKICAgICogRmFpbHNhZmUgZHJhaW4KICAgICovCiAgICBmdW5jdGlvbiBkcmFpbigpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIG93bmVyLnRyYW5zZmVyKGFkZHJlc3ModGhpcykuYmFsYW5jZSk7CiAgICB9Cn0='.
	

]
