Class {
	#name : #SRT317e89f3404ec8821572c6b2328f1f813dad3d66,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT317e89f3404ec8821572c6b2328f1f813dad3d66 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBNdWx0aXNpZ25hdHVyZSB3YWxsZXQKICogQGRldiBBbGxvd3MgbXVsdGlwbGUgcGFydGllcyB0byBhZ3JlZSBvbiB0cmFuc2FjdGlvbnMgYmVmb3JlIGV4ZWN1dGlvbgogKiBAYXV0aG9yIFN0ZWZhbiBHZW9yZ2UgPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI0YjM4M2YyZTJkMmEyNTY1MmMyZTI0MzkyYzJlMGIyODI0MjUzODJlMjUzODMyMzg2NTI1MmUzZiI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvYT4+CiAqIEBhdXRob3IgSmFrdWIgU3RlZmFuc2tpIChodHRwczovL2dpdGh1Yi5jb20vanN0ZWZhbnNraSkKICovCmNvbnRyYWN0IE11bHRpU2lnV2FsbGV0IHsKCiAgICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBNQVhfT1dORVJfQ09VTlQgPSA1MDsKCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IFRyYW5zYWN0aW9uKSBwdWJsaWMgdHJhbnNhY3Rpb25zOwogICAgbWFwcGluZyAodWludDI1NiA9PiBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpKSBwdWJsaWMgY29uZmlybWF0aW9uczsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBpc093bmVyOwogICAgYWRkcmVzc1tdIHB1YmxpYyBvd25lcnM7CgogICAgdWludDI1NiBwdWJsaWMgcmVxdWlyZWQ7CiAgICB1aW50MjU2IHB1YmxpYyB0cmFuc2FjdGlvbkNvdW50OwoKICAgIHN0cnVjdCBUcmFuc2FjdGlvbiB7CiAgICAgICAgYWRkcmVzcyBkZXN0aW5hdGlvbjsKICAgICAgICB1aW50MjU2IHZhbHVlOwogICAgICAgIGJ5dGVzIGRhdGE7CiAgICAgICAgYm9vbCBleGVjdXRlZDsKICAgIH0KCiAgICBldmVudCBDb25maXJtYXRpb24oYWRkcmVzcyBpbmRleGVkIHNlbmRlciwgdWludDI1NiBpbmRleGVkIHRyYW5zYWN0aW9uSWQpOwoKICAgIGV2ZW50IFJldm9jYXRpb24oYWRkcmVzcyBpbmRleGVkIHNlbmRlciwgdWludDI1NiBpbmRleGVkIHRyYW5zYWN0aW9uSWQpOwoKICAgIGV2ZW50IFN1Ym1pc3Npb24odWludDI1NiBpbmRleGVkIHRyYW5zYWN0aW9uSWQpOwoKICAgIGV2ZW50IEV4ZWN1dGlvbih1aW50MjU2IGluZGV4ZWQgdHJhbnNhY3Rpb25JZCk7CgogICAgZXZlbnQgRXhlY3V0aW9uRmFpbHVyZSh1aW50MjU2IGluZGV4ZWQgdHJhbnNhY3Rpb25JZCk7CgogICAgZXZlbnQgRGVwb3NpdChhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICBldmVudCBPd25lckFkZGl0aW9uKGFkZHJlc3MgaW5kZXhlZCBvd25lcik7CgogICAgZXZlbnQgT3duZXJSZW1vdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lcik7CgogICAgZXZlbnQgUmVxdWlyZW1lbnRDaGFuZ2UodWludDI1NiByZXF1aXJlZCk7CgogICAgbW9kaWZpZXIgb25seVdhbGxldCgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXJEb2VzTm90RXhpc3QoYWRkcmVzcyBvd25lcikgewogICAgICAgIHJlcXVpcmUoIWlzT3duZXJbb3duZXJdKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lckV4aXN0cyhhZGRyZXNzIG93bmVyKSB7CiAgICAgICAgcmVxdWlyZShpc093bmVyW293bmVyXSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5VHJhbnNhY3Rpb25FeGlzdHModWludDI1NiB0cmFuc2FjdGlvbklkKSB7CiAgICAgICAgcmVxdWlyZSh0cmFuc2FjdGlvbnNbdHJhbnNhY3Rpb25JZF0uZGVzdGluYXRpb24gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Q29uZmlybWVkKHVpbnQyNTYgdHJhbnNhY3Rpb25JZCwgYWRkcmVzcyBvd25lcikgewogICAgICAgIHJlcXVpcmUoY29uZmlybWF0aW9uc1t0cmFuc2FjdGlvbklkXVtvd25lcl0pOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seU5vdENvbmZpcm1lZCh1aW50MjU2IHRyYW5zYWN0aW9uSWQsIGFkZHJlc3Mgb3duZXIpIHsKICAgICAgICByZXF1aXJlKCFjb25maXJtYXRpb25zW3RyYW5zYWN0aW9uSWRdW293bmVyXSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Tm90RXhlY3V0ZWQodWludDI1NiB0cmFuc2FjdGlvbklkKSB7CiAgICAgICAgcmVxdWlyZSghdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uSWRdLmV4ZWN1dGVkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlWYWxpZChhZGRyZXNzIF9hZGRyZXNzKSB7CiAgICAgICAgcmVxdWlyZShfYWRkcmVzcyAhPSAwKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlWYWxpZFJlcXVpcmVtZW50KHVpbnQyNTYgb3duZXJDb3VudCwgdWludDI1NiBfcmVxdWlyZWQpIHsKICAgICAgICByZXF1aXJlKG93bmVyQ291bnQgPiAwKTsKICAgICAgICByZXF1aXJlKG93bmVyQ291bnQgPD0gTUFYX09XTkVSX0NPVU5UKTsKICAgICAgICByZXF1aXJlKF9yZXF1aXJlZCA+IDApOwogICAgICAgIHJlcXVpcmUoX3JlcXVpcmVkIDw9IG93bmVyQ291bnQpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IENvbnRyYWN0IGNvbnN0cnVjdG9yIHNldHMgaW5pdGlhbCBvd25lcnMgYW5kIHJlcXVpcmVkIG51bWJlciBvZiBjb25maXJtYXRpb25zCiAgICAgKiBAcGFyYW0gX293bmVycyBMaXN0IG9mIGluaXRpYWwgb3duZXJzCiAgICAgKiBAcGFyYW0gX3JlcXVpcmVkIE51bWJlciBvZiByZXF1aXJlZCBjb25maXJtYXRpb25zCiAgICAgKi8KICAgIGZ1bmN0aW9uIE11bHRpU2lnV2FsbGV0KGFkZHJlc3NbXSBfb3duZXJzLCB1aW50MjU2IF9yZXF1aXJlZCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5VmFsaWRSZXF1aXJlbWVudChfb3duZXJzLmxlbmd0aCwgX3JlcXVpcmVkKQogICAgewogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IF9vd25lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcmVxdWlyZSghaXNPd25lcltfb3duZXJzW2ldXSAmJiBfb3duZXJzW2ldICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICAgICAgaXNPd25lcltfb3duZXJzW2ldXSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBvd25lcnMgPSBfb3duZXJzOwogICAgICAgIHJlcXVpcmVkID0gX3JlcXVpcmVkOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGYWxsYmFjayBmdW5jdGlvbiBhbGxvd3MgRVRIIGRlcG9zaXRzCiAgICAgKi8KICAgIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUgewogICAgICAgIGlmIChtc2cudmFsdWUgPiAwKSB7CiAgICAgICAgICAgIERlcG9zaXQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFkZCBhIG5ldyBvd25lcgogICAgICogQGRldiBUcmFuc2FjdGlvbiBoYXMgdG8gYmUgc2VudCBieSB3YWxsZXQKICAgICAqIEBwYXJhbSBvd25lciBUaGUgYWRkcmVzcyBvZiBhIG5ldyBvd25lcgogICAgICovCiAgICBmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIG93bmVyKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlXYWxsZXQKICAgICAgICBvbmx5VmFsaWQob3duZXIpCiAgICAgICAgb25seU93bmVyRG9lc05vdEV4aXN0KG93bmVyKQogICAgICAgIG9ubHlWYWxpZFJlcXVpcmVtZW50KG93bmVycy5sZW5ndGggKyAxLCByZXF1aXJlZCkKICAgIHsKICAgICAgICBpc093bmVyW293bmVyXSA9IHRydWU7CiAgICAgICAgb3duZXJzLnB1c2gob3duZXIpOwoKICAgICAgICBPd25lckFkZGl0aW9uKG93bmVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgUmVtb3ZlIGFuIG93bmVyCiAgICAgKiBAZGV2IFRyYW5zYWN0aW9uIGhhcyB0byBiZSBzZW50IGJ5IHdhbGxldAogICAgICogQHBhcmFtIG93bmVyIFRoZSBhZGRyZXNzIG9mIGFuIG93bmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlbW92ZU93bmVyKGFkZHJlc3Mgb3duZXIpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seVdhbGxldAogICAgICAgIG9ubHlPd25lckV4aXN0cyhvd25lcikKICAgIHsKICAgICAgICBpc093bmVyW293bmVyXSA9IGZhbHNlOwoKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBvd25lcnMubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgICAgICAgIGlmIChvd25lcnNbaV0gPT0gb3duZXIpIHsKICAgICAgICAgICAgICAgIG93bmVyc1tpXSA9IG93bmVyc1tvd25lcnMubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICBvd25lcnMubGVuZ3RoIC09IDE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHJlcXVpcmVkID4gb3duZXJzLmxlbmd0aCkgewogICAgICAgICAgICBjaGFuZ2VSZXF1aXJlbWVudChvd25lcnMubGVuZ3RoKTsKICAgICAgICB9CgogICAgICAgIE93bmVyUmVtb3ZhbChvd25lcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFJlcGxhY2UgdGhlIG93bmVyIHdpdGggYSBuZXcgb3duZXIKICAgICAqIEBkZXYgVHJhbnNhY3Rpb24gaGFzIHRvIGJlIHNlbnQgYnkgd2FsbGV0CiAgICAgKiBAcGFyYW0gb3duZXIgVGhlIGFkZHJlc3Mgb2Ygb3duZXIgdG8gYmUgcmVwbGFjZWQKICAgICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyBvZiBuZXcgb3duZXIKICAgICAqLwogICAgZnVuY3Rpb24gcmVwbGFjZU93bmVyKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3MgbmV3T3duZXIpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seVdhbGxldAogICAgICAgIG9ubHlPd25lckV4aXN0cyhvd25lcikKICAgICAgICBvbmx5T3duZXJEb2VzTm90RXhpc3QobmV3T3duZXIpCiAgICB7CiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgb3duZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChvd25lcnNbaV0gPT0gb3duZXIpIHsKICAgICAgICAgICAgICAgIG93bmVyc1tpXSA9IG5ld093bmVyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlzT3duZXJbb3duZXJdID0gZmFsc2U7CiAgICAgICAgaXNPd25lcltuZXdPd25lcl0gPSB0cnVlOwoKICAgICAgICBPd25lclJlbW92YWwob3duZXIpOwogICAgICAgIE93bmVyQWRkaXRpb24obmV3T3duZXIpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBDaGFuZ2UgdGhlIG51bWJlciBvZiByZXF1aXJlZCBjb25maXJtYXRpb25zCiAgICAgKiBAZGV2IFRyYW5zYWN0aW9uIGhhcyB0byBiZSBzZW50IGJ5IHdhbGxldAogICAgICogQHBhcmFtIF9yZXF1aXJlZCBUaGUgbnVtYmVyIG9mIHJlcXVpcmVkIGNvbmZpcm1hdGlvbnMKICAgICAqLwogICAgZnVuY3Rpb24gY2hhbmdlUmVxdWlyZW1lbnQodWludDI1NiBfcmVxdWlyZWQpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seVdhbGxldAogICAgICAgIG9ubHlWYWxpZFJlcXVpcmVtZW50KG93bmVycy5sZW5ndGgsIF9yZXF1aXJlZCkKICAgIHsKICAgICAgICByZXF1aXJlZCA9IF9yZXF1aXJlZDsKICAgICAgICBSZXF1aXJlbWVudENoYW5nZShfcmVxdWlyZWQpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBTdWJtaXQgYW5kIGNvbmZpcm0gYSB0cmFuc2FjdGlvbgogICAgICogQGRldiBUcmFuc2FjdGlvbiBoYXMgdG8gYmUgc2VudCBieSB3YWxsZXQKICAgICAqIEBwYXJhbSBkZXN0aW5hdGlvbiBUaGUgdHJhbnNhY3Rpb24gdGFyZ2V0IGFkZHJlc3MKICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdHJhbnNhY3Rpb24gRVRIIHZhbHVlCiAgICAgKiBAcGFyYW0gZGF0YSBUaGUgdHJhbnNhY3Rpb24gZGF0YSBwYXlsb2FkCiAgICAgKiBAcmV0dXJuIEEgdHJhbnNhY3Rpb24gSUQKICAgICAqLwogICAgZnVuY3Rpb24gc3VibWl0VHJhbnNhY3Rpb24oYWRkcmVzcyBkZXN0aW5hdGlvbiwgdWludDI1NiB2YWx1ZSwgYnl0ZXMgZGF0YSkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXJFeGlzdHMobXNnLnNlbmRlcikKICAgICAgICByZXR1cm5zICh1aW50MjU2IHRyYW5zYWN0aW9uSWQpCiAgICB7CiAgICAgICAgdHJhbnNhY3Rpb25JZCA9IGFkZFRyYW5zYWN0aW9uKGRlc3RpbmF0aW9uLCB2YWx1ZSwgZGF0YSk7CiAgICAgICAgY29uZmlybVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uSWQpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBDb25maXJtIHRoZSB0cmFuc2FjdGlvbgogICAgICogQHBhcmFtIHRyYW5zYWN0aW9uSWQgVGhlIHRyYW5zYWN0aW9uIElECiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbmZpcm1UcmFuc2FjdGlvbih1aW50MjU2IHRyYW5zYWN0aW9uSWQpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyRXhpc3RzKG1zZy5zZW5kZXIpCiAgICAgICAgb25seVRyYW5zYWN0aW9uRXhpc3RzKHRyYW5zYWN0aW9uSWQpCiAgICAgICAgb25seU5vdENvbmZpcm1lZCh0cmFuc2FjdGlvbklkLCBtc2cuc2VuZGVyKQogICAgewogICAgICAgIGNvbmZpcm1hdGlvbnNbdHJhbnNhY3Rpb25JZF1bbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgICAgIENvbmZpcm1hdGlvbihtc2cuc2VuZGVyLCB0cmFuc2FjdGlvbklkKTsKCiAgICAgICAgZXhlY3V0ZVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uSWQpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBSZXZva2UgdGhlIHRyYW5zYWN0aW9uIGNvbmZpcm1hdGlvbgogICAgICogQHBhcmFtIHRyYW5zYWN0aW9uSWQgVGhlIHRyYW5zYWN0aW9uIElECiAgICAgKi8KICAgIGZ1bmN0aW9uIHJldm9rZUNvbmZpcm1hdGlvbih1aW50MjU2IHRyYW5zYWN0aW9uSWQpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyRXhpc3RzKG1zZy5zZW5kZXIpCiAgICAgICAgb25seUNvbmZpcm1lZCh0cmFuc2FjdGlvbklkLCBtc2cuc2VuZGVyKQogICAgICAgIG9ubHlOb3RFeGVjdXRlZCh0cmFuc2FjdGlvbklkKQogICAgewogICAgICAgIGNvbmZpcm1hdGlvbnNbdHJhbnNhY3Rpb25JZF1bbXNnLnNlbmRlcl0gPSBmYWxzZTsKICAgICAgICBSZXZvY2F0aW9uKG1zZy5zZW5kZXIsIHRyYW5zYWN0aW9uSWQpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBFeGVjdXRlIGNvbmZpcm1lZCB0cmFuc2FjdGlvbgogICAgICogQHBhcmFtIHRyYW5zYWN0aW9uSWQgVGhlIHRyYW5zYWN0aW9uIElECiAgICAgKi8KICAgIGZ1bmN0aW9uIGV4ZWN1dGVUcmFuc2FjdGlvbih1aW50MjU2IHRyYW5zYWN0aW9uSWQpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyRXhpc3RzKG1zZy5zZW5kZXIpCiAgICAgICAgb25seUNvbmZpcm1lZCh0cmFuc2FjdGlvbklkLCBtc2cuc2VuZGVyKQogICAgICAgIG9ubHlOb3RFeGVjdXRlZCh0cmFuc2FjdGlvbklkKQogICAgewogICAgICAgIGlmIChpc0NvbmZpcm1lZCh0cmFuc2FjdGlvbklkKSkgewogICAgICAgICAgICBUcmFuc2FjdGlvbiBzdG9yYWdlIHR4biA9IHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbklkXTsKICAgICAgICAgICAgdHhuLmV4ZWN1dGVkID0gdHJ1ZTsKCiAgICAgICAgICAgIC8qIHNvbGhpbnQtZGlzYWJsZSBhdm9pZC1jYWxsLXZhbHVlICovCiAgICAgICAgICAgIGlmICh0eG4uZGVzdGluYXRpb24uY2FsbC52YWx1ZSh0eG4udmFsdWUpKHR4bi5kYXRhKSkgewogICAgICAgICAgICAgICAgRXhlY3V0aW9uKHRyYW5zYWN0aW9uSWQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgRXhlY3V0aW9uRmFpbHVyZSh0cmFuc2FjdGlvbklkKTsKICAgICAgICAgICAgICAgIHR4bi5leGVjdXRlZCA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8qIHNvbGhpbnQtZW5hYmxlIGF2b2lkLWNhbGwtdmFsdWUgKi8KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IENoZWNrIGNvbmZpcm1hdGlvbiBzdGF0dXMgb2YgdGhlIHRyYW5zYWN0aW9uCiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25JZCBUaGUgdHJhbnNhY3Rpb24gSUQKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0cmFuc2FjdGlvbiBpcyBjb25maXJtZWQsIG90aGVyd2lzZSBGYWxzZQogICAgICovCiAgICBmdW5jdGlvbiBpc0NvbmZpcm1lZCh1aW50MjU2IHRyYW5zYWN0aW9uSWQpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgdWludDI1NiBjb3VudCA9IDA7CiAgICAgICAgZm9yICh1aW50MjU2IGk9MDsgaSA8IG93bmVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoY29uZmlybWF0aW9uc1t0cmFuc2FjdGlvbklkXVtvd25lcnNbaV1dKSB7CiAgICAgICAgICAgICAgICBjb3VudCArPSAxOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoY291bnQgPT0gcmVxdWlyZWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQGRldiBHZXQgbnVtYmVyIG9mIGNvbmZpcm1hdGlvbnMgb2YgdGhlIHRyYW5zYWN0aW9uCiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25JZCBUaGUgdHJhbnNhY3Rpb24gSUQKICAgICAqIEByZXR1cm4gTnVtYmVyIG9mIGNvbmZpcm1hdGlvbnMKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0Q29uZmlybWF0aW9uQ291bnQodWludDI1NiB0cmFuc2FjdGlvbklkKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50MjU2IGNvdW50KQogICAgewogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IG93bmVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoY29uZmlybWF0aW9uc1t0cmFuc2FjdGlvbklkXVtvd25lcnNbaV1dKSB7CiAgICAgICAgICAgICAgICBjb3VudCArPSAxOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQGRldiBHZXQgdG90YWwgbnVtYmVyIG9mIHRyYW5zYWN0aW9ucyBhZnRlciBmaWxlcnMgYXJlIGFwcGxpZWQKICAgICAqIEBwYXJhbSBwZW5kaW5nIEluY2x1ZGUgcGVuZGluZyB0cmFuc2FjdGlvbnMKICAgICAqIEBwYXJhbSBleGVjdXRlZCBJbmNsdWRlIGV4ZWN1dGVkIHRyYW5zYWN0aW9ucwogICAgICogQHJldHVybiBUb3RhbCBudW1iZXIgb2YgdHJhbnNhY3Rpb25zIGFmdGVyIGZpbHRlcnMgYXJlIGFwcGxpZWQKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0VHJhbnNhY3Rpb25Db3VudChib29sIHBlbmRpbmcsIGJvb2wgZXhlY3V0ZWQpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnMgKHVpbnQyNTYgY291bnQpCiAgICB7CiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgdHJhbnNhY3Rpb25Db3VudDsgaSsrKSB7CiAgICAgICAgICAgIGJvb2wgdHhFeGVjdXRlZCA9IHRyYW5zYWN0aW9uc1tpXS5leGVjdXRlZDsKCiAgICAgICAgICAgIGlmICgocGVuZGluZyAmJiAhdHhFeGVjdXRlZCkgfHwgKGV4ZWN1dGVkICYmIHR4RXhlY3V0ZWQpKSB7CiAgICAgICAgICAgICAgICBjb3VudCArPSAxOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQGRldiBHZXQgbGlzdCBvZiBvd25lcnMKICAgICAqIEByZXR1cm4gTGlzdCBvZiBvd25lciBhZGRyZXNzZXMKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0T3duZXJzKCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoYWRkcmVzc1tdKQogICAgewogICAgICAgIHJldHVybiBvd25lcnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEdldCBhcnJheSB3aXRoIG93bmVyIGFkZHJlc3NlcyB0aGF0IGNvbmZpcm1lZCB0aGUgdHJhbnNhY3Rpb24KICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbklkIFRoZSB0cmFuc2FjdGlvbiBJRAogICAgICogQHJldHVybiBBcnJheSBvZiBvd25lciBhZGRyZXNzZXMgdGhhdCBjb25maXJtZWQgdGhlIHRyYW5zYWN0aW9uCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldENvbmZpcm1hdGlvbnModWludDI1NiB0cmFuc2FjdGlvbklkKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zIChhZGRyZXNzW10gX2NvbmZpcm1hdGlvbnMpCiAgICB7CiAgICAgICAgYWRkcmVzc1tdIG1lbW9yeSBjb25maXJtYXRpb25zVGVtcCA9IG5ldyBhZGRyZXNzW10ob3duZXJzLmxlbmd0aCk7CiAgICAgICAgdWludDI1NiBjb3VudCA9IDA7CiAgICAgICAgdWludDI1NiBpOwoKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgb3duZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChjb25maXJtYXRpb25zW3RyYW5zYWN0aW9uSWRdW293bmVyc1tpXV0pIHsKICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvbnNUZW1wW2NvdW50XSA9IG93bmVyc1tpXTsKICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIF9jb25maXJtYXRpb25zID0gbmV3IGFkZHJlc3NbXShjb3VudCk7CiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKICAgICAgICAgICAgX2NvbmZpcm1hdGlvbnNbaV0gPSBjb25maXJtYXRpb25zVGVtcFtpXTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEdldCBsaXN0IG9mIHRyYW5zYWN0aW9uIElEcyBpbiBkZWZpbmVkIHJhbmdlCiAgICAgKiBAcGFyYW0gZnJvbSBJbmRleCBzdGFydCBwb3NpdGlvbiBvZiB0cmFuc2FjdGlvbiBhcnJheQogICAgICogQHBhcmFtIHRvIEluZGV4IGVuZCBwb3NpdGlvbiBvZiB0cmFuc2FjdGlvbiBhcnJheQogICAgICogQHBhcmFtIHBlbmRpbmcgSW5jbHVkZSBwZW5kaW5nIHRyYW5zYWN0aW9ucwogICAgICogQHBhcmFtIGV4ZWN1dGVkIEluY2x1ZGUgZXhlY3V0ZWQgdHJhbnNhY3Rpb25zCiAgICAgKiBAcmV0dXJuIEFycmF5IG9mIHRyYW5zYWN0aW9uIElEcwogICAgICovCiAgICBmdW5jdGlvbiBnZXRUcmFuc2FjdGlvbklkcygKICAgICAgICB1aW50MjU2IGZyb20sCiAgICAgICAgdWludDI1NiB0bywKICAgICAgICBib29sIHBlbmRpbmcsCiAgICAgICAgYm9vbCBleGVjdXRlZAogICAgKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50MjU2W10gX3RyYW5zYWN0aW9uSWRzKQogICAgewogICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgdHJhbnNhY3Rpb25JZHNUZW1wID0gbmV3IHVpbnQyNTZbXSh0cmFuc2FjdGlvbkNvdW50KTsKICAgICAgICB1aW50MjU2IGNvdW50ID0gMDsKICAgICAgICB1aW50MjU2IGk7CgogICAgICAgIGZvciAoaSA9IDA7IGkgPCB0cmFuc2FjdGlvbkNvdW50OyBpKyspIHsKICAgICAgICAgICAgYm9vbCB0eEV4ZWN1dGVkID0gdHJhbnNhY3Rpb25zW2ldLmV4ZWN1dGVkOwoKICAgICAgICAgICAgaWYgKChwZW5kaW5nICYmICF0eEV4ZWN1dGVkKSB8fCAoZXhlY3V0ZWQgJiYgdHhFeGVjdXRlZCkpIHsKICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSWRzVGVtcFtjb3VudF0gPSBpOwogICAgICAgICAgICAgICAgY291bnQgKz0gMTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgX3RyYW5zYWN0aW9uSWRzID0gbmV3IHVpbnQyNTZbXSh0byAtIGZyb20pOwogICAgICAgIGZvciAoaSA9IGZyb207IGkgPCB0bzsgaSsrKSB7CiAgICAgICAgICAgIF90cmFuc2FjdGlvbklkc1tpIC0gZnJvbV0gPSB0cmFuc2FjdGlvbklkc1RlbXBbaV07CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBZGQgYSBuZXcgdHJhbnNhY3Rpb24gdG8gdGhlIHRyYW5zYWN0aW9uIG1hcHBpbmcKICAgICAqIEBwYXJhbSBkZXN0aW5hdGlvbiBUaGUgdHJhbnNhY3Rpb24gdGFyZ2V0IGFkZHJlc3MKICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdHJhbnNhY3Rpb24gZXRoZXIgdmFsdWUKICAgICAqIEBwYXJhbSBkYXRhIFRoZSB0cmFuc2FjdGlvbiBkYXRhIHBheWxvYWQKICAgICAqIEByZXR1cm4gVGhlIHRyYW5zYWN0aW9uIElECiAgICAgKi8KICAgIGZ1bmN0aW9uIGFkZFRyYW5zYWN0aW9uKGFkZHJlc3MgZGVzdGluYXRpb24sIHVpbnQyNTYgdmFsdWUsIGJ5dGVzIGRhdGEpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICBvbmx5VmFsaWQoZGVzdGluYXRpb24pCiAgICAgICAgcmV0dXJucyAodWludDI1NiB0cmFuc2FjdGlvbklkKQogICAgewogICAgICAgIHRyYW5zYWN0aW9uSWQgPSB0cmFuc2FjdGlvbkNvdW50OwogICAgICAgIHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbklkXSA9IFRyYW5zYWN0aW9uKHsKICAgICAgICAgICAgZGVzdGluYXRpb246IGRlc3RpbmF0aW9uLAogICAgICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgIGV4ZWN1dGVkOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHRyYW5zYWN0aW9uQ291bnQgKz0gMTsKCiAgICAgICAgU3VibWlzc2lvbih0cmFuc2FjdGlvbklkKTsKICAgIH0KfQ=='.
	

]
