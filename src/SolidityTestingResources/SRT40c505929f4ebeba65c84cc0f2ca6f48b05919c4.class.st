Class {
	#name : #SRT40c505929f4ebeba65c84cc0f2ca6f48b05919c4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT40c505929f4ebeba65c84cc0f2ca6f48b05919c4 >> base64 [
	^ 'LyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpwcmFnbWEgc29saWRpdHkgXjAuNC4xODsKCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9Cgp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgoKICAgIC8qKgogICAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgICAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgICAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewoKICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cgp9Cgpjb250cmFjdCBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIH0KICAgIH0KfQoKY29udHJhY3QgVGhlTW92ZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIk1PVkUgVG9rZW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiTU9WRSI7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICAvLyB0aW1lc3RhbXBzIGZvciBQUkUtSUNPIHBoYXNlCiAgICB1aW50IHB1YmxpYyBwcmVpY29TdGFydERhdGU7CiAgICB1aW50IHB1YmxpYyBwcmVpY29FbmREYXRlOwogICAgLy8gdGltZXN0YW1wcyBmb3IgSUNPIHBoYXNlCiAgICB1aW50IHB1YmxpYyBpY29TdGFydERhdGU7CiAgICB1aW50IHB1YmxpYyBpY29FbmREYXRlOwogICAgLy8gYWRkcmVzcyB3aGVyZSBmdW5kcyBhcmUgY29sbGVjdGVkCiAgICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CiAgICAvLyBob3cgbWFueSB0b2tlbiB1bml0cyBhIGJ1eWVyIGdldHMgcGVyIHdlaQogICAgdWludDI1NiBwdWJsaWMgcmF0ZTsKICAgIHVpbnQyNTYgcHVibGljIG1pblRyYW5zYWN0aW9uQW1vdW50OwogICAgdWludDI1NiBwdWJsaWMgcmFpc2VkRm9yRXRoZXIgPSAwOwogICAgdWludDI1NiBwcml2YXRlIHByZWljb1N1cHBseSA9IDMwNzIwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICB1aW50MjU2IHByaXZhdGUgaWNvU3VwcGx5ID0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICB1aW50MjU2IHByaXZhdGUgYm9udXNlc1N1cHBseSA9IDMwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CgogICAgdWludDI1NiBwdWJsaWMgYm9udXNlc1NvbGQgPSAwOwogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zU29sZCA9IDA7CgogICAgLy8gUFJFLUlDTyBzdGFnZXMKICAgIHVpbnQyNTYgcHVibGljIHN0YWdlMSA9IDI0MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgIHVpbnQyNTYgcHVibGljIHN0YWdlMiA9IDM2MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgIHVpbnQyNTYgcHVibGljIHN0YWdlMyA9IDk2MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgIHVpbnQyNTYgcHVibGljIHN0YWdlNCA9IDE1MTIwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CgogICAgbW9kaWZpZXIgaW5BY3RpdmVQZXJpb2QoKSB7CgkgICByZXF1aXJlKChwcmVpY29TdGFydERhdGUgPCBub3cgJiYgbm93IDw9IHByZWljb0VuZERhdGUpIHx8IChpY29TdGFydERhdGUgPCBub3cgJiYgbm93IDw9IGljb0VuZERhdGUpKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIFRoZU1vdmVUb2tlbih1aW50IF9wcmVpY29zdGFydCwgdWludCBfcHJlaWNvZW5kLHVpbnQgX2ljb3N0YXJ0LCB1aW50IF9pY29lbmQsIGFkZHJlc3MgX3dhbGxldCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF93YWxsZXQgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKF9wcmVpY29zdGFydCA8IF9wcmVpY29lbmQpOwogICAgICAgIHJlcXVpcmUoX3ByZWljb2VuZCA8IF9pY29zdGFydCk7CiAgICAgICAgcmVxdWlyZShfaWNvc3RhcnQgPCBfaWNvZW5kKTsKCiAgICAgICAgdG90YWxTdXBwbHkgPSAyMTE3MjAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgICAgICByYXRlID0gMzYwMDsKCiAgICAgICAgLy8gbWluaW1hbCBpbnZlc3QKICAgICAgICBtaW5UcmFuc2FjdGlvbkFtb3VudCA9IDAuMSBldGhlcjsKICAgICAgICBpY29TdGFydERhdGUgPSBfaWNvc3RhcnQ7CiAgICAgICAgaWNvRW5kRGF0ZSA9IF9pY29lbmQ7CiAgICAgICAgcHJlaWNvU3RhcnREYXRlID0gX3ByZWljb3N0YXJ0OwogICAgICAgIHByZWljb0VuZERhdGUgPSBfcHJlaWNvZW5kOwogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7CgoJICAgLy8gU3RvcmUgdGhlIGljbyBmdW5kcyBpbiB0aGUgY29udHJhY3QgYW5kIHNlbmQgdGhlIHJlc3QgdG8gdGhlIGRldmVsb3BlciB3YWxsZXQKICAgICAgIHVpbnQyNTYgYW1vdW50SW5Db250cmFjdCA9IHByZWljb1N1cHBseSArIGljb1N1cHBseSArIGJvbnVzZXNTdXBwbHk7CiAgICAgICB1aW50MjU2IGFtb3VudERldmVsb3BlcnMgPSB0b3RhbFN1cHBseSAtIGFtb3VudEluQ29udHJhY3Q7CiAgICAgICAKCSAgIGJhbGFuY2VzW3RoaXNdID0gYmFsYW5jZXNbdGhpc10uYWRkKGFtb3VudEluQ29udHJhY3QpOwoJICAgVHJhbnNmZXIoX3dhbGxldCwgX3dhbGxldCwgYW1vdW50RGV2ZWxvcGVycyk7CiAgICAgICBiYWxhbmNlc1tfd2FsbGV0XSA9IGJhbGFuY2VzW193YWxsZXRdLmFkZCh0b3RhbFN1cHBseSAtIGFtb3VudEluQ29udHJhY3QpOwogICAgICAgVHJhbnNmZXIoX3dhbGxldCwgdGhpcywgYW1vdW50SW5Db250cmFjdCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0dXBQUkVJQ09QZXJpb2QodWludCBfc3RhcnQsIHVpbnQgX2VuZCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfc3RhcnQgPCBfZW5kKTsKICAgICAgICBwcmVpY29TdGFydERhdGUgPSBfc3RhcnQ7CiAgICAgICAgcHJlaWNvRW5kRGF0ZSA9IF9lbmQ7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0dXBJQ09QZXJpb2QodWludCBfc3RhcnQsIHVpbnQgX2VuZCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfc3RhcnQgPCBfZW5kKTsKICAgICAgICBpY29TdGFydERhdGUgPSBfc3RhcnQ7CiAgICAgICAgaWNvRW5kRGF0ZSA9IF9lbmQ7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFJhdGUodWludDI1NiBfcmF0ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmF0ZSA9IF9yYXRlOwogICAgfQoKICAgIC8vIGZhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGJ1eSB0b2tlbnMKICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBpbkFjdGl2ZVBlcmlvZCBwYXlhYmxlIHsKICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gYnVyblBSRUlDT1Rva2VucygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGludDI1NiBhbW91bnRUb0J1cm4gPSBpbnQyNTYocHJlaWNvU3VwcGx5KSAtIGludDI1Nih0b2tlbnNTb2xkKTsKICAgICAgICBpZiAoYW1vdW50VG9CdXJuID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1t0aGlzXSA9IGJhbGFuY2VzW3RoaXNdLnN1Yih1aW50MjU2KGFtb3VudFRvQnVybikpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2VuZFRva2VucyhhZGRyZXNzIF9zZW5kZXIsIHVpbnQyNTYgYW1vdW50KSBwdWJsaWMgaW5BY3RpdmVQZXJpb2Qgb25seU93bmVyIHsKICAgICAgICAvLyBjYWxjdWxhdGUgdG9rZW4gYW1vdW50IHRvIGJlIGlzc3VlZAogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gYW1vdW50Lm11bChyYXRlKTsKICAgICAgICB0b2tlbnMgKz0gZ2V0Qm9udXModG9rZW5zKTsKCiAgICAgICAgaWYgKGlzUFJFSUNPKCkpIHsKICAgICAgICAgICAgcmVxdWlyZSh0b2tlbnNTb2xkICsgdG9rZW5zIDwgcHJlaWNvU3VwcGx5KTsKICAgICAgICB9IGVsc2UgaWYgKGlzSUNPKCkpIHsKICAgICAgICAgICAgcmVxdWlyZSh0b2tlbnNTb2xkICsgdG9rZW5zIDw9IChpY29TdXBwbHkgKyBib251c2VzU3VwcGx5KSk7CiAgICAgICAgfQoKICAgICAgICBpc3N1ZVRva2Vucyhfc2VuZGVyLCB0b2tlbnMpOwogICAgICAgIHRva2Vuc1NvbGQgKz0gdG9rZW5zOwogICAgfQoKICAgIC8vIFVzZSB3aXRoIGV4dHJlbWUgY2F1dGlvbiB0aGlzIHdpbGwgYnVybiB0aGUgcmVzdCBvZiB0aGUgdG9rZW5zIGluIHRoZSBjb250cmFjdAogICAgZnVuY3Rpb24gYnVybklDT1Rva2VucygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGJhbGFuY2VzW3RoaXNdID0gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJuQm9udXNlcygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGludDI1NiBhbW91bnRUb0J1cm4gPSBpbnQyNTYoYm9udXNlc1N1cHBseSkgLSBpbnQyNTYoYm9udXNlc1NvbGQpOwogICAgICAgIGlmIChhbW91bnRUb0J1cm4gPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW3RoaXNdID0gYmFsYW5jZXNbdGhpc10uc3ViKHVpbnQyNTYoYW1vdW50VG9CdXJuKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIGxvdyBsZXZlbCB0b2tlbiBwdXJjaGFzZSBmdW5jdGlvbgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgX3NlbmRlcikgcHVibGljIGluQWN0aXZlUGVyaW9kIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoX3NlbmRlciAhPSAweDApOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IG1pblRyYW5zYWN0aW9uQW1vdW50KTsKCiAgICAgICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CgogICAgICAgIHJhaXNlZEZvckV0aGVyID0gcmFpc2VkRm9yRXRoZXIuYWRkKHdlaUFtb3VudCk7CgogICAgICAgIC8vIGNhbGN1bGF0ZSB0b2tlbiBhbW91bnQgdG8gYmUgY3JlYXRlZAogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gd2VpQW1vdW50Lm11bChyYXRlKTsKICAgICAgICB0b2tlbnMgKz0gZ2V0Qm9udXModG9rZW5zKTsKCiAgICAgICAgaWYgKGlzUFJFSUNPKCkpIHsKICAgICAgICAgICAgcmVxdWlyZSh0b2tlbnNTb2xkICsgdG9rZW5zIDwgcHJlaWNvU3VwcGx5KTsKICAgICAgICB9IGVsc2UgaWYgKGlzSUNPKCkpIHsKICAgICAgICAgICAgcmVxdWlyZSh0b2tlbnNTb2xkICsgdG9rZW5zIDw9IChpY29TdXBwbHkgKyBib251c2VzU3VwcGx5KSk7CiAgICAgICAgfQoKICAgICAgICBpc3N1ZVRva2Vucyhfc2VuZGVyLCB0b2tlbnMpOwogICAgICAgIHRva2Vuc1NvbGQgKz0gdG9rZW5zOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RXRoZXIodWludDI1NiBhbW91bnQpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIudHJhbnNmZXIoYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc1BSRUlDTygpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gKHByZWljb1N0YXJ0RGF0ZSA8IG5vdyAmJiBub3cgPD0gcHJlaWNvRW5kRGF0ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNJQ08oKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIChpY29TdGFydERhdGUgPCBub3cgJiYgbm93IDw9IGljb0VuZERhdGUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRUb2tlbnNTb2xkKHVpbnQyNTYgYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB0b2tlbnNTb2xkID0gYW1vdW50OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJvbnVzKHVpbnQyNTYgX3Rva2VucykgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXF1aXJlKF90b2tlbnMgIT0gMCk7CiAgICAgICAgdWludDI1NiBib251c2VzID0gMDsKICAgICAgICB1aW50MjU2IG11bHRpcGxpZXIgPSAwOwoKICAgICAgICAvLyBGaXJzdCBjYXNlIGlmIFBSRS1JQ08gaXMgaGFwcGVuaW5nCiAgICAgICAgaWYgKGlzUFJFSUNPKCkpIHsKICAgICAgICAgICAgLy8gQm9udXMgZGVwZW5kcyBvbiB0aGUgYW1vdW50IG9mIHRva2VucyBzb2xkLgogICAgICAgICAgICBpZiAodG9rZW5zU29sZCA8IHN0YWdlMSkgewogICAgICAgICAgICAgICAgLy8gMTAwJSBib251cyBmb3Igc3RhZ2UxCiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyID0gMTAwOwogICAgICAgICAgICB9IGVsc2UgaWYgKHN0YWdlMSA8IHRva2Vuc1NvbGQgJiYgdG9rZW5zU29sZCA8IChzdGFnZTEgKyBzdGFnZTIpKSB7CiAgICAgICAgICAgICAgICAvLyA4MCUgYm9udXMgZm9yIHN0YWdlMgogICAgICAgICAgICAgICAgbXVsdGlwbGllciA9IDgwOwogICAgICAgICAgICB9IGVsc2UgaWYgKChzdGFnZTEgKyBzdGFnZTIpIDwgdG9rZW5zU29sZCAmJiB0b2tlbnNTb2xkIDwgKHN0YWdlMSArIHN0YWdlMiArIHN0YWdlMykpIHsKICAgICAgICAgICAgICAgIC8vIDYwJSBib251cyBmb3Igc3RhZ2UyCiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyID0gNjA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoKHN0YWdlMSArIHN0YWdlMiArIHN0YWdlMykgPCB0b2tlbnNTb2xkICYmIHRva2Vuc1NvbGQgPCAoc3RhZ2UxICsgc3RhZ2UyICsgc3RhZ2UzICsgc3RhZ2U0KSkgewogICAgICAgICAgICAgICAgLy8gNDAlIGJvbnVzIGZvciBzdGFnZTIKICAgICAgICAgICAgICAgIG11bHRpcGxpZXIgPSA0MDsKICAgICAgICAgICAgfQogICAgICAgICAgICBib251c2VzID0gX3Rva2Vucy5tdWwobXVsdGlwbGllcikuZGl2KDEwMCk7CgogICAgICAgICAgICByZXR1cm4gYm9udXNlczsKICAgICAgICB9CgogICAgICAgIAogICAgICAgIC8vIFNlY29uZCBjYXNlIGlmIElDTyBpcyBoYXBwZW5pbmcKICAgICAgICBlbHNlIGlmIChpc0lDTygpKSB7CiAgICAgICAgICAgIC8vIEJvbnVzIGRlcGVuZHMgb24gdGhlIHdlZWsgb2YgdGhlIElDTyBhbmQgdGhlIGJvbnVzIHN1cHBseQogICAgICAgICAgICBpZiAoaWNvU3RhcnREYXRlIDwgbm93ICYmIG5vdyA8PSBpY29TdGFydERhdGUgKyA3IGRheXMpIHsKICAgICAgICAgICAgICAgIC8vIDIwJSBib251cyB3ZWVrIDEKICAgICAgICAgICAgICAgIG11bHRpcGxpZXIgPSAyMDsKICAgICAgICAgICAgfSBlbHNlIGlmIChpY29TdGFydERhdGUgKyA3IGRheXMgPCBub3cgJiYgbm93IDw9IGljb1N0YXJ0RGF0ZSArIDE0IGRheXMgKSB7CiAgICAgICAgICAgICAgICAvLyAxMCUgYm9udXMgd2VlayAyCiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyID0gMTA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaWNvU3RhcnREYXRlICsgMTQgZGF5cyA8IG5vdyAmJiBub3cgPD0gaWNvU3RhcnREYXRlICsgMjEgZGF5cyApIHsKICAgICAgICAgICAgICAgIC8vIDUlIGJvbnVzIHdlZWsgMwogICAgICAgICAgICAgICAgbXVsdGlwbGllciA9IDU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJvbnVzZXMgPSBfdG9rZW5zLm11bChtdWx0aXBsaWVyKS5kaXYoMTAwKTsKCiAgICAgICAgICAgIC8vIEJvbnVzIHN1cHBseSBsaW1pdCByZWFjaGVkLgogICAgICAgICAgICBpZiAoYm9udXNlc1NvbGQgKyBib251c2VzID4gYm9udXNlc1N1cHBseSkgewogICAgICAgICAgICAgICAgYm9udXNlcyA9IDA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBib251c2VzU29sZCArPSBib251c2VzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBib251c2VzOwogICAgICAgIH0gCiAgICB9CgogICAgZnVuY3Rpb24gaXNzdWVUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbdGhpc10gPSBiYWxhbmNlc1t0aGlzXS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0='.
	

]
