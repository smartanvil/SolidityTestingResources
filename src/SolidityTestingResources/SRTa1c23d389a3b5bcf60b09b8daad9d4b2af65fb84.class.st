Class {
	#name : #SRTa1c23d389a3b5bcf60b09b8daad9d4b2af65fb84,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa1c23d389a3b5bcf60b09b8daad9d4b2af65fb84 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICAvKioKICAgICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgICAgKiBhY2NvdW50LgogICAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICB9CiAgICB9Cgp9CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgICB1aW50IHB1YmxpYyBfdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcHVibGljOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWM7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSkgcHVibGljOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgT3duYWJsZSwgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGJhbGFuY2VzOwoKICAgIC8vIGFkZGl0aW9uYWwgdmFyaWFibGVzIGZvciB1c2UgaWYgdHJhbnNhY3Rpb24gZmVlcyBldmVyIGJlY2FtZSBuZWNlc3NhcnkKICAgIHVpbnQgcHVibGljIGJhc2lzUG9pbnRzUmF0ZSA9IDA7CiAgICB1aW50IHB1YmxpYyBtYXhpbXVtRmVlID0gMDsKCiAgICAvKioKICAgICogQGRldiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjay4KICAgICovCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgICAgcmVxdWlyZSghKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgb25seVBheWxvYWRTaXplKDIgKiAzMikgewogICAgICAgIHVpbnQgZmVlID0gKF92YWx1ZS5tdWwoYmFzaXNQb2ludHNSYXRlKSkuZGl2KDEwMDAwKTsKICAgICAgICBpZiAoZmVlID4gbWF4aW11bUZlZSkgewogICAgICAgICAgICBmZWUgPSBtYXhpbXVtRmVlOwogICAgICAgIH0KICAgICAgICB1aW50IHNlbmRBbW91bnQgPSBfdmFsdWUuc3ViKGZlZSk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoc2VuZEFtb3VudCk7CiAgICAgICAgaWYgKGZlZSA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLmFkZChmZWUpOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBvd25lciwgZmVlKTsKICAgICAgICB9CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBzZW5kQW1vdW50KTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludCByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9Cgp9CgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgewoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgcHVibGljIGFsbG93ZWQ7CgogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTUFYX1VJTlQgPSAyKioyNTYgLSAxOwoKICAgIC8qKgogICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgICogQHBhcmFtIF92YWx1ZSB1aW50IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsKICAgICAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgICAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgICAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7CgogICAgICAgIHVpbnQgZmVlID0gKF92YWx1ZS5tdWwoYmFzaXNQb2ludHNSYXRlKSkuZGl2KDEwMDAwKTsKICAgICAgICBpZiAoZmVlID4gbWF4aW11bUZlZSkgewogICAgICAgICAgICBmZWUgPSBtYXhpbXVtRmVlOwogICAgICAgIH0KICAgICAgICBpZiAoX2FsbG93YW5jZSA8IE1BWF9VSU5UKSB7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgICAgICB9CiAgICAgICAgdWludCBzZW5kQW1vdW50ID0gX3ZhbHVlLnN1YihmZWUpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoc2VuZEFtb3VudCk7CiAgICAgICAgaWYgKGZlZSA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLmFkZChmZWUpOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgb3duZXIsIGZlZSk7CiAgICAgICAgfQogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIHNlbmRBbW91bnQpOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHB1YmxpYyBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CgogICAgICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAgICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICByZXF1aXJlKCEoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpKTsKCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhbiBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICogQHJldHVybiBBIHVpbnQgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIG5vdCBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCgpIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgd2hlblBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgfQp9Cgpjb250cmFjdCBCbGFja0xpc3QgaXMgT3duYWJsZSwgQmFzaWNUb2tlbiB7CgogICAgLy8vLy8vLyBHZXR0ZXJzIHRvIGFsbG93IHRoZSBzYW1lIGJsYWNrbGlzdCB0byBiZSB1c2VkIGFsc28gYnkgb3RoZXIgY29udHJhY3RzIChpbmNsdWRpbmcgdXBncmFkZWQgVGhhaSBCYWh0IERpZ2l0YWwpIC8vLy8vLy8KICAgIGZ1bmN0aW9uIGdldEJsYWNrTGlzdFN0YXR1cyhhZGRyZXNzIF9tYWtlcikgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBpc0JsYWNrTGlzdGVkW19tYWtlcl07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0T3duZXIoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIG93bmVyOwogICAgfQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGlzQmxhY2tMaXN0ZWQ7CiAgICAKICAgIGZ1bmN0aW9uIGFkZEJsYWNrTGlzdCAoYWRkcmVzcyBfZXZpbFVzZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGlzQmxhY2tMaXN0ZWRbX2V2aWxVc2VyXSA9IHRydWU7CiAgICAgICAgQWRkZWRCbGFja0xpc3QoX2V2aWxVc2VyKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVCbGFja0xpc3QgKGFkZHJlc3MgX2NsZWFyZWRVc2VyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpc0JsYWNrTGlzdGVkW19jbGVhcmVkVXNlcl0gPSBmYWxzZTsKICAgICAgICBSZW1vdmVkQmxhY2tMaXN0KF9jbGVhcmVkVXNlcik7CiAgICB9CgogICAgZnVuY3Rpb24gZGVzdHJveUJsYWNrRnVuZHMgKGFkZHJlc3MgX2JsYWNrTGlzdGVkVXNlcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShpc0JsYWNrTGlzdGVkW19ibGFja0xpc3RlZFVzZXJdKTsKICAgICAgICB1aW50IGRpcnR5RnVuZHMgPSBiYWxhbmNlT2YoX2JsYWNrTGlzdGVkVXNlcik7CiAgICAgICAgYmFsYW5jZXNbX2JsYWNrTGlzdGVkVXNlcl0gPSAwOwogICAgICAgIF90b3RhbFN1cHBseSAtPSBkaXJ0eUZ1bmRzOwogICAgICAgIERlc3Ryb3llZEJsYWNrRnVuZHMoX2JsYWNrTGlzdGVkVXNlciwgZGlydHlGdW5kcyk7CiAgICB9CgogICAgZXZlbnQgRGVzdHJveWVkQmxhY2tGdW5kcyhhZGRyZXNzIF9ibGFja0xpc3RlZFVzZXIsIHVpbnQgX2JhbGFuY2UpOwoKICAgIGV2ZW50IEFkZGVkQmxhY2tMaXN0KGFkZHJlc3MgX3VzZXIpOwoKICAgIGV2ZW50IFJlbW92ZWRCbGFja0xpc3QoYWRkcmVzcyBfdXNlcik7Cgp9Cgpjb250cmFjdCBVcGdyYWRlZFN0YW5kYXJkVG9rZW4gaXMgU3RhbmRhcmRUb2tlbnsKICAgIC8vIHRob3NlIG1ldGhvZHMgYXJlIGNhbGxlZCBieSB0aGUgbGVnYWN5IGNvbnRyYWN0CiAgICAvLyBhbmQgdGhleSBtdXN0IGVuc3VyZSBtc2cuc2VuZGVyIHRvIGJlIHRoZSBjb250cmFjdCBhZGRyZXNzCiAgICBmdW5jdGlvbiB0cmFuc2ZlckJ5TGVnYWN5KGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcHVibGljOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tQnlMZWdhY3koYWRkcmVzcyBzZW5kZXIsIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSBwdWJsaWM7CiAgICBmdW5jdGlvbiBhcHByb3ZlQnlMZWdhY3koYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpIHB1YmxpYzsKfQoKY29udHJhY3QgVGhhaUJhaHREaWdpdGFsIGlzIFBhdXNhYmxlLCBTdGFuZGFyZFRva2VuLCBCbGFja0xpc3QgewoKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludCBwdWJsaWMgZGVjaW1hbHM7CiAgICBhZGRyZXNzIHB1YmxpYyB1cGdyYWRlZEFkZHJlc3M7CiAgICBib29sIHB1YmxpYyBkZXByZWNhdGVkOwoKICAgIC8vICBUaGUgY29udHJhY3QgY2FuIGJlIGluaXRpYWxpemVkIHdpdGggYSBudW1iZXIgb2YgdG9rZW5zCiAgICAvLyAgQWxsIHRoZSB0b2tlbnMgYXJlIGRlcG9zaXRlZCB0byB0aGUgb3duZXIgYWRkcmVzcwogICAgLy8KICAgIC8vIEBwYXJhbSBfYmFsYW5jZSBJbml0aWFsIHN1cHBseSBvZiB0aGUgY29udHJhY3QKICAgIC8vIEBwYXJhbSBfbmFtZSBUb2tlbiBOYW1lCiAgICAvLyBAcGFyYW0gX3N5bWJvbCBUb2tlbiBzeW1ib2wKICAgIC8vIEBwYXJhbSBfZGVjaW1hbHMgVG9rZW4gZGVjaW1hbHMKICAgIGZ1bmN0aW9uIFRoYWlCYWh0RGlnaXRhbCh1aW50IF9pbml0aWFsU3VwcGx5LCBzdHJpbmcgX25hbWUsIHN0cmluZyBfc3ltYm9sLCB1aW50IF9kZWNpbWFscykgcHVibGljIHsKICAgICAgICBfdG90YWxTdXBwbHkgPSBfaW5pdGlhbFN1cHBseTsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBfaW5pdGlhbFN1cHBseTsKICAgICAgICBkZXByZWNhdGVkID0gZmFsc2U7CiAgICB9CgogICAgLy8gRm9yd2FyZCBFUkMyMCBtZXRob2RzIHRvIHVwZ3JhZGVkIGNvbnRyYWN0IGlmIHRoaXMgb25lIGlzIGRlcHJlY2F0ZWQKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIHJlcXVpcmUoIWlzQmxhY2tMaXN0ZWRbbXNnLnNlbmRlcl0pOwogICAgICAgIGlmIChkZXByZWNhdGVkKSB7CiAgICAgICAgICAgIHJldHVybiBVcGdyYWRlZFN0YW5kYXJkVG9rZW4odXBncmFkZWRBZGRyZXNzKS50cmFuc2ZlckJ5TGVnYWN5KG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBGb3J3YXJkIEVSQzIwIG1ldGhvZHMgdG8gdXBncmFkZWQgY29udHJhY3QgaWYgdGhpcyBvbmUgaXMgZGVwcmVjYXRlZAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIHJlcXVpcmUoIWlzQmxhY2tMaXN0ZWRbX2Zyb21dKTsKICAgICAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICAgICAgICByZXR1cm4gVXBncmFkZWRTdGFuZGFyZFRva2VuKHVwZ3JhZGVkQWRkcmVzcykudHJhbnNmZXJGcm9tQnlMZWdhY3kobXNnLnNlbmRlciwgX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIEZvcndhcmQgRVJDMjAgbWV0aG9kcyB0byB1cGdyYWRlZCBjb250cmFjdCBpZiB0aGlzIG9uZSBpcyBkZXByZWNhdGVkCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgICAgICAgcmV0dXJuIFVwZ3JhZGVkU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLmJhbGFuY2VPZih3aG8pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBzdXBlci5iYWxhbmNlT2Yod2hvKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gRm9yd2FyZCBFUkMyMCBtZXRob2RzIHRvIHVwZ3JhZGVkIGNvbnRyYWN0IGlmIHRoaXMgb25lIGlzIGRlcHJlY2F0ZWQKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHB1YmxpYyBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CiAgICAgICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgICAgICAgcmV0dXJuIFVwZ3JhZGVkU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLmFwcHJvdmVCeUxlZ2FjeShtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gc3VwZXIuYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gRm9yd2FyZCBFUkMyMCBtZXRob2RzIHRvIHVwZ3JhZGVkIGNvbnRyYWN0IGlmIHRoaXMgb25lIGlzIGRlcHJlY2F0ZWQKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgICAgICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgICAgICAgcmV0dXJuIFN0YW5kYXJkVG9rZW4odXBncmFkZWRBZGRyZXNzKS5hbGxvd2FuY2UoX293bmVyLCBfc3BlbmRlcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmFsbG93YW5jZShfb3duZXIsIF9zcGVuZGVyKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gZGVwcmVjYXRlIGN1cnJlbnQgY29udHJhY3QgaW4gZmF2b3VyIG9mIGEgbmV3IG9uZQogICAgZnVuY3Rpb24gZGVwcmVjYXRlKGFkZHJlc3MgX3VwZ3JhZGVkQWRkcmVzcykgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgZGVwcmVjYXRlZCA9IHRydWU7CiAgICAgICAgdXBncmFkZWRBZGRyZXNzID0gX3VwZ3JhZGVkQWRkcmVzczsKICAgICAgICBEZXByZWNhdGUoX3VwZ3JhZGVkQWRkcmVzcyk7CiAgICB9CgogICAgLy8gZGVwcmVjYXRlIGN1cnJlbnQgY29udHJhY3QgaWYgZmF2b3VyIG9mIGEgbmV3IG9uZQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIGlmIChkZXByZWNhdGVkKSB7CiAgICAgICAgICAgIHJldHVybiBTdGFuZGFyZFRva2VuKHVwZ3JhZGVkQWRkcmVzcykudG90YWxTdXBwbHkoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gX3RvdGFsU3VwcGx5OwogICAgICAgIH0KICAgIH0KCiAgICAvLyBJc3N1ZSBhIG5ldyBhbW91bnQgb2YgdG9rZW5zCiAgICAvLyB0aGVzZSB0b2tlbnMgYXJlIGRlcG9zaXRlZCBpbnRvIHRoZSBvd25lciBhZGRyZXNzCiAgICAvLwogICAgLy8gQHBhcmFtIF9hbW91bnQgTnVtYmVyIG9mIHRva2VucyB0byBiZSBpc3N1ZWQKICAgIGZ1bmN0aW9uIGlzc3VlKHVpbnQgYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF90b3RhbFN1cHBseSArIGFtb3VudCA+IF90b3RhbFN1cHBseSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tvd25lcl0gKyBhbW91bnQgPiBiYWxhbmNlc1tvd25lcl0pOwoKICAgICAgICBiYWxhbmNlc1tvd25lcl0gKz0gYW1vdW50OwogICAgICAgIF90b3RhbFN1cHBseSArPSBhbW91bnQ7CiAgICAgICAgSXNzdWUoYW1vdW50KTsKICAgIH0KCiAgICAvLyBSZWRlZW0gdG9rZW5zLgogICAgLy8gVGhlc2UgdG9rZW5zIGFyZSB3aXRoZHJhd24gZnJvbSB0aGUgb3duZXIgYWRkcmVzcwogICAgLy8gaWYgdGhlIGJhbGFuY2UgbXVzdCBiZSBlbm91Z2ggdG8gY292ZXIgdGhlIHJlZGVlbQogICAgLy8gb3IgdGhlIGNhbGwgd2lsbCBmYWlsLgogICAgLy8gQHBhcmFtIF9hbW91bnQgTnVtYmVyIG9mIHRva2VucyB0byBiZSBpc3N1ZWQKICAgIGZ1bmN0aW9uIHJlZGVlbSh1aW50IGFtb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfdG90YWxTdXBwbHkgPj0gYW1vdW50KTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW293bmVyXSA+PSBhbW91bnQpOwoKICAgICAgICBfdG90YWxTdXBwbHkgLT0gYW1vdW50OwogICAgICAgIGJhbGFuY2VzW293bmVyXSAtPSBhbW91bnQ7CiAgICAgICAgUmVkZWVtKGFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UGFyYW1zKHVpbnQgbmV3QmFzaXNQb2ludHMsIHVpbnQgbmV3TWF4RmVlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICAvLyBFbnN1cmUgdHJhbnNwYXJlbmN5IGJ5IGhhcmRjb2RpbmcgbGltaXQgYmV5b25kIHdoaWNoIGZlZXMgY2FuIG5ldmVyIGJlIGFkZGVkCiAgICAgICAgcmVxdWlyZShuZXdCYXNpc1BvaW50cyA8IDIwKTsKICAgICAgICByZXF1aXJlKG5ld01heEZlZSA8IDUwKTsKCiAgICAgICAgYmFzaXNQb2ludHNSYXRlID0gbmV3QmFzaXNQb2ludHM7CiAgICAgICAgbWF4aW11bUZlZSA9IG5ld01heEZlZS5tdWwoMTAqKmRlY2ltYWxzKTsKCiAgICAgICAgUGFyYW1zKGJhc2lzUG9pbnRzUmF0ZSwgbWF4aW11bUZlZSk7CiAgICB9CgogICAgLy8gQ2FsbGVkIHdoZW4gbmV3IHRva2VuIGFyZSBpc3N1ZWQKICAgIGV2ZW50IElzc3VlKHVpbnQgYW1vdW50KTsKCiAgICAvLyBDYWxsZWQgd2hlbiB0b2tlbnMgYXJlIHJlZGVlbWVkCiAgICBldmVudCBSZWRlZW0odWludCBhbW91bnQpOwoKICAgIC8vIENhbGxlZCB3aGVuIGNvbnRyYWN0IGlzIGRlcHJlY2F0ZWQKICAgIGV2ZW50IERlcHJlY2F0ZShhZGRyZXNzIG5ld0FkZHJlc3MpOwoKICAgIC8vIENhbGxlZCBpZiBjb250cmFjdCBldmVyIGFkZHMgZmVlcwogICAgZXZlbnQgUGFyYW1zKHVpbnQgZmVlQmFzaXNQb2ludHMsIHVpbnQgbWF4RmVlKTsKfQ=='.
	

]
