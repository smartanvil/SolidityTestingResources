Class {
	#name : #SRT514d57816567db578e0522c8ef8da5ab5c9e394c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT514d57816567db578e0522c8ef8da5ab5c9e394c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBPd25lZCBjb250cmFjdAovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnRyYWN0IE93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KICAgIGZ1bmN0aW9uIE93bmVkKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXJ7CiAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgICB9Cn0KCgovLyBTYWZlIG1hdGhzLCBib3Jyb3dlZCBmcm9tIE9wZW5aZXBwZWxpbgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmxpYnJhcnkgU2FmZU1hdGggewoKICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKfQoKY29udHJhY3QgdG9rZW5SZWNpcGllbnQgewogIGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9leHRyYURhdGEpIHB1YmxpYzsKfQoKY29udHJhY3QgRVJDMjBUb2tlbiB7CiAgICAvKiBUaGlzIGlzIGEgc2xpZ2h0IGNoYW5nZSB0byB0aGUgRVJDMjAgYmFzZSBzdGFuZGFyZC4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgaXMgcmVwbGFjZWQgd2l0aDoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgVGhpcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgYSBnZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSB0b3RhbFN1cHBseS4KICAgIFRoaXMgaXMgbW92ZWQgdG8gdGhlIGJhc2UgY29udHJhY3Qgc2luY2UgcHVibGljIGdldHRlciBmdW5jdGlvbnMgYXJlIG5vdAogICAgY3VycmVudGx5IHJlY29nbmlzZWQgYXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIG1hdGNoaW5nIGFic3RyYWN0CiAgICBmdW5jdGlvbiBieSB0aGUgY29tcGlsZXIuCiAgICAqLwogICAgLy8vIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBsaW1pdGVkRmFjdG9yIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogICAgCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB0b3BUb3RhbFN1cHBseSA9IDE4KjEwKio4KjEwKioxODsKICAgIHVpbnQyNTYgcHVibGljIHRlYW1TdXBwbHkgPSBwZXJjZW50KDE1KTsKICAgIHVpbnQyNTYgcHVibGljIHRlYW1BbGxvYWN0aW5nID0gMDsKICAgIHVpbnQyNTYgaW50ZXJuYWwgdGVhbVJlbGVhc2V0b2tlbkVhY2hNb250aCA9IDUgKiB0ZWFtU3VwcGx5IC8gMTAwOwogICAgdWludDI1NiBwdWJsaWMgY3JlYXRpb25JbnZlc3RtZW50U3VwcGx5ID0gcGVyY2VudCgxNSk7CiAgICB1aW50MjU2IHB1YmxpYyBjcmVhdGlvbkludmVzdG1lbnRpbmcgPSAwOwogICAgdWludDI1NiBwdWJsaWMgSUNPdG90YWxTdXBwbHkgPSBwZXJjZW50KDMwKTsKICAgIHVpbnQyNTYgcHVibGljIElDT1N1cHBseSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyBjb21tdW5pdHlTdXBwbHkgPSBwZXJjZW50KDIwKTsKICAgIHVpbnQyNTYgcHVibGljIGNvbW11bml0eUFsbG9jYXRpbmcgPSAwOwogICAgdWludDI1NiBwdWJsaWMgYW5nZWxXaGVlbEZpbmFuY2VTdXBwbHkgPSBwZXJjZW50KDIwKTsKICAgIHVpbnQyNTYgcHVibGljIGFuZ2VsV2hlZWxGaW5hbmNpbmcgPSAwOwogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0QWRkcmVzczsKICAgIHVpbnQyNTYgcHVibGljIHRlYW1BZGRyZXNzRnJlZXplVGltZSA9IHN0YXJ0VGltZVJvdW5kT25lOwogICAgYWRkcmVzcyBwdWJsaWMgdGVhbUFkZHJlc3M7CiAgICB1aW50MjU2IGludGVybmFsIHRlYW1BZGRyZXNzVHJhbnNmZXIgPSAwOwogICAgdWludDI1NiBwdWJsaWMgZXhjaGFuZ2VSYXRlUm91bmRPbmUgPSAxNjAwMDsKICAgIHVpbnQyNTYgcHVibGljIGV4Y2hhbmdlUmF0ZVJvdW5kVHdvID0gMTAwMDA7CiAgICB1aW50MjU2IGludGVybmFsIHN0YXJ0VGltZVJvdW5kT25lID0gMTUyNjMxMzYwMDsKICAgIHVpbnQyNTYgaW50ZXJuYWwgc3RvcFRpbWVSb3VuZE9uZSA9ICAxNTI4OTkxOTk5OwogICAgCiAgICBtb2RpZmllciB0ZWFtQWNjb3VudE5lZWRGcmVlemUxOE1vbnRocyhhZGRyZXNzIF9hZGRyZXNzKSB7CiAgICAgICAgaWYoX2FkZHJlc3MgPT0gdGVhbUFkZHJlc3MpIHsKICAgICAgICAgICAgcmVxdWlyZShub3cgPj0gdGVhbUFkZHJlc3NGcmVlemVUaW1lICsgMS41IHllYXJzKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgcmVsZWFzZVRva2VuIChhZGRyZXNzIF91c2VyLCB1aW50MjU2IF90aW1lLCB1aW50MjU2IF92YWx1ZSkgewogICAgICAgIGlmIChfdXNlciA9PSB0ZWFtQWRkcmVzcyl7CiAgICAgICAgICAgIHJlcXVpcmUgKHRlYW1BZGRyZXNzVHJhbnNmZXIgKyBfdmFsdWUgPD0gY2FsY1JlbGVhc2VUb2tlbihfdGltZSkpOyAKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2FsY1JlbGVhc2VUb2tlbiAodWludDI1NiBfdGltZSkgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBfdGltZURpZmZlcmVuY2UgPSBfdGltZSAtICh0ZWFtQWRkcmVzc0ZyZWV6ZVRpbWUgKyAxLjUgeWVhcnMpOwogICAgICAgIHJldHVybiBfdGltZURpZmZlcmVuY2UgLyAoMzYwMCAqIDI0ICogMzApICogdGVhbVJlbGVhc2V0b2tlbkVhY2hNb250aDsKICAgIH0gCiAgICAKICAgICAvLy8gQGRldiBjYWxjdXRlIHRoZSB0b2tlbnMKICAgIGZ1bmN0aW9uIHBlcmNlbnQodWludDI1NiBwZXJjZW50YWdlKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gcGVyY2VudGFnZS5tdWwodG9wVG90YWxTdXBwbHkpLmRpdigxMDApOwogICAgfQoKfQoKY29udHJhY3Qgc3RhbmRhcmRUb2tlbiBpcyBFUkMyMFRva2VuLCBsaW1pdGVkRmFjdG9yIHsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93YW5jZXM7CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIC8qIFRyYW5zZmVycyB0b2tlbnMgZnJvbSB5b3VyIGFkZHJlc3MgdG8gb3RoZXIgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgCiAgICAgICAgcHVibGljIAogICAgICAgIHRlYW1BY2NvdW50TmVlZEZyZWV6ZTE4TW9udGhzKG1zZy5zZW5kZXIpIAogICAgICAgIHJlbGVhc2VUb2tlbihtc2cuc2VuZGVyLCBub3csIF92YWx1ZSkKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIAogICAgewogICAgICAgIHJlcXVpcmUgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSk7ICAgICAgICAgICAvLyBUaHJvdyBpZiBzZW5kZXIgaGFzIGluc3VmZmljaWVudCBiYWxhbmNlCiAgICAgICAgcmVxdWlyZSAoYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+PSBiYWxhbmNlc1tfdG9dKTsgIC8vIFRocm93IGlmIG93ZXJmbG93IGRldGVjdGVkCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgIC8vIERlZHVjdCBzZW5kZXJzIGJhbGFuY2UKICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHJlY2l2ZXJzIGJsYWFuY2UKICAgICAgICBpZiAobXNnLnNlbmRlciA9PSB0ZWFtQWRkcmVzcykgewogICAgICAgICAgICB0ZWFtQWRkcmVzc1RyYW5zZmVyICs9IF92YWx1ZTsKICAgICAgICB9CiAgICAgICAgZW1pdCBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgVHJhbnNmZXIgZXZlbnQKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKiBBcHByb3ZlIG90aGVyIGFkZHJlc3MgdG8gc3BlbmQgdG9rZW5zIG9uIHlvdXIgYWNjb3VudCAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKICAgICAgICBhbGxvd2FuY2VzW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsgICAgICAgICAgLy8gU2V0IGFsbG93YW5jZQogICAgICAgIGVtaXQgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7ICAgICAgICAgICAgIC8vIFJhaXNlIEFwcHJvdmFsIGV2ZW50CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyogQXBwcm92ZSBhbmQgdGhlbiBjb21tdW5pY2F0ZSB0aGUgYXBwcm92ZWQgY29udHJhY3QgaW4gYSBzaW5nbGUgdHggKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsgICAgICAgICAgICAgIC8vIENhc3Qgc3BlbmRlciB0byB0b2tlblJlY2lwaWVudCBjb250cmFjdAogICAgICAgIGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgYXBwcm92YWwgdG8gY29udHJhY3QgZm9yIF92YWx1ZQogICAgICAgIHNwZW5kZXIucmVjZWl2ZUFwcHJvdmFsKG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSk7ICAvLyBSYWlzZSBtZXRob2Qgb24gX3NwZW5kZXIgY29udHJhY3QKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKiBBIGNvbnRyYWN0IGF0dGVtcHRzIHRvIGdldCB0aGUgY29pbnMgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKTsgICAgICAgICAgICAgICAgLy8gVGhyb3cgaWYgc2VuZGVyIGRvZXMgbm90IGhhdmUgZW5vdWdoIGJhbGFuY2UKICAgICAgICByZXF1aXJlIChiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID49IGJhbGFuY2VzW190b10pOyAgLy8gVGhyb3cgaWYgb3ZlcmZsb3cgZGV0ZWN0ZWQKICAgICAgICByZXF1aXJlIChfdmFsdWUgPD0gYWxsb3dhbmNlc1tfZnJvbV1bbXNnLnNlbmRlcl0pOyAgLy8gVGhyb3cgaWYgeW91IGRvIG5vdCBoYXZlIGFsbG93YW5jZQogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWR1Y3Qgc2VuZGVycyBiYWxhbmNlCiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCByZWNpcGllbnQgYmxhYW5jZQogICAgICAgIGFsbG93YW5jZXNbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsgICAgICAgICAgICAvLyBEZWR1Y3QgYWxsb3dhbmNlIGZvciB0aGlzIGFkZHJlc3MKICAgICAgICBlbWl0IFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBSYWlzZSBUcmFuc2ZlciBldmVudAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qIEdldCB0aGUgYW1vdW50IG9mIGFsbG93ZWQgdG9rZW5zIHRvIHNwZW5kICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2FuY2VzW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKfQoKY29udHJhY3QgTU1DaGFpblRva2VuIGlzIHN0YW5kYXJkVG9rZW4sT3duZWQgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogICAgc3RyaW5nIGNvbnN0YW50IHB1YmxpYyBuYW1lPSJNT05FWSBNT05TVEVSIjsKICAgIHN0cmluZyBjb25zdGFudCBwdWJsaWMgc3ltYm9sPSJNTSI7CiAgICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBkZWNpbWFscz02OwogICAgCiAgICBib29sIHB1YmxpYyBJQ09TdGFydDsKICAgIAogICAgLy8vIEBkZXYgRmFsbGJhY2sgdG8gY2FsbGluZyBkZXBvc2l0IHdoZW4gZXRoZXIgaXMgc2VudCBkaXJlY3RseSB0byBjb250cmFjdC4KICAgIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUgKElDT1N0YXJ0KTsKICAgICAgICBkZXBvc2l0VG9rZW4obXNnLnZhbHVlKTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgaW5pdGlhbCBmdW5jdGlvbgogICAgZnVuY3Rpb24gTU1DaGFpblRva2VuKCkgcHVibGljIHsKICAgICAgICBvd25lcj1tc2cuc2VuZGVyOwogICAgICAgIElDT1N0YXJ0ID0gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgQnV5cyB0b2tlbnMgd2l0aCBFdGhlci4KICAgIGZ1bmN0aW9uIGRlcG9zaXRUb2tlbih1aW50MjU2IF92YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQyNTYgdG9rZW5BbGxvYyA9IGJ1eVByaWNlQXQoZ2V0VGltZSgpKSAqIF92YWx1ZTsKICAgICAgICByZXF1aXJlKHRva2VuQWxsb2MgIT0gMCk7CiAgICAgICAgSUNPU3VwcGx5ID0gSUNPU3VwcGx5LmFkZCh0b2tlbkFsbG9jKTsKICAgICAgICByZXF1aXJlIChJQ09TdXBwbHkgPD0gSUNPdG90YWxTdXBwbHkpOwogICAgICAgIG1pbnRUb2tlbnMobXNnLnNlbmRlciwgdG9rZW5BbGxvYyk7CiAgICAgICAgZm9yd2FyZEZ1bmRzKCk7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IGludGVybmFsIGZ1bmN0aW9uCiAgICBmdW5jdGlvbiBmb3J3YXJkRnVuZHMoKSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKHdhbGxldEFkZHJlc3MgIT0gYWRkcmVzcygwKSl7CiAgICAgICAgICAgIHdhbGxldEFkZHJlc3MudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IElzc3VlIG5ldyB0b2tlbnMKICAgIGZ1bmN0aW9uIG1pbnRUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUgKGJhbGFuY2VzW190b10gKyBfYW1vdW50ID49IGJhbGFuY2VzW190b10pOyAgICAgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsgICAgICAgICAgICAgLy8gU2V0IG1pbnRlZCBjb2lucyB0byB0YXJnZXQKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgICAgICByZXF1aXJlKHRvdGFsU3VwcGx5IDw9IHRvcFRvdGFsU3VwcGx5KTsKICAgICAgICBlbWl0IFRyYW5zZmVyKDB4MCwgX3RvLCBfYW1vdW50KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIFRyYW5zZmVyIGV2ZW50IGZyb20gMHgKICAgIH0KICAgIAogICAgLy8vIEBkZXYgQ2FsY3VsYXRlIGV4Y2hhbmdlCiAgICBmdW5jdGlvbiBidXlQcmljZUF0KHVpbnQyNTYgX3RpbWUpIGludGVybmFsIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICAgIGlmIChfdGltZSA+PSBzdGFydFRpbWVSb3VuZE9uZSAmJiBfdGltZSA8PSBzdG9wVGltZVJvdW5kT25lKSB7CiAgICAgICAgICAgIHJldHVybiBleGNoYW5nZVJhdGVSb3VuZE9uZTsKICAgICAgICB9ICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvLy8gQGRldiBHZXQgdGltZQogICAgZnVuY3Rpb24gZ2V0VGltZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICAgIHJldHVybiBub3c7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IHNldCBpbml0aWFsIG1lc3NhZ2UKICAgIGZ1bmN0aW9uIHNldEluaXRpYWxWYXJpYmxlcyhhZGRyZXNzIF93YWxsZXRBZGRyZXNzLCBhZGRyZXNzIF90ZWFtQWRkcmVzcykgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgd2FsbGV0QWRkcmVzcyA9IF93YWxsZXRBZGRyZXNzOwogICAgICAgIHRlYW1BZGRyZXNzID0gX3RlYW1BZGRyZXNzOwogICAgfQogICAgCiAgICAvLy8gQGRldiB3aXRoRHJhdyBFdGhlciB0byBhIFNhZmUgV2FsbGV0CiAgICBmdW5jdGlvbiB3aXRoRHJhdyhhZGRyZXNzIF9ldGhlckFkZHJlc3MpIHB1YmxpYyBwYXlhYmxlIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZSAoX2V0aGVyQWRkcmVzcyAhPSBhZGRyZXNzKDApKTsKICAgICAgICBhZGRyZXNzIGNvbnRyYWN0QWRkcmVzcyA9IHRoaXM7CiAgICAgICAgX2V0aGVyQWRkcmVzcy50cmFuc2Zlcihjb250cmFjdEFkZHJlc3MuYmFsYW5jZSk7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IGFsbG9jYXRlIFRva2VuCiAgICBmdW5jdGlvbiBhbGxvY2F0ZVRva2VucyhhZGRyZXNzW10gX293bmVycywgdWludDI1NltdIF92YWx1ZXMpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUgKF9vd25lcnMubGVuZ3RoID09IF92YWx1ZXMubGVuZ3RoKTsKICAgICAgICBmb3IodWludDI1NiBpID0gMDsgaSA8IF9vd25lcnMubGVuZ3RoIDsgaSsrKXsKICAgICAgICAgICAgYWRkcmVzcyBvd25lciA9IF9vd25lcnNbaV07CiAgICAgICAgICAgIHVpbnQyNTYgdmFsdWUgPSBfdmFsdWVzW2ldOwogICAgICAgICAgICBtaW50VG9rZW5zKG93bmVyLCB2YWx1ZSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvLy8gQGRldiBhbGxvY2F0ZSB0b2tlbiBmb3IgVGVhbSBBZGRyZXNzCiAgICBmdW5jdGlvbiBhbGxvY2F0ZVRlYW1Ub2tlbigpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbdGVhbUFkZHJlc3NdID09IDApOwogICAgICAgIG1pbnRUb2tlbnModGVhbUFkZHJlc3MsIHRlYW1TdXBwbHkpOwogICAgICAgIHRlYW1BZGRyZXNzRnJlZXplVGltZSA9IG5vdzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWxsb2NhdGVDb21tdW5pdHlUb2tlbiAoYWRkcmVzc1tdIF9jb21tbml0eUFkZHJlc3MsIHVpbnQyNTZbXSBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBjb21tdW5pdHlBbGxvY2F0aW5nID0gbWludE11bHRpVG9rZW4oX2NvbW1uaXR5QWRkcmVzcywgX2Ftb3VudCwgY29tbXVuaXR5QWxsb2NhdGluZyk7CiAgICAgICAgcmVxdWlyZSAoY29tbXVuaXR5QWxsb2NhdGluZyA8PSBjb21tdW5pdHlTdXBwbHkpOwogICAgfQogICAgLy8vIEBkZXYgYWxsb2NhdGUgdG9rZW4gZm9yIFByaXZhdGUgQWRkcmVzcwogICAgZnVuY3Rpb24gYWxsb2NhdGVDcmVhdGlvbkludmVzdG1lbnRpbmdUb2tlbihhZGRyZXNzW10gX2NyZWF0aW9uSW52ZXN0bWVudGluZ2luZ0FkZHJlc3MsIHVpbnQyNTZbXSBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBjcmVhdGlvbkludmVzdG1lbnRpbmcgPSBtaW50TXVsdGlUb2tlbihfY3JlYXRpb25JbnZlc3RtZW50aW5naW5nQWRkcmVzcywgX2Ftb3VudCwgY3JlYXRpb25JbnZlc3RtZW50aW5nKTsKICAgICAgICByZXF1aXJlIChjcmVhdGlvbkludmVzdG1lbnRpbmcgPD0gY3JlYXRpb25JbnZlc3RtZW50U3VwcGx5KTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgYWxsb2NhdGUgdG9rZW4gZm9yIGNvbnRyaWJ1dG9ycyBBZGRyZXNzCiAgICBmdW5jdGlvbiBhbGxvY2F0ZUFuZ2VsV2hlZWxGaW5hbmNlVG9rZW4oYWRkcmVzc1tdIF9hbmdlbFdoZWVsRmluYW5jaW5nQWRkcmVzcywgdWludDI1NltdIF9hbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIC8vcmVxdWlyZShiYWxhbmNlc1tjb250cmlidXRvcnNBZGRyZXNzXSA9PSAwKTsKICAgICAgICBhbmdlbFdoZWVsRmluYW5jaW5nID0gbWludE11bHRpVG9rZW4oX2FuZ2VsV2hlZWxGaW5hbmNpbmdBZGRyZXNzLCBfYW1vdW50LCBhbmdlbFdoZWVsRmluYW5jaW5nKTsKICAgICAgICByZXF1aXJlIChhbmdlbFdoZWVsRmluYW5jaW5nIDw9IGFuZ2VsV2hlZWxGaW5hbmNlU3VwcGx5KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gbWludE11bHRpVG9rZW4gKGFkZHJlc3NbXSBfbXVsdGlBZGRyLCB1aW50MjU2W10gX211bHRpQW1vdW50LCB1aW50MjU2IF90YXJnZXQpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpewogICAgICAgIHJlcXVpcmUgKF9tdWx0aUFkZHIubGVuZ3RoID09IF9tdWx0aUFtb3VudC5sZW5ndGgpOwogICAgICAgIGZvcih1aW50MjU2IGkgPSAwOyBpIDwgX211bHRpQWRkci5sZW5ndGggOyBpKyspewogICAgICAgICAgICBhZGRyZXNzIG93bmVyID0gX211bHRpQWRkcltpXTsKICAgICAgICAgICAgdWludDI1NiB2YWx1ZSA9IF9tdWx0aUFtb3VudFtpXTsKICAgICAgICAgICAgX3RhcmdldCA9IF90YXJnZXQuYWRkKHZhbHVlKTsKICAgICAgICAgICAgbWludFRva2Vucyhvd25lciwgdmFsdWUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3RhcmdldDsKICAgIH0KfQ=='.
	

]
