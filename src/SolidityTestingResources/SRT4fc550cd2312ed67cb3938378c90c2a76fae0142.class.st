Class {
	#name : #SRT4fc550cd2312ed67cb3938378c90c2a76fae0142,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4fc550cd2312ed67cb3938378c90c2a76fae0142 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTA7CgovLyBUaGUgVGltZXJldW0gUHJvamVjdAoKLy8gVGltZXJldW1EZWx0YQovLyBFUkMtMjAgdG9rZW4gc25hcHNob3Qgb2YgVE1FICgiVE1FRCIpLiBUTUVYIHdpbGwgYmUgYSBsYXllciBvbiB0b3Agb2YgdGhpcyBjb250cmFjdC4KLy8gV2lsbCBwcm92aWRlIGJhc2UgZm9yIFRNRVgKLy8gSWYgeW91IGFyZSBhbiBhZGRyZXNzIHBhaXIgb3duZXIsIHVzZSB0aGlzIGNvbnRyYWN0IHRvIHByb2R1Y2UgYmF0Y2hlcy4KLy8gVGhlbiBjb252ZXJ0IHRvIHRpbWVyZXVtWAoKY29udHJhY3QgdGltZXJldW1EZWx0YSB7CiAgICAKc3RyaW5nIHB1YmxpYyBuYW1lOyAKc3RyaW5nIHB1YmxpYyBzeW1ib2w7IAp1aW50OCBwdWJsaWMgZGVjaW1hbHM7IAp1aW50MjU2IHB1YmxpYyBzdGFydFRpbWU7CnVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKYm9vbCBwdWJsaWMgYmFsYW5jZUltcG9ydHNDb21wbGV0ZTsKCm1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIG51bVJld2FyZHNBdmFpbGFibGVTZXRGb3JDaGlsZEFkZHJlc3M7CgptYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBpc05ld1BhcmVudDsKbWFwcGluZyAoYWRkcmVzcyA9PiBhZGRyZXNzKSBwdWJsaWMgcmV0dXJuQ2hpbGRGb3JQYXJlbnROZXc7Cgpib29sIHB1YmxpYyBnZW5lc2lzSW1wb3J0c0NvbXBsZXRlOwoKLy8gVW50aWwgY29udHJhY3QgaXMgbG9ja2VkLCBkZXZzIGNhbiBmcmVlemUgdGhlIHN5c3RlbSBpZiBhbnl0aGluZyBhcmlzZXMuCi8vIFRoZW4gZGVwbG95IGEgY29udHJhY3QgdGhhdCBpbnRlcmZhY2VzIHdpdGggdGhlIHN0YXRlIG9mIHRoaXMgb25lLgpib29sIHB1YmxpYyBmcm96ZW47CmJvb2wgcHVibGljIGZyZWV6ZVByb2hpYml0ZWQ7CgphZGRyZXNzIHB1YmxpYyBkZXZBZGRyZXNzOyAvLyBGb3IgZG9pbmcgaW1wb3J0cwoKYm9vbCBpbXBvcnRzQ29tcGxldGU7IC8vIExvY2tlZCB3aGVuIGRldnMgaGF2ZSB1cGRhdGVkIGFsbCBiYWxhbmNlcwoKbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYnVybkFtb3VudEFsbG93ZWQ7CgptYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCi8vIEJhbGFuY2VzIGZvciBlYWNoIGFjY291bnQKbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgbnVtUmV3YXJkc0F2YWlsYWJsZTsKCi8vIFRNRVggYWRkcmVzcyBpbmZvCmJvb2wgcHVibGljIFRNRVhBZGRyZXNzU2V0OwphZGRyZXNzIHB1YmxpYyBUTUVYQWRkcmVzczsKCmJvb2wgZGV2VGVzdEJhbGFuY2VBZGRlZDsKCmV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwovLyBUcmlnZ2VyZWQgd2hlbmV2ZXIgYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgaXMgY2FsbGVkLgpldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKCmZ1bmN0aW9uIHRpbWVyZXVtRGVsdGEoKSB7Cm5hbWUgPSAidG1lZCI7CnN5bWJvbCA9ICJUTUVEIjsKZGVjaW1hbHMgPSAxODsKc3RhcnRUaW1lPTE1MDAzMDczNTQ7IC8vVGltZSBjb250cmFjdCB3ZW50IG9ubGluZS4KZGV2QWRkcmVzcz0weDg1MTk2RGE5MjY5QjI0YkRmNUZmRDI2MjRBQkIzODdmY0EwNTM4MkI7IC8vIFNldCB0aGUgZGV2IGltcG9ydCBhZGRyZXNzCmlmICghZGV2VGVzdEJhbGFuY2VBZGRlZCkgIHsKICAgIGRldlRlc3RCYWxhbmNlQWRkZWQ9dHJ1ZTsKICAgIC8vIERldiB3aWxsIGNyZWF0ZSAxMCBiYXRjaGVzIGFzIHRlc3QgdXNpbmcgMSBUTUVEIGluIGRldiBhZGRyZXNzICh3aGljaCBpcyBhIGNoaWxkKQogICAgLy8gQWxzbyB3aWxsIHNlbmQgdGlueSBhbW91bnRzIHRvIHNldmVyYWwgcmFuZG9tIGFkZHJlc3NlcyB0byBtYWtlIHN1cmUgcGFyZW50LWNoaWxkIGF1dGggd29ya3MuCiAgICAvLyBUaGVuIHNldCBudW1SZXdhcmRzQXZhaWxhYmxlIHRvIDAKICAgIGJhbGFuY2VzW2RldkFkZHJlc3NdKz0xMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgdG90YWxTdXBwbHkrPTEwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICBudW1SZXdhcmRzQXZhaWxhYmxlW2RldkFkZHJlc3NdPTEwOwp9Cn0KCi8vIFJldHVybnMgYmFsYW5jZSBvZiBwYXJ0aWN1bGFyIGFjY291bnQKZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwp9CgpmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHsgCmlmICghZnJvemVuKXsKICAgIAogICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSByZXZlcnQoKTsKICAgIGlmIChiYWxhbmNlc1tfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZXNbX3RvXSkgcmV2ZXJ0KCk7CgogICAgaWYgKHJldHVybklzUGFyZW50QWRkcmVzcyhfdG8pIHx8IGlzTmV3UGFyZW50W190b10pICAgICB7CiAgICAgICAgaWYgKChtc2cuc2VuZGVyPT1yZXR1cm5DaGlsZEFkZHJlc3NGb3JQYXJlbnQoX3RvKSkgfHwgKHJldHVybkNoaWxkRm9yUGFyZW50TmV3W190b109PW1zZy5zZW5kZXIpKSAgewogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKG51bVJld2FyZHNBdmFpbGFibGVTZXRGb3JDaGlsZEFkZHJlc3NbbXNnLnNlbmRlcl09PWZhbHNlKSAgewogICAgICAgICAgICAgICAgc2V0TnVtUmV3YXJkc0F2YWlsYWJsZUZvckFkZHJlc3MobXNnLnNlbmRlcik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChudW1SZXdhcmRzQXZhaWxhYmxlW21zZy5zZW5kZXJdPjApICAgIHsKICAgICAgICAgICAgICAgIHVpbnQyNTYgY3VyckRhdGU9YmxvY2sudGltZXN0YW1wOwogICAgICAgICAgICAgICAgdWludDI1NiByZXR1cm5NYXhQZXJCYXRjaEdlbmVyYXRlZD01MDAwMDAwMDAwMDAwMDAwMDAwMDAwOyAvL21heCA1MDAwIGNvaW5zIHBlciBiYXRjaAogICAgICAgICAgICAgICAgdWludDI1NiBkZXBsb3lUaW1lPTEwKjM2NSo4NjQwMDsgLy8xMCB5ZWFycwogICAgICAgICAgICAgICAgdWludDI1NiBzZWNvbmRzU2luY2VTdGFydFRpbWU9Y3VyckRhdGUtc3RhcnRUaW1lOwogICAgICAgICAgICAgICAgdWludDI1NiBtYXhpbWl6YXRpb25UaW1lPWRlcGxveVRpbWUrc3RhcnRUaW1lOwogICAgICAgICAgICAgICAgdWludDI1NiBjb2luc1BlckJhdGNoR2VuZXJhdGVkOwogICAgICAgICAgICAgICAgaWYgKGN1cnJEYXRlPj1tYXhpbWl6YXRpb25UaW1lKSAgewogICAgICAgICAgICAgICAgICAgIGNvaW5zUGVyQmF0Y2hHZW5lcmF0ZWQ9cmV0dXJuTWF4UGVyQmF0Y2hHZW5lcmF0ZWQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgIHsKICAgICAgICAgICAgICAgICAgICB1aW50MjU2IGI9KHJldHVybk1heFBlckJhdGNoR2VuZXJhdGVkLzQpOwogICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgbT0ocmV0dXJuTWF4UGVyQmF0Y2hHZW5lcmF0ZWQtYikvZGVwbG95VGltZTsKICAgICAgICAgICAgICAgICAgICBjb2luc1BlckJhdGNoR2VuZXJhdGVkPXNlY29uZHNTaW5jZVN0YXJ0VGltZSptK2I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBudW1SZXdhcmRzQXZhaWxhYmxlW21zZy5zZW5kZXJdLT0xOwogICAgICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0rPWNvaW5zUGVyQmF0Y2hHZW5lcmF0ZWQ7CiAgICAgICAgICAgICAgICB0b3RhbFN1cHBseSs9Y29pbnNQZXJCYXRjaEdlbmVyYXRlZDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgaWYgKF90bz09VE1FWEFkZHJlc3MpICAgewogICAgICAgIC8vVGhleSB3YW50IHRvIGNvbnZlcnQgdG8gVE1FWAogICAgICAgIGNvbnZlcnRUb1RNRVgoX3ZhbHVlLG1zZy5zZW5kZXIpOwogICAgfQogICAgCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKfQp9CgpmdW5jdGlvbiB0cmFuc2ZlckZyb20oCiAgICAgICAgYWRkcmVzcyBfZnJvbSwKICAgICAgICBhZGRyZXNzIF90bywKICAgICAgICB1aW50MjU2IF9hbW91bnQKKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGlmICghZnJvemVuKXsKICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX2Ftb3VudAogICAgICAgICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF9hbW91bnQKICAgICAgICAmJiBfYW1vdW50ID4gMAogICAgICAgICYmIGJhbGFuY2VzW190b10gKyBfYW1vdW50ID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfYW1vdW50OwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7CgogICAgaWYgKF90bz09VE1FWEFkZHJlc3MpICAgewogICAgICAgIC8vVGhleSB3YW50IHRvIGNvbnZlcnQgdG8gVE1FWAogICAgICAgIGNvbnZlcnRUb1RNRVgoX2Ftb3VudCxtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfYW1vdW50OwogICAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB9Cn0KICAKLy8gQWxsb3cgX3NwZW5kZXIgdG8gd2l0aGRyYXcgZnJvbSB5b3VyIGFjY291bnQsIG11bHRpcGxlIHRpbWVzLCB1cCB0byB0aGUgX3ZhbHVlIGFtb3VudC4KLy8gSWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYWdhaW4gaXQgb3ZlcndyaXRlcyB0aGUgY3VycmVudCBhbGxvd2FuY2Ugd2l0aCBfdmFsdWUuCmZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX2Ftb3VudDsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwp9CgovLyBBbGxvd3MgZGV2cyB0byBzZXQgbnVtIHJld2FyZHMgdXNlZC4gTG9ja2VkIHVwIHdoZW4gc3lzdGVtIG9ubGluZS4KZnVuY3Rpb24gc2V0TnVtUmV3YXJkc0F2YWlsYWJsZUZvckFkZHJlc3Nlcyh1aW50MjU2W10gbnVtUmV3YXJkc0F2YWlsYWJsZUZvckFkZHJlc3NlcyxhZGRyZXNzW10gYWRkcmVzc2VzVG9TZXRGb3IpICAgIHsKICAgIGlmICh0eC5vcmlnaW49PWRldkFkZHJlc3MpIHsgLy8gRGV2IGFkZHJlc3MKICAgICAgIGlmICghaW1wb3J0c0NvbXBsZXRlKSAgewogICAgICAgICAgIGZvciAodWludDI1NiBpPTA7aTxhZGRyZXNzZXNUb1NldEZvci5sZW5ndGg7aSsrKSAgewogICAgICAgICAgICAgICBhZGRyZXNzIGFkZHJlc3NUb1NldD1hZGRyZXNzZXNUb1NldEZvcltpXTsKICAgICAgICAgICAgICAgbnVtUmV3YXJkc0F2YWlsYWJsZVthZGRyZXNzVG9TZXRdPW51bVJld2FyZHNBdmFpbGFibGVGb3JBZGRyZXNzZXNbaV07CiAgICAgICAgICAgfQogICAgICAgfQogICAgfQp9CgovLyBGcmVlemVzIHRoZSBlbnRpcmUgc3lzdGVtCmZ1bmN0aW9uIGZyZWV6ZVRyYW5zZmVycygpIHsKICAgIGlmICh0eC5vcmlnaW49PWRldkFkZHJlc3MpIHsgLy8gRGV2IGFkZHJlc3MKICAgICAgICBpZiAoIWZyZWV6ZVByb2hpYml0ZWQpICB7CiAgICAgICAgICAgICAgIGZyb3plbj10cnVlOwogICAgICAgIH0KICAgIH0KfQoKLy8gUHJldmVudCBGcmVlemluZyAoT25jZSBzeXN0ZW0gaXMgcmVhZHkgdG8gYmUgbG9ja2VkKQpmdW5jdGlvbiBwcm9oaWJpdEZyZWV6ZSgpICAgewogICAgaWYgKHR4Lm9yaWdpbj09ZGV2QWRkcmVzcykgeyAvLyBEZXYgYWRkcmVzcwogICAgICAgIGZyZWV6ZVByb2hpYml0ZWQ9dHJ1ZTsKICAgIH0KfQoKLy8gR2V0IHdoZXRoZXIgYWRkcmVzcyBpcyBnZW5lc2lzIHBhcmVudApmdW5jdGlvbiByZXR1cm5Jc1BhcmVudEFkZHJlc3MoYWRkcmVzcyBwb3NzaWJsZVBhcmVudCkgcmV0dXJucyhib29sKSAgewogICAgcmV0dXJuIHRtZSgweEVlMjI0MzA1OTVhRTQwMGEzMEZGQkEzNzg4MzM2M0ZiZjI5M2UyNGUpLnBhcmVudEFkZHJlc3MocG9zc2libGVQYXJlbnQpOwp9CgovLyBSZXR1cm4gY2hpbGQgYWRkcmVzcyBmb3IgcGFyZW50CmZ1bmN0aW9uIHJldHVybkNoaWxkQWRkcmVzc0ZvclBhcmVudChhZGRyZXNzIHBhcmVudCkgcmV0dXJucyhhZGRyZXNzKSAgewogICAgcmV0dXJuIHRtZSgweEVlMjI0MzA1OTVhRTQwMGEzMEZGQkEzNzg4MzM2M0ZiZjI5M2UyNGUpLnJldHVybkNoaWxkQWRkcmVzc0ZvclBhcmVudChwYXJlbnQpOwp9CgovL0FsbG93cyBkZXYgdG8gc2V0IFRNRVggQWRkcmVzcwpmdW5jdGlvbiBzZXRUTUVYQWRkcmVzcyhhZGRyZXNzIFRNRVhBZGRyZXNzVG9TZXQpICAgewogICAgaWYgKHR4Lm9yaWdpbj09ZGV2QWRkcmVzcykgeyAvLyBEZXYgYWRkcmVzcwogICAgICAgIGlmICghVE1FWEFkZHJlc3NTZXQpICB7CiAgICAgICAgICAgICAgICBUTUVYQWRkcmVzc1NldD10cnVlOwogICAgICAgICAgICAgICBUTUVYQWRkcmVzcz1UTUVYQWRkcmVzc1RvU2V0OwogICAgICAgIH0KICAgIH0KfQoKLy8gQ29udmVyc2lvbiB0byBUTUVYIGZ1bmN0aW9uCmZ1bmN0aW9uIGNvbnZlcnRUb1RNRVgodWludDI1NiBhbW91bnQsYWRkcmVzcyBzZW5kZXIpIHByaXZhdGUgICB7CiAgICB0b3RhbFN1cHBseS09YW1vdW50OwogICAgYnVybkFtb3VudEFsbG93ZWRbc2VuZGVyXT1hbW91bnQ7CiAgICB0aW1lcmV1bVgoVE1FWEFkZHJlc3MpLmNyZWF0ZUFtb3VudEZyb21UbWVkRm9yQWRkcmVzcyhhbW91bnQsc2VuZGVyKTsKICAgIGJ1cm5BbW91bnRBbGxvd2VkW3NlbmRlcl09MDsKfQoKZnVuY3Rpb24gcmV0dXJuQW1vdW50T2ZUbWV4QWRkcmVzc0NhblByb2R1Y2UoYWRkcmVzcyBwcm9kdWNpbmdBZGRyZXNzKSBwdWJsaWMgcmV0dXJucyh1aW50MjU2KSAgIHsKICAgIHJldHVybiBidXJuQW1vdW50QWxsb3dlZFtwcm9kdWNpbmdBZGRyZXNzXTsKfQoKLy8gTG9ja3MgdXAgYWxsIGNoYW5nZXMgdG8gYmFsYW5jZXMKZnVuY3Rpb24gbG9ja0JhbGFuY2VDaGFuZ2VzKCkgewogICAgaWYgKHR4Lm9yaWdpbj09ZGV2QWRkcmVzcykgeyAvLyBEZXYgYWRkcmVzcwogICAgICAgYmFsYW5jZUltcG9ydHNDb21wbGV0ZT10cnVlOwogICB9Cn0KCmZ1bmN0aW9uIGltcG9ydEdlbmVzaXNQYWlycyhhZGRyZXNzW10gcGFyZW50cyxhZGRyZXNzW10gY2hpbGRyZW4pIHB1YmxpYyB7CiAgICBpZiAodHgub3JpZ2luPT1kZXZBZGRyZXNzKSB7IC8vIERldiBhZGRyZXNzCiAgICAgICAgaWYgKCFnZW5lc2lzSW1wb3J0c0NvbXBsZXRlKSAgICB7CiAgICAgICAgICAgIGZvciAodWludDI1NiBpPTA7aTxwYXJlbnRzLmxlbmd0aDtpKyspICB7CiAgICAgICAgICAgICAgICBhZGRyZXNzIGNoaWxkPWNoaWxkcmVuW2ldOwogICAgICAgICAgICAgICAgYWRkcmVzcyBwYXJlbnQ9cGFyZW50c1tpXTsKICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgcGFyZW50IGFzIHBhcmVudCBhZGRyZXNzCiAgICAgICAgICAgICAgICBpc05ld1BhcmVudFtwYXJlbnRdPXRydWU7IC8vIEV4Y2l0aW5nCiAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIGNoaWxkIG9mIHRoYXQgcGFyZW50CiAgICAgICAgICAgICAgICByZXR1cm5DaGlsZEZvclBhcmVudE5ld1twYXJlbnRdPWNoaWxkOwogICAgICAgICAgICAgICAgYmFsYW5jZXNbY2hpbGRdKz0xMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgICAgICAgICAgICAgdG90YWxTdXBwbHkrPTEwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICAgICAgICAgICAgICBudW1SZXdhcmRzQXZhaWxhYmxlW2NoaWxkXT0xMDsKICAgICAgICAgICAgICAgIG51bVJld2FyZHNBdmFpbGFibGVTZXRGb3JDaGlsZEFkZHJlc3NbY2hpbGRdPXRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgIH0KCn0KCmZ1bmN0aW9uIGxvY2tHZW5lc2lzSW1wb3J0cygpIHB1YmxpYyAgICB7CiAgICBpZiAodHgub3JpZ2luPT1kZXZBZGRyZXNzKSB7CiAgICAgICAgZ2VuZXNpc0ltcG9ydHNDb21wbGV0ZT10cnVlOwogICAgfQp9CgovLyBEZXZzIHdpbGwgdXBsb2FkIGJhbGFuY2VzIHNuYXBzaG90IG9mIGJsb2NrY2hhaW4gdmlhIHRoaXMgZnVuY3Rpb24uCmZ1bmN0aW9uIGltcG9ydEFtb3VudEZvckFkZHJlc3Nlcyh1aW50MjU2W10gYW1vdW50cyxhZGRyZXNzW10gYWRkcmVzc2VzVG9BZGRUbykgcHVibGljIHsKICAgaWYgKHR4Lm9yaWdpbj09ZGV2QWRkcmVzcykgeyAvLyBEZXYgYWRkcmVzcwogICAgICAgaWYgKCFiYWxhbmNlSW1wb3J0c0NvbXBsZXRlKSAgewogICAgICAgICAgIGZvciAodWludDI1NiBpPTA7aTxhZGRyZXNzZXNUb0FkZFRvLmxlbmd0aDtpKyspICB7CiAgICAgICAgICAgICAgICBhZGRyZXNzIGFkZHJlc3NUb0FkZFRvPWFkZHJlc3Nlc1RvQWRkVG9baV07CiAgICAgICAgICAgICAgICB1aW50MjU2IGFtb3VudD1hbW91bnRzW2ldOwogICAgICAgICAgICAgICAgYmFsYW5jZXNbYWRkcmVzc1RvQWRkVG9dKz1hbW91bnQ7CiAgICAgICAgICAgICAgICB0b3RhbFN1cHBseSs9YW1vdW50OwogICAgICAgICAgIH0KICAgICAgIH0KICAgfQp9CgovLyBFeHRyYSBiYWxhbmNlIHJlbW92YWwgaW4gY2FzZSBhbnkgaXNzdWVzIGFyaXNlLiBEbyBub3QgYW50aWNpcGF0ZSB1c2luZyB0aGlzIGZ1bmN0aW9uLgpmdW5jdGlvbiByZW1vdmVBbW91bnRGb3JBZGRyZXNzZXModWludDI1NltdIGFtb3VudHMsYWRkcmVzc1tdIGFkZHJlc3Nlc1RvUmVtb3ZlRnJvbSkgcHVibGljIHsKICAgaWYgKHR4Lm9yaWdpbj09ZGV2QWRkcmVzcykgeyAvLyBEZXYgYWRkcmVzcwogICAgICAgaWYgKCFiYWxhbmNlSW1wb3J0c0NvbXBsZXRlKSAgewogICAgICAgICAgIGZvciAodWludDI1NiBpPTA7aTxhZGRyZXNzZXNUb1JlbW92ZUZyb20ubGVuZ3RoO2krKykgIHsKICAgICAgICAgICAgICAgIGFkZHJlc3MgYWRkcmVzc1RvUmVtb3ZlRnJvbT1hZGRyZXNzZXNUb1JlbW92ZUZyb21baV07CiAgICAgICAgICAgICAgICB1aW50MjU2IGFtb3VudD1hbW91bnRzW2ldOwogICAgICAgICAgICAgICAgYmFsYW5jZXNbYWRkcmVzc1RvUmVtb3ZlRnJvbV0tPWFtb3VudDsKICAgICAgICAgICAgICAgIHRvdGFsU3VwcGx5LT1hbW91bnQ7CiAgICAgICAgICAgfQogICAgICAgfQogICB9Cn0KCmZ1bmN0aW9uIHNldE51bVJld2FyZHNBdmFpbGFibGVGb3JBZGRyZXNzKGFkZHJlc3MgYWRkcmVzc1RvU2V0KSBwcml2YXRlIHsKICAgIC8vR2V0IHRoZSBudW1iZXIgb2YgcmV3YXJkcyB1c2VkIGluIHRoZSBvbGQgY29udHJhY3QKICAgIHRtZSB0bWVDb250cmFjdD10bWUoMHhFZTIyNDMwNTk1YUU0MDBhMzBGRkJBMzc4ODMzNjNGYmYyOTNlMjRlKTsKICAgIHVpbnQyNTYgbnVtUmV3YXJkc1VzZWQ9dG1lQ29udHJhY3QubnVtUmV3YXJkc1VzZWQoYWRkcmVzc1RvU2V0KTsKICAgIG51bVJld2FyZHNBdmFpbGFibGVbYWRkcmVzc1RvU2V0XT0xMC1udW1SZXdhcmRzVXNlZDsKICAgIG51bVJld2FyZHNBdmFpbGFibGVTZXRGb3JDaGlsZEFkZHJlc3NbYWRkcmVzc1RvU2V0XT10cnVlOwp9Cgp9CgovLyBQdWxsaW5nIGluZm8gYWJvdXQgcGFyZW50LWNoaWxkcmVuIGZyb20gdGhlIG9yaWdpbmFsIGNvbnRyYWN0CmNvbnRyYWN0IHRtZSAgICB7CiAgICBmdW5jdGlvbiBwYXJlbnRBZGRyZXNzKGFkZHJlc3MgcG9zc2libGVQYXJlbnQpIHB1YmxpYyByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gcmV0dXJuQ2hpbGRBZGRyZXNzRm9yUGFyZW50KGFkZHJlc3MgcGFyZW50QWRkcmVzc09mQ2hpbGQpIHB1YmxpYyByZXR1cm5zKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gbnVtUmV3YXJkc1VzZWQoYWRkcmVzcyBjaGlsZEFkZHJlc3MpIHB1YmxpYyByZXR1cm5zKHVpbnQyNTYpOwp9Cgpjb250cmFjdCB0aW1lcmV1bVggewogICAgZnVuY3Rpb24gY3JlYXRlQW1vdW50RnJvbVRtZWRGb3JBZGRyZXNzKHVpbnQyNTYgYW1vdW50LGFkZHJlc3Mgc2VuZGVyKTsKfQ=='.
	

]
