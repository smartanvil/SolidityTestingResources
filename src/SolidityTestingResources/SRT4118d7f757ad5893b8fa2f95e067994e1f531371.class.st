Class {
	#name : #SRT4118d7f757ad5893b8fa2f95e067994e1f531371,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4118d7f757ad5893b8fa2f95e067994e1f531371 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgdG9rZW5SZWNpcGllbnQgeyBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWM7IH0KCmNvbnRyYWN0IEJpdEd1aWxkVG9rZW4gewogICAgLy8gUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4KICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJCaXRHdWlsZCBQTEFUIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlBMQVQiOwogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gMTg7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDEwMDAwMDAwMDAwICogMTAgKiogdWludDI1NihkZWNpbWFscyk7IC8vIDEwIGJpbGxpb24gdG9rZW5zOwoKICAgIC8vIFRoaXMgY3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBiYWxhbmNlcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIC8vIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CgogICAgLy8gVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgYnVybnQKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IgZnVuY3Rpb24KICAgICAqIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdAogICAgICovCiAgICBmdW5jdGlvbiBCaXRHdWlsZFRva2VuKCkgcHVibGljIHsKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSB0b3RhbFN1cHBseTsKICAgIH0KCiAgICAvKioKICAgICAqIEludGVybmFsIHRyYW5zZmVyLCBvbmx5IGNhbiBiZSBjYWxsZWQgYnkgdGhpcyBjb250cmFjdAogICAgICovCiAgICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgLy8gUHJldmVudCB0cmFuc2ZlciB0byAweDAgYWRkcmVzcy4gVXNlIGJ1cm4oKSBpbnN0ZWFkCiAgICAgICAgcmVxdWlyZShfdG8gIT0gMHgwKTsKICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VPZltfdG9dKTsKICAgICAgICAvLyBTYXZlIHRoaXMgZm9yIGFuIGFzc2VydGlvbiBpbiB0aGUgZnV0dXJlCiAgICAgICAgdWludCBwcmV2aW91c0JhbGFuY2VzID0gYmFsYW5jZU9mW19mcm9tXSArIGJhbGFuY2VPZltfdG9dOwogICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgLy8gQXNzZXJ0cyBhcmUgdXNlZCB0byB1c2Ugc3RhdGljIGFuYWx5c2lzIHRvIGZpbmQgYnVncyBpbiB5b3VyIGNvZGUuIFRoZXkgc2hvdWxkIG5ldmVyIGZhaWwKICAgICAgICBhc3NlcnQoYmFsYW5jZU9mW19mcm9tXSArIGJhbGFuY2VPZltfdG9dID09IHByZXZpb3VzQmFsYW5jZXMpOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXIgdG9rZW5zCiAgICAgKgogICAgICogU2VuZCBgX3ZhbHVlYCB0b2tlbnMgdG8gYF90b2AgZnJvbSB5b3VyIGFjY291bnQKICAgICAqCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCB0byBzZW5kCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHsKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXIgdG9rZW5zIGZyb20gb3RoZXIgYWRkcmVzcwogICAgICoKICAgICAqIFNlbmQgYF92YWx1ZWAgdG9rZW5zIHRvIGBfdG9gIG9uIGJlaGFsZiBvZiBgX2Zyb21gCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSB0aGUgYW1vdW50IHRvIHNlbmQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pOyAgICAgLy8gQ2hlY2sgYWxsb3dhbmNlCiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgYWxsb3dhbmNlIGZvciBvdGhlciBhZGRyZXNzCiAgICAgKgogICAgICogQWxsb3dzIGBfc3BlbmRlcmAgdG8gc3BlbmQgbm8gbW9yZSB0aGFuIGBfdmFsdWVgIHRva2VucyBvbiB5b3VyIGJlaGFsZgogICAgICoKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBhdXRob3JpemVkIHRvIHNwZW5kCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHRoZSBtYXggYW1vdW50IHRoZXkgY2FuIHNwZW5kCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgYWxsb3dhbmNlIGZvciBvdGhlciBhZGRyZXNzIGFuZCBub3RpZnkKICAgICAqCiAgICAgKiBBbGxvd3MgYF9zcGVuZGVyYCB0byBzcGVuZCBubyBtb3JlIHRoYW4gYF92YWx1ZWAgdG9rZW5zIG9uIHlvdXIgYmVoYWxmLCBhbmQgdGhlbiBwaW5nIHRoZSBjb250cmFjdCBhYm91dCBpdAogICAgICoKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBhdXRob3JpemVkIHRvIHNwZW5kCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHRoZSBtYXggYW1vdW50IHRoZXkgY2FuIHNwZW5kCiAgICAgKiBAcGFyYW0gX2V4dHJhRGF0YSBzb21lIGV4dHJhIGluZm9ybWF0aW9uIHRvIHNlbmQgdG8gdGhlIGFwcHJvdmVkIGNvbnRyYWN0CiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHRva2VuUmVjaXBpZW50IHNwZW5kZXIgPSB0b2tlblJlY2lwaWVudChfc3BlbmRlcik7CiAgICAgICAgaWYgKGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSkpIHsKICAgICAgICAgICAgc3BlbmRlci5yZWNlaXZlQXBwcm92YWwobXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogRGVzdHJveSB0b2tlbnMKICAgICAqCiAgICAgKiBSZW1vdmUgYF92YWx1ZWAgdG9rZW5zIGZyb20gdGhlIHN5c3RlbSBpcnJldmVyc2libHkKICAgICAqCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHRoZSBhbW91bnQgb2YgbW9uZXkgdG8gYnVybgogICAgICovCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOyAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIHRvdGFsU3VwcGx5IC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlcyB0b3RhbFN1cHBseQogICAgICAgIEJ1cm4obXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIERlc3Ryb3kgdG9rZW5zIGZyb20gb3RoZXIgYWNjb3VudAogICAgICoKICAgICAqIFJlbW92ZSBgX3ZhbHVlYCB0b2tlbnMgZnJvbSB0aGUgc3lzdGVtIGlycmV2ZXJzaWJseSBvbiBiZWhhbGYgb2YgYF9mcm9tYC4KICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gdGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgICogQHBhcmFtIF92YWx1ZSB0aGUgYW1vdW50IG9mIG1vbmV5IHRvIGJ1cm4KICAgICAqLwogICAgZnVuY3Rpb24gYnVybkZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX3ZhbHVlKTsgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRhcmdldGVkIGJhbGFuY2UgaXMgZW5vdWdoCiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSk7ICAgIC8vIENoZWNrIGFsbG93YW5jZQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSB0YXJnZXRlZCBiYWxhbmNlCiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcidzIGFsbG93YW5jZQogICAgICAgIHRvdGFsU3VwcGx5IC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdG90YWxTdXBwbHkKICAgICAgICBCdXJuKF9mcm9tLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgovKioKICogQHRpdGxlIEJpdEd1aWxkV2hpdGVsaXN0CiAqIEEgc21hbGwgc21hcnQgY29udHJhY3QgdG8gcHJvdmlkZSB3aGl0ZWxpc3QgZnVuY3Rpb25hbGl0eSBhbmQgc3RvcmFnZQogKi8KY29udHJhY3QgQml0R3VpbGRXaGl0ZWxpc3QgewoKICBhZGRyZXNzIGFkbWluOwoKICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyB3aGl0ZWxpc3Q7CiAgdWludDI1NiBwdWJsaWMgdG90YWxXaGl0ZWxpc3RlZCA9IDA7CgogIGV2ZW50IEFkZHJlc3NXaGl0ZWxpc3RlZChhZGRyZXNzIGluZGV4ZWQgdXNlciwgYm9vbCB3aGl0ZWxpc3RlZCk7CgogIGZ1bmN0aW9uIEJpdEd1aWxkV2hpdGVsaXN0KCkgcHVibGljIHsKICAgIGFkbWluID0gbXNnLnNlbmRlcjsKICB9CgogIC8vIERvZXNuJ3QgYWNjZXB0IGV0aAogIGZ1bmN0aW9uICgpIGV4dGVybmFsIHBheWFibGUgewogICAgcmV2ZXJ0KCk7CiAgfQoKICAvLyBBbGxvd3MgYW4gYWRtaW4gdG8gdXBkYXRlIHdoaXRlbGlzdAogIGZ1bmN0aW9uIHdoaXRlbGlzdEFkZHJlc3MoYWRkcmVzc1tdIF91c2VycywgYm9vbCBfd2hpdGVsaXN0ZWQpIHB1YmxpYyB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRtaW4pOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX3VzZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmICh3aGl0ZWxpc3RbX3VzZXJzW2ldXSA9PSBfd2hpdGVsaXN0ZWQpIGNvbnRpbnVlOwogICAgICBpZiAoX3doaXRlbGlzdGVkKSB7CiAgICAgICAgdG90YWxXaGl0ZWxpc3RlZCsrOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0b3RhbFdoaXRlbGlzdGVkID4gMCkgewogICAgICAgICAgdG90YWxXaGl0ZWxpc3RlZC0tOwogICAgICAgIH0KICAgICAgfQogICAgICBBZGRyZXNzV2hpdGVsaXN0ZWQoX3VzZXJzW2ldLCBfd2hpdGVsaXN0ZWQpOwogICAgICB3aGl0ZWxpc3RbX3VzZXJzW2ldXSA9IF93aGl0ZWxpc3RlZDsKICAgIH0KICB9Cn0KCi8qKgogKiBAdGl0bGUgQml0R3VpbGRDcm93ZHNhbGUKICogQ2FwcGVkIGNyb3dkc2FsZSB3aXRoIGEgc3RhcmQvZW5kIGRhdGUKICovCmNvbnRyYWN0IEJpdEd1aWxkQ3Jvd2RzYWxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgLy8gVG9rZW4gYmVpbmcgc29sZAogIEJpdEd1aWxkVG9rZW4gcHVibGljIHRva2VuOwoKICAvLyBXaGl0ZWxpc3QgYmVpbmcgdXNlZAogIEJpdEd1aWxkV2hpdGVsaXN0IHB1YmxpYyB3aGl0ZWxpc3Q7CgogIC8vIHN0YXJ0IGFuZCBlbmQgdGltZXN0YW1wcyB3aGVyZSBpbnZlc3RtZW50cyBhcmUgYWxsb3dlZCAoYm90aCBpbmNsdXNpdmUpCiAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lOwogIHVpbnQyNTYgcHVibGljIGVuZFRpbWU7CgogIC8vIENyb3dkc2FsZSBjYXAgKGhvdyBtdWNoIGNhbiBiZSByYWlzZWQgdG90YWwpCiAgdWludDI1NiBwdWJsaWMgY2FwID0gMTQwNjIuNSBldGhlcjsKCiAgLy8gQWRkcmVzcyB3aGVyZSBmdW5kcyBhcmUgY29sbGVjdGVkCiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwoKICAvLyBQcmVkZWZpbmVkIHJhdGUgb2YgUExBVCB0byBFdGhlcmV1bSAoMS9yYXRlID0gY3Jvd2RzYWxlIHByaWNlKQogIHVpbnQyNTYgcHVibGljIHJhdGUgPSA4MDAwMDsKCiAgLy8gTWluL21heCBwdXJjaGFzZQogIHVpbnQyNTYgcHVibGljIG1pbkNvbnRyaWJ1dGlvbiA9IDAuNSBldGhlcjsKICB1aW50MjU2IHB1YmxpYyBtYXhDb250cmlidXRpb24gPSAxNTAwIGV0aGVyOwoKICAvLyBhbW91bnQgb2YgcmFpc2VkIG1vbmV5IGluIHdlaQogIHVpbnQyNTYgcHVibGljIHdlaVJhaXNlZDsKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBjb250cmlidXRpb25zOwoKICAvLyBGaW5hbGl6YXRpb24gZmxhZyBmb3Igd2hlbiB3ZSB3YW50IHRvIHdpdGhkcmF3IHRoZSByZW1haW5pbmcgdG9rZW5zIGFmdGVyIHRoZSBlbmQKICBib29sIHB1YmxpYyBjcm93ZHNhbGVGaW5hbGl6ZWQgPSBmYWxzZTsKCiAgLyoqCiAgICogZXZlbnQgZm9yIHRva2VuIHB1cmNoYXNlIGxvZ2dpbmcKICAgKiBAcGFyYW0gcHVyY2hhc2VyIHdobyBwYWlkIGZvciB0aGUgdG9rZW5zCiAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IHdobyBnb3QgdGhlIHRva2VucwogICAqIEBwYXJhbSB2YWx1ZSB3ZWlzIHBhaWQgZm9yIHB1cmNoYXNlCiAgICogQHBhcmFtIGFtb3VudCBhbW91bnQgb2YgdG9rZW5zIHB1cmNoYXNlZAogICAqLwogIGV2ZW50IFRva2VuUHVyY2hhc2UoYWRkcmVzcyBpbmRleGVkIHB1cmNoYXNlciwgYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFtb3VudCk7CgogIGZ1bmN0aW9uIEJpdEd1aWxkQ3Jvd2RzYWxlKHVpbnQyNTYgX3N0YXJ0VGltZSwgdWludDI1NiBfZW5kVGltZSwgYWRkcmVzcyBfdG9rZW4sIGFkZHJlc3MgX3dhbGxldCwgYWRkcmVzcyBfd2hpdGVsaXN0KSBwdWJsaWMgewogICAgcmVxdWlyZShfc3RhcnRUaW1lID49IG5vdyk7CiAgICByZXF1aXJlKF9lbmRUaW1lID49IF9zdGFydFRpbWUpOwogICAgcmVxdWlyZShfdG9rZW4gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF93YWxsZXQgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF93aGl0ZWxpc3QgIT0gYWRkcmVzcygwKSk7CgogICAgc3RhcnRUaW1lID0gX3N0YXJ0VGltZTsKICAgIGVuZFRpbWUgPSBfZW5kVGltZTsKICAgIHRva2VuID0gQml0R3VpbGRUb2tlbihfdG9rZW4pOwogICAgd2FsbGV0ID0gX3dhbGxldDsKICAgIHdoaXRlbGlzdCA9IEJpdEd1aWxkV2hpdGVsaXN0KF93aGl0ZWxpc3QpOwogIH0KCiAgLy8gZmFsbGJhY2sgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYnV5IHRva2VucwogIGZ1bmN0aW9uICgpIGV4dGVybmFsIHBheWFibGUgewogICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogIH0KCiAgLy8gbG93IGxldmVsIHRva2VuIHB1cmNoYXNlIGZ1bmN0aW9uCiAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHB1YmxpYyBwYXlhYmxlIHsKICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKHdoaXRlbGlzdC53aGl0ZWxpc3QoYmVuZWZpY2lhcnkpKTsKICAgIHJlcXVpcmUodmFsaWRQdXJjaGFzZSgpKTsKCiAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKCiAgICAvLyBjYWxjdWxhdGUgdG9rZW4gYW1vdW50IHRvIGJlIGNyZWF0ZWQKICAgIHVpbnQyNTYgdG9rZW5zID0gZ2V0VG9rZW5BbW91bnQod2VpQW1vdW50KTsKCiAgICAvLyB1cGRhdGUgdG90YWwgYW5kIGluZGl2aWR1YWwgY29udHJpYnV0aW9ucwogICAgd2VpUmFpc2VkID0gd2VpUmFpc2VkLmFkZCh3ZWlBbW91bnQpOwogICAgY29udHJpYnV0aW9uc1tiZW5lZmljaWFyeV0gPSBjb250cmlidXRpb25zW2JlbmVmaWNpYXJ5XS5hZGQod2VpQW1vdW50KTsKCiAgICAvLyBTZW5kIHRva2VucwogICAgdG9rZW4udHJhbnNmZXIoYmVuZWZpY2lhcnksIHRva2Vucyk7CiAgICBUb2tlblB1cmNoYXNlKG1zZy5zZW5kZXIsIGJlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRva2Vucyk7CgogICAgLy8gU2VuZCBmdW5kcwogICAgd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgfQoKICAvLyBSZXR1cm5zIHRydWUgaWYgY3Jvd2RzYWxlIGV2ZW50IGhhcyBlbmRlZAogIGZ1bmN0aW9uIGhhc0VuZGVkKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgYm9vbCBjYXBSZWFjaGVkID0gd2VpUmFpc2VkID49IGNhcDsKICAgIGJvb2wgZW5kVGltZVJlYWNoZWQgPSBub3cgPiBlbmRUaW1lOwogICAgcmV0dXJuIGNhcFJlYWNoZWQgfHwgZW5kVGltZVJlYWNoZWQgfHwgY3Jvd2RzYWxlRmluYWxpemVkOwogIH0KCiAgLy8gQm9udXNlcyBmb3IgbGFyZ2VyIHB1cmNoYXNlcyAoaW4gaHVuZHJlZHRocyBvZiBwZXJjZW50KQogIGZ1bmN0aW9uIGJvbnVzUGVyY2VudEZvcldlaUFtb3VudCh1aW50MjU2IHdlaUFtb3VudCkgcHVibGljIHB1cmUgcmV0dXJucyh1aW50MjU2KSB7CiAgICBpZiAod2VpQW1vdW50ID49IDUwMCBldGhlcikgcmV0dXJuIDEwMDA7IC8vIDEwJQogICAgaWYgKHdlaUFtb3VudCA+PSAyNTAgZXRoZXIpIHJldHVybiA3NTA7ICAvLyA3LjUlCiAgICBpZiAod2VpQW1vdW50ID49IDEwMCBldGhlcikgcmV0dXJuIDUwMDsgIC8vIDUlCiAgICBpZiAod2VpQW1vdW50ID49IDUwIGV0aGVyKSByZXR1cm4gMzc1OyAgIC8vIDMuNzUlCiAgICBpZiAod2VpQW1vdW50ID49IDE1IGV0aGVyKSByZXR1cm4gMjUwOyAgIC8vIDIuNSUKICAgIGlmICh3ZWlBbW91bnQgPj0gNSBldGhlcikgcmV0dXJuIDEyNTsgICAgLy8gMS4yNSUKICAgIHJldHVybiAwOyAvLyAwJSBib251cyBpZiBsb3dlciB0aGFuIDUgZXRoCiAgfQoKICAvLyBSZXR1cm5zIHlvdSBob3cgbXVjaCB0b2tlbnMgZG8geW91IGdldCBmb3IgdGhlIHdlaSBwYXNzZWQKICBmdW5jdGlvbiBnZXRUb2tlbkFtb3VudCh1aW50MjU2IHdlaUFtb3VudCkgaW50ZXJuYWwgdmlldyByZXR1cm5zKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgdG9rZW5zID0gd2VpQW1vdW50Lm11bChyYXRlKTsKICAgIHVpbnQyNTYgYm9udXMgPSBib251c1BlcmNlbnRGb3JXZWlBbW91bnQod2VpQW1vdW50KTsKICAgIHRva2VucyA9IHRva2Vucy5tdWwoMTAwMDAgKyBib251cykuZGl2KDEwMDAwKTsKICAgIHJldHVybiB0b2tlbnM7CiAgfQoKICAvLyBSZXR1cm5zIHRydWUgaWYgdGhlIHRyYW5zYWN0aW9uIGNhbiBidXkgdG9rZW5zCiAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZSgpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgYm9vbCB3aXRoaW5QZXJpb2QgPSBub3cgPj0gc3RhcnRUaW1lICYmIG5vdyA8PSBlbmRUaW1lOwogICAgYm9vbCBtb3JlVGhhbk1pblB1cmNoYXNlID0gbXNnLnZhbHVlID49IG1pbkNvbnRyaWJ1dGlvbjsKICAgIGJvb2wgbGVzc1RoYW5NYXhQdXJjaGFzZSA9IGNvbnRyaWJ1dGlvbnNbbXNnLnNlbmRlcl0gKyBtc2cudmFsdWUgPD0gbWF4Q29udHJpYnV0aW9uOwogICAgYm9vbCB3aXRoaW5DYXAgPSB3ZWlSYWlzZWQuYWRkKG1zZy52YWx1ZSkgPD0gY2FwOwoKICAgIHJldHVybiB3aXRoaW5QZXJpb2QgJiYgbW9yZVRoYW5NaW5QdXJjaGFzZSAmJiBsZXNzVGhhbk1heFB1cmNoYXNlICYmIHdpdGhpbkNhcCAmJiAhY3Jvd2RzYWxlRmluYWxpemVkOwogIH0KCiAgLy8gRXNjYXBlIGhhdGNoIGluIGNhc2UgdGhlIHNhbGUgbmVlZHMgdG8gYmUgdXJnZW50bHkgc3RvcHBlZAogIGZ1bmN0aW9uIGZpbmFsaXplQ3Jvd2RzYWxlKCkgcHVibGljIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB3YWxsZXQpOwogICAgY3Jvd2RzYWxlRmluYWxpemVkID0gdHJ1ZTsKICAgIC8vIHNlbmQgcmVtYWluaW5nIHRva2VucyBiYWNrIHRvIHRoZSBhZG1pbgogICAgdWludDI1NiB0b2tlbnNMZWZ0ID0gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgdG9rZW4udHJhbnNmZXIod2FsbGV0LCB0b2tlbnNMZWZ0KTsKICB9Cn0='.
	

]
