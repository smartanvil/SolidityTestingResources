Class {
	#name : #SRT525Ce184d0fe3e3A6e2e8900A20ea40a2A835A79,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT525Ce184d0fe3e3A6e2e8900A20ea40a2A835A79 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBvd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBmdW5jdGlvbiBvd25lZCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9Cn0KCmxpYnJhcnkgVGlwb3NDb21wYXJ0aWRvcyB7CiAgICBlbnVtIFRpcG9QcmVtaW8ge25vbmUsZnJlZSx4Mix4Myx4NSwgc3VycHJpc2UgfQoKICAgIGVudW0gRXN0YWRvTWVuc2FqZXtwZW5kaWVudGUsYXByb2JhZG8scmVjaGF6YWRvfQoKICAgIHN0cnVjdCBDZWxkYSB7CiAgICAgICAgYWRkcmVzcyBjcmVhZG9yOwogICAgICAgIHVpbnQgcG9sZW5Qb3NpdGl2b3M7CiAgICAgICAgdWludCBwb2xlbk5lZ2F0aXZvczsKICAgICAgICB1aW50MjU2IGZlY2hhQ3JlYWNpb247CiAgICAgICAgdWludCBwcmltZXJhUG9zaWNpb247CiAgICAgICAgdWludCBzZWd1bmRhUG9zaWNpb247CiAgICAgICAgdWludCB0ZXJjZXJhUG9zaWNpb247CiAgICAgICAgdWludCBjdWFydGFQb3NpY2lvbjsKICAgICAgICB1aW50IHF1aW50YVBvc2ljaW9uOwogICAgICAgIHVpbnQgc2V4dGFQb3NpY2lvbjsKICAgICAgICBUaXBvUHJlbWlvIHRpcG87CiAgICAgICAgYm9vbCBwcmVtaW87CiAgICB9CgogICAgc3RydWN0IE1lbnNhamUgewogICAgICAgIGFkZHJlc3MgY3JlYWRvcjsKICAgICAgICBzdHJpbmcgYXBvZG87CiAgICAgICAgdWludDI1NiBmZWNoYUNyZWFjaW9uOwogICAgICAgIHN0cmluZyBtZW5zYWplOwogICAgICAgIFRpcG9zQ29tcGFydGlkb3MuRXN0YWRvTWVuc2FqZSBlc3RhZG87CiAgICAgICAgc3RyaW5nIG1vdGl2bzsKICAgIH0KICAgIAp9Cgpjb250cmFjdCBCZWVHYW1lIGlzIG93bmVkIHsKICAgIAogICAgdWludDI1NiBpbnRlcm5hbCBzZWxsUHJpY2U7CiAgICB1aW50MjU2IGludGVybmFsIGJ1eVByaWNlOwogICAgdWludCBpbnRlcm5hbCBudW1lcm9DZWxkYXM7CiAgICB1aW50IGludGVybmFsIG51bWVyb01lbnNhamVzOwogICAgc3RyaW5nIGludGVybmFsIG5hbWU7CiAgICBzdHJpbmcgaW50ZXJuYWwgc3ltYm9sOwogICAgdWludDggaW50ZXJuYWwgZGVjaW1hbHM7CiAgICB1aW50IGludGVybmFsIG51bWVyb1VzdWFyaW9zOwogICAgdWludCBmZWNoYVRheDsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VPZjsKCiAgICBhZGRyZXNzW10gaW5kaWNlVXN1YXJpb3M7CiAgICAKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gVGlwb3NDb21wYXJ0aWRvcy5DZWxkYSkgY2VsZGFzOwogICAgbWFwcGluZyAodWludDI1NiA9PiBUaXBvc0NvbXBhcnRpZG9zLk1lbnNhamUpIG1lbnNhamVzOwogICAgCiAgICB1aW50MjU2W10gaW5kaWNlQ2VsZGFzOwogICAgdWludDI1NltdIGluZGljZU1lbnNhamVzOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICAgIGV2ZW50IFRyYW5zZmVyS08oYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICAKICAgIGZ1bmN0aW9uIEJlZUdhbWUgKAogICAgICAgIHVpbnQyNTYgaW5pdGlhbFN1cHBseSwKICAgICAgICB1aW50MjU2IG5ld1NlbGxQcmljZSwKICAgICAgICB1aW50MjU2IG5ld0J1eVByaWNlLAogICAgICAgIHVpbnQgX2ZlY2hhVGF4KSBwdWJsaWMgewogICAgICAgIGZlY2hhVGF4ID0gX2ZlY2hhVGF4OwogICAgICAgIGJhbGFuY2VPZltvd25lcl0gPSBpbml0aWFsU3VwcGx5OwogICAgICAgIHNldFByaWNlcyhuZXdTZWxsUHJpY2UsbmV3QnV5UHJpY2UpOwogICAgICAgIG51bWVyb0NlbGRhcyA9IDA7CiAgICAgICAgbmFtZSA9ICJCZWV0aGVyIjsKICAgICAgICBzeW1ib2wgPSAiYmVldGgiOyAKICAgICAgICBkZWNpbWFscyA9IDI7CiAgICAgICAgVGlwb3NDb21wYXJ0aWRvcy5DZWxkYSBtZW1vcnkgY2VsZGEgPSBUaXBvc0NvbXBhcnRpZG9zLkNlbGRhKHsKICAgICAgICAgICAgY3JlYWRvcjptc2cuc2VuZGVyLAogICAgICAgICAgICBwb2xlblBvc2l0aXZvcyA6IDAsIAogICAgICAgICAgICBwb2xlbk5lZ2F0aXZvcyA6IDMsCiAgICAgICAgICAgIGZlY2hhQ3JlYWNpb246IDE1MDkzMDI0MDIwMjEsCiAgICAgICAgICAgIHByaW1lcmFQb3NpY2lvbiA6IDAsCiAgICAgICAgICAgIHNlZ3VuZGFQb3NpY2lvbiA6IDAsCiAgICAgICAgICAgIHRlcmNlcmFQb3NpY2lvbiA6IDAsCiAgICAgICAgICAgIGN1YXJ0YVBvc2ljaW9uIDogMCwKICAgICAgICAgICAgcXVpbnRhUG9zaWNpb24gOiAwLAogICAgICAgICAgICBzZXh0YVBvc2ljaW9uIDogMCwKICAgICAgICAgICAgdGlwbzpUaXBvc0NvbXBhcnRpZG9zLlRpcG9QcmVtaW8ubm9uZSwKICAgICAgICAgICAgcHJlbWlvOmZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgaW5kaWNlQ2VsZGFzLnB1c2goMTUwOTMwMjQwMjAyMSk7CiAgICAgICAgbnVtZXJvQ2VsZGFzID0gbnVtZXJvQ2VsZGFzICsgMTsKICAgICAgICBudW1lcm9Vc3VhcmlvcyA9IG51bWVyb1VzdWFyaW9zICsgMTsKICAgICAgICBpbmRpY2VVc3Vhcmlvcy5wdXNoKG1zZy5zZW5kZXIpOwogICAgICAgIGNlbGRhc1sxNTA5MzAyNDAyMDIxXSA9IGNlbGRhOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eSgpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKHVpbnQgYW1vdW50KSB7CiAgICAgICAgYW1vdW50ID0gbXNnLnZhbHVlIC8gYnV5UHJpY2U7ICAgICAgICAgCiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2Zbb3duZXJdID49IGFtb3VudCk7IAogICAgICAgIF90cmFuc2Zlcihvd25lciwgbXNnLnNlbmRlciwgYW1vdW50KTsKICAgICAgICBpbmNsdWlyVXN1YXJpbyhtc2cuc2VuZGVyKTsKICAgICAgICBUcmFuc2Zlcihvd25lciwgbXNnLnNlbmRlciwgYW1vdW50KTsgCiAgICAgICAgcmV0dXJuIGFtb3VudDsgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24gaW5jbHVpclVzdWFyaW8oYWRkcmVzcyB1c3VhcmlvKSBwdWJsaWMgewogICAgICAgIGJvb2wgZW5jb250cmFkbyA9IGZhbHNlOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG51bWVyb1VzdWFyaW9zOyBpKyspIHsKICAgICAgICAgICAgYWRkcmVzcyB1c3VhcmlvVCA9IGluZGljZVVzdWFyaW9zW2ldOwogICAgICAgICAgICBpZiAodXN1YXJpb1QgPT0gdXN1YXJpbyl7CiAgICAgICAgICAgICAgICBlbmNvbnRyYWRvID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZighZW5jb250cmFkbyl7CiAgICAgICAgICAgIGluZGljZVVzdWFyaW9zLnB1c2godXN1YXJpbyk7CiAgICAgICAgICAgIG51bWVyb1VzdWFyaW9zKys7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvYnJhckltcHVlc3RvKHVpbnQgX2ZlY2hhVGF4KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBudW1lcm9Vc3VhcmlvczsgaSsrKSB7CiAgICAgICAgICAgIGFkZHJlc3MgdXN1YXJpbyA9IGluZGljZVVzdWFyaW9zW2ldOwogICAgICAgICAgICBpZiAoYmFsYW5jZU9mW3VzdWFyaW9dID4gMCl7CiAgICAgICAgICAgICAgICBfdHJhbnNmZXIodXN1YXJpbywgb3duZXIsIDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZlY2hhVGF4ID0gX2ZlY2hhVGF4OwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWFyQ2VsZGEodWludCBfcG9sZW5lcywgdWludDI1NiBfZmVjaGFDcmVhY2lvbiwgdWludCBwb3NpY2lvbiwgdWludCBfY2VsZGFQYWRyZSwgdWludCBfY2VsZGFBYnVlbG8sIFRpcG9zQ29tcGFydGlkb3MuVGlwb1ByZW1pbyB0aXBvKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW21zZy5zZW5kZXJdPj0zKTsKICAgICAgICByZXF1aXJlKF9wb2xlbmVzID09IDMpOwogICAgICAgIHJlcXVpcmUoX2NlbGRhUGFkcmUgIT0gMCk7CiAgICAgICAgcmVxdWlyZSgocG9zaWNpb24gPj0gMCAmJiBwb3NpY2lvbiA8IDcpIHx8IChwb3NpY2lvbiA9PSAwICYmIG1zZy5zZW5kZXIgPT0gb3duZXIpKTsKICAgICAgICByZXF1aXJlKCgodGlwbyA9PSBUaXBvc0NvbXBhcnRpZG9zLlRpcG9QcmVtaW8uZnJlZSB8fCB0aXBvID09IFRpcG9zQ29tcGFydGlkb3MuVGlwb1ByZW1pby54MiB8fCB0aXBvID09IFRpcG9zQ29tcGFydGlkb3MuVGlwb1ByZW1pby54MyB8fCB0aXBvID09IFRpcG9zQ29tcGFydGlkb3MuVGlwb1ByZW1pby54NSB8fCB0aXBvID09IFRpcG9zQ29tcGFydGlkb3MuVGlwb1ByZW1pby5zdXJwcmlzZSkgJiYgbXNnLnNlbmRlciA9PSBvd25lcikgfHwgdGlwbyA9PSBUaXBvc0NvbXBhcnRpZG9zLlRpcG9QcmVtaW8ubm9uZSk7CiAgICAgICAgVGlwb3NDb21wYXJ0aWRvcy5DZWxkYSBtZW1vcnkgY2VsZGFQYWRyZSA9IGNlbGRhc1tfY2VsZGFQYWRyZV07CiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgKChwb3NpY2lvbiA9PSAxICYmIGNlbGRhUGFkcmUucHJpbWVyYVBvc2ljaW9uID09IDApIHx8IGNlbGRhc1tjZWxkYVBhZHJlLnByaW1lcmFQb3NpY2lvbl0udGlwbyAhPSBUaXBvc0NvbXBhcnRpZG9zLlRpcG9QcmVtaW8ubm9uZSApIHx8IAogICAgICAgICAgICAoKHBvc2ljaW9uID09IDIgJiYgY2VsZGFQYWRyZS5zZWd1bmRhUG9zaWNpb24gPT0gMCkgfHwgY2VsZGFzW2NlbGRhUGFkcmUuc2VndW5kYVBvc2ljaW9uXS50aXBvICE9IFRpcG9zQ29tcGFydGlkb3MuVGlwb1ByZW1pby5ub25lICkgfHwgCiAgICAgICAgICAgICgocG9zaWNpb24gPT0gMyAmJiBjZWxkYVBhZHJlLnRlcmNlcmFQb3NpY2lvbiA9PSAwKSB8fCBjZWxkYXNbY2VsZGFQYWRyZS50ZXJjZXJhUG9zaWNpb25dLnRpcG8gIT0gVGlwb3NDb21wYXJ0aWRvcy5UaXBvUHJlbWlvLm5vbmUgKSB8fCAKICAgICAgICAgICAgKChwb3NpY2lvbiA9PSA0ICYmIGNlbGRhUGFkcmUuY3VhcnRhUG9zaWNpb24gPT0gMCkgIHx8IGNlbGRhc1tjZWxkYVBhZHJlLmN1YXJ0YVBvc2ljaW9uXS50aXBvICE9IFRpcG9zQ29tcGFydGlkb3MuVGlwb1ByZW1pby5ub25lICkgfHwgCiAgICAgICAgICAgICgocG9zaWNpb24gPT0gNSAmJiBjZWxkYVBhZHJlLnF1aW50YVBvc2ljaW9uID09IDApICB8fCBjZWxkYXNbY2VsZGFQYWRyZS5xdWludGFQb3NpY2lvbl0udGlwbyAhPSBUaXBvc0NvbXBhcnRpZG9zLlRpcG9QcmVtaW8ubm9uZSApIHx8IAogICAgICAgICAgICAoKHBvc2ljaW9uID09IDYgJiYgY2VsZGFQYWRyZS5zZXh0YVBvc2ljaW9uID09IDApIHx8IGNlbGRhc1tjZWxkYVBhZHJlLnNleHRhUG9zaWNpb25dLnRpcG8gIT0gVGlwb3NDb21wYXJ0aWRvcy5UaXBvUHJlbWlvLm5vbmUgKQogICAgICAgICk7CiAgICAgICAgVGlwb3NDb21wYXJ0aWRvcy5DZWxkYSBtZW1vcnkgY2VsZGE7CiAgICAgICAgVGlwb3NDb21wYXJ0aWRvcy5UaXBvUHJlbWlvIHRpcG9QcmVtaW87CiAgICAgICAgaWYgKGNlbGRhc1tfZmVjaGFDcmVhY2lvbl0uZmVjaGFDcmVhY2lvbiA9PSBfZmVjaGFDcmVhY2lvbikgewogICAgICAgICAgICBjZWxkYSA9IGNlbGRhc1tfZmVjaGFDcmVhY2lvbl07CiAgICAgICAgICAgIGNlbGRhLmNyZWFkb3IgPSBtc2cuc2VuZGVyOwogICAgICAgICAgICBjZWxkYS5wcmVtaW8gPSBmYWxzZTsKICAgICAgICAgICAgdGlwb1ByZW1pbyA9IGNlbGRhLnRpcG87CiAgICAgICAgICAgIGNlbGRhLnRpcG8gPSBUaXBvc0NvbXBhcnRpZG9zLlRpcG9QcmVtaW8ubm9uZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgICAgICAgICAgY2VsZGEgPSBUaXBvc0NvbXBhcnRpZG9zLkNlbGRhKHsKICAgICAgICAgICAgICAgICAgICBjcmVhZG9yOm1zZy5zZW5kZXIsCiAgICAgICAgICAgICAgICAgICAgcG9sZW5Qb3NpdGl2b3MgOiAwLCAKICAgICAgICAgICAgICAgICAgICBwb2xlbk5lZ2F0aXZvcyA6IF9wb2xlbmVzLAogICAgICAgICAgICAgICAgICAgIGZlY2hhQ3JlYWNpb246IF9mZWNoYUNyZWFjaW9uLAogICAgICAgICAgICAgICAgICAgIHByaW1lcmFQb3NpY2lvbiA6IDAsCiAgICAgICAgICAgICAgICAgICAgc2VndW5kYVBvc2ljaW9uIDogMCwKICAgICAgICAgICAgICAgICAgICB0ZXJjZXJhUG9zaWNpb24gOiAwLAogICAgICAgICAgICAgICAgICAgIGN1YXJ0YVBvc2ljaW9uIDogMCwKICAgICAgICAgICAgICAgICAgICBxdWludGFQb3NpY2lvbiA6IDAsCiAgICAgICAgICAgICAgICAgICAgc2V4dGFQb3NpY2lvbiA6IDAsCiAgICAgICAgICAgICAgICAgICAgdGlwbzp0aXBvLAogICAgICAgICAgICAgICAgICAgIHByZW1pbzpmYWxzZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgIGNlbGRhID0gVGlwb3NDb21wYXJ0aWRvcy5DZWxkYSh7CiAgICAgICAgICAgICAgICAgICAgY3JlYWRvcjptc2cuc2VuZGVyLAogICAgICAgICAgICAgICAgICAgIHBvbGVuUG9zaXRpdm9zIDogMCwgCiAgICAgICAgICAgICAgICAgICAgcG9sZW5OZWdhdGl2b3MgOiBfcG9sZW5lcywKICAgICAgICAgICAgICAgICAgICBmZWNoYUNyZWFjaW9uOiBfZmVjaGFDcmVhY2lvbiwKICAgICAgICAgICAgICAgICAgICBwcmltZXJhUG9zaWNpb24gOiAwLAogICAgICAgICAgICAgICAgICAgIHNlZ3VuZGFQb3NpY2lvbiA6IDAsCiAgICAgICAgICAgICAgICAgICAgdGVyY2VyYVBvc2ljaW9uIDogMCwKICAgICAgICAgICAgICAgICAgICBjdWFydGFQb3NpY2lvbiA6IDAsCiAgICAgICAgICAgICAgICAgICAgcXVpbnRhUG9zaWNpb24gOiAwLAogICAgICAgICAgICAgICAgICAgIHNleHRhUG9zaWNpb24gOiAwLAogICAgICAgICAgICAgICAgICAgIHRpcG86dGlwbywKICAgICAgICAgICAgICAgICAgICBwcmVtaW86dHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaW5kaWNlQ2VsZGFzLnB1c2goX2ZlY2hhQ3JlYWNpb24pOwogICAgICAgICAgICBudW1lcm9DZWxkYXMgPSBudW1lcm9DZWxkYXMgKyAxOwogICAgICAgIH0KICAgICAgICBjZWxkYXNbX2ZlY2hhQ3JlYWNpb25dID0gY2VsZGE7CiAgICAgICAgVGlwb3NDb21wYXJ0aWRvcy5DZWxkYSBtZW1vcnkgY2VsZGFBYnVlbG8gPSBjZWxkYXNbX2NlbGRhQWJ1ZWxvXTsKICAgICAgICB1aW50IG11bHRpcGxpY2Fkb3IgPSAxOwogICAgICAgIGFkZHJlc3MgcmVwYXJ0aWRvciA9IG1zZy5zZW5kZXI7CiAgICAgICAgaWYgKHRpcG9QcmVtaW8gPT0gVGlwb3NDb21wYXJ0aWRvcy5UaXBvUHJlbWlvLngyICYmICFjZWxkYS5wcmVtaW8pIHsKICAgICAgICAgICAgbXVsdGlwbGljYWRvciA9IDI7CiAgICAgICAgICAgIHJlcGFydGlkb3IgPSBvd25lcjsKICAgICAgICB9IGVsc2UgaWYgKHRpcG9QcmVtaW8gPT0gVGlwb3NDb21wYXJ0aWRvcy5UaXBvUHJlbWlvLngzICYmICFjZWxkYS5wcmVtaW8pIHsKICAgICAgICAgICAgbXVsdGlwbGljYWRvciA9IDM7CiAgICAgICAgICAgIHJlcGFydGlkb3IgPSBvd25lcjsKICAgICAgICB9IGVsc2UgaWYgKHRpcG9QcmVtaW8gPT0gVGlwb3NDb21wYXJ0aWRvcy5UaXBvUHJlbWlvLng1ICYmICFjZWxkYS5wcmVtaW8pIHsKICAgICAgICAgICAgbXVsdGlwbGljYWRvciA9IDU7CiAgICAgICAgICAgIHJlcGFydGlkb3IgPSBvd25lcjsKICAgICAgICB9ICBlbHNlIGlmICh0aXBvUHJlbWlvID09IFRpcG9zQ29tcGFydGlkb3MuVGlwb1ByZW1pby5mcmVlICYmICFjZWxkYS5wcmVtaW8pIHsKICAgICAgICAgICAgcmVwYXJ0aWRvciA9IG93bmVyOwogICAgICAgIH0KICAgICAgICBpZiAocG9zaWNpb24gPT0gMSAmJiBjZWxkYVBhZHJlLnByaW1lcmFQb3NpY2lvbiA9PSAwKSB7CiAgICAgICAgICAgIGNlbGRhUGFkcmUucHJpbWVyYVBvc2ljaW9uID0gX2ZlY2hhQ3JlYWNpb247ICAgCiAgICAgICAgfWVsc2UgaWYgKHBvc2ljaW9uID09IDIgJiYgY2VsZGFQYWRyZS5zZWd1bmRhUG9zaWNpb24gPT0gMCApIHsKICAgICAgICAgICAgY2VsZGFQYWRyZS5zZWd1bmRhUG9zaWNpb24gPSBfZmVjaGFDcmVhY2lvbjsKICAgICAgICB9ZWxzZSBpZiAocG9zaWNpb24gPT0gMyAmJiBjZWxkYVBhZHJlLnRlcmNlcmFQb3NpY2lvbiA9PSAwKSB7CiAgICAgICAgICAgIGNlbGRhUGFkcmUudGVyY2VyYVBvc2ljaW9uID0gX2ZlY2hhQ3JlYWNpb247CiAgICAgICAgfWVsc2UgaWYgKHBvc2ljaW9uID09IDQgJiYgY2VsZGFQYWRyZS5jdWFydGFQb3NpY2lvbiA9PSAwKSB7CiAgICAgICAgICAgIGNlbGRhUGFkcmUuY3VhcnRhUG9zaWNpb24gPSBfZmVjaGFDcmVhY2lvbjsKICAgICAgICB9ZWxzZSBpZiAocG9zaWNpb24gPT0gNSAmJiBjZWxkYVBhZHJlLnF1aW50YVBvc2ljaW9uID09IDApIHsKICAgICAgICAgICAgY2VsZGFQYWRyZS5xdWludGFQb3NpY2lvbiA9IF9mZWNoYUNyZWFjaW9uOwogICAgICAgIH1lbHNlIGlmIChwb3NpY2lvbiA9PSA2ICYmIGNlbGRhUGFkcmUuc2V4dGFQb3NpY2lvbiA9PSAwKSB7CiAgICAgICAgICAgIGNlbGRhUGFkcmUuc2V4dGFQb3NpY2lvbiA9IF9mZWNoYUNyZWFjaW9uOwogICAgICAgIH0KICAgICAgICBpZiAoX2NlbGRhQWJ1ZWxvICE9IDAgJiYgIWNlbGRhLnByZW1pbykgewogICAgICAgICAgICBfdHJhbnNmZXIocmVwYXJ0aWRvcixjZWxkYVBhZHJlLmNyZWFkb3IsMiAqIG11bHRpcGxpY2Fkb3IpOwogICAgICAgICAgICBjZWxkYVBhZHJlLnBvbGVuUG9zaXRpdm9zID0gY2VsZGFQYWRyZS5wb2xlblBvc2l0aXZvcyArICgyICogbXVsdGlwbGljYWRvcik7CiAgICAgICAgICAgIGNlbGRhQWJ1ZWxvLnBvbGVuUG9zaXRpdm9zID0gY2VsZGFBYnVlbG8ucG9sZW5Qb3NpdGl2b3MgKyAoMSAqIG11bHRpcGxpY2Fkb3IpOwogICAgICAgICAgICBfdHJhbnNmZXIocmVwYXJ0aWRvcixjZWxkYUFidWVsby5jcmVhZG9yLDEgKiBtdWx0aXBsaWNhZG9yKTsKICAgICAgICAgICAgY2VsZGFzW2NlbGRhQWJ1ZWxvLmZlY2hhQ3JlYWNpb25dID0gY2VsZGFBYnVlbG87CiAgICAgICAgfWVsc2UgaWYgKCFjZWxkYS5wcmVtaW8pIHsKICAgICAgICAgICAgX3RyYW5zZmVyKHJlcGFydGlkb3IsY2VsZGFQYWRyZS5jcmVhZG9yLDMgKiBtdWx0aXBsaWNhZG9yKTsKICAgICAgICAgICAgY2VsZGFQYWRyZS5wb2xlblBvc2l0aXZvcyA9IGNlbGRhUGFkcmUucG9sZW5Qb3NpdGl2b3MgKyAoIDMgKiBtdWx0aXBsaWNhZG9yKTsKICAgICAgICB9CiAgICAgICAgY2VsZGFzW2NlbGRhUGFkcmUuZmVjaGFDcmVhY2lvbl0gPSBjZWxkYVBhZHJlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldENlbGRhKHVpbnQgaW5kZXgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgY3JlYWRvciwgdWludCBwb2xlblBvc2l0aXZvcywgdWludCBwb2xlbk5lZ2F0aXZvcywgdWludCBmZWNoYUNyZWFjaW9uLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50IHByaW1lcmFQb3NpY2lvbiwgdWludCBzZWd1bmRhUG9zaWNpb24sIHVpbnQgdGVyY2VyYVBvc2ljaW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgY3VhcnRhUG9zaWNpb24sIHVpbnQgcXVpbnRhUG9zaWNpb24sIHVpbnQgc2V4dGFQb3NpY2lvbiwgVGlwb3NDb21wYXJ0aWRvcy5UaXBvUHJlbWlvIHRpcG8sIGJvb2wgcHJlbWlvKSB7CiAgICAgICAgdWludDI1NiBpbmRleEEgPSBpbmRpY2VDZWxkYXNbaW5kZXhdOwogICAgICAgIFRpcG9zQ29tcGFydGlkb3MuQ2VsZGEgbWVtb3J5ICBjZWxkYSA9IGNlbGRhc1tpbmRleEFdOwogICAgICAgIHJldHVybiAoY2VsZGEuY3JlYWRvcixjZWxkYS5wb2xlblBvc2l0aXZvcyxjZWxkYS5wb2xlbk5lZ2F0aXZvcyxjZWxkYS5mZWNoYUNyZWFjaW9uLAogICAgICAgIGNlbGRhLnByaW1lcmFQb3NpY2lvbiwgY2VsZGEuc2VndW5kYVBvc2ljaW9uLCBjZWxkYS50ZXJjZXJhUG9zaWNpb24sIGNlbGRhLmN1YXJ0YVBvc2ljaW9uLCAKICAgICAgICBjZWxkYS5xdWludGFQb3NpY2lvbiwgY2VsZGEuc2V4dGFQb3NpY2lvbiwgY2VsZGEudGlwbywgY2VsZGEucHJlbWlvKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRNZW5zYWplKHVpbnQgaW5kZXgpIHB1YmxpYyB2aWV3IHJldHVybnMoYWRkcmVzcyBjcmVhZG9yLHVpbnQgZmVjaGFDcmVhY2lvbixzdHJpbmcgX21lbnNhamUsc3RyaW5nIGFwb2RvLCBUaXBvc0NvbXBhcnRpZG9zLkVzdGFkb01lbnNhamUgZXN0YWRvLCBzdHJpbmcgbW90aXZvKXsKICAgICAgICB1aW50MjU2IGluZGV4QSA9IGluZGljZU1lbnNhamVzW2luZGV4XTsKICAgICAgICBUaXBvc0NvbXBhcnRpZG9zLk1lbnNhamUgbWVtb3J5IG1lbnNhamUgPSBtZW5zYWplc1tpbmRleEFdOwogICAgICAgIHJldHVybiAobWVuc2FqZS5jcmVhZG9yLG1lbnNhamUuZmVjaGFDcmVhY2lvbixtZW5zYWplLm1lbnNhamUsbWVuc2FqZS5hcG9kbyxtZW5zYWplLmVzdGFkbyxtZW5zYWplLm1vdGl2byk7CiAgICB9CgogICAgZnVuY3Rpb24gaW5zZXJ0YXJNZW5zYWplKHVpbnQyNTYgX2ZlY2hhQ3JlYWNpb24sIHN0cmluZyBfYXBvZG8sc3RyaW5nIF9tZW5zYWplKSBwdWJsaWMgewogICAgICAgIGJvb2wgZW5jb250cmFkbyA9IGZhbHNlOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG51bWVyb1VzdWFyaW9zICYmICFlbmNvbnRyYWRvOyBpKyspIHsKICAgICAgICAgICAgYWRkcmVzcyB1c3VhcmlvVCA9IGluZGljZVVzdWFyaW9zW2ldOwogICAgICAgICAgICBpZiAodXN1YXJpb1QgPT0gbXNnLnNlbmRlcikgewogICAgICAgICAgICAgICAgZW5jb250cmFkbyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmVxdWlyZShlbmNvbnRyYWRvKTsKICAgICAgICBpbmRpY2VNZW5zYWplcy5wdXNoKF9mZWNoYUNyZWFjaW9uKTsKICAgICAgICBudW1lcm9NZW5zYWplcyA9IG51bWVyb01lbnNhamVzICsgMTsKICAgICAgICBUaXBvc0NvbXBhcnRpZG9zLk1lbnNhamUgbWVtb3J5IG1lbnNhamUgPSBUaXBvc0NvbXBhcnRpZG9zLk1lbnNhamUoewogICAgICAgICAgICBjcmVhZG9yOm1zZy5zZW5kZXIsCiAgICAgICAgICAgIGFwb2RvOl9hcG9kbywKICAgICAgICAgICAgZmVjaGFDcmVhY2lvbjpfZmVjaGFDcmVhY2lvbiwKICAgICAgICAgICAgbWVuc2FqZTpfbWVuc2FqZSwKICAgICAgICAgICAgZXN0YWRvOlRpcG9zQ29tcGFydGlkb3MuRXN0YWRvTWVuc2FqZS5hcHJvYmFkbywKICAgICAgICAgICAgbW90aXZvOiIiCiAgICAgICAgfSk7CiAgICAgICAgbWVuc2FqZXNbX2ZlY2hhQ3JlYWNpb25dID0gbWVuc2FqZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHJvYmFyTWVuc2FqZSh1aW50MjU2IF9mZWNoYUNyZWFjaW9uLFRpcG9zQ29tcGFydGlkb3MuRXN0YWRvTWVuc2FqZSBfZXN0YWRvLHN0cmluZyBfbW90aXZvKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBUaXBvc0NvbXBhcnRpZG9zLk1lbnNhamUgbWVtb3J5IG1lbnNhamUgPSBtZW5zYWplc1tfZmVjaGFDcmVhY2lvbl07CiAgICAgICAgbWVuc2FqZS5lc3RhZG8gPSBfZXN0YWRvOwogICAgICAgIG1lbnNhamUubW90aXZvID0gX21vdGl2bzsKICAgICAgICBtZW5zYWplc1tfZmVjaGFDcmVhY2lvbl0gPSBtZW5zYWplOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJhbGFuY2UoYWRkcmVzcyBhZGRyKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQpIHsKCQlyZXR1cm4gYmFsYW5jZU9mW2FkZHJdOwoJfQoKICAgIGZ1bmN0aW9uIGdldEZlY2hhVGF4KCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIGZlY2hhVGF4OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE51bWVyb0NlbGRhcygpIHB1YmxpYyB2aWV3IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBudW1lcm9DZWxkYXM7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TnVtZXJvTWVuc2FqZXMoKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gbnVtZXJvTWVuc2FqZXM7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0T3duZXIoKSBwdWJsaWMgdmlldyByZXR1cm5zKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gb3duZXI7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UmV2ZW51ZSh1aW50IGFtb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIudHJhbnNmZXIoYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZWxsKHVpbnQgYW1vdW50KSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW21zZy5zZW5kZXJdID49IGFtb3VudCk7ICAgICAgICAgCiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIG93bmVyLCBhbW91bnQpOwogICAgICAgIHVpbnQgcmV2ZW51ZSA9IGFtb3VudCAqIHNlbGxQcmljZTsKICAgICAgICBpZiAobXNnLnNlbmRlci5zZW5kIChyZXZlbnVlKSkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgb3duZXIsIHJldmVudWUpOyAgCiAgICAgICAgfWVsc2UgewogICAgICAgICAgICBfdHJhbnNmZXIob3duZXIsIG1zZy5zZW5kZXIsIGFtb3VudCk7CiAgICAgICAgICAgIFRyYW5zZmVyS08obXNnLnNlbmRlciwgdGhpcywgcmV2ZW51ZSk7CiAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24gc2V0RmVjaGFUYXgodWludCBfZmVjaGFUYXgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGZlY2hhVGF4ID0gX2ZlY2hhVGF4OwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByaWNlcyh1aW50MjU2IG5ld1NlbGxQcmljZSwgdWludDI1NiBuZXdCdXlQcmljZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgc2VsbFByaWNlID0gbmV3U2VsbFByaWNlICogMSBmaW5uZXk7CiAgICAgICAgYnV5UHJpY2UgPSBuZXdCdXlQcmljZSAqIDEgZmlubmV5OwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHsKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIGluY2x1aXJVc3VhcmlvKF90byk7CiAgICB9CgogICAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgdHJhbnNmZXIgdG8gMHgwIGFkZHJlc3MuIFVzZSBidXJuKCkgaW5zdGVhZAogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW19mcm9tXSA+PSBfdmFsdWUpOyAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlID4gYmFsYW5jZU9mW190b10pOyAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSA9IGJhbGFuY2VPZltfZnJvbV0gLSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIGJhbGFuY2VPZltfdG9dID0gYmFsYW5jZU9mW190b10gKyBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KfQ=='.
	

]
