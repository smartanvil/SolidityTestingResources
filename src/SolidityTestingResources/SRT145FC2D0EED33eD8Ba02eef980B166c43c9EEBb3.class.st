Class {
	#name : #SRT145FC2D0EED33eD8Ba02eef980B166c43c9EEBb3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT145FC2D0EED33eD8Ba02eef980B166c43c9EEBb3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuNjsKCi8qCiAqCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIFBhc3MgREFPLgogKgogKiBUaGUgTWFuYWdlciBzbWFydCBjb250cmFjdCBpcyB1c2VkIGZvciB0aGUgbWFuYWdlbWVudCBvZiBhY2NvdW50cyBhbmQgdG9rZW5zLgogKgogKiBSZWNpcGllbnQgaXMgMCBmb3IgdGhlIERhbyBhY2NvdW50IG1hbmFnZXIgYW5kIHRoZSBhZGRyZXNzIG9mCiAqIGNvbnRyYWN0b3IncyByZWNpcGllbnQgZm9yIHRoZSBjb250cmFjdG9ycydzIG1haGFnZXJzLgogKgoqLwoKLy8vIEB0aXRsZSBNYW5hZ2VyIHNtYXJ0IGNvbnRyYWN0IG9mIHRoZSBQYXNzIERlY2VudHJhbGl6ZWQgQXV0b25vbW91cyBPcmdhbmlzYXRpb24KY29udHJhY3QgUGFzc01hbmFnZXJJbnRlcmZhY2UgewoKICAgIHN0cnVjdCBwcm9wb3NhbCB7CiAgICAgICAgLy8gQW1vdW50IChpbiB3ZWkpIG9mIHRoZSBwcm9wb3NhbAogICAgICAgIHVpbnQgYW1vdW50OwogICAgICAgIC8vIEEgZGVzY3JpcHRpb24gb2YgdGhlIHByb3Bvc2FsCiAgICAgICAgc3RyaW5nIGRlc2NyaXB0aW9uOwogICAgICAgIC8vIFRoZSBoYXNoIG9mIHRoZSBwcm9wb3NhbCdzIGRvY3VtZW50CiAgICAgICAgYnl0ZXMzMiBoYXNoT2ZUaGVEb2N1bWVudDsKICAgICAgICAvLyBBIHVuaXggdGltZXN0YW1wLCBkZW5vdGluZyB0aGUgZGF0ZSB3aGVuIHRoZSBwcm9wb3NhbCB3YXMgY3JlYXRlZAogICAgICAgIHVpbnQgZGF0ZU9mUHJvcG9zYWw7CiAgICAgICAgLy8gVGhlIGluZGV4IG9mIHRoZSBsYXN0IGFwcHJvdmVkIGNsaWVudCBwcm9wb3NhbAogICAgICAgIHVpbnQgbGFzdENsaWVudFByb3Bvc2FsSUQ7CiAgICAgICAgLy8gVGhlIHN1bSBhbW91bnQgKGluIHdlaSkgb3JkZXJlZCBmb3IgdGhpcyBwcm9wb3NhbCAKICAgICAgICB1aW50IG9yZGVyQW1vdW50OwogICAgICAgIC8vIEEgdW5peCB0aW1lc3RhbXAsIGRlbm90aW5nIHRoZSBkYXRlIG9mIHRoZSBsYXN0IG9yZGVyIGZvciB0aGUgYXBwcm92ZWQgcHJvcG9zYWwKICAgICAgICB1aW50IGRhdGVPZk9yZGVyOwogICAgfQogICAgICAgIAogICAgLy8gUHJvcG9zYWxzIHRvIHdvcmsgZm9yIHRoZSBjbGllbnQKICAgIHByb3Bvc2FsW10gcHVibGljIHByb3Bvc2FsczsKCiAgICBzdHJ1Y3QgZnVuZGluZ0RhdGEgewogICAgICAgIC8vIFRydWUgaWYgcHVibGljIGZ1bmRpbmcgd2l0aG91dCBhIG1haW4gcGFydG5lcgogICAgICAgIGJvb2wgcHVibGljQ3JlYXRpb247IAogICAgICAgIC8vIFRoZSBhZGRyZXNzIHdoaWNoIHNldHMgcGFydG5lcnMgYW5kIG1hbmFnZXMgdGhlIGZ1bmRpbmcgaW4gY2FzZSBvZiBwcml2YXRlIGZ1bmRpbmcKICAgICAgICBhZGRyZXNzIG1haW5QYXJ0bmVyOwogICAgICAgIC8vIFRoZSBtYXhpbXVtIGFtb3VudCAoaW4gd2VpKSBvZiB0aGUgZnVuZGluZwogICAgICAgIHVpbnQgbWF4QW1vdW50VG9GdW5kOwogICAgICAgIC8vIFRoZSBhY3R1YWwgZnVuZGVkIGFtb3VudCAoaW4gd2VpKQogICAgICAgIHVpbnQgZnVuZGVkQW1vdW50OwogICAgICAgIC8vIEEgdW5peCB0aW1lc3RhbXAsIGRlbm90aW5nIHRoZSBzdGFydCB0aW1lIG9mIHRoZSBmdW5kaW5nCiAgICAgICAgdWludCBzdGFydFRpbWU7IAogICAgICAgIC8vIEEgdW5peCB0aW1lc3RhbXAsIGRlbm90aW5nIHRoZSBjbG9zaW5nIHRpbWUgb2YgdGhlIGZ1bmRpbmcKICAgICAgICB1aW50IGNsb3NpbmdUaW1lOyAgCiAgICAgICAgLy8gVGhlIHByaWNlIG11bHRpcGxpZXIgZm9yIGEgc2hhcmUgb3IgYSB0b2tlbiB3aXRob3V0IGNvbnNpZGVyaW5nIHRoZSBpbmZsYXRpb24gcmF0ZQogICAgICAgIHVpbnQgaW5pdGlhbFByaWNlTXVsdGlwbGllcjsKICAgICAgICAvLyBSYXRlIHBlciB5ZWFyIGluIHBlcmNlbnRhZ2UgYXBwbGllZCB0byB0aGUgc2hhcmUgb3IgdG9rZW4gcHJpY2UgCiAgICAgICAgdWludCBpbmZsYXRpb25SYXRlOyAKICAgICAgICAvLyBJbmRleCBvZiB0aGUgY2xpZW50IHByb3Bvc2FsCiAgICAgICAgdWludCBwcm9wb3NhbElEOwogICAgfSAKICAgIAogICAgLy8gUnVsZXMgZm9yIHRoZSBhY3R1YWwgZnVuZGluZyBhbmQgdGhlIGNvbnRyYWN0b3IgdG9rZW4gcHJpY2UKICAgIGZ1bmRpbmdEYXRhWzJdIHB1YmxpYyBGdW5kaW5nUnVsZXM7CgogICAgLy8gVGhlIGFkZHJlc3Mgb2YgdGhlIGxhc3QgTWFuYWdlciBiZWZvcmUgY2xvbmluZwogICAgYWRkcmVzcyBwdWJsaWMgY2xvbmVkRnJvbTsKICAgIC8vIFVuaXggZGF0ZSB3aGVuIHNoYXJlcyBhbmQgdG9rZW5zIGNhbiBiZSB0cmFuc2ZlcnJlZCBhZnRlciBjbG9uaW5nIChmb3IgdGhlIERhbyBtYW5hZ2VyKQogICAgdWludCBjbG9zaW5nVGltZUZvckNsb25pbmc7CiAgICAvLyBFbmQgZGF0ZSBvZiB0aGUgc2V0dXAgcHJvY2VkdXJlCiAgICB1aW50IHB1YmxpYyBzbWFydENvbnRyYWN0U3RhcnREYXRlOwoKICAgIC8vIEFkZHJlc3Mgb2YgdGhlIGNyZWF0b3Igb2YgdGhlIHNtYXJ0IGNvbnRyYWN0CiAgICBhZGRyZXNzIHB1YmxpYyBjcmVhdG9yOwogICAgLy8gQWRkcmVzcyBvZiB0aGUgRGFvIChmb3IgdGhlIERhbyBtYW5hZ2VyKQogICAgYWRkcmVzcyBjbGllbnQ7CiAgICAvLyBBZGRyZXNzIG9mIHRoZSByZWNpcGllbnQ7CiAgICBhZGRyZXNzIHB1YmxpYyByZWNpcGllbnQ7CiAgICAvLyBBZGRyZXNzIG9mIHRoZSBEYW8gbWFuYWdlciAoZm9yIGNvbnRyYWN0b3IgbWFuYWdlcnMpCiAgICBQYXNzTWFuYWdlciBwdWJsaWMgZGFvTWFuYWdlcjsKICAgIAogICAgLy8gVGhlIHRva2VuIG5hbWUgZm9yIGRpc3BsYXkgcHVycG9zZQogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgLy8gVGhlIHRva2VuIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIC8vIFRoZSBxdWFudGl0eSBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3NlCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7CgogICAgLy8gVHJ1ZSBpZiB0aGUgaW5pdGlhbCB0b2tlbiBzdXBwbHkgaXMgb3ZlcgogICAgYm9vbCBpbml0aWFsVG9rZW5TdXBwbHlEb25lOwogICAgCiAgICAvLyBUb3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICB1aW50MjU2IHRvdGFsVG9rZW5TdXBwbHk7CgogICAgLy8gQXJyYXkgd2l0aCBhbGwgYmFsYW5jZXMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICAvLyBBcnJheSB3aXRoIGFsbCBhbGxvd2FuY2VzCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgLy8gTWFwIG9mIHRoZSByZXN1bHQgKGluIHdlaSkgb2YgZnVuZGluZ3MKICAgIG1hcHBpbmcgKHVpbnQgPT4gdWludCkgZnVuZGVkQW1vdW50OwoKICAgIC8vIEFycmF5IG9mIHRva2VuIG9yIHNoYXJlIGhvbGRlcnMKICAgIGFkZHJlc3NbXSBob2xkZXJzOwogICAgLy8gTWFwIHdpdGggdGhlIGluZGV4ZXMgb2YgdGhlIGhvbGRlcnMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGhvbGRlcklEOwoKICAgIC8vIElmIHRydWUsIHRoZSBzaGFyZXMgb3IgdG9rZW5zIGNhbiBiZSB0cmFuc2ZlcmVkCiAgICBib29sIHB1YmxpYyB0cmFuc2ZlcmFibGU7CiAgICAvLyBNYXAgb2YgYmxvY2tlZCBEYW8gc2hhcmUgYWNjb3VudHMuIFBvaW50cyB0byB0aGUgZGF0ZSB3aGVuIHRoZSBzaGFyZSBob2xkZXIgY2FuIHRyYW5zZmVyIHNoYXJlcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYmxvY2tlZERlYWRMaW5lOyAKCiAgICAvLyBAcmV0dXJuIFRoZSBjbGllbnQgb2YgdGhpcyBtYW5hZ2VyCiAgICBmdW5jdGlvbiBDbGllbnQoKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKTsKICAgIAogICAgLy8gQHJldHVybiBUaGUgdW5peCBkYXRlIHdoZW4gc2hhcmVzIGFuZCB0b2tlbnMgY2FuIGJlIHRyYW5zZmVycmVkIGFmdGVyIGNsb25pbmcKICAgIGZ1bmN0aW9uIENsb3NpbmdUaW1lRm9yQ2xvbmluZygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogICAgCiAgICAvLy8gQHJldHVybiBUaGUgdG90YWwgc3VwcGx5IG9mIHNoYXJlcyBvciB0b2tlbnMgCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMgKHVpbnQyNTYpOwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHJldHVybiBRdWFudGl0eSBvZiByZW1haW5pbmcgdG9rZW5zIG9mIF9vd25lciB0aGF0IF9zcGVuZGVyIGlzIGFsbG93ZWQgdG8gc3BlbmQKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIC8vLyBAcGFyYW0gX3Byb3Bvc2FsSUQgVGhlIGluZGV4IG9mIHRoZSBEYW8gcHJvcG9zYWwKICAgIC8vLyBAcmV0dXJuIFRoZSByZXN1bHQgKGluIHdlaSkgb2YgdGhlIGZ1bmRpbmcKICAgIGZ1bmN0aW9uIEZ1bmRlZEFtb3VudCh1aW50IF9wcm9wb3NhbElEKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zICh1aW50KTsKCiAgICAvLy8gQHBhcmFtIF9zYWxlRGF0ZSBpbiBjYXNlIG9mIHByZXNhbGUsIHRoZSBkYXRlIG9mIHRoZSBwcmVzYWxlCiAgICAvLy8gQHJldHVybiB0aGUgc2hhcmUgb3IgdG9rZW4gcHJpY2UgZGl2aXNvciBjb25kaWRlcmluZyB0aGUgc2FsZSBkYXRlIGFuZCB0aGUgaW5mbGF0aW9uIHJhdGUKICAgIGZ1bmN0aW9uIHByaWNlRGl2aXNvcih1aW50IF9zYWxlRGF0ZSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludCk7CiAgICAKICAgIC8vLyBAcmV0dXJuIHRoZSBhY3R1YWwgcHJpY2UgZGl2aXNvciBvZiBhIHNoYXJlIG9yIHRva2VuCiAgICBmdW5jdGlvbiBhY3R1YWxQcmljZURpdmlzb3IoKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zICh1aW50KTsKCiAgICAvLy8gQHJldHVybiBUaGUgbWF4aW1hbCBhbW91bnQgYSBtYWluIHBhcnRuZXIgY2FuIGZ1bmQgYXQgdGhpcyBtb21lbnQKICAgIC8vLyBAcGFyYW0gX21haW5QYXJ0bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBtYWluIHBhcm5lcgogICAgZnVuY3Rpb24gZnVuZGluZ01heEFtb3VudChhZGRyZXNzIF9tYWluUGFydG5lcikgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAodWludCk7CiAgICAKICAgIC8vLyBAcmV0dXJuIFRoZSBudW1iZXIgb2Ygc2hhcmUgb3IgdG9rZW4gaG9sZGVycyAKICAgIGZ1bmN0aW9uIG51bWJlck9mSG9sZGVycygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKICAgIC8vLyBAcGFyYW0gX2luZGV4IFRoZSBpbmRleCBvZiB0aGUgaG9sZGVyCiAgICAvLy8gQHJldHVybiB0aGUgYWRkcmVzcyBvZiB0aGUgYW4gaG9sZGVyCiAgICBmdW5jdGlvbiBIb2xkZXJBZGRyZXNzKHVpbnQgX2luZGV4KSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKTsKCiAgICAvLy8gQHJldHVybiBUaGUgbnVtYmVyIG9mIERhbyBydWxlcyBwcm9wb3NhbHMgICAgIAogICAgZnVuY3Rpb24gbnVtYmVyT2ZQcm9wb3NhbHMoKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICAgIAogICAgLy8vIEBkZXYgVGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uCiAgICAvLy8gQHBhcmFtIF9jbGllbnQgVGhlIGFkZHJlc3Mgb2YgdGhlIERhbwogICAgLy8vIEBwYXJhbSBfZGFvTWFuYWdlciBUaGUgYWRkcmVzcyBvZiB0aGUgRGFvIG1hbmFnZXIgKGZvciBjb250cmFjdG9yIG1hbmFnZXJzKQogICAgLy8vIEBwYXJhbSBfcmVjaXBpZW50IFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQuIDAgZm9yIHRoZSBEYW8KICAgIC8vLyBAcGFyYW0gX2Nsb25lZEZyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIGxhc3QgTWFuYWdlciBiZWZvcmUgY2xvbmluZwogICAgLy8vIEBwYXJhbSBfdG9rZW5OYW1lIFRoZSB0b2tlbiBuYW1lIGZvciBkaXNwbGF5IHB1cnBvc2UKICAgIC8vLyBAcGFyYW0gX3Rva2VuU3ltYm9sIFRoZSB0b2tlbiBzeW1ib2wgZm9yIGRpc3BsYXkgcHVycG9zZQogICAgLy8vIEBwYXJhbSBfdG9rZW5EZWNpbWFscyBUaGUgcXVhbnRpdHkgb2YgZGVjaW1hbHMgZm9yIGRpc3BsYXkgcHVycG9zZQogICAgLy8vIEBwYXJhbSBfdHJhbnNmZXJhYmxlIFRydWUgaWYgYWxsb3dzIHRoZSB0cmFuc2ZlciBvZiB0b2tlbnMKICAgIC8vZnVuY3Rpb24gUGFzc01hbmFnZXIoCiAgICAvLyAgICBhZGRyZXNzIF9jbGllbnQsCiAgICAvLyAgICBhZGRyZXNzIF9kYW9NYW5hZ2VyLAogICAgLy8gICAgYWRkcmVzcyBfcmVjaXBpZW50LAogICAgLy8gICAgYWRkcmVzcyBfY2xvbmVkRnJvbSwKICAgIC8vICAgIHN0cmluZyBfdG9rZW5OYW1lLAogICAgLy8gICAgc3RyaW5nIF90b2tlblN5bWJvbCwKICAgIC8vICAgIHVpbnQ4IF90b2tlbkRlY2ltYWxzLAogICAgLy8gICAgYm9vbCBfdHJhbnNmZXJhYmxlKTsKICAgIAogICAgLy8vIEBkZXYgRnVuY3Rpb24gdG8gY3JlYXRlIGluaXRpYWwgdG9rZW5zICAgIAogICAgLy8vIEBwYXJhbSBfcmVjaXBpZW50IFRoZSBiZW5lZmljaWFyeSBvZiB0aGUgY3JlYXRlZCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3F1YW50aXR5IFRoZSBxdWFudGl0eSBvZiB0b2tlbnMgdG8gY3JlYXRlICAgIAogICAgLy8vIEBwYXJhbSBfbGFzdCBUcnVlIGlmIHRoZSBpbml0aWFsIHRva2VuIHN1cHB5IGlzIG92ZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGZ1bmN0aW9uIHdhcyBzdWNjZXNzZnVsIG9yIG5vdCAgICAgCiAgICBmdW5jdGlvbiBpbml0aWFsVG9rZW5TdXBwbHkoCiAgICAgICAgYWRkcmVzcyBfcmVjaXBpZW50LCAKICAgICAgICB1aW50IF9xdWFudGl0eSwKICAgICAgICBib29sIF9sYXN0KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgICAgIAogICAgLy8vIEBub3RpY2UgRnVuY3Rpb24gdG8gY2xvbmUgYSBwcm9wb3NhbCBmcm9tIHRoZSBsYXN0IG1hbmFnZXIKICAgIC8vLyBAcGFyYW0gX2Ftb3VudCBBbW91bnQgKGluIHdlaSkgb2YgdGhlIHByb3Bvc2FsCiAgICAvLy8gQHBhcmFtIF9kZXNjcmlwdGlvbiBBIGRlc2NyaXB0aW9uIG9mIHRoZSBwcm9wb3NhbAogICAgLy8vIEBwYXJhbSBfaGFzaE9mVGhlRG9jdW1lbnQgVGhlIGhhc2ggb2YgdGhlIHByb3Bvc2FsJ3MgZG9jdW1lbnQKICAgIC8vLyBAcGFyYW0gX2RhdGVPZlByb3Bvc2FsIEEgdW5peCB0aW1lc3RhbXAsIGRlbm90aW5nIHRoZSBkYXRlIHdoZW4gdGhlIHByb3Bvc2FsIHdhcyBjcmVhdGVkCiAgICAvLy8gQHBhcmFtIF9sYXN0Q2xpZW50UHJvcG9zYWxJRCBUaGUgaW5kZXggb2YgdGhlIGxhc3QgYXBwcm92ZWQgY2xpZW50IHByb3Bvc2FsCiAgICAvLy8gQHBhcmFtIF9vcmRlckFtb3VudCBUaGUgc3VtIGFtb3VudCAoaW4gd2VpKSBvcmRlcmVkIGZvciB0aGlzIHByb3Bvc2FsIAogICAgLy8vIEBwYXJhbSBfZGF0ZU9mT3JkZXIgQSB1bml4IHRpbWVzdGFtcCwgZGVub3RpbmcgdGhlIGRhdGUgb2YgdGhlIGxhc3Qgb3JkZXIgZm9yIHRoZSBhcHByb3ZlZCBwcm9wb3NhbAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgZnVuY3Rpb24gd2FzIHN1Y2Nlc3NmdWwgb3Igbm90IAogICAgZnVuY3Rpb24gY2xvbmVQcm9wb3NhbCgKICAgICAgICB1aW50IF9hbW91bnQsCiAgICAgICAgc3RyaW5nIF9kZXNjcmlwdGlvbiwKICAgICAgICBieXRlczMyIF9oYXNoT2ZUaGVEb2N1bWVudCwKICAgICAgICB1aW50IF9kYXRlT2ZQcm9wb3NhbCwKICAgICAgICB1aW50IF9sYXN0Q2xpZW50UHJvcG9zYWxJRCwKICAgICAgICB1aW50IF9vcmRlckFtb3VudCwKICAgICAgICB1aW50IF9kYXRlT2ZPcmRlcikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIAogICAgLy8vIEBub3RpY2UgRnVuY3Rpb24gdG8gY2xvbmUgdG9rZW5zIGZyb20gYSBtYW5hZ2VyCiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBpbmRleCBvZiB0aGUgZmlyc3QgaG9sZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgaW5kZXggb2YgdGhlIGxhc3QgaG9sZGVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBmdW5jdGlvbiB3YXMgc3VjY2Vzc2Z1bCBvciBub3QgCiAgICBmdW5jdGlvbiBjbG9uZVRva2VucygKICAgICAgICB1aW50IF9mcm9tLAogICAgICAgIHVpbnQgX3RvKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0byBjbG9zZSB0aGUgc2V0dXAgcHJvY2VkdXJlIG9mIHRoaXMgY29udHJhY3QKICAgIGZ1bmN0aW9uIGNsb3NlU2V0dXAoKTsKCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0byB1cGRhdGUgdGhlIHJlY2lwZW50IGFkZHJlc3MKICAgIC8vLyBAcGFyYW0gX25ld1JlY2lwaWVudCBUaGUgYWRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIGZ1bmN0aW9uIHVwZGF0ZVJlY2lwaWVudChhZGRyZXNzIF9uZXdSZWNpcGllbnQpOwoKICAgIC8vLyBAbm90aWNlIEZ1bmN0aW9uIHRvIHJlY2VpdmUgcGF5bWVudHMgb3IgZGVwb3NpdHMKICAgIGZ1bmN0aW9uICgpIHBheWFibGU7CiAgICAKICAgIC8vLyBAbm90aWNlIEZ1bmN0aW9uIHRvIGFsbG93IGNvbnRyYWN0b3JzIHRvIHdpdGhkcmF3IGV0aGVycwogICAgLy8vIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgKGluIHdlaSkgdG8gd2l0aGRyYXcKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KHVpbnQgX2Ftb3VudCk7CgogICAgLy8vIEBub3RpY2UgRnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBjbGllbnQgYWRkcmVzcwogICAgZnVuY3Rpb24gdXBkYXRlQ2xpZW50KGFkZHJlc3MgX25ld0NsaWVudCk7CiAgICAKICAgIC8vLyBAbm90aWNlIEZ1bmN0aW9uIHRvIG1ha2UgYSBwcm9wb3NhbCB0byB3b3JrIGZvciB0aGUgY2xpZW50CiAgICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCAoaW4gd2VpKSBvZiB0aGUgcHJvcG9zYWwKICAgIC8vLyBAcGFyYW0gX2Rlc2NyaXB0aW9uIFN0cmluZyBkZXNjcmliaW5nIHRoZSBwcm9wb3NhbAogICAgLy8vIEBwYXJhbSBfaGFzaE9mVGhlRG9jdW1lbnQgVGhlIGhhc2ggb2YgdGhlIHByb3Bvc2FsIGRvY3VtZW50CiAgICAvLy8gQHJldHVybiBUaGUgaW5kZXggb2YgdGhlIGNvbnRyYWN0b3IgcHJvcG9zYWwKICAgIGZ1bmN0aW9uIG5ld1Byb3Bvc2FsKAogICAgICAgIHVpbnQgX2Ftb3VudCwKICAgICAgICBzdHJpbmcgX2Rlc2NyaXB0aW9uLCAKICAgICAgICBieXRlczMyIF9oYXNoT2ZUaGVEb2N1bWVudAogICAgKSByZXR1cm5zICh1aW50KTsKICAgICAgICAKICAgIC8vLyBAbm90aWNlIEZ1bmN0aW9uIHVzZWQgYnkgdGhlIGNsaWVudCB0byBvcmRlciBhY2NvcmRpbmcgdG8gdGhlIGNvbnRyYWN0b3IgcHJvcG9zYWwKICAgIC8vLyBAcGFyYW0gX2NsaWVudFByb3Bvc2FsSUQgVGhlIGluZGV4IG9mIHRoZSBsYXN0IGFwcHJvdmVkIGNsaWVudCBwcm9wb3NhbAogICAgLy8vIEBwYXJhbSBfcHJvcG9zYWxJRCBUaGUgaW5kZXggb2YgdGhlIGNvbnRyYWN0b3IgcHJvcG9zYWwKICAgIC8vLyBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IChpbiB3ZWkpIG9mIHRoZSBvcmRlcgogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgb3JkZXIgd2FzIG1hZGUgb3Igbm90CiAgICBmdW5jdGlvbiBvcmRlcigKICAgICAgICB1aW50IF9jbGllbnRQcm9wb3NhbElELAogICAgICAgIHVpbnQgX3Byb3Bvc2FsSUQsCiAgICAgICAgdWludCBfYW1vdW50CiAgICApIGV4dGVybmFsIHJldHVybnMgKGJvb2wpIDsKICAgIAogICAgLy8vIEBub3RpY2UgRnVuY3Rpb24gdXNlZCBieSB0aGUgY2xpZW50IHRvIHNlbmQgZXRoZXJzIGZyb20gdGhlIERhbyBtYW5hZ2VyCiAgICAvLy8gQHBhcmFtIF9yZWNpcGllbnQgVGhlIGFkZHJlc3MgdG8gc2VuZCB0bwogICAgLy8vIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgKGluIHdlaSkgdG8gc2VuZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiBzZW5kVG8oCiAgICAgICAgYWRkcmVzcyBfcmVjaXBpZW50LCAKICAgICAgICB1aW50IF9hbW91bnQKICAgICkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCk7CiAgICAKICAgIC8vLyBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGFkZCBhIG5ldyB0b2tlbiBvciBzaGFyZSBob2xkZXIKICAgIC8vLyBAcGFyYW0gX2hvbGRlciBUaGUgYWRkcmVzcyBvZiB0aGUgdG9rZW4gb3Igc2hhcmUgaG9sZGVyCiAgICBmdW5jdGlvbiBhZGRIb2xkZXIoYWRkcmVzcyBfaG9sZGVyKSBpbnRlcm5hbDsKICAgIAogICAgLy8vIEBkZXYgSW50ZXJuYWwgZnVuY3Rpb24gdG8gY3JlYXRlIGluaXRpYWwgdG9rZW5zICAgIAogICAgLy8vIEBwYXJhbSBfaG9sZGVyIFRoZSBiZW5lZmljaWFyeSBvZiB0aGUgY3JlYXRlZCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3F1YW50aXR5IFRoZSBxdWFudGl0eSBvZiB0b2tlbnMgdG8gY3JlYXRlCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBmdW5jdGlvbiB3YXMgc3VjY2Vzc2Z1bCBvciBub3QgCiAgICBmdW5jdGlvbiBjcmVhdGVJbml0aWFsVG9rZW5zKGFkZHJlc3MgX2hvbGRlciwgdWludCBfcXVhbnRpdHkpIGludGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2VzcykgOwogICAgCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0aGF0IGFsbG93IHRoZSBjb250cmFjdG9yIHRvIHByb3Bvc2UgYSB0b2tlbiBwcmljZQogICAgLy8vIEBwYXJhbSBfaW5pdGlhbFByaWNlTXVsdGlwbGllciBUaGUgaW5pdGlhbCBwcmljZSBtdWx0aXBsaWVyIG9mIGNvbnRyYWN0b3IgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9pbmZsYXRpb25SYXRlIElmIDAsIHRoZSBjb250cmFjdG9yIHRva2VuIHByaWNlIGRvZXNuJ3QgY2hhbmdlIGR1cmluZyB0aGUgZnVuZGluZwogICAgLy8vIEBwYXJhbSBfY2xvc2luZ1RpbWUgVGhlIGluaXRpYWwgcHJpY2UgYW5kIGluZmxhdGlvbiByYXRlIGNhbiBiZSBjaGFuZ2VkIGFmdGVyIHRoaXMgZGF0ZQogICAgZnVuY3Rpb24gc2V0VG9rZW5QcmljZVByb3Bvc2FsKCAgICAgICAgCiAgICAgICAgdWludCBfaW5pdGlhbFByaWNlTXVsdGlwbGllciwgCiAgICAgICAgdWludCBfaW5mbGF0aW9uUmF0ZSwKICAgICAgICB1aW50IF9jbG9zaW5nVGltZQogICAgKTsKCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0byBzZXQgYSBmdW5kaW5nLiBDYW4gYmUgcHJpdmF0ZSBvciBwdWJsaWMKICAgIC8vLyBAcGFyYW0gX21haW5QYXJ0bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBzbWFydCBjb250cmFjdCB0byBtYW5hZ2UgYSBwcml2YXRlIGZ1bmRpbmcKICAgIC8vLyBAcGFyYW0gX3B1YmxpY0NyZWF0aW9uIFRydWUgaWYgcHVibGljIGZ1bmRpbmcKICAgIC8vLyBAcGFyYW0gX2luaXRpYWxQcmljZU11bHRpcGxpZXIgUHJpY2UgbXVsdGlwbGllciB3aXRob3V0IGNvbnNpZGVyaW5nIGFueSBpbmZsYXRpb24gcmF0ZQogICAgLy8vIEBwYXJhbSBfbWF4QW1vdW50VG9GdW5kIFRoZSBtYXhpbXVtIGFtb3VudCAoaW4gd2VpKSBvZiB0aGUgZnVuZGluZwogICAgLy8vIEBwYXJhbSBfbWludXRlc0Z1bmRpbmdQZXJpb2QgUGVyaW9kIGluIG1pbnV0ZXMgb2YgdGhlIGZ1bmRpbmcKICAgIC8vLyBAcGFyYW0gX2luZmxhdGlvblJhdGUgSWYgMCwgdGhlIHRva2VuIHByaWNlIGRvZXNuJ3QgY2hhbmdlIGR1cmluZyB0aGUgZnVuZGluZwogICAgLy8vIEBwYXJhbSBfcHJvcG9zYWxJRCBJbmRleCBvZiB0aGUgY2xpZW50IHByb3Bvc2FsIChub3QgbWFuZGF0b3J5KQogICAgZnVuY3Rpb24gc2V0RnVuZGluZ1J1bGVzKAogICAgICAgIGFkZHJlc3MgX21haW5QYXJ0bmVyLAogICAgICAgIGJvb2wgX3B1YmxpY0NyZWF0aW9uLCAKICAgICAgICB1aW50IF9pbml0aWFsUHJpY2VNdWx0aXBsaWVyLCAKICAgICAgICB1aW50IF9tYXhBbW91bnRUb0Z1bmQsIAogICAgICAgIHVpbnQgX21pbnV0ZXNGdW5kaW5nUGVyaW9kLCAKICAgICAgICB1aW50IF9pbmZsYXRpb25SYXRlLAogICAgICAgIHVpbnQgX3Byb3Bvc2FsSUQKICAgICkgZXh0ZXJuYWw7CiAgICAKICAgIC8vLyBAZGV2IEludGVybmFsIGZ1bmN0aW9uIGZvciB0aGUgY3JlYXRpb24gb2Ygc2hhcmVzIG9yIHRva2VucwogICAgLy8vIEBwYXJhbSBfcmVjaXBpZW50IFRoZSByZWNpcGllbnQgYWRkcmVzcyBvZiBzaGFyZXMgb3IgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIGZ1bmRlZCBhbW91bnQgKGluIHdlaSkKICAgIC8vLyBAcGFyYW0gX3NhbGVEYXRlIEluIGNhc2Ugb2YgcHJlc2FsZSwgdGhlIGRhdGUgb2YgdGhlIHByZXNhbGUKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGNyZWF0aW9uIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gY3JlYXRlVG9rZW4oCiAgICAgICAgYWRkcmVzcyBfcmVjaXBpZW50LCAKICAgICAgICB1aW50IF9hbW91bnQsCiAgICAgICAgdWludCBfc2FsZURhdGUKICAgICkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB1c2VkIGJ5IHRoZSBtYWluIHBhcnRuZXIgdG8gc2V0IHRoZSBzdGFydCB0aW1lIG9mIHRoZSBmdW5kaW5nCiAgICAvLy8gQHBhcmFtIF9zdGFydFRpbWUgVGhlIHVuaXggc3RhcnQgZGF0ZSBvZiB0aGUgZnVuZGluZyAKICAgIGZ1bmN0aW9uIHNldEZ1bmRpbmdTdGFydFRpbWUodWludCBfc3RhcnRUaW1lKSBleHRlcm5hbDsKCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB1c2VkIGJ5IHRoZSBtYWluIHBhcnRuZXIgdG8gcmV3YXJkIHNoYXJlcyBvciB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3JlY2lwaWVudCBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50IG9mIHNoYXJlcyBvciB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IChpbiBXZWkpIHRvIGNhbGN1bGF0ZSB0aGUgcXVhbnRpdHkgb2Ygc2hhcmVzIG9yIHRva2VucyB0byBjcmVhdGUKICAgIC8vLyBAcGFyYW0gX2RhdGUgVGhlIHVuaXggZGF0ZSB0byBjb25zaWRlciBmb3IgdGhlIHNoYXJlIG9yIHRva2VuIHByaWNlIGNhbGN1bGF0aW9uCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHJld2FyZFRva2VuKAogICAgICAgIGFkZHJlc3MgX3JlY2lwaWVudCwgCiAgICAgICAgdWludCBfYW1vdW50LAogICAgICAgIHVpbnQgX2RhdGUKICAgICAgICApIGV4dGVybmFsOwoKICAgIC8vLyBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGNsb3NlIHRoZSBhY3R1YWwgZnVuZGluZwogICAgZnVuY3Rpb24gY2xvc2VGdW5kaW5nKCkgaW50ZXJuYWw7CiAgICAKICAgIC8vLyBAbm90aWNlIEZ1bmN0aW9uIHVzZWQgYnkgdGhlIG1haW4gcGFydG5lciB0byBzZXQgdGhlIGZ1bmRpbmcgZnVlbGVkCiAgICBmdW5jdGlvbiBzZXRGdW5kaW5nRnVlbGVkKCkgZXh0ZXJuYWw7CgogICAgLy8vIEBub3RpY2UgRnVuY3Rpb24gdG8gYWJsZSB0aGUgdHJhbnNmZXIgb2YgRGFvIHNoYXJlcyBvciBjb250cmFjdG9yIHRva2VucwogICAgZnVuY3Rpb24gYWJsZVRyYW5zZmVyKCk7CgogICAgLy8vIEBub3RpY2UgRnVuY3Rpb24gdG8gZGlzYWJsZSB0aGUgdHJhbnNmZXIgb2YgRGFvIHNoYXJlcwogICAgLy8vIEBwYXJhbSBfY2xvc2luZ1RpbWUgRGF0ZSB3aGVuIHNoYXJlcyBvciB0b2tlbnMgY2FuIGJlIHRyYW5zZmVycmVkCiAgICBmdW5jdGlvbiBkaXNhYmxlVHJhbnNmZXIodWludCBfY2xvc2luZ1RpbWUpOwoKICAgIC8vLyBAbm90aWNlIEZ1bmN0aW9uIHVzZWQgYnkgdGhlIGNsaWVudCB0byBibG9jayB0aGUgdHJhbnNmZXIgb2Ygc2hhcmVzIGZyb20gYW5kIHRvIGEgc2hhcmUgaG9sZGVyCiAgICAvLy8gQHBhcmFtIF9zaGFyZUhvbGRlciBUaGUgYWRkcmVzcyBvZiB0aGUgc2hhcmUgaG9sZGVyCiAgICAvLy8gQHBhcmFtIF9kZWFkTGluZSBXaGVuIHRoZSBhY2NvdW50IHdpbGwgYmUgdW5ibG9ja2VkCiAgICBmdW5jdGlvbiBibG9ja1RyYW5zZmVyKGFkZHJlc3MgX3NoYXJlSG9sZGVyLCB1aW50IF9kZWFkTGluZSkgZXh0ZXJuYWw7CgogICAgLy8vIEBub3RpY2UgRnVuY3Rpb24gdG8gYnV5IERhbyBzaGFyZXMgYWNjb3JkaW5nIHRvIHRoZSBmdW5kaW5nIHJ1bGVzIAogICAgLy8vIHdpdGggYG1zZy5zZW5kZXJgIGFzIHRoZSBiZW5lZmljaWFyeQogICAgZnVuY3Rpb24gYnV5U2hhcmVzKCkgcGF5YWJsZTsKICAgIAogICAgLy8vIEBub3RpY2UgRnVuY3Rpb24gdG8gYnV5IERhbyBzaGFyZXMgYWNjb3JkaW5nIHRvIHRoZSBmdW5kaW5nIHJ1bGVzIAogICAgLy8vIEBwYXJhbSBfcmVjaXBpZW50IFRoZSBiZW5lZmljaWFyeSBvZiB0aGUgY3JlYXRlZCBzaGFyZXMKICAgIGZ1bmN0aW9uIGJ1eVNoYXJlc0ZvcihhZGRyZXNzIF9yZWNpcGllbnQpIHBheWFibGU7CiAgICAKICAgIC8vLyBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX0Zyb21gCiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBxdWFudGl0eSBvZiBzaGFyZXMgb3IgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBmdW5jdGlvbiB3YXMgc3VjY2Vzc2Z1bCBvciBub3QgCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb21UbygKICAgICAgICBhZGRyZXNzIF9mcm9tLAogICAgICAgIGFkZHJlc3MgX3RvLCAKICAgICAgICB1aW50MjU2IF92YWx1ZQogICAgICAgICkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgcXVhbnRpdHkgb2Ygc2hhcmVzIG9yIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgZnVuY3Rpb24gd2FzIHN1Y2Nlc3NmdWwgb3Igbm90IAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgcXVhbnRpdHkgb2Ygc2hhcmVzIG9yIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKAogICAgICAgIGFkZHJlc3MgX2Zyb20sIAogICAgICAgIGFkZHJlc3MgX3RvLCAKICAgICAgICB1aW50MjU2IF92YWx1ZQogICAgICAgICkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX2Ftb3VudGAgdG9rZW5zIG9uIGl0cyBiZWhhbGYKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICBldmVudCBGZWVzUmVjZWl2ZWQoYWRkcmVzcyBpbmRleGVkIEZyb20sIHVpbnQgQW1vdW50KTsKICAgIGV2ZW50IEFtb3VudFJlY2VpdmVkKGFkZHJlc3MgaW5kZXhlZCBGcm9tLCB1aW50IEFtb3VudCk7CiAgICBldmVudCBwYXltZW50UmVjZWl2ZWQoYWRkcmVzcyBpbmRleGVkIGRhb01hbmFnZXIsIHVpbnQgQW1vdW50KTsKICAgIGV2ZW50IFByb3Bvc2FsQ2xvbmVkKHVpbnQgaW5kZXhlZCBMYXN0Q2xpZW50UHJvcG9zYWxJRCwgdWludCBpbmRleGVkIFByb3Bvc2FsSUQsIHVpbnQgQW1vdW50LCBzdHJpbmcgRGVzY3JpcHRpb24sIGJ5dGVzMzIgSGFzaE9mVGhlRG9jdW1lbnQpOwogICAgZXZlbnQgQ2xpZW50VXBkYXRlZChhZGRyZXNzIExhc3RDbGllbnQsIGFkZHJlc3MgTmV3Q2xpZW50KTsKICAgIGV2ZW50IFJlY2lwaWVudFVwZGF0ZWQoYWRkcmVzcyBMYXN0UmVjaXBpZW50LCBhZGRyZXNzIE5ld1JlY2lwaWVudCk7CiAgICBldmVudCBQcm9wb3NhbEFkZGVkKHVpbnQgaW5kZXhlZCBQcm9wb3NhbElELCB1aW50IEFtb3VudCwgc3RyaW5nIERlc2NyaXB0aW9uLCBieXRlczMyIEhhc2hPZlRoZURvY3VtZW50KTsKICAgIGV2ZW50IE9yZGVyKHVpbnQgaW5kZXhlZCBjbGllbnRQcm9wb3NhbElELCB1aW50IGluZGV4ZWQgUHJvcG9zYWxJRCwgdWludCBBbW91bnQpOwogICAgZXZlbnQgV2l0aGRhd2FsKGFkZHJlc3MgaW5kZXhlZCBSZWNpcGllbnQsIHVpbnQgQW1vdW50KTsKICAgIGV2ZW50IFRva2VuUHJpY2VQcm9wb3NhbFNldCh1aW50IEluaXRpYWxQcmljZU11bHRpcGxpZXIsIHVpbnQgSW5mbGF0aW9uUmF0ZSwgdWludCBDbG9zaW5nVGltZSk7CiAgICBldmVudCBob2xkZXJBZGRlZCh1aW50IEluZGV4LCBhZGRyZXNzIEhvbGRlcik7CiAgICBldmVudCBUb2tlbnNDcmVhdGVkKGFkZHJlc3MgaW5kZXhlZCBTZW5kZXIsIGFkZHJlc3MgaW5kZXhlZCBUb2tlbkhvbGRlciwgdWludCBRdWFudGl0eSk7CiAgICBldmVudCBGdW5kaW5nUnVsZXNTZXQoYWRkcmVzcyBpbmRleGVkIE1haW5QYXJ0bmVyLCB1aW50IGluZGV4ZWQgRnVuZGluZ1Byb3Bvc2FsSWQsIHVpbnQgaW5kZXhlZCBTdGFydFRpbWUsIHVpbnQgQ2xvc2luZ1RpbWUpOwogICAgZXZlbnQgRnVuZGluZ0Z1ZWxlZCh1aW50IGluZGV4ZWQgRnVuZGluZ1Byb3Bvc2FsSUQsIHVpbnQgRnVuZGVkQW1vdW50KTsKICAgIGV2ZW50IFRyYW5zZmVyQWJsZSgpOwogICAgZXZlbnQgVHJhbnNmZXJEaXNhYmxlKHVpbnQgY2xvc2luZ1RpbWUpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKCgp9ICAgIAoKY29udHJhY3QgUGFzc01hbmFnZXIgaXMgUGFzc01hbmFnZXJJbnRlcmZhY2UgewoKLy8gQ29uc3RhbnQgZnVuY3Rpb25zCgogICAgZnVuY3Rpb24gQ2xpZW50KCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIGlmIChyZWNpcGllbnQgPT0gMCkgcmV0dXJuIGNsaWVudDsKICAgICAgICBlbHNlIHJldHVybiBkYW9NYW5hZ2VyLkNsaWVudCgpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBDbG9zaW5nVGltZUZvckNsb25pbmcoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKHJlY2lwaWVudCA9PSAwKSByZXR1cm4gY2xvc2luZ1RpbWVGb3JDbG9uaW5nOwogICAgICAgIGVsc2UgcmV0dXJuIGRhb01hbmFnZXIuQ2xvc2luZ1RpbWVGb3JDbG9uaW5nKCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiB0b3RhbFRva2VuU3VwcGx5OwogICAgfQoKICAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgZnVuY3Rpb24gRnVuZGVkQW1vdW50KHVpbnQgX3Byb3Bvc2FsSUQpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gZnVuZGVkQW1vdW50W19wcm9wb3NhbElEXTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmljZURpdmlzb3IodWludCBfc2FsZURhdGUpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IF9kYXRlID0gX3NhbGVEYXRlOwogICAgICAgIAogICAgICAgIGlmIChfc2FsZURhdGUgPiBGdW5kaW5nUnVsZXNbMF0uY2xvc2luZ1RpbWUpIF9kYXRlID0gRnVuZGluZ1J1bGVzWzBdLmNsb3NpbmdUaW1lOwogICAgICAgIGlmIChfc2FsZURhdGUgPCBGdW5kaW5nUnVsZXNbMF0uc3RhcnRUaW1lKSBfZGF0ZSA9IEZ1bmRpbmdSdWxlc1swXS5zdGFydFRpbWU7CgogICAgICAgIHJldHVybiAxMDAgKyAxMDAqRnVuZGluZ1J1bGVzWzBdLmluZmxhdGlvblJhdGUqKF9kYXRlIC0gRnVuZGluZ1J1bGVzWzBdLnN0YXJ0VGltZSkvKDEwMCozNjUgZGF5cyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFjdHVhbFByaWNlRGl2aXNvcigpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcHJpY2VEaXZpc29yKG5vdyk7CiAgICB9CgogICAgZnVuY3Rpb24gZnVuZGluZ01heEFtb3VudChhZGRyZXNzIF9tYWluUGFydG5lcikgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIAogICAgICAgIGlmIChub3cgPiBGdW5kaW5nUnVsZXNbMF0uY2xvc2luZ1RpbWUKICAgICAgICAgICAgfHwgbm93IDwgRnVuZGluZ1J1bGVzWzBdLnN0YXJ0VGltZQogICAgICAgICAgICB8fCBfbWFpblBhcnRuZXIgIT0gRnVuZGluZ1J1bGVzWzBdLm1haW5QYXJ0bmVyKSB7CiAgICAgICAgICAgIHJldHVybiAwOyAgIAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBGdW5kaW5nUnVsZXNbMF0ubWF4QW1vdW50VG9GdW5kOwogICAgICAgIH0KICAgICAgICAKICAgIH0KCiAgICBmdW5jdGlvbiBudW1iZXJPZkhvbGRlcnMoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGhvbGRlcnMubGVuZ3RoIC0gMTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gSG9sZGVyQWRkcmVzcyh1aW50IF9pbmRleCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBob2xkZXJzW19pbmRleF07CiAgICB9CgogICAgZnVuY3Rpb24gbnVtYmVyT2ZQcm9wb3NhbHMoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHByb3Bvc2Fscy5sZW5ndGggLSAxOwogICAgfQoKLy8gTW9kaWZpZXJzCgogICAgLy8gTW9kaWZpZXIgdGhhdCBhbGxvd3Mgb25seSB0aGUgY2xpZW50IHRvIG1hbmFnZSB0aGlzIGFjY291bnQgbWFuYWdlcgogICAgbW9kaWZpZXIgb25seUNsaWVudCB7aWYgKG1zZy5zZW5kZXIgIT0gQ2xpZW50KCkpIHRocm93OyBfO30KICAgIAogICAgLy8gTW9kaWZpZXIgdGhhdCBhbGxvd3Mgb25seSB0aGUgbWFpbiBwYXJ0bmVyIHRvIG1hbmFnZSB0aGUgYWN0dWFsIGZ1bmRpbmcKICAgIG1vZGlmaWVyIG9ubHlNYWluUGFydG5lciB7aWYgKG1zZy5zZW5kZXIgIT0gIEZ1bmRpbmdSdWxlc1swXS5tYWluUGFydG5lcikgdGhyb3c7IF87fQogICAgCiAgICAvLyBNb2RpZmllciB0aGF0IGFsbG93cyBvbmx5IHRoZSBjb250cmFjdG9yIHByb3Bvc2Ugc2V0IHRoZSB0b2tlbiBwcmljZSBvciB3aXRoZHJhdwogICAgbW9kaWZpZXIgb25seUNvbnRyYWN0b3Ige2lmIChyZWNpcGllbnQgPT0gMCB8fCAobXNnLnNlbmRlciAhPSByZWNpcGllbnQgJiYgbXNnLnNlbmRlciAhPSBjcmVhdG9yKSkgdGhyb3c7IF87fQogICAgCiAgICAvLyBNb2RpZmllciBmb3IgRGFvIGZ1bmN0aW9ucwogICAgbW9kaWZpZXIgb25seURhbyB7aWYgKHJlY2lwaWVudCAhPSAwKSB0aHJvdzsgXzt9CiAgICAKLy8gQ29uc3RydWN0b3IgZnVuY3Rpb24KCiAgICBmdW5jdGlvbiBQYXNzTWFuYWdlcigKICAgICAgICBhZGRyZXNzIF9jbGllbnQsCiAgICAgICAgYWRkcmVzcyBfZGFvTWFuYWdlciwKICAgICAgICBhZGRyZXNzIF9yZWNpcGllbnQsCiAgICAgICAgYWRkcmVzcyBfY2xvbmVkRnJvbSwKICAgICAgICBzdHJpbmcgX3Rva2VuTmFtZSwKICAgICAgICBzdHJpbmcgX3Rva2VuU3ltYm9sLAogICAgICAgIHVpbnQ4IF90b2tlbkRlY2ltYWxzLAogICAgICAgIGJvb2wgX3RyYW5zZmVyYWJsZQogICAgKSB7CgogICAgICAgIGlmICgoX3JlY2lwaWVudCA9PSAwICYmIF9jbGllbnQgPT0gMCkKICAgICAgICAgICAgfHwgX2NsaWVudCA9PSBfcmVjaXBpZW50KSB0aHJvdzsKCiAgICAgICAgY3JlYXRvciA9IG1zZy5zZW5kZXI7IAogICAgICAgIGNsaWVudCA9IF9jbGllbnQ7CiAgICAgICAgcmVjaXBpZW50ID0gX3JlY2lwaWVudDsKICAgICAgICAKICAgICAgICBpZiAoX3JlY2lwaWVudCAhPTApIGRhb01hbmFnZXIgPSBQYXNzTWFuYWdlcihfZGFvTWFuYWdlcik7CgogICAgICAgIGNsb25lZEZyb20gPSBfY2xvbmVkRnJvbTsgICAgICAgICAgICAKICAgICAgICAKICAgICAgICBuYW1lID0gX3Rva2VuTmFtZTsKICAgICAgICBzeW1ib2wgPSBfdG9rZW5TeW1ib2w7CiAgICAgICAgZGVjaW1hbHMgPSBfdG9rZW5EZWNpbWFsczsKICAgICAgICAgIAogICAgICAgIGlmIChfdHJhbnNmZXJhYmxlKSB7CiAgICAgICAgICAgIHRyYW5zZmVyYWJsZSA9IHRydWU7CiAgICAgICAgICAgIFRyYW5zZmVyQWJsZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRyYW5zZmVyYWJsZSA9IGZhbHNlOwogICAgICAgICAgICBUcmFuc2ZlckRpc2FibGUoMCk7CiAgICAgICAgfQoKICAgICAgICBob2xkZXJzLmxlbmd0aCA9IDE7CiAgICAgICAgcHJvcG9zYWxzLmxlbmd0aCA9IDE7CiAgICAgICAgCiAgICB9CgovLyBTZXR0aW5nIGZ1bmN0aW9ucwoKICAgIGZ1bmN0aW9uIGluaXRpYWxUb2tlblN1cHBseSgKICAgICAgICBhZGRyZXNzIF9yZWNpcGllbnQsIAogICAgICAgIHVpbnQgX3F1YW50aXR5LAogICAgICAgIGJvb2wgX2xhc3QpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgICAgICBpZiAoc21hcnRDb250cmFjdFN0YXJ0RGF0ZSAhPSAwIHx8IGluaXRpYWxUb2tlblN1cHBseURvbmUpIHRocm93OwogICAgICAgIAogICAgICAgIGlmIChfcmVjaXBpZW50ICE9IDAgJiYgX3F1YW50aXR5ICE9IDApIHsKICAgICAgICAgICAgcmV0dXJuIChjcmVhdGVJbml0aWFsVG9rZW5zKF9yZWNpcGllbnQsIF9xdWFudGl0eSkpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAoX2xhc3QpIGluaXRpYWxUb2tlblN1cHBseURvbmUgPSB0cnVlOwogICAgICAgICAgICAKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9uZVByb3Bvc2FsKAogICAgICAgIHVpbnQgX2Ftb3VudCwKICAgICAgICBzdHJpbmcgX2Rlc2NyaXB0aW9uLAogICAgICAgIGJ5dGVzMzIgX2hhc2hPZlRoZURvY3VtZW50LAogICAgICAgIHVpbnQgX2RhdGVPZlByb3Bvc2FsLAogICAgICAgIHVpbnQgX2xhc3RDbGllbnRQcm9wb3NhbElELAogICAgICAgIHVpbnQgX29yZGVyQW1vdW50LAogICAgICAgIHVpbnQgX2RhdGVPZk9yZGVyCiAgICApIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgICAgICAKICAgICAgICBpZiAoc21hcnRDb250cmFjdFN0YXJ0RGF0ZSAhPSAwIHx8IHJlY2lwaWVudCA9PSAwCiAgICAgICAgfHwgbXNnLnNlbmRlciAhPSBjcmVhdG9yKSB0aHJvdzsKICAgICAgICAKICAgICAgICB1aW50IF9wcm9wb3NhbElEID0gcHJvcG9zYWxzLmxlbmd0aCsrOwogICAgICAgIHByb3Bvc2FsIGMgPSBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdOwoKICAgICAgICBjLmFtb3VudCA9IF9hbW91bnQ7CiAgICAgICAgYy5kZXNjcmlwdGlvbiA9IF9kZXNjcmlwdGlvbjsKICAgICAgICBjLmhhc2hPZlRoZURvY3VtZW50ID0gX2hhc2hPZlRoZURvY3VtZW50OyAKICAgICAgICBjLmRhdGVPZlByb3Bvc2FsID0gX2RhdGVPZlByb3Bvc2FsOwogICAgICAgIGMubGFzdENsaWVudFByb3Bvc2FsSUQgPSBfbGFzdENsaWVudFByb3Bvc2FsSUQ7CiAgICAgICAgYy5vcmRlckFtb3VudCA9IF9vcmRlckFtb3VudDsKICAgICAgICBjLmRhdGVPZk9yZGVyID0gX2RhdGVPZk9yZGVyOwogICAgICAgIAogICAgICAgIFByb3Bvc2FsQ2xvbmVkKF9sYXN0Q2xpZW50UHJvcG9zYWxJRCwgX3Byb3Bvc2FsSUQsIGMuYW1vdW50LCBjLmRlc2NyaXB0aW9uLCBjLmhhc2hPZlRoZURvY3VtZW50KTsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24gY2xvbmVUb2tlbnMoCiAgICAgICAgdWludCBfZnJvbSwKICAgICAgICB1aW50IF90bykgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgCiAgICAgICAgaWYgKHNtYXJ0Q29udHJhY3RTdGFydERhdGUgIT0gMCkgdGhyb3c7CiAgICAgICAgCiAgICAgICAgUGFzc01hbmFnZXIgX2Nsb25lZEZyb20gPSBQYXNzTWFuYWdlcihjbG9uZWRGcm9tKTsKICAgICAgICAKICAgICAgICBpZiAoX2Zyb20gPCAxIHx8IF90byA+IF9jbG9uZWRGcm9tLm51bWJlck9mSG9sZGVycygpKSB0aHJvdzsKCiAgICAgICAgYWRkcmVzcyBfaG9sZGVyOwoKICAgICAgICBmb3IgKHVpbnQgaSA9IF9mcm9tOyBpIDw9IF90bzsgaSsrKSB7CiAgICAgICAgICAgIF9ob2xkZXIgPSBfY2xvbmVkRnJvbS5Ib2xkZXJBZGRyZXNzKGkpOwogICAgICAgICAgICBpZiAoYmFsYW5jZXNbX2hvbGRlcl0gPT0gMCkgewogICAgICAgICAgICAgICAgY3JlYXRlSW5pdGlhbFRva2VucyhfaG9sZGVyLCBfY2xvbmVkRnJvbS5iYWxhbmNlT2YoX2hvbGRlcikpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZVNldHVwKCkgewogICAgICAgIAogICAgICAgIGlmIChzbWFydENvbnRyYWN0U3RhcnREYXRlICE9IDAgfHwgbXNnLnNlbmRlciAhPSBjcmVhdG9yKSB0aHJvdzsKCiAgICAgICAgc21hcnRDb250cmFjdFN0YXJ0RGF0ZSA9IG5vdzsKCiAgICB9CgovLyBGdW5jdGlvbiB0byByZWNlaXZlIHBheW1lbnRzIG9yIGRlcG9zaXRzCgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgQW1vdW50UmVjZWl2ZWQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgIH0KICAgIAovLyBDb250cmFjdG9ycyBBY2NvdW50IE1hbmFnZW1lbnQKCiAgICBmdW5jdGlvbiB1cGRhdGVSZWNpcGllbnQoYWRkcmVzcyBfbmV3UmVjaXBpZW50KSBvbmx5Q29udHJhY3RvciB7CgogICAgICAgIGlmIChfbmV3UmVjaXBpZW50ID09IDAgCiAgICAgICAgICAgIHx8IF9uZXdSZWNpcGllbnQgPT0gY2xpZW50KSB0aHJvdzsKCiAgICAgICAgUmVjaXBpZW50VXBkYXRlZChyZWNpcGllbnQsIF9uZXdSZWNpcGllbnQpOwogICAgICAgIHJlY2lwaWVudCA9IF9uZXdSZWNpcGllbnQ7CgogICAgfSAKCiAgICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50IF9hbW91bnQpIG9ubHlDb250cmFjdG9yIHsKICAgICAgICBpZiAoIXJlY2lwaWVudC5zZW5kKF9hbW91bnQpKSB0aHJvdzsKICAgICAgICBXaXRoZGF3YWwocmVjaXBpZW50LCBfYW1vdW50KTsKICAgIH0KICAgIAovLyBEQU8gUHJvcG9zYWxzIE1hbmFnZW1lbnQKCiAgICBmdW5jdGlvbiB1cGRhdGVDbGllbnQoYWRkcmVzcyBfbmV3Q2xpZW50KSBvbmx5Q2xpZW50IHsKICAgICAgICAKICAgICAgICBpZiAoX25ld0NsaWVudCA9PSAwIAogICAgICAgICAgICB8fCBfbmV3Q2xpZW50ID09IHJlY2lwaWVudCkgdGhyb3c7CgogICAgICAgIENsaWVudFVwZGF0ZWQoY2xpZW50LCBfbmV3Q2xpZW50KTsKICAgICAgICBjbGllbnQgPSBfbmV3Q2xpZW50OyAgICAgICAgCgogICAgfQoKICAgIGZ1bmN0aW9uIG5ld1Byb3Bvc2FsKAogICAgICAgIHVpbnQgX2Ftb3VudCwKICAgICAgICBzdHJpbmcgX2Rlc2NyaXB0aW9uLCAKICAgICAgICBieXRlczMyIF9oYXNoT2ZUaGVEb2N1bWVudAogICAgKSBvbmx5Q29udHJhY3RvciByZXR1cm5zICh1aW50KSB7CgogICAgICAgIHVpbnQgX3Byb3Bvc2FsSUQgPSBwcm9wb3NhbHMubGVuZ3RoKys7CiAgICAgICAgcHJvcG9zYWwgYyA9IHByb3Bvc2Fsc1tfcHJvcG9zYWxJRF07CgogICAgICAgIGMuYW1vdW50ID0gX2Ftb3VudDsKICAgICAgICBjLmRlc2NyaXB0aW9uID0gX2Rlc2NyaXB0aW9uOwogICAgICAgIGMuaGFzaE9mVGhlRG9jdW1lbnQgPSBfaGFzaE9mVGhlRG9jdW1lbnQ7IAogICAgICAgIGMuZGF0ZU9mUHJvcG9zYWwgPSBub3c7CiAgICAgICAgCiAgICAgICAgUHJvcG9zYWxBZGRlZChfcHJvcG9zYWxJRCwgYy5hbW91bnQsIGMuZGVzY3JpcHRpb24sIGMuaGFzaE9mVGhlRG9jdW1lbnQpOwogICAgICAgIAogICAgICAgIHJldHVybiBfcHJvcG9zYWxJRDsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gb3JkZXIoCiAgICAgICAgdWludCBfY2xpZW50UHJvcG9zYWxJRCwKICAgICAgICB1aW50IF9wcm9wb3NhbElELAogICAgICAgIHVpbnQgX29yZGVyQW1vdW50CiAgICApIGV4dGVybmFsIG9ubHlDbGllbnQgcmV0dXJucyAoYm9vbCkgewogICAgCiAgICAgICAgcHJvcG9zYWwgYyA9IHByb3Bvc2Fsc1tfcHJvcG9zYWxJRF07CiAgICAgICAgCiAgICAgICAgdWludCBfc3VtID0gYy5vcmRlckFtb3VudCArIF9vcmRlckFtb3VudDsKICAgICAgICBpZiAoX3N1bSA+IGMuYW1vdW50CiAgICAgICAgICAgIHx8IF9zdW0gPCBjLm9yZGVyQW1vdW50CiAgICAgICAgICAgIHx8IF9zdW0gPCBfb3JkZXJBbW91bnQpIHJldHVybjsgCgogICAgICAgIGMubGFzdENsaWVudFByb3Bvc2FsSUQgPSAgX2NsaWVudFByb3Bvc2FsSUQ7CiAgICAgICAgYy5vcmRlckFtb3VudCA9IF9zdW07CiAgICAgICAgYy5kYXRlT2ZPcmRlciA9IG5vdzsKICAgICAgICAKICAgICAgICBPcmRlcihfY2xpZW50UHJvcG9zYWxJRCwgX3Byb3Bvc2FsSUQsIF9vcmRlckFtb3VudCk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgfQoKICAgIGZ1bmN0aW9uIHNlbmRUbygKICAgICAgICBhZGRyZXNzIF9yZWNpcGllbnQsCiAgICAgICAgdWludCBfYW1vdW50CiAgICApIGV4dGVybmFsIG9ubHlDbGllbnQgb25seURhbyByZXR1cm5zIChib29sKSB7CgogICAgICAgIGlmIChfcmVjaXBpZW50LnNlbmQoX2Ftb3VudCkpIHJldHVybiB0cnVlOwogICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOwoKICAgIH0KICAgIAovLyBUb2tlbiBNYW5hZ2VtZW50CiAgICAKICAgIGZ1bmN0aW9uIGFkZEhvbGRlcihhZGRyZXNzIF9ob2xkZXIpIGludGVybmFsIHsKICAgICAgICAKICAgICAgICBpZiAoaG9sZGVySURbX2hvbGRlcl0gPT0gMCkgewogICAgICAgICAgICAKICAgICAgICAgICAgdWludCBfaG9sZGVySUQgPSBob2xkZXJzLmxlbmd0aCsrOwogICAgICAgICAgICBob2xkZXJzW19ob2xkZXJJRF0gPSBfaG9sZGVyOwogICAgICAgICAgICBob2xkZXJJRFtfaG9sZGVyXSA9IF9ob2xkZXJJRDsKICAgICAgICAgICAgaG9sZGVyQWRkZWQoX2hvbGRlcklELCBfaG9sZGVyKTsKCiAgICAgICAgfQogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBjcmVhdGVJbml0aWFsVG9rZW5zKAogICAgICAgIGFkZHJlc3MgX2hvbGRlciwgCiAgICAgICAgdWludCBfcXVhbnRpdHkKICAgICkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIGlmIChfcXVhbnRpdHkgPiAwICYmIGJhbGFuY2VzW19ob2xkZXJdID09IDApIHsKICAgICAgICAgICAgYWRkSG9sZGVyKF9ob2xkZXIpOwogICAgICAgICAgICBiYWxhbmNlc1tfaG9sZGVyXSA9IF9xdWFudGl0eTsgCiAgICAgICAgICAgIHRvdGFsVG9rZW5TdXBwbHkgKz0gX3F1YW50aXR5OwogICAgICAgICAgICBUb2tlbnNDcmVhdGVkKG1zZy5zZW5kZXIsIF9ob2xkZXIsIF9xdWFudGl0eSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0VG9rZW5QcmljZVByb3Bvc2FsKCAgICAgICAgCiAgICAgICAgdWludCBfaW5pdGlhbFByaWNlTXVsdGlwbGllciwgCiAgICAgICAgdWludCBfaW5mbGF0aW9uUmF0ZSwKICAgICAgICB1aW50IF9jbG9zaW5nVGltZQogICAgKSBvbmx5Q29udHJhY3RvciB7CiAgICAgICAgCiAgICAgICAgaWYgKF9jbG9zaW5nVGltZSA8IG5vdyAKICAgICAgICAgICAgfHwgbm93IDwgRnVuZGluZ1J1bGVzWzFdLmNsb3NpbmdUaW1lKSB0aHJvdzsKICAgICAgICAKICAgICAgICBGdW5kaW5nUnVsZXNbMV0uaW5pdGlhbFByaWNlTXVsdGlwbGllciA9IF9pbml0aWFsUHJpY2VNdWx0aXBsaWVyOwogICAgICAgIEZ1bmRpbmdSdWxlc1sxXS5pbmZsYXRpb25SYXRlID0gX2luZmxhdGlvblJhdGU7CiAgICAgICAgRnVuZGluZ1J1bGVzWzFdLnN0YXJ0VGltZSA9IG5vdzsKICAgICAgICBGdW5kaW5nUnVsZXNbMV0uY2xvc2luZ1RpbWUgPSBfY2xvc2luZ1RpbWU7CiAgICAgICAgCiAgICAgICAgVG9rZW5QcmljZVByb3Bvc2FsU2V0KF9pbml0aWFsUHJpY2VNdWx0aXBsaWVyLCBfaW5mbGF0aW9uUmF0ZSwgX2Nsb3NpbmdUaW1lKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0RnVuZGluZ1J1bGVzKAogICAgICAgIGFkZHJlc3MgX21haW5QYXJ0bmVyLAogICAgICAgIGJvb2wgX3B1YmxpY0NyZWF0aW9uLCAKICAgICAgICB1aW50IF9pbml0aWFsUHJpY2VNdWx0aXBsaWVyLAogICAgICAgIHVpbnQgX21heEFtb3VudFRvRnVuZCwgCiAgICAgICAgdWludCBfbWludXRlc0Z1bmRpbmdQZXJpb2QsIAogICAgICAgIHVpbnQgX2luZmxhdGlvblJhdGUsCiAgICAgICAgdWludCBfcHJvcG9zYWxJRAogICAgKSBleHRlcm5hbCBvbmx5Q2xpZW50IHsKCiAgICAgICAgaWYgKG5vdyA8IEZ1bmRpbmdSdWxlc1swXS5jbG9zaW5nVGltZQogICAgICAgICAgICB8fCBfbWFpblBhcnRuZXIgPT0gYWRkcmVzcyh0aGlzKQogICAgICAgICAgICB8fCBfbWFpblBhcnRuZXIgPT0gY2xpZW50CiAgICAgICAgICAgIHx8ICghX3B1YmxpY0NyZWF0aW9uICYmIF9tYWluUGFydG5lciA9PSAwKQogICAgICAgICAgICB8fCAoX3B1YmxpY0NyZWF0aW9uICYmIF9tYWluUGFydG5lciAhPSAwKQogICAgICAgICAgICB8fCAocmVjaXBpZW50ID09IDAgJiYgX2luaXRpYWxQcmljZU11bHRpcGxpZXIgPT0gMCkKICAgICAgICAgICAgfHwgKHJlY2lwaWVudCAhPSAwIAogICAgICAgICAgICAgICAgJiYgKEZ1bmRpbmdSdWxlc1sxXS5pbml0aWFsUHJpY2VNdWx0aXBsaWVyID09IDAKICAgICAgICAgICAgICAgICAgICB8fCBfaW5mbGF0aW9uUmF0ZSA8IEZ1bmRpbmdSdWxlc1sxXS5pbmZsYXRpb25SYXRlCiAgICAgICAgICAgICAgICAgICAgfHwgbm93IDwgRnVuZGluZ1J1bGVzWzFdLnN0YXJ0VGltZQogICAgICAgICAgICAgICAgICAgIHx8IEZ1bmRpbmdSdWxlc1sxXS5jbG9zaW5nVGltZSA8IG5vdyArIChfbWludXRlc0Z1bmRpbmdQZXJpb2QgKiAxIG1pbnV0ZXMpKSkKICAgICAgICAgICAgfHwgX21heEFtb3VudFRvRnVuZCA9PSAwCiAgICAgICAgICAgIHx8IF9taW51dGVzRnVuZGluZ1BlcmlvZCA9PSAwCiAgICAgICAgICAgICkgdGhyb3c7CgogICAgICAgIEZ1bmRpbmdSdWxlc1swXS5zdGFydFRpbWUgPSBub3c7CiAgICAgICAgRnVuZGluZ1J1bGVzWzBdLmNsb3NpbmdUaW1lID0gbm93ICsgX21pbnV0ZXNGdW5kaW5nUGVyaW9kICogMSBtaW51dGVzOwogICAgICAgICAgICAKICAgICAgICBGdW5kaW5nUnVsZXNbMF0ubWFpblBhcnRuZXIgPSBfbWFpblBhcnRuZXI7CiAgICAgICAgRnVuZGluZ1J1bGVzWzBdLnB1YmxpY0NyZWF0aW9uID0gX3B1YmxpY0NyZWF0aW9uOwogICAgICAgIAogICAgICAgIGlmIChyZWNpcGllbnQgPT0gMCkgRnVuZGluZ1J1bGVzWzBdLmluaXRpYWxQcmljZU11bHRpcGxpZXIgPSBfaW5pdGlhbFByaWNlTXVsdGlwbGllcjsKICAgICAgICBlbHNlIEZ1bmRpbmdSdWxlc1swXS5pbml0aWFsUHJpY2VNdWx0aXBsaWVyID0gRnVuZGluZ1J1bGVzWzFdLmluaXRpYWxQcmljZU11bHRpcGxpZXI7CiAgICAgICAgCiAgICAgICAgaWYgKHJlY2lwaWVudCA9PSAwKSBGdW5kaW5nUnVsZXNbMF0uaW5mbGF0aW9uUmF0ZSA9IF9pbmZsYXRpb25SYXRlOwogICAgICAgIGVsc2UgRnVuZGluZ1J1bGVzWzBdLmluZmxhdGlvblJhdGUgPSBGdW5kaW5nUnVsZXNbMV0uaW5mbGF0aW9uUmF0ZTsKICAgICAgICAKICAgICAgICBGdW5kaW5nUnVsZXNbMF0uZnVuZGVkQW1vdW50ID0gMDsKICAgICAgICBGdW5kaW5nUnVsZXNbMF0ubWF4QW1vdW50VG9GdW5kID0gX21heEFtb3VudFRvRnVuZDsKCiAgICAgICAgRnVuZGluZ1J1bGVzWzBdLnByb3Bvc2FsSUQgPSBfcHJvcG9zYWxJRDsKCiAgICAgICAgRnVuZGluZ1J1bGVzU2V0KF9tYWluUGFydG5lciwgX3Byb3Bvc2FsSUQsIEZ1bmRpbmdSdWxlc1swXS5zdGFydFRpbWUsIEZ1bmRpbmdSdWxlc1swXS5jbG9zaW5nVGltZSk7CiAgICAgICAgICAgIAogICAgfSAKICAgIAogICAgZnVuY3Rpb24gY3JlYXRlVG9rZW4oCiAgICAgICAgYWRkcmVzcyBfcmVjaXBpZW50LCAKICAgICAgICB1aW50IF9hbW91bnQsCiAgICAgICAgdWludCBfc2FsZURhdGUKICAgICkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIGlmIChub3cgPiBGdW5kaW5nUnVsZXNbMF0uY2xvc2luZ1RpbWUKICAgICAgICAgICAgfHwgbm93IDwgRnVuZGluZ1J1bGVzWzBdLnN0YXJ0VGltZQogICAgICAgICAgICB8fF9zYWxlRGF0ZSA+IEZ1bmRpbmdSdWxlc1swXS5jbG9zaW5nVGltZQogICAgICAgICAgICB8fCBfc2FsZURhdGUgPCBGdW5kaW5nUnVsZXNbMF0uc3RhcnRUaW1lCiAgICAgICAgICAgIHx8IEZ1bmRpbmdSdWxlc1swXS5mdW5kZWRBbW91bnQgKyBfYW1vdW50ID4gRnVuZGluZ1J1bGVzWzBdLm1heEFtb3VudFRvRnVuZCkgcmV0dXJuOwoKICAgICAgICB1aW50IF9hID0gX2Ftb3VudCpGdW5kaW5nUnVsZXNbMF0uaW5pdGlhbFByaWNlTXVsdGlwbGllcjsKICAgICAgICB1aW50IF9tdWx0aXBsaWVyID0gMTAwKl9hOwogICAgICAgIHVpbnQgX3F1YW50aXR5ID0gX211bHRpcGxpZXIvcHJpY2VEaXZpc29yKF9zYWxlRGF0ZSk7CiAgICAgICAgaWYgKF9hL19hbW91bnQgIT0gRnVuZGluZ1J1bGVzWzBdLmluaXRpYWxQcmljZU11bHRpcGxpZXIKICAgICAgICAgICAgfHwgX211bHRpcGxpZXIvMTAwICE9IF9hCiAgICAgICAgICAgIHx8IHRvdGFsVG9rZW5TdXBwbHkgKyBfcXVhbnRpdHkgPD0gdG90YWxUb2tlblN1cHBseSAKICAgICAgICAgICAgfHwgdG90YWxUb2tlblN1cHBseSArIF9xdWFudGl0eSA8PSBfcXVhbnRpdHkpIHJldHVybjsKCiAgICAgICAgYWRkSG9sZGVyKF9yZWNpcGllbnQpOwogICAgICAgIGJhbGFuY2VzW19yZWNpcGllbnRdICs9IF9xdWFudGl0eTsKICAgICAgICB0b3RhbFRva2VuU3VwcGx5ICs9IF9xdWFudGl0eTsKICAgICAgICBGdW5kaW5nUnVsZXNbMF0uZnVuZGVkQW1vdW50ICs9IF9hbW91bnQ7CgogICAgICAgIFRva2Vuc0NyZWF0ZWQobXNnLnNlbmRlciwgX3JlY2lwaWVudCwgX3F1YW50aXR5KTsKICAgICAgICAKICAgICAgICBpZiAoRnVuZGluZ1J1bGVzWzBdLmZ1bmRlZEFtb3VudCA9PSBGdW5kaW5nUnVsZXNbMF0ubWF4QW1vdW50VG9GdW5kKSBjbG9zZUZ1bmRpbmcoKTsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICB9CgogICAgZnVuY3Rpb24gc2V0RnVuZGluZ1N0YXJ0VGltZSh1aW50IF9zdGFydFRpbWUpIGV4dGVybmFsIG9ubHlNYWluUGFydG5lciB7CiAgICAgICAgaWYgKG5vdyA+IEZ1bmRpbmdSdWxlc1swXS5jbG9zaW5nVGltZSkgdGhyb3c7CiAgICAgICAgRnVuZGluZ1J1bGVzWzBdLnN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJld2FyZFRva2VuKAogICAgICAgIGFkZHJlc3MgX3JlY2lwaWVudCwgCiAgICAgICAgdWludCBfYW1vdW50LAogICAgICAgIHVpbnQgX2RhdGUKICAgICAgICApIGV4dGVybmFsIG9ubHlNYWluUGFydG5lciB7CgogICAgICAgIHVpbnQgX3NhbGVEYXRlOwogICAgICAgIGlmIChfZGF0ZSA9PSAwKSBfc2FsZURhdGUgPSBub3c7IGVsc2UgX3NhbGVEYXRlID0gX2RhdGU7CgogICAgICAgIGlmICghY3JlYXRlVG9rZW4oX3JlY2lwaWVudCwgX2Ftb3VudCwgX3NhbGVEYXRlKSkgdGhyb3c7CgogICAgfQoKICAgIGZ1bmN0aW9uIGNsb3NlRnVuZGluZygpIGludGVybmFsIHsKICAgICAgICBpZiAocmVjaXBpZW50ID09IDApIGZ1bmRlZEFtb3VudFtGdW5kaW5nUnVsZXNbMF0ucHJvcG9zYWxJRF0gPSBGdW5kaW5nUnVsZXNbMF0uZnVuZGVkQW1vdW50OwogICAgICAgIEZ1bmRpbmdSdWxlc1swXS5jbG9zaW5nVGltZSA9IG5vdzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0RnVuZGluZ0Z1ZWxlZCgpIGV4dGVybmFsIG9ubHlNYWluUGFydG5lciB7CiAgICAgICAgaWYgKG5vdyA+IEZ1bmRpbmdSdWxlc1swXS5jbG9zaW5nVGltZSkgdGhyb3c7CiAgICAgICAgY2xvc2VGdW5kaW5nKCk7CiAgICAgICAgaWYgKHJlY2lwaWVudCA9PSAwKSBGdW5kaW5nRnVlbGVkKEZ1bmRpbmdSdWxlc1swXS5wcm9wb3NhbElELCBGdW5kaW5nUnVsZXNbMF0uZnVuZGVkQW1vdW50KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWJsZVRyYW5zZmVyKCkgb25seUNsaWVudCB7CiAgICAgICAgaWYgKCF0cmFuc2ZlcmFibGUpIHsKICAgICAgICAgICAgdHJhbnNmZXJhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgY2xvc2luZ1RpbWVGb3JDbG9uaW5nID0gMDsKICAgICAgICAgICAgVHJhbnNmZXJBYmxlKCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGRpc2FibGVUcmFuc2Zlcih1aW50IF9jbG9zaW5nVGltZSkgb25seUNsaWVudCB7CiAgICAgICAgaWYgKHRyYW5zZmVyYWJsZSAmJiBfY2xvc2luZ1RpbWUgPT0gMCkgdHJhbnNmZXJhYmxlID0gZmFsc2U7CiAgICAgICAgZWxzZSBjbG9zaW5nVGltZUZvckNsb25pbmcgPSBfY2xvc2luZ1RpbWU7CiAgICAgICAgICAgIAogICAgICAgIFRyYW5zZmVyRGlzYWJsZShfY2xvc2luZ1RpbWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBibG9ja1RyYW5zZmVyKGFkZHJlc3MgX3NoYXJlSG9sZGVyLCB1aW50IF9kZWFkTGluZSkgZXh0ZXJuYWwgb25seUNsaWVudCBvbmx5RGFvIHsKICAgICAgICBpZiAoX2RlYWRMaW5lID4gYmxvY2tlZERlYWRMaW5lW19zaGFyZUhvbGRlcl0pIHsKICAgICAgICAgICAgYmxvY2tlZERlYWRMaW5lW19zaGFyZUhvbGRlcl0gPSBfZGVhZExpbmU7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBidXlTaGFyZXMoKSBwYXlhYmxlIHsKICAgICAgICBidXlTaGFyZXNGb3IobXNnLnNlbmRlcik7CiAgICB9IAogICAgCiAgICBmdW5jdGlvbiBidXlTaGFyZXNGb3IoYWRkcmVzcyBfcmVjaXBpZW50KSBwYXlhYmxlIG9ubHlEYW8gewogICAgICAgIAogICAgICAgIGlmICghRnVuZGluZ1J1bGVzWzBdLnB1YmxpY0NyZWF0aW9uIAogICAgICAgICAgICB8fCAhY3JlYXRlVG9rZW4oX3JlY2lwaWVudCwgbXNnLnZhbHVlLCBub3cpKSB0aHJvdzsKCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbVRvKAogICAgICAgIGFkZHJlc3MgX2Zyb20sCiAgICAgICAgYWRkcmVzcyBfdG8sIAogICAgICAgIHVpbnQyNTYgX3ZhbHVlCiAgICAgICAgKSBpbnRlcm5hbCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsgIAoKICAgICAgICBpZiAoKHRyYW5zZmVyYWJsZSAmJiBub3cgPiBDbG9zaW5nVGltZUZvckNsb25pbmcoKSkKICAgICAgICAgICAgJiYgbm93ID4gYmxvY2tlZERlYWRMaW5lW19mcm9tXQogICAgICAgICAgICAmJiBub3cgPiBibG9ja2VkRGVhZExpbmVbX3RvXQogICAgICAgICAgICAmJiBfdG8gIT0gYWRkcmVzcyh0aGlzKQogICAgICAgICAgICAmJiBiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlCiAgICAgICAgICAgICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dCiAgICAgICAgICAgICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPj0gX3ZhbHVlCiAgICAgICAgKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICBhZGRIb2xkZXIoX3RvKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICAKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgeyAgCiAgICAgICAgaWYgKCF0cmFuc2ZlckZyb21Ubyhtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSkpIHRocm93OwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgKICAgICAgICBhZGRyZXNzIF9mcm9tLCAKICAgICAgICBhZGRyZXNzIF90bywgCiAgICAgICAgdWludDI1NiBfdmFsdWUKICAgICAgICApIHJldHVybnMgKGJvb2wgc3VjY2VzcykgeyAKICAgICAgICAKICAgICAgICBpZiAoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPCBfdmFsdWUKICAgICAgICAgICAgfHwgIXRyYW5zZmVyRnJvbVRvKF9mcm9tLCBfdG8sIF92YWx1ZSkpIHRocm93OwogICAgICAgICAgICAKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKfQ=='.
	

]
