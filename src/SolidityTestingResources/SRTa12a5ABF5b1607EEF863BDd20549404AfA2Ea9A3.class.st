Class {
	#name : #SRTa12a5ABF5b1607EEF863BDd20549404AfA2Ea9A3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa12a5ABF5b1607EEF863BDd20549404AfA2Ea9A3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Ci8qKgogKiBPdmVyZmxvdyBhd2FyZSB1aW50IG1hdGggZnVuY3Rpb25zLgogKi8KY29udHJhY3QgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBwY3QodWludCBudW1lcmF0b3IsIHVpbnQgZGVub21pbmF0b3IsIHVpbnQgcHJlY2lzaW9uKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQgcXVvdGllbnQpIHsKICAgIHVpbnQgX251bWVyYXRvciA9IG51bWVyYXRvciAqIDEwICoqIChwcmVjaXNpb24rMSk7CiAgICB1aW50IF9xdW90aWVudCA9ICgoX251bWVyYXRvciAvIGRlbm9taW5hdG9yKSArIDUpIC8gMTA7CiAgICByZXR1cm4gKF9xdW90aWVudCk7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCn0KCi8qKgogKiBFUkMgMjAgdG9rZW4KICovCmNvbnRyYWN0IFRva2VuIGlzIFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gYWRkKGJhbGFuY2VzW190b10sIF92YWx1ZSk7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzdWIoYmFsYW5jZXNbX2Zyb21dLCBfdmFsdWUpOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHN1YihhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLy8gQSB2dWxlcm5hYmlsaXR5IG9mIHRoZSBhcHByb3ZlIG1ldGhvZCBpbiB0aGUgRVJDMjAgc3RhbmRhcmQgd2FzIGlkZW50aWZpZWQgYnkKICAgIC8vIE1pa2hhaWwgVmxhZGltaXJvdiBhbmQgRG1pdHJ5IEtob3ZyYXRvdmljaCBoZXJlOgogICAgLy8gaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xWUxQdFF4WnUxVUF2TzljWjFPMlJQWEJiVDBtb29oNERZS2pBX2pwLVJMTQogICAgLy8gSXQncyBiZXR0ZXIgdG8gdXNlIHRoaXMgbWV0aG9kIHdoaWNoIGlzIG5vdCBzdXNjZXB0aWJsZSB0byBvdmVyLXdpdGhkcmF3aW5nIGJ5IHRoZSBhcHByb3ZlZS4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3MgdG8gYXBwcm92ZQogICAgLy8vIEBwYXJhbSBfY3VycmVudFZhbHVlIFRoZSBwcmV2aW91cyB2YWx1ZSBhcHByb3ZlZCwgd2hpY2ggY2FuIGJlIHJldHJpZXZlZCB3aXRoIGFsbG93YW5jZShtc2cuc2VuZGVyLCBfc3BlbmRlcikKICAgIC8vLyBAcGFyYW0gX25ld1ZhbHVlIFRoZSBuZXcgdmFsdWUgdG8gYXBwcm92ZSwgdGhpcyB3aWxsIHJlcGxhY2UgdGhlIF9jdXJyZW50VmFsdWUKICAgIC8vLyBAcmV0dXJuIGJvb2wgV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIGEgc3VjY2VzcyAoc2VlIEVSQzIwJ3MgYGFwcHJvdmVgKQogICAgZnVuY3Rpb24gY29tcGFyZUFuZEFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfY3VycmVudFZhbHVlLCB1aW50MjU2IF9uZXdWYWx1ZSkgcHVibGljIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSBfY3VycmVudFZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBhcHByb3ZlKF9zcGVuZGVyLCBfbmV3VmFsdWUpOwogICAgfQp9Cgpjb250cmFjdCBDSEVYVG9rZW4gaXMgVG9rZW4gewoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJDSEVYIFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkNIWCI7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgdWludCBwdWJsaWMgc3RhcnRCbG9jazsgLy9jcm93ZHNhbGUgc3RhcnQgYmxvY2sKICAgIHVpbnQgcHVibGljIGVuZEJsb2NrOyAvL2Nyb3dkc2FsZSBlbmQgYmxvY2sKCiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGVyOwogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICAKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5ID0gMjAwMDAwMDAwMCAqIDEwKipkZWNpbWFsczsgLy8gMmIgdG9rZW5zLCBlYWNoIGRpdmlkZWQgdG8gdXAgdG8gMTBeZGVjaW1hbHMgdW5pdHMuCiAgICB1aW50IHB1YmxpYyBldGhlckNhcCA9IDI1MDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgICAKICAgIHVpbnQgcHVibGljIHRvdGFsVG9rZW5zID0gMDsKICAgIHVpbnQgcHVibGljIHByZXNhbGVTdXBwbHkgPSAwOwogICAgdWludCBwdWJsaWMgcHJlc2FsZUV0aGVyUmFpc2VkID0gMDsKCiAgICBldmVudCBCdXkoYWRkcmVzcyBpbmRleGVkIHJlY2lwaWVudCwgdWludCBldGgsIHVpbnQgY2h4KTsKICAgIGV2ZW50IERlbGl2ZXIoYWRkcmVzcyBpbmRleGVkIHJlY2lwaWVudCwgdWludCBjaHgsIGJ5dGVzMzIgX2Zvcik7CgogICAgdWludCBwdWJsaWMgcHJlc2FsZUFsbG9jYXRpb24gPSB0b3RhbFN1cHBseSAvIDI7IC8vNTAlIG9mIHRva2VuIHN1cHBseSBhbGxvY2F0ZWQgZm9yIGNyb3dkc2FsZQogICAgdWludCBwdWJsaWMgc3RyYXRlZ2ljQWxsb2NhdGlvbiA9IHRvdGFsU3VwcGx5IC8gNDsgLy8yNSUgb2YgdG9rZW4gc3VwcGx5IGFsbG9jYXRlZCBwb3N0LWNyb3dkc2FsZSBmb3Igc3RyYXRlZ2ljIHN1cHBseQogICAgdWludCBwdWJsaWMgcmVzZXJ2ZUFsbG9jYXRpb24gPSB0b3RhbFN1cHBseSAvIDQ7IC8vMjUlIG9mIHRva2VuIHN1cHBseSBhbGxvY2F0ZWQgcG9zdC1jcm93ZHNhbGUgZm9yIGludGVybmFsCiAgICBib29sIHB1YmxpYyBzdHJhdGVnaWNBbGxvY2F0ZWQgPSBmYWxzZTsKICAgIGJvb2wgcHVibGljIHJlc2VydmVBbGxvY2F0ZWQgPSBmYWxzZTsKCiAgICB1aW50IHB1YmxpYyB0cmFuc2ZlckxvY2t1cCA9IDU3NjA7IC8vbm8gdHJhbnNmZXJzIHVudGlsIDEgZGF5IGFmdGVyIHNhbGUgaXMgb3ZlcgogICAgdWludCBwdWJsaWMgc3RyYXRlZ2ljTG9ja3VwID0gODA2NDA7IC8vc3RyYXRlZ2ljIHN1cHBseSBsb2NrZWQgdW50aWwgMTQgZGF5cyBhZnRlciBzYWxlIGlzIG92ZXIKICAgIHVpbnQgcHVibGljIHJlc2VydmVMb2NrdXAgPSAyNDE5MjA7IC8vZmlyc3Qgd2F2ZSBvZiByZXNlcnZlIGxvY2tlZCB1bnRpbCA0MiBkYXlzIGFmdGVyIHNhbGUgaXMgb3ZlcgoKICAgIHVpbnQgcHVibGljIHJlc2VydmVXYXZlID0gMDsgLy9pbmNyZW1lbnRzIGVhY2ggdGltZSAxMCUgb2YgcmVzZXJ2ZSBpcyBhbGxvY2F0ZWQsIHRvIGEgbWF4IG9mIDEwCiAgICB1aW50IHB1YmxpYyByZXNlcnZlV2F2ZVRva2VucyA9IHJlc2VydmVBbGxvY2F0aW9uIC8gMTA7IC8vMTAlIG9mIHJlc2VydmUgd2lsbCBiZSByZWxlYXNlZCBvbiBlYWNoIHdhdmUKICAgIHVpbnQgcHVibGljIHJlc2VydmVXYXZlTG9ja3VwID0gMTcyODAwOyAvLzMwIGRheSBpbnRlcnZhbHMgYmVmb3JlIHN1YnNlcXVlbnQgd2F2ZSBvZiByZXNlcnZlIHRva2VucyBjYW4gYmUgcmVsZWFzZWQKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fRVRIRVIgPSAxIGZpbm5leTsKCiAgICBlbnVtIFRva2VuU2FsZVN0YXRlIHsKICAgICAgICBJbml0aWFsLCAgICAvL2NvbnRyYWN0IGluaXRpYWxpemVkLCBib251cyB0b2tlbgogICAgICAgIFByZXNhbGUsICAgIC8vbGltaXRlZCB0aW1lIGNyb3dkc2FsZQogICAgICAgIExpdmUsICAgICAgIC8vZGVmYXVsdCBwcmljZQogICAgICAgIEZyb3plbiAgICAgIC8vcHJldmVudCBzYWxlIG9mIHRva2VucwogICAgfQoKICAgIFRva2VuU2FsZVN0YXRlIHB1YmxpYyBfc2FsZVN0YXRlID0gVG9rZW5TYWxlU3RhdGUuSW5pdGlhbDsKCiAgICBmdW5jdGlvbiBDSEVYVG9rZW4oYWRkcmVzcyBmb3VuZGVySW5wdXQsIGFkZHJlc3Mgb3duZXJJbnB1dCwgdWludCBzdGFydEJsb2NrSW5wdXQsIHVpbnQgZW5kQmxvY2tJbnB1dCkgewogICAgICAgIGZvdW5kZXIgPSBmb3VuZGVySW5wdXQ7CiAgICAgICAgb3duZXIgPSBvd25lcklucHV0OwogICAgICAgIHN0YXJ0QmxvY2sgPSBzdGFydEJsb2NrSW5wdXQ7CiAgICAgICAgZW5kQmxvY2sgPSBlbmRCbG9ja0lucHV0OwogICAgICAgIAogICAgICAgIHVwZGF0ZVRva2VuU2FsZVN0YXRlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gcHJpY2UoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5Jbml0aWFsKSByZXR1cm4gNjAwMTsKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5QcmVzYWxlKSB7CiAgICAgICAgICAgIHVpbnQgcGVyY2VudFJlbWFpbmluZyA9IHBjdCgoZW5kQmxvY2sgLSBibG9jay5udW1iZXIpLCAoZW5kQmxvY2sgLSBzdGFydEJsb2NrKSwgMyk7CiAgICAgICAgICAgIHJldHVybiAzMDAwICsgMyAqIHBlcmNlbnRSZW1haW5pbmc7CiAgICAgICAgfQogICAgICAgIHJldHVybiAzMDAwOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZVRva2VuU2FsZVN0YXRlICgpIHsKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5Gcm96ZW4pIHJldHVybjsKCiAgICAgICAgaWYgKF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuTGl2ZSAmJiBibG9jay5udW1iZXIgPiBlbmRCbG9jaykgcmV0dXJuOwogICAgICAgIAogICAgICAgIGlmIChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLkluaXRpYWwgJiYgYmxvY2subnVtYmVyID49IHN0YXJ0QmxvY2spIHsKICAgICAgICAgICAgX3NhbGVTdGF0ZSA9IFRva2VuU2FsZVN0YXRlLlByZXNhbGU7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmIChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLlByZXNhbGUgJiYgYmxvY2subnVtYmVyID4gZW5kQmxvY2spIHsKICAgICAgICAgICAgX3NhbGVTdGF0ZSA9IFRva2VuU2FsZVN0YXRlLkxpdmU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICAgICAgYnV5KG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eShhZGRyZXNzIHJlY2lwaWVudCkgcGF5YWJsZSB7CiAgICAgICAgaWYgKHJlY2lwaWVudCA9PSAweDApIHRocm93OwogICAgICAgIGlmIChtc2cudmFsdWUgPCBNSU5fRVRIRVIpIHRocm93OwogICAgICAgIGlmIChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLkZyb3plbikgdGhyb3c7CiAgICAgICAgaWYgKChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLkluaXRpYWwgfHwgX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5QcmVzYWxlKSAmJiBwcmVzYWxlU3VwcGx5ID49IHByZXNhbGVBbGxvY2F0aW9uKSB0aHJvdzsKICAgICAgICBpZiAoKF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuSW5pdGlhbCB8fCBfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLlByZXNhbGUpICYmIHByZXNhbGVFdGhlclJhaXNlZCA+PSBldGhlckNhcCkgdGhyb3c7CgogICAgICAgIHVwZGF0ZVRva2VuU2FsZVN0YXRlKCk7CiAgICAgICAgdWludCB0b2tlbnMgPSBtdWwobXNnLnZhbHVlLCBwcmljZSgpKTsKCiAgICAgICAgaWYgKHRva2VucyA8PSAwKSB0aHJvdzsKICAgICAgICAKICAgICAgICBiYWxhbmNlc1tyZWNpcGllbnRdID0gYWRkKGJhbGFuY2VzW3JlY2lwaWVudF0sIHRva2Vucyk7CiAgICAgICAgdG90YWxUb2tlbnMgPSBhZGQodG90YWxUb2tlbnMsIHRva2Vucyk7CgogICAgICAgIGlmIChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLkluaXRpYWwgfHwgX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5QcmVzYWxlKSB7CiAgICAgICAgICAgIHByZXNhbGVFdGhlclJhaXNlZCA9IGFkZChwcmVzYWxlRXRoZXJSYWlzZWQsIG1zZy52YWx1ZSk7CiAgICAgICAgICAgIHByZXNhbGVTdXBwbHkgPSBhZGQocHJlc2FsZVN1cHBseSwgdG9rZW5zKTsKICAgICAgICB9CgogICAgICAgIGZvdW5kZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICAKICAgICAgICBUcmFuc2ZlcigwLCByZWNpcGllbnQsIHRva2Vucyk7CiAgICAgICAgQnV5KHJlY2lwaWVudCwgbXNnLnZhbHVlLCB0b2tlbnMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8PSBlbmRCbG9jayArIHRyYW5zZmVyTG9ja3VwICYmIG1zZy5zZW5kZXIgIT0gZm91bmRlciAmJiBtc2cuc2VuZGVyICE9IG93bmVyKSB0aHJvdzsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChibG9jay5udW1iZXIgPD0gZW5kQmxvY2sgKyB0cmFuc2ZlckxvY2t1cCAmJiBtc2cuc2VuZGVyICE9IGZvdW5kZXIgJiYgbXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlJbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gZm91bmRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxpdmVyKGFkZHJlc3MgcmVjaXBpZW50LCB1aW50IHRva2VucywgYnl0ZXMzMiBfZm9yKSBvbmx5SW50ZXJuYWwgewogICAgICAgIGlmICh0b2tlbnMgPD0gMCkgdGhyb3c7CiAgICAgICAgaWYgKF9mb3IgPT0gMCkgdGhyb3c7CiAgICAgICAgaWYgKHRvdGFsVG9rZW5zID49IHRvdGFsU3VwcGx5KSB0aHJvdzsKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5Gcm96ZW4pIHRocm93OwogICAgICAgIGlmICgoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5Jbml0aWFsIHx8IF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuUHJlc2FsZSkgJiYgcHJlc2FsZVN1cHBseSA+PSBwcmVzYWxlQWxsb2NhdGlvbikgdGhyb3c7CgogICAgICAgIHVwZGF0ZVRva2VuU2FsZVN0YXRlKCk7CgogICAgICAgIGJhbGFuY2VzW3JlY2lwaWVudF0gPSBhZGQoYmFsYW5jZXNbcmVjaXBpZW50XSwgdG9rZW5zKTsKICAgICAgICB0b3RhbFRva2VucyA9IGFkZCh0b3RhbFRva2VucywgdG9rZW5zKTsKCiAgICAgICAgaWYgKF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuSW5pdGlhbCB8fCBfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLlByZXNhbGUpIHsKICAgICAgICAgICAgcHJlc2FsZVN1cHBseSA9IGFkZChwcmVzYWxlU3VwcGx5LCB0b2tlbnMpOwogICAgICAgIH0KCiAgICAgICAgVHJhbnNmZXIoMCwgcmVjaXBpZW50LCB0b2tlbnMpOyAgICAKICAgICAgICBEZWxpdmVyKHJlY2lwaWVudCwgdG9rZW5zLCBfZm9yKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvY2F0ZVN0cmF0ZWdpY1Rva2VucygpIG9ubHlJbnRlcm5hbCB7CiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8PSBlbmRCbG9jayArIHN0cmF0ZWdpY0xvY2t1cCkgdGhyb3c7CiAgICAgICAgaWYgKHN0cmF0ZWdpY0FsbG9jYXRlZCkgdGhyb3c7CgogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGFkZChiYWxhbmNlc1tvd25lcl0sIHN0cmF0ZWdpY0FsbG9jYXRpb24pOwogICAgICAgIHRvdGFsVG9rZW5zID0gYWRkKHRvdGFsVG9rZW5zLCBzdHJhdGVnaWNBbGxvY2F0aW9uKTsKCiAgICAgICAgc3RyYXRlZ2ljQWxsb2NhdGVkID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvY2F0ZVJlc2VydmVUb2tlbnMoKSBvbmx5SW50ZXJuYWwgewogICAgICAgIGlmIChibG9jay5udW1iZXIgPD0gZW5kQmxvY2sgKyByZXNlcnZlTG9ja3VwICsgKHJlc2VydmVXYXZlTG9ja3VwICogcmVzZXJ2ZVdhdmUpKSB0aHJvdzsKICAgICAgICBpZiAocmVzZXJ2ZUFsbG9jYXRlZCkgdGhyb3c7CgogICAgICAgIGJhbGFuY2VzW2ZvdW5kZXJdID0gYWRkKGJhbGFuY2VzW2ZvdW5kZXJdLCByZXNlcnZlV2F2ZVRva2Vucyk7CiAgICAgICAgdG90YWxUb2tlbnMgPSBhZGQodG90YWxUb2tlbnMsIHJlc2VydmVXYXZlVG9rZW5zKTsKCiAgICAgICAgcmVzZXJ2ZVdhdmUrKzsKICAgICAgICBpZiAocmVzZXJ2ZVdhdmUgPj0gMTApIHsKICAgICAgICAgICAgcmVzZXJ2ZUFsbG9jYXRlZCA9IHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGZyZWV6ZSgpIG9ubHlJbnRlcm5hbCB7CiAgICAgICAgX3NhbGVTdGF0ZSA9IFRva2VuU2FsZVN0YXRlLkZyb3plbjsKICAgIH0KCiAgICBmdW5jdGlvbiB1bmZyZWV6ZSgpIG9ubHlJbnRlcm5hbCB7CiAgICAgICAgX3NhbGVTdGF0ZSA9IFRva2VuU2FsZVN0YXRlLlByZXNhbGU7CiAgICAgICAgdXBkYXRlVG9rZW5TYWxlU3RhdGUoKTsKICAgIH0KCn0='.
	

]
