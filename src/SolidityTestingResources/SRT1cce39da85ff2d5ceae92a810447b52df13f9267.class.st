Class {
	#name : #SRT1cce39da85ff2d5ceae92a810447b52df13f9267,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1cce39da85ff2d5ceae92a810447b52df13f9267 >> base64 [
	^ 'LyoqCiAqIEVhcmx5IHByb3RvdHlwZSBvZiB0aGUgRWRnZWxlc3MgQmxhY2sgSmFjayBjb250cmFjdC4gCiAqIEFsbG93cyBhbiB1c2VyIHRvIGluaXRpYWxpemUgYSByb3VuZCBvZiBibGFjayBqYWNrLCB3aXRoZHJhdyB0aGUgd2luIGluIGNhc2UgaGUgd29uIG9yIGJvdGggb24gdGhlIHNhbWUgdGltZSwKICogd2hpbGUgdmVyaWZ5aW5nIHRoZSBnYW1lIGRhdGEuCiAqIGF1dGhvcjogSnVsaWEgQWx0ZW5yaWVkCiAqKi8KcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTA7Cgpjb250cmFjdCBvd25lZCB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7IAogIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKQogICAgICAgICAgdGhyb3c7CiAgICAgIF87CiAgfQogIGZ1bmN0aW9uIG93bmVkKCkgeyBvd25lciA9IG1zZy5zZW5kZXI7IH0KICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXJ7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KfQoKY29udHJhY3QgbW9ydGFsIGlzIG93bmVkewogIGZ1bmN0aW9uIGNsb3NlKCkgb25seU93bmVyIHsKICAgICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgfQp9CmNvbnRyYWN0IGJsYWNramFjayBpcyBtb3J0YWwgewogIHN0cnVjdCBHYW1lIHsKICAgIC8qKiB0aGUgZ2FtZSBpZCBpcyB1c2VkIHRvIHJlZmVyZW5jZSB0aGUgZ2FtZSAqKi8KICAgIHVpbnQgaWQ7CiAgICAvKiogdGhlIGhhc2ggb2YgdGhlIChwYXJ0aWFsKSBkZWNrICoqLwogICAgYnl0ZXMzMiBkZWNrOwogICAgLyoqIHRoZSBoYXNoIG9mIHRoZSBjYXNpbm8gc2VlZCB1c2VkIGZvciByYW5kb21uZXNzIGdlbmVyYXRpb24gYW5kIGRlY2staGFzaGluZyoqLwogICAgYnl0ZXMzMiBzZWVkOwogICAgLyoqIHRoZSBwbGF5ZXIgYWRkcmVzcyAqKi8KICAgIGFkZHJlc3MgcGxheWVyOwogICAgLyoqIHRoZSBiZXQgKiovCiAgICB1aW50IGJldDsKICAgIC8qKiB0aGUgdGltZXN0YW1wIG9mIHRoZSBzdGFydCBvZiB0aGUgZ2FtZSwgZ2FtZSBlbmRzIGF1dG9tYXRpY2FsbHkgYWZ0ZXIgY2VydGFpbiB0aW1lIGludGVydmFsIHBhc3NlZCAqKi8KICAgIHVpbnQgc3RhcnQ7CiAgfQoKICAvKiogdGhlIHZhbHVlIG9mIHRoZSBjYXJkczogQWNlLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwgSiwgUSwgSyAuIEFjZSBjYW4gYmUgMSBvciAxMSwgb2YgY291cnNlLiAKICAgKiAgIHRoZSB2YWx1ZSBvZiBhIGNhcmQgY2FuIGJlIGRldGVybWluZWQgYnkgbG9va2luZyB1cCBjYXJkVmFsdWVzW2NhcmRJZCUxM10qKi8KICB1aW50OFsxM10gY2FyZFZhbHVlcyA9IFsxMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDEwLCAxMCwgMTBdOwoKICAvKiogdXNlIHRoZSBnYW1lIGlkIHRvIHJlZmVyZW5jZSB0aGUgZ2FtZXMgKiovCiAgbWFwcGluZyh1aW50ID0+IEdhbWUpIGdhbWVzOwogIC8qKiB0aGUgbWluaW11bSBiZXQqKi8KICB1aW50IHB1YmxpYyBtaW5pbXVtQmV0OwogIC8qKiB0aGUgbWF4aW11bSBiZXQgKiovCiAgdWludCBwdWJsaWMgbWF4aW11bUJldDsKICAvKiogdGhlIGFkZHJlc3Mgd2hpY2ggc2lnbnMgdGhlIG51bWJlciBvZiBjYXJkcyBkZWFsdCAqKi8KICBhZGRyZXNzIHB1YmxpYyBzaWduZXI7CiAgCiAgLyoqIG5vdGlmeSBsaXN0ZW5lcnMgdGhhdCBhIG5ldyByb3VuZCBvZiBibGFja2phY2sgc3RhcnRlZCAqKi8KICBldmVudCBOZXdHYW1lKHVpbnQgaW5kZXhlZCBpZCwgYnl0ZXMzMiBkZWNrLCBieXRlczMyIHNydlNlZWQsIGJ5dGVzMzIgY1NlZWQsIGFkZHJlc3MgcGxheWVyLCB1aW50IGJldCk7CiAgLyoqIG5vdGlmeSBsaXN0ZW5lcnMgb2YgdGhlIGdhbWUgb3V0Y29tZSAqKi8KICBldmVudCBSZXN1bHQodWludCBpbmRleGVkIGlkLCBhZGRyZXNzIHBsYXllciwgdWludCB3aW4pOwogIC8qKiBub3RpZnkgbGlzdGVuZXJzIHRoYXQgYW4gZXJyb3Igb2NjdXJyZWQqKi8KICBldmVudCBFcnJvcih1aW50IGVycm9yQ29kZSk7CgogIC8qKiBjb25zdHJ1Y3R1ci4gaW5pdGlhbGl6ZSB0aGUgY29udHJhY3Qgd2l0aCBhIG1pbmltdW0gYmV0IGFuZCBhIHNpZ25lciBhZGRyZXNzLiAqKi8KICBmdW5jdGlvbiBibGFja2phY2sodWludCBtaW5CZXQsIHVpbnQgbWF4QmV0LCBhZGRyZXNzIHNpZ25lckFkZHJlc3MpIHBheWFibGV7CiAgICBtaW5pbXVtQmV0ID0gbWluQmV0OwogICAgbWF4aW11bUJldCA9IG1heEJldDsKICAgIHNpZ25lciA9IHNpZ25lckFkZHJlc3M7CiAgfQoKICAvKiogCiAgICogICBpbml0aWFsaXplcyBhIHJvdW5kIG9mIGJsYWNramFjayB3aXRoIGFuIGlkLCB0aGUgaGFzaCBvZiB0aGUgKHBhcnRpYWwpIGRlY2sgYW5kIHRoZSBoYXNoIG9mIHRoZSBzZXJ2ZXIgc2VlZC4gCiAgICogICBhY2NlcHRzIHRoZSBiZXQuCiAgICogICB0aHJvd3MgYW4gZXhjZXB0aW9uIGlmIHRoZSBiZXQgaXMgdG9vIGxvdyBvciBhIGdhbWUgd2l0aCB0aGUgZ2l2ZW4gaWQgYWxyZWFkeSBleGlzdHMuCiAgICoqLwogIGZ1bmN0aW9uIGluaXRHYW1lKHVpbnQgaWQsIGJ5dGVzMzIgZGVjaywgYnl0ZXMzMiBzcnZTZWVkLCBieXRlczMyIGNTZWVkKSBwYXlhYmxlIHsKICAgIC8vdGhyb3cgaWYgYmV0IGlzIHRvbyBsb3cgb3IgdG9vIGhpZ2gKICAgIGlmIChtc2cudmFsdWUgPCBtaW5pbXVtQmV0IHx8IG1zZy52YWx1ZSA+IG1heGltdW1CZXQpIHRocm93OwogICAgLy90aHJvdyBpZiB1c2VyIGNvdWxkIG5vdCBiZSBwYWl1ZCBvdXQgaW4gY2FzZSBvZiBzdWl0ZWQgYmxhY2tqYWNrCiAgICBpZiAobXNnLnZhbHVlICogMyA+IGFkZHJlc3ModGhpcykuYmFsYW5jZSkgdGhyb3c7CiAgICBfaW5pdEdhbWUoaWQsIGRlY2ssIHNydlNlZWQsIGNTZWVkLCBtc2cudmFsdWUpOwogIH0KCiAgLyoqIAogICAqIGZpcnN0IGNoZWNrcyBpZiBkZWNrIGFuZCB0aGUgcGxheWVyJ3MgbnVtYmVyIG9mIGNhcmRzIGFyZSBjb3JyZWN0LCB0aGVuIGNoZWNrcyBpZiB0aGUgcGxheWVyIHdvbiBhbmQgaWYgc28sIHNlbmRzIHRoZSB3aW4uCiAgICoqLwogIGZ1bmN0aW9uIHN0YW5kKHVpbnQgZ2FtZUlkLCB1aW50OFtdIGRlY2ssIGJ5dGVzMzIgc2VlZCwgdWludDggbnVtQ2FyZHMsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKSB7CiAgICB1aW50IHdpbiA9IF9zdGFuZChnYW1lSWQsZGVjayxzZWVkLG51bUNhcmRzLHYscixzLCB0cnVlKTsKICB9CiAgCiAgLyoqCiAgKiAgIGZpcnN0IHN0YW5kcywgdGhlbiBpbml0cyBhIG5ldyBnYW1lIHdpdGggb25seSBvbmUgdHJhbnNhY3Rpb24KICAqKi8KICBmdW5jdGlvbiBzdGFuZEFuZFJlYmV0KHVpbnQgb2xkR2FtZUlkLCB1aW50OFtdIG9sZERlY2ssIGJ5dGVzMzIgb2xkU2VlZCwgdWludDggbnVtQ2FyZHMsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzLCB1aW50IG5ld0dhbWVJZCwgYnl0ZXMzMiBuZXdEZWNrLCBieXRlczMyIG5ld1NydlNlZWQsIGJ5dGVzMzIgbmV3Q1NlZWQpewogICAgdWludCB3aW4gPSBfc3RhbmQob2xkR2FtZUlkLG9sZERlY2ssb2xkU2VlZCxudW1DYXJkcyx2LHIscywgZmFsc2UpOwogICAgdWludCBiZXQgPSBnYW1lc1tvbGRHYW1lSWRdLmJldDsKICAgIGlmKHdpbiA+PSBiZXQpewogICAgICBfaW5pdEdhbWUobmV3R2FtZUlkLCBuZXdEZWNrLCBuZXdTcnZTZWVkLCBuZXdDU2VlZCwgYmV0KTsKICAgICAgd2luLT1iZXQ7CiAgICB9CiAgICBpZih3aW4+MCAmJiAhbXNnLnNlbmRlci5zZW5kKHdpbikpey8vcGF5IHRoZSByZXN0CiAgICAgIHRocm93OwogICAgfQogIH0KICAKICAvKiogCiAgICogICBpbnRlcm5hbCBmdW5jdGlvbiB0byBpbml0aWFsaXplIGEgcm91bmQgb2YgYmxhY2tqYWNrIHdpdGggYW4gaWQsIHRoZSBoYXNoIG9mIHRoZSAocGFydGlhbCkgZGVjaywgCiAgICogICB0aGUgaGFzaCBvZiB0aGUgc2VydmVyIHNlZWQgYW5kIHRoZSBiZXQuIAogICAqKi8KICBmdW5jdGlvbiBfaW5pdEdhbWUodWludCBpZCwgYnl0ZXMzMiBkZWNrLCBieXRlczMyIHNydlNlZWQsIGJ5dGVzMzIgY1NlZWQsIHVpbnQgYmV0KSBpbnRlcm5hbHsKICAgIC8vdGhyb3cgaWYgZ2FtZSB3aXRoIGlkIGFscmVhZHkgZXhpc3RzLiBsYXRlciBtYXliZSB0aHJvdyBvbmx5IGlmIGdhbWUgd2l0aCBpZCBpcyBzdGlsbCBydW5uaW5nCiAgICBpZiAoZ2FtZXNbaWRdLnBsYXllciAhPSAweDApIHRocm93OwogICAgZ2FtZXNbaWRdID0gR2FtZShpZCwgZGVjaywgc3J2U2VlZCwgbXNnLnNlbmRlciwgYmV0LCBub3cpOwogICAgTmV3R2FtZShpZCwgZGVjaywgc3J2U2VlZCwgY1NlZWQsIG1zZy5zZW5kZXIsIGJldCk7CiAgfQogIAogIC8qKgogICogZmlyc3QgY2hlY2tzIGlmIGRlY2sgYW5kIHRoZSBwbGF5ZXIncyBudW1iZXIgb2YgY2FyZHMgYXJlIGNvcnJlY3QsIHRoZW4gY2hlY2tzIGlmIHRoZSBwbGF5ZXIgd29uIGFuZCBpZiBzbywgY2FsY3VsYXRlcyB0aGUgd2luLgogICoqLwogIGZ1bmN0aW9uIF9zdGFuZCh1aW50IGdhbWVJZCwgdWludDhbXSBkZWNrLCBieXRlczMyIHNlZWQsIHVpbnQ4IG51bUNhcmRzLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcywgYm9vbCBwYXlvdXQpIGludGVybmFsIHJldHVybnModWludCB3aW4pewogICAgR2FtZSBnYW1lID0gZ2FtZXNbZ2FtZUlkXTsKICAgIHVpbnQgc3RhcnQgPSBnYW1lLnN0YXJ0OwogICAgZ2FtZS5zdGFydCA9IDA7IC8vbWFrZSBzdXJlIG91dGNvbWUgaXNuJ3QgZGV0ZXJtaW5lZCBhIHNlY29uZCB0aW1lIHdoaWxlIHdpbiBwYXltZW50IGlzIHN0aWxsIHBlbmRpbmcgLT4gcHJldmVudCBkb3VibGUgcGF5b3V0CiAgICBpZihtc2cuc2VuZGVyIT1nYW1lLnBsYXllcil7CiAgICAgIEVycm9yKDEpOwogICAgICByZXR1cm4gMDsKICAgIH0KICAgIGlmKCFjaGVja0RlY2soZ2FtZUlkLCBkZWNrLCBzZWVkKSl7CiAgICAgIEVycm9yKDIpOwogICAgICByZXR1cm4gMDsKICAgIH0KICAgIGlmKCFjaGVja051bUNhcmRzKGdhbWVJZCwgbnVtQ2FyZHMsIHYsIHIsIHMpKXsKICAgICAgRXJyb3IoMyk7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgaWYoc3RhcnQgKyAxIGhvdXJzIDwgbm93KXsKICAgICAgRXJyb3IoNCk7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgCiAgICB3aW4gPSBkZXRlcm1pbmVPdXRjb21lKGdhbWVJZCwgZGVjaywgbnVtQ2FyZHMpOwogICAgaWYgKHBheW91dCAmJiB3aW4gPiAwICYmICFtc2cuc2VuZGVyLnNlbmQod2luKSl7CiAgICAgIEVycm9yKDUpOwogICAgICBnYW1lLnN0YXJ0ID0gc3RhcnQ7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgUmVzdWx0KGdhbWVJZCwgbXNnLnNlbmRlciwgd2luKTsKICB9CiAgCiAgLyoqCiAgKiBjaGVjayBpZiBkZWNrIGFuZCBjYXNpbm8gc2VlZCBhcmUgY29ycmVjdC4KICAqKi8KICBmdW5jdGlvbiBjaGVja0RlY2sodWludCBnYW1lSWQsIHVpbnQ4W10gZGVjaywgYnl0ZXMzMiBzZWVkKSBjb25zdGFudCByZXR1cm5zIChib29sIGNvcnJlY3QpewogICAgaWYoc2hhMyhzZWVkKSAhPSBnYW1lc1tnYW1lSWRdLnNlZWQpIHJldHVybiBmYWxzZTsKICAgIGlmKHNoYTMoY29udmVydFRvQnl0ZXMoZGVjayksIHNlZWQpICE9IGdhbWVzW2dhbWVJZF0uZGVjaykgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfQogIAogIGZ1bmN0aW9uIGNvbnZlcnRUb0J5dGVzKHVpbnQ4W10gYnl0ZUFycmF5KSByZXR1cm5zIChieXRlcyBiKXsKICAgIGIgPSBuZXcgYnl0ZXMoYnl0ZUFycmF5Lmxlbmd0aCk7CiAgICBmb3IodWludDggaSA9IDA7IGkgPCBieXRlQXJyYXkubGVuZ3RoOyBpKyspCiAgICAgIGJbaV0gPSBieXRlKGJ5dGVBcnJheVtpXSk7CiAgfQogIAogIC8qKgogICogY2hlY2sgaWYgdXNlciBhbmQgY2FzaW5vIGFncmVlIG9uIHRoZSBudW1iZXIgb2YgY2FyZHMKICAqKi8KICBmdW5jdGlvbiBjaGVja051bUNhcmRzKHVpbnQgZ2FtZUlkLCB1aW50OCBudW1DYXJkcywgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpIGNvbnN0YW50IHJldHVybnMgKGJvb2wgY29ycmVjdCl7CiAgICBieXRlczMyIG1zZ0hhc2ggPSBzaGEzKGdhbWVJZCxudW1DYXJkcyk7CiAgICByZXR1cm4gZWNyZWNvdmVyKG1zZ0hhc2gsIHYsIHIsIHMpID09IHNpZ25lcjsKICB9CgogIC8qKgogICAqIGRldGVybWluZXMgdGhlIG91dGNvbWUgb2YgYSBnYW1lIGFuZCByZXR1cm5zIHRoZSB3aW4uIAogICAqIGluIGNhc2Ugb2YgYSBsb3NzLCB3aW4gaXMgMC4KICAgKiovCiAgZnVuY3Rpb24gZGV0ZXJtaW5lT3V0Y29tZSh1aW50IGdhbWVJZCwgdWludDhbXSBjYXJkcywgdWludDggbnVtQ2FyZHMpIGNvbnN0YW50IHJldHVybnModWludCB3aW4pIHsKICAgIHVpbnQ4IHBsYXllclZhbHVlID0gZ2V0UGxheWVyVmFsdWUoY2FyZHMsIG51bUNhcmRzKTsKICAgIC8vYnVzdCBpZiB2YWx1ZSA+IDIxCiAgICBpZiAocGxheWVyVmFsdWUgPiAyMSkgcmV0dXJuIDA7CgogICAgdmFyIChkZWFsZXJWYWx1ZSwgZGVhbGVyQkopID0gZ2V0RGVhbGVyVmFsdWUoY2FyZHMsIG51bUNhcmRzKTsKCiAgICAvL3BsYXllciB3aW5zCiAgICBpZiAocGxheWVyVmFsdWUgPT0gMjEgJiYgbnVtQ2FyZHMgPT0gMiAmJiAhZGVhbGVyQkopeyAvL3BsYXllciBibGFja2phY2sgYnV0IG5vIGRlYWxlciBibGFja2phY2sKICAgICAgaWYoaXNTdWl0ZWQoY2FyZHNbMF0sIGNhcmRzWzJdKSkKICAgICAgICByZXR1cm4gZ2FtZXNbZ2FtZUlkXS5iZXQgKiAzOyAvL3BheSAyIHRvIDEKICAgICAgZWxzZQogICAgICAgIHJldHVybiBnYW1lc1tnYW1lSWRdLmJldCAqIDUgLyAyOyAKICAgIH0KICAgIGVsc2UgaWYocGxheWVyVmFsdWUgPT0gMjEgJiYgbnVtQ2FyZHMgPT0gNSkgLy9hdXRvbWF0aWMgd2luIG9uIDUtY2FyZCAyMQogICAgICByZXR1cm4gZ2FtZXNbZ2FtZUlkXS5iZXQgKiAyOwogICAgZWxzZSBpZiAocGxheWVyVmFsdWUgPiBkZWFsZXJWYWx1ZSB8fCBkZWFsZXJWYWx1ZSA+IDIxKQogICAgICByZXR1cm4gZ2FtZXNbZ2FtZUlkXS5iZXQgKiAyOwogICAgLy90aWUKICAgIGVsc2UgaWYgKHBsYXllclZhbHVlID09IGRlYWxlclZhbHVlKQogICAgICByZXR1cm4gZ2FtZXNbZ2FtZUlkXS5iZXQ7CiAgICAvL3BsYXllciBsb3NlcwogICAgZWxzZQogICAgICByZXR1cm4gMDsKCiAgfQoKICAvKioKICAgKiAgIGNhbGN1bGF0ZXMgdGhlIHZhbHVlIG9mIGEgcGxheWVyJ3MgaGFuZC4KICAgKiAgIGNhcmRzOiBob2xkcyB0aGUgKHBhcnRpYWwpIGRlY2suCiAgICogICBudW1DYXJkczogdGhlIG51bWJlciBvZiBjYXJkcyB0aGUgcGxheWVyIGhvbGRzCiAgICoqLwogIGZ1bmN0aW9uIGdldFBsYXllclZhbHVlKHVpbnQ4W10gY2FyZHMsIHVpbnQ4IG51bUNhcmRzKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zKHVpbnQ4IHBsYXllclZhbHVlKSB7CiAgICAvL3BsYXllciByZWNlaXZlcyBmaXJzdCBhbmQgdGhpcmQgY2FyZCBhbmQgIGFsbCBmdXJ0aGVyIGNhcmRzIGFmdGVyIHRoZSA0LiB1bnRpbCBoZSBzdGFuZHMgCiAgICAvL2RldGVybWluZSB2YWx1ZSBvZiB0aGUgcGxheWVyJ3MgaGFuZAogICAgdWludDggbnVtQWNlczsKICAgIHVpbnQ4IGNhcmQ7CiAgICBmb3IgKHVpbnQ4IGkgPSAwOyBpIDwgbnVtQ2FyZHMgKyAyOyBpKyspIHsKICAgICAgaWYgKGkgIT0gMSAmJiBpICE9IDMpIHsgLy8xIGFuZCAzIGFyZSBkZWFsZXIgY2FyZHMKICAgICAgICBjYXJkID0gY2FyZHNbaV0gJTEzOwogICAgICAgIHBsYXllclZhbHVlICs9IGNhcmRWYWx1ZXNbY2FyZF07CiAgICAgICAgaWYgKGNhcmQgPT0gMCkgbnVtQWNlcysrOwogICAgICB9CgogICAgfQogICAgd2hpbGUgKG51bUFjZXMgPiAwICYmIHBsYXllclZhbHVlID4gMjEpIHsKICAgICAgcGxheWVyVmFsdWUgLT0gMTA7CiAgICAgIG51bUFjZXMtLTsKICAgIH0KICB9CgoKICAvKioKICAgKiAgIGNhbGN1bGF0ZXMgdGhlIHZhbHVlIG9mIGEgZGVhbGVyJ3MgaGFuZC4KICAgKiAgIGNhcmRzOiBob2xkcyB0aGUgKHBhcnRpYWwpIGRlY2suCiAgICogICBudW1DYXJkczogdGhlIG51bWJlciBvZiBjYXJkcyB0aGUgcGxheWVyIGhvbGRzCiAgICoqLwogIGZ1bmN0aW9uIGdldERlYWxlclZhbHVlKHVpbnQ4W10gY2FyZHMsIHVpbnQ4IG51bUNhcmRzKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zKHVpbnQ4IGRlYWxlclZhbHVlLCBib29sIGJqKSB7CiAgICAKICAgIC8vZGVhbGVyIGFsd2F5cyByZWNlaXZlcyBzZWNvbmQgYW5kIGZvcnRoIGNhcmQKICAgIHVpbnQ4IGNhcmQgID0gY2FyZHNbMV0gJSAxMzsKICAgIHVpbnQ4IGNhcmQyID0gY2FyZHNbM10gJSAxMzsKICAgIGRlYWxlclZhbHVlID0gY2FyZFZhbHVlc1tjYXJkXSArIGNhcmRWYWx1ZXNbY2FyZDJdOwogICAgdWludDggbnVtQWNlczsKICAgIGlmIChjYXJkID09IDApIG51bUFjZXMrKzsKICAgIGlmIChjYXJkMiA9PSAwKSBudW1BY2VzKys7CiAgICBpZiAoZGVhbGVyVmFsdWUgPiAyMSkgeyAvLzIgYWNlcyxjb3VudCBhcyAxMgogICAgICBkZWFsZXJWYWx1ZSAtPSAxMDsKICAgICAgbnVtQWNlcy0tOwogICAgfQogICAgZWxzZSBpZihkZWFsZXJWYWx1ZT09MjEpewogICAgICByZXR1cm4gKDIxLCB0cnVlKTsKICAgIH0KICAgIC8vdGFrZSBjYXJkcyB1bnRpbCB2YWx1ZSByZWFjaGVzIDE3IG9yIG1vcmUuIAogICAgdWludDggaTsKICAgIHdoaWxlIChkZWFsZXJWYWx1ZSA8IDE3KSB7CiAgICAgIGNhcmQgPSBjYXJkc1tudW1DYXJkcyArIGkgKyAyXSAlIDEzIDsKICAgICAgZGVhbGVyVmFsdWUgKz0gY2FyZFZhbHVlc1tjYXJkXTsKICAgICAgaWYgKGNhcmQgPT0gMCkgbnVtQWNlcysrOwogICAgICBpZiAoZGVhbGVyVmFsdWUgPiAyMSAmJiBudW1BY2VzID4gMCkgewogICAgICAgIGRlYWxlclZhbHVlIC09IDEwOwogICAgICAgIG51bUFjZXMtLTsKICAgICAgfQogICAgICBpKys7CiAgICB9CiAgfQogIAogIC8qKiBkZXRlcm1pbmVzIGlmIHR3byBjYXJkcyBoYXZlIHRoZSBzYW1lIGNvbG9yICoqLwogIGZ1bmN0aW9uIGlzU3VpdGVkKHVpbnQ4IGNhcmQxLCB1aW50OCBjYXJkMikgaW50ZXJuYWwgcmV0dXJucyhib29sKXsKICAgIHJldHVybiBjYXJkMS8xMyA9PSBjYXJkMi8xMzsKICB9CiAgCiAgLyoqIHRoZSBmYWxsYmFjayBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBzZW5kIGV0aGVyIHRvIGluY3JlYXNlIHRoZSBjYXNpbm8gYmFua3JvbGwgKiovCiAgZnVuY3Rpb24oKSBwYXlhYmxlIG9ubHlPd25lcnsKICB9CiAgCiAgLyoqIGFsbG93cyB0aGUgb3duZXIgdG8gd2l0aGRyYXcgZnVuZHMgKiovCiAgZnVuY3Rpb24gd2l0aGRyYXcodWludCBhbW91bnQpIG9ubHlPd25lcnsKICAgIGlmKGFtb3VudCA8IGFkZHJlc3ModGhpcykuYmFsYW5jZSkKICAgICAgaWYoIW93bmVyLnNlbmQoYW1vdW50KSkKICAgICAgICBFcnJvcig2KTsKICB9CiAgCiAgLyoqIGFsbG93cyB0aGUgb3duZXIgdG8gY2hhbmdlIHRoZSBzaWduZXIgYWRkcmVzcyAqKi8KICBmdW5jdGlvbiBzZXRTaWduZXIoYWRkcmVzcyBzaWduZXJBZGRyZXNzKSBvbmx5T3duZXJ7CiAgICBzaWduZXIgPSBzaWduZXJBZGRyZXNzOwogIH0KICAKICAvKiogYWxsb3dzIHRoZSBvd25lciB0byBjaGFuZ2UgdGhlIG1pbmltdW0gYmV0ICoqLwogIGZ1bmN0aW9uIHNldE1pbmltdW1CZXQodWludCBuZXdNaW4pIG9ubHlPd25lcnsKICAgIG1pbmltdW1CZXQgPSBuZXdNaW47CiAgfQogIAogIC8qKiBhbGxvd3MgdGhlIG93bmVyIHRvIGNoYW5nZSB0aGUgbXhpbXVtICoqLwogIGZ1bmN0aW9uIHNldE1heGltdW1CZXQodWludCBuZXdNYXgpIG9ubHlPd25lcnsKICAgIG1pbmltdW1CZXQgPSBuZXdNYXg7CiAgfQp9'.
	

]
