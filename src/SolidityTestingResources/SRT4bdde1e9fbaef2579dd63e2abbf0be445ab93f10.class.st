Class {
	#name : #SRT4bdde1e9fbaef2579dd63e2abbf0be445ab93f10,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4bdde1e9fbaef2579dd63e2abbf0be445ab93f10 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgCWlmIChhID09IDApIHsKICAJCXJldHVybiAwOwogIAl9CiAgCXVpbnQyNTYgYyA9IGEgKiBiOwogIAlhc3NlcnQoYyAvIGEgPT0gYik7CiAgCXJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAvLyB3ZSBkb24ndCBuZWVkICJkaXYiCi8qICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogIAkvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAJdWludDI1NiBjID0gYSAvIGI7CiAgCS8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgCXJldHVybiBjOwogIH0KKi8KICAvKioKICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAJYXNzZXJ0KGIgPD0gYSk7CiAgCXJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogIAl1aW50MjU2IGMgPSBhICsgYjsKICAJYXNzZXJ0KGMgPj0gYSk7CiAgCXJldHVybiBjOwogIH0KfQoKCmNvbnRyYWN0IENpdHlNYXlvciB7CgoJdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgoJLy8KCS8vIEVSQy0yMAoJLy8KCiAgIAlzdHJpbmcgcHVibGljIG5hbWUgPSAiQ2l0eUNvaW4iOwogICAJc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiQ0lUWSI7CiAgIAl1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAwOwoKCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCglldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKCWV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKCS8qKgoJKiBAZGV2IHRvdGFsIG51bWJlciBvZiB0b2tlbnMgaW4gZXhpc3RlbmNlCgkqLwoJdWludDI1NiB0b3RhbFN1cHBseV87CglmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKCQlyZXR1cm4gdG90YWxTdXBwbHlfOwoJfQoKCS8qKgoJKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCgkqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCgkqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KCSovCglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CgkJcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgkJcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKCQkvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCgkJYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKCQliYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKCQlUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCgkqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCgkqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgoJKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgoJKi8KCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CgkJcmV0dXJuIGJhbGFuY2VzW19vd25lcl07Cgl9CgoJbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKCgkvKioKCSogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCgkqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KCSogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCgkqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAoJKi8KCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CgkJcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgkJcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKCQlyZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CgoJCWJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKCQliYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKCQlhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwoJCVRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCgkqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgoJKgoJKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCgkqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKCSogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgoJKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQoJKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCgkqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCgkqLwoJZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKCQlhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKCQlBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvKioKCSogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgoJKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCgkqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgoJKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCgkqLwoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CgkJcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07Cgl9CgoJLyoqCgkqIEBkZXYgSW5jcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KCSoKCSogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CgkqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCgkqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKCSogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKCSogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgoJKiBAcGFyYW0gX2FkZGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gaW5jcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KCSovCglmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CgkJYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwoJCUFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCgkqIEBkZXYgRGVjcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KCSoKCSogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gZGVjcmVtZW50CgkqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCgkqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKCSogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKCSogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgoJKiBAcGFyYW0gX3N1YnRyYWN0ZWRWYWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBkZWNyZWFzZSB0aGUgYWxsb3dhbmNlIGJ5LgoJKi8KCWZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewoJCXVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKCQlpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CgkJCWFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKCQkJfSBlbHNlIHsKCQkJCWFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwoJCQl9CgkJCUFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CgkJCXJldHVybiB0cnVlOwoJCX0KCiAgIAkvLwogICAJLy8gR2FtZSBNZXRhIHZhbHVlcwogICAJLy8KCiAgIAlhZGRyZXNzIHB1YmxpYyB1bml0ZWROYXRpb25zOyAvLyB0aGUgVU4gb3JnYW5pc2F0aW9uCgogICAJdWludDE2IHB1YmxpYyBNQVhfQ0lUSUVTID0gNTAwMDsgLy8gbWF4aW11bSBhbW91bnQgb2YgY2l0aWVzIGluIG91ciB3b3JsZAogICAJdWludDI1NiBwdWJsaWMgVU5JVEVEX05BVElPTlNfRlVORCA9IDUwMDAwMDA7IC8vIGluaXRpYWwgZnVuZGluZyBmb3IgdGhlIFVOCiAgIAl1aW50MjU2IHB1YmxpYyBFQ09OT01ZX0JPT1NUID0gNTAwMDsgLy8gbWludGVkIENJVFlzIHdoZW4gYSBuZXcgY2l0eSBpcyBiZWluZyBib3VnaHQgCgogICAJdWludDI1NiBwdWJsaWMgQlVZX0NJVFlfRkVFID0gMzsgLy8gVU4gZmVlICglIG9mIGV0aGVyKSB0byBidXkgYSBjaXR5IGZyb20gc29tZW9uIC8gMTAwZQogICAJdWludDI1NiBwdWJsaWMgRUNPTk9NWV9CT09TVF9UUkFERSA9IDEwMDsgLy8gX2ltbXV0YWJsZV8gZ2lmdCAoaW4gQ0lUWSkgZnJvbSB0aGUgVU4gd2hlbiBhIGNpdHkgaXMgdHJhZGVkIChzaGFyZWQgYW1vbmcgdGhlIGNpdGllcyBvZiB0aGUgcmVsZXZhbnQgY291bnRyeSkKCiAgIAl1aW50MjU2IHB1YmxpYyBNT05VTUVOVF9VTl9GRUUgPSAzOyAvLyBVTiBmZWUgKENJVFkpIHRvIGJ1eSBhIG1vbnVtZW50CiAgIAl1aW50MjU2IHB1YmxpYyBNT05VTUVOVF9DSVRZX0ZFRSA9IDM7IC8vIGFkZGl0aW9uYWwgZmVlIChDSVRZKSB0byBidXkgYSBtb251bWVudCAoc2hhcmVkIHRvIHRoZSBtb251bWVudCdzIGNpdHkpCgogICAJLy8KICAgCS8vIEdhbWUgc3RydWN0dXJlcwogICAJLy8KCiAgIAlzdHJ1Y3QgY291bnRyeSB7CiAgIAkJc3RyaW5nIG5hbWU7CiAgIAkJdWludDE2W10gY2l0aWVzOwogICAJfQoKICAgCXN0cnVjdCBjaXR5IHsKICAgCQlzdHJpbmcgbmFtZTsKICAgCQl1aW50MjU2IHByaWNlOwogICAJCWFkZHJlc3Mgb3duZXI7CgogICAJCXVpbnQxNiBjb3VudHJ5SWQ7CiAgIAkJdWludDI1NltdIG1vbnVtZW50czsKCiAgIAkJYm9vbCBidXlhYmxlOyAvLyBzZXQgdG8gdHJ1ZSB3aGVuIGl0IGNhbiBiZSBib3VnaHQKCiAgIAkJdWludDI1NiBsYXN0X3B1cmNoYXNlX3ByaWNlOwogICAJfQoKICAgCXN0cnVjdCBtb251bWVudCB7CiAgIAkJc3RyaW5nIG5hbWU7CiAgIAkJdWludDI1NiBwcmljZTsKICAgCQlhZGRyZXNzIG93bmVyOwoKICAgCQl1aW50MTYgY2l0eUlkOwogICAJfQoKICAgCWNpdHlbXSBwdWJsaWMgY2l0aWVzOyAvLyBjaXR5SWQgLT4gY2l0eQogICAJY291bnRyeVtdIHB1YmxpYyBjb3VudHJpZXM7IC8vIGNvdW50cnlJZCAtPiBjb3VudHJ5CiAgIAltb251bWVudFtdIHB1YmxpYyBtb251bWVudHM7IC8vIG1vbnVtZW50SWQgLT4gbW9udW1lbnQKCiAgIAkvLyB0b3RhbCBhbW91bnQgb2Ygb2ZmZXJzIChlc2Nyb3dlZCBtb25leSkKCXVpbnQyNTYgcHVibGljIHRvdGFsT2ZmZXI7CgogICAJLy8KICAgCS8vIEdhbWUgZXZlbnRzCiAgIAkvLwoKCglldmVudCBOZXdDaXR5KHVpbnQyNTYgY2l0eUlkLCBzdHJpbmcgbmFtZSwgdWludDI1NiBwcmljZSwgdWludDE2IGNvdW50cnlJZCk7CglldmVudCBOZXdNb251bWVudCh1aW50MjU2IG1vbnVtZW50SWQsIHN0cmluZyBuYW1lLCB1aW50MjU2IHByaWNlLCB1aW50MTYgY2l0eUlkKTsKCglldmVudCBDaXR5Rm9yU2FsZSh1aW50MTYgY2l0eUlkLCB1aW50MjU2IHByaWNlKTsKCWV2ZW50IENpdHlTb2xkKHVpbnQxNiBjaXR5SWQsIHVpbnQyNTYgcHJpY2UsIGFkZHJlc3MgcHJldmlvdXNPd25lciwgYWRkcmVzcyBuZXdPd25lciwgdWludDI1NiBvZmZlcklkKTsKCglldmVudCBNb251bWVudFNvbGQodWludDI1NiBtb251bWVudElkLCB1aW50MjU2IHByaWNlKTsKCiAgIAkvLyAKICAgCS8vIEFkbWluIHN0dWZmCiAgIAkvLwoKICAgCS8vIGNvbnN0cnVjdG9yCiAgIAlmdW5jdGlvbiBDaXR5TWF5b3IoKSBwdWJsaWMgewogICAJCXVuaXRlZE5hdGlvbnMgPSBtc2cuc2VuZGVyOwogICAJCWJhbGFuY2VzW3VuaXRlZE5hdGlvbnNdID0gVU5JVEVEX05BVElPTlNfRlVORDsgLy8gaW5pdGlhbCBmdW5kaW5nIGZvciB0aGUgdW5pdGVkIG5hdGlvbnMKICAgCQl1aW50MjU2IHBlckZvdW5kZXIgPSA1MDAwMDA7CiAgIAkJYmFsYW5jZXNbYWRkcmVzcygweGUxODExZUM0OWY0OTNhZmIxRjRCNDJFM0VmNGEzQjlkNjJkOUEwMWIpXSA9IHBlckZvdW5kZXI7IC8vIGRhdmlkCiAgIAkJYmFsYW5jZXNbYWRkcmVzcygweDFFNEYxMjc1YkIwNDE1ODZEN0JlYzQ0RDJFM2U0RjMwZTBkQTdCYTQpXSA9IHBlckZvdW5kZXI7IC8vIHNpbW9uCiAgIAkJYmFsYW5jZXNbYWRkcmVzcygweEQ1ZDYzMDFkRTYyRDgyRjQ2MWRDMjk4MjRGQzU5N0QzOGQ4MGM0MjQpXSA9IHBlckZvdW5kZXI7IC8vIGVyaWMKICAgCQkvLyB0b3RhbCBzdXBwbHkgdXBkYXRlZAogICAJCXRvdGFsU3VwcGx5XyA9IFVOSVRFRF9OQVRJT05TX0ZVTkQgKyAzICogcGVyRm91bmRlcjsKICAgCX0KCiAgIAkvLyB0aGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gbGV0IGFkbWlucyBnaXZlIGNpdGllcyBiYWNrIHRvIG93bmVycyBvZiBwcmV2aW91cyBjb250cmFjdHMKICAgCWZ1bmN0aW9uIEFkbWluQnV5Rm9yU29tZW9uZSh1aW50MTYgX2NpdHlJZCwgYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB7CiAgIAkJLy8gYWRtaW4gb25seQogICAJCXJlcXVpcmUobXNnLnNlbmRlciA9PSB1bml0ZWROYXRpb25zKTsKCSAgIAkvLyBmZXRjaAoJICAgCWNpdHkgbWVtb3J5IGZldGNoZWRDaXR5ID0gY2l0aWVzW19jaXR5SWRdOwoJICAgCS8vIHJlcXVpcmVzCgkJcmVxdWlyZShmZXRjaGVkQ2l0eS5idXlhYmxlID09IHRydWUpOwoJCXJlcXVpcmUoZmV0Y2hlZENpdHkub3duZXIgPT0gMHgwKTsgCgkgICAJLy8gdHJhbnNmZXIgb3duZXJzaGlwCgkgICAJY2l0aWVzW19jaXR5SWRdLm93bmVyID0gX293bmVyOwoJICAgCS8vIHVwZGF0ZSBjaXR5IG1ldGFkYXRhCgkgICAJY2l0aWVzW19jaXR5SWRdLmJ1eWFibGUgPSBmYWxzZTsKCSAgIAljaXRpZXNbX2NpdHlJZF0ubGFzdF9wdXJjaGFzZV9wcmljZSA9IGZldGNoZWRDaXR5LnByaWNlOwoJICAgCS8vIGluY3JlYXNlIGVjb25vbXkgb2YgcmVnaW9uIGFjY29yZGluZyB0byBFQ09OT01ZX0JPT1NUCgkgICAJdWludDE2W10gbWVtb3J5IGZldGNoZWRDaXRpZXMgPSBjb3VudHJpZXNbZmV0Y2hlZENpdHkuY291bnRyeUlkXS5jaXRpZXM7CgkgICAJdWludDI1NiBwZXJDaXR5Qm9vc3QgPSBFQ09OT01ZX0JPT1NUIC8gZmV0Y2hlZENpdGllcy5sZW5ndGg7CgkgICAJZm9yKHVpbnQxNiBpaSA9IDA7IGlpIDwgZmV0Y2hlZENpdGllcy5sZW5ndGg7IGlpKyspewoJICAgCQlhZGRyZXNzIF90byA9IGNpdGllc1tmZXRjaGVkQ2l0aWVzW2lpXV0ub3duZXI7CgkgICAJCWlmKF90byAhPSAweDApIHsgLy8gTUlOVCBvbmx5IGlmIGFkZHJlc3MgZXhpc3RzCgkgICAJCQliYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQocGVyQ2l0eUJvb3N0KTsKCSAgIAkJCXRvdGFsU3VwcGx5XyArPSBwZXJDaXR5Qm9vc3Q7IC8vIHVwZGF0ZSB0aGUgdG90YWwgc3VwcGx5CgkgICAJCX0KCSAgIAl9CgkgICAJLy8gZXZlbnQKCSAgIAlDaXR5U29sZChfY2l0eUlkLCBmZXRjaGVkQ2l0eS5wcmljZSwgMHgwLCBfb3duZXIsIDB4ZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZik7CQogICAJfQoKICAgCS8vIHRoaXMgZnVuY3Rpb24gYWxsb3dzIHRvIG1ha2UgYW4gb2ZmZXIgZnJvbSBzb21lb25lIGVsc2UKCWZ1bmN0aW9uIG1ha2VPZmZlckZvckNpdHlGb3JTb21lb25lKHVpbnQxNiBfY2l0eUlkLCB1aW50MjU2IF9wcmljZSwgYWRkcmVzcyBmcm9tKSBwdWJsaWMgcGF5YWJsZSB7CgkJLy8gb25seSBmb3IgYWRtaW5zCgkJcmVxdWlyZShtc2cuc2VuZGVyID09IHVuaXRlZE5hdGlvbnMpOwoJCS8vIHJlcXVpcmVzCgkJcmVxdWlyZShjaXRpZXNbX2NpdHlJZF0ub3duZXIgIT0gMHgwKTsKCQlyZXF1aXJlKF9wcmljZSA+IDApOwoJCXJlcXVpcmUobXNnLnZhbHVlID49IF9wcmljZSk7CgkJcmVxdWlyZShjaXRpZXNbX2NpdHlJZF0ub3duZXIgIT0gZnJvbSk7CgkJLy8gYWRkIHRoZSBvZmZlcgoJCXVpbnQyNTYgbGFzdElkID0gb2ZmZXJzLnB1c2gob2ZmZXIoX2NpdHlJZCwgX3ByaWNlLCBmcm9tKSkgLSAxOwoJCS8vIGluY3JlbWVudCB0b3RhbE9mZmVyCgkJdG90YWxPZmZlciA9IHRvdGFsT2ZmZXIuYWRkKF9wcmljZSk7CgkJLy8gZXZlbnQKCQlPZmZlckZvckNpdHkobGFzdElkLCBfY2l0eUlkLCBfcHJpY2UsIGZyb20sIGNpdGllc1tfY2l0eUlkXS5vd25lcik7Cgl9CgoJLy8gd2l0aGRyYXdpbmcgZnVuZHMKCWZ1bmN0aW9uIGFkbWluV2l0aGRyYXcodWludDI1NiBfYW1vdW50KSBwdWJsaWMgewoJCXJlcXVpcmUobXNnLnNlbmRlciA9PSAweEQ1ZDYzMDFkRTYyRDgyRjQ2MWRDMjk4MjRGQzU5N0QzOGQ4MGM0MjQgfHwgbXNnLnNlbmRlciA9PSAweDFFNEYxMjc1YkIwNDE1ODZEN0JlYzQ0RDJFM2U0RjMwZTBkQTdCYTQgfHwgbXNnLnNlbmRlciA9PSAweGUxODExZUM0OWY0OTNhZmIxRjRCNDJFM0VmNGEzQjlkNjJkOUEwMWIgfHwgbXNnLnNlbmRlciA9PSB1bml0ZWROYXRpb25zKTsKCQkvLyBkbyBub3QgdG91Y2ggdGhlIGVzY3Jvd2VkIG1vbmV5CgkJdWludDI1NiB0b3RhbEF2YWlsYWJsZSA9IHRoaXMuYmFsYW5jZS5zdWIodG90YWxPZmZlcik7CgkJaWYoX2Ftb3VudCA+IHRvdGFsQXZhaWxhYmxlKSB7CgkJCV9hbW91bnQgPSB0b3RhbEF2YWlsYWJsZTsKCQl9CgkJLy8gZGl2aWRlIHRoZSBhbW91bnQgZm9yIGZvdW5kZXJzCgkJdWludDI1NiBwZXJGb3VuZGVyID0gX2Ftb3VudCAvIDM7CgkJYWRkcmVzcygweEQ1ZDYzMDFkRTYyRDgyRjQ2MWRDMjk4MjRGQzU5N0QzOGQ4MGM0MjQpLnRyYW5zZmVyKHBlckZvdW5kZXIpOyAvLyBlcmljCgkJYWRkcmVzcygweDFFNEYxMjc1YkIwNDE1ODZEN0JlYzQ0RDJFM2U0RjMwZTBkQTdCYTQpLnRyYW5zZmVyKHBlckZvdW5kZXIpOyAvLyBzaW1vbgoJCWFkZHJlc3MoMHhlMTgxMWVDNDlmNDkzYWZiMUY0QjQyRTNFZjRhM0I5ZDYyZDlBMDFiKS50cmFuc2ZlcihwZXJGb3VuZGVyKTsgLy8gZGF2aWQKCX0KCgkvLwoJLy8gQWRtaW4gYWRkaW5nIHN0dWZmCgkvLwoKCS8vIHdlIG5lZWQgdG8gYWRkIGEgY291bnRyeSBiZWZvcmUgd2UgY2FuIGFkZCBhIGNpdHkKCWZ1bmN0aW9uIGFkbWluQWRkQ291bnRyeShzdHJpbmcgX25hbWUpIHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CgkJLy8gcmVxdWlyZXMKCQlyZXF1aXJlKG1zZy5zZW5kZXIgPT0gdW5pdGVkTmF0aW9ucyk7CgkJLy8gYWRkIGNvdW50cnkKCQl1aW50MjU2IGxhc3RJZCA9IGNvdW50cmllcy5wdXNoKGNvdW50cnkoX25hbWUsIG5ldyB1aW50MTZbXSgwKSkpIC0gMTsgCgkJLy8KCQlyZXR1cm4gbGFzdElkOwoJfQoJLy8gYWRkaW5nIGEgY2l0eSB3aWxsIG1pbnQgRUNPTk9NWV9CT09TVCBjaXR5Y29pbnMgKGNvdW50cnkgbXVzdCBleGlzdCkKCWZ1bmN0aW9uIGFkbWluQWRkQ2l0eShzdHJpbmcgX25hbWUsIHVpbnQyNTYgX3ByaWNlLCB1aW50MTYgX2NvdW50cnlJZCkgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKCQkvLyByZXF1aXJlcwoJCXJlcXVpcmUobXNnLnNlbmRlciA9PSB1bml0ZWROYXRpb25zKTsKCQlyZXF1aXJlKGNpdGllcy5sZW5ndGggPCBNQVhfQ0lUSUVTKTsKCQkvLyBhZGQgY2l0eQoJCXVpbnQyNTYgbGFzdElkID0gY2l0aWVzLnB1c2goY2l0eShfbmFtZSwgX3ByaWNlLCAwLCBfY291bnRyeUlkLCBuZXcgdWludDI1NltdKDApLCB0cnVlLCAwKSkgLSAxOwoJCWNvdW50cmllc1tfY291bnRyeUlkXS5jaXRpZXMucHVzaCh1aW50MTYobGFzdElkKSk7CgkJLy8gZXZlbnQKCQlOZXdDaXR5KGxhc3RJZCwgX25hbWUsIF9wcmljZSwgX2NvdW50cnlJZCk7CgkJLy8KCQlyZXR1cm4gbGFzdElkOwoJfQoKCS8vIGFkZGluZyBhIG1vbnVtZW50IChjaXR5IG11c3QgZXhpc3QpCglmdW5jdGlvbiBhZG1pbkFkZE1vbnVtZW50KHN0cmluZyBfbmFtZSwgdWludDI1NiBfcHJpY2UsIHVpbnQxNiBfY2l0eUlkKSBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewoJCS8vIHJlcXVpcmVzCgkJcmVxdWlyZShtc2cuc2VuZGVyID09IHVuaXRlZE5hdGlvbnMpOwoJCXJlcXVpcmUoX3ByaWNlID4gMCk7CgkJLy8gYWRkIG1vbnVtZW50CgkJdWludDI1NiBsYXN0SWQgPSBtb251bWVudHMucHVzaChtb251bWVudChfbmFtZSwgX3ByaWNlLCAwLCBfY2l0eUlkKSkgLSAxOwoJCWNpdGllc1tfY2l0eUlkXS5tb251bWVudHMucHVzaChsYXN0SWQpOwoJCS8vIGV2ZW50CgkJTmV3TW9udW1lbnQobGFzdElkLCBfbmFtZSwgX3ByaWNlLCBfY2l0eUlkKTsKCQkvLwoJCXJldHVybiBsYXN0SWQ7Cgl9CgoJLy8gRWRpdCBhIGNpdHkgaWYgaXQgaGFzbid0IGJlZW4gYm91Z2h0IHlldAoJZnVuY3Rpb24gYWRtaW5FZGl0Q2l0eSh1aW50MTYgX2NpdHlJZCwgc3RyaW5nIF9uYW1lLCB1aW50MjU2IF9wcmljZSwgYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB7CgkJLy8gcmVxdWlyZXMKCQlyZXF1aXJlKG1zZy5zZW5kZXIgPT0gdW5pdGVkTmF0aW9ucyk7CgkJcmVxdWlyZShjaXRpZXNbX2NpdHlJZF0ub3duZXIgPT0gMHgwKTsKCQkvLwoJCWNpdGllc1tfY2l0eUlkXS5uYW1lID0gX25hbWU7CgkJY2l0aWVzW19jaXR5SWRdLnByaWNlID0gX3ByaWNlOwoJCWNpdGllc1tfY2l0eUlkXS5vd25lciA9IF9vd25lcjsKCX0KCgkvLyAKCS8vIEJ1eSBhbmQgbWFuYWdlIGEgY2l0eQoJLy8KCglmdW5jdGlvbiBidXlDaXR5KHVpbnQxNiBfY2l0eUlkKSBwdWJsaWMgcGF5YWJsZSB7CgkJLy8gZmV0Y2gKCQljaXR5IG1lbW9yeSBmZXRjaGVkQ2l0eSA9IGNpdGllc1tfY2l0eUlkXTsKCQkvLyByZXF1aXJlcwoJCXJlcXVpcmUoZmV0Y2hlZENpdHkuYnV5YWJsZSA9PSB0cnVlKTsKCQlyZXF1aXJlKGZldGNoZWRDaXR5Lm93bmVyID09IDB4MCk7IAoJCXJlcXVpcmUobXNnLnZhbHVlID49IGZldGNoZWRDaXR5LnByaWNlKTsKCQkvLyB0cmFuc2ZlciBvd25lcnNoaXAKCQljaXRpZXNbX2NpdHlJZF0ub3duZXIgPSBtc2cuc2VuZGVyOwoJCS8vIHVwZGF0ZSBjaXR5IG1ldGFkYXRhCgkJY2l0aWVzW19jaXR5SWRdLmJ1eWFibGUgPSBmYWxzZTsKCQljaXRpZXNbX2NpdHlJZF0ubGFzdF9wdXJjaGFzZV9wcmljZSA9IGZldGNoZWRDaXR5LnByaWNlOwoJCS8vIGluY3JlYXNlIGVjb25vbXkgb2YgcmVnaW9uIGFjY29yZGluZyB0byBFQ09OT01ZX0JPT1NUCgkJdWludDE2W10gbWVtb3J5IGZldGNoZWRDaXRpZXMgPSBjb3VudHJpZXNbZmV0Y2hlZENpdHkuY291bnRyeUlkXS5jaXRpZXM7CgkJdWludDI1NiBwZXJDaXR5Qm9vc3QgPSBFQ09OT01ZX0JPT1NUIC8gZmV0Y2hlZENpdGllcy5sZW5ndGg7CgkJZm9yKHVpbnQxNiBpaSA9IDA7IGlpIDwgZmV0Y2hlZENpdGllcy5sZW5ndGg7IGlpKyspewoJCQlhZGRyZXNzIF90byA9IGNpdGllc1tmZXRjaGVkQ2l0aWVzW2lpXV0ub3duZXI7CgkJCWlmKF90byAhPSAweDApIHsgLy8gTUlOVCBvbmx5IGlmIGFkZHJlc3MgZXhpc3RzCgkJCQliYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQocGVyQ2l0eUJvb3N0KTsKCQkJCXRvdGFsU3VwcGx5XyArPSBwZXJDaXR5Qm9vc3Q7IC8vIHVwZGF0ZSB0aGUgdG90YWwgc3VwcGx5CgkJCX0KCQl9CgkJLy8gZXZlbnQKCQlDaXR5U29sZChfY2l0eUlkLCBmZXRjaGVkQ2l0eS5wcmljZSwgMHgwLCBtc2cuc2VuZGVyLCAweGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYpOwoJfQoKCS8vCgkvLyBFY29ub215IGJvb3N0OgoJLy8gdGhpcyBpcyBjYWxsZWQgYnkgZnVuY3Rpb25zIGJlbG93IHRoYXQgd2lsbCAiYnV5IGEgY2l0eSBmcm9tIHNvbWVvbmUgZWxzZSIKCS8vIGl0IHdpbGwgZHJhdyBFQ09OT01ZX0JPT1NUX1RSQURFIENJVFlzIGZyb20gdGhlIFVOIGZ1bmRzIGFuZCBzcGxpdCB0aGVtIGluIHRoZSByZWxldmFudCBjb3VudHJ5CgkvLwoKCWZ1bmN0aW9uIGVjb25vbXlCb29zdCh1aW50MTYgX2NvdW50cnlJZCwgdWludDE2IF9leGNsdWRlQ2l0eUlkKSBwcml2YXRlIHsKCQlpZihiYWxhbmNlc1t1bml0ZWROYXRpb25zXSA8IEVDT05PTVlfQk9PU1RfVFJBREUpIHsKCQkJcmV0dXJuOyAvLyB1bmxlc3MgdGhlIFVOIGhhcyBubyBtb3JlIGZ1bmRzCgkJfQoJCXVpbnQxNltdIG1lbW9yeSBmZXRjaGVkQ2l0aWVzID0gY291bnRyaWVzW19jb3VudHJ5SWRdLmNpdGllczsKCQlpZihmZXRjaGVkQ2l0aWVzLmxlbmd0aCA9PSAxKSB7CgkJCXJldHVybjsKCQl9CgkJdWludDI1NiBwZXJDaXR5Qm9vc3QgPSBFQ09OT01ZX0JPT1NUX1RSQURFIC8gKGZldGNoZWRDaXRpZXMubGVuZ3RoIC0gMSk7IC8vIGV4Y2x1ZGluZyB0aGUgYm91Z2h0IGNpdHkKCQlmb3IodWludDE2IGlpID0gMDsgaWkgPCBmZXRjaGVkQ2l0aWVzLmxlbmd0aDsgaWkrKyl7CgkJCWFkZHJlc3MgX3RvID0gY2l0aWVzW2ZldGNoZWRDaXRpZXNbaWldXS5vd25lcjsKCQkJaWYoX3RvICE9IDB4MCAmJiBmZXRjaGVkQ2l0aWVzW2lpXSAhPSBfZXhjbHVkZUNpdHlJZCkgeyAvLyBvbmx5IGlmIGFkZHJlc3MgZXhpc3RzIEFORCBub3QgdGhlIGN1cnJlbnQgY2l0eQoJCQkJYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKHBlckNpdHlCb29zdCk7CgkJCQliYWxhbmNlc1t1bml0ZWROYXRpb25zXSAtPSBwZXJDaXR5Qm9vc3Q7CgkJCX0KCQl9Cgl9CgoJLy8KCS8vIFNlbGwgYSBjaXR5CgkvLwoKCS8vIHN0ZXAgMTogb3duZXIgc2V0cyBidXlhYmxlID0gdHJ1ZQoJZnVuY3Rpb24gc2VsbENpdHlGb3JFdGhlcih1aW50MTYgX2NpdHlJZCwgdWludDI1NiBfcHJpY2UpIHB1YmxpYyB7CgkJLy8gcmVxdWlyZXMKCQlyZXF1aXJlKGNpdGllc1tfY2l0eUlkXS5vd25lciA9PSBtc2cuc2VuZGVyKTsKCQkvLyBmb3Igc2FsZQoJCWNpdGllc1tfY2l0eUlkXS5wcmljZSA9IF9wcmljZTsKCQljaXRpZXNbX2NpdHlJZF0uYnV5YWJsZSA9IHRydWU7CgkJLy8gZXZlbnQKCQlDaXR5Rm9yU2FsZShfY2l0eUlkLCBfcHJpY2UpOwoJfQoKCWV2ZW50IENpdHlOb3RGb3JTYWxlKHVpbnQxNiBjaXR5SWQpOwoKCS8vIHN0ZXAgMjogb3duZXIgY2FuIGFsd2F5cyBjYW5jZWwgCglmdW5jdGlvbiBjYW5jZWxTZWxsQ2l0eUZvckV0aGVyKHVpbnQxNiBfY2l0eUlkKSBwdWJsaWMgewoJCS8vIHJlcXVpcmVzCgkJcmVxdWlyZShjaXRpZXNbX2NpdHlJZF0ub3duZXIgPT0gbXNnLnNlbmRlcik7CgkJLy8KCQljaXRpZXNbX2NpdHlJZF0uYnV5YWJsZSA9IGZhbHNlOwoJCS8vIGV2ZW50CgkJQ2l0eU5vdEZvclNhbGUoX2NpdHlJZCk7Cgl9CgoJLy8gc3RlcCAzOiBzb21lb25lIGVsc2UgYWNjZXB0cyB0aGUgb2ZmZXIKCWZ1bmN0aW9uIHJlc29sdmVTZWxsQ2l0eUZvckV0aGVyKHVpbnQxNiBfY2l0eUlkKSBwdWJsaWMgcGF5YWJsZSB7CgkJLy8gZmV0Y2gKCQljaXR5IG1lbW9yeSBmZXRjaGVkQ2l0eSA9IGNpdGllc1tfY2l0eUlkXTsKCQkvLyByZXF1aXJlcwoJCXJlcXVpcmUoZmV0Y2hlZENpdHkuYnV5YWJsZSA9PSB0cnVlKTsKCQlyZXF1aXJlKG1zZy52YWx1ZSA+PSBmZXRjaGVkQ2l0eS5wcmljZSk7CgkJcmVxdWlyZShmZXRjaGVkQ2l0eS5vd25lciAhPSBtc2cuc2VuZGVyKTsKCQkvLyBjYWxjdWxhdGUgdGhlIGZlZQoJCXVpbnQyNTYgZmVlID0gQlVZX0NJVFlfRkVFLm11bChmZXRjaGVkQ2l0eS5wcmljZSkgLyAxMDA7CgkJLy8gcGF5IHRoZSBwcmljZQoJCWFkZHJlc3MgcHJldmlvdXNPd25lciA9CWZldGNoZWRDaXR5Lm93bmVyOwoJCXByZXZpb3VzT3duZXIudHJhbnNmZXIoZmV0Y2hlZENpdHkucHJpY2Uuc3ViKGZlZSkpOwoJCS8vIHRyYW5zZmVyIG9mIG93bmVyc2hpcAoJCWNpdGllc1tfY2l0eUlkXS5vd25lciA9IG1zZy5zZW5kZXI7CgkJLy8gdXBkYXRlIG1ldGFkYXRhCgkJY2l0aWVzW19jaXR5SWRdLmJ1eWFibGUgPSBmYWxzZTsKCQljaXRpZXNbX2NpdHlJZF0ubGFzdF9wdXJjaGFzZV9wcmljZSA9IGZldGNoZWRDaXR5LnByaWNlOwoJCS8vIGluY3JlYXNlIGVjb25vbXkgb2YgcmVnaW9uCgkJZWNvbm9teUJvb3N0KGZldGNoZWRDaXR5LmNvdW50cnlJZCwgX2NpdHlJZCk7CgkJLy8gZXZlbnQKCQlDaXR5U29sZChfY2l0eUlkLCBmZXRjaGVkQ2l0eS5wcmljZSwgcHJldmlvdXNPd25lciwgbXNnLnNlbmRlciwgMHhmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmKTsKCX0KCgkvLwoJLy8gTWFrZSBhbiBvZmZlciBmb3IgYSBjaXR5CgkvLwoKCXN0cnVjdCBvZmZlciB7CgkJdWludDE2IGNpdHlJZDsKCQl1aW50MjU2IHByaWNlOwoJCWFkZHJlc3MgZnJvbTsKCX0KCglvZmZlcltdIHB1YmxpYyBvZmZlcnM7CgoJZXZlbnQgT2ZmZXJGb3JDaXR5KHVpbnQyNTYgb2ZmZXJJZCwgdWludDE2IGNpdHlJZCwgdWludDI1NiBwcmljZSwgYWRkcmVzcyBvZmZlcmVyQWRkcmVzcywgYWRkcmVzcyBvd25lcik7CglldmVudCBDYW5jZWxPZmZlckZvckNpdHkodWludDI1NiBvZmZlcklkKTsKCgkvLyAxLiB3ZSBtYWtlIGFuIG9mZmVyIGZvciBzb21lIGNpdHlJZCB0aGF0IHdlIGRvbid0IG93biB5ZXQgKHdlIGRlcG9zaXQgbW9uZXkgaW4gZXNjcm93KQoJZnVuY3Rpb24gbWFrZU9mZmVyRm9yQ2l0eSh1aW50MTYgX2NpdHlJZCwgdWludDI1NiBfcHJpY2UpIHB1YmxpYyBwYXlhYmxlIHsKCQkvLyByZXF1aXJlcwoJCXJlcXVpcmUoY2l0aWVzW19jaXR5SWRdLm93bmVyICE9IDB4MCk7CgkJcmVxdWlyZShfcHJpY2UgPiAwKTsKCQlyZXF1aXJlKG1zZy52YWx1ZSA+PSBfcHJpY2UpOwoJCXJlcXVpcmUoY2l0aWVzW19jaXR5SWRdLm93bmVyICE9IG1zZy5zZW5kZXIpOwoJCS8vIGFkZCB0aGUgb2ZmZXIKCQl1aW50MjU2IGxhc3RJZCA9IG9mZmVycy5wdXNoKG9mZmVyKF9jaXR5SWQsIF9wcmljZSwgbXNnLnNlbmRlcikpIC0gMTsKCQkvLyBpbmNyZW1lbnQgdG90YWxPZmZlcgoJCXRvdGFsT2ZmZXIgPSB0b3RhbE9mZmVyLmFkZChfcHJpY2UpOwoJCS8vIGV2ZW50CgkJT2ZmZXJGb3JDaXR5KGxhc3RJZCwgX2NpdHlJZCwgX3ByaWNlLCBtc2cuc2VuZGVyLCBjaXRpZXNbX2NpdHlJZF0ub3duZXIpOwoJfQoKCS8vIDIuIHdlIGNhbmNlbCBpdCAoZ2V0dGluZyBiYWNrIG91ciBtb25leSkKCWZ1bmN0aW9uIGNhbmNlbE9mZmVyRm9yQ2l0eSh1aW50MjU2IF9vZmZlcklkKSBwdWJsaWMgewoJCS8vIGZldGNoCgkJb2ZmZXIgbWVtb3J5IG9mZmVyRmV0Y2hlZCA9IG9mZmVyc1tfb2ZmZXJJZF07CgkJLy8gcmVxdWlyZXMKCQlyZXF1aXJlKG9mZmVyRmV0Y2hlZC5mcm9tID09IG1zZy5zZW5kZXIpOwoJCS8vIHJlZnVuZAoJCW1zZy5zZW5kZXIudHJhbnNmZXIob2ZmZXJGZXRjaGVkLnByaWNlKTsKCQkvLyBkZWNyZW1lbnQgdG90YWxvZmZlcgoJCXRvdGFsT2ZmZXIgPSB0b3RhbE9mZmVyLnN1YihvZmZlckZldGNoZWQucHJpY2UpOwoJCS8vIHJlbW92ZSBvZmZlcgoJCW9mZmVyc1tfb2ZmZXJJZF0uY2l0eUlkID0gMDsKCQlvZmZlcnNbX29mZmVySWRdLnByaWNlID0gMDsKCQlvZmZlcnNbX29mZmVySWRdLmZyb20gPSAweDA7CgkJLy8gZXZlbnQKCQlDYW5jZWxPZmZlckZvckNpdHkoX29mZmVySWQpOwoJfQoKCS8vIDMuIHRoZSBjaXR5IG93bmVyIGNhbiBhY2NlcHQgdGhlIG9mZmVyCglmdW5jdGlvbiBhY2NlcHRPZmZlckZvckNpdHkodWludDI1NiBfb2ZmZXJJZCwgdWludDE2IF9jaXR5SWQsIHVpbnQyNTYgX3ByaWNlKSBwdWJsaWMgewoJCS8vIGZldGNoCgkJY2l0eSBtZW1vcnkgZmV0Y2hlZENpdHkgPSBjaXRpZXNbX2NpdHlJZF07CgkJb2ZmZXIgbWVtb3J5IG9mZmVyRmV0Y2hlZCA9IG9mZmVyc1tfb2ZmZXJJZF07CgkJLy8gcmVxdWlyZXMKCQlyZXF1aXJlKG9mZmVyRmV0Y2hlZC5jaXR5SWQgPT0gX2NpdHlJZCk7CgkJcmVxdWlyZShvZmZlckZldGNoZWQuZnJvbSAhPSAweDApOwoJCXJlcXVpcmUob2ZmZXJGZXRjaGVkLmZyb20gIT0gbXNnLnNlbmRlcik7CgkJcmVxdWlyZShvZmZlckZldGNoZWQucHJpY2UgPT0gX3ByaWNlKTsKCQlyZXF1aXJlKGZldGNoZWRDaXR5Lm93bmVyID09IG1zZy5zZW5kZXIpOwoJCS8vIGNvbXB1dGUgdGhlIGZlZQoJCXVpbnQyNTYgZmVlID0gQlVZX0NJVFlfRkVFLm11bChfcHJpY2UpIC8gMTAwOwoJCS8vIHRyYW5zZmVyIHRoZSBlc2Nyb3dlZCBtb25leQoJCXVpbnQyNTYgcHJpY2VTdWJGZWUgPSBfcHJpY2Uuc3ViKGZlZSk7CgkJY2l0aWVzW19jaXR5SWRdLm93bmVyLnRyYW5zZmVyKHByaWNlU3ViRmVlKTsKCQkvLyBkZWNyZW1lbnQgdHJhY2tlZCBhbW91bnQgb2YgZXNjcm93ZWQgZXRoZXJzCgkJdG90YWxPZmZlciA9IHRvdGFsT2ZmZXIuc3ViKHByaWNlU3ViRmVlKTsKCQkvLyB0cmFuc2ZlciBvZiBvd25lcnNoaXAKCQljaXRpZXNbX2NpdHlJZF0ub3duZXIgPSBvZmZlckZldGNoZWQuZnJvbTsKCQkvLyB1cGRhdGUgbWV0YWRhdGEKCQljaXRpZXNbX2NpdHlJZF0ubGFzdF9wdXJjaGFzZV9wcmljZSA9IF9wcmljZTsKCQljaXRpZXNbX2NpdHlJZF0uYnV5YWJsZSA9IGZhbHNlOyAvLyBpbiBjYXNlIGl0IHdhcyBhbHNvIHNldCB0byBiZSBwdXJjaGFzYWJsZQoJCS8vIGluY3JlYXNlIGVjb25vbXkgb2YgcmVnaW9uIAoJCWVjb25vbXlCb29zdChmZXRjaGVkQ2l0eS5jb3VudHJ5SWQsIF9jaXR5SWQpOwoJCS8vIGV2ZW50CgkJQ2l0eVNvbGQoX2NpdHlJZCwgX3ByaWNlLCBtc2cuc2VuZGVyLCBvZmZlckZldGNoZWQuZnJvbSwgX29mZmVySWQpOwoJCS8vIHJlbW92ZSBvZmZlcgoJCW9mZmVyc1tfb2ZmZXJJZF0uY2l0eUlkID0gMDsKCQlvZmZlcnNbX29mZmVySWRdLnByaWNlID0gMDsKCQlvZmZlcnNbX29mZmVySWRdLmZyb20gPSAweDA7Cgl9CgoJLy8KCS8vIGluLWdhbWUgdXNlIG9mIENJVFlzCgkvLwoKCS8qIAogICAJdWludDI1NiBwdWJsaWMgTU9OVU1FTlRfVU5fRkVFID0gMzsgLy8gVU4gZmVlIChDSVRZKSB0byBidXkgYSBtb251bWVudAogICAJdWludDI1NiBwdWJsaWMgTU9OVU1FTlRfQ0lUWV9GRUUgPSAzOyAvLyBhZGRpdGlvbmFsIGZlZSAoQ0lUWSkgdG8gYnV5IGEgbW9udW1lbnQgKHNoYXJlZCB0byB0aGUgbW9udW1lbnQncyBjaXR5KQogICAJKi8KCgkvLyBhbnlvbmUgY2FuIGJ1eSBhIG1vbnVtZW50IGZyb20gc29tZW9uZSBlbHNlICh3aXRoIENJVFlzKQoJZnVuY3Rpb24gYnV5TW9udW1lbnQodWludDI1NiBfbW9udW1lbnRJZCwgdWludDI1NiBfcHJpY2UpIHB1YmxpYyB7CgkJLy8gZmV0Y2gKCQltb251bWVudCBtZW1vcnkgZmV0Y2hlZE1vbnVtZW50ID0gbW9udW1lbnRzW19tb251bWVudElkXTsKCQkvLyByZXF1aXJlcwoJCXJlcXVpcmUoZmV0Y2hlZE1vbnVtZW50LnByaWNlID4gMCk7CgkJcmVxdWlyZShmZXRjaGVkTW9udW1lbnQucHJpY2UgPT0gX3ByaWNlKTsKCQlyZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9wcmljZSk7CgkJcmVxdWlyZShmZXRjaGVkTW9udW1lbnQub3duZXIgIT0gbXNnLnNlbmRlcik7CgkJLy8gcGF5IGZpcnN0IQoJCWJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF9wcmljZSk7CgkJLy8gY29tcHV0ZSBmZWUKCQl1aW50MjU2IFVOX2ZlZSA9IE1PTlVNRU5UX1VOX0ZFRS5tdWwoX3ByaWNlKSAvIDEwMDsKCQl1aW50MjU2IGNpdHlfZmVlID0gTU9OVU1FTlRfQ0lUWV9GRUUubXVsKF9wcmljZSkgLyAxMDA7CgkJLy8gcHJldmlvdXMgb3duZXIgZ2V0cyBwYWlkCgkJdWludDI1NiB0b0JlUGFpZCA9IF9wcmljZS5zdWIoVU5fZmVlKTsKCQl0b0JlUGFpZCA9IHRvQmVQYWlkLnN1YihjaXR5X2ZlZSk7CgkJYmFsYW5jZXNbZmV0Y2hlZE1vbnVtZW50Lm93bmVyXSA9IGJhbGFuY2VzW2ZldGNoZWRNb251bWVudC5vd25lcl0uYWRkKHRvQmVQYWlkKTsKCQkvLyBVTiBnZXRzIGEgZmVlCgkJYmFsYW5jZXNbdW5pdGVkTmF0aW9uc10gPSBiYWxhbmNlc1t1bml0ZWROYXRpb25zXS5hZGQoVU5fZmVlKTsKCQkvLyBjaXR5IGdldHMgYSBmZWUKCQlhZGRyZXNzIGNpdHlPd25lciA9IGNpdGllc1tmZXRjaGVkTW9udW1lbnQuY2l0eUlkXS5vd25lcjsKCQliYWxhbmNlc1tjaXR5T3duZXJdID0gYmFsYW5jZXNbY2l0eU93bmVyXS5hZGQoY2l0eV9mZWUpOwoJCS8vIHRyYW5zZmVyIG9mIG93bmVyc2hpcAoJCW1vbnVtZW50c1tfbW9udW1lbnRJZF0ub3duZXIgPSBtc2cuc2VuZGVyOwoJCS8vIHByaWNlIGluY3JlYXNlIG9mIHRoZSBtb251bWVudAoJCW1vbnVtZW50c1tfbW9udW1lbnRJZF0ucHJpY2UgPSBtb251bWVudHNbX21vbnVtZW50SWRdLnByaWNlLm11bCgyKTsKCQkvLyBldmVudAoJCU1vbnVtZW50U29sZChfbW9udW1lbnRJZCwgX3ByaWNlKTsKCX0KCn0='.
	

]
