Class {
	#name : #SRT19662C22eaaB9FB69Add72ef54B296C5a72593B5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT19662C22eaaB9FB69Add72ef54B296C5a72593B5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKbGlicmFyeSBTYWZlTWF0aCB7CiAgICAKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CgogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwoKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgoKY29udHJhY3QgT3duYWJsZSB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQoKfQoKCmNvbnRyYWN0IEVSQzIwQmFzaWMgewoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIAogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgoKY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9Cgp9CgoKY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgICAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgICAgICB9CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKCmNvbnRyYWN0IFJlbGVhc2FibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKCiAgICBhZGRyZXNzIHB1YmxpYyByZWxlYXNlQWdlbnQ7CgogICAgYm9vbCBwdWJsaWMgcmVsZWFzZWQgPSBmYWxzZTsKCiAgICBldmVudCBSZWxlYXNlZCgpOwoKICAgIGV2ZW50IFJlbGVhc2VBZ2VudFNldChhZGRyZXNzIHJlbGVhc2VBZ2VudCk7CgogICAgZXZlbnQgVHJhbnNmZXJBZ2VudFNldChhZGRyZXNzIHRyYW5zZmVyQWdlbnQsIGJvb2wgc3RhdHVzKTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyB0cmFuc2ZlckFnZW50czsKCiAgICBtb2RpZmllciBjYW5UcmFuc2ZlcihhZGRyZXNzIF9zZW5kZXIpIHsKICAgICAgICByZXF1aXJlKHJlbGVhc2VkIHx8IHRyYW5zZmVyQWdlbnRzW19zZW5kZXJdKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGluUmVsZWFzZVN0YXRlKGJvb2wgcmVsZWFzZVN0YXRlKSB7CiAgICAgICAgcmVxdWlyZShyZWxlYXNlU3RhdGUgPT0gcmVsZWFzZWQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVJlbGVhc2VBZ2VudCgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gcmVsZWFzZUFnZW50KTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFJlbGVhc2VBZ2VudChhZGRyZXNzIGFkZHIpIHB1YmxpYyBvbmx5T3duZXIgaW5SZWxlYXNlU3RhdGUoZmFsc2UpIHsKICAgICAgICBSZWxlYXNlQWdlbnRTZXQoYWRkcik7CiAgICAgICAgcmVsZWFzZUFnZW50ID0gYWRkcjsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRUcmFuc2ZlckFnZW50KGFkZHJlc3MgYWRkciwgYm9vbCBzdGF0ZSkgcHVibGljIG9ubHlPd25lciBpblJlbGVhc2VTdGF0ZShmYWxzZSkgewogICAgICAgIFRyYW5zZmVyQWdlbnRTZXQoYWRkciwgc3RhdGUpOwogICAgICAgIHRyYW5zZmVyQWdlbnRzW2FkZHJdID0gc3RhdGU7CiAgICB9CgogICAgZnVuY3Rpb24gcmVsZWFzZVRva2VuVHJhbnNmZXIoKSBwdWJsaWMgb25seVJlbGVhc2VBZ2VudCB7CiAgICAgICAgUmVsZWFzZWQoKTsKICAgICAgICByZWxlYXNlZCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIAogICAgICAgICAgICAgICAgICAgICAgdWludCBfdmFsdWUpIHB1YmxpYyBjYW5UcmFuc2Zlcihtc2cuc2VuZGVyKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCAKICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIF90bywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBfdmFsdWUpIHB1YmxpYyBjYW5UcmFuc2ZlcihfZnJvbSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQp9CgoKY29udHJhY3QgVHJ1TWludGFibGVUb2tlbiBpcyBSZWxlYXNhYmxlVG9rZW4gewogICAgCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAgIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKICAgIGJvb2wgcHVibGljIHByZVNhbGVDb21wbGV0ZSA9IGZhbHNlOwoKICAgIGJvb2wgcHVibGljIHNhbGVDb21wbGV0ZSA9IGZhbHNlOwoKICAgIGV2ZW50IE1pbnRlZChhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF9hbW91bnQpOwoKICAgIGV2ZW50IE1pbnRGaW5pc2hlZChhZGRyZXNzIGluZGV4ZWQgX2V4ZWN1dG9yKTsKICAgIAogICAgZXZlbnQgUHJlU2FsZUNvbXBsZXRlKGFkZHJlc3MgaW5kZXhlZCBfZXhlY3V0b3IpOwoKICAgIGV2ZW50IFNhbGVDb21wbGV0ZShhZGRyZXNzIGluZGV4ZWQgX2V4ZWN1dG9yKTsKCiAgICBtb2RpZmllciBjYW5NaW50KCkgewogICAgICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgY2FuTWludCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfYW1vdW50ID4gMCk7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgICAgIE1pbnRlZChfdG8sIF9hbW91bnQpOwogICAgICAgIFRyYW5zZmVyKDB4MCwgX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKGJvb2wgX3ByZXNhbGUsIGJvb2wgX3NhbGUpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3NhbGUgIT0gX3ByZXNhbGUpOwogICAgICAgIGlmIChfcHJlc2FsZSA9PSB0cnVlKSB7CiAgICAgICAgICAgIHByZVNhbGVDb21wbGV0ZSA9IHRydWU7CiAgICAgICAgICAgIFByZVNhbGVDb21wbGV0ZShtc2cuc2VuZGVyKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJlcXVpcmUocHJlU2FsZUNvbXBsZXRlID09IHRydWUpOwogICAgICAgIHNhbGVDb21wbGV0ZSA9IHRydWU7CiAgICAgICAgU2FsZUNvbXBsZXRlKG1zZy5zZW5kZXIpOwogICAgICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICAgICAgTWludEZpbmlzaGVkKG1zZy5zZW5kZXIpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgoKY29udHJhY3QgVXBncmFkZUFnZW50IHsKICAgIAogICAgdWludCBwdWJsaWMgb3JpZ2luYWxTdXBwbHk7CgogICAgZnVuY3Rpb24gaXNVcGdyYWRlQWdlbnQoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdXBncmFkZUZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIHB1YmxpYzsKfQoKCmNvbnRyYWN0IFRydVVwZ3JhZGVhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICBhZGRyZXNzIHB1YmxpYyB1cGdyYWRlTWFzdGVyOwoKICAgIFVwZ3JhZGVBZ2VudCBwdWJsaWMgdXBncmFkZUFnZW50OwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsVXBncmFkZWQ7CgogICAgYm9vbCBwcml2YXRlIGlzVXBncmFkZWFibGUgPSB0cnVlOwoKICAgIGVudW0gVXBncmFkZVN0YXRlIHtVbmtub3duLCBOb3RBbGxvd2VkLCBXYWl0aW5nRm9yQWdlbnQsIFJlYWR5VG9VcGdyYWRlLCBVcGdyYWRpbmd9CgogICAgZXZlbnQgVXBncmFkZShhZGRyZXNzIGluZGV4ZWQgZnJvbSwgCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHRvLCAKICAgICAgICB1aW50MjU2IHVwZ3JhZGVWYWx1ZSk7CgogICAgZXZlbnQgVXBncmFkZUFnZW50U2V0KGFkZHJlc3MgaW5kZXhlZCBhZ2VudCwgCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGV4ZWN1dG9yKTsKCiAgICBldmVudCBOZXdVcGdyYWRlZEFtb3VudCh1aW50MjU2IG9yaWdpbmFsQmFsYW5jZSwgCiAgICAgICAgdWludDI1NiBuZXdCYWxhbmNlLCAKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgZXhlY3V0b3IpOwogICAgCiAgICBtb2RpZmllciBvbmx5VXBncmFkZU1hc3RlcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gdXBncmFkZU1hc3Rlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBUcnVVcGdyYWRlYWJsZVRva2VuKGFkZHJlc3MgX3VwZ3JhZGVNYXN0ZXIpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfdXBncmFkZU1hc3RlciAhPSBhZGRyZXNzKDApKTsKICAgICAgICB1cGdyYWRlTWFzdGVyID0gX3VwZ3JhZGVNYXN0ZXI7CiAgICB9CgogICAgZnVuY3Rpb24gdXBncmFkZSh1aW50MjU2IF92YWx1ZSkgcHVibGljIHsKICAgICAgICBVcGdyYWRlU3RhdGUgc3RhdGUgPSBnZXRVcGdyYWRlU3RhdGUoKTsKICAgICAgICByZXF1aXJlKChzdGF0ZSA9PSBVcGdyYWRlU3RhdGUuUmVhZHlUb1VwZ3JhZGUpIHx8IChzdGF0ZSA9PSBVcGdyYWRlU3RhdGUuVXBncmFkaW5nKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICAgICAgdWludDI1NiB1cGdyYWRlZEFtb3VudCA9IHRvdGFsVXBncmFkZWQuYWRkKF92YWx1ZSk7CiAgICAgICAgdWludDI1NiBzZW5kZXJCYWxhbmNlID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgICAgdWludDI1NiBuZXdTZW5kZXJCYWxhbmNlID0gc2VuZGVyQmFsYW5jZS5zdWIoX3ZhbHVlKTsgICAgICAKICAgICAgICB1aW50MjU2IG5ld1RvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBuZXdTZW5kZXJCYWxhbmNlOwogICAgICAgIHRvdGFsU3VwcGx5ID0gbmV3VG90YWxTdXBwbHk7ICAgICAgICAKICAgICAgICBOZXdVcGdyYWRlZEFtb3VudCh0b3RhbFVwZ3JhZGVkLCBuZXdUb3RhbFN1cHBseSwgbXNnLnNlbmRlcik7CiAgICAgICAgdG90YWxVcGdyYWRlZCA9IHVwZ3JhZGVkQW1vdW50OwogICAgICAgIHVwZ3JhZGVBZ2VudC51cGdyYWRlRnJvbShtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgICAgIFVwZ3JhZGUobXNnLnNlbmRlciwgdXBncmFkZUFnZW50LCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFVwZ3JhZGVBZ2VudChhZGRyZXNzIF9hZ2VudCkgcHVibGljIG9ubHlVcGdyYWRlTWFzdGVyIHsKICAgICAgICByZXF1aXJlKF9hZ2VudCAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKGNhblVwZ3JhZGUoKSk7CiAgICAgICAgcmVxdWlyZShnZXRVcGdyYWRlU3RhdGUoKSAhPSBVcGdyYWRlU3RhdGUuVXBncmFkaW5nKTsKICAgICAgICBVcGdyYWRlQWdlbnQgbmV3VUFnZW50ID0gVXBncmFkZUFnZW50KF9hZ2VudCk7CiAgICAgICAgcmVxdWlyZShuZXdVQWdlbnQuaXNVcGdyYWRlQWdlbnQoKSk7CiAgICAgICAgcmVxdWlyZShuZXdVQWdlbnQub3JpZ2luYWxTdXBwbHkoKSA9PSB0b3RhbFN1cHBseSk7CiAgICAgICAgVXBncmFkZUFnZW50U2V0KHVwZ3JhZGVBZ2VudCwgbXNnLnNlbmRlcik7CiAgICAgICAgdXBncmFkZUFnZW50ID0gbmV3VUFnZW50OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFVwZ3JhZGVTdGF0ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKFVwZ3JhZGVTdGF0ZSkgewogICAgICAgIGlmICghY2FuVXBncmFkZSgpKQogICAgICAgICAgICByZXR1cm4gVXBncmFkZVN0YXRlLk5vdEFsbG93ZWQ7CiAgICAgICAgZWxzZSBpZiAodXBncmFkZUFnZW50ID09IGFkZHJlc3MoMCkpCiAgICAgICAgICAgIHJldHVybiBVcGdyYWRlU3RhdGUuV2FpdGluZ0ZvckFnZW50OwogICAgICAgIGVsc2UgaWYgKHRvdGFsVXBncmFkZWQgPT0gMCkKICAgICAgICAgICAgcmV0dXJuIFVwZ3JhZGVTdGF0ZS5SZWFkeVRvVXBncmFkZTsKICAgICAgICBlbHNlIAogICAgICAgICAgICByZXR1cm4gVXBncmFkZVN0YXRlLlVwZ3JhZGluZzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRVcGdyYWRlTWFzdGVyKGFkZHJlc3MgX21hc3RlcikgcHVibGljIG9ubHlVcGdyYWRlTWFzdGVyIHsKICAgICAgICByZXF1aXJlKF9tYXN0ZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgdXBncmFkZU1hc3RlciA9IF9tYXN0ZXI7CiAgICB9CgogICAgZnVuY3Rpb24gY2FuVXBncmFkZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gaXNVcGdyYWRlYWJsZTsKICAgIH0KfQoKCmNvbnRyYWN0IFRydVJlcHV0YXRpb25Ub2tlbiBpcyBUcnVNaW50YWJsZVRva2VuLCBUcnVVcGdyYWRlYWJsZVRva2VuIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIAogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlRydSBSZXB1dGF0aW9uIFRva2VuIjsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJUUlUiOwoKICAgIGFkZHJlc3MgcHVibGljIGV4ZWNCb2FyZCA9IDB4MDsKCiAgICBldmVudCBCb2FyZEFkZHJlc3NDaGFuZ2VkKGFkZHJlc3MgaW5kZXhlZCBvbGRBZGRyZXNzLCAKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgbmV3QWRkcmVzcywgCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGV4ZWN1dG9yKTsKCiAgICBtb2RpZmllciBvbmx5RXhlY0JvYXJkKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBleGVjQm9hcmQpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gVHJ1UmVwdXRhdGlvblRva2VuKCkgcHVibGljIFRydVVwZ3JhZGVhYmxlVG9rZW4obXNnLnNlbmRlcikgewogICAgICAgIGV4ZWNCb2FyZCA9IG1zZy5zZW5kZXI7CiAgICAgICAgQm9hcmRBZGRyZXNzQ2hhbmdlZCgweDAsIG1zZy5zZW5kZXIsIG1zZy5zZW5kZXIpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjaGFuZ2VCb2FyZEFkZHJlc3MoYWRkcmVzcyBfbmV3QWRkcmVzcykgcHVibGljIG9ubHlFeGVjQm9hcmQgewogICAgICAgIHJlcXVpcmUoX25ld0FkZHJlc3MgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfbmV3QWRkcmVzcyAhPSBleGVjQm9hcmQpOwogICAgICAgIGFkZHJlc3Mgb2xkQWRkcmVzcyA9IGV4ZWNCb2FyZDsKICAgICAgICBleGVjQm9hcmQgPSBfbmV3QWRkcmVzczsKICAgICAgICBCb2FyZEFkZHJlc3NDaGFuZ2VkKG9sZEFkZHJlc3MsIF9uZXdBZGRyZXNzLCBtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYW5VcGdyYWRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiByZWxlYXNlZCAmJiBzdXBlci5jYW5VcGdyYWRlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0VXBncmFkZU1hc3RlcihhZGRyZXNzIF9tYXN0ZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHN1cGVyLnNldFVwZ3JhZGVNYXN0ZXIoX21hc3Rlcik7CiAgICB9Cn0KCgpjb250cmFjdCBIYWx0YWJsZSBpcyBPd25hYmxlIHsKCiAgICBib29sIHB1YmxpYyBoYWx0ZWQ7CgogICAgZXZlbnQgSGFsdFN0YXR1cyhib29sIHN0YXR1cyk7CgogICAgbW9kaWZpZXIgc3RvcEluRW1lcmdlbmN5IHsKICAgICAgICByZXF1aXJlKCFoYWx0ZWQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUluRW1lcmdlbmN5IHsKICAgICAgICByZXF1aXJlKGhhbHRlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBoYWx0KCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBoYWx0ZWQgPSB0cnVlOwogICAgICAgIEhhbHRTdGF0dXMoaGFsdGVkKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1bmhhbHQoKSBleHRlcm5hbCBvbmx5T3duZXIgb25seUluRW1lcmdlbmN5IHsKICAgICAgICBoYWx0ZWQgPSBmYWxzZTsKICAgICAgICBIYWx0U3RhdHVzKGhhbHRlZCk7CiAgICB9Cn0KCgpjb250cmFjdCBUcnVTYWxlIGlzIE93bmFibGUsIEhhbHRhYmxlIHsKICAgIAogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgCiAgICBUcnVSZXB1dGF0aW9uVG9rZW4gcHVibGljIHRydVRva2VuOwoKICAgIHVpbnQyNTYgcHVibGljIHNhbGVTdGFydFRpbWU7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIHNhbGVFbmRUaW1lOwoKICAgIHVpbnQgcHVibGljIHB1cmNoYXNlckNvdW50ID0gMDsKCiAgICBhZGRyZXNzIHB1YmxpYyBtdWx0aVNpZ1dhbGxldDsKCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBCQVNFX1JBVEUgPSAxMDAwOwogIAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUFJFU0FMRV9SQVRFID0gMTI1MDsKCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBTQUxFX1JBVEUgPSAxMTI1OwoKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IE1JTl9BTU9VTlQgPSAxICogMTAqKjE4OwoKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IE1BWF9BTU9VTlQgPSAyMCAqIDEwKioxODsKCiAgICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWQ7CgogICAgdWludDI1NiBwdWJsaWMgY2FwOwoKICAgIGJvb2wgcHVibGljIGlzQ29tcGxldGVkID0gZmFsc2U7CgogICAgYm9vbCBwdWJsaWMgaXNQcmVTYWxlID0gZmFsc2U7CgogICAgYm9vbCBwdWJsaWMgaXNDcm93ZFNhbGUgPSBmYWxzZTsKCiAgICB1aW50MjU2IHB1YmxpYyBzb2xkVG9rZW5zID0gMDsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHB1cmNoYXNlZEFtb3VudDsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHRva2VuQW1vdW50OwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHB1cmNoYXNlcldoaXRlTGlzdDsKCiAgICBldmVudCBUb2tlblB1cmNoYXNlZCgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCAKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgcmVjaXBpZW50LCAKICAgICAgICB1aW50MjU2IHdlaVZhbHVlLCAKICAgICAgICB1aW50MjU2IHRva2VuQW1vdW50KTsKCiAgICBldmVudCBXaGl0ZUxpc3RVcGRhdGVkKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXJBZGRyZXNzLCAKICAgICAgICBib29sIHdoaXRlbGlzdFN0YXR1cywgCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGV4ZWN1dG9yKTsKCiAgICBldmVudCBFbmRDaGFuZ2VkKHVpbnQyNTYgb2xkRW5kLCAKICAgICAgICB1aW50MjU2IG5ld0VuZCwgCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGV4ZWN1dG9yKTsKCiAgICBldmVudCBDb21wbGV0ZWQoYWRkcmVzcyBpbmRleGVkIGV4ZWN1dG9yKTsKCiAgICBtb2RpZmllciBvbmx5VG9rZW5Pd25lcihhZGRyZXNzIF90b2tlbk93bmVyKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IF90b2tlbk93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIFRydVNhbGUodWludDI1NiBfc3RhcnRUaW1lLCAKICAgICAgICB1aW50MjU2IF9lbmRUaW1lLCAKICAgICAgICBhZGRyZXNzIF90b2tlbiwgCiAgICAgICAgYWRkcmVzcyBfc2FsZVdhbGxldCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF90b2tlbiAhPSBhZGRyZXNzKDApKTsKICAgICAgICBUcnVSZXB1dGF0aW9uVG9rZW4gdFRva2VuID0gVHJ1UmVwdXRhdGlvblRva2VuKF90b2tlbik7CiAgICAgICAgYWRkcmVzcyB0b2tlbk93bmVyID0gdFRva2VuLm93bmVyKCk7CiAgICAgICAgY3JlYXRlU2FsZShfc3RhcnRUaW1lLCBfZW5kVGltZSwgX3Rva2VuLCBfc2FsZVdhbGxldCwgdG9rZW5Pd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5KCkgcHVibGljIHBheWFibGUgc3RvcEluRW1lcmdlbmN5IHsKICAgICAgICByZXF1aXJlKGNoZWNrU2FsZVZhbGlkKCkpOwogICAgICAgIHZhbGlkYXRlUHVyY2hhc2UobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlV2hpdGVsaXN0KGFkZHJlc3MgX3B1cmNoYXNlciwgdWludCBfc3RhdHVzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9wdXJjaGFzZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgYm9vbCBib29sU3RhdHVzID0gZmFsc2U7CiAgICAgICAgaWYgKF9zdGF0dXMgPT0gMCkgewogICAgICAgICAgICBib29sU3RhdHVzID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmIChfc3RhdHVzID09IDEpIHsKICAgICAgICAgICAgYm9vbFN0YXR1cyA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIFdoaXRlTGlzdFVwZGF0ZWQoX3B1cmNoYXNlciwgYm9vbFN0YXR1cywgbXNnLnNlbmRlcik7CiAgICAgICAgcHVyY2hhc2VyV2hpdGVMaXN0W19wdXJjaGFzZXJdID0gYm9vbFN0YXR1czsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VFbmRUaW1lKHVpbnQyNTYgX2VuZFRpbWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX2VuZFRpbWUgPj0gc2FsZVN0YXJ0VGltZSk7CiAgICAgICAgRW5kQ2hhbmdlZChzYWxlRW5kVGltZSwgX2VuZFRpbWUsIG1zZy5zZW5kZXIpOwogICAgICAgIHNhbGVFbmRUaW1lID0gX2VuZFRpbWU7CiAgICB9CgogICAgZnVuY3Rpb24gaGFzRW5kZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGJvb2wgaXNDYXBIaXQgPSB3ZWlSYWlzZWQgPj0gY2FwOwogICAgICAgIGJvb2wgaXNFeHBpcmVkID0gbm93ID4gc2FsZUVuZFRpbWU7CiAgICAgICAgcmV0dXJuIGlzRXhwaXJlZCB8fCBpc0NhcEhpdDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2hlY2tTYWxlVmFsaWQoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgYm9vbCBhZnRlclN0YXJ0ID0gbm93ID49IHNhbGVTdGFydFRpbWU7CiAgICAgICAgYm9vbCBiZWZvcmVFbmQgPSBub3cgPD0gc2FsZUVuZFRpbWU7CiAgICAgICAgYm9vbCBjYXBOb3RIaXQgPSB3ZWlSYWlzZWQuYWRkKG1zZy52YWx1ZSkgPD0gY2FwOwogICAgICAgIHJldHVybiBhZnRlclN0YXJ0ICYmIGJlZm9yZUVuZCAmJiBjYXBOb3RIaXQ7CiAgICB9CgogICAgZnVuY3Rpb24gdmFsaWRhdGVQdXJjaGFzZShhZGRyZXNzIF9wdXJjaGFzZXIpIGludGVybmFsIHN0b3BJbkVtZXJnZW5jeSB7CiAgICAgICAgcmVxdWlyZShfcHVyY2hhc2VyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CiAgICAgICAgYnV5VG9rZW5zKF9wdXJjaGFzZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZvcndhcmRGdW5kcygpIGludGVybmFsIHsKICAgICAgICBtdWx0aVNpZ1dhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVNhbGUoCiAgICAgICAgdWludDI1NiBfc3RhcnRUaW1lLCAKICAgICAgICB1aW50MjU2IF9lbmRUaW1lLCAKICAgICAgICBhZGRyZXNzIF90b2tlbiwgCiAgICAgICAgYWRkcmVzcyBfc2FsZVdhbGxldCwgCiAgICAgICAgYWRkcmVzcyBfdG9rZW5Pd25lcikgCiAgICAgICAgaW50ZXJuYWwgb25seVRva2VuT3duZXIoX3Rva2VuT3duZXIpIAogICAgewogICAgICAgIHJlcXVpcmUobm93IDw9IF9zdGFydFRpbWUpOwogICAgICAgIHJlcXVpcmUoX2VuZFRpbWUgPj0gX3N0YXJ0VGltZSk7CiAgICAgICAgcmVxdWlyZShfc2FsZVdhbGxldCAhPSBhZGRyZXNzKDApKTsKICAgICAgICB0cnVUb2tlbiA9IFRydVJlcHV0YXRpb25Ub2tlbihfdG9rZW4pOwogICAgICAgIG11bHRpU2lnV2FsbGV0ID0gX3NhbGVXYWxsZXQ7CiAgICAgICAgc2FsZVN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICAgICAgc2FsZUVuZFRpbWUgPSBfZW5kVGltZTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBfcHVyY2hhc2VyKSBwcml2YXRlIHsKICAgICAgICB1aW50MjU2IHdlaVRvdGFsID0gbXNnLnZhbHVlOwogICAgICAgIHJlcXVpcmUod2VpVG90YWwgPj0gTUlOX0FNT1VOVCk7CiAgICAgICAgaWYgKHdlaVRvdGFsID4gTUFYX0FNT1VOVCkgewogICAgICAgICAgICByZXF1aXJlKHB1cmNoYXNlcldoaXRlTGlzdFttc2cuc2VuZGVyXSk7IAogICAgICAgIH0KICAgICAgICBpZiAocHVyY2hhc2VkQW1vdW50W21zZy5zZW5kZXJdICE9IDAgJiYgIXB1cmNoYXNlcldoaXRlTGlzdFttc2cuc2VuZGVyXSkgewogICAgICAgICAgICB1aW50MjU2IHRvdGFsUHVyY2hhc2VkID0gcHVyY2hhc2VkQW1vdW50W21zZy5zZW5kZXJdOwogICAgICAgICAgICB0b3RhbFB1cmNoYXNlZCA9IHRvdGFsUHVyY2hhc2VkLmFkZCh3ZWlUb3RhbCk7CiAgICAgICAgICAgIHJlcXVpcmUodG90YWxQdXJjaGFzZWQgPCBNQVhfQU1PVU5UKTsKICAgICAgICB9CiAgICAgICAgdWludDI1NiB0b2tlblJhdGUgPSBCQVNFX1JBVEU7ICAgIAogICAgICAgIGlmIChpc1ByZVNhbGUpIHsKICAgICAgICAgICAgdG9rZW5SYXRlID0gUFJFU0FMRV9SQVRFOwogICAgICAgIH0KICAgICAgICBpZiAoaXNDcm93ZFNhbGUpIHsKICAgICAgICAgICAgdG9rZW5SYXRlID0gU0FMRV9SQVRFOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IG5vT2ZUb2tlbnMgPSB3ZWlUb3RhbC5tdWwodG9rZW5SYXRlKTsKICAgICAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaVRvdGFsKTsKICAgICAgICBpZiAocHVyY2hhc2VkQW1vdW50W21zZy5zZW5kZXJdID09IDApIHsKICAgICAgICAgICAgcHVyY2hhc2VyQ291bnQrKzsKICAgICAgICB9CiAgICAgICAgc29sZFRva2VucyA9IHNvbGRUb2tlbnMuYWRkKG5vT2ZUb2tlbnMpOwogICAgICAgIHB1cmNoYXNlZEFtb3VudFttc2cuc2VuZGVyXSA9IHB1cmNoYXNlZEFtb3VudFttc2cuc2VuZGVyXS5hZGQobXNnLnZhbHVlKTsKICAgICAgICB0b2tlbkFtb3VudFttc2cuc2VuZGVyXSA9IHRva2VuQW1vdW50W21zZy5zZW5kZXJdLmFkZChub09mVG9rZW5zKTsKICAgICAgICB0cnVUb2tlbi5taW50KF9wdXJjaGFzZXIsIG5vT2ZUb2tlbnMpOwogICAgICAgIFRva2VuUHVyY2hhc2VkKG1zZy5zZW5kZXIsCiAgICAgICAgX3B1cmNoYXNlciwKICAgICAgICB3ZWlUb3RhbCwKICAgICAgICBub09mVG9rZW5zKTsKICAgICAgICBmb3J3YXJkRnVuZHMoKTsKICAgIH0KfQoKCmNvbnRyYWN0IFRydVByZVNhbGUgaXMgVHJ1U2FsZSB7CiAgICAKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBQUkVTQUxFX0NBUCA9IDQwMDAgKiAxMCoqMTg7CiAgICAKICAgIGZ1bmN0aW9uIFRydVByZVNhbGUoCiAgICAgICAgdWludDI1NiBfc3RhcnRUaW1lLCAKICAgICAgICB1aW50MjU2IF9lbmRUaW1lLCAKICAgICAgICBhZGRyZXNzIF90b2tlbiwKICAgICAgICBhZGRyZXNzIF9zYWxlV2FsbGV0KSBwdWJsaWMgVHJ1U2FsZShfc3RhcnRUaW1lLCBfZW5kVGltZSwgX3Rva2VuLCBfc2FsZVdhbGxldCkgCiAgICB7CiAgICAgICAgaXNQcmVTYWxlID0gdHJ1ZTsKICAgICAgICBpc0Nyb3dkU2FsZSA9IGZhbHNlOwogICAgICAgIGNhcCA9IFBSRVNBTEVfQ0FQOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBmaW5hbGlzZSgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoIWlzQ29tcGxldGVkKTsKICAgICAgICByZXF1aXJlKGhhc0VuZGVkKCkpOwoKICAgICAgICBjb21wbGV0aW9uKCk7CiAgICAgICAgQ29tcGxldGVkKG1zZy5zZW5kZXIpOwoKICAgICAgICBpc0NvbXBsZXRlZCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gY29tcGxldGlvbigpIGludGVybmFsIHsKICAgICAgICB1aW50MjU2IHBvb2xUb2tlbnMgPSB0cnVUb2tlbi50b3RhbFN1cHBseSgpOwogICAgICAgIHRydVRva2VuLm1pbnQobXVsdGlTaWdXYWxsZXQsIHBvb2xUb2tlbnMpOwogICAgICAgIHRydVRva2VuLmZpbmlzaE1pbnRpbmcodHJ1ZSwgZmFsc2UpOwogICAgICAgIHRydVRva2VuLnRyYW5zZmVyT3duZXJzaGlwKG1zZy5zZW5kZXIpOwogICAgfQp9'.
	

]
