Class {
	#name : #SRTfd13d75f8d0c4fe4e9b20b769f006a21fc3004f1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfd13d75f8d0c4fe4e9b20b769f006a21fc3004f1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8qKgogKiBUaGlzIGlzIGEgbXVsdGlzaWcgd2FsbGV0IGJhc2VkIG9uIEdhdidzIG9yaWdpbmFsIGltcGxlbWVudGF0aW9uLCBkYWlseSB3aXRoZHJhdyBsaW1pdHMgcmVtb3ZlZC4KICoKICoKICogRm9yIG90aGVyIG11bHRpc2lnIHdhbGxldCBpbXBsZW1lbnRhdGlvbnMsIHNlZSBodHRwczovL2Jsb2cuZ25vc2lzLnBtL3JlbGVhc2Utb2YtbmV3LW11bHRpc2lnLXdhbGxldC01OWI2ODExZjdlZGMKICovCgovLyBNdWx0aS1zaWcsIGRhaWx5LWxpbWl0ZWQgYWNjb3VudCBwcm94eS93YWxsZXQuCi8vIEBhdXRob3JzOgovLyBHYXYgV29vZCA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9ImE0YzNlNGMxZDBjY2MwYzFkMjhhYzdjYmM5Ij5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPj4KLy8gaW5oZXJpdGFibGUgInByb3BlcnR5IiBjb250cmFjdCB0aGF0IGVuYWJsZXMgbWV0aG9kcyB0byBiZSBwcm90ZWN0ZWQgYnkgcmVxdWlyaW5nIHRoZSBhY3F1aWVzY2VuY2Ugb2YgZWl0aGVyIGEKLy8gc2luZ2xlLCBvciwgY3J1Y2lhbGx5LCBlYWNoIG9mIGEgbnVtYmVyIG9mLCBkZXNpZ25hdGVkIG93bmVycy4KLy8gdXNhZ2U6Ci8vIHVzZSBtb2RpZmllcnMgb25seW93bmVyIChqdXN0IG93biBvd25lZCkgb3Igb25seW1hbnlvd25lcnMoaGFzaCksIHdoZXJlYnkgdGhlIHNhbWUgaGFzaCBtdXN0IGJlIHByb3ZpZGVkIGJ5Ci8vIHNvbWUgbnVtYmVyIChzcGVjaWZpZWQgaW4gY29uc3RydWN0b3IpIG9mIHRoZSBzZXQgb2Ygb3duZXJzIChzcGVjaWZpZWQgaW4gdGhlIGNvbnN0cnVjdG9yLCBtb2RpZmlhYmxlKSBiZWZvcmUgdGhlCi8vIGludGVyaW9yIGlzIGV4ZWN1dGVkLgpjb250cmFjdCBtdWx0aW93bmVkIHsKCgkvLyBUWVBFUwoKICAgIC8vIHN0cnVjdCBmb3IgdGhlIHN0YXR1cyBvZiBhIHBlbmRpbmcgb3BlcmF0aW9uLgogICAgc3RydWN0IFBlbmRpbmdTdGF0ZSB7CiAgICAgICAgdWludCB5ZXROZWVkZWQ7CiAgICAgICAgdWludCBvd25lcnNEb25lOwogICAgICAgIHVpbnQgaW5kZXg7CiAgICB9CgoJLy8gRVZFTlRTCgogICAgLy8gdGhpcyBjb250cmFjdCBvbmx5IGhhcyBzaXggdHlwZXMgb2YgZXZlbnRzOiBpdCBjYW4gYWNjZXB0IGEgY29uZmlybWF0aW9uLCBpbiB3aGljaCBjYXNlCiAgICAvLyB3ZSByZWNvcmQgb3duZXIgYW5kIG9wZXJhdGlvbiAoaGFzaCkgYWxvbmdzaWRlIGl0LgogICAgZXZlbnQgQ29uZmlybWF0aW9uKGFkZHJlc3Mgb3duZXIsIGJ5dGVzMzIgb3BlcmF0aW9uKTsKICAgIGV2ZW50IFJldm9rZShhZGRyZXNzIG93bmVyLCBieXRlczMyIG9wZXJhdGlvbik7CiAgICAvLyBzb21lIG90aGVycyBhcmUgaW4gdGhlIGNhc2Ugb2YgYW4gb3duZXIgY2hhbmdpbmcuCiAgICBldmVudCBPd25lckNoYW5nZWQoYWRkcmVzcyBvbGRPd25lciwgYWRkcmVzcyBuZXdPd25lcik7CiAgICBldmVudCBPd25lckFkZGVkKGFkZHJlc3MgbmV3T3duZXIpOwogICAgZXZlbnQgT3duZXJSZW1vdmVkKGFkZHJlc3Mgb2xkT3duZXIpOwogICAgLy8gdGhlIGxhc3Qgb25lIGlzIGVtaXR0ZWQgaWYgdGhlIHJlcXVpcmVkIHNpZ25hdHVyZXMgY2hhbmdlCiAgICBldmVudCBSZXF1aXJlbWVudENoYW5nZWQodWludCBuZXdSZXF1aXJlbWVudCk7CgoJLy8gTU9ESUZJRVJTCgogICAgLy8gc2ltcGxlIHNpbmdsZS1zaWcgZnVuY3Rpb24gbW9kaWZpZXIuCiAgICBtb2RpZmllciBvbmx5b3duZXIgewogICAgICAgIGlmIChpc093bmVyKG1zZy5zZW5kZXIpKQogICAgICAgICAgICBfOwogICAgfQogICAgLy8gbXVsdGktc2lnIGZ1bmN0aW9uIG1vZGlmaWVyOiB0aGUgb3BlcmF0aW9uIG11c3QgaGF2ZSBhbiBpbnRyaW5zaWMgaGFzaCBpbiBvcmRlcgogICAgLy8gdGhhdCBsYXRlciBhdHRlbXB0cyBjYW4gYmUgcmVhbGlzZWQgYXMgdGhlIHNhbWUgdW5kZXJseWluZyBvcGVyYXRpb24gYW5kCiAgICAvLyB0aHVzIGNvdW50IGFzIGNvbmZpcm1hdGlvbnMuCiAgICBtb2RpZmllciBvbmx5bWFueW93bmVycyhieXRlczMyIF9vcGVyYXRpb24pIHsKICAgICAgICBpZiAoY29uZmlybUFuZENoZWNrKF9vcGVyYXRpb24pKQogICAgICAgICAgICBfOwogICAgfQoKCS8vIE1FVEhPRFMKCiAgICAvLyBjb25zdHJ1Y3RvciBpcyBnaXZlbiBudW1iZXIgb2Ygc2lncyByZXF1aXJlZCB0byBkbyBwcm90ZWN0ZWQgIm9ubHltYW55b3duZXJzIiB0cmFuc2FjdGlvbnMKICAgIC8vIGFzIHdlbGwgYXMgdGhlIHNlbGVjdGlvbiBvZiBhZGRyZXNzZXMgY2FwYWJsZSBvZiBjb25maXJtaW5nIHRoZW0uCiAgICBmdW5jdGlvbiBtdWx0aW93bmVkKGFkZHJlc3NbXSBfb3duZXJzLCB1aW50IF9yZXF1aXJlZCkgewogICAgICAgIG1fbnVtT3duZXJzID0gX293bmVycy5sZW5ndGggKyAxOwogICAgICAgIG1fb3duZXJzWzFdID0gdWludChtc2cuc2VuZGVyKTsKICAgICAgICBtX293bmVySW5kZXhbdWludChtc2cuc2VuZGVyKV0gPSAxOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IF9vd25lcnMubGVuZ3RoOyArK2kpCiAgICAgICAgewogICAgICAgICAgICBtX293bmVyc1syICsgaV0gPSB1aW50KF9vd25lcnNbaV0pOwogICAgICAgICAgICBtX293bmVySW5kZXhbdWludChfb3duZXJzW2ldKV0gPSAyICsgaTsKICAgICAgICB9CiAgICAgICAgbV9yZXF1aXJlZCA9IF9yZXF1aXJlZDsKICAgIH0KCiAgICAvLyBSZXZva2VzIGEgcHJpb3IgY29uZmlybWF0aW9uIG9mIHRoZSBnaXZlbiBvcGVyYXRpb24KICAgIGZ1bmN0aW9uIHJldm9rZShieXRlczMyIF9vcGVyYXRpb24pIGV4dGVybmFsIHsKICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChtc2cuc2VuZGVyKV07CiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXkncmUgYW4gb3duZXIKICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm47CiAgICAgICAgdWludCBvd25lckluZGV4Qml0ID0gMioqb3duZXJJbmRleDsKICAgICAgICB2YXIgcGVuZGluZyA9IG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsKICAgICAgICBpZiAocGVuZGluZy5vd25lcnNEb25lICYgb3duZXJJbmRleEJpdCA+IDApIHsKICAgICAgICAgICAgcGVuZGluZy55ZXROZWVkZWQrKzsKICAgICAgICAgICAgcGVuZGluZy5vd25lcnNEb25lIC09IG93bmVySW5kZXhCaXQ7CiAgICAgICAgICAgIFJldm9rZShtc2cuc2VuZGVyLCBfb3BlcmF0aW9uKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gUmVwbGFjZXMgYW4gb3duZXIgYF9mcm9tYCB3aXRoIGFub3RoZXIgYF90b2AuCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsKICAgICAgICBpZiAoaXNPd25lcihfdG8pKSByZXR1cm47CiAgICAgICAgdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQoX2Zyb20pXTsKICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm47CgogICAgICAgIGNsZWFyUGVuZGluZygpOwogICAgICAgIG1fb3duZXJzW293bmVySW5kZXhdID0gdWludChfdG8pOwogICAgICAgIG1fb3duZXJJbmRleFt1aW50KF9mcm9tKV0gPSAwOwogICAgICAgIG1fb3duZXJJbmRleFt1aW50KF90byldID0gb3duZXJJbmRleDsKICAgICAgICBPd25lckNoYW5nZWQoX2Zyb20sIF90byk7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkT3duZXIoYWRkcmVzcyBfb3duZXIpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7CiAgICAgICAgaWYgKGlzT3duZXIoX293bmVyKSkgcmV0dXJuOwoKICAgICAgICBjbGVhclBlbmRpbmcoKTsKICAgICAgICBpZiAobV9udW1Pd25lcnMgPj0gY19tYXhPd25lcnMpCiAgICAgICAgICAgIHJlb3JnYW5pemVPd25lcnMoKTsKICAgICAgICBpZiAobV9udW1Pd25lcnMgPj0gY19tYXhPd25lcnMpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBtX251bU93bmVycysrOwogICAgICAgIG1fb3duZXJzW21fbnVtT3duZXJzXSA9IHVpbnQoX293bmVyKTsKICAgICAgICBtX293bmVySW5kZXhbdWludChfb3duZXIpXSA9IG1fbnVtT3duZXJzOwogICAgICAgIE93bmVyQWRkZWQoX293bmVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVPd25lcihhZGRyZXNzIF9vd25lcikgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsKICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChfb3duZXIpXTsKICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm47CiAgICAgICAgaWYgKG1fcmVxdWlyZWQgPiBtX251bU93bmVycyAtIDEpIHJldHVybjsKCiAgICAgICAgbV9vd25lcnNbb3duZXJJbmRleF0gPSAwOwogICAgICAgIG1fb3duZXJJbmRleFt1aW50KF9vd25lcildID0gMDsKICAgICAgICBjbGVhclBlbmRpbmcoKTsKICAgICAgICByZW9yZ2FuaXplT3duZXJzKCk7IC8vbWFrZSBzdXJlIG1fbnVtT3duZXIgaXMgZXF1YWwgdG8gdGhlIG51bWJlciBvZiBvd25lcnMgYW5kIGFsd2F5cyBwb2ludHMgdG8gdGhlIG9wdGltYWwgZnJlZSBzbG90CiAgICAgICAgT3duZXJSZW1vdmVkKF9vd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlUmVxdWlyZW1lbnQodWludCBfbmV3UmVxdWlyZWQpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7CiAgICAgICAgaWYgKF9uZXdSZXF1aXJlZCA+IG1fbnVtT3duZXJzKSByZXR1cm47CiAgICAgICAgbV9yZXF1aXJlZCA9IF9uZXdSZXF1aXJlZDsKICAgICAgICBjbGVhclBlbmRpbmcoKTsKICAgICAgICBSZXF1aXJlbWVudENoYW5nZWQoX25ld1JlcXVpcmVkKTsKICAgIH0KCiAgICAvLyBHZXRzIGFuIG93bmVyIGJ5IDAtaW5kZXhlZCBwb3NpdGlvbiAodXNpbmcgbnVtT3duZXJzIGFzIHRoZSBjb3VudCkKICAgIGZ1bmN0aW9uIGdldE93bmVyKHVpbnQgb3duZXJJbmRleCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBhZGRyZXNzKG1fb3duZXJzW293bmVySW5kZXggKyAxXSk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNPd25lcihhZGRyZXNzIF9hZGRyKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIG1fb3duZXJJbmRleFt1aW50KF9hZGRyKV0gPiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGhhc0NvbmZpcm1lZChieXRlczMyIF9vcGVyYXRpb24sIGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgdmFyIHBlbmRpbmcgPSBtX3BlbmRpbmdbX29wZXJhdGlvbl07CiAgICAgICAgdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQoX293bmVyKV07CgogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG93bmVyCiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuIGZhbHNlOwoKICAgICAgICAvLyBkZXRlcm1pbmUgdGhlIGJpdCB0byBzZXQgZm9yIHRoaXMgb3duZXIuCiAgICAgICAgdWludCBvd25lckluZGV4Qml0ID0gMioqb3duZXJJbmRleDsKICAgICAgICByZXR1cm4gIShwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID09IDApOwogICAgfQoKICAgIC8vIElOVEVSTkFMIE1FVEhPRFMKCiAgICBmdW5jdGlvbiBjb25maXJtQW5kQ2hlY2soYnl0ZXMzMiBfb3BlcmF0aW9uKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoYXQgaW5kZXggdGhlIHByZXNlbnQgc2VuZGVyIGlzOgogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KG1zZy5zZW5kZXIpXTsKICAgICAgICAvLyBtYWtlIHN1cmUgdGhleSdyZSBhbiBvd25lcgogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybjsKCiAgICAgICAgdmFyIHBlbmRpbmcgPSBtX3BlbmRpbmdbX29wZXJhdGlvbl07CiAgICAgICAgLy8gaWYgd2UncmUgbm90IHlldCB3b3JraW5nIG9uIHRoaXMgb3BlcmF0aW9uLCBzd2l0Y2ggb3ZlciBhbmQgcmVzZXQgdGhlIGNvbmZpcm1hdGlvbiBzdGF0dXMuCiAgICAgICAgaWYgKHBlbmRpbmcueWV0TmVlZGVkID09IDApIHsKICAgICAgICAgICAgLy8gcmVzZXQgY291bnQgb2YgY29uZmlybWF0aW9ucyBuZWVkZWQuCiAgICAgICAgICAgIHBlbmRpbmcueWV0TmVlZGVkID0gbV9yZXF1aXJlZDsKICAgICAgICAgICAgLy8gcmVzZXQgd2hpY2ggb3duZXJzIGhhdmUgY29uZmlybWVkIChub25lKSAtIHNldCBvdXIgYml0bWFwIHRvIDAuCiAgICAgICAgICAgIHBlbmRpbmcub3duZXJzRG9uZSA9IDA7CiAgICAgICAgICAgIHBlbmRpbmcuaW5kZXggPSBtX3BlbmRpbmdJbmRleC5sZW5ndGgrKzsKICAgICAgICAgICAgbV9wZW5kaW5nSW5kZXhbcGVuZGluZy5pbmRleF0gPSBfb3BlcmF0aW9uOwogICAgICAgIH0KICAgICAgICAvLyBkZXRlcm1pbmUgdGhlIGJpdCB0byBzZXQgZm9yIHRoaXMgb3duZXIuCiAgICAgICAgdWludCBvd25lckluZGV4Qml0ID0gMioqb3duZXJJbmRleDsKICAgICAgICAvLyBtYWtlIHN1cmUgd2UgKHRoZSBtZXNzYWdlIHNlbmRlcikgaGF2ZW4ndCBjb25maXJtZWQgdGhpcyBvcGVyYXRpb24gcHJldmlvdXNseS4KICAgICAgICBpZiAocGVuZGluZy5vd25lcnNEb25lICYgb3duZXJJbmRleEJpdCA9PSAwKSB7CiAgICAgICAgICAgIENvbmZpcm1hdGlvbihtc2cuc2VuZGVyLCBfb3BlcmF0aW9uKTsKICAgICAgICAgICAgLy8gb2sgLSBjaGVjayBpZiBjb3VudCBpcyBlbm91Z2ggdG8gZ28gYWhlYWQuCiAgICAgICAgICAgIGlmIChwZW5kaW5nLnlldE5lZWRlZCA8PSAxKSB7CiAgICAgICAgICAgICAgICAvLyBlbm91Z2ggY29uZmlybWF0aW9uczogcmVzZXQgYW5kIHJ1biBpbnRlcmlvci4KICAgICAgICAgICAgICAgIGRlbGV0ZSBtX3BlbmRpbmdJbmRleFttX3BlbmRpbmdbX29wZXJhdGlvbl0uaW5kZXhdOwogICAgICAgICAgICAgICAgZGVsZXRlIG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gbm90IGVub3VnaDogcmVjb3JkIHRoYXQgdGhpcyBvd25lciBpbiBwYXJ0aWN1bGFyIGNvbmZpcm1lZC4KICAgICAgICAgICAgICAgIHBlbmRpbmcueWV0TmVlZGVkLS07CiAgICAgICAgICAgICAgICBwZW5kaW5nLm93bmVyc0RvbmUgfD0gb3duZXJJbmRleEJpdDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZW9yZ2FuaXplT3duZXJzKCkgcHJpdmF0ZSB7CiAgICAgICAgdWludCBmcmVlID0gMTsKICAgICAgICB3aGlsZSAoZnJlZSA8IG1fbnVtT3duZXJzKQogICAgICAgIHsKICAgICAgICAgICAgd2hpbGUgKGZyZWUgPCBtX251bU93bmVycyAmJiBtX293bmVyc1tmcmVlXSAhPSAwKSBmcmVlKys7CiAgICAgICAgICAgIHdoaWxlIChtX251bU93bmVycyA+IDEgJiYgbV9vd25lcnNbbV9udW1Pd25lcnNdID09IDApIG1fbnVtT3duZXJzLS07CiAgICAgICAgICAgIGlmIChmcmVlIDwgbV9udW1Pd25lcnMgJiYgbV9vd25lcnNbbV9udW1Pd25lcnNdICE9IDAgJiYgbV9vd25lcnNbZnJlZV0gPT0gMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbV9vd25lcnNbZnJlZV0gPSBtX293bmVyc1ttX251bU93bmVyc107CiAgICAgICAgICAgICAgICBtX293bmVySW5kZXhbbV9vd25lcnNbZnJlZV1dID0gZnJlZTsKICAgICAgICAgICAgICAgIG1fb3duZXJzW21fbnVtT3duZXJzXSA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2xlYXJQZW5kaW5nKCkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgbGVuZ3RoID0gbV9wZW5kaW5nSW5kZXgubGVuZ3RoOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKQogICAgICAgICAgICBpZiAobV9wZW5kaW5nSW5kZXhbaV0gIT0gMCkKICAgICAgICAgICAgICAgIGRlbGV0ZSBtX3BlbmRpbmdbbV9wZW5kaW5nSW5kZXhbaV1dOwogICAgICAgIGRlbGV0ZSBtX3BlbmRpbmdJbmRleDsKICAgIH0KCiAgIAkvLyBGSUVMRFMKCiAgICAvLyB0aGUgbnVtYmVyIG9mIG93bmVycyB0aGF0IG11c3QgY29uZmlybSB0aGUgc2FtZSBvcGVyYXRpb24gYmVmb3JlIGl0IGlzIHJ1bi4KICAgIHVpbnQgcHVibGljIG1fcmVxdWlyZWQ7CiAgICAvLyBwb2ludGVyIHVzZWQgdG8gZmluZCBhIGZyZWUgc2xvdCBpbiBtX293bmVycwogICAgdWludCBwdWJsaWMgbV9udW1Pd25lcnM7CgogICAgLy8gbGlzdCBvZiBvd25lcnMKICAgIHVpbnRbMjU2XSBtX293bmVyczsKICAgIHVpbnQgY29uc3RhbnQgY19tYXhPd25lcnMgPSAyNTA7CiAgICAvLyBpbmRleCBvbiB0aGUgbGlzdCBvZiBvd25lcnMgdG8gYWxsb3cgcmV2ZXJzZSBsb29rdXAKICAgIG1hcHBpbmcodWludCA9PiB1aW50KSBtX293bmVySW5kZXg7CiAgICAvLyB0aGUgb25nb2luZyBvcGVyYXRpb25zLgogICAgbWFwcGluZyhieXRlczMyID0+IFBlbmRpbmdTdGF0ZSkgbV9wZW5kaW5nOwogICAgYnl0ZXMzMltdIG1fcGVuZGluZ0luZGV4Owp9CgovLyBpbmhlcml0YWJsZSAicHJvcGVydHkiIGNvbnRyYWN0IHRoYXQgZW5hYmxlcyBtZXRob2RzIHRvIGJlIHByb3RlY3RlZCBieSBwbGFjaW5nIGEgbGluZWFyIGxpbWl0IChzcGVjaWZpYWJsZSkKLy8gb24gYSBwYXJ0aWN1bGFyIHJlc291cmNlIHBlciBjYWxlbmRhciBkYXkuIGlzIG11bHRpb3duZWQgdG8gYWxsb3cgdGhlIGxpbWl0IHRvIGJlIGFsdGVyZWQuIHJlc291cmNlIHRoYXQgbWV0aG9kCi8vIHVzZXMgaXMgc3BlY2lmaWVkIGluIHRoZSBtb2RpZmllci4KY29udHJhY3QgZGF5bGltaXQgaXMgbXVsdGlvd25lZCB7CgoJLy8gTU9ESUZJRVJTCgogICAgLy8gc2ltcGxlIG1vZGlmaWVyIGZvciBkYWlseSBsaW1pdC4KICAgIG1vZGlmaWVyIGxpbWl0ZWREYWlseSh1aW50IF92YWx1ZSkgewogICAgICAgIGlmICh1bmRlckxpbWl0KF92YWx1ZSkpCiAgICAgICAgICAgIF87CiAgICB9CgoJLy8gTUVUSE9EUwoKICAgIC8vIGNvbnN0cnVjdG9yIC0gc3RvcmVzIGluaXRpYWwgZGFpbHkgbGltaXQgYW5kIHJlY29yZHMgdGhlIHByZXNlbnQgZGF5J3MgaW5kZXguCiAgICBmdW5jdGlvbiBkYXlsaW1pdCh1aW50IF9saW1pdCkgewogICAgICAgIG1fZGFpbHlMaW1pdCA9IF9saW1pdDsKICAgICAgICBtX2xhc3REYXkgPSB0b2RheSgpOwogICAgfQogICAgLy8gKHJlKXNldHMgdGhlIGRhaWx5IGxpbWl0LiBuZWVkcyBtYW55IG9mIHRoZSBvd25lcnMgdG8gY29uZmlybS4gZG9lc24ndCBhbHRlciB0aGUgYW1vdW50IGFscmVhZHkgc3BlbnQgdG9kYXkuCiAgICBmdW5jdGlvbiBzZXREYWlseUxpbWl0KHVpbnQgX25ld0xpbWl0KSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgewogICAgICAgIG1fZGFpbHlMaW1pdCA9IF9uZXdMaW1pdDsKICAgIH0KICAgIC8vIHJlc2V0cyB0aGUgYW1vdW50IGFscmVhZHkgc3BlbnQgdG9kYXkuIG5lZWRzIG1hbnkgb2YgdGhlIG93bmVycyB0byBjb25maXJtLgogICAgZnVuY3Rpb24gcmVzZXRTcGVudFRvZGF5KCkgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsKICAgICAgICBtX3NwZW50VG9kYXkgPSAwOwogICAgfQoKICAgIC8vIElOVEVSTkFMIE1FVEhPRFMKCiAgICAvLyBjaGVja3MgdG8gc2VlIGlmIHRoZXJlIGlzIGF0IGxlYXN0IGBfdmFsdWVgIGxlZnQgZnJvbSB0aGUgZGFpbHkgbGltaXQgdG9kYXkuIGlmIHRoZXJlIGlzLCBzdWJ0cmFjdHMgaXQgYW5kCiAgICAvLyByZXR1cm5zIHRydWUuIG90aGVyd2lzZSBqdXN0IHJldHVybnMgZmFsc2UuCiAgICBmdW5jdGlvbiB1bmRlckxpbWl0KHVpbnQgX3ZhbHVlKSBpbnRlcm5hbCBvbmx5b3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIC8vIHJlc2V0IHRoZSBzcGVuZCBsaW1pdCBpZiB3ZSdyZSBvbiBhIGRpZmZlcmVudCBkYXkgdG8gbGFzdCB0aW1lLgogICAgICAgIC8qaWYgKHRvZGF5KCkgPiBtX2xhc3REYXkpIHsKICAgICAgICAgICAgbV9zcGVudFRvZGF5ID0gMDsKICAgICAgICAgICAgbV9sYXN0RGF5ID0gdG9kYXkoKTsKICAgICAgICB9CiAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIHRoZXJlJ3MgZW5vdWdoIGxlZnQgLSBpZiBzbywgc3VidHJhY3QgYW5kIHJldHVybiB0cnVlLgogICAgICAgIC8vIG92ZXJmbG93IHByb3RlY3Rpb24gICAgICAgICAgICAgICAgICAgIC8vIGRhaWx5TGltaXQgY2hlY2sKICAgICAgICBpZiAobV9zcGVudFRvZGF5ICsgX3ZhbHVlID49IG1fc3BlbnRUb2RheSAmJiBtX3NwZW50VG9kYXkgKyBfdmFsdWUgPD0gbV9kYWlseUxpbWl0KSB7CiAgICAgICAgICAgIG1fc3BlbnRUb2RheSArPSBfdmFsdWU7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7Ki8KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvLyBkZXRlcm1pbmVzIHRvZGF5J3MgaW5kZXguCiAgICBmdW5jdGlvbiB0b2RheSgpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyAodWludCkgeyByZXR1cm4gbm93IC8gMSBkYXlzOyB9CgoJLy8gRklFTERTCgogICAgdWludCBwdWJsaWMgbV9kYWlseUxpbWl0OwogICAgdWludCBwdWJsaWMgbV9zcGVudFRvZGF5OwogICAgdWludCBwdWJsaWMgbV9sYXN0RGF5Owp9CgovLyBpbnRlcmZhY2UgY29udHJhY3QgZm9yIG11bHRpc2lnIHByb3h5IGNvbnRyYWN0czsgc2VlIGJlbG93IGZvciBkb2NzLgpjb250cmFjdCBtdWx0aXNpZyB7CgoJLy8gRVZFTlRTCgogICAgLy8gbG9nZ2VkIGV2ZW50czoKICAgIC8vIEZ1bmRzIGhhcyBhcnJpdmVkIGludG8gdGhlIHdhbGxldCAocmVjb3JkIGhvdyBtdWNoKS4KICAgIGV2ZW50IERlcG9zaXQoYWRkcmVzcyBfZnJvbSwgdWludCB2YWx1ZSk7CiAgICAvLyBTaW5nbGUgdHJhbnNhY3Rpb24gZ29pbmcgb3V0IG9mIHRoZSB3YWxsZXQgKHJlY29yZCB3aG8gc2lnbmVkIGZvciBpdCwgaG93IG11Y2gsIGFuZCB0byB3aG9tIGl0J3MgZ29pbmcpLgogICAgZXZlbnQgU2luZ2xlVHJhbnNhY3QoYWRkcmVzcyBvd25lciwgdWludCB2YWx1ZSwgYWRkcmVzcyB0bywgYnl0ZXMgZGF0YSk7CiAgICAvLyBNdWx0aS1zaWcgdHJhbnNhY3Rpb24gZ29pbmcgb3V0IG9mIHRoZSB3YWxsZXQgKHJlY29yZCB3aG8gc2lnbmVkIGZvciBpdCBsYXN0LCB0aGUgb3BlcmF0aW9uIGhhc2gsIGhvdyBtdWNoLCBhbmQgdG8gd2hvbSBpdCdzIGdvaW5nKS4KICAgIGV2ZW50IE11bHRpVHJhbnNhY3QoYWRkcmVzcyBvd25lciwgYnl0ZXMzMiBvcGVyYXRpb24sIHVpbnQgdmFsdWUsIGFkZHJlc3MgdG8sIGJ5dGVzIGRhdGEpOwogICAgLy8gQ29uZmlybWF0aW9uIHN0aWxsIG5lZWRlZCBmb3IgYSB0cmFuc2FjdGlvbi4KICAgIGV2ZW50IENvbmZpcm1hdGlvbk5lZWRlZChieXRlczMyIG9wZXJhdGlvbiwgYWRkcmVzcyBpbml0aWF0b3IsIHVpbnQgdmFsdWUsIGFkZHJlc3MgdG8sIGJ5dGVzIGRhdGEpOwoKICAgIC8vIEZVTkNUSU9OUwoKICAgIC8vIFRPRE86IGRvY3VtZW50CiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBleGVjdXRlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGV4dGVybmFsIHJldHVybnMgKGJ5dGVzMzIpOwogICAgZnVuY3Rpb24gY29uZmlybShieXRlczMyIF9oKSByZXR1cm5zIChib29sKTsKfQoKLy8gdXNhZ2U6Ci8vIGJ5dGVzMzIgaCA9IFdhbGxldCh3KS5mcm9tKG9uZU93bmVyKS50cmFuc2FjdCh0bywgdmFsdWUsIGRhdGEpOwovLyBXYWxsZXQodykuZnJvbShhbm90aGVyT3duZXIpLmNvbmZpcm0oaCk7CmNvbnRyYWN0IFdhbGxldCBpcyBtdWx0aXNpZywgbXVsdGlvd25lZCwgZGF5bGltaXQgewoKCS8vIFRZUEVTCgogICAgLy8gVHJhbnNhY3Rpb24gc3RydWN0dXJlIHRvIHJlbWVtYmVyIGRldGFpbHMgb2YgdHJhbnNhY3Rpb24gbGVzdCBpdCBuZWVkIGJlIHNhdmVkIGZvciBhIGxhdGVyIGNhbGwuCiAgICBzdHJ1Y3QgVHJhbnNhY3Rpb24gewogICAgICAgIGFkZHJlc3MgdG87CiAgICAgICAgdWludCB2YWx1ZTsKICAgICAgICBieXRlcyBkYXRhOwogICAgfQoKICAgIC8vIE1FVEhPRFMKCiAgICAvLyBjb25zdHJ1Y3RvciAtIGp1c3QgcGFzcyBvbiB0aGUgb3duZXIgYXJyYXkgdG8gdGhlIG11bHRpb3duZWQgYW5kCiAgICAvLyB0aGUgbGltaXQgdG8gZGF5bGltaXQKICAgIGZ1bmN0aW9uIFdhbGxldChhZGRyZXNzW10gX293bmVycywgdWludCBfcmVxdWlyZWQsIHVpbnQgX2RheWxpbWl0KQogICAgICAgICAgICBtdWx0aW93bmVkKF9vd25lcnMsIF9yZXF1aXJlZCkgZGF5bGltaXQoX2RheWxpbWl0KSB7CiAgICB9CgogICAgLy8ga2lsbHMgdGhlIGNvbnRyYWN0IHNlbmRpbmcgZXZlcnl0aGluZyB0byBgX3RvYC4KICAgIGZ1bmN0aW9uIGtpbGwoYWRkcmVzcyBfdG8pIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7CiAgICAgICAgc3VpY2lkZShfdG8pOwogICAgfQoKICAgIC8vIGdldHMgY2FsbGVkIHdoZW4gbm8gb3RoZXIgZnVuY3Rpb24gbWF0Y2hlcwogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICAvLyBqdXN0IGJlaW5nIHNlbnQgc29tZSBjYXNoPwogICAgICAgIGlmIChtc2cudmFsdWUgPiAwKQogICAgICAgICAgICBEZXBvc2l0KG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9CgogICAgLy8gT3V0c2lkZS12aXNpYmxlIHRyYW5zYWN0IGVudHJ5IHBvaW50LiBFeGVjdXRlcyB0cmFuc2FjdGlvbiBpbW1lZGlhdGVseSBpZiBiZWxvdyBkYWlseSBzcGVuZCBsaW1pdC4KICAgIC8vIElmIG5vdCwgZ29lcyBpbnRvIG11bHRpc2lnIHByb2Nlc3MuIFdlIHByb3ZpZGUgYSBoYXNoIG9uIHJldHVybiB0byBhbGxvdyB0aGUgc2VuZGVyIHRvIHByb3ZpZGUKICAgIC8vIHNob3J0Y3V0cyBmb3IgdGhlIG90aGVyIGNvbmZpcm1hdGlvbnMgKGFsbG93aW5nIHRoZW0gdG8gYXZvaWQgcmVwbGljYXRpbmcgdGhlIF90bywgX3ZhbHVlCiAgICAvLyBhbmQgX2RhdGEgYXJndW1lbnRzKS4gVGhleSBzdGlsbCBnZXQgdGhlIG9wdGlvbiBvZiB1c2luZyB0aGVtIGlmIHRoZXkgd2FudCwgYW55d2F5cy4KICAgIGZ1bmN0aW9uIGV4ZWN1dGUoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgZXh0ZXJuYWwgb25seW93bmVyIHJldHVybnMgKGJ5dGVzMzIgX3IpIHsKICAgICAgICAvLyBmaXJzdCwgdGFrZSB0aGUgb3Bwb3J0dW5pdHkgdG8gY2hlY2sgdGhhdCB3ZSdyZSB1bmRlciB0aGUgZGFpbHkgbGltaXQuCiAgICAgICAgaWYgKHVuZGVyTGltaXQoX3ZhbHVlKSkgewogICAgICAgICAgICBTaW5nbGVUcmFuc2FjdChtc2cuc2VuZGVyLCBfdmFsdWUsIF90bywgX2RhdGEpOwogICAgICAgICAgICAvLyB5ZXMgLSBqdXN0IGV4ZWN1dGUgdGhlIGNhbGwuCiAgICAgICAgICAgIF90by5jYWxsLnZhbHVlKF92YWx1ZSkoX2RhdGEpOwogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgLy8gZGV0ZXJtaW5lIG91ciBvcGVyYXRpb24gaGFzaC4KICAgICAgICBfciA9IHNoYTMobXNnLmRhdGEsIGJsb2NrLm51bWJlcik7CiAgICAgICAgaWYgKCFjb25maXJtKF9yKSAmJiBtX3R4c1tfcl0udG8gPT0gMCkgewogICAgICAgICAgICBtX3R4c1tfcl0udG8gPSBfdG87CiAgICAgICAgICAgIG1fdHhzW19yXS52YWx1ZSA9IF92YWx1ZTsKICAgICAgICAgICAgbV90eHNbX3JdLmRhdGEgPSBfZGF0YTsKICAgICAgICAgICAgQ29uZmlybWF0aW9uTmVlZGVkKF9yLCBtc2cuc2VuZGVyLCBfdmFsdWUsIF90bywgX2RhdGEpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBjb25maXJtIGEgdHJhbnNhY3Rpb24gdGhyb3VnaCBqdXN0IHRoZSBoYXNoLiB3ZSB1c2UgdGhlIHByZXZpb3VzIHRyYW5zYWN0aW9ucyBtYXAsIG1fdHhzLCBpbiBvcmRlcgogICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBib2R5IG9mIHRoZSB0cmFuc2FjdGlvbiBmcm9tIHRoZSBoYXNoIHByb3ZpZGVkLgogICAgZnVuY3Rpb24gY29uZmlybShieXRlczMyIF9oKSBvbmx5bWFueW93bmVycyhfaCkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChtX3R4c1tfaF0udG8gIT0gMCkgewogICAgICAgICAgICBtX3R4c1tfaF0udG8uY2FsbC52YWx1ZShtX3R4c1tfaF0udmFsdWUpKG1fdHhzW19oXS5kYXRhKTsKICAgICAgICAgICAgTXVsdGlUcmFuc2FjdChtc2cuc2VuZGVyLCBfaCwgbV90eHNbX2hdLnZhbHVlLCBtX3R4c1tfaF0udG8sIG1fdHhzW19oXS5kYXRhKTsKICAgICAgICAgICAgZGVsZXRlIG1fdHhzW19oXTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIC8vIElOVEVSTkFMIE1FVEhPRFMKCiAgICBmdW5jdGlvbiBjbGVhclBlbmRpbmcoKSBpbnRlcm5hbCB7CiAgICAgICAgdWludCBsZW5ndGggPSBtX3BlbmRpbmdJbmRleC5sZW5ndGg7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpCiAgICAgICAgICAgIGRlbGV0ZSBtX3R4c1ttX3BlbmRpbmdJbmRleFtpXV07CiAgICAgICAgc3VwZXIuY2xlYXJQZW5kaW5nKCk7CiAgICB9CgoJLy8gRklFTERTCgogICAgLy8gcGVuZGluZyB0cmFuc2FjdGlvbnMgd2UgaGF2ZSBhdCBwcmVzZW50LgogICAgbWFwcGluZyAoYnl0ZXMzMiA9PiBUcmFuc2FjdGlvbikgbV90eHM7Cn0='.
	

]
