Class {
	#name : #SRT9d0e34154d3d47f30983e0c5aaec50f0e446dabb,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9d0e34154d3d47f30983e0c5aaec50f0e446dabb >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljCiAgICB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQoKfQoKCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB0b2tlbnMpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB0b2tlbnMpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdG9rZW5zKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdG9rZW5zKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgoKLyoqCiAqIEB0aXRsZSBQb1NUb2tlblN0YW5kYXJkCiAqIEBkZXYgdGhlIGludGVyZmFjZSBvZiBQb1NUb2tlblN0YW5kYXJkCiAqLwpjb250cmFjdCBQb1NUb2tlblN0YW5kYXJkIHsKICAgIHVpbnQyNTYgcHVibGljIHN0YWtlU3RhcnRUaW1lOwogICAgdWludDI1NiBwdWJsaWMgc3Rha2VNaW5BZ2U7CiAgICB1aW50MjU2IHB1YmxpYyBzdGFrZU1heEFnZTsKICAgIGZ1bmN0aW9uIG1pbnQoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBjb2luQWdlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gYW5udWFsSW50ZXJlc3QoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCBfYWRkcmVzcywgdWludCBfcmV3YXJkKTsKfQoKCmNvbnRyYWN0IFRlcnJhRmlybWEgaXMgRVJDMjAsUG9TVG9rZW5TdGFuZGFyZCxPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJUZXJyYUZpcm1hIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlRGQyI7CiAgICB1aW50IHB1YmxpYyBkZWNpbWFscyA9IDg7CgogICAgdWludCBwdWJsaWMgY2hhaW5TdGFydFRpbWU7IC8vY2hhaW4gc3RhcnQgdGltZQogICAgdWludCBwdWJsaWMgY2hhaW5TdGFydEJsb2NrTnVtYmVyOyAvL2NoYWluIHN0YXJ0IGJsb2NrIG51bWJlcgogICAgdWludCBwdWJsaWMgc3Rha2VTdGFydFRpbWU7IC8vc3Rha2Ugc3RhcnQgdGltZQogICAgdWludCBwdWJsaWMgc3Rha2VNaW5BZ2UgPSAzIGRheXM7IC8vIG1pbmltdW0gYWdlIGZvciBjb2luIGFnZTogM0QKICAgIHVpbnQgcHVibGljIHN0YWtlTWF4QWdlID0gMzAgZGF5czsgLy8gc3Rha2UgYWdlIG9mIGZ1bGwgd2VpZ2h0OiAzMEQKICAgIHVpbnQgcHVibGljIG1heE1pbnRQcm9vZk9mU3Rha2UgPSA1NioqNzsgLy8gZGVmYXVsdCAxMCUgYW5udWFsIGludGVyZXN0CgogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICB1aW50IHB1YmxpYyBtYXhUb3RhbFN1cHBseTsKICAgIHVpbnQgcHVibGljIHRvdGFsSW5pdGlhbFN1cHBseTsKCiAgICBzdHJ1Y3QgdHJhbnNmZXJJblN0cnVjdHsKICAgIHVpbnQxMjggYW1vdW50OwogICAgdWludDY0IHRpbWU7CiAgICB9CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdHJhbnNmZXJJblN0cnVjdFtdKSB0cmFuc2ZlckluczsKCiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8qKgogICAgICogQGRldiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjay4KICAgICAqLwogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgICAgIHJlcXVpcmUobXNnLmRhdGEubGVuZ3RoID49IHNpemUgKyA0KTsKICAgICAgICBfOwogICAgfQogICAgbW9kaWZpZXIgY2FuUG9TTWludCgpIHsKICAgICAgICByZXF1aXJlKHRvdGFsU3VwcGx5IDwgbWF4VG90YWxTdXBwbHkpOwogICAgICAgIF87CiAgICB9CgoKICAgIAoKICAgIGZ1bmN0aW9uIFRlcnJhRmlybWEoKSBwdWJsaWMgeyAKICAgICAgICBtYXhUb3RhbFN1cHBseSA9IDgwMDAwMDAwMDAwMDAwMDAwOyAvLyA4MDAgTWlsLgogICAgICAgIHRvdGFsSW5pdGlhbFN1cHBseSA9IDgwMDAwMDAwMDAwMDAwMDA7IC8vIDgwIE1pbC4KCiAgICAgICAgY2hhaW5TdGFydFRpbWUgPSBub3c7CiAgICAgICAgY2hhaW5TdGFydEJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyOwoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHRvdGFsSW5pdGlhbFN1cHBseTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsSW5pdGlhbFN1cHBseTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYobXNnLnNlbmRlciA9PSBfdG8pIHJldHVybiBtaW50KCk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ubGVuZ3RoID4gMCkgZGVsZXRlIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdOwogICAgICAgIHVpbnQ2NCBfbm93ID0gdWludDY0KG5vdyk7CiAgICAgICAgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQxMjgoYmFsYW5jZXNbbXNnLnNlbmRlcl0pLF9ub3cpKTsKICAgICAgICB0cmFuc2Zlckluc1tfdG9dLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KF92YWx1ZSksX25vdykpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgogICAgICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIGlmKHRyYW5zZmVySW5zW19mcm9tXS5sZW5ndGggPiAwKSBkZWxldGUgdHJhbnNmZXJJbnNbX2Zyb21dOwogICAgICAgIHVpbnQ2NCBfbm93ID0gdWludDY0KG5vdyk7CiAgICAgICAgdHJhbnNmZXJJbnNbX2Zyb21dLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KGJhbGFuY2VzW19mcm9tXSksX25vdykpOwogICAgICAgIHRyYW5zZmVySW5zW190b10ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQxMjgoX3ZhbHVlKSxfbm93KSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50KCkgY2FuUG9TTWludCBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmKGJhbGFuY2VzW21zZy5zZW5kZXJdIDw9IDApIHJldHVybiBmYWxzZTsKICAgICAgICBpZih0cmFuc2Zlckluc1ttc2cuc2VuZGVyXS5sZW5ndGggPD0gMCkgcmV0dXJuIGZhbHNlOwoKICAgICAgICB1aW50IHJld2FyZCA9IGdldFByb29mT2ZTdGFrZVJld2FyZChtc2cuc2VuZGVyKTsKICAgICAgICBpZihyZXdhcmQgPD0gMCkgcmV0dXJuIGZhbHNlOwoKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChyZXdhcmQpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKHJld2FyZCk7CiAgICAgICAgZGVsZXRlIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdOwogICAgICAgIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KGJhbGFuY2VzW21zZy5zZW5kZXJdKSx1aW50NjQobm93KSkpOwoKICAgICAgICBNaW50KG1zZy5zZW5kZXIsIHJld2FyZCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QmxvY2tOdW1iZXIoKSBwdWJsaWMgcmV0dXJucyAodWludCBibG9ja051bWJlcikgewogICAgICAgIGJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyLnN1YihjaGFpblN0YXJ0QmxvY2tOdW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvaW5BZ2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBteUNvaW5BZ2UpIHsKICAgICAgICBteUNvaW5BZ2UgPSBnZXRDb2luQWdlKG1zZy5zZW5kZXIsbm93KTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbm51YWxJbnRlcmVzdCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQgaW50ZXJlc3QpIHsKICAgICAgICB1aW50IF9ub3cgPSBub3c7CiAgICAgICAgaW50ZXJlc3QgPSBtYXhNaW50UHJvb2ZPZlN0YWtlOwogICAgICAgIGlmKChfbm93LnN1YihzdGFrZVN0YXJ0VGltZSkpLmRpdigxIHllYXJzKSA9PSAwKSB7CiAgICAgICAgICAgIGludGVyZXN0ID0gKDc3MCAqIG1heE1pbnRQcm9vZk9mU3Rha2UpLmRpdigxMDApOwogICAgICAgIH0gZWxzZSBpZigoX25vdy5zdWIoc3Rha2VTdGFydFRpbWUpKS5kaXYoMSB5ZWFycykgPT0gMSl7CiAgICAgICAgICAgIGludGVyZXN0ID0gKDQzNSAqIG1heE1pbnRQcm9vZk9mU3Rha2UpLmRpdigxMDApOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQcm9vZk9mU3Rha2VSZXdhcmQoYWRkcmVzcyBfYWRkcmVzcykgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJlcXVpcmUoIChub3cgPj0gc3Rha2VTdGFydFRpbWUpICYmIChzdGFrZVN0YXJ0VGltZSA+IDApICk7CgogICAgICAgIHVpbnQgX25vdyA9IG5vdzsKICAgICAgICB1aW50IF9jb2luQWdlID0gZ2V0Q29pbkFnZShfYWRkcmVzcywgX25vdyk7CiAgICAgICAgaWYoX2NvaW5BZ2UgPD0gMCkgcmV0dXJuIDA7CgogICAgICAgIHVpbnQgaW50ZXJlc3QgPSBtYXhNaW50UHJvb2ZPZlN0YWtlOwogICAgICAgIC8vIER1ZSB0byB0aGUgaGlnaCBpbnRlcmVzdCByYXRlIGZvciB0aGUgZmlyc3QgdHdvIHllYXJzLCBjb21wb3VuZGluZyBzaG91bGQgYmUgdGFrZW4gaW50byBhY2NvdW50LgogICAgICAgIC8vIEVmZmVjdGl2ZSBhbm51YWwgaW50ZXJlc3QgcmF0ZSA9ICgxICsgKG5vbWluYWwgcmF0ZSAvIG51bWJlciBvZiBjb21wb3VuZGluZyBwZXJpb2RzKSkgXiAobnVtYmVyIG9mIGNvbXBvdW5kaW5nIHBlcmlvZHMpIC0gMQogICAgICAgIGlmKChfbm93LnN1YihzdGFrZVN0YXJ0VGltZSkpLmRpdigxIHllYXJzKSA9PSAwKSB7CiAgICAgICAgICAgIC8vIDFzdCB5ZWFyIGVmZmVjdGl2ZSBhbm51YWwgaW50ZXJlc3QgcmF0ZSBpcyAxMDAlIHdoZW4gd2Ugc2VsZWN0IHRoZSBzdGFrZU1heEFnZSAoOTAgZGF5cykgYXMgdGhlIGNvbXBvdW5kaW5nIHBlcmlvZC4KICAgICAgICAgICAgaW50ZXJlc3QgPSAoNzcwICogbWF4TWludFByb29mT2ZTdGFrZSkuZGl2KDEwMCk7CiAgICAgICAgfSBlbHNlIGlmKChfbm93LnN1YihzdGFrZVN0YXJ0VGltZSkpLmRpdigxIHllYXJzKSA9PSAxKXsKICAgICAgICAgICAgLy8gMm5kIHllYXIgZWZmZWN0aXZlIGFubnVhbCBpbnRlcmVzdCByYXRlIGlzIDUwJQogICAgICAgICAgICBpbnRlcmVzdCA9ICg0MzUgKiBtYXhNaW50UHJvb2ZPZlN0YWtlKS5kaXYoMTAwKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAoX2NvaW5BZ2UgKiBpbnRlcmVzdCkuZGl2KDM2NSAqICgxMCoqZGVjaW1hbHMpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRDb2luQWdlKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX25vdykgaW50ZXJuYWwgcmV0dXJucyAodWludCBfY29pbkFnZSkgewogICAgICAgIGlmKHRyYW5zZmVySW5zW19hZGRyZXNzXS5sZW5ndGggPD0gMCkgcmV0dXJuIDA7CgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IHRyYW5zZmVySW5zW19hZGRyZXNzXS5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgIGlmKCBfbm93IDwgdWludCh0cmFuc2Zlckluc1tfYWRkcmVzc11baV0udGltZSkuYWRkKHN0YWtlTWluQWdlKSApIGNvbnRpbnVlOwoKICAgICAgICAgICAgdWludCBuQ29pblNlY29uZHMgPSBfbm93LnN1Yih1aW50KHRyYW5zZmVySW5zW19hZGRyZXNzXVtpXS50aW1lKSk7CiAgICAgICAgICAgIGlmKCBuQ29pblNlY29uZHMgPiBzdGFrZU1heEFnZSApIG5Db2luU2Vjb25kcyA9IHN0YWtlTWF4QWdlOwoKICAgICAgICAgICAgX2NvaW5BZ2UgPSBfY29pbkFnZS5hZGQodWludCh0cmFuc2Zlckluc1tfYWRkcmVzc11baV0uYW1vdW50KSAqIG5Db2luU2Vjb25kcy5kaXYoMSBkYXlzKSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIG93bmVyU2V0U3Rha2VTdGFydFRpbWUodWludCB0aW1lc3RhbXApIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoKHN0YWtlU3RhcnRUaW1lIDw9IDApICYmICh0aW1lc3RhbXAgPj0gY2hhaW5TdGFydFRpbWUpKTsKICAgICAgICBzdGFrZVN0YXJ0VGltZSA9IHRpbWVzdGFtcDsKICAgIH0KCiAgICBmdW5jdGlvbiBvd25lckJ1cm5Ub2tlbih1aW50IF92YWx1ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBkZWxldGUgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl07CiAgICAgICAgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQxMjgoYmFsYW5jZXNbbXNnLnNlbmRlcl0pLHVpbnQ2NChub3cpKSk7CgogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICAgICAgdG90YWxJbml0aWFsU3VwcGx5ID0gdG90YWxJbml0aWFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIG1heFRvdGFsU3VwcGx5ID0gbWF4VG90YWxTdXBwbHkuc3ViKF92YWx1ZSoxMCk7CiAgICAgICAgCgogICAgICAgIEJ1cm4obXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgIH0KCiAgICAvKiBCYXRjaCB0b2tlbiB0cmFuc2Zlci4gVXNlZCBieSBjb250cmFjdCBjcmVhdG9yIHRvIGRpc3RyaWJ1dGUgaW5pdGlhbCB0b2tlbnMgdG8gaG9sZGVycyAqLwogICAgZnVuY3Rpb24gYmF0Y2hUcmFuc2ZlcihhZGRyZXNzW10gX3JlY2lwaWVudHMsIHVpbnRbXSBfdmFsdWVzKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKCBfcmVjaXBpZW50cy5sZW5ndGggPiAwICYmIF9yZWNpcGllbnRzLmxlbmd0aCA9PSBfdmFsdWVzLmxlbmd0aCk7CgogICAgICAgIHVpbnQgdG90YWwgPSAwOwogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgX3ZhbHVlcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgIHRvdGFsID0gdG90YWwuYWRkKF92YWx1ZXNbaV0pOwogICAgICAgIH0KICAgICAgICByZXF1aXJlKHRvdGFsIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAgICAgdWludDY0IF9ub3cgPSB1aW50NjQobm93KTsKICAgICAgICBmb3IodWludCBqID0gMDsgaiA8IF9yZWNpcGllbnRzLmxlbmd0aDsgaisrKXsKICAgICAgICAgICAgYmFsYW5jZXNbX3JlY2lwaWVudHNbal1dID0gYmFsYW5jZXNbX3JlY2lwaWVudHNbal1dLmFkZChfdmFsdWVzW2pdKTsKICAgICAgICAgICAgdHJhbnNmZXJJbnNbX3JlY2lwaWVudHNbal1dLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KF92YWx1ZXNbal0pLF9ub3cpKTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3JlY2lwaWVudHNbal0sIF92YWx1ZXNbal0pOwogICAgICAgIH0KCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIodG90YWwpOwogICAgICAgIGlmKHRyYW5zZmVySW5zW21zZy5zZW5kZXJdLmxlbmd0aCA+IDApIGRlbGV0ZSB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXTsKICAgICAgICBpZihiYWxhbmNlc1ttc2cuc2VuZGVyXSA+IDApIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KGJhbGFuY2VzW21zZy5zZW5kZXJdKSxfbm93KSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9'.
	

]
