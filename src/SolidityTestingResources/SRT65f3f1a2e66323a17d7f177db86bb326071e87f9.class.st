Class {
	#name : #SRT65f3f1a2e66323a17d7f177db86bb326071e87f9,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT65f3f1a2e66323a17d7f177db86bb326071e87f9 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7Cgpjb250cmFjdCBQbGF5ZXJUb2tlbiB7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIG93bmVyKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsOwogICAgZnVuY3Rpb24gdG9rZW5zT2ZPd25lcihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NltdIG93bmVyVG9rZW5zKTsKICAgIGZ1bmN0aW9uIGNyZWF0ZVBsYXllcih1aW50MzJbN10gX3NraWxscywgdWludDI1NiBfcG9zaXRpb24sIGFkZHJlc3MgX293bmVyKSBwdWJsaWMgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiBnZXRQbGF5ZXIodWludDI1NiBwbGF5ZXJJZCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MzIgdGFsZW50LCB1aW50MzIgdGFjdGljcywgdWludDMyIGRyaWJibGluZywgdWludDMyIGtpY2ssCiAgICAgICB1aW50MzIgc3BlZWQsIHVpbnQzMiBwYXNzLCB1aW50MzIgc2VsZWN0aW9uKTsKICAgIGZ1bmN0aW9uIGdldFBvc2l0aW9uKHVpbnQyNTYgX3BsYXllcklkKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTYpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdG9rZW5JZCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX2FwcHJvdmVkLCB1aW50MjU2IF90b2tlbklkKTsKfQoKY29udHJhY3QgQ2F0YWxvZ1BsYXllcnMgewogICAgZnVuY3Rpb24gZ2V0Qm94UHJpY2UodWludDI1NiBfbGVhZ3VlLCB1aW50MjU2IF9wb3NpdGlvbikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiBnZXRMZW5ndGhDbGFzc1BsYXllcnModWludDI1NiBfbGVhZ3VlLCB1aW50MjU2IF9wb3NpdGlvbikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiBnZXRDbGFzc1BsYXllcnModWludDI1NiBfbGVhZ3VlLCB1aW50MjU2IF9wb3NpdGlvbiwgdWludDI1NiBfaW5kZXgpIHB1YmxpYyB2aWV3IHJldHVybnModWludDMyWzddIHNraWxscyk7CiAgICBmdW5jdGlvbiBpbmNyZW1lbnRDb3VudFNhbGVzKHVpbnQyNTYgX2xlYWd1ZSwgdWludDI1NiBfcG9zaXRpb24pIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGdldENvdW50U2FsZXModWludDI1NiBfbGVhZ3VlLCB1aW50MjU2IF9wb3NpdGlvbikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2KTsKfQoKY29udHJhY3QgVGVhbSB7CiAgICB1aW50MjU2IHB1YmxpYyBjb3VudFBsYXllcnNJblBvc2l0aW9uOwogICAgdWludDI1NltdIHB1YmxpYyB0ZWFtc0lkczsKCiAgICBmdW5jdGlvbiBjcmVhdGVUZWFtKHN0cmluZyBfbmFtZSwgc3RyaW5nIF9sb2dvLCB1aW50MjU2IF9taW5Ta2lsbHMsIHVpbnQyNTYgX21pblRhbGVudCwgYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3BsYXllcklkKSBwdWJsaWMgcmV0dXJucyh1aW50MjU2IF90ZWFtSWQpOwogICAgZnVuY3Rpb24gZ2V0UGxheWVyVGVhbSh1aW50MjU2IF9wbGF5ZXJJZCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGdldE93bmVyVGVhbShhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGdldENvdW50UGxheWVyc09mT3duZXIodWludDI1NiBfdGVhbUlkLCBhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2IGNvdW50KTsKICAgIGZ1bmN0aW9uIGdldENvdW50UG9zaXRpb24odWludDI1NiBfdGVhbUlkLCB1aW50MjU2IF9wb3NpdGlvbikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGpvaW5UZWFtKHVpbnQyNTYgX3RlYW1JZCwgYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3BsYXllcklkLCB1aW50MjU2IF9wb3NpdGlvbikgcHVibGljOwogICAgZnVuY3Rpb24gaXNUZWFtKHVpbnQyNTYgX3RlYW1JZCkgcHVibGljIHZpZXcgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIGxlYXZlVGVhbSh1aW50MjU2IF90ZWFtSWQsIGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wbGF5ZXJJZCwgdWludDI1NiBfcG9zaXRpb24pIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGdldFRlYW1QbGF5ZXJzKHVpbnQyNTYgX3RlYW1JZCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2W10pOwogICAgZnVuY3Rpb24gZ2V0Q291bnRQbGF5ZXJzT2ZUZWFtKHVpbnQyNTYgX3RlYW1JZCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGdldFBsYXllcklkT2ZJbmRleCh1aW50MjU2IF90ZWFtSWQsIHVpbnQyNTYgaW5kZXgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gZ2V0Q291bnRUZWFtcygpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1Nik7CiAgICBmdW5jdGlvbiBnZXRUZWFtU3VtU2tpbGxzKHVpbnQyNTYgX3RlYW1JZCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2IHN1bVNraWxscyk7CiAgICBmdW5jdGlvbiBnZXRNaW5Ta2lsbHModWludDI1NiBfdGVhbUlkKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gZ2V0TWluVGFsZW50KHVpbnQyNTYgX3RlYW1JZCkgIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1Nik7CgoKfQoKY29udHJhY3QgRk1Xb3JsZEFjY2Vzc0NvbnRyb2wgewogICAgYWRkcmVzcyBwdWJsaWMgY2VvQWRkcmVzczsKICAgIGFkZHJlc3MgcHVibGljIGNvb0FkZHJlc3M7CgogICAgYm9vbCBwdWJsaWMgcGF1c2UgPSBmYWxzZTsKCiAgICBtb2RpZmllciBvbmx5Q0VPKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjZW9BZGRyZXNzKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlDT08oKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUMoKSB7CiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgbXNnLnNlbmRlciA9PSBjb29BZGRyZXNzIHx8CiAgICAgICAgICAgIG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcwogICAgICAgICk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBub3RQYXVzZSgpIHsKICAgICAgICByZXF1aXJlKCFwYXVzZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDRU8oYWRkcmVzcyBfbmV3Q0VPKSBleHRlcm5hbCBvbmx5Q0VPIHsKICAgICAgICByZXF1aXJlKF9uZXdDRU8gIT0gYWRkcmVzcygwKSk7CgogICAgICAgIGNlb0FkZHJlc3MgPSBfbmV3Q0VPOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldENPTyhhZGRyZXNzIF9uZXdDT08pIGV4dGVybmFsIG9ubHlDRU8gewogICAgICAgIHJlcXVpcmUoX25ld0NPTyAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgY29vQWRkcmVzcyA9IF9uZXdDT087CiAgICB9CgoKICAgIGZ1bmN0aW9uIHNldFBhdXNlKGJvb2wgX3BhdXNlKSBleHRlcm5hbCBvbmx5QyB7CiAgICAgICAgcGF1c2UgPSBfcGF1c2U7CiAgICB9CgoKfQoKCmNvbnRyYWN0IEZNV29ybGQgaXMgRk1Xb3JsZEFjY2Vzc0NvbnRyb2wgewoKICAgIGFkZHJlc3MgcHVibGljIHBsYXllclRva2VuQWRkcmVzczsKICAgIGFkZHJlc3MgcHVibGljIGNhdGFsb2dQbGF5ZXJzQWRkcmVzczsKICAgIGFkZHJlc3MgcHVibGljIHRlYW1BZGRyZXNzOwoKICAgIGFkZHJlc3MgcHJpdmF0ZSBsYXN0UGxheWVyT3duZXIgPSBhZGRyZXNzKDB4MCk7CgogICAgdWludDI1NiBwdWJsaWMgYmFsYW5jZUZvclJld2FyZDsKICAgIHVpbnQyNTYgcHVibGljIGRlcG9zaXRzOwogICAgCiAgICB1aW50MjU2IHB1YmxpYyBjb3VudFBhcnRuZXJQbGF5ZXJzOwoKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VzVGVhbXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlc0ludGVybmFsOwoKICAgIGJvb2wgcHVibGljIGNhbGN1bGF0ZWRSZXdhcmQgPSB0cnVlOwogICAgdWludDI1NiBwdWJsaWMgbGFzdENhbGN1bGF0aW9uUmV3YXJkVGltZTsKCiAgICBtb2RpZmllciBpc0NhbGN1bGF0ZWRSZXdhcmQoKSB7CiAgICAgICAgcmVxdWlyZShjYWxjdWxhdGVkUmV3YXJkKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFBsYXllclRva2VuQWRkcmVzcyhhZGRyZXNzIF9wbGF5ZXJUb2tlbkFkZHJlc3MpIHB1YmxpYyBvbmx5Q0VPIHsKICAgICAgICBwbGF5ZXJUb2tlbkFkZHJlc3MgPSBfcGxheWVyVG9rZW5BZGRyZXNzOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldENhdGFsb2dQbGF5ZXJzQWRkcmVzcyhhZGRyZXNzIF9jYXRhbG9nUGxheWVyc0FkZHJlc3MpIHB1YmxpYyBvbmx5Q0VPIHsKICAgICAgICBjYXRhbG9nUGxheWVyc0FkZHJlc3MgPSBfY2F0YWxvZ1BsYXllcnNBZGRyZXNzOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFRlYW1BZGRyZXNzKGFkZHJlc3MgX3RlYW1BZGRyZXNzKSBwdWJsaWMgb25seUNFTyB7CiAgICAgICAgdGVhbUFkZHJlc3MgPSBfdGVhbUFkZHJlc3M7CiAgICB9CgogICAgZnVuY3Rpb24gRk1Xb3JsZChhZGRyZXNzIF9jYXRhbG9nUGxheWVyc0FkZHJlc3MsIGFkZHJlc3MgX3BsYXllclRva2VuQWRkcmVzcywgYWRkcmVzcyBfdGVhbUFkZHJlc3MpIHB1YmxpYyB7CiAgICAgICAgY2F0YWxvZ1BsYXllcnNBZGRyZXNzID0gX2NhdGFsb2dQbGF5ZXJzQWRkcmVzczsKICAgICAgICBwbGF5ZXJUb2tlbkFkZHJlc3MgPSBfcGxheWVyVG9rZW5BZGRyZXNzOwogICAgICAgIHRlYW1BZGRyZXNzID0gX3RlYW1BZGRyZXNzOwoKICAgICAgICBjZW9BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICBjb29BZGRyZXNzID0gbXNnLnNlbmRlcjsKCiAgICAgICAgbGFzdENhbGN1bGF0aW9uUmV3YXJkVGltZSA9IG5vdzsKICAgIH0KCiAgICBmdW5jdGlvbiBvcGVuQm94UGxheWVyKHVpbnQyNTYgX2xlYWd1ZSwgdWludDI1NiBfcG9zaXRpb24pIGV4dGVybmFsIG5vdFBhdXNlIGlzQ2FsY3VsYXRlZFJld2FyZCBwYXlhYmxlIHJldHVybnMgKHVpbnQyNTYgX3ByaWNlKSB7CiAgICAgICAgaWYgKG5vdyA+IDE1MjUwMjQ4MDApIHJldmVydCgpOwogICAgICAgIAogICAgICAgIFBsYXllclRva2VuIHBsYXllclRva2VuID0gUGxheWVyVG9rZW4ocGxheWVyVG9rZW5BZGRyZXNzKTsKICAgICAgICBDYXRhbG9nUGxheWVycyBjYXRhbG9nUGxheWVycyA9IENhdGFsb2dQbGF5ZXJzKGNhdGFsb2dQbGF5ZXJzQWRkcmVzcyk7CgogICAgICAgIF9wcmljZSA9IGNhdGFsb2dQbGF5ZXJzLmdldEJveFByaWNlKF9sZWFndWUsIF9wb3NpdGlvbik7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNJbnRlcm5hbFttc2cuc2VuZGVyXSArPSBtc2cudmFsdWU7CiAgICAgICAgaWYgKGJhbGFuY2VzSW50ZXJuYWxbbXNnLnNlbmRlcl0gPCBfcHJpY2UpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIGJhbGFuY2VzSW50ZXJuYWxbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc0ludGVybmFsW21zZy5zZW5kZXJdIC0gX3ByaWNlOwoKICAgICAgICB1aW50MjU2IF9jbGFzc1BsYXllcklkID0gX2dldFJhbmRvbShjYXRhbG9nUGxheWVycy5nZXRMZW5ndGhDbGFzc1BsYXllcnMoX2xlYWd1ZSwgX3Bvc2l0aW9uKSwgbGFzdFBsYXllck93bmVyKTsKICAgICAgICB1aW50MzJbN10gbWVtb3J5IHNraWxscyA9IGNhdGFsb2dQbGF5ZXJzLmdldENsYXNzUGxheWVycyhfbGVhZ3VlLCBfcG9zaXRpb24sIF9jbGFzc1BsYXllcklkKTsKCiAgICAgICAgcGxheWVyVG9rZW4uY3JlYXRlUGxheWVyKHNraWxscywgX3Bvc2l0aW9uLCBtc2cuc2VuZGVyKTsKICAgICAgICBsYXN0UGxheWVyT3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGJhbGFuY2VGb3JSZXdhcmQgKz0gbXNnLnZhbHVlIC8gMjsKICAgICAgICBkZXBvc2l0cyArPSBtc2cudmFsdWUgLyAyOwogICAgICAgIGNhdGFsb2dQbGF5ZXJzLmluY3JlbWVudENvdW50U2FsZXMoX2xlYWd1ZSwgX3Bvc2l0aW9uKTsKCiAgICAgICAgaWYgKG5vdyAtIGxhc3RDYWxjdWxhdGlvblJld2FyZFRpbWUgPiAyNCAqIDYwICogNjAgJiYgYmFsYW5jZUZvclJld2FyZCA+IDEwIGV0aGVyKSB7CiAgICAgICAgICAgIGNhbGN1bGF0ZWRSZXdhcmQgPSBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gX2dldFJhbmRvbSh1aW50MjU2IG1heCwgYWRkcmVzcyBhZGRBZGRyZXNzKSB2aWV3IGludGVybmFsIHJldHVybnModWludDI1NikgewogICAgICAgIHJldHVybiAodWludDI1NihibG9jay5ibG9ja2hhc2goYmxvY2subnVtYmVyLTEpKSArIHVpbnQyNTYoYWRkQWRkcmVzcykpICUgbWF4OwogICAgfQogICAgCiAgICBmdW5jdGlvbiBfcmVxdWlyZVRhbGVudFNraWxscyh1aW50MjU2IF9wbGF5ZXJJZCwgUGxheWVyVG9rZW4gcGxheWVyVG9rZW4sIHVpbnQyNTYgX21pblRhbGVudCwgdWludDI1NiBfbWluU2tpbGxzKSBpbnRlcm5hbCB2aWV3IHJldHVybnMoYm9vbCkgewogICAgICAgIHZhciAoX3RhbGVudCwgX3RhY3RpY3MsIF9kcmliYmxpbmcsIF9raWNrLCBfc3BlZWQsIF9wYXNzLCBfc2VsZWN0aW9uKSA9IHBsYXllclRva2VuLmdldFBsYXllcihfcGxheWVySWQpOwogICAgICAgIGlmICgoX3RhbGVudCA8IF9taW5UYWxlbnQpIHx8IChfdGFjdGljcyArIF9kcmliYmxpbmcgKyBfa2ljayArIF9zcGVlZCArIF9wYXNzICsgX3NlbGVjdGlvbiA8IF9taW5Ta2lsbHMpKSByZXR1cm4gZmFsc2U7IAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVRlYW0oc3RyaW5nIF9uYW1lLCBzdHJpbmcgX2xvZ28sIHVpbnQzMiBfbWluVGFsZW50LCB1aW50MzIgX21pblNraWxscywgdWludDI1NiBfcGxheWVySWQpIGV4dGVybmFsIG5vdFBhdXNlIGlzQ2FsY3VsYXRlZFJld2FyZAogICAgewogICAgICAgIFBsYXllclRva2VuIHBsYXllclRva2VuID0gUGxheWVyVG9rZW4ocGxheWVyVG9rZW5BZGRyZXNzKTsKICAgICAgICBUZWFtIHRlYW0gPSBUZWFtKHRlYW1BZGRyZXNzKTsKICAgICAgICByZXF1aXJlKHBsYXllclRva2VuLm93bmVyT2YoX3BsYXllcklkKSA9PSBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKHRlYW0uZ2V0UGxheWVyVGVhbShfcGxheWVySWQpID09IDApOwogICAgICAgIHJlcXVpcmUodGVhbS5nZXRPd25lclRlYW0obXNnLnNlbmRlcikgPT0gMCk7CiAgICAgICAgcmVxdWlyZShfcmVxdWlyZVRhbGVudFNraWxscyhfcGxheWVySWQsIHBsYXllclRva2VuLCBfbWluVGFsZW50LCBfbWluU2tpbGxzKSk7CiAgICAgICAgdGVhbS5jcmVhdGVUZWFtKF9uYW1lLCBfbG9nbywgX21pblRhbGVudCwgX21pblNraWxscywgbXNnLnNlbmRlciwgX3BsYXllcklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBqb2luVGVhbSh1aW50MjU2IF9wbGF5ZXJJZCwgdWludDI1NiBfdGVhbUlkKSBleHRlcm5hbCBub3RQYXVzZSBpc0NhbGN1bGF0ZWRSZXdhcmQKICAgIHsKICAgICAgICBQbGF5ZXJUb2tlbiBwbGF5ZXJUb2tlbiA9IFBsYXllclRva2VuKHBsYXllclRva2VuQWRkcmVzcyk7CiAgICAgICAgVGVhbSB0ZWFtID0gVGVhbSh0ZWFtQWRkcmVzcyk7CiAgICAgICAgcmVxdWlyZShwbGF5ZXJUb2tlbi5vd25lck9mKF9wbGF5ZXJJZCkgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZSh0ZWFtLmlzVGVhbShfdGVhbUlkKSk7CiAgICAgICAgcmVxdWlyZSh0ZWFtLmdldFBsYXllclRlYW0oX3BsYXllcklkKSA9PSAwKTsKICAgICAgICByZXF1aXJlKHRlYW0uZ2V0T3duZXJUZWFtKG1zZy5zZW5kZXIpID09IDAgfHwgdGVhbS5nZXRPd25lclRlYW0obXNnLnNlbmRlcikgPT0gX3RlYW1JZCk7CiAgICAgICAgdWludDI1NiBfcG9zaXRpb24gPSBwbGF5ZXJUb2tlbi5nZXRQb3NpdGlvbihfcGxheWVySWQpOwogICAgICAgIHJlcXVpcmUodGVhbS5nZXRDb3VudFBvc2l0aW9uKF90ZWFtSWQsIF9wb3NpdGlvbikgPCB0ZWFtLmNvdW50UGxheWVyc0luUG9zaXRpb24oKSk7CiAgICAgICAgcmVxdWlyZShfcmVxdWlyZVRhbGVudFNraWxscyhfcGxheWVySWQsIHBsYXllclRva2VuLCB0ZWFtLmdldE1pblRhbGVudChfdGVhbUlkKSwgdGVhbS5nZXRNaW5Ta2lsbHMoX3RlYW1JZCkpKTsKCiAgICAgICAgX2NhbGNUZWFtQmFsYW5jZShfdGVhbUlkLCB0ZWFtLCBwbGF5ZXJUb2tlbik7CiAgICAgICAgdGVhbS5qb2luVGVhbShfdGVhbUlkLCBtc2cuc2VuZGVyLCBfcGxheWVySWQsIF9wb3NpdGlvbik7CiAgICB9CgogICAgZnVuY3Rpb24gbGVhdmVUZWFtKHVpbnQyNTYgX3BsYXllcklkLCB1aW50MjU2IF90ZWFtSWQpIGV4dGVybmFsIG5vdFBhdXNlIGlzQ2FsY3VsYXRlZFJld2FyZAogICAgewogICAgICAgIFBsYXllclRva2VuIHBsYXllclRva2VuID0gUGxheWVyVG9rZW4ocGxheWVyVG9rZW5BZGRyZXNzKTsKICAgICAgICBUZWFtIHRlYW0gPSBUZWFtKHRlYW1BZGRyZXNzKTsKICAgICAgICByZXF1aXJlKHBsYXllclRva2VuLm93bmVyT2YoX3BsYXllcklkKSA9PSBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKHRlYW0uZ2V0UGxheWVyVGVhbShfcGxheWVySWQpID09IF90ZWFtSWQpOwogICAgICAgIF9jYWxjVGVhbUJhbGFuY2UoX3RlYW1JZCwgdGVhbSwgcGxheWVyVG9rZW4pOwogICAgICAgIHVpbnQyNTYgX3Bvc2l0aW9uID0gcGxheWVyVG9rZW4uZ2V0UG9zaXRpb24oX3BsYXllcklkKTsKICAgICAgICB0ZWFtLmxlYXZlVGVhbShfdGVhbUlkLCBtc2cuc2VuZGVyLCBfcGxheWVySWQsIF9wb3NpdGlvbik7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXcoYWRkcmVzcyBfc2VuZFRvLCB1aW50IF9hbW91bnQpIGV4dGVybmFsIG9ubHlDRU8gcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKF9hbW91bnQgPiBkZXBvc2l0cykgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGRlcG9zaXRzIC09IF9hbW91bnQ7CiAgICAgICAgX3NlbmRUby50cmFuc2ZlcihfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBfY2FsY1RlYW1CYWxhbmNlKHVpbnQyNTYgX3RlYW1JZCwgVGVhbSB0ZWFtLCBQbGF5ZXJUb2tlbiBwbGF5ZXJUb2tlbikgaW50ZXJuYWwgcmV0dXJucyhib29sKXsKICAgICAgICBpZiAoYmFsYW5jZXNUZWFtc1tfdGVhbUlkXSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBfY291bnRQbGF5ZXJzID0gdGVhbS5nZXRDb3VudFBsYXllcnNPZlRlYW0oX3RlYW1JZCk7CiAgICAgICAgZm9yKHVpbnQyNTYgaSA9IDA7IGkgPCBfY291bnRQbGF5ZXJzOyBpKyspIHsKICAgICAgICAgICAgdWludDI1NiBfcGxheWVySWQgPSB0ZWFtLmdldFBsYXllcklkT2ZJbmRleChfdGVhbUlkLCBpKTsKICAgICAgICAgICAgYWRkcmVzcyBfb3duZXIgPSBwbGF5ZXJUb2tlbi5vd25lck9mKF9wbGF5ZXJJZCk7CiAgICAgICAgICAgIGJhbGFuY2VzSW50ZXJuYWxbX293bmVyXSArPSBiYWxhbmNlc1RlYW1zW190ZWFtSWRdIC8gX2NvdW50UGxheWVyczsKICAgICAgICB9CiAgICAgICAgYmFsYW5jZXNUZWFtc1tfdGVhbUlkXSA9IDA7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdFdGhlcigpIGV4dGVybmFsIHJldHVybnMoYm9vbCkgewogICAgICAgIFRlYW0gdGVhbSA9IFRlYW0odGVhbUFkZHJlc3MpOwogICAgICAgIHVpbnQyNTYgX3RlYW1JZCA9IHRlYW0uZ2V0T3duZXJUZWFtKG1zZy5zZW5kZXIpOwogICAgICAgIGlmIChiYWxhbmNlc1RlYW1zW190ZWFtSWRdID4gMCkgewogICAgICAgICAgICBQbGF5ZXJUb2tlbiBwbGF5ZXJUb2tlbiA9IFBsYXllclRva2VuKHBsYXllclRva2VuQWRkcmVzcyk7CiAgICAgICAgICAgIF9jYWxjVGVhbUJhbGFuY2UoX3RlYW1JZCwgdGVhbSwgcGxheWVyVG9rZW4pOwogICAgICAgIH0KICAgICAgICBpZiAoYmFsYW5jZXNJbnRlcm5hbFttc2cuc2VuZGVyXSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihiYWxhbmNlc0ludGVybmFsW21zZy5zZW5kZXJdKTsKICAgICAgICBiYWxhbmNlc0ludGVybmFsW21zZy5zZW5kZXJdID0gMDsKCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNyZWF0ZVBhcnRuZXJQbGF5ZXIodWludDI1NiBfbGVhZ3VlLCB1aW50MjU2IF9wb3NpdGlvbiwgdWludDI1NiBfY2xhc3NQbGF5ZXJJZCwgYWRkcmVzcyBfdG9BZGRyZXNzKSBleHRlcm5hbCBub3RQYXVzZSBpc0NhbGN1bGF0ZWRSZXdhcmQgb25seUMgewogICAgICAgIGlmIChjb3VudFBhcnRuZXJQbGF5ZXJzID49IDMwMCkgcmV2ZXJ0KCk7CiAgICAgICAgCiAgICAgICAgUGxheWVyVG9rZW4gcGxheWVyVG9rZW4gPSBQbGF5ZXJUb2tlbihwbGF5ZXJUb2tlbkFkZHJlc3MpOwogICAgICAgIENhdGFsb2dQbGF5ZXJzIGNhdGFsb2dQbGF5ZXJzID0gQ2F0YWxvZ1BsYXllcnMoY2F0YWxvZ1BsYXllcnNBZGRyZXNzKTsKCiAgICAgICAgdWludDMyWzddIG1lbW9yeSBza2lsbHMgPSBjYXRhbG9nUGxheWVycy5nZXRDbGFzc1BsYXllcnMoX2xlYWd1ZSwgX3Bvc2l0aW9uLCBfY2xhc3NQbGF5ZXJJZCk7CgogICAgICAgIHBsYXllclRva2VuLmNyZWF0ZVBsYXllcihza2lsbHMsIF9wb3NpdGlvbiwgX3RvQWRkcmVzcyk7CiAgICAgICAgY291bnRQYXJ0bmVyUGxheWVycysrOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbGN1bGF0aW9uVGVhbXNSZXdhcmRzKHVpbnQyNTZbXSBvcmRlclRlYW1zSWRzKSBwdWJsaWMgb25seUMgewogICAgICAgIFRlYW0gdGVhbSA9IFRlYW0odGVhbUFkZHJlc3MpOwogICAgICAgIGlmICh0ZWFtLmdldENvdW50VGVhbXMoKSA8IDUwKSB7CiAgICAgICAgICAgIGxhc3RDYWxjdWxhdGlvblJld2FyZFRpbWUgPSBub3c7CiAgICAgICAgICAgIGNhbGN1bGF0ZWRSZXdhcmQgPSB0cnVlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmIChvcmRlclRlYW1zSWRzLmxlbmd0aCAhPSB0ZWFtLmdldENvdW50VGVhbXMoKSkgeyAKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZvcih1aW50MjU2IHRlYW1JbmRleCA9IDA7IHRlYW1JbmRleCA8IG9yZGVyVGVhbXNJZHMubGVuZ3RoIC0gMTsgdGVhbUluZGV4KyspIHsKICAgICAgICAgICAgaWYgKHRlYW0uZ2V0VGVhbVN1bVNraWxscyhvcmRlclRlYW1zSWRzW3RlYW1JbmRleF0pIDwgdGVhbS5nZXRUZWFtU3VtU2tpbGxzKG9yZGVyVGVhbXNJZHNbdGVhbUluZGV4ICsgMV0pKSB7CiAgICAgICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB1aW50MjU2IGs7CiAgICAgICAgZm9yKHVpbnQyNTYgaSA9IDE7IGkgPCA1MTsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpID09IDEpIHsgayA9IDIwMDA7IH0gCiAgICAgICAgICAgIGVsc2UgaWYgKGkgPT0gMikgeyBrID0gMTQwMDsgfQogICAgICAgICAgICBlbHNlIGlmIChpID09IDMpIHsgayA9IDEwMDA7IH0KICAgICAgICAgICAgZWxzZSBpZiAoaSA9PSA0KSB7IGsgPSA2MDA7IH0KICAgICAgICAgICAgZWxzZSBpZiAoaSA9PSA1KSB7IGsgPSA1MDA7IH0KICAgICAgICAgICAgZWxzZSBpZiAoaSA9PSA2KSB7IGsgPSA0MDA7IH0KICAgICAgICAgICAgZWxzZSBpZiAoaSA9PSA3KSB7IGsgPSAzMDA7IH0KICAgICAgICAgICAgZWxzZSBpZiAoaSA+PSA4ICYmIGkgPD0gMTIpIHsgayA9IDIwMDsgfQogICAgICAgICAgICBlbHNlIGlmIChpID49IDEzICYmIGkgPD0gMzApIHsgayA9IDEwMDsgfQogICAgICAgICAgICBlbHNlIGlmIChpID49IDMxKSB7IGsgPSA1MDsgfQogICAgICAgICAgICBiYWxhbmNlc1RlYW1zW29yZGVyVGVhbXNJZHNbaSAtIDFdXSA9IGJhbGFuY2VGb3JSZXdhcmQgKiBrIC8gMTAwMDA7CiAgICAgICAgfQogICAgICAgIGJhbGFuY2VGb3JSZXdhcmQgPSAwOwogICAgICAgIGxhc3RDYWxjdWxhdGlvblJld2FyZFRpbWUgPSBub3c7CiAgICAgICAgY2FsY3VsYXRlZFJld2FyZCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0U3VtV2l0aGRyYXdhbHMoKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTYgc3VtKSB7CiAgICAgICAgZm9yKHVpbnQyNTYgaSA9IDA7IGkgPCA1MTsgaSsrKSB7CiAgICAgICAgICAgICBzdW0gKz0gYmFsYW5jZXNUZWFtc1tpICsgMV07CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJhbGFuY2UoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICB1aW50MjU2IGJhbGFuY2VUZWFtID0gZ2V0QmFsYW5jZVRlYW0obXNnLnNlbmRlcik7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VUZWFtICsgYmFsYW5jZXNJbnRlcm5hbFttc2cuc2VuZGVyXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0QmFsYW5jZVRlYW0oYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NiBiYWxhbmNlVGVhbSkgewogICAgICAgIFRlYW0gdGVhbSA9IFRlYW0odGVhbUFkZHJlc3MpOwogICAgICAgIHVpbnQyNTYgX3RlYW1JZCA9IHRlYW0uZ2V0T3duZXJUZWFtKF9vd25lcik7CiAgICAgICAgaWYgKF90ZWFtSWQgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBfY291bnRQbGF5ZXJzT3duZXIgPSB0ZWFtLmdldENvdW50UGxheWVyc09mT3duZXIoX3RlYW1JZCwgX293bmVyKTsKICAgICAgICB1aW50MjU2IF9jb3VudFBsYXllcnMgPSB0ZWFtLmdldENvdW50UGxheWVyc09mVGVhbShfdGVhbUlkKTsKICAgICAgICBiYWxhbmNlVGVhbSA9IGJhbGFuY2VzVGVhbXNbX3RlYW1JZF0gLyBfY291bnRQbGF5ZXJzICogX2NvdW50UGxheWVyc093bmVyOwogICAgfQoKfQ=='.
	

]
