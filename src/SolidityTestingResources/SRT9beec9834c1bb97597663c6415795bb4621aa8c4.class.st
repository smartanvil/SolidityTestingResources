Class {
	#name : #SRT9beec9834c1bb97597663c6415795bb4621aa8c4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9beec9834c1bb97597663c6415795bb4621aa8c4 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICoKICogQGF1dGhvciAgPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJmZDkzOTg4YTg5OGE5NDhlODliZDhkOGY5Mjg5OTI5MzkwOWM5NDkxZDM5ZTkyOTAiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgogKgogKiBWZXJzaW9uIEcKICoKICogT3ZlcnZpZXc6CiAqIFRoaXMgY29udHJhY3QgaW1wbGVtZW50cyBhIGJsaW5kIGF1Y3Rpb24gZm9yIGJ1cm5hYmxlIHRva2Vucy4gRWFjaCBzZWNyZXQgYmlkIGNvbnNpc3RzCiAqIG9mIGEgaGFzaGVkIGJpZC10dXBsZSwgKGBwcmljZWAsIGBxdWFudGl0eWAsIGBzYWx0YCksIHdoZXJlIHByaWNlIGlzIHRoZSBtYXhpbXVtIGFtb3VudAogKiBvZiBldGhlciAoaW4gc3phYm8pIGEgdXNlciBpcyB3aWxsaW5nIHRvIHBheSBwZXIgdG9rZW4sIHF1YW50aXR5IGlzIHRoZSBudW1iZXIgb2YgdG9rZW5zCiAqIHRoZSB1c2VyIHdhbnRzIHRvIGJ1eSwgYW5kIHNhbHQgaXMgYW4gYXJiaXRyYXJ5IHZhbHVlLiBUb2dldGhlciB3aXRoIHRoZSBoYXNoZWQgYmlkLXR1cGxlLAogKiB0aGUgdXNlciBpbmNsdWRlcyBhbiBlbmNyeXB0ZWQgYmlkIHR1cGxlLCB1c2luZyB0aGUgcHVibGljIGtleSBvZiB0aGUgcGFydHkgcnVubmluZyB0aGUKICogYXVjdGlvbiwgYW5kIG9mIGNvdXJzZSBhIGRlcG9zaXQgc3VmZmljaWVudCB0byBwYXkgZm9yIHRoZSBiaWQuCiAqCiAqIEF0IHRoZSBlbmQgb2YgdGhlIGJpZGRpbmcgcGVyaW9kLCB0aGUgcGFydHkgcnVubmluZyB0aGUgYXVjdGlvbiBzZXRzIGEgJ3N0cmlrZSBwcmljZScsCiAqIHRoZXJlYnkgc2lnbmFsaW5nIHRoZSBzdGFydCBvZiB0aGUgc2FsZSBwZXJpb2QuIER1cmluZyB0aGlzIHBlcmlvZCBhbGwgYmlkZGVycyBtdXN0CiAqIGV4ZWN1dGUgdGhlaXIgYmlkcy4gVG8gZXhlY3V0ZSBhIGJpZCBhIHVzZXIgcmV2ZWFscyB0aGVpciBiaWQtdHVwbGUuIEFsbCBiaWRzIHdpdGggYQogKiBwcmljZSBhdCBsZWFzdCBhcyBoaWdoIGFzIHRoZSBzdHJpa2UgcHJpY2UgYXJlIGZpbGxlZCwgYW5kIGFsbCBiaWRzIHVuZGVyIHRoZSBzdHJpa2UKICogcHJpY2UgYXJlIHJldHVybmVkLiBCaWRzIHRoYXQgYXJlIGV4YWN0bHkgZXF1YWwgdG8gdGhlIHN0cmlrZSBwcmljZSBhcmUgcGFydGlhbGx5IGZpbGxlZCwKICogc28gdGhhdCB0aGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIGdlbmVyYXRlZCBkb2VzIG5vdCBleGNlZWQgdGhlIHRvdGFsIHN1cHBseS4KICoKICogU3RyaWtlIFByaWNlOgogKiBUaGUgc3RyaWtlIHByaWNlIGlzIGNhbGN1bGF0ZWQgb2ZmY2hhaW4gYnkgdGhlIHBhcnR5IHJ1bm5pbmcgdGhlIGF1Y3Rpb24uIFdoZW4gZWFjaAogKiBzZWNyZXQgYmlkIGlzIHN1Ym1pdHRlZCBhbiBldmVudCBpcyBnZW5lcmF0ZWQsIHdoaWNoIGluY2x1ZGVzIHRoZSBzZW5kZXIgYWRkcmVzcywgaGFzaGVkCiAqIGJpZC10dXBsZSwgZW5jcnlwdGVkIGJpZC10dXBsZSBhbmQgZGVwb3NpdCBhbW91bnQuIHRoZSBwYXJ0eSBydW5uaW5nIHRoZSBhdWN0aW9uIGRlY3J5cHRzCiAqIHRoZSBlbmNyeXB0ZWQgYmlkLXR1cGxlLCBhbmQgcmVnZW5lcmF0ZXMgdGhlIGhhc2guIElmIHRoZSByZWdlbmVyYXRlZCBoYXNoIGRvZXMgbm90IG1hdGNoCiAqIHRoZSBoYXNoIHRoYXQgd2FzIHN1Ym1pdHRlZCB3aXRoIHRoZSBzZWNyZXQgYmlkLCBvciBpZiB0aGUgZGVzcG9zaXRlZCBmdW5kcyBhcmUgbm90CiAqIHN1ZmZpY2llbnQgdG8gY292ZXIgdGhlIGJpZCwgdGhlbiB0aGUgYmlkIGlzIGRpc3F1YWxpZmllZC4gKHByZXN1bWFibHkgZGlzcXVhbGlmeWluZwogKiBpbnZhbGlkIGJpZHMgd2lsbCBiZSBjaGVhcGVyIHRoYW4gdmFsaWRhdGluZyBhbGwgdGhlIHZhbGlkIGJpZHMpLgogKgogKiBUaGUgYXVjdGlvbiBpcyBzdHJ1Y3R1cmVkIHdpdGggYSBmaXhlZCBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMuIFNvIHRvIHJhaXNlIHRoZSBtYXhpbXVtCiAqIGZ1bmRzIHRoZSBiaWRzIGFyZSBzb3J0ZWQsIGhpZ2hlc3QgdG8gbG93ZXN0LiBTdGFydGluZyB0aGUgc3RyaWtlLXByaWNlIGF0IHRoZSBoaWdoZXN0CiAqIGJpZCwgaXQgaXMgcmVkdWNlZCwgYmlkIGJ5IGJpZCwgdG8gaW5jbHVkZSBtb3JlIGJpZHMuIFRoZSBxdWFudGl0eSBvZiB0b2tlbnMgc29sZCBpbmNyZWFzZXMKICogZWFjaCB0aW1lIGEgbmV3IGJpZCBpcyBpbmNsdWRlZDsgYnV0IHRoZSB0b2tlbiBwcmljZSBpcyByZWR1Y2VkLiBBdCBlYWNoIHN0ZXAgdGhlIHRvdGFsCiAqIHJhaXNlICh0b2tlbi1wcmljZSB0aW1lcyBxdWFudGl0eS1vZi10b2tlbnMtc29sZCkgaXMgY29tcHV0ZWQuIEFuZCB0aGUgcHJvY2VzcyBlbmRzCiAqIHdoZW5ldmVyIHRoZSB0b3RhbCByYWlzZSBkZWNyZWFzZXMsIG9yIHdoZW4gdGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgZXhjZWVkcyB0aGUgdG90YWwKICogc3VwcGx5LgogKgogKiBOb3RlczoKICogVGhlIGBzYWx0YCBpcyBpbmNsdWRlZCBpbiB0aGUgYmlkLXR1cGxlIHRvIGRpc2NvdXJhZ2UgYnJ1dGUtZm9yY2UgYXR0YWNrcyBvbiB0aGUgaW5wdXRzCiAqIHRvIHRoZSBzZWNyZXQgYmlkLgogKgogKiBBIHVzZXIgY2Fubm90IHN1Ym1pdCBtdWx0aXBsZSBiaWRzIGZyb20gdGhlIHNhbWUgRXRoZXIgYWNjb3VudC4KICoKICogVXNlcnMgYXJlIHJlcXVpcmVkIHRvIGV4ZWN1dGUgdGhlaXIgYmlkcy4gSWYgYSB1c2VyIGZhaWxzIHRvIGV4ZWN1dGUgdGhlaXIgYmlkIGJlZm9yZSB0aGUKICogZW5kIG9mIHRoZSBzYWxlIHBlcmlvZCwgdGhlbiB0aGV5IGZvcmZlaXQgaGFsZiBvZiB0aGVpciBkZXBvc2l0LCBhbmQgcmVjZWl2ZSBubyB0b2tlbnMuCiAqIFRoaXMgcnVsZSB3YXMgYWRvcHRlZCAoYXMgb3Bwb3NlZCB0byByZWZ1bmRpbmcgdW4tcmV2ZWFsZWQgYmlkcykgdG8gcHJldmVudCB1c2VycyBmcm9tIHBsYWNpbmcKICogc2V2ZXJhbCBiaWRzLCBhbmQgb25seSByZXZlYWxpbmcgb25lIG9mIHRoZW0uIFdpdGggdGhpcyBydWxlLCBhbGwgYmlkcyBtdXN0IGJlIGV4ZWN1dGVkLgogKgogKi8KCgovL2ltcG9ydCAnLi9pQnVybmFibGVUb2tlbi5zb2wnOwpwcmFnbWEgc29saWRpdHkgXjAuNC4xNTsKCi8vQnVybmFibGUgVG9rZW4gaW50ZXJmYWNlCgovL2ltcG9ydCAnLi9pRVJDMjBUb2tlbi5zb2wnOwpwcmFnbWEgc29saWRpdHkgXjAuNC4xNTsKCi8vIFRva2VuIHN0YW5kYXJkIEFQSQovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKCmNvbnRyYWN0IGlFUkMyMFRva2VuIHsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHN1cHBseSk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKCBhZGRyZXNzIHdobyApIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHZhbHVlKTsKICBmdW5jdGlvbiBhbGxvd2FuY2UoIGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlciApIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZyk7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKCBhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiBhcHByb3ZlKCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUgKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CgogIGV2ZW50IFRyYW5zZmVyKCBhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbCggYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCmNvbnRyYWN0IGlCdXJuYWJsZVRva2VuIGlzIGlFUkMyMFRva2VuIHsKICBmdW5jdGlvbiBidXJuVG9rZW5zKHVpbnQgX2J1cm5Db3VudCkgcHVibGljOwogIGZ1bmN0aW9uIHVuUGFpZEJ1cm5Ub2tlbnModWludCBfYnVybkNvdW50KSBwdWJsaWM7Cn0KCi8vaW1wb3J0ICcuL1NhZmVNYXRoLnNvbCc7CnByYWdtYSBzb2xpZGl0eSBeMC40LjExOwoKLyoKICAgIE92ZXJmbG93IHByb3RlY3RlZCBtYXRoIGZ1bmN0aW9ucwoqLwpjb250cmFjdCBTYWZlTWF0aCB7CiAgICAvKioKICAgICAgICBjb25zdHJ1Y3RvcgogICAgKi8KICAgIGZ1bmN0aW9uIFNhZmVNYXRoKCkgcHVibGljIHsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IHJldHVybnMgdGhlIHN1bSBvZiBfeCBhbmQgX3ksIGFzc2VydHMgaWYgdGhlIGNhbGN1bGF0aW9uIG92ZXJmbG93cwoKICAgICAgICBAcGFyYW0gX3ggICB2YWx1ZSAxCiAgICAgICAgQHBhcmFtIF95ICAgdmFsdWUgMgoKICAgICAgICBAcmV0dXJuIHN1bQogICAgKi8KICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludDI1NiBfeCwgdWludDI1NiBfeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0gX3ggKyBfeTsKICAgICAgICBhc3NlcnQoeiA+PSBfeCk7CiAgICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgLyoqCiAgICAgICAgQGRldiByZXR1cm5zIHRoZSBkaWZmZXJlbmNlIG9mIF94IG1pbnVzIF95LCBhc3NlcnRzIGlmIHRoZSBzdWJ0cmFjdGlvbiByZXN1bHRzIGluIGEgbmVnYXRpdmUgbnVtYmVyCgogICAgICAgIEBwYXJhbSBfeCAgIG1pbnVlbmQKICAgICAgICBAcGFyYW0gX3kgICBzdWJ0cmFoZW5kCgogICAgICAgIEByZXR1cm4gZGlmZmVyZW5jZQogICAgKi8KICAgIGZ1bmN0aW9uIHNhZmVTdWIodWludDI1NiBfeCwgdWludDI1NiBfeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KF94ID49IF95KTsKICAgICAgICByZXR1cm4gX3ggLSBfeTsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IHJldHVybnMgdGhlIHByb2R1Y3Qgb2YgbXVsdGlwbHlpbmcgX3ggYnkgX3ksIGFzc2VydHMgaWYgdGhlIGNhbGN1bGF0aW9uIG92ZXJmbG93cwoKICAgICAgICBAcGFyYW0gX3ggICBmYWN0b3IgMQogICAgICAgIEBwYXJhbSBfeSAgIGZhY3RvciAyCgogICAgICAgIEByZXR1cm4gcHJvZHVjdAogICAgKi8KICAgIGZ1bmN0aW9uIHNhZmVNdWwodWludDI1NiBfeCwgdWludDI1NiBfeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0gX3ggKiBfeTsKICAgICAgICBhc3NlcnQoX3ggPT0gMCB8fCB6IC8gX3ggPT0gX3kpOwogICAgICAgIHJldHVybiB6OwogICAgfQp9CgoKY29udHJhY3QgVG9rZW5BdWN0aW9uIGlzIFNhZmVNYXRoIHsKCiAgc3RydWN0IFNlY3JldEJpZCB7CiAgICBib29sIGRpc3F1YWxpZmllZDsgICAgIC8vIGZsYWcgc2V0IGlmIGhhc2ggZG9lcyBub3QgbWF0Y2ggZW5jcnlwdGVkIGJpZAogICAgdWludCBkZXBvc2l0OyAgICAgICAgICAvLyBmdW5kcyBkZXBvc2l0ZWQgYnkgYmlkZGVyCiAgICB1aW50IHJlZnVuZDsgICAgICAgICAgIC8vIGZ1bmRzIHRvIGJlIHJldHVybmVkIHRvIGJpZGRlcgogICAgdWludCB0b2tlbnM7ICAgICAgICAgICAvLyBzdHJ1Y3R1cmUgaGFzIGJlZW4gYWxsb2NhdGVkCiAgICBieXRlczMyIGhhc2g7ICAgICAgICAgIC8vIGhhc2ggb2YgcHJpY2UsIHF1YW50aXR5LCBzZWNyZXQKICB9CiAgdWludCBjb25zdGFudCAgQVVDVElPTl9TVEFSVF9FVkVOVCA9IDB4MDE7CiAgdWludCBjb25zdGFudCAgQVVDVElPTl9FTkRfRVZFTlQgICA9IDB4MDI7CiAgdWludCBjb25zdGFudCAgU0FMRV9TVEFSVF9FVkVOVCAgICA9IDB4MDQ7CiAgdWludCBjb25zdGFudCAgU0FMRV9FTkRfRVZFTlQgICAgICA9IDB4MDg7CgogIGV2ZW50IFNlY3JldEJpZEV2ZW50KHVpbnQgaW5kZXhlZCBiYXRjaCwgYWRkcmVzcyBpbmRleGVkIGJpZGRlciwgdWludCBkZXBvc2l0LCBieXRlczMyIGhhc2gsIGJ5dGVzIG1lc3NhZ2UpOwogIGV2ZW50IEV4ZWN1dGVFdmVudCh1aW50IGluZGV4ZWQgYmF0Y2gsIGFkZHJlc3MgaW5kZXhlZCBiaWRkZXIsIHVpbnQgY29zdCwgdWludCByZWZ1bmQpOwogIGV2ZW50IEV4cGlyZUV2ZW50KHVpbnQgaW5kZXhlZCBiYXRjaCwgYWRkcmVzcyBpbmRleGVkIGJpZGRlciwgdWludCBjb3N0LCB1aW50IHJlZnVuZCk7CiAgZXZlbnQgQml6YXJyZUV2ZW50KGFkZHJlc3MgaW5kZXhlZCBhZGRyLCBzdHJpbmcgbWVzc2FnZSwgdWludCB2YWwpOwogIGV2ZW50IEJpZERpc3F1YWxpZmllZEV2ZW50KGFkZHJlc3MgaW5kZXhlZCBiaWRkZXIsIGJ5dGVzMzIgaGFzaCk7CiAgZXZlbnQgU3RhdGVDaGFuZ2VFdmVudCh1aW50IG1hc2spOwogIC8vCiAgLy9ldmVudCBNZXNzYWdlRXZlbnQoc3RyaW5nIG1lc3NhZ2UpOwogIC8vZXZlbnQgTWVzc2FnZVVpbnRFdmVudChzdHJpbmcgbWVzc2FnZSwgdWludCB2YWwpOwogIC8vZXZlbnQgTWVzc2FnZUFkZHJFdmVudChzdHJpbmcgbWVzc2FnZSwgYWRkcmVzcyB2YWwpOwogIC8vZXZlbnQgTWVzc2FnZUJ5dGVzMzJFdmVudChzdHJpbmcgbWVzc2FnZSwgYnl0ZXMzMiB2YWwpOwoKICBib29sIHB1YmxpYyBpc0xvY2tlZDsKICB1aW50IHB1YmxpYyBzdGF0ZU1hc2s7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgYWRkcmVzcyBwdWJsaWMgZGV2ZWxvcGVyczsKICBhZGRyZXNzIHB1YmxpYyB1bmRlcndyaXRlcjsKICBpQnVybmFibGVUb2tlbiBwdWJsaWMgdG9rZW47CiAgdWludCBwdWJsaWMgcHJvY2VlZHM7CiAgdWludCBwdWJsaWMgc3RyaWtlUHJpY2U7CiAgdWludCBwdWJsaWMgc3RyaWtlUHJpY2VQY3RYMTA7CiAgdWludCBwdWJsaWMgZGVjaW1hbE11bHRpcGxpZXI7CiAgdWludCBwdWJsaWMgZGV2ZWxvcGVyUmVzZXJ2ZTsKICB1aW50IHB1YmxpYyBkZXZlbG9wZXJQY3RYMTBLOwogIHVpbnQgcHVibGljIHB1cmNoYXNlZENvdW50OwogIHVpbnQgcHVibGljIHNlY3JldEJpZENvdW50OwogIHVpbnQgcHVibGljIGV4ZWN1dGVkQ291bnQ7CiAgdWludCBwdWJsaWMgZXhwaXJlZENvdW50OwogIHVpbnQgcHVibGljIHNhbGVEdXJhdGlvbjsKICB1aW50IHB1YmxpYyBhdWN0aW9uU3RhcnQ7CiAgdWludCBwdWJsaWMgYXVjdGlvbkVuZDsKICB1aW50IHB1YmxpYyBzYWxlRW5kOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gU2VjcmV0QmlkKSBwdWJsaWMgc2VjcmV0QmlkczsKCiAgLy8KICAvL3R1bmFibGVzCiAgdWludCBiYXRjaFNpemUgPSA0OwogIHVpbnQgY29udHJhY3RTZW5kR2FzID0gMTAwMDAwOwoKICBtb2RpZmllciBvd25lck9ubHkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBtb2RpZmllciB1bmxvY2tlZE9ubHkgewogICAgcmVxdWlyZSghaXNMb2NrZWQpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIGR1cmluZ0F1Y3Rpb24gewogICAgcmVxdWlyZSgoc3RhdGVNYXNrICYgKEFVQ1RJT05fU1RBUlRfRVZFTlQgfCBBVUNUSU9OX0VORF9FVkVOVCkpID09IEFVQ1RJT05fU1RBUlRfRVZFTlQpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIGFmdGVyQXVjdGlvbiB7CiAgICByZXF1aXJlKChzdGF0ZU1hc2sgJiBBVUNUSU9OX0VORF9FVkVOVCkgIT0gMCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgZHVyaW5nU2FsZSB7CiAgICByZXF1aXJlKChzdGF0ZU1hc2sgJiAoU0FMRV9TVEFSVF9FVkVOVCB8IFNBTEVfRU5EX0VWRU5UKSkgPT0gU0FMRV9TVEFSVF9FVkVOVCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgYWZ0ZXJTYWxlIHsKICAgIHJlcXVpcmUoKHN0YXRlTWFzayAmIFNBTEVfRU5EX0VWRU5UKSAhPSAwKTsKICAgIF87CiAgfQoKCiAgLy8KICAvL2NvbnN0cnVjdG9yCiAgLy8KICBmdW5jdGlvbiBUb2tlbkF1Y3Rpb24oKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgZnVuY3Rpb24gbG9jaygpIHB1YmxpYyBvd25lck9ubHkgewogICAgaXNMb2NrZWQgPSB0cnVlOwogIH0KCiAgZnVuY3Rpb24gc2V0VG9rZW4oaUJ1cm5hYmxlVG9rZW4gX3Rva2VuLCB1aW50IF9kZWNpbWFsTXVsdGlwbGllciwgYWRkcmVzcyBfdW5kZXJ3cml0ZXIpIHB1YmxpYyBvd25lck9ubHkgdW5sb2NrZWRPbmx5IHsKICAgIHRva2VuID0gX3Rva2VuOwogICAgZGVjaW1hbE11bHRpcGxpZXIgPSBfZGVjaW1hbE11bHRpcGxpZXI7CiAgICB1bmRlcndyaXRlciA9IF91bmRlcndyaXRlcjsKICB9CgogIGZ1bmN0aW9uIHNldEF1Y3Rpb25QYXJtcyh1aW50IF9hdWN0aW9uU3RhcnQsIHVpbnQgX2F1Y3Rpb25EdXJhdGlvbiwgdWludCBfc2FsZUR1cmF0aW9uKSBwdWJsaWMgb3duZXJPbmx5IHVubG9ja2VkT25seSB7CiAgICBhdWN0aW9uU3RhcnQgPSBfYXVjdGlvblN0YXJ0OwogICAgYXVjdGlvbkVuZCA9IHNhZmVBZGQoX2F1Y3Rpb25TdGFydCwgX2F1Y3Rpb25EdXJhdGlvbik7CiAgICBzYWxlRHVyYXRpb24gPSBfc2FsZUR1cmF0aW9uOwogICAgaWYgKHN0YXRlTWFzayAhPSAwKSB7CiAgICAgIC8vaGFuZHkgZm9yIGRlYnVnCiAgICAgIHN0YXRlTWFzayA9IDA7CiAgICAgIHN0cmlrZVByaWNlID0gMDsKICAgICAgZXhlY3V0ZWRDb3VudCA9IDA7CiAgICAgIGhvdXNlS2VlcCgpOwogICAgfQogIH0KCgogIGZ1bmN0aW9uIHJlc2VydmVEZXZlbG9wZXJUb2tlbnMoYWRkcmVzcyBfZGV2ZWxvcGVycywgdWludCBfZGV2ZWxvcGVyUGN0WDEwSykgcHVibGljIG93bmVyT25seSB1bmxvY2tlZE9ubHkgewogICAgcmVxdWlyZShkZXZlbG9wZXJQY3RYMTBLIDwgMTAwMDAwMCk7CiAgICBkZXZlbG9wZXJzID0gX2RldmVsb3BlcnM7CiAgICBkZXZlbG9wZXJQY3RYMTBLID0gX2RldmVsb3BlclBjdFgxMEs7CiAgICB1aW50IF90b2tlbkNvdW50ID0gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgZGV2ZWxvcGVyUmVzZXJ2ZSA9IHNhZmVNdWwoX3Rva2VuQ291bnQsIGRldmVsb3BlclBjdFgxMEspIC8gMTAwMDAwMDsKICB9CgogIGZ1bmN0aW9uIHR1bmUodWludCBfYmF0Y2hTaXplLCB1aW50IF9jb250cmFjdFNlbmRHYXMpIHB1YmxpYyBvd25lck9ubHkgewogICAgYmF0Y2hTaXplID0gX2JhdGNoU2l6ZTsKICAgIGNvbnRyYWN0U2VuZEdhcyA9IF9jb250cmFjdFNlbmRHYXM7CiAgfQoKCiAgLy8KICAvL2NhbGxlZCBieSBvd25lciAob3IgYW55IG90aGVyIGNvbmNlcm5lZCBwYXJ0eSkgdG8gZ2VuZXJhdGUgYSBTYXRhdGVDaGFuZ2VFdmVudAogIC8vCiAgZnVuY3Rpb24gaG91c2VLZWVwKCkgcHVibGljIHsKICAgIHVpbnQgX29sZE1hc2sgPSBzdGF0ZU1hc2s7CiAgICBpZiAobm93ID49IGF1Y3Rpb25TdGFydCkgewogICAgICBzdGF0ZU1hc2sgfD0gQVVDVElPTl9TVEFSVF9FVkVOVDsKICAgICAgaWYgKG5vdyA+PSBhdWN0aW9uRW5kKSB7CiAgICAgICAgc3RhdGVNYXNrIHw9IEFVQ1RJT05fRU5EX0VWRU5UOwogICAgICAgIGlmIChzdHJpa2VQcmljZSA+IDApIHsKICAgICAgICAgIHN0YXRlTWFzayB8PSBTQUxFX1NUQVJUX0VWRU5UOwogICAgICAgICAgaWYgKG5vdyA+PSBzYWxlRW5kKQogICAgICAgICAgICBzdGF0ZU1hc2sgfD0gU0FMRV9FTkRfRVZFTlQ7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoc3RhdGVNYXNrICE9IF9vbGRNYXNrKQogICAgICBTdGF0ZUNoYW5nZUV2ZW50KHN0YXRlTWFzayk7CiAgfQoKCgogIC8vCiAgLy8gc2V0dGluZyB0aGUgc3RyaWtlIHByaWNlIHN0YXJ0cyB0aGUgc2FsZSBwZXJpb2QsIGR1cmluZyB3aGljaCBiaWRkZXJzIG11c3QgY2FsbCBleGVjdXRlQmlkLgogIC8vIHRoZSBzdHJpa2UgcHJpY2Ugc2hvdWxkIG9ubHkgYmUgc2V0IG9uY2UuLi4uIGF0IGFueSByYXRlIGl0IGNhbm5vdCBiZSBjaGFuZ2VkIG9uY2UgYW55b25lIGhhcyBleGVjdXRlZCBhIGJpZC4KICAvLyBzdHJpa2VQcmljZVBjdFgxMCBzcGVjaWZpZXMgd2hhdCBwZXJjZW50YWdlICh4MTApIG9mIHJlcXVlc3RlZCB0b2tlbnMgc2hvdWxkIGJlIGF3YXJkZWQgdG8gZWFjaCBiaWRkZXIgdGhhdAogIC8vIGJpZCBleGFjdGx5IGVxdWFsIHRvIHRoZSBzdHJpa2UgcHJpY2UuCiAgLy8KICAvLyBub3RlOiBzdHJpa2VQcmljZSBpcyB0aGUgcHJpY2Ugb2Ygd2hvbGUgdG9rZW5zIChpbiB3ZWkpCiAgLy8KICBmdW5jdGlvbiBzZXRTdHJpa2VQcmljZSh1aW50IF9zdHJpa2VQcmljZSwgdWludCBfc3RyaWtlUHJpY2VQY3RYMTApIHB1YmxpYyBvd25lck9ubHkgYWZ0ZXJBdWN0aW9uIHsKICAgIHJlcXVpcmUoZXhlY3V0ZWRDb3VudCA9PSAwKTsKICAgIHN0cmlrZVByaWNlID0gX3N0cmlrZVByaWNlOwogICAgc3RyaWtlUHJpY2VQY3RYMTAgPSBfc3RyaWtlUHJpY2VQY3RYMTA7CiAgICBzYWxlRW5kID0gc2FmZUFkZChub3csIHNhbGVEdXJhdGlvbik7CiAgICBob3VzZUtlZXAoKTsKICB9CgoKICAvLwogIC8vIG5vYm9keSBzaG91bGQgYmUgc2VuZGluZyBmdW5kcyB2aWEgdGhpcyBmdW5jdGlvbi4uLi4gYml6YXJyZS4uLgogIC8vIHRoZSBmYWN0IHRoYXQgd2UgYWRqdXN0IHByb2NlZWRzIGhlcmUgbWVhbnMgdGhhdCB0aGlzIGZjbiB3aWxsIE9PRyBpZiBjYWxsZWQgd2l0aCBhIHNlbmQgb3IgdHJhbnNmZXIuIHRoYXQncwogIC8vIHByb2JhYmx5IGdvb2QsIGN1eiBpdCBwcmV2ZW50cyB0aGUgY2FsbGVyIGZyb20gbG9zaW5nIHRoZWlyIGZ1bmRzLgogIC8vCiAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgcHJvY2VlZHMgPSBzYWZlQWRkKHByb2NlZWRzLCBtc2cudmFsdWUpOwogICAgQml6YXJyZUV2ZW50KG1zZy5zZW5kZXIsICJiaXphcnJlIHBheW1lbnQiLCBtc2cudmFsdWUpOwogIH0KCgogIGZ1bmN0aW9uIGRlcG9zaXRTZWNyZXRCaWQoYnl0ZXMzMiBfaGFzaCwgYnl0ZXMgX21lc3NhZ2UpIHB1YmxpYyBkdXJpbmdBdWN0aW9uIHBheWFibGUgewogICAgLy9lYWNoIGFkZHJlc3MgY2FuIG9ubHkgc3VibWl0IG9uZSBiaWQgLS0gYW5kIG9uY2UgYSBiaWQgaXMgc3VibWl0dGVkIGl0IGlzIGltdXRhYmxlCiAgICAvL2ZvciB0ZXN0aW5nLCBhbiBleGNlcHRpb24gaXMgbWFkZSBmb3IgdGhlIG93bmVyIC0tIGJ1dCBvbmx5IHdoaWxlIHRoZSBjb250cmFjdCBpcyB1bmxvY2tlZAogICAgaWYgKCEobXNnLnNlbmRlciA9PSBvd25lciAmJiAhaXNMb2NrZWQpICYmCiAgICAgICAgIChfaGFzaCA9PSAwIHx8IHNlY3JldEJpZHNbbXNnLnNlbmRlcl0uaGFzaCAhPSAwKSApCiAgICAgICAgcmV2ZXJ0KCk7CiAgICBzZWNyZXRCaWRzW21zZy5zZW5kZXJdLmhhc2ggPSBfaGFzaDsKICAgIHNlY3JldEJpZHNbbXNnLnNlbmRlcl0uZGVwb3NpdCA9IG1zZy52YWx1ZTsKICAgIHNlY3JldEJpZHNbbXNnLnNlbmRlcl0uZGlzcXVhbGlmaWVkID0gZmFsc2U7CiAgICBzZWNyZXRCaWRDb3VudCArPSAxOwogICAgdWludCBfYmF0Y2ggPSBzZWNyZXRCaWRDb3VudCAvIGJhdGNoU2l6ZTsKICAgIFNlY3JldEJpZEV2ZW50KF9iYXRjaCwgbXNnLnNlbmRlciwgbXNnLnZhbHVlLCBfaGFzaCwgX21lc3NhZ2UpOwogIH0KCgogIC8vCiAgLy8gdGhlIG93bmVyIG1heSBkaXNxdWFsaWZ5IGEgYmlkIGlmIGl0IGlzIGJvZ3VzLiBmb3IgZXhhbXBsZSBpZiB0aGUgaGFzaCBkb2VzIG5vdCBjb3JyZXNwb25kCiAgLy8gdG8gdGhlIGhhc2ggdGhhdCBpcyBnZW5lcmF0ZWQgZnJvbSB0aGUgZW5jeXJwdGVkIGJpZCB0dXBsZS4gd2hlbiBhIGRpc3F1YWxpZmllZCBiaWQgaXMKICAvLyBleGVjdXRlZCBhbGwgdGhlIGRlcG9zaXRlZCBmdW5kcyB3aWxsIGJlIHJldHVybmVkIHRvIHRoZSBiaWRkZXIsIGFzIGlmIHRoZSBiaWQgd2FzIGJlbG93CiAgLy8gdGhlIHN0cmlrZS1wcmljZS4KICAvLwogIGZ1bmN0aW9uIGRpc3F1YWxpZnlCaWQoYWRkcmVzcyBfZnJvbSwgYm9vbCBfZG9SZWZ1bmQpIHB1YmxpYyBvd25lck9ubHkgZHVyaW5nQXVjdGlvbiB7CiAgICBzZWNyZXRCaWRzW19mcm9tXS5kaXNxdWFsaWZpZWQgPSB0cnVlOwogICAgQmlkRGlzcXVhbGlmaWVkRXZlbnQoX2Zyb20sIHNlY3JldEJpZHNbX2Zyb21dLmhhc2gpOwogICAgaWYgKF9kb1JlZnVuZCA9PSB0cnVlKSB7CiAgICAgIHVpbnQgX2Ftb3VudCA9IHNlY3JldEJpZHNbX2Zyb21dLmRlcG9zaXQ7CiAgICAgIHNlY3JldEJpZHNbX2Zyb21dLmhhc2ggPSBieXRlczMyKDApOwogICAgICBzZWNyZXRCaWRzW19mcm9tXS5kZXBvc2l0ID0gMDsKICAgICAgc2VjcmV0QmlkQ291bnQgPSBzYWZlU3ViKHNlY3JldEJpZENvdW50LCAxKTsKICAgICAgaWYgKF9hbW91bnQgPiAwKQogICAgICAgIF9mcm9tLnRyYW5zZmVyKF9hbW91bnQpOwogICAgfQogIH0KCgogIC8vCiAgLy8gZXhlY3V0ZSBhIGJpZC4KICAvLyAqIHB1cmNoYXNlcyB0b2tlbnMgaWYgdGhlIHNwZWNpZmllZCBwcmljZSBpcyBhYm92ZSB0aGUgc3RyaWtlIHByaWNlCiAgLy8gKiByZWZ1bmRzIHdoYXRldmVyIHJlbWFpbnMgb2YgdGhlIGRlcG9zaXQKICAvLwogIC8vIGNhbGwgb25seSBkdXJpbmcgdGhlIHNhbGUgcGVyaW9kIChzdHJpa2VQcmljZSA+IDApCiAgLy8gbm90ZTogX3F1YW50aXR5IGlzIHRoZSBudW1iZXIgb2Ygd2hvbGUgdG9rZW5zOyB0aGF0IGlzIGxvdy1sZXZlbC10b2tlbnMgKiBkZWNpbWFsTXVsdGlwbGllcgogIC8vIHNpbWlsYXJseSBfcHJpY2UgaXMgdGhlIHByaWNlIG9mIHdob2xlIHRva2VuczsgdGhhdCBpcyBsb3ctbGV2ZWwtdG9rZW4gcHJpY2UgLyBkZWNpbWFsTXVsdGlwbGllcgogIC8vCiAgZnVuY3Rpb24gZXhlY3V0ZUJpZCh1aW50MjU2IF9zZWNyZXQsIHVpbnQyNTYgX3ByaWNlLCB1aW50MjU2IF9xdWFudGl0eSkgcHVibGljIGR1cmluZ1NhbGUgewogICAgZXhlY3V0ZUJpZEZvcihtc2cuc2VuZGVyLCBfc2VjcmV0LCBfcHJpY2UsIF9xdWFudGl0eSk7CiAgfQogIGZ1bmN0aW9uIGV4ZWN1dGVCaWRGb3IoYWRkcmVzcyBfYWRkciwgdWludDI1NiBfc2VjcmV0LCB1aW50MjU2IF9wcmljZSwgdWludDI1NiBfcXVhbnRpdHkpIHB1YmxpYyBkdXJpbmdTYWxlIHsKICAgIGJ5dGVzMzIgY29tcHV0ZWRIYXNoID0ga2VjY2FrMjU2KF9zZWNyZXQsIF9wcmljZSwgX3F1YW50aXR5KTsKICAgIC8vTWVzc2FnZUJ5dGVzMzJFdmVudCgiY29tcHV0ZWRIYXNoIiwgY29tcHV0ZWRIYXNoKTsKICAgIHJlcXVpcmUoc2VjcmV0Qmlkc1tfYWRkcl0uaGFzaCA9PSBjb21wdXRlZEhhc2gpOwogICAgLy8KICAgIGlmIChzZWNyZXRCaWRzW19hZGRyXS5kZXBvc2l0ID4gMCkgewogICAgICB1aW50IF9jb3N0ID0gMDsKICAgICAgdWludCBfcmVmdW5kID0gMDsKICAgICAgdWludCBfcHJpY2VXZWkgPSBzYWZlTXVsKF9wcmljZSwgMSBzemFibyk7CiAgICAgIGlmIChfcHJpY2VXZWkgPj0gc3RyaWtlUHJpY2UgJiYgIXNlY3JldEJpZHNbX2FkZHJdLmRpc3F1YWxpZmllZCkgewogICAgICAgICAvL3VwIHRpbGwgbm93IGFsbCBwcmljZXMgYW5kIHF1YW50aXRpZXMgYW5kIHJlZmVycmVkIHRvIHdob2xlIHRva2VucyAoaW5jbHVkaW5nIHN0cmlrZSBwcmljZSk7IG5vdyB0aGF0IHdlIGFyZSBhYm91dAogICAgICAgICAvL3RvIGFjdHVhbGx5IGRvIHRoZSB0cmFuc2ZlciwgY29udmVydCB0byBsb3ctbGV2ZWwgdG9rZW5zCiAgICAgICAgIHVpbnQgX2xvd0xldmVsUXVhbnRpdHkgPSBzYWZlTXVsKF9xdWFudGl0eSwgZGVjaW1hbE11bHRpcGxpZXIpOwogICAgICAgICB1aW50IF9sb3dMZXZlbFByaWNlID0gc3RyaWtlUHJpY2UgLyBkZWNpbWFsTXVsdGlwbGllcjsKICAgICAgICAgdWludDI1NiBfcHVyY2hhc2VDb3VudCA9IChfcHJpY2VXZWkgPiBzdHJpa2VQcmljZSkgPyBfbG93TGV2ZWxRdWFudGl0eSA6IChzYWZlTXVsKHN0cmlrZVByaWNlUGN0WDEwLCBfbG93TGV2ZWxRdWFudGl0eSkgLyAxMDAwKTsKICAgICAgICAgdmFyIF9tYXhQdXJjaGFzZSA9IHNhZmVTdWIodG9rZW4uYmFsYW5jZU9mKHRoaXMpLCBkZXZlbG9wZXJSZXNlcnZlKTsKICAgICAgICAgaWYgKF9wdXJjaGFzZUNvdW50ID4gX21heFB1cmNoYXNlKQogICAgICAgICAgIF9wdXJjaGFzZUNvdW50ID0gX21heFB1cmNoYXNlOwogICAgICAgICBfY29zdCA9IHNhZmVNdWwoX3B1cmNoYXNlQ291bnQsIF9sb3dMZXZlbFByaWNlKTsKICAgICAgICAgaWYgKHNlY3JldEJpZHNbX2FkZHJdLmRlcG9zaXQgPj0gX2Nvc3QpIHsKICAgICAgICAgICBzZWNyZXRCaWRzW19hZGRyXS5kZXBvc2l0IC09IF9jb3N0OwogICAgICAgICAgIHByb2NlZWRzID0gc2FmZUFkZChwcm9jZWVkcywgX2Nvc3QpOwogICAgICAgICAgIHNlY3JldEJpZHNbX2FkZHJdLnRva2VucyArPSBfcHVyY2hhc2VDb3VudDsKICAgICAgICAgICBwdXJjaGFzZWRDb3VudCArPSBfcHVyY2hhc2VDb3VudDsKICAgICAgICAgICAvL3RyYW5zZmVyIHRva2VucyB0byB0aGlzIGJpZGRlcgogICAgICAgICAgIGlmICghdG9rZW4udHJhbnNmZXIoX2FkZHIsIF9wdXJjaGFzZUNvdW50KSkKICAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgICB9CiAgICAgIH0KICAgICAgLy9yZWZ1bmQgd2hhdGV2ZXIgcmVtYWlucwogICAgICAvL3VzZSBwdWxsIGhlcmUsIHRvIHByZXZlbnQgYW55IGJpZGRlciBmcm9tIHJldmVydGluZyB0aGVpciBwdXJjaGFzZQogICAgICBpZiAoc2VjcmV0Qmlkc1tfYWRkcl0uZGVwb3NpdCA+IDApIHsKICAgICAgICBfcmVmdW5kID0gc2VjcmV0Qmlkc1tfYWRkcl0uZGVwb3NpdDsKICAgICAgICBzZWNyZXRCaWRzW19hZGRyXS5yZWZ1bmQgKz0gX3JlZnVuZDsKICAgICAgICBzZWNyZXRCaWRzW19hZGRyXS5kZXBvc2l0ID0gMDsKICAgICAgfQogICAgICBleGVjdXRlZENvdW50ICs9IDE7CiAgICAgIHVpbnQgX2JhdGNoID0gZXhlY3V0ZWRDb3VudCAvIGJhdGNoU2l6ZTsKICAgICAgRXhlY3V0ZUV2ZW50KF9iYXRjaCwgX2FkZHIsIF9jb3N0LCBfcmVmdW5kKTsKICAgIH0KICB9CgoKICAvLwogIC8vIGV4cGlyZUJpZAogIC8vIGlmIGEgYmlkIGlzIG5vdCBleGVjdXRlZCBkdXJpbmcgdGhlIHNhbGUgcGVyaW9kLCB0aGVuIHRoZSBvd25lciBjYW4gbWFyayB0aGUgYmlkIGFzIGV4cGlyZWQuIGluIHRoaXMgY2FzZToKICAvLyAqIHRoZSBiaWRkZXIgZ2V0cyBhIHJlZnVuZCBvZiBoYWxmIG9mIGhpcyBkZXBvc2l0CiAgLy8gKiB0aGUgYmlkZGVyIGZvcmZlaXRzIHRoZSBvdGhlciBoYWxmIG9mIGhpcyBkZXBvc2l0CiAgLy8gKiB0aGUgYmlkZGVyIGRvZXMgbm90IHJlY2VpdmUgYW4gdG9rZW5zCiAgLy8KICBmdW5jdGlvbiBleHBpcmVCaWQoYWRkcmVzcyBfYWRkcikgcHVibGljIG93bmVyT25seSBhZnRlclNhbGUgewogICAgaWYgKHNlY3JldEJpZHNbX2FkZHJdLmRlcG9zaXQgPiAwKSB7CiAgICAgIHVpbnQgX2ZvcmZlaXQgPSBzZWNyZXRCaWRzW19hZGRyXS5kZXBvc2l0IC8gMjsKICAgICAgcHJvY2VlZHMgPSBzYWZlQWRkKHByb2NlZWRzLCBfZm9yZmVpdCk7CiAgICAgIC8vcmVmdW5kIHdoYXRldmVyIHJlbWFpbnMKICAgICAgdWludCBfcmVmdW5kID0gc2FmZVN1YihzZWNyZXRCaWRzW19hZGRyXS5kZXBvc2l0LCBfZm9yZmVpdCk7CiAgICAgIC8vdXNlIHB1bGwgaGVyZSwgdG8gcHJldmVudCBhbnkgYmlkZGVyIGZyb20gcmV2ZXJ0aW5nIHRoZSBleHBpcmUKICAgICAgc2VjcmV0Qmlkc1ttc2cuc2VuZGVyXS5yZWZ1bmQgKz0gX3JlZnVuZDsKICAgICAgc2VjcmV0Qmlkc1tfYWRkcl0uZGVwb3NpdCA9IDA7CiAgICAgIGV4cGlyZWRDb3VudCArPSAxOwogICAgICB1aW50IF9iYXRjaCA9IGV4cGlyZWRDb3VudCAvIGJhdGNoU2l6ZTsKICAgICAgRXhwaXJlRXZlbnQoX2JhdGNoLCBfYWRkciwgX2ZvcmZlaXQsIF9yZWZ1bmQpOwogICAgfQogIH0KCgogIC8vCiAgLy8gYmlkZGVyIHdpdGhkcmF3IGV4Y2VzcyBmdW5kcyAob3IgYWxsIGZ1bmRzIGlmIGJpZCB3YXMgdG9vIGxvdykKICAvLwogIGZ1bmN0aW9uIHdpdGhkcmF3UmVmdW5kKCkgcHVibGljIHsKICAgIHVpbnQgX2Ftb3VudCA9IHNlY3JldEJpZHNbbXNnLnNlbmRlcl0ucmVmdW5kOwogICAgc2VjcmV0Qmlkc1ttc2cuc2VuZGVyXS5yZWZ1bmQgPSAwOwogICAgbXNnLnNlbmRlci50cmFuc2ZlcihfYW1vdW50KTsKICB9CgoKICAvLwogIC8vIGdyYW50IGRldmVsb3BlciB0b2tlbnMsIGVxdWFsIHRvIGEgcGVyY2VudGFnZSBvZiBwdXJjaGFzZWQgdG9rZW5zLgogIC8vIG9uY2UgY2FsbGVkLCBhbnkgcmVtYWluaW5nIHRva2VucyB3aWxsIGJlIGJ1cm5lZC4KICAvLwogIGZ1bmN0aW9uIGRvRGV2ZWxvcGVyR3JhbnQoKSBwdWJsaWMgYWZ0ZXJTYWxlIHsKICAgIHVpbnQgX3F1YW50aXR5ID0gc2FmZU11bChwdXJjaGFzZWRDb3VudCwgZGV2ZWxvcGVyUGN0WDEwSykgLyAxMDAwMDAwOwogICAgdWludCBfdG9rZW5zTGVmdCA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgIGlmIChfcXVhbnRpdHkgPiBfdG9rZW5zTGVmdCkKICAgICAgX3F1YW50aXR5ID0gX3Rva2Vuc0xlZnQ7CiAgICBpZiAoX3F1YW50aXR5ID4gMCkgewogICAgICAvL3RyYW5zZmVyIHBjdCB0b2tlbnMgdG8gZGV2ZWxvcGVycwogICAgICBfdG9rZW5zTGVmdCAtPSBfcXVhbnRpdHk7CiAgICAgIGlmICghdG9rZW4udHJhbnNmZXIoZGV2ZWxvcGVycywgX3F1YW50aXR5KSkKICAgICAgICByZXZlcnQoKTsKICAgIH0KICAgIC8vYW5kIGJ1cm4gZXZlcnRoaW5nIHRoYXQgcmVtYWlucwogICAgdG9rZW4udW5QYWlkQnVyblRva2VucyhfdG9rZW5zTGVmdCk7CiAgfQoKCiAgLy8KICAvLyBwYXkgYXVjdGlvbiBwcm9jZWVkcyB0byB0aGUgdW5kZXJ3cml0ZXIKICAvLyBtYXkgYmUgY2FsbGVkIGJ5IHVuZGVyd3JpdGVyIG9yIG93bmVyIChmYm8gdW5kZXJ3cml0ZXIpCiAgLy8KICBmdW5jdGlvbiBwYXlVbmRlcndyaXRlcigpIHB1YmxpYyB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSB1bmRlcndyaXRlcik7CiAgICB1aW50IF9hbW91bnQgPSBwcm9jZWVkczsKICAgIHByb2NlZWRzID0gMDsKICAgIGlmICghdW5kZXJ3cml0ZXIuY2FsbC5nYXMoY29udHJhY3RTZW5kR2FzKS52YWx1ZShfYW1vdW50KSgpKQogICAgICByZXZlcnQoKTsKICB9CgoKICAvL2ZvciBkZWJ1ZwogIC8vb25seSBhdmFpbGFibGUgYmVmb3JlIHRoZSBjb250cmFjdCBpcyBsb2NrZWQKICBmdW5jdGlvbiBoYXJhS2lyaSgpIHB1YmxpYyBvd25lck9ubHkgdW5sb2NrZWRPbmx5IHsKICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgfQp9'.
	

]
