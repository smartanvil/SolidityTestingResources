Class {
	#name : #SRT4d69a676983b3873ba04aa5bac89aa1824f09302,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4d69a676983b3873ba04aa5bac89aa1824f09302 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIGVtaXQgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIHVpbnQyNTYgdG90YWxTdXBwbHlfOwoKICAvKioKICAqIEBkZXYgdG90YWwgbnVtYmVyIG9mIHRva2VucyBpbiBleGlzdGVuY2UKICAqLwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHRvdGFsU3VwcGx5XzsKICB9CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGVtaXQgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW19mcm9tXSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CgogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgZW1pdCBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgZW1pdCBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIC8qKgogICAqIEBkZXYgSW5jcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfYWRkZWRWYWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBpbmNyZWFzZSB0aGUgYWxsb3dhbmNlIGJ5LgogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIGVtaXQgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBEZWNyZWFzZSB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gZGVjcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zdWJ0cmFjdGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gZGVjcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KICAgKi8KICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgfSBlbHNlIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICB9CiAgICBlbWl0IEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9CmNvbnRyYWN0IE1pbnRhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CiAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBNaW50RmluaXNoZWQoKTsKCiAgYm9vbCBwdWJsaWMgbWludGluZ0ZpbmlzaGVkID0gZmFsc2U7CgoKICBtb2RpZmllciBjYW5NaW50KCkgewogICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIG1pbnQgdG9rZW5zCiAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgbWludGVkIHRva2Vucy4KICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAqIEByZXR1cm4gQSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgY2FuTWludCBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgdG90YWxTdXBwbHlfID0gdG90YWxTdXBwbHlfLmFkZChfYW1vdW50KTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgIGVtaXQgTWludChfdG8sIF9hbW91bnQpOwogICAgZW1pdCBUcmFuc2ZlcihhZGRyZXNzKDApLCBfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIHN0b3AgbWludGluZyBuZXcgdG9rZW5zLgogICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBvbmx5T3duZXIgY2FuTWludCBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgIGVtaXQgTWludEZpbmlzaGVkKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KY29udHJhY3QgQnVybmFibGVUb2tlbiBpcyBNaW50YWJsZVRva2VuIHsKCiAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgYnVybmVyLCB1aW50MjU2IHZhbHVlKTsKCiAgLyoqCiAgICogQGRldiBCdXJucyBhIHNwZWNpZmljIGFtb3VudCBvZiB0b2tlbnMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIGJ1cm5lZC4KICAgKi8KICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgLy8gbm8gbmVlZCB0byByZXF1aXJlIHZhbHVlIDw9IHRvdGFsU3VwcGx5LCBzaW5jZSB0aGF0IHdvdWxkIGltcGx5IHRoZQogICAgLy8gc2VuZGVyJ3MgYmFsYW5jZSBpcyBncmVhdGVyIHRoYW4gdGhlIHRvdGFsU3VwcGx5LCB3aGljaCAqc2hvdWxkKiBiZSBhbiBhc3NlcnRpb24gZmFpbHVyZQoKICAgIGFkZHJlc3MgYnVybmVyID0gbXNnLnNlbmRlcjsKICAgIGJhbGFuY2VzW2J1cm5lcl0gPSBiYWxhbmNlc1tidXJuZXJdLnN1YihfdmFsdWUpOwogICAgdG90YWxTdXBwbHlfID0gdG90YWxTdXBwbHlfLnN1YihfdmFsdWUpOwogICAgZW1pdCBCdXJuKGJ1cm5lciwgX3ZhbHVlKTsKICAgIGVtaXQgVHJhbnNmZXIoYnVybmVyLCBhZGRyZXNzKDApLCBfdmFsdWUpOwogIH0KfQoKY29udHJhY3QgUFBUb2tlbiBpcyBCdXJuYWJsZVRva2VuewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICAKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJQYXlQb3J0YWxUb2tlbiI7CiAgICAKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlBQVEwiOwogICAgCiAgICB1aW50MzIgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIGZyZWV6VGltZTsKICAgIAogICAgYWRkcmVzcyBpbnRlcm5hbCBzYWxlQWdlbnQ7CiAgICAKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwcmVTYWxlQmFsYW5jZXM7CiAgICAKICAgIGV2ZW50IFByZVNhbGVUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIAogICAgCiAgICBmdW5jdGlvbiBQUFRva2VuKHVpbnQyNTYgaW5pdGlhbFN1cHBseSwgdWludDI1NiBfZnJlZXpUaW1lKSBwdWJsaWN7CiAgICAgICAgcmVxdWlyZShpbml0aWFsU3VwcGx5ID4gMCAmJiBub3cgPD0gX2ZyZWV6VGltZSk7CiAgICAgICAgdG90YWxTdXBwbHlfID0gaW5pdGlhbFN1cHBseSAqIDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpOwogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IHRvdGFsU3VwcGx5XzsKICAgICAgICBlbWl0IE1pbnQob3duZXIsIHRvdGFsU3VwcGx5Xyk7CiAgICAgICAgZW1pdCBUcmFuc2ZlcigweDAsIG93bmVyLCB0b3RhbFN1cHBseV8pOwogICAgICAgIGZyZWV6VGltZSA9IF9mcmVlelRpbWU7CiAgICAgICAgc2FsZUFnZW50ID0gb3duZXI7CiAgICB9CiAgICAvKgogICAgZnVuY3Rpb24gUFBUb2tlbigpIHB1YmxpY3sKICAgICAgICB1aW50MjU2IGluaXRpYWxTdXBwbHkgPSAyMDAwMDsKICAgICAgICB1aW50MjU2IF9mcmVlelRpbWUgPSBub3cgKyAoMTAgbWludXRlcyk7CiAgICAgICAgCiAgICAgICAgcmVxdWlyZShpbml0aWFsU3VwcGx5ID4gMCAmJiBub3cgPD0gX2ZyZWV6VGltZSk7CiAgICAgICAgdG90YWxTdXBwbHlfID0gaW5pdGlhbFN1cHBseSAqIDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpOwogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IHRvdGFsU3VwcGx5XzsKICAgICAgICBlbWl0IE1pbnQob3duZXIsIHRvdGFsU3VwcGx5Xyk7CiAgICAgICAgZW1pdCBUcmFuc2ZlcigweDAsIG93bmVyLCB0b3RhbFN1cHBseV8pOwogICAgICAgIGZyZWV6VGltZSA9IF9mcmVlelRpbWU7CiAgICAgICAgc2FsZUFnZW50ID0gb3duZXI7CiAgICB9CiAgICAqLwogICAgbW9kaWZpZXIgb25seVNhbGVBZ2VudCgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gc2FsZUFnZW50KTsKICAgICAgICBfOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBidXJuUmVtYWluKCkgcHVibGljIG9ubHlTYWxlQWdlbnQgewogICAgICAgIHVpbnQyNTYgX3JlbVN1cHBseSA9IGJhbGFuY2VzW293bmVyXTsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSAwOwogICAgICAgIHRvdGFsU3VwcGx5XyA9IHRvdGFsU3VwcGx5Xy5zdWIoX3JlbVN1cHBseSk7CgogICAgICAgIGVtaXQgQnVybihvd25lciwgX3JlbVN1cHBseSk7CiAgICAgICAgZW1pdCBUcmFuc2Zlcihvd25lciwgYWRkcmVzcygwKSwgX3JlbVN1cHBseSk7CiAgICAgICAgCiAgICAgICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICBlbWl0IE1pbnRGaW5pc2hlZCgpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRTYWxlQWdlbnQoYWRkcmVzcyBfc2FsZUFnZW50KSBwdWJsaWMgb25seU93bmVyewogICAgICAgIHJlcXVpcmUoX3NhbGVBZ2VudCAhPSBhZGRyZXNzKDApKTsKICAgICAgICBzYWxlQWdlbnQgPSBfc2FsZUFnZW50OwogICAgfQogICAgZnVuY3Rpb24gc2V0RnJlZXpUaW1lKHVpbnQyNTYgX2ZyZWV6VGltZSkgcHVibGljIG9ubHlPd25lcnsKICAgICAgICBmcmVlelRpbWUgPSBfZnJlZXpUaW1lOwogICAgfQogICAgZnVuY3Rpb24gc2FsZVRva2VucyhhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBvbmx5U2FsZUFnZW50IHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbb3duZXJdKTsKICAgIAogICAgICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgCiAgICAgICAgaWYobm93ID4gZnJlZXpUaW1lKXsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGVsc2V7CiAgICAgICAgICAgIHByZVNhbGVCYWxhbmNlc1tfdG9dID0gcHJlU2FsZUJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGVtaXQgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBwcmVTYWxlQmFsYW5jZXNPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICByZXR1cm4gcHJlU2FsZUJhbGFuY2VzW19vd25lcl07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyUHJlU2FsZUJhbGFuY2UoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKXB1YmxpYyByZXR1cm5zIChib29sKXsKICAgICAgICByZXF1aXJlKG5vdyA+IGZyZWV6VGltZSk7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gcHJlU2FsZUJhbGFuY2VzW21zZy5zZW5kZXJdKTsKICAgICAgICBwcmVTYWxlQmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBwcmVTYWxlQmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgZW1pdCBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKY29udHJhY3QgQ3Jvd2RzYWxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgLy8gVGhlIHRva2VuIGJlaW5nIHNvbGQKICBQUFRva2VuIHB1YmxpYyB0b2tlbjsKCiAgLy8gQWRkcmVzcyB3aGVyZSBmdW5kcyBhcmUgY29sbGVjdGVkCiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwoKICAvLyBIb3cgbWFueSB0b2tlbiB1bml0cyBhIGJ1eWVyIGdldHMgcGVyIHdlaQogIHVpbnQyNTYgcHVibGljIHJhdGU7CgogIC8vIEFtb3VudCBvZiB3ZWkgcmFpc2VkCiAgdWludDI1NiBwdWJsaWMgd2VpUmFpc2VkOwoKICAvKioKICAgKiBFdmVudCBmb3IgdG9rZW4gcHVyY2hhc2UgbG9nZ2luZwogICAqIEBwYXJhbSBwdXJjaGFzZXIgd2hvIHBhaWQgZm9yIHRoZSB0b2tlbnMKICAgKiBAcGFyYW0gYmVuZWZpY2lhcnkgd2hvIGdvdCB0aGUgdG9rZW5zCiAgICogQHBhcmFtIHZhbHVlIHdlaXMgcGFpZCBmb3IgcHVyY2hhc2UKICAgKiBAcGFyYW0gYW1vdW50IGFtb3VudCBvZiB0b2tlbnMgcHVyY2hhc2VkCiAgICovCiAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKCiAgLyoqCiAgICogQHBhcmFtIF9yYXRlIE51bWJlciBvZiB0b2tlbiB1bml0cyBhIGJ1eWVyIGdldHMgcGVyIHdlaQogICAqIEBwYXJhbSBfd2FsbGV0IEFkZHJlc3Mgd2hlcmUgY29sbGVjdGVkIGZ1bmRzIHdpbGwgYmUgZm9yd2FyZGVkIHRvCiAgICogQHBhcmFtIF90b2tlbiBBZGRyZXNzIG9mIHRoZSB0b2tlbiBiZWluZyBzb2xkCiAgICovCiAgZnVuY3Rpb24gQ3Jvd2RzYWxlKHVpbnQyNTYgX3JhdGUsIGFkZHJlc3MgX3dhbGxldCwgUFBUb2tlbiBfdG9rZW4pIHB1YmxpYyB7CiAgICByZXF1aXJlKF9yYXRlID4gMCk7CiAgICByZXF1aXJlKF93YWxsZXQgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF90b2tlbiAhPSBhZGRyZXNzKDApKTsKCiAgICByYXRlID0gX3JhdGU7CiAgICB3YWxsZXQgPSBfd2FsbGV0OwogICAgdG9rZW4gPSBfdG9rZW47CiAgfQoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIENyb3dkc2FsZSBleHRlcm5hbCBpbnRlcmZhY2UKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAvKioKICAgKiBAZGV2IGZhbGxiYWNrIGZ1bmN0aW9uICoqKkRPIE5PVCBPVkVSUklERSoqKgogICAqLwogIGZ1bmN0aW9uICgpIGV4dGVybmFsIHBheWFibGUgewogICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogIH0KCiAgLyoqCiAgICogQGRldiBsb3cgbGV2ZWwgdG9rZW4gcHVyY2hhc2UgKioqRE8gTk9UIE9WRVJSSURFKioqCiAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBBZGRyZXNzIHBlcmZvcm1pbmcgdGhlIHRva2VuIHB1cmNoYXNlCiAgICovCiAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBwdWJsaWMgcGF5YWJsZSB7CgogICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICBfcHJlVmFsaWRhdGVQdXJjaGFzZShfYmVuZWZpY2lhcnksIHdlaUFtb3VudCk7CgogICAgLy8gY2FsY3VsYXRlIHRva2VuIGFtb3VudCB0byBiZSBjcmVhdGVkCiAgICB1aW50MjU2IHRvdGFsVG9rZW5zID0gX2dldFRva2VuQW1vdW50KHdlaUFtb3VudCk7CgogICAgLy8gdXBkYXRlIHN0YXRlCiAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgX3Byb2Nlc3NQdXJjaGFzZShfYmVuZWZpY2lhcnksIHRvdGFsVG9rZW5zKTsKICAgIGVtaXQgVG9rZW5QdXJjaGFzZShtc2cuc2VuZGVyLCBfYmVuZWZpY2lhcnksIHdlaUFtb3VudCwgdG90YWxUb2tlbnMpOwoKICAgIF91cGRhdGVQdXJjaGFzaW5nU3RhdGUoX2JlbmVmaWNpYXJ5LCB3ZWlBbW91bnQpOwoKICAgIF9mb3J3YXJkRnVuZHMoKTsKICAgIF9wb3N0VmFsaWRhdGVQdXJjaGFzZShfYmVuZWZpY2lhcnksIHdlaUFtb3VudCk7CiAgfQoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIEludGVybmFsIGludGVyZmFjZSAoZXh0ZW5zaWJsZSkKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAvKioKICAgKiBAZGV2IFZhbGlkYXRpb24gb2YgYW4gaW5jb21pbmcgcHVyY2hhc2UuIFVzZSByZXF1aXJlIHN0YXRlbWVudHMgdG8gcmV2ZXJ0IHN0YXRlIHdoZW4gY29uZGl0aW9ucyBhcmUgbm90IG1ldC4gVXNlIHN1cGVyIHRvIGNvbmNhdGVuYXRlIHZhbGlkYXRpb25zLgogICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgQWRkcmVzcyBwZXJmb3JtaW5nIHRoZSB0b2tlbiBwdXJjaGFzZQogICAqIEBwYXJhbSBfd2VpQW1vdW50IFZhbHVlIGluIHdlaSBpbnZvbHZlZCBpbiB0aGUgcHVyY2hhc2UKICAgKi8KICBmdW5jdGlvbiBfcHJlVmFsaWRhdGVQdXJjaGFzZShhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbAogIHsKICAgICAgICByZXF1aXJlKF9iZW5lZmljaWFyeSAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF93ZWlBbW91bnQgIT0gMCk7CiAgfQogIC8qKgogICAqIEBkZXYgVmFsaWRhdGlvbiBvZiBhbiBleGVjdXRlZCBwdXJjaGFzZS4gT2JzZXJ2ZSBzdGF0ZSBhbmQgdXNlIHJldmVydCBzdGF0ZW1lbnRzIHRvIHVuZG8gcm9sbGJhY2sgd2hlbiB2YWxpZCBjb25kaXRpb25zIGFyZSBub3QgbWV0LgogICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgQWRkcmVzcyBwZXJmb3JtaW5nIHRoZSB0b2tlbiBwdXJjaGFzZQogICAqIEBwYXJhbSBfd2VpQW1vdW50IFZhbHVlIGluIHdlaSBpbnZvbHZlZCBpbiB0aGUgcHVyY2hhc2UKICAgKi8KICBmdW5jdGlvbiBfcG9zdFZhbGlkYXRlUHVyY2hhc2UoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQyNTYgX3dlaUFtb3VudCkgaW50ZXJuYWwKICB7fQoKICAvKioKICAgKiBAZGV2IFNvdXJjZSBvZiB0b2tlbnMuIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIG1vZGlmeSB0aGUgd2F5IGluIHdoaWNoIHRoZSBjcm93ZHNhbGUgdWx0aW1hdGVseSBnZXRzIGFuZCBzZW5kcyBpdHMgdG9rZW5zLgogICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgQWRkcmVzcyBwZXJmb3JtaW5nIHRoZSB0b2tlbiBwdXJjaGFzZQogICAqIEBwYXJhbSBfdG9rZW5BbW91bnQgTnVtYmVyIG9mIHRva2VucyB0byBiZSBlbWl0dGVkCiAgICovCiAgZnVuY3Rpb24gX2RlbGl2ZXJUb2tlbnMoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQyNTYgX3Rva2VuQW1vdW50KSBpbnRlcm5hbCB7CiAgICB0b2tlbi50cmFuc2ZlcihfYmVuZWZpY2lhcnksIF90b2tlbkFtb3VudCk7CiAgfQoKICAvKioKICAgKiBAZGV2IEV4ZWN1dGVkIHdoZW4gYSBwdXJjaGFzZSBoYXMgYmVlbiB2YWxpZGF0ZWQgYW5kIGlzIHJlYWR5IHRvIGJlIGV4ZWN1dGVkLiBOb3QgbmVjZXNzYXJpbHkgZW1pdHMvc2VuZHMgdG9rZW5zLgogICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgQWRkcmVzcyByZWNlaXZpbmcgdGhlIHRva2VucwogICAqIEBwYXJhbSBfdG9rZW5BbW91bnQgTnVtYmVyIG9mIHRva2VucyB0byBiZSBwdXJjaGFzZWQKICAgKi8KICBmdW5jdGlvbiBfcHJvY2Vzc1B1cmNoYXNlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF90b2tlbkFtb3VudCkgaW50ZXJuYWwgewogICAgX2RlbGl2ZXJUb2tlbnMoX2JlbmVmaWNpYXJ5LCBfdG9rZW5BbW91bnQpOwogIH0KCiAgLyoqCiAgICogQGRldiBPdmVycmlkZSBmb3IgZXh0ZW5zaW9ucyB0aGF0IHJlcXVpcmUgYW4gaW50ZXJuYWwgc3RhdGUgdG8gY2hlY2sgZm9yIHZhbGlkaXR5IChjdXJyZW50IHVzZXIgY29udHJpYnV0aW9ucywgZXRjLikKICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IEFkZHJlc3MgcmVjZWl2aW5nIHRoZSB0b2tlbnMKICAgKiBAcGFyYW0gX3dlaUFtb3VudCBWYWx1ZSBpbiB3ZWkgaW52b2x2ZWQgaW4gdGhlIHB1cmNoYXNlCiAgICovCiAgZnVuY3Rpb24gX3VwZGF0ZVB1cmNoYXNpbmdTdGF0ZShhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbAogIHt9CgogIC8qKgogICAqIEBkZXYgT3ZlcnJpZGUgdG8gZXh0ZW5kIHRoZSB3YXkgaW4gd2hpY2ggZXRoZXIgaXMgY29udmVydGVkIHRvIHRva2Vucy4KICAgKiBAcGFyYW0gX3dlaUFtb3VudCBWYWx1ZSBpbiB3ZWkgdG8gYmUgY29udmVydGVkIGludG8gdG9rZW5zCiAgICogQHJldHVybiBOdW1iZXIgb2YgdG9rZW5zIHRoYXQgY2FuIGJlIHB1cmNoYXNlZCB3aXRoIHRoZSBzcGVjaWZpZWQgX3dlaUFtb3VudAogICAqLwogIGZ1bmN0aW9uIF9nZXRUb2tlbkFtb3VudCh1aW50MjU2IF93ZWlBbW91bnQpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpCiAgewogICAgICB1aW50MjU2IHRva2VucyA9IF93ZWlBbW91bnQubXVsKHJhdGUpOwogICAgICByZXR1cm4gdG9rZW5zOwogIH0KICAvKioKICAgKiBAZGV2IERldGVybWluZXMgaG93IEVUSCBpcyBzdG9yZWQvZm9yd2FyZGVkIG9uIHB1cmNoYXNlcy4KICAgKi8KICBmdW5jdGlvbiBfZm9yd2FyZEZ1bmRzKCkgaW50ZXJuYWwgewogICAgd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgfQp9CmNvbnRyYWN0IEFsbG93YW5jZUNyb3dkc2FsZSBpcyBDcm93ZHNhbGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBhZGRyZXNzIHB1YmxpYyB0b2tlbldhbGxldDsKCiAgLyoqCiAgICogQGRldiBDb25zdHJ1Y3RvciwgdGFrZXMgdG9rZW4gd2FsbGV0IGFkZHJlc3MuIAogICAqIEBwYXJhbSBfdG9rZW5XYWxsZXQgQWRkcmVzcyBob2xkaW5nIHRoZSB0b2tlbnMsIHdoaWNoIGhhcyBhcHByb3ZlZCBhbGxvd2FuY2UgdG8gdGhlIGNyb3dkc2FsZQogICAqLwogIGZ1bmN0aW9uIEFsbG93YW5jZUNyb3dkc2FsZShhZGRyZXNzIF90b2tlbldhbGxldCkgcHVibGljIHsKICAgIHJlcXVpcmUoX3Rva2VuV2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgdG9rZW5XYWxsZXQgPSBfdG9rZW5XYWxsZXQ7CiAgfQoKICAvKioKICAgKiBAZGV2IENoZWNrcyB0aGUgYW1vdW50IG9mIHRva2VucyBsZWZ0IGluIHRoZSBhbGxvd2FuY2UuCiAgICogQHJldHVybiBBbW91bnQgb2YgdG9rZW5zIGxlZnQgaW4gdGhlIGFsbG93YW5jZQogICAqLwogIGZ1bmN0aW9uIHJlbWFpbmluZ1Rva2VucygpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiB0b2tlbi5iYWxhbmNlT2YodG9rZW5XYWxsZXQpOwogIH0KCiAgLyoqCiAgICogQGRldiBPdmVycmlkZXMgcGFyZW50IGJlaGF2aW9yIGJ5IHRyYW5zZmVycmluZyB0b2tlbnMgZnJvbSB3YWxsZXQuCiAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBUb2tlbiBwdXJjaGFzZXIKICAgKiBAcGFyYW0gX3Rva2VuQW1vdW50IEFtb3VudCBvZiB0b2tlbnMgcHVyY2hhc2VkCiAgICovCiAgZnVuY3Rpb24gX2RlbGl2ZXJUb2tlbnMoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQyNTYgX3Rva2VuQW1vdW50KSBpbnRlcm5hbCB7CiAgICB0b2tlbi5zYWxlVG9rZW5zKF9iZW5lZmljaWFyeSwgX3Rva2VuQW1vdW50KTsKICB9Cn0KY29udHJhY3QgQ2FwcGVkQ3Jvd2RzYWxlIGlzIENyb3dkc2FsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIHVpbnQyNTYgcHVibGljIGNhcDsKICAKCiAgLyoqCiAgICogQGRldiBDb25zdHJ1Y3RvciwgdGFrZXMgbWF4aW11bSBhbW91bnQgb2Ygd2VpIGFjY2VwdGVkIGluIHRoZSBjcm93ZHNhbGUuCiAgICogQHBhcmFtIF9jYXAgTWF4IGFtb3VudCBvZiB3ZWkgdG8gYmUgY29udHJpYnV0ZWQKICAgKi8KICBmdW5jdGlvbiBDYXBwZWRDcm93ZHNhbGUodWludDI1NiBfY2FwKSBwdWJsaWMgewogICAgcmVxdWlyZShfY2FwID4gMCk7CiAgICBjYXAgPSBfY2FwOwogIH0KCiAgLyoqCiAgICogQGRldiBDaGVja3Mgd2hldGhlciB0aGUgY2FwIGhhcyBiZWVuIHJlYWNoZWQuIAogICAqIEByZXR1cm4gV2hldGhlciB0aGUgY2FwIHdhcyByZWFjaGVkCiAgICovCiAgZnVuY3Rpb24gY2FwUmVhY2hlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB3ZWlSYWlzZWQgPj0gY2FwOwogIH0KCiAgLyoqCiAgICogQGRldiBFeHRlbmQgcGFyZW50IGJlaGF2aW9yIHJlcXVpcmluZyBwdXJjaGFzZSB0byByZXNwZWN0IHRoZSBmdW5kaW5nIGNhcC4KICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IFRva2VuIHB1cmNoYXNlcgogICAqIEBwYXJhbSBfd2VpQW1vdW50IEFtb3VudCBvZiB3ZWkgY29udHJpYnV0ZWQKICAgKi8KICBmdW5jdGlvbiBfcHJlVmFsaWRhdGVQdXJjaGFzZShhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbCB7CiAgICBzdXBlci5fcHJlVmFsaWRhdGVQdXJjaGFzZShfYmVuZWZpY2lhcnksIF93ZWlBbW91bnQpOwogICAgcmVxdWlyZSghY2FwUmVhY2hlZCgpKTsKICAgIC8vcmVxdWlyZSh3ZWlSYWlzZWQuYWRkKF93ZWlBbW91bnQpIDw9IGNhcCk7CiAgfQoKfQpjb250cmFjdCBUaW1lZENyb3dkc2FsZSBpcyBDcm93ZHNhbGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICB1aW50MjU2IHB1YmxpYyBvcGVuaW5nVGltZTsKICB1aW50MjU2IHB1YmxpYyBjbG9zaW5nVGltZTsKCiAgLyoqCiAgICogQGRldiBSZXZlcnRzIGlmIG5vdCBpbiBjcm93ZHNhbGUgdGltZSByYW5nZS4gCiAgICovCiAgbW9kaWZpZXIgb25seVdoaWxlT3BlbiB7CiAgICByZXF1aXJlKG5vdyA+PSBvcGVuaW5nVGltZSAmJiBub3cgPD0gY2xvc2luZ1RpbWUpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQ29uc3RydWN0b3IsIHRha2VzIGNyb3dkc2FsZSBvcGVuaW5nIGFuZCBjbG9zaW5nIHRpbWVzLgogICAqIEBwYXJhbSBfb3BlbmluZ1RpbWUgQ3Jvd2RzYWxlIG9wZW5pbmcgdGltZQogICAqIEBwYXJhbSBfY2xvc2luZ1RpbWUgQ3Jvd2RzYWxlIGNsb3NpbmcgdGltZQogICAqLwogIGZ1bmN0aW9uIFRpbWVkQ3Jvd2RzYWxlKHVpbnQyNTYgX29wZW5pbmdUaW1lLCB1aW50MjU2IF9jbG9zaW5nVGltZSkgcHVibGljIHsKICAgIHJlcXVpcmUoX29wZW5pbmdUaW1lID49IG5vdyk7CiAgICByZXF1aXJlKF9jbG9zaW5nVGltZSA+PSBfb3BlbmluZ1RpbWUpOwoKICAgIG9wZW5pbmdUaW1lID0gX29wZW5pbmdUaW1lOwogICAgY2xvc2luZ1RpbWUgPSBfY2xvc2luZ1RpbWU7CiAgfQoKICAvKioKICAgKiBAZGV2IENoZWNrcyB3aGV0aGVyIHRoZSBwZXJpb2QgaW4gd2hpY2ggdGhlIGNyb3dkc2FsZSBpcyBvcGVuIGhhcyBhbHJlYWR5IGVsYXBzZWQuCiAgICogQHJldHVybiBXaGV0aGVyIGNyb3dkc2FsZSBwZXJpb2QgaGFzIGVsYXBzZWQKICAgKi8KICBmdW5jdGlvbiBoYXNDbG9zZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gbm93ID4gY2xvc2luZ1RpbWU7CiAgfQogIAogIC8qKgogICAqIEBkZXYgRXh0ZW5kIHBhcmVudCBiZWhhdmlvciByZXF1aXJpbmcgdG8gYmUgd2l0aGluIGNvbnRyaWJ1dGluZyBwZXJpb2QKICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IFRva2VuIHB1cmNoYXNlcgogICAqIEBwYXJhbSBfd2VpQW1vdW50IEFtb3VudCBvZiB3ZWkgY29udHJpYnV0ZWQKICAgKi8KICBmdW5jdGlvbiBfcHJlVmFsaWRhdGVQdXJjaGFzZShhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbCBvbmx5V2hpbGVPcGVuIHsKICAgIHN1cGVyLl9wcmVWYWxpZGF0ZVB1cmNoYXNlKF9iZW5lZmljaWFyeSwgX3dlaUFtb3VudCk7CiAgfQoKfQpjb250cmFjdCBGaW5hbGl6YWJsZUNyb3dkc2FsZSBpcyBUaW1lZENyb3dkc2FsZSwgT3duYWJsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIGJvb2wgcHVibGljIGlzRmluYWxpemVkID0gZmFsc2U7CgogIGV2ZW50IEZpbmFsaXplZCgpOwoKICAvKioKICAgKiBAZGV2IE11c3QgYmUgY2FsbGVkIGFmdGVyIGNyb3dkc2FsZSBlbmRzLCB0byBkbyBzb21lIGV4dHJhIGZpbmFsaXphdGlvbgogICAqIHdvcmsuIENhbGxzIHRoZSBjb250cmFjdCdzIGZpbmFsaXphdGlvbiBmdW5jdGlvbi4KICAgKi8KICBmdW5jdGlvbiBmaW5hbGl6ZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZSghaXNGaW5hbGl6ZWQpOwogICAgcmVxdWlyZShoYXNDbG9zZWQoKSk7CgogICAgZmluYWxpemF0aW9uKCk7CiAgICBlbWl0IEZpbmFsaXplZCgpOwoKICAgIGlzRmluYWxpemVkID0gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQ2FuIGJlIG92ZXJyaWRkZW4gdG8gYWRkIGZpbmFsaXphdGlvbiBsb2dpYy4gVGhlIG92ZXJyaWRpbmcgZnVuY3Rpb24KICAgKiBzaG91bGQgY2FsbCBzdXBlci5maW5hbGl6YXRpb24oKSB0byBlbnN1cmUgdGhlIGNoYWluIG9mIGZpbmFsaXphdGlvbiBpcwogICAqIGV4ZWN1dGVkIGVudGlyZWx5LgogICAqLwogIGZ1bmN0aW9uIGZpbmFsaXphdGlvbigpIGludGVybmFsCiAgewogICAgICAKICB9Cn0KY29udHJhY3QgV2hpdGVsaXN0ZWRDcm93ZHNhbGUgaXMgQ3Jvd2RzYWxlLCBPd25hYmxlIHsKCiAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyB3aGl0ZWxpc3Q7CiAgLy9AZGV2IHRoaXMgYWRkcmVzIHRoYXQgYWxsb3cgYWRkIG9yIHJlbW92ZSBhZHJlc3NlcyB0byB3aGl0ZUxpc3QuCiAgYWRkcmVzcyB3aGl0ZUxpc3RBZ2VudDsKICAKICAvL0BkZXYgc2V0IHRvIHdoaXRlTGlzdEFnZW50IGFkZHJlc3MKICBmdW5jdGlvbiBzZXRXaGl0ZUxpc3RBZ2VudChhZGRyZXNzIF9hZ2VudCkgcHVibGljIG9ubHlPd25lcnsKICAgICAgcmVxdWlyZShfYWdlbnQgIT0gYWRkcmVzcygwKSk7CiAgICAgIHdoaXRlTGlzdEFnZW50ID0gX2FnZW50OwogIH0KICAvL0BkZXYgcmV2ZXJ0IGlmIHNlbmRlciBpcyB3aGl0ZUxpc3RBZ2VudAogICAgbW9kaWZpZXIgT25seVdoaXRlTGlzdEFnZW50KCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB3aGl0ZUxpc3RBZ2VudCk7CiAgICAgICAgXzsKICAgIH0KICAvKioKICAgKiBAZGV2IFJldmVydHMgaWYgYmVuZWZpY2lhcnkgaXMgbm90IHdoaXRlbGlzdGVkLiBDYW4gYmUgdXNlZCB3aGVuIGV4dGVuZGluZyB0aGlzIGNvbnRyYWN0LgogICAqLwogIG1vZGlmaWVyIGlzV2hpdGVsaXN0ZWQoYWRkcmVzcyBfYmVuZWZpY2lhcnkpIHsKICAgIHJlcXVpcmUod2hpdGVsaXN0W19iZW5lZmljaWFyeV0pOwogICAgXzsKICB9CiAgCiAgZnVuY3Rpb24gaW5XaGl0ZUxpc3QoYWRkcmVzcyBfYmVuZWZpY2lhcnkpIHB1YmxpYyB2aWV3IHJldHVybnMoYm9vbCl7CiAgICAgIHJldHVybiB3aGl0ZWxpc3RbX2JlbmVmaWNpYXJ5XTsKICB9CgogIC8qKgogICAqIEBkZXYgQWRkcyBzaW5nbGUgYWRkcmVzcyB0byB3aGl0ZWxpc3QuCiAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBBZGRyZXNzIHRvIGJlIGFkZGVkIHRvIHRoZSB3aGl0ZWxpc3QKICAgKi8KICBmdW5jdGlvbiBhZGRUb1doaXRlbGlzdChhZGRyZXNzIF9iZW5lZmljaWFyeSkgZXh0ZXJuYWwgT25seVdoaXRlTGlzdEFnZW50IHsKICAgIHdoaXRlbGlzdFtfYmVuZWZpY2lhcnldID0gdHJ1ZTsKICB9CiAgCiAgLyoqCiAgICogQGRldiBBZGRzIGxpc3Qgb2YgYWRkcmVzc2VzIHRvIHdoaXRlbGlzdC4gTm90IG92ZXJsb2FkZWQgZHVlIHRvIGxpbWl0YXRpb25zIHdpdGggdHJ1ZmZsZSB0ZXN0aW5nLiAKICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJpZXMgQWRkcmVzc2VzIHRvIGJlIGFkZGVkIHRvIHRoZSB3aGl0ZWxpc3QKICAgKi8KICBmdW5jdGlvbiBhZGRNYW55VG9XaGl0ZWxpc3QoYWRkcmVzc1tdIF9iZW5lZmljaWFyaWVzKSBleHRlcm5hbCBPbmx5V2hpdGVMaXN0QWdlbnQgewogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX2JlbmVmaWNpYXJpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgd2hpdGVsaXN0W19iZW5lZmljaWFyaWVzW2ldXSA9IHRydWU7CiAgICB9CiAgfQoKICAvKioKICAgKiBAZGV2IFJlbW92ZXMgc2luZ2xlIGFkZHJlc3MgZnJvbSB3aGl0ZWxpc3QuIAogICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgQWRkcmVzcyB0byBiZSByZW1vdmVkIHRvIHRoZSB3aGl0ZWxpc3QKICAgKi8KICBmdW5jdGlvbiByZW1vdmVGcm9tV2hpdGVsaXN0KGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBleHRlcm5hbCBPbmx5V2hpdGVMaXN0QWdlbnQgewogICAgd2hpdGVsaXN0W19iZW5lZmljaWFyeV0gPSBmYWxzZTsKICB9CgogIC8qKgogICAqIEBkZXYgRXh0ZW5kIHBhcmVudCBiZWhhdmlvciByZXF1aXJpbmcgYmVuZWZpY2lhcnkgdG8gYmUgaW4gd2hpdGVsaXN0LgogICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgVG9rZW4gYmVuZWZpY2lhcnkKICAgKiBAcGFyYW0gX3dlaUFtb3VudCBBbW91bnQgb2Ygd2VpIGNvbnRyaWJ1dGVkCiAgICovCiAgZnVuY3Rpb24gX3ByZVZhbGlkYXRlUHVyY2hhc2UoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQyNTYgX3dlaUFtb3VudCkgaW50ZXJuYWwgaXNXaGl0ZWxpc3RlZChfYmVuZWZpY2lhcnkpIHsKICAgICAgICBzdXBlci5fcHJlVmFsaWRhdGVQdXJjaGFzZShfYmVuZWZpY2lhcnksIF93ZWlBbW91bnQpOwogIH0KCn0KCmNvbnRyYWN0IFBQVExfUHJpdmF0ZUNyb3dkc2FsZSBpcyAgRmluYWxpemFibGVDcm93ZHNhbGUsIENhcHBlZENyb3dkc2FsZSwgV2hpdGVsaXN0ZWRDcm93ZHNhbGUsIEFsbG93YW5jZUNyb3dkc2FsZXsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgCiAgICB1aW50MjU2IHB1YmxpYyBib251c1BlcmNlbnQ7CiAgICB1aW50MjU2IHB1YmxpYyBtaW5XZWlBbW91bnQ7CiAgICAKICAgIC8qCiAgICBmdW5jdGlvbiBQUFRva2VuQ3Jvd2RzYWxlKHVpbnQyNTYgX29wZW5pbmdUaW1lLCB1aW50MjU2IF9jbG9zaW5nVGltZSwgdWludDI1NiBfcmF0ZSwgYWRkcmVzcyBfd2FsbGV0LCB1aW50MjU2IF9jYXAsIFBQVG9rZW4gX3Rva2VuLCB1aW50MjU2IF9nb2FsCiAgICAsIGFkZHJlc3MgX2JvdW50eVdhbGxldCwgdWludDI1NiBfYm91bnR5UGVyY2VudCwgYWRkcmVzcyBfdGVhbVdhbGxldCwgdWludDI1NiBfdGVhbVBlcmNlbnQpIHB1YmxpYwogICAgICAgIENyb3dkc2FsZShfcmF0ZSwgX3dhbGxldCwgX3Rva2VuKQogICAgICAgIENhcHBlZENyb3dkc2FsZShfY2FwKQogICAgICAgIFRpbWVkQ3Jvd2RzYWxlKF9vcGVuaW5nVGltZSwgX2Nsb3NpbmdUaW1lKQogICAgICAgIFJlZnVuZGFibGVDcm93ZHNhbGUoX2dvYWwpCiAgICAgIHsKICAgICAgICAvL0FzIGdvYWwgbmVlZHMgdG8gYmUgbWV0IGZvciBhIHN1Y2Nlc3NmdWwgY3Jvd2RzYWxlCiAgICAgICAgLy90aGUgdmFsdWUgbmVlZHMgdG8gbGVzcyBvciBlcXVhbCB0aGFuIGEgY2FwIHdoaWNoIGlzIGxpbWl0IGZvciBhY2NlcHRlZCBmdW5kcwogICAgICAgIHJlcXVpcmUoX2dvYWwgPD0gX2NhcCk7CiAgICAgICAgYm91bnR5V2FsbGV0ID0gX2JvdW50eVdhbGxldDsKICAgICAgICBib3VudHlQZXJjZW50ID0gX2JvdW50eVBlcmNlbnQ7CiAgICAgICAgdGVhbVdhbGxldCA9IF90ZWFtV2FsbGV0OwogICAgICAgIHRlYW1QZXJjZW50ID0gX3RlYW1QZXJjZW50OwogICAgICAgIHBwdG9rZW4gPSBfdG9rZW47CiAgICAgIH0KICAgICovCiAgICBmdW5jdGlvbiBQUFRMX1ByaXZhdGVDcm93ZHNhbGUoIFBQVG9rZW4gX3Rva2VuKSBwdWJsaWMKICAgICAgICBDcm93ZHNhbGUoNTAwLCBtc2cuc2VuZGVyLCBfdG9rZW4pLy8oX3JhdGUsIF93YWxsZXQsIF90b2tlbikKICAgICAgICBDYXBwZWRDcm93ZHNhbGUoKDQwMDAgZXRoZXIpKQogICAgICAgIFRpbWVkQ3Jvd2RzYWxlKDE1MjM4MzY4MDAsIDE1MjU1NjQ4MDApLy8oMTYgQXByIDIwMTgsIDA2IE1heSAyMDE4KQogICAgICAgIEFsbG93YW5jZUNyb3dkc2FsZShtc2cuc2VuZGVyKQogICAgICB7CiAgICAgICAgYm9udXNQZXJjZW50ID0gMzA7CiAgICAgICAgbWluV2VpQW1vdW50ID0gMTAwIGV0aGVyOwogICAgICB9CiAgICAgIAogICAgICBmdW5jdGlvbiBmaW5hbGl6YXRpb24oKSBpbnRlcm5hbAogICAgICB7CiAgICAgICAgICB3YWxsZXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgICAgIHN1cGVyLmZpbmFsaXphdGlvbigpOwogICAgICB9CiAgICAgIC8vQGRldiBvdmVycmlkZSBmb3IgZ2V0IGV0aCBvbmx5IGFmdGVyIGZpbmFsaXphdGlvbgogICAgICBmdW5jdGlvbiBfZm9yd2FyZEZ1bmRzKCkgaW50ZXJuYWwgewogICAgICAgICAgICAKICAgICAgfQogICAgICBmdW5jdGlvbiBfZ2V0VG9rZW5BbW91bnQodWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB0b2tlbnMgPSBzdXBlci5fZ2V0VG9rZW5BbW91bnQoX3dlaUFtb3VudCk7CiAgICAgICAgdWludDI1NiBib251cyA9IHRva2Vucy5tdWwoYm9udXNQZXJjZW50KS5kaXYoMTAwKTsKICAgICAgICAKICAgICAgICB0b2tlbnMgPSB0b2tlbnMuYWRkKGJvbnVzKTsKICAgICAgICByZXR1cm4gdG9rZW5zOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBfcHJlVmFsaWRhdGVQdXJjaGFzZShhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbCB7CiAgICAgICAgc3VwZXIuX3ByZVZhbGlkYXRlUHVyY2hhc2UoX2JlbmVmaWNpYXJ5LCBfd2VpQW1vdW50KTsKICAgICAgICByZXF1aXJlKF93ZWlBbW91bnQgPj0gbWluV2VpQW1vdW50KTsKICAgIH0KICAgICAgCiAgICAKfQ=='.
	

]
