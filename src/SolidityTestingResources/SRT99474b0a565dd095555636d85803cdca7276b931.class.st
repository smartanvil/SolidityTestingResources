Class {
	#name : #SRT99474b0a565dd095555636d85803cdca7276b931,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT99474b0a565dd095555636d85803cdca7276b931 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBBY2Nlc3NDb250cm9sIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgYWRkcmVzc1tdIHB1YmxpYyBhZG1pbnM7CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5QWRtaW5zIHsKICAgICAgICBib29sIGZvdW5kID0gZmFsc2U7CgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGFkbWlucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoYWRtaW5zW2ldID09IG1zZy5zZW5kZXIpIHsKICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJlcXVpcmUoZm91bmQpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gYWRkQWRtaW4oYWRkcmVzcyBfYWRtaW5BZGRyZXNzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBhZG1pbnMucHVzaChfYWRtaW5BZGRyZXNzKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIH0KICAgIH0KCn0KCmNvbnRyYWN0IEVSQzcyMSB7CiAgICAvLyBSZXF1aXJlZCBGdW5jdGlvbnMKICAgIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF90b2tlbklkKSBwdWJsaWM7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKCiAgICAvLyBPcHRpb25hbCBGdW5jdGlvbnMKICAgIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcpOwogICAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKTsKICAgIC8vIGZ1bmN0aW9uIHRva2VuT2ZPd25lckJ5SW5kZXgoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX2luZGV4KSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIC8vIGZ1bmN0aW9uIHRva2VuTWV0YWRhdGEodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIGluZm9VcmwpOwoKICAgIC8vIFJlcXVpcmVkIEV2ZW50cwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBpbmRleGVkIHRva2VuSWQpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgYXBwcm92ZWQsIHVpbnQyNTYgaW5kZXhlZCB0b2tlbklkKTsKfQoKCmNvbnRyYWN0IENyeXB0b0xhbmRtYXJrcyBpcyBBY2Nlc3NDb250cm9sLCBFUkM3MjEgewogICAgLy8gRXZlbnQgZmlyZWQgZm9yIGV2ZXJ5IG5ldyBsYW5kbWFyayBjcmVhdGVkCiAgICBldmVudCBDcmVhdGlvbih1aW50MjU2IHRva2VuSWQsIHN0cmluZyBuYW1lLCBhZGRyZXNzIG93bmVyKTsKCiAgICAvLyBFdmVudCBmaXJlZCB3aGVuZXZlciBsYW5kbWFyayBpcyBzb2xkCiAgICBldmVudCBQdXJjaGFzZSh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgb2xkUHJpY2UsIHVpbnQyNTYgbmV3UHJpY2UsIGFkZHJlc3MgcHJldk93bmVyLCBhZGRyZXNzIG93bmVyLCB1aW50MjU2IGNoYXJpdHlJZCk7CgogICAgLy8gRXZlbnQgZmlyZWQgd2hlbiBwcmljZSBvZiBsYW5kbWFyayBjaGFuZ2VzCiAgICBldmVudCBQcmljZUNoYW5nZSh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgcHJpY2UpOwoKICAgIC8vIEV2ZW50IGZpcmVkIHdoZW4gY2hhcml0aWVzIGFyZSBtb2RpZmllZAogICAgZXZlbnQgQ2hhcml0eSh1aW50MjU2IGNoYXJpdHlJZCwgYWRkcmVzcyBjaGFyaXR5KTsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IE5BTUUgPSAiQ3J5cHRvIExhbmRtYXJrcyI7IAogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBTWU1CT0wgPSAiTEFORE1BUksiOyAKCiAgICAvLyBJbml0aWFsIHByaWNlIG9mIGNhcmQKICAgIHVpbnQyNTYgcHJpdmF0ZSBzdGFydGluZ1ByaWNlID0gMC4wMDEgZXRoZXI7CgogICAgLy8gQ2hhcml0aWVzIGVuYWJsZWQgaW4gdGhlIGZ1dHVyZQogICAgYm9vbCBjaGFyaXR5RW5hYmxlZDsKCiAgICAvLyBMYW5kbWFyayBjYXJkCiAgICBzdHJ1Y3QgTGFuZG1hcmsgewogICAgICAgIC8vIHVuaXF1ZSBuYW1lIG9mIGxhbmRtYXJrCiAgICAgICAgc3RyaW5nIG5hbWU7CgogICAgICAgIC8vIHNlbGxpbmcgcHJpY2UKICAgICAgICB1aW50MjU2IHByaWNlOwoKICAgICAgICAvLyBtYXhpbXVtIHByaWNlCiAgICAgICAgdWludDI1NiBtYXhQcmljZTsKICAgIH0KCiAgICBMYW5kbWFya1tdIHB1YmxpYyBsYW5kbWFya3M7CgogICAgYWRkcmVzc1tdIHB1YmxpYyBjaGFyaXRpZXM7CiAgICAKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGxhbmRtYXJrVG9Pd25lcjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGxhbmRtYXJrT3duZXJzaGlwQ291bnQ7CiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBsYW5kbWFya1RvQXBwcm92ZWQ7CgogICAgZnVuY3Rpb24gQ3J5cHRvTGFuZG1hcmtzKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYWRtaW5zLnB1c2gobXNnLnNlbmRlcik7CiAgICAgICAgY2hhcml0eUVuYWJsZWQgPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbXBsZW1lbnRzRVJDNzIxKCkgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBsYW5kbWFya3MubGVuZ3RoOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGxhbmRtYXJrT3duZXJzaGlwQ291bnRbX293bmVyXTsKICAgIH0KICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBvd25lcikgewogICAgICAgIG93bmVyID0gbGFuZG1hcmtUb093bmVyW190b2tlbklkXTsKICAgICAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCkpOwogICAgfQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShsYW5kbWFya1RvT3duZXJbX3Rva2VuSWRdID09IG1zZy5zZW5kZXIpOwoKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobGFuZG1hcmtUb093bmVyW190b2tlbklkXSA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBsYW5kbWFya1RvQXBwcm92ZWRbX3Rva2VuSWRdID0gX3RvOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogICAgfQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobGFuZG1hcmtUb0FwcHJvdmVkW190b2tlbklkXSA9PSBfdG8pOwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUobGFuZG1hcmtUb093bmVyW190b2tlbklkXSA9PSBfZnJvbSk7CgogICAgICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CiAgICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICAgICAgcmV0dXJuIE5BTUU7CiAgICB9CiAgICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsKICAgICAgICByZXR1cm4gU1lNQk9MOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZENoYXJpdHkoYWRkcmVzcyBfY2hhcml0eSkgcHVibGljIG9ubHlBZG1pbnMgewogICAgICAgIHJlcXVpcmUoX2NoYXJpdHkgIT0gYWRkcmVzcygwKSk7CgogICAgICAgIHVpbnQyNTYgbmV3Q2hhcml0eUlkID0gY2hhcml0aWVzLnB1c2goX2NoYXJpdHkpIC0gMTsKCiAgICAgICAgLy8gZW1pdCBjaGFyaXR5IGV2ZW50CiAgICAgICAgQ2hhcml0eShuZXdDaGFyaXR5SWQsIF9jaGFyaXR5KTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxldGVDaGFyaXR5KHVpbnQyNTYgX2NoYXJpdHlJZCkgcHVibGljIG9ubHlBZG1pbnMgewogICAgICAgIGRlbGV0ZSBjaGFyaXRpZXNbX2NoYXJpdHlJZF07CgogICAgICAgIC8vIGVtaXQgY2hhcml0eSBldmVudAogICAgICAgIENoYXJpdHkoX2NoYXJpdHlJZCwgYWRkcmVzcygwKSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Q2hhcml0eSh1aW50MjU2IF9jaGFyaXR5SWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gY2hhcml0aWVzW19jaGFyaXR5SWRdOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZUxhbmRtYXJrKHN0cmluZyBfbmFtZSwgYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3ByaWNlKSBwdWJsaWMgb25seUFkbWlucyB7CiAgICAgICAgaWYgKF9wcmljZSA8PSAwKSB7CiAgICAgICAgICAgIF9wcmljZSA9IHN0YXJ0aW5nUHJpY2U7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIExhbmRtYXJrIG1lbW9yeSBfbGFuZG1hcmsgPSBMYW5kbWFyayh7CiAgICAgICAgICAgIG5hbWU6IF9uYW1lLAogICAgICAgICAgICBwcmljZTogX3ByaWNlLAogICAgICAgICAgICBtYXhQcmljZTogX3ByaWNlCiAgICAgICAgfSk7CiAgICAgICAgdWludDI1NiBuZXdMYW5kbWFya0lkID0gbGFuZG1hcmtzLnB1c2goX2xhbmRtYXJrKSAtIDE7CgogICAgICAgIENyZWF0aW9uKG5ld0xhbmRtYXJrSWQsIF9uYW1lLCBfb3duZXIpOwoKICAgICAgICBfdHJhbnNmZXIoYWRkcmVzcygwKSwgX293bmVyLCBuZXdMYW5kbWFya0lkKTsKCgogICAgfQoKICAgIGZ1bmN0aW9uIGdldExhbmRtYXJrKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKAogICAgICAgIHN0cmluZyBsYW5kbWFya05hbWUsCiAgICAgICAgdWludDI1NiBzZWxsaW5nUHJpY2UsCiAgICAgICAgdWludDI1NiBtYXhQcmljZSwKICAgICAgICBhZGRyZXNzIG93bmVyCiAgICApIHsKICAgICAgICBMYW5kbWFyayBzdG9yYWdlIGxhbmRtYXJrID0gbGFuZG1hcmtzW190b2tlbklkXTsKICAgICAgICBsYW5kbWFya05hbWUgPSBsYW5kbWFyay5uYW1lOwogICAgICAgIHNlbGxpbmdQcmljZSA9IGxhbmRtYXJrLnByaWNlOwogICAgICAgIG1heFByaWNlID0gbGFuZG1hcmsubWF4UHJpY2U7CiAgICAgICAgb3duZXIgPSBsYW5kbWFya1RvT3duZXJbX3Rva2VuSWRdOwogICAgfQoKICAgIGZ1bmN0aW9uIHB1cmNoYXNlKHVpbnQyNTYgX3Rva2VuSWQsIHVpbnQyNTYgX2NoYXJpdHlJZCkgcHVibGljIHBheWFibGUgewogICAgICAgIC8vIHNlbGxlcgogICAgICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBsYW5kbWFya1RvT3duZXJbX3Rva2VuSWRdOwogICAgICAgIC8vIGN1cnJlbnQgcHJpY2UKICAgICAgICB1aW50IHNlbGxpbmdQcmljZSA9IGxhbmRtYXJrc1tfdG9rZW5JZF0ucHJpY2U7CiAgICAgICAgLy8gYnV5ZXIKICAgICAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICAKICAgICAgICAKICAgICAgICByZXF1aXJlKG9sZE93bmVyICE9IG5ld093bmVyKTsKICAgICAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHNlbGxpbmdQcmljZSk7CgogICAgICAgIHVpbnQyNTYgcGF5bWVudCA9IHVpbnQyNTYoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsaW5nUHJpY2UsIDk1KSwgMTAwKSk7CiAgICAgICAgdWludDI1NiBleGNlc3MgPSBTYWZlTWF0aC5zdWIobXNnLnZhbHVlLCBzZWxsaW5nUHJpY2UpOwoKICAgICAgICBpZiAoY2hhcml0eUVuYWJsZWQgPT0gdHJ1ZSkgewogICAgICAgICAgICAKICAgICAgICAgICAgLy8gYWRkcmVzcyBvZiBjaG9vc2VuIGNoYXJpdHkKICAgICAgICAgICAgYWRkcmVzcyBjaGFyaXR5ID0gY2hhcml0aWVzW19jaGFyaXR5SWRdOwoKICAgICAgICAgICAgLy8gY2hlY2sgaWYgY2hhcml0eSBhZGRyZXNzIGlzIG5vdCBudWxsCiAgICAgICAgICAgIHJlcXVpcmUoY2hhcml0eSAhPSBhZGRyZXNzKDApKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIDElIG9mIHNlbGxpbmcgcHJpY2UKICAgICAgICAgICAgdWludDI1NiBkb25hdGUgPSB1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCAxKSwgMTAwKSk7CgogICAgICAgICAgICAvLyB0cmFuc2ZlciBtb25leSB0byBjaGFyaXR5CiAgICAgICAgICAgIGNoYXJpdHkudHJhbnNmZXIoZG9uYXRlKTsKICAgICAgICAgICAgCiAgICAgICAgfQoKICAgICAgICB1aW50IHByaWNlSW5jcmVhc2UgPSAxMjA7CgogICAgICAgIC8vIHByaWNlIGRvdWJsZXMgYmVsb3cgMzIgZmlubmV5CiAgICAgICAgaWYgKHNlbGxpbmdQcmljZSA8PSAzMiBmaW5uZXkpIHsKICAgICAgICAgICAgcHJpY2VJbmNyZWFzZSA9IDIwMDsKICAgICAgICB9CgogICAgICAgIC8vIHNldCBuZXcgcHJpY2UKICAgICAgICBsYW5kbWFya3NbX3Rva2VuSWRdLnByaWNlID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsaW5nUHJpY2UsIHByaWNlSW5jcmVhc2UpLCA5NSk7CiAgICAgICAgCiAgICAgICAgLy8gc2V0IG1heGltdW0gcHJpY2UKICAgICAgICBsYW5kbWFya3NbX3Rva2VuSWRdLm1heFByaWNlID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsaW5nUHJpY2UsIHByaWNlSW5jcmVhc2UpLCA5NSk7CgogICAgICAgIC8vIHRyYW5zZmVyIGNhcmQgdG8gYnV5ZXIKICAgICAgICBfdHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfdG9rZW5JZCk7CgogICAgICAgIC8vIHRyYW5zZmVyIG1vbmV5IHRvIHNlbGxlcgogICAgICAgIGlmIChvbGRPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgICAgICAgIG9sZE93bmVyLnRyYW5zZmVyKHBheW1lbnQpOwogICAgICAgIH0KCiAgICAgICAgLy8gZW1pdCBldmVudCB0aGF0IGxhbmRhbXJrIHdhcyBzb2xkOwogICAgICAgIFB1cmNoYXNlKF90b2tlbklkLCBzZWxsaW5nUHJpY2UsIGxhbmRtYXJrc1tfdG9rZW5JZF0ucHJpY2UsIG9sZE93bmVyLCBuZXdPd25lciwgX2NoYXJpdHlJZCk7CiAgICAgICAgCgogICAgICAgIC8vIHRyYW5zZmVyIGV4Y2VzcyBiYWNrIHRvIGJ1eWVyCiAgICAgICAgbmV3T3duZXIudHJhbnNmZXIoZXhjZXNzKTsKICAgIH0KCiAgICAvLyBvd25lciBjYW4gY2hhbmdlIHByaWNlCiAgICBmdW5jdGlvbiBjaGFuZ2VQcmljZSh1aW50MjU2IF90b2tlbklkLCB1aW50MjU2IF9wcmljZSkgcHVibGljIHsKICAgICAgICAvLyBvbmx5IG93bmVyIGNhbiBjaGFuZ2UgcHJpY2UKICAgICAgICByZXF1aXJlKGxhbmRtYXJrVG9Pd25lcltfdG9rZW5JZF0gPT0gbXNnLnNlbmRlcik7CgogICAgICAgIC8vIHByaWNlIGNhbm5vdCBiZSBoaWdoZXIgdGhhbiBtYXhpbXVtIHByaWNlCiAgICAgICAgcmVxdWlyZShsYW5kbWFya3NbX3Rva2VuSWRdLm1heFByaWNlID49IF9wcmljZSk7CgogICAgICAgIC8vIHNldCBuZXcgcHJpY2UKICAgICAgICBsYW5kbWFya3NbX3Rva2VuSWRdLnByaWNlID0gX3ByaWNlOwogICAgICAgIAogICAgICAgIC8vIGVtaXQgZXZlbnQKICAgICAgICBQcmljZUNoYW5nZShfdG9rZW5JZCwgX3ByaWNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmljZU9mTGFuZG1hcmsodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBsYW5kbWFya3NbX3Rva2VuSWRdLnByaWNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRva2Vuc09mT3duZXIoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NltdKSB7CiAgICAgICAgdWludDI1NiB0b2tlbkNvdW50ID0gYmFsYW5jZU9mKF9vd25lcik7CgogICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXSh0b2tlbkNvdW50KTsKICAgICAgICB1aW50MjU2IHRvdGFsID0gdG90YWxTdXBwbHkoKTsKICAgICAgICB1aW50MjU2IHJlc3VsdEluZGV4ID0gMDsKCiAgICAgICAgZm9yKHVpbnQyNTYgaSA9IDA7IGkgPD0gdG90YWw7IGkrKykgewogICAgICAgICAgICBpZiAobGFuZG1hcmtUb093bmVyW2ldID09IF9vd25lcikgewogICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdEluZGV4XSA9IGk7CiAgICAgICAgICAgICAgICByZXN1bHRJbmRleCsrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgoKICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICAgICAgbGFuZG1hcmtPd25lcnNoaXBDb3VudFtfdG9dKys7CiAgICAgICAgbGFuZG1hcmtUb093bmVyW190b2tlbklkXSA9IF90bzsKCiAgICAgICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgbGFuZG1hcmtPd25lcnNoaXBDb3VudFtfZnJvbV0tLTsKICAgICAgICAgICAgZGVsZXRlIGxhbmRtYXJrVG9BcHByb3ZlZFtfdG9rZW5JZF07CiAgICAgICAgfQogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBlbmFibGVDaGFyaXR5KCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKCFjaGFyaXR5RW5hYmxlZCk7CiAgICAgICAgY2hhcml0eUVuYWJsZWQgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpc2FibGVDaGFyaXR5KCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGNoYXJpdHlFbmFibGVkKTsKICAgICAgICBjaGFyaXR5RW5hYmxlZCA9IGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3QmFsYW5jZSgpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KCn0KCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQ=='.
	

]
