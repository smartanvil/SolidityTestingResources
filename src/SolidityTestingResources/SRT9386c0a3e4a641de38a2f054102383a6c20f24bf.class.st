Class {
	#name : #SRT9386c0a3e4a641de38a2f054102383a6c20f24bf,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9386c0a3e4a641de38a2f054102383a6c20f24bf >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBPd25hYmxlIHsKCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICAvKioKICAgICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAgICogYWNjb3VudC4KICAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCiAgICBhZGRyZXNzIG5ld093bmVyOwogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKF9uZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIG5ld093bmVyID0gX25ld093bmVyOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpIHsKICAgICAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IHRva2VuUmVjaXBpZW50IHsgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90b2tlbiwgYnl0ZXMgX2V4dHJhRGF0YSk7IH0KCmNvbnRyYWN0IEVSQzIwIGlzIE93bmFibGUgewogICAgLyogUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gKi8KICAgIHN0cmluZyBwdWJsaWMgc3RhbmRhcmQ7CgogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwoKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwoKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsKCiAgICB1aW50MjU2IHB1YmxpYyBpbml0aWFsU3VwcGx5OwoKICAgIGJvb2wgcHVibGljIGxvY2tlZDsKCiAgICB1aW50MjU2IHB1YmxpYyBjcmVhdGlvbkJsb2NrOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VzOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93YW5jZTsKCiAgICAvKiBUaGlzIGdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMgKi8KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICAgIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IG51bXdvcmRzKSB7CiAgICAgICAgYXNzZXJ0KG1zZy5kYXRhLmxlbmd0aCA9PSBudW13b3JkcyAqIDMyICsgNCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QgKi8KICAgIGZ1bmN0aW9uIEVSQzIwKAogICAgdWludDI1NiBfaW5pdGlhbFN1cHBseSwKICAgIHN0cmluZyB0b2tlbk5hbWUsCiAgICB1aW50OCBkZWNpbWFsVW5pdHMsCiAgICBzdHJpbmcgdG9rZW5TeW1ib2wsCiAgICBib29sIHRyYW5zZmVyQWxsU3VwcGx5VG9Pd25lciwKICAgIGJvb2wgX2xvY2tlZAogICAgKSB7CiAgICAgICAgc3RhbmRhcmQgPSAnRVJDMjAgMC4xJzsKCiAgICAgICAgaW5pdGlhbFN1cHBseSA9IF9pbml0aWFsU3VwcGx5OwoKICAgICAgICBpZiAodHJhbnNmZXJBbGxTdXBwbHlUb093bmVyKSB7CiAgICAgICAgICAgIHNldEJhbGFuY2UobXNnLnNlbmRlciwgaW5pdGlhbFN1cHBseSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBzZXRCYWxhbmNlKHRoaXMsIGluaXRpYWxTdXBwbHkpOwogICAgICAgIH0KCiAgICAgICAgbmFtZSA9IHRva2VuTmFtZTsKICAgICAgICAvLyBTZXQgdGhlIG5hbWUgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgICAgICBzeW1ib2wgPSB0b2tlblN5bWJvbDsKICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIGRlY2ltYWxzID0gZGVjaW1hbFVuaXRzOwogICAgICAgIC8vIEFtb3VudCBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIGxvY2tlZCA9IF9sb2NrZWQ7CiAgICAgICAgY3JlYXRpb25CbG9jayA9IGJsb2NrLm51bWJlcjsKICAgIH0KCiAgICAvKiBpbnRlcm5hbCBiYWxhbmNlcyAqLwoKICAgIGZ1bmN0aW9uIHNldEJhbGFuY2UoYWRkcmVzcyBob2xkZXIsIHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB7CiAgICAgICAgYmFsYW5jZXNbaG9sZGVyXSA9IGFtb3VudDsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckludGVybmFsKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IHZhbHVlKSBpbnRlcm5hbCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAodmFsdWUgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPCB2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAoYmFsYW5jZXNbX3RvXSArIHZhbHVlIDw9IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgc2V0QmFsYW5jZShfZnJvbSwgYmFsYW5jZXNbX2Zyb21dIC0gdmFsdWUpOwogICAgICAgIHNldEJhbGFuY2UoX3RvLCBiYWxhbmNlc1tfdG9dICsgdmFsdWUpOwoKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCB2YWx1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qIHB1YmxpYyBtZXRob2RzICovCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gaW5pdGlhbFN1cHBseTsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfYWRkcmVzcykgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfYWRkcmVzc107CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMikgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUobG9ja2VkID09IGZhbHNlKTsKCiAgICAgICAgYm9vbCBzdGF0dXMgPSB0cmFuc2ZlckludGVybmFsKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKCiAgICAgICAgcmVxdWlyZShzdGF0dXMgPT0gdHJ1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmKGxvY2tlZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGxvY2tlZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB0b2tlblJlY2lwaWVudCBzcGVuZGVyID0gdG9rZW5SZWNpcGllbnQoX3NwZW5kZXIpOwoKICAgICAgICBpZiAoYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgewogICAgICAgICAgICBzcGVuZGVyLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGxvY2tlZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAoYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSA8IF92YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBib29sIF9zdWNjZXNzID0gdHJhbnNmZXJJbnRlcm5hbChfZnJvbSwgX3RvLCBfdmFsdWUpOwoKICAgICAgICBpZiAoX3N1Y2Nlc3MpIHsKICAgICAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gX3N1Y2Nlc3M7CiAgICB9Cgp9Cgpjb250cmFjdCBNaW50aW5nRVJDMjAgaXMgRVJDMjAgewoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIG1pbnRlcnM7CgogICAgdWludDI1NiBwdWJsaWMgbWF4U3VwcGx5OwoKICAgIGZ1bmN0aW9uIE1pbnRpbmdFUkMyMCgKICAgIHVpbnQyNTYgX2luaXRpYWxTdXBwbHksCiAgICB1aW50MjU2IF9tYXhTdXBwbHksCiAgICBzdHJpbmcgX3Rva2VuTmFtZSwKICAgIHVpbnQ4IF9kZWNpbWFscywKICAgIHN0cmluZyBfc3ltYm9sLAogICAgYm9vbCBfdHJhbnNmZXJBbGxTdXBwbHlUb093bmVyLAogICAgYm9vbCBfbG9ja2VkCiAgICApCiAgICBFUkMyMChfaW5pdGlhbFN1cHBseSwgX3Rva2VuTmFtZSwgX2RlY2ltYWxzLCBfc3ltYm9sLCBfdHJhbnNmZXJBbGxTdXBwbHlUb093bmVyLCBfbG9ja2VkKQoKICAgIHsKICAgICAgICBzdGFuZGFyZCA9ICJNaW50aW5nRVJDMjAgMC4xIjsKICAgICAgICBtaW50ZXJzW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgICBtYXhTdXBwbHkgPSBfbWF4U3VwcGx5OwogICAgfQoKCiAgICBmdW5jdGlvbiBhZGRNaW50ZXIoYWRkcmVzcyBfbmV3TWludGVyKSBvbmx5T3duZXIgewogICAgICAgIG1pbnRlcnNbX25ld01pbnRlcl0gPSB0cnVlOwogICAgfQoKCiAgICBmdW5jdGlvbiByZW1vdmVNaW50ZXIoYWRkcmVzcyBfbWludGVyKSBvbmx5T3duZXIgewogICAgICAgIG1pbnRlcnNbX21pbnRlcl0gPSBmYWxzZTsKICAgIH0KCgogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF9hZGRyLCB1aW50MjU2IF9hbW91bnQpIG9ubHlNaW50ZXJzIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAobG9ja2VkID09IHRydWUpIHsKICAgICAgICAgICAgcmV0dXJuIHVpbnQyNTYoMCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoX2Ftb3VudCA9PSB1aW50MjU2KDApKSB7CiAgICAgICAgICAgIHJldHVybiB1aW50MjU2KDApOwogICAgICAgIH0KICAgICAgICBpZiAoaW5pdGlhbFN1cHBseSArIF9hbW91bnQgPD0gaW5pdGlhbFN1cHBseSl7CiAgICAgICAgICAgIHJldHVybiB1aW50MjU2KDApOwogICAgICAgIH0KICAgICAgICBpZiAoaW5pdGlhbFN1cHBseSArIF9hbW91bnQgPiBtYXhTdXBwbHkpIHsKICAgICAgICAgICAgcmV0dXJuIHVpbnQyNTYoMCk7CiAgICAgICAgfQoKICAgICAgICBpbml0aWFsU3VwcGx5ICs9IF9hbW91bnQ7CiAgICAgICAgYmFsYW5jZXNbX2FkZHJdICs9IF9hbW91bnQ7CiAgICAgICAgVHJhbnNmZXIodGhpcywgX2FkZHIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiBfYW1vdW50OwogICAgfQoKCiAgICBtb2RpZmllciBvbmx5TWludGVycyAoKSB7CiAgICAgICAgcmVxdWlyZSh0cnVlID09IG1pbnRlcnNbbXNnLnNlbmRlcl0pOwogICAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IExhbWRlbiBpcyBNaW50aW5nRVJDMjAgewoKCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKCiAgICBzdHJpbmcgcHVibGljIHRva2VuTmFtZSA9ICJMYW1kZW4gVGF1IjsKCiAgICBzdHJpbmcgcHVibGljIHRva2VuU3ltYm9sID0gIlRBVSI7CgogICAgdWludDI1NiBwdWJsaWMgIG1heFN1cHBseSA9IDUwMCAqIDEwICoqIDYgKiB1aW50KDEwKSAqKiBkZWNpbWFsczsgLy8gNTAwLDAwMCwwMDAKCiAgICAvLyBXZSBibG9jayB0b2tlbiB0cmFuc2ZlcnMgdGlsbCBJQ08gZW5kLgogICAgYm9vbCBwdWJsaWMgdHJhbnNmZXJGcm96ZW4gPSB0cnVlOwoKICAgIGZ1bmN0aW9uIExhbWRlbigKICAgIHVpbnQyNTYgaW5pdGlhbFN1cHBseSwKICAgIGJvb2wgX2xvY2tlZAogICAgKSBNaW50aW5nRVJDMjAoaW5pdGlhbFN1cHBseSwgbWF4U3VwcGx5LCB0b2tlbk5hbWUsIGRlY2ltYWxzLCB0b2tlblN5bWJvbCwgZmFsc2UsIF9sb2NrZWQpIHsKICAgICAgICBzdGFuZGFyZCA9ICdMYW1kZW4gMC4xJzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRMb2NrZWQoYm9vbCBfbG9ja2VkKSBvbmx5T3duZXIgewogICAgICAgIGxvY2tlZCA9IF9sb2NrZWQ7CiAgICB9CgogICAgLy8gQWxsb3cgdG9rZW4gdHJhbnNmZXIuCiAgICBmdW5jdGlvbiBmcmVlemluZyhib29sIF90cmFuc2ZlckZyb3plbikgb25seU93bmVyIHsKICAgICAgICB0cmFuc2ZlckZyb3plbiA9IF90cmFuc2ZlckZyb3plbjsKICAgIH0KCiAgICAvLyBFUkMyMCBmdW5jdGlvbnMKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKCF0cmFuc2ZlckZyb3plbik7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKCiAgICB9CgogICAgLy8gc2hvdWxkICBub3QgaGF2ZSBhcHByb3ZlL3RyYW5zZmVyRnJvbQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzLCB1aW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpICB7CiAgICAgICAgcmVxdWlyZShmYWxzZSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIC8vICAgICAgICBzdXBlci5hcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MsIHVpbnQyNTYsIGJ5dGVzKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGZhbHNlKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MsIGFkZHJlc3MsIHVpbnQpICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGZhbHNlKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgLy8gICAgICAgIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQp9Cgpjb250cmFjdCBMYW1kZW5Ub2tlbkFsbG9jYXRpb24gaXMgT3duYWJsZSB7CgogICAgTGFtZGVuIHB1YmxpYyB0YXU7CgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgTEFNREVOX0RFQ0lNQUxTID0gMTAgKiogMTg7CgogICAgdWludDI1NiBhbGxvY2F0ZWRUb2tlbnMgPSAwOwoKICAgIEFsbG9jYXRpb25bXSBhbGxvY2F0aW9uczsKCiAgICBzdHJ1Y3QgQWxsb2NhdGlvbiB7CiAgICBhZGRyZXNzIF9hZGRyZXNzOwogICAgdWludDI1NiBhbW91bnQ7CiAgICB9CgoKICAgIGZ1bmN0aW9uIExhbWRlblRva2VuQWxsb2NhdGlvbigKICAgIGFkZHJlc3MgX3RhdSwKICAgIGFkZHJlc3NbXSBhZGRyZXNzZXMKICAgICl7CiAgICAgICAgcmVxdWlyZSh1aW50OChhZGRyZXNzZXMubGVuZ3RoKSA9PSB1aW50OCgxNCkpOwogICAgICAgIGFsbG9jYXRpb25zLnB1c2goQWxsb2NhdGlvbihhZGRyZXNzZXNbMF0sIDIwMDAwMDAwICogTEFNREVOX0RFQ0lNQUxTKSk7IC8vU3R1CiAgICAgICAgYWxsb2NhdGlvbnMucHVzaChBbGxvY2F0aW9uKGFkZHJlc3Nlc1sxXSwgMTI1MDAwMDAgKiBMQU1ERU5fREVDSU1BTFMpKTsgLy9OaWNrCiAgICAgICAgYWxsb2NhdGlvbnMucHVzaChBbGxvY2F0aW9uKGFkZHJlc3Nlc1syXSwgODc1MDAwMCAqIExBTURFTl9ERUNJTUFMUykpOyAvL0phbWVzCiAgICAgICAgYWxsb2NhdGlvbnMucHVzaChBbGxvY2F0aW9uKGFkZHJlc3Nlc1szXSwgODc1MDAwMCAqIExBTURFTl9ERUNJTUFMUykpOyAvL01hcmlvCiAgICAgICAgYWxsb2NhdGlvbnMucHVzaChBbGxvY2F0aW9uKGFkZHJlc3Nlc1s0XSwgMjUwMDAwICogTEFNREVOX0RFQ0lNQUxTKSk7ICAgICAvLyBBZHZpc29yCiAgICAgICAgYWxsb2NhdGlvbnMucHVzaChBbGxvY2F0aW9uKGFkZHJlc3Nlc1s1XSwgMjUwMDAwICogTEFNREVOX0RFQ0lNQUxTKSk7ICAvLyBBZHZpc29yCiAgICAgICAgYWxsb2NhdGlvbnMucHVzaChBbGxvY2F0aW9uKGFkZHJlc3Nlc1s2XSwgMjUwMDAwICogTEFNREVOX0RFQ0lNQUxTKSk7ICAvLyBBZHZpc29yCiAgICAgICAgYWxsb2NhdGlvbnMucHVzaChBbGxvY2F0aW9uKGFkZHJlc3Nlc1s3XSwgMjUwMDAwICogTEFNREVOX0RFQ0lNQUxTKSk7ICAvLyBBZHZpc29yCiAgICAgICAgYWxsb2NhdGlvbnMucHVzaChBbGxvY2F0aW9uKGFkZHJlc3Nlc1s4XSwgMjUwMDAwICogTEFNREVOX0RFQ0lNQUxTKSk7ICAvLyBBZHZpc29yCiAgICAgICAgYWxsb2NhdGlvbnMucHVzaChBbGxvY2F0aW9uKGFkZHJlc3Nlc1s5XSwgMjUwMDAwICogTEFNREVOX0RFQ0lNQUxTKSk7ICAvLyBBZHZpc29yCiAgICAgICAgYWxsb2NhdGlvbnMucHVzaChBbGxvY2F0aW9uKGFkZHJlc3Nlc1sxMF0sIDI1MDAwMCAqIExBTURFTl9ERUNJTUFMUykpOyAgLy8gQWR2aXNvcgogICAgICAgIGFsbG9jYXRpb25zLnB1c2goQWxsb2NhdGlvbihhZGRyZXNzZXNbMTFdLCAyNTAwMDAgKiBMQU1ERU5fREVDSU1BTFMpKTsgIC8vIEFkdmlzb3IKICAgICAgICBhbGxvY2F0aW9ucy5wdXNoKEFsbG9jYXRpb24oYWRkcmVzc2VzWzEyXSwgNDgwMDAwMDAgKiBMQU1ERU5fREVDSU1BTFMpKTsgIC8vIGVudGVycHJpc2VDYXNlU3R1ZGllcwogICAgICAgIGFsbG9jYXRpb25zLnB1c2goQWxsb2NhdGlvbihhZGRyZXNzZXNbMTNdLCA1MDAwMDAwMCAgKiBMQU1ERU5fREVDSU1BTFMpKTsgIC8vIEFLQSBJTk5PVkFUSU9OIEZVTkQKICAgICAgICB0YXUgPSBMYW1kZW4oX3RhdSk7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb2NhdGVUb2tlbnMoKXsKICAgICAgICByZXF1aXJlKHVpbnQ4KGFsbG9jYXRpb25zLmxlbmd0aCkgPT0gdWludDgoMTQpKTsKICAgICAgICByZXF1aXJlKGFkZHJlc3ModGF1KSAhPSAweDApOwogICAgICAgIHJlcXVpcmUoYWxsb2NhdGVkVG9rZW5zID09IDApOwogICAgICAgIGZvciAodWludDggaSA9IDA7IGkgPCBhbGxvY2F0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBBbGxvY2F0aW9uIHN0b3JhZ2UgYWxsb2NhdGlvbiA9IGFsbG9jYXRpb25zW2ldOwogICAgICAgICAgICB1aW50MjU2IG1pbnRlZEFtb3VudCA9IHRhdS5taW50KGFsbG9jYXRpb24uX2FkZHJlc3MsIGFsbG9jYXRpb24uYW1vdW50KTsKICAgICAgICAgICAgcmVxdWlyZShtaW50ZWRBbW91bnQgPT0gYWxsb2NhdGlvbi5hbW91bnQpOwogICAgICAgICAgICBhbGxvY2F0ZWRUb2tlbnMgKz0gYWxsb2NhdGlvbi5hbW91bnQ7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldFRhdShhZGRyZXNzIF90YXUpIG9ubHlPd25lciB7CiAgICAgICAgdGF1ID0gTGFtZGVuKF90YXUpOwogICAgfQp9CgoKY29udHJhY3QgTGFtZGVuUGhhc2VzIGlzIE93bmFibGUgewoKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IExBTURFTl9ERUNJTUFMUyA9IDEwICoqIDE4OwoKICAgIHVpbnQyNTYgcHVibGljIHNvbGRUb2tlbnM7CgogICAgdWludDI1NiBwdWJsaWMgY29sbGVjdGVkRXRoZXJzOwoKICAgIHVpbnQyNTYgdG9kYXlDb2xsZWN0ZWRFdGhlcnM7CgogICAgdWludDI1NiBpY29Jbml0aWFsVGhyZXNob2xkczsKCiAgICB1aW50MjU2IGN1cnJlbnREYXk7CgogICAgUGhhc2VbXSBwdWJsaWMgcGhhc2VzOwoKICAgIExhbWRlbiBwdWJsaWMgdGF1OwoKICAgIHVpbnQ4IGN1cnJlbnRQaGFzZTsKCiAgICBhZGRyZXNzIGV0aGVySG9sZGVyOwoKICAgIGFkZHJlc3MgaW52ZXN0b3IgPSAweDM2NjlhZDU0Njc1RTk0ZTE0MTk2NTI4Nzg2NjQ1Yzg1OGI4MzkxRjE7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGFscmVhZHlDb250cmlidXRlZDsKCiAgICBzdHJ1Y3QgUGhhc2UgewogICAgdWludDI1NiBwcmljZTsKICAgIHVpbnQyNTYgbWF4QW1vdW50OwogICAgdWludDI1NiBzaW5jZTsKICAgIHVpbnQyNTYgdGlsbDsKICAgIHVpbnQyNTYgc29sZFRva2VuczsKICAgIHVpbnQyNTYgY29sbGVjdGVkRXRoZXJzOwogICAgYm9vbCBpc0ZpbmlzaGVkOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSB3aGl0ZWxpc3Q7CiAgICB9CgogICAgZnVuY3Rpb24gTGFtZGVuUGhhc2VzKAogICAgYWRkcmVzcyBfZXRoZXJIb2xkZXIsCiAgICBhZGRyZXNzIF90YXUsCiAgICB1aW50MjU2IF90b2tlblByZUljb1ByaWNlLAogICAgdWludDI1NiBfcHJlSWNvU2luY2UsCiAgICB1aW50MjU2IF9wcmVJY29UaWxsLAogICAgdWludDI1NiBwcmVJY29NYXhBbW91bnQsIC8vIDEsODA1LDA2Ny4wMTMyNjExNCArICAgNTMsMjgwLDA5MAogICAgdWludDI1NiBfdG9rZW5JY29QcmljZSwKICAgIHVpbnQyNTYgX2ljb1NpbmNlLAogICAgdWludDI1NiBfaWNvVGlsbCwKICAgIHVpbnQyNTYgaWNvTWF4QW1vdW50LAogICAgdWludDI1NiBpY29UaHJlc2hvbGRzCiAgICApCiAgICB7CiAgICAgICAgcGhhc2VzLnB1c2goUGhhc2UoX3Rva2VuUHJlSWNvUHJpY2UsIHByZUljb01heEFtb3VudCwgX3ByZUljb1NpbmNlLCBfcHJlSWNvVGlsbCwgMCwgMCwgZmFsc2UpKTsKICAgICAgICBwaGFzZXMucHVzaChQaGFzZShfdG9rZW5JY29QcmljZSwgaWNvTWF4QW1vdW50LCBfaWNvU2luY2UsIF9pY29UaWxsLCAwLCAwLCBmYWxzZSkpOwogICAgICAgIGV0aGVySG9sZGVyID0gX2V0aGVySG9sZGVyOwogICAgICAgIGljb0luaXRpYWxUaHJlc2hvbGRzID0gaWNvVGhyZXNob2xkczsKICAgICAgICB0YXUgPSBMYW1kZW4oX3RhdSk7CiAgICB9CgogICAgLy8gY2FsbCBhZGQgbWludGVyIGZyb20gVEFVIHRva2VuIGFmdGVyIGNvbnRyYWN0IGRlcGxveWluZwogICAgZnVuY3Rpb24gc2VuZFRva2Vuc1RvSW52ZXN0b3IoKSBvbmx5T3duZXIgewogICAgICAgIHVpbnQyNTYgbWludGVkQW1vdW50ID0gbWludEludGVybmFsKGludmVzdG9yLCAoMTgwNTA2NzAxMzI2MTE0MDAwMDAwMDAwMCkpOwogICAgICAgIHJlcXVpcmUobWludGVkQW1vdW50ID09IHVpbnQyNTYoMTgwNTA2NzAxMzI2MTE0MDAwMDAwMDAwMCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEljb1Rva2Vuc0Ftb3VudCh1aW50MjU2IHZhbHVlLCB1aW50MjU2IHRpbWUsIGFkZHJlc3MgX2FkZHJlc3MpIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAodmFsdWUgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gdWludDI1NigwKTsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBhbW91bnQgPSAwOwoKICAgICAgICBmb3IgKHVpbnQ4IGkgPSAwOyBpIDwgcGhhc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIFBoYXNlIHN0b3JhZ2UgcGhhc2UgPSBwaGFzZXNbaV07CgogICAgICAgICAgICBpZiAocGhhc2Uud2hpdGVsaXN0W19hZGRyZXNzXSA9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCQkJCQkJCiAgICAgICAgICAgIGlmKHBoYXNlLmlzRmluaXNoZWQpewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChwaGFzZS5zaW5jZSA+IHRpbWUpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocGhhc2UudGlsbCA8IHRpbWUpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGN1cnJlbnRQaGFzZSA9IGk7CgogICAgICAgICAgICAvLyBzaG91bGQgd2UgYmUgbXVsdGlwbHlpbmcgYnkgMTAgKiogMTg/Pz8KICAgICAgICAgICAgLy8gMSBldGggPSAxMDAwMDAwMDAwMDAwMDAwMDAwIC8gCiAgICAgICAgICAgIHVpbnQyNTYgcGhhc2VBbW91bnQgPSB2YWx1ZSAqIExBTURFTl9ERUNJTUFMUyAvIHBoYXNlLnByaWNlOwogICAgICAgICAgICAKICAgICAgICAgICAgYW1vdW50ICs9IHBoYXNlQW1vdW50OwoKICAgICAgICAgICAgaWYgKHBoYXNlLm1heEFtb3VudCA8IGFtb3VudCArIHNvbGRUb2tlbnMpIHsKICAgICAgICAgICAgICAgIHJldHVybiB1aW50MjU2KDApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vICAgICAgICAgICAgcGhhc2Uuc29sZFRva2VucyArPSBhbW91bnQ7CiAgICAgICAgICAgIHBoYXNlLmNvbGxlY3RlZEV0aGVycyArPSB2YWx1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFtb3VudDsKICAgIH0KCiAgICBmdW5jdGlvbigpIHBheWFibGUgewogICAgICAgIGJvb2wgc3RhdHVzID0gYnV5KG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICAgICAgcmVxdWlyZShzdGF0dXMgPT0gdHJ1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0SW50ZXJuYWxGaW5pc2hlZCh1aW50OCBwaGFzZUlkLCBib29sIF9maW5pc2hlZCkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCl7CiAgICAgICAgaWYgKHBoYXNlcy5sZW5ndGggPCBwaGFzZUlkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIFBoYXNlIHN0b3JhZ2UgcGhhc2UgPSBwaGFzZXNbcGhhc2VJZF07CgogICAgICAgIGlmIChwaGFzZS5pc0ZpbmlzaGVkID09IHRydWUpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBwaGFzZS5pc0ZpbmlzaGVkID0gX2ZpbmlzaGVkOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRGaW5pc2hlZCh1aW50OCBwaGFzZUlkLCBib29sIF9maW5pc2hlZCkgb25seU93bmVyIHJldHVybnMgKGJvb2wpewogICAgICAgIHJldHVybiBzZXRJbnRlcm5hbEZpbmlzaGVkKHBoYXNlSWQsIF9maW5pc2hlZCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgX3ZhbHVlKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKF92YWx1ZSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmIChwaGFzZXMubGVuZ3RoIDwgY3VycmVudFBoYXNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgUGhhc2Ugc3RvcmFnZSBpY29QaGFzZSA9IHBoYXNlc1sxXTsKCiAgICAgICAgaWYgKGljb1BoYXNlLnNpbmNlIDw9IG5vdykgewoKICAgICAgICAgICAgY3VycmVudFBoYXNlID0gMTsKICAgICAgICAgICAgdWludDI1NiBkYXlzSW50ZXJ2YWwgPSAobm93IC0gaWNvUGhhc2Uuc2luY2UpIC8gdWludDI1Nig4NjQwMCk7CiAgICAgICAgICAgIHVpbnQyNTYgdG9kYXlNYXhFdGhlcnMgPSBpY29Jbml0aWFsVGhyZXNob2xkczsKCiAgICAgICAgICAgIGlmIChkYXlzSW50ZXJ2YWwgIT0gY3VycmVudERheSkgewogICAgICAgICAgICAgICAgY3VycmVudERheSA9IGRheXNJbnRlcnZhbDsKICAgICAgICAgICAgICAgIHRvZGF5Q29sbGVjdGVkRXRoZXJzID0gMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdG9kYXlNYXhFdGhlcnMgPSBpY29Jbml0aWFsVGhyZXNob2xkcyAqICgyICoqIGRheXNJbnRlcnZhbCk7CgogICAgICAgICAgICBpZihhbHJlYWR5Q29udHJpYnV0ZWRbX2FkZHJlc3NdICsgX3ZhbHVlID4gdG9kYXlNYXhFdGhlcnMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYWxyZWFkeUNvbnRyaWJ1dGVkW19hZGRyZXNzXSArPSBfdmFsdWU7CiAgICAgICAgfQoKICAgICAgICB1aW50MjU2IHRva2VuQW1vdW50ID0gZ2V0SWNvVG9rZW5zQW1vdW50KF92YWx1ZSwgbm93LCBfYWRkcmVzcyk7CgogICAgICAgIGlmICh0b2tlbkFtb3VudCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHVpbnQyNTYgbWludGVkQW1vdW50ID0gbWludEludGVybmFsKF9hZGRyZXNzLCB0b2tlbkFtb3VudCk7CiAgICAgICAgcmVxdWlyZShtaW50ZWRBbW91bnQgPT0gdG9rZW5BbW91bnQpOwoKICAgICAgICBjb2xsZWN0ZWRFdGhlcnMgKz0gX3ZhbHVlOwoKICAgICAgICBQaGFzZSBzdG9yYWdlIHBoYXNlID0gcGhhc2VzW2N1cnJlbnRQaGFzZV07CiAgICAgICAgaWYgKHNvbGRUb2tlbnMgPT0gcGhhc2UubWF4QW1vdW50KSB7CiAgICAgICAgICAgIHNldEludGVybmFsRmluaXNoZWQoY3VycmVudFBoYXNlLCB0cnVlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0VGF1KGFkZHJlc3MgX3RhdSkgb25seU93bmVyIHsKICAgICAgICB0YXUgPSBMYW1kZW4oX3RhdSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UGhhc2UodWludDggcGhhc2VJZCwgdWludDI1NiBzaW5jZSwgdWludDI1NiB0aWxsLCB1aW50MjU2IHByaWNlKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChwaGFzZXMubGVuZ3RoIDw9IHBoYXNlSWQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHByaWNlID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBQaGFzZSBzdG9yYWdlIHBoYXNlID0gcGhhc2VzW3BoYXNlSWRdOwoKICAgICAgICBpZiAocGhhc2UuaXNGaW5pc2hlZCA9PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcGhhc2Uuc2luY2UgPSBzaW5jZTsKICAgICAgICBwaGFzZS50aWxsID0gdGlsbDsKCiAgICAgICAgcGhhc2UucHJpY2UgPSBwcmljZTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJFdGhlcnMoKSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoZXRoZXJIb2xkZXIgIT0gMHgwKTsKICAgICAgICBldGhlckhvbGRlci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZFRvV2hpdGVsaXN0KHVpbnQ4IHBoYXNlSWQsIGFkZHJlc3MgX2FkZHJlc3MpIG9ubHlPd25lciB7CgogICAgICAgIHJlcXVpcmUocGhhc2VzLmxlbmd0aCA+IHBoYXNlSWQpOwoKICAgICAgICBQaGFzZSBzdG9yYWdlIHBoYXNlID0gcGhhc2VzW3BoYXNlSWRdOwoKICAgICAgICBwaGFzZS53aGl0ZWxpc3RbX2FkZHJlc3NdID0gdHJ1ZTsKCiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlRnJvbVdoaXRlbGlzdCh1aW50OCBwaGFzZUlkLCBhZGRyZXNzIF9hZGRyZXNzKSBvbmx5T3duZXIgewoKICAgICAgICByZXF1aXJlKHBoYXNlcy5sZW5ndGggPiBwaGFzZUlkKTsKCiAgICAgICAgUGhhc2Ugc3RvcmFnZSBwaGFzZSA9IHBoYXNlc1twaGFzZUlkXTsKCiAgICAgICAgcGhhc2Uud2hpdGVsaXN0W19hZGRyZXNzXSA9IGZhbHNlOwoKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgdG9rZW5BbW91bnQpIG9ubHlPd25lciByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIG1pbnRJbnRlcm5hbChfYWRkcmVzcywgdG9rZW5BbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbnRJbnRlcm5hbChhZGRyZXNzIF9hZGRyZXNzLCB1aW50MjU2IHRva2VuQW1vdW50KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmVxdWlyZShhZGRyZXNzKHRhdSkgIT0gMHgwKTsKICAgICAgICB1aW50MjU2IG1pbnRlZEFtb3VudCA9IHRhdS5taW50KF9hZGRyZXNzLCB0b2tlbkFtb3VudCk7CiAgICAgICAgcmVxdWlyZShtaW50ZWRBbW91bnQgPT0gdG9rZW5BbW91bnQpOwoKICAgICAgICByZXF1aXJlKHBoYXNlcy5sZW5ndGggPiBjdXJyZW50UGhhc2UpOwogICAgICAgIFBoYXNlIHN0b3JhZ2UgcGhhc2UgPSBwaGFzZXNbY3VycmVudFBoYXNlXTsKICAgICAgICBwaGFzZS5zb2xkVG9rZW5zICs9IHRva2VuQW1vdW50OwogICAgICAgIHNvbGRUb2tlbnMgKz0gdG9rZW5BbW91bnQ7CiAgICAgICAgcmV0dXJuIHRva2VuQW1vdW50OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFBoYXNlKHVpbnQ4IHBoYXNlSWQpIHJldHVybnMgKHVpbnQyNTYsIHVpbnQyNTYsIHVpbnQyNTYsIHVpbnQyNTYsIHVpbnQyNTYsIHVpbnQyNTYsIGJvb2wpCiAgICB7CgogICAgICAgIHJlcXVpcmUocGhhc2VzLmxlbmd0aCA+IHBoYXNlSWQpOwoKICAgICAgICBQaGFzZSBzdG9yYWdlIHBoYXNlID0gcGhhc2VzW3BoYXNlSWRdOwoKICAgICAgICByZXR1cm4gKHBoYXNlLnByaWNlLCBwaGFzZS5tYXhBbW91bnQsIHBoYXNlLnNpbmNlLCBwaGFzZS50aWxsLCBwaGFzZS5zb2xkVG9rZW5zLCBwaGFzZS5jb2xsZWN0ZWRFdGhlcnMsIHBoYXNlLmlzRmluaXNoZWQpOwoKICAgIH0KCn0='.
	

]
