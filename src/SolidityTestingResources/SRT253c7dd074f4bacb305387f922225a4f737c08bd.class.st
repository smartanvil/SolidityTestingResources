Class {
	#name : #SRT253c7dd074f4bacb305387f922225a4f737c08bd,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT253c7dd074f4bacb305387f922225a4f737c08bd >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKgoqIExPSyAnTG9va1JldiBUb2tlbicgY3Jvd2RmdW5kaW5nIGNvbnRyYWN0IFZlcnNpb24gMi4wCioKKiBSZWZlciB0byBodHRwczovL2xvb2tyZXYuY29tLyBmb3IgZnVydGhlciBpbmZvcm1hdGlvbi4KKiAKKiBEZXZlbG9wZXI6IExvb2tSZXYgKFRNKSAyMDE3LgoqCiogQXVkaXRlZCBieSBCb2treVBvb0JhaCAvIEJvayBDb25zdWx0aW5nIFB0eSBMdGQgMjAxNy4KKiAKKiBUaGUgTUlUIExpY2Vuc2UuCioKKi8KCi8qCiAqIEVSQzIwIFRva2VuIFN0YW5kYXJkCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKgogKi8KY29udHJhY3QgRVJDMjAgewogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF93aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZyk7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7Cn0KCi8qKgogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhICYmIGMgPj0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgdWludCBjID0gYSAtIGI7CiAgICBhc3NlcnQoYyA8PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBvd25lcjsKICBhZGRyZXNzIG5ld093bmVyOwoKICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBpZiAoX25ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgbmV3T3duZXIgPSBfbmV3T3duZXI7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7Cn0KCi8qKgogKiBTdGFuZGFyZCBFUkMyMCB0b2tlbiB3aXRoIFNob3J0IEhhbmQgQXR0YWNrIGFuZCBhcHByb3ZlKCkgcmFjZSBjb25kaXRpb24gbWl0aWdhdGlvbi4KICoKICogQmFzZWQgb24gY29kZSBieSBJbnZlc3RTZWVkCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBPd25hYmxlLCBTYWZlTWF0aCB7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vIGF2b2lkIHdhc3RpbmcgZ2FzIG9uIDAgdG9rZW4gdHJhbnNmZXJzCiAgICAgICAgaWYoX2Ftb3VudCA9PSAwKSByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBfdG8pIHJldHVybiBmYWxzZTsKCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQKICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAKICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSxfYW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSxfYW1vdW50KTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy8gYXZvaWQgd2FzdGluZyBnYXMgb24gMCB0b2tlbiB0cmFuc2ZlcnMKICAgICAgICBpZihfYW1vdW50ID09IDApIHJldHVybiB0cnVlOwogICAgICAgIGlmKF9mcm9tID09IF90bykgcmV0dXJuIGZhbHNlOwoKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF9hbW91bnQKICAgICAgICAgICAgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudAogICAgICAgICAgICAmJiBfYW1vdW50ID4gMAogICAgICAgICAgICAmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlc1tfZnJvbV0sX2Ftb3VudCk7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gc2FmZVN1YihhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSxfYW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSxfYW1vdW50KTsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAgICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHsKICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IF92YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KCiAgICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICAgfQp9CgovKioKICogTG9va1JldiB0b2tlbiBpbml0aWFsIG9mZmVyaW5nLgogKgogKiBUb2tlbiBzdXBwbHkgaXMgY3JlYXRlZCBpbiB0aGUgdG9rZW4gY29udHJhY3QgY3JlYXRpb24gYW5kIGFsbG9jYXRlZCB0byBvd25lci4KICoKICovCmNvbnRyYWN0IExvb2tSZXZUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsKCiAgICAvKgogICAgKiAgVG9rZW4gbWV0YSBkYXRhCiAgICAqLwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkxvb2tSZXYiOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiTE9PSyI7CiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIHN0cmluZyBwdWJsaWMgVkVSU0lPTiA9ICdMT0syLjAnOwogICAgYm9vbCBwdWJsaWMgZmluYWxpc2VkID0gZmFsc2U7CiAgICAKICAgIGFkZHJlc3Mgd2FsbGV0ID0gMHgwOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMga3ljUmVxdWlyZWQ7CgogICAgLy8gU3RhcnQgLSBTdW5kYXksIE9jdG9iZXIgOCwgMjAxNyAzOjAwOjAxIFBNICg4OjAwOjAxIEFNIEdNVC0wNzowMCBEU1QpCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBTVEFSVF9EQVRFID0gMTUwNzQ3NDgwMTsKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBERUNJTUFMU0ZBQ1RPUiA9IDEwKip1aW50KGRlY2ltYWxzKTsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19TT0ZUX0NBUCA9ICAgMTAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19IQVJEX0NBUCA9IDQ1MDAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19UT1RBTCA9ICAgIDUwMDAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IElOSVRJQUxfU1VQUExZID0gMTAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsKCiAgICAvLyAxIEtFVEhFUiA9IDIsNDAwLDAwMCB0b2tlbnMKICAgIC8vIDEgRVRIID0gMiw0MDAgdG9rZW5zCiAgICB1aW50IHB1YmxpYyB0b2tlbnNQZXJLRXRoZXIgPSAyNDAwMDAwOwogICAgdWludCBwdWJsaWMgQ09OVFJJQlVUSU9OU19NSU4gPSAwIGV0aGVyOwogICAgdWludCBwdWJsaWMgQ09OVFJJQlVUSU9OU19NQVggPSAwIGV0aGVyOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgS1lDX1RIUkVTSE9MRCA9IDEwMCAqIERFQ0lNQUxTRkFDVE9SOwoKICAgIGZ1bmN0aW9uIExvb2tSZXZUb2tlbigpIHsKICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICB3YWxsZXQgPSBvd25lcjsKICAgICAgdG90YWxTdXBwbHkgPSBJTklUSUFMX1NVUFBMWTsKICAgICAgYmFsYW5jZXNbb3duZXJdID0gdG90YWxTdXBwbHk7CiAgICB9CgogICAvLyBMb29rUmV2IGNhbiBjaGFuZ2UgdGhlIGNyb3dkc2FsZSB3YWxsZXQgYWRkcmVzcwogICBmdW5jdGlvbiBzZXRXYWxsZXQoYWRkcmVzcyBfd2FsbGV0KSBvbmx5T3duZXIgewogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICAgICAgV2FsbGV0VXBkYXRlZCh3YWxsZXQpOwogICAgfQogICAgZXZlbnQgV2FsbGV0VXBkYXRlZChhZGRyZXNzIG5ld1dhbGxldCk7CgogICAgLy8gQWNjZXB0IGV0aGVycyB0byBidXkgdG9rZW5zIGR1cmluZyB0aGUgY3Jvd2RzYWxlCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICBwcm94eVBheW1lbnQobXNnLnNlbmRlcik7CiAgICB9CgogICAgLy8gQWNjZXB0IGV0aGVycyBhbmQgZXhjaGFuZ2VzIHRvIHB1cmNoYXNlIHRva2VucyBvbiBiZWhhbGYgb2YgdXNlcgogICAgLy8gbXNnLnZhbHVlIChpbiB1bml0cyBvZiB3ZWkpCiAgICBmdW5jdGlvbiBwcm94eVBheW1lbnQoYWRkcmVzcyBwYXJ0aWNpcGFudCkgcGF5YWJsZSB7CgogICAgICAgICByZXF1aXJlKCFmaW5hbGlzZWQpOwoKICAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiBDT05UUklCVVRJT05TX01JTik7CiAgICAgICAgIHJlcXVpcmUoQ09OVFJJQlVUSU9OU19NQVggPT0gMCB8fCBtc2cudmFsdWUgPCBDT05UUklCVVRJT05TX01BWCk7CgogICAgICAgICAvLyBDYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucyBmb3IgY29udHJpYnV0ZWQgRVRICiAgICAgICAgIC8vIGAxOGAgaXMgdGhlIEVUSCBkZWNpbWFscwogICAgICAgICAvLyBgLSBkZWNpbWFsc2AgaXMgdGhlIHRva2VuIGRlY2ltYWxzCiAgICAgICAgIHVpbnQgdG9rZW5zID0gbXNnLnZhbHVlICogdG9rZW5zUGVyS0V0aGVyIC8gMTAqKnVpbnQoMTggLSBkZWNpbWFscyArIDMpOwoKICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGhhcmQgY2FwIHdpbGwgYmUgZXhjZWVkZWQKICAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSArIHRva2VucyA8PSBUT0tFTlNfSEFSRF9DQVApOwoKICAgICAgICAgLy8gQWRkIHRva2VucyBwdXJjaGFzZWQgdG8gYWNjb3VudCdzIGJhbGFuY2UgYW5kIHRvdGFsIHN1cHBseQogICAgICAgICBiYWxhbmNlc1twYXJ0aWNpcGFudF0gPSBzYWZlQWRkKGJhbGFuY2VzW3BhcnRpY2lwYW50XSx0b2tlbnMpOwogICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksdG9rZW5zKTsKCiAgICAgICAgIC8vIExvZyB0aGUgdG9rZW5zIHB1cmNoYXNlZCAKICAgICAgICAgVHJhbnNmZXIoMHgwLCBwYXJ0aWNpcGFudCwgdG9rZW5zKTsKICAgICAgICAgLy8gLSBidXllciA9IHBhcnRpY2lwYW50CiAgICAgICAgIC8vIC0gZXRoZXJzID0gbXNnLnZhbHVlCiAgICAgICAgIC8vIC0gcGFydGljaXBhbnRUb2tlbkJhbGFuY2UgPSBiYWxhbmNlc1twYXJ0aWNpcGFudF0KICAgICAgICAgLy8gLSB0b2tlbnMgPSB0b2tlbnMKICAgICAgICAgLy8gLSBuZXdUb3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5CiAgICAgICAgIC8vIC0gdG9rZW5zUGVyS0V0aGVyID0gdG9rZW5zUGVyS0V0aGVyCiAgICAgICAgIFRva2Vuc0JvdWdodChwYXJ0aWNpcGFudCwgbXNnLnZhbHVlLCBiYWxhbmNlc1twYXJ0aWNpcGFudF0sIHRva2VucywKICAgICAgICAgICAgICB0b3RhbFN1cHBseSwgdG9rZW5zUGVyS0V0aGVyKTsKCiAgICAgICAgIGlmIChtc2cudmFsdWUgPiBLWUNfVEhSRVNIT0xEKSB7CiAgICAgICAgICAgICAvLyBLWUMgdmVyaWZpY2F0aW9uIHJlcXVpcmVkIGJlZm9yZSBwYXJ0aWNpcGFudCBjYW4gdHJhbnNmZXIgdGhlIHRva2VucwogICAgICAgICAgICAga3ljUmVxdWlyZWRbcGFydGljaXBhbnRdID0gdHJ1ZTsKICAgICAgICAgfQoKICAgICAgICAgLy8gVHJhbnNmZXIgdGhlIGNvbnRyaWJ1dGVkIGV0aGVycyB0byB0aGUgY3Jvd2RzYWxlIHdhbGxldAogICAgICAgICAvLyB0aHJvdyBpcyBkZXByZWNhdGVkIHN0YXJ0aW5nIGZyb20gRXRoZXJldW0gdjAuOS4wCiAgICAgICAgIHdhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfQoKICAgIGV2ZW50IFRva2Vuc0JvdWdodChhZGRyZXNzIGluZGV4ZWQgYnV5ZXIsIHVpbnQgZXRoZXJzLCAKICAgICAgICB1aW50IHBhcnRpY2lwYW50VG9rZW5CYWxhbmNlLCB1aW50IHRva2VucywgdWludCBuZXdUb3RhbFN1cHBseSwgCiAgICAgICAgdWludCB0b2tlbnNQZXJLRXRoZXIpOwoKICAgIGZ1bmN0aW9uIGZpbmFsaXNlKCkgb25seU93bmVyIHsKICAgICAgICAvLyBDYW4gb25seSBmaW5hbGlzZSBpZiByYWlzZWQgPiBzb2Z0IGNhcAogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkgPj0gVE9LRU5TX1NPRlRfQ0FQKTsKCiAgICAgICAgcmVxdWlyZSghZmluYWxpc2VkKTsKCiAgICAgICAgZmluYWxpc2VkID0gdHJ1ZTsKICAgIH0KCiAgICAvLyBUb2tlbnMgcHVyY2hhc2VkIHVzaW5nIG90aGVyIHR5cGVzIG9mIGNyeXB0b2N1cnJlbmN5CiAgICBmdW5jdGlvbiBhZGRQcmVjb21taXRtZW50KGFkZHJlc3MgcGFydGljaXBhbnQsIHVpbnQgYmFsYW5jZSkgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2UgPiAwKTsKICAgICAgICBiYWxhbmNlc1twYXJ0aWNpcGFudF0gPSBzYWZlQWRkKGJhbGFuY2VzW3BhcnRpY2lwYW50XSxiYWxhbmNlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksYmFsYW5jZSk7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBwYXJ0aWNpcGFudCwgYmFsYW5jZSk7CiAgICAgICAgUHJlY29tbWl0bWVudEFkZGVkKHBhcnRpY2lwYW50LCBiYWxhbmNlKTsKICAgIH0KICAgIGV2ZW50IFByZWNvbW1pdG1lbnRBZGRlZChhZGRyZXNzIGluZGV4ZWQgcGFydGljaXBhbnQsIHVpbnQgYmFsYW5jZSk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy8gQWxsb3cgdG9rZW4gdHJhbnNmZXIKICAgICAgICByZXF1aXJlKCFreWNSZXF1aXJlZFttc2cuc2VuZGVyXSB8fCBtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfYW1vdW50KTsKICAgIH0KCiAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgcmVxdWlyZSgha3ljUmVxdWlyZWRbX2Zyb21dIHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24ga3ljVmVyaWZ5KGFkZHJlc3MgcGFydGljaXBhbnQsIGJvb2wgX3JlcXVpcmVkKSBvbmx5T3duZXIgewogICAgICAgIGt5Y1JlcXVpcmVkW3BhcnRpY2lwYW50XSA9IF9yZXF1aXJlZDsKICAgICAgICBLeWNWZXJpZmllZChwYXJ0aWNpcGFudCwga3ljUmVxdWlyZWRbcGFydGljaXBhbnRdKTsKICAgIH0KICAgIGV2ZW50IEt5Y1ZlcmlmaWVkKGFkZHJlc3MgaW5kZXhlZCBwYXJ0aWNpcGFudCwgYm9vbCByZXF1aXJlZCk7CgogICAgLy8gQW55IGFjY291bnQgY2FuIGJ1cm4gX2Zyb20ncyB0b2tlbnMgYXMgbG9uZyBhcyB0aGUgX2Zyb20gYWNjb3VudCBoYXMKICAgIC8vIGFwcHJvdmVkIHRoZSBfYW1vdW50IHRvIGJlIGJ1cm50IHVzaW5nIGFwcHJvdmUoMHgwLCBfYW1vdW50KQogICAgZnVuY3Rpb24gYnVybkZyb20oYWRkcmVzcyBfZnJvbSwgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKHRvdGFsU3VwcGx5ID49IF9hbW91bnQpOwoKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF9hbW91bnQKICAgICAgICAgICAgJiYgYWxsb3dlZFtfZnJvbV1bMHgwXSA+PSBfYW1vdW50CiAgICAgICAgICAgICYmIF9hbW91bnQgPiAwCiAgICAgICAgICAgICYmIGJhbGFuY2VzWzB4MF0gKyBfYW1vdW50ID4gYmFsYW5jZXNbMHgwXQogICAgICAgICkgewogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSxfYW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZXNbMHgwXSA9IHNhZmVBZGQoYmFsYW5jZXNbMHgwXSxfYW1vdW50KTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bMHgwXSA9IHNhZmVTdWIoYWxsb3dlZFtfZnJvbV1bMHgwXSxfYW1vdW50KTsKICAgICAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlU3ViKHRvdGFsU3VwcGx5LF9hbW91bnQpOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgMHgwLCBfYW1vdW50KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBMb29rUmV2IGNhbiB0cmFuc2ZlciBvdXQgYW55IGFjY2lkZW50YWxseSBzZW50IEVSQzIwIHRva2VucwogICAgZnVuY3Rpb24gdHJhbnNmZXJBbnlFUkMyMFRva2VuKGFkZHJlc3MgdG9rZW5BZGRyZXNzLCB1aW50IGFtb3VudCkgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgCiAgICB7CiAgICAgICAgcmV0dXJuIEVSQzIwKHRva2VuQWRkcmVzcykudHJhbnNmZXIob3duZXIsIGFtb3VudCk7CiAgICB9Cn0='.
	

]
