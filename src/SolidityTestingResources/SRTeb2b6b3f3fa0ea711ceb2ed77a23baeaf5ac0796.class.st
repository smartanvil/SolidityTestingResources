Class {
	#name : #SRTeb2b6b3f3fa0ea711ceb2ed77a23baeaf5ac0796,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTeb2b6b3f3fa0ea711ceb2ed77a23baeaf5ac0796 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKY29udHJhY3QgVG9rZW4gewoKICAgIC8vdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICAKICAgIC8vZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkgcmV0dXJucyAoYm9vbCBvayk7CiAgICAKICAgIC8vZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkgcmV0dXJucyAoYm9vbCBvayk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMjNSZWNlaXZlciB7CiAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9zZW5kZXIsIGFkZHJlc3MgX29yaWdpbiwgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSByZXR1cm5zIChib29sIG9rKTsKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBUb2tlbiB7CiAgICB1aW50MjU2IF90b3RhbFN1cHBseTsKICAgIAogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRvdGFsU3VwcGx5KSB7CiAgICAgICAgdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvL0RlZmF1bHQgYXNzdW1lcyB0b3RhbFN1cHBseSBjYW4ndCBiZSBvdmVyIG1heCAoMl4yNTYgLSAxKS4KICAgICAgICAvL0lmIHlvdXIgdG9rZW4gbGVhdmVzIG91dCB0b3RhbFN1cHBseSBhbmQgY2FuIGlzc3VlIG1vcmUgdG9rZW5zIGFzIHRpbWUgZ29lcyBvbiwgeW91IG5lZWQgdG8gY2hlY2sgaWYgaXQgZG9lc24ndCB3cmFwLgogICAgICAgIC8vUmVwbGFjZSB0aGUgaWYgd2l0aCB0aGlzIG9uZSBpbnN0ZWFkLgogICAgICAgIC8vaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBsYXN0X3NlZW5bbXNnLnNlbmRlcl0gPSBub3c7CiAgICAgICAgICAgIGxhc3Rfc2VlbltfdG9dID0gbm93OwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgICAgICAvL2lmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIGxhc3Rfc2VlbltfZnJvbV0gPSBub3c7CiAgICAgICAgICAgIGxhc3Rfc2VlbltfdG9dID0gbm93OwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBsYXN0U2VlbihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGxhc3Rfc2Vlbltfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICAgICAgICBsYXN0X3NlZW5bX3NwZW5kZXJdID0gbm93OwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGxhc3Rfc2VlbjsKfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KICAKICBmdW5jdGlvbiBnZXRPd25lcigpIHZpZXcgcHVibGljIHJldHVybnMgKGFkZHJlc3MpewogICAgcmV0dXJuIG93bmVyOwogIH0KICAKCn0KCmNvbnRyYWN0IFN0YW5kYXJkMjIzUmVjZWl2ZXIgaXMgRVJDMjIzUmVjZWl2ZXIgewogIFRrbiB0a247CgogIHN0cnVjdCBUa24gewogICAgYWRkcmVzcyBhZGRyOwogICAgYWRkcmVzcyBzZW5kZXI7CiAgICBhZGRyZXNzIG9yaWdpbjsKICAgIHVpbnQyNTYgdmFsdWU7CiAgICBieXRlcyBkYXRhOwogICAgYnl0ZXM0IHNpZzsKICB9CgogIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfc2VuZGVyLCBhZGRyZXNzIF9vcmlnaW4sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcmV0dXJucyAoYm9vbCBvaykgewogICAgLy9pZiAoIXN1cHBvcnRzVG9rZW4obXNnLnNlbmRlcikpIHJldHVybiBmYWxzZTsKCiAgICAvLyBQcm9ibGVtOiBUaGlzIHdpbGwgZG8gYSBzc3RvcmUgd2hpY2ggaXMgZXhwZW5zaXZlIGdhcyB3aXNlLiBGaW5kIGEgd2F5IHRvIGtlZXAgaXQgaW4gbWVtb3J5LgogICAgdGtuID0gVGtuKG1zZy5zZW5kZXIsIF9zZW5kZXIsIF9vcmlnaW4sIF92YWx1ZSwgX2RhdGEsIGdldFNpZyhfZGF0YSkpOwogICAgX19pc1Rva2VuRmFsbGJhY2sgPSB0cnVlOwogICAgaWYgKCFhZGRyZXNzKHRoaXMpLmRlbGVnYXRlY2FsbChfZGF0YSkpIHJldHVybiBmYWxzZTsKCiAgICAvLyBhdm9pZCBkb2luZyBhbiBvdmVyd3JpdGUgdG8gLnRva2VuLCB3aGljaCB3b3VsZCBiZSBtb3JlIGV4cGVuc2l2ZQogICAgLy8gbWFrZXMgYWNjZXNzaW5nIC50a24gdmFsdWVzIG91dHNpZGUgdG9rZW5QYXlhYmxlIGZ1bmN0aW9ucyB1bnNhZmUKICAgIF9faXNUb2tlbkZhbGxiYWNrID0gZmFsc2U7CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBnZXRTaWcoYnl0ZXMgX2RhdGEpIHByaXZhdGUgcmV0dXJucyAoYnl0ZXM0IHNpZykgewogICAgdWludCBsID0gX2RhdGEubGVuZ3RoIDwgNCA/IF9kYXRhLmxlbmd0aCA6IDQ7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBsOyBpKyspIHsKICAgICAgc2lnID0gYnl0ZXM0KHVpbnQoc2lnKSArIHVpbnQoX2RhdGFbaV0pICogKDIgKiogKDggKiAobCAtIDEgLSBpKSkpKTsKICAgIH0KICB9CgogIGJvb2wgX19pc1Rva2VuRmFsbGJhY2s7CgogIG1vZGlmaWVyIHRva2VuUGF5YWJsZSB7CiAgICBpZiAoIV9faXNUb2tlbkZhbGxiYWNrKSB0aHJvdzsKICAgIF87CiAgfQoKICAvL2Z1bmN0aW9uIHN1cHBvcnRzVG9rZW4oYWRkcmVzcyB0b2tlbikgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IFN0YW5kYXJkMjIzVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CiAgLy9mdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgdXNlciBvciBhbm90aGVyIGNvbnRyYWN0IHdhbnRzIHRvIHRyYW5zZmVyIGZ1bmRzCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAvL2ZpbHRlcmluZyBpZiB0aGUgdGFyZ2V0IGlzIGEgY29udHJhY3Qgd2l0aCBieXRlY29kZSBpbnNpZGUgaXQKICAgIGlmICghc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpKSB0aHJvdzsgLy8gZG8gYSBub3JtYWwgdG9rZW4gdHJhbnNmZXIKICAgIGlmIChpc0NvbnRyYWN0KF90bykpIHJldHVybiBjb250cmFjdEZhbGxiYWNrKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICBsYXN0X3NlZW5bbXNnLnNlbmRlcl0gPSBub3c7CiAgICBsYXN0X3NlZW5bX3RvXSA9IG5vdzsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgaWYgKCFzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKSkgdGhyb3c7IC8vIGRvIGEgbm9ybWFsIHRva2VuIHRyYW5zZmVyCiAgICBpZiAoaXNDb250cmFjdChfdG8pKSByZXR1cm4gY29udHJhY3RGYWxsYmFjayhfZnJvbSwgX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgIGxhc3Rfc2VlbltfZnJvbV0gPSBub3c7CiAgICBsYXN0X3NlZW5bX3RvXSA9IG5vdzsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLy9mdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy9yZXR1cm4gdHJhbnNmZXIoX3RvLCBfdmFsdWUsIG5ldyBieXRlcygwKSk7CiAgLy99CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmV0dXJuIHRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUsIG5ldyBieXRlcygwKSk7CiAgICBsYXN0X3NlZW5bX2Zyb21dID0gbm93OwogICAgbGFzdF9zZWVuW190b10gPSBub3c7CiAgfQoKICAvL2Z1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gdHJhbnNhY3Rpb24gdGFyZ2V0IGlzIGEgY29udHJhY3QKICBmdW5jdGlvbiBjb250cmFjdEZhbGxiYWNrKGFkZHJlc3MgX29yaWdpbiwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHJpdmF0ZSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIEVSQzIyM1JlY2VpdmVyIHJlY2lldmVyID0gRVJDMjIzUmVjZWl2ZXIoX3RvKTsKICAgIHJldHVybiByZWNpZXZlci50b2tlbkZhbGxiYWNrKG1zZy5zZW5kZXIsIF9vcmlnaW4sIF92YWx1ZSwgX2RhdGEpOwogIH0KCiAgLy9hc3NlbWJsZSB0aGUgZ2l2ZW4gYWRkcmVzcyBieXRlY29kZS4gSWYgYnl0ZWNvZGUgZXhpc3RzIHRoZW4gdGhlIF9hZGRyIGlzIGEgY29udHJhY3QuCiAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBwcml2YXRlIHJldHVybnMgKGJvb2wgaXNfY29udHJhY3QpIHsKICAgIC8vIHJldHJpZXZlIHRoZSBzaXplIG9mIHRoZSBjb2RlIG9uIHRhcmdldCBhZGRyZXNzLCB0aGlzIG5lZWRzIGFzc2VtYmx5CiAgICB1aW50IGxlbmd0aDsKICAgIGFzc2VtYmx5IHsgbGVuZ3RoIDo9IGV4dGNvZGVzaXplKF9hZGRyKSB9CiAgICByZXR1cm4gbGVuZ3RoID4gMDsKICB9Cn0KCmNvbnRyYWN0IENpcGhzIGlzIFN0YW5kYXJkMjIzUmVjZWl2ZXIsIFN0YW5kYXJkMjIzVG9rZW4sIE93bmFibGUgewoKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiQ2lwaHMiOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkNJUEhTIjsKICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgdWludDI1NiBwdWJsaWMgcmF0ZSA9IDEwMDAwMDA7CiAgYm9vbCBwcm9wb3NlID0gZmFsc2U7CiAgdWludDI1NiBwcm9zcG9zYWxfdGltZSA9IDA7CiAgdWludDI1NiByYWlzZWRBbW91bnQgPSAwOwogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IElOSVRJQUxfU1VQUExZID0gNzAwMDAwMGUxODsKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBNQVhfU1VQUExZID0gODYwMDAwMDAwMDAwZTE4OwogIC8vdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgYWRkcmVzc1tdIGludmVzdG9yczsKICAKICB1aW50MjU2IHVwID0gMDsKICB1aW50MjU2IGRvd24gPSAwOwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1Nikgdm90ZXM7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgdHJhY2thYmxlOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAodWludCA9PiB1aW50MjU2KSkgcHVibGljIHRyYWNrYWJsZV9yZWNvcmQ7CiAgCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFubmFibGU7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBpbnRlcm5hbCBzdXBwb3J0X2JhbjsKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIGFnYWluc3RfYmFuOwoKICAvL2V2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogIC8vZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgZXZlbnQgQm91Z2h0VG9rZW5zKGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgZXZlbnQgVm90ZXMoYWRkcmVzcyBpbmRleGVkIG93bmVyLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwogIGV2ZW50IE1pbnQodWludDI1NiB2YWx1ZSk7CgogIAogIGZ1bmN0aW9uIENpcGhzKCkgcHVibGljIHsKICAgIF90b3RhbFN1cHBseSA9IElOSVRJQUxfU1VQUExZOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBJTklUSUFMX1NVUFBMWTsKICB9CgoKICBmdW5jdGlvbiBpbml0aWFsaXplX3Byb3Bvc2FsKCkgcHVibGljIHsKCiAgICBpZihwcm9wb3NlKSB0aHJvdzsKICAgIHByb3Bvc2UgPSB0cnVlOwogICAgcHJvc3Bvc2FsX3RpbWUgPSBub3c7CgogIH0KICAKICBmdW5jdGlvbiBpc19wcm9wb3NhbF9zdXBwb3J0ZWQoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgaWYoIXByb3Bvc2UpIHRocm93OwogICAgaWYoZG93bi5tdWwoNCkgPCB1cCkKICAgIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9ZWxzZXsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CgogIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICBpZihwcm9wb3NlICYmIGlzX3Byb3Bvc2FsX3N1cHBvcnRlZCgpICYmIG5vdyA+IHByb3Nwb3NhbF90aW1lLmFkZCg3ICogMSBkYXlzKSkKICAgIF87CiAgICBlbHNlCiAgICB0aHJvdzsKICB9CiAgCiAgZnVuY3Rpb24gZGlzdHJpYnV0ZV90b2tlbigpCiAgewogICAgICAgdWludDI1NiBpbnZlc3RvcnNfbnVtID0gaW52ZXN0b3JzLmxlbmd0aDsKICAgICAgIHVpbnQyNTYgYW1vdW50ID0gKDEwMDAwMDBlMTgtMTAwMCkvaW52ZXN0b3JzX251bTsKICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBpbnZlc3RvcnNfbnVtOyBpKyspCiAgICAgICB7CiAgICAgICAgICAgaWYobGFzdF9zZWVuW2ludmVzdG9yc1tpXV0uYWRkKDkwICogMSBkYXlzKSA+IG5vdykKICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBiYWxhbmNlc1tpbnZlc3RvcnNbaV1dICs9IGFtb3VudDsKICAgICAgICAgICAgICAgIGxhc3Rfc2VlbltpbnZlc3RvcnNbaV1dID0gbm93OwogICAgICAgICAgICB9CiAgICAgICB9CiAgICB9CgoKICBmdW5jdGlvbiBtaW50KCkgLypjYW5NaW50Ki8gcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIAogICAgaWYocHJvcG9zZSAmJiBub3cgPj0gcHJvc3Bvc2FsX3RpbWUuYWRkKDcgKiAxIGRheXMpKXsKICAgICAgICB1aW50MjU2IF9hbW91bnQgPSAxMDAwMDAwZTE4OwogICAgICAgIF90b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICAgICAgaWYoX3RvdGFsU3VwcGx5IDw9IE1BWF9TVVBQTFkgJiYgaXNfcHJvcG9zYWxfc3VwcG9ydGVkKCkpCiAgICAgICAgewogICAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0uYWRkKDEwMDApOwogICAgICAgICAgICAvL1RyYW5zZmVyKGFkZHJlc3MoMCksIF90bywgX2Ftb3VudCk7CiAgICAgICAgICAgIHByb3Bvc2UgPSBmYWxzZTsKICAgICAgICAgICAgcHJvc3Bvc2FsX3RpbWUgPSAwOwogICAgICAgICAgICB1cCA9IDA7CiAgICAgICAgICAgIGRvd24gPSAwOwogICAgICAgICAgICBkaXN0cmlidXRlX3Rva2VuKCk7CiAgICAgICAgICAgIE1pbnQoX2Ftb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH1lbHNlewogICAgICAgICAgICBwcm9wb3NlID0gZmFsc2U7CiAgICAgICAgICAgIHByb3Nwb3NhbF90aW1lID0gMDsKICAgICAgICAgICAgdXAgPSAwOwogICAgICAgICAgICBkb3duID0gMDsKICAgICAgICAgICAgLy9yZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgCiAgICB9CiAgICBsYXN0X3NlZW5bbXNnLnNlbmRlcl0gPSBub3c7CiAgICAvL3JldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIHN1cHBvcnRfcHJvcG9zYWwoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgaWYoIXByb3Bvc2UgfHwgdm90ZXNbbXNnLnNlbmRlcl0gPT0gMSkgdGhyb3c7CiAgICAvL2ZpcnN0IGNoZWNrIGJhbGFuY2UgdG8gYmUgbW9yZSB0aGFuIDEwIENpcGhzCiAgICBpZihiYWxhbmNlc1ttc2cuc2VuZGVyXSA+IDEwMGUxOCkKICAgIHsKICAgICAgICAvL29ubHkgdm90ZSBvbmNlCiAgICAgICAgdm90ZXNbbXNnLnNlbmRlcl0gPSAxOwogICAgICAgIHVwKys7CiAgICAgICAgbWludCgpOwogICAgICAgIFZvdGVzKG1zZy5zZW5kZXIsIDEpOwogICAgICAgIHJldHVybiB0cnVlOwoKICAgIH1lbHNlCiAgICB7CiAgICAgICAgLy9ubyBzdWZmaWNpZW50IGZ1bmRzIHRvIGNhcnJ5IG91dCB2b3RpbmcgY29uc2Vuc3VzCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gYWdhaW5zdF9wcm9wb3NhbCgpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBpZighcHJvcG9zZSB8fCB2b3Rlc1ttc2cuc2VuZGVyXSA9PSAxKSB0aHJvdzsKICAgIC8vZmlyc3QgY2hlY2sgYmFsYW5jZSB0byBiZSBtb3JlIHRoYW4gMTAgQ2lwaHMKICAgIGlmKGJhbGFuY2VzW21zZy5zZW5kZXJdID4gMTAwZTE4KQogICAgewogICAgICAgIC8vb25seSB2b3RlIG9uY2UKICAgICAgICB2b3Rlc1ttc2cuc2VuZGVyXSA9IDE7CiAgICAgICAgZG93bisrOwogICAgICAgIG1pbnQoKTsKICAgICAgICBWb3Rlcyhtc2cuc2VuZGVyLCAxKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICB9ZWxzZQogICAgewogICAgICAgIC8vbm8gc3VmZmljaWVudCBmdW5kcyB0byBjYXJyeSBvdXQgdm90aW5nIGNvbnNlbnN1cwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CiAgCiAgZnVuY3Rpb24gYmFuX2FjY291bnQoYWRkcmVzcyBfYmFubmFibGVfYWRkcmVzcykgaW50ZXJuYWx7CiAgICAgICAgaWYoYmFsYW5jZXNbX2Jhbm5hYmxlX2FkZHJlc3NdID4gMCkKICAgICAgICB7CiAgICAgICAgICB0cmFuc2ZlckZyb20oX2Jhbm5hYmxlX2FkZHJlc3MsIG93bmVyLCBiYWxhbmNlc1tfYmFubmFibGVfYWRkcmVzc10pOwogICAgICAgIH0KICAgICAgICBkZWxldGUgYmFsYW5jZXNbX2Jhbm5hYmxlX2FkZHJlc3NdOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgaW52ZXN0b3JzX251bSA9IGludmVzdG9ycy5sZW5ndGg7CiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGludmVzdG9yc19udW07IGkrKykKICAgICAgICB7CiAgICAgICAgICAgIGlmKGludmVzdG9yc1tpXSA9PSBfYmFubmFibGVfYWRkcmVzcyl7CiAgICAgICAgICAgICAgICBkZWxldGUgaW52ZXN0b3JzW2ldOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAvL2RlbGV0ZSBpbnZlc3RvcnNbXTsKICB9CiAgCiAgZnVuY3Rpb24gYmFuX2NoZWNrKGFkZHJlc3MgX2Jhbm5hYmxlX2FkZHJlc3MpIGludGVybmFsCiAgewogICAgbGFzdF9zZWVuW21zZy5zZW5kZXJdID0gbm93OwogICAgLy91aW50MjU2IHRpbWVfZGlmZiA9IG5vdy5zdWIoYmFubmFibGVbX2Jhbm5hYmxlX2FkZHJlc3NdKTsgCiAgICBpZihub3cuc3ViKGJhbm5hYmxlW19iYW5uYWJsZV9hZGRyZXNzXSkgPiAwLjUgKiAxIGRheXMpCiAgICB7CiAgICAgICAgaWYoYWdhaW5zdF9iYW5bX2Jhbm5hYmxlX2FkZHJlc3NdLm11bCg0KSA8IHN1cHBvcnRfYmFuW19iYW5uYWJsZV9hZGRyZXNzXSkKICAgICAgICB7CiAgICAgICAgICAgIGJhbl9hY2NvdW50KF9iYW5uYWJsZV9hZGRyZXNzKTsKICAgICAgICB9CiAgICB9CiAgfQogIAogIGZ1bmN0aW9uIGluaXRpYWxpemVfYmFubmFibGUoYWRkcmVzcyBfYmFubmFibGVfYWRkcmVzcykgcHVibGljIHsKICAgIGJhbm5hYmxlW19iYW5uYWJsZV9hZGRyZXNzXSA9IG5vdzsKICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICB9CiAgCiAgZnVuY3Rpb24gc3VwcG9ydF9iYW5fb2YoYWRkcmVzcyBfYmFubmFibGVfYWRkcmVzcykgcHVibGljCiAgewogICAgcmVxdWlyZShiYW5uYWJsZVtfYmFubmFibGVfYWRkcmVzc10gPiAwKTsKICAgIHN1cHBvcnRfYmFuW19iYW5uYWJsZV9hZGRyZXNzXSA9IHN1cHBvcnRfYmFuW19iYW5uYWJsZV9hZGRyZXNzXS5hZGQoMSk7CiAgICBiYW5fY2hlY2soX2Jhbm5hYmxlX2FkZHJlc3MpOwogIH0KICAKICBmdW5jdGlvbiBhZ2FpbnN0X2Jhbl9vZihhZGRyZXNzIF9iYW5uYWJsZV9hZGRyZXNzKSBwdWJsaWMKICB7CiAgICByZXF1aXJlKGJhbm5hYmxlW19iYW5uYWJsZV9hZGRyZXNzXSA+IDApOwogICAgYWdhaW5zdF9iYW5bX2Jhbm5hYmxlX2FkZHJlc3NdID0gYWdhaW5zdF9iYW5bX2Jhbm5hYmxlX2FkZHJlc3NdLmFkZCgxKTsKICAgIGJhbl9jaGVjayhfYmFubmFibGVfYWRkcmVzcyk7CiAgfQoKICBmdW5jdGlvbiB0cmFjayhhZGRyZXNzIF90cmFja2FibGUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAvLyAidHJhY2thYmxlIGFkZGVkLCB2b3RlIGxpa2Ugb3IgZGlzbGlrZSB1c2luZyB0aGUgYWRkcmVzcyByZWdpc3RlcmVkIHdpdGggdGhlIHRyYWNrYWJsZSI7CiAgICB0cmFja2FibGVbX3RyYWNrYWJsZV1bbXNnLnNlbmRlcl0gPSAxOwogICAgbGFzdF9zZWVuW21zZy5zZW5kZXJdID0gbm93OwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBsaWtlX3RyYWNrYWJsZShhZGRyZXNzIF90cmFja2FibGUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBsYXN0X3NlZW5bbXNnLnNlbmRlcl0gPSBub3c7CiAgICBpZih0cmFja2FibGVbX3RyYWNrYWJsZV1bbXNnLnNlbmRlcl0gIT0gMSkKICAgIHsKICAgICAgICB0cmFja2FibGVbX3RyYWNrYWJsZV1bbXNnLnNlbmRlcl0gPSAxOwogICAgICAgIHRyYWNrYWJsZV9yZWNvcmRbX3RyYWNrYWJsZV1bMV0gPSB0cmFja2FibGVfcmVjb3JkW190cmFja2FibGVdWzFdICsgMTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGRpc2xpa2VfdHJhY2thYmxlKGFkZHJlc3MgX3RyYWNrYWJsZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICAgIGlmKHRyYWNrYWJsZVtfdHJhY2thYmxlXVttc2cuc2VuZGVyXSAhPSAxKQogICAgewogICAgICAgIHRyYWNrYWJsZVtfdHJhY2thYmxlXVttc2cuc2VuZGVyXSA9IDE7CiAgICAgICAgdHJhY2thYmxlX3JlY29yZFtfdHJhY2thYmxlXVsyXSA9IHRyYWNrYWJsZV9yZWNvcmRbX3RyYWNrYWJsZV1bMl0gKyAxOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gdHJhY2thYmxlX2xpa2VzKGFkZHJlc3MgX3RyYWNrYWJsZSkgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgbnVtID0gMDsKICAgIC8vaWYodHJhY2thYmxlW190cmFja2FibGVdKQogICAgLy97CgogICAgICAgIG51bSA9IHRyYWNrYWJsZV9yZWNvcmRbX3RyYWNrYWJsZV1bMV07CgogICAgLy99CiAgICByZXR1cm4gbnVtOwogIH0KCiAgZnVuY3Rpb24gdHJhY2thYmxlX2Rpc2xpa2VzKGFkZHJlc3MgX3RyYWNrYWJsZSkgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgbnVtID0gMDsKICAgIG51bSA9IHRyYWNrYWJsZV9yZWNvcmRbX3RyYWNrYWJsZV1bMl07CiAgICByZXR1cm4gbnVtOwogIH0KICAgIAogIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKCiAgICBidXlUb2tlbnMoKTsKCiAgfQogIAogIAogIGZ1bmN0aW9uIGJ1eVRva2VucygpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgCiAgICAvL3JlcXVpcmUocHJvcG9zZSk7CiAgICAKICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwogICAgdWludDI1NiB0b2tlbnMgPSB3ZWlBbW91bnQubXVsKGdldFJhdGUoKSk7CiAgICAKICAgIHRva2VucyA9IHRva2Vucy5kaXYoMSBldGhlcik7CiAgICAKICAgIEJvdWdodFRva2Vucyhtc2cuc2VuZGVyLCB0b2tlbnMpOwoKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKHRva2Vucyk7CiAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0uc3ViKHRva2Vucyk7CiAgICBfdG90YWxTdXBwbHkuc3ViKHRva2Vucyk7CgogICAgcmFpc2VkQW1vdW50ID0gcmFpc2VkQW1vdW50LmFkZChtc2cudmFsdWUpOwogICAgCiAgICBpbnZlc3RvcnMucHVzaChtc2cuc2VuZGVyKSAtMTsKICAgIAogICAgbGFzdF9zZWVuW21zZy5zZW5kZXJdID0gbm93OwogICAgLy9vd25lci50cmFuc2Zlcihtc2cudmFsdWUpOwogIH0KICAKICBmdW5jdGlvbiBnZXRJbnZlc3RvcnMoKSB2aWV3IHB1YmxpYyByZXR1cm5zIChhZGRyZXNzW10pewogICAgICByZXR1cm4gaW52ZXN0b3JzOwogIH0KCiAgCiAgZnVuY3Rpb24gc2V0UmF0ZSh1aW50MjU2IF9yYXRlKSBwdWJsaWMgb25seU93bmVyewogICAgICByYXRlID0gX3JhdGU7CiAgfQogIAogIGZ1bmN0aW9uIGdldFJhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgIAogICAgICByZXR1cm4gcmF0ZTsKICAgICAgCiAgfQoKICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CgogICAgICAgIGFkZHJlc3MgYnVybmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tidXJuZXJdID0gYmFsYW5jZXNbYnVybmVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBfdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICAgICAgQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICB9CiAgCiAgZnVuY3Rpb24gZGVzdHJveSgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICB9CgoKfQ=='.
	

]
