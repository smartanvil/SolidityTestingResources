Class {
	#name : #SRTcb3123f81b2f3e7fbe0c1d9455a158ad1c217a8b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTcb3123f81b2f3e7fbe0c1d9455a158ad1c217a8b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CgogIGFkZHJlc3MgcHVibGljIGNvbnRyYWN0T3duZXI7CgogIGV2ZW50IENvbnRyYWN0T3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgY29udHJhY3RPd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBtb2RpZmllciBvbmx5Q29udHJhY3RPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cmFjdE93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckNvbnRyYWN0T3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWMgb25seUNvbnRyYWN0T3duZXIgewogICAgcmVxdWlyZShfbmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBDb250cmFjdE93bmVyc2hpcFRyYW5zZmVycmVkKGNvbnRyYWN0T3duZXIsIF9uZXdPd25lcik7CiAgICBjb250cmFjdE93bmVyID0gX25ld093bmVyOwogIH0KICAKICBmdW5jdGlvbiBwYXlvdXRGcm9tQ29udHJhY3QoKSBwdWJsaWMgb25seUNvbnRyYWN0T3duZXIgewogICAgICBjb250cmFjdE93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfSAgCgp9CgovLy8gQHRpdGxlIEludGVyZmFjZSBmb3IgY29udHJhY3RzIGNvbmZvcm1pbmcgdG8gRVJDLTcyMTogTm9uLUZ1bmdpYmxlIFRva2VucwovLy8gQGF1dGhvciBEaWV0ZXIgU2hpcmxleSA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSIzNTUxNTA0MTUwNzU1NDRkNWM1YTU4NGY1MDViMWI1NjVhIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPj4gKGh0dHBzOi8vZ2l0aHViLmNvbS9kZXRlKQpjb250cmFjdCBFUkM3MjEgewogIC8vIFJlcXVpcmVkIG1ldGhvZHMKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgYWRkcik7CiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHRva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIGFwcHJvdmVkLCB1aW50MjU2IHRva2VuSWQpOwoKICAvLyBPcHRpb25hbAogIC8vIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgbmFtZSk7CiAgLy8gZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIHN5bWJvbCk7CiAgLy8gZnVuY3Rpb24gdG9rZW5PZk93bmVyQnlJbmRleChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfaW5kZXgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiB0b2tlbklkKTsKICAvLyBmdW5jdGlvbiB0b2tlbnNPZk93bmVyKGFkZHJlc3MgX293bmVyKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTZbXSB0b2tlbklkcyk7CiAgLy8gZnVuY3Rpb24gdG9rZW5NZXRhZGF0YSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgaW5mb1VybCk7Cn0KCmNvbnRyYWN0IEtpdHR5RXRoUGljcyBpcyBFUkM3MjEsIE93bmFibGUgewoKICBldmVudCBLaXR0eUNyZWF0ZWQodWludDI1NiB0b2tlbklkLCBzdHJpbmcgbmFtZSwgYWRkcmVzcyBvd25lcik7CiAgZXZlbnQgVG9rZW5Tb2xkKHVpbnQyNTYgdG9rZW5JZCwgdWludDI1NiBvbGRQcmljZSwgdWludDI1NiBuZXdQcmljZSwgYWRkcmVzcyBwcmV2T3duZXIsIGFkZHJlc3Mgd2lubmVyLCBzdHJpbmcgbmFtZSk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHRva2VuSWQpOwoKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IE5BTUUgPSAiS2l0dHlFdGhQaWNzIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IFNZTUJPTCA9ICJLaXR0eVBpY3NUb2tlbiI7CgogIHVpbnQyNTYgcHJpdmF0ZSBzdGFydGluZ1ByaWNlID0gMC4wMSBldGhlcjsKCiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMga2l0dHlJZFRvT3duZXI7CgogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGtpdHR5SWRUb0RpdnM7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBvd25lcnNoaXBUb2tlbkNvdW50OwoKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBraXR0eUlkVG9BcHByb3ZlZDsKCiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIGtpdHR5SWRUb1ByaWNlOwoKICAvKioqIERBVEFUWVBFUyAqKiovCiAgc3RydWN0IEtpdHR5IHsKICAgIHN0cmluZyBuYW1lOwogIH0KCiAgS2l0dHlbXSBwcml2YXRlIGtpdHRpZXM7CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7IC8vRVJDNzIxCiAgICAvLyBDYWxsZXIgbXVzdCBvd24gdG9rZW4uCiAgICByZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICBraXR0eUlkVG9BcHByb3ZlZFtfdG9rZW5JZF0gPSBfdG87CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7IC8vRVJDNzIxCiAgICByZXR1cm4gb3duZXJzaGlwVG9rZW5Db3VudFtfb3duZXJdOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlS2l0dHlUb2tlbihzdHJpbmcgX25hbWUsIHVpbnQyNTYgX3ByaWNlKSBwcml2YXRlIHsKICAgIF9jcmVhdGVLaXR0eShfbmFtZSwgbXNnLnNlbmRlciwgX3ByaWNlKTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZTIxS2l0dGllc1Rva2VucygpIHB1YmxpYyBvbmx5Q29udHJhY3RPd25lciB7CiAgICAgdWludDI1NiB0b3RhbEtpdHRpZXMgPSB0b3RhbFN1cHBseSgpOwoJIAoJIHJlcXVpcmUgKHRvdGFsS2l0dGllczwxKTsgLy8gb25seSAyMSB0b2tlbnMgZm9yIHN0YXJ0CgkgCgkgZm9yICh1aW50OCBpPTE7IGk8PTIxOyBpKyspCgkJX2NyZWF0ZUtpdHR5KCJFdGhLaXR0eSIsIGFkZHJlc3ModGhpcyksIHN0YXJ0aW5nUHJpY2UpOwoJCiAgfQogIAogIGZ1bmN0aW9uIGdldEtpdHR5KHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBraXR0eU5hbWUsIHVpbnQyNTYgc2VsbGluZ1ByaWNlLCBhZGRyZXNzIG93bmVyKSB7CiAgICBLaXR0eSBzdG9yYWdlIGtpdHR5ID0ga2l0dGllc1tfdG9rZW5JZF07CiAgICBraXR0eU5hbWUgPSBraXR0eS5uYW1lOwogICAgc2VsbGluZ1ByaWNlID0ga2l0dHlJZFRvUHJpY2VbX3Rva2VuSWRdOwogICAgb3duZXIgPSBraXR0eUlkVG9Pd25lcltfdG9rZW5JZF07CiAgfQoKICBmdW5jdGlvbiBpbXBsZW1lbnRzRVJDNzIxKCkgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7IC8vRVJDNzIxCiAgICByZXR1cm4gTkFNRTsKICB9CgogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBvd25lcikgeyAvL0VSQzcyMQogICAgb3duZXIgPSBraXR0eUlkVG9Pd25lcltfdG9rZW5JZF07CiAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCkpOwogIH0KCiAgLy8gQWxsb3dzIHNvbWVvbmUgdG8gc2VuZCBldGhlciBhbmQgb2J0YWluIHRoZSB0b2tlbgogIGZ1bmN0aW9uIHB1cmNoYXNlKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyBwYXlhYmxlIHsKICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBraXR0eUlkVG9Pd25lcltfdG9rZW5JZF07CiAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKCiAgICB1aW50MjU2IHNlbGxpbmdQcmljZSA9IGtpdHR5SWRUb1ByaWNlW190b2tlbklkXTsKCiAgICByZXF1aXJlKG9sZE93bmVyICE9IG5ld093bmVyKTsKICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKG5ld093bmVyKSk7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBzZWxsaW5nUHJpY2UpOwoKICAgIHVpbnQyNTYgcGF5bWVudCA9IHVpbnQyNTYoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsaW5nUHJpY2UsIDgpLCAxMCkpOyAvLzgwJSB0byBwcmV2aW91cyBvd25lcgogICAgdWludDI1NiBkaXZzX3BheW1lbnQgPSB1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCAxKSwgMTApKTsgLy8xMCUgZGl2cwogICAgCglhZGRyZXNzIGRpdnNfYWRkcmVzcyA9IGtpdHR5SWRUb0RpdnNbX3Rva2VuSWRdOwoJCiAgICAvLyBOZXh0IHByaWNlIHdpbGwgcmlzZSBvbiAzMDAlCiAgICBraXR0eUlkVG9QcmljZVtfdG9rZW5JZF0gPSB1aW50MjU2KFNhZmVNYXRoLm11bChzZWxsaW5nUHJpY2UsIDMpKTsKCiAgICBfdHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfdG9rZW5JZCk7CgogICAgLy8gUGF5IHByZXZpb3VzIHRva2VuT3duZXIgaWYgb3duZXIgaXMgbm90IGNvbnRyYWN0CiAgICBpZiAob2xkT3duZXIgIT0gYWRkcmVzcyh0aGlzKSkgewogICAgICBvbGRPd25lci50cmFuc2ZlcihwYXltZW50KTsgLy8KICAgIH0KCiAgICAvLyBQYXkgd2lubmVyIHRva2VuT3duZXIgaWYgb3duZXIgaXMgbm90IGNvbnRyYWN0CiAgICBpZiAoZGl2c19hZGRyZXNzICE9IGFkZHJlc3ModGhpcykpIHsKICAgICAgZGl2c19hZGRyZXNzLnRyYW5zZmVyKGRpdnNfcGF5bWVudCk7IC8vCiAgICB9CgogICAgVG9rZW5Tb2xkKF90b2tlbklkLCBzZWxsaW5nUHJpY2UsIGtpdHR5SWRUb1ByaWNlW190b2tlbklkXSwgb2xkT3duZXIsIG5ld093bmVyLCBraXR0aWVzW190b2tlbklkXS5uYW1lKTsKCQogICAgaWYgKG1zZy52YWx1ZSA+IHNlbGxpbmdQcmljZSkgeyAvL2lmIGV4Y2VzcyBwYXkKCSAgICB1aW50MjU2IHB1cmNoYXNlRXhjZXNzID0gU2FmZU1hdGguc3ViKG1zZy52YWx1ZSwgc2VsbGluZ1ByaWNlKTsKCQltc2cuc2VuZGVyLnRyYW5zZmVyKHB1cmNoYXNlRXhjZXNzKTsKCX0KICB9CiAgCiAgZnVuY3Rpb24gY2hhbmdlS2l0dHkodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHBheWFibGUgeyAvLwoKICAgIHJlcXVpcmUoa2l0dHlJZFRvT3duZXJbX3Rva2VuSWRdID09IG1zZy5zZW5kZXIgJiYgbXNnLnZhbHVlID09IDIwIGZpbm5leSk7IC8vdGF4IDAuMDJldGggZm9yIGNoYW5nZQoJCgl1aW50MjU2IG5ld1ByaWNlID0gIFNhZmVNYXRoLmRpdihraXR0eUlkVG9QcmljZVtfdG9rZW5JZF0sIDIpOwogICAgCiAgICAvL2dldCB0d28ga2l0dGllcyB3aXRoaW4gb25lCgljcmVhdGVLaXR0eVRva2VuKCJFdGhLaXR0eSIsIG5ld1ByaWNlKTsKCWNyZWF0ZUtpdHR5VG9rZW4oIkV0aEtpdHR5IiwgbmV3UHJpY2UpOwoJCglraXR0eUlkVG9Pd25lcltfdG9rZW5JZF0gPSBhZGRyZXNzKHRoaXMpOyAvL3JldHVybiBjaGFuZ2VkIGtpdHR5IHRvIGtpdHR5cGljcwoJa2l0dHlJZFRvUHJpY2VbX3Rva2VuSWRdID0gMTAgZmlubmV5OwoJIAogIH0KCgogIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgeyAvL0VSQzcyMQogICAgcmV0dXJuIFNZTUJPTDsKICB9CgoKICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7IC8vRVJDNzIxCiAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBraXR0eUlkVG9Pd25lcltfdG9rZW5JZF07CgogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwobmV3T3duZXIpKTsKICAgIHJlcXVpcmUoX2FwcHJvdmVkKG5ld093bmVyLCBfdG9rZW5JZCkpOwoKICAgIF90cmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIF90b2tlbklkKTsKICB9CgogIGZ1bmN0aW9uIHByaWNlT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBwcmljZSkgeyAvL2ZvciB3ZWIgc2l0ZSB2aWV3CiAgICByZXR1cm4ga2l0dHlJZFRvUHJpY2VbX3Rva2VuSWRdOwogIH0KCiAgZnVuY3Rpb24gQUxMb3duZXJzQU5EcHJpY2VzKHVpbnQyNTYgX3N0YXJ0S2l0dHlJZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzc1tdIG93bmVycywgYWRkcmVzc1tdIGRpdnMsIHVpbnQyNTZbXSBwcmljZXMpIHsgLy9mb3Igd2ViIHNpdGUgdmlldwoJCgl1aW50MjU2IHRvdGFsS2l0dGllcyA9IHRvdGFsU3VwcGx5KCk7CgkKICAgIGlmICh0b3RhbEtpdHRpZXMgPT0gMCB8fCBfc3RhcnRLaXR0eUlkID49IHRvdGFsS2l0dGllcykgewogICAgICAgIC8vIFJldHVybiBhbiBlbXB0eSBhcnJheQogICAgICByZXR1cm4gKG5ldyBhZGRyZXNzW10oMCksbmV3IGFkZHJlc3NbXSgwKSxuZXcgdWludDI1NltdKDApKTsKICAgIH0KCQoJdWludDI1NiBpbmRleFRvOwoJaWYgKHRvdGFsS2l0dGllcyA+IF9zdGFydEtpdHR5SWQrMTAwMCkKCQlpbmRleFRvID0gX3N0YXJ0S2l0dHlJZCArIDEwMDA7CgllbHNlIAkKCQlpbmRleFRvID0gdG90YWxLaXR0aWVzOwoJCQogICAgdWludDI1NiB0b3RhbFJlc3VsdEtpdHRpZXMgPSBpbmRleFRvIC0gX3N0YXJ0S2l0dHlJZDsJCQoJCQoJYWRkcmVzc1tdIG1lbW9yeSBvd25lcnNfcmVzID0gbmV3IGFkZHJlc3NbXSh0b3RhbFJlc3VsdEtpdHRpZXMpOwoJYWRkcmVzc1tdIG1lbW9yeSBkaXZzX3JlcyA9IG5ldyBhZGRyZXNzW10odG90YWxSZXN1bHRLaXR0aWVzKTsKCXVpbnQyNTZbXSBtZW1vcnkgcHJpY2VzX3JlcyA9IG5ldyB1aW50MjU2W10odG90YWxSZXN1bHRLaXR0aWVzKTsKCQoJZm9yICh1aW50MjU2IGtpdHR5SWQgPSBfc3RhcnRLaXR0eUlkOyBraXR0eUlkIDwgaW5kZXhUbzsga2l0dHlJZCsrKSB7CgkgIG93bmVyc19yZXNba2l0dHlJZCAtIF9zdGFydEtpdHR5SWRdID0ga2l0dHlJZFRvT3duZXJba2l0dHlJZF07CgkgIGRpdnNfcmVzW2tpdHR5SWQgLSBfc3RhcnRLaXR0eUlkXSA9IGtpdHR5SWRUb0RpdnNba2l0dHlJZF07CgkgIHByaWNlc19yZXNba2l0dHlJZCAtIF9zdGFydEtpdHR5SWRdID0ga2l0dHlJZFRvUHJpY2Vba2l0dHlJZF07Cgl9CgkKCXJldHVybiAob3duZXJzX3JlcywgZGl2c19yZXMsIHByaWNlc19yZXMpOwogIH0KICAKICBmdW5jdGlvbiB0b2tlbnNPZk93bmVyKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTZbXSBvd25lclRva2VuKSB7IC8vRVJDNzIxIGZvciB3ZWIgc2l0ZSB2aWV3CiAgICB1aW50MjU2IHRva2VuQ291bnQgPSBiYWxhbmNlT2YoX293bmVyKTsKICAgIGlmICh0b2tlbkNvdW50ID09IDApIHsKICAgICAgICAvLyBSZXR1cm4gYW4gZW1wdHkgYXJyYXkKICAgICAgcmV0dXJuIG5ldyB1aW50MjU2W10oMCk7CiAgICB9IGVsc2UgewogICAgICB1aW50MjU2W10gbWVtb3J5IHJlc3VsdCA9IG5ldyB1aW50MjU2W10odG9rZW5Db3VudCk7CiAgICAgIHVpbnQyNTYgdG90YWxLaXR0aWVzID0gdG90YWxTdXBwbHkoKTsKICAgICAgdWludDI1NiByZXN1bHRJbmRleCA9IDA7CgogICAgICB1aW50MjU2IGtpdHR5SWQ7CiAgICAgIGZvciAoa2l0dHlJZCA9IDA7IGtpdHR5SWQgPD0gdG90YWxLaXR0aWVzOyBraXR0eUlkKyspIHsKICAgICAgICBpZiAoa2l0dHlJZFRvT3duZXJba2l0dHlJZF0gPT0gX293bmVyKSB7CiAgICAgICAgICByZXN1bHRbcmVzdWx0SW5kZXhdID0ga2l0dHlJZDsKICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpIHsgLy9FUkM3MjEKICAgIHJldHVybiBraXR0aWVzLmxlbmd0aDsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgeyAvL0VSQzcyMQogICAgcmVxdWlyZShfb3ducyhtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CgoJX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgeyAvL0VSQzcyMQogICAgcmVxdWlyZShfb3ducyhfZnJvbSwgX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUoX2FwcHJvdmVkKF90bywgX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKF90bykpOwoKICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKCiAgLyogUFJJVkFURSBGVU5DVElPTlMgKi8KICBmdW5jdGlvbiBfYWRkcmVzc05vdE51bGwoYWRkcmVzcyBfdG8pIHByaXZhdGUgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gX3RvICE9IGFkZHJlc3MoMCk7CiAgfQoKICBmdW5jdGlvbiBfYXBwcm92ZWQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4ga2l0dHlJZFRvQXBwcm92ZWRbX3Rva2VuSWRdID09IF90bzsKICB9CgogIGZ1bmN0aW9uIF9jcmVhdGVLaXR0eShzdHJpbmcgX25hbWUsIGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSkgcHJpdmF0ZSB7CiAgICBLaXR0eSBtZW1vcnkgX2tpdHR5ID0gS2l0dHkoewogICAgICBuYW1lOiBfbmFtZQogICAgfSk7CiAgICB1aW50MjU2IG5ld0tpdHR5SWQgPSBraXR0aWVzLnB1c2goX2tpdHR5KSAtIDE7CgogICAgcmVxdWlyZShuZXdLaXR0eUlkID09IHVpbnQyNTYodWludDMyKG5ld0tpdHR5SWQpKSk7IC8vY2hlY2sgbWF4aW11bSBsaW1pdCBvZiB0b2tlbnMKCiAgICBLaXR0eUNyZWF0ZWQobmV3S2l0dHlJZCwgX25hbWUsIF9vd25lcik7CgogICAga2l0dHlJZFRvUHJpY2VbbmV3S2l0dHlJZF0gPSBfcHJpY2U7CglraXR0eUlkVG9EaXZzW25ld0tpdHR5SWRdID0gX293bmVyOyAvL2RpdmlkZW50cyBhZGRyZXNzOwoKICAgIF90cmFuc2ZlcihhZGRyZXNzKDApLCBfb3duZXIsIG5ld0tpdHR5SWQpOwogIH0KCiAgZnVuY3Rpb24gX293bnMoYWRkcmVzcyBfY2hlY2tlZEFkZHIsIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gX2NoZWNrZWRBZGRyID09IGtpdHR5SWRUb093bmVyW190b2tlbklkXTsKICB9CgpmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgewogICAgb3duZXJzaGlwVG9rZW5Db3VudFtfdG9dKys7CiAgICBraXR0eUlkVG9Pd25lcltfdG9rZW5JZF0gPSBfdG87CgogICAgLy8gV2hlbiBjcmVhdGluZyBuZXcga2l0dGllcyBfZnJvbSBpcyAweDAsIGJ1dCB3ZSBjYW4ndCBhY2NvdW50IHRoYXQgYWRkcmVzcy4KICAgIGlmIChfZnJvbSAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyc2hpcFRva2VuQ291bnRbX2Zyb21dLS07CiAgICAgIC8vIGNsZWFyIGFueSBwcmV2aW91c2x5IGFwcHJvdmVkIG93bmVyc2hpcCBleGNoYW5nZQogICAgICBkZWxldGUga2l0dHlJZFRvQXBwcm92ZWRbX3Rva2VuSWRdOwogICAgfQoKICAgIC8vIEVtaXQgdGhlIHRyYW5zZmVyIGV2ZW50LgogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KfQ=='.
	

]
