Class {
	#name : #SRT2495Bd6D0ac7704c55f5eeD01Ae2591a5B53906C,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2495Bd6D0ac7704c55f5eeD01Ae2591a5B53906C >> base64 [
	^ 'LyoKCiAgQ29weXJpZ2h0IDIwMTcgQ29mb3VuZC5pdC4KCiAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoKICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoKICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgoqLwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBSZWVudHJhbmN5SGFuZGxpbmdDb250cmFjdCB7CgogICAgYm9vbCBsb2NrZWQ7CgogICAgbW9kaWZpZXIgbm9SZWVudHJhbmN5KCkgewogICAgICAgIHJlcXVpcmUoIWxvY2tlZCk7CiAgICAgICAgbG9ja2VkID0gdHJ1ZTsKICAgICAgICBfOwogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgfQp9CmNvbnRyYWN0IE93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogICAgZnVuY3Rpb24gT3duZWQoKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIGFzc2VydChtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9uZXdPd25lciAhPSBvd25lcik7CiAgICAgICAgbmV3T3duZXIgPSBfbmV3T3duZXI7CiAgICB9CgogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpOwogICAgICAgIE93bmVyVXBkYXRlKG93bmVyLCBuZXdPd25lcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICBuZXdPd25lciA9IDB4MDsKICAgIH0KCiAgICBldmVudCBPd25lclVwZGF0ZShhZGRyZXNzIF9wcmV2T3duZXIsIGFkZHJlc3MgX25ld093bmVyKTsKfQpjb250cmFjdCBQcmlvcml0eVBhc3NJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gZ2V0QWNjb3VudExpbWl0KGFkZHJlc3MgX2FjY291bnRBZGRyZXNzKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiBnZXRBY2NvdW50QWN0aXZpdHkoYWRkcmVzcyBfYWNjb3VudEFkZHJlc3MpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKTsKfQpjb250cmFjdCBFUkMyMFRva2VuSW50ZXJmYWNlIHsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF90b3RhbFN1cHBseSk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IFNlZWRDcm93ZHNhbGVDb250cmFjdCBpcyBSZWVudHJhbmN5SGFuZGxpbmdDb250cmFjdCwgT3duZWQgewoKICBzdHJ1Y3QgQ29udHJpYnV0b3JEYXRhIHsKICAgIHVpbnQgY29udHJpYnV0aW9uQW1vdW50OwogIH0KCiAgbWFwcGluZyhhZGRyZXNzID0+IENvbnRyaWJ1dG9yRGF0YSkgcHVibGljIGNvbnRyaWJ1dG9yTGlzdDsKICB1aW50IHB1YmxpYyBuZXh0Q29udHJpYnV0b3JJbmRleDsKICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgcHVibGljIGNvbnRyaWJ1dG9ySW5kZXhlczsKCiAgc3RhdGUgcHVibGljIGNyb3dkc2FsZVN0YXRlID0gc3RhdGUucGVuZGluZ1N0YXJ0OwogIGVudW0gc3RhdGUgeyBwZW5kaW5nU3RhcnQsIHByaW9yaXR5UGFzcywgb3BlbmVkUHJpb3JpdHlQYXNzLCBjcm93ZHNhbGVFbmRlZCB9CgogIHVpbnQgcHVibGljIHByZXNhbGVTdGFydFRpbWU7CiAgdWludCBwdWJsaWMgcHJlc2FsZVVubGltaXRlZFN0YXJ0VGltZTsKICB1aW50IHB1YmxpYyBjcm93ZHNhbGVFbmRlZFRpbWU7CgogIGV2ZW50IFByZXNhbGVTdGFydGVkKHVpbnQgYmxvY2t0aW1lKTsKICBldmVudCBQcmVzYWxlVW5saW1pdGVkU3RhcnRlZCh1aW50IGJsb2NrdGltZSk7CiAgZXZlbnQgQ3Jvd2RzYWxlRW5kZWQodWludCBibG9ja3RpbWUpOwogIGV2ZW50IEVycm9yU2VuZGluZ0VUSChhZGRyZXNzIHRvLCB1aW50IGFtb3VudCk7CiAgZXZlbnQgTWluQ2FwUmVhY2hlZCh1aW50IGJsb2NrdGltZSk7CiAgZXZlbnQgTWF4Q2FwUmVhY2hlZCh1aW50IGJsb2NrdGltZSk7CiAgZXZlbnQgQ29udHJpYnV0aW9uTWFkZShhZGRyZXNzIGluZGV4ZWQgY29udHJpYnV0b3IsIHVpbnQgYW1vdW50KTsKCiAgUHJpb3JpdHlQYXNzSW50ZXJmYWNlIHByaW9yaXR5UGFzc0NvbnRyYWN0ID0gUHJpb3JpdHlQYXNzSW50ZXJmYWNlKDB4MCk7CgogIHVpbnQgcHVibGljIG1pbkNhcDsKICB1aW50IHB1YmxpYyBtYXhQMUNhcDsKICB1aW50IHB1YmxpYyBtYXhDYXA7CiAgdWludCBwdWJsaWMgZXRoUmFpc2VkOwoKICBhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZ0FkZHJlc3M7CgogIHVpbnQgbmV4dENvbnRyaWJ1dG9yVG9DbGFpbTsKICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgaGFzQ2xhaW1lZEV0aFdoZW5GYWlsOwoKICAvLwogIC8vIFVubmFtZWQgZnVuY3Rpb24gdGhhdCBydW5zIHdoZW4gZXRoIGlzIHNlbnQgdG8gdGhlIGNvbnRyYWN0CiAgLy8gQHBheWFibGUKICAvLwogIGZ1bmN0aW9uKCkgbm9SZWVudHJhbmN5IHBheWFibGUgcHVibGljIHsKICAgIHJlcXVpcmUobXNnLnZhbHVlICE9IDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaHJvdyBpZiB2YWx1ZSBpcyAwCiAgICByZXF1aXJlKGNyb3dkc2FsZVN0YXRlICE9IHN0YXRlLmNyb3dkc2FsZUVuZGVkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY3Jvd2RzYWxlIGhhcyBlbmRlZAoKICAgIGJvb2wgc3RhdGVDaGFuZ2VkID0gY2hlY2tDcm93ZHNhbGVTdGF0ZSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBibG9ja3MgdGltZSBhbmQgY2FsaWJyYXRlIGNyb3dkc2FsZSBzdGF0ZQoKICAgIGlmIChjcm93ZHNhbGVTdGF0ZSA9PSBzdGF0ZS5wcmlvcml0eVBhc3MpIHsKICAgICAgaWYgKHByaW9yaXR5UGFzc0NvbnRyYWN0LmdldEFjY291bnRBY3Rpdml0eShtc2cuc2VuZGVyKSkgeyAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjb250cmlidXRvciBpcyBpbiBwcmlvcml0eVBhc3MKICAgICAgICBwcm9jZXNzVHJhbnNhY3Rpb24obXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIHRyYW5zYWN0aW9uIGFuZCBpc3N1ZSB0b2tlbnMKICAgICAgfSBlbHNlIHsKICAgICAgICByZWZ1bmRUcmFuc2FjdGlvbihzdGF0ZUNoYW5nZWQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgc3RhdGUgYW5kIHJldHVybiBmdW5kcyBvciB0aHJvdwogICAgICB9CiAgICB9IGVsc2UgaWYgKGNyb3dkc2FsZVN0YXRlID09IHN0YXRlLm9wZW5lZFByaW9yaXR5UGFzcykgewogICAgICBpZiAocHJpb3JpdHlQYXNzQ29udHJhY3QuZ2V0QWNjb3VudEFjdGl2aXR5KG1zZy5zZW5kZXIpKSB7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNvbnRyaWJ1dG9yIGlzIGluIHByaW9yaXR5UGFzcwogICAgICAgIHByb2Nlc3NUcmFuc2FjdGlvbihtc2cuc2VuZGVyLCBtc2cudmFsdWUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByb2Nlc3MgdHJhbnNhY3Rpb24gYW5kIGlzc3VlIHRva2VucwogICAgICB9IGVsc2UgewogICAgICAgIHJlZnVuZFRyYW5zYWN0aW9uKHN0YXRlQ2hhbmdlZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBzdGF0ZSBhbmQgcmV0dXJuIGZ1bmRzIG9yIHRocm93CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJlZnVuZFRyYW5zYWN0aW9uKHN0YXRlQ2hhbmdlZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHN0YXRlIGFuZCByZXR1cm4gZnVuZHMgb3IgdGhyb3cKICAgIH0KICB9CgogIC8vCiAgLy8gQGludGVybmFsIGNoZWNrcyBjcm93ZHNhbGUgc3RhdGUgYW5kIGVtaXRzIGV2ZW50cyBpdAogIC8vIEByZXR1cm5zIGJvb2xlYW4KICAvLwogIGZ1bmN0aW9uIGNoZWNrQ3Jvd2RzYWxlU3RhdGUoKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICBpZiAoZXRoUmFpc2VkID09IG1heENhcCAmJiBjcm93ZHNhbGVTdGF0ZSAhPSBzdGF0ZS5jcm93ZHNhbGVFbmRlZCkgeyAgICAgICAgLy8gQ2hlY2sgaWYgbWF4IGNhcCBpcyByZWFjaGVkCiAgICAgIGNyb3dkc2FsZVN0YXRlID0gc3RhdGUuY3Jvd2RzYWxlRW5kZWQ7CiAgICAgIE1heENhcFJlYWNoZWQoYmxvY2sudGltZXN0YW1wKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xvc2UgdGhlIGNyb3dkc2FsZQogICAgICBDcm93ZHNhbGVFbmRlZChibG9jay50aW1lc3RhbXApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJhaXNlIGV2ZW50CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGlmIChibG9jay50aW1lc3RhbXAgPiBwcmVzYWxlU3RhcnRUaW1lICYmIGJsb2NrLnRpbWVzdGFtcCA8PSBwcmVzYWxlVW5saW1pdGVkU3RhcnRUaW1lKSB7IC8vIENoZWNrIGlmIHdlIGFyZSBpbiBwcmVzYWxlIHBoYXNlCiAgICAgIGlmIChjcm93ZHNhbGVTdGF0ZSAhPSBzdGF0ZS5wcmlvcml0eVBhc3MpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3RhdGUgbmVlZHMgdG8gYmUgY2hhbmdlZAogICAgICAgIGNyb3dkc2FsZVN0YXRlID0gc3RhdGUucHJpb3JpdHlQYXNzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBuZXcgc3RhdGUKICAgICAgICBQcmVzYWxlU3RhcnRlZChibG9jay50aW1lc3RhbXApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSYWlzZSBldmVudAogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGJsb2NrLnRpbWVzdGFtcCA+IHByZXNhbGVVbmxpbWl0ZWRTdGFydFRpbWUgJiYgYmxvY2sudGltZXN0YW1wIDw9IGNyb3dkc2FsZUVuZGVkVGltZSkgeyAgLy8gQ2hlY2sgaWYgd2UgYXJlIGluIHByZXNhbGUgdW5saW1pdGVkIHBoYXNlCiAgICAgIGlmIChjcm93ZHNhbGVTdGF0ZSAhPSBzdGF0ZS5vcGVuZWRQcmlvcml0eVBhc3MpIHsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3RhdGUgbmVlZHMgdG8gYmUgY2hhbmdlZAogICAgICAgIGNyb3dkc2FsZVN0YXRlID0gc3RhdGUub3BlbmVkUHJpb3JpdHlQYXNzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBuZXcgc3RhdGUKICAgICAgICBQcmVzYWxlVW5saW1pdGVkU3RhcnRlZChibG9jay50aW1lc3RhbXApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSYWlzZSBldmVudAogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoY3Jvd2RzYWxlU3RhdGUgIT0gc3RhdGUuY3Jvd2RzYWxlRW5kZWQgJiYgYmxvY2sudGltZXN0YW1wID4gY3Jvd2RzYWxlRW5kZWRUaW1lKSB7Ly8gQ2hlY2sgaWYgY3Jvd2RzYWxlIGlzIG92ZXIKICAgICAgICBjcm93ZHNhbGVTdGF0ZSA9IHN0YXRlLmNyb3dkc2FsZUVuZGVkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgbmV3IHN0YXRlCiAgICAgICAgQ3Jvd2RzYWxlRW5kZWQoYmxvY2sudGltZXN0YW1wKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8KICAvLyBAaW50ZXJuYWwgZGV0ZXJtaW5lcyBpZiByZXR1cm4gZXRoIG9yIHRocm93IGFjY29yZGluZyB0byBjaGFuZ2luZyBzdGF0ZQogIC8vIEBwYXJhbSBfc3RhdGVDaGFuZ2VkIGJvb2xlYW4gbWVzc2FnZSBhYm91dCBzdGF0ZSBjaGFuZ2UKICAvLwogIGZ1bmN0aW9uIHJlZnVuZFRyYW5zYWN0aW9uKGJvb2wgX3N0YXRlQ2hhbmdlZCkgaW50ZXJuYWwgewogICAgaWYgKF9zdGF0ZUNoYW5nZWQpIHsKICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CiAgfQoKICAvLwogIC8vIEdldHRlciB0byBjYWxjdWxhdGUgaG93IG11Y2ggdXNlciBjYW4gY29udHJpYnV0ZQogIC8vIEBwYXJhbSBfY29udHJpYnV0b3IgYWRkcmVzcyBvZiB0aGUgY29udHJpYnV0b3IKICAvLwogIGZ1bmN0aW9uIGNhbGN1bGF0ZU1heENvbnRyaWJ1dGlvbihhZGRyZXNzIF9jb250cmlidXRvcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQgbWF4Q29udHJpYnV0aW9uKSB7CiAgICB1aW50IG1heENvbnRyaWI7CgogICAgaWYgKGNyb3dkc2FsZVN0YXRlID09IHN0YXRlLnByaW9yaXR5UGFzcykgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGFyZSBpbiBwcmlvcml0eSBwYXNzCiAgICAgIG1heENvbnRyaWIgPSBwcmlvcml0eVBhc3NDb250cmFjdC5nZXRBY2NvdW50TGltaXQoX2NvbnRyaWJ1dG9yKSAtIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudDsKCgkgICAgaWYgKG1heENvbnRyaWIgPiAobWF4UDFDYXAgLSBldGhSYWlzZWQpKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBtYXggY29udHJpYnV0aW9uIGlzIG1vcmUgdGhhdCBtYXggY2FwCiAgICAgICAgbWF4Q29udHJpYiA9IG1heFAxQ2FwIC0gZXRoUmFpc2VkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWx0ZXIgbWF4IGNhcAogICAgICB9CgogICAgfSBlbHNlIHsKICAgICAgbWF4Q29udHJpYiA9IG1heENhcCAtIGV0aFJhaXNlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbHRlciBtYXggY2FwCiAgICB9CiAgICByZXR1cm4gbWF4Q29udHJpYjsKICB9CgogIC8vCiAgLy8gUmV0dXJuIGlmIHRoZXJlIGlzIG92ZXJmbG93IG9mIGNvbnRyaWJ1dGVkIGV0aAogIC8vIEBpbnRlcm5hbCBwcm9jZXNzZXMgdHJhbnNhY3Rpb25zCiAgLy8gQHBhcmFtIF9jb250cmlidXRvciBhZGRyZXNzIG9mIGFuIGNvbnRyaWJ1dG9yCiAgLy8gQHBhcmFtIF9hbW91bnQgY29udHJpYnV0ZWQgYW1vdW50CiAgLy8KICBmdW5jdGlvbiBwcm9jZXNzVHJhbnNhY3Rpb24oYWRkcmVzcyBfY29udHJpYnV0b3IsIHVpbnQgX2Ftb3VudCkgaW50ZXJuYWwgewogICAgdWludCBtYXhDb250cmlidXRpb24gPSBjYWxjdWxhdGVNYXhDb250cmlidXRpb24oX2NvbnRyaWJ1dG9yKTsgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBtYXggdXNlcnMgY29udHJpYnV0aW9uCiAgICB1aW50IGNvbnRyaWJ1dGlvbkFtb3VudCA9IF9hbW91bnQ7CiAgICB1aW50IHJldHVybkFtb3VudCA9IDA7CgoJICBpZiAobWF4Q29udHJpYnV0aW9uIDwgX2Ftb3VudCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbWF4IGNvbnRyaWJ1dGlvbiBpcyBsb3dlciB0aGFuIF9hbW91bnQgc2VudAogICAgICBjb250cmlidXRpb25BbW91bnQgPSBtYXhDb250cmlidXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGF0IHVzZXIgY29udHJpYnV0ZXMgaGlzIG1heGltdW0gYWxvd2VkIGNvbnRyaWJ1dGlvbgogICAgICByZXR1cm5BbW91bnQgPSBfYW1vdW50IC0gbWF4Q29udHJpYnV0aW9uOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBob3cgbXVjaCBoZSBtdXN0IGdldCBiYWNrCiAgICB9CgogICAgaWYgKGV0aFJhaXNlZCArIGNvbnRyaWJ1dGlvbkFtb3VudCA+PSBtaW5DYXAgJiYgbWluQ2FwID4gZXRoUmFpc2VkKSB7CiAgICAgIE1pbkNhcFJlYWNoZWQoYmxvY2sudGltZXN0YW1wKTsKICAgIH0gCgogICAgaWYgKGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudCA9PSAwKSB7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNvbnRyaWJ1dG9yIGhhcyBhbHJlYWR5IGNvbnRyaWJ1dGVkCiAgICAgIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudCA9IGNvbnRyaWJ1dGlvbkFtb3VudDsgICAgLy8gU2V0IHRoZWlyIGNvbnRyaWJ1dGlvbgogICAgICBjb250cmlidXRvckluZGV4ZXNbbmV4dENvbnRyaWJ1dG9ySW5kZXhdID0gX2NvbnRyaWJ1dG9yOyAgICAgICAgICAgICAgICAgIC8vIFNldCBjb250cmlidXRvcnMgaW5kZXgKICAgICAgbmV4dENvbnRyaWJ1dG9ySW5kZXgrKzsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudCArPSBjb250cmlidXRpb25BbW91bnQ7ICAgLy8gQWRkIGNvbnRyaWJ1dGlvbiBhbW91bnQgdG8gZXhpc3RpbmcgY29udHJpYnV0b3IKICAgIH0KICAgIGV0aFJhaXNlZCArPSBjb250cmlidXRpb25BbW91bnQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdG8gZXRoIHJhaXNlZAoKICAgIENvbnRyaWJ1dGlvbk1hZGUobXNnLnNlbmRlciwgY29udHJpYnV0aW9uQW1vdW50KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSYWlzZSBldmVudCBhYm91dCBjb250cmlidXRpb24KCgkgIGlmIChyZXR1cm5BbW91bnQgIT0gMCkgewogICAgICBfY29udHJpYnV0b3IudHJhbnNmZXIocmV0dXJuQW1vdW50KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJldHVybiBvdmVyZmxvdyBvZiBldGhlcgogICAgfSAKICB9CgogIC8vCiAgLy8gUmVjb3ZlcnMgRVJDMjAgdG9rZW5zIG90aGVyIHRoYW4gZXRoIHRoYXQgYXJlIHNlbmQgdG8gdGhpcyBhZGRyZXNzCiAgLy8gQG93bmVyIHJlZnVuZHMgdGhlIGVyYzIwIHRva2VucwogIC8vIEBwYXJhbSBfdG9rZW5BZGRyZXNzIGFkZHJlc3Mgb2YgdGhlIGVyYzIwIHRva2VuCiAgLy8gQHBhcmFtIF90byBhZGRyZXNzIHRvIHdoZXJlIHRva2VucyBzaG91bGQgYmUgc2VuZCB0bwogIC8vIEBwYXJhbSBfYW1vdW50IGFtb3VudCBvZiB0b2tlbnMgdG8gcmVmdW5kCiAgLy8KICBmdW5jdGlvbiBzYWx2YWdlVG9rZW5zRnJvbUNvbnRyYWN0KGFkZHJlc3MgX3Rva2VuQWRkcmVzcywgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgb25seU93bmVyIHB1YmxpYyB7CiAgICBFUkMyMFRva2VuSW50ZXJmYWNlKF90b2tlbkFkZHJlc3MpLnRyYW5zZmVyKF90bywgX2Ftb3VudCk7CiAgfQoKICAvLwogIC8vIHdpdGhkcmF3RXRoIHdoZW4gbWluaW11bSBjYXAgaXMgcmVhY2hlZAogIC8vIEBvd25lciBzZXRzIGNvbnRyaWJ1dGlvbnMgdG8gd2l0aGRyYXcKICAvLwogIGZ1bmN0aW9uIHdpdGhkcmF3RXRoKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSAhPSAwKTsKICAgIHJlcXVpcmUoZXRoUmFpc2VkID49IG1pbkNhcCk7CgogICAgcGVuZGluZ0V0aFdpdGhkcmF3YWwgPSB0aGlzLmJhbGFuY2U7CiAgfQoKCiAgdWludCBwdWJsaWMgcGVuZGluZ0V0aFdpdGhkcmF3YWw7CiAgLy8KICAvLyBwdWxscyB0aGUgZnVuZHMgdGhhdCB3ZXJlIHNldCB0byBzZW5kIHdpdGggY2FsbGluZyBvZgogIC8vIHdpdGhkcmF3RXRoIHdoZW4gbWluaW11bSBjYXAgaXMgcmVhY2hlZAogIC8vIEBtdWx0aXNpZyBwdWxscyB0aGUgY29udHJpYnV0aW9ucyB0byBzZWxmCiAgLy8KICBmdW5jdGlvbiBwdWxsQmFsYW5jZSgpIHB1YmxpYyB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbXVsdGlzaWdBZGRyZXNzKTsKICAgIHJlcXVpcmUocGVuZGluZ0V0aFdpdGhkcmF3YWwgPiAwKTsKCiAgICBtdWx0aXNpZ0FkZHJlc3MudHJhbnNmZXIocGVuZGluZ0V0aFdpdGhkcmF3YWwpOwogICAgcGVuZGluZ0V0aFdpdGhkcmF3YWwgPSAwOwogIH0KCiAgLy8KICAvLyBPd25lciBjYW4gYmF0Y2ggcmV0dXJuIGNvbnRyaWJ1dG9ycyBjb250cmlidXRpb25zKGV0aCkKICAvLyBAb3duZXIgcmV0dXJucyBjb250cmlidXRpb25zCiAgLy8gQHBhcmFtIF9udW1iZXJPZlJldHVybnMgbnVtYmVyIG9mIHJldHVybnMgdG8gZG8gaW4gb25lIHRyYW5zYWN0aW9uCiAgLy8KICBmdW5jdGlvbiBiYXRjaFJldHVybkV0aElmRmFpbGVkKHVpbnQgX251bWJlck9mUmV0dXJucykgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKGJsb2NrLnRpbWVzdGFtcCA+IGNyb3dkc2FsZUVuZGVkVGltZSAmJiBldGhSYWlzZWQgPCBtaW5DYXApOyAgICAgICAgLy8gQ2hlY2sgaWYgY3Jvd2RzYWxlIGhhcyBmYWlsZWQKCiAgICBhZGRyZXNzIGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3M7CiAgICB1aW50IGNvbnRyaWJ1dGlvbjsKCiAgICBmb3IgKHVpbnQgY250ID0gMDsgY250IDwgX251bWJlck9mUmV0dXJuczsgY250KyspIHsKICAgICAgY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcyA9IGNvbnRyaWJ1dG9ySW5kZXhlc1tuZXh0Q29udHJpYnV0b3JUb0NsYWltXTsgICAvLyBHZXQgbmV4dCB1bmNsYWltZWQgcGFydGljaXBhbnQKCiAgICAgIGlmIChjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzID09IDB4MCkgewogICAgICAgICByZXR1cm47ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGFsbCB0aGUgcGFydGljaXBhbnRzIHdlcmUgY29tcGVuc2F0ZWQKICAgICAgfQoKICAgICAgaWYgKCFoYXNDbGFpbWVkRXRoV2hlbkZhaWxbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10pIHsgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwYXJ0aWNpcGFudCBoYXMgYWxyZWFkeSBjbGFpbWVkCiAgICAgICAgY29udHJpYnV0aW9uID0gY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLmNvbnRyaWJ1dGlvbkFtb3VudDsgLy8gR2V0IGNvbnRyaWJ1dGlvbiBvZiBwYXJ0aWNpcGFudAogICAgICAgIGhhc0NsYWltZWRFdGhXaGVuRmFpbFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXSA9IHRydWU7ICAgICAgICAgICAgICAgIC8vIFNldCB0aGF0IGhlIGhhcyBjbGFpbWVkCgogICAgICAgIGlmICghY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcy5zZW5kKGNvbnRyaWJ1dGlvbikpIHsgICAgICAgICAgICAgICAgICAgIC8vIFJlZnVuZCBldGgKICAgICAgICAgIEVycm9yU2VuZGluZ0VUSChjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzLCBjb250cmlidXRpb24pOyAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBpc3N1ZSByYWlzZSBldmVudCBmb3IgbWFudWFsIHJlY292ZXJ5CiAgICAgICAgfQogICAgICB9CiAgICAgIG5leHRDb250cmlidXRvclRvQ2xhaW0gKz0gMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVwZWF0CiAgICB9CiAgfQoKICAvLwogIC8vIElmIHRoZXJlIHdlcmUgYW55IGlzc3VlIHdpdGggcmVmdW5kIG93bmVyIGNhbiB3aXRoZHJhdyBldGggYXQgdGhlIGVuZCBmb3IgbWFudWFsIHJlY292ZXJ5CiAgLy8gQG93bmVyIHdpdGhkcmF3cyByZW1haW5pbmcgZnVuZHMKICAvLwogIGZ1bmN0aW9uIHdpdGhkcmF3UmVtYWluaW5nQmFsYW5jZUZvck1hbnVhbFJlY292ZXJ5KCkgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSAhPSAwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSBldGggdG8gY2xhaW0KICAgIHJlcXVpcmUoYmxvY2sudGltZXN0YW1wID4gY3Jvd2RzYWxlRW5kZWRUaW1lKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjcm93ZHNhbGUgaXMgb3ZlcgogICAgcmVxdWlyZShjb250cmlidXRvckluZGV4ZXNbbmV4dENvbnRyaWJ1dG9yVG9DbGFpbV0gPT0gMHgwKTsgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGFsbCB0aGUgdXNlcnMgd2VyZSByZWZ1bmRlZAogICAgbXVsdGlzaWdBZGRyZXNzLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdpdGhkcmF3IHRvIG11bHRpc2lnIGZvciBtYW51YWwgcHJvY2Vzc2luZwogIH0KCiAgLy8KICAvLyBPd25lciBjYW4gc2V0IG11bHRpc2lnIGFkZHJlc3MgZm9yIGNyb3dkc2FsZQogIC8vIEBvd25lciBzZXRzIGFuIGFkZHJlc3Mgd2hlcmUgZnVuZHMgd2lsbCBnbwogIC8vIEBwYXJhbSBfbmV3QWRkcmVzcwogIC8vCiAgZnVuY3Rpb24gc2V0TXVsdGlzaWdBZGRyZXNzKGFkZHJlc3MgX25ld0FkZHJlc3MpIG9ubHlPd25lciBwdWJsaWMgewogICAgbXVsdGlzaWdBZGRyZXNzID0gX25ld0FkZHJlc3M7CiAgfQoKICAvLwogIC8vIFNldHRlciBmb3IgdGhlIHdoaXRlbGlzdCBjb250cmFjdAogIC8vIEBvd25lciBzZXRzIGFkZHJlc3Mgb2Ygd2hpdGVsaXN0IGNvbnRyYWN0CiAgLy8gQHBhcmFtIGFkZHJlc3MKICAvLwogIGZ1bmN0aW9uIHNldFByaW9yaXR5UGFzc0NvbnRyYWN0KGFkZHJlc3MgX25ld0FkZHJlc3MpIG9ubHlPd25lciBwdWJsaWMgewogICAgcHJpb3JpdHlQYXNzQ29udHJhY3QgPSBQcmlvcml0eVBhc3NJbnRlcmZhY2UoX25ld0FkZHJlc3MpOwogIH0KCiAgLy8KICAvLyBHZXR0ZXIgZm9yIHRoZSB3aGl0ZWxpc3QgY29udHJhY3QKICAvLyBAcmV0dXJucyB3aGl0ZSBsaXN0IGNvbnRyYWN0IGFkZHJlc3MKICAvLwogIGZ1bmN0aW9uIHByaW9yaXR5UGFzc0NvbnRyYWN0QWRkcmVzcygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChhZGRyZXNzKSB7CiAgICByZXR1cm4gYWRkcmVzcyhwcmlvcml0eVBhc3NDb250cmFjdCk7CiAgfQoKICAvLwogIC8vIEJlZm9yZSBjcm93ZHNhbGUgc3RhcnRzIG93bmVyIGNhbiBjYWxpYnJhdGUgdGltZSBvZiBjcm93ZHNhbGUgc3RhZ2VzCiAgLy8gQG93bmVyIHNlbmRzIG5ldyB0aW1lcyBmb3IgdGhlIHNhbGUKICAvLyBAcGFyYW0gX3ByZXNhbGVTdGFydFRpbWUgdGltZXN0YW1wIGZvciBzYWxlIGxpbWl0ZWQgc3RhcnQKICAvLyBAcGFyYW0gX3ByZXNhbGVVbmxpbWl0ZWRTdGFydFRpbWUgdGltZXN0YW1wIGZvciBzYWxlIHVubGltaXRlZAogIC8vIEBwYXJhbSBfY3Jvd2RzYWxlRW5kZWRUaW1lIHRpbWVzdGFtcCBmb3IgZW5kaW5nIHNhbGUKICAvLwogIGZ1bmN0aW9uIHNldENyb3dkc2FsZVRpbWVzKHVpbnQgX3ByZXNhbGVTdGFydFRpbWUsIHVpbnQgX3ByZXNhbGVVbmxpbWl0ZWRTdGFydFRpbWUsIHVpbnQgX2Nyb3dkc2FsZUVuZGVkVGltZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKGNyb3dkc2FsZVN0YXRlID09IHN0YXRlLnBlbmRpbmdTdGFydCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY3Jvd2RzYWxlIGhhcyBzdGFydGVkCiAgICByZXF1aXJlKF9wcmVzYWxlU3RhcnRUaW1lICE9IDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYW55IHZhbHVlIGlzIDAKICAgIHJlcXVpcmUoX3ByZXNhbGVTdGFydFRpbWUgPCBfcHJlc2FsZVVubGltaXRlZFN0YXJ0VGltZSk7ICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwcmVzYWxlVW5saW1pdGVkU3RhcnRUaW1lIGlzIHNldCBwcm9wZXJseQogICAgcmVxdWlyZShfcHJlc2FsZVVubGltaXRlZFN0YXJ0VGltZSAhPSAwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGFueSB2YWx1ZSBpcyAwCiAgICByZXF1aXJlKF9wcmVzYWxlVW5saW1pdGVkU3RhcnRUaW1lIDwgX2Nyb3dkc2FsZUVuZGVkVGltZSk7ICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY3Jvd2RzYWxlRW5kZWRUaW1lIGlzIHNldCBwcm9wZXJseQogICAgcmVxdWlyZShfY3Jvd2RzYWxlRW5kZWRUaW1lICE9IDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGFueSB2YWx1ZSBpcyAwCiAgICBwcmVzYWxlU3RhcnRUaW1lID0gX3ByZXNhbGVTdGFydFRpbWU7CiAgICBwcmVzYWxlVW5saW1pdGVkU3RhcnRUaW1lID0gX3ByZXNhbGVVbmxpbWl0ZWRTdGFydFRpbWU7CiAgICBjcm93ZHNhbGVFbmRlZFRpbWUgPSBfY3Jvd2RzYWxlRW5kZWRUaW1lOwogIH0KfQoKY29udHJhY3QgTGVnYWN5U2VlZENyb3dkc2FsZSBpcyBTZWVkQ3Jvd2RzYWxlQ29udHJhY3QgewogIAogIGZ1bmN0aW9uIExlZ2FjeVNlZWRDcm93ZHNhbGUoKSB7CgogICAgcHJlc2FsZVN0YXJ0VGltZSA9IDE1MTIwMzI0MDA7CiAgICBwcmVzYWxlVW5saW1pdGVkU3RhcnRUaW1lID0gMTUxMjA2MzAwMDsKICAgIGNyb3dkc2FsZUVuZGVkVGltZSA9IDE1MTIxNDA0MDA7CgogICAgbWluQ2FwID0gMzU2IGV0aGVyOwogICAgbWF4UDFDYXAgPSA3NDggZXRoZXI7CiAgICBtYXhDYXAgPSA4MzEgZXRoZXI7CiAgfQp9'.
	

]
