Class {
	#name : #SRT41de5b7cf63c8d028daa2626d9aeaf02cad8c6c3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT41de5b7cf63c8d028daa2626d9aeaf02cad8c6c3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBvd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBmdW5jdGlvbiBvd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQp9Cgpjb250cmFjdCBEU01hdGggewoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgYXNzZXJ0KCh6ID0geCArIHkpID49IHgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgYXNzZXJ0KCh6ID0geCAtIHkpIDw9IHgpOwogICAgfQoKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgYXNzZXJ0KCh6ID0geCAqIHkpID49IHgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgeiA9IHggLyB5OwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbih1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgcmV0dXJuIHggPD0geSA/IHggOiB5OwogICAgfQoKICAgIGZ1bmN0aW9uIG1heCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgcmV0dXJuIHggPj0geSA/IHggOiB5OwogICAgfQp9CgoKY29udHJhY3QgcXVldWUgewogICAgUXVldWUgcHVibGljIHE7CgogICAgc3RydWN0IEJ1eVRpY2tldCB7CiAgICAgICAgYWRkcmVzcyBhY2NvdW50OwogICAgICAgIHVpbnQgYW1vdW50OwogICAgICAgIHVpbnQgdGltZTsKICAgIH0KCiAgICBzdHJ1Y3QgUXVldWUgewogICAgICAgIEJ1eVRpY2tldFtdIGRhdGE7CiAgICAgICAgdWludCBmcm9udDsKICAgICAgICB1aW50IGJhY2s7CiAgICB9CgogICAgZnVuY3Rpb24gcXVldWVTaXplKCkgY29uc3RhbnQgcmV0dXJucyAodWludCByKSB7CiAgICAgICAgciA9IHEuYmFjayAtIHEuZnJvbnQ7CiAgICB9CgogICAgZnVuY3Rpb24gcXVldWUoKSB7CiAgICAgICAgcS5kYXRhLmxlbmd0aCA9IDYwMDAwMDsKICAgIH0KCiAgICBmdW5jdGlvbiBwdXNoUXVldWUoQnV5VGlja2V0IHRpY2tldCkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoKHEuYmFjayArIDEpICUgcS5kYXRhLmxlbmd0aCAhPSBxLmZyb250KTsKCiAgICAgICAgcS5kYXRhW3EuYmFja10gPSB0aWNrZXQ7CiAgICAgICAgcS5iYWNrID0gKHEuYmFjayArIDEpICUgcS5kYXRhLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBwZWVrUXVldWUoKSBpbnRlcm5hbCByZXR1cm5zIChCdXlUaWNrZXQgcikgewogICAgICAgIHJlcXVpcmUocS5iYWNrICE9IHEuZnJvbnQpOwoKICAgICAgICByID0gcS5kYXRhW3EuZnJvbnRdOwogICAgfQoKICAgIGZ1bmN0aW9uIHBvcFF1ZXVlKCkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUocS5iYWNrICE9IHEuZnJvbnQpOwoKICAgICAgICBkZWxldGUgcS5kYXRhW3EuZnJvbnRdOwogICAgICAgIHEuZnJvbnQgPSAocS5mcm9udCArIDEpICUgcS5kYXRhLmxlbmd0aDsKICAgIH0KfQoKY29udHJhY3QgRGVDZW50ZXJUb2tlbiBpcyBvd25lZCwgcXVldWUsIERTTWF0aCB7CiAgICBzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gJ1Rva2VuIDAuMSc7CiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAnRGVDZW50ZXInOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAnREMnOwogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gODsKCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDEwMDAwMDAwMDAwMDAwMDAwOyAvLyAxMDAgbWlsbGlvbgogICAgdWludDI1NiBwdWJsaWMgYXZhaWxhYmxlVG9rZW5zID0gNjAwMDAwMDAwMDAwMDAwMDsgLy8gNjAgbWlsbGlvbgogICAgdWludDI1NiBwdWJsaWMgdGVhbUFuZEV4cGVydHNUb2tlbnMgPSA0MDAwMDAwMDAwMDAwMDAwOyAvLyA0MCBtaWxsaW9uCiAgICB1aW50MjU2IHB1YmxpYyBwcmljZSA9IDAuMDAwMDAwMDAwMSBldGhlcjsgLy8gMC4wMSBldGhlciBwZXIgdG9rZW4KCiAgICB1aW50IHB1YmxpYyBzdGFydFRpbWU7CiAgICB1aW50IHB1YmxpYyByZWZ1bmRTdGFydFRpbWU7CiAgICB1aW50IHB1YmxpYyByZWZ1bmREdXJhdGlvbiA9IDMgZGF5czsgLy8gMyB5ZWFycwogICAgdWludCBwdWJsaWMgZmlyc3RTdGFnZUR1cmF0aW9uID0gMyBkYXlzOyAvLyAzMSBkYXlzCiAgICB1aW50IHB1YmxpYyBsYXN0U2NoZWR1bGVkVG9wVXA7CiAgICB1aW50IHB1YmxpYyBsYXN0UHJvY2Vzc2VkRGF5ID0gMzsKCiAgICB1aW50IHB1YmxpYyBtYXhEYWlseUNhcCA9IDMzMzMzMDAwMDAwMDA7IC8vIDMzIDMzMyBEQwogICAgbWFwcGluZyAodWludCA9PiB1aW50KSBwdWJsaWMgZGFpbHlUb3RhbHM7CgogICAgdWludCBwdWJsaWMgcXVldWVkQW1vdW50OwoKICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwogICAgYWRkcmVzcyBwdWJsaWMgZXhwZXJ0c0FjY291bnQ7CiAgICBhZGRyZXNzIHB1YmxpYyB0ZWFtQWNjb3VudDsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlT2Y7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8vIGZvciB0ZXN0aW5nCiAgICB1aW50IHB1YmxpYyBjVGltZSA9IDA7CiAgICBmdW5jdGlvbiBzZXRDVGltZSh1aW50IF9jVGltZSkgb25seU93bmVyIHsKICAgICAgICBjVGltZSA9IF9jVGltZTsKICAgIH0KCiAgICBmdW5jdGlvbiBEZUNlbnRlclRva2VuKAogICAgYWRkcmVzcyBfYmVuZWZpY2lhcnksCiAgICBhZGRyZXNzIF9leHBlcnRzQWNjb3VudCwKICAgIGFkZHJlc3MgX3RlYW1BY2NvdW50LAogICAgdWludCBfc3RhcnRUaW1lLAogICAgdWludCBfcmVmdW5kU3RhcnRUaW1lCiAgICApIHsKICAgICAgICBiZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgICAgICBleHBlcnRzQWNjb3VudCA9IF9leHBlcnRzQWNjb3VudDsKICAgICAgICB0ZWFtQWNjb3VudCA9IF90ZWFtQWNjb3VudDsKCiAgICAgICAgc3RhcnRUaW1lID0gX3N0YXJ0VGltZTsKICAgICAgICByZWZ1bmRTdGFydFRpbWUgPSBfcmVmdW5kU3RhcnRUaW1lOwoKICAgICAgICBiYWxhbmNlT2ZbdGhpc10gPSB0b3RhbFN1cHBseTsKCiAgICAgICAgc2NoZWR1bGVkVG9wVXAoKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0aW1lKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIC8vIGZvciB0ZXN0aW5nCiAgICAgICAgaWYoY1RpbWUgPiAwKSB7CiAgICAgICAgICAgIHJldHVybiBjVGltZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBibG9jay50aW1lc3RhbXA7CiAgICB9CgogICAgZnVuY3Rpb24gdG9kYXkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGRheUZvcih0aW1lKCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRheUZvcih1aW50IHRpbWVzdGFtcCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBzdWIodGltZXN0YW1wLCBzdGFydFRpbWUpIC8gMjQgaG91cnM7CiAgICB9CgogICAgZnVuY3Rpb24gbG93ZXJMaW1pdEZvclRvZGF5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiB0b2RheSgpICogMSBldGhlcjsKICAgIH0KCiAgICBmdW5jdGlvbiBzY2hlZHVsZWRUb3BVcCgpIG9ubHlPd25lciB7CiAgICAgICAgdWludCBwYXltZW50ID0gNDAwMDAwMDAwMDAwMDAwOyAvLyA0IG1pbGxpb24gdG9rZW5zCgogICAgICAgIHJlcXVpcmUoc3ViKHRpbWUoKSwgbGFzdFNjaGVkdWxlZFRvcFVwKSA+PSAxIHllYXJzKTsKICAgICAgICByZXF1aXJlKHRlYW1BbmRFeHBlcnRzVG9rZW5zID49IHBheW1lbnQgKiAyKTsKCiAgICAgICAgbGFzdFNjaGVkdWxlZFRvcFVwID0gdGltZSgpOwoKICAgICAgICB0ZWFtQW5kRXhwZXJ0c1Rva2VucyAtPSBwYXltZW50OwogICAgICAgIGJhbGFuY2VPZlt0aGlzXSA9IHN1YihiYWxhbmNlT2ZbdGhpc10sIHBheW1lbnQpOwogICAgICAgIGJhbGFuY2VPZltleHBlcnRzQWNjb3VudF0gPSBhZGQoYmFsYW5jZU9mW2V4cGVydHNBY2NvdW50XSwgcGF5bWVudCk7CgogICAgICAgIHRlYW1BbmRFeHBlcnRzVG9rZW5zIC09IHBheW1lbnQ7CiAgICAgICAgYmFsYW5jZU9mW3RoaXNdID0gc3ViKGJhbGFuY2VPZlt0aGlzXSwgcGF5bWVudCk7CiAgICAgICAgYmFsYW5jZU9mW3RlYW1BY2NvdW50XSA9IGFkZChiYWxhbmNlT2ZbdGVhbUFjY291bnRdLCBwYXltZW50KTsKCiAgICAgICAgVHJhbnNmZXIodGhpcywgZXhwZXJ0c0FjY291bnQsIHBheW1lbnQpOyAvLyBleGVjdXRlIGFuIGV2ZW50IHJlZmxlY3RpbmcgdGhlIGNoYW5nZQogICAgICAgIFRyYW5zZmVyKHRoaXMsIHRlYW1BY2NvdW50LCBwYXltZW50KTsgLy8gZXhlY3V0ZSBhbiBldmVudCByZWZsZWN0aW5nIHRoZSBjaGFuZ2UKICAgIH0KCiAgICAvKiBBbGxvdyBhbm90aGVyIGNvbnRyYWN0IHRvIHNwZW5kIHNvbWUgdG9rZW5zIGluIHlvdXIgYmVoYWxmICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWZ1bmQodWludDI1NiBfdmFsdWUpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKHRpbWUoKSA+IHJlZnVuZFN0YXJ0VGltZSk7CiAgICAgICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgPj0gX3ZhbHVlICogcHJpY2UpOwoKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBzdWIoYmFsYW5jZU9mW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VPZlt0aGlzXSA9IGFkZChiYWxhbmNlT2ZbdGhpc10sIF92YWx1ZSk7CiAgICAgICAgYXZhaWxhYmxlVG9rZW5zID0gYWRkKGF2YWlsYWJsZVRva2VucywgX3ZhbHVlKTsKCiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihfdmFsdWUgKiBwcmljZSk7CgogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIHRoaXMsIF92YWx1ZSk7IC8vIE5vdGlmeSBhbnlvbmUgbGlzdGVuaW5nIHRoYXQgdGhpcyB0cmFuc2ZlciB0b29rIHBsYWNlCiAgICB9CgogICAgLyogU2VuZCB0b2tlbnMgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW21zZy5zZW5kZXJdID49IF92YWx1ZSk7IC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAoKICAgICAgICBpZiAoX3RvID09IGFkZHJlc3ModGhpcykpIHsKICAgICAgICAgICAgcmVmdW5kKF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IHN1YihiYWxhbmNlT2ZbbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZU9mW190b10gPSBhZGQoYmFsYW5jZU9mW190b10sIF92YWx1ZSk7CgogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UKICAgIH0KCiAgICAvKiBBIGNvbnRyYWN0IGF0dGVtcHRzIHRvIGdldCB0aGUgdG9rZW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX3ZhbHVlKTsgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSk7IC8vIENoZWNrIGFsbG93YW5jZQoKICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdID0gc3ViKGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0sIF92YWx1ZSk7IC8vICBTdWJ0cmFjdCBmcm9tIHRoZSBhbGxvd2FuY2UKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dID0gc3ViKGJhbGFuY2VPZltfZnJvbV0sIF92YWx1ZSk7IC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIGJhbGFuY2VPZltfdG9dID0gYWRkKGJhbGFuY2VPZltfdG9dLCBfdmFsdWUpOyAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudAoKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZVJlZnVuZCgpIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZSh0aW1lKCkgLSByZWZ1bmRTdGFydFRpbWUgPiByZWZ1bmREdXJhdGlvbik7CgogICAgICAgIGJlbmVmaWNpYXJ5LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgLyoKICAgICAqICAgIFRva2VuIHB1cmNoYXNpbmcgaGFzIDIgc3RhZ2VzOgogICAgICogICAgICAgLSBGaXJzdCBzdGFnZSBob2xkcyAzMSBkYXlzLiBUaGVyZSBpcyBubyBsaW1pdCBvZiBidXlpbmcuCiAgICAgKiAgICAgICAtIFNlY29uZCBzdGFnZSBob2xkcyB+NSB5ZWFycyBhZnRlci4gVGhlcmUgd2lsbCBiZSBsaW1pdCBvZiAzMzMuMzMgZXRoZXIgcGVyIGRheS4KICAgICAqLwogICAgZnVuY3Rpb24gYnV5KCkgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShzdGFydFRpbWUgPD0gdGltZSgpKTsgLy8gY2hlY2sgaWYgSUNPIGlzIGdvaW5nCgogICAgICAgIHVpbnQgYW1vdW50ID0gZGl2KG1zZy52YWx1ZSwgcHJpY2UpOwoKICAgICAgICBpZiAodGltZSgpIC0gc3RhcnRUaW1lID4gZmlyc3RTdGFnZUR1cmF0aW9uKSB7IC8vIHNlY29uZCBzdGFnZQogICAgICAgICAgICByZXF1aXJlKDEgZXRoZXIgPD0gbXNnLnZhbHVlKTsgLy8gY2hlY2sgbWluLiBsaW1pdAogICAgICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA8PSAzMDAgZXRoZXIpOyAvLyBjaGVjayBtYXguIGxpbWl0CgogICAgICAgICAgICAvLyBzZW5kIDgwJSB0byBiZW5lZmljaWFyeSBhY2NvdW50LCBhbm90aGVyIDIwJSBzdGF5cyBmb3IgcmVmdW5kaW5nCiAgICAgICAgICAgIGJlbmVmaWNpYXJ5LnRyYW5zZmVyKG11bChkaXYobXNnLnZhbHVlLCA1KSwgNCkpOwoKICAgICAgICAgICAgdWludCBjdXJyZW50RGF5ID0gbGFzdFByb2Nlc3NlZERheSArIDE7CiAgICAgICAgICAgIHVpbnQgbGltaXQgPSBtYXhEYWlseUNhcCAtIGRhaWx5VG90YWxzW2N1cnJlbnREYXldOwoKICAgICAgICAgICAgaWYgKGxpbWl0ID49IGFtb3VudCkgewogICAgICAgICAgICAgICAgYXZhaWxhYmxlVG9rZW5zID0gc3ViKGF2YWlsYWJsZVRva2VucywgYW1vdW50KTsKICAgICAgICAgICAgICAgIGJhbGFuY2VPZlt0aGlzXSA9IHN1YihiYWxhbmNlT2ZbdGhpc10sIGFtb3VudCk7IC8vIHN1YnRyYWN0cyBhbW91bnQgZnJvbSBzZWxsZXIncyBiYWxhbmNlCiAgICAgICAgICAgICAgICBkYWlseVRvdGFsc1tjdXJyZW50RGF5XSA9IGFkZChkYWlseVRvdGFsc1tjdXJyZW50RGF5XSwgYW1vdW50KTsKICAgICAgICAgICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IGFkZChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0sIGFtb3VudCk7IC8vIGFkZHMgdGhlIGFtb3VudCB0byBidXllcidzIGJhbGFuY2UKCiAgICAgICAgICAgICAgICBUcmFuc2Zlcih0aGlzLCBtc2cuc2VuZGVyLCBhbW91bnQpOyAvLyBleGVjdXRlIGFuIGV2ZW50IHJlZmxlY3RpbmcgdGhlIGNoYW5nZQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcXVldWVkQW1vdW50ID0gYWRkKHF1ZXVlZEFtb3VudCwgYW1vdW50KTsKICAgICAgICAgICAgICAgIHJlcXVpcmUocXVldWVkQW1vdW50IDw9IGF2YWlsYWJsZVRva2Vucyk7CiAgICAgICAgICAgICAgICBCdXlUaWNrZXQgbWVtb3J5IHRpY2tldCA9IEJ1eVRpY2tldCh7YWNjb3VudDogbXNnLnNlbmRlciwgYW1vdW50OiBhbW91bnQsIHRpbWU6IHRpbWUoKX0pOwogICAgICAgICAgICAgICAgcHVzaFF1ZXVlKHRpY2tldCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfSBlbHNlIHsgLy8gZmlyc3Qgc3RhZ2UKICAgICAgICAgICAgcmVxdWlyZShsb3dlckxpbWl0Rm9yVG9kYXkoKSA8PSBtc2cudmFsdWUpOyAvLyBjaGVjayBtaW4uIGxpbWl0CiAgICAgICAgICAgIHJlcXVpcmUoYW1vdW50IDw9IGF2YWlsYWJsZVRva2Vucyk7CgogICAgICAgICAgICAvLyBzZW5kIDgwJSB0byBiZW5lZmljaWFyeSBhY2NvdW50LCBhbm90aGVyIDIwJSBzdGF5cyBmb3IgcmVmdW5kaW5nCiAgICAgICAgICAgIGJlbmVmaWNpYXJ5LnRyYW5zZmVyKG11bChkaXYobXNnLnZhbHVlLCA1KSwgNCkpOwoKICAgICAgICAgICAgYXZhaWxhYmxlVG9rZW5zID0gc3ViKGF2YWlsYWJsZVRva2VucywgYW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZU9mW3RoaXNdID0gc3ViKGJhbGFuY2VPZlt0aGlzXSwgYW1vdW50KTsgLy8gc3VidHJhY3RzIGFtb3VudCBmcm9tIHNlbGxlcidzIGJhbGFuY2UKICAgICAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gYWRkKGJhbGFuY2VPZlttc2cuc2VuZGVyXSwgYW1vdW50KTsgLy8gYWRkcyB0aGUgYW1vdW50IHRvIGJ1eWVyJ3MgYmFsYW5jZQoKICAgICAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgYW1vdW50KTsgLy8gZXhlY3V0ZSBhbiBldmVudCByZWZsZWN0aW5nIHRoZSBjaGFuZ2UKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcHJvY2Vzc1BlbmRpbmdUaWNrZXRzKCkgb25seU93bmVyIHsKCiAgICAgICAgdWludCBzaXplID0gcXVldWVTaXplKCk7CiAgICAgICAgdWludCBwdHIgPSAwOwogICAgICAgIHVpbnQgY3VycmVudERheTsKICAgICAgICB1aW50IGxpbWl0OwogICAgICAgIEJ1eVRpY2tldCBtZW1vcnkgdGlja2V0OwoKICAgICAgICB3aGlsZSAocHRyIDwgc2l6ZSkgewogICAgICAgICAgICBjdXJyZW50RGF5ID0gbGFzdFByb2Nlc3NlZERheSArIDE7CiAgICAgICAgICAgIGxpbWl0ID0gbWF4RGFpbHlDYXAgLSBkYWlseVRvdGFsc1tjdXJyZW50RGF5XTsKCiAgICAgICAgICAgIC8vIHN0b3AgdGhlbiB0cnlpbmcgdG8gcHJvY2VzcyBmdXR1cmUKICAgICAgICAgICAgaWYgKHN0YXJ0VGltZSArIChjdXJyZW50RGF5IC0gMSkgKiAxIGRheXMgPiB0aW1lKCkpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gbGltaXQgdG8gcHJldmVudCBvdXQgb2YgZ2FzIGVycm9yCiAgICAgICAgICAgIGlmIChwdHIgPiA1MCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aWNrZXQgPSBwZWVrUXVldWUoKTsKCiAgICAgICAgICAgIGlmIChsaW1pdCA8IHRpY2tldC5hbW91bnQgfHwgdGlja2V0LnRpbWUgLSAxMDAwIHNlY29uZHMgPiBzdGFydFRpbWUgKyAoY3VycmVudERheSAtIDEpICogMSBkYXlzKSB7CiAgICAgICAgICAgICAgICBsYXN0UHJvY2Vzc2VkRGF5ICs9IDE7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcG9wUXVldWUoKTsKICAgICAgICAgICAgcHRyICs9IDE7CgogICAgICAgICAgICBhdmFpbGFibGVUb2tlbnMgPSBzdWIoYXZhaWxhYmxlVG9rZW5zLCB0aWNrZXQuYW1vdW50KTsKICAgICAgICAgICAgcXVldWVkQW1vdW50ID0gc3ViKHF1ZXVlZEFtb3VudCwgdGlja2V0LmFtb3VudCk7CiAgICAgICAgICAgIGRhaWx5VG90YWxzW2N1cnJlbnREYXldID0gYWRkKGRhaWx5VG90YWxzW2N1cnJlbnREYXldLCB0aWNrZXQuYW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZU9mW3RoaXNdID0gc3ViKGJhbGFuY2VPZlt0aGlzXSwgdGlja2V0LmFtb3VudCk7CiAgICAgICAgICAgIGJhbGFuY2VPZlt0aWNrZXQuYWNjb3VudF0gPSBhZGQoYmFsYW5jZU9mW3RpY2tldC5hY2NvdW50XSwgdGlja2V0LmFtb3VudCk7IC8vIGFkZHMgdGhlIGFtb3VudCB0byBidXllcidzIGJhbGFuY2UKCiAgICAgICAgICAgIFRyYW5zZmVyKHRoaXMsIHRpY2tldC5hY2NvdW50LCB0aWNrZXQuYW1vdW50KTsgLy8gZXhlY3V0ZSBhbiBldmVudCByZWZsZWN0aW5nIHRoZSBjaGFuZ2UKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBidXkoKTsKICAgIH0KfQ=='.
	

]
