Class {
	#name : #SRT0cb34fa6011d573876f29803fb21ad5f1e01388b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0cb34fa6011d573876f29803fb21ad5f1e01388b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvbWF0aC9NYXRoLnNvbAoKLyoqCiAqIEB0aXRsZSBNYXRoCiAqIEBkZXYgQXNzb3J0ZWQgbWF0aCBvcGVyYXRpb25zCiAqLwoKbGlicmFyeSBNYXRoIHsKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL21hdGgvU2FmZU1hdGguc29sCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL1N0YW5kaW5nT3JkZXIuc29sCgovKioKICogQHRpdGxlIFN0YW5kaW5nIG9yZGVyCiAqIEBkZXYgTGlmZWN5Y2xlIG9mIGEgc3RhbmRpbmcgb3JkZXI6CiAqICAtIHRoZSBwYXltZW50IGFtb3VudCBwZXIgaW50ZXJ2YWwgaXMgc2V0IGF0IGNvbnN0cnVjdGlvbiB0aW1lIGFuZCBjYW4gbm90IGJlIGNoYW5nZWQgYWZ0ZXJ3YXJkcwogKiAgLSB0aGUgcGF5ZWUgaXMgc2V0IGJ5IHRoZSBvd25lciBhbmQgY2FuIG5vdCBiZSBjaGFuZ2VkIGFmdGVyIGNyZWF0aW9uCiAqICAtIGF0IDxzdGFydFRpbWU+ICh1bml4IHRpbWVzdGFtcCkgdGhlIGZpcnN0IHBheW1lbnQgaXMgZHVlCiAqICAtIGV2ZXJ5IDxpbnRlcnZhbGw+IHNlY29uZHMgdGhlIG5leHQgcGF5bWVudCBpcyBkdWUKICogIC0gdGhlIG93bmVyIGNhbiBhZGQgZnVuZHMgdG8gdGhlIG9yZGVyIGNvbnRyYWN0IGF0IGFueSB0aW1lCiAqICAtIHRoZSBvd25lciBjYW4gd2l0aGRyYXcgb25seSBmdW5kcyB0aGF0IGRvIG5vdCAoeWV0KSBiZWxvbmcgdG8gdGhlIHBheWVlCiAqICAtIHRoZSBvd25lciBjYW4gdGVybWluYXRlIGEgc3RhbmRpbmdvcmRlciBhbnl0aW1lLiBUZXJtaW5hdGlvbiByZXN1bHRzIGluOgogKiAgICAtIE5vIGZ1cnRoZXIgZnVuZGluZyBiZWluZyBhbGxvd2VkCiAqICAgIC0gb3JkZXIgbWFya2VkIGFzICJ0ZXJtaW5hdGVkIiBhbmQgbm90IGJlaW5nIGRpc3BsYXllZCBhbnltb3JlIGluIG93bmVyIFVJCiAqICAgIC0gYXMgbG9uZyBhcyB0aGVyZSBhcmUgdW5jb2xsZWN0ZWQgZnVuZHMgZW50aXRsZWQgdG8gdGhlIHBheWVlLCBpdCBpcyBzdGlsbCBkaXNwbGF5ZWQgaW4gcGF5ZWUgVUkKICogICAgLSB0aGUgcGF5ZWUgY2FuIHN0aWxsIGNvbGxlY3QgZnVuZHMgb3duZWQgdG8gaGltCiAqCiAqICAgKiBUZXJtaW5vbG9neSAqCiAqICAgIndpdGhkcmF3IiAtPiBwZXJmb3JtZWQgYnkgb3duZXIgLSB0cmFuc2ZlciBmdW5kcyBzdG9yZWQgaW4gY29udHJhY3QgYmFjayB0byBvd25lcgogKiAgICJjb2xsZWN0IiAgLT4gcGVyZm9ybWVkIGJ5IHBheWVlIC0gdHJhbnNmZXIgZW50aXRsZWQgZnVuZHMgZnJvbSBjb250cmFjdCB0byBwYXllZQogKgogKiAgICogSG93IGRvZXMgYSBwYXltZW50IHdvcms/ICoKICogICBTaW5jZSBhIGNvbnRyYWN0IGNhbiBub3QgdHJpZ2dlciBhIHBheW1lbnQgYnkgaXRzZWxmLCBpdCBwcm92aWRlcyB0aGUgbWV0aG9kICJjb2xsZWN0RnVuZHMiIGZvciB0aGUgcGF5ZWUuCiAqICAgVGhlIHBheWVlIGNhbiBhbHdheXMgcXVlcnkgdGhlIGNvbnRyYWN0IHRvIGRldGVybWluZSBob3cgbWFueSBmdW5kcyBoZSBpcyBlbnRpdGxlZCB0byBjb2xsZWN0LgogKiAgIFRoZSBwYXllZSBjYW4gY2FsbCAiY29sbGVjdEZ1bmRzIiB0byBpbml0aWF0ZSB0cmFuc2ZlciBvZiBlbnRpdGxlZCBmdW5kcyB0byBoaXMgYWRkcmVzcy4KICovCmNvbnRyYWN0IFN0YW5kaW5nT3JkZXIgewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogICAgdXNpbmcgTWF0aCBmb3IgdWludDsKCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsgICAgICAgIC8qKiBUaGUgb3duZXIgb2YgdGhpcyBvcmRlciAqLwogICAgYWRkcmVzcyBwdWJsaWMgcGF5ZWU7ICAgICAgICAvKiogVGhlIHBheWVlIGlzIHRoZSByZWNlaXZlciBvZiBmdW5kcyAqLwogICAgdWludCBwdWJsaWMgc3RhcnRUaW1lOyAgICAgICAvKiogRGF0ZSBhbmQgdGltZSAodW5peCB0aW1lc3RhbXAgLSBzZWNvbmRzIHNpbmNlIDE5NzApIHdoZW4gZmlyc3QgcGF5bWVudCBjYW4gYmUgY2xhaW1lZCBieSBwYXllZSAqLwogICAgdWludCBwdWJsaWMgcGF5bWVudEludGVydmFsOyAvKiogSW50ZXJ2YWwgZm9yIHBheW1lbnRzIChVbml0OiBzZWNvbmRzKSAqLwogICAgdWludCBwdWJsaWMgcGF5bWVudEFtb3VudDsgICAvKiogSG93IG11Y2ggY2FuIHBheWVlIGNsYWltIHBlciBwZXJpb2QgKFVuaXQ6IFdlaSkgKi8KICAgIHVpbnQgcHVibGljIGNsYWltZWRGdW5kczsgICAgLyoqIEhvdyBtdWNoIGZ1bmRzIGhhdmUgYmVlbiBjbGFpbWVkIGFscmVhZHkgKFVuaXQ6IFdlaSkgKi8KICAgIHN0cmluZyBwdWJsaWMgb3duZXJMYWJlbDsgICAgLyoqIExhYmVsIChzZXQgYnkgY29udHJhY3Qgb3duZXIpICovCiAgICBib29sIHB1YmxpYyBpc1Rlcm1pbmF0ZWQ7ICAgIC8qKiBNYXJrcyBvcmRlciBhcyB0ZXJtaW5hdGVkICovCiAgICB1aW50IHB1YmxpYyB0ZXJtaW5hdGlvblRpbWU7IC8qKiBEYXRlIGFuZCB0aW1lICh1bml4IHRpbWVzdGFtcCAtIHNlY29uZHMgc2luY2UgMTk3MCkgd2hlbiBvcmRlciB0ZXJtaW5hdGVkICovCgogICAgbW9kaWZpZXIgb25seVBheWVlKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBwYXllZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKiBFdmVudCB0cmlnZ2VyZWQgd2hlbiBwYXllZSBjb2xsZWN0cyBmdW5kcyAqLwogICAgZXZlbnQgQ29sbGVjdCh1aW50IGFtb3VudCk7CiAgICAvKiogRXZlbnQgdHJpZ2dlcmVkIHdoZW4gY29udHJhY3QgZ2V0cyBmdW5kZWQgKi8KICAgIGV2ZW50IEZ1bmQodWludCBhbW91bnQpOwogICAgLyoqIEV2ZW50IHRyaWdnZXJlZCB3aGVuIG93bmVyIHdpdGhkcmF3cyBmdW5kcyAqLwogICAgZXZlbnQgV2l0aGRyYXcodWludCBhbW91bnQpOwoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IKICAgICAqIEBwYXJhbSBfb3duZXIgVGhlIG93bmVyIG9mIHRoZSBjb250cmFjdAogICAgICogQHBhcmFtIF9wYXllZSBUaGUgcGF5ZWUgLSB0aGUgYWNjb3VudCB0aGF0IGNhbiBjb2xsZWN0IHBheW1lbnRzIGZyb20gdGhpcyBjb250cmFjdAogICAgICogQHBhcmFtIF9wYXltZW50SW50ZXJ2YWwgSW50ZXJ2YWwgZm9yIHBheW1lbnRzLCB1bml0OiBzZWNvbmRzCiAgICAgKiBAcGFyYW0gX3BheW1lbnRBbW91bnQgVGhlIGFtb3VudCBwYXllZSBjYW4gY2xhaW0gcGVyIHBlcmlvZCwgdW5pdDogd2VpCiAgICAgKiBAcGFyYW0gX3N0YXJ0VGltZSBEYXRlIGFuZCB0aW1lICh1bml4IHRpbWVzdGFtcCAtIHNlY29uZHMgc2luY2UgMTk3MCkgd2hlbiBmaXJzdCBwYXltZW50IGNhbiBiZSBjbGFpbWVkIGJ5IHBheWVlCiAgICAgKiBAcGFyYW0gX2xhYmVsIExhYmVsIGZvciBjb250cmFjdCwgZS5nICJyZW50IiBvciAid2Vla2x5IHBheWNoZWNrIgogICAgICovCiAgICBmdW5jdGlvbiBTdGFuZGluZ09yZGVyKAogICAgICAgIGFkZHJlc3MgX293bmVyLAogICAgICAgIGFkZHJlc3MgX3BheWVlLAogICAgICAgIHVpbnQgX3BheW1lbnRJbnRlcnZhbCwKICAgICAgICB1aW50IF9wYXltZW50QW1vdW50LAogICAgICAgIHVpbnQgX3N0YXJ0VGltZSwKICAgICAgICBzdHJpbmcgX2xhYmVsCiAgICApCiAgICAgICAgcGF5YWJsZQogICAgewogICAgICAgIC8vIFNhbml0eSBjaGVjayBwYXJhbWV0ZXJzCiAgICAgICAgcmVxdWlyZShfcGF5bWVudEludGVydmFsID4gMCk7CiAgICAgICAgcmVxdWlyZShfcGF5bWVudEFtb3VudCA+IDApOwogICAgICAgIC8vIEZvbGxvd2luZyBjaGVjayBpcyBub3QgZXhhY3QgZm9yIHVuaWNvZGUgc3RyaW5ncywgYnV0IGhlcmUgaSBqdXN0IHdhbnQgdG8gbWFrZSBzdXJlIHRoYXQgc29tZSBsYWJlbCBpcyBwcm92aWRlZAogICAgICAgIC8vIFNlZSBodHRwczovL2V0aGVyZXVtLnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy8xMzg2Mi9pcy1pdC1wb3NzaWJsZS10by1jaGVjay1zdHJpbmctdmFyaWFibGVzLWxlbmd0aC1pbnNpZGUtdGhlLWNvbnRyYWN0LzEzODg2CiAgICAgICAgcmVxdWlyZShieXRlcyhfbGFiZWwpLmxlbmd0aCA+IDIpOwoKICAgICAgICAvLyBTZXQgb3duZXIgdG8gX293bmVyLCBhcyBtc2cuc2VuZGVyIGlzIHRoZSBTdGFuZGluZ09yZGVyRmFjdG9yeSBjb250cmFjdAogICAgICAgIG93bmVyID0gX293bmVyOwoKICAgICAgICBwYXllZSA9IF9wYXllZTsKICAgICAgICBwYXltZW50SW50ZXJ2YWwgPSBfcGF5bWVudEludGVydmFsOwogICAgICAgIHBheW1lbnRBbW91bnQgPSBfcGF5bWVudEFtb3VudDsKICAgICAgICBvd25lckxhYmVsID0gX2xhYmVsOwogICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICAgICAgaXNUZXJtaW5hdGVkID0gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBGYWxsYmFjayBmdW5jdGlvbi4KICAgICAqIEFsbG93cyBhZGRpbmcgZnVuZHMgdG8gZXhpc3Rpbmcgb3JkZXIuIFdpbGwgdGhyb3cgaW4gY2FzZSB0aGUgb3JkZXIgaXMgdGVybWluYXRlZCEKICAgICAqLwogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBpZiAoaXNUZXJtaW5hdGVkKSB7CiAgICAgICAgICAgIC8vIGFkZGluZyBmdW5kcyBub3QgYWxsb3dlZCBmb3IgdGVybWluYXRlZCBvcmRlcnMKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIC8vIExvZyBGdW5kIGV2ZW50CiAgICAgICAgRnVuZChtc2cudmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogRGV0ZXJtaW5lIGhvdyBtdWNoIGZ1bmRzIHBheWVlIGlzIGVudGl0bGVkIHRvIGNvbGxlY3QKICAgICAqIE5vdGUgdGhhdCB0aGlzIG1pZ2h0IGJlIG1vcmUgdGhhbiBhY3R1YWwgZnVuZHMgYXZhaWxhYmxlIQogICAgICogQHJldHVybiBOdW1iZXIgb2Ygd2VpIHRoYXQgcGF5ZWUgaXMgZW50aXRsZWQgdG8gY29sbGVjdAogICAgICovCiAgICBmdW5jdGlvbiBnZXRFbnRpdGxlZEZ1bmRzKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoZSBjb250cmFjdCBzdGFydFRpbWUgaGFzIGJlZW4gcmVhY2hlZCBhdCBhbGwKICAgICAgICBpZiAobm93IDwgc3RhcnRUaW1lKSB7CiAgICAgICAgICAgIC8vIHN0YXJ0VGltZSBub3QgeWV0IHJlYWNoZWQKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQoKICAgICAgICAvLyBzdGFydFRpbWUgaGFzIGJlZW4gcmVhY2hlZCwgc28gYWRkIGZpcnN0IHBheW1lbnQKICAgICAgICB1aW50IGVudGl0bGVkQW1vdW50ID0gcGF5bWVudEFtb3VudDsKCiAgICAgICAgLy8gRGV0ZXJtaW5lIGVuZFRpbWUgZm9yIGNhbGN1bGF0aW9uLiBJZiBvcmRlciBoYXMgYmVlbiB0ZXJtaW5hdGVkIC0+IHRlcm1pbmF0aW9uVGltZSwgb3RoZXJ3aXNlIGN1cnJlbnQgdGltZQogICAgICAgIHVpbnQgZW5kVGltZSA9IGlzVGVybWluYXRlZCA/IHRlcm1pbmF0aW9uVGltZSA6IG5vdzsKCiAgICAgICAgLy8gY2FsY3VsYXRlIG51bWJlciBvZiBjb21wbGV0ZSBpbnRlcnZhbHMgc2luY2Ugc3RhcnRUaW1lCiAgICAgICAgdWludCBydW50aW1lID0gZW5kVGltZS5zdWIoc3RhcnRUaW1lKTsKICAgICAgICB1aW50IGNvbXBsZXRlSW50ZXJ2YWxzID0gcnVudGltZS5kaXYocGF5bWVudEludGVydmFsKTsgLy8gRGl2aXNpb24gYWx3YXlzIHRydW5jYXRlcywgc28gaW1wbGljaXRseSByb3VuZGluZyBkb3duIGhlcmUuCiAgICAgICAgZW50aXRsZWRBbW91bnQgPSBlbnRpdGxlZEFtb3VudC5hZGQoY29tcGxldGVJbnRlcnZhbHMubXVsKHBheW1lbnRBbW91bnQpKTsKCiAgICAgICAgLy8gc3VidHJhY3QgYWxyZWFkeSBjb2xsZWN0ZWQgZnVuZHMKICAgICAgICByZXR1cm4gZW50aXRsZWRBbW91bnQuc3ViKGNsYWltZWRGdW5kcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZXRlcm1pbmUgaG93IG11Y2ggZnVuZHMgYXJlIGF2YWlsYWJsZSBmb3IgcGF5ZWUgdG8gY29sbGVjdAogICAgICogVGhpcyBjYW4gYmUgbGVzcyB0aGFuIHRoZSBlbnRpdGxlZCBhbW91bnQgaWYgdGhlIGNvbnRyYWN0IGRvZXMgbm90IGhhdmUgZW5vdWdoIGZ1bmRzIHRvIGNvdmVyIHRoZSBkdWUgcGF5bWVudHMsCiAgICAgKiBpbiBvdGhlciB3b3JkczogVGhlIG93bmVyIGhhcyBub3QgcHV0IGVub3VnaCBmdW5kcyBpbnRvIHRoZSBjb250cmFjdC4KICAgICAqIEByZXR1cm4gTnVtYmVyIG9mIHdlaSB0aGF0IHBheWVlIGNhbiBjb2xsZWN0CiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFVuY2xhaW1lZEZ1bmRzKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIC8vIGRvbid0IHJldHVybiBtb3JlIHRoYW4gYXZhaWxhYmxlIGJhbGFuY2UKICAgICAgICByZXR1cm4gZ2V0RW50aXRsZWRGdW5kcygpLm1pbjI1Nih0aGlzLmJhbGFuY2UpOwogICAgfQoKICAgIC8qKgogICAgICogRGV0ZXJtaW5lIGhvdyBtdWNoIGZ1bmRzIGFyZSBzdGlsbCBvd25lZCBieSBvd25lciAobm90IHlldCByZXNlcnZlZCBmb3IgcGF5ZWUpCiAgICAgKiBOb3RlIHRoYXQgdGhpcyBjYW4gYmUgbmVnYXRpdmUgaW4gY2FzZSBjb250cmFjdCBpcyBub3QgZnVuZGVkIGVub3VnaCB0byBjb3ZlciBlbnRpdGxlZCBhbW91bnQgZm9yIHBheWVlIQogICAgICogQHJldHVybiBudW1iZXIgb2Ygd2VpIGJlbG9uZ2luZyBvd25lciwgbmVnYXRpdmUgaWYgY29udHJhY3QgaXMgbWlzc2luZyBmdW5kcyB0byBjb3ZlciBwYXltZW50cwogICAgICovCiAgICBmdW5jdGlvbiBnZXRPd25lckZ1bmRzKCkgY29uc3RhbnQgcmV0dXJucyAoaW50KSB7CiAgICAgICAgLy8gQ29udmVyc2lvbiBmcm9tIHVuc2lnbmVkIGludCB0byBpbnQgd2lsbCBwcm9kdWNlIHVuZXhwZWN0ZWQgcmVzdWx0cyBvbmx5IGZvciB2ZXJ5IGxhcmdlCiAgICAgICAgLy8gbnVtYmVycyAoMl4yNTUgYW5kIGdyZWF0ZXIpLiBUaGlzIGlzIGFib3V0IDUuN2UrNTggZXRoZXIuCiAgICAgICAgLy8gLT4gVGhlcmUgd2lsbCBiZSBubyBzaXR1YXRpb24gd2hlbiB0aGUgY29udHJhY3QgYmFsYW5jZSAodGhpcy5iYWxhbmNlKSB3aWxsIGhpdCB0aGlzIGxpbWl0CiAgICAgICAgLy8gLT4gZ2V0RW50aXRsZWRGdW5kcygpIG1pZ2h0IGVuZCB1cCBoaXR0aW5nIHRoaXMgbGltaXQgd2hlbiB0aGUgY29udHJhY3QgY3JlYXRvciBJTlRFTlRJT05BTExZIHNldHMKICAgICAgICAvLyAgICBhbnkgY29tYmluYXRpb24gb2YgYWJzdXJkbHkgaGlnaCBwYXltZW50IHJhdGUsIGxvdyBpbnRlcnZhbCBvciBhIHN0YXJ0VGltZSB3YXkgaW4gdGhlIHBhc3QuCiAgICAgICAgLy8gICAgQmVpbmcgZW50aXRsZWQgdG8gbW9yZSB0aGFuIDUuN2UrNTggZXRoZXIgb2J2aW91c2x5IHdpbGwgbmV2ZXIgYmUgYW4gZXhwZWN0ZWQgdXNlY2FzZQogICAgICAgIC8vIFRoZXJlZm9yIHRoZSBjb252ZXJzaW9uIGNhbiBiZSBjb25zaWRlcmVkIHNhZmUgaGVyZS4KICAgICAgICByZXR1cm4gaW50MjU2KHRoaXMuYmFsYW5jZSkgLSBpbnQyNTYoZ2V0RW50aXRsZWRGdW5kcygpKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbGxlY3QgcGF5bWVudAogICAgICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHBheWVlLiBUaGlzIHdpbGwgdHJhbnNmZXIgYWxsIGF2YWlsYWJsZSBmdW5kcyAoc2VlIGdldFVuY2xhaW1lZEZ1bmRzKSB0byBwYXllZQogICAgICogQHJldHVybiBhbW91bnQgdGhhdCBoYXMgYmVlbiB0cmFuc2ZlcnJlZCEKICAgICAqLwogICAgZnVuY3Rpb24gY29sbGVjdEZ1bmRzKCkgb25seVBheWVlIHJldHVybnModWludCkgewogICAgICAgIHVpbnQgYW1vdW50ID0gZ2V0VW5jbGFpbWVkRnVuZHMoKTsKICAgICAgICBpZiAoYW1vdW50IDw9IDApIHsKICAgICAgICAgICAgLy8gbm90aGluZyB0byBjb2xsZWN0IDotKAogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CgogICAgICAgIC8vIGtlZXAgdHJhY2sgb2YgY29sbGVjdGVkIGZ1bmRzCiAgICAgICAgY2xhaW1lZEZ1bmRzID0gY2xhaW1lZEZ1bmRzLmFkZChhbW91bnQpOwoKICAgICAgICAvLyBjcmVhdGUgbG9nIGVudHJ5CiAgICAgICAgQ29sbGVjdChhbW91bnQpOwoKICAgICAgICAvLyBpbml0aWF0ZSB0cmFuc2ZlciBvZiB1bmNsYWltZWQgZnVuZHMgdG8gcGF5ZWUKICAgICAgICBwYXllZS50cmFuc2ZlcihhbW91bnQpOwoKICAgICAgICByZXR1cm4gYW1vdW50OwogICAgfQoKICAgIC8qKgogICAgICogV2l0aGRyYXcgcmVxdWVzdGVkIGFtb3VudCBiYWNrIHRvIG93bmVyLgogICAgICogT25seSBmdW5kcyBub3QgKHlldCkgcmVzZXJ2ZWQgZm9yIHBheWVlIGNhbiBiZSB3aXRoZHJhd24uIFNvIGl0IGlzIG5vdCBwb3NzaWJsZSBmb3IgdGhlIG93bmVyCiAgICAgKiB0byB3aXRoZHJhdyB1bmNsYWltZWQgZnVuZHMgLSBUaGV5IGNhbiBvbmx5IGJlIGNsYWltZWQgYnkgcGF5ZWUhCiAgICAgKiBXaXRoZHJhd2luZyBmdW5kcyBkb2VzIG5vdCB0ZXJtaW5hdGUgdGhlIG9yZGVyLCBhdCBhbnkgdGltZSBvd25lciBjYW4gZnVuZCBpdCBhZ2FpbiEKICAgICAqIEBwYXJhbSBhbW91bnQgTnVtYmVyIG9mIHdlaSBvd25lciB3YW50cyB0byB3aXRoZHJhdwogICAgICovCiAgICBmdW5jdGlvbiBXaXRoZHJhd093bmVyRnVuZHModWludCBhbW91bnQpIG9ubHlPd25lciB7CiAgICAgICAgaW50IGludE93bmVyRnVuZHMgPSBnZXRPd25lckZ1bmRzKCk7IC8vIHRoaXMgbWlnaHQgYmUgbmVnYXRpdmUgaW4gY2FzZSBvZiB1bmRlcmZ1bmRlZCBjb250cmFjdCEKICAgICAgICBpZiAoaW50T3duZXJGdW5kcyA8PSAwKSB7CiAgICAgICAgICAgIC8vIG5vdGhpbmcgYXZhaWxhYmxlIHRvIHdpdGhkcmF3IDotKAogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgLy8gY29udmVyc2lvbiBpbnQgLT4gdWludCBpcyBzYWZlIGhlcmUgYXMgSSdtIGNoZWNraW5nIDw9IDAgYWJvdmUhCiAgICAgICAgdWludDI1NiBvd25lckZ1bmRzID0gdWludDI1NihpbnRPd25lckZ1bmRzKTsKCiAgICAgICAgaWYgKGFtb3VudCA+IG93bmVyRnVuZHMpIHsKICAgICAgICAgICAgLy8gVHJ5aW5nIHRvIHdpdGhkcmF3IG1vcmUgdGhhbiBhdmFpbGFibGUhCiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KCiAgICAgICAgLy8gTG9nIFdpdGhkcmF3IGV2ZW50CiAgICAgICAgV2l0aGRyYXcoYW1vdW50KTsKCiAgICAgICAgb3duZXIudHJhbnNmZXIoYW1vdW50KTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlcm1pbmF0ZSBvcmRlcgogICAgICogTWFya3MgdGhlIG9yZGVyIGFzIHRlcm1pbmF0ZWQuCiAgICAgKiBDYW4gb25seSBiZSBleGVjdXRlZCBpZiBubyBvd25lcmZ1bmRzIGFyZSBsZWZ0CiAgICAgKi8KICAgIGZ1bmN0aW9uIFRlcm1pbmF0ZSgpIG9ubHlPd25lciB7CiAgICAgICAgYXNzZXJ0KGdldE93bmVyRnVuZHMoKSA8PSAwKTsKICAgICAgICB0ZXJtaW5hdGlvblRpbWUgPSBub3c7CiAgICAgICAgaXNUZXJtaW5hdGVkID0gdHJ1ZTsKICAgIH0KfQoKCi8qKgogKiBAdGl0bGUgU3RhbmRpbmdPcmRlciBmYWN0b3J5CiAqLwpjb250cmFjdCBTdGFuZGluZ09yZGVyRmFjdG9yeSB7CiAgICAvLyBrZWVwIHRyYWNrIHdobyBpc3N1ZWQgc3RhbmRpbmcgb3JkZXJzCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IFN0YW5kaW5nT3JkZXJbXSkgcHVibGljIHN0YW5kaW5nT3JkZXJzQnlPd25lcjsKICAgIC8vIGtlZXAgdHJhY2sgb2YgcGF5ZWVzIG9mIHN0YW5kaW5nIG9yZGVycwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBTdGFuZGluZ09yZGVyW10pIHB1YmxpYyBzdGFuZGluZ09yZGVyc0J5UGF5ZWU7CgogICAgLy8gRXZlbnRzCiAgICBldmVudCBMb2dPcmRlckNyZWF0ZWQoCiAgICAgICAgYWRkcmVzcyBvcmRlckFkZHJlc3MsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG93bmVyLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBwYXllZQogICAgKTsKCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG5ldyBzdGFuZGluZyBvcmRlcgogICAgICogVGhlIG93bmVyIG9mIHRoZSBuZXcgb3JkZXIgd2lsbCBiZSB0aGUgYWRkcmVzcyB0aGF0IGNhbGxlZCB0aGlzIGZ1bmN0aW9uIChtc2cuc2VuZGVyKQogICAgICogQHBhcmFtIF9wYXllZSBUaGUgcGF5ZWUgLSB0aGUgYWNjb3VudCB0aGF0IGNhbiBjb2xsZWN0IHBheW1lbnRzIGZyb20gdGhpcyBjb250cmFjdAogICAgICogQHBhcmFtIF9wYXltZW50SW50ZXJ2YWwgSW50ZXJ2YWwgZm9yIHBheW1lbnRzLCB1bml0OiBzZWNvbmRzCiAgICAgKiBAcGFyYW0gX3BheW1lbnRBbW91bnQgVGhlIGFtb3VudCBwYXllZSBjYW4gY2xhaW0gcGVyIHBlcmlvZCwgdW5pdDogd2VpCiAgICAgKiBAcGFyYW0gX3N0YXJ0VGltZSBEYXRlIGFuZCB0aW1lICh1bml4IHRpbWVzdGFtcCAtIHNlY29uZHMgc2luY2UgMTk3MCkgd2hlbiBmaXJzdCBwYXltZW50IGNhbiBiZSBjbGFpbWVkIGJ5IHBheWVlCiAgICAgKiBAcGFyYW0gX2xhYmVsIExhYmVsIGZvciBjb250cmFjdCwgZS5nICJyZW50IiBvciAid2Vla2x5IHBheWNoZWNrIgogICAgICogQHJldHVybiBBZGRyZXNzIG9mIG5ldyBjcmVhdGVkIHN0YW5kaW5nT3JkZXIgY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gY3JlYXRlU3RhbmRpbmdPcmRlcihhZGRyZXNzIF9wYXllZSwgdWludCBfcGF5bWVudEFtb3VudCwgdWludCBfcGF5bWVudEludGVydmFsLCB1aW50IF9zdGFydFRpbWUsIHN0cmluZyBfbGFiZWwpIHJldHVybnMgKFN0YW5kaW5nT3JkZXIpIHsKICAgICAgICBTdGFuZGluZ09yZGVyIHNvID0gbmV3IFN0YW5kaW5nT3JkZXIobXNnLnNlbmRlciwgX3BheWVlLCBfcGF5bWVudEludGVydmFsLCBfcGF5bWVudEFtb3VudCwgX3N0YXJ0VGltZSwgX2xhYmVsKTsKICAgICAgICBzdGFuZGluZ09yZGVyc0J5T3duZXJbbXNnLnNlbmRlcl0ucHVzaChzbyk7CiAgICAgICAgc3RhbmRpbmdPcmRlcnNCeVBheWVlW19wYXllZV0ucHVzaChzbyk7CiAgICAgICAgTG9nT3JkZXJDcmVhdGVkKHNvLCBtc2cuc2VuZGVyLCBfcGF5ZWUpOwogICAgICAgIHJldHVybiBzbzsKICAgIH0KCiAgICAvKioKICAgICAqIERldGVybWluZSBob3cgbWFueSBvcmRlcnMgYXJlIG93bmVkIGJ5IGNhbGxlciAobXNnLnNlbmRlcikKICAgICAqIEByZXR1cm4gTnVtYmVyIG9mIG9yZGVycwogICAgICovCiAgICBmdW5jdGlvbiBnZXROdW1PcmRlcnNCeU93bmVyKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBzdGFuZGluZ09yZGVyc0J5T3duZXJbbXNnLnNlbmRlcl0ubGVuZ3RoOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IG9yZGVyIGJ5IGluZGV4IGZyb20gdGhlIE93bmVyIG1hcHBpbmcKICAgICAqIEBwYXJhbSBpbmRleCBJbmRleCBvZiBvcmRlcgogICAgICogQHJldHVybiBzdGFuZGluZyBvcmRlciBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldE93bk9yZGVyQnlJbmRleCh1aW50IGluZGV4KSBjb25zdGFudCByZXR1cm5zIChTdGFuZGluZ09yZGVyKSB7CiAgICAgICAgcmV0dXJuIHN0YW5kaW5nT3JkZXJzQnlPd25lclttc2cuc2VuZGVyXVtpbmRleF07CiAgICB9CgogICAgLyoqCiAgICAgKiBEZXRlcm1pbmUgaG93IG1hbnkgb3JkZXJzIGFyZSBwYXlpbmcgdG8gY2FsbGVyIChtc2cuc2VuZGVyKQogICAgICogQHJldHVybiBOdW1iZXIgb2Ygb3JkZXJzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldE51bU9yZGVyc0J5UGF5ZWUoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHN0YW5kaW5nT3JkZXJzQnlQYXllZVttc2cuc2VuZGVyXS5sZW5ndGg7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgb3JkZXIgYnkgaW5kZXggZnJvbSB0aGUgUGF5ZWUgbWFwcGluZwogICAgICogQHBhcmFtIGluZGV4IEluZGV4IG9mIG9yZGVyCiAgICAgKiBAcmV0dXJuIHN0YW5kaW5nIG9yZGVyIGFkZHJlc3MKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0UGFpZE9yZGVyQnlJbmRleCh1aW50IGluZGV4KSBjb25zdGFudCByZXR1cm5zIChTdGFuZGluZ09yZGVyKSB7CiAgICAgICAgcmV0dXJuIHN0YW5kaW5nT3JkZXJzQnlQYXllZVttc2cuc2VuZGVyXVtpbmRleF07CiAgICB9Cn0='.
	

]
