Class {
	#name : #SRTa6a840e50bcaa50da017b91a0d86b8b2d41156ee,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa6a840e50bcaa50da017b91a0d86b8b2d41156ee >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAgIC8qKgogICAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgICAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICAgKi8KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAgICoKICAgICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgLyoqCiAgICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAgICovCiAgICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgICAgIH0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKfQoKLyoqCiAqIEB0aXRsZSBTYWZlRVJDMjAKICogQGRldiBXcmFwcGVycyBhcm91bmQgRVJDMjAgb3BlcmF0aW9ucyB0aGF0IHRocm93IG9uIGZhaWx1cmUuCiAqIFRvIHVzZSB0aGlzIGxpYnJhcnkgeW91IGNhbiBhZGQgYSBgdXNpbmcgU2FmZUVSQzIwIGZvciBFUkMyMDtgIHN0YXRlbWVudCB0byB5b3VyIGNvbnRyYWN0LAogKiB3aGljaCBhbGxvd3MgeW91IHRvIGNhbGwgdGhlIHNhZmUgb3BlcmF0aW9ucyBhcyBgdG9rZW4uc2FmZVRyYW5zZmVyKC4uLilgLCBldGMuCiAqLwpsaWJyYXJ5IFNhZmVFUkMyMCB7CiAgICBmdW5jdGlvbiBzYWZlVHJhbnNmZXIoRVJDMjBCYXNpYyB0b2tlbiwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIGFzc2VydCh0b2tlbi50cmFuc2Zlcih0bywgdmFsdWUpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlVHJhbnNmZXJGcm9tKEVSQzIwIHRva2VuLCBhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIGludGVybmFsIHsKICAgICAgICBhc3NlcnQodG9rZW4udHJhbnNmZXJGcm9tKGZyb20sIHRvLCB2YWx1ZSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVBcHByb3ZlKEVSQzIwIHRva2VuLCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIGludGVybmFsIHsKICAgICAgICBhc3NlcnQodG9rZW4uYXBwcm92ZShzcGVuZGVyLCB2YWx1ZSkpOwogICAgfQp9Cgpjb250cmFjdCBUb2tlblRpbWVsb2NrIHsKICAgIHVzaW5nIFNhZmVFUkMyMCBmb3IgRVJDMjBCYXNpYzsKCiAgICAvLyBFUkMyMCBiYXNpYyB0b2tlbiBjb250cmFjdCBiZWluZyBoZWxkCiAgICBFUkMyMEJhc2ljIHB1YmxpYyB0b2tlbjsKCiAgICAvLyBiZW5lZmljaWFyeSBvZiB0b2tlbnMgYWZ0ZXIgdGhleSBhcmUgcmVsZWFzZWQKICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwoKICAgIC8vIHRpbWVzdGFtcCB3aGVuIHRva2VuIHJlbGVhc2UgaXMgZW5hYmxlZAogICAgdWludDY0IHB1YmxpYyByZWxlYXNlVGltZTsKCiAgICBmdW5jdGlvbiBUb2tlblRpbWVsb2NrKEVSQzIwQmFzaWMgX3Rva2VuLCBhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDY0IF9yZWxlYXNlVGltZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9yZWxlYXNlVGltZSA+IG5vdyk7CiAgICAgICAgdG9rZW4gPSBfdG9rZW47CiAgICAgICAgYmVuZWZpY2lhcnkgPSBfYmVuZWZpY2lhcnk7CiAgICAgICAgcmVsZWFzZVRpbWUgPSBfcmVsZWFzZVRpbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIFRyYW5zZmVycyB0b2tlbnMgaGVsZCBieSB0aW1lbG9jayB0byBiZW5lZmljaWFyeS4KICAgICAqLwogICAgZnVuY3Rpb24gcmVsZWFzZSgpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShub3cgPj0gcmVsZWFzZVRpbWUpOwoKICAgICAgICB1aW50MjU2IGFtb3VudCA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICByZXF1aXJlKGFtb3VudCA+IDApOwoKICAgICAgICB0b2tlbi5zYWZlVHJhbnNmZXIoYmVuZWZpY2lhcnksIGFtb3VudCk7CiAgICB9Cn0KCmNvbnRyYWN0IEVjaG9MaW5rVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiRWNob0xpbmsiOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiRUtPIjsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogICAgLy8vIFRoZSBvd25lciBvZiB0aGlzIGFkZHJlc3MgbWFuYWdlcyB0aGUgdG9rZW4gc2FsZSBwcm9jZXNzLgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgLy8vIFRoZSBvd25lciBvZiB0aGlzIGFkZHJlc3Mgd2lsbCBtYW5hZ2UgdGhlIHNhbGUgcHJvY2Vzcy4KICAgIGFkZHJlc3MgcHVibGljIHNhbGVUZWFtQWRkcmVzczsKCiAgICAvLyB0aGlzIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSB0aW1lbG9jayBjb250cmFjdCBmb3IgdGhlIHRlYW0gdG9rZW5zCiAgICBhZGRyZXNzIHB1YmxpYyB0aW1lbG9ja0NvbnRyYWN0QWRkcmVzczsKCiAgICB1aW50NjQgY29udHJhY3RDcmVhdGVkRGF0ZXRpbWU7CgogICAgYm9vbCBwdWJsaWMgdG9rZW5TYWxlQ2xvc2VkID0gZmFsc2U7CgogICAgLy8vIE1pbmltdW0gYW1vdW50IG9mIHRva2VucyB0byBiZSBzb2xkIGZvciB0aGUgc2FsZSB0byBzdWNjZWVkLgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgR09BTCA9IDUwMDAgKiA1MDAwICogMTAqKmRlY2ltYWxzOwoKICAgIC8vLyBNYXhpbXVtIHRva2VucyB0byBiZSBhbGxvY2F0ZWQuCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTlNfSEFSRF9DQVAgPSAyICogNTAwMDAgKiA1MDAwICogMTAqKmRlY2ltYWxzOwoKICAgIC8vLyBNYXhpbXVtIHRva2VucyB0byBiZSBhbGxvY2F0ZWQuCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTlNfU0FMRV9IQVJEX0NBUCA9IDUwMDAwICogNTAwMCAqIDEwKipkZWNpbWFsczsKCiAgICAvLy8gSXNzdWUgZXZlbnQgaW5kZXggc3RhcnRpbmcgZnJvbSAwLgogICAgdWludDI1NiBwdWJsaWMgaXNzdWVJbmRleCA9IDA7CgogICAgLy8vIEVtaXR0ZWQgZm9yIGVhY2ggc3VjdWVzc2Z1bCB0b2tlbiBwdXJjaGFzZS4KICAgIGV2ZW50IElzc3VlKHVpbnQgX2lzc3VlSW5kZXgsIGFkZHJlc3MgYWRkciwgdWludCB0b2tlbkFtb3VudCk7CgogICAgZXZlbnQgU2FsZVN1Y2NlZWRlZCgpOwoKICAgIGV2ZW50IFNhbGVGYWlsZWQoKTsKCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIGFzc2VydChtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlUZWFtIHsKICAgICAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBzYWxlVGVhbUFkZHJlc3MgfHwgbXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpblByb2dyZXNzIHsKICAgICAgICBhc3NlcnQoIXNhbGVIYXJkQ2FwUmVhY2hlZCgpICYmICF0b2tlblNhbGVDbG9zZWQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgYmVmb3JlRW5kIHsKICAgICAgICBhc3NlcnQoIXRva2VuU2FsZUNsb3NlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBFY2hvTGlua1Rva2VuKGFkZHJlc3MgX3NhbGVUZWFtQWRkcmVzcykgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9zYWxlVGVhbUFkZHJlc3MgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHNhbGVUZWFtQWRkcmVzcyA9IF9zYWxlVGVhbUFkZHJlc3M7CiAgICAgICAgY29udHJhY3RDcmVhdGVkRGF0ZXRpbWUgPSB1aW50NjQoYmxvY2sudGltZXN0YW1wKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZSh1aW50MjU2IF9lY2hvVGVhbVRva2VucykgcHVibGljIG9ubHlPd25lciBiZWZvcmVFbmQgewogICAgICAgIGlmICh0b3RhbFN1cHBseSA8IEdPQUwpIHsKICAgICAgICAgICAgU2FsZUZhaWxlZCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFNhbGVTdWNjZWVkZWQoKTsKICAgICAgICB9CgogICAgICAgIC8vIGNvbXB1dGUgd2l0aG91dCBhY3R1YWxseSBpbmNyZWFzaW5nIGl0CiAgICAgICAgdWludDI1NiBpbmNyZWFzZWRUb3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfZWNob1RlYW1Ub2tlbnMpOwogICAgICAgIC8vIHJvbGwgYmFjayBpZiBoYXJkIGNhcCByZWFjaGVkCiAgICAgICAgaWYoaW5jcmVhc2VkVG90YWxTdXBwbHkgPiBUT0tFTlNfSEFSRF9DQVApIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQoKICAgICAgICAvLyBpbmNyZWFzZSB0b2tlbiB0b3RhbCBzdXBwbHkKICAgICAgICB0b3RhbFN1cHBseSA9IGluY3JlYXNlZFRvdGFsU3VwcGx5OwoKICAgICAgICAvLyBsb2NrZWQgZm9yIDEwMCBkYXlzIGFmdGVyIHRoZSBjb250cmFjdCBjcmVhdGlvbgogICAgICAgIFRva2VuVGltZWxvY2sgbG9ja2VkVGVhbVRva2VucyA9IG5ldyBUb2tlblRpbWVsb2NrKHRoaXMsIG93bmVyLCBjb250cmFjdENyZWF0ZWREYXRldGltZSArICg2MCAqIDYwICogMjQgKiAxMDApKTsKICAgICAgICAvLyBvciAxMDAgZGF5cyBmcm9tIHRoaXMgbW9tZW50IG9mIHRoZSBjbG9zZSgpIGNhbGwKICAgICAgICAvLyBUb2tlblRpbWVsb2NrIGxvY2tlZFRlYW1Ub2tlbnMgPSBuZXcgVG9rZW5UaW1lbG9jayh0aGlzLCBvd25lciwgbm93ICsgKDYwICogNjAgKiAyNCAqIDEwMCkpOwoKICAgICAgICB0aW1lbG9ja0NvbnRyYWN0QWRkcmVzcyA9IGFkZHJlc3MobG9ja2VkVGVhbVRva2Vucyk7CgogICAgICAgIC8vdXBkYXRlIHRoZSBpbnZlc3RvcnMgYmFsYW5jZSB0byBudW1iZXIgb2YgdG9rZW5zIHNlbnQKICAgICAgICBiYWxhbmNlc1t0aW1lbG9ja0NvbnRyYWN0QWRkcmVzc10gPSBiYWxhbmNlc1t0aW1lbG9ja0NvbnRyYWN0QWRkcmVzc10uYWRkKF9lY2hvVGVhbVRva2Vucyk7CgogICAgICAgIC8vZXZlbnQgaXMgZmlyZWQgd2hlbiB0b2tlbnMgaXNzdWVkCiAgICAgICAgSXNzdWUoCiAgICAgICAgaXNzdWVJbmRleCsrLAogICAgICAgIHRpbWVsb2NrQ29udHJhY3RBZGRyZXNzLAogICAgICAgIF9lY2hvVGVhbVRva2VucwogICAgICAgICk7CgogICAgICAgIHRva2VuU2FsZUNsb3NlZCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gaXNzdWVUb2tlbnMoYWRkcmVzcyBfaW52ZXN0b3IsIHVpbnQyNTYgX3Rva2Vuc0Ftb3VudCkgcHVibGljIG9ubHlUZWFtIGluUHJvZ3Jlc3MgewogICAgICAgIHJlcXVpcmUoX2ludmVzdG9yICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICAvLyBjb21wdXRlIHdpdGhvdXQgYWN0dWFsbHkgaW5jcmVhc2luZyBpdAogICAgICAgIHVpbnQyNTYgaW5jcmVhc2VkVG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX3Rva2Vuc0Ftb3VudCk7CiAgICAgICAgLy8gcm9sbCBiYWNrIGlmIGhhcmQgY2FwIHJlYWNoZWQKICAgICAgICBpZihpbmNyZWFzZWRUb3RhbFN1cHBseSA+IFRPS0VOU19TQUxFX0hBUkRfQ0FQKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KCiAgICAgICAgLy9pbmNyZWFzZSB0b2tlbiB0b3RhbCBzdXBwbHkKICAgICAgICB0b3RhbFN1cHBseSA9IGluY3JlYXNlZFRvdGFsU3VwcGx5OwogICAgICAgIC8vdXBkYXRlIHRoZSBpbnZlc3RvcnMgYmFsYW5jZSB0byBudW1iZXIgb2YgdG9rZW5zIHNlbnQKICAgICAgICBiYWxhbmNlc1tfaW52ZXN0b3JdID0gYmFsYW5jZXNbX2ludmVzdG9yXS5hZGQoX3Rva2Vuc0Ftb3VudCk7CiAgICAgICAgLy9ldmVudCBpcyBmaXJlZCB3aGVuIHRva2VucyBpc3N1ZWQKICAgICAgICBJc3N1ZSgKICAgICAgICBpc3N1ZUluZGV4KyssCiAgICAgICAgX2ludmVzdG9yLAogICAgICAgIF90b2tlbnNBbW91bnQKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLy8vIEByZXR1cm4gdHJ1ZSBpZiB0aGUgaGFyZCBjYXAgaXMgcmVhY2hlZC4KICAgIGZ1bmN0aW9uIHNhbGVIYXJkQ2FwUmVhY2hlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdG90YWxTdXBwbHkgPj0gVE9LRU5TX1NBTEVfSEFSRF9DQVA7CiAgICB9Cn0='.
	

]
