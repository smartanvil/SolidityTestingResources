Class {
	#name : #SRT990c2463c7c4dcb435948e3110006f352da8e666,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT990c2463c7c4dcb435948e3110006f352da8e666 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLy8gQHRpdGxlIEludGVyZmFjZSBmb3IgY29udHJhY3RzIGNvbmZvcm1pbmcgdG8gRVJDLTcyMTogTm9uLUZ1bmdpYmxlIFRva2VucwovLy8gQGF1dGhvciBEaWV0ZXIgU2hpcmxleSA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSIwOTZkNmM3ZDZjNDk2ODcxNjA2NjY0NzM2YzY3Mjc2YTY2Ij5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPj4gKGh0dHBzOi8vZ2l0aHViLmNvbS9kZXRlKQpjb250cmFjdCBFUkM3MjEgewogICAgLy8gUmVxdWlyZWQgbWV0aG9kcwogICAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpOwogICAgLy8gRVJDMjAgY29tcGF0aWJsZSBtZXRob2RzCiAgICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKTsKICAgIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZyk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpOwogICAgLy8gTWV0aG9kcyBkZWZpbmluZyBvd25lcnNoaXAKICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBhZGRyKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogICAgLy8gRXZlbnRzCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHRva2VuSWQpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgYXBwcm92ZWQsIHVpbnQyNTYgdG9rZW5JZCk7Cn0KCmNvbnRyYWN0IFlUSWNvbnMgaXMgRVJDNzIxIHsKCiAgICAvKiBDT05TVEFOVFMgKi8KCiAgICAvLy8gTmFtZSBhbmQgc3ltYm9sIG9mIHRoZSBub24tZnVuZ2libGUgdG9rZW4gKEVSQzcyMSkKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgTkFNRSA9ICJZVEljb25zIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1lNQk9MID0gIllUSWNvbiI7CgogICAgLy8vIFRoZSBjb3Jwb3JhdGlvbiBhZGRyZXNzIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBpdHMgZGV2ZWxvcG1lbnQgKGdpdmVhd2F5LCBnYW1lIGV2ZW50cy4uLikKICAgIGFkZHJlc3MgcHJpdmF0ZSBfdXRpbGl0eUZ1bmQgPSAweDZCMDZhMmExNWRDZjNBRTQ1YjlGMTMzQmU2RkQwQmU1YTlGQWVkQzI7CgogICAgLy8vIFdoZW4gYSBjYXJkIGlzbid0IHZlcmlmaWVkLCB0aGUgbm9ybWFsIHNoYXJlIGdpdmVuIHRvIHRoZSBiZW5lZmljaWFyeSBsaW5rZWQKICAgIC8vLyB0byB0aGUgY2FyZCBpcyBnaXZlbiB0byB0aGUgY2hhcml0eSBmdW5kJ3MgYWRkcmVzcyBpbnN0ZWFkLgogICAgYWRkcmVzcyBwcml2YXRlIF9jaGFyaXR5RnVuZCA9IDB4Rjk4NjQ2NjBjNGFhODlFMjQxZDdENDQ5MDNEM2M4QTIwNzY0NDMzMjsKCiAgICB1aW50MTYgcHVibGljIF9nZW5lcmF0aW9uID0gMDsKICAgIHVpbnQyNTYgcHJpdmF0ZSBfZGVmYXVsdFByaWNlID0gMC4wMDEgZXRoZXI7CiAgICB1aW50MjU2IHByaXZhdGUgZmlyc3RMaW1pdCA9ICAwLjA1IGV0aGVyOwogICAgdWludDI1NiBwcml2YXRlIHNlY29uZExpbWl0ID0gMC41IGV0aGVyOwogICAgdWludDI1NiBwcml2YXRlIHRoaXJkTGltaXQgPSAxIGV0aGVyOwoKCiAgICAvKiBTVE9SQUdFICovCgogICAgLy8vIEFuIGFycmF5IGNvbnRhaW5pbmcgYWxsIG9mIHRoZSBvd25lcnMgYWRkcmVzc2VzIDoKICAgIC8vLyB0aG9zZSBhZGRyZXNzZXMgYXJlIHRoZSBvbmx5IG9uZXMgdGhhdCBjYW4gZXhlY3V0ZSBhY3Rpb25zIHJlcXVpcmluZyBhbiBhZG1pbi4KICAgIGFkZHJlc3MgcHJpdmF0ZSBfb3duZXIweCA9IDB4OEU3ODdFMGMwQjA1QkUyNUVjOTkzQzVlMTA5ODgxMTY2YjY3NWIzMTsKICAgIGFkZHJlc3MgcHJpdmF0ZSBfb3duZXJBID0gIDB4OTdmRUE1NDY0NTM5YmZFMzgxMGI4MTg1RTlGYTlEMkQ2ZDY4YTUyYzsKICAgIGFkZHJlc3MgcHJpdmF0ZSBfb3duZXJCID0gIDB4MDY3OEVjYzREYjA3NUY4OUI5NjZERTdFYTk0NUM0QTg2Njk2NmIwZTsKICAgIGFkZHJlc3MgcHJpdmF0ZSBfb3duZXJDID0gIDB4QzM5NTc0QjAyYjc2YTQzQjAzNzQ3NjQxNjEyYzNkMzMyRGVjNjc5QjsKICAgIGFkZHJlc3MgcHJpdmF0ZSBfb3duZXJEID0gIDB4MTI4MjAwNjUyMTY0N2NhMDk0NTAzMjE5QTYxOTk1QzgxNDJhOTgyNDsKCiAgICBDYXJkW10gcHJpdmF0ZSBfY2FyZHM7CgogICAgLy8vIEEgbWFwcGluZyBmcm9tIGNhcmRzJyBJRHMgdG8gdGhlaXIgcHJpY2VzIFswXSwgdGhlIGxhc3QgaW52ZXN0bWVudCogWzFdIGFuZCB0aGVpciBoaWdoZXN0IHByaWNlIFsyXS4KICAgIC8vLyAqSWYgc29tZW9uZSBidXlzIGFuIGljb24gZm9yIDAuMDAxIEVUSCwgdGhlbiB0aGUgbGFzdCBpbnZlc3RtZW50IG9mIHRoZSBjYXJkIHdpbGwgYmUgMC4wMDEgRVRILiBJZiBzb21lb25lIGVsc2UgYnV5cyBpdCBiYWNrIGF0IDAuMDAyIEVUSCwKICAgIC8vLyB0aGVuIHRoZSBsYXN0IGludmVzdG1lbnQgd2lsbCBiZSAwLjAwMiBFVEguCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTZbM10pIHByaXZhdGUgX2NhcmRzUHJpY2VzOwoKICAgIC8vLyBBIG1hcHBpbmcgZnJvbSBjYXJkcycgbmFtZXMgdG8gdGhlIGJlbmVmaWNpYXJ5IGFkZHJlc3NlcwogICAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwcml2YXRlIF9iZW5lZmljaWFyeUFkZHJlc3NlczsKCiAgICAvLy8gQSBtYXBwaW5nIGZyb20gY2FyZHMnIElEcyB0byB0aGVpciBvd25lcnMKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHJpdmF0ZSBfY2FyZHNPd25lcnM7CgogICAgLy8vIEEgbWFwcGluZyBmcm9tIG93bmVyIGFkZHJlc3MgdG8gY291bnQgb2YgdG9rZW5zIHRoYXQgYWRkcmVzcyBvd25zLgogICAgLy8vIFVzZWQgZm9yIEVSQzcyMSdzIG1ldGhvZCAnYmFsYW5jZU9mKCknIHRvIHJlc29sdmUgb3duZXJzaGlwIGNvdW50LgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIF90b2tlblBlck93bmVyczsKCiAgICAvLy8gQSBtYXBwaW5nIGZyb20gY2FyZHMnIGlkcyB0byBhbiBhZGRyZXNzIHRoYXQgaGFzIGJlZW4gYXBwcm92ZWQgdG8gY2FsbAogICAgLy8vIHRyYW5zZmVyRnJvbSgpLiBFYWNoIENhcmQgY2FuIG9ubHkgaGF2ZSBvbmUgYXBwcm92ZWQgYWRkcmVzcyBmb3IgdHJhbnNmZXIKICAgIC8vLyBhdCBhbnkgdGltZS4gQSB6ZXJvIHZhbHVlIG1lYW5zIG5vIGFwcHJvdmFsIGlzIG91dHN0YW5kaW5nLgogICAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgX2FsbG93ZWRBZGRyZXNzZXM7CgoKICAgIC8qIFNUUlVDVFVSRVMgKi8KCiAgICBzdHJ1Y3QgQ2FyZCB7CiAgICAgICAgdWludDE2ICBnZW5lcmF0aW9uOwogICAgICAgIHN0cmluZyAgbmFtZTsKICAgICAgICBib29sICAgIGlzTG9ja2VkOwogICAgfQoKICAgIC8qIEVWRU5UUyAqLwogICAgZXZlbnQgWVRJY29uU29sZCh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgbmV3UHJpY2UsIGFkZHJlc3MgbmV3T3duZXIpOwogICAgZXZlbnQgUHJpY2VNb2RpZmllZCh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgbmV3UHJpY2UpOwoKCgogICAgLyogQUNDRVNTIE1PRElGSUVSUyAqLwoKICAgIC8vLyBBY2Nlc3MgbW9kaWZpZXIgZm9yIG93bmVyJ3MgZnVuY3Rpb25hbGl0aWVzIGFuZCBhY3Rpb25zIG9ubHkKICAgIG1vZGlmaWVyIG93bmVyT25seSgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gX293bmVyMHggfHwgbXNnLnNlbmRlciA9PSBfb3duZXJBIHx8IG1zZy5zZW5kZXIgPT0gX293bmVyQiB8fCBtc2cuc2VuZGVyID09IF9vd25lckMgfHwgbXNnLnNlbmRlciA9PSBfb3duZXJEKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvKiBQUk9UT0NPTCBNRVRIT0RTIChFUkM3MjEpICovCgogICAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAgICAgLyoqKioqKioqKioqKioqLwogICAgICAgIC8qIEVSQzIwIGNvbXBhdGlibGUgbWV0aG9kcyAqLwogICAgICAgIC8qKioqKioqKioqKioqKi8KCiAgICAvLy8gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHRlbGwgb3V0c2lkZSBjb250cmFjdHMgYW5kIGFwcGxpY2F0aW9ucyB0aGUgbmFtZSBvZiB0aGlzIHRva2VuLgogICAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgICAgIHJldHVybiBOQU1FOwogICAgfQoKICAgIC8vLyBJdCBwcm92aWRlcyBvdXRzaWRlIHByb2dyYW1zIHdpdGggdGhlIHRva2Vu4oCZcyBzaG9ydGhhbmQgbmFtZSwgb3Igc3ltYm9sLgogICAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICAgICAgcmV0dXJuIFNZTUJPTDsKICAgIH0KCiAgICAvLy8gVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2YgY29pbnMgYXZhaWxhYmxlIG9uIHRoZSBibG9ja2NoYWluLgogICAgLy8vIFRoZSBzdXBwbHkgZG9lcyBub3QgaGF2ZSB0byBiZSBjb25zdGFudC4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBzdXBwbHkpIHsKICAgICAgICByZXR1cm4gX2NhcmRzLmxlbmd0aDsKICAgIH0KCiAgICAvLy8gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGZpbmQgdGhlIG51bWJlciBvZiB0b2tlbnMgdGhhdCBhIGdpdmVuIGFkZHJlc3Mgb3ducy4KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIF90b2tlblBlck93bmVyc1tfb3duZXJdOwogICAgfQoKICAgICAgICAvKioqKioqKioqKioqKiovCiAgICAgICAgLyogT3duZXJzaGlwIG1ldGhvZHMgKi8KICAgICAgICAvKioqKioqKioqKioqKiovCgogICAgLy8vIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgYWRkcmVzcyBvZiB0aGUgb3duZXIgb2YgYSB0b2tlbi4gQmVjYXVzZSBlYWNoIEVSQzcyMSB0b2tlbiBpcyBub24tZnVuZ2libGUgYW5kLAogICAgLy8vIHRoZXJlZm9yZSwgdW5pcXVlLCBpdOKAmXMgcmVmZXJlbmNlZCBvbiB0aGUgYmxvY2tjaGFpbiB2aWEgYSB1bmlxdWUgSUQuCiAgICAvLy8gV2UgY2FuIGRldGVybWluZSB0aGUgb3duZXIgb2YgYSB0b2tlbiB1c2luZyBpdHMgSUQuCiAgICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpIHsKICAgICAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChfY2FyZHNPd25lcnNbX3Rva2VuSWRdKSk7CiAgICAgICAgcmV0dXJuIF9jYXJkc093bmVyc1tfdG9rZW5JZF07CiAgICB9CgogICAgLy8vIFRoaXMgZnVuY3Rpb24gYXBwcm92ZXMsIG9yIGdyYW50cywgYW5vdGhlciBlbnRpdHkgcGVybWlzc2lvbiB0byB0cmFuc2ZlciBhIHRva2VuIG9uIHRoZSBvd25lcuKAmXMgYmVoYWxmLgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKGJ5dGVzKF9jYXJkc1tfdG9rZW5JZF0ubmFtZSkubGVuZ3RoICE9IDApOwogICAgICAgIHJlcXVpcmUoIV9jYXJkc1tfdG9rZW5JZF0uaXNMb2NrZWQpOwogICAgICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gX3RvKTsKICAgICAgICBfYWxsb3dlZEFkZHJlc3Nlc1tfdG9rZW5JZF0gPSBfdG87CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CgogICAgLy8vIFRoaXMgZnVuY3Rpb24gYWN0cyBsaWtlIGEgd2l0aGRyYXcgZnVuY3Rpb24sIHNpbmNlIGFuIG91dHNpZGUgcGFydHkgY2FuIGNhbGwgaXQgaW4gb3JkZXIKICAgIC8vLyB0byB0YWtlIHRva2VucyBvdXQgb2YgYW5vdGhlciB1c2Vy4oCZcyBhY2NvdW50LgogICAgLy8vIFRoZXJlZm9yZSwgdGFrZU93bmVyc2hpcCBjYW4gYmUgdXNlZCB0byB3aGVuIGEgdXNlciBoYXMgYmVlbiBhcHByb3ZlZCB0byBvd24gYSBjZXJ0YWluIGFtb3VudCBvZgogICAgLy8vIHRva2VucyBhbmQgd2lzaGVzIHRvIHdpdGhkcmF3IHNhaWQgdG9rZW5zIGZyb20gYW5vdGhlciB1c2Vy4oCZcyBiYWxhbmNlLgogICAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoYnl0ZXMoX2NhcmRzW190b2tlbklkXS5uYW1lKS5sZW5ndGggIT0gMCk7CiAgICAgICAgcmVxdWlyZSghX2NhcmRzW190b2tlbklkXS5pc0xvY2tlZCk7CiAgICAgICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYWRkcmVzcyBvbGRPd25lciA9IF9jYXJkc093bmVyc1tfdG9rZW5JZF07CiAgICAgICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwobmV3T3duZXIpKTsKICAgICAgICByZXF1aXJlKG5ld093bmVyICE9IG9sZE93bmVyKTsKICAgICAgICByZXF1aXJlKF9pc0FsbG93ZWQobmV3T3duZXIsIF90b2tlbklkKSk7CgogICAgICAgIF90cmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIF90b2tlbklkKTsKICAgIH0KCiAgICAvLy8gInRyYW5zZmVyIiBsZXRzIHRoZSBvd25lciBvZiBhIHRva2VuIHNlbmQgaXQgdG8gYW5vdGhlciB1c2VyLCBzaW1pbGFyIHRvIGEgc3RhbmRhbG9uZSBjcnlwdG9jdXJyZW5jeS4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoYnl0ZXMoX2NhcmRzW190b2tlbklkXS5uYW1lKS5sZW5ndGggIT0gMCk7CiAgICAgICAgcmVxdWlyZSghX2NhcmRzW190b2tlbklkXS5pc0xvY2tlZCk7CiAgICAgICAgcmVxdWlyZShfb3ducyhtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBfdG8pOwogICAgICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKF90bykpOwoKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CgogICAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB0b2tlbklkKSBwcml2YXRlIHsKICAgICAgICAvLyBUcmFuc2ZlciBvd25lcnNoaXAgdG8gdGhlIG5ldyBvd25lcgogICAgICAgIF9jYXJkc093bmVyc1t0b2tlbklkXSA9IHRvOwogICAgICAgIC8vIEluY3JlYXNlIHRoZSBudW1iZXIgb2YgdG9rZW5zIG93biBieSB0aGUgbmV3IG93bmVyCiAgICAgICAgX3Rva2VuUGVyT3duZXJzW3RvXSArPSAxOwoKICAgICAgICAvLyBXaGVuIGNyZWF0aW5nIG5ldyBjYXJkcywgZnJvbSBpcyBhZGRyZXNzKDApCiAgICAgICAgaWYgKGZyb20gIT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICBfdG9rZW5QZXJPd25lcnNbZnJvbV0gLT0gMTsKICAgICAgICAgICAgLy8gY2xlYXIgYW55IHByZXZpb3VzbHkgYXBwcm92ZWQgb3duZXJzaGlwIGV4Y2hhbmdlCiAgICAgICAgICAgIGRlbGV0ZSBfYWxsb3dlZEFkZHJlc3Nlc1t0b2tlbklkXTsKICAgICAgICB9CgogICAgICAgIC8vIEVtaXQgdGhlIHRyYW5zZmVyIGV2ZW50LgogICAgICAgIFRyYW5zZmVyKGZyb20sIHRvLCB0b2tlbklkKTsKICAgIH0KCiAgICAvLy8gVGhpcmQtcGFydHkgaW5pdGlhdGVzIHRyYW5zZmVyIG9mIHRva2VuIGZyb20gYWRkcmVzcyBmcm9tIHRvIGFkZHJlc3MgdG8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKCFfY2FyZHNbdG9rZW5JZF0uaXNMb2NrZWQpOwogICAgICAgIHJlcXVpcmUoX293bnMoZnJvbSwgdG9rZW5JZCkpOwogICAgICAgIHJlcXVpcmUoX2lzQWxsb3dlZCh0bywgdG9rZW5JZCkpOwogICAgICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKHRvKSk7CgogICAgICAgIF90cmFuc2Zlcihmcm9tLCB0bywgdG9rZW5JZCk7CiAgICB9CgoKICAgIC8qIE1BTkFHRU1FTlQgRlVOQ1RJT05TIC0tIE9OTFkgVVNBQkxFIEJZIEFETUlOUyAqLwoKICAgIGZ1bmN0aW9uIGNyZWF0ZUNhcmQoc3RyaW5nIGNhcmROYW1lLCB1aW50IHByaWNlLCBhZGRyZXNzIGNhcmRPd25lciwgYWRkcmVzcyBiZW5lZmljaWFyeSwgYm9vbCBpc0xvY2tlZCkgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgcmVxdWlyZShieXRlcyhjYXJkTmFtZSkubGVuZ3RoICE9IDApOwogICAgICAgIHByaWNlID0gcHJpY2UgPT0gMCA/IF9kZWZhdWx0UHJpY2UgOiBwcmljZTsKICAgICAgICBfY3JlYXRlQ2FyZChjYXJkTmFtZSwgcHJpY2UsIGNhcmRPd25lciwgYmVuZWZpY2lhcnksIGlzTG9ja2VkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVDYXJkRnJvbU5hbWUoc3RyaW5nIGNhcmROYW1lKSBwdWJsaWMgb3duZXJPbmx5IHsKICAgICAgICByZXF1aXJlKGJ5dGVzKGNhcmROYW1lKS5sZW5ndGggIT0gMCk7CiAgICAgICAgX2NyZWF0ZUNhcmQoY2FyZE5hbWUsIF9kZWZhdWx0UHJpY2UsIGFkZHJlc3MoMCksIGFkZHJlc3MoMCksIGZhbHNlKTsKICAgIH0KCiAgICAvLy8gQ3JlYXRlIGNhcmQKICAgIGZ1bmN0aW9uIF9jcmVhdGVDYXJkKHN0cmluZyBjYXJkTmFtZSwgdWludCBwcmljZSwgYWRkcmVzcyBjYXJkT3duZXIsIGFkZHJlc3MgYmVuZWZpY2lhcnksIGJvb2wgaXNMb2NrZWQpIHByaXZhdGUgewogICAgICAgIHJlcXVpcmUoX2NhcmRzLmxlbmd0aCA8IDJeMjU2IC0gMSk7CiAgICAgICAgQ2FyZCBtZW1vcnkgY2FyZCA9IENhcmQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uOiBfZ2VuZXJhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogY2FyZE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9ja2VkOiBpc0xvY2tlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIF9jYXJkc1ByaWNlc1tfY2FyZHMubGVuZ3RoXVswXSA9IHByaWNlOyAvLyBDdXJyZW50IHByaWNlCiAgICAgICAgX2NhcmRzUHJpY2VzW19jYXJkcy5sZW5ndGhdWzFdID0gcHJpY2U7IC8vIExhc3QgYm91Z2h0IHByaWNlCiAgICAgICAgX2NhcmRzUHJpY2VzW19jYXJkcy5sZW5ndGhdWzJdID0gcHJpY2U7IC8vIEhpZ2hlc3QKICAgICAgICBfY2FyZHNPd25lcnNbX2NhcmRzLmxlbmd0aF0gPSBjYXJkT3duZXI7CiAgICAgICAgX2JlbmVmaWNpYXJ5QWRkcmVzc2VzW19jYXJkcy5sZW5ndGhdID0gYmVuZWZpY2lhcnk7CiAgICAgICAgX3Rva2VuUGVyT3duZXJzW2NhcmRPd25lcl0gKz0gMTsKICAgICAgICBfY2FyZHMucHVzaChjYXJkKTsKICAgIH0KCgogICAgLy8vIENoYW5nZSB0aGUgY3VycmVudCBnZW5lcmF0aW9uCiAgICBmdW5jdGlvbiBldm9sdmVHZW5lcmF0aW9uKHVpbnQxNiBuZXdHZW5lcmF0aW9uKSBwdWJsaWMgb3duZXJPbmx5IHsKICAgICAgICBfZ2VuZXJhdGlvbiA9IG5ld0dlbmVyYXRpb247CiAgICB9CgogICAgLy8vIENoYW5nZSB0aGUgYWRkcmVzcyBvZiBvbmUgb3duZXIuCiAgICBmdW5jdGlvbiBzZXRPd25lcihhZGRyZXNzIGN1cnJlbnRBZGRyZXNzLCBhZGRyZXNzIG5ld0FkZHJlc3MpIHB1YmxpYyBvd25lck9ubHkgewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKG5ld0FkZHJlc3MpKTsKCiAgICAgICAgaWYgKGN1cnJlbnRBZGRyZXNzID09IF9vd25lckEpIHsKICAgICAgICAgICAgX293bmVyQSA9IG5ld0FkZHJlc3M7CiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50QWRkcmVzcyA9PSBfb3duZXJCKSB7CiAgICAgICAgICAgIF9vd25lckIgPSBuZXdBZGRyZXNzOwogICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEFkZHJlc3MgPT0gX293bmVyQykgewogICAgICAgICAgICBfb3duZXJDID0gbmV3QWRkcmVzczsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRBZGRyZXNzID09IF9vd25lckQpIHsKICAgICAgICAgICAgX293bmVyRCA9IG5ld0FkZHJlc3M7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBTZXQgdGhlIGNoYXJpdHkgZnVuZC4KICAgIGZ1bmN0aW9uIHNldENoYXJpdHlGdW5kKGFkZHJlc3MgbmV3Q2hhcml0eUZ1bmQpIHB1YmxpYyBvd25lck9ubHkgewogICAgICAgIF9jaGFyaXR5RnVuZCA9IG5ld0NoYXJpdHlGdW5kOwogICAgfQoKICAgIC8vLyBTZXQgdGhlIGJlbmVmaWNpYXJ5IEVUSCBhZGRyZXNzLgogICAgZnVuY3Rpb24gc2V0QmVuZWZpY2lhcnlBZGRyZXNzKHVpbnQyNTYgdG9rZW5JZCwgYWRkcmVzcyBiZW5lZmljaWFyeUFkZHJlc3MpIHB1YmxpYyBvd25lck9ubHkgewogICAgICAgIHJlcXVpcmUoYnl0ZXMoX2NhcmRzW3Rva2VuSWRdLm5hbWUpLmxlbmd0aCAhPSAwKTsKICAgICAgICBfYmVuZWZpY2lhcnlBZGRyZXNzZXNbdG9rZW5JZF0gPSBiZW5lZmljaWFyeUFkZHJlc3M7CiAgICB9CgogICAgLy8vIExvY2sgYSBjYXJkIGFuZCBtYWtlIGl0IHVudXNhYmxlCiAgICBmdW5jdGlvbiBsb2NrKHVpbnQyNTYgdG9rZW5JZCkgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgcmVxdWlyZSghX2NhcmRzW3Rva2VuSWRdLmlzTG9ja2VkKTsKICAgICAgICBfY2FyZHNbdG9rZW5JZF0uaXNMb2NrZWQgPSB0cnVlOwogICAgfQoKICAgIC8vLyBVbmxvY2sgYSBZVEljb24gYW5kIG1ha2UgaXQgdXNhYmxlCiAgICBmdW5jdGlvbiB1bmxvY2sodWludDI1NiB0b2tlbklkKSBwdWJsaWMgb3duZXJPbmx5IHsKICAgICAgICByZXF1aXJlKF9jYXJkc1t0b2tlbklkXS5pc0xvY2tlZCk7CiAgICAgICAgX2NhcmRzW3Rva2VuSWRdLmlzTG9ja2VkID0gZmFsc2U7CiAgICB9CgogICAgLy8vIEdldCB0aGUgc21hcnQgY29udHJhY3QncyBiYWxhbmNlIG91dCBvZiB0aGUgY29udHJhY3QgYW5kIHRyYW5zZmVycyBpdCB0byBldmVyeSByZWxhdGVkIGFjY291bnQuCiAgICBmdW5jdGlvbiBwYXlvdXQoKSBwdWJsaWMgb3duZXJPbmx5IHsKICAgICAgICBfcGF5b3V0KCk7CiAgICB9CgogICAgZnVuY3Rpb24gX3BheW91dCgpIHByaXZhdGUgewogICAgICAgIHVpbnQyNTYgYmFsYW5jZSA9IHRoaXMuYmFsYW5jZTsKICAgICAgICBfb3duZXJBLnRyYW5zZmVyKFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoYmFsYW5jZSwgMjApLCAxMDApKTsKICAgICAgICBfb3duZXJCLnRyYW5zZmVyKFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoYmFsYW5jZSwgMjApLCAxMDApKTsKICAgICAgICBfb3duZXJDLnRyYW5zZmVyKFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoYmFsYW5jZSwgMjApLCAxMDApKTsKICAgICAgICBfb3duZXJELnRyYW5zZmVyKFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoYmFsYW5jZSwgMjApLCAxMDApKTsKICAgICAgICBfdXRpbGl0eUZ1bmQudHJhbnNmZXIoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChiYWxhbmNlLCAyMCksIDEwMCkpOwogICAgfQoKCiAgICAvKiBVVElMUyAqLwoKICAgIC8vLyBDaGVjayBpZiB0aGUgYWRkcmVzcyBpcyB2YWxpZCBieSBjaGVja2luZyBpZiBpdCBpcyBub3QgZXF1YWwgdG8gMHgwLgogICAgZnVuY3Rpb24gX2FkZHJlc3NOb3ROdWxsKGFkZHJlc3MgdGFyZ2V0KSBwcml2YXRlIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB0YXJnZXQgIT0gYWRkcmVzcygwKTsKICAgIH0KCiAgICAvLy8gQ2hlY2sgZm9yIHRva2VuIG93bmVyc2hpcAogICAgZnVuY3Rpb24gX293bnMoYWRkcmVzcyBwcmV0ZW5kZXIsIHVpbnQyNTYgdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gcHJldGVuZGVyID09IF9jYXJkc093bmVyc1t0b2tlbklkXTsKICAgIH0KCiAgICBmdW5jdGlvbiBfaXNBbGxvd2VkKGFkZHJlc3MgY2xhaW1hbnQsIHVpbnQyNTYgdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gX2FsbG93ZWRBZGRyZXNzZXNbdG9rZW5JZF0gPT0gY2xhaW1hbnQ7CiAgICB9CgogICAgLyogUFVCTElDIEZVTkNUSU9OUyAqLwoKICAgIC8vLyBHZXQgYWxsIG9mIHRoZSB1c2VmdWwgY2FyZCdzIGluZm9ybWF0aW9ucy4KICAgIGZ1bmN0aW9uIGdldENhcmQodWludDI1NiB0b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgY2FyZE5hbWUsIHVpbnQxNiBnZW5lcmF0aW9uLCBib29sIGlzTG9ja2VkLCB1aW50MjU2IHByaWNlLCBhZGRyZXNzIG93bmVyLCBhZGRyZXNzIGJlbmVmaWNpYXJ5LCBib29sIGlzVmVyaWZpZWQpIHsKICAgICAgICBDYXJkIHN0b3JhZ2UgY2FyZCA9IF9jYXJkc1t0b2tlbklkXTsKICAgICAgICBjYXJkTmFtZSA9IGNhcmQubmFtZTsKICAgICAgICByZXF1aXJlKGJ5dGVzKGNhcmROYW1lKS5sZW5ndGggIT0gMCk7CiAgICAgICAgZ2VuZXJhdGlvbiA9IGNhcmQuZ2VuZXJhdGlvbjsKICAgICAgICBpc0xvY2tlZCA9IGNhcmQuaXNMb2NrZWQ7CiAgICAgICAgcHJpY2UgPSBfY2FyZHNQcmljZXNbdG9rZW5JZF1bMF07CiAgICAgICAgb3duZXIgPSBfY2FyZHNPd25lcnNbdG9rZW5JZF07CiAgICAgICAgYmVuZWZpY2lhcnkgPSBfYmVuZWZpY2lhcnlBZGRyZXNzZXNbdG9rZW5JZF07CiAgICAgICAgaXNWZXJpZmllZCA9IF9hZGRyZXNzTm90TnVsbChfYmVuZWZpY2lhcnlBZGRyZXNzZXNbdG9rZW5JZF0pID8gdHJ1ZSA6IGZhbHNlOwogICAgfQoKICAgIC8vLyBTZXQgYSBsb3dlciBwcmljZSBpZiB0aGUgc2VuZGVyIGlzIHRoZSBjYXJkJ3Mgb3duZXIuCiAgICBmdW5jdGlvbiBzZXRQcmljZSh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgbmV3UHJpY2UpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSghX2NhcmRzW3Rva2VuSWRdLmlzTG9ja2VkKTsKICAgICAgICAvLyBJZiBuZXcgcHJpY2UgPiAwCiAgICAgICAgLy8gSWYgdGhlIG5ldyBwcmljZSBpcyBoaWdoZXIgb3IgZXF1YWwgdG8gdGhlIGJhc2ljIGludmVzdG1lbnQgb2YgdGhlIG93bmVyIChlLmcuIGlmIHNvbWVvbmUgYnV5cyBhIGNhcmQgMC4wMDEgRVRILCB0aGVuIHRoZSBkZWZhdWx0IGludmVzdG1lbnQgd2lsbCBiZSAwLjAwMSkKICAgICAgICAvLyBJZiB0aGUgbmV3IHByaWNlIGlzIGxvd2VyIG9yIGVxdWFsIHRoYW4gdGhlIGhpZ2hlc3QgcHJpY2Ugc2V0IGJ5IHRoZSBhbGdvcml0aG0uCiAgICAgICAgcmVxdWlyZShuZXdQcmljZSA+IDAgJiYgbmV3UHJpY2UgPj0gX2NhcmRzUHJpY2VzW3Rva2VuSWRdWzFdICYmIG5ld1ByaWNlIDw9IF9jYXJkc1ByaWNlc1t0b2tlbklkXVsyXSk7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IF9jYXJkc093bmVyc1t0b2tlbklkXSk7CgogICAgICAgIF9jYXJkc1ByaWNlc1t0b2tlbklkXVswXSA9IG5ld1ByaWNlOwogICAgICAgIFByaWNlTW9kaWZpZWQodG9rZW5JZCwgbmV3UHJpY2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIHB1cmNoYXNlKHVpbnQyNTYgdG9rZW5JZCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoIV9jYXJkc1t0b2tlbklkXS5pc0xvY2tlZCk7CiAgICAgICAgcmVxdWlyZShfY2FyZHNQcmljZXNbdG9rZW5JZF1bMF0gPiAwKTsKCiAgICAgICAgYWRkcmVzcyBvbGRPd25lciA9IF9jYXJkc093bmVyc1t0b2tlbklkXTsKICAgICAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKCiAgICAgICAgdWludDI1NiBzZWxsaW5nUHJpY2UgPSBfY2FyZHNQcmljZXNbdG9rZW5JZF1bMF07CgogICAgICAgIC8vIE1ha2luZyBzdXJlIHRoZSB0b2tlbiBvd25lciBpc24ndCB0cnlpbmcgdG8gcHVyY2hhc2UgaGlzL2hlciBvd24gdG9rZW4uCiAgICAgICAgcmVxdWlyZShvbGRPd25lciAhPSBuZXdPd25lcik7CgogICAgICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKG5ld093bmVyKSk7CgogICAgICAgIC8vIE1ha2luZyBzdXJlIHRoZSBhbW91bnQgc2VudCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNlbGxpbmdQcmljZS4KICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBzZWxsaW5nUHJpY2UpOwoKICAgICAgICB1aW50MjU2IHBheW1lbnQgPSB1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCA5MiksIDEwMCkpOwogICAgICAgIHVpbnQyNTYgYmVuZWZpY2lhcnlQYXltZW50ID0gdWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgMyksIDEwMCkpOwogICAgICAgIHVpbnQyNTYgcHVyY2hhc2VFeGNlc3MgPSBTYWZlTWF0aC5zdWIobXNnLnZhbHVlLCBzZWxsaW5nUHJpY2UpOwogICAgICAgIHVpbnQyNTYgbmV3UHJpY2UgPSAwOwoKICAgICAgICAvLyBVcGRhdGUgcHJpY2VzCiAgICAgICAgaWYgKHNlbGxpbmdQcmljZSA8IGZpcnN0TGltaXQpIHsKICAgICAgICAgICAgbmV3UHJpY2UgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgMjAwKSwgOTIpOwogICAgICAgIH0gZWxzZSBpZiAoc2VsbGluZ1ByaWNlIDwgc2Vjb25kTGltaXQpIHsKICAgICAgICAgICAgbmV3UHJpY2UgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgMTUwKSwgOTIpOwogICAgICAgIH0gZWxzZSBpZiAoc2VsbGluZ1ByaWNlIDwgdGhpcmRMaW1pdCkgewogICAgICAgICAgICBuZXdQcmljZSA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCAxMjUpLCA5Mik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3UHJpY2UgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgMTE1KSwgOTIpOwogICAgICAgIH0KCiAgICAgICAgX2NhcmRzUHJpY2VzW3Rva2VuSWRdWzBdID0gbmV3UHJpY2U7IC8vIE5ldyBwcmljZQogICAgICAgIF9jYXJkc1ByaWNlc1t0b2tlbklkXVsxXSA9IHNlbGxpbmdQcmljZTsgLy8gTGFzdCBib3VnaHQgcHJpY2UKICAgICAgICBfY2FyZHNQcmljZXNbdG9rZW5JZF1bMl0gPSBuZXdQcmljZTsgLy8gTmV3IGhpZ2hlc3QgcHJpY2UKCiAgICAgICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgdG9rZW5JZCk7CgogICAgICAgIC8vIFBheSBwcmV2aW91cyBvd25lcgogICAgICAgIGlmIChvbGRPd25lciAhPSBhZGRyZXNzKHRoaXMpICYmIG9sZE93bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb2xkT3duZXIudHJhbnNmZXIocGF5bWVudCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoX2JlbmVmaWNpYXJ5QWRkcmVzc2VzW3Rva2VuSWRdICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgX2JlbmVmaWNpYXJ5QWRkcmVzc2VzW3Rva2VuSWRdLnRyYW5zZmVyKGJlbmVmaWNpYXJ5UGF5bWVudCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX2NoYXJpdHlGdW5kLnRyYW5zZmVyKGJlbmVmaWNpYXJ5UGF5bWVudCk7CiAgICAgICAgfQoKICAgICAgICBZVEljb25Tb2xkKHRva2VuSWQsIG5ld1ByaWNlLCBuZXdPd25lcik7CgogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIocHVyY2hhc2VFeGNlc3MpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE93bmVyQ2FyZHMoYWRkcmVzcyBvd25lcikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2W10gb3duZXJUb2tlbnMpIHsKICAgICAgICB1aW50MjU2IGJhbGFuY2UgPSBiYWxhbmNlT2Yob3duZXIpOwogICAgICAgIGlmIChiYWxhbmNlID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyB1aW50MjU2W10oMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdWludDI1NltdIG1lbW9yeSByZXN1bHQgPSBuZXcgdWludDI1NltdKGJhbGFuY2UpOwogICAgICAgICAgICB1aW50MjU2IHRvdGFsID0gdG90YWxTdXBwbHkoKTsKICAgICAgICAgICAgdWludDI1NiByZXN1bHRJbmRleCA9IDA7CgogICAgICAgICAgICB1aW50MjU2IGNhcmRJZDsKICAgICAgICAgICAgZm9yIChjYXJkSWQgPSAwOyBjYXJkSWQgPD0gdG90YWw7IGNhcmRJZCsrKSB7CiAgICAgICAgICAgICAgICBpZiAoX2NhcmRzT3duZXJzW2NhcmRJZF0gPT0gb3duZXIpIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0SW5kZXhdID0gY2FyZElkOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SGlnaGVzdFByaWNlKHVpbnQyNTYgdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2IGhpZ2hlc3RQcmljZSkgewogICAgICAgIGhpZ2hlc3RQcmljZSA9IF9jYXJkc1ByaWNlc1t0b2tlbklkXVsxXTsKICAgIH0KCn0KCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICAvKioKICAgICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAoYSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgICAqLwogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAgICovCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCn0='.
	

]
