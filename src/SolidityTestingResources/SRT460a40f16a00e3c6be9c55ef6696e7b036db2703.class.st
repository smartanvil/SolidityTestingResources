Class {
	#name : #SRT460a40f16a00e3c6be9c55ef6696e7b036db2703,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT460a40f16a00e3c6be9c55ef6696e7b036db2703 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7Cgpjb250cmFjdCBTYWZlTWF0aCB7CiAgICAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgICAgdWludCBjID0gYSAqIGI7CiAgICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgICAgcmV0dXJuIGM7CiAgICAgfQoKICAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICAgIHJldHVybiBhIC0gYjsKICAgICB9CgogICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICAgIHVpbnQgYyA9IGEgKyBiOwogICAgICAgICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICAgICAgICByZXR1cm4gYzsKICAgICB9Cn0KCi8vIFN0YW5kYXJkIHRva2VuIGludGVyZmFjZSAoRVJDIDIwKQovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKY29udHJhY3QgVG9rZW4gaXMgU2FmZU1hdGggewogICAgIC8vIEZ1bmN0aW9uczoKICAgICAvLy8gQHJldHVybiB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7CgogICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zKGJvb2wpOwoKICAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMoYm9vbCk7CgogICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX2FkZHJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB3ZWkgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgICAvLyBFdmVudHM6CiAgICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IFN0ZFRva2VuIGlzIFRva2VuIHsKICAgICAvLyBGaWVsZHM6CiAgICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgICB1aW50IHB1YmxpYyBzdXBwbHkgPSAwOwoKICAgICAvLyBGdW5jdGlvbnM6CiAgICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKICAgICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pOwoKICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSxfdmFsdWUpOwogICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSxfdmFsdWUpOwoKICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KCiAgICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyhib29sKXsKICAgICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSk7CiAgICAgICAgICByZXF1aXJlKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICAgICAgICByZXF1aXJlKGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKTsKCiAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLF92YWx1ZSk7CiAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSxfdmFsdWUpOwogICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLF92YWx1ZSk7CgogICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KCiAgICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgICByZXR1cm4gc3VwcGx5OwogICAgIH0KCiAgICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgICB9CgogICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAgICAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgfQoKICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgIH0KfQoKY29udHJhY3QgWnVwcGx5VG9rZW4gaXMgU3RkVG9rZW4KewovLy8gRmllbGRzOgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlp1cHBseSBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJaVVAiOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICAvLyB0aGlzIGluY2x1ZGVzIERFVkVMT1BFUlNfQk9OVVMKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPVEFMX1NVUFBMWSA9IDc1MDAwMDAwMCAqICgxIGV0aGVyIC8gMSB3ZWkpOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgREVWRUxPUEVSU19CT05VUyA9IDEwMDAwMDAwMCAqICgxIGV0aGVyIC8gMSB3ZWkpOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgRUFSTFlfSU5WX0JPTlVTID0gNTAwMDAwMDAgKiAoMSBldGhlciAvIDEgd2VpKTsKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQUkVTQUxFX1BSSUNFID0gNDAwMDA7ICAvLyBwZXIgMSBFdGhlcgogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUFJFU0FMRV9NQVhfRVRIID0gMjUwMDsKICAgIC8vIDEwMCBtbG4gdG9rZW5zIHNvbGQgZHVyaW5nIHByZXNhbGUKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFBSRVNBTEVfVE9LRU5fU1VQUExZX0xJTUlUID0gUFJFU0FMRV9QUklDRSAqIFBSRVNBTEVfTUFYX0VUSCAqICgxIGV0aGVyIC8gMSB3ZWkpOwoKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IElDT19QUklDRSA9IDIwMDAwOyAgICAgLy8gcGVyIDEgRXRoZXIKCiAgICAvLyA2MDAgbWxuIC0gdGhpcyBpbmNsdWRlcyBwcmVzYWxlIHRva2VucwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9UQUxfU09MRF9UT0tFTl9TVVBQTFlfTElNSVQgPSA2MDAwMDAwMDAqICgxIGV0aGVyIC8gMSB3ZWkpOwoKICAgIGVudW0gU3RhdGV7CiAgICAgICBJbml0LAogICAgICAgUGF1c2VkLAoKICAgICAgIFByZXNhbGVSdW5uaW5nLAogICAgICAgUHJlc2FsZUZpbmlzaGVkLAoKICAgICAgIElDT1J1bm5pbmcsCiAgICAgICBJQ09GaW5pc2hlZAogICAgfQoKICAgIFN0YXRlIHB1YmxpYyBjdXJyZW50U3RhdGUgPSBTdGF0ZS5Jbml0OwogICAgYm9vbCBwdWJsaWMgZW5hYmxlVHJhbnNmZXJzID0gZmFsc2U7CgogICAgYWRkcmVzcyBwdWJsaWMgdGVhbVRva2VuQm9udXMgPSAwOwogICAgYWRkcmVzcyBwdWJsaWMgZWFybHlJbnZlc3RvcnNCb251cyA9IDA7CgogICAgLy8gR2F0aGVyZWQgZnVuZHMgY2FuIGJlIHdpdGhkcmF3biBvbmx5IHRvIGVzY3JvdydzIGFkZHJlc3MuCiAgICBhZGRyZXNzIHB1YmxpYyBlc2Nyb3cgPSAwOwoKICAgIC8vIFRva2VuIG1hbmFnZXIgaGFzIGV4Y2x1c2l2ZSBwcml2ZWxlZ2VzIHRvIGNhbGwgYWRtaW5pc3RyYXRpdmUKICAgIC8vIGZ1bmN0aW9ucyBvbiB0aGlzIGNvbnRyYWN0LgogICAgYWRkcmVzcyBwdWJsaWMgdG9rZW5NYW5hZ2VyID0gMDsKCiAgICB1aW50IHB1YmxpYyBwcmVzYWxlU29sZFRva2VucyA9IDA7CiAgICB1aW50IHB1YmxpYyBpY29Tb2xkVG9rZW5zID0gMDsKICAgIHVpbnQgcHVibGljIHRvdGFsU29sZFRva2VucyA9IDA7CiAgICB1aW50IHB1YmxpYyB0b3RhbFdpdGRyb3dlZFRva2VuID0gMDsKCi8vLyBNb2RpZmllcnM6CiAgICBtb2RpZmllciBvbmx5VG9rZW5NYW5hZ2VyKCkKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXI9PXRva2VuTWFuYWdlcik7IAogICAgICAgIF87IAogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlJblN0YXRlKFN0YXRlIHN0YXRlKQogICAgewogICAgICAgIHJlcXVpcmUoc3RhdGU9PWN1cnJlbnRTdGF0ZSk7IAogICAgICAgIF87IAogICAgfQoKLy8vIEV2ZW50czoKICAgIGV2ZW50IExvZ0J1eShhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgTG9nQnVybihhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQgdmFsdWUpOwoKLy8vIEZ1bmN0aW9uczoKICAgIC8vLyBAZGV2IENvbnN0cnVjdG9yCiAgICAvLy8gQHBhcmFtIF90b2tlbk1hbmFnZXIgVG9rZW4gbWFuYWdlciBhZGRyZXNzLgogICAgZnVuY3Rpb24gWnVwcGx5VG9rZW4oYWRkcmVzcyBfdG9rZW5NYW5hZ2VyLCBhZGRyZXNzIF9lc2Nyb3csIGFkZHJlc3MgX3RlYW1Ub2tlbkJvbnVzLCBhZGRyZXNzIF9lcmFseUludmVzdG9yQm9udXMpIAogICAgewogICAgICAgIHRva2VuTWFuYWdlciA9IF90b2tlbk1hbmFnZXI7CiAgICAgICAgdGVhbVRva2VuQm9udXMgPSBfdGVhbVRva2VuQm9udXM7CiAgICAgICAgZXNjcm93ID0gX2VzY3JvdzsKICAgICAgICBlYXJseUludmVzdG9yc0JvbnVzID0gX2VyYWx5SW52ZXN0b3JCb251czsgCgogICAgICAgIC8vIHNlbmQgdGVhbSArIGVhcmx5IGludmVzdG9ycyBib251cyBpbW1lZGlhdGVseQogICAgICAgIHVpbnQgdGVhbUJvbnVzID0gREVWRUxPUEVSU19CT05VUzsKICAgICAgICBiYWxhbmNlc1tfdGVhbVRva2VuQm9udXNdICs9IHRlYW1Cb251czsKICAgICAgICB1aW50IGVhcmx5Qm9udXMgPSBFQVJMWV9JTlZfQk9OVVM7CiAgICAgICAgYmFsYW5jZXNbX2VyYWx5SW52ZXN0b3JCb251c10gKz0gZWFybHlCb251czsKICAgICAgICBzdXBwbHkrPSB0ZWFtQm9udXM7CiAgICAgICAgc3VwcGx5Kz0gZWFybHlCb251czsKCiAgICAgICAgYXNzZXJ0KFBSRVNBTEVfVE9LRU5fU1VQUExZX0xJTUlUPT0xMDAwMDAwMDAgKiAoMSBldGhlciAvIDEgd2VpKSk7CiAgICAgICAgYXNzZXJ0KFRPVEFMX1NPTERfVE9LRU5fU1VQUExZX0xJTUlUPT02MDAwMDAwMDAgKiAoMSBldGhlciAvIDEgd2VpKSk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKCkgcHVibGljIHBheWFibGUKICAgIHsKICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGF0ZT09U3RhdGUuUHJlc2FsZVJ1bm5pbmcgfHwgY3VycmVudFN0YXRlPT1TdGF0ZS5JQ09SdW5uaW5nKTsKCiAgICAgICAgaWYoY3VycmVudFN0YXRlPT1TdGF0ZS5QcmVzYWxlUnVubmluZyl7CiAgICAgICAgICAgIHJldHVybiBidXlUb2tlbnNQcmVzYWxlKCk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHJldHVybiBidXlUb2tlbnNJQ08oKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zUHJlc2FsZSgpIHB1YmxpYyBwYXlhYmxlIG9ubHlJblN0YXRlKFN0YXRlLlByZXNhbGVSdW5uaW5nKQogICAgewogICAgICAgIC8vIG1pbiAtIDAuMSBFVEgKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSAoMSBldGhlciAvIDEgd2VpKSAvMTAgKTsKICAgICAgICB1aW50IG5ld1Rva2VucyA9IG1zZy52YWx1ZSAqIFBSRVNBTEVfUFJJQ0U7CgogICAgICAgIHJlcXVpcmUocHJlc2FsZVNvbGRUb2tlbnMgKyBuZXdUb2tlbnMgKyB0b3RhbFdpdGRyb3dlZFRva2VuIDw9IFBSRVNBTEVfVE9LRU5fU1VQUExZX0xJTUlUKTsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gbmV3VG9rZW5zOwogICAgICAgIHN1cHBseSs9IG5ld1Rva2VuczsKICAgICAgICBwcmVzYWxlU29sZFRva2Vucys9IG5ld1Rva2VuczsKICAgICAgICB0b3RhbFNvbGRUb2tlbnMrPSBuZXdUb2tlbnM7CgogICAgICAgIExvZ0J1eShtc2cuc2VuZGVyLCBuZXdUb2tlbnMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVRva2Vuc0lDTygpIHB1YmxpYyBwYXlhYmxlIG9ubHlJblN0YXRlKFN0YXRlLklDT1J1bm5pbmcpCiAgICB7CiAgICAgICAgLy8gbWluIC0gMC4wMSBFVEgKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSAoKDEgZXRoZXIgLyAxIHdlaSkgLyAxMDApKTsKICAgICAgICB1aW50IG5ld1Rva2VucyA9IG1zZy52YWx1ZSAqIGdldFByaWNlKCk7CgogICAgICAgIHJlcXVpcmUodG90YWxTb2xkVG9rZW5zICsgbmV3VG9rZW5zICsgdG90YWxXaXRkcm93ZWRUb2tlbiA8PSBUT1RBTF9TT0xEX1RPS0VOX1NVUFBMWV9MSU1JVCk7CgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IG5ld1Rva2VuczsKICAgICAgICBzdXBwbHkrPSBuZXdUb2tlbnM7CiAgICAgICAgaWNvU29sZFRva2Vucys9IG5ld1Rva2VuczsKICAgICAgICB0b3RhbFNvbGRUb2tlbnMrPSBuZXdUb2tlbnM7CgogICAgICAgIExvZ0J1eShtc2cuc2VuZGVyLCBuZXdUb2tlbnMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFByaWNlKCljb25zdGFudCByZXR1cm5zKHVpbnQpCiAgICB7CiAgICAgICAgaWYoY3VycmVudFN0YXRlPT1TdGF0ZS5JQ09SdW5uaW5nKXsKICAgICAgICAgICAgIHJldHVybiBJQ09fUFJJQ0U7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICByZXR1cm4gUFJFU0FMRV9QUklDRTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0U3RhdGUoU3RhdGUgX25leHRTdGF0ZSkgcHVibGljIG9ubHlUb2tlbk1hbmFnZXIKICAgIHsKICAgICAgICAvL3NldFN0YXRlKCkgbWV0aG9kIGNhbGwgc2hvdWxkbid0IGJlIGVudGVydGFpbmVkIGFmdGVyIElDT0ZpbmlzaGVkCiAgICAgICAgcmVxdWlyZShjdXJyZW50U3RhdGUgIT0gU3RhdGUuSUNPRmluaXNoZWQpOwogICAgICAgIAogICAgICAgIGN1cnJlbnRTdGF0ZSA9IF9uZXh0U3RhdGU7CiAgICAgICAgLy8gZW5hYmxlL2Rpc2FibGUgdHJhbnNmZXJzCiAgICAgICAgLy9lbmFibGUgdHJhbnNmZXJzIG9ubHkgYWZ0ZXIgSUNPRmluaXNoZWQsIGRpc2FibGUgb3RoZXJ3aXNlCiAgICAgICAgZW5hYmxlVHJhbnNmZXJzID0gKGN1cnJlbnRTdGF0ZT09U3RhdGUuSUNPRmluaXNoZWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RVRIKCkgcHVibGljIG9ubHlUb2tlbk1hbmFnZXIKICAgIHsKICAgICAgICBpZih0aGlzLmJhbGFuY2UgPiAwKSAKICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmUoZXNjcm93LnNlbmQodGhpcy5iYWxhbmNlKSk7CiAgICAgICAgfQogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiB3aXRoZHJhd1Rva2Vucyh1aW50MjU2IF92YWx1ZSkgcHVibGljIG9ubHlUb2tlbk1hbmFnZXIKICAgIHsKICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGF0ZSA9PSBTdGF0ZS5JQ09GaW5pc2hlZCk7CiAgICAgICAgaWYoKHRvdGFsU29sZFRva2VucyArIHRvdGFsV2l0ZHJvd2VkVG9rZW4gKyBfdmFsdWUpIDw9IFRPVEFMX1NPTERfVE9LRU5fU1VQUExZX0xJTUlUKSAKICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IFRPVEFMX1NPTERfVE9LRU5fU1VQUExZX0xJTUlUIC0gdG90YWxTb2xkVG9rZW5zIC0gdG90YWxXaXRkcm93ZWRUb2tlbik7CiAgICAgICAgICAgIAogICAgICAgICAgICBiYWxhbmNlc1tlc2Nyb3ddICs9IF92YWx1ZTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHRvdGFsV2l0ZHJvd2VkVG9rZW4gKz0gX3ZhbHVlOwogICAgICAgICAgICBzdXBwbHkgKz0gX3ZhbHVlOwogICAgICAgIH0KICAgICAgICAKICAgIH0KCi8vLyBPdmVycmlkZXM6CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMoYm9vbCl7CiAgICAgICAgaWYoZW5hYmxlVHJhbnNmZXJzKQogICAgICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLF92YWx1ZSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyhib29sKXsKICAgICAgICBpZihlbmFibGVUcmFuc2ZlcnMpCiAgICAgICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sX3RvLF92YWx1ZSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1cm4gZmFsc2U7ICAgIAogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZihlbmFibGVUcmFuc2ZlcnMpCiAgICAgICAgICAgIHJldHVybiBzdXBlci5hcHByb3ZlKF9zcGVuZGVyLF92YWx1ZSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgovLy8gU2V0dGVycy9nZXR0ZXJzCiAgICBmdW5jdGlvbiBzZXRUb2tlbk1hbmFnZXIoYWRkcmVzcyBfbWdyKSBwdWJsaWMgb25seVRva2VuTWFuYWdlcgogICAgewogICAgICAgIHRva2VuTWFuYWdlciA9IF9tZ3I7CiAgICB9CgogICAgLy8gRGVmYXVsdCBmYWxsYmFjayBmdW5jdGlvbgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIAogICAgewogICAgICAgIGJ1eVRva2VucygpOwogICAgfQp9'.
	

]
