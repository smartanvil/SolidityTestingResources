Class {
	#name : #SRT2F50AB197F950e0c2184CF5d804f4141502Cd987,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2F50AB197F950e0c2184CF5d804f4141502Cd987 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgICAqIGFjY291bnQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKCiAgICAvKioKICAgICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgICAqLwogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIH0KICAgIH0KfQoKY29udHJhY3QgdG9rZW5SZWNpcGllbnQgeyBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKTsgfQoKY29udHJhY3QgTG9nZ2VkRVJDMjAgaXMgT3duYWJsZSB7CiAgICAvKiBTdHJ1Y3R1cmVzICovCiAgICBzdHJ1Y3QgTG9nVmFsdWVCbG9jayB7CiAgICB1aW50MjU2IHZhbHVlOwogICAgdWludDI1NiBibG9jazsKICAgIH0KCiAgICAvKiBQdWJsaWMgdmFyaWFibGVzIG9mIHRoZSB0b2tlbiAqLwogICAgc3RyaW5nIHB1YmxpYyBzdGFuZGFyZCA9ICdMb2dWYWx1ZUJsb2NrVG9rZW4gMC4xJzsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDggcHVibGljIGRlY2ltYWxzOwogICAgTG9nVmFsdWVCbG9ja1tdIHB1YmxpYyBsb2dnZWRUb3RhbFN1cHBseTsKCiAgICBib29sIHB1YmxpYyBsb2NrZWQ7CgogICAgdWludDI1NiBwdWJsaWMgY3JlYXRpb25CbG9jazsKCiAgICAvKiBUaGlzIGNyZWF0ZXMgYW4gYXJyYXkgd2l0aCBhbGwgYmFsYW5jZXMgKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gTG9nVmFsdWVCbG9ja1tdKSBwdWJsaWMgbG9nZ2VkQmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2FuY2U7CgogICAgLyogVGhpcyBnZW5lcmF0ZXMgYSBwdWJsaWMgZXZlbnQgb24gdGhlIGJsb2NrY2hhaW4gdGhhdCB3aWxsIG5vdGlmeSBjbGllbnRzICovCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBmcm96ZW5BY2NvdW50OwoKICAgIC8qIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cyAqLwogICAgZXZlbnQgRnJvemVuRnVuZHMoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJvemVuKTsKCiAgICAvKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QgKi8KICAgIGZ1bmN0aW9uIExvZ2dlZEVSQzIwKAogICAgdWludDI1NiBpbml0aWFsU3VwcGx5LAogICAgc3RyaW5nIHRva2VuTmFtZSwKICAgIHVpbnQ4IGRlY2ltYWxVbml0cywKICAgIHN0cmluZyB0b2tlblN5bWJvbCwKICAgIGJvb2wgdHJhbnNmZXJBbGxTdXBwbHlUb093bmVyLAogICAgYm9vbCBfbG9ja2VkCiAgICApIHsKICAgICAgICBMb2dWYWx1ZUJsb2NrIG1lbW9yeSB2YWx1ZUJsb2NrID0gTG9nVmFsdWVCbG9jayhpbml0aWFsU3VwcGx5LCBibG9jay5udW1iZXIpOwoKICAgICAgICBsb2dnZWRUb3RhbFN1cHBseS5wdXNoKHZhbHVlQmxvY2spOwoKICAgICAgICBpZih0cmFuc2ZlckFsbFN1cHBseVRvT3duZXIpIHsKICAgICAgICAgICAgbG9nZ2VkQmFsYW5jZXNbbXNnLnNlbmRlcl0ucHVzaCh2YWx1ZUJsb2NrKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGxvZ2dlZEJhbGFuY2VzW3RoaXNdLnB1c2godmFsdWVCbG9jayk7CiAgICAgICAgfQoKICAgICAgICBuYW1lID0gdG9rZW5OYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBuYW1lIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgc3ltYm9sID0gdG9rZW5TeW1ib2w7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgc3ltYm9sIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgZGVjaW1hbHMgPSBkZWNpbWFsVW5pdHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtb3VudCBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIGxvY2tlZCA9IF9sb2NrZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gdmFsdWVBdChMb2dWYWx1ZUJsb2NrIFtdIHN0b3JhZ2UgdmFsdWVCbG9ja3MsIHVpbnQyNTYgYmxvY2spIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZih2YWx1ZUJsb2Nrcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgICAgIExvZ1ZhbHVlQmxvY2sgbWVtb3J5IHByZXZMb2dWYWx1ZUJsb2NrOwoKICAgICAgICBmb3IodWludDI1NiBpID0gMDsgaSA8IHZhbHVlQmxvY2tzLmxlbmd0aDsgaSsrKSB7CgogICAgICAgICAgICBMb2dWYWx1ZUJsb2NrIG1lbW9yeSB2YWx1ZUJsb2NrID0gdmFsdWVCbG9ja3NbaV07CgogICAgICAgICAgICBpZih2YWx1ZUJsb2NrLmJsb2NrID4gYmxvY2spIHsKICAgICAgICAgICAgICAgIHJldHVybiBwcmV2TG9nVmFsdWVCbG9jay52YWx1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHJldkxvZ1ZhbHVlQmxvY2sgPSB2YWx1ZUJsb2NrOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHByZXZMb2dWYWx1ZUJsb2NrLnZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJhbGFuY2UoYWRkcmVzcyBfYWRkcmVzcywgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIGxvZ2dlZEJhbGFuY2VzW19hZGRyZXNzXS5wdXNoKExvZ1ZhbHVlQmxvY2sodmFsdWUsIGJsb2NrLm51bWJlcikpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiB2YWx1ZUF0KGxvZ2dlZFRvdGFsU3VwcGx5LCBibG9jay5udW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9hZGRyZXNzKSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHZhbHVlQXQobG9nZ2VkQmFsYW5jZXNbX2FkZHJlc3NdLCBibG9jay5udW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVySW50ZXJuYWwoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgdmFsdWUpIGludGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHVpbnQyNTYgYmFsYW5jZUZyb20gPSB2YWx1ZUF0KGxvZ2dlZEJhbGFuY2VzW19mcm9tXSwgYmxvY2subnVtYmVyKTsKICAgICAgICB1aW50MjU2IGJhbGFuY2VUbyA9IHZhbHVlQXQobG9nZ2VkQmFsYW5jZXNbX3RvXSwgYmxvY2subnVtYmVyKTsKCiAgICAgICAgaWYodmFsdWUgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZihmcm96ZW5BY2NvdW50W19mcm9tXSA9PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmKGJhbGFuY2VGcm9tIDwgdmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYoYmFsYW5jZVRvICsgdmFsdWUgPD0gYmFsYW5jZVRvKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGxvZ2dlZEJhbGFuY2VzW19mcm9tXS5wdXNoKExvZ1ZhbHVlQmxvY2soYmFsYW5jZUZyb20gLSB2YWx1ZSwgYmxvY2subnVtYmVyKSk7CiAgICAgICAgbG9nZ2VkQmFsYW5jZXNbX3RvXS5wdXNoKExvZ1ZhbHVlQmxvY2soYmFsYW5jZVRvICsgdmFsdWUsIGJsb2NrLm51bWJlcikpOwoKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCB2YWx1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qIFNlbmQgY29pbnMgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgewogICAgICAgIHJlcXVpcmUobG9ja2VkID09IGZhbHNlKTsKCiAgICAgICAgYm9vbCBzdGF0dXMgPSB0cmFuc2ZlckludGVybmFsKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKCiAgICAgICAgcmVxdWlyZShzdGF0dXMgPT0gdHJ1ZSk7CiAgICB9CgogICAgLyogQWxsb3cgYW5vdGhlciBjb250cmFjdCB0byBzcGVuZCBzb21lIHRva2VucyBpbiB5b3VyIGJlaGFsZiAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYobG9ja2VkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyogQXBwcm92ZSBhbmQgdGhlbiBjb21tdW5pY2F0ZSB0aGUgYXBwcm92ZWQgY29udHJhY3QgaW4gYSBzaW5nbGUgdHggKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZihsb2NrZWQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsKICAgICAgICBpZiAoYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgewogICAgICAgICAgICBzcGVuZGVyLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgLyogQSBjb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIGNvaW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZihsb2NrZWQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYoYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSA8IF92YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBib29sIF9zdWNjZXNzID0gdHJhbnNmZXJJbnRlcm5hbChfZnJvbSwgX3RvLCBfdmFsdWUpOwoKICAgICAgICBpZihfc3VjY2VzcykgewogICAgICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBfc3VjY2VzczsKICAgIH0KfQoKY29udHJhY3QgTG9nZ2VkRGl2aWRlbmQgaXMgT3duYWJsZSwgTG9nZ2VkRVJDMjAgewogICAgLyogU3RydWN0cyAqLwogICAgc3RydWN0IERpdmlkZW5kIHsKICAgIHVpbnQyNTYgaWQ7CgogICAgdWludDI1NiBibG9jazsKICAgIHVpbnQyNTYgdGltZTsKICAgIHVpbnQyNTYgYW1vdW50OwoKICAgIHVpbnQyNTYgY2xhaW1lZEFtb3VudDsKICAgIHVpbnQyNTYgdHJhbnNmZXJlZEJhY2s7CgogICAgdWludDI1NiB0b3RhbFN1cHBseTsKICAgIHVpbnQyNTYgcmVjeWNsZVRpbWU7CgogICAgYm9vbCByZWN5Y2xlZDsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIGNsYWltZWQ7CiAgICB9CgogICAgLyogdmFyaWFibGVzICovCiAgICBEaXZpZGVuZCBbXSBwdWJsaWMgZGl2aWRlbmRzOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgZGl2aWRlbmRzQ2xhaW1lZDsKCiAgICAvKiBFdmVudHMgKi8KICAgIGV2ZW50IERpdmlkZW5kVHJhbnNmZXJlZCh1aW50MjU2IGlkLCBhZGRyZXNzIGluZGV4ZWQgX2FkZHJlc3MsIHVpbnQyNTYgX2Jsb2NrLCB1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgX3RvdGFsU3VwcGx5KTsKICAgIGV2ZW50IERpdmlkZW5kQ2xhaW1lZCh1aW50MjU2IGlkLCBhZGRyZXNzIGluZGV4ZWQgX2FkZHJlc3MsIHVpbnQyNTYgX2NsYWltKTsKICAgIGV2ZW50IFVuY2xhaW1lZERpdmlkZW5kVHJhbnNmZXIodWludDI1NiBpZCwgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgRGl2aWRlbmRSZWN5Y2xlZCh1aW50MjU2IGlkLCBhZGRyZXNzIGluZGV4ZWQgX3JlY3ljbGVyLCB1aW50MjU2IF9ibG9ja051bWJlciwgdWludDI1NiBfYW1vdW50LCB1aW50MjU2IF90b3RhbFN1cHBseSk7CgogICAgZnVuY3Rpb24gTG9nZ2VkRGl2aWRlbmQoCiAgICB1aW50MjU2IGluaXRpYWxTdXBwbHksCiAgICBzdHJpbmcgdG9rZW5OYW1lLAogICAgdWludDggZGVjaW1hbFVuaXRzLAogICAgc3RyaW5nIHRva2VuU3ltYm9sLAogICAgYm9vbCB0cmFuc2ZlckFsbFN1cHBseVRvT3duZXIsCiAgICBib29sIF9sb2NrZWQKICAgICkgTG9nZ2VkRVJDMjAoaW5pdGlhbFN1cHBseSwgdG9rZW5OYW1lLCBkZWNpbWFsVW5pdHMsIHRva2VuU3ltYm9sLCB0cmFuc2ZlckFsbFN1cHBseVRvT3duZXIsIF9sb2NrZWQpIHsKCiAgICB9CgogICAgZnVuY3Rpb24gYWRkRGl2aWRlbmQodWludDI1NiByZWN5Y2xlVGltZSkgcGF5YWJsZSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CgogICAgICAgIHVpbnQyNTYgaWQgPSBkaXZpZGVuZHMubGVuZ3RoOwogICAgICAgIHVpbnQyNTYgX3RvdGFsU3VwcGx5ID0gdmFsdWVBdChsb2dnZWRUb3RhbFN1cHBseSwgYmxvY2subnVtYmVyKTsKCiAgICAgICAgZGl2aWRlbmRzLnB1c2goCiAgICAgICAgRGl2aWRlbmQoCiAgICAgICAgaWQsCiAgICAgICAgYmxvY2subnVtYmVyLAogICAgICAgIG5vdywKICAgICAgICBtc2cudmFsdWUsCiAgICAgICAgMCwKICAgICAgICAwLAogICAgICAgIF90b3RhbFN1cHBseSwKICAgICAgICByZWN5Y2xlVGltZSwKICAgICAgICBmYWxzZQogICAgICAgICkKICAgICAgICApOwoKICAgICAgICBEaXZpZGVuZFRyYW5zZmVyZWQoaWQsIG1zZy5zZW5kZXIsIGJsb2NrLm51bWJlciwgbXNnLnZhbHVlLCBfdG90YWxTdXBwbHkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsYWltRGl2aWRlbmQodWludDI1NiBkaXZpZGVuZElkKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmKGRpdmlkZW5kcy5sZW5ndGggLSAxIDwgZGl2aWRlbmRJZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBEaXZpZGVuZCBzdG9yYWdlIGRpdmlkZW5kID0gZGl2aWRlbmRzW2RpdmlkZW5kSWRdOwoKICAgICAgICBpZihkaXZpZGVuZC5jbGFpbWVkW21zZy5zZW5kZXJdID09IHRydWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYoZGl2aWRlbmQucmVjeWNsZWQgPT0gdHJ1ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZihub3cgPj0gZGl2aWRlbmQudGltZSArIGRpdmlkZW5kLnJlY3ljbGVUaW1lKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHVpbnQyNTYgYmFsYW5jZSA9IHZhbHVlQXQobG9nZ2VkQmFsYW5jZXNbbXNnLnNlbmRlcl0sIGRpdmlkZW5kLmJsb2NrKTsKCiAgICAgICAgaWYoYmFsYW5jZSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHVpbnQyNTYgY2xhaW0gPSBiYWxhbmNlICogZGl2aWRlbmQuYW1vdW50IC8gZGl2aWRlbmQudG90YWxTdXBwbHk7CgogICAgICAgIGRpdmlkZW5kLmNsYWltZWRbbXNnLnNlbmRlcl0gPSB0cnVlOwoKICAgICAgICBkaXZpZGVuZC5jbGFpbWVkQW1vdW50ID0gZGl2aWRlbmQuY2xhaW1lZEFtb3VudCArIGNsYWltOwoKICAgICAgICBpZiAoY2xhaW0gPiAwKSB7CiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoY2xhaW0pOwogICAgICAgICAgICBEaXZpZGVuZENsYWltZWQoZGl2aWRlbmRJZCwgbXNnLnNlbmRlciwgY2xhaW0pOwoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gY2xhaW1EaXZpZGVuZHMoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoZGl2aWRlbmRzQ2xhaW1lZFttc2cuc2VuZGVyXSA8IGRpdmlkZW5kcy5sZW5ndGgpOwogICAgICAgIGZvciAodWludCBpID0gZGl2aWRlbmRzQ2xhaW1lZFttc2cuc2VuZGVyXTsgaSA8IGRpdmlkZW5kcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoKGRpdmlkZW5kc1tpXS5jbGFpbWVkW21zZy5zZW5kZXJdID09IGZhbHNlKSAmJiAoZGl2aWRlbmRzW2ldLnJlY3ljbGVkID09IGZhbHNlKSkgewogICAgICAgICAgICAgICAgZGl2aWRlbmRzQ2xhaW1lZFttc2cuc2VuZGVyXSA9IGkgKyAxOwogICAgICAgICAgICAgICAgY2xhaW1EaXZpZGVuZChpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZWN5Y2xlRGl2aWRlbmQodWludDI1NiBkaXZpZGVuZElkKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmKGRpdmlkZW5kcy5sZW5ndGggLSAxIDwgZGl2aWRlbmRJZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBEaXZpZGVuZCBzdG9yYWdlIGRpdmlkZW5kID0gZGl2aWRlbmRzW2RpdmlkZW5kSWRdOwoKICAgICAgICBpZihkaXZpZGVuZC5yZWN5Y2xlZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBkaXZpZGVuZC5yZWN5Y2xlZCA9IHRydWU7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlZnVuZFVuY2xhaW1lZEV0aGVycyh1aW50MjU2IGRpdmlkZW5kSWQpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYoZGl2aWRlbmRzLmxlbmd0aCAtIDEgPCBkaXZpZGVuZElkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIERpdmlkZW5kIHN0b3JhZ2UgZGl2aWRlbmQgPSBkaXZpZGVuZHNbZGl2aWRlbmRJZF07CgogICAgICAgIGlmKGRpdmlkZW5kLnJlY3ljbGVkID09IGZhbHNlKSB7CiAgICAgICAgICAgIGlmKG5vdyA8IGRpdmlkZW5kLnRpbWUgKyBkaXZpZGVuZC5yZWN5Y2xlVGltZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB1aW50MjU2IGNsYWltZWRCYWNrQW1vdW50ID0gZGl2aWRlbmQuYW1vdW50IC0gZGl2aWRlbmQuY2xhaW1lZEFtb3VudDsKCiAgICAgICAgZGl2aWRlbmQudHJhbnNmZXJlZEJhY2sgPSBjbGFpbWVkQmFja0Ftb3VudDsKCiAgICAgICAgaWYoY2xhaW1lZEJhY2tBbW91bnQgPiAwKSB7CiAgICAgICAgICAgIG93bmVyLnRyYW5zZmVyKGNsYWltZWRCYWNrQW1vdW50KTsKCiAgICAgICAgICAgIFVuY2xhaW1lZERpdmlkZW5kVHJhbnNmZXIoZGl2aWRlbmRJZCwgY2xhaW1lZEJhY2tBbW91bnQpOwoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cn0KCmNvbnRyYWN0IExvZ2dlZFBoYXNlSUNPIGlzIExvZ2dlZERpdmlkZW5kIHsKICAgIHVpbnQyNTYgcHVibGljIGljb1NpbmNlOwogICAgdWludDI1NiBwdWJsaWMgaWNvVGlsbDsKCiAgICB1aW50MjU2IHB1YmxpYyBjb2xsZWN0ZWRFdGhlcnM7CgogICAgUGhhc2VbXSBwdWJsaWMgcGhhc2VzOwoKICAgIHN0cnVjdCBQaGFzZSB7CiAgICB1aW50MjU2IHByaWNlOwogICAgdWludDI1NiBtYXhBbW91bnQ7CiAgICB9CgogICAgZnVuY3Rpb24gTG9nZ2VkUGhhc2VJQ08oCiAgICB1aW50MjU2IF9pY29TaW5jZSwKICAgIHVpbnQyNTYgX2ljb1RpbGwsCiAgICB1aW50MjU2IGluaXRpYWxTdXBwbHksCiAgICBzdHJpbmcgdG9rZW5OYW1lLAogICAgc3RyaW5nIHRva2VuU3ltYm9sLAogICAgdWludDggcHJlY2lzaW9uLAogICAgYm9vbCB0cmFuc2ZlckFsbFN1cHBseVRvT3duZXIsCiAgICBib29sIF9sb2NrZWQKICAgICkgTG9nZ2VkRGl2aWRlbmQoaW5pdGlhbFN1cHBseSwgdG9rZW5OYW1lLCBwcmVjaXNpb24sIHRva2VuU3ltYm9sLCB0cmFuc2ZlckFsbFN1cHBseVRvT3duZXIsIF9sb2NrZWQpIHsKICAgICAgICBzdGFuZGFyZCA9ICdMb2dnZWRQaGFzZUlDTyAwLjEnOwoKICAgICAgICBpY29TaW5jZSA9IF9pY29TaW5jZTsKICAgICAgICBpY29UaWxsID0gX2ljb1RpbGw7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SWNvVG9rZW5zQW1vdW50KHVpbnQyNTYgY29sbGVjdGVkRXRoZXJzLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBhbW91bnQ7CgogICAgICAgIHVpbnQyNTYgbmV3Q29sbGVjdGVkRXRoZXJzID0gY29sbGVjdGVkRXRoZXJzOwogICAgICAgIHVpbnQyNTYgcmVtYWluaW5nVmFsdWUgPSB2YWx1ZTsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgcGhhc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIFBoYXNlIHN0b3JhZ2UgcGhhc2UgPSBwaGFzZXNbaV07CgogICAgICAgICAgICBpZihwaGFzZS5tYXhBbW91bnQgPiBuZXdDb2xsZWN0ZWRFdGhlcnMpIHsKICAgICAgICAgICAgICAgIGlmIChuZXdDb2xsZWN0ZWRFdGhlcnMgKyByZW1haW5pbmdWYWx1ZSA+IHBoYXNlLm1heEFtb3VudCkgewogICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgZGlmZiA9IHBoYXNlLm1heEFtb3VudCAtIG5ld0NvbGxlY3RlZEV0aGVyczsKCiAgICAgICAgICAgICAgICAgICAgYW1vdW50ICs9IGRpZmYgKiAxIGV0aGVyIC8gcGhhc2UucHJpY2U7CgogICAgICAgICAgICAgICAgICAgIHJlbWFpbmluZ1ZhbHVlIC09IGRpZmY7CiAgICAgICAgICAgICAgICAgICAgbmV3Q29sbGVjdGVkRXRoZXJzICs9IGRpZmY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBhbW91bnQgKz0gcmVtYWluaW5nVmFsdWUgKiAxIGV0aGVyIC8gcGhhc2UucHJpY2U7CgogICAgICAgICAgICAgICAgICAgIG5ld0NvbGxlY3RlZEV0aGVycyArPSByZW1haW5pbmdWYWx1ZTsKCiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nVmFsdWUgPSAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocmVtYWluaW5nVmFsdWUgPT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChyZW1haW5pbmdWYWx1ZSA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYW1vdW50OwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eShhZGRyZXNzIF9hZGRyZXNzLCB1aW50MjU2IHRpbWUsIHVpbnQyNTYgdmFsdWUpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAobG9ja2VkID09IHRydWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRpbWUgPCBpY29TaW5jZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAodGltZSA+IGljb1RpbGwpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbHVlID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdWludDI1NiBhbW91bnQgPSBnZXRJY29Ub2tlbnNBbW91bnQoY29sbGVjdGVkRXRoZXJzLCB2YWx1ZSk7CgogICAgICAgIGlmKGFtb3VudCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHVpbnQyNTYgc2VsZkJhbGFuY2UgPSB2YWx1ZUF0KGxvZ2dlZEJhbGFuY2VzW3RoaXNdLCBibG9jay5udW1iZXIpOwogICAgICAgIHVpbnQyNTYgaG9sZGVyQmFsYW5jZSA9IHZhbHVlQXQobG9nZ2VkQmFsYW5jZXNbX2FkZHJlc3NdLCBibG9jay5udW1iZXIpOwoKICAgICAgICBpZiAoc2VsZkJhbGFuY2UgPCBhbW91bnQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGhvbGRlckJhbGFuY2UgKyBhbW91bnQgPCBob2xkZXJCYWxhbmNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHNldEJhbGFuY2UoX2FkZHJlc3MsIGhvbGRlckJhbGFuY2UgKyBhbW91bnQpOwogICAgICAgIHNldEJhbGFuY2UodGhpcywgc2VsZkJhbGFuY2UgLSBhbW91bnQpOwoKICAgICAgICBjb2xsZWN0ZWRFdGhlcnMgKz0gdmFsdWU7CgogICAgICAgIFRyYW5zZmVyKHRoaXMsIF9hZGRyZXNzLCBhbW91bnQpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICBib29sIHN0YXR1cyA9IGJ1eShtc2cuc2VuZGVyLCBub3csIG1zZy52YWx1ZSk7CgogICAgICAgIHJlcXVpcmUoc3RhdHVzID09IHRydWUpOwogICAgfQp9Cgpjb250cmFjdCBDYWp1dGVsIGlzIExvZ2dlZFBoYXNlSUNPIHsKICAgIGZ1bmN0aW9uIENhanV0ZWwoCiAgICB1aW50MjU2IGluaXRpYWxTdXBwbHksCiAgICBzdHJpbmcgdG9rZW5OYW1lLAogICAgc3RyaW5nIHRva2VuU3ltYm9sLAogICAgYWRkcmVzcyBmb3VuZGVyMSwKICAgIGFkZHJlc3MgZm91bmRlcjIsCiAgICBhZGRyZXNzIG1hcmtldGluZywKICAgIHVpbnQyNTYgaWNvU2luY2UsCiAgICB1aW50MjU2IGljb1RpbGwKICAgICkgTG9nZ2VkUGhhc2VJQ08oaWNvU2luY2UsIGljb1RpbGwsIGluaXRpYWxTdXBwbHksIHRva2VuTmFtZSwgdG9rZW5TeW1ib2wsIDE4LCBmYWxzZSwgZmFsc2UpIHsKICAgICAgICBzdGFuZGFyZCA9ICdDYWp1dGVsIDAuMSc7CgogICAgICAgIHBoYXNlcy5wdXNoKFBoYXNlKDAuMDUgZXRoZXIsIDUwMCBldGhlcikpOwogICAgICAgIHBoYXNlcy5wdXNoKFBoYXNlKDAuMDc1IGV0aGVyLCA3NTAgZXRoZXIgKyA1MDAgZXRoZXIpKTsKICAgICAgICBwaGFzZXMucHVzaChQaGFzZSgwLjEgZXRoZXIsIDEwMDAwIGV0aGVyICsgNzUwIGV0aGVyICsgNTAwIGV0aGVyKSk7CiAgICAgICAgcGhhc2VzLnB1c2goUGhhc2UoMC4xNSBldGhlciwgMzAwMDAgZXRoZXIgKyAxMDAwMCBldGhlciArIDc1MCBldGhlciArIDUwMCBldGhlcikpOwogICAgICAgIHBoYXNlcy5wdXNoKFBoYXNlKDAuMiBldGhlciwgODAwMDAgZXRoZXIgKyAzMDAwMCBldGhlciArIDEwMDAwIGV0aGVyICsgNzUwIGV0aGVyICsgNTAwIGV0aGVyKSk7CgogICAgICAgIHVpbnQyNTYgZm91bmRlcjFUb2tlbnMgPSA5MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICAgICAgdWludDI1NiBmb3VuZGVyMlRva2VucyA9IDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgICAgICB1aW50MjU2IG1hcmtldGluZ1Rva2VucyA9IDYwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwoKICAgICAgICBzZXRCYWxhbmNlKGZvdW5kZXIxLCBmb3VuZGVyMVRva2Vucyk7CgogICAgICAgIFRyYW5zZmVyKHRoaXMsIGZvdW5kZXIxLCBmb3VuZGVyMVRva2Vucyk7CgogICAgICAgIHNldEJhbGFuY2UoZm91bmRlcjIsIGZvdW5kZXIyVG9rZW5zKTsKCiAgICAgICAgVHJhbnNmZXIodGhpcywgZm91bmRlcjIsIGZvdW5kZXIyVG9rZW5zKTsKCiAgICAgICAgc2V0QmFsYW5jZShtYXJrZXRpbmcsIG1hcmtldGluZ1Rva2Vucyk7CgogICAgICAgIFRyYW5zZmVyKHRoaXMsIG1hcmtldGluZywgbWFya2V0aW5nVG9rZW5zKTsKCiAgICAgICAgc2V0QmFsYW5jZSh0aGlzLCBpbml0aWFsU3VwcGx5IC0gZm91bmRlcjFUb2tlbnMgLSBmb3VuZGVyMlRva2VucyAtIG1hcmtldGluZ1Rva2Vucyk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJFdGhlcnMoKSBvbmx5T3duZXIgewogICAgICAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TG9ja2VkKGJvb2wgX2xvY2tlZCkgb25seU93bmVyIHsKICAgICAgICBsb2NrZWQgPSBfbG9ja2VkOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEljb0RhdGVzKHVpbnQyNTYgX2ljb1NpbmNlLCB1aW50MjU2IF9pY29UaWxsKSBvbmx5T3duZXIgewogICAgICAgIGljb1NpbmNlID0gX2ljb1NpbmNlOwogICAgICAgIGljb1RpbGwgPSBfaWNvVGlsbDsKICAgIH0KfQ=='.
	

]
