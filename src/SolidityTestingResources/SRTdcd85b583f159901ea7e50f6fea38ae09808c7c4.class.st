Class {
	#name : #SRTdcd85b583f159901ea7e50f6fea38ae09808c7c4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdcd85b583f159901ea7e50f6fea38ae09808c7c4 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vCi8vIElESCBpbmRhSGFzaCB0b2tlbiBzbWFydCBjb250cmFjdAovLwovLyBGb3IgZGV0YWlscywgcGxlYXNlIHZpc2l0OiBodHRwczovL2luZGFoYXNoLmNvbS9pY28KLy8KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8KLy8gU2FmZU1hdGgzCi8vCi8vIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9tYXRoL1NhZmVNYXRoLnNvbAovLyAobm8gbmVlZCB0byBpbXBsZW1lbnQgZGl2aXNpb24pCi8vCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmxpYnJhcnkgU2FmZU1hdGgzIHsKCiAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50IGMpIHsKICAgIGMgPSBhICogYjsKICAgIGFzc2VydCggYSA9PSAwIHx8IGMgLyBhID09IGIgKTsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KCBiIDw9IGEgKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCBjKSB7CiAgICBjID0gYSArIGI7CiAgICBhc3NlcnQoIGMgPj0gYSApOwogIH0KCn0KCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vCi8vIE93bmVkIGNvbnRyYWN0Ci8vCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmNvbnRyYWN0IE93bmVkIHsKCiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogIC8vIEV2ZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJQcm9wb3NlZChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8pOwogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7CgogIC8vIE1vZGlmaWVyIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgIHJlcXVpcmUoIG1zZy5zZW5kZXIgPT0gb3duZXIgKTsKICAgIF87CiAgfQoKICAvLyBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIGZ1bmN0aW9uIE93bmVkKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCBfbmV3T3duZXIgIT0gb3duZXIgKTsKICAgIHJlcXVpcmUoIF9uZXdPd25lciAhPSBhZGRyZXNzKDB4MCkgKTsKICAgIE93bmVyc2hpcFRyYW5zZmVyUHJvcG9zZWQob3duZXIsIF9uZXdPd25lcik7CiAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICB9CgogIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lcik7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLwovLyBFUkMgVG9rZW4gU3RhbmRhcmQgIzIwIEludGVyZmFjZQovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9ibG9iL21hc3Rlci9FSVBTL2VpcC0yMC10b2tlbi1zdGFuZGFyZC5tZAovLwovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpjb250cmFjdCBFUkMyMEludGVyZmFjZSB7CgogIC8vIEV2ZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7CgogIC8vIEZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSk7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKCn0KCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vCi8vIEVSQyBUb2tlbiBTdGFuZGFyZCAjMjAKLy8KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKY29udHJhY3QgRVJDMjBUb2tlbiBpcyBFUkMyMEludGVyZmFjZSwgT3duZWQgewogIAogIHVzaW5nIFNhZmVNYXRoMyBmb3IgdWludDsKCiAgdWludCBwdWJsaWMgdG9rZW5zSXNzdWVkVG90YWwgPSAwOwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgLy8gRnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAvKiBUb3RhbCB0b2tlbiBzdXBwbHkgKi8KCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gdG9rZW5zSXNzdWVkVG90YWw7CiAgfQoKICAvKiBHZXQgdGhlIGFjY291bnQgYmFsYW5jZSBmb3IgYW4gYWRkcmVzcyAqLwoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKICAvKiBUcmFuc2ZlciB0aGUgYmFsYW5jZSBmcm9tIG93bmVyJ3MgYWNjb3VudCB0byBhbm90aGVyIGFjY291bnQgKi8KCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAvLyBhbW91bnQgc2VudCBjYW5ub3QgZXhjZWVkIGJhbGFuY2UKICAgIHJlcXVpcmUoIGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQgKTsKCiAgICAvLyB1cGRhdGUgYmFsYW5jZXMKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSAgICAgICAgPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKCiAgICAvLyBsb2cgZXZlbnQKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qIEFsbG93IF9zcGVuZGVyIHRvIHdpdGhkcmF3IGZyb20geW91ciBhY2NvdW50IHVwIHRvIF9hbW91bnQgKi8KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy8gYXBwcm92YWwgYW1vdW50IGNhbm5vdCBleGNlZWQgdGhlIGJhbGFuY2UKICAgIHJlcXVpcmUgKCBiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50ICk7CiAgICAgIAogICAgLy8gdXBkYXRlIGFsbG93ZWQgYW1vdW50CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAKICAgIC8vIGxvZyBldmVudAogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKiBTcGVuZGVyIG9mIHRva2VucyB0cmFuc2ZlcnMgdG9rZW5zIGZyb20gdGhlIG93bmVyJ3MgYmFsYW5jZSAqLwogIC8qIE11c3QgYmUgcHJlLWFwcHJvdmVkIGJ5IG93bmVyICovCgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIC8vIGJhbGFuY2UgY2hlY2tzCiAgICByZXF1aXJlKCBiYWxhbmNlc1tfZnJvbV0gPj0gX2Ftb3VudCApOwogICAgcmVxdWlyZSggYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCApOwoKICAgIC8vIHVwZGF0ZSBiYWxhbmNlcyBhbmQgYWxsb3dlZCBhbW91bnQKICAgIGJhbGFuY2VzW19mcm9tXSAgICAgICAgICAgID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfYW1vdW50KTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSAgICAgICAgICAgICAgPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKCiAgICAvLyBsb2cgZXZlbnQKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKiBSZXR1cm5zIHRoZSBhbW91bnQgb2YgdG9rZW5zIGFwcHJvdmVkIGJ5IHRoZSBvd25lciAqLwogIC8qIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGJ5IHNwZW5kZXIgKi8KCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8KLy8gSURIIHB1YmxpYyB0b2tlbiBzYWxlCi8vCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmNvbnRyYWN0IEluZGFIYXNoVG9rZW4gaXMgRVJDMjBUb2tlbiB7CgogIC8qIFV0aWxpdHkgdmFyaWFibGUgKi8KICAKICB1aW50IGNvbnN0YW50IEU2ID0gMTAqKjY7CiAgCiAgLyogQmFzaWMgdG9rZW4gZGF0YSAqLwoKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgICAgID0gImluZGFIYXNoIENvaW4iOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sICAgPSAiSURIIjsKICB1aW50OCAgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gNjsKCiAgLyogV2FsbGV0IGFkZHJlc3NlcyAtIGluaXRpYWxseSBzZXQgdG8gb3duZXIgYXQgZGVwbG95bWVudCAqLwogIAogIGFkZHJlc3MgcHVibGljIHdhbGxldDsKICBhZGRyZXNzIHB1YmxpYyBhZG1pbldhbGxldDsKCiAgLyogSUNPIGRhdGVzICovCgogIHVpbnQgcHVibGljIGNvbnN0YW50IERBVEVfUFJFU0FMRV9TVEFSVCA9IDE1MTAxNTMyMDA7IC8vIDA4LU5vdi0yMDE3IDE1OjAwIFVUQwogIHVpbnQgcHVibGljIGNvbnN0YW50IERBVEVfUFJFU0FMRV9FTkQgICA9IDE1MTA3NTgwMDA7IC8vIDE1LU5vdi0yMDE3IDE1OjAwIFVUQwoKICB1aW50IHB1YmxpYyBjb25zdGFudCBEQVRFX0lDT19TVEFSVCA9IDE1MTE5Njc2MDA7IC8vIDI5LU5vdi0yMDE3IDE1OjAwIFVUQwogIHVpbnQgcHVibGljIGNvbnN0YW50IERBVEVfSUNPX0VORCAgID0gMTUxMzc4MjAwMDsgLy8gMjAtRGVjLTIwMTcgMTU6MDAgVVRDCgogIC8qIElDTyB0b2tlbnMgcGVyIEVUSCAqLwogIAogIHVpbnQgcHVibGljIHRva2Vuc1BlckV0aCA9IDMyMDAgKiBFNjsgLy8gcmF0ZSBkdXJpbmcgbGFzdCBJQ08gd2VlawoKICB1aW50IHB1YmxpYyBjb25zdGFudCBCT05VU19QUkVTQUxFICAgICAgPSA0MDsKICB1aW50IHB1YmxpYyBjb25zdGFudCBCT05VU19JQ09fV0VFS19PTkUgPSAyMDsKICB1aW50IHB1YmxpYyBjb25zdGFudCBCT05VU19JQ09fV0VFS19UV08gPSAxMDsKCiAgLyogT3RoZXIgSUNPIHBhcmFtZXRlcnMgKi8gIAogIAogIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOX1NVUFBMWV9UT1RBTCA9IDQwMCAqIEU2ICogRTY7IC8vIDQwMCBtbSB0b2tlbnMKICB1aW50IHB1YmxpYyBjb25zdGFudCBUT0tFTl9TVVBQTFlfSUNPICAgPSAzMjAgKiBFNiAqIEU2OyAvLyAzMjAgbW0gdG9rZW5zCiAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9LRU5fU1VQUExZX01LVCAgID0gIDgwICogRTYgKiBFNjsgLy8gIDgwIG1tIHRva2VucwoKICB1aW50IHB1YmxpYyBjb25zdGFudCBQUkVTQUxFX0VUSF9DQVAgPSAgMTUwMDAgZXRoZXI7CgogIHVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9GVU5ESU5HX0dPQUwgPSAgNDAgKiBFNiAqIEU2OyAvLyA0MCBtbSB0b2tlbnMKICAKICB1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fQ09OVFJJQlVUSU9OID0gMSBldGhlciAvIDI7IC8vIDAuNSBFdGhlcgogIHVpbnQgcHVibGljIGNvbnN0YW50IE1BWF9DT05UUklCVVRJT04gPSAzMDAgZXRoZXI7CgogIHVpbnQgcHVibGljIGNvbnN0YW50IENPT0xET1dOX1BFUklPRCA9ICAyIGRheXM7CiAgdWludCBwdWJsaWMgY29uc3RhbnQgQ0xBV0JBQ0tfUEVSSU9EID0gOTAgZGF5czsKCiAgLyogQ3Jvd2RzYWxlIHZhcmlhYmxlcyAqLwoKICB1aW50IHB1YmxpYyBpY29FdGhlclJlY2VpdmVkID0gMDsgLy8gRXRoZXIgYWN0dWFsbHkgcmVjZWl2ZWQgYnkgdGhlIGNvbnRyYWN0CgogIHVpbnQgcHVibGljIHRva2Vuc0lzc3VlZEljbyAgID0gMDsKICB1aW50IHB1YmxpYyB0b2tlbnNJc3N1ZWRNa3QgICA9IDA7CiAgCiAgdWludCBwdWJsaWMgdG9rZW5zQ2xhaW1lZEFpcmRyb3AgPSAwOwogIAogIC8qIEtlZXAgdHJhY2sgb2YgRXRoZXIgY29udHJpYnV0ZWQgYW5kIHRva2VucyByZWNlaXZlZCBkdXJpbmcgQ3Jvd2RzYWxlICovCiAgCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBpY29FdGhlckNvbnRyaWJ1dGVkOwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgaWNvVG9rZW5zUmVjZWl2ZWQ7CgogIC8qIEtlZXAgdHJhY2sgb2YgcGFydGljaXBhbnRzIHdobyAKICAvKiAtIGhhdmUgcmVjZWl2ZWQgdGhlaXIgYWlyZHJvcHBlZCB0b2tlbnMgYWZ0ZXIgYSBzdWNjZXNzZnVsIElDTyAqLwogIC8qIC0gb3IgaGF2ZSByZWNsYWltZWQgdGhlaXIgY29udHJpYnV0aW9ucyBpbiBjYXNlIG9mIGZhaWxlZCBDcm93ZHNhbGUgKi8KICAvKiAtIGFyZSBsb2NrZWQgKi8KICAKICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFpcmRyb3BDbGFpbWVkOwogIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgcmVmdW5kQ2xhaW1lZDsKICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGxvY2tlZDsKCiAgLy8gRXZlbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIAogIGV2ZW50IFdhbGxldFVwZGF0ZWQoYWRkcmVzcyBfbmV3V2FsbGV0KTsKICBldmVudCBBZG1pbldhbGxldFVwZGF0ZWQoYWRkcmVzcyBfbmV3QWRtaW5XYWxsZXQpOwogIGV2ZW50IFRva2Vuc1BlckV0aFVwZGF0ZWQodWludCBfdG9rZW5zUGVyRXRoKTsKICBldmVudCBUb2tlbnNNaW50ZWQoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfdG9rZW5zLCB1aW50IF9iYWxhbmNlKTsKICBldmVudCBUb2tlbnNJc3N1ZWQoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfdG9rZW5zLCB1aW50IF9iYWxhbmNlLCB1aW50IF9ldGhlckNvbnRyaWJ1dGVkKTsKICBldmVudCBSZWZ1bmQoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfYW1vdW50LCB1aW50IF90b2tlbnMpOwogIGV2ZW50IEFpcmRyb3AoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfYW1vdW50LCB1aW50IF9iYWxhbmNlKTsKICBldmVudCBMb2NrUmVtb3ZlZChhZGRyZXNzIGluZGV4ZWQgX3BhcnRpY2lwYW50KTsKCiAgLy8gQmFzaWMgRnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLQoKICAvKiBJbml0aWFsaXplIChvd25lciBpcyBzZXQgdG8gbXNnLnNlbmRlciBieSBPd25lZC5Pd25lZCgpICovCgogIGZ1bmN0aW9uIEluZGFIYXNoVG9rZW4oKSB7CiAgICByZXF1aXJlKCBUT0tFTl9TVVBQTFlfSUNPICsgVE9LRU5fU1VQUExZX01LVCA9PSBUT0tFTl9TVVBQTFlfVE9UQUwgKTsKICAgIHdhbGxldCA9IG93bmVyOwogICAgYWRtaW5XYWxsZXQgPSBvd25lcjsKICB9CgogIC8qIEZhbGxiYWNrICovCiAgCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICBidXlUb2tlbnMoKTsKICB9CiAgCiAgLy8gSW5mb3JtYXRpb24gZnVuY3Rpb25zIC0tLS0tLS0tLS0tLQogIAogIC8qIFdoYXQgdGltZSBpcyBpdD8gKi8KICAKICBmdW5jdGlvbiBhdE5vdygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiBub3c7CiAgfQogIAogIC8qIEhhcyB0aGUgbWluaW11bSB0aHJlc2hvbGQgYmVlbiByZWFjaGVkPyAqLwogIAogIGZ1bmN0aW9uIGljb1RocmVzaG9sZFJlYWNoZWQoKSBjb25zdGFudCByZXR1cm5zIChib29sIHRocmVzaG9sZFJlYWNoZWQpIHsKICAgICBpZiAodG9rZW5zSXNzdWVkSWNvIDwgTUlOX0ZVTkRJTkdfR09BTCkgcmV0dXJuIGZhbHNlOwogICAgIHJldHVybiB0cnVlOwogIH0gIAogIAogIC8qIEFyZSB0b2tlbnMgdHJhbnNmZXJhYmxlPyAqLwoKICBmdW5jdGlvbiBpc1RyYW5zZmVyYWJsZSgpIGNvbnN0YW50IHJldHVybnMgKGJvb2wgdHJhbnNmZXJhYmxlKSB7CiAgICAgaWYgKCAhaWNvVGhyZXNob2xkUmVhY2hlZCgpICkgcmV0dXJuIGZhbHNlOwogICAgIGlmICggYXROb3coKSA8IERBVEVfSUNPX0VORCArIENPT0xET1dOX1BFUklPRCApIHJldHVybiBmYWxzZTsKICAgICByZXR1cm4gdHJ1ZTsKICB9CiAgCiAgLy8gTG9jayBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAvKiBNYW5hZ2UgbG9ja2VkICovCgogIGZ1bmN0aW9uIHJlbW92ZUxvY2soYWRkcmVzcyBfcGFydGljaXBhbnQpIHsKICAgIHJlcXVpcmUoIG1zZy5zZW5kZXIgPT0gYWRtaW5XYWxsZXQgfHwgbXNnLnNlbmRlciA9PSBvd25lciApOwogICAgbG9ja2VkW19wYXJ0aWNpcGFudF0gPSBmYWxzZTsKICAgIExvY2tSZW1vdmVkKF9wYXJ0aWNpcGFudCk7CiAgfQoKICBmdW5jdGlvbiByZW1vdmVMb2NrTXVsdGlwbGUoYWRkcmVzc1tdIF9wYXJ0aWNpcGFudHMpIHsKICAgIHJlcXVpcmUoIG1zZy5zZW5kZXIgPT0gYWRtaW5XYWxsZXQgfHwgbXNnLnNlbmRlciA9PSBvd25lciApOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX3BhcnRpY2lwYW50cy5sZW5ndGg7IGkrKykgewogICAgICBsb2NrZWRbX3BhcnRpY2lwYW50c1tpXV0gPSBmYWxzZTsKICAgICAgTG9ja1JlbW92ZWQoX3BhcnRpY2lwYW50c1tpXSk7CiAgICB9CiAgfQoKICAvLyBPd25lciBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tCiAgCiAgLyogQ2hhbmdlIHRoZSBjcm93ZHNhbGUgd2FsbGV0IGFkZHJlc3MgKi8KCiAgZnVuY3Rpb24gc2V0V2FsbGV0KGFkZHJlc3MgX3dhbGxldCkgb25seU93bmVyIHsKICAgIHJlcXVpcmUoIF93YWxsZXQgIT0gYWRkcmVzcygweDApICk7CiAgICB3YWxsZXQgPSBfd2FsbGV0OwogICAgV2FsbGV0VXBkYXRlZCh3YWxsZXQpOwogIH0KCiAgLyogQ2hhbmdlIHRoZSBhZG1pbiB3YWxsZXQgYWRkcmVzcyAqLwoKICBmdW5jdGlvbiBzZXRBZG1pbldhbGxldChhZGRyZXNzIF93YWxsZXQpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCBfd2FsbGV0ICE9IGFkZHJlc3MoMHgwKSApOwogICAgYWRtaW5XYWxsZXQgPSBfd2FsbGV0OwogICAgQWRtaW5XYWxsZXRVcGRhdGVkKGFkbWluV2FsbGV0KTsKICB9CgogIC8qIENoYW5nZSB0b2tlbnNQZXJFdGggYmVmb3JlIElDTyBzdGFydCAqLwogIAogIGZ1bmN0aW9uIHVwZGF0ZVRva2Vuc1BlckV0aCh1aW50IF90b2tlbnNQZXJFdGgpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCBhdE5vdygpIDwgREFURV9QUkVTQUxFX1NUQVJUICk7CiAgICB0b2tlbnNQZXJFdGggPSBfdG9rZW5zUGVyRXRoOwogICAgVG9rZW5zUGVyRXRoVXBkYXRlZChfdG9rZW5zUGVyRXRoKTsKICB9CgogIC8qIE1pbnRpbmcgb2YgbWFya2V0aW5nIHRva2VucyBieSBvd25lciAqLwoKICBmdW5jdGlvbiBtaW50TWFya2V0aW5nKGFkZHJlc3MgX3BhcnRpY2lwYW50LCB1aW50IF90b2tlbnMpIG9ubHlPd25lciB7CiAgICAvLyBjaGVjayBhbW91bnQKICAgIHJlcXVpcmUoIF90b2tlbnMgPD0gVE9LRU5fU1VQUExZX01LVC5zdWIodG9rZW5zSXNzdWVkTWt0KSApOwogICAgCiAgICAvLyB1cGRhdGUgYmFsYW5jZXMKICAgIGJhbGFuY2VzW19wYXJ0aWNpcGFudF0gPSBiYWxhbmNlc1tfcGFydGljaXBhbnRdLmFkZChfdG9rZW5zKTsKICAgIHRva2Vuc0lzc3VlZE1rdCAgICAgICAgPSB0b2tlbnNJc3N1ZWRNa3QuYWRkKF90b2tlbnMpOwogICAgdG9rZW5zSXNzdWVkVG90YWwgICAgICA9IHRva2Vuc0lzc3VlZFRvdGFsLmFkZChfdG9rZW5zKTsKICAgIAogICAgLy8gbG9ja2VkCiAgICBsb2NrZWRbX3BhcnRpY2lwYW50XSA9IHRydWU7CiAgICAKICAgIC8vIGxvZyB0aGUgbWluaXRpbmcKICAgIFRyYW5zZmVyKDB4MCwgX3BhcnRpY2lwYW50LCBfdG9rZW5zKTsKICAgIFRva2Vuc01pbnRlZChfcGFydGljaXBhbnQsIF90b2tlbnMsIGJhbGFuY2VzW19wYXJ0aWNpcGFudF0pOwogIH0KCiAgLyogT3duZXIgY2xhd2JhY2sgb2YgcmVtYWluaW5nIGZ1bmRzIGFmdGVyIGNsYXdiYWNrIHBlcmlvZCAqLwogIC8qIChmb3IgdXNlIGluIGNhc2Ugb2YgYSBmYWlsZWQgQ3J3b2RzYWxlKSAqLwogIAogIGZ1bmN0aW9uIG93bmVyQ2xhd2JhY2soKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgcmVxdWlyZSggYXROb3coKSA+IERBVEVfSUNPX0VORCArIENMQVdCQUNLX1BFUklPRCApOwogICAgd2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQoKICAvKiBUcmFuc2ZlciBvdXQgYW55IGFjY2lkZW50YWxseSBzZW50IEVSQzIwIHRva2VucyAqLwoKICBmdW5jdGlvbiB0cmFuc2ZlckFueUVSQzIwVG9rZW4oYWRkcmVzcyB0b2tlbkFkZHJlc3MsIHVpbnQgYW1vdW50KSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgIHJldHVybiBFUkMyMEludGVyZmFjZSh0b2tlbkFkZHJlc3MpLnRyYW5zZmVyKG93bmVyLCBhbW91bnQpOwogIH0KCiAgLy8gUHJpdmF0ZSBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLQoKICAvKiBBY2NlcHQgRVRIIGR1cmluZyBjcm93ZHNhbGUgKGNhbGxlZCBieSBkZWZhdWx0IGZ1bmN0aW9uKSAqLwoKICBmdW5jdGlvbiBidXlUb2tlbnMoKSBwcml2YXRlIHsKICAgIHVpbnQgdHMgPSBhdE5vdygpOwogICAgYm9vbCBpc1ByZXNhbGUgPSBmYWxzZTsKICAgIGJvb2wgaXNJY28gPSBmYWxzZTsKICAgIHVpbnQgdG9rZW5zID0gMDsKICAgIAogICAgLy8gbWluaW11bSBjb250cmlidXRpb24KICAgIHJlcXVpcmUoIG1zZy52YWx1ZSA+PSBNSU5fQ09OVFJJQlVUSU9OICk7CiAgICAKICAgIC8vIG9uZSBhZGRyZXNzIHRyYW5zZmVyIGhhcmQgY2FwCiAgICByZXF1aXJlKCBpY29FdGhlckNvbnRyaWJ1dGVkW21zZy5zZW5kZXJdLmFkZChtc2cudmFsdWUpIDw9IE1BWF9DT05UUklCVVRJT04gKTsKCiAgICAvLyBjaGVjayBkYXRlcyBmb3IgcHJlc2FsZSBvciBJQ08KICAgIGlmICh0cyA+IERBVEVfUFJFU0FMRV9TVEFSVCAmJiB0cyA8IERBVEVfUFJFU0FMRV9FTkQpIGlzUHJlc2FsZSA9IHRydWU7ICAKICAgIGlmICh0cyA+IERBVEVfSUNPX1NUQVJUICYmIHRzIDwgREFURV9JQ09fRU5EKSBpc0ljbyA9IHRydWU7ICAKICAgIHJlcXVpcmUoIGlzUHJlc2FsZSB8fCBpc0ljbyApOwoKICAgIC8vIHByZXNhbGUgY2FwIGluIEV0aGVyCiAgICBpZiAoaXNQcmVzYWxlKSByZXF1aXJlKCBpY29FdGhlclJlY2VpdmVkLmFkZChtc2cudmFsdWUpIDw9IFBSRVNBTEVfRVRIX0NBUCApOwogICAgCiAgICAvLyBnZXQgYmFzZWxpbmUgbnVtYmVyIG9mIHRva2VucwogICAgdG9rZW5zID0gdG9rZW5zUGVyRXRoLm11bChtc2cudmFsdWUpIC8gMSBldGhlcjsKICAgIAogICAgLy8gYXBwbHkgYm9udXNlcyAobm9uZSBmb3IgbGFzdCB3ZWVrKQogICAgaWYgKGlzUHJlc2FsZSkgewogICAgICB0b2tlbnMgPSB0b2tlbnMubXVsKDEwMCArIEJPTlVTX1BSRVNBTEUpIC8gMTAwOwogICAgfSBlbHNlIGlmICh0cyA8IERBVEVfSUNPX1NUQVJUICsgNyBkYXlzKSB7CiAgICAgIC8vIGZpcnN0IHdlZWsgaWNvIGJvbnVzCiAgICAgIHRva2VucyA9IHRva2Vucy5tdWwoMTAwICsgQk9OVVNfSUNPX1dFRUtfT05FKSAvIDEwMDsKICAgIH0gZWxzZSBpZiAodHMgPCBEQVRFX0lDT19TVEFSVCArIDE0IGRheXMpIHsKICAgICAgLy8gc2Vjb25kIHdlZWsgaWNvIGJvbnVzCiAgICAgIHRva2VucyA9IHRva2Vucy5tdWwoMTAwICsgQk9OVVNfSUNPX1dFRUtfVFdPKSAvIDEwMDsKICAgIH0KICAgIAogICAgLy8gSUNPIHRva2VuIHZvbHVtZSBjYXAKICAgIHJlcXVpcmUoIHRva2Vuc0lzc3VlZEljby5hZGQodG9rZW5zKSA8PSBUT0tFTl9TVVBQTFlfSUNPICk7CgogICAgLy8gcmVnaXN0ZXIgdG9rZW5zCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAgICAgICAgICA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZCh0b2tlbnMpOwogICAgaWNvVG9rZW5zUmVjZWl2ZWRbbXNnLnNlbmRlcl0gPSBpY29Ub2tlbnNSZWNlaXZlZFttc2cuc2VuZGVyXS5hZGQodG9rZW5zKTsKICAgIHRva2Vuc0lzc3VlZEljbyAgICAgICAgICAgICAgID0gdG9rZW5zSXNzdWVkSWNvLmFkZCh0b2tlbnMpOwogICAgdG9rZW5zSXNzdWVkVG90YWwgICAgICAgICAgICAgPSB0b2tlbnNJc3N1ZWRUb3RhbC5hZGQodG9rZW5zKTsKICAgIAogICAgLy8gcmVnaXN0ZXIgRXRoZXIKICAgIGljb0V0aGVyUmVjZWl2ZWQgICAgICAgICAgICAgICAgPSBpY29FdGhlclJlY2VpdmVkLmFkZChtc2cudmFsdWUpOwogICAgaWNvRXRoZXJDb250cmlidXRlZFttc2cuc2VuZGVyXSA9IGljb0V0aGVyQ29udHJpYnV0ZWRbbXNnLnNlbmRlcl0uYWRkKG1zZy52YWx1ZSk7CiAgICAKICAgIC8vIGxvY2tlZAogICAgbG9ja2VkW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgIAogICAgLy8gbG9nIHRva2VuIGlzc3VhbmNlCiAgICBUcmFuc2ZlcigweDAsIG1zZy5zZW5kZXIsIHRva2Vucyk7CiAgICBUb2tlbnNJc3N1ZWQobXNnLnNlbmRlciwgdG9rZW5zLCBiYWxhbmNlc1ttc2cuc2VuZGVyXSwgbXNnLnZhbHVlKTsKCiAgICAvLyB0cmFuc2ZlciBFdGhlciBpZiB3ZSdyZSBvdmVyIHRoZSB0aHJlc2hvbGQKICAgIGlmICggaWNvVGhyZXNob2xkUmVhY2hlZCgpICkgd2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQogIAogIC8vIEVSQzIwIGZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0KCiAgLyogT3ZlcnJpZGUgInRyYW5zZmVyIiAoRVJDMjApICovCgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmVxdWlyZSggaXNUcmFuc2ZlcmFibGUoKSApOwogICAgcmVxdWlyZSggbG9ja2VkW21zZy5zZW5kZXJdID09IGZhbHNlICk7CiAgICByZXF1aXJlKCBsb2NrZWRbX3RvXSA9PSBmYWxzZSApOwogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX2Ftb3VudCk7CiAgfQogIAogIC8qIE92ZXJyaWRlICJ0cmFuc2ZlckZyb20iIChFUkMyMCkgKi8KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmVxdWlyZSggaXNUcmFuc2ZlcmFibGUoKSApOwogICAgcmVxdWlyZSggbG9ja2VkW19mcm9tXSA9PSBmYWxzZSApOwogICAgcmVxdWlyZSggbG9ja2VkW190b10gPT0gZmFsc2UgKTsKICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgfQoKICAvLyBFeHRlcm5hbCBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tCgogIC8qIFJlY2xhaW1pbmcgb2YgZnVuZHMgYnkgY29udHJpYnV0b3JzIGluIGNhc2Ugb2YgYSBmYWlsZWQgY3Jvd2RzYWxlICovCiAgLyogKGl0IHdpbGwgZmFpbCBpZiBhY2NvdW50IGlzIGVtcHR5IGFmdGVyIG93bmVyQ2xhd2JhY2spICovCgogIC8qIFdoaWxlIHRoZXJlIGNvdWxkIG5vdCBoYXZlIGJlZW4gYW55IHRva2VuIHRyYW5zZmVycyB5ZXQsIGEgY29udHJpYnV0b3IgKi8KICAvKiBtYXkgaGF2ZSByZWNlaXZlZCBtaW50ZWQgdG9rZW5zLCBzbyB0aGUgdG9rZW4gYmFsYW5jZSBhZnRlciBhIHJlZnVuZCAqLyAKICAvKiBtYXkgc3RpbGwgYmUgcG9zaXRpdmUgKi8KICAKICBmdW5jdGlvbiByZWNsYWltRnVuZHMoKSBleHRlcm5hbCB7CiAgICB1aW50IHRva2VuczsgLy8gdG9rZW5zIHRvIGRlc3Ryb3kKICAgIHVpbnQgYW1vdW50OyAvLyByZWZ1bmQgYW1vdW50CiAgICAKICAgIC8vIGljbyBpcyBmaW5pc2hlZCBhbmQgd2FzIG5vdCBzdWNjZXNzZnVsCiAgICByZXF1aXJlKCBhdE5vdygpID4gREFURV9JQ09fRU5EICYmICFpY29UaHJlc2hvbGRSZWFjaGVkKCkgKTsKICAgIAogICAgLy8gY2hlY2sgaWYgcmVmdW5kIGhhcyBhbHJlYWR5IGJlZW4gY2xhaW1lZAogICAgcmVxdWlyZSggIXJlZnVuZENsYWltZWRbbXNnLnNlbmRlcl0gKTsKICAgIAogICAgLy8gY2hlY2sgaWYgdGhlcmUgaXMgYW55dGhpbmcgdG8gcmVmdW5kCiAgICByZXF1aXJlKCBpY29FdGhlckNvbnRyaWJ1dGVkW21zZy5zZW5kZXJdID4gMCApOwogICAgCiAgICAvLyB1cGRhdGUgdmFyaWFibGVzIGFmZmVjdGVkIGJ5IHJlZnVuZAogICAgdG9rZW5zID0gaWNvVG9rZW5zUmVjZWl2ZWRbbXNnLnNlbmRlcl07CiAgICBhbW91bnQgPSBpY29FdGhlckNvbnRyaWJ1dGVkW21zZy5zZW5kZXJdOwoKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKHRva2Vucyk7CiAgICB0b2tlbnNJc3N1ZWRUb3RhbCAgICA9IHRva2Vuc0lzc3VlZFRvdGFsLnN1Yih0b2tlbnMpOwogICAgCiAgICByZWZ1bmRDbGFpbWVkW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgIAogICAgLy8gdHJhbnNmZXIgb3V0IHJlZnVuZAogICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQpOwogICAgCiAgICAvLyBsb2cKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDB4MCwgdG9rZW5zKTsKICAgIFJlZnVuZChtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vucyk7CiAgfQoKICAvKiBDbGFpbWluZyBvZiAiYWlyZHJvcHBlZCIgdG9rZW5zIGluIGNhc2Ugb2Ygc3VjY2Vzc2Z1bCBjcm93ZHNhbGUgKi8KICAvKiBDYW4gYmUgZG9uZSBieSB0b2tlbiBob2xkZXIsIG9yIGJ5IGFkbWluV2FsbGV0ICovIAoKICBmdW5jdGlvbiBjbGFpbUFpcmRyb3AoKSBleHRlcm5hbCB7CiAgICBkb0FpcmRyb3AobXNnLnNlbmRlcik7CiAgfQoKICBmdW5jdGlvbiBhZG1pbkNsYWltQWlyZHJvcChhZGRyZXNzIF9wYXJ0aWNpcGFudCkgZXh0ZXJuYWwgewogICAgcmVxdWlyZSggbXNnLnNlbmRlciA9PSBhZG1pbldhbGxldCApOwogICAgZG9BaXJkcm9wKF9wYXJ0aWNpcGFudCk7CiAgfQoKICBmdW5jdGlvbiBhZG1pbkNsYWltQWlyZHJvcE11bHRpcGxlKGFkZHJlc3NbXSBfYWRkcmVzc2VzKSBleHRlcm5hbCB7CiAgICByZXF1aXJlKCBtc2cuc2VuZGVyID09IGFkbWluV2FsbGV0ICk7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfYWRkcmVzc2VzLmxlbmd0aDsgaSsrKSBkb0FpcmRyb3AoX2FkZHJlc3Nlc1tpXSk7CiAgfSAgCiAgCiAgZnVuY3Rpb24gZG9BaXJkcm9wKGFkZHJlc3MgX3BhcnRpY2lwYW50KSBpbnRlcm5hbCB7CiAgICB1aW50IGFpcmRyb3AgPSBjb21wdXRlQWlyZHJvcChfcGFydGljaXBhbnQpOwoKICAgIHJlcXVpcmUoIGFpcmRyb3AgPiAwICk7CgogICAgLy8gdXBkYXRlIGJhbGFuY2VzIGFuZCB0b2tlbiBpc3N1ZSB2b2x1bWUKICAgIGFpcmRyb3BDbGFpbWVkW19wYXJ0aWNpcGFudF0gPSB0cnVlOwogICAgYmFsYW5jZXNbX3BhcnRpY2lwYW50XSA9IGJhbGFuY2VzW19wYXJ0aWNpcGFudF0uYWRkKGFpcmRyb3ApOwogICAgdG9rZW5zSXNzdWVkVG90YWwgICAgICA9IHRva2Vuc0lzc3VlZFRvdGFsLmFkZChhaXJkcm9wKTsKICAgIHRva2Vuc0NsYWltZWRBaXJkcm9wICAgPSB0b2tlbnNDbGFpbWVkQWlyZHJvcC5hZGQoYWlyZHJvcCk7CiAgICAKICAgIC8vIGxvZwogICAgQWlyZHJvcChfcGFydGljaXBhbnQsIGFpcmRyb3AsIGJhbGFuY2VzW19wYXJ0aWNpcGFudF0pOwogICAgVHJhbnNmZXIoMHgwLCBfcGFydGljaXBhbnQsIGFpcmRyb3ApOwogIH0KCiAgLyogRnVuY3Rpb24gdG8gZXN0aW1hdGUgYWlyZHJvcCBhbW91bnQuIEZvciBzb21lIGFjY291bnRzLCB0aGUgdmFsdWUgb2YgKi8KICAvKiB0b2tlbnMgcmVjZWl2ZWQgYnkgY2FsbGluZyBjbGFpbUFpcmRyb3AoKSBtYXkgYmUgbGVzcyB0aGFuIGdhcyBjb3N0cyAqLwogIAogIC8qIElmIGFuIGFjY291bnQgaGFzIHRva2VucyBmcm9tIHRoZSBpY28sIHRoZSBhbW91bnQgYWZ0ZXIgdGhlIGFpcmRyb3AgKi8KICAvKiB3aWxsIGJlIG5ld0JhbGFuY2UgPSB0b2tlbnMgKiBUT0tFTl9TVVBQTFlfSUNPIC8gdG9rZW5zSXNzdWVkSWNvICovCiAgICAgIAogIGZ1bmN0aW9uIGNvbXB1dGVBaXJkcm9wKGFkZHJlc3MgX3BhcnRpY2lwYW50KSBjb25zdGFudCByZXR1cm5zICh1aW50IGFpcmRyb3ApIHsKICAgIC8vIHJldHVybiAwIGlmIGl0J3MgdG9vIGVhcmx5IG9yIGljbyB3YXMgbm90IHN1Y2Nlc3NmdWwKICAgIGlmICggYXROb3coKSA8IERBVEVfSUNPX0VORCB8fCAhaWNvVGhyZXNob2xkUmVhY2hlZCgpICkgcmV0dXJuIDA7CiAgICAKICAgIC8vIHJldHVybiAgMCBpcyB0aGUgYWlyZHJvcCB3YXMgYWxyZWFkeSBjbGFpbWVkCiAgICBpZiggYWlyZHJvcENsYWltZWRbX3BhcnRpY2lwYW50XSApIHJldHVybiAwOwoKICAgIC8vIHJldHVybiAwIGlmIHRoZSBhY2NvdW50IGRvZXMgbm90IGhvbGQgYW55IGNyb3dkc2FsZSB0b2tlbnMKICAgIGlmKCBpY29Ub2tlbnNSZWNlaXZlZFtfcGFydGljaXBhbnRdID09IDAgKSByZXR1cm4gMDsKICAgIAogICAgLy8gYWlyZHJvcCBhbW91bnQKICAgIHVpbnQgdG9rZW5zID0gaWNvVG9rZW5zUmVjZWl2ZWRbX3BhcnRpY2lwYW50XTsKICAgIHVpbnQgbmV3QmFsYW5jZSA9IHRva2Vucy5tdWwoVE9LRU5fU1VQUExZX0lDTykgLyB0b2tlbnNJc3N1ZWRJY287CiAgICBhaXJkcm9wID0gbmV3QmFsYW5jZSAtIHRva2VuczsKICB9ICAKCiAgLyogTXVsdGlwbGUgdG9rZW4gdHJhbnNmZXJzIGZyb20gb25lIGFkZHJlc3MgdG8gc2F2ZSBnYXMgKi8KICAvKiAobG9uZ2VyIF9hbW91bnRzIGFycmF5IG5vdCBhY2NlcHRlZCA9IHNhbml0eSBjaGVjaykgKi8KCiAgZnVuY3Rpb24gdHJhbnNmZXJNdWx0aXBsZShhZGRyZXNzW10gX2FkZHJlc3NlcywgdWludFtdIF9hbW91bnRzKSBleHRlcm5hbCB7CiAgICByZXF1aXJlKCBpc1RyYW5zZmVyYWJsZSgpICk7CiAgICByZXF1aXJlKCBsb2NrZWRbbXNnLnNlbmRlcl0gPT0gZmFsc2UgKTsKICAgIHJlcXVpcmUoIF9hZGRyZXNzZXMubGVuZ3RoID09IF9hbW91bnRzLmxlbmd0aCApOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX2FkZHJlc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAobG9ja2VkW19hZGRyZXNzZXNbaV1dID09IGZhbHNlKSBzdXBlci50cmFuc2ZlcihfYWRkcmVzc2VzW2ldLCBfYW1vdW50c1tpXSk7CiAgICB9CiAgfSAgCgp9'.
	

]
