Class {
	#name : #SRT34ab5b2d94d624ae0f82332b79db47ab07a9948b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT34ab5b2d94d624ae0f82332b79db47ab07a9948b >> base64 [
	^ 'Y29udHJhY3QgRmxpZ2h0RGVsYXlDb250cm9sbGVySW50ZXJmYWNlIHsKCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FkZHIpIHJldHVybnMgKGJvb2wgX2lzT3duZXIpOwoKICAgIGZ1bmN0aW9uIHNlbGZSZWdpc3RlcihieXRlczMyIF9pZCkgcmV0dXJucyAoYm9vbCByZXN1bHQpOwoKICAgIGZ1bmN0aW9uIGdldENvbnRyYWN0KGJ5dGVzMzIgX2lkKSByZXR1cm5zIChhZGRyZXNzIF9hZGRyKTsKfQoKY29udHJhY3QgRmxpZ2h0RGVsYXlEYXRhYmFzZU1vZGVsIHsKCiAgICAvLyBMZWRnZXIgYWNjb3VudHMuCiAgICBlbnVtIEFjYyB7CiAgICAgICAgUHJlbWl1bSwgICAgICAvLyAwCiAgICAgICAgUmlza0Z1bmQsICAgICAvLyAxCiAgICAgICAgUGF5b3V0LCAgICAgICAvLyAyCiAgICAgICAgQmFsYW5jZSwgICAgICAvLyAzCiAgICAgICAgUmV3YXJkLCAgICAgICAvLyA0CiAgICAgICAgT3JhY2xpemVDb3N0cyAvLyA1CiAgICB9CgogICAgLy8gcG9saWN5IFN0YXR1cyBDb2RlcyBhbmQgbWVhbmluZzoKICAgIC8vCiAgICAvLyAwMCA9IEFwcGxpZWQ6CSAgdGhlIGN1c3RvbWVyIGhhcyBwYXllZCBhIHByZW1pdW0sIGJ1dCB0aGUgb3JhY2xlIGhhcwogICAgLy8JCQkJCSAgICAgICAgbm90IHlldCBjaGVja2VkIGFuZCBjb25maXJtZWQuCiAgICAvLwkJCQkJICAgICAgICBUaGUgY3VzdG9tZXIgY2FuIHN0aWxsIHJldm9rZSB0aGUgcG9saWN5LgogICAgLy8gMDEgPSBBY2NlcHRlZDoJICB0aGUgb3JhY2xlIGhhcyBjaGVja2VkIGFuZCBjb25maXJtZWQuCiAgICAvLwkJCQkJICAgICAgICBUaGUgY3VzdG9tZXIgY2FuIHN0aWxsIHJldm9rZSB0aGUgcG9saWN5LgogICAgLy8gMDIgPSBSZXZva2VkOgkgIFRoZSBjdXN0b21lciBoYXMgcmV2b2tlZCB0aGUgcG9saWN5LgogICAgLy8JCQkJCSAgICAgICAgVGhlIHByZW1pdW0gbWludXMgY2FuY2VsbGF0aW9uIGZlZSBpcyBwYXllZCBiYWNrIHRvIHRoZQogICAgLy8JCQkJCSAgICAgICAgY3VzdG9tZXIgYnkgdGhlIG9yYWNsZS4KICAgIC8vIDAzID0gUGFpZE91dDoJICBUaGUgZmxpZ2h0IGhhcyBlbmRlZCB3aXRoIGRlbGF5LgogICAgLy8JCQkJCSAgICAgICAgVGhlIG9yYWNsZSBoYXMgY2hlY2tlZCBhbmQgcGF5ZWQgb3V0LgogICAgLy8gMDQgPSBFeHBpcmVkOgkgIFRoZSBmbGlnaHQgaGFzIGVuZGV0IHdpdGggPDE1bWluLiBkZWxheS4KICAgIC8vCQkJCQkgICAgICAgIE5vIHBheW91dC4KICAgIC8vIDA1ID0gRGVjbGluZWQ6CSAgVGhlIGFwcGxpY2F0aW9uIHdhcyBpbnZhbGlkLgogICAgLy8JCQkJCSAgICAgICAgVGhlIHByZW1pdW0gbWludXMgY2FuY2VsbGF0aW9uIGZlZSBpcyBwYXllZCBiYWNrIHRvIHRoZQogICAgLy8JCQkJCSAgICAgICAgY3VzdG9tZXIgYnkgdGhlIG9yYWNsZS4KICAgIC8vIDA2ID0gU2VuZEZhaWxlZDoJRHVyaW5nIFJldm9rZSwgRGVjbGluZSBvciBQYXlvdXQsIHNlbmRpbmcgZXRoZXIgZmFpbGVkCiAgICAvLwkJCQkJICAgICAgICBmb3IgdW5rbm93biByZWFzb25zLgogICAgLy8JCQkJCSAgICAgICAgVGhlIGZ1bmRzIHJlbWFpbiBpbiB0aGUgY29udHJhY3RzIFJpc2tGdW5kLgoKCiAgICAvLyAgICAgICAgICAgICAgICAgICAwMCAgICAgICAwMSAgICAgICAgMDIgICAgICAgMDMgICAgICAgIDA0ICAgICAgMDUgICAgICAgICAgIDA2CiAgICBlbnVtIHBvbGljeVN0YXRlIHsgQXBwbGllZCwgQWNjZXB0ZWQsIFJldm9rZWQsIFBhaWRPdXQsIEV4cGlyZWQsIERlY2xpbmVkLCBTZW5kRmFpbGVkIH0KCiAgICAvLyBvcmFjbGl6ZSBjYWxsYmFjayB0eXBlczoKICAgIGVudW0gb3JhY2xpemVTdGF0ZSB7IEZvclVuZGVyd3JpdGluZywgRm9yUGF5b3V0IH0KCiAgICAvLyAgICAgICAgICAgICAgIDAwICAgMDEgICAwMiAgIDAzCiAgICBlbnVtIEN1cnJlbmN5IHsgRVRILCBFVVIsIFVTRCwgR0JQIH0KCiAgICAvLyB0aGUgcG9saWN5IHN0cnVjdHVyZTogdGhpcyBzdHJ1Y3R1cmUga2VlcHMgdHJhY2sgb2YgdGhlIGluZGl2aWR1YWwgcGFyYW1ldGVycyBvZiBhIHBvbGljeS4KICAgIC8vIHR5cGljYWxseSBjdXN0b21lciBhZGRyZXNzLCBwcmVtaXVtIGFuZCBzb21lIHN0YXR1cyBpbmZvcm1hdGlvbi4KICAgIHN0cnVjdCBQb2xpY3kgewogICAgICAgIC8vIDAgLSB0aGUgY3VzdG9tZXIKICAgICAgICBhZGRyZXNzIGN1c3RvbWVyOwoKICAgICAgICAvLyAxIC0gcHJlbWl1bQogICAgICAgIHVpbnQgcHJlbWl1bTsKICAgICAgICAvLyByaXNrIHNwZWNpZmljIHBhcmFtZXRlcnM6CiAgICAgICAgLy8gMiAtIHBvaW50ZXIgdG8gdGhlIHJpc2sgaW4gdGhlIHJpc2tzIG1hcHBpbmcKICAgICAgICBieXRlczMyIHJpc2tJZDsKICAgICAgICAvLyBjdXN0b20gcGF5b3V0IHBhdHRlcm4KICAgICAgICAvLyBpbiBmdXR1cmUgdmVyc2lvbnMsIGN1c3RvbWVyIHdpbGwgYmUgYWJsZSB0byB0YW1wZXIgd2l0aCB0aGlzIGFycmF5LgogICAgICAgIC8vIHRvIGtlZXAgdGhpbmdzIHNpbXBsZSwgd2UgaGF2ZSBkZWNpZGVkIHRvIGhhcmQtY29kZSB0aGUgYXJyYXkgZm9yIGFsbCBwb2xpY2llcy4KICAgICAgICAvLyB1aW50OFs1XSBwYXR0ZXJuOwogICAgICAgIC8vIDMgLSBwcm9iYWJpbGl0eSB3ZWlnaHQuIHRoaXMgaXMgdGhlIGNlbnRyYWwgcGFyYW1ldGVyCiAgICAgICAgdWludCB3ZWlnaHQ7CiAgICAgICAgLy8gNCAtIGNhbGN1bGF0ZWQgUGF5b3V0CiAgICAgICAgdWludCBjYWxjdWxhdGVkUGF5b3V0OwogICAgICAgIC8vIDUgLSBhY3R1YWwgUGF5b3V0CiAgICAgICAgdWludCBhY3R1YWxQYXlvdXQ7CgogICAgICAgIC8vIHN0YXR1cyBmaWVsZHM6CiAgICAgICAgLy8gNiAtIHRoZSBzdGF0ZSBvZiB0aGUgcG9saWN5CiAgICAgICAgcG9saWN5U3RhdGUgc3RhdGU7CiAgICAgICAgLy8gNyAtIHRpbWUgb2YgbGFzdCBzdGF0ZSBjaGFuZ2UKICAgICAgICB1aW50IHN0YXRlVGltZTsKICAgICAgICAvLyA4IC0gc3RhdGUgY2hhbmdlIG1lc3NhZ2UvcmVhc29uCiAgICAgICAgYnl0ZXMzMiBzdGF0ZU1lc3NhZ2U7CiAgICAgICAgLy8gOSAtIFRMU05vdGFyeSBQcm9vZgogICAgICAgIGJ5dGVzIHByb29mOwogICAgICAgIC8vIDEwIC0gQ3VycmVuY3kKICAgICAgICBDdXJyZW5jeSBjdXJyZW5jeTsKICAgICAgICAvLyAxMCAtIEV4dGVybmFsIGN1c3RvbWVyIGlkCiAgICAgICAgYnl0ZXMzMiBjdXN0b21lckV4dGVybmFsSWQ7CiAgICB9CgogICAgLy8gdGhlIHJpc2sgc3RydWN0dXJlOyB0aGlzIHN0cnVjdHVyZSBrZWVwcyB0cmFjayBvZiB0aGUgcmlzay0KICAgIC8vIHNwZWNpZmljIHBhcmFtZXRlcnMuCiAgICAvLyBzZXZlcmFsIHBvbGljaWVzIGNhbiBzaGFyZSB0aGUgc2FtZSByaXNrIHN0cnVjdHVyZSAodHlwaWNhbGx5CiAgICAvLyBzb21lIHBlb3BsZSBmbHlpbmcgd2l0aCB0aGUgc2FtZSBwbGFuZSkKICAgIHN0cnVjdCBSaXNrIHsKICAgICAgICAvLyAwIC0gQWlybGluZSBDb2RlICsgRmxpZ2h0TnVtYmVyCiAgICAgICAgYnl0ZXMzMiBjYXJyaWVyRmxpZ2h0TnVtYmVyOwogICAgICAgIC8vIDEgLSBzY2hlZHVsZWQgZGVwYXJ0dXJlIGFuZCBhcnJpdmFsIHRpbWUgaW4gdGhlIGZvcm1hdCAvZGVwL1lZWVkvTU0vREQKICAgICAgICBieXRlczMyIGRlcGFydHVyZVllYXJNb250aERheTsKICAgICAgICAvLyAyIC0gdGhlIGluaXRhbCBhcnJpdmFsIHRpbWUKICAgICAgICB1aW50IGFycml2YWxUaW1lOwogICAgICAgIC8vIDMgLSB0aGUgZmluYWwgZGVsYXkgaW4gbWludXRlcwogICAgICAgIHVpbnQgZGVsYXlJbk1pbnV0ZXM7CiAgICAgICAgLy8gNCAtIHRoZSBkZXRlcm1pbmVkIGRlbGF5IGNhdGVnb3J5ICgwLTUpCiAgICAgICAgdWludDggZGVsYXk7CiAgICAgICAgLy8gNSAtIHdlIGxpbWl0IHRoZSBjdW11bGF0ZWQgd2VpZ2h0ZWQgcHJlbWl1bSB0byBhdm9pZCBjbHVzdGVyIHJpc2tzCiAgICAgICAgdWludCBjdW11bGF0ZWRXZWlnaHRlZFByZW1pdW07CiAgICAgICAgLy8gNiAtIG1heCBjdW11bGF0ZWQgUGF5b3V0IGZvciB0aGlzIHJpc2sKICAgICAgICB1aW50IHByZW1pdW1NdWx0aXBsaWVyOwogICAgfQoKICAgIC8vIHRoZSBvcmFjbGl6ZSBjYWxsYmFjayBzdHJ1Y3R1cmU6IHdlIHVzZSBzZXZlcmFsIG9yYWNsaXplIGNhbGxzLgogICAgLy8gYWxsIG9yYWNsaXplIGNhbGxzIHdpbGwgcmVzdWx0IGluIGEgY29tbW9uIGNhbGxiYWNrIHRvIF9fY2FsbGJhY2soLi4uKS4KICAgIC8vIHRvIGtlZXAgdHJhY2sgb2YgdGhlIGRpZmZlcmVudCBxdWVyeXMgd2UgaGF2ZSB0byBpbnRyb2R1Y2UgdGhpcyBzdHJ1Y3QuCiAgICBzdHJ1Y3QgT3JhY2xpemVDYWxsYmFjayB7CiAgICAgICAgLy8gZm9yIHdoaWNoIHBvbGljeSBoYXZlIHdlIGNhbGxlZD8KICAgICAgICB1aW50IHBvbGljeUlkOwogICAgICAgIC8vIGZvciB3aGljaCBwdXJwb3NlIGRpZCB3ZSBjYWxsPyB7Rm9yVW5kZXJ3cml0ZSB8IEZvclBheW91dH0KICAgICAgICBvcmFjbGl6ZVN0YXRlIG9TdGF0ZTsKICAgICAgICAvLyB0aW1lCiAgICAgICAgdWludCBvcmFjbGl6ZVRpbWU7CiAgICB9CgogICAgc3RydWN0IEN1c3RvbWVyIHsKICAgICAgICBieXRlczMyIGN1c3RvbWVyRXh0ZXJuYWxJZDsKICAgICAgICBib29sIGlkZW50aXR5Q29uZmlybWVkOwogICAgfQp9Cgpjb250cmFjdCBGbGlnaHREZWxheUNvbnRyb2xsZWRDb250cmFjdCBpcyBGbGlnaHREZWxheURhdGFiYXNlTW9kZWwgewoKICAgIGFkZHJlc3MgcHVibGljIGNvbnRyb2xsZXI7CiAgICBGbGlnaHREZWxheUNvbnRyb2xsZXJJbnRlcmZhY2UgRkRfQ0k7CgogICAgbW9kaWZpZXIgb25seUNvbnRyb2xsZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbnRyb2xsZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q29udHJvbGxlcihhZGRyZXNzIF9jb250cm9sbGVyKSBpbnRlcm5hbCByZXR1cm5zIChib29sIF9yZXN1bHQpIHsKICAgICAgICBjb250cm9sbGVyID0gX2NvbnRyb2xsZXI7CiAgICAgICAgRkRfQ0kgPSBGbGlnaHREZWxheUNvbnRyb2xsZXJJbnRlcmZhY2UoX2NvbnRyb2xsZXIpOwogICAgICAgIF9yZXN1bHQgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlc3RydWN0KCkgb25seUNvbnRyb2xsZXIgewogICAgICAgIHNlbGZkZXN0cnVjdChjb250cm9sbGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDb250cmFjdHMoKSBvbmx5Q29udHJvbGxlciB7fQoKICAgIGZ1bmN0aW9uIGdldENvbnRyYWN0KGJ5dGVzMzIgX2lkKSBpbnRlcm5hbCByZXR1cm5zIChhZGRyZXNzIF9hZGRyKSB7CiAgICAgICAgX2FkZHIgPSBGRF9DSS5nZXRDb250cmFjdChfaWQpOwogICAgfQp9Cgpjb250cmFjdCBGbGlnaHREZWxheURhdGFiYXNlSW50ZXJmYWNlIGlzIEZsaWdodERlbGF5RGF0YWJhc2VNb2RlbCB7CgogICAgZnVuY3Rpb24gc2V0QWNjZXNzQ29udHJvbChhZGRyZXNzIF9jb250cmFjdCwgYWRkcmVzcyBfY2FsbGVyLCB1aW50OCBfcGVybSk7CgogICAgZnVuY3Rpb24gc2V0QWNjZXNzQ29udHJvbCgKICAgICAgICBhZGRyZXNzIF9jb250cmFjdCwKICAgICAgICBhZGRyZXNzIF9jYWxsZXIsCiAgICAgICAgdWludDggX3Blcm0sCiAgICAgICAgYm9vbCBfYWNjZXNzCiAgICApOwoKICAgIGZ1bmN0aW9uIGdldEFjY2Vzc0NvbnRyb2woYWRkcmVzcyBfY29udHJhY3QsIGFkZHJlc3MgX2NhbGxlciwgdWludDggX3Blcm0pIHJldHVybnMgKGJvb2wgX2FsbG93ZWQpOwoKICAgIGZ1bmN0aW9uIHNldExlZGdlcih1aW50OCBfaW5kZXgsIGludCBfdmFsdWUpOwoKICAgIGZ1bmN0aW9uIGdldExlZGdlcih1aW50OCBfaW5kZXgpIHJldHVybnMgKGludCBfdmFsdWUpOwoKICAgIGZ1bmN0aW9uIGdldEN1c3RvbWVyUHJlbWl1bSh1aW50IF9wb2xpY3lJZCkgcmV0dXJucyAoYWRkcmVzcyBfY3VzdG9tZXIsIHVpbnQgX3ByZW1pdW0pOwoKICAgIGZ1bmN0aW9uIGdldFBvbGljeURhdGEodWludCBfcG9saWN5SWQpIHJldHVybnMgKGFkZHJlc3MgX2N1c3RvbWVyLCB1aW50IF9wcmVtaXVtLCB1aW50IF93ZWlnaHQpOwoKICAgIGZ1bmN0aW9uIGdldFBvbGljeVN0YXRlKHVpbnQgX3BvbGljeUlkKSByZXR1cm5zIChwb2xpY3lTdGF0ZSBfc3RhdGUpOwoKICAgIGZ1bmN0aW9uIGdldFJpc2tJZCh1aW50IF9wb2xpY3lJZCkgcmV0dXJucyAoYnl0ZXMzMiBfcmlza0lkKTsKCiAgICBmdW5jdGlvbiBjcmVhdGVQb2xpY3koYWRkcmVzcyBfY3VzdG9tZXIsIHVpbnQgX3ByZW1pdW0sIEN1cnJlbmN5IF9jdXJyZW5jeSwgYnl0ZXMzMiBfY3VzdG9tZXJFeHRlcm5hbElkLCBieXRlczMyIF9yaXNrSWQpIHJldHVybnMgKHVpbnQgX3BvbGljeUlkKTsKCiAgICBmdW5jdGlvbiBzZXRTdGF0ZSgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBwb2xpY3lTdGF0ZSBfc3RhdGUsCiAgICAgICAgdWludCBfc3RhdGVUaW1lLAogICAgICAgIGJ5dGVzMzIgX3N0YXRlTWVzc2FnZQogICAgKTsKCiAgICBmdW5jdGlvbiBzZXRXZWlnaHQodWludCBfcG9saWN5SWQsIHVpbnQgX3dlaWdodCwgYnl0ZXMgX3Byb29mKTsKCiAgICBmdW5jdGlvbiBzZXRQYXlvdXRzKHVpbnQgX3BvbGljeUlkLCB1aW50IF9jYWxjdWxhdGVkUGF5b3V0LCB1aW50IF9hY3R1YWxQYXlvdXQpOwoKICAgIGZ1bmN0aW9uIHNldERlbGF5KHVpbnQgX3BvbGljeUlkLCB1aW50OCBfZGVsYXksIHVpbnQgX2RlbGF5SW5NaW51dGVzKTsKCiAgICBmdW5jdGlvbiBnZXRSaXNrUGFyYW1ldGVycyhieXRlczMyIF9yaXNrSWQpCiAgICAgICAgcmV0dXJucyAoYnl0ZXMzMiBfY2FycmllckZsaWdodE51bWJlciwgYnl0ZXMzMiBfZGVwYXJ0dXJlWWVhck1vbnRoRGF5LCB1aW50IF9hcnJpdmFsVGltZSk7CgogICAgZnVuY3Rpb24gZ2V0UHJlbWl1bUZhY3RvcnMoYnl0ZXMzMiBfcmlza0lkKQogICAgICAgIHJldHVybnMgKHVpbnQgX2N1bXVsYXRlZFdlaWdodGVkUHJlbWl1bSwgdWludCBfcHJlbWl1bU11bHRpcGxpZXIpOwoKICAgIGZ1bmN0aW9uIGNyZWF0ZVVwZGF0ZVJpc2soYnl0ZXMzMiBfY2FycmllckZsaWdodE51bWJlciwgYnl0ZXMzMiBfZGVwYXJ0dXJlWWVhck1vbnRoRGF5LCB1aW50IF9hcnJpdmFsVGltZSkKICAgICAgICByZXR1cm5zIChieXRlczMyIF9yaXNrSWQpOwoKICAgIGZ1bmN0aW9uIHNldFByZW1pdW1GYWN0b3JzKGJ5dGVzMzIgX3Jpc2tJZCwgdWludCBfY3VtdWxhdGVkV2VpZ2h0ZWRQcmVtaXVtLCB1aW50IF9wcmVtaXVtTXVsdGlwbGllcik7CgogICAgZnVuY3Rpb24gZ2V0T3JhY2xpemVDYWxsYmFjayhieXRlczMyIF9xdWVyeUlkKQogICAgICAgIHJldHVybnMgKHVpbnQgX3BvbGljeUlkLCB1aW50IF9hcnJpdmFsVGltZSk7CgogICAgZnVuY3Rpb24gZ2V0T3JhY2xpemVQb2xpY3lJZChieXRlczMyIF9xdWVyeUlkKQogICAgcmV0dXJucyAodWludCBfcG9saWN5SWQpOwoKICAgIGZ1bmN0aW9uIGNyZWF0ZU9yYWNsaXplQ2FsbGJhY2soCiAgICAgICAgYnl0ZXMzMiBfcXVlcnlJZCwKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBvcmFjbGl6ZVN0YXRlIF9vcmFjbGl6ZVN0YXRlLAogICAgICAgIHVpbnQgX29yYWNsaXplVGltZQogICAgKTsKCiAgICBmdW5jdGlvbiBjaGVja1RpbWUoYnl0ZXMzMiBfcXVlcnlJZCwgYnl0ZXMzMiBfcmlza0lkLCB1aW50IF9vZmZzZXQpCiAgICAgICAgcmV0dXJucyAoYm9vbCBfcmVzdWx0KTsKfQoKY29udHJhY3QgRmxpZ2h0RGVsYXlBY2Nlc3NDb250cm9sbGVySW50ZXJmYWNlIHsKCiAgICBmdW5jdGlvbiBzZXRQZXJtaXNzaW9uQnlJZCh1aW50OCBfcGVybSwgYnl0ZXMzMiBfaWQpOwoKICAgIGZ1bmN0aW9uIHNldFBlcm1pc3Npb25CeUlkKHVpbnQ4IF9wZXJtLCBieXRlczMyIF9pZCwgYm9vbCBfYWNjZXNzKTsKCiAgICBmdW5jdGlvbiBzZXRQZXJtaXNzaW9uQnlBZGRyZXNzKHVpbnQ4IF9wZXJtLCBhZGRyZXNzIF9hZGRyKTsKCiAgICBmdW5jdGlvbiBzZXRQZXJtaXNzaW9uQnlBZGRyZXNzKHVpbnQ4IF9wZXJtLCBhZGRyZXNzIF9hZGRyLCBib29sIF9hY2Nlc3MpOwoKICAgIGZ1bmN0aW9uIGNoZWNrUGVybWlzc2lvbih1aW50OCBfcGVybSwgYWRkcmVzcyBfYWRkcikgcmV0dXJucyAoYm9vbCBfc3VjY2Vzcyk7Cn0KCmNvbnRyYWN0IEZsaWdodERlbGF5Q29uc3RhbnRzIHsKCiAgICAvKgogICAgKiBHZW5lcmFsIGV2ZW50cwogICAgKi8KCi8vIC0tPiB0ZXN0LW1vZGUKLy8gICAgICAgIGV2ZW50IExvZ1VpbnQoc3RyaW5nIF9tZXNzYWdlLCB1aW50IF91aW50KTsKLy8gICAgICAgIGV2ZW50IExvZ1VpbnRFdGgoc3RyaW5nIF9tZXNzYWdlLCB1aW50IGV0aFVpbnQpOwovLyAgICAgICAgZXZlbnQgTG9nVWludFRpbWUoc3RyaW5nIF9tZXNzYWdlLCB1aW50IHRpbWVVaW50KTsKLy8gICAgICAgIGV2ZW50IExvZ0ludChzdHJpbmcgX21lc3NhZ2UsIGludCBfaW50KTsKLy8gICAgICAgIGV2ZW50IExvZ0FkZHJlc3Moc3RyaW5nIF9tZXNzYWdlLCBhZGRyZXNzIF9hZGRyZXNzKTsKLy8gICAgICAgIGV2ZW50IExvZ0J5dGVzMzIoc3RyaW5nIF9tZXNzYWdlLCBieXRlczMyIGhleEJ5dGVzMzIpOwovLyAgICAgICAgZXZlbnQgTG9nQnl0ZXMoc3RyaW5nIF9tZXNzYWdlLCBieXRlcyBoZXhCeXRlcyk7Ci8vICAgICAgICBldmVudCBMb2dCeXRlczMyU3RyKHN0cmluZyBfbWVzc2FnZSwgYnl0ZXMzMiBzdHJCeXRlczMyKTsKLy8gICAgICAgIGV2ZW50IExvZ1N0cmluZyhzdHJpbmcgX21lc3NhZ2UsIHN0cmluZyBfc3RyaW5nKTsKLy8gICAgICAgIGV2ZW50IExvZ0Jvb2woc3RyaW5nIF9tZXNzYWdlLCBib29sIF9ib29sKTsKLy8gICAgICAgIGV2ZW50IExvZyhhZGRyZXNzKTsKLy8gPC0tIHRlc3QtbW9kZQoKICAgIGV2ZW50IExvZ1BvbGljeUFwcGxpZWQoCiAgICAgICAgdWludCBfcG9saWN5SWQsCiAgICAgICAgYWRkcmVzcyBfY3VzdG9tZXIsCiAgICAgICAgYnl0ZXMzMiBzdHJDYXJyaWVyRmxpZ2h0TnVtYmVyLAogICAgICAgIHVpbnQgZXRoUHJlbWl1bQogICAgKTsKICAgIGV2ZW50IExvZ1BvbGljeUFjY2VwdGVkKAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIHVpbnQgX3N0YXRpc3RpY3MwLAogICAgICAgIHVpbnQgX3N0YXRpc3RpY3MxLAogICAgICAgIHVpbnQgX3N0YXRpc3RpY3MyLAogICAgICAgIHVpbnQgX3N0YXRpc3RpY3MzLAogICAgICAgIHVpbnQgX3N0YXRpc3RpY3M0LAogICAgICAgIHVpbnQgX3N0YXRpc3RpY3M1CiAgICApOwogICAgZXZlbnQgTG9nUG9saWN5UGFpZE91dCgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICB1aW50IGV0aEFtb3VudAogICAgKTsKICAgIGV2ZW50IExvZ1BvbGljeUV4cGlyZWQoCiAgICAgICAgdWludCBfcG9saWN5SWQKICAgICk7CiAgICBldmVudCBMb2dQb2xpY3lEZWNsaW5lZCgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBieXRlczMyIHN0clJlYXNvbgogICAgKTsKICAgIGV2ZW50IExvZ1BvbGljeU1hbnVhbFBheW91dCgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBieXRlczMyIHN0clJlYXNvbgogICAgKTsKICAgIGV2ZW50IExvZ1NlbmRGdW5kcygKICAgICAgICBhZGRyZXNzIF9yZWNpcGllbnQsCiAgICAgICAgdWludDggX2Zyb20sCiAgICAgICAgdWludCBldGhBbW91bnQKICAgICk7CiAgICBldmVudCBMb2dSZWNlaXZlRnVuZHMoCiAgICAgICAgYWRkcmVzcyBfc2VuZGVyLAogICAgICAgIHVpbnQ4IF90bywKICAgICAgICB1aW50IGV0aEFtb3VudAogICAgKTsKICAgIGV2ZW50IExvZ1NlbmRGYWlsKAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIGJ5dGVzMzIgc3RyUmVhc29uCiAgICApOwogICAgZXZlbnQgTG9nT3JhY2xpemVDYWxsKAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIGJ5dGVzMzIgaGV4UXVlcnlJZCwKICAgICAgICBzdHJpbmcgX29yYWNsaXplVXJsCiAgICApOwogICAgZXZlbnQgTG9nT3JhY2xpemVDYWxsYmFjaygKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBieXRlczMyIGhleFF1ZXJ5SWQsCiAgICAgICAgc3RyaW5nIF9yZXN1bHQsCiAgICAgICAgYnl0ZXMgaGV4UHJvb2YKICAgICk7CiAgICBldmVudCBMb2dTZXRTdGF0ZSgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICB1aW50OCBfcG9saWN5U3RhdGUsCiAgICAgICAgdWludCBfc3RhdGVUaW1lLAogICAgICAgIGJ5dGVzMzIgX3N0YXRlTWVzc2FnZQogICAgKTsKICAgIGV2ZW50IExvZ0V4dGVybmFsKAogICAgICAgIHVpbnQyNTYgX3BvbGljeUlkLAogICAgICAgIGFkZHJlc3MgX2FkZHJlc3MsCiAgICAgICAgYnl0ZXMzMiBfZXh0ZXJuYWxJZAogICAgKTsKCiAgICAvKgogICAgKiBHZW5lcmFsIGNvbnN0YW50cwogICAgKi8KCiAgICAvLyBtaW5pbXVtIG9ic2VydmF0aW9ucyBmb3IgdmFsaWQgcHJlZGljdGlvbgogICAgdWludCBjb25zdGFudCBNSU5fT0JTRVJWQVRJT05TID0gMTA7CiAgICAvLyBtaW5pbXVtIHByZW1pdW0gdG8gY292ZXIgY29zdHMKICAgIHVpbnQgY29uc3RhbnQgTUlOX1BSRU1JVU0gPSA1MCBmaW5uZXk7CiAgICAvLyBtYXhpbXVtIHByZW1pdW0KICAgIHVpbnQgY29uc3RhbnQgTUFYX1BSRU1JVU0gPSAxIGV0aGVyOwogICAgLy8gbWF4aW11bSBwYXlvdXQKICAgIHVpbnQgY29uc3RhbnQgTUFYX1BBWU9VVCA9IDExMDAgZmlubmV5OwoKICAgIHVpbnQgY29uc3RhbnQgTUlOX1BSRU1JVU1fRVVSID0gMTUwMCB3ZWk7CiAgICB1aW50IGNvbnN0YW50IE1BWF9QUkVNSVVNX0VVUiA9IDI5MDAwIHdlaTsKICAgIHVpbnQgY29uc3RhbnQgTUFYX1BBWU9VVF9FVVIgPSAzMDAwMCB3ZWk7CgogICAgdWludCBjb25zdGFudCBNSU5fUFJFTUlVTV9VU0QgPSAxNzAwIHdlaTsKICAgIHVpbnQgY29uc3RhbnQgTUFYX1BSRU1JVU1fVVNEID0gMzQwMDAgd2VpOwogICAgdWludCBjb25zdGFudCBNQVhfUEFZT1VUX1VTRCA9IDM1MDAwIHdlaTsKCiAgICB1aW50IGNvbnN0YW50IE1JTl9QUkVNSVVNX0dCUCA9IDEzMDAgd2VpOwogICAgdWludCBjb25zdGFudCBNQVhfUFJFTUlVTV9HQlAgPSAyNTAwMCB3ZWk7CiAgICB1aW50IGNvbnN0YW50IE1BWF9QQVlPVVRfR0JQID0gMjcwIHdlaTsKCiAgICAvLyBtYXhpbXVtIGN1bXVsYXRlZCB3ZWlnaHRlZCBwcmVtaXVtIHBlciByaXNrCiAgICB1aW50IGNvbnN0YW50IE1BWF9DVU1VTEFURURfV0VJR0hURURfUFJFTUlVTSA9IDMwMCBldGhlcjsKICAgIC8vIDEgcGVyY2VudCBmb3IgREFPLCAxIHBlcmNlbnQgZm9yIG1haW50YWluZXIKICAgIHVpbnQ4IGNvbnN0YW50IFJFV0FSRF9QRVJDRU5UID0gMjsKICAgIC8vIHJlc2VydmUgZm9yIHRhaWwgcmlza3MKICAgIHVpbnQ4IGNvbnN0YW50IFJFU0VSVkVfUEVSQ0VOVCA9IDE7CiAgICAvLyB0aGUgd2VpZ2h0IHBhdHRlcm47IGluIGZ1dHVyZSB2ZXJzaW9ucyB0aGlzIG1heSBiZWNvbWUgcGFydCBvZiB0aGUgcG9saWN5IHN0cnVjdC4KICAgIC8vIGN1cnJlbnRseSBjYW4ndCBiZSBjb25zdGFudCBiZWNhdXNlIG9mIGNvbXBpbGVyIHJlc3RyaWN0aW9ucwogICAgLy8gV0VJR0hUX1BBVFRFUk5bMF0gaXMgbm90IHVzZWQsIGp1c3QgdG8gYmUgY29uc2lzdGVudAogICAgdWludDhbNl0gV0VJR0hUX1BBVFRFUk4gPSBbCiAgICAgICAgMCwKICAgICAgICAxMCwKICAgICAgICAyMCwKICAgICAgICAzMCwKICAgICAgICA1MCwKICAgICAgICA1MAogICAgXTsKCi8vIC0tPiBwcm9kLW1vZGUKICAgIC8vIERFRklOSVRJT05TIEZPUiBST1BTVEVOIEFORCBNQUlOTkVUCiAgICAvLyBtaW5pbXVtIHRpbWUgYmVmb3JlIGRlcGFydHVyZSBmb3IgYXBwbHlpbmcKICAgIHVpbnQgY29uc3RhbnQgTUlOX1RJTUVfQkVGT1JFX0RFUEFSVFVSRSA9IDI0IGhvdXJzOyAvLyBmb3IgcHJvZHVjdGlvbgogICAgLy8gY2hlY2sgZm9yIGRlbGF5IGFmdGVyIC4uIG1pbnV0ZXMgYWZ0ZXIgc2NoZWR1bGVkIGFycml2YWwKICAgIHVpbnQgY29uc3RhbnQgQ0hFQ0tfUEFZT1VUX09GRlNFVCA9IDE1IG1pbnV0ZXM7IC8vIGZvciBwcm9kdWN0aW9uCi8vIDwtLSBwcm9kLW1vZGUKCi8vIC0tPiB0ZXN0LW1vZGUKLy8gICAgICAgIC8vIERFRklOSVRJT05TIEZPUiBMT0NBTCBURVNUTkVUCi8vICAgICAgICAvLyBtaW5pbXVtIHRpbWUgYmVmb3JlIGRlcGFydHVyZSBmb3IgYXBwbHlpbmcKLy8gICAgICAgIHVpbnQgY29uc3RhbnQgTUlOX1RJTUVfQkVGT1JFX0RFUEFSVFVSRSA9IDEgc2Vjb25kczsgLy8gZm9yIHRlc3RpbmcKLy8gICAgICAgIC8vIGNoZWNrIGZvciBkZWxheSBhZnRlciAuLiBtaW51dGVzIGFmdGVyIHNjaGVkdWxlZCBhcnJpdmFsCi8vICAgICAgICB1aW50IGNvbnN0YW50IENIRUNLX1BBWU9VVF9PRkZTRVQgPSAxIHNlY29uZHM7IC8vIGZvciB0ZXN0aW5nCi8vIDwtLSB0ZXN0LW1vZGUKCiAgICAvLyBtYXhpbXVtIGR1cmF0aW9uIG9mIGZsaWdodAogICAgdWludCBjb25zdGFudCBNQVhfRkxJR0hUX0RVUkFUSU9OID0gMiBkYXlzOwogICAgLy8gRGVhZGxpbmUgZm9yIGFjY2VwdGFuY2Ugb2YgcG9saWNpZXM6IDMxLjEyLjIwMzAgKFRlc3RuZXQpCiAgICB1aW50IGNvbnN0YW50IENPTlRSQUNUX0RFQURfTElORSA9IDE5MjIzOTYzOTk7CgogICAgdWludCBjb25zdGFudCBNSU5fREVQQVJUVVJFX0xJTSA9IDE1MDgxOTg0MDA7CgogICAgdWludCBjb25zdGFudCBNQVhfREVQQVJUVVJFX0xJTSA9IDE1MDk0OTQ0MDA7CgogICAgLy8gZ2FzIENvbnN0YW50cyBmb3Igb3JhY2xpemUKICAgIHVpbnQgY29uc3RhbnQgT1JBQ0xJWkVfR0FTID0gMTAwMDAwMDsKCgogICAgLyoKICAgICogVVJMcyBhbmQgcXVlcnkgc3RyaW5ncyBmb3Igb3JhY2xpemUKICAgICovCgovLyAtLT4gcHJvZC1tb2RlCiAgICAvLyBERUZJTklUSU9OUyBGT1IgUk9QU1RFTiBBTkQgTUFJTk5FVAogICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1JBVElOR1NfQkFTRV9VUkwgPQogICAgICAgIC8vIHJhdGluZ3MgYXBpIGlzIHYxLCBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuZmxpZ2h0c3RhdHMuY29tL2FwaS1kb2NzL3JhdGluZ3MvdjEKICAgICAgICAiW1VSTF0ganNvbihodHRwczovL2FwaS5mbGlnaHRzdGF0cy5jb20vZmxleC9yYXRpbmdzL3Jlc3QvdjEvanNvbi9mbGlnaHQvIjsKICAgIHN0cmluZyBjb25zdGFudCBPUkFDTElaRV9SQVRJTkdTX1FVRVJZID0KICAgICAgICAiPyR7W2RlY3J5cHRdIDwhLS1QVVQgRU5DUllQVEVEX1FVRVJZIEhFUkUtLT4gfSkucmF0aW5nc1swXVsnb2JzZXJ2YXRpb25zJywnbGF0ZTE1JywnbGF0ZTMwJywnbGF0ZTQ1JywnY2FuY2VsbGVkJywnZGl2ZXJ0ZWQnLCdhcnJpdmFsQWlycG9ydEZzQ29kZSddIjsKICAgIHN0cmluZyBjb25zdGFudCBPUkFDTElaRV9TVEFUVVNfQkFTRV9VUkwgPQogICAgICAgIC8vIGZsaWdodCBzdGF0dXMgYXBpIGlzIHYyLCBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuZmxpZ2h0c3RhdHMuY29tL2FwaS1kb2NzL2ZsaWdodHN0YXR1cy92Mi9mbGlnaHQKICAgICAgICAiW1VSTF0ganNvbihodHRwczovL2FwaS5mbGlnaHRzdGF0cy5jb20vZmxleC9mbGlnaHRzdGF0dXMvcmVzdC92Mi9qc29uL2ZsaWdodC9zdGF0dXMvIjsKICAgIHN0cmluZyBjb25zdGFudCBPUkFDTElaRV9TVEFUVVNfUVVFUlkgPQogICAgICAgIC8vIHBhdHRlcm46CiAgICAgICAgIj8ke1tkZWNyeXB0XSA8IS0tUFVUIEVOQ1JZUFRFRF9RVUVSWSBIRVJFLS0+IH0mdXRjPXRydWUpLmZsaWdodFN0YXR1c2VzWzBdWydzdGF0dXMnLCdkZWxheXMnLCdvcGVyYXRpb25hbFRpbWVzJ10iOwovLyA8LS0gcHJvZC1tb2RlCgovLyAtLT4gdGVzdC1tb2RlCi8vICAgICAgICAvLyBERUZJTklUSU9OUyBGT1IgTE9DQUwgVEVTVE5FVAovLyAgICAgICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1JBVElOR1NfQkFTRV9VUkwgPQovLyAgICAgICAgICAgIC8vIHJhdGluZ3MgYXBpIGlzIHYxLCBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuZmxpZ2h0c3RhdHMuY29tL2FwaS1kb2NzL3JhdGluZ3MvdjEKLy8gICAgICAgICAgICAiW1VSTF0ganNvbihodHRwczovL2FwaS10ZXN0LmV0aGVyaXNjLmNvbS9mbGV4L3JhdGluZ3MvcmVzdC92MS9qc29uL2ZsaWdodC8iOwovLyAgICAgICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1JBVElOR1NfUVVFUlkgPQovLyAgICAgICAgICAgIC8vIGZvciB0ZXN0cnBjOgovLyAgICAgICAgICAgICIpLnJhdGluZ3NbMF1bJ29ic2VydmF0aW9ucycsJ2xhdGUxNScsJ2xhdGUzMCcsJ2xhdGU0NScsJ2NhbmNlbGxlZCcsJ2RpdmVydGVkJywnYXJyaXZhbEFpcnBvcnRGc0NvZGUnXSI7Ci8vICAgICAgICBzdHJpbmcgY29uc3RhbnQgT1JBQ0xJWkVfU1RBVFVTX0JBU0VfVVJMID0KLy8gICAgICAgICAgICAvLyBmbGlnaHQgc3RhdHVzIGFwaSBpcyB2Miwgc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLmZsaWdodHN0YXRzLmNvbS9hcGktZG9jcy9mbGlnaHRzdGF0dXMvdjIvZmxpZ2h0Ci8vICAgICAgICAgICAgIltVUkxdIGpzb24oaHR0cHM6Ly9hcGktdGVzdC5ldGhlcmlzYy5jb20vZmxleC9mbGlnaHRzdGF0dXMvcmVzdC92Mi9qc29uL2ZsaWdodC9zdGF0dXMvIjsKLy8gICAgICAgIHN0cmluZyBjb25zdGFudCBPUkFDTElaRV9TVEFUVVNfUVVFUlkgPQovLyAgICAgICAgICAgIC8vIGZvciB0ZXN0cnBjOgovLyAgICAgICAgICAgICI/dXRjPXRydWUpLmZsaWdodFN0YXR1c2VzWzBdWydzdGF0dXMnLCdkZWxheXMnLCdvcGVyYXRpb25hbFRpbWVzJ10iOwovLyA8LS0gdGVzdC1tb2RlCn0KCmNvbnRyYWN0IEZsaWdodERlbGF5RGF0YWJhc2UgaXMgRmxpZ2h0RGVsYXlDb250cm9sbGVkQ29udHJhY3QsIEZsaWdodERlbGF5RGF0YWJhc2VJbnRlcmZhY2UsIEZsaWdodERlbGF5Q29uc3RhbnRzIHsKCiAgICAvLyBUYWJsZSBvZiBwb2xpY2llcwogICAgUG9saWN5W10gcHVibGljIHBvbGljaWVzOwoKICAgIG1hcHBpbmcgKGJ5dGVzMzIgPT4gdWludFtdKSBwdWJsaWMgZXh0Q3VzdG9tZXJQb2xpY2llczsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IEN1c3RvbWVyKSBwdWJsaWMgY3VzdG9tZXJzOwoKICAgIC8vIExvb2t1cCBwb2xpY3lJZHMgZnJvbSBjdXN0b21lciBhZGRyZXNzZXMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludFtdKSBwdWJsaWMgY3VzdG9tZXJQb2xpY2llczsKCiAgICAvLyBMb29rdXAgcG9saWN5IElkcyBmcm9tIHF1ZXJ5SWRzCiAgICBtYXBwaW5nIChieXRlczMyID0+IE9yYWNsaXplQ2FsbGJhY2spIHB1YmxpYyBvcmFjbGl6ZUNhbGxiYWNrczsKCiAgICAvLyBMb29rdXAgcmlza3MgZnJvbSByaXNrIElEcwogICAgbWFwcGluZyAoYnl0ZXMzMiA9PiBSaXNrKSBwdWJsaWMgcmlza3M7CgogICAgLy8gTG9va3VwIEFjY2Vzc0NvbnRyb2wKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyh1aW50OCA9PiBib29sKSkpIHB1YmxpYyBhY2Nlc3NDb250cm9sOwoKICAgIC8vIExvb2t1cCBhY2NvdW50cyBvZiBpbnRlcm5hbCBsZWRnZXIKICAgIGludFs2XSBwdWJsaWMgbGVkZ2VyOwoKICAgIEZsaWdodERlbGF5QWNjZXNzQ29udHJvbGxlckludGVyZmFjZSBGRF9BQzsKCiAgICBmdW5jdGlvbiBGbGlnaHREZWxheURhdGFiYXNlIChhZGRyZXNzIF9jb250cm9sbGVyKSB7CiAgICAgICAgc2V0Q29udHJvbGxlcihfY29udHJvbGxlcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q29udHJhY3RzKCkgb25seUNvbnRyb2xsZXIgewogICAgICAgIEZEX0FDID0gRmxpZ2h0RGVsYXlBY2Nlc3NDb250cm9sbGVySW50ZXJmYWNlKGdldENvbnRyYWN0KCJGRC5BY2Nlc3NDb250cm9sbGVyIikpOwoKICAgICAgICBGRF9BQy5zZXRQZXJtaXNzaW9uQnlJZCgxMDEsICJGRC5OZXdQb2xpY3kiKTsKICAgICAgICBGRF9BQy5zZXRQZXJtaXNzaW9uQnlJZCgxMDEsICJGRC5VbmRlcndyaXRlIik7CgogICAgICAgIEZEX0FDLnNldFBlcm1pc3Npb25CeUlkKDEwMSwgIkZELlBheW91dCIpOwogICAgICAgIEZEX0FDLnNldFBlcm1pc3Npb25CeUlkKDEwMSwgIkZELkxlZGdlciIpOwoKICAgIH0KCiAgICAvLyBHZXR0ZXIgYW5kIFNldHRlciBmb3IgQWNjZXNzQ29udHJvbAogICAgZnVuY3Rpb24gc2V0QWNjZXNzQ29udHJvbCgKICAgICAgICBhZGRyZXNzIF9jb250cmFjdCwKICAgICAgICBhZGRyZXNzIF9jYWxsZXIsCiAgICAgICAgdWludDggX3Blcm0sCiAgICAgICAgYm9vbCBfYWNjZXNzCiAgICApIHsKICAgICAgICAvLyBvbmUgYW5kIG9ubHkgaGFyZGNvZGVkIGFjY2Vzc0NvbnRyb2wKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gRkRfQ0kuZ2V0Q29udHJhY3QoIkZELkFjY2Vzc0NvbnRyb2xsZXIiKSk7CiAgICAgICAgYWNjZXNzQ29udHJvbFtfY29udHJhY3RdW19jYWxsZXJdW19wZXJtXSA9IF9hY2Nlc3M7CiAgICB9CgovLyAtLT4gdGVzdC1tb2RlCi8vICAgICAgICBmdW5jdGlvbiBzZXRBY2Nlc3NDb250cm9sVGVzdE9ubHkoCi8vICAgICAgICAgICAgYWRkcmVzcyBfY29udHJhY3QsCi8vICAgICAgICAgICAgYWRkcmVzcyBfY2FsbGVyLAovLyAgICAgICAgICAgIHVpbnQ4IF9wZXJtLAovLyAgICAgICAgICAgIGJvb2wgX2FjY2VzcwovLyAgICAgICAgKSB7Ci8vICAgICAgICAgICAgYWNjZXNzQ29udHJvbFtfY29udHJhY3RdW19jYWxsZXJdW19wZXJtXSA9IF9hY2Nlc3M7Ci8vICAgICAgICB9Ci8vIDwtLSB0ZXN0LW1vZGUKCiAgICBmdW5jdGlvbiBzZXRBY2Nlc3NDb250cm9sKGFkZHJlc3MgX2NvbnRyYWN0LCBhZGRyZXNzIF9jYWxsZXIsIHVpbnQ4IF9wZXJtKSB7CiAgICAgICAgc2V0QWNjZXNzQ29udHJvbCgKICAgICAgICAgICAgX2NvbnRyYWN0LAogICAgICAgICAgICBfY2FsbGVyLAogICAgICAgICAgICBfcGVybSwKICAgICAgICAgICAgdHJ1ZQogICAgICAgICk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QWNjZXNzQ29udHJvbChhZGRyZXNzIF9jb250cmFjdCwgYWRkcmVzcyBfY2FsbGVyLCB1aW50OCBfcGVybSkgcmV0dXJucyAoYm9vbCBfYWxsb3dlZCkgewogICAgICAgIF9hbGxvd2VkID0gYWNjZXNzQ29udHJvbFtfY29udHJhY3RdW19jYWxsZXJdW19wZXJtXTsKICAgIH0KCiAgICAvLyBHZXR0ZXIgYW5kIFNldHRlciBmb3IgbGVkZ2VyCiAgICBmdW5jdGlvbiBzZXRMZWRnZXIodWludDggX2luZGV4LCBpbnQgX3ZhbHVlKSB7CiAgICAgICAgcmVxdWlyZShGRF9BQy5jaGVja1Blcm1pc3Npb24oMTAxLCBtc2cuc2VuZGVyKSk7CgogICAgICAgIGludCBwcmV2aW91cyA9IGxlZGdlcltfaW5kZXhdOwogICAgICAgIGxlZGdlcltfaW5kZXhdICs9IF92YWx1ZTsKCi8vIC0tPiBkZWJ1Zy1tb2RlCi8vICAgICAgICAgICAgTG9nSW50KCJwcmV2aW91cyIsIHByZXZpb3VzKTsKLy8gICAgICAgICAgICBMb2dJbnQoImxlZGdlcltfaW5kZXhdIiwgbGVkZ2VyW19pbmRleF0pOwovLyAgICAgICAgICAgIExvZ0ludCgiX3ZhbHVlIiwgX3ZhbHVlKTsKLy8gPC0tIGRlYnVnLW1vZGUKCiAgICAgICAgLy8gY2hlY2sgZm9yIGludCBvdmVyZmxvdwogICAgICAgIGlmIChfdmFsdWUgPCAwKSB7CiAgICAgICAgICAgIGFzc2VydChsZWRnZXJbX2luZGV4XSA8IHByZXZpb3VzKTsKICAgICAgICB9IGVsc2UgaWYgKF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgYXNzZXJ0KGxlZGdlcltfaW5kZXhdID4gcHJldmlvdXMpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRMZWRnZXIodWludDggX2luZGV4KSByZXR1cm5zIChpbnQgX3ZhbHVlKSB7CiAgICAgICAgX3ZhbHVlID0gbGVkZ2VyW19pbmRleF07CiAgICB9CgogICAgLy8gR2V0dGVyIGFuZCBTZXR0ZXIgZm9yIHBvbGljaWVzCiAgICBmdW5jdGlvbiBnZXRDdXN0b21lclByZW1pdW0odWludCBfcG9saWN5SWQpIHJldHVybnMgKGFkZHJlc3MgX2N1c3RvbWVyLCB1aW50IF9wcmVtaXVtKSB7CiAgICAgICAgUG9saWN5IHN0b3JhZ2UgcCA9IHBvbGljaWVzW19wb2xpY3lJZF07CiAgICAgICAgX2N1c3RvbWVyID0gcC5jdXN0b21lcjsKICAgICAgICBfcHJlbWl1bSA9IHAucHJlbWl1bTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQb2xpY3lEYXRhKHVpbnQgX3BvbGljeUlkKSByZXR1cm5zIChhZGRyZXNzIF9jdXN0b21lciwgdWludCBfd2VpZ2h0LCB1aW50IF9wcmVtaXVtKSB7CiAgICAgICAgUG9saWN5IHN0b3JhZ2UgcCA9IHBvbGljaWVzW19wb2xpY3lJZF07CiAgICAgICAgX2N1c3RvbWVyID0gcC5jdXN0b21lcjsKICAgICAgICBfd2VpZ2h0ID0gcC53ZWlnaHQ7CiAgICAgICAgX3ByZW1pdW0gPSBwLnByZW1pdW07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UG9saWN5U3RhdGUodWludCBfcG9saWN5SWQpIHJldHVybnMgKHBvbGljeVN0YXRlIF9zdGF0ZSkgewogICAgICAgIFBvbGljeSBzdG9yYWdlIHAgPSBwb2xpY2llc1tfcG9saWN5SWRdOwogICAgICAgIF9zdGF0ZSA9IHAuc3RhdGU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Umlza0lkKHVpbnQgX3BvbGljeUlkKSByZXR1cm5zIChieXRlczMyIF9yaXNrSWQpIHsKICAgICAgICBQb2xpY3kgc3RvcmFnZSBwID0gcG9saWNpZXNbX3BvbGljeUlkXTsKICAgICAgICBfcmlza0lkID0gcC5yaXNrSWQ7CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlUG9saWN5KGFkZHJlc3MgX2N1c3RvbWVyLCB1aW50IF9wcmVtaXVtLCBDdXJyZW5jeSBfY3VycmVuY3ksIGJ5dGVzMzIgX2N1c3RvbWVyRXh0ZXJuYWxJZCwgYnl0ZXMzMiBfcmlza0lkKSByZXR1cm5zICh1aW50IF9wb2xpY3lJZCkgewogICAgICAgIHJlcXVpcmUoRkRfQUMuY2hlY2tQZXJtaXNzaW9uKDEwMSwgbXNnLnNlbmRlcikpOwoKICAgICAgICBfcG9saWN5SWQgPSBwb2xpY2llcy5sZW5ndGgrKzsKCiAgICAgICAgLy90b2RvOiBjaGVjayBmb3Igb3Zld2Zsb3dzCgovLyAtLT4gdGVzdC1tb2RlCi8vICAgICAgICAgICAgTG9nVWludCgiX3BvbGljeUlkIiwgX3BvbGljeUlkKTsKLy8gPC0tIHRlc3QtbW9kZQoKICAgICAgICBjdXN0b21lclBvbGljaWVzW19jdXN0b21lcl0ucHVzaChfcG9saWN5SWQpOwogICAgICAgIGV4dEN1c3RvbWVyUG9saWNpZXNbX2N1c3RvbWVyRXh0ZXJuYWxJZF0ucHVzaChfcG9saWN5SWQpOwoKICAgICAgICBQb2xpY3kgc3RvcmFnZSBwID0gcG9saWNpZXNbX3BvbGljeUlkXTsKCiAgICAgICAgcC5jdXN0b21lciA9IF9jdXN0b21lcjsKICAgICAgICBwLmN1cnJlbmN5ID0gX2N1cnJlbmN5OwogICAgICAgIHAuY3VzdG9tZXJFeHRlcm5hbElkID0gX2N1c3RvbWVyRXh0ZXJuYWxJZDsKICAgICAgICBwLnByZW1pdW0gPSBfcHJlbWl1bTsKICAgICAgICBwLnJpc2tJZCA9IF9yaXNrSWQ7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0U3RhdGUoCiAgICAgICAgdWludCBfcG9saWN5SWQsCiAgICAgICAgcG9saWN5U3RhdGUgX3N0YXRlLAogICAgICAgIHVpbnQgX3N0YXRlVGltZSwKICAgICAgICBieXRlczMyIF9zdGF0ZU1lc3NhZ2UKICAgICkgewogICAgICAgIHJlcXVpcmUoRkRfQUMuY2hlY2tQZXJtaXNzaW9uKDEwMSwgbXNnLnNlbmRlcikpOwoKICAgICAgICBMb2dTZXRTdGF0ZSgKICAgICAgICAgICAgX3BvbGljeUlkLAogICAgICAgICAgICB1aW50OChfc3RhdGUpLAogICAgICAgICAgICBfc3RhdGVUaW1lLAogICAgICAgICAgICBfc3RhdGVNZXNzYWdlCiAgICAgICAgKTsKCiAgICAgICAgUG9saWN5IHN0b3JhZ2UgcCA9IHBvbGljaWVzW19wb2xpY3lJZF07CgogICAgICAgIHAuc3RhdGUgPSBfc3RhdGU7CiAgICAgICAgcC5zdGF0ZVRpbWUgPSBfc3RhdGVUaW1lOwogICAgICAgIHAuc3RhdGVNZXNzYWdlID0gX3N0YXRlTWVzc2FnZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRXZWlnaHQodWludCBfcG9saWN5SWQsIHVpbnQgX3dlaWdodCwgYnl0ZXMgX3Byb29mKSB7CiAgICAgICAgcmVxdWlyZShGRF9BQy5jaGVja1Blcm1pc3Npb24oMTAxLCBtc2cuc2VuZGVyKSk7CgogICAgICAgIFBvbGljeSBzdG9yYWdlIHAgPSBwb2xpY2llc1tfcG9saWN5SWRdOwoKICAgICAgICBwLndlaWdodCA9IF93ZWlnaHQ7CiAgICAgICAgcC5wcm9vZiA9IF9wcm9vZjsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRQYXlvdXRzKHVpbnQgX3BvbGljeUlkLCB1aW50IF9jYWxjdWxhdGVkUGF5b3V0LCB1aW50IF9hY3R1YWxQYXlvdXQpIHsKICAgICAgICByZXF1aXJlKEZEX0FDLmNoZWNrUGVybWlzc2lvbigxMDEsIG1zZy5zZW5kZXIpKTsKCiAgICAgICAgUG9saWN5IHN0b3JhZ2UgcCA9IHBvbGljaWVzW19wb2xpY3lJZF07CgogICAgICAgIHAuY2FsY3VsYXRlZFBheW91dCA9IF9jYWxjdWxhdGVkUGF5b3V0OwogICAgICAgIHAuYWN0dWFsUGF5b3V0ID0gX2FjdHVhbFBheW91dDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXREZWxheSh1aW50IF9wb2xpY3lJZCwgdWludDggX2RlbGF5LCB1aW50IF9kZWxheUluTWludXRlcykgewogICAgICAgIHJlcXVpcmUoRkRfQUMuY2hlY2tQZXJtaXNzaW9uKDEwMSwgbXNnLnNlbmRlcikpOwoKICAgICAgICBSaXNrIHN0b3JhZ2UgciA9IHJpc2tzW3BvbGljaWVzW19wb2xpY3lJZF0ucmlza0lkXTsKCiAgICAgICAgci5kZWxheSA9IF9kZWxheTsKICAgICAgICByLmRlbGF5SW5NaW51dGVzID0gX2RlbGF5SW5NaW51dGVzOwogICAgfQoKICAgIC8vIEdldHRlciBhbmQgU2V0dGVyIGZvciByaXNrcwogICAgZnVuY3Rpb24gZ2V0Umlza1BhcmFtZXRlcnMoYnl0ZXMzMiBfcmlza0lkKSByZXR1cm5zIChieXRlczMyIF9jYXJyaWVyRmxpZ2h0TnVtYmVyLCBieXRlczMyIF9kZXBhcnR1cmVZZWFyTW9udGhEYXksIHVpbnQgX2Fycml2YWxUaW1lKSB7CiAgICAgICAgUmlzayBzdG9yYWdlIHIgPSByaXNrc1tfcmlza0lkXTsKICAgICAgICBfY2FycmllckZsaWdodE51bWJlciA9IHIuY2FycmllckZsaWdodE51bWJlcjsKICAgICAgICBfZGVwYXJ0dXJlWWVhck1vbnRoRGF5ID0gci5kZXBhcnR1cmVZZWFyTW9udGhEYXk7CiAgICAgICAgX2Fycml2YWxUaW1lID0gci5hcnJpdmFsVGltZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQcmVtaXVtRmFjdG9ycyhieXRlczMyIF9yaXNrSWQpIHJldHVybnMgKHVpbnQgX2N1bXVsYXRlZFdlaWdodGVkUHJlbWl1bSwgdWludCBfcHJlbWl1bU11bHRpcGxpZXIpIHsKICAgICAgICBSaXNrIHN0b3JhZ2UgciA9IHJpc2tzW19yaXNrSWRdOwogICAgICAgIF9jdW11bGF0ZWRXZWlnaHRlZFByZW1pdW0gPSByLmN1bXVsYXRlZFdlaWdodGVkUHJlbWl1bTsKICAgICAgICBfcHJlbWl1bU11bHRpcGxpZXIgPSByLnByZW1pdW1NdWx0aXBsaWVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVVwZGF0ZVJpc2soYnl0ZXMzMiBfY2FycmllckZsaWdodE51bWJlciwgYnl0ZXMzMiBfZGVwYXJ0dXJlWWVhck1vbnRoRGF5LCB1aW50IF9hcnJpdmFsVGltZSkgcmV0dXJucyAoYnl0ZXMzMiBfcmlza0lkKSB7CiAgICAgICAgcmVxdWlyZShGRF9BQy5jaGVja1Blcm1pc3Npb24oMTAxLCBtc2cuc2VuZGVyKSk7CgogICAgICAgIF9yaXNrSWQgPSBzaGEzKAogICAgICAgICAgICBfY2FycmllckZsaWdodE51bWJlciwKICAgICAgICAgICAgX2RlcGFydHVyZVllYXJNb250aERheSwKICAgICAgICAgICAgX2Fycml2YWxUaW1lCiAgICAgICAgKTsKCi8vIC0tPiB0ZXN0LW1vZGUKLy8gICAgICAgICAgICBMb2dCeXRlczMyKCJyaXNrSWQiLCBfcmlza0lkKTsKLy8gPC0tIHRlc3QtbW9kZQoKICAgICAgICBSaXNrIHN0b3JhZ2UgciA9IHJpc2tzW19yaXNrSWRdOwoKICAgICAgICBpZiAoci5wcmVtaXVtTXVsdGlwbGllciA9PSAwKSB7CiAgICAgICAgICAgIHIuY2FycmllckZsaWdodE51bWJlciA9IF9jYXJyaWVyRmxpZ2h0TnVtYmVyOwogICAgICAgICAgICByLmRlcGFydHVyZVllYXJNb250aERheSA9IF9kZXBhcnR1cmVZZWFyTW9udGhEYXk7CiAgICAgICAgICAgIHIuYXJyaXZhbFRpbWUgPSBfYXJyaXZhbFRpbWU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByZW1pdW1GYWN0b3JzKGJ5dGVzMzIgX3Jpc2tJZCwgdWludCBfY3VtdWxhdGVkV2VpZ2h0ZWRQcmVtaXVtLCB1aW50IF9wcmVtaXVtTXVsdGlwbGllcikgewogICAgICAgIHJlcXVpcmUoRkRfQUMuY2hlY2tQZXJtaXNzaW9uKDEwMSwgbXNnLnNlbmRlcikpOwoKICAgICAgICBSaXNrIHN0b3JhZ2UgciA9IHJpc2tzW19yaXNrSWRdOwogICAgICAgIHIuY3VtdWxhdGVkV2VpZ2h0ZWRQcmVtaXVtID0gX2N1bXVsYXRlZFdlaWdodGVkUHJlbWl1bTsKICAgICAgICByLnByZW1pdW1NdWx0aXBsaWVyID0gX3ByZW1pdW1NdWx0aXBsaWVyOwogICAgfQoKICAgIC8vIEdldHRlciBhbmQgU2V0dGVyIGZvciBvcmFjbGl6ZUNhbGxiYWNrcwogICAgZnVuY3Rpb24gZ2V0T3JhY2xpemVDYWxsYmFjayhieXRlczMyIF9xdWVyeUlkKSByZXR1cm5zICh1aW50IF9wb2xpY3lJZCwgdWludCBfYXJyaXZhbFRpbWUpIHsKICAgICAgICBfcG9saWN5SWQgPSBvcmFjbGl6ZUNhbGxiYWNrc1tfcXVlcnlJZF0ucG9saWN5SWQ7CiAgICAgICAgX2Fycml2YWxUaW1lID0gcmlza3NbcG9saWNpZXNbX3BvbGljeUlkXS5yaXNrSWRdLmFycml2YWxUaW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE9yYWNsaXplUG9saWN5SWQoYnl0ZXMzMiBfcXVlcnlJZCkgcmV0dXJucyAodWludCBfcG9saWN5SWQpIHsKICAgICAgICBPcmFjbGl6ZUNhbGxiYWNrIHN0b3JhZ2UgbyA9IG9yYWNsaXplQ2FsbGJhY2tzW19xdWVyeUlkXTsKICAgICAgICBfcG9saWN5SWQgPSBvLnBvbGljeUlkOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZU9yYWNsaXplQ2FsbGJhY2soCiAgICAgICAgYnl0ZXMzMiBfcXVlcnlJZCwKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBvcmFjbGl6ZVN0YXRlIF9vcmFjbGl6ZVN0YXRlLAogICAgICAgIHVpbnQgX29yYWNsaXplVGltZSkgewoKICAgICAgICByZXF1aXJlKEZEX0FDLmNoZWNrUGVybWlzc2lvbigxMDEsIG1zZy5zZW5kZXIpKTsKCiAgICAgICAgb3JhY2xpemVDYWxsYmFja3NbX3F1ZXJ5SWRdID0gT3JhY2xpemVDYWxsYmFjayhfcG9saWN5SWQsIF9vcmFjbGl6ZVN0YXRlLCBfb3JhY2xpemVUaW1lKTsKICAgIH0KCiAgICAvLyBtaXhlZAogICAgZnVuY3Rpb24gY2hlY2tUaW1lKGJ5dGVzMzIgX3F1ZXJ5SWQsIGJ5dGVzMzIgX3Jpc2tJZCwgdWludCBfb2Zmc2V0KSByZXR1cm5zIChib29sIF9yZXN1bHQpIHsKICAgICAgICBPcmFjbGl6ZUNhbGxiYWNrIHN0b3JhZ2UgbyA9IG9yYWNsaXplQ2FsbGJhY2tzW19xdWVyeUlkXTsKICAgICAgICBSaXNrIHN0b3JhZ2UgciA9IHJpc2tzW19yaXNrSWRdOwoKICAgICAgICBfcmVzdWx0ID0gby5vcmFjbGl6ZVRpbWUgPiByLmFycml2YWxUaW1lICsgX29mZnNldDsKICAgIH0KfQ=='.
	

]
