Class {
	#name : #SRT687174f8c49ceb7729d925c3a961507ea4ac7b28,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT687174f8c49ceb7729d925c3a961507ea4ac7b28 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIENvcHlyaWdodCAoYykgMjAxNyBHQVQgSW50ZXJuYXRpb25hbCBMaW1pdGVkLgovLyBodHRwOi8vd3d3LmdhdGNvaW4uaW8vCi8vCi8vIFRoZSBNSVQgTGljZW5jZS4KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjb250cmFjdCBPd25lZCB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKCiAgICBldmVudCBPd25lckNoYW5nZWQoYWRkcmVzcyBpbmRleGVkIF9uZXdPd25lcik7CgoKICAgIGZ1bmN0aW9uIE93bmVkKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF9uZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF9uZXdPd25lciAhPSBvd25lcik7CgogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpOwoKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CgogICAgICAgIE93bmVyQ2hhbmdlZChtc2cuc2VuZGVyKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCgpjb250cmFjdCBHQVRUb2tlblNhbGVDb25maWcgewoKICAgIHN0cmluZyAgcHVibGljIGNvbnN0YW50IFNZTUJPTCAgICAgICAgICAgICAgICAgID0gIkdBVCI7CiAgICBzdHJpbmcgIHB1YmxpYyBjb25zdGFudCBOQU1FICAgICAgICAgICAgICAgICAgICA9ICJHQVQgVG9rZW4iOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgREVDSU1BTFMgICAgICAgICAgICAgICAgPSAxODsKCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBERUNJTUFMU0ZBQ1RPUiAgICAgICAgICA9IDEwKip1aW50MjU2KERFQ0lNQUxTKTsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFNUQVJUX1RJTUUgICAgICAgICAgICAgID0gMTUxMzUxMjAwMDsgLy8gMjAxNy0xMi0xN1QxMjowMDowMFoKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IEVORF9USU1FICAgICAgICAgICAgICAgID0gMTUxNTMyNjM5OTsgLy8gMjAxOC0wMS0wN1QxMTo1OTo1OVoKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IENPTlRSSUJVVElPTl9NSU4gICAgICAgID0gMiBldGhlcjsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOX1RPVEFMX0NBUCAgICAgICAgID0gMTAwMDAwMDAwMCAgKiBERUNJTUFMU0ZBQ1RPUjsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOX1BSSVZBVEVfU0FMRV9DQVAgID0gICA1NDU0NTE3MiAgKiBERUNJTUFMU0ZBQ1RPUjsgLy8gcGFzdCBwcmVzYWxlCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9QUkVTQUxFX0NBUCAgICAgICA9ICAxNDU0NTQ4MjggICogREVDSU1BTFNGQUNUT1I7IC8vIDIwMDAwMDAwMCAtIHdoYXQgd2FzIHJhaXNlZCBpbiByb3VuZCAxCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9QVUJMSUNfU0FMRV9DQVAgICA9ICA0NDU0NTQ4MjggICogREVDSU1BTFNGQUNUT1I7IC8vIFRoaXMgYWxzbyBpbmNsdWRlcyBwcmVzYWxlCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9GT1VOREFUSU9OX0NBUCAgICA9ICAgICAgICAgIDAgICogREVDSU1BTFNGQUNUT1I7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9SRVNFUlZFMV9DQVAgICAgICA9ICAxMDAwMDAwMDAgICogREVDSU1BTFNGQUNUT1I7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9SRVNFUlZFMl9DQVAgICAgICA9ICAgICAgICAgIDAgICogREVDSU1BTFNGQUNUT1I7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9GVVRVUkVfQ0FQICAgICAgICA9ICA0MDAwMDAwMDAgICogREVDSU1BTFNGQUNUT1I7CgogICAgLy8gRGVmYXVsdCBib251cyBhbW91bnQgZm9yIHRoZSBwcmVzYWxlLgogICAgLy8gMTAwID0gbm8gYm9udXMKICAgIC8vIDEyMCA9IDIwJSBib251cy4KICAgIC8vIE5vdGUgdGhhdCB0aGUgb3duZXIgY2FuIGNoYW5nZSB0aGUgYW1vdW50IG9mIGJvbnVzIGdpdmVuLgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUFJFU0FMRV9CT05VUyAgICAgID0gMTIwOwoKICAgIC8vIERlZmF1bHQgdmFsdWUgZm9yIHRva2Vuc1BlcktFdGhlciBiYXNlZCBvbiBFVEggYXQgMzAwIFVTRC4KICAgIC8vIFRoZSBvd25lciBjYW4gdXBkYXRlIHRoaXMgdmFsdWUgYmVmb3JlIHRoZSBzYWxlIHN0YXJ0cyBiYXNlZCBvbiB0aGUKICAgIC8vIHByaWNlIG9mIGV0aGVyIGF0IHRoYXQgdGltZS4KICAgIC8vIEUuZy4gMzAwIFVTRC9FVEggLT4gMzAwLDAwMCBVU0QvS0VUSCAvIDAuMiBVU0QvVE9LRU4gPSAxLDUwMCwwMDAKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOU19QRVJfS0VUSEVSID0gMTQ4MDAwMDA7Cn0KCmxpYnJhcnkgU2FmZU1hdGggewoKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBFUkMyMEludGVyZmFjZSB7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwp9CgovLyBJbXBsZW1lbnRhdGlvbiBvZiBzdGFuZGFyZCBFUkMyMCB0b2tlbiB3aXRoIG93bmVyc2hpcC4KLy8KY29udHJhY3QgR0FUVG9rZW4gaXMgRVJDMjBJbnRlcmZhY2UsIE93bmVkIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKCiAgICBmdW5jdGlvbiBHQVRUb2tlbihzdHJpbmcgX3N5bWJvbCwgc3RyaW5nIF9uYW1lLCB1aW50MjU2IF9kZWNpbWFscywgdWludDI1NiBfdG90YWxTdXBwbHkpIHB1YmxpYwogICAgICAgIE93bmVkKCkKICAgIHsKICAgICAgICBzeW1ib2wgICAgICA9IF9zeW1ib2w7CiAgICAgICAgbmFtZSAgICAgICAgPSBfbmFtZTsKICAgICAgICBkZWNpbWFscyAgICA9IF9kZWNpbWFsczsKICAgICAgICB0b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseTsKCiAgICAgICAgVHJhbnNmZXIoMHgwLCBvd25lciwgX3RvdGFsU3VwcGx5KTsKICAgIH0KCgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwoKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICB9CgoKICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgIH0KCgogICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CgogICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKCiAgICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KfQoKCi8vIFRoaXMgaXMgdGhlIG1haW4gY29udHJhY3QgdGhhdCBkcml2ZXMgdGhlIEdBVCB0b2tlbiBzYWxlLgovLyBJdCBleHBvc2VzIHRoZSBFUkMyMCBpbnRlcmZhY2UgYWxvbmcgd2l0aCB2YXJpb3VzIHNhbGUtcmVsYXRlZCBmdW5jdGlvbnMuCi8vCmNvbnRyYWN0IEdBVFRva2VuU2FsZSBpcyBHQVRUb2tlbiwgR0FUVG9rZW5TYWxlQ29uZmlnIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICAvLyBPbmNlIGZpbmFsaXplZCwgdG9rZW5zIHdpbGwgYmUgZnJlZWx5IHRyYWRhYmxlCiAgICBib29sIHB1YmxpYyBmaW5hbGl6ZWQ7CgogICAgLy8gU2FsZSBjYW4gYmUgc3VzcGVuZGVkIG9yIHJlc3VtZWQgYnkgdGhlIG93bmVyCiAgICBib29sIHB1YmxpYyBzdXNwZW5kZWQ7CgogICAgLy8gQWRkcmVzc2VzIGZvciB0aGUgYmFuaywgZnVuZGluZyBhbmQgcmVzZXJ2ZXMuCiAgICBhZGRyZXNzIHB1YmxpYyBiYW5rQWRkcmVzczsKICAgIGFkZHJlc3MgcHVibGljIGZ1bmRpbmdBZGRyZXNzOwogICAgYWRkcmVzcyBwdWJsaWMgcmVzZXJ2ZTFBZGRyZXNzOwogICAgYWRkcmVzcyBwdWJsaWMgcmVzZXJ2ZTJBZGRyZXNzOwoKICAgIC8vIFByaWNlIG9mIHRva2VucyBwZXIgMTAwMCBFVEgKICAgIHVpbnQyNTYgcHVibGljIHRva2Vuc1BlcktFdGhlcjsKCiAgICAvLyBUaGUgYm9udXMgYW1vdW50IG9uIHRva2VuIHB1cmNoYXNlcwogICAgLy8gRS5nLiAxMjAgbWVhbnMgYSAyMCUgYm9udXMgd2lsbCBiZSBhcHBsaWVkLgogICAgdWludDI1NiBwdWJsaWMgYm9udXM7CgogICAgLy8gVG90YWwgbnVtYmVyIG9mIHRva2VucyB0aGF0IGhhdmUgYmVlbiBzb2xkIHRocm91Z2ggdGhlIHNhbGUgY29udHJhY3Qgc28gZmFyLgogICAgdWludDI1NiBwdWJsaWMgdG90YWxUb2tlbnNTb2xkOwoKICAgIC8vIE1pbmltdW0gY29udHJpYnV0aW9uIHZhbHVlCiAgICB1aW50MjU2IHB1YmxpYyBjb250cmlidXRpb25NaW5pbXVtOwoKICAgIC8vIEtlZXAgdHJhY2sgb2Ygc3RhcnQgdGltZSBhbmQgZW5kIHRpbWUgZm9yIHRoZSBzYWxlLiBUaGVzZSBoYXZlIGRlZmF1bHQKICAgIC8vIHZhbHVlcyB3aGVuIHRoZSBjb250cmFjdCBpcyBkZXBsb3llZCBidXQgY2FuIGJlIGNoYW5nZWQgYnkgb3duZXIgYXMgbmVlZGVkLgogICAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lOwogICAgdWludDI1NiBwdWJsaWMgZW5kVGltZTsKCgogICAgLy8gRXZlbnRzCiAgICBldmVudCBUb2tlbnNQdXJjaGFzZWQoYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IGNvc3QsIHVpbnQyNTYgdG9rZW5zKTsKICAgIGV2ZW50IFRva2Vuc1BlcktFdGhlclVwZGF0ZWQodWludDI1NiBuZXdBbW91bnQpOwogICAgZXZlbnQgQ29udHJpYnV0aW9uTWluaW11bVVwZGF0ZWQodWludDI1NiBuZXdBbW91bnQpOwogICAgZXZlbnQgQm9udXNBbW91bnRVcGRhdGVkKHVpbnQyNTYgbmV3QW1vdW50KTsKICAgIGV2ZW50IFRpbWVXaW5kb3dVcGRhdGVkKHVpbnQyNTYgbmV3U3RhcnRUaW1lLCB1aW50MjU2IG5ld0VuZFRpbWUpOwogICAgZXZlbnQgU2FsZVN1c3BlbmRlZCgpOwogICAgZXZlbnQgU2FsZVJlc3VtZWQoKTsKICAgIGV2ZW50IFRva2VuRmluYWxpemVkKCk7CiAgICBldmVudCBDb250cmFjdFRva2Vuc1JlY2xhaW1lZCh1aW50MjU2IGFtb3VudCk7CgovLyAiMHgxYTRGQmJhNzIzMUVjMDcwNzkyNWM1MmIwNDdiOTUxYTBCZUFBMzI1IiwgIjB4YTg1YjQxOWVlZTMwNDU2M2QzNTg3ZmU5MzRlOTMyZjA1NmNhM2MxNCIsICIweGE4NWI0MTllZWUzMDQ1NjNkMzU4N2ZlOTM0ZTkzMmYwNTZjYTNjMTQiLCAiMHg1ODdkMDZlYjg1NTgxMWVlOTg3Y2M4NDI4ODBiOTI1NWEzYWFiNDViIiwgCiAgICBmdW5jdGlvbiBHQVRUb2tlblNhbGUoYWRkcmVzcyBfYmFua0FkZHJlc3MsIGFkZHJlc3MgX2Z1bmRpbmdBZGRyZXNzLCBhZGRyZXNzIF9yZXNlcnZlMUFkZHJlc3MsIGFkZHJlc3MgX3Jlc2VydmUyQWRkcmVzcykgcHVibGljCiAgICAgICAgR0FUVG9rZW4oU1lNQk9MLCBOQU1FLCBERUNJTUFMUywgMCkKICAgIHsKICAgICAgICAvLyBDYW4gb25seSBjcmVhdGUgdGhlIGNvbnRyYWN0IGlzIHRoZSBzYWxlIGhhcyBub3QgeWV0IHN0YXJ0ZWQgb3IgZW5kZWQuCiAgICAgICAgcmVxdWlyZShTVEFSVF9USU1FID49IGN1cnJlbnRUaW1lKCkpOwogICAgICAgIHJlcXVpcmUoRU5EX1RJTUUgPiBTVEFSVF9USU1FKTsKCiAgICAgICAgLy8gTmVlZCB2YWxpZCB3YWxsZXQgYWRkcmVzc2VzCiAgICAgICAgcmVxdWlyZShfYmFua0FkZHJlc3MgICAgIT0gYWRkcmVzcygweDApKTsKICAgICAgICByZXF1aXJlKF9iYW5rQWRkcmVzcyAgICAhPSBhZGRyZXNzKHRoaXMpKTsKICAgICAgICByZXF1aXJlKF9mdW5kaW5nQWRkcmVzcyAhPSBhZGRyZXNzKDB4MCkpOwogICAgICAgIHJlcXVpcmUoX2Z1bmRpbmdBZGRyZXNzICE9IGFkZHJlc3ModGhpcykpOwogICAgICAgIHJlcXVpcmUoX3Jlc2VydmUxQWRkcmVzcyAhPSBhZGRyZXNzKDB4MCkpOwogICAgICAgIHJlcXVpcmUoX3Jlc2VydmUxQWRkcmVzcyAhPSBhZGRyZXNzKHRoaXMpKTsKICAgICAgICByZXF1aXJlKF9yZXNlcnZlMkFkZHJlc3MgIT0gYWRkcmVzcygweDApKTsKICAgICAgICByZXF1aXJlKF9yZXNlcnZlMkFkZHJlc3MgIT0gYWRkcmVzcyh0aGlzKSk7CgogICAgICAgIHVpbnQyNTYgc2FsZXNUb3RhbCA9IFRPS0VOX1BVQkxJQ19TQUxFX0NBUC5hZGQoVE9LRU5fUFJJVkFURV9TQUxFX0NBUCk7CiAgICAgICAgcmVxdWlyZShzYWxlc1RvdGFsLmFkZChUT0tFTl9GVVRVUkVfQ0FQKS5hZGQoVE9LRU5fRk9VTkRBVElPTl9DQVApLmFkZChUT0tFTl9SRVNFUlZFMV9DQVApLmFkZChUT0tFTl9SRVNFUlZFMl9DQVApID09IFRPS0VOX1RPVEFMX0NBUCk7CgogICAgICAgIC8vIFN0YXJ0IGluIG5vbi1maW5hbGl6ZWQgc3RhdGUKICAgICAgICBmaW5hbGl6ZWQgPSBmYWxzZTsKICAgICAgICBzdXNwZW5kZWQgPSBmYWxzZTsKCiAgICAgICAgLy8gU3RhcnQgYW5kIGVuZCB0aW1lcyAodXNlZCBmb3IgcHJlc2FsZSkuCiAgICAgICAgc3RhcnRUaW1lID0gU1RBUlRfVElNRTsKICAgICAgICBlbmRUaW1lICAgPSBFTkRfVElNRTsKCiAgICAgICAgLy8gSW5pdGlhbCBwcmljaW5nCiAgICAgICAgdG9rZW5zUGVyS0V0aGVyID0gVE9LRU5TX1BFUl9LRVRIRVI7CgogICAgICAgIC8vIEluaXRpYWwgY29udHJpYnV0aW9uIG1pbmltdW0KICAgICAgICBjb250cmlidXRpb25NaW5pbXVtID0gQ09OVFJJQlVUSU9OX01JTjsKCiAgICAgICAgLy8gQm9udXMgZm9yIGNvbnRyaWJ1dGlvbnMKICAgICAgICBib251cyA9IFBSRVNBTEVfQk9OVVM7CgogICAgICAgIC8vIEluaXRpYWxpemUgd2FsbGV0IGFkZHJlc3NlcwogICAgICAgIGJhbmtBZGRyZXNzICAgID0gX2JhbmtBZGRyZXNzOwogICAgICAgIGZ1bmRpbmdBZGRyZXNzID0gX2Z1bmRpbmdBZGRyZXNzOwogICAgICAgIHJlc2VydmUxQWRkcmVzcyA9IF9yZXNlcnZlMUFkZHJlc3M7CiAgICAgICAgcmVzZXJ2ZTJBZGRyZXNzID0gX3Jlc2VydmUyQWRkcmVzczsKCiAgICAgICAgLy8gQXNzaWduIGluaXRpYWwgYmFsYW5jZXMKICAgICAgICBiYWxhbmNlc1thZGRyZXNzKHRoaXMpXSA9IGJhbGFuY2VzW2FkZHJlc3ModGhpcyldLmFkZChUT0tFTl9QUkVTQUxFX0NBUCk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoVE9LRU5fUFJFU0FMRV9DQVApOwogICAgICAgIFRyYW5zZmVyKDB4MCwgYWRkcmVzcyh0aGlzKSwgVE9LRU5fUFJFU0FMRV9DQVApOwoKICAgICAgICBiYWxhbmNlc1tyZXNlcnZlMUFkZHJlc3NdID0gYmFsYW5jZXNbcmVzZXJ2ZTFBZGRyZXNzXS5hZGQoVE9LRU5fUkVTRVJWRTFfQ0FQKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChUT0tFTl9SRVNFUlZFMV9DQVApOwogICAgICAgIFRyYW5zZmVyKDB4MCwgcmVzZXJ2ZTFBZGRyZXNzLCBUT0tFTl9SRVNFUlZFMV9DQVApOwoKICAgICAgICBiYWxhbmNlc1tyZXNlcnZlMkFkZHJlc3NdID0gYmFsYW5jZXNbcmVzZXJ2ZTJBZGRyZXNzXS5hZGQoVE9LRU5fUkVTRVJWRTJfQ0FQKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChUT0tFTl9SRVNFUlZFMl9DQVApOwogICAgICAgIFRyYW5zZmVyKDB4MCwgcmVzZXJ2ZTJBZGRyZXNzLCBUT0tFTl9SRVNFUlZFMl9DQVApOwoKICAgICAgICB1aW50MjU2IGJhbmtCYWxhbmNlID0gVE9LRU5fVE9UQUxfQ0FQLnN1Yih0b3RhbFN1cHBseSk7CiAgICAgICAgYmFsYW5jZXNbYmFua0FkZHJlc3NdID0gYmFsYW5jZXNbYmFua0FkZHJlc3NdLmFkZChiYW5rQmFsYW5jZSk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoYmFua0JhbGFuY2UpOwogICAgICAgIFRyYW5zZmVyKDB4MCwgYmFua0FkZHJlc3MsIGJhbmtCYWxhbmNlKTsKCiAgICAgICAgLy8gVGhlIHRvdGFsIHN1cHBseSB0aGF0IHdlIGNhbGN1bGF0ZWQgaGVyZSBzaG91bGQgYmUgdGhlIHNhbWUgYXMgaW4gdGhlIGNvbmZpZy4KICAgICAgICByZXF1aXJlKGJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKSAgPT0gVE9LRU5fUFJFU0FMRV9DQVApOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mKHJlc2VydmUxQWRkcmVzcykgPT0gVE9LRU5fUkVTRVJWRTFfQ0FQKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZihyZXNlcnZlMkFkZHJlc3MpID09IFRPS0VOX1JFU0VSVkUyX0NBUCk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2YoYmFua0FkZHJlc3MpICAgID09IGJhbmtCYWxhbmNlKTsKICAgICAgICByZXF1aXJlKHRvdGFsU3VwcGx5ID09IFRPS0VOX1RPVEFMX0NBUCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGN1cnJlbnRUaW1lKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gbm93OwogICAgfQoKCiAgICAvLyBBbGxvd3MgdGhlIG93bmVyIHRvIGNoYW5nZSB0aGUgcHJpY2UgZm9yIHRva2Vucy4KICAgIC8vCiAgICBmdW5jdGlvbiBzZXRUb2tlbnNQZXJLRXRoZXIodWludDI1NiBfdG9rZW5zUGVyS0V0aGVyKSBleHRlcm5hbCBvbmx5T3duZXIgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG9rZW5zUGVyS0V0aGVyID4gMCk7CgogICAgICAgIC8vIFNldCB0aGUgdG9rZW5zUGVyS0V0aGVyIGFtb3VudCBmb3IgYW55IG5ldyBzYWxlLgogICAgICAgIHRva2Vuc1BlcktFdGhlciA9IF90b2tlbnNQZXJLRXRoZXI7CgogICAgICAgIFRva2Vuc1BlcktFdGhlclVwZGF0ZWQoX3Rva2Vuc1BlcktFdGhlcik7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEFsbG93cyB0aGUgb3duZXIgdG8gY2hhbmdlIHRoZSBtaW5pbXVtIGNvbnRyaWJ1dGlvbiBhbW91bnQKICAgIC8vCiAgICBmdW5jdGlvbiBzZXRDb250cmlidXRpb25NaW5pbXVtKHVpbnQyNTYgX2NvbnRyaWJ1dGlvbk1pbmltdW0pIGV4dGVybmFsIG9ubHlPd25lciByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF9jb250cmlidXRpb25NaW5pbXVtID4gMCk7CgogICAgICAgIC8vIFNldCB0aGUgdG9rZW5zUGVyS0V0aGVyIGFtb3VudCBmb3IgYW55IG5ldyBzYWxlLgogICAgICAgIGNvbnRyaWJ1dGlvbk1pbmltdW0gPSBfY29udHJpYnV0aW9uTWluaW11bTsKCiAgICAgICAgQ29udHJpYnV0aW9uTWluaW11bVVwZGF0ZWQoX2NvbnRyaWJ1dGlvbk1pbmltdW0pOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBBbGxvd3MgdGhlIG93bmVyIHRvIGNoYW5nZSB0aGUgYm9udXMgYW1vdW50IGFwcGxpZWQgdG8gcHVyY2hhc2VzLgogICAgLy8KICAgIGZ1bmN0aW9uIHNldEJvbnVzKHVpbnQyNTYgX2JvbnVzKSBleHRlcm5hbCBvbmx5T3duZXIgcmV0dXJucyhib29sKSB7CiAgICAgICAgLy8gMTAwIG1lYW5zIG5vIGJvbnVzCiAgICAgICAgcmVxdWlyZShfYm9udXMgPj0gMTAwKTsKCiAgICAgICAgLy8gMjAwIG1lYW5zIDEwMCUgYm9udXMKICAgICAgICByZXF1aXJlKF9ib251cyA8PSAyMDApOwoKICAgICAgICBib251cyA9IF9ib251czsKCiAgICAgICAgQm9udXNBbW91bnRVcGRhdGVkKF9ib251cyk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvLyBBbGxvd3MgdGhlIG93bmVyIHRvIGNoYW5nZSB0aGUgdGltZSB3aW5kb3cgZm9yIHRoZSBzYWxlLgogICAgLy8KICAgIGZ1bmN0aW9uIHNldFRpbWVXaW5kb3codWludDI1NiBfc3RhcnRUaW1lLCB1aW50MjU2IF9lbmRUaW1lKSBleHRlcm5hbCBvbmx5T3duZXIgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmVxdWlyZShfc3RhcnRUaW1lID49IFNUQVJUX1RJTUUpOwogICAgICAgIHJlcXVpcmUoX2VuZFRpbWUgPiBfc3RhcnRUaW1lKTsKCiAgICAgICAgc3RhcnRUaW1lID0gX3N0YXJ0VGltZTsKICAgICAgICBlbmRUaW1lICAgPSBfZW5kVGltZTsKCiAgICAgICAgVGltZVdpbmRvd1VwZGF0ZWQoX3N0YXJ0VGltZSwgX2VuZFRpbWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgLy8gQWxsb3dzIHRoZSBvd25lciB0byBzdXNwZW5kIC8gc3RvcCB0aGUgc2FsZS4KICAgIC8vCiAgICBmdW5jdGlvbiBzdXNwZW5kKCkgZXh0ZXJuYWwgb25seU93bmVyIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChzdXNwZW5kZWQgPT0gdHJ1ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBzdXNwZW5kZWQgPSB0cnVlOwoKICAgICAgICBTYWxlU3VzcGVuZGVkKCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvLyBBbGxvd3MgdGhlIG93bmVyIHRvIHJlc3VtZSB0aGUgc2FsZS4KICAgIC8vCiAgICBmdW5jdGlvbiByZXN1bWUoKSBleHRlcm5hbCBvbmx5T3duZXIgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKHN1c3BlbmRlZCA9PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBzdXNwZW5kZWQgPSBmYWxzZTsKCiAgICAgICAgU2FsZVJlc3VtZWQoKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIC8vIEFjY2VwdCBldGhlciBjb250cmlidXRpb25zIGR1cmluZyB0aGUgdG9rZW4gc2FsZS4KICAgIC8vCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHB1YmxpYyB7CiAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKCiAgICAvLyBBbGxvd3MgdGhlIGNhbGxlciB0byBidXkgdG9rZW5zIGZvciBhbm90aGVyIHJlY2lwaWVudCAocHJveHkgcHVyY2hhc2UpLgogICAgLy8gVGhpcyBjYW4gYmUgdXNlZCBieSBleGNoYW5nZXMgZm9yIGV4YW1wbGUuCiAgICAvLwogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXF1aXJlKCFzdXNwZW5kZWQpOwogICAgICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gYWRkcmVzcygweDApKTsKICAgICAgICByZXF1aXJlKGJlbmVmaWNpYXJ5ICE9IGFkZHJlc3ModGhpcykpOwogICAgICAgIHJlcXVpcmUoY3VycmVudFRpbWUoKSA+PSBzdGFydFRpbWUpOwogICAgICAgIHJlcXVpcmUoY3VycmVudFRpbWUoKSA8PSBlbmRUaW1lKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBjb250cmlidXRpb25NaW5pbXVtKTsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gZnVuZGluZ0FkZHJlc3MpOwoKICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2FsZSBjb250cmFjdCBzdGlsbCBoYXMgdG9rZW5zIGZvciBzYWxlLgogICAgICAgIHVpbnQyNTYgc2FsZUJhbGFuY2UgPSBiYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgcmVxdWlyZShzYWxlQmFsYW5jZSA+IDApOwoKICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIG51bWJlciBvZiB0b2tlbnMgdGhhdCB0aGUgZXRoZXIgc2hvdWxkIGNvbnZlcnQgdG8uCiAgICAgICAgdWludDI1NiB0b2tlbnMgPSBtc2cudmFsdWUubXVsKHRva2Vuc1BlcktFdGhlcikubXVsKGJvbnVzKS5kaXYoMTAqKigxOCAtIERFQ0lNQUxTICsgMyArIDIpKTsKICAgICAgICByZXF1aXJlKHRva2VucyA+IDApOwoKICAgICAgICB1aW50MjU2IGNvc3QgPSBtc2cudmFsdWU7CiAgICAgICAgdWludDI1NiByZWZ1bmQgPSAwOwoKICAgICAgICBpZiAodG9rZW5zID4gc2FsZUJhbGFuY2UpIHsKICAgICAgICAgICAgLy8gTm90IGVub3VnaCB0b2tlbnMgbGVmdCBmb3Igc2FsZSB0byBmdWxmaWxsIHRoZSBmdWxsIG9yZGVyLgogICAgICAgICAgICB0b2tlbnMgPSBzYWxlQmFsYW5jZTsKCiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgYWN0dWFsIGNvc3QgZm9yIHRoZSB0b2tlbnMgdGhhdCBjYW4gYmUgcHVyY2hhc2VkLgogICAgICAgICAgICBjb3N0ID0gdG9rZW5zLm11bCgxMCoqKDE4IC0gREVDSU1BTFMgKyAzICsgMikpLmRpdih0b2tlbnNQZXJLRXRoZXIubXVsKGJvbnVzKSk7CgogICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGFtb3VudCBvZiBFVEggcmVmdW5kIHRvIHRoZSBjb250cmlidXRvci4KICAgICAgICAgICAgcmVmdW5kID0gbXNnLnZhbHVlLnN1Yihjb3N0KTsKICAgICAgICB9CgogICAgICAgIHRvdGFsVG9rZW5zU29sZCA9IHRvdGFsVG9rZW5zU29sZC5hZGQodG9rZW5zKTsKCiAgICAgICAgLy8gTW92ZSB0b2tlbnMgZnJvbSB0aGUgc2FsZSBjb250cmFjdCB0byB0aGUgYmVuZWZpY2lhcnkKICAgICAgICBiYWxhbmNlc1thZGRyZXNzKHRoaXMpXSA9IGJhbGFuY2VzW2FkZHJlc3ModGhpcyldLnN1Yih0b2tlbnMpOwogICAgICAgIGJhbGFuY2VzW2JlbmVmaWNpYXJ5XSAgID0gYmFsYW5jZXNbYmVuZWZpY2lhcnldLmFkZCh0b2tlbnMpOwogICAgICAgIFRyYW5zZmVyKGFkZHJlc3ModGhpcyksIGJlbmVmaWNpYXJ5LCB0b2tlbnMpOwoKICAgICAgICBpZiAocmVmdW5kID4gMCkgewogICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIocmVmdW5kKTsKICAgICAgICB9CgogICAgICAgIC8vIFRyYW5zZmVyIHRoZSBjb250cmlidXRlZCBldGhlciB0byB0aGUgY3Jvd2RzYWxlIHdhbGxldHMuCiAgICAgICAgdWludDI1NiBjb250cmlidXRpb24gICAgICA9IG1zZy52YWx1ZS5zdWIocmVmdW5kKTsKCiAgICAgICAgZnVuZGluZ0FkZHJlc3MudHJhbnNmZXIoY29udHJpYnV0aW9uKTsKCiAgICAgICAgVG9rZW5zUHVyY2hhc2VkKGJlbmVmaWNpYXJ5LCBjb3N0LCB0b2tlbnMpOwoKICAgICAgICByZXR1cm4gdG9rZW5zOwogICAgfQoKCiAgICAvLyBFUkMyMCB0cmFuc2ZlciBmdW5jdGlvbiwgbW9kaWZpZWQgdG8gb25seSBhbGxvdyB0cmFuc2ZlcnMgb25jZSB0aGUgc2FsZSBoYXMgYmVlbiBmaW5hbGl6ZWQuCiAgICAvLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmICghaXNUcmFuc2ZlckFsbG93ZWQobXNnLnNlbmRlciwgX3RvKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfYW1vdW50KTsKICAgIH0KCgogICAgLy8gRVJDMjAgdHJhbnNmZXJGcm9tIGZ1bmN0aW9uLCBtb2RpZmllZCB0byBvbmx5IGFsbG93IHRyYW5zZmVycyBvbmNlIHRoZSBzYWxlIGhhcyBiZWVuIGZpbmFsaXplZC4KICAgIC8vCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmICghaXNUcmFuc2ZlckFsbG93ZWQoX2Zyb20sIF90bykpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgIH0KCgogICAgLy8gSW50ZXJuYWwgaGVscGVyIHRvIGNoZWNrIGlmIHRoZSB0cmFuc2ZlciBzaG91bGQgYmUgYWxsb3dlZAogICAgLy8KICAgIGZ1bmN0aW9uIGlzVHJhbnNmZXJBbGxvd2VkKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChmaW5hbGl6ZWQpIHsKICAgICAgICAgICAgLy8gV2UgYWxsb3cgZXZlcnlib2R5IHRvIHRyYW5zZmVyIHRva2VucyBvbmNlIHRoZSBzYWxlIGlzIGZpbmFsaXplZC4KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoX2Zyb20gPT0gYmFua0FkZHJlc3MgfHwgX3RvID09IGJhbmtBZGRyZXNzKSB7CiAgICAgICAgICAgIC8vIFdlIGFsbG93IHRoZSBiYW5rIHRvIGluaXRpYXRlIHRyYW5zZmVycy4gV2UgYWxzbyBhbGxvdyBpdCB0byBiZSB0aGUgcmVjaXBpZW50CiAgICAgICAgICAgIC8vIG9mIHRyYW5zZmVycyBiZWZvcmUgdGhlIHRva2VuIGlzIGZpbmFsaXplZCBpbiBjYXNlIGEgcmVjaXBpZW50IHdhbnRzIHRvIHNlbmQKICAgICAgICAgICAgLy8gYmFjayB0b2tlbnMuIEUuZy4gS1lDIHJlcXVpcmVtZW50cyBjYW5ub3QgYmUgbWV0LgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCgogICAgLy8gQWxsb3dzIG93bmVyIHRvIHRyYW5zZmVyIHRva2VucyBhc3NpZ25lZCB0byB0aGUgc2FsZSBjb250cmFjdCwgYmFjayB0byB0aGUgYmFuayB3YWxsZXQuCiAgICBmdW5jdGlvbiByZWNsYWltQ29udHJhY3RUb2tlbnMoKSBleHRlcm5hbCBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOwoKICAgICAgICBpZiAodG9rZW5zID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgYmFsYW5jZXNbYWRkcmVzcyh0aGlzKV0gPSBiYWxhbmNlc1thZGRyZXNzKHRoaXMpXS5zdWIodG9rZW5zKTsKICAgICAgICBiYWxhbmNlc1tiYW5rQWRkcmVzc10gICA9IGJhbGFuY2VzW2JhbmtBZGRyZXNzXS5hZGQodG9rZW5zKTsKICAgICAgICBUcmFuc2ZlcihhZGRyZXNzKHRoaXMpLCBiYW5rQWRkcmVzcywgdG9rZW5zKTsKCiAgICAgICAgQ29udHJhY3RUb2tlbnNSZWNsYWltZWQodG9rZW5zKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIC8vIEFsbG93cyB0aGUgb3duZXIgdG8gZmluYWxpemUgdGhlIHNhbGUgYW5kIGFsbG93IHRva2VucyB0byBiZSB0cmFkZWQuCiAgICAvLwogICAgZnVuY3Rpb24gZmluYWxpemUoKSBleHRlcm5hbCBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoIWZpbmFsaXplZCk7CgogICAgICAgIGZpbmFsaXplZCA9IHRydWU7CgogICAgICAgIFRva2VuRmluYWxpemVkKCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9'.
	

]
