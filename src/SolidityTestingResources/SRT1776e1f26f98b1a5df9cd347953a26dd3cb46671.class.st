Class {
	#name : #SRT1776e1f26f98b1a5df9cd347953a26dd3cb46671,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1776e1f26f98b1a5df9cd347953a26dd3cb46671 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBTYWZlIHsKICAgIC8vIENoZWNrIGlmIGl0IGlzIHNhZmUgdG8gYWRkIHR3byBudW1iZXJzCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSAmJiBjID49IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8vIENoZWNrIGlmIGl0IGlzIHNhZmUgdG8gc3VidHJhY3QgdHdvIG51bWJlcnMKICAgIGZ1bmN0aW9uIHNhZmVTdWJ0cmFjdCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYyA9IGEgLSBiOwogICAgICAgIGFzc2VydChiIDw9IGEgJiYgYyA8PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlTXVsdGlwbHkodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IChjIC8gYSkgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc2hyaW5rMTI4KHVpbnQgYSkgaW50ZXJuYWwgcmV0dXJucyAodWludDEyOCkgewogICAgICAgIGFzc2VydChhIDwgMHgxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApOwogICAgICAgIHJldHVybiB1aW50MTI4KGEpOwogICAgfQoKICAgIC8vIG1pdGlnYXRlIHNob3J0IGFkZHJlc3MgYXR0YWNrCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBudW1Xb3JkcykgewogICAgICAgIGFzc2VydChtc2cuZGF0YS5sZW5ndGggPT0gbnVtV29yZHMgKiAzMiArIDQpOwogICAgICAgIF87CiAgICB9CgogICAgLy8gYWxsb3cgZXRoZXIgdG8gYmUgcmVjZWl2ZWQKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgeyB9Cn0KCi8vIENsYXNzIHZhcmlhYmxlcyB1c2VkIGJvdGggaW4gTnVtZXJhaXJlQmFja2VuZCBhbmQgTnVtZXJhaXJlRGVsZWdhdGUKCmNvbnRyYWN0IE51bWVyYWlyZVNoYXJlZCBpcyBTYWZlIHsKCiAgICBhZGRyZXNzIHB1YmxpYyBudW1lcmFpID0gdGhpczsKCiAgICAvLyBDYXAgdGhlIHRvdGFsIHN1cHBseSBhbmQgdGhlIHdlZWtseSBzdXBwbHkKICAgIHVpbnQyNTYgcHVibGljIHN1cHBseV9jYXAgPSAyMTAwMDAwMGUxODsgLy8gMjEgbWlsbGlvbgogICAgdWludDI1NiBwdWJsaWMgd2Vla2x5X2Rpc2J1cnNlbWVudCA9IDk2MTUzODQ2MTUzODQ2MTUzODQ2MTUzOwoKICAgIHVpbnQyNTYgcHVibGljIGluaXRpYWxfZGlzYnVyc2VtZW50OwogICAgdWludDI1NiBwdWJsaWMgZGVwbG95X3RpbWU7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxfbWludGVkOwoKICAgIC8vIEVSQzIwIHJlcXVpcmVzIHRvdGFsU3VwcGx5LCBiYWxhbmNlT2YsIGFuZCBhbGxvd2FuY2UKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIG1hcHBpbmcgKHVpbnQgPT4gVG91cm5hbWVudCkgcHVibGljIHRvdXJuYW1lbnRzOyAgLy8gdG91cm5hbWVudElECgogICAgc3RydWN0IFRvdXJuYW1lbnQgewogICAgICAgIHVpbnQyNTYgY3JlYXRpb25UaW1lOwogICAgICAgIHVpbnQyNTZbXSByb3VuZElEczsKICAgICAgICBtYXBwaW5nICh1aW50MjU2ID0+IFJvdW5kKSByb3VuZHM7ICAvLyByb3VuZElECiAgICB9IAoKICAgIHN0cnVjdCBSb3VuZCB7CiAgICAgICAgdWludDI1NiBjcmVhdGlvblRpbWU7CiAgICAgICAgdWludDI1NiBlbmRUaW1lOwogICAgICAgIHVpbnQyNTYgcmVzb2x1dGlvblRpbWU7CiAgICAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChieXRlczMyID0+IFN0YWtlKSkgc3Rha2VzOyAgLy8gYWRkcmVzcyBvZiBzdGFrZXIKICAgIH0KCiAgICAvLyBUaGUgb3JkZXIgaXMgaW1wb3J0YW50IGhlcmUgYmVjYXVzZSBvZiBpdHMgcGFja2luZyBjaGFyYWN0ZXJpc3RpY3MuCiAgICAvLyBQYXJ0aWN1bGFybHksIGBhbW91bnRgIGFuZCBgY29uZmlkZW5jZWAgYXJlIGluIHRoZSAqc2FtZSogd29yZCwgc28KICAgIC8vIFNvbGlkaXR5IGNhbiB1cGRhdGUgYm90aCBhdCB0aGUgc2FtZSB0aW1lIChpZiB0aGUgb3B0aW1pemVyIGNhbiBmaWd1cmUKICAgIC8vIG91dCB0aGF0IHlvdSdyZSB1cGRhdGluZyBib3RoKS4gIFRoaXMgbWFrZXMgYHN0YWtlKClgIGNoZWFwLgogICAgc3RydWN0IFN0YWtlIHsKICAgICAgICB1aW50MTI4IGFtb3VudDsgLy8gT25jZSB0aGUgc3Rha2UgaXMgcmVzb2x2ZWQsIHRoaXMgYmVjb21lcyAwCiAgICAgICAgdWludDEyOCBjb25maWRlbmNlOwogICAgICAgIGJvb2wgc3VjY2Vzc2Z1bDsKICAgICAgICBib29sIHJlc29sdmVkOwogICAgfQoKICAgIC8vIEdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0byBub3RpZnkgY2xpZW50cwogICAgZXZlbnQgTWludCh1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBTdGFrZWQoYWRkcmVzcyBpbmRleGVkIHN0YWtlciwgYnl0ZXMzMiB0YWcsIHVpbnQyNTYgdG90YWxBbW91bnRTdGFrZWQsIHVpbnQyNTYgY29uZmlkZW5jZSwgdWludDI1NiBpbmRleGVkIHRvdXJuYW1lbnRJRCwgdWludDI1NiBpbmRleGVkIHJvdW5kSUQpOwogICAgZXZlbnQgUm91bmRDcmVhdGVkKHVpbnQyNTYgaW5kZXhlZCB0b3VybmFtZW50SUQsIHVpbnQyNTYgaW5kZXhlZCByb3VuZElELCB1aW50MjU2IGVuZFRpbWUsIHVpbnQyNTYgcmVzb2x1dGlvblRpbWUpOwogICAgZXZlbnQgVG91cm5hbWVudENyZWF0ZWQodWludDI1NiBpbmRleGVkIHRvdXJuYW1lbnRJRCk7CiAgICBldmVudCBTdGFrZURlc3Ryb3llZCh1aW50MjU2IGluZGV4ZWQgdG91cm5hbWVudElELCB1aW50MjU2IGluZGV4ZWQgcm91bmRJRCwgYWRkcmVzcyBpbmRleGVkIHN0YWtlckFkZHJlc3MsIGJ5dGVzMzIgdGFnKTsKICAgIGV2ZW50IFN0YWtlUmVsZWFzZWQodWludDI1NiBpbmRleGVkIHRvdXJuYW1lbnRJRCwgdWludDI1NiBpbmRleGVkIHJvdW5kSUQsIGFkZHJlc3MgaW5kZXhlZCBzdGFrZXJBZGRyZXNzLCBieXRlczMyIHRhZywgdWludDI1NiBldGhlclJld2FyZCk7CgogICAgLy8gQ2FsY3VsYXRlIGFsbG93YWJsZSBkaXNidXJzZW1lbnQKICAgIGZ1bmN0aW9uIGdldE1pbnRhYmxlKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybgogICAgICAgICAgICBzYWZlU3VidHJhY3QoCiAgICAgICAgICAgICAgICBzYWZlQWRkKGluaXRpYWxfZGlzYnVyc2VtZW50LAogICAgICAgICAgICAgICAgICAgIHNhZmVNdWx0aXBseSh3ZWVrbHlfZGlzYnVyc2VtZW50LAogICAgICAgICAgICAgICAgICAgICAgICBzYWZlU3VidHJhY3QoYmxvY2sudGltZXN0YW1wLCBkZXBsb3lfdGltZSkpCiAgICAgICAgICAgICAgICAgICAgLyAxIHdlZWtzKSwKICAgICAgICAgICAgICAgIHRvdGFsX21pbnRlZCk7CiAgICB9Cn0KCi8vIEZyb20gT3BlblplcHBsaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzL293bmVyc2hpcC9TaGFyZWFibGUuc29sCi8qCiAqIFNoYXJlYWJsZQogKiAKICogRWZmZWN0aXZlbHkgb3VyIG11bHRpc2lnIGNvbnRyYWN0CiAqCiAqIEJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9kYXBwLWJpbi9ibG9iL21hc3Rlci93YWxsZXQvd2FsbGV0LnNvbAogKgogKiBpbmhlcml0YWJsZSAicHJvcGVydHkiIGNvbnRyYWN0IHRoYXQgZW5hYmxlcyBtZXRob2RzIHRvIGJlIHByb3RlY3RlZCBieSByZXF1aXJpbmcgdGhlIGFjcXVpZXNjZW5jZSBvZiBlaXRoZXIgYSBzaW5nbGUsIG9yLCBjcnVjaWFsbHksIGVhY2ggb2YgYSBudW1iZXIgb2YsIGRlc2lnbmF0ZWQgb3duZXJzLgogKgogKiB1c2FnZToKICogdXNlIG1vZGlmaWVycyBvbmx5b3duZXIgKGp1c3Qgb3duIG93bmVkKSBvciBvbmx5bWFueW93bmVycyhoYXNoKSwgd2hlcmVieSB0aGUgc2FtZSBoYXNoIG11c3QgYmUgcHJvdmlkZWQgYnkgc29tZSBudW1iZXIgKHNwZWNpZmllZCBpbiBjb25zdHJ1Y3Rvcikgb2YgdGhlIHNldCBvZiBvd25lcnMgKHNwZWNpZmllZCBpbiB0aGUgY29uc3RydWN0b3IpIGJlZm9yZSB0aGUgaW50ZXJpb3IgaXMgZXhlY3V0ZWQuCiAqLwpjb250cmFjdCBTaGFyZWFibGUgewogIC8vIFRZUEVTCgogIC8vIHN0cnVjdCBmb3IgdGhlIHN0YXR1cyBvZiBhIHBlbmRpbmcgb3BlcmF0aW9uLgogIHN0cnVjdCBQZW5kaW5nU3RhdGUgewogICAgdWludCB5ZXROZWVkZWQ7CiAgICB1aW50IG93bmVyc0RvbmU7CiAgICB1aW50IGluZGV4OwogIH0KCgogIC8vIEZJRUxEUwoKICAvLyB0aGUgbnVtYmVyIG9mIG93bmVycyB0aGF0IG11c3QgY29uZmlybSB0aGUgc2FtZSBvcGVyYXRpb24gYmVmb3JlIGl0IGlzIHJ1bi4KICB1aW50IHB1YmxpYyByZXF1aXJlZDsKCiAgLy8gbGlzdCBvZiBvd25lcnMKICBhZGRyZXNzWzI1Nl0gb3duZXJzOwogIHVpbnQgY29uc3RhbnQgY19tYXhPd25lcnMgPSAyNTA7CiAgLy8gaW5kZXggb24gdGhlIGxpc3Qgb2Ygb3duZXJzIHRvIGFsbG93IHJldmVyc2UgbG9va3VwCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIG93bmVySW5kZXg7CiAgLy8gdGhlIG9uZ29pbmcgb3BlcmF0aW9ucy4KICBtYXBwaW5nKGJ5dGVzMzIgPT4gUGVuZGluZ1N0YXRlKSBwZW5kaW5nczsKICBieXRlczMyW10gcGVuZGluZ3NJbmRleDsKCgogIC8vIEVWRU5UUwoKICAvLyB0aGlzIGNvbnRyYWN0IG9ubHkgaGFzIHNpeCB0eXBlcyBvZiBldmVudHM6IGl0IGNhbiBhY2NlcHQgYSBjb25maXJtYXRpb24sIGluIHdoaWNoIGNhc2UKICAvLyB3ZSByZWNvcmQgb3duZXIgYW5kIG9wZXJhdGlvbiAoaGFzaCkgYWxvbmdzaWRlIGl0LgogIGV2ZW50IENvbmZpcm1hdGlvbihhZGRyZXNzIG93bmVyLCBieXRlczMyIG9wZXJhdGlvbik7CiAgZXZlbnQgUmV2b2tlKGFkZHJlc3Mgb3duZXIsIGJ5dGVzMzIgb3BlcmF0aW9uKTsKCgogIC8vIE1PRElGSUVSUwoKICBhZGRyZXNzIHRoaXNDb250cmFjdCA9IHRoaXM7CgogIC8vIHNpbXBsZSBzaW5nbGUtc2lnIGZ1bmN0aW9uIG1vZGlmaWVyLgogIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICBpZiAoaXNPd25lcihtc2cuc2VuZGVyKSkKICAgICAgXzsKICB9CgogIC8vIG11bHRpLXNpZyBmdW5jdGlvbiBtb2RpZmllcjogdGhlIG9wZXJhdGlvbiBtdXN0IGhhdmUgYW4gaW50cmluc2ljIGhhc2ggaW4gb3JkZXIKICAvLyB0aGF0IGxhdGVyIGF0dGVtcHRzIGNhbiBiZSByZWFsaXNlZCBhcyB0aGUgc2FtZSB1bmRlcmx5aW5nIG9wZXJhdGlvbiBhbmQKICAvLyB0aHVzIGNvdW50IGFzIGNvbmZpcm1hdGlvbnMuCiAgbW9kaWZpZXIgb25seU1hbnlPd25lcnMoYnl0ZXMzMiBfb3BlcmF0aW9uKSB7CiAgICBpZiAoY29uZmlybUFuZENoZWNrKF9vcGVyYXRpb24pKQogICAgICBfOwogIH0KCgogIC8vIENPTlNUUlVDVE9SCgogIC8vIGNvbnN0cnVjdG9yIGlzIGdpdmVuIG51bWJlciBvZiBzaWdzIHJlcXVpcmVkIHRvIGRvIHByb3RlY3RlZCAib25seW1hbnlvd25lcnMiIHRyYW5zYWN0aW9ucwogIC8vIGFzIHdlbGwgYXMgdGhlIHNlbGVjdGlvbiBvZiBhZGRyZXNzZXMgY2FwYWJsZSBvZiBjb25maXJtaW5nIHRoZW0uCiAgZnVuY3Rpb24gU2hhcmVhYmxlKGFkZHJlc3NbXSBfb3duZXJzLCB1aW50IF9yZXF1aXJlZCkgewogICAgb3duZXJzWzFdID0gbXNnLnNlbmRlcjsKICAgIG93bmVySW5kZXhbbXNnLnNlbmRlcl0gPSAxOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX293bmVycy5sZW5ndGg7ICsraSkgewogICAgICBvd25lcnNbMiArIGldID0gX293bmVyc1tpXTsKICAgICAgb3duZXJJbmRleFtfb3duZXJzW2ldXSA9IDIgKyBpOwogICAgfQogICAgaWYgKHJlcXVpcmVkID4gb3duZXJzLmxlbmd0aCkgdGhyb3c7CiAgICByZXF1aXJlZCA9IF9yZXF1aXJlZDsKICB9CgoKICAvLyBuZXcgbXVsdGlzaWcgaXMgZ2l2ZW4gbnVtYmVyIG9mIHNpZ3MgcmVxdWlyZWQgdG8gZG8gcHJvdGVjdGVkICJvbmx5bWFueW93bmVycyIgdHJhbnNhY3Rpb25zCiAgLy8gYXMgd2VsbCBhcyB0aGUgc2VsZWN0aW9uIG9mIGFkZHJlc3NlcyBjYXBhYmxlIG9mIGNvbmZpcm1pbmcgdGhlbS4KICAvLyB0YWtlIGFsbCBuZXcgb3duZXJzIGFzIGFuIGFycmF5CiAgZnVuY3Rpb24gY2hhbmdlU2hhcmVhYmxlKGFkZHJlc3NbXSBfb3duZXJzLCB1aW50IF9yZXF1aXJlZCkgb25seU1hbnlPd25lcnMoc2hhMyhtc2cuZGF0YSkpIHsKICAgIGZvciAodWludCBpID0gMDsgaSA8IF9vd25lcnMubGVuZ3RoOyArK2kpIHsKICAgICAgb3duZXJzWzEgKyBpXSA9IF9vd25lcnNbaV07CiAgICAgIG93bmVySW5kZXhbX293bmVyc1tpXV0gPSAxICsgaTsKICAgIH0KICAgIGlmIChyZXF1aXJlZCA+IG93bmVycy5sZW5ndGgpIHRocm93OwogICAgcmVxdWlyZWQgPSBfcmVxdWlyZWQ7CiAgfQoKICAvLyBNRVRIT0RTCgogIC8vIFJldm9rZXMgYSBwcmlvciBjb25maXJtYXRpb24gb2YgdGhlIGdpdmVuIG9wZXJhdGlvbgogIGZ1bmN0aW9uIHJldm9rZShieXRlczMyIF9vcGVyYXRpb24pIGV4dGVybmFsIHsKICAgIHVpbnQgaW5kZXggPSBvd25lckluZGV4W21zZy5zZW5kZXJdOwogICAgLy8gbWFrZSBzdXJlIHRoZXkncmUgYW4gb3duZXIKICAgIGlmIChpbmRleCA9PSAwKSByZXR1cm47CiAgICB1aW50IG93bmVySW5kZXhCaXQgPSAyKippbmRleDsKICAgIHZhciBwZW5kaW5nID0gcGVuZGluZ3NbX29wZXJhdGlvbl07CiAgICBpZiAocGVuZGluZy5vd25lcnNEb25lICYgb3duZXJJbmRleEJpdCA+IDApIHsKICAgICAgcGVuZGluZy55ZXROZWVkZWQrKzsKICAgICAgcGVuZGluZy5vd25lcnNEb25lIC09IG93bmVySW5kZXhCaXQ7CiAgICAgIFJldm9rZShtc2cuc2VuZGVyLCBfb3BlcmF0aW9uKTsKICAgIH0KICB9CgogIC8vIEdldHMgYW4gb3duZXIgYnkgMC1pbmRleGVkIHBvc2l0aW9uICh1c2luZyBudW1Pd25lcnMgYXMgdGhlIGNvdW50KQogIGZ1bmN0aW9uIGdldE93bmVyKHVpbnQgb3duZXJJbmRleCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgcmV0dXJuIGFkZHJlc3Mob3duZXJzW293bmVySW5kZXggKyAxXSk7CiAgfQoKICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBvd25lckluZGV4W19hZGRyXSA+IDA7CiAgfQoKICBmdW5jdGlvbiBoYXNDb25maXJtZWQoYnl0ZXMzMiBfb3BlcmF0aW9uLCBhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgdmFyIHBlbmRpbmcgPSBwZW5kaW5nc1tfb3BlcmF0aW9uXTsKICAgIHVpbnQgaW5kZXggPSBvd25lckluZGV4W19vd25lcl07CgogICAgLy8gbWFrZSBzdXJlIHRoZXkncmUgYW4gb3duZXIKICAgIGlmIChpbmRleCA9PSAwKSByZXR1cm4gZmFsc2U7CgogICAgLy8gZGV0ZXJtaW5lIHRoZSBiaXQgdG8gc2V0IGZvciB0aGlzIG93bmVyLgogICAgdWludCBvd25lckluZGV4Qml0ID0gMioqaW5kZXg7CiAgICByZXR1cm4gIShwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID09IDApOwogIH0KCiAgLy8gSU5URVJOQUwgTUVUSE9EUwoKICBmdW5jdGlvbiBjb25maXJtQW5kQ2hlY2soYnl0ZXMzMiBfb3BlcmF0aW9uKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAvLyBkZXRlcm1pbmUgd2hhdCBpbmRleCB0aGUgcHJlc2VudCBzZW5kZXIgaXM6CiAgICB1aW50IGluZGV4ID0gb3duZXJJbmRleFttc2cuc2VuZGVyXTsKICAgIC8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG93bmVyCiAgICBpZiAoaW5kZXggPT0gMCkgcmV0dXJuOwoKICAgIHZhciBwZW5kaW5nID0gcGVuZGluZ3NbX29wZXJhdGlvbl07CiAgICAvLyBpZiB3ZSdyZSBub3QgeWV0IHdvcmtpbmcgb24gdGhpcyBvcGVyYXRpb24sIHN3aXRjaCBvdmVyIGFuZCByZXNldCB0aGUgY29uZmlybWF0aW9uIHN0YXR1cy4KICAgIGlmIChwZW5kaW5nLnlldE5lZWRlZCA9PSAwKSB7CiAgICAgIC8vIHJlc2V0IGNvdW50IG9mIGNvbmZpcm1hdGlvbnMgbmVlZGVkLgogICAgICBwZW5kaW5nLnlldE5lZWRlZCA9IHJlcXVpcmVkOwogICAgICAvLyByZXNldCB3aGljaCBvd25lcnMgaGF2ZSBjb25maXJtZWQgKG5vbmUpIC0gc2V0IG91ciBiaXRtYXAgdG8gMC4KICAgICAgcGVuZGluZy5vd25lcnNEb25lID0gMDsKICAgICAgcGVuZGluZy5pbmRleCA9IHBlbmRpbmdzSW5kZXgubGVuZ3RoKys7CiAgICAgIHBlbmRpbmdzSW5kZXhbcGVuZGluZy5pbmRleF0gPSBfb3BlcmF0aW9uOwogICAgfQogICAgLy8gZGV0ZXJtaW5lIHRoZSBiaXQgdG8gc2V0IGZvciB0aGlzIG93bmVyLgogICAgdWludCBvd25lckluZGV4Qml0ID0gMioqaW5kZXg7CiAgICAvLyBtYWtlIHN1cmUgd2UgKHRoZSBtZXNzYWdlIHNlbmRlcikgaGF2ZW4ndCBjb25maXJtZWQgdGhpcyBvcGVyYXRpb24gcHJldmlvdXNseS4KICAgIGlmIChwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID09IDApIHsKICAgICAgQ29uZmlybWF0aW9uKG1zZy5zZW5kZXIsIF9vcGVyYXRpb24pOwogICAgICAvLyBvayAtIGNoZWNrIGlmIGNvdW50IGlzIGVub3VnaCB0byBnbyBhaGVhZC4KICAgICAgaWYgKHBlbmRpbmcueWV0TmVlZGVkIDw9IDEpIHsKICAgICAgICAvLyBlbm91Z2ggY29uZmlybWF0aW9uczogcmVzZXQgYW5kIHJ1biBpbnRlcmlvci4KICAgICAgICBkZWxldGUgcGVuZGluZ3NJbmRleFtwZW5kaW5nc1tfb3BlcmF0aW9uXS5pbmRleF07CiAgICAgICAgZGVsZXRlIHBlbmRpbmdzW19vcGVyYXRpb25dOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAvLyBub3QgZW5vdWdoOiByZWNvcmQgdGhhdCB0aGlzIG93bmVyIGluIHBhcnRpY3VsYXIgY29uZmlybWVkLgogICAgICAgICAgcGVuZGluZy55ZXROZWVkZWQtLTsKICAgICAgICAgIHBlbmRpbmcub3duZXJzRG9uZSB8PSBvd25lckluZGV4Qml0OwogICAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGNsZWFyUGVuZGluZygpIGludGVybmFsIHsKICAgIHVpbnQgbGVuZ3RoID0gcGVuZGluZ3NJbmRleC5sZW5ndGg7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkKICAgIGlmIChwZW5kaW5nc0luZGV4W2ldICE9IDApCiAgICAgIGRlbGV0ZSBwZW5kaW5nc1twZW5kaW5nc0luZGV4W2ldXTsKICAgIGRlbGV0ZSBwZW5kaW5nc0luZGV4OwogIH0KfQoKLy8gRnJvbSBPcGVuWmVwcGxpbjogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMvbGlmZWN5Y2xlL1BhdXNhYmxlLnNvbAovKgogKiBTdG9wcGFibGUKICogQWJzdHJhY3QgY29udHJhY3QgdGhhdCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuCiAqIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFN0b3BwYWJsZVNoYXJlYWJsZSBpcyBTaGFyZWFibGUgewogIGJvb2wgcHVibGljIHN0b3BwZWQ7CiAgYm9vbCBwdWJsaWMgc3RvcHBhYmxlID0gdHJ1ZTsKCiAgbW9kaWZpZXIgc3RvcEluRW1lcmdlbmN5IHsgaWYgKCFzdG9wcGVkKSBfOyB9CiAgbW9kaWZpZXIgb25seUluRW1lcmdlbmN5IHsgaWYgKHN0b3BwZWQpIF87IH0KCiAgZnVuY3Rpb24gU3RvcHBhYmxlU2hhcmVhYmxlKGFkZHJlc3NbXSBfb3duZXJzLCB1aW50IF9yZXF1aXJlZCkgU2hhcmVhYmxlKF9vd25lcnMsIF9yZXF1aXJlZCkgewogIH0KCiAgLy8gY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbWVyZ2VuY3ksIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICBmdW5jdGlvbiBlbWVyZ2VuY3lTdG9wKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIGFzc2VydChzdG9wcGFibGUpOwogICAgc3RvcHBlZCA9IHRydWU7CiAgfQoKICAvLyBjYWxsZWQgYnkgdGhlIG93bmVycyBvbiBlbmQgb2YgZW1lcmdlbmN5LCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogIGZ1bmN0aW9uIHJlbGVhc2UoKSBleHRlcm5hbCBvbmx5TWFueU93bmVycyhzaGEzKG1zZy5kYXRhKSkgewogICAgYXNzZXJ0KHN0b3BwYWJsZSk7CiAgICBzdG9wcGVkID0gZmFsc2U7CiAgfQoKICAvLyBjYWxsZWQgYnkgdGhlIG93bmVycyB0byBkaXNhYmxlIGFiaWxpdHkgdG8gYmVnaW4gb3IgZW5kIGFuIGVtZXJnZW5jeSBzdG9wCiAgZnVuY3Rpb24gZGlzYWJsZVN0b3BwaW5nKCkgZXh0ZXJuYWwgb25seU1hbnlPd25lcnMoc2hhMyhtc2cuZGF0YSkpIHsKICAgIHN0b3BwYWJsZSA9IGZhbHNlOwogIH0KfQoKLy8gVGhpcyBpcyB0aGUgY29udHJhY3QgdGhhdCB3aWxsIGJlIHVuY2hhbmdlYWJsZSBvbmNlIGRlcGxveWVkLiAgSXQgd2lsbCBjYWxsIGRlbGVnYXRlIGZ1bmN0aW9ucyBpbiBhbm90aGVyIGNvbnRyYWN0IHRvIGNoYW5nZSBzdGF0ZS4gIFRoZSBkZWxlZ2F0ZSBjb250cmFjdCBpcyB1cGdyYWRhYmxlLgoKY29udHJhY3QgTnVtZXJhaXJlQmFja2VuZCBpcyBTdG9wcGFibGVTaGFyZWFibGUsIE51bWVyYWlyZVNoYXJlZCB7CgogICAgYWRkcmVzcyBwdWJsaWMgZGVsZWdhdGVDb250cmFjdDsKICAgIGJvb2wgcHVibGljIGNvbnRyYWN0VXBncmFkYWJsZSA9IHRydWU7CiAgICBhZGRyZXNzW10gcHVibGljIHByZXZpb3VzRGVsZWdhdGVzOwoKICAgIHN0cmluZyBwdWJsaWMgc3RhbmRhcmQgPSAiRVJDMjAiOwoKICAgIC8vIEVSQzIwIHJlcXVpcmVzIG5hbWUsIHN5bWJvbCwgYW5kIGRlY2ltYWxzCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiTnVtZXJhaXJlIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIk5NUiI7CiAgICB1aW50MjU2IHB1YmxpYyBkZWNpbWFscyA9IDE4OwoKICAgIGV2ZW50IERlbGVnYXRlQ2hhbmdlZChhZGRyZXNzIG9sZEFkZHJlc3MsIGFkZHJlc3MgbmV3QWRkcmVzcyk7CgogICAgZnVuY3Rpb24gTnVtZXJhaXJlQmFja2VuZChhZGRyZXNzW10gX293bmVycywgdWludDI1NiBfbnVtX3JlcXVpcmVkLCB1aW50MjU2IF9pbml0aWFsX2Rpc2J1cnNlbWVudCkgU3RvcHBhYmxlU2hhcmVhYmxlKF9vd25lcnMsIF9udW1fcmVxdWlyZWQpIHsKICAgICAgICB0b3RhbFN1cHBseSA9IDA7CiAgICAgICAgdG90YWxfbWludGVkID0gMDsKCiAgICAgICAgaW5pdGlhbF9kaXNidXJzZW1lbnQgPSBfaW5pdGlhbF9kaXNidXJzZW1lbnQ7CiAgICAgICAgZGVwbG95X3RpbWUgPSBibG9jay50aW1lc3RhbXA7CiAgICB9CgogICAgZnVuY3Rpb24gZGlzYWJsZUNvbnRyYWN0VXBncmFkYWJpbGl0eSgpIG9ubHlNYW55T3duZXJzKHNoYTMobXNnLmRhdGEpKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgYXNzZXJ0KGNvbnRyYWN0VXBncmFkYWJsZSk7CiAgICAgICAgY29udHJhY3RVcGdyYWRhYmxlID0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlRGVsZWdhdGUoYWRkcmVzcyBfbmV3RGVsZWdhdGUpIG9ubHlNYW55T3duZXJzKHNoYTMobXNnLmRhdGEpKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgYXNzZXJ0KGNvbnRyYWN0VXBncmFkYWJsZSk7CgogICAgICAgIGlmIChfbmV3RGVsZWdhdGUgIT0gZGVsZWdhdGVDb250cmFjdCkgewogICAgICAgICAgICBwcmV2aW91c0RlbGVnYXRlcy5wdXNoKGRlbGVnYXRlQ29udHJhY3QpOwogICAgICAgICAgICB2YXIgb2xkRGVsZWdhdGUgPSBkZWxlZ2F0ZUNvbnRyYWN0OwogICAgICAgICAgICBkZWxlZ2F0ZUNvbnRyYWN0ID0gX25ld0RlbGVnYXRlOwogICAgICAgICAgICBEZWxlZ2F0ZUNoYW5nZWQob2xkRGVsZWdhdGUsIF9uZXdEZWxlZ2F0ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsYWltVG9rZW5zKGFkZHJlc3MgX3Rva2VuKSBvbmx5T3duZXIgewogICAgICAgIGFzc2VydChfdG9rZW4gIT0gbnVtZXJhaSk7CiAgICAgICAgaWYgKF90b2tlbiA9PSAweDApIHsKICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBOdW1lcmFpcmVCYWNrZW5kIHRva2VuID0gTnVtZXJhaXJlQmFja2VuZChfdG9rZW4pOwogICAgICAgIHVpbnQyNTYgYmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICB0b2tlbi50cmFuc2Zlcihtc2cuc2VuZGVyLCBiYWxhbmNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50KHVpbnQyNTYgX3ZhbHVlKSBzdG9wSW5FbWVyZ2VuY3kgcmV0dXJucyAoYm9vbCBvaykgewogICAgICAgIHJldHVybiBkZWxlZ2F0ZUNvbnRyYWN0LmRlbGVnYXRlY2FsbChieXRlczQoc2hhMygibWludCh1aW50MjU2KSIpKSwgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdGFrZSh1aW50MjU2IF92YWx1ZSwgYnl0ZXMzMiBfdGFnLCB1aW50MjU2IF90b3VybmFtZW50SUQsIHVpbnQyNTYgX3JvdW5kSUQsIHVpbnQyNTYgX2NvbmZpZGVuY2UpIHN0b3BJbkVtZXJnZW5jeSByZXR1cm5zIChib29sIG9rKSB7CiAgICAgICAgcmV0dXJuIGRlbGVnYXRlQ29udHJhY3QuZGVsZWdhdGVjYWxsKGJ5dGVzNChzaGEzKCJzdGFrZSh1aW50MjU2LGJ5dGVzMzIsdWludDI1Nix1aW50MjU2LHVpbnQyNTYpIikpLCBfdmFsdWUsIF90YWcsIF90b3VybmFtZW50SUQsIF9yb3VuZElELCBfY29uZmlkZW5jZSk7CiAgICB9CgogICAgZnVuY3Rpb24gc3Rha2VPbkJlaGFsZihhZGRyZXNzIF9zdGFrZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlczMyIF90YWcsIHVpbnQyNTYgX3RvdXJuYW1lbnRJRCwgdWludDI1NiBfcm91bmRJRCwgdWludDI1NiBfY29uZmlkZW5jZSkgc3RvcEluRW1lcmdlbmN5IG9ubHlQYXlsb2FkU2l6ZSg2KSByZXR1cm5zIChib29sIG9rKSB7CiAgICAgICAgcmV0dXJuIGRlbGVnYXRlQ29udHJhY3QuZGVsZWdhdGVjYWxsKGJ5dGVzNChzaGEzKCJzdGFrZU9uQmVoYWxmKGFkZHJlc3MsdWludDI1NixieXRlczMyLHVpbnQyNTYsdWludDI1Nix1aW50MjU2KSIpKSwgX3N0YWtlciwgX3ZhbHVlLCBfdGFnLCBfdG91cm5hbWVudElELCBfcm91bmRJRCwgX2NvbmZpZGVuY2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbGVhc2VTdGFrZShhZGRyZXNzIF9zdGFrZXIsIGJ5dGVzMzIgX3RhZywgdWludDI1NiBfZXRoZXJWYWx1ZSwgdWludDI1NiBfdG91cm5hbWVudElELCB1aW50MjU2IF9yb3VuZElELCBib29sIF9zdWNjZXNzZnVsKSBzdG9wSW5FbWVyZ2VuY3kgb25seVBheWxvYWRTaXplKDYpIHJldHVybnMgKGJvb2wgb2spIHsKICAgICAgICByZXR1cm4gZGVsZWdhdGVDb250cmFjdC5kZWxlZ2F0ZWNhbGwoYnl0ZXM0KHNoYTMoInJlbGVhc2VTdGFrZShhZGRyZXNzLGJ5dGVzMzIsdWludDI1Nix1aW50MjU2LHVpbnQyNTYsYm9vbCkiKSksIF9zdGFrZXIsIF90YWcsIF9ldGhlclZhbHVlLCBfdG91cm5hbWVudElELCBfcm91bmRJRCwgX3N1Y2Nlc3NmdWwpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlc3Ryb3lTdGFrZShhZGRyZXNzIF9zdGFrZXIsIGJ5dGVzMzIgX3RhZywgdWludDI1NiBfdG91cm5hbWVudElELCB1aW50MjU2IF9yb3VuZElEKSBzdG9wSW5FbWVyZ2VuY3kgb25seVBheWxvYWRTaXplKDQpIHJldHVybnMgKGJvb2wgb2spIHsKICAgICAgICByZXR1cm4gZGVsZWdhdGVDb250cmFjdC5kZWxlZ2F0ZWNhbGwoYnl0ZXM0KHNoYTMoImRlc3Ryb3lTdGFrZShhZGRyZXNzLGJ5dGVzMzIsdWludDI1Nix1aW50MjU2KSIpKSwgX3N0YWtlciwgX3RhZywgX3RvdXJuYW1lbnRJRCwgX3JvdW5kSUQpOwogICAgfQoKICAgIGZ1bmN0aW9uIG51bWVyYWlUcmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyKSByZXR1cm5zKGJvb2wgb2spIHsKICAgICAgICByZXR1cm4gZGVsZWdhdGVDb250cmFjdC5kZWxlZ2F0ZWNhbGwoYnl0ZXM0KHNoYTMoIm51bWVyYWlUcmFuc2ZlcihhZGRyZXNzLHVpbnQyNTYpIikpLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXcoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMykgcmV0dXJucyhib29sIG9rKSB7CiAgICAgICAgcmV0dXJuIGRlbGVnYXRlQ29udHJhY3QuZGVsZWdhdGVjYWxsKGJ5dGVzNChzaGEzKCJ3aXRoZHJhdyhhZGRyZXNzLGFkZHJlc3MsdWludDI1NikiKSksIF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlVG91cm5hbWVudCh1aW50MjU2IF90b3VybmFtZW50SUQpIHJldHVybnMgKGJvb2wgb2spIHsKICAgICAgICByZXR1cm4gZGVsZWdhdGVDb250cmFjdC5kZWxlZ2F0ZWNhbGwoYnl0ZXM0KHNoYTMoImNyZWF0ZVRvdXJuYW1lbnQodWludDI1NikiKSksIF90b3VybmFtZW50SUQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVJvdW5kKHVpbnQyNTYgX3RvdXJuYW1lbnRJRCwgdWludDI1NiBfcm91bmRJRCwgdWludDI1NiBfZW5kVGltZSwgdWludDI1NiBfcmVzb2x1dGlvblRpbWUpIHJldHVybnMgKGJvb2wgb2spIHsKICAgICAgICByZXR1cm4gZGVsZWdhdGVDb250cmFjdC5kZWxlZ2F0ZWNhbGwoYnl0ZXM0KHNoYTMoImNyZWF0ZVJvdW5kKHVpbnQyNTYsdWludDI1Nix1aW50MjU2LHVpbnQyNTYpIikpLCBfdG91cm5hbWVudElELCBfcm91bmRJRCwgX2VuZFRpbWUsIF9yZXNvbHV0aW9uVGltZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VG91cm5hbWVudCh1aW50MjU2IF90b3VybmFtZW50SUQpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYsIHVpbnQyNTZbXSkgewogICAgICAgIHZhciB0b3VybmFtZW50ID0gdG91cm5hbWVudHNbX3RvdXJuYW1lbnRJRF07CiAgICAgICAgcmV0dXJuICh0b3VybmFtZW50LmNyZWF0aW9uVGltZSwgdG91cm5hbWVudC5yb3VuZElEcyk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Um91bmQodWludDI1NiBfdG91cm5hbWVudElELCB1aW50MjU2IF9yb3VuZElEKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2LCB1aW50MjU2LCB1aW50MjU2KSB7CiAgICAgICAgdmFyIHJvdW5kID0gdG91cm5hbWVudHNbX3RvdXJuYW1lbnRJRF0ucm91bmRzW19yb3VuZElEXTsKICAgICAgICByZXR1cm4gKHJvdW5kLmNyZWF0aW9uVGltZSwgcm91bmQuZW5kVGltZSwgcm91bmQucmVzb2x1dGlvblRpbWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFN0YWtlKHVpbnQyNTYgX3RvdXJuYW1lbnRJRCwgdWludDI1NiBfcm91bmRJRCwgYWRkcmVzcyBfc3Rha2VyLCBieXRlczMyIF90YWcpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYsIHVpbnQyNTYsIGJvb2wsIGJvb2wpIHsKICAgICAgICB2YXIgc3Rha2UgPSB0b3VybmFtZW50c1tfdG91cm5hbWVudElEXS5yb3VuZHNbX3JvdW5kSURdLnN0YWtlc1tfc3Rha2VyXVtfdGFnXTsKICAgICAgICByZXR1cm4gKHN0YWtlLmNvbmZpZGVuY2UsIHN0YWtlLmFtb3VudCwgc3Rha2Uuc3VjY2Vzc2Z1bCwgc3Rha2UucmVzb2x2ZWQpOwogICAgfQoKICAgIC8vIEVSQzIwOiBTZW5kIGZyb20gYSBjb250cmFjdAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgc3RvcEluRW1lcmdlbmN5IG9ubHlQYXlsb2FkU2l6ZSgzKSByZXR1cm5zIChib29sIG9rKSB7CiAgICAgICAgcmVxdWlyZSghaXNPd25lcihfZnJvbSkgJiYgX2Zyb20gIT0gbnVtZXJhaSk7IC8vIFRyYW5zZmVyaW5nIGZyb20gTnVtZXJhaSBjYW4gb25seSBiZSBkb25lIHdpdGggdGhlIG51bWVyYWlUcmFuc2ZlciBmdW5jdGlvbgoKICAgICAgICAvLyBDaGVjayBmb3Igc3VmZmljaWVudCBmdW5kcy4KICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICAvLyBDaGVjayBmb3IgYXV0aG9yaXphdGlvbiB0byBzcGVuZC4KICAgICAgICByZXF1aXJlKGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSA9IHNhZmVTdWJ0cmFjdChiYWxhbmNlT2ZbX2Zyb21dLCBfdmFsdWUpOwogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3VidHJhY3QoYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZU9mW190b10sIF92YWx1ZSk7CgogICAgICAgIC8vIE5vdGlmeSBhbnlvbmUgbGlzdGVuaW5nLgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEVSQzIwOiBBbnlvbmUgd2l0aCBOTVIgY2FuIHRyYW5zZmVyIE5NUgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBzdG9wSW5FbWVyZ2VuY3kgb25seVBheWxvYWRTaXplKDIpIHJldHVybnMgKGJvb2wgb2spIHsKICAgICAgICAvLyBDaGVjayBmb3Igc3VmZmljaWVudCBmdW5kcy4KICAgICAgICByZXF1aXJlKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOwoKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBzYWZlU3VidHJhY3QoYmFsYW5jZU9mW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VPZltfdG9dID0gc2FmZUFkZChiYWxhbmNlT2ZbX3RvXSwgX3ZhbHVlKTsKCiAgICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcuCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBFUkMyMDogQWxsb3cgb3RoZXIgY29udHJhY3RzIHRvIHNwZW5kIG9uIHNlbmRlcidzIGJlaGFsZgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgc3RvcEluRW1lcmdlbmN5IG9ubHlQYXlsb2FkU2l6ZSgyKSByZXR1cm5zIChib29sIG9rKSB7CiAgICAgICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX29sZFZhbHVlLCB1aW50MjU2IF9uZXdWYWx1ZSkgc3RvcEluRW1lcmdlbmN5IG9ubHlQYXlsb2FkU2l6ZSgzKSByZXR1cm5zIChib29sIG9rKSB7CiAgICAgICAgcmVxdWlyZShhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IF9vbGRWYWx1ZSk7CiAgICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9uZXdWYWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX25ld1ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ=='.
	

]
