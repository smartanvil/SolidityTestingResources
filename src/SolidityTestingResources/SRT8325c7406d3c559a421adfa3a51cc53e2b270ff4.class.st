Class {
	#name : #SRT8325c7406d3c559a421adfa3a51cc53e2b270ff4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8325c7406d3c559a421adfa3a51cc53e2b270ff4 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICByZXR1cm4gYzsKICAgIH0KICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQoKY29udHJhY3QgRVJDMjAgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkge30KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7fQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gIDB4ZjQyQjgyRDAyYjhmM0U3OTgzYjNmN0UxMDAwY0UyOEVDM0Y4QzgxNTsKICAgIH0KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IFJlZnVuZFZhdWx0IGlzIE93bmFibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICBlbnVtIFN0YXRlIHsgQWN0aXZlLCBSZWZ1bmRpbmcsIENsb3NlZCB9CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkZXBvc2l0ZWQ7CiAgICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CiAgICBTdGF0ZSBwdWJsaWMgc3RhdGU7CiAgICBldmVudCBDbG9zZWQoKTsKICAgIGV2ZW50IFJlZnVuZHNFbmFibGVkKCk7CiAgICBldmVudCBSZWZ1bmRlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgd2VpQW1vdW50KTsKICAgIGZ1bmN0aW9uIFJlZnVuZFZhdWx0KGFkZHJlc3MgX3dhbGxldCkgcHVibGljIHsKICAgICAgICB3YWxsZXQgPSBfd2FsbGV0OwogICAgICAgIHN0YXRlID0gU3RhdGUuQWN0aXZlOwogICAgfQogICAgZnVuY3Rpb24gZGVwb3NpdChhZGRyZXNzIGludmVzdG9yKSBvbmx5T3duZXIgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsKICAgICAgICBkZXBvc2l0ZWRbaW52ZXN0b3JdID0gZGVwb3NpdGVkW2ludmVzdG9yXS5hZGQobXNnLnZhbHVlKTsKICAgIH0KICAgIGZ1bmN0aW9uIGNsb3NlKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5BY3RpdmUpOwogICAgICAgIHN0YXRlID0gU3RhdGUuQ2xvc2VkOwogICAgICAgIHdhbGxldC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgIENsb3NlZCgpOwogICAgfQogICAgZnVuY3Rpb24gZW5hYmxlUmVmdW5kcygpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsKICAgICAgICBzdGF0ZSA9IFN0YXRlLlJlZnVuZGluZzsKICAgICAgICBSZWZ1bmRzRW5hYmxlZCgpOwogICAgfQogICAgZnVuY3Rpb24gcmVmdW5kKGFkZHJlc3MgaW52ZXN0b3IpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5SZWZ1bmRpbmcpOwogICAgICAgIHVpbnQyNTYgZGVwb3NpdGVkVmFsdWUgPSBkZXBvc2l0ZWRbaW52ZXN0b3JdOwogICAgICAgIGRlcG9zaXRlZFtpbnZlc3Rvcl0gPSAwOwogICAgICAgIGludmVzdG9yLnRyYW5zZmVyKGRlcG9zaXRlZFZhbHVlKTsKICAgICAgICBSZWZ1bmRlZChpbnZlc3RvciwgZGVwb3NpdGVkVmFsdWUpOwogICAgfQp9Cgpjb250cmFjdCBHcnlwaG9uIGlzIEVSQzIwLCBPd25hYmxlIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBSZWZ1bmRWYXVsdCBwdWJsaWMgdmF1bHQ7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHZlc3RlZDsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSB0b3RhbF92ZXN0ZWQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgdWludDI1NiB0b3RhbFN1cHBseV87IC8vIG9mIGh1cnRsZSB0b2tlbgoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICdHcnlwaG9uJzsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gJ0dYQyc7CiAgICB1aW50MjU2IHB1YmxpYyBkZWNpbWFscyA9IDQ7CiAgICB1aW50MjU2IHB1YmxpYyBpbml0aWFsU3VwcGx5ID0gMjAwMDAwMDAwMDsgLy8yYmlsbGlvbgoKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0OwogICAgdWludDI1NiBwdWJsaWMgZHVyYXRpb247CgogICAgdWludDI1NiBwdWJsaWMgcmF0ZUlDTyA9IDkxMDAwMDAwMDAwMDAwMDsgLy8xIGV0aGVyID0gMTEwMCBHUkMKCiAgICB1aW50MjU2IHB1YmxpYyBwcmVTYWxlTWF4Q2FwSW5XZWkgPSAyNTAwIGV0aGVyOy8vNTI0MDAgZXRoZXI7CiAgICB1aW50MjU2IHB1YmxpYyBwcmVTYWxlUmFpc2VkID0gMDsKCiAgICB1aW50MjU2IHB1YmxpYyBpY29Tb2Z0Q2FwSW5XZWkgPSAyNTAwIGV0aGVyOy8vNTI0MDAgZXRoZXI7IC8vMSBtaWxsaW9uIGdicAogICAgdWludDI1NiBwdWJsaWMgaWNvSGFyZENhcEluV2VpID0gMTIyNDAwIGV0aGVyOyAvLzEyIG1pbGxpb24gZ2JwCiAgICB1aW50MjU2IHB1YmxpYyBpY29SYWlzZWQgPSAwOwoKICAgIHVpbnQyNTYgcHVibGljIHByZXNhbGVTdGFydFRpbWVzdGFtcDsKICAgIHVpbnQyNTYgcHVibGljIHByZXNhbGVFbmRUaW1lc3RhbXA7CiAgICB1aW50MjU2IHB1YmxpYyBpY29TdGFydFRpbWVzdGFtcDsKICAgIHVpbnQyNTYgcHVibGljIGljb0VuZFRpbWVzdGFtcDsKCiAgICB1aW50MjU2IHB1YmxpYyBwcmVzYWxlVG9rZW5MaW1pdDsKICAgIHVpbnQyNTYgcHVibGljIGljb1Rva2VuTGltaXQ7CgogICAgdWludDI1NiBwdWJsaWMgaW52ZXN0b3JDb3VudDsKCiAgICBlbnVtIFN0YXRlIHtVbmtub3duLCBQcmVwYXJpbmcsIFByZVNhbGUsIElDTywgU3VjY2VzcywgRmFpbHVyZSwgUHJlc2FsZUZpbmFsaXplZCwgSUNPRmluYWxpemVkfQoKICAgIFN0YXRlIHB1YmxpYyBjcm93ZFNhbGVTdGF0ZTsKCiAgICBtb2RpZmllciBub25aZXJvKCkgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBHcnlwaG9uKCkgcHVibGljIHsKCiAgICAgICAgb3duZXIgPSAweGY0MkI4MkQwMmI4ZjNFNzk4M2IzZjdFMTAwMGNFMjhFQzNGOEM4MTU7CiAgICAgICAgdmF1bHQgPSBuZXcgUmVmdW5kVmF1bHQoMHg2Y0Q2QjAzRDE2RTRCRTA4MTU5NDEyYTdFMjkwRjFFQTIzNDQ2QmYyKTsgLy9hZGRyZXNzIG9mIHdhbGxldCBpbiB3aGljaCBwcm9jZXNzIHdpbGwgZ28gaW4gY2FzZSBvZiBzdWNjZXNzCgogICAgICAgIHRvdGFsU3VwcGx5XyA9IGluaXRpYWxTdXBwbHkqKDEwKipkZWNpbWFscyk7IC8vVGhlIHRvdGFsIHN1cHBseSBkZWZpbmVkIGluIGJhc2UgdG9rZW4KCiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gdG90YWxTdXBwbHlfOwoKICAgICAgICBwcmVzYWxlU3RhcnRUaW1lc3RhbXAgPSAxNTI1MDQ2NDAwOwogICAgICAgIHByZXNhbGVFbmRUaW1lc3RhbXAgPSBwcmVzYWxlU3RhcnRUaW1lc3RhbXAgKyAzMCAqIDEgZGF5czsKCiAgICAgICAgaWNvU3RhcnRUaW1lc3RhbXAgPSBwcmVzYWxlRW5kVGltZXN0YW1wICsgMSBkYXlzOwogICAgICAgIGljb0VuZFRpbWVzdGFtcCA9IGljb1N0YXJ0VGltZXN0YW1wICsgOTAgKiAxIGRheXM7CgogICAgICAgIGNyb3dkU2FsZVN0YXRlID0gU3RhdGUuUHJlcGFyaW5nOwoKICAgICAgICBzdGFydCA9IDE1MjUwNDY0MDA7CiAgICAgICAgZHVyYXRpb24gPSAyMzMyODAwMDsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBub25aZXJvIHBheWFibGUgewogICAgICAgIGVudGVyKCk7CiAgICB9CgogICAgZnVuY3Rpb24gZW50ZXIoKSBwdWJsaWMgbm9uWmVybyBwYXlhYmxlIHsKICAgICAgICAvL3Rlc3QgPSBtc2cudmFsdWU7CiAgICAgICAgaWYoaXNQcmVTYWxlUGVyaW9kKCkpIHsKCiAgICAgICAgICAgIGlmKGNyb3dkU2FsZVN0YXRlID09IFN0YXRlLlByZXBhcmluZykgewogICAgICAgICAgICAgICAgY3Jvd2RTYWxlU3RhdGUgPSBTdGF0ZS5QcmVTYWxlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoaXNJQ09QZXJpb2QoKSkgewogICAgICAgICAgICBpZihjcm93ZFNhbGVTdGF0ZSA9PSBTdGF0ZS5QcmVzYWxlRmluYWxpemVkKSB7CiAgICAgICAgICAgICAgICBjcm93ZFNhbGVTdGF0ZSA9IFN0YXRlLklDTzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBfcmVjaXBpZW50LCB1aW50MjU2IF92YWx1ZSkgaW50ZXJuYWwgbm9uWmVybyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICB1aW50MjU2IGJvdWdodFRva2VucyA9IGNhbGN1bGF0ZVRva2VucyhfdmFsdWUpOwogICAgICAgIHJlcXVpcmUoYm91Z2h0VG9rZW5zICE9IDApOwogICAgICAgIGJvdWdodFRva2VucyA9IGJvdWdodFRva2VucyooMTAqKmRlY2ltYWxzKTsKCiAgICAgICAgaWYoYmFsYW5jZU9mKF9yZWNpcGllbnQpID09IDApIHsKICAgICAgICAgICAgaW52ZXN0b3JDb3VudCsrOwogICAgICAgIH0KCiAgICAgICAgaWYoaXNDcm93ZFNhbGVTdGF0ZVByZVNhbGUoKSkgewogICAgICAgICAgICB0cmFuc2ZlclRva2VucyhfcmVjaXBpZW50LCBib3VnaHRUb2tlbnMpOwogICAgICAgICAgICB2YXVsdC5kZXBvc2l0LnZhbHVlKF92YWx1ZSkoX3JlY2lwaWVudCk7CiAgICAgICAgICAgIHByZVNhbGVSYWlzZWQgPSBwcmVTYWxlUmFpc2VkLmFkZChfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGlzQ3Jvd2RTYWxlU3RhdGVJQ08oKSkgewogICAgICAgICAgICB0cmFuc2ZlclRva2VucyhfcmVjaXBpZW50LCBib3VnaHRUb2tlbnMpOwogICAgICAgICAgICB2YXVsdC5kZXBvc2l0LnZhbHVlKF92YWx1ZSkoX3JlY2lwaWVudCk7CiAgICAgICAgICAgIGljb1JhaXNlZCA9IGljb1JhaXNlZC5hZGQoX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9rZW5zKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiB0b2tlbnNfaW5fY2VudHMpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKAogICAgICAgICAgICB0b2tlbnNfaW5fY2VudHMgPiAwCiAgICAgICAgICAgICYmIF9yZWNpcGllbnQgIT0gb3duZXIKICAgICAgICAgICAgJiYgdG9rZW5zX2luX2NlbnRzIDwgYmFsYW5jZXNbb3duZXJdCiAgICAgICAgKTsKCiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLnN1Yih0b2tlbnNfaW5fY2VudHMpOwoKICAgICAgICAvL2FkZCB2ZXN0aW5nIGhlcmUKICAgICAgICBiYWxhbmNlc1tfcmVjaXBpZW50XSA9IGJhbGFuY2VzW19yZWNpcGllbnRdLmFkZCh0b2tlbnNfaW5fY2VudHMpOwogICAgICAgIGdldFZlc3RlZChfcmVjaXBpZW50KTsKCiAgICAgICAgVHJhbnNmZXIob3duZXIsIF9yZWNpcGllbnQsIHRva2Vuc19pbl9jZW50cyk7IC8vYWN0dWFsIGZ1bmN0aW9uIHRoYXQgZG9lcyB0aGUgdHJhbnNmZXIKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRWZXN0ZWQoYWRkcmVzcyBfYmVuZWZpY2lhcnkpIHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfYmVuZWZpY2lhcnldPjApOwogICAgICAgIGlmIChfYmVuZWZpY2lhcnkgPT0gb3duZXIpewoKICAgICAgICAgICAgdmVzdGVkW293bmVyXSA9IGJhbGFuY2VzW293bmVyXTsKICAgICAgICAgICAgdG90YWxfdmVzdGVkW293bmVyXSA9IGJhbGFuY2VzW293bmVyXTsKCiAgICAgICAgfSBlbHNlIGlmIChibG9jay50aW1lc3RhbXAgPCBzdGFydCkgewoKICAgICAgICAgICAgdmVzdGVkW19iZW5lZmljaWFyeV0gPSAwOwogICAgICAgICAgICB0b3RhbF92ZXN0ZWRbX2JlbmVmaWNpYXJ5XSA9IDA7CgogICAgICAgIH0gZWxzZSBpZiAoYmxvY2sudGltZXN0YW1wID49IHN0YXJ0LmFkZChkdXJhdGlvbikpIHsKCiAgICAgICAgICAgIHRvdGFsX3Zlc3RlZFtfYmVuZWZpY2lhcnldID0gYmFsYW5jZXNbX2JlbmVmaWNpYXJ5XTsKICAgICAgICAgICAgdmVzdGVkW19iZW5lZmljaWFyeV0gPSBiYWxhbmNlc1tfYmVuZWZpY2lhcnldOwoKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgdWludCB2ZXN0ZWRfbm93ID0gYmFsYW5jZXNbX2JlbmVmaWNpYXJ5XS5tdWwoYmxvY2sudGltZXN0YW1wLnN1YihzdGFydCkpLmRpdihkdXJhdGlvbik7CiAgICAgICAgICAgIGlmKHRvdGFsX3Zlc3RlZFtfYmVuZWZpY2lhcnldPT0wKXsKICAgICAgICAgICAgICAgIHRvdGFsX3Zlc3RlZFtfYmVuZWZpY2lhcnldID0gdmVzdGVkX25vdzsKCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodmVzdGVkX25vdyA+IHRvdGFsX3Zlc3RlZFtfYmVuZWZpY2lhcnldKXsKICAgICAgICAgICAgICAgIHZlc3RlZFtfYmVuZWZpY2lhcnldID0gdmVzdGVkW19iZW5lZmljaWFyeV0uYWRkKHZlc3RlZF9ub3cuc3ViKHRvdGFsX3Zlc3RlZFtfYmVuZWZpY2lhcnldKSk7CiAgICAgICAgICAgICAgICB0b3RhbF92ZXN0ZWRbX2JlbmVmaWNpYXJ5XSA9IHZlc3RlZF9ub3c7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZlc3RlZFtfYmVuZWZpY2lhcnldOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbnNfaW5fY2VudHMpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG9rZW5zX2luX2NlbnRzID4gMCk7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gbXNnLnNlbmRlcik7CiAgICAgICAgZ2V0VmVzdGVkKG1zZy5zZW5kZXIpOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3Rva2Vuc19pbl9jZW50cyk7CiAgICAgICAgcmVxdWlyZSh2ZXN0ZWRbbXNnLnNlbmRlcl0gPj0gX3Rva2Vuc19pbl9jZW50cyk7CgogICAgICAgIGlmKGJhbGFuY2VPZihfdG8pID09IDApIHsgIC8vaW5jcmVhc2UgaW52ZXN0ZXIgY291bnQgaWYgbmV3IGludmVzdGVyCiAgICAgICAgICAgIGludmVzdG9yQ291bnQrKzsKICAgICAgICB9CgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIHZlc3RlZFttc2cuc2VuZGVyXSA9IHZlc3RlZFttc2cuc2VuZGVyXS5zdWIoX3Rva2Vuc19pbl9jZW50cyk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF90b2tlbnNfaW5fY2VudHMpOwoKICAgICAgICBpZihiYWxhbmNlT2YobXNnLnNlbmRlcikgPT0gMCkgeyAvL3VwZGF0ZSBpbnZlc3RlciBjb3VudAogICAgICAgICAgICBpbnZlc3RvckNvdW50PWludmVzdG9yQ291bnQtMTsKICAgICAgICB9CgogICAgICAgIC8vVE9ETzogaW5jcmVtZW50IHJhaXNlZCB2YWx1ZXMgaGVyZQoKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5zX2luX2NlbnRzKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShfdG9rZW5zX2luX2NlbnRzID4gMCk7CiAgICAgICAgcmVxdWlyZShfZnJvbSAhPSBfdG8pOwogICAgICAgIGdldFZlc3RlZChfZnJvbSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3Rva2Vuc19pbl9jZW50cyk7CiAgICAgICAgcmVxdWlyZSh2ZXN0ZWRbX2Zyb21dID49IF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIHJlcXVpcmUoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3Rva2Vuc19pbl9jZW50cyk7CgogICAgICAgIGlmKGJhbGFuY2VPZihfdG8pID09IDApIHsgIC8vaW5jcmVhc2UgaW52ZXN0ZXIgY291bnQgaWYgbmV3IGludmVzdGVyCiAgICAgICAgICAgIGludmVzdG9yQ291bnQrKzsKICAgICAgICB9CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3Rva2Vuc19pbl9jZW50cyk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3Rva2Vuc19pbl9jZW50cyk7CiAgICAgICAgdmVzdGVkW19mcm9tXSA9IHZlc3RlZFtfZnJvbV0uc3ViKF90b2tlbnNfaW5fY2VudHMpOwoKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3Rva2Vuc19pbl9jZW50cyk7CgogICAgICAgIGlmKGJhbGFuY2VPZihfZnJvbSkgPT0gMCkgeyAvL3VwZGF0ZSBpbnZlc3RlciBjb3VudAogICAgICAgICAgICBpbnZlc3RvckNvdW50PWludmVzdG9yQ291bnQtMTsKICAgICAgICB9CgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdG9rZW5zX2luX2NlbnRzKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKHZlc3RlZFttc2cuc2VuZGVyXSA+PSBfdG9rZW5zX2luX2NlbnRzKTsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF90b2tlbnNfaW5fY2VudHM7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVUb2tlbnModWludDI1NiBfYW1vdW50KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHRva2Vucyl7CiAgICAgICAgaWYoY3Jvd2RTYWxlU3RhdGUgPT0gU3RhdGUuUHJlcGFyaW5nICYmIGlzUHJlU2FsZVBlcmlvZCgpKSB7CiAgICAgICAgICAgIGNyb3dkU2FsZVN0YXRlID0gU3RhdGUuUHJlU2FsZTsKICAgICAgICB9CiAgICAgICAgaWYoaXNDcm93ZFNhbGVTdGF0ZVByZVNhbGUoKSkgewogICAgICAgICAgICB0b2tlbnMgPSBfYW1vdW50LmRpdihyYXRlSUNPKTsKICAgICAgICB9IGVsc2UgaWYgKGlzQ3Jvd2RTYWxlU3RhdGVJQ08oKSkgewogICAgICAgICAgICB0b2tlbnMgPSBfYW1vdW50LmRpdihyYXRlSUNPKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0b2tlbnMgPSAwOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRSZWZ1bmQoYWRkcmVzcyBfcmVjaXBpZW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCl7CiAgICAgICAgcmVxdWlyZShjcm93ZFNhbGVTdGF0ZSA9PSBTdGF0ZS5GYWlsdXJlKTsKICAgICAgICByZXF1aXJlKHJlZnVuZGVkQW1vdW50KF9yZWNpcGllbnQpKTsKICAgICAgICB2YXVsdC5yZWZ1bmQoX3JlY2lwaWVudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kZWRBbW91bnQoYWRkcmVzcyBfcmVjaXBpZW50KSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfcmVjaXBpZW50XSAhPSAwKTsKICAgICAgICBiYWxhbmNlc1tfcmVjaXBpZW50XSA9IDA7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHRvdGFsU3VwcGx5XzsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBhKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbYV07CiAgICB9CgoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gU3RhdGUgRnVuY3Rpb25zIC8vCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvKiogQ2hlY2sgdGhlIHN0YXRlIG9mIHRoZSBDb250cmFjdCwgaWYgaW4gUHJlIFNhbGUKICAgICAgKiBAcmV0dXJuIGJvb2wgIFJldHVybiB0cnVlIGlmIHRoZSBjb250cmFjdCBpcyBpbiBQcmUgU2FsZQogICAgICAqLwoKICAgIGZ1bmN0aW9uIGlzQ3Jvd2RTYWxlU3RhdGVQcmVTYWxlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gY3Jvd2RTYWxlU3RhdGUgPT0gU3RhdGUuUHJlU2FsZTsKICAgIH0KCiAgICAvKiogQ2hlY2sgdGhlIHN0YXRlIG9mIHRoZSBDb250cmFjdCwgaWYgaW4gSUNPCiAgICAgICogQHJldHVybiBib29sICBSZXR1cm4gdHJ1ZSBpZiB0aGUgY29udHJhY3QgaXMgaW4gSUNPCiAgICAgICovCgogICAgZnVuY3Rpb24gaXNDcm93ZFNhbGVTdGF0ZUlDTygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGNyb3dkU2FsZVN0YXRlID09IFN0YXRlLklDTzsKICAgIH0KCiAgICAvKiogQ2hlY2sgaWYgdGhlIFByZSBTYWxlIFBlcmlvZCBpcyBzdGlsbCBPTgogICAgICAqIEByZXR1cm4gYm9vbCAgUmV0dXJuIHRydWUgaWYgdGhlIGNvbnRyYWN0IGlzIGluIFByZSBTYWxlIFBlcmlvZAogICAgICAqLwoKICAgIGZ1bmN0aW9uIGlzUHJlU2FsZVBlcmlvZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYocHJlU2FsZVJhaXNlZCA+IHByZVNhbGVNYXhDYXBJbldlaSB8fCBub3cgPj0gcHJlc2FsZUVuZFRpbWVzdGFtcCkgewogICAgICAgICAgICBjcm93ZFNhbGVTdGF0ZSA9IFN0YXRlLlByZXNhbGVGaW5hbGl6ZWQ7CiAgICAgICAgICAgIC8vaWNvU3RhcnRUaW1lc3RhbXAgPSBub3cuc3ViKDEwKTsgLy9DT05GSVJNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gbm93ID4gcHJlc2FsZVN0YXJ0VGltZXN0YW1wOwogICAgICAgIH0KICAgIH0KCiAgICAvKiogQ2hlY2sgaWYgdGhlIElDTyBpcyBpbiB0aGUgU2FsZSBwZXJpb2Qgb3Igbm90CiAgICAgICogQHJldHVybiBib29sICBSZXR1cm4gdHJ1ZSBpZiB0aGUgY29udHJhY3QgaXMgaW4gSUNPIFBlcmlvZAogICAgICAqLwoKICAgIGZ1bmN0aW9uIGlzSUNPUGVyaW9kKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoaWNvUmFpc2VkID4gaWNvSGFyZENhcEluV2VpIHx8IG5vdyA+PSBpY29FbmRUaW1lc3RhbXApewogICAgICAgICAgICBjcm93ZFNhbGVTdGF0ZSA9IFN0YXRlLklDT0ZpbmFsaXplZDsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBub3cgPiBpY29TdGFydFRpbWVzdGFtcDsKICAgICAgICB9CiAgICB9CgogICAgLy8gQ2FsbGVkIGJ5IHRoZSBvd25lciBvZiB0aGUgY29udHJhY3QgdG8gY2xvc2UgdGhlIFNhbGUKICAgIGZ1bmN0aW9uIGVuZENyb3dkU2FsZSgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobm93ID49IGljb0VuZFRpbWVzdGFtcCB8fCBpY29SYWlzZWQgPj0gaWNvU29mdENhcEluV2VpKTsKICAgICAgICBpZihpY29SYWlzZWQgPj0gaWNvU29mdENhcEluV2VpKXsKICAgICAgICAgICAgY3Jvd2RTYWxlU3RhdGUgPSBTdGF0ZS5TdWNjZXNzOwogICAgICAgICAgICB2YXVsdC5jbG9zZSgpOyAvL3NlbmQgZnVuZHMgdG8gb3duZXIKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjcm93ZFNhbGVTdGF0ZSA9IFN0YXRlLkZhaWx1cmU7CiAgICAgICAgICAgIHZhdWx0LmVuYWJsZVJlZnVuZHMoKTsgLy9hbGxvdyBwZW9wbGUgdG8gZ2V0IHJlZnVuZAogICAgICAgIH0KICAgIH0KCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gRmV0Y2ggc29tZSBzdGF0aXN0aWNzIGFib3V0IHRoZSBJQ08gLy8KICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgZnVuY3Rpb24gZ2V0SW52ZXN0b3JDb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGludmVzdG9yQ291bnQ7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UHJlc2FsZVJhaXNlZEFtb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHByZVNhbGVSYWlzZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SUNPUmFpc2VkQW1vdW50KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gaWNvUmFpc2VkOwogICAgfQoKfQ=='.
	

]
