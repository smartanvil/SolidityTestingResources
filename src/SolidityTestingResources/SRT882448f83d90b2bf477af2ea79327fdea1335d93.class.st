Class {
	#name : #SRT882448f83d90b2bf477af2ea79327fdea1335d93,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT882448f83d90b2bf477af2ea79327fdea1335d93 >> base64 [
	^ 'Y29udHJhY3QgU2FmZU1hdGggewoKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludDI1NiB4LCB1aW50MjU2IHkpIGludGVybmFsIHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgeiA9IHggKyB5OwogICAgICAgIGFzc2VydCgoeiA+PSB4KSAmJiAoeiA+PSB5KSk7CiAgICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZVN1YnRyYWN0KHVpbnQyNTYgeCwgdWludDI1NiB5KSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoeCA+PSB5KTsKICAgICAgICB1aW50MjU2IHogPSB4IC0geTsKICAgICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlTXVsdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0geCAqIHk7CiAgICAgICAgYXNzZXJ0KCh4ID09IDApfHwoei94ID09IHkpKTsKICAgICAgICByZXR1cm4gejsKICAgIH0KfQoKY29udHJhY3QgVG9rZW4gewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9CgovKiAgRVJDIDIwIHRva2VuICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4sIFNhZmVNYXRoIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IG51bXdvcmRzKSB7CiAgICAgICAgYXNzZXJ0KG1zZy5kYXRhLmxlbmd0aCA9PSBudW13b3JkcyAqIDMyICsgNCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YnRyYWN0KGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3VidHJhY3QoYmFsYW5jZXNbX2Zyb21dLCBfdmFsdWUpOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWJ0cmFjdChhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpCiAgICBvbmx5UGF5bG9hZFNpemUoMikKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpCiAgICBjb25zdGFudAogICAgb25seVBheWxvYWRTaXplKDIpCiAgICByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykKICAgIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KfQpjb250cmFjdCBWaWJlQ29pbiB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAge30KfQoKCmNvbnRyYWN0IFZJQkVYVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgLy8gVG9rZW4gbWV0YWRhdGEKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJWSUJFWCBFeGNoYW5nZSBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJWSUJFWCI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIC8vIERlcG9zaXQgYWRkcmVzcyBvZiBhY2NvdW50IGNvbnRyb2xsZWQgYnkgdGhlIGNyZWF0b3JzCiAgICBhZGRyZXNzIHB1YmxpYyBldGhGdW5kRGVwb3NpdCA9IDB4RkMxQ0NkY0E2YjQ2NzA1MTY1MDQ0MDkzNDFBMzFlNDQ0RkY2ZjQzRjsKICAgIGFkZHJlc3MgcHVibGljIHRva2VuRXhjaGFuZ2VBZGRyZXNzID0gMHhlOGZmNWM5Yzc1ZGViMzQ2YWNhYzQ5M2M0NjNjODk1MGJlMDNkZmJhOwogICAgYWRkcmVzcyBwdWJsaWMgdG9rZW5BY2NvdW50QWRkcmVzcyA9IDB4RkMxQ0NkY0E2YjQ2NzA1MTY1MDQ0MDkzNDFBMzFlNDQ0RkY2ZjQzRjsKICAgIC8vQWNjZXNzIHRvIHRva2VuIGNvbnRyYWN0IGZvciB2aWJlIGV4Y2hhbmdlCiAgICBWaWJlQ29pbiBwdWJsaWMgdG9rZW5FeGNoYW5nZTsKCiAgICAvLyBGdW5kcmFpc2luZyBwYXJhbWV0ZXJzCiAgICBlbnVtIENvbnRyYWN0U3RhdGUgeyBGdW5kcmFpc2luZywgRmluYWxpemVkLCBSZWRlZW1pbmcsIFBhdXNlZCB9CiAgICBDb250cmFjdFN0YXRlIHB1YmxpYyBzdGF0ZTsgICAgICAgICAgIC8vIEN1cnJlbnQgc3RhdGUgb2YgdGhlIGNvbnRyYWN0CiAgICBDb250cmFjdFN0YXRlIHByaXZhdGUgc2F2ZWRTdGF0ZTsgICAgIC8vIFN0YXRlIG9mIHRoZSBjb250cmFjdCBiZWZvcmUgcGF1c2UKCiAgICAvL3N0YXJ0IGRhdGU6IDA4LzA3LzIwMTcgQCAxMjowMGFtIChVVEMpCiAgICB1aW50IHB1YmxpYyBzdGFydERhdGUgPSAxNTAyMDY0MDAwOwogICAgLy9zdGFydCBkYXRlOiAwOS8yMS8yMDE3IEAgMTE6NTlwbSAoVVRDKQogICAgdWludCBwdWJsaWMgZW5kRGF0ZSA9IDE1MDYwMzgzOTk7CiAgICAvL2RlYWRsaW5lcyAxOiAwOC8yMS8yMDE3IEAgMTE6NTlwbSAoVVRDKSArMzAlCiAgICAvL2RlYWRsaW5lcyAyOiAwOC8yOC8yMDE3IEAgMTE6NTlwbSAoVVRDKSArMjAlCiAgICAvL2RlYWRsaW5lcyAzOiAwOS8wNS8yMDE3IEAgMTE6NTlwbSAoVVRDKSArMTAlCiAgICAvL2RlYWRsaW5lcyA0OiAwOS8xMi8yMDE3IEAgMTE6NTlwbSAoVVRDKSArNSUKICAgIC8vZGVhZGxpbmVzIDU6IDA5LzIxLzIwMTcgQCAxMTo1OXBtIChVVEMpICswJQogICAgdWludFs1XSBwdWJsaWMgZGVhZGxpbmVzID0gWzE1MDMzNTk5OTksIDE1MDM5NjQ3OTksIDE1MDQ2NTU5OTksIDE1MDUyNjA3OTksIDE1MDYwMzgzOTldOwoJdWludFs1XSBwdWJsaWMgcHJpY2VzID0gWzEzMCwgMTIwLCAxMTAsIDEwNSwgMTAwXTsKICAgIAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgRVRIX1JFQ0VJVkVEX0NBUCA9IDExNSAqICgxMCoqMykgKiAxMCoqZGVjaW1hbHM7IC8vIDExNSAwMDAgRVRICiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBFVEhfUkVDRUlWRURfTUlOID0gMDsvLzEgKiAxMCoqZGVjaW1hbHM7IC8vIDAgRVRICiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9NSU4gPSAxICogMTAqKmRlY2ltYWxzOyAvLyAxIFZJQkVYCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBNSU5fRVRIX1RSQU5TID0gMjUgKiAxMCoqZGVjaW1hbHM7IC8vIDI1IEVUSAoKICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiBob3cgbXVjaCBldGhlciBoYXZlIGJlZW4gY29udHJpYnV0ZWQsIHNpbmNlIHdlIGhhdmUgYSBjYXAgZm9yIEVUSCB0b28KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsUmVjZWl2ZWRFdGggPSAwOwoKICAgIC8vIFNpbmNlIHdlIGhhdmUgZGlmZmVyZW50IGV4Y2hhbmdlIHJhdGVzIGF0IGRpZmZlcmVudCBzdGFnZXMsIHdlIG5lZWQgdG8ga2VlcCB0cmFjawogICAgLy8gb2YgaG93IG11Y2ggZXRoZXIgZWFjaCBjb250cmlidXRlZCBpbiBjYXNlIHRoYXQgd2UgbmVlZCB0byBpc3N1ZSBhIHJlZnVuZAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIGV0aEJhbGFuY2VzOwoKICAgIC8vIEV2ZW50cyB1c2VkIGZvciBsb2dnaW5nCiAgICBldmVudCBMb2dDcmVhdGVWSUJFWChhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBMb2dSZWRlZW1WSUJFKGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlLCB1aW50MjU2IF92YWx1ZTIsIHVpbnQyNTYgX3ZhbHVlMyk7CgogICAgbW9kaWZpZXIgaXNGaW5hbGl6ZWQoKSB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBDb250cmFjdFN0YXRlLkZpbmFsaXplZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpc0Z1bmRyYWlzaW5nKCkgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gQ29udHJhY3RTdGF0ZS5GdW5kcmFpc2luZyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpc1JlZGVlbWluZygpIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IENvbnRyYWN0U3RhdGUuUmVkZWVtaW5nKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGlzUGF1c2VkKCkgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gQ29udHJhY3RTdGF0ZS5QYXVzZWQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbm90UGF1c2VkKCkgewogICAgICAgIHJlcXVpcmUoc3RhdGUgIT0gQ29udHJhY3RTdGF0ZS5QYXVzZWQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaXNGdW5kcmFpc2luZ0lnbm9yZVBhdXNlZCgpIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IENvbnRyYWN0U3RhdGUuRnVuZHJhaXNpbmcgfHwgKHN0YXRlID09IENvbnRyYWN0U3RhdGUuUGF1c2VkICYmIHNhdmVkU3RhdGUgPT0gQ29udHJhY3RTdGF0ZS5GdW5kcmFpc2luZykpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBldGhGdW5kRGVwb3NpdCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBtaW5pbXVtUmVhY2hlZCgpIHsKICAgICAgICByZXF1aXJlKHRvdGFsUmVjZWl2ZWRFdGggPj0gRVRIX1JFQ0VJVkVEX01JTik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gVklCRVhUb2tlbigpCiAgICB7CiAgICAgICAgLy8gQ29udHJhY3Qgc3RhdGUKICAgICAgICBzdGF0ZSA9IENvbnRyYWN0U3RhdGUuRnVuZHJhaXNpbmc7CiAgICAgICAgc2F2ZWRTdGF0ZSA9IENvbnRyYWN0U3RhdGUuRnVuZHJhaXNpbmc7CiAgICAgICAgdG9rZW5FeGNoYW5nZSA9IFZpYmVDb2luKHRva2VuRXhjaGFuZ2VBZGRyZXNzKTsKICAgICAgICB0b3RhbFN1cHBseSA9IDA7CiAgICB9CgogICAgLy8gT3ZlcnJpZGRlbiBtZXRob2QgdG8gY2hlY2sgZm9yIGVuZCBvZiBmdW5kcmFpc2luZyBiZWZvcmUgYWxsb3dpbmcgdHJhbnNmZXIgb2YgdG9rZW5zCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpCiAgICBpc0ZpbmFsaXplZCAvLyBPbmx5IGFsbG93IHRva2VuIHRyYW5zZmVyIGFmdGVyIHRoZSBmdW5kcmFpc2luZyBoYXMgZW5kZWQKICAgIG9ubHlQYXlsb2FkU2l6ZSgyKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICB9CgoKICAgIC8vIE92ZXJyaWRkZW4gbWV0aG9kIHRvIGNoZWNrIGZvciBlbmQgb2YgZnVuZHJhaXNpbmcgYmVmb3JlIGFsbG93aW5nIHRyYW5zZmVyIG9mIHRva2VucwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkKICAgIGlzRmluYWxpemVkIC8vIE9ubHkgYWxsb3cgdG9rZW4gdHJhbnNmZXIgYWZ0ZXIgdGhlIGZ1bmRyYWlzaW5nIGhhcyBlbmRlZAogICAgb25seVBheWxvYWRTaXplKDMpCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQogICAgCiAgICAvLy8gQGRldiBBY2NlcHRzIGV0aGVyIGFuZCBjcmVhdGVzIG5ldyBWSUJFWCB0b2tlbnMKICAgIGZ1bmN0aW9uICgpCiAgICBwYXlhYmxlCiAgICBleHRlcm5hbAogICAgaXNGdW5kcmFpc2luZwogICAgewogICAgICAgIHJlcXVpcmUobm93ID49IHN0YXJ0RGF0ZSk7CiAgICAgICAgcmVxdWlyZShub3cgPD0gZW5kRGF0ZSk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgICAgICAKICAgICAgICBpZihtc2cudmFsdWUgPCBNSU5fRVRIX1RSQU5TICYmIG5vdyA8IGRlYWRsaW5lc1swXSkgdGhyb3c7CgogICAgICAgIC8vIEZpcnN0IHdlIGNoZWNrIHRoZSBFVEggY2FwLCBhcyBpdCdzIGVhc2llciB0byBjYWxjdWxhdGUsIHJldHVybgogICAgICAgIC8vIHRoZSBjb250cmlidXRpb24gaWYgdGhlIGNhcCBoYXMgYmVlbiByZWFjaGVkIGFscmVhZHkKICAgICAgICB1aW50MjU2IGNoZWNrZWRSZWNlaXZlZEV0aCA9IHNhZmVBZGQodG90YWxSZWNlaXZlZEV0aCwgbXNnLnZhbHVlKTsKICAgICAgICByZXF1aXJlKGNoZWNrZWRSZWNlaXZlZEV0aCA8PSBFVEhfUkVDRUlWRURfQ0FQKTsKCiAgICAgICAgLy8gSWYgYWxsIGlzIGZpbmUgd2l0aCB0aGUgRVRIIGNhcCwgd2UgY29udGludWUgdG8gY2hlY2sgdGhlCiAgICAgICAgLy8gbWluaW11bSBhbW91bnQgb2YgdG9rZW5zCiAgICAgICAgdWludDI1NiB0b2tlbnMgPSBzYWZlTXVsdChtc2cudmFsdWUsIGdldEN1cnJlbnRUb2tlblByaWNlKCkpOwogICAgICAgIHJlcXVpcmUodG9rZW5zID49IFRPS0VOX01JTik7CgogICAgICAgIC8vIE9ubHkgd2hlbiBhbGwgdGhlIGNoZWNrcyBoYXZlIHBhc3NlZCwgdGhlbiB3ZSB1cGRhdGUgdGhlIHN0YXRlIChldGhCYWxhbmNlcywKICAgICAgICAvLyB0b3RhbFJlY2VpdmVkRXRoLCB0b3RhbFN1cHBseSwgYW5kIGJhbGFuY2VzKSBvZiB0aGUgY29udHJhY3QKICAgICAgICBldGhCYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVBZGQoZXRoQmFsYW5jZXNbbXNnLnNlbmRlcl0sIG1zZy52YWx1ZSk7CiAgICAgICAgdG90YWxSZWNlaXZlZEV0aCA9IGNoZWNrZWRSZWNlaXZlZEV0aDsKICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIHRva2Vucyk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gdG9rZW5zOyAgLy8gc2FmZUFkZCBub3QgbmVlZGVkOyBiYWQgc2VtYW50aWNzIHRvIHVzZSBoZXJlCiAgICAgICAgCiAgICAgICAgLy8gU2VuZCB0aGUgRVRIIHRvIFZpYmVodWIgQ3JlYXRvcnMKICAgICAgICBldGhGdW5kRGVwb3NpdC50cmFuc2Zlcihtc2cudmFsdWUpOwoKICAgICAgICAvLyBMb2cgdGhlIGNyZWF0aW9uIG9mIHRoaXMgdG9rZW5zCiAgICAgICAgTG9nQ3JlYXRlVklCRVgobXNnLnNlbmRlciwgdG9rZW5zKTsKICAgIH0KCgogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgY3VycmVudCB0b2tlbiBwcmljZQogICAgZnVuY3Rpb24gZ2V0Q3VycmVudFRva2VuUHJpY2UoKQogICAgcHJpdmF0ZQogICAgY29uc3RhbnQKICAgIHJldHVybnMgKHVpbnQyNTYgY3VycmVudFByaWNlKQogICAgewogICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkZWFkbGluZXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlmKG5vdzw9ZGVhZGxpbmVzW2ldKQogICAgICAgICAgICAgICAgcmV0dXJuIHByaWNlc1tpXTsKICAgICAgICByZXR1cm4gcHJpY2VzW3ByaWNlcy5sZW5ndGgtMV07Ly9zaG91bGQgbmV2ZXIgYmUgcmV0dXJuZWQsIGJ1dCB0byBiZSBzdXJlIHRvIG5vdCBkaXZpZGUgYnkgMAogICAgfQoKCiAgICAvLy8gQGRldiBSZWRlZW1zIFZJQkVzIGFuZCByZWNvcmRzIHRoZSBWaWJlaHViIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgZnVuY3Rpb24gcmVkZWVtVG9rZW5zKCkKICAgIGV4dGVybmFsCiAgICBpc1JlZGVlbWluZwogICAgewogICAgICAgIHVpbnQyNTYgdmliZVZhbCA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwogICAgICAgIHJlcXVpcmUodmliZVZhbCA+PSBUT0tFTl9NSU4pOyAvLyBBdCBsZWFzdCBUT0tFTl9NSU4gdG9rZW5zIGhhdmUgdG8gYmUgcmVkZWVtZWQKCiAgICAgICAgLy8gTW92ZSB0aGUgdG9rZW5zIG9mIHRoZSBjYWxsZXIgdG8gVmliZWh1YidzIGFkZHJlc3MKICAgICAgICAvL2lmICghc3VwZXIudHJhbnNmZXIoZXRoRnVuZERlcG9zaXQsIHZpYmVWYWwpKSB0aHJvdzsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXT0wOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgZXhjaGFuZ2VSYXRlID0gKCgxNjAyMDAwMDAqIDEwKipkZWNpbWFscykvdG90YWxTdXBwbHkpOwogICAgICAgIHVpbnQyNTYgbnVtVG9rZW5zID0gc2FmZU11bHQoZXhjaGFuZ2VSYXRlLCB2aWJlVmFsKTsgLy8gRXh0cmEgc2FmZQogICAgICAgIGlmKCF0b2tlbkV4Y2hhbmdlLnRyYW5zZmVyRnJvbSh0b2tlbkFjY291bnRBZGRyZXNzLCBtc2cuc2VuZGVyLCBudW1Ub2tlbnMpKSB0aHJvdzsKCiAgICAgICAgLy8gTG9nIHRoZSByZWRlZW1pbmcgb2YgdGhpcyB0b2tlbnMKICAgICAgICBMb2dSZWRlZW1WSUJFKG1zZy5zZW5kZXIsIG51bVRva2VucywgdmliZVZhbCwgZXhjaGFuZ2VSYXRlKTsKICAgIH0KCgoKCiAgICAvLy8gQGRldiBFbmRzIHRoZSBmdW5kcmFpc2luZyBwZXJpb2QgYW5kIHNlbmRzIHRoZSBFVEggdG8gdGhlIGV0aEZ1bmREZXBvc2l0IHdhbGxldAogICAgZnVuY3Rpb24gZmluYWxpemUoKQogICAgZXh0ZXJuYWwKICAgIGlzRnVuZHJhaXNpbmcKICAgIG1pbmltdW1SZWFjaGVkCiAgICBvbmx5T3duZXIgLy8gT25seSB0aGUgb3duZXIgb2YgdGhlIGV0aEZ1bmREZXBvc2l0IGFkZHJlc3MgY2FuIGZpbmFsaXplIHRoZSBjb250cmFjdAogICAgewogICAgICAgIHJlcXVpcmUobm93ID4gZW5kRGF0ZSB8fCB0b3RhbFJlY2VpdmVkRXRoID49IEVUSF9SRUNFSVZFRF9DQVApOyAvLyBPbmx5IGFsbG93IHRvIGZpbmFsaXplIHRoZSBjb250cmFjdCBiZWZvcmUgdGhlIGVuZGluZyBibG9jayBpZiB3ZSBhbHJlYWR5IHJlYWNoZWQgYW55IG9mIHRoZSBjYXBzCgogICAgICAgIC8vIE1vdmUgdGhlIGNvbnRyYWN0IHRvIEZpbmFsaXplZCBzdGF0ZQogICAgICAgIHN0YXRlID0gQ29udHJhY3RTdGF0ZS5GaW5hbGl6ZWQ7CiAgICAgICAgc2F2ZWRTdGF0ZSA9IENvbnRyYWN0U3RhdGUuRmluYWxpemVkOwogICAgfQoKCiAgICAvLy8gQGRldiBTdGFydHMgdGhlIHJlZGVlbWluZyBwZXJpb2QKICAgIGZ1bmN0aW9uIHN0YXJ0UmVkZWVtaW5nKCkKICAgIGV4dGVybmFsCiAgICBpc0ZpbmFsaXplZCAvLyBUaGUgcmVkZWVtaW5nIHBlcmlvZCBjYW4gb25seSBiZSBzdGFydGVkIGFmdGVyIHRoZSBjb250cmFjdCBpcyBmaW5hbGl6ZWQKICAgIG9ubHlPd25lciAgIC8vIE9ubHkgdGhlIG93bmVyIG9mIHRoZSBldGhGdW5kRGVwb3NpdCBhZGRyZXNzIGNhbiBzdGFydCB0aGUgcmVkZWVtaW5nIHBlcmlvZAogICAgewogICAgICAgIC8vIE1vdmUgdGhlIGNvbnRyYWN0IHRvIFJlZGVlbWluZyBzdGF0ZQogICAgICAgIHN0YXRlID0gQ29udHJhY3RTdGF0ZS5SZWRlZW1pbmc7CiAgICAgICAgc2F2ZWRTdGF0ZSA9IENvbnRyYWN0U3RhdGUuUmVkZWVtaW5nOwogICAgfQoKCiAgICAvLy8gQGRldiBQYXVzZXMgdGhlIGNvbnRyYWN0CiAgICBmdW5jdGlvbiBwYXVzZSgpCiAgICBleHRlcm5hbAogICAgbm90UGF1c2VkICAgLy8gUHJldmVudCB0aGUgY29udHJhY3QgZ2V0dGluZyBzdHVjayBpbiB0aGUgUGF1c2VkIHN0YXRlCiAgICBvbmx5T3duZXIgICAvLyBPbmx5IHRoZSBvd25lciBvZiB0aGUgZXRoRnVuZERlcG9zaXQgYWRkcmVzcyBjYW4gcGF1c2UgdGhlIGNvbnRyYWN0CiAgICB7CiAgICAgICAgLy8gTW92ZSB0aGUgY29udHJhY3QgdG8gUGF1c2VkIHN0YXRlCiAgICAgICAgc2F2ZWRTdGF0ZSA9IHN0YXRlOwogICAgICAgIHN0YXRlID0gQ29udHJhY3RTdGF0ZS5QYXVzZWQ7CiAgICB9CgoKICAgIC8vLyBAZGV2IFByb2NlZWRzIHdpdGggdGhlIGNvbnRyYWN0CiAgICBmdW5jdGlvbiBwcm9jZWVkKCkKICAgIGV4dGVybmFsCiAgICBpc1BhdXNlZAogICAgb25seU93bmVyICAgLy8gT25seSB0aGUgb3duZXIgb2YgdGhlIGV0aEZ1bmREZXBvc2l0IGFkZHJlc3MgY2FuIHByb2NlZWQgd2l0aCB0aGUgY29udHJhY3QKICAgIHsKICAgICAgICAvLyBNb3ZlIHRoZSBjb250cmFjdCB0byB0aGUgcHJldmlvdXMgc3RhdGUKICAgICAgICBzdGF0ZSA9IHNhdmVkU3RhdGU7CiAgICB9Cgp9'.
	

]
