Class {
	#name : #SRTaf0f6a53269fc9dbbd9da9f11c368d36b7a60006,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTaf0f6a53269fc9dbbd9da9f11c368d36b7a60006 >> base64 [
	^ 'Ly9sYXN0IGNvbXBpbGVkIHdpdGggc29sanNvbi12MC4zLjUtMjAxNi0wNy0yMS02NjEwYWRkCgpjb250cmFjdCBFdGhlcm9wdCB7CgogIHN0cnVjdCBQb3NpdGlvbiB7CiAgICBtYXBwaW5nKHVpbnQgPT4gaW50KSBwb3NpdGlvbnM7CiAgICBpbnQgY2FzaDsKICAgIGJvb2wgZXhwaXJlZDsKICAgIGJvb2wgaGFzUG9zaXRpb247CiAgfQogIHVpbnQgcHVibGljIGV4cGlyYXRpb247CiAgc3RyaW5nIHB1YmxpYyB1bmRlcmx5aW5nOwogIHVpbnQgcHVibGljIG1hcmdpbjsKICB1aW50IHB1YmxpYyByZWFsaXR5SUQ7CiAgYnl0ZXMzMiBwdWJsaWMgZmFjdEhhc2g7CiAgYWRkcmVzcyBwdWJsaWMgZXRoQWRkcjsKICBtYXBwaW5nKHVpbnQgPT4gaW50KSBvcHRpb25zOwogIHVpbnQgcHVibGljIG51bU9wdGlvbnM7CiAgYm9vbCBwdWJsaWMgZXhwaXJlZDsKICBtYXBwaW5nKGFkZHJlc3MgPT4gUG9zaXRpb24pIHBvc2l0aW9uczsKICB1aW50IHB1YmxpYyBudW1Qb3NpdGlvbnM7CiAgdWludCBwdWJsaWMgbnVtUG9zaXRpb25zRXhwaXJlZDsKICBzdHJ1Y3QgQWNjb3VudCB7CiAgICBhZGRyZXNzIHVzZXI7CiAgICBpbnQgY2FwaXRhbDsKICB9CiAgbWFwcGluZyhieXRlczMyID0+IGludCkgb3JkZXJGaWxsczsgLy9rZWVwcyB0cmFjayBvZiBjdW11bGF0aXZlIG9yZGVyIGZpbGxzCiAgc3RydWN0IE1hcmtldE1ha2VyIHsKICAgIGFkZHJlc3MgdXNlcjsKICAgIHN0cmluZyBzZXJ2ZXI7CiAgfQogIG1hcHBpbmcodWludCA9PiBNYXJrZXRNYWtlcikgbWFya2V0TWFrZXJzOyAvL3N0YXJ0cyBhdCAxCiAgdWludCBwdWJsaWMgbnVtTWFya2V0TWFrZXJzID0gMDsKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgbWFya2V0TWFrZXJJRHM7CiAgbWFwcGluZyh1aW50ID0+IEFjY291bnQpIGFjY291bnRzOwogIHVpbnQgcHVibGljIG51bUFjY291bnRzOwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBhY2NvdW50SURzOyAvL3N0YXJ0cyBhdCAxCgogIC8vZXZlbnRzCiAgZXZlbnQgRGVwb3NpdChhZGRyZXNzIGluZGV4ZWQgdXNlciwgdWludCBhbW91bnQsIGludCBiYWxhbmNlKTsgLy9iYWxhbmNlIGlzIGJhbGFuY2UgYWZ0ZXIgZGVwb3NpdAogIGV2ZW50IFdpdGhkcmF3KGFkZHJlc3MgaW5kZXhlZCB1c2VyLCB1aW50IGFtb3VudCwgaW50IGJhbGFuY2UpOyAvL2JhbGFuY2UgaXMgYmFsYW5jZSBhZnRlciB3aXRoZHJhdwogIGV2ZW50IE5ld01hcmtldE1ha2VyKGFkZHJlc3MgaW5kZXhlZCB1c2VyLCBzdHJpbmcgc2VydmVyKTsKICBldmVudCBFeHBpcmUoYWRkcmVzcyBpbmRleGVkIGNhbGxlciwgYWRkcmVzcyBpbmRleGVkIHVzZXIpOyAvL3VzZXIgaXMgdGhlIGFjY291bnQgdGhhdCB3YXMgZXhwaXJlZAogIGV2ZW50IE9yZGVyTWF0Y2hGYWlsdXJlKGFkZHJlc3MgaW5kZXhlZCBtYXRjaFVzZXIsIGludCBtYXRjaFNpemUsIGFkZHJlc3MgaW5kZXhlZCBvcmRlclVzZXIsIGludCBvcmRlclNpemUsIHVpbnQgb3B0aW9uSUQsIHVpbnQgcHJpY2UpOwogIGV2ZW50IE9yZGVyTWF0Y2goYWRkcmVzcyBpbmRleGVkIG1hdGNoVXNlciwgaW50IG1hdGNoU2l6ZSwgYWRkcmVzcyBpbmRleGVkIG9yZGVyVXNlciwgaW50IG9yZGVyU2l6ZSwgdWludCBvcHRpb25JRCwgdWludCBwcmljZSk7CgogIGZ1bmN0aW9uIEV0aGVyb3B0KHVpbnQgZXhwaXJhdGlvbl8sIHN0cmluZyB1bmRlcmx5aW5nXywgdWludCBtYXJnaW5fLCB1aW50IHJlYWxpdHlJRF8sIGJ5dGVzMzIgZmFjdEhhc2hfLCBhZGRyZXNzIGV0aEFkZHJfLCBpbnRbXSBzdHJpa2VzXykgewogICAgZXhwaXJhdGlvbiA9IGV4cGlyYXRpb25fOwogICAgdW5kZXJseWluZyA9IHVuZGVybHlpbmdfOwogICAgbWFyZ2luID0gbWFyZ2luXzsKICAgIHJlYWxpdHlJRCA9IHJlYWxpdHlJRF87CiAgICBmYWN0SGFzaCA9IGZhY3RIYXNoXzsKICAgIGV0aEFkZHIgPSBldGhBZGRyXzsKICAgIGZvciAodWludCBpPTA7IGkgPCBzdHJpa2VzXy5sZW5ndGg7IGkrKykgewogICAgICBpZiAobnVtT3B0aW9uczwyMCkgewogICAgICAgIHVpbnQgb3B0aW9uSUQgPSBudW1PcHRpb25zKys7CiAgICAgICAgb3B0aW9uc1tvcHRpb25JRF0gPSBzdHJpa2VzX1tpXTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2V0QWNjb3VudElEKGFkZHJlc3MgdXNlcikgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICByZXR1cm4gYWNjb3VudElEc1t1c2VyXTsKICB9CgogIGZ1bmN0aW9uIGdldEFjY291bnQodWludCBhY2NvdW50SUQpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcykgewogICAgcmV0dXJuIGFjY291bnRzW2FjY291bnRJRF0udXNlcjsKICB9CgogIGZ1bmN0aW9uIGFkZEZ1bmRzKCkgewogICAgaWYgKGFjY291bnRJRHNbbXNnLnNlbmRlcl0+MCkgewogICAgICBhY2NvdW50c1thY2NvdW50SURzW21zZy5zZW5kZXJdXS5jYXBpdGFsICs9IGludChtc2cudmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgdWludCBhY2NvdW50SUQgPSArK251bUFjY291bnRzOwogICAgICBhY2NvdW50c1thY2NvdW50SURdLnVzZXIgPSBtc2cuc2VuZGVyOwogICAgICBhY2NvdW50c1thY2NvdW50SURdLmNhcGl0YWwgKz0gaW50KG1zZy52YWx1ZSk7CiAgICAgIGFjY291bnRJRHNbbXNnLnNlbmRlcl0gPSBhY2NvdW50SUQ7CiAgICB9CiAgICBEZXBvc2l0KG1zZy5zZW5kZXIsIG1zZy52YWx1ZSwgYWNjb3VudHNbYWNjb3VudElEc1ttc2cuc2VuZGVyXV0uY2FwaXRhbCk7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhd0Z1bmRzKHVpbnQgYW1vdW50KSB7CiAgICBpZiAoYWNjb3VudElEc1ttc2cuc2VuZGVyXT4wKSB7CiAgICAgIGlmIChpbnQoYW1vdW50KTw9Z2V0RnVuZHMobXNnLnNlbmRlciwgdHJ1ZSkgJiYgaW50KGFtb3VudCk+MCkgewogICAgICAgIGFjY291bnRzW2FjY291bnRJRHNbbXNnLnNlbmRlcl1dLmNhcGl0YWwgLT0gaW50KGFtb3VudCk7CiAgICAgICAgbXNnLnNlbmRlci5jYWxsLnZhbHVlKGFtb3VudCkoKTsKICAgICAgICBXaXRoZHJhdyhtc2cuc2VuZGVyLCBhbW91bnQsIGFjY291bnRzW2FjY291bnRJRHNbbXNnLnNlbmRlcl1dLmNhcGl0YWwpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZXRGdW5kcyhhZGRyZXNzIHVzZXIsIGJvb2wgb25seUF2YWlsYWJsZSkgY29uc3RhbnQgcmV0dXJucyhpbnQpIHsKICAgIGlmIChhY2NvdW50SURzW3VzZXJdPjApIHsKICAgICAgaWYgKG9ubHlBdmFpbGFibGUgPT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gYWNjb3VudHNbYWNjb3VudElEc1t1c2VyXV0uY2FwaXRhbDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gYWNjb3VudHNbYWNjb3VudElEc1t1c2VyXV0uY2FwaXRhbCArIGdldE1heExvc3NBZnRlclRyYWRlKHVzZXIsIDAsIDAsIDApOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gMDsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdldEZ1bmRzQW5kQXZhaWxhYmxlKGFkZHJlc3MgdXNlcikgY29uc3RhbnQgcmV0dXJucyhpbnQsIGludCkgewogICAgcmV0dXJuIChnZXRGdW5kcyh1c2VyLCBmYWxzZSksIGdldEZ1bmRzKHVzZXIsIHRydWUpKTsKICB9CgogIGZ1bmN0aW9uIG1hcmtldE1ha2VyKHN0cmluZyBzZXJ2ZXIpIHsKICAgIGlmIChtc2cudmFsdWU+MCkgdGhyb3c7CiAgICBpZiAobWFya2V0TWFrZXJJRHNbbXNnLnNlbmRlcl0+MCkgewogICAgICBtYXJrZXRNYWtlcnNbbWFya2V0TWFrZXJJRHNbbXNnLnNlbmRlcl1dLnNlcnZlciA9IHNlcnZlcjsKICAgIH0gZWxzZSB7CiAgICAgIGludCBmdW5kcyA9IGdldEZ1bmRzKG1hcmtldE1ha2Vyc1tpXS51c2VyLCBmYWxzZSk7CiAgICAgIHVpbnQgbWFya2V0TWFrZXJJRCA9IDA7CiAgICAgIGlmIChudW1NYXJrZXRNYWtlcnM8NikgewogICAgICAgIG1hcmtldE1ha2VySUQgPSArK251bU1hcmtldE1ha2VyczsKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IgKHVpbnQgaT0yOyBpPD1udW1NYXJrZXRNYWtlcnM7IGkrKykgewogICAgICAgICAgaWYgKGdldEZ1bmRzKG1hcmtldE1ha2Vyc1tpXS51c2VyLCBmYWxzZSk8PWZ1bmRzICYmIChtYXJrZXRNYWtlcklEPT0wIHx8IGdldEZ1bmRzKG1hcmtldE1ha2Vyc1tpXS51c2VyLCBmYWxzZSk8Z2V0RnVuZHMobWFya2V0TWFrZXJzW21hcmtldE1ha2VySURdLnVzZXIsIGZhbHNlKSkpIHsKICAgICAgICAgICAgbWFya2V0TWFrZXJJRCA9IGk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChtYXJrZXRNYWtlcklEPjApIHsKICAgICAgICBtYXJrZXRNYWtlcklEc1ttYXJrZXRNYWtlcnNbbWFya2V0TWFrZXJJRF0udXNlcl0gPSAwOwogICAgICAgIG1hcmtldE1ha2Vyc1ttYXJrZXRNYWtlcklEXS51c2VyID0gbXNnLnNlbmRlcjsKICAgICAgICBtYXJrZXRNYWtlcnNbbWFya2V0TWFrZXJJRF0uc2VydmVyID0gc2VydmVyOwogICAgICAgIG1hcmtldE1ha2VySURzW21zZy5zZW5kZXJdID0gbWFya2V0TWFrZXJJRDsKICAgICAgICBOZXdNYXJrZXRNYWtlcihtc2cuc2VuZGVyLCBzZXJ2ZXIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRocm93OwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZXRNYXJrZXRNYWtlcnMoKSBjb25zdGFudCByZXR1cm5zKHN0cmluZywgc3RyaW5nLCBzdHJpbmcsIHN0cmluZywgc3RyaW5nLCBzdHJpbmcpIHsKICAgIHN0cmluZ1tdIG1lbW9yeSBzZXJ2ZXJzID0gbmV3IHN0cmluZ1tdKDYpOwogICAgZm9yICh1aW50IGk9MTsgaTw9bnVtTWFya2V0TWFrZXJzOyBpKyspIHsKICAgICAgc2VydmVyc1tpLTFdID0gbWFya2V0TWFrZXJzW2ldLnNlcnZlcjsKICAgIH0KICAgIHJldHVybiAoc2VydmVyc1swXSwgc2VydmVyc1sxXSwgc2VydmVyc1syXSwgc2VydmVyc1szXSwgc2VydmVyc1s0XSwgc2VydmVyc1s1XSk7CiAgfQoKICBmdW5jdGlvbiBnZXRNYXJrZXRNYWtlckZ1bmRzKCkgY29uc3RhbnQgcmV0dXJucyhpbnQsIGludCwgaW50LCBpbnQsIGludCwgaW50KSB7CiAgICBpbnRbXSBtZW1vcnkgZnVuZHMgPSBuZXcgaW50W10oNik7CiAgICBmb3IgKHVpbnQgaT0xOyBpPD1udW1NYXJrZXRNYWtlcnM7IGkrKykgewogICAgICBmdW5kc1tpLTFdID0gZ2V0RnVuZHMobWFya2V0TWFrZXJzW2ldLnVzZXIsIGZhbHNlKTsKICAgIH0KICAgIHJldHVybiAoZnVuZHNbMF0sIGZ1bmRzWzFdLCBmdW5kc1syXSwgZnVuZHNbM10sIGZ1bmRzWzRdLCBmdW5kc1s1XSk7CiAgfQoKICBmdW5jdGlvbiBnZXRPcHRpb25DaGFpbigpIGNvbnN0YW50IHJldHVybnMgKHVpbnQsIHN0cmluZywgdWludCwgdWludCwgYnl0ZXMzMiwgYWRkcmVzcykgewogICAgcmV0dXJuIChleHBpcmF0aW9uLCB1bmRlcmx5aW5nLCBtYXJnaW4sIHJlYWxpdHlJRCwgZmFjdEhhc2gsIGV0aEFkZHIpOwogIH0KCiAgZnVuY3Rpb24gZ2V0TWFya2V0KGFkZHJlc3MgdXNlcikgY29uc3RhbnQgcmV0dXJucyh1aW50W10sIGludFtdLCBpbnRbXSwgaW50W10pIHsKICAgIHVpbnRbXSBtZW1vcnkgb3B0aW9uSURzID0gbmV3IHVpbnRbXSgyMCk7CiAgICBpbnRbXSBtZW1vcnkgc3RyaWtlc18gPSBuZXcgaW50W10oMjApOwogICAgaW50W10gbWVtb3J5IHBvc2l0aW9uc18gPSBuZXcgaW50W10oMjApOwogICAgaW50W10gbWVtb3J5IGNhc2hlcyA9IG5ldyBpbnRbXSgyMCk7CiAgICB1aW50IHogPSAwOwogICAgaWYgKGV4cGlyZWQgPT0gZmFsc2UpIHsKICAgICAgZm9yICh1aW50IG9wdGlvbklEPTA7IG9wdGlvbklEPG51bU9wdGlvbnM7IG9wdGlvbklEKyspIHsKICAgICAgICBvcHRpb25JRHNbel0gPSBvcHRpb25JRDsKICAgICAgICBzdHJpa2VzX1t6XSA9IG9wdGlvbnNbb3B0aW9uSURdOwogICAgICAgIHBvc2l0aW9uc19bel0gPSBwb3NpdGlvbnNbdXNlcl0ucG9zaXRpb25zW29wdGlvbklEXTsKICAgICAgICBjYXNoZXNbel0gPSBwb3NpdGlvbnNbdXNlcl0uY2FzaDsKICAgICAgICB6Kys7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiAob3B0aW9uSURzLCBzdHJpa2VzXywgcG9zaXRpb25zXywgY2FzaGVzKTsKICB9CgogIGZ1bmN0aW9uIGV4cGlyZSh1aW50IGFjY291bnRJRCwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMsIGJ5dGVzMzIgdmFsdWUpIHsKICAgIGlmIChleHBpcmVkID09IGZhbHNlKSB7CiAgICAgIGlmIChlY3JlY292ZXIoc2hhMyhmYWN0SGFzaCwgdmFsdWUpLCB2LCByLCBzKSA9PSBldGhBZGRyKSB7CiAgICAgICAgdWludCBsYXN0QWNjb3VudCA9IG51bUFjY291bnRzOwogICAgICAgIGlmIChhY2NvdW50SUQ9PTApIHsKICAgICAgICAgIGFjY291bnRJRCA9IDE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxhc3RBY2NvdW50ID0gYWNjb3VudElEOwogICAgICAgIH0KICAgICAgICBmb3IgKGFjY291bnRJRD1hY2NvdW50SUQ7IGFjY291bnRJRDw9bGFzdEFjY291bnQ7IGFjY291bnRJRCsrKSB7CiAgICAgICAgICBpZiAocG9zaXRpb25zW2FjY291bnRzW2FjY291bnRJRF0udXNlcl0uZXhwaXJlZCA9PSBmYWxzZSkgewogICAgICAgICAgICBpbnQgcmVzdWx0ID0gcG9zaXRpb25zW2FjY291bnRzW2FjY291bnRJRF0udXNlcl0uY2FzaCAvIDEwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICAgICAgICAgIGZvciAodWludCBvcHRpb25JRD0wOyBvcHRpb25JRDxudW1PcHRpb25zOyBvcHRpb25JRCsrKSB7CiAgICAgICAgICAgICAgaW50IG1vbmV5bmVzcyA9IGdldE1vbmV5bmVzcyhvcHRpb25zW29wdGlvbklEXSwgdWludCh2YWx1ZSksIG1hcmdpbik7CiAgICAgICAgICAgICAgcmVzdWx0ICs9IG1vbmV5bmVzcyAqIHBvc2l0aW9uc1thY2NvdW50c1thY2NvdW50SURdLnVzZXJdLnBvc2l0aW9uc1tvcHRpb25JRF0gLyAxMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHBvc2l0aW9uc1thY2NvdW50c1thY2NvdW50SURdLnVzZXJdLmV4cGlyZWQgPSB0cnVlOwogICAgICAgICAgICB1aW50IGFtb3VudFRvU2VuZCA9IHVpbnQoYWNjb3VudHNbYWNjb3VudElEXS5jYXBpdGFsICsgcmVzdWx0KTsKICAgICAgICAgICAgYWNjb3VudHNbYWNjb3VudElEXS5jYXBpdGFsID0gMDsKICAgICAgICAgICAgaWYgKHBvc2l0aW9uc1thY2NvdW50c1thY2NvdW50SURdLnVzZXJdLmhhc1Bvc2l0aW9uPT10cnVlKSB7CiAgICAgICAgICAgICAgbnVtUG9zaXRpb25zRXhwaXJlZCsrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFjY291bnRzW2FjY291bnRJRF0udXNlci5jYWxsLnZhbHVlKGFtb3VudFRvU2VuZCkoKTsKICAgICAgICAgICAgRXhwaXJlKG1zZy5zZW5kZXIsIGFjY291bnRzW2FjY291bnRJRF0udXNlcik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChudW1Qb3NpdGlvbnNFeHBpcmVkID09IG51bVBvc2l0aW9ucykgewogICAgICAgICAgZXhwaXJlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZXRNb25leW5lc3MoaW50IHN0cmlrZSwgdWludCBzZXR0bGVtZW50LCB1aW50IG1hcmdpbikgY29uc3RhbnQgcmV0dXJucyhpbnQpIHsKICAgIGlmIChzdHJpa2U+PTApIHsgLy9jYWxsCiAgICAgIGlmIChzZXR0bGVtZW50PnVpbnQoc3RyaWtlKSkgewogICAgICAgIGlmIChzZXR0bGVtZW50LXVpbnQoc3RyaWtlKTxtYXJnaW4pIHsKICAgICAgICAgIHJldHVybiBpbnQoc2V0dGxlbWVudC11aW50KHN0cmlrZSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gaW50KG1hcmdpbik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICB9IGVsc2UgeyAvL3B1dAogICAgICBpZiAoc2V0dGxlbWVudDx1aW50KC1zdHJpa2UpKSB7CiAgICAgICAgaWYgKHVpbnQoLXN0cmlrZSktc2V0dGxlbWVudDxtYXJnaW4pIHsKICAgICAgICAgIHJldHVybiBpbnQodWludCgtc3RyaWtlKS1zZXR0bGVtZW50KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGludChtYXJnaW4pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gb3JkZXJNYXRjaFRlc3QodWludCBvcHRpb25JRCwgdWludCBwcmljZSwgaW50IHNpemUsIHVpbnQgb3JkZXJJRCwgdWludCBibG9ja0V4cGlyZXMsIGFkZHJlc3MgYWRkciwgYWRkcmVzcyBzZW5kZXIsIHVpbnQgdmFsdWUsIGludCBtYXRjaFNpemUpIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgaWYgKGJsb2NrLm51bWJlcjw9YmxvY2tFeHBpcmVzICYmICgoc2l6ZT4wICYmIG1hdGNoU2l6ZTwwICYmIG9yZGVyRmlsbHNbc2hhMyhvcHRpb25JRCwgcHJpY2UsIHNpemUsIG9yZGVySUQsIGJsb2NrRXhwaXJlcyldLW1hdGNoU2l6ZTw9c2l6ZSkgfHwgKHNpemU8MCAmJiBtYXRjaFNpemU+MCAmJiBvcmRlckZpbGxzW3NoYTMob3B0aW9uSUQsIHByaWNlLCBzaXplLCBvcmRlcklELCBibG9ja0V4cGlyZXMpXS1tYXRjaFNpemU+PXNpemUpKSAmJiBnZXRGdW5kcyhhZGRyLCBmYWxzZSkrZ2V0TWF4TG9zc0FmdGVyVHJhZGUoYWRkciwgb3B0aW9uSUQsIC1tYXRjaFNpemUsIG1hdGNoU2l6ZSAqIGludChwcmljZSkpPjAgJiYgZ2V0RnVuZHMoc2VuZGVyLCBmYWxzZSkraW50KHZhbHVlKStnZXRNYXhMb3NzQWZ0ZXJUcmFkZShzZW5kZXIsIG9wdGlvbklELCBtYXRjaFNpemUsIC1tYXRjaFNpemUgKiBpbnQocHJpY2UpKT4wKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gb3JkZXJNYXRjaCh1aW50IG9wdGlvbklELCB1aW50IHByaWNlLCBpbnQgc2l6ZSwgdWludCBvcmRlcklELCB1aW50IGJsb2NrRXhwaXJlcywgYWRkcmVzcyBhZGRyLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcywgaW50IG1hdGNoU2l6ZSkgewogICAgYWRkRnVuZHMoKTsKICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTI1NihvcHRpb25JRCwgcHJpY2UsIHNpemUsIG9yZGVySUQsIGJsb2NrRXhwaXJlcyk7CiAgICBpZiAoZWNyZWNvdmVyKGhhc2gsIHYsIHIsIHMpID09IGFkZHIgJiYgYmxvY2subnVtYmVyPD1ibG9ja0V4cGlyZXMgJiYgKChzaXplPjAgJiYgbWF0Y2hTaXplPDAgJiYgb3JkZXJGaWxsc1toYXNoXS1tYXRjaFNpemU8PXNpemUpIHx8IChzaXplPDAgJiYgbWF0Y2hTaXplPjAgJiYgb3JkZXJGaWxsc1toYXNoXS1tYXRjaFNpemU+PXNpemUpKSAmJiBnZXRGdW5kcyhhZGRyLCBmYWxzZSkrZ2V0TWF4TG9zc0FmdGVyVHJhZGUoYWRkciwgb3B0aW9uSUQsIC1tYXRjaFNpemUsIG1hdGNoU2l6ZSAqIGludChwcmljZSkpPjAgJiYgZ2V0RnVuZHMobXNnLnNlbmRlciwgZmFsc2UpK2dldE1heExvc3NBZnRlclRyYWRlKG1zZy5zZW5kZXIsIG9wdGlvbklELCBtYXRjaFNpemUsIC1tYXRjaFNpemUgKiBpbnQocHJpY2UpKT4wKSB7CiAgICAgIGlmIChwb3NpdGlvbnNbbXNnLnNlbmRlcl0uaGFzUG9zaXRpb24gPT0gZmFsc2UpIHsKICAgICAgICBwb3NpdGlvbnNbbXNnLnNlbmRlcl0uaGFzUG9zaXRpb24gPSB0cnVlOwogICAgICAgIG51bVBvc2l0aW9ucysrOwogICAgICB9CiAgICAgIGlmIChwb3NpdGlvbnNbYWRkcl0uaGFzUG9zaXRpb24gPT0gZmFsc2UpIHsKICAgICAgICBwb3NpdGlvbnNbYWRkcl0uaGFzUG9zaXRpb24gPSB0cnVlOwogICAgICAgIG51bVBvc2l0aW9ucysrOwogICAgICB9CiAgICAgIHBvc2l0aW9uc1ttc2cuc2VuZGVyXS5wb3NpdGlvbnNbb3B0aW9uSURdICs9IG1hdGNoU2l6ZTsKICAgICAgcG9zaXRpb25zW21zZy5zZW5kZXJdLmNhc2ggLT0gbWF0Y2hTaXplICogaW50KHByaWNlKTsKICAgICAgcG9zaXRpb25zW2FkZHJdLnBvc2l0aW9uc1tvcHRpb25JRF0gLT0gbWF0Y2hTaXplOwogICAgICBwb3NpdGlvbnNbYWRkcl0uY2FzaCArPSBtYXRjaFNpemUgKiBpbnQocHJpY2UpOwogICAgICBvcmRlckZpbGxzW2hhc2hdIC09IG1hdGNoU2l6ZTsKICAgICAgT3JkZXJNYXRjaChtc2cuc2VuZGVyLCBtYXRjaFNpemUsIGFkZHIsIHNpemUsIG9wdGlvbklELCBwcmljZSk7CiAgICB9IGVsc2UgewogICAgICBPcmRlck1hdGNoRmFpbHVyZShtc2cuc2VuZGVyLCBtYXRjaFNpemUsIGFkZHIsIHNpemUsIG9wdGlvbklELCBwcmljZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZXRNYXhMb3NzQWZ0ZXJUcmFkZShhZGRyZXNzIHVzZXIsIHVpbnQgb3B0aW9uSUQsIGludCBwb3NpdGlvbkNoYW5nZSwgaW50IGNhc2hDaGFuZ2UpIGNvbnN0YW50IHJldHVybnMoaW50KSB7CiAgICBib29sIG1heExvc3NJbml0aWFsaXplZCA9IGZhbHNlOwogICAgaW50IG1heExvc3MgPSAwOwogICAgaWYgKHBvc2l0aW9uc1t1c2VyXS5leHBpcmVkID09IGZhbHNlICYmIG51bU9wdGlvbnM+MCkgewogICAgICBmb3IgKHVpbnQgcz0wOyBzPG51bU9wdGlvbnM7IHMrKykgewogICAgICAgIGludCBwbmwgPSBwb3NpdGlvbnNbdXNlcl0uY2FzaCAvIDEwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICAgICAgcG5sICs9IGNhc2hDaGFuZ2UgLyAxMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgICAgIHVpbnQgc2V0dGxlbWVudCA9IDA7CiAgICAgICAgaWYgKG9wdGlvbnNbc108MCkgewogICAgICAgICAgc2V0dGxlbWVudCA9IHVpbnQoLW9wdGlvbnNbc10pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZXR0bGVtZW50ID0gdWludChvcHRpb25zW3NdKTsKICAgICAgICB9CiAgICAgICAgcG5sICs9IG1vbmV5U3VtQXRTZXR0bGVtZW50KHVzZXIsIG9wdGlvbklELCBwb3NpdGlvbkNoYW5nZSwgc2V0dGxlbWVudCk7CiAgICAgICAgaWYgKHBubDxtYXhMb3NzIHx8IG1heExvc3NJbml0aWFsaXplZD09ZmFsc2UpIHsKICAgICAgICAgIG1heExvc3NJbml0aWFsaXplZCA9IHRydWU7CiAgICAgICAgICBtYXhMb3NzID0gcG5sOwogICAgICAgIH0KICAgICAgICBwbmwgPSBwb3NpdGlvbnNbdXNlcl0uY2FzaCAvIDEwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICAgICAgcG5sICs9IGNhc2hDaGFuZ2UgLyAxMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgICAgIHNldHRsZW1lbnQgPSAwOwogICAgICAgIGlmIChvcHRpb25zW3NdPDApIHsKICAgICAgICAgIGlmICh1aW50KC1vcHRpb25zW3NdKT5tYXJnaW4pIHsKICAgICAgICAgICAgc2V0dGxlbWVudCA9IHVpbnQoLW9wdGlvbnNbc10pLW1hcmdpbjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNldHRsZW1lbnQgPSAwOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZXR0bGVtZW50ID0gdWludChvcHRpb25zW3NdKSttYXJnaW47CiAgICAgICAgfQogICAgICAgIHBubCArPSBtb25leVN1bUF0U2V0dGxlbWVudCh1c2VyLCBvcHRpb25JRCwgcG9zaXRpb25DaGFuZ2UsIHNldHRsZW1lbnQpOwogICAgICAgIGlmIChwbmw8bWF4TG9zcykgewogICAgICAgICAgbWF4TG9zcyA9IHBubDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtYXhMb3NzOwogIH0KCiAgZnVuY3Rpb24gbW9uZXlTdW1BdFNldHRsZW1lbnQoYWRkcmVzcyB1c2VyLCB1aW50IG9wdGlvbklELCBpbnQgcG9zaXRpb25DaGFuZ2UsIHVpbnQgc2V0dGxlbWVudCkgaW50ZXJuYWwgcmV0dXJucyhpbnQpIHsKICAgIGludCBwbmwgPSAwOwogICAgZm9yICh1aW50IGo9MDsgajxudW1PcHRpb25zOyBqKyspIHsKICAgICAgcG5sICs9IHBvc2l0aW9uc1t1c2VyXS5wb3NpdGlvbnNbal0gKiBnZXRNb25leW5lc3Mob3B0aW9uc1tqXSwgc2V0dGxlbWVudCwgbWFyZ2luKSAvIDEwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICAgIGlmIChqPT1vcHRpb25JRCkgewogICAgICAgIHBubCArPSBwb3NpdGlvbkNoYW5nZSAqIGdldE1vbmV5bmVzcyhvcHRpb25zW2pdLCBzZXR0bGVtZW50LCBtYXJnaW4pIC8gMTAwMDAwMDAwMDAwMDAwMDAwMDsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHBubDsKICB9CgogIGZ1bmN0aW9uIG1pbih1aW50IGEsIHVpbnQgYikgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICBpZiAoYTxiKSB7CiAgICAgIHJldHVybiBhOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGI7CiAgICB9CiAgfQp9'.
	

]
