Class {
	#name : #SRT3c63d4b0330a1ab969ff0f8b2ba227540a15b0ca,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3c63d4b0330a1ab969ff0f8b2ba227540a15b0ca >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IHNhZmVtYXRoIHsKICAgIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KICAgIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9CiAgICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIHJldHVybiBjOwogICAgfQp9Cgpjb250cmFjdCBDb250cmFjdFJlY2VpdmVyIHsKICAgIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBmcm9tLCB1aW50IGFtb3VudCwgYnl0ZXMgZGF0YSkgcHVibGljOwp9Cgpjb250cmFjdCBTcGFuVG9rZW4gIHsKICAgIHVzaW5nIHNhZmVtYXRoIGZvciB1aW50MjU2OwogICAgdWludDI1NiBwdWJsaWMgX3RvdGFsc3VwcGx5OwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlNwYW4gQ29pbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJTUEFOIjsKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogIAogICAgdWludDI1NiBwdWJsaWMgU3RhcnRUaW1lOyAgIC8vIHN0YXJ0IGFuZCBlbmQgdGltZXN0YW1wcyB3aGVyZSBpbnZlc3RtZW50cyBhcmUgYWxsb3dlZCAoYm90aCBpbmNsdXNpdmUpCiAgICB1aW50MjU2IHB1YmxpYyBFbmRUaW1lIDsKICAgIHVpbnQyNTYgcHVibGljIFJhdGU7ICAgLy8gaG93IG1hbnkgdG9rZW4gdW5pdHMgYSBidXllciBnZXRzIHBlciBtc2cudmFsdWUKICAgIHVpbnQyNTYgcHVibGljIGN1cnJlbnRCb251czsgCiAgICBhZGRyZXNzIG9ubHlhZG1pbjsKICAgIGFkZHJlc3NbXSBhZG1pbnNfYXJyYXk7CiAgICAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIGFkbWluX2FkZHJlc3NlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGZyb3plbkFjY291bnQ7ICAgIAogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CiAgICBldmVudCBOZXdBZG1pbihhZGRyZXNzIGFkbWluKTsKICAgIGV2ZW50IFJlbW92ZUFkbWluKGFkZHJlc3MgYWRtaW4pOyAgICAKCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG9ubHlhZG1pbik7CiAgICBfOwogICAgfQogICAgbW9kaWZpZXIgb25seWF1dGhvcml6ZWQgewogICAgICAgIHJlcXVpcmUgKGFkbWluX2FkZHJlc3Nlc1ttc2cuc2VuZGVyXSA9PSB0cnVlIHx8IG1zZy5zZW5kZXIgPT0gb25seWFkbWluKTsKICAgICAgICBfOwogICAgfSAgICAKICAgIG1vZGlmaWVyIG5vdGZyb3plbigpIHsKICAgICByZXF1aXJlIChmcm96ZW5BY2NvdW50W21zZy5zZW5kZXJdIDwgbm93ICk7ICAgCiAgICAgIF87ICAKICAgIH0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfdG90YWxTdXBwbHkpewogICAgcmV0dXJuIF90b3RhbHN1cHBseTsKICAgIH0KICAgIGZ1bmN0aW9uIGdldE93bmVyKCkgcHVibGljIHZpZXcgcmV0dXJucyhhZGRyZXNzKXsKICAgICAgICByZXR1cm4gb25seWFkbWluOwogICAgfQogICAgZnVuY3Rpb24gU3BhblRva2VuKHVpbnQyNTYgaW5pdGlhbFN1cHBseSx1aW50MjU2IF9zdGFydFRpbWUsdWludDI1NiBfZW5kVGltZSx1aW50MjU2IF9yYXRlLHVpbnQyNTYgX2N1cnJlbnRCb251cykgcHVibGljIHsKICAgICAgICBvbmx5YWRtaW4gPSBtc2cuc2VuZGVyOwogICAgICAgIGFkbWluc19hcnJheS5wdXNoKG1zZy5zZW5kZXIpOwogICAgICAgIFN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICAgICAgRW5kVGltZSA9IF9lbmRUaW1lOwogICAgICAgIFJhdGUgPSBfcmF0ZTsKICAgICAgICBjdXJyZW50Qm9udXMgPSBfY3VycmVudEJvbnVzOwogICAgICAgIF90b3RhbHN1cHBseSA9IGluaXRpYWxTdXBwbHkgKiAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IF90b3RhbHN1cHBseTsKICAgIH0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvbmx5YWRtaW4sIG5ld093bmVyKTsKICAgIG9ubHlhZG1pbiA9IG5ld093bmVyOwogIH0KICAgIGZ1bmN0aW9uIENoYW5nZVNhbGVUaW1lKHVpbnQyNTYgX3N0YXJ0VGltZSwgdWludDI1NiBfZW5kVGltZSwgdWludDI1NiBfY3VycmVudEJvbnVzKSBvbmx5T3duZXIgcHVibGljewogICAgICAgICBTdGFydFRpbWUgPSBfc3RhcnRUaW1lOwogICAgICAgICBFbmRUaW1lID0gX2VuZFRpbWU7CiAgICAgICAgIGN1cnJlbnRCb251cyA9IF9jdXJyZW50Qm9udXM7CiAgICAgICAgfQogICAgZnVuY3Rpb24gY2hhbmdlUkFURSh1aW50MjU2IF9yYXRlKSBvbmx5T3duZXIgcHVibGljICB7CiAgICAgICAgICAgUmF0ZSA9IF9yYXRlOwogICAgICAgIH0KICAgIGZ1bmN0aW9uIGFkZEFkbWluKGFkZHJlc3MgX2FkZHJlc3MpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGFkbWluX2FkZHJlc3Nlc1tfYWRkcmVzc10gPSB0cnVlOwogICAgICAgIE5ld0FkbWluKF9hZGRyZXNzKTsKICAgICAgICBhZG1pbnNfYXJyYXkucHVzaChfYWRkcmVzcyk7CiAgICB9CiAgICBmdW5jdGlvbiByZW1vdmVBZG1pbihhZGRyZXNzIF9hZGRyZXNzKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlIChfYWRkcmVzcyAhPSBtc2cuc2VuZGVyKTsKICAgICAgICBhZG1pbl9hZGRyZXNzZXNbX2FkZHJlc3NdID0gZmFsc2U7CiAgICAgICAgUmVtb3ZlQWRtaW4oX2FkZHJlc3MpOwogICAgfQogICAgZnVuY3Rpb24gd2l0aGRyYXdFdGhlcigpIHB1YmxpYyBvbmx5T3duZXIgIHsKCSAgICAgICAgb25seWFkbWluLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgCX0gICAgCn0KCmNvbnRyYWN0IFNwYW5Db2luIGlzIFNwYW5Ub2tlbiB7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIE1vbnRocHJvZml0c3RhcnQ7ICAgLy8gc3RhcnQgdGltZSBvZiBwcm9maXQgCiAgICB1aW50MjU2IHB1YmxpYyBNb250aHByb2ZpdGVuZDsgICAgIC8vIGVuZCB0aW1lIG9mIHByb2ZpdCAKICAgIHVpbnQyNTYgcHVibGljIE1vbnRoc1Byb2ZpdDsgICAgICAgLy8gUHJvZml0IG1hZGUgYnkgY29tcGFueQogICAgdWludDI1NiBwdWJsaWMgU2hhcmVQcmljZTsKICAgIHN0cnVjdCBQcmljZVRhYmxlewogICAgICAgIHVpbnQyNTYgUHJvZHVjdElEOwogICAgICAgIHN0cmluZyBQcm9kdWN0TmFtZTsKICAgICAgICB1aW50MjU2IFByb2R1Y3RQcmljZTsKICAgIH0KICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gUHJpY2VUYWJsZSkgcHJvZHVjdHM7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IENvbnRyYWN0VHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSk7CiAgICBldmVudCBDb2luUHVyY2hhc2UoYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgX3ZhbHVlLCB1aW50MjU2IGFtb3VudCk7CiAgICBldmVudCBTZXJ2aWNlUHVyY2hhc2UoYWRkcmVzcyBpbmRleGVkIEJ1eWVyLHVpbnQyNTYgX1Byb2R1Y3RJRCwgdWludDI1NiBfcHJpY2UsIHVpbnQyNTYgX3RpbWVzdGFtcHMpOwogICAgZXZlbnQgUHJvZml0VHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUsIHVpbnQyNTYgX3Byb2ZpdCwgdWludDI1NiBfdGltZXN0YW1wcyk7CiAgICBldmVudCBGcm96ZW5GdW5kcyhhZGRyZXNzIF90YXJnZXQsIHVpbnQyNTYgX3RpbWVzdGFtcHMsIHVpbnQyNTYgX2Zyb3plbnRvKTsgCiAgICBldmVudCBsb2dwcm9maXRhbmRzaGFyZSAodWludDI1NiBfc2hhcmVwcmljZSwgdWludDI1NiBfcHJvZml0bWFkZSk7CiAgICBldmVudCBSZXF1ZXNQcm9maXRGYWlsKGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlLCB1aW50MjU2IF9wcm9maXQsIHVpbnQyNTYgX3RpbWVzdGFtcHMpOwogICAgZXZlbnQgQWRkTmV3UHJvZHVjdCh1aW50MjU2IF9JRCwgc3RyaW5nIF9uYW1lLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBhZG1pbik7CiAgICBldmVudCBQcm9kdWN0RGVsZXRlZCh1aW50MjU2IF9JRCwgYWRkcmVzcyBhZG1pbik7CiAgICBldmVudCBQcm9kdWN0VXBkYXRlZCh1aW50MjU2IF9JRCwgc3RyaW5nIF9uYW1lLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBhZG1pbik7CiAgICBldmVudCBTaG9wSXRlbVNvbGQoYWRkcmVzcyBpbmRleGVkIF9wdXJjaGFzZXIsIGFkZHJlc3MgaW5kZXhlZCBfU2VsbGVyLCB1aW50IGluZGV4ZWQgSXRlbUlELCB1aW50MjU2IF9wcmljZSwgdWludCB0aW1lc3RhbXApOyAgICAKICAgIGV2ZW50IFNob3BGcm9udEVuZChhZGRyZXNzIGluZGV4ZWQgX3B1cmNoYXNlciwgYWRkcmVzcyBpbmRleGVkIF9TZWxsZXIsIHVpbnQgaW5kZXhlZCBJdGVtSUQsIHVpbnQyNTYgX3ByaWNlLCB1aW50IHRpbWVzdGFtcCk7ICAgIAoKICAgIGZ1bmN0aW9uIFNwYW5Db2luKHVpbnQyNTYgaW5pdGlhbFN1cHBseSx1aW50MjU2IF9zdGFydFRpbWUsdWludDI1NiBfZW5kVGltZSx1aW50MjU2IF9yYXRlLHVpbnQyNTYgX2N1cnJlbnRCb251cykKICAgICBTcGFuVG9rZW4oaW5pdGlhbFN1cHBseSxfc3RhcnRUaW1lLF9lbmRUaW1lLF9yYXRlLF9jdXJyZW50Qm9udXMpIHB1YmxpY3sKICAgIH0KICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlewogICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSAhPSAwKTsKICAgICAgICAgIH0KICAgIGZ1bmN0aW9uIFB1cmNoYXNlVG9rZW4oKSBwdWJsaWMgcGF5YWJsZXsKICAgICAgICByZXF1aXJlKCBtc2cudmFsdWUgPiAwKTsKICAgICAgICAgdWludDI1NiB0b2tlbnMgPSBtc2cudmFsdWUuc2FmZU11bChSYXRlKTsKICAgICAgICAgdWludDI1NiBCb251c1Rva2VucyA9IHRva2Vucy5zYWZlRGl2KDEwMCkuc2FmZU11bChjdXJyZW50Qm9udXMpOwogICAgICBpZiAobm93ID4gU3RhcnRUaW1lICYmIG5vdyA8IEVuZFRpbWUpewogICAgICAgICAgICBfdHJhbnNmZXIob25seWFkbWluLG1zZy5zZW5kZXIsdG9rZW5zICsgQm9udXNUb2tlbnMpOwogICAgICAgIENvaW5QdXJjaGFzZShtc2cuc2VuZGVyLCB0b2tlbnMgKyBCb251c1Rva2Vucyk7CiAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdHJhbnNmZXIob25seWFkbWluLG1zZy5zZW5kZXIsdG9rZW5zKTsKICAgICAgICBDb2luUHVyY2hhc2UobXNnLnNlbmRlciwgdG9rZW5zKTsKICAgICAgIH0KICAgICAgICB9CiAgICBmdW5jdGlvbiBidXl0b2JlbmVmaWNpYXJ5KGFkZHJlc3MgYmVuZWZpY2lhcnkpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKGJlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkgJiYgbXNnLnZhbHVlID4gMCk7CiAgICAgICAgcmVxdWlyZShub3cgPiBTdGFydFRpbWUgJiYgbm93IDwgRW5kVGltZSk7CiAgICAgICAgdWludDI1NiB0b2tlbnRvQW1vdW50ID0gbXNnLnZhbHVlLnNhZmVNdWwoUmF0ZSk7CiAgICAgICAgdWludDI1NiBib3VudHl0b2tlbiA9IHRva2VudG9BbW91bnQuc2FmZURpdigxMCk7CiAgICAgICAgX3RyYW5zZmVyKG9ubHlhZG1pbiwgbXNnLnNlbmRlciwgdG9rZW50b0Ftb3VudCk7CiAgICAgICAgX3RyYW5zZmVyKG9ubHlhZG1pbiwgYmVuZWZpY2lhcnksIGJvdW50eXRva2VuKTsKICAgICAgICBUb2tlblB1cmNoYXNlKG1zZy5zZW5kZXIsIGJlbmVmaWNpYXJ5LCB0b2tlbnRvQW1vdW50LCBib3VudHl0b2tlbik7CiAgICB9CiAgICBmdW5jdGlvbiBwYXlwcm9kdWN0ICh1aW50MjU2IF9Qcm9kdWN0SUQpIHB1YmxpYyByZXR1cm5zIChib29sKXsKICAgICAgICB1aW50MjU2IHByaWNlID0gcHJvZHVjdHNbX1Byb2R1Y3RJRF0uUHJvZHVjdFByaWNlOwogICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IHByaWNlICYmIHByaWNlID4gMCApIHsKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgb25seWFkbWluLCBwcmljZSk7CiAgICAgICAgU2VydmljZVB1cmNoYXNlKG1zZy5zZW5kZXIsIF9Qcm9kdWN0SUQsIHByaWNlLCBub3cpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KICAgICAgICAgICAgLy9pbiBjYXNlIG9mIG1hbnVhbCB3aXRoZHJhd2FsCiAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aGVyKCkgcHVibGljIG9ubHlPd25lciAgewoJICAgICAgICBvbmx5YWRtaW4udHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgICAJfQogICAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICB1aW50IHByZXZpb3VzQmFsYW5jZXMgPSBiYWxhbmNlc1tfZnJvbV0gKyBiYWxhbmNlc1tfdG9dOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICBhc3NlcnQoYmFsYW5jZXNbX2Zyb21dICsgYmFsYW5jZXNbX3RvXSA9PSBwcmV2aW91c0JhbGFuY2VzKTsKICAgIH0gICAgICAJCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICAgICAKLy8gICAgICAgICAgICAgICBFUkMyMyBzdGFydCBIZXJlICAgICAgICAgICAvLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIG5vdGZyb3plbiBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy9maWx0ZXJpbmcgaWYgdGhlIHRhcmdldCBpcyBhIGNvbnRyYWN0IHdpdGggYnl0ZWNvZGUgaW5zaWRlIGl0CiAgICAgICAgaWYoaXNDb250cmFjdChfdG8pKSB7CiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlclRvQ29udHJhY3QoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgbm90ZnJvemVuIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvL0Egc3RhbmRhcmQgZnVuY3Rpb24gdHJhbnNmZXIgc2ltaWxhciB0byBFUkMyMCB0cmFuc2ZlciB3aXRoIG5vIF9kYXRhCiAgICAgICAgaWYoaXNDb250cmFjdChfdG8pKSB7CiAgICAgICAgICAgIGJ5dGVzIG1lbW9yeSBlbXB0eURhdGE7CiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlclRvQ29udHJhY3QoX3RvLCBfdmFsdWUsIGVtcHR5RGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9BZGRyZXNzKF90bywgX3ZhbHVlKTsKICAgICAgICB9CiAgICB9ICAgICAKICAgIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wgaXNfY29udHJhY3QpIHsKICAgICAgdWludCBsZW5ndGg7CiAgICAgIGFzc2VtYmx5IHsgbGVuZ3RoIDo9IGV4dGNvZGVzaXplKF9hZGRyKSB9CiAgICAgICAgaWYobGVuZ3RoID4gMCl7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9BZGRyZXNzKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgbm90ZnJvemVuIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAgICAgcmVxdWlyZSAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApOwogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAKICAgICB9CiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvQ29udHJhY3QoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgbm90ZnJvemVuIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDAgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgQ29udHJhY3RSZWNlaXZlciByZWNpZXZlciA9IENvbnRyYWN0UmVjZWl2ZXIoX3RvKTsKICAgICAgICAgICAgcmVjaWV2ZXIudG9rZW5GYWxsYmFjayhtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICBDb250cmFjdFRyYW5zZmVyKF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgfQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gICAgIAovLyAgICAgUHJvZHVjdHMgbWFuYWdlbWVudCBzdGFydCBoZXJlICAgICAgIC8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gICAgICAKICAgIGZ1bmN0aW9uIGFkZFByb2R1Y3QodWludDI1NiBfUHJvZHVjdElELCBzdHJpbmcgcHJvZHVjdE5hbWUsIHVpbnQyNTYgcHJvZHVjdFByaWNlKSBvbmx5YXV0aG9yaXplZCBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKXsKICAgICAgICByZXF1aXJlKHByb2R1Y3RzW19Qcm9kdWN0SURdLlByb2R1Y3RJRCA9PSAwKTsKICAgICAgICBwcm9kdWN0c1tfUHJvZHVjdElEXSA9IFByaWNlVGFibGUoX1Byb2R1Y3RJRCwgcHJvZHVjdE5hbWUsIHByb2R1Y3RQcmljZSk7CiAgICAgICAgQWRkTmV3UHJvZHVjdChfUHJvZHVjdElELCBwcm9kdWN0TmFtZSwgcHJvZHVjdFByaWNlLCBtc2cuc2VuZGVyKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIGRlbGV0ZVByb2R1Y3QodWludDI1NiBfUHJvZHVjdElEKSBvbmx5YXV0aG9yaXplZCBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKXsKICAgICAgICBkZWxldGUgcHJvZHVjdHNbX1Byb2R1Y3RJRF07CiAgICAgICAgUHJvZHVjdERlbGV0ZWQoX1Byb2R1Y3RJRCwgbXNnLnNlbmRlcik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICBmdW5jdGlvbiB1cGRhdGVQcm9kdWN0KHVpbnQyNTYgX1Byb2R1Y3RJRCwgc3RyaW5nIF9wcm9kdWN0TmFtZSwgdWludDI1NiBfcHJvZHVjdFByaWNlKSBvbmx5YXV0aG9yaXplZCBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKXsKICAgICAgICByZXF1aXJlKHByb2R1Y3RzW19Qcm9kdWN0SURdLlByb2R1Y3RJRCA9PSBfUHJvZHVjdElEICYmIF9wcm9kdWN0UHJpY2UgPiAwKTsKICAgICAgICBwcm9kdWN0c1tfUHJvZHVjdElEXSA9IFByaWNlVGFibGUoX1Byb2R1Y3RJRCwgX3Byb2R1Y3ROYW1lLCBfcHJvZHVjdFByaWNlKTsKICAgICAgICBQcm9kdWN0VXBkYXRlZChfUHJvZHVjdElELCBfcHJvZHVjdE5hbWUsIF9wcm9kdWN0UHJpY2UsIG1zZy5zZW5kZXIpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZnVuY3Rpb24gZ2V0UHJvZHVjdCh1aW50MjU2IF9Qcm9kdWN0SUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2ICwgc3RyaW5nICwgdWludDI1NikgewogICAgICAgcmV0dXJuIChwcm9kdWN0c1tfUHJvZHVjdElEXS5Qcm9kdWN0SUQsCiAgICAgICAgICAgICAgIHByb2R1Y3RzW19Qcm9kdWN0SURdLlByb2R1Y3ROYW1lLAogICAgICAgICAgICAgICBwcm9kdWN0c1tfUHJvZHVjdElEXS5Qcm9kdWN0UHJpY2UpOwogICAgfQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAgICAgCi8vICAgICBTaG9wIG1hbmFnZW1lbnQgc3RhcnQgaGVyZSAgICAgICAgICAgLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAgICAgCgogICAgZnVuY3Rpb24gcGF5c2hvcChhZGRyZXNzIF9TZWxsZXIsIHVpbnQyNTYgcHJpY2UsIHVpbnQgSXRlbUlEKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNlc3MpewogICAgICAgcmVxdWlyZSAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gcHJpY2UgJiYgcHJpY2UgPiAwICk7CiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsX1NlbGxlcixwcmljZSk7CiAgICAgICAgU2hvcEl0ZW1Tb2xkKG1zZy5zZW5kZXIsIF9TZWxsZXIsIEl0ZW1JRCwgcHJpY2UsIG5vdyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgCiAgICB9IAogICAgZnVuY3Rpb24gcGF5c2hvcHdpdGhmZWVzKGFkZHJlc3MgX1NlbGxlciwgdWludDI1NiBfdmFsdWUsIHVpbnQgSXRlbUlEKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNlc3MpewogICAgICAgIHJlcXVpcmUgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKTsKICAgICAgICB1aW50MjU2IHByaWNlYWZ0ZXJjb21tID0gX3ZhbHVlLnNhZmVNdWwoOTAwKS5zYWZlRGl2KDEwMDApOwogICAgICAgIHVpbnQyNTYgYW1vdW50b2Zjb21tID0gX3ZhbHVlLnNhZmVTdWIocHJpY2VhZnRlcmNvbW0pOwogICAgICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBvbmx5YWRtaW4sIGFtb3VudG9mY29tbSk7CiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF9TZWxsZXIsIHByaWNlYWZ0ZXJjb21tKTsKICAgICAgICBTaG9wRnJvbnRFbmQobXNnLnNlbmRlciwgX1NlbGxlciwgSXRlbUlELCBfdmFsdWUsIG5vdyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9ICAgICAKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gICAgIAovLyAgICAgRGV2aWRlbmRzIEZ1bmN0aW9ucyBzdGFydCBoZXJlICAgICAgIC8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gIAogICAgIC8vIFNldCBtb250aGx5IHByb2ZpdCBpcyBieSBjb250cmFjdCBvd25lciB0byBhZGQgY29tcGFueSBwcm9maXQgbWFkZQogICAgIC8vIGNvbnRyYWN0IGNhbGN1bGF0ZSB0aGUgdG9rZW4gdmFsdWUgZnJvbSBwcm9maXQgYW5kIGJ1aWxkIGludGVyZXN0IHJhdGUKICAgICAvLyBTaGFyZWhvbGRlciBpcyB0aGUgcmVxdWVzdCBvd25lciAKICAgICAvLyBjb250cmFjdCBjYWxjdWxhdGUgdGhlIGFtb3VudCBhbmQgcmV0dXJuIHRoZSBwcm9maXQgdmFsdWUgdG8gdHJhbnNmZXIgCiAgICAgLy8gYmFsYW5jZSBpbiBldGhlciB3aWxsIGJlIHRyYW5zZmVyZWQgdG8gc2hhcmUgaG9sZGVyCiAgICAgLy8gYWNjb3VudCB3aWxsIGJlIGZyb3plbiBmcm9tIHNlbmRpbmcgZnVuZHMgdG8gb3RoZXIgYWRkcmVzc2VzIHRvIHByZXZlbnQgZnJhdWQgYW5kIGRvdWJsZSBwcm9maXQgY2xhaW1pbmcKICAgICAvLyBob3dldmVyIHNwZW5kaW5nIHRva2VucyBvbiB3ZWJzaXRlIHdpbGwgbm90IGJlIGFmZmVjdGVkCiAgICBmdW5jdGlvbiBTZXRtb250aGx5cHJvZml0KHVpbnQyNTYgX21vbnRoUHJvZml0LCB1aW50MjU2IF9tb250aFByb2ZpdFN0YXJ0LCB1aW50MjU2IF9tb250aFByb2ZpdEVuZCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgTW9udGhzUHJvZml0ID0gX21vbnRoUHJvZml0OwogICAgICAgIE1vbnRocHJvZml0c3RhcnQgPSBfbW9udGhQcm9maXRTdGFydDsKICAgICAgICBNb250aHByb2ZpdGVuZCA9IF9tb250aFByb2ZpdEVuZDsKICAgICAgICBCdWlsZGludGVyZXN0KCk7CiAgICAgICAgbG9ncHJvZml0YW5kc2hhcmUoU2hhcmVQcmljZSwgTW9udGhzUHJvZml0KTsKICAgICAgfQogICAgZnVuY3Rpb24gQnVpbGRpbnRlcmVzdCgpIGludGVybmFsIHJldHVybnModWludDI1Nil7CiAgICAgICAgaWYgKE1vbnRoc1Byb2ZpdCA9PSAwKSB7CiAgICAgICAgICAgcmV0dXJuIDA7fQogICAgdWludDI1NiBtb250aHNwcm9maXR3ZWkgPSBNb250aHNQcm9maXQuc2FmZU11bCgxIGV0aGVyKTsgICAgLy8gdHVybiB0aGUgdmFsdWUgdG8gMTggZGlnaXRzIHdlaSBhbW91bnQKICAgIHVpbnQyNTYgX1NoYXJlUHJpY2UgPSBtb250aHNwcm9maXR3ZWkuc2FmZURpdig1MDAwMDAwMCk7ICAgICAgICAgICAgLy8gU2V0IFogYW1vdW50CiAgICBTaGFyZVByaWNlID0gX1NoYXJlUHJpY2U7CiAgICAgYXNzZXJ0KFNoYXJlUHJpY2UgPT0gX1NoYXJlUHJpY2UpOwogICAgfQogICAgZnVuY3Rpb24gUmVxdWVzdHByb2ZpdCgpIHB1YmxpYyByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXF1aXJlKG5vdyA+IE1vbnRocHJvZml0c3RhcnQgJiYgbm93IDwgTW9udGhwcm9maXRlbmQpOwogICAgICAgIHJlcXVpcmUgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IDUwMDAwMEUxOCAmJiBmcm96ZW5BY2NvdW50W21zZy5zZW5kZXJdIDwgbm93KTsKCiAgICAgICAgdWludDI1NiBhY3R1YWxjbGFpbWFibGUgPSAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gLyAxIGV0aGVyKTsgCiAgICAgICAgdWludDI1NiBhY3R1YWxwcm9maXQgPSBhY3R1YWxjbGFpbWFibGUuc2FmZU11bChTaGFyZVByaWNlKTsKICAgICAgIC8vIHVpbnQyNTYgYWN0dWFscHJvZml0YWZ0ZXJ0eG4gPSBhY3R1YWxwcm9maXQuc2FmZU11bCg5MDApLnNhZmVEaXYoMTAwMCk7CiAgICAgICAgaWYoYWN0dWFscHJvZml0ICE9IDApewogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoYWN0dWFscHJvZml0KTsKICAgICAgICBmcmVlemVBY2NvdW50KCk7CiAgICAgICAgUHJvZml0VHJhbnNmZXIobXNnLnNlbmRlciwgYmFsYW5jZXNbbXNnLnNlbmRlcl0sIGFjdHVhbHByb2ZpdCwgbm93KTsKICAgICAgICBGcm96ZW5GdW5kcyhtc2cuc2VuZGVyLCBub3csIGZyb3plbkFjY291bnRbbXNnLnNlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZXsgUmVxdWVzUHJvZml0RmFpbChtc2cuc2VuZGVyLCBhY3R1YWxjbGFpbWFibGUsIGFjdHVhbHByb2ZpdCwgbm93KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgfQogICAgIH0KICAgIGZ1bmN0aW9uIGZyZWV6ZUFjY291bnQoKSBpbnRlcm5hbCByZXR1cm5zKGJvb2wpIHsKICAgICAgICBmcm96ZW5BY2NvdW50W21zZy5zZW5kZXJdID0gbm93ICsgKE1vbnRocHJvZml0ZW5kIC0gbm93KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIEZPUkNFZnJlZXplQWNjb3VudCh1aW50MjU2IGZyb3plbnRpbWUsIGFkZHJlc3MgdGFyZ2V0KSBvbmx5T3duZXIgcHVibGljIHJldHVybnMoYm9vbCkgewogICAgICAgIGZyb3plbkFjY291bnRbdGFyZ2V0XSA9IGZyb3plbnRpbWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvL3JlcG9ydGVkIGxvc3Qgd2FsbGV0IC8vQ3JpdGljYWwgZW1lcmdlbmN5CiAgICBmdW5jdGlvbiBCdXN0VG9rZW5zKGFkZHJlc3MgX3RhcmdldCwgdWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpewogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX3RhcmdldF0gPiAwKTsKICAgICAgICBfdHJhbnNmZXIoX3RhcmdldCwgb25seWFkbWluLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ=='.
	

]
