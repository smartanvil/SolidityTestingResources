Class {
	#name : #SRTAef38fBFBF932D1AeF3B808Bc8fBd8Cd8E1f8BC5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTAef38fBFBF932D1AeF3B808Bc8fBd8Cd8E1f8BC5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCmNvbnRyYWN0IElDcmVkaXRCT05EewogICAgZnVuY3Rpb24gZ2V0Qm9uZE11bHRpcGxpZXIodWludCBfY3JlZGl0QW1vdW50LCB1aW50IF9sb2NrdGltZSkgY29uc3RhbnQgcmV0dXJucyAodWludCBib25kTXVsdGlwbGllcikge30KICAgIGZ1bmN0aW9uIGdldE5ld0NvaW5zSXNzdWVkKHVpbnQgX2xvY2tlZEJhbGFuY2UsIHVpbnQgX2Jsb2NrRGlmZmVyZW5jZSwgdWludCBfcGVyY2VudFJld2FyZCkgY29uc3RhbnQgcmV0dXJucyh1aW50IG5ld0NvaW5zSXNzdWVkKXt9Cn0KCmNvbnRyYWN0IElUb2tlblJlY2lwaWVudCB7IAogICAgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90b2tlbiwgYnl0ZXMgX2V4dHJhRGF0YSk7IAp9Cgpjb250cmFjdCBJRVJDMjBUb2tlbiB7CgogICAgLy8vIEByZXR1cm4gdG90YWwgYW1vdW50IG9mIHRva2VucwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkge30KCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHt9CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CgogICAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfYWRkcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB3ZWkgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykge30gICAKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBDcmVkaXRCSVQgaXMgSUVSQzIwVG9rZW4gewoKICAgIHN0cnVjdCBDcmVkaXRCYWxhbmNlewogICAgICAgIHVpbnQgYXZhbGlhYmxlQmFsYW5jZTsKICAgICAgICB1aW50IGxvY2tlZEJhbGFuY2U7CgogICAgICAgIHVpbnQgYm9uZE11bHRpcGxpZXI7CiAgICAgICAgdWludCBsb2NrZWRVbnRpbEJsb2NrOwogICAgICAgIHVpbnQgbGFzdEJsb2NrQ2xhaW1lZDsKICAgIH0KCglhZGRyZXNzIHB1YmxpYyBkZXY7CglhZGRyZXNzIHB1YmxpYyBjcmVkaXREYW9BZGRyZXNzOwogICAgSUNyZWRpdEJPTkQgY3JlZGl0Qm9uZDsKICAgIGFkZHJlc3MgcHVibGljIGNyZWRpdEdhbWVBZGRyZXNzOwogICAgYWRkcmVzcyBwdWJsaWMgY3JlZGl0TWNBZGRyZXNzOwogICAgYm9vbCBwdWJsaWMgbG9ja2Rvd247CgogICAgc3RyaW5nIHB1YmxpYyBzdGFuZGFyZCA9ICdDcmVkaXRiaXQgMS4wJzsKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICdDcmVkaXRCSVQnOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAnQ1JCJzsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDg7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSAwOwogICAgdWludCBwdWJsaWMgdG90YWxBdmFsaWFibGVTdXBwbHkgPSAwOwogICAgdWludCBwdWJsaWMgdG90YWxMb2NrZWRTdXBwbHkgPSAwOyAKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IENyZWRpdEJhbGFuY2UpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIC8vZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICAvL2V2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgTG9ja0NyZWRpdHMoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2Ftb3VudCwgdWludCBfbnVtYmVyT2ZCbG9ja3MpOwogICAgZXZlbnQgVW5sb2NrQ3JlZGl0cyhhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KTsKICAgIGV2ZW50IE1pbnQoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2Ftb3VudCk7CgogICAgZnVuY3Rpb24gQ3JlZGl0QklUKCkgewogICAgICAgIGRldiA9IG1zZy5zZW5kZXI7CiAgICAgICAgbG9ja2Rvd24gPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYXZhbGlhYmxlQmFsYW5jZSl7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl0uYXZhbGlhYmxlQmFsYW5jZTsKICAgIH0KCiAgICBmdW5jdGlvbiBsb2NrZWRCYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYXZhbGlhYmxlQmFsYW5jZSl7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl0ubG9ja2VkQmFsYW5jZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRBY2NvdW50RGF0YShhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBhdmFsaWFibGVCYWxhbmNlLCB1aW50IGxvY2tlZEJhbGFuY2UsIHVpbnQgYm9uZE11bHRpcGxpZXIsIHVpbnQgbG9ja2VkVW50aWxCbG9jaywgdWludCBsYXN0QmxvY2tDbGFpbWVkKXsKICAgICAgICBDcmVkaXRCYWxhbmNlIG1lbW9yeSB0ZW1wQWNjb3VudERhdGEgPSBiYWxhbmNlc1tfb3duZXJdOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHRlbXBBY2NvdW50RGF0YS5hdmFsaWFibGVCYWxhbmNlLAogICAgICAgICAgICB0ZW1wQWNjb3VudERhdGEubG9ja2VkQmFsYW5jZSwKICAgICAgICAgICAgdGVtcEFjY291bnREYXRhLmJvbmRNdWx0aXBsaWVyLAogICAgICAgICAgICB0ZW1wQWNjb3VudERhdGEubG9ja2VkVW50aWxCbG9jaywKICAgICAgICAgICAgdGVtcEFjY291bnREYXRhLmxhc3RCbG9ja0NsYWltZWQKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIGxvY2tCYWxhbmNlKHVpbnQgX2Ftb3VudCwgdWludCBfbG9ja0ZvckJsb2NrcykgcmV0dXJucyAodWludCBlcnJvcil7CiAgICAgICAgaWYgKGxvY2tkb3duKSB0aHJvdzsKICAgICAgICB1aW50IHJlYWxCbG9ja3NMb2NrZWQ7CiAgICAgICAgaWYgKGJsb2NrLm51bWJlciArIF9sb2NrRm9yQmxvY2tzIDwgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja2VkVW50aWxCbG9jayl7CiAgICAgICAgICAgIHJlYWxCbG9ja3NMb2NrZWQgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrZWRVbnRpbEJsb2NrOwogICAgICAgIH1lbHNlewogICAgICAgICAgICByZWFsQmxvY2tzTG9ja2VkID0gYmxvY2subnVtYmVyICsgX2xvY2tGb3JCbG9ja3M7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHVpbnQgcmVhbEFtb3VudDsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0uYXZhbGlhYmxlQmFsYW5jZSA8IChfYW1vdW50ICogMTAqKjgpKSB7CiAgICAgICAgICAgIHJlYWxBbW91bnQgPSAoYmFsYW5jZXNbbXNnLnNlbmRlcl0uYXZhbGlhYmxlQmFsYW5jZSAvIDEwKio4KSAqIDEwKio4OwogICAgICAgIH1lbHNlewogICAgICAgICAgICByZWFsQW1vdW50ID0gKF9hbW91bnQgKiAxMCoqOCk7CiAgICAgICAgfQoKICAgICAgICB1aW50IG5ld0JvbmRNdWx0aXBsaWVyID0gY3JlZGl0Qm9uZC5nZXRCb25kTXVsdGlwbGllcihyZWFsQW1vdW50LCByZWFsQmxvY2tzTG9ja2VkKTsKICAgICAgICBpZiAobmV3Qm9uZE11bHRpcGxpZXIgPT0gMCkgdGhyb3c7CgogICAgICAgIHVpbnQgY2xhaW1FcnJvciA9IGNsYWltQm9uZFJld2FyZCgpOwoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hdmFsaWFibGVCYWxhbmNlIC09IHJlYWxBbW91bnQ7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja2VkQmFsYW5jZSArPSByZWFsQW1vdW50OwogICAgICAgIHRvdGFsQXZhbGlhYmxlU3VwcGx5IC09IHJlYWxBbW91bnQ7CiAgICAgICAgdG90YWxMb2NrZWRTdXBwbHkgKz0gcmVhbEFtb3VudDsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5ib25kTXVsdGlwbGllciA9IG5ld0JvbmRNdWx0aXBsaWVyOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmxvY2tlZFVudGlsQmxvY2sgPSByZWFsQmxvY2tzTG9ja2VkOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmxhc3RCbG9ja0NsYWltZWQgPSBibG9jay5udW1iZXI7CgogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbnRNaWdyYXRpb25Ub2tlbnMoYWRkcmVzcyBfcmVjaWV2ZXIsIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAodWludCBlcnJvcil7CiAgICAgIAogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNyZWRpdE1jQWRkcmVzcykgeyByZXR1cm4gMTsgfQogICAgICAgIAogICAgICAgIG1pbnQoX2Ftb3VudCwgX3JlY2lldmVyKTsKICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBjbGFpbUJvbmRSZXdhcmQoKSByZXR1cm5zICh1aW50IGVycm9yKXsKICAgICAgICBpZiAobG9ja2Rvd24pIHRocm93OwogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrZWRCYWxhbmNlID09IDApIHsgcmV0dXJuIDE7fQogICAgICAgIAogICAgICAgIHVpbnQgYmxvY2tEaWZmZXJlbmNlID0gYmxvY2subnVtYmVyIC0gYmFsYW5jZXNbbXNnLnNlbmRlcl0ubGFzdEJsb2NrQ2xhaW1lZDsKICAgICAgICBpZiAoYmxvY2tEaWZmZXJlbmNlIDwgMTApeyByZXR1cm4gMTt9CiAgICAgICAgCiAgICAgICAgdWludCBuZXdDcmVkaXRzSXNzdWVkID0gY3JlZGl0Qm9uZC5nZXROZXdDb2luc0lzc3VlZCgKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja2VkQmFsYW5jZSwgCiAgICAgICAgICAgIGJsb2NrRGlmZmVyZW5jZSwgCiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmJvbmRNdWx0aXBsaWVyKTsKICAgICAgICBpZiAobmV3Q3JlZGl0c0lzc3VlZCA9PSAwKSB7IHJldHVybiAxOyB9CiAgICAgICAgCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdLmxvY2tlZFVudGlsQmxvY2sgPCBibG9jay5udW1iZXIgKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmF2YWxpYWJsZUJhbGFuY2UgKz0gYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja2VkQmFsYW5jZTsKICAgICAgICAgICAgdG90YWxBdmFsaWFibGVTdXBwbHkgKz0gYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja2VkQmFsYW5jZTsKICAgICAgICAgICAgdG90YWxMb2NrZWRTdXBwbHkgLT0gYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja2VkQmFsYW5jZTsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0uYm9uZE11bHRpcGxpZXIgPSAwOwogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrZWRVbnRpbEJsb2NrID0gMDsKICAgICAgICAgICAgVW5sb2NrQ3JlZGl0cyhtc2cuc2VuZGVyLCBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrZWRCYWxhbmNlKTsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja2VkQmFsYW5jZSA9IDA7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmxhc3RCbG9ja0NsYWltZWQgPSBibG9jay5udW1iZXI7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIG1pbnQobmV3Q3JlZGl0c0lzc3VlZCwgbXNnLnNlbmRlcik7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNsYWltR2FtZVJld2FyZChhZGRyZXNzIF9jaGFtcGlvbiwgdWludCBfbG9ja2VkVG9rZW5BbW91bnQsIHVpbnQgX2xvY2tUaW1lKSByZXR1cm5zICh1aW50IGVycm9yKXsKICAgICAgICBpZiAobG9ja2Rvd24pIHRocm93OwogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNyZWRpdEdhbWVBZGRyZXNzKSB7IHJldHVybiAxOyB9CiAgICAgICAgCiAgICAgICAgdWludCBuZXdDcmVkaXRzSXNzdWVkID0gY3JlZGl0Qm9uZC5nZXROZXdDb2luc0lzc3VlZCgKICAgICAgICAgICAgX2xvY2tlZFRva2VuQW1vdW50LCAKICAgICAgICAgICAgX2xvY2tUaW1lLCAKICAgICAgICAgICAgY3JlZGl0Qm9uZC5nZXRCb25kTXVsdGlwbGllcihfbG9ja2VkVG9rZW5BbW91bnQsIF9sb2NrVGltZSArIGJsb2NrLm51bWJlcikpOwogICAgICAgIGlmIChuZXdDcmVkaXRzSXNzdWVkID09IDApIHsgcmV0dXJuIDE7IH0KICAgICAgICBtaW50KG5ld0NyZWRpdHNJc3N1ZWQsIF9jaGFtcGlvbik7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgZnVuY3Rpb24gbWludEJvbnVzVG9rZW5zRm9yR2FtZXModWludCBfYW1vdW50KSByZXR1cm5zICh1aW50IGVycm9yKXsKICAgICAgICBpZiAobG9ja2Rvd24pIHRocm93OwogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNyZWRpdERhb0FkZHJlc3MpIHsgcmV0dXJuIDE7IH0KCiAgICAgICAgbWludChfYW1vdW50LCBjcmVkaXRHYW1lQWRkcmVzcyk7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgZnVuY3Rpb24gbWludCh1aW50IF9uZXdDcmVkaXRzSXNzdWVkLCBhZGRyZXNzIF9zZW5kZXIpIGludGVybmFsIHsKICAgICAgIAogICAgICAgIHRvdGFsU3VwcGx5ICs9IF9uZXdDcmVkaXRzSXNzdWVkOwogICAgICAgIHRvdGFsQXZhbGlhYmxlU3VwcGx5ICs9IF9uZXdDcmVkaXRzSXNzdWVkOwogICAgICAgIGJhbGFuY2VzW19zZW5kZXJdLmF2YWxpYWJsZUJhbGFuY2UgKz0gX25ld0NyZWRpdHNJc3N1ZWQ7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBfc2VuZGVyLCBfbmV3Q3JlZGl0c0lzc3VlZCk7CiAgICAgICAgTWludChfc2VuZGVyLCBfbmV3Q3JlZGl0c0lzc3VlZCk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpewogICAgICAgIGlmIChsb2NrZG93bikgdGhyb3c7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdLmF2YWxpYWJsZUJhbGFuY2UgPCBfdmFsdWUpIHRocm93OwogICAgICAgIGlmIChiYWxhbmNlc1tfdG9dLmF2YWxpYWJsZUJhbGFuY2UgKyBfdmFsdWUgPCBiYWxhbmNlc1tfdG9dLmF2YWxpYWJsZUJhbGFuY2UpIHRocm93OwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmF2YWxpYWJsZUJhbGFuY2UgLT0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VzW190b10uYXZhbGlhYmxlQmFsYW5jZSArPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChsb2NrZG93bikgdGhyb3c7CiAgICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGxvY2tkb3duKSB0aHJvdzsKICAgICAgICBJVG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IElUb2tlblJlY2lwaWVudChfc3BlbmRlcik7CiAgICAgICAgaWYgKGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSkpIHsKICAgICAgICAgICAgc3BlbmRlci5yZWNlaXZlQXBwcm92YWwobXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfSAgICAgICAgCgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGxvY2tkb3duKSB0aHJvdzsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dLmF2YWxpYWJsZUJhbGFuY2UgPCBfdmFsdWUpIHRocm93OwogICAgICAgIGlmIChiYWxhbmNlc1tfdG9dLmF2YWxpYWJsZUJhbGFuY2UgKyBfdmFsdWUgPCBiYWxhbmNlc1tfdG9dLmF2YWxpYWJsZUJhbGFuY2UpIHRocm93OwogICAgICAgIGlmIChfdmFsdWUgPiBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKSB0aHJvdzsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0uYXZhbGlhYmxlQmFsYW5jZSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZXNbX3RvXS5hdmFsaWFibGVCYWxhbmNlICs9IF92YWx1ZTsKICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRDcmVkaXRCb25kKGFkZHJlc3MgX2JvbmRBZGRyZXNzKSByZXR1cm5zICh1aW50IGVycm9yKXsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBjcmVkaXREYW9BZGRyZXNzKSB7cmV0dXJuIDE7fQogICAgICAgIAogICAgICAgIGNyZWRpdEJvbmQgPSBJQ3JlZGl0Qk9ORChfYm9uZEFkZHJlc3MpOwogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldENyZWRpdEJvbmRBZGRyZXNzKCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyBib25kQWRkcmVzcyl7CiAgICAgICAgcmV0dXJuIGFkZHJlc3MoY3JlZGl0Qm9uZCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldENyZWRpdERhb0FkZHJlc3MoYWRkcmVzcyBfZGFvQWRkcmVzcykgcmV0dXJucyAodWludCBlcnJvcil7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gZGV2KSB7cmV0dXJuIDE7fQogICAgICAgIAogICAgICAgIGNyZWRpdERhb0FkZHJlc3MgPSBfZGFvQWRkcmVzczsKICAgICAgICByZXR1cm4gMDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0Q3JlZGl0R2FtZUFkZHJlc3MoYWRkcmVzcyBfZ2FtZUFkZHJlc3MpIHJldHVybnMgKHVpbnQgZXJyb3IpewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNyZWRpdERhb0FkZHJlc3MpIHtyZXR1cm4gMTt9CiAgICAgICAgCiAgICAgICAgY3JlZGl0R2FtZUFkZHJlc3MgPSBfZ2FtZUFkZHJlc3M7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldENyZWRpdE1jQWRkcmVzcyhhZGRyZXNzIF9tY0FkZHJlc3MpIHJldHVybnMgKHVpbnQgZXJyb3IpewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNyZWRpdERhb0FkZHJlc3MpIHtyZXR1cm4gMTt9CiAgICAgICAgCiAgICAgICAgY3JlZGl0TWNBZGRyZXNzID0gX21jQWRkcmVzczsKICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBsb2NrVG9rZW4oKSByZXR1cm5zICh1aW50IGVycm9yKXsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBjcmVkaXREYW9BZGRyZXNzKSB7cmV0dXJuIDE7fQoKICAgICAgICBsb2NrZG93biA9ICFsb2NrZG93bjsKICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb3c7CiAgICB9Cn0='.
	

]
