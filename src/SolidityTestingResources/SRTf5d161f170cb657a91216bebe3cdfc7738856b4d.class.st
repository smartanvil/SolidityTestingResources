Class {
	#name : #SRTf5d161f170cb657a91216bebe3cdfc7738856b4d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf5d161f170cb657a91216bebe3cdfc7738856b4d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7Cgpjb250cmFjdCBTYWZlTWF0aCB7CiAgICAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgICAgdWludCBjID0gYSAqIGI7CiAgICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgICAgcmV0dXJuIGM7CiAgICAgfQoKICAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICAgIHJldHVybiBhIC0gYjsKICAgICB9CgogICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICAgIHVpbnQgYyA9IGEgKyBiOwogICAgICAgICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICAgICAgICByZXR1cm4gYzsKICAgICB9Cn0KCi8vIFN0YW5kYXJkIHRva2VuIGludGVyZmFjZSAoRVJDIDIwKQovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKY29udHJhY3QgVG9rZW4gaXMgU2FmZU1hdGggewogICAgIC8vIEZ1bmN0aW9uczoKICAgICAvLy8gQHJldHVybiB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7CgogICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zKGJvb2wpOwoKICAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMoYm9vbCk7CgogICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX2FkZHJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB3ZWkgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgICAvLyBFdmVudHM6CiAgICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IFN0ZFRva2VuIGlzIFRva2VuIHsKICAgICAvLyBGaWVsZHM6CiAgICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgICB1aW50IHB1YmxpYyBzdXBwbHkgPSAwOwoKICAgICAvLyBGdW5jdGlvbnM6CiAgICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKICAgICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pOwoKICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSxfdmFsdWUpOwogICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSxfdmFsdWUpOwoKICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KCiAgICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyhib29sKXsKICAgICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSk7CiAgICAgICAgICByZXF1aXJlKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICAgICAgICByZXF1aXJlKGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKTsKCiAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLF92YWx1ZSk7CiAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSxfdmFsdWUpOwogICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLF92YWx1ZSk7CgogICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KCiAgICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgICByZXR1cm4gc3VwcGx5OwogICAgIH0KCiAgICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgICB9CgogICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAgICAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgfQoKICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgIH0KfQoKY29udHJhY3QgWnVwcGx5VG9rZW4gaXMgU3RkVG9rZW4KewovLy8gRmllbGRzOgogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIlp1cHBseVRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlpVUCI7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIC8vIHRoaXMgaW5jbHVkZXMgREVWRUxPUEVSU19CT05VUwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9UQUxfU1VQUExZID0gNzUwMDAwMDAwICogKDEgZXRoZXIgLyAxIHdlaSk7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBERVZFTE9QRVJTX0JPTlVTID0gMTAwMDAwMDAwICogKDEgZXRoZXIgLyAxIHdlaSk7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBFQVJMWV9JTlZfQk9OVVMgPSA1MDAwMDAwMCAqICgxIGV0aGVyIC8gMSB3ZWkpOwoKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFBSRVNBTEVfUFJJQ0UgPSA0MDAwMDsgIC8vIHBlciAxIEV0aGVyCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQUkVTQUxFX01BWF9FVEggPSAyNTAwOwogICAgLy8gMTAwIG1sbiB0b2tlbnMgc29sZCBkdXJpbmcgcHJlc2FsZQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUFJFU0FMRV9UT0tFTl9TVVBQTFlfTElNSVQgPSBQUkVTQUxFX1BSSUNFICogUFJFU0FMRV9NQVhfRVRIICogKDEgZXRoZXIgLyAxIHdlaSk7CgogICAgdWludCBwdWJsaWMgY29uc3RhbnQgSUNPX1BSSUNFID0gMjAwMDA7ICAgICAvLyBwZXIgMSBFdGhlcgoKICAgIC8vIDYwMCBtbG4gLSB0aGlzIGluY2x1ZGVzIHByZXNhbGUgdG9rZW5zCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBUT1RBTF9TT0xEX1RPS0VOX1NVUFBMWV9MSU1JVCA9IDYwMDAwMDAwMCogKDEgZXRoZXIgLyAxIHdlaSk7CgogICAgZW51bSBTdGF0ZXsKICAgICAgIEluaXQsCiAgICAgICBQYXVzZWQsCgogICAgICAgUHJlc2FsZVJ1bm5pbmcsCiAgICAgICBQcmVzYWxlRmluaXNoZWQsCgogICAgICAgSUNPUnVubmluZywKICAgICAgIElDT0ZpbmlzaGVkCiAgICB9CgogICAgU3RhdGUgcHVibGljIGN1cnJlbnRTdGF0ZSA9IFN0YXRlLkluaXQ7CiAgICBib29sIHB1YmxpYyBlbmFibGVUcmFuc2ZlcnMgPSBmYWxzZTsKCiAgICBhZGRyZXNzIHB1YmxpYyB0ZWFtVG9rZW5Cb251cyA9IDA7CiAgICBhZGRyZXNzIHB1YmxpYyBlYXJseUludmVzdG9yc0JvbnVzID0gMDsKCiAgICAvLyBHYXRoZXJlZCBmdW5kcyBjYW4gYmUgd2l0aGRyYXduIG9ubHkgdG8gZXNjcm93J3MgYWRkcmVzcy4KICAgIGFkZHJlc3MgcHVibGljIGVzY3JvdyA9IDA7CgogICAgLy8gVG9rZW4gbWFuYWdlciBoYXMgZXhjbHVzaXZlIHByaXZlbGVnZXMgdG8gY2FsbCBhZG1pbmlzdHJhdGl2ZQogICAgLy8gZnVuY3Rpb25zIG9uIHRoaXMgY29udHJhY3QuCiAgICBhZGRyZXNzIHB1YmxpYyB0b2tlbk1hbmFnZXIgPSAwOwoKICAgIHVpbnQgcHVibGljIHByZXNhbGVTb2xkVG9rZW5zID0gMDsKICAgIHVpbnQgcHVibGljIGljb1NvbGRUb2tlbnMgPSAwOwogICAgdWludCBwdWJsaWMgdG90YWxTb2xkVG9rZW5zID0gMDsKICAgIHVpbnQgcHVibGljIHRvdGFsV2l0ZHJvd2VkVG9rZW4gPSAwOwoKLy8vIE1vZGlmaWVyczoKICAgIG1vZGlmaWVyIG9ubHlUb2tlbk1hbmFnZXIoKQogICAgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlcj09dG9rZW5NYW5hZ2VyKTsgCiAgICAgICAgXzsgCiAgICB9CgogICAgbW9kaWZpZXIgb25seUluU3RhdGUoU3RhdGUgc3RhdGUpCiAgICB7CiAgICAgICAgcmVxdWlyZShzdGF0ZT09Y3VycmVudFN0YXRlKTsgCiAgICAgICAgXzsgCiAgICB9CgovLy8gRXZlbnRzOgogICAgZXZlbnQgTG9nQnV5KGFkZHJlc3MgaW5kZXhlZCBvd25lciwgdWludCB2YWx1ZSk7CiAgICBldmVudCBMb2dCdXJuKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgdWludCB2YWx1ZSk7CgovLy8gRnVuY3Rpb25zOgogICAgLy8vIEBkZXYgQ29uc3RydWN0b3IKICAgIC8vLyBAcGFyYW0gX3Rva2VuTWFuYWdlciBUb2tlbiBtYW5hZ2VyIGFkZHJlc3MuCiAgICBmdW5jdGlvbiBadXBwbHlUb2tlbihhZGRyZXNzIF90b2tlbk1hbmFnZXIsIGFkZHJlc3MgX2VzY3JvdywgYWRkcmVzcyBfdGVhbVRva2VuQm9udXMsIGFkZHJlc3MgX2VyYWx5SW52ZXN0b3JCb251cykgCiAgICB7CiAgICAgICAgdG9rZW5NYW5hZ2VyID0gX3Rva2VuTWFuYWdlcjsKICAgICAgICB0ZWFtVG9rZW5Cb251cyA9IF90ZWFtVG9rZW5Cb251czsKICAgICAgICBlc2Nyb3cgPSBfZXNjcm93OwogICAgICAgIGVhcmx5SW52ZXN0b3JzQm9udXMgPSBfZXJhbHlJbnZlc3RvckJvbnVzOyAKCiAgICAgICAgLy8gc2VuZCB0ZWFtICsgZWFybHkgaW52ZXN0b3JzIGJvbnVzIGltbWVkaWF0ZWx5CiAgICAgICAgdWludCB0ZWFtQm9udXMgPSBERVZFTE9QRVJTX0JPTlVTOwogICAgICAgIGJhbGFuY2VzW190ZWFtVG9rZW5Cb251c10gKz0gdGVhbUJvbnVzOwogICAgICAgIHVpbnQgZWFybHlCb251cyA9IEVBUkxZX0lOVl9CT05VUzsKICAgICAgICBiYWxhbmNlc1tfZXJhbHlJbnZlc3RvckJvbnVzXSArPSBlYXJseUJvbnVzOwogICAgICAgIHN1cHBseSs9IHRlYW1Cb251czsKICAgICAgICBzdXBwbHkrPSBlYXJseUJvbnVzOwoKICAgICAgICBhc3NlcnQoUFJFU0FMRV9UT0tFTl9TVVBQTFlfTElNSVQ9PTEwMDAwMDAwMCAqICgxIGV0aGVyIC8gMSB3ZWkpKTsKICAgICAgICBhc3NlcnQoVE9UQUxfU09MRF9UT0tFTl9TVVBQTFlfTElNSVQ9PTYwMDAwMDAwMCAqICgxIGV0aGVyIC8gMSB3ZWkpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXlUb2tlbnMoKSBwdWJsaWMgcGF5YWJsZQogICAgewogICAgICAgIHJlcXVpcmUoY3VycmVudFN0YXRlPT1TdGF0ZS5QcmVzYWxlUnVubmluZyB8fCBjdXJyZW50U3RhdGU9PVN0YXRlLklDT1J1bm5pbmcpOwoKICAgICAgICBpZihjdXJyZW50U3RhdGU9PVN0YXRlLlByZXNhbGVSdW5uaW5nKXsKICAgICAgICAgICAgcmV0dXJuIGJ1eVRva2Vuc1ByZXNhbGUoKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgcmV0dXJuIGJ1eVRva2Vuc0lDTygpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBidXlUb2tlbnNQcmVzYWxlKCkgcHVibGljIHBheWFibGUgb25seUluU3RhdGUoU3RhdGUuUHJlc2FsZVJ1bm5pbmcpCiAgICB7CiAgICAgICAgLy8gbWluIC0gMC4xIEVUSAogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49ICgxIGV0aGVyIC8gMSB3ZWkpIC8xMCApOwogICAgICAgIHVpbnQgbmV3VG9rZW5zID0gbXNnLnZhbHVlICogUFJFU0FMRV9QUklDRTsKCiAgICAgICAgcmVxdWlyZShwcmVzYWxlU29sZFRva2VucyArIG5ld1Rva2VucyArIHRvdGFsV2l0ZHJvd2VkVG9rZW4gPD0gUFJFU0FMRV9UT0tFTl9TVVBQTFlfTElNSVQpOwoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBuZXdUb2tlbnM7CiAgICAgICAgc3VwcGx5Kz0gbmV3VG9rZW5zOwogICAgICAgIHByZXNhbGVTb2xkVG9rZW5zKz0gbmV3VG9rZW5zOwogICAgICAgIHRvdGFsU29sZFRva2Vucys9IG5ld1Rva2VuczsKCiAgICAgICAgTG9nQnV5KG1zZy5zZW5kZXIsIG5ld1Rva2Vucyk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zSUNPKCkgcHVibGljIHBheWFibGUgb25seUluU3RhdGUoU3RhdGUuSUNPUnVubmluZykKICAgIHsKICAgICAgICAvLyBtaW4gLSAwLjAxIEVUSAogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49ICgoMSBldGhlciAvIDEgd2VpKSAvIDEwMCkpOwogICAgICAgIHVpbnQgbmV3VG9rZW5zID0gbXNnLnZhbHVlICogZ2V0UHJpY2UoKTsKCiAgICAgICAgcmVxdWlyZSh0b3RhbFNvbGRUb2tlbnMgKyBuZXdUb2tlbnMgKyB0b3RhbFdpdGRyb3dlZFRva2VuIDw9IFRPVEFMX1NPTERfVE9LRU5fU1VQUExZX0xJTUlUKTsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gbmV3VG9rZW5zOwogICAgICAgIHN1cHBseSs9IG5ld1Rva2VuczsKICAgICAgICBpY29Tb2xkVG9rZW5zKz0gbmV3VG9rZW5zOwogICAgICAgIHRvdGFsU29sZFRva2Vucys9IG5ld1Rva2VuczsKCiAgICAgICAgTG9nQnV5KG1zZy5zZW5kZXIsIG5ld1Rva2Vucyk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UHJpY2UoKWNvbnN0YW50IHJldHVybnModWludCkKICAgIHsKICAgICAgICBpZihjdXJyZW50U3RhdGU9PVN0YXRlLklDT1J1bm5pbmcpewogICAgICAgICAgICAgcmV0dXJuIElDT19QUklDRTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgIHJldHVybiBQUkVTQUxFX1BSSUNFOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRTdGF0ZShTdGF0ZSBfbmV4dFN0YXRlKSBwdWJsaWMgb25seVRva2VuTWFuYWdlcgogICAgewogICAgICAgIC8vc2V0U3RhdGUoKSBtZXRob2QgY2FsbCBzaG91bGRuJ3QgYmUgZW50ZXJ0YWluZWQgYWZ0ZXIgSUNPRmluaXNoZWQKICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGF0ZSAhPSBTdGF0ZS5JQ09GaW5pc2hlZCk7CiAgICAgICAgCiAgICAgICAgY3VycmVudFN0YXRlID0gX25leHRTdGF0ZTsKICAgICAgICAvLyBlbmFibGUvZGlzYWJsZSB0cmFuc2ZlcnMKICAgICAgICAvL2VuYWJsZSB0cmFuc2ZlcnMgb25seSBhZnRlciBJQ09GaW5pc2hlZCwgZGlzYWJsZSBvdGhlcndpc2UKICAgICAgICBlbmFibGVUcmFuc2ZlcnMgPSAoY3VycmVudFN0YXRlPT1TdGF0ZS5JQ09GaW5pc2hlZCk7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdFVEgoKSBwdWJsaWMgb25seVRva2VuTWFuYWdlcgogICAgewogICAgICAgIGlmKHRoaXMuYmFsYW5jZSA+IDApIAogICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZShlc2Nyb3cuc2VuZCh0aGlzLmJhbGFuY2UpKTsKICAgICAgICB9CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW5zKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgb25seVRva2VuTWFuYWdlcgogICAgewogICAgICAgIHJlcXVpcmUoY3VycmVudFN0YXRlID09IFN0YXRlLklDT0ZpbmlzaGVkKTsKICAgICAgICBpZigodG90YWxTb2xkVG9rZW5zICsgdG90YWxXaXRkcm93ZWRUb2tlbiArIF92YWx1ZSkgPD0gVE9UQUxfU09MRF9UT0tFTl9TVVBQTFlfTElNSVQpIAogICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gVE9UQUxfU09MRF9UT0tFTl9TVVBQTFlfTElNSVQgLSB0b3RhbFNvbGRUb2tlbnMgLSB0b3RhbFdpdGRyb3dlZFRva2VuKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGJhbGFuY2VzW2VzY3Jvd10gKz0gX3ZhbHVlOwogICAgICAgICAgICAKICAgICAgICAgICAgdG90YWxXaXRkcm93ZWRUb2tlbiArPSBfdmFsdWU7CiAgICAgICAgICAgIHN1cHBseSArPSBfdmFsdWU7CiAgICAgICAgfQogICAgICAgIAogICAgfQoKLy8vIE92ZXJyaWRlczoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyhib29sKXsKICAgICAgICByZXF1aXJlKGVuYWJsZVRyYW5zZmVycyB8fCBtc2cuc2VuZGVyID09IHRva2VuTWFuYWdlciB8fCBtc2cuc2VuZGVyID09IHRlYW1Ub2tlbkJvbnVzIHx8IG1zZy5zZW5kZXIgPT0gZWFybHlJbnZlc3RvcnNCb251cyApOwogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sX3ZhbHVlKTsKICAgICAgICAKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zKGJvb2wpewogICAgICAgIHJlcXVpcmUoZW5hYmxlVHJhbnNmZXJzIHx8IG1zZy5zZW5kZXIgPT0gdG9rZW5NYW5hZ2VyIHx8IG1zZy5zZW5kZXIgPT0gdGVhbVRva2VuQm9udXMgfHwgbXNnLnNlbmRlciA9PSBlYXJseUludmVzdG9yc0JvbnVzICk7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSxfdG8sX3ZhbHVlKTsKICAgICAgICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoZW5hYmxlVHJhbnNmZXJzIHx8IG1zZy5zZW5kZXIgPT0gdG9rZW5NYW5hZ2VyIHx8IG1zZy5zZW5kZXIgPT0gdGVhbVRva2VuQm9udXMgfHwgbXNnLnNlbmRlciA9PSBlYXJseUludmVzdG9yc0JvbnVzICk7CiAgICAgICAgcmV0dXJuIHN1cGVyLmFwcHJvdmUoX3NwZW5kZXIsX3ZhbHVlKTsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0TmV3QXR0cmlidXRlcyhzdHJpbmcgX25ld05hbWUsIHN0cmluZyBfbmV3U3ltYm9sKSBwdWJsaWMgb25seVRva2VuTWFuYWdlcnsKICAgICAgICBuYW1lID0gX25ld05hbWU7CiAgICAgICAgc3ltYm9sID0gX25ld1N5bWJvbDsKICAgIH0KCi8vLyBTZXR0ZXJzL2dldHRlcnMKICAgIGZ1bmN0aW9uIHNldFRva2VuTWFuYWdlcihhZGRyZXNzIF9tZ3IpIHB1YmxpYyBvbmx5VG9rZW5NYW5hZ2VyCiAgICB7CiAgICAgICAgdG9rZW5NYW5hZ2VyID0gX21ncjsKICAgIH0KCiAgICAvLyBEZWZhdWx0IGZhbGxiYWNrIGZ1bmN0aW9uCiAgICBmdW5jdGlvbigpIHBheWFibGUgCiAgICB7CiAgICAgICAgYnV5VG9rZW5zKCk7CiAgICB9Cn0='.
	

]
