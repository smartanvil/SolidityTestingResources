Class {
	#name : #SRT127b933fb908abdc87def027fb0522d7d4b24c21,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT127b933fb908abdc87def027fb0522d7d4b24c21 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvb3duZXJzaGlwL093bmFibGUuc29sCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9SZXN0cmljdGVkLnNvbAoKLyoqIEB0aXRsZSBSZXN0cmljdGVkCiAqICBFeHBvc2VzIG9ubHlNb25ldGhhIG1vZGlmaWVyCiAqLwpjb250cmFjdCBSZXN0cmljdGVkIGlzIE93bmFibGUgewoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGlzTW9uZXRoYUFkZHJlc3M7CgogICAgLyoqCiAgICAgKiAgUmVzdHJpY3QgbWV0aG9kcyBpbiBzdWNoIHdheSwgdGhhdCB0aGV5IGNhbiBiZSBpbnZva2VkIG9ubHkgYnkgbW9uZXRoYUFkZHJlc3MgYWNjb3VudC4KICAgICAqLwogICAgbW9kaWZpZXIgb25seU1vbmV0aGEoKSB7CiAgICAgICAgcmVxdWlyZShpc01vbmV0aGFBZGRyZXNzW21zZy5zZW5kZXJdKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogIEFsbG93cyBvd25lciB0byBzZXQgbmV3IG1vbmV0aGEgYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiBzZXRNb25ldGhhQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzLCBib29sIF9pc01vbmV0aGFBZGRyZXNzKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBpc01vbmV0aGFBZGRyZXNzW19hZGRyZXNzXSA9IF9pc01vbmV0aGFBZGRyZXNzOwogICAgfQoKfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL293bmVyc2hpcC9Db250YWN0YWJsZS5zb2wKCi8qKgogKiBAdGl0bGUgQ29udGFjdGFibGUgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIGEgY29udGFjdGFibGUgY29udHJhY3QsIGFsbG93aW5nIHRoZSBvd25lciB0byBwcm92aWRlIGEgc3RyaW5nIHdpdGggdGhlaXIKICogY29udGFjdCBpbmZvcm1hdGlvbi4KICovCmNvbnRyYWN0IENvbnRhY3RhYmxlIGlzIE93bmFibGV7CgogICAgc3RyaW5nIHB1YmxpYyBjb250YWN0SW5mb3JtYXRpb247CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgb3duZXIgdG8gc2V0IGEgc3RyaW5nIHdpdGggdGhlaXIgY29udGFjdCBpbmZvcm1hdGlvbi4KICAgICAqIEBwYXJhbSBpbmZvIFRoZSBjb250YWN0IGluZm9ybWF0aW9uIHRvIGF0dGFjaCB0byB0aGUgY29udHJhY3QuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldENvbnRhY3RJbmZvcm1hdGlvbihzdHJpbmcgaW5mbykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgIGNvbnRhY3RJbmZvcm1hdGlvbiA9IGluZm87CiAgICAgfQp9CgovLyBGaWxlOiBjb250cmFjdHMvTWVyY2hhbnREZWFsc0hpc3Rvcnkuc29sCgovKioKICogIEB0aXRsZSBNZXJjaGFudERlYWxzSGlzdG9yeQogKiAgQ29udHJhY3Qgc3RvcmVzIGhhc2ggb2YgRGVhbHMgY29uZGl0aW9ucyB0b2dldGhlciB3aXRoIHBhcnRpZXMgcmVwdXRhdGlvbiBmb3IgZWFjaCBkZWFsCiAqICBUaGlzIGhpc3RvcnkgZW5hYmxlcyB0byBzZWUgZXZvbHV0aW9uIG9mIHRydXN0IHJhdGluZyBmb3IgYm90aCBwYXJ0aWVzCiAqLwpjb250cmFjdCBNZXJjaGFudERlYWxzSGlzdG9yeSBpcyBDb250YWN0YWJsZSwgUmVzdHJpY3RlZCB7CgogICAgc3RyaW5nIGNvbnN0YW50IFZFUlNJT04gPSAiMC4zIjsKCiAgICAvLy8gIE1lcmNoYW50IGlkZW50aWZpZXIgaGFzaAogICAgYnl0ZXMzMiBwdWJsaWMgbWVyY2hhbnRJZEhhc2g7CiAgICAKICAgIC8vRGVhbCBldmVudAogICAgZXZlbnQgRGVhbENvbXBsZXRlZCgKICAgICAgICB1aW50IG9yZGVySWQsCiAgICAgICAgYWRkcmVzcyBjbGllbnRBZGRyZXNzLAogICAgICAgIHVpbnQzMiBjbGllbnRSZXB1dGF0aW9uLAogICAgICAgIHVpbnQzMiBtZXJjaGFudFJlcHV0YXRpb24sCiAgICAgICAgYm9vbCBzdWNjZXNzZnVsLAogICAgICAgIHVpbnQgZGVhbEhhc2gKICAgICk7CgogICAgLy9EZWFsIGNhbmNlbGxhdGlvbiBldmVudAogICAgZXZlbnQgRGVhbENhbmNlbGF0aW9uUmVhc29uKAogICAgICAgIHVpbnQgb3JkZXJJZCwKICAgICAgICBhZGRyZXNzIGNsaWVudEFkZHJlc3MsCiAgICAgICAgdWludDMyIGNsaWVudFJlcHV0YXRpb24sCiAgICAgICAgdWludDMyIG1lcmNoYW50UmVwdXRhdGlvbiwKICAgICAgICB1aW50IGRlYWxIYXNoLAogICAgICAgIHN0cmluZyBjYW5jZWxSZWFzb24KICAgICk7CgogICAgLy9EZWFsIHJlZnVuZCBldmVudAogICAgZXZlbnQgRGVhbFJlZnVuZFJlYXNvbigKICAgICAgICB1aW50IG9yZGVySWQsCiAgICAgICAgYWRkcmVzcyBjbGllbnRBZGRyZXNzLAogICAgICAgIHVpbnQzMiBjbGllbnRSZXB1dGF0aW9uLAogICAgICAgIHVpbnQzMiBtZXJjaGFudFJlcHV0YXRpb24sCiAgICAgICAgdWludCBkZWFsSGFzaCwKICAgICAgICBzdHJpbmcgcmVmdW5kUmVhc29uCiAgICApOwoKICAgIC8qKgogICAgICogIEBwYXJhbSBfbWVyY2hhbnRJZCBNZXJjaGFudCBvZiB0aGUgYWNjZXB0b3IKICAgICAqLwogICAgZnVuY3Rpb24gTWVyY2hhbnREZWFsc0hpc3Rvcnkoc3RyaW5nIF9tZXJjaGFudElkKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoYnl0ZXMoX21lcmNoYW50SWQpLmxlbmd0aCA+IDApOwogICAgICAgIG1lcmNoYW50SWRIYXNoID0ga2VjY2FrMjU2KF9tZXJjaGFudElkKTsKICAgIH0KCiAgICAvKioKICAgICAqICByZWNvcmREZWFsIGNyZWF0ZXMgYW4gZXZlbnQgb2YgY29tcGxldGVkIGRlYWwKICAgICAqICBAcGFyYW0gX29yZGVySWQgSWRlbnRpZmllciBvZiBkZWFsJ3Mgb3JkZXIKICAgICAqICBAcGFyYW0gX2NsaWVudEFkZHJlc3MgQWRkcmVzcyBvZiBjbGllbnQncyBhY2NvdW50CiAgICAgKiAgQHBhcmFtIF9jbGllbnRSZXB1dGF0aW9uIFVwZGF0ZWQgcmVwdXRhdGlvbiBvZiB0aGUgY2xpZW50CiAgICAgKiAgQHBhcmFtIF9tZXJjaGFudFJlcHV0YXRpb24gVXBkYXRlZCByZXB1dGF0aW9uIG9mIHRoZSBtZXJjaGFudAogICAgICogIEBwYXJhbSBfaXNTdWNjZXNzIElkZW50aWZpZXMgd2hldGhlciBkZWFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICogIEBwYXJhbSBfZGVhbEhhc2ggSGFzaGNvZGUgb2YgdGhlIGRlYWwsIGRlc2NyaWJpbmcgdGhlIG9yZGVyICh1c2VkIGZvciBkZWFsIHZlcmlmaWNhdGlvbikKICAgICAqLwogICAgZnVuY3Rpb24gcmVjb3JkRGVhbCgKICAgICAgICB1aW50IF9vcmRlcklkLAogICAgICAgIGFkZHJlc3MgX2NsaWVudEFkZHJlc3MsCiAgICAgICAgdWludDMyIF9jbGllbnRSZXB1dGF0aW9uLAogICAgICAgIHVpbnQzMiBfbWVyY2hhbnRSZXB1dGF0aW9uLAogICAgICAgIGJvb2wgX2lzU3VjY2VzcywKICAgICAgICB1aW50IF9kZWFsSGFzaCkKICAgICAgICBleHRlcm5hbCBvbmx5TW9uZXRoYQogICAgewogICAgICAgIERlYWxDb21wbGV0ZWQoCiAgICAgICAgICAgIF9vcmRlcklkLAogICAgICAgICAgICBfY2xpZW50QWRkcmVzcywKICAgICAgICAgICAgX2NsaWVudFJlcHV0YXRpb24sCiAgICAgICAgICAgIF9tZXJjaGFudFJlcHV0YXRpb24sCiAgICAgICAgICAgIF9pc1N1Y2Nlc3MsCiAgICAgICAgICAgIF9kZWFsSGFzaAogICAgICAgICk7CiAgICB9CgogICAgLyoqCiAgICAgKiAgcmVjb3JkRGVhbENhbmNlbFJlYXNvbiBjcmVhdGVzIGFuIGV2ZW50IG9mIG5vdCBwYWlkIGRlYWwgdGhhdCB3YXMgY2FuY2VsbGVkIAogICAgICogIEBwYXJhbSBfb3JkZXJJZCBJZGVudGlmaWVyIG9mIGRlYWwncyBvcmRlcgogICAgICogIEBwYXJhbSBfY2xpZW50QWRkcmVzcyBBZGRyZXNzIG9mIGNsaWVudCdzIGFjY291bnQKICAgICAqICBAcGFyYW0gX2NsaWVudFJlcHV0YXRpb24gVXBkYXRlZCByZXB1dGF0aW9uIG9mIHRoZSBjbGllbnQKICAgICAqICBAcGFyYW0gX21lcmNoYW50UmVwdXRhdGlvbiBVcGRhdGVkIHJlcHV0YXRpb24gb2YgdGhlIG1lcmNoYW50CiAgICAgKiAgQHBhcmFtIF9kZWFsSGFzaCBIYXNoY29kZSBvZiB0aGUgZGVhbCwgZGVzY3JpYmluZyB0aGUgb3JkZXIgKHVzZWQgZm9yIGRlYWwgdmVyaWZpY2F0aW9uKQogICAgICogIEBwYXJhbSBfY2FuY2VsUmVhc29uIGRlYWwgY2FuY2VsYXRpb24gcmVhc29uICh0ZXh0KQogICAgICovCiAgICBmdW5jdGlvbiByZWNvcmREZWFsQ2FuY2VsUmVhc29uKAogICAgICAgIHVpbnQgX29yZGVySWQsCiAgICAgICAgYWRkcmVzcyBfY2xpZW50QWRkcmVzcywKICAgICAgICB1aW50MzIgX2NsaWVudFJlcHV0YXRpb24sCiAgICAgICAgdWludDMyIF9tZXJjaGFudFJlcHV0YXRpb24sCiAgICAgICAgdWludCBfZGVhbEhhc2gsCiAgICAgICAgc3RyaW5nIF9jYW5jZWxSZWFzb24pCiAgICAgICAgZXh0ZXJuYWwgb25seU1vbmV0aGEKICAgIHsKICAgICAgICBEZWFsQ2FuY2VsYXRpb25SZWFzb24oCiAgICAgICAgICAgIF9vcmRlcklkLAogICAgICAgICAgICBfY2xpZW50QWRkcmVzcywKICAgICAgICAgICAgX2NsaWVudFJlcHV0YXRpb24sCiAgICAgICAgICAgIF9tZXJjaGFudFJlcHV0YXRpb24sCiAgICAgICAgICAgIF9kZWFsSGFzaCwKICAgICAgICAgICAgX2NhbmNlbFJlYXNvbgogICAgICAgICk7CiAgICB9CgovKioKICAgICAqICByZWNvcmREZWFsUmVmdW5kUmVhc29uIGNyZWF0ZXMgYW4gZXZlbnQgb2Ygbm90IHBhaWQgZGVhbCB0aGF0IHdhcyBjYW5jZWxsZWQgCiAgICAgKiAgQHBhcmFtIF9vcmRlcklkIElkZW50aWZpZXIgb2YgZGVhbCdzIG9yZGVyCiAgICAgKiAgQHBhcmFtIF9jbGllbnRBZGRyZXNzIEFkZHJlc3Mgb2YgY2xpZW50J3MgYWNjb3VudAogICAgICogIEBwYXJhbSBfY2xpZW50UmVwdXRhdGlvbiBVcGRhdGVkIHJlcHV0YXRpb24gb2YgdGhlIGNsaWVudAogICAgICogIEBwYXJhbSBfbWVyY2hhbnRSZXB1dGF0aW9uIFVwZGF0ZWQgcmVwdXRhdGlvbiBvZiB0aGUgbWVyY2hhbnQKICAgICAqICBAcGFyYW0gX2RlYWxIYXNoIEhhc2hjb2RlIG9mIHRoZSBkZWFsLCBkZXNjcmliaW5nIHRoZSBvcmRlciAodXNlZCBmb3IgZGVhbCB2ZXJpZmljYXRpb24pCiAgICAgKiAgQHBhcmFtIF9yZWZ1bmRSZWFzb24gZGVhbCByZWZ1bmQgcmVhc29uICh0ZXh0KQogICAgICovCiAgICBmdW5jdGlvbiByZWNvcmREZWFsUmVmdW5kUmVhc29uKAogICAgICAgIHVpbnQgX29yZGVySWQsCiAgICAgICAgYWRkcmVzcyBfY2xpZW50QWRkcmVzcywKICAgICAgICB1aW50MzIgX2NsaWVudFJlcHV0YXRpb24sCiAgICAgICAgdWludDMyIF9tZXJjaGFudFJlcHV0YXRpb24sCiAgICAgICAgdWludCBfZGVhbEhhc2gsCiAgICAgICAgc3RyaW5nIF9yZWZ1bmRSZWFzb24pCiAgICAgICAgZXh0ZXJuYWwgb25seU1vbmV0aGEKICAgIHsKICAgICAgICBEZWFsUmVmdW5kUmVhc29uKAogICAgICAgICAgICBfb3JkZXJJZCwKICAgICAgICAgICAgX2NsaWVudEFkZHJlc3MsCiAgICAgICAgICAgIF9jbGllbnRSZXB1dGF0aW9uLAogICAgICAgICAgICBfbWVyY2hhbnRSZXB1dGF0aW9uLAogICAgICAgICAgICBfZGVhbEhhc2gsCiAgICAgICAgICAgIF9yZWZ1bmRSZWFzb24KICAgICAgICApOwogICAgfQp9CgovLyBGaWxlOiBjb250cmFjdHMvU2FmZURlc3RydWN0aWJsZS5zb2wKCi8qKgogKiBAdGl0bGUgU2FmZURlc3RydWN0aWJsZQogKiBCYXNlIGNvbnRyYWN0IHRoYXQgY2FuIGJlIGRlc3Ryb3llZCBieSBvd25lci4KICogQ2FuIGJlIGRlc3RydWN0ZWQgaWYgdGhlcmUgYXJlIG5vIGZ1bmRzIG9uIGNvbnRyYWN0IGJhbGFuY2UuCiAqLwpjb250cmFjdCBTYWZlRGVzdHJ1Y3RpYmxlIGlzIE93bmFibGUgewogICAgZnVuY3Rpb24gZGVzdHJveSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUodGhpcy5iYWxhbmNlID09IDApOwogICAgICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgICB9Cn0KCi8vIEZpbGU6IHplcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy9saWZlY3ljbGUvUGF1c2FibGUuc29sCgovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9NZXJjaGFudFdhbGxldC5zb2wKCi8qKgogKiAgQHRpdGxlIE1lcmNoYW50V2FsbGV0CiAqICBTZXJ2ZXMgYXMgYSBwdWJsaWMgTWVyY2hhbnQgcHJvZmlsZSB3aXRoIG1lcmNoYW50IHByb2ZpbGUgaW5mbywgCiAqICAgICAgcGF5bWVudCBzZXR0aW5ncyBhbmQgbGF0ZXN0IHJlcHV0YXRpb24gdmFsdWUuCiAqICBBbHNvIE1lcmNoYW50V2FsbGV0IGFjY2VwdHMgcGF5bWVudHMgZm9yIG9yZGVycy4KICovCgpjb250cmFjdCBNZXJjaGFudFdhbGxldCBpcyBQYXVzYWJsZSwgU2FmZURlc3RydWN0aWJsZSwgQ29udGFjdGFibGUsIFJlc3RyaWN0ZWQgewogICAgCiAgICBzdHJpbmcgY29uc3RhbnQgVkVSU0lPTiA9ICIwLjMiOwoKICAgIC8vLyBBZGRyZXNzIG9mIG1lcmNoYW50J3MgYWNjb3VudCwgdGhhdCBjYW4gd2l0aGRyYXcgZnJvbSB3YWxsZXQKICAgIGFkZHJlc3MgcHVibGljIG1lcmNoYW50QWNjb3VudDsKICAgIAogICAgLy8vIFVuaXF1ZSBNZXJjaGFudCBpZGVudGlmaWVyIGhhc2gKICAgIGJ5dGVzMzIgcHVibGljIG1lcmNoYW50SWRIYXNoOwoKICAgIC8vLyBwcm9maWxlTWFwIHN0b3JlcyBnZW5lcmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtZXJjaGFudAogICAgbWFwcGluZyAoc3RyaW5nPT5zdHJpbmcpIHByb2ZpbGVNYXA7CgogICAgLy8vIHBheW1lbnRTZXR0aW5nc01hcCBzdG9yZXMgcGF5bWVudCBhbmQgb3JkZXIgc2V0dGluZ3MgZm9yIHRoZSBtZXJjaGFudAogICAgbWFwcGluZyAoc3RyaW5nPT5zdHJpbmcpIHBheW1lbnRTZXR0aW5nc01hcDsKCiAgICAvLy8gY29tcG9zaXRlUmVwdXRhdGlvbk1hcCBzdG9yZXMgY29tcG9zaXRlIHJlcHV0YXRpb24sIHRoYXQgY29tcHJhaXNlcyBmcm9tIHNldmVyYWwgbWV0cmljcwogICAgbWFwcGluZyAoc3RyaW5nPT51aW50MzIpIGNvbXBvc2l0ZVJlcHV0YXRpb25NYXA7CgogICAgLy8vIG51bWJlciBvZiBsYXN0IGRpZ2l0cyBpbiBjb21wb3NpdGVSZXB1dGF0aW9uIGZvciBmcmFjdGlvbmFsIHBhcnQKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBSRVBVVEFUSU9OX0RFQ0lNQUxTID0gNDsKCiAgICBtb2RpZmllciBvbmx5TWVyY2hhbnQoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG1lcmNoYW50QWNjb3VudCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqICBAcGFyYW0gX21lcmNoYW50QWNjb3VudCBBZGRyZXNzIG9mIG1lcmNoYW50J3MgYWNjb3VudCwgdGhhdCBjYW4gd2l0aGRyYXcgZnJvbSB3YWxsZXQKICAgICAqICBAcGFyYW0gX21lcmNoYW50SWQgTWVyY2hhbnQgaWRlbnRpZmllcgogICAgICovCiAgICBmdW5jdGlvbiBNZXJjaGFudFdhbGxldChhZGRyZXNzIF9tZXJjaGFudEFjY291bnQsIHN0cmluZyBfbWVyY2hhbnRJZCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9tZXJjaGFudEFjY291bnQgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKGJ5dGVzKF9tZXJjaGFudElkKS5sZW5ndGggPiAwKTsKICAgICAgICAKICAgICAgICBtZXJjaGFudEFjY291bnQgPSBfbWVyY2hhbnRBY2NvdW50OwogICAgICAgIG1lcmNoYW50SWRIYXNoID0ga2VjY2FrMjU2KF9tZXJjaGFudElkKTsKICAgIH0KCiAgICAvKioKICAgICAqICBBY2NlcHQgcGF5bWVudCBmcm9tIE1vbmV0aGFHYXRld2F5CiAgICAgKi8KICAgIGZ1bmN0aW9uICgpIGV4dGVybmFsIHBheWFibGUgewogICAgfQoKICAgIC8qKgogICAgICogIEByZXR1cm4gcHJvZmlsZSBpbmZvIGJ5IHN0cmluZyBrZXkKICAgICAqLwogICAgZnVuY3Rpb24gcHJvZmlsZShzdHJpbmcga2V5KSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChzdHJpbmcpIHsKICAgICAgICByZXR1cm4gcHJvZmlsZU1hcFtrZXldOwogICAgfQoKICAgIC8qKgogICAgICogIEByZXR1cm4gcGF5bWVudCBzZXR0aW5nIGJ5IHN0cmluZyBrZXkKICAgICAqLwogICAgZnVuY3Rpb24gcGF5bWVudFNldHRpbmdzKHN0cmluZyBrZXkpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHN0cmluZykgewogICAgICAgIHJldHVybiBwYXltZW50U2V0dGluZ3NNYXBba2V5XTsKICAgIH0KCiAgICAvKioKICAgICAqICBAcmV0dXJuIGNvbXBvc2l0ZSByZXB1dGF0aW9uIHZhbHVlIGJ5IHN0cmluZyBrZXkKICAgICAqLwogICAgZnVuY3Rpb24gY29tcG9zaXRlUmVwdXRhdGlvbihzdHJpbmcga2V5KSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MzIpIHsKICAgICAgICByZXR1cm4gY29tcG9zaXRlUmVwdXRhdGlvbk1hcFtrZXldOwogICAgfQoKICAgIC8qKgogICAgICogIFNldCBwcm9maWxlIGluZm8gYnkgc3RyaW5nIGtleQogICAgICovCiAgICBmdW5jdGlvbiBzZXRQcm9maWxlKAogICAgICAgIHN0cmluZyBwcm9maWxlS2V5LAogICAgICAgIHN0cmluZyBwcm9maWxlVmFsdWUsCiAgICAgICAgc3RyaW5nIHJlcEtleSwKICAgICAgICB1aW50MzIgcmVwVmFsdWUKICAgICkgZXh0ZXJuYWwgb25seU93bmVyCiAgICB7CiAgICAgICAgcHJvZmlsZU1hcFtwcm9maWxlS2V5XSA9IHByb2ZpbGVWYWx1ZTsKICAgICAgICAKICAgICAgICBpZiAoYnl0ZXMocmVwS2V5KS5sZW5ndGggIT0gMCkgewogICAgICAgICAgICBjb21wb3NpdGVSZXB1dGF0aW9uTWFwW3JlcEtleV0gPSByZXBWYWx1ZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiAgU2V0IHBheW1lbnQgc2V0dGluZyBieSBzdHJpbmcga2V5CiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFBheW1lbnRTZXR0aW5ncyhzdHJpbmcga2V5LCBzdHJpbmcgdmFsdWUpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcGF5bWVudFNldHRpbmdzTWFwW2tleV0gPSB2YWx1ZTsKICAgIH0KCiAgICAvKioKICAgICAqICBTZXQgY29tcG9zaXRlIHJlcHV0YXRpb24gdmFsdWUgYnkgc3RyaW5nIGtleQogICAgICovCiAgICBmdW5jdGlvbiBzZXRDb21wb3NpdGVSZXB1dGF0aW9uKHN0cmluZyBrZXksIHVpbnQzMiB2YWx1ZSkgZXh0ZXJuYWwgb25seU1vbmV0aGEgewogICAgICAgIGNvbXBvc2l0ZVJlcHV0YXRpb25NYXBba2V5XSA9IHZhbHVlOwogICAgfQoKICAgIC8qKgogICAgICogIEFsbG93cyBtZXJjaGFudCB0byB3aXRoZHJhdyBmdW5kcyB0byBiZW5lZmljaWFyeSBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIHdpdGhkcmF3VG8oYWRkcmVzcyBiZW5lZmljaWFyeSwgdWludCBhbW91bnQpIHB1YmxpYyBvbmx5TWVyY2hhbnQgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgcmVxdWlyZShiZW5lZmljaWFyeSAhPSAweDApOwogICAgICAgIGJlbmVmaWNpYXJ5LnRyYW5zZmVyKGFtb3VudCk7CiAgICB9CgogICAgLyoqCiAgICAgKiAgQWxsb3dzIG1lcmNoYW50IHRvIHdpdGhkcmF3IGZ1bmRzIHRvIGl0J3Mgb3duIGFjY291bnQKICAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXcodWludCBhbW91bnQpIGV4dGVybmFsIHsKICAgICAgICB3aXRoZHJhd1RvKG1zZy5zZW5kZXIsIGFtb3VudCk7CiAgICB9CgogICAgLyoqCiAgICAgKiAgQWxsb3dzIG1lcmNoYW50IHRvIGNoYW5nZSBpdCdzIGFjY291bnQgYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiBjaGFuZ2VNZXJjaGFudEFjY291bnQoYWRkcmVzcyBuZXdBY2NvdW50KSBleHRlcm5hbCBvbmx5TWVyY2hhbnQgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgbWVyY2hhbnRBY2NvdW50ID0gbmV3QWNjb3VudDsKICAgIH0KfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL2xpZmVjeWNsZS9EZXN0cnVjdGlibGUuc29sCgovKioKICogQHRpdGxlIERlc3RydWN0aWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3QgdGhhdCBjYW4gYmUgZGVzdHJveWVkIGJ5IG93bmVyLiBBbGwgZnVuZHMgaW4gY29udHJhY3Qgd2lsbCBiZSBzZW50IHRvIHRoZSBvd25lci4KICovCmNvbnRyYWN0IERlc3RydWN0aWJsZSBpcyBPd25hYmxlIHsKCiAgZnVuY3Rpb24gRGVzdHJ1Y3RpYmxlKCkgcGF5YWJsZSB7IH0KCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlcnMgdGhlIGN1cnJlbnQgYmFsYW5jZSB0byB0aGUgb3duZXIgYW5kIHRlcm1pbmF0ZXMgdGhlIGNvbnRyYWN0LgogICAqLwogIGZ1bmN0aW9uIGRlc3Ryb3koKSBvbmx5T3duZXIgcHVibGljIHsKICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgfQoKICBmdW5jdGlvbiBkZXN0cm95QW5kU2VuZChhZGRyZXNzIF9yZWNpcGllbnQpIG9ubHlPd25lciBwdWJsaWMgewogICAgc2VsZmRlc3RydWN0KF9yZWNpcGllbnQpOwogIH0KfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL21hdGgvU2FmZU1hdGguc29sCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL01vbmV0aGFHYXRld2F5LnNvbAoKLyoqCiAqICBAdGl0bGUgTW9uZXRoYUdhdGV3YXkKICoKICogIE1vbmV0aGFHYXRld2F5IGZvcndhcmQgZnVuZHMgZnJvbSBvcmRlciBwYXltZW50IHRvIG1lcmNoYW50J3Mgd2FsbGV0IGFuZCBjb2xsZWN0cyBNb25ldGhhIGZlZS4KICovCmNvbnRyYWN0IE1vbmV0aGFHYXRld2F5IGlzIFBhdXNhYmxlLCBDb250YWN0YWJsZSwgRGVzdHJ1Y3RpYmxlLCBSZXN0cmljdGVkIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIAogICAgc3RyaW5nIGNvbnN0YW50IFZFUlNJT04gPSAiMC4zIjsKCiAgICAvKioKICAgICAqICBGZWUgcGVybWlsbGUgb2YgTW9uZXRoYSBmZWUuCiAgICAgKiAgMSBwZXJtaWxsZSAo4oCwKSA9IDAuMSBwZXJjZW50ICglKQogICAgICogIDE14oCwID0gMS41JQogICAgICovCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBGRUVfUEVSTUlMTEUgPSAxNTsKICAgIAogICAgLyoqCiAgICAgKiAgQWRkcmVzcyBvZiBNb25ldGhhIFZhdWx0IGZvciBmZWUgY29sbGVjdGlvbgogICAgICovCiAgICBhZGRyZXNzIHB1YmxpYyBtb25ldGhhVmF1bHQ7CgogICAgLyoqCiAgICAgKiAgQWNjb3VudCBmb3IgcGVybWlzc2lvbnMgbWFuYWdpbmcKICAgICAqLwogICAgYWRkcmVzcyBwdWJsaWMgYWRtaW47CgogICAgZXZlbnQgUGF5bWVudFByb2Nlc3NlZChhZGRyZXNzIG1lcmNoYW50V2FsbGV0LCB1aW50IG1lcmNoYW50SW5jb21lLCB1aW50IG1vbmV0aGFJbmNvbWUpOwoKICAgIC8qKgogICAgICogIEBwYXJhbSBfbW9uZXRoYVZhdWx0IEFkZHJlc3Mgb2YgTW9uZXRoYSBWYXVsdAogICAgICovCiAgICBmdW5jdGlvbiBNb25ldGhhR2F0ZXdheShhZGRyZXNzIF9tb25ldGhhVmF1bHQsIGFkZHJlc3MgX2FkbWluKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX21vbmV0aGFWYXVsdCAhPSAweDApOwogICAgICAgIG1vbmV0aGFWYXVsdCA9IF9tb25ldGhhVmF1bHQ7CiAgICAgICAgCiAgICAgICAgc2V0QWRtaW4oX2FkbWluKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiAgYWNjZXB0UGF5bWVudCBhY2NlcHQgcGF5bWVudCBmcm9tIFBheW1lbnRBY2NlcHRvciwgZm9yd2FyZHMgaXQgdG8gbWVyY2hhbnQncyB3YWxsZXQKICAgICAqICAgICAgYW5kIGNvbGxlY3RzIE1vbmV0aGEgZmVlLgogICAgICogIEBwYXJhbSBfbWVyY2hhbnRXYWxsZXQgYWRkcmVzcyBvZiBtZXJjaGFudCdzIHdhbGxldCBmb3IgZnVuZCB0cmFuc2ZlcgogICAgICovCiAgICBmdW5jdGlvbiBhY2NlcHRQYXltZW50KGFkZHJlc3MgX21lcmNoYW50V2FsbGV0KSBleHRlcm5hbCBwYXlhYmxlIG9ubHlNb25ldGhhIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIHJlcXVpcmUoX21lcmNoYW50V2FsbGV0ICE9IDB4MCk7CgogICAgICAgIHVpbnQgbWVyY2hhbnRJbmNvbWUgPSBtc2cudmFsdWUuc3ViKEZFRV9QRVJNSUxMRS5tdWwobXNnLnZhbHVlKS5kaXYoMTAwMCkpOwogICAgICAgIHVpbnQgbW9uZXRoYUluY29tZSA9IG1zZy52YWx1ZS5zdWIobWVyY2hhbnRJbmNvbWUpOwoKICAgICAgICBfbWVyY2hhbnRXYWxsZXQudHJhbnNmZXIobWVyY2hhbnRJbmNvbWUpOwogICAgICAgIG1vbmV0aGFWYXVsdC50cmFuc2Zlcihtb25ldGhhSW5jb21lKTsKCiAgICAgICAgUGF5bWVudFByb2Nlc3NlZChfbWVyY2hhbnRXYWxsZXQsIG1lcmNoYW50SW5jb21lLCBtb25ldGhhSW5jb21lKTsKICAgIH0KCiAgICAvKioKICAgICAqICBjaGFuZ2VNb25ldGhhVmF1bHQgYWxsb3dzIG93bmVyIHRvIGNoYW5nZSBhZGRyZXNzIG9mIE1vbmV0aGEgVmF1bHQuCiAgICAgKiAgQHBhcmFtIG5ld1ZhdWx0IE5ldyBhZGRyZXNzIG9mIE1vbmV0aGEgVmF1bHQKICAgICAqLwogICAgZnVuY3Rpb24gY2hhbmdlTW9uZXRoYVZhdWx0KGFkZHJlc3MgbmV3VmF1bHQpIGV4dGVybmFsIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHsKICAgICAgICBtb25ldGhhVmF1bHQgPSBuZXdWYXVsdDsKICAgIH0KCiAgICAvKioKICAgICAqICBBbGxvd3Mgb3RoZXIgbW9uZXRoYSBhY2NvdW50IG9yIGNvbnRyYWN0IHRvIHNldCBuZXcgbW9uZXRoYSBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldE1vbmV0aGFBZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MsIGJvb2wgX2lzTW9uZXRoYUFkZHJlc3MpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluIHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpOwoKICAgICAgICBpc01vbmV0aGFBZGRyZXNzW19hZGRyZXNzXSA9IF9pc01vbmV0aGFBZGRyZXNzOwogICAgfQoKICAgIC8qKgogICAgICogIHNldEFkbWluIGFsbG93cyBvd25lciB0byBjaGFuZ2UgYWRkcmVzcyBvZiBhZG1pbi4KICAgICAqICBAcGFyYW0gX2FkbWluIE5ldyBhZGRyZXNzIG9mIGFkbWluCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldEFkbWluKGFkZHJlc3MgX2FkbWluKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9hZG1pbiAhPSAweDApOwogICAgICAgIGFkbWluID0gX2FkbWluOwogICAgfQp9CgovLyBGaWxlOiBjb250cmFjdHMvUGF5bWVudFByb2Nlc3Nvci5zb2wKCi8qKgogKiAgQHRpdGxlIFBheW1lbnRQcm9jZXNzb3IKICogIEVhY2ggTWVyY2hhbnQgaGFzIG9uZSBQYXltZW50UHJvY2Vzc29yIHRoYXQgZW5zdXJlIHBheW1lbnQgYW5kIG9yZGVyIHByb2Nlc3Npbmcgd2l0aCBUcnVzdCBhbmQgUmVwdXRhdGlvbgogKgogKiAgUGF5bWVudCBQcm9jZXNzb3IgU3RhdGUgVHJhbnNpdGlvbnM6CiAqICBOdWxsIC0oYWRkT3JkZXIpIC0+IENyZWF0ZWQKICogIENyZWF0ZWQgLShzZWN1cmVQYXkpIC0+IFBhaWQKICogIENyZWF0ZWQgLShjYW5jZWxPcmRlcikgLT4gQ2FuY2VsbGVkCiAqICBQYWlkIC0ocmVmdW5kUGF5bWVudCkgLT4gUmVmdW5kaW5nCiAqICBQYWlkIC0ocHJvY2Vzc1BheW1lbnQpIC0+IEZpbmFsaXplZAogKiAgUmVmdW5kaW5nIC0od2l0aGRyYXdSZWZ1bmQpIC0+IFJlZnVuZGVkCiAqLwoKCmNvbnRyYWN0IFBheW1lbnRQcm9jZXNzb3IgaXMgUGF1c2FibGUsIERlc3RydWN0aWJsZSwgQ29udGFjdGFibGUsIFJlc3RyaWN0ZWQgewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIHN0cmluZyBjb25zdGFudCBWRVJTSU9OID0gIjAuMyI7CgogICAgLy8vIE1vbmV0aGFHYXRld2F5IGNvbnRyYWN0IGZvciBwYXltZW50IHByb2Nlc3NpbmcKICAgIE1vbmV0aGFHYXRld2F5IHB1YmxpYyBtb25ldGhhR2F0ZXdheTsKCiAgICAvLy8gTWVyY2hhbnREZWFsc0hpc3RvcnkgY29udHJhY3Qgb2YgYWNjZXB0b3IncyBtZXJjaGFudAogICAgTWVyY2hhbnREZWFsc0hpc3RvcnkgcHVibGljIG1lcmNoYW50SGlzdG9yeTsKCiAgICAvLy8gQWRkcmVzcyBvZiBNZXJjaGFudFdhbGxldCwgd2hlcmUgbWVyY2hhbnQgcmVwdXRhdGlvbiBhbmQgZnVuZHMgYXJlIHN0b3JlZAogICAgTWVyY2hhbnRXYWxsZXQgcHVibGljIG1lcmNoYW50V2FsbGV0OwoKICAgIC8vLyBNZXJjaGFudCBpZGVudGlmaWVyIGhhc2gsIHRoYXQgYXNzb2NpYXRlcyB3aXRoIHRoZSBhY2NlcHRvcgogICAgYnl0ZXMzMiBwdWJsaWMgbWVyY2hhbnRJZEhhc2g7CgogICAgbWFwcGluZyAodWludD0+T3JkZXIpIHB1YmxpYyBvcmRlcnM7CgogICAgZW51bSBTdGF0ZSB7TnVsbCwgQ3JlYXRlZCwgUGFpZCwgRmluYWxpemVkLCBSZWZ1bmRpbmcsIFJlZnVuZGVkLCBDYW5jZWxsZWR9CgogICAgc3RydWN0IE9yZGVyIHsKICAgICAgICBTdGF0ZSBzdGF0ZTsKICAgICAgICB1aW50IHByaWNlOwogICAgICAgIHVpbnQgY3JlYXRpb25UaW1lOwogICAgICAgIGFkZHJlc3MgcGF5bWVudEFjY2VwdG9yOwogICAgICAgIGFkZHJlc3Mgb3JpZ2luQWRkcmVzczsKICAgIH0KCiAgICAvKioKICAgICAqICBBc3NlcnRzIGN1cnJlbnQgc3RhdGUuCiAgICAgKiAgQHBhcmFtIF9zdGF0ZSBFeHBlY3RlZCBzdGF0ZQogICAgICogIEBwYXJhbSBfb3JkZXJJZCBPcmRlciBJZAogICAgICovCiAgICBtb2RpZmllciBhdFN0YXRlKHVpbnQgX29yZGVySWQsIFN0YXRlIF9zdGF0ZSkgewogICAgICAgIHJlcXVpcmUoX3N0YXRlID09IG9yZGVyc1tfb3JkZXJJZF0uc3RhdGUpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiAgUGVyZm9ybXMgYSB0cmFuc2l0aW9uIGFmdGVyIGZ1bmN0aW9uIGV4ZWN1dGlvbi4KICAgICAqICBAcGFyYW0gX3N0YXRlIE5leHQgc3RhdGUKICAgICAqICBAcGFyYW0gX29yZGVySWQgT3JkZXIgSWQKICAgICAqLwogICAgbW9kaWZpZXIgdHJhbnNpdGlvbih1aW50IF9vcmRlcklkLCBTdGF0ZSBfc3RhdGUpIHsKICAgICAgICBfOwogICAgICAgIG9yZGVyc1tfb3JkZXJJZF0uc3RhdGUgPSBfc3RhdGU7CiAgICB9CgogICAgLyoqCiAgICAgKiAgcGF5bWVudCBQcm9jZXNzb3Igc2V0cyBNb25ldGhhIEdhdGV3YXkKICAgICAqICBAcGFyYW0gX21lcmNoYW50SWQgTWVyY2hhbnQgb2YgdGhlIGFjY2VwdG9yCiAgICAgKiAgQHBhcmFtIF9tZXJjaGFudEhpc3RvcnkgQWRkcmVzcyBvZiBNZXJjaGFudERlYWxzSGlzdG9yeSBjb250cmFjdCBvZiBhY2NlcHRvcidzIG1lcmNoYW50CiAgICAgKiAgQHBhcmFtIF9tb25ldGhhR2F0ZXdheSBBZGRyZXNzIG9mIE1vbmV0aGFHYXRld2F5IGNvbnRyYWN0IGZvciBwYXltZW50IHByb2Nlc3NpbmcKICAgICAqICBAcGFyYW0gX21lcmNoYW50V2FsbGV0IEFkZHJlc3Mgb2YgTWVyY2hhbnRXYWxsZXQsIHdoZXJlIG1lcmNoYW50IHJlcHV0YXRpb24gYW5kIGZ1bmRzIGFyZSBzdG9yZWQKICAgICAqLwogICAgZnVuY3Rpb24gUGF5bWVudFByb2Nlc3NvcigKICAgICAgICBzdHJpbmcgX21lcmNoYW50SWQsCiAgICAgICAgTWVyY2hhbnREZWFsc0hpc3RvcnkgX21lcmNoYW50SGlzdG9yeSwKICAgICAgICBNb25ldGhhR2F0ZXdheSBfbW9uZXRoYUdhdGV3YXksCiAgICAgICAgTWVyY2hhbnRXYWxsZXQgX21lcmNoYW50V2FsbGV0CiAgICApIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUoYnl0ZXMoX21lcmNoYW50SWQpLmxlbmd0aCA+IDApOwoKICAgICAgICBtZXJjaGFudElkSGFzaCA9IGtlY2NhazI1NihfbWVyY2hhbnRJZCk7CgogICAgICAgIHNldE1vbmV0aGFHYXRld2F5KF9tb25ldGhhR2F0ZXdheSk7CiAgICAgICAgc2V0TWVyY2hhbnRXYWxsZXQoX21lcmNoYW50V2FsbGV0KTsKICAgICAgICBzZXRNZXJjaGFudERlYWxzSGlzdG9yeShfbWVyY2hhbnRIaXN0b3J5KTsKICAgIH0KCiAgICAvKioKICAgICAqICBBc3NpZ25zIHRoZSBhY2NlcHRvciB0byB0aGUgb3JkZXIgKHdoZW4gY2xpZW50IGluaXRpYXRlcyBvcmRlcikuCiAgICAgKiAgQHBhcmFtIF9vcmRlcklkIElkZW50aWZpZXIgb2YgdGhlIG9yZGVyCiAgICAgKiAgQHBhcmFtIF9wcmljZSBQcmljZSBvZiB0aGUgb3JkZXIgCiAgICAgKiAgQHBhcmFtIF9wYXltZW50QWNjZXB0b3Igb3JkZXIgcGF5bWVudCBhY2NlcHRvcgogICAgICogIEBwYXJhbSBfb3JpZ2luQWRkcmVzcyBidXllciBhZGRyZXNzCiAgICAgKiAgQHBhcmFtIF9vcmRlckNyZWF0aW9uVGltZSBvcmRlciBjcmVhdGlvbiB0aW1lCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFkZE9yZGVyKAogICAgICAgIHVpbnQgX29yZGVySWQsCiAgICAgICAgdWludCBfcHJpY2UsCiAgICAgICAgYWRkcmVzcyBfcGF5bWVudEFjY2VwdG9yLAogICAgICAgIGFkZHJlc3MgX29yaWdpbkFkZHJlc3MsCiAgICAgICAgdWludCBfb3JkZXJDcmVhdGlvblRpbWUKICAgICkgZXh0ZXJuYWwgb25seU1vbmV0aGEgd2hlbk5vdFBhdXNlZCBhdFN0YXRlKF9vcmRlcklkLCBTdGF0ZS5OdWxsKQogICAgewogICAgICAgIHJlcXVpcmUoX29yZGVySWQgPiAwKTsKICAgICAgICByZXF1aXJlKF9wcmljZSA+IDApOwoKICAgICAgICBvcmRlcnNbX29yZGVySWRdID0gT3JkZXIoewogICAgICAgICAgICBzdGF0ZTogU3RhdGUuQ3JlYXRlZCwKICAgICAgICAgICAgcHJpY2U6IF9wcmljZSwKICAgICAgICAgICAgY3JlYXRpb25UaW1lOiBfb3JkZXJDcmVhdGlvblRpbWUsCiAgICAgICAgICAgIHBheW1lbnRBY2NlcHRvcjogX3BheW1lbnRBY2NlcHRvciwKICAgICAgICAgICAgb3JpZ2luQWRkcmVzczogX29yaWdpbkFkZHJlc3MKICAgICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqICBzZWN1cmVQYXkgY2FuIGJlIHVzZWQgYnkgY2xpZW50IGlmIGhlIHdhbnRzIHRvIHNlY3VyZWx5IHNldCBjbGllbnQgYWRkcmVzcyBmb3IgcmVmdW5kIHRvZ2V0aGVyIHdpdGggcGF5bWVudC4KICAgICAqICBUaGlzIGZ1bmN0aW9uIHJlcXVpcmUgbW9yZSBnYXMsIHRoZW4gZmFsbGJhY2sgZnVuY3Rpb24uCiAgICAgKiAgQHBhcmFtIF9vcmRlcklkIElkZW50aWZpZXIgb2YgdGhlIG9yZGVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNlY3VyZVBheSh1aW50IF9vcmRlcklkKQogICAgICAgIGV4dGVybmFsIHBheWFibGUgd2hlbk5vdFBhdXNlZAogICAgICAgIGF0U3RhdGUoX29yZGVySWQsIFN0YXRlLkNyZWF0ZWQpIHRyYW5zaXRpb24oX29yZGVySWQsIFN0YXRlLlBhaWQpCiAgICB7CiAgICAgICAgT3JkZXIgc3RvcmFnZSBvcmRlciA9IG9yZGVyc1tfb3JkZXJJZF07CgogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvcmRlci5wYXltZW50QWNjZXB0b3IpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID09IG9yZGVyLnByaWNlKTsKICAgIH0KCiAgICAvKioKICAgICAqICBjYW5jZWxPcmRlciBpcyB1c2VkIHdoZW4gY2xpZW50IGRvZXNuJ3QgcGF5IGFuZCBvcmRlciBuZWVkIHRvIGJlIGNhbmNlbGxlZC4KICAgICAqICBAcGFyYW0gX29yZGVySWQgSWRlbnRpZmllciBvZiB0aGUgb3JkZXIKICAgICAqICBAcGFyYW0gX2NsaWVudFJlcHV0YXRpb24gVXBkYXRlZCByZXB1dGF0aW9uIG9mIHRoZSBjbGllbnQKICAgICAqICBAcGFyYW0gX21lcmNoYW50UmVwdXRhdGlvbiBVcGRhdGVkIHJlcHV0YXRpb24gb2YgdGhlIG1lcmNoYW50CiAgICAgKiAgQHBhcmFtIF9kZWFsSGFzaCBIYXNoY29kZSBvZiB0aGUgZGVhbCwgZGVzY3JpYmluZyB0aGUgb3JkZXIgKHVzZWQgZm9yIGRlYWwgdmVyaWZpY2F0aW9uKQogICAgICogIEBwYXJhbSBfY2FuY2VsUmVhc29uIE9yZGVyIGNhbmNlbCByZWFzb24KICAgICAqLwogICAgZnVuY3Rpb24gY2FuY2VsT3JkZXIoCiAgICAgICAgdWludCBfb3JkZXJJZCwKICAgICAgICB1aW50MzIgX2NsaWVudFJlcHV0YXRpb24sCiAgICAgICAgdWludDMyIF9tZXJjaGFudFJlcHV0YXRpb24sCiAgICAgICAgdWludCBfZGVhbEhhc2gsCiAgICAgICAgc3RyaW5nIF9jYW5jZWxSZWFzb24KICAgICkKICAgICAgICBleHRlcm5hbCBvbmx5TW9uZXRoYSB3aGVuTm90UGF1c2VkCiAgICAgICAgYXRTdGF0ZShfb3JkZXJJZCwgU3RhdGUuQ3JlYXRlZCkgdHJhbnNpdGlvbihfb3JkZXJJZCwgU3RhdGUuQ2FuY2VsbGVkKQogICAgewogICAgICAgIHJlcXVpcmUoYnl0ZXMoX2NhbmNlbFJlYXNvbikubGVuZ3RoID4gMCk7CgogICAgICAgIE9yZGVyIHN0b3JhZ2Ugb3JkZXIgPSBvcmRlcnNbX29yZGVySWRdOwoKICAgICAgICB1cGRhdGVEZWFsQ29uZGl0aW9ucygKICAgICAgICAgICAgX29yZGVySWQsCiAgICAgICAgICAgIF9jbGllbnRSZXB1dGF0aW9uLAogICAgICAgICAgICBfbWVyY2hhbnRSZXB1dGF0aW9uLAogICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgX2RlYWxIYXNoCiAgICAgICAgKTsKCiAgICAgICAgbWVyY2hhbnRIaXN0b3J5LnJlY29yZERlYWxDYW5jZWxSZWFzb24oCiAgICAgICAgICAgIF9vcmRlcklkLAogICAgICAgICAgICBvcmRlci5vcmlnaW5BZGRyZXNzLAogICAgICAgICAgICBfY2xpZW50UmVwdXRhdGlvbiwKICAgICAgICAgICAgX21lcmNoYW50UmVwdXRhdGlvbiwKICAgICAgICAgICAgX2RlYWxIYXNoLAogICAgICAgICAgICBfY2FuY2VsUmVhc29uCiAgICAgICAgKTsKICAgIH0KCiAgICAvKioKICAgICAqICByZWZ1bmRQYXltZW50IHVzZWQgaW4gY2FzZSBvcmRlciBjYW5ub3QgYmUgcHJvY2Vzc2VkLgogICAgICogIFRoaXMgZnVuY3Rpb24gaW5pdGlhdGUgcHJvY2VzcyBvZiBmdW5kcyByZWZ1bmRpbmcgdG8gdGhlIGNsaWVudC4KICAgICAqICBAcGFyYW0gX29yZGVySWQgSWRlbnRpZmllciBvZiB0aGUgb3JkZXIKICAgICAqICBAcGFyYW0gX2NsaWVudFJlcHV0YXRpb24gVXBkYXRlZCByZXB1dGF0aW9uIG9mIHRoZSBjbGllbnQKICAgICAqICBAcGFyYW0gX21lcmNoYW50UmVwdXRhdGlvbiBVcGRhdGVkIHJlcHV0YXRpb24gb2YgdGhlIG1lcmNoYW50CiAgICAgKiAgQHBhcmFtIF9kZWFsSGFzaCBIYXNoY29kZSBvZiB0aGUgZGVhbCwgZGVzY3JpYmluZyB0aGUgb3JkZXIgKHVzZWQgZm9yIGRlYWwgdmVyaWZpY2F0aW9uKQogICAgICogIEBwYXJhbSBfcmVmdW5kUmVhc29uIE9yZGVyIHJlZnVuZCByZWFzb24sIG9yZGVyIHdpbGwgYmUgbW92ZWQgdG8gU3RhdGUgQ2FuY2VsbGVkIGFmdGVyIENsaWVudCB3aXRoZHJhd3MgbW9uZXkKICAgICAqLwogICAgZnVuY3Rpb24gcmVmdW5kUGF5bWVudCgKICAgICAgICB1aW50IF9vcmRlcklkLAogICAgICAgIHVpbnQzMiBfY2xpZW50UmVwdXRhdGlvbiwKICAgICAgICB1aW50MzIgX21lcmNoYW50UmVwdXRhdGlvbiwKICAgICAgICB1aW50IF9kZWFsSGFzaCwKICAgICAgICBzdHJpbmcgX3JlZnVuZFJlYXNvbgogICAgKSAgIAogICAgICAgIGV4dGVybmFsIG9ubHlNb25ldGhhIHdoZW5Ob3RQYXVzZWQKICAgICAgICBhdFN0YXRlKF9vcmRlcklkLCBTdGF0ZS5QYWlkKSB0cmFuc2l0aW9uKF9vcmRlcklkLCBTdGF0ZS5SZWZ1bmRpbmcpCiAgICB7CiAgICAgICAgcmVxdWlyZShieXRlcyhfcmVmdW5kUmVhc29uKS5sZW5ndGggPiAwKTsKCiAgICAgICAgT3JkZXIgc3RvcmFnZSBvcmRlciA9IG9yZGVyc1tfb3JkZXJJZF07CgogICAgICAgIHVwZGF0ZURlYWxDb25kaXRpb25zKAogICAgICAgICAgICBfb3JkZXJJZCwKICAgICAgICAgICAgX2NsaWVudFJlcHV0YXRpb24sCiAgICAgICAgICAgIF9tZXJjaGFudFJlcHV0YXRpb24sCiAgICAgICAgICAgIGZhbHNlLAogICAgICAgICAgICBfZGVhbEhhc2gKICAgICAgICApOwoKICAgICAgICBtZXJjaGFudEhpc3RvcnkucmVjb3JkRGVhbFJlZnVuZFJlYXNvbigKICAgICAgICAgICAgX29yZGVySWQsCiAgICAgICAgICAgIG9yZGVyLm9yaWdpbkFkZHJlc3MsCiAgICAgICAgICAgIF9jbGllbnRSZXB1dGF0aW9uLAogICAgICAgICAgICBfbWVyY2hhbnRSZXB1dGF0aW9uLAogICAgICAgICAgICBfZGVhbEhhc2gsCiAgICAgICAgICAgIF9yZWZ1bmRSZWFzb24KICAgICAgICApOwogICAgfQoKICAgIC8qKgogICAgICogIHdpdGhkcmF3UmVmdW5kIHBlcmZvcm1zIGZ1bmQgdHJhbnNmZXIgdG8gdGhlIGNsaWVudCdzIGFjY291bnQuCiAgICAgKiAgQHBhcmFtIF9vcmRlcklkIElkZW50aWZpZXIgb2YgdGhlIG9yZGVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIHdpdGhkcmF3UmVmdW5kKHVpbnQgX29yZGVySWQpIAogICAgICAgIGV4dGVybmFsIHdoZW5Ob3RQYXVzZWQKICAgICAgICBhdFN0YXRlKF9vcmRlcklkLCBTdGF0ZS5SZWZ1bmRpbmcpIHRyYW5zaXRpb24oX29yZGVySWQsIFN0YXRlLlJlZnVuZGVkKSAKICAgIHsKICAgICAgICBPcmRlciBzdG9yYWdlIG9yZGVyID0gb3JkZXJzW19vcmRlcklkXTsKICAgICAgICBvcmRlci5vcmlnaW5BZGRyZXNzLnRyYW5zZmVyKG9yZGVyLnByaWNlKTsKICAgIH0KCiAgICAvKioKICAgICAqICBwcm9jZXNzUGF5bWVudCB0cmFuc2ZlciBmdW5kcyB0byBNb25ldGhhR2F0ZXdheSBhbmQgY29tcGxldGVzIHRoZSBvcmRlci4KICAgICAqICBAcGFyYW0gX29yZGVySWQgSWRlbnRpZmllciBvZiB0aGUgb3JkZXIKICAgICAqICBAcGFyYW0gX2NsaWVudFJlcHV0YXRpb24gVXBkYXRlZCByZXB1dGF0aW9uIG9mIHRoZSBjbGllbnQKICAgICAqICBAcGFyYW0gX21lcmNoYW50UmVwdXRhdGlvbiBVcGRhdGVkIHJlcHV0YXRpb24gb2YgdGhlIG1lcmNoYW50CiAgICAgKiAgQHBhcmFtIF9kZWFsSGFzaCBIYXNoY29kZSBvZiB0aGUgZGVhbCwgZGVzY3JpYmluZyB0aGUgb3JkZXIgKHVzZWQgZm9yIGRlYWwgdmVyaWZpY2F0aW9uKQogICAgICovCiAgICBmdW5jdGlvbiBwcm9jZXNzUGF5bWVudCgKICAgICAgICB1aW50IF9vcmRlcklkLAogICAgICAgIHVpbnQzMiBfY2xpZW50UmVwdXRhdGlvbiwKICAgICAgICB1aW50MzIgX21lcmNoYW50UmVwdXRhdGlvbiwKICAgICAgICB1aW50IF9kZWFsSGFzaAogICAgKQogICAgICAgIGV4dGVybmFsIG9ubHlNb25ldGhhIHdoZW5Ob3RQYXVzZWQKICAgICAgICBhdFN0YXRlKF9vcmRlcklkLCBTdGF0ZS5QYWlkKSB0cmFuc2l0aW9uKF9vcmRlcklkLCBTdGF0ZS5GaW5hbGl6ZWQpCiAgICB7CgogICAgICAgIG1vbmV0aGFHYXRld2F5LmFjY2VwdFBheW1lbnQudmFsdWUob3JkZXJzW19vcmRlcklkXS5wcmljZSkobWVyY2hhbnRXYWxsZXQpOwoKICAgICAgICB1cGRhdGVEZWFsQ29uZGl0aW9ucygKICAgICAgICAgICAgX29yZGVySWQsCiAgICAgICAgICAgIF9jbGllbnRSZXB1dGF0aW9uLAogICAgICAgICAgICBfbWVyY2hhbnRSZXB1dGF0aW9uLAogICAgICAgICAgICB0cnVlLAogICAgICAgICAgICBfZGVhbEhhc2gKICAgICAgICApOwogICAgfQoKICAgIC8qKgogICAgICogIHNldE1vbmV0aGFHYXRld2F5IGFsbG93cyBvd25lciB0byBjaGFuZ2UgYWRkcmVzcyBvZiBNb25ldGhhR2F0ZXdheS4KICAgICAqICBAcGFyYW0gX25ld0dhdGV3YXkgQWRkcmVzcyBvZiBuZXcgTW9uZXRoYUdhdGV3YXkgY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gc2V0TW9uZXRoYUdhdGV3YXkoTW9uZXRoYUdhdGV3YXkgX25ld0dhdGV3YXkpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoYWRkcmVzcyhfbmV3R2F0ZXdheSkgIT0gMHgwKTsKCiAgICAgICAgbW9uZXRoYUdhdGV3YXkgPSBfbmV3R2F0ZXdheTsKICAgIH0KCiAgICAvKioKICAgICAqICBzZXRNZXJjaGFudFdhbGxldCBhbGxvd3Mgb3duZXIgdG8gY2hhbmdlIGFkZHJlc3Mgb2YgTWVyY2hhbnRXYWxsZXQuCiAgICAgKiAgQHBhcmFtIF9uZXdXYWxsZXQgQWRkcmVzcyBvZiBuZXcgTWVyY2hhbnRXYWxsZXQgY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gc2V0TWVyY2hhbnRXYWxsZXQoTWVyY2hhbnRXYWxsZXQgX25ld1dhbGxldCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShhZGRyZXNzKF9uZXdXYWxsZXQpICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfbmV3V2FsbGV0Lm1lcmNoYW50SWRIYXNoKCkgPT0gbWVyY2hhbnRJZEhhc2gpOwoKICAgICAgICBtZXJjaGFudFdhbGxldCA9IF9uZXdXYWxsZXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiAgc2V0TWVyY2hhbnREZWFsc0hpc3RvcnkgYWxsb3dzIG93bmVyIHRvIGNoYW5nZSBhZGRyZXNzIG9mIE1lcmNoYW50RGVhbHNIaXN0b3J5LgogICAgICogIEBwYXJhbSBfbWVyY2hhbnRIaXN0b3J5IEFkZHJlc3Mgb2YgbmV3IE1lcmNoYW50RGVhbHNIaXN0b3J5IGNvbnRyYWN0CiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldE1lcmNoYW50RGVhbHNIaXN0b3J5KE1lcmNoYW50RGVhbHNIaXN0b3J5IF9tZXJjaGFudEhpc3RvcnkpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoYWRkcmVzcyhfbWVyY2hhbnRIaXN0b3J5KSAhPSAweDApOwogICAgICAgIHJlcXVpcmUoX21lcmNoYW50SGlzdG9yeS5tZXJjaGFudElkSGFzaCgpID09IG1lcmNoYW50SWRIYXNoKTsKCiAgICAgICAgbWVyY2hhbnRIaXN0b3J5ID0gX21lcmNoYW50SGlzdG9yeTsKICAgIH0KCiAgICAvKioKICAgICAqICB1cGRhdGVEZWFsQ29uZGl0aW9ucyByZWNvcmQgZmluYWxpemVkIGRlYWwgYW5kIHVwZGF0ZXMgbWVyY2hhbnQgcmVwdXRhdGlvbgogICAgICogIGluIGZ1dHVyZTogdXBkYXRlIENsaWVudCByZXB1dGF0aW9uCiAgICAgKiAgQHBhcmFtIF9vcmRlcklkIElkZW50aWZpZXIgb2YgdGhlIG9yZGVyCiAgICAgKiAgQHBhcmFtIF9jbGllbnRSZXB1dGF0aW9uIFVwZGF0ZWQgcmVwdXRhdGlvbiBvZiB0aGUgY2xpZW50CiAgICAgKiAgQHBhcmFtIF9tZXJjaGFudFJlcHV0YXRpb24gVXBkYXRlZCByZXB1dGF0aW9uIG9mIHRoZSBtZXJjaGFudAogICAgICogIEBwYXJhbSBfaXNTdWNjZXNzIElkZW50aWZpZXMgd2hldGhlciBkZWFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICogIEBwYXJhbSBfZGVhbEhhc2ggSGFzaGNvZGUgb2YgdGhlIGRlYWwsIGRlc2NyaWJpbmcgdGhlIG9yZGVyICh1c2VkIGZvciBkZWFsIHZlcmlmaWNhdGlvbikKICAgICAqLwogICAgZnVuY3Rpb24gdXBkYXRlRGVhbENvbmRpdGlvbnMoCiAgICAgICAgdWludCBfb3JkZXJJZCwKICAgICAgICB1aW50MzIgX2NsaWVudFJlcHV0YXRpb24sCiAgICAgICAgdWludDMyIF9tZXJjaGFudFJlcHV0YXRpb24sCiAgICAgICAgYm9vbCBfaXNTdWNjZXNzLAogICAgICAgIHVpbnQgX2RlYWxIYXNoCiAgICApIGludGVybmFsCiAgICB7CiAgICAgICAgbWVyY2hhbnRIaXN0b3J5LnJlY29yZERlYWwoCiAgICAgICAgICAgIF9vcmRlcklkLAogICAgICAgICAgICBvcmRlcnNbX29yZGVySWRdLm9yaWdpbkFkZHJlc3MsCiAgICAgICAgICAgIF9jbGllbnRSZXB1dGF0aW9uLAogICAgICAgICAgICBfbWVyY2hhbnRSZXB1dGF0aW9uLAogICAgICAgICAgICBfaXNTdWNjZXNzLAogICAgICAgICAgICBfZGVhbEhhc2gKICAgICAgICApOwoKICAgICAgICAvL3VwZGF0ZSBwYXJ0aWVzIFJlcHV0YXRpb24KICAgICAgICBtZXJjaGFudFdhbGxldC5zZXRDb21wb3NpdGVSZXB1dGF0aW9uKCJ0b3RhbCIsIF9tZXJjaGFudFJlcHV0YXRpb24pOwogICAgfQp9'.
	

]
