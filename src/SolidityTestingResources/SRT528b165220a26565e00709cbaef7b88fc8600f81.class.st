Class {
	#name : #SRT528b165220a26565e00709cbaef7b88fc8600f81,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT528b165220a26565e00709cbaef7b88fc8600f81 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCn0KCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAgIC8qKgogICAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgICAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgICAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CgogICAgICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAgICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cgp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgICAqIGFjY291bnQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQoKfQoKLyoqCiAqIEB0aXRsZSBNaW50YWJsZSB0b2tlbgogKiBAZGV2IFNpbXBsZSBFUkMyMCBUb2tlbiBleGFtcGxlLCB3aXRoIG1pbnRhYmxlIHRva2VuIGNyZWF0aW9uCiAqIEBkZXYgSXNzdWU6ICogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9pc3N1ZXMvMTIwCiAqIEJhc2VkIG9uIGNvZGUgYnkgVG9rZW5NYXJrZXROZXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9Ub2tlbk1hcmtldE5ldC9pY28vYmxvYi9tYXN0ZXIvY29udHJhY3RzL01pbnRhYmxlVG9rZW4uc29sCiAqLwoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKCiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwoKICAgIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICAgIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKICAgIGFkZHJlc3MgcHVibGljIHNhbGVBZ2VudDsKCiAgICBmdW5jdGlvbiBzZXRTYWxlQWdlbnQoYWRkcmVzcyBuZXdTYWxlQWduZXQpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gc2FsZUFnZW50IHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIHNhbGVBZ2VudCA9IG5ld1NhbGVBZ25ldDsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gc2FsZUFnZW50ICYmICFtaW50aW5nRmluaXNoZWQpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgICAgICBNaW50KF90bywgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIHN0b3AgbWludGluZyBuZXcgdG9rZW5zLgogICAgICogQHJldHVybiBUcnVlIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZSgobXNnLnNlbmRlciA9PSBzYWxlQWdlbnQgfHwgbXNnLnNlbmRlciA9PSBvd25lcikgJiYgIW1pbnRpbmdGaW5pc2hlZCk7CiAgICAgICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICBNaW50RmluaXNoZWQoKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgp9CgovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewoKICAgIGV2ZW50IFBhdXNlKCk7CgogICAgZXZlbnQgVW5wYXVzZSgpOwoKICAgIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKICAgIC8qKgogICAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgSVMgcGF1c2VkCiAgICAgKi8KICAgIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICAgICAgcmVxdWlyZSghcGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgSVMgTk9UIHBhdXNlZAogICAgICovCiAgICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgICAgIHJlcXVpcmUocGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICAgKi8KICAgIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIHBhdXNlZCA9IHRydWU7CiAgICAgICAgUGF1c2UoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAgICovCiAgICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgewogICAgICAgIHBhdXNlZCA9IGZhbHNlOwogICAgICAgIFVucGF1c2UoKTsKICAgIH0KCn0KCmNvbnRyYWN0IENvdmVzdGluZ1Rva2VuIGlzIE1pbnRhYmxlVG9rZW4gewoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJDb3Zlc3RpbmciOwoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkNPViI7CgogICAgdWludDMyIHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGxvY2tlZDsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKGxvY2tlZFttc2cuc2VuZGVyXSA8IG5vdyk7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShsb2NrZWRbX2Zyb21dIDwgbm93KTsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gbG9jayhhZGRyZXNzIGFkZHIsIHVpbnQgcGVyaW9kSW5EYXlzKSB7CiAgICAgICAgcmVxdWlyZShsb2NrZWRbYWRkcl0gPCBub3cgJiYgKG1zZy5zZW5kZXIgPT0gc2FsZUFnZW50IHx8IG1zZy5zZW5kZXIgPT0gYWRkcikpOwogICAgICAgIGxvY2tlZFthZGRyXSA9IG5vdyArIHBlcmlvZEluRGF5cyAqIDEgZGF5czsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICByZXZlcnQoKTsKICAgIH0KCn0KCmNvbnRyYWN0IFN0YWdlZENyb3dkc2FsZSBpcyBQYXVzYWJsZSB7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogICAgc3RydWN0IFN0YWdlIHsKICAgIHVpbnQgaGFyZGNhcDsKICAgIHVpbnQgcHJpY2U7CiAgICB1aW50IGludmVzdGVkOwogICAgdWludCBjbG9zZWQ7CiAgICB9CgogICAgdWludCBwdWJsaWMgc3RhcnQ7CgogICAgdWludCBwdWJsaWMgcGVyaW9kOwoKICAgIHVpbnQgcHVibGljIHRvdGFsSGFyZGNhcDsKCiAgICB1aW50IHB1YmxpYyB0b3RhbEludmVzdGVkOwoKICAgIFN0YWdlW10gcHVibGljIHN0YWdlczsKCiAgICBmdW5jdGlvbiBzdGFnZXNDb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gc3RhZ2VzLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRTdGFydCh1aW50IG5ld1N0YXJ0KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBzdGFydCA9IG5ld1N0YXJ0OwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFBlcmlvZCh1aW50IG5ld1BlcmlvZCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcGVyaW9kID0gbmV3UGVyaW9kOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZFN0YWdlKHVpbnQgaGFyZGNhcCwgdWludCBwcmljZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShoYXJkY2FwID4gMCAmJiBwcmljZSA+IDApOwogICAgICAgIFN0YWdlIG1lbW9yeSBzdGFnZSA9IFN0YWdlKGhhcmRjYXAubXVsKDEgZXRoZXIpLCBwcmljZSwgMCwgMCk7CiAgICAgICAgc3RhZ2VzLnB1c2goc3RhZ2UpOwogICAgICAgIHRvdGFsSGFyZGNhcCA9IHRvdGFsSGFyZGNhcC5hZGQoc3RhZ2UuaGFyZGNhcCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlU3RhZ2UodWludDggbnVtYmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG51bWJlciA+PTAgJiYgbnVtYmVyIDwgc3RhZ2VzLmxlbmd0aCk7CiAgICAgICAgU3RhZ2Ugc3RvcmFnZSBzdGFnZSA9IHN0YWdlc1tudW1iZXJdOwogICAgICAgIHRvdGFsSGFyZGNhcCA9IHRvdGFsSGFyZGNhcC5zdWIoc3RhZ2UuaGFyZGNhcCk7CiAgICAgICAgZGVsZXRlIHN0YWdlc1tudW1iZXJdOwogICAgICAgIGZvciAodWludCBpID0gbnVtYmVyOyBpIDwgc3RhZ2VzLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgICAgICBzdGFnZXNbaV0gPSBzdGFnZXNbaSsxXTsKICAgICAgICB9CiAgICAgICAgc3RhZ2VzLmxlbmd0aC0tOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVN0YWdlKHVpbnQ4IG51bWJlciwgdWludCBoYXJkY2FwLCB1aW50IHByaWNlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG51bWJlciA+PSAwICYmbnVtYmVyIDwgc3RhZ2VzLmxlbmd0aCk7CiAgICAgICAgU3RhZ2Ugc3RvcmFnZSBzdGFnZSA9IHN0YWdlc1tudW1iZXJdOwogICAgICAgIHRvdGFsSGFyZGNhcCA9IHRvdGFsSGFyZGNhcC5zdWIoc3RhZ2UuaGFyZGNhcCk7CiAgICAgICAgc3RhZ2UuaGFyZGNhcCA9IGhhcmRjYXAubXVsKDEgZXRoZXIpOwogICAgICAgIHN0YWdlLnByaWNlID0gcHJpY2U7CiAgICAgICAgdG90YWxIYXJkY2FwID0gdG90YWxIYXJkY2FwLmFkZChzdGFnZS5oYXJkY2FwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnNlcnRTdGFnZSh1aW50OCBudW1iZXJBZnRlciwgdWludCBoYXJkY2FwLCB1aW50IHByaWNlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG51bWJlckFmdGVyIDwgc3RhZ2VzLmxlbmd0aCk7CiAgICAgICAgU3RhZ2UgbWVtb3J5IHN0YWdlID0gU3RhZ2UoaGFyZGNhcC5tdWwoMSBldGhlciksIHByaWNlLCAwLCAwKTsKICAgICAgICB0b3RhbEhhcmRjYXAgPSB0b3RhbEhhcmRjYXAuYWRkKHN0YWdlLmhhcmRjYXApOwogICAgICAgIHN0YWdlcy5sZW5ndGgrKzsKICAgICAgICBmb3IgKHVpbnQgaSA9IHN0YWdlcy5sZW5ndGggLSAyOyBpID4gbnVtYmVyQWZ0ZXI7IGktLSkgewogICAgICAgICAgICBzdGFnZXNbaSArIDFdID0gc3RhZ2VzW2ldOwogICAgICAgIH0KICAgICAgICBzdGFnZXNbbnVtYmVyQWZ0ZXIgKyAxXSA9IHN0YWdlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsZWFyU3RhZ2VzKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgc3RhZ2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGRlbGV0ZSBzdGFnZXNbaV07CiAgICAgICAgfQogICAgICAgIHN0YWdlcy5sZW5ndGggLT0gc3RhZ2VzLmxlbmd0aDsKICAgICAgICB0b3RhbEhhcmRjYXAgPSAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGxhc3RTYWxlRGF0ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gc3RhcnQgKyBwZXJpb2QgKiAxIGRheXM7CiAgICB9CgogICAgbW9kaWZpZXIgc2FsZUlzT24oKSB7CiAgICAgICAgcmVxdWlyZShzdGFnZXMubGVuZ3RoID4gMCAmJiBub3cgPj0gc3RhcnQgJiYgbm93IDwgbGFzdFNhbGVEYXRlKCkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaXNVbmRlckhhcmRjYXAoKSB7CiAgICAgICAgcmVxdWlyZSh0b3RhbEludmVzdGVkIDw9IHRvdGFsSGFyZGNhcCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBjdXJyZW50U3RhZ2UoKSBwdWJsaWMgc2FsZUlzT24gaXNVbmRlckhhcmRjYXAgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgZm9yKHVpbnQgaT0wOyBpIDwgc3RhZ2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmKHN0YWdlc1tpXS5jbG9zZWQgPT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV2ZXJ0KCk7CiAgICB9Cgp9Cgpjb250cmFjdCBDb21tb25TYWxlIGlzIFN0YWdlZENyb3dkc2FsZSB7CgogICAgYWRkcmVzcyBwdWJsaWMgbXVsdGlzaWdXYWxsZXQ7CgogICAgdWludCBwdWJsaWMgbWluUHJpY2U7CgogICAgdWludCBwdWJsaWMgdG90YWxUb2tlbnNNaW50ZWQ7CgogICAgQ292ZXN0aW5nVG9rZW4gcHVibGljIHRva2VuOwoKICAgIGZ1bmN0aW9uIHNldE1pblByaWNlKHVpbnQgbmV3TWluUHJpY2UpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIG1pblByaWNlID0gbmV3TWluUHJpY2U7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TXVsdGlzaWdXYWxsZXQoYWRkcmVzcyBuZXdNdWx0aXNpZ1dhbGxldCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgbXVsdGlzaWdXYWxsZXQgPSBuZXdNdWx0aXNpZ1dhbGxldDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRUb2tlbihhZGRyZXNzIG5ld1Rva2VuKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB0b2tlbiA9IENvdmVzdGluZ1Rva2VuKG5ld1Rva2VuKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVUb2tlbnMoKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBtaW5QcmljZSk7CiAgICAgICAgdWludCBzdGFnZUluZGV4ID0gY3VycmVudFN0YWdlKCk7CiAgICAgICAgbXVsdGlzaWdXYWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICBTdGFnZSBzdG9yYWdlIHN0YWdlID0gc3RhZ2VzW3N0YWdlSW5kZXhdOwogICAgICAgIHVpbnQgdG9rZW5zID0gbXNnLnZhbHVlLm11bChzdGFnZS5wcmljZSk7CiAgICAgICAgdG9rZW4ubWludCh0aGlzLCB0b2tlbnMpOwogICAgICAgIHRva2VuLnRyYW5zZmVyKG1zZy5zZW5kZXIsIHRva2Vucyk7CiAgICAgICAgdG90YWxUb2tlbnNNaW50ZWQgPSB0b3RhbFRva2Vuc01pbnRlZC5hZGQodG9rZW5zKTsKICAgICAgICB0b3RhbEludmVzdGVkID0gdG90YWxJbnZlc3RlZC5hZGQobXNnLnZhbHVlKTsKICAgICAgICBzdGFnZS5pbnZlc3RlZCA9IHN0YWdlLmludmVzdGVkLmFkZChtc2cudmFsdWUpOwogICAgICAgIGlmKHN0YWdlLmludmVzdGVkID49IHN0YWdlLmhhcmRjYXApIHsKICAgICAgICAgICAgc3RhZ2UuY2xvc2VkID0gbm93OwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbigpIGV4dGVybmFsIHBheWFibGUgewogICAgICAgIGNyZWF0ZVRva2VucygpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJldHJpZXZlVG9rZW5zKGFkZHJlc3MgYW5vdGhlclRva2VuKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBFUkMyMCBhbGllblRva2VuID0gRVJDMjAoYW5vdGhlclRva2VuKTsKICAgICAgICBhbGllblRva2VuLnRyYW5zZmVyKG11bHRpc2lnV2FsbGV0LCB0b2tlbi5iYWxhbmNlT2YodGhpcykpOwogICAgfQoKfQoKY29udHJhY3QgUHJlc2FsZSBpcyBDb21tb25TYWxlIHsKCiAgICBNYWluc2FsZSBwdWJsaWMgbWFpbnNhbGU7CgogICAgZnVuY3Rpb24gc2V0TWFpbnNhbGUoYWRkcmVzcyBuZXdNYWluc2FsZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgbWFpbnNhbGUgPSBNYWluc2FsZShuZXdNYWluc2FsZSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TXVsdGlzaWdXYWxsZXQoYWRkcmVzcyBuZXdNdWx0aXNpZ1dhbGxldCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgbXVsdGlzaWdXYWxsZXQgPSBuZXdNdWx0aXNpZ1dhbGxldDsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgcHVibGljIHdoZW5Ob3RQYXVzZWQgb25seU93bmVyIHsKICAgICAgICB0b2tlbi5zZXRTYWxlQWdlbnQobWFpbnNhbGUpOwogICAgfQoKICAgIGZ1bmN0aW9uKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgICAgY3JlYXRlVG9rZW5zKCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmV0cmlldmVUb2tlbnMoYWRkcmVzcyBhbm90aGVyVG9rZW4pIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIEVSQzIwIGFsaWVuVG9rZW4gPSBFUkMyMChhbm90aGVyVG9rZW4pOwogICAgICAgIGFsaWVuVG9rZW4udHJhbnNmZXIobXVsdGlzaWdXYWxsZXQsIHRva2VuLmJhbGFuY2VPZih0aGlzKSk7CiAgICB9Cgp9CgoKY29udHJhY3QgTWFpbnNhbGUgaXMgQ29tbW9uU2FsZSB7CgogICAgZW51bSBDdXJyZW5jeSB7IEJUQywgTFRDLCBaRUMsIERBU0gsIFdBVkVTLCBVU0QsIEVVUiB9CgogICAgZXZlbnQgRXh0ZXJuYWxTYWxlKAogICAgICAgIEN1cnJlbmN5IF9jdXJyZW5jeSwKICAgICAgICBieXRlczMyIF90eElkU2hhMywKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgX2J1eWVyLAogICAgICAgIHVpbnQyNTYgX2Ftb3VudFdlaSwKICAgICAgICB1aW50MjU2IF90b2tlbnNFMTgKICAgICk7CgogICAgZXZlbnQgTm90aWZpZXJDaGFuZ2VkKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfb2xkQWRkcmVzcywKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgX25ld0FkZHJlc3MKICAgICk7CgogICAgLy8gQWRkcmVzcyB0aGF0IGNhbiB0aGlzIGNyb3dkc2FsZSBhYm91dCBjaGFuZ2VkIGV4dGVybmFsIGNvbmRpdGlvbnMuCiAgICBhZGRyZXNzIHB1YmxpYyBub3RpZmllcjsKCiAgICAvLyBjdXJyZW5jeV9jb2RlID0+IChzaGEzX29mX3R4X2lkID0+IHRva2Vuc19lMTgpCiAgICBtYXBwaW5nKHVpbnQ4ID0+IG1hcHBpbmcoYnl0ZXMzMiA9PiB1aW50MjU2KSkgcHVibGljIGV4dGVybmFsVHhzOwoKICAgIC8vIFRvdGFsIGFtb3VudCBvZiBleHRlcm5hbCBjb250cmlidXRpb25zIChCVEMsIExUQywgVVNELCBldGMuKSBkdXJpbmcgdGhpcyBjcm93ZHNhbGUuCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbEV4dGVybmFsU2FsZXMgPSAwOwoKICAgIG1vZGlmaWVyIGNhbk5vdGlmeSgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSBub3RpZmllcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tCgogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlcnNUb2tlbnNXYWxsZXQ7CgogICAgYWRkcmVzcyBwdWJsaWMgYm91bnR5VG9rZW5zV2FsbGV0OwoKICAgIHVpbnQgcHVibGljIGZvdW5kZXJzVG9rZW5zUGVyY2VudDsKCiAgICB1aW50IHB1YmxpYyBib3VudHlUb2tlbnNQZXJjZW50OwoKICAgIHVpbnQgcHVibGljIHBlcmNlbnRSYXRlID0gMTAwOwoKICAgIHVpbnQgcHVibGljIGxvY2tQZXJpb2Q7CgogICAgZnVuY3Rpb24gc2V0TG9ja1BlcmlvZCh1aW50IG5ld0xvY2tQZXJpb2QpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGxvY2tQZXJpb2QgPSBuZXdMb2NrUGVyaW9kOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEZvdW5kZXJzVG9rZW5zUGVyY2VudCh1aW50IG5ld0ZvdW5kZXJzVG9rZW5zUGVyY2VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgZm91bmRlcnNUb2tlbnNQZXJjZW50ID0gbmV3Rm91bmRlcnNUb2tlbnNQZXJjZW50OwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJvdW50eVRva2Vuc1BlcmNlbnQodWludCBuZXdCb3VudHlUb2tlbnNQZXJjZW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBib3VudHlUb2tlbnNQZXJjZW50ID0gbmV3Qm91bnR5VG9rZW5zUGVyY2VudDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRGb3VuZGVyc1Rva2Vuc1dhbGxldChhZGRyZXNzIG5ld0ZvdW5kZXJzVG9rZW5zV2FsbGV0KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBmb3VuZGVyc1Rva2Vuc1dhbGxldCA9IG5ld0ZvdW5kZXJzVG9rZW5zV2FsbGV0OwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJvdW50eVRva2Vuc1dhbGxldChhZGRyZXNzIG5ld0JvdW50eVRva2Vuc1dhbGxldCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgYm91bnR5VG9rZW5zV2FsbGV0ID0gbmV3Qm91bnR5VG9rZW5zV2FsbGV0OwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCBvbmx5T3duZXIgewogICAgICAgIHVpbnQgc3VtbWFyeVRva2Vuc1BlcmNlbnQgPSBib3VudHlUb2tlbnNQZXJjZW50ICsgZm91bmRlcnNUb2tlbnNQZXJjZW50OwogICAgICAgIHVpbnQgbWludGVkVG9rZW5zID0gdG9rZW4udG90YWxTdXBwbHkoKTsKICAgICAgICB1aW50IHN1bW1hcnlGb3VuZGVyc1Rva2VucyA9IG1pbnRlZFRva2Vucy5tdWwoc3VtbWFyeVRva2Vuc1BlcmNlbnQpLmRpdihwZXJjZW50UmF0ZSAtIHN1bW1hcnlUb2tlbnNQZXJjZW50KTsKICAgICAgICB1aW50IHRvdGFsU3VwcGx5ID0gc3VtbWFyeUZvdW5kZXJzVG9rZW5zICsgbWludGVkVG9rZW5zOwogICAgICAgIHVpbnQgZm91bmRlcnNUb2tlbnMgPSB0b3RhbFN1cHBseS5tdWwoZm91bmRlcnNUb2tlbnNQZXJjZW50KS5kaXYocGVyY2VudFJhdGUpOwogICAgICAgIHVpbnQgYm91bnR5VG9rZW5zID0gdG90YWxTdXBwbHkubXVsKGJvdW50eVRva2Vuc1BlcmNlbnQpLmRpdihwZXJjZW50UmF0ZSk7CiAgICAgICAgdG9rZW4ubWludCh0aGlzLCBmb3VuZGVyc1Rva2Vucyk7CiAgICAgICAgdG9rZW4ubG9jayhmb3VuZGVyc1Rva2Vuc1dhbGxldCwgbG9ja1BlcmlvZCAqIDEgZGF5cyk7CiAgICAgICAgdG9rZW4udHJhbnNmZXIoZm91bmRlcnNUb2tlbnNXYWxsZXQsIGZvdW5kZXJzVG9rZW5zKTsKICAgICAgICB0b2tlbi5taW50KHRoaXMsIGJvdW50eVRva2Vucyk7CiAgICAgICAgdG9rZW4udHJhbnNmZXIoYm91bnR5VG9rZW5zV2FsbGV0LCBib3VudHlUb2tlbnMpOwogICAgICAgIHRvdGFsVG9rZW5zTWludGVkID0gdG90YWxUb2tlbnNNaW50ZWQuYWRkKGZvdW5kZXJzVG9rZW5zKS5hZGQoYm91bnR5VG9rZW5zKTsKICAgICAgICB0b2tlbi5maW5pc2hNaW50aW5nKCk7CiAgICB9CgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBCZWdpbiBvZiBleHRlcm5hbCBzYWxlcy4KCiAgICBmdW5jdGlvbiBzZXROb3RpZmllcihhZGRyZXNzIF9ub3RpZmllcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgTm90aWZpZXJDaGFuZ2VkKG5vdGlmaWVyLCBfbm90aWZpZXIpOwogICAgICAgIG5vdGlmaWVyID0gX25vdGlmaWVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGV4dGVybmFsU2FsZXMoCiAgICAgICAgdWludDhbXSBfY3VycmVuY2llcywKICAgICAgICBieXRlczMyW10gX3R4SWRTaGEzLAogICAgICAgIGFkZHJlc3NbXSBfYnV5ZXJzLAogICAgICAgIHVpbnQyNTZbXSBfYW1vdW50c1dlaSwKICAgICAgICB1aW50MjU2W10gX3Rva2Vuc0UxOAogICAgKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCBjYW5Ob3RpZnkgewoKICAgICAgICByZXF1aXJlKF9jdXJyZW5jaWVzLmxlbmd0aCA+IDApOwogICAgICAgIHJlcXVpcmUoX2N1cnJlbmNpZXMubGVuZ3RoID09IF90eElkU2hhMy5sZW5ndGgpOwogICAgICAgIHJlcXVpcmUoX2N1cnJlbmNpZXMubGVuZ3RoID09IF9idXllcnMubGVuZ3RoKTsKICAgICAgICByZXF1aXJlKF9jdXJyZW5jaWVzLmxlbmd0aCA9PSBfYW1vdW50c1dlaS5sZW5ndGgpOwogICAgICAgIHJlcXVpcmUoX2N1cnJlbmNpZXMubGVuZ3RoID09IF90b2tlbnNFMTgubGVuZ3RoKTsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX3R4SWRTaGEzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIF9leHRlcm5hbFNhbGVTaGEzKAogICAgICAgICAgICAgICAgQ3VycmVuY3koX2N1cnJlbmNpZXNbaV0pLAogICAgICAgICAgICAgICAgX3R4SWRTaGEzW2ldLAogICAgICAgICAgICAgICAgX2J1eWVyc1tpXSwKICAgICAgICAgICAgICAgIF9hbW91bnRzV2VpW2ldLAogICAgICAgICAgICAgICAgX3Rva2Vuc0UxOFtpXQogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBfZXh0ZXJuYWxTYWxlU2hhMygKICAgICAgICBDdXJyZW5jeSBfY3VycmVuY3ksCiAgICAgICAgYnl0ZXMzMiBfdHhJZFNoYTMsIC8vIFRvIGdldCBieXRlczMyIHVzZSBrZWNjYWsyNTYodHhJZCkgT1Igc2hhMyh0eElkKQogICAgICAgIGFkZHJlc3MgX2J1eWVyLAogICAgICAgIHVpbnQyNTYgX2Ftb3VudFdlaSwKICAgICAgICB1aW50MjU2IF90b2tlbnNFMTgKICAgICkgaW50ZXJuYWwgewoKICAgICAgICByZXF1aXJlKF9idXllciA+IDAgJiYgX2Ftb3VudFdlaSA+IDAgJiYgX3Rva2Vuc0UxOCA+IDApOwoKICAgICAgICB2YXIgdHhzQnlDdXIgPSBleHRlcm5hbFR4c1t1aW50OChfY3VycmVuY3kpXTsKCiAgICAgICAgLy8gSWYgdGhpcyBmb3JlaWduIHRyYW5zYWN0aW9uIGhhcyBiZWVuIGFscmVhZHkgcHJvY2Vzc2VkIGluIHRoaXMgY29udHJhY3QuCiAgICAgICAgcmVxdWlyZSh0eHNCeUN1cltfdHhJZFNoYTNdID09IDApOwogICAgICAgIHR4c0J5Q3VyW190eElkU2hhM10gPSBfdG9rZW5zRTE4OwoKICAgICAgICB1aW50IHN0YWdlSW5kZXggPSBjdXJyZW50U3RhZ2UoKTsKICAgICAgICBTdGFnZSBzdG9yYWdlIHN0YWdlID0gc3RhZ2VzW3N0YWdlSW5kZXhdOwoKICAgICAgICB0b2tlbi5taW50KHRoaXMsIF90b2tlbnNFMTgpOwogICAgICAgIHRva2VuLnRyYW5zZmVyKF9idXllciwgX3Rva2Vuc0UxOCk7CiAgICAgICAgdG90YWxUb2tlbnNNaW50ZWQgPSB0b3RhbFRva2Vuc01pbnRlZC5hZGQoX3Rva2Vuc0UxOCk7CiAgICAgICAgdG90YWxFeHRlcm5hbFNhbGVzKys7CgogICAgICAgIHRvdGFsSW52ZXN0ZWQgPSB0b3RhbEludmVzdGVkLmFkZChfYW1vdW50V2VpKTsKICAgICAgICBzdGFnZS5pbnZlc3RlZCA9IHN0YWdlLmludmVzdGVkLmFkZChfYW1vdW50V2VpKTsKICAgICAgICBpZiAoc3RhZ2UuaW52ZXN0ZWQgPj0gc3RhZ2UuaGFyZGNhcCkgewogICAgICAgICAgICBzdGFnZS5jbG9zZWQgPSBub3c7CiAgICAgICAgfQoKICAgICAgICBFeHRlcm5hbFNhbGUoX2N1cnJlbmN5LCBfdHhJZFNoYTMsIF9idXllciwgX2Ftb3VudFdlaSwgX3Rva2Vuc0UxOCk7CiAgICB9CgogICAgLy8gR2V0IGlkIG9mIGN1cnJlbmN5IGVudW0uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZnVuY3Rpb24gYnRjSWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDgpIHsKICAgICAgICByZXR1cm4gdWludDgoQ3VycmVuY3kuQlRDKTsKICAgIH0KCiAgICBmdW5jdGlvbiBsdGNJZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50OCkgewogICAgICAgIHJldHVybiB1aW50OChDdXJyZW5jeS5MVEMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHplY0lkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgcmV0dXJuIHVpbnQ4KEN1cnJlbmN5LlpFQyk7CiAgICB9CgogICAgZnVuY3Rpb24gZGFzaElkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgcmV0dXJuIHVpbnQ4KEN1cnJlbmN5LkRBU0gpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdhdmVzSWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDgpIHsKICAgICAgICByZXR1cm4gdWludDgoQ3VycmVuY3kuV0FWRVMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVzZElkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgcmV0dXJuIHVpbnQ4KEN1cnJlbmN5LlVTRCk7CiAgICB9CgogICAgZnVuY3Rpb24gZXVySWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDgpIHsKICAgICAgICByZXR1cm4gdWludDgoQ3VycmVuY3kuRVVSKTsKICAgIH0KCiAgICAvLyBHZXQgdG9rZW4gY291bnQgYnkgdHJhbnNhY3Rpb24gaWQuIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBmdW5jdGlvbiBfdG9rZW5zQnlUeChDdXJyZW5jeSBfY3VycmVuY3ksIHN0cmluZyBfdHhJZCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiB0b2tlbnNCeVR4KHVpbnQ4KF9jdXJyZW5jeSksIF90eElkKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b2tlbnNCeVR4KHVpbnQ4IF9jdXJyZW5jeSwgc3RyaW5nIF90eElkKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBleHRlcm5hbFR4c1tfY3VycmVuY3ldW2tlY2NhazI1NihfdHhJZCldOwogICAgfQoKICAgIGZ1bmN0aW9uIHRva2Vuc0J5QnRjVHgoc3RyaW5nIF90eElkKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBfdG9rZW5zQnlUeChDdXJyZW5jeS5CVEMsIF90eElkKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b2tlbnNCeUx0Y1R4KHN0cmluZyBfdHhJZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gX3Rva2Vuc0J5VHgoQ3VycmVuY3kuTFRDLCBfdHhJZCk7CiAgICB9CgogICAgZnVuY3Rpb24gdG9rZW5zQnlaZWNUeChzdHJpbmcgX3R4SWQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIF90b2tlbnNCeVR4KEN1cnJlbmN5LlpFQywgX3R4SWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRva2Vuc0J5RGFzaFR4KHN0cmluZyBfdHhJZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gX3Rva2Vuc0J5VHgoQ3VycmVuY3kuREFTSCwgX3R4SWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRva2Vuc0J5V2F2ZXNUeChzdHJpbmcgX3R4SWQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIF90b2tlbnNCeVR4KEN1cnJlbmN5LldBVkVTLCBfdHhJZCk7CiAgICB9CgogICAgZnVuY3Rpb24gdG9rZW5zQnlVc2RUeChzdHJpbmcgX3R4SWQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIF90b2tlbnNCeVR4KEN1cnJlbmN5LlVTRCwgX3R4SWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRva2Vuc0J5RXVyVHgoc3RyaW5nIF90eElkKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBfdG9rZW5zQnlUeChDdXJyZW5jeS5FVVIsIF90eElkKTsKICAgIH0KCiAgICAvLyBFbmQgb2YgZXh0ZXJuYWwgc2FsZXMuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KfQoKY29udHJhY3QgQ29uZmlndXJhdG9yIGlzIE93bmFibGUgewoKICAgIENvdmVzdGluZ1Rva2VuIHB1YmxpYyB0b2tlbjsKCiAgICBNYWluc2FsZSBwdWJsaWMgbWFpbnNhbGU7CgogICAgZnVuY3Rpb24gZGVwbG95KCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgbWFpbnNhbGUgPSBuZXcgTWFpbnNhbGUoKTsKICAgICAgICB0b2tlbiA9IENvdmVzdGluZ1Rva2VuKDB4RTJGQjY1MjlFRjU2NmEwODBlNmQyM2RFMGJkMzUxMzExMDg3RDU2Nyk7CiAgICAgICAgbWFpbnNhbGUuc2V0VG9rZW4odG9rZW4pOwogICAgICAgIG1haW5zYWxlLmFkZFN0YWdlKDUwMDAsMjAwKTsKICAgICAgICBtYWluc2FsZS5hZGRTdGFnZSg1MDAwLDE4MCk7CiAgICAgICAgbWFpbnNhbGUuYWRkU3RhZ2UoMTAwMDAsMTcwKTsKICAgICAgICBtYWluc2FsZS5hZGRTdGFnZSgyMDAwMCwxNjApOwogICAgICAgIG1haW5zYWxlLmFkZFN0YWdlKDIwMDAwLDE1MCk7CiAgICAgICAgbWFpbnNhbGUuYWRkU3RhZ2UoNDAwMDAsMTMwKTsKICAgICAgICBtYWluc2FsZS5zZXRNdWx0aXNpZ1dhbGxldCgweDE1QTA3MUI4MzM5NjU3N2NDYmQ4NkE5NzlBZjdkMmFCYTllMTg5NzApOwogICAgICAgIG1haW5zYWxlLnNldEZvdW5kZXJzVG9rZW5zV2FsbGV0KDB4MjVFRDRmMEQyNjBENWU1MjE4RDk1MzkwMDM2YmM4ODE1RmYzODI2Mik7CiAgICAgICAgbWFpbnNhbGUuc2V0Qm91bnR5VG9rZW5zV2FsbGV0KDB4NzE3YmZEMzBmMDM5NDI0QjA0OUQ5MThGOTM1REVkRDA2OUI2NjgxMCk7CiAgICAgICAgbWFpbnNhbGUuc2V0U3RhcnQoMTUxMTIyMjQwMCk7CiAgICAgICAgbWFpbnNhbGUuc2V0UGVyaW9kKDMwKTsKICAgICAgICBtYWluc2FsZS5zZXRMb2NrUGVyaW9kKDkwKTsKICAgICAgICBtYWluc2FsZS5zZXRNaW5QcmljZSgxMDAwMDAwMDAwMDAwMDAwMDApOwogICAgICAgIG1haW5zYWxlLnNldEZvdW5kZXJzVG9rZW5zUGVyY2VudCgxMyk7CiAgICAgICAgbWFpbnNhbGUuc2V0Qm91bnR5VG9rZW5zUGVyY2VudCg1KTsKICAgICAgICBtYWluc2FsZS5zZXROb3RpZmllcihvd25lcik7CiAgICAgICAgbWFpbnNhbGUudHJhbnNmZXJPd25lcnNoaXAob3duZXIpOwogICAgfQoKfQ=='.
	

]
