Class {
	#name : #SRT3d3ce5c8baeeb7e6ded63afcb443272a9703527a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3d3ce5c8baeeb7e6ded63afcb443272a9703527a >> base64 [
	^ 'Y29udHJhY3QgRVJDMjBCYXNpYyB7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgoKbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCn0KCgoKY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KCn0KCgoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAgICoKICAgICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIC8qKgogICAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgICAqLwogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgICAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgICAgICB9CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCn0KCgpjb250cmFjdCBNaW50YWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogICAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKICAgIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICAgIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKCiAgICBtb2RpZmllciBjYW5NaW50KCkgewogICAgICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIG1pbnRlZCB0b2tlbnMuCiAgICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqLwogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgY2FuTWludCBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgICAgICBNaW50KF90bywgX2Ftb3VudCk7CiAgICAgICAgVHJhbnNmZXIoYWRkcmVzcygwKSwgX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gc3RvcCBtaW50aW5nIG5ldyB0b2tlbnMuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqLwogICAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIG9ubHlPd25lciBjYW5NaW50IHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICBNaW50RmluaXNoZWQoKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKCgpjb250cmFjdCBCdXJuYWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4gewoKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CgogICAgLyoqCiAgICAgKiBAZGV2IEJ1cm5zIGEgc3BlY2lmaWMgYW1vdW50IG9mIHRva2Vucy4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSBidXJuZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CiAgICAgICAgLy8gbm8gbmVlZCB0byByZXF1aXJlIHZhbHVlIDw9IHRvdGFsU3VwcGx5LCBzaW5jZSB0aGF0IHdvdWxkIGltcGx5IHRoZQogICAgICAgIC8vIHNlbmRlcidzIGJhbGFuY2UgaXMgZ3JlYXRlciB0aGFuIHRoZSB0b3RhbFN1cHBseSwgd2hpY2ggKnNob3VsZCogYmUgYW4gYXNzZXJ0aW9uIGZhaWx1cmUKCiAgICAgICAgYWRkcmVzcyBidXJuZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGJhbGFuY2VzW2J1cm5lcl0gPSBiYWxhbmNlc1tidXJuZXJdLnN1YihfdmFsdWUpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICAgICAgQnVybihidXJuZXIsIF92YWx1ZSk7CiAgICB9Cn0KCgoKY29udHJhY3QgSGlyZUdvVG9rZW4gaXMgTWludGFibGVUb2tlbiwgQnVybmFibGVUb2tlbiB7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkhpcmVHbyI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJIR08iOwogICAgdWludDMyIHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIGZ1bmN0aW9uIEhpcmVHb1Rva2VuKCkgcHVibGljIHsKICAgICAgICB0b3RhbFN1cHBseSA9IDEwMDAwMDAwMEUxODsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSB0b3RhbFN1cHBseTsgLy8gQWRkIGFsbCB0b2tlbnMgdG8gaXNzdWVyIGJhbGFuY2UgKGNyb3dkc2FsZSBpbiB0aGlzIGNhc2UpCiAgICB9Cgp9CgoKCmNvbnRyYWN0IEhpcmVHb0Nyb3dkc2FsZSBpcyBPd25hYmxlIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICBIaXJlR29Ub2tlbiBwdWJsaWMgdG9rZW4gPSBuZXcgSGlyZUdvVG9rZW4oKTsKICAgIHVpbnQgdG90YWxTdXBwbHkgPSB0b2tlbi50b3RhbFN1cHBseSgpOwoKICAgIGJvb2wgcHVibGljIGlzUmVmdW5kQWxsb3dlZDsKICAgIGJvb2wgcHVibGljIG5ld0JvbnVzX2FuZF9uZXdQZXJpb2Q7CiAgICBib29sIHB1YmxpYyBuZXdfYm9udXNfZm9yX25leHRfcGVyaW9kOwoKICAgIHVpbnQgcHVibGljIGljb1N0YXJ0VGltZTsKICAgIHVpbnQgcHVibGljIGljb0VuZFRpbWU7CiAgICB1aW50IHB1YmxpYyB0b3RhbFdlaVJhaXNlZDsKICAgIHVpbnQgcHVibGljIHdlaVJhaXNlZDsKICAgIHVpbnQgcHVibGljIGhhcmRDYXA7IC8vIGFtb3VudCBvZiBFVEggY29sbGVjdGVkLCB3aGljaCBtYXJrcyBlbmQgb2YgY3Jvd2Qgc2FsZQogICAgdWludCBwdWJsaWMgdG9rZW5zRGlzdHJpYnV0ZWQ7IC8vIGFtb3VudCBvZiBib3VnaHQgdG9rZW5zCiAgICB1aW50IHB1YmxpYyBib251c19mb3JfYWRkX3N0YWdlOwoKICAgIC8qICAgICAgICAgQm9udXMgdmFyaWFibGVzICAgICAgICAgICovCiAgICB1aW50IGludGVybmFsIGJhc2VCb251czEgPSAxNjA7CiAgICB1aW50IGludGVybmFsIGJhc2VCb251czIgPSAxNDA7CiAgICB1aW50IGludGVybmFsIGJhc2VCb251czMgPSAxMzA7CiAgICB1aW50IGludGVybmFsIGJhc2VCb251czQgPSAxMjA7CiAgICB1aW50IGludGVybmFsIGJhc2VCb251czUgPSAxMTA7CgkgIHVpbnQgaW50ZXJuYWwgYmFzZUJvbnVzNiA9IDEwMDsKICAgIHVpbnQgcHVibGljIG1hbnVhbEJvbnVzOwogICAgLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovCgogICAgdWludCBwdWJsaWMgcmF0ZTsgLy8gaG93IG1hbnkgdG9rZW4gdW5pdHMgYSBidXllciBnZXRzIHBlciB3ZWkKICAgIHVpbnQgcHJpdmF0ZSBpY29NaW5QdXJjaGFzZTsgLy8gSW4gRVRICiAgICB1aW50IHByaXZhdGUgaWNvRW5kRGF0ZUluY0NvdW50OwoKICAgIGFkZHJlc3NbXSBwdWJsaWMgaW52ZXN0b3JzX251bWJlcjsKICAgIGFkZHJlc3MgcHJpdmF0ZSB3YWxsZXQ7IC8vIGFkZHJlc3Mgd2hlcmUgZnVuZHMgYXJlIGNvbGxlY3RlZAoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIG9yZGVyZWRUb2tlbnM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGNvbnRyaWJ1dG9yczsKCiAgICBldmVudCBGdW5kc1dpdGhkcmF3bihhZGRyZXNzIF93aG8sIHVpbnQyNTYgX2Ftb3VudCk7CgogICAgbW9kaWZpZXIgaGFyZENhcE5vdFJlYWNoZWQoKSB7CiAgICAgICAgcmVxdWlyZSh0b3RhbFdlaVJhaXNlZCA8IGhhcmRDYXApOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgY3Jvd2RzYWxlRW5kZWQoKSB7CiAgICAgICAgcmVxdWlyZShub3cgPiBpY29FbmRUaW1lKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGNyb3dkc2FsZUluUHJvZ3Jlc3MoKSB7CiAgICAgICAgYm9vbCB3aXRoaW5QZXJpb2QgPSAobm93ID49IGljb1N0YXJ0VGltZSAmJiBub3cgPD0gaWNvRW5kVGltZSk7CiAgICAgICAgcmVxdWlyZSh3aXRoaW5QZXJpb2QpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gSGlyZUdvQ3Jvd2RzYWxlKHVpbnQgX2ljb1N0YXJ0VGltZSwgdWludCBfaWNvRW5kVGltZSwgYWRkcmVzcyBfd2FsbGV0KSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKAogICAgICAgICAgX2ljb1N0YXJ0VGltZSA+IG5vdyAmJgogICAgICAgICAgX2ljb0VuZFRpbWUgPiBfaWNvU3RhcnRUaW1lCiAgICAgICAgKTsKCiAgICAgICAgaWNvU3RhcnRUaW1lID0gX2ljb1N0YXJ0VGltZTsKICAgICAgICBpY29FbmRUaW1lID0gX2ljb0VuZFRpbWU7CiAgICAgICAgd2FsbGV0ID0gX3dhbGxldDsKCiAgICAgICAgcmF0ZSA9IDI1MCBzemFibzsgLy8gd2VpIHBlciAxIHRva2VuICgwLjAwMDI1RVRIKQoKICAgICAgICBoYXJkQ2FwID0gMTE1NzUgZXRoZXI7CiAgICAgICAgaWNvRW5kRGF0ZUluY0NvdW50ID0gMDsKICAgICAgICBpY29NaW5QdXJjaGFzZSA9IDUwIGZpbm5leTsgLy8gMC4wNSBFVEgKICAgICAgICBpc1JlZnVuZEFsbG93ZWQgPSBmYWxzZTsKICAgIH0KCiAgICAvLyBmYWxsYmFjayBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBidXkgdG9rZW5zCiAgICBmdW5jdGlvbigpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBidXlUb2tlbnMoKTsKICAgIH0KCiAgICAvLyBsb3cgbGV2ZWwgdG9rZW4gcHVyY2hhc2UgZnVuY3Rpb24KICAgIGZ1bmN0aW9uIGJ1eVRva2VucygpIHB1YmxpYyBwYXlhYmxlIGNyb3dkc2FsZUluUHJvZ3Jlc3MgaGFyZENhcE5vdFJlYWNoZWQgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CgogICAgICAgIC8vIGNoZWNrIGlmIHRoZSBidXllciBleGNlZWRlZCB0aGUgZnVuZGluZyBnb2FsCiAgICAgICAgY2FsY3VsYXRlUHVyY2hhc2VBbmRCb251c2VzKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9CgogICAgLy8gUmV0dXJucyBudW1iZXIgb2YgaW52ZXN0b3JzCiAgICBmdW5jdGlvbiBnZXRJbnZlc3RvckNvdW50KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBpbnZlc3RvcnNfbnVtYmVyLmxlbmd0aDsKICAgIH0KCiAgICAvLyBPd25lciBjYW4gYWxsb3cgb3IgZGlzYWxsb3cgcmVmdW5kcyBldmVuIGlmIHNvZnQgY2FwIGlzIHJlYWNoZWQuIFNob3VsZCBiZSB1c2VkIGluIGNhc2UgS1lDIGlzIG5vdCBwYXNzZWQuCiAgICAvLyBXQVJOSU5HOiBvd25lciBzaG91bGQgdHJhbnNmZXIgY29sbGVjdGVkIEVUSCBiYWNrIHRvIGNvbnRyYWN0IGJlZm9yZSBhbGxvd2luZyB0byByZWZ1bmQsIGlmIGhlIGFscmVhZHkgd2l0aGRyYXduIEVUSC4KICAgIGZ1bmN0aW9uIHRvZ2dsZVJlZnVuZHMoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpc1JlZnVuZEFsbG93ZWQgPSB0cnVlOwogICAgfQoKICAgIC8vIE1vdmVzIElDTyBlbmRpbmcgZGF0ZSBieSBvbmUgbW9udGguIEVuZCBkYXRlIGNhbiBiZSBtb3ZlZCBvbmx5IDEgdGltZXMuCiAgICAvLyBSZXR1cm5zIHRydWUgaWYgSUNPIGVuZCBkYXRlIHdhcyBzdWNjZXNzZnVsbHkgc2hpZnRlZAogICAgZnVuY3Rpb24gbW92ZUljb0VuZERhdGVCeU9uZU1vbnRoKHVpbnQgYm9udXNfcGVyY2VudGFnZSkgcHVibGljIG9ubHlPd25lciBjcm93ZHNhbGVJblByb2dyZXNzIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoaWNvRW5kRGF0ZUluY0NvdW50IDwgMSkgewogICAgICAgICAgICBpY29FbmRUaW1lID0gaWNvRW5kVGltZS5hZGQoMzAgZGF5cyk7CiAgICAgICAgICAgIGljb0VuZERhdGVJbmNDb3VudCsrOwogICAgICAgICAgICBuZXdCb251c19hbmRfbmV3UGVyaW9kID0gdHJ1ZTsKICAgICAgICAgICAgYm9udXNfZm9yX2FkZF9zdGFnZSA9IGJvbnVzX3BlcmNlbnRhZ2U7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBPd25lciBjYW4gc2VuZCBiYWNrIGNvbGxlY3RlZCBFVEggaWYgc29mdCBjYXAgaXMgbm90IHJlYWNoZWQgb3IgS1lDIGlzIG5vdCBwYXNzZWQKICAgIC8vIFdBUk5JTkc6IGNyb3dkc2FsZSBjb250cmFjdCBzaG91bGQgaGF2ZSBhbGwgcmVjZWl2ZWQgZnVuZHMgdG8gcmV0dXJuIHRoZW0uCiAgICAvLyBJZiB5b3UgaGF2ZSBhbHJlYWR5IHdpdGhkcmF3biB0aGVtLCBzZW5kIHRoZW0gYmFjayB0byBjcm93ZHNhbGUgY29udHJhY3QKICAgIGZ1bmN0aW9uIHJlZnVuZEludmVzdG9ycygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobm93ID49IGljb0VuZFRpbWUpOwogICAgICAgIHJlcXVpcmUoaXNSZWZ1bmRBbGxvd2VkKTsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIuYmFsYW5jZSA+IDApOwoKICAgICAgICBhZGRyZXNzIGludmVzdG9yOwogICAgICAgIHVpbnQgY29udHJpYnV0ZWRXZWk7CiAgICAgICAgdWludCB0b2tlbnM7CiAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGkgPCBpbnZlc3RvcnNfbnVtYmVyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGludmVzdG9yID0gaW52ZXN0b3JzX251bWJlcltpXTsKICAgICAgICAgICAgY29udHJpYnV0ZWRXZWkgPSBjb250cmlidXRvcnNbaW52ZXN0b3JdOwogICAgICAgICAgICB0b2tlbnMgPSBvcmRlcmVkVG9rZW5zW2ludmVzdG9yXTsKICAgICAgICAgICAgaWYoY29udHJpYnV0ZWRXZWkgPiAwKSB7CiAgICAgICAgICAgICAgICB0b3RhbFdlaVJhaXNlZCA9IHRvdGFsV2VpUmFpc2VkLnN1Yihjb250cmlidXRlZFdlaSk7CiAgICAgICAgICAgICAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuc3ViKGNvbnRyaWJ1dGVkV2VpKTsKICAgICAgICAgICAgICAgIGlmKHdlaVJhaXNlZDwwKXsKICAgICAgICAgICAgICAgICAgd2VpUmFpc2VkID0gMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnRyaWJ1dG9yc1tpbnZlc3Rvcl0gPSAwOwogICAgICAgICAgICAgICAgb3JkZXJlZFRva2Vuc1tpbnZlc3Rvcl0gPSAwOwogICAgICAgICAgICAgICAgdG9rZW5zRGlzdHJpYnV0ZWQgPSB0b2tlbnNEaXN0cmlidXRlZC5zdWIodG9rZW5zKTsKICAgICAgICAgICAgICAgIGludmVzdG9yLnRyYW5zZmVyKGNvbnRyaWJ1dGVkV2VpKTsgLy8gcmV0dXJuIGZ1bmRzIGJhY2sgdG8gY29udHJpYnV0b3IKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvLyBPd25lciBvZiBjb250cmFjdCBjYW4gd2l0aGRyYXcgY29sbGVjdGVkIEVUSCwgaWYgc29mdCBjYXAgaXMgcmVhY2hlZCwgYnkgY2FsbGluZyB0aGlzIGZ1bmN0aW9uCiAgICBmdW5jdGlvbiB3aXRoZHJhdygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHVpbnQgdG9fc2VuZCA9IHdlaVJhaXNlZDsKICAgICAgICB3ZWlSYWlzZWQgPSAwOwogICAgICAgIEZ1bmRzV2l0aGRyYXduKG1zZy5zZW5kZXIsIHRvX3NlbmQpOwogICAgICAgIHdhbGxldC50cmFuc2Zlcih0b19zZW5kKTsKICAgIH0KCiAgICAvLyBUaGlzIGZ1bmN0aW9uIHNob3VsZCBiZSB1c2VkIHRvIG1hbnVhbGx5IHJlc2VydmUgc29tZSB0b2tlbnMgZm9yICJiaWcgc2hhcmtzIiBvciBidWctYm91bnR5IHByb2dyYW0gcGFydGljaXBhbnRzCiAgICBmdW5jdGlvbiBtYW51YWxSZXNlcnZlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50IF9hbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgY3Jvd2RzYWxlSW5Qcm9ncmVzcyB7CiAgICAgICAgcmVxdWlyZShfYmVuZWZpY2lhcnkgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfYW1vdW50ID4gMCk7CiAgICAgICAgY2hlY2tBbmRNaW50KF9hbW91bnQpOwogICAgICAgIHRva2Vuc0Rpc3RyaWJ1dGVkID0gdG9rZW5zRGlzdHJpYnV0ZWQuYWRkKF9hbW91bnQpOwogICAgICAgIHRva2VuLnRyYW5zZmVyKF9iZW5lZmljaWFyeSwgX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnVyblVuc29sZCgpIHB1YmxpYyBvbmx5T3duZXIgY3Jvd2RzYWxlRW5kZWQgewogICAgICAgIHVpbnQgdG9rZW5zTGVmdCA9IHRvdGFsU3VwcGx5LnN1Yih0b2tlbnNEaXN0cmlidXRlZCk7CiAgICAgICAgdG9rZW4uYnVybih0b2tlbnNMZWZ0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5pc2hJY28oKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpY29FbmRUaW1lID0gbm93OwogICAgfQoKICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGVfZm9yX2ZvdW5kZXJzKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgdWludCB0b19zZW5kID0gNDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7IC8vNDBtCiAgICAgICAgY2hlY2tBbmRNaW50KHRvX3NlbmQpOwogICAgICAgIHRva2VuLnRyYW5zZmVyKHdhbGxldCwgdG9fc2VuZCk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXBUb2tlbihhZGRyZXNzIF90bykgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgdG9rZW4udHJhbnNmZXJPd25lcnNoaXAoX3RvKTsKICAgIH0KCiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICAqKiAgSW50ZXJuYWwgZnVuY3Rpb25zICAgICoqCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogICAgLy8gQ2FsY3VsYXRlcyBwdXJjaGFzZSBjb25kaXRpb25zIGFuZCB0b2tlbiBib251c2VzCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVQdXJjaGFzZUFuZEJvbnVzZXMoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQgX3dlaUFtb3VudCkgaW50ZXJuYWwgewogICAgICAgIGlmIChub3cgPj0gaWNvU3RhcnRUaW1lICYmIG5vdyA8IGljb0VuZFRpbWUpIHJlcXVpcmUoX3dlaUFtb3VudCA+PSBpY29NaW5QdXJjaGFzZSk7CgogICAgICAgIHVpbnQgY2xlYW5XZWk7IC8vIGFtb3VudCBvZiB3ZWkgdG8gdXNlIGZvciBwdXJjaGFzZSBleGNsdWRpbmcgY2hhbmdlIGFuZCBoYXJkY2FwIG92ZXJmbG93cwogICAgICAgIHVpbnQgY2hhbmdlOwogICAgICAgIHVpbnQgX3Rva2VuczsKCiAgICAgICAgLy9jaGVjayBmb3IgaGFyZGNhcCBvdmVyZmxvdwogICAgICAgIGlmIChfd2VpQW1vdW50LmFkZCh0b3RhbFdlaVJhaXNlZCkgPiBoYXJkQ2FwKSB7CiAgICAgICAgICAgIGNsZWFuV2VpID0gaGFyZENhcC5zdWIodG90YWxXZWlSYWlzZWQpOwogICAgICAgICAgICBjaGFuZ2UgPSBfd2VpQW1vdW50LnN1YihjbGVhbldlaSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgY2xlYW5XZWkgPSBfd2VpQW1vdW50OwoKICAgICAgICBhc3NlcnQoY2xlYW5XZWkgPiA0KTsgLy8gNCB3ZWkgaXMgYSBwcmljZSBvZiBtaW5pbWFsIGZyYWN0dXJlIG9mIHRva2VuCgogICAgICAgIF90b2tlbnMgPSBjbGVhbldlaS5kaXYocmF0ZSkubXVsKDEgZXRoZXIpOwoKICAgICAgICBpZiAoY29udHJpYnV0b3JzW19iZW5lZmljaWFyeV0gPT0gMCkgaW52ZXN0b3JzX251bWJlci5wdXNoKF9iZW5lZmljaWFyeSk7CgogICAgICAgIF90b2tlbnMgPSBjYWxjdWxhdGVCb251cyhfdG9rZW5zKTsKICAgICAgICBjaGVja0FuZE1pbnQoX3Rva2Vucyk7CgogICAgICAgIGNvbnRyaWJ1dG9yc1tfYmVuZWZpY2lhcnldID0gY29udHJpYnV0b3JzW19iZW5lZmljaWFyeV0uYWRkKGNsZWFuV2VpKTsKICAgICAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKGNsZWFuV2VpKTsKICAgICAgICB0b3RhbFdlaVJhaXNlZCA9IHRvdGFsV2VpUmFpc2VkLmFkZChjbGVhbldlaSk7CiAgICAgICAgdG9rZW5zRGlzdHJpYnV0ZWQgPSB0b2tlbnNEaXN0cmlidXRlZC5hZGQoX3Rva2Vucyk7CiAgICAgICAgb3JkZXJlZFRva2Vuc1tfYmVuZWZpY2lhcnldID0gb3JkZXJlZFRva2Vuc1tfYmVuZWZpY2lhcnldLmFkZChfdG9rZW5zKTsKCiAgICAgICAgaWYgKGNoYW5nZSA+IDApIF9iZW5lZmljaWFyeS50cmFuc2ZlcihjaGFuZ2UpOwoKICAgICAgICB0b2tlbi50cmFuc2ZlcihfYmVuZWZpY2lhcnksX3Rva2Vucyk7CiAgICB9CgogICAgLy8gQ2FsY3VsYXRlcyBib251c2VzIGJhc2VkIG9uIGN1cnJlbnQgc3RhZ2UKICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUJvbnVzKHVpbnQgX2Jhc2VBbW91bnQpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXF1aXJlKF9iYXNlQW1vdW50ID4gMCk7CgogICAgICAgIGlmIChub3cgPj0gaWNvU3RhcnRUaW1lICYmIG5vdyA8IGljb0VuZFRpbWUpIHsKICAgICAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZUJvbnVzSWNvKF9iYXNlQW1vdW50KTsKICAgICAgICB9CiAgICAgICAgZWxzZSByZXR1cm4gX2Jhc2VBbW91bnQ7CiAgICB9CgogICAgLy8gQ2FsY3VsYXRlcyBib251c2VzLCBzcGVjaWZpYyBmb3IgdGhlIElDTwogICAgLy8gQ29udGFpbnMgZGF0ZSBhbmQgdm9sdW1lIGJhc2VkIGJvbnVzZXMKICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUJvbnVzSWNvKHVpbnQgX2Jhc2VBbW91bnQpIGludGVybmFsIHJldHVybnModWludCkgewogICAgICAgIGlmKG5vdyA+PSBpY29TdGFydFRpbWUgJiYgbm93IDwgMTUyMDcyNjM5OSkgey8vMzo1NS00CiAgICAgICAgICAgIC8vIDQtMTAgTWFyIC0gNjAlIGJvbnVzCiAgICAgICAgICAgIHJldHVybiBfYmFzZUFtb3VudC5tdWwoYmFzZUJvbnVzMSkuZGl2KDEwMCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYobm93ID49IDE1MjA3MjY0MDAgJiYgbm93IDwgMTUyMTMzMTE5OSkgewogICAgICAgICAgICAvLyAxMS0xNyBNYXIgLSA0MCUgYm9udXMKICAgICAgICAgICAgcmV0dXJuIF9iYXNlQW1vdW50Lm11bChiYXNlQm9udXMyKS5kaXYoMTAwKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZihub3cgPj0gMTUyMTMzMTIwMCAmJiBub3cgPCAxNTIxOTM1OTk5KSB7CiAgICAgICAgICAgIC8vIDE4LTI0IE1hciAtIDMwJSBib251cwogICAgICAgICAgICByZXR1cm4gX2Jhc2VBbW91bnQubXVsKGJhc2VCb251czMpLmRpdigxMDApOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmKG5vdyA+PSAxNTIxOTM2MDAwICYmIG5vdyA8IDE1MjQ5NTk5OTkpIHsKICAgICAgICAgICAgLy8gMjUgTWFyLTI4IEFwciAtIDIwJSBib251cwogICAgICAgICAgICByZXR1cm4gX2Jhc2VBbW91bnQubXVsKGJhc2VCb251czQpLmRpdigxMDApOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmKG5vdyA+PSAxNTI0OTYwMDAwICYmIG5vdyA8IDE1MjYxNjk1OTkpIHsKICAgICAgICAgICAgLy8yOSBBcHIgLSAxMiBNYXkgLSAxMCUgYm9udXMKICAgICAgICAgICAgcmV0dXJuIF9iYXNlQW1vdW50Lm11bChiYXNlQm9udXM1KS5kaXYoMTAwKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIC8vMTMgTWF5IC0gMjYgTWF5IC0gbm8gYm9udXMKICAgICAgICAgICAgcmV0dXJuIF9iYXNlQW1vdW50OwogICAgICAgIH0KICAgIH0KCiAgICAvLyBDaGVja3MgaWYgbW9yZSB0b2tlbnMgc2hvdWxkIGJlIG1pbnRlZCBiYXNlZCBvbiBhbW91bnQgb2Ygc29sZCB0b2tlbnMsIHJlcXVpcmVkIGFkZGl0aW9uYWwgdG9rZW5zIGFuZCB0b3RhbCBzdXBwbHkuCiAgICAvLyBJZiB0aGVyZSBhcmUgbm90IGVub3VnaCB0b2tlbnMsIG1pbnQgbWlzc2luZyB0b2tlbnMKICAgIGZ1bmN0aW9uIGNoZWNrQW5kTWludCh1aW50IF9hbW91bnQpIGludGVybmFsIHsKICAgICAgICB1aW50IHJlcXVpcmVkID0gdG9rZW5zRGlzdHJpYnV0ZWQuYWRkKF9hbW91bnQpOwogICAgICAgIGlmKHJlcXVpcmVkID4gdG90YWxTdXBwbHkpIHRva2VuLm1pbnQodGhpcywgcmVxdWlyZWQuc3ViKHRvdGFsU3VwcGx5KSk7CiAgICB9Cn0='.
	

]
