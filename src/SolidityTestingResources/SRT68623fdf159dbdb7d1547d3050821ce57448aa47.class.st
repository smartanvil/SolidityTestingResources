Class {
	#name : #SRT68623fdf159dbdb7d1547d3050821ce57448aa47,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT68623fdf159dbdb7d1547d3050821ce57448aa47 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KICB9Cgp9Cgpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgcGF1c2VkCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9Cgpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCmNvbnRyYWN0IENBVENvbnRyYWN0IGlzIE93bmFibGUsIFBhdXNhYmxlIHsKCUNBVFNlcnZpY2VQYXltZW50Q29sbGVjdG9yIHB1YmxpYyBjYXRQYXltZW50Q29sbGVjdG9yOwoJdWludCBwdWJsaWMgY29udHJhY3RGZWUgPSAwLjEgKiAxMCoqMTg7IC8vIEJhc2UgZmVlIGlzIDAuMSBDQVQKCS8vIExpbWl0cyBhbGwgdHJhbnNhY3Rpb25zIHRvIGEgc21hbGwgYW1vdW50IHRvIGF2b2lkIGZpbmFuY2lhbCByaXNrIHdpdGggZWFybHkgY29kZQoJdWludCBwdWJsaWMgZXRoUGVyVHJhbnNhY3Rpb25MaW1pdCA9IDAuMSBldGhlcjsKCXN0cmluZyBwdWJsaWMgY29udHJhY3ROYW1lOwoJc3RyaW5nIHB1YmxpYyB2ZXJzaW9uSWRlbnQgPSAiMC4xLjAiOwoKCWV2ZW50IENvbnRyYWN0RGVwbG95ZWQoYWRkcmVzcyBpbmRleGVkIGJ5V2hvKTsKCWV2ZW50IENvbnRyYWN0RmVlQ2hhbmdlZCh1aW50IG9sZEZlZSwgdWludCBuZXdGZWUpOwoJZXZlbnQgQ29udHJhY3RFdGhMaW1pdENoYW5nZWQodWludCBvbGRMaW1pdCwgdWludCBuZXdMaW1pdCk7CgoJZXZlbnQgQ0FUV2l0aGRyYXduKHVpbnQgbnVtT2ZUb2tlbnMpOwoKCW1vZGlmaWVyIGJsb2NrQ2F0RW50cnlQb2ludCgpIHsKCQkvLyBDb2xsZWN0IHBheW1lbnQKCQljYXRQYXltZW50Q29sbGVjdG9yLmNvbGxlY3RQYXltZW50KG1zZy5zZW5kZXIsIGNvbnRyYWN0RmVlKTsKCQlDb250cmFjdERlcGxveWVkKG1zZy5zZW5kZXIpOwoJCV87Cgl9CgoJbW9kaWZpZXIgbGltaXRUcmFuc2FjdGlvblZhbHVlKCkgewoJCXJlcXVpcmUobXNnLnZhbHVlIDw9IGV0aFBlclRyYW5zYWN0aW9uTGltaXQpOwoJCV87Cgl9CgoJZnVuY3Rpb24gQ0FUQ29udHJhY3QoYWRkcmVzcyBfY2F0UGF5bWVudENvbGxlY3Rvciwgc3RyaW5nIF9jb250cmFjdE5hbWUpIHsKCQljYXRQYXltZW50Q29sbGVjdG9yID0gQ0FUU2VydmljZVBheW1lbnRDb2xsZWN0b3IoX2NhdFBheW1lbnRDb2xsZWN0b3IpOwoJCWNvbnRyYWN0TmFtZSA9IF9jb250cmFjdE5hbWU7Cgl9CgoJLy8gQWRtaW5pc3RyYXRpdmUgZnVuY3Rpb25zCgoJZnVuY3Rpb24gY2hhbmdlQ29udHJhY3RGZWUodWludCBfbmV3RmVlKSBleHRlcm5hbCBvbmx5T3duZXIgewoJCS8vIF9uZXdGZWUgaXMgYXNzdW1lZCB0byBiZSBnaXZlbiBpbiBmdWxsIENBVCBwcmVjaXNpb24gKDE4IGRlY2ltYWxzKQoJCUNvbnRyYWN0RmVlQ2hhbmdlZChjb250cmFjdEZlZSwgX25ld0ZlZSk7CgkJY29udHJhY3RGZWUgPSBfbmV3RmVlOwoJfQoKCWZ1bmN0aW9uIGNoYW5nZUV0aGVyVHhMaW1pdCh1aW50IF9uZXdMaW1pdCkgZXh0ZXJuYWwgb25seU93bmVyIHsKCQlDb250cmFjdEV0aExpbWl0Q2hhbmdlZChldGhQZXJUcmFuc2FjdGlvbkxpbWl0LCBfbmV3TGltaXQpOwoJCWV0aFBlclRyYW5zYWN0aW9uTGltaXQgPSBfbmV3TGltaXQ7Cgl9CgoJZnVuY3Rpb24gd2l0aGRyYXdDQVQoKSBleHRlcm5hbCBvbmx5T3duZXIgewoJCVN0YW5kYXJkVG9rZW4gQ0FUID0gY2F0UGF5bWVudENvbGxlY3Rvci5DQVQoKTsKCQl1aW50IG91clRva2VucyA9IENBVC5iYWxhbmNlT2YodGhpcyk7CgkJQ0FULnRyYW5zZmVyKG93bmVyLCBvdXJUb2tlbnMpOwoJCUNBVFdpdGhkcmF3bihvdXJUb2tlbnMpOwoJfQp9Cgpjb250cmFjdCBDQVRTZXJ2aWNlUGF5bWVudENvbGxlY3RvciBpcyBPd25hYmxlIHsKCVN0YW5kYXJkVG9rZW4gcHVibGljIENBVDsKCWFkZHJlc3MgcHVibGljIHBheW1lbnREZXN0aW5hdGlvbjsKCXVpbnQgcHVibGljIHRvdGFsRGVwbG95bWVudHMgPSAwOwoJbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyByZWdpc3RlcmVkU2VydmljZXM7CgltYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIHNlcnZpY2VEZXBsb3lDb3VudDsKCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgdXNlckRlcGxveUNvdW50OwoKCWV2ZW50IENBVFBheW1lbnQoYWRkcmVzcyBpbmRleGVkIHNlcnZpY2UsIGFkZHJlc3MgaW5kZXhlZCBwYXllciwgdWludCBwcmljZSk7CglldmVudCBFbmFibGVTZXJ2aWNlKGFkZHJlc3MgaW5kZXhlZCBzZXJ2aWNlKTsKCWV2ZW50IERpc2FibGVTZXJ2aWNlKGFkZHJlc3MgaW5kZXhlZCBzZXJ2aWNlKTsKCWV2ZW50IENoYW5nZWRQYXltZW50RGVzdGluYXRpb24oYWRkcmVzcyBpbmRleGVkIG9sZERlc3RpbmF0aW9uLCBhZGRyZXNzIGluZGV4ZWQgbmV3RGVzdGluYXRpb24pOwoKCWV2ZW50IENBVFdpdGhkcmF3bih1aW50IG51bU9mVG9rZW5zKTsKCQoJZnVuY3Rpb24gQ0FUU2VydmljZVBheW1lbnRDb2xsZWN0b3IoYWRkcmVzcyBfQ0FUKSB7CgkJQ0FUID0gU3RhbmRhcmRUb2tlbihfQ0FUKTsKCQlwYXltZW50RGVzdGluYXRpb24gPSBtc2cuc2VuZGVyOwoJfQoJCglmdW5jdGlvbiBlbmFibGVTZXJ2aWNlKGFkZHJlc3MgX3NlcnZpY2UpIHB1YmxpYyBvbmx5T3duZXIgewoJCXJlZ2lzdGVyZWRTZXJ2aWNlc1tfc2VydmljZV0gPSB0cnVlOwoJCUVuYWJsZVNlcnZpY2UoX3NlcnZpY2UpOwoJfQoJCglmdW5jdGlvbiBkaXNhYmxlU2VydmljZShhZGRyZXNzIF9zZXJ2aWNlKSBwdWJsaWMgb25seU93bmVyIHsKCQlyZWdpc3RlcmVkU2VydmljZXNbX3NlcnZpY2VdID0gZmFsc2U7CgkJRGlzYWJsZVNlcnZpY2UoX3NlcnZpY2UpOwoJfQoJCglmdW5jdGlvbiBjb2xsZWN0UGF5bWVudChhZGRyZXNzIF9mcm9tV2hvLCB1aW50IF9wYXltZW50KSBwdWJsaWMgewoJCXJlcXVpcmUocmVnaXN0ZXJlZFNlcnZpY2VzW21zZy5zZW5kZXJdID09IHRydWUpOwoJCQoJCXNlcnZpY2VEZXBsb3lDb3VudFttc2cuc2VuZGVyXSsrOwoJCXVzZXJEZXBsb3lDb3VudFtfZnJvbVdob10rKzsKCQl0b3RhbERlcGxveW1lbnRzKys7CgkJCgkJQ0FULnRyYW5zZmVyRnJvbShfZnJvbVdobywgcGF5bWVudERlc3RpbmF0aW9uLCBfcGF5bWVudCk7CgkJQ0FUUGF5bWVudChfZnJvbVdobywgbXNnLnNlbmRlciwgX3BheW1lbnQpOwoJfQoKCS8vIEFkbWluaXN0cmF0aXZlIGZ1bmN0aW9ucwoKCWZ1bmN0aW9uIGNoYW5nZVBheW1lbnREZXN0aW5hdGlvbihhZGRyZXNzIF9uZXdQYXltZW50RGVzdCkgZXh0ZXJuYWwgb25seU93bmVyIHsKCQlDaGFuZ2VkUGF5bWVudERlc3RpbmF0aW9uKHBheW1lbnREZXN0aW5hdGlvbiwgX25ld1BheW1lbnREZXN0KTsKCQlwYXltZW50RGVzdGluYXRpb24gPSBfbmV3UGF5bWVudERlc3Q7Cgl9CgoJZnVuY3Rpb24gd2l0aGRyYXdDQVQoKSBleHRlcm5hbCBvbmx5T3duZXIgewoJCXVpbnQgb3VyVG9rZW5zID0gQ0FULmJhbGFuY2VPZih0aGlzKTsKCQlDQVQudHJhbnNmZXIob3duZXIsIG91clRva2Vucyk7CgkJQ0FUV2l0aGRyYXduKG91clRva2Vucyk7Cgl9Cn0KCmNvbnRyYWN0IFNlY3VyaXR5RGVwb3NpdCBpcyBDQVRDb250cmFjdCB7CiAgICB1aW50IHB1YmxpYyBkZXBvc2l0b3JMaW1pdCA9IDEwMDsKICAgIHVpbnQgcHVibGljIGluc3RhbmNlSWQgPSAxOwogICAgbWFwcGluZyh1aW50ID0+IFNlY3VyaXR5SW5zdGFuY2UpIHB1YmxpYyBpbnN0YW5jZXM7CiAgICAKICAgIGV2ZW50IFNlY3VyaXR5RGVwb3NpdENyZWF0ZWQodWludCBpbmRleGVkIGlkLCBhZGRyZXNzIGluZGV4ZWQgaW5zdE93bmVyLCBzdHJpbmcgb3duZXJOb3RlLCBzdHJpbmcgZGVwb3NpdFB1cnBvc2UsIHVpbnQgZGVwb3NpdEFtb3VudCk7CiAgICBldmVudCBEZXBvc2l0KHVpbnQgaW5kZXhlZCBpZCwgYWRkcmVzcyBpbmRleGVkIGRlcG9zaXRvciwgdWludCBkZXBvc2l0QW1vdW50LCBzdHJpbmcgbm90ZSk7CiAgICBldmVudCBEZXBvc2l0Q2xhaW1lZCh1aW50IGluZGV4ZWQgaWQsIGFkZHJlc3MgaW5kZXhlZCBmcm9tV2hvLCB1aW50IGFtb3VudENsYWltZWQpOwogICAgZXZlbnQgUmVmdW5kU2VudCh1aW50IGluZGV4ZWQgaWQsIGFkZHJlc3MgaW5kZXhlZCB0b1dobywgdWludCBhbW91bnRSZWZ1bmRlZCk7CgogICAgZXZlbnQgRGVwb3NpdG9yTGltaXRDaGFuZ2VkKHVpbnQgb2xkTGltaXQsIHVpbnQgbmV3TGltaXQpOwoKICAgIGVudW0gRGVwb3NpdG9yU3RhdGUge05vbmUsIEFjdGl2ZSwgQ2xhaW1lZCwgUmVmdW5kZWR9CiAgICAKICAgIHN0cnVjdCBTZWN1cml0eUluc3RhbmNlIHsKICAgICAgICB1aW50IGluc3RJZDsKICAgICAgICBhZGRyZXNzIGluc3RPd25lcjsKICAgICAgICBzdHJpbmcgb3duZXJOb3RlOwogICAgICAgIHN0cmluZyBkZXBvc2l0UHVycG9zZTsKICAgICAgICB1aW50IGRlcG9zaXRBbW91bnQ7CiAgICAgICAgbWFwcGluZyhhZGRyZXNzID0+IERlcG9zaXRvclN0YXRlKSBkZXBvc2l0b3JTdGF0ZTsKICAgICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gc3RyaW5nKSBkZXBvc2l0b3JOb3RlOwogICAgICAgIGFkZHJlc3NbXSBkZXBvc2l0b3JzOwogICAgfQogICAgCiAgICBtb2RpZmllciBvbmx5SW5zdGFuY2VPd25lcih1aW50IF9pbnN0SWQpIHsKICAgICAgICByZXF1aXJlKGluc3RhbmNlc1tfaW5zdElkXS5pbnN0T3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgaW5zdGFuY2VFeGlzdHModWludCBfaW5zdElkKSB7CiAgICAgICAgcmVxdWlyZShpbnN0YW5jZXNbX2luc3RJZF0uaW5zdElkID09IF9pbnN0SWQpOwogICAgICAgIF87CiAgICB9CgogICAgLy8gQ2hhaW4gY29uc3RydWN0b3IgdG8gcGFzcyBhbG9uZyBDQVQgcGF5bWVudCBhZGRyZXNzLCBhbmQgY29udHJhY3QgbmFtZQogICAgZnVuY3Rpb24gU2VjdXJpdHlEZXBvc2l0KGFkZHJlc3MgX2NhdFBheW1lbnRDb2xsZWN0b3IpIENBVENvbnRyYWN0KF9jYXRQYXltZW50Q29sbGVjdG9yLCAiU2VjdXJpdHkgRGVwb3NpdCIpIHt9CiAgICAKICAgIGZ1bmN0aW9uIGNyZWF0ZU5ld1NlY3VyaXR5RGVwb3NpdChzdHJpbmcgX293bmVyTm90ZSwgc3RyaW5nIF9kZXBvc2l0UHVycG9zZSwgdWludCBfZGVwb3NpdEFtb3VudCkgZXh0ZXJuYWwgYmxvY2tDYXRFbnRyeVBvaW50IHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAodWludCBjdXJyZW50SWQpIHsKICAgICAgICAvLyBEZXBvc2l0IGNhbid0IGJlIGdyZWF0ZXIgdGhhbiBtYXhpbXVtIGFsbG93ZWQgZm9yIGVhY2ggdXNlcgogICAgICAgIHJlcXVpcmUoX2RlcG9zaXRBbW91bnQgPD0gZXRoUGVyVHJhbnNhY3Rpb25MaW1pdCk7CiAgICAgICAgLy8gQ2Fubm90IGhhdmUgYSAwIGRlcG9zaXQgc2VjdXJpdHkgZGVwb3NpdAogICAgICAgIHJlcXVpcmUoX2RlcG9zaXRBbW91bnQgPiAwKTsKCiAgICAgICAgY3VycmVudElkID0gaW5zdGFuY2VJZDsKICAgICAgICBhZGRyZXNzIGluc3RhbmNlT3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHVpbnQgZGVwb3NpdEFtb3VudEVUSCA9IF9kZXBvc2l0QW1vdW50OwogICAgICAgIFNlY3VyaXR5SW5zdGFuY2Ugc3RvcmFnZSBjdXJJbnN0ID0gaW5zdGFuY2VzW2N1cnJlbnRJZF07CgogICAgICAgIGN1ckluc3QuaW5zdElkID0gY3VycmVudElkOwogICAgICAgIGN1ckluc3QuaW5zdE93bmVyID0gaW5zdGFuY2VPd25lcjsKICAgICAgICBjdXJJbnN0Lm93bmVyTm90ZSA9IF9vd25lck5vdGU7CiAgICAgICAgY3VySW5zdC5kZXBvc2l0UHVycG9zZSA9IF9kZXBvc2l0UHVycG9zZTsKICAgICAgICBjdXJJbnN0LmRlcG9zaXRBbW91bnQgPSBkZXBvc2l0QW1vdW50RVRIOwogICAgICAgIAogICAgICAgIFNlY3VyaXR5RGVwb3NpdENyZWF0ZWQoY3VycmVudElkLCBpbnN0YW5jZU93bmVyLCBfb3duZXJOb3RlLCBfZGVwb3NpdFB1cnBvc2UsIGRlcG9zaXRBbW91bnRFVEgpOwogICAgICAgIGluc3RhbmNlSWQrKzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZGVwb3NpdCh1aW50IF9pbnN0SWQsIHN0cmluZyBfbm90ZSkgZXh0ZXJuYWwgcGF5YWJsZSBpbnN0YW5jZUV4aXN0cyhfaW5zdElkKSBsaW1pdFRyYW5zYWN0aW9uVmFsdWUgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgU2VjdXJpdHlJbnN0YW5jZSBzdG9yYWdlIGN1ckluc3QgPSBpbnN0YW5jZXNbX2luc3RJZF07CiAgICAgICAgLy8gTXVzdCBkZXBvc2l0IHRoZSByaWdodCBhbW91bnQKICAgICAgICByZXF1aXJlKGN1ckluc3QuZGVwb3NpdEFtb3VudCA9PSBtc2cudmFsdWUpOwogICAgICAgIC8vIENhbm5vdCBoYXZlIG1vcmUgZGVwb3NpdG9ycyB0aGFuIHRoZSBsaW1pdAogICAgICAgIHJlcXVpcmUoY3VySW5zdC5kZXBvc2l0b3JzLmxlbmd0aCA8IGRlcG9zaXRvckxpbWl0KTsKICAgICAgICAvLyBDYW5ub3QgZG91YmxlLWRlcG9zaXQKICAgICAgICByZXF1aXJlKGN1ckluc3QuZGVwb3NpdG9yU3RhdGVbbXNnLnNlbmRlcl0gPT0gRGVwb3NpdG9yU3RhdGUuTm9uZSk7CgogICAgICAgIGN1ckluc3QuZGVwb3NpdG9yU3RhdGVbbXNnLnNlbmRlcl0gPSBEZXBvc2l0b3JTdGF0ZS5BY3RpdmU7CiAgICAgICAgY3VySW5zdC5kZXBvc2l0b3JOb3RlW21zZy5zZW5kZXJdID0gX25vdGU7CiAgICAgICAgY3VySW5zdC5kZXBvc2l0b3JzLnB1c2gobXNnLnNlbmRlcik7CiAgICAgICAgCiAgICAgICAgRGVwb3NpdChjdXJJbnN0Lmluc3RJZCwgbXNnLnNlbmRlciwgbXNnLnZhbHVlLCBfbm90ZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNsYWltKHVpbnQgX2luc3RJZCwgYWRkcmVzcyBfd2hvVG9DbGFpbSkgcHVibGljIG9ubHlJbnN0YW5jZU93bmVyKF9pbnN0SWQpIGluc3RhbmNlRXhpc3RzKF9pbnN0SWQpIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIFNlY3VyaXR5SW5zdGFuY2Ugc3RvcmFnZSBjdXJJbnN0ID0gaW5zdGFuY2VzW19pbnN0SWRdOwogICAgICAgIAogICAgICAgIC8vIENhbiBvbmx5IGNhbGwgaWYgdGhlIHN0YXRlIGlzIGFjdGl2ZQogICAgICAgIGlmKGN1ckluc3QuZGVwb3NpdG9yU3RhdGVbX3dob1RvQ2xhaW1dICE9IERlcG9zaXRvclN0YXRlLkFjdGl2ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBjdXJJbnN0LmRlcG9zaXRvclN0YXRlW193aG9Ub0NsYWltXSA9IERlcG9zaXRvclN0YXRlLkNsYWltZWQ7CiAgICAgICAgY3VySW5zdC5pbnN0T3duZXIudHJhbnNmZXIoY3VySW5zdC5kZXBvc2l0QW1vdW50KTsKICAgICAgICBEZXBvc2l0Q2xhaW1lZChfaW5zdElkLCBfd2hvVG9DbGFpbSwgY3VySW5zdC5kZXBvc2l0QW1vdW50KTsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gcmVmdW5kKHVpbnQgX2luc3RJZCwgYWRkcmVzcyBfd2hvVG9SZWZ1bmQpIHB1YmxpYyBvbmx5SW5zdGFuY2VPd25lcihfaW5zdElkKSBpbnN0YW5jZUV4aXN0cyhfaW5zdElkKSB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBTZWN1cml0eUluc3RhbmNlIHN0b3JhZ2UgY3VySW5zdCA9IGluc3RhbmNlc1tfaW5zdElkXTsKICAgICAgICAKICAgICAgICAvLyBDYW4gb25seSBjYWxsIGlmIHN0YXRlIGlzIGFjdGl2ZQogICAgICAgIGlmKGN1ckluc3QuZGVwb3NpdG9yU3RhdGVbX3dob1RvUmVmdW5kXSAhPSBEZXBvc2l0b3JTdGF0ZS5BY3RpdmUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgY3VySW5zdC5kZXBvc2l0b3JTdGF0ZVtfd2hvVG9SZWZ1bmRdID0gRGVwb3NpdG9yU3RhdGUuUmVmdW5kZWQ7CiAgICAgICAgX3dob1RvUmVmdW5kLnRyYW5zZmVyKGN1ckluc3QuZGVwb3NpdEFtb3VudCk7CiAgICAgICAgUmVmdW5kU2VudChfaW5zdElkLCBfd2hvVG9SZWZ1bmQsIGN1ckluc3QuZGVwb3NpdEFtb3VudCk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNsYWltRnJvbVNldmVyYWwodWludCBfaW5zdElkLCBhZGRyZXNzW10gX3RvQ2xhaW0pIGV4dGVybmFsIG9ubHlJbnN0YW5jZU93bmVyKF9pbnN0SWQpIGluc3RhbmNlRXhpc3RzKF9pbnN0SWQpIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgX3RvQ2xhaW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY2xhaW0oX2luc3RJZCwgX3RvQ2xhaW1baV0pOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gcmVmdW5kRnJvbVNldmVyYWwodWludCBfaW5zdElkLCBhZGRyZXNzW10gX3RvUmVmdW5kKSBleHRlcm5hbCBvbmx5SW5zdGFuY2VPd25lcihfaW5zdElkKSBpbnN0YW5jZUV4aXN0cyhfaW5zdElkKSB3aGVuTm90UGF1c2VkIHsKICAgICAgICBmb3IodWludCBpID0gMDsgaSA8IF90b1JlZnVuZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICByZWZ1bmQoX2luc3RJZCwgX3RvUmVmdW5kW2ldKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNsYWltQWxsKHVpbnQgX2luc3RJZCkgZXh0ZXJuYWwgb25seUluc3RhbmNlT3duZXIoX2luc3RJZCkgaW5zdGFuY2VFeGlzdHMoX2luc3RJZCkgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgU2VjdXJpdHlJbnN0YW5jZSBzdG9yYWdlIGN1ckluc3QgPSBpbnN0YW5jZXNbX2luc3RJZF07CiAgICAgICAgCiAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGkgPCBjdXJJbnN0LmRlcG9zaXRvcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY2xhaW0oX2luc3RJZCwgY3VySW5zdC5kZXBvc2l0b3JzW2ldKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlZnVuZEFsbCh1aW50IF9pbnN0SWQpIGV4dGVybmFsIG9ubHlJbnN0YW5jZU93bmVyKF9pbnN0SWQpIGluc3RhbmNlRXhpc3RzKF9pbnN0SWQpIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIFNlY3VyaXR5SW5zdGFuY2Ugc3RvcmFnZSBjdXJJbnN0ID0gaW5zdGFuY2VzW19pbnN0SWRdOwogICAgICAgIAogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgY3VySW5zdC5kZXBvc2l0b3JzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHJlZnVuZChfaW5zdElkLCBjdXJJbnN0LmRlcG9zaXRvcnNbaV0pOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VEZXBvc2l0b3JMaW1pdCh1aW50IF9uZXdMaW1pdCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBEZXBvc2l0b3JMaW1pdENoYW5nZWQoZGVwb3NpdG9yTGltaXQsIF9uZXdMaW1pdCk7CiAgICAgICAgZGVwb3NpdG9yTGltaXQgPSBfbmV3TGltaXQ7CiAgICB9CiAgICAKICAgIC8vIEluZm9ybWF0aW9uIGZ1bmN0aW9ucwogICAgCiAgICBmdW5jdGlvbiBnZXRJbnN0YW5jZU1ldGFkYXRhKHVpbnQgX2luc3RJZCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAoYWRkcmVzcyBpbnN0T3duZXIsIHN0cmluZyBvd25lck5vdGUsIHN0cmluZyBkZXBvc2l0UHVycG9zZSwgdWludCBkZXBvc2l0QW1vdW50KSB7CiAgICAgICAgaW5zdE93bmVyID0gaW5zdGFuY2VzW19pbnN0SWRdLmluc3RPd25lcjsKICAgICAgICBvd25lck5vdGUgPSBpbnN0YW5jZXNbX2luc3RJZF0ub3duZXJOb3RlOwogICAgICAgIGRlcG9zaXRQdXJwb3NlID0gaW5zdGFuY2VzW19pbnN0SWRdLmRlcG9zaXRQdXJwb3NlOwogICAgICAgIGRlcG9zaXRBbW91bnQgPSBpbnN0YW5jZXNbX2luc3RJZF0uZGVwb3NpdEFtb3VudDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0QWxsRGVwb3NpdG9ycyh1aW50IF9pbnN0SWQpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMgKGFkZHJlc3NbXSkgewogICAgICAgIHJldHVybiBpbnN0YW5jZXNbX2luc3RJZF0uZGVwb3NpdG9yczsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2hlY2tJbmZvKHVpbnQgX2luc3RJZCwgYWRkcmVzcyBfZGVwb3NpdG9yKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zIChEZXBvc2l0b3JTdGF0ZSBkZXBvc2l0b3JTdGF0ZSwgc3RyaW5nIG5vdGUpIHsKICAgICAgICBkZXBvc2l0b3JTdGF0ZSA9IGluc3RhbmNlc1tfaW5zdElkXS5kZXBvc2l0b3JTdGF0ZVtfZGVwb3NpdG9yXTsKICAgICAgICBub3RlID0gaW5zdGFuY2VzW19pbnN0SWRdLmRlcG9zaXRvck5vdGVbX2RlcG9zaXRvcl07CiAgICB9CgogICAgLy8gTWV0cmljcwoKICAgIGZ1bmN0aW9uIGdldERlcG9zaXRJbnN0YW5jZUNvdW50KCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBpbnN0YW5jZUlkIC0gMTsgLy8gSUQgaXMgMS1pbmRleGVkCiAgICB9Cn0='.
	

]
