Class {
	#name : #SRT68223dF196B3c46b7eb30a154DC79AA0A9d7907A,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT68223dF196B3c46b7eb30a154DC79AA0A9d7907A >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBSZWVudHJuYWN5SGFuZGxpbmdDb250cmFjdHsKCiAgICBib29sIGxvY2tlZDsKCiAgICBtb2RpZmllciBub1JlZW50cmFuY3koKSB7CiAgICAgICAgcmVxdWlyZSghbG9ja2VkKTsKICAgICAgICBsb2NrZWQgPSB0cnVlOwogICAgICAgIF87CiAgICAgICAgbG9ja2VkID0gZmFsc2U7CiAgICB9Cn0KCmNvbnRyYWN0IE93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogICAgZnVuY3Rpb24gT3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX25ld093bmVyICE9IG93bmVyKTsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lcik7CiAgICAgICAgT3duZXJVcGRhdGUob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIG5ld093bmVyID0gMHgwOwogICAgfQoKICAgIGV2ZW50IE93bmVyVXBkYXRlKGFkZHJlc3MgX3ByZXZPd25lciwgYWRkcmVzcyBfbmV3T3duZXIpOwp9Cgpjb250cmFjdCBJVG9rZW4gewogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSk7CiAgZnVuY3Rpb24gbWludFRva2VucyhhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSB7fQp9Cgpjb250cmFjdCBJRVJDMjBUb2tlbiB7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRvdGFsU3VwcGx5KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkge30KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHt9CgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBNdXNpY29ub21pQ3Jvd2RzYWxlIGlzIFJlZW50cm5hY3lIYW5kbGluZ0NvbnRyYWN0LCBPd25lZHsKCiAgc3RydWN0IENvbnRyaWJ1dG9yRGF0YXsKICAgIHVpbnQgcHJpb3JpdHlQYXNzQWxsb3dhbmNlOwogICAgdWludCBjb21tdW5pdHlBbGxvd2FuY2U7CiAgICBib29sIGlzQWN0aXZlOwogICAgdWludCBjb250cmlidXRpb25BbW91bnQ7CiAgICB1aW50IHRva2Vuc0lzc3VlZDsKICB9CgogIG1hcHBpbmcoYWRkcmVzcyA9PiBDb250cmlidXRvckRhdGEpIHB1YmxpYyBjb250cmlidXRvckxpc3Q7CiAgdWludCBuZXh0Q29udHJpYnV0b3JJbmRleDsKICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgY29udHJpYnV0b3JJbmRleGVzOwoKICBzdGF0ZSBwdWJsaWMgY3Jvd2RzYWxlU3RhdGUgPSBzdGF0ZS5wZW5kaW5nU3RhcnQ7CiAgZW51bSBzdGF0ZSB7IHBlbmRpbmdTdGFydCwgcHJpb3JpdHlQYXNzLCBvcGVuZWRQcmlvcml0eVBhc3MsIGNyb3dkc2FsZSwgY3Jvd2RzYWxlRW5kZWQgfQoKICB1aW50IHB1YmxpYyBwcmVzYWxlU3RhcnRCbG9jayA9IDQyMTY2NzA7CiAgdWludCBwdWJsaWMgcHJlc2FsZVVubGltaXRlZFN0YXJ0QmxvY2sgPSA0MjIwMDAwOwogIHVpbnQgcHVibGljIGNyb3dkc2FsZVN0YXJ0QmxvY2sgPSA0MjIzNDcwOwogIHVpbnQgcHVibGljIGNyb3dkc2FsZUVuZGVkQmxvY2sgPSA0MzE4NTYwOwoKICBldmVudCBQcmVzYWxlU3RhcnRlZCh1aW50IGJsb2NrTnVtYmVyKTsKICBldmVudCBQcmVzYWxlVW5saW1pdGVkU3RhcnRlZCh1aW50IGJsb2NrTnVtYmVyKTsKICBldmVudCBDcm93ZHNhbGVTdGFydGVkKHVpbnQgYmxvY2tOdW1iZXIpOwogIGV2ZW50IENyb3dkc2FsZUVuZGVkKHVpbnQgYmxvY2tOdW1iZXIpOwogIGV2ZW50IEVycm9yU2VuZGluZ0VUSChhZGRyZXNzIHRvLCB1aW50IGFtb3VudCk7CiAgZXZlbnQgTWluQ2FwUmVhY2hlZCh1aW50IGJsb2NrTnVtYmVyKTsKICBldmVudCBNYXhDYXBSZWFjaGVkKHVpbnQgYmxvY2tOdW1iZXIpOwoKICBJVG9rZW4gdG9rZW4gPSBJVG9rZW4oMHgwKTsKICB1aW50IGV0aFRvTXVzaWNDb252ZXJzaW9uID0gMTQxNjsKCiAgdWludCBtaW5DYXAgPSA4ODI0MDAwMDAwMDAwMDAwMDAwMDAwOwogIHVpbnQgbWF4Q2FwID0gMTc2NDgwMDAwMDAwMDAwMDAwMDAwMDA7CiAgdWludCBldGhSYWlzZWQ7CgogIGFkZHJlc3MgcHVibGljIG11bHRpc2lnQWRkcmVzczsKCiAgdWludCBuZXh0Q29udHJpYnV0b3JUb0NsYWltOwogIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBoYXNDbGFpbWVkRXRoV2hlbkZhaWw7CgogIHVpbnQgbWF4VG9rZW5TdXBwbHkgPSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CiAgYm9vbCBvd25lckhhc0NsYWltZWRUb2tlbnM7CiAgdWludCBjb2ZvdW5kaXRSZXdhcmQgPSAyNzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwogIGFkZHJlc3MgY29mb3VuZGl0QWRkcmVzcyA9IDB4OEMwREI2OTVkZTg3NmE0MmNFMmUxMzNjYTAwZmRGNTlBOTE2NjcwODsKICBib29sIGNvZm91bmRpdEhhc0NsYWltZWRUb2tlbnM7CgogIC8vCiAgLy8gVW5uYW1lZCBmdW5jdGlvbiB0aGF0IHJ1bnMgd2hlbiBldGggaXMgc2VudCB0byB0aGUgY29udHJhY3QKICAvLwogIGZ1bmN0aW9uKCkgbm9SZWVudHJhbmN5IHBheWFibGV7CiAgICByZXF1aXJlKG1zZy52YWx1ZSAhPSAwKTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaHJvdyBpZiB2YWx1ZSBpcyAwCgogICAgYm9vbCBzdGF0ZUNoYW5nZWQgPSBjaGVja0Nyb3dkc2FsZVN0YXRlKCk7ICAgICAgLy8gQ2hlY2sgYmxvY2tzIGFuZCBjYWxpYnJhdGUgY3Jvd2RzYWxlIHN0YXRlCgogICAgaWYgKGNyb3dkc2FsZVN0YXRlID09IHN0YXRlLnByaW9yaXR5UGFzcyl7CiAgICAgIGlmIChjb250cmlidXRvckxpc3RbbXNnLnNlbmRlcl0uaXNBY3RpdmUpeyAgICAvLyBDaGVjayBpZiBjb250cmlidXRvciBpcyBpbiBwcmlvcml0eVBhc3MKICAgICAgICBwcm9jZXNzVHJhbnNhY3Rpb24obXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgIC8vIFByb2Nlc3MgdHJhbnNhY3Rpb24gYW5kIGlzc3VlIHRva2VucwogICAgICB9ZWxzZXsKICAgICAgICByZWZ1bmRUcmFuc2FjdGlvbihzdGF0ZUNoYW5nZWQpOyAgICAgICAgICAgIC8vIFNldCBzdGF0ZSBhbmQgcmV0dXJuIGZ1bmRzIG9yIHRocm93CiAgICAgIH0KICAgIH0KICAgIGVsc2UgaWYoY3Jvd2RzYWxlU3RhdGUgPT0gc3RhdGUub3BlbmVkUHJpb3JpdHlQYXNzKXsKICAgICAgaWYgKGNvbnRyaWJ1dG9yTGlzdFttc2cuc2VuZGVyXS5pc0FjdGl2ZSl7ICAgIC8vIENoZWNrIGlmIGNvbnRyaWJ1dG9yIGlzIGluIHByaW9yaXR5UGFzcwogICAgICAgIHByb2Nlc3NUcmFuc2FjdGlvbihtc2cuc2VuZGVyLCBtc2cudmFsdWUpOyAgLy8gUHJvY2VzcyB0cmFuc2FjdGlvbiBhbmQgaXNzdWUgdG9rZW5zCiAgICAgIH1lbHNlewogICAgICAgIHJlZnVuZFRyYW5zYWN0aW9uKHN0YXRlQ2hhbmdlZCk7ICAgICAgICAgICAgLy8gU2V0IHN0YXRlIGFuZCByZXR1cm4gZnVuZHMgb3IgdGhyb3cKICAgICAgfQogICAgfQogICAgZWxzZSBpZihjcm93ZHNhbGVTdGF0ZSA9PSBzdGF0ZS5jcm93ZHNhbGUpewogICAgICBwcm9jZXNzVHJhbnNhY3Rpb24obXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgICAgLy8gUHJvY2VzcyB0cmFuc2FjdGlvbiBhbmQgaXNzdWUgdG9rZW5zCiAgICB9CiAgICBlbHNlewogICAgICByZWZ1bmRUcmFuc2FjdGlvbihzdGF0ZUNoYW5nZWQpOyAgICAgICAgICAgICAgLy8gU2V0IHN0YXRlIGFuZCByZXR1cm4gZnVuZHMgb3IgdGhyb3cKICAgIH0KICB9CgogIC8vCiAgLy8gQ2hlY2sgY3Jvd2RzYWxlIHN0YXRlIGFuZCBjYWxpYnJhdGUgaXQKICAvLwogIGZ1bmN0aW9uIGNoZWNrQ3Jvd2RzYWxlU3RhdGUoKSBpbnRlcm5hbCByZXR1cm5zIChib29sKXsKICAgIGlmIChldGhSYWlzZWQgPT0gbWF4Q2FwICYmIGNyb3dkc2FsZVN0YXRlICE9IHN0YXRlLmNyb3dkc2FsZUVuZGVkKXsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbWF4IGNhcCBpcyByZWFjaGVkCiAgICAgIGNyb3dkc2FsZVN0YXRlID0gc3RhdGUuY3Jvd2RzYWxlRW5kZWQ7CiAgICAgIE1heENhcFJlYWNoZWQoYmxvY2subnVtYmVyKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsb3NlIHRoZSBjcm93ZHNhbGUKICAgICAgQ3Jvd2RzYWxlRW5kZWQoYmxvY2subnVtYmVyKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgaWYgKGJsb2NrLm51bWJlciA+IHByZXNhbGVTdGFydEJsb2NrICYmIGJsb2NrLm51bWJlciA8PSBwcmVzYWxlVW5saW1pdGVkU3RhcnRCbG9jayl7ICAvLyBDaGVjayBpZiB3ZSBhcmUgaW4gcHJlc2FsZSBwaGFzZQogICAgICBpZiAoY3Jvd2RzYWxlU3RhdGUgIT0gc3RhdGUucHJpb3JpdHlQYXNzKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBzdGF0ZSBuZWVkcyB0byBiZSBjaGFuZ2VkCiAgICAgICAgY3Jvd2RzYWxlU3RhdGUgPSBzdGF0ZS5wcmlvcml0eVBhc3M7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBuZXcgc3RhdGUKICAgICAgICBQcmVzYWxlU3RhcnRlZChibG9jay5udW1iZXIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfWVsc2UgaWYoYmxvY2subnVtYmVyID4gcHJlc2FsZVVubGltaXRlZFN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyIDw9IGNyb3dkc2FsZVN0YXJ0QmxvY2speyAvLyBDaGVjayBpZiB3ZSBhcmUgaW4gcHJlc2FsZSB1bmxpbWl0ZWQgcGhhc2UKICAgICAgaWYgKGNyb3dkc2FsZVN0YXRlICE9IHN0YXRlLm9wZW5lZFByaW9yaXR5UGFzcyl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3RhdGUgbmVlZHMgdG8gYmUgY2hhbmdlZAogICAgICAgIGNyb3dkc2FsZVN0YXRlID0gc3RhdGUub3BlbmVkUHJpb3JpdHlQYXNzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgbmV3IHN0YXRlCiAgICAgICAgUHJlc2FsZVVubGltaXRlZFN0YXJ0ZWQoYmxvY2subnVtYmVyKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJhaXNlIGV2ZW50CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH1lbHNlIGlmKGJsb2NrLm51bWJlciA+IGNyb3dkc2FsZVN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyIDw9IGNyb3dkc2FsZUVuZGVkQmxvY2speyAgICAgICAgLy8gQ2hlY2sgaWYgd2UgYXJlIGluIGNyb3dkc2FsZSBzdGF0ZQogICAgICBpZiAoY3Jvd2RzYWxlU3RhdGUgIT0gc3RhdGUuY3Jvd2RzYWxlKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBzdGF0ZSBuZWVkcyB0byBiZSBjaGFuZ2VkCiAgICAgICAgY3Jvd2RzYWxlU3RhdGUgPSBzdGF0ZS5jcm93ZHNhbGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBuZXcgc3RhdGUKICAgICAgICBDcm93ZHNhbGVTdGFydGVkKGJsb2NrLm51bWJlcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfWVsc2V7CiAgICAgIGlmIChjcm93ZHNhbGVTdGF0ZSAhPSBzdGF0ZS5jcm93ZHNhbGVFbmRlZCAmJiBibG9jay5udW1iZXIgPiBjcm93ZHNhbGVFbmRlZEJsb2NrKXsgICAgICAgIC8vIENoZWNrIGlmIGNyb3dkc2FsZSBpcyBvdmVyCiAgICAgICAgY3Jvd2RzYWxlU3RhdGUgPSBzdGF0ZS5jcm93ZHNhbGVFbmRlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBuZXcgc3RhdGUKICAgICAgICBDcm93ZHNhbGVFbmRlZChibG9jay5udW1iZXIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8KICAvLyBEZWNpZGUgaWYgdGhyb3cgb3Igb25seSByZXR1cm4gZXRoZXIKICAvLwogIGZ1bmN0aW9uIHJlZnVuZFRyYW5zYWN0aW9uKGJvb2wgX3N0YXRlQ2hhbmdlZCkgaW50ZXJuYWx7CiAgICBpZiAoX3N0YXRlQ2hhbmdlZCl7CiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH1lbHNlewogICAgICByZXZlcnQoKTsKICAgIH0KICB9CgogIC8vCiAgLy8gQ2FsY3VsYXRlIGhvdyBtdWNoIHVzZXIgY2FuIGNvbnRyaWJ1dGUKICAvLwogIGZ1bmN0aW9uIGNhbGN1bGF0ZU1heENvbnRyaWJ1dGlvbihhZGRyZXNzIF9jb250cmlidXRvcikgY29uc3RhbnQgcmV0dXJucyAodWludCBtYXhDb250cmlidXRpb24pewogICAgdWludCBtYXhDb250cmliOwogICAgaWYgKGNyb3dkc2FsZVN0YXRlID09IHN0YXRlLnByaW9yaXR5UGFzcyl7ICAgLy8gQ2hlY2sgaWYgd2UgYXJlIGluIHByaW9yaXR5IHBhc3MKICAgICAgbWF4Q29udHJpYiA9IGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLnByaW9yaXR5UGFzc0FsbG93YW5jZSArIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbW11bml0eUFsbG93YW5jZSAtIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudDsKICAgICAgaWYgKG1heENvbnRyaWIgPiAobWF4Q2FwIC0gZXRoUmFpc2VkKSl7ICAgLy8gQ2hlY2sgaWYgbWF4IGNvbnRyaWJ1dGlvbiBpcyBtb3JlIHRoYXQgbWF4IGNhcAogICAgICAgIG1heENvbnRyaWIgPSBtYXhDYXAgLSBldGhSYWlzZWQ7ICAgICAgICAvLyBBbHRlciBtYXggY2FwCiAgICAgIH0KICAgIH0KICAgIGVsc2V7CiAgICAgIG1heENvbnRyaWIgPSBtYXhDYXAgLSBldGhSYWlzZWQ7ICAgICAgICAgIC8vIEFsdGVyIG1heCBjYXAKICAgIH0KICAgIHJldHVybiBtYXhDb250cmliOwogIH0KCiAgLy8KICAvLyBJc3N1ZSB0b2tlbnMgYW5kIHJldHVybiBpZiB0aGVyZSBpcyBvdmVyZmxvdwogIC8vCiAgZnVuY3Rpb24gcHJvY2Vzc1RyYW5zYWN0aW9uKGFkZHJlc3MgX2NvbnRyaWJ1dG9yLCB1aW50IF9hbW91bnQpIGludGVybmFsewogICAgdWludCBtYXhDb250cmlidXRpb24gPSBjYWxjdWxhdGVNYXhDb250cmlidXRpb24oX2NvbnRyaWJ1dG9yKTsgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBtYXggdXNlcnMgY29udHJpYnV0aW9uCiAgICB1aW50IGNvbnRyaWJ1dGlvbkFtb3VudCA9IF9hbW91bnQ7CiAgICB1aW50IHJldHVybkFtb3VudCA9IDA7CiAgICBpZiAobWF4Q29udHJpYnV0aW9uIDwgX2Ftb3VudCl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbWF4IGNvbnRyaWJ1dGlvbiBpcyBsb3dlciB0aGFuIF9hbW91bnQgc2VudAogICAgICBjb250cmlidXRpb25BbW91bnQgPSBtYXhDb250cmlidXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGF0IHVzZXIgY29udGlidXRlcyBoaXMgbWF4aW11bSBhbG93ZWQgY29udHJpYnV0aW9uCiAgICAgIHJldHVybkFtb3VudCA9IF9hbW91bnQgLSBtYXhDb250cmlidXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGhvd211Y2ggaGUgbXVzdCBnZXQgYmFjawogICAgfQoKICAgIGlmIChldGhSYWlzZWQgKyBjb250cmlidXRpb25BbW91bnQgPiBtaW5DYXAgJiYgbWluQ2FwIDwgZXRoUmFpc2VkKSBNaW5DYXBSZWFjaGVkKGJsb2NrLm51bWJlcik7CgogICAgaWYgKGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmlzQWN0aXZlID09IGZhbHNlKXsgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNvbnRyaWJ1dG9yIGhhcyBhbHJlYWR5IGNvbnRyaWJ1dGVkCiAgICAgIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmlzQWN0aXZlID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGhpcyBhY3Rpdml0eSB0byB0cnVlCiAgICAgIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudCA9IGNvbnRyaWJ1dGlvbkFtb3VudDsgICAgLy8gU2V0IGhpcyBjb250cmlidXRpb24KICAgICAgY29udHJpYnV0b3JJbmRleGVzW25leHRDb250cmlidXRvckluZGV4XSA9IF9jb250cmlidXRvcjsgICAgICAgICAgICAgICAgICAvLyBTZXQgY29udHJpYnV0b3JzIGluZGV4CiAgICAgIG5leHRDb250cmlidXRvckluZGV4Kys7CiAgICB9CiAgICBlbHNlewogICAgICBjb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS5jb250cmlidXRpb25BbW91bnQgKz0gY29udHJpYnV0aW9uQW1vdW50OyAgIC8vIEFkZCBjb250cmlidXRpb24gYW1vdW50IHRvIGV4aXN0aW5nIGNvbnRyaWJ1dG9yCiAgICB9CiAgICBldGhSYWlzZWQgKz0gY29udHJpYnV0aW9uQW1vdW50OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRvIGV0aCByYWlzZWQKCiAgICB1aW50IHRva2VuQW1vdW50ID0gY29udHJpYnV0aW9uQW1vdW50ICogZXRoVG9NdXNpY0NvbnZlcnNpb247ICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGhvdyBtdWNoIHRva2VucyBtdXN0IGNvbnRyaWJ1dG9yIGdldAogICAgdG9rZW4ubWludFRva2VucyhfY29udHJpYnV0b3IsIHRva2VuQW1vdW50KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElzc3VlIG5ldyB0b2tlbnMKICAgIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLnRva2Vuc0lzc3VlZCArPSB0b2tlbkFtb3VudDsgICAgICAgICAgICAgICAgICAvLyBsb2cgdG9rZW4gaXNzdWFuY2UKCiAgICBpZiAocmV0dXJuQW1vdW50ICE9IDApIF9jb250cmlidXRvci50cmFuc2ZlcihyZXR1cm5BbW91bnQpOyAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIG92ZXJmbG93IG9mIGV0aGVyCiAgfQoKICAvLwogIC8vIFB1c2ggY29udHJpYnV0b3IgZGF0YSB0byB0aGUgY29udHJhY3QgYmVmb3JlIHRoZSBjcm93ZHNhbGUgc28gdGhhdCB0aGV5IGFyZSBlbGlnaWJsZSBmb3IgcHJpb3JpdCBwYXNzCiAgLy8KICBmdW5jdGlvbiBlZGl0Q29udHJpYnV0b3JzKGFkZHJlc3NbXSBfY29udHJpYnV0b3JBZGRyZXNzZXMsIHVpbnRbXSBfY29udHJpYnV0b3JQUEFsbG93YW5jZXMsIHVpbnRbXSBfY29udHJpYnV0b3JDb21tdW5pdHlBbGxvd2FuY2UpIG9ubHlPd25lcnsKICAgIHJlcXVpcmUoY3Jvd2RzYWxlU3RhdGUgPT0gc3RhdGUucGVuZGluZ1N0YXJ0KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNyb3dkc2FsZSBoYXMgc3RhcnRlZAogICAgcmVxdWlyZShfY29udHJpYnV0b3JBZGRyZXNzZXMubGVuZ3RoID09IF9jb250cmlidXRvclBQQWxsb3dhbmNlcy5sZW5ndGggJiYgX2NvbnRyaWJ1dG9yQWRkcmVzc2VzLmxlbmd0aCA9PSBfY29udHJpYnV0b3JDb21tdW5pdHlBbGxvd2FuY2UubGVuZ3RoKTsgLy8gQ2hlY2sgaWYgaW5wdXQgZGF0YSBpcyBjb3JyZWN0CgogICAgZm9yKHVpbnQgY250ID0gMDsgY250IDwgX2NvbnRyaWJ1dG9yQWRkcmVzc2VzLmxlbmd0aDsgY250KyspewogICAgICBjb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yQWRkcmVzc2VzW2NudF1dLmlzQWN0aXZlID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWN0aXZhdGUgY29udHJpYnV0b3IKICAgICAgY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvckFkZHJlc3Nlc1tjbnRdXS5wcmlvcml0eVBhc3NBbGxvd2FuY2UgPSBfY29udHJpYnV0b3JQUEFsbG93YW5jZXNbY250XTsgIC8vIFNldCBQUCBhbGxvd2FuY2UKICAgICAgY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvckFkZHJlc3Nlc1tjbnRdXS5jb21tdW5pdHlBbGxvd2FuY2UgPSBfY29udHJpYnV0b3JDb21tdW5pdHlBbGxvd2FuY2VbY250XTsvLyBTZXQgY29tbXVuaXR5IHdoaXRlbGlzdCBhbGxvd2FuY2UKICAgICAgY29udHJpYnV0b3JJbmRleGVzW25leHRDb250cmlidXRvckluZGV4XSA9IF9jb250cmlidXRvckFkZHJlc3Nlc1tjbnRdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB1c2VycyBpbmRleAogICAgICBuZXh0Q29udHJpYnV0b3JJbmRleCsrOwogICAgfQogIH0KCiAgLy8KICAvLyBNZXRob2QgaXMgbmVlZGVkIGZvciByZWNvdmVyaW5nIHRva2VucyBhY2NlZGVudGFseSBzZW50IHRvIHRva2VuIGFkZHJlc3MKICAvLwogIGZ1bmN0aW9uIHNhbHZhZ2VUb2tlbnNGcm9tQ29udHJhY3QoYWRkcmVzcyBfdG9rZW5BZGRyZXNzLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBvbmx5T3duZXJ7CiAgICBJRVJDMjBUb2tlbihfdG9rZW5BZGRyZXNzKS50cmFuc2ZlcihfdG8sIF9hbW91bnQpOwogIH0KCiAgLy8KICAvLyB3aXRoZHJhd0V0aCB3aGVuIG1pbmltdW0gY2FwIGlzIHJlYWNoZWQKICAvLwogIGZ1bmN0aW9uIHdpdGhkcmF3RXRoKCkgb25seU93bmVyewogICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgIT0gMCk7CiAgICByZXF1aXJlKGV0aFJhaXNlZCA+PSBtaW5DYXApOwoKICAgIG11bHRpc2lnQWRkcmVzcy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0KCiAgLy8KICAvLyBVc2VycyBjYW4gY2xhaW0gdGhlaXIgY29udHJpYnV0aW9uIGlmIG1pbiBjYXAgaXMgbm90IHJhaXNlZAogIC8vCiAgZnVuY3Rpb24gY2xhaW1FdGhJZkZhaWxlZCgpewogICAgcmVxdWlyZShibG9jay5udW1iZXIgPiBjcm93ZHNhbGVFbmRlZEJsb2NrICYmIGV0aFJhaXNlZCA8IG1pbkNhcCk7ICAgIC8vIENoZWNrIGlmIGNyb3dkc2FsZSBoYXMgZmFpbGVkCiAgICByZXF1aXJlKGNvbnRyaWJ1dG9yTGlzdFttc2cuc2VuZGVyXS5jb250cmlidXRpb25BbW91bnQgPiAwKTsgICAgICAgICAgLy8gQ2hlY2sgaWYgY29udHJpYnV0b3IgaGFzIGNvbnRyaWJ1dGVkIHRvIGNyb3dkc2FsZUVuZGVkQmxvY2sKICAgIHJlcXVpcmUoIWhhc0NsYWltZWRFdGhXaGVuRmFpbFttc2cuc2VuZGVyXSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjb250cmlidXRvciBoYXMgYWxyZWFkeSBjbGFpbWVkIGhpcyBldGgKCiAgICB1aW50IGV0aENvbnRyaWJ1dGVkID0gY29udHJpYnV0b3JMaXN0W21zZy5zZW5kZXJdLmNvbnRyaWJ1dGlvbkFtb3VudDsgLy8gR2V0IGNvbnRyaWJ1dG9ycyBjb250cmlidXRpb24KICAgIGhhc0NsYWltZWRFdGhXaGVuRmFpbFttc2cuc2VuZGVyXSA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhhdCBoZSBoYXMgY2xhaW1lZAogICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoZXRoQ29udHJpYnV0ZWQpKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZnVuZCBldGgKICAgICAgRXJyb3JTZW5kaW5nRVRIKG1zZy5zZW5kZXIsIGV0aENvbnRyaWJ1dGVkKTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBpc3N1ZSByYWlzZSBldmVudCBmb3IgbWFudWFsIHJlY292ZXJ5CiAgICB9CiAgfQoKICAvLwogIC8vIE93bmVyIGNhbiBiYXRjaCByZXR1cm4gY29udHJpYnV0b3JzIGNvbnRyaWJ1dGlvbnMoZXRoKQogIC8vCiAgZnVuY3Rpb24gYmF0Y2hSZXR1cm5FdGhJZkZhaWxlZCh1aW50IF9udW1iZXJPZlJldHVybnMpIG9ubHlPd25lcnsKICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID4gY3Jvd2RzYWxlRW5kZWRCbG9jayAmJiBldGhSYWlzZWQgPCBtaW5DYXApOyAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjcm93ZHNhbGUgaGFzIGZhaWxlZAogICAgYWRkcmVzcyBjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzOwogICAgdWludCBjb250cmlidXRpb247CiAgICBmb3IgKHVpbnQgY250ID0gMDsgY250IDwgX251bWJlck9mUmV0dXJuczsgY250KyspewogICAgICBjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzID0gY29udHJpYnV0b3JJbmRleGVzW25leHRDb250cmlidXRvclRvQ2xhaW1dOyAgICAgICAgIC8vIEdldCBuZXh0IHVuY2xhaW1lZCBwYXJ0aWNpcGFudAogICAgICBpZiAoY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcyA9PSAweDApIHJldHVybjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGFsbCB0aGUgcGFydGljaXBhbnRzIHdlcmUgY29tcGVuc2F0ZWQKICAgICAgaWYgKCFoYXNDbGFpbWVkRXRoV2hlbkZhaWxbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10pIHsgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwYXJ0aWNpcGFudCBoYXMgYWxyZWFkeSBjbGFpbWVkCiAgICAgICAgY29udHJpYnV0aW9uID0gY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLmNvbnRyaWJ1dGlvbkFtb3VudDsgLy8gR2V0IGNvbnRyaWJ1dGlvbiBvZiBwYXJ0aWNpcGFudAogICAgICAgIGhhc0NsYWltZWRFdGhXaGVuRmFpbFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXSA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGF0IGhlIGhhcyBjbGFpbWVkCiAgICAgICAgaWYgKCFjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzLnNlbmQoY29udHJpYnV0aW9uKSl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVmdW5kIGV0aAogICAgICAgICAgRXJyb3JTZW5kaW5nRVRIKGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MsIGNvbnRyaWJ1dGlvbik7ICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGlzc3VlIHJhaXNlIGV2ZW50IGZvciBtYW51YWwgcmVjb3ZlcnkKICAgICAgICB9CiAgICAgIH0KICAgICAgbmV4dENvbnRyaWJ1dG9yVG9DbGFpbSArPSAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXBlYXQKICAgIH0KICB9CgogIC8vCiAgLy8gSWYgdGhlcmUgd2VyZSBhbnkgaXNzdWUvYXR0YWNoIHdpdGggcmVmdW5kIG93bmVyIGNhbiB3aXRocmF3IGV0aCBhdCB0aGUgZW5kIGZvciBtYW51YWwgcmVjb3ZlcnkKICAvLwogIGZ1bmN0aW9uIHdpdGhkcmF3UmVtYWluaW5nQmFsYW5jZUZvck1hbnVhbFJlY292ZXJ5KCkgb25seU93bmVyewogICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgIT0gMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGFyZSBhbnkgZXRoIHRvIGNsYWltCiAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+IGNyb3dkc2FsZUVuZGVkQmxvY2spOyAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY3Jvd2RzYWxlIGlzIG92ZXIKICAgIHJlcXVpcmUoY29udHJpYnV0b3JJbmRleGVzW25leHRDb250cmlidXRvclRvQ2xhaW1dID09IDB4MCk7ICAvLyBDaGVjayBpZiBhbGwgdGhlIHVzZXJzIHdlcmUgcmVmdW5kZWQKICAgIG11bHRpc2lnQWRkcmVzcy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOyAgICAgICAgICAgICAgICAgICAgICAvLyBXaXRoZHJhdyB0byBtdWx0aXNpZwogIH0KCiAgLy8KICAvLyBPd25lciBjYW4gc2V0IG11bHRpc2lnIGFkZHJlc3MgZm9yIGNyb3dkc2FsZQogIC8vCiAgZnVuY3Rpb24gc2V0TXVsdGlzaWdBZGRyZXNzKGFkZHJlc3MgX25ld0FkZHJlc3MpIG9ubHlPd25lcnsKICAgIG11bHRpc2lnQWRkcmVzcyA9IF9uZXdBZGRyZXNzOwogIH0KCiAgLy8KICAvLyBPd25lciBjYW4gc2V0IHRva2VuIGFkZHJlc3Mgd2hlcmUgbWludHMgd2lsbCBoYXBwZW4KICAvLwogIGZ1bmN0aW9uIHNldFRva2VuKGFkZHJlc3MgX25ld0FkZHJlc3MpIG9ubHlPd25lcnsKICAgIHRva2VuID0gSVRva2VuKF9uZXdBZGRyZXNzKTsKICB9CgogIC8vCiAgLy8gT3duZXIgY2FuIGNsYWltIHRlYW1zIHRva2VucyB3aGVuIGNyb3dkc2FsZSBoYXMgc3VjY2Vzc2Z1bGx5IGVuZGVkCiAgLy8KICBmdW5jdGlvbiBjbGFpbUNvcmVUZWFtc1Rva2VucyhhZGRyZXNzIF90bykgb25seU93bmVyewogICAgcmVxdWlyZShjcm93ZHNhbGVTdGF0ZSA9PSBzdGF0ZS5jcm93ZHNhbGVFbmRlZCk7ICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjcm93ZHNhbGUgaGFzIGVuZGVkCiAgICByZXF1aXJlKCFvd25lckhhc0NsYWltZWRUb2tlbnMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIG93bmVyIGhhcyBhbGxyZWFkeSBjbGFpbWVkIHRva2VucwoKICAgIHVpbnQgZGV2UmV3YXJkID0gbWF4VG9rZW5TdXBwbHkgLSB0b2tlbi50b3RhbFN1cHBseSgpOwogICAgaWYgKCFjb2ZvdW5kaXRIYXNDbGFpbWVkVG9rZW5zKSBkZXZSZXdhcmQgLT0gY29mb3VuZGl0UmV3YXJkOyAvLyBJZiBjb2ZvdW5kaXQgaGFzIGNsYWltZWQgdG9rZW5zIGl0cyBvayBpZiBub3Qgc2V0IGFzaWRlIGNvZm91bmRpdFJld2FyZAogICAgdG9rZW4ubWludFRva2VucyhfdG8sIGRldlJld2FyZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJc3N1ZSBUZWFtcyB0b2tlbnMKICAgIG93bmVySGFzQ2xhaW1lZFRva2VucyA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxvY2sgZnVydGhlciBtaW50cyBmcm9tIHRoaXMgZnVuY3Rpb24KICB9CgogIC8vCiAgLy8gQ29mb3VuZGl0IGNhbiBjbGFpbSB0aGVpciB0b2tlbnMKICAvLwogIGZ1bmN0aW9uIGNsYWltQ29mb3VuZGl0VG9rZW5zKCl7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY29mb3VuZGl0QWRkcmVzcyk7ICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc2VuZGVyIGlzIGNvZm91bmRpdAogICAgcmVxdWlyZShjcm93ZHNhbGVTdGF0ZSA9PSBzdGF0ZS5jcm93ZHNhbGVFbmRlZCk7ICAgIC8vIENoZWNrIGlmIGNyb3dkc2FsZSBoYXMgZW5kZWQKICAgIHJlcXVpcmUoIWNvZm91bmRpdEhhc0NsYWltZWRUb2tlbnMpOyAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjb2ZvdW5kaXQgaGFzIGFsbHJlYWR5IGNsYWltZWQgdG9rZW5zCgogICAgdG9rZW4ubWludFRva2Vucyhjb2ZvdW5kaXRBZGRyZXNzLCBjb2ZvdW5kaXRSZXdhcmQpOy8vIElzc3VlIGNvZm91bmRpdCB0b2tlbnMKICAgIGNvZm91bmRpdEhhc0NsYWltZWRUb2tlbnMgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAvLyBCbG9jayBmdXJ0aGVyIG1pbnRzIGZyb20gdGhpcyBmdW5jdGlvbgogIH0KCiAgZnVuY3Rpb24gZ2V0VG9rZW5BZGRyZXNzKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKXsKICAgIHJldHVybiBhZGRyZXNzKHRva2VuKTsKICB9Cn0='.
	

]
