Class {
	#name : #SRT836a5f830d695b4f9975ee87b0b0be68c44ff585,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT836a5f830d695b4f9975ee87b0b0be68c44ff585 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgfQoKfQoKCgovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCgogIC8qKgogICAqIEBkZXYgbW9kaWZpZXIgdG8gYWxsb3cgYWN0aW9ucyBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IElTIHBhdXNlZAogICAqLwogIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgbW9kaWZpZXIgdG8gYWxsb3cgYWN0aW9ucyBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IElTIE5PVCBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgKi8KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KCgpjb250cmFjdCBIZXJvQ29yZXsKCiAgIGZ1bmN0aW9uIG93bmVySW5kZXhUb0VSQzIwQmFsYW5jZShhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgcmV0dXJucyAodWludDI1Nik7CiAgIGZ1bmN0aW9uIHVzZUl0ZW1zKHVpbnQzMiBfaXRlbXMsIHVpbnQyNTYgdG9rZW5JZCwgYWRkcmVzcyBvd25lcix1aW50MjU2IGZlZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyByZXR1cm5zIChhZGRyZXNzKTsKICAgZnVuY3Rpb24gZ2V0SGVyb0l0ZW1zKHVpbnQyNTYgX2lkKSBwdWJsaWMgcmV0dXJucyAoIHVpbnQzMik7CiAgICAKICAgZnVuY3Rpb24gcmVkdWNlQ0RGZWUodWludDI1NiBoZXJvSWQpIAogICAgICAgICBwdWJsaWMgCiAgICAgICAgIHZpZXcgCiAgICAgICAgIHJldHVybnMgKHVpbnQyNTYpOwogICAKfQoKCgovLy8gQHRpdGxlIEludGVyZmFjZSBmb3IgY29udHJhY3RzIGNvbmZvcm1pbmcgdG8gRVJDLTcyMTogTm9uLUZ1bmdpYmxlIFRva2Vucwpjb250cmFjdCBFUkM3MjEgewogICAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBvd25lcik7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGluZGV4ZWQgdG9rZW5JZCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBhcHByb3ZlZCwgdWludDI1NiBpbmRleGVkIHRva2VuSWQpOwogICAgZnVuY3Rpb24gcHJvbW9CdW4oYWRkcmVzcyBfYWRkcmVzcykgcHVibGljOwp9Cgpjb250cmFjdCBDbG9ja0F1Y3Rpb25CYXNlIHsKCiAgICAvLyBSZXByZXNlbnRzIGFuIGF1Y3Rpb24gb24gYW4gTkZUCiAgICBzdHJ1Y3QgQXVjdGlvbiB7CiAgICAgICAgLy8gQ3VycmVudCBvd25lciBvZiBORlQKICAgICAgICBhZGRyZXNzIHNlbGxlcjsKICAgICAgICAvLyBQcmljZSAoaW4gd2VpKSBhdCBiZWdpbm5pbmcgb2YgYXVjdGlvbgogICAgICAgIHVpbnQxMjggc3RhcnRpbmdQcmljZTsKICAgICAgICAvLyBQcmljZSAoaW4gd2VpKSBhdCBlbmQgb2YgYXVjdGlvbgogICAgICAgIHVpbnQxMjggZW5kaW5nUHJpY2U7CiAgICAgICAgLy8gRHVyYXRpb24gKGluIHNlY29uZHMpIG9mIGF1Y3Rpb24KICAgICAgICB1aW50MTI4ICBzdGFydGluZ1ByaWNlRXRoOwogICAgICAgIHVpbnQxMjggIGVuZGluZ1ByaWNlRXRoOwogICAgICAgIAogICAgICAgIHVpbnQ2NCBkdXJhdGlvbjsKICAgICAgICAvLyBUaW1lIHdoZW4gYXVjdGlvbiBzdGFydGVkCiAgICAgICAgLy8gTk9URTogMCBpZiB0aGlzIGF1Y3Rpb24gaGFzIGJlZW4gY29uY2x1ZGVkCiAgICAgICAgdWludDY0IHN0YXJ0ZWRBdDsKICAgIH0KCiAgICBFUkM3MjEgcHVibGljIG5vbkZ1bmdpYmxlQ29udHJhY3Q7CgogICAgdWludDI1NiBwdWJsaWMgb3duZXJDdXQ7CgogICAgbWFwcGluZyAodWludDI1NiA9PiBBdWN0aW9uKSB0b2tlbklkVG9BdWN0aW9uOwoKICAgIGV2ZW50IEF1Y3Rpb25DcmVhdGVkKHVpbnQyNTYgdG9rZW5JZCwgdWludDI1NiBzdGFydGluZ1ByaWNlLCB1aW50MjU2IGVuZGluZ1ByaWNlLHVpbnQyNTYgc3RhcnRpbmdQcmljZUV0aCwgdWludDI1NiBlbmRpbmdQcmljZUV0aCwgdWludDI1NiBkdXJhdGlvbik7CiAgICBldmVudCBBdWN0aW9uU3VjY2Vzc2Z1bCh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgdG90YWxQcmljZSx1aW50IGNjeSwgYWRkcmVzcyB3aW5uZXIpOwogICAgZXZlbnQgQXVjdGlvbkNhbmNlbGxlZCh1aW50MjU2IHRva2VuSWQpOwoKICAgIGZ1bmN0aW9uKCkgZXh0ZXJuYWwge30KCiAgICBtb2RpZmllciBjYW5CZVN0b3JlZFdpdGg2NEJpdHModWludDI1NiBfdmFsdWUpIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSAxODQ0Njc0NDA3MzcwOTU1MTYxNSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBjYW5CZVN0b3JlZFdpdGgxMjhCaXRzKHVpbnQyNTYgX3ZhbHVlKSB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPCAzNDAyODIzNjY5MjA5Mzg0NjM0NjMzNzQ2MDc0MzE3NjgyMTE0NTUpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gX293bnMoYWRkcmVzcyBfY2xhaW1hbnQsIHVpbnQyNTYgX3Rva2VuSWQpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAobm9uRnVuZ2libGVDb250cmFjdC5vd25lck9mKF90b2tlbklkKSA9PSBfY2xhaW1hbnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9lc2Nyb3coYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3Rva2VuSWQpIGludGVybmFsIHsKICAgICAgICBub25GdW5naWJsZUNvbnRyYWN0LnRyYW5zZmVyRnJvbShfb3duZXIsIHRoaXMsIF90b2tlbklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfcmVjZWl2ZXIsIHVpbnQyNTYgX3Rva2VuSWQpIGludGVybmFsIHsKICAgICAgICBub25GdW5naWJsZUNvbnRyYWN0LnRyYW5zZmVyKF9yZWNlaXZlciwgX3Rva2VuSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9hZGRBdWN0aW9uKHVpbnQyNTYgX3Rva2VuSWQsIEF1Y3Rpb24gX2F1Y3Rpb24pIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKF9hdWN0aW9uLmR1cmF0aW9uID49IDEgbWludXRlcyk7CgogICAgICAgIHRva2VuSWRUb0F1Y3Rpb25bX3Rva2VuSWRdID0gX2F1Y3Rpb247CiAgICAgICAgCiAgICAgICAgQXVjdGlvbkNyZWF0ZWQoCiAgICAgICAgICAgIHVpbnQyNTYoX3Rva2VuSWQpLAogICAgICAgICAgICB1aW50MjU2KF9hdWN0aW9uLnN0YXJ0aW5nUHJpY2UpLAogICAgICAgICAgICB1aW50MjU2KF9hdWN0aW9uLmVuZGluZ1ByaWNlKSwKICAgICAgICAgICAgdWludDI1NihfYXVjdGlvbi5zdGFydGluZ1ByaWNlRXRoKSwKICAgICAgICAgICAgdWludDI1NihfYXVjdGlvbi5lbmRpbmdQcmljZUV0aCksCiAgICAgICAgICAgIHVpbnQyNTYoX2F1Y3Rpb24uZHVyYXRpb24pCiAgICAgICAgKTsKICAgIH0KICAgIGZ1bmN0aW9uIF9jYW5jZWxBdWN0aW9uKHVpbnQyNTYgX3Rva2VuSWQsIGFkZHJlc3MgX3NlbGxlcikgaW50ZXJuYWwgewogICAgICAgIF9yZW1vdmVBdWN0aW9uKF90b2tlbklkKTsKICAgICAgICBfdHJhbnNmZXIoX3NlbGxlciwgX3Rva2VuSWQpOwogICAgICAgIEF1Y3Rpb25DYW5jZWxsZWQoX3Rva2VuSWQpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBfb3JkZXIodWludDI1NiBfdG9rZW5JZCwgdWludDI1NiBfb3JkZXJBbW91bnQsIHVpbnQ4IGNjeSkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgQXVjdGlvbiBzdG9yYWdlIGF1Y3Rpb24gPSB0b2tlbklkVG9BdWN0aW9uW190b2tlbklkXTsKCiAgICAgICAgcmVxdWlyZShfaXNPbkF1Y3Rpb24oYXVjdGlvbikpOwoKICAgICAgICB1aW50MjU2IHByaWNlID0gX2N1cnJlbnRQcmljZShhdWN0aW9uLDAsY2N5KTsKICAgICAgICByZXF1aXJlKF9vcmRlckFtb3VudCA+PSBwcmljZSk7CgogICAgICAgIGFkZHJlc3Mgc2VsbGVyID0gYXVjdGlvbi5zZWxsZXI7CgogICAgICAgIF9yZW1vdmVBdWN0aW9uKF90b2tlbklkKTsKCiAgICAgICAgaWYgKHByaWNlID4gMCAmJiBjY3kgPT0wKSB7CiAgICAgICAgICAgIHVpbnQyNTYgYXVjdGlvbmVlckN1dCA9IF9jb21wdXRlQ3V0KHByaWNlKTsKICAgICAgICAgICAgdWludDI1NiBzZWxsZXJQcm9jZWVkcyA9IHByaWNlIC0gYXVjdGlvbmVlckN1dDsKICAgICAgICAgICAgc2VsbGVyLnRyYW5zZmVyKHNlbGxlclByb2NlZWRzKTsKICAgICAgICB9CiAgICAgICAgQXVjdGlvblN1Y2Nlc3NmdWwoX3Rva2VuSWQsIHByaWNlLGNjeSwgbXNnLnNlbmRlcik7CgogICAgICAgIHJldHVybiBwcmljZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gX3JlbW92ZUF1Y3Rpb24odWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgICAgIGRlbGV0ZSB0b2tlbklkVG9BdWN0aW9uW190b2tlbklkXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gX2lzT25BdWN0aW9uKEF1Y3Rpb24gc3RvcmFnZSBfYXVjdGlvbikgaW50ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIChfYXVjdGlvbi5zdGFydGVkQXQgPiAwKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gX2N1cnJlbnRQcmljZShBdWN0aW9uIHN0b3JhZ2UgX2F1Y3Rpb24sIHVpbnQyNTYgdGltZURlbGF5LCB1aW50OCBjY3kpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICB1aW50MjU2IHNlY29uZHNQYXNzZWQgPSAwOwogICAgICAgIGlmIChub3cgPiBfYXVjdGlvbi5zdGFydGVkQXQpIHsKICAgICAgICAgICAgc2Vjb25kc1Bhc3NlZCA9IG5vdyAtIF9hdWN0aW9uLnN0YXJ0ZWRBdCArIHRpbWVEZWxheTsKICAgICAgICB9CiAgICAgICAgaWYoY2N5ID09IDApewoJICAgICAgICByZXR1cm4gX2NvbXB1dGVDdXJyZW50UHJpY2UoCgkgICAgICAgICAgICBfYXVjdGlvbi5zdGFydGluZ1ByaWNlRXRoLAoJICAgICAgICAgICAgX2F1Y3Rpb24uZW5kaW5nUHJpY2VFdGgsCgkgICAgICAgICAgICBfYXVjdGlvbi5kdXJhdGlvbiwKCSAgICAgICAgICAgIHNlY29uZHNQYXNzZWQKCSAgICAgICAgKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHJldHVybiBfY29tcHV0ZUN1cnJlbnRQcmljZSgKICAgICAgICAgICAgX2F1Y3Rpb24uc3RhcnRpbmdQcmljZSwKICAgICAgICAgICAgX2F1Y3Rpb24uZW5kaW5nUHJpY2UsCiAgICAgICAgICAgIF9hdWN0aW9uLmR1cmF0aW9uLAogICAgICAgICAgICBzZWNvbmRzUGFzc2VkCiAgICAgICAgKTsgCiAgICAgICAgfQogICAgICAgIAogICAgfQoKICAgIGZ1bmN0aW9uIF9jb21wdXRlQ3VycmVudFByaWNlKAogICAgICAgIHVpbnQyNTYgX3N0YXJ0aW5nUHJpY2UsCiAgICAgICAgdWludDI1NiBfZW5kaW5nUHJpY2UsCiAgICAgICAgdWludDI1NiBfZHVyYXRpb24sCiAgICAgICAgdWludDI1NiBfc2Vjb25kc1Bhc3NlZAogICAgKQogICAgICAgIGludGVybmFsCiAgICAgICAgcHVyZQogICAgICAgIHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgaWYgKF9zZWNvbmRzUGFzc2VkID49IF9kdXJhdGlvbikgewogICAgICAgICAgICByZXR1cm4gX2VuZGluZ1ByaWNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGludDI1NiB0b3RhbFByaWNlQ2hhbmdlID0gaW50MjU2KF9lbmRpbmdQcmljZSkgLSBpbnQyNTYoX3N0YXJ0aW5nUHJpY2UpOwogICAgICAgICAgICAKICAgICAgICAgICAgaW50MjU2IGN1cnJlbnRQcmljZUNoYW5nZSA9IHRvdGFsUHJpY2VDaGFuZ2UgKiBpbnQyNTYoX3NlY29uZHNQYXNzZWQpIC8gaW50MjU2KF9kdXJhdGlvbik7CiAgICAgICAgICAgIAogICAgICAgICAgICBpbnQyNTYgY3VycmVudFByaWNlID0gaW50MjU2KF9zdGFydGluZ1ByaWNlKSArIGN1cnJlbnRQcmljZUNoYW5nZTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiB1aW50MjU2KGN1cnJlbnRQcmljZSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIF9jb21wdXRlQ3V0KHVpbnQyNTYgX3ByaWNlKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gX3ByaWNlICogb3duZXJDdXQgLyAxMDAwMDsKICAgIH0KCn0KCgpjb250cmFjdCBDbG9ja0F1Y3Rpb24gaXMgUGF1c2FibGUsIENsb2NrQXVjdGlvbkJhc2UgewogICAvLyBib29sIHB1YmxpYyBpc0Nsb2NrQXVjdGlvbiA9IHRydWU7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikpIHB1YmxpYyBhZGRyZXNzSW5kZXhUb0F1Y3Rpb25Db3VudDsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSkgcHVibGljIGFkZHJlc3NJbmRleFRvT3JkZXJDb3VudDsKICAgCiAgICBldmVudCBEYXlQYXNzKHVpbnQyNTYgX2RheVBhc3MsIHVpbnQyNTYgX3N0YXJ0VGltZSwgdWludDI1NiBfbm93LCB1aW50MjU2IHRpbWUgKTsKICAgIAogICAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lID0gbm93OwogICAgdWludDI1NiBwdWJsaWMgYURheSA9IDg2NDAwOwogICAgCiAgICAKICAgIAogICAgZnVuY3Rpb24gX2NhbGN1bGF0ZURheVBhc3MoKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IGRheVBhc3MpIHsKICAgICAgIGRheVBhc3MgPSAobm93IC1zdGFydFRpbWUpIC8gYURheTsKICAgICAgIERheVBhc3MoZGF5UGFzcyxzdGFydFRpbWUsbm93LChhRGF5KSk7CiAgICB9CiAgIAogICAKICAgCiAgICBmdW5jdGlvbiBDbG9ja0F1Y3Rpb24oYWRkcmVzcyBfbmZ0QWRkcmVzcywgdWludDI1NiBfY3V0KSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX2N1dCA8PSAxMDAwMCk7CiAgICAgICAgb3duZXJDdXQgPSBfY3V0OwogICAgICAgIAogICAgICAgIEVSQzcyMSBjYW5kaWRhdGVDb250cmFjdCA9IEVSQzcyMShfbmZ0QWRkcmVzcyk7CiAgICAgICAgcmVxdWlyZShjYW5kaWRhdGVDb250cmFjdC5pbXBsZW1lbnRzRVJDNzIxKCkpOwogICAgICAgIG5vbkZ1bmdpYmxlQ29udHJhY3QgPSBjYW5kaWRhdGVDb250cmFjdDsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhd0JhbGFuY2UoKSBleHRlcm5hbCB7CiAgICAgICAgYWRkcmVzcyBuZnRBZGRyZXNzID0gYWRkcmVzcyhub25GdW5naWJsZUNvbnRyYWN0KTsKCiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgbXNnLnNlbmRlciA9PSBvd25lciB8fAogICAgICAgICAgICBtc2cuc2VuZGVyID09IG5mdEFkZHJlc3MKICAgICAgICApOwogICAgICAgIG5mdEFkZHJlc3MudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVBdWN0aW9uKAogICAgICAgIHVpbnQyNTYgX3Rva2VuSWQsCiAgICAgICAgdWludDI1NiBfc3RhcnRpbmdQcmljZSwKICAgICAgICB1aW50MjU2IF9lbmRpbmdQcmljZSwKICAgICAgICB1aW50MjU2IF9zdGFydGluZ1ByaWNlRXRoLAogICAgICAgIHVpbnQyNTYgX2VuZGluZ1ByaWNlRXRoLAogICAgICAgIHVpbnQyNTYgX2R1cmF0aW9uLAogICAgICAgIGFkZHJlc3MgX3NlbGxlcgogICAgKQogICAgICAgIHB1YmxpYwogICAgICAgIHdoZW5Ob3RQYXVzZWQKICAgICAgICBjYW5CZVN0b3JlZFdpdGgxMjhCaXRzKF9zdGFydGluZ1ByaWNlKQogICAgICAgIGNhbkJlU3RvcmVkV2l0aDEyOEJpdHMoX2VuZGluZ1ByaWNlKQogICAgICAgIGNhbkJlU3RvcmVkV2l0aDY0Qml0cyhfZHVyYXRpb24pCiAgICB7CiAgICAgICAgcmVxdWlyZShfb3ducyhtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgICAgIF9lc2Nyb3cobXNnLnNlbmRlciwgX3Rva2VuSWQpOwogICAgICAgIEF1Y3Rpb24gbWVtb3J5IGF1Y3Rpb24gPSBBdWN0aW9uKAogICAgICAgICAgICBfc2VsbGVyLAogICAgICAgICAgICB1aW50MTI4KF9zdGFydGluZ1ByaWNlKSwKICAgICAgICAgICAgdWludDEyOChfZW5kaW5nUHJpY2UpLAogICAgICAgICAgICB1aW50MTI4KF9zdGFydGluZ1ByaWNlRXRoKSwKICAgICAgICAgICAgdWludDEyOChfZW5kaW5nUHJpY2VFdGgpLAogICAgICAgICAgICB1aW50NjQoX2R1cmF0aW9uKSwKICAgICAgICAgICAgdWludDY0KG5vdykKICAgICAgICApOwogICAgICAgIF9hZGRBdWN0aW9uKF90b2tlbklkLCBhdWN0aW9uKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYW5jZWxBdWN0aW9uKHVpbnQyNTYgX3Rva2VuSWQpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgQXVjdGlvbiBzdG9yYWdlIGF1Y3Rpb24gPSB0b2tlbklkVG9BdWN0aW9uW190b2tlbklkXTsKICAgICAgICByZXF1aXJlKF9pc09uQXVjdGlvbihhdWN0aW9uKSk7CiAgICAgICAgYWRkcmVzcyBzZWxsZXIgPSBhdWN0aW9uLnNlbGxlcjsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gc2VsbGVyKTsKICAgICAgICBfY2FuY2VsQXVjdGlvbihfdG9rZW5JZCwgc2VsbGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYW5jZWxBdWN0aW9uV2hlblBhdXNlZCh1aW50MjU2IF90b2tlbklkKQogICAgICAgIHdoZW5QYXVzZWQKICAgICAgICBvbmx5T3duZXIKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICBBdWN0aW9uIHN0b3JhZ2UgYXVjdGlvbiA9IHRva2VuSWRUb0F1Y3Rpb25bX3Rva2VuSWRdOwogICAgICAgIHJlcXVpcmUoX2lzT25BdWN0aW9uKGF1Y3Rpb24pKTsKICAgICAgICBfY2FuY2VsQXVjdGlvbihfdG9rZW5JZCwgYXVjdGlvbi5zZWxsZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEF1Y3Rpb24odWludDI1NiBfdG9rZW5JZCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucwogICAgKAogICAgICAgIGFkZHJlc3Mgc2VsbGVyLAogICAgICAgIHVpbnQyNTYgc3RhcnRpbmdQcmljZSwKICAgICAgICB1aW50MjU2IGVuZGluZ1ByaWNlLAogICAgICAgIHVpbnQyNTYgc3RhcnRpbmdQcmljZUV0aCwKICAgICAgICB1aW50MjU2IGVuZGluZ1ByaWNlRXRoLAogICAgICAgIHVpbnQyNTYgZHVyYXRpb24sCiAgICAgICAgdWludDI1NiBzdGFydGVkQXQKICAgICkgewogICAgICAgIEF1Y3Rpb24gc3RvcmFnZSBhdWN0aW9uID0gdG9rZW5JZFRvQXVjdGlvbltfdG9rZW5JZF07CiAgICAgICAgcmVxdWlyZShfaXNPbkF1Y3Rpb24oYXVjdGlvbikpOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIGF1Y3Rpb24uc2VsbGVyLAogICAgICAgICAgICBhdWN0aW9uLnN0YXJ0aW5nUHJpY2UsCiAgICAgICAgICAgIGF1Y3Rpb24uZW5kaW5nUHJpY2UsCiAgICAgICAgICAgIGF1Y3Rpb24uc3RhcnRpbmdQcmljZUV0aCwKICAgICAgICAgICAgYXVjdGlvbi5lbmRpbmdQcmljZUV0aCwKICAgICAgICAgICAgYXVjdGlvbi5kdXJhdGlvbiwKICAgICAgICAgICAgYXVjdGlvbi5zdGFydGVkQXQKICAgICAgICApOwogICAgfQogICAgCiAgICAgZnVuY3Rpb24gZ2V0U2VsbGVyKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMoYWRkcmVzcyBzZWxsZXIpIHsKICAgICAgICBBdWN0aW9uIHN0b3JhZ2UgYXVjdGlvbiA9IHRva2VuSWRUb0F1Y3Rpb25bX3Rva2VuSWRdOwogICAgICAgIHJlcXVpcmUoX2lzT25BdWN0aW9uKGF1Y3Rpb24pKTsKICAgICAgICByZXR1cm4gYXVjdGlvbi5zZWxsZXI7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Q3VycmVudFByaWNlKHVpbnQyNTYgX3Rva2VuSWQsdWludDggY2N5KQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50MjU2KQogICAgewogICAgICAgIEF1Y3Rpb24gc3RvcmFnZSBhdWN0aW9uID0gdG9rZW5JZFRvQXVjdGlvbltfdG9rZW5JZF07CiAgICAgICAgcmVxdWlyZShfaXNPbkF1Y3Rpb24oYXVjdGlvbikpOwogICAgICAgIHJldHVybiBfY3VycmVudFByaWNlKGF1Y3Rpb24sIDAsY2N5KTsKICAgIH0KICAgIAogICAgCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50UHJpY2UodWludDI1NiBfdG9rZW5JZCwgdWludDI1NiB0aW1lRGVsYXksdWludDggY2N5KQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50MjU2KQogICAgewogICAgICAgIEF1Y3Rpb24gc3RvcmFnZSBhdWN0aW9uID0gdG9rZW5JZFRvQXVjdGlvbltfdG9rZW5JZF07CiAgICAgICAgcmVxdWlyZShfaXNPbkF1Y3Rpb24oYXVjdGlvbikpOwogICAgICAgIHJldHVybiBfY3VycmVudFByaWNlKGF1Y3Rpb24sIHRpbWVEZWxheSxjY3kpOwogICAgfQoKfQoKCmNvbnRyYWN0IFNhbGVDbG9ja0F1Y3Rpb24gaXMgQ2xvY2tBdWN0aW9uIHsKICAgIGJvb2wgcHVibGljIGlzU2FsZUNsb2NrQXVjdGlvbiA9IHRydWU7CiAgICB1aW50MjU2IHB1YmxpYyBnZW4wU2FsZUNvdW50OwogICAgdWludDI1Nls1XSBwdWJsaWMgbGFzdEdlbjBTYWxlUHJpY2VzOwogICAgZnVuY3Rpb24gU2FsZUNsb2NrQXVjdGlvbihhZGRyZXNzIF9uZnRBZGRyLCB1aW50MjU2IF9jdXQpIHB1YmxpYwogICAgICAgIENsb2NrQXVjdGlvbihfbmZ0QWRkciwgX2N1dCkge30KICAgICAgICAKICAgIGZ1bmN0aW9uIGNyZWF0ZUF1Y3Rpb24oCiAgICAgICAgdWludDI1NiBfdG9rZW5JZCwKICAgICAgICB1aW50MjU2IF9zdGFydGluZ1ByaWNlLAogICAgICAgIHVpbnQyNTYgX2VuZGluZ1ByaWNlLAogICAgICAgIHVpbnQyNTYgX3N0YXJ0aW5nUHJpY2VFdGgsCiAgICAgICAgdWludDI1NiBfZW5kaW5nUHJpY2VFdGgsCiAgICAgICAgdWludDI1NiBfZHVyYXRpb24sCiAgICAgICAgYWRkcmVzcyBfc2VsbGVyCiAgICApCiAgICAgICAgcHVibGljCiAgICAgICAgY2FuQmVTdG9yZWRXaXRoMTI4Qml0cyhfc3RhcnRpbmdQcmljZSkKICAgICAgICBjYW5CZVN0b3JlZFdpdGgxMjhCaXRzKF9lbmRpbmdQcmljZSkKICAgICAgICBjYW5CZVN0b3JlZFdpdGgxMjhCaXRzKF9zdGFydGluZ1ByaWNlRXRoKQogICAgICAgIGNhbkJlU3RvcmVkV2l0aDEyOEJpdHMoX2VuZGluZ1ByaWNlRXRoKQogICAgICAgIGNhbkJlU3RvcmVkV2l0aDY0Qml0cyhfZHVyYXRpb24pCiAgICB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkZHJlc3Mobm9uRnVuZ2libGVDb250cmFjdCkpOwogICAgICAgIF9lc2Nyb3coX3NlbGxlciwgX3Rva2VuSWQpOwogICAgICAgIEF1Y3Rpb24gbWVtb3J5IGF1Y3Rpb24gPSBBdWN0aW9uKAogICAgICAgICAgICBfc2VsbGVyLAogICAgICAgICAgICB1aW50MTI4KF9zdGFydGluZ1ByaWNlKSwKICAgICAgICAgICAgdWludDEyOChfZW5kaW5nUHJpY2UpLAogICAgICAgICAgICB1aW50MTI4KF9zdGFydGluZ1ByaWNlRXRoKSwKICAgICAgICAgICAgdWludDEyOChfZW5kaW5nUHJpY2VFdGgpLAogICAgICAgICAgICB1aW50NjQoX2R1cmF0aW9uKSwKICAgICAgICAgICAgdWludDY0KG5vdykKICAgICAgICApOwogICAgICAgIF9hZGRBdWN0aW9uKF90b2tlbklkLCBhdWN0aW9uKTsKICAgICAgICBhZGRyZXNzSW5kZXhUb0F1Y3Rpb25Db3VudFtfc2VsbGVyXVtfY2FsY3VsYXRlRGF5UGFzcygpXSArPSAxOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBvcmRlcih1aW50MjU2IF90b2tlbklkLCB1aW50MjU2IG9yZGVyQW1vdW50ICxhZGRyZXNzIGJ1eWVyKQogICAgICAgIHB1YmxpYyByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhZGRyZXNzKG5vbkZ1bmdpYmxlQ29udHJhY3QpKTsKICAgICAgICBhZGRyZXNzIHNlbGxlciA9IHRva2VuSWRUb0F1Y3Rpb25bX3Rva2VuSWRdLnNlbGxlcjsKICAgICAgICByZXF1aXJlKHNlbGxlciAhPWFkZHJlc3Mobm9uRnVuZ2libGVDb250cmFjdCkpOyAgICAgICAgCiAgICAgICAgdWludDI1NiBwcmljZSA9ICBfb3JkZXIoX3Rva2VuSWQsICBvcmRlckFtb3VudCAsIDEgKSA7CiAgICAgICAgX3RyYW5zZmVyKGJ1eWVyLCBfdG9rZW5JZCk7CiAgICAgICAgYWRkcmVzc0luZGV4VG9PcmRlckNvdW50W2J1eWVyXVtfY2FsY3VsYXRlRGF5UGFzcygpXSArPTE7CiAgICAgICAgYm9vbCBmbGFnID0gdHJ1ZTsKICAgICAgICByZXR1cm4gZmxhZzsgICAgICAKICAgIH0KICAgIAogICAgIGZ1bmN0aW9uIG9yZGVyT25TYWxlQXVjdGlvbih1aW50MjU2IF90b2tlbklkKQogICAgICAgIHB1YmxpYwogICAgICAgIHBheWFibGUKICAgIHsKICAgICAgICBhZGRyZXNzIHNlbGxlciA9IHRva2VuSWRUb0F1Y3Rpb25bX3Rva2VuSWRdLnNlbGxlcjsKICAgICAgICB1aW50MjU2IHByaWNlID0gX29yZGVyKF90b2tlbklkLCBtc2cudmFsdWUsMCk7CiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90b2tlbklkKTsKICAgICAgICBpZiAoc2VsbGVyID09IGFkZHJlc3Mobm9uRnVuZ2libGVDb250cmFjdCkpIHsKICAgICAgICAgICAgbGFzdEdlbjBTYWxlUHJpY2VzW2dlbjBTYWxlQ291bnQgJSA1XSA9IHByaWNlOwogICAgICAgICAgICBnZW4wU2FsZUNvdW50Kys7CiAgICAgICAgICAgIG5vbkZ1bmdpYmxlQ29udHJhY3QucHJvbW9CdW4obXNnLnNlbmRlcik7CiAgICAgICAgfQogICAgICAgIGFkZHJlc3NJbmRleFRvT3JkZXJDb3VudFttc2cuc2VuZGVyXVtfY2FsY3VsYXRlRGF5UGFzcygpXSArPTE7CiAgICB9CiAgICAKCiAgICBmdW5jdGlvbiBhdmVyYWdlR2VuMFNhbGVQcmljZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHN1bSA9IDA7CiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICAgIHN1bSArPSBsYXN0R2VuMFNhbGVQcmljZXNbaV07CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdW0gLyA1OwogICAgfQoKfQ=='.
	

]
