Class {
	#name : #SRT2e2fc8569d3ba251965bf8ad85e2f55c37612718,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2e2fc8569d3ba251965bf8ad85e2f55c37612718 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7Cgpjb250cmFjdCBFUkMyMjMgewogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLy8gRVJDMjIzIGZ1bmN0aW9ucyBhbmQgZXZlbnRzCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgX3N1cHBseSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhLCBzdHJpbmcgY3VzdG9tRmFsbGJhY2spIHB1YmxpYyByZXR1cm5zIChib29sIG9rKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUsIGJ5dGVzIGluZGV4ZWQgZGF0YSk7CgogICAgLy8gRVJDMjIzIGZ1bmN0aW9ucwogICAgZnVuY3Rpb24gbmFtZSgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChzdHJpbmcgX25hbWUpOwogICAgZnVuY3Rpb24gc3ltYm9sKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHN0cmluZyBfc3ltYm9sKTsKICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscyk7CgogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgLy9mdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAvLyBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAvLyBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKTsKICAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEluY2x1ZGUgU2FmZU1hdGggTGliCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CiAgICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBNQVhfVUlOVDI1NiA9CiAgICAweEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY7CgogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgaWYgKHggPiBNQVhfVUlOVDI1NiAtIHkpCiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIHJldHVybiB4ICsgeTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBpZiAoeCA8IHkpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB4IC0geTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBpZiAoeSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICBpZiAoeCA+IE1BWF9VSU5UMjU2IC8geSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHggKiB5OwogICAgfQp9CgovKgogKiBDb250cmFjdCB0aGF0IGlzIHdvcmtpbmcgd2l0aCBFUkMyMjMgdG9rZW5zCiAqLwogY29udHJhY3QgQ29udHJhY3RSZWNlaXZlciB7CgogICAgc3RydWN0IFRLTiB7CiAgICAgICAgYWRkcmVzcyBzZW5kZXI7CiAgICAgICAgdWludCB2YWx1ZTsKICAgICAgICBieXRlcyBkYXRhOwogICAgICAgIGJ5dGVzNCBzaWc7CiAgICB9CgogICAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHB1YmxpYyB7CiAgICAgIFRLTiBtZW1vcnkgdGtuOwogICAgICB0a24uc2VuZGVyID0gX2Zyb207CiAgICAgIHRrbi52YWx1ZSA9IF92YWx1ZTsKICAgICAgdGtuLmRhdGEgPSBfZGF0YTsKICAgICAgdWludDMyIHUgPSB1aW50MzIoX2RhdGFbM10pICsgKHVpbnQzMihfZGF0YVsyXSkgPDwgOCkgKyAodWludDMyKF9kYXRhWzFdKSA8PCAxNikgKyAodWludDMyKF9kYXRhWzBdKSA8PCAyNCk7CiAgICAgIHRrbi5zaWcgPSBieXRlczQodSk7CgogICAgICAvKiB0a24gdmFyaWFibGUgaXMgYW5hbG9ndWUgb2YgbXNnIHZhcmlhYmxlIG9mIEV0aGVyIHRyYW5zYWN0aW9uCiAgICAgICogIHRrbi5zZW5kZXIgaXMgcGVyc29uIHdobyBpbml0aWF0ZWQgdGhpcyB0b2tlbiB0cmFuc2FjdGlvbiAgIChhbmFsb2d1ZSBvZiBtc2cuc2VuZGVyKQogICAgICAqICB0a24udmFsdWUgdGhlIG51bWJlciBvZiB0b2tlbnMgdGhhdCB3ZXJlIHNlbnQgICAoYW5hbG9ndWUgb2YgbXNnLnZhbHVlKQogICAgICAqICB0a24uZGF0YSBpcyBkYXRhIG9mIHRva2VuIHRyYW5zYWN0aW9uICAgKGFuYWxvZ3VlIG9mIG1zZy5kYXRhKQogICAgICAqICB0a24uc2lnIGlzIDQgYnl0ZXMgc2lnbmF0dXJlIG9mIGZ1bmN0aW9uCiAgICAgICogIGlmIGRhdGEgb2YgdG9rZW4gdHJhbnNhY3Rpb24gaXMgYSBmdW5jdGlvbiBleGVjdXRpb24KICAgICAgKi8KICAgIH0KfQoKLyoKICogQ0hOIHRva2VuIHdpdGggRVJDMjIzIEV4dGVuc2lvbnMKICovCmNvbnRyYWN0IENITiBpcyBFUkMyMjMsIFNhZmVNYXRoIHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiQ29sYW4gQ29pbiI7CgogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiQ29sYW4iOwoKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDg7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSAxMDAwMDAwMDAwMCAqIDEwKio4OwoKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgYWRtaW47CgogIC8vICBib29sIHB1YmxpYyB1bmxvY2tlZCA9IGZhbHNlOwoKICAgIGJvb2wgcHVibGljIHRva2VuQ3JlYXRlZCA9IGZhbHNlOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIAogICAgZnVuY3Rpb24gYWRtaW5lZCgpewogICBhZG1pbiA9IG1zZy5zZW5kZXI7CiAgfQogIAoKICAgIC8vIEluaXRpYWxpemUgdG8gaGF2ZSBvd25lciBoYXZlIDEwMCwwMDAsMDAwLDAwMCBDSE4gb24gY29udHJhY3QgY3JlYXRpb24KICAgIC8vIENvbnN0cnVjdG9yIGlzIGNhbGxlZCBvbmx5IG9uY2UgYW5kIGNhbiBub3QgYmUgY2FsbGVkIGFnYWluIChFdGhlcmV1bSBTb2xpZGl0eSBzcGVjaWZpY2F0aW9uKQogICAgZnVuY3Rpb24gQ0hOKCkgcHVibGljIHsKCiAgICAgIAogICAgICAgIC8vIEVuc3VyZSB0b2tlbiBnZXRzIGNyZWF0ZWQgb25jZSBvbmx5CiAgICAgICAgcmVxdWlyZSh0b2tlbkNyZWF0ZWQgPT0gZmFsc2UpOwogICAgICAgIHRva2VuQ3JlYXRlZCA9IHRydWU7CgogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSB0b3RhbFN1cHBseTsKCiAgICAgICAgLy8gRmluYWwgc2FuaXR5IGNoZWNrIHRvIGVuc3VyZSBvd25lciBiYWxhbmNlIGlzIGdyZWF0ZXIgdGhhbiB6ZXJvCiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tvd25lcl0gPiAwKTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQogICAgIG1vZGlmaWVyIG9ubHlBZG1pbigpewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluKSA7CiAgICBfOwogIH0KICBmdW5jdGlvbiB0cmFuc2ZlckFkbWluc2hpcChhZGRyZXNzIG5ld0FkbWluKSBvbmx5QWRtaW4gewogICAgIAogICAgYWRtaW4gPSBuZXdBZG1pbjsKICB9CiAgCiAgCgogICAgLy8gRnVuY3Rpb24gdG8gZGlzdHJpYnV0ZSB0b2tlbnMgdG8gbGlzdCBvZiBhZGRyZXNzZXMgYnkgdGhlIHByb3ZpZGVkIGFtb3VudAogICAgLy8gVmVyaWZ5IGFuZCByZXF1aXJlIHRoYXQ6CiAgICAvLyAtIEJhbGFuY2Ugb2Ygb3duZXIgY2Fubm90IGJlIG5lZ2F0aXZlCiAgICAvLyAtIEFsbCB0cmFuc2ZlcnMgY2FuIGJlIGZ1bGZpbGxlZCB3aXRoIHJlbWFpbmluZyBvd25lciBiYWxhbmNlCiAgICAvLyAtIE5vIG5ldyB0b2tlbnMgY2FuIGV2ZXIgYmUgbWludGVkIGV4Y2VwdCBvcmlnaW5hbGx5IGNyZWF0ZWQgMTAwLDAwMCwwMDAsMDAwCiAgICBmdW5jdGlvbiBkaXN0cmlidXRlQWlyZHJvcChhZGRyZXNzW10gYWRkcmVzc2VzLCB1aW50MjU2IGFtb3VudCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgLy8gT25seSBhbGxvdyB1bmRyb3Agd2hpbGUgdG9rZW4gaXMgbG9ja2VkCiAgICAgICAgLy8gQWZ0ZXIgdG9rZW4gaXMgdW5sb2NrZWQsIHRoaXMgbWV0aG9kIGJlY29tZXMgcGVybWFuZW50bHkgZGlzYWJsZWQKICAgICAgICAvL3JlcXVpcmUodW5sb2NrZWQpOwoKICAgICAgICAvLyBBbW91bnQgaXMgaW4gV2VpLCBjb252ZXJ0IHRvIENITiBhbW91bnQgaW4gOCBkZWNpbWFsIHBsYWNlcwogICAgICAgIHVpbnQyNTYgbm9ybWFsaXplZEFtb3VudCA9IGFtb3VudCAqIDEwKio4OwogICAgICAgIC8vIE9ubHkgcHJvY2VlZCBpZiB0aGVyZSBhcmUgZW5vdWdoIHRva2VucyB0byBiZSBkaXN0cmlidXRlZCB0byBhbGwgYWRkcmVzc2VzCiAgICAgICAgLy8gTmV2ZXIgYWxsb3cgYmFsYW5jZSBvZiBvd25lciB0byBiZWNvbWUgbmVnYXRpdmUKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW293bmVyXSA+PSBzYWZlTXVsKGFkZHJlc3Nlcy5sZW5ndGgsIG5vcm1hbGl6ZWRBbW91bnQpKTsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBhZGRyZXNzZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gc2FmZVN1YihiYWxhbmNlT2Yob3duZXIpLCBub3JtYWxpemVkQW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZXNbYWRkcmVzc2VzW2ldXSA9IHNhZmVBZGQoYmFsYW5jZU9mKGFkZHJlc3Nlc1tpXSksIG5vcm1hbGl6ZWRBbW91bnQpOwogICAgICAgICAgICBUcmFuc2Zlcihvd25lciwgYWRkcmVzc2VzW2ldLCBub3JtYWxpemVkQW1vdW50KTsKICAgICAgICB9CiAgICB9CgogICAgLy8gRnVuY3Rpb24gdG8gYWNjZXNzIG5hbWUgb2YgdG9rZW4gLnNoYQogICAgZnVuY3Rpb24gbmFtZSgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChzdHJpbmcgX25hbWUpIHsKICAgICAgICByZXR1cm4gbmFtZTsKICAgIH0KICAgIC8vIEZ1bmN0aW9uIHRvIGFjY2VzcyBzeW1ib2wgb2YgdG9rZW4gLgogICAgZnVuY3Rpb24gc3ltYm9sKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHN0cmluZyBfc3ltYm9sKSB7CiAgICAgICAgcmV0dXJuIHN5bWJvbDsKICAgIH0KICAgIC8vIEZ1bmN0aW9uIHRvIGFjY2VzcyBkZWNpbWFscyBvZiB0b2tlbiAuCiAgICBmdW5jdGlvbiBkZWNpbWFscygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50OCBfZGVjaW1hbHMpIHsKICAgICAgICByZXR1cm4gZGVjaW1hbHM7CiAgICB9CiAgICAvLyBGdW5jdGlvbiB0byBhY2Nlc3MgdG90YWwgc3VwcGx5IG9mIHRva2VucyAuCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IF90b3RhbFN1cHBseSkgewogICAgICAgIHJldHVybiB0b3RhbFN1cHBseTsKICAgIH0KCiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgdXNlciBvciBhbm90aGVyIGNvbnRyYWN0IHdhbnRzIHRvIHRyYW5zZmVyIGZ1bmRzIC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEsIHN0cmluZyBfY3VzdG9tX2ZhbGxiYWNrKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIC8vIE9ubHkgYWxsb3cgdHJhbnNmZXIgb25jZSB1bmxvY2tlZAogICAgICAgIC8vIE9uY2UgaXQgaXMgdW5sb2NrZWQsIGl0IGlzIHVubG9ja2VkIGZvcmV2ZXIgYW5kIG5vIG9uZSBjYW4gbG9jayBhZ2FpbgogICAgICAgLy8gcmVxdWlyZSh1bmxvY2tlZCk7CgogICAgICAgIGlmIChpc0NvbnRyYWN0KF90bykpIHsKICAgICAgICAgICAgaWYgKGJhbGFuY2VPZihtc2cuc2VuZGVyKSA8IF92YWx1ZSkgewogICAgICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VPZihtc2cuc2VuZGVyKSwgX3ZhbHVlKTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZU9mKF90byksIF92YWx1ZSk7CiAgICAgICAgICAgIENvbnRyYWN0UmVjZWl2ZXIgcmVjZWl2ZXIgPSBDb250cmFjdFJlY2VpdmVyKF90byk7CiAgICAgICAgICAgIHJlY2VpdmVyLmNhbGwudmFsdWUoMCkoYnl0ZXM0KHNoYTMoX2N1c3RvbV9mYWxsYmFjaykpLCBtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9BZGRyZXNzKF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSB1c2VyIG9yIGFub3RoZXIgY29udHJhY3Qgd2FudHMgdG8gdHJhbnNmZXIgZnVuZHMgLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgLy8gT25seSBhbGxvdyB0cmFuc2ZlciBvbmNlIHVubG9ja2VkCiAgICAgICAgLy8gT25jZSBpdCBpcyB1bmxvY2tlZCwgaXQgaXMgdW5sb2NrZWQgZm9yZXZlciBhbmQgbm8gb25lIGNhbiBsb2NrIGFnYWluCiAgICAgICAvLyByZXF1aXJlKHVubG9ja2VkKTsKCiAgICAgICAgaWYgKGlzQ29udHJhY3QoX3RvKSkgewogICAgICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0NvbnRyYWN0KF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9BZGRyZXNzKF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgfQogICAgfQogICAgCgogICAgLy8gU3RhbmRhcmQgZnVuY3Rpb24gdHJhbnNmZXIgc2ltaWxhciB0byBFUkMyMjMgdHJhbnNmZXIgd2l0aCBubyBfZGF0YSAuCiAgICAvLyBBZGRlZCBkdWUgdG8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgcmVhc29ucyAuCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgLy8gT25seSBhbGxvdyB0cmFuc2ZlciBvbmNlIHVubG9ja2VkCiAgICAgICAgLy8gT25jZSBpdCBpcyB1bmxvY2tlZCwgaXQgaXMgdW5sb2NrZWQgZm9yZXZlciBhbmQgbm8gb25lIGNhbiBsb2NrIGFnYWluCiAgICAgICAgLy9yZXF1aXJlKHVubG9ja2VkKTsKCiAgICAgICAgLy9zdGFuZGFyZCBmdW5jdGlvbiB0cmFuc2ZlciBzaW1pbGFyIHRvIEVSQzIyMyB0cmFuc2ZlciB3aXRoIG5vIF9kYXRhCiAgICAgICAgLy9hZGRlZCBkdWUgdG8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgcmVhc29ucwogICAgICAgIGJ5dGVzIG1lbW9yeSBlbXB0eTsKICAgICAgICBpZiAoaXNDb250cmFjdChfdG8pKSB7CiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlclRvQ29udHJhY3QoX3RvLCBfdmFsdWUsIGVtcHR5KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIGVtcHR5KTsKICAgICAgICB9CiAgICB9CgogICAgLy8gYXNzZW1ibGUgdGhlIGdpdmVuIGFkZHJlc3MgYnl0ZWNvZGUuIElmIGJ5dGVjb2RlIGV4aXN0cyB0aGVuIHRoZSBfYWRkciBpcyBhIGNvbnRyYWN0LgogICAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBwcml2YXRlIHJldHVybnMgKGJvb2wgaXNfY29udHJhY3QpIHsKICAgICAgICB1aW50IGxlbmd0aDsKICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgIC8vcmV0cmlldmUgdGhlIHNpemUgb2YgdGhlIGNvZGUgb24gdGFyZ2V0IGFkZHJlc3MsIHRoaXMgbmVlZHMgYXNzZW1ibHkKICAgICAgICAgICAgbGVuZ3RoIDo9IGV4dGNvZGVzaXplKF9hZGRyKQogICAgICAgIH0KICAgICAgICByZXR1cm4gKGxlbmd0aCA+IDApOwogICAgfQoKICAgIC8vIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gdHJhbnNhY3Rpb24gdGFyZ2V0IGlzIGFuIGFkZHJlc3MKICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9BZGRyZXNzKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VPZihtc2cuc2VuZGVyKSA8IF92YWx1ZSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VPZihtc2cuc2VuZGVyKSwgX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlT2YoX3RvKSwgX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCgogICAgLy8gZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiB0cmFuc2FjdGlvbiB0YXJnZXQgaXMgYSBjb250cmFjdAogICAgZnVuY3Rpb24gdHJhbnNmZXJUb0NvbnRyYWN0KGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VPZihtc2cuc2VuZGVyKSA8IF92YWx1ZSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VPZihtc2cuc2VuZGVyKSwgX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlT2YoX3RvKSwgX3ZhbHVlKTsKICAgICAgICBDb250cmFjdFJlY2VpdmVyIHJlY2VpdmVyID0gQ29udHJhY3RSZWNlaXZlcihfdG8pOwogICAgICAgIHJlY2VpdmVyLnRva2VuRmFsbGJhY2sobXNnLnNlbmRlciwgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBHZXQgYmFsYW5jZSBvZiB0aGUgYWRkcmVzcyBwcm92aWRlZAogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgIC8vIENyZWF0b3IvT3duZXIgY2FuIHVubG9ja2VkIGl0IG9uY2UgYW5kIGl0IGNhbiBuZXZlciBiZSBsb2NrZWQgYWdhaW4KICAgICAvLyBVc2UgYWZ0ZXIgYWlyZHJvcCBpcyBjb21wbGV0ZQogICAvKiBmdW5jdGlvbiB1bmxvY2tGb3JldmVyKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgdW5sb2NrZWQgPSB0cnVlOwogICAgfSovCgogICAgLy8gQWxsb3cgdHJhbnNmZXJzIGlmIHRoZSBvd25lciBwcm92aWRlZCBhbiBhbGxvd2FuY2UKICAgIC8vIFByZXZlbnQgZnJvbSBhbnkgdHJhbnNmZXJzIGlmIHRva2VuIGlzIG5vdCB5ZXQgdW5sb2NrZWQKICAgIC8vIFVzZSBTYWZlTWF0aCBmb3IgdGhlIG1haW4gbG9naWMKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvLyBPbmx5IGFsbG93IHRyYW5zZmVyIG9uY2UgdW5sb2NrZWQKICAgICAgICAvLyBPbmNlIGl0IGlzIHVubG9ja2VkLCBpdCBpcyB1bmxvY2tlZCBmb3JldmVyIGFuZCBubyBvbmUgY2FuIGxvY2sgYWdhaW4KICAgICAgICAvL3JlcXVpcmUodW5sb2NrZWQpOwogICAgICAgIC8vIFByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgICAgICByZXF1aXJlKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKTsKICAgICAgICB1aW50MjU2IGFsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2FuY2UgPj0gX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlT2YoX3RvKSwgX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VPZihfZnJvbSksIF92YWx1ZSk7CiAgICAgICAgaWYgKGFsbG93YW5jZSA8IE1BWF9VSU5UMjU2KSB7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gc2FmZVN1YihhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgICB9CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIG1pbnRUb2tlbihhZGRyZXNzIHRhcmdldCwgdWludDI1NiBtaW50ZWRBbW91bnQpIG9ubHlPd25lcnsKICAgIGJhbGFuY2VzW3RhcmdldF0gKz0gbWludGVkQW1vdW50OwogICAgdG90YWxTdXBwbHkgKz0gbWludGVkQW1vdW50OwogICAgVHJhbnNmZXIoMCwgdGhpcywgbWludGVkQW1vdW50KTsKICAgIFRyYW5zZmVyKHRoaXMsIHRhcmdldCwgbWludGVkQW1vdW50KTsKICB9CiAgCiAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsgICAKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgCiAgICAgICAgdG90YWxTdXBwbHkgLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICBCdXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogCn0='.
	

]
