Class {
	#name : #SRT88121b326433adce147b5cccaf47ee08e8776e37,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT88121b326433adce147b5cccaf47ee08e8776e37 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgoKCgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKCgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgoKCgoKY29udHJhY3QgRVJDMjAgewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwp9CmNvbnRyYWN0IEF0aFRva2VuSW50ZXJmYWNlIGlzIEVSQzIwewoKICBmdW5jdGlvbiBkZWxpdmVyeSggYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCApIHB1YmxpYyByZXR1cm5zKCBib29sICk7CiAgZnVuY3Rpb24gYWZ0ZXJJY28oIHVpbnQyNTYgX3JlZGVtcHRpb25QcmljZSApIHB1YmxpYyAgcmV0dXJucyggYm9vbCApOwogIGZ1bmN0aW9uIGN1cnJlbnRCYWxhbmNlKCkgcHVibGljIHJldHVybnMoIHVpbnQyNTYgKTsKICAKfQoKCgoKCgpjb250cmFjdCBDcm93ZHNhbGUgaXMgT3duYWJsZXsKICAgIAogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICAKICAgIGJvb2wgX2luaXRpYWxpemUgPSBmYWxzZTsKICAgIAogICAgQXRoVG9rZW5JbnRlcmZhY2UgdG9rZW47CgogICAgZW51bSBDcm93ZHNhbGVTdGF0ZXMgeyBEaXNhYmxlZCwgUHJlc2FsZSwgSUNPMSwgSUNPMiwgSUNPMywgSUNPNCwgRmluaXNoZWQgfQogICAgCiAgICB1aW50MjU2IHB1YmxpYyBwcmVzYWxlICAgICAgICAgICAgICAgICAgPSA3NTAwMDAgIGV0aGVyOwogICAgdWludDI1NiBwdWJsaWMgYm91bnR5ICAgICAgICAgICAgICAgICAgID0gNTAwMDAwICBldGhlcjsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHByaWNlICAgICAgICAgICA9IDAuMDAwMjQgZXRoZXI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0aHJlc2hvbGQgICAgICAgPSA1MDAwMCBldGhlcjsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IG1pbiAgICAgICAgICAgICA9IHByaWNlICogNTAwOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgaGFyZGNhcCAgICAgICAgID0gMTAwMCBldGhlcjsgCiAgICB1aW50MjU2IHB1YmxpYyAgICAgICAgICB0b3RhbEV0aCAgICAgICAgPSAwOwogICAgCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBhZmZpbGlhdFRocmVzaG9sZDEgPSAxICogbWluOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgYWZmaWxpYXRUaHJlc2hvbGQyID0gMTAgKiBtaW47CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBhZmZpbGlhdFRocmVzaG9sZDMgPSA1MCAqIG1pbjsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGFmZmlsaWF0VGhyZXNob2xkNCA9IDEwMCAqIG1pbjsKICAgIAogICAgdWludDI1NiBwdWJsaWMgaWNvVGltZVN0YXJ0ICAgICAgICAgID0gMDsKICAgIHVpbnQyNTYgcHVibGljIElDTzFQZXJpb2QgICAgICAgICAgICA9IDEgZGF5czsKICAgIHVpbnQyNTYgcHVibGljIElDTzJQZXJpb2QgICAgICAgICAgICA9IDcgZGF5cyArIElDTzFQZXJpb2Q7CiAgICB1aW50MjU2IHB1YmxpYyBJQ08zUGVyaW9kICAgICAgICAgICAgPSAxMCBkYXlzICsgSUNPMlBlcmlvZDsKICAgIHVpbnQyNTYgcHVibGljIElDTzRQZXJpb2QgICAgICAgICAgICA9IDEyIGRheXMgKyBJQ08zUGVyaW9kOwogICAgCiAgCiAgICAKICAgIGFkZHJlc3NbXSBvd25lcnM7CiAgICAKICAgIAogICAgQ3Jvd2RzYWxlU3RhdGVzIHB1YmxpYyBDcm93ZHNhbGVTdGF0ZSA9IENyb3dkc2FsZVN0YXRlcy5EaXNhYmxlZDsKICAgIAogICAgbW9kaWZpZXIgaWNvQWN0aXZlIHsKICAgICAgICByZXF1aXJlKCAKICAgICAgICAgICAgICAgZ2V0Q3Jvd2RzYWxlU3RhdGUoKSA9PSBDcm93ZHNhbGVTdGF0ZXMuUHJlc2FsZSAKICAgICAgICAgICAgfHwgZ2V0Q3Jvd2RzYWxlU3RhdGUoKSA9PSBDcm93ZHNhbGVTdGF0ZXMuSUNPMSAKICAgICAgICAgICAgfHwgZ2V0Q3Jvd2RzYWxlU3RhdGUoKSA9PSBDcm93ZHNhbGVTdGF0ZXMuSUNPMiAKICAgICAgICAgICAgfHwgZ2V0Q3Jvd2RzYWxlU3RhdGUoKSA9PSBDcm93ZHNhbGVTdGF0ZXMuSUNPMwogICAgICAgICAgICB8fCBnZXRDcm93ZHNhbGVTdGF0ZSgpID09IENyb3dkc2FsZVN0YXRlcy5JQ080CiAgICAgICAgICAgICk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgRmluaXNoZWQgewogICAgICAgIHJlcXVpcmUoIGdldENyb3dkc2FsZVN0YXRlKCkgPT0gQ3Jvd2RzYWxlU3RhdGVzLkZpbmlzaGVkICk7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIG5vdEZpbmlzaGVkIHsKICAgICAgICByZXF1aXJlKCBnZXRDcm93ZHNhbGVTdGF0ZSgpICE9IENyb3dkc2FsZVN0YXRlcy5GaW5pc2hlZCApOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIEluaXRpYWxpemVkIHsKICAgICAgICByZXF1aXJlKCBfaW5pdGlhbGl6ZSApOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIAogICAgCiAgICBldmVudCBOZXdJbnZlc3RvciggYWRkcmVzcywgdWludDI1NiApOwogICAgZXZlbnQgTmV3UmVmZXJyZXIoIGFkZHJlc3MsIHVpbnQyNTYgKTsKICAgIGV2ZW50IFJlZmVycmFsKCBhZGRyZXNzLCBhZGRyZXNzLCB1aW50MjU2LCB1aW50MjU2LCB1aW50MjU2ICk7CiAgICBldmVudCBCb3VudHkoIGFkZHJlc3MsIHVpbnQyNTYgKTsKICAgIGV2ZW50IFN3YXAoIGFkZHJlc3MsIGFkZHJlc3MsIHVpbnQyNTYgKTsKICAgIGV2ZW50IE5ld1N3YXBUb2tlbiggYWRkcmVzcyApOwogICAgZXZlbnQgRGVsaXZlcnkoIGFkZHJlc3MsIHVpbnQyNTYgKTsKICAgIAogICAgCiAgICAKICAgIG1hcHBpbmcoIGFkZHJlc3MgPT4gdWludDI1NiApIGludmVzdG9yc1RvdGFsQmFsYW5jZXM7CiAgICBtYXBwaW5nKCBhZGRyZXNzID0+IHVpbnQyNTYgKSBpbnZlc3RvcnNTdG9jazsKICAgIG1hcHBpbmcoIGFkZHJlc3MgPT4gYm9vbCApIGludmVzdG9yc0NoZWNrOwogICAgYWRkcmVzc1tdIHB1YmxpYyBpbnZlc3RvcnM7CiAgICAKICAgIAogICAgCiAgICBtYXBwaW5nKCBhZGRyZXNzID0+IGJvb2wgKSByZWZlcnJlcnM7CiAgICBhZGRyZXNzW10gcHVibGljIHJlZmVycmVyc0xpc3Q7CiAgICAKICAgIAogICAgCiAgICAKICAgIAogICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSggYWRkcmVzcyBfYSwgYWRkcmVzc1tdIF9vd25lcnMgKSBwdWJsaWMgcmV0dXJucyggYm9vbCApCiAgICB7CiAgICAgICAgcmVxdWlyZSggX2EgIT0gYWRkcmVzcygwKSAmJiBfb3duZXJzLmxlbmd0aCA9PSAyICYmIF9vd25lcnNbMF0gIT0gYWRkcmVzcygwKSAmJiBfb3duZXJzWzFdICE9IGFkZHJlc3MoMCkgKTsKICAgICAgICAKICAgICAgICAKICAgICAgICB0b2tlbiA9IEF0aFRva2VuSW50ZXJmYWNlKCBfYSApOwogICAgICAgIG93bmVycyA9IF9vd25lcnM7CiAgICAgICAgX2luaXRpYWxpemUgPSB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRPd25lcnModWludDggX2kpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKCBhZGRyZXNzICkKICAgIHsKICAgICAgICByZXR1cm4gb3duZXJzW19pXTsKICAgIH0KICAgIAogICAKICAgIAogICAgZnVuY3Rpb24gcmVmZXJyZXJzQ291bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyggdWludDI1NiApCiAgICB7CiAgICAgICAgcmV0dXJuIHJlZmVycmVyc0xpc3QubGVuZ3RoOwogICAgfQogICAgCiAgICAKICAgIAogICAgZnVuY3Rpb24gcmVnUmVmZXJyZXIoIGFkZHJlc3MgX2EgKSBwdWJsaWMgb25seU93bmVyIEluaXRpYWxpemVkIHJldHVybnMoIGJvb2wgKQogICAgewogICAgICAgIGlmKCByZWZlcnJlcnNbX2FdICE9IHRydWUgKSB7CiAgICAgICAgICAgIAogICAgICAgICAgICByZWZlcnJlcnNbX2FdID0gdHJ1ZTsKICAgICAgICAgICAgcmVmZXJyZXJzTGlzdC5wdXNoKCBfYSApOwogICAgICAgICAgICAKICAgICAgICAgICAgTmV3UmVmZXJyZXIoIF9hLCBub3cgKTsKICAgICAgICAgICAgCiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gcmVnUmVmZXJyZXJzKCBhZGRyZXNzW10gX2EgKSBwdWJsaWMgb25seU93bmVyIEluaXRpYWxpemVkIHJldHVybnMoIGJvb2wgKQogICAgewogICAgICAgIGZvciggdWludDI1NiBpID0gMDsgaSA8PSBfYS5sZW5ndGggLSAxOyBpKysgKXsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCByZWZlcnJlcnNbX2FbaV1dICE9IHRydWUgKSB7CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmVmZXJyZXJzW19hW2ldXSA9IHRydWU7CiAgICAgICAgICAgICAgICByZWZlcnJlcnNMaXN0LnB1c2goIF9hW2ldICk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIE5ld1JlZmVycmVyKCBfYVtpXSwgbm93ICk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgCiAgICAKICAgIGZ1bmN0aW9uIHJlZmVycmFsQm9udXNDYWxjdWxhdGUoIHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBfYW1vdW50VG9rZW5zICkgcHVibGljIHB1cmUgcmV0dXJucyggdWludDI1NiApCiAgICB7CiAgICAgICAgdWludDI1NiBhbW91bnQgPSAwOwogICAgICAgIAogICAgICAgIGlmKCBfYW1vdW50IDwgYWZmaWxpYXRUaHJlc2hvbGQyICApICBhbW91bnQgPSAgX2Ftb3VudFRva2Vucy5tdWwoIDEgKS5kaXYoIDEwMCApOwogICAgICAgIGlmKCBfYW1vdW50IDwgYWZmaWxpYXRUaHJlc2hvbGQzICApICBhbW91bnQgPSAgX2Ftb3VudFRva2Vucy5tdWwoIDMgKS5kaXYoIDEwMCApOwogICAgICAgIGlmKCBfYW1vdW50IDwgYWZmaWxpYXRUaHJlc2hvbGQ0ICApICBhbW91bnQgPSAgX2Ftb3VudFRva2Vucy5tdWwoIDcgKS5kaXYoIDEwMCApOwogICAgICAgIGlmKCBfYW1vdW50ID49IGFmZmlsaWF0VGhyZXNob2xkNCAgKSBhbW91bnQgPSAgX2Ftb3VudFRva2Vucy5tdWwoIDEwICkuZGl2KCAxMDAgKTsKICAgICAgICAKICAgICAgICByZXR1cm4gYW1vdW50OwogICAgfQogICAgCiAgICBmdW5jdGlvbiByZWZlcnJlckJvbnVzQ2FsY3VsYXRlKCB1aW50MjU2IF9hbW91bnQgKSBwdWJsaWMgcHVyZSByZXR1cm5zKCB1aW50MjU2ICkKICAgIHsKICAgICAgICB1aW50MjU2IGFtb3VudCA9IDA7CiAgICAgICAgCiAgICAgICAgaWYoIF9hbW91bnQgPCBhZmZpbGlhdFRocmVzaG9sZDIgICkgIGFtb3VudCA9ICBfYW1vdW50Lm11bCggMSApLmRpdiggMTAwICk7CiAgICAgICAgaWYoIF9hbW91bnQgPCBhZmZpbGlhdFRocmVzaG9sZDMgICkgIGFtb3VudCA9ICBfYW1vdW50Lm11bCggMyApLmRpdiggMTAwICk7CiAgICAgICAgaWYoIF9hbW91bnQgPCBhZmZpbGlhdFRocmVzaG9sZDQgICkgIGFtb3VudCA9ICBfYW1vdW50Lm11bCggNyApLmRpdiggMTAwICk7CiAgICAgICAgaWYoIF9hbW91bnQgPj0gYWZmaWxpYXRUaHJlc2hvbGQ0ICApIGFtb3VudCA9ICBfYW1vdW50Lm11bCggMTAgKS5kaXYoIDEwMCApOwogICAgICAgIAogICAgICAgIHJldHVybiBhbW91bnQ7CiAgICB9CiAgICAKICAgIAogICAgZnVuY3Rpb24gcmVkZW1wdGlvblByaWNlQ2FsY3VsYXRlKCB1aW50MjU2IF9hdGggKSBwdWJsaWMgcHVyZSByZXR1cm5zKCB1aW50MjU2ICkKICAgIHsKICAgICAgICBpZiggX2F0aCA+PSAzMzMzMzMzIGV0aGVyICkgcmV0dXJuIHByaWNlLm11bCggMTUwICkuZGl2KCAxMDAgKTsKICAgICAgICBpZiggX2F0aCA+PSAyOTE3Nzc3IGV0aGVyICkgcmV0dXJuIHByaWNlLm11bCggMTQ1ICkuZGl2KCAxMDAgKTsKICAgICAgICBpZiggX2F0aCA+PSAyNTAwMDAwIGV0aGVyICkgcmV0dXJuIHByaWNlLm11bCggMTQwICkuZGl2KCAxMDAgKTsKICAgICAgICBpZiggX2F0aCA+PSAyMDgzMzMzIGV0aGVyICkgcmV0dXJuIHByaWNlLm11bCggMTM1ICkuZGl2KCAxMDAgKTsKICAgICAgICBpZiggX2F0aCA+PSAxNzAwMDAwIGV0aGVyICkgcmV0dXJuIHByaWNlLm11bCggMTMwICkuZGl2KCAxMDAgKTsKICAgICAgICBpZiggX2F0aCA+PSAxMjUwMDAwIGV0aGVyICkgcmV0dXJuIHByaWNlLm11bCggMTI1ICkuZGl2KCAxMDAgKTsgIAogICAgICAgIAogICAgICAgIHJldHVybiBwcmljZTsKICAgIH0KICAgIAogICAKICAgIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUKICAgIHsKICAgICAgICBidXkoIGFkZHJlc3MoMCkgKTsKICAgIH0KICAgIAoKICAgIAogICAgZnVuY3Rpb24gYnV5KCBhZGRyZXNzIF9yZWZlcnJlciApIHB1YmxpYyBwYXlhYmxlIGljb0FjdGl2ZSBJbml0aWFsaXplZAogICAgewogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICByZXF1aXJlKCBtc2cudmFsdWUgPj0gbWluICk7CiAgICAgIAoKICAgICAgdWludDI1NiBfYW1vdW50ID0gY3Jvd2RzYWxlQm9udXMoIG1zZy52YWx1ZS5kaXYoIHByaWNlICkgKiAxIGV0aGVyICk7CiAgICAgIHVpbnQyNTYgdG9SZWZlcnJlciA9IDA7CiAgICAgIAogICAgICBpZiggcmVmZXJyZXJzW19yZWZlcnJlcl0gKXsKICAgICAgICAgIAogICAgICAgIHRvUmVmZXJyZXIgPSByZWZlcnJlckJvbnVzQ2FsY3VsYXRlKCBtc2cudmFsdWUgKTsKICAgICAgICBfcmVmZXJyZXIudHJhbnNmZXIoIHRvUmVmZXJyZXIgKTsKICAgICAgICBfYW1vdW50ID0gX2Ftb3VudC5hZGQoIHJlZmVycmFsQm9udXNDYWxjdWxhdGUoIG1zZy52YWx1ZSwgX2Ftb3VudCApICk7CiAgICAgICAgCiAgICAgICAgUmVmZXJyYWwoIF9yZWZlcnJlciwgbXNnLnNlbmRlciwgbXNnLnZhbHVlLCBfYW1vdW50LCBub3cgKTsKICAgICAgICAKICAgICAgfQogICAgICAKICAgICAgCiAgICAgIAogICAgICAgCiAgICAgICAKICAgICAgdG9rZW4uZGVsaXZlcnkoIG1zZy5zZW5kZXIsIF9hbW91bnQgKTsKICAgICAgdG90YWxFdGggPSB0b3RhbEV0aC5hZGQoIG1zZy52YWx1ZSApOwogICAgICAKICAgICAgRGVsaXZlcnkoIG1zZy5zZW5kZXIsIF9hbW91bnQgKTsKICAgICAgCiAgICAgICAKICAgICAgICAKICAgICAgaWYoIGdldENyb3dkc2FsZVN0YXRlKCkgPT0gQ3Jvd2RzYWxlU3RhdGVzLlByZXNhbGUgKSB7CiAgICAgICAgICAKICAgICAgICAgIHByZXNhbGUgPSBwcmVzYWxlLnN1YiggX2Ftb3VudCApOwogICAgICAgICAgCiAgICAgICAgICBmb3IoIHVpbnQyNTYgaSA9IDA7IGkgPD0gb3duZXJzLmxlbmd0aCAtIDE7IGkrKyApewogICAgICAgICAgICAgIAogICAgICAgICAgICBvd25lcnNbaV0udHJhbnNmZXIoICggbXNnLnZhbHVlLnN1YiggdG9SZWZlcnJlciApICkuZGl2KCBvd25lcnMubGVuZ3RoICkgKTsKICAgICAgICAgICAgCiAgICAgICAgICB9CiAgICAgIAogICAgICB9CiAgICAgIAogICAgICAKICAgICAgaW52ZXN0b3JzVG90YWxCYWxhbmNlc1ttc2cuc2VuZGVyXSAgPSBpbnZlc3RvcnNUb3RhbEJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZCggX2Ftb3VudCApOwogICAgICAgCiAgICAgIGlmKCBpbnZlc3RvcnNUb3RhbEJhbGFuY2VzW21zZy5zZW5kZXJdID49IHRocmVzaG9sZCAmJiBpbnZlc3RvcnNDaGVja1ttc2cuc2VuZGVyXSA9PSBmYWxzZSApewogICAgICAgICAgaW52ZXN0b3JzLnB1c2goIG1zZy5zZW5kZXIgKTsKICAgICAgICAgIGludmVzdG9yc0NoZWNrW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgICAgIAogICAgICAgICAgTmV3SW52ZXN0b3IoIG1zZy5zZW5kZXIsIG5vdyApOwogICAgICB9CiAgICAgICAKICAgICAgIAogICAgICAKICAgICAgIAogICAgfQogICAgCgogICAgCgogICAgCiAgICBmdW5jdGlvbiBnZXRDcm93ZHNhbGVTdGF0ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKCBDcm93ZHNhbGVTdGF0ZXMgKQogICAgewogICAgICAgIGlmKCBDcm93ZHNhbGVTdGF0ZSA9PSBDcm93ZHNhbGVTdGF0ZXMuRGlzYWJsZWQgKSByZXR1cm4gQ3Jvd2RzYWxlU3RhdGVzLkRpc2FibGVkOwogICAgICAgIGlmKCBDcm93ZHNhbGVTdGF0ZSA9PSBDcm93ZHNhbGVTdGF0ZXMuRmluaXNoZWQgKSByZXR1cm4gQ3Jvd2RzYWxlU3RhdGVzLkZpbmlzaGVkOwogICAgICAgIAogICAgICAgIGlmKCBDcm93ZHNhbGVTdGF0ZSA9PSBDcm93ZHNhbGVTdGF0ZXMuUHJlc2FsZSApewogICAgICAgICAgICBpZiggcHJlc2FsZSA+IDAgKSAKICAgICAgICAgICAgICAgIHJldHVybiBDcm93ZHNhbGVTdGF0ZXMuUHJlc2FsZTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcmV0dXJuIENyb3dkc2FsZVN0YXRlcy5EaXNhYmxlZDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYoIENyb3dkc2FsZVN0YXRlID09IENyb3dkc2FsZVN0YXRlcy5JQ08xICl7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiggdG9rZW4uY3VycmVudEJhbGFuY2UoKSA8PSAwIHx8IHRvdGFsRXRoID49IGhhcmRjYXAgKSByZXR1cm4gQ3Jvd2RzYWxlU3RhdGVzLkZpbmlzaGVkOyAKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCBub3cuc3ViKCBpY29UaW1lU3RhcnQgKSA8PSBJQ08xUGVyaW9kKSAgcmV0dXJuIENyb3dkc2FsZVN0YXRlcy5JQ08xOwogICAgICAgICAgICBpZiggbm93LnN1YiggaWNvVGltZVN0YXJ0ICkgPD0gSUNPMlBlcmlvZCApIHJldHVybiBDcm93ZHNhbGVTdGF0ZXMuSUNPMjsKICAgICAgICAgICAgaWYoIG5vdy5zdWIoIGljb1RpbWVTdGFydCApIDw9IElDTzNQZXJpb2QgKSByZXR1cm4gQ3Jvd2RzYWxlU3RhdGVzLklDTzM7CiAgICAgICAgICAgIGlmKCBub3cuc3ViKCBpY29UaW1lU3RhcnQgKSA8PSBJQ080UGVyaW9kICkgcmV0dXJuIENyb3dkc2FsZVN0YXRlcy5JQ080OwogICAgICAgICAgICBpZiggbm93LnN1YiggaWNvVGltZVN0YXJ0ICkgPiAgSUNPNFBlcmlvZCApIHJldHVybiBDcm93ZHNhbGVTdGF0ZXMuRmluaXNoZWQ7CiAgICAgICAgICAgIAogICAgICAgIH0KICAgIH0KICAgIAogICAgCiAgICAKICAgIGZ1bmN0aW9uIGNyb3dkc2FsZUJvbnVzKCB1aW50MjU2IF9hbW91bnQgKSBpbnRlcm5hbCBjb25zdGFudCAgcmV0dXJucyAoIHVpbnQyNTYgKQogICAgewogICAgICAgIHVpbnQyNTYgYm9udXMgPSAwOwogICAgICAgIAogICAgICAgIGlmKCBnZXRDcm93ZHNhbGVTdGF0ZSgpID09IENyb3dkc2FsZVN0YXRlcy5QcmVzYWxlICl7CiAgICAgICAgICAgIGJvbnVzID0gX2Ftb3VudC5tdWwoIDUwICkuZGl2KCAxMDAgKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYoIGdldENyb3dkc2FsZVN0YXRlKCkgPT0gQ3Jvd2RzYWxlU3RhdGVzLklDTzEgKXsKICAgICAgICAgICAgYm9udXMgPSBfYW1vdW50Lm11bCggMzUgKS5kaXYoIDEwMCApOwogICAgICAgIH0KICAgICAgICBpZiggZ2V0Q3Jvd2RzYWxlU3RhdGUoKSA9PSBDcm93ZHNhbGVTdGF0ZXMuSUNPMiApewogICAgICAgICAgICBib251cyA9IF9hbW91bnQubXVsKCAyNSApLmRpdiggMTAwICk7CiAgICAgICAgfQogICAgICAgIGlmKCBnZXRDcm93ZHNhbGVTdGF0ZSgpID09IENyb3dkc2FsZVN0YXRlcy5JQ08zICl7CiAgICAgICAgICAgIGJvbnVzID0gX2Ftb3VudC5tdWwoIDE1ICkuZGl2KCAxMDAgKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIF9hbW91bnQuYWRkKCBib251cyApOwogICAgICAgIAogICAgfQogICAgCiAgICAKICAgIGZ1bmN0aW9uIHN0YXJ0UHJlc2FsZSgpIHB1YmxpYyBvbmx5T3duZXIgbm90RmluaXNoZWQgSW5pdGlhbGl6ZWQgcmV0dXJucyAoIGJvb2wgKQogICAgewogICAgICAgIENyb3dkc2FsZVN0YXRlID0gQ3Jvd2RzYWxlU3RhdGVzLlByZXNhbGU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHN0YXJ0SWNvKCkgcHVibGljIG9ubHlPd25lciBub3RGaW5pc2hlZCBJbml0aWFsaXplZCByZXR1cm5zICggYm9vbCApCiAgICB7CiAgICAgICAgQ3Jvd2RzYWxlU3RhdGUgPSBDcm93ZHNhbGVTdGF0ZXMuSUNPMTsKICAgICAgICBpY29UaW1lU3RhcnQgPSBub3c7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIAogICAgZnVuY3Rpb24gY29tcGxldGVJY29QYXJ0MSgpIHB1YmxpYyBvbmx5T3duZXIgRmluaXNoZWQgSW5pdGlhbGl6ZWQgcmV0dXJucyggYm9vbCApCiAgICB7CiAgICAgICAgLy9zdG9wIGljbwogICAgICAgIENyb3dkc2FsZVN0YXRlID0gQ3Jvd2RzYWxlU3RhdGVzLkZpbmlzaGVkOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgc2FsZXMgPSB0b2tlbi50b3RhbFN1cHBseSgpIC0gdG9rZW4uY3VycmVudEJhbGFuY2UoKTsKICAgICAgICAKICAgICAgICAKICAgICAgICB1aW50MjU2IGk7CiAgICAgICAgCiAgICAgICAgLy9idXJuCiAgICAgICAgaWYoIHRvdGFsRXRoID49IGhhcmRjYXAgKSB7CiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IoIGkgPSAwOyBpIDw9IG93bmVycy5sZW5ndGggLSAxOyBpKysgKXsKICAgICAgICAgICAgICAgIHRva2VuLmRlbGl2ZXJ5KCBvd25lcnNbaV0sIGJvdW50eS5kaXYoIG93bmVycy5sZW5ndGggKSApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIAogICAgICAgICAgICB1aW50MjU2IHRtcCA9IHNhbGVzLm11bCggMjAgKS5kaXYoIDEwMCApLmFkZCggYm91bnR5ICk7CiAgICAgICAgICAgIGZvciggaSA9IDA7IGkgPD0gb3duZXJzLmxlbmd0aCAtIDE7IGkrKyApewogICAgICAgICAgICAgICAgdG9rZW4uZGVsaXZlcnkoIG93bmVyc1tpXSwgdG1wLmRpdiggb3duZXJzLmxlbmd0aCApICk7CiAgICAgICAgICAgIH0gIAogICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdWludCBiID0gYWRkcmVzcyh0aGlzKS5iYWxhbmNlOwogICAgICAgICBmb3IoIGkgPSAwOyBpIDw9IG93bmVycy5sZW5ndGggLSAxOyBpKysgKXsKICAgICAgICAgICAgb3duZXJzW2ldLnRyYW5zZmVyKCAgYi5kaXYoIG93bmVycy5sZW5ndGggKSApOwogICAgICAgIH0KICAgICAgICAKICAgICAgICB0b2tlbi5hZnRlckljbyggIHJlZGVtcHRpb25QcmljZUNhbGN1bGF0ZSggc2FsZXMgKSAgKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY29tcGxldGVJY29QYXJ0MigpIHB1YmxpYyBvbmx5T3duZXIgRmluaXNoZWQgSW5pdGlhbGl6ZWQgcmV0dXJucyggYm9vbCApCiAgICB7CiAgICAgICAgdWludDI1NiBzdW0gPSAwOwogICAgICAgIHVpbnQyNTYgaSA9IDA7CiAgICAgICAgZm9yKCBpID0gMDsgaSA8PSBpbnZlc3RvcnMubGVuZ3RoIC0gMTsgaSsrICkgewogICAgICAgICAgICBzdW0gPSBzdW0uYWRkKCBpbnZlc3RvcnNUb3RhbEJhbGFuY2VzWyBpbnZlc3RvcnNbaV0gXSApOwogICAgICAgIH0KICAgICAgICBmb3IoIGkgPSAwOyBpIDw9IGludmVzdG9ycy5sZW5ndGggLSAxOyBpKysgKSB7CiAgICAgICAgICAgIGludmVzdG9yc1N0b2NrWyBpbnZlc3RvcnNbaV0gXSA9IGludmVzdG9yc1RvdGFsQmFsYW5jZXNbIGludmVzdG9yc1tpXSBdLm11bCggMTAwICkuZGl2KCBzdW0gKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIAogICAgZnVuY3Rpb24gaW52ZXN0b3JzQ291bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyggdWludDI1NiApCiAgICB7CiAgICAgICAgcmV0dXJuIGludmVzdG9ycy5sZW5ndGggOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBpbnZlc3RvcnNBZGRyZXNzKCB1aW50MjU2IF9pICkgcHVibGljIGNvbnN0YW50IHJldHVybnMoIGFkZHJlc3MgKQogICAgewogICAgICAgIHJldHVybiBpbnZlc3RvcnNbX2ldIDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gaW52ZXN0b3JzSW5mbyggYWRkcmVzcyBfYSApIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKCB1aW50MjU2LCB1aW50MjU2ICkKICAgIHsKICAgICAgICByZXR1cm4gKCBpbnZlc3RvcnNUb3RhbEJhbGFuY2VzW19hXSwgaW52ZXN0b3JzU3RvY2tbX2FdICk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGludmVzdG9yc1N0b2NrSW5mbyggYWRkcmVzcyBfYSkgIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcmV0dXJuICBpbnZlc3RvcnNTdG9ja1tfYV07CiAgICB9CiAgICAKICAgIAoKICAgIAogICAgZnVuY3Rpb24gYm91bnR5VHJhbnNmZXIoIGFkZHJlc3MgX3RvLCB1aW50MjU2IGFtb3VudCkgcHVibGljIG9ubHlPd25lciBJbml0aWFsaXplZCByZXR1cm5zKCBib29sICkKICAgIHsKICAgICAgICAKICAgICAgICAKICAgICAgICByZXF1aXJlKCBib3VudHkgPj0gYW1vdW50ICYmIHRva2VuLmN1cnJlbnRCYWxhbmNlKCkgPj0gYW1vdW50ICk7CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgdG9rZW4uZGVsaXZlcnkoIF90bywgYW1vdW50ICk7CiAgICAgICAgYm91bnR5ID0gYm91bnR5LnN1YiggYW1vdW50ICk7CiAgICAgICAgCiAgICAgICAgRGVsaXZlcnkoIF90bywgYW1vdW50ICk7CiAgICAgICAgQm91bnR5KCBfdG8sIGFtb3VudCApOwogICAgICAgIAogICAgfQogICAgCiAgICAKICAgIAogICAgCiAgICBib29sIHB1YmxpYyBzd2FwQWN0aXZpdHkgPSB0cnVlOwogICAgYWRkcmVzc1tdIHRva2VuTGlzdDsKICAgIG1hcHBpbmcoIGFkZHJlc3MgPT4gdWludDI1NiApIHRva2VuUmF0ZUF0aDsKICAgIG1hcHBpbmcoIGFkZHJlc3MgPT4gdWludDI1NiApIHRva2VuUmF0ZVRva2VuOwogICAgbWFwcGluZyggYWRkcmVzcyA9PiB1aW50MjU2ICkgdG9rZW5MaW1pdDsKICAgIG1hcHBpbmcoIGFkZHJlc3MgPT4gdWludDI1NiApIHRva2VuTWluQW1vdW50OwogICAgbWFwcGluZyggYWRkcmVzcyA9PiBib29sICkgdG9rZW5BY3Rpdml0eTsKICAgIG1hcHBpbmcoIGFkZHJlc3MgPT4gYm9vbCApIHRva2VuRmlyc3Q7CiAgICBtYXBwaW5nICggYWRkcmVzcyA9PiB1aW50MjU2ICkgdG9rZW5Td2FwcGVkOwogICAgCiAgICAKICAgIGZ1bmN0aW9uIHN3YXBBY3Rpdml0eUhhbmRsZXIoKSBwdWJsaWMgb25seU93bmVyCiAgICB7CiAgICAgICAgc3dhcEFjdGl2aXR5ID0gIXN3YXBBY3Rpdml0eTsKICAgIH0KICAgIAogICAgCiAgICBmdW5jdGlvbiBzZXRTd2FwVG9rZW4oIGFkZHJlc3MgX2EsIHVpbnQyNTYgX3JhdGVBdGgsIHVpbnQyNTYgX3JhdGVUb2tlbiwgdWludDI1NiBfbGltaXQsIHVpbnQyNTYgX21pbkFtb3VudCwgIGJvb2wgX2FjdGl2aXR5ICkgcHVibGljIG9ubHlPd25lciByZXR1cm5zKCBib29sICkKICAgIHsKICAgICAgIGlmKCB0b2tlbkZpcnN0W19hXSA9PSBmYWxzZSApIHsKICAgICAgICAgICB0b2tlbkZpcnN0W19hXSA9IHRydWU7CiAgICAgICAgICAgCiAgICAgICAgICAgTmV3U3dhcFRva2VuKCBfYSApOwogICAgICAgfQogICAgICAgCiAgICAgICB0b2tlblJhdGVBdGhbX2FdICAgICA9IF9yYXRlQXRoOwogICAgICAgdG9rZW5SYXRlVG9rZW5bX2FdICAgPSBfcmF0ZVRva2VuOwogICAgICAgdG9rZW5MaW1pdFtfYV0gICAgICAgPSBfbGltaXQ7CiAgICAgICB0b2tlbk1pbkFtb3VudFtfYV0gICA9IF9taW5BbW91bnQ7CiAgICAgICB0b2tlbkFjdGl2aXR5W19hXSAgICA9IF9hY3Rpdml0eTsKICAgIH0KICAgIAoKICAgIGZ1bmN0aW9uIHN3YXBUb2tlbkluZm8oIGFkZHJlc3MgX2EpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKCB1aW50MjU2LCB1aW50MjU2LCB1aW50MjU2LCB1aW50MjU2LCAgYm9vbCApCiAgICB7CiAgICAgICAgcmV0dXJuICggdG9rZW5SYXRlQXRoW19hXSwgdG9rZW5SYXRlVG9rZW5bX2FdLCB0b2tlbkxpbWl0W19hXSwgdG9rZW5NaW5BbW91bnRbX2FdLCB0b2tlbkFjdGl2aXR5W19hXSApOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzd2FwKCBhZGRyZXNzIF9hLCB1aW50MjU2IF9hbW91bnQgKSBwdWJsaWMgcmV0dXJucyggYm9vbCApCiAgICB7CiAgICAgICAgcmVxdWlyZSggc3dhcEFjdGl2aXR5ICYmIHRva2VuQWN0aXZpdHlbX2FdICYmICggX2Ftb3VudCA+PSB0b2tlbk1pbkFtb3VudFtfYV0gKSApOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgYXRoID0gdG9rZW5SYXRlQXRoW19hXS5tdWwoIF9hbW91bnQgKS5kaXYoIHRva2VuUmF0ZVRva2VuW19hXSApOwogICAgICAgIHRva2VuU3dhcHBlZFtfYV0gPSB0b2tlblN3YXBwZWRbX2FdLmFkZCggYXRoICk7CiAgICAgICAgCiAgICAgICAgcmVxdWlyZSggYXRoID4gMCAmJiBib3VudHkgPj0gYXRoICYmIHRva2VuU3dhcHBlZFtfYV0gPD0gdG9rZW5MaW1pdFtfYV0gKTsKICAgICAgICAKICAgICAgICBFUkMyMCBlcmNUb2tlbiA9IEVSQzIwKCBfYSApOwogICAgICAgIGVyY1Rva2VuLnRyYW5zZmVyRnJvbSggbXNnLnNlbmRlciwgYWRkcmVzcyh0aGlzKSwgX2Ftb3VudCApOwogICAgICAgIAogICAgICAgIGZvciggdWludDI1NiBpID0gMDsgaSA8PSBvd25lcnMubGVuZ3RoIC0gMTsgaSsrICkKICAgICAgICAgIGVyY1Rva2VuLnRyYW5zZmVyKCBvd25lcnNbaV0sIF9hbW91bnQuZGl2KCBvd25lcnMubGVuZ3RoICkgKTsKICAgICAgICAgIAogICAgICAgIHRva2VuLmRlbGl2ZXJ5KCBtc2cuc2VuZGVyLCBhdGggKTsKICAgICAgICBib3VudHkgPSBib3VudHkuc3ViKCBhdGggKTsKICAgICAgICAKICAgICAgICBEZWxpdmVyeSggbXNnLnNlbmRlciwgYXRoICk7CiAgICAgICAgU3dhcCggbXNnLnNlbmRlciwgX2EsIGF0aCApOwogICAgICAgIAogICAgfQogICAgCn0='.
	

]
