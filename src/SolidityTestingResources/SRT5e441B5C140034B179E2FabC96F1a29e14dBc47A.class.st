Class {
	#name : #SRT5e441B5C140034B179E2FabC96F1a29e14dBc47A,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5e441B5C140034B179E2FabC96F1a29e14dBc47A >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8qKgogKiBDbGltYXRlY29pbiBleHRlbmRlZCBFUkMyMCB0b2tlbiBjb250cmFjdCBjcmVhdGVkIG9uIEZlYnJ1YXJ5IHRoZSAxN3RoLCAyMDE4IGJ5IFJpbmNrZXIgUHJvZHVjdGlvbnMgaW4gdGhlIE5ldGhlcmxhbmRzIAogKgogKiBGb3IgdGVybXMgYW5kIGNvbmRpdGlvbnMgdmlzaXQgaHR0cHM6Ly9jbGltYXRlY29pbi5ldQogKi8KCmNvbnRyYWN0IG93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIG93bmVkKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpZiAobmV3T3duZXIgPT0gMHgwKSByZXZlcnQoKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQp9CgovKioKICogT3ZlcmZsb3cgYXdhcmUgdWludCBtYXRoIGZ1bmN0aW9ucy4KICovCmNvbnRyYWN0IFNhZmVNYXRoIHsKICAvL2ludGVybmFscwoKICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsKICAgIHJldHVybiBjOwogIH0KCiAgLypmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSByZXZlcnQoKTsKICB9Ki8KfQoKY29udHJhY3QgVG9rZW4gewogICAgLyogVGhpcyBpcyBhIHNsaWdodCBjaGFuZ2UgdG8gdGhlIEVSQzIwIGJhc2Ugc3RhbmRhcmQuCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKICAgIGlzIHJlcGxhY2VkIHdpdGg6CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIFRoaXMgYXV0b21hdGljYWxseSBjcmVhdGVzIGEgZ2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgdG90YWxTdXBwbHkuCiAgICBUaGlzIGlzIG1vdmVkIHRvIHRoZSBiYXNlIGNvbnRyYWN0IHNpbmNlIHB1YmxpYyBnZXR0ZXIgZnVuY3Rpb25zIGFyZSBub3QKICAgIGN1cnJlbnRseSByZWNvZ25pc2VkIGFzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBtYXRjaGluZyBhYnN0cmFjdAogICAgZnVuY3Rpb24gYnkgdGhlIGNvbXBpbGVyLgogICAgKi8KICAgIC8vLyB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogICAgLy8vIEByZXR1cm4gVGhlIGJhbGFuY2UKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlcgogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4gewoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vRGVmYXVsdCBhc3N1bWVzIHRvdGFsU3VwcGx5IGNhbid0IGJlIG92ZXIgbWF4ICgyXjI1NiAtIDEpLgogICAgICAgIC8vSWYgeW91ciB0b2tlbiBsZWF2ZXMgb3V0IHRvdGFsU3VwcGx5IGFuZCBjYW4gaXNzdWUgbW9yZSB0b2tlbnMgYXMgdGltZSBnb2VzIG9uLCB5b3UgbmVlZCB0byBjaGVjayBpZiBpdCBkb2Vzbid0IHdyYXAuCiAgICAgICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIC8vaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAvL2lmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwp9CgovKiBDbGltYXRlQ29pbiBDb250cmFjdCAqLwpjb250cmFjdCBDbGltYXRlQ29pblRva2VuIGlzIG93bmVkLCBTYWZlTWF0aCwgU3RhbmRhcmRUb2tlbiB7CiAgICBzdHJpbmcgcHVibGljIGNvZGUgPSAiQ0xJIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBuYW1lIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiQ2xpbWF0ZUNvaW4iOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIG5hbWUgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gItCaIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlcyBVKzA0MUEgSFRNTC1jb2RlOiAmIzEwNTA7CiAgICBhZGRyZXNzIHB1YmxpYyBDbGltYXRlQ29pbkFkZHJlc3MgPSB0aGlzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRyZXNzIG9mIHRoZSBDbGltYXRlQ29pbiB0b2tlbgogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gMjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW1vdW50IG9mIGRlY2ltYWxzIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDEwMDAwMDAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdG90YWwgc3VwcGx5IG9mIENsaW1hdGVDb2lucyAoZWlnaHQgdHJpbGxpb24pCiAgICB1aW50MjU2IHB1YmxpYyBidXlQcmljZUV0aCA9IDEgZmlubmV5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCdXkgcHJpY2UgZm9yIENsaW1hdGVDb2lucwogICAgdWludDI1NiBwdWJsaWMgc2VsbFByaWNlRXRoID0gMSBmaW5uZXk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VsbCBwcmljZSBmb3IgQ2xpbWF0ZUNvaW5zCiAgICB1aW50MjU2IHB1YmxpYyBnYXNGb3JDTEkgPSA1IGZpbm5leTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFdGggZnJvbSBjb250cmFjdCBhZ2FpbnN0IENMSSB0byBwYXkgdHggKDEwIHRpbWVzIHNlbGxQcmljZUV0aCkKICAgIHVpbnQyNTYgcHVibGljIENMSUZvckdhcyA9IDEwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENMSSB0byBjb250cmFjdCBhZ2FpbnN0IGV0aCB0byBwYXkgdHgKICAgIHVpbnQyNTYgcHVibGljIGdhc1Jlc2VydmUgPSAwLjIgZXRoZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXRoIGFtb3VudCB0aGF0IHJlbWFpbnMgaW4gdGhlIGNvbnRyYWN0IGZvciBnYXMgYW5kIGNhbid0IGJlIHNvbGQKICAgIHVpbnQyNTYgcHVibGljIG1pbkJhbGFuY2VGb3JBY2NvdW50cyA9IDEwIGZpbm5leTsgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pbmltYWwgZXRoIGJhbGFuY2Ugb2Ygc2VuZGVyIGFuZCByZWNpcGllbnQKICAgIGJvb2wgcHVibGljIGRpcmVjdFRyYWRlQWxsb3dlZCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbHQgdHJhZGluZyBDTEkgYnkgc2VuZGluZyB0byB0aGUgY29udHJhY3QgZGlyZWN0bHkKICAgIAogICAgLyogaW5jbHVkZSBtaW50YWJsZSAqLwogICAgCiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CiAgICBldmVudCBNaW50RmluaXNoZWQoKTsKCiAgICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKICAgIAogICAgIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICBpZihtaW50aW5nRmluaXNoZWQpIHJldmVydCgpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNpZXZlIHRoZSBtaW50ZWQgdG9rZW5zLgogICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIG1pbnQuCiAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgY2FuTWludCByZXR1cm5zIChib29sKSB7CiAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksX2Ftb3VudCk7CiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIHN0b3AgbWludGluZyBuZXcgdG9rZW5zLgogICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICBNaW50RmluaXNoZWQoKTsKICAgIHJldHVybiB0cnVlOwogIH0KICAKICAvKiBlbmQgbWludGFibGUgKi8KCgovKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QgKi8KICAgIGZ1bmN0aW9uIENsaW1hdGVDb2luVG9rZW4oKSBwdWJsaWMgewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2l2ZSB0aGUgY3JlYXRvciBhbGwgdG9rZW5zCiAgICB9CgoKLyogQ29uc3RydWN0b3IgcGFyYW1ldGVycyAqLwogICAgZnVuY3Rpb24gc2V0RXRoZXJQcmljZXModWludDI1NiBuZXdCdXlQcmljZUV0aCwgdWludDI1NiBuZXdTZWxsUHJpY2VFdGgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGJ1eVByaWNlRXRoID0gbmV3QnV5UHJpY2VFdGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHByaWNlcyB0byBidXkgYW5kIHNlbGwgQ0xJCiAgICAgICAgc2VsbFByaWNlRXRoID0gbmV3U2VsbFByaWNlRXRoOwogICAgfQogICAgZnVuY3Rpb24gc2V0R2FzRm9yQ0xJKHVpbnQgbmV3R2FzQW1vdW50SW5XZWkpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGdhc0ZvckNMSSA9IG5ld0dhc0Ftb3VudEluV2VpOwogICAgfQogICAgZnVuY3Rpb24gc2V0Q0xJRm9yR2FzKHVpbnQgbmV3Q0xJQW1vdW50KSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBDTElGb3JHYXMgPSBuZXdDTElBbW91bnQ7CiAgICB9CiAgICBmdW5jdGlvbiBzZXRHYXNSZXNlcnZlKHVpbnQgbmV3R2FzUmVzZXJ2ZUluV2VpKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBnYXNSZXNlcnZlID0gbmV3R2FzUmVzZXJ2ZUluV2VpOwogICAgfQogICAgZnVuY3Rpb24gc2V0TWluQmFsYW5jZSh1aW50IG1pbmltdW1CYWxhbmNlSW5XZWkpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIG1pbkJhbGFuY2VGb3JBY2NvdW50cyA9IG1pbmltdW1CYWxhbmNlSW5XZWk7CiAgICB9CgoKLyogSGFsdHMgb3IgdW5oYWx0cyBkaXJlY3QgdHJhZGVzIHdpdGhvdXQgdGhlIHNlbGwvYnV5IGZ1bmN0aW9ucyBiZWxvdyAqLwogICAgZnVuY3Rpb24gaGFsdERpcmVjdFRyYWRlKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgZGlyZWN0VHJhZGVBbGxvd2VkID0gZmFsc2U7CiAgICB9CiAgICBmdW5jdGlvbiB1bmhhbHREaXJlY3RUcmFkZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGRpcmVjdFRyYWRlQWxsb3dlZCA9IHRydWU7CiAgICB9CgoKLyogVHJhbnNmZXIgZnVuY3Rpb24gZXh0ZW5kZWQgYnkgY2hlY2sgb2YgZXRoIGJhbGFuY2VzIGFuZCBwYXkgdHJhbnNhY3Rpb24gY29zdHMgd2l0aCBDTEkgaWYgbm90IGVub3VnaCBldGggKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChfdmFsdWUgPCBDTElGb3JHYXMpIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudHMgZHJhaW4gYW5kIHNwYW0KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lciAmJiBfdG8gPT0gQ2xpbWF0ZUNvaW5BZGRyZXNzICYmIGRpcmVjdFRyYWRlQWxsb3dlZCkgewogICAgICAgICAgICBzZWxsQ2xpbWF0ZUNvaW5zQWdhaW5zdEV0aGVyKF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmFkZSBDbGltYXRlQ29pbnMgYWdhaW5zdCBldGggYnkgc2VuZGluZyB0byB0aGUgdG9rZW4gY29udHJhY3QKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7ICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc2VuZGVyIGhhcyBlbm91Z2ggYW5kIGZvciBvdmVyZmxvd3MKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOyAgIC8vIFN1YnRyYWN0IENMSSBmcm9tIHRoZSBzZW5kZXIKCiAgICAgICAgICAgIGlmIChtc2cuc2VuZGVyLmJhbGFuY2UgPj0gbWluQmFsYW5jZUZvckFjY291bnRzICYmIF90by5iYWxhbmNlID49IG1pbkJhbGFuY2VGb3JBY2NvdW50cykgeyAgICAvLyBDaGVjayBpZiBzZW5kZXIgY2FuIHBheSBnYXMgYW5kIGlmIHJlY2lwaWVudCBjb3VsZAogICAgICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsgICAgICAgICAgICAgLy8gQWRkIHRoZSBzYW1lIGFtb3VudCBvZiBDTEkgdG8gdGhlIHJlY2lwaWVudAogICAgICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYmFsYW5jZXNbdGhpc10gPSBzYWZlQWRkKGJhbGFuY2VzW3RoaXNdLCBDTElGb3JHYXMpOyAgICAgICAgLy8gUGF5IENMSUZvckdhcyB0byB0aGUgY29udHJhY3QKICAgICAgICAgICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sIHNhZmVTdWIoX3ZhbHVlLCBDTElGb3JHYXMpKTsgIC8vIFJlY2lwaWVudCBiYWxhbmNlIC1DTElGb3JHYXMKICAgICAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgc2FmZVN1YihfdmFsdWUsIENMSUZvckdhcykpOyAgICAgIC8vIE5vdGlmeSBhbnlvbmUgbGlzdGVuaW5nIHRoYXQgdGhpcyB0cmFuc2ZlciB0b29rIHBsYWNlCgogICAgICAgICAgICAgICAgaWYobXNnLnNlbmRlci5iYWxhbmNlIDwgbWluQmFsYW5jZUZvckFjY291bnRzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYoIW1zZy5zZW5kZXIuc2VuZChnYXNGb3JDTEkpKSByZXZlcnQoKTsgICAgICAgICAgICAgICAgICAvLyBTZW5kIGV0aCB0byBzZW5kZXIKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoX3RvLmJhbGFuY2UgPCBtaW5CYWxhbmNlRm9yQWNjb3VudHMpIHsKICAgICAgICAgICAgICAgICAgICBpZighX3RvLnNlbmQoZ2FzRm9yQ0xJKSkgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgZXRoIHRvIHJlY2lwaWVudAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsgcmV2ZXJ0KCk7IH0KICAgIH0KCgovKiBVc2VyIGJ1eXMgQ2xpbWF0ZUNvaW5zIGFuZCBwYXlzIGluIEV0aGVyICovCiAgICBmdW5jdGlvbiBidXlDbGltYXRlQ29pbnNBZ2FpbnN0RXRoZXIoKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zICh1aW50IGFtb3VudCkgewogICAgICAgIGlmIChidXlQcmljZUV0aCA9PSAwIHx8IG1zZy52YWx1ZSA8IGJ1eVByaWNlRXRoKSByZXZlcnQoKTsgICAgICAgICAgICAgLy8gQXZvaWQgZGl2aWRpbmcgMCwgc2VuZGluZyBzbWFsbCBhbW91bnRzIGFuZCBzcGFtCiAgICAgICAgYW1vdW50ID0gbXNnLnZhbHVlIC8gYnV5UHJpY2VFdGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGFtb3VudCBvZiBDbGltYXRlQ29pbnMKICAgICAgICBpZiAoYmFsYW5jZXNbdGhpc10gPCBhbW91bnQpIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0IGhhcyBlbm91Z2ggdG8gc2VsbAogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZUFkZChiYWxhbmNlc1ttc2cuc2VuZGVyXSwgYW1vdW50KTsgICAgICAgLy8gQWRkIHRoZSBhbW91bnQgdG8gYnV5ZXIncyBiYWxhbmNlCiAgICAgICAgYmFsYW5jZXNbdGhpc10gPSBzYWZlU3ViKGJhbGFuY2VzW3RoaXNdLCBhbW91bnQpOyAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBhbW91bnQgZnJvbSBDbGltYXRlQ29pbiBiYWxhbmNlCiAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgYW1vdW50KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIGFuIGV2ZW50IHJlZmxlY3RpbmcgdGhlIGNoYW5nZQogICAgICAgIHJldHVybiBhbW91bnQ7CiAgICB9CgoKLyogVXNlciBzZWxscyBDbGltYXRlQ29pbnMgYW5kIGdldHMgRXRoZXIgKi8KICAgIGZ1bmN0aW9uIHNlbGxDbGltYXRlQ29pbnNBZ2FpbnN0RXRoZXIodWludDI1NiBhbW91bnQpIHB1YmxpYyByZXR1cm5zICh1aW50IHJldmVudWUpIHsKICAgICAgICBpZiAoc2VsbFByaWNlRXRoID09IDAgfHwgYW1vdW50IDwgQ0xJRm9yR2FzKSByZXZlcnQoKTsgICAgICAgICAgICAgICAgLy8gQXZvaWQgc2VsbGluZyBhbmQgc3BhbQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IGFtb3VudCkgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoIHRvIHNlbGwKICAgICAgICByZXZlbnVlID0gc2FmZU11bChhbW91bnQsIHNlbGxQcmljZUV0aCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJldmVudWUgPSBldGggdGhhdCB3aWxsIGJlIHNlbmQgdG8gdGhlIHVzZXIKICAgICAgICBpZiAoc2FmZVN1Yih0aGlzLmJhbGFuY2UsIHJldmVudWUpIDwgZ2FzUmVzZXJ2ZSkgcmV2ZXJ0KCk7ICAgICAgICAgICAgIC8vIEtlZXAgbWluIGFtb3VudCBvZiBldGggaW4gY29udHJhY3QgdG8gcHJvdmlkZSBnYXMgZm9yIHRyYW5zYWN0aW9ucwogICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKHJldmVudWUpKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VuZCBldGhlciB0byB0aGUgc2VsbGVyLiBJdCdzIGltcG9ydGFudAogICAgICAgICAgICByZXZlcnQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVG8gZG8gdGhpcyBsYXN0IHRvIGF2b2lkIHJlY3Vyc2lvbiBhdHRhY2tzCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYmFsYW5jZXNbdGhpc10gPSBzYWZlQWRkKGJhbGFuY2VzW3RoaXNdLCBhbW91bnQpOyAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgYW1vdW50IHRvIENsaW1hdGVDb2luIGJhbGFuY2UKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBhbW91bnQpOyAgIC8vIFN1YnRyYWN0IHRoZSBhbW91bnQgZnJvbSBzZWxsZXIncyBiYWxhbmNlCiAgICAgICAgICAgIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIHJldmVudWUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIGFuIGV2ZW50IHJlZmxlY3Rpbmcgb24gdGhlIGNoYW5nZQogICAgICAgICAgICByZXR1cm4gcmV2ZW51ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5kIGZ1bmN0aW9uIGFuZCByZXR1cm5zCiAgICAgICAgfQogICAgfQoKCi8qIHJlZnVuZCB0byBvd25lciAqLwogICAgZnVuY3Rpb24gcmVmdW5kVG9Pd25lciAodWludDI1NiBhbW91bnRPZkV0aCwgdWludDI1NiBjbGkpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHVpbnQyNTYgZXRoID0gc2FmZU11bChhbW91bnRPZkV0aCwgMSBldGhlcik7CiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoZXRoKSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZW5kIGV0aGVyIHRvIHRoZSBvd25lci4gSXQncyBpbXBvcnRhbnQKICAgICAgICAgICAgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRvIGRvIHRoaXMgbGFzdCB0byBhdm9pZCByZWN1cnNpb24gYXR0YWNrcwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIGV0aCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIGFuIGV2ZW50IHJlZmxlY3Rpbmcgb24gdGhlIGNoYW5nZQogICAgICAgIH0KICAgICAgICBpZiAoYmFsYW5jZXNbdGhpc10gPCBjbGkpIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0IGhhcyBlbm91Z2ggdG8gc2VsbAogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZUFkZChiYWxhbmNlc1ttc2cuc2VuZGVyXSwgY2xpKTsgICAgICAgICAgLy8gQWRkIHRoZSBhbW91bnQgdG8gYnV5ZXIncyBiYWxhbmNlCiAgICAgICAgYmFsYW5jZXNbdGhpc10gPSBzYWZlU3ViKGJhbGFuY2VzW3RoaXNdLCBjbGkpOyAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBhbW91bnQgZnJvbSBzZWxsZXIncyBiYWxhbmNlCiAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgY2xpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIGFuIGV2ZW50IHJlZmxlY3RpbmcgdGhlIGNoYW5nZQogICAgfQoKLyogVGhpcyB1bm5hbWVkIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuZXZlciBzb21lb25lIHRyaWVzIHRvIHNlbmQgZXRoZXIgdG8gaXQgYW5kIHBvc3NpYmx5IHNlbGxzIENsaW1hdGVDb2lucyAqLwogICAgZnVuY3Rpb24oKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsKICAgICAgICAgICAgaWYgKCFkaXJlY3RUcmFkZUFsbG93ZWQpIHJldmVydCgpOwogICAgICAgICAgICBidXlDbGltYXRlQ29pbnNBZ2FpbnN0RXRoZXIoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbGxvdyBkaXJlY3QgdHJhZGVzIGJ5IHNlbmRpbmcgZXRoIHRvIHRoZSBjb250cmFjdAogICAgICAgIH0KICAgIH0KfQ=='.
	

]
