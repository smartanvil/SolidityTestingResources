Class {
	#name : #SRTA4F902f57Fd9FFcedF4dE6cF7EbC86ea9F76B5d1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTA4F902f57Fd9FFcedF4dE6cF7EbC86ea9F76B5d1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5XjAuNC4xNTsKCmNvbnRyYWN0IEV0aGVyYWZmbGVMT1QgewogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludCBfYW10KSBleHRlcm5hbCB7fQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcHVibGljIHt9CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50KSB7fQp9CmNvbnRyYWN0IEV0aGVyYWZmbGVJQ08gaXMgRXRoZXJhZmZsZUxPVCB7CgogICAgLyogTG90IHJld2FyZCBwZXIgZXRoZXIgaW4gZWFjaCB0aWVyICovCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCB0aWVyMExPVCA9IDExMDAwMCAqIDEwICoqIDY7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCB0aWVyMUxPVCA9IDEwMDAwMCAqIDEwICoqIDY7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCB0aWVyMkxPVCA9ICA5MDAwMCAqIDEwICoqIDY7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCB0aWVyM0xPVCA9ICA4MDAwMCAqIDEwICoqIDY7CiAgICAvKiBCb251cyB0aWNrZXRzIG11bHRpcGxpZXIgKi8KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGJvbnVzTE9UICAgICA9IDE1MDAgKiAxMCAqKiA2OwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgYm9udXNGcmVlTE9UID0gMTA7CiAgICAvKiBNYXhpbXVtIGFtb3VudCBvZiBldGhlciBpbnZlc3RhYmxlIHBlciB0aWVyICovCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBtYXhXZWlUaWVyMCA9IDcwMCAgICogMTAgKiogMTg7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBtYXhXZWlUaWVyMSA9IDI1MDAgICogMTAgKiogMTg7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBtYXhXZWlUaWVyMiA9IDcwMDAgICogMTAgKiogMTg7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBtYXhXZWlUaWVyMyA9IDIwMDAwICogMTAgKiogMTg7CiAgICAvKiBNaW5pbXVtIGludmVzdG1lbnQgKDAuMDI1IEV0aGVyKSAqLwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgbWluV2VpID0gMjUgKiAxMCAqKiAxNTsKICAgIC8qIENyb3dkc2FsZSBvcGVuLCBjbG9zZSwgd2l0aGRyYXcgJiB0aWVyIHRpbWVzIChVVEMgRm9ybWF0KSovCiAgICB1aW50IHB1YmxpYyBJQ09TdGFydCA9IDE1MjIyODE2MDA7Ly9UaHVyIDI5dGggTWFyY2ggMjAxOAogICAgdWludCBwdWJsaWMgdGllcjFFbmQgPSAxNTIzNDkxMjAwOy8vVGh1ciAxMnRoIEFwcmlsIDIwMTgKICAgIHVpbnQgcHVibGljIHRpZXIyRW5kID0gMTUyNTMwNTYwMDsvL1RodXIgM3JkIE1heSAyMDE4CiAgICB1aW50IHB1YmxpYyB0aWVyM0VuZCA9IDE1Mjc3MjQ4MDA7Ly9UaHVyIDMxc3QgTWF5IDIwMTgKICAgIHVpbnQgcHVibGljIHdkQmVmb3JlID0gMTUyODkzNDQwMDsvL1RodXIgMTR0aCBKdW5lIDIwMTgKICAgIC8qIFZhcmlhYmxlcyB0byB0cmFjayBhbW91bnQgb2YgcHVyY2hhc2VzIGluIHRpZXIgKi8KICAgIHVpbnQgcHVibGljIHRpZXIwVG90YWw7CiAgICB1aW50IHB1YmxpYyB0aWVyMVRvdGFsOwogICAgdWludCBwdWJsaWMgdGllcjJUb3RhbDsKICAgIHVpbnQgcHVibGljIHRpZXIzVG90YWw7CiAgICAvKiBFdGhlcmFmZmxlJ3MgbXVsdGlzaWcgd2FsbGV0ICYgTE9UIHRva2VuIGFkZHJlc3NlcyAqLwogICAgYWRkcmVzcyBwdWJsaWMgZXRoZXJhZmZsZTsKICAgIC8qIElDTyBzdGF0dXMgdG9nZ2xlICovCiAgICBib29sIHB1YmxpYyBJQ09SdW5uaW5nID0gdHJ1ZTsKICAgIC8qIE1hcCBvZiBwdXJjaGFzZXIncyBldGhlcmV1bSBhZGRyZXNzZXMgdG8gdGhlaXIgcHVyY2hhc2UgYW1vdW50cyBmb3IgY2FsY3VsYXRpbmcgYm9udXNlcyovCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyB0aWVyMDsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIHRpZXIxOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgdGllcjI7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyB0aWVyMzsKICAgIC8qIEluc3RhbnRpYXRlIHRoZSB2YXJpYWJsZXMgdG8gaG9sZCBFdGhlcmFmZmxlJ3MgTE9UICYgZnJlZUxPVCB0b2tlbiBjb250cmFjdCBpbnN0YW5jZXMgKi8KICAgIEV0aGVyYWZmbGVMT1QgTE9UOwogICAgRXRoZXJhZmZsZUxPVCBGcmVlTE9UOwogICAgLyogRXZlbnQgbG9nZ2VycyAqLwogICAgZXZlbnQgTG9nVG9rZW5EZXBvc2l0KGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKTsKICAgIGV2ZW50IExvZ1JlZnVuZChhZGRyZXNzIGluZGV4ZWQgdG9XaG9tLCB1aW50IGFtb3VudE9mRXRoZXIsIHVpbnQgYXRUaW1lKTsKICAgIGV2ZW50IExvZ0V0aGVyVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIHRvV2hvbSwgdWludCBhbW91bnQsIHVpbnQgYXRUaW1lKTsKICAgIGV2ZW50IExvZ0JvbnVzTE9UUmVkZW1wdGlvbihhZGRyZXNzIGluZGV4ZWQgdG9XaG9tLCB1aW50IGxvdEFtb3VudCwgdWludCBhdFRpbWUpOwogICAgZXZlbnQgTG9nTE9UVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIHRvV2hvbSwgdWludCBpbmRleGVkIGluVGllciwgdWludCBldGhBbXQsIHVpbnQgTE9UQW10LCB1aW50IGF0VGltZSk7CiAgICAvKioKICAgICAqIEBkZXYgTW9kaWZpZXIgZnVuY3Rpb24gdG8gcHJlcGVuZCB0byBsYXRlciBmdW5jdGlvbnMgaW4gdGhpcyBjb250cmFjdCBpbgogICAgICogICAgICBvcmRlciB0byByZWRuZXIgdGhlbSBvbmx5IHVzZWFibGUgYnkgdGhlIEV0aGVyYWZmbGUgYWRkcmVzcy4KICAgICAqLwogICAgbW9kaWZpZXIgb25seUV0aGVyYWZmbGUoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyYWZmbGUpOwogICAgICAgIF87CiAgICB9CiAgICAvKioKICAgICAqIEBkZXYgTW9kaWZpZXIgZnVuY3Rpb24gdG8gcHJlcGVuZCB0byBsYXRlciBmdW5jdGlvbnMgcmVuZGVyaW5nIHRoZSBtZXRob2QKICAgICAqICAgICAgb25seSBjYWxsYWJsZSBpZiB0aGUgY3Jvd2RzYWxlIGlzIHJ1bm5pbmcuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlJZlJ1bm5pbmcoKSB7CiAgICAgICAgcmVxdWlyZShJQ09SdW5uaW5nKTsKICAgICAgICBfOwogICAgfQogICAgLyoqCiAgICAgKiBAZGV2IE1vZGlmaWVyIGZ1bmN0aW9uIHRvIHByZXBlbmQgdG8gbGF0ZXIgZnVuY3Rpb25zIHJlbmRlcmluZyB0aGUgbWV0aG9kCiAgICAgKiAgICAgIG9ubHkgY2FsbGFibGUgaWYgdGhlIGNyb3dkc2FsZSBpcyBOT1QgcnVubmluZy4KICAgICAqLwogICAgbW9kaWZpZXIgb25seUlmTm90UnVubmluZygpIHsKICAgICAgICByZXF1aXJlKCFJQ09SdW5uaW5nKTsKICAgICAgICBfOwogICAgfQogICAgLyoqCiAgICAqIEBkZXYgIENvbnN0cnVjdG9yLiBTZXRzIHVwIHRoZSB2YXJpYWJsZXMgcGVydGFpbmluZyB0byB0aGUgSUNPIHN0YXJ0ICYKICAgICogICAgICAgZW5kIHRpbWVzLCB0aGUgdGllciBzdGFydCAmIGVuZCB0aW1lcywgdGhlIEV0aGVyYWZmbGUgTXVsdGlTaWcgV2FsbGV0CiAgICAqICAgICAgIGFkZHJlc3MgJiB0aGUgRXRoZXJhZmZsZSBMT1QgJiBGcmVlTE9UIHRva2VuIGNvbnRyYWN0cy4KICAgICovCiAgICBmdW5jdGlvbiBFdGhlcmFmZmxlSUNPKCkgcHVibGljIHsvL2FkZHJlc3MgX0xPVCwgYWRkcmVzcyBfZnJlZUxPVCwgYWRkcmVzcyBfbXNpZykgcHVibGljIHsKICAgICAgICBldGhlcmFmZmxlID0gMHg5N2Y1MzVlOThjZjI1MGNkZDdmZjBjYjliMjllNDU0OGI2MDlhMGJkOwogICAgICAgIExPVCAgICAgICAgPSBFdGhlcmFmZmxlTE9UKDB4QWZEOTQ3M2RmZThhNDk1Njc4NzJmOTNjMTc5MGI3NEVlN0Q5MkE5Rik7CiAgICAgICAgRnJlZUxPVCAgICA9IEV0aGVyYWZmbGVMT1QoMHhjMzlmN2JCOTdCMzExMDJDOTIzRGFGMDJiQTNkMWJEMTY0MjRGNGJiKTsKICAgIH0KICAgIC8qKgogICAgKiBAZGV2ICBQdXJjaGFzZSBMT1QgdG9rZW5zLgogICAgKiAgICAgICBMT1QgYXJlIHNlbnQgaW4gYWNjb3JkYW5jZSB3aXRoIGhvdyBtdWNoIGV0aGVyIGlzIGludmVzdGVkLCBhbmQgaW4gd2hhdAogICAgKiAgICAgICB0aWVyIHRoZSBpbnZlc3RtZW50IHdhcyBtYWRlLiBUaGUgZnVuY3Rpb24gYWxzbyBzdG9yZXMgdGhlIGFtb3VudCBvZiBldGhlcgogICAgKiAgICAgICBpbnZlc3RlZCBmb3IgbGF0ZXIgY29udmVyc2lvbiB0byB0aGUgYW1vdW50IG9mIGJvbnVzIExPVCBvd2VkLiBPbmNlIHRoZQogICAgKiAgICAgICBjcm93ZHNhbGUgaXMgb3ZlciBhbmQgdGhlIGZpbmFsIG51bWJlciBvZiB0b2tlbnMgc29sZCBpcyBrbm93biwgdGhlIHB1cmNoYXNlcidzCiAgICAqICAgICAgIGJvbnVzZXMgY2FuIGJlIGNhbGN1bGF0ZWQuIFVzaW5nIHRoZSBmYWxsYmFjayBmdW5jdGlvbiBhbGxvd3MgTE9UIHB1cmNoYXNlcnMgdG8KICAgICogICAgICAgc2ltcGx5IHNlbmQgZXRoZXIgdG8gdGhpcyBhZGRyZXNzIGluIG9yZGVyIHRvIHB1cmNoYXNlIExPVCwgd2l0aG91dCBoYXZpbmcKICAgICogICAgICAgdG8gY2FsbCBhIGZ1bmN0aW9uLiBUaGUgcmVxdWlyZW1lbnRzIGFsc28gYWxzbyBtZWFuIHRoYXQgb25jZSB0aGUgY3Jvd2RzYWxlIGlzCiAgICAqICAgICAgIG92ZXIsIGFueSBldGhlciBzZW50IHRvIHRoaXMgYWRkcmVzcyBieSBhY2NpZGVudCB3aWxsIGJlIHJldHVybmVkIHRvIHRoZSBzZW5kZXIKICAgICogICAgICAgYW5kIG5vdCBsb3N0LgogICAgKi8KICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIG9ubHlJZlJ1bm5pbmcgewogICAgICAgIC8qIFJlcXVpcmVzIHRoZSBjcm93ZHNhbGUgdGltZSB3aW5kb3cgdG8gYmUgb3BlbiBhbmQgdGhlIGZ1bmN0aW9uIGNhbGxlciB0byBzZW5kIGV0aGVyICovCiAgICAgICAgcmVxdWlyZQogICAgICAgICgKICAgICAgICAgICAgbm93IDw9IHRpZXIzRW5kICYmCiAgICAgICAgICAgIG1zZy52YWx1ZSA+PSBtaW5XZWkKICAgICAgICApOwogICAgICAgIHVpbnQgbnVtTE9UID0gMDsKICAgICAgICBpZiAobm93IDw9IElDT1N0YXJ0KSB7Ly8g4oi0IHRpZXIgemVyby4uLgogICAgICAgICAgICAvKiBFdGggaW52ZXN0YWJsZSBpbiBlYWNoIHRpZXIgaXMgY2FwcGVkIHZpYSB0aGlzIHJlcXVpcmVtZW50ICovCiAgICAgICAgICAgIHJlcXVpcmUodGllcjBUb3RhbCArIG1zZy52YWx1ZSA8PSBtYXhXZWlUaWVyMCk7CiAgICAgICAgICAgIC8qIFN0b3JlIHB1cmNoYXNlcnMgcHVyY2hhc2VkIGFtb3VudCBmb3IgbGF0ZXIgYm9udXMgcmVkZW1wdGlvbiAqLwogICAgICAgICAgICB0aWVyMFttc2cuc2VuZGVyXSArPSBtc2cudmFsdWU7CiAgICAgICAgICAgIC8qIFRyYWNrIHRvdGFsIGludmVzdG1lbnQgaW4gdGllciBvbmUgZm9yIGxhdGVyIGJvbnVzIGNhbGN1bGF0aW9uICovCiAgICAgICAgICAgIHRpZXIwVG90YWwgKz0gbXNnLnZhbHVlOwogICAgICAgICAgICAvKiBOdW1iZXIgb2YgTE9UIHRoaXMgdGllcidzIHB1cmNoYXNlIHJlc3VsdHMgaW4gKi8KICAgICAgICAgICAgbnVtTE9UID0gKG1zZy52YWx1ZSAqIHRpZXIwTE9UKSAvICgxICogMTAgKiogMTgpOwogICAgICAgICAgICAvKiBUcmFuc2ZlciB0aGUgbnVtYmVyIG9mIExPVCBib3VnaHQgdG8gdGhlIHB1cmNoYXNlciAqLwogICAgICAgICAgICBMT1QudHJhbnNmZXIobXNnLnNlbmRlciwgbnVtTE9UKTsKICAgICAgICAgICAgLyogTG9nIHRoZSAgdHJhbnNmZXIgKi8KICAgICAgICAgICAgTG9nTE9UVHJhbnNmZXIobXNnLnNlbmRlciwgMCwgbXNnLnZhbHVlLCBudW1MT1QsIG5vdyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKG5vdyA8PSB0aWVyMUVuZCkgey8vIOKItCB0aWVyIG9uZS4uLgogICAgICAgICAgICByZXF1aXJlKHRpZXIxVG90YWwgKyBtc2cudmFsdWUgPD0gbWF4V2VpVGllcjEpOwogICAgICAgICAgICB0aWVyMVttc2cuc2VuZGVyXSArPSBtc2cudmFsdWU7CiAgICAgICAgICAgIHRpZXIxVG90YWwgKz0gbXNnLnZhbHVlOwogICAgICAgICAgICBudW1MT1QgPSAobXNnLnZhbHVlICogdGllcjFMT1QpIC8gKDEgKiAxMCAqKiAxOCk7CiAgICAgICAgICAgIExPVC50cmFuc2Zlcihtc2cuc2VuZGVyLCBudW1MT1QpOwogICAgICAgICAgICBMb2dMT1RUcmFuc2Zlcihtc2cuc2VuZGVyLCAxLCBtc2cudmFsdWUsIG51bUxPVCwgbm93KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZiAobm93IDw9IHRpZXIyRW5kKSB7Ly8g4oi0IHRpZXIgdHdvLi4uCiAgICAgICAgICAgIHJlcXVpcmUodGllcjJUb3RhbCArIG1zZy52YWx1ZSA8PSBtYXhXZWlUaWVyMik7CiAgICAgICAgICAgIHRpZXIyW21zZy5zZW5kZXJdICs9IG1zZy52YWx1ZTsKICAgICAgICAgICAgdGllcjJUb3RhbCArPSBtc2cudmFsdWU7CiAgICAgICAgICAgIG51bUxPVCA9IChtc2cudmFsdWUgKiB0aWVyMkxPVCkgLyAoMSAqIDEwICoqIDE4KTsKICAgICAgICAgICAgTE9ULnRyYW5zZmVyKG1zZy5zZW5kZXIsIG51bUxPVCk7CiAgICAgICAgICAgIExvZ0xPVFRyYW5zZmVyKG1zZy5zZW5kZXIsIDIsIG1zZy52YWx1ZSwgbnVtTE9ULCBub3cpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsvLyDiiLQgdGllciB0aHJlZS4uLgogICAgICAgICAgICByZXF1aXJlKHRpZXIzVG90YWwgKyBtc2cudmFsdWUgPD0gbWF4V2VpVGllcjMpOwogICAgICAgICAgICB0aWVyM1ttc2cuc2VuZGVyXSArPSBtc2cudmFsdWU7CiAgICAgICAgICAgIHRpZXIzVG90YWwgKz0gbXNnLnZhbHVlOwogICAgICAgICAgICBudW1MT1QgPSAobXNnLnZhbHVlICogdGllcjNMT1QpIC8gKDEgKiAxMCAqKiAxOCk7CiAgICAgICAgICAgIExPVC50cmFuc2Zlcihtc2cuc2VuZGVyLCBudW1MT1QpOwogICAgICAgICAgICBMb2dMT1RUcmFuc2Zlcihtc2cuc2VuZGVyLCAzLCBtc2cudmFsdWUsIG51bUxPVCwgbm93KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgIH0KICAgIC8qKgogICAgKiBAZGV2ICAgICAgUmVkZWVtIGJvbnVzIExPVDogVGhpcyBmdW5jdGlvbiBjYW5ub3QgYmUgY2FsbGVkIHVudGlsCiAgICAqICAgICAgICAgICB0aGUgY3Jvd2RzYWxlIGlzIG92ZXIsIG5vciBhZnRlciB0aGUgd2l0aGRyYXcgcGVyaW9kLgogICAgKiAgICAgICAgICAgRHVyaW5nIHRoaXMgd2luZG93LCBhIExPVCBwdXJjaGFzZXIgY2FsbHMgdGhpcyBmdW5jdGlvbgogICAgKiAgICAgICAgICAgaW4gb3JkZXIgdG8gcmVjZWl2ZSB0aGVpciBib251cyBMT1Qgb3dlZCB0byB0aGVtLCBhcwogICAgKiAgICAgICAgICAgY2FsY3VsYXRlZCBieSB0aGVpciBzaGFyZSBvZiB0aGUgdG90YWwgYW1vdW50IG9mIExPVAogICAgKiAgICAgICAgICAgc2FsZXMgaW4gdGhlIHRpZXIocykgZm9sbG93aW5nIHRoZWlyIHB1cmNoYXNlLiBPbmNlCiAgICAqICAgICAgICAgICBjbGFpbWVkLCB1c2VyJ3MgcHVyY2hhc2VkIGFtb3VudHMgYXJlIHNldCB0byAxIHdlaSByYXRoZXIKICAgICogICAgICAgICAgIHRoYW4gemVybywgdG8gYWxsb3cgdGhlIGNvbnRyYWN0IHRvIG1haW50YWluIGEgbGlzdCBvZgogICAgKiAgICAgICAgICAgcHVyY2hhc2VycyBpbiBlYWNoLiBBbGwgaW52ZXN0b3JzLCByZWdhcmRsZXNzIG9mIHRpZXIvYW1vdW50LAogICAgKiAgICAgICAgICAgcmVjZWl2ZSB0ZW4gZnJlZSBlbnRyaWVzIGludG8gdGhlIGZsYWdzaGlwIFNhdHVyZGF5CiAgICAqICAgICAgICAgICBFdGhlcmFmZmxlIHZpYSB0aGUgRnJlZUxPVCBjb3Vwb24uCiAgICAqLwogICAgZnVuY3Rpb24gcmVkZWVtQm9udXNMb3QoKSBleHRlcm5hbCBvbmx5SWZSdW5uaW5nIHsgLy84MWsgZ2FzCiAgICAgICAgLyogUmVxdWlyZXMgY3Jvd2RzYWxlIHRvIGJlIG92ZXIgYW5kIHRoZSB3ZEJlZm9yZSB0aW1lIHRvIG5vdCBoYXZlIHBhc3NlZCB5ZXQgKi8KICAgICAgICByZXF1aXJlCiAgICAgICAgKAogICAgICAgICAgICBub3cgPiB0aWVyM0VuZCAmJgogICAgICAgICAgICBub3cgPCB3ZEJlZm9yZQogICAgICAgICk7CiAgICAgICAgLyogUmVxdWlyZXMgdXNlciB0byBoYXZlIGEgTE9UIHB1cmNoYXNlIGluIGF0IGxlYXN0IG9uZSBvZiB0aGUgdGllcnMuICovCiAgICAgICAgcmVxdWlyZQogICAgICAgICgKICAgICAgICAgICAgdGllcjBbbXNnLnNlbmRlcl0gPiAxIHx8CiAgICAgICAgICAgIHRpZXIxW21zZy5zZW5kZXJdID4gMSB8fAogICAgICAgICAgICB0aWVyMlttc2cuc2VuZGVyXSA+IDEgfHwKICAgICAgICAgICAgdGllcjNbbXNnLnNlbmRlcl0gPiAxCiAgICAgICAgKTsKICAgICAgICB1aW50IGJvbnVzTnVtTE9UOwogICAgICAgIC8qIElmIHB1cmNoYXNlciBoYXMgZXRoZXIgaW4gdGhpcyB0aWVyLCBMT1QgdG9rZW5zIG93ZWQgaXMgY2FsY3VsYXRlZCBhbmQgYWRkZWQgdG8gTE9UIGFtb3VudCAqLwogICAgICAgIGlmKHRpZXIwW21zZy5zZW5kZXJdID4gMSkgewogICAgICAgICAgICBib251c051bUxPVCArPQogICAgICAgICAgICAvKiBDYWxjdWxhdGUgc2hhcmUgb2YgYm9udXMgTE9UIHVzZXIgaXMgZW50aXRsZWQgdG8sIGJhc2VkIG9uIHRpZXIgb25lIHNhbGVzICovCiAgICAgICAgICAgICgodGllcjFUb3RhbCAqIGJvbnVzTE9UICogdGllcjBbbXNnLnNlbmRlcl0pIC8gKHRpZXIwVG90YWwgKiAoMSAqIDEwICoqIDE4KSkpICsKICAgICAgICAgICAgLyogQ2FsY3VsYXRlIHNoYXJlIG9mIGJvbnVzIExPVCB1c2VyIGlzIGVudGl0bGVkIHRvLCBiYXNlZCBvbiB0aWVyIHR3byBzYWxlcyAqLwogICAgICAgICAgICAoKHRpZXIyVG90YWwgKiBib251c0xPVCAqIHRpZXIwW21zZy5zZW5kZXJdKSAvICh0aWVyMFRvdGFsICogKDEgKiAxMCAqKiAxOCkpKSArCiAgICAgICAgICAgIC8qIENhbGN1bGF0ZSBzaGFyZSBvZiBib251cyBMT1QgdXNlciBpcyBlbnRpdGxlZCB0bywgYmFzZWQgb24gdGllciB0aHJlZSBzYWxlcyAqLwogICAgICAgICAgICAoKHRpZXIzVG90YWwgKiBib251c0xPVCAqIHRpZXIwW21zZy5zZW5kZXJdKSAvICh0aWVyMFRvdGFsICogKDEgKiAxMCAqKiAxOCkpKTsKICAgICAgICAgICAgLyogU2V0IGFtb3VudCBvZiBldGhlciBpbiB0aGlzIHRpZXIgdG8gMSB0byBtYWtlIGZ1cnRoZXIgYm9udXMgcmVkZW1wdGlvbnMgaW1wb3NzaWJsZSAqLwogICAgICAgICAgICB0aWVyMFttc2cuc2VuZGVyXSA9IDE7CiAgICAgICAgfQogICAgICAgIGlmKHRpZXIxW21zZy5zZW5kZXJdID4gMSkgewogICAgICAgICAgICBib251c051bUxPVCArPQogICAgICAgICAgICAoKHRpZXIyVG90YWwgKiBib251c0xPVCAqIHRpZXIxW21zZy5zZW5kZXJdKSAvICh0aWVyMVRvdGFsICogKDEgKiAxMCAqKiAxOCkpKSArCiAgICAgICAgICAgICgodGllcjNUb3RhbCAqIGJvbnVzTE9UICogdGllcjFbbXNnLnNlbmRlcl0pIC8gKHRpZXIxVG90YWwgKiAoMSAqIDEwICoqIDE4KSkpOwogICAgICAgICAgICB0aWVyMVttc2cuc2VuZGVyXSA9IDE7CiAgICAgICAgfQogICAgICAgIGlmKHRpZXIyW21zZy5zZW5kZXJdID4gMSkgewogICAgICAgICAgICBib251c051bUxPVCArPQogICAgICAgICAgICAoKHRpZXIzVG90YWwgKiBib251c0xPVCAqIHRpZXIyW21zZy5zZW5kZXJdKSAvICh0aWVyMlRvdGFsICogKDEgKiAxMCAqKiAxOCkpKTsKICAgICAgICAgICAgdGllcjJbbXNnLnNlbmRlcl0gPSAxOwogICAgICAgIH0KICAgICAgICBpZih0aWVyM1ttc2cuc2VuZGVyXSA+IDEpIHsKICAgICAgICAgICAgdGllcjNbbXNnLnNlbmRlcl0gPSAxOwogICAgICAgIH0KICAgICAgICAvKiBGaW5hbCBjaGVjayB0aGF0IHVzZXIgY2Fubm90IHdpdGhkcmF3IHR3aWNlICovCiAgICAgICAgcmVxdWlyZQogICAgICAgICgKICAgICAgICAgICAgdGllcjBbbXNnLnNlbmRlcl0gIDw9IDEgJiYKICAgICAgICAgICAgdGllcjFbbXNnLnNlbmRlcl0gIDw9IDEgJiYKICAgICAgICAgICAgdGllcjJbbXNnLnNlbmRlcl0gIDw9IDEgJiYKICAgICAgICAgICAgdGllcjNbbXNnLnNlbmRlcl0gIDw9IDEKICAgICAgICApOwogICAgICAgIC8qIFRyYW5zZmVyIGJvbnVzIExPVCB0byBib251cyByZWRlZW1lciAqLwogICAgICAgIGlmKGJvbnVzTnVtTE9UID4gMCkgewogICAgICAgICAgICBMT1QudHJhbnNmZXIobXNnLnNlbmRlciwgYm9udXNOdW1MT1QpOwogICAgICAgIH0KICAgICAgICAvKiBNaW50IEZyZWVMT1QgYW5kIGdpdmUgdG8gYm9udXMgcmVkZWVtZXIgKi8KICAgICAgICBGcmVlTE9ULm1pbnQobXNnLnNlbmRlciwgYm9udXNGcmVlTE9UKTsKICAgICAgICAvKiBMb2cgdGhlIGJvbnVzIExPVCByZWRlbXB0aW9uICovCiAgICAgICAgTG9nQm9udXNMT1RSZWRlbXB0aW9uKG1zZy5zZW5kZXIsIGJvbnVzTnVtTE9ULCBub3cpOwogICAgfQogICAgLyoqCiAgICAqIEBkZXYgICAgU2hvdWxkIGNyb3dkc2FsZSBiZSBjYW5jZWxsZWQgZm9yIGFueSByZWFzb24gb25jZSBpdCBoYXMKICAgICogICAgICAgICBiZWd1biwgYW55IGV0aGVyIGlzIHJlZnVuZGVkIHRvIHRoZSBwdXJjaGFzZXIgYnkgY2FsbGluZwogICAgKiAgICAgICAgIHRoaXMgZnVuY2lvbi4gRnVuY3Rpb24gY2hlY2tzIGVhY2ggdGllciBpbiB0dXJuLCB0b3RhbGxpbmcKICAgICogICAgICAgICB0aGUgYW1vdW50IHdoaWxzdCB6ZXJvaW5nIHRoZSBiYWxhbmNlLCBhbmQgZmluYWxseSBtYWtlcwogICAgKiAgICAgICAgIHRoZSB0cmFuc2Zlci4KICAgICovCiAgICBmdW5jdGlvbiByZWZ1bmRFdGhlcigpIGV4dGVybmFsIG9ubHlJZk5vdFJ1bm5pbmcgewogICAgICAgIHVpbnQgYW1vdW50OwogICAgICAgIGlmKHRpZXIwW21zZy5zZW5kZXJdID4gMSkgewogICAgICAgICAgICAvKiBBZGQgYmFsYW5jZSBvZiBjYWxsZXIncyBhZGRyZXNzIGluIHRoaXMgdGllciB0byB0aGUgYW1vdW50ICovCiAgICAgICAgICAgIGFtb3VudCArPSB0aWVyMFttc2cuc2VuZGVyXTsKICAgICAgICAgICAgLyogWmVybyBjYWxsZXJzIGJhbGFuY2UgaW4gdGhpcyB0aWVyICovCiAgICAgICAgICAgIHRpZXIwW21zZy5zZW5kZXJdID0gMDsKICAgICAgICB9CiAgICAgICAgaWYodGllcjFbbXNnLnNlbmRlcl0gPiAxKSB7CiAgICAgICAgICAgIGFtb3VudCArPSB0aWVyMVttc2cuc2VuZGVyXTsKICAgICAgICAgICAgdGllcjFbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIH0KICAgICAgICBpZih0aWVyMlttc2cuc2VuZGVyXSA+IDEpIHsKICAgICAgICAgICAgYW1vdW50ICs9IHRpZXIyW21zZy5zZW5kZXJdOwogICAgICAgICAgICB0aWVyMlttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgfQogICAgICAgIGlmKHRpZXIzW21zZy5zZW5kZXJdID4gMSkgewogICAgICAgICAgICBhbW91bnQgKz0gdGllcjNbbXNnLnNlbmRlcl07CiAgICAgICAgICAgIHRpZXIzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICB9CiAgICAgICAgLyogRmluYWwgY2hlY2sgdGhhdCB1c2VyIGNhbm5vdCBiZSByZWZ1bmRlZCB0d2ljZSAqLwogICAgICAgIHJlcXVpcmUKICAgICAgICAoCiAgICAgICAgICAgIHRpZXIwW21zZy5zZW5kZXJdID09IDAgJiYKICAgICAgICAgICAgdGllcjFbbXNnLnNlbmRlcl0gPT0gMCAmJgogICAgICAgICAgICB0aWVyMlttc2cuc2VuZGVyXSA9PSAwICYmCiAgICAgICAgICAgIHRpZXIzW21zZy5zZW5kZXJdID09IDAKICAgICAgICApOwogICAgICAgIC8qIFRyYW5zZmVyIHRoZSBldGhlciB0byB0aGUgY2FsbGVyICovCiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQpOwogICAgICAgIC8qIExvZyB0aGUgcmVmdW5kICovCiAgICAgICAgTG9nUmVmdW5kKG1zZy5zZW5kZXIsIGFtb3VudCwgbm93KTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAvKioKICAgICogQGRldiAgICBGdW5jdGlvbiBjYWxsYWJsZSBvbmx5IGJ5IEV0aGVyYWZmbGUncyBtdWx0aS1zaWcgd2FsbGV0LiBJdAogICAgKiAgICAgICAgIHRyYW5zZmVycyB0aGUgdGllcidzIHJhaXNlZCBldGhlciB0byB0aGUgZXRoZXJhZmZsZSBtdWx0aXNpZyB3YWxsZXQKICAgICogICAgICAgICBvbmNlIHRoZSB0aWVyIGlzIG92ZXIuCiAgICAqCiAgICAqIEBwYXJhbSBfdGllciAgICBUaGUgdGllciBmcm9tIHdoaWNoIHRoZSB3aXRoZHJhd2FsIGlzIGJlaW5nIG1hZGUuCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJFdGhlcih1aW50IF90aWVyKSBleHRlcm5hbCBvbmx5SWZSdW5uaW5nIG9ubHlFdGhlcmFmZmxlIHsKICAgICAgICBpZihfdGllciA9PSAwKSB7CiAgICAgICAgICAgIC8qIFJlcXVpcmUgdGllciB6ZXJvIHRvIGJlIG92ZXIgYW5kIGEgdGllciB6ZXJvIGV0aGVyIGJlIGdyZWF0ZXIgdGhhbiAwICovCiAgICAgICAgICAgIHJlcXVpcmUobm93ID4gSUNPU3RhcnQgJiYgdGllcjBUb3RhbCA+IDApOwogICAgICAgICAgICAvKiBUcmFuc2ZlciB0aGUgdGllciB6ZXJvIHRvdGFsIHRvIHRoZSBldGhlcmFmZmxlIG11bHRpc2lnICovCiAgICAgICAgICAgIGV0aGVyYWZmbGUudHJhbnNmZXIodGllcjBUb3RhbCk7CiAgICAgICAgICAgIC8qIExvZyB0aGUgdHJhbnNmZXIgZXZlbnQgKi8KICAgICAgICAgICAgTG9nRXRoZXJUcmFuc2Zlcihtc2cuc2VuZGVyLCB0aWVyMFRvdGFsLCBub3cpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmKF90aWVyID09IDEpIHsKICAgICAgICAgICAgcmVxdWlyZShub3cgPiB0aWVyMUVuZCAmJiB0aWVyMVRvdGFsID4gMCk7CiAgICAgICAgICAgIGV0aGVyYWZmbGUudHJhbnNmZXIodGllcjFUb3RhbCk7CiAgICAgICAgICAgIExvZ0V0aGVyVHJhbnNmZXIobXNnLnNlbmRlciwgdGllcjFUb3RhbCwgbm93KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZihfdGllciA9PSAyKSB7CiAgICAgICAgICAgIHJlcXVpcmUobm93ID4gdGllcjJFbmQgJiYgdGllcjJUb3RhbCA+IDApOwogICAgICAgICAgICBldGhlcmFmZmxlLnRyYW5zZmVyKHRpZXIyVG90YWwpOwogICAgICAgICAgICBMb2dFdGhlclRyYW5zZmVyKG1zZy5zZW5kZXIsIHRpZXIyVG90YWwsIG5vdyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYoX3RpZXIgPT0gMykgewogICAgICAgICAgICByZXF1aXJlKG5vdyA+IHRpZXIzRW5kICYmIHRpZXIzVG90YWwgPiAwKTsKICAgICAgICAgICAgZXRoZXJhZmZsZS50cmFuc2Zlcih0aWVyM1RvdGFsKTsKICAgICAgICAgICAgTG9nRXRoZXJUcmFuc2Zlcihtc2cuc2VuZGVyLCB0aWVyM1RvdGFsLCBub3cpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmKF90aWVyID09IDQpIHsKICAgICAgICAgICAgcmVxdWlyZShub3cgPiB0aWVyM0VuZCAmJiB0aGlzLmJhbGFuY2UgPiAwKTsKICAgICAgICAgICAgZXRoZXJhZmZsZS50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgICAgICBMb2dFdGhlclRyYW5zZmVyKG1zZy5zZW5kZXIsIHRoaXMuYmFsYW5jZSwgbm93KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgIH0KICAgIC8qKgogICAgKiBAZGV2ICAgIEZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgYnkgRXRoZXJhZmZsZSdzIG11bHRpLXNpZyB3YWxsZXQuCiAgICAqICAgICAgICAgSXQgdHJhbnNmZXJzIGFueSByZW1haW5pbmcgdW5zb2xkIExPVCB0b2tlbnMgdG8gdGhlCiAgICAqICAgICAgICAgRXRoZXJhZmZsZSBtdWx0aXNpZyB3YWxsZXQuIEZ1bmN0aW9uIG9ubHkgY2FsbGFibGUgb25jZQogICAgKiAgICAgICAgIHRoZSB3aXRoZHJhdyBwZXJpb2QgYW5kIOKItCB0aGUgSUNPIGVuZHMuCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJMT1QoKSBvbmx5RXRoZXJhZmZsZSBvbmx5SWZSdW5uaW5nIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKG5vdyA+IHdkQmVmb3JlKTsKICAgICAgICB1aW50IGFtdCA9IExPVC5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgTE9ULnRyYW5zZmVyKGV0aGVyYWZmbGUsIGFtdCk7CiAgICAgICAgTG9nTE9UVHJhbnNmZXIobXNnLnNlbmRlciwgNSwgMCwgYW10LCBub3cpOwogICAgfQogICAgLyoqCiAgICAqIEBkZXYgICAgVG9nZ2xlIGNyb3dkc2FsZSBzdGF0dXMuIE9ubHkgY2FsbGFibGUgYnkgdGhlIEV0aGVyYWZmbGUKICAgICogICAgICAgICBtdXRsaXNpZyBhY2NvdW50LiBJZiBzZXQgdG8gZmFsc2UsIHRoZSByZWZ1bmQgZnVuY3Rpb24KICAgICogICAgICAgICBiZWNvbWVzIGxpdmUgYWxsb3cgcHVyY2hhc2VycyB0byB3aXRoZHJhdyB0aGVpciBldGhlcgogICAgKgogICAgKi8KICAgIGZ1bmN0aW9uIHNldENyb3dkU2FsZVN0YXR1cyhib29sIF9zdGF0dXMpIGV4dGVybmFsIG9ubHlFdGhlcmFmZmxlIHsKICAgICAgICBJQ09SdW5uaW5nID0gX3N0YXR1czsKICAgIH0KICAgIC8qKgogICAgICogQGRldiBUaGlzIGZ1bmN0aW9uIGlzIHdoYXQgYWxsb3dzIHRoaXMgY29udHJhY3QgdG8gcmVjZWl2ZSBFUkMyMjMKICAgICAqICAgICAgY29tcGxpYW50IHRva2Vucy4gQW55IHRva2VucyBzZW50IHRvIHRoaXMgYWRkcmVzcyB3aWxsIGZpcmUgb2ZmCiAgICAgKiAgICAgIGFuIGV2ZW50IGFubm91bmNpbmcgdGhlaXIgYXJyaXZhbC4gVW5saWtlIEVSQzIwIHRva2VucywgRVJDMjIzCiAgICAgKiAgICAgIHRva2VucyBjYW5ub3QgYmUgc2VudCB0byBjb250cmFjdHMgYWJzZW50IHRoaXMgZnVuY3Rpb24sCiAgICAgKiAgICAgIHRoZXJlYnkgcHJldmVudGluZyBsb3NzIG9mIHRva2VucyBieSBtaXN0YWtlbmx5IHNlbmRpbmcgdGhlbSB0bwogICAgICogICAgICBjb250cmFjdHMgbm90IGRlc2lnbmVkIHRvIGFjY2VwdCB0aGVtLgogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSAgICAgRnJvbSB3aG9tIHRoZSB0cmFuc2ZlciBvcmlnaW5hdGVkCiAgICAgKiBAcGFyYW0gX3ZhbHVlICAgIEhvdyBtYW55IHRva2VucyB3ZXJlIHNlbnQKICAgICAqIEBwYXJhbSBfZGF0YSAgICAgVHJhbnNhY3Rpb24gbWV0YWRhdGEKICAgICAqLwogICAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHB1YmxpYyB7CiAgICAgICAgaWYgKF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgTG9nVG9rZW5EZXBvc2l0KF9mcm9tLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEBkZXYgICBIb3VzZWtlZXBpbmcgZnVuY3Rpb24gaW4gdGhlIGV2ZW50IHRoaXMgY29udHJhY3QgaXMgbm8KICAgICAqICAgICAgICBsb25nZXIgbmVlZGVkLiBXaWxsIGRlbGV0ZSB0aGUgY29kZSBmcm9tIHRoZSBibG9ja2NoYWluLgogICAgICovCiAgICBmdW5jdGlvbiBzZWxmRGVzdHJ1Y3QoKSBleHRlcm5hbCBvbmx5SWZOb3RSdW5uaW5nIG9ubHlFdGhlcmFmZmxlIHsKICAgICAgICBzZWxmZGVzdHJ1Y3QoZXRoZXJhZmZsZSk7CiAgICB9Cn0='.
	

]
