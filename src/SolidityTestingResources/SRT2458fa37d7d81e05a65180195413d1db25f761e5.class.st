Class {
	#name : #SRT2458fa37d7d81e05a65180195413d1db25f761e5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2458fa37d7d81e05a65180195413d1db25f761e5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjsKCmNvbnRyYWN0IFNwaWNlTWVtYmVycyB7CiAgICBlbnVtIE1lbWJlckxldmVsIHsgTm9uZSwgTWVtYmVyLCBNYW5hZ2VyLCBEaXJlY3RvciB9CiAgICBzdHJ1Y3QgTWVtYmVyIHsKICAgICAgICB1aW50IGlkOwogICAgICAgIE1lbWJlckxldmVsIGxldmVsOwogICAgICAgIGJ5dGVzMzIgaW5mbzsKICAgIH0KCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IE1lbWJlcikgbWVtYmVyOwoKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgbWFwcGluZyAodWludCA9PiBhZGRyZXNzKSBwdWJsaWMgbWVtYmVyQWRkcmVzczsKICAgIHVpbnQgcHVibGljIG1lbWJlckNvdW50OwoKICAgIGV2ZW50IFRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsIGFkZHJlc3MgaW5kZXhlZCBvd25lcik7CiAgICBldmVudCBBZGRNZW1iZXIoYWRkcmVzcyBpbmRleGVkIHNlbmRlciwgYWRkcmVzcyBpbmRleGVkIG1lbWJlcik7CiAgICBldmVudCBSZW1vdmVNZW1iZXIoYWRkcmVzcyBpbmRleGVkIHNlbmRlciwgYWRkcmVzcyBpbmRleGVkIG1lbWJlcik7CiAgICBldmVudCBTZXRNZW1iZXJMZXZlbChhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLCBhZGRyZXNzIGluZGV4ZWQgbWVtYmVyLCBNZW1iZXJMZXZlbCBsZXZlbCk7CiAgICBldmVudCBTZXRNZW1iZXJJbmZvKGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsIGFkZHJlc3MgaW5kZXhlZCBtZW1iZXIsIGJ5dGVzMzIgaW5mbyk7CgogICAgZnVuY3Rpb24gU3BpY2VNZW1iZXJzKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKCiAgICAgICAgbWVtYmVyQ291bnQgPSAxOwogICAgICAgIG1lbWJlckFkZHJlc3NbbWVtYmVyQ291bnRdID0gb3duZXI7CiAgICAgICAgbWVtYmVyW293bmVyXSA9IE1lbWJlcihtZW1iZXJDb3VudCwgTWVtYmVyTGV2ZWwuTm9uZSwgMCk7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5TWFuYWdlciB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIgJiYgbWVtYmVyTGV2ZWwobXNnLnNlbmRlcikgPCBNZW1iZXJMZXZlbC5NYW5hZ2VyKSB0aHJvdzsKICAgICAgICBfOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF90YXJnZXQpIG9ubHlPd25lciB7CiAgICAgICAgLy8gSWYgbmV3IG93bmVyIGhhcyBubyBtZW1iZXJJZCwgY3JlYXRlIG9uZQogICAgICAgIGlmIChtZW1iZXJbX3RhcmdldF0uaWQgPT0gMCkgewogICAgICAgICAgICBtZW1iZXJDb3VudCsrOwogICAgICAgICAgICBtZW1iZXJBZGRyZXNzW21lbWJlckNvdW50XSA9IF90YXJnZXQ7CiAgICAgICAgICAgIG1lbWJlcltfdGFyZ2V0XSA9IE1lbWJlcihtZW1iZXJDb3VudCwgTWVtYmVyTGV2ZWwuTm9uZSwgMCk7CiAgICAgICAgfQogICAgICAgIG93bmVyID0gX3RhcmdldDsKICAgICAgICBUcmFuc2Zlck93bmVyc2hpcChtc2cuc2VuZGVyLCBvd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkTWVtYmVyKGFkZHJlc3MgX3RhcmdldCkgb25seU1hbmFnZXIgewogICAgICAgIC8vIE1ha2Ugc3VyZSB0cnlpbmcgdG8gYWRkIGFuIGV4aXN0aW5nIG1lbWJlciB0aHJvd3MgYW4gZXJyb3IKICAgICAgICBpZiAobWVtYmVyTGV2ZWwoX3RhcmdldCkgIT0gTWVtYmVyTGV2ZWwuTm9uZSkgdGhyb3c7CgogICAgICAgIC8vIElmIGFkZGVkIG1lbWJlciBoYXMgbm8gbWVtYmVySWQsIGNyZWF0ZSBvbmUKICAgICAgICBpZiAobWVtYmVyW190YXJnZXRdLmlkID09IDApIHsKICAgICAgICAgICAgbWVtYmVyQ291bnQrKzsKICAgICAgICAgICAgbWVtYmVyQWRkcmVzc1ttZW1iZXJDb3VudF0gPSBfdGFyZ2V0OwogICAgICAgICAgICBtZW1iZXJbX3RhcmdldF0gPSBNZW1iZXIobWVtYmVyQ291bnQsIE1lbWJlckxldmVsLk5vbmUsIDApOwogICAgICAgIH0KCiAgICAgICAgLy8gU2V0IG1lbWJlckxldmVsIHRvIGluaXRpYWwgdmFsdWUgd2l0aCBiYXNpYyBhY2Nlc3MKICAgICAgICBtZW1iZXJbX3RhcmdldF0ubGV2ZWwgPSBNZW1iZXJMZXZlbC5NZW1iZXI7CiAgICAgICAgQWRkTWVtYmVyKG1zZy5zZW5kZXIsIF90YXJnZXQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZU1lbWJlcihhZGRyZXNzIF90YXJnZXQpIHsKICAgICAgICAvLyBNYWtlIHN1cmUgdHJ5aW5nIHRvIHJlbW92ZSBhIG5vbi1leGlzdGluZyBtZW1iZXIgdGhyb3dzIGFuIGVycm9yCiAgICAgICAgaWYgKG1lbWJlckxldmVsKF90YXJnZXQpID09IE1lbWJlckxldmVsLk5vbmUpIHRocm93OwogICAgICAgIC8vIE1ha2Ugc3VyZSBtZW1iZXJzIGFyZSBvbmx5IGFsbG93ZWQgdG8gZGVsZXRlIG1lbWJlcnMgbG93ZXIgdGhhbiB0aGVpciBsZXZlbAogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyICYmIG1lbWJlckxldmVsKG1zZy5zZW5kZXIpIDw9IG1lbWJlckxldmVsKF90YXJnZXQpKSB0aHJvdzsKCiAgICAgICAgbWVtYmVyW190YXJnZXRdLmxldmVsID0gTWVtYmVyTGV2ZWwuTm9uZTsKICAgICAgICBSZW1vdmVNZW1iZXIobXNnLnNlbmRlciwgX3RhcmdldCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TWVtYmVyTGV2ZWwoYWRkcmVzcyBfdGFyZ2V0LCBNZW1iZXJMZXZlbCBsZXZlbCkgewogICAgICAgIC8vIE1ha2Ugc3VyZSBhbGwgbGV2ZWxzIGFyZSBsYXJnZXIgdGhhbiBOb25lIGJ1dCBub3QgaGlnaGVyIHRoYW4gRGlyZWN0b3IKICAgICAgICBpZiAobGV2ZWwgPT0gTWVtYmVyTGV2ZWwuTm9uZSB8fCBsZXZlbCA+IE1lbWJlckxldmVsLkRpcmVjdG9yKSB0aHJvdzsKICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIF90YXJnZXQgaXMgY3VycmVudGx5IGFscmVhZHkgYSBtZW1iZXIKICAgICAgICBpZiAobWVtYmVyTGV2ZWwoX3RhcmdldCkgPT0gTWVtYmVyTGV2ZWwuTm9uZSkgdGhyb3c7CiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBuZXcgbGV2ZWwgaXMgbG93ZXIgbGV2ZWwgdGhhbiB3ZSBhcmUgKHdlIGNhbm5vdCBvdmVycHJvbW90ZSkKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lciAmJiBtZW1iZXJMZXZlbChtc2cuc2VuZGVyKSA8PSBsZXZlbCkgdGhyb3c7CiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBtZW1iZXIgaXMgY3VycmVudGx5IG9uIGxvd2VyIGxldmVsIHRoYW4gd2UgYXJlCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIgJiYgbWVtYmVyTGV2ZWwobXNnLnNlbmRlcikgPD0gbWVtYmVyTGV2ZWwoX3RhcmdldCkpIHRocm93OwoKICAgICAgICBtZW1iZXJbX3RhcmdldF0ubGV2ZWwgPSBsZXZlbDsKICAgICAgICBTZXRNZW1iZXJMZXZlbChtc2cuc2VuZGVyLCBfdGFyZ2V0LCBsZXZlbCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TWVtYmVySW5mbyhhZGRyZXNzIF90YXJnZXQsIGJ5dGVzMzIgaW5mbykgewogICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdGFyZ2V0IGlzIGN1cnJlbnRseSBhbHJlYWR5IGEgbWVtYmVyCiAgICAgICAgaWYgKG1lbWJlckxldmVsKF90YXJnZXQpID09IE1lbWJlckxldmVsLk5vbmUpIHRocm93OwogICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgbWVtYmVyIGlzIGN1cnJlbnRseSBvbiBsb3dlciBsZXZlbCB0aGFuIHdlIGFyZQogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyICYmIG1zZy5zZW5kZXIgIT0gX3RhcmdldCAmJiBtZW1iZXJMZXZlbChtc2cuc2VuZGVyKSA8PSBtZW1iZXJMZXZlbChfdGFyZ2V0KSkgdGhyb3c7CgogICAgICAgIG1lbWJlcltfdGFyZ2V0XS5pbmZvID0gaW5mbzsKICAgICAgICBTZXRNZW1iZXJJbmZvKG1zZy5zZW5kZXIsIF90YXJnZXQsIGluZm8pOwogICAgfQoKICAgIGZ1bmN0aW9uIG1lbWJlcklkKGFkZHJlc3MgX3RhcmdldCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBtZW1iZXJbX3RhcmdldF0uaWQ7CiAgICB9CgogICAgZnVuY3Rpb24gbWVtYmVyTGV2ZWwoYWRkcmVzcyBfdGFyZ2V0KSBjb25zdGFudCByZXR1cm5zIChNZW1iZXJMZXZlbCkgewogICAgICAgIHJldHVybiBtZW1iZXJbX3RhcmdldF0ubGV2ZWw7CiAgICB9CgogICAgZnVuY3Rpb24gbWVtYmVySW5mbyhhZGRyZXNzIF90YXJnZXQpIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzMzIpIHsKICAgICAgICByZXR1cm4gbWVtYmVyW190YXJnZXRdLmluZm87CiAgICB9Cn0KCmNvbnRyYWN0IFNwaWNlQ29udHJvbGxlZCB7CiAgICBTcGljZU1lbWJlcnMgbWVtYmVyczsKCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIGlmICghaGFzT3duZXJBY2Nlc3MobXNnLnNlbmRlcikpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seURpcmVjdG9yIHsKICAgICAgICBpZiAoIWhhc0RpcmVjdG9yQWNjZXNzKG1zZy5zZW5kZXIpKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlNYW5hZ2VyIHsKICAgICAgICBpZiAoIWhhc01hbmFnZXJBY2Nlc3MobXNnLnNlbmRlcikpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seU1lbWJlciB7CiAgICAgICAgaWYgKCFoYXNNZW1iZXJBY2Nlc3MobXNnLnNlbmRlcikpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gU3BpY2VDb250cm9sbGVkKGFkZHJlc3MgbWVtYmVyc0FkZHJlc3MpIHsKICAgICAgICBtZW1iZXJzID0gU3BpY2VNZW1iZXJzKG1lbWJlcnNBZGRyZXNzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBoYXNPd25lckFjY2VzcyhhZGRyZXNzIF90YXJnZXQpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gKF90YXJnZXQgPT0gbWVtYmVycy5vd25lcigpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBoYXNEaXJlY3RvckFjY2VzcyhhZGRyZXNzIF90YXJnZXQpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gKG1lbWJlcnMubWVtYmVyTGV2ZWwoX3RhcmdldCkgPj0gU3BpY2VNZW1iZXJzLk1lbWJlckxldmVsLkRpcmVjdG9yIHx8IGhhc093bmVyQWNjZXNzKF90YXJnZXQpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBoYXNNYW5hZ2VyQWNjZXNzKGFkZHJlc3MgX3RhcmdldCkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAobWVtYmVycy5tZW1iZXJMZXZlbChfdGFyZ2V0KSA+PSBTcGljZU1lbWJlcnMuTWVtYmVyTGV2ZWwuTWFuYWdlciB8fCBoYXNPd25lckFjY2VzcyhfdGFyZ2V0KSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGhhc01lbWJlckFjY2VzcyhhZGRyZXNzIF90YXJnZXQpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gKG1lbWJlcnMubWVtYmVyTGV2ZWwoX3RhcmdldCkgPj0gU3BpY2VNZW1iZXJzLk1lbWJlckxldmVsLk1lbWJlciB8fCBoYXNPd25lckFjY2VzcyhfdGFyZ2V0KSk7CiAgICB9Cn0KCmNvbnRyYWN0IElQYXlvdXRDYWxjdWxhdG9yIHsKICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVBheW91dChieXRlczMyIF9pbmZvLCB1aW50IF9kdXJhdGlvbikgcmV0dXJucyAodWludCk7Cn0KCmNvbnRyYWN0IFNwaWNlUGF5cm9sbCBpcyBTcGljZUNvbnRyb2xsZWQgewogICAgc3RydWN0IFBheXJvbGxFbnRyeSB7CiAgICAgICAgYm9vbCBhdmFpbGFibGU7CiAgICAgICAgdWludCBkdXJhdGlvbjsKICAgICAgICBib29sIHByb2Nlc3NlZDsKICAgICAgICB1aW50IHBheW91dDsKICAgIH0KCiAgICBhZGRyZXNzIGNyZWF0b3I7CgogICAgdWludCBwdWJsaWMgZnJvbUJsb2NrOwogICAgdWludCBwdWJsaWMgdG9CbG9jazsKCiAgICBtYXBwaW5nIChieXRlczMyID0+IFBheXJvbGxFbnRyeSkgZW50cmllczsKICAgIGJ5dGVzMzJbXSBpbmZvczsKCiAgICBhZGRyZXNzIGNhbGN1bGF0b3I7CiAgICBib29sIHB1YmxpYyBsb2NrZWQ7CgogICAgZXZlbnQgTmV3UGF5cm9sbChhZGRyZXNzIGluZGV4ZWQgY3JlYXRvcik7CiAgICBldmVudCBGYWlsZWRNYXJraW5nKGJ5dGVzMzIgaW5kZXhlZCBpbmZvLCBieXRlczMyIGluZGV4ZWQgZGVzY3JpcHRpb24sIHVpbnQgdG90YWwsIGludCBkdXJhdGlvbik7CiAgICBldmVudCBBZGRNYXJraW5nKGJ5dGVzMzIgaW5kZXhlZCBpbmZvLCBieXRlczMyIGluZGV4ZWQgZGVzY3JpcHRpb24sIGludCBkdXJhdGlvbiwgdWludCB0b3RhbCk7CiAgICBldmVudCBQcm9jZXNzTWFya2luZ3MoYnl0ZXMzMiBpbmRleGVkIGluZm8sIHVpbnQgdG90YWwsIHVpbnQgZHVyYXRpb24sIHVpbnQgcGF5b3V0KTsKICAgIGV2ZW50IEFsbE1hcmtpbmdzUHJvY2Vzc2VkKGFkZHJlc3MgaW5kZXhlZCBjYWxjdWxhdG9yLCB1aW50IG1heER1cmF0aW9uLCB1aW50IGZyb21CbG9jaywgdWludCB0b0Jsb2NrKTsKCiAgICBldmVudCBNb2RpZnlNYXJraW5nKGJ5dGVzMzIgaW5kZXhlZCBpbmZvLCB1aW50IGR1cmF0aW9uLCB1aW50IHBheW91dCk7CiAgICBldmVudCBTZXRQYXlyb2xsTG9ja2VkKGJvb2wgbG9ja2VkKTsKCiAgICBtb2RpZmllciBvbmx5Q3JlYXRvciB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gY3JlYXRvcikgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5VW5wcm9jZXNzZWQgewogICAgICAgIGlmIChjYWxjdWxhdG9yICE9IDApIHRocm93OwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlQcm9jZXNzZWQgewogICAgICAgIGlmIChjYWxjdWxhdG9yID09IDApIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVVubG9ja2VkIHsKICAgICAgICBpZiAobG9ja2VkKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIFNwaWNlUGF5cm9sbChhZGRyZXNzIF9tZW1iZXJzKSBTcGljZUNvbnRyb2xsZWQoX21lbWJlcnMpIHsKICAgICAgICBjcmVhdG9yID0gbXNnLnNlbmRlcjsKICAgICAgICBmcm9tQmxvY2sgPSBibG9jay5udW1iZXI7CiAgICAgICAgTmV3UGF5cm9sbChtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRNYXJraW5nKGJ5dGVzMzIgX2luZm8sIGJ5dGVzMzIgX2Rlc2NyaXB0aW9uLCBpbnQgX2R1cmF0aW9uKSBvbmx5Q3JlYXRvciBvbmx5VW5wcm9jZXNzZWQgcmV0dXJucyhib29sKSB7CiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGR1cmF0aW9uIHdvdWxkIGJlY29tZSBuZWdhdGl2ZSBhcyBhIHJlc3VsdCBvZiB0aGlzIG1hcmtpbmcKICAgICAgICAvLyBhbmQgaWYgaXQgZG9lcywgbWFyayB0aGlzIGFzIGZhaWxlZCBhbmQgcmV0dXJuIGZhbHNlIHRvIGluZGljYXRlIGZhaWx1cmUuCiAgICAgICAgaWYgKF9kdXJhdGlvbiA8IDAgJiYgZW50cmllc1tfaW5mb10uZHVyYXRpb24gPCB1aW50KC1fZHVyYXRpb24pKSB7CiAgICAgICAgICBGYWlsZWRNYXJraW5nKF9pbmZvLCBfZGVzY3JpcHRpb24sIGVudHJpZXNbX2luZm9dLmR1cmF0aW9uLCBfZHVyYXRpb24pOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgLy8gSWYgaW5mbyBub3QgYWRkZWQgeWV0LCBhZGQgaXQgdG8gdGhlIGluZm9zIGFycmF5CiAgICAgICAgUGF5cm9sbEVudHJ5IGVudHJ5ID0gZW50cmllc1tfaW5mb107CiAgICAgICAgaWYgKCFlbnRyeS5hdmFpbGFibGUpIHsKICAgICAgICAgICAgZW50cnkuYXZhaWxhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgaW5mb3MucHVzaChfaW5mbyk7CiAgICAgICAgfQoKICAgICAgICAvLyBNb2RpZnkgZW50cnkgZHVyYXRpb24gYW5kIHNlbmQgbWFya2luZyBldmVudAogICAgICAgIGlmIChfZHVyYXRpb24gPCAwKSB7CiAgICAgICAgICAgIGVudHJ5LmR1cmF0aW9uIC09IHVpbnQoLV9kdXJhdGlvbik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZW50cnkuZHVyYXRpb24gKz0gdWludChfZHVyYXRpb24pOwogICAgICAgIH0KICAgICAgICBBZGRNYXJraW5nKF9pbmZvLCBfZGVzY3JpcHRpb24sIF9kdXJhdGlvbiwgZW50cnkuZHVyYXRpb24pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHByb2Nlc3NNYXJraW5ncyhhZGRyZXNzIF9jYWxjdWxhdG9yLCB1aW50IF9tYXhEdXJhdGlvbikgb25seUNyZWF0b3Igb25seVVucHJvY2Vzc2VkIHsKICAgICAgICBjYWxjdWxhdG9yID0gX2NhbGN1bGF0b3I7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgaW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYnl0ZXMzMiBpbmZvID0gaW5mb3NbaV07CiAgICAgICAgICAgIFBheXJvbGxFbnRyeSBlbnRyeSA9IGVudHJpZXNbaW5mb107CgogICAgICAgICAgICB1aW50IG9yaWdpbmFsRHVyYXRpb24gPSBlbnRyeS5kdXJhdGlvbjsKICAgICAgICAgICAgZW50cnkuZHVyYXRpb24gPSAob3JpZ2luYWxEdXJhdGlvbiA8PSBfbWF4RHVyYXRpb24pID8gb3JpZ2luYWxEdXJhdGlvbiA6IF9tYXhEdXJhdGlvbjsKICAgICAgICAgICAgZW50cnkucGF5b3V0ID0gSVBheW91dENhbGN1bGF0b3IoY2FsY3VsYXRvcikuY2FsY3VsYXRlUGF5b3V0KGluZm8sIGVudHJ5LmR1cmF0aW9uKTsKICAgICAgICAgICAgUHJvY2Vzc01hcmtpbmdzKGluZm8sIG9yaWdpbmFsRHVyYXRpb24sIGVudHJ5LmR1cmF0aW9uLCBlbnRyeS5wYXlvdXQpOwogICAgICAgIH0KICAgICAgICB0b0Jsb2NrID0gYmxvY2subnVtYmVyOwogICAgICAgIEFsbE1hcmtpbmdzUHJvY2Vzc2VkKF9jYWxjdWxhdG9yLCBfbWF4RHVyYXRpb24sIGZyb21CbG9jaywgdG9CbG9jayk7CiAgICB9CgogICAgZnVuY3Rpb24gbW9kaWZ5TWFya2luZyhieXRlczMyIF9pbmZvLCB1aW50IF9kdXJhdGlvbikgb25seURpcmVjdG9yIG9ubHlQcm9jZXNzZWQgb25seVVubG9ja2VkIHsKICAgICAgICBpZiAoIWVudHJpZXNbX2luZm9dLmF2YWlsYWJsZSkgdGhyb3c7CgogICAgICAgIFBheXJvbGxFbnRyeSBlbnRyeSA9IGVudHJpZXNbX2luZm9dOwogICAgICAgIGVudHJ5LmR1cmF0aW9uID0gX2R1cmF0aW9uOwogICAgICAgIGVudHJ5LnBheW91dCA9IElQYXlvdXRDYWxjdWxhdG9yKGNhbGN1bGF0b3IpLmNhbGN1bGF0ZVBheW91dChfaW5mbywgX2R1cmF0aW9uKTsKICAgICAgICBNb2RpZnlNYXJraW5nKF9pbmZvLCBlbnRyeS5kdXJhdGlvbiwgZW50cnkucGF5b3V0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBsb2NrKCkgb25seURpcmVjdG9yIHsKICAgICAgICBsb2NrZWQgPSB0cnVlOwogICAgICAgIFNldFBheXJvbGxMb2NrZWQobG9ja2VkKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1bmxvY2soKSBvbmx5T3duZXIgewogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgICAgIFNldFBheXJvbGxMb2NrZWQobG9ja2VkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcm9jZXNzZWQoKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIChjYWxjdWxhdG9yICE9IDApOwogICAgfQoKICAgIGZ1bmN0aW9uIGR1cmF0aW9uKGJ5dGVzMzIgX2luZm8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gZW50cmllc1tfaW5mb10uZHVyYXRpb247CiAgICB9CgogICAgZnVuY3Rpb24gcGF5b3V0KGJ5dGVzMzIgX2luZm8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gZW50cmllc1tfaW5mb10ucGF5b3V0OwogICAgfQoKICAgIGZ1bmN0aW9uIGVudHJ5SW5mbyh1aW50IF9pbmRleCkgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgIHJldHVybiBpbmZvc1tfaW5kZXhdOwogICAgfQoKICAgIGZ1bmN0aW9uIGVudHJ5Q291bnQoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGluZm9zLmxlbmd0aDsKICAgIH0KfQoKY29udHJhY3QgU3BpY2VIb3VycyBpcyBTcGljZUNvbnRyb2xsZWQgewogICAgYWRkcmVzc1tdIHB1YmxpYyBwYXlyb2xsczsKCiAgICBldmVudCBNYXJrSG91cnMoYnl0ZXMzMiBpbmRleGVkIGluZm8sIGJ5dGVzMzIgaW5kZXhlZCBkZXNjcmlwdGlvbiwgaW50IGR1cmF0aW9uLCBib29sIHN1Y2Nlc3MpOwogICAgZXZlbnQgUHJvY2Vzc1BheXJvbGwoYWRkcmVzcyBpbmRleGVkIHBheXJvbGwsIHVpbnQgbWF4RHVyYXRpb24pOwogICAgZXZlbnQgQ3JlYXRlUGF5cm9sbChhZGRyZXNzIGluZGV4ZWQgcGF5cm9sbCk7CgogICAgZnVuY3Rpb24gU3BpY2VIb3VycyhhZGRyZXNzIF9tZW1iZXJzKSBTcGljZUNvbnRyb2xsZWQoX21lbWJlcnMpIHsKICAgICAgICBwYXlyb2xsc1twYXlyb2xscy5sZW5ndGgrK10gPSBuZXcgU3BpY2VQYXlyb2xsKG1lbWJlcnMpOwogICAgICAgIENyZWF0ZVBheXJvbGwocGF5cm9sbHNbcGF5cm9sbHMubGVuZ3RoLTFdKTsKICAgIH0KCiAgICBmdW5jdGlvbiBtYXJrSG91cnMoYnl0ZXMzMiBfaW5mbywgYnl0ZXMzMiBfZGVzY3JpcHRpb24sIGludCBfZHVyYXRpb24pIG9ubHlNZW1iZXIgewogICAgICAgIGlmICghaGFzTWFuYWdlckFjY2Vzcyhtc2cuc2VuZGVyKSAmJiBtZW1iZXJzLm1lbWJlckluZm8obXNnLnNlbmRlcikgIT0gX2luZm8pIHRocm93OwogICAgICAgIGlmIChfZHVyYXRpb24gPT0gMCkgdGhyb3c7CiAgICAgICAgaWYgKF9pbmZvID09IDApIHRocm93OwoKICAgICAgICBTcGljZVBheXJvbGwgcGF5cm9sbCA9IFNwaWNlUGF5cm9sbChwYXlyb2xsc1twYXlyb2xscy5sZW5ndGgtMV0pOwogICAgICAgIGJvb2wgc3VjY2VzcyA9IHBheXJvbGwuYWRkTWFya2luZyhfaW5mbywgX2Rlc2NyaXB0aW9uLCBfZHVyYXRpb24pOwogICAgICAgIE1hcmtIb3VycyhfaW5mbywgX2Rlc2NyaXB0aW9uLCBfZHVyYXRpb24sIHN1Y2Nlc3MpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1hcmtIb3VycyhieXRlczMyIF9kZXNjcmlwdGlvbiwgaW50IF9kdXJhdGlvbikgewogICAgICAgIG1hcmtIb3VycyhtZW1iZXJzLm1lbWJlckluZm8obXNnLnNlbmRlciksIF9kZXNjcmlwdGlvbiwgX2R1cmF0aW9uKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcm9jZXNzUGF5cm9sbChhZGRyZXNzIF9jYWxjdWxhdG9yLCB1aW50IF9tYXhEdXJhdGlvbikgb25seURpcmVjdG9yIHsKICAgICAgICBTcGljZVBheXJvbGwgcGF5cm9sbCA9IFNwaWNlUGF5cm9sbChwYXlyb2xsc1twYXlyb2xscy5sZW5ndGgtMV0pOwogICAgICAgIHBheXJvbGwucHJvY2Vzc01hcmtpbmdzKF9jYWxjdWxhdG9yLCBfbWF4RHVyYXRpb24pOwogICAgICAgIFByb2Nlc3NQYXlyb2xsKHBheXJvbGwsIF9tYXhEdXJhdGlvbik7CgogICAgICAgIHBheXJvbGxzW3BheXJvbGxzLmxlbmd0aCsrXSA9IG5ldyBTcGljZVBheXJvbGwobWVtYmVycyk7CiAgICAgICAgQ3JlYXRlUGF5cm9sbChwYXlyb2xsc1twYXlyb2xscy5sZW5ndGgtMV0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGhhc1BheXJvbGwoYWRkcmVzcyBfYWRkcmVzcykgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGZvciAodWludCBpOyBpIDwgcGF5cm9sbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHBheXJvbGxzW2ldID09IF9hZGRyZXNzKSByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHBheXJvbGxDb3VudCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcGF5cm9sbHMubGVuZ3RoOwogICAgfQp9'.
	

]
