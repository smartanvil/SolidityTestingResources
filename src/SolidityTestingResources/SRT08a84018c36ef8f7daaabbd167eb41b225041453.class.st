Class {
	#name : #SRT08a84018c36ef8f7daaabbd167eb41b225041453,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT08a84018c36ef8f7daaabbd167eb41b225041453 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICByZXR1cm4gYzsKICAgIH0KICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYz49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CmNvbnRyYWN0IEVSQzcyMSB7CiAgICBmdW5jdGlvbiBhcHByb3ZlKCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIGFkZHIpOwogICAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHRva2VuSWQpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgYXBwcm92ZWQsIHVpbnQyNTYgdG9rZW5JZCk7Cn0KCmNvbnRyYWN0IEF0aGxldGVUZXN0VG9rZW4gaXMgRVJDNzIxIHsKICAgIC8qKioqICBDT05TVEFOVFMgKioqKi8KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgTkFNRSA9ICJDcnlwdG9GYW50YXN5IjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1lNQk9MID0gIkF0aGxldGUiOwoKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBpbml0UHJpY2UgPSAwLjAwMSBldGhlcjsKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBQUk9NT19DUkVBVElPTl9MSU1JVCA9IDUwMDAwOwoKICAgIC8qKiogRVZFTlRTICAqLwogICAgZXZlbnQgQmlydGgodWludDI1NiB0b2tlbklkLCBhZGRyZXNzIG93bmVyKTsKICAgIGV2ZW50IFRva2VuU29sZCh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgc2VsbFByaWNlLCBhZGRyZXNzIHNlbGxPd25lciwgYWRkcmVzcyBidXlPd25lciwgc3RyaW5nIGF0aGxldGVJZCk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CgogICAgLyoqKiBTVE9SQUdFICovCiAgICAvLyBBIG1hcHBpbmcgZnJvbSBhdGhsZXRlIElEcyB0byB0aGUgYWRkcmVzcyB0aGF0IG93bnMgdGhlbS4gQWxsIGF0aGxldGVzIGhhdmUgc29tZSB2YWxpZCBvd25lciBhZGRyZXNzLgogICAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgYXRobGV0ZUluZGV4VG9Pd25lcjsKCiAgICAvLyBBIG1hcHBpbmcgZnJvbSBvd25lciBhZGRyZXNzIHRvIGNvdW50IG9mIHRva2VucyB0aGF0IGFkZHJlc3Mgb3ducy4KICAgIC8vIFVzZWQgaW50ZXJuYWxseSBpbnNpZGUgYmFsYW5jZU9mKCkgdG8gcmVzb2x2ZSBvd25lcnNoaXAgY291bnQuCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgb3duZXJzaGlwVG9rZW5Db3VudDsKCiAgICAvKioKICAgICAgICAqKiogQSBtYXBwaW5nIGZyb20gYXRobGV0ZUlEcyB0byBhbiBhZGRyZXNzIHRoYXQgaGFzIGJlZW4gYXBwcm92ZWQgdG8gY2FsbCB0cmFuc2ZlckZyb20oKS4gCiAgICAgICAgKioqIEVhY2ggYXRobGV0ZSBjYW4gb25seSBoYXZlIG9uZSBhcHByb3ZlZCBhZGRyZXNzIGZvciB0cmFuc2ZlciBhdCBhbnkgdGltZS4KICAgICAgICAqKiogQSBaRVJPIHZhbHVlIG1lYW5zIG5vIGFwcHJvdmFsIGlzIG91dHN0YW5kaW5nLgogICAgICovCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBhdGhsZXRlSW5kZXhUb0FwcHJvdmVkOwoKICAgIC8vIEEgbWFwcGluZyBmcm9tIGF0aGxldGVJRHMgdG8gdGhlIHByaWNlIG9mIHRoZSB0b2tlbi4KICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSBhdGhsZXRlSW5kZXhUb1ByaWNlOwoKICAgIC8vIEEgbWFwcGluZyBmcm9tIGF0aGxldGVJRHMgdG8gdGhlIGFjdHVhbCBmZWUgb2YgdGhlIHRva2VuLgogICAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIGF0aGxldGVJbmRleFRvQWN0dWFsRmVlOwoKICAgIC8vIEEgbWFwcGluZyBmcm9tIGF0aGxldGVJRHMgdG8gdGhlIHNpdGUgZmVlIG9mIHRoZSB0b2tlbi4KICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSBhdGhsZXRlSW5kZXhUb1NpdGVGZWU7CgogICAgLy8gQSBtYXBwaW5nIGZyb20gYXRobGV0ZUlEcyB0byB0aGUgYWN0dWFsIHdhbGxldCBhZGRyZXNzIG9mIHRoZSB0b2tlbgogICAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwcml2YXRlIGF0aGxldGVJbmRleFRvQWN0dWFsV2FsbGV0SWQ7CgogICAgLy8gQSBtYXBwaW5nIG9mIGF0aGxldGVJRHMKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gc3RyaW5nKSBwcml2YXRlIGF0aGxldGVJbmRleFRvQXRobGV0ZUlEOwoKCiAgICAvLyBUaGUgYWRkcmVzc2VzIG9mIHRoZSBhY2NvdW50cyAob3IgY29udHJhY3RzKSB0aGF0IGNhbiBleGVjdXRlIGFjdGlvbnMgd2l0aGluIGVhY2ggcm9sZXMuCiAgICBhZGRyZXNzIHB1YmxpYyBjZW9BZGRyZXNzOwogICAgYWRkcmVzcyBwdWJsaWMgY29vQWRkcmVzczsKCiAgICB1aW50MjU2IHB1YmxpYyBwcm9tb0NyZWF0ZWRDb3VudDsKCiAgICAvKiogQVRITEVURSBEQVRBVFlQRSAqLwogICAgc3RydWN0IEF0aGxldGUgewogICAgICAgIHN0cmluZyAgYXRobGV0ZUlkOwogICAgICAgIGFkZHJlc3MgYWN0dWFsQWRkcmVzczsKICAgICAgICB1aW50MjU2IGFjdHVhbEZlZTsKICAgICAgICB1aW50MjU2IHNpdGVGZWU7CiAgICAgICAgdWludDI1NiBzZWxsUHJpY2U7CiAgICB9CiAgICBBdGhsZXRlW10gcHJpdmF0ZSBhdGhsZXRlczsKCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IEF0aGxldGUpIHByaXZhdGUgYXRobGV0ZUluZGV4VG9BdGhsZXRlOwoKICAgIG1vZGlmaWVyIG9ubHlDRU8oKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNlb0FkZHJlc3MpOwogICAgICAgIF87CiAgICB9CiAgICBtb2RpZmllciBvbmx5Q09PKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb29BZGRyZXNzKTsKICAgICAgICBfOwogICAgfQogICAgbW9kaWZpZXIgb25seUNMZXZlbCgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyB8fCBtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqIENPTlNUUlVDVE9SICovCiAgICBmdW5jdGlvbiBBdGhsZXRlVGVzdFRva2VuKCkgcHVibGljIHsKICAgICAgICBjZW9BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICBjb29BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvKioqIFBVQkxJQyBGVU5DVElPTlMgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkICkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICAgICAgYXRobGV0ZUluZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF0gPSBfdG87CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gb3duZXJzaGlwVG9rZW5Db3VudFtfb3duZXJdOwogICAgfQoKCiAgICBmdW5jdGlvbiBjcmVhdGVQcm9tb0F0aGxldGUoYWRkcmVzcyBfb3duZXIsIHN0cmluZyBfYXRobGV0ZUlkLCBhZGRyZXNzIF9hY3R1YWxBZGRyZXNzLCB1aW50MjU2IF9hY3R1YWxGZWUsIHVpbnQyNTYgX3NpdGVGZWUsIHVpbnQgX3NlbGxQcmljZSkgcHVibGljIG9ubHlDT08gewogICAgICAgIHJlcXVpcmUocHJvbW9DcmVhdGVkQ291bnQgPCBQUk9NT19DUkVBVElPTl9MSU1JVCk7CgogICAgICAgIGFkZHJlc3MgYXRobGV0ZU93bmVyID0gX293bmVyOwogICAgICAgIGlmICggYXRobGV0ZU93bmVyID09IGFkZHJlc3MoMCkgKSB7CiAgICAgICAgICAgIGF0aGxldGVPd25lciA9IGNvb0FkZHJlc3M7CiAgICAgICAgfQogICAgICAgIGlmICggX3NlbGxQcmljZSA8PSAwICkgewogICAgICAgICAgICBfc2VsbFByaWNlID0gaW5pdFByaWNlOwogICAgICAgIH0KICAgICAgICBwcm9tb0NyZWF0ZWRDb3VudCsrOwoKICAgICAgICBfY3JlYXRlT2ZBdGhsZXRlKGF0aGxldGVPd25lciwgX2F0aGxldGVJZCwgX2FjdHVhbEFkZHJlc3MsIF9hY3R1YWxGZWUsIF9zaXRlRmVlLCBfc2VsbFByaWNlKTsKICAgIH0KCgogICAgZnVuY3Rpb24gY3JlYXRlQ29udHJhY3RPZkF0aGxldGUoc3RyaW5nIF9hdGhsZXRlSWQsIGFkZHJlc3MgX2FjdHVhbEFkZHJlc3MsIHVpbnQyNTYgX2FjdHVhbEZlZSwgdWludDI1NiBfc2l0ZUZlZSwgdWludDI1NiBfc2VsbFByaWNlKSBwdWJsaWMgb25seUNPT3sKICAgICAgICBfY3JlYXRlT2ZBdGhsZXRlKGFkZHJlc3ModGhpcyksIF9hdGhsZXRlSWQsIF9hY3R1YWxBZGRyZXNzLCBfYWN0dWFsRmVlLCBfc2l0ZUZlZSwgX3NlbGxQcmljZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QXRobGV0ZSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICggc3RyaW5nIGF0aGxldGVJZCwgYWRkcmVzcyBhY3R1YWxBZGRyZXNzLCB1aW50MjU2IGFjdHVhbEZlZSwgdWludDI1NiBzaXRlRmVlLCB1aW50MjU2IHNlbGxQcmljZSwgYWRkcmVzcyBvd25lcikgewogICAgICAgIEF0aGxldGUgc3RvcmFnZSBhdGhsZXRlID0gYXRobGV0ZXNbX3Rva2VuSWRdOwogICAgICAgIGF0aGxldGVJZCAgICAgPSBhdGhsZXRlLmF0aGxldGVJZDsKICAgICAgICBhY3R1YWxBZGRyZXNzID0gYXRobGV0ZS5hY3R1YWxBZGRyZXNzOwogICAgICAgIGFjdHVhbEZlZSAgICAgPSBhdGhsZXRlLmFjdHVhbEZlZTsKICAgICAgICBzaXRlRmVlICAgICAgID0gYXRobGV0ZS5zaXRlRmVlOwogICAgICAgIHNlbGxQcmljZSAgICAgPSBwcmljZU9mKF90b2tlbklkKTsKICAgICAgICBvd25lciAgICAgICAgID0gb3duZXJPZihfdG9rZW5JZCk7CiAgICB9CgogICAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsKICAgICAgICByZXR1cm4gTkFNRTsKICAgIH0KICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBvd25lcikgewogICAgICAgIG93bmVyID0gYXRobGV0ZUluZGV4VG9Pd25lcltfdG9rZW5JZF07CiAgICAgICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBheW91dChhZGRyZXNzIF90bykgcHVibGljIG9ubHlDTGV2ZWwgewogICAgICAgIF9wYXlvdXQoX3RvKTsKICAgIH0KICAgIGZ1bmN0aW9uIHB1cmNoYXNlKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBhZGRyZXNzIHNlbGxPd25lciA9IGF0aGxldGVJbmRleFRvT3duZXJbX3Rva2VuSWRdOwogICAgICAgIGFkZHJlc3MgYnV5T3duZXIgPSBtc2cuc2VuZGVyOwoKICAgICAgICB1aW50MjU2IHNlbGxQcmljZSA9IHByaWNlT2YoX3Rva2VuSWQpOwoKICAgICAgICAvL21ha2Ugc3VyZSB0b2tlbiBvd25lciBpcyBub3Qgc2VuZGluZyB0byBzZWxmCiAgICAgICAgcmVxdWlyZShzZWxsT3duZXIgIT0gYnV5T3duZXIpOwogICAgICAgIC8vc2FmZWx5IGNoZWNrIHRvIHByZXZlbnQgYWdhaW5zdCBhbiB1bmV4cGVjdGVkIDB4MCBkZWZhdWx0CiAgICAgICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoYnV5T3duZXIpKTsKCiAgICAgICAgLy9tYWtlIHN1cmUgc2VudCBhbW91bnQgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzZWxsUHJpY2UKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBzZWxsUHJpY2UpOwoKICAgICAgICB1aW50MjU2IGFjdHVhbEZlZSA9IHVpbnQyNTYoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsUHJpY2UsIGF0aGxldGVJbmRleFRvQWN0dWFsRmVlW190b2tlbklkXSksIDEwMCkpOyAvLyBjYWxjdWxhdGUgYWN0dWFsIGZlZQogICAgICAgIHVpbnQyNTYgc2l0ZUZlZSAgID0gdWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxQcmljZSwgYXRobGV0ZUluZGV4VG9TaXRlRmVlW190b2tlbklkXSksIDEwMCkpOyAgIC8vIGNhbGN1bGF0ZSBzaXRlIGZlZQogICAgICAgIHVpbnQyNTYgcGF5bWVudCAgID0gdWludDI1NihTYWZlTWF0aC5zdWIoc2VsbFByaWNlLCBTYWZlTWF0aC5hZGQoYWN0dWFsRmVlLCBzaXRlRmVlKSkpOyAgIC8vcGF5bWVudCBmb3Igc2VsbGVyCgogICAgICAgIF90cmFuc2ZlcihzZWxsT3duZXIsIGJ1eU93bmVyLCBfdG9rZW5JZCk7CgogICAgICAgIC8vUGF5IHByZXZpb3VzIHRva2VuT3duZXIgaWYgb3duZXIgaXMgbm90IGNvbnRyYWN0CiAgICAgICAgaWYgKCBzZWxsT3duZXIgIT0gYWRkcmVzcyh0aGlzKSApIHsKICAgICAgICAgICAgc2VsbE93bmVyLnRyYW5zZmVyKHBheW1lbnQpOyAvLyAoMS0oYWN0dWFsX2ZlZStzaXRlX2ZlZSkpKnNlbGxQcmljZQogICAgICAgIH0KCiAgICAgICAgVG9rZW5Tb2xkKF90b2tlbklkLCBzZWxsUHJpY2UsIHNlbGxPd25lciwgYnV5T3duZXIsIGF0aGxldGVzW190b2tlbklkXS5hdGhsZXRlSWQpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoc2l0ZUZlZSk7CgogICAgICAgIGFkZHJlc3MgYWN0dWFsV2FsbGV0ID0gYXRobGV0ZUluZGV4VG9BY3R1YWxXYWxsZXRJZFtfdG9rZW5JZF07CiAgICAgICAgYWN0dWFsV2FsbGV0LnRyYW5zZmVyKGFjdHVhbEZlZSk7CgogICAgICAgIGNlb0FkZHJlc3MudHJhbnNmZXIoc2l0ZUZlZSk7CgogICAgfQoKICAgIGZ1bmN0aW9uIHByaWNlT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBwcmljZSkgewogICAgICAgIHJldHVybiBhdGhsZXRlSW5kZXhUb1ByaWNlW190b2tlbklkXTsKICAgIH0KICAgIGZ1bmN0aW9uIHNldENFTyhhZGRyZXNzIF9uZXdDRU8pIHB1YmxpYyBvbmx5Q0VPIHsKICAgICAgICByZXF1aXJlKF9uZXdDRU8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgY2VvQWRkcmVzcyA9IF9uZXdDRU87CiAgICB9CiAgICBmdW5jdGlvbiBzZXRDT08oYWRkcmVzcyBfbmV3Q09PKSBwdWJsaWMgb25seUNFTyB7CiAgICAgICAgcmVxdWlyZShfbmV3Q09PICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGNvb0FkZHJlc3MgPSBfbmV3Q09POwogICAgfQogICAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICAgICAgcmV0dXJuIFNZTUJPTDsKICAgIH0KICAgIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsKICAgICAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBhZGRyZXNzIG9sZE93bmVyID0gYXRobGV0ZUluZGV4VG9Pd25lcltfdG9rZW5JZF07CiAgICAgICAgCiAgICAgICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwobmV3T3duZXIpKTsKICAgICAgICByZXF1aXJlKF9hcHByb3ZlZChuZXdPd25lciwgX3Rva2VuSWQpKTsKICAgICAgICBfdHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfdG9rZW5JZCk7CiAgICB9CgogICAgZnVuY3Rpb24gdG9rZW5PZk93bmVyKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTZbXSBvd25lclRva2VucykgewogICAgICAgIHVpbnQyNTYgdG9rZW5Db3VudCA9IGJhbGFuY2VPZihfb3duZXIpOwogICAgICAgIGlmICggdG9rZW5Db3VudCA9PSAwICkgewogICAgICAgICAgICByZXR1cm4gbmV3IHVpbnQyNTZbXSgwKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXSh0b2tlbkNvdW50KTsKICAgICAgICAgICAgdWludDI1NiB0b3RhbEF0aGxldGVzID0gdG90YWxTdXBwbHkoKTsKICAgICAgICAgICAgdWludDI1NiByZXN1bHRJbmRleCA9IDA7CiAgICAgICAgICAgIHVpbnQyNTYgYXRobGV0ZUlkOwoKICAgICAgICAgICAgZm9yKGF0aGxldGVJZCA9IDA7IGF0aGxldGVJZCA8PSB0b3RhbEF0aGxldGVzOyBhdGhsZXRlSWQrKykgewogICAgICAgICAgICAgICAgaWYgKGF0aGxldGVJbmRleFRvT3duZXJbYXRobGV0ZUlkXSA9PSBfb3duZXIpIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0SW5kZXhdID0gYXRobGV0ZUlkOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKSB7CiAgICAgICAgcmV0dXJuIGF0aGxldGVzLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlciggYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQgKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKICAgICAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChfdG8pKTsKCiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSggYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQgKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX293bnMoX2Zyb20sIF90b2tlbklkKSk7CiAgICAgICAgcmVxdWlyZShfYXBwcm92ZWQoX3RvLCBfdG9rZW5JZCkpOwogICAgICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKF90bykpOwoKICAgICAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogICAgfQoKICAgIC8qKiBQUklWQVRFIEZVTkNUSU9OUyAqLwogICAgZnVuY3Rpb24gX2FkZHJlc3NOb3ROdWxsKGFkZHJlc3MgX3RvKSBwcml2YXRlIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBfdG8gIT0gYWRkcmVzcygwKTsKICAgIH0KICAgIGZ1bmN0aW9uIF9hcHByb3ZlZChhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gYXRobGV0ZUluZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX3RvOwogICAgfQoKICAgIC8vVE9ETyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gX2NyZWF0ZU9mQXRobGV0ZShhZGRyZXNzIF9hdGhsZXRlT3duZXIsIHN0cmluZyBfYXRobGV0ZUlkLCBhZGRyZXNzIF9hY3R1YWxBZGRyZXNzLCB1aW50MjU2IF9hY3R1YWxGZWUsIHVpbnQyNTYgX3NpdGVGZWUsIHVpbnQyNTYgX3NlbGxQcmljZSkgcHJpdmF0ZSB7CiAgICAgICAgCiAgICAgICAgQXRobGV0ZSBtZW1vcnkgX2F0aGxldGUgPSBBdGhsZXRlKHsgYXRobGV0ZUlkOiBfYXRobGV0ZUlkLCBhY3R1YWxBZGRyZXNzOiBfYWN0dWFsQWRkcmVzcywgYWN0dWFsRmVlOiBfYWN0dWFsRmVlLCAgc2l0ZUZlZTogX3NpdGVGZWUsIHNlbGxQcmljZTogX3NlbGxQcmljZSB9KTsKICAgICAgICAKICAgICAgICB1aW50MjU2IG5ld0F0aGxldGVJZCA9IGF0aGxldGVzLnB1c2goX2F0aGxldGUpIC0gMTsKIAogICAgICAgIGlmICggX3NlbGxQcmljZSA8PSAwICkgewogICAgICAgICAgICBfc2VsbFByaWNlID0gaW5pdFByaWNlOwogICAgICAgIH0KICAgICAgICByZXF1aXJlKG5ld0F0aGxldGVJZCA9PSB1aW50MjU2KHVpbnQzMihuZXdBdGhsZXRlSWQpKSk7CiAgICAgICAgQmlydGgobmV3QXRobGV0ZUlkLCBfYXRobGV0ZU93bmVyKTsKICAgICAgICAKICAgICAgICBhdGhsZXRlSW5kZXhUb1ByaWNlW25ld0F0aGxldGVJZF0gPSBfc2VsbFByaWNlOwogICAgICAgIGF0aGxldGVJbmRleFRvQWN0dWFsRmVlW25ld0F0aGxldGVJZF0gPSBfYWN0dWFsRmVlOwogICAgICAgIGF0aGxldGVJbmRleFRvU2l0ZUZlZVtuZXdBdGhsZXRlSWRdID0gX3NpdGVGZWU7CiAgICAgICAgYXRobGV0ZUluZGV4VG9BY3R1YWxXYWxsZXRJZFtuZXdBdGhsZXRlSWRdID0gX2FjdHVhbEFkZHJlc3M7CiAgICAgICAgYXRobGV0ZUluZGV4VG9BdGhsZXRlSURbbmV3QXRobGV0ZUlkXSA9IF9hdGhsZXRlSWQ7CiAgICAgICAgYXRobGV0ZUluZGV4VG9BdGhsZXRlW25ld0F0aGxldGVJZF0gPSBfYXRobGV0ZTsKCiAgICAgICAgX3RyYW5zZmVyKGFkZHJlc3MoMCksIF9hdGhsZXRlT3duZXIsIG5ld0F0aGxldGVJZCk7CgogICAgfQoKICAgIGZ1bmN0aW9uIF9vd25zKGFkZHJlc3MgY2xhaW1hbnQsIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGNsYWltYW50ID09IGF0aGxldGVJbmRleFRvT3duZXJbX3Rva2VuSWRdOwogICAgfQogICAgZnVuY3Rpb24gX3BheW91dChhZGRyZXNzIF90bykgcHJpdmF0ZSB7CiAgICAgICAgaWYgKF90byA9PSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIGNlb0FkZHJlc3MudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIF90by50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICAgICAgb3duZXJzaGlwVG9rZW5Db3VudFtfdG9dKys7CiAgICAgICAgYXRobGV0ZUluZGV4VG9Pd25lcltfdG9rZW5JZF0gPSBfdG87CiAgICAgICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXJzaGlwVG9rZW5Db3VudFtfZnJvbV0tLTsKICAgICAgICAgICAgZGVsZXRlIGF0aGxldGVJbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdOwogICAgICAgIH0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgICB9Cgp9'.
	

]
