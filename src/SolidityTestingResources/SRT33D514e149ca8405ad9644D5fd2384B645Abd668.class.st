Class {
	#name : #SRT33D514e149ca8405ad9644D5fd2384B645Abd668,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT33D514e149ca8405ad9644D5fd2384B645Abd668 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7Cgpjb250cmFjdCBBY2Nlc3NDb250cm9sIHsKICAgIGFkZHJlc3MgcHVibGljIGNyZWF0b3JBZGRyZXNzOwogICAgdWludDE2IHB1YmxpYyB0b3RhbFNlcmFwaGltcyA9IDA7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBzZXJhcGhpbXM7CgogICAgYm9vbCBwdWJsaWMgaXNNYWludGVuYW5jZU1vZGUgPSB0cnVlOwogCiAgICBtb2RpZmllciBvbmx5Q1JFQVRPUigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY3JlYXRvckFkZHJlc3MpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVNFUkFQSElNKCkgewogICAgICAgIHJlcXVpcmUoc2VyYXBoaW1zW21zZy5zZW5kZXJdID09IHRydWUpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIGlzQ29udHJhY3RBY3RpdmUgewogICAgICAgIHJlcXVpcmUoIWlzTWFpbnRlbmFuY2VNb2RlKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gQWNjZXNzQ29udHJvbCgpIHB1YmxpYyB7CiAgICAgICAgY3JlYXRvckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgfQogICAgCgogICAgZnVuY3Rpb24gYWRkU0VSQVBISU0oYWRkcmVzcyBfbmV3U2VyYXBoaW0pIG9ubHlDUkVBVE9SIHB1YmxpYyB7CiAgICAgICAgaWYgKHNlcmFwaGltc1tfbmV3U2VyYXBoaW1dID09IGZhbHNlKSB7CiAgICAgICAgICAgIHNlcmFwaGltc1tfbmV3U2VyYXBoaW1dID0gdHJ1ZTsKICAgICAgICAgICAgdG90YWxTZXJhcGhpbXMgKz0gMTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlbW92ZVNFUkFQSElNKGFkZHJlc3MgX29sZFNlcmFwaGltKSBvbmx5Q1JFQVRPUiBwdWJsaWMgewogICAgICAgIGlmIChzZXJhcGhpbXNbX29sZFNlcmFwaGltXSA9PSB0cnVlKSB7CiAgICAgICAgICAgIHNlcmFwaGltc1tfb2xkU2VyYXBoaW1dID0gZmFsc2U7CiAgICAgICAgICAgIHRvdGFsU2VyYXBoaW1zIC09IDE7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZU1haW50ZW5hbmNlTW9kZShib29sIF9pc01haW50YWluaW5nKSBvbmx5Q1JFQVRPUiBwdWJsaWMgewogICAgICAgIGlzTWFpbnRlbmFuY2VNb2RlID0gX2lzTWFpbnRhaW5pbmc7CiAgICB9CgogIAp9IAoKY29udHJhY3QgU2FmZU1hdGggewogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IHgsIHVpbnQgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQpIHsKICAgICAgdWludCB6ID0geCArIHk7CiAgICAgIGFzc2VydCgoeiA+PSB4KSAmJiAoeiA+PSB5KSk7CiAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVTdWJ0cmFjdCh1aW50IHgsIHVpbnQgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQpIHsKICAgICAgYXNzZXJ0KHggPj0geSk7CiAgICAgIHVpbnQgeiA9IHggLSB5OwogICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlTXVsdCh1aW50IHgsIHVpbnQgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQpIHsKICAgICAgdWludCB6ID0geCAqIHk7CiAgICAgIGFzc2VydCgoeCA9PSAwKXx8KHoveCA9PSB5KSk7CiAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFJhbmRvbU51bWJlcih1aW50MTYgbWF4UmFuZG9tLCB1aW50OCBtaW4sIGFkZHJlc3MgcHJpdmF0ZUFkZHJlc3MpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQ4KSB7CiAgICAgICAgdWludDI1NiBnZW5OdW0gPSB1aW50MjU2KGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXItMSkpICsgdWludDI1Nihwcml2YXRlQWRkcmVzcyk7CiAgICAgICAgcmV0dXJuIHVpbnQ4KGdlbk51bSAlIChtYXhSYW5kb20gLSBtaW4gKyAxKSttaW4pOwogICAgfQp9Cgpjb250cmFjdCBFbnVtcyB7CiAgICBlbnVtIFJlc3VsdENvZGUgewogICAgICAgIFNVQ0NFU1MsCiAgICAgICAgRVJST1JfQ0xBU1NfTk9UX0ZPVU5ELAogICAgICAgIEVSUk9SX0xPV19CQUxBTkNFLAogICAgICAgIEVSUk9SX1NFTkRfRkFJTCwKICAgICAgICBFUlJPUl9OT1RfT1dORVIsCiAgICAgICAgRVJST1JfTk9UX0VOT1VHSF9NT05FWSwKICAgICAgICBFUlJPUl9JTlZBTElEX0FNT1VOVAogICAgfQoKICAgIGVudW0gQW5nZWxBdXJhIHsgCiAgICAgICAgQmx1ZSwgCiAgICAgICAgWWVsbG93LCAKICAgICAgICBQdXJwbGUsIAogICAgICAgIE9yYW5nZSwgCiAgICAgICAgUmVkLCAKICAgICAgICBHcmVlbiAKICAgIH0KfQoKY29udHJhY3QgSUFuZ2VsQ2FyZERhdGEgaXMgQWNjZXNzQ29udHJvbCwgRW51bXMgewogICAgdWludDggcHVibGljIHRvdGFsQW5nZWxDYXJkU2VyaWVzOwogICAgdWludDY0IHB1YmxpYyB0b3RhbEFuZ2VsczsKCiAgICAKICAgIC8vIHdyaXRlCiAgICAvLyBhbmdlbHMKICAgIGZ1bmN0aW9uIGNyZWF0ZUFuZ2VsQ2FyZFNlcmllcyh1aW50OCBfYW5nZWxDYXJkU2VyaWVzSWQsIHVpbnQgX2Jhc2VQcmljZSwgIHVpbnQ2NCBfbWF4VG90YWwsIHVpbnQ4IF9iYXNlQXVyYSwgdWludDE2IF9iYXNlQmF0dGxlUG93ZXIsIHVpbnQ2NCBfbGl2ZVRpbWUpIG9ubHlDUkVBVE9SIGV4dGVybmFsIHJldHVybnModWludDgpOwogICAgZnVuY3Rpb24gdXBkYXRlQW5nZWxDYXJkU2VyaWVzKHVpbnQ4IF9hbmdlbENhcmRTZXJpZXNJZCkgb25seUNSRUFUT1IgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBzZXRBbmdlbCh1aW50OCBfYW5nZWxDYXJkU2VyaWVzSWQsIGFkZHJlc3MgX293bmVyLCB1aW50IF9wcmljZSwgdWludDE2IF9iYXR0bGVQb3dlcikgb25seVNFUkFQSElNIGV4dGVybmFsIHJldHVybnModWludDY0KTsKICAgIGZ1bmN0aW9uIGFkZFRvQW5nZWxFeHBlcmllbmNlTGV2ZWwodWludDY0IF9hbmdlbElkLCB1aW50IF92YWx1ZSkgb25seVNFUkFQSElNIGV4dGVybmFsOwogICAgZnVuY3Rpb24gc2V0QW5nZWxMYXN0QmF0dGxlVGltZSh1aW50NjQgX2FuZ2VsSWQpIG9ubHlTRVJBUEhJTSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIHNldEFuZ2VsTGFzdFZzQmF0dGxlVGltZSh1aW50NjQgX2FuZ2VsSWQpIG9ubHlTRVJBUEhJTSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIHNldExhc3RCYXR0bGVSZXN1bHQodWludDY0IF9hbmdlbElkLCB1aW50MTYgX3ZhbHVlKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBhZGRBbmdlbElkTWFwcGluZyhhZGRyZXNzIF9vd25lciwgdWludDY0IF9hbmdlbElkKSBwcml2YXRlOwogICAgZnVuY3Rpb24gdHJhbnNmZXJBbmdlbChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDY0IF9hbmdlbElkKSBvbmx5U0VSQVBISU0gcHVibGljIHJldHVybnMoUmVzdWx0Q29kZSk7CiAgICBmdW5jdGlvbiBvd25lckFuZ2VsVHJhbnNmZXIgKGFkZHJlc3MgX3RvLCB1aW50NjQgX2FuZ2VsSWQpICBwdWJsaWM7CgogICAgLy8gcmVhZAogICAgZnVuY3Rpb24gZ2V0QW5nZWxDYXJkU2VyaWVzKHVpbnQ4IF9hbmdlbENhcmRTZXJpZXNJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDggYW5nZWxDYXJkU2VyaWVzSWQsIHVpbnQ2NCBjdXJyZW50QW5nZWxUb3RhbCwgdWludCBiYXNlUHJpY2UsIHVpbnQ2NCBtYXhBbmdlbFRvdGFsLCB1aW50OCBiYXNlQXVyYSwgdWludCBiYXNlQmF0dGxlUG93ZXIsIHVpbnQ2NCBsYXN0U2VsbFRpbWUsIHVpbnQ2NCBsaXZlVGltZSk7CiAgICBmdW5jdGlvbiBnZXRBbmdlbCh1aW50NjQgX2FuZ2VsSWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQ2NCBhbmdlbElkLCB1aW50OCBhbmdlbENhcmRTZXJpZXNJZCwgdWludDE2IGJhdHRsZVBvd2VyLCB1aW50OCBhdXJhLCB1aW50MTYgZXhwZXJpZW5jZSwgdWludCBwcmljZSwgdWludDY0IGNyZWF0ZWRUaW1lLCB1aW50NjQgbGFzdEJhdHRsZVRpbWUsIHVpbnQ2NCBsYXN0VnNCYXR0bGVUaW1lLCB1aW50MTYgbGFzdEJhdHRsZVJlc3VsdCwgYWRkcmVzcyBvd25lcik7CiAgICBmdW5jdGlvbiBnZXRPd25lckFuZ2VsQ291bnQoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQpOwogICAgZnVuY3Rpb24gZ2V0QW5nZWxCeUluZGV4KGFkZHJlc3MgX293bmVyLCB1aW50IF9pbmRleCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDY0KTsKICAgIGZ1bmN0aW9uIGdldFRvdGFsQW5nZWxDYXJkU2VyaWVzKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ4KTsKICAgIGZ1bmN0aW9uIGdldFRvdGFsQW5nZWxzKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ2NCk7Cn0KCgpjb250cmFjdCBBbmdlbENhcmREYXRhIGlzIElBbmdlbENhcmREYXRhLCBTYWZlTWF0aCB7CiAgICAvKioqIEVWRU5UUyAqKiovCiAgICBldmVudCBDcmVhdGVkQW5nZWwodWludDY0IGFuZ2VsSWQpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBpbmRleGVkIHRva2VuSWQpOwoKICAgIC8qKiogREFUQSBUWVBFUyAqKiovCiAgICBzdHJ1Y3QgQW5nZWxDYXJkU2VyaWVzIHsKICAgICAgICB1aW50OCBhbmdlbENhcmRTZXJpZXNJZDsKICAgICAgICB1aW50IGJhc2VQcmljZTsgCiAgICAgICAgdWludDY0IGN1cnJlbnRBbmdlbFRvdGFsOwogICAgICAgIHVpbnQ2NCBtYXhBbmdlbFRvdGFsOwogICAgICAgIEFuZ2VsQXVyYSBiYXNlQXVyYTsKICAgICAgICB1aW50IGJhc2VCYXR0bGVQb3dlcjsKICAgICAgICB1aW50NjQgbGFzdFNlbGxUaW1lOwogICAgICAgIHVpbnQ2NCBsaXZlVGltZTsKICAgIH0KCiAgICBzdHJ1Y3QgQW5nZWwgewogICAgICAgIHVpbnQ2NCBhbmdlbElkOwogICAgICAgIHVpbnQ4IGFuZ2VsQ2FyZFNlcmllc0lkOwogICAgICAgIGFkZHJlc3Mgb3duZXI7CiAgICAgICAgdWludDE2IGJhdHRsZVBvd2VyOwogICAgICAgIEFuZ2VsQXVyYSBhdXJhOwogICAgICAgIHVpbnQxNiBleHBlcmllbmNlOwogICAgICAgIHVpbnQgcHJpY2U7CiAgICAgICAgdWludDY0IGNyZWF0ZWRUaW1lOwogICAgICAgIHVpbnQ2NCBsYXN0QmF0dGxlVGltZTsKICAgICAgICB1aW50NjQgbGFzdFZzQmF0dGxlVGltZTsKICAgICAgICB1aW50MTYgbGFzdEJhdHRsZVJlc3VsdDsKICAgIH0KCiAgICAvKioqIFNUT1JBR0UgKioqLwoKICAgIG1hcHBpbmcodWludDggPT4gQW5nZWxDYXJkU2VyaWVzKSBwdWJsaWMgYW5nZWxDYXJkU2VyaWVzQ29sbGVjdGlvbjsKICAgIG1hcHBpbmcodWludDY0ID0+IEFuZ2VsKSBwdWJsaWMgYW5nZWxDb2xsZWN0aW9uOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQ2NFtdKSBwdWJsaWMgb3duZXJBbmdlbENvbGxlY3Rpb247CiAgICB1aW50MjU2IHB1YmxpYyBwcmV2U2VyaWVzU2VsbG91dEhvdXJzOwogICAgCiAgICAvKioqIEZVTkNUSU9OUyAqKiovCiAgICAvLyoqKiBXcml0ZSBBY2Nlc3MgKioqLy8KICAgIGZ1bmN0aW9uIEFuZ2VsQ2FyZERhdGEoKSBwdWJsaWMgewogICAgICAgIAogICAgfQogIAoKICAgIGZ1bmN0aW9uIGNyZWF0ZUFuZ2VsQ2FyZFNlcmllcyh1aW50OCBfYW5nZWxDYXJkU2VyaWVzSWQsIHVpbnQgX2Jhc2VQcmljZSwgIHVpbnQ2NCBfbWF4VG90YWwsIHVpbnQ4IF9iYXNlQXVyYSwgdWludDE2IF9iYXNlQmF0dGxlUG93ZXIsIHVpbnQ2NCBfbGl2ZVRpbWUpIG9ubHlDUkVBVE9SIGV4dGVybmFsIHJldHVybnModWludDgpIHsKICAgICAgICAgaWYgKChub3cgPiAxNTE2NjkyNjAwKSB8fCAodG90YWxBbmdlbENhcmRTZXJpZXMgPj0gMjQpKSB7cmV2ZXJ0KCk7fQogICAgICAgIC8vVGhpcyBjb25maXJtcyB0aGF0IG5vIG9uZSwgZXZlbiB0aGUgZGV2ZWxvb3BlcnMsIGNhbiBjcmVhdGUgYW55IGFuZ2VsIHNlcmllcyBhZnRlciBKQU4vMjMvMjAxOCBAIDc6MzAgYW0gKFVUQykgb3IgbW9yZSB0aGFuIHRoZSBvcmlnaW5hbCAyNCBzZXJpZXMuCgogICAgICAgIEFuZ2VsQ2FyZFNlcmllcyBzdG9yYWdlIGFuZ2VsQ2FyZFNlcmllcyA9IGFuZ2VsQ2FyZFNlcmllc0NvbGxlY3Rpb25bX2FuZ2VsQ2FyZFNlcmllc0lkXTsKICAgICAgICBhbmdlbENhcmRTZXJpZXMuYW5nZWxDYXJkU2VyaWVzSWQgPSBfYW5nZWxDYXJkU2VyaWVzSWQ7CiAgICAgICAgYW5nZWxDYXJkU2VyaWVzLmJhc2VQcmljZSA9IF9iYXNlUHJpY2U7IAogICAgICAgIGFuZ2VsQ2FyZFNlcmllcy5tYXhBbmdlbFRvdGFsID0gX21heFRvdGFsOwogICAgICAgIGFuZ2VsQ2FyZFNlcmllcy5iYXNlQXVyYSA9IEFuZ2VsQXVyYShfYmFzZUF1cmEpOwogICAgICAgIGFuZ2VsQ2FyZFNlcmllcy5iYXNlQmF0dGxlUG93ZXIgPSBfYmFzZUJhdHRsZVBvd2VyOwogICAgICAgIGFuZ2VsQ2FyZFNlcmllcy5sYXN0U2VsbFRpbWUgPSAwOwogICAgICAgIGFuZ2VsQ2FyZFNlcmllcy5saXZlVGltZSA9IF9saXZlVGltZTsKCiAgICAgICAgdG90YWxBbmdlbENhcmRTZXJpZXMgKz0gMTsKICAgICAgICByZXR1cm4gdG90YWxBbmdlbENhcmRTZXJpZXM7CiAgICB9CgogICAgLy8gVGhpcyBpcyBjYWxsZWQgZXZlcnkgNSBkYXlzIHRvIHNldCB0aGUgYmFzZVByaWNlIGFuZCBtYXhBbmdlbFRvdGFsIGZvciB0aGUgYW5nZWwgc2VyaWVzIGJhc2VkIG9uIGJ1eSBwcmVzc3VyZSBvZiB0aGUgbGFzdCBjYXJkCiAgICBmdW5jdGlvbiB1cGRhdGVBbmdlbENhcmRTZXJpZXModWludDggX2FuZ2VsQ2FyZFNlcmllc0lkKSBvbmx5Q1JFQVRPUiBleHRlcm5hbCB7CiAgICAgICAgLy8gUmVxdWlyZSB0aGF0IHRoZSBzZXJpZXMgaXMgYWJvdmUgdGhlIEFyZWwgY2FyZAogICAgICAgIGlmIChfYW5nZWxDYXJkU2VyaWVzSWQgPCA0KSAKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgLy9kb24ndCBuZWVkIHRvIHVzZSBzYWZlc3VidHJhY3QgaGVyZSBiZWNhdXNlIGFib3ZlIHdlIGFscmVhZHkgcmV2ZXJ0ZWQgaWQgbGVzcyB0aGFuIDQuIAogICAgICAgIEFuZ2VsQ2FyZFNlcmllcyBtZW1vcnkgc2VyaWVzTWludXNPbmUgPSBhbmdlbENhcmRTZXJpZXNDb2xsZWN0aW9uW19hbmdlbENhcmRTZXJpZXNJZCAtIDFdOwogICAgICAgIEFuZ2VsQ2FyZFNlcmllcyBzdG9yYWdlIHNlcmllc1N0b3JhZ2UgPSBhbmdlbENhcmRTZXJpZXNDb2xsZWN0aW9uW19hbmdlbENhcmRTZXJpZXNJZF07CiAgICAgICAgLy9JbiBjYXNlIG5vIGNvbmRpdGlvbnMgYXJlIHRydWUsIHRoZW4gbm8gY2hhbmdlLiAKICAgICAgICBzZXJpZXNTdG9yYWdlLm1heEFuZ2VsVG90YWwgPSBzZXJpZXNNaW51c09uZS5tYXhBbmdlbFRvdGFsOwogICAgICAgIGlmIChzZXJpZXNNaW51c09uZS5jdXJyZW50QW5nZWxUb3RhbCA+PSBzZXJpZXNNaW51c09uZS5tYXhBbmdlbFRvdGFsKSB7CiAgICAgICAgICAgIHByZXZTZXJpZXNTZWxsb3V0SG91cnMgPSAoc2FmZVN1YnRyYWN0KHNlcmllc01pbnVzT25lLmxhc3RTZWxsVGltZSxzZXJpZXNNaW51c09uZS5saXZlVGltZSkpLzM2MDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcHJldlNlcmllc1NlbGxvdXRIb3VycyA9IDEyMDsKICAgICAgICB9CgogICAgICAgIC8vIFNldCB0aGUgbmV3IGJhc2VQcmljZSBmb3IgdGhlIGFuZ2VsQ2FyZFNlcmllcwogICAgICAgIC8vTG93ZXIgYnkgMC42NSBldGggaWYgZGlkbid0IHNlbGwgb3V0LCB1bnRpbCBtaW4gb2YgMC4wMDUgZXRoCiAgICAgICAgaWYgKHByZXZTZXJpZXNTZWxsb3V0SG91cnMgPiAxMDApIHsgCiAgICAgICAgICAgIGlmIChzZXJpZXNNaW51c09uZS5iYXNlUHJpY2UgPiA3MDAwMDAwMDAwMDAwMDAwMCkgCiAgICAgICAgICAgIHtzZXJpZXNTdG9yYWdlLmJhc2VQcmljZSA9IHNlcmllc01pbnVzT25lLmJhc2VQcmljZSAtIDY1MDAwMDAwMDAwMDAwMDAwO30KICAgICAgICAgICAgZWxzZSB7c2VyaWVzU3RvcmFnZS5iYXNlUHJpY2UgPSA1MDAwMDAwMDAwMDAwMDAwO30KICAgICAgICB9CiAgICAgICAgLy9JbmNyZWFzZSBieSAwLjAwNSBFVEggZm9yIDEwMC1zZWxsIG91dCBob3Vycy4gUHJpY2UgaW5jcmVhc2VzIGZhc3RlciBiYXNlZCBvbiBkZW1hbmQuIAogICAgICAgIGVsc2Uge3Nlcmllc1N0b3JhZ2UuYmFzZVByaWNlID0gc2VyaWVzTWludXNPbmUuYmFzZVByaWNlKygoMTAwLXByZXZTZXJpZXNTZWxsb3V0SG91cnMpKjUwMDAwMDAwMDAwMDAwMDApO30KICAgICAgICAKICAgICAgICAvLyBBZGp1c3QgdGhlIG1heFRvdGFsIGZvciB0aGUgYW5nZWxDYXJkU2VyaWVzCiAgICAgICAgLy9Eb24ndCBuZWVkIHNhZmVNYXRoIGhlcmUgYmVjYXVzZSB3ZSBhcmUgYWxyZWFkeSBjaGVja2luZyB2YWx1ZXMuIAogICAgICAgIGlmIChwcmV2U2VyaWVzU2VsbG91dEhvdXJzIDwgMTAwICYmIHNlcmllc01pbnVzT25lLm1heEFuZ2VsVG90YWwgPD0gNDM1KSB7CiAgICAgICAgICAgIHNlcmllc1N0b3JhZ2UubWF4QW5nZWxUb3RhbCA9IHNlcmllc01pbnVzT25lLm1heEFuZ2VsVG90YWwrMTU7CiAgICAgICAgfSBlbHNlIGlmIChwcmV2U2VyaWVzU2VsbG91dEhvdXJzID4gMTAwICYmIHNlcmllc01pbnVzT25lLm1heEFuZ2VsVG90YWwgPj0gNjApIHsKICAgICAgICAgICAgc2VyaWVzU3RvcmFnZS5tYXhBbmdlbFRvdGFsID0gc2VyaWVzTWludXNPbmUubWF4QW5nZWxUb3RhbC0xNTsKICAgICAgICB9CiAgICAgICAgLy8gTmVlZCB0byBzZXQgdGhpcyBpbmNhc2Ugbm8gY2FyZHMgIHNlbGwsIHNvIHRoYXQgb3RoZXIgY2FsY3VsYXRpb25zIGRvbid0IGJyZWFrCiAgICAgICAgc2VyaWVzU3RvcmFnZS5sYXN0U2VsbFRpbWUgPSB1aW50NjQobm93KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRBbmdlbCh1aW50OCBfYW5nZWxDYXJkU2VyaWVzSWQsIGFkZHJlc3MgX293bmVyLCB1aW50IF9wcmljZSwgdWludDE2IF9iYXR0bGVQb3dlcikgb25seVNFUkFQSElNIGV4dGVybmFsIHJldHVybnModWludDY0KSB7CiAgICAgICAgQW5nZWxDYXJkU2VyaWVzIHN0b3JhZ2Ugc2VyaWVzID0gYW5nZWxDYXJkU2VyaWVzQ29sbGVjdGlvbltfYW5nZWxDYXJkU2VyaWVzSWRdOwogICAgCiAgICAgICAgaWYgKHNlcmllcy5jdXJyZW50QW5nZWxUb3RhbCA+PSBzZXJpZXMubWF4QW5nZWxUb3RhbCkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICBlbHNlIHsgCiAgICAgICAgdG90YWxBbmdlbHMgKz0gMTsKICAgICAgICBBbmdlbCBzdG9yYWdlIGFuZ2VsID0gYW5nZWxDb2xsZWN0aW9uW3RvdGFsQW5nZWxzXTsKICAgICAgICBzZXJpZXMuY3VycmVudEFuZ2VsVG90YWwgKz0gMTsKICAgICAgICBzZXJpZXMubGFzdFNlbGxUaW1lID0gdWludDY0KG5vdyk7CiAgICAgICAgYW5nZWwuYW5nZWxJZCA9IHRvdGFsQW5nZWxzOwogICAgICAgIGFuZ2VsLmFuZ2VsQ2FyZFNlcmllc0lkID0gX2FuZ2VsQ2FyZFNlcmllc0lkOwogICAgICAgIGFuZ2VsLm93bmVyID0gX293bmVyOwogICAgICAgIGFuZ2VsLmJhdHRsZVBvd2VyID0gX2JhdHRsZVBvd2VyOyAKICAgICAgICBhbmdlbC5hdXJhID0gc2VyaWVzLmJhc2VBdXJhOwogICAgICAgIGFuZ2VsLmV4cGVyaWVuY2UgPSAwOwogICAgICAgIGFuZ2VsLnByaWNlID0gX3ByaWNlOwogICAgICAgIGFuZ2VsLmNyZWF0ZWRUaW1lID0gdWludDY0KG5vdyk7CiAgICAgICAgYW5nZWwubGFzdEJhdHRsZVRpbWUgPSAwOwogICAgICAgIGFuZ2VsLmxhc3RWc0JhdHRsZVRpbWUgPSAwOwogICAgICAgIGFuZ2VsLmxhc3RCYXR0bGVSZXN1bHQgPSAwOwogICAgICAgIGFkZEFuZ2VsSWRNYXBwaW5nKF9vd25lciwgYW5nZWwuYW5nZWxJZCk7CiAgICAgICAgcmV0dXJuIGFuZ2VsLmFuZ2VsSWQ7CiAgICAgICB9CiAgICB9CiAgICAgCiAgICBmdW5jdGlvbiBhZGRUb0FuZ2VsRXhwZXJpZW5jZUxldmVsKHVpbnQ2NCBfYW5nZWxJZCwgdWludCBfdmFsdWUpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCB7CiAgICAgICAgQW5nZWwgc3RvcmFnZSBhbmdlbCA9IGFuZ2VsQ29sbGVjdGlvbltfYW5nZWxJZF07CiAgICAgICAgaWYgKGFuZ2VsLmFuZ2VsSWQgPT0gX2FuZ2VsSWQpIHsKICAgICAgICAgICAgYW5nZWwuZXhwZXJpZW5jZSA9IHVpbnQxNihzYWZlQWRkKGFuZ2VsLmV4cGVyaWVuY2UsIF92YWx1ZSkpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRBbmdlbExhc3RCYXR0bGVUaW1lKHVpbnQ2NCBfYW5nZWxJZCkgb25seVNFUkFQSElNIGV4dGVybmFsIHsKICAgICAgICBBbmdlbCBzdG9yYWdlIGFuZ2VsID0gYW5nZWxDb2xsZWN0aW9uW19hbmdlbElkXTsKICAgICAgICBpZiAoYW5nZWwuYW5nZWxJZCA9PSBfYW5nZWxJZCkgewogICAgICAgICAgICBhbmdlbC5sYXN0QmF0dGxlVGltZSA9IHVpbnQ2NChub3cpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRBbmdlbExhc3RWc0JhdHRsZVRpbWUodWludDY0IF9hbmdlbElkKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgewogICAgICAgIEFuZ2VsIHN0b3JhZ2UgYW5nZWwgPSBhbmdlbENvbGxlY3Rpb25bX2FuZ2VsSWRdOwogICAgICAgIGlmIChhbmdlbC5hbmdlbElkID09IF9hbmdlbElkKSB7CiAgICAgICAgICAgIGFuZ2VsLmxhc3RWc0JhdHRsZVRpbWUgPSB1aW50NjQobm93KTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TGFzdEJhdHRsZVJlc3VsdCh1aW50NjQgX2FuZ2VsSWQsIHVpbnQxNiBfdmFsdWUpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCB7CiAgICAgICAgQW5nZWwgc3RvcmFnZSBhbmdlbCA9IGFuZ2VsQ29sbGVjdGlvbltfYW5nZWxJZF07CiAgICAgICAgaWYgKGFuZ2VsLmFuZ2VsSWQgPT0gX2FuZ2VsSWQpIHsKICAgICAgICAgICAgYW5nZWwubGFzdEJhdHRsZVJlc3VsdCA9IF92YWx1ZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkZEFuZ2VsSWRNYXBwaW5nKGFkZHJlc3MgX293bmVyLCB1aW50NjQgX2FuZ2VsSWQpIHByaXZhdGUgewogICAgICAgICAgICB1aW50NjRbXSBzdG9yYWdlIG93bmVycyA9IG93bmVyQW5nZWxDb2xsZWN0aW9uW19vd25lcl07CiAgICAgICAgICAgIG93bmVycy5wdXNoKF9hbmdlbElkKTsKICAgICAgICAgICAgQW5nZWwgc3RvcmFnZSBhbmdlbCA9IGFuZ2VsQ29sbGVjdGlvbltfYW5nZWxJZF07CiAgICAgICAgICAgIGFuZ2VsLm93bmVyID0gX293bmVyOwogICAgfQovL0FueW9uZSBjYW4gdHJhbnNmZXIgdGhlaXIgb3duIGFuZ2VsIGJ5IHNlbmRpbmcgYSB0cmFuc2FjdGlvbiB3aXRoIHRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvIGZyb20gdGhlIGFkZHJlc3MgdGhhdCBvd25zIGl0LiAKICAgIGZ1bmN0aW9uIG93bmVyQW5nZWxUcmFuc2ZlciAoYWRkcmVzcyBfdG8sIHVpbnQ2NCBfYW5nZWxJZCkgIHB1YmxpYyAgewogICAgICAgIAogICAgICAgaWYgKChfYW5nZWxJZCA+IHRvdGFsQW5nZWxzKSB8fCAoX2FuZ2VsSWQgPT0gMCkpIHtyZXZlcnQoKTt9CiAgICAgICBBbmdlbCBzdG9yYWdlIGFuZ2VsID0gYW5nZWxDb2xsZWN0aW9uW19hbmdlbElkXTsKICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBfdG8pIHtyZXZlcnQoKTt9CiAgICAgICAgaWYgKGFuZ2VsLm93bmVyICE9IG1zZy5zZW5kZXIpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgIGFuZ2VsLm93bmVyID0gX3RvOwogICAgICAgIGFkZEFuZ2VsSWRNYXBwaW5nKF90bywgX2FuZ2VsSWQpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyQW5nZWwoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQ2NCBfYW5nZWxJZCkgb25seVNFUkFQSElNIHB1YmxpYyByZXR1cm5zKFJlc3VsdENvZGUpIHsKICAgICAgICBBbmdlbCBzdG9yYWdlIGFuZ2VsID0gYW5nZWxDb2xsZWN0aW9uW19hbmdlbElkXTsKICAgICAgICBpZiAoX2Zyb20gPT0gX3RvKSB7cmV2ZXJ0KCk7fQogICAgICAgIGlmIChhbmdlbC5vd25lciAhPSBfZnJvbSkgewogICAgICAgICAgICByZXR1cm4gUmVzdWx0Q29kZS5FUlJPUl9OT1RfT1dORVI7CiAgICAgICAgfQogICAgICAgIGFuZ2VsLm93bmVyID0gX3RvOwogICAgICAgIGFkZEFuZ2VsSWRNYXBwaW5nKF90bywgX2FuZ2VsSWQpOwogICAgICAgIHJldHVybiBSZXN1bHRDb2RlLlNVQ0NFU1M7CiAgICB9CgogIAogICAKICAgIC8vKioqIFJlYWQgQWNjZXNzICoqKi8vCiAgICBmdW5jdGlvbiBnZXRBbmdlbENhcmRTZXJpZXModWludDggX2FuZ2VsQ2FyZFNlcmllc0lkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50OCBhbmdlbENhcmRTZXJpZXNJZCwgdWludDY0IGN1cnJlbnRBbmdlbFRvdGFsLCB1aW50IGJhc2VQcmljZSwgdWludDY0IG1heEFuZ2VsVG90YWwsIHVpbnQ4IGJhc2VBdXJhLCB1aW50IGJhc2VCYXR0bGVQb3dlciwgdWludDY0IGxhc3RTZWxsVGltZSwgdWludDY0IGxpdmVUaW1lKSB7CiAgICAgICAgQW5nZWxDYXJkU2VyaWVzIG1lbW9yeSBzZXJpZXMgPSBhbmdlbENhcmRTZXJpZXNDb2xsZWN0aW9uW19hbmdlbENhcmRTZXJpZXNJZF07CiAgICAgICAgYW5nZWxDYXJkU2VyaWVzSWQgPSBzZXJpZXMuYW5nZWxDYXJkU2VyaWVzSWQ7CiAgICAgICAgY3VycmVudEFuZ2VsVG90YWwgPSBzZXJpZXMuY3VycmVudEFuZ2VsVG90YWw7CiAgICAgICAgYmFzZVByaWNlID0gc2VyaWVzLmJhc2VQcmljZTsKICAgICAgICBtYXhBbmdlbFRvdGFsID0gc2VyaWVzLm1heEFuZ2VsVG90YWw7CiAgICAgICAgYmFzZUF1cmEgPSB1aW50OChzZXJpZXMuYmFzZUF1cmEpOwogICAgICAgIGJhc2VCYXR0bGVQb3dlciA9IHNlcmllcy5iYXNlQmF0dGxlUG93ZXI7CiAgICAgICAgbGFzdFNlbGxUaW1lID0gc2VyaWVzLmxhc3RTZWxsVGltZTsKICAgICAgICBsaXZlVGltZSA9IHNlcmllcy5saXZlVGltZTsKICAgIH0KCgogICAgZnVuY3Rpb24gZ2V0QW5nZWwodWludDY0IF9hbmdlbElkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50NjQgYW5nZWxJZCwgdWludDggYW5nZWxDYXJkU2VyaWVzSWQsIHVpbnQxNiBiYXR0bGVQb3dlciwgdWludDggYXVyYSwgdWludDE2IGV4cGVyaWVuY2UsIHVpbnQgcHJpY2UsIHVpbnQ2NCBjcmVhdGVkVGltZSwgdWludDY0IGxhc3RCYXR0bGVUaW1lLCB1aW50NjQgbGFzdFZzQmF0dGxlVGltZSwgdWludDE2IGxhc3RCYXR0bGVSZXN1bHQsIGFkZHJlc3Mgb3duZXIpIHsKICAgICAgICBBbmdlbCBtZW1vcnkgYW5nZWwgPSBhbmdlbENvbGxlY3Rpb25bX2FuZ2VsSWRdOwogICAgICAgIGFuZ2VsSWQgPSBhbmdlbC5hbmdlbElkOwogICAgICAgIGFuZ2VsQ2FyZFNlcmllc0lkID0gYW5nZWwuYW5nZWxDYXJkU2VyaWVzSWQ7CiAgICAgICAgYmF0dGxlUG93ZXIgPSBhbmdlbC5iYXR0bGVQb3dlcjsKICAgICAgICBhdXJhID0gdWludDgoYW5nZWwuYXVyYSk7CiAgICAgICAgZXhwZXJpZW5jZSA9IGFuZ2VsLmV4cGVyaWVuY2U7CiAgICAgICAgcHJpY2UgPSBhbmdlbC5wcmljZTsKICAgICAgICBjcmVhdGVkVGltZSA9IGFuZ2VsLmNyZWF0ZWRUaW1lOwogICAgICAgIGxhc3RCYXR0bGVUaW1lID0gYW5nZWwubGFzdEJhdHRsZVRpbWU7CiAgICAgICAgbGFzdFZzQmF0dGxlVGltZSA9IGFuZ2VsLmxhc3RWc0JhdHRsZVRpbWU7CiAgICAgICAgbGFzdEJhdHRsZVJlc3VsdCA9IGFuZ2VsLmxhc3RCYXR0bGVSZXN1bHQ7CiAgICAgICAgb3duZXIgPSBhbmdlbC5vd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRPd25lckFuZ2VsQ291bnQoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gb3duZXJBbmdlbENvbGxlY3Rpb25bX293bmVyXS5sZW5ndGg7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QW5nZWxCeUluZGV4KGFkZHJlc3MgX293bmVyLCB1aW50IF9pbmRleCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDY0KSB7CiAgICAgICAgaWYgKF9pbmRleCA+PSBvd25lckFuZ2VsQ29sbGVjdGlvbltfb3duZXJdLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gMDsgfQogICAgICAgIHJldHVybiBvd25lckFuZ2VsQ29sbGVjdGlvbltfb3duZXJdW19pbmRleF07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VG90YWxBbmdlbENhcmRTZXJpZXMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDgpIHsKICAgICAgICByZXR1cm4gdG90YWxBbmdlbENhcmRTZXJpZXM7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VG90YWxBbmdlbHMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDY0KSB7CiAgICAgICAgcmV0dXJuIHRvdGFsQW5nZWxzOwogICAgfQp9'.
	

]
