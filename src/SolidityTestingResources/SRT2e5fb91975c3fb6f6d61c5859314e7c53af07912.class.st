Class {
	#name : #SRT2e5fb91975c3fb6f6d61c5859314e7c53af07912,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2e5fb91975c3fb6f6d61c5859314e7c53af07912 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IDAuNC4yMTsKCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBFUkM4MjBSZWdpc3RyeSB7CiAgICBmdW5jdGlvbiBnZXRNYW5hZ2VyKGFkZHJlc3MgYWRkcikgcHVibGljIHZpZXcgcmV0dXJucyhhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIHNldE1hbmFnZXIoYWRkcmVzcyBhZGRyLCBhZGRyZXNzIG5ld01hbmFnZXIpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGdldEludGVyZmFjZUltcGxlbWVudGVyKGFkZHJlc3MgYWRkciwgYnl0ZXMzMiBpSGFzaCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gc2V0SW50ZXJmYWNlSW1wbGVtZW50ZXIoYWRkcmVzcyBhZGRyLCBieXRlczMyIGlIYXNoLCBhZGRyZXNzIGltcGxlbWVudGVyKSBwdWJsaWM7Cn0KCmNvbnRyYWN0IEVSQzgyMEltcGxlbWVudGVyIHsKICAgIEVSQzgyMFJlZ2lzdHJ5IGVyYzgyMFJlZ2lzdHJ5ID0gRVJDODIwUmVnaXN0cnkoMHg5OTFhMWJjYjA3NzU5OTI5MGQ3MzA1NDkzYzlBNjMwYzIwZjhiNzk4KTsKCiAgICBmdW5jdGlvbiBzZXRJbnRlcmZhY2VJbXBsZW1lbnRhdGlvbihzdHJpbmcgaWZhY2VMYWJlbCwgYWRkcmVzcyBpbXBsKSBpbnRlcm5hbCB7CiAgICAgICAgYnl0ZXMzMiBpZmFjZUhhc2ggPSBrZWNjYWsyNTYoaWZhY2VMYWJlbCk7CiAgICAgICAgZXJjODIwUmVnaXN0cnkuc2V0SW50ZXJmYWNlSW1wbGVtZW50ZXIodGhpcywgaWZhY2VIYXNoLCBpbXBsKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnRlcmZhY2VBZGRyKGFkZHJlc3MgYWRkciwgc3RyaW5nIGlmYWNlTGFiZWwpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcykgewogICAgICAgIGJ5dGVzMzIgaWZhY2VIYXNoID0ga2VjY2FrMjU2KGlmYWNlTGFiZWwpOwogICAgICAgIHJldHVybiBlcmM4MjBSZWdpc3RyeS5nZXRJbnRlcmZhY2VJbXBsZW1lbnRlcihhZGRyLCBpZmFjZUhhc2gpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlbGVnYXRlTWFuYWdlbWVudChhZGRyZXNzIG5ld01hbmFnZXIpIGludGVybmFsIHsKICAgICAgICBlcmM4MjBSZWdpc3RyeS5zZXRNYW5hZ2VyKHRoaXMsIG5ld01hbmFnZXIpOwogICAgfQp9CmludGVyZmFjZSBFUkM3NzdUb2tlbnNTZW5kZXIgewogICAgZnVuY3Rpb24gdG9rZW5zVG9TZW5kKGFkZHJlc3Mgb3BlcmF0b3IsIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCBhbW91bnQsIGJ5dGVzIHVzZXJEYXRhLGJ5dGVzIG9wZXJhdG9yRGF0YSkgZXh0ZXJuYWw7Cn0KCgppbnRlcmZhY2UgRVJDNzc3VG9rZW5zUmVjaXBpZW50IHsKICAgIGZ1bmN0aW9uIHRva2Vuc1JlY2VpdmVkKGFkZHJlc3Mgb3BlcmF0b3IsIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCBhbW91bnQsIGJ5dGVzIHVzZXJEYXRhLCBieXRlcyBvcGVyYXRvckRhdGEpIGV4dGVybmFsOwp9Cgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgVGhlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIG93bmVyIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBzZXRPd25lcihtc2cuc2VuZGVyKTsKICB9CgogIC8qKgogICAqIEBkZXYgU2V0cyBhIG5ldyBvd25lciBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gc2V0T3duZXIoYWRkcmVzcyBuZXdPd25lcikgaW50ZXJuYWwgewogICAgb3duZXIgPSBuZXdPd25lcjsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBlbWl0IE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBzZXRPd25lcihuZXdPd25lcik7CiAgfQp9Cgpjb250cmFjdCBKYXJvQ29pblRva2VuIGlzIE93bmFibGUsIEVSQzgyMEltcGxlbWVudGVyIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJKYXJvQ29pbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJKQVJPIjsKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZ3JhbnVsYXJpdHkgPSAxZTEwOyAgIC8vIFRva2VuIGhhcyA4IGRpZ2l0cyBhZnRlciBjb21tYQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSkgcHVibGljIGlzT3BlcmF0b3JGb3I7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKHVpbnQyNTYgPT4gYm9vbCkpIHByaXZhdGUgdXNlZE5vbmNlczsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IFNlbnQoYWRkcmVzcyBpbmRleGVkIG9wZXJhdG9yLCBhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCwgYnl0ZXMgdXNlckRhdGEsIGJ5dGVzIG9wZXJhdG9yRGF0YSk7CiAgICBldmVudCBNaW50ZWQoYWRkcmVzcyBpbmRleGVkIG9wZXJhdG9yLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50LCBieXRlcyBvcGVyYXRvckRhdGEpOwogICAgZXZlbnQgQnVybmVkKGFkZHJlc3MgaW5kZXhlZCBvcGVyYXRvciwgYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQyNTYgYW1vdW50LCBieXRlcyB1c2VyRGF0YSwgYnl0ZXMgb3BlcmF0b3JEYXRhKTsKICAgIGV2ZW50IEF1dGhvcml6ZWRPcGVyYXRvcihhZGRyZXNzIGluZGV4ZWQgb3BlcmF0b3IsIGFkZHJlc3MgaW5kZXhlZCB0b2tlbkhvbGRlcik7CiAgICBldmVudCBSZXZva2VkT3BlcmF0b3IoYWRkcmVzcyBpbmRleGVkIG9wZXJhdG9yLCBhZGRyZXNzIGluZGV4ZWQgdG9rZW5Ib2xkZXIpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSAwOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgbWF4U3VwcGx5ID0gMjEwMDAwMDBlMTg7CgoKICAgIC8vIC0tLS0tLS0gRVJDNzc3L0VSQzk2NSBJbXBsZW1lbnRhdGlvbiAtLS0tLS0tLS0tCgogICAgLyoqCiAgICAqIEBub3RpY2UgU2VuZCBgX2Ftb3VudGAgb2YgdG9rZW5zIHRvIGFkZHJlc3MgYF90b2AgcGFzc2luZyBgX3VzZXJEYXRhYCB0byB0aGUgcmVjaXBpZW50CiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgbnVtYmVyIG9mIHRva2VucyB0byBiZSBzZW50CiAgICAqIEBwYXJhbSBfdXNlckRhdGEgRGF0YSBnZW5lcmF0ZWQgYnkgdGhlIHVzZXIgdG8gYmUgc2VudCB0byB0aGUgcmVjaXBpZW50CiAgICAqLwogICAgZnVuY3Rpb24gc2VuZChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50LCBieXRlcyBfdXNlckRhdGEpIHB1YmxpYyB7CiAgICAgICAgZG9TZW5kKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCwgX3VzZXJEYXRhLCBtc2cuc2VuZGVyLCAiIiwgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MgdmlhIGNoZXF1ZQogICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvCiAgICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQKICAgICogQHBhcmFtIF91c2VyRGF0YSBUaGUgZGF0YSB0byBiZSBleGVjdXRlZAogICAgKiBAcGFyYW0gX25vbmNlIFVuaXF1ZSBub25jZSB0byBhdm9pZCBkb3VibGUgc3BlbmRpbmdzCiAgICAqLwogICAgZnVuY3Rpb24gc2VuZEJ5Q2hlcXVlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQsIGJ5dGVzIF91c2VyRGF0YSwgdWludDI1NiBfbm9uY2UsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3ModGhpcykpOwoKICAgICAgICAvLyBDaGVjayBpZiBzaWduYXR1cmUgaXMgdmFsaWQsIGdldCBzaWduZXIncyBhZGRyZXNzIGFuZCBtYXJrIHRoaXMgY2hlcXVlIGFzIHVzZWQuCiAgICAgICAgYnl0ZXMgbWVtb3J5IHByZWZpeCA9ICJceDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XG4zMiI7CiAgICAgICAgYnl0ZXMzMiBoYXNoID0ga2VjY2FrMjU2KHByZWZpeCwga2VjY2FrMjU2KF90bywgX2Ftb3VudCwgX3VzZXJEYXRhLCBfbm9uY2UpKTsKICAgICAgICAvLyBieXRlczMyIGhhc2ggPSBrZWNjYWsyNTYoX3RvLCBfYW1vdW50LCBfdXNlckRhdGEsIF9ub25jZSk7CgogICAgICAgIGFkZHJlc3Mgc2lnbmVyID0gZWNyZWNvdmVyKGhhc2gsIHYsIHIsIHMpOwogICAgICAgIHJlcXVpcmUgKHNpZ25lciAhPSAwKTsKICAgICAgICByZXF1aXJlICghdXNlZE5vbmNlc1tzaWduZXJdW19ub25jZV0pOwogICAgICAgIHVzZWROb25jZXNbc2lnbmVyXVtfbm9uY2VdID0gdHJ1ZTsKCiAgICAgICAgLy8gVHJhbnNmZXIgdG9rZW5zCiAgICAgICAgZG9TZW5kKHNpZ25lciwgX3RvLCBfYW1vdW50LCBfdXNlckRhdGEsIHNpZ25lciwgIiIsIHRydWUpOwogICAgfQoKICAgIC8qKgogICAgKiBAbm90aWNlIEF1dGhvcml6ZSBhIHRoaXJkIHBhcnR5IGBfb3BlcmF0b3JgIHRvIG1hbmFnZSAoc2VuZCkgYG1zZy5zZW5kZXJgJ3MgdG9rZW5zLgogICAgKiBAcGFyYW0gX29wZXJhdG9yIFRoZSBvcGVyYXRvciB0aGF0IHdhbnRzIHRvIGJlIEF1dGhvcml6ZWQKICAgICovCiAgICBmdW5jdGlvbiBhdXRob3JpemVPcGVyYXRvcihhZGRyZXNzIF9vcGVyYXRvcikgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9vcGVyYXRvciAhPSBtc2cuc2VuZGVyKTsKICAgICAgICBpc09wZXJhdG9yRm9yW19vcGVyYXRvcl1bbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgICAgIGVtaXQgQXV0aG9yaXplZE9wZXJhdG9yKF9vcGVyYXRvciwgbXNnLnNlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAqIEBub3RpY2UgUmV2b2tlIGEgdGhpcmQgcGFydHkgYF9vcGVyYXRvcmAncyByaWdodHMgdG8gbWFuYWdlIChzZW5kKSBgbXNnLnNlbmRlcmAncyB0b2tlbnMuCiAgICAqIEBwYXJhbSBfb3BlcmF0b3IgVGhlIG9wZXJhdG9yIHRoYXQgd2FudHMgdG8gYmUgUmV2b2tlZAogICAgKi8KICAgIGZ1bmN0aW9uIHJldm9rZU9wZXJhdG9yKGFkZHJlc3MgX29wZXJhdG9yKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX29wZXJhdG9yICE9IG1zZy5zZW5kZXIpOwogICAgICAgIGlzT3BlcmF0b3JGb3JbX29wZXJhdG9yXVttc2cuc2VuZGVyXSA9IGZhbHNlOwogICAgICAgIGVtaXQgUmV2b2tlZE9wZXJhdG9yKF9vcGVyYXRvciwgbXNnLnNlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAqIEBub3RpY2UgU2VuZCBgX2Ftb3VudGAgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiB0aGUgYWRkcmVzcyBgZnJvbWAgdG8gdGhlIGFkZHJlc3MgYHRvYC4KICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIGhvbGRpbmcgdGhlIHRva2VucyBiZWluZyBzZW50CiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgbnVtYmVyIG9mIHRva2VucyB0byBiZSBzZW50CiAgICAqIEBwYXJhbSBfdXNlckRhdGEgRGF0YSBnZW5lcmF0ZWQgYnkgdGhlIHVzZXIgdG8gYmUgc2VudCB0byB0aGUgcmVjaXBpZW50CiAgICAqIEBwYXJhbSBfb3BlcmF0b3JEYXRhIERhdGEgZ2VuZXJhdGVkIGJ5IHRoZSBvcGVyYXRvciB0byBiZSBzZW50IHRvIHRoZSByZWNpcGllbnQKICAgICovCiAgICBmdW5jdGlvbiBvcGVyYXRvclNlbmQoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCwgYnl0ZXMgX3VzZXJEYXRhLCBieXRlcyBfb3BlcmF0b3JEYXRhKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoaXNPcGVyYXRvckZvclttc2cuc2VuZGVyXVtfZnJvbV0pOwogICAgICAgIGRvU2VuZChfZnJvbSwgX3RvLCBfYW1vdW50LCBfdXNlckRhdGEsIG1zZy5zZW5kZXIsIF9vcGVyYXRvckRhdGEsIHRydWUpOwogICAgfQoKICAgIC8qIC0tIEhlbHBlciBGdW5jdGlvbnMgLS0gKi8KICAgIC8qKgogICAgKiBAbm90aWNlIEludGVybmFsIGZ1bmN0aW9uIHRoYXQgZW5zdXJlcyBgX2Ftb3VudGAgaXMgbXVsdGlwbGUgb2YgdGhlIGdyYW51bGFyaXR5CiAgICAqIEBwYXJhbSBfYW1vdW50IFRoZSBxdWFudGl0eSB0aGF0IHdhbnQncyB0byBiZSBjaGVja2VkCiAgICAqLwogICAgZnVuY3Rpb24gcmVxdWlyZU11bHRpcGxlKHVpbnQyNTYgX2Ftb3VudCkgaW50ZXJuYWwgcHVyZSB7CiAgICAgICAgcmVxdWlyZShfYW1vdW50LmRpdihncmFudWxhcml0eSkubXVsKGdyYW51bGFyaXR5KSA9PSBfYW1vdW50KTsKICAgIH0KCiAgICAvKioKICAgICogQG5vdGljZSBDaGVjayB3aGV0aGVyIGFuIGFkZHJlc3MgaXMgYSByZWd1bGFyIGFkZHJlc3Mgb3Igbm90LgogICAgKiBAcGFyYW0gX2FkZHIgQWRkcmVzcyBvZiB0aGUgY29udHJhY3QgdGhhdCBoYXMgdG8gYmUgY2hlY2tlZAogICAgKiBAcmV0dXJuIGB0cnVlYCBpZiBgX2FkZHJgIGlzIGEgcmVndWxhciBhZGRyZXNzIChub3QgYSBjb250cmFjdCkKICAgICovCiAgICBmdW5jdGlvbiBpc1JlZ3VsYXJBZGRyZXNzKGFkZHJlc3MgX2FkZHIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChfYWRkciA9PSAwKSB7IHJldHVybiBmYWxzZTsgfQogICAgICAgIHVpbnQgc2l6ZTsKICAgICAgICBhc3NlbWJseSB7IHNpemUgOj0gZXh0Y29kZXNpemUoX2FkZHIpIH0gLy8gc29saGludC1kaXNhYmxlLWxpbmUgbm8taW5saW5lLWFzc2VtYmx5CiAgICAgICAgcmV0dXJuIHNpemUgPT0gMDsKICAgIH0KCiAgICAvKioKICAgICogQG5vdGljZSBIZWxwZXIgZnVuY3Rpb24gdGhhdCBjaGVja3MgZm9yIEVSQzc3N1Rva2Vuc1NlbmRlciBvbiB0aGUgc2VuZGVyIGFuZCBjYWxscyBpdC4KICAgICogIE1heSB0aHJvdyBhY2NvcmRpbmcgdG8gYF9wcmV2ZW50TG9ja2luZ2AKICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIGhvbGRpbmcgdGhlIHRva2VucyBiZWluZyBzZW50CiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzZW50CiAgICAqIEBwYXJhbSBfdXNlckRhdGEgRGF0YSBnZW5lcmF0ZWQgYnkgdGhlIHVzZXIgdG8gYmUgcGFzc2VkIHRvIHRoZSByZWNpcGllbnQKICAgICogQHBhcmFtIF9vcGVyYXRvckRhdGEgRGF0YSBnZW5lcmF0ZWQgYnkgdGhlIG9wZXJhdG9yIHRvIGJlIHBhc3NlZCB0byB0aGUgcmVjaXBpZW50CiAgICAqICBpbXBsZW1lbnRpbmcgYEVSQzc3N1Rva2Vuc1NlbmRlcmAuCiAgICAqICBFUkM3NzcgbmF0aXZlIFNlbmQgZnVuY3Rpb25zIE1VU1Qgc2V0IHRoaXMgcGFyYW1ldGVyIHRvIGB0cnVlYCwgYW5kIGJhY2t3YXJkcyBjb21wYXRpYmxlIEVSQzIwIHRyYW5zZmVyCiAgICAqICBmdW5jdGlvbnMgU0hPVUxEIHNldCB0aGlzIHBhcmFtZXRlciB0byBgZmFsc2VgLgogICAgKi8KICAgIGZ1bmN0aW9uIGNhbGxTZW5kZXIoCiAgICAgICAgYWRkcmVzcyBfb3BlcmF0b3IsCiAgICAgICAgYWRkcmVzcyBfZnJvbSwKICAgICAgICBhZGRyZXNzIF90bywKICAgICAgICB1aW50MjU2IF9hbW91bnQsCiAgICAgICAgYnl0ZXMgX3VzZXJEYXRhLAogICAgICAgIGJ5dGVzIF9vcGVyYXRvckRhdGEKICAgICkgcHJpdmF0ZSB7CiAgICAgICAgYWRkcmVzcyBzZW5kZXJJbXBsZW1lbnRhdGlvbiA9IGludGVyZmFjZUFkZHIoX2Zyb20sICJFUkM3NzdUb2tlbnNTZW5kZXIiKTsKICAgICAgICBpZiAoc2VuZGVySW1wbGVtZW50YXRpb24gIT0gMCkgewogICAgICAgICAgICBFUkM3NzdUb2tlbnNTZW5kZXIoc2VuZGVySW1wbGVtZW50YXRpb24pLnRva2Vuc1RvU2VuZCgKICAgICAgICAgICAgICAgIF9vcGVyYXRvciwgX2Zyb20sIF90bywgX2Ftb3VudCwgX3VzZXJEYXRhLCBfb3BlcmF0b3JEYXRhKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAqIEBub3RpY2UgSGVscGVyIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGZvciBFUkM3NzdUb2tlbnNSZWNpcGllbnQgb24gdGhlIHJlY2lwaWVudCBhbmQgY2FsbHMgaXQuCiAgICAqICBNYXkgdGhyb3cgYWNjb3JkaW5nIHRvIGBfcHJldmVudExvY2tpbmdgCiAgICAqIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBob2xkaW5nIHRoZSB0b2tlbnMgYmVpbmcgc2VudAogICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICogQHBhcmFtIF9hbW91bnQgVGhlIG51bWJlciBvZiB0b2tlbnMgdG8gYmUgc2VudAogICAgKiBAcGFyYW0gX3VzZXJEYXRhIERhdGEgZ2VuZXJhdGVkIGJ5IHRoZSB1c2VyIHRvIGJlIHBhc3NlZCB0byB0aGUgcmVjaXBpZW50CiAgICAqIEBwYXJhbSBfb3BlcmF0b3JEYXRhIERhdGEgZ2VuZXJhdGVkIGJ5IHRoZSBvcGVyYXRvciB0byBiZSBwYXNzZWQgdG8gdGhlIHJlY2lwaWVudAogICAgKiBAcGFyYW0gX3ByZXZlbnRMb2NraW5nIGB0cnVlYCBpZiB5b3Ugd2FudCB0aGlzIGZ1bmN0aW9uIHRvIHRocm93IHdoZW4gdG9rZW5zIGFyZSBzZW50IHRvIGEgY29udHJhY3Qgbm90CiAgICAqICBpbXBsZW1lbnRpbmcgYEVSQzc3N1Rva2Vuc1JlY2lwaWVudGAuCiAgICAqICBFUkM3NzcgbmF0aXZlIFNlbmQgZnVuY3Rpb25zIE1VU1Qgc2V0IHRoaXMgcGFyYW1ldGVyIHRvIGB0cnVlYCwgYW5kIGJhY2t3YXJkcyBjb21wYXRpYmxlIEVSQzIwIHRyYW5zZmVyCiAgICAqICBmdW5jdGlvbnMgU0hPVUxEIHNldCB0aGlzIHBhcmFtZXRlciB0byBgZmFsc2VgLgogICAgKi8KICAgIGZ1bmN0aW9uIGNhbGxSZWNpcGllbnQoCiAgICAgICAgYWRkcmVzcyBfb3BlcmF0b3IsCiAgICAgICAgYWRkcmVzcyBfZnJvbSwKICAgICAgICBhZGRyZXNzIF90bywKICAgICAgICB1aW50MjU2IF9hbW91bnQsCiAgICAgICAgYnl0ZXMgX3VzZXJEYXRhLAogICAgICAgIGJ5dGVzIF9vcGVyYXRvckRhdGEsCiAgICAgICAgYm9vbCBfcHJldmVudExvY2tpbmcKICAgICkgcHJpdmF0ZSB7CiAgICAgICAgYWRkcmVzcyByZWNpcGllbnRJbXBsZW1lbnRhdGlvbiA9IGludGVyZmFjZUFkZHIoX3RvLCAiRVJDNzc3VG9rZW5zUmVjaXBpZW50Iik7CiAgICAgICAgaWYgKHJlY2lwaWVudEltcGxlbWVudGF0aW9uICE9IDApIHsKICAgICAgICAgICAgRVJDNzc3VG9rZW5zUmVjaXBpZW50KHJlY2lwaWVudEltcGxlbWVudGF0aW9uKS50b2tlbnNSZWNlaXZlZCgKICAgICAgICAgICAgICAgIF9vcGVyYXRvciwgX2Zyb20sIF90bywgX2Ftb3VudCwgX3VzZXJEYXRhLCBfb3BlcmF0b3JEYXRhKTsKICAgICAgICB9IGVsc2UgaWYgKF9wcmV2ZW50TG9ja2luZykgewogICAgICAgICAgICByZXF1aXJlKGlzUmVndWxhckFkZHJlc3MoX3RvKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBAbm90aWNlIEhlbHBlciBmdW5jdGlvbiBhY3R1YWxseSBwZXJmb3JtaW5nIHRoZSBzZW5kaW5nIG9mIHRva2Vucy4KICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIGhvbGRpbmcgdGhlIHRva2VucyBiZWluZyBzZW50CiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgbnVtYmVyIG9mIHRva2VucyB0byBiZSBzZW50CiAgICAqIEBwYXJhbSBfdXNlckRhdGEgRGF0YSBnZW5lcmF0ZWQgYnkgdGhlIHVzZXIgdG8gYmUgcGFzc2VkIHRvIHRoZSByZWNpcGllbnQKICAgICogQHBhcmFtIF9vcGVyYXRvckRhdGEgRGF0YSBnZW5lcmF0ZWQgYnkgdGhlIG9wZXJhdG9yIHRvIGJlIHBhc3NlZCB0byB0aGUgcmVjaXBpZW50CiAgICAqIEBwYXJhbSBfcHJldmVudExvY2tpbmcgYHRydWVgIGlmIHlvdSB3YW50IHRoaXMgZnVuY3Rpb24gdG8gdGhyb3cgd2hlbiB0b2tlbnMgYXJlIHNlbnQgdG8gYSBjb250cmFjdCBub3QKICAgICogIGltcGxlbWVudGluZyBgZXJjNzc3X3Rva2VuSG9sZGVyYC4KICAgICogIEVSQzc3NyBuYXRpdmUgU2VuZCBmdW5jdGlvbnMgTVVTVCBzZXQgdGhpcyBwYXJhbWV0ZXIgdG8gYHRydWVgLCBhbmQgYmFja3dhcmRzIGNvbXBhdGlibGUgRVJDMjAgdHJhbnNmZXIKICAgICogIGZ1bmN0aW9ucyBTSE9VTEQgc2V0IHRoaXMgcGFyYW1ldGVyIHRvIGBmYWxzZWAuCiAgICAqLwogICAgZnVuY3Rpb24gZG9TZW5kKAogICAgICAgIGFkZHJlc3MgX2Zyb20sCiAgICAgICAgYWRkcmVzcyBfdG8sCiAgICAgICAgdWludDI1NiBfYW1vdW50LAogICAgICAgIGJ5dGVzIF91c2VyRGF0YSwKICAgICAgICBhZGRyZXNzIF9vcGVyYXRvciwKICAgICAgICBieXRlcyBfb3BlcmF0b3JEYXRhLAogICAgICAgIGJvb2wgX3ByZXZlbnRMb2NraW5nCiAgICApCiAgICAgICAgcHJpdmF0ZQogICAgewogICAgICAgIHJlcXVpcmVNdWx0aXBsZShfYW1vdW50KTsKCiAgICAgICAgY2FsbFNlbmRlcihfb3BlcmF0b3IsIF9mcm9tLCBfdG8sIF9hbW91bnQsIF91c2VyRGF0YSwgX29wZXJhdG9yRGF0YSk7CgogICAgICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7ICAgICAgICAgICAgICAgICAgLy8gZm9yYmlkIHNlbmRpbmcgdG8gMHgwICg9YnVybmluZykKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX2Ftb3VudCk7IC8vIGVuc3VyZSBlbm91Z2ggZnVuZHMKCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSA9IGJhbGFuY2VPZltfZnJvbV0uc3ViKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VPZltfdG9dID0gYmFsYW5jZU9mW190b10uYWRkKF9hbW91bnQpOwoKICAgICAgICBjYWxsUmVjaXBpZW50KF9vcGVyYXRvciwgX2Zyb20sIF90bywgX2Ftb3VudCwgX3VzZXJEYXRhLCBfb3BlcmF0b3JEYXRhLCBfcHJldmVudExvY2tpbmcpOwoKICAgICAgICBlbWl0IFNlbnQoX29wZXJhdG9yLCBfZnJvbSwgX3RvLCBfYW1vdW50LCBfdXNlckRhdGEsIF9vcGVyYXRvckRhdGEpOwogICAgICAgIGVtaXQgVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICB9CgogICAgLy8gLS0tLS0tLSBFUkMyMCBJbXBsZW1lbnRhdGlvbiAtLS0tLS0tLS0tCgogICAgLyoqCiAgICAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgZG9TZW5kKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCAiIiwgbXNnLnNlbmRlciwgIiIsIGZhbHNlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4gVGVjaG5pY2FsbHkgdGhpcyBpcyBub3QgRVJDMjAgdHJhbnNmZXJGcm9tIGJ1dCBtb3JlIEVSQzc3NyBvcGVyYXRvclNlbmQuCiAgICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoaXNPcGVyYXRvckZvclttc2cuc2VuZGVyXVtfZnJvbV0pOwogICAgICAgIGRvU2VuZChfZnJvbSwgX3RvLCBfdmFsdWUsICIiLCBtc2cuc2VuZGVyLCAiIiwgdHJ1ZSk7CiAgICAgICAgZW1pdCBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgoKICAgICAqIEBkZXYgT3JpZ2luYWxseSBpbiBFUkMyMCB0aGlzIGZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAgKgogICAgICogRnVuY3Rpb24gd2FzIGFkZGVkIHB1cmx5IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHdpdGggRVJDMjAuIFVzZSBvcGVyYXRvciBsb2dpYyBmcm9tIEVSQzc3NyBpbnN0ZWFkLgogICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcmV0dXJuIEEgcmV0dXJuaW5nIHVpbnQyNTYgYmFsYW5jZU9mIF9zcGVuZGVyIGlmIGl0J3MgYWN0aXZlIG9wZXJhdG9yIGFuZCAwIGlmIG5vdC4KICAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9hbW91bnQpIHsKICAgICAgICBpZiAoaXNPcGVyYXRvckZvcltfc3BlbmRlcl1bX293bmVyXSkgewogICAgICAgICAgICBfYW1vdW50ID0gYmFsYW5jZU9mW19vd25lcl07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX2Ftb3VudCA9IDA7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICAgKgogICAgICogVGhpcyBmdW5jdGlvbiBpcyBtb3JlIGF1dGhvcml6ZU9wZXJhdG9yIGFuZCByZXZva2VPcGVyYXRvciBmcm9tIEVSQzc3NyB0aGF0IEFwcHJvdmUgZnJvbSBFUkMyMC4KICAgICAqIEFwcHJvdmUgY29uY2VwdCBoYXMgc2V2ZXJhbCBpc3N1ZXMgKGUuZy4gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkpLAogICAgICogc28gSSBwcmVmZXIgdG8gdXNlIG9wZXJhdG9yIGNvbmNlcHQuIElmIHlvdSB3YW50IHRvIHJldm9rZSBhcHByb3ZhbCwganVzdCBwdXQgMCBpbnRvIF92YWx1ZS4KICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEBwYXJhbSBfdmFsdWUgRmFrZSB2YWx1ZSB0byBiZSBjb21wYXRpYmxlIHdpdGggRVJDMjAgcmVxdWlyZW1lbnRzLgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3NwZW5kZXIgIT0gbXNnLnNlbmRlcik7CgogICAgICAgIGlmIChfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIC8vIEF1dGhvcml6aW5nIG9wZXJhdG9yCiAgICAgICAgICAgIGlzT3BlcmF0b3JGb3JbX3NwZW5kZXJdW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgICAgICAgZW1pdCBBdXRob3JpemVkT3BlcmF0b3IoX3NwZW5kZXIsIG1zZy5zZW5kZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFJldm9raW5nIG9wZXJhdG9yCiAgICAgICAgICAgIGlzT3BlcmF0b3JGb3JbX3NwZW5kZXJdW21zZy5zZW5kZXJdID0gZmFsc2U7CiAgICAgICAgICAgIGVtaXQgUmV2b2tlZE9wZXJhdG9yKF9zcGVuZGVyLCBtc2cuc2VuZGVyKTsKICAgICAgICB9CgogICAgICAgIGVtaXQgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gLS0tLS0tLSBNaW50aW5nIGFuZCBidXJuaW5nIC0tLS0tLS0tLS0KCiAgICAvKioKICAgICogQGRldiBGdW5jdGlvbiB0byBtaW50IHRva2VucwogICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNlaXZlIHRoZSBtaW50ZWQgdG9rZW5zLgogICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAgKiBAcGFyYW0gX29wZXJhdG9yRGF0YSBEYXRhIHRoYXQgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIHJlY2lwaWVudCBhcyBhIGZpcnN0IHRyYW5zZmVyLgogICAgKi8KICAgIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCwgYnl0ZXMgX29wZXJhdG9yRGF0YSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZSAodG90YWxTdXBwbHkuYWRkKF9hbW91bnQpIDw9IG1heFN1cHBseSk7CiAgICAgICAgcmVxdWlyZU11bHRpcGxlKF9hbW91bnQpOwoKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IGJhbGFuY2VPZltfdG9dLmFkZChfYW1vdW50KTsKCiAgICAgICAgY2FsbFJlY2lwaWVudChtc2cuc2VuZGVyLCAweDAsIF90bywgX2Ftb3VudCwgIiIsIF9vcGVyYXRvckRhdGEsIHRydWUpOwoKICAgICAgICBlbWl0IE1pbnRlZChtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQsIF9vcGVyYXRvckRhdGEpOwogICAgICAgIGVtaXQgVHJhbnNmZXIoMHgwLCBfdG8sIF9hbW91bnQpOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGJ1cm4gc2VuZGVyJ3MgdG9rZW5zCiAgICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJ1cm4uCiAgICAqIEByZXR1cm4gQSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICAqLwogICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF9hbW91bnQsIGJ5dGVzIF91c2VyRGF0YSkgcHVibGljIHsKICAgICAgICByZXF1aXJlIChfYW1vdW50ID4gMCk7CiAgICAgICAgcmVxdWlyZSAoYmFsYW5jZU9mW21zZy5zZW5kZXJdID49IF9hbW91bnQpOwogICAgICAgIHJlcXVpcmVNdWx0aXBsZShfYW1vdW50KTsKCiAgICAgICAgY2FsbFNlbmRlcihtc2cuc2VuZGVyLCBtc2cuc2VuZGVyLCAweDAsIF9hbW91bnQsIF91c2VyRGF0YSwgIiIpOwoKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfYW1vdW50KTsKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOwoKICAgICAgICBlbWl0IEJ1cm5lZChtc2cuc2VuZGVyLCBtc2cuc2VuZGVyLCBfYW1vdW50LCBfdXNlckRhdGEsICIiKTsKICAgICAgICBlbWl0IFRyYW5zZmVyKG1zZy5zZW5kZXIsIDB4MCwgX2Ftb3VudCk7CiAgICB9Cgp9'.
	

]
