Class {
	#name : #SRTe6766297571f8693adec94e5f8ef363d323e211d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe6766297571f8693adec94e5f8ef363d323e211d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovKioKICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogIH0KCn0KCgoKCi8qKgogKiBAdGl0bGUgIAogKiBAZGV2IERhdFRva2VuU2FsZSBpcyBhIGNvbnRyYWN0IGZvciBtYW5hZ2luZyBhIHRva2VuIGNyb3dkc2FsZS4KICogRGF0VG9rZW5TYWxlIGhhdmUgYSBzdGFydCBhbmQgZW5kIGRhdGUsIHdoZXJlIGludmVzdG9ycyBjYW4gbWFrZQogKiB0b2tlbiBwdXJjaGFzZXMgYW5kIHRoZSBjcm93ZHNhbGUgd2lsbCBhc3NpZ24gdGhlbSB0b2tlbnMgYmFzZWQKICogb24gYSB0b2tlbiBwZXIgRVRIIHJhdGUuIEZ1bmRzIGNvbGxlY3RlZCBhcmUgZm9yd2FyZGVkIHRvIGEgcmVmdW5kYWJsZSB2YWx1dCAKICogYXMgdGhleSBhcnJpdmUuCiAqLwpjb250cmFjdCBEYXR1bVRva2VuU2FsZSBpcyAgT3duYWJsZSB7CgogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBhZGRyZXNzIHB1YmxpYyB3aGl0ZUxpc3RDb250cm9sbGVyQWRkcmVzczsKCiAgLy9sb29rdXAgYWRkcmVzc2VzIGZvciB3aGl0ZWxpc3QKICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyB3aGl0ZUxpc3RBZGRyZXNzZXM7CgogIC8vbG9va3VwIGFkZHJlc3NlcyBmb3Igc3BlY2lhbCBib251c2VzCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYm9udXNBZGRyZXNzZXM7CgogIC8vbG9vcHVwIGZvciBtYXggdG9rZW4gYW1vdW50IHBlciB1c2VyIGFsbG93ZWQKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIG1heEFtb3VudEFkZHJlc3NlczsKCiAgLy9sb29wdXAgZm9yIGJhbGFuY2VzCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlczsKCiAgLy8gc3RhcnQgYW5kIGVuZCBkYXRlIHdoZXJlIGludmVzdG1lbnRzIGFyZSBhbGxvd2VkIChib3RoIGluY2x1c2l2ZSkKICB1aW50MjU2IHB1YmxpYyBzdGFydERhdGUgPSAxNTA5MjgyMDAwOy8vMjkgT2N0IDIwMTcgMTM6MDA6MDAgKzAwOjAwIFVUQwogIC8vdWludDI1NiBwdWJsaWMgc3RhcnREYXRlID0gMTUwOTIxMDg5MTsvLzI5IE9jdCAyMDE3IDEzOjAwOjAwICswMDowMCBVVEMKICAKICB1aW50MjU2IHB1YmxpYyBlbmREYXRlID0gMTUxMTk2MDQwMDsgLy8yOSBOb3YgMjAxNyAxMzowMDowMCArMDA6MDAgVVRDCgogIC8vIE1pbmltdW0gYW1vdW50IHRvIHBhcnRpY2lwYXRlICh3ZWkgZm9yIGludGVybmFsIHVzYWdlKQogIHVpbnQyNTYgcHVibGljIG1pbmltdW1QYXJ0aWNpcGF0aW9uQW1vdW50ID0gMzAwMDAwMDAwMDAwMDAwMDAwIHdlaTsgLy8wLjEgZXRoZXIKCiAgLy8gTWF4aW11bSBhbW91bnQgdG8gcGFydGljaXBhdGUKICB1aW50MjU2IHB1YmxpYyBtYXhpbWFsUGFydGljaXBhdGlvbkFtb3VudCA9IDEwMDAgZXRoZXI7IC8vMTAwMCBldGhlcgoKICAvLyBhZGRyZXNzIHdoZXJlIGZ1bmRzIGFyZSBjb2xsZWN0ZWQKICBhZGRyZXNzIHdhbGxldDsKCiAgLy8gaG93IG1hbnkgdG9rZW4gdW5pdHMgYSBidXllciBnZXRzIHBlciBldGhlcgogIHVpbnQyNTYgcmF0ZSA9IDI1MDAwOwoKICAvLyBhbW91bnQgb2YgcmFpc2VkIG1vbmV5IGluIHdlaQogIHVpbnQyNTYgcHJpdmF0ZSB3ZWlSYWlzZWQ7CgogIC8vZmxhZyBmb3IgZmluYWwgb2YgY3Jvd2RzYWxlCiAgYm9vbCBwdWJsaWMgaXNGaW5hbGl6ZWQgPSBmYWxzZTsKCiAgLy9jYXAgZm9yIHRoZSBzYWxlIGluIGV0aGVyCiAgdWludDI1NiBwdWJsaWMgY2FwID0gNjEyMDAgZXRoZXI7IC8vNjEyMDAgZXRoZXIKCiAgLy90b3RhbCB0b2tlblN1cHBseQogIHVpbnQyNTYgcHVibGljIHRvdGFsVG9rZW5TdXBwbHkgPSAxNTMwMDAwMDAwIGV0aGVyOwoKICAvLyBhbW91bnQgb2YgdG9rZW5zIHNvbGQKICB1aW50MjU2IHB1YmxpYyB0b2tlbnNJbldlaVNvbGQ7CgogIHVpbnQgcHJpdmF0ZSBib251czFSYXRlID0gMjg3NTA7CiAgdWludCBwcml2YXRlIGJvbnVzMlJhdGUgPSAyODM3NTsKICB1aW50IHByaXZhdGUgYm9udXMzUmF0ZSA9IDI4MDAwOwogIHVpbnQgcHJpdmF0ZSBib251czRSYXRlID0gMjc2MjU7CiAgdWludCBwcml2YXRlIGJvbnVzNVJhdGUgPSAyNzI1MDsKICB1aW50IHByaXZhdGUgYm9udXM2UmF0ZSA9IDI2ODc1OwogIHVpbnQgcHJpdmF0ZSBib251czdSYXRlID0gMjY1MDA7CiAgdWludCBwcml2YXRlIGJvbnVzOFJhdGUgPSAyNjEyNTsKICB1aW50IHByaXZhdGUgYm9udXM5UmF0ZSA9IDI1NzUwOwogIHVpbnQgcHJpdmF0ZSBib251czEwUmF0ZSA9IDI1Mzc1OwogICAKICBldmVudCBGaW5hbGl6ZWQoKTsKICAvKioKICAqIEBub3RpY2UgTG9nIGFuIGV2ZW50IGZvciBlYWNoIGZ1bmRpbmcgY29udHJpYnV0ZWQgZHVyaW5nIHRoZSBwdWJsaWMgcGhhc2UKICAqIEBub3RpY2UgRXZlbnRzIGFyZSBub3QgbG9nZ2VkIHdoZW4gdGhlIGNvbnN0cnVjdG9yIGlzIGJlaW5nIGV4ZWN1dGVkIGR1cmluZwogICogICAgICAgICBkZXBsb3ltZW50LCBzbyB0aGUgcHJlYWxsb2NhdGlvbnMgd2lsbCBub3QgYmUgbG9nZ2VkCiAgKi8KICBldmVudCBMb2dQYXJ0aWNpcGF0aW9uKGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogIAoKICAvKioKICAqIEBub3RpY2UgTG9nIGFuIGV2ZW50IGZvciBlYWNoIGZ1bmRpbmcgY29udHJpYnV0ZWQgY29udmVydGVkIHRvIGVhcm5lZCB0b2tlbnMKICAqIEBub3RpY2UgRXZlbnRzIGFyZSBub3QgbG9nZ2VkIHdoZW4gdGhlIGNvbnN0cnVjdG9yIGlzIGJlaW5nIGV4ZWN1dGVkIGR1cmluZwogICogICAgICAgICBkZXBsb3ltZW50LCBzbyB0aGUgcHJlYWxsb2NhdGlvbnMgd2lsbCBub3QgYmUgbG9nZ2VkCiAgKi8KICBldmVudCBMb2dUb2tlblJlY2VpdmVyKGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwoKCiAgLyoqCiAgKiBAbm90aWNlIExvZyBhbiBldmVudCBmb3IgZWFjaCBmdW5kaW5nIGNvbnRyaWJ1dGVkIGNvbnZlcnRlZCB0byBlYXJuZWQgdG9rZW5zCiAgKiBAbm90aWNlIEV2ZW50cyBhcmUgbm90IGxvZ2dlZCB3aGVuIHRoZSBjb25zdHJ1Y3RvciBpcyBiZWluZyBleGVjdXRlZCBkdXJpbmcKICAqICAgICAgICAgZGVwbG95bWVudCwgc28gdGhlIHByZWFsbG9jYXRpb25zIHdpbGwgbm90IGJlIGxvZ2dlZAogICovCiAgZXZlbnQgTG9nVG9rZW5SZW1vdmVyKGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogIAogIGZ1bmN0aW9uIERhdHVtVG9rZW5TYWxlKGFkZHJlc3MgX3dhbGxldCkgcGF5YWJsZSB7CiAgICB3YWxsZXQgPSBfd2FsbGV0OwogIH0KCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICByZXF1aXJlKHdoaXRlTGlzdEFkZHJlc3Nlc1ttc2cuc2VuZGVyXSk7CiAgICByZXF1aXJlKHZhbGlkUHVyY2hhc2UoKSk7CgogICAgYnV5VG9rZW5zKG1zZy52YWx1ZSk7CiAgfQoKICAvLyBsb3cgbGV2ZWwgdG9rZW4gcHVyY2hhc2UgZnVuY3Rpb24KICBmdW5jdGlvbiBidXlUb2tlbnModWludDI1NiBhbW91bnQpIGludGVybmFsIHsKICAgIC8vZ2V0IGFtbW91bnQgaW4gd2VpCiAgICB1aW50MjU2IHdlaUFtb3VudCA9IGFtb3VudDsKCiAgICAvLyB1cGRhdGUgc3RhdGUKICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKCiAgICAvLyBnZXQgdG9rZW4gYW1vdW50CiAgICB1aW50MjU2IHRva2VucyA9IGdldFRva2VuQW1vdW50KHdlaUFtb3VudCk7CiAgICB0b2tlbnNJbldlaVNvbGQgPSB0b2tlbnNJbldlaVNvbGQuYWRkKHRva2Vucyk7CgogICAgLy9maXJlIHRva2VuIHJlY2VpdmUgZXZlbnQKICAgIExvZ1Rva2VuUmVjZWl2ZXIobXNnLnNlbmRlciwgdG9rZW5zKTsKCiAgICAvL3VwZGF0ZSBiYWxhbmNlcyBmb3IgdXNlcgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQodG9rZW5zKTsKCiAgICAvL2ZpcmUgZXRoIHB1cmNoYXNlIGV2ZW50CiAgICBMb2dQYXJ0aWNpcGF0aW9uKG1zZy5zZW5kZXIsbXNnLnZhbHVlKTsKCiAgICAvL2ZvcndhcmQgZnVuZHMgdG8gd2FsbGV0CiAgICBmb3J3YXJkRnVuZHMoYW1vdW50KTsKICB9CgoKICAvLyBtYW51YWxseSB1cGRhdGUgdGhlIHRva2VucyBzb2xkIGNvdW50IHRvIHJlc2VydmUgdG9rZW5zIG9yIHVwZGF0ZSBzdGF0cyBpZiBvdGhlciB3YXkgYm91Z2h0CiAgZnVuY3Rpb24gcmVzZXJ2ZVRva2VucyhhZGRyZXNzIF9hZGRyZXNzLCB1aW50MjU2IGFtb3VudCkKICB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gd2hpdGVMaXN0Q29udHJvbGxlckFkZHJlc3MpOwoKICAgIC8vdXBkYXRlIGJhbGFuY2VzIGZvciB1c2VyCiAgICBiYWxhbmNlc1tfYWRkcmVzc10gPSBiYWxhbmNlc1tfYWRkcmVzc10uYWRkKGFtb3VudCk7CgogICAgLy9maXJlIGV2ZW50CiAgICBMb2dUb2tlblJlY2VpdmVyKF9hZGRyZXNzLCBhbW91bnQpOwoKICAgIHRva2Vuc0luV2VpU29sZCA9IHRva2Vuc0luV2VpU29sZC5hZGQoYW1vdW50KTsKICB9CgogIC8vcmVsZWFzZSB0b2tlbnMgZnJvbSBzb2xkIHN0YXRpc3Rpc3QsIHVzZWQgaWYgdGhlIGFjY291bnQgd2FzIG5vdCB2ZXJpZmllZCB3aXRoIEtZQwogIGZ1bmN0aW9uIHJlbGVhc2VUb2tlbnMoYWRkcmVzcyBfYWRkcmVzcywgdWludDI1NiBhbW91bnQpCiAgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHdoaXRlTGlzdENvbnRyb2xsZXJBZGRyZXNzKTsKCiAgICBiYWxhbmNlc1tfYWRkcmVzc10gPSBiYWxhbmNlc1tfYWRkcmVzc10uc3ViKGFtb3VudCk7CgogICAgLy9maXJlIGV2ZW50CiAgICBMb2dUb2tlblJlbW92ZXIoX2FkZHJlc3MsIGFtb3VudCk7CgogICAgdG9rZW5zSW5XZWlTb2xkID0gdG9rZW5zSW5XZWlTb2xkLnN1YihhbW91bnQpOwogIH0KCiAgLy8gc2VuZCBldGhlciB0byB0aGUgZnVuZCBjb2xsZWN0aW9uIHdhbGxldAogIC8vIG92ZXJyaWRlIHRvIGNyZWF0ZSBjdXN0b20gZnVuZCBmb3J3YXJkaW5nIG1lY2hhbmlzbXMKICBmdW5jdGlvbiBmb3J3YXJkRnVuZHModWludDI1NiBhbW91bnQpIGludGVybmFsIHsKICAgIHdhbGxldC50cmFuc2ZlcihhbW91bnQpOwogIH0KCiAgLy8gc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBjcm93ZHNhbGUgZW5kcyBvciB0byBlbWVyZ2VuY3kgc3RvcCB0aGUgc2FsZQogIGZ1bmN0aW9uIGZpbmFsaXplKCkgb25seU93bmVyIHsKICAgIHJlcXVpcmUoIWlzRmluYWxpemVkKTsKICAgIEZpbmFsaXplZCgpOwogICAgaXNGaW5hbGl6ZWQgPSB0cnVlOwogIH0KCiAgZnVuY3Rpb24gc2V0V2hpdGVsaXN0Q29udHJvbGxlckFkZHJlc3MoYWRkcmVzcyBfY29udHJvbGxlcikgb25seU93bmVyCiAgewogICAgIHdoaXRlTGlzdENvbnRyb2xsZXJBZGRyZXNzID0gX2NvbnRyb2xsZXI7CiAgfQoKICBmdW5jdGlvbiBhZGRXaGl0ZWxpc3RBZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3NUb0FkZCkKICB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB3aGl0ZUxpc3RDb250cm9sbGVyQWRkcmVzcyk7CiAgICAgIHdoaXRlTGlzdEFkZHJlc3Nlc1tfYWRkcmVzc1RvQWRkXSA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiBhZGRTcGVjaWFsQm9udXNDb25kaXRpb25zKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX2JvbnVzUGVyY2VudCwgdWludDI1NiBfbWF4QW1vdW50KSAKICB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB3aGl0ZUxpc3RDb250cm9sbGVyQWRkcmVzcyk7CgogICAgICBib251c0FkZHJlc3Nlc1tfYWRkcmVzc10gPSBfYm9udXNQZXJjZW50OwogICAgICBtYXhBbW91bnRBZGRyZXNzZXNbX2FkZHJlc3NdID0gX21heEFtb3VudDsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZVNwZWNpYWxCb251c0NvbmRpdGlvbnMoYWRkcmVzcyBfYWRkcmVzcykgCiAgewogICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gd2hpdGVMaXN0Q29udHJvbGxlckFkZHJlc3MpOwoKICAgICAgZGVsZXRlIGJvbnVzQWRkcmVzc2VzW19hZGRyZXNzXTsKICAgICAgZGVsZXRlIG1heEFtb3VudEFkZHJlc3Nlc1tfYWRkcmVzc107CiAgfQoKICBmdW5jdGlvbiBhZGRXaGl0ZWxpc3RBZGRyZXNBcnJheShhZGRyZXNzW10gX2FkZHJlc3Nlc1RvQWRkKQogIHsKICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHdoaXRlTGlzdENvbnRyb2xsZXJBZGRyZXNzKTsKCiAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IF9hZGRyZXNzZXNUb0FkZC5sZW5ndGg7aSsrKSAKICAgICAgewogICAgICAgIHdoaXRlTGlzdEFkZHJlc3Nlc1tfYWRkcmVzc2VzVG9BZGRbaV1dID0gdHJ1ZTsKICAgICAgfQogICAgICAKICB9CgogIGZ1bmN0aW9uIHJlbW92ZVdoaXRlbGlzdEFkZHJlc3MoYWRkcmVzcyBfYWRkcmVzc1RvQWRkKQogIHsKICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHdoaXRlTGlzdENvbnRyb2xsZXJBZGRyZXNzKTsKCiAgICAgIGRlbGV0ZSB3aGl0ZUxpc3RBZGRyZXNzZXNbX2FkZHJlc3NUb0FkZF07CiAgfQoKCiAgICBmdW5jdGlvbiBnZXRUb2tlbkFtb3VudCh1aW50MjU2IHdlaUFtb3VudCkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB0b2tlbnMpewogICAgICAgIC8vYWRkIGJvbnVzCiAgICAgICAgdWludDI1NiBib251c1JhdGUgPSBnZXRCb251cygpOwoKICAgICAgICAvL2NoZWNrIGZvciBzcGVjaWFsIGJvbnVzIGFuZCBvdmVycmlkZSByYXRlIGlmIGV4aXN0cwogICAgICAgIGlmKGJvbnVzQWRkcmVzc2VzW21zZy5zZW5kZXJdICE9IDApCiAgICAgICAgewogICAgICAgICAgICB1aW50IGJvbnVzID0gYm9udXNBZGRyZXNzZXNbbXNnLnNlbmRlcl07CiAgICAgICAgICAgIC8vVE9ETzogQ0FMVUMgU0hDSEVDSwogICAgICAgICAgICBib251c1JhdGUgPSByYXRlLmFkZCgocmF0ZS5tdWwoYm9udXMpKS5kaXYoMTAwKSk7CiAgICAgICAgfSAKCiAgICAgICAgLy8gY2FsY3VsYXRlIHRva2VuIGFtb3VudCB0byBiZSBjcmVhdGVkCiAgICAgICAgdWludDI1NiB3ZWlUb2tlbkFtb3VudCA9IHdlaUFtb3VudC5tdWwoYm9udXNSYXRlKTsKICAgICAgICByZXR1cm4gd2VpVG9rZW5BbW91bnQ7CiAgICB9CgoKICAgIC8vV2hlbiBhIHVzZXIgYnV5cyBvdXIgdG9rZW4gdGhleSB3aWxsIHJlY2lldmUgYSBib251cyBkZXBlZG5pbmcgb24gdGltZTosCiAgICBmdW5jdGlvbiBnZXRCb251cygpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW1vdW50KXsKICAgICAgICB1aW50IGRpZmZJblNlY29uZHMgPSBub3cgLSBzdGFydERhdGU7CiAgICAgICAgdWludCBkaWZmSW5Ib3VycyA9IChkaWZmSW5TZWNvbmRzLzYwKS82MDsKICAgICAgICAKICAgICAgICAvLyAxMC8yOS8yMDE3IC0gMTEvMS8yMDE3CiAgICAgICAgaWYoZGlmZkluSG91cnMgPCA3Mil7CiAgICAgICAgICAgIHJldHVybiBib251czFSYXRlOwogICAgICAgIH0KCiAgICAgICAgLy8gMTEvMS8yMDE3IC0gMTEvNC8yMDE3CiAgICAgICAgaWYoZGlmZkluSG91cnMgPj0gNzIgJiYgZGlmZkluSG91cnMgPCAxNDQpewogICAgICAgICAgICByZXR1cm4gYm9udXMyUmF0ZTsKICAgICAgICB9CgogICAgICAgIC8vIDExLzQvMjAxNyAtIDExLzcvMjAxNwogICAgICAgIGlmKGRpZmZJbkhvdXJzID49IDE0NCAmJiBkaWZmSW5Ib3VycyA8IDIxNil7CiAgICAgICAgICAgIHJldHVybiBib251czNSYXRlOwogICAgICAgIH0KCiAgICAgICAgLy8gMTEvNy8yMDE3IC0gMTEvMTAvMjAxNwogICAgICAgIGlmKGRpZmZJbkhvdXJzID49IDIxNiAmJiBkaWZmSW5Ib3VycyA8IDI4OCl7CiAgICAgICAgICAgIHJldHVybiBib251czRSYXRlOwogICAgICAgIH0KCiAgICAgICAgIC8vIDExLzEwLzIwMTcgLSAxMS8xMy8yMDE3CiAgICAgICAgaWYoZGlmZkluSG91cnMgPj0gMjg4ICYmIGRpZmZJbkhvdXJzIDwgMzYwKXsKICAgICAgICAgICAgcmV0dXJuIGJvbnVzNVJhdGU7CiAgICAgICAgfQoKICAgICAgICAgLy8gMTEvMTMvMjAxNyAtIDExLzE2LzIwMTcKICAgICAgICBpZihkaWZmSW5Ib3VycyA+PSAzNjAgJiYgZGlmZkluSG91cnMgPCA0MzIpewogICAgICAgICAgICByZXR1cm4gYm9udXM2UmF0ZTsKICAgICAgICB9CgogICAgICAgICAvLyAxMS8xNi8yMDE3IC0gMTEvMTkvMjAxNwogICAgICAgIGlmKGRpZmZJbkhvdXJzID49IDQzMiAmJiBkaWZmSW5Ib3VycyA8IDUwNCl7CiAgICAgICAgICAgIHJldHVybiBib251czdSYXRlOwogICAgICAgIH0KCiAgICAgICAgIC8vIDExLzE5LzIwMTcgLSAxMS8yMi8yMDE3CiAgICAgICAgaWYoZGlmZkluSG91cnMgPj0gNTA0ICYmIGRpZmZJbkhvdXJzIDwgNTc2KXsKICAgICAgICAgICAgcmV0dXJuIGJvbnVzOFJhdGU7CiAgICAgICAgfQoKICAgICAgICAgIC8vIDExLzIyLzIwMTcgLSAxMS8yNS8yMDE3CiAgICAgICAgaWYoZGlmZkluSG91cnMgPj0gNTc2ICYmIGRpZmZJbkhvdXJzIDwgNjQ4KXsKICAgICAgICAgICAgcmV0dXJuIGJvbnVzOVJhdGU7CiAgICAgICAgfQoKICAgICAgICAgIC8vIDExLzI1LzIwMTcgLSAxMS8yOC8yMDE3CiAgICAgICAgaWYoZGlmZkluSG91cnMgPj0gNjQ4ICYmIGRpZmZJbkhvdXJzIDwgNzIwKXsKICAgICAgICAgICAgcmV0dXJuIGJvbnVzMTBSYXRlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJhdGU7IAogICAgfQoKICAvLyBAcmV0dXJuIHRydWUgaWYgdGhlIHRyYW5zYWN0aW9uIGNhbiBidXkgdG9rZW5zCiAgLy8gY2hlY2sgZm9yIHZhbGlkIHRpbWUgcGVyaW9kLCBtaW4gYW1vdW50IGFuZCB3aXRoaW4gY2FwCiAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHVpbnQyNTYgdG9rZW5BbW91bnQgPSBnZXRUb2tlbkFtb3VudChtc2cudmFsdWUpOwogICAgYm9vbCB3aXRoaW5QZXJpb2QgPSBzdGFydERhdGUgPD0gbm93ICYmIGVuZERhdGUgPj0gbm93OwogICAgYm9vbCBub25aZXJvUHVyY2hhc2UgPSBtc2cudmFsdWUgIT0gMDsKICAgIGJvb2wgbWluQW1vdW50ID0gbXNnLnZhbHVlID49IG1pbmltdW1QYXJ0aWNpcGF0aW9uQW1vdW50OwogICAgYm9vbCBtYXhBbW91bnQgPSBtc2cudmFsdWUgPD0gbWF4aW1hbFBhcnRpY2lwYXRpb25BbW91bnQ7CiAgICBib29sIHdpdGhUb2tlbnNTdXBwbHkgPSB0b2tlbnNJbldlaVNvbGQuYWRkKHRva2VuQW1vdW50KSA8PSB0b3RhbFRva2VuU3VwcGx5OwogICAgLy9ib29sIHdpdGhpbkNhcCA9IHdlaVJhaXNlZC5hZGQobXNnLnZhbHVlKSA8PSBjYXA7CiAgICBib29sIHdpdGhNYXhBbW91bnRGb3JBZGRyZXNzID0gbWF4QW1vdW50QWRkcmVzc2VzW21zZy5zZW5kZXJdID09IDAgfHwgYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKHRva2VuQW1vdW50KSA8PSBtYXhBbW91bnRBZGRyZXNzZXNbbXNnLnNlbmRlcl07CgogICAgaWYobWF4QW1vdW50QWRkcmVzc2VzW21zZy5zZW5kZXJdICE9IDApCiAgICB7CiAgICAgIG1heEFtb3VudCA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZCh0b2tlbkFtb3VudCkgPD0gbWF4QW1vdW50QWRkcmVzc2VzW21zZy5zZW5kZXJdOwogICAgfQoKICAgIHJldHVybiB3aXRoaW5QZXJpb2QgJiYgbm9uWmVyb1B1cmNoYXNlICYmIG1pbkFtb3VudCAmJiAhaXNGaW5hbGl6ZWQgJiYgd2l0aFRva2Vuc1N1cHBseSAmJiB3aXRoTWF4QW1vdW50Rm9yQWRkcmVzcyAmJiBtYXhBbW91bnQ7CiAgfQoKICAgIC8vIEByZXR1cm4gdHJ1ZSBpZiB0aGUgZ29hbCBpcyByZWFjaGVkCiAgZnVuY3Rpb24gY2FwUmVhY2hlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gdG9rZW5zSW5XZWlTb2xkID49IHRvdGFsVG9rZW5TdXBwbHk7CiAgfQoKICAvLyBAcmV0dXJuIHRydWUgaWYgY3Jvd2RzYWxlIGV2ZW50IGhhcyBlbmRlZAogIGZ1bmN0aW9uIGhhc0VuZGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBpc0ZpbmFsaXplZDsKICB9Cgp9'.
	

]
