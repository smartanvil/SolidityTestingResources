Class {
	#name : #SRT3f44b083973d5cDdAE571d61921d8e8f0248df43,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3f44b083973d5cDdAE571d61921d8e8f0248df43 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8vL2FkZHJlc3MgLT4gdWludDI1NiBtYXBwaW5nLgpsaWJyYXJ5IEl0ZXJhYmxlTWFwcGluZwp7CiAgICBzdHJ1Y3QgSW5kZXhWYWx1ZSB7IHVpbnQga2V5SW5kZXg7IHVpbnQgdmFsdWU7IH0KICAgIHN0cnVjdCBLZXlGbGFnIHsgYWRkcmVzcyBrZXk7IGJvb2wgZGVsZXRlZDsgfQogICAgc3RydWN0IGl0bWFwCiAgICB7CiAgICAgICAgbWFwcGluZyhhZGRyZXNzID0+IEluZGV4VmFsdWUpIGRhdGE7CiAgICAgICAgS2V5RmxhZ1tdIGtleXM7CiAgICAgICAgdWludCBzaXplOwogICAgfQoKICAgIGZ1bmN0aW9uIGluc2VydChpdG1hcCBzdG9yYWdlIHNlbGYsIGFkZHJlc3Mga2V5LCB1aW50IHZhbHVlKSBpbnRlcm5hbCByZXR1cm5zIChib29sIHJlcGxhY2VkKQogICAgewogICAgICAgIHVpbnQga2V5SW5kZXggPSBzZWxmLmRhdGFba2V5XS5rZXlJbmRleDsKICAgICAgICBzZWxmLmRhdGFba2V5XS52YWx1ZSA9IHZhbHVlOwogICAgICAgIGlmIChrZXlJbmRleCA+IDApCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIGtleUluZGV4ID0gc2VsZi5rZXlzLmxlbmd0aCsrOwogICAgICAgICAgICBzZWxmLmRhdGFba2V5XS5rZXlJbmRleCA9IGtleUluZGV4ICsgMTsKICAgICAgICAgICAgc2VsZi5rZXlzW2tleUluZGV4XS5rZXkgPSBrZXk7CiAgICAgICAgICAgIHNlbGYuc2l6ZSsrOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gcmVtb3ZlKGl0bWFwIHN0b3JhZ2Ugc2VsZiwgYWRkcmVzcyBrZXkpIGludGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICB1aW50IGtleUluZGV4ID0gc2VsZi5kYXRhW2tleV0ua2V5SW5kZXg7CiAgICAgICAgaWYgKGtleUluZGV4ID09IDApCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBkZWxldGUgc2VsZi5kYXRhW2tleV07CiAgICAgICAgc2VsZi5rZXlzW2tleUluZGV4IC0gMV0uZGVsZXRlZCA9IHRydWU7CiAgICAgICAgc2VsZi5zaXplIC0tOwogICAgfQogICAgZnVuY3Rpb24gY29udGFpbnMoaXRtYXAgc3RvcmFnZSBzZWxmLCBhZGRyZXNzIGtleSkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gc2VsZi5kYXRhW2tleV0ua2V5SW5kZXggPiAwOwogICAgfQogICAgZnVuY3Rpb24gaXRlcmF0ZV9zdGFydChpdG1hcCBzdG9yYWdlIHNlbGYpIGludGVybmFsIHJldHVybnMgKHVpbnQga2V5SW5kZXgpCiAgICB7CiAgICAgICAgcmV0dXJuIGl0ZXJhdGVfbmV4dChzZWxmLCB1aW50KC0xKSk7CiAgICB9CiAgICBmdW5jdGlvbiBpdGVyYXRlX3ZhbGlkKGl0bWFwIHN0b3JhZ2Ugc2VsZiwgdWludCBrZXlJbmRleCkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4ga2V5SW5kZXggPCBzZWxmLmtleXMubGVuZ3RoOwogICAgfQogICAgZnVuY3Rpb24gaXRlcmF0ZV9uZXh0KGl0bWFwIHN0b3JhZ2Ugc2VsZiwgdWludCBrZXlJbmRleCkgaW50ZXJuYWwgcmV0dXJucyAodWludCByX2tleUluZGV4KQogICAgewogICAgICAgIGtleUluZGV4Kys7CiAgICAgICAgd2hpbGUgKGtleUluZGV4IDwgc2VsZi5rZXlzLmxlbmd0aCAmJiBzZWxmLmtleXNba2V5SW5kZXhdLmRlbGV0ZWQpCiAgICAgICAgICAgIGtleUluZGV4Kys7CiAgICAgICAgcmV0dXJuIGtleUluZGV4OwogICAgfQogICAgZnVuY3Rpb24gaXRlcmF0ZV9nZXQoaXRtYXAgc3RvcmFnZSBzZWxmLCB1aW50IGtleUluZGV4KSBpbnRlcm5hbCByZXR1cm5zIChhZGRyZXNzIGtleSwgdWludCB2YWx1ZSkKICAgIHsKICAgICAgICBrZXkgPSBzZWxmLmtleXNba2V5SW5kZXhdLmtleTsKICAgICAgICB2YWx1ZSA9IHNlbGYuZGF0YVtrZXldLnZhbHVlOwogICAgfQp9CgovKioKICpNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCl7CiAgICAgICAgdWludCBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PWIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIC8vYXNzZXJ0KGIgPiAwKTsgLy9Tb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50IGMgPSBhL2I7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhJSBiKTsgLy9UaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgYXNzZXJ0KGI8PWEpOwogICAgICAgIHJldHVybiBhLWI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50NjQpIHsKICAgICAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgICB9CgogICAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgICAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICAgIH0KCiAgICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgICB9CgogICAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgICB9CgogICAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7CiAgICAgICAgaWYoIWFzc2VydGlvbil7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgIH0KfQoKCi8qKgogKiB0aXRsZSBFUkMyMCBCYXNpYwogKiBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKgogKi8KY29udHJhY3QgRVJDMjBCYXNpY3sKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwp9CgoKLyoqCiAqIHRpdGxlIEJhc2ljIHRva2VuCiAqIGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIGVpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKICAgIC8qKgogICAgKiBkZXYgRml4IGZvciBlaHQgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suCiAgICAqLwogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KXsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9Cn0KCgovKioKKiB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKKiBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAoqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsKfQoKCi8qKgoqIHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCioKKiBkZXYgSW1wbGVtYW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJ0IHRva2VuLgoqIGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKKiBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOmh0dHA6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCioqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEJhc2ljVG9rZW4sIEVSQzIwewogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwogICAgZXZlbnQgVHJhbnNTaGFyZShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgVHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgdWludCB2YWx1ZSk7CiAgICBldmVudCBEaXZpZGVuZHMoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKCiAgICAvKioKICAgICogZGV2IEFwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlYWhsZiBvZiBtc2cuc2VuZGVyLgogICAgKiBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICogcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsKICAgICAgICAvL1RvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXMKICAgICAgICAvLyBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGFwcHJvdmUoX3NwZW5kZXIsIDApIGlmIGlmIGl0IG5vdAogICAgICAgIC8vIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VzY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93OwoKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICogZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW4gcmhhbiBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgICogcGFyYW0gX293bmVyIGFkZHJlc3MgVGhyIGFkZHJlc3Mgd2hpdmggb3ducyB0aGUgZnVuZHMuCiAgICAqIHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAqIHJldHVybiBBIHVpbnQgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rcm5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAgKiovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cn0KCmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgZnVuY3Rpb24gT3duYWJsZSgpewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIoKXsKICAgICAgICBpZihtc2cuc2VuZGVyICE9IG93bmVyKXsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9Ci8vICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lcnsKLy8gICAgICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKXsKLy8gICAgICAgICAgICBvd25lciA9IG5ld093bmVyOwovLyAgICAgICAgfQovLyAgICB9Cn0KCmNvbnRyYWN0IEdsb2JhbENvaW4gaXMgT3duYWJsZSwgU3RhbmRhcmRUb2tlbnsKICAgIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzID0gODsKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJHbG9iYWxDb2luIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkdCQyI7CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseSA9IDEwMDAwMDAwMDAwMDAwMDA7Ly9kZWNpbWFscyBpcyA4LCBzbyB0b3RhbCAxMDAwLDAwMDAgZTgKICAgIGFkZHJlc3MgcHVibGljIGRpdmlkZW5kQWRkcmVzcyA9IDB4NWYyMWE3MTBiNzlmOWRjNDE2NDJlNjgwOTJkNDg3MzA3YjM0ZThhYjsvL2RpdmlkZW5kIGFkZHJlc3MKICAgIGFkZHJlc3MgcHVibGljIGJ1cm5BZGRyZXNzID0gMHg1OGFmNDRhZWRkZjIxMDBhOWQwMjU3Y2JhYTY3MGNkM2IzMmI3YjNlOyAvL2Rlc3RvcnkgYWRkcmVzcwogICAgdWludDI1NiBwcml2YXRlIGdsb2JhbFNoYXJlcyA9IDA7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgdmlwczsKICAgIHVzaW5nIEl0ZXJhYmxlTWFwcGluZyBmb3IgSXRlcmFibGVNYXBwaW5nLml0bWFwOwogICAgSXRlcmFibGVNYXBwaW5nLml0bWFwIHB1YmxpYyBkYXRhOwogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgbW9kaWZpZXIgbm9FdGgoKSB7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA8IDApIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbigpIHsKICAgICAgICBpZiAobXNnLnZhbHVlID4gMCkKICAgICAgICAgICAgVHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gaW5zZXJ0KGFkZHJlc3MgaywgdWludCB2KSBpbnRlcm5hbCByZXR1cm5zICh1aW50IHNpemUpCiAgICB7CiAgICAgICAgSXRlcmFibGVNYXBwaW5nLmluc2VydChkYXRhLCBrLCB2KTsKICAgICAgICByZXR1cm4gZGF0YS5zaXplOwogICAgfQogICAgZnVuY3Rpb24gcmVtb3ZlKGFkZHJlc3MgaylpbnRlcm5hbCByZXR1cm5zICh1aW50IHNpemUpCiAgICB7CiAgICAgICAgSXRlcmFibGVNYXBwaW5nLnJlbW92ZShkYXRhLCBrKTsKICAgICAgICByZXR1cm4gZGF0YS5zaXplOwogICAgfQogICAgLy9leGNlcHRlZAogICAgZnVuY3Rpb24gZXhwZWN0ZWREaXZpZGVuZHMoYWRkcmVzcyB1c2VyKSBjb25zdGFudCByZXR1cm5zICh1aW50IERpdmlkZW5kcyl7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW2RpdmlkZW5kQWRkcmVzc10gLyBnbG9iYWxTaGFyZXMgKiB2aXBzW3VzZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIGFkZHIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1thZGRyXTsKICAgIH0KICAgIC8vc2hvdyBhZGRyZXNzIHNoYXJlcwogICAgZnVuY3Rpb24geW91clNoYXJlcyhhZGRyZXNzIGFkZHIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgc2hhcmVzKSB7CiAgICAgICAgcmV0dXJuIHZpcHNbYWRkcl07CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiBhbW91bnQpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpCiAgICB7CiAgICAgICAgU2FmZU1hdGguYXNzZXJ0KG1zZy5zZW5kZXIgIT0gYnVybkFkZHJlc3MpOwogICAgICAgIGlmICh0byA9PSBidXJuQWRkcmVzcykgewogICAgICAgICAgICByZXR1cm4gYnVybihhbW91bnQpOwogICAgICAgIH0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihhbW91bnQpOwogICAgICAgIGJhbGFuY2VzW3RvXSA9IGJhbGFuY2VzW3RvXS5hZGQoYW1vdW50KTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCB0bywgYW1vdW50KTsKICAgIH0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsKICAgICAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KICAgIC8vaW50ZXJuYWwgZnVuYwogICAgZnVuY3Rpb24gYnVybiAodWludDI1NiBhbW91bnQpIGludGVybmFsCiAgICB7CiAgICAgICAgU2FmZU1hdGguYXNzZXJ0KGFtb3VudCA+PSAxMDAwMDAwMDAwMDApOwogICAgICAgIGlmIChhbW91bnQgPj0gMTAwMDAwMDAwMDAwKSB7CiAgICAgICAgICAgIHVpbnQyNTYgX3ZhbHVlID0gYW1vdW50IC8gMTAwMDAwMDAwMDAwOwogICAgICAgICAgICB1aW50MjU2IF90bXAgPSBfdmFsdWUgKiAxMDAwMDAwMDAwMDA7CiAgICAgICAgICAgIFNhZmVNYXRoLmFzc2VydChfdG1wID09IGFtb3VudCk7CiAgICAgICAgICAgIHZpcHNbbXNnLnNlbmRlcl0gKz0gYW1vdW50IC8gMTAwMDAwMDAwMDAwOwogICAgICAgICAgICBnbG9iYWxTaGFyZXMgKz0gYW1vdW50IC8gMTAwMDAwMDAwMDAwOwogICAgICAgICAgICBpbnNlcnQobXNnLnNlbmRlciwgdmlwc1ttc2cuc2VuZGVyXSk7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKGFtb3VudCk7CiAgICAgICAgICAgIGJhbGFuY2VzW2J1cm5BZGRyZXNzXSA9IGJhbGFuY2VzW2J1cm5BZGRyZXNzXS5hZGQoYW1vdW50KTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgYnVybkFkZHJlc3MsIGFtb3VudCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vZ2xvYmFsIHRvdGFsIHNoYXJlcwogICAgZnVuY3Rpb24gdG90YWxTaGFyZXMoKSBjb25zdGFudCByZXR1cm5zICh1aW50IHNoYXJlcyl7CiAgICAgICAgcmV0dXJuIGdsb2JhbFNoYXJlczsKICAgIH0KICAgIC8vdHJhbnNmZXIgc2hhcmVzCiAgICBmdW5jdGlvbiB0cmFuc2ZlclNoYXJlcyhhZGRyZXNzIF90bywgdWludCBfdmFsdWUpewogICAgICAgIFNhZmVNYXRoLmFzc2VydCh2aXBzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKTsKICAgICAgICB2YXIgX3NrZXkgPSBtc2cuc2VuZGVyOwogICAgICAgIHVpbnQgX3N2YWx1ZSA9IDA7CiAgICAgICAgdmFyIF90a2V5ID0gX3RvOwogICAgICAgIHVpbnQgX3R2YWx1ZSA9IDA7CiAgICAgICAgZm9yICh2YXIgaSA9IEl0ZXJhYmxlTWFwcGluZy5pdGVyYXRlX3N0YXJ0KGRhdGEpOyBJdGVyYWJsZU1hcHBpbmcuaXRlcmF0ZV92YWxpZChkYXRhLCBpKTsgaSA9IEl0ZXJhYmxlTWFwcGluZy5pdGVyYXRlX25leHQoZGF0YSwgaSkpCiAgICAgICAgewogICAgICAgICAgICB2YXIgKGtleSwgdmFsdWUpID0gSXRlcmFibGVNYXBwaW5nLml0ZXJhdGVfZ2V0KGRhdGEsIGkpOwogICAgICAgICAgICBpZihrZXkgPT0gbXNnLnNlbmRlcil7CiAgICAgICAgICAgICAgICBfc3ZhbHVlID0gdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoa2V5ID09IF90byl7CiAgICAgICAgICAgICAgICBfdHZhbHVlID0gdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgX3N2YWx1ZSA9IF9zdmFsdWUuc3ViKF92YWx1ZSk7CiAgICAgICAgaW5zZXJ0KG1zZy5zZW5kZXIsIF9zdmFsdWUpOwogICAgICAgIHZpcHNbbXNnLnNlbmRlcl0gPSBfc3ZhbHVlOwogICAgICAgIGlmIChfc3ZhbHVlID09IDApewogICAgICAgICAgICByZW1vdmUobXNnLnNlbmRlcik7CiAgICAgICAgfQogICAgICAgIHZpcHNbX3RvXSA9IF90dmFsdWUgKyBfdmFsdWU7CiAgICAgICAgaW5zZXJ0KF90bywgX3R2YWx1ZSArIF92YWx1ZSk7CiAgICAgICAgVHJhbnNTaGFyZShtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgLy9vbmx5IG93ZXIgZXhlYyxkaXN0cmlidXRlIGRpdmlkZW5kcwogICAgZnVuY3Rpb24gZGlzdHJpYnV0ZURpdmlkZW5kcygpIG9ubHlPd25lciBwdWJsaWMgbm9FdGgoKXsKICAgICAgICBmb3IgKHZhciBpID0gSXRlcmFibGVNYXBwaW5nLml0ZXJhdGVfc3RhcnQoZGF0YSk7IEl0ZXJhYmxlTWFwcGluZy5pdGVyYXRlX3ZhbGlkKGRhdGEsIGkpOyBpID0gSXRlcmFibGVNYXBwaW5nLml0ZXJhdGVfbmV4dChkYXRhLCBpKSkKICAgICAgICB7CiAgICAgICAgICAgIHZhciAoa2V5LCB2YWx1ZSkgPSBJdGVyYWJsZU1hcHBpbmcuaXRlcmF0ZV9nZXQoZGF0YSwgaSk7CiAgICAgICAgICAgIHVpbnQgdG1wID0gYmFsYW5jZXNbZGl2aWRlbmRBZGRyZXNzXSAvIGdsb2JhbFNoYXJlcyAqIHZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1trZXldID0gYmFsYW5jZXNba2V5XS5hZGQodG1wKTsKICAgICAgICAgICAgRGl2aWRlbmRzKGRpdmlkZW5kQWRkcmVzcywga2V5LCB0bXApOwogICAgICAgIH0KICAgICAgICBiYWxhbmNlc1tkaXZpZGVuZEFkZHJlc3NdID0gYmFsYW5jZXNbZGl2aWRlbmRBZGRyZXNzXS5zdWIoYmFsYW5jZXNbZGl2aWRlbmRBZGRyZXNzXSAvIGdsb2JhbFNoYXJlcyAqIGdsb2JhbFNoYXJlcyk7CiAgICB9CgogICAgZnVuY3Rpb24gR2xvYmFsQ29pbigpIG9ubHlPd25lciB7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gdG90YWxTdXBwbHk7CiAgICB9Cn0='.
	

]
