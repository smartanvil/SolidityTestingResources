Class {
	#name : #SRT42fa46fb906e57d95644f0e77596e53c6792b0bc,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT42fa46fb906e57d95644f0e77596e53c6792b0bc >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Ci8vIEdyb3ZlIHYwLjMKCgovLy8gQHRpdGxlIEdyb3ZlTGliIC0gTGlicmFyeSBmb3IgcXVlcmlhYmxlIGluZGV4ZWQgb3JkZXJlZCBkYXRhLgovLy8gQGF1dGhvciBQaXBlck1lcnJpYW0gLSA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9ImQzYTNiYWEzYjZhMWJlYjZhMWExYmFiMmJlOTNiNGJlYjJiYWJmZmRiMGJjYmUiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgpsaWJyYXJ5IEdyb3ZlTGliIHsKICAgICAgICAvKgogICAgICAgICAqICBJbmRleGVzIGZvciBvcmRlcmVkIGRhdGEKICAgICAgICAgKgogICAgICAgICAqICBBZGRyZXNzOiAweDdjMWViMjA3YzA3ZTdhYjEzY2YyNDU1ODViZDAzZDBmYTQ3OGQwMzQKICAgICAgICAgKi8KICAgICAgICBzdHJ1Y3QgSW5kZXggewogICAgICAgICAgICAgICAgYnl0ZXMzMiByb290OwogICAgICAgICAgICAgICAgbWFwcGluZyAoYnl0ZXMzMiA9PiBOb2RlKSBub2RlczsKICAgICAgICB9CgogICAgICAgIHN0cnVjdCBOb2RlIHsKICAgICAgICAgICAgICAgIGJ5dGVzMzIgaWQ7CiAgICAgICAgICAgICAgICBpbnQgdmFsdWU7CiAgICAgICAgICAgICAgICBieXRlczMyIHBhcmVudDsKICAgICAgICAgICAgICAgIGJ5dGVzMzIgbGVmdDsKICAgICAgICAgICAgICAgIGJ5dGVzMzIgcmlnaHQ7CiAgICAgICAgICAgICAgICB1aW50IGhlaWdodDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG1heCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgICAgICBpZiAoYSA+PSBiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYjsKICAgICAgICB9CgogICAgICAgIC8qCiAgICAgICAgICogIE5vZGUgZ2V0dGVycwogICAgICAgICAqLwogICAgICAgIC8vLyBAZGV2IFJldHJpZXZlIHRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIG5vZGUuCiAgICAgICAgLy8vIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggdGhhdCB0aGUgbm9kZSBpcyBwYXJ0IG9mLgogICAgICAgIC8vLyBAcGFyYW0gaWQgVGhlIGlkIGZvciB0aGUgbm9kZSB0byBiZSBsb29rZWQgdXAuCiAgICAgICAgZnVuY3Rpb24gZ2V0Tm9kZUlkKEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMzIgaWQpIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzMzIpIHsKICAgICAgICAgICAgcmV0dXJuIGluZGV4Lm5vZGVzW2lkXS5pZDsKICAgICAgICB9CgogICAgICAgIC8vLyBAZGV2IFJldHJpZXZlIHRoZSB2YWx1ZSBmb3IgdGhlIG5vZGUuCiAgICAgICAgLy8vIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggdGhhdCB0aGUgbm9kZSBpcyBwYXJ0IG9mLgogICAgICAgIC8vLyBAcGFyYW0gaWQgVGhlIGlkIGZvciB0aGUgbm9kZSB0byBiZSBsb29rZWQgdXAuCiAgICAgICAgZnVuY3Rpb24gZ2V0Tm9kZVZhbHVlKEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMzIgaWQpIGNvbnN0YW50IHJldHVybnMgKGludCkgewogICAgICAgICAgICByZXR1cm4gaW5kZXgubm9kZXNbaWRdLnZhbHVlOwogICAgICAgIH0KCiAgICAgICAgLy8vIEBkZXYgUmV0cmlldmUgdGhlIGhlaWdodCBvZiB0aGUgbm9kZS4KICAgICAgICAvLy8gQHBhcmFtIGluZGV4IFRoZSBpbmRleCB0aGF0IHRoZSBub2RlIGlzIHBhcnQgb2YuCiAgICAgICAgLy8vIEBwYXJhbSBpZCBUaGUgaWQgZm9yIHRoZSBub2RlIHRvIGJlIGxvb2tlZCB1cC4KICAgICAgICBmdW5jdGlvbiBnZXROb2RlSGVpZ2h0KEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMzIgaWQpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGluZGV4Lm5vZGVzW2lkXS5oZWlnaHQ7CiAgICAgICAgfQoKICAgICAgICAvLy8gQGRldiBSZXRyaWV2ZSB0aGUgcGFyZW50IGlkIG9mIHRoZSBub2RlLgogICAgICAgIC8vLyBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHRoYXQgdGhlIG5vZGUgaXMgcGFydCBvZi4KICAgICAgICAvLy8gQHBhcmFtIGlkIFRoZSBpZCBmb3IgdGhlIG5vZGUgdG8gYmUgbG9va2VkIHVwLgogICAgICAgIGZ1bmN0aW9uIGdldE5vZGVQYXJlbnQoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgICAgICByZXR1cm4gaW5kZXgubm9kZXNbaWRdLnBhcmVudDsKICAgICAgICB9CgogICAgICAgIC8vLyBAZGV2IFJldHJpZXZlIHRoZSBsZWZ0IGNoaWxkIGlkIG9mIHRoZSBub2RlLgogICAgICAgIC8vLyBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHRoYXQgdGhlIG5vZGUgaXMgcGFydCBvZi4KICAgICAgICAvLy8gQHBhcmFtIGlkIFRoZSBpZCBmb3IgdGhlIG5vZGUgdG8gYmUgbG9va2VkIHVwLgogICAgICAgIGZ1bmN0aW9uIGdldE5vZGVMZWZ0Q2hpbGQoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgICAgICByZXR1cm4gaW5kZXgubm9kZXNbaWRdLmxlZnQ7CiAgICAgICAgfQoKICAgICAgICAvLy8gQGRldiBSZXRyaWV2ZSB0aGUgcmlnaHQgY2hpbGQgaWQgb2YgdGhlIG5vZGUuCiAgICAgICAgLy8vIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggdGhhdCB0aGUgbm9kZSBpcyBwYXJ0IG9mLgogICAgICAgIC8vLyBAcGFyYW0gaWQgVGhlIGlkIGZvciB0aGUgbm9kZSB0byBiZSBsb29rZWQgdXAuCiAgICAgICAgZnVuY3Rpb24gZ2V0Tm9kZVJpZ2h0Q2hpbGQoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgICAgICByZXR1cm4gaW5kZXgubm9kZXNbaWRdLnJpZ2h0OwogICAgICAgIH0KCiAgICAgICAgLy8vIEBkZXYgUmV0cmlldmUgdGhlIG5vZGUgaWQgb2YgdGhlIG5leHQgbm9kZSBpbiB0aGUgdHJlZS4KICAgICAgICAvLy8gQHBhcmFtIGluZGV4IFRoZSBpbmRleCB0aGF0IHRoZSBub2RlIGlzIHBhcnQgb2YuCiAgICAgICAgLy8vIEBwYXJhbSBpZCBUaGUgaWQgZm9yIHRoZSBub2RlIHRvIGJlIGxvb2tlZCB1cC4KICAgICAgICBmdW5jdGlvbiBnZXRQcmV2aW91c05vZGUoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgICAgICBOb2RlIHN0b3JhZ2UgY3VycmVudE5vZGUgPSBpbmRleC5ub2Rlc1tpZF07CgogICAgICAgICAgICBpZiAoY3VycmVudE5vZGUuaWQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAvLyBVbmtub3duIG5vZGUsIGp1c3QgcmV0dXJuIDB4MDsKICAgICAgICAgICAgICAgIHJldHVybiAweDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIE5vZGUgbWVtb3J5IGNoaWxkOwoKICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlLmxlZnQgIT0gMHgwKSB7CiAgICAgICAgICAgICAgICAvLyBUcmFjZSBsZWZ0IHRvIGxhdGVzdCBjaGlsZCBpbiBsZWZ0IHRyZWUuCiAgICAgICAgICAgICAgICBjaGlsZCA9IGluZGV4Lm5vZGVzW2N1cnJlbnROb2RlLmxlZnRdOwoKICAgICAgICAgICAgICAgIHdoaWxlIChjaGlsZC5yaWdodCAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBpbmRleC5ub2Rlc1tjaGlsZC5yaWdodF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQuaWQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5wYXJlbnQgIT0gMHgwKSB7CiAgICAgICAgICAgICAgICAvLyBOb3cgd2UgdHJhY2UgYmFjayB1cCB0aHJvdWdoIHBhcmVudCByZWxhdGlvbnNoaXBzLCBsb29raW5nCiAgICAgICAgICAgICAgICAvLyBmb3IgYSBsaW5rIHdoZXJlIHRoZSBjaGlsZCBpcyB0aGUgcmlnaHQgY2hpbGQgb2YgaXQncwogICAgICAgICAgICAgICAgLy8gcGFyZW50LgogICAgICAgICAgICAgICAgTm9kZSBzdG9yYWdlIHBhcmVudCA9IGluZGV4Lm5vZGVzW2N1cnJlbnROb2RlLnBhcmVudF07CiAgICAgICAgICAgICAgICBjaGlsZCA9IGN1cnJlbnROb2RlOwoKICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudC5yaWdodCA9PSBjaGlsZC5pZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50LmlkOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudC5wYXJlbnQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IHBhcmVudDsKICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBpbmRleC5ub2Rlc1twYXJlbnQucGFyZW50XTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3Qgbm9kZSwgYW5kIGhhcyBubyBwcmV2aW91cyBub2RlLgogICAgICAgICAgICByZXR1cm4gMHgwOwogICAgICAgIH0KCiAgICAgICAgLy8vIEBkZXYgUmV0cmlldmUgdGhlIG5vZGUgaWQgb2YgdGhlIHByZXZpb3VzIG5vZGUgaW4gdGhlIHRyZWUuCiAgICAgICAgLy8vIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggdGhhdCB0aGUgbm9kZSBpcyBwYXJ0IG9mLgogICAgICAgIC8vLyBAcGFyYW0gaWQgVGhlIGlkIGZvciB0aGUgbm9kZSB0byBiZSBsb29rZWQgdXAuCiAgICAgICAgZnVuY3Rpb24gZ2V0TmV4dE5vZGUoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgICAgICBOb2RlIHN0b3JhZ2UgY3VycmVudE5vZGUgPSBpbmRleC5ub2Rlc1tpZF07CgogICAgICAgICAgICBpZiAoY3VycmVudE5vZGUuaWQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAvLyBVbmtub3duIG5vZGUsIGp1c3QgcmV0dXJuIDB4MDsKICAgICAgICAgICAgICAgIHJldHVybiAweDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIE5vZGUgbWVtb3J5IGNoaWxkOwoKICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlLnJpZ2h0ICE9IDB4MCkgewogICAgICAgICAgICAgICAgLy8gVHJhY2UgcmlnaHQgdG8gZWFybGllc3QgY2hpbGQgaW4gcmlnaHQgdHJlZS4KICAgICAgICAgICAgICAgIGNoaWxkID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUucmlnaHRdOwoKICAgICAgICAgICAgICAgIHdoaWxlIChjaGlsZC5sZWZ0ICE9IDApIHsKICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGluZGV4Lm5vZGVzW2NoaWxkLmxlZnRdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkLmlkOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoY3VycmVudE5vZGUucGFyZW50ICE9IDB4MCkgewogICAgICAgICAgICAgICAgLy8gaWYgdGhlIG5vZGUgaXMgdGhlIGxlZnQgY2hpbGQgb2YgaXQncyBwYXJlbnQsIHRoZW4gdGhlCiAgICAgICAgICAgICAgICAvLyBwYXJlbnQgaXMgdGhlIG5leHQgb25lLgogICAgICAgICAgICAgICAgTm9kZSBzdG9yYWdlIHBhcmVudCA9IGluZGV4Lm5vZGVzW2N1cnJlbnROb2RlLnBhcmVudF07CiAgICAgICAgICAgICAgICBjaGlsZCA9IGN1cnJlbnROb2RlOwoKICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudC5sZWZ0ID09IGNoaWxkLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnQuaWQ7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50LnBhcmVudCA9PSAweDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNoaWxkID0gcGFyZW50OwogICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGluZGV4Lm5vZGVzW3BhcmVudC5wYXJlbnRdOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIE5vdyB3ZSBuZWVkIHRvIHRyYWNlIGFsbCB0aGUgd2F5IHVwIGNoZWNraW5nIHRvIHNlZSBpZiBhbnkgcGFyZW50IGlzIHRoZQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaW5hbCBub2RlLgogICAgICAgICAgICByZXR1cm4gMHgwOwogICAgICAgIH0KCgogICAgICAgIC8vLyBAZGV2IFVwZGF0ZXMgb3IgSW5zZXJ0cyB0aGUgaWQgaW50byB0aGUgaW5kZXggYXQgaXRzIGFwcHJvcHJpYXRlIGxvY2F0aW9uIGJhc2VkIG9uIHRoZSB2YWx1ZSBwcm92aWRlZC4KICAgICAgICAvLy8gQHBhcmFtIGluZGV4IFRoZSBpbmRleCB0aGF0IHRoZSBub2RlIGlzIHBhcnQgb2YuCiAgICAgICAgLy8vIEBwYXJhbSBpZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIGRhdGEgZWxlbWVudCB0aGUgaW5kZXggbm9kZSB3aWxsIHJlcHJlc2VudC4KICAgICAgICAvLy8gQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSBvZiB0aGUgZGF0YSBlbGVtZW50IHRoYXQgcmVwcmVzZW50cyBpdCdzIHRvdGFsIG9yZGVyaW5nIHdpdGggcmVzcGVjdCB0byBvdGhlciBlbGVtZW50ZXMuCiAgICAgICAgZnVuY3Rpb24gaW5zZXJ0KEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMzIgaWQsIGludCB2YWx1ZSkgcHVibGljIHsKICAgICAgICAgICAgICAgIGlmIChpbmRleC5ub2Rlc1tpZF0uaWQgPT0gaWQpIHsKICAgICAgICAgICAgICAgICAgICAvLyBBIG5vZGUgd2l0aCB0aGlzIGlkIGFscmVhZHkgZXhpc3RzLiAgSWYgdGhlIHZhbHVlIGlzCiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNhbWUsIHRoZW4ganVzdCByZXR1cm4gZWFybHksIG90aGVyd2lzZSwgcmVtb3ZlIGl0CiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHJlaW5zZXJ0IGl0LgogICAgICAgICAgICAgICAgICAgIGlmIChpbmRleC5ub2Rlc1tpZF0udmFsdWUgPT0gdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZW1vdmUoaW5kZXgsIGlkKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBieXRlczMyIHByZXZpb3VzTm9kZUlkID0gMHgwOwoKICAgICAgICAgICAgICAgIGlmIChpbmRleC5yb290ID09IDB4MCkgewogICAgICAgICAgICAgICAgICAgIGluZGV4LnJvb3QgPSBpZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIE5vZGUgc3RvcmFnZSBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2luZGV4LnJvb3RdOwoKICAgICAgICAgICAgICAgIC8vIERvIGluc2VydGlvbgogICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUuaWQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBuZXcgdW5wb3B1bGF0ZWQgbm9kZS4KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUuaWQgPSBpZDsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUucGFyZW50ID0gcHJldmlvdXNOb2RlSWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlLnZhbHVlID0gdmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBwcmV2aW91cyBub2RlIGlkLgogICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTm9kZUlkID0gY3VycmVudE5vZGUuaWQ7CgogICAgICAgICAgICAgICAgICAgIC8vIFRoZSBuZXcgbm9kZSBiZWxvbmdzIGluIHRoZSByaWdodCBzdWJ0cmVlCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID49IGN1cnJlbnROb2RlLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5yaWdodCA9PSAweDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlLnJpZ2h0ID0gaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUgPSBpbmRleC5ub2Rlc1tjdXJyZW50Tm9kZS5yaWdodF07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG5ldyBub2RlIGJlbG9uZ3MgaW4gdGhlIGxlZnQgc3VidHJlZS4KICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUubGVmdCA9PSAweDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUubGVmdCA9IGlkOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2N1cnJlbnROb2RlLmxlZnRdOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFJlYmFsYW5jZSB0aGUgdHJlZQogICAgICAgICAgICAgICAgX3JlYmFsYW5jZVRyZWUoaW5kZXgsIGN1cnJlbnROb2RlLmlkKTsKICAgICAgICB9CgogICAgICAgIC8vLyBAZGV2IENoZWNrcyB3aGV0aGVyIGEgbm9kZSBmb3IgdGhlIGdpdmVuIHVuaXF1ZSBpZGVudGlmaWVyIGV4aXN0cyB3aXRoaW4gdGhlIGdpdmVuIGluZGV4LgogICAgICAgIC8vLyBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHRoYXQgc2hvdWxkIGJlIHNlYXJjaGVkCiAgICAgICAgLy8vIEBwYXJhbSBpZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIGRhdGEgZWxlbWVudCB0byBjaGVjayBmb3IuCiAgICAgICAgZnVuY3Rpb24gZXhpc3RzKEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMzIgaWQpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICAgICAgcmV0dXJuIChpbmRleC5ub2Rlc1tpZF0uaGVpZ2h0ID4gMCk7CiAgICAgICAgfQoKICAgICAgICAvLy8gQGRldiBSZW1vdmUgdGhlIG5vZGUgZm9yIHRoZSBnaXZlbiB1bmlxdWUgaWRlbnRpZmllciBmcm9tIHRoZSBpbmRleC4KICAgICAgICAvLy8gQHBhcmFtIGluZGV4IFRoZSBpbmRleCB0aGF0IHNob3VsZCBiZSByZW1vdmVkCiAgICAgICAgLy8vIEBwYXJhbSBpZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIGRhdGEgZWxlbWVudCB0byByZW1vdmUuCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlKEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMzIgaWQpIHB1YmxpYyB7CiAgICAgICAgICAgIGJ5dGVzMzIgcmViYWxhbmNlT3JpZ2luOwoKICAgICAgICAgICAgTm9kZSBzdG9yYWdlIG5vZGVUb0RlbGV0ZSA9IGluZGV4Lm5vZGVzW2lkXTsKCiAgICAgICAgICAgIGlmIChub2RlVG9EZWxldGUuaWQgIT0gaWQpIHsKICAgICAgICAgICAgICAgIC8vIFRoZSBpZCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgdHJlZS4KICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG5vZGVUb0RlbGV0ZS5sZWZ0ICE9IDB4MCB8fCBub2RlVG9EZWxldGUucmlnaHQgIT0gMHgwKSB7CiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgbm90IGEgbGVhZiBub2RlIGFuZCB0aHVzIG11c3QgcmVwbGFjZSBpdHNlbGYgaW4KICAgICAgICAgICAgICAgIC8vIGl0J3MgdHJlZSBieSBlaXRoZXIgdGhlIHByZXZpb3VzIG9yIG5leHQgbm9kZS4KICAgICAgICAgICAgICAgIGlmIChub2RlVG9EZWxldGUubGVmdCAhPSAweDApIHsKICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZ3VhcmFudGVlZCB0byBub3QgaGF2ZSBhIHJpZ2h0IGNoaWxkLgogICAgICAgICAgICAgICAgICAgIE5vZGUgc3RvcmFnZSByZXBsYWNlbWVudE5vZGUgPSBpbmRleC5ub2Rlc1tnZXRQcmV2aW91c05vZGUoaW5kZXgsIG5vZGVUb0RlbGV0ZS5pZCldOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGd1YXJhbnRlZWQgdG8gbm90IGhhdmUgYSBsZWZ0IGNoaWxkLgogICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2dldE5leHROb2RlKGluZGV4LCBub2RlVG9EZWxldGUuaWQpXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIFRoZSByZXBsYWNlbWVudE5vZGUgaXMgZ3VhcmFudGVlZCB0byBoYXZlIGEgcGFyZW50LgogICAgICAgICAgICAgICAgTm9kZSBzdG9yYWdlIHBhcmVudCA9IGluZGV4Lm5vZGVzW3JlcGxhY2VtZW50Tm9kZS5wYXJlbnRdOwoKICAgICAgICAgICAgICAgIC8vIEtlZXAgbm90ZSBvZiB0aGUgbG9jYXRpb24gdGhhdCBvdXIgdHJlZSByZWJhbGFuY2luZyBzaG91bGQKICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGF0LgogICAgICAgICAgICAgICAgcmViYWxhbmNlT3JpZ2luID0gcmVwbGFjZW1lbnROb2RlLmlkOwoKICAgICAgICAgICAgICAgIC8vIEpvaW4gdGhlIHBhcmVudCBvZiB0aGUgcmVwbGFjZW1lbnQgbm9kZSB3aXRoIGFueSBzdWJ0cmVlIG9mCiAgICAgICAgICAgICAgICAvLyB0aGUgcmVwbGFjZW1lbnQgbm9kZS4gIFdlIGNhbiBndWFyYW50ZWUgdGhhdCB0aGUgcmVwbGFjZW1lbnQKICAgICAgICAgICAgICAgIC8vIG5vZGUgaGFzIGF0IG1vc3Qgb25lIHN1YnRyZWUgYmVjYXVzZSBvZiBob3cgZ2V0TmV4dE5vZGUgYW5kCiAgICAgICAgICAgICAgICAvLyBnZXRQcmV2aW91c05vZGUgYXJlIHVzZWQuCiAgICAgICAgICAgICAgICBpZiAocGFyZW50LmxlZnQgPT0gcmVwbGFjZW1lbnROb2RlLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmxlZnQgPSByZXBsYWNlbWVudE5vZGUucmlnaHQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50Tm9kZS5yaWdodCAhPSAweDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgTm9kZSBzdG9yYWdlIGNoaWxkID0gaW5kZXgubm9kZXNbcmVwbGFjZW1lbnROb2RlLnJpZ2h0XTsKICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQucGFyZW50ID0gcGFyZW50LmlkOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChwYXJlbnQucmlnaHQgPT0gcmVwbGFjZW1lbnROb2RlLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJpZ2h0ID0gcmVwbGFjZW1lbnROb2RlLmxlZnQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50Tm9kZS5sZWZ0ICE9IDB4MCkgewogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGluZGV4Lm5vZGVzW3JlcGxhY2VtZW50Tm9kZS5sZWZ0XTsKICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQucGFyZW50ID0gcGFyZW50LmlkOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBOb3cgd2UgcmVwbGFjZSB0aGUgbm9kZVRvRGVsZXRlIHdpdGggdGhlIHJlcGxhY2VtZW50Tm9kZS4KICAgICAgICAgICAgICAgIC8vIFRoaXMgaW5jbHVkZXMgcGFyZW50L2NoaWxkIHJlbGF0aW9uc2hpcHMgZm9yIGFsbCBvZiB0aGUKICAgICAgICAgICAgICAgIC8vIHBhcmVudCwgdGhlIGxlZnQgY2hpbGQsIGFuZCB0aGUgcmlnaHQgY2hpbGQuCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudE5vZGUucGFyZW50ID0gbm9kZVRvRGVsZXRlLnBhcmVudDsKICAgICAgICAgICAgICAgIGlmIChub2RlVG9EZWxldGUucGFyZW50ICE9IDB4MCkgewogICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGluZGV4Lm5vZGVzW25vZGVUb0RlbGV0ZS5wYXJlbnRdOwogICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQubGVmdCA9PSBub2RlVG9EZWxldGUuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmxlZnQgPSByZXBsYWNlbWVudE5vZGUuaWQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQucmlnaHQgPT0gbm9kZVRvRGVsZXRlLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5yaWdodCA9IHJlcGxhY2VtZW50Tm9kZS5pZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbm9kZSB3ZSBhcmUgZGVsZXRpbmcgaXMgdGhlIHJvb3Qgbm9kZSB1cGRhdGUgdGhlCiAgICAgICAgICAgICAgICAgICAgLy8gaW5kZXggcm9vdCBub2RlIHBvaW50ZXIuCiAgICAgICAgICAgICAgICAgICAgaW5kZXgucm9vdCA9IHJlcGxhY2VtZW50Tm9kZS5pZDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudE5vZGUubGVmdCA9IG5vZGVUb0RlbGV0ZS5sZWZ0OwogICAgICAgICAgICAgICAgaWYgKG5vZGVUb0RlbGV0ZS5sZWZ0ICE9IDB4MCkgewogICAgICAgICAgICAgICAgICAgIGNoaWxkID0gaW5kZXgubm9kZXNbbm9kZVRvRGVsZXRlLmxlZnRdOwogICAgICAgICAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IHJlcGxhY2VtZW50Tm9kZS5pZDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudE5vZGUucmlnaHQgPSBub2RlVG9EZWxldGUucmlnaHQ7CiAgICAgICAgICAgICAgICBpZiAobm9kZVRvRGVsZXRlLnJpZ2h0ICE9IDB4MCkgewogICAgICAgICAgICAgICAgICAgIGNoaWxkID0gaW5kZXgubm9kZXNbbm9kZVRvRGVsZXRlLnJpZ2h0XTsKICAgICAgICAgICAgICAgICAgICBjaGlsZC5wYXJlbnQgPSByZXBsYWNlbWVudE5vZGUuaWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAobm9kZVRvRGVsZXRlLnBhcmVudCAhPSAweDApIHsKICAgICAgICAgICAgICAgIC8vIFRoZSBub2RlIGJlaW5nIGRlbGV0ZWQgaXMgYSBsZWFmIG5vZGUgc28gd2Ugb25seSBlcmFzZSBpdCdzCiAgICAgICAgICAgICAgICAvLyBwYXJlbnQgbGlua2FnZS4KICAgICAgICAgICAgICAgIHBhcmVudCA9IGluZGV4Lm5vZGVzW25vZGVUb0RlbGV0ZS5wYXJlbnRdOwoKICAgICAgICAgICAgICAgIGlmIChwYXJlbnQubGVmdCA9PSBub2RlVG9EZWxldGUuaWQpIHsKICAgICAgICAgICAgICAgICAgICBwYXJlbnQubGVmdCA9IDB4MDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChwYXJlbnQucmlnaHQgPT0gbm9kZVRvRGVsZXRlLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJpZ2h0ID0gMHgwOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIGtlZXAgbm90ZSBvZiB3aGVyZSB0aGUgcmViYWxhbmNpbmcgc2hvdWxkIGJlZ2luLgogICAgICAgICAgICAgICAgcmViYWxhbmNlT3JpZ2luID0gcGFyZW50LmlkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBib3RoIGEgbGVhZiBub2RlIGFuZCB0aGUgcm9vdCBub2RlLCBzbyB3ZSBuZWVkIHRvCiAgICAgICAgICAgICAgICAvLyB1bnNldCB0aGUgcm9vdCBub2RlIHBvaW50ZXIuCiAgICAgICAgICAgICAgICBpbmRleC5yb290ID0gMHgwOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBOb3cgd2UgemVybyBvdXQgYWxsIG9mIHRoZSBmaWVsZHMgb24gdGhlIG5vZGVUb0RlbGV0ZS4KICAgICAgICAgICAgbm9kZVRvRGVsZXRlLmlkID0gMHgwOwogICAgICAgICAgICBub2RlVG9EZWxldGUudmFsdWUgPSAwOwogICAgICAgICAgICBub2RlVG9EZWxldGUucGFyZW50ID0gMHgwOwogICAgICAgICAgICBub2RlVG9EZWxldGUubGVmdCA9IDB4MDsKICAgICAgICAgICAgbm9kZVRvRGVsZXRlLnJpZ2h0ID0gMHgwOwogICAgICAgICAgICBub2RlVG9EZWxldGUuaGVpZ2h0ID0gMDsKCiAgICAgICAgICAgIC8vIFdhbGsgYmFjayB1cCB0aGUgdHJlZSByZWJhbGFuY2luZwogICAgICAgICAgICBpZiAocmViYWxhbmNlT3JpZ2luICE9IDB4MCkgewogICAgICAgICAgICAgICAgX3JlYmFsYW5jZVRyZWUoaW5kZXgsIHJlYmFsYW5jZU9yaWdpbik7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGJ5dGVzMiBjb25zdGFudCBHVCA9ICI+IjsKICAgICAgICBieXRlczIgY29uc3RhbnQgTFQgPSAiPCI7CiAgICAgICAgYnl0ZXMyIGNvbnN0YW50IEdURSA9ICI+PSI7CiAgICAgICAgYnl0ZXMyIGNvbnN0YW50IExURSA9ICI8PSI7CiAgICAgICAgYnl0ZXMyIGNvbnN0YW50IEVRID0gIj09IjsKCiAgICAgICAgZnVuY3Rpb24gX2NvbXBhcmUoaW50IGxlZnQsIGJ5dGVzMiBvcGVyYXRvciwgaW50IHJpZ2h0KSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgICAgICBvcGVyYXRvciA9PSBHVCB8fCBvcGVyYXRvciA9PSBMVCB8fCBvcGVyYXRvciA9PSBHVEUgfHwKICAgICAgICAgICAgICAgIG9wZXJhdG9yID09IExURSB8fCBvcGVyYXRvciA9PSBFUQogICAgICAgICAgICApOwoKICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09IEdUKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKGxlZnQgPiByaWdodCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09IExUKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKGxlZnQgPCByaWdodCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09IEdURSkgewogICAgICAgICAgICAgICAgcmV0dXJuIChsZWZ0ID49IHJpZ2h0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAob3BlcmF0b3IgPT0gTFRFKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKGxlZnQgPD0gcmlnaHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PSBFUSkgewogICAgICAgICAgICAgICAgcmV0dXJuIChsZWZ0ID09IHJpZ2h0KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gX2dldE1heGltdW0oSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgaW50ZXJuYWwgcmV0dXJucyAoaW50KSB7CiAgICAgICAgICAgICAgICBOb2RlIHN0b3JhZ2UgY3VycmVudE5vZGUgPSBpbmRleC5ub2Rlc1tpZF07CgogICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUucmlnaHQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50Tm9kZS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUgPSBpbmRleC5ub2Rlc1tjdXJyZW50Tm9kZS5yaWdodF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBfZ2V0TWluaW11bShJbmRleCBzdG9yYWdlIGluZGV4LCBieXRlczMyIGlkKSBpbnRlcm5hbCByZXR1cm5zIChpbnQpIHsKICAgICAgICAgICAgICAgIE5vZGUgc3RvcmFnZSBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2lkXTsKCiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5sZWZ0ID09IDB4MCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudE5vZGUudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUubGVmdF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKCiAgICAgICAgLyoqIEBkZXYgUXVlcnkgdGhlIGluZGV4IGZvciB0aGUgZWRnZS1tb3N0IG5vZGUgdGhhdCBzYXRpc2ZpZXMgdGhlCiAgICAgICAgICogIGdpdmVuIHF1ZXJ5LiAgRm9yID4sID49LCBhbmQgPT0sIHRoaXMgd2lsbCBiZSB0aGUgbGVmdC1tb3N0IG5vZGUKICAgICAgICAgKiAgdGhhdCBzYXRpc2ZpZXMgdGhlIGNvbXBhcmlzb24uICBGb3IgPCBhbmQgPD0gdGhpcyB3aWxsIGJlIHRoZQogICAgICAgICAqICByaWdodC1tb3N0IG5vZGUgdGhhdCBzYXRpc2ZpZXMgdGhlIGNvbXBhcmlzb24uCiAgICAgICAgICovCiAgICAgICAgLy8vIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggdGhhdCBzaG91bGQgYmUgcXVlcmllZAogICAgICAgIC8qKiBAcGFyYW0gb3BlcmF0b3IgT25lIG9mICc+JywgJz49JywgJzwnLCAnPD0nLCAnPT0nIHRvIHNwZWNpZnkgd2hhdAogICAgICAgICAqICB0eXBlIG9mIGNvbXBhcmlzb24gb3BlcmF0b3Igc2hvdWxkIGJlIHVzZWQuCiAgICAgICAgICovCiAgICAgICAgZnVuY3Rpb24gcXVlcnkoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMyIG9wZXJhdG9yLCBpbnQgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChieXRlczMyKSB7CiAgICAgICAgICAgICAgICBieXRlczMyIHJvb3ROb2RlSWQgPSBpbmRleC5yb290OwoKICAgICAgICAgICAgICAgIGlmIChyb290Tm9kZUlkID09IDB4MCkgewogICAgICAgICAgICAgICAgICAgIC8vIEVtcHR5IHRyZWUuCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDB4MDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBOb2RlIHN0b3JhZ2UgY3VycmVudE5vZGUgPSBpbmRleC5ub2Rlc1tyb290Tm9kZUlkXTsKCiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChfY29tcGFyZShjdXJyZW50Tm9kZS52YWx1ZSwgb3BlcmF0b3IsIHZhbHVlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGZvdW5kIGEgbWF0Y2ggYnV0IGl0IG1pZ2h0IG5vdCBiZSB0aGUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gKmNvcnJlY3QqIG1hdGNoLgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG9wZXJhdG9yID09IExUKSB8fCAob3BlcmF0b3IgPT0gTFRFKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmVlZCB0byBrZWVwIHRyYXZlcnNpbmcgcmlnaHQgdW50aWwgdGhpcyBpcyBubwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9uZ2VyIHRydWUuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUucmlnaHQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnROb2RlLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9jb21wYXJlKF9nZXRNaW5pbXVtKGluZGV4LCBjdXJyZW50Tm9kZS5yaWdodCksIG9wZXJhdG9yLCB2YWx1ZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBhcmUgc3RpbGwgbm9kZXMgdG8gdGhlIHJpZ2h0IHRoYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXRjaC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2N1cnJlbnROb2RlLnJpZ2h0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50Tm9kZS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChvcGVyYXRvciA9PSBHVCkgfHwgKG9wZXJhdG9yID09IEdURSkgfHwgKG9wZXJhdG9yID09IEVRKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmVlZCB0byBrZWVwIHRyYXZlcnNpbmcgbGVmdCB1bnRpbCB0aGlzIGlzIG5vCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb25nZXIgdHJ1ZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5sZWZ0ID09IDB4MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50Tm9kZS5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfY29tcGFyZShfZ2V0TWF4aW11bShpbmRleCwgY3VycmVudE5vZGUubGVmdCksIG9wZXJhdG9yLCB2YWx1ZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2N1cnJlbnROb2RlLmxlZnRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnROb2RlLmlkOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoKG9wZXJhdG9yID09IExUKSB8fCAob3BlcmF0b3IgPT0gTFRFKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUubGVmdCA9PSAweDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIGFyZSBubyBub2RlcyB0aGF0IGFyZSBsZXNzIHRoYW4gdGhlIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyByZXR1cm4gbnVsbC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAweDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUgPSBpbmRleC5ub2Rlc1tjdXJyZW50Tm9kZS5sZWZ0XTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoKG9wZXJhdG9yID09IEdUKSB8fCAob3BlcmF0b3IgPT0gR1RFKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUucmlnaHQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBhcmUgbm8gbm9kZXMgdGhhdCBhcmUgZ3JlYXRlciB0aGFuIHRoZSB2YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gcmV0dXJuIG51bGwuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMHgwOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUucmlnaHRdOwogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PSBFUSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUudmFsdWUgPCB2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlLnJpZ2h0ID09IDB4MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAweDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2N1cnJlbnROb2RlLnJpZ2h0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUudmFsdWUgPiB2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlLmxlZnQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDB4MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlID0gaW5kZXgubm9kZXNbY3VycmVudE5vZGUubGVmdF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIF9yZWJhbGFuY2VUcmVlKEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMzIgaWQpIGludGVybmFsIHsKICAgICAgICAgICAgLy8gVHJhY2UgYmFjayB1cCByZWJhbGFuY2luZyB0aGUgdHJlZSBhbmQgdXBkYXRpbmcgaGVpZ2h0cyBhcwogICAgICAgICAgICAvLyBuZWVkZWQuLgogICAgICAgICAgICBOb2RlIHN0b3JhZ2UgY3VycmVudE5vZGUgPSBpbmRleC5ub2Rlc1tpZF07CgogICAgICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICAgICAgaW50IGJhbGFuY2VGYWN0b3IgPSBfZ2V0QmFsYW5jZUZhY3RvcihpbmRleCwgY3VycmVudE5vZGUuaWQpOwoKICAgICAgICAgICAgICAgIGlmIChiYWxhbmNlRmFjdG9yID09IDIpIHsKICAgICAgICAgICAgICAgICAgICAvLyBSaWdodCByb3RhdGlvbiAodHJlZSBpcyBoZWF2eSBvbiB0aGUgbGVmdCkKICAgICAgICAgICAgICAgICAgICBpZiAoX2dldEJhbGFuY2VGYWN0b3IoaW5kZXgsIGN1cnJlbnROb2RlLmxlZnQpID09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBzdWJ0cmVlIGlzIGxlYW5pbmcgcmlnaHQgc28gaXQgbmVlZCB0byBiZQogICAgICAgICAgICAgICAgICAgICAgICAvLyByb3RhdGVkIGxlZnQgYmVmb3JlIHRoZSBjdXJyZW50IG5vZGUgaXMgcm90YXRlZAogICAgICAgICAgICAgICAgICAgICAgICAvLyByaWdodC4KICAgICAgICAgICAgICAgICAgICAgICAgX3JvdGF0ZUxlZnQoaW5kZXgsIGN1cnJlbnROb2RlLmxlZnQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBfcm90YXRlUmlnaHQoaW5kZXgsIGN1cnJlbnROb2RlLmlkKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoYmFsYW5jZUZhY3RvciA9PSAtMikgewogICAgICAgICAgICAgICAgICAgIC8vIExlZnQgcm90YXRpb24gKHRyZWUgaXMgaGVhdnkgb24gdGhlIHJpZ2h0KQogICAgICAgICAgICAgICAgICAgIGlmIChfZ2V0QmFsYW5jZUZhY3RvcihpbmRleCwgY3VycmVudE5vZGUucmlnaHQpID09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHN1YnRyZWUgaXMgbGVhbmluZyBsZWZ0IHNvIGl0IG5lZWQgdG8gYmUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm90YXRlZCByaWdodCBiZWZvcmUgdGhlIGN1cnJlbnQgbm9kZSBpcyByb3RhdGVkCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxlZnQuCiAgICAgICAgICAgICAgICAgICAgICAgIF9yb3RhdGVSaWdodChpbmRleCwgY3VycmVudE5vZGUucmlnaHQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBfcm90YXRlTGVmdChpbmRleCwgY3VycmVudE5vZGUuaWQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICgoLTEgPD0gYmFsYW5jZUZhY3RvcikgJiYgKGJhbGFuY2VGYWN0b3IgPD0gMSkpIHsKICAgICAgICAgICAgICAgICAgICBfdXBkYXRlTm9kZUhlaWdodChpbmRleCwgY3VycmVudE5vZGUuaWQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5wYXJlbnQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUmVhY2hlZCB0aGUgcm9vdCB3aGljaCBtYXkgYmUgbmV3IGR1ZSB0byB0cmVlCiAgICAgICAgICAgICAgICAgICAgLy8gcm90YXRpb24sIHNvIHNldCBpdCBhcyB0aGUgcm9vdCBhbmQgdGhlbiBicmVhay4KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGluZGV4Lm5vZGVzW2N1cnJlbnROb2RlLnBhcmVudF07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIF9nZXRCYWxhbmNlRmFjdG9yKEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMzIgaWQpIGludGVybmFsIHJldHVybnMgKGludCkgewogICAgICAgICAgICAgICAgTm9kZSBzdG9yYWdlIG5vZGUgPSBpbmRleC5ub2Rlc1tpZF07CgogICAgICAgICAgICAgICAgcmV0dXJuIGludChpbmRleC5ub2Rlc1tub2RlLmxlZnRdLmhlaWdodCkgLSBpbnQoaW5kZXgubm9kZXNbbm9kZS5yaWdodF0uaGVpZ2h0KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIF91cGRhdGVOb2RlSGVpZ2h0KEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMzIgaWQpIGludGVybmFsIHsKICAgICAgICAgICAgICAgIE5vZGUgc3RvcmFnZSBub2RlID0gaW5kZXgubm9kZXNbaWRdOwoKICAgICAgICAgICAgICAgIG5vZGUuaGVpZ2h0ID0gbWF4KGluZGV4Lm5vZGVzW25vZGUubGVmdF0uaGVpZ2h0LCBpbmRleC5ub2Rlc1tub2RlLnJpZ2h0XS5oZWlnaHQpICsgMTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIF9yb3RhdGVMZWZ0KEluZGV4IHN0b3JhZ2UgaW5kZXgsIGJ5dGVzMzIgaWQpIGludGVybmFsIHsKICAgICAgICAgICAgTm9kZSBzdG9yYWdlIG9yaWdpbmFsUm9vdCA9IGluZGV4Lm5vZGVzW2lkXTsKCiAgICAgICAgICAgIC8vIENhbm5vdCByb3RhdGUgbGVmdCBpZiB0aGVyZSBpcyBubyByaWdodCBvcmlnaW5hbFJvb3QgdG8gcm90YXRlIGludG8KICAgICAgICAgICAgLy8gcGxhY2UuCiAgICAgICAgICAgIGFzc2VydChvcmlnaW5hbFJvb3QucmlnaHQgIT0gMHgwKTsKCiAgICAgICAgICAgIC8vIFRoZSByaWdodCBjaGlsZCBpcyB0aGUgbmV3IHJvb3QsIHNvIGl0IGdldHMgdGhlIG9yaWdpbmFsCiAgICAgICAgICAgIC8vIGBvcmlnaW5hbFJvb3QucGFyZW50YCBhcyBpdCdzIHBhcmVudC4KICAgICAgICAgICAgTm9kZSBzdG9yYWdlIG5ld1Jvb3QgPSBpbmRleC5ub2Rlc1tvcmlnaW5hbFJvb3QucmlnaHRdOwogICAgICAgICAgICBuZXdSb290LnBhcmVudCA9IG9yaWdpbmFsUm9vdC5wYXJlbnQ7CgogICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgcm9vdCBuZWVkcyB0byBoYXZlIGl0J3MgcmlnaHQgY2hpbGQgbnVsbGVkIG91dC4KICAgICAgICAgICAgb3JpZ2luYWxSb290LnJpZ2h0ID0gMHgwOwoKICAgICAgICAgICAgaWYgKG9yaWdpbmFsUm9vdC5wYXJlbnQgIT0gMHgwKSB7CiAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIHBhcmVudCBub2RlLCBpdCBuZWVkcyB0byBub3cgcG9pbnQgZG93bndhcmQgYXQKICAgICAgICAgICAgICAgIC8vIHRoZSBuZXdSb290IHdoaWNoIGlzIHJvdGF0aW5nIGludG8gdGhlIHBsYWNlIHdoZXJlIGBub2RlYCB3YXMuCiAgICAgICAgICAgICAgICBOb2RlIHN0b3JhZ2UgcGFyZW50ID0gaW5kZXgubm9kZXNbb3JpZ2luYWxSb290LnBhcmVudF07CgogICAgICAgICAgICAgICAgLy8gZmlndXJlIG91dCBpZiB3ZSdyZSBhIGxlZnQgb3IgcmlnaHQgY2hpbGQgYW5kIGhhdmUgdGhlCiAgICAgICAgICAgICAgICAvLyBwYXJlbnQgcG9pbnQgdG8gdGhlIG5ldyBub2RlLgogICAgICAgICAgICAgICAgaWYgKHBhcmVudC5sZWZ0ID09IG9yaWdpbmFsUm9vdC5pZCkgewogICAgICAgICAgICAgICAgICAgIHBhcmVudC5sZWZ0ID0gbmV3Um9vdC5pZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChwYXJlbnQucmlnaHQgPT0gb3JpZ2luYWxSb290LmlkKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJpZ2h0ID0gbmV3Um9vdC5pZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIGlmIChuZXdSb290LmxlZnQgIT0gMCkgewogICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5ldyByb290IGhhZCBhIGxlZnQgY2hpbGQsIHRoYXQgbW92ZXMgdG8gYmUgdGhlCiAgICAgICAgICAgICAgICAvLyBuZXcgcmlnaHQgY2hpbGQgb2YgdGhlIG9yaWdpbmFsIHJvb3Qgbm9kZQogICAgICAgICAgICAgICAgTm9kZSBzdG9yYWdlIGxlZnRDaGlsZCA9IGluZGV4Lm5vZGVzW25ld1Jvb3QubGVmdF07CiAgICAgICAgICAgICAgICBvcmlnaW5hbFJvb3QucmlnaHQgPSBsZWZ0Q2hpbGQuaWQ7CiAgICAgICAgICAgICAgICBsZWZ0Q2hpbGQucGFyZW50ID0gb3JpZ2luYWxSb290LmlkOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBVcGRhdGUgdGhlIG5ld1Jvb3QncyBsZWZ0IG5vZGUgdG8gcG9pbnQgYXQgdGhlIG9yaWdpbmFsIG5vZGUuCiAgICAgICAgICAgIG9yaWdpbmFsUm9vdC5wYXJlbnQgPSBuZXdSb290LmlkOwogICAgICAgICAgICBuZXdSb290LmxlZnQgPSBvcmlnaW5hbFJvb3QuaWQ7CgogICAgICAgICAgICBpZiAobmV3Um9vdC5wYXJlbnQgPT0gMHgwKSB7CiAgICAgICAgICAgICAgICBpbmRleC5yb290ID0gbmV3Um9vdC5pZDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gVE9ETzogYXJlIGJvdGggb2YgdGhlc2UgdXBkYXRlcyBuZWNlc3Nhcnk/CiAgICAgICAgICAgIF91cGRhdGVOb2RlSGVpZ2h0KGluZGV4LCBvcmlnaW5hbFJvb3QuaWQpOwogICAgICAgICAgICBfdXBkYXRlTm9kZUhlaWdodChpbmRleCwgbmV3Um9vdC5pZCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBfcm90YXRlUmlnaHQoSW5kZXggc3RvcmFnZSBpbmRleCwgYnl0ZXMzMiBpZCkgaW50ZXJuYWwgewogICAgICAgICAgICBOb2RlIHN0b3JhZ2Ugb3JpZ2luYWxSb290ID0gaW5kZXgubm9kZXNbaWRdOwoKICAgICAgICAgICAgLy8gQ2Fubm90IHJvdGF0ZSByaWdodCBpZiB0aGVyZSBpcyBubyBsZWZ0IG5vZGUgdG8gcm90YXRlIGludG8KICAgICAgICAgICAgLy8gcGxhY2UuCiAgICAgICAgICAgIGFzc2VydChvcmlnaW5hbFJvb3QubGVmdCAhPSAweDApOwoKICAgICAgICAgICAgLy8gVGhlIGxlZnQgY2hpbGQgaXMgdGFraW5nIHRoZSBwbGFjZSBvZiBub2RlLCBzbyB3ZSB1cGRhdGUgaXQncwogICAgICAgICAgICAvLyBwYXJlbnQgdG8gYmUgdGhlIG9yaWdpbmFsIHBhcmVudCBvZiB0aGUgbm9kZS4KICAgICAgICAgICAgTm9kZSBzdG9yYWdlIG5ld1Jvb3QgPSBpbmRleC5ub2Rlc1tvcmlnaW5hbFJvb3QubGVmdF07CiAgICAgICAgICAgIG5ld1Jvb3QucGFyZW50ID0gb3JpZ2luYWxSb290LnBhcmVudDsKCiAgICAgICAgICAgIC8vIE51bGwgb3V0IHRoZSBvcmlnaW5hbFJvb3QubGVmdAogICAgICAgICAgICBvcmlnaW5hbFJvb3QubGVmdCA9IDB4MDsKCiAgICAgICAgICAgIGlmIChvcmlnaW5hbFJvb3QucGFyZW50ICE9IDB4MCkgewogICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5vZGUgaGFzIGEgcGFyZW50LCB1cGRhdGUgdGhlIGNvcnJlY3QgY2hpbGQgdG8gcG9pbnQKICAgICAgICAgICAgICAgIC8vIGF0IHRoZSBuZXdSb290IG5vdy4KICAgICAgICAgICAgICAgIE5vZGUgc3RvcmFnZSBwYXJlbnQgPSBpbmRleC5ub2Rlc1tvcmlnaW5hbFJvb3QucGFyZW50XTsKCiAgICAgICAgICAgICAgICBpZiAocGFyZW50LmxlZnQgPT0gb3JpZ2luYWxSb290LmlkKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmxlZnQgPSBuZXdSb290LmlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHBhcmVudC5yaWdodCA9PSBvcmlnaW5hbFJvb3QuaWQpIHsKICAgICAgICAgICAgICAgICAgICBwYXJlbnQucmlnaHQgPSBuZXdSb290LmlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAobmV3Um9vdC5yaWdodCAhPSAweDApIHsKICAgICAgICAgICAgICAgIE5vZGUgc3RvcmFnZSByaWdodENoaWxkID0gaW5kZXgubm9kZXNbbmV3Um9vdC5yaWdodF07CiAgICAgICAgICAgICAgICBvcmlnaW5hbFJvb3QubGVmdCA9IG5ld1Jvb3QucmlnaHQ7CiAgICAgICAgICAgICAgICByaWdodENoaWxkLnBhcmVudCA9IG9yaWdpbmFsUm9vdC5pZDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBuZXcgcm9vdCdzIHJpZ2h0IG5vZGUgdG8gcG9pbnQgdG8gdGhlIG9yaWdpbmFsIG5vZGUuCiAgICAgICAgICAgIG9yaWdpbmFsUm9vdC5wYXJlbnQgPSBuZXdSb290LmlkOwogICAgICAgICAgICBuZXdSb290LnJpZ2h0ID0gb3JpZ2luYWxSb290LmlkOwoKICAgICAgICAgICAgaWYgKG5ld1Jvb3QucGFyZW50ID09IDB4MCkgewogICAgICAgICAgICAgICAgaW5kZXgucm9vdCA9IG5ld1Jvb3QuaWQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFJlY29tcHV0ZSBoZWlnaHRzLgogICAgICAgICAgICBfdXBkYXRlTm9kZUhlaWdodChpbmRleCwgb3JpZ2luYWxSb290LmlkKTsKICAgICAgICAgICAgX3VwZGF0ZU5vZGVIZWlnaHQoaW5kZXgsIG5ld1Jvb3QuaWQpOwogICAgICAgIH0KfQ=='.
	

]
