Class {
	#name : #SRTba92a78ffa23012002f9df25ff25b406287c61e5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTba92a78ffa23012002f9df25ff25b406287c61e5 >> base64 [
	^ 'LyoKZmlsZTogICBkZXBvc2l0b2ZmZXIuc29sCnZlcjogICAgMC4xLjEKYXV0aG9yOiBDaHJpcyBLd2FuCmRhdGU6ICAgMjgtT0NULTIwMTcvMTEtTWFyY2gtMjAxOAplbWFpbDogIGVjb3JwbnUgQVQgZ21haWwuY29tCgpBIGNvbGxhdGVkIGNvbnRyYWN0IHNldCBmb3IgYSB0b2tlbiBzYWxlIHNwZWNpZmljIHRvIHRoZSByZXF1aXJtZW50cyBvZgpEZXBvc2l0b2ZmZXIgKERPVCkgdG9rZW4gcHJvZHVjdC4KClRoaXMgc29mdHdhcmUgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgClNlZSBNSVQgTGljZW5jZSBmb3IgZnVydGhlciBkZXRhaWxzLgo8aHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQ+LgoKKi8KCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xODsKCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cCgogZGVwb3NpdG9mZmVyIHRva2VuIHNhbGUgY29uZmlndXJhdGlvbgoKXCotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCi8vIENvbnRhaW5zIHRva2VuIHNhbGUgcGFyYW1ldGVycwpjb250cmFjdCBkZXBvc2l0b2ZmZXJUb2tlbkNvbmZpZwp7CiAgICAvLyBFUkMyMCB0cmFkZSBuYW1lIGFuZCBzeW1ib2wKICAgIHN0cmluZyBwdWJsaWMgICAgICAgICAgIG5hbWUgICAgICAgICAgICA9ICJEZXBvc2l0b2ZmZXIuY29tIFVTUGF0NzM3NjYxMiI7CiAgICBzdHJpbmcgcHVibGljICAgICAgICAgICBzeW1ib2wgICAgICAgICAgPSAiRE9UIjsKCiAgICAvLyBPd25lciBoYXMgcG93ZXIgdG8gYWJvcnQsIGRpc2NvdW50IGFkZHJlc3Nlcywgc3dlZXAgc3VjY2Vzc2Z1bCBmdW5kcywKICAgIC8vIGNoYW5nZSBvd25lciwgc3dlZXAgYWxpZW4gdG9rZW5zLgogICAgYWRkcmVzcyBwdWJsaWMgICAgICAgICAgb3duZXIgICAgICAgICAgID0gMHhCMzUzY0Y0MUEwQ0FhMzhENjU5N0E3YTEzMzdkZWJmMGIwOWRkOGFlOyAvLyBQcmltYXJ5IGFkZHJlc3MgY2hlY2tzdW1tZWQKICAgIAogICAgLy8gRnVuZCB3YWxsZXQgc2hvdWxkIGFsc28gYmUgYXVkaXRlZCBwcmlvciB0byBkZXBsb3ltZW50CiAgICAvLyBOT1RFOiBNdXN0IGJlIGNoZWNrc3VtbWVkIGFkZHJlc3MhCiAgICAvL2FkZHJlc3MgcHVibGljICAgICAgICAgIGZ1bmRXYWxsZXQgICAgICA9IDB4RTRCZTMxNTdEQkQ3MUFjZDdBZDU2NjdkYjAwQUExMTFDMDA4ODE5NTsgLy8gbXVsdGlTaWcgYWRkcmVzcyBjaGVja3N1bW1lZAogICAgYWRkcmVzcyBwdWJsaWMgICAgICAgICAgICBmdW5kV2FsbGV0ID0gICAgICAweGNjZTFmNmY0Y2ViMGYwNDZjZjU3ZmU4ZTFjNDA5ZmM0N2FmZTZhYWI7IAogICAgCiAgICAvLyBUb2tlbnMgYXdhcmRlZCBwZXIgVVNEIGNvbnRyaWJ1dGVkCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCAgICBUT0tFTlNfUEVSX1VTRCAgPSAyOwoKICAgIC8vIEV0aGVyIG1hcmtldCBwcmljZSBpbiBVU0QKICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIFVTRF9QRVJfRVRIICAgICA9IDM4MDsgLy8gYXBwcm94IDcgZGF5IGF2ZXJhZ2UgSGlnaCBMb3cgYXMgYXQgMjl0aCBPQ1QgMjAxNwogICAgCiAgICAvLyBNaW5pbXVtIGFuZCBtYXhpbXVtIHRhcmdldCBpbiBVU0QKICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIE1JTl9VU0RfRlVORCAgICA9IDE7ICAvLyAkMQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgICAgTUFYX1VTRF9GVU5EICAgID0gMjAwMDAwMDsgLy8gJDIgbWlvCiAgICAKICAgIC8vIE5vbi1LWUMgY29udHJpYnV0aW9uIGxpbWl0IGluIFVTRAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgICAgS1lDX1VTRF9MTVQgICAgID0gNTAwMDA7CiAgICAKICAgIC8vIFRoZXJlIHdpbGwgYmUgZXhhY3RseSA0MDAwMDAwIHRva2VucyByZWdhcmRsZXNzIG9mIG51bWJlciBzb2xkCiAgICAvLyBVbnNvbGQgdG9rZW5zIGFyZSBwdXQgZ2l2ZW4gdG8gdGhlIEZvdW5kZXIgb24gVHJ1c3QgdG8gZnVuZCBvcGVyYXRpb25zIG9mIHRoZSBQcm9qZWN0CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCAgICBNQVhfVE9LRU5TICAgICAgPSA0MDAwMDAwOyAvLyA0IG1pbwogICAgCiAgICAvLyBGdW5kaW5nIGJlZ2lucyBvbiAzMHRoIE9DVCAyMDE3CiAgICAKICAgIC8vdWludCBwdWJsaWMgY29uc3RhbnQgICAgU1RBUlRfREFURSAgICAgID0gMTUwOTMxODAwMTsgLy8gMzAuMTAuMjAxNyAxMCBBTSBhbmQgMSBTZWMgU3lkbmV5IFRpbWUKICAgICAgdWludCBwdWJsaWMgY29uc3RhbnQgICAgU1RBUlRfREFURSAgICAgID0gMTUyMDc3NjMzNzsgLy8gTW9uZGF5IE1hcmNoIDEyLCAyMDE4IDAwOjUyOjE3IChhbSkgaW4gdGltZSB6b25lIEF1c3RyYWxpYS9TeWRuZXkgKEFFRFQpCiAgICAgIAogICAgLy8gUGVyaW9kIGZvciBmdW5kcmFpc2luZwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgICAgRlVORElOR19QRVJJT0QgID0gMTgwIGRheXM7Cn0KCgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICBjID0gYSArIGI7CiAgICAgICAgcmVxdWlyZShjID49IGEpOwogICAgfQogICAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgYykgewogICAgICAgIHJlcXVpcmUoYiA8PSBhKTsKICAgICAgICBjID0gYSAtIGI7CiAgICB9CiAgICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgYyA9IGEgKiBiOwogICAgICAgIHJlcXVpcmUoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgfQogICAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgYykgewogICAgICAgIHJlcXVpcmUoYiA+IDApOwogICAgICAgIGMgPSBhIC8gYjsKICAgIH0KfQoKCmNvbnRyYWN0IFJlZW50cnlQcm90ZWN0ZWQKewogICAgLy8gVGhlIHJlZW50cnkgcHJvdGVjdGlvbiBzdGF0ZSBtdXRleC4KICAgIGJvb2wgX19yZU11dGV4OwoKICAgIC8vIFNldHMgYW5kIHJlc2V0cyBtdXRleCBpbiBvcmRlciB0byBibG9jayBmdW5jdGluIHJlZW50cnkKICAgIG1vZGlmaWVyIHByZXZlbnRSZWVudHJ5KCkgewogICAgICAgIHJlcXVpcmUoIV9fcmVNdXRleCk7CiAgICAgICAgX19yZU11dGV4ID0gdHJ1ZTsKICAgICAgICBfOwogICAgICAgIGRlbGV0ZSBfX3JlTXV0ZXg7CiAgICB9CgogICAgLy8gQmxvY2tzIGZ1bmN0aW9uIGVudHJ5IGlmIG11dGV4IGlzIHNldAogICAgbW9kaWZpZXIgbm9SZWVudHJ5KCkgewogICAgICAgIHJlcXVpcmUoIV9fcmVNdXRleCk7CiAgICAgICAgXzsKICAgIH0KfQoKY29udHJhY3QgRVJDMjBUb2tlbgp7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCi8qIENvbnN0YW50cyAqLwoKICAgIC8vIG5vbmUKICAgIAovKiBTdGF0ZSB2YXJpYWJsZSAqLwoKICAgIC8vLyBAcmV0dXJuIFRoZSBUb3RhbCBzdXBwbHkgb2YgdG9rZW5zCiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIAogICAgLy8vIEByZXR1cm4gVG9rZW4gc3ltYm9sCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIAogICAgLy8gVG9rZW4gb3duZXJzaGlwIG1hcHBpbmcKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CiAgICAKICAgIC8vIEFsbG93YW5jZXMgbWFwcGluZwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwoKLyogRXZlbnRzICovCgogICAgLy8gVHJpZ2dlcmVkIHdoZW4gdG9rZW5zIGFyZSB0cmFuc2ZlcnJlZC4KICAgIGV2ZW50IFRyYW5zZmVyKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgX3RvLAogICAgICAgIHVpbnQyNTYgX2Ftb3VudCk7CgogICAgLy8gVHJpZ2dlcmVkIHdoZW5ldmVyIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSBpcyBjYWxsZWQuCiAgICBldmVudCBBcHByb3ZhbCgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgX293bmVyLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwKICAgICAgICB1aW50MjU2IF9hbW91bnQpOwoKLyogTW9kaWZpZXJzICovCgogICAgLy8gbm9uZQogICAgCi8qIEZ1bmN0aW9ucyAqLwoKICAgIC8vIFVzaW5nIGFuIGV4cGxpY2l0IGdldHRlciBhbGxvd3MgZm9yIGZ1bmN0aW9uIG92ZXJsb2FkaW5nICAgIAogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX2FkZHIpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfYWRkcl07CiAgICB9CiAgICAKICAgIC8vIFVzaW5nIGFuIGV4cGxpY2l0IGdldHRlciBhbGxvd3MgZm9yIGZ1bmN0aW9uIG92ZXJsb2FkaW5nICAgIAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKQogICAgICAgIHB1YmxpYwogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIHRvIGFkZHJlc3MgX3RvCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmV0dXJuIHhmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICAgIH0KCiAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKF9hbW91bnQgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwogICAgICAgIAogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOwogICAgICAgIHJldHVybiB4ZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgfQoKICAgIC8vIFByb2Nlc3MgYSB0cmFuc2ZlciBpbnRlcm5hbGx5LgogICAgZnVuY3Rpb24geGZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KQogICAgICAgIGludGVybmFsCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKF9hbW91bnQgPD0gYmFsYW5jZXNbX2Zyb21dKTsKCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICAgICAgCiAgICAgICAgLy8gYXZvaWQgd2FzdGluZyBnYXMgb24gMCB0b2tlbiB0cmFuc2ZlcnMKICAgICAgICBpZihfYW1vdW50ID09IDApIHJldHVybiB0cnVlOwogICAgICAgIAogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSAgID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gQXBwcm92ZXMgYSB0aGlyZC1wYXJ0eSBzcGVuZGVyCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX2Ftb3VudDsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCgoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwKCiMjIENvbmRpdGlvbmFsIEVudHJ5IFRhYmxlCgpGdW5jdGlvbnMgbXVzdCB0aHJvdyBvbiBGIGNvbmRpdGlvbnMKCkNvbmRpdGlvbmFsIEVudHJ5IFRhYmxlIChmdW5jdGlvbnMgbXVzdCB0aHJvdyBvbiBGIGNvbmRpdGlvbnMpCgpyZW5ldHJ5IHByZXZlbnRpb24gb24gYWxsIHB1YmxpYyBtdXRhdGluZyBmdW5jdGlvbnMKUmVlbnRyeSBtdXRleCBzZXQgaW4gbW92ZUZ1bmRzVG9XYWxsZXQoKSwgcmVmdW5kKCkKCnxmdW5jdGlvbiAgICAgICAgICAgICAgICB8PFNUQVJUX0RBVEV8PEVORF9EQVRFIHxmdW5kRmFpbGVkICB8ZnVuZFN1Y2NlZWRlZHxpY29TdWNjZWVkZWQKfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tOnw6LS0tLS0tLS06fDotLS0tLS0tLS0tOnw6LS0tLS0tLS0tLS06fDotLS0tLS0tLS06fAp8KCkgICAgICAgICAgICAgICAgICAgICAgfEtZQyAgICAgICAgfFQgICAgICAgICB8RiAgICAgICAgICAgfFQgICAgICAgICAgICB8RiAgICAgICAgICB8CnxhYm9ydCgpICAgICAgICAgICAgICAgICB8VCAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgICB8VCAgICAgICAgICAgIHxGICAgICAgICAgIHwKfHByb3h5UHVyY2hhc2UoKSAgICAgICAgIHxLWUMgICAgICAgIHxUICAgICAgICAgfEYgICAgICAgICAgIHxUICAgICAgICAgICAgfEYgICAgICAgICAgfAp8YWRkS3ljQWRkcmVzcygpICAgICAgICAgfFQgICAgICAgICAgfFQgICAgICAgICB8RiAgICAgICAgICAgfFQgICAgICAgICAgICB8VCAgICAgICAgICB8CnxmaW5hbGlzZUlDTygpICAgICAgICAgICB8RiAgICAgICAgICB8RiAgICAgICAgIHxGICAgICAgICAgICB8VCAgICAgICAgICAgIHxUICAgICAgICAgIHwKfHJlZnVuZCgpICAgICAgICAgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfFQgICAgICAgICAgIHxGICAgICAgICAgICAgfEYgICAgICAgICAgfAp8dHJhbnNmZXIoKSAgICAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8RiAgICAgICAgICAgfEYgICAgICAgICAgICB8VCAgICAgICAgICB8Cnx0cmFuc2ZlckZyb20oKSAgICAgICAgICB8RiAgICAgICAgICB8RiAgICAgICAgIHxGICAgICAgICAgICB8RiAgICAgICAgICAgIHxUICAgICAgICAgIHwKfGFwcHJvdmUoKSAgICAgICAgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfEYgICAgICAgICAgIHxGICAgICAgICAgICAgfFQgICAgICAgICAgfAp8Y2hhbmdlT3duZXIoKSAgICAgICAgICAgfFQgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICAgfFQgICAgICAgICAgICB8VCAgICAgICAgICB8CnxhY2NlcHRPd25lcnNoaXAoKSAgICAgICB8VCAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgICB8VCAgICAgICAgICAgIHxUICAgICAgICAgIHwKfGNoYW5nZWRlcG9zaXRvKCkgICAgICAgICAgfFQgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICAgfFQgICAgICAgICAgICB8VCAgICAgICAgICB8CnxkZXN0cm95KCkgICAgICAgICAgICAgICB8RiAgICAgICAgICB8RiAgICAgICAgIHwhX19hYm9ydEZ1c2V8RiAgICAgICAgICAgIHxGICAgICAgICAgIHwKfHRyYW5zZmVyQW55RVJDMjBUb2tlbnMoKXxUICAgICAgICAgIHxUICAgICAgICAgfFQgICAgICAgICAgIHxUICAgICAgICAgICAgfFQgICAgICAgICAgfAoKXCotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCmNvbnRyYWN0IGRlcG9zaXRvZmZlclRva2VuQWJzdHJhY3QKewovLyBUT0RPIGNvbW1lbnQgZXZlbnRzCgovLyBMb2dnZWQgd2hlbiBmdW5kZXIgZXhjZWVkcyB0aGUgS1lDIGxpbWl0CiAgICBldmVudCBLWUNBZGRyZXNzKGFkZHJlc3MgaW5kZXhlZCBfYWRkciwgYm9vbCBpbmRleGVkIF9reWMpOwoKLy8gTG9nZ2VkIHVwb24gcmVmdW5kCiAgICBldmVudCBSZWZ1bmRlZChhZGRyZXNzIGluZGV4ZWQgX2FkZHIsIHVpbnQgaW5kZXhlZCBfdmFsdWUpOwoKLy8gTG9nZ2VkIHdoZW4gbmV3IG93bmVyIGFjY2VwdHMgb3duZXJzaGlwCiAgICBldmVudCBDaGFuZ2VkT3duZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvKTsKICAgIAovLyBMb2dnZWQgd2hlbiBvd25lciBpbml0aWF0ZXMgYSBjaGFuZ2Ugb2Ygb3duZXJzaGlwCiAgICBldmVudCBDaGFuZ2VPd25lclRvKGFkZHJlc3MgaW5kZXhlZCBfdG8pOwoKLy8gTG9nZ2VkIHdoZW4gSUNPIGV0aGVyIGZ1bmRzIGFyZSB0cmFuc2ZlcnJlZCB0byBhbiBhZGRyZXNzCiAgICBldmVudCBGdW5kc1RyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBfd2FsbGV0LCB1aW50IGluZGV4ZWQgX3ZhbHVlKTsKCgogICAgLy8gVGhpcyBmdXNlIGJsb3dzIHVwb24gY2FsbGluZyBhYm9ydCgpIHdoaWNoIGZvcmNlcyBhIGZhaWwgc3RhdGUKICAgIGJvb2wgcHVibGljIF9fYWJvcnRGdXNlID0gdHJ1ZTsKICAgIAogICAgLy8gU2V0IHRvIHRydWUgYWZ0ZXIgdGhlIGZ1bmQgaXMgc3dlcHQgdG8gdGhlIGZ1bmQgd2FsbGV0LCBhbGxvd3MgdG9rZW4KICAgIC8vIHRyYW5zZmVycyBhbmQgcHJldmVudHMgYWJvcnQoKQogICAgYm9vbCBwdWJsaWMgaWNvU3VjY2Vzc2Z1bDsKCiAgICAvLyBUb2tlbiBjb252ZXJzaW9uIGZhY3RvcnMgYXJlIGNhbGN1bGF0ZWQgd2l0aCBkZWNpbWFsIHBsYWNlcyBhdCBwYXJpdHkgd2l0aCBldGhlcgogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogICAgLy8gQW4gYWRkcmVzcyBhdXRob3Jpc2VkIHRvIHRha2Ugb3duZXJzaGlwCiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKICAgIAogICAgLy8gVGhlIGRlcG9zaXRvIHNtYXJ0IGNvbnRyYWN0IGFkZHJlc3MKICAgIGFkZHJlc3MgcHVibGljIGRlcG9zaXRvOwogICAgCiAgICAvLyBUb3RhbCBldGhlciByYWlzZWQgZHVyaW5nIGZ1bmRpbmcKICAgIHVpbnQgcHVibGljIGV0aGVyUmFpc2VkOwogICAgCiAgICAvLyBQcmVhdXRob3JpemVkIHRyYW5jaCBkaXNjb3VudCBhZGRyZXNzZXMKICAgIC8vIGhvbGRlciA9PiBkaXNjb3VudAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMga3ljQWRkcmVzc2VzOwogICAgCiAgICAvLyBSZWNvcmQgb2YgZXRoZXIgcGFpZCBwZXIgYWRkcmVzcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgZXRoZXJDb250cmlidXRlZDsKCiAgICAvLyBSZXR1cm4gYHRydWVgIGlmIE1JTl9GVU5EUyB3ZXJlIHJhaXNlZAogICAgZnVuY3Rpb24gZnVuZFN1Y2NlZWRlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKTsKICAgIAogICAgLy8gUmV0dXJuIGB0cnVlYCBpZiBNSU5fRlVORFMgd2VyZSBub3QgcmFpc2VkIGJlZm9yZSBFTkRfREFURQogICAgZnVuY3Rpb24gZnVuZEZhaWxlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKTsKCiAgICAvLyBSZXR1cm5zIFVTRCByYWlzZWQgZm9yIHNldCBFVEgvVVNEIHJhdGUKICAgIGZ1bmN0aW9uIHVzZFJhaXNlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgICAvLyBSZXR1cm5zIGFuIGFtb3VudCBpbiBldGggZXF1aXZpbGVudCB0byBVU0QgYXQgdGhlIHNldCByYXRlCiAgICBmdW5jdGlvbiB1c2RUb0V0aCh1aW50KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50KTsKICAgIAogICAgLy8gUmV0dXJucyB0aGUgVVNEIHZhbHVlIG9mIGV0aGVyIGF0IHRoZSBzZXQgVVNEL0VUSCByYXRlCiAgICBmdW5jdGlvbiBldGhUb1VzZCh1aW50IF93ZWkpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgICAvLyBSZXR1cm5zIHRva2VuL2V0aGVyIGNvbnZlcnNpb24gZ2l2ZW4gZXRoZXIgdmFsdWUgYW5kIGFkZHJlc3MuIAogICAgZnVuY3Rpb24gZXRoVG9Ub2tlbnModWludCBfZXRoKQogICAgICAgIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgICAvLyBQcm9jZXNzZXMgYSB0b2tlbiBwdXJjaGFzZSBmb3IgYSBnaXZlbiBhZGRyZXNzCiAgICBmdW5jdGlvbiBwcm94eVB1cmNoYXNlKGFkZHJlc3MgX2FkZHIpIHBheWFibGUgcmV0dXJucyAoYm9vbCk7CgogICAgLy8gT3duZXIgY2FuIG1vdmUgZnVuZHMgb2Ygc3VjY2Vzc2Z1bCBmdW5kIHRvIGZ1bmRXYWxsZXQgCiAgICBmdW5jdGlvbiBmaW5hbGlzZUlDTygpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIAogICAgLy8gUmVnaXN0ZXJzIGEgZGlzY291bnRlZCBhZGRyZXNzCiAgICBmdW5jdGlvbiBhZGRLeWNBZGRyZXNzKGFkZHJlc3MgX2FkZHIsIGJvb2wgX2t5YykKICAgICAgICBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgLy8gUmVmdW5kIG9uIGZhaWxlZCBvciBhYm9ydGVkIHNhbGUgCiAgICBmdW5jdGlvbiByZWZ1bmQoYWRkcmVzcyBfYWRkcikgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIC8vIFRvIGNhbmNlbCB0b2tlbiBzYWxlIHByaW9yIHRvIFNUQVJUX0RBVEUKICAgIGZ1bmN0aW9uIGFib3J0KCkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgCiAgICAvLyBDaGFuZ2UgdGhlIGRlcG9zaXRvIGJhY2tlbmQgY29udHJhY3QgYWRkcmVzcwogICAgZnVuY3Rpb24gY2hhbmdlZGVwb3NpdG8oYWRkcmVzcyBfYWRkcikgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgCiAgICAvLyBGb3Igb3duZXIgdG8gc2FsdmFnZSB0b2tlbnMgc2VudCB0byBjb250cmFjdAogICAgZnVuY3Rpb24gdHJhbnNmZXJBbnlFUkMyMFRva2VuKGFkZHJlc3MgdG9rZW5BZGRyZXNzLCB1aW50IGFtb3VudCkKICAgICAgICByZXR1cm5zIChib29sKTsKfQoKCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cCgogZGVwb3NpdG9mZmVyIHRva2VuIGltcGxpbWVudGF0aW9uCgpcKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKY29udHJhY3QgZGVwb3NpdG9mZmVyVG9rZW4gaXMgCiAgICBSZWVudHJ5UHJvdGVjdGVkLAogICAgRVJDMjBUb2tlbiwKICAgIGRlcG9zaXRvZmZlclRva2VuQWJzdHJhY3QsCiAgICBkZXBvc2l0b2ZmZXJUb2tlbkNvbmZpZwp7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCi8vCi8vIENvbnN0YW50cwovLwoKICAgIC8vIFVTRCB0byBldGhlciBjb252ZXJzaW9uIGZhY3RvcnMgY2FsY3VsYXRlZCBmcm9tIGBkZXBvc2l0b2ZmZXJUb2tlbkNvbmZpZ2AgY29uc3RhbnRzIAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9LRU5TX1BFUl9FVEggPSBUT0tFTlNfUEVSX1VTRCAqIFVTRF9QRVJfRVRIOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTUlOX0VUSF9GVU5EICAgPSAxIGV0aGVyICogTUlOX1VTRF9GVU5EIC8gVVNEX1BFUl9FVEg7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNQVhfRVRIX0ZVTkQgICA9IDEgZXRoZXIgKiBNQVhfVVNEX0ZVTkQgLyBVU0RfUEVSX0VUSDsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEtZQ19FVEhfTE1UICAgID0gMSBldGhlciAqIEtZQ19VU0RfTE1UICAvIFVTRF9QRVJfRVRIOwoKICAgIC8vIEdlbmVyYWwgZnVuZGluZyBvcGVucyBMRUFEX0lOX1BFUklPRCBhZnRlciBkZXBsb3ltZW50ICh0aW1lc3RhbXBzIGNhbid0IGJlIGNvbnN0YW50KQogICAgdWludCBwdWJsaWMgRU5EX0RBVEUgID0gU1RBUlRfREFURSArIEZVTkRJTkdfUEVSSU9EOwoKLy8KLy8gTW9kaWZpZXJzCi8vCgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgovLwovLyBGdW5jdGlvbnMKLy8KCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gZGVwb3NpdG9mZmVyVG9rZW4oKQogICAgewogICAgICAgIC8vIElDTyBwYXJhbWV0ZXJzIGFyZSBzZXQgaW4gZGVwb3NpdG9mZmVyVFNDb25maWcKICAgICAgICAvLyBJbnZhbGlkIGNvbmZpZ3VyYXRpb24gY2F0Y2hpbmcgaGVyZQogICAgICAgIHJlcXVpcmUoYnl0ZXMoc3ltYm9sKS5sZW5ndGggPiAwKTsKICAgICAgICByZXF1aXJlKGJ5dGVzKG5hbWUpLmxlbmd0aCA+IDApOwogICAgICAgIHJlcXVpcmUob3duZXIgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKGZ1bmRXYWxsZXQgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKFRPS0VOU19QRVJfVVNEID4gMCk7CiAgICAgICAgcmVxdWlyZShVU0RfUEVSX0VUSCA+IDApOwogICAgICAgIHJlcXVpcmUoTUlOX1VTRF9GVU5EID4gMCk7CiAgICAgICAgcmVxdWlyZShNQVhfVVNEX0ZVTkQgPiBNSU5fVVNEX0ZVTkQpOwogICAgICAgIHJlcXVpcmUoU1RBUlRfREFURSA+IDApOwogICAgICAgIHJlcXVpcmUoRlVORElOR19QRVJJT0QgPiAwKTsKICAgICAgICAKICAgICAgICAvLyBTZXR1cCBhbmQgYWxsb2NhdGUgdG9rZW4gc3VwcGx5IHRvIDE4IGRlY2ltYWwgcGxhY2VzCiAgICAgICAgdG90YWxTdXBwbHkgPSBNQVhfVE9LRU5TICogMWUxODsKICAgICAgICBiYWxhbmNlc1tmdW5kV2FsbGV0XSA9IHRvdGFsU3VwcGx5OwogICAgICAgIFRyYW5zZmVyKDB4MCwgZnVuZFdhbGxldCwgdG90YWxTdXBwbHkpOwogICAgfQogICAgCiAgICAvLyBEZWZhdWx0IGZ1bmN0aW9uCiAgICBmdW5jdGlvbiAoKQogICAgICAgIHBheWFibGUKICAgIHsKICAgICAgICAvLyBQYXNzIHRocm91Z2ggdG8gcHVyY2hhc2luZyBmdW5jdGlvbi4gV2lsbCB0aHJvdyBvbiBmYWlsZWQgb3IKICAgICAgICAvLyBzdWNjZXNzZnVsIElDTwogICAgICAgIHByb3h5UHVyY2hhc2UobXNnLnNlbmRlcik7CiAgICB9CgovLwovLyBHZXR0ZXJzCi8vCgogICAgLy8gSUNPIGZhaWxzIGlmIGFib3J0ZWQgb3IgbWluaW11bSBmdW5kcyBhcmUgbm90IHJhaXNlZCBieSB0aGUgZW5kIGRhdGUKICAgIGZ1bmN0aW9uIGZ1bmRGYWlsZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gIV9fYWJvcnRGdXNlCiAgICAgICAgICAgIHx8IChub3cgPiBFTkRfREFURSAmJiBldGhlclJhaXNlZCA8IE1JTl9FVEhfRlVORCk7CiAgICB9CiAgICAKICAgIC8vIEZ1bmRpbmcgc3VjY2VlZHMgaWYgbm90IGFib3J0ZWQsIG1pbmltdW0gZnVuZHMgYXJlIHJhaXNlZCBiZWZvcmUgZW5kIGRhdGUKICAgIGZ1bmN0aW9uIGZ1bmRTdWNjZWVkZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gIWZ1bmRGYWlsZWQoKQogICAgICAgICAgICAmJiBldGhlclJhaXNlZCA+PSBNSU5fRVRIX0ZVTkQ7CiAgICB9CgogICAgLy8gUmV0dXJucyB0aGUgVVNEIHZhbHVlIG9mIGV0aGVyIGF0IHRoZSBzZXQgVVNEL0VUSCByYXRlCiAgICBmdW5jdGlvbiBldGhUb1VzZCh1aW50IF93ZWkpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHJldHVybiBVU0RfUEVSX0VUSC5tdWwoX3dlaSkuZGl2KDEgZXRoZXIpOwogICAgfQogICAgCiAgICAvLyBSZXR1cm5zIHRoZSBldGhlciB2YWx1ZSBvZiBVU0QgYXQgdGhlIHNldCBVU0QvRVRIIHJhdGUKICAgIGZ1bmN0aW9uIHVzZFRvRXRoKHVpbnQgX3VzZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIF91c2QubXVsKDEgZXRoZXIpLmRpdihVU0RfUEVSX0VUSCk7CiAgICB9CiAgICAKICAgIC8vIFJldHVybnMgdGhlIFVTRCB2YWx1ZSBvZiBldGhlciByYWlzZWQgYXQgdGhlIHNldCBVU0QvRVRIIHJhdGUKICAgIGZ1bmN0aW9uIHVzZFJhaXNlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHJldHVybiBldGhUb1VzZChldGhlclJhaXNlZCk7CiAgICB9CiAgICAKICAgIC8vIFJldHVybnMgdGhlIG51bWJlciBvZiB0b2tlbnMgZm9yIGdpdmVuIGFtb3VudCBvZiBldGhlciBmb3IgYW4gYWRkcmVzcyAKICAgIGZ1bmN0aW9uIGV0aFRvVG9rZW5zKHVpbnQgX3dlaSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgdWludCB1c2QgPSBldGhUb1VzZChfd2VpKTsKICAgICAgICAKICAgICAgICAvLyBQZXJjZW50IGJvbnVzIGZ1bmRpbmcgdGllcnMgZm9yIFVTRCBmdW5kaW5nCiAgICAgICAgdWludCBib251cyA9IDA7CiAgICAvLyAgICAgICAgdXNkID49IDIwMDAwMDAgPyAzNSA6CiAgICAvLyAgICAgICAgdXNkID49IDUwMDAwMCAgPyAzMCA6CiAgICAvLyAgICAgICAgdXNkID49IDEwMDAwMCAgPyAyMCA6CiAgICAvLyAgICAgICAgdXNkID49IDI1MDAwICAgPyAxNSA6CiAgICAvLyAgICAgICAgdXNkID49IDEwMDAwICAgPyAxMCA6CiAgICAvLyAgICAgICAgdXNkID49IDUwMDAgICAgPyA1ICA6CiAgICAvLyAgICAgICAgdXNkID49IDEwMDAgICAgPyAxICA6ICAgICAgICAgICAgICAgICAgICAKICAgICAgICAKICAgICAgICAvLyB1c2luZyBuLjIgZml4ZWQgcG9pbnQgZGVjaW1hbCBmb3Igd2hvbGUgbnVtYmVyIHBlcmNlbnRhZ2UuCiAgICAgICAgcmV0dXJuIF93ZWkubXVsKFRPS0VOU19QRVJfRVRIKS5tdWwoYm9udXMgKyAxMDApLmRpdigxMDApOwogICAgfQoKLy8KLy8gSUNPIGZ1bmN0aW9ucwovLwoKICAgIC8vIFRoZSBmdW5kcmFpc2luZyBjYW4gYmUgYWJvcnRlZCBhbnkgdGltZSBiZWZvcmUgZnVuZHMgYXJlIHN3ZXB0IHRvIHRoZQogICAgLy8gZnVuZFdhbGxldC4KICAgIC8vIFRoaXMgd2lsbCBmb3JjZSBhIGZhaWwgc3RhdGUgYW5kIGFsbG93IHJlZnVuZHMgdG8gYmUgY29sbGVjdGVkLgogICAgZnVuY3Rpb24gYWJvcnQoKQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIG9ubHlPd25lcgogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZSghaWNvU3VjY2Vzc2Z1bCk7CiAgICAgICAgZGVsZXRlIF9fYWJvcnRGdXNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBHZW5lcmFsIGFkZHJlc3NlcyBjYW4gcHVyY2hhc2UgdG9rZW5zIGR1cmluZyBmdW5kaW5nCiAgICBmdW5jdGlvbiBwcm94eVB1cmNoYXNlKGFkZHJlc3MgX2FkZHIpCiAgICAgICAgcGF5YWJsZQogICAgICAgIG5vUmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZSghZnVuZEZhaWxlZCgpKTsKICAgICAgICByZXF1aXJlKCFpY29TdWNjZXNzZnVsKTsKICAgICAgICByZXF1aXJlKG5vdyA8PSBFTkRfREFURSk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgICAgICAKICAgICAgICAvLyBOb24tS1lDJ2VkIGZ1bmRlcnMgY2FuIG9ubHkgY29udHJpYnV0ZSB1cCB0byAkMTAwMDAgYWZ0ZXIgcHJlZnVuZCBwZXJpb2QKICAgICAgICBpZigha3ljQWRkcmVzc2VzW19hZGRyXSkKICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmUobm93ID49IFNUQVJUX0RBVEUpOwogICAgICAgICAgICByZXF1aXJlKChldGhlckNvbnRyaWJ1dGVkW19hZGRyXS5hZGQobXNnLnZhbHVlKSkgPD0gS1lDX0VUSF9MTVQpOwogICAgICAgIH0KCiAgICAgICAgLy8gR2V0IGV0aGVyIHRvIHRva2VuIGNvbnZlcnNpb24KICAgICAgICB1aW50IHRva2VucyA9IGV0aFRvVG9rZW5zKG1zZy52YWx1ZSk7CiAgICAgICAgCiAgICAgICAgLy8gdHJhbnNmZXIgdG9rZW5zIGZyb20gZnVuZCB3YWxsZXQKICAgICAgICAKICAgICAgICB4ZmVyKGZ1bmRXYWxsZXQsIF9hZGRyLCB0b2tlbnMpOwogICAgICAgIAogICAgICAgIC8vIFVwZGF0ZSBob2xkZXIgcGF5bWVudHMKICAgICAgICBldGhlckNvbnRyaWJ1dGVkW19hZGRyXSA9IGV0aGVyQ29udHJpYnV0ZWRbX2FkZHJdLmFkZChtc2cudmFsdWUpOwogICAgICAgIAogICAgICAgIC8vIFVwZGF0ZSBmdW5kcyByYWlzZWQKICAgICAgICBldGhlclJhaXNlZCA9IGV0aGVyUmFpc2VkLmFkZChtc2cudmFsdWUpOwogICAgICAgIAogICAgICAgIC8vIEJhaWwgaWYgdGhpcyBwdXNoZXMgdGhlIGZ1bmQgb3ZlciB0aGUgVVNEIGNhcCBvciBUb2tlbiBjYXAKICAgICAgICByZXF1aXJlKGV0aGVyUmFpc2VkIDw9IE1BWF9FVEhfRlVORCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBPd25lciBjYW4gS1lDIChvciByZXZva2UpIGFkZHJlc3NlcyB1bnRpbCBjbG9zZSBvZiBmdW5kaW5nCiAgICBmdW5jdGlvbiBhZGRLeWNBZGRyZXNzKGFkZHJlc3MgX2FkZHIsIGJvb2wgX2t5YykKICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIG9ubHlPd25lcgogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICByZXF1aXJlKCFmdW5kRmFpbGVkKCkpOwoKICAgICAgICBreWNBZGRyZXNzZXNbX2FkZHJdID0gX2t5YzsKICAgICAgICBLWUNBZGRyZXNzKF9hZGRyLCBfa3ljKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIE93bmVyIGNhbiBzd2VlcCBhIHN1Y2Nlc3NmdWwgZnVuZGluZyB0byB0aGUgZnVuZFdhbGxldAogICAgLy8gQ29udHJhY3QgY2FuIGJlIGFib3J0ZWQgdXAgdW50aWwgdGhpcyBhY3Rpb24uCiAgICAvLyBFZmZlY3RpdmUgb25jZSBidXQgY2FuIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lIHRvIHdpdGhkcmF3IGVkZ2UgY2FzZQogICAgLy8gZnVuZHMgcmVjaWV2ZWQgYnkgY29udHJhY3Qgd2hpY2ggY2FuIHNlbGZkZXN0cnVjdCB0byB0aGlzIGFkZHJlc3MKIAogICAgCiAgICBmdW5jdGlvbiBmaW5hbGlzZUlDTygpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICAgICAgcHJldmVudFJlZW50cnkoKQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShmdW5kU3VjY2VlZGVkKCkpOwoKICAgICAgICBpY29TdWNjZXNzZnVsID0gdHJ1ZTsKCiAgICAgICAgRnVuZHNUcmFuc2ZlcnJlZChmdW5kV2FsbGV0LCB0aGlzLmJhbGFuY2UpOwogICAgICAgIGZ1bmRXYWxsZXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gUmVmdW5kcyBjYW4gYmUgY2xhaW1lZCBmcm9tIGEgZmFpbGVkIElDTwogICAgZnVuY3Rpb24gcmVmdW5kKGFkZHJlc3MgX2FkZHIpCiAgICAgICAgcHVibGljCiAgICAgICAgcHJldmVudFJlZW50cnkoKQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShmdW5kRmFpbGVkKCkpOwogICAgICAgIAogICAgICAgIHVpbnQgdmFsdWUgPSBldGhlckNvbnRyaWJ1dGVkW19hZGRyXTsKCiAgICAgICAgLy8gVHJhbnNmZXIgdG9rZW5zIGJhY2sgdG8gb3JpZ2luCiAgICAgICAgLy8gKE5vdCByZWFsbHkgbmVjZXNzYXJ5IGJ1dCBsb29raW5nIGZvciBncmFjZWZ1bCBleGl0KQogICAgICAgIHhmZXIoX2FkZHIsIGZ1bmRXYWxsZXQsIGJhbGFuY2VzW19hZGRyXSk7CgogICAgICAgIC8vIGdhcmJhZ2UgY29sbGVjdAogICAgICAgIGRlbGV0ZSBldGhlckNvbnRyaWJ1dGVkW19hZGRyXTsKICAgICAgICBkZWxldGUga3ljQWRkcmVzc2VzW19hZGRyXTsKICAgICAgICAKICAgICAgICBSZWZ1bmRlZChfYWRkciwgdmFsdWUpOwogICAgICAgIGlmICh2YWx1ZSA+IDApIHsKICAgICAgICAgICAgX2FkZHIudHJhbnNmZXIodmFsdWUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCi8vCi8vIEVSQzIwIG92ZXJsb2FkZWQgZnVuY3Rpb25zCi8vCgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICBwcmV2ZW50UmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgLy8gSUNPIG11c3QgYmUgc3VjY2Vzc2Z1bAogICAgICAgIHJlcXVpcmUoaWNvU3VjY2Vzc2Z1bCk7CiAgICAgICAgc3VwZXIudHJhbnNmZXIoX3RvLCBfYW1vdW50KTsKCiAgICAgICAgaWYgKF90byA9PSBkZXBvc2l0bykKICAgICAgICAgICAgLy8gTm90aWZ5IHRoZSBkZXBvc2l0byBjb250cmFjdCBpdCBoYXMgYmVlbiBzZW50IHRva2VucwogICAgICAgICAgICByZXF1aXJlKE5vdGlmeShkZXBvc2l0bykubm90aWZ5KG1zZy5zZW5kZXIsIF9hbW91bnQpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICBwcmV2ZW50UmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgLy8gSUNPIG11c3QgYmUgc3VjY2Vzc2Z1bAogICAgICAgIHJlcXVpcmUoaWNvU3VjY2Vzc2Z1bCk7CiAgICAgICAgc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF9hbW91bnQpOwoKICAgICAgICBpZiAoX3RvID09IGRlcG9zaXRvKQogICAgICAgICAgICAvLyBOb3RpZnkgdGhlIGRlcG9zaXRvIGNvbnRyYWN0IGl0IGhhcyBiZWVuIHNlbnQgdG9rZW5zCiAgICAgICAgICAgIHJlcXVpcmUoTm90aWZ5KGRlcG9zaXRvKS5ub3RpZnkobXNnLnNlbmRlciwgX2Ftb3VudCkpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICBub1JlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIC8vIElDTyBtdXN0IGJlIHN1Y2Nlc3NmdWwKICAgICAgICByZXF1aXJlKGljb1N1Y2Nlc3NmdWwpOwogICAgICAgIHN1cGVyLmFwcHJvdmUoX3NwZW5kZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKLy8KLy8gQ29udHJhY3QgbWFuYWdtZW50IGZ1bmN0aW9ucwovLwoKICAgIC8vIFRvIGluaXRpYXRlIGFuIG93bmVyc2hpcCBjaGFuZ2UKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX25ld093bmVyKQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIG9ubHlPd25lcgogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgQ2hhbmdlT3duZXJUbyhfbmV3T3duZXIpOwogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIFRvIGFjY2VwdCBvd25lcnNoaXAuIFJlcXVpcmVkIHRvIHByb3ZlIG5ldyBhZGRyZXNzIGNhbiBjYWxsIHRoZSBjb250cmFjdC4KICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpCiAgICAgICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpOwogICAgICAgIENoYW5nZWRPd25lcihvd25lciwgbmV3T3duZXIpOwogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gQ2hhbmdlIHRoZSBhZGRyZXNzIG9mIHRoZSBkZXBvc2l0byBjb250cmFjdCBhZGRyZXNzLiBUaGUgY29udHJhY3QKICAgIC8vIG11c3QgaW1wbGltZW50IHRoZSBgTm90aWZ5YCBpbnRlcmZhY2UuCiAgICBmdW5jdGlvbiBjaGFuZ2VkZXBvc2l0byhhZGRyZXNzIF9hZGRyKQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIG9ubHlPd25lcgogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgZGVwb3NpdG8gPSBfYWRkcjsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gVGhlIGNvbnRyYWN0IGNhbiBiZSBzZWxmZGVzdHJ1Y3RlZCBhZnRlciBhYm9ydCBhbmQgZXRoZXIgYmFsYW5jZSBpcyAwLgogICAgZnVuY3Rpb24gZGVzdHJveSgpCiAgICAgICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgb25seU93bmVyCiAgICB7CiAgICAgICAgcmVxdWlyZSghX19hYm9ydEZ1c2UpOwogICAgICAgIHJlcXVpcmUodGhpcy5iYWxhbmNlID09IDApOwogICAgICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgICB9CiAgICAKICAgIC8vIE93bmVyIGNhbiBzYWx2YWdlIEFOWVRZUEUgRVJDMjAgdG9rZW5zIHRoYXQgbWF5IGhhdmUgYmVlbiBzZW50IHRvIHRoZSBhY2NvdW50IGJ5IGFjY2lkZW50IAogICAgZnVuY3Rpb24gdHJhbnNmZXJBbnlFUkMyMFRva2VuKGFkZHJlc3MgdG9rZW5BZGRyZXNzLCB1aW50IGFtb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgICAgICBwcmV2ZW50UmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpIAogICAgewogICAgICAgIHJlcXVpcmUoRVJDMjBUb2tlbih0b2tlbkFkZHJlc3MpLnRyYW5zZmVyKG93bmVyLCBhbW91bnQpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKCmludGVyZmFjZSBOb3RpZnkKewogICAgZXZlbnQgTm90aWZpZWQoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCB1aW50IGluZGV4ZWQgX2Ftb3VudCk7CiAgICAKICAgIGZ1bmN0aW9uIG5vdGlmeShhZGRyZXNzIF9mcm9tLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKTsKfQoKCmNvbnRyYWN0IGRlcG9zaXRvVGVzdCBpcyBOb3RpZnkKewogICAgYWRkcmVzcyBwdWJsaWMgZG90OwogICAgCiAgICBmdW5jdGlvbiBzZXRkb3QoYWRkcmVzcyBfYWRkcikgeyBkb3QgPSBfYWRkcjsgfQogICAgCiAgICBmdW5jdGlvbiBub3RpZnkoYWRkcmVzcyBfZnJvbSwgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZG90KTsKICAgICAgICBOb3RpZmllZChfZnJvbSwgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0='.
	

]
