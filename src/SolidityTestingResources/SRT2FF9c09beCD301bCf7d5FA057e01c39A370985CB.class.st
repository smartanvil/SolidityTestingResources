Class {
	#name : #SRT2FF9c09beCD301bCf7d5FA057e01c39A370985CB,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2FF9c09beCD301bCf7d5FA057e01c39A370985CB >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9tYXRoL1NhZmVNYXRoLnNvbAoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogIC8qKgogICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgKi8KICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBTdWJzdHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgKi8KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICAvKioKICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8vIEtwb3BJdGVtIGlzIGEgRVJDLTcyMSB0b2tlbiAoaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL2VpcHMvaXNzdWVzLzcyMSkKLy8gRWFjaCBLcG9wSXRlbSBoYXMgaXRzIGNvbm5lY3RlZCBLcG9wVG9rZW4gY2VsZWJyaXR5IGNhcmQKLy8gS3BvcC5pbyBpcyB0aGUgb2ZmaWNpYWwgd2Vic2l0ZQoKY29udHJhY3QgRVJDNzIxIHsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50IGJhbGFuY2UpOwogIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBvd25lck9mKHVpbnQgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgYWRkcik7CiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50IHRvdGFsKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdG9rZW5JZCkgcHVibGljOwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHRva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIGFwcHJvdmVkLCB1aW50IHRva2VuSWQpOwp9Cgpjb250cmFjdCBLcG9wVG9rZW4gaXMgRVJDNzIxIHsKICBhZGRyZXNzIHB1YmxpYyBhdXRob3I7CiAgYWRkcmVzcyBwdWJsaWMgY29hdXRob3I7CgogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgTkFNRSA9ICJLcG9waW8iOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1lNQk9MID0gIktwb3BUb2tlbiI7CgogIHVpbnQgcHVibGljIEdST1dUSF9CVU1QID0gMC4xIGV0aGVyOwogIHVpbnQgcHVibGljIE1JTl9TVEFSVElOR19QUklDRSA9IDAuMDAyIGV0aGVyOwogIHVpbnQgcHVibGljIFBSSUNFX0lOQ1JFQVNFX1NDQUxFID0gMTIwOyAvLyAxMjAlIG9mIHByZXZpb3VzIHByaWNlCgogIHN0cnVjdCBDZWxlYiB7CiAgICBzdHJpbmcgbmFtZTsKICB9CgogIENlbGViW10gcHVibGljIGNlbGViczsKCiAgbWFwcGluZyh1aW50ID0+IGFkZHJlc3MpIHB1YmxpYyB0b2tlbklkVG9Pd25lcjsKICBtYXBwaW5nKHVpbnQgPT4gdWludCkgcHVibGljIHRva2VuSWRUb1ByaWNlOyAvLyBpbiB3ZWkKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIHVzZXJUb051bUNlbGViczsKICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgcHVibGljIHRva2VuSWRUb0FwcHJvdmVkUmVjaXBpZW50OwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHRva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIGFwcHJvdmVkLCB1aW50IHRva2VuSWQpOwogIGV2ZW50IENlbGViU29sZCh1aW50IHRva2VuSWQsIHVpbnQgb2xkUHJpY2UsIHVpbnQgbmV3UHJpY2UsIHN0cmluZyBjZWxlYk5hbWUsIGFkZHJlc3MgcHJldk93bmVyLCBhZGRyZXNzIG5ld093bmVyKTsKCiAgZnVuY3Rpb24gS3BvcFRva2VuKCkgcHVibGljIHsKICAgIGF1dGhvciA9IG1zZy5zZW5kZXI7CiAgICBjb2F1dGhvciA9IG1zZy5zZW5kZXI7CiAgfQoKICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3Rva2VuSWQpIHByaXZhdGUgewogICAgcmVxdWlyZShvd25lck9mKF90b2tlbklkKSA9PSBfZnJvbSk7CiAgICByZXF1aXJlKCFpc051bGxBZGRyZXNzKF90bykpOwogICAgcmVxdWlyZShiYWxhbmNlT2YoX2Zyb20pID4gMCk7CgogICAgdWludCBwcmV2QmFsYW5jZXMgPSBiYWxhbmNlT2YoX2Zyb20pICsgYmFsYW5jZU9mKF90byk7CiAgICB0b2tlbklkVG9Pd25lcltfdG9rZW5JZF0gPSBfdG87CiAgICB1c2VyVG9OdW1DZWxlYnNbX2Zyb21dLS07CiAgICB1c2VyVG9OdW1DZWxlYnNbX3RvXSsrOwoKICAgIC8vIENsZWFyIG91dHN0YW5kaW5nIGFwcHJvdmFscwogICAgZGVsZXRlIHRva2VuSWRUb0FwcHJvdmVkUmVjaXBpZW50W190b2tlbklkXTsKCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CgogICAgYXNzZXJ0KGJhbGFuY2VPZihfZnJvbSkgKyBiYWxhbmNlT2YoX3RvKSA9PSBwcmV2QmFsYW5jZXMpOwogIH0KCiAgZnVuY3Rpb24gYnV5KHVpbnQgX3Rva2VuSWQpIHBheWFibGUgcHVibGljIHsKICAgIGFkZHJlc3MgcHJldk93bmVyID0gb3duZXJPZihfdG9rZW5JZCk7CiAgICB1aW50IGN1cnJlbnRQcmljZSA9IHRva2VuSWRUb1ByaWNlW190b2tlbklkXTsKCiAgICByZXF1aXJlKHByZXZPd25lciAhPSBtc2cuc2VuZGVyKTsKICAgIHJlcXVpcmUoIWlzTnVsbEFkZHJlc3MobXNnLnNlbmRlcikpOwogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gY3VycmVudFByaWNlKTsKCiAgICAvLyBUYWtlIGEgY3V0IG9mZiB0aGUgcGF5bWVudAogICAgdWludCBwYXltZW50ID0gdWludChTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGN1cnJlbnRQcmljZSwgOTIpLCAxMDApKTsKICAgIHVpbnQgbGVmdG92ZXIgPSBTYWZlTWF0aC5zdWIobXNnLnZhbHVlLCBjdXJyZW50UHJpY2UpOwogICAgdWludCBuZXdQcmljZTsKCiAgICBfdHJhbnNmZXIocHJldk93bmVyLCBtc2cuc2VuZGVyLCBfdG9rZW5JZCk7CgogICAgaWYgKGN1cnJlbnRQcmljZSA8IEdST1dUSF9CVU1QKSB7CiAgICAgIG5ld1ByaWNlID0gU2FmZU1hdGgubXVsKGN1cnJlbnRQcmljZSwgMik7CiAgICB9IGVsc2UgewogICAgICBuZXdQcmljZSA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoY3VycmVudFByaWNlLCBQUklDRV9JTkNSRUFTRV9TQ0FMRSksIDEwMCk7CiAgICB9CgogICAgdG9rZW5JZFRvUHJpY2VbX3Rva2VuSWRdID0gbmV3UHJpY2U7CgogICAgaWYgKHByZXZPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgIHByZXZPd25lci50cmFuc2ZlcihwYXltZW50KTsKICAgIH0KCiAgICBDZWxlYlNvbGQoX3Rva2VuSWQsIGN1cnJlbnRQcmljZSwgbmV3UHJpY2UsCiAgICAgIGNlbGVic1tfdG9rZW5JZF0ubmFtZSwgcHJldk93bmVyLCBtc2cuc2VuZGVyKTsKCiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGxlZnRvdmVyKTsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICByZXR1cm4gdXNlclRvTnVtQ2VsZWJzW19vd25lcl07CiAgfQoKICBmdW5jdGlvbiBvd25lck9mKHVpbnQgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgYWRkcikgewogICAgcmV0dXJuIHRva2VuSWRUb093bmVyW190b2tlbklkXTsKICB9CgogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCB0b3RhbCkgewogICAgcmV0dXJuIGNlbGVicy5sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdG9rZW5JZCkgcHVibGljIHsKICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICB9CgogIC8qKiBTVEFSVCBGVU5DVElPTlMgRk9SIEFVVEhPUlMgKiovCgogIGZ1bmN0aW9uIGNyZWF0ZUNlbGViKHN0cmluZyBfbmFtZSwgdWludCBfcHJpY2UpIHB1YmxpYyBvbmx5QXV0aG9ycyB7CiAgICByZXF1aXJlKF9wcmljZSA+PSBNSU5fU1RBUlRJTkdfUFJJQ0UpOwoKICAgIHVpbnQgdG9rZW5JZCA9IGNlbGVicy5wdXNoKENlbGViKF9uYW1lKSkgLSAxOwogICAgdG9rZW5JZFRvT3duZXJbdG9rZW5JZF0gPSBhdXRob3I7CiAgICB0b2tlbklkVG9QcmljZVt0b2tlbklkXSA9IF9wcmljZTsKICAgIHVzZXJUb051bUNlbGVic1thdXRob3JdKys7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50IF9hbW91bnQsIGFkZHJlc3MgX3RvKSBwdWJsaWMgb25seUF1dGhvcnMgewogICAgcmVxdWlyZSghaXNOdWxsQWRkcmVzcyhfdG8pKTsKICAgIHJlcXVpcmUoX2Ftb3VudCA8PSB0aGlzLmJhbGFuY2UpOwoKICAgIF90by50cmFuc2ZlcihfYW1vdW50KTsKICB9CgogIGZ1bmN0aW9uIHdpdGhkcmF3QWxsKCkgcHVibGljIG9ubHlBdXRob3JzIHsKICAgIHJlcXVpcmUoYXV0aG9yICE9IDB4MCk7CiAgICByZXF1aXJlKGNvYXV0aG9yICE9IDB4MCk7CgogICAgdWludCBoYWxmQmFsYW5jZSA9IHVpbnQoU2FmZU1hdGguZGl2KHRoaXMuYmFsYW5jZSwgMikpOwoKICAgIGF1dGhvci50cmFuc2ZlcihoYWxmQmFsYW5jZSk7CiAgICBjb2F1dGhvci50cmFuc2ZlcihoYWxmQmFsYW5jZSk7CiAgfQoKICBmdW5jdGlvbiBzZXRDb0F1dGhvcihhZGRyZXNzIF9jb2F1dGhvcikgcHVibGljIG9ubHlBdXRob3IgewogICAgcmVxdWlyZSghaXNOdWxsQWRkcmVzcyhfY29hdXRob3IpKTsKCiAgICBjb2F1dGhvciA9IF9jb2F1dGhvcjsKICB9CgogIC8qKiBFTkQgRlVOQ1RJT05TIEZPUiBBVVRIT1JTICoqLwoKICBmdW5jdGlvbiBnZXRDZWxlYih1aW50IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICgKICAgIHN0cmluZyBuYW1lLAogICAgdWludCBwcmljZSwKICAgIGFkZHJlc3Mgb3duZXIKICApIHsKICAgIG5hbWUgPSBjZWxlYnNbX3Rva2VuSWRdLm5hbWU7CiAgICBwcmljZSA9IHRva2VuSWRUb1ByaWNlW190b2tlbklkXTsKICAgIG93bmVyID0gdG9rZW5JZFRvT3duZXJbX3Rva2VuSWRdOwogIH0KCiAgLyoqIFNUQVJUIEZVTkNUSU9OUyBSRUxBVEVEIFRPIEVYVEVSTkFMIENPTlRSQUNUIElOVEVSQUNUSU9OUyAqKi8KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludCBfdG9rZW5JZCkgcHVibGljIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lck9mKF90b2tlbklkKSk7CgogICAgdG9rZW5JZFRvQXBwcm92ZWRSZWNpcGllbnRbX3Rva2VuSWRdID0gX3RvOwoKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF90b2tlbklkKSBwdWJsaWMgewogICAgcmVxdWlyZShvd25lck9mKF90b2tlbklkKSA9PSBfZnJvbSk7CiAgICByZXF1aXJlKGlzQXBwcm92ZWQoX3RvLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZSghaXNOdWxsQWRkcmVzcyhfdG8pKTsKCiAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50IF90b2tlbklkKSBwdWJsaWMgewogICAgcmVxdWlyZSghaXNOdWxsQWRkcmVzcyhtc2cuc2VuZGVyKSk7CiAgICByZXF1aXJlKGlzQXBwcm92ZWQobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKCiAgICBhZGRyZXNzIGN1cnJlbnRPd25lciA9IHRva2VuSWRUb093bmVyW190b2tlbklkXTsKCiAgICBfdHJhbnNmZXIoY3VycmVudE93bmVyLCBtc2cuc2VuZGVyLCBfdG9rZW5JZCk7CiAgfQoKICAvKiogRU5EIEZVTkNUSU9OUyBSRUxBVEVEIFRPIEVYVEVSTkFMIENPTlRSQUNUIElOVEVSQUNUSU9OUyAqKi8KCiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqIE1PRElGSUVSUyAqKi8KCiAgbW9kaWZpZXIgb25seUF1dGhvcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhdXRob3IpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIG9ubHlBdXRob3JzKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGF1dGhvciB8fCBtc2cuc2VuZGVyID09IGNvYXV0aG9yKTsKICAgIF87CiAgfQoKICAvKiogRlVOQ1RJT05TIFRIQVQgV09OVCBCRSBVU0VEIEZSRVFVRU5UTFkgKiovCgogIGZ1bmN0aW9uIHNldE1pblN0YXJ0aW5nUHJpY2UodWludCBfcHJpY2UpIHB1YmxpYyBvbmx5QXV0aG9ycyB7CiAgICBNSU5fU1RBUlRJTkdfUFJJQ0UgPSBfcHJpY2U7CiAgfQoKICBmdW5jdGlvbiBzZXRHcm93dGhCdW1wKHVpbnQgX2J1bXApIHB1YmxpYyBvbmx5QXV0aG9ycyB7CiAgICBHUk9XVEhfQlVNUCA9IF9idW1wOwogIH0KCiAgZnVuY3Rpb24gc2V0UHJpY2VJbmNyZWFzZVNjYWxlKHVpbnQgX3NjYWxlKSBwdWJsaWMgb25seUF1dGhvcnMgewogICAgUFJJQ0VfSU5DUkVBU0VfU0NBTEUgPSBfc2NhbGU7CiAgfQoKICAvKiogUFJJVkFURSBGVU5DVElPTlMgKiovCgogIGZ1bmN0aW9uIGlzQXBwcm92ZWQoYWRkcmVzcyBfdG8sIHVpbnQgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gdG9rZW5JZFRvQXBwcm92ZWRSZWNpcGllbnRbX3Rva2VuSWRdID09IF90bzsKICB9CgogIGZ1bmN0aW9uIGlzTnVsbEFkZHJlc3MoYWRkcmVzcyBfYWRkcikgcHJpdmF0ZSBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBfYWRkciA9PSAweDA7CiAgfQp9Cgpjb250cmFjdCBLcG9wSXRlbSBpcyBFUkM3MjEgewogIGFkZHJlc3MgcHVibGljIGF1dGhvcjsKICBhZGRyZXNzIHB1YmxpYyBjb2F1dGhvcjsKICBhZGRyZXNzIHB1YmxpYyBtYW51ZmFjdHVyZXI7CgogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgTkFNRSA9ICJLcG9wSXRlbSI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBTWU1CT0wgPSAiS3BvcEl0ZW0iOwoKICB1aW50IHB1YmxpYyBHUk9XVEhfQlVNUCA9IDAuMSBldGhlcjsKICB1aW50IHB1YmxpYyBNSU5fU1RBUlRJTkdfUFJJQ0UgPSAwLjAwMiBldGhlcjsKICB1aW50IHB1YmxpYyBQUklDRV9JTkNSRUFTRV9TQ0FMRSA9IDEyMDsgLy8gMTIwJSBvZiBwcmV2aW91cyBwcmljZQogIHVpbnQgcHVibGljIERJVklERU5EID0gMzsKICBhZGRyZXNzIHB1YmxpYyBLUE9QSU9fQ09OVFJBQ1RfQUREUkVTUyA9IDB4QjJlRTRBQ2Y0NGIxMmY4NTg4NUYyMzQ5NEE3MzkzNTc1NzVhMTc2MDsKCiAgc3RydWN0IEl0ZW0gewogICAgc3RyaW5nIG5hbWU7CiAgICB1aW50WzZdIHRyYWl0czsKICB9CgogIEl0ZW1bXSBwdWJsaWMgaXRlbXM7CgogIG1hcHBpbmcodWludCA9PiBhZGRyZXNzKSBwdWJsaWMgdG9rZW5JZFRvT3duZXI7CiAgbWFwcGluZyh1aW50ID0+IHVpbnQpIHB1YmxpYyB0b2tlbklkVG9DZWxlYklkOyAvLyBjZWxlYiBmcm9tIEtwb3BJTwogIG1hcHBpbmcodWludCA9PiB1aW50KSBwdWJsaWMgdG9rZW5JZFRvUHJpY2U7IC8vIGluIHdlaQogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgdXNlclRvTnVtSXRlbXM7CiAgbWFwcGluZyh1aW50ID0+IGFkZHJlc3MpIHB1YmxpYyB0b2tlbklkVG9BcHByb3ZlZFJlY2lwaWVudDsKCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB0b2tlbklkKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBhcHByb3ZlZCwgdWludCB0b2tlbklkKTsKICBldmVudCBJdGVtU29sZCh1aW50IHRva2VuSWQsIHVpbnQgb2xkUHJpY2UsIHVpbnQgbmV3UHJpY2UsIHN0cmluZyBjZWxlYk5hbWUsIGFkZHJlc3MgcHJldk93bmVyLCBhZGRyZXNzIG5ld093bmVyKTsKCiAgZnVuY3Rpb24gS3BvcEl0ZW0oKSBwdWJsaWMgewogICAgYXV0aG9yID0gbXNnLnNlbmRlcjsKICAgIGNvYXV0aG9yID0gbXNnLnNlbmRlcjsKICB9CgogIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICByZXF1aXJlKG93bmVyT2YoX3Rva2VuSWQpID09IF9mcm9tKTsKICAgIHJlcXVpcmUoIWlzTnVsbEFkZHJlc3MoX3RvKSk7CiAgICByZXF1aXJlKGJhbGFuY2VPZihfZnJvbSkgPiAwKTsKCiAgICB1aW50IHByZXZCYWxhbmNlcyA9IGJhbGFuY2VPZihfZnJvbSkgKyBiYWxhbmNlT2YoX3RvKTsKICAgIHRva2VuSWRUb093bmVyW190b2tlbklkXSA9IF90bzsKICAgIHVzZXJUb051bUl0ZW1zW19mcm9tXS0tOwogICAgdXNlclRvTnVtSXRlbXNbX3RvXSsrOwoKICAgIGRlbGV0ZSB0b2tlbklkVG9BcHByb3ZlZFJlY2lwaWVudFtfdG9rZW5JZF07CgogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogICAgCiAgICBhc3NlcnQoYmFsYW5jZU9mKF9mcm9tKSArIGJhbGFuY2VPZihfdG8pID09IHByZXZCYWxhbmNlcyk7CiAgfQoKICBmdW5jdGlvbiBidXkodWludCBfdG9rZW5JZCkgcGF5YWJsZSBwdWJsaWMgewogICAgYWRkcmVzcyBwcmV2T3duZXIgPSBvd25lck9mKF90b2tlbklkKTsKICAgIHVpbnQgY3VycmVudFByaWNlID0gdG9rZW5JZFRvUHJpY2VbX3Rva2VuSWRdOwoKICAgIHJlcXVpcmUocHJldk93bmVyICE9IG1zZy5zZW5kZXIpOwogICAgcmVxdWlyZSghaXNOdWxsQWRkcmVzcyhtc2cuc2VuZGVyKSk7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBjdXJyZW50UHJpY2UpOwoKICAgIC8vIFNldCBkaXZpZGVuZAogICAgdWludCBkaXZpZGVuZCA9IHVpbnQoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChjdXJyZW50UHJpY2UsIERJVklERU5EKSwgMTAwKSk7CgogICAgLy8gVGFrZSBhIGN1dAogICAgdWludCBwYXltZW50ID0gdWludChTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGN1cnJlbnRQcmljZSwgOTApLCAxMDApKTsKCiAgICB1aW50IGxlZnRvdmVyID0gU2FmZU1hdGguc3ViKG1zZy52YWx1ZSwgY3VycmVudFByaWNlKTsKICAgIHVpbnQgbmV3UHJpY2U7CgogICAgX3RyYW5zZmVyKHByZXZPd25lciwgbXNnLnNlbmRlciwgX3Rva2VuSWQpOwoKICAgIGlmIChjdXJyZW50UHJpY2UgPCBHUk9XVEhfQlVNUCkgewogICAgICBuZXdQcmljZSA9IFNhZmVNYXRoLm11bChjdXJyZW50UHJpY2UsIDIpOwogICAgfSBlbHNlIHsKICAgICAgbmV3UHJpY2UgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGN1cnJlbnRQcmljZSwgUFJJQ0VfSU5DUkVBU0VfU0NBTEUpLCAxMDApOwogICAgfQoKICAgIHRva2VuSWRUb1ByaWNlW190b2tlbklkXSA9IG5ld1ByaWNlOwoKICAgIC8vIFBheSB0aGUgcHJldiBvd25lciBvZiB0aGUgaXRlbQogICAgaWYgKHByZXZPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgIHByZXZPd25lci50cmFuc2ZlcihwYXltZW50KTsKICAgIH0KCiAgICAvLyBQYXkgZGl2aWRlbmQgdG8gdGhlIGN1cnJlbnQgb3duZXIgb2YgdGhlIGNlbGViIHRoYXQncyBjb25uZWN0ZWQgdG8gdGhlIGl0ZW0KICAgIHVpbnQgY2VsZWJJZCA9IGNlbGViT2YoX3Rva2VuSWQpOwogICAgS3BvcFRva2VuIEtQT1BJTyA9IEtwb3BUb2tlbihLUE9QSU9fQ09OVFJBQ1RfQUREUkVTUyk7CiAgICBhZGRyZXNzIGNlbGViT3duZXIgPSBLUE9QSU8ub3duZXJPZihjZWxlYklkKTsKICAgIGlmIChjZWxlYk93bmVyICE9IGFkZHJlc3ModGhpcykgJiYgIWlzTnVsbEFkZHJlc3MoY2VsZWJPd25lcikpIHsKICAgICAgY2VsZWJPd25lci50cmFuc2ZlcihkaXZpZGVuZCk7CiAgICB9CgogICAgSXRlbVNvbGQoX3Rva2VuSWQsIGN1cnJlbnRQcmljZSwgbmV3UHJpY2UsCiAgICAgIGl0ZW1zW190b2tlbklkXS5uYW1lLCBwcmV2T3duZXIsIG1zZy5zZW5kZXIpOwoKICAgIG1zZy5zZW5kZXIudHJhbnNmZXIobGVmdG92ZXIpOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgIHJldHVybiB1c2VyVG9OdW1JdGVtc1tfb3duZXJdOwogIH0KCiAgZnVuY3Rpb24gb3duZXJPZih1aW50IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIGFkZHIpIHsKICAgIHJldHVybiB0b2tlbklkVG9Pd25lcltfdG9rZW5JZF07CiAgfQoKICBmdW5jdGlvbiBjZWxlYk9mKHVpbnQgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQgY2VsZWJJZCkgewogICAgcmV0dXJuIHRva2VuSWRUb0NlbGViSWRbX3Rva2VuSWRdOwogIH0KCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50IHRvdGFsKSB7CiAgICByZXR1cm4gaXRlbXMubGVuZ3RoOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3Rva2VuSWQpIHB1YmxpYyB7CiAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKiogU1RBUlQgRlVOQ1RJT05TIEZPUiBBVVRIT1JTICoqLwoKICBmdW5jdGlvbiBjcmVhdGVJdGVtKHN0cmluZyBfbmFtZSwgdWludCBfcHJpY2UsIHVpbnQgX2NlbGViSWQsIHVpbnRbNl0gX3RyYWl0cykgcHVibGljIG9ubHlNYW51ZmFjdHVyZXIgewogICAgcmVxdWlyZShfcHJpY2UgPj0gTUlOX1NUQVJUSU5HX1BSSUNFKTsKCiAgICB1aW50IHRva2VuSWQgPSBpdGVtcy5wdXNoKEl0ZW0oe25hbWU6IF9uYW1lLCB0cmFpdHM6X3RyYWl0c30pKSAtIDE7CiAgICB0b2tlbklkVG9Pd25lclt0b2tlbklkXSA9IGF1dGhvcjsKICAgIHRva2VuSWRUb1ByaWNlW3Rva2VuSWRdID0gX3ByaWNlOwogICAgdG9rZW5JZFRvQ2VsZWJJZFt0b2tlbklkXSA9IF9jZWxlYklkOwogICAgdXNlclRvTnVtSXRlbXNbYXV0aG9yXSsrOwogIH0KCiAgZnVuY3Rpb24gd2l0aGRyYXcodWludCBfYW1vdW50LCBhZGRyZXNzIF90bykgcHVibGljIG9ubHlBdXRob3JzIHsKICAgIHJlcXVpcmUoIWlzTnVsbEFkZHJlc3MoX3RvKSk7CiAgICByZXF1aXJlKF9hbW91bnQgPD0gdGhpcy5iYWxhbmNlKTsKCiAgICBfdG8udHJhbnNmZXIoX2Ftb3VudCk7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhd0FsbCgpIHB1YmxpYyBvbmx5QXV0aG9ycyB7CiAgICByZXF1aXJlKGF1dGhvciAhPSAweDApOwogICAgcmVxdWlyZShjb2F1dGhvciAhPSAweDApOwoKICAgIHVpbnQgaGFsZkJhbGFuY2UgPSB1aW50KFNhZmVNYXRoLmRpdih0aGlzLmJhbGFuY2UsIDIpKTsKCiAgICBhdXRob3IudHJhbnNmZXIoaGFsZkJhbGFuY2UpOwogICAgY29hdXRob3IudHJhbnNmZXIoaGFsZkJhbGFuY2UpOwogIH0KCiAgZnVuY3Rpb24gc2V0Q29BdXRob3IoYWRkcmVzcyBfY29hdXRob3IpIHB1YmxpYyBvbmx5QXV0aG9yIHsKICAgIHJlcXVpcmUoIWlzTnVsbEFkZHJlc3MoX2NvYXV0aG9yKSk7CgogICAgY29hdXRob3IgPSBfY29hdXRob3I7CiAgfQoKICBmdW5jdGlvbiBzZXRNYW51ZmFjdHVyZXIoYWRkcmVzcyBfbWFudWZhY3R1cmVyKSBwdWJsaWMgb25seUF1dGhvcnMgewogICAgcmVxdWlyZSghaXNOdWxsQWRkcmVzcyhfbWFudWZhY3R1cmVyKSk7CgogICAgY29hdXRob3IgPSBfbWFudWZhY3R1cmVyOwogIH0KCiAgLyoqIEVORCBGVU5DVElPTlMgRk9SIEFVVEhPUlMgKiovCgogIGZ1bmN0aW9uIGdldEl0ZW0odWludCBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoCiAgICBzdHJpbmcgbmFtZSwKICAgIHVpbnQgcHJpY2UsCiAgICB1aW50WzZdIHRyYWl0cywKICAgIGFkZHJlc3Mgb3duZXIsCiAgICB1aW50IGNlbGViSWQKICApIHsKICAgIG5hbWUgPSBpdGVtc1tfdG9rZW5JZF0ubmFtZTsKICAgIHByaWNlID0gdG9rZW5JZFRvUHJpY2VbX3Rva2VuSWRdOwogICAgdHJhaXRzID0gaXRlbXNbX3Rva2VuSWRdLnRyYWl0czsKICAgIG93bmVyID0gdG9rZW5JZFRvT3duZXJbX3Rva2VuSWRdOwogICAgY2VsZWJJZCA9IGNlbGViT2YoX3Rva2VuSWQpOwogIH0KCiAgLyoqIFNUQVJUIEZVTkNUSU9OUyBSRUxBVEVEIFRPIEVYVEVSTkFMIENPTlRSQUNUIElOVEVSQUNUSU9OUyAqKi8KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludCBfdG9rZW5JZCkgcHVibGljIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lck9mKF90b2tlbklkKSk7CgogICAgdG9rZW5JZFRvQXBwcm92ZWRSZWNpcGllbnRbX3Rva2VuSWRdID0gX3RvOwoKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF90b2tlbklkKSBwdWJsaWMgewogICAgcmVxdWlyZShvd25lck9mKF90b2tlbklkKSA9PSBfZnJvbSk7CiAgICByZXF1aXJlKGlzQXBwcm92ZWQoX3RvLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZSghaXNOdWxsQWRkcmVzcyhfdG8pKTsKCiAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50IF90b2tlbklkKSBwdWJsaWMgewogICAgcmVxdWlyZSghaXNOdWxsQWRkcmVzcyhtc2cuc2VuZGVyKSk7CiAgICByZXF1aXJlKGlzQXBwcm92ZWQobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKCiAgICBhZGRyZXNzIGN1cnJlbnRPd25lciA9IHRva2VuSWRUb093bmVyW190b2tlbklkXTsKCiAgICBfdHJhbnNmZXIoY3VycmVudE93bmVyLCBtc2cuc2VuZGVyLCBfdG9rZW5JZCk7CiAgfQoKICAvKiogRU5EIEZVTkNUSU9OUyBSRUxBVEVEIFRPIEVYVEVSTkFMIENPTlRSQUNUIElOVEVSQUNUSU9OUyAqKi8KCiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqIE1PRElGSUVSUyAqKi8KCiAgbW9kaWZpZXIgb25seUF1dGhvcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhdXRob3IpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIG9ubHlBdXRob3JzKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGF1dGhvciB8fCBtc2cuc2VuZGVyID09IGNvYXV0aG9yKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBvbmx5TWFudWZhY3R1cmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGF1dGhvciB8fCBtc2cuc2VuZGVyID09IGNvYXV0aG9yIHx8IG1zZy5zZW5kZXIgPT0gbWFudWZhY3R1cmVyKTsKICAgIF87CiAgfQoKICAvKiogRlVOQ1RJT05TIFRIQVQgV09OVCBCRSBVU0VEIEZSRVFVRU5UTFkgKiovCgogIGZ1bmN0aW9uIHNldE1pblN0YXJ0aW5nUHJpY2UodWludCBfcHJpY2UpIHB1YmxpYyBvbmx5QXV0aG9ycyB7CiAgICBNSU5fU1RBUlRJTkdfUFJJQ0UgPSBfcHJpY2U7CiAgfQoKICBmdW5jdGlvbiBzZXRHcm93dGhCdW1wKHVpbnQgX2J1bXApIHB1YmxpYyBvbmx5QXV0aG9ycyB7CiAgICBHUk9XVEhfQlVNUCA9IF9idW1wOwogIH0KCiAgZnVuY3Rpb24gc2V0RGl2aWRlbmQodWludCBfZGl2aWRlbmQpIHB1YmxpYyBvbmx5QXV0aG9ycyB7CiAgICBESVZJREVORCA9IF9kaXZpZGVuZDsKICB9CgogIGZ1bmN0aW9uIHNldFByaWNlSW5jcmVhc2VTY2FsZSh1aW50IF9zY2FsZSkgcHVibGljIG9ubHlBdXRob3JzIHsKICAgIFBSSUNFX0lOQ1JFQVNFX1NDQUxFID0gX3NjYWxlOwogIH0KCiAgZnVuY3Rpb24gc2V0S3BvcGlvQ29udHJhY3RBZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBvbmx5QXV0aG9ycyB7CiAgICBLUE9QSU9fQ09OVFJBQ1RfQUREUkVTUyA9IF9hZGRyZXNzOwogIH0KCiAgLyoqIFBSSVZBVEUgRlVOQ1RJT05TICoqLwoKICBmdW5jdGlvbiBpc0FwcHJvdmVkKGFkZHJlc3MgX3RvLCB1aW50IF90b2tlbklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHRva2VuSWRUb0FwcHJvdmVkUmVjaXBpZW50W190b2tlbklkXSA9PSBfdG87CiAgfQoKICBmdW5jdGlvbiBpc051bGxBZGRyZXNzKGFkZHJlc3MgX2FkZHIpIHByaXZhdGUgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gX2FkZHIgPT0gMHgwOwogIH0KfQ=='.
	

]
