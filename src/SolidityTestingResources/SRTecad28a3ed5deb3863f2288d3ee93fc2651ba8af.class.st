Class {
	#name : #SRTecad28a3ed5deb3863f2288d3ee93fc2651ba8af,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTecad28a3ed5deb3863f2288d3ee93fc2651ba8af >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgovKgoKT3B0aW9ucyBFeGNoYW5nZQo9PT09PT09PT09PT09PT09PT09PT09PT0KCkFuIEV4Y2hhbmdlIGZvciBBbWVyaWNhbiBPcHRpb25zLCB3aGljaCBhcmUgYWxzbyByZXZlcnNpYmxlIHVudGlsIHRoZSBkZWFkbGluZSAoTWF0dXJhdGlvbikuCkFuIEFtZXJpY2FuIE9wdGlvbiBpcyBhIGNvbnRyYWN0IGJldHdlZW4gaXRzIEJ1eWVyIGFuZCBpdHMgU2VsbGVyLCBnaXZpbmcgdGhlIEJ1eWVyIHRoZSBhYmlsaXR5CnRvIGJ1eSAob3Igc2VsbCkgYW4gQXNzZXQgYXQgYSBzcGVjaWZpZWQgU3RyaWtlIFByaWNlIGFueSB0aW1lIGJlZm9yZSBhIHNwZWNpZmllZCB0aW1lIChNYXR1cmF0aW9uKS4KCkF1dGhvcnM6IC91L0NpbnRpeCBhbmQgL3UvSGRpenpsZTgzCgoqLwoKbGlicmFyeSBTYWZlTWF0aCB7CgogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydCgoYSA9PSAwKSB8fCAoYyAvIGEgPT0gYikpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAvIGI7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKfQoKLy8gRVJDMjAgSW50ZXJmYWNlOiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKY29udHJhY3QgVG9rZW4gewogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KfQoKY29udHJhY3QgT3B0aW9uc0V4Y2hhbmdlIHsKCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogIC8vIEFkbWluIHRha2VzIGEgMSUgY3V0IG9mIGVhY2ggcHVyY2hhc2VkIE9wdGlvbidzIFByZW1pdW0sIHN0b3JlZCBhcyBhIHJhdGlvIHdpdGggMSBldGhlciBhcyB0aGUgZGVub21pbmF0b3IuCiAgdWludCBwdWJsaWMgZmVlX3JhdGlvID0gMTAgKiogMTY7CiAgCiAgLy8gQWRtaW4gaXMgaW5pdGlhbGl6ZWQgdG8gdGhlIGNvbnRyYWN0IGNyZWF0b3IuCiAgYWRkcmVzcyBwdWJsaWMgYWRtaW4gPSBtc2cuc2VuZGVyOwogIAogIC8vIFVzZXIgYmFsYW5jZXMgYXJlIHN0b3JlZCBhcyB1c2VyQmFsYW5jZVt1c2VyXVt0b2tlbl0sIHdoZXJlIEVUSCBpcyBzdG9yZWQgYXMgdG9rZW4gYWRkcmVzcyAwLgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpKSBwdWJsaWMgdXNlckJhbGFuY2U7CiAgCiAgLy8gQW4gT3B0aW9uIGlzIGEgYmV0IGJldHdlZW4gdHdvIHVzZXJzIG9uIHRoZSByZWxhdGl2ZSBwcmljZSBvZiB0d28gdG9rZW5zIG9uIGEgZ2l2ZW4gZGF0ZS4KICAvLyBUaGUgU2VsbGVyIGxvY2tzIHNvbWUgYW1vdW50IG9mIHRva2VuIEEgKEFzc2V0KSBpbiB0aGUgT3B0aW9uIGluIGV4Y2hhbmdlIGZvciBwYXltZW50ICh0aGUgUHJlbWl1bSkgZnJvbSB0aGUgQnV5ZXIuCiAgLy8gVGhlIEJ1eWVyIGlzIHRoZW4gZnJlZSB0byB0cmFkZSBiZXR3ZWVuIHRva2VuIEEgYW5kIHRva2VuIEIgKEJhc2UpIGF0IHRoZSBnaXZlbiBleGNoYW5nZSByYXRlICh0aGUgU3RyaWtlIFByaWNlKS4KICAvLyBBdCB0aGUgY2xvc2luZyBkYXRlIChNYXR1cmF0aW9uKSwgdGhlIE9wdGlvbidzIGZ1bmRzIGFyZSBzZW50IGJhY2sgdG8gdGhlIFNlbGxlci4KICAvLyBUbyByZWR1Y2Ugb25jaGFpbiBzdG9yYWdlLCBPcHRpb25zIGFyZSBpbmRleGVkIGJ5IGEgaGFzaCBvZiB0aGVpciBwYXJhbWV0ZXJzLCBvcHRpb25IYXNoLgogIAogIC8vIEFkZHJlc3Mgb2YgdGhlIE9wdGlvbidzIFRha2VyLCB0aGUgdXNlciB3aG8gZmlsbGVkIHRoZSBvcmRlciBmb3IgdGhlIE9wdGlvbi4KICAvLyBEb3VibGVzIGFzIGFuIGluZGljYXRvciBmb3Igd2hldGhlciBhIGdpdmVuIE9wdGlvbiBpcyBhY3RpdmUuCiAgbWFwcGluZyAoYnl0ZXMzMiA9PiBhZGRyZXNzKSBwdWJsaWMgb3B0aW9uVGFrZXI7CiAgCiAgLy8gQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgYW4gb2ZmY2hhaW4gT3B0aW9uIG9yZGVyIGhhcyBiZWVuIGNhbmNlbGxlZC4KICBtYXBwaW5nIChieXRlczMyID0+IGJvb2wpIHB1YmxpYyBvcHRpb25PcmRlckNhbmNlbGxlZDsKICAKICAvLyBPcHRpb24gYmFsYW5jZXMgYXJlIHN0b3JlZCBhcyBvcHRpb25CYWxhbmNlW29wdGlvbkhhc2hdW3Rva2VuXSwgd2hlcmUgRVRIIGlzIHN0b3JlZCBhcyB0b2tlbiBhZGRyZXNzIDAuCiAgbWFwcGluZyAoYnl0ZXMzMiA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkpIHB1YmxpYyBvcHRpb25CYWxhbmNlOwogIAogIC8vIFBvc3NpYmxlIHN0YXRlcyBhbiBPcHRpb24gKG9yIGl0cyBvZmZjaGFpbiBvcmRlcikgY2FuIGJlIGluLgogIGVudW0gb3B0aW9uU3RhdGVzIHsKICAgIEludmFsaWQsICAgIC8vIE9wdGlvbiBwYXJhbWV0ZXJzIGFyZSBpbnZhbGlkLgogICAgQXZhaWxhYmxlLCAgLy8gT3B0aW9uIGhhc24ndCBiZWVuIGNyZWF0ZWQgb3IgZmlsbGVkIHlldC4KICAgIENhbmNlbGxlZCwgIC8vIE9wdGlvbidzIG9mZmNoYWluIG9yZGVyIGhhcyBiZWVuIGNhbmNlbGxlZCBieSB0aGUgTWFrZXIuCiAgICBFeHBpcmVkLCAgICAvLyBPcHRpb24ncyBvZmZjaGFpbiBvcmRlciBoYXMgcGFzc2VkIGl0cyBFeHBpcmF0aW9uIHRpbWUuCiAgICBUcmFkZWFibGUsICAvLyBPcHRpb24gY2FuIGJlIHRyYWRlZCBieSBpdHMgQnV5ZXIgdW50aWwgaXRzIE1hdHVyYXRpb24gdGltZS4KICAgIE1hdHVyZWQsICAgIC8vIE9wdGlvbiBoYXMgcGFzc2VkIGl0cyBNYXR1cmF0aW9uIHRpbWUgYW5kIGlzIHJlYWR5IHRvIGJlIGNsb3NlZC4KICAgIENsb3NlZCAgICAgIC8vIE9wdGlvbiBoYXMgYmVlbiBjbG9zZWQgYnkgaXRzIFNlbGxlciwgd2l0aGRyYXdpbmcgYWxsIGl0cyBmdW5kcy4KICB9CiAgCiAgLy8gQWxsb3cgdGhlIGFkbWluIHRvIHRyYW5zZmVyIG93bmVyc2hpcC4KICBmdW5jdGlvbiBjaGFuZ2VBZG1pbihhZGRyZXNzIF9hZG1pbikgZXh0ZXJuYWwgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluKTsKICAgIGFkbWluID0gX2FkbWluOwogIH0KICAKICAvLyBVc2VycyBtdXN0IGZpcnN0IGRlcG9zaXQgRVRIIGludG8gdGhlIEV4Y2hhbmdlIGluIG9yZGVyIHRvIHB1cmNoYXNlIE9wdGlvbnMuCiAgLy8gRVRIIGJhbGFuY2VzIGFyZSBzdG9yZWQgYXMgYSB0b2tlbiB3aXRoIGFkZHJlc3MgMC4KICBmdW5jdGlvbiBkZXBvc2l0RVRIKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICB1c2VyQmFsYW5jZVttc2cuc2VuZGVyXVswXSA9IHVzZXJCYWxhbmNlW21zZy5zZW5kZXJdWzBdLmFkZChtc2cudmFsdWUpOwogIH0KCiAgLy8gVXNlcnMgY2FuIHdpdGhkcmF3IGFueSBhbW91bnQgb2YgRVRIIHVwIHRvIHRoZWlyIGN1cnJlbnQgYmFsYW5jZS4KICBmdW5jdGlvbiB3aXRoZHJhd0VUSCh1aW50IGFtb3VudCkgZXh0ZXJuYWwgewogICAgcmVxdWlyZSh1c2VyQmFsYW5jZVttc2cuc2VuZGVyXVswXSA+PSBhbW91bnQpOwogICAgdXNlckJhbGFuY2VbbXNnLnNlbmRlcl1bMF0gPSB1c2VyQmFsYW5jZVttc2cuc2VuZGVyXVswXS5zdWIoYW1vdW50KTsKICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoYW1vdW50KTsKICB9CgogIC8vIFRvIGRlcG9zaXQgdG9rZW5zLCB1c2VycyBtdXN0IGZpcnN0ICJhcHByb3ZlIiB0aGUgdHJhbnNmZXIgaW4gdGhlIHRva2VuIGNvbnRyYWN0LgogIC8vIFVzZXJzIG11c3QgZmlyc3QgZGVwb3NpdCB0b2tlbnMgaW50byB0aGUgRXhjaGFuZ2UgaW4gb3JkZXIgdG8gY3JlYXRlIG9yIHRyYWRlIHdpdGggT3B0aW9ucy4KICBmdW5jdGlvbiBkZXBvc2l0VG9rZW4oYWRkcmVzcyB0b2tlbiwgdWludCBhbW91bnQpIGV4dGVybmFsIHsKICAgIHJlcXVpcmUoVG9rZW4odG9rZW4pLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCB0aGlzLCBhbW91bnQpKTsgIAogICAgdXNlckJhbGFuY2VbbXNnLnNlbmRlcl1bdG9rZW5dID0gdXNlckJhbGFuY2VbbXNnLnNlbmRlcl1bdG9rZW5dLmFkZChhbW91bnQpOwogIH0KICAKICAvLyBVc2VycyBjYW4gd2l0aGRyYXcgYW55IGFtb3VudCBvZiBhIGdpdmVuIHRva2VuIHVwIHRvIHRoZWlyIGN1cnJlbnQgYmFsYW5jZS4KICBmdW5jdGlvbiB3aXRoZHJhd1Rva2VuKGFkZHJlc3MgdG9rZW4sIHVpbnQgYW1vdW50KSBleHRlcm5hbCB7CiAgICByZXF1aXJlKHVzZXJCYWxhbmNlW21zZy5zZW5kZXJdW3Rva2VuXSA+PSBhbW91bnQpOwogICAgdXNlckJhbGFuY2VbbXNnLnNlbmRlcl1bdG9rZW5dID0gdXNlckJhbGFuY2VbbXNnLnNlbmRlcl1bdG9rZW5dLnN1YihhbW91bnQpOwogICAgcmVxdWlyZShUb2tlbih0b2tlbikudHJhbnNmZXIobXNnLnNlbmRlciwgYW1vdW50KSk7CiAgfQogIAogIC8vIFRyYW5zZmVyIGZ1bmRzIGZyb20gb25lIHVzZXIncyBiYWxhbmNlIHRvIGFub3RoZXIncy4gIE5vdCBleHRlcm5hbGx5IGNhbGxhYmxlLgogIGZ1bmN0aW9uIHRyYW5zZmVyVXNlclRvVXNlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIGFkZHJlc3MgdG9rZW4sIHVpbnQgYW1vdW50KSBwcml2YXRlIHsKICAgIHJlcXVpcmUodXNlckJhbGFuY2VbZnJvbV1bdG9rZW5dID49IGFtb3VudCk7CiAgICB1c2VyQmFsYW5jZVtmcm9tXVt0b2tlbl0gPSB1c2VyQmFsYW5jZVtmcm9tXVt0b2tlbl0uc3ViKGFtb3VudCk7CiAgICB1c2VyQmFsYW5jZVt0b11bdG9rZW5dID0gdXNlckJhbGFuY2VbdG9dW3Rva2VuXS5hZGQoYW1vdW50KTsKICB9CgogIC8vIFRyYW5zZmVyIGZ1bmRzIGZyb20gYSB1c2VyJ3MgYmFsYW5jZSBpbnRvIGFuIE9wdGlvbi4gIE5vdCBleHRlcm5hbGx5IGNhbGxhYmxlLgogIGZ1bmN0aW9uIHRyYW5zZmVyVXNlclRvT3B0aW9uKGFkZHJlc3MgZnJvbSwgYnl0ZXMzMiBvcHRpb25IYXNoLCBhZGRyZXNzIHRva2VuLCB1aW50IGFtb3VudCkgcHJpdmF0ZSB7CiAgICByZXF1aXJlKHVzZXJCYWxhbmNlW2Zyb21dW3Rva2VuXSA+PSBhbW91bnQpOwogICAgdXNlckJhbGFuY2VbZnJvbV1bdG9rZW5dID0gdXNlckJhbGFuY2VbZnJvbV1bdG9rZW5dLnN1YihhbW91bnQpOwogICAgb3B0aW9uQmFsYW5jZVtvcHRpb25IYXNoXVt0b2tlbl0gPSBvcHRpb25CYWxhbmNlW29wdGlvbkhhc2hdW3Rva2VuXS5hZGQoYW1vdW50KTsKICB9CgogIC8vIFRyYW5zZmVyIGZ1bmRzIGZyb20gYW4gT3B0aW9uIHRvIGEgdXNlcidzIGJhbGFuY2UuICBOb3QgZXh0ZXJuYWxseSBjYWxsYWJsZS4KICBmdW5jdGlvbiB0cmFuc2Zlck9wdGlvblRvVXNlcihieXRlczMyIG9wdGlvbkhhc2gsIGFkZHJlc3MgdG8sIGFkZHJlc3MgdG9rZW4sIHVpbnQgYW1vdW50KSBwcml2YXRlIHsKICAgIHJlcXVpcmUob3B0aW9uQmFsYW5jZVtvcHRpb25IYXNoXVt0b2tlbl0gPj0gYW1vdW50KTsKICAgIG9wdGlvbkJhbGFuY2Vbb3B0aW9uSGFzaF1bdG9rZW5dID0gb3B0aW9uQmFsYW5jZVtvcHRpb25IYXNoXVt0b2tlbl0uc3ViKGFtb3VudCk7CiAgICB1c2VyQmFsYW5jZVt0b11bdG9rZW5dID0gdXNlckJhbGFuY2VbdG9dW3Rva2VuXS5hZGQoYW1vdW50KTsKICB9CgogIC8vIEhhc2hlcyBhbiBPcHRpb24ncyBwYXJhbWV0ZXJzIGZvciB1c2UgaW4gbG9va2luZyB1cCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgT3B0aW9uLiAgQ2FsbGFibGUgaW50ZXJuYWxseSBhbmQgZXh0ZXJuYWxseS4KICAvLyBWYXJpYWJsZXMgYXJlIGdyb3VwZWQgaW50byBhcnJheXMgYXMgYSB3b3JrYXJvdW5kIGZvciB0aGUgInRvbyBtYW55IGxvY2FsIHZhcmlhYmxlcyIgcHJvYmxlbS4KICAvLyBJbnN0ZWFkIG9mIGRpcmVjdGx5IGVuY29kaW5nIHRoZSB0b2tlbiBleGNoYW5nZSByYXRlIChTdHJpa2UgUHJpY2UpLCBpdCBpcyBpbnN0ZWFkIGltcGxpY2l0bHkKICAvLyBzdG9yZWQgYXMgbGltaXRzIG9uIHRoZSBudW1iZXIgb2YgZWFjaCBraW5kIG9mIHRva2VuIHRoZSBPcHRpb24gY2FuIHN0b3JlLgogIC8vIE5vdGUgdGhhdCBkdWUgdG8gaW50ZWdlciBkaXZpc2lvbiBkdXJpbmcgdHJhZGluZywgT3B0aW9ucyBtYXkgY29sbGVjdCBkdXN0IGFtb3VudHMgb3ZlciB0aGVpciBsaW1pdHMuCiAgLy8gVGhlIG9mZmNoYWluIG9yZGVyIGV4cGlyYXRpb24gdGltZSBkb3VibGVzIGFzIGEgbm9uY2UsIGFsbG93aW5nIE1ha2VycyB0byBjcmVhdGUgb3RoZXJ3aXNlIGlkZW50aWNhbCBPcHRpb25zLgogIGZ1bmN0aW9uIGdldE9wdGlvbkhhc2goYWRkcmVzc1szXSB0b2tlbkFfdG9rZW5CX21ha2VyLAogICAgICAgICAgICAgICAgICAgICAgICAgdWludFszXSBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLAogICAgICAgICAgICAgICAgICAgICAgICAgdWludFsyXSBtYXR1cmF0aW9uX2V4cGlyYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICBib29sIG1ha2VySXNTZWxsZXIpIHB1cmUgcHVibGljIHJldHVybnMoYnl0ZXMzMikgewogICAgYnl0ZXMzMiBvcHRpb25IYXNoID0ga2VjY2FrMjU2KAogICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbkFfdG9rZW5CX21ha2VyWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbkFfdG9rZW5CX21ha2VyWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbkFfdG9rZW5CX21ha2VyWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICBtYXR1cmF0aW9uX2V4cGlyYXRpb25bMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdHVyYXRpb25fZXhwaXJhdGlvblsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJJc1NlbGxlcgogICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgIHJldHVybiBvcHRpb25IYXNoOwogIH0KICAKICAvLyBDb21wdXRlcyB0aGUgY3VycmVudCBzdGF0ZSBvZiBhbiBPcHRpb24gZ2l2ZW4gaXRzIHBhcmFtZXRlcnMuICBDYWxsYWJsZSBpbnRlcm5hbGx5IGFuZCBleHRlcm5hbGx5LgogIGZ1bmN0aW9uIGdldE9wdGlvblN0YXRlKGFkZHJlc3NbM10gdG9rZW5BX3Rva2VuQl9tYWtlciwKICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50WzNdIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgdWludFsyXSBtYXR1cmF0aW9uX2V4cGlyYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBtYWtlcklzU2VsbGVyKSB2aWV3IHB1YmxpYyByZXR1cm5zKG9wdGlvblN0YXRlcykgewogICAgLy8gVG9rZW5zIG11c3QgYmUgZGlmZmVyZW50IGZvciBPcHRpb24gdG8gYmUgVmFsaWQuCiAgICBpZih0b2tlbkFfdG9rZW5CX21ha2VyWzBdID09IHRva2VuQV90b2tlbkJfbWFrZXJbMV0pIHJldHVybiBvcHRpb25TdGF0ZXMuSW52YWxpZDsKICAgIC8vIE9wdGlvbnMgbXVzdCBoYXZlIG5vbi16ZXJvIGxpbWl0cyBvbiB0aGVpciBjb250YWluZWQgVG9rZW5zIHRvIGJlIFZhbGlkLgogICAgaWYoKGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW1bMF0gPT0gMCkgfHwgKGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW1bMV0gPT0gMCkpIHJldHVybiBvcHRpb25TdGF0ZXMuSW52YWxpZDsKICAgIC8vIE9wdGlvbnMgbXVzdCByZWFjaCBNYXR1cml0eSBhZnRlciB0aGUgb2ZmY2hhaW4gb3JkZXIgZXhwaXJlcyB0byBiZSBWYWxpZC4KICAgIGlmKG1hdHVyYXRpb25fZXhwaXJhdGlvblswXSA8PSBtYXR1cmF0aW9uX2V4cGlyYXRpb25bMV0pIHJldHVybiBvcHRpb25TdGF0ZXMuSW52YWxpZDsKICAgIGJ5dGVzMzIgb3B0aW9uSGFzaCA9IGdldE9wdGlvbkhhc2godG9rZW5BX3Rva2VuQl9tYWtlciwgbGltaXRUb2tlbkFfbGltaXRUb2tlbkJfcHJlbWl1bSwgbWF0dXJhdGlvbl9leHBpcmF0aW9uLCBtYWtlcklzU2VsbGVyKTsKICAgIC8vIENoZWNrIGlmIHRoZSBPcHRpb24ncyBvZmZjaGFpbiBvcmRlciB3YXMgY2FuY2VsbGVkLgogICAgaWYob3B0aW9uT3JkZXJDYW5jZWxsZWRbb3B0aW9uSGFzaF0pIHJldHVybiBvcHRpb25TdGF0ZXMuQ2FuY2VsbGVkOwogICAgLy8gQ2hlY2sgaWYgdGhlIE9wdGlvbidzIG9mZmNoYWluIG9yZGVyIGhhc24ndCBiZWVuIGZpbGxlZCB5ZXQuCiAgICBpZihvcHRpb25UYWtlcltvcHRpb25IYXNoXSA9PSAwKSB7CiAgICAgIC8vIENoZWNrIGlmIHRoZSBPcHRpb24ncyBvZmZjaGFpbiBvcmRlciBoYXMgZXhwaXJlZC4KICAgICAgaWYobm93ID49IG1hdHVyYXRpb25fZXhwaXJhdGlvblsxXSkgcmV0dXJuIG9wdGlvblN0YXRlcy5FeHBpcmVkOwogICAgICAvLyBPdGhlcndpc2UsIHRoZSBPcHRpb24ncyBvZmZjaGFpbiBvcmRlciBpcyBzdGlsbCBBdmFpbGFibGUgdG8gYmUgY3JlYXRlZCBvciBmaWxsZWQuCiAgICAgIHJldHVybiBvcHRpb25TdGF0ZXMuQXZhaWxhYmxlOwogICAgfQogICAgLy8gQ2hlY2sgaWYgdGhlIE9wdGlvbiBoYXMgYmVlbiBlbXB0aWVkIG9mIGl0cyBmdW5kcywgd2hpY2ggbWVhbnMgaXQgd2FzIGNsb3NlZCBieSBpdHMgU2VsbGVyLgogICAgaWYoKG9wdGlvbkJhbGFuY2Vbb3B0aW9uSGFzaF1bdG9rZW5BX3Rva2VuQl9tYWtlclswXV0gPT0gMCkgJiYKICAgICAgIChvcHRpb25CYWxhbmNlW29wdGlvbkhhc2hdW3Rva2VuQV90b2tlbkJfbWFrZXJbMV1dID09IDApKSByZXR1cm4gb3B0aW9uU3RhdGVzLkNsb3NlZDsKICAgIC8vIENoZWNrIGlmIHRoZSBPcHRpb24gaGFzIHBhc3NlZCBpdHMgTWF0dXJhdGlvbiB0aW1lLgogICAgaWYobm93ID49IG1hdHVyYXRpb25fZXhwaXJhdGlvblswXSkgcmV0dXJuIG9wdGlvblN0YXRlcy5NYXR1cmVkOwogICAgLy8gT3RoZXJ3aXNlLCB0aGUgT3B0aW9uIG11c3Qgc3RpbGwgYmUgYWN0aXZlIGFuZCB0cmFkZWFibGUgYnkgaXRzIEJ1eWVyLgogICAgcmV0dXJuIG9wdGlvblN0YXRlcy5UcmFkZWFibGU7CiAgfQogIAogIC8vIERldGVybWluZXMgd2hldGhlciB0aGUgU2VsbGVyIGlzIHRoZSBNYWtlciBvciB0aGUgVGFrZXIgZm9yIGEgZ2l2ZW4gT3B0aW9uLiAgTm90IGV4dGVybmFsbHkgY2FsbGFibGUuCiAgZnVuY3Rpb24gZ2V0U2VsbGVyKGFkZHJlc3MgbWFrZXIsIGFkZHJlc3MgdGFrZXIsIGJvb2wgbWFrZXJJc1NlbGxlcikgcHVyZSBwcml2YXRlIHJldHVybnMoYWRkcmVzcykgewogICAgLy8gVGVybmFyeSBvcGVyYXRvciB0byBhc3NpZ24gdGhlIFNlbGxlcidzIGFkZHJlc3M6ICg8Y29uZGl0aW9uYWw+ID8gPGlmLXRydWU+IDogPGlmLWZhbHNlPikKICAgIGFkZHJlc3Mgc2VsbGVyID0gbWFrZXJJc1NlbGxlciA/IG1ha2VyIDogdGFrZXI7CiAgICByZXR1cm4gc2VsbGVyOwogIH0KICAKICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIEJ1eWVyIGlzIHRoZSBNYWtlciBvciB0aGUgVGFrZXIgZm9yIGEgZ2l2ZW4gT3B0aW9uLiAgTm90IGV4dGVybmFsbHkgY2FsbGFibGUuCiAgZnVuY3Rpb24gZ2V0QnV5ZXIoYWRkcmVzcyBtYWtlciwgYWRkcmVzcyB0YWtlciwgYm9vbCBtYWtlcklzU2VsbGVyKSBwdXJlIHByaXZhdGUgcmV0dXJucyhhZGRyZXNzKSB7CiAgICAvLyBUZXJuYXJ5IG9wZXJhdG9yIHRvIGFzc2lnbiB0aGUgQnV5ZXIncyBhZGRyZXNzOiAoPGNvbmRpdGlvbmFsPiA/IDxpZi10cnVlPiA6IDxpZi1mYWxzZT4pCiAgICBhZGRyZXNzIGJ1eWVyID0gbWFrZXJJc1NlbGxlciA/IHRha2VyIDogbWFrZXI7CiAgICByZXR1cm4gYnV5ZXI7CiAgfQogIAogIC8vIFRyYW5zZmVyIHBheW1lbnQgZnJvbSBhbiBPcHRpb24ncyBCdXllciB0byB0aGUgU2VsbGVyIGxlc3MgdGhlIDElIGZlZSBzZW50IHRvIHRoZSBhZG1pbi4gIE5vdCBleHRlcm5hbGx5IGNhbGxhYmxlLgogIC8vIFRoZSBwcmVtaXVtIGlzIGFsd2F5cyBwYWlkIGluIEVUSCwgd2hpY2ggaXMgZW5jb2RlZCBhcyBhIHRva2VuIHdpdGggYWRkcmVzcyAwLgogIGZ1bmN0aW9uIHBheUZvck9wdGlvbihhZGRyZXNzIGJ1eWVyLCBhZGRyZXNzIHNlbGxlciwgdWludCBwcmVtaXVtKSBwcml2YXRlIHsKICAgIHVpbnQgZmVlID0gKHByZW1pdW0ubXVsKGZlZV9yYXRpbykpLmRpdigxIGV0aGVyKTsKICAgIHRyYW5zZmVyVXNlclRvVXNlcihidXllciwgc2VsbGVyLCAwLCBwcmVtaXVtLnN1YihmZWUpKTsKICAgIHRyYW5zZmVyVXNlclRvVXNlcihidXllciwgYWRtaW4sIDAsIGZlZSk7CiAgfQogIAogIC8vIEFsbG93cyBhIFRha2VyIHRvIGZpbGwgYW4gb2ZmY2hhaW4gb3JkZXIgZm9yIGFuIE9wdGlvbiBjcmVhdGVkIGJ5IGEgTWFrZXIuCiAgZnVuY3Rpb24gZmlsbE9wdGlvbk9yZGVyKGFkZHJlc3NbM10gdG9rZW5BX3Rva2VuQl9tYWtlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludFszXSBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLAogICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50WzJdIG1hdHVyYXRpb25fZXhwaXJhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBtYWtlcklzU2VsbGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50OCB2LAogICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlczMyWzJdIHJfcykgZXh0ZXJuYWwgewogICAgLy8gT3B0aW9uIG11c3QgYmUgQXZhaWxhYmxlLCB3aGljaCBtZWFucyBpdCBpcyB2YWxpZCwgdW5leHBpcmVkLCB1bmZpbGxlZCwgYW5kIHVuY2FuY2VsbGVkLgogICAgcmVxdWlyZShnZXRPcHRpb25TdGF0ZSh0b2tlbkFfdG9rZW5CX21ha2VyLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLCBtYXR1cmF0aW9uX2V4cGlyYXRpb24sIG1ha2VySXNTZWxsZXIpID09IG9wdGlvblN0YXRlcy5BdmFpbGFibGUpOwogICAgYnl0ZXMzMiBvcHRpb25IYXNoID0gZ2V0T3B0aW9uSGFzaCh0b2tlbkFfdG9rZW5CX21ha2VyLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLCBtYXR1cmF0aW9uX2V4cGlyYXRpb24sIG1ha2VySXNTZWxsZXIpOwogICAgLy8gVmVyaWZ5IHRoZSBNYWtlcidzIG9mZmNoYWluIG9yZGVyIGlzIHZhbGlkIGJ5IGNoZWNraW5nIHdoZXRoZXIgaXQgd2FzIHNpZ25lZCBieSB0aGUgTWFrZXIuCiAgICByZXF1aXJlKGVjcmVjb3ZlcihrZWNjYWsyNTYoIlx4MTlFdGhlcmV1bSBTaWduZWQgTWVzc2FnZTpcbjMyIiwgb3B0aW9uSGFzaCksIHYsIHJfc1swXSwgcl9zWzFdKSA9PSB0b2tlbkFfdG9rZW5CX21ha2VyWzJdKTsKICAgIGFkZHJlc3Mgc2VsbGVyID0gZ2V0U2VsbGVyKHRva2VuQV90b2tlbkJfbWFrZXJbMl0sIG1zZy5zZW5kZXIsIG1ha2VySXNTZWxsZXIpOwogICAgYWRkcmVzcyBidXllciA9IGdldEJ1eWVyKHRva2VuQV90b2tlbkJfbWFrZXJbMl0sIG1zZy5zZW5kZXIsIG1ha2VySXNTZWxsZXIpOwogICAgcGF5Rm9yT3B0aW9uKGJ1eWVyLCBzZWxsZXIsIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW1bMl0pOwogICAgLy8gVHJhbnNmZXIgdGhlIGFtb3VudCBvZiBUb2tlbiBBIHNwZWNpZmllZCBpbiB0aGUgb3JkZXIgZnJvbSB0aGUgU2VsbGVyIHRvIHRoZSBPcHRpb24uCiAgICB0cmFuc2ZlclVzZXJUb09wdGlvbihzZWxsZXIsIG9wdGlvbkhhc2gsIHRva2VuQV90b2tlbkJfbWFrZXJbMF0sIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW1bMF0pOwogICAgLy8gU2V0IHRoZSBvcmRlciBmaWxsZXIgYXMgdGhlIE9wdGlvbidzIFRha2VyLCBtYXJraW5nIHRoZSBPcHRpb24gYXMgYWN0aXZlLgogICAgb3B0aW9uVGFrZXJbb3B0aW9uSGFzaF0gPSBtc2cuc2VuZGVyOwogIH0KICAKICAvLyBBbGxvd3MgYSBNYWtlciB0byBjYW5jZWwgdGhlaXIgb2ZmY2hhaW4gT3B0aW9uIG9yZGVyIGVhcmx5IChpLmUuIGJlZm9yZSBpdHMgZXhwaXJhdGlvbikuCiAgZnVuY3Rpb24gY2FuY2VsT3B0aW9uT3JkZXIoYWRkcmVzc1szXSB0b2tlbkFfdG9rZW5CX21ha2VyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnRbM10gbGltaXRUb2tlbkFfbGltaXRUb2tlbkJfcHJlbWl1bSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50WzJdIG1hdHVyYXRpb25fZXhwaXJhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIG1ha2VySXNTZWxsZXIpIGV4dGVybmFsIHsKICAgIC8vIE9wdGlvbiBtdXN0IGJlIEF2YWlsYWJsZSwgd2hpY2ggbWVhbnMgaXQgaXMgdmFsaWQsIHVuZXhwaXJlZCwgdW5maWxsZWQsIGFuZCB1bmNhbmNlbGxlZC4KICAgIHJlcXVpcmUoZ2V0T3B0aW9uU3RhdGUodG9rZW5BX3Rva2VuQl9tYWtlciwgbGltaXRUb2tlbkFfbGltaXRUb2tlbkJfcHJlbWl1bSwgbWF0dXJhdGlvbl9leHBpcmF0aW9uLCBtYWtlcklzU2VsbGVyKSA9PSBvcHRpb25TdGF0ZXMuQXZhaWxhYmxlKTsKICAgIC8vIE9ubHkgYWxsb3cgdGhlIE1ha2VyIHRvIGNhbmNlbCB0aGVpciBvd24gb2ZmY2hhaW4gT3B0aW9uIG9yZGVyLgogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHRva2VuQV90b2tlbkJfbWFrZXJbMl0pOwogICAgYnl0ZXMzMiBvcHRpb25IYXNoID0gZ2V0T3B0aW9uSGFzaCh0b2tlbkFfdG9rZW5CX21ha2VyLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLCBtYXR1cmF0aW9uX2V4cGlyYXRpb24sIG1ha2VySXNTZWxsZXIpOwogICAgLy8gTWFyayB0aGUgb2ZmY2hhaW4gT3B0aW9uIG9yZGVyIGFzIGNhbmNlbGxlZCBvbmNoYWluLgogICAgb3B0aW9uT3JkZXJDYW5jZWxsZWRbb3B0aW9uSGFzaF0gPSB0cnVlOwogIH0KICAKICAvLyBIYW5kbGVyIGZvciB0cmFkaW5nIHRva2VucyBpbnRvIGFuZCBvdXQgb2YgdGhlIE9wdGlvbiBhdCB0aGUgZ2l2ZW4gU3RyaWtlIFByaWNlLiAgTm90IGV4dGVybmFsbHkgY2FsbGFibGUuCiAgZnVuY3Rpb24gdHJhZGVPcHRpb25IZWxwZXIoYWRkcmVzcyBidXllciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlczMyIG9wdGlvbkhhc2gsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyB0b2tlblRvT3B0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgdG9rZW5Gcm9tT3B0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgbGltaXRUb09wdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50IGxpbWl0RnJvbU9wdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50IGFtb3VudFRvT3B0aW9uKSBwcml2YXRlIHsKICAgIHRyYW5zZmVyVXNlclRvT3B0aW9uKGJ1eWVyLCBvcHRpb25IYXNoLCB0b2tlblRvT3B0aW9uLCBhbW91bnRUb09wdGlvbik7CiAgICAvLyBTdHJpa2UgUHJpY2UgaXMgY2FsY3VsYXRlZCBhcyB0aGUgcmF0aW8gb2YgdGhlIG1heGltdW0gYW1vdW50cyBvZiBlYWNoIFRva2VuIHRoZSBPcHRpb24gY2FuIGhvbGQuCiAgICB1aW50IGFtb3VudEZyb21PcHRpb24gPSAoYW1vdW50VG9PcHRpb24ubXVsKGxpbWl0RnJvbU9wdGlvbikpLmRpdihsaW1pdFRvT3B0aW9uKTsKICAgIHRyYW5zZmVyT3B0aW9uVG9Vc2VyKG9wdGlvbkhhc2gsIGJ1eWVyLCB0b2tlbkZyb21PcHRpb24sIGFtb3VudEZyb21PcHRpb24pOwogIH0KCiAgLy8gQWxsb3cgYW4gT3B0aW9uJ3MgQnV5ZXIgdG8gdHJhZGUgdG9rZW5zIGludG8gYW5kIG91dCBvZiB0aGUgT3B0aW9uIGF0IHRoZSBTdHJpa2UgUHJpY2UgdW50aWwgdGhlIE9wdGlvbidzIE1hdHVyYXRpb24uCiAgLy8gVGhlIGJvb2xlYW4gdHJhZGluZ1Rva2VuQVRvT3B0aW9uIGlzIFRydWUgd2hlbiBUb2tlbiBBIGlzIGJlaW5nIHRyYWRlZCB0byB0aGUgT3B0aW9uLCBhbmQgRmFsc2Ugd2hlbiBUb2tlbiBCIGlzLgogIC8vIFRyYWRlIGxpbWl0cyBhcmVuJ3QgZXhwbGljaXRseSBjaGVja2VkLCBidXQgYXJlIGVuZm9yY2VkIGJ5IE9wdGlvbiBiYWxhbmNlcyBub3QgYmVpbmcgZHJhaW5hYmxlIGJlbG93IHplcm8uCiAgLy8gTm90ZSB0aGF0IGR1ZSB0byBpbnRlZ2VyIGRpdmlzaW9uIGR1cmluZyB0cmFkaW5nLCBPcHRpb25zIG1heSBjb2xsZWN0IGR1c3QgYW1vdW50cyBvdmVyIHRoZWlyIGxpbWl0cy4KICBmdW5jdGlvbiB0cmFkZU9wdGlvbihhZGRyZXNzWzNdIHRva2VuQV90b2tlbkJfbWFrZXIsCiAgICAgICAgICAgICAgICAgICAgICAgdWludFszXSBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLAogICAgICAgICAgICAgICAgICAgICAgIHVpbnRbMl0gbWF0dXJhdGlvbl9leHBpcmF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgIGJvb2wgbWFrZXJJc1NlbGxlciwKICAgICAgICAgICAgICAgICAgICAgICB1aW50IGFtb3VudFRvT3B0aW9uLAogICAgICAgICAgICAgICAgICAgICAgIGJvb2wgdHJhZGluZ1Rva2VuQVRvT3B0aW9uKSBleHRlcm5hbCB7CiAgICAvLyBPcHRpb24gbXVzdCBiZSBUcmFkZWFibGUsIHdoaWNoIG1lYW5zIGl0J3MgYmVlbiBmaWxsZWQgYW5kIGhhc24ndCBwYXNzZWQgaXRzIHRyYWRpbmcgZGVhZGxpbmUgKE1hdHVyYXRpb24pLgogICAgcmVxdWlyZShnZXRPcHRpb25TdGF0ZSh0b2tlbkFfdG9rZW5CX21ha2VyLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLCBtYXR1cmF0aW9uX2V4cGlyYXRpb24sIG1ha2VySXNTZWxsZXIpID09IG9wdGlvblN0YXRlcy5UcmFkZWFibGUpOwogICAgYnl0ZXMzMiBvcHRpb25IYXNoID0gZ2V0T3B0aW9uSGFzaCh0b2tlbkFfdG9rZW5CX21ha2VyLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLCBtYXR1cmF0aW9uX2V4cGlyYXRpb24sIG1ha2VySXNTZWxsZXIpOwogICAgYWRkcmVzcyBidXllciA9IGdldEJ1eWVyKHRva2VuQV90b2tlbkJfbWFrZXJbMl0sIG9wdGlvblRha2VyW29wdGlvbkhhc2hdLCBtYWtlcklzU2VsbGVyKTsKICAgIC8vIE9ubHkgYWxsb3cgdGhlIEJ1eWVyIHRvIHRyYWRlIHdpdGggdGhlIE9wdGlvbi4KICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBidXllcik7CiAgICBpZih0cmFkaW5nVG9rZW5BVG9PcHRpb24pIHsKICAgICAgdHJhZGVPcHRpb25IZWxwZXIoYnV5ZXIsIG9wdGlvbkhhc2gsIHRva2VuQV90b2tlbkJfbWFrZXJbMF0sIHRva2VuQV90b2tlbkJfbWFrZXJbMV0sIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW1bMF0sIGxpbWl0VG9rZW5BX2xpbWl0VG9rZW5CX3ByZW1pdW1bMV0sIGFtb3VudFRvT3B0aW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIHRyYWRlT3B0aW9uSGVscGVyKGJ1eWVyLCBvcHRpb25IYXNoLCB0b2tlbkFfdG9rZW5CX21ha2VyWzFdLCB0b2tlbkFfdG9rZW5CX21ha2VyWzBdLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtWzFdLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtWzBdLCBhbW91bnRUb09wdGlvbik7CiAgICB9CiAgfQogIAogIC8vIEFsbG93cyBhbiBPcHRpb24ncyBTZWxsZXIgdG8gd2l0aGRyYXcgdGhlaXIgZnVuZHMgYWZ0ZXIgdGhlIE9wdGlvbidzIE1hdHVyYXRpb24uCiAgZnVuY3Rpb24gY2xvc2VPcHRpb24oYWRkcmVzc1szXSB0b2tlbkFfdG9rZW5CX21ha2VyLAogICAgICAgICAgICAgICAgICAgICAgIHVpbnRbM10gbGltaXRUb2tlbkFfbGltaXRUb2tlbkJfcHJlbWl1bSwKICAgICAgICAgICAgICAgICAgICAgICB1aW50WzJdIG1hdHVyYXRpb25fZXhwaXJhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICBib29sIG1ha2VySXNTZWxsZXIpIGV4dGVybmFsIHsKICAgIC8vIE9wdGlvbiBtdXN0IGhhdmUgTWF0dXJlZCwgd2hpY2ggbWVhbnMgaXQncyBmaWxsZWQsIGhhcyBwYXNzZWQgaXRzIE1hdHVyYXRpb24gdGltZSwgYW5kIGlzIHVuY2xvc2VkLgogICAgcmVxdWlyZShnZXRPcHRpb25TdGF0ZSh0b2tlbkFfdG9rZW5CX21ha2VyLCBsaW1pdFRva2VuQV9saW1pdFRva2VuQl9wcmVtaXVtLCBtYXR1cmF0aW9uX2V4cGlyYXRpb24sIG1ha2VySXNTZWxsZXIpID09IG9wdGlvblN0YXRlcy5NYXR1cmVkKTsKICAgIGJ5dGVzMzIgb3B0aW9uSGFzaCA9IGdldE9wdGlvbkhhc2godG9rZW5BX3Rva2VuQl9tYWtlciwgbGltaXRUb2tlbkFfbGltaXRUb2tlbkJfcHJlbWl1bSwgbWF0dXJhdGlvbl9leHBpcmF0aW9uLCBtYWtlcklzU2VsbGVyKTsKICAgIGFkZHJlc3Mgc2VsbGVyID0gZ2V0U2VsbGVyKHRva2VuQV90b2tlbkJfbWFrZXJbMl0sIG9wdGlvblRha2VyW29wdGlvbkhhc2hdLCBtYWtlcklzU2VsbGVyKTsKICAgIC8vIE9ubHkgYWxsb3cgdGhlIFNlbGxlciB0byBjbG9zZSB0aGVpciBvd24gT3B0aW9uLgogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHNlbGxlcik7CiAgICAvLyBUcmFuc2ZlciB0aGUgT3B0aW9uJ3MgZW50aXJlIGJhbGFuY2Ugb2YgZWFjaCB0b2tlbiBiYWNrIHRvIHRoZSBTZWxsZXIsIGNsb3NpbmcgdGhlIE9wdGlvbi4KICAgIHRyYW5zZmVyT3B0aW9uVG9Vc2VyKG9wdGlvbkhhc2gsIHNlbGxlciwgdG9rZW5BX3Rva2VuQl9tYWtlclswXSwgb3B0aW9uQmFsYW5jZVtvcHRpb25IYXNoXVt0b2tlbkFfdG9rZW5CX21ha2VyWzBdXSk7CiAgICB0cmFuc2Zlck9wdGlvblRvVXNlcihvcHRpb25IYXNoLCBzZWxsZXIsIHRva2VuQV90b2tlbkJfbWFrZXJbMV0sIG9wdGlvbkJhbGFuY2Vbb3B0aW9uSGFzaF1bdG9rZW5BX3Rva2VuQl9tYWtlclsxXV0pOwogIH0KICAKICBmdW5jdGlvbigpIHBheWFibGUgZXh0ZXJuYWwgewogICAgcmV2ZXJ0KCk7CiAgfQogIAp9'.
	

]
