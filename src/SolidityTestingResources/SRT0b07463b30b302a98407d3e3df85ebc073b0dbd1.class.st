Class {
	#name : #SRT0b07463b30b302a98407d3e3df85ebc073b0dbd1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0b07463b30b302a98407d3e3df85ebc073b0dbd1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgovLyBGaWxlOiBjb250cmFjdHMvRU5TLnNvbAoKLyoqCiAqIFRoZSBFTlMgcmVnaXN0cnkgY29udHJhY3QuCiAqLwpjb250cmFjdCBFTlMgewogICAgLy8gTG9nZ2VkIHdoZW4gdGhlIG93bmVyIG9mIGEgbm9kZSBhc3NpZ25zIGEgbmV3IG93bmVyIHRvIGEgc3Vibm9kZS4KICAgIGV2ZW50IE5ld093bmVyKGJ5dGVzMzIgaW5kZXhlZCBub2RlLCBieXRlczMyIGluZGV4ZWQgbGFiZWwsIGFkZHJlc3Mgb3duZXIpOwoKICAgIC8vIExvZ2dlZCB3aGVuIHRoZSBvd25lciBvZiBhIG5vZGUgdHJhbnNmZXJzIG93bmVyc2hpcCB0byBhIG5ldyBhY2NvdW50LgogICAgZXZlbnQgVHJhbnNmZXIoYnl0ZXMzMiBpbmRleGVkIG5vZGUsIGFkZHJlc3Mgb3duZXIpOwoKICAgIC8vIExvZ2dlZCB3aGVuIHRoZSByZXNvbHZlciBmb3IgYSBub2RlIGNoYW5nZXMuCiAgICBldmVudCBOZXdSZXNvbHZlcihieXRlczMyIGluZGV4ZWQgbm9kZSwgYWRkcmVzcyByZXNvbHZlcik7CgogICAgLy8gTG9nZ2VkIHdoZW4gdGhlIFRUTCBvZiBhIG5vZGUgY2hhbmdlcwogICAgZXZlbnQgTmV3VFRMKGJ5dGVzMzIgaW5kZXhlZCBub2RlLCB1aW50NjQgdHRsKTsKCiAgICBzdHJ1Y3QgUmVjb3JkIHsKICAgICAgICBhZGRyZXNzIG93bmVyOwogICAgICAgIGFkZHJlc3MgcmVzb2x2ZXI7CiAgICAgICAgdWludDY0IHR0bDsKICAgIH0KCiAgICBtYXBwaW5nIChieXRlczMyID0+IFJlY29yZCkgcmVjb3JkczsKCiAgICAvLyBQZXJtaXRzIG1vZGlmaWNhdGlvbnMgb25seSBieSB0aGUgb3duZXIgb2YgdGhlIHNwZWNpZmllZCBub2RlLgogICAgbW9kaWZpZXIgb25seV9vd25lcihieXRlczMyIG5vZGUpIHsKICAgICAgICBpZiAocmVjb3Jkc1tub2RlXS5vd25lciAhPSBtc2cuc2VuZGVyKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0cyBhIG5ldyBFTlMgcmVnaXN0cmFyLgogICAgICovCiAgICBmdW5jdGlvbiBFTlMoKSBwdWJsaWMgewogICAgICAgIHJlY29yZHNbMF0ub3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgYWRkcmVzcyB0aGF0IG93bnMgdGhlIHNwZWNpZmllZCBub2RlLgogICAgICovCiAgICBmdW5jdGlvbiBvd25lcihieXRlczMyIG5vZGUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIHJlY29yZHNbbm9kZV0ub3duZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBhZGRyZXNzIG9mIHRoZSByZXNvbHZlciBmb3IgdGhlIHNwZWNpZmllZCBub2RlLgogICAgICovCiAgICBmdW5jdGlvbiByZXNvbHZlcihieXRlczMyIG5vZGUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIHJlY29yZHNbbm9kZV0ucmVzb2x2ZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBUVEwgb2YgYSBub2RlLCBhbmQgYW55IHJlY29yZHMgYXNzb2NpYXRlZCB3aXRoIGl0LgogICAgICovCiAgICBmdW5jdGlvbiB0dGwoYnl0ZXMzMiBub2RlKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICAgICAgcmV0dXJuIHJlY29yZHNbbm9kZV0udHRsOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXJzIG93bmVyc2hpcCBvZiBhIG5vZGUgdG8gYSBuZXcgYWRkcmVzcy4gTWF5IG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBjdXJyZW50CiAgICAgKiBvd25lciBvZiB0aGUgbm9kZS4KICAgICAqIEBwYXJhbSBub2RlIFRoZSBub2RlIHRvIHRyYW5zZmVyIG93bmVyc2hpcCBvZi4KICAgICAqIEBwYXJhbSBvd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IG93bmVyLgogICAgICovCiAgICBmdW5jdGlvbiBzZXRPd25lcihieXRlczMyIG5vZGUsIGFkZHJlc3Mgb3duZXIpIHB1YmxpYyBvbmx5X293bmVyKG5vZGUpIHsKICAgICAgICBUcmFuc2Zlcihub2RlLCBvd25lcik7CiAgICAgICAgcmVjb3Jkc1tub2RlXS5vd25lciA9IG93bmVyOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXJzIG93bmVyc2hpcCBvZiBhIHN1Ym5vZGUgc2hhMyhub2RlLCBsYWJlbCkgdG8gYSBuZXcgYWRkcmVzcy4gTWF5IG9ubHkgYmUKICAgICAqIGNhbGxlZCBieSB0aGUgb3duZXIgb2YgdGhlIHBhcmVudCBub2RlLgogICAgICogQHBhcmFtIG5vZGUgVGhlIHBhcmVudCBub2RlLgogICAgICogQHBhcmFtIGxhYmVsIFRoZSBoYXNoIG9mIHRoZSBsYWJlbCBzcGVjaWZ5aW5nIHRoZSBzdWJub2RlLgogICAgICogQHBhcmFtIG93bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgb3duZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFN1Ym5vZGVPd25lcihieXRlczMyIG5vZGUsIGJ5dGVzMzIgbGFiZWwsIGFkZHJlc3Mgb3duZXIpIHB1YmxpYyBvbmx5X293bmVyKG5vZGUpIHsKICAgICAgICB2YXIgc3Vibm9kZSA9IHNoYTMobm9kZSwgbGFiZWwpOwogICAgICAgIE5ld093bmVyKG5vZGUsIGxhYmVsLCBvd25lcik7CiAgICAgICAgcmVjb3Jkc1tzdWJub2RlXS5vd25lciA9IG93bmVyOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgcmVzb2x2ZXIgYWRkcmVzcyBmb3IgdGhlIHNwZWNpZmllZCBub2RlLgogICAgICogQHBhcmFtIG5vZGUgVGhlIG5vZGUgdG8gdXBkYXRlLgogICAgICogQHBhcmFtIHJlc29sdmVyIFRoZSBhZGRyZXNzIG9mIHRoZSByZXNvbHZlci4KICAgICAqLwogICAgZnVuY3Rpb24gc2V0UmVzb2x2ZXIoYnl0ZXMzMiBub2RlLCBhZGRyZXNzIHJlc29sdmVyKSBwdWJsaWMgb25seV9vd25lcihub2RlKSB7CiAgICAgICAgTmV3UmVzb2x2ZXIobm9kZSwgcmVzb2x2ZXIpOwogICAgICAgIHJlY29yZHNbbm9kZV0ucmVzb2x2ZXIgPSByZXNvbHZlcjsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIFRUTCBmb3IgdGhlIHNwZWNpZmllZCBub2RlLgogICAgICogQHBhcmFtIG5vZGUgVGhlIG5vZGUgdG8gdXBkYXRlLgogICAgICogQHBhcmFtIHR0bCBUaGUgVFRMIGluIHNlY29uZHMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFRUTChieXRlczMyIG5vZGUsIHVpbnQ2NCB0dGwpIHB1YmxpYyBvbmx5X293bmVyKG5vZGUpIHsKICAgICAgICBOZXdUVEwobm9kZSwgdHRsKTsKICAgICAgICByZWNvcmRzW25vZGVdLnR0bCA9IHR0bDsKICAgIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL0hhc2hSZWdpc3RyYXJTaW1wbGlmaWVkLnNvbAoKY29udHJhY3QgRGVlZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIHByZXZpb3VzT3duZXI7Cn0KCmNvbnRyYWN0IEhhc2hSZWdpc3RyYXJTaW1wbGlmaWVkIHsKICAgIGVudW0gTW9kZSB7IE9wZW4sIEF1Y3Rpb24sIE93bmVkLCBGb3JiaWRkZW4sIFJldmVhbCwgTm90WWV0QXZhaWxhYmxlIH0KCiAgICBieXRlczMyIHB1YmxpYyByb290Tm9kZTsKCiAgICBmdW5jdGlvbiBlbnRyaWVzKGJ5dGVzMzIgX2hhc2gpIHB1YmxpYyB2aWV3IHJldHVybnMgKE1vZGUsIGFkZHJlc3MsIHVpbnQsIHVpbnQsIHVpbnQpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYnl0ZXMzMiBfaGFzaCwgYWRkcmVzcyBuZXdPd25lcikgcHVibGljOwp9CgovLyBGaWxlOiBjb250cmFjdHMvUmVnaXN0cmFySW50ZXJmYWNlLnNvbAoKY29udHJhY3QgUmVnaXN0cmFySW50ZXJmYWNlIHsKICAgIGV2ZW50IE93bmVyQ2hhbmdlZChieXRlczMyIGluZGV4ZWQgbGFiZWwsIGFkZHJlc3MgaW5kZXhlZCBvbGRPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKICAgIGV2ZW50IERvbWFpbkNvbmZpZ3VyZWQoYnl0ZXMzMiBpbmRleGVkIGxhYmVsKTsKICAgIGV2ZW50IERvbWFpblVubGlzdGVkKGJ5dGVzMzIgaW5kZXhlZCBsYWJlbCk7CiAgICBldmVudCBOZXdSZWdpc3RyYXRpb24oYnl0ZXMzMiBpbmRleGVkIGxhYmVsLCBzdHJpbmcgc3ViZG9tYWluLCBhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCByZWZlcnJlciwgdWludCBwcmljZSk7CiAgICBldmVudCBSZW50UGFpZChieXRlczMyIGluZGV4ZWQgbGFiZWwsIHN0cmluZyBzdWJkb21haW4sIHVpbnQgYW1vdW50LCB1aW50IGV4cGlyYXRpb25EYXRlKTsKCiAgICAvLyBJbnRlcmZhY2VJRCBvZiB0aGVzZSBmb3VyIG1ldGhvZHMgaXMgMHhjMWIxNWY1YQogICAgZnVuY3Rpb24gcXVlcnkoYnl0ZXMzMiBsYWJlbCwgc3RyaW5nIHN1YmRvbWFpbikgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIGRvbWFpbiwgdWludCBzaWdudXBGZWUsIHVpbnQgcmVudCwgdWludCByZWZlcnJhbEZlZVBQTSk7CiAgICBmdW5jdGlvbiByZWdpc3RlcihieXRlczMyIGxhYmVsLCBzdHJpbmcgc3ViZG9tYWluLCBhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHJlZmVycmVyLCBhZGRyZXNzIHJlc29sdmVyKSBwdWJsaWMgcGF5YWJsZTsKCiAgICBmdW5jdGlvbiByZW50RHVlKGJ5dGVzMzIgbGFiZWwsIHN0cmluZyBzdWJkb21haW4pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQgdGltZXN0YW1wKTsKICAgIGZ1bmN0aW9uIHBheVJlbnQoYnl0ZXMzMiBsYWJlbCwgc3RyaW5nIHN1YmRvbWFpbikgcHVibGljIHBheWFibGU7Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9SZXNvbHZlci5zb2wKCi8qKgogKiBAZGV2IEEgYmFzaWMgaW50ZXJmYWNlIGZvciBFTlMgcmVzb2x2ZXJzLgogKi8KY29udHJhY3QgUmVzb2x2ZXIgewogICAgZnVuY3Rpb24gc3VwcG9ydHNJbnRlcmZhY2UoYnl0ZXM0IGludGVyZmFjZUlEKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFkZHIoYnl0ZXMzMiBub2RlKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIHNldEFkZHIoYnl0ZXMzMiBub2RlLCBhZGRyZXNzIGFkZHIpIHB1YmxpYzsKfQoKLy8gRmlsZTogY29udHJhY3RzL1N1YmRvbWFpblJlZ2lzdHJhci5zb2wKCi8qKgogKiBAZGV2IEltcGxlbWVudHMgYW4gRU5TIHJlZ2lzdHJhciB0aGF0IHNlbGxzIHN1YmRvbWFpbnMgb24gYmVoYWxmIG9mIHRoZWlyIG93bmVycy4KICoKICogVXNlcnMgbWF5IHJlZ2lzdGVyIGEgc3ViZG9tYWluIGJ5IGNhbGxpbmcgYHJlZ2lzdGVyYCB3aXRoIHRoZSBuYW1lIG9mIHRoZSBkb21haW4KICogdGhleSB3aXNoIHRvIHJlZ2lzdGVyIHVuZGVyLCBhbmQgdGhlIGxhYmVsIGhhc2ggb2YgdGhlIHN1YmRvbWFpbiB0aGV5IHdhbnQgdG8KICogcmVnaXN0ZXIuIFRoZXkgbXVzdCBhbHNvIHNwZWNpZnkgdGhlIG5ldyBvd25lciBvZiB0aGUgZG9tYWluLCBhbmQgdGhlIHJlZmVycmVyLAogKiB3aG8gaXMgcGFpZCBhbiBvcHRpb25hbCBmaW5kZXIncyBmZWUuIFRoZSByZWdpc3RyYXIgdGhlbiBjb25maWd1cmVzIGEgc2ltcGxlCiAqIGRlZmF1bHQgcmVzb2x2ZXIsIHdoaWNoIHJlc29sdmVzIGBhZGRyYCBsb29rdXBzIHRvIHRoZSBuZXcgb3duZXIsIGFuZCBzZXRzCiAqIHRoZSBgb3duZXJgIGFjY291bnQgYXMgdGhlIG93bmVyIG9mIHRoZSBzdWJkb21haW4gaW4gRU5TLgogKgogKiBOZXcgZG9tYWlucyBtYXkgYmUgYWRkZWQgYnkgY2FsbGluZyBgY29uZmlndXJlRG9tYWluYCwgdGhlbiB0cmFuc2ZlcnJpbmcKICogb3duZXJzaGlwIGluIHRoZSBFTlMgcmVnaXN0cnkgdG8gdGhpcyBjb250cmFjdC4gT3duZXJzaGlwIGluIHRoZSBjb250cmFjdAogKiBtYXkgYmUgdHJhbnNmZXJyZWQgdXNpbmcgYHRyYW5zZmVyYCwgYW5kIGEgZG9tYWluIG1heSBiZSB1bmxpc3RlZCBmb3Igc2FsZQogKiB1c2luZyBgdW5saXN0RG9tYWluYC4gVGhlcmUgaXMgKGRlbGliZXJhdGVseSkgbm8gd2F5IHRvIHJlY292ZXIgb3duZXJzaGlwCiAqIGluIEVOUyBvbmNlIHRoZSBuYW1lIGlzIHRyYW5zZmVycmVkIHRvIHRoaXMgcmVnaXN0cmFyLgogKgogKiBDcml0aWNhbGx5LCB0aGlzIGNvbnRyYWN0IGRvZXMgbm90IGNoZWNrIG9uZSBrZXkgcHJvcGVydHkgb2YgYSBsaXN0ZWQgZG9tYWluOgogKgogKiAtIElzIHRoZSBuYW1lIFVUUzQ2IG5vcm1hbGlzZWQ/CiAqCiAqIFVzZXIgYXBwbGljYXRpb25zIE1VU1QgY2hlY2sgdGhlc2UgdHdvIGVsZW1lbnRzIGZvciBlYWNoIGRvbWFpbiBiZWZvcmUKICogb2ZmZXJpbmcgdGhlbSB0byB1c2VycyBmb3IgcmVnaXN0cmF0aW9uLgogKgogKiBBcHBsaWNhdGlvbnMgc2hvdWxkIGFkZGl0aW9uYWxseSBjaGVjayB0aGF0IHRoZSBkb21haW5zIHRoZXkgYXJlIG9mZmVyaW5nIHRvCiAqIHJlZ2lzdGVyIGFyZSBjb250cm9sbGVkIGJ5IHRoaXMgcmVnaXN0cmFyLCBzaW5jZSBjYWxscyB0byBgcmVnaXN0ZXJgIHdpbGwKICogZmFpbCBpZiB0aGlzIGlzIG5vdCB0aGUgY2FzZS4KICovCmNvbnRyYWN0IFN1YmRvbWFpblJlZ2lzdHJhciBpcyBSZWdpc3RyYXJJbnRlcmZhY2UgewoKICAgIC8vIG5hbWVoYXNoKCdldGgnKQogICAgYnl0ZXMzMiBjb25zdGFudCBwdWJsaWMgVExEX05PREUgPSAweDkzY2RlYjcwOGI3NTQ1ZGM2NjhlYjkyODAxNzYxNjlkMWMzM2NmZDhlZDZmMDQ2OTBhMGJjYzg4YTkzZmM0YWU7CgogICAgYm9vbCBwdWJsaWMgc3RvcHBlZCA9IGZhbHNlOwogICAgYWRkcmVzcyBwdWJsaWMgcmVnaXN0cmFyT3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBtaWdyYXRpb247CgogICAgRU5TIHB1YmxpYyBlbnM7CiAgICBIYXNoUmVnaXN0cmFyU2ltcGxpZmllZCBwdWJsaWMgaGFzaFJlZ2lzdHJhcjsKCiAgICBzdHJ1Y3QgRG9tYWluIHsKICAgICAgICBzdHJpbmcgbmFtZTsKICAgICAgICBhZGRyZXNzIG93bmVyOwogICAgICAgIGFkZHJlc3MgdHJhbnNmZXJBZGRyZXNzOwogICAgICAgIHVpbnQgcHJpY2U7CiAgICAgICAgdWludCByZWZlcnJhbEZlZVBQTTsKICAgIH0KCiAgICBtYXBwaW5nIChieXRlczMyID0+IERvbWFpbikgZG9tYWluczsKCiAgICBtb2RpZmllciBuZXdfcmVnaXN0cmFyKCkgewogICAgICAgIHJlcXVpcmUoZW5zLm93bmVyKFRMRF9OT0RFKSAhPSBhZGRyZXNzKGhhc2hSZWdpc3RyYXIpKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG93bmVyX29ubHkoYnl0ZXMzMiBsYWJlbCkgewogICAgICAgIHJlcXVpcmUob3duZXIobGFiZWwpID09IG1zZy5zZW5kZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbm90X3N0b3BwZWQoKSB7CiAgICAgICAgcmVxdWlyZSghc3RvcHBlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciByZWdpc3RyYXJfb3duZXJfb25seSgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gcmVnaXN0cmFyT3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZXZlbnQgVHJhbnNmZXJBZGRyZXNzU2V0KGJ5dGVzMzIgaW5kZXhlZCBsYWJlbCwgYWRkcmVzcyBhZGRyKTsKICAgIGV2ZW50IERvbWFpblRyYW5zZmVycmVkKGJ5dGVzMzIgaW5kZXhlZCBsYWJlbCwgc3RyaW5nIG5hbWUpOwoKICAgIGZ1bmN0aW9uIFN1YmRvbWFpblJlZ2lzdHJhcihFTlMgX2VucykgcHVibGljIHsKICAgICAgICBlbnMgPSBfZW5zOwogICAgICAgIGhhc2hSZWdpc3RyYXIgPSBIYXNoUmVnaXN0cmFyU2ltcGxpZmllZChlbnMub3duZXIoVExEX05PREUpKTsKICAgICAgICByZWdpc3RyYXJPd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IG93bmVyIHJldHVybnMgdGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgdGhhdCBjb250cm9scyBhIGRvbWFpbi4KICAgICAqICAgICAgSW5pdGlhbGx5IHRoaXMgaXMgYSBudWxsIGFkZHJlc3MuIElmIHRoZSBuYW1lIGhhcyBiZWVuCiAgICAgKiAgICAgIHRyYW5zZmVycmVkIHRvIHRoaXMgY29udHJhY3QsIHRoZW4gdGhlIGludGVybmFsIG1hcHBpbmcgaXMgY29uc3VsdGVkCiAgICAgKiAgICAgIHRvIGRldGVybWluZSB3aG8gY29udHJvbHMgaXQuIElmIHRoZSBvd25lciBpcyBub3Qgc2V0LAogICAgICogICAgICB0aGUgcHJldmlvdXMgb3duZXIgb2YgdGhlIGRlZWQgaXMgcmV0dXJuZWQuCiAgICAgKiBAcGFyYW0gbGFiZWwgVGhlIGxhYmVsIGhhc2ggb2YgdGhlIGRlZWQgdG8gY2hlY2suCiAgICAgKiBAcmV0dXJuIFRoZSBhZGRyZXNzIG93bmluZyB0aGUgZGVlZC4KICAgICAqLwogICAgZnVuY3Rpb24gb3duZXIoYnl0ZXMzMiBsYWJlbCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcykgewoKICAgICAgICBpZiAoZG9tYWluc1tsYWJlbF0ub3duZXIgIT0gMHgwKSB7CiAgICAgICAgICAgIHJldHVybiBkb21haW5zW2xhYmVsXS5vd25lcjsKICAgICAgICB9CgogICAgICAgIERlZWQgZG9tYWluRGVlZCA9IGRlZWQobGFiZWwpOwogICAgICAgIGlmIChkb21haW5EZWVkLm93bmVyKCkgIT0gYWRkcmVzcyh0aGlzKSkgewogICAgICAgICAgICByZXR1cm4gMHgwOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGRvbWFpbkRlZWQucHJldmlvdXNPd25lcigpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUcmFuc2ZlcnMgaW50ZXJuYWwgY29udHJvbCBvZiBhIG5hbWUgdG8gYSBuZXcgYWNjb3VudC4gRG9lcyBub3QgdXBkYXRlCiAgICAgKiAgICAgIEVOUy4KICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRvIHRyYW5zZmVyLgogICAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgb3duZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKHN0cmluZyBuYW1lLCBhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb3duZXJfb25seShrZWNjYWsyNTYobmFtZSkpIHsKICAgICAgICBieXRlczMyIGxhYmVsID0ga2VjY2FrMjU2KG5hbWUpOwogICAgICAgIE93bmVyQ2hhbmdlZChrZWNjYWsyNTYobmFtZSksIGRvbWFpbnNbbGFiZWxdLm93bmVyLCBuZXdPd25lcik7CiAgICAgICAgZG9tYWluc1tsYWJlbF0ub3duZXIgPSBuZXdPd25lcjsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgU2V0cyB0aGUgcmVzb2x2ZXIgcmVjb3JkIGZvciBhIG5hbWUgaW4gRU5TLgogICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdG8gc2V0IHRoZSByZXNvbHZlciBmb3IuCiAgICAgKiBAcGFyYW0gcmVzb2x2ZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIHJlc29sdmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFJlc29sdmVyKHN0cmluZyBuYW1lLCBhZGRyZXNzIHJlc29sdmVyKSBwdWJsaWMgb3duZXJfb25seShrZWNjYWsyNTYobmFtZSkpIHsKICAgICAgICBieXRlczMyIGxhYmVsID0ga2VjY2FrMjU2KG5hbWUpOwogICAgICAgIGJ5dGVzMzIgbm9kZSA9IGtlY2NhazI1NihUTERfTk9ERSwgbGFiZWwpOwogICAgICAgIGVucy5zZXRSZXNvbHZlcihub2RlLCByZXNvbHZlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IENvbmZpZ3VyZXMgYSBkb21haW4gZm9yIHNhbGUuCiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBjb25maWd1cmUuCiAgICAgKiBAcGFyYW0gcHJpY2UgVGhlIHByaWNlIGluIHdlaSB0byBjaGFyZ2UgZm9yIHN1YmRvbWFpbiByZWdpc3RyYXRpb25zCiAgICAgKiBAcGFyYW0gcmVmZXJyYWxGZWVQUE0gVGhlIHJlZmVycmFsIGZlZSB0byBvZmZlciwgaW4gcGFydHMgcGVyIG1pbGxpb24KICAgICAqLwogICAgZnVuY3Rpb24gY29uZmlndXJlRG9tYWluKHN0cmluZyBuYW1lLCB1aW50IHByaWNlLCB1aW50IHJlZmVycmFsRmVlUFBNKSBwdWJsaWMgewogICAgICAgIGNvbmZpZ3VyZURvbWFpbkZvcihuYW1lLCBwcmljZSwgcmVmZXJyYWxGZWVQUE0sIG1zZy5zZW5kZXIsIDB4MCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IENvbmZpZ3VyZXMgYSBkb21haW4sIG9wdGlvbmFsbHkgdHJhbnNmZXJyaW5nIGl0IHRvIGEgbmV3IG93bmVyLgogICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdG8gY29uZmlndXJlLgogICAgICogQHBhcmFtIHByaWNlIFRoZSBwcmljZSBpbiB3ZWkgdG8gY2hhcmdlIGZvciBzdWJkb21haW4gcmVnaXN0cmF0aW9ucy4KICAgICAqIEBwYXJhbSByZWZlcnJhbEZlZVBQTSBUaGUgcmVmZXJyYWwgZmVlIHRvIG9mZmVyLCBpbiBwYXJ0cyBwZXIgbWlsbGlvbi4KICAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gYXNzaWduIG93bmVyc2hpcCBvZiB0aGlzIGRvbWFpbiB0by4KICAgICAqIEBwYXJhbSBfdHJhbnNmZXIgVGhlIGFkZHJlc3MgdG8gc2V0IGFzIHRoZSB0cmFuc2ZlciBhZGRyZXNzIGZvciB0aGUgbmFtZQogICAgICogICAgICAgIHdoZW4gdGhlIHBlcm1hbmVudCByZWdpc3RyYXIgaXMgcmVwbGFjZWQuIENhbiBvbmx5IGJlIHNldCB0byBhIG5vbi16ZXJvCiAgICAgKiAgICAgICAgdmFsdWUgb25jZS4KICAgICAqLwogICAgZnVuY3Rpb24gY29uZmlndXJlRG9tYWluRm9yKHN0cmluZyBuYW1lLCB1aW50IHByaWNlLCB1aW50IHJlZmVycmFsRmVlUFBNLCBhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfdHJhbnNmZXIpIHB1YmxpYyBvd25lcl9vbmx5KGtlY2NhazI1NihuYW1lKSkgewogICAgICAgIGJ5dGVzMzIgbGFiZWwgPSBrZWNjYWsyNTYobmFtZSk7CiAgICAgICAgRG9tYWluIHN0b3JhZ2UgZG9tYWluID0gZG9tYWluc1tsYWJlbF07CgogICAgICAgIC8vIERvbid0IGFsbG93IGNoYW5naW5nIHRoZSB0cmFuc2ZlciBhZGRyZXNzIG9uY2Ugc2V0LiBUcmVhdCAwIGFzICJkb24ndCBjaGFuZ2UiIGZvciBjb252ZW5pZW5jZS4KICAgICAgICByZXF1aXJlKGRvbWFpbi50cmFuc2ZlckFkZHJlc3MgPT0gMCB8fCBfdHJhbnNmZXIgPT0gMCB8fCBkb21haW4udHJhbnNmZXJBZGRyZXNzID09IF90cmFuc2Zlcik7CgogICAgICAgIGlmIChkb21haW4ub3duZXIgIT0gX293bmVyKSB7CiAgICAgICAgICAgIGRvbWFpbi5vd25lciA9IF9vd25lcjsKICAgICAgICB9CgogICAgICAgIGlmIChrZWNjYWsyNTYoZG9tYWluLm5hbWUpICE9IGxhYmVsKSB7CiAgICAgICAgICAgIC8vIE5ldyBsaXN0aW5nCiAgICAgICAgICAgIGRvbWFpbi5uYW1lID0gbmFtZTsKICAgICAgICB9CgogICAgICAgIGRvbWFpbi5wcmljZSA9IHByaWNlOwogICAgICAgIGRvbWFpbi5yZWZlcnJhbEZlZVBQTSA9IHJlZmVycmFsRmVlUFBNOwoKICAgICAgICBpZiAoZG9tYWluLnRyYW5zZmVyQWRkcmVzcyAhPSBfdHJhbnNmZXIgJiYgX3RyYW5zZmVyICE9IDApIHsKICAgICAgICAgICAgZG9tYWluLnRyYW5zZmVyQWRkcmVzcyA9IF90cmFuc2ZlcjsKICAgICAgICAgICAgVHJhbnNmZXJBZGRyZXNzU2V0KGxhYmVsLCBfdHJhbnNmZXIpOwogICAgICAgIH0KCiAgICAgICAgRG9tYWluQ29uZmlndXJlZChsYWJlbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFNldHMgdGhlIHRyYW5zZmVyIGFkZHJlc3Mgb2YgYSBkb21haW4gZm9yIGFmdGVyIGFuIEVOUyB1cGRhdGUuCiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBmb3Igd2hpY2ggdG8gc2V0IHRoZSB0cmFuc2ZlciBhZGRyZXNzLgogICAgICogQHBhcmFtIHRyYW5zZmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICAgICovCiAgICBmdW5jdGlvbiBzZXRUcmFuc2ZlckFkZHJlc3Moc3RyaW5nIG5hbWUsIGFkZHJlc3MgdHJhbnNmZXIpIHB1YmxpYyBvd25lcl9vbmx5KGtlY2NhazI1NihuYW1lKSkgewogICAgICAgIGJ5dGVzMzIgbGFiZWwgPSBrZWNjYWsyNTYobmFtZSk7CiAgICAgICAgRG9tYWluIHN0b3JhZ2UgZG9tYWluID0gZG9tYWluc1tsYWJlbF07CgogICAgICAgIHJlcXVpcmUoZG9tYWluLnRyYW5zZmVyQWRkcmVzcyA9PSAweDApOwoKICAgICAgICBkb21haW4udHJhbnNmZXJBZGRyZXNzID0gdHJhbnNmZXI7CiAgICAgICAgVHJhbnNmZXJBZGRyZXNzU2V0KGxhYmVsLCB0cmFuc2Zlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFVubGlzdHMgYSBkb21haW4KICAgICAqIE1heSBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXIuCiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgZG9tYWluIHRvIHVubGlzdC4KICAgICAqLwogICAgZnVuY3Rpb24gdW5saXN0RG9tYWluKHN0cmluZyBuYW1lKSBwdWJsaWMgb3duZXJfb25seShrZWNjYWsyNTYobmFtZSkpIHsKICAgICAgICBieXRlczMyIGxhYmVsID0ga2VjY2FrMjU2KG5hbWUpOwogICAgICAgIERvbWFpbiBzdG9yYWdlIGRvbWFpbiA9IGRvbWFpbnNbbGFiZWxdOwogICAgICAgIERvbWFpblVubGlzdGVkKGxhYmVsKTsKCiAgICAgICAgZG9tYWluLm5hbWUgPSAnJzsKICAgICAgICBkb21haW4ub3duZXIgPSBvd25lcihsYWJlbCk7CiAgICAgICAgZG9tYWluLnByaWNlID0gMDsKICAgICAgICBkb21haW4ucmVmZXJyYWxGZWVQUE0gPSAwOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IGEgc3ViZG9tYWluLgogICAgICogQHBhcmFtIGxhYmVsIFRoZSBsYWJlbCBoYXNoIGZvciB0aGUgZG9tYWluLgogICAgICogQHBhcmFtIHN1YmRvbWFpbiBUaGUgbGFiZWwgZm9yIHRoZSBzdWJkb21haW4uCiAgICAgKiBAcmV0dXJuIGRvbWFpbiBUaGUgbmFtZSBvZiB0aGUgZG9tYWluLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgdGhlIHN1YmRvbWFpbgogICAgICogICAgICAgICAgICAgICAgaXMgdW5hdmFpbGFibGUuCiAgICAgKiBAcmV0dXJuIHByaWNlIFRoZSBwcmljZSB0byByZWdpc3RlciBhIHN1YmRvbWFpbiwgaW4gd2VpLgogICAgICogQHJldHVybiByZW50IFRoZSByZW50IHRvIHJldGFpbiBhIHN1YmRvbWFpbiwgaW4gd2VpIHBlciBzZWNvbmQuCiAgICAgKiBAcmV0dXJuIHJlZmVycmFsRmVlUFBNIFRoZSByZWZlcnJhbCBmZWUgZm9yIHRoZSBkYXBwLCBpbiBwcG0uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHF1ZXJ5KGJ5dGVzMzIgbGFiZWwsIHN0cmluZyBzdWJkb21haW4pIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBkb21haW4sIHVpbnQgcHJpY2UsIHVpbnQgcmVudCwgdWludCByZWZlcnJhbEZlZVBQTSkgewogICAgICAgIGJ5dGVzMzIgbm9kZSA9IGtlY2NhazI1NihUTERfTk9ERSwgbGFiZWwpOwogICAgICAgIGJ5dGVzMzIgc3Vibm9kZSA9IGtlY2NhazI1Nihub2RlLCBrZWNjYWsyNTYoc3ViZG9tYWluKSk7CgogICAgICAgIGlmIChlbnMub3duZXIoc3Vibm9kZSkgIT0gMCkgewogICAgICAgICAgICByZXR1cm4gKCcnLCAwLCAwLCAwKTsKICAgICAgICB9CgogICAgICAgIERvbWFpbiBkYXRhID0gZG9tYWluc1tsYWJlbF07CiAgICAgICAgcmV0dXJuIChkYXRhLm5hbWUsIGRhdGEucHJpY2UsIDAsIGRhdGEucmVmZXJyYWxGZWVQUE0pOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBSZWdpc3RlcnMgYSBzdWJkb21haW4uCiAgICAgKiBAcGFyYW0gbGFiZWwgVGhlIGxhYmVsIGhhc2ggb2YgdGhlIGRvbWFpbiB0byByZWdpc3RlciBhIHN1YmRvbWFpbiBvZi4KICAgICAqIEBwYXJhbSBzdWJkb21haW4gVGhlIGRlc2lyZWQgc3ViZG9tYWluIGxhYmVsLgogICAgICogQHBhcmFtIHN1YmRvbWFpbk93bmVyIFRoZSBhY2NvdW50IHRoYXQgc2hvdWxkIG93biB0aGUgbmV3bHkgY29uZmlndXJlZCBzdWJkb21haW4uCiAgICAgKiBAcGFyYW0gcmVmZXJyZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgdG8gcmVjZWl2ZSB0aGUgcmVmZXJyYWwgZmVlLgogICAgICovCiAgICBmdW5jdGlvbiByZWdpc3RlcihieXRlczMyIGxhYmVsLCBzdHJpbmcgc3ViZG9tYWluLCBhZGRyZXNzIHN1YmRvbWFpbk93bmVyLCBhZGRyZXNzIHJlZmVycmVyLCBhZGRyZXNzIHJlc29sdmVyKSBwdWJsaWMgbm90X3N0b3BwZWQgcGF5YWJsZSB7CiAgICAgICAgYnl0ZXMzMiBkb21haW5Ob2RlID0ga2VjY2FrMjU2KFRMRF9OT0RFLCBsYWJlbCk7CiAgICAgICAgYnl0ZXMzMiBzdWJkb21haW5MYWJlbCA9IGtlY2NhazI1NihzdWJkb21haW4pOwoKICAgICAgICAvLyBTdWJkb21haW4gbXVzdCBub3QgYmUgcmVnaXN0ZXJlZCBhbHJlYWR5LgogICAgICAgIHJlcXVpcmUoZW5zLm93bmVyKGtlY2NhazI1Nihkb21haW5Ob2RlLCBzdWJkb21haW5MYWJlbCkpID09IGFkZHJlc3MoMCkpOwoKICAgICAgICBEb21haW4gc3RvcmFnZSBkb21haW4gPSBkb21haW5zW2xhYmVsXTsKCiAgICAgICAgLy8gRG9tYWluIG11c3QgYmUgYXZhaWxhYmxlIGZvciByZWdpc3RyYXRpb24KICAgICAgICByZXF1aXJlKGtlY2NhazI1Nihkb21haW4ubmFtZSkgPT0gbGFiZWwpOwoKICAgICAgICAvLyBVc2VyIG11c3QgaGF2ZSBwYWlkIGVub3VnaAogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IGRvbWFpbi5wcmljZSk7CgogICAgICAgIC8vIFNlbmQgYW55IGV4dHJhIGJhY2sKICAgICAgICBpZiAobXNnLnZhbHVlID4gZG9tYWluLnByaWNlKSB7CiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIobXNnLnZhbHVlIC0gZG9tYWluLnByaWNlKTsKICAgICAgICB9CgogICAgICAgIC8vIFNlbmQgYW55IHJlZmVycmFsIGZlZQogICAgICAgIHVpbnQyNTYgdG90YWwgPSBkb21haW4ucHJpY2U7CiAgICAgICAgaWYgKGRvbWFpbi5yZWZlcnJhbEZlZVBQTSAqIGRvbWFpbi5wcmljZSA+IDAgJiYgcmVmZXJyZXIgIT0gMCAmJiByZWZlcnJlciAhPSBkb21haW4ub3duZXIpIHsKICAgICAgICAgICAgdWludDI1NiByZWZlcnJhbEZlZSA9IChkb21haW4ucHJpY2UgKiBkb21haW4ucmVmZXJyYWxGZWVQUE0pIC8gMTAwMDAwMDsKICAgICAgICAgICAgcmVmZXJyZXIudHJhbnNmZXIocmVmZXJyYWxGZWUpOwogICAgICAgICAgICB0b3RhbCAtPSByZWZlcnJhbEZlZTsKICAgICAgICB9CgogICAgICAgIC8vIFNlbmQgdGhlIHJlZ2lzdHJhdGlvbiBmZWUKICAgICAgICBpZiAodG90YWwgPiAwKSB7CiAgICAgICAgICAgIGRvbWFpbi5vd25lci50cmFuc2Zlcih0b3RhbCk7CiAgICAgICAgfQoKICAgICAgICAvLyBSZWdpc3RlciB0aGUgZG9tYWluCiAgICAgICAgaWYgKHN1YmRvbWFpbk93bmVyID09IDApIHsKICAgICAgICAgICAgc3ViZG9tYWluT3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIH0KICAgICAgICBkb1JlZ2lzdHJhdGlvbihkb21haW5Ob2RlLCBzdWJkb21haW5MYWJlbCwgc3ViZG9tYWluT3duZXIsIFJlc29sdmVyKHJlc29sdmVyKSk7CgogICAgICAgIE5ld1JlZ2lzdHJhdGlvbihsYWJlbCwgc3ViZG9tYWluLCBzdWJkb21haW5Pd25lciwgcmVmZXJyZXIsIGRvbWFpbi5wcmljZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZG9SZWdpc3RyYXRpb24oYnl0ZXMzMiBub2RlLCBieXRlczMyIGxhYmVsLCBhZGRyZXNzIHN1YmRvbWFpbk93bmVyLCBSZXNvbHZlciByZXNvbHZlcikgaW50ZXJuYWwgewogICAgICAgIC8vIEdldCB0aGUgc3ViZG9tYWluIHNvIHdlIGNhbiBjb25maWd1cmUgaXQKICAgICAgICBlbnMuc2V0U3Vibm9kZU93bmVyKG5vZGUsIGxhYmVsLCB0aGlzKTsKCiAgICAgICAgYnl0ZXMzMiBzdWJub2RlID0ga2VjY2FrMjU2KG5vZGUsIGxhYmVsKTsKICAgICAgICAvLyBTZXQgdGhlIHN1YmRvbWFpbidzIHJlc29sdmVyCiAgICAgICAgZW5zLnNldFJlc29sdmVyKHN1Ym5vZGUsIHJlc29sdmVyKTsKCiAgICAgICAgLy8gU2V0IHRoZSBhZGRyZXNzIHJlY29yZCBvbiB0aGUgcmVzb2x2ZXIKICAgICAgICByZXNvbHZlci5zZXRBZGRyKHN1Ym5vZGUsIHN1YmRvbWFpbk93bmVyKTsKCiAgICAgICAgLy8gUGFzcyBvd25lcnNoaXAgb2YgdGhlIG5ldyBzdWJkb21haW4gdG8gdGhlIHJlZ2lzdHJhbnQKICAgICAgICBlbnMuc2V0T3duZXIoc3Vibm9kZSwgc3ViZG9tYWluT3duZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1cHBvcnRzSW50ZXJmYWNlKGJ5dGVzNCBpbnRlcmZhY2VJRCkgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIChpbnRlcmZhY2VJRCA9PSAweDAxZmZjOWE3KSAvLyBzdXBwb3J0c0ludGVyZmFjZShieXRlczQpCiAgICAgICAgICAgIHx8IChpbnRlcmZhY2VJRCA9PSAweGMxYjE1ZjVhKSAvLyBSZWdpc3RyYXJJbnRlcmZhY2UKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbnREdWUoYnl0ZXMzMiBsYWJlbCwgc3RyaW5nIHN1YmRvbWFpbikgcHVibGljIHZpZXcgcmV0dXJucyAodWludCB0aW1lc3RhbXApIHsKICAgICAgICByZXR1cm4gMHhGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBVcGdyYWRlcyB0aGUgZG9tYWluIHRvIGEgbmV3IHJlZ2lzdHJhci4KICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBkb21haW4gdG8gdHJhbnNmZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHVwZ3JhZGUoc3RyaW5nIG5hbWUpIHB1YmxpYyBvd25lcl9vbmx5KGtlY2NhazI1NihuYW1lKSkgbmV3X3JlZ2lzdHJhciB7CiAgICAgICAgYnl0ZXMzMiBsYWJlbCA9IGtlY2NhazI1NihuYW1lKTsKICAgICAgICBhZGRyZXNzIHRyYW5zZmVyID0gZG9tYWluc1tsYWJlbF0udHJhbnNmZXJBZGRyZXNzOwoKICAgICAgICByZXF1aXJlKHRyYW5zZmVyICE9IDB4MCk7CgogICAgICAgIGRlbGV0ZSBkb21haW5zW2xhYmVsXTsKCiAgICAgICAgaGFzaFJlZ2lzdHJhci50cmFuc2ZlcihsYWJlbCwgdHJhbnNmZXIpOwogICAgICAgIERvbWFpblRyYW5zZmVycmVkKGxhYmVsLCBuYW1lKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBAZGV2IFN0b3BzIHRoZSByZWdpc3RyYXIsIGRpc2FibGluZyBjb25maWd1cmluZyBvZiBuZXcgZG9tYWlucy4KICAgICAqLwogICAgZnVuY3Rpb24gc3RvcCgpIHB1YmxpYyBub3Rfc3RvcHBlZCByZWdpc3RyYXJfb3duZXJfb25seSB7CiAgICAgICAgc3RvcHBlZCA9IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFNldHMgdGhlIGFkZHJlc3Mgd2hlcmUgZG9tYWlucyBhcmUgbWlncmF0ZWQgdG8uCiAgICAgKiBAcGFyYW0gX21pZ3JhdGlvbiBBZGRyZXNzIG9mIHRoZSBuZXcgcmVnaXN0cmFyLgogICAgICovCiAgICBmdW5jdGlvbiBzZXRNaWdyYXRpb25BZGRyZXNzKGFkZHJlc3MgX21pZ3JhdGlvbikgcHVibGljIHJlZ2lzdHJhcl9vd25lcl9vbmx5IHsKICAgICAgICByZXF1aXJlKHN0b3BwZWQpOwogICAgICAgIG1pZ3JhdGlvbiA9IF9taWdyYXRpb247CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IE1pZ3JhdGVzIHRoZSBkb21haW4gdG8gYSBuZXcgcmVnaXN0cmFyLgogICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGRvbWFpbiB0byBtaWdyYXRlLgogICAgICovCiAgICBmdW5jdGlvbiBtaWdyYXRlKHN0cmluZyBuYW1lKSBwdWJsaWMgb3duZXJfb25seShrZWNjYWsyNTYobmFtZSkpIHsKICAgICAgICByZXF1aXJlKHN0b3BwZWQpOwogICAgICAgIHJlcXVpcmUobWlncmF0aW9uICE9IDB4MCk7CgogICAgICAgIGJ5dGVzMzIgbGFiZWwgPSBrZWNjYWsyNTYobmFtZSk7CiAgICAgICAgRG9tYWluIHN0b3JhZ2UgZG9tYWluID0gZG9tYWluc1tsYWJlbF07CgogICAgICAgIGhhc2hSZWdpc3RyYXIudHJhbnNmZXIobGFiZWwsIG1pZ3JhdGlvbik7CgogICAgICAgIFN1YmRvbWFpblJlZ2lzdHJhcihtaWdyYXRpb24pLmNvbmZpZ3VyZURvbWFpbkZvcigKICAgICAgICAgICAgZG9tYWluLm5hbWUsCiAgICAgICAgICAgIGRvbWFpbi5wcmljZSwKICAgICAgICAgICAgZG9tYWluLnJlZmVycmFsRmVlUFBNLAogICAgICAgICAgICBkb21haW4ub3duZXIsCiAgICAgICAgICAgIGRvbWFpbi50cmFuc2ZlckFkZHJlc3MKICAgICAgICApOwoKICAgICAgICBkZWxldGUgZG9tYWluc1tsYWJlbF07CgogICAgICAgIERvbWFpblRyYW5zZmVycmVkKGxhYmVsLCBuYW1lKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgcmVnaXN0cmFyX293bmVyX29ubHkgewogICAgICAgIHJlZ2lzdHJhck93bmVyID0gbmV3T3duZXI7CiAgICB9CgogICAgZnVuY3Rpb24gcGF5UmVudChieXRlczMyIGxhYmVsLCBzdHJpbmcgc3ViZG9tYWluKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgZnVuY3Rpb24gZGVlZChieXRlczMyIGxhYmVsKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKERlZWQpIHsKICAgICAgICB2YXIgKCxkZWVkQWRkcmVzcywsLCkgPSBoYXNoUmVnaXN0cmFyLmVudHJpZXMobGFiZWwpOwogICAgICAgIHJldHVybiBEZWVkKGRlZWRBZGRyZXNzKTsKICAgIH0KfQ=='.
	

]
