Class {
	#name : #SRT77929546407E49F804096511c0d8B16b22039f4B,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT77929546407E49F804096511c0d8B16b22039f4B >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4gMC40IC4xMTsKCi8qKgogKiBPdmVyZmxvdyBhd2FyZSB1aW50IG1hdGggZnVuY3Rpb25zLgogKgogKiBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vTWFrZXJEQU8vbWFrZXItb3RjL2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9zaW1wbGVfbWFya2V0LnNvbAogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAgIC8qKiAKICAgICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAgICogYWNjb3VudC4KICAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgfQogICAgfQoKCn0KCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKTsKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLiAKICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aAogICAgZm9yIHVpbnQyNTY7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgoJLyoqCgkgICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwoJICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCgkgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgoJICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9CgkKCS8qKgoJICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCgkgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAoJICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCgkgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnModWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9Cgp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoJCgkvKioKCSAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCgkgICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KCSAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCgkgICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKCSAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB7CiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAgICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAgICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93OwoKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgoJICAvKioKCSAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KCSAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgoJICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgoJICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHsKCiAgICAgICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgICAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgcmV2ZXJ0KCk7CgogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfQoKCS8qKgoJICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCgkgICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KCSAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCgkgICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KCSAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnModWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCn0KCmNvbnRyYWN0IE1pbnRhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgTWludEZpbmlzaGVkKCk7CiAgICBldmVudCBNaW50U3RhcnRlZCgpOwoKICAgIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICBib29sIHB1YmxpYyBnb2FsUmVhY2hlZCA9IGZhbHNlOwogICAgdWludCBwdWJsaWMgbWludGluZ1N0YXJ0VGltZSA9IDA7CiAgICB1aW50IHB1YmxpYyBtYXhNaW50aW5nVGltZSA9IDMwIGRheXM7CiAgICB1aW50IHB1YmxpYyBtaW50aW5nR29hbCA9IDUwMCBldGhlcjsKCiAgICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJ1eVRyYW5zYWN0aW9uczsKICAgIGFkZHJlc3MgcHVibGljIHRpdHNUb2tlbkF1dGhvciA9IDB4MTg5ODkxZDAyNDQ1RDg3ZTcwZDUxNWZEMjE1OTQxNmYwMjNCMDA4NzsKCgkvKioKCSAgICogQGRldiBGZWxsIGZyZSB0byBkb25hdGUgQXV0aG9yIGlmIFlvdSBsaWtlIHdoYXQgaXMgcHJlc2VudGVkIGhlcmUKCSAgICovCiAgICBmdW5jdGlvbiBkb25hdGVBdXRob3IoKSBwYXlhYmxlIHsKICAgICAgICB0aXRzVG9rZW5BdXRob3IudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH0KCiAgICBib29sIHB1YmxpYyBhbHJlYWR5TWludGVkT25jZSA9IGZhbHNlOwoKICAgIG1vZGlmaWVyIG1pbnRpbmdDbG9zZWQoKSB7CiAgICAgICAgaWYgKG1pbnRpbmdGaW5pc2hlZCA9PSBmYWxzZSB8fCBhbHJlYWR5TWludGVkT25jZSA9PSBmYWxzZSkgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBub3RNaW50ZWRZZXQoKSB7CiAgICAgICAgaWYgKGFscmVhZHlNaW50ZWRPbmNlID09IHRydWUpIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgogICAgCgkvKioKCSAgICogQGRldiBQcmVtaXVtIGZvciBidXlpbmcgVElUUyBhdCB0aGUgYmVnaW5pbmcgb2YgSUNPIAoJICAgKiBAcmV0dXJuIGJvb2wgVHJ1ZSBpZiBubyBlcnJvcnMKCSAgICovCiAgICBmdW5jdGlvbiBmYXN0QnV5Qm9udXMoKSBwcml2YXRlIHJldHVybnModWludCkgewogICAgICAgIHVpbnQgcGVyaW9kID0gbm93IC0gbWludGluZ1N0YXJ0VGltZTsKICAgICAgICBpZiAocGVyaW9kIDwgMSBkYXlzKSB7CiAgICAgICAgICAgIHJldHVybiA1MDAwOwogICAgICAgIH0KICAgICAgICBpZiAocGVyaW9kIDwgMiBkYXlzKSB7CiAgICAgICAgICAgIHJldHVybiA0MDAwOwogICAgICAgIH0KICAgICAgICBpZiAocGVyaW9kIDwgMyBkYXlzKSB7CiAgICAgICAgICAgIHJldHVybiAzMDAwOwogICAgICAgIH0KICAgICAgICBpZiAocGVyaW9kIDwgNyBkYXlzKSB7CiAgICAgICAgICAgIHJldHVybiAyNjAwOwogICAgICAgIH0KICAgICAgICBpZiAocGVyaW9kIDwgMTAgZGF5cykgewogICAgICAgICAgICByZXR1cm4gMjQwMDsKICAgICAgICB9CiAgICAgICAgaWYgKHBlcmlvZCA8IDEyIGRheXMpIHsKICAgICAgICAgICAgcmV0dXJuIDIyMDA7CiAgICAgICAgfQogICAgICAgIGlmIChwZXJpb2QgPCAxNCBkYXlzKSB7CiAgICAgICAgICAgIHJldHVybiAyMDAwOwogICAgICAgIH0KICAgICAgICBpZiAocGVyaW9kIDwgMTcgZGF5cykgewogICAgICAgICAgICByZXR1cm4gMTgwMDsKICAgICAgICB9CiAgICAgICAgaWYgKHBlcmlvZCA8IDE5IGRheXMpIHsKICAgICAgICAgICAgcmV0dXJuIDE2MDA7CiAgICAgICAgfQogICAgICAgIGlmIChwZXJpb2QgPCAyMSBkYXlzKSB7CiAgICAgICAgICAgIHJldHVybiAxNDAwOwogICAgICAgIH0KICAgICAgICBpZiAocGVyaW9kIDwgMjMgZGF5cykgewogICAgICAgICAgICByZXR1cm4gMTIwMDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIDEwMDA7CiAgICB9CgoJLyoqCgkgICAqIEBkZXYgQWxsb3dzIHRvIGJ1eSBzaGFyZXMKCSAgICogQHJldHVybiBib29sIFRydWUgaWYgbm8gZXJyb3JzCgkgICAqLwogICAgZnVuY3Rpb24gYnV5KCkgcGF5YWJsZSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAobWludGluZ0ZpbmlzaGVkKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KCiAgICAgICAgdWludCBfYW1vdW50ID0gMDsKICAgICAgICBfYW1vdW50ID0gbXNnLnZhbHVlICogZmFzdEJ1eUJvbnVzKCk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLmFkZChfYW1vdW50IC8gODUgKiAxNSk7IC8vMTUlIHNoYXJlcyBvZiBvd25lcgoJCWJ1eVRyYW5zYWN0aW9uc1ttc2cuc2VuZGVyXS5hZGQobXNnLnZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgkvKioKCSAgICogQGRldiBPcGVucyBJQ08gKG9ubHkgb3duZXIpCgkgICAqIEByZXR1cm4gYm9vbCBUcnVlIGlmIG5vIGVycm9ycwoJICAgKi8KICAgIGZ1bmN0aW9uIHN0YXJ0TWludGluZygpIG9ubHlPd25lciByZXR1cm5zKGJvb2wpIHsKICAgICAgICBtaW50aW5nU3RhcnRUaW1lID0gbm93OwogICAgICAgIGlmIChhbHJlYWR5TWludGVkT25jZSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgYWxyZWFkeU1pbnRlZE9uY2UgPSB0cnVlOwogICAgICAgIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwogICAgICAgIE1pbnRTdGFydGVkKCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoJLyoqCgkgICAqIEBkZXYgQ2xvc2VzIElDTyAtIGFueW9uZSBjYW4gaW52b2tlIGlmIGludm9rZWQgdG8gc29vbiwgdGFrZXMgbm8gYWN0aW9ucwoJICAgKiBAcmV0dXJuIGJvb2wgVHJ1ZSBpZiBubyBlcnJvcnMKCSAgICovCiAgICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKG1pbnRpbmdGaW5pc2hlZCA9PSBmYWxzZSkgewogICAgICAgICAgICBpZiAobm93IC0gbWludGluZ1N0YXJ0VGltZSA+IG1heE1pbnRpbmdUaW1lKSB7CiAgICAgICAgICAgICAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgTWludEZpbmlzaGVkKCk7CiAgICAgICAgICAgICAgICBnb2FsUmVhY2hlZCA9ICh0aGlzLmJhbGFuY2UgPiBtaW50aW5nR29hbCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgoJLyoqCgkgICAqIEBkZXYgRnVuY3Rpb24gcmVmdW5kcyBjb250cmlidXRvcnMgaWYgSUNPIHdhcyB1bnN1Y2Nlc2Z1bCAKCSAgICogQHJldHVybiBib29sIFRydWUgaWYgY29uZGl0aW9ucyBmb3IgcmVmdW5kIGFyZSBtZXQgZmFsc2Ugb3RoZXJ3aXNlLgoJICAgKi8KICAgIGZ1bmN0aW9uIHJlZnVuZCgpIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChtaW50aW5nRmluaXNoZWQgPT0gdHJ1ZSAmJiBnb2FsUmVhY2hlZCA9PSBmYWxzZSAmJiBhbHJlYWR5TWludGVkT25jZSA9PSB0cnVlKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKCQkJdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoJCQl1aW50IHZhbHVlT2ZJbnZlc3RtZW50ID0gIGJ1eVRyYW5zYWN0aW9uc1ttc2cuc2VuZGVyXTsKICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcih2YWx1ZU9mSW52ZXN0bWVudCk7CgkJCXJldHVybiB0cnVlOwogICAgICAgIH0KCQlyZXR1cm4gZmFsc2U7CiAgICB9CiAKIAoJLyoqCgkgICAqIEBkZXYgQWxsb3dzIHRvIHJlbW92ZSBidWdneSBjb250cmFjdCBiZWZvcmUgSUNPIGxhdW5jaAoJICAgKi8KICAgIGZ1bmN0aW9uIGRlc3Ryb3lVc2VsZXNzQ29udHJhY3QoKSBvbmx5T3duZXIgbm90TWludGVkWWV0IHsKICAgICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgfQp9Cgpjb250cmFjdCBUaXRzVG9rZW4gaXMgTWludGFibGVUb2tlbiB7CiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiVHJ1dGggSW4gVGhlIFNvdXJjZWNvZGUiOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiVElUUyI7CiAgICB1aW50IHB1YmxpYyBkZWNpbWFscyA9IDE4OwogICAgdWludCBwdWJsaWMgdm9pdGluZ1N0YXJ0VGltZTsKICAgIGFkZHJlc3MgcHVibGljIHZvdGVkQWRkcmVzczsKICAgIHVpbnQgcHVibGljIHZvdGVkWWVzID0gMTsKICAgIHVpbnQgcHVibGljIHZvdGVkTm8gPSAwOwogICAgZXZlbnQgVm90ZU9uVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5Q29udHJhY3QpOwogICAgZXZlbnQgUm9naXN0ZXJUb1ZvdGVPblRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeUNvbnRyYWN0KTsKICAgIGV2ZW50IFZvdGluZ0VuZGVkKGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeUNvbnRyYWN0LCBib29sIHJlc3VsdCk7CgogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVk9USU5HX1BSRVBBUkVfVElNRVNQQU4gPSA3IGRheXM7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBWT1RJTkdfVElNRVNQQU4gPSAgNyBkYXlzOwogICAgdWludCBwdWJsaWMgZmFpbGVkVm90aW5nQ291bnQgPSAwOwogICAgYm9vbCBwdWJsaWMgaXNWb3RpbmcgPSBmYWxzZTsKICAgIGJvb2wgcHVibGljIGlzVm90aW5nUHJlcGFyZSA9IGZhbHNlOwoKICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5Q29udHJhY3QgPSBhZGRyZXNzKDApOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSB2b3Rlc0F2YWlsYWJsZTsKICAgIGFkZHJlc3NbXSBwdWJsaWMgdm90ZXJzOwogICAgdWludCB2b3RlcnNDb3VudCA9IDA7CgoJLyoqCgkgICAqIEBkZXYgdm90aW5nIGxvbmcgZW5vdWdodCB0byBnbyB0byBuZXh0IHBoYXNlIAoJICAgKi8KICAgIG1vZGlmaWVyIHZvdGluZ0xvbmcoKSB7CiAgICAgICAgaWYgKG5vdyAtIHZvaXRpbmdTdGFydFRpbWUgPCBWT1RJTkdfVElNRVNQQU4pIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgoJLyoqCgkgICAqIEBkZXYgcHJlcGFyYXRpb24gZm9yIHZvdGluZyAoYXBwbGljYXRpb24gZm9yIHZvdGluZykgbG9uZyBlbm91Z2h0IHRvIGdvIHRvIG5leHQgcGhhc2UgCgkgICAqLwogICAgbW9kaWZpZXIgdm90aW5nUHJlcGFyZUxvbmcoKSB7CiAgICAgICAgaWYgKG5vdyAtIHZvaXRpbmdTdGFydFRpbWUgPCBWT1RJTkdfUFJFUEFSRV9USU1FU1BBTikgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KCgkvKioKCSAgICogQGRldiBWb3Rpbmcgc3RhcnRlZCBhbmQgaW4gcHJvZ3Jlc3MKCSAgICovCiAgICBtb2RpZmllciB2b3RpbmdJblByb2dyZXNzKCkgewogICAgICAgIGlmIChpc1ZvdGluZyA9PSBmYWxzZSkgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KCgkvKioKCSAgICogQGRldiBWb3RpbmcgcHJlcGFyYXRpb24gc3RhcnRlZCBhbmQgaW4gcHJvZ3Jlc3MKCSAgICovCiAgICBtb2RpZmllciB2b3RpbmdQcmVwYXJlSW5Qcm9ncmVzcygpIHsKICAgICAgICBpZiAoaXNWb3RpbmdQcmVwYXJlID09IGZhbHNlKSByZXZlcnQoKTsKICAgICAgICBfOwogICAgfQoKCS8qKgoJICAgKiBAZGV2IFZvdGVycyBhZ3JlZWQgb24gcHJvcG9zZWQgY29udHJhY3QgYW5kIEV0aGVyZXVtIGlzIGJlaW5nIHNlbmQgdG8gdGhhdCBjb250cmFjdAoJICAgKi8KICAgIGZ1bmN0aW9uIHNlbmRUb0JlbmVmaWNpYXJ5Q29udHJhY3QoKSAgewogICAgICAgIGlmIChiZW5lZmljaWFyeUNvbnRyYWN0ICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgYmVuZWZpY2lhcnlDb250cmFjdC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgIH0KCQkKCS8qKgoJICAgKiBAZGV2IGNhbiBiZSBjYWxsZWQgYnkgYW55b25lLCBpZiB0aW1lc3BhbiB3aXRob3UgYWNjZXB0ZWQgcHJvcG9zYWwgbG9uZyBlbm91Z2h0IAoJICAgKiBlbmFibGVzIHJlZnVuZAoJICAgKi8KCWZ1bmN0aW9uIHJlZ2lzdGVyVm90aW5nUHJlcGFyZUZhaWx1cmUoKSBtaW50aW5nQ2xvc2VkewoJCWlmKG5vdy1taW50aW5nU3RhcnRUaW1lPigyK2ZhaWxlZFZvdGluZ0NvdW50KSptYXhNaW50aW5nVGltZSApewoJCQlmYWlsZWRWb3RpbmdDb3VudD1mYWlsZWRWb3RpbmdDb3VudCsxOwogICAgICAgICAgICBpZiAoZmFpbGVkVm90aW5nQ291bnQgPT0gMTApIHsKICAgICAgICAgICAgICAgIGdvYWxSZWFjaGVkID0gZmFsc2U7CiAgICAgICAgICAgIH0KCQl9Cgl9CgoJLyoqCgkgICAqIEBkZXYgb3BlbnMgcHJlcGFyYXRpb24gZm9yIG5ldyB2b3Rpbmcgb24gcHJvcG9zZWQgTG90dGVyeSBDb250cmFjdCBhZGRyZXNzCgkgICAqLwogICAgZnVuY3Rpb24gc3RhcnRWb3RpbmdQcmVwYXJlKGFkZHJlc3Mgdm90ZWRBZGRyZXNzQXJnKSBtaW50aW5nQ2xvc2VkIG9ubHlPd25lcnsKICAgICAgICBpc1ZvdGluZyA9IGZhbHNlOwogICAgICAgIFJvZ2lzdGVyVG9Wb3RlT25UcmFuc2Zlcih2b3RlZEFkZHJlc3NBcmcpOwogICAgICAgIHZvdGVkQWRkcmVzcyA9IHZvdGVkQWRkcmVzc0FyZzsKICAgICAgICB2b2l0aW5nU3RhcnRUaW1lID0gbm93OwogICAgICAgIGlzVm90aW5nUHJlcGFyZSA9IHRydWU7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdm90ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGRlbGV0ZSB2b3RlcnNbaV07CiAgICAgICAgfQogICAgICAgIGRlbGV0ZSB2b3RlcnM7CiAgICAgICAgdm90ZXJzQ291bnQgPSAwOwogICAgfQoKCS8qKgoJICAgKiBAZGV2IHBheWFibGUgc28gYXR0ZW5kYW5jZSBvbmx5IG9mIHBlb3BsZSB3aG8gcmVhbGx5IGNhcmUKCSAgICogcmVnaXN0ZXJzIFlvdSBhcyBhIHZvdGVyOwoJICAgKi8KICAgIGZ1bmN0aW9uIHJlZ2lzdGVyRm9yVm90aW5nKCkgcGF5YWJsZSB2b3RpbmdQcmVwYXJlSW5Qcm9ncmVzcyB7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA+PSAxMCBmaW5uZXkpIHsKICAgICAgICAgICAgdm90ZXJzLnB1c2gobXNnLnNlbmRlcik7CiAgICAgICAgICAgIHZvdGVyc0NvdW50ID0gdm90ZXJzQ291bnQgKyAxOwogICAgICAgIH0KCQllbHNlewoJCQlyZXZlcnQoKTsKCQl9CiAgICB9CgoJLyoqCgkgICAqIEBkZXYgb3BlbnMgdm90aW5nIG9uIHByb3Bvc2VkIExvdHRlcnkgQ29udHJhY3QgYWRkcmVzcwoJICAgKi8KICAgIGZ1bmN0aW9uIHN0YXJ0Vm90aW5nKCkgdm90aW5nUHJlcGFyZUluUHJvZ3Jlc3Mgdm90aW5nUHJlcGFyZUxvbmcgewogICAgICAgIFZvdGVPblRyYW5zZmVyKHZvdGVkQWRkcmVzcyk7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdm90ZXJzQ291bnQ7IGkrKykgewogICAgICAgICAgICB2b3Rlc0F2YWlsYWJsZVt2b3RlcnNbaV1dID0gYmFsYW5jZU9mKHZvdGVyc1tpXSk7CiAgICAgICAgfQogICAgICAgIGlzVm90aW5nID0gdHJ1ZTsKICAgICAgICB2b2l0aW5nU3RhcnRUaW1lID0gbm93OwogICAgICAgIGlzVm90aW5nUHJlcGFyZSA9IGZhbHNlOwogICAgICAgIHZvdGVyc0NvdW50ID0gMDsKICAgIH0KCgkvKioKCSAgICogQGRldiBjbG9zZXMgdm90aW5nIG9uIHByb3Bvc2VkIExvdHRlcnkgQ29udHJhY3QgYWRkcmVzcwoJICAgKiBjaGVja3MgaWYgZmFpbGVkIC0gaWYgTm8gdm90ZXMgaXMgbW9yZSBjb21tb24gdGhhbiB5ZXMgaW5jcmVhc2UgZmFpbGVkIHZvdGluZyBjb3VudCBhbmQgaWYgaXQgcmVhY2hlcyAxMCAKCSAgICogcmVhY2ggb2YgZ29hbCBpcyBmYWlsaW5nIGFuZCBpbnZlc3RvcnMgY2FuIHdpdGhkcmF3IHRoZWlyIG1vbmV5CgkgICAqLwogICAgZnVuY3Rpb24gY2xvc2VWb3JpbmcoKSB2b3RpbmdJblByb2dyZXNzIHZvdGluZ0xvbmcgewogICAgICAgIFZvdGluZ0VuZGVkKHZvdGVkQWRkcmVzcywgdm90ZWRZZXMgPiB2b3RlZE5vKTsKICAgICAgICBpc1ZvdGluZyA9IGZhbHNlOwogICAgICAgIGlzVm90aW5nUHJlcGFyZSA9IGZhbHNlOwogICAgICAgIGlmICh2b3RlZFllcyA+IHZvdGVkTm8pIHsKICAgICAgICAgICAgYmVuZWZpY2lhcnlDb250cmFjdCA9IHZvdGVkQWRkcmVzczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmYWlsZWRWb3RpbmdDb3VudCA9IGZhaWxlZFZvdGluZ0NvdW50ICsgMTsKICAgICAgICAgICAgaWYgKGZhaWxlZFZvdGluZ0NvdW50ID09IDEwKSB7CiAgICAgICAgICAgICAgICBnb2FsUmVhY2hlZCA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKCS8qKgoJICAgKiBAZGV2IHZvdGVzIG9uIGNvbnRyYWN0IHByb3Bvc2FsCgkgICAqIHBheWFibGUgdG8gZW5zdXJlIG9ubHkgc2VyaW91cyB2b3RlcnMgd2lsbCBhdHRlbmQgCgkgICAqLwogICAgZnVuY3Rpb24gdm90ZShib29sIGlzVm90ZVllcykgcGF5YWJsZSB7CgogICAgICAgIGlmIChtc2cudmFsdWUgPj0gMTAgZmlubmV5KSB7CiAgICAgICAgICAgIHZhciB2b3RlcyA9IHZvdGVzQXZhaWxhYmxlW21zZy5zZW5kZXJdOwogICAgICAgICAgICB2b3Rlc0F2YWlsYWJsZVttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgICAgIGlmIChpc1ZvdGVZZXMpIHsKICAgICAgICAgICAgICAgIHZvdGVkWWVzLmFkZCh2b3Rlcyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2b3RlZE5vLmFkZCh2b3Rlcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgkJZWxzZXsKCQkJcmV2ZXJ0KCk7CgkJfQogICAgfQp9'.
	

]
