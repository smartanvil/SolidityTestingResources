Class {
	#name : #SRTe5838178be4181b1dd61ce6f814bf58aa6808640,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe5838178be4181b1dd61ce6f814bf58aa6808640 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgovKgoK4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACuKUgOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKUgOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKUgOKWiOKWiOKWiOKWiOKWiOKWiOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKWiOKWiOKWiOKWiOKWiOKWiOKUgOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKUgOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKUgArilIDilojilojilpHilpHilpHilpHilpHilpHilpHilpHilpHilpHilojilojilIDilojilojilpHilpHilpHilpHilpHilpHilpHilpHilpHilpHilojilojilIDilojilojilpHilpHilojilojilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilojilojilpHilpHilojilojilIDilojilojilpHilpHilpHilpHilpHilpHilpHilpHilpHilpHilojilojilIDilojilojilpHilpHilpHilpHilpHilpHilpHilpHilpHilpHilojilojilIAK4pSA4paI4paI4paR4paR4paI4paI4paI4paI4paI4paI4paR4paR4paI4paI4pSA4paI4paI4paR4paR4paI4paI4paI4paI4paI4paI4paR4paR4paI4paI4pSA4paI4paI4paR4paR4paI4paI4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4paI4paI4paR4paR4paI4paI4pSA4paI4paI4paI4paI4paI4paI4paI4paI4paI4paI4paR4paR4paI4paI4pSA4paI4paI4paI4paI4paI4paI4paI4paI4paI4paI4paR4paR4paI4paI4pSACuKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgArilIDilojilojilpHilpHilojilojilojilojilojilojilpHilpHilojilojilIDilojilojilpHilpHilojilojilIDilIDilojilojilpHilpHilojilojilIDilojilojilpHilpHilojilojilIDilIDilojilojilojilojilojilojilIDilIDilojilojilpHilpHilojilojilIDilojilojilojilojilojilojilojilojilojilojilpHilpHilojilojilIDilojilojilojilojilojilojilojilojilojilojilpHilpHilojilojilIAK4pSA4paI4paI4paR4paR4paR4paR4paR4paR4paR4paR4paR4paR4paI4paI4pSA4paI4paI4paR4paR4paI4paI4pSA4pSA4paI4paI4paR4paR4paI4paI4pSA4paI4paI4paR4paR4paI4paI4pSA4pSA4paI4paI4paR4paR4paI4paI4pSA4pSA4paI4paI4paR4paR4paI4paI4pSA4paI4paI4paR4paR4paR4paR4paR4paR4paR4paR4paR4paR4paI4paI4pSA4paI4paI4paR4paR4paR4paR4paR4paR4paR4paR4paR4paR4paI4paI4pSACuKUgOKWiOKWiOKWkeKWkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWkeKWkeKWiOKWiOKUgArilIDilojilojilpHilpHilojilojilIDilIDilIDilIDilIDilIDilIDilIDilIDilojilojilpHilpHilojilojilIDilIDilojilojilpHilpHilojilojilIDilojilojilpHilpHilojilojilojilojilojilojilpHilpHilojilojilojilojilojilojilpHilpHilojilojilIDilIDilIDilIDilIDilIDilIDilIDilIDilojilojilpHilpHilojilojilIDilIDilIDilIDilIDilIDilIDilIDilIDilojilojilpHilpHilojilojilIAK4pSA4paI4paI4paR4paR4paI4paI4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4paI4paI4paR4paR4paI4paI4paI4paI4paI4paI4paR4paR4paI4paI4pSA4paI4paI4paR4paR4paR4paR4paR4paR4paR4paR4paR4paR4paR4paR4paR4paR4paR4paR4paR4paR4paI4paI4pSA4paI4paI4paI4paI4paI4paI4paI4paI4paI4paI4paR4paR4paI4paI4pSA4paI4paI4paI4paI4paI4paI4paI4paI4paI4paI4paR4paR4paI4paI4pSACuKUgOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKWiOKWiOKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWiOKWiOKUgOKWiOKWiOKWkeKWkeKWiOKWiOKWiOKWiOKWiOKWiOKWkeKWkeKWiOKWiOKWiOKWiOKWiOKWiOKWkeKWkeKWiOKWiOKUgOKWiOKWiOKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWiOKWiOKUgOKWiOKWiOKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWkeKWiOKWiOKUgArilIDilojilojilojilojilojilojilIDilIDilIDilIDilIDilIDilIDilIDilIDilojilojilojilojilojilojilojilojilojilojilojilojilojilojilIDilojilojilojilojilojilojilIDilIDilojilojilojilojilojilojilIDilIDilojilojilojilojilojilojilIDilojilojilojilojilojilojilojilojilojilojilojilojilojilojilIDilojilojilojilojilojilojilojilojilojilojilojilojilojilojilIAK4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgoqLwoKCmNvbnRyYWN0IFBPVzMzIHsKICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICA9ICAgICAgICAgICAgTU9ESUZJRVJTICAgICAgICAgICAgPQogICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAgIC8vIG9ubHkgcGVvcGxlIHdpdGggdG9rZW5zCiAgICBtb2RpZmllciBvbmx5QmFnaG9sZGVycygpIHsKICAgICAgICByZXF1aXJlKG15VG9rZW5zKCkgPiAwKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICAvLyBvbmx5IHBlb3BsZSB3aXRoIHByb2ZpdHMKICAgIG1vZGlmaWVyIG9ubHlTdHJvbmdoYW5kcygpIHsKICAgICAgICByZXF1aXJlKG15RGl2aWRlbmRzKHRydWUpID4gMCk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgLy8gYWRtaW5pc3RyYXRvcnMgY2FuOgogICAgLy8gLT4gY2hhbmdlIHRoZSBuYW1lIG9mIHRoZSBjb250cmFjdAogICAgLy8gLT4gY2hhbmdlIHRoZSBuYW1lIG9mIHRoZSB0b2tlbgogICAgLy8gLT4gY2hhbmdlIHRoZSBQb1MgZGlmZmljdWx0eSAoSG93IG1hbnkgdG9rZW5zIGl0IGNvc3RzIHRvIGhvbGQgYSBtYXN0ZXJub2RlLCBpbiBjYXNlIGl0IGdldHMgY3JhenkgaGlnaCBsYXRlcikKICAgIC8vIHRoZXkgQ0FOTk9UOgogICAgLy8gLT4gdGFrZSBmdW5kcwogICAgLy8gLT4gZGlzYWJsZSB3aXRoZHJhd2FscwogICAgLy8gLT4ga2lsbCB0aGUgY29udHJhY3QKICAgIC8vIC0+IGNoYW5nZSB0aGUgcHJpY2Ugb2YgdG9rZW5zCiAgICBtb2RpZmllciBvbmx5QWRtaW5pc3RyYXRvcigpewogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgcmVxdWlyZShhZG1pbmlzdHJhdG9yc1tfY3VzdG9tZXJBZGRyZXNzXSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgCiAgICAvLyBlbnN1cmVzIHRoYXQgdGhlIGZpcnN0IHRva2VucyBpbiB0aGUgY29udHJhY3Qgd2lsbCBiZSBlcXVhbGx5IGRpc3RyaWJ1dGVkCiAgICAvLyBtZWFuaW5nLCBubyBkaXZpbmUgZHVtcCB3aWxsIGJlIGV2ZXIgcG9zc2libGUKICAgIC8vIHJlc3VsdDogaGVhbHRoeSBsb25nZXZpdHkuCiAgICBtb2RpZmllciBhbnRpRWFybHlXaGFsZSh1aW50MjU2IF9hbW91bnRPZkV0aGVyZXVtKXsKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIAogICAgICAgIC8vIGFyZSB3ZSBzdGlsbCBpbiB0aGUgdnVsbmVyYWJsZSBwaGFzZT8KICAgICAgICAvLyBpZiBzbywgZW5hY3QgYW50aSBlYXJseSB3aGFsZSBwcm90b2NvbCAKICAgICAgICBpZiggb25seUFtYmFzc2Fkb3JzICYmICgodG90YWxFdGhlcmV1bUJhbGFuY2UoKSAtIF9hbW91bnRPZkV0aGVyZXVtKSA8PSBhbWJhc3NhZG9yUXVvdGFfICkpewogICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgLy8gaXMgdGhlIGN1c3RvbWVyIGluIHRoZSBhbWJhc3NhZG9yIGxpc3Q/CiAgICAgICAgICAgICAgICBhbWJhc3NhZG9yc19bX2N1c3RvbWVyQWRkcmVzc10gPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBkb2VzIHRoZSBjdXN0b21lciBwdXJjaGFzZSBleGNlZWQgdGhlIG1heCBhbWJhc3NhZG9yIHF1b3RhPwogICAgICAgICAgICAgICAgKGFtYmFzc2Fkb3JBY2N1bXVsYXRlZFF1b3RhX1tfY3VzdG9tZXJBZGRyZXNzXSArIF9hbW91bnRPZkV0aGVyZXVtKSA8PSBhbWJhc3NhZG9yTWF4UHVyY2hhc2VfCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHVwZGF0ZWQgdGhlIGFjY3VtdWxhdGVkIHF1b3RhICAgIAogICAgICAgICAgICBhbWJhc3NhZG9yQWNjdW11bGF0ZWRRdW90YV9bX2N1c3RvbWVyQWRkcmVzc10gPSBTYWZlTWF0aC5hZGQoYW1iYXNzYWRvckFjY3VtdWxhdGVkUXVvdGFfW19jdXN0b21lckFkZHJlc3NdLCBfYW1vdW50T2ZFdGhlcmV1bSk7CiAgICAgICAgCiAgICAgICAgICAgIC8vIGV4ZWN1dGUKICAgICAgICAgICAgXzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBpbiBjYXNlIHRoZSBldGhlciBjb3VudCBkcm9wcyBsb3csIHRoZSBhbWJhc3NhZG9yIHBoYXNlIHdvbid0IHJlaW5pdGlhdGUKICAgICAgICAgICAgb25seUFtYmFzc2Fkb3JzID0gZmFsc2U7CiAgICAgICAgICAgIF87ICAgIAogICAgICAgIH0KICAgICAgICAKICAgIH0KICAgIAogICAgCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgPSAgICAgICAgICAgIEVWRU5UUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCiAgICBldmVudCBvblRva2VuUHVyY2hhc2UoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGN1c3RvbWVyQWRkcmVzcywKICAgICAgICB1aW50MjU2IGluY29taW5nRXRoZXJldW0sCiAgICAgICAgdWludDI1NiB0b2tlbnNNaW50ZWQsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHJlZmVycmVkQnkKICAgICk7CiAgICAKICAgIGV2ZW50IG9uVG9rZW5TZWxsKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBjdXN0b21lckFkZHJlc3MsCiAgICAgICAgdWludDI1NiB0b2tlbnNCdXJuZWQsCiAgICAgICAgdWludDI1NiBldGhlcmV1bUVhcm5lZAogICAgKTsKICAgIAogICAgZXZlbnQgb25SZWludmVzdG1lbnQoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGN1c3RvbWVyQWRkcmVzcywKICAgICAgICB1aW50MjU2IGV0aGVyZXVtUmVpbnZlc3RlZCwKICAgICAgICB1aW50MjU2IHRva2Vuc01pbnRlZAogICAgKTsKICAgIAogICAgZXZlbnQgb25XaXRoZHJhdygKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgY3VzdG9tZXJBZGRyZXNzLAogICAgICAgIHVpbnQyNTYgZXRoZXJldW1XaXRoZHJhd24KICAgICk7CiAgICAKICAgIC8vIEVSQzIwCiAgICBldmVudCBUcmFuc2ZlcigKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgZnJvbSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgdG8sCiAgICAgICAgdWludDI1NiB0b2tlbnMKICAgICk7CiAgICAKICAgIAogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICA9ICAgICAgICAgICAgQ09ORklHVVJBQkxFUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIlBPVzMzIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlBXMzMiOwogICAgdWludDggY29uc3RhbnQgcHVibGljIGRlY2ltYWxzID0gMTg7CiAgICB1aW50OCBjb25zdGFudCBpbnRlcm5hbCBkaXZpZGVuZEZlZV8gPSAzOyAKICAgIHVpbnQyNTYgY29uc3RhbnQgaW50ZXJuYWwgdG9rZW5QcmljZUluaXRpYWxfID0gMC4wMDAwMDAxIGV0aGVyOwogICAgdWludDI1NiBjb25zdGFudCBpbnRlcm5hbCB0b2tlblByaWNlSW5jcmVtZW50YWxfID0gMC4wMDAwMDAwMSBldGhlcjsKICAgIHVpbnQyNTYgY29uc3RhbnQgaW50ZXJuYWwgbWFnbml0dWRlID0gMioqNjQ7CiAgICAKICAgIC8vIHByb29mIG9mIHN0YWtlIChkZWZhdWx0cyBhdCAxMDAgdG9rZW5zKQogICAgdWludDI1NiBwdWJsaWMgc3Rha2luZ1JlcXVpcmVtZW50ID0gMTAwZTE4OwogICAgCiAgICAvLyBhbWJhc3NhZG9yIHByb2dyYW0KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBpbnRlcm5hbCBhbWJhc3NhZG9yc187CiAgICB1aW50MjU2IGNvbnN0YW50IGludGVybmFsIGFtYmFzc2Fkb3JNYXhQdXJjaGFzZV8gPSAxIGV0aGVyOwogICAgdWludDI1NiBjb25zdGFudCBpbnRlcm5hbCBhbWJhc3NhZG9yUXVvdGFfID0gMjAgZXRoZXI7CiAgICAKICAgIAogICAgCiAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgID0gICAgICAgICAgICBEQVRBU0VUUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAgIC8vIGFtb3VudCBvZiBzaGFyZXMgZm9yIGVhY2ggYWRkcmVzcyAoc2NhbGVkIG51bWJlcikKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBpbnRlcm5hbCB0b2tlbkJhbGFuY2VMZWRnZXJfOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIHJlZmVycmFsQmFsYW5jZV87CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gaW50MjU2KSBpbnRlcm5hbCBwYXlvdXRzVG9fOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIGFtYmFzc2Fkb3JBY2N1bXVsYXRlZFF1b3RhXzsKICAgIHVpbnQyNTYgaW50ZXJuYWwgdG9rZW5TdXBwbHlfID0gMDsKICAgIHVpbnQyNTYgaW50ZXJuYWwgcHJvZml0UGVyU2hhcmVfOwogICAgCiAgICAvLyBhZG1pbmlzdHJhdG9yIGxpc3QgKHNlZSBhYm92ZSBvbiB3aGF0IHRoZXkgY2FuIGRvKQogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBhZG1pbmlzdHJhdG9yczsKICAgIGJvb2wgcHVibGljIG9ubHlBbWJhc3NhZG9ycyA9IGZhbHNlOwogICAgCgoKICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICA9ICAgICAgICAgICAgUFVCTElDIEZVTkNUSU9OUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCiAgICAvKgogICAgKiAtLSBBUFBMSUNBVElPTiBFTlRSWSBQT0lOVFMgLS0gIAogICAgKi8KICAgIGZ1bmN0aW9uIFBPVzMzKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICAvLyBhZGQgYWRtaW5pc3RyYXRvcnMgaGVyZQoKICAgICAgICBhZG1pbmlzdHJhdG9yc1sweDM0NDZlMEY4QmMyNTU2YTJmMDBBMzE3RDg5NTQ5REJiRDZlMjY0NThdID0gdHJ1ZTsKCiAgICB9CiAgICAKICAgICAKICAgIC8qKgogICAgICogQ29udmVydHMgYWxsIGluY29taW5nIGV0aGVyZXVtIHRvIHRva2VucyBmb3IgdGhlIGNhbGxlciwgYW5kIHBhc3NlcyBkb3duIHRoZSByZWZlcnJhbCBhZGR5IChpZiBhbnkpCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1eShhZGRyZXNzIF9yZWZlcnJlZEJ5KQogICAgICAgIHB1YmxpYwogICAgICAgIHBheWFibGUKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcHVyY2hhc2VUb2tlbnMobXNnLnZhbHVlLCBfcmVmZXJyZWRCeSk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogRmFsbGJhY2sgZnVuY3Rpb24gdG8gaGFuZGxlIGV0aGVyZXVtIHRoYXQgd2FzIHNlbmQgc3RyYWlnaHQgdG8gdGhlIGNvbnRyYWN0CiAgICAgKiBVbmZvcnR1bmF0ZWx5IHdlIGNhbm5vdCB1c2UgYSByZWZlcnJhbCBhZGRyZXNzIHRoaXMgd2F5LgogICAgICovCiAgICBmdW5jdGlvbigpCiAgICAgICAgcGF5YWJsZQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIHB1cmNoYXNlVG9rZW5zKG1zZy52YWx1ZSwgMHgwKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBDb252ZXJ0cyBhbGwgb2YgY2FsbGVyJ3MgZGl2aWRlbmRzIHRvIHRva2Vucy4KICAgICovCiAgICBmdW5jdGlvbiByZWludmVzdCgpCiAgICAgICAgb25seVN0cm9uZ2hhbmRzKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICAvLyBmZXRjaCBkaXZpZGVuZHMKICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBteURpdmlkZW5kcyhmYWxzZSk7IC8vIHJldHJpZXZlIHJlZi4gYm9udXMgbGF0ZXIgaW4gdGhlIGNvZGUKICAgICAgICAKICAgICAgICAvLyBwYXkgb3V0IHRoZSBkaXZpZGVuZHMgdmlydHVhbGx5CiAgICAgICAgYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICBwYXlvdXRzVG9fW19jdXN0b21lckFkZHJlc3NdICs9ICAoaW50MjU2KSAoX2RpdmlkZW5kcyAqIG1hZ25pdHVkZSk7CiAgICAgICAgCiAgICAgICAgLy8gcmV0cmlldmUgcmVmLiBib251cwogICAgICAgIF9kaXZpZGVuZHMgKz0gcmVmZXJyYWxCYWxhbmNlX1tfY3VzdG9tZXJBZGRyZXNzXTsKICAgICAgICByZWZlcnJhbEJhbGFuY2VfW19jdXN0b21lckFkZHJlc3NdID0gMDsKICAgICAgICAKICAgICAgICAvLyBkaXNwYXRjaCBhIGJ1eSBvcmRlciB3aXRoIHRoZSB2aXJ0dWFsaXplZCAid2l0aGRyYXduIGRpdmlkZW5kcyIKICAgICAgICB1aW50MjU2IF90b2tlbnMgPSBwdXJjaGFzZVRva2VucyhfZGl2aWRlbmRzLCAweDApOwogICAgICAgIAogICAgICAgIC8vIGZpcmUgZXZlbnQKICAgICAgICBvblJlaW52ZXN0bWVudChfY3VzdG9tZXJBZGRyZXNzLCBfZGl2aWRlbmRzLCBfdG9rZW5zKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBBbGlhcyBvZiBzZWxsKCkgYW5kIHdpdGhkcmF3KCkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGV4aXQoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIC8vIGdldCB0b2tlbiBjb3VudCBmb3IgY2FsbGVyICYgc2VsbCB0aGVtIGFsbAogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludDI1NiBfdG9rZW5zID0gdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXTsKICAgICAgICBpZihfdG9rZW5zID4gMCkgc2VsbChfdG9rZW5zKTsKICAgICAgICAKICAgICAgICAvLyBsYW1ibyBkZWxpdmVyeSBzZXJ2aWNlCiAgICAgICAgd2l0aGRyYXcoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdpdGhkcmF3cyBhbGwgb2YgdGhlIGNhbGxlcnMgZWFybmluZ3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkKICAgICAgICBvbmx5U3Ryb25naGFuZHMoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIC8vIHNldHVwIGRhdGEKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IG15RGl2aWRlbmRzKGZhbHNlKTsgLy8gZ2V0IHJlZi4gYm9udXMgbGF0ZXIgaW4gdGhlIGNvZGUKICAgICAgICAKICAgICAgICAvLyB1cGRhdGUgZGl2aWRlbmQgdHJhY2tlcgogICAgICAgIHBheW91dHNUb19bX2N1c3RvbWVyQWRkcmVzc10gKz0gIChpbnQyNTYpIChfZGl2aWRlbmRzICogbWFnbml0dWRlKTsKICAgICAgICAKICAgICAgICAvLyBhZGQgcmVmLiBib251cwogICAgICAgIF9kaXZpZGVuZHMgKz0gcmVmZXJyYWxCYWxhbmNlX1tfY3VzdG9tZXJBZGRyZXNzXTsKICAgICAgICByZWZlcnJhbEJhbGFuY2VfW19jdXN0b21lckFkZHJlc3NdID0gMDsKICAgICAgICAKICAgICAgICAvLyBsYW1ibyBkZWxpdmVyeSBzZXJ2aWNlCiAgICAgICAgX2N1c3RvbWVyQWRkcmVzcy50cmFuc2ZlcihfZGl2aWRlbmRzKTsKICAgICAgICAKICAgICAgICAvLyBmaXJlIGV2ZW50CiAgICAgICAgb25XaXRoZHJhdyhfY3VzdG9tZXJBZGRyZXNzLCBfZGl2aWRlbmRzKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBMaXF1aWZpZXMgdG9rZW5zIHRvIGV0aGVyZXVtLgogICAgICovCiAgICBmdW5jdGlvbiBzZWxsKHVpbnQyNTYgX2Ftb3VudE9mVG9rZW5zKQogICAgICAgIG9ubHlCYWdob2xkZXJzKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICAvLyBzZXR1cCBkYXRhCiAgICAgICAgYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICAvLyBydXNzaWFuIGhhY2tlcnMgQlRGTwogICAgICAgIHJlcXVpcmUoX2Ftb3VudE9mVG9rZW5zIDw9IHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc10pOwogICAgICAgIHVpbnQyNTYgX3Rva2VucyA9IF9hbW91bnRPZlRva2VuczsKICAgICAgICB1aW50MjU2IF9ldGhlcmV1bSA9IHRva2Vuc1RvRXRoZXJldW1fKF90b2tlbnMpOwogICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IFNhZmVNYXRoLmRpdihfZXRoZXJldW0sIGRpdmlkZW5kRmVlXyk7CiAgICAgICAgdWludDI1NiBfdGF4ZWRFdGhlcmV1bSA9IFNhZmVNYXRoLnN1YihfZXRoZXJldW0sIF9kaXZpZGVuZHMpOwogICAgICAgIAogICAgICAgIC8vIGJ1cm4gdGhlIHNvbGQgdG9rZW5zCiAgICAgICAgdG9rZW5TdXBwbHlfID0gU2FmZU1hdGguc3ViKHRva2VuU3VwcGx5XywgX3Rva2Vucyk7CiAgICAgICAgdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSA9IFNhZmVNYXRoLnN1Yih0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdLCBfdG9rZW5zKTsKICAgICAgICAKICAgICAgICAvLyB1cGRhdGUgZGl2aWRlbmRzIHRyYWNrZXIKICAgICAgICBpbnQyNTYgX3VwZGF0ZWRQYXlvdXRzID0gKGludDI1NikgKHByb2ZpdFBlclNoYXJlXyAqIF90b2tlbnMgKyAoX3RheGVkRXRoZXJldW0gKiBtYWduaXR1ZGUpKTsKICAgICAgICBwYXlvdXRzVG9fW19jdXN0b21lckFkZHJlc3NdIC09IF91cGRhdGVkUGF5b3V0czsgICAgICAgCiAgICAgICAgCiAgICAgICAgLy8gZGl2aWRpbmcgYnkgemVybyBpcyBhIGJhZCBpZGVhCiAgICAgICAgaWYgKHRva2VuU3VwcGx5XyA+IDApIHsKICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBhbW91bnQgb2YgZGl2aWRlbmRzIHBlciB0b2tlbgogICAgICAgICAgICBwcm9maXRQZXJTaGFyZV8gPSBTYWZlTWF0aC5hZGQocHJvZml0UGVyU2hhcmVfLCAoX2RpdmlkZW5kcyAqIG1hZ25pdHVkZSkgLyB0b2tlblN1cHBseV8pOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBmaXJlIGV2ZW50CiAgICAgICAgb25Ub2tlblNlbGwoX2N1c3RvbWVyQWRkcmVzcywgX3Rva2VucywgX3RheGVkRXRoZXJldW0pOwogICAgfQogICAgCiAgICAKICAgIC8qKgogICAgICogVHJhbnNmZXIgdG9rZW5zIGZyb20gdGhlIGNhbGxlciB0byBhIG5ldyBob2xkZXIuCiAgICAgKiBSZW1lbWJlciwgdGhlcmUncyBhIDEwJSBmZWUgaGVyZSBhcyB3ZWxsLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90b0FkZHJlc3MsIHVpbnQyNTYgX2Ftb3VudE9mVG9rZW5zKQogICAgICAgIG9ubHlCYWdob2xkZXJzKCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zKGJvb2wpCiAgICB7CiAgICAgICAgLy8gc2V0dXAKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIAogICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBoYXZlIHRoZSByZXF1ZXN0ZWQgdG9rZW5zCiAgICAgICAgLy8gYWxzbyBkaXNhYmxlcyB0cmFuc2ZlcnMgdW50aWwgYW1iYXNzYWRvciBwaGFzZSBpcyBvdmVyCiAgICAgICAgLy8gKCB3ZSBkb250IHdhbnQgd2hhbGUgcHJlbWluZXMgKQogICAgICAgIHJlcXVpcmUoIW9ubHlBbWJhc3NhZG9ycyAmJiBfYW1vdW50T2ZUb2tlbnMgPD0gdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSk7CiAgICAgICAgCiAgICAgICAgLy8gd2l0aGRyYXcgYWxsIG91dHN0YW5kaW5nIGRpdmlkZW5kcyBmaXJzdAogICAgICAgIGlmKG15RGl2aWRlbmRzKHRydWUpID4gMCkgd2l0aGRyYXcoKTsKICAgICAgICAKICAgICAgICAvLyBsaXF1aWZ5IDEwJSBvZiB0aGUgdG9rZW5zIHRoYXQgYXJlIHRyYW5zZmVyZWQKICAgICAgICAvLyB0aGVzZSBhcmUgZGlzcGVyc2VkIHRvIHNoYXJlaG9sZGVycwogICAgICAgIHVpbnQyNTYgX3Rva2VuRmVlID0gU2FmZU1hdGguZGl2KF9hbW91bnRPZlRva2VucywgZGl2aWRlbmRGZWVfKTsKICAgICAgICB1aW50MjU2IF90YXhlZFRva2VucyA9IFNhZmVNYXRoLnN1YihfYW1vdW50T2ZUb2tlbnMsIF90b2tlbkZlZSk7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gdG9rZW5zVG9FdGhlcmV1bV8oX3Rva2VuRmVlKTsKICAKICAgICAgICAvLyBidXJuIHRoZSBmZWUgdG9rZW5zCiAgICAgICAgdG9rZW5TdXBwbHlfID0gU2FmZU1hdGguc3ViKHRva2VuU3VwcGx5XywgX3Rva2VuRmVlKTsKCiAgICAgICAgLy8gZXhjaGFuZ2UgdG9rZW5zCiAgICAgICAgdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSA9IFNhZmVNYXRoLnN1Yih0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdLCBfYW1vdW50T2ZUb2tlbnMpOwogICAgICAgIHRva2VuQmFsYW5jZUxlZGdlcl9bX3RvQWRkcmVzc10gPSBTYWZlTWF0aC5hZGQodG9rZW5CYWxhbmNlTGVkZ2VyX1tfdG9BZGRyZXNzXSwgX3RheGVkVG9rZW5zKTsKICAgICAgICAKICAgICAgICAvLyB1cGRhdGUgZGl2aWRlbmQgdHJhY2tlcnMKICAgICAgICBwYXlvdXRzVG9fW19jdXN0b21lckFkZHJlc3NdIC09IChpbnQyNTYpIChwcm9maXRQZXJTaGFyZV8gKiBfYW1vdW50T2ZUb2tlbnMpOwogICAgICAgIHBheW91dHNUb19bX3RvQWRkcmVzc10gKz0gKGludDI1NikgKHByb2ZpdFBlclNoYXJlXyAqIF90YXhlZFRva2Vucyk7CiAgICAgICAgCiAgICAgICAgLy8gZGlzcGVyc2UgZGl2aWRlbmRzIGFtb25nIGhvbGRlcnMKICAgICAgICBwcm9maXRQZXJTaGFyZV8gPSBTYWZlTWF0aC5hZGQocHJvZml0UGVyU2hhcmVfLCAoX2RpdmlkZW5kcyAqIG1hZ25pdHVkZSkgLyB0b2tlblN1cHBseV8pOwogICAgICAgIAogICAgICAgIC8vIGZpcmUgZXZlbnQKICAgICAgICBUcmFuc2ZlcihfY3VzdG9tZXJBZGRyZXNzLCBfdG9BZGRyZXNzLCBfdGF4ZWRUb2tlbnMpOwogICAgICAgIAogICAgICAgIC8vIEVSQzIwCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAKICAgIH0KICAgIAogICAgLyotLS0tLS0tLS0tICBBRE1JTklTVFJBVE9SIE9OTFkgRlVOQ1RJT05TICAtLS0tLS0tLS0tKi8KICAgIC8qKgogICAgICogSW4gY2FzZSB0aGUgYW1hc3NhZG9yIHF1b3RhIGlzIG5vdCBtZXQsIHRoZSBhZG1pbmlzdHJhdG9yIGNhbiBtYW51YWxseSBkaXNhYmxlIHRoZSBhbWJhc3NhZG9yIHBoYXNlLgogICAgICovCiAgICBmdW5jdGlvbiBkaXNhYmxlSW5pdGlhbFN0YWdlKCkKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgb25seUFtYmFzc2Fkb3JzID0gZmFsc2U7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogSW4gY2FzZSBvbmUgb2YgdXMgZGllcywgd2UgbmVlZCB0byByZXBsYWNlIG91cnNlbHZlcy4KICAgICAqLwoKICAgIAogICAgLyoqCiAgICAgKiBQcmVjYXV0aW9uYXJ5IG1lYXN1cmVzIGluIGNhc2Ugd2UgbmVlZCB0byBhZGp1c3QgdGhlIG1hc3Rlcm5vZGUgcmF0ZS4KICAgICAqLwogICAgZnVuY3Rpb24gc2V0U3Rha2luZ1JlcXVpcmVtZW50KHVpbnQyNTYgX2Ftb3VudE9mVG9rZW5zKQogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICBzdGFraW5nUmVxdWlyZW1lbnQgPSBfYW1vdW50T2ZUb2tlbnM7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogSWYgd2Ugd2FudCB0byByZWJyYW5kLCB3ZSBjYW4uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldE5hbWUoc3RyaW5nIF9uYW1lKQogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogSWYgd2Ugd2FudCB0byByZWJyYW5kLCB3ZSBjYW4uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFN5bWJvbChzdHJpbmcgX3N5bWJvbCkKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgIH0KCiAgICAKICAgIC8qLS0tLS0tLS0tLSAgSEVMUEVSUyBBTkQgQ0FMQ1VMQVRPUlMgIC0tLS0tLS0tLS0qLwogICAgLyoqCiAgICAgKiBNZXRob2QgdG8gdmlldyB0aGUgY3VycmVudCBFdGhlcmV1bSBzdG9yZWQgaW4gdGhlIGNvbnRyYWN0CiAgICAgKiBFeGFtcGxlOiB0b3RhbEV0aGVyZXVtQmFsYW5jZSgpCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsRXRoZXJldW1CYWxhbmNlKCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50KQogICAgewogICAgICAgIHJldHVybiB0aGlzLmJhbGFuY2U7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIHRvdGFsIHRva2VuIHN1cHBseS4KICAgICAqLwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcmV0dXJuIHRva2VuU3VwcGx5XzsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBSZXRyaWV2ZSB0aGUgdG9rZW5zIG93bmVkIGJ5IHRoZSBjYWxsZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIG15VG9rZW5zKCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VPZihfY3VzdG9tZXJBZGRyZXNzKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBSZXRyaWV2ZSB0aGUgZGl2aWRlbmRzIG93bmVkIGJ5IHRoZSBjYWxsZXIuCiAgICAgKiBJZiBgX2luY2x1ZGVSZWZlcnJhbEJvbnVzYCBpcyB0byB0byAxL3RydWUsIHRoZSByZWZlcnJhbCBib251cyB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSBjYWxjdWxhdGlvbnMuCiAgICAgKiBUaGUgcmVhc29uIGZvciB0aGlzLCBpcyB0aGF0IGluIHRoZSBmcm9udGVuZCwgd2Ugd2lsbCB3YW50IHRvIGdldCB0aGUgdG90YWwgZGl2cyAoZ2xvYmFsICsgcmVmKQogICAgICogQnV0IGluIHRoZSBpbnRlcm5hbCBjYWxjdWxhdGlvbnMsIHdlIHdhbnQgdGhlbSBzZXBhcmF0ZS4gCiAgICAgKi8gCiAgICBmdW5jdGlvbiBteURpdmlkZW5kcyhib29sIF9pbmNsdWRlUmVmZXJyYWxCb251cykgCiAgICAgICAgcHVibGljIAogICAgICAgIHZpZXcgCiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgcmV0dXJuIF9pbmNsdWRlUmVmZXJyYWxCb251cyA/IGRpdmlkZW5kc09mKF9jdXN0b21lckFkZHJlc3MpICsgcmVmZXJyYWxCYWxhbmNlX1tfY3VzdG9tZXJBZGRyZXNzXSA6IGRpdmlkZW5kc09mKF9jdXN0b21lckFkZHJlc3MpIDsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBSZXRyaWV2ZSB0aGUgdG9rZW4gYmFsYW5jZSBvZiBhbnkgc2luZ2xlIGFkZHJlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MpCiAgICAgICAgdmlldwogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICByZXR1cm4gdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBSZXRyaWV2ZSB0aGUgZGl2aWRlbmQgYmFsYW5jZSBvZiBhbnkgc2luZ2xlIGFkZHJlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGRpdmlkZW5kc09mKGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcykKICAgICAgICB2aWV3CiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHJldHVybiAodWludDI1NikgKChpbnQyNTYpKHByb2ZpdFBlclNoYXJlXyAqIHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc10pIC0gcGF5b3V0c1RvX1tfY3VzdG9tZXJBZGRyZXNzXSkgLyBtYWduaXR1ZGU7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBidXkgcHJpY2Ugb2YgMSBpbmRpdmlkdWFsIHRva2VuLgogICAgICovCiAgICBmdW5jdGlvbiBzZWxsUHJpY2UoKSAKICAgICAgICBwdWJsaWMgCiAgICAgICAgdmlldyAKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgLy8gb3VyIGNhbGN1bGF0aW9uIHJlbGllcyBvbiB0aGUgdG9rZW4gc3VwcGx5LCBzbyB3ZSBuZWVkIHN1cHBseS4gRG9oLgogICAgICAgIGlmKHRva2VuU3VwcGx5XyA9PSAwKXsKICAgICAgICAgICAgcmV0dXJuIHRva2VuUHJpY2VJbml0aWFsXyAtIHRva2VuUHJpY2VJbmNyZW1lbnRhbF87CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdWludDI1NiBfZXRoZXJldW0gPSB0b2tlbnNUb0V0aGVyZXVtXygxZTE4KTsKICAgICAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gU2FmZU1hdGguZGl2KF9ldGhlcmV1bSwgZGl2aWRlbmRGZWVfICApOwogICAgICAgICAgICB1aW50MjU2IF90YXhlZEV0aGVyZXVtID0gU2FmZU1hdGguc3ViKF9ldGhlcmV1bSwgX2RpdmlkZW5kcyk7CiAgICAgICAgICAgIHJldHVybiBfdGF4ZWRFdGhlcmV1bTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBzZWxsIHByaWNlIG9mIDEgaW5kaXZpZHVhbCB0b2tlbi4KICAgICAqLwogICAgZnVuY3Rpb24gYnV5UHJpY2UoKSAKICAgICAgICBwdWJsaWMgCiAgICAgICAgdmlldyAKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgLy8gb3VyIGNhbGN1bGF0aW9uIHJlbGllcyBvbiB0aGUgdG9rZW4gc3VwcGx5LCBzbyB3ZSBuZWVkIHN1cHBseS4gRG9oLgogICAgICAgIGlmKHRva2VuU3VwcGx5XyA9PSAwKXsKICAgICAgICAgICAgcmV0dXJuIHRva2VuUHJpY2VJbml0aWFsXyArIHRva2VuUHJpY2VJbmNyZW1lbnRhbF87CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdWludDI1NiBfZXRoZXJldW0gPSB0b2tlbnNUb0V0aGVyZXVtXygxZTE4KTsKICAgICAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gU2FmZU1hdGguZGl2KF9ldGhlcmV1bSwgZGl2aWRlbmRGZWVfICApOwogICAgICAgICAgICB1aW50MjU2IF90YXhlZEV0aGVyZXVtID0gU2FmZU1hdGguYWRkKF9ldGhlcmV1bSwgX2RpdmlkZW5kcyk7CiAgICAgICAgICAgIHJldHVybiBfdGF4ZWRFdGhlcmV1bTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8qKgogICAgICogRnVuY3Rpb24gZm9yIHRoZSBmcm9udGVuZCB0byBkeW5hbWljYWxseSByZXRyaWV2ZSB0aGUgcHJpY2Ugc2NhbGluZyBvZiBidXkgb3JkZXJzLgogICAgICovCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVUb2tlbnNSZWNlaXZlZCh1aW50MjU2IF9ldGhlcmV1bVRvU3BlbmQpIAogICAgICAgIHB1YmxpYyAKICAgICAgICB2aWV3IAogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBTYWZlTWF0aC5kaXYoX2V0aGVyZXVtVG9TcGVuZCwgZGl2aWRlbmRGZWVfKTsKICAgICAgICB1aW50MjU2IF90YXhlZEV0aGVyZXVtID0gU2FmZU1hdGguc3ViKF9ldGhlcmV1bVRvU3BlbmQsIF9kaXZpZGVuZHMpOwogICAgICAgIHVpbnQyNTYgX2Ftb3VudE9mVG9rZW5zID0gZXRoZXJldW1Ub1Rva2Vuc18oX3RheGVkRXRoZXJldW0pOwogICAgICAgIAogICAgICAgIHJldHVybiBfYW1vdW50T2ZUb2tlbnM7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogRnVuY3Rpb24gZm9yIHRoZSBmcm9udGVuZCB0byBkeW5hbWljYWxseSByZXRyaWV2ZSB0aGUgcHJpY2Ugc2NhbGluZyBvZiBzZWxsIG9yZGVycy4KICAgICAqLwogICAgZnVuY3Rpb24gY2FsY3VsYXRlRXRoZXJldW1SZWNlaXZlZCh1aW50MjU2IF90b2tlbnNUb1NlbGwpIAogICAgICAgIHB1YmxpYyAKICAgICAgICB2aWV3IAogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICByZXF1aXJlKF90b2tlbnNUb1NlbGwgPD0gdG9rZW5TdXBwbHlfKTsKICAgICAgICB1aW50MjU2IF9ldGhlcmV1bSA9IHRva2Vuc1RvRXRoZXJldW1fKF90b2tlbnNUb1NlbGwpOwogICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IFNhZmVNYXRoLmRpdihfZXRoZXJldW0sIGRpdmlkZW5kRmVlXyk7CiAgICAgICAgdWludDI1NiBfdGF4ZWRFdGhlcmV1bSA9IFNhZmVNYXRoLnN1YihfZXRoZXJldW0sIF9kaXZpZGVuZHMpOwogICAgICAgIHJldHVybiBfdGF4ZWRFdGhlcmV1bTsKICAgIH0KICAgIAogICAgCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgPSAgICAgICAgICAgIElOVEVSTkFMIEZVTkNUSU9OUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCiAgICBmdW5jdGlvbiBwdXJjaGFzZVRva2Vucyh1aW50MjU2IF9pbmNvbWluZ0V0aGVyZXVtLCBhZGRyZXNzIF9yZWZlcnJlZEJ5KQogICAgICAgIGFudGlFYXJseVdoYWxlKF9pbmNvbWluZ0V0aGVyZXVtKQogICAgICAgIGludGVybmFsCiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIC8vIGRhdGEgc2V0dXAKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIHVpbnQyNTYgX3VuZGl2aWRlZERpdmlkZW5kcyA9IFNhZmVNYXRoLmRpdihfaW5jb21pbmdFdGhlcmV1bSwgZGl2aWRlbmRGZWVfKTsKICAgICAgICB1aW50MjU2IF9yZWZlcnJhbEJvbnVzID0gU2FmZU1hdGguZGl2KF91bmRpdmlkZWREaXZpZGVuZHMsIDMpOwogICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IFNhZmVNYXRoLnN1YihfdW5kaXZpZGVkRGl2aWRlbmRzLCBfcmVmZXJyYWxCb251cyk7CiAgICAgICAgdWludDI1NiBfdGF4ZWRFdGhlcmV1bSA9IFNhZmVNYXRoLnN1YihfaW5jb21pbmdFdGhlcmV1bSwgX3VuZGl2aWRlZERpdmlkZW5kcyk7CiAgICAgICAgdWludDI1NiBfYW1vdW50T2ZUb2tlbnMgPSBldGhlcmV1bVRvVG9rZW5zXyhfdGF4ZWRFdGhlcmV1bSk7CiAgICAgICAgdWludDI1NiBfZmVlID0gX2RpdmlkZW5kcyAqIG1hZ25pdHVkZTsKIAogICAgICAgIC8vIG5vIHBvaW50IGluIGNvbnRpbnVpbmcgZXhlY3V0aW9uIGlmIE9QIGlzIGEgcG9vcmZhZyBydXNzaWFuIGhhY2tlcgogICAgICAgIC8vIHByZXZlbnRzIG92ZXJmbG93IGluIHRoZSBjYXNlIHRoYXQgdGhlIHB5cmFtaWQgc29tZWhvdyBtYWdpY2FsbHkgc3RhcnRzIGJlaW5nIHVzZWQgYnkgZXZlcnlvbmUgaW4gdGhlIHdvcmxkCiAgICAgICAgLy8gKG9yIGhhY2tlcnMpCiAgICAgICAgLy8gYW5kIHllcyB3ZSBrbm93IHRoYXQgdGhlIHNhZmVtYXRoIGZ1bmN0aW9uIGF1dG9tYXRpY2FsbHkgcnVsZXMgb3V0IHRoZSAiZ3JlYXRlciB0aGVuIiBlcXVhc2lvbi4KICAgICAgICByZXF1aXJlKF9hbW91bnRPZlRva2VucyA+IDAgJiYgKFNhZmVNYXRoLmFkZChfYW1vdW50T2ZUb2tlbnMsdG9rZW5TdXBwbHlfKSA+IHRva2VuU3VwcGx5XykpOwogICAgICAgIAogICAgICAgIC8vIGlzIHRoZSB1c2VyIHJlZmVycmVkIGJ5IGEgbWFzdGVybm9kZT8KICAgICAgICBpZigKICAgICAgICAgICAgLy8gaXMgdGhpcyBhIHJlZmVycmVkIHB1cmNoYXNlPwogICAgICAgICAgICBfcmVmZXJyZWRCeSAhPSAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAgJiYKCiAgICAgICAgICAgIC8vIG5vIGNoZWF0aW5nIQogICAgICAgICAgICBfcmVmZXJyZWRCeSAhPSBfY3VzdG9tZXJBZGRyZXNzICYmCiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBkb2VzIHRoZSByZWZlcnJlciBoYXZlIGF0IGxlYXN0IFggd2hvbGUgdG9rZW5zPwogICAgICAgICAgICAvLyBpLmUgaXMgdGhlIHJlZmVycmVyIGEgZ29kbHkgY2hhZCBtYXN0ZXJub2RlCiAgICAgICAgICAgIHRva2VuQmFsYW5jZUxlZGdlcl9bX3JlZmVycmVkQnldID49IHN0YWtpbmdSZXF1aXJlbWVudAogICAgICAgICl7CiAgICAgICAgICAgIC8vIHdlYWx0aCByZWRpc3RyaWJ1dGlvbgogICAgICAgICAgICByZWZlcnJhbEJhbGFuY2VfW19yZWZlcnJlZEJ5XSA9IFNhZmVNYXRoLmFkZChyZWZlcnJhbEJhbGFuY2VfW19yZWZlcnJlZEJ5XSwgX3JlZmVycmFsQm9udXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIG5vIHJlZiBwdXJjaGFzZQogICAgICAgICAgICAvLyBhZGQgdGhlIHJlZmVycmFsIGJvbnVzIGJhY2sgdG8gdGhlIGdsb2JhbCBkaXZpZGVuZHMgY2FrZQogICAgICAgICAgICBfZGl2aWRlbmRzID0gU2FmZU1hdGguYWRkKF9kaXZpZGVuZHMsIF9yZWZlcnJhbEJvbnVzKTsKICAgICAgICAgICAgX2ZlZSA9IF9kaXZpZGVuZHMgKiBtYWduaXR1ZGU7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIHdlIGNhbid0IGdpdmUgcGVvcGxlIGluZmluaXRlIGV0aGVyZXVtCiAgICAgICAgaWYodG9rZW5TdXBwbHlfID4gMCl7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBhZGQgdG9rZW5zIHRvIHRoZSBwb29sCiAgICAgICAgICAgIHRva2VuU3VwcGx5XyA9IFNhZmVNYXRoLmFkZCh0b2tlblN1cHBseV8sIF9hbW91bnRPZlRva2Vucyk7CiAKICAgICAgICAgICAgLy8gdGFrZSB0aGUgYW1vdW50IG9mIGRpdmlkZW5kcyBnYWluZWQgdGhyb3VnaCB0aGlzIHRyYW5zYWN0aW9uLCBhbmQgYWxsb2NhdGVzIHRoZW0gZXZlbmx5IHRvIGVhY2ggc2hhcmVob2xkZXIKICAgICAgICAgICAgcHJvZml0UGVyU2hhcmVfICs9IChfZGl2aWRlbmRzICogbWFnbml0dWRlIC8gKHRva2VuU3VwcGx5XykpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoZSBjdXN0b21lciByZWNlaXZlcyBvdmVyIGhpcyBwdXJjaGFzZSAKICAgICAgICAgICAgX2ZlZSA9IF9mZWUgLSAoX2ZlZS0oX2Ftb3VudE9mVG9rZW5zICogKF9kaXZpZGVuZHMgKiBtYWduaXR1ZGUgLyAodG9rZW5TdXBwbHlfKSkpKTsKICAgICAgICAKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBhZGQgdG9rZW5zIHRvIHRoZSBwb29sCiAgICAgICAgICAgIHRva2VuU3VwcGx5XyA9IF9hbW91bnRPZlRva2VuczsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gdXBkYXRlIGNpcmN1bGF0aW5nIHN1cHBseSAmIHRoZSBsZWRnZXIgYWRkcmVzcyBmb3IgdGhlIGN1c3RvbWVyCiAgICAgICAgdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSA9IFNhZmVNYXRoLmFkZCh0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdLCBfYW1vdW50T2ZUb2tlbnMpOwogICAgICAgIAogICAgICAgIC8vIFRlbGxzIHRoZSBjb250cmFjdCB0aGF0IHRoZSBidXllciBkb2Vzbid0IGRlc2VydmUgZGl2aWRlbmRzIGZvciB0aGUgdG9rZW5zIGJlZm9yZSB0aGV5IG93bmVkIHRoZW07CiAgICAgICAgLy9yZWFsbHkgaSBrbm93IHlvdSB0aGluayB5b3UgZG8gYnV0IHlvdSBkb24ndAogICAgICAgIGludDI1NiBfdXBkYXRlZFBheW91dHMgPSAoaW50MjU2KSAoKHByb2ZpdFBlclNoYXJlXyAqIF9hbW91bnRPZlRva2VucykgLSBfZmVlKTsKICAgICAgICBwYXlvdXRzVG9fW19jdXN0b21lckFkZHJlc3NdICs9IF91cGRhdGVkUGF5b3V0czsKICAgICAgICAKICAgICAgICAvLyBmaXJlIGV2ZW50CiAgICAgICAgb25Ub2tlblB1cmNoYXNlKF9jdXN0b21lckFkZHJlc3MsIF9pbmNvbWluZ0V0aGVyZXVtLCBfYW1vdW50T2ZUb2tlbnMsIF9yZWZlcnJlZEJ5KTsKICAgICAgICAKICAgICAgICByZXR1cm4gX2Ftb3VudE9mVG9rZW5zOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsY3VsYXRlIFRva2VuIHByaWNlIGJhc2VkIG9uIGFuIGFtb3VudCBvZiBpbmNvbWluZyBldGhlcmV1bQogICAgICogSXQncyBhbiBhbGdvcml0aG0sIGhvcGVmdWxseSB3ZSBnYXZlIHlvdSB0aGUgd2hpdGVwYXBlciB3aXRoIGl0IGluIHNjaWVudGlmaWMgbm90YXRpb247CiAgICAgKiBTb21lIGNvbnZlcnNpb25zIG9jY3VycmVkIHRvIHByZXZlbnQgZGVjaW1hbCBlcnJvcnMgb3IgdW5kZXJmbG93cyAvIG92ZXJmbG93cyBpbiBzb2xpZGl0eSBjb2RlLgogICAgICovCiAgICBmdW5jdGlvbiBldGhlcmV1bVRvVG9rZW5zXyh1aW50MjU2IF9ldGhlcmV1bSkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgdWludDI1NiBfdG9rZW5QcmljZUluaXRpYWwgPSB0b2tlblByaWNlSW5pdGlhbF8gKiAxZTE4OwogICAgICAgIHVpbnQyNTYgX3Rva2Vuc1JlY2VpdmVkID0gCiAgICAgICAgICgKICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgLy8gdW5kZXJmbG93IGF0dGVtcHRzIEJURk8KICAgICAgICAgICAgICAgIFNhZmVNYXRoLnN1YigKICAgICAgICAgICAgICAgICAgICAoc3FydAogICAgICAgICAgICAgICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoX3Rva2VuUHJpY2VJbml0aWFsKioyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKDIqKHRva2VuUHJpY2VJbmNyZW1lbnRhbF8gKiAxZTE4KSooX2V0aGVyZXVtICogMWUxOCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKCh0b2tlblByaWNlSW5jcmVtZW50YWxfKSoqMikqKHRva2VuU3VwcGx5XyoqMikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMioodG9rZW5QcmljZUluY3JlbWVudGFsXykqX3Rva2VuUHJpY2VJbml0aWFsKnRva2VuU3VwcGx5XykKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICksIF90b2tlblByaWNlSW5pdGlhbAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApLyh0b2tlblByaWNlSW5jcmVtZW50YWxfKQogICAgICAgICktKHRva2VuU3VwcGx5XykKICAgICAgICA7CiAgCiAgICAgICAgcmV0dXJuIF90b2tlbnNSZWNlaXZlZDsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgdG9rZW4gc2VsbCB2YWx1ZS4KICAgICAqIEl0J3MgYW4gYWxnb3JpdGhtLCBob3BlZnVsbHkgd2UgZ2F2ZSB5b3UgdGhlIHdoaXRlcGFwZXIgd2l0aCBpdCBpbiBzY2llbnRpZmljIG5vdGF0aW9uOwogICAgICogU29tZSBjb252ZXJzaW9ucyBvY2N1cnJlZCB0byBwcmV2ZW50IGRlY2ltYWwgZXJyb3JzIG9yIHVuZGVyZmxvd3MgLyBvdmVyZmxvd3MgaW4gc29saWRpdHkgY29kZS4KICAgICAqLwogICAgIGZ1bmN0aW9uIHRva2Vuc1RvRXRoZXJldW1fKHVpbnQyNTYgX3Rva2VucykKICAgICAgICBpbnRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CgogICAgICAgIHVpbnQyNTYgdG9rZW5zXyA9IChfdG9rZW5zICsgMWUxOCk7CiAgICAgICAgdWludDI1NiBfdG9rZW5TdXBwbHkgPSAodG9rZW5TdXBwbHlfICsgMWUxOCk7CiAgICAgICAgdWludDI1NiBfZXRoZXJSZWNlaXZlZCA9CiAgICAgICAgKAogICAgICAgICAgICAvLyB1bmRlcmZsb3cgYXR0ZW1wdHMgQlRGTwogICAgICAgICAgICBTYWZlTWF0aC5zdWIoCiAgICAgICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlblByaWNlSW5pdGlhbF8gKyh0b2tlblByaWNlSW5jcmVtZW50YWxfICogKF90b2tlblN1cHBseS8xZTE4KSkKICAgICAgICAgICAgICAgICAgICAgICAgKS10b2tlblByaWNlSW5jcmVtZW50YWxfCiAgICAgICAgICAgICAgICAgICAgKSoodG9rZW5zXyAtIDFlMTgpCiAgICAgICAgICAgICAgICApLCh0b2tlblByaWNlSW5jcmVtZW50YWxfKigodG9rZW5zXyoqMi10b2tlbnNfKS8xZTE4KSkvMgogICAgICAgICAgICApCiAgICAgICAgLzFlMTgpOwogICAgICAgIHJldHVybiBfZXRoZXJSZWNlaXZlZDsKICAgIH0KICAgIAogICAgCiAgICAvL1RoaXMgaXMgd2hlcmUgYWxsIHlvdXIgZ2FzIGdvZXMsIHNvcnJ5CiAgICAvL05vdCBzb3JyeSwgeW91IHByb2JhYmx5IG9ubHkgcGFpZCAxIGd3ZWkKICAgIGZ1bmN0aW9uIHNxcnQodWludCB4KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgeSkgewogICAgICAgIHVpbnQgeiA9ICh4ICsgMSkgLyAyOwogICAgICAgIHkgPSB4OwogICAgICAgIHdoaWxlICh6IDwgeSkgewogICAgICAgICAgICB5ID0gejsKICAgICAgICAgICAgeiA9ICh4IC8geiArIHopIC8gMjsKICAgICAgICB9CiAgICB9Cn0KCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewoKICAgIC8qKgogICAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAgICovCiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmIChhID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAgICovCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICAgKi8KICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAgICovCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9'.
	

]
