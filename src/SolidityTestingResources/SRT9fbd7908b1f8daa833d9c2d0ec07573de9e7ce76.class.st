Class {
	#name : #SRT9fbd7908b1f8daa833d9c2d0ec07573de9e7ce76,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9fbd7908b1f8daa833d9c2d0ec07573de9e7ce76 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBVdGlscyB7CiAgICAvKioKICAgICAgICBjb25zdHJ1Y3RvcgogICAgKi8KICAgIGZ1bmN0aW9uIFV0aWxzKCkgewogICAgfQoKICAgIC8vIHZlcmlmaWVzIHRoYXQgYW4gYW1vdW50IGlzIGdyZWF0ZXIgdGhhbiB6ZXJvCiAgICBtb2RpZmllciBncmVhdGVyVGhhblplcm8odWludDI1NiBfYW1vdW50KSB7CiAgICAgICAgcmVxdWlyZShfYW1vdW50ID4gMCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyB2YWxpZGF0ZXMgYW4gYWRkcmVzcyAtIGN1cnJlbnRseSBvbmx5IGNoZWNrcyB0aGF0IGl0IGlzbid0IG51bGwKICAgIG1vZGlmaWVyIHZhbGlkQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSB7CiAgICAgICAgcmVxdWlyZShfYWRkcmVzcyAhPSAweDApOwogICAgICAgIF87CiAgICB9CgogICAgLy8gdmVyaWZpZXMgdGhhdCB0aGUgYWRkcmVzcyBpcyBkaWZmZXJlbnQgdGhhbiB0aGlzIGNvbnRyYWN0IGFkZHJlc3MKICAgIG1vZGlmaWVyIG5vdFRoaXMoYWRkcmVzcyBfYWRkcmVzcykgewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3MgIT0gYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBPdmVyZmxvdyBwcm90ZWN0ZWQgbWF0aCBmdW5jdGlvbnMKCiAgICAvKioKICAgICAgICBAZGV2IHJldHVybnMgdGhlIHN1bSBvZiBfeCBhbmQgX3ksIGFzc2VydHMgaWYgdGhlIGNhbGN1bGF0aW9uIG92ZXJmbG93cwoKICAgICAgICBAcGFyYW0gX3ggICB2YWx1ZSAxCiAgICAgICAgQHBhcmFtIF95ICAgdmFsdWUgMgoKICAgICAgICBAcmV0dXJuIHN1bQogICAgKi8KICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludDI1NiBfeCwgdWludDI1NiBfeSkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgeiA9IF94ICsgX3k7CiAgICAgICAgYXNzZXJ0KHogPj0gX3gpOwogICAgICAgIHJldHVybiB6OwogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgcmV0dXJucyB0aGUgZGlmZmVyZW5jZSBvZiBfeCBtaW51cyBfeSwgYXNzZXJ0cyBpZiB0aGUgc3VidHJhY3Rpb24gcmVzdWx0cyBpbiBhIG5lZ2F0aXZlIG51bWJlcgoKICAgICAgICBAcGFyYW0gX3ggICBtaW51ZW5kCiAgICAgICAgQHBhcmFtIF95ICAgc3VidHJhaGVuZAoKICAgICAgICBAcmV0dXJuIGRpZmZlcmVuY2UKICAgICovCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQyNTYgX3gsIHVpbnQyNTYgX3kpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoX3ggPj0gX3kpOwogICAgICAgIHJldHVybiBfeCAtIF95OwogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgcmV0dXJucyB0aGUgcHJvZHVjdCBvZiBtdWx0aXBseWluZyBfeCBieSBfeSwgYXNzZXJ0cyBpZiB0aGUgY2FsY3VsYXRpb24gb3ZlcmZsb3dzCgogICAgICAgIEBwYXJhbSBfeCAgIGZhY3RvciAxCiAgICAgICAgQHBhcmFtIF95ICAgZmFjdG9yIDIKCiAgICAgICAgQHJldHVybiBwcm9kdWN0CiAgICAqLwogICAgZnVuY3Rpb24gc2FmZU11bCh1aW50MjU2IF94LCB1aW50MjU2IF95KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0gX3ggKiBfeTsKICAgICAgICBhc3NlcnQoX3ggPT0gMCB8fCB6IC8gX3ggPT0gX3kpOwogICAgICAgIHJldHVybiB6OwogICAgfQp9Cgpjb250cmFjdCBJRVJDMjBUb2tlbiB7CiAgICAvLyB0aGVzZSBmdW5jdGlvbnMgYXJlbid0IGFic3RyYWN0IHNpbmNlIHRoZSBjb21waWxlciBlbWl0cyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBnZXR0ZXIgZnVuY3Rpb25zIGFzIGV4dGVybmFsCiAgICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBuYW1lKSB7IG5hbWU7IH0KICAgIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgc3ltYm9sKSB7IHN5bWJvbDsgfQogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDggZGVjaW1hbHMpIHsgZGVjaW1hbHM7IH0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpIHsgdG90YWxTdXBwbHk7IH0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgeyBfb3duZXI7IGJhbGFuY2U7IH0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7IF9vd25lcjsgX3NwZW5kZXI7IHJlbWFpbmluZzsgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwp9Cgpjb250cmFjdCBFUkMyMFRva2VuIGlzIElFUkMyMFRva2VuLCBVdGlscyB7CiAgICBzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gJ1Rva2VuIDAuMSc7CiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAnJzsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gJyc7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAwOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSAwOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgogICAgLyoqCiAgICAgICAgQGRldiBjb25zdHJ1Y3RvcgoKICAgICAgICBAcGFyYW0gX25hbWUgICAgICAgIHRva2VuIG5hbWUKICAgICAgICBAcGFyYW0gX3N5bWJvbCAgICAgIHRva2VuIHN5bWJvbAogICAgICAgIEBwYXJhbSBfZGVjaW1hbHMgICAgZGVjaW1hbCBwb2ludHMsIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAqLwogICAgZnVuY3Rpb24gRVJDMjBUb2tlbihzdHJpbmcgX25hbWUsIHN0cmluZyBfc3ltYm9sLCB1aW50OCBfZGVjaW1hbHMpIHsKICAgICAgICByZXF1aXJlKGJ5dGVzKF9uYW1lKS5sZW5ndGggPiAwICYmIGJ5dGVzKF9zeW1ib2wpLmxlbmd0aCA+IDApOyAvLyB2YWxpZGF0ZSBpbnB1dAoKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IHNlbmQgY29pbnMKICAgICAgICB0aHJvd3Mgb24gYW55IGVycm9yIHJhdGhlciB0aGVuIHJldHVybiBhIGZhbHNlIGZsYWcgdG8gbWluaW1pemUgdXNlciBlcnJvcnMKCiAgICAgICAgQHBhcmFtIF90byAgICAgIHRhcmdldCBhZGRyZXNzCiAgICAgICAgQHBhcmFtIF92YWx1ZSAgIHRyYW5zZmVyIGFtb3VudAoKICAgICAgICBAcmV0dXJuIHRydWUgaWYgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsLCBmYWxzZSBpZiBpdCB3YXNuJ3QKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpCiAgICAgICAgcHVibGljCiAgICAgICAgdmFsaWRBZGRyZXNzKF90bykKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlT2ZbbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZU9mW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZltfdG9dLCBfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IGFuIGFjY291bnQvY29udHJhY3QgYXR0ZW1wdHMgdG8gZ2V0IHRoZSBjb2lucwogICAgICAgIHRocm93cyBvbiBhbnkgZXJyb3IgcmF0aGVyIHRoZW4gcmV0dXJuIGEgZmFsc2UgZmxhZyB0byBtaW5pbWl6ZSB1c2VyIGVycm9ycwoKICAgICAgICBAcGFyYW0gX2Zyb20gICAgc291cmNlIGFkZHJlc3MKICAgICAgICBAcGFyYW0gX3RvICAgICAgdGFyZ2V0IGFkZHJlc3MKICAgICAgICBAcGFyYW0gX3ZhbHVlICAgdHJhbnNmZXIgYW1vdW50CgogICAgICAgIEByZXR1cm4gdHJ1ZSBpZiB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwsIGZhbHNlIGlmIGl0IHdhc24ndAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpCiAgICAgICAgcHVibGljCiAgICAgICAgdmFsaWRBZGRyZXNzKF9mcm9tKQogICAgICAgIHZhbGlkQWRkcmVzcyhfdG8pCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZU9mW19mcm9tXSwgX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZU9mW190b10sIF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IGFsbG93IGFub3RoZXIgYWNjb3VudC9jb250cmFjdCB0byBzcGVuZCBzb21lIHRva2VucyBvbiB5b3VyIGJlaGFsZgogICAgICAgIHRocm93cyBvbiBhbnkgZXJyb3IgcmF0aGVyIHRoZW4gcmV0dXJuIGEgZmFsc2UgZmxhZyB0byBtaW5pbWl6ZSB1c2VyIGVycm9ycwoKICAgICAgICBhbHNvLCB0byBtaW5pbWl6ZSB0aGUgcmlzayBvZiB0aGUgYXBwcm92ZS90cmFuc2ZlckZyb20gYXR0YWNrIHZlY3RvcgogICAgICAgIChzZWUgaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xWUxQdFF4WnUxVUF2TzljWjFPMlJQWEJiVDBtb29oNERZS2pBX2pwLVJMTS8pLCBhcHByb3ZlIGhhcyB0byBiZSBjYWxsZWQgdHdpY2UKICAgICAgICBpbiAyIHNlcGFyYXRlIHRyYW5zYWN0aW9ucyAtIG9uY2UgdG8gY2hhbmdlIHRoZSBhbGxvd2FuY2UgdG8gMCBhbmQgc2Vjb25kbHkgdG8gY2hhbmdlIGl0IHRvIHRoZSBuZXcgYWxsb3dhbmNlIHZhbHVlCgogICAgICAgIEBwYXJhbSBfc3BlbmRlciBhcHByb3ZlZCBhZGRyZXNzCiAgICAgICAgQHBhcmFtIF92YWx1ZSAgIGFsbG93YW5jZSBhbW91bnQKCiAgICAgICAgQHJldHVybiB0cnVlIGlmIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2UgaWYgaXQgd2Fzbid0CiAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkKICAgICAgICBwdWJsaWMKICAgICAgICB2YWxpZEFkZHJlc3MoX3NwZW5kZXIpCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIC8vIGlmIHRoZSBhbGxvd2FuY2UgaXNuJ3QgMCwgaXQgY2FuIG9ubHkgYmUgdXBkYXRlZCB0byAwIHRvIHByZXZlbnQgYW4gYWxsb3dhbmNlIGNoYW5nZSBpbW1lZGlhdGVseSBhZnRlciB3aXRoZHJhd2FsCiAgICAgICAgcmVxdWlyZShfdmFsdWUgPT0gMCB8fCBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApOwoKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9Cgpjb250cmFjdCBJT3duZWQgewogICAgLy8gdGhpcyBmdW5jdGlvbiBpc24ndCBhYnN0cmFjdCBzaW5jZSB0aGUgY29tcGlsZXIgZW1pdHMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgZ2V0dGVyIGZ1bmN0aW9ucyBhcyBleHRlcm5hbAogICAgZnVuY3Rpb24gb3duZXIoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyBvd25lcikgeyBvd25lcjsgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWM7CiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSBwdWJsaWM7Cn0KCmNvbnRyYWN0IE93bmVkIGlzIElPd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwoKICAgIGV2ZW50IE93bmVyVXBkYXRlKGFkZHJlc3MgX3ByZXZPd25lciwgYWRkcmVzcyBfbmV3T3duZXIpOwoKICAgIC8qKgogICAgICAgIEBkZXYgY29uc3RydWN0b3IKICAgICovCiAgICBmdW5jdGlvbiBPd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLy8gYWxsb3dzIGV4ZWN1dGlvbiBieSB0aGUgb3duZXIgb25seQogICAgbW9kaWZpZXIgb3duZXJPbmx5IHsKICAgICAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IGFsbG93cyB0cmFuc2ZlcnJpbmcgdGhlIGNvbnRyYWN0IG93bmVyc2hpcAogICAgICAgIHRoZSBuZXcgb3duZXIgc3RpbGwgbmVlZHMgdG8gYWNjZXB0IHRoZSB0cmFuc2ZlcgogICAgICAgIGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgY29udHJhY3Qgb3duZXIKCiAgICAgICAgQHBhcmFtIF9uZXdPd25lciAgICBuZXcgY29udHJhY3Qgb3duZXIKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgcmVxdWlyZShfbmV3T3duZXIgIT0gb3duZXIpOwogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOwogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgdXNlZCBieSBhIG5ldyBvd25lciB0byBhY2NlcHQgYW4gb3duZXJzaGlwIHRyYW5zZmVyCiAgICAqLwogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpOwogICAgICAgIE93bmVyVXBkYXRlKG93bmVyLCBuZXdPd25lcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICBuZXdPd25lciA9IDB4MDsKICAgIH0KfQoKY29udHJhY3QgSVRva2VuSG9sZGVyIGlzIElPd25lZCB7CiAgICBmdW5jdGlvbiB3aXRoZHJhd1Rva2VucyhJRVJDMjBUb2tlbiBfdG9rZW4sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYzsKfQoKY29udHJhY3QgVG9rZW5Ib2xkZXIgaXMgSVRva2VuSG9sZGVyLCBPd25lZCwgVXRpbHMgewogICAgLyoqCiAgICAgICAgQGRldiBjb25zdHJ1Y3RvcgogICAgKi8KICAgIGZ1bmN0aW9uIFRva2VuSG9sZGVyKCkgewogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgd2l0aGRyYXdzIHRva2VucyBoZWxkIGJ5IHRoZSBjb250cmFjdCBhbmQgc2VuZHMgdGhlbSB0byBhbiBhY2NvdW50CiAgICAgICAgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBvd25lcgoKICAgICAgICBAcGFyYW0gX3Rva2VuICAgRVJDMjAgdG9rZW4gY29udHJhY3QgYWRkcmVzcwogICAgICAgIEBwYXJhbSBfdG8gICAgICBhY2NvdW50IHRvIHJlY2VpdmUgdGhlIG5ldyBhbW91bnQKICAgICAgICBAcGFyYW0gX2Ftb3VudCAgYW1vdW50IHRvIHdpdGhkcmF3CiAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXdUb2tlbnMoSUVSQzIwVG9rZW4gX3Rva2VuLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIG93bmVyT25seQogICAgICAgIHZhbGlkQWRkcmVzcyhfdG9rZW4pCiAgICAgICAgdmFsaWRBZGRyZXNzKF90bykKICAgICAgICBub3RUaGlzKF90bykKICAgIHsKICAgICAgICBhc3NlcnQoX3Rva2VuLnRyYW5zZmVyKF90bywgX2Ftb3VudCkpOwogICAgfQp9Cgpjb250cmFjdCBTbWFydFRva2VuQ29udHJvbGxlciBpcyBUb2tlbkhvbGRlciB7CiAgICBJU21hcnRUb2tlbiBwdWJsaWMgdG9rZW47ICAgLy8gc21hcnQgdG9rZW4KCiAgICAvKioKICAgICAgICBAZGV2IGNvbnN0cnVjdG9yCiAgICAqLwogICAgZnVuY3Rpb24gU21hcnRUb2tlbkNvbnRyb2xsZXIoSVNtYXJ0VG9rZW4gX3Rva2VuKQogICAgICAgIHZhbGlkQWRkcmVzcyhfdG9rZW4pCiAgICB7CiAgICAgICAgdG9rZW4gPSBfdG9rZW47CiAgICB9CgogICAgLy8gZW5zdXJlcyB0aGF0IHRoZSBjb250cm9sbGVyIGlzIHRoZSB0b2tlbidzIG93bmVyCiAgICBtb2RpZmllciBhY3RpdmUoKSB7CiAgICAgICAgYXNzZXJ0KHRva2VuLm93bmVyKCkgPT0gYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBlbnN1cmVzIHRoYXQgdGhlIGNvbnRyb2xsZXIgaXMgbm90IHRoZSB0b2tlbidzIG93bmVyCiAgICBtb2RpZmllciBpbmFjdGl2ZSgpIHsKICAgICAgICBhc3NlcnQodG9rZW4ub3duZXIoKSAhPSBhZGRyZXNzKHRoaXMpKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgYWxsb3dzIHRyYW5zZmVycmluZyB0aGUgdG9rZW4gb3duZXJzaGlwCiAgICAgICAgdGhlIG5ldyBvd25lciBzdGlsbCBuZWVkIHRvIGFjY2VwdCB0aGUgdHJhbnNmZXIKICAgICAgICBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIGNvbnRyYWN0IG93bmVyCgogICAgICAgIEBwYXJhbSBfbmV3T3duZXIgICAgbmV3IHRva2VuIG93bmVyCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJUb2tlbk93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgdG9rZW4udHJhbnNmZXJPd25lcnNoaXAoX25ld093bmVyKTsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IHVzZWQgYnkgYSBuZXcgb3duZXIgdG8gYWNjZXB0IGEgdG9rZW4gb3duZXJzaGlwIHRyYW5zZmVyCiAgICAgICAgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBjb250cmFjdCBvd25lcgogICAgKi8KICAgIGZ1bmN0aW9uIGFjY2VwdFRva2VuT3duZXJzaGlwKCkgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgdG9rZW4uYWNjZXB0T3duZXJzaGlwKCk7CiAgICB9CgogICAgLyoqCiAgICAgICAgQGRldiBkaXNhYmxlcy9lbmFibGVzIHRva2VuIHRyYW5zZmVycwogICAgICAgIGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgY29udHJhY3Qgb3duZXIKCiAgICAgICAgQHBhcmFtIF9kaXNhYmxlICAgIHRydWUgdG8gZGlzYWJsZSB0cmFuc2ZlcnMsIGZhbHNlIHRvIGVuYWJsZSB0aGVtCiAgICAqLwogICAgZnVuY3Rpb24gZGlzYWJsZVRva2VuVHJhbnNmZXJzKGJvb2wgX2Rpc2FibGUpIHB1YmxpYyBvd25lck9ubHkgewogICAgICAgIHRva2VuLmRpc2FibGVUcmFuc2ZlcnMoX2Rpc2FibGUpOwogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgd2l0aGRyYXdzIHRva2VucyBoZWxkIGJ5IHRoZSB0b2tlbiBhbmQgc2VuZHMgdGhlbSB0byBhbiBhY2NvdW50CiAgICAgICAgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBvd25lcgoKICAgICAgICBAcGFyYW0gX3Rva2VuICAgRVJDMjAgdG9rZW4gY29udHJhY3QgYWRkcmVzcwogICAgICAgIEBwYXJhbSBfdG8gICAgICBhY2NvdW50IHRvIHJlY2VpdmUgdGhlIG5ldyBhbW91bnQKICAgICAgICBAcGFyYW0gX2Ftb3VudCAgYW1vdW50IHRvIHdpdGhkcmF3CiAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXdGcm9tVG9rZW4oSUVSQzIwVG9rZW4gX3Rva2VuLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgb3duZXJPbmx5IHsKICAgICAgICB0b2tlbi53aXRoZHJhd1Rva2VucyhfdG9rZW4sIF90bywgX2Ftb3VudCk7CiAgICB9Cn0KCmNvbnRyYWN0IElTbWFydFRva2VuIGlzIElUb2tlbkhvbGRlciwgSUVSQzIwVG9rZW4gewogICAgZnVuY3Rpb24gZGlzYWJsZVRyYW5zZmVycyhib29sIF9kaXNhYmxlKSBwdWJsaWM7CiAgICBmdW5jdGlvbiBpc3N1ZShhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWM7CiAgICBmdW5jdGlvbiBkZXN0cm95KGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljOwp9Cgpjb250cmFjdCBTbWFydFRva2VuIGlzIElTbWFydFRva2VuLCBPd25lZCwgRVJDMjBUb2tlbiwgVG9rZW5Ib2xkZXIgewogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gJzAuMyc7CgogICAgYm9vbCBwdWJsaWMgdHJhbnNmZXJzRW5hYmxlZCA9IHRydWU7ICAgIC8vIHRydWUgaWYgdHJhbnNmZXIvdHJhbnNmZXJGcm9tIGFyZSBlbmFibGVkLCBmYWxzZSBpZiBub3QKCiAgICAvLyB0cmlnZ2VyZWQgd2hlbiBhIHNtYXJ0IHRva2VuIGlzIGRlcGxveWVkIC0gdGhlIF90b2tlbiBhZGRyZXNzIGlzIGRlZmluZWQgZm9yIGZvcndhcmQgY29tcGF0aWJpbGl0eSwgaW4gY2FzZSB3ZSB3YW50IHRvIHRyaWdnZXIgdGhlIGV2ZW50IGZyb20gYSBmYWN0b3J5CiAgICBldmVudCBOZXdTbWFydFRva2VuKGFkZHJlc3MgX3Rva2VuKTsKICAgIC8vIHRyaWdnZXJlZCB3aGVuIHRoZSB0b3RhbCBzdXBwbHkgaXMgaW5jcmVhc2VkCiAgICBldmVudCBJc3N1YW5jZSh1aW50MjU2IF9hbW91bnQpOwogICAgLy8gdHJpZ2dlcmVkIHdoZW4gdGhlIHRvdGFsIHN1cHBseSBpcyBkZWNyZWFzZWQKICAgIGV2ZW50IERlc3RydWN0aW9uKHVpbnQyNTYgX2Ftb3VudCk7CgogICAgLyoqCiAgICAgICAgQGRldiBjb25zdHJ1Y3RvcgoKICAgICAgICBAcGFyYW0gX25hbWUgICAgICAgdG9rZW4gbmFtZQogICAgICAgIEBwYXJhbSBfc3ltYm9sICAgICB0b2tlbiBzaG9ydCBzeW1ib2wsIG1pbmltdW0gMSBjaGFyYWN0ZXIKICAgICAgICBAcGFyYW0gX2RlY2ltYWxzICAgZm9yIGRpc3BsYXkgcHVycG9zZXMgb25seQogICAgKi8KICAgIGZ1bmN0aW9uIFNtYXJ0VG9rZW4oc3RyaW5nIF9uYW1lLCBzdHJpbmcgX3N5bWJvbCwgdWludDggX2RlY2ltYWxzKQogICAgICAgIEVSQzIwVG9rZW4oX25hbWUsIF9zeW1ib2wsIF9kZWNpbWFscykKICAgIHsKICAgICAgICBOZXdTbWFydFRva2VuKGFkZHJlc3ModGhpcykpOwogICAgfQoKICAgIC8vIGFsbG93cyBleGVjdXRpb24gb25seSB3aGVuIHRyYW5zZmVycyBhcmVuJ3QgZGlzYWJsZWQKICAgIG1vZGlmaWVyIHRyYW5zZmVyc0FsbG93ZWQgewogICAgICAgIGFzc2VydCh0cmFuc2ZlcnNFbmFibGVkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgZGlzYWJsZXMvZW5hYmxlcyB0cmFuc2ZlcnMKICAgICAgICBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIGNvbnRyYWN0IG93bmVyCgogICAgICAgIEBwYXJhbSBfZGlzYWJsZSAgICB0cnVlIHRvIGRpc2FibGUgdHJhbnNmZXJzLCBmYWxzZSB0byBlbmFibGUgdGhlbQogICAgKi8KICAgIGZ1bmN0aW9uIGRpc2FibGVUcmFuc2ZlcnMoYm9vbCBfZGlzYWJsZSkgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgdHJhbnNmZXJzRW5hYmxlZCA9ICFfZGlzYWJsZTsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IGluY3JlYXNlcyB0aGUgdG9rZW4gc3VwcGx5IGFuZCBzZW5kcyB0aGUgbmV3IHRva2VucyB0byBhbiBhY2NvdW50CiAgICAgICAgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBjb250cmFjdCBvd25lcgoKICAgICAgICBAcGFyYW0gX3RvICAgICAgICAgYWNjb3VudCB0byByZWNlaXZlIHRoZSBuZXcgYW1vdW50CiAgICAgICAgQHBhcmFtIF9hbW91bnQgICAgIGFtb3VudCB0byBpbmNyZWFzZSB0aGUgc3VwcGx5IGJ5CiAgICAqLwogICAgZnVuY3Rpb24gaXNzdWUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICBvd25lck9ubHkKICAgICAgICB2YWxpZEFkZHJlc3MoX3RvKQogICAgICAgIG5vdFRoaXMoX3RvKQogICAgewogICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSwgX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZU9mW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZltfdG9dLCBfYW1vdW50KTsKCiAgICAgICAgSXNzdWFuY2UoX2Ftb3VudCk7CiAgICAgICAgVHJhbnNmZXIodGhpcywgX3RvLCBfYW1vdW50KTsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IHJlbW92ZXMgdG9rZW5zIGZyb20gYW4gYWNjb3VudCBhbmQgZGVjcmVhc2VzIHRoZSB0b2tlbiBzdXBwbHkKICAgICAgICBjYW4gYmUgY2FsbGVkIGJ5IHRoZSBjb250cmFjdCBvd25lciB0byBkZXN0cm95IHRva2VucyBmcm9tIGFueSBhY2NvdW50IG9yIGJ5IGFueSBob2xkZXIgdG8gZGVzdHJveSB0b2tlbnMgZnJvbSBoaXMvaGVyIG93biBhY2NvdW50CgogICAgICAgIEBwYXJhbSBfZnJvbSAgICAgICBhY2NvdW50IHRvIHJlbW92ZSB0aGUgYW1vdW50IGZyb20KICAgICAgICBAcGFyYW0gX2Ftb3VudCAgICAgYW1vdW50IHRvIGRlY3JlYXNlIHRoZSBzdXBwbHkgYnkKICAgICovCiAgICBmdW5jdGlvbiBkZXN0cm95KGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gX2Zyb20gfHwgbXNnLnNlbmRlciA9PSBvd25lcik7IC8vIHZhbGlkYXRlIGlucHV0CgogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VPZltfZnJvbV0sIF9hbW91bnQpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZVN1Yih0b3RhbFN1cHBseSwgX2Ftb3VudCk7CgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCB0aGlzLCBfYW1vdW50KTsKICAgICAgICBEZXN0cnVjdGlvbihfYW1vdW50KTsKICAgIH0KCiAgICAvLyBFUkMyMCBzdGFuZGFyZCBtZXRob2Qgb3ZlcnJpZGVzIHdpdGggc29tZSBleHRyYSBmdW5jdGlvbmFsaXR5CgogICAgLyoqCiAgICAgICAgQGRldiBzZW5kIGNvaW5zCiAgICAgICAgdGhyb3dzIG9uIGFueSBlcnJvciByYXRoZXIgdGhlbiByZXR1cm4gYSBmYWxzZSBmbGFnIHRvIG1pbmltaXplIHVzZXIgZXJyb3JzCiAgICAgICAgaW4gYWRkaXRpb24gdG8gdGhlIHN0YW5kYXJkIGNoZWNrcywgdGhlIGZ1bmN0aW9uIHRocm93cyBpZiB0cmFuc2ZlcnMgYXJlIGRpc2FibGVkCgogICAgICAgIEBwYXJhbSBfdG8gICAgICB0YXJnZXQgYWRkcmVzcwogICAgICAgIEBwYXJhbSBfdmFsdWUgICB0cmFuc2ZlciBhbW91bnQKCiAgICAgICAgQHJldHVybiB0cnVlIGlmIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2UgaWYgaXQgd2Fzbid0CiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgdHJhbnNmZXJzQWxsb3dlZCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhc3NlcnQoc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IGFuIGFjY291bnQvY29udHJhY3QgYXR0ZW1wdHMgdG8gZ2V0IHRoZSBjb2lucwogICAgICAgIHRocm93cyBvbiBhbnkgZXJyb3IgcmF0aGVyIHRoZW4gcmV0dXJuIGEgZmFsc2UgZmxhZyB0byBtaW5pbWl6ZSB1c2VyIGVycm9ycwogICAgICAgIGluIGFkZGl0aW9uIHRvIHRoZSBzdGFuZGFyZCBjaGVja3MsIHRoZSBmdW5jdGlvbiB0aHJvd3MgaWYgdHJhbnNmZXJzIGFyZSBkaXNhYmxlZAoKICAgICAgICBAcGFyYW0gX2Zyb20gICAgc291cmNlIGFkZHJlc3MKICAgICAgICBAcGFyYW0gX3RvICAgICAgdGFyZ2V0IGFkZHJlc3MKICAgICAgICBAcGFyYW0gX3ZhbHVlICAgdHJhbnNmZXIgYW1vdW50CgogICAgICAgIEByZXR1cm4gdHJ1ZSBpZiB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwsIGZhbHNlIGlmIGl0IHdhc24ndAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB0cmFuc2ZlcnNBbGxvd2VkIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFzc2VydChzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCmNvbnRyYWN0IEtpY2tjaXR5QWJzdHJhY3RDcm93ZHNhbGUgaXMgT3duZWQsIFNtYXJ0VG9rZW5Db250cm9sbGVyIHsKICB1aW50MjU2IHB1YmxpYyBldGhlckhhcmRDYXAgPSAxNDcwNiBldGhlcjsgLy8gMTQ3MDYgKiA4NTAgPSAxMjUwMDEwMCB+IDEyLjVtIFVTRAogIHVpbnQyNTYgcHVibGljIGV0aGVyQ29sbGVjdGVkID0gMDsKCiAgdWludDI1NiBwdWJsaWMgVVNEX0lOX0VUSCA9IDQwMDsgLy8gV2UgdXNlIGZpeGVkIHJhdGUgMUVUSCA9IDQwMFVTRAoKICBmdW5jdGlvbiBzZXRVc2RFdGhSYXRlKHVpbnQyNTYgbmV3cmF0ZSkgb3duZXJPbmx5IHsKICAgIFVTRF9JTl9FVEggPSBuZXdyYXRlOwogICAgb25lRXRoZXJJbktpY2tzID0gbmV3cmF0ZSAqIDEwOwogIH0KCiAgZnVuY3Rpb24gdXNkQ29sbGVjdGVkKCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDI1NikgewogICAgcmV0dXJuIHNhZmVNdWwoZXRoZXJDb2xsZWN0ZWQsIFVTRF9JTl9FVEgpIC8gMSBldGhlcjsKICB9CgogIGZ1bmN0aW9uIHNldEhhcmRDYXAodWludDI1NiBuZXdDYXApIG93bmVyT25seSB7CiAgICAgZXRoZXJIYXJkQ2FwID0gbmV3Q2FwOwogIH0KCiAgdWludDI1NiBwdWJsaWMgc2FsZVN0YXJ0VGltZTsKICB1aW50MjU2IHB1YmxpYyBzYWxlRW5kVGltZTsKCiAgbW9kaWZpZXIgZHVyaW5nU2FsZSgpIHsKICAgIGFzc2VydChub3cgPj0gc2FsZVN0YXJ0VGltZSAmJiBub3cgPCBzYWxlRW5kVGltZSk7CiAgICBfOwogIH0KCiAgdWludDI1NiBwcml2YXRlIG1heEdhc1ByaWNlID0gMC4wNiBzemFibzsgLy8gNjAgR3dlaQoKICBtb2RpZmllciB2YWxpZEdhc1ByaWNlKCkgewogICAgYXNzZXJ0KHR4Lmdhc3ByaWNlIDw9IG1heEdhc1ByaWNlKTsKICAgIF87CiAgfQoKICBhZGRyZXNzIHB1YmxpYyBraWNrY2l0eVdhbGxldDsKCiAgZnVuY3Rpb24gS2lja2NpdHlBYnN0cmFjdENyb3dkc2FsZSh1aW50MjU2IHN0YXJ0LCB1aW50MjU2IGVuZCwgS2lja2NpdHlUb2tlbiBfdG9rZW4sIGFkZHJlc3MgYmVuZWZpY2lhcnkpIFNtYXJ0VG9rZW5Db250cm9sbGVyKF90b2tlbikgewogICAgYXNzZXJ0KHN0YXJ0IDwgZW5kKTsKICAgIGFzc2VydChiZW5lZmljaWFyeSAhPSAweDApOwogICAgc2FsZVN0YXJ0VGltZSA9IHN0YXJ0OwogICAgc2FsZUVuZFRpbWUgPSBlbmQ7CiAgICBraWNrY2l0eVdhbGxldCA9IGJlbmVmaWNpYXJ5OwogIH0KCiAgLyoqCiAgS0lDSyB0b2tlbiBoYXZlIDE4IGRlY2ltYWxzLCBzbyB3ZSBjYW4gY2FsY3VsYXRlIGV0aGVyL2tpY2tzIHJhdGUgZGlyZWN0bHkKICAqLwogIHVpbnQyNTYgcHVibGljIG9uZUV0aGVySW5LaWNrcyA9IDQwMDA7CiAgdWludDI1NiBwdWJsaWMgbWluRXRoZXJDb250cmliID0gNTkgZmlubmV5OyAvLyAwLjA1OSBFVEggfiA1MC4xNSQKCiAgZnVuY3Rpb24gY2FsY0tpY2tzKHVpbnQyNTYgZXRoZXJWYWwpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IGtpY2tzVmFsKTsKCiAgLy8gdHJpZ2dlcmVkIG9uIGVhY2ggY29udHJpYnV0aW9uCiAgZXZlbnQgQ29udHJpYnV0aW9uKGFkZHJlc3MgaW5kZXhlZCBjb250cmlidXRvciwgdWludDI1NiBjb250cmlidXRlZCwgdWludDI1NiB0b2tlbnNSZWNlaXZlZCk7CgogIGZ1bmN0aW9uIHByb2Nlc3NDb250cmlidXRpb24oKSBwcml2YXRlIHZhbGlkR2FzUHJpY2UgZHVyaW5nU2FsZSB7CiAgICB1aW50MjU2IGxlZnRUb0NvbGxlY3QgPSBzYWZlU3ViKGV0aGVySGFyZENhcCwgZXRoZXJDb2xsZWN0ZWQpOwogICAgdWludDI1NiBjb250cmlidXRpb24gPSBtc2cudmFsdWUgPiBsZWZ0VG9Db2xsZWN0ID8gbGVmdFRvQ29sbGVjdCA6IG1zZy52YWx1ZTsKICAgIHVpbnQyNTYgY2hhbmdlID0gc2FmZVN1Yihtc2cudmFsdWUsIGNvbnRyaWJ1dGlvbik7CgogICAgaWYgKGNvbnRyaWJ1dGlvbiA+IDApIHsKICAgICAgdWludDI1NiBraWNrcyA9IGNhbGNLaWNrcyhjb250cmlidXRpb24pOwoKICAgICAgLy8gdHJhbnNmZXIgdG9rZW5zIHRvIEtpa2NpdHkgd2FsbGV0CiAgICAgIGtpY2tjaXR5V2FsbGV0LnRyYW5zZmVyKGNvbnRyaWJ1dGlvbik7CgogICAgICAvLyBJc3N1ZSB0b2tlbnMgdG8gY29udHJpYnV0b3IKICAgICAgdG9rZW4uaXNzdWUobXNnLnNlbmRlciwga2lja3MpOwogICAgICBldGhlckNvbGxlY3RlZCA9IHNhZmVBZGQoZXRoZXJDb2xsZWN0ZWQsIGNvbnRyaWJ1dGlvbik7CiAgICAgIENvbnRyaWJ1dGlvbihtc2cuc2VuZGVyLCBjb250cmlidXRpb24sIGtpY2tzKTsKICAgIH0KCiAgICAvLyBHaXZlIGNoYW5nZSBiYWNrIGlmIGl0IGlzIHByZXNlbnQKICAgIGlmIChjaGFuZ2UgPiAwKSB7CiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoY2hhbmdlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgaWYgKG1zZy52YWx1ZSA+IDApIHsKICAgICAgcHJvY2Vzc0NvbnRyaWJ1dGlvbigpOwogICAgfQogIH0KfQoKY29udHJhY3QgS2lja2NpdHlDcm93ZHNhbGVTdGFnZVR3byBpcyBLaWNrY2l0eUFic3RyYWN0Q3Jvd2RzYWxlIHsKICAgIGZ1bmN0aW9uIEtpY2tjaXR5Q3Jvd2RzYWxlU3RhZ2VUd28odWludDI1NiBzdGFydCwgdWludDI1NiBlbmQsIEtpY2tjaXR5VG9rZW4gX3Rva2VuLCBhZGRyZXNzIGJlbmVmaWNpYXJ5KSBLaWNrY2l0eUFic3RyYWN0Q3Jvd2RzYWxlKHN0YXJ0LCBlbmQsIF90b2tlbiwgYmVuZWZpY2lhcnkpIHB1YmxpYyB7IH0KCiAgICBmdW5jdGlvbiBjYWxjS2lja3ModWludDI1NiBldGhlclZhbCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYga2lja3NWYWwpIHsKICAgICAgICBhc3NlcnQoZXRoZXJWYWwgPj0gbWluRXRoZXJDb250cmliKTsKICAgICAgICB1aW50MjU2IHZhbHVlID0gc2FmZU11bChldGhlclZhbCwgb25lRXRoZXJJbktpY2tzKTsKICAgICAgICAgIC8vIDE1JSBib251cyBmb3IgYWxsCiAgICAgICAga2lja3NWYWwgPSBzYWZlQWRkKHZhbHVlLCBzYWZlTXVsKHZhbHVlIC8gMTAwLCAxNSkpOwogICAgfQp9Cgpjb250cmFjdCBLaWNrY2l0eVRva2VuIGlzIFNtYXJ0VG9rZW4gewogICAgZnVuY3Rpb24gS2lja2NpdHlUb2tlbigpIFNtYXJ0VG9rZW4oIktpY2tDaXR5IFRva2VuIiwgIktDWSIsIDE4KSB7IAogICAgICAgIGRpc2FibGVUcmFuc2ZlcnModHJ1ZSk7CiAgICAgfQp9'.
	

]
