Class {
	#name : #SRT50f0557Ae11D55829949bf7AF8cD9F69b80a56Eb,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT50f0557Ae11D55829949bf7AF8cD9F69b80a56Eb >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgppbnRlcmZhY2UgTWlncmF0aW9uQWdlbnQgewogIGZ1bmN0aW9uIG1pZ3JhdGVGcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKTsKfQoKY29udHJhY3QgUG9vbEFsbG9jYXRpb25zIHsKCiAgLy8gRVJDMjAgYmFzaWMgdG9rZW4gY29udHJhY3QgYmVpbmcgaGVsZAogIEVSQzIwQmFzaWMgcHVibGljIHRva2VuOwoKIC8vIGFsbG9jYXRpb25zIG1hcAogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbG9ja0VudHJ5KSBwdWJsaWMgYWxsb2NhdGlvbnM7CgogIC8vIGxvY2sgZW50cnkKICBzdHJ1Y3QgbG9ja0VudHJ5IHsKICAgICAgdWludDI1NiB0b3RhbEFtb3VudDsgICAgICAgIC8vIHRvdGFsIGFtb3VudCBvZiB0b2tlbiBmb3IgYSB1c2VyCiAgICAgIHVpbnQyNTYgZmlyc3RSZWxlYXNlQW1vdW50OyAvLyBhbW91bnQgdG8gYmUgcmVsZWFzZWQgCiAgICAgIHVpbnQyNTYgbmV4dFJlbGVhc2U7ICAgICAgICAvLyBhbW91bnQgdG8gYmUgcmVsZWFzZWQgZXZlcnkgbW9udGgKICAgICAgdWludDI1NiByZXN0T2ZUb2tlbnM7ICAgICAgIC8vIHRoZSByZXN0IG9mIHRva2VucyBpZiBub3QgZGl2aXNpYmxlCiAgICAgIGJvb2wgaXNGaXJzdFJlbGVhc2U7ICAgICAgICAvLyBqdXN0IGZsYWcKICAgICAgdWludCBudW1QYXlvdXRDeWNsZXM7ICAgICAgIC8vIG9ubHkgYWZ0ZXIgMyB5ZWFycwogIH0KCiAgLy8gbWF4IG51bWJlciBvZiBwYXlvdXQgY3ljbGVzCiAgdWludCBwdWJsaWMgbWF4TnVtT2ZQYXlvdXRDeWNsZXM7CgogIC8vIGZpcnN0IHJlbGVhc2UgZGF0ZQogIHVpbnQgcHVibGljIHN0YXJ0RGF5OwoKICAvLyBkZWZpbmVzIGhvdyBtYW55IG9mIGN5Y2xlcyBzaG91bGQgYmUgcmVsZWFzZWQgaW1tZWRpYXRlbHkKICB1aW50IHB1YmxpYyBjeWNsZXNTdGFydEZyb20gPSAxOwoKICB1aW50IHB1YmxpYyBwYXlvdXRDeWNsZUluRGF5czsKCiAgZnVuY3Rpb24gUG9vbEFsbG9jYXRpb25zKEVSQzIwQmFzaWMgX3Rva2VuKSBwdWJsaWMgewogICAgdG9rZW4gPSBfdG9rZW47CiAgfQoKICAvKioKICAgKiBAZGV2IGNsYWltcyB0b2tlbnMgaGVsZCBieSB0aW1lIGxvY2sKICAgKi8KICBmdW5jdGlvbiBjbGFpbSgpIHB1YmxpYyB7CiAgICByZXF1aXJlKG5vdyA+PSBzdGFydERheSk7CgogICAgIHZhciBlbGVtID0gYWxsb2NhdGlvbnNbbXNnLnNlbmRlcl07CiAgICByZXF1aXJlKGVsZW0ubnVtUGF5b3V0Q3ljbGVzID4gMCk7CgogICAgdWludDI1NiB0b2tlbnMgPSAwOwogICAgdWludCBjeWNsZXMgPSBnZXRQYXlvdXRDeWNsZXMoZWxlbS5udW1QYXlvdXRDeWNsZXMpOwoKICAgIGlmIChlbGVtLmlzRmlyc3RSZWxlYXNlKSB7CiAgICAgIGVsZW0uaXNGaXJzdFJlbGVhc2UgPSBmYWxzZTsKICAgICAgdG9rZW5zICs9IGVsZW0uZmlyc3RSZWxlYXNlQW1vdW50OwogICAgICB0b2tlbnMgKz0gZWxlbS5yZXN0T2ZUb2tlbnM7CiAgICB9IGVsc2UgewogICAgICByZXF1aXJlKGN5Y2xlcyA+IDApOwogICAgfQoKICAgIHRva2VucyArPSBlbGVtLm5leHRSZWxlYXNlICogY3ljbGVzOwoKICAgIGVsZW0ubnVtUGF5b3V0Q3ljbGVzIC09IGN5Y2xlczsKCiAgICBhc3NlcnQodG9rZW4udHJhbnNmZXIobXNnLnNlbmRlciwgdG9rZW5zKSk7CiAgfQoKICBmdW5jdGlvbiBnZXRQYXlvdXRDeWNsZXModWludCBwYXlvdXRDeWNsZXNMZWZ0KSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgY3ljbGVzID0gdWludCgobm93IC0gc3RhcnREYXkpIC8gcGF5b3V0Q3ljbGVJbkRheXMpICsgY3ljbGVzU3RhcnRGcm9tOwoKICAgIGlmIChjeWNsZXMgPiBtYXhOdW1PZlBheW91dEN5Y2xlcykgewogICAgICAgY3ljbGVzID0gbWF4TnVtT2ZQYXlvdXRDeWNsZXM7CiAgICB9CgogICAgcmV0dXJuIGN5Y2xlcyAtIChtYXhOdW1PZlBheW91dEN5Y2xlcyAtIHBheW91dEN5Y2xlc0xlZnQpOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlQWxsb2NhdGlvbkVudHJ5KHVpbnQyNTYgdG90YWwsIHVpbnQyNTYgZmlyc3QsIHVpbnQyNTYgbmV4dCwgdWludDI1NiByZXN0KSBpbnRlcm5hbCByZXR1cm5zKGxvY2tFbnRyeSkgewogICAgcmV0dXJuIGxvY2tFbnRyeSh0b3RhbCwgLy8gdG90YWwKICAgICAgICAgICAgICAgICAgICAgZmlyc3QsIC8vIGZpcnN0CiAgICAgICAgICAgICAgICAgICAgIG5leHQsICAvLyBuZXh0CiAgICAgICAgICAgICAgICAgICAgIHJlc3QsICAvLyByZXN0CiAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvL2lzRmlyc3RSZWxlYXNlCiAgICAgICAgICAgICAgICAgICAgIG1heE51bU9mUGF5b3V0Q3ljbGVzKTsgLy9wYXlvdXRDeWNsZXNMZWZ0CiAgfQp9Cgpjb250cmFjdCBQb29sQkxvY2sgaXMgUG9vbEFsbG9jYXRpb25zIHsKCiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG90YWxBbW91bnQgPSA5MTE1Njc4MTAzMDAwNjM4MDEyNTU4NTE3Nzc7CgogIGZ1bmN0aW9uIFBvb2xCTG9jayhFUkMyMEJhc2ljIF90b2tlbikgUG9vbEFsbG9jYXRpb25zKF90b2tlbikgewoKICAgIC8vIHNldHVwIHBvbGljeQogICAgbWF4TnVtT2ZQYXlvdXRDeWNsZXMgPSA1OyAvLyAyMCUgKiA1ID0gMTAwJQogICAgc3RhcnREYXkgPSBub3c7CiAgICBjeWNsZXNTdGFydEZyb20gPSAxOyAvLyB0aGUgZmlyc3QgcGF5b3V0IGN5Y2xlcyBpcyByZWxlYXNlZCBpbW1lZGlhdGVseQogICAgcGF5b3V0Q3ljbGVJbkRheXMgPSAxODAgZGF5czsgLy8gMjAlIG9mIHRva2VucyB3aWxsIGJlIHJlbGVhc2VkIGV2ZXJ5IDYgbW9udGhzCgogICAgLy8gYWxsb2NhdGlvbnMKICAgIGFsbG9jYXRpb25zWzB4MmYwOTA3OTA1OWI4NWMxMURkQTI5ZWQ2MkZGMjZGOTliNzQ2OTk1MF0gPSBjcmVhdGVBbGxvY2F0aW9uRW50cnkoMTgyMzEzNTYyMDYwMDEyNzYwMjUxMTcwMzU1LCAwLCAzNjQ2MjcxMjQxMjAwMjU1MjA1MDIzNDA3MSwgMCk7CiAgICBhbGxvY2F0aW9uc1sweDM2MzRhY0EzY2Y5N2RDQzQwNTg0ZEIwMmQ1M0UyOTBiNWI0YjY1RkFdID0gY3JlYXRlQWxsb2NhdGlvbkVudHJ5KDE4MjMxMzU2MjA2MDAxMjc2MDI1MTE3MDM1NSwgMCwgMzY0NjI3MTI0MTIwMDI1NTIwNTAyMzQwNzEsIDApOwogICAgYWxsb2NhdGlvbnNbMHg3NjhEOUYwNDRiOWM4MzUwYjA0MTg5N2YwOGNBNzdBRTg3MUFlRjFDXSA9IGNyZWF0ZUFsbG9jYXRpb25FbnRyeSgxODIzMTM1NjIwNjAwMTI3NjAyNTExNzAzNTUsIDAsIDM2NDYyNzEyNDEyMDAyNTUyMDUwMjM0MDcxLCAwKTsKICAgIGFsbG9jYXRpb25zWzB4Yjk2RGU3MmQzZmVlOGM3QjZjMDk2RGRlYWI5M2JmMGIzRGU4NDhjNF0gPSBjcmVhdGVBbGxvY2F0aW9uRW50cnkoMTgyMzEzNTYyMDYwMDEyNzYwMjUxMTcwMzU1LCAwLCAzNjQ2MjcxMjQxMjAwMjU1MjA1MDIzNDA3MSwgMCk7CiAgICBhbGxvY2F0aW9uc1sweDJmOTdiZkQ3YTQ3OTg1N2E5MDI4MzM5Q2UyNDI2RmMzQzYyRDk2QmRdID0gY3JlYXRlQWxsb2NhdGlvbkVudHJ5KDE4MjMxMzU2MjA2MDAxMjc2MDI1MTE3MDM1NywgMCwgMzY0NjI3MTI0MTIwMDI1NTIwNTAyMzQwNzEsIDIpOwogIH0KfQoKY29udHJhY3QgUG9vbENMb2NrIGlzIFBvb2xBbGxvY2F0aW9ucyB7CgogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRvdGFsQW1vdW50ID0gOTExNTY3ODEwMzAwMDYzODAxMjU1ODUxNzc3OwoKICBmdW5jdGlvbiBQb29sQ0xvY2soRVJDMjBCYXNpYyBfdG9rZW4pIFBvb2xBbGxvY2F0aW9ucyhfdG9rZW4pIHsKICAgIAogICAgLy8gc2V0dXAgcG9saWN5CiAgICBtYXhOdW1PZlBheW91dEN5Y2xlcyA9IDU7IC8vIDIwJSAqIDUgPSAxMDAlCiAgICBzdGFydERheSA9IG5vdzsKICAgIGN5Y2xlc1N0YXJ0RnJvbSA9IDE7IC8vIHRoZSBmaXJzdCBwYXlvdXQgY3ljbGVzIGlzIHJlbGVhc2VkIGltbWVkaWF0ZWx5CiAgICBwYXlvdXRDeWNsZUluRGF5cyA9IDE4MCBkYXlzOyAvLyAyMCUgb2YgdG9rZW5zIHdpbGwgYmUgcmVsZWFzZWQgZXZlcnkgNiBtb250aHMKCiAgICAvLyBhbGxvY2F0aW9ucwogICAgYWxsb2NhdGlvbnNbMHgwZDAyQTMzNjVkRmQ3NDVmNzYyMjVBMDExOWZkRDE0ODk1NWY4MjFFXSA9IGNyZWF0ZUFsbG9jYXRpb25FbnRyeSgxODIzMTM1NjIwNjAwMTI3NjAyNTExNzAzNTUsIDAsIDM2NDYyNzEyNDEyMDAyNTUyMDUwMjM0MDcxLCAwKTsKICAgIGFsbG9jYXRpb25zWzB4MGRlRjRBNERlMzM3NzcxYzIyQWM4QzhENGI5QzVGZWM0OTY4NDFBNV0gPSBjcmVhdGVBbGxvY2F0aW9uRW50cnkoMTgyMzEzNTYyMDYwMDEyNzYwMjUxMTcwMzU1LCAwLCAzNjQ2MjcxMjQxMjAwMjU1MjA1MDIzNDA3MSwgMCk7CiAgICBhbGxvY2F0aW9uc1sweDQ2NzYwMDM2N0JkQkExZDg1MmRiZDhDMTY2MWE1RTZhMkJlNUY2QzhdID0gY3JlYXRlQWxsb2NhdGlvbkVudHJ5KDE4MjMxMzU2MjA2MDAxMjc2MDI1MTE3MDM1NSwgMCwgMzY0NjI3MTI0MTIwMDI1NTIwNTAyMzQwNzEsIDApOwogICAgYWxsb2NhdGlvbnNbMHg5MkUwMTczOTE0MjM4NkU0ODIwZUM4ZGRDM0FGZkY2OWRlOTk2NDFhXSA9IGNyZWF0ZUFsbG9jYXRpb25FbnRyeSgxODIzMTM1NjIwNjAwMTI3NjAyNTExNzAzNTUsIDAsIDM2NDYyNzEyNDEyMDAyNTUyMDUwMjM0MDcxLCAwKTsKICAgIGFsbG9jYXRpb25zWzB4MUUwYTdFMDcwNjM3M2QwYjc2NzUyNDQ4RUQzM2NBMUU0MDcwNzUzQV0gPSBjcmVhdGVBbGxvY2F0aW9uRW50cnkoMTgyMzEzNTYyMDYwMDEyNzYwMjUxMTcwMzU3LCAwLCAzNjQ2MjcxMjQxMjAwMjU1MjA1MDIzNDA3MSwgMik7CiAgfQp9Cgpjb250cmFjdCBQb29sRExvY2sgaXMgUG9vbEFsbG9jYXRpb25zIHsKCiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG90YWxBbW91bnQgPSA1NDY5NDA2ODYxODAwMzgyODA3NTM1MTEwNjY7CgogIGZ1bmN0aW9uIFBvb2xETG9jayhFUkMyMEJhc2ljIF90b2tlbikgUG9vbEFsbG9jYXRpb25zKF90b2tlbikgewogICAgCiAgICAvLyBzZXR1cCBwb2xpY3kKICAgIG1heE51bU9mUGF5b3V0Q3ljbGVzID0gMzY7IC8vIHRvdGFsICogLjUgLyAzNgogICAgc3RhcnREYXkgPSBub3cgKyAzIHllYXJzOyAgLy8gZmlyc3QgcmVsZWFzZSBkYXRlCiAgICBjeWNsZXNTdGFydEZyb20gPSAwOwogICAgcGF5b3V0Q3ljbGVJbkRheXMgPSAzMCBkYXlzOyAvLyAxLzM2IG9mIHRva2VucyB3aWxsIGJlIHJlbGVhc2VkIGV2ZXJ5IG1vbnRoCgogICAgLy8gYWxsb2NhdGlvbnMKICAgIGFsbG9jYXRpb25zWzB4NDMxMUY2RjY1QjQxMWY1NDZjN0REODg0MUEzNDQ2MTQyOTdEYmY2Ml0gPSBjcmVhdGVBbGxvY2F0aW9uRW50cnkoCiAgICAgIDE4MjMxMzU2MjA2MDAxMjc2MDI1MTE3MDM1NSwgLy8gdG90YWwKICAgICAgOTExNTY3ODEwMzAwMDYzODAxMjU1ODUxNzcsICAvLyBmaXJzdCByZWxlYXNlCiAgICAgIDI1MzIxMzI4MDYzODkwNjYxMTQ1OTk1ODgsICAgLy8gbmV4dCByZWxlYXNlCiAgICAgIDEwICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlc3QKICAgICk7CiAgICAgYWxsb2NhdGlvbnNbMHgzYjUyQWI0MDhjZDQ5OUExNDU2YWY4M0FDMDk1ZkNhMjNDMDE0ZTBkXSA9IGNyZWF0ZUFsbG9jYXRpb25FbnRyeSgKICAgICAgMTgyMzEzNTYyMDYwMDEyNzYwMjUxMTcwMzU1LCAvLyB0b3RhbAogICAgICA5MTE1Njc4MTAzMDAwNjM4MDEyNTU4NTE3NywgIC8vIGZpcnN0IHJlbGVhc2UKICAgICAgMjUzMjEzMjgwNjM4OTA2NjExNDU5OTU4OCwgICAvLyBuZXh0IHJlbGVhc2UKICAgICAgMTAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVzdAogICAgKTsKICAgICBhbGxvY2F0aW9uc1sweDcyOEQ1MzEyRmJiZEZCY0MxYjk1ODJFNjE5ZjZjZUI2NDEyQjk4RTRdID0gY3JlYXRlQWxsb2NhdGlvbkVudHJ5KAogICAgICAxODIzMTM1NjIwNjAwMTI3NjAyNTExNzAzNTYsIC8vIHRvdGFsCiAgICAgIDkxMTU2NzgxMDMwMDA2MzgwMTI1NTg1MTc3LCAgLy8gZmlyc3QgcmVsZWFzZQogICAgICAyNTMyMTMyODA2Mzg5MDY2MTE0NTk5NTg4LCAgIC8vIG5leHQgcmVsZWFzZQogICAgICAxMSAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXN0CiAgICApOwogIH0KfQoKY29udHJhY3QgUGF1c2FibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZnVuY3Rpb24gUGF1c2FibGUoYWRkcmVzcyBfb3duZXIpIHsKICAgIG93bmVyID0gX293bmVyOwogIH0KCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgcGF1c2VkCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KICB9Cgp9Cgpjb250cmFjdCBCbG9ja3ZQdWJsaWNMZWRnZXIgaXMgT3duYWJsZSB7CgogIHN0cnVjdCBsb2dFbnRyeXsKICAgICAgICBzdHJpbmcgdHhUeXBlOwogICAgICAgIHN0cmluZyB0eElkOwogICAgICAgIGFkZHJlc3MgdG87CiAgICAgICAgdWludDI1NiBhbW91bnRDb250cmlidXRlZDsKICAgICAgICB1aW50OCBkaXNjb3VudDsKICAgICAgICB1aW50MjU2IGJsb2NrVGltZXN0YW1wOwogIH0KICBzdHJ1Y3QgZGlzdHJpYnV0aW9uRW50cnl7CiAgICAgICAgc3RyaW5nIHR4SWQ7CiAgICAgICAgYWRkcmVzcyB0bzsKICAgICAgICB1aW50MjU2IGFtb3VudENvbnRyaWJ1dGVkOyAgICAKICAgICAgICB1aW50OCBkaXNjb3VudDsKICAgICAgICB1aW50MjU2IHRva2VuQW1vdW50OwogIH0KICBzdHJ1Y3QgaW5kZXggewogICAgdWludDI1NiBpbmRleDsKICAgIGJvb2wgc2V0OwogIH0KICB1aW50MjU2IHB1YmxpYyB0eENvdW50ID0gMDsKICB1aW50MjU2IHB1YmxpYyBkaXN0cmlidXRpb25FbnRyeUNvdW50ID0gMDsKICBtYXBwaW5nIChzdHJpbmcgPT4gaW5kZXgpIGRpc3RyaWJ1dGlvbkluZGV4OwogIGxvZ0VudHJ5W10gcHVibGljIHRyYW5zYWN0aW9uTG9nOwogIGRpc3RyaWJ1dGlvbkVudHJ5W10gcHVibGljIGRpc3RyaWJ1dGlvbkxpc3Q7CiAgYm9vbCBwdWJsaWMgZGlzdHJpYnV0aW9uRml4ZWQgPSBmYWxzZTsKCgogIC8qKgogICAqIEBkZXYgQmxvY2t2UHVibGljTGVkZ2VyIENvbnN0cnVjdG9yCiAgICogUnVucyBvbmx5IG9uIGluaXRpYWwgY29udHJhY3QgY3JlYXRpb24uCiAgICovCiAgZnVuY3Rpb24gQmxvY2t2UHVibGljTGVkZ2VyKCkgewogIH0KCiAgLyoqCiAgICogQGRldiB1cGRhdGUvY3JlYXRlIGEgcmVjb3JkIGluIHRoZSBEaXN0cmlidXRpb24gTGlzdAogICAqIEBwYXJhbSBfdHhfaWQgQSB1bmlxdWUgaWQgZm9yIHRoZSB0cmFuc2FjdGlvbiwgY291bGQgYmUgdGhlIEJUQyBvciBFVEggdHhfaWQKICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgY29udHJpYnV0ZWQgaW4gRVRIIGdyYWlucy4KICAgKiBAcGFyYW0gX2Rpc2NvdW50IFRoZSBkaXNjb3VudCB2YWx1ZSBpbiBwZXJjZW50OyAxMDAgbWVhbmluZyBubyBkaXNjb3VudCwgODAgbWVhbmluZyAyMCUgZGlzY291bnQuCiAgICovCiAgZnVuY3Rpb24gYXBwZW5kVG9EaXN0cmlidXRpb25MaXN0KHN0cmluZyBfdHhfaWQsIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQsIHVpbnQ4IF9kaXNjb3VudCkgIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICAgICAgaW5kZXggbWVtb3J5IGlkeCA9IGRpc3RyaWJ1dGlvbkluZGV4W190eF9pZF07CiAgICAgICAgYm9vbCByZXQ7CiAgICAgICAgbG9nRW50cnkgbWVtb3J5IGxlOwogICAgICAgIGRpc3RyaWJ1dGlvbkVudHJ5IG1lbW9yeSBkZTsKCiAgICAgICAgaWYoZGlzdHJpYnV0aW9uRml4ZWQpIHsgIAogICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIF9kaXNjb3VudCA+IDEwMCApIHsKICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICAvKiBidWlsZCB0aGUgbG9nIHJlY29yZCBhbmQgYWRkIGl0IHRvIHRoZSB0cmFuc2FjdGlvbiBsb2cgZmlyc3QgKi8KICAgICAgICBpZiAoICFpZHguc2V0ICkgewogICAgICAgICAgICByZXQgPSBmYWxzZTsKICAgICAgICAgICAgbGUudHhUeXBlID0gIklOU0VSVCI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0ID0gdHJ1ZTsKICAgICAgICAgICAgbGUudHhUeXBlID0gIlVQREFURSI7ICAgICAgICAgIAogICAgICAgIH0KICAgICAgICBsZS50byA9IF90bzsKICAgICAgICBsZS5hbW91bnRDb250cmlidXRlZCA9IF9hbW91bnQ7CiAgICAgICAgbGUuYmxvY2tUaW1lc3RhbXAgPSBibG9jay50aW1lc3RhbXA7CiAgICAgICAgbGUudHhJZCA9IF90eF9pZDsKICAgICAgICBsZS5kaXNjb3VudCA9IF9kaXNjb3VudDsKICAgICAgICB0cmFuc2FjdGlvbkxvZy5wdXNoKGxlKTsKICAgICAgICB0eENvdW50Kys7CgogICAgICAgIC8qIG5vdyBhcHBlbmQgb3IgdXBkYXRlIHRoZSBkaXN0cmlidXRpb25MaXN0ICovCiAgICAgICAgZGUudHhJZCA9IF90eF9pZDsKICAgICAgICBkZS50byA9IF90bzsKICAgICAgICBkZS5hbW91bnRDb250cmlidXRlZCA9IF9hbW91bnQ7CiAgICAgICAgZGUuZGlzY291bnQgPSBfZGlzY291bnQ7CiAgICAgICAgZGUudG9rZW5BbW91bnQgPSAwOwogICAgICAgIGlmICghaWR4LnNldCkgewogICAgICAgICAgaWR4LmluZGV4ID0gZGlzdHJpYnV0aW9uRW50cnlDb3VudDsKICAgICAgICAgIGlkeC5zZXQgPSB0cnVlOwogICAgICAgICAgZGlzdHJpYnV0aW9uSW5kZXhbX3R4X2lkXSA9IGlkeDsKICAgICAgICAgIGRpc3RyaWJ1dGlvbkxpc3QucHVzaChkZSk7CiAgICAgICAgICBkaXN0cmlidXRpb25FbnRyeUNvdW50Kys7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRpc3RyaWJ1dGlvbkxpc3RbaWR4LmluZGV4XSA9IGRlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmV0OwogIH0KCgogIC8qKgogICogSU1QT1JUQU5UIFRoaXMgZnVuY3Rpb24gaXMgbm90IHVzZWQgYW55bW9yZSwgd2UgZGVjaWRlZCB0byBtb3ZlIHRoaXMgZnVuY3Rpb25hbGl0eSB0byBQb29sIEEhISEKICAqIEBkZXYgZmluYWxpemUgdGhlIGRpc3RyaWJ1dGlvbkxpc3QgYWZ0ZXIgdG9rZW4gcHJpY2UgaXMgc2V0IGFuZCBFVEggY29udmVyc2lvbiBpcyBrbm93bgogICogQHBhcmFtIF90b2tlblByaWNlIHRoZSBwcmljZSBvZiBhIFZFRSBpbiBVU0QtY2VudHMKICAqIEBwYXJhbSBfdXNkVG9FdGhDb252ZXJzaW9uUmF0ZSBpbiBncmFpbnMKICAqLwogIGZ1bmN0aW9uIGZpeERpc3RyaWJ1dGlvbih1aW50OCBfdG9rZW5QcmljZSwgdWludDI1NiBfdXNkVG9FdGhDb252ZXJzaW9uUmF0ZSkgb25seU93bmVyIHsKCiAgICBkaXN0cmlidXRpb25FbnRyeSBtZW1vcnkgZGU7CiAgICBsb2dFbnRyeSBtZW1vcnkgbGU7CiAgICB1aW50MjU2IGkgPSAwOwoKICAgIGlmKGRpc3RyaWJ1dGlvbkZpeGVkKSB7ICAKICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgZm9yKGkgPSAwOyBpIDwgZGlzdHJpYnV0aW9uRW50cnlDb3VudDsgaSsrKSB7CiAgICAgIGRlID0gZGlzdHJpYnV0aW9uTGlzdFtpXTsKICAgICAgZGUudG9rZW5BbW91bnQgPSAoZGUuYW1vdW50Q29udHJpYnV0ZWQgKiBfdXNkVG9FdGhDb252ZXJzaW9uUmF0ZSAqIDEwMCkgLyAoX3Rva2VuUHJpY2UgICogZGUuZGlzY291bnQgLyAxMDApOwogICAgICBkaXN0cmlidXRpb25MaXN0W2ldID0gZGU7CiAgICB9CiAgICBkaXN0cmlidXRpb25GaXhlZCA9IHRydWU7CiAgCiAgICBsZS50eFR5cGUgPSAiRklYRUQiOwogICAgbGUuYmxvY2tUaW1lc3RhbXAgPSBibG9jay50aW1lc3RhbXA7CiAgICBsZS50eElkID0gIl9fRklYRURfX0RJU1RSSUJVVElPTl9fIjsKICAgIHRyYW5zYWN0aW9uTG9nLnB1c2gobGUpOwogICAgdHhDb3VudCsrOwoKICB9Cgp9Cgpjb250cmFjdCBQb29sQUNvbnRyYWN0IGlzIE93bmFibGUgewogICAgdWludDI1NiBwcml2YXRlIGxlZGdlckNvbnRyYWN0U2l6ZSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyBjdXJyZW50SW5kZXggPSAwOwogICAgdWludCBwdWJsaWMgY2h1bmtTaXplID0gMDsKCiAgICBib29sIHB1YmxpYyBkb25lID0gZmFsc2U7CgogICAgdWludCBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IG9uZVRva2VuSW5XZWkgPSA2OTE2NDYyMjU3NjI4NTsKCiAgICB1aW50IGNvbnN0YW50IGRlZmF1bHREaXNjb3VudCA9IDEwMDsKICAgIHVpbnQyNTYgY29uc3RhbnQgZGlzY291bnRNdWx0aXBsaWVyID0gMTAgKiogMjQ7CiAgICBtYXBwaW5nKHVpbnQ4ID0+IHVpbnQyNTYpIGRpc2NvdW50czsKCiAgICBhZGRyZXNzIHB1YmxpYyBsZWRnZXJDb250cmFjdEFkZHI7CiAgICBhZGRyZXNzIHB1YmxpYyBibG9ja1ZDb250cmFjdEFkZHI7CgogICAgQmxvY2t2VG9rZW4gYmxvY2tWQ29udHJhY3Q7CiAgICBCbG9ja3ZQdWJsaWNMZWRnZXIgbGVkZ2VyQ29udHJhY3Q7IAoKICAgIGZ1bmN0aW9uIFBvb2xBQ29udHJhY3QoYWRkcmVzcyBfbGVkZ2VyQ29udHJhY3RBZGRyLCBhZGRyZXNzIF9ibG9ja1ZDb250cmFjdEFkZHIsIHVpbnQgX2NodW5rU2l6ZSkgewogICAgICAgIGxlZGdlckNvbnRyYWN0QWRkciA9IF9sZWRnZXJDb250cmFjdEFkZHI7CiAgICAgICAgYmxvY2tWQ29udHJhY3RBZGRyID0gX2Jsb2NrVkNvbnRyYWN0QWRkcjsKCiAgICAgICAgY2h1bmtTaXplID0gX2NodW5rU2l6ZTsKCiAgICAgICAgYmxvY2tWQ29udHJhY3QgPSBCbG9ja3ZUb2tlbihfYmxvY2tWQ29udHJhY3RBZGRyKTsKICAgICAgICBsZWRnZXJDb250cmFjdCA9IEJsb2NrdlB1YmxpY0xlZGdlcihfbGVkZ2VyQ29udHJhY3RBZGRyKTsKCiAgICAgICAgbGVkZ2VyQ29udHJhY3RTaXplID0gbGVkZ2VyQ29udHJhY3QuZGlzdHJpYnV0aW9uRW50cnlDb3VudCgpOwoKICAgICAgICAvLyBpbml0IGRpc2NvdW50cwogICAgICAgIC8vIHBlcmNlbnQgKiBkaXNjb3VudE11bHRpcGxpZXIKICAgICAgICBkaXNjb3VudHNbMV0gPSA3OTAyMzA5MjEyNTIzNzQxODYyMjY5MjY0OTsKICAgICAgICBkaXNjb3VudHNbMl0gPSA4MCAqIGRpc2NvdW50TXVsdGlwbGllcjsKICAgICAgICBkaXNjb3VudHNbM10gPSA5MCAqIGRpc2NvdW50TXVsdGlwbGllcjsKICAgICAgICBkaXNjb3VudHNbMTAwXSA9IDEwMCAqIGRpc2NvdW50TXVsdGlwbGllcjsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXN0cmlidXRpb24oKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKCFkb25lKTsKCiAgICAgICAgdWludDI1NiBpID0gY3VycmVudEluZGV4OwogICAgICAgIGZvciAoOyBpIDwgY3VycmVudEluZGV4ICsgY2h1bmtTaXplICYmIGkgPCBsZWRnZXJDb250cmFjdFNpemU7IGkrKykgewogICAgICAgICAgICB2YXIgKCwgdG8sIGFtb3VudCwgZGlzY291bnQsKSA9IGxlZGdlckNvbnRyYWN0LmRpc3RyaWJ1dGlvbkxpc3QoaSk7CiAgICAgICAgICAgIHVpbnQyNTYgdG9rZW5BbW91bnQgPSBnZXRUb2tlbkFtb3VudChhbW91bnQsIGRpc2NvdW50KTsKICAgICAgICAgICAgYXNzZXJ0KGJsb2NrVkNvbnRyYWN0LnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCB0bywgdG9rZW5BbW91bnQpKTsKICAgICAgICB9CiAgICAgICAgY3VycmVudEluZGV4ID0gaTsgICAKCiAgICAgICAgaWYgKGN1cnJlbnRJbmRleCA9PSBsZWRnZXJDb250cmFjdFNpemUpIHsKICAgICAgICAgIGRvbmUgPSB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDaHVua1NpemUodWludCBfY2h1bmtTaXplKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBjaHVua1NpemUgPSBfY2h1bmtTaXplOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRva2VuQW1vdW50KHVpbnQyNTYgYW1vdW50LCB1aW50OCBkaXNjb3VudEdyb3VwKSBwcml2YXRlIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgZGlzY291bnQgPSBnZXRUb2tlbkRpc2NvdW50KGRpc2NvdW50R3JvdXApOwogICAgICAgIHJldHVybiAoYW1vdW50ICogMTAgKiogZGVjaW1hbHMgKiBkaXNjb3VudE11bHRpcGxpZXIpIC8gKChvbmVUb2tlbkluV2VpICogZGlzY291bnQpIC8gMTAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb2tlbkRpc2NvdW50KHVpbnQ4IGRpc2NvdW50KSBwcml2YXRlIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQgciA9IGRpc2NvdW50c1tkaXNjb3VudF07CiAgICAgICAgaWYgKHIgIT0gMCkgewogICAgICAgICAgICByZXR1cm4gcjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIGRlZmF1bHREaXNjb3VudCAqIGRpc2NvdW50TXVsdGlwbGllcjsKICAgIH0KfQoKY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAvKioKICAgKiBAZGV2IEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrLgogICAqLwogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IG51bXdvcmRzKSB7CiAgICAgIGFzc2VydChtc2cuZGF0YS5sZW5ndGggPT0gbnVtd29yZHMgKiAzMiArIDQpOwogICAgICBfOwogIH0KCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMikgcmV0dXJucyAoYm9vbCkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMpIHJldHVybnMgKGJvb2wpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyKSByZXR1cm5zIChib29sKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKY29udHJhY3QgQmxvY2t2VG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgUGF1c2FibGUgewoKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiQkxPQ0t2IFRva2VuIjsgLy8gU2V0IHRoZSB0b2tlbiBuYW1lIGZvciBkaXNwbGF5CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiVkVFIjsgICAgICAgIC8vIFNldCB0aGUgdG9rZW4gc3ltYm9sIGZvciBkaXNwbGF5CiAgdWludDggIHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OyAgICAgICAgIC8vIFNldCB0aGUgbnVtYmVyIG9mIGRlY2ltYWxzIGZvciBkaXNwbGF5CgogIFBvb2xCTG9jayBwdWJsaWMgcG9vbEJMb2NrOwogIFBvb2xDTG9jayBwdWJsaWMgcG9vbENMb2NrOwogIFBvb2xETG9jayBwdWJsaWMgcG9vbERMb2NrOwoKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b3RhbEFtb3VudE9mVG9rZW5zID0gMzY0NjI3MTI0MTIwMDI1NTIwNTAyMzQwNzEwODsKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBhbW91bnRPZlRva2Vuc1Bvb2xBID0gMTI3NjE5NDkzNDQyMDA4OTMyMTc1ODE5MjQ4ODsKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBhbW91bnRPZlRva2Vuc1Bvb2xCID0gOTExNTY3ODEwMzAwMDYzODAxMjU1ODUxNzc3OwogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGFtb3VudE9mVG9rZW5zUG9vbEMgPSA5MTE1Njc4MTAzMDAwNjM4MDEyNTU4NTE3Nzc7CiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgYW1vdW50T2ZUb2tlbnNQb29sRCA9IDU0Njk0MDY4NjE4MDAzODI4MDc1MzUxMTA2NjsKCiAgLy8gbWlncmF0aW9uCiAgYWRkcmVzcyBwdWJsaWMgbWlncmF0aW9uTWFzdGVyOwogIGFkZHJlc3MgcHVibGljIG1pZ3JhdGlvbkFnZW50OwogIHVpbnQyNTYgcHVibGljIHRvdGFsTWlncmF0ZWQ7CiAgZXZlbnQgTWlncmF0ZShhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKCiAgLyoqCiAgICogQGRldiBCbG9ja3ZUb2tlbiBDb25zdHJ1Y3RvcgogICAqIFJ1bnMgb25seSBvbiBpbml0aWFsIGNvbnRyYWN0IGNyZWF0aW9uLgogICAqLwogIGZ1bmN0aW9uIEJsb2NrdlRva2VuKGFkZHJlc3MgX21pZ3JhdGlvbk1hc3RlcikgUGF1c2FibGUoX21pZ3JhdGlvbk1hc3RlcikgewogICAgcmVxdWlyZShfbWlncmF0aW9uTWFzdGVyICE9IDApOwogICAgbWlncmF0aW9uTWFzdGVyID0gX21pZ3JhdGlvbk1hc3RlcjsKCiAgICB0b3RhbFN1cHBseSA9IHRvdGFsQW1vdW50T2ZUb2tlbnM7IC8vIFNldCB0aGUgdG90YWwgc3VwcGx5CgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBhbW91bnRPZlRva2Vuc1Bvb2xBOwogICAgVHJhbnNmZXIoMHgwLCBtc2cuc2VuZGVyLCBhbW91bnRPZlRva2Vuc1Bvb2xBKTsKICAKICAgIC8vIHRpbWUtbG9ja2VkIHRva2VucwogICAgcG9vbEJMb2NrID0gbmV3IFBvb2xCTG9jayh0aGlzKTsKICAgIHBvb2xDTG9jayA9IG5ldyBQb29sQ0xvY2sodGhpcyk7CiAgICBwb29sRExvY2sgPSBuZXcgUG9vbERMb2NrKHRoaXMpOwoKICAgIGJhbGFuY2VzW3Bvb2xCTG9ja10gPSBhbW91bnRPZlRva2Vuc1Bvb2xCOwogICAgYmFsYW5jZXNbcG9vbENMb2NrXSA9IGFtb3VudE9mVG9rZW5zUG9vbEM7CiAgICBiYWxhbmNlc1twb29sRExvY2tdID0gYW1vdW50T2ZUb2tlbnNQb29sRDsKCiAgICBUcmFuc2ZlcigweDAsIHBvb2xCTG9jaywgYW1vdW50T2ZUb2tlbnNQb29sQik7CiAgICBUcmFuc2ZlcigweDAsIHBvb2xDTG9jaywgYW1vdW50T2ZUb2tlbnNQb29sQyk7CiAgICBUcmFuc2ZlcigweDAsIHBvb2xETG9jaywgYW1vdW50T2ZUb2tlbnNQb29sRCk7CiAgfQoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzIHdoZW4gbm90IHBhdXNlZAogICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3ModGhpcykpOwogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlciB3aGVuIG5vdCBwYXVzZWQKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX2Zyb20gIT0gX3RvKTsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3ModGhpcykpOwogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlciB3aGVuIG5vdCBwYXVzZWQuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF9zcGVuZGVyICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfc3BlbmRlciAhPSBhZGRyZXNzKHRoaXMpKTsKICAgIHJldHVybiBzdXBlci5hcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgKiBUb2tlbiBtaWdyYXRpb24gc3VwcG9ydDoKICAqLwoKICAvKiogCiAgKiBAbm90aWNlIE1pZ3JhdGUgdG9rZW5zIHRvIHRoZSBuZXcgdG9rZW4gY29udHJhY3QuCiAgKiBAZGV2IFJlcXVpcmVkIHN0YXRlOiBPcGVyYXRpb25hbCBNaWdyYXRpb24KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSBtaWdyYXRlZAogICovCiAgZnVuY3Rpb24gbWlncmF0ZSh1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWwgewogICAgcmVxdWlyZShtaWdyYXRpb25BZ2VudCAhPSAwKTsKICAgIHJlcXVpcmUoX3ZhbHVlICE9IDApOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgdG90YWxNaWdyYXRlZCA9IHRvdGFsTWlncmF0ZWQuYWRkKF92YWx1ZSk7CiAgICBNaWdyYXRpb25BZ2VudChtaWdyYXRpb25BZ2VudCkubWlncmF0ZUZyb20obXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgIAogICAgTWlncmF0ZShtc2cuc2VuZGVyLCBtaWdyYXRpb25BZ2VudCwgX3ZhbHVlKTsKICB9CgogIC8qKgogICogQGRldiBTZXQgYWRkcmVzcyBvZiBtaWdyYXRpb24gdGFyZ2V0IGNvbnRyYWN0IGFuZCBlbmFibGUgbWlncmF0aW9uIHByb2Nlc3MuCiAgKiBAcGFyYW0gX2FnZW50IFRoZSBhZGRyZXNzIG9mIHRoZSBNaWdyYXRpb25BZ2VudCBjb250cmFjdAogICovCiAgZnVuY3Rpb24gc2V0TWlncmF0aW9uQWdlbnQoYWRkcmVzcyBfYWdlbnQpIGV4dGVybmFsIHsKICAgIHJlcXVpcmUoX2FnZW50ICE9IDApOwogICAgcmVxdWlyZShtaWdyYXRpb25BZ2VudCA9PSAwKTsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBtaWdyYXRpb25NYXN0ZXIpOwoKICAgIG1pZ3JhdGlvbkFnZW50ID0gX2FnZW50OwogIH0KCiAgZnVuY3Rpb24gc2V0TWlncmF0aW9uTWFzdGVyKGFkZHJlc3MgX21hc3RlcikgZXh0ZXJuYWwgewogICAgcmVxdWlyZShfbWFzdGVyICE9IDApOwogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG1pZ3JhdGlvbk1hc3Rlcik7CgogICAgbWlncmF0aW9uTWFzdGVyID0gX21hc3RlcjsKICB9Cn0='.
	

]
