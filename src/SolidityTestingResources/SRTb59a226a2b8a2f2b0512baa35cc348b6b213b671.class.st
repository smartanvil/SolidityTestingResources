Class {
	#name : #SRTb59a226a2b8a2f2b0512baa35cc348b6b213b671,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb59a226a2b8a2f2b0512baa35cc348b6b213b671 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovLy8gQHRpdGxlIHByb3ZpZGVzIHN1YmplY3QgdG8gcm9sZSBjaGVja2luZyBsb2dpYwpjb250cmFjdCBJQWNjZXNzUG9saWN5IHsKCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIFB1YmxpYyBmdW5jdGlvbnMKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIC8vLyBAbm90aWNlIFdlIGRvbid0IG1ha2UgdGhpcyBmdW5jdGlvbiBjb25zdGFudCB0byBhbGxvdyBmb3Igc3RhdGUtdXBkYXRpbmcgYWNjZXNzIGNvbnRyb2xzIHN1Y2ggYXMgcmF0ZSBsaW1pdGluZy4KICAgIC8vLyBAZGV2IGNoZWNrcyBpZiBzdWJqZWN0IGJlbG9uZ3MgdG8gcmVxdWVzdGVkIHJvbGUgZm9yIHBhcnRpY3VsYXIgb2JqZWN0CiAgICAvLy8gQHBhcmFtIHN1YmplY3QgYWRkcmVzcyB0byBiZSBjaGVja2VkIGFnYWluc3Qgcm9sZSwgdHlwaWNhbGx5IG1zZy5zZW5kZXIKICAgIC8vLyBAcGFyYW0gcm9sZSBpZGVudGlmaWVyIG9mIHJlcXVpcmVkIHJvbGUKICAgIC8vLyBAcGFyYW0gb2JqZWN0IGNvbnRyYWN0IGluc3RhbmNlIGNvbnRleHQgZm9yIHJvbGUgY2hlY2tpbmcsIHR5cGljYWxseSBjb250cmFjdCByZXF1ZXN0aW5nIHRoZSBjaGVjawogICAgLy8vIEBwYXJhbSB2ZXJiIGFkZGl0aW9uYWwgZGF0YSwgaW4gY3VycmVudCBBY2Nlc3NDb250cm9sbCBpbXBsZW1lbnRhdGlvbiBtc2cuc2lnCiAgICAvLy8gQHJldHVybiBpZiBzdWJqZWN0IGJlbG9uZ3MgdG8gYSByb2xlCiAgICBmdW5jdGlvbiBhbGxvd2VkKAogICAgICAgIGFkZHJlc3Mgc3ViamVjdCwKICAgICAgICBieXRlczMyIHJvbGUsCiAgICAgICAgYWRkcmVzcyBvYmplY3QsCiAgICAgICAgYnl0ZXM0IHZlcmIKICAgICkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKTsKfQoKLy8vIEB0aXRsZSBlbmFibGVzIGFjY2VzcyBjb250cm9sIGluIGltcGxlbWVudGluZyBjb250cmFjdAovLy8gQGRldiBzZWUgQWNjZXNzQ29udHJvbGxlZCBmb3IgaW1wbGVtZW50YXRpb24KY29udHJhY3QgSUFjY2Vzc0NvbnRyb2xsZWQgewoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gRXZlbnRzCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLy8gQGRldiBtdXN0IGxvZyBvbiBhY2Nlc3MgcG9saWN5IGNoYW5nZQogICAgZXZlbnQgTG9nQWNjZXNzUG9saWN5Q2hhbmdlZCgKICAgICAgICBhZGRyZXNzIGNvbnRyb2xsZXIsCiAgICAgICAgSUFjY2Vzc1BvbGljeSBvbGRQb2xpY3ksCiAgICAgICAgSUFjY2Vzc1BvbGljeSBuZXdQb2xpY3kKICAgICk7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBQdWJsaWMgZnVuY3Rpb25zCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLy8gQGRldiBhbGxvd3MgdG8gY2hhbmdlIGFjY2VzcyBjb250cm9sIG1lY2hhbmlzbSBmb3IgdGhpcyBjb250cmFjdAogICAgLy8vICAgICB0aGlzIG1ldGhvZCBtdXN0IGJlIGl0c2VsZiBhY2Nlc3MgY29udHJvbGxlZCwgc2VlIEFjY2Vzc0NvbnRyb2xsZWQgaW1wbGVtZW50YXRpb24gYW5kIG5vdGljZSBiZWxvdwogICAgLy8vIEBub3RpY2UgaXQgaXMgYSBodWdlIGlzc3VlIGZvciBTb2xpZGl0eSB0aGF0IG1vZGlmaWVycyBhcmUgbm90IHBhcnQgb2YgZnVuY3Rpb24gc2lnbmF0dXJlCiAgICAvLy8gICAgIHRoZW4gaW50ZXJmYWNlcyBjb3VsZCBiZSB1c2VkIGZvciBleGFtcGxlIHRvIGNvbnRyb2wgYWNjZXNzIHNlbWFudGljcwogICAgLy8vIEBwYXJhbSBuZXdQb2xpY3kgbmV3IGFjY2VzcyBwb2xpY3kgdG8gY29udHJvbGwgdGhpcyBjb250cmFjdAogICAgLy8vIEBwYXJhbSBuZXdBY2Nlc3NDb250cm9sbGVyIGFkZHJlc3Mgb2YgUk9MRV9BQ0NFU1NfQ09OVFJPTExFUiBvZiBuZXcgcG9saWN5IHRoYXQgY2FuIHNldCBhY2Nlc3MgdG8gdGhpcyBjb250cmFjdAogICAgZnVuY3Rpb24gc2V0QWNjZXNzUG9saWN5KElBY2Nlc3NQb2xpY3kgbmV3UG9saWN5LCBhZGRyZXNzIG5ld0FjY2Vzc0NvbnRyb2xsZXIpCiAgICAgICAgcHVibGljOwoKICAgIGZ1bmN0aW9uIGFjY2Vzc1BvbGljeSgpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zIChJQWNjZXNzUG9saWN5KTsKCn0KCmNvbnRyYWN0IFN0YW5kYXJkUm9sZXMgewoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gQ29uc3RhbnRzCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLyBAbm90aWNlIFNvbGRpdHkgc29tZWhvdyBkb2Vzbid0IGV2YWx1YXRlIHRoaXMgY29tcGlsZSB0aW1lCiAgICAvLyBAZGV2IHJvbGUgd2hpY2ggaGFzIHJpZ2h0cyB0byBjaGFuZ2UgcGVybWlzc2lvbnMgYW5kIHNldCBuZXcgcG9saWN5IGluIGNvbnRyYWN0LCBrZWNjYWsyNTYoIkFjY2Vzc0NvbnRyb2xsZXIiKQogICAgYnl0ZXMzMiBpbnRlcm5hbCBjb25zdGFudCBST0xFX0FDQ0VTU19DT05UUk9MTEVSID0gMHhhYzQyZjhiZWIxNzk3NWVkMDYyZGNiODBjNjNlNmQyMDNlZjFjMmMzMzVjZWQxNDlkYzU2NjRjYzY3MWNiN2RhOwp9CgovLy8gQHRpdGxlIEdyYW51bGFyIGNvZGUgZXhlY3V0aW9uIHBlcm1pc3Npb25zCi8vLyBAbm90aWNlIEludGVuZGVkIHRvIHJlcGxhY2UgZXhpc3RpbmcgT3duYWJsZSBwYXR0ZXJuIHdpdGggbW9yZSBncmFudWxhciBwZXJtaXNzaW9ucyBzZXQgdG8gZXhlY3V0ZSBzbWFydCBjb250cmFjdCBmdW5jdGlvbnMKLy8vICAgICBmb3IgZWFjaCBmdW5jdGlvbiB3aGVyZSAnb25seScgbW9kaWZpZXIgaXMgYXBwbGllZCwgSUFjY2Vzc1BvbGljeSBpbXBsZW1lbnRhdGlvbiBpcyBjYWxsZWQgdG8gZXZhbHVhdGUgaWYgbXNnLnNlbmRlciBiZWxvbmdzIHRvIHJlcXVpcmVkIHJvbGUgZm9yIGNvbnRyYWN0IGJlaW5nIGNhbGxlZC4KLy8vICAgICBBY2Nlc3MgZXZhbHVhdGlvbiBzcGVjaWZpYyBiZWxvbmcgdG8gSUFjY2Vzc1BvbGljeSBpbXBsZW1lbnRhdGlvbiwgc2VlIFJvbGVCYXNlZEFjY2Vzc1BvbGljeSBmb3IgZGV0YWlscy4KLy8vIEBkZXYgU2hvdWxkIGJlIGluaGVyaXRlZCBieSBhIGNvbnRyYWN0IHJlcXVpcmluZyBzdWNoIHBlcm1pc3Npb25zIGNvbnRyb2xsLiBJQWNjZXNzUG9saWN5IG11c3QgYmUgcHJvdmlkZWQgaW4gY29uc3RydWN0b3IuIEFjY2VzcyBwb2xpY3kgbWF5IGJlIHJlcGxhY2VkIHRvIGEgZGlmZmVyZW50IG9uZQovLy8gICAgIGJ5IG1zZy5zZW5kZXIgd2l0aCBST0xFX0FDQ0VTU19DT05UUk9MTEVSIHJvbGUKY29udHJhY3QgQWNjZXNzQ29udHJvbGxlZCBpcyBJQWNjZXNzQ29udHJvbGxlZCwgU3RhbmRhcmRSb2xlcyB7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBNdXRhYmxlIHN0YXRlCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBJQWNjZXNzUG9saWN5IHByaXZhdGUgX2FjY2Vzc1BvbGljeTsKCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIE1vZGlmaWVycwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgLy8vIEBkZXYgbGltaXRzIGZ1bmN0aW9uIGV4ZWN1dGlvbiBvbmx5IHRvIHNlbmRlcnMgYXNzaWduZWQgdG8gcmVxdWlyZWQgJ3JvbGUnCiAgICBtb2RpZmllciBvbmx5KGJ5dGVzMzIgcm9sZSkgewogICAgICAgIHJlcXVpcmUoX2FjY2Vzc1BvbGljeS5hbGxvd2VkKG1zZy5zZW5kZXIsIHJvbGUsIHRoaXMsIG1zZy5zaWcpKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gQ29uc3RydWN0b3IKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIGZ1bmN0aW9uIEFjY2Vzc0NvbnRyb2xsZWQoSUFjY2Vzc1BvbGljeSBwb2xpY3kpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKGFkZHJlc3MocG9saWN5KSAhPSAweDApOwogICAgICAgIF9hY2Nlc3NQb2xpY3kgPSBwb2xpY3k7CiAgICB9CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBQdWJsaWMgZnVuY3Rpb25zCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLwogICAgLy8gSW1wbGVtZW50cyBJQWNjZXNzQ29udHJvbGxlZAogICAgLy8KCiAgICBmdW5jdGlvbiBzZXRBY2Nlc3NQb2xpY3koSUFjY2Vzc1BvbGljeSBuZXdQb2xpY3ksIGFkZHJlc3MgbmV3QWNjZXNzQ29udHJvbGxlcikKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5KFJPTEVfQUNDRVNTX0NPTlRST0xMRVIpCiAgICB7CiAgICAgICAgLy8gUk9MRV9BQ0NFU1NfQ09OVFJPTExFUiBtdXN0IGJlIHByZXNlbnQKICAgICAgICAvLyB1bmRlciB0aGUgbmV3IHBvbGljeS4gVGhpcyBwcm92aWRlcyBzb21lCiAgICAgICAgLy8gcHJvdGVjdGlvbiBhZ2FpbnN0IGxvY2tpbmcgeW91cnNlbGYgb3V0LgogICAgICAgIHJlcXVpcmUobmV3UG9saWN5LmFsbG93ZWQobmV3QWNjZXNzQ29udHJvbGxlciwgUk9MRV9BQ0NFU1NfQ09OVFJPTExFUiwgdGhpcywgbXNnLnNpZykpOwoKICAgICAgICAvLyBXZSBjYW4gbm93IHNhZmVseSBzZXQgdGhlIG5ldyBwb2xpY3kgd2l0aG91dCBmb290IHNob290aW5nLgogICAgICAgIElBY2Nlc3NQb2xpY3kgb2xkUG9saWN5ID0gX2FjY2Vzc1BvbGljeTsKICAgICAgICBfYWNjZXNzUG9saWN5ID0gbmV3UG9saWN5OwoKICAgICAgICAvLyBMb2cgZXZlbnQKICAgICAgICBMb2dBY2Nlc3NQb2xpY3lDaGFuZ2VkKG1zZy5zZW5kZXIsIG9sZFBvbGljeSwgbmV3UG9saWN5KTsKICAgIH0KCiAgICBmdW5jdGlvbiBhY2Nlc3NQb2xpY3koKQogICAgICAgIHB1YmxpYwogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAoSUFjY2Vzc1BvbGljeSkKICAgIHsKICAgICAgICByZXR1cm4gX2FjY2Vzc1BvbGljeTsKICAgIH0KfQoKY29udHJhY3QgSXNDb250cmFjdCB7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBJbnRlcm5hbCBmdW5jdGlvbnMKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBhZGRyKQogICAgICAgIGludGVybmFsCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHVpbnQyNTYgc2l6ZTsKICAgICAgICAvLyB0YWtlcyA3MDAgZ2FzCiAgICAgICAgYXNzZW1ibHkgeyBzaXplIDo9IGV4dGNvZGVzaXplKGFkZHIpIH0KICAgICAgICByZXR1cm4gc2l6ZSA+IDA7CiAgICB9Cn0KCmNvbnRyYWN0IEFjY2Vzc1JvbGVzIHsKCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIENvbnN0YW50cwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgLy8gTk9URTogQWxsIHJvbGVzIGFyZSBzZXQgdG8gdGhlIGtlY2NhazI1NiBoYXNoIG9mIHRoZQogICAgLy8gQ2FtZWxDYXNlZCByb2xlIG5hbWUsIGkuZS4KICAgIC8vIFJPTEVfTE9DS0VEX0FDQ09VTlRfQURNSU4gPSBrZWNjYWsyNTYoIkxvY2tlZEFjY291bnRBZG1pbiIpCgogICAgLy8gbWF5IHNldHVwIExvY2tlZEFjY291bnQsIGNoYW5nZSBkaXNidXJzYWwgbWVjaGFuaXNtIGFuZCBzZXQgbWlncmF0aW9uCiAgICBieXRlczMyIGludGVybmFsIGNvbnN0YW50IFJPTEVfTE9DS0VEX0FDQ09VTlRfQURNSU4gPSAweDQ2NzVkYTU0NmQyZDkyYzViODZjNGY3MjZhOWU2MTAxMGRjZTkxY2NjYzI0OTFjZTYwMTllNzhiMDlkMjU3MmU7CgogICAgLy8gbWF5IHNldHVwIHdoaXRlbGlzdHMgYW5kIGFib3J0IHdoaXRlbGlzdGluZyBjb250cmFjdCB3aXRoIGN1cnZlIHJvbGxiYWNrCiAgICBieXRlczMyIGludGVybmFsIGNvbnN0YW50IFJPTEVfV0hJVEVMSVNUX0FETUlOID0gMHhhZWY0NTZlN2M4NjQ0MThlMWQyYTQwZDk5NmNhNGZlYmYzYTdlMzE3ZmUzYWY1YTdlYTRkZGE1OTAzM2JiZTVjOwoKICAgIC8vIE1heSBpc3N1ZSAoZ2VuZXJhdGUpIE5ldW1hcmtzCiAgICBieXRlczMyIGludGVybmFsIGNvbnN0YW50IFJPTEVfTkVVTUFSS19JU1NVRVIgPSAweDkyMWMzYWZhMWYxZmZmNzA3YTc4NWY5NTNhMWUxOTdiZDI4YzljNTBlMzAwNDI0ZTAxNTk1M2NiZjEyMGMwNmM7CgogICAgLy8gTWF5IGJ1cm4gTmV1bWFya3MgaXQgb3ducwogICAgYnl0ZXMzMiBpbnRlcm5hbCBjb25zdGFudCBST0xFX05FVU1BUktfQlVSTkVSID0gMHgxOWNlMzMxMjg1ZjQxNzM5Y2QzMzYyYTNlYzE3NmVkZmZlMDE0MzExYzBmODA3NTgzNGZkZDE5ZDY3MThlNjlmOwoKICAgIC8vIE1heSBjcmVhdGUgbmV3IHNuYXBzaG90cyBvbiBOZXVtYXJrCiAgICBieXRlczMyIGludGVybmFsIGNvbnN0YW50IFJPTEVfU05BUFNIT1RfQ1JFQVRPUiA9IDB4MDhjMTc4NWFmYzU3ZjkzMzUyM2JjNTI1ODNhNzJjZTllMTliMjI0MTM1NGUwNGRkODZmNDFmODg3ZTNkODE3NDsKCiAgICAvLyBNYXkgZW5hYmxlL2Rpc2FibGUgdHJhbnNmZXJzIG9uIE5ldW1hcmsKICAgIGJ5dGVzMzIgaW50ZXJuYWwgY29uc3RhbnQgUk9MRV9UUkFOU0ZFUl9BRE1JTiA9IDB4YjY1MjdlOTQ0Y2FjYTNkMTUxYjFmOTRlNDlhYzVlMjIzMTQyNjk0ODYwNzQzZTY2MTY0NzIwZTAzNGVjOWIxOTsKCiAgICAvLyBtYXkgcmVjbGFpbSB0b2tlbnMvZXRoZXIgZnJvbSBjb250cmFjdHMgc3VwcG9ydGluZyBJUmVjbGFpbWFibGUgaW50ZXJmYWNlCiAgICBieXRlczMyIGludGVybmFsIGNvbnN0YW50IFJPTEVfUkVDTEFJTUVSID0gMHgwNTQyYmJkMGM2NzI1Nzg5NjZkY2M1MjViMzBhYTE2NzIzYmIwNDI2NzU1NTRhYzViMDM2MmY4NmI2ZTk3ZGM1OwoKICAgIC8vIHJlcHJlc2VudHMgbGVnYWxseSBwbGF0Zm9ybSBvcGVyYXRvciBpbiBjYXNlIG9mIGZvcmtzIGFuZCBjb250cmFjdHMgd2l0aCBsZWdhbCBhZ3JlZW1lbnQgYXR0YWNoZWQuIGtlY2NhazI1NigiUGxhdGZvcm1PcGVyYXRvclJlcHJlc2VudGF0aXZlIikKICAgIGJ5dGVzMzIgaW50ZXJuYWwgY29uc3RhbnQgUk9MRV9QTEFURk9STV9PUEVSQVRPUl9SRVBSRVNFTlRBVElWRSA9IDB4YjJiMzIxMzc3NjUzZjY1NTIwNmY3MTUxNGZmOWYxNTBkMDgyMmQwNjJhNWFiY2YyMjBkNTQ5ZTFkYTc5OTlmMDsKCiAgICAvLyBhbGxvd3MgdG8gZGVwb3NpdCBFVVItVCBhbmQgYWxsb3cgYWRkcmVzc2VzIHRvIHNlbmQgYW5kIHJlY2VpdmUgRVVSLVQuIGtlY2NhazI1NigiRXVydERlcG9zaXRNYW5hZ2VyIikKICAgIGJ5dGVzMzIgaW50ZXJuYWwgY29uc3RhbnQgUk9MRV9FVVJUX0RFUE9TSVRfTUFOQUdFUiA9IDB4N2M4ZWNkY2JhODBjZTg3ODQ4ZDE2YWQ3N2VmNTdjYzE5NmMyMDhmYzk1YzU2MzhlNGE0OGM2ODFhMzRkNGZlNzsKfQoKY29udHJhY3QgSUJhc2ljVG9rZW4gewoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gRXZlbnRzCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBldmVudCBUcmFuc2ZlcigKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgZnJvbSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgdG8sCiAgICAgICAgdWludDI1NiBhbW91bnQpOwoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gUHVibGljIGZ1bmN0aW9ucwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgLy8vIEBkZXYgVGhpcyBmdW5jdGlvbiBtYWtlcyBpdCBlYXN5IHRvIGdldCB0aGUgdG90YWwgbnVtYmVyIG9mIHRva2VucwogICAgLy8vIEByZXR1cm4gVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQyNTYpOwoKICAgIC8vLyBAcGFyYW0gb3duZXIgVGhlIGFkZHJlc3MgdGhhdCdzIGJhbGFuY2UgaXMgYmVpbmcgcmVxdWVzdGVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZSBvZiBgb3duZXJgIGF0IHRoZSBjdXJyZW50IGJsb2NrCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBvd25lcikKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgogICAgLy8vIEBub3RpY2UgU2VuZCBgYW1vdW50YCB0b2tlbnMgdG8gYHRvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSB0byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIGFtb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IGFtb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKfQoKLy8vIEB0aXRsZSBhbGxvd3MgZGVyaXZpbmcgY29udHJhY3QgdG8gcmVjb3ZlciBhbnkgdG9rZW4gb3IgZXRoZXIgdGhhdCBpdCBoYXMgYmFsYW5jZSBvZgovLy8gQG5vdGljZSBub3RlIHRoYXQgdGhpcyBvcGVucyB5b3VyIGNvbnRyYWN0cyB0byBjbGFpbXMgZnJvbSB2YXJpb3VzIHBlb3BsZSBzYXlpbmcgdGhleSBsb3N0IHRva2VucyBhbmQgdGhleSB3YW50IHRoZW0gYmFjawovLy8gICAgIGJlIHJlYWR5IHRvIGhhbmRsZSBzdWNoIGNsYWltcwovLy8gQGRldiB1c2Ugd2l0aCBjYXJlIQovLy8gICAgIDEuIFJPTEVfUkVDTEFJTUVSIGlzIGFsbG93ZWQgdG8gY2xhaW0gdG9rZW5zLCBpdCdzIG5vdCByZXR1cm5pbmcgdG9rZW5zIHRvIG9yaWdpbmFsIG93bmVyCi8vLyAgICAgMi4gaW4gZGVyaXZlZCBjb250cmFjdCB0aGF0IGhvbGRzIGFueSB0b2tlbiBieSBkZXNpZ24geW91IG11c3Qgb3ZlcnJpZGUgYHJlY2xhaW1gIGFuZCBibG9jayBzdWNoIHBvc3NpYmlsaXR5LgovLy8gICAgICAgICBzZWUgTG9ja2VkQWNjb3VudCBhcyBhbiBleGFtcGxlCmNvbnRyYWN0IFJlY2xhaW1hYmxlIGlzIEFjY2Vzc0NvbnRyb2xsZWQsIEFjY2Vzc1JvbGVzIHsKCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIENvbnN0YW50cwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgSUJhc2ljVG9rZW4gY29uc3RhbnQgaW50ZXJuYWwgUkVDTEFJTV9FVEhFUiA9IElCYXNpY1Rva2VuKDB4MCk7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBQdWJsaWMgZnVuY3Rpb25zCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBmdW5jdGlvbiByZWNsYWltKElCYXNpY1Rva2VuIHRva2VuKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHkoUk9MRV9SRUNMQUlNRVIpCiAgICB7CiAgICAgICAgYWRkcmVzcyByZWNsYWltZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGlmKHRva2VuID09IFJFQ0xBSU1fRVRIRVIpIHsKICAgICAgICAgICAgcmVjbGFpbWVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdWludDI1NiBiYWxhbmNlID0gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgICAgICAgICByZXF1aXJlKHRva2VuLnRyYW5zZmVyKHJlY2xhaW1lciwgYmFsYW5jZSkpOwogICAgICAgIH0KICAgIH0KfQoKY29udHJhY3QgSVRva2VuTWV0YWRhdGEgewoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gUHVibGljIGZ1bmN0aW9ucwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgZnVuY3Rpb24gc3ltYm9sKCkKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHN0cmluZyk7CgogICAgZnVuY3Rpb24gbmFtZSgpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zIChzdHJpbmcpOwoKICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQ4KTsKfQoKLy8vIEB0aXRsZSBhZGRzIHRva2VuIG1ldGFkYXRhIHRvIHRva2VuIGNvbnRyYWN0Ci8vLyBAZGV2IHNlZSBOZXVtYXJrIGZvciBleGFtcGxlIGltcGxlbWVudGF0aW9uCmNvbnRyYWN0IFRva2VuTWV0YWRhdGEgaXMgSVRva2VuTWV0YWRhdGEgewoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gSW1tdXRhYmxlIHN0YXRlCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLyBUaGUgVG9rZW4ncyBuYW1lOiBlLmcuIERpZ2l4REFPIFRva2VucwogICAgc3RyaW5nIHByaXZhdGUgTkFNRTsKCiAgICAvLyBBbiBpZGVudGlmaWVyOiBlLmcuIFJFUAogICAgc3RyaW5nIHByaXZhdGUgU1lNQk9MOwoKICAgIC8vIE51bWJlciBvZiBkZWNpbWFscyBvZiB0aGUgc21hbGxlc3QgdW5pdAogICAgdWludDggcHJpdmF0ZSBERUNJTUFMUzsKCiAgICAvLyBBbiBhcmJpdHJhcnkgdmVyc2lvbmluZyBzY2hlbWUKICAgIHN0cmluZyBwcml2YXRlIFZFUlNJT047CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgLy8vIEBub3RpY2UgQ29uc3RydWN0b3IgdG8gc2V0IG1ldGFkYXRhCiAgICAvLy8gQHBhcmFtIHRva2VuTmFtZSBOYW1lIG9mIHRoZSBuZXcgdG9rZW4KICAgIC8vLyBAcGFyYW0gZGVjaW1hbFVuaXRzIE51bWJlciBvZiBkZWNpbWFscyBvZiB0aGUgbmV3IHRva2VuCiAgICAvLy8gQHBhcmFtIHRva2VuU3ltYm9sIFRva2VuIFN5bWJvbCBmb3IgdGhlIG5ldyB0b2tlbgogICAgLy8vIEBwYXJhbSB2ZXJzaW9uIFRva2VuIHZlcnNpb24gaWUuIHdoZW4gY2xvbmluZyBpcyB1c2VkCiAgICBmdW5jdGlvbiBUb2tlbk1ldGFkYXRhKAogICAgICAgIHN0cmluZyB0b2tlbk5hbWUsCiAgICAgICAgdWludDggZGVjaW1hbFVuaXRzLAogICAgICAgIHN0cmluZyB0b2tlblN5bWJvbCwKICAgICAgICBzdHJpbmcgdmVyc2lvbgogICAgKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIE5BTUUgPSB0b2tlbk5hbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBuYW1lCiAgICAgICAgU1lNQk9MID0gdG9rZW5TeW1ib2w7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbAogICAgICAgIERFQ0lNQUxTID0gZGVjaW1hbFVuaXRzOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBkZWNpbWFscwogICAgICAgIFZFUlNJT04gPSB2ZXJzaW9uOwogICAgfQoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gUHVibGljIGZ1bmN0aW9ucwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgZnVuY3Rpb24gbmFtZSgpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zIChzdHJpbmcpCiAgICB7CiAgICAgICAgcmV0dXJuIE5BTUU7CiAgICB9CgogICAgZnVuY3Rpb24gc3ltYm9sKCkKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHN0cmluZykKICAgIHsKICAgICAgICByZXR1cm4gU1lNQk9MOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQ4KQogICAgewogICAgICAgIHJldHVybiBERUNJTUFMUzsKICAgIH0KCiAgICBmdW5jdGlvbiB2ZXJzaW9uKCkKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHN0cmluZykKICAgIHsKICAgICAgICByZXR1cm4gVkVSU0lPTjsKICAgIH0KfQoKY29udHJhY3QgSUVSQzIyM0NhbGxiYWNrIHsKCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIFB1YmxpYyBmdW5jdGlvbnMKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIGZ1bmN0aW9uIG9uVG9rZW5UcmFuc2ZlcigKICAgICAgICBhZGRyZXNzIGZyb20sCiAgICAgICAgdWludDI1NiBhbW91bnQsCiAgICAgICAgYnl0ZXMgZGF0YQogICAgKQogICAgICAgIHB1YmxpYzsKCn0KCmNvbnRyYWN0IElFUkMyMjNUb2tlbiBpcyBJQmFzaWNUb2tlbiB7CgogICAgLy8vIEBkZXYgRGVwYXJ0dXJlOiBXZSBkbyBub3QgbG9nIGRhdGEsIGl0IGhhcyBubyBhZHZhbnRhZ2Ugb3ZlciBhIHN0YW5kYXJkCiAgICAvLy8gICAgIGxvZyBldmVudC4gQnkgc3RpY2tpbmcgdG8gdGhlIHN0YW5kYXJkIGxvZyBldmVudCB3ZQogICAgLy8vICAgICBzdGF5IGNvbXBhdGlibGUgd2l0aCBjb25zdHJhY3RzIHRoYXQgZXhwZWN0IGFuZCBFUkMyMCB0b2tlbi4KCiAgICAvLyBldmVudCBUcmFuc2ZlcigKICAgIC8vICAgIGFkZHJlc3MgaW5kZXhlZCBmcm9tLAogICAgLy8gICAgYWRkcmVzcyBpbmRleGVkIHRvLAogICAgLy8gICAgdWludDI1NiBhbW91bnQsCiAgICAvLyAgICBieXRlcyBkYXRhKTsKCgogICAgLy8vIEBkZXYgRGVwYXJ0dXJlOiBXZSBkbyBub3QgdXNlIHRoZSBjYWxsYmFjayBvbiByZWd1bGFyIHRyYW5zZmVyIGNhbGxzIHRvCiAgICAvLy8gICAgIHN0YXkgY29tcGF0aWJsZSB3aXRoIGNvbnN0cmFjdHMgdGhhdCBleHBlY3QgYW5kIEVSQzIwIHRva2VuLgoKICAgIC8vIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgYW1vdW50KQogICAgLy8gICAgIHB1YmxpYwogICAgLy8gICAgIHJldHVybnMgKGJvb2wpOwoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gUHVibGljIGZ1bmN0aW9ucwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiBhbW91bnQsIGJ5dGVzIGRhdGEpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IElFUkMyMEFsbG93YW5jZSB7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBFdmVudHMKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIGV2ZW50IEFwcHJvdmFsKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBvd25lciwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwKICAgICAgICB1aW50MjU2IGFtb3VudCk7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBQdWJsaWMgZnVuY3Rpb25zCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLy8gQGRldiBUaGlzIGZ1bmN0aW9uIG1ha2VzIGl0IGVhc3kgdG8gcmVhZCB0aGUgYGFsbG93ZWRbXWAgbWFwCiAgICAvLy8gQHBhcmFtIG93bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IHRoYXQgb3ducyB0aGUgdG9rZW4KICAgIC8vLyBAcGFyYW0gc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIG9mIG93bmVyIHRoYXQgc3BlbmRlciBpcyBhbGxvd2VkCiAgICAvLy8gIHRvIHNwZW5kCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKQogICAgICAgIHB1YmxpYwogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgc3BlbmRlcmAgdG8gc3BlbmQgYGFtb3VudGAgdG9rZW5zIG9uCiAgICAvLy8gIGl0cyBiZWhhbGYuIFRoaXMgaXMgYSBtb2RpZmllZCB2ZXJzaW9uIG9mIHRoZSBFUkMyMCBhcHByb3ZlIGZ1bmN0aW9uCiAgICAvLy8gIHRvIGJlIGEgbGl0dGxlIGJpdCBzYWZlcgogICAgLy8vIEBwYXJhbSBzcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBhbW91bnQgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBUcnVlIGlmIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2UgU2VuZCBgYW1vdW50YCB0b2tlbnMgdG8gYHRvYCBmcm9tIGBmcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0CiAgICAvLy8gIGlzIGFwcHJvdmVkIGJ5IGBmcm9tYAogICAgLy8vIEBwYXJhbSBmcm9tIFRoZSBhZGRyZXNzIGhvbGRpbmcgdGhlIHRva2VucyBiZWluZyB0cmFuc2ZlcnJlZAogICAgLy8vIEBwYXJhbSB0byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIGFtb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7Cgp9Cgpjb250cmFjdCBJRVJDMjBUb2tlbiBpcyBJQmFzaWNUb2tlbiwgSUVSQzIwQWxsb3dhbmNlIHsKCn0KCmNvbnRyYWN0IElFUkM2NzdDYWxsYmFjayB7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBQdWJsaWMgZnVuY3Rpb25zCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLyBOT1RFOiBUaGlzIGNhbGwgY2FuIGJlIGluaXRpYXRlZCBieSBhbnlvbmUuIFlvdSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0CiAgICAvLyBpdCBpcyBzZW5kIGJ5IHRoZSB0b2tlbiAoYHJlcXVpcmUobXNnLnNlbmRlciA9PSB0b2tlbilgKSBvciBtYWtlIHN1cmUKICAgIC8vIGFtb3VudCBpcyB2YWxpZCAoYHJlcXVpcmUodG9rZW4uYWxsb3dhbmNlKHRoaXMpID49IGFtb3VudClgKS4KICAgIGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbCgKICAgICAgICBhZGRyZXNzIGZyb20sCiAgICAgICAgdWludDI1NiBhbW91bnQsCiAgICAgICAgYWRkcmVzcyB0b2tlbiwgLy8gSUVSQzY2N1Rva2VuCiAgICAgICAgYnl0ZXMgZGF0YQogICAgKQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7Cgp9Cgpjb250cmFjdCBJRVJDNjc3QWxsb3dhbmNlIGlzIElFUkMyMEFsbG93YW5jZSB7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBQdWJsaWMgZnVuY3Rpb25zCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYHNwZW5kZXJgIHRvIHNlbmQgYGFtb3VudGAgdG9rZW5zIG9uCiAgICAvLy8gIGl0cyBiZWhhbGYsIGFuZCB0aGVuIGEgZnVuY3Rpb24gaXMgdHJpZ2dlcmVkIGluIHRoZSBjb250cmFjdCB0aGF0IGlzCiAgICAvLy8gIGJlaW5nIGFwcHJvdmVkLCBgc3BlbmRlcmAuIFRoaXMgYWxsb3dzIHVzZXJzIHRvIHVzZSB0aGVpciB0b2tlbnMgdG8KICAgIC8vLyAgaW50ZXJhY3Qgd2l0aCBjb250cmFjdHMgaW4gb25lIGZ1bmN0aW9uIGNhbGwgaW5zdGVhZCBvZiB0d28KICAgIC8vLyBAcGFyYW0gc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgY29udHJhY3QgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIGFtb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgdGhlIGZ1bmN0aW9uIGNhbGwgd2FzIHN1Y2Nlc3NmdWwKICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiBhbW91bnQsIGJ5dGVzIGV4dHJhRGF0YSkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKfQoKY29udHJhY3QgSUVSQzY3N1Rva2VuIGlzIElFUkMyMFRva2VuLCBJRVJDNjc3QWxsb3dhbmNlIHsKfQoKY29udHJhY3QgTWF0aCB7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBJbnRlcm5hbCBmdW5jdGlvbnMKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIC8vIGFic29sdXRlIGRpZmZlcmVuY2U6IHx2MSAtIHYyfAogICAgZnVuY3Rpb24gYWJzRGlmZih1aW50MjU2IHYxLCB1aW50MjU2IHYyKQogICAgICAgIGludGVybmFsCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcmV0dXJuIHYxID4gdjIgPyB2MSAtIHYyIDogdjIgLSB2MTsKICAgIH0KCiAgICAvLyBkaXZpZGUgdiBieSBkLCByb3VuZCB1cCBpZiByZW1haW5kZXIgaXMgMC41IG9yIG1vcmUKICAgIGZ1bmN0aW9uIGRpdlJvdW5kKHVpbnQyNTYgdiwgdWludDI1NiBkKQogICAgICAgIGludGVybmFsCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcmV0dXJuIGFkZCh2LCBkLzIpIC8gZDsKICAgIH0KCiAgICAvLyBjb21wdXRlcyBkZWNpbWFsIGRlY2ltYWxGcmFjdGlvbiAnZnJhYycgb2YgJ2Ftb3VudCcgd2l0aCBtYXhpbXVtIHByZWNpc2lvbiAobXVsdGlwbGljYXRpb24gZmlyc3QpCiAgICAvLyBib3RoIGFtb3VudCBhbmQgZGVjaW1hbEZyYWN0aW9uIG11c3QgaGF2ZSAxOCBkZWNpbWFscyBwcmVjaXNpb24sIGZyYWMgMTAqKjE4IHJlcHJlc2VudHMgYSB3aG9sZSAoMTAwJSBvZikgYW1vdW50CiAgICAvLyBtaW5kIGxvc3Mgb2YgcHJlY2lzaW9uIGFzIGRlY2ltYWwgZnJhY3Rpb25zIGRvIG5vdCBoYXZlIGZpbml0ZSBiaW5hcnkgZXhwYW5zaW9uCiAgICAvLyBkbyBub3QgdXNlIGluc3RlYWQgb2YgZGl2aXNpb24KICAgIGZ1bmN0aW9uIGRlY2ltYWxGcmFjdGlvbih1aW50MjU2IGFtb3VudCwgdWludDI1NiBmcmFjKQogICAgICAgIGludGVybmFsCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgLy8gaXQncyBsaWtlIDEgZXRoZXIgaXMgMTAwJSBwcm9wb3J0aW9uCiAgICAgICAgcmV0dXJuIHByb3BvcnRpb24oYW1vdW50LCBmcmFjLCAxMCoqMTgpOwogICAgfQoKICAgIC8vIGNvbXB1dGVzIHBhcnQvdG90YWwgb2YgYW1vdW50IHdpdGggbWF4aW11bSBwcmVjaXNpb24gKG11bHRpcGxpY2F0aW9uIGZpcnN0KQogICAgLy8gcGFydCBhbmQgdG90YWwgbXVzdCBoYXZlIHRoZSBzYW1lIHVuaXRzCiAgICBmdW5jdGlvbiBwcm9wb3J0aW9uKHVpbnQyNTYgYW1vdW50LCB1aW50MjU2IHBhcnQsIHVpbnQyNTYgdG90YWwpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICByZXR1cm4gZGl2Um91bmQobXVsKGFtb3VudCwgcGFydCksIHRvdGFsKTsKICAgIH0KCiAgICAvLwogICAgLy8gT3BlbiBaZXBwZWxpbiBNYXRoIGxpYnJhcnkgYmVsb3cKICAgIC8vCgogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKQogICAgICAgIGludGVybmFsCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50MjU2KQogICAgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKQogICAgICAgIGludGVybmFsCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50MjU2KQogICAgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gbWluKHVpbnQyNTYgYSwgdWludDI1NiBiKQogICAgICAgIGludGVybmFsCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50MjU2KQogICAgewogICAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogICAgfQoKICAgIGZ1bmN0aW9uIG1heCh1aW50MjU2IGEsIHVpbnQyNTYgYikKICAgICAgICBpbnRlcm5hbAogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICByZXR1cm4gYSA+IGIgPyBhIDogYjsKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLgogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBJQmFzaWNUb2tlbiwgTWF0aCB7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBNdXRhYmxlIHN0YXRlCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgaW50ZXJuYWwgX2JhbGFuY2VzOwoKICAgIHVpbnQyNTYgaW50ZXJuYWwgX3RvdGFsU3VwcGx5OwoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gUHVibGljIGZ1bmN0aW9ucwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIHRvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICAgKiBAcGFyYW0gYW1vdW50IFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiBhbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICB0cmFuc2ZlckludGVybmFsKG1zZy5zZW5kZXIsIHRvLCBhbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IFRoaXMgZnVuY3Rpb24gbWFrZXMgaXQgZWFzeSB0byBnZXQgdGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50MjU2KQogICAgewogICAgICAgIHJldHVybiBfdG90YWxTdXBwbHk7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgICAqIEBwYXJhbSBvd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgb3duZXIpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpCiAgICB7CiAgICAgICAgcmV0dXJuIF9iYWxhbmNlc1tvd25lcl07CiAgICB9CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBJbnRlcm5hbCBmdW5jdGlvbnMKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIC8vIGFjdHVhbCB0cmFuc2ZlciBmdW5jdGlvbiBjYWxsZWQgYnkgYWxsIHB1YmxpYyB2YXJpYW50cwogICAgZnVuY3Rpb24gdHJhbnNmZXJJbnRlcm5hbChhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgYW1vdW50KQogICAgICAgIGludGVybmFsCiAgICB7CiAgICAgICAgcmVxdWlyZSh0byAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgX2JhbGFuY2VzW2Zyb21dID0gc3ViKF9iYWxhbmNlc1tmcm9tXSwgYW1vdW50KTsKICAgICAgICBfYmFsYW5jZXNbdG9dID0gYWRkKF9iYWxhbmNlc1t0b10sIGFtb3VudCk7CiAgICAgICAgVHJhbnNmZXIoZnJvbSwgdG8sIGFtb3VudCk7CiAgICB9Cn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMKICAgIElFUkMyMFRva2VuLAogICAgQmFzaWNUb2tlbiwKICAgIElFUkM2NzdUb2tlbgp7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBNdXRhYmxlIHN0YXRlCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHByaXZhdGUgX2FsbG93ZWQ7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBQdWJsaWMgZnVuY3Rpb25zCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLwogICAgLy8gSW1wbGVtZW50cyBFUkMyMAogICAgLy8KCiAgICAvKioKICAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICAqIEBwYXJhbSBmcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgKiBAcGFyYW0gdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAgKiBAcGFyYW0gYW1vdW50IHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IGFtb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIC8vIGNoZWNrIGFuZCByZXNldCBhbGxvd2FuY2UKICAgICAgICB2YXIgYWxsb3dhbmNlID0gX2FsbG93ZWRbZnJvbV1bbXNnLnNlbmRlcl07CiAgICAgICAgX2FsbG93ZWRbZnJvbV1bbXNnLnNlbmRlcl0gPSBzdWIoYWxsb3dhbmNlLCBhbW91bnQpOwogICAgICAgIC8vIGRvIHRoZSB0cmFuc2ZlcgogICAgICAgIHRyYW5zZmVySW50ZXJuYWwoZnJvbSwgdG8sIGFtb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICAqIEBwYXJhbSBzcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgKiBAcGFyYW0gYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IGFtb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKQogICAgewoKICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgICAgcmVxdWlyZSgoYW1vdW50ID09IDApIHx8IChfYWxsb3dlZFttc2cuc2VuZGVyXVtzcGVuZGVyXSA9PSAwKSk7CgogICAgICAgIF9hbGxvd2VkW21zZy5zZW5kZXJdW3NwZW5kZXJdID0gYW1vdW50OwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIHNwZW5kZXIsIGFtb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgICogQHBhcmFtIG93bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICAqIEBwYXJhbSBzcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKQogICAgICAgIHB1YmxpYwogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpCiAgICB7CiAgICAgICAgcmV0dXJuIF9hbGxvd2VkW293bmVyXVtzcGVuZGVyXTsKICAgIH0KCiAgICAvLwogICAgLy8gSW1wbGVtZW50cyBJRVJDNjc3VG9rZW4KICAgIC8vCgogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoCiAgICAgICAgYWRkcmVzcyBzcGVuZGVyLAogICAgICAgIHVpbnQyNTYgYW1vdW50LAogICAgICAgIGJ5dGVzIGV4dHJhRGF0YQogICAgKQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShhcHByb3ZlKHNwZW5kZXIsIGFtb3VudCkpOwoKICAgICAgICAvLyBpbiBjYXNlIG9mIHJlLWVudHJ5IDEuIGFwcHJvdmFsIGlzIGRvbmUgMi4gbXNnLnNlbmRlciBpcyBkaWZmZXJlbnQKICAgICAgICBib29sIHN1Y2Nlc3MgPSBJRVJDNjc3Q2FsbGJhY2soc3BlbmRlcikucmVjZWl2ZUFwcHJvdmFsKAogICAgICAgICAgICBtc2cuc2VuZGVyLAogICAgICAgICAgICBhbW91bnQsCiAgICAgICAgICAgIHRoaXMsCiAgICAgICAgICAgIGV4dHJhRGF0YQogICAgICAgICk7CiAgICAgICAgcmVxdWlyZShzdWNjZXNzKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCmNvbnRyYWN0IEV0aGVyVG9rZW4gaXMKICAgIElzQ29udHJhY3QsCiAgICBBY2Nlc3NDb250cm9sbGVkLAogICAgU3RhbmRhcmRUb2tlbiwKICAgIFRva2VuTWV0YWRhdGEsCiAgICBSZWNsYWltYWJsZQp7CiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIENvbnN0YW50cwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgc3RyaW5nIHByaXZhdGUgY29uc3RhbnQgTkFNRSA9ICJFdGhlciBUb2tlbiI7CgogICAgc3RyaW5nIHByaXZhdGUgY29uc3RhbnQgU1lNQk9MID0gIkVUSC1UIjsKCiAgICB1aW50OCBwcml2YXRlIGNvbnN0YW50IERFQ0lNQUxTID0gMTg7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBFdmVudHMKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIGV2ZW50IExvZ0RlcG9zaXQoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHRvLAogICAgICAgIHVpbnQyNTYgYW1vdW50CiAgICApOwoKICAgIGV2ZW50IExvZ1dpdGhkcmF3YWwoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGZyb20sCiAgICAgICAgdWludDI1NiBhbW91bnQKICAgICk7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgZnVuY3Rpb24gRXRoZXJUb2tlbihJQWNjZXNzUG9saWN5IGFjY2Vzc1BvbGljeSkKICAgICAgICBBY2Nlc3NDb250cm9sbGVkKGFjY2Vzc1BvbGljeSkKICAgICAgICBTdGFuZGFyZFRva2VuKCkKICAgICAgICBUb2tlbk1ldGFkYXRhKE5BTUUsIERFQ0lNQUxTLCBTWU1CT0wsICIiKQogICAgICAgIFJlY2xhaW1hYmxlKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgIH0KCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIFB1YmxpYyBmdW5jdGlvbnMKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIC8vLyBkZXBvc2l0IG1zZy52YWx1ZSBvZiBFdGhlciB0byBtc2cuc2VuZGVyIGJhbGFuY2UKICAgIGZ1bmN0aW9uIGRlcG9zaXQoKQogICAgICAgIHBheWFibGUKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICBfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBhZGQoX2JhbGFuY2VzW21zZy5zZW5kZXJdLCBtc2cudmFsdWUpOwogICAgICAgIF90b3RhbFN1cHBseSA9IGFkZChfdG90YWxTdXBwbHksIG1zZy52YWx1ZSk7CiAgICAgICAgTG9nRGVwb3NpdChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogICAgICAgIFRyYW5zZmVyKGFkZHJlc3MoMCksIG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9CgogICAgLy8vIHdpdGhkcmF3cyBhbmQgc2VuZHMgJ2Ftb3VudCcgb2YgZXRoZXIgdG8gbXNnLnNlbmRlcgogICAgZnVuY3Rpb24gd2l0aGRyYXcodWludDI1NiBhbW91bnQpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgcmVxdWlyZShfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gYW1vdW50KTsKICAgICAgICBfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzdWIoX2JhbGFuY2VzW21zZy5zZW5kZXJdLCBhbW91bnQpOwogICAgICAgIF90b3RhbFN1cHBseSA9IHN1YihfdG90YWxTdXBwbHksIGFtb3VudCk7CiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQpOwogICAgICAgIExvZ1dpdGhkcmF3YWwobXNnLnNlbmRlciwgYW1vdW50KTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBhZGRyZXNzKDApLCBhbW91bnQpOwogICAgfQoKICAgIC8vCiAgICAvLyBJbXBsZW1lbnRzIElFUkMyMjNUb2tlbgogICAgLy8KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IGFtb3VudCwgYnl0ZXMgZGF0YSkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHRyYW5zZmVySW50ZXJuYWwobXNnLnNlbmRlciwgdG8sIGFtb3VudCk7CgogICAgICAgIC8vIE5vdGlmeSB0aGUgcmVjZWl2aW5nIGNvbnRyYWN0LgogICAgICAgIGlmIChpc0NvbnRyYWN0KHRvKSkgewogICAgICAgICAgICAvLyBpbiBjYXNlIG9mIHJlLWVudHJ5ICgxKSB0cmFuc2ZlciBpcyBkb25lICgyKSBtc2cuc2VuZGVyIGlzIGRpZmZlcmVudAogICAgICAgICAgICBJRVJDMjIzQ2FsbGJhY2sodG8pLm9uVG9rZW5UcmFuc2Zlcihtc2cuc2VuZGVyLCBhbW91bnQsIGRhdGEpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLwogICAgLy8gT3ZlcnJpZGVzIFJlY2xhaW1hYmxlCiAgICAvLwoKICAgIC8vLyBAbm90aWNlIGFsbG93cyBFdGhlclRva2VuIHRvIHJlY2xhaW0gdG9rZW5zIHdyb25nbHkgc2VudCB0byBpdHMgYWRkcmVzcwogICAgLy8vIEBkZXYgYXMgRXRoZXJUb2tlbiBieSBkZXNpZ24gaGFzIGJhbGFuY2Ugb2YgRXRoZXIgKG5hdGl2ZSBFdGhlcmV1bSB0b2tlbikKICAgIC8vLyAgICAgc3VjaCByZWNsYW1hdGlvbiBpcyBub3QgYWxsb3dlZAogICAgZnVuY3Rpb24gcmVjbGFpbShJQmFzaWNUb2tlbiB0b2tlbikKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICAvLyBmb3JiaWQgcmVjbGFpbWluZyBFVEggaG9sZCBpbiB0aGlzIGNvbnRyYWN0LgogICAgICAgIHJlcXVpcmUodG9rZW4gIT0gUkVDTEFJTV9FVEhFUik7CiAgICAgICAgUmVjbGFpbWFibGUucmVjbGFpbSh0b2tlbik7CiAgICB9Cn0='.
	

]
