Class {
	#name : #SRT926ec5905d4445701c2d3cc83567b4ffc490e037,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT926ec5905d4445701c2d3cc83567b4ffc490e037 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIEVST1MgdG9rZW4KLy8KLy8gU3ltYm9sICAgICAgOiBFTE9WRQovLyBOYW1lICAgICAgICA6IEVMT1ZFIFRva2VuIGZvciBlTE9WRSBTb2NpYWwgTmV0d29yawovLyBUb3RhbCBzdXBwbHk6IDIwMCwwMDAsMDAwCi8vIERlY2ltYWxzICAgIDogMgoKY29udHJhY3QgRVJDMjBJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB0b2tlbk93bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIHRva2VuT3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdG9rZW5zKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHRva2VucykgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHRva2VucykgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB0b2tlbnMpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIHRva2VuT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHRva2Vucyk7CiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIENvbnRyYWN0IGZ1bmN0aW9uIHRvIHJlY2VpdmUgYXBwcm92YWwgYW5kIGV4ZWN1dGUgZnVuY3Rpb24gaW4gb25lIGNhbGwKLy8gQm9ycm93ZWQgZnJvbSBNaW5pTWVUb2tlbgpjb250cmFjdCBBcHByb3ZlQW5kQ2FsbEZhbGxCYWNrIHsKICAgIGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIGZyb20sIHVpbnQyNTYgdG9rZW5zLCBhZGRyZXNzIHRva2VuLCBieXRlcyBkYXRhKSBwdWJsaWM7Cn0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gT3duZWQgY29udHJhY3QKY29udHJhY3QgT3duZWQgewogICAgCiAgICBzdHJ1Y3QgSW52ZXN0b3IgewogICAgICAgIGFkZHJlc3Mgc2VuZGVyOwogICAgICAgIHVpbnQgYW1vdW50OwogICAgICAgIGJvb2wga3ljZWQ7CiAgICB9CiAgICAKICAgIC8vIHZlcnNpb24gb2YgdGhpcyBzbWFydCBjb250cmFjdAogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gIjEuOSI7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CiAgICAvLyByZXdhcmQgcG9vbCB3YWxsZXQsIHVuLXNvbGQgdG9rZW5zIHdpbGwgYmUgYnVybmVkIHRvIHRoaXMgYWRkcmVzcwogICAgYWRkcmVzcyBwdWJsaWMgcmV3YXJkUG9vbFdhbGxldDsKICAgIAogICAgLy8gTGlzdCBvZiBpbnZlc3RvcnMgd2l0aCBpbnZlc3RlZCBhbW91bnQgaW4gRVRICiAgICBJbnZlc3RvcltdIHB1YmxpYyBpbnZlc3RvcnM7CiAgICAKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgbWFwSW52ZXN0b3JzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBmb3VuZGVyczsKICAgIAogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvKTsKCiAgICBmdW5jdGlvbiBPd25lZCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICAvLyBHaXZlIEtZQyBzdGF0dXMsIHNvIHRva2VuIGNhbiBiZSB0cmFkZWQgYnkgdGhpcyB3YWxsZXQKICAgIGZ1bmN0aW9uIGNoYW5nZUtZQ1N0YXR1cyhhZGRyZXNzIGludiwgYm9vbCBreWNTdGF0dXMpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShreWNTdGF0dXMgPT0gIWludmVzdG9yc1ttYXBJbnZlc3RvcnNbaW52XS0xXS5reWNlZCk7CiAgICAgICAgaW52ZXN0b3JzW21hcEludmVzdG9yc1tpbnZdLTFdLmt5Y2VkID0ga3ljU3RhdHVzOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRSZXdhcmRQb29sV2FsbGV0KGFkZHJlc3MgcmV3YXJkV2FsbGV0KSBvbmx5T3duZXIgcHVibGljIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmV3YXJkUG9vbFdhbGxldCA9IHJld2FyZFdhbGxldDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gaXNFeGlzdEludmVzdG9yKGFkZHJlc3MgaW52KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBleGlzdCkgewogICAgICAgIHJldHVybiBtYXBJbnZlc3RvcnNbaW52XSAhPSAwOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBpc0V4aXN0Rm91bmRlcihhZGRyZXNzIF9mb3VuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBleGlzdCkgewogICAgICAgIHJldHVybiBmb3VuZGVyc1tfZm91bmRlcl07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlbW92ZUZvdW5kZXIoYWRkcmVzcyBfZm91bmRlcikgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGZvdW5kZXJzW19mb3VuZGVyXSk7CiAgICAgICAgZm91bmRlcnNbX2ZvdW5kZXJdID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkZEZvdW5kZXIoYWRkcmVzcyBfZm91bmRlcikgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKCFmb3VuZGVyc1tfZm91bmRlcl0pOwogICAgICAgIGZvdW5kZXJzW19mb3VuZGVyXSA9IHRydWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lcik7CiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIG5ld093bmVyID0gYWRkcmVzcygwKTsKICAgIH0KfQoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBFUkMyMCBUb2tlbiwgd2l0aCB0aGUgYWRkaXRpb24gb2Ygc3ltYm9sLCBuYW1lIGFuZCBkZWNpbWFscyBhbmQgYW4KLy8gaW5pdGlhbCBmaXhlZCBzdXBwbHkKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjb250cmFjdCBFTE9WRVRva2VuIGlzIEVSQzIwSW50ZXJmYWNlLCBPd25lZCB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsKICAgIHVpbnQgcHVibGljIF90b3RhbFN1cHBseTsKICAgIAogICAgdWludCBtaW5JbnZlc3QgPSAwLjUgZXRoZXI7CiAgICB1aW50IG1heEludmVzdCA9IDUwMCBldGhlcjsKICAgIAogICAgdWludCBzb2Z0Y2FwID0gNTAwMCBldGhlcjsKICAgIHVpbnQgaGFyZGNhcCA9IDQwMDAwIGV0aGVyOwoKICAgIHVpbnQgcHVibGljIGljb1N0YXJ0RGF0ZTsKICAgIAogICAgdWludFs0XSBwdWJsaWMgcm91bmRFbmQ7CiAgICB1aW50WzRdIHB1YmxpYyByb3VuZFRva2VuTGVmdDsKICAgIHVpbnRbNF0gcHVibGljIHJvdW5kQm9udXM7CiAgICAKICAgIHVpbnQgcHVibGljIHRva2VuTG9ja1RpbWU7CiAgICB1aW50IHB1YmxpYyB0b2tlbkZvdW5kZXJMb2NrVGltZTsKICAgIGJvb2wgaWNvRW5kZWQgPSBmYWxzZTsKICAgIGJvb2wga3ljQ29tcGxldGVkID0gZmFsc2U7CiAgICAKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgogICAgdWludCBldGhlckV4UmF0ZSA9IDIwMDA7CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBFTE9WRVRva2VuKHN0cmluZyB0TmFtZSwgc3RyaW5nIHRTeW1ib2wpIHB1YmxpYyB7CiAgICAgICAgc3ltYm9sID0gdFN5bWJvbDsKICAgICAgICBuYW1lID0gdE5hbWU7CiAgICAgICAgZGVjaW1hbHMgPSAyOwogICAgICAgIF90b3RhbFN1cHBseSA9IDIwMDAwMDAwMCAqIDEwKip1aW50KGRlY2ltYWxzKTsgLy8gMjAwLjAwMC4wMDAgdG9rZW5zCiAgICAgICAgCiAgICAgICAgaWNvU3RhcnREYXRlICAgICAgICAgICAgPSAxNTE4NTY2NDAxOyAgIC8vIDIwMTgvMDIvMTQgMDA6MDA6MDEgQU0KICAgICAgICAKICAgICAgICAvLyBFbmRpbmcgdGltZSBmb3IgZWFjaCByb3VuZAogICAgICAgIC8vIHByZS1JQ08gcm91bmQgMSA6IGVuZHMgMjgvMDIvMjAxOCwgMTBNIHRva2VucyBsaW1pdCwgNDAlIGJvbnVzCiAgICAgICAgLy8gcHJlLUlDTyByb3VuZCAyIDogZW5kcyAxNS8wMy8yMDE4LCAxME0gdG9rZW5zIGxpbWl0LCAzMCUgYm9udXMKICAgICAgICAvLyBjcm93ZHNhbGUgcm91bmQgMSA6IGVuZHMgMTUvMDQvMjAxOCwgMzBNIHRva2VucyBsaW1pdCwgMTAlIGJvbnVzCiAgICAgICAgLy8gY3Jvd2RzYWxlIHJvdW5kIDIgOiBlbmRzIDMwLzA0LzIwMTgsIDMwTSB0b2tlbnMgbGltaXQsIDAlIGJvbnVzCiAgICAgICAgcm91bmRFbmQgPSBbMTUxOTg2MjQwMCwgMTUyMTE1ODQwMCwgMTUyMzgzNjgwMCwgMTUyNTEzMjgwMF07CiAgICAgICAgcm91bmRUb2tlbkxlZnQgPSBbMTAwMDAwMDAwMCwgMTAwMDAwMDAwMCwgMzAwMDAwMDAwMCwgMzAwMDAwMDAwMF07CiAgICAgICAgcm91bmRCb251cyA9IFs0MCwgMzAsIDEwLCAwXTsKICAgICAgICAKICAgICAgICAvLyBGb3VuZGVyIGNhbiB0cmFkZSB0b2tlbnMgMSB5ZWFyIGFmdGVyIElDTyBlbmRlZAogICAgICAgIHRva2VuRm91bmRlckxvY2tUaW1lID0gcm91bmRFbmRbM10gKyAzNjUqMjQqMzYwMDsKICAgICAgICAKICAgICAgICAvLyBUaW1lIHRvIGxvY2sgYWxsIEVSQzIwIHRyYW5zZmVyIAogICAgICAgIHRva2VuTG9ja1RpbWUgPSAxNTcyNTY2NDAwOyAgICAgLy8gMjAxOS8xMS8wMSBhZnRlciAxOCBtb250aHMKICAgICAgICAKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBfdG90YWxTdXBwbHk7CiAgICAgICAgVHJhbnNmZXIoYWRkcmVzcygwKSwgb3duZXIsIF90b3RhbFN1cHBseSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Um91bmRFbmQodWludCByb3VuZCwgdWludCBuZXdUaW1lKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgIHsKICAgICAgICByZXF1aXJlKG5vdzxuZXdUaW1lKTsKICAgICAgICBpZiAocm91bmQ+MCkgewogICAgICAgICAgICByZXF1aXJlKG5ld1RpbWU+cm91bmRFbmRbcm91bmQtMV0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUobmV3VGltZTxyb3VuZEVuZFsxXSk7CiAgICAgICAgfQoKICAgICAgICByb3VuZEVuZFtyb3VuZF0gPSBuZXdUaW1lOwogICAgICAgIC8vIElmIHdlIGNoYW5nZSBJQ08gZW5kZWQgdGltZSwgd2UgY2hhbmdlIGFsc28gZm91bmRlciB0cmFkaW5nIGxvY2sgdGltZQogICAgICAgIGlmIChyb3VuZCA9PSAzKSB7CiAgICAgICAgICAgIHRva2VuRm91bmRlckxvY2tUaW1lID0gbmV3VGltZSArIDM2NSoyNCozNjAwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gcmVmdW5kIEVUSCB0byBub24tS1lDZWQgaW52ZXN0b3JzCiAgICBmdW5jdGlvbiByZWZ1bmROb25LWUNJbnZlc3RvcigpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSgha3ljQ29tcGxldGVkKTsKICAgICAgICBmb3IodWludCBpID0gMDsgaTxpbnZlc3RvcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKCFpbnZlc3RvcnNbaV0ua3ljZWQpIHsKICAgICAgICAgICAgICAgIGludmVzdG9yc1tpXS5zZW5kZXIudHJhbnNmZXIoaW52ZXN0b3JzW2ldLmFtb3VudCk7ICAgIAogICAgICAgICAgICAgICAgaW52ZXN0b3JzW2ldLmFtb3VudCA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAga3ljQ29tcGxldGVkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0U29mdENhcCh1aW50IG5ld1NvZnRDYXApIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgc29mdGNhcCA9IG5ld1NvZnRDYXA7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldEV0aEV4UmF0ZSh1aW50IG5ld0V4UmF0ZSkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBldGhlckV4UmF0ZSA9IG5ld0V4UmF0ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0SUNPU3RhcnRUaW1lKHVpbnQgbmV3VGltZSkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpY29TdGFydERhdGUgPSBuZXdUaW1lOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRMb2NrVGltZSh1aW50IG5ld0xvY2tUaW1lKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUobm93PG5ld0xvY2tUaW1lKTsKICAgICAgICB0b2tlbkxvY2tUaW1lID0gbmV3TG9ja1RpbWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBUb3RhbCBzdXBwbHkKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBfdG90YWxTdXBwbHkgLSBiYWxhbmNlc1thZGRyZXNzKDApXTsKICAgIH0KCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIEdldCB0aGUgdG9rZW4gYmFsYW5jZSBmb3IgYWNjb3VudCBgdG9rZW5Pd25lcmAKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgdG9rZW5Pd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1t0b2tlbk93bmVyXTsKICAgIH0KICAgIAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBUcmFuc2ZlciB0aGUgYmFsYW5jZSBmcm9tIHRva2VuIG93bmVyJ3MgYWNjb3VudCB0byBgdG9gIGFjY291bnQKICAgIC8vIC0gT3duZXIncyBhY2NvdW50IG11c3QgaGF2ZSBzdWZmaWNpZW50IGJhbGFuY2UgdG8gdHJhbnNmZXIKICAgIC8vIC0gMCB2YWx1ZSB0cmFuc2ZlcnMgYXJlIGFsbG93ZWQKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB0b2tlbnMpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGljb0VuZGVkKTsKICAgICAgICAvLyB0cmFuc2FjdGlvbiBpcyBpbiB0cmFkYWJsZSBwZXJpb2QKICAgICAgICByZXF1aXJlKG5vdzx0b2tlbkxvY2tUaW1lKTsKICAgICAgICAvLyBlaXRoZXIKICAgICAgICAvLyAtIGlzIGZvdW5kZXIgYW5kIGN1cnJlbnQgdGltZSA+IHRva2VuRm91bmRlckxvY2tUaW1lCiAgICAgICAgLy8gLSBpcyBub3QgZm91bmRlciBidXQgaXMgcmV3YXJkUG9vbFdhbGxldCBvciBzZW5kZXIgd2FzIGt5Yy1lZAogICAgICAgIHJlcXVpcmUoKGZvdW5kZXJzW21zZy5zZW5kZXJdICYmIG5vdz50b2tlbkZvdW5kZXJMb2NrVGltZSkgfHwgKCFmb3VuZGVyc1ttc2cuc2VuZGVyXSAmJiAobXNnLnNlbmRlciA9PSByZXdhcmRQb29sV2FsbGV0IHx8IG1hcEludmVzdG9yc1ttc2cuc2VuZGVyXSA9PSAwIHx8IGludmVzdG9yc1ttYXBJbnZlc3RvcnNbbXNnLnNlbmRlcl0tMV0ua3ljZWQpKSk7CiAgICAgICAgLy8gc2VuZGVyIGVpdGhlciBpcyBvd25lciBvciByZWNpcGllbnQgaXMgbm90IDB4MCBhZGRyZXNzCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyIHx8IHRvICE9IDB4MCk7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIodG9rZW5zKTsKICAgICAgICBiYWxhbmNlc1t0b10gPSBiYWxhbmNlc1t0b10uYWRkKHRva2Vucyk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgdG8sIHRva2Vucyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBUb2tlbiBvd25lciBjYW4gYXBwcm92ZSBmb3IgYHNwZW5kZXJgIHRvIHRyYW5zZmVyRnJvbSguLi4pIGB0b2tlbnNgCiAgICAvLyBmcm9tIHRoZSB0b2tlbiBvd25lcidzIGFjY291bnQKICAgIC8vCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9ibG9iL21hc3Rlci9FSVBTL2VpcC0yMC10b2tlbi1zdGFuZGFyZC5tZAogICAgLy8gcmVjb21tZW5kcyB0aGF0IHRoZXJlIGFyZSBubyBjaGVja3MgZm9yIHRoZSBhcHByb3ZhbCBkb3VibGUtc3BlbmQgYXR0YWNrCiAgICAvLyBhcyB0aGlzIHNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiB1c2VyIGludGVyZmFjZXMgCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHRva2VucykgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bc3BlbmRlcl0gPSB0b2tlbnM7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgc3BlbmRlciwgdG9rZW5zKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBUcmFuc2ZlciBgdG9rZW5zYCBmcm9tIHRoZSBgZnJvbWAgYWNjb3VudCB0byB0aGUgYHRvYCBhY2NvdW50CiAgICAvLyAKICAgIC8vIFRoZSBjYWxsaW5nIGFjY291bnQgbXVzdCBhbHJlYWR5IGhhdmUgc3VmZmljaWVudCB0b2tlbnMgYXBwcm92ZSguLi4pLWQKICAgIC8vIGZvciBzcGVuZGluZyBmcm9tIHRoZSBgZnJvbWAgYWNjb3VudCBhbmQKICAgIC8vIC0gRnJvbSBhY2NvdW50IG11c3QgaGF2ZSBzdWZmaWNpZW50IGJhbGFuY2UgdG8gdHJhbnNmZXIKICAgIC8vIC0gU3BlbmRlciBtdXN0IGhhdmUgc3VmZmljaWVudCBhbGxvd2FuY2UgdG8gdHJhbnNmZXIKICAgIC8vIC0gMCB2YWx1ZSB0cmFuc2ZlcnMgYXJlIGFsbG93ZWQKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB0b2tlbnMpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGljb0VuZGVkKTsKICAgICAgICAvLyBlaXRoZXIKICAgICAgICAvLyAtIGlzIGZvdW5kZXIgYW5kIGN1cnJlbnQgdGltZSA+IHRva2VuRm91bmRlckxvY2tUaW1lCiAgICAgICAgLy8gLSBpcyBub3QgZm91bmRlciBidXQgaXMgcmV3YXJkUG9vbFdhbGxldCBvciBzZW5kZXIgd2FzIGt5Yy1lZAogICAgICAgIHJlcXVpcmUoKGZvdW5kZXJzW2Zyb21dICYmIG5vdz50b2tlbkZvdW5kZXJMb2NrVGltZSkgfHwgKCFmb3VuZGVyc1tmcm9tXSAmJiAoZnJvbSA9PSByZXdhcmRQb29sV2FsbGV0IHx8IGludmVzdG9yc1ttYXBJbnZlc3RvcnNbZnJvbV0tMV0ua3ljZWQpKSk7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbZnJvbV0gPSBiYWxhbmNlc1tmcm9tXS5zdWIodG9rZW5zKTsKICAgICAgICBhbGxvd2VkW2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtmcm9tXVttc2cuc2VuZGVyXS5zdWIodG9rZW5zKTsKICAgICAgICBiYWxhbmNlc1t0b10gPSBiYWxhbmNlc1t0b10uYWRkKHRva2Vucyk7CiAgICAgICAgVHJhbnNmZXIoZnJvbSwgdG8sIHRva2Vucyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBSZXR1cm5zIHRoZSBhbW91bnQgb2YgdG9rZW5zIGFwcHJvdmVkIGJ5IHRoZSBvd25lciB0aGF0IGNhbiBiZQogICAgLy8gdHJhbnNmZXJyZWQgdG8gdGhlIHNwZW5kZXIncyBhY2NvdW50CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIHRva2VuT3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbdG9rZW5Pd25lcl1bc3BlbmRlcl07CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBUb2tlbiBvd25lciBjYW4gYXBwcm92ZSBmb3IgYHNwZW5kZXJgIHRvIHRyYW5zZmVyRnJvbSguLi4pIGB0b2tlbnNgCiAgICAvLyBmcm9tIHRoZSB0b2tlbiBvd25lcidzIGFjY291bnQuIFRoZSBgc3BlbmRlcmAgY29udHJhY3QgZnVuY3Rpb24KICAgIC8vIGByZWNlaXZlQXBwcm92YWwoLi4uKWAgaXMgdGhlbiBleGVjdXRlZAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdG9rZW5zLCBieXRlcyBkYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtzcGVuZGVyXSA9IHRva2VuczsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBzcGVuZGVyLCB0b2tlbnMpOwogICAgICAgIEFwcHJvdmVBbmRDYWxsRmFsbEJhY2soc3BlbmRlcikucmVjZWl2ZUFwcHJvdmFsKG1zZy5zZW5kZXIsIHRva2VucywgdGhpcywgZGF0YSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHByb2Nlc3NSb3VuZCh1aW50IHJvdW5kKSBpbnRlcm5hbCB7CiAgICAgICAgLy8gVG9rZW4gbGVmdCBmb3IgZWFjaCByb3VuZCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwCiAgICAgICAgcmVxdWlyZShyb3VuZFRva2VuTGVmdFtyb3VuZF0+MCk7CiAgICAgICAgLy8gY2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMgY2FuIGJlIGJvdWdodCwgZ2l2ZW4gbnVtYmVyIG9mIGV0aGVyIGZyb20gc2VuZGVyLCB3aXRoIGRpc2NvdW50IHJhdGUgYWNjb3JkaW5nbHkKICAgICAgICB2YXIgdG9rZW5DYW5CZUJvdWdodCA9IChtc2cudmFsdWUqMTAqKnVpbnQoZGVjaW1hbHMpKmV0aGVyRXhSYXRlKigxMDArcm91bmRCb251c1tyb3VuZF0pKS5kaXYoMTAwKjEwKioxOCk7CiAgICAgICAgaWYgKHRva2VuQ2FuQmVCb3VnaHQ8cm91bmRUb2tlbkxlZnRbcm91bmRdKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXSAtIHRva2VuQ2FuQmVCb3VnaHQ7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0gKyB0b2tlbkNhbkJlQm91Z2h0OwogICAgICAgICAgICByb3VuZFRva2VuTGVmdFtyb3VuZF0gPSByb3VuZFRva2VuTGVmdFtyb3VuZF0tdG9rZW5DYW5CZUJvdWdodDsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChtYXBJbnZlc3RvcnNbbXNnLnNlbmRlcl0gPiAwKSB7CiAgICAgICAgICAgICAgICAvLyBpZiBpbnZlc3RvcnMgYWxyZWFkeSBleGlzdGVkLCBhZGQgYW1vdW50IHRvIHRoZSBpbnZlc3RlZCBzdW0KICAgICAgICAgICAgICAgIGludmVzdG9yc1ttYXBJbnZlc3RvcnNbbXNnLnNlbmRlcl0tMV0uYW1vdW50ICs9IG1zZy52YWx1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHVpbnQgaW5kID0gaW52ZXN0b3JzLnB1c2goSW52ZXN0b3IobXNnLnNlbmRlciwgbXNnLnZhbHVlLCBmYWxzZSkpOyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIG1hcEludmVzdG9yc1ttc2cuc2VuZGVyXSA9IGluZDsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBuZWVkZWRFdGhlclRvQnV5ID0gKDEwKioxOCpyb3VuZFRva2VuTGVmdFtyb3VuZF0qMTAwKS5kaXYoMTAqKnVpbnQoZGVjaW1hbHMpKS5kaXYoZXRoZXJFeFJhdGUqKDEwMCtyb3VuZEJvbnVzW3JvdW5kXSkpOwogICAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0gLSByb3VuZFRva2VuTGVmdFtyb3VuZF07CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0gKyByb3VuZFRva2VuTGVmdFtyb3VuZF07CiAgICAgICAgICAgIHJvdW5kVG9rZW5MZWZ0W3JvdW5kXSA9IDA7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAobWFwSW52ZXN0b3JzW21zZy5zZW5kZXJdID4gMCkgewogICAgICAgICAgICAgICAgLy8gaWYgaW52ZXN0b3JzIGFscmVhZHkgZXhpc3RlZCwgYWRkIGFtb3VudCB0byB0aGUgaW52ZXN0ZWQgc3VtCiAgICAgICAgICAgICAgICBpbnZlc3RvcnNbbWFwSW52ZXN0b3JzW21zZy5zZW5kZXJdLTFdLmFtb3VudCArPSBuZWVkZWRFdGhlclRvQnV5OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdWludCBpbmRleCA9IGludmVzdG9ycy5wdXNoKEludmVzdG9yKG1zZy5zZW5kZXIsIG5lZWRlZEV0aGVyVG9CdXksIGZhbHNlKSk7ICAKICAgICAgICAgICAgICAgIG1hcEludmVzdG9yc1ttc2cuc2VuZGVyXSA9IGluZGV4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBzZW5kIGJhY2sgZXRoZXIgdG8gc2VuZGVyIAogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKG1zZy52YWx1ZS1uZWVkZWRFdGhlclRvQnV5KTsKICAgICAgICB9CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBBY2NlcHQgRVRIIGZvciB0aGlzIGNyb3dkc2FsZQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSghaWNvRW5kZWQpOwogICAgICAgIHVpbnQgY3VycmVudFRpbWUgPSBub3c7CiAgICAgICAgcmVxdWlyZSAoY3VycmVudFRpbWU+aWNvU3RhcnREYXRlKTsKICAgICAgICByZXF1aXJlIChtc2cudmFsdWU+PSBtaW5JbnZlc3QgJiYgbXNnLnZhbHVlPD1tYXhJbnZlc3QpOwogICAgICAgIAogICAgICAgIGlmIChjdXJyZW50VGltZTxyb3VuZEVuZFswXSkgewogICAgICAgICAgICBwcm9jZXNzUm91bmQoMCk7CiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50VGltZTxyb3VuZEVuZFsxXSkgewogICAgICAgICAgICBwcm9jZXNzUm91bmQoMSk7CiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50VGltZTxyb3VuZEVuZFsyXSkgewogICAgICAgICAgICBwcm9jZXNzUm91bmQoMik7CiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50VGltZTxyb3VuZEVuZFszXSkgewogICAgICAgICAgICBwcm9jZXNzUm91bmQoMyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gY3Jvd2RzYWxlIGVuZHMsIGNoZWNrIHN1Y2Nlc3MgY29uZGl0aW9ucwogICAgICAgICAgICBpZiAodGhpcy5iYWxhbmNlPHNvZnRjYXApIHsKICAgICAgICAgICAgICAgIC8vIHRpbWUgdG8gc2VuZCBiYWNrIGZ1bmRzIHRvIGludmVzdG9ycwogICAgICAgICAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGk8aW52ZXN0b3JzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaW52ZXN0b3JzW2ldLnNlbmRlci50cmFuc2ZlcihpbnZlc3RvcnNbaV0uYW1vdW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIHNlbmQgdW4tc29sZCB0b2tlbnMgdG8gcmV3YXJkIGFkZHJlc3MKICAgICAgICAgICAgICAgIHJlcXVpcmUocmV3YXJkUG9vbFdhbGxldCAhPSBhZGRyZXNzKDApKTsKICAgICAgICAgICAgICAgIHVpbnQgc3VtVG9CdXJuID0gcm91bmRUb2tlbkxlZnRbMF0gKyByb3VuZFRva2VuTGVmdFsxXSArIHJvdW5kVG9rZW5MZWZ0WzJdICsgcm91bmRUb2tlbkxlZnRbM107CiAgICAgICAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0gLSBzdW1Ub0J1cm47CiAgICAgICAgICAgICAgICBiYWxhbmNlc1tyZXdhcmRQb29sV2FsbGV0XSArPSBzdW1Ub0J1cm47CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJvdW5kVG9rZW5MZWZ0WzBdID0gcm91bmRUb2tlbkxlZnRbMV0gPSByb3VuZFRva2VuTGVmdFsyXSA9IHJvdW5kVG9rZW5MZWZ0WzNdID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLy8gZ2l2ZSBiYWNrIEVUSCB0byBzZW5kZXIKICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgICAgICAgICBpY29FbmRlZCA9IHRydWU7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aGVyVG9Pd25lcigpIG9ubHlPd25lciBwdWJsaWMgeyAgIAogICAgICAgIHJlcXVpcmUobm93PnJvdW5kRW5kWzNdICYmIHRoaXMuYmFsYW5jZT5zb2Z0Y2FwKTsKICAgICAgICBvd25lci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gT3duZXIgY2FuIHRyYW5zZmVyIG91dCBhbnkgYWNjaWRlbnRhbGx5IHNlbnQgRVJDMjAgdG9rZW5zCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyQW55RVJDMjBUb2tlbihhZGRyZXNzIHRva2VuQWRkcmVzcywgdWludCB0b2tlbnMpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmV0dXJuIEVSQzIwSW50ZXJmYWNlKHRva2VuQWRkcmVzcykudHJhbnNmZXIob3duZXIsIHRva2Vucyk7CiAgICB9Cn0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gU2FmZSBtYXRocwovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmxpYnJhcnkgU2FmZU1hdGggewogICAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgYykgewogICAgICAgIGMgPSBhICsgYjsKICAgICAgICByZXF1aXJlKGMgPj0gYSk7CiAgICB9CiAgICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgcmVxdWlyZShiIDw9IGEpOwogICAgICAgIGMgPSBhIC0gYjsKICAgIH0KICAgIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICBjID0gYSAqIGI7CiAgICAgICAgcmVxdWlyZShhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICB9CiAgICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgcmVxdWlyZShiID4gMCk7CiAgICAgICAgYyA9IGEgLyBiOwogICAgfQp9'.
	

]
