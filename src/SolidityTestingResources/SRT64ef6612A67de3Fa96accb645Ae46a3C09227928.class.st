Class {
	#name : #SRT64ef6612A67de3Fa96accb645Ae46a3C09227928,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT64ef6612A67de3Fa96accb645Ae46a3C09227928 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIEVSQzcyMSBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL2VpcHMvaXNzdWVzLzcyMQogKi8KY29udHJhY3QgRVJDNzIxIHsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfYXBwcm92ZWQsIHVpbnQyNTYgX3Rva2VuSWQpOwoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2JhbGFuY2UpOwogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljOwp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFkbWluczsKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgYWRtaW5zW293bmVyXSA9IHRydWU7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KICAKICBtb2RpZmllciBvbmx5QWRtaW4oKSB7CiAgICByZXF1aXJlKGFkbWluc1ttc2cuc2VuZGVyXSk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlQWRtaW4oYWRkcmVzcyBfbmV3QWRtaW4sIGJvb2wgX2FwcHJvdmVkKSBvbmx5T3duZXIgcHVibGljIHsKICAgIGFkbWluc1tfbmV3QWRtaW5dID0gX2FwcHJvdmVkOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIGVtaXQgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQogIAogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgovKioKICogQHRpdGxlIEVSQzcyMVRva2VuCiAqIEdlbmVyaWMgaW1wbGVtZW50YXRpb24gZm9yIHRoZSByZXF1aXJlZCBmdW5jdGlvbmFsaXR5IG9mIHRoZSBFUkM3MjEgc3RhbmRhcmQKICovCmNvbnRyYWN0IEVjb25vbWVtZSBpcyBFUkM3MjEsIE93bmFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAvLyBUb3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgdWludDI1NiBwcml2YXRlIHRvdGFsVG9rZW5zOwogIHVpbnQyNTYgcHVibGljIGRldmVsb3BlckN1dDsKICB1aW50MjU2IHB1YmxpYyBzdWJtaXNzaW9uUG9vbDsgLy8gVGhlIGZ1bmQgYW1vdW50IGdhaW5lZCBmcm9tIHN1Ym1pc3Npb25zLgogIHVpbnQyNTYgcHVibGljIHN1Ym1pc3Npb25QcmljZTsgLy8gSG93IG11Y2ggaXQgY29zdHMgdG8gc3VibWl0IGEgbWVtZS4KICB1aW50MjU2IHB1YmxpYyBlbmRpbmdCYWxhbmNlOyAvLyBCYWxhbmNlIGF0IHRoZSBlbmQgb2YgdGhlIGxhc3QgcHVyY2hhc2UuCgogIC8vIE1lbWUgRGF0YQogIG1hcHBpbmcgKHVpbnQyNTYgPT4gTWVtZSkgcHVibGljIG1lbWVEYXRhOwoKICAvLyBNYXBwaW5nIGZyb20gdG9rZW4gSUQgdG8gb3duZXIKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgdG9rZW5Pd25lcjsKCiAgLy8gTWFwcGluZyBmcm9tIHRva2VuIElEIHRvIGFwcHJvdmVkIGFkZHJlc3MKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgdG9rZW5BcHByb3ZhbHM7CgogIC8vIE1hcHBpbmcgZnJvbSBvd25lciB0byBsaXN0IG9mIG93bmVkIHRva2VuIElEcwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NltdKSBwcml2YXRlIG93bmVkVG9rZW5zOwoKICAvLyBNYXBwaW5nIGZyb20gdG9rZW4gSUQgdG8gaW5kZXggb2YgdGhlIG93bmVyIHRva2VucyBsaXN0CiAgbWFwcGluZyh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgb3duZWRUb2tlbnNJbmRleDsKCiAgLy8gQmFsYW5jZXMgZnJvbSAlIHBheW91dHMuCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgY3JlYXRvckJhbGFuY2VzOwoKICAvLyBFdmVudHMKICBldmVudCBQdXJjaGFzZSh1aW50MjU2IGluZGV4ZWQgX3Rva2VuSWQsIGFkZHJlc3MgaW5kZXhlZCBfYnV5ZXIsIGFkZHJlc3MgaW5kZXhlZCBfc2VsbGVyLCB1aW50MjU2IF9wdXJjaGFzZVByaWNlKTsKICBldmVudCBDcmVhdGlvbihhZGRyZXNzIGluZGV4ZWQgX2NyZWF0b3IsIHVpbnQyNTYgX3Rva2VuSWQsIHVpbnQyNTYgX3RpbWVzdGFtcCk7CgogIC8vIFB1cmNoYXNpbmcgY2FwcyBmb3IgZGV0ZXJtaW5pbmcgbmV4dCBwcmljZQogIHVpbnQyNTYgcHJpdmF0ZSBmaXJzdENhcCAgPSAwLjAyIGV0aGVyOwogIHVpbnQyNTYgcHJpdmF0ZSBzZWNvbmRDYXAgPSAwLjUgZXRoZXI7CiAgdWludDI1NiBwcml2YXRlIHRoaXJkQ2FwICA9IDIuMCBldGhlcjsKICB1aW50MjU2IHByaXZhdGUgZmluYWxDYXAgID0gNS4wIGV0aGVyOwoKICAvLyBTdHJ1Y3QgdG8gc3RvcmUgTWVtZSBkYXRhCiAgc3RydWN0IE1lbWUgewogICAgdWludDI1NiBwcmljZTsgICAgICAgICAvLyBDdXJyZW50IHByaWNlIG9mIHRoZSBpdGVtLgogICAgYWRkcmVzcyBvd25lcjsgICAgICAgICAvLyBDdXJyZW50IG93bmVyIG9mIHRoZSBpdGVtLgogICAgYWRkcmVzcyBjcmVhdG9yOyAgICAgICAvLyBBZGRyZXNzIHRoYXQgY3JlYXRlZCBkYXQgYm9pLgogIH0KICAKICBmdW5jdGlvbiBFY29ub21lbWUoKSBwdWJsaWMgewogICAgc3VibWlzc2lvblByaWNlID0gMSBldGhlciAvIDEwMDsKICB9CgovKiogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBCdXlpbmcgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICoqLwoKICAvKioKICAqIEBkZXYgUHVyY2hhc2UgbWVtZSBmcm9tIHByZXZpb3VzIG93bmVyCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBvZiB0b2tlbgogICovCiAgZnVuY3Rpb24gYnV5VG9rZW4odWludDI1NiBfdG9rZW5JZCkgcHVibGljIAogICAgcGF5YWJsZQogIHsKICAgIC8vIGdldCBkYXRhIGZyb20gc3RvcmFnZQogICAgTWVtZSBzdG9yYWdlIG1lbWUgPSBtZW1lRGF0YVtfdG9rZW5JZF07CiAgICB1aW50MjU2IHByaWNlID0gbWVtZS5wcmljZTsKICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBtZW1lLm93bmVyOwogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICB1aW50MjU2IGV4Y2VzcyA9IG1zZy52YWx1ZS5zdWIocHJpY2UpOwoKICAgIC8vIHJldmVydCBjaGVja3MKICAgIHJlcXVpcmUocHJpY2UgPiAwKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByaWNlKTsKICAgIHJlcXVpcmUob2xkT3duZXIgIT0gbXNnLnNlbmRlcik7CiAgICAKICAgIHVpbnQyNTYgZGV2Q3V0ID0gcHJpY2UubXVsKDMpLmRpdigxMDApOwogICAgZGV2ZWxvcGVyQ3V0ID0gZGV2ZWxvcGVyQ3V0LmFkZChkZXZDdXQpOwoKICAgIHVpbnQyNTYgY3JlYXRvckN1dCA9IHByaWNlLmRpdigxMDApOwogICAgY3JlYXRvckJhbGFuY2VzW21lbWUuY3JlYXRvcl0gPSBjcmVhdG9yQmFsYW5jZXNbbWVtZS5jcmVhdG9yXS5hZGQoY3JlYXRvckN1dCk7CgogICAgdWludDI1NiB0cmFuc2ZlckFtb3VudCA9IHByaWNlLnN1YihjcmVhdG9yQ3V0ICsgZGV2Q3V0KTsKCiAgICB0cmFuc2ZlclRva2VuKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwoKICAgIC8vIHJhaXNlIGV2ZW50CiAgICBlbWl0IFB1cmNoYXNlKF90b2tlbklkLCBuZXdPd25lciwgb2xkT3duZXIsIHByaWNlKTsKCiAgICAvLyBzZXQgbmV3IHByaWNlCiAgICBtZW1lLnByaWNlID0gZ2V0TmV4dFByaWNlKHByaWNlKTsKCiAgICAvLyBTYWZlIHRyYW5zZmVyIHRvIG93bmVyIHRoYXQgd2lsbCBieXBhc3MgdGhyb3dzIG9uIGJhZCBjb250cmFjdHMuCiAgICBzYWZlVHJhbnNmZXIob2xkT3duZXIsIHRyYW5zZmVyQW1vdW50KTsKICAgIAogICAgLy8gU2VuZCByZWZ1bmQgdG8gYnV5ZXIgaWYgbmVlZGVkCiAgICBpZiAoZXhjZXNzID4gMCkgewogICAgICBuZXdPd25lci50cmFuc2ZlcihleGNlc3MpOwogICAgfQogICAgCiAgICAvLyBJZiBzYWZlVHJhbnNmZXIgZGlkIG5vdCBzdWNjZWVkLCB3ZSB0YWtlIGxvc3QgZnVuZHMgaW50byBvdXIgY3V0IGFuZCB3aWxsIHJldHVybiBtYW51YWxseSBpZiBpdCB3YXNuJ3QgbWFsaWNpb3VzLgogICAgLy8gT3RoZXJ3aXNlIHdlJ3JlIGdvaW5nIG91dCBmb3Igc29tZSBiZWVycy4KICAgIGlmIChhZGRyZXNzKHRoaXMpLmJhbGFuY2UgPiBlbmRpbmdCYWxhbmNlICsgY3JlYXRvckN1dCArIGRldkN1dCkgc3VibWlzc2lvblBvb2wgKz0gdHJhbnNmZXJBbW91bnQ7CiAgICAKICAgIGVuZGluZ0JhbGFuY2UgPSBhZGRyZXNzKHRoaXMpLmJhbGFuY2U7CiAgfQoKICAvKioKICAgKiBAZGV2IHNhZmVUcmFuc2ZlciBhbGxvd3MgYSBwdXNoIHRvIGFuIGFkZHJlc3MgdGhhdCB3aWxsIG5vdCByZXZlcnQgaWYgdGhlIGFkZHJlc3MgdGhyb3dzLgogICAqIEBwYXJhbSBfb2xkT3duZXIgVGhlIG93bmVyIHRoYXQgZnVuZHMgd2lsbCBiZSB0cmFuc2ZlcnJlZCB0by4KICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIGZ1bmRzIHRoYXQgd2lsbCBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlcihhZGRyZXNzIF9vbGRPd25lciwgdWludDI1NiBfYW1vdW50KSBpbnRlcm5hbCB7IAogICAgYXNzZW1ibHkgeyAKICAgICAgICBsZXQgeCA6PSBtbG9hZCgweDQwKSAKICAgICAgICBsZXQgc3VjY2VzcyA6PSBjYWxsKAogICAgICAgICAgICA1MDAwLCAKICAgICAgICAgICAgX29sZE93bmVyLCAKICAgICAgICAgICAgX2Ftb3VudCwgCiAgICAgICAgICAgIHgsIAogICAgICAgICAgICAweDAsIAogICAgICAgICAgICB4LCAKICAgICAgICAgICAgMHgyMCkgCiAgICAgICAgbXN0b3JlKDB4NDAsYWRkKHgsMHgyMCkpIAogICAgfSAKICB9CgogIC8qKgogICogQGRldiBUcmFuc2ZlciBUb2tlbiBmcm9tIFByZXZpb3VzIE93bmVyIHRvIE5ldyBPd25lcgogICogQHBhcmFtIF9mcm9tIHByZXZpb3VzIG93bmVyIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gbmV3IG93bmVyIGFkZHJlc3MKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRva2VuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlclRva2VuKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB7CiAgICAvLyBjaGVjayB0b2tlbiBleGlzdHMKICAgIHJlcXVpcmUodG9rZW5FeGlzdHMoX3Rva2VuSWQpKTsKCiAgICAvLyBtYWtlIHN1cmUgcHJldmlvdXMgb3duZXIgaXMgY29ycmVjdAogICAgcmVxdWlyZShtZW1lRGF0YVtfdG9rZW5JZF0ub3duZXIgPT0gX2Zyb20pOwoKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcyh0aGlzKSk7CgogICAgLy8gY2xlYXIgYXBwcm92YWxzIGxpbmtlZCB0byB0aGlzIHRva2VuCiAgICBjbGVhckFwcHJvdmFsKF9mcm9tLCBfdG9rZW5JZCk7CgogICAgLy8gcmVtb3ZlIHRva2VuIGZyb20gcHJldmlvdXMgb3duZXIKICAgIHJlbW92ZVRva2VuKF9mcm9tLCBfdG9rZW5JZCk7CgogICAgLy8gdXBkYXRlIG93bmVyIGFuZCBhZGQgdG9rZW4gdG8gbmV3IG93bmVyCiAgICBhZGRUb2tlbihfdG8sIF90b2tlbklkKTsKCiAgICAvLyByYWlzZSBldmVudAogICAgZW1pdCBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQogIAogIC8qKgogICogQGRldiBEZXRlcm1pbmVzIG5leHQgcHJpY2Ugb2YgdG9rZW4KICAqIEBwYXJhbSBfcHJpY2UgdWludDI1NiBJRCBvZiBjdXJyZW50IHByaWNlCiAgKi8KICBmdW5jdGlvbiBnZXROZXh0UHJpY2UgKHVpbnQyNTYgX3ByaWNlKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYgX25leHRQcmljZSkgewogICAgaWYgKF9wcmljZSA8IGZpcnN0Q2FwKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDIwMCkuZGl2KDk1KTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgc2Vjb25kQ2FwKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDEzNSkuZGl2KDk2KTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgdGhpcmRDYXApIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTI1KS5kaXYoOTcpOwogICAgfSBlbHNlIGlmIChfcHJpY2UgPCBmaW5hbENhcCkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgxMTcpLmRpdig5Nyk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgxMTUpLmRpdig5OCk7CiAgICB9CiAgfQoKLyoqICoqKioqKioqKioqKioqKioqKioqKioqIFBsYXllciBBZG1pbmlzdHJhdGl2ZSAqKioqKioqKioqKioqKioqKioqKioqKioqKiAqKi8KCiAgLyoqCiAgKiBAZGV2IFVzZWQgYnkgcG9zdGVycyB0byBzdWJtaXQgYW5kIGNyZWF0ZSBhIG5ldyBtZW1lLgogICovCiAgZnVuY3Rpb24gY3JlYXRlVG9rZW4oKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgIC8vIG1ha2Ugc3VyZSB0b2tlbiBoYXNuJ3QgYmVlbiB1c2VkIHlldAogICAgdWludDI1NiB0b2tlbklkID0gdG90YWxUb2tlbnMgKyAxOwogICAgcmVxdWlyZShtZW1lRGF0YVt0b2tlbklkXS5wcmljZSA9PSAwKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID09IHN1Ym1pc3Npb25QcmljZSk7CiAgICBzdWJtaXNzaW9uUG9vbCArPSBzdWJtaXNzaW9uUHJpY2U7CiAgICBlbmRpbmdCYWxhbmNlID0gYWRkcmVzcyh0aGlzKS5iYWxhbmNlOwogICAgCiAgICAvLyBjcmVhdGUgbmV3IHRva2VuCiAgICBtZW1lRGF0YVt0b2tlbklkXSA9IE1lbWUoMSBldGhlciAvIDEwMCwgbXNnLnNlbmRlciwgbXNnLnNlbmRlcik7CgogICAgLy8gbWludCBuZXcgdG9rZW4KICAgIF9taW50KG1zZy5zZW5kZXIsIHRva2VuSWQpOwogICAgCiAgICBlbWl0IENyZWF0aW9uKG1zZy5zZW5kZXIsIHRva2VuSWQsIGJsb2NrLnRpbWVzdGFtcCk7CiAgfQoKICAvKioKICAqIEBkZXYgV2l0aGRyYXcgYW55b25lJ3MgY3JlYXRvciBiYWxhbmNlLgogICogQHBhcmFtIF9iZW5lZmljaWFyeSBUaGUgcGVyc29uIHdob3NlIGJhbGFuY2Ugc2hhbGwgYmUgc2VudCB0byB0aGVtLgogICovCiAgZnVuY3Rpb24gd2l0aGRyYXdCYWxhbmNlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBleHRlcm5hbCB7CiAgICB1aW50MjU2IHBheW91dCA9IGNyZWF0b3JCYWxhbmNlc1tfYmVuZWZpY2lhcnldOwogICAgY3JlYXRvckJhbGFuY2VzW19iZW5lZmljaWFyeV0gPSAwOwogICAgX2JlbmVmaWNpYXJ5LnRyYW5zZmVyKHBheW91dCk7CiAgICBlbmRpbmdCYWxhbmNlID0gYWRkcmVzcyh0aGlzKS5iYWxhbmNlOwogIH0KCi8qKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEZyb250ZW5kICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKiovCgogIC8qKgogICogQGRldiBSZXR1cm4gYWxsIHJlbGV2YW50IGRhdGEgZm9yIGEgbWVtZS4KICAqIEBwYXJhbSBfdG9rZW5JZCBVbmlxdWUgbWVtZSBJRC4KICAqLwogIGZ1bmN0aW9uIGdldE1lbWVEYXRhICh1aW50MjU2IF90b2tlbklkKSBleHRlcm5hbCB2aWV3IAogIHJldHVybnMgKGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSwgdWludDI1NiBfbmV4dFByaWNlLCBhZGRyZXNzIF9jcmVhdG9yKSAKICB7CiAgICBNZW1lIG1lbW9yeSBtZW1lID0gbWVtZURhdGFbX3Rva2VuSWRdOwogICAgcmV0dXJuIChtZW1lLm93bmVyLCBtZW1lLnByaWNlLCBnZXROZXh0UHJpY2UobWVtZS5wcmljZSksIG1lbWUuY3JlYXRvcik7CiAgfQoKICAvKioKICAqIEBkZXYgQ2hlY2sgdGhlIGNyZWF0b3IgYmFsYW5jZSBvZiBhIGNlcnRhaW4gYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gY2hlY2sgdGhlIGJhbGFuY2Ugb2YuCiAgKi8KICBmdW5jdGlvbiBjaGVja0JhbGFuY2UoYWRkcmVzcyBfb3duZXIpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGNyZWF0b3JCYWxhbmNlc1tfb3duZXJdOwogIH0KCiAgLyoqCiAgKiBAZGV2IERldGVybWluZXMgaWYgdG9rZW4gZXhpc3RzIGJ5IGNoZWNraW5nIGl0J3MgcHJpY2UKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRva2VuCiAgKi8KICBmdW5jdGlvbiB0b2tlbkV4aXN0cyAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCBfZXhpc3RzKSB7CiAgICByZXR1cm4gbWVtZURhdGFbX3Rva2VuSWRdLnByaWNlID4gMDsKICB9CiAgCi8qKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBPbmx5IEFkbWluICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKiovCiAgCiAgLyoqCiAgICogQGRldiBXaXRoZHJhdyBkZXYncyBjdXQKICAgKiBAcGFyYW0gX2RldkFtb3VudCBUaGUgYW1vdW50IHRvIHdpdGhkcmF3IGZyb20gZGV2ZWxvcGVyIGN1dC4KICAgKiBAcGFyYW0gX3N1Ym1pc3Npb25BbW91bnQgVGhlIGFtb3VudCB0byB3aXRoZHJhdyBmb3JtIHN1Ym1pc3Npb24gcG9vbC4KICAqLwogIGZ1bmN0aW9uIHdpdGhkcmF3KHVpbnQyNTYgX2RldkFtb3VudCwgdWludDI1NiBfc3VibWlzc2lvbkFtb3VudCkgcHVibGljIG9ubHlBZG1pbigpIHsKICAgIGlmIChfZGV2QW1vdW50ID09IDApIHsgCiAgICAgIF9kZXZBbW91bnQgPSBkZXZlbG9wZXJDdXQ7IAogICAgfQogICAgaWYgKF9zdWJtaXNzaW9uQW1vdW50ID09IDApIHsKICAgICAgX3N1Ym1pc3Npb25BbW91bnQgPSBzdWJtaXNzaW9uUG9vbDsKICAgIH0KICAgIGRldmVsb3BlckN1dCA9IGRldmVsb3BlckN1dC5zdWIoX2RldkFtb3VudCk7CiAgICBzdWJtaXNzaW9uUG9vbCA9IHN1Ym1pc3Npb25Qb29sLnN1Yihfc3VibWlzc2lvbkFtb3VudCk7CiAgICBvd25lci50cmFuc2ZlcihfZGV2QW1vdW50ICsgX3N1Ym1pc3Npb25BbW91bnQpOwogICAgZW5kaW5nQmFsYW5jZSA9IGFkZHJlc3ModGhpcykuYmFsYW5jZTsKICB9CgogIC8qKgogICAqIEBkZXYgQWRtaW4gbWF5IHJlZnVuZCBhIHN1Ym1pc3Npb24gdG8gYSB1c2VyLgogICAqIEBwYXJhbSBfcmVmdW5kZWUgVGhlIGFkZHJlc3MgdG8gcmVmdW5kLgogICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2Ygd2VpIHRvIHJlZnVuZC4KICAqLwogIGZ1bmN0aW9uIHJlZnVuZFN1Ym1pc3Npb24oYWRkcmVzcyBfcmVmdW5kZWUsIHVpbnQyNTYgX2Ftb3VudCkgZXh0ZXJuYWwgb25seUFkbWluKCkgewogICAgc3VibWlzc2lvblBvb2wgPSBzdWJtaXNzaW9uUG9vbC5zdWIoX2Ftb3VudCk7CiAgICBfcmVmdW5kZWUudHJhbnNmZXIoX2Ftb3VudCk7CiAgICBlbmRpbmdCYWxhbmNlID0gYWRkcmVzcyh0aGlzKS5iYWxhbmNlOwogIH0KICAKICAvKioKICAgKiBAZGV2IFJlZnVuZCBhIHN1Ym1pc3Npb24gYnkgYSBzcGVjaWZpYyB0b2tlbklkLgogICAqIEBwYXJhbSBfdG9rZW5JZCBUaGUgdW5pcXVlIElkIG9mIHRoZSB0b2tlbiB0byBiZSByZWZ1bmRlZCBhdCBjdXJyZW50IHN1Ym1pc3Npb24gcHJpY2UuCiAgKi8KICBmdW5jdGlvbiByZWZ1bmRCeVRva2VuKHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsIG9ubHlBZG1pbigpIHsKICAgIHN1Ym1pc3Npb25Qb29sID0gc3VibWlzc2lvblBvb2wuc3ViKHN1Ym1pc3Npb25QcmljZSk7CiAgICBtZW1lRGF0YVtfdG9rZW5JZF0uY3JlYXRvci50cmFuc2ZlcihzdWJtaXNzaW9uUHJpY2UpOwogICAgZW5kaW5nQmFsYW5jZSA9IGFkZHJlc3ModGhpcykuYmFsYW5jZTsKICB9CgogIC8qKgogICAqIEBkZXYgQ2hhbmdlIGhvdyBtdWNoIGl0IGNvc3RzIHRvIHN1Ym1pdCBhIG1lbWUuCiAgICogQHBhcmFtIF9uZXdQcmljZSBUaGUgbmV3IHByaWNlIG9mIHN1Ym1pc3Npb24uCiAgKi8KICBmdW5jdGlvbiBjaGFuZ2VTdWJtaXNzaW9uUHJpY2UodWludDI1NiBfbmV3UHJpY2UpIGV4dGVybmFsIG9ubHlBZG1pbigpIHsKICAgIHN1Ym1pc3Npb25QcmljZSA9IF9uZXdQcmljZTsKICB9CgoKLyoqICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIE1vZGlmaWVycyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqKi8KCiAgLyoqCiAgKiBAZGV2IEd1YXJhbnRlZXMgbXNnLnNlbmRlciBpcyBvd25lciBvZiB0aGUgZ2l2ZW4gdG9rZW4KICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byB2YWxpZGF0ZSBpdHMgb3duZXJzaGlwIGJlbG9uZ3MgdG8gbXNnLnNlbmRlcgogICovCiAgbW9kaWZpZXIgb25seU93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgewogICAgcmVxdWlyZShvd25lck9mKF90b2tlbklkKSA9PSBtc2cuc2VuZGVyKTsKICAgIF87CiAgfQoKLyoqICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRVJDNzIxICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqKi8KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMgc3RvcmVkIGJ5IHRoZSBjb250cmFjdAogICogQHJldHVybiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgdG90YWwgYW1vdW50IG9mIHRva2VucwogICovCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gdG90YWxUb2tlbnM7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyB0byBxdWVyeSB0aGUgYmFsYW5jZSBvZgogICogQHJldHVybiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcwogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gb3duZWRUb2tlbnNbX293bmVyXS5sZW5ndGg7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgbGlzdCBvZiB0b2tlbnMgb3duZWQgYnkgYSBnaXZlbiBhZGRyZXNzCiAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRva2VucyBvZgogICogQHJldHVybiB1aW50MjU2W10gcmVwcmVzZW50aW5nIHRoZSBsaXN0IG9mIHRva2VucyBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MKICAqLwogIGZ1bmN0aW9uIHRva2Vuc09mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2W10pIHsKICAgIHJldHVybiBvd25lZFRva2Vuc1tfb3duZXJdOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIG93bmVyIG9mIHRoZSBzcGVjaWZpZWQgdG9rZW4gSUQKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBxdWVyeSB0aGUgb3duZXIgb2YKICAqIEByZXR1cm4gb3duZXIgYWRkcmVzcyBjdXJyZW50bHkgbWFya2VkIGFzIHRoZSBvd25lciBvZiB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAqLwogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcykgewogICAgYWRkcmVzcyBvd25lciA9IHRva2VuT3duZXJbX3Rva2VuSWRdOwogICAgcmV0dXJuIG93bmVyOwogIH0KCiAgLyoqCiAgICogQGRldiBHZXRzIHRoZSBhcHByb3ZlZCBhZGRyZXNzIHRvIHRha2Ugb3duZXJzaGlwIG9mIGEgZ2l2ZW4gdG9rZW4gSUQKICAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gcXVlcnkgdGhlIGFwcHJvdmFsIG9mCiAgICogQHJldHVybiBhZGRyZXNzIGN1cnJlbnRseSBhcHByb3ZlZCB0byB0YWtlIG93bmVyc2hpcCBvZiB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlZEZvcih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzKSB7CiAgICByZXR1cm4gdG9rZW5BcHByb3ZhbHNbX3Rva2VuSWRdOwogIH0KCiAgLyoqCiAgKiBAZGV2IFRyYW5zZmVycyB0aGUgb3duZXJzaGlwIG9mIGEgZ2l2ZW4gdG9rZW4gSUQgdG8gYW5vdGhlciBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gcmVjZWl2ZSB0aGUgb3duZXJzaGlwIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIG9ubHlPd25lck9mKF90b2tlbklkKSB7CiAgICBjbGVhckFwcHJvdmFsQW5kVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAqIEBkZXYgQXBwcm92ZXMgYW5vdGhlciBhZGRyZXNzIHRvIGNsYWltIGZvciB0aGUgb3duZXJzaGlwIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90byBhZGRyZXNzIHRvIGJlIGFwcHJvdmVkIGZvciB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBiZSBhcHByb3ZlZAogICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIG9ubHlPd25lck9mKF90b2tlbklkKSB7CiAgICBhZGRyZXNzIG93bmVyID0gb3duZXJPZihfdG9rZW5JZCk7CiAgICByZXF1aXJlKF90byAhPSBvd25lcik7CiAgICBpZiAoYXBwcm92ZWRGb3IoX3Rva2VuSWQpICE9IDAgfHwgX3RvICE9IDApIHsKICAgICAgdG9rZW5BcHByb3ZhbHNbX3Rva2VuSWRdID0gX3RvOwogICAgICBlbWl0IEFwcHJvdmFsKG93bmVyLCBfdG8sIF90b2tlbklkKTsKICAgIH0KICB9CgogIC8qKgogICogQGRldiBDbGFpbXMgdGhlIG93bmVyc2hpcCBvZiBhIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gYmVpbmcgY2xhaW1lZCBieSB0aGUgbXNnLnNlbmRlcgogICovCiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgcmVxdWlyZShpc0FwcHJvdmVkRm9yKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICBjbGVhckFwcHJvdmFsQW5kVHJhbnNmZXIob3duZXJPZihfdG9rZW5JZCksIG1zZy5zZW5kZXIsIF90b2tlbklkKTsKICB9CgogIC8qKgogICAqIEBkZXYgVGVsbHMgd2hldGhlciB0aGUgbXNnLnNlbmRlciBpcyBhcHByb3ZlZCBmb3IgdGhlIGdpdmVuIHRva2VuIElEIG9yIG5vdAogICAqIFRoaXMgZnVuY3Rpb24gaXMgbm90IHByaXZhdGUgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGluIGZ1cnRoZXIgaW1wbGVtZW50YXRpb25zIGxpa2UgdGhlIG9wZXJhdGFibGUgRVJDNzIxCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIG9mIHRoZSBvd25lciB0byBxdWVyeSB0aGUgYXBwcm92YWwgb2YKICAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gcXVlcnkgdGhlIGFwcHJvdmFsIG9mCiAgICogQHJldHVybiBib29sIHdoZXRoZXIgdGhlIG1zZy5zZW5kZXIgaXMgYXBwcm92ZWQgZm9yIHRoZSBnaXZlbiB0b2tlbiBJRCBvciBub3QKICAgKi8KICBmdW5jdGlvbiBpc0FwcHJvdmVkRm9yKGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBhcHByb3ZlZEZvcihfdG9rZW5JZCkgPT0gX293bmVyOwogIH0KICAKICAvKioKICAqIEBkZXYgSW50ZXJuYWwgZnVuY3Rpb24gdG8gY2xlYXIgY3VycmVudCBhcHByb3ZhbCBhbmQgdHJhbnNmZXIgdGhlIG93bmVyc2hpcCBvZiBhIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgKiBAcGFyYW0gX3RvIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdGhlIHRva2VuIHRvCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAqLwogIGZ1bmN0aW9uIGNsZWFyQXBwcm92YWxBbmRUcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF90byAhPSBvd25lck9mKF90b2tlbklkKSk7CiAgICByZXF1aXJlKG93bmVyT2YoX3Rva2VuSWQpID09IF9mcm9tKTsKCiAgICBjbGVhckFwcHJvdmFsKF9mcm9tLCBfdG9rZW5JZCk7CiAgICByZW1vdmVUb2tlbihfZnJvbSwgX3Rva2VuSWQpOwogICAgYWRkVG9rZW4oX3RvLCBfdG9rZW5JZCk7CiAgICBlbWl0IFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICB9CgogIC8qKgogICogQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0byBjbGVhciBjdXJyZW50IGFwcHJvdmFsIG9mIGEgZ2l2ZW4gdG9rZW4gSUQKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICovCiAgZnVuY3Rpb24gY2xlYXJBcHByb3ZhbChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICByZXF1aXJlKG93bmVyT2YoX3Rva2VuSWQpID09IF9vd25lcik7CiAgICB0b2tlbkFwcHJvdmFsc1tfdG9rZW5JZF0gPSAwOwogICAgZW1pdCBBcHByb3ZhbChfb3duZXIsIDAsIF90b2tlbklkKTsKICB9CgoKICAgIC8qKgogICogQGRldiBNaW50IHRva2VuIGZ1bmN0aW9uCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCBvd24gdGhlIG1pbnRlZCB0b2tlbgogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIG1pbnRlZCBieSB0aGUgbXNnLnNlbmRlcgogICovCiAgZnVuY3Rpb24gX21pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGludGVybmFsIHsKICAgIGFkZFRva2VuKF90bywgX3Rva2VuSWQpOwogICAgZW1pdCBUcmFuc2ZlcigweDAsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGFkZCBhIHRva2VuIElEIHRvIHRoZSBsaXN0IG9mIGEgZ2l2ZW4gYWRkcmVzcwogICogQHBhcmFtIF90byBhZGRyZXNzIHJlcHJlc2VudGluZyB0aGUgbmV3IG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIGFkZGVkIHRvIHRoZSB0b2tlbnMgbGlzdCBvZiB0aGUgZ2l2ZW4gYWRkcmVzcwogICovCiAgZnVuY3Rpb24gYWRkVG9rZW4oYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgewogICAgcmVxdWlyZSh0b2tlbk93bmVyW190b2tlbklkXSA9PSBhZGRyZXNzKDApKTsKICAgIHRva2VuT3duZXJbX3Rva2VuSWRdID0gX3RvOwogICAgbWVtZURhdGFbX3Rva2VuSWRdLm93bmVyID0gX3RvOwogICAgCiAgICB1aW50MjU2IGxlbmd0aCA9IGJhbGFuY2VPZihfdG8pOwogICAgb3duZWRUb2tlbnNbX3RvXS5wdXNoKF90b2tlbklkKTsKICAgIG93bmVkVG9rZW5zSW5kZXhbX3Rva2VuSWRdID0gbGVuZ3RoOwogICAgdG90YWxUb2tlbnMgPSB0b3RhbFRva2Vucy5hZGQoMSk7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZXJuYWwgZnVuY3Rpb24gdG8gcmVtb3ZlIGEgdG9rZW4gSUQgZnJvbSB0aGUgbGlzdCBvZiBhIGdpdmVuIGFkZHJlc3MKICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIHJlcHJlc2VudGluZyB0aGUgcHJldmlvdXMgb3duZXIgb2YgdGhlIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgcmVtb3ZlZCBmcm9tIHRoZSB0b2tlbnMgbGlzdCBvZiB0aGUgZ2l2ZW4gYWRkcmVzcwogICovCiAgZnVuY3Rpb24gcmVtb3ZlVG9rZW4oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICByZXF1aXJlKG93bmVyT2YoX3Rva2VuSWQpID09IF9mcm9tKTsKCiAgICB1aW50MjU2IHRva2VuSW5kZXggPSBvd25lZFRva2Vuc0luZGV4W190b2tlbklkXTsKICAgIHVpbnQyNTYgbGFzdFRva2VuSW5kZXggPSBiYWxhbmNlT2YoX2Zyb20pLnN1YigxKTsKICAgIHVpbnQyNTYgbGFzdFRva2VuID0gb3duZWRUb2tlbnNbX2Zyb21dW2xhc3RUb2tlbkluZGV4XTsKCiAgICB0b2tlbk93bmVyW190b2tlbklkXSA9IDA7CiAgICBvd25lZFRva2Vuc1tfZnJvbV1bdG9rZW5JbmRleF0gPSBsYXN0VG9rZW47CiAgICBvd25lZFRva2Vuc1tfZnJvbV1bbGFzdFRva2VuSW5kZXhdID0gMDsKICAgIC8vIE5vdGUgdGhhdCB0aGlzIHdpbGwgaGFuZGxlIHNpbmdsZS1lbGVtZW50IGFycmF5cy4gSW4gdGhhdCBjYXNlLCBib3RoIHRva2VuSW5kZXggYW5kIGxhc3RUb2tlbkluZGV4IGFyZSBnb2luZyB0bwogICAgLy8gYmUgemVyby4gVGhlbiB3ZSBjYW4gbWFrZSBzdXJlIHRoYXQgd2Ugd2lsbCByZW1vdmUgX3Rva2VuSWQgZnJvbSB0aGUgb3duZWRUb2tlbnMgbGlzdCBzaW5jZSB3ZSBhcmUgZmlyc3Qgc3dhcHBpbmcKICAgIC8vIHRoZSBsYXN0VG9rZW4gdG8gdGhlIGZpcnN0IHBvc2l0aW9uLCBhbmQgdGhlbiBkcm9wcGluZyB0aGUgZWxlbWVudCBwbGFjZWQgaW4gdGhlIGxhc3QgcG9zaXRpb24gb2YgdGhlIGxpc3QKCiAgICBvd25lZFRva2Vuc1tfZnJvbV0ubGVuZ3RoLS07CiAgICBvd25lZFRva2Vuc0luZGV4W190b2tlbklkXSA9IDA7CiAgICBvd25lZFRva2Vuc0luZGV4W2xhc3RUb2tlbl0gPSB0b2tlbkluZGV4OwogICAgdG90YWxUb2tlbnMgPSB0b3RhbFRva2Vucy5zdWIoMSk7CiAgfQoKICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nIF9uYW1lKSB7CiAgICByZXR1cm4gIkVjb25vbWVtZSBNZW1lIjsKICB9CgogIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZyBfc3ltYm9sKSB7CiAgICByZXR1cm4gIkVDTUUiOwogIH0KCn0='.
	

]
