Class {
	#name : #SRT456c4350EEFd17315713b265D8BE8b6063A5Fab8,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT456c4350EEFd17315713b265D8BE8b6063A5Fab8 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQogIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPiAwKTsKICAgIHVpbnQgYyA9IGEgLyBiOwogICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7CiAgICByZXR1cm4gYzsKICB9CiAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9CiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgaWYgKCFhc3NlcnRpb24pIHsKICAgICAgdGhyb3c7CiAgICB9CiAgfQp9CmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgfQogICAgfQp9CmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGJvb2wgcHVibGljIHN0b3BwZWQ7CgogIG1vZGlmaWVyIHN0b3BJbkVtZXJnZW5jeSB7CiAgICBpZiAoc3RvcHBlZCkgewogICAgICB0aHJvdzsKICAgIH0KICAgIF87CiAgfQogIG1vZGlmaWVyIG9ubHlJbkVtZXJnZW5jeSB7CiAgICBpZiAoIXN0b3BwZWQpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICBfOwogIH0KCiAgLy8gY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbWVyZ2VuY3ksIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICBmdW5jdGlvbiBlbWVyZ2VuY3lTdG9wKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIHN0b3BwZWQgPSB0cnVlOwogIH0KCiAgLy8gY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbmQgb2YgZW1lcmdlbmN5LCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogIGZ1bmN0aW9uIHJlbGVhc2UoKSBleHRlcm5hbCBvbmx5T3duZXIgb25seUluRW1lcmdlbmN5IHsKICAgIHN0b3BwZWQgPSBmYWxzZTsKICB9Cgp9CmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CmNvbnRyYWN0IFB1bGxQYXltZW50IHsKCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgcGF5bWVudHM7CgogIGV2ZW50IExvZ1JlZnVuZEVUSChhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKCgogIC8qKgogICogIFN0b3JlIHNlbnQgYW1vdW50IGFzIGNyZWRpdCB0byBiZSBwdWxsZWQsIGNhbGxlZCBieSBwYXllcgogICoqLwogIGZ1bmN0aW9uIGFzeW5jU2VuZChhZGRyZXNzIGRlc3QsIHVpbnQgYW1vdW50KSBpbnRlcm5hbCB7CiAgICBwYXltZW50c1tkZXN0XSA9IHBheW1lbnRzW2Rlc3RdLmFkZChhbW91bnQpOwogIH0KCiAgLy8gd2l0aGRyYXcgYWNjdW11bGF0ZWQgYmFsYW5jZSwgY2FsbGVkIGJ5IHBheWVlCiAgZnVuY3Rpb24gd2l0aGRyYXdQYXltZW50cygpIHsKICAgIGFkZHJlc3MgcGF5ZWUgPSBtc2cuc2VuZGVyOwogICAgdWludCBwYXltZW50ID0gcGF5bWVudHNbcGF5ZWVdOwoKICAgIGlmIChwYXltZW50ID09IDApIHsKICAgICAgdGhyb3c7CiAgICB9CgogICAgaWYgKHRoaXMuYmFsYW5jZSA8IHBheW1lbnQpIHsKICAgICAgdGhyb3c7CiAgICB9CgogICAgcGF5bWVudHNbcGF5ZWVdID0gMDsKCiAgICBpZiAoIXBheWVlLnNlbmQocGF5bWVudCkpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICBMb2dSZWZ1bmRFVEgocGF5ZWUscGF5bWVudCk7CiAgfQp9CmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CgogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CgogIC8qCiAgICogRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2sKICAqLwogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICBpZihtc2cuZGF0YS5sZW5ndGggPCBzaXplICsgNCkgewogICAgICAgdGhyb3c7CiAgICAgfQogICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cn0KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBCYXNpY1Rva2VuLCBFUkMyMCB7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQp9CmNvbnRyYWN0IFNnZ0NvaW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlNnZ0NvaW4iOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlNHRyI7CiAgdWludCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSA2OwoKCiAgLy8gQ29uc3RydWN0b3IKICBmdW5jdGlvbiBTZ2dDb2luKCkgewogICAgICB0b3RhbFN1cHBseSA9IDEwMDAwMDAwMDAwMDAwMDA7ICAgICAvLyBvbmUgYmlsbGlvbgogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHRvdGFsU3VwcGx5OyAvLyBTZW5kIGFsbCB0b2tlbnMgdG8gb3duZXIKICB9CgogIC8qKgogICAqICBCdXJuIGF3YXkgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgU2dnQ29pbiB0b2tlbnMKICAgKi8KICBmdW5jdGlvbiBidXJuKHVpbnQgX3ZhbHVlKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCAweDAsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9Ci8qCiAgQ3Jvd2RzYWxlIFNtYXJ0IENvbnRyYWN0IGZvciB0aGUgU3R1ZmZHb0dvIFByb2plY3QKICBDcmVhdGVkIGFuZCBkZXBsb3llZCBieSBEQUFQUFMgY29tcGFueQogIFRoaXMgc21hcnQgY29udHJhY3QgY29sbGVjdHMgRVRILCBhbmQgaW4gcmV0dXJuIGVtaXRzIFNnZ0NvaW4gdG9rZW5zIHRvIHRoZSBiYWNrZXJzCiovCmNvbnRyYWN0IENyb3dkc2FsZSBpcyBQYXVzYWJsZSwgUHVsbFBheW1lbnQgewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAJc3RydWN0IEJhY2tlciB7CgkJdWludCB3ZWlSZWNlaXZlZDsgLy8gQW1vdW50IG9mIEV0aGVyIGdpdmVuCgkJdWludCBjb2luU2VudDsKCX0KCgkvKgoJKiBDb25zdGFudHMKCSovCgl1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fQ0FQID0gNTAwMDAwMDAwMDsgICAgICAgICAgIC8vIG1pbjogNSwwMDAgU2dnQ29pbnMgPSAxIGV0aAoJdWludCBwdWJsaWMgY29uc3RhbnQgTUFYX0NBUCA9IDUwMDAwMDAwMDAwMDAwMDsgICAgICAvLyBtYXg6IDUwMCwwMDAsMDAwIFNnZ0NvaW5zID0gMTAwMDAwIGV0aAoJdWludCBwdWJsaWMgY29uc3RhbnQgTUlOX0lOVkVTVF9FVEhFUiA9IDEwMCBmaW5uZXk7ICAvLyAwLjEgZXRoCgl1aW50IHByaXZhdGUgY29uc3RhbnQgQ1JPV0RTQUxFX1BFUklPRCA9IDI4IGRheXM7ICAgIC8vIDQgd2Vla3MKCXVpbnQgcHVibGljIGNvbnN0YW50IENPSU5fUEVSX0VUSEVSID0gNTAwMDAwMDAwMDsgICAgLy8gNSwwMDAgU2dnQ29pbnMvRVRICgoKCS8qCgkqIFZhcmlhYmxlcwoJKi8KCS8qIFNnZ0NvaW4gY29udHJhY3QgcmVmZXJlbmNlICovCglTZ2dDb2luIHB1YmxpYyBjb2luOwogICAgLyogTXVsdGlzaWcgY29udHJhY3QgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIEV0aGVyICovCglhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZ0V0aGVyOwoJLyogTnVtYmVyIG9mIEV0aGVyIHJlY2VpdmVkICovCgl1aW50IHB1YmxpYyBldGhlclJlY2VpdmVkOwoJLyogTnVtYmVyIG9mIFNnZ0NvaW5zIHNlbnQgdG8gRXRoZXIgY29udHJpYnV0b3JzICovCgl1aW50IHB1YmxpYyBjb2luU2VudFRvRXRoZXI7CgkvKiBDcm93ZHNhbGUgc3RhcnQgdGltZSAqLwoJdWludCBwdWJsaWMgc3RhcnRUaW1lOwoJLyogQ3Jvd2RzYWxlIGVuZCB0aW1lICovCgl1aW50IHB1YmxpYyBlbmRUaW1lOwogCS8qIElzIGNyb3dkc2FsZSBzdGlsbCBvbiBnb2luZyAqLwoJYm9vbCBwdWJsaWMgY3Jvd2RzYWxlQ2xvc2VkOwoKCS8qIEJhY2tlcnMgRXRoZXIgaW5kZXhlZCBieSB0aGVpciBFdGhlcmV1bSBhZGRyZXNzICovCgltYXBwaW5nKGFkZHJlc3MgPT4gQmFja2VyKSBwdWJsaWMgYmFja2VyczsKCgoJLyoKCSogTW9kaWZpZXJzCgkqLwoJbW9kaWZpZXIgbWluQ2FwTm90UmVhY2hlZCgpIHsKCQlpZiAoKG5vdyA8IGVuZFRpbWUpIHx8IGNvaW5TZW50VG9FdGhlciA+PSBNSU5fQ0FQICkgdGhyb3c7CgkJXzsKCX0KCgltb2RpZmllciByZXNwZWN0VGltZUZyYW1lKCkgewoJCWlmICgobm93IDwgc3RhcnRUaW1lKSB8fCAobm93ID4gZW5kVGltZSApKSB0aHJvdzsKCQlfOwoJfQoKCS8qCgkgKiBFdmVudAoJKi8KCWV2ZW50IExvZ1JlY2VpdmVkRVRIKGFkZHJlc3MgYWRkciwgdWludCB2YWx1ZSk7CglldmVudCBMb2dDb2luc0VtaXRlZChhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludCBhbW91bnQpOwoKCS8qCgkgKiBDb25zdHJ1Y3RvcgoJKi8KCWZ1bmN0aW9uIENyb3dkc2FsZShhZGRyZXNzIF9TZ2dDb2luQWRkcmVzcywgYWRkcmVzcyBfdG8pIHsKCQljb2luID0gU2dnQ29pbihfU2dnQ29pbkFkZHJlc3MpOwoJCW11bHRpc2lnRXRoZXIgPSBfdG87Cgl9CgoJLyoKCSAqIFRoZSBmYWxsYmFjayBmdW5jdGlvbiBjb3JyZXNwb25kcyB0byBhIGRvbmF0aW9uIGluIEVUSAoJICovCglmdW5jdGlvbigpIHN0b3BJbkVtZXJnZW5jeSByZXNwZWN0VGltZUZyYW1lIHBheWFibGUgewoJCXJlY2VpdmVFVEgobXNnLnNlbmRlcik7Cgl9CgoJLyoKCSAqIFRvIGNhbGwgdG8gc3RhcnQgdGhlIGNyb3dkc2FsZQoJICovCglmdW5jdGlvbiBzdGFydCgpIG9ubHlPd25lciB7CgkJaWYgKHN0YXJ0VGltZSAhPSAwKSB0aHJvdzsgLy8gQ3Jvd2RzYWxlIHdhcyBhbHJlYWR5IHN0YXJ0ZWQKCgkJc3RhcnRUaW1lID0gbm93IDsKCQllbmRUaW1lID0gIG5vdyArIENST1dEU0FMRV9QRVJJT0Q7Cgl9CgoJLyoKCSAqCVJlY2VpdmVzIGEgZG9uYXRpb24gaW4gRXRoZXIKCSovCglmdW5jdGlvbiByZWNlaXZlRVRIKGFkZHJlc3MgYmVuZWZpY2lhcnkpIGludGVybmFsIHsKCQlpZiAobXNnLnZhbHVlIDwgTUlOX0lOVkVTVF9FVEhFUikgdGhyb3c7IC8vIERvbid0IGFjY2VwdCBmdW5kaW5nIHVuZGVyIGEgcHJlZGVmaW5lZCB0aHJlc2hvbGQKCgkJdWludCBjb2luVG9TZW5kID0gYm9udXMobXNnLnZhbHVlLm11bChDT0lOX1BFUl9FVEhFUikuZGl2KDEgZXRoZXIpKTsgLy8gQ29tcHV0ZSB0aGUgbnVtYmVyIG9mIFNnZ0NvaW4gdG8gc2VuZAoJCWlmIChjb2luVG9TZW5kLmFkZChjb2luU2VudFRvRXRoZXIpID4gTUFYX0NBUCkgdGhyb3c7CgoJCUJhY2tlciBiYWNrZXIgPSBiYWNrZXJzW2JlbmVmaWNpYXJ5XTsKCQljb2luLnRyYW5zZmVyKGJlbmVmaWNpYXJ5LCBjb2luVG9TZW5kKTsgLy8gVHJhbnNmZXIgU2dnQ29pbnMgcmlnaHQgbm93CgoJCWJhY2tlci5jb2luU2VudCA9IGJhY2tlci5jb2luU2VudC5hZGQoY29pblRvU2VuZCk7CgkJYmFja2VyLndlaVJlY2VpdmVkID0gYmFja2VyLndlaVJlY2VpdmVkLmFkZChtc2cudmFsdWUpOyAvLyBVcGRhdGUgdGhlIHRvdGFsIHdlaSBjb2xsZWN0ZWQgZHVyaW5nIHRoZSBjcm93ZGZ1bmRpbmcgZm9yIHRoaXMgYmFja2VyCgoJCWV0aGVyUmVjZWl2ZWQgPSBldGhlclJlY2VpdmVkLmFkZChtc2cudmFsdWUpOyAvLyBVcGRhdGUgdGhlIHRvdGFsIHdlaSBjb2xsZWN0ZWQgZHVyaW5nIHRoZSBjcm93ZGZ1bmRpbmcKCQljb2luU2VudFRvRXRoZXIgPSBjb2luU2VudFRvRXRoZXIuYWRkKGNvaW5Ub1NlbmQpOwoKCQkvLyBTZW5kIGV2ZW50cwoJCUxvZ0NvaW5zRW1pdGVkKG1zZy5zZW5kZXIgLGNvaW5Ub1NlbmQpOwoJCUxvZ1JlY2VpdmVkRVRIKGJlbmVmaWNpYXJ5LCBldGhlclJlY2VpdmVkKTsKCX0KCgoJLyoKCSAqQ29tcHV0ZSB0aGUgU2dnQ29pbiBib251cyBhY2NvcmRpbmcgdG8gdGhlIGludmVzdG1lbnQgcGVyaW9kCgkgKi8KCWZ1bmN0aW9uIGJvbnVzKHVpbnQgYW1vdW50KSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CgkJaWYgKG5vdyA8IHN0YXJ0VGltZS5hZGQoMiBkYXlzKSkgcmV0dXJuIGFtb3VudC5hZGQoYW1vdW50LmRpdig1KSk7ICAgLy8gYm9udXMgMjAlCgkJcmV0dXJuIGFtb3VudDsKCX0KCgkvKgoJICogRmluYWxpemUgdGhlIGNyb3dkc2FsZSwgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGUgcmVmdW5kIHBlcmlvZAoJKi8KCWZ1bmN0aW9uIGZpbmFsaXplKCkgb25seU93bmVyIHB1YmxpYyB7CgoJCWlmIChub3cgPCBlbmRUaW1lKSB7IC8vIENhbm5vdCBmaW5hbGlzZSBiZWZvcmUgQ1JPV0RTQUxFX1BFUklPRCBvciBiZWZvcmUgc2VsbGluZyBhbGwgY29pbnMKCQkJaWYgKGNvaW5TZW50VG9FdGhlciA9PSBNQVhfQ0FQKSB7CgkJCX0gZWxzZSB7CgkJCQl0aHJvdzsKCQkJfQoJCX0KCgkJaWYgKGNvaW5TZW50VG9FdGhlciA8IE1JTl9DQVAgJiYgbm93IDwgZW5kVGltZSArIDE1IGRheXMpIHRocm93OyAvLyBJZiBNSU5fQ0FQIGlzIG5vdCByZWFjaGVkIGRvbm9ycyBoYXZlIDE1ZGF5cyB0byBnZXQgcmVmdW5kIGJlZm9yZSB3ZSBjYW4gZmluYWxpc2UKCgkJaWYgKCFtdWx0aXNpZ0V0aGVyLnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7IC8vIE1vdmUgdGhlIHJlbWFpbmluZyBFdGhlciB0byB0aGUgbXVsdGlzaWcgYWRkcmVzcwoKCQl1aW50IHJlbWFpbnMgPSBjb2luLmJhbGFuY2VPZih0aGlzKTsKCQlpZiAocmVtYWlucyA+IDApIHsgLy8gQnVybiB0aGUgcmVzdCBvZiBTZ2dDb2lucwoJCQlpZiAoIWNvaW4uYnVybihyZW1haW5zKSkgdGhyb3cgOwoJCX0KCQljcm93ZHNhbGVDbG9zZWQgPSB0cnVlOwoJfQoKCS8qCgkqIEZhaWxzYWZlIGRyYWluCgkqLwoJZnVuY3Rpb24gZHJhaW4oKSBvbmx5T3duZXIgewoJCWlmICghb3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsKCX0KCgkvKioKCSAqIEFsbG93IHRvIGNoYW5nZSB0aGUgdGVhbSBtdWx0aXNpZyBhZGRyZXNzIGluIHRoZSBjYXNlIG9mIGVtZXJnZW5jeS4KCSAqLwoJZnVuY3Rpb24gc2V0TXVsdGlzaWcoYWRkcmVzcyBhZGRyKSBvbmx5T3duZXIgcHVibGljIHsKCQlpZiAoYWRkciA9PSBhZGRyZXNzKDApKSB0aHJvdzsKCQltdWx0aXNpZ0V0aGVyID0gYWRkcjsKCX0KCgkvKioKCSAqIE1hbnVhbGx5IGJhY2sgU2dnQ29pbiBvd25lciBhZGRyZXNzLgoJICovCglmdW5jdGlvbiBiYWNrU2dnQ29pbk93bmVyKCkgb25seU93bmVyIHB1YmxpYyB7CgkJY29pbi50cmFuc2Zlck93bmVyc2hpcChvd25lcik7Cgl9CgoJLyoqCgkgKiBUcmFuc2ZlciByZW1haW5zIHRvIG93bmVyIGluIGNhc2UgaWYgaW1wb3NzaWJsZSB0byBkbyBtaW4gaW52ZXN0CgkgKi8KCWZ1bmN0aW9uIGdldFJlbWFpbkNvaW5zKCkgb25seU93bmVyIHB1YmxpYyB7CgkJdmFyIHJlbWFpbnMgPSBNQVhfQ0FQIC0gY29pblNlbnRUb0V0aGVyOwoJCXVpbnQgbWluQ29pbnNUb1NlbGwgPSBib251cyhNSU5fSU5WRVNUX0VUSEVSLm11bChDT0lOX1BFUl9FVEhFUikgLyAoMSBldGhlcikpOwoKCQlpZihyZW1haW5zID4gbWluQ29pbnNUb1NlbGwpIHRocm93OwoKCQlCYWNrZXIgYmFja2VyID0gYmFja2Vyc1tvd25lcl07CgkJY29pbi50cmFuc2Zlcihvd25lciwgcmVtYWlucyk7IC8vIFRyYW5zZmVyIFNnZ0NvaW5zIHJpZ2h0IG5vdwoKCQliYWNrZXIuY29pblNlbnQgPSBiYWNrZXIuY29pblNlbnQuYWRkKHJlbWFpbnMpOwoKCQljb2luU2VudFRvRXRoZXIgPSBjb2luU2VudFRvRXRoZXIuYWRkKHJlbWFpbnMpOwoKCQkvLyBTZW5kIGV2ZW50cwoJCUxvZ0NvaW5zRW1pdGVkKHRoaXMgLHJlbWFpbnMpOwoJCUxvZ1JlY2VpdmVkRVRIKG93bmVyLCBldGhlclJlY2VpdmVkKTsKCX0KCgoJLyoKICAJICogV2hlbiBNSU5fQ0FQIGlzIG5vdCByZWFjaDoKICAJICogMSkgYmFja2VyIGNhbGwgdGhlICJhcHByb3ZlIiBmdW5jdGlvbiBvZiB0aGUgU2dnQ29pbiB0b2tlbiBjb250cmFjdCB3aXRoIHRoZSBhbW91bnQgb2YgYWxsIFNnZ0NvaW5zIHRoZXkgZ290IGluIG9yZGVyIHRvIGJlIHJlZnVuZAogIAkgKiAyKSBiYWNrZXIgY2FsbCB0aGUgInJlZnVuZCIgZnVuY3Rpb24gb2YgdGhlIENyb3dkc2FsZSBjb250cmFjdCB3aXRoIHRoZSBzYW1lIGFtb3VudCBvZiBTZ2dDb2lucwogICAJICogMykgYmFja2VyIGNhbGwgdGhlICJ3aXRoZHJhd1BheW1lbnRzIiBmdW5jdGlvbiBvZiB0aGUgQ3Jvd2RzYWxlIGNvbnRyYWN0IHRvIGdldCBhIHJlZnVuZCBpbiBFVEgKICAgCSAqLwoJZnVuY3Rpb24gcmVmdW5kKHVpbnQgX3ZhbHVlKSBtaW5DYXBOb3RSZWFjaGVkIHB1YmxpYyB7CgoJCWlmIChfdmFsdWUgIT0gYmFja2Vyc1ttc2cuc2VuZGVyXS5jb2luU2VudCkgdGhyb3c7IC8vIGNvbXBhcmUgdmFsdWUgZnJvbSBiYWNrZXIgYmFsYW5jZQoKCQljb2luLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBhZGRyZXNzKHRoaXMpLCBfdmFsdWUpOyAvLyBnZXQgdGhlIHRva2VuIGJhY2sgdG8gdGhlIGNyb3dkc2FsZSBjb250cmFjdAoKCQlpZiAoIWNvaW4uYnVybihfdmFsdWUpKSB0aHJvdyA7IC8vIHRva2VuIHNlbnQgZm9yIHJlZnVuZCBhcmUgYnVybnQKCgkJdWludCBFVEhUb1NlbmQgPSBiYWNrZXJzW21zZy5zZW5kZXJdLndlaVJlY2VpdmVkOwoJCWJhY2tlcnNbbXNnLnNlbmRlcl0ud2VpUmVjZWl2ZWQ9MDsKCgkJaWYgKEVUSFRvU2VuZCA+IDApIHsKCQkJYXN5bmNTZW5kKG1zZy5zZW5kZXIsIEVUSFRvU2VuZCk7IC8vIHB1bGwgcGF5bWVudCB0byBnZXQgcmVmdW5kIGluIEVUSAoJCX0KCX0KCn0='.
	

]
