Class {
	#name : #SRT1EAb19e6623E8cBcAfc252E275F5b51C27656fAF,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1EAb19e6623E8cBcAfc252E275F5b51C27656fAF >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKKiBAYXV0aG9yIEplZmZlcnNvbiBEYXZpcwoqIFNwYW5rX0lDTy5zb2wgY3JlYXRlcyB0aGUgY2xpZW50J3MgdG9rZW4gZm9yIGNyb3dkc2FsZSBhbmQgYWxsb3dzIGZvciBzdWJzZXF1ZW50IHRva2VuIHNhbGVzIGFuZCBtaW50aW5nIG9mIHRva2VucwoqICAgSW4gYWRkaXRpb24sIHRoZXJlIGlzIGEgcXVhcnRlcmx5IGRpdmlkZW5kIHBheW91dCB0cmlnZ2VyZWQgYnkgdGhlIG93bmVyLCBwbHVzIGNyZWF0ZXMgYSB0cmFuc2FjdGlvbiByZWNvcmQgcHJpb3IgdG8gcGF5b3V0CiogICBDcm93ZHNhbGUgY29udHJhY3RzIGVkaXRlZCBmcm9tIG9yaWdpbmFsIGNvbnRyYWN0IGNvZGUgYXQgaHR0cHM6Ly93d3cuZXRoZXJldW0ub3JnL2Nyb3dkc2FsZSNjcm93ZGZ1bmQteW91ci1pZGVhCiogICBBZGRpdGlvbmFsIGNyb3dkc2FsZSBjb250cmFjdHMsIGZ1bmN0aW9ucywgbGlicmFyaWVzIGZyb20gT3BlblplcHBlbGluCiogICAgICAgYXQgaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS90cmVlL21hc3Rlci9jb250cmFjdHMvdG9rZW4KKiAgIFRva2VuIGNvbnRyYWN0IGVkaXRlZCBmcm9tIG9yaWdpbmFsIGNvbnRyYWN0IGNvZGUgYXQgaHR0cHM6Ly93d3cuZXRoZXJldW0ub3JnL3Rva2VuCiogICBFUkMyMCBpbnRlcmZhY2UgYW5kIGNlcnRhaW4gdG9rZW4gZnVuY3Rpb25zIGFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vQ29uc2VuU3lzL1Rva2VucwoqKi8KCmNvbnRyYWN0IEVSQzIwIHsKCS8vU2V0cyBldmVudHMgYW5kIGZ1bmN0aW9ucyBmb3IgRVJDMjAgdG9rZW4KCWV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOwoJZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CgkKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpOwoJZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7Cn0KCgpjb250cmFjdCBPd25lZCB7CgkvL1B1YmxpYyB2YXJpYWJsZQogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoJLy9TZXRzIGNvbnRyYWN0IGNyZWF0b3IgYXMgdGhlIG93bmVyCiAgICBmdW5jdGlvbiBPd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgkKCS8vU2V0cyBvbmx5T3duZXIgbW9kaWZpZXIgZm9yIHNwZWNpZmllZCBmdW5jdGlvbnMKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKCS8vQWxsb3dzIGZvciB0cmFuc2ZlciBvZiBjb250cmFjdCBvd25lcnNoaXAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KfQoKCmxpYnJhcnkgU2FmZU1hdGggewogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9ICAKCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICAgICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogICAgfQoKICAgIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogICAgfQogIAogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9Cn0KCgpjb250cmFjdCBTcGFuayBpcyBFUkMyMCwgT3duZWQgewogICAgIC8vQXBwbGllcyBTYWZlTWF0aCBsaWJyYXJ5IHRvIHVpbnQyNTYgb3BlcmF0aW9ucyAKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKCS8vUHVibGljIHZhcmlhYmxlcwoJc3RyaW5nIHB1YmxpYyBuYW1lOyAKCXN0cmluZyBwdWJsaWMgc3ltYm9sOyAKCXVpbnQyNTYgcHVibGljIGRlY2ltYWxzOyAgCiAgICB1aW50MjU2IHB1YmxpYyBpbml0aWFsU3VwcGx5OyAKCXVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OyAKCiAgICAvL1ZhcmlhYmxlcwogICAgdWludDI1NiBtdWx0aXBsaWVyOyAKCQoJLy9DcmVhdGVzIGFycmF5cyBmb3IgYmFsYW5jZXMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZTsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICAvL0NyZWF0ZXMgbW9kaWZpZXIgdG8gcHJldmVudCBzaG9ydCBhZGRyZXNzIGF0dGFjawogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSByZXZlcnQoKTsKICAgICAgICBfOwogICAgfQoKCS8vQ29uc3RydWN0b3IKCWZ1bmN0aW9uIFNwYW5rKHN0cmluZyB0b2tlbk5hbWUsIHN0cmluZyB0b2tlblN5bWJvbCwgdWludDggZGVjaW1hbFVuaXRzLCB1aW50MjU2IGRlY2ltYWxNdWx0aXBsaWVyLCB1aW50MjU2IGluaXRpYWxBbW91bnQpIHsKCQluYW1lID0gdG9rZW5OYW1lOyAKCQlzeW1ib2wgPSB0b2tlblN5bWJvbDsgCgkJZGVjaW1hbHMgPSBkZWNpbWFsVW5pdHM7IAogICAgICAgIG11bHRpcGxpZXIgPSBkZWNpbWFsTXVsdGlwbGllcjsgCiAgICAgICAgaW5pdGlhbFN1cHBseSA9IGluaXRpYWxBbW91bnQ7IAoJCXRvdGFsU3VwcGx5ID0gaW5pdGlhbFN1cHBseTsgIAoJfQoJCgkvL1Byb3ZpZGVzIHRoZSByZW1haW5pbmcgYmFsYW5jZSBvZiBhcHByb3ZlZCB0b2tlbnMgZnJvbSBmdW5jdGlvbiBhcHByb3ZlIAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCgkvL0FsbG93cyBmb3IgYSBjZXJ0YWluIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQgb24gYmVoYWxmIG9mIHRoZSBhY2NvdW50IG93bmVyCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsgCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoJLy9SZXR1cm5zIHRoZSBhY2NvdW50IGJhbGFuY2UgCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nQmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlW19vd25lcl07CiAgICB9CgogICAgLy9BbGxvd3MgY29udHJhY3Qgb3duZXIgdG8gbWludCBuZXcgdG9rZW5zLCBwcmV2ZW50cyBudW1lcmljYWwgb3ZlcmZsb3cKCWZ1bmN0aW9uIG1pbnRUb2tlbihhZGRyZXNzIHRhcmdldCwgdWludDI1NiBtaW50ZWRBbW91bnQpIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCQlyZXF1aXJlKG1pbnRlZEFtb3VudCA+IDApOyAKICAgICAgICB1aW50MjU2IGFkZFRva2VucyA9IG1pbnRlZEFtb3VudDsgCgkJYmFsYW5jZVt0YXJnZXRdICs9IGFkZFRva2VuczsKCQl0b3RhbFN1cHBseSArPSBhZGRUb2tlbnM7CgkJVHJhbnNmZXIoMCwgdGFyZ2V0LCBhZGRUb2tlbnMpOwoJCXJldHVybiB0cnVlOyAKCX0KCgkvL1NlbmRzIHRva2VucyBmcm9tIHNlbmRlcidzIGFjY291bnQKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKChiYWxhbmNlW21zZy5zZW5kZXJdID49IF92YWx1ZSkgJiYgKGJhbGFuY2VbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VbX3RvXSkpIHsKICAgICAgICAgICAgYmFsYW5jZVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgCgkJCXJldHVybiBmYWxzZTsgCgkJfQogICAgfQoJCgkvL1RyYW5zZmVycyB0b2tlbnMgZnJvbSBhbiBhcHByb3ZlZCBhY2NvdW50IAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKChiYWxhbmNlW19mcm9tXSA+PSBfdmFsdWUpICYmIChhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUpICYmIChiYWxhbmNlW190b10gKyBfdmFsdWUgPiBiYWxhbmNlW190b10pKSB7CiAgICAgICAgICAgIGJhbGFuY2VbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyAKCQkJcmV0dXJuIGZhbHNlOyAKCQl9CiAgICB9Cn0KCgpjb250cmFjdCBTcGFua0lDTyBpcyBPd25lZCwgU3BhbmsgewogICAgLy9BcHBsaWVzIFNhZmVNYXRoIGxpYnJhcnkgdG8gdWludDI1NiBvcGVyYXRpb25zIAogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgLy9QdWJsaWMgVmFyaWFibGVzCiAgICBhZGRyZXNzIHB1YmxpYyBtdWx0aVNpZ1dhbGxldDsgICAgICAgICAgICAgICAgICAKICAgIHVpbnQyNTYgcHVibGljIGFtb3VudFJhaXNlZDsgCiAgICB1aW50MjU2IHB1YmxpYyBkaXZpZGVuZFBheW1lbnQ7CiAgICB1aW50MjU2IHB1YmxpYyBudW1iZXJPZlJlY29yZEVudHJpZXM7IAogICAgdWludDI1NiBwdWJsaWMgbnVtYmVyT2ZUb2tlbkhvbGRlcnM7IAogICAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lOyAKICAgIHVpbnQyNTYgcHVibGljIHN0b3BUaW1lOyAKICAgIHVpbnQyNTYgcHVibGljIGhhcmRjYXA7IAogICAgdWludDI1NiBwdWJsaWMgcHJpY2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgIC8vVmFyaWFibGVzCiAgICBhZGRyZXNzW10gcmVjb3JkVG9rZW5Ib2xkZXJzOyAKICAgIGFkZHJlc3NbXSB0b2tlbkhvbGRlcnM7IAogICAgYm9vbCBjcm93ZHNhbGVDbG9zZWQgPSB0cnVlOyAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcmVjb3JkQmFsYW5jZTsgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHJlY29yZFRva2VuSG9sZGVySUQ7ICAgICAgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHRva2VuSG9sZGVySUQ7ICAgICAgICAgICAgICAgCiAgICBzdHJpbmcgdG9rZW5OYW1lID0gIlNwYW5rIjsgCiAgICBzdHJpbmcgdG9rZW5TeW1ib2wgPSAiU1BOSyI7IAogICAgdWludDI1NiBpbml0aWFsVG9rZW5zID0gMjAwMDAwMDAwMDAwMDAwMDA7IAogICAgdWludDI1NiBtdWx0aXBsaWVyID0gMTAwMDAwMDAwOyAKICAgIHVpbnQ4IGRlY2ltYWxVbml0cyA9IDg7ICAKCiAgIAkvL0luaXRpYWxpemVzIHRoZSB0b2tlbgoJZnVuY3Rpb24gU3BhbmtJQ08oKSAKICAgIAlTcGFuayh0b2tlbk5hbWUsIHRva2VuU3ltYm9sLCBkZWNpbWFsVW5pdHMsIG11bHRpcGxpZXIsIGluaXRpYWxUb2tlbnMpIHsKICAgICAgICAgICAgYmFsYW5jZVttc2cuc2VuZGVyXSA9IGluaXRpYWxUb2tlbnM7ICAgICAKICAgICAgICAgICAgVHJhbnNmZXIoMCwgbXNnLnNlbmRlciwgaW5pdGlhbFRva2Vucyk7ICAgIAogICAgICAgICAgICBtdWx0aVNpZ1dhbGxldCA9IG1zZy5zZW5kZXI7ICAgICAgICAKICAgICAgICAgICAgaGFyZGNhcCA9IDMwMDAwMDAwMDAwMDAwMDAwOyAgICAKICAgICAgICAgICAgc2V0UHJpY2UoMzAwMCk7IAogICAgICAgICAgICBkaXZpZGVuZFBheW1lbnQgPSA1MDAwMDAwMDAwMDAwMDsgCiAgICAgICAgICAgIHJlY29yZFRva2VuSG9sZGVycy5sZW5ndGggPSAyOyAKICAgICAgICAgICAgdG9rZW5Ib2xkZXJzLmxlbmd0aCA9IDI7IAogICAgICAgICAgICB0b2tlbkhvbGRlcnNbMV0gPSBtc2cuc2VuZGVyOyAKICAgICAgICAgICAgbnVtYmVyT2ZUb2tlbkhvbGRlcnMrKzsgCiAgICB9CgogICAgLy9GYWxsYmFjayBmdW5jdGlvbiBjcmVhdGVzIHRva2VucyBhbmQgc2VuZHMgdG8gaW52ZXN0b3Igd2hlbiBjcm93ZHNhbGUgaXMgb3BlbgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSgoIWNyb3dkc2FsZUNsb3NlZCkgCiAgICAgICAgICAgICYmIChub3cgPCBzdG9wVGltZSkgCiAgICAgICAgICAgICYmICh0b3RhbFN1cHBseS5hZGQobXNnLnZhbHVlLm11bChnZXRQcmljZSgpKS5tdWwobXVsdGlwbGllcikuZGl2KDEgZXRoZXIpKSA8PSBoYXJkY2FwKSk7IAogICAgICAgIGFkZHJlc3MgcmVjaXBpZW50ID0gbXNnLnNlbmRlcjsgCiAgICAgICAgYW1vdW50UmFpc2VkID0gYW1vdW50UmFpc2VkLmFkZChtc2cudmFsdWUuZGl2KDEgZXRoZXIpKTsgCiAgICAgICAgdWludDI1NiB0b2tlbnMgPSBtc2cudmFsdWUubXVsKGdldFByaWNlKCkpLm11bChtdWx0aXBsaWVyKS5kaXYoMSBldGhlcik7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQodG9rZW5zKTsKICAgICAgICBiYWxhbmNlW3JlY2lwaWVudF0gPSBiYWxhbmNlW3JlY2lwaWVudF0uYWRkKHRva2Vucyk7CiAgICAgICAgcmVxdWlyZShtdWx0aVNpZ1dhbGxldC5zZW5kKG1zZy52YWx1ZSkpOyAKICAgICAgICBUcmFuc2ZlcigwLCByZWNpcGllbnQsIHRva2Vucyk7CiAgICAgICAgaWYgKHRva2VuSG9sZGVySURbcmVjaXBpZW50XSA9PSAwKSB7CiAgICAgICAgICAgIGFkZFRva2VuSG9sZGVyKHJlY2lwaWVudCk7IAogICAgICAgIH0KICAgIH0gICAKCiAgICAvL0FkZHMgYW4gYWRkcmVzcyB0byB0aGUgcmVjb3JyZEVudHJ5IGxpc3QKICAgIGZ1bmN0aW9uIGFkZFJlY29yZEVudHJ5KGFkZHJlc3MgYWNjb3VudCkgaW50ZXJuYWwgewogICAgICAgIGlmIChyZWNvcmRUb2tlbkhvbGRlcklEW2FjY291bnRdID09IDApIHsKICAgICAgICAgICAgcmVjb3JkVG9rZW5Ib2xkZXJJRFthY2NvdW50XSA9IHJlY29yZFRva2VuSG9sZGVycy5sZW5ndGg7IAogICAgICAgICAgICByZWNvcmRUb2tlbkhvbGRlcnMubGVuZ3RoKys7IAogICAgICAgICAgICByZWNvcmRUb2tlbkhvbGRlcnNbcmVjb3JkVG9rZW5Ib2xkZXJzLmxlbmd0aC5zdWIoMSldID0gYWNjb3VudDsgCiAgICAgICAgICAgIG51bWJlck9mUmVjb3JkRW50cmllcysrOwogICAgICAgIH0KICAgIH0KCiAgICAvL0FkZHMgYW4gYWRkcmVzcyB0byB0aGUgdG9rZW5Ib2xkZXJzIGxpc3QgCiAgICBmdW5jdGlvbiBhZGRUb2tlbkhvbGRlcihhZGRyZXNzIGFjY291bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGJvb2wgc3RhdHVzID0gZmFsc2U7IAogICAgICAgIGlmIChiYWxhbmNlW2FjY291bnRdICE9IDApIHsKICAgICAgICAgICAgdG9rZW5Ib2xkZXJJRFthY2NvdW50XSA9IHRva2VuSG9sZGVycy5sZW5ndGg7CiAgICAgICAgICAgIHRva2VuSG9sZGVycy5sZW5ndGgrKzsKICAgICAgICAgICAgdG9rZW5Ib2xkZXJzW3Rva2VuSG9sZGVycy5sZW5ndGguc3ViKDEpXSA9IGFjY291bnQ7IAogICAgICAgICAgICBudW1iZXJPZlRva2VuSG9sZGVycysrOwogICAgICAgICAgICBzdGF0dXMgPSB0cnVlOyAKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0YXR1czsgCiAgICB9ICAKCiAgICAvL0FsbG93cyB0aGUgb3duZXIgdG8gY3JlYXRlIGFuIHJlY29yZCBvZiB0b2tlbiBvd25lcnMgYW5kIHRoZWlyIGJhbGFuY2VzCiAgICBmdW5jdGlvbiBjcmVhdGVSZWNvcmQoKSBpbnRlcm5hbCB7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgKHRva2VuSG9sZGVycy5sZW5ndGguc3ViKDEpKTsgaSsrICkgewogICAgICAgICAgICBhZGRyZXNzIGhvbGRlciA9IGdldFRva2VuSG9sZGVyKGkpOwogICAgICAgICAgICB1aW50MjU2IGhvbGRlckJhbCA9IGJhbGFuY2VPZihob2xkZXIpOyAKICAgICAgICAgICAgYWRkUmVjb3JkRW50cnkoaG9sZGVyKTsgCiAgICAgICAgICAgIHJlY29yZEJhbGFuY2VbaG9sZGVyXSA9IGhvbGRlckJhbDsgCiAgICAgICAgfQogICAgfQoKICAgIC8vUmV0dXJucyB0aGUgY3VycmVudCBwcmljZSBvZiB0aGUgdG9rZW4gZm9yIHRoZSBjcm93ZHNhbGUKICAgIGZ1bmN0aW9uIGdldFByaWNlKCkgcmV0dXJucyAodWludDI1NiByZXN1bHQpIHsKICAgICAgICByZXR1cm4gcHJpY2U7CiAgICB9CgogICAgLy9SZXR1cm5zIHJlY29yZCBjb250ZW50cwogICAgZnVuY3Rpb24gZ2V0UmVjb3JkQmFsYW5jZShhZGRyZXNzIHJlY29yZCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiByZWNvcmRCYWxhbmNlW3JlY29yZF07IAogICAgfQoKICAgIC8vUmV0dXJucyB0aGUgYWRkcmVzcyBvZiBhIHNwZWNpZmljIGluZGV4IHZhbHVlCiAgICBmdW5jdGlvbiBnZXRSZWNvcmRIb2xkZXIodWludDI1NiBpbmRleCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBhZGRyZXNzKHJlY29yZFRva2VuSG9sZGVyc1tpbmRleC5hZGQoMSldKTsgCiAgICB9CgogICAgLy9SZXR1cm5zIHRpbWUgcmVtYWluaW5nIG9uIGNyb3dkc2FsZQogICAgZnVuY3Rpb24gZ2V0UmVtYWluaW5nVGltZSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gc3RvcFRpbWU7IAogICAgfQoKICAgIC8vUmV0dXJucyB0aGUgYWRkcmVzcyBvZiBhIHNwZWNpZmljIGluZGV4IHZhbHVlCglmdW5jdGlvbiBnZXRUb2tlbkhvbGRlcih1aW50MjU2IGluZGV4KSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CgkJcmV0dXJuIGFkZHJlc3ModG9rZW5Ib2xkZXJzW2luZGV4LmFkZCgxKV0pOwoJfQoKICAgIC8vUGF5cyBvdXQgZGl2aWRlbmRzIHRvIHRva2VucyBob2xkZXJzIG9mIHJlY29yZCwgYmFzZWQgb24gNTAwLDAwMCB0b2tlbiBwYXltZW50CiAgICBmdW5jdGlvbiBwYXlPdXREaXZpZGVuZCgpIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsgCiAgICAgICAgY3JlYXRlUmVjb3JkKCk7IAogICAgICAgIHVpbnQyNTYgdm9sdW1lID0gdG90YWxTdXBwbHk7IAogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8ICh0b2tlbkhvbGRlcnMubGVuZ3RoLnN1YigxKSk7IGkrKykgewogICAgICAgICAgICBhZGRyZXNzIHBheWVlID0gZ2V0VG9rZW5Ib2xkZXIoaSk7IAogICAgICAgICAgICB1aW50MjU2IHN0YWtlID0gdm9sdW1lLmRpdihkaXZpZGVuZFBheW1lbnQuZGl2KG11bHRpcGxpZXIpKTsgICAgCiAgICAgICAgICAgIHVpbnQyNTYgZGl2aWRlbmRQYXlvdXQgPSBiYWxhbmNlT2YocGF5ZWUpLmRpdihzdGFrZSkubXVsKG11bHRpcGxpZXIpOyAKICAgICAgICAgICAgYmFsYW5jZVtwYXllZV0gPSBiYWxhbmNlW3BheWVlXS5hZGQoZGl2aWRlbmRQYXlvdXQpOwogICAgICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChkaXZpZGVuZFBheW91dCk7IAogICAgICAgICAgICBUcmFuc2ZlcigwLCBwYXllZSwgZGl2aWRlbmRQYXlvdXQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsgCiAgICB9CgogICAgLy9TZXRzIHRoZSBtdWx0aXNpZyB3YWxsZXQgZm9yIGEgY3Jvd2RzYWxlCiAgICBmdW5jdGlvbiBzZXRNdWx0aVNpZ1dhbGxldChhZGRyZXNzIHdhbGxldCkgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIG11bHRpU2lnV2FsbGV0ID0gd2FsbGV0OyAKICAgICAgICByZXR1cm4gdHJ1ZTsgCiAgICB9CgogICAgLy9TZXRzIHRoZSB0b2tlbiBwcmljZSAKICAgIGZ1bmN0aW9uIHNldFByaWNlKHVpbnQyNTYgbmV3UHJpY2VwZXJFdGhlcikgb25seU93bmVyIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXF1aXJlKG5ld1ByaWNlcGVyRXRoZXIgPiAwKTsgCiAgICAgICAgcHJpY2UgPSBuZXdQcmljZXBlckV0aGVyOyAKICAgICAgICByZXR1cm4gcHJpY2U7IAogICAgfQoKICAgIC8vQWxsb3dzIG93bmVyIHRvIHN0YXJ0IHRoZSBjcm93ZHNhbGUgZnJvbSB0aGUgdGltZSBvZiBleGVjdXRpb24gdW50aWwgYSBzcGVjaWZpZWQgc3RvcFRpbWUKICAgIGZ1bmN0aW9uIHN0YXJ0U2FsZSh1aW50MjU2IHNhbGVTdGFydCwgdWludDI1NiBzYWxlU3RvcCkgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoc2FsZVN0b3AgPiBub3cpOyAgICAgCiAgICAgICAgc3RhcnRUaW1lID0gc2FsZVN0YXJ0OyAKICAgICAgICBzdG9wVGltZSA9IHNhbGVTdG9wOyAKICAgICAgICBjcm93ZHNhbGVDbG9zZWQgPSBmYWxzZTsgCiAgICAgICAgcmV0dXJuIHRydWU7IAogICAgfQoKICAgIC8vQWxsb3dzIG93bmVyIHRvIHN0b3AgdGhlIGNyb3dkc2FsZSBpbW1lZGlhdGVseQogICAgZnVuY3Rpb24gc3RvcFNhbGUoKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgc3RvcFRpbWUgPSBub3c7IAogICAgICAgIGNyb3dkc2FsZUNsb3NlZCA9IHRydWU7CiAgICAgICAgcmV0dXJuIHRydWU7IAogICAgfQoKfQ=='.
	

]
