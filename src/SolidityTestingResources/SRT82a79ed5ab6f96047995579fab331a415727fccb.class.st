Class {
	#name : #SRT82a79ed5ab6f96047995579fab331a415727fccb,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT82a79ed5ab6f96047995579fab331a415727fccb >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBTdWJQcmltZUNyeXB0byB7CiAgICBzdHJ1Y3QgTGlzdGluZyB7CiAgICAgICAgdWludCBzdGFydFByaWNlOwogICAgICAgIHVpbnQgZW5kUHJpY2U7CiAgICAgICAgdWludCBzdGFydGVkQXQ7CiAgICAgICAgdWludCBlbmRzQXQ7CiAgICAgICAgYm9vbCBpc0F2YWlsYWJsZTsKICAgIH0KCiAgICBlbnVtIEhvdXNlQ2xhc3NlcyB7CiAgICAgICAgU2hhY2ssCiAgICAgICAgQXBhcnRtZW50LAogICAgICAgIEJ1bmdhbG93LAogICAgICAgIEhvdXNlLAogICAgICAgIE1hbnNpb24sCiAgICAgICAgRXN0YXRlLAogICAgICAgIFBlbnRob3VzZSwKICAgICAgICBBc2hlcwogICAgfQoKICAgIHN0cnVjdCBIb3VzZSB7CiAgICAgICAgYWRkcmVzcyBvd25lcjsKICAgICAgICB1aW50IHN0cmVldE51bWJlcjsKICAgICAgICBzdHJpbmcgc3RyZWV0TmFtZTsKICAgICAgICBzdHJpbmcgc3RyZWV0VHlwZTsKICAgICAgICBzdHJpbmcgY29sb3JDb2RlOwogICAgICAgIHVpbnQgbnVtQmVkcm9vbXM7CiAgICAgICAgdWludCBudW1CYXRocm9vbXM7CiAgICAgICAgdWludCBzcXVhcmVGb290YWdlOwogICAgICAgIHVpbnQgcHJvcGVydHlWYWx1ZTsKICAgICAgICB1aW50IHN0YXR1c1ZhbHVlOwogICAgICAgIEhvdXNlQ2xhc3NlcyBjbGFzczsKICAgICAgICB1aW50IGNsYXNzVmFyaWFudDsKICAgIH0KCiAgICBzdHJ1Y3QgVHJhaXQgewogICAgICAgIHN0cmluZyBuYW1lOwogICAgICAgIGJvb2wgaXNOZWdhdGl2ZTsKICAgIH0KCiAgICBhZGRyZXNzIHB1YmxpYyBnYW1lT3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBnYW1lRGV2ZWxvcGVyOwoKICAgIHVpbnQgcHVibGljIHByZXNhbGVTYWxlczsKICAgIHVpbnQgcHVibGljIHByZXNhbGVMaW1pdCA9IDUwMDA7CiAgICBib29sIHB1YmxpYyBwcmVzYWxlT25nb2luZyA9IHRydWU7CgogICAgdWludCBwdWJsaWMgYnVpbGRQcmljZSA9IDE1MCBmaW5uZXk7CiAgICB1aW50IHB1YmxpYyBhZGRpdGlvblByaWNlID0gMTAwIGZpbm5leTsKICAgIHVpbnQgcHVibGljIHNhbGVGZWUgPSAyOyAvLyBwZXJjZW50CgogICAgSG91c2VbXSBwdWJsaWMgaG91c2VzOwogICAgVHJhaXRbXSBwdWJsaWMgdHJhaXRzOwoKICAgIG1hcHBpbmcgKHVpbnQgPT4gdWludFs0XSkgcHVibGljIGhvdXNlVHJhaXRzOwogICAgbWFwcGluZyAodWludCA9PiBMaXN0aW5nKSBwdWJsaWMgbGlzdGluZ3M7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgaG91c2VDcmVkaXRzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgb3duZWRIb3VzZXM7CiAgICBtYXBwaW5nICh1aW50ID0+IHVpbnQpIHB1YmxpYyBjbGFzc1ZhcmlhbnRzOwogICAgbWFwcGluZyAodWludCA9PiBhZGRyZXNzKSBhcHByb3ZlZFRyYW5zZmVyczsKCiAgICBzdHJpbmdbXSBjb2xvcnM7CiAgICBzdHJpbmdbXSBzdHJlZXROYW1lczsKICAgIHN0cmluZ1tdIHN0cmVldFR5cGVzOwoKICAgIG1vZGlmaWVyIG9ubHlCeShhZGRyZXNzIF9hdXRob3JpemVkKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IF9hdXRob3JpemVkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlCeU93bmVyT3JEZXYgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBnYW1lT3duZXIgfHwgbXNnLnNlbmRlciA9PSBnYW1lRGV2ZWxvcGVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlCeUFzc2V0T3duZXIodWludCBfdG9rZW5JZCkgewogICAgICAgIHJlcXVpcmUob3duZXJPZihfdG9rZW5JZCkgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5RHVyaW5nUHJlc2FsZSB7CiAgICAgICAgcmVxdWlyZShwcmVzYWxlT25nb2luZyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBTdWJQcmltZUNyeXB0bygpIHB1YmxpYyB7CiAgICAgICAgZ2FtZU93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBnYW1lRGV2ZWxvcGVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvKiBFUkMtMjAgQ29tcGF0aWJpbGl0eSAqLwogICAgZnVuY3Rpb24gbmFtZSgpIHB1cmUgcHVibGljIHJldHVybnMgKHN0cmluZykgewogICAgICAgIHJldHVybiAiU3ViUHJpbWVDcnlwdG8iOwogICAgfQoKICAgIGZ1bmN0aW9uIHN5bWJvbCgpIHB1cmUgcHVibGljIHJldHVybnMgKHN0cmluZykgewogICAgICAgIHJldHVybiAiSE9VU0UiOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBob3VzZXMubGVuZ3RoOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gb3duZWRIb3VzZXNbX293bmVyXTsKICAgIH0KCiAgICAvKiBFUkMtMjAgKyBFUkMtNzIxIFRva2VuIEV2ZW50cyAqLwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF9udW1Ub2tlbnMpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9hcHByb3ZlZCwgdWludCBfdG9rZW5JZCk7CgogICAgLyogRVJDLTcyMSBUb2tlbiBPd25lcnNoaXAgKi8KICAgIGZ1bmN0aW9uIG93bmVyT2YodWludCBfdG9rZW5JZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gaG91c2VzW190b2tlbklkXS5vd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50IF90b2tlbklkKSBvbmx5QnlBc3NldE93bmVyKF90b2tlbklkKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBfdG8pOwogICAgICAgIGFwcHJvdmVkVHJhbnNmZXJzW190b2tlbklkXSA9IF90bzsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kVHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3Rva2VuSWQpIGludGVybmFsIHsKICAgICAgICBIb3VzZSBzdG9yYWdlIGhvdXNlID0gaG91c2VzW190b2tlbklkXTsKCiAgICAgICAgYWRkcmVzcyBvbGRPd25lciA9IGhvdXNlLm93bmVyOwogICAgICAgIGFkZHJlc3MgbmV3T3duZXIgPSBfdG87CgogICAgICAgIG93bmVkSG91c2VzW29sZE93bmVyXS0tOwogICAgICAgIG93bmVkSG91c2VzW25ld093bmVyXSsrOwogICAgICAgIGhvdXNlLm93bmVyID0gbmV3T3duZXI7CgogICAgICAgIEFwcHJvdmFsKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwogICAgICAgIFRyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgMSk7CiAgICB9CgogICAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50IF90b2tlbklkKSBwdWJsaWMgewogICAgICAgIEhvdXNlIHN0b3JhZ2UgaG91c2UgPSBob3VzZXNbX3Rva2VuSWRdOwoKICAgICAgICBhZGRyZXNzIG9sZE93bmVyID0gaG91c2Uub3duZXI7CiAgICAgICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CgogICAgICAgIHJlcXVpcmUoYXBwcm92ZWRUcmFuc2ZlcnNbX3Rva2VuSWRdID09IG5ld093bmVyKTsKCiAgICAgICAgb3duZWRIb3VzZXNbb2xkT3duZXJdIC09IDE7CiAgICAgICAgb3duZWRIb3VzZXNbbmV3T3duZXJdICs9IDE7CiAgICAgICAgaG91c2Uub3duZXIgPSBuZXdPd25lcjsKCiAgICAgICAgVHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCAxKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdG9rZW5JZCkgcHVibGljIHsKICAgICAgICBIb3VzZSBzdG9yYWdlIGhvdXNlID0gaG91c2VzW190b2tlbklkXTsKCiAgICAgICAgYWRkcmVzcyBvbGRPd25lciA9IGhvdXNlLm93bmVyOwogICAgICAgIGFkZHJlc3MgbmV3T3duZXIgPSBfdG87CgogICAgICAgIHJlcXVpcmUob2xkT3duZXIgIT0gbmV3T3duZXIpOwogICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIChtc2cuc2VuZGVyID09IG9sZE93bmVyKSB8fAogICAgICAgICAgICAoYXBwcm92ZWRUcmFuc2ZlcnNbX3Rva2VuSWRdID09IG5ld093bmVyKQogICAgICAgICk7CgogICAgICAgIG93bmVkSG91c2VzW29sZE93bmVyXS0tOwogICAgICAgIG93bmVkSG91c2VzW25ld093bmVyXSsrOwogICAgICAgIGhvdXNlLm93bmVyID0gbmV3T3duZXI7CgogICAgICAgIFRyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgMSk7CiAgICB9CgogICAgLyogVG9rZW4tU3BlY2lmaWMgRXZlbnRzICovCiAgICBldmVudCBNaW50ZWQodWludCBfdG9rZW5JZCk7CiAgICBldmVudCBVcGdyYWRlZCh1aW50IF90b2tlbklkKTsKICAgIGV2ZW50IERlc3Ryb3llZCh1aW50IF90b2tlbklkKTsKCiAgICAvKiBQdWJsaWMgRnVuY3Rpb25hbGl0eSAqLwogICAgZnVuY3Rpb24gYnVpbGRIb3VzZSgpIHBheWFibGUgcHVibGljIHsKICAgICAgICBpZiAoaG91c2VDcmVkaXRzW21zZy5zZW5kZXJdID4gMCkgewogICAgICAgICAgICBob3VzZUNyZWRpdHNbbXNnLnNlbmRlcl0tLTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBidWlsZFByaWNlKTsKICAgICAgICAgICAgaWYgKHByZXNhbGVPbmdvaW5nKSBwcmVzYWxlU2FsZXMrKzsKICAgICAgICB9CgogICAgICAgIGdlbmVyYXRlSG91c2UobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gYnVpbGRBZGRpdGlvbih1aW50IF90b2tlbklkKSBvbmx5QnlBc3NldE93bmVyKF90b2tlbklkKSBwYXlhYmxlIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gYWRkaXRpb25QcmljZSk7CiAgICAgICAgSG91c2Ugc3RvcmFnZSBob3VzZSA9IGhvdXNlc1tfdG9rZW5JZF07CgogICAgICAgIHVwZ3JhZGVBc3NldChfdG9rZW5JZCwgZmFsc2UpOwoKICAgICAgICBob3VzZS5udW1CZWRyb29tcysrOwogICAgICAgIGhvdXNlLm51bUJhdGhyb29tcysrOwogICAgICAgIGhvdXNlLnN0YXR1c1ZhbHVlICs9IGhvdXNlLnN0YXR1c1ZhbHVlIC8gMTA7CgogICAgICAgIFVwZ3JhZGVkKF90b2tlbklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJuRm9ySW5zdXJhbmNlKHVpbnQgX3Rva2VuSWQpIG9ubHlCeUFzc2V0T3duZXIoX3Rva2VuSWQpIHB1YmxpYyB7CiAgICAgICAgSG91c2Ugc3RvcmFnZSBob3VzZSA9IGhvdXNlc1tfdG9rZW5JZF07CiAgICAgICAgdWludCByYW5kID0gbm90UmFuZG9tV2l0aFNlZWQoMTAwMCwgX3Rva2VuSWQpOwoKICAgICAgICAvLyA4MCUgY2hhbmNlICJjbGFpbSIgaXMgaW52ZXN0aWdhdGVkCiAgICAgICAgaWYgKHJhbmQgPiA3OTkpIHsKICAgICAgICAgICAgdXBncmFkZUFzc2V0KF90b2tlbklkLCB0cnVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBpbnZlc3RpZ2F0aW9ucyB5aWVsZCBlcXVhbCBjaGFuY2Ugb2YgdXBncmFkZSBvciBwZXJtYW5lbnQgbG9zcwogICAgICAgICAgICBpZiAocmFuZCA+IDQ5OSkgewogICAgICAgICAgICAgICAgdXBncmFkZUFzc2V0KF90b2tlbklkLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGhvdXNlLmNsYXNzID0gSG91c2VDbGFzc2VzLkFzaGVzOwogICAgICAgICAgICAgICAgaG91c2Uuc3RhdHVzVmFsdWUgPSAwOwogICAgICAgICAgICAgICAgaG91c2UubnVtQmVkcm9vbXMgPSAwOwogICAgICAgICAgICAgICAgaG91c2UubnVtQmF0aHJvb21zID0gMDsKICAgICAgICAgICAgICAgIGhvdXNlLnByb3BlcnR5VmFsdWUgPSAwOwogICAgICAgICAgICAgICAgRGVzdHJveWVkKF90b2tlbklkKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBwdXJjaGFzZUFzc2V0KHVpbnQgX3Rva2VuSWQpIHBheWFibGUgcHVibGljIHsKICAgICAgICBMaXN0aW5nIHN0b3JhZ2UgbGlzdGluZyA9IGxpc3RpbmdzW190b2tlbklkXTsKCiAgICAgICAgdWludCBjdXJyZW50UHJpY2UgPSBjYWxjdWxhdGVDdXJyZW50UHJpY2UobGlzdGluZyk7CiAgICAgICAgcmVxdWlyZShjdXJyZW50UHJpY2UgPiAwICYmIG1zZy52YWx1ZSA+PSBjdXJyZW50UHJpY2UpOwogICAgICAgIHJlcXVpcmUobGlzdGluZy5pc0F2YWlsYWJsZSAmJiBsaXN0aW5nLmVuZHNBdCA+IG5vdyk7CiAgICAgICAgbGlzdGluZy5pc0F2YWlsYWJsZSA9IGZhbHNlOwoKICAgICAgICBpZiAoaG91c2VzW190b2tlbklkXS5vd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgICAgICAgIHVpbnQgZmVlID0gY3VycmVudFByaWNlIC8gKDEwMCAvIHNhbGVGZWUpOwogICAgICAgICAgICBob3VzZXNbX3Rva2VuSWRdLm93bmVyLnRyYW5zZmVyKGN1cnJlbnRQcmljZSAtIGZlZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKCsrcHJlc2FsZVNhbGVzID49IHByZXNhbGVMaW1pdCkgewogICAgICAgICAgICAgICAgcHJlc2FsZU9uZ29pbmcgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgYXBwcm92ZUFuZFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90b2tlbklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBsaXN0QXNzZXQodWludCBfdG9rZW5JZCwgdWludCBfc3RhcnRQcmljZSwgdWludCBfZW5kUHJpY2UsIHVpbnQgX251bUhvdXJzKSBvbmx5QnlBc3NldE93bmVyKF90b2tlbklkKSBwdWJsaWMgewogICAgICAgIGNyZWF0ZUxpc3RpbmcoX3Rva2VuSWQsIF9zdGFydFByaWNlLCBfZW5kUHJpY2UsIF9udW1Ib3Vycyk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlQXNzZXRMaXN0aW5nKHVpbnQgX3Rva2VuSWQpIHB1YmxpYyBvbmx5QnlBc3NldE93bmVyKF90b2tlbklkKSB7CiAgICAgICAgbGlzdGluZ3NbX3Rva2VuSWRdLmlzQXZhaWxhYmxlID0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SG91c2VUcmFpdHModWludCBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludFs0XSkgewogICAgICAgIHJldHVybiBob3VzZVRyYWl0c1tfdG9rZW5JZF07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VHJhaXRDb3VudCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdHJhaXRzLmxlbmd0aDsKICAgIH0KCiAgICAvKiBBZG1pbiBGdW5jdGlvbmFsaXR5ICovCiAgICBmdW5jdGlvbiBhZGROZXdDb2xvcihzdHJpbmcgX2NvbG9yQ29kZSkgcHVibGljIG9ubHlCeU93bmVyT3JEZXYgewogICAgICAgIGNvbG9yc1tjb2xvcnMubGVuZ3RoKytdID0gX2NvbG9yQ29kZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGROZXdUcmFpdChzdHJpbmcgX25hbWUsIGJvb2wgX2lzTmVnYXRpdmUpIHB1YmxpYyBvbmx5QnlPd25lck9yRGV2IHsKICAgICAgICB1aW50IHRyYWl0SWQgPSB0cmFpdHMubGVuZ3RoKys7CiAgICAgICAgdHJhaXRzW3RyYWl0SWRdLm5hbWUgPSBfbmFtZTsKICAgICAgICB0cmFpdHNbdHJhaXRJZF0uaXNOZWdhdGl2ZSA9IF9pc05lZ2F0aXZlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZDVOZXdUcmFpdHMoc3RyaW5nIF9vbmUsIHN0cmluZyBfdHdvLCBzdHJpbmcgX3RocmVlLCBzdHJpbmcgX2ZvdXIsIHN0cmluZyBfZml2ZSwgYm9vbCBfaXNOZWdhdGl2ZSkgcHVibGljIG9ubHlCeU93bmVyT3JEZXYgewogICAgICAgIGFkZE5ld1RyYWl0KF9vbmUsIF9pc05lZ2F0aXZlKTsKICAgICAgICBhZGROZXdUcmFpdChfdHdvLCBfaXNOZWdhdGl2ZSk7CiAgICAgICAgYWRkTmV3VHJhaXQoX3RocmVlLCBfaXNOZWdhdGl2ZSk7CiAgICAgICAgYWRkTmV3VHJhaXQoX2ZvdXIsIF9pc05lZ2F0aXZlKTsKICAgICAgICBhZGROZXdUcmFpdChfZml2ZSwgX2lzTmVnYXRpdmUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZE5ld1N0cmVldE5hbWUoc3RyaW5nIF9uYW1lKSBwdWJsaWMgb25seUJ5T3duZXJPckRldiB7CiAgICAgICAgc3RyZWV0TmFtZXNbc3RyZWV0TmFtZXMubGVuZ3RoKytdID0gX25hbWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkNU5ld1N0cmVldE5hbWVzKHN0cmluZyBfb25lLCBzdHJpbmcgX3R3bywgc3RyaW5nIF90aHJlZSwgc3RyaW5nIF9mb3VyLCBzdHJpbmcgX2ZpdmUpIHB1YmxpYyBvbmx5QnlPd25lck9yRGV2IHsKICAgICAgICBhZGROZXdTdHJlZXROYW1lKF9vbmUpOwogICAgICAgIGFkZE5ld1N0cmVldE5hbWUoX3R3byk7CiAgICAgICAgYWRkTmV3U3RyZWV0TmFtZShfdGhyZWUpOwogICAgICAgIGFkZE5ld1N0cmVldE5hbWUoX2ZvdXIpOwogICAgICAgIGFkZE5ld1N0cmVldE5hbWUoX2ZpdmUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZE5ld1N0cmVldFR5cGUoc3RyaW5nIF90eXBlKSBwdWJsaWMgb25seUJ5T3duZXJPckRldiB7CiAgICAgICAgc3RyZWV0VHlwZXNbc3RyZWV0VHlwZXMubGVuZ3RoKytdID0gX3R5cGU7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkSG91c2VDcmVkaXRzKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX251bUNyZWRpdHMpIHB1YmxpYyBvbmx5QnlPd25lck9yRGV2IHsKICAgICAgICBob3VzZUNyZWRpdHNbX2FkZHJlc3NdICs9IF9udW1DcmVkaXRzOwogICAgfQoKICAgIGZ1bmN0aW9uIGdlbmVyYXRlUHJlc2FsZUhvdXNlcygpIHB1YmxpYyBvbmx5QnlPd25lck9yRGV2IG9ubHlEdXJpbmdQcmVzYWxlIHsKICAgICAgICB1aW50IGluaXRpYWxHYXMgPSBtc2cuZ2FzOwogICAgICAgIGdlbmVyYXRlQW5kTGlzdFByZXNhbGVIb3VzZSgpOwoKICAgICAgICB3aGlsZSAobXNnLmdhcyA+IChpbml0aWFsR2FzIC0gbXNnLmdhcykpIHsKICAgICAgICAgICAgZ2VuZXJhdGVBbmRMaXN0UHJlc2FsZUhvdXNlKCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJ1aWxkUHJpY2UodWludCBfYnVpbGRQcmljZSkgcHVibGljIG9ubHlCeShnYW1lT3duZXIpIHsKICAgICAgICBidWlsZFByaWNlID0gX2J1aWxkUHJpY2U7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0QWRkaXRpb25QcmljZSh1aW50IF9hZGRpdGlvblByaWNlKSBwdWJsaWMgb25seUJ5KGdhbWVPd25lcikgewogICAgICAgIGFkZGl0aW9uUHJpY2UgPSBfYWRkaXRpb25QcmljZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRTYWxlRmVlKHVpbnQgX3NhbGVGZWUpIHB1YmxpYyBvbmx5QnkoZ2FtZU93bmVyKSB7CiAgICAgICAgc2FsZUZlZSA9IF9zYWxlRmVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFZhcmlhbnRDb3VudCh1aW50IF9ob3VzZUNsYXNzLCB1aW50IF92YXJpYW50Q291bnQpIHB1YmxpYyBvbmx5QnlPd25lck9yRGV2IHsKICAgICAgICBjbGFzc1ZhcmlhbnRzW19ob3VzZUNsYXNzXSA9IF92YXJpYW50Q291bnQ7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdGZWVzKCkgcHVibGljIG9ubHlCeU93bmVyT3JEZXYgewogICAgICAgIGlmIChwcmVzYWxlT25nb2luZykgZ2FtZURldmVsb3Blci50cmFuc2Zlcih0aGlzLmJhbGFuY2UgLyA1KTsKICAgICAgICBnYW1lT3duZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckdhbWVPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5QnkoZ2FtZU93bmVyKSB7CiAgICAgICAgZ2FtZU93bmVyID0gX25ld093bmVyOwogICAgfQoKICAgIC8qIEludGVybmFsIEZ1bmN0aW9uYWxpdHkgKi8KICAgIGZ1bmN0aW9uIGdlbmVyYXRlSG91c2UoYWRkcmVzcyBvd25lcikgaW50ZXJuYWwgcmV0dXJucyAodWludCBob3VzZUlkKSB7CiAgICAgICAgaG91c2VJZCA9IGhvdXNlcy5sZW5ndGgrKzsKCiAgICAgICAgSG91c2VDbGFzc2VzIGhvdXNlQ2xhc3MgPSByYW5kb21Ib3VzZUNsYXNzKCk7CiAgICAgICAgdWludCBudW1CZWRyb29tcyA9IHJhbmRvbUJlZHJvb21zKGhvdXNlQ2xhc3MpOwogICAgICAgIHVpbnQgbnVtQmF0aHJvb21zID0gcmFuZG9tQmF0aHJvb21zKG51bUJlZHJvb21zKTsKICAgICAgICB1aW50IHNxdWFyZUZvb3RhZ2UgPSBjYWxjdWxhdGVTcXVhcmVGb290YWdlKGhvdXNlQ2xhc3MsIG51bUJlZHJvb21zLCBudW1CYXRocm9vbXMpOwogICAgICAgIHVpbnQgcHJvcGVydHlWYWx1ZSA9IGNhbGN1bGF0ZVByb3BlcnR5VmFsdWUoaG91c2VDbGFzcywgc3F1YXJlRm9vdGFnZSwgbnVtQmF0aHJvb21zLCBudW1CZWRyb29tcyk7CgogICAgICAgIGhvdXNlc1tob3VzZUlkXSA9IEhvdXNlKHsKICAgICAgICAgICAgb3duZXI6IG93bmVyLAogICAgICAgICAgICBjbGFzczogaG91c2VDbGFzcywKICAgICAgICAgICAgc3RyZWV0TnVtYmVyOiBub3RSYW5kb21XaXRoU2VlZCg5OTk5LCBzcXVhcmVGb290YWdlICsgaG91c2VJZCksCiAgICAgICAgICAgIHN0cmVldE5hbWU6IHN0cmVldE5hbWVzW25vdFJhbmRvbShzdHJlZXROYW1lcy5sZW5ndGgpXSwKICAgICAgICAgICAgc3RyZWV0VHlwZTogc3RyZWV0VHlwZXNbbm90UmFuZG9tKHN0cmVldFR5cGVzLmxlbmd0aCldLAogICAgICAgICAgICBwcm9wZXJ0eVZhbHVlOiBwcm9wZXJ0eVZhbHVlLAogICAgICAgICAgICBzdGF0dXNWYWx1ZTogcHJvcGVydHlWYWx1ZSAvIDEwMDAwLAogICAgICAgICAgICBjb2xvckNvZGU6IGNvbG9yc1tub3RSYW5kb20oY29sb3JzLmxlbmd0aCldLAogICAgICAgICAgICBudW1CYXRocm9vbXM6IG51bUJhdGhyb29tcywKICAgICAgICAgICAgbnVtQmVkcm9vbXM6IG51bUJlZHJvb21zLAogICAgICAgICAgICBzcXVhcmVGb290YWdlOiBzcXVhcmVGb290YWdlLAogICAgICAgICAgICBjbGFzc1ZhcmlhbnQ6IHJhbmRvbUNsYXNzVmFyaWFudChob3VzZUNsYXNzKQogICAgICAgIH0pOwoKICAgICAgICBob3VzZVRyYWl0c1tob3VzZUlkXSA9IFsKICAgICAgICAgICAgbm90UmFuZG9tV2l0aFNlZWQodHJhaXRzLmxlbmd0aCwgcHJvcGVydHlWYWx1ZSArIGhvdXNlSWQgKiA1KSwKICAgICAgICAgICAgbm90UmFuZG9tV2l0aFNlZWQodHJhaXRzLmxlbmd0aCwgc3F1YXJlRm9vdGFnZSArIGhvdXNlSWQgKiA0KSwKICAgICAgICAgICAgbm90UmFuZG9tV2l0aFNlZWQodHJhaXRzLmxlbmd0aCwgbnVtQmF0aHJvb21zICsgaG91c2VJZCAqIDMpLAogICAgICAgICAgICBub3RSYW5kb21XaXRoU2VlZCh0cmFpdHMubGVuZ3RoLCBudW1CZWRyb29tcyArIGhvdXNlSWQgKiAyKQogICAgICAgIF07CgogICAgICAgIG93bmVkSG91c2VzW293bmVyXSsrOwogICAgICAgIE1pbnRlZChob3VzZUlkKTsKICAgICAgICBUcmFuc2ZlcihhZGRyZXNzKDApLCBvd25lciwgMSk7CgogICAgICAgIHJldHVybiBob3VzZUlkOwogICAgfQoKICAgIGZ1bmN0aW9uIGdlbmVyYXRlQW5kTGlzdFByZXNhbGVIb3VzZSgpIGludGVybmFsIHsKICAgICAgICB1aW50IGhvdXNlSWQgPSBnZW5lcmF0ZUhvdXNlKHRoaXMpOwogICAgICAgIHVpbnQgc2VsbFByaWNlID0gKGhvdXNlc1tob3VzZUlkXS5wcm9wZXJ0eVZhbHVlIC8gNTAwMCkgKiAxIGZpbm5leTsKCiAgICAgICAgaWYgKHNlbGxQcmljZSA+IDI1MCBmaW5uZXkpIHNlbGxQcmljZSA9IDI1MCBmaW5uZXk7CiAgICAgICAgaWYgKHNlbGxQcmljZSA8IDUwIGZpbm5leSkgc2VsbFByaWNlID0gNTAgZmlubmV5OwoKICAgICAgICBjcmVhdGVMaXN0aW5nKGhvdXNlSWQsIHNlbGxQcmljZSwgc2VsbFByaWNlLCAzNjUgKiAyNCk7CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlTGlzdGluZyh1aW50IHRva2VuSWQsIHVpbnQgc3RhcnRQcmljZSwgdWludCBlbmRQcmljZSwgdWludCBudW1Ib3VycykgaW50ZXJuYWwgewogICAgICAgIGxpc3RpbmdzW3Rva2VuSWRdID0gTGlzdGluZyh7CiAgICAgICAgICAgIHN0YXJ0UHJpY2U6IHN0YXJ0UHJpY2UsCiAgICAgICAgICAgIGVuZFByaWNlOiBlbmRQcmljZSwKICAgICAgICAgICAgc3RhcnRlZEF0OiBub3csCiAgICAgICAgICAgIGVuZHNBdDogbm93ICsgKG51bUhvdXJzICogMSBob3VycyksCiAgICAgICAgICAgIGlzQXZhaWxhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlQ3VycmVudFByaWNlKExpc3RpbmcgbGlzdGluZykgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKGxpc3RpbmcuZW5kUHJpY2UgPT0gbGlzdGluZy5zdGFydFByaWNlIHx8IGxpc3RpbmcuZW5kUHJpY2UgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gbGlzdGluZy5zdGFydFByaWNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVpbnQgdG90YWxOdW1iZXJPZlNlY29uZHMgPSBsaXN0aW5nLmVuZHNBdCAtIGxpc3Rpbmcuc3RhcnRlZEF0OwogICAgICAgICAgICB1aW50IHNlY29uZFNpbmNlU3RhcnQgPSBub3cgLSBsaXN0aW5nLnN0YXJ0ZWRBdDsKICAgICAgICAgICAgaW50IHByaWNlQ2hhbmdlUGVyU2Vjb25kID0gaW50KGxpc3RpbmcuZW5kUHJpY2UgLSBsaXN0aW5nLnN0YXJ0UHJpY2UpIC8gaW50KHRvdGFsTnVtYmVyT2ZTZWNvbmRzKTsKCiAgICAgICAgICAgIHJldHVybiB1aW50KGludChsaXN0aW5nLnN0YXJ0UHJpY2UpICsgaW50KHByaWNlQ2hhbmdlUGVyU2Vjb25kICogaW50KHNlY29uZFNpbmNlU3RhcnQpKSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVByb3BlcnR5VmFsdWUoSG91c2VDbGFzc2VzIGhvdXNlQ2xhc3MsIHVpbnQgc3F1YXJlRm9vdGFnZSwgdWludCBudW1CYXRocm9vbXMsIHVpbnQgbnVtQmVkcm9vbXMpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgcHJvcGVydHlWYWx1ZSA9ICh1aW50KGhvdXNlQ2xhc3MpICsgMSkgKiAxMDsKICAgICAgICBwcm9wZXJ0eVZhbHVlICs9IChudW1CYXRocm9vbXMgKyAxKSAqIDEwOwogICAgICAgIHByb3BlcnR5VmFsdWUgKz0gKG51bUJlZHJvb21zICsgMSkgKiAyNTsKICAgICAgICBwcm9wZXJ0eVZhbHVlICs9IHNxdWFyZUZvb3RhZ2UgKiAyNTsKICAgICAgICBwcm9wZXJ0eVZhbHVlICo9IDU7CgogICAgICAgIHJldHVybiB1aW50KGhvdXNlQ2xhc3MpID4gNCA/IHByb3BlcnR5VmFsdWUgKiA1IDogcHJvcGVydHlWYWx1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiByYW5kb21Ib3VzZUNsYXNzKCkgaW50ZXJuYWwgdmlldyByZXR1cm5zIChIb3VzZUNsYXNzZXMpIHsKICAgICAgICB1aW50IHJhbmQgPSBub3RSYW5kb20oMTAwMCk7CgogICAgICAgIGlmIChyYW5kIDwgMjAwKSB7CiAgICAgICAgICAgIHJldHVybiBIb3VzZUNsYXNzZXMuU2hhY2s7CiAgICAgICAgfSBlbHNlIGlmIChyYW5kID4gMjAwICYmIHJhbmQgPCA0MDApIHsKICAgICAgICAgICAgcmV0dXJuIEhvdXNlQ2xhc3Nlcy5BcGFydG1lbnQ7CiAgICAgICAgfSBlbHNlIGlmIChyYW5kID4gNDAwICYmIHJhbmQgPCA2MDApIHsKICAgICAgICAgICAgcmV0dXJuIEhvdXNlQ2xhc3Nlcy5CdW5nYWxvdzsKICAgICAgICB9IGVsc2UgaWYgKHJhbmQgPiA2MDAgJiYgcmFuZCA8IDgwMCkgewogICAgICAgICAgICByZXR1cm4gSG91c2VDbGFzc2VzLkhvdXNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBIb3VzZUNsYXNzZXMuTWFuc2lvbjsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmFuZG9tQ2xhc3NWYXJpYW50KEhvdXNlQ2xhc3NlcyBob3VzZUNsYXNzKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IHBvc3NpYmxlVmFyaWFudHMgPSAxMDsKICAgICAgICBpZiAoY2xhc3NWYXJpYW50c1t1aW50KGhvdXNlQ2xhc3MpXSAhPSAwKSBwb3NzaWJsZVZhcmlhbnRzID0gY2xhc3NWYXJpYW50c1t1aW50KGhvdXNlQ2xhc3MpXTsKICAgICAgICByZXR1cm4gbm90UmFuZG9tKHBvc3NpYmxlVmFyaWFudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJhbmRvbUJlZHJvb21zKEhvdXNlQ2xhc3NlcyBob3VzZUNsYXNzKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGNsYXNzID0gdWludChob3VzZUNsYXNzKTsKICAgICAgICByZXR1cm4gY2xhc3MgPj0gMSA/IGNsYXNzICsgbm90UmFuZG9tKDQpIDogMDsKICAgIH0KCiAgICBmdW5jdGlvbiByYW5kb21CYXRocm9vbXModWludCBudW1CZWRyb29tcykgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIG51bUJlZHJvb21zIDwgMiA/IG51bUJlZHJvb21zIDogbnVtQmVkcm9vbXMgLSBub3RSYW5kb20oMyk7CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlU3F1YXJlRm9vdGFnZShIb3VzZUNsYXNzZXMgaG91c2VDbGFzcywgdWludCBudW1CZWRyb29tcywgdWludCBudW1CYXRocm9vbXMpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYmFzZVNxZnQgPSB1aW50KGhvdXNlQ2xhc3MpID49IDQgPyA1MCA6IDI1OwogICAgICAgIHVpbnQgbXVsdGlwbGllciA9IHVpbnQoaG91c2VDbGFzcykgKyAxOwoKICAgICAgICB1aW50IGJlZHJvb21TcWZ0ID0gKG51bUJlZHJvb21zICsgMSkgKiAxMCAqIGJhc2VTcWZ0OwogICAgICAgIHVpbnQgYmF0aHJvb21TcWZ0ID0gKG51bUJhdGhyb29tcyArIDEpICogNSAqIGJhc2VTcWZ0OwoKICAgICAgICByZXR1cm4gKGJlZHJvb21TcWZ0ICsgYmF0aHJvb21TcWZ0KSAqIG11bHRpcGxpZXI7CiAgICB9CgogICAgZnVuY3Rpb24gdXBncmFkZUFzc2V0KHVpbnQgdG9rZW5JZCwgYm9vbCBhbGxvd0NsYXNzVXBncmFkZSkgaW50ZXJuYWwgewogICAgICAgIEhvdXNlIHN0b3JhZ2UgaG91c2UgPSBob3VzZXNbdG9rZW5JZF07CgogICAgICAgIGhvdXNlLm51bUJlZHJvb21zKys7CiAgICAgICAgaG91c2UubnVtQmF0aHJvb21zKys7CgogICAgICAgIGlmIChhbGxvd0NsYXNzVXBncmFkZSkgewogICAgICAgICAgICB1aW50IGNsYXNzID0gdWludChob3VzZS5jbGFzcyk7CiAgICAgICAgICAgIGlmIChjbGFzcyA8PSBob3VzZS5udW1CZWRyb29tcykgewogICAgICAgICAgICAgICAgaG91c2UuY2xhc3MgPSBIb3VzZUNsYXNzZXMuQnVuZ2Fsb3c7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xhc3MgPCAyICYmIGhvdXNlLm51bUJlZHJvb21zID4gNSkgewogICAgICAgICAgICAgICAgaG91c2UuY2xhc3MgPSBIb3VzZUNsYXNzZXMuUGVudGhvdXNlOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNsYXNzIDwgNCAmJiBob3VzZS5udW1CZWRyb29tcyA+IDEwKSB7CiAgICAgICAgICAgICAgICBob3VzZS5jbGFzcyA9IEhvdXNlQ2xhc3Nlcy5NYW5zaW9uOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNsYXNzIDwgNiAmJiBob3VzZS5udW1CZWRyb29tcyA+IDE1KSB7CiAgICAgICAgICAgICAgICBob3VzZS5jbGFzcyA9IEhvdXNlQ2xhc3Nlcy5Fc3RhdGU7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGhvdXNlLnNxdWFyZUZvb3RhZ2UgPSBjYWxjdWxhdGVTcXVhcmVGb290YWdlKAogICAgICAgICAgICBob3VzZS5jbGFzcywgaG91c2UubnVtQmVkcm9vbXMsIGhvdXNlLm51bUJhdGhyb29tcwogICAgICAgICk7CgogICAgICAgIGhvdXNlLnByb3BlcnR5VmFsdWUgPSBjYWxjdWxhdGVQcm9wZXJ0eVZhbHVlKAogICAgICAgICAgICBob3VzZS5jbGFzcywgaG91c2Uuc3F1YXJlRm9vdGFnZSwgaG91c2UubnVtQmF0aHJvb21zLCBob3VzZS5udW1CZWRyb29tcwogICAgICAgICk7CgogICAgICAgIGhvdXNlLnN0YXR1c1ZhbHVlICs9IGhvdXNlLnN0YXR1c1ZhbHVlIC8gMTA7CiAgICAgICAgVXBncmFkZWQodG9rZW5JZCk7CiAgICB9CgogICAgZnVuY3Rpb24gbm90UmFuZG9tKHVpbnQgbGVzc1RoYW4pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdWludChrZWNjYWsyNTYoCiAgICAgICAgICAgIChob3VzZXMubGVuZ3RoICsgMSkgKyAodHguZ2FzcHJpY2UgKiBsZXNzVGhhbikgKwogICAgICAgICAgICAoYmxvY2suZGlmZmljdWx0eSAqIGJsb2NrLm51bWJlciArIG5vdykgKiBtc2cuZ2FzCiAgICAgICAgKSkgJSBsZXNzVGhhbjsKICAgIH0KCiAgICBmdW5jdGlvbiBub3RSYW5kb21XaXRoU2VlZCh1aW50IGxlc3NUaGFuLCB1aW50IHNlZWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdWludChrZWNjYWsyNTYoCiAgICAgICAgICAgIHNlZWQgKyBibG9jay5nYXNsaW1pdCArIGJsb2NrLm51bWJlcgogICAgICAgICkpICUgbGVzc1RoYW47CiAgICB9Cn0='.
	

]
