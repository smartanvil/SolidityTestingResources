Class {
	#name : #SRT1142e1f922cde42756741b4e16ddc5a87ee94b3d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1142e1f922cde42756741b4e16ddc5a87ee94b3d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KICB9Cgp9Cgpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgcGF1c2VkCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9Cgpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCmNvbnRyYWN0IENBVENvbnRyYWN0IGlzIE93bmFibGUsIFBhdXNhYmxlIHsKCUNBVFNlcnZpY2VQYXltZW50Q29sbGVjdG9yIHB1YmxpYyBjYXRQYXltZW50Q29sbGVjdG9yOwoJdWludCBwdWJsaWMgY29udHJhY3RGZWUgPSAwLjEgKiAxMCoqMTg7IC8vIEJhc2UgZmVlIGlzIDAuMSBDQVQKCS8vIExpbWl0cyBhbGwgdHJhbnNhY3Rpb25zIHRvIGEgc21hbGwgYW1vdW50IHRvIGF2b2lkIGZpbmFuY2lhbCByaXNrIHdpdGggZWFybHkgY29kZQoJdWludCBwdWJsaWMgZXRoUGVyVHJhbnNhY3Rpb25MaW1pdCA9IDAuMSBldGhlcjsKCXN0cmluZyBwdWJsaWMgY29udHJhY3ROYW1lOwoJc3RyaW5nIHB1YmxpYyB2ZXJzaW9uSWRlbnQgPSAiMC4xLjAiOwoKCWV2ZW50IENvbnRyYWN0RGVwbG95ZWQoYWRkcmVzcyBpbmRleGVkIGJ5V2hvKTsKCWV2ZW50IENvbnRyYWN0RmVlQ2hhbmdlZCh1aW50IG9sZEZlZSwgdWludCBuZXdGZWUpOwoJZXZlbnQgQ29udHJhY3RFdGhMaW1pdENoYW5nZWQodWludCBvbGRMaW1pdCwgdWludCBuZXdMaW1pdCk7CgoJZXZlbnQgQ0FUV2l0aGRyYXduKHVpbnQgbnVtT2ZUb2tlbnMpOwoKCW1vZGlmaWVyIGJsb2NrQ2F0RW50cnlQb2ludCgpIHsKCQkvLyBDb2xsZWN0IHBheW1lbnQKCQljYXRQYXltZW50Q29sbGVjdG9yLmNvbGxlY3RQYXltZW50KG1zZy5zZW5kZXIsIGNvbnRyYWN0RmVlKTsKCQlDb250cmFjdERlcGxveWVkKG1zZy5zZW5kZXIpOwoJCV87Cgl9CgoJbW9kaWZpZXIgbGltaXRUcmFuc2FjdGlvblZhbHVlKCkgewoJCXJlcXVpcmUobXNnLnZhbHVlIDw9IGV0aFBlclRyYW5zYWN0aW9uTGltaXQpOwoJCV87Cgl9CgoJZnVuY3Rpb24gQ0FUQ29udHJhY3QoYWRkcmVzcyBfY2F0UGF5bWVudENvbGxlY3Rvciwgc3RyaW5nIF9jb250cmFjdE5hbWUpIHsKCQljYXRQYXltZW50Q29sbGVjdG9yID0gQ0FUU2VydmljZVBheW1lbnRDb2xsZWN0b3IoX2NhdFBheW1lbnRDb2xsZWN0b3IpOwoJCWNvbnRyYWN0TmFtZSA9IF9jb250cmFjdE5hbWU7Cgl9CgoJLy8gQWRtaW5pc3RyYXRpdmUgZnVuY3Rpb25zCgoJZnVuY3Rpb24gY2hhbmdlQ29udHJhY3RGZWUodWludCBfbmV3RmVlKSBleHRlcm5hbCBvbmx5T3duZXIgewoJCS8vIF9uZXdGZWUgaXMgYXNzdW1lZCB0byBiZSBnaXZlbiBpbiBmdWxsIENBVCBwcmVjaXNpb24gKDE4IGRlY2ltYWxzKQoJCUNvbnRyYWN0RmVlQ2hhbmdlZChjb250cmFjdEZlZSwgX25ld0ZlZSk7CgkJY29udHJhY3RGZWUgPSBfbmV3RmVlOwoJfQoKCWZ1bmN0aW9uIGNoYW5nZUV0aGVyVHhMaW1pdCh1aW50IF9uZXdMaW1pdCkgZXh0ZXJuYWwgb25seU93bmVyIHsKCQlDb250cmFjdEV0aExpbWl0Q2hhbmdlZChldGhQZXJUcmFuc2FjdGlvbkxpbWl0LCBfbmV3TGltaXQpOwoJCWV0aFBlclRyYW5zYWN0aW9uTGltaXQgPSBfbmV3TGltaXQ7Cgl9CgoJZnVuY3Rpb24gd2l0aGRyYXdDQVQoKSBleHRlcm5hbCBvbmx5T3duZXIgewoJCVN0YW5kYXJkVG9rZW4gQ0FUID0gY2F0UGF5bWVudENvbGxlY3Rvci5DQVQoKTsKCQl1aW50IG91clRva2VucyA9IENBVC5iYWxhbmNlT2YodGhpcyk7CgkJQ0FULnRyYW5zZmVyKG93bmVyLCBvdXJUb2tlbnMpOwoJCUNBVFdpdGhkcmF3bihvdXJUb2tlbnMpOwoJfQp9Cgpjb250cmFjdCBDQVRTZXJ2aWNlUGF5bWVudENvbGxlY3RvciBpcyBPd25hYmxlIHsKCVN0YW5kYXJkVG9rZW4gcHVibGljIENBVDsKCWFkZHJlc3MgcHVibGljIHBheW1lbnREZXN0aW5hdGlvbjsKCXVpbnQgcHVibGljIHRvdGFsRGVwbG95bWVudHMgPSAwOwoJbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyByZWdpc3RlcmVkU2VydmljZXM7CgltYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIHNlcnZpY2VEZXBsb3lDb3VudDsKCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgdXNlckRlcGxveUNvdW50OwoKCWV2ZW50IENBVFBheW1lbnQoYWRkcmVzcyBpbmRleGVkIHNlcnZpY2UsIGFkZHJlc3MgaW5kZXhlZCBwYXllciwgdWludCBwcmljZSk7CglldmVudCBFbmFibGVTZXJ2aWNlKGFkZHJlc3MgaW5kZXhlZCBzZXJ2aWNlKTsKCWV2ZW50IERpc2FibGVTZXJ2aWNlKGFkZHJlc3MgaW5kZXhlZCBzZXJ2aWNlKTsKCWV2ZW50IENoYW5nZWRQYXltZW50RGVzdGluYXRpb24oYWRkcmVzcyBpbmRleGVkIG9sZERlc3RpbmF0aW9uLCBhZGRyZXNzIGluZGV4ZWQgbmV3RGVzdGluYXRpb24pOwoKCWV2ZW50IENBVFdpdGhkcmF3bih1aW50IG51bU9mVG9rZW5zKTsKCQoJZnVuY3Rpb24gQ0FUU2VydmljZVBheW1lbnRDb2xsZWN0b3IoYWRkcmVzcyBfQ0FUKSB7CgkJQ0FUID0gU3RhbmRhcmRUb2tlbihfQ0FUKTsKCQlwYXltZW50RGVzdGluYXRpb24gPSBtc2cuc2VuZGVyOwoJfQoJCglmdW5jdGlvbiBlbmFibGVTZXJ2aWNlKGFkZHJlc3MgX3NlcnZpY2UpIHB1YmxpYyBvbmx5T3duZXIgewoJCXJlZ2lzdGVyZWRTZXJ2aWNlc1tfc2VydmljZV0gPSB0cnVlOwoJCUVuYWJsZVNlcnZpY2UoX3NlcnZpY2UpOwoJfQoJCglmdW5jdGlvbiBkaXNhYmxlU2VydmljZShhZGRyZXNzIF9zZXJ2aWNlKSBwdWJsaWMgb25seU93bmVyIHsKCQlyZWdpc3RlcmVkU2VydmljZXNbX3NlcnZpY2VdID0gZmFsc2U7CgkJRGlzYWJsZVNlcnZpY2UoX3NlcnZpY2UpOwoJfQoJCglmdW5jdGlvbiBjb2xsZWN0UGF5bWVudChhZGRyZXNzIF9mcm9tV2hvLCB1aW50IF9wYXltZW50KSBwdWJsaWMgewoJCXJlcXVpcmUocmVnaXN0ZXJlZFNlcnZpY2VzW21zZy5zZW5kZXJdID09IHRydWUpOwoJCQoJCXNlcnZpY2VEZXBsb3lDb3VudFttc2cuc2VuZGVyXSsrOwoJCXVzZXJEZXBsb3lDb3VudFtfZnJvbVdob10rKzsKCQl0b3RhbERlcGxveW1lbnRzKys7CgkJCgkJQ0FULnRyYW5zZmVyRnJvbShfZnJvbVdobywgcGF5bWVudERlc3RpbmF0aW9uLCBfcGF5bWVudCk7CgkJQ0FUUGF5bWVudChfZnJvbVdobywgbXNnLnNlbmRlciwgX3BheW1lbnQpOwoJfQoKCS8vIEFkbWluaXN0cmF0aXZlIGZ1bmN0aW9ucwoKCWZ1bmN0aW9uIGNoYW5nZVBheW1lbnREZXN0aW5hdGlvbihhZGRyZXNzIF9uZXdQYXltZW50RGVzdCkgZXh0ZXJuYWwgb25seU93bmVyIHsKCQlDaGFuZ2VkUGF5bWVudERlc3RpbmF0aW9uKHBheW1lbnREZXN0aW5hdGlvbiwgX25ld1BheW1lbnREZXN0KTsKCQlwYXltZW50RGVzdGluYXRpb24gPSBfbmV3UGF5bWVudERlc3Q7Cgl9CgoJZnVuY3Rpb24gd2l0aGRyYXdDQVQoKSBleHRlcm5hbCBvbmx5T3duZXIgewoJCXVpbnQgb3VyVG9rZW5zID0gQ0FULmJhbGFuY2VPZih0aGlzKTsKCQlDQVQudHJhbnNmZXIob3duZXIsIG91clRva2Vucyk7CgkJQ0FUV2l0aGRyYXduKG91clRva2Vucyk7Cgl9Cn0KCmNvbnRyYWN0IEhvZGwgaXMgQ0FUQ29udHJhY3QgewogICAgdWludCBwdWJsaWMgaW5zdGFuY2VJZCA9IDE7CiAgICBtYXBwaW5nKHVpbnQgPT4gSG9kbEluc3RhbmNlKSBwdWJsaWMgaW5zdGFuY2VzOwoKICAgIHVpbnQgcHVibGljIG1heGltdW1Ib2RsRHVyYXRpb24gPSA0IHdlZWtzOwoKICAgIGV2ZW50IEhvZGxDcmVhdGVkKHVpbnQgaW5kZXhlZCBpZCwgYWRkcmVzcyBpbmRleGVkIGluc3RPd25lciwgdWludCBob2RsQW1vdW50LCB1aW50IGVuZFRpbWUpOwogICAgZXZlbnQgSG9kbFdpdGhkcmF3bih1aW50IGluZGV4ZWQgaWQsIGFkZHJlc3MgaW5kZXhlZCBieVdobywgdWludCBob2RsQW1vdW50KTsKCiAgICBldmVudCBNYXhpbXVtSG9kbER1cmF0aW9uQ2hhbmdlZCh1aW50IG9sZExpbWl0LCB1aW50IG5ld0xpbWl0KTsKCiAgICBzdHJ1Y3QgSG9kbEluc3RhbmNlIHsKICAgICAgICB1aW50IGluc3RJZDsKICAgICAgICBhZGRyZXNzIGluc3RPd25lcjsKICAgICAgICBib29sIGhhc0JlZW5XaXRoZHJhd247CiAgICAgICAgdWludCBob2RsQW1vdW50OwogICAgICAgIHVpbnQgZW5kVGltZTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5SW5zdGFuY2VPd25lcih1aW50IF9pbnN0SWQpIHsKICAgICAgICByZXF1aXJlKGluc3RhbmNlc1tfaW5zdElkXS5pbnN0T3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgaW5zdGFuY2VFeGlzdHModWludCBfaW5zdElkKSB7CiAgICAgICAgcmVxdWlyZShpbnN0YW5jZXNbX2luc3RJZF0uaW5zdElkID09IF9pbnN0SWQpOwogICAgICAgIF87CiAgICB9CgogICAgLy8gQ2hhaW4gY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIEhvZGwoYWRkcmVzcyBfY2F0UGF5bWVudENvbGxlY3RvcikgQ0FUQ29udHJhY3QoX2NhdFBheW1lbnRDb2xsZWN0b3IsICJIb2RsIikge30KCiAgICBmdW5jdGlvbiBjcmVhdGVOZXdIb2RsKHVpbnQgX2VuZFRpbWUpIGV4dGVybmFsIHBheWFibGUgYmxvY2tDYXRFbnRyeVBvaW50IGxpbWl0VHJhbnNhY3Rpb25WYWx1ZSB3aGVuTm90UGF1c2VkIHJldHVybnMgKHVpbnQgY3VycmVudElkKSB7CiAgICAgICAgLy8gQ2Fubm90IGhvZGwgaW4gdGhlIHBhc3QKICAgICAgICByZXF1aXJlKF9lbmRUaW1lID49IG5vdyk7CiAgICAgICAgLy8gQ2Fubm90IGhvZGwgZm9yIGxvbmdlciB0aGFuIHRoZSBtYXggY2FwIG9uIGR1cmF0aW9uCiAgICAgICAgcmVxdWlyZSgoX2VuZFRpbWUgLSBub3cpIDw9IG1heGltdW1Ib2RsRHVyYXRpb24pOwogICAgICAgIC8vIENhbm5vdCBob2RsIG5vdGhpbmcKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwoKICAgICAgICBjdXJyZW50SWQgPSBpbnN0YW5jZUlkOwogICAgICAgIGFkZHJlc3MgaW5zdGFuY2VPd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludCBob2RsQW1vdW50ID0gbXNnLnZhbHVlOwogICAgICAgIHVpbnQgZW5kVGltZSA9IF9lbmRUaW1lOwogICAgICAgIEhvZGxJbnN0YW5jZSBzdG9yYWdlIGN1ckluc3QgPSBpbnN0YW5jZXNbY3VycmVudElkXTsKCiAgICAgICAgY3VySW5zdC5pbnN0SWQgPSBjdXJyZW50SWQ7CiAgICAgICAgY3VySW5zdC5pbnN0T3duZXIgPSBpbnN0YW5jZU93bmVyOwogICAgICAgIGN1ckluc3QuaGFzQmVlbldpdGhkcmF3biA9IGZhbHNlOwogICAgICAgIGN1ckluc3QuaG9kbEFtb3VudCA9IGhvZGxBbW91bnQ7CiAgICAgICAgY3VySW5zdC5lbmRUaW1lID0gZW5kVGltZTsKICAgICAgICAKICAgICAgICBIb2RsQ3JlYXRlZChjdXJyZW50SWQsIGluc3RhbmNlT3duZXIsIGhvZGxBbW91bnQsIGVuZFRpbWUpOwogICAgICAgIGluc3RhbmNlSWQrKzsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50IF9pbnN0SWQpIGV4dGVybmFsIG9ubHlJbnN0YW5jZU93bmVyKF9pbnN0SWQpIGluc3RhbmNlRXhpc3RzKF9pbnN0SWQpIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIEhvZGxJbnN0YW5jZSBzdG9yYWdlIGN1ckluc3QgPSBpbnN0YW5jZXNbX2luc3RJZF07CiAgICAgICAgLy8gVGhlIGhvZGwgaGFzIHBhc3NlZCBpdHMgdW5sb2NrIGRhdGUKICAgICAgICByZXF1aXJlKG5vdyA+PSBjdXJJbnN0LmVuZFRpbWUpOwogICAgICAgIC8vIFRoZSBob2RsIGhhcyBub3QgYmVlbiB3aXRoZHJhd24gYmVmb3JlCiAgICAgICAgcmVxdWlyZShjdXJJbnN0Lmhhc0JlZW5XaXRoZHJhd24gPT0gZmFsc2UpOwoKICAgICAgICBjdXJJbnN0Lmhhc0JlZW5XaXRoZHJhd24gPSB0cnVlOwogICAgICAgIGN1ckluc3QuaW5zdE93bmVyLnRyYW5zZmVyKGN1ckluc3QuaG9kbEFtb3VudCk7CiAgICAgICAgSG9kbFdpdGhkcmF3bihfaW5zdElkLCBtc2cuc2VuZGVyLCBjdXJJbnN0LmhvZGxBbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZU1heGltdW1Ib2RsRHVyYXRpb24odWludCBfbmV3TGltaXQpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgTWF4aW11bUhvZGxEdXJhdGlvbkNoYW5nZWQobWF4aW11bUhvZGxEdXJhdGlvbiwgX25ld0xpbWl0KTsKICAgICAgICBtYXhpbXVtSG9kbER1cmF0aW9uID0gX25ld0xpbWl0OwogICAgfQoKICAgIC8vIEluZm9ybWF0aW9uIGZ1bmN0aW9ucwogICAgZnVuY3Rpb24gZ2V0SG9kbE93bmVyKHVpbnQgX2luc3RJZCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBpbnN0YW5jZXNbX2luc3RJZF0uaW5zdE93bmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEhvZGxIYXNCZWVuV2l0aGRyYXduKHVpbnQgX2luc3RJZCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBpbnN0YW5jZXNbX2luc3RJZF0uaGFzQmVlbldpdGhkcmF3bjsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRIb2RsQW1vdW50KHVpbnQgX2luc3RJZCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBpbnN0YW5jZXNbX2luc3RJZF0uaG9kbEFtb3VudDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRFbmRUaW1lKHVpbnQgX2luc3RJZCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBpbnN0YW5jZXNbX2luc3RJZF0uZW5kVGltZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUaW1lVW50aWxFbmQodWludCBfaW5zdElkKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zIChpbnQpIHsKICAgICAgICByZXR1cm4gaW50KGluc3RhbmNlc1tfaW5zdElkXS5lbmRUaW1lIC0gbm93KTsKICAgIH0KfQ=='.
	

]
