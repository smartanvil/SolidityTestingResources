Class {
	#name : #SRTf05a9382A4C3F29E2784502754293D88b835109C,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf05a9382A4C3F29E2784502754293D88b835109C >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEZpbmFsaXphYmxlVG9rZW4gewogICAgYm9vbCBwdWJsaWMgaXNGaW5hbGl6ZWQgPSBmYWxzZTsKfQoKY29udHJhY3QgQmFzaWNUb2tlbiBpcyBGaW5hbGl6YWJsZVRva2VuLCBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHsKICAgIGlmICghaXNGaW5hbGl6ZWQpIHJldmVydCgpOwoKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLiAKICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgewogICAgaWYgKCFpc0ZpbmFsaXplZCkgcmV2ZXJ0KCk7CgogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIGlmIChfdmFsdWUgPiBfYWxsb3dhbmNlKSB0aHJvdzsKCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHJldmVydCgpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9Cgp9Cgpjb250cmFjdCBTaW1wbGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsKCiAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIlNpbXBsZVRva2VuIjsKICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJTSU0iOwogIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzID0gMTg7CiAgdWludDI1NiBwdWJsaWMgSU5JVElBTF9TVVBQTFkgPSAxMDAwMDsKCiAgLyoqCiAgICogQGRldiBDb250cnVjdG9yIHRoYXQgZ2l2ZXMgbXNnLnNlbmRlciBhbGwgb2YgZXhpc3RpbmcgdG9rZW5zLiAKICAgKi8KICBmdW5jdGlvbiBTaW1wbGVUb2tlbigpIHsKICAgIHRvdGFsU3VwcGx5ID0gSU5JVElBTF9TVVBQTFk7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IElOSVRJQUxfU1VQUExZOwogIH0KCn0KCgoKCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqIAogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuIAogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgIHJldmVydCgpOwogICAgfQogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uIAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogIH0KCn0KCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgpsaWJyYXJ5IE1hdGggewogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQp9Cgpjb250cmFjdCBSZXhUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKCiAgZnVuY3Rpb24gdmVyc2lvbigpIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzMzIpIHsKICAgICAgcmV0dXJuICIwLjEuMi1kZWJ1ZyI7CiAgfQoKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiUkVYIC0gUmVhbCBFc3RhdGUgdG9rZW5zIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJSRVgiOwogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogIHVpbnQyNTYgY29uc3RhbnQgQkFTRV9SQVRFID0gNzAwOwogIHVpbnQyNTYgY29uc3RhbnQgRVRIX1JBVEUgPSAyMjU7IC8vIFRPRE86IHVwZGF0ZSBiZWZvcmUgZGVwbG95aW5nCiAgdWludDI1NiBjb25zdGFudCBVU0RfUkFJU0VEX0NBUCA9IDI3KjEwKio2OyAvLyAzMCoxMCoqNiA9ICQzMCBNaWxsaW9uIFVTRAogIHVpbnQyNTYgY29uc3RhbnQgRVRIRVJfUkFJU0VEX0NBUCA9IFVTRF9SQUlTRURfQ0FQIC8gRVRIX1JBVEU7CiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgV0VJX1JBSVNFRF9DQVAgPSBFVEhFUl9SQUlTRURfQ0FQICogMSBldGhlcjsKICB1aW50MjU2IGNvbnN0YW50IERVUkFUSU9OID0gNCB3ZWVrczsKCiAgdWludDI1NiBUT1RBTF9TSEFSRSA9IDEwMDA7CiAgdWludDI1NiBDUk9XRFNBTEVfU0hBUkUgPSA1MDA7CgogIGFkZHJlc3MgQU5HRUxTX0FERFJFU1MgPSAweDAwOTk4ZWJhMEU1QjgzMDE4YTBDRkNkZUNjNTMwNGY5ZjE2N2QyN2E7CiAgdWludDI1NiBBTkdFTFNfU0hBUkUgPSA1MDsKCiAgYWRkcmVzcyBDT1JFXzFfQUREUkVTUyA9IDB4NGFENDhCRTliZjZFMmQzNTI3N0JkMzNDMTAwRDI4M0MyOUM3OTUxRjsKICB1aW50MjU2IENPUkVfMV9TSEFSRSA9IDc1OwogIGFkZHJlc3MgQ09SRV8yX0FERFJFU1MgPSAweDJhNjI2MDljNkE2YkRCRTI1RGE0ZmIwNTk4MGU4NWRiOUE0NzlDNWU7CiAgdWludDI1NiBDT1JFXzJfU0hBUkUgPSA3NTsKCiAgYWRkcmVzcyBQQVJUTkVSU0hJUF9BRERSRVNTID0gMHg1M0I4ZkZCZTM1QUU1NDhmMjJkNWEzYjMxRDZFNWUwQzA0ZjBkMkRGOwogIHVpbnQyNTYgUEFSVE5FUlNISVBfU0hBUkUgPSA3MDsKCiAgYWRkcmVzcyBSRVdBUkRTX0FERFJFU1MgPSAweDQzRjFhYTA0N0QzMjQxQjdERDI1MEVCMzdiMjVmYzUwOTA4NWZEZjk7CiAgdWludDI1NiBSRVdBUkRTX1NIQVJFID0gMjAwOwoKICBhZGRyZXNzIEFGRklMSUFURV9BRERSRVNTID0gMHg2NGVhNjJBODA4MGVEMUMyYjhkOTk2QUNDN2E4MjEwODk3NWU1MzYxOwogIHVpbnQyNTYgQUZGSUxJQVRFX1NIQVJFID0gMzA7CgogIC8vIHN0YXRlIHZhcmlhYmxlcwogIGFkZHJlc3MgdmF1bHQ7CiAgYWRkcmVzcyBwcmV2aW91c1Rva2VuOwogIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZTsKICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWQ7CgogIGV2ZW50IFRva2VuQ3JlYXRlZChhZGRyZXNzIGluZGV4ZWQgaW52ZXN0b3IsIHVpbnQyNTYgYW1vdW50KTsKCiAgZnVuY3Rpb24gUmV4VG9rZW4odWludDI1NiBfc3RhcnQsIGFkZHJlc3MgX3ZhdWx0LCBhZGRyZXNzIF9wcmV2aW91c1Rva2VuKSB7CiAgICBzdGFydFRpbWUgPSBfc3RhcnQ7CiAgICB2YXVsdCA9IF92YXVsdDsKICAgIHByZXZpb3VzVG9rZW4gPSBfcHJldmlvdXNUb2tlbjsKICAgIGlzRmluYWxpemVkID0gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgIGNyZWF0ZVRva2Vucyhtc2cuc2VuZGVyKTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZVRva2VucyhhZGRyZXNzIHJlY2lwaWVudCkgcGF5YWJsZSB7CiAgICBpZiAodG9rZW5TYWxlT25Ib2xkKSByZXZlcnQoKTsKICAgIGlmIChtc2cudmFsdWUgPT0gMCkgcmV2ZXJ0KCk7CiAgICBpZiAobm93IDwgc3RhcnRUaW1lKSByZXZlcnQoKTsKICAgIGlmIChub3cgPiBzdGFydFRpbWUgKyBEVVJBVElPTikgcmV2ZXJ0KCk7CgogICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CgogICAgaWYgKHdlaVJhaXNlZCA+PSBXRUlfUkFJU0VEX0NBUCkgcmV2ZXJ0KCk7CgogICAgLy9pZiBmdW5kZXIgc2VudCBtb3JlIHRoYW4gdGhlIHJlbWFpbmluZyBhbW91bnQgdGhlbiBzZW5kIHRoZW0gYSByZWZ1bmQgb2YgdGhlIGRpZmZlcmVuY2UKICAgIGlmICgod2VpUmFpc2VkICsgd2VpQW1vdW50KSA+IFdFSV9SQUlTRURfQ0FQKSB7CiAgICAgIHdlaUFtb3VudCA9IFdFSV9SQUlTRURfQ0FQIC0gd2VpUmFpc2VkOwogICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChtc2cudmFsdWUgLSB3ZWlBbW91bnQpKSAKICAgICAgICByZXZlcnQoKTsKICAgIH0KCiAgICAvLyBjYWxjdWxhdGUgdG9rZW4gYW1vdW50IHRvIGJlIGNyZWF0ZWQKICAgIHVpbnQyNTYgdG9rZW5zID0gd2VpQW1vdW50Lm11bChnZXRSYXRlKCkpOwoKICAgIC8vIHVwZGF0ZSB0b3RhbHMKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKHRva2Vucyk7CiAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IGJhbGFuY2VzW3JlY2lwaWVudF0uYWRkKHRva2Vucyk7CiAgICBUb2tlbkNyZWF0ZWQocmVjaXBpZW50LCB0b2tlbnMpOwoKICAgIC8vIHNlbmQgZXRoZXIgdG8gdGhlIHZhdWx0CiAgICBpZiAoIXZhdWx0LnNlbmQod2VpQW1vdW50KSkgcmV2ZXJ0KCk7CiAgfQoKICAvLyByZXR1cm4gZHluYW1pYyBwcmljaW5nCiAgZnVuY3Rpb24gZ2V0UmF0ZSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYm9udXMgPSAwOwogICAgaWYgKG5vdyA8IChzdGFydFRpbWUgKyAxIHdlZWtzKSkgewogICAgICBib251cyA9IDMwMDsKICAgIH0gZWxzZSBpZiAobm93IDwgKHN0YXJ0VGltZSArIDIgd2Vla3MpKSB7CiAgICAgIGJvbnVzID0gMjAwOwogICAgfSBlbHNlIGlmIChub3cgPCAoc3RhcnRUaW1lICsgMyB3ZWVrcykpIHsKICAgICAgYm9udXMgPSAxMDA7CiAgICB9CiAgICByZXR1cm4gQkFTRV9SQVRFLmFkZChib251cyk7CiAgfQoKICBmdW5jdGlvbiB0b2tlbkFtb3VudCh1aW50MjU2IHNoYXJlLCB1aW50MjU2IGZpbmFsU3VwcGx5KSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICBpZiAoc2hhcmUgPiBUT1RBTF9TSEFSRSkgcmV2ZXJ0KCk7CgogICAgcmV0dXJuIHNoYXJlLm11bChmaW5hbFN1cHBseSkuZGl2KFRPVEFMX1NIQVJFKTsKICB9CgogIC8vIGdyYW50IHJlZ3VsYXIgdG9rZW5zIGJ5IHNoYXJlCiAgZnVuY3Rpb24gZ3JhbnRUb2tlbnNCeVNoYXJlKGFkZHJlc3MgdG8sIHVpbnQyNTYgc2hhcmUsIHVpbnQyNTYgZmluYWxTdXBwbHkpIGludGVybmFsIHsKICAgIHVpbnQyNTYgdG9rZW5zID0gdG9rZW5BbW91bnQoc2hhcmUsIGZpbmFsU3VwcGx5KTsKICAgIGJhbGFuY2VzW3RvXSA9IGJhbGFuY2VzW3RvXS5hZGQodG9rZW5zKTsKICAgIFRva2VuQ3JlYXRlZCh0bywgdG9rZW5zKTsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKHRva2Vucyk7CiAgfQoKICBmdW5jdGlvbiBnZXRGaW5hbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBUT1RBTF9TSEFSRS5tdWwodG90YWxTdXBwbHkpLmRpdihDUk9XRFNBTEVfU0hBUkUpOwogIH0KCgogIC8vIGRvIGZpbmFsIHRva2VuIGRpc3RyaWJ1dGlvbgogIGZ1bmN0aW9uIGZpbmFsaXplKCkgb25seU93bmVyKCkgewogICAgaWYgKGlzRmluYWxpemVkKSByZXZlcnQoKTsKCiAgICAvL2lmIHdlIGFyZSB1bmRlciB0aGUgY2FwIGFuZCBub3QgaGl0IHRoZSBkdXJhdGlvbiB0aGVuIHRocm93CiAgICBpZiAod2VpUmFpc2VkIDwgV0VJX1JBSVNFRF9DQVAgJiYgbm93IDw9IHN0YXJ0VGltZSArIERVUkFUSU9OKSByZXZlcnQoKTsKCiAgICB1aW50MjU2IGZpbmFsU3VwcGx5ID0gZ2V0RmluYWxTdXBwbHkoKTsKCiAgICBncmFudFRva2Vuc0J5U2hhcmUoQU5HRUxTX0FERFJFU1MsIEFOR0VMU19TSEFSRSwgZmluYWxTdXBwbHkpOwogICAgZ3JhbnRUb2tlbnNCeVNoYXJlKENPUkVfMV9BRERSRVNTLCBDT1JFXzFfU0hBUkUsIGZpbmFsU3VwcGx5KTsKICAgIGdyYW50VG9rZW5zQnlTaGFyZShDT1JFXzJfQUREUkVTUywgQ09SRV8yX1NIQVJFLCBmaW5hbFN1cHBseSk7CgogICAgZ3JhbnRUb2tlbnNCeVNoYXJlKFBBUlRORVJTSElQX0FERFJFU1MsIFBBUlRORVJTSElQX1NIQVJFLCBmaW5hbFN1cHBseSk7CiAgICBncmFudFRva2Vuc0J5U2hhcmUoUkVXQVJEU19BRERSRVNTLCBSRVdBUkRTX1NIQVJFLCBmaW5hbFN1cHBseSk7CiAgICBncmFudFRva2Vuc0J5U2hhcmUoQUZGSUxJQVRFX0FERFJFU1MsIEFGRklMSUFURV9TSEFSRSwgZmluYWxTdXBwbHkpOwogICAgCiAgICBpc0ZpbmFsaXplZCA9IHRydWU7CiAgfQoKICBib29sIHB1YmxpYyB0b2tlblNhbGVPbkhvbGQ7CgogIGZ1bmN0aW9uIHRvZ2dsZVRva2VuU2FsZU9uSG9sZCgpIG9ubHlPd25lcigpIHsKICAgIGlmICh0b2tlblNhbGVPbkhvbGQpCiAgICAgIHRva2VuU2FsZU9uSG9sZCA9IGZhbHNlOwogICAgZWxzZQogICAgICB0b2tlblNhbGVPbkhvbGQgPSB0cnVlOwogIH0KCiAgYm9vbCBwdWJsaWMgbWlncmF0ZURpc2FibGVkOwoKICBzdHJ1Y3Qgc3RydWN0TWlncmF0ZSB7CiAgICB1aW50IGRhdGVUaW1lQ3JlYXRlZDsKICAgIHVpbnQgYW1vdW50OwogIH0KCiAgbWFwcGluZyhhZGRyZXNzID0+IHN0cnVjdE1pZ3JhdGUpIHBlbmRpbmdNaWdyYXRpb25zOwoKICBmdW5jdGlvbiB0b2dnbGVNaWdyYXRpb25TdGF0dXMoKSBvbmx5T3duZXIoKSB7CiAgICBpZiAobWlncmF0ZURpc2FibGVkKQogICAgICBtaWdyYXRlRGlzYWJsZWQgPSBmYWxzZTsKICAgIGVsc2UKICAgICAgbWlncmF0ZURpc2FibGVkID0gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIG1pZ3JhdGUodWludDI1NiBhbW91bnQpIHsKCiAgICAvL2RvbnQgYWxsb3cgbWlncmF0aW9ucyB1bnRpbCBjcm93ZGZ1bmQgaXMgZG9uZQogICAgaWYgKCFpc0ZpbmFsaXplZCkgCiAgICAgIHJldmVydCgpOwoKICAgIC8vZG9udCBwcm9jZWVkIGlmIG1pZ3JhdGUgaXMgZGlzYWJsZWQKICAgIGlmIChtaWdyYXRlRGlzYWJsZWQpIAogICAgICByZXZlcnQoKTsKCiAgICAvL2RvbnQgcHJvY2VlZCBpZiB0aGVyZSBpcyBwZW5kaW5nIHZhbHVlCiAgICBpZiAocGVuZGluZ01pZ3JhdGlvbnNbbXNnLnNlbmRlcl0uYW1vdW50ID4gMCkKICAgICAgcmV2ZXJ0KCk7CgoKICAgIC8vdGhpcyB3aWxsIHRocm93IGlmIHRoZXkgZG9udCBoYXZlIHRoZSBiYWxhbmNlL2FsbG93YW5jZQogICAgU3RhbmRhcmRUb2tlbihwcmV2aW91c1Rva2VuKS50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgYW1vdW50KTsKCiAgICAvL3N0b3JlIHRpbWUgYW5kIGFtb3VudCBpbiBwZW5kaW5nIG1hcHBpbmcKICAgIHBlbmRpbmdNaWdyYXRpb25zW21zZy5zZW5kZXJdLmRhdGVUaW1lQ3JlYXRlZCA9IG5vdzsKICAgIHBlbmRpbmdNaWdyYXRpb25zW21zZy5zZW5kZXJdLmFtb3VudCA9IGFtb3VudDsKICB9CgogIGZ1bmN0aW9uIGNsYWltTWlncmF0ZSgpIHsKCiAgICAvL2RvbnQgYWxsb3cgaWYgbWlncmF0aW9ucyBhcmUgZGlzYWJsZWQKICAgIGlmIChtaWdyYXRlRGlzYWJsZWQpIAogICAgICByZXZlcnQoKTsKCiAgICAvL2RvbnQgcHJvY2VlZCBpZiBubyB2YWx1ZQogICAgaWYgKHBlbmRpbmdNaWdyYXRpb25zW21zZy5zZW5kZXJdLmFtb3VudCA9PSAwKQogICAgICByZXZlcnQoKTsKCiAgICAvL2NhbiBvbmx5IGNsYWltIGFmdGVyIGEgd2VlayBoYXMgcGFzc2VkCiAgICBpZiAobm93IDwgcGVuZGluZ01pZ3JhdGlvbnNbbXNnLnNlbmRlcl0uZGF0ZVRpbWVDcmVhdGVkICsgMSB3ZWVrcykKICAgICAgcmV2ZXJ0KCk7CgogICAgLy9jcmVkaXQgdGhlIGJhbGFuY2VzCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBwZW5kaW5nTWlncmF0aW9uc1ttc2cuc2VuZGVyXS5hbW91bnQ7CiAgICB0b3RhbFN1cHBseSArPSBwZW5kaW5nTWlncmF0aW9uc1ttc2cuc2VuZGVyXS5hbW91bnQ7CgogICAgLy9yZW1vdmUgdGhlIHBlbmRpbmcgbWlncmF0aW9uIGZyb20gdGhlIG1hcHBpbmcKICAgIGRlbGV0ZSBwZW5kaW5nTWlncmF0aW9uc1ttc2cuc2VuZGVyXTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyT3duQ29pbnMoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5T3duZXIoKSB7CiAgICBpZiAoIWlzRmluYWxpemVkKSByZXZlcnQoKTsKCiAgICBiYWxhbmNlc1t0aGlzXSA9IGJhbGFuY2VzW3RoaXNdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcih0aGlzLCBfdG8sIF92YWx1ZSk7CiAgfQoKfQ=='.
	

]
