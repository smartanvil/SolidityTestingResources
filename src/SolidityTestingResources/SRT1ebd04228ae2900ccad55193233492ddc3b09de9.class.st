Class {
	#name : #SRT1ebd04228ae2900ccad55193233492ddc3b09de9,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1ebd04228ae2900ccad55193233492ddc3b09de9 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgVG9rZW4gewogICAgLyogVGhpcyBpcyBhIHNsaWdodCBjaGFuZ2UgdG8gdGhlIEVSQzIwIGJhc2Ugc3RhbmRhcmQuCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKICAgIGlzIHJlcGxhY2VkIHdpdGg6CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIFRoaXMgYXV0b21hdGljYWxseSBjcmVhdGVzIGEgZ2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgdG90YWxTdXBwbHkuCiAgICBUaGlzIGlzIG1vdmVkIHRvIHRoZSBiYXNlIGNvbnRyYWN0IHNpbmNlIHB1YmxpYyBnZXR0ZXIgZnVuY3Rpb25zIGFyZSBub3QKICAgIGN1cnJlbnRseSByZWNvZ25pc2VkIGFzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBtYXRjaGluZyBhYnN0cmFjdAogICAgZnVuY3Rpb24gYnkgdGhlIGNvbXBpbGVyLgogICAgKi8KICAgIC8vLyB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4gewoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy9EZWZhdWx0IGFzc3VtZXMgdG90YWxTdXBwbHkgY2FuJ3QgYmUgb3ZlciBtYXggKDJeMjU2IC0gMSkuCiAgICAgICAgLy9JZiB5b3VyIHRva2VuIGxlYXZlcyBvdXQgdG90YWxTdXBwbHkgYW5kIGNhbiBpc3N1ZSBtb3JlIHRva2VucyBhcyB0aW1lIGdvZXMgb24sIHlvdSBuZWVkIHRvIGNoZWNrIGlmIGl0IGRvZXNuJ3Qgd3JhcC4KICAgICAgICAvL1JlcGxhY2UgdGhlIGlmIHdpdGggdGhpcyBvbmUgaW5zdGVhZC4KICAgICAgICAvL2lmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvL3NhbWUgYXMgYWJvdmUuIFJlcGxhY2UgdGhpcyBsaW5lIHdpdGggdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBwcm90ZWN0IGFnYWluc3Qgd3JhcHBpbmcgdWludHMuCiAgICAgICAgLy9pZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKfQoKY29udHJhY3QgSHVtYW5TdGFuZGFyZFRva2VuIGlzIFN0YW5kYXJkVG9rZW4gewoKICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAvL2lmIGV0aGVyIGlzIHNlbnQgdG8gdGhpcyBhZGRyZXNzLCBzZW5kIGl0IGJhY2suCiAgICAgICAgdGhyb3c7CiAgICB9CgogICAgLyogUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gKi8KCiAgICAvKgogICAgTk9URToKICAgIFRoZSBmb2xsb3dpbmcgdmFyaWFibGVzIGFyZSBPUFRJT05BTCB2YW5pdGllcy4gT25lIGRvZXMgbm90IGhhdmUgdG8gaW5jbHVkZSB0aGVtLgogICAgVGhleSBhbGxvdyBvbmUgdG8gY3VzdG9taXNlIHRoZSB0b2tlbiBjb250cmFjdCAmIGluIG5vIHdheSBpbmZsdWVuY2VzIHRoZSBjb3JlIGZ1bmN0aW9uYWxpdHkuCiAgICBTb21lIHdhbGxldHMvaW50ZXJmYWNlcyBtaWdodCBub3QgZXZlbiBib3RoZXIgdG8gbG9vayBhdCB0aGlzIGluZm9ybWF0aW9uLgogICAgKi8KICAgIHN0cmluZyBwdWJsaWMgbmFtZTsgICAgICAgICAgICAgICAgICAgLy9mYW5jeSBuYW1lOiBlZyBTaW1vbiBCdWNrcwogICAgdWludDggcHVibGljIGRlY2ltYWxzOyAgICAgICAgICAgICAgICAvL0hvdyBtYW55IGRlY2ltYWxzIHRvIHNob3cuIGllLiBUaGVyZSBjb3VsZCAxMDAwIGJhc2UgdW5pdHMgd2l0aCAzIGRlY2ltYWxzLiBNZWFuaW5nIDAuOTgwIFNCWCA9IDk4MCBiYXNlIHVuaXRzLiBJdCdzIGxpa2UgY29tcGFyaW5nIDEgd2VpIHRvIDEgZXRoZXIuCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsgICAgICAgICAgICAgICAgIC8vQW4gaWRlbnRpZmllcjogZWcgU0JYCiAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAnSDAuMSc7ICAgICAgIC8vaHVtYW4gMC4xIHN0YW5kYXJkLiBKdXN0IGFuIGFyYml0cmFyeSB2ZXJzaW9uaW5nIHNjaGVtZS4KCiAgICBmdW5jdGlvbiBIdW1hblN0YW5kYXJkVG9rZW4oCiAgICAgICAgdWludDI1NiBfaW5pdGlhbEFtb3VudCwKICAgICAgICBzdHJpbmcgX3Rva2VuTmFtZSwKICAgICAgICB1aW50OCBfZGVjaW1hbFVuaXRzLAogICAgICAgIHN0cmluZyBfdG9rZW5TeW1ib2wKICAgICAgICApIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IF9pbml0aWFsQW1vdW50OyAgICAgICAgICAgICAgIC8vIEdpdmUgdGhlIGNyZWF0b3IgYWxsIGluaXRpYWwgdG9rZW5zCiAgICAgICAgdG90YWxTdXBwbHkgPSBfaW5pdGlhbEFtb3VudDsgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdG90YWwgc3VwcGx5CiAgICAgICAgbmFtZSA9IF90b2tlbk5hbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIG5hbWUgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsVW5pdHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtb3VudCBvZiBkZWNpbWFscyBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIHN5bWJvbCA9IF90b2tlblN5bWJvbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBzeW1ib2wgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgIH0KCiAgICAvKiBBcHByb3ZlcyBhbmQgdGhlbiBjYWxscyB0aGUgcmVjZWl2aW5nIGNvbnRyYWN0ICovCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgogICAgICAgIC8vY2FsbCB0aGUgcmVjZWl2ZUFwcHJvdmFsIGZ1bmN0aW9uIG9uIHRoZSBjb250cmFjdCB5b3Ugd2FudCB0byBiZSBub3RpZmllZC4gVGhpcyBjcmFmdHMgdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBtYW51YWxseSBzbyBvbmUgZG9lc24ndCBoYXZlIHRvIGluY2x1ZGUgYSBjb250cmFjdCBpbiBoZXJlIGp1c3QgZm9yIHRoaXMuCiAgICAgICAgLy9yZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuQ29udHJhY3QsIGJ5dGVzIF9leHRyYURhdGEpCiAgICAgICAgLy9pdCBpcyBhc3N1bWVkIHRoYXQgd2hlbiBkb2VzIHRoaXMgdGhhdCB0aGUgY2FsbCAqc2hvdWxkKiBzdWNjZWVkLCBvdGhlcndpc2Ugb25lIHdvdWxkIHVzZSB2YW5pbGxhIGFwcHJvdmUgaW5zdGVhZC4KICAgICAgICBpZighX3NwZW5kZXIuY2FsbChieXRlczQoYnl0ZXMzMihzaGEzKCJyZWNlaXZlQXBwcm92YWwoYWRkcmVzcyx1aW50MjU2LGFkZHJlc3MsYnl0ZXMpIikpKSwgbXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKSkgeyB0aHJvdzsgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9Cgpjb250cmFjdCBMb2NrZWQgewogIHVpbnQgcHVibGljIHBlcmlvZDsKCiAgZnVuY3Rpb24gTG9ja2VkKHVpbnQgX3BlcmlvZCkgcHVibGljIHsKICAgIHBlcmlvZCA9IF9wZXJpb2Q7CiAgfQp9Cgpjb250cmFjdCBPd25lZCB7CiAgICBmdW5jdGlvbiBPd25lZCgpIHsgb3duZXIgPSBtc2cuc2VuZGVyOyB9CiAgICBhZGRyZXNzIG93bmVyOwoKICAgIC8vIFRoaXMgY29udHJhY3Qgb25seSBkZWZpbmVzIGEgbW9kaWZpZXIgYnV0IGRvZXMgbm90IHVzZQogICAgLy8gaXQgLSBpdCB3aWxsIGJlIHVzZWQgaW4gZGVyaXZlZCBjb250cmFjdHMuCiAgICAvLyBUaGUgZnVuY3Rpb24gYm9keSBpcyBpbnNlcnRlZCB3aGVyZSB0aGUgc3BlY2lhbCBzeW1ib2wKICAgIC8vICJfOyIgaW4gdGhlIGRlZmluaXRpb24gb2YgYSBtb2RpZmllciBhcHBlYXJzLgogICAgLy8gVGhpcyBtZWFucyB0aGF0IGlmIHRoZSBvd25lciBjYWxscyB0aGlzIGZ1bmN0aW9uLCB0aGUKICAgIC8vIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIGFuZCBvdGhlcndpc2UsIGFuIGV4Y2VwdGlvbiBpcwogICAgLy8gdGhyb3duLgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IFNhbGVzIGlzIE93bmVkIHsKICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CiAgSHVtYW5TdGFuZGFyZFRva2VuIHB1YmxpYyB0b2tlbjsKICBMb2NrZWQgcHVibGljIGxvY2tlZDsKICB1aW50IHB1YmxpYyBwcmljZTsKICB1aW50IHB1YmxpYyBzdGFydEJsb2NrOwogIHVpbnQgcHVibGljIGZyZWV6ZUJsb2NrOwogIGJvb2wgcHVibGljIGZyb3plbiA9IGZhbHNlOwogIHVpbnQyNTYgcHVibGljIGNhcCA9IDA7CiAgdWludDI1NiBwdWJsaWMgc29sZCA9IDA7CiAgdWludCBjcmVhdGVkOwoKICBldmVudCBQdXJjaGFzZWRUb2tlbnMoYWRkcmVzcyBpbmRleGVkIHB1cmNoYXNlciwgdWludCBhbW91bnQpOwoKICBtb2RpZmllciBzYWxlSGFwcGVuaW5nIHsKICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID49IHN0YXJ0QmxvY2spOwogICAgcmVxdWlyZShibG9jay5udW1iZXIgPD0gZnJlZXplQmxvY2spOwogICAgcmVxdWlyZSghZnJvemVuKTsKICAgIHJlcXVpcmUoc29sZCA8IGNhcCk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gU2FsZXMoCiAgICBhZGRyZXNzIF93YWxsZXQsCiAgICB1aW50MjU2IF90b2tlblN1cHBseSwKICAgIHN0cmluZyBfdG9rZW5OYW1lLAogICAgdWludDggX3Rva2VuRGVjaW1hbHMsCiAgICBzdHJpbmcgX3Rva2VuU3ltYm9sLAogICAgdWludCBfcHJpY2UsCiAgICB1aW50IF9zdGFydEJsb2NrLAogICAgdWludCBfZnJlZXplQmxvY2ssCiAgICB1aW50MjU2IF9jYXAsCiAgICB1aW50IF9sb2NrZWQKICApIHsKICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICB0b2tlbiA9IG5ldyBIdW1hblN0YW5kYXJkVG9rZW4oX3Rva2VuU3VwcGx5LCBfdG9rZW5OYW1lLCBfdG9rZW5EZWNpbWFscywgX3Rva2VuU3ltYm9sKTsKICAgIGxvY2tlZCA9IG5ldyBMb2NrZWQoX2xvY2tlZCk7CiAgICBwcmljZSA9IF9wcmljZTsKICAgIHN0YXJ0QmxvY2sgPSBfc3RhcnRCbG9jazsKICAgIGZyZWV6ZUJsb2NrID0gX2ZyZWV6ZUJsb2NrOwogICAgY2FwID0gX2NhcDsKICAgIGNyZWF0ZWQgPSBub3c7CgogICAgdWludDI1NiBvd25lcnNWYWx1ZSA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwodG9rZW4udG90YWxTdXBwbHkoKSwgMjApLCAxMDApOwogICAgYXNzZXJ0KHRva2VuLnRyYW5zZmVyKHdhbGxldCwgb3duZXJzVmFsdWUpKTsKCiAgICB1aW50MjU2IHNhbGVWYWx1ZSA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwodG9rZW4udG90YWxTdXBwbHkoKSwgNjApLCAxMDApOwogICAgYXNzZXJ0KHRva2VuLnRyYW5zZmVyKHRoaXMsIHNhbGVWYWx1ZSkpOwoKICAgIHVpbnQyNTYgbG9ja2VkVmFsdWUgPSBTYWZlTWF0aC5zdWIodG9rZW4udG90YWxTdXBwbHkoKSwgU2FmZU1hdGguYWRkKG93bmVyc1ZhbHVlLCBzYWxlVmFsdWUpKTsKICAgIGFzc2VydCh0b2tlbi50cmFuc2Zlcihsb2NrZWQsIGxvY2tlZFZhbHVlKSk7CiAgfQoKICBmdW5jdGlvbiBwdXJjaGFzZVRva2VucygpCiAgICBwYXlhYmxlCiAgICBzYWxlSGFwcGVuaW5nIHsKICAgIHVpbnQgZXhjZXNzQW1vdW50ID0gbXNnLnZhbHVlICUgcHJpY2U7CiAgICB1aW50IHB1cmNoYXNlQW1vdW50ID0gU2FmZU1hdGguc3ViKG1zZy52YWx1ZSwgZXhjZXNzQW1vdW50KTsKICAgIHVpbnQgdG9rZW5QdXJjaGFzZSA9IFNhZmVNYXRoLmRpdihwdXJjaGFzZUFtb3VudCwgcHJpY2UpOwoKICAgIHJlcXVpcmUodG9rZW5QdXJjaGFzZSA8PSB0b2tlbi5iYWxhbmNlT2YodGhpcykpOwoKICAgIGlmIChleGNlc3NBbW91bnQgPiAwKSB7CiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZXhjZXNzQW1vdW50KTsKICAgIH0KCiAgICBzb2xkID0gU2FmZU1hdGguYWRkKHNvbGQsIHRva2VuUHVyY2hhc2UpOwogICAgYXNzZXJ0KHNvbGQgPD0gY2FwKTsKICAgIHdhbGxldC50cmFuc2ZlcihwdXJjaGFzZUFtb3VudCk7CiAgICBhc3NlcnQodG9rZW4udHJhbnNmZXIobXNnLnNlbmRlciwgdG9rZW5QdXJjaGFzZSkpOwogICAgUHVyY2hhc2VkVG9rZW5zKG1zZy5zZW5kZXIsIHRva2VuUHVyY2hhc2UpOwogIH0KCiAgLyogb3duZXIgb25seSBmdW5jdGlvbnMgKi8KICBmdW5jdGlvbiBjaGFuZ2VCbG9ja3ModWludCBfbmV3U3RhcnRCbG9jaywgdWludCBfbmV3RnJlZXplQmxvY2spCiAgICBvbmx5T3duZXIgewogICAgcmVxdWlyZShfbmV3U3RhcnRCbG9jayAhPSAwKTsKICAgIHJlcXVpcmUoX25ld0ZyZWV6ZUJsb2NrID49IF9uZXdTdGFydEJsb2NrKTsKICAgIHN0YXJ0QmxvY2sgPSBfbmV3U3RhcnRCbG9jazsKICAgIGZyZWV6ZUJsb2NrID0gX25ld0ZyZWV6ZUJsb2NrOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlUHJpY2UodWludCBfbmV3UHJpY2UpIAogICAgb25seU93bmVyIHsKICAgIHJlcXVpcmUoX25ld1ByaWNlID4gMCk7CiAgICBwcmljZSA9IF9uZXdQcmljZTsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZUNhcCh1aW50MjU2IF9uZXdDYXApCiAgICBvbmx5T3duZXIgewogICAgcmVxdWlyZShfbmV3Q2FwID4gMCk7CiAgICBjYXAgPSBfbmV3Q2FwOwogIH0KCiAgZnVuY3Rpb24gdW5sb2NrRXNjcm93KCkKICAgIG9ubHlPd25lciB7CiAgICBhc3NlcnQoKG5vdyAtIGNyZWF0ZWQpID4gbG9ja2VkLnBlcmlvZCgpKTsKICAgIGFzc2VydCh0b2tlbi50cmFuc2Zlcih3YWxsZXQsIHRva2VuLmJhbGFuY2VPZihsb2NrZWQpKSk7CiAgfQoKICBmdW5jdGlvbiB0b2dnbGVGcmVlemUoKQogICAgb25seU93bmVyIHsKICAgICAgZnJvemVuID0gIWZyb3plbjsKICB9Cn0='.
	

]
