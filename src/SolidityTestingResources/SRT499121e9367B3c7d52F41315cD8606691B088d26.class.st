Class {
	#name : #SRT499121e9367B3c7d52F41315cD8606691B088d26,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT499121e9367B3c7d52F41315cD8606691B088d26 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoCnsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZQogICAgICAgIHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUKICAgICAgICByZXR1cm5zICh1aW50MjU2KQogICAgewogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZQogICAgICAgIHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZQogICAgICAgIHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCi8qKgogKiBAdGl0bGUgT3duYWJsZVRva2VuCiAqIEBkZXYgVGhlIE93bmFibGVUb2tlbiBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZVRva2VuCnsKICAgIGFkZHJlc3Mgb3duZXI7CgogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBPd25hYmxlVG9rZW4gY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAgICogYWNjb3VudC4KICAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZVRva2VuKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9Cn0KCgppbnRlcmZhY2UgdG9rZW5SZWNpcGllbnQKewogICAgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90b2tlbiwgYnl0ZXMgX2V4dHJhRGF0YSkgcHVibGljOwp9CgovKioKICogQHRpdGxlIEVSQzIwCiAqIEBkZXYgZWlwMjAgdG9rZW4gaW1wbGVtZW50YXRpb24KICovCmNvbnRyYWN0IEVSQzIwIGlzIE93bmFibGVUb2tlbgp7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICB1aW50MjU2IGNvbnN0YW50IE1BWF9VSU5UMjU2ID0gMioqMjU2IC0gMTsKCiAgICAvLyBQdWJsaWMgdmFyaWFibGVzIG9mIHRoZSB0b2tlbgogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICB1aW50MjU2IHB1YmxpYyBkZWNpbWFscyA9IDg7CiAgICB1aW50MjU2IERFQyA9IDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICB1aW50MjU2IHB1YmxpYyBwcmljZSA9IDAgd2VpOwoKICAgIC8vIFRoaXMgY3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBiYWxhbmNlcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dhbmNlOwoKICAgIC8vIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwoKICAgIC8qKgogICAgICogQ29uc3RyY3RvciBmdW5jdGlvbgogICAgICoKICAgICAqIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdAogICAgICovCiAgICBmdW5jdGlvbiBFUkMyMCgKICAgICAgICB1aW50MjU2IGluaXRpYWxTdXBwbHksCiAgICAgICAgc3RyaW5nIHRva2VuTmFtZSwKICAgICAgICBzdHJpbmcgdG9rZW5TeW1ib2wKICAgICkgcHVibGljCiAgICB7CiAgICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5Lm11bChERUMpOyAgLy8gVXBkYXRlIHRvdGFsIHN1cHBseSB3aXRoIHRoZSBkZWNpbWFsIGFtb3VudAogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHk7ICAgICAgICAgLy8gR2l2ZSB0aGUgY3JlYXRvciBhbGwgaW5pdGlhbCB0b2tlbnMKICAgICAgICBuYW1lID0gdG9rZW5OYW1lOyAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIG5hbWUgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgICAgICBzeW1ib2wgPSB0b2tlblN5bWJvbDsgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgfQoKICAgIC8qKgogICAgICogSW50ZXJuYWwgdHJhbnNmZXIsIG9ubHkgY2FuIGJlIGNhbGxlZCBieSB0aGlzIGNvbnRyYWN0CiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIC0gYWRkcmVzcyBvZiB0aGUgY29udHJhY3QKICAgICAqIEBwYXJhbSBfdG8gLSBhZGRyZXNzIG9mIHRoZSBpbnZlc3RvcgogICAgICogQHBhcmFtIF92YWx1ZSAtIHRva2VucyBmb3IgdGhlIGludmVzdG9yCiAgICAgKi8KICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGludGVybmFsCiAgICB7CiAgICAgICAgLy8gUHJldmVudCB0cmFuc2ZlciB0byAweDAgYWRkcmVzcy4gVXNlIGJ1cm4oKSBpbnN0ZWFkCiAgICAgICAgcmVxdWlyZShfdG8gIT0gMHgwKTsKICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUpOwogICAgICAgIC8vIENoZWNrIGZvciBvdmVyZmxvd3MKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSkgPiBiYWxhbmNlc1tfdG9dKTsKICAgICAgICAvLyBTYXZlIHRoaXMgZm9yIGFuIGFzc2VydGlvbiBpbiB0aGUgZnV0dXJlCiAgICAgICAgdWludCBwcmV2aW91c0JhbGFuY2VzID0gYmFsYW5jZXNbX2Zyb21dLmFkZChiYWxhbmNlc1tfdG9dKTsKICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAvLyBBc3NlcnRzIGFyZSB1c2VkIHRvIHVzZSBzdGF0aWMgYW5hbHlzaXMgdG8gZmluZCBidWdzIGluIHlvdXIgY29kZS4gVGhleSBzaG91bGQgbmV2ZXIgZmFpbAogICAgICAgIGFzc2VydChiYWxhbmNlc1tfZnJvbV0uYWRkKGJhbGFuY2VzW190b10pID09IHByZXZpb3VzQmFsYW5jZXMpOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXIgdG9rZW5zCiAgICAgKgogICAgICogU2VuZCBgX3ZhbHVlYCB0b2tlbnMgdG8gYF90b2AgZnJvbSB5b3VyIGFjY291bnQKICAgICAqCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCB0byBzZW5kCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljCiAgICB7CiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEJhbGFuY2Ugc2hvdwogICAgICoKICAgICAqIEBwYXJhbSBfaG9sZGVyIGN1cnJlbnQgaG9sZGVyIGJhbGFuY2UKICAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX2hvbGRlcikgdmlldyBwdWJsaWMKICAgICAgICByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpCiAgICB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19ob2xkZXJdOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXIgdG9rZW5zIGZyb20gb3RoZXIgYWRkcmVzcwogICAgICoKICAgICAqIFNlbmQgYF92YWx1ZWAgdG9rZW5zIHRvIGBfdG9gIGluIGJlaGFsZiBvZiBgX2Zyb21gCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSB0aGUgYW1vdW50IHRvIHNlbmQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pOyAgICAgLy8gQ2hlY2sgYWxsb3dhbmNlCgogICAgICAgIGlmIChhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIDwgTUFYX1VJTlQyNTYpIHsKICAgICAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgfQoKICAgICAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgYWxsb3dhbmNlIGZvciBvdGhlciBhZGRyZXNzCiAgICAgKgogICAgICogQWxsb3dzIGBfc3BlbmRlcmAgdG8gc3BlbmQgbm8gbW9yZSB0aGFuIGBfdmFsdWVgIHRva2VucyBpbiB5b3VyIGJlaGFsZgogICAgICoKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBhdXRob3JpemVkIHRvIHNwZW5kCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHRoZSBtYXggYW1vdW50IHRoZXkgY2FuIHNwZW5kCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBhbGxvd2FuY2UgZm9yIG90aGVyIGFkZHJlc3MgYW5kIG5vdGlmeQogICAgICoKICAgICAqIEFsbG93cyBgX3NwZW5kZXJgIHRvIHNwZW5kIG5vIG1vcmUgdGhhbiBgX3ZhbHVlYCB0b2tlbnMgaW4geW91ciBiZWhhbGYsIGFuZCB0aGVuIHBpbmcgdGhlIGNvbnRyYWN0IGFib3V0IGl0CiAgICAgKgogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIGF1dGhvcml6ZWQgdG8gc3BlbmQKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIG1heCBhbW91bnQgdGhleSBjYW4gc3BlbmQKICAgICAqIEBwYXJhbSBfZXh0cmFEYXRhIHNvbWUgZXh0cmEgaW5mb3JtYXRpb24gdG8gc2VuZCB0byB0aGUgYXBwcm92ZWQgY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpIHB1YmxpYyBvbmx5T3duZXIKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsKCiAgICAgICAgaWYgKGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSkpIHsKICAgICAgICAgICAgc3BlbmRlci5yZWNlaXZlQXBwcm92YWwobXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKTsKCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICAgKi8KICAgIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwoKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwoKICAgICAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICAgICAgfQoKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogRGVzdHJveSB0b2tlbnMKICAgICAqCiAgICAgKiBSZW1vdmUgYF92YWx1ZWAgdG9rZW5zIGZyb20gdGhlIHN5c3RlbSBpcnJldmVyc2libHkKICAgICAqCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHRoZSBhbW91bnQgb2YgbW9uZXkgdG8gYnVybgogICAgICovCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgb25seU93bmVyCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZXMgdG90YWxTdXBwbHkKCiAgICAgICAgQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIERlc3Ryb3kgdG9rZW5zIGZyb20gb3RoZXIgYWNjb3VudAogICAgICoKICAgICAqIFJlbW92ZSBgX3ZhbHVlYCB0b2tlbnMgZnJvbSB0aGUgc3lzdGVtIGlycmV2ZXJzaWJseSBvbiBiZWhhbGYgb2YgYF9mcm9tYC4KICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gdGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgICogQHBhcmFtIF92YWx1ZSB0aGUgYW1vdW50IG9mIG1vbmV5IHRvIGJ1cm4KICAgICAqLwogICAgZnVuY3Rpb24gYnVybkZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBvbmx5T3duZXIKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKTsgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRhcmdldGVkIGJhbGFuY2UgaXMgZW5vdWdoCiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSk7ICAgIC8vIENoZWNrIGFsbG93YW5jZQoKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7ICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHRhcmdldGVkIGJhbGFuY2UKICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyJ3MgYWxsb3dhbmNlCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbFN1cHBseQoKICAgICAgICBCdXJuKF9mcm9tLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKY29udHJhY3QgUGF1c2VibGVUb2tlbiBpcyBFUkMyMAp7CiAgICBldmVudCBFUGF1c2UoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBzdHJpbmcgaW5kZXhlZCB0ZXh0KTsKICAgIGV2ZW50IEVVbnBhdXNlKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgc3RyaW5nIGluZGV4ZWQgdGV4dCk7CgogICAgYm9vbCBwdWJsaWMgcGF1c2VkID0gdHJ1ZTsKCiAgICBtb2RpZmllciBpc1BhdXNlZCgpCiAgICB7CiAgICAgICAgcmVxdWlyZShwYXVzZWQpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gcGF1c2UoKSBwdWJsaWMgb25seU93bmVyCiAgICB7CiAgICAgICAgcGF1c2VkID0gdHJ1ZTsKICAgICAgICBFUGF1c2Uob3duZXIsICdzYWxlIGlzIHBhdXNlZCcpOwogICAgfQoKICAgIGZ1bmN0aW9uIHBhdXNlSW50ZXJuYWwoKSBpbnRlcm5hbAogICAgewogICAgICAgIHBhdXNlZCA9IHRydWU7CiAgICAgICAgRVBhdXNlKG93bmVyLCAnc2FsZSBpcyBwYXVzZWQnKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1bnBhdXNlKCkgcHVibGljIG9ubHlPd25lcgogICAgewogICAgICAgIHBhdXNlZCA9IGZhbHNlOwogICAgICAgIEVVbnBhdXNlKG93bmVyLCAnc2FsZSBpcyB1bnBhdXNlZCcpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVucGF1c2VJbnRlcm5hbCgpIGludGVybmFsCiAgICB7CiAgICAgICAgcGF1c2VkID0gZmFsc2U7CiAgICAgICAgRVVucGF1c2Uob3duZXIsICdzYWxlIGlzIHVucGF1c2VkJyk7CiAgICB9Cn0KCmNvbnRyYWN0IEVSQzIwRXh0ZW5kaW5nIGlzIEVSQzIwCnsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAgIC8qKgogICAgKiBGdW5jdGlvbiBmb3IgdHJhbnNmZXIgZXRoZXJldW0gZnJvbSBjb250cmFjdCB0byBhbnkgYWRkcmVzcwogICAgKgogICAgKiBAcGFyYW0gX3RvIC0gYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAqIEBwYXJhbSBhbW91bnQgLSBldGhlcmV1bQogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRXRoRnJvbUNvbnRyYWN0KGFkZHJlc3MgX3RvLCB1aW50MjU2IGFtb3VudCkgcHVibGljIG9ubHlPd25lcgogICAgewogICAgICAgIF90by50cmFuc2ZlcihhbW91bnQpOwogICAgfQoKICAgIC8qKgogICAgKiBGdW5jdGlvbiBmb3IgdHJhbnNmZXIgdG9rZW5zIGZyb20gY29udHJhY3QgdG8gYW55IGFkZHJlc3MKICAgICoKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRva2Vuc0Zyb21Db250cmFjdChhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBvbmx5T3duZXIKICAgIHsKICAgICAgICBfdHJhbnNmZXIodGhpcywgX3RvLCBfdmFsdWUpOwogICAgfQp9Cgpjb250cmFjdCBDcm93ZHNhbGVDb250cmFjdCBpcyBQYXVzZWJsZVRva2VuCnsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAgIHVpbnQyNTYgcHVibGljIHJlY2VpdmVkRXRoZXI7ICAvLyBob3cgbWFueSB3ZWlzIHdhcyByYWlzZWQgb24gY3Jvd2RzYWxlCgogICAgZXZlbnQgQ3Jvd2RTYWxlRmluaXNoZWQoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBzdHJpbmcgaW5kZXhlZCB0ZXh0KTsKCiAgICBzdHJ1Y3Qgc2FsZSB7CiAgICAgICAgdWludDI1NiB0b2tlbnM7ICAgLy8gVG9rZW5zIGluIGNyb3dkc2FsZQogICAgICAgIHVpbnQgc3RhcnREYXRlOyAgIC8vIERhdGUgd2hlbiBjcm93c2FsZSB3aWxsIGJlIHN0YXJ0aW5nLCBhZnRlciBpdHMgc3RhcnRpbmcgdGhhdCBwcm9wZXJ0eSB3aWxsIGJlIHRoZSAwCiAgICAgICAgdWludCBlbmREYXRlOyAgICAgLy8gRGF0ZSB3aGVuIGNyb3dkc2FsZSB3aWxsIGJlIHN0b3AKICAgIH0KCiAgICBzYWxlIHB1YmxpYyBTYWxlczsKCiAgICB1aW50OCBwdWJsaWMgZGlzY291bnQ7ICAvLyBEaXNjb3VudAoKICAgIC8qCiAgICAqIEZ1bmN0aW9uIGNvbmZpcm0gYXV0b2Z1bmQKICAgICoKICAgICovCiAgICBmdW5jdGlvbiBjb25maXJtU2VsbCh1aW50MjU2IF9hbW91bnQpIGludGVybmFsIHZpZXcKICAgICAgICByZXR1cm5zKGJvb2wpCiAgICB7CiAgICAgICAgaWYgKFNhbGVzLnRva2VucyA8IF9hbW91bnQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoKICAgICogIE1ha2UgZGlzY291bnQKICAgICovCiAgICBmdW5jdGlvbiBjb3VudERpc2NvdW50KHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHVpbnQyNTYgX2Ftb3VudCA9IChhbW91bnQubXVsKERFQykpLmRpdihwcmljZSk7CiAgICAgICAgX2Ftb3VudCA9IF9hbW91bnQuYWRkKHdpdGhEaXNjb3VudChfYW1vdW50LCBkaXNjb3VudCkpOwoKICAgICAgICByZXR1cm4gX2Ftb3VudDsKICAgIH0KCiAgICAvKiogKwogICAgKiBGdW5jdGlvbiBmb3IgY2hhbmdlIGRpc2NvdW50IGlmIG5lZWQKICAgICoKICAgICovCiAgICBmdW5jdGlvbiBjaGFuZ2VEaXNjb3VudCh1aW50OCBfZGlzY291bnQpIHB1YmxpYyBvbmx5T3duZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIGRpc2NvdW50ID0gX2Rpc2NvdW50OwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBGdW5jdGlvbiBmb3IgYWRkaW5nIGRpc2NvdW50CiAgICAqCiAgICAqLwogICAgZnVuY3Rpb24gd2l0aERpc2NvdW50KHVpbnQyNTYgX2Ftb3VudCwgdWludCBfcGVyY2VudCkgaW50ZXJuYWwgcHVyZQogICAgICAgIHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcmV0dXJuIChfYW1vdW50Lm11bChfcGVyY2VudCkpLmRpdigxMDApOwogICAgfQoKICAgIC8qKgogICAgKiBFeHBhbmRpbmcgb2YgdGhlIGZ1bmN0aW9uYWxpdHkKICAgICoKICAgICogQHBhcmFtIF9wcmljZSBpbiB3ZWlzCiAgICAqLwogICAgZnVuY3Rpb24gY2hhbmdlUHJpY2UodWludDI1NiBfcHJpY2UpIHB1YmxpYyBvbmx5T3duZXIKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgcmVxdWlyZShfcHJpY2UgIT0gMCk7CiAgICAgICAgcHJpY2UgPSBfcHJpY2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoKICAgICogU2VsZXMgbWFuYWdlcgogICAgKgogICAgKi8KICAgIGZ1bmN0aW9uIHBheW1lbnRNYW5hZ2VyKHVpbnQyNTYgdmFsdWUpIGludGVybmFsCiAgICB7CiAgICAgICAgdWludDI1NiBfdmFsdWUgPSAodmFsdWUgKiAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSkgLyAxMCAqKiB1aW50MjU2KDE4KTsKICAgICAgICB1aW50MjU2IGRpc2NvdW50VmFsdWUgPSBjb3VudERpc2NvdW50KF92YWx1ZSk7CiAgICAgICAgYm9vbCBjb25mID0gY29uZmlybVNlbGwoZGlzY291bnRWYWx1ZSk7CgogICAgICAgIC8vIHRyYW5zZmVyIGFsbCBldGhlciB0byB0aGUgY29udHJhY3QKCiAgICAgICAgaWYgKGNvbmYpIHsKCiAgICAgICAgICAgIFNhbGVzLnRva2VucyA9IFNhbGVzLnRva2Vucy5zdWIoX3ZhbHVlKTsKICAgICAgICAgICAgcmVjZWl2ZWRFdGhlciA9IHJlY2VpdmVkRXRoZXIuYWRkKHZhbHVlKTsKCiAgICAgICAgICAgIGlmIChub3cgPj0gU2FsZXMuZW5kRGF0ZSkgewogICAgICAgICAgICAgICAgcGF1c2VJbnRlcm5hbCgpOwogICAgICAgICAgICAgICAgQ3Jvd2RTYWxlRmluaXNoZWQob3duZXIsICdjcm93ZHNhbGUgaXMgZmluaXNoZWQnKTsKICAgICAgICAgICAgfQoKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgU2FsZXMudG9rZW5zID0gU2FsZXMudG9rZW5zLnN1YihTYWxlcy50b2tlbnMpOwogICAgICAgICAgICByZWNlaXZlZEV0aGVyID0gcmVjZWl2ZWRFdGhlci5hZGQodmFsdWUpOwoKICAgICAgICAgICAgcGF1c2VJbnRlcm5hbCgpOwogICAgICAgICAgICBDcm93ZFNhbGVGaW5pc2hlZChvd25lciwgJ2Nyb3dkc2FsZSBpcyBmaW5pc2hlZCcpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcnRXRGlzY291bnQoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBhbW91bnQpIHB1YmxpYyBvbmx5T3duZXIKICAgICAgICByZXR1cm5zKGJvb2wpCiAgICB7CiAgICAgICAgdWludDI1NiBfYW1vdW50ID0gKGFtb3VudC5tdWwoREVDKSkuZGl2KHByaWNlKTsKICAgICAgICBfYW1vdW50ID0gX2Ftb3VudC5hZGQod2l0aERpc2NvdW50KF9hbW91bnQsIGRpc2NvdW50KSk7CiAgICAgICAgdHJhbnNmZXIoX3NwZW5kZXIsIF9hbW91bnQpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKgogICAgKiBGdW5jdGlvbiBmb3Igc3RhcnQgY3Jvd2RzYWxlIChhbnkpCiAgICAqCiAgICAqIEBwYXJhbSBfdG9rZW5zIC0gSG93IG11Y2ggdG9rZW5zIHdpbGwgaGF2ZSB0aGUgY3Jvd2RzYWxlIC0gYW1vdW50IGh1bWFubGlrZSB2YWx1ZSAoMTAwMDApCiAgICAqIEBwYXJhbSBfc3RhcnREYXRlIC0gV2hlbiBjcm93ZHNhbGUgd2lsbCBiZSBzdGFydCAtIHVuaXggdGltZXN0YW1wICgxNTEyMjMxNzAzICkKICAgICogQHBhcmFtIF9lbmREYXRlIC0gV2hlbiBjcm93ZHNhbGUgd2lsbCBiZSBlbmQgLSBodW1hbmxpa2UgdmFsdWUgKDcpIHNhbWUgYXMgNyBkYXlzCiAgICAqLwogICAgZnVuY3Rpb24gc3RhcnRDcm93ZCh1aW50MjU2IF90b2tlbnMsIHVpbnQgX3N0YXJ0RGF0ZSwgdWludCBfZW5kRGF0ZSkgcHVibGljIG9ubHlPd25lcgogICAgewogICAgICAgIFNhbGVzID0gc2FsZSAoX3Rva2VucyAqIERFQywgX3N0YXJ0RGF0ZSwgX3N0YXJ0RGF0ZSArIF9lbmREYXRlICogMSBkYXlzKTsKICAgICAgICB1bnBhdXNlSW50ZXJuYWwoKTsKICAgIH0KCn0KCmNvbnRyYWN0IFRva2VuQ29udHJhY3QgaXMgRVJDMjBFeHRlbmRpbmcsIENyb3dkc2FsZUNvbnRyYWN0CnsKICAgIC8qIENvbnN0cnVjdG9yICovCiAgICBmdW5jdGlvbiBUb2tlbkNvbnRyYWN0KCkgcHVibGljCiAgICAgICAgRVJDMjAoMTAwMDAwMDAwMDAsICJEZWJpdCBDb2luIiwgIkRFQkMiKSB7fQoKICAgIC8qKgogICAgKiBGdW5jdGlvbiBwYXltZW50cyBoYW5kbGVyCiAgICAqCiAgICAqLwogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUKICAgIHsKICAgICAgICBhc3NlcnQobXNnLnZhbHVlID49IDEgZXRoZXIgLyAxMDApOwogICAgICAgIHJlcXVpcmUobm93ID49IFNhbGVzLnN0YXJ0RGF0ZSk7CgogICAgICAgIGlmIChwYXVzZWQgPT0gZmFsc2UpIHsKICAgICAgICAgICAgcGF5bWVudE1hbmFnZXIobXNnLnZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICB9Cn0='.
	

]
