Class {
	#name : #SRTfc6edbcc2a30466b256e6987bb85d39ea286e9d1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfc6edbcc2a30466b256e6987bb85d39ea286e9d1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSB7CiAgICAgIHRocm93OwogICAgfQogIH0KfQoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sIAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLiAKICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqIAogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuIAogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgIHRocm93OwogICAgfQogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uIAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogIH0KCn0KCi8qKgogKiBAdGl0bGUgUGF1c2FibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgogKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CiAgZXZlbnQgUGF1c2UoKTsKICBldmVudCBVbnBhdXNlKCk7CgogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKCiAgLyoqCiAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgSVMgcGF1c2VkCiAgICovCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgIGlmIChwYXVzZWQpIHRocm93OwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgbW9kaWZpZXIgdG8gYWxsb3cgYWN0aW9ucyBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IElTIE5PVCBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkIHsKICAgIGlmICghcGF1c2VkKSB0aHJvdzsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgKi8KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50IHB1YmxpYyBfdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLgogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBPd25hYmxlLCBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAvLyBhZGRpdGlvbmFsIHZhcmlhYmxlcyBmb3IgdXNlIGlmIHRyYW5zYWN0aW9uIGZlZXMgZXZlciBiZWNhbWUgbmVjZXNzYXJ5CiAgdWludCBwdWJsaWMgYmFzaXNQb2ludHNSYXRlID0gMDsKICB1aW50IHB1YmxpYyBtYXhpbXVtRmVlID0gMDsKCiAgLyoqCiAgICogQGRldiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjay4KICAgKi8KICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsKICAgICAgIHRocm93OwogICAgIH0KICAgICBfOwogIH0KCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CiAgICB1aW50IGZlZSA9IChfdmFsdWUubXVsKGJhc2lzUG9pbnRzUmF0ZSkpLmRpdigxMDAwMCk7CiAgICBpZiAoZmVlID4gbWF4aW11bUZlZSkgewogICAgICBmZWUgPSBtYXhpbXVtRmVlOwogICAgfQogICAgdWludCBzZW5kQW1vdW50ID0gX3ZhbHVlLnN1YihmZWUpOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChzZW5kQW1vdW50KTsKICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5hZGQoZmVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgc2VuZEFtb3VudCk7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludCByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1hbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcnQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIGlmIChfdmFsdWUgPiBfYWxsb3dhbmNlKSB0aHJvdzsKCiAgICB1aW50IGZlZSA9IChfdmFsdWUubXVsKGJhc2lzUG9pbnRzUmF0ZSkpLmRpdigxMDAwMCk7CiAgICBpZiAoZmVlID4gbWF4aW11bUZlZSkgewogICAgICBmZWUgPSBtYXhpbXVtRmVlOwogICAgfQogICAgdWludCBzZW5kQW1vdW50ID0gX3ZhbHVlLnN1YihmZWUpOwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChzZW5kQW1vdW50KTsKICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5hZGQoZmVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIHNlbmRBbW91bnQpOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhbiBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCgovLy8gQHRpdGxlIC0gVGV0aGVyIFRva2VuIENvbnRyYWN0IC0gVGV0aGVyLnRvCi8vLyBAYXV0aG9yIEVucmljbyBSdWJib2xpIC0gPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJkOGJkYjZhYWIxYmJiNzk4YmFiMWFjYmViMWI2YmRhMGY2YmJiN2I1Ij5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPj4KLy8vIEBhdXRob3IgV2lsbCBIYXJib3JuZSAtIDw8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iNmUxOTA3MDIwMjJlMGIxYTA2MDgwNzAwMGIxNjQwMGQwMTAzIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPj4KCmNvbnRyYWN0IFRldGhlclRva2VuIGlzIFBhdXNhYmxlLCBTdGFuZGFyZFRva2VuIHsKCiAgc3RyaW5nIHB1YmxpYyBuYW1lOwogIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogIHVpbnQgcHVibGljIGRlY2ltYWxzOwogIGFkZHJlc3MgcHVibGljIHVwZ3JhZGVkQWRkcmVzczsKICBib29sIHB1YmxpYyBkZXByZWNhdGVkOwoKICAvLyAgVGhlIGNvbnRyYWN0IGNhbiBiZSBpbml0aWFsaXplZCB3aXRoIGEgbnVtYmVyIG9mIHRva2VucwogIC8vICBBbGwgdGhlIHRva2VucyBhcmUgZGVwb3NpdGVkIHRvIHRoZSBvd25lciBhZGRyZXNzCiAgLy8KICAvLyBAcGFyYW0gX2JhbGFuY2UgSW5pdGlhbCBzdXBwbHkgb2YgdGhlIGNvbnRyYWN0CiAgLy8gQHBhcmFtIF9uYW1lIFRva2VuIE5hbWUKICAvLyBAcGFyYW0gX3N5bWJvbCBUb2tlbiBzeW1ib2wKICAvLyBAcGFyYW0gX2RlY2ltYWxzIFRva2VuIGRlY2ltYWxzCiAgZnVuY3Rpb24gVGV0aGVyVG9rZW4odWludCBfaW5pdGlhbFN1cHBseSwgc3RyaW5nIF9uYW1lLCBzdHJpbmcgX3N5bWJvbCwgdWludCBfZGVjaW1hbHMpewogICAgICBfdG90YWxTdXBwbHkgPSBfaW5pdGlhbFN1cHBseTsKICAgICAgbmFtZSA9IF9uYW1lOwogICAgICBzeW1ib2wgPSBfc3ltYm9sOwogICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsKICAgICAgYmFsYW5jZXNbb3duZXJdID0gX2luaXRpYWxTdXBwbHk7CiAgICAgIGRlcHJlY2F0ZWQgPSBmYWxzZTsKICB9CgogIC8vIEZvcndhcmQgRVJDMjAgbWV0aG9kcyB0byB1cGdyYWRlZCBjb250cmFjdCBpZiB0aGlzIG9uZSBpcyBkZXByZWNhdGVkCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSB3aGVuTm90UGF1c2VkIHsKICAgIGlmIChkZXByZWNhdGVkKSB7CiAgICAgIHJldHVybiBTdGFuZGFyZFRva2VuKHVwZ3JhZGVkQWRkcmVzcykudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KICB9CgogIC8vIEZvcndhcmQgRVJDMjAgbWV0aG9kcyB0byB1cGdyYWRlZCBjb250cmFjdCBpZiB0aGlzIG9uZSBpcyBkZXByZWNhdGVkCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgd2hlbk5vdFBhdXNlZCB7CiAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICByZXR1cm4gU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQogIH0KCiAgLy8gRm9yd2FyZCBFUkMyMCBtZXRob2RzIHRvIHVwZ3JhZGVkIGNvbnRyYWN0IGlmIHRoaXMgb25lIGlzIGRlcHJlY2F0ZWQKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpewogICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgcmV0dXJuIFN0YW5kYXJkVG9rZW4odXBncmFkZWRBZGRyZXNzKS5iYWxhbmNlT2Yod2hvKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBzdXBlci5iYWxhbmNlT2Yod2hvKTsKICAgIH0KICB9CgogIC8vIEZvcndhcmQgRVJDMjAgbWV0aG9kcyB0byB1cGdyYWRlZCBjb250cmFjdCBpZiB0aGlzIG9uZSBpcyBkZXByZWNhdGVkCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgewogICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgcmV0dXJuIFN0YW5kYXJkVG9rZW4odXBncmFkZWRBZGRyZXNzKS5hcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN1cGVyLmFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9CiAgfQoKICAvLyBGb3J3YXJkIEVSQzIwIG1ldGhvZHMgdG8gdXBncmFkZWQgY29udHJhY3QgaWYgdGhpcyBvbmUgaXMgZGVwcmVjYXRlZAogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgIGlmIChkZXByZWNhdGVkKSB7CiAgICAgIHJldHVybiBTdGFuZGFyZFRva2VuKHVwZ3JhZGVkQWRkcmVzcykuYWxsb3dhbmNlKF9vd25lciwgX3NwZW5kZXIpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN1cGVyLmFsbG93YW5jZShfb3duZXIsIF9zcGVuZGVyKTsKICAgIH0KICB9CgogIC8vIGRlcHJlY2F0ZSBjdXJyZW50IGNvbnRyYWN0IGluIGZhdm91ciBvZiBhIG5ldyBvbmUKICBmdW5jdGlvbiBkZXByZWNhdGUoYWRkcmVzcyBfdXBncmFkZWRBZGRyZXNzKSBvbmx5T3duZXIgewogICAgZGVwcmVjYXRlZCA9IHRydWU7CiAgICB1cGdyYWRlZEFkZHJlc3MgPSBfdXBncmFkZWRBZGRyZXNzOwogICAgRGVwcmVjYXRlKF91cGdyYWRlZEFkZHJlc3MpOwogIH0KCiAgLy8gZGVwcmVjYXRlIGN1cnJlbnQgY29udHJhY3QgaWYgZmF2b3VyIG9mIGEgbmV3IG9uZQogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCl7CiAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICByZXR1cm4gU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLnRvdGFsU3VwcGx5KCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX3RvdGFsU3VwcGx5OwogICAgfQogIH0KCiAgLy8gSXNzdWUgYSBuZXcgYW1vdW50IG9mIHRva2VucwogIC8vIHRoZXNlIHRva2VucyBhcmUgZGVwb3NpdGVkIGludG8gdGhlIG93bmVyIGFkZHJlc3MKICAvLwogIC8vIEBwYXJhbSBfYW1vdW50IE51bWJlciBvZiB0b2tlbnMgdG8gYmUgaXNzdWVkCiAgZnVuY3Rpb24gaXNzdWUodWludCBhbW91bnQpIG9ubHlPd25lciB7CiAgICBpZiAoX3RvdGFsU3VwcGx5ICsgYW1vdW50IDwgX3RvdGFsU3VwcGx5KSB0aHJvdzsKICAgIGlmIChiYWxhbmNlc1tvd25lcl0gKyBhbW91bnQgPCBiYWxhbmNlc1tvd25lcl0pIHRocm93OwoKICAgIGJhbGFuY2VzW293bmVyXSArPSBhbW91bnQ7CiAgICBfdG90YWxTdXBwbHkgKz0gYW1vdW50OwogICAgSXNzdWUoYW1vdW50KTsKICB9CgogIC8vIFJlZGVlbSB0b2tlbnMuCiAgLy8gVGhlc2UgdG9rZW5zIGFyZSB3aXRoZHJhd24gZnJvbSB0aGUgb3duZXIgYWRkcmVzcwogIC8vIGlmIHRoZSBiYWxhbmNlIG11c3QgYmUgZW5vdWdoIHRvIGNvdmVyIHRoZSByZWRlZW0KICAvLyBvciB0aGUgY2FsbCB3aWxsIGZhaWwuCiAgLy8gQHBhcmFtIF9hbW91bnQgTnVtYmVyIG9mIHRva2VucyB0byBiZSBpc3N1ZWQKICBmdW5jdGlvbiByZWRlZW0odWludCBhbW91bnQpIG9ubHlPd25lciB7CiAgICAgIGlmIChfdG90YWxTdXBwbHkgPCBhbW91bnQpIHRocm93OwogICAgICBpZiAoYmFsYW5jZXNbb3duZXJdIDwgYW1vdW50KSB0aHJvdzsKCiAgICAgIF90b3RhbFN1cHBseSAtPSBhbW91bnQ7CiAgICAgIGJhbGFuY2VzW293bmVyXSAtPSBhbW91bnQ7CiAgICAgIFJlZGVlbShhbW91bnQpOwogIH0KCiAgZnVuY3Rpb24gc2V0UGFyYW1zKHVpbnQgbmV3QmFzaXNQb2ludHMsIHVpbnQgbmV3TWF4RmVlKSBvbmx5T3duZXIgewogICAgICAvLyBFbnN1cmUgdHJhbnNwYXJlbmN5IGJ5IGhhcmRjb2RpbmcgbGltaXQgYmV5b25kIHdoaWNoIGZlZXMgY2FuIG5ldmVyIGJlIGFkZGVkCiAgICAgIGlmIChuZXdCYXNpc1BvaW50cyA+IDIwKSB0aHJvdzsKICAgICAgaWYgKG5ld01heEZlZSA+IDUwKSB0aHJvdzsKCiAgICAgIGJhc2lzUG9pbnRzUmF0ZSA9IG5ld0Jhc2lzUG9pbnRzOwogICAgICBtYXhpbXVtRmVlID0gbmV3TWF4RmVlLm11bCgxMCoqZGVjaW1hbHMpOwoKICAgICAgUGFyYW1zKGJhc2lzUG9pbnRzUmF0ZSwgZGVjaW1hbHMpOwogIH0KCiAgLy8gQ2FsbGVkIHdoZW4gbmV3IHRva2VuIGFyZSBpc3N1ZWQKICBldmVudCBJc3N1ZSh1aW50IGFtb3VudCk7CgogIC8vIENhbGxlZCB3aGVuIHRva2VucyBhcmUgcmVkZWVtZWQKICBldmVudCBSZWRlZW0odWludCBhbW91bnQpOwoKICAvLyBDYWxsZWQgd2hlbiBjb250cmFjdCBpcyBkZXByZWNhdGVkCiAgZXZlbnQgRGVwcmVjYXRlKGFkZHJlc3MgbmV3QWRkcmVzcyk7CgogIC8vIENhbGxlZCBpZiBjb250cmFjdCBldmVyIGFkZHMgZmVlcwogIGV2ZW50IFBhcmFtcyh1aW50IGZlZUJhc2lzUG9pbnRzLCB1aW50IG1heEZlZSk7Cn0='.
	

]
