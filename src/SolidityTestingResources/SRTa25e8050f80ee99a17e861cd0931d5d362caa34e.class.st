Class {
	#name : #SRTa25e8050f80ee99a17e861cd0931d5d362caa34e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa25e8050f80ee99a17e861cd0931d5d362caa34e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKY29udHJhY3QgR2FtZUNhcmRzIHsKCiAgICAvLy8gTGVhc2UgcmVjb3JkLCBzdG9yZSBjYXJkIHRlbmFudHMgZGV0YWlscwogICAgLy8vIGFuZCBsZWFzZSBkZXRhaWxzCiAgICBzdHJ1Y3QgTGVhc2VDYXJkIHsKICAgICAgICB1aW50IGlkOwogICAgICAgIGFkZHJlc3MgdGVuYW50OwogICAgICAgIHVpbnQgcHJpY2U7CiAgICAgICAgdWludCB1bnRpbEJsb2NrOwogICAgICAgIHN0cmluZyB0aXRsZTsKICAgICAgICBzdHJpbmcgdXJsOwogICAgICAgIHN0cmluZyBpbWFnZTsKICAgIH0KCiAgICAvLy8gUmVjb3JkIGNhcmQgZGV0YWlscwogICAgc3RydWN0IENhcmREZXRhaWxzIHsKICAgICAgICB1aW50OCBpZDsKICAgICAgICB1aW50IHByaWNlOwogICAgICAgIHVpbnQgcHJpY2VMZWFzZTsgLy8gcHJpY2UgcGVyIGJsb2NrCiAgICAgICAgdWludCBsZWFzZUR1cmF0aW9uOyAvLyBpbiBibG9jawogICAgICAgIGJvb2wgYXZhaWxhYmxlQnV5OwogICAgICAgIGJvb2wgYXZhaWxhYmxlTGVhc2U7CiAgICAgICAgdWludFtdIGxlYXNlTGlzdDsKICAgICAgICBtYXBwaW5nKHVpbnQgPT4gTGVhc2VDYXJkKSBsZWFzZUNhcmRTdHJ1Y3RzOwogICAgfQoKICAgIC8vLyBSZWNvcmQgY2FyZAogICAgc3RydWN0IENhcmQgewogICAgICAgIHVpbnQ4IGlkOwogICAgICAgIGFkZHJlc3Mgb3duZXI7CiAgICAgICAgc3RyaW5nIHRpdGxlOwogICAgICAgIHN0cmluZyB1cmw7CiAgICAgICAgc3RyaW5nIGltYWdlOwogICAgICAgIGJvb2wgbnNmdzsKICAgIH0KCiAgICAvLy8gVXNlcnMgcGVuZGluZyB3aXRoZHJhd2FscwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBwZW5kaW5nV2l0aGRyYXdhbHM7CgogICAgbWFwcGluZyh1aW50OCA9PiBDYXJkKSBwdWJsaWMgY2FyZFN0cnVjdHM7IC8vIHJhbmRvbSBhY2Nlc3MgYnkgY2FyZCBrZXkKICAgIHVpbnQ4W10gcHVibGljIGNhcmRMaXN0OyAvLyBsaXN0IG9mIGFubm91bmNlIGtleXMgc28gd2UgY2FuIGVudW1lcmF0ZSB0aGVtCgogICAgbWFwcGluZyh1aW50OCA9PiBDYXJkRGV0YWlscykgcHVibGljIGNhcmREZXRhaWxzU3RydWN0czsgLy8gcmFuZG9tIGFjY2VzcyBieSBjYXJkIGRldGFpbHMga2V5CiAgICB1aW50OFtdIHB1YmxpYyBjYXJkRGV0YWlsc0xpc3Q7IC8vIGxpc3Qgb2YgY2FyZHMgZGV0YWlscyBrZXlzIHNvIHdlIGNhbiBlbnVtZXJhdGUgdGhlbQoKICAgIC8vLyBJbml0aWFsIGNhcmQgcHJpY2UKICAgIHVpbnQgcHVibGljIGluaXRpYWxDYXJkUHJpY2UgPSAxIGV0aGVyOwoKICAgIC8vLyBPd25lciBjdXQgKDElKSAuIFRoaXMgY3V0IG9ubHkgYXBwbHkgb24gYSB1c2VyLXRvLXVzZXIgY2FyZCB0cmFuc2FjdGlvbgogICAgdWludCBwdWJsaWMgb3duZXJCdXlDdXQgPSAxMDA7CiAgICAvLy8gZmx1ZmZ5Q2F0IGN1dCAoMTAlKQogICAgdWludCBwdWJsaWMgZmx1ZmZ5Q2F0Q3V0ID0gMTAwMDsKCiAgICAvLy8gY29udHJhY3RPd25lciBjYW4gd2l0aGRyYXcgdGhlIGZ1bmRzCiAgICBhZGRyZXNzIHB1YmxpYyBjb250cmFjdE93bmVyOwogICAgLy8vIGZsdWZmeUNhdCBhZGRyZXNzCiAgICBhZGRyZXNzIHB1YmxpYyBmbHVmZnlDYXRBZGRyZXNzID0gMHgyYzAwQTUwMTNhQTJFNjAwNjYzZjdiMTk3Qzk4ZGI3M2JBODQ3ZTZkOwoKICAgIC8vLyBDb250cmFjdCBjb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gR2FtZUNhcmRzKCkgcHVibGljIHsKICAgICAgICBjb250cmFjdE93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Q29udHJhY3RPd25lcigpIHsKICAgICAgICAvLyBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIGNvbnRyYWN0IG93bmVyCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbnRyYWN0T3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUNhcmRPd25lcih1aW50OCBjYXJkSWQpIHsKICAgICAgICAvLyBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIGNhcmQgb3duZXIKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY2FyZFN0cnVjdHNbY2FyZElkXS5vd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5VmFsaWRDYXJkKHVpbnQ4IGNhcmRJZCkgewogICAgICAgIC8vIFRocm93cyBpZiBjYXJkIGlzIG5vdCB2YWxpZAogICAgICAgIHJlcXVpcmUoY2FyZElkID49IDEgJiYgY2FyZElkIDw9IDEwMCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gUmV0dXJuIGNhcmRMaXN0IGFycmF5CiAgICBmdW5jdGlvbiBnZXRDYXJkcygpIHB1YmxpYyB2aWV3IHJldHVybnModWludDhbXSkgewogICAgICAgIHVpbnQ4W10gbWVtb3J5IHJlc3VsdCA9IG5ldyB1aW50OFtdKGNhcmRMaXN0Lmxlbmd0aCk7CiAgICAgICAgdWludDggY291bnRlciA9IDA7CiAgICAgICAgZm9yICh1aW50OCBpID0gMDsgaSA8IGNhcmRMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHJlc3VsdFtjb3VudGVyXSA9IGk7CiAgICAgICAgICAgIGNvdW50ZXIrKzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvLy8gUmV0dXJuIGNhcmREZXRhaWxzTGlzdCBhcnJheQogICAgZnVuY3Rpb24gZ2V0Q2FyZHNEZXRhaWxzKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50OFtdKSB7CiAgICAgICAgdWludDhbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQ4W10oY2FyZERldGFpbHNMaXN0Lmxlbmd0aCk7CiAgICAgICAgdWludDggY291bnRlciA9IDA7CiAgICAgICAgZm9yICh1aW50OCBpID0gMDsgaSA8IGNhcmREZXRhaWxzTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICByZXN1bHRbY291bnRlcl0gPSBpOwogICAgICAgICAgICBjb3VudGVyKys7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgLy8vIFJldHVybiBjYXJkIGRldGFpbHMgYnkgaWQKICAgIGZ1bmN0aW9uIGdldENhcmREZXRhaWxzKHVpbnQ4IGNhcmRJZCkgcHVibGljIHZpZXcgb25seVZhbGlkQ2FyZChjYXJkSWQpCiAgICAgICAgcmV0dXJucyAodWludDggaWQsIHVpbnQgcHJpY2UsIHVpbnQgcHJpY2VMZWFzZSwgdWludCBsZWFzZUR1cmF0aW9uLCBib29sIGF2YWlsYWJsZUJ1eSwgYm9vbCBhdmFpbGFibGVMZWFzZSkgewogICAgICAgICAgICBib29sIF9idXlBdmFpbGFiaWxpdHk7CiAgICAgICAgICAgIGlmIChjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5pZCA9PSAwIHx8IGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmF2YWlsYWJsZUJ1eSkgewogICAgICAgICAgICAgICAgX2J1eUF2YWlsYWJpbGl0eSA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIENhcmREZXRhaWxzIHN0b3JhZ2UgZGV0YWlsID0gY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF07CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBkZXRhaWwuaWQsCiAgICAgICAgICAgICAgICBkZXRhaWwucHJpY2UsCiAgICAgICAgICAgICAgICBkZXRhaWwucHJpY2VMZWFzZSwKICAgICAgICAgICAgICAgIGRldGFpbC5sZWFzZUR1cmF0aW9uLAogICAgICAgICAgICAgICAgX2J1eUF2YWlsYWJpbGl0eSwKICAgICAgICAgICAgICAgIGRldGFpbC5hdmFpbGFibGVMZWFzZQogICAgICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgLy8vIFJldHVybiBjYXJkIGJ5IGlkCiAgICBmdW5jdGlvbiBnZXRDYXJkKHVpbnQ4IGNhcmRJZCkgcHVibGljIHZpZXcgb25seVZhbGlkQ2FyZChjYXJkSWQpCiAgICAgICAgcmV0dXJucyAodWludDggaWQsIGFkZHJlc3Mgb3duZXIsIHN0cmluZyB0aXRsZSwgc3RyaW5nIHVybCwgc3RyaW5nIGltYWdlLCBib29sIG5zZncpIHsKICAgICAgICAgICAgQ2FyZCBzdG9yYWdlIGNhcmQgPSBjYXJkU3RydWN0c1tjYXJkSWRdOwogICAgICAgICAgICBpZCA9IGNhcmQuaWQ7CiAgICAgICAgICAgIG93bmVyID0gY2FyZC5vd25lcjsKICAgICAgICAgICAgdGl0bGUgPSBjYXJkLnRpdGxlOwogICAgICAgICAgICB1cmwgPSBjYXJkLnVybDsKICAgICAgICAgICAgaW1hZ2UgPSBjYXJkLmltYWdlOwogICAgICAgICAgICBuc2Z3ID0gY2FyZC5uc2Z3OwogICAgICAgIH0KCiAgICAvLy8gVGhpcyBpcyBjYWxsZWQgb24gdGhlIGluaXRpYWwgYnV5IGNhcmQsIHVzZXIgdG8gdXNlciBidXkgaXMgYXQgYnV5Q2FyZCgpCiAgICAvLy8gQW1vdW50IGlzIHNlbnQgdG8gY29udHJhY3RPd25lciBiYWxhbmNlIGFuZCBmbHVmZnljYXQgZ2V0IDEwJSBvZiB0aGlzIGFtb3VudAogICAgZnVuY3Rpb24gaW5pdGlhbEJ1eUNhcmQodWludDggY2FyZElkLCBzdHJpbmcgdGl0bGUsIHN0cmluZyB1cmwsIHN0cmluZyBpbWFnZSkgcHVibGljCiAgICAgICAgb25seVZhbGlkQ2FyZChjYXJkSWQpCiAgICAgICAgcGF5YWJsZQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICAvLyBDaGVjayBzZW50IGFtb3VudAogICAgICAgIHVpbnQgcHJpY2UgPSBjb21wdXRlSW5pdGlhbFByaWNlKGNhcmRJZCk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gcHJpY2UpOwogICAgICAgIC8vIElmIG93bmVyIGlzIDB4MCwgdGhlbiB3ZSBhcmUgc3VyZSB0aGF0CiAgICAgICAgLy8gdGhpcyBpcyB0aGUgaW5pdGlhbCBidXkKICAgICAgICByZXF1aXJlKGNhcmRTdHJ1Y3RzW2NhcmRJZF0ub3duZXIgPT0gYWRkcmVzcygwKSk7CgogICAgICAgIC8vIEZpbGwgY2FyZAogICAgICAgIF9maWxsQ2FyZFN0cnVjdChjYXJkSWQsIG1zZy5zZW5kZXIsIHRpdGxlLCB1cmwsIGltYWdlKTsKICAgICAgICAvLyBTZXQgbnNmdyBmbGFnIHRvIGZhbHNlCiAgICAgICAgY2FyZFN0cnVjdHNbY2FyZElkXS5uc2Z3ID0gZmFsc2U7CiAgICAgICAgLy8gQ29udHJhY3QgY3JlZGl0IDEwJSBvZiBwcmljZSB0byBGbHVmZnlDYXQKICAgICAgICBfYXBwbHlTaGFyZShjb250cmFjdE93bmVyLCBmbHVmZnlDYXRBZGRyZXNzLCBmbHVmZnlDYXRDdXQpOwogICAgICAgIC8vIEluaXRpYWxpemUgY2FyZCBkZXRhaWxzCiAgICAgICAgX2luaXRDYXJkRGV0YWlscyhjYXJkSWQsIHByaWNlKTsKICAgICAgICAvLyBBZGQgdGhlIGNhcmQgdG8gY2FyZExpc3QKICAgICAgICBjYXJkTGlzdC5wdXNoKGNhcmRJZCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIFBlcmZvcm0gYSB1c2VyIHRvIHVzZXIgYnV5IHRyYW5zYWN0aW9uCiAgICAvLy8gQ29udHJhY3Qgb3duZXIgdGFrZXMgMSUgY3V0IG9uIGVhY2ggb2YgdGhpcyB0cmFuc2FjdGlvbgogICAgZnVuY3Rpb24gYnV5Q2FyZCh1aW50OCBjYXJkSWQsIHN0cmluZyB0aXRsZSwgc3RyaW5nIHVybCwgc3RyaW5nIGltYWdlKSBwdWJsaWMKICAgICAgICBvbmx5VmFsaWRDYXJkKGNhcmRJZCkKICAgICAgICBwYXlhYmxlCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIC8vIENoZWNrIHRoYXQgdGhpcyBpcyBub3QgYW4gaW5pdGlhbCBidXksIGkuZS4gdGhhdCB0aGUKICAgICAgICAvLyBjYXJkIGJlbG9uZ3MgdG8gc29tZW9uZQogICAgICAgIHJlcXVpcmUoY2FyZFN0cnVjdHNbY2FyZElkXS5vd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICAvLyBDaGVjayBpZiBjYXJkIGlzIG9uIHNhbGUKICAgICAgICByZXF1aXJlKGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmF2YWlsYWJsZUJ1eSk7CiAgICAgICAgLy8gQ2hlY2sgc2VudCBhbW91bnQKICAgICAgICB1aW50IHByaWNlID0gY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0ucHJpY2U7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gcHJpY2UpOwoKICAgICAgICBhZGRyZXNzIHByZXZpb3VzT3duZXIgPSBjYXJkU3RydWN0c1tjYXJkSWRdLm93bmVyOwogICAgICAgIC8vIFRha2UgMSUgY3V0IG9uIGJ1eQogICAgICAgIF9hcHBseVNoYXJlKHByZXZpb3VzT3duZXIsIGNvbnRyYWN0T3duZXIsIG93bmVyQnV5Q3V0KTsKICAgICAgICAvLyBGaWxsIGNhcmQKICAgICAgICBfZmlsbENhcmRTdHJ1Y3QoY2FyZElkLCBtc2cuc2VuZGVyLCB0aXRsZSwgdXJsLCBpbWFnZSk7CiAgICAgICAgLy8gU2V0IG5zZncgZmxhZyB0byBmYWxzZQogICAgICAgIGNhcmRTdHJ1Y3RzW2NhcmRJZF0ubnNmdyA9IGZhbHNlOwogICAgICAgIC8vIERpc2FibGUgc2VsbCBzdGF0dXMKICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5hdmFpbGFibGVCdXkgPSBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQWxsb3cgY2FyZCBvd25lciB0byBlZGl0IGhpcyBjYXJkIGluZm9ybWF0aW9ucwogICAgZnVuY3Rpb24gZWRpdENhcmQodWludDggY2FyZElkLCBzdHJpbmcgdGl0bGUsIHN0cmluZyB1cmwsIHN0cmluZyBpbWFnZSkgcHVibGljCiAgICAgICAgb25seVZhbGlkQ2FyZChjYXJkSWQpCiAgICAgICAgb25seUNhcmRPd25lcihjYXJkSWQpCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIC8vIEZpbGwgY2FyZAogICAgICAgIF9maWxsQ2FyZFN0cnVjdChjYXJkSWQsIG1zZy5zZW5kZXIsIHRpdGxlLCB1cmwsIGltYWdlKTsKICAgICAgICAvLyBEaXNhYmxlIHNlbGwgc3RhdHVzCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEFsbG93IGNhcmQgb3duZXIgdG8gc2V0IGhpcyBjYXJkIG9uIHNhbGUgYXQgc3BlY2lmaWMgcHJpY2UKICAgIGZ1bmN0aW9uIHNlbGxDYXJkKHVpbnQ4IGNhcmRJZCwgdWludCBwcmljZSkgcHVibGljCiAgICAgICAgb25seVZhbGlkQ2FyZChjYXJkSWQpCiAgICAgICAgb25seUNhcmRPd25lcihjYXJkSWQpCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLnByaWNlID0gcHJpY2U7CiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0uYXZhaWxhYmxlQnV5ID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQWxsb3cgY2FyZCBvd25lciB0byBjYW5jZWwgc2VsbCBvZmZlcgogICAgZnVuY3Rpb24gY2FuY2VsU2VsbENhcmQodWludDggY2FyZElkKSBwdWJsaWMKICAgICAgICBvbmx5VmFsaWRDYXJkKGNhcmRJZCkKICAgICAgICBvbmx5Q2FyZE93bmVyKGNhcmRJZCkKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0uYXZhaWxhYmxlQnV5ID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEFsbG93IGNhcmQgb3duZXIgdG8gc2V0IGhpcyBjYXJkIG9uIGxlYXNlIGF0IGZpeGVkIHByaWNlIHBlciBibG9jayBhbmQgZHVyYXRpb24KICAgIGZ1bmN0aW9uIHNldExlYXNlQ2FyZCh1aW50OCBjYXJkSWQsIHVpbnQgcHJpY2VMZWFzZSwgdWludCBsZWFzZUR1cmF0aW9uKSBwdWJsaWMKICAgICAgICBvbmx5VmFsaWRDYXJkKGNhcmRJZCkKICAgICAgICBvbmx5Q2FyZE93bmVyKGNhcmRJZCkKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgLy8gQ2FyZCBjYW5ub3QgYmUgb24gc2FsZSB3aGVuIHNldHRpbmcgbGVhc2UKICAgICAgICAvLyBjYW5jZWxTZWxsQ2FyZCgpIGZpcnN0CiAgICAgICAgcmVxdWlyZSghY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0uYXZhaWxhYmxlQnV5KTsKICAgICAgICAvLyBDYXJkIGNhbm5vdCBiZSBzZXQgb24gbGVhc2Ugd2hpbGUgY3VycmVudGx5IGxlYXNpbmcKICAgICAgICB1aW50IF9sYXN0TGVhc2VJZCA9IGdldENhcmRMZWFzZUxlbmd0aChjYXJkSWQpOwogICAgICAgIHVpbnQgX3VudGlsID0gY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0ubGVhc2VDYXJkU3RydWN0c1tfbGFzdExlYXNlSWRdLnVudGlsQmxvY2s7CiAgICAgICAgcmVxdWlyZShfdW50aWwgPCBibG9jay5udW1iZXIpOwoKICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5wcmljZUxlYXNlID0gcHJpY2VMZWFzZTsKICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5hdmFpbGFibGVMZWFzZSA9IHRydWU7CiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0ubGVhc2VEdXJhdGlvbiA9IGxlYXNlRHVyYXRpb247CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEFsbG93IGNhcmQgb3duZXIgdG8gY2FuY2VsIGxlYXNlIG9mZmVyCiAgICAvLy8gTm90ZSB0aGF0IHRoaXMgZG8gbm90IGludGVycnVwdCBjdXJyZW50IGxlYXNlIGlmIGFueQogICAgZnVuY3Rpb24gY2FuY2VsTGVhc2VPZmZlcih1aW50OCBjYXJkSWQpIHB1YmxpYwogICAgICAgIG9ubHlWYWxpZENhcmQoY2FyZElkKQogICAgICAgIG9ubHlDYXJkT3duZXIoY2FyZElkKQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5hdmFpbGFibGVMZWFzZSA9IGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBBbGxvdyBmdXR1cmUgdGVuYW50IHRvIGxlYXNlIGEgY2FyZAogICAgZnVuY3Rpb24gbGVhc2VDYXJkKHVpbnQ4IGNhcmRJZCwgc3RyaW5nIHRpdGxlLCBzdHJpbmcgdXJsLCBzdHJpbmcgaW1hZ2UpIHB1YmxpYwogICAgICAgIG9ubHlWYWxpZENhcmQoY2FyZElkKQogICAgICAgIHBheWFibGUKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgQ2FyZERldGFpbHMgc3RvcmFnZSBkZXRhaWxzID0gY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF07CiAgICAgICAgLy8gQ2hlY2sgdGhhdCBjYXJkIGlzIGF2YWlibGUgdG8gbGVhc2UKICAgICAgICByZXF1aXJlKGRldGFpbHMuYXZhaWxhYmxlTGVhc2UpOwogICAgICAgIC8vIEdldCBwcmljZSAocGVyIGJsb2NrKSBhbmQgbGVhc2VEdXJhdGlvbiAoYmxvY2spCiAgICAgICAgdWludCBwcmljZSA9IGRldGFpbHMucHJpY2VMZWFzZTsKICAgICAgICB1aW50IGxlYXNlRHVyYXRpb24gPSBkZXRhaWxzLmxlYXNlRHVyYXRpb247CiAgICAgICAgdWludCB0b3RhbEFtb3VudCA9IHByaWNlICogbGVhc2VEdXJhdGlvbjsKICAgICAgICAvLyBDaGVjayB0aGF0IGFtb3VudCBzZW50IGlzIHN1ZmZpY2llbnQKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSB0b3RhbEFtb3VudCk7CiAgICAgICAgLy8gR2V0IG5ldyBsZWFzZSBpZAogICAgICAgIHVpbnQgbGVhc2VJZCA9IGdldENhcmRMZWFzZUxlbmd0aChjYXJkSWQpICsgMTsKICAgICAgICAvLyBHZXQgdGhlIGJsb2NrIG51bWJlciBvZiBsZWFzZSBlbmQKICAgICAgICB1aW50IHVudGlsQmxvY2sgPSBibG9jay5udW1iZXIgKyBsZWFzZUR1cmF0aW9uOwogICAgICAgIC8vIFRha2UgMSUgY3V0IG9uIGxlYXNlCiAgICAgICAgQ2FyZCBzdG9yYWdlIGNhcmQgPSBjYXJkU3RydWN0c1tjYXJkSWRdOwogICAgICAgIGFkZHJlc3MgX2NhcmRPd25lciA9IGNhcmQub3duZXI7CiAgICAgICAgX2FwcGx5U2hhcmUoX2NhcmRPd25lciwgY29udHJhY3RPd25lciwgb3duZXJCdXlDdXQpOwogICAgICAgIC8vIEZpbGwgbGVhc2VDYXJkU3RydWN0cwogICAgICAgIGRldGFpbHMubGVhc2VDYXJkU3RydWN0c1tsZWFzZUlkXS5pZCA9IGxlYXNlSWQ7CiAgICAgICAgZGV0YWlscy5sZWFzZUNhcmRTdHJ1Y3RzW2xlYXNlSWRdLnRlbmFudCA9IG1zZy5zZW5kZXI7CiAgICAgICAgZGV0YWlscy5sZWFzZUNhcmRTdHJ1Y3RzW2xlYXNlSWRdLnByaWNlID0gdG90YWxBbW91bnQ7CiAgICAgICAgZGV0YWlscy5sZWFzZUNhcmRTdHJ1Y3RzW2xlYXNlSWRdLnVudGlsQmxvY2sgPSB1bnRpbEJsb2NrOwogICAgICAgIGRldGFpbHMubGVhc2VDYXJkU3RydWN0c1tsZWFzZUlkXS50aXRsZSA9IHRpdGxlOwogICAgICAgIGRldGFpbHMubGVhc2VDYXJkU3RydWN0c1tsZWFzZUlkXS51cmwgPSB1cmw7CiAgICAgICAgZGV0YWlscy5sZWFzZUNhcmRTdHJ1Y3RzW2xlYXNlSWRdLmltYWdlID0gaW1hZ2U7CiAgICAgICAgLy8gTGVhc2VzIGFyZSBub3cgdW5hdmFpbGFibGUgZm9yIHRoaXMgY2FyZAogICAgICAgIGRldGFpbHMuYXZhaWxhYmxlTGVhc2UgPSBmYWxzZTsKICAgICAgICAvLyBBZGQgbGVhc2UgdG8gbGVhc2VzIGxpc3Qgb2YgY29ycmVzcG9uZGFudCBjYXJkRGV0YWlscwogICAgICAgIGRldGFpbHMubGVhc2VMaXN0LnB1c2gobGVhc2VJZCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEdldCBsYXN0IGxlYXNlIGZyb20gYSBjYXJkCiAgICBmdW5jdGlvbiBnZXRMYXN0TGVhc2UodWludDggY2FyZElkKSBwdWJsaWMgdmlldwogICAgICAgIHJldHVybnModWludCBsZWFzZUluZGV4LCBhZGRyZXNzIHRlbmFudCwgdWludCB1bnRpbEJsb2NrLCBzdHJpbmcgdGl0bGUsIHN0cmluZyB1cmwsIHN0cmluZyBpbWFnZSkKICAgIHsKICAgICAgICB1aW50IF9sZWFzZUluZGV4ID0gZ2V0Q2FyZExlYXNlTGVuZ3RoKGNhcmRJZCk7CiAgICAgICAgcmV0dXJuIGdldExlYXNlKGNhcmRJZCwgX2xlYXNlSW5kZXgpOwogICAgfQoKICAgIC8vLyBHZXQgbGVhc2UgZnJvbSBjYXJkCiAgICBmdW5jdGlvbiBnZXRMZWFzZSh1aW50OCBjYXJkSWQsIHVpbnQgbGVhc2VJZCkgcHVibGljIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQgbGVhc2VJbmRleCwgYWRkcmVzcyB0ZW5hbnQsIHVpbnQgdW50aWxCbG9jaywgc3RyaW5nIHRpdGxlLCBzdHJpbmcgdXJsLCBzdHJpbmcgaW1hZ2UpCiAgICB7CiAgICAgICAgcmV0dXJuKAogICAgICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5sZWFzZUNhcmRTdHJ1Y3RzW2xlYXNlSWRdLmlkLAogICAgICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5sZWFzZUNhcmRTdHJ1Y3RzW2xlYXNlSWRdLnRlbmFudCwKICAgICAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0ubGVhc2VDYXJkU3RydWN0c1tsZWFzZUlkXS51bnRpbEJsb2NrLAogICAgICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5sZWFzZUNhcmRTdHJ1Y3RzW2xlYXNlSWRdLnRpdGxlLAogICAgICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5sZWFzZUNhcmRTdHJ1Y3RzW2xlYXNlSWRdLnVybCwKICAgICAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0ubGVhc2VDYXJkU3RydWN0c1tsZWFzZUlkXS5pbWFnZQogICAgICAgICk7CiAgICB9CgogICAgLy8vIEdldCBsZWFzZSBsaXN0IGZyb20gYSBjYXJkCiAgICBmdW5jdGlvbiBnZXRDYXJkTGVhc2VMZW5ndGgodWludDggY2FyZElkKSBwdWJsaWMgdmlldwogICAgICAgIHJldHVybnModWludCBjYXJkTGVhc2VzQ291bnQpCiAgICB7CiAgICAgICAgcmV0dXJuKGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmxlYXNlTGlzdC5sZW5ndGgpOwogICAgfQoKICAgIC8vLyBUcmFuc2ZlciB0aGUgb3duZXJzaGlwIG9mIGEgY2FyZAogICAgZnVuY3Rpb24gdHJhbnNmZXJDYXJkT3duZXJzaGlwKGFkZHJlc3MgdG8sIHVpbnQ4IGNhcmRJZCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5Q2FyZE93bmVyKGNhcmRJZCkKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgLy8gVHJhbnNmZXIgY2FyZCBvd25lcnNoaXAKICAgICAgICBjYXJkU3RydWN0c1tjYXJkSWRdLm93bmVyID0gdG87CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIFJldHVybiBiYWxhbmNlIGZyb20gc2VuZGVyCiAgICBmdW5jdGlvbiBnZXRCYWxhbmNlKCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAodWludCBhbW91bnQpCiAgICB7CiAgICAgICAgcmV0dXJuIHBlbmRpbmdXaXRoZHJhd2Fsc1ttc2cuc2VuZGVyXTsKICAgIH0KCiAgICAvLy8gQWxsb3cgYWRkcmVzcyB0byB3aXRoZHJhdyB0aGVpciBiYWxhbmNlCiAgICBmdW5jdGlvbiB3aXRoZHJhdygpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICB1aW50IGFtb3VudCA9IHBlbmRpbmdXaXRoZHJhd2Fsc1ttc2cuc2VuZGVyXTsKICAgICAgICAvLyBSZW1lbWJlciB0byB6ZXJvIHRoZSBwZW5kaW5nIHJlZnVuZCBiZWZvcmUKICAgICAgICAvLyBzZW5kaW5nIHRvIHByZXZlbnQgcmUtZW50cmFuY3kgYXR0YWNrcwogICAgICAgIHBlbmRpbmdXaXRoZHJhd2Fsc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBDb21wdXRlIGluaXRpYWwgY2FyZCBwcmljZSAoaW4gd2VpKQogICAgZnVuY3Rpb24gY29tcHV0ZUluaXRpYWxQcmljZSh1aW50OCBjYXJkSWQpIHB1YmxpYyB2aWV3CiAgICAgICAgb25seVZhbGlkQ2FyZChjYXJkSWQpCiAgICAgICAgcmV0dXJucyAodWludCBwcmljZSkKICAgIHsKICAgICAgICAvLyAxIGV0aGVyIC0gMC4wMSBldGhlciAqIChjYXJkSWQgLSAxKQogICAgICAgIHJldHVybiBpbml0aWFsQ2FyZFByaWNlIC0gKChpbml0aWFsQ2FyZFByaWNlIC8gMTAwKSAqICh1aW50MjU2KGNhcmRJZCkgLSAxKSk7CiAgICB9CgogICAgLy8vIEFsbG93IGNvbnRyYWN0IG93bmVyIHRvIHNldCBOU0ZXIGZsYWcgb24gYSBjYXJkCiAgICBmdW5jdGlvbiBzZXROU0ZXKHVpbnQ4IGNhcmRJZCwgYm9vbCBmbGFnKSBwdWJsaWMKICAgICAgICBvbmx5VmFsaWRDYXJkKGNhcmRJZCkKICAgICAgICBvbmx5Q29udHJhY3RPd25lcigpCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIGNhcmRTdHJ1Y3RzW2NhcmRJZF0ubnNmdyA9IGZsYWc7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEZpbGwgQ2FyZCBzdHJ1Y3QKICAgIGZ1bmN0aW9uIF9maWxsQ2FyZFN0cnVjdCh1aW50OCBfY2FyZElkLCBhZGRyZXNzIF9vd25lciwgc3RyaW5nIF90aXRsZSwgc3RyaW5nIF91cmwsIHN0cmluZyBfaW1hZ2UpIGludGVybmFsCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIGNhcmRTdHJ1Y3RzW19jYXJkSWRdLm93bmVyID0gX293bmVyOwogICAgICAgIGNhcmRTdHJ1Y3RzW19jYXJkSWRdLnRpdGxlID0gX3RpdGxlOwogICAgICAgIGNhcmRTdHJ1Y3RzW19jYXJkSWRdLnVybCA9IF91cmw7CiAgICAgICAgY2FyZFN0cnVjdHNbX2NhcmRJZF0uaW1hZ2UgPSBfaW1hZ2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEluaXRpYWxpemUgc2VsbCBjYXJkIGZvciBmdXR1cmUKICAgIGZ1bmN0aW9uIF9pbml0Q2FyZERldGFpbHModWludDggY2FyZElkLCB1aW50IHByaWNlKSBpbnRlcm5hbAogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICAvLyBwcmljZUxlYXNlLCBsZWFzZUR1cmF0aW9uIHNldCB0byBkZWZhdWx0IHZhbHVlKD0gMCkKICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5pZCA9IGNhcmRJZDsKICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5wcmljZSA9IHByaWNlOwogICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmF2YWlsYWJsZUJ1eSA9IGZhbHNlOwogICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmF2YWlsYWJsZUxlYXNlID0gZmFsc2U7CiAgICAgICAgY2FyZERldGFpbHNMaXN0LnB1c2goY2FyZElkKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gU2VuZCBzcGxpdCBhbW91bnRzIHRvIHJlc3BlY3RpdmUgYmFsYW5jZXMKICAgIGZ1bmN0aW9uIF9hcHBseVNoYXJlKGFkZHJlc3MgX3NlbGxlciwgYWRkcmVzcyBfYXVjdGlvbmVlciwgdWludCBfY3V0KSBpbnRlcm5hbAogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICAvLyBDb21wdXRlIHNoYXJlCiAgICAgICAgdWludDI1NiBhdWN0aW9uZWVyQ3V0ID0gX2NvbXB1dGVDdXQobXNnLnZhbHVlLCBfY3V0KTsKICAgICAgICB1aW50MjU2IHNlbGxlclByb2NlZWRzID0gbXNnLnZhbHVlIC0gYXVjdGlvbmVlckN1dDsKICAgICAgICAvLyBDcmVkaXQgc2VsbGVyIGJhbGFuY2UKICAgICAgICBwZW5kaW5nV2l0aGRyYXdhbHNbX3NlbGxlcl0gKz0gc2VsbGVyUHJvY2VlZHM7CiAgICAgICAgLy8gQ3JlZGl0IGF1Y3Rpb25uZXIgYmFsYW5jZQogICAgICAgIHBlbmRpbmdXaXRoZHJhd2Fsc1tfYXVjdGlvbmVlcl0gKz0gYXVjdGlvbmVlckN1dDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQ29tcHV0ZSBfY3V0IGZyb20gYSBfcHJpY2UKICAgIGZ1bmN0aW9uIF9jb21wdXRlQ3V0KHVpbnQyNTYgX3ByaWNlLCB1aW50MjU2IF9jdXQpIGludGVybmFsIHB1cmUKICAgICAgICByZXR1cm5zICh1aW50MjU2KQogICAgewogICAgICAgIHJldHVybiBfcHJpY2UgKiBfY3V0IC8gMTAwMDA7CiAgICB9Cn0='.
	

]
