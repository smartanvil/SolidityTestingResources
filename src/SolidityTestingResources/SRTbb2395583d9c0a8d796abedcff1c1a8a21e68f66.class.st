Class {
	#name : #SRTbb2395583d9c0a8d796abedcff1c1a8a21e68f66,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbb2395583d9c0a8d796abedcff1c1a8a21e68f66 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgovLyBKb2huVmVyVG9rZW4gTWFkZSBCeSBQaW5rQ2hlcnJ5IC0gPHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI2NDBkMGExNzA1MGEwZDEwMWQxNzBmMDUwYTI0MDMwOTA1MGQwODRhMDcwYjA5Ij5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPgovLyBKb2huVmVyVG9rZW4gUmVxdWVzdCBRdWVzdGlvbiAtIDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iMjQ0ZjRiNTY0MTQ1NDc0YjRkNGE1NzRiNDg1MTUwNGQ0YjRhNjQ0MzQ5NDU0ZDQ4MGE0NzRiNDkiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L3NwYW4+CgpsaWJyYXJ5IFNhZmVNYXRoCnsKICAJZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpCiAgICB7CgkJdWludDI1NiBjID0gYSAqIGI7CgkJYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKCgkJcmV0dXJuIGM7CiAgCX0KCiAgCWZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KQoJewoJCXVpbnQyNTYgYyA9IGEgLyBiOwoKCQlyZXR1cm4gYzsKICAJfQoKICAJZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpCgl7CgkJYXNzZXJ0KGIgPD0gYSk7CgoJCXJldHVybiBhIC0gYjsKICAJfQoKICAJZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpCgl7CgkJdWludDI1NiBjID0gYSArIGI7CgkJYXNzZXJ0KGMgPj0gYSk7CgoJCXJldHVybiBjOwogIAl9Cn0KCgpjb250cmFjdCBPd25lckhlbHBlcgp7CiAgCWFkZHJlc3MgcHVibGljIG93bmVyOwoKICAJZXZlbnQgT3duZXJUcmFuc2ZlclByb3Bvc2UoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvKTsKCiAgCW1vZGlmaWVyIG9ubHlPd25lcgoJewoJCXJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CgkJXzsKICAJfQoKICAJZnVuY3Rpb24gT3duZXJIZWxwZXIoKSBwdWJsaWMKCXsKCQlvd25lciA9IG1zZy5zZW5kZXI7CiAgCX0KCiAgCWZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX3RvKSBvbmx5T3duZXIgcHVibGljCgl7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gb3duZXIpOwoJCXJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMHgwKSk7CgkJb3duZXIgPSBfdG87CgkJT3duZXJUcmFuc2ZlclByb3Bvc2Uob3duZXIsIF90byk7CiAgCX0KCn0KCgpjb250cmFjdCBFUkMyMEludGVyZmFjZQp7CiAgCWV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludCBfdmFsdWUpOwogIAlldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKTsKCiAgCWZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIAlmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpOwogIAlmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIAlmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAJZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgCWZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKfQoKCmNvbnRyYWN0IEVSQzIwVG9rZW4gaXMgRVJDMjBJbnRlcmZhY2UsIE93bmVySGVscGVyCnsKICAJdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogIAl1aW50IHB1YmxpYyB0b2tlbnNJc3N1ZWRUb3RhbCA9IDA7CiAgCWFkZHJlc3MgcHVibGljIGNvbnN0YW50IGJ1cm5BZGRyZXNzID0gMDsKCiAgCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKICAJbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgogIAlmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KQoJewoJCXJldHVybiB0b2tlbnNJc3N1ZWRUb3RhbDsKICAJfQoKICAJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKQoJewoJCXJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIAl9CgoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykKCXsKCQlyZXF1aXJlKCBiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50ICk7CgoJICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOwoJCWJhbGFuY2VzW190b10gICAgICAgID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CgoJCVRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7CiAgICAKCQlyZXR1cm4gdHJ1ZTsKICAJfQoKICAJZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpCgl7CgkJcmVxdWlyZSAoIGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQgKTsKCgkJYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfYW1vdW50OwogICAgCQkKCQlBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX2Ftb3VudCk7CgoJCXJldHVybiB0cnVlOwoJfQoKICAJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpCgl7CgkJcmVxdWlyZSggYmFsYW5jZXNbX2Zyb21dID49IF9hbW91bnQgKTsKCQlyZXF1aXJlKCBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50ICk7CgkJYmFsYW5jZXNbX2Zyb21dICAgICAgICAgICAgPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF9hbW91bnQpOwoJCWFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOwoJCWJhbGFuY2VzW190b10gICAgICAgICAgICAgID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CgoJCVRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwoJCXJldHVybiB0cnVlOwogIAl9CgogIAlmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykKCXsKCQlyZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAJfQp9Cgpjb250cmFjdCBKb2huVmVyVG9rZW4gaXMgRVJDMjBUb2tlbgp7Cgl1aW50IGNvbnN0YW50IEUxOCA9IDEwKioxODsKCiAgCXN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSAJPSAiSm9oblZlclRva2VuIjsKICAJc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgCT0gIkpWVCI7CiAgCXVpbnQgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzIAk9IDE4OwoKCWFkZHJlc3MgcHVibGljIHdhbGxldDsKCWFkZHJlc3MgcHVibGljIGFkbWluV2FsbGV0OwoKCXVpbnQgcHVibGljIGNvbnN0YW50IHRvdGFsVG9rZW5DYXAgICA9IDc2MDAwMDAwMDAgKiBFMTg7Cgl1aW50IHB1YmxpYyBjb25zdGFudCBpY29Ub2tlbkNhcCAgICAgPSA0MDA2NjYyMDAwICogRTE4OwoJdWludCBwdWJsaWMgY29uc3RhbnQgbWt0VG9rZW5DYXAgICAgID0gMzU5MzMzODAwMCAqIEUxODsKCgl1aW50IHB1YmxpYyB0b2tlblBlckV0aCA9IDMwMDAwMDAgKiBFMTg7CgoJdWludCBwdWJsaWMgY29uc3RhbnQgcHJpdmF0ZVNhbGVCb251cwkgPSA1MDsKCXVpbnQgcHVibGljIGNvbnN0YW50IHByZVNhbGVGaXJzdEJvbnVzCSA9IDIwOwoJdWludCBwdWJsaWMgY29uc3RhbnQgcHJlU2FsZVNlY29uZEJvbnVzICA9IDE1OwoJdWludCBwdWJsaWMgY29uc3RhbnQgbWFpblNhbGVCb251cyAgPSAwOwoJCiAgCXVpbnQgcHVibGljIGNvbnN0YW50IHByaXZhdGVTYWxlRXRoZXJDYXAgPSAxMDAgZXRoZXI7CiAgCXVpbnQgcHVibGljIGNvbnN0YW50IHByZVNhbGVGaXJzdEV0aGVyQ2FwID0gMjAwIGV0aGVyOwogIAl1aW50IHB1YmxpYyBjb25zdGFudCBwcmVTYWxlU2Vjb25kRXRoZXJDYXAgPSAyMDAgZXRoZXI7CiAgCXVpbnQgcHVibGljIGNvbnN0YW50IG1haW5TYWxlRXRoZXJDYXAgPSA3IGV0aGVyOwogIAkKICAJdWludCBwdWJsaWMgY29uc3RhbnQgZGF5VG9NaW51c1Rva2VuID0gMzAwMCAqIEUxODsKCXVpbnQgcHVibGljIGNvbnN0YW50IGRheVRvRGF0ZSA9IDg2NDAwOwoKICAJdWludCBwdWJsaWMgY29uc3RhbnQgcHJpdmF0ZVNhbGVTdGFydERhdGUgPSAxNTE5MzQ0MDAwOyAvLyAyMDE4LTAyLTIzIDAwOjAwIFVUQwogIAl1aW50IHB1YmxpYyBjb25zdGFudCBwcml2YXRlU2FsZUVuZERhdGUgICA9IDE1MTk4NjI0MDA7IC8vIDIwMTgtMDMtMDEgMDA6MDAgVVRDCgogIAl1aW50IHB1YmxpYyBjb25zdGFudCBwcmVTYWxlRmlyc3RTdGFydERhdGUgPSAxNTIwMjA4MDAwOyAvLyAyMDE4LTAzLTA1IDAwOjAwIFVUQwogIAl1aW50IHB1YmxpYyBjb25zdGFudCBwcmVTYWxlRmlyc3RFbmREYXRlICAgPSAxNTIwNzI2NDAwOyAvLyAyMDE4LTAzLTExIDAwOjAwIFVUQwoKICAJdWludCBwdWJsaWMgY29uc3RhbnQgcHJlU2FsZVNlY29uZFN0YXJ0RGF0ZSA9IDE1MjExNTg0MDA7IC8vIDIwMTgtMDMtMTYgMDA6MDAgVVRDCiAgCXVpbnQgcHVibGljIGNvbnN0YW50IHByZVNhbGVTZWNvbmRFbmREYXRlICAgPSAxNTIxNjc2ODAwOyAvLyAyMDE4LTAzLTIyIDAwOjAwIFVUQwoKICAJdWludCBwdWJsaWMgY29uc3RhbnQgbWFpblNhbGVTdGFydERhdGUgPSAxNTIyMDIyNDAwOyAvLyAyMDE4LTAzLTI2IDAwOjAwIFVUQwogIAl1aW50IHB1YmxpYyBjb25zdGFudCBtYWluU2FsZUVuZERhdGUgICA9IDE1MzEzNTM2MDA7IC8vIDIwMTgtMDctMTEgMDA6MDAgVVRDCgoJdWludCBwdWJsaWMgY29uc3RhbnQgcHJpdmF0ZVNhbGVNaW5FdGggID0gMyBldGhlciAvIDEwOyAvLyAwLjMgRXRoZXIKCXVpbnQgcHVibGljIGNvbnN0YW50IHByZVNhbGVNaW5FdGggICAgICA9IDIgZXRoZXIgLyAxMDsgLy8gMC4yIEV0aGVyCgl1aW50IHB1YmxpYyBjb25zdGFudCBtYWluU2FsZU1pbkV0aCAgICAgPSAxIGV0aGVyIC8gMTA7IC8vIDAuMSBFdGhlcgoKICAJdWludCBwdWJsaWMgaWNvRXRoZXJSZWNlaXZlZFRvdGFsID0gMDsKICAJdWludCBwdWJsaWMgaWNvRXRoZXJSZWNlaXZlZFByaXZhdGVTYWxlID0gMDsKICAJdWludCBwdWJsaWMgaWNvRXRoZXJSZWNlaXZlZFByZUZpcnN0U2FsZSA9IDA7CiAgCXVpbnQgcHVibGljIGljb0V0aGVyUmVjZWl2ZWRQcmVTZWNvbmRTYWxlID0gMDsKICAJdWludCBwdWJsaWMgaWNvRXRoZXJSZWNlaXZlZE1haW5TYWxlID0gMDsKCXVpbnQgcHVibGljIGljb0V0aGVyUmVjZWl2ZWRNYWluU2FsZURheSA9IDA7CgkKCXVpbnQgcHVibGljIHRva2VuSXNzdWVkVG9kYXkgPSAwOwoJCiAgICB1aW50IHB1YmxpYyB0b2tlbklzc3VlZFRvdGFsICAgICAgICA9IDA7CiAgCXVpbnQgcHVibGljIHRva2VuSXNzdWVkUHJpdmF0ZUljbyAgID0gMDsKICAJdWludCBwdWJsaWMgdG9rZW5Jc3N1ZWRQcmVGaXJzdEljbyAgPSAwOwogIAl1aW50IHB1YmxpYyB0b2tlbklzc3VlZFByZVNlY29uZEljbyA9IDA7CiAgCXVpbnQgcHVibGljIHRva2VuSXNzdWVkTWFpblNhbGVJY28gID0gMDsKICAJdWludCBwdWJsaWMgdG9rZW5Jc3N1ZWRNa3QgICAgICAgICAgPSAwOwoJdWludCBwdWJsaWMgdG9rZW5Jc3N1ZWRBaXJEcm9wICAgICAgPSAwOwoJdWludCBwdWJsaWMgdG9rZW5Jc3N1ZWRMb2NrVXAgICAgICAgPSAwOwoKICAJbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBpY29FdGhlckNvbnRyaWJ1dGVkOwogIAltYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGljb1Rva2VuUmVjZWl2ZWQ7CiAgCW1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgcmVmdW5kQ2xhaW1lZDsKICAJCiAJZXZlbnQgV2FsbGV0Q2hhbmdlKGFkZHJlc3MgX25ld1dhbGxldCk7CiAgCWV2ZW50IEFkbWluV2FsbGV0Q2hhbmdlKGFkZHJlc3MgX25ld0FkbWluV2FsbGV0KTsKICAJZXZlbnQgVG9rZW5NaW50ZWQoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfdG9rZW5zLCB1aW50IF9iYWxhbmNlKTsKICAJZXZlbnQgVG9rZW5BaXJEcm9wZWQoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfdG9rZW5zLCB1aW50IF9iYWxhbmNlKTsKICAJZXZlbnQgVG9rZW5Jc3N1ZWQoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfdG9rZW5zLCB1aW50IF9iYWxhbmNlLCB1aW50IF9ldGhlckNvbnRyaWJ1dGVkKTsKICAJZXZlbnQgUmVmdW5kKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIHVpbnQgX2Ftb3VudCwgdWludCBfdG9rZW5zKTsKICAJZXZlbnQgTG9ja1JlbW92ZShhZGRyZXNzIGluZGV4ZWQgX3BhcnRpY2lwYW50KTsKCWV2ZW50IFdpdGhEcmF3KGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQgX2Ftb3VudCk7CglldmVudCBPd25lclJlY2xhaW0oYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50IF9hbW91bnQpOwoKICAJZnVuY3Rpb24gSm9oblZlclRva2VuKCkgcHVibGljCgl7CgkJcmVxdWlyZSggaWNvVG9rZW5DYXAgKyBta3RUb2tlbkNhcCA9PSB0b3RhbFRva2VuQ2FwICk7CgkJd2FsbGV0ID0gb3duZXI7CgkJYWRtaW5XYWxsZXQgPSBvd25lcjsKICAJfQoKICAJZnVuY3Rpb24gKCkgcGF5YWJsZSBwdWJsaWMKCXsKICAgIAlidXlUb2tlbigpOwogIAl9CiAgCQogIAlmdW5jdGlvbiBhdE5vdygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KQoJewoJCXJldHVybiBub3c7CiAgCX0KCiAgCWZ1bmN0aW9uIGJ1eVRva2VuKCkgcHJpdmF0ZQoJewoJCXVpbnQgbm93VGltZSA9IGF0Tm93KCk7CgoJCXVpbnQgc2FsZVRpbWUgPSAwOyAvLyAxIDogcHJpdmF0ZVNhbGUsIDIgOiBwcmVTYWxlRmlyc3QsIDMgOiBwcmVTYWxlU2Vjb25kLCA0IDogbWFpblNhbGUKCgkJdWludCBtaW5FdGggPSAwOwoJCXVpbnQgbWF4RXRoID0gMDsKCgkJdWludCB0b2tlbnMgPSAwOwoJCXVpbnQgdG9rZW5Cb251cyA9IDA7CgkJdWludCB0b2tlbk1pbnVzUGVyRXRoZXIgPSAwOwoJCXVpbnQgZXRoZXJDYXAgPSAwOwoKCQl1aW50IG1haW5TYWxlRGF5ID0gMDsKCQkKCQlpZiAobm93VGltZSA+IHByaXZhdGVTYWxlU3RhcnREYXRlICYmIG5vd1RpbWUgPCBwcml2YXRlU2FsZUVuZERhdGUpCgkJewoJCQlzYWxlVGltZSA9IDE7CgkJCW1pbkV0aCA9IHByaXZhdGVTYWxlTWluRXRoOwoJCQl0b2tlbkJvbnVzID0gcHJpdmF0ZVNhbGVCb251czsKCQkJZXRoZXJDYXAgPSBwcml2YXRlU2FsZUV0aGVyQ2FwOwoJCQltYXhFdGggPSBwcml2YXRlU2FsZUV0aGVyQ2FwOwoJCX0KCgkJaWYgKG5vd1RpbWUgPiBwcmVTYWxlRmlyc3RTdGFydERhdGUgJiYgbm93VGltZSA8IHByZVNhbGVGaXJzdEVuZERhdGUpCgkJewoJCQlzYWxlVGltZSA9IDI7CgkJCW1pbkV0aCA9IHByZVNhbGVNaW5FdGg7CgkJCXRva2VuQm9udXMgPSBwcmVTYWxlRmlyc3RCb251czsKCQkJZXRoZXJDYXAgPSBwcmVTYWxlRmlyc3RFdGhlckNhcDsKCQkJbWF4RXRoID0gcHJlU2FsZUZpcnN0RXRoZXJDYXA7CgkJfQoKCQlpZiAobm93VGltZSA+IHByZVNhbGVTZWNvbmRTdGFydERhdGUgJiYgbm93VGltZSA8IHByZVNhbGVTZWNvbmRFbmREYXRlKQoJCXsKCQkJc2FsZVRpbWUgPSAzOwoJCQltaW5FdGggPSBwcmVTYWxlTWluRXRoOwoJCQl0b2tlbkJvbnVzID0gcHJlU2FsZVNlY29uZEJvbnVzOwoJCQlldGhlckNhcCA9IHByZVNhbGVTZWNvbmRFdGhlckNhcDsKCQkJbWF4RXRoID0gcHJlU2FsZVNlY29uZEV0aGVyQ2FwOwoJCX0KCgkJaWYgKG5vd1RpbWUgPiBtYWluU2FsZVN0YXJ0RGF0ZSAmJiBub3dUaW1lIDwgbWFpblNhbGVFbmREYXRlKQoJCXsKCQkJc2FsZVRpbWUgPSA0OwoJCQltaW5FdGggPSBtYWluU2FsZU1pbkV0aDsKCQkJdWludCBkYXRlU3RhcnRUaW1lID0gMDsKCQkJdWludCBkYXRlRW5kVGltZSA9IDA7CgkJCQoJCSAgICBmb3IgKHVpbnQgaSA9IDE7IGkgPD0gMTA4OyBpKyspCgkJICAgIHsKCQkgICAgICAgIGRhdGVTdGFydFRpbWUgPSAwOwoJCSAgICAgICAgZGF0ZVN0YXJ0VGltZSA9IGRhdGVTdGFydFRpbWUuYWRkKGkuc3ViKDEpKTsKCQkgICAgICAgIGRhdGVTdGFydFRpbWUgPSBkYXRlU3RhcnRUaW1lLm11bChkYXlUb0RhdGUpOwoJCSAgICAgICAgZGF0ZVN0YXJ0VGltZSA9IGRhdGVTdGFydFRpbWUuYWRkKG1haW5TYWxlU3RhcnREYXRlKTsKCQkgICAgICAgIAoJCSAgICAgICAgZGF0ZUVuZFRpbWUgPSAwOwoJCSAgICAgICAgZGF0ZUVuZFRpbWUgPSBkYXRlRW5kVGltZS5hZGQoaS5zdWIoMSkpOwoJCSAgICAgICAgZGF0ZUVuZFRpbWUgPSBkYXRlRW5kVGltZS5tdWwoZGF5VG9EYXRlKTsKCQkgICAgICAgIGRhdGVFbmRUaW1lID0gZGF0ZUVuZFRpbWUuYWRkKG1haW5TYWxlRW5kRGF0ZSk7CgkJICAgICAgICAKICAJCQkgICAgaWYgKG5vd1RpbWUgPiBkYXRlU3RhcnRUaW1lICYmIG5vd1RpbWUgPCBkYXRlRW5kVGltZSkgCgkJCSAgICB7CgkJCSAgICAJbWFpblNhbGVEYXkgPSBpOwoJCQkgICAgfQoJCSAgICB9CgkJICAgIAoJCSAgICByZXF1aXJlKCBtYWluU2FsZURheSAhPSAwICk7CgkJICAgIAoJCSAgICBldGhlckNhcCA9IG1haW5TYWxlRXRoZXJDYXA7CgkJICAgIG1heEV0aCA9IG1haW5TYWxlRXRoZXJDYXA7CgkJICAgIHRva2VuTWludXNQZXJFdGhlciA9IHRva2VuTWludXNQZXJFdGhlci5hZGQoZGF5VG9NaW51c1Rva2VuKTsKCQkgICAgdG9rZW5NaW51c1BlckV0aGVyID0gdG9rZW5NaW51c1BlckV0aGVyLm11bChtYWluU2FsZURheS5zdWIoMSkpOwoJCX0KCQkKCQlyZXF1aXJlKCBzYWxlVGltZSA+PSAxICYmIHNhbGVUaW1lIDw9IDQgKTsKCQlyZXF1aXJlKCBtc2cudmFsdWUgPj0gbWluRXRoICk7CgkJcmVxdWlyZSggaWNvRXRoZXJDb250cmlidXRlZFttc2cuc2VuZGVyXS5hZGQobXNnLnZhbHVlKSA8PSBtYXhFdGggKTsKCgkJdG9rZW5zID0gdG9rZW5QZXJFdGgubXVsKG1zZy52YWx1ZSkgLyAxIGV0aGVyOwoJCXRva2VuTWludXNQZXJFdGhlciA9IHRva2VuTWludXNQZXJFdGhlci5tdWwobXNnLnZhbHVlKSAvIDEgZXRoZXI7CiAgICAgIAl0b2tlbnMgPSB0b2tlbnMubXVsKDEwMCArIHRva2VuQm9udXMpIC8gMTAwOwogICAgICAJdG9rZW5zID0gdG9rZW5zLnN1Yih0b2tlbk1pbnVzUGVyRXRoZXIpOwoKCQlpZihzYWxlVGltZSA9PSAxKQoJCXsKCQkgICAgcmVxdWlyZSggaWNvRXRoZXJSZWNlaXZlZFByaXZhdGVTYWxlLmFkZChtc2cudmFsdWUpIDw9IGV0aGVyQ2FwICk7CiAgICAKCQkgICAgaWNvRXRoZXJSZWNlaXZlZFByaXZhdGVTYWxlID0gaWNvRXRoZXJSZWNlaXZlZFByaXZhdGVTYWxlLmFkZChtc2cudmFsdWUpOwoJCSAgICB0b2tlbklzc3VlZFByaXZhdGVJY28gPSB0b2tlbklzc3VlZFByaXZhdGVJY28uYWRkKHRva2Vucyk7CgkJfQoJCWVsc2UgaWYoc2FsZVRpbWUgPT0gMikKCQl7CgkJICAgIHJlcXVpcmUoIGljb0V0aGVyUmVjZWl2ZWRQcmVGaXJzdFNhbGUuYWRkKG1zZy52YWx1ZSkgPD0gZXRoZXJDYXAgKTsKICAgIAoJCSAgICBpY29FdGhlclJlY2VpdmVkUHJlRmlyc3RTYWxlID0gaWNvRXRoZXJSZWNlaXZlZFByZUZpcnN0U2FsZS5hZGQobXNnLnZhbHVlKTsKCQkgICAgdG9rZW5Jc3N1ZWRQcmVGaXJzdEljbyA9IHRva2VuSXNzdWVkUHJlRmlyc3RJY28uYWRkKHRva2Vucyk7CgkJfQoJCWVsc2UgaWYoc2FsZVRpbWUgPT0gMykKCQl7CgkJICAgIHJlcXVpcmUoIGljb0V0aGVyUmVjZWl2ZWRQcmVTZWNvbmRTYWxlLmFkZChtc2cudmFsdWUpIDw9IGV0aGVyQ2FwICk7CiAgICAKCQkgICAgaWNvRXRoZXJSZWNlaXZlZFByZVNlY29uZFNhbGUgPSBpY29FdGhlclJlY2VpdmVkUHJlU2Vjb25kU2FsZS5hZGQobXNnLnZhbHVlKTsKCQkgICAgdG9rZW5Jc3N1ZWRQcmVTZWNvbmRJY28gPSB0b2tlbklzc3VlZFByZVNlY29uZEljby5hZGQodG9rZW5zKTsKCQl9CgkJZWxzZSBpZihzYWxlVGltZSA9PSA0KQoJCXsKCQkgICAgcmVxdWlyZSggbXNnLnZhbHVlIDw9IGV0aGVyQ2FwICk7CgkJICAgIAoJCSAgICBpZih0b2tlbklzc3VlZFRvZGF5IDwgbWFpblNhbGVEYXkpCgkJICAgIHsKCQkgICAgICAgIHRva2VuSXNzdWVkVG9kYXkgPSBtYWluU2FsZURheTsKCQkgICAgICAgIGljb0V0aGVyUmVjZWl2ZWRNYWluU2FsZURheSA9IDA7CgkJICAgIH0KCQkgICAgCgkJICAgIHJlcXVpcmUoIGljb0V0aGVyUmVjZWl2ZWRNYWluU2FsZURheS5hZGQobXNnLnZhbHVlKSA8PSBldGhlckNhcCApOwogICAgCgkJICAgIGljb0V0aGVyUmVjZWl2ZWRNYWluU2FsZSA9IGljb0V0aGVyUmVjZWl2ZWRNYWluU2FsZS5hZGQobXNnLnZhbHVlKTsKCQkgICAgaWNvRXRoZXJSZWNlaXZlZE1haW5TYWxlRGF5ID0gaWNvRXRoZXJSZWNlaXZlZE1haW5TYWxlRGF5LmFkZChtc2cudmFsdWUpOwoJCSAgICB0b2tlbklzc3VlZE1haW5TYWxlSWNvID0gdG9rZW5Jc3N1ZWRNYWluU2FsZUljby5hZGQodG9rZW5zKTsKCQl9CgkJCgkJYmFsYW5jZXNbbXNnLnNlbmRlcl0gICAgICAgICA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZCh0b2tlbnMpOwoJICAgIGljb1Rva2VuUmVjZWl2ZWRbbXNnLnNlbmRlcl0gPSBpY29Ub2tlblJlY2VpdmVkW21zZy5zZW5kZXJdLmFkZCh0b2tlbnMpOwoJCXRva2Vuc0lzc3VlZFRvdGFsICAgICAgICAgICAgPSB0b2tlbnNJc3N1ZWRUb3RhbC5hZGQodG9rZW5zKTsKCQlpY29FdGhlckNvbnRyaWJ1dGVkW21zZy5zZW5kZXJdID0gaWNvRXRoZXJDb250cmlidXRlZFttc2cuc2VuZGVyXS5hZGQobXNnLnZhbHVlKTsKICAgIAoJCVRyYW5zZmVyKDB4MCwgbXNnLnNlbmRlciwgdG9rZW5zKTsKCQlUb2tlbklzc3VlZChtc2cuc2VuZGVyLCB0b2tlbnMsIGJhbGFuY2VzW21zZy5zZW5kZXJdLCBtc2cudmFsdWUpOwoKCQl3YWxsZXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAJfQoKIAlmdW5jdGlvbiBpc1RyYW5zZmVyYWJsZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sIHRyYW5zZmVyYWJsZSkKCXsKCQlpZiAoIGF0Tm93KCkgPCBwcmVTYWxlU2Vjb25kRW5kRGF0ZSApCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlyZXR1cm4gdHJ1ZTsKICAJfQoKICAJZnVuY3Rpb24gY2hhbmdlV2FsbGV0KGFkZHJlc3MgX3dhbGxldCkgb25seU93bmVyIHB1YmxpYwoJewogICAgCQlyZXF1aXJlKCBfd2FsbGV0ICE9IGFkZHJlc3MoMHgwKSApOwogICAgCQl3YWxsZXQgPSBfd2FsbGV0OwogICAgCQlXYWxsZXRDaGFuZ2Uod2FsbGV0KTsKICAJfQoKICAJZnVuY3Rpb24gY2hhbmdlQWRtaW5XYWxsZXQoYWRkcmVzcyBfd2FsbGV0KSBvbmx5T3duZXIgcHVibGljCgl7CiAgICAJCXJlcXVpcmUoIF93YWxsZXQgIT0gYWRkcmVzcygweDApICk7CiAgICAJCWFkbWluV2FsbGV0ID0gX3dhbGxldDsKICAgIAkJQWRtaW5XYWxsZXRDaGFuZ2UoYWRtaW5XYWxsZXQpOwogIAl9CgogIAlmdW5jdGlvbiBtaW50TWFya2V0aW5nKGFkZHJlc3MgX3BhcnRpY2lwYW50KSBvbmx5T3duZXIgcHVibGljCgl7CgkJdWludCB0b2tlbnMgPSBta3RUb2tlbkNhcC5zdWIodG9rZW5Jc3N1ZWRBaXJEcm9wKTsKCQkKCQliYWxhbmNlc1tfcGFydGljaXBhbnRdID0gYmFsYW5jZXNbX3BhcnRpY2lwYW50XS5hZGQodG9rZW5zKTsKCQkKCQl0b2tlbklzc3VlZE1rdCAgID0gdG9rZW5Jc3N1ZWRNa3QuYWRkKHRva2Vucyk7CgkJdG9rZW5Jc3N1ZWRUb3RhbCA9IHRva2VuSXNzdWVkVG90YWwuYWRkKHRva2Vucyk7CgkJCgkJVHJhbnNmZXIoMHgwLCBfcGFydGljaXBhbnQsIHRva2Vucyk7CgkJVG9rZW5NaW50ZWQoX3BhcnRpY2lwYW50LCB0b2tlbnMsIGJhbGFuY2VzW19wYXJ0aWNpcGFudF0pOwogIAl9CgogIAlmdW5jdGlvbiBtaW50TG9ja1VwVG9rZW5zKGFkZHJlc3MgX3BhcnRpY2lwYW50KSBvbmx5T3duZXIgcHVibGljCgl7CgkJcmVxdWlyZSAoIGF0Tm93KCkgPj0gbWFpblNhbGVFbmREYXRlICk7CgkJCgkJdWludCB0b2tlbnMgPSB0b3RhbFRva2VuQ2FwLnN1Yih0b2tlbklzc3VlZFRvdGFsKTsKCQkKCQliYWxhbmNlc1tfcGFydGljaXBhbnRdID0gYmFsYW5jZXNbX3BhcnRpY2lwYW50XS5hZGQodG9rZW5zKTsKCQkKCQl0b2tlbklzc3VlZExvY2tVcCA9IHRva2VuSXNzdWVkTG9ja1VwLmFkZCh0b2tlbnMpOwoJCXRva2VuSXNzdWVkVG90YWwgPSB0b2tlbklzc3VlZFRvdGFsLmFkZCh0b2tlbnMpOwoJCQoJCVRyYW5zZmVyKDB4MCwgX3BhcnRpY2lwYW50LCB0b2tlbnMpOwoJCVRva2VuTWludGVkKF9wYXJ0aWNpcGFudCwgdG9rZW5zLCBiYWxhbmNlc1tfcGFydGljaXBhbnRdKTsKICAJfQoKICAJZnVuY3Rpb24gYWlyRHJvcE9uZShhZGRyZXNzIF9hZGRyZXNzLCB1aW50IF9hbW91bnQpIG9ubHlPd25lciBwdWJsaWMKICAJewogIAkgICAgdWludCB0b2tlbnMgPSBfYW1vdW50ICogRTE4OwoJCSAgICAgICAKCQliYWxhbmNlc1tfYWRkcmVzc10gPSBiYWxhbmNlc1tfYWRkcmVzc10uYWRkKHRva2Vucyk7CgkJCgkJdG9rZW5Jc3N1ZWRBaXJEcm9wID0gdG9rZW5Jc3N1ZWRBaXJEcm9wLmFkZCh0b2tlbnMpOwogICAgICAgIHRva2VuSXNzdWVkVG90YWwgPSB0b2tlbklzc3VlZFRvdGFsLmFkZCh0b2tlbnMpOwoJCQogICAgICAgIFRyYW5zZmVyKDB4MCwgX2FkZHJlc3MsIHRva2Vucyk7CiAgICAgICAgVG9rZW5BaXJEcm9wZWQoX2FkZHJlc3MsIHRva2VucywgYmFsYW5jZXNbX2FkZHJlc3NdKTsKICAJfQoKICAJZnVuY3Rpb24gYWlyRHJvcE11bHRpcGxlKGFkZHJlc3NbXSBfYWRkcmVzc2VzLCB1aW50W10gX2Ftb3VudHMpIG9ubHlPd25lciBwdWJsaWMKICAJewoJCXJlcXVpcmUoIF9hZGRyZXNzZXMubGVuZ3RoID09IF9hbW91bnRzLmxlbmd0aCApOwoJCQogIAkgICAgdWludCB0b2tlbnMgPSAwOwogIAkgICAgCgkJZm9yICh1aW50IGkgPSAwOyBpIDwgX2FkZHJlc3Nlcy5sZW5ndGg7IGkrKykKCQl7CgkJICAgICAgICB0b2tlbnMgPSBfYW1vdW50c1tpXSAqIEUxODsKCQkJCQoJCSAgICAgICAgYmFsYW5jZXNbX2FkZHJlc3Nlc1tpXV0gPSBiYWxhbmNlc1tfYWRkcmVzc2VzW2ldXS5hZGQodG9rZW5zKTsKCQkKCQkJCXRva2VuSXNzdWVkQWlyRHJvcCA9IHRva2VuSXNzdWVkQWlyRHJvcC5hZGQodG9rZW5zKTsKCQkgICAgICAgIHRva2VuSXNzdWVkVG90YWwgPSB0b2tlbklzc3VlZFRvdGFsLmFkZCh0b2tlbnMpOwoJCQoJCSAgICAgICAgVHJhbnNmZXIoMHgwLCBfYWRkcmVzc2VzW2ldLCB0b2tlbnMpOwoJCSAgICAgICAgVG9rZW5BaXJEcm9wZWQoX2FkZHJlc3Nlc1tpXSwgdG9rZW5zLCBiYWxhbmNlc1tfYWRkcmVzc2VzW2ldXSk7CgkJfQogIAl9CgogIAlmdW5jdGlvbiBhaXJEcm9wTXVsdGlwbGVTYW1lKGFkZHJlc3NbXSBfYWRkcmVzc2VzLCB1aW50IF9hbW91bnQpIG9ubHlPd25lciBwdWJsaWMKICAJewogIAkgICAgdWludCB0b2tlbnMgPSBfYW1vdW50ICogRTE4OwogIAkgICAgCgkJZm9yICh1aW50IGkgPSAwOyBpIDwgX2FkZHJlc3Nlcy5sZW5ndGg7IGkrKykKCQl7CgkJICAgICAgICBiYWxhbmNlc1tfYWRkcmVzc2VzW2ldXSA9IGJhbGFuY2VzW19hZGRyZXNzZXNbaV1dLmFkZCh0b2tlbnMpOwoJCQoJCQkJdG9rZW5Jc3N1ZWRBaXJEcm9wID0gdG9rZW5Jc3N1ZWRBaXJEcm9wLmFkZCh0b2tlbnMpOwoJCSAgICAgICAgdG9rZW5Jc3N1ZWRUb3RhbCA9IHRva2VuSXNzdWVkVG90YWwuYWRkKHRva2Vucyk7CgkJCgkJICAgICAgICBUcmFuc2ZlcigweDAsIF9hZGRyZXNzZXNbaV0sIHRva2Vucyk7CgkJICAgICAgICBUb2tlbkFpckRyb3BlZChfYWRkcmVzc2VzW2ldLCB0b2tlbnMsIGJhbGFuY2VzW19hZGRyZXNzZXNbaV1dKTsKCQl9CiAgCX0KICAJCiAgCWZ1bmN0aW9uIG93bmVyV2l0aGRyYXcoKSBleHRlcm5hbCBvbmx5T3duZXIKCXsKCQl1aW50IGFtb3VudCA9IHRoaXMuYmFsYW5jZTsKCQl3YWxsZXQudHJhbnNmZXIoYW1vdW50KTsKCQlXaXRoRHJhdyhtc2cuc2VuZGVyLCBhbW91bnQpOwogIAl9CiAgCQogIAlmdW5jdGlvbiB0cmFuc2ZlckFueUVSQzIwVG9rZW4oYWRkcmVzcyB0b2tlbkFkZHJlc3MsIHVpbnQgYW1vdW50KSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykKCXsKICAJCXJldHVybiBFUkMyMEludGVyZmFjZSh0b2tlbkFkZHJlc3MpLnRyYW5zZmVyKG93bmVyLCBhbW91bnQpOwogIAl9CiAgCQogIAlmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQoJewoJCXJlcXVpcmUoIGlzVHJhbnNmZXJhYmxlKCkgKTsKCQkKCQlyZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfYW1vdW50KTsKICAJfQogIAkKICAJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpCgl7CgkJcmVxdWlyZSggaXNUcmFuc2ZlcmFibGUoKSApOwoJCQoJCXJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgCX0KCiAgCWZ1bmN0aW9uIHRyYW5zZmVyTXVsdGlwbGUoYWRkcmVzc1tdIF9hZGRyZXNzZXMsIHVpbnRbXSBfYW1vdW50cykgZXh0ZXJuYWwKICAJewoJCXJlcXVpcmUoIGlzVHJhbnNmZXJhYmxlKCkgKTsKCQlyZXF1aXJlKCBfYWRkcmVzc2VzLmxlbmd0aCA9PSBfYW1vdW50cy5sZW5ndGggKTsKCQkKCQlmb3IgKHVpbnQgaSA9IDA7IGkgPCBfYWRkcmVzc2VzLmxlbmd0aDsgaSsrKQoJCXsKCQkJc3VwZXIudHJhbnNmZXIoX2FkZHJlc3Nlc1tpXSwgX2Ftb3VudHNbaV0pOwoJCX0KICAJfQoKICAJZnVuY3Rpb24gcmVjbGFpbUZ1bmRzKCkgZXh0ZXJuYWwKCXsKCQl1aW50IHRva2VuczsKCQl1aW50IGFtb3VudDsKCgkJcmVxdWlyZSggYXROb3coKSA+IHByZVNhbGVTZWNvbmRFbmREYXRlICk7CgkJcmVxdWlyZSggIXJlZnVuZENsYWltZWRbbXNnLnNlbmRlcl0gKTsKCQlyZXF1aXJlKCBpY29FdGhlckNvbnRyaWJ1dGVkW21zZy5zZW5kZXJdID4gMCApOwoKCQl0b2tlbnMgPSBpY29Ub2tlblJlY2VpdmVkW21zZy5zZW5kZXJdOwoJCWFtb3VudCA9IGljb0V0aGVyQ29udHJpYnV0ZWRbbXNnLnNlbmRlcl07CgoJCWJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKHRva2Vucyk7CgkJdG9rZW5zSXNzdWVkVG90YWwgICAgPSB0b2tlbnNJc3N1ZWRUb3RhbC5zdWIodG9rZW5zKTsKCgkJcmVmdW5kQ2xhaW1lZFttc2cuc2VuZGVyXSA9IHRydWU7CgoJCW1zZy5zZW5kZXIudHJhbnNmZXIoYW1vdW50KTsKCgkJVHJhbnNmZXIobXNnLnNlbmRlciwgMHgwLCB0b2tlbnMpOwoJCVJlZnVuZChtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vucyk7CiAgCX0KICAJCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvT3duZXIoYWRkcmVzcyBfZnJvbSkgb25seU93bmVyIHB1YmxpYwogICAgewogICAgICAgIHVpbnQgYW1vdW50ID0gYmFsYW5jZU9mKF9mcm9tKTsKICAgICAgICAKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKGFtb3VudCk7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLmFkZChhbW91bnQpOwogICAgICAgIAogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBvd25lciwgYW1vdW50KTsKICAgICAgICBPd25lclJlY2xhaW0oX2Zyb20sIG93bmVyLCBhbW91bnQpOwogICAgfQp9'.
	

]
