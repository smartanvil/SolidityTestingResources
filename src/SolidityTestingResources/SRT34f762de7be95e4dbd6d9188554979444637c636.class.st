Class {
	#name : #SRT34f762de7be95e4dbd6d9188554979444637c636,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT34f762de7be95e4dbd6d9188554979444637c636 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovLyBFUkMyMCBJbnRlcmZhY2UKY29udHJhY3QgRVJDMjAgewogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpOwp9Cgpjb250cmFjdCBQcmVzYWxlUG9vbCB7CiAgICBlbnVtIFN0YXRlIHsgT3BlbiwgRmFpbGVkLCBDbG9zZWQsIFBhaWQgfQogICAgU3RhdGUgcHVibGljIHN0YXRlOwoKICAgIGFkZHJlc3NbXSBwdWJsaWMgYWRtaW5zOwoKICAgIHVpbnQgcHVibGljIG1pbkNvbnRyaWJ1dGlvbjsKICAgIHVpbnQgcHVibGljIG1heENvbnRyaWJ1dGlvbjsKICAgIHVpbnQgcHVibGljIG1heFBvb2xUb3RhbDsKCiAgICBhZGRyZXNzW10gcHVibGljIHBhcnRpY2lwYW50czsKCiAgICBib29sIHB1YmxpYyB3aGl0ZWxpc3RBbGw7CgogICAgc3RydWN0IFBhcnRpY2lwYW50U3RhdGUgewogICAgICAgIHVpbnQgY29udHJpYnV0aW9uOwogICAgICAgIHVpbnQgcmVtYWluaW5nOwogICAgICAgIGJvb2wgd2hpdGVsaXN0ZWQ7CiAgICAgICAgYm9vbCBleGlzdHM7CiAgICB9CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IFBhcnRpY2lwYW50U3RhdGUpIHB1YmxpYyBiYWxhbmNlczsKICAgIHVpbnQgcHVibGljIHBvb2xUb3RhbDsKCiAgICBhZGRyZXNzIHByZXNhbGVBZGRyZXNzOwogICAgYm9vbCByZWZ1bmRhYmxlOwogICAgdWludCBnYXNGdW5kVG90YWw7CgogICAgRVJDMjAgcHVibGljIHRva2VuOwoKICAgIGV2ZW50IERlcG9zaXQoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIF9mcm9tLAogICAgICAgIHVpbnQgX3ZhbHVlCiAgICApOwogICAgZXZlbnQgUGF5b3V0KAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfdG8sCiAgICAgICAgdWludCBfdmFsdWUKICAgICk7CiAgICBldmVudCBXaXRoZHJhd2woCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIF90bywKICAgICAgICB1aW50IF92YWx1ZQogICAgKTsKCiAgICBtb2RpZmllciBvbmx5QWRtaW5zKCkgewogICAgICAgIHJlcXVpcmUoaXNBZG1pbihtc2cuc2VuZGVyKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvblN0YXRlKFN0YXRlIHMpIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IHMpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgc3RhdGVBbGxvd3NDb25maWd1cmF0aW9uKCkgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuT3BlbiB8fCBzdGF0ZSA9PSBTdGF0ZS5DbG9zZWQpOwogICAgICAgIF87CiAgICB9CgogICAgYm9vbCBsb2NrZWQ7CiAgICBtb2RpZmllciBub1JlZW50cmFuY3koKSB7CiAgICAgICAgcmVxdWlyZSghbG9ja2VkKTsKICAgICAgICBsb2NrZWQgPSB0cnVlOwogICAgICAgIF87CiAgICAgICAgbG9ja2VkID0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gUHJlc2FsZVBvb2wodWludCBfbWluQ29udHJpYnV0aW9uLCB1aW50IF9tYXhDb250cmlidXRpb24sIHVpbnQgX21heFBvb2xUb3RhbCwgYWRkcmVzc1tdIF9hZG1pbnMpIHBheWFibGUgewogICAgICAgIHN0YXRlID0gU3RhdGUuT3BlbjsKICAgICAgICBhZG1pbnMucHVzaChtc2cuc2VuZGVyKTsKCiAgICAgICAgc2V0Q29udHJpYnV0aW9uU2V0dGluZ3MoX21pbkNvbnRyaWJ1dGlvbiwgX21heENvbnRyaWJ1dGlvbiwgX21heFBvb2xUb3RhbCk7CgogICAgICAgIHdoaXRlbGlzdEFsbCA9IHRydWU7CgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IF9hZG1pbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGFkbWluID0gX2FkbWluc1tpXTsKICAgICAgICAgICAgaWYgKCFpc0FkbWluKGFkbWluKSkgewogICAgICAgICAgICAgICAgYWRtaW5zLnB1c2goYWRtaW4pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBkZXBvc2l0KCk7CiAgICB9CgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgZGVwb3NpdCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsb3NlKCkgcHVibGljIG9ubHlBZG1pbnMgb25TdGF0ZShTdGF0ZS5PcGVuKSB7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5DbG9zZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gb3BlbigpIHB1YmxpYyBvbmx5QWRtaW5zIG9uU3RhdGUoU3RhdGUuQ2xvc2VkKSB7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5PcGVuOwogICAgfQoKICAgIGZ1bmN0aW9uIGZhaWwoKSBwdWJsaWMgb25seUFkbWlucyBzdGF0ZUFsbG93c0NvbmZpZ3VyYXRpb24gewogICAgICAgIHN0YXRlID0gU3RhdGUuRmFpbGVkOwogICAgfQoKICAgIGZ1bmN0aW9uIHBheVRvUHJlc2FsZShhZGRyZXNzIF9wcmVzYWxlQWRkcmVzcykgcHVibGljIG9ubHlBZG1pbnMgb25TdGF0ZShTdGF0ZS5DbG9zZWQpIHsKICAgICAgICBzdGF0ZSA9IFN0YXRlLlBhaWQ7CiAgICAgICAgcHJlc2FsZUFkZHJlc3MgPSBfcHJlc2FsZUFkZHJlc3M7CiAgICAgICAgcmVmdW5kYWJsZSA9IHRydWU7CiAgICAgICAgcHJlc2FsZUFkZHJlc3MudHJhbnNmZXIocG9vbFRvdGFsKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWZ1bmRQcmVzYWxlKCkgcGF5YWJsZSBwdWJsaWMgb25TdGF0ZShTdGF0ZS5QYWlkKSB7CiAgICAgICAgcmVxdWlyZShyZWZ1bmRhYmxlICYmIG1zZy52YWx1ZSA+PSBwb29sVG90YWwpOwogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBwcmVzYWxlQWRkcmVzcyB8fCBpc0FkbWluKG1zZy5zZW5kZXIpKTsKICAgICAgICBnYXNGdW5kVG90YWwgPSBtc2cudmFsdWUgLSBwb29sVG90YWw7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5GYWlsZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0VG9rZW4oYWRkcmVzcyB0b2tlbkFkZHJlc3MpIHB1YmxpYyBvbmx5QWRtaW5zIHsKICAgICAgICB0b2tlbiA9IEVSQzIwKHRva2VuQWRkcmVzcyk7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdBbGwoKSBwdWJsaWMgewogICAgICAgIHVpbnQgdG90YWwgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5yZW1haW5pbmc7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ucmVtYWluaW5nID0gMDsKCiAgICAgICAgaWYgKHN0YXRlID09IFN0YXRlLk9wZW4gfHwgc3RhdGUgPT0gU3RhdGUuRmFpbGVkKSB7CiAgICAgICAgICAgIHRvdGFsICs9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmNvbnRyaWJ1dGlvbjsKICAgICAgICAgICAgaWYgKGdhc0Z1bmRUb3RhbCA+IDApIHsKICAgICAgICAgICAgICAgIHVpbnQgZ2FzUmVmdW5kID0gKGJhbGFuY2VzW21zZy5zZW5kZXJdLmNvbnRyaWJ1dGlvbiAqIGdhc0Z1bmRUb3RhbCkgLyAocG9vbFRvdGFsKTsKICAgICAgICAgICAgICAgIGdhc0Z1bmRUb3RhbCAtPSBnYXNSZWZ1bmQ7CiAgICAgICAgICAgICAgICB0b3RhbCArPSBnYXNSZWZ1bmQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcG9vbFRvdGFsIC09IGJhbGFuY2VzW21zZy5zZW5kZXJdLmNvbnRyaWJ1dGlvbjsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0uY29udHJpYnV0aW9uID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlBhaWQpOwogICAgICAgIH0KCiAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcih0b3RhbCk7CiAgICAgICAgV2l0aGRyYXdsKG1zZy5zZW5kZXIsIHRvdGFsKTsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50IGFtb3VudCkgcHVibGljIG9uU3RhdGUoU3RhdGUuT3BlbikgewogICAgICAgIHVpbnQgdG90YWwgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5yZW1haW5pbmcgKyBiYWxhbmNlc1ttc2cuc2VuZGVyXS5jb250cmlidXRpb247CiAgICAgICAgcmVxdWlyZSh0b3RhbCA+PSBhbW91bnQpOwogICAgICAgIHVpbnQgZGViaXQgPSBtaW4oYmFsYW5jZXNbbXNnLnNlbmRlcl0ucmVtYWluaW5nLCBhbW91bnQpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLnJlbWFpbmluZyAtPSBkZWJpdDsKICAgICAgICBkZWJpdCA9IGFtb3VudCAtIGRlYml0OwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmNvbnRyaWJ1dGlvbiAtPSBkZWJpdDsKICAgICAgICBwb29sVG90YWwgLT0gZGViaXQ7CgogICAgICAgIChiYWxhbmNlc1ttc2cuc2VuZGVyXS5jb250cmlidXRpb24sIGJhbGFuY2VzW21zZy5zZW5kZXJdLnJlbWFpbmluZykgPSBnZXRDb250cmlidXRpb24obXNnLnNlbmRlciwgMCk7CiAgICAgICAgLy8gbXVzdCByZXNwZWN0IHRoZSBtaW5Db250cmlidXRpb24gbGltaXQKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdLnJlbWFpbmluZyA9PSAwIHx8IGJhbGFuY2VzW21zZy5zZW5kZXJdLmNvbnRyaWJ1dGlvbiA+IDApOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoYW1vdW50KTsKICAgICAgICBXaXRoZHJhd2wobXNnLnNlbmRlciwgYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck15VG9rZW5zKCkgcHVibGljIG9uU3RhdGUoU3RhdGUuUGFpZCkgbm9SZWVudHJhbmN5IHsKICAgICAgICB1aW50IHRva2VuQmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKICAgICAgICByZXF1aXJlKHRva2VuQmFsYW5jZSA+IDApOwoKICAgICAgICB1aW50IHBhcnRpY2lwYW50Q29udHJpYnV0aW9uID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uY29udHJpYnV0aW9uOwogICAgICAgIHVpbnQgcGFydGljaXBhbnRTaGFyZSA9IHBhcnRpY2lwYW50Q29udHJpYnV0aW9uICogdG9rZW5CYWxhbmNlIC8gcG9vbFRvdGFsOwoKICAgICAgICBwb29sVG90YWwgLT0gcGFydGljaXBhbnRDb250cmlidXRpb247CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0uY29udHJpYnV0aW9uID0gMDsKICAgICAgICByZWZ1bmRhYmxlID0gZmFsc2U7CiAgICAgICAgcmVxdWlyZSh0b2tlbi50cmFuc2Zlcihtc2cuc2VuZGVyLCBwYXJ0aWNpcGFudFNoYXJlKSk7CgogICAgICAgIFBheW91dChtc2cuc2VuZGVyLCBwYXJ0aWNpcGFudFNoYXJlKTsKICAgIH0KCiAgICBhZGRyZXNzW10gcHVibGljIGZhaWx1cmVzOwogICAgZnVuY3Rpb24gdHJhbnNmZXJBbGxUb2tlbnMoKSBwdWJsaWMgb25seUFkbWlucyBvblN0YXRlKFN0YXRlLlBhaWQpIG5vUmVlbnRyYW5jeSByZXR1cm5zIChhZGRyZXNzW10pIHsKICAgICAgICB1aW50IHRva2VuQmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKICAgICAgICByZXF1aXJlKHRva2VuQmFsYW5jZSA+IDApOwogICAgICAgIGRlbGV0ZSBmYWlsdXJlczsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgcGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGFkZHJlc3MgcGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHNbaV07CiAgICAgICAgICAgIHVpbnQgcGFydGljaXBhbnRDb250cmlidXRpb24gPSBiYWxhbmNlc1twYXJ0aWNpcGFudF0uY29udHJpYnV0aW9uOwoKICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50Q29udHJpYnV0aW9uID4gMCkgewogICAgICAgICAgICAgICAgdWludCBwYXJ0aWNpcGFudFNoYXJlID0gcGFydGljaXBhbnRDb250cmlidXRpb24gKiB0b2tlbkJhbGFuY2UgLyBwb29sVG90YWw7CgogICAgICAgICAgICAgICAgcG9vbFRvdGFsIC09IHBhcnRpY2lwYW50Q29udHJpYnV0aW9uOwogICAgICAgICAgICAgICAgYmFsYW5jZXNbcGFydGljaXBhbnRdLmNvbnRyaWJ1dGlvbiA9IDA7CgogICAgICAgICAgICAgICAgaWYgKHRva2VuLnRyYW5zZmVyKHBhcnRpY2lwYW50LCBwYXJ0aWNpcGFudFNoYXJlKSkgewogICAgICAgICAgICAgICAgICAgIHJlZnVuZGFibGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBQYXlvdXQocGFydGljaXBhbnQsIHBhcnRpY2lwYW50U2hhcmUpOwogICAgICAgICAgICAgICAgICAgIHRva2VuQmFsYW5jZSAtPSBwYXJ0aWNpcGFudFNoYXJlOwogICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbkJhbGFuY2UgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzW3BhcnRpY2lwYW50XS5jb250cmlidXRpb24gPSBwYXJ0aWNpcGFudENvbnRyaWJ1dGlvbjsKICAgICAgICAgICAgICAgICAgICBwb29sVG90YWwgKz0gcGFydGljaXBhbnRDb250cmlidXRpb247CiAgICAgICAgICAgICAgICAgICAgZmFpbHVyZXMucHVzaChwYXJ0aWNpcGFudCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWlsdXJlczsKICAgIH0KCiAgICBmdW5jdGlvbiBtb2RpZnlXaGl0ZWxpc3QoYWRkcmVzc1tdIHRvSW5jbHVkZSwgYWRkcmVzc1tdIHRvRXhjbHVkZSkgcHVibGljIG9ubHlBZG1pbnMgc3RhdGVBbGxvd3NDb25maWd1cmF0aW9uIHsKICAgICAgICBib29sIHByZXZpb3VzID0gd2hpdGVsaXN0QWxsOwogICAgICAgIHVpbnQgaTsKICAgICAgICBpZiAocHJldmlvdXMpIHsKICAgICAgICAgICAgcmVxdWlyZSh0b0V4Y2x1ZGUubGVuZ3RoID09IDApOwogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBiYWxhbmNlc1twYXJ0aWNpcGFudHNbaV1dLndoaXRlbGlzdGVkID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2hpdGVsaXN0QWxsID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdG9JbmNsdWRlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW3RvSW5jbHVkZVtpXV0ud2hpdGVsaXN0ZWQgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgYWRkcmVzcyBleGNsdWRlZFBhcnRpY2lwYW50OwogICAgICAgIHVpbnQgY29udHJpYnV0aW9uOwogICAgICAgIGlmIChwcmV2aW91cykgewogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBleGNsdWRlZFBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzW2ldOwogICAgICAgICAgICAgICAgaWYgKCFiYWxhbmNlc1tleGNsdWRlZFBhcnRpY2lwYW50XS53aGl0ZWxpc3RlZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnRyaWJ1dGlvbiA9IGJhbGFuY2VzW2V4Y2x1ZGVkUGFydGljaXBhbnRdLmNvbnRyaWJ1dGlvbjsKICAgICAgICAgICAgICAgICAgICBiYWxhbmNlc1tleGNsdWRlZFBhcnRpY2lwYW50XS5jb250cmlidXRpb24gPSAwOwogICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzW2V4Y2x1ZGVkUGFydGljaXBhbnRdLnJlbWFpbmluZyArPSBjb250cmlidXRpb247CiAgICAgICAgICAgICAgICAgICAgcG9vbFRvdGFsIC09IGNvbnRyaWJ1dGlvbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0b0V4Y2x1ZGUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGV4Y2x1ZGVkUGFydGljaXBhbnQgPSB0b0V4Y2x1ZGVbaV07CiAgICAgICAgICAgICAgICBiYWxhbmNlc1tleGNsdWRlZFBhcnRpY2lwYW50XS53aGl0ZWxpc3RlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgY29udHJpYnV0aW9uID0gYmFsYW5jZXNbZXhjbHVkZWRQYXJ0aWNpcGFudF0uY29udHJpYnV0aW9uOwogICAgICAgICAgICAgICAgYmFsYW5jZXNbZXhjbHVkZWRQYXJ0aWNpcGFudF0uY29udHJpYnV0aW9uID0gMDsKICAgICAgICAgICAgICAgIGJhbGFuY2VzW2V4Y2x1ZGVkUGFydGljaXBhbnRdLnJlbWFpbmluZyArPSBjb250cmlidXRpb247CiAgICAgICAgICAgICAgICBwb29sVG90YWwgLT0gY29udHJpYnV0aW9uOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZVdoaXRlbGlzdCgpIHB1YmxpYyBvbmx5QWRtaW5zIHN0YXRlQWxsb3dzQ29uZmlndXJhdGlvbiB7CiAgICAgICAgaWYgKCF3aGl0ZWxpc3RBbGwpIHsKICAgICAgICAgICAgd2hpdGVsaXN0QWxsID0gdHJ1ZTsKICAgICAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgcGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBiYWxhbmNlc1twYXJ0aWNpcGFudHNbaV1dLndoaXRlbGlzdGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDb250cmlidXRpb25TZXR0aW5ncyh1aW50IF9taW5Db250cmlidXRpb24sIHVpbnQgX21heENvbnRyaWJ1dGlvbiwgdWludCBfbWF4UG9vbFRvdGFsKSBwdWJsaWMgb25seUFkbWlucyBzdGF0ZUFsbG93c0NvbmZpZ3VyYXRpb24gewogICAgICAgIC8vIHdlIHJhaXNlZCB0aGUgbWluQ29udHJpYnV0aW9uIHRocmVzaG9sZAogICAgICAgIGJvb2wgcmVjb21wdXRlID0gKG1pbkNvbnRyaWJ1dGlvbiA8IF9taW5Db250cmlidXRpb24pOwogICAgICAgIC8vIHdlIGxvd2VyZWQgdGhlIG1heENvbnRyaWJ1dGlvbiB0aHJlc2hvbGQKICAgICAgICByZWNvbXB1dGUgPSByZWNvbXB1dGUgfHwgKG1heENvbnRyaWJ1dGlvbiA+IF9tYXhDb250cmlidXRpb24pOwogICAgICAgIC8vIHdlIGRpZCBub3QgaGF2ZSBhIG1heENvbnRyaWJ1dGlvbiB0aHJlc2hvbGQgYW5kIG5vdyB3ZSBkbwogICAgICAgIHJlY29tcHV0ZSA9IHJlY29tcHV0ZSB8fCAobWF4Q29udHJpYnV0aW9uID09IDAgJiYgX21heENvbnRyaWJ1dGlvbiA+IDApOwogICAgICAgIC8vIHdlIHdhbnQgdG8gbWFrZSBtYXhQb29sVG90YWwgbG93ZXIgdGhhbiB0aGUgY3VycmVudCBwb29sIHRvdGFsCiAgICAgICAgcmVjb21wdXRlID0gcmVjb21wdXRlIHx8IChwb29sVG90YWwgPiBfbWF4UG9vbFRvdGFsKTsKCiAgICAgICAgbWluQ29udHJpYnV0aW9uID0gX21pbkNvbnRyaWJ1dGlvbjsKICAgICAgICBtYXhDb250cmlidXRpb24gPSBfbWF4Q29udHJpYnV0aW9uOwogICAgICAgIG1heFBvb2xUb3RhbCA9IF9tYXhQb29sVG90YWw7CgogICAgICAgIGlmIChtYXhDb250cmlidXRpb24gPiAwKSB7CiAgICAgICAgICAgIHJlcXVpcmUobWF4Q29udHJpYnV0aW9uID49IG1pbkNvbnRyaWJ1dGlvbik7CiAgICAgICAgfQogICAgICAgIGlmIChtYXhQb29sVG90YWwgPiAwKSB7CiAgICAgICAgICAgIHJlcXVpcmUobWF4UG9vbFRvdGFsID49IG1pbkNvbnRyaWJ1dGlvbik7CiAgICAgICAgICAgIHJlcXVpcmUobWF4UG9vbFRvdGFsID49IG1heENvbnRyaWJ1dGlvbik7CiAgICAgICAgfQoKICAgICAgICBpZiAocmVjb21wdXRlKSB7CiAgICAgICAgICAgIHBvb2xUb3RhbCA9IDA7CiAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IHBhcnRpY2lwYW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgYWRkcmVzcyBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50c1tpXTsKICAgICAgICAgICAgICAgIHZhciBiYWxhbmNlID0gYmFsYW5jZXNbcGFydGljaXBhbnRdOwogICAgICAgICAgICAgICAgKGJhbGFuY2UuY29udHJpYnV0aW9uLCBiYWxhbmNlLnJlbWFpbmluZykgPSBnZXRDb250cmlidXRpb24ocGFydGljaXBhbnQsIDApOwogICAgICAgICAgICAgICAgcG9vbFRvdGFsICs9IGJhbGFuY2UuY29udHJpYnV0aW9uOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldFBhcnRpY2lwYW50QmFsYW5jZXMoKSBwdWJsaWMgcmV0dXJucyhhZGRyZXNzW10sIHVpbnRbXSwgdWludFtdLCBib29sW10sIGJvb2xbXSkgewogICAgICAgIHVpbnRbXSBtZW1vcnkgY29udHJpYnV0aW9uID0gbmV3IHVpbnRbXShwYXJ0aWNpcGFudHMubGVuZ3RoKTsKICAgICAgICB1aW50W10gbWVtb3J5IHJlbWFpbmluZyA9IG5ldyB1aW50W10ocGFydGljaXBhbnRzLmxlbmd0aCk7CiAgICAgICAgYm9vbFtdIG1lbW9yeSB3aGl0ZWxpc3RlZCA9IG5ldyBib29sW10ocGFydGljaXBhbnRzLmxlbmd0aCk7CiAgICAgICAgYm9vbFtdIG1lbW9yeSBleGlzdHMgPSBuZXcgYm9vbFtdKHBhcnRpY2lwYW50cy5sZW5ndGgpOwoKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBwYXJ0aWNpcGFudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGJhbGFuY2UgPSBiYWxhbmNlc1twYXJ0aWNpcGFudHNbaV1dOwogICAgICAgICAgICBjb250cmlidXRpb25baV0gPSBiYWxhbmNlLmNvbnRyaWJ1dGlvbjsKICAgICAgICAgICAgcmVtYWluaW5nW2ldID0gYmFsYW5jZS5yZW1haW5pbmc7CiAgICAgICAgICAgIHdoaXRlbGlzdGVkW2ldID0gYmFsYW5jZS53aGl0ZWxpc3RlZDsKICAgICAgICAgICAgZXhpc3RzW2ldID0gYmFsYW5jZS5leGlzdHM7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gKHBhcnRpY2lwYW50cywgY29udHJpYnV0aW9uLCByZW1haW5pbmcsIHdoaXRlbGlzdGVkLCBleGlzdHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlcG9zaXQoKSBpbnRlcm5hbCBvblN0YXRlKFN0YXRlLk9wZW4pIHsKICAgICAgICBpZiAobXNnLnZhbHVlID4gMCkgewogICAgICAgICAgICByZXF1aXJlKGluY2x1ZGVkKG1zZy5zZW5kZXIpKTsKICAgICAgICAgICAgKGJhbGFuY2VzW21zZy5zZW5kZXJdLmNvbnRyaWJ1dGlvbiwgYmFsYW5jZXNbbXNnLnNlbmRlcl0ucmVtYWluaW5nKSA9IGdldENvbnRyaWJ1dGlvbihtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogICAgICAgICAgICAvLyBtdXN0IHJlc3BlY3QgdGhlIG1heENvbnRyaWJ1dGlvbiBhbmQgbWF4UG9vbFRvdGFsIGxpbWl0cwogICAgICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdLnJlbWFpbmluZyA9PSAwKTsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ud2hpdGVsaXN0ZWQgPSB0cnVlOwogICAgICAgICAgICBwb29sVG90YWwgKz0gbXNnLnZhbHVlOwogICAgICAgICAgICBpZiAoIWJhbGFuY2VzW21zZy5zZW5kZXJdLmV4aXN0cykgewogICAgICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0uZXhpc3RzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50cy5wdXNoKG1zZy5zZW5kZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIERlcG9zaXQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaXNBZG1pbihhZGRyZXNzIGFkZHIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBhZG1pbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGFkbWluc1tpXSA9PSBhZGRyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gaW5jbHVkZWQoYWRkcmVzcyBwYXJ0aWNpcGFudCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB3aGl0ZWxpc3RBbGwgfHwgYmFsYW5jZXNbcGFydGljaXBhbnRdLndoaXRlbGlzdGVkIHx8IGlzQWRtaW4ocGFydGljaXBhbnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldENvbnRyaWJ1dGlvbihhZGRyZXNzIHBhcnRpY2lwYW50LCB1aW50IGFtb3VudCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCwgdWludCkgewogICAgICAgIHZhciBiYWxhbmNlID0gYmFsYW5jZXNbcGFydGljaXBhbnRdOwogICAgICAgIHVpbnQgdG90YWwgPSBiYWxhbmNlLnJlbWFpbmluZyArIGJhbGFuY2UuY29udHJpYnV0aW9uICsgYW1vdW50OwogICAgICAgIHVpbnQgY29udHJpYnV0aW9uID0gdG90YWw7CiAgICAgICAgaWYgKCFpbmNsdWRlZChwYXJ0aWNpcGFudCkpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCB0b3RhbCk7CiAgICAgICAgfQogICAgICAgIGlmIChtYXhDb250cmlidXRpb24gPiAwKSB7CiAgICAgICAgICAgIGNvbnRyaWJ1dGlvbiA9IG1pbihtYXhDb250cmlidXRpb24sIGNvbnRyaWJ1dGlvbik7CiAgICAgICAgfQogICAgICAgIGlmIChtYXhQb29sVG90YWwgPiAwKSB7CiAgICAgICAgICAgIGNvbnRyaWJ1dGlvbiA9IG1pbihtYXhQb29sVG90YWwgLSBwb29sVG90YWwsIGNvbnRyaWJ1dGlvbik7CiAgICAgICAgfQogICAgICAgIGlmIChjb250cmlidXRpb24gPCBtaW5Db250cmlidXRpb24pIHsKICAgICAgICAgICAgcmV0dXJuICgwLCB0b3RhbCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoY29udHJpYnV0aW9uLCB0b3RhbCAtIGNvbnRyaWJ1dGlvbik7CiAgICB9CgogICAgZnVuY3Rpb24gbWluKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgX21pbikgewogICAgICAgIGlmIChhIDwgYikgewogICAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGI7CiAgICB9Cn0='.
	

]
