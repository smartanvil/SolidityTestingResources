Class {
	#name : #SRT26CB3641aaA43911f1D4cB2ce544eb652AAc7c47,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT26CB3641aaA43911f1D4cB2ce544eb652AAc7c47 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7Ci8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYwp7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYwp7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgovLyBDb250cmFjdCBPd25hYmxlIChkZWZpbmVzIGEgY29udHJhY3Qgd2l0aCBhbiBvd25lcikKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KY29udHJhY3QgT3duYWJsZQp7CiAgICAvKioKICAgICogQGRldiBBZGRyZXNzIG9mIHRoZSBjdXJyZW50IG93bmVyCiAgICAqLwogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogICAgLy8gQ29uc3RydWN0b3IuIFNldCB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlciBhY2NvdW50LgogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYwogICAgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvLyBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgbW9kaWZpZXIgb25seU93bmVyKCkKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqIEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQp9Ci8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGgKewogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCgoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLgogKi8KY29udHJhY3QgU2FmZUJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYwp7CiAgICAvLyBVc2Ugc2FmZW1hdGggZm9yIG1hdGggb3BlcmF0aW9ucwogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgLy8gTWFwcyBlYWNoIGFkZHJlc3MgdG8gaXRzIGN1cnJlbnQgYmFsYW5jZQogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAgIC8vIExpc3Qgb2YgYWRtaW5zIHRoYXQgY2FuIHRyYW5zZmVyIHRva2VucyBhbHNvIGR1cmluZyB0aGUgSUNPCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFkbWluOwoKICAgIC8vIExpc3Qgb2YgYWRkcmVzc2VzIHRoYXQgY2FuIHJlY2VpdmUgdG9rZW5zIGFsc28gZHVyaW5nIHRoZSBJQ08KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgcmVjZWl2YWJsZTsKCiAgICAvLyBTcGVjaWZpZXMgd2hldGhlciB0aGUgdG9rZW5zIGFyZSBsb2NrZWQoSUNPIGlzIHJ1bm5pbmcpIC0gVG9rZW5zIGNhbm5vdCBiZSB0cmFuc2ZlcnJlZCBkdXJpbmcgdGhlIElDTwogICAgYm9vbCBwdWJsaWMgbG9ja2VkOwoKCiAgICAvLyBDaGVja3MgdGhlIHNpemUgb2YgdGhlIG1lc3NhZ2UgdG8gYXZvaWQgYXR0YWNrcwogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkKICAgIHsKICAgICAgICBhc3NlcnQobXNnLmRhdGEubGVuZ3RoID49IHNpemUgKyA0KTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKiBUcmFuc2ZlciB0b2tlbnMgdG8gdGhlIHNwZWNpZmllZCBhZGRyZXNzCiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHB1YmxpYyByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoIWxvY2tlZCB8fCBhZG1pblttc2cuc2VuZGVyXSA9PSB0cnVlIHx8IHJlY2VpdmFibGVbX3RvXSA9PSB0cnVlKTsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIC8qKiBHZXQgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSBiYWxhbmNlIG9mLgogICAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICAgKi8KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9Cn0KCgovKiogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTYWZlU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgU2FmZUJhc2ljVG9rZW4KewogICAgLyoqIE1hcCBhZGRyZXNzID0+IChhZGRyZXNzID0+IHZhbHVlKQogICAgKiAgIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl0gcmVwcmVzZW50cyB0aGUgYW1vdW50IG9mIHRva2VucyB0aGUgX3NwZW5kZXIgY2FuIHVzZSBvbiBiZWhhbGYgb2YgdGhlIF9vd25lcgogICAgKi8KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgoKICAgIC8qKiBSZXR1cm4gdGhlIGFsbG93YW5jZSBvZiB0aGUgX3NwZW5kZXIgb24gYmVoYWxmIG9mIHRoZSBfb3duZXIKICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIGJlIGFsbG93ZWQgdG8gc3BlbmQgdGhlIGZ1bmRzLgogICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpCiAgICB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgoKICAgIC8qKiBBbGxvdyB0aGUgX3NwZW5kZXIgdG8gc3BlbmQgX3ZhbHVlIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgICAqIFRvIGF2b2lkIHJhY2UgY29uZGl0aW9uLCB0aGUgY3VycmVudCBhbGxvd2VkIGFtb3VudCBtdXN0IGJlIGZpcnN0IHNldCB0byAwIHRocm91Z2ggYSBkaWZmZXJlbnQgdHJhbnNhY3Rpb24uCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA9PSAwIHx8IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApOwogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvKiogSW5jcmVhc2UgdGhlIGFsbG93YW5jZSBmb3IgX3NwZW5kZXIgYnkgX2FkZGVkVmFsdWUgKHRvIGJlIHVzZSB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID4gMCkKICAgICAqLwogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvKiogRGVjcmVhc2UgdGhlIGFsbG93YW5jZSBmb3IgX3NwZW5kZXIgYnkgX3N1YnRyYWN0ZWRWYWx1ZS4gU2V0IGl0IHRvIDAgaWYgX3N1YnRyYWN0ZWRWYWx1ZSBpcyBsZXNzIHRoZW4gdGhlIGN1cnJlbnQgYWxsb3dhbmNlCiAgICAqLwogICAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwoKICAgICAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKQogICAgICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICAgICAgZWxzZQogICAgICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvKiogVHJhbnNmZXIgdG9rZW5zIG9uIGJlaGFsZiBvZiBfZnJvbSB0byBfdG8gKGlmIGFsbG93ZWQpCiAgICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICB1aW50MjU2IF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCgoKLy8gTWFpbiBjb250cmFjdApjb250cmFjdCBDcnlzdGFsVG9rZW4gaXMgU2FmZVN0YW5kYXJkVG9rZW4sIE93bmFibGUKewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkNyeXN0YWxUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJDWUwiOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IElOSVRJQUxfU1VQUExZID0gMjgwMDAwMDAgKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwoKICAgIC8vIFN0cnVjdCByZXByZXNlbnRpbmcgaW5mb3JtYXRpb24gb2YgYSBzaW5nbGUgcm91bmQKICAgIHN0cnVjdCBSb3VuZAogICAgewogICAgICAgIHVpbnQyNTYgc3RhcnRUaW1lOyAgICAgICAgICAgICAgICAgICAgICAvLyBUaW1lc3RhbXAgb2YgdGhlIHN0YXJ0IG9mIHRoZSByb3VuZAogICAgICAgIHVpbnQyNTYgZW5kVGltZTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaW1lc3RhbXAgb2YgdGhlIGVuZCBvZiB0aGUgcm91bmQKICAgICAgICB1aW50MjU2IGF2YWlsYWJsZVRva2VuczsgICAgICAgICAgICAgICAgLy8gTnVtYmVyIG9mIHRva2VucyBhdmFpbGFibGUgaW4gdGhpcyByb3VuZAogICAgICAgIHVpbnQyNTYgbWF4UGVyVXNlcjsgICAgICAgICAgICAgICAgICAgICAvLyBOdW1iZXIgb2YgbWF4aW11bSB0b2tlbnMgcGVyIHVzZXIKICAgICAgICB1aW50MjU2IHJhdGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTnVtYmVyIG9mIHRva2VuIHBlciB3ZWkgaW4gdGhpcyByb3VuZAogICAgICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsgICAvLyBCYWxhbmNlcyBvZiB0aGUgdXNlcnMgaW4gdGhpcyByb3VuZAogICAgfQoKICAgIC8vIEFycmF5IGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gb2YgYWxsIHRoZSByb3VuZHMKICAgIFJvdW5kWzVdIHJvdW5kczsKCiAgICAvLyBBZGRyZXNzIHdoZXJlIGZ1bmRzIGFyZSBjb2xsZWN0ZWQKICAgIGFkZHJlc3MgcHVibGljIHdhbGxldDsKCiAgICAvLyBBbW91bnQgb2YgY29sbGVjdGVkIG1vbmV5IGluIHdlaQogICAgdWludDI1NiBwdWJsaWMgd2VpUmFpc2VkOwoKICAgIC8vIEN1cnJlbnQgcm91bmQgaW5kZXgKICAgIHVpbnQyNTYgcHVibGljIHJ1bm5pbmdSb3VuZDsKCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gQ3J5c3RhbFRva2VuKGFkZHJlc3MgX3dhbGxldEFkZHJlc3MpIHB1YmxpYwogICAgewogICAgICAgIHdhbGxldCA9IF93YWxsZXRBZGRyZXNzOwogICAgICAgIHRvdGFsU3VwcGx5ID0gSU5JVElBTF9TVVBQTFk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBJTklUSUFMX1NVUFBMWTsKCiAgICAgICAgcm91bmRzWzBdID0gUm91bmQoMTUxOTA1MjQwMCwgMTUxOTEzODgwMCwgIDI1MDAwMCAqICgxMCAqKiAxOCksIDIwMCAqICgxMCAqKiAxOCksIDIwMDApOyAgICAvLyAxOSBGZWIgMjAxOCAtIDE1LjAwIEdNVAogICAgICAgIHJvdW5kc1sxXSA9IFJvdW5kKDE1MTkzOTgwMDAsIDE1MTk0ODQ0MDAsIDEyNTAwMDAgKiAoMTAgKiogMTgpLCA0MDAgKiAoMTAgKiogMTgpLCAxMzMzKTsgICAgLy8gMjMgRmViIDIwMTggLSAxNS4wMCBHTVQKICAgICAgICByb3VuZHNbMl0gPSBSb3VuZCgxNTE5NjU3MjAwLCAxNTE5NzQzNjAwLCAxNTAwMDAwICogKDEwICoqIDE4KSwgMTAwMCAqICgxMCAqKiAxOCksIDEwMDApOyAgIC8vIDI2IEZlYiAyMDE4IC0gMTUuMDAgR01UCiAgICAgICAgcm91bmRzWzNdID0gUm91bmQoMTUxOTgzMDAwMCwgMTUxOTkxNjQwMCwgMjAwMDAwMCAqICgxMCAqKiAxOCksIDEwMDAgKiAoMTAgKiogMTgpLCA4MDApOyAgICAvLyAyOCBGZWIgMjAxOCAtIDE1LjAwIEdNVAogICAgICAgIHJvdW5kc1s0XSA9IFJvdW5kKDE1MjAyNjIwMDAsIDE1MjAzNDg0MDAsIDIwMDAwMDAgKiAoMTAgKiogMTgpLCAyMDAwICogKDEwICoqIDE4KSwgNjY3KTsgICAgLy8gIDUgTWFyIDIwMTggLSAxNS4wMCBHTVQKCiAgICAgICAgLy8gU2V0IHRoZSBvd25lciBhcyBhbiBhZG1pbgogICAgICAgIGFkbWluW21zZy5zZW5kZXJdID0gdHJ1ZTsKCiAgICAgICAgLy8gTG9jayB0aGUgdG9rZW5zIGZvciB0aGUgSUNPCiAgICAgICAgbG9ja2VkID0gdHJ1ZTsKCiAgICAgICAgLy8gU2V0IHRoZSBjdXJyZW50IHJvdW5kIHRvIDEwMCAobm8gcm91bmQpCiAgICAgICAgcnVubmluZ1JvdW5kID0gdWludDI1NigwKTsKICAgIH0KCgogICAgLyoqIEV2ZW50IGZvciB0b2tlbiBwdXJjaGFzZSBsb2dnaW5nCiAgICAgKiBAcGFyYW0gcHVyY2hhc2VyIHdobyBwYWlkIGZvciB0aGUgdG9rZW5zCiAgICAgKiBAcGFyYW0gYmVuZWZpY2lhcnkgd2hvIGdvdCB0aGUgdG9rZW5zCiAgICAgKiBAcGFyYW0gdmFsdWUgd2VpcyBwYWlkIGZvciBwdXJjaGFzZQogICAgICogQHBhcmFtIGFtb3VudCBhbW91bnQgb2YgdG9rZW5zIHB1cmNoYXNlZAogICAgICovCiAgICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBhbW91bnQpOwoKCiAgICAvLyBSYXRlIGNoYW5nZSBldmVudAogICAgZXZlbnQgUmF0ZUNoYW5nZWQoYWRkcmVzcyBpbmRleGVkIG93bmVyLCB1aW50IHJvdW5kLCB1aW50MjU2IG9sZF9yYXRlLCB1aW50MjU2IG5ld19yYXRlKTsKCgogICAgLy8gRmFsbGJhY2sgZnVuY3Rpb24sIHVzZWQgdG8gYnV5IHRva2VuCiAgICAvLyBJZiBFVEggYXJlIHNlbnQgdG8gdGhlIGNvbnRyYWN0IGFkZHJlc3MsIHdpdGhvdXQgYW55IGFkZGl0aW9uYWwgZGF0YSwgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQKICAgIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUKICAgIHsKICAgICAgICAvLyBUYWtlIHRoZSBhZGRyZXNzIG9mIHRoZSBidXllcgogICAgICAgIGFkZHJlc3MgYmVuZWZpY2lhcnkgPSBtc2cuc2VuZGVyOwoKICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSBzZW5kZXIgaXMgbm90IHRoZSAwIGFkZHJlc3MKICAgICAgICByZXF1aXJlKGJlbmVmaWNpYXJ5ICE9IDB4MCk7CgogICAgICAgIC8vIENoZWNrIHRoYXQgc2VudCBFVEggaW4gd2VpIGlzID4gMAogICAgICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwogICAgICAgIHJlcXVpcmUod2VpQW1vdW50ICE9IDApOwoKICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgcm91bmQgKDEwMCBpZiB0aGVyZSBpcyBubyBvcGVuIHJvdW5kKQogICAgICAgIHVpbnQyNTYgcm91bmRJbmRleCA9IHJ1bm5pbmdSb3VuZDsKCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBydW5uaW5nIHJvdW5kCiAgICAgICAgcmVxdWlyZShyb3VuZEluZGV4ICE9IHVpbnQyNTYoMTAwKSk7CgogICAgICAgIC8vIEdldCB0aGUgaW5mb3JtYXRpb24gb2YgdGhlIGN1cnJlbnQgcm91bmQKICAgICAgICBSb3VuZCBzdG9yYWdlIHJvdW5kID0gcm91bmRzW3JvdW5kSW5kZXhdOwoKICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIHRva2VuIGFtb3VudCB0byBzZWxsLiBFeGNlZWRpbmcgYW1vdW50IHdpbGwgbm90IGdlbmVyYXRlIHRva2VucwogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gd2VpQW1vdW50Lm11bChyb3VuZC5yYXRlKTsKICAgICAgICB1aW50MjU2IG1heFBlclVzZXIgPSByb3VuZC5tYXhQZXJVc2VyOwogICAgICAgIHVpbnQyNTYgcmVtYWluaW5nID0gbWF4UGVyVXNlciAtIHJvdW5kLmJhbGFuY2VzW2JlbmVmaWNpYXJ5XTsKICAgICAgICBpZihyZW1haW5pbmcgPCB0b2tlbnMpCiAgICAgICAgICAgIHRva2VucyA9IHJlbWFpbmluZzsKCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRva2VucyBjYW4gYmUgc29sZAogICAgICAgIHJlcXVpcmUoYXJlVG9rZW5zQnV5YWJsZShyb3VuZEluZGV4LCB0b2tlbnMpKTsKCiAgICAgICAgLy8gUmVkdWNlIHRoZSBudW1iZXIgb2YgYXZhaWxhYmxlIHRva2VucyBpbiB0aGUgcm91bmQgKGZhaWxzIGlmIHRoZXJlIGFyZSBubyBtb3JlIGF2YWlsYWJsZSB0b2tlbnMpCiAgICAgICAgcm91bmQuYXZhaWxhYmxlVG9rZW5zID0gcm91bmQuYXZhaWxhYmxlVG9rZW5zLnN1Yih0b2tlbnMpOwoKICAgICAgICAvLyBBZGQgdGhlIG51bWJlciBvZiB0b2tlbnMgdG8gdGhlIGN1cnJlbnQgdXNlcidzIGJhbGFuY2Ugb2YgdGhpcyByb3VuZAogICAgICAgIHJvdW5kLmJhbGFuY2VzW21zZy5zZW5kZXJdID0gcm91bmQuYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKHRva2Vucyk7CgogICAgICAgIC8vIFRyYW5zZmVyIHRoZSBhbW91bnQgb2YgdG9rZW4gdG8gdGhlIGJ1eWVyCiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLnN1Yih0b2tlbnMpOwogICAgICAgIGJhbGFuY2VzW2JlbmVmaWNpYXJ5XSA9IGJhbGFuY2VzW2JlbmVmaWNpYXJ5XS5hZGQodG9rZW5zKTsKICAgICAgICBUcmFuc2Zlcihvd25lciwgYmVuZWZpY2lhcnksIHRva2Vucyk7CgogICAgICAgIC8vIFJhaXNlIHRoZSBldmVudCBvZiB0b2tlbiBwdXJjaGFzZQogICAgICAgIFRva2VuUHVyY2hhc2UoYmVuZWZpY2lhcnksIGJlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRva2Vucyk7CgogICAgICAgIC8vIFVwZGF0ZSB0aGUgbnVtYmVyIG9mIGNvbGxlY3RlZCBtb25leQogICAgICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKCiAgICAgICAgLy8gVHJhbnNmZXIgZnVuZHMgdG8gdGhlIHdhbGxldAogICAgICAgIHdhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfQoKCiAgICAvKiogQ2hlY2sgaWYgdGhlcmUgaXMgYW4gb3BlbiByb3VuZCBhbmQgaWYgdGhlcmUgYXJlIGVub3VnaCB0b2tlbnMgYXZhaWxhYmxlIGZvciBjdXJyZW50IHBoYXNlIGFuZCBmb3IgdGhlIHNlbmRlcgogICAgKiBAcGFyYW0gX3JvdW5kSW5kZXggaW5kZXggb2YgdGhlIGN1cnJlbnQgcm91bmQKICAgICogQHBhcmFtIF90b2tlbnMgbnVtYmVyIG9mIHJlcXVlc3RlZCB0b2tlbnMKICAgICovCiAgICBmdW5jdGlvbiBhcmVUb2tlbnNCdXlhYmxlKHVpbnQgX3JvdW5kSW5kZXgsIHVpbnQyNTYgX3Rva2VucykgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICB1aW50MjU2IGN1cnJlbnRfdGltZSA9IGJsb2NrLnRpbWVzdGFtcDsKICAgICAgICBSb3VuZCBzdG9yYWdlIHJvdW5kID0gcm91bmRzW19yb3VuZEluZGV4XTsKCiAgICAgICAgcmV0dXJuICgKICAgICAgICBfdG9rZW5zID4gMCAmJiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSB1c2VyIGNhbiBzdGlsbCBidXkgdG9rZW5zCiAgICAgICAgcm91bmQuYXZhaWxhYmxlVG9rZW5zID49IF90b2tlbnMgJiYgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGVyZSBhcmUgc3RpbGwgYXZhaWxhYmxlIHRva2VucwogICAgICAgIGN1cnJlbnRfdGltZSA+PSByb3VuZC5zdGFydFRpbWUgJiYgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIGN1cnJlbnQgdGltZXN0YW1wIGlzIGFmdGVyIHRoZSBzdGFydCBvZiB0aGUgcm91bmQKICAgICAgICBjdXJyZW50X3RpbWUgPD0gcm91bmQuZW5kVGltZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSBjdXJyZW50IHRpbWVzdGFtcCBpcyBiZWZvcmUgdGhlIGVuZCBvZiB0aGUgcm91bmQKICAgICAgICApOwogICAgfQoKCgogICAgLy8gUmV0dXJuIHRoZSBjdXJyZW50IG51bWJlciBvZiB1bnNvbGQgdG9rZW5zCiAgICBmdW5jdGlvbiB0b2tlbkJhbGFuY2UoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICByZXR1cm4gYmFsYW5jZU9mKG93bmVyKTsKICAgIH0KCgogICAgZXZlbnQgQnVybihhZGRyZXNzIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CgoKICAgIC8qKiBCdXJucyBhIHNwZWNpZmljIGFtb3VudCBvZiB0b2tlbnMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgYnVybmVkLgogICAgICovCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgb25seU93bmVyCiAgICB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgICAgIGFkZHJlc3MgYnVybmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tidXJuZXJdID0gYmFsYW5jZXNbYnVybmVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIEJ1cm4oYnVybmVyLCBfdmFsdWUpOwogICAgfQoKCgogICAgLyoqIE1pbnQgYSBzcGVjaWZpYyBhbW91bnQgb2YgdG9rZW5zLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSBtaW50ZWQuCiAgICovCiAgICBmdW5jdGlvbiBtaW50KHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgb25seU93bmVyCiAgICB7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZChfdmFsdWUpOwogICAgfQoKCgogICAgLy8gRnVuY3Rpb25zIHRvIHNldCB0aGUgZmVhdHVyZXMgb2YgZWFjaCByb3VuZCAob25seSBmb3IgdGhlIG93bmVyKSBhbmQgb2YgdGhlIHdob2xlIElDTwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gc2V0VG9rZW5zTG9ja2VkKGJvb2wgX3ZhbHVlKSBvbmx5T3duZXIgcHVibGljCiAgICB7CiAgICAgICAgbG9ja2VkID0gX3ZhbHVlOwogICAgfQoKICAgIC8qKiBTZXQgdGhlIGN1cnJlbnQgcm91bmQgaW5kZXgKICAgICogQHBhcmFtIF9yb3VuZEluZGV4IHRoZSBuZXcgcm91bmQgaW5kZXggdG8gc2V0CiAgICAqLwogICAgZnVuY3Rpb24gc2V0Um91bmQodWludDI1NiBfcm91bmRJbmRleCkgcHVibGljIG9ubHlPd25lcgogICAgewogICAgICAgIHJ1bm5pbmdSb3VuZCA9IF9yb3VuZEluZGV4OwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEFkbWluKGFkZHJlc3MgX2FkZHIsIGJvb2wgX3ZhbHVlKSBvbmx5T3duZXIgcHVibGljCiAgICB7CiAgICAgICAgYWRtaW5bX2FkZHJdID0gX3ZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFJlY2VpdmFibGUoYWRkcmVzcyBfYWRkciwgYm9vbCBfdmFsdWUpIG9ubHlPd25lciBwdWJsaWMKICAgIHsKICAgICAgICByZWNlaXZhYmxlW19hZGRyXSA9IF92YWx1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRSb3VuZFN0YXJ0KHVpbnQgX3JvdW5kLCB1aW50MjU2IF92YWx1ZSkgb25seU93bmVyIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUoX3JvdW5kID49IDAgJiYgX3JvdW5kIDwgcm91bmRzLmxlbmd0aCk7CiAgICAgICAgcm91bmRzW19yb3VuZF0uc3RhcnRUaW1lID0gX3ZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFJvdW5kRW5kKHVpbnQgX3JvdW5kLCB1aW50MjU2IF92YWx1ZSkgb25seU93bmVyIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUoX3JvdW5kID49IDAgJiYgX3JvdW5kIDwgcm91bmRzLmxlbmd0aCk7CiAgICAgICAgcm91bmRzW19yb3VuZF0uZW5kVGltZSA9IF92YWx1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRSb3VuZEF2YWlsYWJsZVRva2VuKHVpbnQgX3JvdW5kLCB1aW50MjU2IF92YWx1ZSkgb25seU93bmVyIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUoX3JvdW5kID49IDAgJiYgX3JvdW5kIDwgcm91bmRzLmxlbmd0aCk7CiAgICAgICAgcm91bmRzW19yb3VuZF0uYXZhaWxhYmxlVG9rZW5zID0gX3ZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFJvdW5kTWF4UGVyVXNlcih1aW50IF9yb3VuZCwgdWludDI1NiBfdmFsdWUpIG9ubHlPd25lciBwdWJsaWMKICAgIHsKICAgICAgICByZXF1aXJlKF9yb3VuZCA+PSAwICYmIF9yb3VuZCA8IHJvdW5kcy5sZW5ndGgpOwogICAgICAgIHJvdW5kc1tfcm91bmRdLm1heFBlclVzZXIgPSBfdmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Um91bmRSYXRlKHVpbnQgX3JvdW5kLCB1aW50MjU2IF9yb3VuZF91c2RfY2VudHMsIHVpbnQyNTYgX2V0aHZhbHVlX3VzZCkgb25seU93bmVyIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUoX3JvdW5kID49IDAgJiYgX3JvdW5kIDwgcm91bmRzLmxlbmd0aCk7CiAgICAgICAgdWludDI1NiByYXRlID0gX2V0aHZhbHVlX3VzZCAqIDEwMCAvIF9yb3VuZF91c2RfY2VudHM7CiAgICAgICAgdWludDI1NiBvbGRSYXRlID0gcm91bmRzW19yb3VuZF0ucmF0ZTsKICAgICAgICByb3VuZHNbX3JvdW5kXS5yYXRlID0gcmF0ZTsKICAgICAgICBSYXRlQ2hhbmdlZChtc2cuc2VuZGVyLCBfcm91bmQsIG9sZFJhdGUsIHJvdW5kc1tfcm91bmRdLnJhdGUpOwogICAgfQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCiAgICAvLyBGdW5jdGlvbnMgdG8gZ2V0IHRoZSBmZWF0dXJlcyBvZiBlYWNoIHJvdW5kCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBnZXRSb3VuZFVzZXJCYWxhbmNlKHVpbnQgX3JvdW5kLCBhZGRyZXNzIF91c2VyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICByZXF1aXJlKF9yb3VuZCA+PSAwICYmIF9yb3VuZCA8IHJvdW5kcy5sZW5ndGgpOwogICAgICAgIHJldHVybiByb3VuZHNbX3JvdW5kXS5iYWxhbmNlc1tfdXNlcl07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Um91bmRTdGFydCh1aW50IF9yb3VuZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcmVxdWlyZShfcm91bmQgPj0gMCAmJiBfcm91bmQgPCByb3VuZHMubGVuZ3RoKTsKICAgICAgICByZXR1cm4gcm91bmRzW19yb3VuZF0uc3RhcnRUaW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFJvdW5kRW5kKHVpbnQgX3JvdW5kKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICByZXF1aXJlKF9yb3VuZCA+PSAwICYmIF9yb3VuZCA8IHJvdW5kcy5sZW5ndGgpOwogICAgICAgIHJldHVybiByb3VuZHNbX3JvdW5kXS5lbmRUaW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFJvdW5kQXZhaWxhYmxlVG9rZW4odWludCBfcm91bmQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KQogICAgewogICAgICAgIHJlcXVpcmUoX3JvdW5kID49IDAgJiYgX3JvdW5kIDwgcm91bmRzLmxlbmd0aCk7CiAgICAgICAgcmV0dXJuIHJvdW5kc1tfcm91bmRdLmF2YWlsYWJsZVRva2VuczsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRSb3VuZE1heFBlclVzZXIodWludCBfcm91bmQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KQogICAgewogICAgICAgIHJlcXVpcmUoX3JvdW5kID49IDAgJiYgX3JvdW5kIDwgcm91bmRzLmxlbmd0aCk7CiAgICAgICAgcmV0dXJuIHJvdW5kc1tfcm91bmRdLm1heFBlclVzZXI7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Um91bmRSYXRlKHVpbnQgX3JvdW5kKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICByZXF1aXJlKF9yb3VuZCA+PSAwICYmIF9yb3VuZCA8IHJvdW5kcy5sZW5ndGgpOwogICAgICAgIHJldHVybiByb3VuZHNbX3JvdW5kXS5yYXRlOwogICAgfQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQp9'.
	

]
