Class {
	#name : #SRTb022566fc79552898c4b703cc32d4547b5590633,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb022566fc79552898c4b703cc32d4547b5590633 >> base64 [
	^ 'LyogQ29weXJpZ2h0IChDKSBFdGhlcnBsYXkgPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSIxMjcxN2Q3YzY2NzM3MTY2NTI3NzY2N2E3NzYwNjI3ZTczNmIzYzdiN2QiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PiAtIEFsbCBSaWdodHMgUmVzZXJ2ZWQgKi8KcHJhZ21hIHNvbGlkaXR5IF4wLjQuNDsKCmNvbnRyYWN0IENvbXBldGl0aW9uU3RvcmUgewoJCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gREFUQSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgkKCS8vcGxheWVyJ3Mgc3VibWlzc2lvbiBzdG9yZSB0aGUgaW5mbyByZXF1aXJlZCB0byB2ZXJpZnkgaXRzIGFjY3VyYWN5CglzdHJ1Y3QgU3VibWlzc2lvbnsKCQl1aW50MzIgc2NvcmU7IAoJCXVpbnQzMiBkdXJhdGlvblJvdW5kZWREb3duOyAvLyBkdXJhdGlvbiBpbiBzZWNvbmQgb2YgdGhlIGdhbWUgc2Vzc2lvbgoJCXVpbnQzMiB2ZXJzaW9uOyAvLyB2ZXJzaW9uIG9mIHRoZSBnYW1lIHVzZWQKCQl1aW50NjQgc2VlZDsgLy9zZWVkIHVzZWQKCQl1aW50NjQgc3VibWl0QmxvY2tOdW1iZXI7IC8vIGJsb2NrTnVtYmVyIGF0IHdoaWNoIHRoZSBzdWJtaXNzaW9uIGlzIHByb2Nlc3NlZAoJCWJ5dGVzMzIgcHJvb2ZIYXNoOy8vc2hhMjU2IG9mIHByb29mIDogdG8gc2F2ZSBnYXMsIHRoZSBwcm9vZiBpcyBub3Qgc2F2ZWQgZGlyZWN0bHkgaW4gdGhlIGNvbnRyYWN0LiBJbnN0ZWFkIGl0cyBoYXNoIGlzIHNhdmVkLiBUaGUgYWN0dWFsIHByb29mIHdpbGwgYmUgc2F2ZWQgb24gYSBzZXJ2ZXIuIFRoZSBwbGF5ZXIgY291bGQgcG90ZW50aWFsbHkgc2F2ZSBpdCB0b28uIAoJfQoJCgkvL3BsYXllciBzdGFydCBnYW1lIHBhcmFtZXRlcgoJc3RydWN0IFN0YXJ0ewoJCXVpbnQ4IGNvbXBldGl0aW9uSW5kZXg7IC8vY29tcGV0aXRpb24gaW5kZXggKDAgb3IgMSkgdGhlcmUgaXMgb25seSAyIGN1cnJlbnQgY29tcGV0aXRpb24gcGVyIGdhbWUsIG9uZSBpcyBhY3RpdmUsIHRoZSBvdGhlciBvbmUgYmVpbmcgdGhlIG9sZGVyIG9uZSB3aGljaCBtaWdodCBoYXZlIHBlbmRpbmcgdmVyaWZpY2F0aW9uCgkJdWludDMyIHZlcnNpb247ICAvL3ZlcnNpb24gb2YgdGhlIGdhbWUgdGhhdCB0aGUgcGxheWVyIHNjb3JlIGlzIGJhc2VkIG9uCgkJdWludDY0IHNlZWQ7IC8vIHRoZSBzZWVkIHVzZWQgZm9yIHRoZSBnYW1lIHNlc3Npb24KCQl1aW50NjQgdGltZTsgLy8gc3RhcnQgdGltZSAsIHVzZWQgdG8gY2hlY2sgaWYgdGhlIHBsYXllciBpcyBub3QgdGFraW5nIHRvbyBsb25nIHRvIHN1Ym1pdCBpdHMgc2NvcmUKCX0KCQoJLy8gdGhlIHZhbHVlcyByZXByZXNlbnRpbmcgZWFjaCBjb21wZXRpdGlvbgoJc3RydWN0IENvbXBldGl0aW9uewoJCXVpbnQ4IG51bVBhc3RCbG9ja3M7Ly8gbnVtYmVyIG9mIHBhc3QgYmxvY2sgYWxsb3dlZCwgMSBpcyB0aGUgbWluaW11bSBzaW5jZSB5b3UgY2FuIG9ubHkgZ2V0IHRoZSBoYXNoIG9mIGEgcGFzdCBibG9jay4gQWxsb3cgcGxheWVyIHRvIHN0YXJ0IHBsYXkgaW5zdGFudHVub3VzbHkKCQl1aW50OCBob3VzZURpdmlkZXI7IC8vIGhvdyBtdWNoIHRoZSBob3VzZSB0YWtlcyA6IDQgbWVhbnMgaG91c2UgdGFrZSAxLzQgKDI1JSkKCQl1aW50MTYgbGFnOyAvLyBkZWZpbmUgaG93IG11Y2ggZXh0cmEgdGltZSBpcyBhbGxvd2VkIHRvIHN1Ym1pdCBhIHNjb3JlICh0byBhY2NvbW9kYXRlIGJsb2NrIHRpbWUgYW5kIGRlbGF5cykKCQl1aW50MzIgdmVyaWZpY2F0aW9uV2FpdFRpbWU7Ly8gd2FpdCB0aW1lIGFsbG93ZWQgZm9yIHN1Ym1pc3Npb24gcGFzdCBjb21wZXRpdGlvbidzIGVuZCB0aW1lIAoJCXVpbnQzMiBudW1QbGF5ZXJzOy8vY3VycmVudCBudW1iZXIgb2YgcGxheWVyIHRoYXQgc3VibWl0ZWQgYSBzY29yZQoJCXVpbnQzMiB2ZXJzaW9uOyAvL3RoZSB2ZXJzaW9uIG9mIHRoZSBnYW1lIHVzZWQgZm9yIHRoYXQgY29tcGV0aXRpb24sIGEgaGFzaCBvZiB0aGUgY29kZSBpcyBwdWJsaXNoZWQgaW4gdGhlIGxvZyB1cG9uIGNoYW5naW5nCgkJdWludDMyIHByZXZpb3VzVmVyc2lvbjsgLy8gcHJldmlvdXNWZXJzaW9uIHRvIGFsbG93IHNtb290aCB1cGRhdGUgdXBvbiB2ZXJzaW9uIGNoYW5nZQoJCXVpbnQ2NCB2ZXJzaW9uQ2hhbmdlQmxvY2tOdW1iZXI7IAoJCXVpbnQ2NCBzd2l0Y2hCbG9ja051bWJlcjsgLy8gdGhlIGJsb2NrTnVtYmVyIGF0IHdoaWNoIHRoZSBjb21wZXRpdGlvbiBzdGFydGVkCgkJdWludDY0IGVuZFRpbWU7Ly9UaGUgdGltZSBhdCB3aGljaCB0aGUgY29tcGV0aXRpb24gaXMgc2V0IHRvIGZpbmlzaC4gTm8gc3RhcnQgY2FuIGhhcHBlbiBhZnRlciB0aGF0IGFuZCB0aGUgY29tcGV0aXRpb24gY2Fubm90IGJlIGFib3J0ZWQgYmVmb3JlIHRoYXQKCQl1aW50ODggcHJpY2U7ICAvLyB0aGUgcHJpY2UgZm9yIHRoYXQgY29tcGV0aXRpb24sIGRvIG5vdCBjaGFuZ2UgCgkJdWludDEyOCBqYWNrcG90OyAvLyB0aGUgY3VycmVudCBqYWNrcG90IGZvciB0aGF0IGNvbXBldGl0aW9uLCB0aGlzIGphY2twb3QgaXMgdGhlbiBzaGFyZWQgYW1vbmcgdGhlIGRldmVsb3BlciAoaW4gdGhlIGRlcG9zaXQgYWNjb3VudCBmb3IgIGZ1bmRpbmcgZGV2ZWxvcG1lbnQpIGFuZCB0aGUgd2lubmVycyAoc2VlIGhvdXNlRGl2aWRlcikpCgkJdWludDMyW10gcmV3YXJkc0Rpc3RyaWJ1dGlvbjsgLy8gdGhlIGxlbmd0aCBvZiBpdCBkZWZpbmUgaG93IG1hbnkgd2lubmVycyB0aGVyZSBpcyBhbmQgdGhlIGRpc3RyaWJ1dGlvbiBvZiB0aGUgcmV3YXJkIGlzIHRoZSB2YWx1ZSBmb3IgZWFjaCBpbmRleCBkaXZpZGVkIGJ5IHRoZSB0b3RhbAoJCW1hcHBpbmcgKGFkZHJlc3MgPT4gU3VibWlzc2lvbikgc3VibWlzc2lvbnM7ICAvL29ubHkgb25lIHN1Ym1pc3Npb24gcGVyIHBsYXllciBwZXIgY29tcGV0aXRpb24KCQlhZGRyZXNzW10gcGxheWVyczsgLy8gY29udGFpbiB0aGUgbGlzdCBvZiBwbGF5ZXJzIHRoYXQgc3VibWl0ZWQgYSBzY29yZSBmb3IgdGhhdCBjb21wZXRpdGlvbgoJfQoJCQoJc3RydWN0IEdhbWV7CgkJbWFwcGluZyAoYWRkcmVzcyA9PiBTdGFydCkgc3RhcnRzOyAvLyBvbmx5IDEgc3RhcnQgcGVyIHBsYXllciwgZnVydGhlciBvdmVycmlkZSB0aGUgY3VycmVudAoJCUNvbXBldGl0aW9uWzJdIGNvbXBldGl0aW9uczsgLy8gMiBjb21wZXRpdGlvbnMgb25seSB0byBzYXZlIGdhcywgb3ZlcnJpdGUgZWFjaCBvdGhlciB1cG9uIGdvaW5nIHRvIG5leHQgY29tcGV0aXRpb24KCQl1aW50OCBjdXJyZW50Q29tcGV0aXRpb25JbmRleDsgLy9jYW4gb25seSBiZSAxIG9yIDAgKHN3aXRjaCBvcGVyYXRpb24gOiAxIC0gY3VycmVudENvbXBldGl0aW9uSW5kZXgpCgl9CgoJbWFwcGluZyAoc3RyaW5nID0+IEdhbWUpIGdhbWVzOwoJCglhZGRyZXNzIG9yZ2FuaXNlcjsgLy8gYWRtaW4gaGF2aW5nIGNvbnRyb2wgb2YgdGhlIHJld2FyZCAKCWFkZHJlc3MgZGVwb3NpdEFjY291bnQ7CSAvLyBpcyB0aGUgcmVjZWl2ZXIgb2YgdGhlIGhvdXNlIHBhcnQgb2YgdGhlIGphY2twb3QgKHNlZSBob3VzZURpdmlkZXIpIENhbiBvbmx5IGJlIGNoYW5nZWQgYnkgdGhlIGRlcG9zaXRBY2NvdW50LgoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoKCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFVkVOVFMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCS8vZXZlbnQgbG9nZ2luZyB0aGUgaGFzaCBvZiB0aGUgZ2FtZSBjb2RlIGZvciBhIHBhcnRpY3VsYXIgdmVyc2lvbgoJZXZlbnQgVmVyc2lvbkNoYW5nZSgKCQlzdHJpbmcgaW5kZXhlZCBnYW1lSUQsCgkJdWludDMyIGluZGV4ZWQgdmVyc2lvbiwKCQlieXRlczMyIGNvZGVIYXNoIC8vIHRoZSBzaGEyNTYgb2YgdGhlIGdhbWUgY29kZSBhcyB1c2VkIGJ5IHRoZSBwbGF5ZXIKCSk7CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgoKCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFBMQVlFUlMgQUNUSU9OUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgkKCS8qCglUaGUgc2VlZCBpcyBjb21wdXRlZCBmcm9tIHRoZSBibG9jayBoYXNoIGFuZCB0aGUgc2VuZGVyIGFkZHJlc3MKCVdoaWxlIHRoZSBzZWVkIGNhbiBiZSBwcmVkaWN0ZWQgZm9yIGZldyBibG9jayBhd2F5IChzZWUgOiBudW1QYXN0QmxvY2tzKSB0aGlzIGlzIGhhcyBubyBtdWNoIHJlbGV2YW5jZSBzaW5jZSBhIGdhbWUgc2Vzc2lvbiBoYXZlIGEgYmlnZ2VyIGR1cmF0aW9uLAoJUmVtZW1iZXIgdGhpcyBpcyBub3QgZ2FtYmxpbmcgZ2FtZSwgdGhpcyBpcyBhIHNraWxsIGdhbWUsIHNlZWQgaXMgb25seSBhIHNtYWxsIHBhcnQgb2YgdGhlIGdhbWUgb3V0Y29tZQoJKi8KCWZ1bmN0aW9uIGNvbXB1dGVTZWVkKHVpbnQ2NCBibG9ja051bWJlciwgYWRkcmVzcyBwbGF5ZXIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnModWludDY0IHNlZWQpeyAKCQlyZXR1cm4gdWludDY0KHNoYTMoYmxvY2suYmxvY2toYXNoKGJsb2NrTnVtYmVyKSxibG9jay5ibG9ja2hhc2goYmxvY2tOdW1iZXItMSksYmxvY2suYmxvY2toYXNoKGJsb2NrTnVtYmVyLTIpLGJsb2NrLmJsb2NraGFzaChibG9ja051bWJlci0zKSxibG9jay5ibG9ja2hhc2goYmxvY2tOdW1iZXItNCksYmxvY2suYmxvY2toYXNoKGJsb2NrTnVtYmVyLTUpLHBsYXllcikpOyAKCX0KCQoJLyoKCQlwcm9iZSB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgY29tcGV0aXRpb24gc28gcGxheWVyIGNhbiBzdGFydCBwbGF5aW5nIHJpZ2h0IGF3YXkgKG5lZWQgdG8gY29tbWl0IGEgdHggdG9vIHRvIGVuc3VyZSBpdHMgcGxheSB3aWxsIGJlIGNvbnNpZGVyZWQgdGhvdWdoKQoJKi8KCWZ1bmN0aW9uIGdldFNlZWRBbmRTdGF0ZShzdHJpbmcgZ2FtZUlELCBhZGRyZXNzIHBsYXllcikgY29uc3RhbnQgcmV0dXJucyh1aW50NjQgc2VlZCwgdWludDY0IGJsb2NrTnVtYmVyLCB1aW50OCBjb21wZXRpdGlvbkluZGV4LCB1aW50MzIgdmVyc2lvbiwgdWludDY0IGVuZFRpbWUsIHVpbnQ4OCBwcmljZSwgdWludDMyIG15QmVzdFNjb3JlLCB1aW50NjQgY29tcGV0aXRpb25CbG9ja051bWJlciwgdWludDY0IHJlZ2lzdGVyZWRTZWVkKXsKCQl2YXIgZ2FtZSA9IGdhbWVzW2dhbWVJRF07CgoJCWNvbXBldGl0aW9uSW5kZXggPSBnYW1lLmN1cnJlbnRDb21wZXRpdGlvbkluZGV4OwoJCXZhciBjb21wZXRpdGlvbiA9IGdhbWUuY29tcGV0aXRpb25zW2NvbXBldGl0aW9uSW5kZXhdOwoKCQlibG9ja051bWJlciA9IHVpbnQ2NChibG9jay5udW1iZXItMSk7CgkJc2VlZCA9IGNvbXB1dGVTZWVkKGJsb2NrTnVtYmVyLCBwbGF5ZXIpOwoJCXZlcnNpb24gPSBjb21wZXRpdGlvbi52ZXJzaW9uOwoJCWVuZFRpbWUgPSBjb21wZXRpdGlvbi5lbmRUaW1lOwoJCXByaWNlID0gY29tcGV0aXRpb24ucHJpY2U7CgkJY29tcGV0aXRpb25CbG9ja051bWJlciA9IGNvbXBldGl0aW9uLnN3aXRjaEJsb2NrTnVtYmVyOwoJCQoJCWlmIChjb21wZXRpdGlvbi5zdWJtaXNzaW9uc1twbGF5ZXJdLnN1Ym1pdEJsb2NrTnVtYmVyID49IGNvbXBldGl0aW9uLnN3aXRjaEJsb2NrTnVtYmVyKXsKCQkJbXlCZXN0U2NvcmUgPSBjb21wZXRpdGlvbi5zdWJtaXNzaW9uc1twbGF5ZXJdLnNjb3JlOwoJCX1lbHNlewoJCQlteUJlc3RTY29yZSA9IDA7CgkJfQoJCQoJCXJlZ2lzdGVyZWRTZWVkID0gZ2FtZS5zdGFydHNbcGxheWVyXS5zZWVkOwoJfQoJCgkKCQkKCWZ1bmN0aW9uIHN0YXJ0KHN0cmluZyBnYW1lSUQsIHVpbnQ2NCBibG9ja051bWJlcix1aW50OCBjb21wZXRpdGlvbkluZGV4LCB1aW50MzIgdmVyc2lvbikgcGF5YWJsZSB7CgkJdmFyIGdhbWUgPSBnYW1lc1tnYW1lSURdOwoJCXZhciBjb21wZXRpdGlvbiA9IGdhbWUuY29tcGV0aXRpb25zW2NvbXBldGl0aW9uSW5kZXhdOwoKCQlpZihtc2cudmFsdWUgIT0gY29tcGV0aXRpb24ucHJpY2UpewoJCQl0aHJvdzsKCQl9CgoJCWlmKAoJCQljb21wZXRpdGlvbi5lbmRUaW1lIDw9IG5vdyB8fCAvL2Jsb2NrIHBsYXkgd2hlbiB0aW1lIGlzIHVwIAoJCQljb21wZXRpdGlvbkluZGV4ICE9IGdhbWUuY3VycmVudENvbXBldGl0aW9uSW5kZXggfHwgLy9zdGFydCBoYXBwZW4ganVzdCBhZnRlciBhIHN3aXRjaCAvLyBzaG91bGQgbm90IGJlIHBvc3NpYmxlIHNpbmNlIGVuZFRpbWUgYWxyZWFkeSBlbnN1cmUgdGhhdCBhIG5ldyBjb21wZXRpdGlvbiBjYW5ub3Qgc3RhcnQgYmVmb3JlIHRoZSBlbmQgb2YgdGhlIGZpcnN0CgkJCXZlcnNpb24gIT0gY29tcGV0aXRpb24udmVyc2lvbiAmJiAodmVyc2lvbiAhPSBjb21wZXRpdGlvbi5wcmV2aW91c1ZlcnNpb24gfHwgYmxvY2subnVtYmVyID4gY29tcGV0aXRpb24udmVyc2lvbkNoYW5nZUJsb2NrTnVtYmVyKSB8fCAvL2Vuc3VyZSB2ZXJzaW9uIGlzIHNhbWUgYXMgY3VycmVudCAob3IgcHJldmlvdXMgaWYgdmVyc2lvbkNoYW5nZUJsb2NrTnVtYmVyIGlzIHJlY2VudCkKCQkJYmxvY2subnVtYmVyID49IGNvbXBldGl0aW9uLm51bVBhc3RCbG9ja3MgJiYgYmxvY2subnVtYmVyIC0gY29tcGV0aXRpb24ubnVtUGFzdEJsb2NrcyA+IGJsb2NrTnVtYmVyIC8vZW5zdXJlIHN0YXJ0IGlzIG5vdCB0b28gb2xkICAgCgkJCSl7CgkJCQkvL2lmIGV0aGVyIHdhcyBzZW50LCBzZW5kIGl0IGJhY2sgaWYgcG9zc2libGUsIGVsc2UgdGhyb3cKCQkJCWlmKG1zZy52YWx1ZSAhPSAwICYmICFtc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlKSl7CgkJCQkJdGhyb3c7CgkJCQl9CgkJCQlyZXR1cm47CgkJfQoJCQoJCWNvbXBldGl0aW9uLmphY2twb3QgKz0gdWludDEyOChtc2cudmFsdWUpOyAvL2luY3JlYXNlIHRoZSBqYWNrcG90CgkJCgkJLy9zYXZlIHRoZSBzdGFydCBwYXJhbXMKCQlnYW1lLnN0YXJ0c1ttc2cuc2VuZGVyXSA9IFN0YXJ0KHsKCQkJc2VlZDogY29tcHV0ZVNlZWQoYmxvY2tOdW1iZXIsbXNnLnNlbmRlcikKCQkJLCB0aW1lIDogdWludDY0KG5vdykKCQkJLCBjb21wZXRpdGlvbkluZGV4IDogY29tcGV0aXRpb25JbmRleAoJCQksIHZlcnNpb24gOiB2ZXJzaW9uCgkJfSk7IAoJfQoJCQoJZnVuY3Rpb24gc3VibWl0KHN0cmluZyBnYW1lSUQsIHVpbnQ2NCBzZWVkLCB1aW50MzIgc2NvcmUsIHVpbnQzMiBkdXJhdGlvblJvdW5kZWREb3duLCBieXRlczMyIHByb29mSGFzaCl7IAoJCXZhciBnYW1lID0gZ2FtZXNbZ2FtZUlEXTsKCgkJdmFyIGdhbWVTdGFydCA9IGdhbWUuc3RhcnRzW21zZy5zZW5kZXJdOwoJCQkKCQkvL3NlZWQgc2hvdWxkIGJlIHNhbWUsIGVsc2UgaXQgbWVhbnMgZG91YmxlIHN0YXJ0IGFuZCB0aGlzIG9uZSBleGVjdXRpbmcgaXMgZnJvbSB0aGUgb2xkIG9uZSAKCQlpZihnYW1lU3RhcnQuc2VlZCAhPSBzZWVkKXsKCQkJcmV0dXJuOwoJCX0KCQkKCQkvL25vIHN0YXJ0IGZvdW5kCgkJaWYoZ2FtZVN0YXJ0LnRpbWUgPT0gMCl7CgkJCXJldHVybjsKCQl9CgkJCgkJdmFyIGNvbXBldGl0aW9uID0gZ2FtZS5jb21wZXRpdGlvbnNbZ2FtZVN0YXJ0LmNvbXBldGl0aW9uSW5kZXhdOwoJCQoJCS8vIGdhbWUgc2hvdWxkIG5vdCB0YWtlIHRvbyBsb25nIHRvIGJlIHN1Ym1pdGVkCgkJaWYobm93IC0gZ2FtZVN0YXJ0LnRpbWUgPiBkdXJhdGlvblJvdW5kZWREb3duICsgY29tcGV0aXRpb24ubGFnKXsgCgkJCXJldHVybjsKCQl9CgoJCWlmKG5vdyA+PSBjb21wZXRpdGlvbi5lbmRUaW1lICsgY29tcGV0aXRpb24udmVyaWZpY2F0aW9uV2FpdFRpbWUpewoJCQlyZXR1cm47IC8vdGhpcyBlbnN1cmUgdmVyaWZpZXIgdG8gZ2V0IGFsbCB0aGUgc2NvcmUgYXQgdGhhdCB0aW1lIChzaG91bGQgbmV2ZXIgYmUgdGhlcmUgdGhvdWdoIGFzIGdhbWUgc2hvdWxkIGVuc3VyZSBhIG1heGltdW1UaW1lIDwgdmVyaWZpY2F0aW9uV2FpdFRpbWUpCgkJfQoJCQoJCXZhciBzdWJtaXNzaW9uID0gY29tcGV0aXRpb24uc3VibWlzc2lvbnNbbXNnLnNlbmRlcl07CgkJaWYoc3VibWlzc2lvbi5zdWJtaXRCbG9ja051bWJlciA8IGNvbXBldGl0aW9uLnN3aXRjaEJsb2NrTnVtYmVyKXsKCQkJaWYoY29tcGV0aXRpb24ubnVtUGxheWVycyA+PSA0Mjk0OTY3Mjk1KXsgLy91bmxpa2VseSBidXQgaWYgdGhhdCBoYXBwZW4gdGhpcyBpcyBmb3Igbm93IHRoZSBiZXN0IHBsYWNlIHRvIHN0b3AKCQkJCXJldHVybjsKCQkJfQoJCX1lbHNlIGlmIChzY29yZSA8PSBzdWJtaXNzaW9uLnNjb3JlKXsKCQkJcmV0dXJuOwoJCX0KCQkKCQl2YXIgcGxheWVycyA9IGNvbXBldGl0aW9uLnBsYXllcnM7CgkJLy9pZiBwbGF5ZXIgZGlkIG5vdCBzdWJtaXQgc2NvcmUgeWV0ID0+IGFkZCBwbGF5ZXIgdG8gbGlzdAoJCWlmKHN1Ym1pc3Npb24uc3VibWl0QmxvY2tOdW1iZXIgPCBjb21wZXRpdGlvbi5zd2l0Y2hCbG9ja051bWJlcil7CgkJCXZhciBjdXJyZW50TnVtUGxheWVyID0gY29tcGV0aXRpb24ubnVtUGxheWVyczsKCQkJaWYoY3VycmVudE51bVBsYXllciA+PSBwbGF5ZXJzLmxlbmd0aCl7CgkJCQlwbGF5ZXJzLnB1c2gobXNnLnNlbmRlcik7CgkJCX1lbHNlewoJCQkJcGxheWVyc1tjdXJyZW50TnVtUGxheWVyXSA9IG1zZy5zZW5kZXI7CgkJCX0KCQkJY29tcGV0aXRpb24ubnVtUGxheWVycyA9IGN1cnJlbnROdW1QbGF5ZXIgKyAxOwoJCX0KCQkKCQljb21wZXRpdGlvbi5zdWJtaXNzaW9uc1ttc2cuc2VuZGVyXSA9IFN1Ym1pc3Npb24oewoJCQlwcm9vZkhhc2g6cHJvb2ZIYXNoLAoJCQlzZWVkOmdhbWVTdGFydC5zZWVkLAoJCQlzY29yZTpzY29yZSwKCQkJZHVyYXRpb25Sb3VuZGVkRG93bjpkdXJhdGlvblJvdW5kZWREb3duLAoJCQlzdWJtaXRCbG9ja051bWJlcjp1aW50NjQoYmxvY2subnVtYmVyKSwKCQkJdmVyc2lvbjpnYW1lU3RhcnQudmVyc2lvbgoJCX0pOwoJCQoJCWdhbWVTdGFydC50aW1lID0gMDsgLy9yZXNldCB0byBmb3JjZSB0aGUgbmVlZCB0byBzdGFydAoJCQoJfQoJCgkvKgoJCWFjY2VwdCBkb25hdGlvbiBwYXltZW50IDogdGhpcyBpbmNyZWFzZSB0aGUgamFja3BvdCBvZiB0aGUgY3VycmVudENvbXBldGl0aW9uIG9mIHRoZSBzcGVjaWZpZWQgZ2FtZQoJKi8KCWZ1bmN0aW9uIGluY3JlYXNlSmFja3BvdChzdHJpbmcgZ2FtZUlEKSBwYXlhYmxlewoJCXZhciBnYW1lID0gZ2FtZXNbZ2FtZUlEXTsKCQlnYW1lLmNvbXBldGl0aW9uc1tnYW1lLmN1cnJlbnRDb21wZXRpdGlvbkluZGV4XS5qYWNrcG90ICs9IHVpbnQxMjgobXNnLnZhbHVlKTsgLy9leHRyYSBldGhlciBpcyBsb3N0IGJ1dCB0aGlzIGlzIG5vdCBnb2luZyB0byBoYXBwZW4gOikKCX0KCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gUFJJVkFURSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgkJCglmdW5jdGlvbiBDb21wZXRpdGlvblN0b3JlKCl7CgkJb3JnYW5pc2VyID0gbXNnLnNlbmRlcjsKCQlkZXBvc2l0QWNjb3VudCA9IG1zZy5zZW5kZXI7Cgl9CgoJCgkvL2dpdmUgYSBzdGFydGluZyBqYWNrcG90IGJ5IHNlbmRpbmcgZXRoZXIgdG8gdGhlIHRyYW5zYWN0aW9uCglmdW5jdGlvbiBfc3RhcnROZXh0Q29tcGV0aXRpb24oc3RyaW5nIGdhbWVJRCwgdWludDMyIHZlcnNpb24sIHVpbnQ4OCBwcmljZSwgdWludDggbnVtUGFzdEJsb2NrcywgdWludDggaG91c2VEaXZpZGVyLCB1aW50MTYgbGFnLCB1aW50NjQgZHVyYXRpb24sIHVpbnQzMiB2ZXJpZmljYXRpb25XYWl0VGltZSwgYnl0ZXMzMiBjb2RlSGFzaCwgdWludDMyW10gcmV3YXJkc0Rpc3RyaWJ1dGlvbikgcGF5YWJsZXsKCQlpZihtc2cuc2VuZGVyICE9IG9yZ2FuaXNlcil7CgkJCXRocm93OwoJCX0KCQl2YXIgZ2FtZSA9IGdhbWVzW2dhbWVJRF07CgkJdmFyIG5ld0NvbXBldGl0aW9uID0gZ2FtZS5jb21wZXRpdGlvbnNbMSAtIGdhbWUuY3VycmVudENvbXBldGl0aW9uSW5kZXhdOyAKCQl2YXIgY3VycmVudENvbXBldGl0aW9uID0gZ2FtZS5jb21wZXRpdGlvbnNbZ2FtZS5jdXJyZW50Q29tcGV0aXRpb25JbmRleF07CgkJLy9kbyBub3QgYWxsb3cgdG8gc3dpdGNoIGlmIGVuZFRpbWUgaXMgbm90IG92ZXIKCQlpZihjdXJyZW50Q29tcGV0aXRpb24uZW5kVGltZSA+PSBub3cpewoJCQl0aHJvdzsKCQl9CgoJCS8vYmxvY2sgc3dpdGNoIGlmIHJld2FyZCB3YXMgbm90IGNhbGxlZCAobnVtUGxheWVycyA+IDApCgkJaWYobmV3Q29tcGV0aXRpb24ubnVtUGxheWVycyA+IDApewoJCQl0aHJvdzsKCQl9CgkJCgkJaWYoaG91c2VEaXZpZGVyID09IDApeyAKCQkJdGhyb3c7CgkJfQoJCQoJCWlmKG51bVBhc3RCbG9ja3MgPCAxKXsKCQkJdGhyb3c7CgkJfQoJCQoJCWlmKHJld2FyZHNEaXN0cmlidXRpb24ubGVuZ3RoID09IDAgfHwgcmV3YXJkc0Rpc3RyaWJ1dGlvbi5sZW5ndGggPiA2NCl7IC8vIGRvIG5vdCByaXNrIGdhcyBzaG9ydGFnZSBvbiByZXdhcmQKCQkJdGhyb3c7CgkJfQoJCS8vZW5zdXJlIHJld2FyZHNEaXN0cmlidXRpb24gZ2l2ZSBhbHdheXMgc29tZXRoaW5nIGFuZCBkbyBub3QgZ2l2ZSBtb3JlIHRvIGEgbG93ZXIgc2NvcmluZyBwbGF5ZXIKCQl1aW50MzIgcHJldiA9IDA7CgkJZm9yKHVpbnQ4IGkgPSAwOyBpIDwgcmV3YXJkc0Rpc3RyaWJ1dGlvbi5sZW5ndGg7IGkrKyl7CgkJCWlmKHJld2FyZHNEaXN0cmlidXRpb25baV0gPT0gMCB8fCAgKHByZXYgIT0gMCAmJiByZXdhcmRzRGlzdHJpYnV0aW9uW2ldID4gcHJldikpewoJCQkJdGhyb3c7CgkJCX0KCQkJcHJldiA9IHJld2FyZHNEaXN0cmlidXRpb25baV07CgkJfQoKCQlpZih2ZXJzaW9uICE9IGN1cnJlbnRDb21wZXRpdGlvbi52ZXJzaW9uKXsKCQkJVmVyc2lvbkNoYW5nZShnYW1lSUQsdmVyc2lvbixjb2RlSGFzaCk7IAoJCX0KCQkKCQlnYW1lLmN1cnJlbnRDb21wZXRpdGlvbkluZGV4ID0gMSAtIGdhbWUuY3VycmVudENvbXBldGl0aW9uSW5kZXg7CgkJCgkJbmV3Q29tcGV0aXRpb24uc3dpdGNoQmxvY2tOdW1iZXIgPSB1aW50NjQoYmxvY2subnVtYmVyKTsKCQluZXdDb21wZXRpdGlvbi5wcmV2aW91c1ZlcnNpb24gPSAwOwoJCW5ld0NvbXBldGl0aW9uLnZlcnNpb25DaGFuZ2VCbG9ja051bWJlciA9IDA7CgkJbmV3Q29tcGV0aXRpb24udmVyc2lvbiA9IHZlcnNpb247CgkJbmV3Q29tcGV0aXRpb24ucHJpY2UgPSBwcmljZTsgCgkJbmV3Q29tcGV0aXRpb24ubnVtUGFzdEJsb2NrcyA9IG51bVBhc3RCbG9ja3M7CgkJbmV3Q29tcGV0aXRpb24ucmV3YXJkc0Rpc3RyaWJ1dGlvbiA9IHJld2FyZHNEaXN0cmlidXRpb247CgkJbmV3Q29tcGV0aXRpb24uaG91c2VEaXZpZGVyID0gaG91c2VEaXZpZGVyOwoJCW5ld0NvbXBldGl0aW9uLmxhZyA9IGxhZzsKCQluZXdDb21wZXRpdGlvbi5qYWNrcG90ICs9IHVpbnQxMjgobXNnLnZhbHVlKTsgLy9leHRyYSBldGhlciBpcyBsb3N0IGJ1dCB0aGlzIGlzIG5vdCBnb2luZyB0byBoYXBwZW4gOikKCQluZXdDb21wZXRpdGlvbi5lbmRUaW1lID0gdWludDY0KG5vdykgKyBkdXJhdGlvbjsKCQluZXdDb21wZXRpdGlvbi52ZXJpZmljYXRpb25XYWl0VGltZSA9IHZlcmlmaWNhdGlvbldhaXRUaW1lOwoJfQoJCgkKCQoJZnVuY3Rpb24gX3NldEJ1Z0ZpeFZlcnNpb24oc3RyaW5nIGdhbWVJRCwgdWludDMyIHZlcnNpb24sIGJ5dGVzMzIgY29kZUhhc2gsIHVpbnQzMiBudW1CbG9ja0FsbG93ZWRGb3JQYXN0VmVyc2lvbil7CgkJaWYobXNnLnNlbmRlciAhPSBvcmdhbmlzZXIpewoJCQl0aHJvdzsKCQl9CgoJCXZhciBnYW1lID0gZ2FtZXNbZ2FtZUlEXTsKCQl2YXIgY29tcGV0aXRpb24gPSBnYW1lLmNvbXBldGl0aW9uc1tnYW1lLmN1cnJlbnRDb21wZXRpdGlvbkluZGV4XTsKCQkKCQlpZih2ZXJzaW9uIDw9IGNvbXBldGl0aW9uLnZlcnNpb24peyAvLyBhIGJ1ZyBmaXggc2hvdWxkIGJlIGEgbmV3IHZlcnNpb24gKGdyZWF0ZXIgdGhhbiBwcmV2aW91cyB2ZXJzaW9uKQoJCQl0aHJvdzsKCQl9CgkJCgkJaWYoY29tcGV0aXRpb24uZW5kVGltZSA8PSBub3cpeyAvLyBjYW5ub3QgYnVnRml4IGEgY29tcGV0aXRpb24gdGhhdCBhbHJlYWR5IGVuZGVkCgkJCXJldHVybjsKCQl9CgkJCgkJY29tcGV0aXRpb24ucHJldmlvdXNWZXJzaW9uID0gY29tcGV0aXRpb24udmVyc2lvbjsKCQljb21wZXRpdGlvbi52ZXJzaW9uQ2hhbmdlQmxvY2tOdW1iZXIgPSB1aW50NjQoYmxvY2subnVtYmVyICsgbnVtQmxvY2tBbGxvd2VkRm9yUGFzdFZlcnNpb24pOwoJCWNvbXBldGl0aW9uLnZlcnNpb24gPSB2ZXJzaW9uOwoJCVZlcnNpb25DaGFuZ2UoZ2FtZUlELHZlcnNpb24sY29kZUhhc2gpOwoJfQoKCWZ1bmN0aW9uIF9zZXRMYWdQYXJhbXMoc3RyaW5nIGdhbWVJRCwgdWludDE2IGxhZywgdWludDggbnVtUGFzdEJsb2Nrcyl7CgkJaWYobXNnLnNlbmRlciAhPSBvcmdhbmlzZXIpewoJCQl0aHJvdzsKCQl9CgkJCgkJaWYobnVtUGFzdEJsb2NrcyA8IDEpewoJCQl0aHJvdzsKCQl9CgoJCXZhciBnYW1lID0gZ2FtZXNbZ2FtZUlEXTsKCQl2YXIgY29tcGV0aXRpb24gPSBnYW1lLmNvbXBldGl0aW9uc1tnYW1lLmN1cnJlbnRDb21wZXRpdGlvbkluZGV4XTsKCQljb21wZXRpdGlvbi5udW1QYXN0QmxvY2tzID0gbnVtUGFzdEJsb2NrczsKCQljb21wZXRpdGlvbi5sYWcgPSBsYWc7Cgl9CgoJZnVuY3Rpb24gX3Jld2FyZFdpbm5lcnMoc3RyaW5nIGdhbWVJRCwgdWludDggY29tcGV0aXRpb25JbmRleCwgYWRkcmVzc1tdIHdpbm5lcnMpewoJCWlmKG1zZy5zZW5kZXIgIT0gb3JnYW5pc2VyKXsKCQkJdGhyb3c7CgkJfQoJCQoJCXZhciBjb21wZXRpdGlvbiA9IGdhbWVzW2dhbWVJRF0uY29tcGV0aXRpb25zW2NvbXBldGl0aW9uSW5kZXhdOwoKCQkvL2Vuc3VyZSB0aW1lIGhhcyBwYXNzZWQgc28gdGhhdCBwbGF5ZXJzIHdobyBzdGFydGVkIG5lYXIgdGhlIGVuZCBjYW4gZmluaXNoIHRoZWlyIHNlc3Npb24gCgkJLy9nYW1lIHNob3VsZCBiZSBtYWRlIHRvIGVuc3VyZSB0ZXJtaW5hdGlvbiBiZWZvcmUgdmVyaWZpY2F0aW9uV2FpdFRpbWUsIGl0IGlzIHRoZSBnYW1lIHJlc3BvbnNhYmlsaXR5CgkJaWYoaW50KG5vdykgLSBjb21wZXRpdGlvbi5lbmRUaW1lIDwgY29tcGV0aXRpb24udmVyaWZpY2F0aW9uV2FpdFRpbWUpewoJCQl0aHJvdzsKCQl9CgoJCQoJCWlmKCBjb21wZXRpdGlvbi5qYWNrcG90ID4gMCl7IC8vIGlmIHRoZXJlIGlzIG5vIGphY2twb3Qgc2tpcAoKCQkJCgkJCXZhciByZXdhcmRzRGlzdHJpYnV0aW9uID0gY29tcGV0aXRpb24ucmV3YXJkc0Rpc3RyaWJ1dGlvbjsKCgkJCXVpbnQ4IG51bVdpbm5lcnMgPSB1aW50OChyZXdhcmRzRGlzdHJpYnV0aW9uLmxlbmd0aCk7CgoJCQlpZihudW1XaW5uZXJzID4gdWludDgod2lubmVycy5sZW5ndGgpKXsKCQkJCW51bVdpbm5lcnMgPSB1aW50OCh3aW5uZXJzLmxlbmd0aCk7CgkJCX0KCgkJCXVpbnQxMjggZm9ySG91c2UgPSBjb21wZXRpdGlvbi5qYWNrcG90OwoJCQlpZihudW1XaW5uZXJzID4gMCAmJiBjb21wZXRpdGlvbi5ob3VzZURpdmlkZXIgPiAxKXsgLy9pbiBjYXNlIHRoZXJlIGlzIG5vIHdpbm5lcnMgKG5vIHBsYXllcnMgb3Igb25seSBjaGVhdGVycyksIHRoZSBob3VzZSB0YWtlcyBhbGwKCQkJCWZvckhvdXNlID0gZm9ySG91c2UgLyBjb21wZXRpdGlvbi5ob3VzZURpdmlkZXI7CgkJCQl1aW50MTI4IGZvcldpbm5lcnMgPSBjb21wZXRpdGlvbi5qYWNrcG90IC0gZm9ySG91c2U7CgoJCQkJdWludDY0IHRvdGFsID0gMDsKCQkJCWZvcih1aW50OCBpPTA7IGk8bnVtV2lubmVyczsgaSsrKXsgLy8gZGlzdHJpYnV0ZSBhbGwgdGhlIHdpbm5pbmcgZXZlbiBpZiB0aGVyZSBpcyBub3QgYWxsIHRoZSB3aW5uZXJzCgkJCQkJdG90YWwgKz0gcmV3YXJkc0Rpc3RyaWJ1dGlvbltpXTsKCQkJCX0KCQkJCWZvcih1aW50OCBqPTA7IGo8bnVtV2lubmVyczsgaisrKXsKCQkJCQl1aW50MTI4IHZhbHVlID0gKGZvcldpbm5lcnMgKiByZXdhcmRzRGlzdHJpYnV0aW9uW2pdKSAvIHRvdGFsOwoJCQkJCWlmKCF3aW5uZXJzW2pdLnNlbmQodmFsdWUpKXsgLy8gaWYgZmFpbCBnaXZlIHRvIGhvdXNlCgkJCQkJCWZvckhvdXNlID0gZm9ySG91c2UgKyB2YWx1ZTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJCgkJCWlmKCFkZXBvc2l0QWNjb3VudC5zZW5kKGZvckhvdXNlKSl7CgkJCQkvL2luIGNhc2Ugc2VuZGluZyB0byBob3VzZSBmYWlsZWQgCgkJCQl2YXIgbmV4dENvbXBldGl0aW9uID0gZ2FtZXNbZ2FtZUlEXS5jb21wZXRpdGlvbnNbMSAtIGNvbXBldGl0aW9uSW5kZXhdOwoJCQkJbmV4dENvbXBldGl0aW9uLmphY2twb3QgPSBuZXh0Q29tcGV0aXRpb24uamFja3BvdCArIGZvckhvdXNlOwkKCQkJfQoKCQkJCgkJCWNvbXBldGl0aW9uLmphY2twb3QgPSAwOwoJCX0KCQkKCQkKCQljb21wZXRpdGlvbi5udW1QbGF5ZXJzID0gMDsKCX0KCgkKCS8qCgkJYWxsb3cgdG8gY2hhbmdlIHRoZSBkZXBvc2l0QWNjb3VudCBvZiB0aGUgaG91c2Ugc2hhcmUsIG9ubHkgdGhlIGRlcG9zaXRBY2NvdW50IGNhbiBjaGFuZ2UgaXQsIGRlcG9zaXRBY2NvdW50ID09IG9yZ2FuaXplciBhdCBjcmVhdGlvbgoJKi8KCWZ1bmN0aW9uIF9zZXREZXBvc2l0QWNjb3VudChhZGRyZXNzIG5ld0RlcG9zaXRBY2NvdW50KXsKCQlpZihkZXBvc2l0QWNjb3VudCAhPSBtc2cuc2VuZGVyKXsKCQkJdGhyb3c7CgkJfQoJCWRlcG9zaXRBY2NvdW50ID0gbmV3RGVwb3NpdEFjY291bnQ7Cgl9CgkKCS8qCgkJYWxsb3cgdG8gY2hhbmdlIHRoZSBvcmdhbmlzZXIsIGluIGNhc2UgdGhpcyBuZWVkIGJlIAoJKi8KCWZ1bmN0aW9uIF9zZXRPcmdhbmlzZXIoYWRkcmVzcyBuZXdPcmdhbmlzZXIpewoJCWlmKG9yZ2FuaXNlciAhPSBtc2cuc2VuZGVyKXsKCQkJdGhyb3c7CgkJfQoJCW9yZ2FuaXNlciA9IG5ld09yZ2FuaXNlcjsKCX0KCQoJCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBPVEhFUiBDT05TVEFOVCBDQUxMUyBUTyBQUk9CRSBWQUxVRVMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCWZ1bmN0aW9uIGdldFBsYXllclN1Ym1pc3Npb25Gcm9tQ29tcGV0aXRpb24oc3RyaW5nIGdhbWVJRCwgdWludDggY29tcGV0aXRpb25JbmRleCwgYWRkcmVzcyBwbGF5ZXJBZGRyZXNzKSBjb25zdGFudCByZXR1cm5zKHVpbnQzMiBzY29yZSwgdWludDY0IHNlZWQsIHVpbnQzMiBkdXJhdGlvbiwgYnl0ZXMzMiBwcm9vZkhhc2gsIHVpbnQzMiB2ZXJzaW9uLCB1aW50NjQgc3VibWl0QmxvY2tOdW1iZXIpewoJCXZhciBzdWJtaXNzaW9uID0gZ2FtZXNbZ2FtZUlEXS5jb21wZXRpdGlvbnNbY29tcGV0aXRpb25JbmRleF0uc3VibWlzc2lvbnNbcGxheWVyQWRkcmVzc107CgkJc2NvcmUgPSBzdWJtaXNzaW9uLnNjb3JlOwoJCXNlZWQgPSBzdWJtaXNzaW9uLnNlZWQ7CQkKCQlkdXJhdGlvbiA9IHN1Ym1pc3Npb24uZHVyYXRpb25Sb3VuZGVkRG93bjsKCQlwcm9vZkhhc2ggPSBzdWJtaXNzaW9uLnByb29mSGFzaDsKCQl2ZXJzaW9uID0gc3VibWlzc2lvbi52ZXJzaW9uOwoJCXN1Ym1pdEJsb2NrTnVtYmVyID1zdWJtaXNzaW9uLnN1Ym1pdEJsb2NrTnVtYmVyOwoJfQoJCglmdW5jdGlvbiBnZXRQbGF5ZXJzRnJvbUNvbXBldGl0aW9uKHN0cmluZyBnYW1lSUQsIHVpbnQ4IGNvbXBldGl0aW9uSW5kZXgpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzc1tdIHBsYXllckFkZHJlc3NlcywgdWludDMyIG51bSl7CgkJdmFyIGNvbXBldGl0aW9uID0gZ2FtZXNbZ2FtZUlEXS5jb21wZXRpdGlvbnNbY29tcGV0aXRpb25JbmRleF07CgkJcGxheWVyQWRkcmVzc2VzID0gY29tcGV0aXRpb24ucGxheWVyczsKCQludW0gPSBjb21wZXRpdGlvbi5udW1QbGF5ZXJzOwoJfQoKCWZ1bmN0aW9uIGdldENvbXBldGl0aW9uVmFsdWVzKHN0cmluZyBnYW1lSUQsIHVpbnQ4IGNvbXBldGl0aW9uSW5kZXgpIGNvbnN0YW50IHJldHVybnMgKAoJCXVpbnQxMjggamFja3BvdCwKCQl1aW50ODggcHJpY2UsCgkJdWludDMyIHZlcnNpb24sCgkJdWludDggbnVtUGFzdEJsb2NrcywKCQl1aW50NjQgc3dpdGNoQmxvY2tOdW1iZXIsCgkJdWludDMyIG51bVBsYXllcnMsCgkJdWludDMyW10gcmV3YXJkc0Rpc3RyaWJ1dGlvbiwKCQl1aW50OCBob3VzZURpdmlkZXIsCgkJdWludDE2IGxhZywKCQl1aW50NjQgZW5kVGltZSwKCQl1aW50MzIgdmVyaWZpY2F0aW9uV2FpdFRpbWUsCgkJdWludDggX2NvbXBldGl0aW9uSW5kZXgKCSl7CgkJdmFyIGNvbXBldGl0aW9uID0gZ2FtZXNbZ2FtZUlEXS5jb21wZXRpdGlvbnNbY29tcGV0aXRpb25JbmRleF07CgkJamFja3BvdCA9IGNvbXBldGl0aW9uLmphY2twb3Q7CgkJcHJpY2UgPSBjb21wZXRpdGlvbi5wcmljZTsKCQl2ZXJzaW9uID0gY29tcGV0aXRpb24udmVyc2lvbjsKCQludW1QYXN0QmxvY2tzID0gY29tcGV0aXRpb24ubnVtUGFzdEJsb2NrczsKCQlzd2l0Y2hCbG9ja051bWJlciA9IGNvbXBldGl0aW9uLnN3aXRjaEJsb2NrTnVtYmVyOwoJCW51bVBsYXllcnMgPSBjb21wZXRpdGlvbi5udW1QbGF5ZXJzOwoJCXJld2FyZHNEaXN0cmlidXRpb24gPSBjb21wZXRpdGlvbi5yZXdhcmRzRGlzdHJpYnV0aW9uOwoJCWhvdXNlRGl2aWRlciA9IGNvbXBldGl0aW9uLmhvdXNlRGl2aWRlcjsKCQlsYWcgPSBjb21wZXRpdGlvbi5sYWc7CgkJZW5kVGltZSA9IGNvbXBldGl0aW9uLmVuZFRpbWU7CgkJdmVyaWZpY2F0aW9uV2FpdFRpbWUgPSBjb21wZXRpdGlvbi52ZXJpZmljYXRpb25XYWl0VGltZTsKCQlfY29tcGV0aXRpb25JbmRleCA9IGNvbXBldGl0aW9uSW5kZXg7Cgl9CgkKCWZ1bmN0aW9uIGdldEN1cnJlbnRDb21wZXRpdGlvblZhbHVlcyhzdHJpbmcgZ2FtZUlEKSBjb25zdGFudCByZXR1cm5zICgKCQl1aW50MTI4IGphY2twb3QsCgkJdWludDg4IHByaWNlLAoJCXVpbnQzMiB2ZXJzaW9uLAoJCXVpbnQ4IG51bVBhc3RCbG9ja3MsCgkJdWludDY0IHN3aXRjaEJsb2NrTnVtYmVyLAoJCXVpbnQzMiBudW1QbGF5ZXJzLAoJCXVpbnQzMltdIHJld2FyZHNEaXN0cmlidXRpb24sCgkJdWludDggaG91c2VEaXZpZGVyLAoJCXVpbnQxNiBsYWcsCgkJdWludDY0IGVuZFRpbWUsCgkJdWludDMyIHZlcmlmaWNhdGlvbldhaXRUaW1lLAoJCXVpbnQ4IF9jb21wZXRpdGlvbkluZGV4CgkpCgl7CgkJcmV0dXJuIGdldENvbXBldGl0aW9uVmFsdWVzKGdhbWVJRCxnYW1lc1tnYW1lSURdLmN1cnJlbnRDb21wZXRpdGlvbkluZGV4KTsKCX0KfQ=='.
	

]
