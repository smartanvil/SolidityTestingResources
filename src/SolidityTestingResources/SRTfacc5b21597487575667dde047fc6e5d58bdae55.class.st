Class {
	#name : #SRTfacc5b21597487575667dde047fc6e5d58bdae55,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfacc5b21597487575667dde047fc6e5d58bdae55 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogIH0KCn0KCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGJvb2wgcHVibGljIHN0b3BwZWQ7CgogIG1vZGlmaWVyIHN0b3BJbkVtZXJnZW5jeSB7CiAgICByZXF1aXJlKCFzdG9wcGVkKTsKICAgIF87CiAgfQogIAogIG1vZGlmaWVyIG9ubHlJbkVtZXJnZW5jeSB7CiAgICByZXF1aXJlKHN0b3BwZWQpOwogICAgXzsKICB9CgogIC8vIGNhbGxlZCBieSB0aGUgb3duZXIgb24gZW1lcmdlbmN5LCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgZnVuY3Rpb24gZW1lcmdlbmN5U3RvcCgpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICBzdG9wcGVkID0gdHJ1ZTsKICB9CgogIC8vIGNhbGxlZCBieSB0aGUgb3duZXIgb24gZW5kIG9mIGVtZXJnZW5jeSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICBmdW5jdGlvbiByZWxlYXNlKCkgZXh0ZXJuYWwgb25seU93bmVyIG9ubHlJbkVtZXJnZW5jeSB7CiAgICBzdG9wcGVkID0gZmFsc2U7CiAgfQoKfQoKbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IFB1bGxQYXltZW50IHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBwYXltZW50czsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFBheW1lbnRzOwoKICAvKioKICAqIEBkZXYgQ2FsbGVkIGJ5IHRoZSBwYXllciB0byBzdG9yZSB0aGUgc2VudCBhbW91bnQgYXMgY3JlZGl0IHRvIGJlIHB1bGxlZC4KICAqIEBwYXJhbSBkZXN0IFRoZSBkZXN0aW5hdGlvbiBhZGRyZXNzIG9mIHRoZSBmdW5kcy4KICAqIEBwYXJhbSBhbW91bnQgVGhlIGFtb3VudCB0byB0cmFuc2Zlci4KICAqLwogIGZ1bmN0aW9uIGFzeW5jU2VuZChhZGRyZXNzIGRlc3QsIHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB7CiAgICBwYXltZW50c1tkZXN0XSA9IHBheW1lbnRzW2Rlc3RdLmFkZChhbW91bnQpOwogICAgdG90YWxQYXltZW50cyA9IHRvdGFsUGF5bWVudHMuYWRkKGFtb3VudCk7CiAgfQoKICAvKioKICAqIEBkZXYgd2l0aGRyYXcgYWNjdW11bGF0ZWQgYmFsYW5jZSwgY2FsbGVkIGJ5IHBheWVlLgogICovCiAgZnVuY3Rpb24gd2l0aGRyYXdQYXltZW50cygpIHsKICAgIGFkZHJlc3MgcGF5ZWUgPSBtc2cuc2VuZGVyOwogICAgdWludDI1NiBwYXltZW50ID0gcGF5bWVudHNbcGF5ZWVdOwoKICAgIHJlcXVpcmUocGF5bWVudCAhPSAwKTsKICAgIHJlcXVpcmUodGhpcy5iYWxhbmNlID49IHBheW1lbnQpOwoKICAgIHRvdGFsUGF5bWVudHMgPSB0b3RhbFBheW1lbnRzLnN1YihwYXltZW50KTsKICAgIHBheW1lbnRzW3BheWVlXSA9IDA7CgogICAgYXNzZXJ0KHBheWVlLnNlbmQocGF5bWVudCkpOwogIH0KfQoKY29udHJhY3QgQ3Jvd2RzYWxlIGlzIFBhdXNhYmxlLCBQdWxsUGF5bWVudCB7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogIAlzdHJ1Y3QgQmFja2VyIHsKCQl1aW50IHdlaVJlY2VpdmVkOyAvLyBBbW91bnQgb2YgRXRoZXIgZ2l2ZW4KCQl1aW50MjU2IGNvaW5TZW50OwoJfQoKCgkvKgoJKiBDb25zdGFudHMKCSovCgkvKiBNaW5pbXVtIG51bWJlciBvZiBEQVJGdG9rZW4gdG8gc2VsbCAqLwoJdWludCBwdWJsaWMgY29uc3RhbnQgTUlOX0NBUCA9IDEwMDAwMCBldGhlcjsgLy8gMTAwLDAwMCBEQVJGdG9rZW5zCgoJLyogTWF4aW11bSBudW1iZXIgb2YgREFSRnRva2VuIHRvIHNlbGwgKi8KCXVpbnQgcHVibGljIGNvbnN0YW50IE1BWF9DQVAgPSA4MDAwMDAwIGV0aGVyOyAvLyA4LDAwMCwwMDAgREFSRnRva2VucwoKCS8qIE1pbmltdW0gYW1vdW50IHRvIEJVWSAqLwoJdWludCBwdWJsaWMgY29uc3RhbnQgTUlOX0JVWV9FVEhFUiA9IDEwMCBmaW5uZXk7CgogICAgLyoKICAgIElmIGJhY2tlciBidXkgb3ZlciAxIDAwMCAwMDAgREFSRiAoMjAwMCBFdGhlcikgaGUvc2hlIGNhbiBjbGFtZSB0byBiZWNvbWUgYW4gaW52ZXN0b3IgYWZ0ZXIgc2lnbmluZyBhZGRpdGlvbmFsIGFncmVlbWVudCB3aXRoIEtZQyBwcm9jZWR1cmUgYW5kIGdldCAxJSBvZiBwcm9qZWN0IHByb2ZpdCBwZXIgZXZlcnkgMSAwMDAgMDAwIERBUkYKICAgICovCiAgICBzdHJ1Y3QgUG90ZW50aWFsX0ludmVzdG9yIHsKCQl1aW50IHdlaVJlY2VpdmVkOyAvLyBBbW91bnQgb2YgRXRoZXIgZ2l2ZW4KCQl1aW50MjU2IGNvaW5TZW50OwogICAgICAgIHVpbnQgIHByb2ZpdHNoYXJlOyAvLyBBbW91bnQgb2YgRXRoZXIgZ2l2ZW4KICAgIH0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9JTlZFU1RfQlVZID0gMjAwMCBldGhlcjsKCiAgICAvKiBCdXQgb25seSA0OSUgIG9mIHByb2ZpdCBjYW4gYmUgZGlzdHJpYnV0ZWQgdGhpcyB3YXkgZm9yIGJha2VycyB3aG8gd2lsbCBiZSBmaXJzdAogICAgKi8KCiAgICB1aW50ICBwdWJsaWMgIE1BWF9JTlZFU1RfU0hBUkUgPSA0OTAwOyAvLyAgNDkwMCBmcm9tIDEwMDAwIGlzIDQ5JSwgYmVjb3VzZSBTb2xpZGl0aSBzdGlsIGRvbid0IHN1cHBvcnQgZml4ZWQKCi8qIENyb3dkc2FsZSBwZXJpb2QgKi8KCXVpbnQgcHJpdmF0ZSBjb25zdGFudCBDUk9XRFNBTEVfUEVSSU9EID0gNjIgZGF5czsKCgkvKiBOdW1iZXIgb2YgREFSRnRva2VucyBwZXIgRXRoZXIgKi8KCXVpbnQgcHVibGljIGNvbnN0YW50IENPSU5fUEVSX0VUSEVSID0gNTAwOyAvLyA1MDAgREFSRiBwZXIgZXRoZXIKCgl1aW50IHB1YmxpYyBjb25zdGFudCBCSUdTRUxMID0gQ09JTl9QRVJfRVRIRVIgKiAxMDAgZXRoZXI7IC8vIHdoZW4gMSBidXkgaXMgb3ZlciA1MDAwMCBEQVJGIChvciAxMDAgZXRoZXIpLCBpbiBtZWFucyBhZGRpdGlvbmFsIGJvbnVzIDMwJQoKCgkvKgoJKiBWYXJpYWJsZXMKCSovCgkvKiBEQVJGdG9rZW4gY29udHJhY3QgcmVmZXJlbmNlICovCglEQVJGdG9rZW4gcHVibGljIGNvaW47CgogICAgLyogTXVsdGlzaWcgY29udHJhY3QgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIEV0aGVyICovCglhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZ0V0aGVyOwoKCS8qIE51bWJlciBvZiBFdGhlciByZWNlaXZlZCAqLwoJdWludCBwdWJsaWMgZXRoZXJSZWNlaXZlZDsKCgkvKiBOdW1iZXIgb2YgREFSRnRva2VucyBzZW50IHRvIEV0aGVyIGNvbnRyaWJ1dG9ycyAqLwoJdWludCBwdWJsaWMgY29pblNlbnRUb0V0aGVyOwoKCS8qIE51bWJlciBvZiBEQVJGdG9rZW5zIHNlbnQgdG8gcG90ZW50aWFsIGludmVzdG9ycyAqLwoJdWludCBwdWJsaWMgaW52Y29pblNlbnRUb0V0aGVyOwoKCgkvKiBDcm93ZHNhbGUgc3RhcnQgdGltZSAqLwoJdWludCBwdWJsaWMgc3RhcnRUaW1lOwoKCS8qIENyb3dkc2FsZSBlbmQgdGltZSAqLwoJdWludCBwdWJsaWMgZW5kVGltZTsKCiAJLyogSXMgY3Jvd2RzYWxlIHN0aWxsIG9uIGdvaW5nICovCglib29sIHB1YmxpYyBjcm93ZHNhbGVDbG9zZWQ7CgoJLyogQmFja2VycyBFdGhlciBpbmRleGVkIGJ5IHRoZWlyIEV0aGVyZXVtIGFkZHJlc3MgKi8KCW1hcHBpbmcoYWRkcmVzcyA9PiBCYWNrZXIpIHB1YmxpYyBiYWNrZXJzOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBQb3RlbnRpYWxfSW52ZXN0b3IpIHB1YmxpYyBQb3RlbnRpYWxfSW52ZXN0b3JzOyAvLyBsaXN0IG9mIHBvdGVudGlhbCBpbnZlc3RvcnMKCgoJLyoKCSogTW9kaWZpZXJzCgkqLwoJbW9kaWZpZXIgbWluQ2FwTm90UmVhY2hlZCgpIHsKCQlyZXF1aXJlKCEoKG5vdyA8IGVuZFRpbWUpIHx8IGNvaW5TZW50VG9FdGhlciA+PSBNSU5fQ0FQICkpOwoJCV87Cgl9CgoJbW9kaWZpZXIgcmVzcGVjdFRpbWVGcmFtZSgpIHsKCQlyZXF1aXJlKCEoKG5vdyA8IHN0YXJ0VGltZSkgfHwgKG5vdyA+IGVuZFRpbWUgKSkpOwoJCV87Cgl9CgoJLyoKCSAqIEV2ZW50CgkqLwoJZXZlbnQgTG9nUmVjZWl2ZWRFVEgoYWRkcmVzcyBhZGRyLCB1aW50IHZhbHVlKTsKCWV2ZW50IExvZ0NvaW5zRW1pdGVkKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50IGFtb3VudCk7CglldmVudCBMb2dJbnZlc3RzaGFyZShhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludCBzaGFyZSk7CgoJLyoKCSAqIENvbnN0cnVjdG9yCgkqLwoJZnVuY3Rpb24gQ3Jvd2RzYWxlKGFkZHJlc3MgX0RBUkZ0b2tlbkFkZHJlc3MsIGFkZHJlc3MgX3RvKSB7CgkJY29pbiA9IERBUkZ0b2tlbihfREFSRnRva2VuQWRkcmVzcyk7CgkJbXVsdGlzaWdFdGhlciA9IF90bzsKCX0KCgkvKgoJICogVGhlIGZhbGxiYWNrIGZ1bmN0aW9uIGNvcnJlc3BvbmRzIHRvIGEgZG9uYXRpb24gaW4gRVRICgkgKi8KCWZ1bmN0aW9uKCkgc3RvcEluRW1lcmdlbmN5IHJlc3BlY3RUaW1lRnJhbWUgcGF5YWJsZSB7CgkJcmVjZWl2ZUVUSChtc2cuc2VuZGVyKTsKCX0KCgkvKgoJICogVG8gY2FsbCB0byBzdGFydCB0aGUgY3Jvd2RzYWxlCgkgKi8KCWZ1bmN0aW9uIHN0YXJ0KCkgb25seU93bmVyIHsKCQlyZXF1aXJlIChzdGFydFRpbWUgPT0gMCk7CgoJCXN0YXJ0VGltZSA9IG5vdyA7CgkJZW5kVGltZSA9ICBub3cgKyBDUk9XRFNBTEVfUEVSSU9EOwoJfQoKCS8qCgkgKglSZWNlaXZlcyBhIGRvbmF0aW9uIGluIEV0aGVyCgkqLwoJZnVuY3Rpb24gcmVjZWl2ZUVUSChhZGRyZXNzIGJlbmVmaWNpYXJ5KSBpbnRlcm5hbCB7CgkJcmVxdWlyZSghKG1zZy52YWx1ZSA8IE1JTl9CVVlfRVRIRVIpKTsgLy8gRG9uJ3QgYWNjZXB0IGZ1bmRpbmcgdW5kZXIgYSBwcmVkZWZpbmVkIHRocmVzaG9sZAogICAgICAgIGlmIChtdWx0aXNpZ0V0aGVyID09ICBiZW5lZmljaWFyeSkgcmV0dXJuIDsgLy8gRG9uJ3QgcGF5IHRva2VucyBpZiB0ZWFtIHJlZnVuZCBldGhlcnMKICAgIHVpbnQgY29pblRvU2VuZCA9IGJvbnVzKG1zZy52YWx1ZS5tdWwoQ09JTl9QRVJfRVRIRVIpKTsvLyBDb21wdXRlIHRoZSBudW1iZXIgb2YgREFSRnRva2VuIHRvIHNlbmQKCQlyZXF1aXJlKCEoY29pblRvU2VuZC5hZGQoY29pblNlbnRUb0V0aGVyKSA+IE1BWF9DQVApKTsKCiAgICAgICAgQmFja2VyIGJhY2tlciA9IGJhY2tlcnNbYmVuZWZpY2lhcnldOwoJCWNvaW4udHJhbnNmZXIoYmVuZWZpY2lhcnksIGNvaW5Ub1NlbmQpOyAvLyBUcmFuc2ZlciBEQVJGdG9rZW5zIHJpZ2h0IG5vdwoKCQliYWNrZXIuY29pblNlbnQgPSBiYWNrZXIuY29pblNlbnQuYWRkKGNvaW5Ub1NlbmQpOwoJCWJhY2tlci53ZWlSZWNlaXZlZCA9IGJhY2tlci53ZWlSZWNlaXZlZC5hZGQobXNnLnZhbHVlKTsgLy8gVXBkYXRlIHRoZSB0b3RhbCB3ZWkgY29sbGVjdGVkIGR1cmluZyB0aGUgY3Jvd2RmdW5kaW5nIGZvciB0aGlzIGJhY2tlcgogICAgICAgIG11bHRpc2lnRXRoZXIuc2VuZChtc2cudmFsdWUpOwoKICAgICAgICBpZiAoYmFja2VyLndlaVJlY2VpdmVkID4gTUlOX0lOVkVTVF9CVVkpIHsKCiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBwcm9maXQgc2hhcmUKICAgICAgICAgICAgdWludCBzaGFyZSA9IG1zZy52YWx1ZS5tdWwoMTAwMDApLmRpdihNSU5fSU5WRVNUX0JVWSk7IC8vIDEwMCA9IDElIGZyb20gMTAwMDAKCQkJLy8gY29tcGFyZSB0byBhbGwgcHJvZml0IHNoYXJlIHdpbGwgTFQgNDklCgkJCUxvZ0ludmVzdHNoYXJlKG1zZy5zZW5kZXIsc2hhcmUpOwoJCQlpZiAoTUFYX0lOVkVTVF9TSEFSRSA+IHNoYXJlKSB7CgoJCQkJUG90ZW50aWFsX0ludmVzdG9yIHBvdGVudGlhbF9pbnZlc3RvciA9IFBvdGVudGlhbF9JbnZlc3RvcnNbYmVuZWZpY2lhcnldOwoJCQkJcG90ZW50aWFsX2ludmVzdG9yLmNvaW5TZW50ID0gYmFja2VyLmNvaW5TZW50OwoJCQkJcG90ZW50aWFsX2ludmVzdG9yLndlaVJlY2VpdmVkID0gYmFja2VyLndlaVJlY2VpdmVkOyAvLyBVcGRhdGUgdGhlIHRvdGFsIHdlaSBjb2xsZWN0ZWQgZHVyaW5nIHRoZSBjcm93ZGZ1bmRpbmcgZm9yIHRoaXMgcG90ZW50aWFsIGludmVzdG9yCiAgICAgICAgICAgICAgICAvLyBhZGQgc2hhcmUgdG8gcG90ZW50aWFsX2ludmVzdG9yCgkJCQlpZiAocG90ZW50aWFsX2ludmVzdG9yLnByb2ZpdHNoYXJlID09IDAgKSB7CgkJCQkJdWludCBzdGFydHNoYXJlID0gcG90ZW50aWFsX2ludmVzdG9yLndlaVJlY2VpdmVkLm11bCgxMDAwMCkuZGl2KE1JTl9JTlZFU1RfQlVZKTsKCQkJCQlNQVhfSU5WRVNUX1NIQVJFID0gTUFYX0lOVkVTVF9TSEFSRS5zdWIoc3RhcnRzaGFyZSk7CgkJCQkJcG90ZW50aWFsX2ludmVzdG9yLnByb2ZpdHNoYXJlID0gcG90ZW50aWFsX2ludmVzdG9yLnByb2ZpdHNoYXJlLmFkZChzdGFydHNoYXJlKTsKCQkJCX0gZWxzZSB7CgkJCQkJTUFYX0lOVkVTVF9TSEFSRSA9IE1BWF9JTlZFU1RfU0hBUkUuc3ViKHNoYXJlKTsKCQkJCQlwb3RlbnRpYWxfaW52ZXN0b3IucHJvZml0c2hhcmUgPSBwb3RlbnRpYWxfaW52ZXN0b3IucHJvZml0c2hhcmUuYWRkKHNoYXJlKTsKCQkJCQlMb2dJbnZlc3RzaGFyZShtc2cuc2VuZGVyLHBvdGVudGlhbF9pbnZlc3Rvci5wcm9maXRzaGFyZSk7CgoJCQkJfQogICAgICAgICAgICB9CgogICAgICAgIH0KCgkJZXRoZXJSZWNlaXZlZCA9IGV0aGVyUmVjZWl2ZWQuYWRkKG1zZy52YWx1ZSk7IC8vIFVwZGF0ZSB0aGUgdG90YWwgd2VpIGNvbGxlY3RlZCBkdXJpbmcgdGhlIGNyb3dkZnVuZGluZwoJCWNvaW5TZW50VG9FdGhlciA9IGNvaW5TZW50VG9FdGhlci5hZGQoY29pblRvU2VuZCk7CgoJCS8vIFNlbmQgZXZlbnRzCgkJTG9nQ29pbnNFbWl0ZWQobXNnLnNlbmRlciAsY29pblRvU2VuZCk7CgkJTG9nUmVjZWl2ZWRFVEgoYmVuZWZpY2lhcnksIGV0aGVyUmVjZWl2ZWQpOwoJfQoKCgkvKgoJICpDb21wdXRlIHRoZSBEQVJGdG9rZW4gYm9udXMgYWNjb3JkaW5nIHRvIHRoZSBCVVltZW50IHBlcmlvZAoJICovCglmdW5jdGlvbiBib251cyh1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewoJCS8qCgkJCTI1JWluIHRoZSBmaXJzdCAxNSBkYXlzCgkJCTIwJSAxNiBkYXlzIDE4IGRheXMKCQkJMTUlIDE5IGRheXMgMjEgZGF5cwoJCQkxMCUgMjIgZGF5cyAyNCBkYXlzCgkJCTUlIGZyb20gMjUgZGF5cyB0byAyNyBkYXlzCgkJCTAlIGZyb20gMjggZGF5cyB0byA0MiBkYXlzCgoJCQkqLwoKCQlpZiAoYW1vdW50ID49ICBCSUdTRUxMICkgewoJCQkJYW1vdW50ID0gYW1vdW50LmFkZChhbW91bnQuZGl2KDEwKS5tdWwoMykpOwoJCX0vLyBib251cyAzMCUgdG8gYnV5aW5nICBvdmVyIDUwMDAwIERBUkYKCQlpZiAobm93IDwgc3RhcnRUaW1lLmFkZCgxNiBkYXlzKSkgcmV0dXJuIGFtb3VudC5hZGQoYW1vdW50LmRpdig0KSk7ICAgLy8gYm9udXMgMjUlCgkJaWYgKG5vdyA8IHN0YXJ0VGltZS5hZGQoMTggZGF5cykpIHJldHVybiBhbW91bnQuYWRkKGFtb3VudC5kaXYoNSkpOyAgIC8vIGJvbnVzIDIwJQoJCWlmIChub3cgPCBzdGFydFRpbWUuYWRkKDIyIGRheXMpKSByZXR1cm4gYW1vdW50LmFkZChhbW91bnQuZGl2KDIwKS5tdWwoMykpOyAgIC8vIGJvbnVzIDE1JQoJCWlmIChub3cgPCBzdGFydFRpbWUuYWRkKDI1IGRheXMpKSByZXR1cm4gYW1vdW50LmFkZChhbW91bnQuZGl2KDEwKSk7ICAgLy8gYm9udXMgMTAlCgkJaWYgKG5vdyA8IHN0YXJ0VGltZS5hZGQoMjggZGF5cykpIHJldHVybiBhbW91bnQuYWRkKGFtb3VudC5kaXYoMjApKTsgICAvLyBib251cyA1CgoKCQlyZXR1cm4gYW1vdW50OwoJfQoKLyoKICogRmluYWxpemUgdGhlIGNyb3dkc2FsZSwgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGUgcmVmdW5kIHBlcmlvZAoqLwoJZnVuY3Rpb24gZmluYWxpemUoKSBvbmx5T3duZXIgcHVibGljIHsKCgkJaWYgKG5vdyA8IGVuZFRpbWUpIHsgLy8gQ2Fubm90IGZpbmFsaXNlIGJlZm9yZSBDUk9XRFNBTEVfUEVSSU9EIG9yIGJlZm9yZSBzZWxsaW5nIGFsbCBjb2lucwoJCQlyZXF1aXJlIChjb2luU2VudFRvRXRoZXIgPT0gTUFYX0NBUCk7CgkJfQoKCQlyZXF1aXJlKCEoY29pblNlbnRUb0V0aGVyIDwgTUlOX0NBUCAmJiBub3cgPCBlbmRUaW1lICsgMTUgZGF5cykpOyAvLyBJZiBNSU5fQ0FQIGlzIG5vdCByZWFjaGVkIGRvbm9ycyBoYXZlIDE1ZGF5cyB0byBnZXQgcmVmdW5kIGJlZm9yZSB3ZSBjYW4gZmluYWxpc2UKCgkJcmVxdWlyZShtdWx0aXNpZ0V0aGVyLnNlbmQodGhpcy5iYWxhbmNlKSk7IC8vIE1vdmUgdGhlIHJlbWFpbmluZyBFdGhlciB0byB0aGUgbXVsdGlzaWcgYWRkcmVzcwoKCQl1aW50IHJlbWFpbnMgPSBjb2luLmJhbGFuY2VPZih0aGlzKTsKCQkvLyBObyBidXJuIGFsbCBvZiBteSBwcmVjaXNpb3Nzc3MhCgkJLy8gaWYgKHJlbWFpbnMgPiAwKSB7IC8vIEJ1cm4gdGhlIHJlc3Qgb2YgREFSRnRva2VucwoJCS8vCXJlcXVpcmUoY29pbi5idXJuKHJlbWFpbnMpKSA7CgkJLy99CgkJY3Jvd2RzYWxlQ2xvc2VkID0gdHJ1ZTsKCX0KCgkvKgoJKiBGYWlsc2FmZSBkcmFpbgoJKi8KCWZ1bmN0aW9uIGRyYWluKCkgb25seU93bmVyIHsKCQlyZXF1aXJlKG93bmVyLnNlbmQodGhpcy5iYWxhbmNlKSkgOwoJfQoKCS8qKgoJICogQWxsb3cgdG8gY2hhbmdlIHRoZSB0ZWFtIG11bHRpc2lnIGFkZHJlc3MgaW4gdGhlIGNhc2Ugb2YgZW1lcmdlbmN5LgoJICovCglmdW5jdGlvbiBzZXRNdWx0aXNpZyhhZGRyZXNzIGFkZHIpIG9ubHlPd25lciBwdWJsaWMgewoJCXJlcXVpcmUoYWRkciAhPSBhZGRyZXNzKDApKSA7CgkJbXVsdGlzaWdFdGhlciA9IGFkZHI7Cgl9CgoJLyoqCgkgKiBNYW51YWxseSBiYWNrIERBUkZ0b2tlbiBvd25lciBhZGRyZXNzLgoJICovCglmdW5jdGlvbiBiYWNrREFSRnRva2VuT3duZXIoKSBvbmx5T3duZXIgcHVibGljIHsKCQljb2luLnRyYW5zZmVyT3duZXJzaGlwKG93bmVyKTsKCX0KCgkvKioKCSAqIFRyYW5zZmVyIHJlbWFpbnMgdG8gb3duZXIgaW4gY2FzZSBpZiBpbXBvc3NpYmxlIHRvIGRvIG1pbiBCVVkKCSAqLwoJZnVuY3Rpb24gZ2V0UmVtYWluQ29pbnMoKSBvbmx5T3duZXIgcHVibGljIHsKCQl2YXIgcmVtYWlucyA9IE1BWF9DQVAgLSBjb2luU2VudFRvRXRoZXI7CgkJdWludCBtaW5Db2luc1RvU2VsbCA9IGJvbnVzKE1JTl9CVVlfRVRIRVIubXVsKENPSU5fUEVSX0VUSEVSKSAvICgxIGV0aGVyKSk7CgoJCXJlcXVpcmUoIShyZW1haW5zID4gbWluQ29pbnNUb1NlbGwpKTsKCgkJQmFja2VyIGJhY2tlciA9IGJhY2tlcnNbb3duZXJdOwoJCWNvaW4udHJhbnNmZXIob3duZXIsIHJlbWFpbnMpOyAvLyBUcmFuc2ZlciBEQVJGdG9rZW5zIHJpZ2h0IG5vdwoKCQliYWNrZXIuY29pblNlbnQgPSBiYWNrZXIuY29pblNlbnQuYWRkKHJlbWFpbnMpOwoKCiAgICAgICAgY29pblNlbnRUb0V0aGVyID0gY29pblNlbnRUb0V0aGVyLmFkZChyZW1haW5zKTsKCgkJLy8gU2VuZCBldmVudHMKCQlMb2dDb2luc0VtaXRlZCh0aGlzICxyZW1haW5zKTsKCQlMb2dSZWNlaXZlZEVUSChvd25lciwgZXRoZXJSZWNlaXZlZCk7Cgl9CgoKCS8qCiAgCSAqIFdoZW4gTUlOX0NBUCBpcyBub3QgcmVhY2g6CiAgCSAqIDEpIGJhY2tlciBjYWxsIHRoZSAiYXBwcm92ZSIgZnVuY3Rpb24gb2YgdGhlIERBUkZ0b2tlbiB0b2tlbiBjb250cmFjdCB3aXRoIHRoZSBhbW91bnQgb2YgYWxsIERBUkZ0b2tlbnMgdGhleSBnb3QgaW4gb3JkZXIgdG8gYmUgcmVmdW5kCiAgCSAqIDIpIGJhY2tlciBjYWxsIHRoZSAicmVmdW5kIiBmdW5jdGlvbiBvZiB0aGUgQ3Jvd2RzYWxlIGNvbnRyYWN0IHdpdGggdGhlIHNhbWUgYW1vdW50IG9mIERBUkZ0b2tlbnMKICAgCSAqIDMpIGJhY2tlciBjYWxsIHRoZSAid2l0aGRyYXdQYXltZW50cyIgZnVuY3Rpb24gb2YgdGhlIENyb3dkc2FsZSBjb250cmFjdCB0byBnZXQgYSByZWZ1bmQgaW4gRVRICiAgIAkgKi8KCWZ1bmN0aW9uIHJlZnVuZCh1aW50IF92YWx1ZSkgbWluQ2FwTm90UmVhY2hlZCBwdWJsaWMgewoKCQlyZXF1aXJlIChfdmFsdWUgPT0gYmFja2Vyc1ttc2cuc2VuZGVyXS5jb2luU2VudCkgOyAvLyBjb21wYXJlIHZhbHVlIGZyb20gYmFja2VyIGJhbGFuY2UKCgkJY29pbi50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgYWRkcmVzcyh0aGlzKSwgX3ZhbHVlKTsgLy8gZ2V0IHRoZSB0b2tlbiBiYWNrIHRvIHRoZSBjcm93ZHNhbGUgY29udHJhY3QKCQkvLyBObyBidXJuIGFsbCBvZiBteSBwcmVjaXNpb3Nzc3MhCgkJLy9yZXF1aXJlIChjb2luLmJ1cm4oX3ZhbHVlKSk7IC8vIHRva2VuIHNlbnQgZm9yIHJlZnVuZCBhcmUgYnVybnQKCgkJdWludCBFVEhUb1NlbmQgPSBiYWNrZXJzW21zZy5zZW5kZXJdLndlaVJlY2VpdmVkOwoJCWJhY2tlcnNbbXNnLnNlbmRlcl0ud2VpUmVjZWl2ZWQ9MDsKCgkJaWYgKEVUSFRvU2VuZCA+IDApIHsKCQkJYXN5bmNTZW5kKG1zZy5zZW5kZXIsIEVUSFRvU2VuZCk7IC8vIHB1bGwgcGF5bWVudCB0byBnZXQgcmVmdW5kIGluIEVUSAoJCX0KCX0KCn0KCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLiAKICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKY29udHJhY3QgREFSRnRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJEQVJGdG9rZW4iOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkRBUiI7CiAgdWludCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCgogIC8vIENvbnN0cnVjdG9yCiAgZnVuY3Rpb24gREFSRnRva2VuKCkgewogICAgICB0b3RhbFN1cHBseSA9IDg0MDAwMDAwIGV0aGVyOyAvLyB0byBtYWtlIHJpZ2h0IG51bWJlciAgODQgMDAwIDAwMAogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHRvdGFsU3VwcGx5OyAvLyBTZW5kIGFsbCB0b2tlbnMgdG8gb3duZXIKICB9CgogIC8qKgogICAqICBCdXJuIGF3YXkgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgREFSRnRva2VuIHRva2VucwogICAqLwogIGZ1bmN0aW9uIGJ1cm4odWludCBfdmFsdWUpIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDB4MCwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCn0='.
	

]
