Class {
	#name : #SRTd418Fcb33ae1a41BDC34D257A228Ea9CB7C8fd03,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd418Fcb33ae1a41BDC34D257A228Ea9CB7C8fd03 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoKICBBdXRob3I6IFZpY3RvciBNZXpyaW4gIDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJmMDg2OTk5Mzg0OWY4MmIwOWQ5NThhODI5OTllZGU5MzlmOWQiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+CiovCgoKLyogSW50ZXJmYWNlIG9mIHRoZSBFUkMyMjMgdG9rZW4gKi8KY29udHJhY3QgRVJDMjIzVG9rZW5JbnRlcmZhY2UgewogICAgZnVuY3Rpb24gbmFtZSgpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBfbmFtZSk7CiAgICBmdW5jdGlvbiBzeW1ib2woKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgX3N5bWJvbCk7CiAgICBmdW5jdGlvbiBkZWNpbWFscygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscyk7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX3N1cHBseSk7CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9iYWxhbmNlKTsKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIF9zdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9yZW1haW5pbmcpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBfc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9tZXRhZGF0YSkgcmV0dXJucyAoYm9vbCBfc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIF9zdWNjZXNzKTsKCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgYnl0ZXMgbWV0YWRhdGEpOwp9CgoKLyogSW50ZXJmYWNlIG9mIHRoZSBjb250cmFjdCB0aGF0IGlzIGdvaW5nIHRvIHJlY2VpdmUgRVJDMjIzIHRva2VucyAqLwpjb250cmFjdCBFUkMyMjNDb250cmFjdEludGVyZmFjZSB7CiAgICBmdW5jdGlvbiBlcmMyMjNGYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpewogICAgICAgIC8vIHRvIGF2b2lkIHdhcm5pbmdzIGR1cmluZyBjb21waWxhdGlvbgogICAgICAgIF9mcm9tID0gX2Zyb207CiAgICAgICAgX3ZhbHVlID0gX3ZhbHVlOwogICAgICAgIF9kYXRhID0gX2RhdGE7CiAgICAgICAgLy8gSW5jb21pbmcgdHJhbnNhY3Rpb24gY29kZSBoZXJlCiAgICAgICAgdGhyb3c7CiAgICB9Cn0KCgovKiBodHRwczovL2dpdGh1Yi5jb20vTHlra2VDaXR5L0V0aGVyZXVtQXBpRG90TmV0Q29yZS9ibG9iL21hc3Rlci9zcmMvQ29udHJhY3RCdWlsZGVyL2NvbnRyYWN0cy90b2tlbi9TYWZlTWF0aC5zb2wgKi8KY29udHJhY3QgU2FmZU1hdGggewogICAgdWludDI1NiBjb25zdGFudCBwdWJsaWMgTUFYX1VJTlQyNTYgPQogICAgMHhGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGOwoKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludDI1NiB4LCB1aW50MjU2IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgICAgIGlmICh4ID4gTUFYX1VJTlQyNTYgLSB5KSB0aHJvdzsKICAgICAgICByZXR1cm4geCArIHk7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZVN1Yih1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgaWYgKHggPCB5KSB0aHJvdzsKICAgICAgICByZXR1cm4geCAtIHk7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZU11bCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgaWYgKHkgPT0gMCkgcmV0dXJuIDA7CiAgICAgICAgaWYgKHggPiBNQVhfVUlOVDI1NiAvIHkpIHRocm93OwogICAgICAgIHJldHVybiB4ICogeTsKICAgIH0KfQoKCmNvbnRyYWN0IEVSQzIyM1Rva2VuIGlzIEVSQzIyM1Rva2VuSW50ZXJmYWNlLCBTYWZlTWF0aCB7CgogICAgLyoKICAgICAgU3RvcmFnZSBvZiB0aGUgY29udHJhY3QKICAgICovCgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dhbmNlczsKCiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKCiAgICAvKgogICAgICBHZXR0ZXJzCiAgICAqLwoKICAgIGZ1bmN0aW9uIG5hbWUoKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgX25hbWUpIHsKICAgICAgICByZXR1cm4gbmFtZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzeW1ib2woKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgX3N5bWJvbCkgewogICAgICAgIHJldHVybiBzeW1ib2w7CiAgICB9CgogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBjb25zdGFudCByZXR1cm5zICh1aW50OCBfZGVjaW1hbHMpIHsKICAgICAgICByZXR1cm4gZGVjaW1hbHM7CiAgICB9CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9zdXBwbHkpIHsKICAgICAgICByZXR1cm4gdG90YWxTdXBwbHk7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9iYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgoKICAgIC8qCiAgICAgIEFsbG93IHRvIHNwZW5kCiAgICAqLwoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2FuY2VzW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX3JlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2FuY2VzW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKCiAgICAvKgogICAgICBUcmFuc2ZlcgogICAgKi8KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpIHsKICAgICAgICBieXRlcyBtZW1vcnkgZW1wdHlNZXRhZGF0YTsKICAgICAgICBfX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBlbXB0eU1ldGFkYXRhKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9tZXRhZGF0YSkgcmV0dXJucyAoYm9vbCBfc3VjY2VzcykKICAgIHsKICAgICAgICBfX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfbWV0YWRhdGEpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfbWV0YWRhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpIHsKICAgICAgICBpZiAoYWxsb3dhbmNlc1tfZnJvbV1bbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHRocm93OwoKICAgICAgICBhbGxvd2FuY2VzW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYWxsb3dhbmNlc1tfZnJvbV1bbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICAgICAgYnl0ZXMgbWVtb3J5IGVtcHR5TWV0YWRhdGE7CiAgICAgICAgX190cmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUsIGVtcHR5TWV0YWRhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIF9fdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfbWV0YWRhdGEpIGludGVybmFsCiAgICB7CiAgICAgICAgaWYgKF9mcm9tID09IF90bykgdGhyb3c7CiAgICAgICAgaWYgKF92YWx1ZSA9PSAwKSB0aHJvdzsKICAgICAgICBpZiAoYmFsYW5jZU9mKF9mcm9tKSA8IF92YWx1ZSkgdGhyb3c7CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZU9mKF9mcm9tKSwgX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlT2YoX3RvKSwgX3ZhbHVlKTsKCiAgICAgICAgaWYgKGlzQ29udHJhY3QoX3RvKSkgewogICAgICAgICAgICBFUkMyMjNDb250cmFjdEludGVyZmFjZSByZWNlaXZlckNvbnRyYWN0ID0gRVJDMjIzQ29udHJhY3RJbnRlcmZhY2UoX3RvKTsKICAgICAgICAgICAgcmVjZWl2ZXJDb250cmFjdC5lcmMyMjNGYWxsYmFjayhfZnJvbSwgX3ZhbHVlLCBfbWV0YWRhdGEpOwogICAgICAgIH0KCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCgogICAgLyoKICAgICAgSGVscGVycwogICAgKi8KCiAgICAvLyBBc3NlbWJsZSB0aGUgZ2l2ZW4gYWRkcmVzcyBieXRlY29kZS4gSWYgYnl0ZWNvZGUgZXhpc3RzIHRoZW4gdGhlIF9hZGRyIGlzIGEgY29udHJhY3QuCiAgICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIGludGVybmFsIHJldHVybnMgKGJvb2wgX2lzQ29udHJhY3QpIHsKICAgICAgICBfYWRkciA9IF9hZGRyOyAvLyB0byBhdm9pZCB3YXJuaW5ncyBkdXJpbmcgY29tcGlsYXRpb24KCiAgICAgICAgdWludDI1NiBsZW5ndGg7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICAvL3JldHJpZXZlIHRoZSBzaXplIG9mIHRoZSBjb2RlIG9uIHRhcmdldCBhZGRyZXNzLCB0aGlzIG5lZWRzIGFzc2VtYmx5CiAgICAgICAgICAgIGxlbmd0aCA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChsZW5ndGggPiAwKTsKICAgIH0KfQoKCgovLyBFUkMyMjMgdG9rZW4gd2l0aCB0aGUgYWJpbGl0eSBmb3IgdGhlIG93bmVyIHRvIGJsb2NrIGFueSBhY2NvdW50CmNvbnRyYWN0IERBU1Rva2VuIGlzIEVSQzIyM1Rva2VuIHsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgYmxvY2tlZEFjY291bnRzOwogICAgYWRkcmVzcyBwdWJsaWMgc2VjcmV0YXJ5R2VuZXJhbDsKCgogICAgLy8gQ29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIERBU1Rva2VuKAogICAgICAgICAgICBzdHJpbmcgX25hbWUsCiAgICAgICAgICAgIHN0cmluZyBfc3ltYm9sLAogICAgICAgICAgICB1aW50OCBfZGVjaW1hbHMsCiAgICAgICAgICAgIHVpbnQyNTYgX3RvdGFsU3VwcGx5LAogICAgICAgICAgICBhZGRyZXNzIF9pbml0aWFsVG9rZW5zSG9sZGVyKSB7CiAgICAgICAgc2VjcmV0YXJ5R2VuZXJhbCA9IG1zZy5zZW5kZXI7CiAgICAgICAgbmFtZSA9IF9uYW1lOwogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICAgICAgZGVjaW1hbHMgPSBfZGVjaW1hbHM7CiAgICAgICAgdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHk7CiAgICAgICAgYmFsYW5jZXNbX2luaXRpYWxUb2tlbnNIb2xkZXJdID0gX3RvdGFsU3VwcGx5OwogICAgfQoKCiAgICBtb2RpZmllciBvbmx5U2VjcmV0YXJ5R2VuZXJhbCB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gc2VjcmV0YXJ5R2VuZXJhbCkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCgogICAgLy8gYmxvY2sgYWNjb3VudAogICAgZnVuY3Rpb24gYmxvY2tBY2NvdW50KGFkZHJlc3MgX2FjY291bnQpIG9ubHlTZWNyZXRhcnlHZW5lcmFsIHsKICAgICAgICBibG9ja2VkQWNjb3VudHNbX2FjY291bnRdID0gdHJ1ZTsKICAgIH0KCiAgICAvLyB1bmJsb2NrIGFjY291bnQKICAgIGZ1bmN0aW9uIHVuYmxvY2tBY2NvdW50KGFkZHJlc3MgX2FjY291bnQpIG9ubHlTZWNyZXRhcnlHZW5lcmFsIHsKICAgICAgICBibG9ja2VkQWNjb3VudHNbX2FjY291bnRdID0gZmFsc2U7CiAgICB9CgogICAgLy8gY2hlY2sgaXMgYWNjb3VudCBibG9ja2VkCiAgICBmdW5jdGlvbiBpc0FjY291bnRCbG9ja2VkKGFkZHJlc3MgX2FjY291bnQpIHJldHVybnMgKGJvb2wpewogICAgICAgIHJldHVybiBibG9ja2VkQWNjb3VudHNbX2FjY291bnRdOwogICAgfQoKICAgIC8vIG92ZXJyaWRlIHRyYW5zZmVyIG1ldGhvZHMgdG8gdGhyb3cgb24gYmxvY2tlZCBhY2NvdW50cwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIF9zdWNjZXNzKSB7CiAgICAgICAgaWYgKGJsb2NrZWRBY2NvdW50c1ttc2cuc2VuZGVyXSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9tZXRhZGF0YSkgcmV0dXJucyAoYm9vbCBfc3VjY2VzcykgewogICAgICAgIGlmIChibG9ja2VkQWNjb3VudHNbbXNnLnNlbmRlcl0pIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSwgX21ldGFkYXRhKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIF9zdWNjZXNzKSB7CiAgICAgICAgaWYgKGJsb2NrZWRBY2NvdW50c1tfZnJvbV0pIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KfQoKCgpjb250cmFjdCBBQkNUb2tlbiBpcyBFUkMyMjNUb2tlbiB7CiAgICAvLyBDb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gQUJDVG9rZW4oCiAgICAgICAgICAgIHN0cmluZyBfbmFtZSwKICAgICAgICAgICAgc3RyaW5nIF9zeW1ib2wsCiAgICAgICAgICAgIHVpbnQ4IF9kZWNpbWFscywKICAgICAgICAgICAgdWludDI1NiBfdG90YWxTdXBwbHksCiAgICAgICAgICAgIGFkZHJlc3MgX2luaXRpYWxUb2tlbnNIb2xkZXIpIHsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsKICAgICAgICB0b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseTsKICAgICAgICBiYWxhbmNlc1tfaW5pdGlhbFRva2Vuc0hvbGRlcl0gPSBfdG90YWxTdXBwbHk7CiAgICB9Cn0KCgovLyBDb250cmFjdCB3aXRoIHZvdGluZyBvbiBwcm9wb3NhbHMgYW5kIGV4ZWN1dGlvbiBvZiBwYXNzZWQgcHJvcG9zYWxzCmNvbnRyYWN0IERBUyBpcyBFUkMyMjNDb250cmFjdEludGVyZmFjZSB7CgogICAgLyogQ29udHJhY3QgVmFyaWFibGVzICovCgogICAgc3RyaW5nIG5hbWUgPSAiRGVjZW50cmFsaXplZCBBdXRvbm9tb3VzIFN0YXRlIjsKICAgIC8vIFNvdXJjZSBvZiBkZW1vY3JhY3kKICAgIERBU1Rva2VuIHB1YmxpYyBkYXNUb2tlbjsKICAgIEFCQ1Rva2VuIHB1YmxpYyBhYmNUb2tlbjsKICAgIC8vIERlbW9jcmFjeSBydWxlcwogICAgdWludDI1NiBwdWJsaWMgY29uZ3Jlc3NNZW1iZXJUaHJlc2hvbGQ7IC8vIFVzZXIgbXVzdCBoYXZlIG1vcmUgdGhhbiB0aGlzIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgaW5jbHVkZWQgaW50byBjb25ncmVzcwogICAgdWludDI1NiBwdWJsaWMgbWluaW11bVF1b3J1bTsgICAgICAgICAgIC8vIFRoZSBtaW5pbXVtIG51bWJlciBvZiB0b2tlbnMgdGhhdCBtdXN0IHBhcnRpY2lwYXRlIGluIGEgdm90ZSB0byBhY2hpZXZlIGEgcXVvcnVtCiAgICB1aW50MjU2IHB1YmxpYyBkZWJhdGluZ1BlcmlvZDsgICAgICAgICAgLy8gTWluIHRpbWUgdG8gdm90ZSBmb3IgYW4gcHJvcG9zYWwgW3NlY10KICAgIHVpbnQyNTYgcHVibGljIG1hcmdpbkZvck1ham9yaXR5OyAgICAgICAvLyBNaW4gc3VwZXJpb3JpdHkgb2Ygdm90ZXMgImZvciIgdG8gcGFzcyB0aGUgcHJvcG9zYWwgW251bWJlciBvZiB0b2tlbnNdCiAgICAvLyBQcm9wb3NhbHMKICAgIFByb3Bvc2FsW10gcHVibGljIHByb3Bvc2FsczsKICAgIHVpbnQyNTYgcHVibGljIHByb3Bvc2Fsc051bWJlciA9IDA7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQzMikgdG9rZW5zTG9ja3M7ICAgICAgICAgLy8gY29uZ3Jlc3MgbWVtYmVyID0+IG51bWJlciBvZiBsb2NrcyAocmVjdXJzaXZlIG11dGV4KQoKICAgIC8qIENvbnRyYWN0IEV2ZW50cyAqLwogICAgZXZlbnQgUHJvcG9zYWxBZGRlZEV2ZW50KHVpbnQyNTYgcHJvcG9zYWxJRCwgYWRkcmVzcyBiZW5lZmljaWFyeSwgdWludDI1NiBldGhlckFtb3VudCwgc3RyaW5nIGRlc2NyaXB0aW9uKTsKICAgIGV2ZW50IFZvdGVkRXZlbnQodWludDI1NiBwcm9wb3NhbElELCBhZGRyZXNzIHZvdGVyLCBib29sIGluU3VwcG9ydCwgdWludDI1NiB2b3RlclRva2Vucywgc3RyaW5nIGp1c3RpZmljYXRpb25UZXh0KTsKICAgIGV2ZW50IFByb3Bvc2FsVGFsbGllZEV2ZW50KHVpbnQyNTYgcHJvcG9zYWxJRCwgYm9vbCBxdW9ydW0sIGJvb2wgcmVzdWx0KTsKICAgIGV2ZW50IFByb3Bvc2FsRXhlY3V0ZWRFdmVudCh1aW50MjU2IHByb3Bvc2FsSUQpOwogICAgZXZlbnQgUnVsZXNDaGFuZ2VkRXZlbnQodWludDI1NiBjb25ncmVzc01lbWJlclRocmVzaG9sZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgbWluaW11bVF1b3J1bSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgZGViYXRpbmdQZXJpb2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2IG1hcmdpbkZvck1ham9yaXR5KTsKCiAgICAvKiBDb250cmFjdCBTdHJ1Y3R1cmVzICovCiAgICBlbnVtIFByb3Bvc2FsU3RhdGUge1Byb3Bvc2VkLCBOb1F1b3J1bSwgUmVqZWN0ZWQsIFBhc3NlZCwgRXhlY3V0ZWR9CgogICAgc3RydWN0IFByb3Bvc2FsIHsKICAgICAgICAvKiBQcm9wb3NhbCBjb250ZW50ICovCiAgICAgICAgYWRkcmVzcyBiZW5lZmljaWFyeTsKICAgICAgICB1aW50MjU2IGV0aGVyQW1vdW50OwogICAgICAgIHN0cmluZyBkZXNjcmlwdGlvbjsKICAgICAgICBieXRlczMyIHByb3Bvc2FsSGFzaDsKCiAgICAgICAgLyogUHJvcG9zYWwgc3RhdGUgKi8KICAgICAgICBQcm9wb3NhbFN0YXRlIHN0YXRlOwoKICAgICAgICAvKiBWb3Rpbmcgc3RhdGUgKi8KICAgICAgICB1aW50MjU2IHZvdGluZ0RlYWRsaW5lOwogICAgICAgIFZvdGVbXSB2b3RlczsKICAgICAgICB1aW50MjU2IHZvdGVzTnVtYmVyOwogICAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgdm90ZWQ7CiAgICB9CgogICAgc3RydWN0IFZvdGUgewogICAgICAgIGFkZHJlc3Mgdm90ZXI7CiAgICAgICAgYm9vbCBpblN1cHBvcnQ7CiAgICAgICAgdWludDI1NiB2b3RlclRva2VuczsKICAgICAgICBzdHJpbmcganVzdGlmaWNhdGlvblRleHQ7CiAgICB9CgogICAgLyogbW9kaWZpZXIgdGhhdCBhbGxvd3Mgb25seSBjb25ncmVzcyBtZW1iZXJzIHRvIHZvdGUgYW5kIGNyZWF0ZSBuZXcgcHJvcG9zYWxzICovCiAgICBtb2RpZmllciBvbmx5Q29uZ3Jlc3NNZW1iZXJzIHsKICAgICAgICBpZiAoZGFzVG9rZW4uYmFsYW5jZU9mKG1zZy5zZW5kZXIpIDwgY29uZ3Jlc3NNZW1iZXJUaHJlc2hvbGQpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgLyogQ29uc3RydWN0b3IgKi8KICAgIGZ1bmN0aW9uIERBUygKICAgICAgICB1aW50MjU2IF9jb25ncmVzc01lbWJlclRocmVzaG9sZCwKICAgICAgICB1aW50MjU2IF9taW5pbXVtUXVvcnVtLAogICAgICAgIHVpbnQyNTYgX2RlYmF0aW5nUGVyaW9kLAogICAgICAgIHVpbnQyNTYgX21hcmdpbkZvck1ham9yaXR5LAogICAgICAgIGFkZHJlc3MgX2NvbmdyZXNzTGVhZGVyCiAgICApIHBheWFibGUgewogICAgICAgIC8vIGNyZWF0ZSBhIHNvdXJjZSBvZiBkZW1vY3JhY3kKICAgICAgICBkYXNUb2tlbiA9IG5ldyBEQVNUb2tlbignREEkJywgJ0RBJCcsIDE4LCAxMDAwMDAwMDAwICogKDEwICoqIDE4KSwgX2NvbmdyZXNzTGVhZGVyKTsKICAgICAgICBhYmNUb2tlbiA9IG5ldyBBQkNUb2tlbignQWxwaGFiaXQnLCAnQUJDJywgMTgsIDIxMDAwMDAwMCAqICgxMCAqKiAxOCksIF9jb25ncmVzc0xlYWRlcik7CgogICAgICAgIC8vIHNldHVwIHJ1bGVzCiAgICAgICAgY29uZ3Jlc3NNZW1iZXJUaHJlc2hvbGQgPSBfY29uZ3Jlc3NNZW1iZXJUaHJlc2hvbGQ7CiAgICAgICAgbWluaW11bVF1b3J1bSA9IF9taW5pbXVtUXVvcnVtOwogICAgICAgIGRlYmF0aW5nUGVyaW9kID0gX2RlYmF0aW5nUGVyaW9kOwogICAgICAgIG1hcmdpbkZvck1ham9yaXR5ID0gX21hcmdpbkZvck1ham9yaXR5OwoKICAgICAgICBSdWxlc0NoYW5nZWRFdmVudChjb25ncmVzc01lbWJlclRocmVzaG9sZCwgbWluaW11bVF1b3J1bSwgZGViYXRpbmdQZXJpb2QsIG1hcmdpbkZvck1ham9yaXR5KTsKICAgIH0KCiAgICAvLyBibGFuayBmYWxsYmFjayBmdW5jdGlvbnMgdG8gcmVjZWl2ZSBFVEggYW5kIHRva2VucwogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsgfQoKICAgIGZ1bmN0aW9uIGVyYzIyM0ZhbGxiYWNrKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSl7CiAgICAgICAgLy8gdG8gYXZvaWQgd2FybmluZ3MgZHVyaW5nIGNvbXBpbGF0aW9uCiAgICAgICAgX2Zyb20gPSBfZnJvbTsKICAgICAgICBfdmFsdWUgPSBfdmFsdWU7CiAgICAgICAgX2RhdGEgPSBfZGF0YTsKICAgIH0KCgogICAgLyogUHJvcG9zYWwtcmVsYXRlZCBmdW5jdGlvbnMgKi8KCiAgICAvLyBjYWxjdWxhdGUgaGFzaCBvZiBhbiBwcm9wb3NhbAogICAgZnVuY3Rpb24gZ2V0UHJvcG9zYWxIYXNoKAogICAgICAgIGFkZHJlc3MgX2JlbmVmaWNpYXJ5LAogICAgICAgIHVpbnQyNTYgX2V0aGVyQW1vdW50LAogICAgICAgIGJ5dGVzIF90cmFuc2FjdGlvbkJ5dGVjb2RlCiAgICApCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zIChieXRlczMyKQogICAgewogICAgICAgIHJldHVybiBzaGEzKF9iZW5lZmljaWFyeSwgX2V0aGVyQW1vdW50LCBfdHJhbnNhY3Rpb25CeXRlY29kZSk7CiAgICB9CgogICAgLy8gYmxvY2sgdG9rZW5zIG9mIGFuIHZvdGVyCiAgICBmdW5jdGlvbiBibG9ja1Rva2VucyhhZGRyZXNzIF92b3RlcikgaW50ZXJuYWwgewogICAgICAgIGlmICh0b2tlbnNMb2Nrc1tfdm90ZXJdICsgMSA8IHRva2Vuc0xvY2tzW192b3Rlcl0pIHRocm93OwoKICAgICAgICB0b2tlbnNMb2Nrc1tfdm90ZXJdICs9IDE7CiAgICAgICAgaWYgKHRva2Vuc0xvY2tzW192b3Rlcl0gPT0gMSkgewogICAgICAgICAgICBkYXNUb2tlbi5ibG9ja0FjY291bnQoX3ZvdGVyKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gdW5ibG9jayB0b2tlbnMgb2YgYW4gdm90ZXIKICAgIGZ1bmN0aW9uIHVuYmxvY2tUb2tlbnMoYWRkcmVzcyBfdm90ZXIpIGludGVybmFsIHsKICAgICAgICBpZiAodG9rZW5zTG9ja3NbX3ZvdGVyXSA8PSAwKSB0aHJvdzsKCiAgICAgICAgdG9rZW5zTG9ja3NbX3ZvdGVyXSAtPSAxOwogICAgICAgIGlmICh0b2tlbnNMb2Nrc1tfdm90ZXJdID09IDApIHsKICAgICAgICAgICAgZGFzVG9rZW4udW5ibG9ja0FjY291bnQoX3ZvdGVyKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gY3JlYXRlIG5ldyBwcm9wb3NhbAogICAgZnVuY3Rpb24gY3JlYXRlUHJvcG9zYWwoCiAgICAgICAgYWRkcmVzcyBfYmVuZWZpY2lhcnksCiAgICAgICAgdWludDI1NiBfZXRoZXJBbW91bnQsCiAgICAgICAgc3RyaW5nIF9kZXNjcmlwdGlvbiwKICAgICAgICBieXRlcyBfdHJhbnNhY3Rpb25CeXRlY29kZQogICAgKQogICAgICAgIG9ubHlDb25ncmVzc01lbWJlcnMKICAgICAgICByZXR1cm5zICh1aW50MjU2IF9wcm9wb3NhbElEKQogICAgewogICAgICAgIF9wcm9wb3NhbElEID0gcHJvcG9zYWxzLmxlbmd0aDsKICAgICAgICBwcm9wb3NhbHMubGVuZ3RoICs9IDE7CiAgICAgICAgcHJvcG9zYWxzTnVtYmVyID0gX3Byb3Bvc2FsSUQgKyAxOwoKICAgICAgICBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdLmJlbmVmaWNpYXJ5ID0gX2JlbmVmaWNpYXJ5OwogICAgICAgIHByb3Bvc2Fsc1tfcHJvcG9zYWxJRF0uZXRoZXJBbW91bnQgPSBfZXRoZXJBbW91bnQ7CiAgICAgICAgcHJvcG9zYWxzW19wcm9wb3NhbElEXS5kZXNjcmlwdGlvbiA9IF9kZXNjcmlwdGlvbjsKICAgICAgICBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdLnByb3Bvc2FsSGFzaCA9IGdldFByb3Bvc2FsSGFzaChfYmVuZWZpY2lhcnksIF9ldGhlckFtb3VudCwgX3RyYW5zYWN0aW9uQnl0ZWNvZGUpOwogICAgICAgIHByb3Bvc2Fsc1tfcHJvcG9zYWxJRF0uc3RhdGUgPSBQcm9wb3NhbFN0YXRlLlByb3Bvc2VkOwogICAgICAgIHByb3Bvc2Fsc1tfcHJvcG9zYWxJRF0udm90aW5nRGVhZGxpbmUgPSBub3cgKyBkZWJhdGluZ1BlcmlvZCAqIDEgc2Vjb25kczsKICAgICAgICBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdLnZvdGVzTnVtYmVyID0gMDsKCiAgICAgICAgUHJvcG9zYWxBZGRlZEV2ZW50KF9wcm9wb3NhbElELCBfYmVuZWZpY2lhcnksIF9ldGhlckFtb3VudCwgX2Rlc2NyaXB0aW9uKTsKCiAgICAgICAgcmV0dXJuIF9wcm9wb3NhbElEOwogICAgfQoKICAgIC8vIHZvdGUgZm9yIGFuIHByb3Bvc2FsCiAgICBmdW5jdGlvbiB2b3RlKAogICAgICAgIHVpbnQyNTYgX3Byb3Bvc2FsSUQsCiAgICAgICAgYm9vbCBfaW5TdXBwb3J0LAogICAgICAgIHN0cmluZyBfanVzdGlmaWNhdGlvblRleHQKICAgICkKICAgICAgICBvbmx5Q29uZ3Jlc3NNZW1iZXJzCiAgICB7CiAgICAgICAgUHJvcG9zYWwgcCA9IHByb3Bvc2Fsc1tfcHJvcG9zYWxJRF07CgogICAgICAgIGlmIChwLnN0YXRlICE9IFByb3Bvc2FsU3RhdGUuUHJvcG9zZWQpIHRocm93OwogICAgICAgIGlmIChwLnZvdGVkW21zZy5zZW5kZXJdID09IHRydWUpIHRocm93OwoKICAgICAgICB2YXIgdm90ZXJUb2tlbnMgPSBkYXNUb2tlbi5iYWxhbmNlT2YobXNnLnNlbmRlcik7CiAgICAgICAgYmxvY2tUb2tlbnMobXNnLnNlbmRlcik7CgogICAgICAgIHAudm90ZWRbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgICAgIHAudm90ZXMucHVzaChWb3RlKG1zZy5zZW5kZXIsIF9pblN1cHBvcnQsIHZvdGVyVG9rZW5zLCBfanVzdGlmaWNhdGlvblRleHQpKTsKICAgICAgICBwLnZvdGVzTnVtYmVyICs9IDE7CgogICAgICAgIFZvdGVkRXZlbnQoX3Byb3Bvc2FsSUQsIG1zZy5zZW5kZXIsIF9pblN1cHBvcnQsIHZvdGVyVG9rZW5zLCBfanVzdGlmaWNhdGlvblRleHQpOwogICAgfQoKICAgIC8vIGZpbmlzaCB2b3Rpbmcgb24gYW4gcHJvcG9zYWwKICAgIGZ1bmN0aW9uIGZpbmlzaFByb3Bvc2FsVm90aW5nKHVpbnQyNTYgX3Byb3Bvc2FsSUQpIG9ubHlDb25ncmVzc01lbWJlcnMgewogICAgICAgIFByb3Bvc2FsIHAgPSBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdOwoKICAgICAgICBpZiAobm93IDwgcC52b3RpbmdEZWFkbGluZSkgdGhyb3c7CiAgICAgICAgaWYgKHAuc3RhdGUgIT0gUHJvcG9zYWxTdGF0ZS5Qcm9wb3NlZCkgdGhyb3c7CgogICAgICAgIHZhciBfdm90ZXNOdW1iZXIgPSBwLnZvdGVzLmxlbmd0aDsKICAgICAgICB1aW50MjU2IHRva2Vuc0ZvciA9IDA7CiAgICAgICAgdWludDI1NiB0b2tlbnNBZ2FpbnN0ID0gMDsKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfdm90ZXNOdW1iZXI7IGkrKykgewogICAgICAgICAgICBpZiAocC52b3Rlc1tpXS5pblN1cHBvcnQpIHsKICAgICAgICAgICAgICAgIHRva2Vuc0ZvciArPSBwLnZvdGVzW2ldLnZvdGVyVG9rZW5zOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdG9rZW5zQWdhaW5zdCArPSBwLnZvdGVzW2ldLnZvdGVyVG9rZW5zOwogICAgICAgICAgICB9CgogICAgICAgICAgICB1bmJsb2NrVG9rZW5zKHAudm90ZXNbaV0udm90ZXIpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCh0b2tlbnNGb3IgKyB0b2tlbnNBZ2FpbnN0KSA8IG1pbmltdW1RdW9ydW0pIHsKICAgICAgICAgICAgcC5zdGF0ZSA9IFByb3Bvc2FsU3RhdGUuTm9RdW9ydW07CiAgICAgICAgICAgIFByb3Bvc2FsVGFsbGllZEV2ZW50KF9wcm9wb3NhbElELCBmYWxzZSwgZmFsc2UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICgodG9rZW5zRm9yIC0gdG9rZW5zQWdhaW5zdCkgPCBtYXJnaW5Gb3JNYWpvcml0eSkgewogICAgICAgICAgICBwLnN0YXRlID0gUHJvcG9zYWxTdGF0ZS5SZWplY3RlZDsKICAgICAgICAgICAgUHJvcG9zYWxUYWxsaWVkRXZlbnQoX3Byb3Bvc2FsSUQsIHRydWUsIGZhbHNlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBwLnN0YXRlID0gUHJvcG9zYWxTdGF0ZS5QYXNzZWQ7CiAgICAgICAgUHJvcG9zYWxUYWxsaWVkRXZlbnQoX3Byb3Bvc2FsSUQsIHRydWUsIHRydWUpOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBleGVjdXRlIHBhc3NlZCBwcm9wb3NhbAogICAgZnVuY3Rpb24gZXhlY3V0ZVByb3Bvc2FsKHVpbnQyNTYgX3Byb3Bvc2FsSUQsIGJ5dGVzIF90cmFuc2FjdGlvbkJ5dGVjb2RlKSBvbmx5Q29uZ3Jlc3NNZW1iZXJzIHsKICAgICAgICBQcm9wb3NhbCBwID0gcHJvcG9zYWxzW19wcm9wb3NhbElEXTsKCiAgICAgICAgaWYgKHAuc3RhdGUgIT0gUHJvcG9zYWxTdGF0ZS5QYXNzZWQpIHRocm93OwoKICAgICAgICBwLnN0YXRlID0gUHJvcG9zYWxTdGF0ZS5FeGVjdXRlZDsKICAgICAgICBpZiAoIXAuYmVuZWZpY2lhcnkuY2FsbC52YWx1ZShwLmV0aGVyQW1vdW50ICogMSBldGhlcikoX3RyYW5zYWN0aW9uQnl0ZWNvZGUpKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KCiAgICAgICAgUHJvcG9zYWxFeGVjdXRlZEV2ZW50KF9wcm9wb3NhbElEKTsKICAgIH0KfQ=='.
	

]
