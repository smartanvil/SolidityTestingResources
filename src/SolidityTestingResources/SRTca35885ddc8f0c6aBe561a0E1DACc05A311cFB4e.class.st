Class {
	#name : #SRTca35885ddc8f0c6aBe561a0E1DACc05A311cFB4e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTca35885ddc8f0c6aBe561a0E1DACc05A311cFB4e >> base64 [
	^ 'Ly9GaWxlOiBjb250cmFjdHMvY29tbW9uL0NvbnRyb2xsZWQuc29sCnByYWdtYSBzb2xpZGl0eSBeMC40LjIxOwoKY29udHJhY3QgQ29udHJvbGxlZCB7CiAgICBtb2RpZmllciBvbmx5Q29udHJvbGxlciB7IHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cm9sbGVyKTsgXzsgfQoKICAgIGFkZHJlc3MgcHVibGljIGNvbnRyb2xsZXI7CgogICAgZnVuY3Rpb24gQ29udHJvbGxlZCgpIHB1YmxpYyB7IGNvbnRyb2xsZXIgPSBtc2cuc2VuZGVyO30KCiAgICBmdW5jdGlvbiBjaGFuZ2VDb250cm9sbGVyKGFkZHJlc3MgX25ld0NvbnRyb2xsZXIpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICAgICAgY29udHJvbGxlciA9IF9uZXdDb250cm9sbGVyOwogICAgfQp9CgovL0ZpbGU6IGNvbnRyYWN0cy9jb21tb24vVG9rZW5Db250cm9sbGVyLnNvbApwcmFnbWEgc29saWRpdHkgXjAuNC4yMTsKCmNvbnRyYWN0IFRva2VuQ29udHJvbGxlciB7CiAgICBmdW5jdGlvbiBwcm94eVBheW1lbnQoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMoYm9vbCk7CgogICAgZnVuY3Rpb24gb25UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyhib29sKTsKCiAgICBmdW5jdGlvbiBvbkFwcHJvdmUoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2Ftb3VudCkgcHVibGljIHJldHVybnMoYm9vbCk7Cn0KCi8vRmlsZTogY29udHJhY3RzL2NvbW1vbi9BcHByb3ZlQW5kQ2FsbEZhbGxCYWNrLnNvbApwcmFnbWEgc29saWRpdHkgXjAuNC4yMTsKCmNvbnRyYWN0IEFwcHJvdmVBbmRDYWxsRmFsbEJhY2sgewogICAgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgZnJvbSwgdWludDI1NiBfYW1vdW50LCBhZGRyZXNzIF90b2tlbiwgYnl0ZXMgX2RhdGEpIHB1YmxpYzsKfQoKLy9GaWxlOiBjb250cmFjdHMvVG9rZW4uc29sCnByYWdtYSBzb2xpZGl0eSBeMC40LjIxOwoKCgoKCgpjb250cmFjdCBUb2tlbiBpcyBDb250cm9sbGVkIHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiU2hpbmVDb2luIjsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDk7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJTSElORSI7CgogICAgc3RydWN0ICBDaGVja3BvaW50IHsKICAgICAgICB1aW50MTI4IGZyb21CbG9jazsKICAgICAgICB1aW50MTI4IHZhbHVlOwogICAgfQoKICAgIHVpbnQgcHVibGljIGNyZWF0aW9uQmxvY2s7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBDaGVja3BvaW50W10pIGJhbGFuY2VzOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICBDaGVja3BvaW50W10gdG90YWxTdXBwbHlIaXN0b3J5OwoKICAgIGJvb2wgcHVibGljIHRyYW5zZmVyc0VuYWJsZWQgPSB0cnVlOwoKICAgIGFkZHJlc3MgcHVibGljIGZyb3plblJlc2VydmVUZWFtV2FsbGV0OwoKICAgIHVpbnQgcHVibGljIHVuZnJlZXplVGVhbVdhbGxldEJsb2NrOwoKICAgIGZ1bmN0aW9uIFRva2VuKGFkZHJlc3MgX2Zyb3plblJlc2VydmVUZWFtV2FsbGV0KSBwdWJsaWMgewogICAgICAgIGNyZWF0aW9uQmxvY2sgPSBibG9jay5udW1iZXI7CiAgICAgICAgZnJvemVuUmVzZXJ2ZVRlYW1XYWxsZXQgPSBfZnJvemVuUmVzZXJ2ZVRlYW1XYWxsZXQ7CiAgICAgICAgdW5mcmVlemVUZWFtV2FsbGV0QmxvY2sgPSBibG9jay5udW1iZXIgKyAoKDM2NSAqIDI0ICogMzYwMCkgLyAxNSk7IC8vIH4gMzk2IGRheXMKICAgIH0KCgovLy8vLy8vLy8vLy8vLy8vLy8vCi8vIEVSQzIwIE1ldGhvZHMKLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKHRyYW5zZmVyc0VuYWJsZWQpOwoKICAgICAgICBpZiAoYWRkcmVzcyhtc2cuc2VuZGVyKSA9PSBmcm96ZW5SZXNlcnZlVGVhbVdhbGxldCkgewogICAgICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+IHVuZnJlZXplVGVhbVdhbGxldEJsb2NrKTsKICAgICAgICB9CgogICAgICAgIGRvVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNvbnRyb2xsZXIpIHsKICAgICAgICAgICAgcmVxdWlyZSh0cmFuc2ZlcnNFbmFibGVkKTsKCiAgICAgICAgICAgIHJlcXVpcmUoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCk7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7CiAgICAgICAgfQogICAgICAgIGRvVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGRvVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgaW50ZXJuYWwgewoKICAgICAgICAgICBpZiAoX2Ftb3VudCA8PSAwKSB7CiAgICAgICAgICAgICAgIGVtaXQgVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICB9CgogICAgICAgICAgIHJlcXVpcmUoKF90byAhPSAwKSAmJiAoX3RvICE9IGFkZHJlc3ModGhpcykpKTsKCiAgICAgICAgICAgdWludDI1NiBwcmV2aW91c0JhbGFuY2VGcm9tID0gYmFsYW5jZU9mQXQoX2Zyb20sIGJsb2NrLm51bWJlcik7CgogICAgICAgICAgIHJlcXVpcmUocHJldmlvdXNCYWxhbmNlRnJvbSA+PSBfYW1vdW50KTsKCiAgICAgICAgICAgdXBkYXRlVmFsdWVBdE5vdyhiYWxhbmNlc1tfZnJvbV0sIHByZXZpb3VzQmFsYW5jZUZyb20gLSBfYW1vdW50KTsKCiAgICAgICAgICAgdWludDI1NiBwcmV2aW91c0JhbGFuY2VUbyA9IGJhbGFuY2VPZkF0KF90bywgYmxvY2subnVtYmVyKTsKICAgICAgICAgICByZXF1aXJlKHByZXZpb3VzQmFsYW5jZVRvICsgX2Ftb3VudCA+PSBwcmV2aW91c0JhbGFuY2VUbyk7CiAgICAgICAgICAgdXBkYXRlVmFsdWVBdE5vdyhiYWxhbmNlc1tfdG9dLCBwcmV2aW91c0JhbGFuY2VUbyArIF9hbW91bnQpOwoKICAgICAgICAgICBlbWl0IFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwoKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZU9mQXQoX293bmVyLCBibG9jay5udW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSh0cmFuc2ZlcnNFbmFibGVkKTsKCiAgICAgICAgcmVxdWlyZSgoX2Ftb3VudCA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgICAgICBpZiAoaXNDb250cmFjdChjb250cm9sbGVyKSkgewogICAgICAgICAgICByZXF1aXJlKFRva2VuQ29udHJvbGxlcihjb250cm9sbGVyKS5vbkFwcHJvdmUobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpKTsKICAgICAgICB9CgogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX2Ftb3VudDsKICAgICAgICBlbWl0IEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCwgYnl0ZXMgX2V4dHJhRGF0YQogICAgKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShhcHByb3ZlKF9zcGVuZGVyLCBfYW1vdW50KSk7CgogICAgICAgIEFwcHJvdmVBbmRDYWxsRmFsbEJhY2soX3NwZW5kZXIpLnJlY2VpdmVBcHByb3ZhbCgKICAgICAgICAgICAgbXNnLnNlbmRlciwKICAgICAgICAgICAgX2Ftb3VudCwKICAgICAgICAgICAgdGhpcywKICAgICAgICAgICAgX2V4dHJhRGF0YQogICAgICAgICk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdG90YWxTdXBwbHlBdChibG9jay5udW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZkF0KGFkZHJlc3MgX293bmVyLCB1aW50IF9ibG9ja051bWJlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKCiAgICAgICAgaWYgKChiYWxhbmNlc1tfb3duZXJdLmxlbmd0aCA9PSAwKQogICAgICAgICAgICB8fCAoYmFsYW5jZXNbX293bmVyXVswXS5mcm9tQmxvY2sgPiBfYmxvY2tOdW1iZXIpKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBnZXRWYWx1ZUF0KGJhbGFuY2VzW19vd25lcl0sIF9ibG9ja051bWJlcik7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5QXQodWludCBfYmxvY2tOdW1iZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKCiAgICAgICAgaWYgKCh0b3RhbFN1cHBseUhpc3RvcnkubGVuZ3RoID09IDApCiAgICAgICAgICAgIHx8ICh0b3RhbFN1cHBseUhpc3RvcnlbMF0uZnJvbUJsb2NrID4gX2Jsb2NrTnVtYmVyKSkgewogICAgICAgICAgICByZXR1cm4gMDsKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGdldFZhbHVlQXQodG90YWxTdXBwbHlIaXN0b3J5LCBfYmxvY2tOdW1iZXIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZW5lcmF0ZVRva2VucyhhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSBwdWJsaWMgb25seUNvbnRyb2xsZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHVpbnQgY3VyVG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseSgpOwogICAgICAgIHJlcXVpcmUoY3VyVG90YWxTdXBwbHkgKyBfYW1vdW50ID49IGN1clRvdGFsU3VwcGx5KTsgLy8gQ2hlY2sgZm9yIG92ZXJmbG93CiAgICAgICAgdWludCBwcmV2aW91c0JhbGFuY2VUbyA9IGJhbGFuY2VPZihfb3duZXIpOwogICAgICAgIHJlcXVpcmUocHJldmlvdXNCYWxhbmNlVG8gKyBfYW1vdW50ID49IHByZXZpb3VzQmFsYW5jZVRvKTsgLy8gQ2hlY2sgZm9yIG92ZXJmbG93CiAgICAgICAgdXBkYXRlVmFsdWVBdE5vdyh0b3RhbFN1cHBseUhpc3RvcnksIGN1clRvdGFsU3VwcGx5ICsgX2Ftb3VudCk7CiAgICAgICAgdXBkYXRlVmFsdWVBdE5vdyhiYWxhbmNlc1tfb3duZXJdLCBwcmV2aW91c0JhbGFuY2VUbyArIF9hbW91bnQpOwogICAgICAgIGVtaXQgVHJhbnNmZXIoMCwgX293bmVyLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZXN0cm95VG9rZW5zKGFkZHJlc3MgX293bmVyLCB1aW50IF9hbW91bnQpIG9ubHlDb250cm9sbGVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgdWludCBjdXJUb3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5KCk7CiAgICAgICAgcmVxdWlyZShjdXJUb3RhbFN1cHBseSA+PSBfYW1vdW50KTsKICAgICAgICB1aW50IHByZXZpb3VzQmFsYW5jZUZyb20gPSBiYWxhbmNlT2YoX293bmVyKTsKICAgICAgICByZXF1aXJlKHByZXZpb3VzQmFsYW5jZUZyb20gPj0gX2Ftb3VudCk7CiAgICAgICAgdXBkYXRlVmFsdWVBdE5vdyh0b3RhbFN1cHBseUhpc3RvcnksIGN1clRvdGFsU3VwcGx5IC0gX2Ftb3VudCk7CiAgICAgICAgdXBkYXRlVmFsdWVBdE5vdyhiYWxhbmNlc1tfb3duZXJdLCBwcmV2aW91c0JhbGFuY2VGcm9tIC0gX2Ftb3VudCk7CiAgICAgICAgZW1pdCBUcmFuc2Zlcihfb3duZXIsIDAsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGVuYWJsZVRyYW5zZmVycyhib29sIF90cmFuc2ZlcnNFbmFibGVkKSBwdWJsaWMgb25seUNvbnRyb2xsZXIgewogICAgICAgIHRyYW5zZmVyc0VuYWJsZWQgPSBfdHJhbnNmZXJzRW5hYmxlZDsKICAgIH0KCgogICAgZnVuY3Rpb24gZ2V0VmFsdWVBdChDaGVja3BvaW50W10gc3RvcmFnZSBjaGVja3BvaW50cywgdWludCBfYmxvY2spIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBpZiAoY2hlY2twb2ludHMubGVuZ3RoID09IDApIHJldHVybiAwOwoKICAgICAgICBpZiAoX2Jsb2NrID49IGNoZWNrcG9pbnRzW2NoZWNrcG9pbnRzLmxlbmd0aC0xXS5mcm9tQmxvY2spCiAgICAgICAgICAgIHJldHVybiBjaGVja3BvaW50c1tjaGVja3BvaW50cy5sZW5ndGgtMV0udmFsdWU7CiAgICAgICAgaWYgKF9ibG9jayA8IGNoZWNrcG9pbnRzWzBdLmZyb21CbG9jaykgcmV0dXJuIDA7CgogICAgICAgIHVpbnQgbWluID0gMDsKICAgICAgICB1aW50IG1heCA9IGNoZWNrcG9pbnRzLmxlbmd0aC0xOwogICAgICAgIHdoaWxlIChtYXggPiBtaW4pIHsKICAgICAgICAgICAgdWludCBtaWQgPSAobWF4ICsgbWluICsgMSkvIDI7CiAgICAgICAgICAgIGlmIChjaGVja3BvaW50c1ttaWRdLmZyb21CbG9jazw9X2Jsb2NrKSB7CiAgICAgICAgICAgICAgICBtaW4gPSBtaWQ7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBtYXggPSBtaWQtMTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gY2hlY2twb2ludHNbbWluXS52YWx1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVWYWx1ZUF0Tm93KENoZWNrcG9pbnRbXSBzdG9yYWdlIGNoZWNrcG9pbnRzLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgIHsKICAgICAgICBpZiAoKGNoZWNrcG9pbnRzLmxlbmd0aCA9PSAwKQogICAgICAgIHx8IChjaGVja3BvaW50c1tjaGVja3BvaW50cy5sZW5ndGggLTFdLmZyb21CbG9jayA8IGJsb2NrLm51bWJlcikpIHsKICAgICAgICAgICAgICAgQ2hlY2twb2ludCBzdG9yYWdlIG5ld0NoZWNrUG9pbnQgPSBjaGVja3BvaW50c1sgY2hlY2twb2ludHMubGVuZ3RoKysgXTsKICAgICAgICAgICAgICAgbmV3Q2hlY2tQb2ludC5mcm9tQmxvY2sgPSAgdWludDEyOChibG9jay5udW1iZXIpOwogICAgICAgICAgICAgICBuZXdDaGVja1BvaW50LnZhbHVlID0gdWludDEyOChfdmFsdWUpOwogICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgIENoZWNrcG9pbnQgc3RvcmFnZSBvbGRDaGVja1BvaW50ID0gY2hlY2twb2ludHNbY2hlY2twb2ludHMubGVuZ3RoLTFdOwogICAgICAgICAgICAgICBvbGRDaGVja1BvaW50LnZhbHVlID0gdWludDEyOChfdmFsdWUpOwogICAgICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMoYm9vbCkgewogICAgICAgIHVpbnQgc2l6ZTsKICAgICAgICBpZiAoX2FkZHIgPT0gMCkgcmV0dXJuIGZhbHNlOwogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNpemU+MDsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW4odWludCBhLCB1aW50IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKGlzQ29udHJhY3QoY29udHJvbGxlcikpOwogICAgICAgIHJlcXVpcmUoVG9rZW5Db250cm9sbGVyKGNvbnRyb2xsZXIpLnByb3h5UGF5bWVudC52YWx1ZShtc2cudmFsdWUpKG1zZy5zZW5kZXIpKTsKICAgIH0KCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX2Ftb3VudCk7CiAgICBldmVudCBBcHByb3ZhbCgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgX293bmVyLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwKICAgICAgICB1aW50MjU2IF9hbW91bnQKICAgICAgICApOwoKfQovL0ZpbGU6IC4vY29udHJhY3RzL1ByZUNyb3dkRnVuZGVyLnNvbApwcmFnbWEgc29saWRpdHkgXjAuNC4yMTsKCgoKCmNvbnRyYWN0IFByZUNyb3dkRnVuZGVyIGlzIENvbnRyb2xsZWQgewogICAgYWRkcmVzcyBwdWJsaWMgY3JlYXRvcjsKICAgIGFkZHJlc3MgcHVibGljIGZ1bmRSZWNpcGllbnQ7CiAgICB1aW50IHB1YmxpYyBjdXJyZW50QmFsYW5jZTsKICAgIHVpbnQgcHVibGljIHRva2Vuc0lzc3VlZDsKICAgIHVpbnQgcHVibGljIGNhcFRva2VuQW1vdW50OwogICAgdWludCBwdWJsaWMgdG9rZW5FeGNoYW5nZVJhdGU7CiAgICBUb2tlbiBwdWJsaWMgZXhjaGFuZ2VUb2tlbjsKICAgIGVudW0gU3RhdGUgewogICAgICAgIFdhaXQsCiAgICAgICAgRnVuZHJhaXNpbmcsCiAgICAgICAgU3VjY2Vzc2Z1bCwKICAgICAgICBDbG9zZWQKICAgIH0KICAgIFN0YXRlIHB1YmxpYyBzdGF0ZSA9IFN0YXRlLldhaXQ7CgogICAgLy8gRXZlbnRzCiAgICBldmVudCBHb2FsUmVhY2hlZChhZGRyZXNzIGZ1bmRSZWNpcGllbnQsIHVpbnQgYW1vdW50UmFpc2VkKTsKICAgIGV2ZW50IEZ1bmRUcmFuc2ZlcihhZGRyZXNzIGJhY2tlciwgdWludCBhbW91bnQsIGJvb2wgaXNDb250cmlidXRpb24pOwogICAgZXZlbnQgRnJvemVuRnVuZHMoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJvemVuKTsKICAgIGV2ZW50IExvZ0Z1bmRpbmdSZWNlaXZlZChhZGRyZXNzIGFkZHIsIHVpbnQgYW1vdW50LCB1aW50IGN1cnJlbnRUb3RhbCk7CgogICAgLy8gTWFwcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIGJhbGFuY2VPZjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHJpdmF0ZSBmcm96ZW5BY2NvdW50OwoKICAgIC8vIE1vZGlmaWVycwogICAgbW9kaWZpZXIgaW5TdGF0ZShTdGF0ZSBfc3RhdGUpIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IF9zdGF0ZSk7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIGFjY291bnROb3RGcm96ZW4oKSB7CiAgICAgICAgcmVxdWlyZSghKGZyb3plbkFjY291bnRbbXNnLnNlbmRlcl0gPT0gdHJ1ZSkpOwogICAgICAgIF87CiAgICB9CiAgICBtb2RpZmllciBtaW5JbnZlc3RtZW50KCkgewogICAgICAgIC8vIFVzZXIgaGFzIHRvIHNlbmQgYXQgbGVhc3QgMC4wMSBFdGgKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSAxMCAqKiAxNik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gUHJlQ3Jvd2RGdW5kZXIoYWRkcmVzcyBfZnVuZFJlY2lwaWVudCwgVG9rZW4gX2FkZHJlc3NPZkV4Y2hhbmdlVG9rZW4pIHB1YmxpYyB7CiAgICAgICAgY3JlYXRvciA9IG1zZy5zZW5kZXI7CiAgICAgICAgZnVuZFJlY2lwaWVudCA9IF9mdW5kUmVjaXBpZW50OwogICAgICAgIGNhcFRva2VuQW1vdW50ID0gMTAwMDAwMDAgKiAxMCAqKiA5OwogICAgICAgIHN0YXRlID0gU3RhdGUuV2FpdDsKICAgICAgICBjdXJyZW50QmFsYW5jZSA9IDA7CiAgICAgICAgdG9rZW5zSXNzdWVkID0gMDsKICAgICAgICB0b2tlbkV4Y2hhbmdlUmF0ZSA9IDEwMDAgKiAxMCAqKiA5OwogICAgICAgIGV4Y2hhbmdlVG9rZW4gPSBUb2tlbihfYWRkcmVzc09mRXhjaGFuZ2VUb2tlbik7CiAgICB9CgogICAgZnVuY3Rpb24gc3RhcnRGdW5kcmFpc2luZygpIHB1YmxpYyBpblN0YXRlKFN0YXRlLldhaXQpIG9ubHlDb250cm9sbGVyIHsKICAgICAgICBzdGF0ZSA9IFN0YXRlLkZ1bmRyYWlzaW5nOwogICAgICAgIHRva2Vuc0lzc3VlZCA9IGV4Y2hhbmdlVG9rZW4udG90YWxTdXBwbHkoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBlbmRGdW5kcmFpc2luZygpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5GdW5kcmFpc2luZyB8fCBzdGF0ZSA9PSBTdGF0ZS5TdWNjZXNzZnVsKTsKICAgICAgICBmdW5kUmVjaXBpZW50LnRyYW5zZmVyKGN1cnJlbnRCYWxhbmNlKTsKICAgICAgICBjdXJyZW50QmFsYW5jZSA9IDA7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5DbG9zZWQ7CiAgICAgICAgZXhjaGFuZ2VUb2tlbi5jaGFuZ2VDb250cm9sbGVyKGNvbnRyb2xsZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZyZWV6ZUFjY291bnQoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJlZXplKSBwdWJsaWMgb25seUNvbnRyb2xsZXIgewogICAgICAgIGZyb3plbkFjY291bnRbdGFyZ2V0XSA9IGZyZWV6ZTsKICAgICAgICBlbWl0IEZyb3plbkZ1bmRzKHRhcmdldCwgZnJlZXplKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRFeGNoYW5nZVJhdGUodWludCBhbW91bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHRva2VuRXhjaGFuZ2VSYXRlICogYW1vdW50IC8gMSBldGhlcjsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnZlc3RtZW50KCkgcHVibGljIGluU3RhdGUoU3RhdGUuRnVuZHJhaXNpbmcpIGFjY291bnROb3RGcm96ZW4gbWluSW52ZXN0bWVudCBwYXlhYmxlIHJldHVybnMgKHVpbnQpICB7CiAgICAgICAgdWludCBhbW91bnQgPSBtc2cudmFsdWU7CgogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSArPSBhbW91bnQ7CiAgICAgICAgY3VycmVudEJhbGFuY2UgKz0gYW1vdW50OwoKICAgICAgICB1aW50IHRva2VuQW1vdW50ID0gZ2V0RXhjaGFuZ2VSYXRlKGFtb3VudCk7CiAgICAgICAgZXhjaGFuZ2VUb2tlbi5nZW5lcmF0ZVRva2Vucyhtc2cuc2VuZGVyLCB0b2tlbkFtb3VudCk7CiAgICAgICAgdG9rZW5zSXNzdWVkICs9IHRva2VuQW1vdW50OwoKICAgICAgICBlbWl0IEZ1bmRUcmFuc2Zlcihtc2cuc2VuZGVyLCBhbW91bnQsIHRydWUpOwogICAgICAgIGVtaXQgTG9nRnVuZGluZ1JlY2VpdmVkKG1zZy5zZW5kZXIsIHRva2VuQW1vdW50LCB0b2tlbnNJc3N1ZWQpOwoKICAgICAgICBpZiAodG9rZW5zSXNzdWVkID49IGNhcFRva2VuQW1vdW50KSB7CiAgICAgICAgICAgIHN0YXRlID0gU3RhdGUuU3VjY2Vzc2Z1bDsKICAgICAgICAgICAgZW1pdCBHb2FsUmVhY2hlZChmdW5kUmVjaXBpZW50LCBjdXJyZW50QmFsYW5jZSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYmFsYW5jZU9mW21zZy5zZW5kZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZUNvbnRyYWN0KCkgcHVibGljIGluU3RhdGUoU3RhdGUuQ2xvc2VkKSBvbmx5Q29udHJvbGxlciB7CiAgICAgICAgc2VsZmRlc3RydWN0KG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uKCkgaW5TdGF0ZShTdGF0ZS5GdW5kcmFpc2luZykgcHVibGljIGFjY291bnROb3RGcm96ZW4gbWluSW52ZXN0bWVudCBwYXlhYmxlIHsKICAgICAgICBpbnZlc3RtZW50KCk7CiAgICB9Cgp9'.
	

]
