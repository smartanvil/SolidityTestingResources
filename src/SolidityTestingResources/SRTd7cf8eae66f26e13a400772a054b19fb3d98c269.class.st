Class {
	#name : #SRTd7cf8eae66f26e13a400772a054b19fb3d98c269,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd7cf8eae66f26e13a400772a054b19fb3d98c269 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovKioKICoKICogQGF1dGhvciAgPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJmMTlmOTQ4Njg1ODY5ODgyODViMTgxODM5ZTg1OWU5ZjljOTA5ODlkZGY5MjllOWMiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgogKgogKiBWZXJzaW9uIEUKICoKICogT3ZlcnZpZXc6CiAqIFRoaXMgY29udHJhY3QgaW1wbGltZW50cyBhIGJsaW5kIGF1Y3Rpb24gZm9yIGJ1cm5hYmxlIHRva2Vucy4gRWFjaCBzZWNyZXQgYmlkIGNvbnNpc3RzCiAqIG9mIGEgaGFzaGVkIGJpZC10dXBsZSwgKGBwcmljZWAsIGBxdWFudGl0eWAsIGBzYWx0YCksIHdoZXJlIHByaWNlIGlzIHRoZSBtYXhpbXVtIGFtb3VudAogKiBvZiBldGhlciAoaW4gd2VpKSBhIHVzZXIgaXMgd2lsbGluZyB0byBwYXkgcGVyIHRva2VuLCBxdWFudGl0eSBpcyB0aGUgbnVtYmVyIG9mIHRva2VucwogKiB0aGUgdXNlciB3YW50cyB0byBidXksIGFuZCBzYWx0IGlzIGFuIGFyYml0cmFyeSB2YWx1ZS4gVG9nZXRoZXIgd2l0aCB0aGUgaGFzaGVkIGJpZC10dXBsZSwKICogdGhlIHVzZXIgaW5jbHVkZXMgYW4gZW5jcnlwdGVkIGJpZCB0dXBsZSwgdXNpbmcgdGhlIHB1YmxpYyBrZXkgb2YgdGhlIHBhcnR5IHJ1bm5pbmcgdGhlCiAqIGF1Y3Rpb24sIGFuZCBvZiBjb3Vyc2UgYSBkZXBvc2l0IHN1ZmZpY2llbnQgdG8gcGF5IGZvciB0aGUgYmlkLgogKgogKiBBdCB0aGUgZW5kIG9mIHRoZSBiaWRkaW5nIHBlcmlvZCwgdGhlIHBhcnR5IHJ1bm5pbmcgdGhlIGF1Y3Rpb24gc2V0cyBhICdzdHJpa2UgcHJpY2UnLAogKiB0aGVyZWJ5IHNpZ25hbGluZyB0aGUgc3RhcnQgb2YgdGhlIHNhbGUgcGVyaW9kLiBEdXJpbmcgdGhpcyBwZXJpb2QgYWxsIGJpZGRlcnMgbXVzdAogKiBleGVjdXRlIHRoZWlyIGJpZHMuIFRvIGV4ZWN1dGUgYSBiaWQgYSB1c2VyIHJldmVhbHMgdGhlaXIgYmlkLXR1cGxlLiBBbGwgYmlkcyB3aXRoIGEKICogcHJpY2UgYXQgbGVhc3QgYXMgaGlnaCBhcyB0aGUgc3RyaWtlIHByaWNlIGFyZSBmaWxsZWQsIGFuZCBhbGwgYmlkcyB1bmRlciB0aGUgc3RyaWtlCiAqIHByaWNlIGFyZSByZXR1cm5lZC4gQmlkcyB0aGF0IGFyZSBleGFjdGx5IGVxdWFsIHRvIHRoZSBzdHJpa2UgcHJpY2UgYXJlIHBhcnRpYWxseSBmaWxsZWQsCiAqIHNvIHRoYXQgdGhlIG1heGltdW0gbnVtYmVyIG9mIHRva2VucyBnZW5lcmF0ZWQgZG9lcyBub3QgZXhjZWVkIHRoZSB0b3RhbCBzdXBwbHkuCiAqCiAqIFN0cmlrZSBQcmljZToKICogVGhlIHN0cmlrZSBwcmljZSBpcyBjYWxjdWxhdGVkIG9mZmNoYWluIGJ5IHRoZSBwYXJ0eSBydW5uaW5nIHRoZSBhdWN0aW9uLiBXaGVuIGVhY2gKICogc2VjcmV0IGJpZCBpcyBzdWJtaXR0ZWQgYW4gZXZlbnQgaXMgZ2VuZXJhdGVkLCB3aGljaCBpbmNsdWRlcyB0aGUgc2VuZGVyIGFkZHJlc3MsIGhhc2hlZAogKiBiaWQtdHVwbGUsIGVuY3J5cHRlZCBiaWQtdHVwbGUgYW5kIGRlcG9zaXQgYW1vdW50LiB0aGUgcGFydHkgcnVubmluZyB0aGUgYXVjdGlvbiBkZWNyeXB0cwogKiB0aGUgZW5jcnlwdGVkIGJpZC10dXBsZSwgYW5kIHJlZ2VuZXJhdGVzIHRoZSBoYXNoLiBJZiB0aGUgcmVnZW5lcmF0ZWQgaGFzaCBkb2VzIG5vdCBtYXRjaAogKiB0aGUgaGFzaCB0aGF0IHdhcyBzdWJtaXR0ZWQgd2l0aCB0aGUgc2VjcmV0IGJpZCwgb3IgaWYgdGhlIGRlc3Bvc2l0ZWQgZnVuZHMgYXJlIG5vdAogKiBzdWZmaWNpZW50IHRvIGNvdmVyIHRoZSBiaWQsIHRoZW4gdGhlIGJpZCBpcyBkaXNxdWFsaWZpZWQuIChwcmVzdW1hYmx5IGRpc3F1YWxpZnlpbmcKICogaW52YWxpZCBiaWRzIHdpbGwgYmUgY2hlYXBlciB0aGFuIHZhbGlkYXRpbmcgYWxsIHRoZSB2YWxpZCBiaWRzKS4KICoKICogVGhlIGF1Y3Rpb24gaXMgc3RydWN0dXJlZCB3aXRoIGEgZml4ZWQgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zLiBTbyB0byByYWlzZSB0aGUgbWF4aW11bQogKiBmdW5kcyB0aGUgYmlkcyBhcmUgc29ydGVkLCBoaWdoZXN0IHRvIGxvd2VzdC4gU3RhcnRpbmcgdGhlIHN0cmlrZS1wcmljZSBhdCB0aGUgaGlnaGVzdAogKiBiaWQsIGl0IGlzIHJlZHVjZWQsIGJpZCBieSBiaWQsIHRvIGluY2x1ZGUgbW9yZSBiaWRzLiBUaGUgcXVhbnRpdHkgb2YgdG9rZW5zIHNvbGQgaW5jcmVhc2VzCiAqIGVhY2ggdGltZSBhIG5ldyBiaWQgaXMgaW5jbHVkZWQ7IGJ1dCB0aGUgdGhlIHRva2VuIHByaWNlIGlzIHJlZHVjZWQuIEF0IGVhY2ggc3RlcCB0aGUKICogdG90YWwgcmFpc2UgKHRva2VuLXByaWNlIHRpbWVzIHF1YW50aXR5LW9mLXRva2Vucy1zb2xkKSBpcyBjb21wdXRlZC4gQW5kIHRoZSBwcm9jZXNzIGVuZHMKICogd2hlbmV2ZXIgdGhlIHRvdGFsIHJhaXNlIGRlY3JlYXNlcywgb3Igd2hlbiB0aGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyBleGNlZWRzIHRoZSB0b3RhbAogKiBzdXBwbHkuCiAqCiAqIE5vdGVzOgogKiBUaGUgYHNhbHRgIGlzIGluY2x1ZGVkIGluIHRoZSBiaWQtdHVwbGUgdG8gZGlzY291cmFnZSBicnV0ZS1mb3JjZSBhdHRhY2tzIG9uIHRoZSBpbnB1dHMKICogdG8gdGhlIHNlY3JldCBiaWQuCiAqCiAqIEEgdXNlciBjYW5ub3Qgc3VibWl0IG11bHRpcGxlIGJpZHMgZnJvbSB0aGUgc2FtZSBFdGhlciBhY2NvdW50LgogKgogKiBVc2VycyBhcmUgcmVxdWlyZWQgdG8gZXhlY3V0ZSB0aGVpciBiaWRzLiBJZiBhIHVzZXIgZmFpbHMgdG8gZXhlY3V0ZSB0aGVpciBiaWQgYmVmb3JlIHRoZQogKiBlbmQgb2YgdGhlIHNhbGUgcGVyaW9kLCB0aGVuIHRoZXkgZm9yZmVpdCBoYWxmIG9mIHRoZWlyIGRlcG9zaXQsIGFuZCByZWNlaXZlIG5vIHRva2Vucy4KICogVGhpcyBydWxlIHdhcyBhZG9wdGVkIHRvIHByZXZlbnQgdXNlcnMgZnJvbSBwbGFjaW5nIHNldmVyYWwgYmlkcywgYW5kIG9ubHkgcmV2ZWFsaW5nIG9uZQogKiBvZiB0aGVtLiBXaXRoIHRoaXMgcnVsZSwgYWxsIGJpZHMgbXVzdCBiZSBleGVjdXRlZC4KICoKICovCi8vIFRva2VuIHN0YW5kYXJkIEFQSQovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKCmNvbnRyYWN0IGlFUkMyMFRva2VuIHsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgc3VwcGx5KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoIGFkZHJlc3Mgd2hvICkgY29uc3RhbnQgcmV0dXJucyAodWludCB2YWx1ZSk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKCBhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIgKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZyk7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gYXBwcm92ZSggYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlICkgcmV0dXJucyAoYm9vbCBvayk7CgogIGV2ZW50IFRyYW5zZmVyKCBhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbCggYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCmNvbnRyYWN0IGlCdXJuYWJsZVRva2VuIGlzIGlFUkMyMFRva2VuIHsKICBmdW5jdGlvbiBidXJuVG9rZW5zKHVpbnQgX2J1cm5Db3VudCkgcHVibGljOwogIGZ1bmN0aW9uIHVuUGFpZEJ1cm5Ub2tlbnModWludCBfYnVybkNvdW50KSBwdWJsaWM7Cn0KCi8qCiAgICBPdmVyZmxvdyBwcm90ZWN0ZWQgbWF0aCBmdW5jdGlvbnMKKi8KY29udHJhY3QgU2FmZU1hdGggewogICAgLyoqCiAgICAgICAgY29uc3RydWN0b3IKICAgICovCiAgICBmdW5jdGlvbiBTYWZlTWF0aCgpIHsKICAgIH0KCiAgICAvKioKICAgICAgICBAZGV2IHJldHVybnMgdGhlIHN1bSBvZiBfeCBhbmQgX3ksIGFzc2VydHMgaWYgdGhlIGNhbGN1bGF0aW9uIG92ZXJmbG93cwoKICAgICAgICBAcGFyYW0gX3ggICB2YWx1ZSAxCiAgICAgICAgQHBhcmFtIF95ICAgdmFsdWUgMgoKICAgICAgICBAcmV0dXJuIHN1bQogICAgKi8KICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludDI1NiBfeCwgdWludDI1NiBfeSkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgeiA9IF94ICsgX3k7CiAgICAgICAgYXNzZXJ0KHogPj0gX3gpOwogICAgICAgIHJldHVybiB6OwogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgcmV0dXJucyB0aGUgZGlmZmVyZW5jZSBvZiBfeCBtaW51cyBfeSwgYXNzZXJ0cyBpZiB0aGUgc3VidHJhY3Rpb24gcmVzdWx0cyBpbiBhIG5lZ2F0aXZlIG51bWJlcgoKICAgICAgICBAcGFyYW0gX3ggICBtaW51ZW5kCiAgICAgICAgQHBhcmFtIF95ICAgc3VidHJhaGVuZAoKICAgICAgICBAcmV0dXJuIGRpZmZlcmVuY2UKICAgICovCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQyNTYgX3gsIHVpbnQyNTYgX3kpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoX3ggPj0gX3kpOwogICAgICAgIHJldHVybiBfeCAtIF95OwogICAgfQoKICAgIC8qKgogICAgICAgIEBkZXYgcmV0dXJucyB0aGUgcHJvZHVjdCBvZiBtdWx0aXBseWluZyBfeCBieSBfeSwgYXNzZXJ0cyBpZiB0aGUgY2FsY3VsYXRpb24gb3ZlcmZsb3dzCgogICAgICAgIEBwYXJhbSBfeCAgIGZhY3RvciAxCiAgICAgICAgQHBhcmFtIF95ICAgZmFjdG9yIDIKCiAgICAgICAgQHJldHVybiBwcm9kdWN0CiAgICAqLwogICAgZnVuY3Rpb24gc2FmZU11bCh1aW50MjU2IF94LCB1aW50MjU2IF95KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0gX3ggKiBfeTsKICAgICAgICBhc3NlcnQoX3ggPT0gMCB8fCB6IC8gX3ggPT0gX3kpOwogICAgICAgIHJldHVybiB6OwogICAgfQp9CgoKY29udHJhY3QgVG9rZW5BdWN0aW9uIGlzIFNhZmVNYXRoIHsKCiAgc3RydWN0IFNlY3JldEJpZCB7CiAgICBib29sIGRpc3F1YWxpZmllZDsgICAgIC8vIGZsYWcgc2V0IGlmIGhhc2ggZG9lcyBub3QgbWF0Y2ggZW5jcnlwdGVkIGJpZAogICAgdWludCBkZXBvc2l0OyAgICAgICAgICAvLyBmdW5kcyBkZXBvc2l0ZWQgYnkgYmlkZGVyCiAgICB1aW50IHJlZnVuZDsgICAgICAgICAgIC8vIGZ1bmRzIHRvIGJlIHJldHVybmVkIHRvIGJpZGRlcgogICAgdWludCB0b2tlbnM7ICAgICAgICAgICAvLyBzdHJ1Y3R1cmUgaGFzIGJlZW4gYWxsb2NhdGVkCiAgICBieXRlczMyIGhhc2g7ICAgICAgICAgIC8vIGhhc2ggb2YgcHJpY2UsIHF1YW50aXR5LCBzZWNyZXQKICB9CiAgdWludCBjb25zdGFudCAgQVVDVElPTl9TVEFSVF9FVkVOVCA9IDB4MDE7CiAgdWludCBjb25zdGFudCAgQVVDVElPTl9FTkRfRVZFTlQgICA9IDB4MDI7CiAgdWludCBjb25zdGFudCAgU0FMRV9TVEFSVF9FVkVOVCAgICA9IDB4MDQ7CiAgdWludCBjb25zdGFudCAgU0FMRV9FTkRfRVZFTlQgICAgICA9IDB4MDg7CgogIGV2ZW50IFNlY3JldEJpZEV2ZW50KHVpbnQgaW5kZXhlZCBiYXRjaCwgYWRkcmVzcyBpbmRleGVkIGJpZGRlciwgdWludCBkZXBvc2l0LCBieXRlczMyIGhhc2gsIGJ5dGVzIG1lc3NhZ2UpOwogIGV2ZW50IEV4ZWN1dGVFdmVudCh1aW50IGluZGV4ZWQgYmF0Y2gsIGFkZHJlc3MgaW5kZXhlZCBiaWRkZXIsIHVpbnQgY29zdCwgdWludCByZWZ1bmQpOwogIGV2ZW50IEV4cGlyZUV2ZW50KHVpbnQgaW5kZXhlZCBiYXRjaCwgYWRkcmVzcyBpbmRleGVkIGJpZGRlciwgdWludCBjb3N0LCB1aW50IHJlZnVuZCk7CiAgZXZlbnQgQml6YXJyZUV2ZW50KGFkZHJlc3MgaW5kZXhlZCBhZGRyLCBzdHJpbmcgbWVzc2FnZSwgdWludCB2YWwpOwogIGV2ZW50IFN0YXRlQ2hhbmdlRXZlbnQodWludCBtYXNrKTsKICAvLwogIC8vZXZlbnQgTWVzc2FnZUV2ZW50KHN0cmluZyBtZXNzYWdlKTsKICAvL2V2ZW50IE1lc3NhZ2VVaW50RXZlbnQoc3RyaW5nIG1lc3NhZ2UsIHVpbnQgdmFsKTsKICAvL2V2ZW50IE1lc3NhZ2VBZGRyRXZlbnQoc3RyaW5nIG1lc3NhZ2UsIGFkZHJlc3MgdmFsKTsKICAvL2V2ZW50IE1lc3NhZ2VCeXRlczMyRXZlbnQoc3RyaW5nIG1lc3NhZ2UsIGJ5dGVzMzIgdmFsKTsKCiAgYm9vbCBwdWJsaWMgaXNMb2NrZWQ7CiAgdWludCBwdWJsaWMgc3RhdGVNYXNrOwogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIGFkZHJlc3MgcHVibGljIGRldmVsb3BlcnM7CiAgYWRkcmVzcyBwdWJsaWMgdW5kZXJ3cml0ZXI7CiAgaUJ1cm5hYmxlVG9rZW4gcHVibGljIHRva2VuOwogIHVpbnQgcHVibGljIHByb2NlZWRzOwogIHVpbnQgcHVibGljIHN0cmlrZVByaWNlOwogIHVpbnQgcHVibGljIHN0cmlrZVByaWNlUGN0WDEwOwogIHVpbnQgcHVibGljIGRldmVsb3BlclJlc2VydmU7CiAgdWludCBwdWJsaWMgZGV2ZWxvcGVyUGN0WDEwOwogIHVpbnQgcHVibGljIHB1cmNoYXNlZENvdW50OwogIHVpbnQgcHVibGljIHNlY3JldEJpZENvdW50OwogIHVpbnQgcHVibGljIGV4ZWN1dGVkQ291bnQ7CiAgdWludCBwdWJsaWMgZXhwaXJlZENvdW50OwogIHVpbnQgcHVibGljIHNhbGVEdXJhdGlvbjsKICB1aW50IHB1YmxpYyBhdWN0aW9uU3RhcnQ7CiAgdWludCBwdWJsaWMgYXVjdGlvbkVuZDsKICB1aW50IHB1YmxpYyBzYWxlRW5kOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gU2VjcmV0QmlkKSBwdWJsaWMgc2VjcmV0QmlkczsKCiAgLy8KICAvL3R1bmFibGVzCiAgdWludCBiYXRjaFNpemUgPSA0OwogIHVpbnQgY29udHJhY3RTZW5kR2FzID0gMTAwMDAwOwoKICBtb2RpZmllciBvd25lck9ubHkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBtb2RpZmllciB1bmxvY2tlZE9ubHkgewogICAgcmVxdWlyZSghaXNMb2NrZWQpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIGR1cmluZ0F1Y3Rpb24gewogICAgcmVxdWlyZSgoc3RhdGVNYXNrICYgKEFVQ1RJT05fU1RBUlRfRVZFTlQgfCBBVUNUSU9OX0VORF9FVkVOVCkpID09IEFVQ1RJT05fU1RBUlRfRVZFTlQpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIGFmdGVyQXVjdGlvbiB7CiAgICByZXF1aXJlKChzdGF0ZU1hc2sgJiBBVUNUSU9OX0VORF9FVkVOVCkgIT0gMCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgZHVyaW5nU2FsZSB7CiAgICByZXF1aXJlKChzdGF0ZU1hc2sgJiAoU0FMRV9TVEFSVF9FVkVOVCB8IFNBTEVfRU5EX0VWRU5UKSkgPT0gU0FMRV9TVEFSVF9FVkVOVCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgYWZ0ZXJTYWxlIHsKICAgIHJlcXVpcmUoKHN0YXRlTWFzayAmIFNBTEVfRU5EX0VWRU5UKSAhPSAwKTsKICAgIF87CiAgfQoKCiAgLy8KICAvL2NvbnN0cnVjdG9yCiAgLy8KICBmdW5jdGlvbiBUb2tlbkF1Y3Rpb24oKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBmdW5jdGlvbiBsb2NrKCkgcHVibGljIG93bmVyT25seSB7CiAgICBpc0xvY2tlZCA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiBzZXRBdWN0aW9uUGFybXMoaUJ1cm5hYmxlVG9rZW4gX3Rva2VuLCBhZGRyZXNzIF91bmRlcndyaXRlciwgdWludCBfYXVjdGlvblN0YXJ0LCB1aW50IF9hdWN0aW9uRHVyYXRpb24sIHVpbnQgX3NhbGVEdXJhdGlvbikgcHVibGljIG93bmVyT25seSB1bmxvY2tlZE9ubHkgewogICAgdG9rZW4gPSBfdG9rZW47CiAgICB1bmRlcndyaXRlciA9IF91bmRlcndyaXRlcjsKICAgIGF1Y3Rpb25TdGFydCA9IF9hdWN0aW9uU3RhcnQ7CiAgICBhdWN0aW9uRW5kID0gc2FmZUFkZChfYXVjdGlvblN0YXJ0LCBfYXVjdGlvbkR1cmF0aW9uKTsKICAgIHNhbGVEdXJhdGlvbiA9IF9zYWxlRHVyYXRpb247CiAgICBpZiAoc3RhdGVNYXNrICE9IDApIHsKICAgICAgLy9oYW5keSBmb3IgZGVidWcKICAgICAgc3RhdGVNYXNrID0gMDsKICAgICAgc3RyaWtlUHJpY2UgPSAwOwogICAgICBwdXJjaGFzZWRDb3VudCA9IDA7CiAgICAgIGhvdXNlS2VlcCgpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcmVzZXJ2ZURldmVsb3BlclRva2VucyhhZGRyZXNzIF9kZXZlbG9wZXJzLCB1aW50IF9kZXZlbG9wZXJQY3RYMTApIHB1YmxpYyBvd25lck9ubHkgdW5sb2NrZWRPbmx5IHsKICAgIGRldmVsb3BlcnMgPSBfZGV2ZWxvcGVyczsKICAgIGRldmVsb3BlclBjdFgxMCA9IF9kZXZlbG9wZXJQY3RYMTA7CiAgICB1aW50IF90b2tlbkNvdW50ID0gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgZGV2ZWxvcGVyUmVzZXJ2ZSA9IChzYWZlTXVsKF90b2tlbkNvdW50LCBkZXZlbG9wZXJQY3RYMTApIC8gMTAwMCk7CiAgfQoKICBmdW5jdGlvbiB0dW5lKHVpbnQgX2JhdGNoU2l6ZSwgdWludCBfY29udHJhY3RTZW5kR2FzKSBwdWJsaWMgb3duZXJPbmx5IHsKICAgIGJhdGNoU2l6ZSA9IF9iYXRjaFNpemU7CiAgICBjb250cmFjdFNlbmRHYXMgPSBfY29udHJhY3RTZW5kR2FzOwogIH0KCgogIC8vCiAgLy9jYWxsZWQgYnkgb3duZXIgKG9yIGFueSBvdGhlciBjb25jZXJuZWQgcGFydHkpIHRvIGdlbmVyYXRlIGEgU2F0YXRlQ2hhbmdlRXZlbnQKICAvLwogIGZ1bmN0aW9uIGhvdXNlS2VlcCgpIHB1YmxpYyB7CiAgICB1aW50IF9vbGRNYXNrID0gc3RhdGVNYXNrOwogICAgaWYgKG5vdyA+PSBhdWN0aW9uU3RhcnQpIHsKICAgICAgc3RhdGVNYXNrIHw9IEFVQ1RJT05fU1RBUlRfRVZFTlQ7CiAgICAgIGlmIChub3cgPj0gYXVjdGlvbkVuZCkgewogICAgICAgIHN0YXRlTWFzayB8PSBBVUNUSU9OX0VORF9FVkVOVDsKICAgICAgICBpZiAoc3RyaWtlUHJpY2UgPiAwKSB7CiAgICAgICAgICBzdGF0ZU1hc2sgfD0gU0FMRV9TVEFSVF9FVkVOVDsKICAgICAgICAgIGlmIChub3cgPj0gc2FsZUVuZCkKICAgICAgICAgICAgc3RhdGVNYXNrIHw9IFNBTEVfRU5EX0VWRU5UOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgaWYgKHN0YXRlTWFzayAhPSBfb2xkTWFzaykKICAgICAgU3RhdGVDaGFuZ2VFdmVudChzdGF0ZU1hc2spOwogIH0KCgoKICAvLwogIC8vc2V0dGluZyB0aGUgc3RyaWtlIHByaWNlIHN0YXJ0cyB0aGUgc2FsZSBwZXJpb2QsIGR1cmluZyB3aGljaCBiaWRkZXJzIG11c3QgY2FsbCBleGVjdXRlQmlkLgogIC8vdGhlIHN0cmlrZSBwcmljZSBzaG91bGQgb25seSBiZSBzZXQgb25jZS4uLi4gYXQgYW55IHJhdGUgaXQgY2Fubm90IGJlIGNoYW5nZWQgb25jZSBhbnlvbmUgaGFzIGV4ZWN1dGVkIGEgYmlkLgogIC8vc3RyaWtlUHJpY2VQY3RYMTAgc3BlY2lmaWVzIHdoYXQgcGVyY2VudGFnZSAoeDEwKSBvZiByZXF1ZXN0ZWQgdG9rZW5zIHNob3VsZCBiZSBhd2FyZGVkIHRvIGVhY2ggYmlkZGVyIHRoYXQKICAvL2JpZCBleGFjdGx5IGVxdWFsIHRvIHRoZSBzdHJpa2UgcHJpY2UuCiAgLy8KICBmdW5jdGlvbiBzZXRTdHJpa2VQcmljZSh1aW50IF9zdHJpa2VQcmljZSwgdWludCBfc3RyaWtlUHJpY2VQY3RYMTApIHB1YmxpYyBvd25lck9ubHkgYWZ0ZXJBdWN0aW9uIHsKICAgIHJlcXVpcmUoZXhlY3V0ZWRDb3VudCA9PSAwKTsKICAgIHN0cmlrZVByaWNlID0gX3N0cmlrZVByaWNlOwogICAgc3RyaWtlUHJpY2VQY3RYMTAgPSBfc3RyaWtlUHJpY2VQY3RYMTA7CiAgICBzYWxlRW5kID0gc2FmZUFkZChub3csIHNhbGVEdXJhdGlvbik7CiAgICBob3VzZUtlZXAoKTsKICB9CgoKICAvLwogIC8vIG5vYm9keSBzaG91bGQgYmUgc2VuZGluZyBmdW5kcyB2aWEgdGhpcyBmdW5jdGlvbi4uLi4gYml6YXJyZS4uLgogIC8vIHRoZSBmYWN0IHRoYXQgd2UgYWRqdXN0IHByb2NlZWRzIGhlcmUgbWVhbnMgdGhhdCB0aGlzIGZjbiB3aWxsIE9PRyBpZiBjYWxsZWQgd2l0aCBhIHNlbmQgb3IgdHJhbnNmZXIuIHRoYXQncwogIC8vIHByb2JhYmx5IGdvb2QsIGN1eiBpdCBwcmV2ZW50cyB0aGUgY2FsbGVyIGZyb20gbG9zaW5nIHRoZWlyIGZ1bmRzLgogIC8vCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICBwcm9jZWVkcyA9IHNhZmVBZGQocHJvY2VlZHMsIG1zZy52YWx1ZSk7CiAgICBCaXphcnJlRXZlbnQobXNnLnNlbmRlciwgImJpemFycmUgcGF5bWVudCIsIG1zZy52YWx1ZSk7CiAgfQoKCiAgZnVuY3Rpb24gZGVwb3NpdFNlY3JldEJpZChieXRlczMyIF9oYXNoLCBieXRlcyBfbWVzc2FnZSkgcHVibGljIGR1cmluZ0F1Y3Rpb24gcGF5YWJsZSB7CiAgICAvL2VhY2ggYWRkcmVzcyBjYW4gb25seSBzdWJtaXQgb25lIGJpZCAtLSBhbmQgb25jZSBhIGJpZCBpcyBzdWJtaXR0ZWQgaXQgaXMgaW11dGFibGUKICAgIC8vZm9yIHRlc3RpbmcsIGFuIGV4Y2VwdGlvbiBpcyBtYWRlIGZvciB0aGUgb3duZXIgLS0gYnV0IG9ubHkgd2hpbGUgdGhlIGNvbnRyYWN0IGlzIHVubG9ja2VkCiAgICBpZiAoIShtc2cuc2VuZGVyID09IG93bmVyICYmICFpc0xvY2tlZCkgJiYKICAgICAgICAgKF9oYXNoID09IDAgfHwgc2VjcmV0Qmlkc1ttc2cuc2VuZGVyXS5oYXNoICE9IDApICkKICAgICAgICByZXZlcnQoKTsKICAgIHNlY3JldEJpZHNbbXNnLnNlbmRlcl0uaGFzaCA9IF9oYXNoOwogICAgc2VjcmV0Qmlkc1ttc2cuc2VuZGVyXS5kZXBvc2l0ID0gbXNnLnZhbHVlOwogICAgc2VjcmV0QmlkQ291bnQgKz0gMTsKICAgIHVpbnQgX2JhdGNoID0gc2VjcmV0QmlkQ291bnQgLyBiYXRjaFNpemU7CiAgICBTZWNyZXRCaWRFdmVudChfYmF0Y2gsIG1zZy5zZW5kZXIsIG1zZy52YWx1ZSwgX2hhc2gsIF9tZXNzYWdlKTsKICB9CgoKICAvLwogIC8vIHRoZSBvd25lciBtYXkgZGlzcXVhbGlmeSBhIGJpZCBpZiBpdCBpcyBib2d1cy4gZm9yIGV4YW1wbGUgaWYgdGhlIGhhc2ggZG9lcyBub3QgY29ycmVzcG9uZAogIC8vIHRvIHRoZSBoYXNoIHRoYXQgaXMgZ2VuZXJhdGVkIGZyb20gdGhlIGVuY3lycHRlZCBiaWQgdHVwbGUuIHdoZW4gYSBkaXNxdWFsaWZpZWQgYmlkIGlzCiAgLy8gZXhlY3V0ZWQgYWxsIHRoZSBkZXBvc2l0ZWQgZnVuZHMgd2lsbCBiZSByZXR1cm5lZCB0byB0aGUgYmlkZGVyLCBhcyBpZiB0aGUgYmlkIHdhcyBiZWxvdwogIC8vIHRoZSBzdHJpa2UtcHJpY2UuCiAgLy8KICBmdW5jdGlvbiBkaXNxdWFsaWZ5QmlkKGFkZHJlc3MgX2Zyb20pIHB1YmxpYyBvd25lck9ubHkgZHVyaW5nQXVjdGlvbiB7CiAgICBzZWNyZXRCaWRzW19mcm9tXS5kaXNxdWFsaWZpZWQgPSB0cnVlOwogIH0KCgogIC8vCiAgLy8gZXhlY3V0ZSBhIGJpZC4KICAvLyAqIHB1cmNoYXNlcyB0b2tlbnMgaWYgdGhlIHNwZWNpZmllZCBwcmljZSBpcyBhYm92ZSB0aGUgc3RyaWtlIHByaWNlCiAgLy8gKiByZWZ1bmRzIHdoYXRldmVyIHJlbWFpbnMgb2YgdGhlIGRlcG9zaXQKICAvLwogIC8vIGNhbGwgb25seSBkdXJpbmcgdGhlIHNhbGUgcGVyaW9kIChzdHJpa2VQcmljZSA+IDApCiAgLy8KICBmdW5jdGlvbiBleGVjdXRlQmlkKHVpbnQyNTYgX3NlY3JldCwgdWludDI1NiBfcHJpY2UsIHVpbnQyNTYgX3F1YW50aXR5KSBwdWJsaWMgZHVyaW5nU2FsZSB7CiAgICBleGVjdXRlQmlkRm9yKG1zZy5zZW5kZXIsIF9zZWNyZXQsIF9wcmljZSwgX3F1YW50aXR5KTsKICB9CiAgZnVuY3Rpb24gZXhlY3V0ZUJpZEZvcihhZGRyZXNzIF9hZGRyLCB1aW50MjU2IF9zZWNyZXQsIHVpbnQyNTYgX3ByaWNlLCB1aW50MjU2IF9xdWFudGl0eSkgcHVibGljIGR1cmluZ1NhbGUgewogICAgYnl0ZXMzMiBjb21wdXRlZEhhc2ggPSBrZWNjYWsyNTYoX3NlY3JldCwgX3ByaWNlLCBfcXVhbnRpdHkpOwogICAgLy9NZXNzYWdlQnl0ZXMzMkV2ZW50KCJjb21wdXRlZEhhc2giLCBjb21wdXRlZEhhc2gpOwogICAgcmVxdWlyZShzZWNyZXRCaWRzW19hZGRyXS5oYXNoID09IGNvbXB1dGVkSGFzaCk7CiAgICAvLwogICAgaWYgKHNlY3JldEJpZHNbX2FkZHJdLmRlcG9zaXQgPiAwKSB7CiAgICAgIHVpbnQgX2Nvc3QgPSAwOwogICAgICB1aW50IF9yZWZ1bmQgPSAwOwogICAgICB1aW50IF9wcmljZVdlaSA9IHNhZmVNdWwoX3ByaWNlLCAxIHN6YWJvKTsKICAgICAgaWYgKF9wcmljZVdlaSA+PSBzdHJpa2VQcmljZSAmJiAhc2VjcmV0Qmlkc1tfYWRkcl0uZGlzcXVhbGlmaWVkKSB7CiAgICAgICAgdWludDI1NiBfcHVyY2hhc2VDb3VudCA9IChfcHJpY2VXZWkgPiBzdHJpa2VQcmljZSkgPyBfcXVhbnRpdHkgOiAoc2FmZU11bChzdHJpa2VQcmljZVBjdFgxMCwgX3F1YW50aXR5KSAvIDEwMDApOwogICAgICAgIHZhciBfbWF4UHVyY2hhc2UgPSB0b2tlbi5iYWxhbmNlT2YodGhpcykgLSBkZXZlbG9wZXJSZXNlcnZlOwogICAgICAgIGlmIChfcHVyY2hhc2VDb3VudCA+IF9tYXhQdXJjaGFzZSkKICAgICAgICAgIF9wdXJjaGFzZUNvdW50ID0gX21heFB1cmNoYXNlOwogICAgICAgIF9jb3N0ID0gc2FmZU11bChfcHVyY2hhc2VDb3VudCwgc3RyaWtlUHJpY2UpOwogICAgICAgIGlmIChzZWNyZXRCaWRzW19hZGRyXS5kZXBvc2l0ID49IF9jb3N0KSB7CiAgICAgICAgICBzZWNyZXRCaWRzW19hZGRyXS5kZXBvc2l0IC09IF9jb3N0OwogICAgICAgICAgcHJvY2VlZHMgPSBzYWZlQWRkKHByb2NlZWRzLCBfY29zdCk7CiAgICAgICAgICBzZWNyZXRCaWRzW19hZGRyXS50b2tlbnMgKz0gX3B1cmNoYXNlQ291bnQ7CiAgICAgICAgICBwdXJjaGFzZWRDb3VudCArPSBfcHVyY2hhc2VDb3VudDsKICAgICAgICAgIC8vdHJhbnNmZXIgdG9rZW5zIHRvIHRoaXMgYmlkZGVyCiAgICAgICAgICBpZiAoIXRva2VuLnRyYW5zZmVyKF9hZGRyLCBfcHVyY2hhc2VDb3VudCkpCiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgfQogICAgICAvL3JlZnVuZCB3aGF0ZXZlciByZW1haW5zCiAgICAgIC8vdXNlIHB1bGwgaGVyZSwgdG8gcHJldmVudCBhbnkgYmlkZGVyIGZyb20gcmV2ZXJ0aW5nIHRoZWlyIHB1cmNoYXNlCiAgICAgIGlmIChzZWNyZXRCaWRzW19hZGRyXS5kZXBvc2l0ID4gMCkgewogICAgICAgIF9yZWZ1bmQgPSBzZWNyZXRCaWRzW19hZGRyXS5kZXBvc2l0OwogICAgICAgIHNlY3JldEJpZHNbX2FkZHJdLnJlZnVuZCArPSBfcmVmdW5kOwogICAgICAgIHNlY3JldEJpZHNbX2FkZHJdLmRlcG9zaXQgPSAwOwogICAgICB9CiAgICAgIGV4ZWN1dGVkQ291bnQgKz0gMTsKICAgICAgdWludCBfYmF0Y2ggPSBleGVjdXRlZENvdW50IC8gYmF0Y2hTaXplOwogICAgICBFeGVjdXRlRXZlbnQoX2JhdGNoLCBfYWRkciwgX2Nvc3QsIF9yZWZ1bmQpOwogICAgfQogIH0KCgogIC8vCiAgLy8gZXhwaXJlQmlkCiAgLy8gaWYgYSBiaWQgaXMgbm90IGV4ZWN1dGVkIGR1cmluZyB0aGUgc2FsZSBwZXJpb2QsIHRoZW4gdGhlIG93bmVyIGNhbiBtYXJrIHRoZSBiaWQgYXMgZXhwaXJlZC4gaW4gdGhpcyBjYXNlOgogIC8vICogdGhlIGJpZGRlciBnZXRzIGEgcmVmdW5kIG9mIGhhbGYgb2YgaGlzIGRlcG9zaXQKICAvLyAqIHRoZSBiaWRkZXIgZm9yZmVpdHMgdGhlIG90aGVyIGhhbGYgb2YgaGlzIGRlcG9zaXQKICAvLyAqIHRoZSBiaWRkZXIgZG9lcyBub3QgcmVjZWl2ZSBhbiB0b2tlbnMKICAvLwogIGZ1bmN0aW9uIGV4cGlyZUJpZChhZGRyZXNzIF9hZGRyKSBwdWJsaWMgb3duZXJPbmx5IGFmdGVyU2FsZSB7CiAgICBpZiAoc2VjcmV0Qmlkc1tfYWRkcl0uZGVwb3NpdCA+IDApIHsKICAgICAgdWludCBfZm9yZmVpdCA9IHNlY3JldEJpZHNbX2FkZHJdLmRlcG9zaXQgLyAyOwogICAgICBwcm9jZWVkcyA9IHNhZmVBZGQocHJvY2VlZHMsIF9mb3JmZWl0KTsKICAgICAgLy9yZWZ1bmQgd2hhdGV2ZXIgcmVtYWlucwogICAgICB1aW50IF9yZWZ1bmQgPSBzYWZlU3ViKHNlY3JldEJpZHNbX2FkZHJdLmRlcG9zaXQsIF9mb3JmZWl0KTsKICAgICAgLy91c2UgcHVsbCBoZXJlLCB0byBwcmV2ZW50IGFueSBiaWRkZXIgZnJvbSByZXZlcnRpbmcgdGhlIGV4cGlyZQogICAgICBzZWNyZXRCaWRzW21zZy5zZW5kZXJdLnJlZnVuZCArPSBfcmVmdW5kOwogICAgICBzZWNyZXRCaWRzW19hZGRyXS5kZXBvc2l0ID0gMDsKICAgICAgZXhwaXJlZENvdW50ICs9IDE7CiAgICAgIHVpbnQgX2JhdGNoID0gZXhwaXJlZENvdW50IC8gYmF0Y2hTaXplOwogICAgICBFeHBpcmVFdmVudChfYmF0Y2gsIF9hZGRyLCBfZm9yZmVpdCwgX3JlZnVuZCk7CiAgICB9CiAgfQoKCiAgLy8KICAvLyBiaWRkZXIgd2l0aGRyYXcgZXhjZXNzIGZ1bmRzIChvciBhbGwgZnVuZHMgaWYgYmlkIHdhcyB0b28gbG93KQogIC8vCiAgZnVuY3Rpb24gd2l0aGRyYXdSZWZ1bmQoKSBwdWJsaWMgewogICAgdWludCBfYW1vdW50ID0gc2VjcmV0Qmlkc1ttc2cuc2VuZGVyXS5yZWZ1bmQ7CiAgICBzZWNyZXRCaWRzW21zZy5zZW5kZXJdLnJlZnVuZCA9IDA7CiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKF9hbW91bnQpOwogIH0KCgogIC8vCiAgLy8gZ3JhbnQgZGV2ZWxvcGVyIHRva2VucywgZXF1YWwgdG8gYSBwZXJjZW50YWdlIG9mIHB1cmNoYXNlZCB0b2tlbnMuCiAgLy8gb25jZSBjYWxsZWQsIGFueSByZW1haW5pbmcgdG9rZW5zIHdpbGwgYmUgYnVybmVkLgogIC8vCiAgZnVuY3Rpb24gZG9EZXZlbG9wZXJHcmFudCgpIHB1YmxpYyBhZnRlclNhbGUgewogICAgdWludCBfcXVhbnRpdHkgPSBwdXJjaGFzZWRDb3VudCAqIGRldmVsb3BlclBjdFgxMCAvIDEwMDA7CiAgICB2YXIgX3Rva2Vuc0xlZnQgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICBpZiAoX3F1YW50aXR5ID4gX3Rva2Vuc0xlZnQpCiAgICAgIF9xdWFudGl0eSA9IF90b2tlbnNMZWZ0OwogICAgaWYgKF9xdWFudGl0eSA+IDApIHsKICAgICAgLy90cmFuc2ZlciBwY3QgdG9rZW5zIHRvIGRldmVsb3BlcnMKICAgICAgX3Rva2Vuc0xlZnQgLT0gX3F1YW50aXR5OwogICAgICBpZiAoIXRva2VuLnRyYW5zZmVyKGRldmVsb3BlcnMsIF9xdWFudGl0eSkpCiAgICAgICAgcmV2ZXJ0KCk7CiAgICB9CiAgICAvL2FuZCBidXJuIGV2ZXJ0aGluZyB0aGF0IHJlbWFpbnMKICAgIHRva2VuLnVuUGFpZEJ1cm5Ub2tlbnMoX3Rva2Vuc0xlZnQpOwogIH0KCgogIC8vCiAgLy8gcGF5IGF1Y3Rpb24gcHJvY2VlZHMgdG8gdGhlIHVuZGVyd3JpdGVyCiAgLy8gbWF5IGJlIGNhbGxlZCBieSB1bmRlcndyaXRlciBvciBvd25lciAoZmJvIHVuZGVyd3JpdGVyKQogIC8vCiAgZnVuY3Rpb24gcGF5VW5kZXJ3cml0ZXIoKSBwdWJsaWMgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gdW5kZXJ3cml0ZXIpOwogICAgdWludCBfYW1vdW50ID0gcHJvY2VlZHM7CiAgICBwcm9jZWVkcyA9IDA7CiAgICBpZiAoIXVuZGVyd3JpdGVyLmNhbGwuZ2FzKGNvbnRyYWN0U2VuZEdhcykudmFsdWUoX2Ftb3VudCkoKSkKICAgICAgcmV2ZXJ0KCk7CiAgfQoKCiAgLy9mb3IgZGVidWcKICAvL29ubHkgYXZhaWxhYmxlIGJlZm9yZSB0aGUgY29udHJhY3QgaXMgbG9ja2VkCiAgZnVuY3Rpb24gaGFyYUtpcmkoKSBvd25lck9ubHkgdW5sb2NrZWRPbmx5IHsKICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgfQp9'.
	

]
