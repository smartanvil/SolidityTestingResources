Class {
	#name : #SRT1e6eF17b78DD4E27b99C1cfd9Cd02A8A160AA95C,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1e6eF17b78DD4E27b99C1cfd9Cd02A8A160AA95C >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgppbnRlcmZhY2UgRmVlQnVybmVySW50ZXJmYWNlIHsKICAgIGZ1bmN0aW9uIGhhbmRsZUZlZXMgKHVpbnQgdHJhZGVXZWlBbW91bnQsIGFkZHJlc3MgcmVzZXJ2ZSwgYWRkcmVzcyB3YWxsZXQpIHB1YmxpYyByZXR1cm5zKGJvb2wpOwp9Cgpjb250cmFjdCBQZXJtaXNzaW9uR3JvdXBzIHsKCiAgICBhZGRyZXNzIHB1YmxpYyBhZG1pbjsKICAgIGFkZHJlc3MgcHVibGljIHBlbmRpbmdBZG1pbjsKICAgIG1hcHBpbmcoYWRkcmVzcz0+Ym9vbCkgaW50ZXJuYWwgb3BlcmF0b3JzOwogICAgbWFwcGluZyhhZGRyZXNzPT5ib29sKSBpbnRlcm5hbCBhbGVydGVyczsKICAgIGFkZHJlc3NbXSBpbnRlcm5hbCBvcGVyYXRvcnNHcm91cDsKICAgIGFkZHJlc3NbXSBpbnRlcm5hbCBhbGVydGVyc0dyb3VwOwogICAgdWludCBjb25zdGFudCBpbnRlcm5hbCBNQVhfR1JPVVBfU0laRSA9IDUwOwoKICAgIGZ1bmN0aW9uIFBlcm1pc3Npb25Hcm91cHMoKSBwdWJsaWMgewogICAgICAgIGFkbWluID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5QWRtaW4oKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPcGVyYXRvcigpIHsKICAgICAgICByZXF1aXJlKG9wZXJhdG9yc1ttc2cuc2VuZGVyXSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5QWxlcnRlcigpIHsKICAgICAgICByZXF1aXJlKGFsZXJ0ZXJzW21zZy5zZW5kZXJdKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE9wZXJhdG9ycyAoKSBleHRlcm5hbCB2aWV3IHJldHVybnMoYWRkcmVzc1tdKSB7CiAgICAgICAgcmV0dXJuIG9wZXJhdG9yc0dyb3VwOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEFsZXJ0ZXJzICgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyhhZGRyZXNzW10pIHsKICAgICAgICByZXR1cm4gYWxlcnRlcnNHcm91cDsKICAgIH0KCiAgICBldmVudCBUcmFuc2ZlckFkbWluUGVuZGluZyhhZGRyZXNzIHBlbmRpbmdBZG1pbik7CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBhZG1pbiB0byBzZXQgdGhlIHBlbmRpbmdBZG1pbiBhZGRyZXNzLgogICAgICogQHBhcmFtIG5ld0FkbWluIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJBZG1pbihhZGRyZXNzIG5ld0FkbWluKSBwdWJsaWMgb25seUFkbWluIHsKICAgICAgICByZXF1aXJlKG5ld0FkbWluICE9IGFkZHJlc3MoMCkpOwogICAgICAgIFRyYW5zZmVyQWRtaW5QZW5kaW5nKHBlbmRpbmdBZG1pbik7CiAgICAgICAgcGVuZGluZ0FkbWluID0gbmV3QWRtaW47CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBhZG1pbiB0byBzZXQgdGhlIGFkbWluIGluIG9uZSB0eC4gVXNlZnVsIGluaXRpYWwgZGVwbG95bWVudC4KICAgICAqIEBwYXJhbSBuZXdBZG1pbiBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyQWRtaW5RdWlja2x5KGFkZHJlc3MgbmV3QWRtaW4pIHB1YmxpYyBvbmx5QWRtaW4gewogICAgICAgIHJlcXVpcmUobmV3QWRtaW4gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgVHJhbnNmZXJBZG1pblBlbmRpbmcobmV3QWRtaW4pOwogICAgICAgIEFkbWluQ2xhaW1lZChuZXdBZG1pbiwgYWRtaW4pOwogICAgICAgIGFkbWluID0gbmV3QWRtaW47CiAgICB9CgogICAgZXZlbnQgQWRtaW5DbGFpbWVkKCBhZGRyZXNzIG5ld0FkbWluLCBhZGRyZXNzIHByZXZpb3VzQWRtaW4pOwoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgdGhlIHBlbmRpbmdBZG1pbiBhZGRyZXNzIHRvIGZpbmFsaXplIHRoZSBjaGFuZ2UgYWRtaW4gcHJvY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gY2xhaW1BZG1pbigpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShwZW5kaW5nQWRtaW4gPT0gbXNnLnNlbmRlcik7CiAgICAgICAgQWRtaW5DbGFpbWVkKHBlbmRpbmdBZG1pbiwgYWRtaW4pOwogICAgICAgIGFkbWluID0gcGVuZGluZ0FkbWluOwogICAgICAgIHBlbmRpbmdBZG1pbiA9IGFkZHJlc3MoMCk7CiAgICB9CgogICAgZXZlbnQgQWxlcnRlckFkZGVkIChhZGRyZXNzIG5ld0FsZXJ0ZXIsIGJvb2wgaXNBZGQpOwoKICAgIGZ1bmN0aW9uIGFkZEFsZXJ0ZXIoYWRkcmVzcyBuZXdBbGVydGVyKSBwdWJsaWMgb25seUFkbWluIHsKICAgICAgICByZXF1aXJlKCFhbGVydGVyc1tuZXdBbGVydGVyXSk7IC8vIHByZXZlbnQgZHVwbGljYXRlcy4KICAgICAgICByZXF1aXJlKGFsZXJ0ZXJzR3JvdXAubGVuZ3RoIDwgTUFYX0dST1VQX1NJWkUpOwoKICAgICAgICBBbGVydGVyQWRkZWQobmV3QWxlcnRlciwgdHJ1ZSk7CiAgICAgICAgYWxlcnRlcnNbbmV3QWxlcnRlcl0gPSB0cnVlOwogICAgICAgIGFsZXJ0ZXJzR3JvdXAucHVzaChuZXdBbGVydGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVBbGVydGVyIChhZGRyZXNzIGFsZXJ0ZXIpIHB1YmxpYyBvbmx5QWRtaW4gewogICAgICAgIHJlcXVpcmUoYWxlcnRlcnNbYWxlcnRlcl0pOwogICAgICAgIGFsZXJ0ZXJzW2FsZXJ0ZXJdID0gZmFsc2U7CgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGFsZXJ0ZXJzR3JvdXAubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgaWYgKGFsZXJ0ZXJzR3JvdXBbaV0gPT0gYWxlcnRlcikgewogICAgICAgICAgICAgICAgYWxlcnRlcnNHcm91cFtpXSA9IGFsZXJ0ZXJzR3JvdXBbYWxlcnRlcnNHcm91cC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgIGFsZXJ0ZXJzR3JvdXAubGVuZ3RoLS07CiAgICAgICAgICAgICAgICBBbGVydGVyQWRkZWQoYWxlcnRlciwgZmFsc2UpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZXZlbnQgT3BlcmF0b3JBZGRlZChhZGRyZXNzIG5ld09wZXJhdG9yLCBib29sIGlzQWRkKTsKCiAgICBmdW5jdGlvbiBhZGRPcGVyYXRvcihhZGRyZXNzIG5ld09wZXJhdG9yKSBwdWJsaWMgb25seUFkbWluIHsKICAgICAgICByZXF1aXJlKCFvcGVyYXRvcnNbbmV3T3BlcmF0b3JdKTsgLy8gcHJldmVudCBkdXBsaWNhdGVzLgogICAgICAgIHJlcXVpcmUob3BlcmF0b3JzR3JvdXAubGVuZ3RoIDwgTUFYX0dST1VQX1NJWkUpOwoKICAgICAgICBPcGVyYXRvckFkZGVkKG5ld09wZXJhdG9yLCB0cnVlKTsKICAgICAgICBvcGVyYXRvcnNbbmV3T3BlcmF0b3JdID0gdHJ1ZTsKICAgICAgICBvcGVyYXRvcnNHcm91cC5wdXNoKG5ld09wZXJhdG9yKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVPcGVyYXRvciAoYWRkcmVzcyBvcGVyYXRvcikgcHVibGljIG9ubHlBZG1pbiB7CiAgICAgICAgcmVxdWlyZShvcGVyYXRvcnNbb3BlcmF0b3JdKTsKICAgICAgICBvcGVyYXRvcnNbb3BlcmF0b3JdID0gZmFsc2U7CgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG9wZXJhdG9yc0dyb3VwLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChvcGVyYXRvcnNHcm91cFtpXSA9PSBvcGVyYXRvcikgewogICAgICAgICAgICAgICAgb3BlcmF0b3JzR3JvdXBbaV0gPSBvcGVyYXRvcnNHcm91cFtvcGVyYXRvcnNHcm91cC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgIG9wZXJhdG9yc0dyb3VwLmxlbmd0aCAtPSAxOwogICAgICAgICAgICAgICAgT3BlcmF0b3JBZGRlZChvcGVyYXRvciwgZmFsc2UpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IFV0aWxzIHsKCiAgICBFUkMyMCBjb25zdGFudCBpbnRlcm5hbCBFVEhfVE9LRU5fQUREUkVTUyA9IEVSQzIwKDB4MDBlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlKTsKICAgIHVpbnQgIGNvbnN0YW50IGludGVybmFsIFBSRUNJU0lPTiA9ICgxMCoqMTgpOwogICAgdWludCAgY29uc3RhbnQgaW50ZXJuYWwgTUFYX1FUWSAgID0gKDEwKioyOCk7IC8vIDEwQiB0b2tlbnMKICAgIHVpbnQgIGNvbnN0YW50IGludGVybmFsIE1BWF9SQVRFICA9IChQUkVDSVNJT04gKiAxMCoqNik7IC8vIHVwIHRvIDFNIHRva2VucyBwZXIgRVRICiAgICB1aW50ICBjb25zdGFudCBpbnRlcm5hbCBNQVhfREVDSU1BTFMgPSAxODsKICAgIHVpbnQgIGNvbnN0YW50IGludGVybmFsIEVUSF9ERUNJTUFMUyA9IDE4OwogICAgbWFwcGluZyhhZGRyZXNzPT51aW50KSBpbnRlcm5hbCBkZWNpbWFsczsKCiAgICBmdW5jdGlvbiBzZXREZWNpbWFscyhFUkMyMCB0b2tlbikgaW50ZXJuYWwgewogICAgICAgIGlmICh0b2tlbiA9PSBFVEhfVE9LRU5fQUREUkVTUykgZGVjaW1hbHNbdG9rZW5dID0gRVRIX0RFQ0lNQUxTOwogICAgICAgIGVsc2UgZGVjaW1hbHNbdG9rZW5dID0gdG9rZW4uZGVjaW1hbHMoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXREZWNpbWFscyhFUkMyMCB0b2tlbikgaW50ZXJuYWwgdmlldyByZXR1cm5zKHVpbnQpIHsKICAgICAgICBpZiAodG9rZW4gPT0gRVRIX1RPS0VOX0FERFJFU1MpIHJldHVybiBFVEhfREVDSU1BTFM7IC8vIHNhdmUgc3RvcmFnZSBhY2Nlc3MKICAgICAgICB1aW50IHRva2VuRGVjaW1hbHMgPSBkZWNpbWFsc1t0b2tlbl07CiAgICAgICAgLy8gdGVjaG5pY2FsbHksIHRoZXJlIG1pZ2h0IGJlIHRva2VuIHdpdGggZGVjaW1hbHMgMAogICAgICAgIC8vIG1vcmVvdmVyLCB2ZXJ5IHBvc3NpYmxlIHRoYXQgb2xkIHRva2VucyBoYXZlIGRlY2ltYWxzIDAKICAgICAgICAvLyB0aGVzZSB0b2tlbnMgd2lsbCBqdXN0IGhhdmUgaGlnaGVyIGdhcyBmZWVzLgogICAgICAgIGlmKHRva2VuRGVjaW1hbHMgPT0gMCkgcmV0dXJuIHRva2VuLmRlY2ltYWxzKCk7CgogICAgICAgIHJldHVybiB0b2tlbkRlY2ltYWxzOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbGNEc3RRdHkodWludCBzcmNRdHksIHVpbnQgc3JjRGVjaW1hbHMsIHVpbnQgZHN0RGVjaW1hbHMsIHVpbnQgcmF0ZSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXF1aXJlKHNyY1F0eSA8PSBNQVhfUVRZKTsKICAgICAgICByZXF1aXJlKHJhdGUgPD0gTUFYX1JBVEUpOwoKICAgICAgICBpZiAoZHN0RGVjaW1hbHMgPj0gc3JjRGVjaW1hbHMpIHsKICAgICAgICAgICAgcmVxdWlyZSgoZHN0RGVjaW1hbHMgLSBzcmNEZWNpbWFscykgPD0gTUFYX0RFQ0lNQUxTKTsKICAgICAgICAgICAgcmV0dXJuIChzcmNRdHkgKiByYXRlICogKDEwKiooZHN0RGVjaW1hbHMgLSBzcmNEZWNpbWFscykpKSAvIFBSRUNJU0lPTjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXF1aXJlKChzcmNEZWNpbWFscyAtIGRzdERlY2ltYWxzKSA8PSBNQVhfREVDSU1BTFMpOwogICAgICAgICAgICByZXR1cm4gKHNyY1F0eSAqIHJhdGUpIC8gKFBSRUNJU0lPTiAqICgxMCoqKHNyY0RlY2ltYWxzIC0gZHN0RGVjaW1hbHMpKSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNhbGNTcmNRdHkodWludCBkc3RRdHksIHVpbnQgc3JjRGVjaW1hbHMsIHVpbnQgZHN0RGVjaW1hbHMsIHVpbnQgcmF0ZSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXF1aXJlKGRzdFF0eSA8PSBNQVhfUVRZKTsKICAgICAgICByZXF1aXJlKHJhdGUgPD0gTUFYX1JBVEUpOwoKICAgICAgICAvL3NvdXJjZSBxdWFudGl0eSBpcyByb3VuZGVkIHVwLiB0byBhdm9pZCBkZXN0IHF1YW50aXR5IGJlaW5nIHRvbyBsb3cuCiAgICAgICAgdWludCBudW1lcmF0b3I7CiAgICAgICAgdWludCBkZW5vbWluYXRvcjsKICAgICAgICBpZiAoc3JjRGVjaW1hbHMgPj0gZHN0RGVjaW1hbHMpIHsKICAgICAgICAgICAgcmVxdWlyZSgoc3JjRGVjaW1hbHMgLSBkc3REZWNpbWFscykgPD0gTUFYX0RFQ0lNQUxTKTsKICAgICAgICAgICAgbnVtZXJhdG9yID0gKFBSRUNJU0lPTiAqIGRzdFF0eSAqICgxMCoqKHNyY0RlY2ltYWxzIC0gZHN0RGVjaW1hbHMpKSk7CiAgICAgICAgICAgIGRlbm9taW5hdG9yID0gcmF0ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXF1aXJlKChkc3REZWNpbWFscyAtIHNyY0RlY2ltYWxzKSA8PSBNQVhfREVDSU1BTFMpOwogICAgICAgICAgICBudW1lcmF0b3IgPSAoUFJFQ0lTSU9OICogZHN0UXR5KTsKICAgICAgICAgICAgZGVub21pbmF0b3IgPSAocmF0ZSAqICgxMCoqKGRzdERlY2ltYWxzIC0gc3JjRGVjaW1hbHMpKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAobnVtZXJhdG9yICsgZGVub21pbmF0b3IgLSAxKSAvIGRlbm9taW5hdG9yOyAvL2F2b2lkIHJvdW5kaW5nIGRvd24gZXJyb3JzCiAgICB9Cn0KCmNvbnRyYWN0IFdpdGhkcmF3YWJsZSBpcyBQZXJtaXNzaW9uR3JvdXBzIHsKCiAgICBldmVudCBUb2tlbldpdGhkcmF3KEVSQzIwIHRva2VuLCB1aW50IGFtb3VudCwgYWRkcmVzcyBzZW5kVG8pOwoKICAgIC8qKgogICAgICogQGRldiBXaXRoZHJhdyBhbGwgRVJDMjAgY29tcGF0aWJsZSB0b2tlbnMKICAgICAqIEBwYXJhbSB0b2tlbiBFUkMyMCBUaGUgYWRkcmVzcyBvZiB0aGUgdG9rZW4gY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXdUb2tlbihFUkMyMCB0b2tlbiwgdWludCBhbW91bnQsIGFkZHJlc3Mgc2VuZFRvKSBleHRlcm5hbCBvbmx5QWRtaW4gewogICAgICAgIHJlcXVpcmUodG9rZW4udHJhbnNmZXIoc2VuZFRvLCBhbW91bnQpKTsKICAgICAgICBUb2tlbldpdGhkcmF3KHRva2VuLCBhbW91bnQsIHNlbmRUbyk7CiAgICB9CgogICAgZXZlbnQgRXRoZXJXaXRoZHJhdyh1aW50IGFtb3VudCwgYWRkcmVzcyBzZW5kVG8pOwoKICAgIC8qKgogICAgICogQGRldiBXaXRoZHJhdyBFdGhlcnMKICAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXdFdGhlcih1aW50IGFtb3VudCwgYWRkcmVzcyBzZW5kVG8pIGV4dGVybmFsIG9ubHlBZG1pbiB7CiAgICAgICAgc2VuZFRvLnRyYW5zZmVyKGFtb3VudCk7CiAgICAgICAgRXRoZXJXaXRoZHJhdyhhbW91bnQsIHNlbmRUbyk7CiAgICB9Cn0KCmludGVyZmFjZSBCdXJuYWJsZVRva2VuIHsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IEZlZUJ1cm5lciBpcyBXaXRoZHJhd2FibGUsIEZlZUJ1cm5lckludGVyZmFjZSwgVXRpbHMgewoKICAgIG1hcHBpbmcoYWRkcmVzcz0+dWludCkgcHVibGljIHJlc2VydmVGZWVzSW5CcHM7CiAgICBtYXBwaW5nKGFkZHJlc3M9PmFkZHJlc3MpIHB1YmxpYyByZXNlcnZlS05DV2FsbGV0OwogICAgbWFwcGluZyhhZGRyZXNzPT51aW50KSBwdWJsaWMgd2FsbGV0RmVlc0luQnBzOwogICAgbWFwcGluZyhhZGRyZXNzPT51aW50KSBwdWJsaWMgcmVzZXJ2ZUZlZVRvQnVybjsKICAgIG1hcHBpbmcoYWRkcmVzcz0+bWFwcGluZyhhZGRyZXNzPT51aW50KSkgcHVibGljIHJlc2VydmVGZWVUb1dhbGxldDsKCiAgICBCdXJuYWJsZVRva2VuIHB1YmxpYyBrbmM7CiAgICBhZGRyZXNzIHB1YmxpYyBreWJlck5ldHdvcms7CiAgICB1aW50IHB1YmxpYyBrbmNQZXJFVEhSYXRlID0gMzAwOwoKICAgIGZ1bmN0aW9uIEZlZUJ1cm5lcihhZGRyZXNzIF9hZG1pbiwgQnVybmFibGVUb2tlbiBrbmNUb2tlbikgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9hZG1pbiAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKGtuY1Rva2VuICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGFkbWluID0gX2FkbWluOwogICAgICAgIGtuYyA9IGtuY1Rva2VuOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFJlc2VydmVEYXRhKGFkZHJlc3MgcmVzZXJ2ZSwgdWludCBmZWVzSW5CcHMsIGFkZHJlc3Mga25jV2FsbGV0KSBwdWJsaWMgb25seUFkbWluIHsKICAgICAgICByZXF1aXJlKGZlZXNJbkJwcyA8IDEwMCk7IC8vIG1ha2Ugc3VyZSBpdCBpcyBhbHdheXMgPCAxJQogICAgICAgIHJlcXVpcmUoa25jV2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlc2VydmVGZWVzSW5CcHNbcmVzZXJ2ZV0gPSBmZWVzSW5CcHM7CiAgICAgICAgcmVzZXJ2ZUtOQ1dhbGxldFtyZXNlcnZlXSA9IGtuY1dhbGxldDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRXYWxsZXRGZWVzKGFkZHJlc3Mgd2FsbGV0LCB1aW50IGZlZXNJbkJwcykgcHVibGljIG9ubHlBZG1pbiB7CiAgICAgICAgcmVxdWlyZShmZWVzSW5CcHMgPCAxMDAwMCk7IC8vIHVuZGVyIDEwMCUKICAgICAgICB3YWxsZXRGZWVzSW5CcHNbd2FsbGV0XSA9IGZlZXNJbkJwczsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRLeWJlck5ldHdvcmsoYWRkcmVzcyBfa3liZXJOZXR3b3JrKSBwdWJsaWMgb25seUFkbWluIHsKICAgICAgICByZXF1aXJlKF9reWJlck5ldHdvcmsgIT0gYWRkcmVzcygwKSk7CiAgICAgICAga3liZXJOZXR3b3JrID0gX2t5YmVyTmV0d29yazsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRLTkNSYXRlKHVpbnQgcmF0ZSkgcHVibGljIG9ubHlBZG1pbiB7CiAgICAgICAgcmVxdWlyZShrbmNQZXJFVEhSYXRlIDw9IE1BWF9SQVRFKTsKICAgICAgICBrbmNQZXJFVEhSYXRlID0gcmF0ZTsKICAgIH0KCiAgICBldmVudCBBc3NpZ25GZWVUb1dhbGxldChhZGRyZXNzIHJlc2VydmUsIGFkZHJlc3Mgd2FsbGV0LCB1aW50IHdhbGxldEZlZSk7CiAgICBldmVudCBBc3NpZ25CdXJuRmVlcyhhZGRyZXNzIHJlc2VydmUsIHVpbnQgYnVybkZlZSk7CgogICAgZnVuY3Rpb24gaGFuZGxlRmVlcyh1aW50IHRyYWRlV2VpQW1vdW50LCBhZGRyZXNzIHJlc2VydmUsIGFkZHJlc3Mgd2FsbGV0KSBwdWJsaWMgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGt5YmVyTmV0d29yayk7CiAgICAgICAgcmVxdWlyZSh0cmFkZVdlaUFtb3VudCA8PSBNQVhfUVRZKTsKICAgICAgICByZXF1aXJlKGtuY1BlckVUSFJhdGUgPD0gTUFYX1JBVEUpOwoKICAgICAgICB1aW50IGtuY0Ftb3VudCA9IHRyYWRlV2VpQW1vdW50ICoga25jUGVyRVRIUmF0ZTsKICAgICAgICB1aW50IGZlZSA9IGtuY0Ftb3VudCAqIHJlc2VydmVGZWVzSW5CcHNbcmVzZXJ2ZV0gLyAxMDAwMDsKCiAgICAgICAgdWludCB3YWxsZXRGZWUgPSBmZWUgKiB3YWxsZXRGZWVzSW5CcHNbd2FsbGV0XSAvIDEwMDAwOwogICAgICAgIHJlcXVpcmUoZmVlID49IHdhbGxldEZlZSk7CiAgICAgICAgdWludCBmZWVUb0J1cm4gPSBmZWUgLSB3YWxsZXRGZWU7CgogICAgICAgIGlmICh3YWxsZXRGZWUgPiAwKSB7CiAgICAgICAgICAgIHJlc2VydmVGZWVUb1dhbGxldFtyZXNlcnZlXVt3YWxsZXRdICs9IHdhbGxldEZlZTsKICAgICAgICAgICAgQXNzaWduRmVlVG9XYWxsZXQocmVzZXJ2ZSwgd2FsbGV0LCB3YWxsZXRGZWUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGZlZVRvQnVybiA+IDApIHsKICAgICAgICAgICAgQXNzaWduQnVybkZlZXMocmVzZXJ2ZSwgZmVlVG9CdXJuKTsKICAgICAgICAgICAgcmVzZXJ2ZUZlZVRvQnVybltyZXNlcnZlXSArPSBmZWVUb0J1cm47CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxhYmxlIGJ5IGFueW9uZQogICAgZXZlbnQgQnVybkFzc2lnbmVkRmVlcyhhZGRyZXNzIGluZGV4ZWQgcmVzZXJ2ZSwgYWRkcmVzcyBzZW5kZXIpOwoKICAgIGZ1bmN0aW9uIGJ1cm5SZXNlcnZlRmVlcyhhZGRyZXNzIHJlc2VydmUpIHB1YmxpYyB7CiAgICAgICAgdWludCBidXJuQW1vdW50ID0gcmVzZXJ2ZUZlZVRvQnVybltyZXNlcnZlXTsKICAgICAgICByZXF1aXJlKGJ1cm5BbW91bnQgPiAxKTsKICAgICAgICByZXNlcnZlRmVlVG9CdXJuW3Jlc2VydmVdID0gMTsgLy8gbGVhdmUgMSB0d2VpIHRvIGF2b2lkIHNwaWtlcyBpbiBnYXMgZmVlCiAgICAgICAgcmVxdWlyZShrbmMuYnVybkZyb20ocmVzZXJ2ZUtOQ1dhbGxldFtyZXNlcnZlXSwgYnVybkFtb3VudCAtIDEpKTsKCiAgICAgICAgQnVybkFzc2lnbmVkRmVlcyhyZXNlcnZlLCBtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBldmVudCBTZW5kV2FsbGV0RmVlcyhhZGRyZXNzIGluZGV4ZWQgd2FsbGV0LCBhZGRyZXNzIHJlc2VydmUsIGFkZHJlc3Mgc2VuZGVyKTsKCiAgICAvLyB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxhYmxlIGJ5IGFueW9uZQogICAgZnVuY3Rpb24gc2VuZEZlZVRvV2FsbGV0KGFkZHJlc3Mgd2FsbGV0LCBhZGRyZXNzIHJlc2VydmUpIHB1YmxpYyB7CiAgICAgICAgdWludCBmZWVBbW91bnQgPSByZXNlcnZlRmVlVG9XYWxsZXRbcmVzZXJ2ZV1bd2FsbGV0XTsKICAgICAgICByZXF1aXJlKGZlZUFtb3VudCA+IDEpOwogICAgICAgIHJlc2VydmVGZWVUb1dhbGxldFtyZXNlcnZlXVt3YWxsZXRdID0gMTsgLy8gbGVhdmUgMSB0d2VpIHRvIGF2b2lkIHNwaWtlcyBpbiBnYXMgZmVlCiAgICAgICAgcmVxdWlyZShrbmMudHJhbnNmZXJGcm9tKHJlc2VydmVLTkNXYWxsZXRbcmVzZXJ2ZV0sIHdhbGxldCwgZmVlQW1vdW50IC0gMSkpOwoKICAgICAgICBTZW5kV2FsbGV0RmVlcyh3YWxsZXQsIHJlc2VydmUsIG1zZy5zZW5kZXIpOwogICAgfQp9CgppbnRlcmZhY2UgRVJDMjAgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50IHN1cHBseSk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludCByZW1haW5pbmcpOwogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQgZGlnaXRzKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOwp9'.
	

]
