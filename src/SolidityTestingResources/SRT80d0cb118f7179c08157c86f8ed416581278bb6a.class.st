Class {
	#name : #SRT80d0cb118f7179c08157c86f8ed416581278bb6a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT80d0cb118f7179c08157c86f8ed416581278bb6a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludCBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7CiAgICBpZiAoIWFzc2VydGlvbikgewogICAgICB0aHJvdzsKICAgIH0KICB9Cn0KCgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKfQoKCgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuIAogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAvKioKICAgKiBAZGV2IEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrLgogICAqLwogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICBpZihtc2cuZGF0YS5sZW5ndGggPCBzaXplICsgNCkgewogICAgICAgdGhyb3c7CiAgICAgfQogICAgIF87CiAgfQoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLiAKICAqIEByZXR1cm4gQW4gdWludCByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKCgoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgoKCgoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWFudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFydCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBCYXNpY1Rva2VuLCBFUkMyMCB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIGlmIChfdmFsdWUgPiBfYWxsb3dhbmNlKSB0aHJvdzsKCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlYWhsZiBvZiBtc2cuc2VuZGVyLgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93OwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYW4gYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9Cgp9CgoKCgoKCi8vLyBAdGl0bGUgU0hDIFByb3RvY29sIFRva2VuLgovLy8gRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhpcyB0b2tlbiBzYWxlLCBwbGVhc2UgdmlzaXQgaHR0cHM6Ly9neG4uaW8KLy8vIEBhdXRob3IgQXJub2xkIC0gPDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iY2JhYWI5YTVhNGE3YWY4YmFjYjNhNWU1YTJhNCI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+LCBCb2IgLSA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI4M2UxZWNlMWMzZTRmYmVkYWRlYWVjIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPj4uCmNvbnRyYWN0IFNIQ1Rva2VuIGlzIFN0YW5kYXJkVG9rZW4gewogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBOQU1FID0gIuWVhuS8muW4gSI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IFNZTUJPTCA9ICJTSEMiOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgREVDSU1BTFMgPSAxODsKCiAgICAvLy8gRHVyaW5nIHRva2VuIHNhbGUsIHdlIHVzZSBvbmUgY29uc2lzdGVudCBwcmljZTogMTAwMCBTSEMvRVRILgogICAgLy8vIFdlIHNwbGl0IHRoZSBlbnRpcmUgdG9rZW4gc2FsZSBwZXJpb2QgaW50byAzIHBoYXNlcywgZWFjaAogICAgLy8vIHBoYXNlIGhhcyBhIGRpZmZlcmVudCBib251cyBzZXR0aW5nIGFzIHNwZWNpZmllZCBpbiBgYm9udXNQZXJjZW50YWdlc2AuCiAgICAvLy8gVGhlIHJlYWwgcHJpY2UgZm9yIHBoYXNlIGkgaXMgYCgxICsgYm9udXNQZXJjZW50YWdlc1tpXS8xMDAuMCkgKiBCQVNFX1JBVEVgLgogICAgLy8vIFRoZSBmaXJzdCBwaGFzZSBvciBlYXJseS1iaXJkIHBoYXNlIGhhcyBhIG11Y2ggaGlnaGVyIGJvbnVzLgogICAgdWludDhbMTBdIHB1YmxpYyBib251c1BlcmNlbnRhZ2VzID0gWwogICAgICAgIDIwLAogICAgICAgIDEwLAogICAgICAgIDAKICAgIF07CgogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTlVNX09GX1BIQVNFID0gMzsKICAKICAgIC8vLyBFYWNoIHBoYXNlIGNvbnRhaW5zIGV4YWN0bHkgMjkwMDAgRXRoZXJldW0gYmxvY2tzLCB3aGljaCBpcyByb3VnaGx5IDcgZGF5cywKICAgIC8vLyB3aGljaCBtYWtlcyB0aGlzIDMtcGhhc2Ugc2FsZSBwZXJpb2Qgcm91Z2hseSAyMSBkYXlzLgogICAgLy8vIFNlZSBodHRwczovL3d3dy5ldGhlcmV1bS5vcmcvY3Jvd2RzYWxlI3NjaGVkdWxpbmctYS1jYWxsCiAgICB1aW50MTYgcHVibGljIGNvbnN0YW50IEJMT0NLU19QRVJfUEhBU0UgPSAyOTAwMDsKCiAgICAvLy8gVGhpcyBpcyB3aGVyZSB3ZSBob2xkIEVUSCBkdXJpbmcgdGhpcyB0b2tlbiBzYWxlLiBXZSB3aWxsIG5vdCB0cmFuc2ZlciBhbnkgRXRoZXIKICAgIC8vLyBvdXQgb2YgdGhpcyBhZGRyZXNzIGJlZm9yZSB3ZSBpbnZvY2F0ZSB0aGUgYGNsb3NlYCBmdW5jdGlvbiB0byBmaW5hbGl6ZSB0aGUgc2FsZS4gCiAgICAvLy8gVGhpcyBwcm9taXNlIGlzIG5vdCBndWFucmFudGVlZCBieSBzbWFydCBjb250cmFjdCBieSBjYW4gYmUgdmVyaWZpZWQgd2l0aCBwdWJsaWMKICAgIC8vLyBFdGhlcmV1bSB0cmFuc2FjdGlvbnMgZGF0YSBhdmFpbGFibGUgb24gc2V2ZXJhbCBibG9ja2NoYWluIGJyb3dzZXJzLgogICAgLy8vIFRoaXMgaXMgdGhlIG9ubHkgYWRkcmVzcyBmcm9tIHdoaWNoIGBzdGFydGAgYW5kIGBjbG9zZWAgY2FuIGJlIGludm9jYXRlZC4KICAgIC8vLwogICAgLy8vIE5vdGU6IHRoaXMgd2lsbCBiZSBpbml0aWFsaXplZCBkdXJpbmcgdGhlIGNvbnRyYWN0IGRlcGxveW1lbnQuCiAgICBhZGRyZXNzIHB1YmxpYyB0YXJnZXQ7CgogICAgLy8vIGBmaXJzdGJsb2NrYCBzcGVjaWZpZXMgZnJvbSB3aGljaCBibG9jayBvdXIgdG9rZW4gc2FsZSBzdGFydHMuCiAgICAvLy8gVGhpcyBjYW4gb25seSBiZSBtb2RpZmllZCBvbmNlIGJ5IHRoZSBvd25lciBvZiBgdGFyZ2V0YCBhZGRyZXNzLgogICAgdWludCBwdWJsaWMgZmlyc3RibG9jayA9IDA7CgogICAgLy8vIEluZGljYXRlcyB3aGV0aGVyIHVuc29sZCB0b2tlbiBoYXZlIGJlZW4gaXNzdWVkLiBUaGlzIHBhcnQgb2YgU0hDIHRva2VuCiAgICAvLy8gaXMgbWFuYWdlZCBieSB0aGUgcHJvamVjdCB0ZWFtIGFuZCBpcyBpc3N1ZWQgZGlyZWN0bHkgdG8gYHRhcmdldGAuCiAgICBib29sIHB1YmxpYyB1bnNvbGRUb2tlbklzc3VlZCA9IGZhbHNlOwoKICAgIC8vLyBNaW5pbXVtIGFtb3VudCBvZiBmdW5kcyB0byBiZSByYWlzZWQgZm9yIHRoZSBzYWxlIHRvIHN1Y2NlZWQuIAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgR09BTCA9IDMwMDAgZXRoZXI7CgogICAgLy8vIE1heGltdW0gYW1vdW50IG9mIGZ1bmQgdG8gYmUgcmFpc2VkLCB0aGUgc2FsZSBlbmRzIG9uIHJlYWNoaW5nIHRoaXMgYW1vdW50LgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgSEFSRF9DQVAgPSA0NTAwIGV0aGVyOwoKICAgIC8vLyBCYXNlIGV4Y2hhbmdlIHJhdGUgaXMgc2V0IHRvIDEgRVRIID0gMTA1MCBTSEMuCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBCQVNFX1JBVEUgPSAxMDUwOwoKICAgIC8vLyBBIHNpbXBsZSBzdGF0IGZvciBlbWl0dGluZyBldmVudHMuCiAgICB1aW50IHB1YmxpYyB0b3RhbEV0aFJlY2VpdmVkID0gMDsKCiAgICAvLy8gSXNzdWUgZXZlbnQgaW5kZXggc3RhcnRpbmcgZnJvbSAwLgogICAgdWludCBwdWJsaWMgaXNzdWVJbmRleCA9IDA7CgogICAgLyogCiAgICAgKiBFVkVOVFMKICAgICAqLwoKICAgIC8vLyBFbWl0dGVkIG9ubHkgb25jZSBhZnRlciB0b2tlbiBzYWxlIHN0YXJ0cy4KICAgIGV2ZW50IFNhbGVTdGFydGVkKCk7CgogICAgLy8vIEVtaXR0ZWQgb25seSBvbmNlIGFmdGVyIHRva2VuIHNhbGUgZW5kZWQgKGFsbCB0b2tlbiBpc3N1ZWQpLgogICAgZXZlbnQgU2FsZUVuZGVkKCk7CgogICAgLy8vIEVtaXR0ZWQgd2hlbiBhIGZ1bmN0aW9uIGlzIGludm9jYXRlZCBieSB1bmF1dGhvcml6ZWQgYWRkcmVzc2VzLgogICAgZXZlbnQgSW52YWxpZENhbGxlcihhZGRyZXNzIGNhbGxlcik7CgogICAgLy8vIEVtaXR0ZWQgd2hlbiBhIGZ1bmN0aW9uIGlzIGludm9jYXRlZCB3aXRob3V0IHRoZSBzcGVjaWZpZWQgcHJlY29uZGl0aW9ucy4KICAgIC8vLyBUaGlzIGV2ZW50IHdpbGwgbm90IGNvbWUgYWxvbmUgd2l0aCBhbiBleGNlcHRpb24uCiAgICBldmVudCBJbnZhbGlkU3RhdGUoYnl0ZXMgbXNnKTsKCiAgICAvLy8gRW1pdHRlZCBmb3IgZWFjaCBzdWN1ZXNzZnVsIHRva2VuIHB1cmNoYXNlLgogICAgZXZlbnQgSXNzdWUodWludCBpc3N1ZUluZGV4LCBhZGRyZXNzIGFkZHIsIHVpbnQgZXRoQW1vdW50LCB1aW50IHRva2VuQW1vdW50KTsKCiAgICAvLy8gRW1pdHRlZCBpZiB0aGUgdG9rZW4gc2FsZSBzdWNjZWVkZWQuCiAgICBldmVudCBTYWxlU3VjY2VlZGVkKCk7CgogICAgLy8vIEVtaXR0ZWQgaWYgdGhlIHRva2VuIHNhbGUgZmFpbGVkLgogICAgLy8vIFdoZW4gdG9rZW4gc2FsZSBmYWlsZWQsIGFsbCBFdGhlciB3aWxsIGJlIHJldHVybiB0byB0aGUgb3JpZ2luYWwgcHVyY2hhc2luZwogICAgLy8vIGFkZHJlc3Mgd2l0aCBhIG1pbm9yIGRlZHVjdGlvbiBvZiB0cmFuc2FjdGlvbiBmZWXplJvlnZNhcykKICAgIGV2ZW50IFNhbGVGYWlsZWQoKTsKCiAgICAvKgogICAgICogTU9ESUZJRVJTCiAgICAgKi8KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIGlmICh0YXJnZXQgPT0gbXNnLnNlbmRlcikgewogICAgICAgICAgICBfOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIEludmFsaWRDYWxsZXIobXNnLnNlbmRlcik7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgIH0KCiAgICBtb2RpZmllciBiZWZvcmVTdGFydCB7CiAgICAgICAgaWYgKCFzYWxlU3RhcnRlZCgpKSB7CiAgICAgICAgICAgIF87CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgSW52YWxpZFN0YXRlKCJTYWxlIGhhcyBub3Qgc3RhcnRlZCB5ZXQiKTsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQoKICAgIG1vZGlmaWVyIGluUHJvZ3Jlc3MgewogICAgICAgIGlmIChzYWxlU3RhcnRlZCgpICYmICFzYWxlRW5kZWQoKSkgewogICAgICAgICAgICBfOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIEludmFsaWRTdGF0ZSgiU2FsZSBpcyBub3QgaW4gcHJvZ3Jlc3MiKTsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQoKICAgIG1vZGlmaWVyIGFmdGVyRW5kIHsKICAgICAgICBpZiAoc2FsZUVuZGVkKCkpIHsKICAgICAgICAgICAgXzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBJbnZhbGlkU3RhdGUoIlNhbGUgaXMgbm90IGVuZGVkIHlldCIpOwogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDT05TVFJVQ1RPUiAKICAgICAqIAogICAgICogQGRldiBJbml0aWFsaXplIHRoZSBTSEMgVG9rZW4KICAgICAqIEBwYXJhbSBfdGFyZ2V0IFRoZSBlc2Nyb3cgYWNjb3VudCBhZGRyZXNzLCBhbGwgZXRoZXJzIHdpbGwKICAgICAqIGJlIHNlbnQgdG8gdGhpcyBhZGRyZXNzLgogICAgICogVGhpcyBhZGRyZXNzIHdpbGwgYmUgOiAweGU1OTdjNWFiODdlOWQyMGFkNDQ1OTc2ZDliMDE2YzM3Zjg2NGRhMmIKICAgICAqLwogICAgZnVuY3Rpb24gU0hDVG9rZW4oYWRkcmVzcyBfdGFyZ2V0KSB7CiAgICAgICAgdGFyZ2V0ID0gX3RhcmdldDsKICAgICAgICB0b3RhbFN1cHBseSA9IDEwICoqIDI2OwogICAgICAgIGJhbGFuY2VzW3RhcmdldF0gPSB0b3RhbFN1cHBseTsKICAgIH0KCiAgICAvKgogICAgICogUFVCTElDIEZVTkNUSU9OUwogICAgICovCgogICAgLy8vIEBkZXYgU3RhcnQgdGhlIHRva2VuIHNhbGUuCiAgICAvLy8gQHBhcmFtIF9maXJzdGJsb2NrIFRoZSBibG9jayBmcm9tIHdoaWNoIHRoZSBzYWxlIHdpbGwgc3RhcnQuCiAgICBmdW5jdGlvbiBzdGFydCh1aW50IF9maXJzdGJsb2NrKSBwdWJsaWMgb25seU93bmVyIGJlZm9yZVN0YXJ0IHsKICAgICAgICBpZiAoX2ZpcnN0YmxvY2sgPD0gYmxvY2subnVtYmVyKSB7CiAgICAgICAgICAgIC8vIE11c3Qgc3BlY2lmeSBhIGJsb2NrIGluIHRoZSBmdXR1cmUuCiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KCiAgICAgICAgZmlyc3RibG9jayA9IF9maXJzdGJsb2NrOwogICAgICAgIFNhbGVTdGFydGVkKCk7CiAgICB9CgogICAgLy8vIEBkZXYgVHJpZ2dlcnMgdW5zb2xkIHRva2VucyB0byBiZSBpc3N1ZWQgdG8gYHRhcmdldGAgYWRkcmVzcy4KICAgIGZ1bmN0aW9uIGNsb3NlKCkgcHVibGljIG9ubHlPd25lciBhZnRlckVuZCB7CiAgICAgICAgaWYgKHRvdGFsRXRoUmVjZWl2ZWQgPCBHT0FMKSB7CiAgICAgICAgICAgIFNhbGVGYWlsZWQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBTYWxlU3VjY2VlZGVkKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIGN1cnJlbnQgcHJpY2UuCiAgICBmdW5jdGlvbiBwcmljZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHRva2VucykgewogICAgICAgIHJldHVybiBjb21wdXRlVG9rZW5BbW91bnQoMSBldGhlcik7CiAgICB9CgogICAgLy8vIEBkZXYgVGhpcyBkZWZhdWx0IGZ1bmN0aW9uIGFsbG93cyB0b2tlbiB0byBiZSBwdXJjaGFzZWQgYnkgZGlyZWN0bHkKICAgIC8vLyBzZW5kaW5nIGV0aGVyIHRvIHRoaXMgc21hcnQgY29udHJhY3QuCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICBpc3N1ZVRva2VuKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vLyBAZGV2IElzc3VlIHRva2VuIGJhc2VkIG9uIEV0aGVyIHJlY2VpdmVkLgogICAgLy8vIEBwYXJhbSByZWNpcGllbnQgQWRkcmVzcyB0aGF0IG5ld2x5IGlzc3VlZCB0b2tlbiB3aWxsIGJlIHNlbnQgdG8uCiAgICBmdW5jdGlvbiBpc3N1ZVRva2VuKGFkZHJlc3MgcmVjaXBpZW50KSBwYXlhYmxlIGluUHJvZ3Jlc3MgewogICAgICAgIC8vIFdlIG9ubHkgYWNjZXB0IG1pbmltdW0gcHVyY2hhc2Ugb2YgMC4wMSBFVEguCiAgICAgICAgYXNzZXJ0KG1zZy52YWx1ZSA+PSAwLjAxIGV0aGVyKTsKCiAgICAgICAgLy8gV2Ugb25seSBhY2NlcHQgbWF4aW11bSBwdXJjaGFzZSBvZiAzNSBFVEguCiAgICAgICAgYXNzZXJ0KG1zZy52YWx1ZSA8PSAzNSBldGhlcik7CgogICAgICAgIC8vIFdlIG9ubHkgYWNjZXB0IHRvdGFsRXRoUmVjZWl2ZWQgPCBIQVJEX0NBUAogICAgICAgIHVpbnQgZXRoUmVjZWl2ZWQgPSB0b3RhbEV0aFJlY2VpdmVkICsgbXNnLnZhbHVlOwogICAgICAgIGFzc2VydChldGhSZWNlaXZlZCA8PSBIQVJEX0NBUCk7CgogICAgICAgIHVpbnQgdG9rZW5zID0gY29tcHV0ZVRva2VuQW1vdW50KG1zZy52YWx1ZSk7CiAgICAgICAgdG90YWxFdGhSZWNlaXZlZCA9IHRvdGFsRXRoUmVjZWl2ZWQuYWRkKG1zZy52YWx1ZSk7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQodG9rZW5zKTsKICAgICAgICBiYWxhbmNlc1t0YXJnZXRdID0gYmFsYW5jZXNbdGFyZ2V0XS5zdWIodG9rZW5zKTsKCiAgICAgICAgSXNzdWUoCiAgICAgICAgICAgIGlzc3VlSW5kZXgrKywKICAgICAgICAgICAgcmVjaXBpZW50LAogICAgICAgICAgICBtc2cudmFsdWUsCiAgICAgICAgICAgIHRva2VucwogICAgICAgICk7CgogICAgICAgIGlmICghdGFyZ2V0LnNlbmQobXNnLnZhbHVlKSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICB9CgogICAgLyoKICAgICAqIElOVEVSTkFMIEZVTkNUSU9OUwogICAgICovCiAgCiAgICAvLy8gQGRldiBDb21wdXRlIHRoZSBhbW91bnQgb2YgU0hDIHRva2VuIHRoYXQgY2FuIGJlIHB1cmNoYXNlZC4KICAgIC8vLyBAcGFyYW0gZXRoQW1vdW50IEFtb3VudCBvZiBFdGhlciB0byBwdXJjaGFzZSBTSEMuCiAgICAvLy8gQHJldHVybiBBbW91bnQgb2YgU0hDIHRva2VuIHRvIHB1cmNoYXNlCiAgICBmdW5jdGlvbiBjb21wdXRlVG9rZW5BbW91bnQodWludCBldGhBbW91bnQpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdG9rZW5zKSB7CiAgICAgICAgdWludCBwaGFzZSA9IChibG9jay5udW1iZXIgLSBmaXJzdGJsb2NrKS5kaXYoQkxPQ0tTX1BFUl9QSEFTRSk7CgogICAgICAgIC8vIEEgc2FmZSBjaGVjawogICAgICAgIGlmIChwaGFzZSA+PSBib251c1BlcmNlbnRhZ2VzLmxlbmd0aCkgewogICAgICAgICAgICBwaGFzZSA9IGJvbnVzUGVyY2VudGFnZXMubGVuZ3RoIC0gMTsKICAgICAgICB9CgogICAgICAgIHVpbnQgdG9rZW5CYXNlID0gZXRoQW1vdW50Lm11bChCQVNFX1JBVEUpOwogICAgICAgIHVpbnQgdG9rZW5Cb251cyA9IHRva2VuQmFzZS5tdWwoYm9udXNQZXJjZW50YWdlc1twaGFzZV0pLmRpdigxMDApOwoKICAgICAgICB0b2tlbnMgPSB0b2tlbkJhc2UuYWRkKHRva2VuQm9udXMpOwogICAgfQoKICAgIC8vLyBAcmV0dXJuIHRydWUgaWYgc2FsZSBoYXMgc3RhcnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLgogICAgZnVuY3Rpb24gc2FsZVN0YXJ0ZWQoKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIChmaXJzdGJsb2NrID4gMCAmJiBibG9jay5udW1iZXIgPj0gZmlyc3RibG9jayk7CiAgICB9CgogICAgLy8vIEByZXR1cm4gdHJ1ZSBpZiBzYWxlIGhhcyBlbmRlZCwgZmFsc2Ugb3RoZXJ3aXNlLgogICAgZnVuY3Rpb24gc2FsZUVuZGVkKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBmaXJzdGJsb2NrID4gMCAmJiAoc2FsZUR1ZSgpIHx8IGhhcmRDYXBSZWFjaGVkKCkpOwogICAgfQoKICAgIC8vLyBAcmV0dXJuIHRydWUgaWYgc2FsZSBpcyBkdWUgd2hlbiB0aGUgbGFzdCBwaGFzZSBpcyBmaW5pc2hlZC4KICAgIGZ1bmN0aW9uIHNhbGVEdWUoKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGJsb2NrLm51bWJlciA+PSBmaXJzdGJsb2NrICsgQkxPQ0tTX1BFUl9QSEFTRSAqIE5VTV9PRl9QSEFTRTsKICAgIH0KCiAgICAvLy8gQHJldHVybiB0cnVlIGlmIHRoZSBoYXJkIGNhcCBpcyByZWFjaGVkLgogICAgZnVuY3Rpb24gaGFyZENhcFJlYWNoZWQoKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRvdGFsRXRoUmVjZWl2ZWQgPj0gSEFSRF9DQVA7CiAgICB9Cn0='.
	

]
