Class {
	#name : #SRT50dbb89261c38e9f7c1070d1ec4c266b2e291085,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT50dbb89261c38e9f7c1070d1ec4c266b2e291085 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgIHJldmVydCgpOwogICAgfQogICAgXzsKICB9Cn0KCmNvbnRyYWN0IFJCSW5mb3JtYXRpb25TdG9yZSBpcyBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIHByb2ZpdENvbnRhaW5lckFkZHJlc3M7CiAgICBhZGRyZXNzIHB1YmxpYyBjb21wYW55V2FsbGV0QWRkcmVzczsKICAgIHVpbnQgcHVibGljIGV0aGVyUmF0aW9Gb3JPd25lcjsKICAgIGFkZHJlc3MgcHVibGljIG11bHRpc2lnOwoKICAgIGZ1bmN0aW9uIFJCSW5mb3JtYXRpb25TdG9yZShhZGRyZXNzIF9wcm9maXRDb250YWluZXJBZGRyZXNzLCBhZGRyZXNzIF9jb21wYW55V2FsbGV0QWRkcmVzcywgdWludCBfZXRoZXJSYXRpb0Zvck93bmVyLCBhZGRyZXNzIF9tdWx0aXNpZykgewogICAgICAgIHByb2ZpdENvbnRhaW5lckFkZHJlc3MgPSBfcHJvZml0Q29udGFpbmVyQWRkcmVzczsKICAgICAgICBjb21wYW55V2FsbGV0QWRkcmVzcyA9IF9jb21wYW55V2FsbGV0QWRkcmVzczsKICAgICAgICBldGhlclJhdGlvRm9yT3duZXIgPSBfZXRoZXJSYXRpb0Zvck93bmVyOwogICAgICAgIG11bHRpc2lnID0gX211bHRpc2lnOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByb2ZpdENvbnRhaW5lckFkZHJlc3MoYWRkcmVzcyBfYWRkcmVzcykgIHsKICAgICAgICByZXF1aXJlKG11bHRpc2lnID09IG1zZy5zZW5kZXIpOwogICAgICAgIGlmKF9hZGRyZXNzICE9IDB4MCkgewogICAgICAgICAgICBwcm9maXRDb250YWluZXJBZGRyZXNzID0gX2FkZHJlc3M7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldENvbXBhbnlXYWxsZXRBZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MpICB7CiAgICAgICAgcmVxdWlyZShtdWx0aXNpZyA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBpZihfYWRkcmVzcyAhPSAweDApIHsKICAgICAgICAgICAgY29tcGFueVdhbGxldEFkZHJlc3MgPSBfYWRkcmVzczsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0RXRoZXJSYXRpb0Zvck93bmVyKHVpbnQgX3ZhbHVlKSAgewogICAgICAgIHJlcXVpcmUobXVsdGlzaWcgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgaWYoX3ZhbHVlICE9IDApIHsKICAgICAgICAgICAgZXRoZXJSYXRpb0Zvck93bmVyID0gX3ZhbHVlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VNdWx0aVNpZyhhZGRyZXNzIG5ld0FkZHJlc3MpewogICAgICAgIHJlcXVpcmUobXVsdGlzaWcgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgbXVsdGlzaWcgPSBuZXdBZGRyZXNzOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgbmV3T3duZXIpewogICAgICAgIHJlcXVpcmUobXVsdGlzaWcgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KfQoKLyoqCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiID4gMCk7CiAgICB1aW50IGMgPSBhIC8gYjsKICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7CiAgICBpZiAoIWFzc2VydGlvbikgewogICAgICByZXZlcnQoKTsKICAgIH0KICB9Cn0KCi8qCiAqIEVSQzIwQmFzaWMKICogU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwp9CgovKgogKiBFUkMyMCBpbnRlcmZhY2UKICogc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgovKgogKiBCYXNpYyB0b2tlbgogKiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcwogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAvKgogICAqIEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrCiAgICovCiAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7CiAgICAgICByZXZlcnQoKTsKICAgICB9CiAgICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCi8qKgogKiBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOgogKiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSByZXZlcnQoKSBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgcmV2ZXJ0KCk7CgogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCmNvbnRyYWN0IFJhdGUgewogICAgdWludCBwdWJsaWMgRVRIX1VTRF9yYXRlOwogICAgUkJJbmZvcm1hdGlvblN0b3JlIHB1YmxpYyByYkluZm9ybWF0aW9uU3RvcmU7CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IHJiSW5mb3JtYXRpb25TdG9yZS5vd25lcigpKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIFJhdGUodWludCBfcmF0ZSwgYWRkcmVzcyBfYWRkcmVzcykgewogICAgICAgIEVUSF9VU0RfcmF0ZSA9IF9yYXRlOwogICAgICAgIHJiSW5mb3JtYXRpb25TdG9yZSA9IFJCSW5mb3JtYXRpb25TdG9yZShfYWRkcmVzcyk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UmF0ZSh1aW50IF9yYXRlKSBvbmx5T3duZXIgewogICAgICAgIEVUSF9VU0RfcmF0ZSA9IF9yYXRlOwogICAgfQp9CgovKioKQHRpdGxlIFNwb25zZWVUb2tlbk1vZGVsU29sYUNvaW4KQGRldiBUT0RPIGFkZCBjb250cmFjdCBjb2RlIG9mIHRocmVlIGNvbnRyYWN0IGFib3ZlIHdoZW4gZGVwbG95IHRvIG1haW5uZXQKKi8KY29udHJhY3QgU3BvbnNlZVRva2VuTW9kZWxTb2xhQ29pbiBpcyBTdGFuZGFyZFRva2VuIHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiU09MQSBDT0lOIjsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDE4OwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiU0xDIjsKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5ID0gNTAwMDAwMDAwICogKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsKICAgIHVpbnQgcHVibGljIGNhcCA9IDEwMDAwMDAwMDAgKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOyAvLyBtYXhpbXVtIGNhcCA9IDEwIDAwMCAwMDAgJCA9IDEgMDAwIDAwMCAwMDAgdG9rZW5zCiAgICBSQkluZm9ybWF0aW9uU3RvcmUgcHVibGljIHJiSW5mb3JtYXRpb25TdG9yZTsKICAgIFJhdGUgcHVibGljIHJhdGU7CiAgICB1aW50IHB1YmxpYyBtaW5pbXVtU3VwcG9ydCA9IDUwMDsgLy8gbWluaW11bSBzdXBwb3J0IGlzIDUkCiAgICB1aW50IHB1YmxpYyBldGhlclJhdGlvRm9ySW52ZXN0b3IgPSAxMDsgLy8gZXRoZXJSYXRpbyAoMTAlKSB0byBzZW5kIGV0aGVyIHRvIGludmVzdG9yCiAgICBhZGRyZXNzIHB1YmxpYyBzcG9uc2VlQWRkcmVzczsKICAgIGFkZHJlc3MgcHVibGljIG11bHRpU2lnQWRkcmVzczsgLy8gYWNjb3VudCBjb250cm9scyB0cmFuc2ZlciBldGhlci90b2tlbiBhbmQgY2hhbmdlIG11bHRpc2lnIGFkZHJlc3MKICAgIGFkZHJlc3MgcHVibGljIGFjY291bnRBZGRyZXNzRm9yU3BvbnNlZUFkZHJlc3M7IC8vIGFjY291bnQgY29udHJvbHMgc3BvbnNlZSBhZGRyZXNzIHRvIHJlY2VpdmUgZXRoZXIKICAgIGJvb2wgcHVibGljIGlzUGF5YWJsZUVuYWJsZWQgPSBmYWxzZTsKCiAgICBldmVudCBMb2dSZWNlaXZlZEV0aGVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgZXRoZXJWYWx1ZSwgc3RyaW5nIHRva2VuTmFtZSk7CiAgICBldmVudCBMb2dUcmFuc2ZlckZyb21Pd25lcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHRva2VuVmFsdWUsIHVpbnQgZXRoZXJWYWx1ZSwgdWludCByYXRlVVNERVRIKTsKICAgIGV2ZW50IExvZ0J1eShhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IGluZGV4ZWQgdmFsdWUsIHVpbnQgcGF5bWVudElkKTsKICAgIGV2ZW50IExvZ1JvbGxiYWNrVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CiAgICBldmVudCBMb2dFeGNoYW5nZShhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRva2VuLCB1aW50IHZhbHVlKTsKICAgIGV2ZW50IExvZ0luY3JlYXNlQ2FwKHVpbnQgdmFsdWUpOwogICAgZXZlbnQgTG9nRGVjcmVhc2VDYXAodWludCB2YWx1ZSk7CiAgICBldmVudCBMb2dTZXRSQkluZm9ybWF0aW9uU3RvcmVBZGRyZXNzKGFkZHJlc3MgaW5kZXhlZCB0byk7CiAgICBldmVudCBMb2dTZXROYW1lKHN0cmluZyBuYW1lKTsKICAgIGV2ZW50IExvZ1NldFN5bWJvbChzdHJpbmcgc3ltYm9sKTsKICAgIGV2ZW50IExvZ01pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKICAgIGV2ZW50IExvZ0NoYW5nZU11bHRpU2lnQWRkcmVzcyhhZGRyZXNzIGluZGV4ZWQgdG8pOwogICAgZXZlbnQgTG9nQ2hhbmdlQWNjb3VudEFkZHJlc3NGb3JTcG9uc2VlQWRkcmVzcyhhZGRyZXNzIGluZGV4ZWQgdG8pOwogICAgZXZlbnQgTG9nQ2hhbmdlU3BvbnNlZUFkZHJlc3MoYWRkcmVzcyBpbmRleGVkIHRvKTsKICAgIGV2ZW50IExvZ0NoYW5nZUlzUGF5YWJsZUVuYWJsZWQoKTsKCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gcmJJbmZvcm1hdGlvblN0b3JlLm93bmVyKCkpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgLy8gY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIFNwb25zZWVUb2tlbk1vZGVsU29sYUNvaW4oCiAgICAgICAgYWRkcmVzcyBfcmJJbmZvcm1hdGlvblN0b3JlQWRkcmVzcywKICAgICAgICBhZGRyZXNzIF9yYXRlQWRkcmVzcywKICAgICAgICBhZGRyZXNzIF9zcG9uc2VlLAogICAgICAgIGFkZHJlc3MgX211bHRpU2lnLAogICAgICAgIGFkZHJlc3MgX2FjY291bnRGb3JTcG9uc2VlQWRkcmVzcywKICAgICAgICBhZGRyZXNzIF90bwogICAgKSB7CiAgICAgICAgcmJJbmZvcm1hdGlvblN0b3JlID0gUkJJbmZvcm1hdGlvblN0b3JlKF9yYkluZm9ybWF0aW9uU3RvcmVBZGRyZXNzKTsKICAgICAgICByYXRlID0gUmF0ZShfcmF0ZUFkZHJlc3MpOwogICAgICAgIHNwb25zZWVBZGRyZXNzID0gX3Nwb25zZWU7CiAgICAgICAgbXVsdGlTaWdBZGRyZXNzID0gX211bHRpU2lnOwogICAgICAgIGFjY291bnRBZGRyZXNzRm9yU3BvbnNlZUFkZHJlc3MgPSBfYWNjb3VudEZvclNwb25zZWVBZGRyZXNzOwogICAgICAgIGJhbGFuY2VzW190b10gPSB0b3RhbFN1cHBseTsKICAgIH0KCiAgICAvKioKICAgIEBub3RpY2UgUmVjZWl2ZSBldGhlciBmcm9tIGFueSBFT0EgYWNjb3VudHMuIEFtb3VudCBvZiBldGhlciByZWNlaXZlZCBpbiB0aGlzIGZ1bmN0aW9uIGlzIGRpc3RyaWJ1dGVkIHRvIDMgcGFydHMuCiAgICBPbmUgaXMgYSBwcm9maXRDb250YWluZXJBZGRyZXNzIHdoaWNoIGlzIGFkZHJlc3Mgb2YgY29udGFpbmVyV2FsbGV0IHRvIGRpdmlkZW5kIHRvIGludmVzdG9yIG9mIEJvb3N0IHRva2VuLgogICAgQW5vdGhlciBpcyBhbiBvd25lckFkZHJlc3Mgd2hpY2ggaXMgYWRkcmVzcyBvZiBvd25lciBvZiBSRUFMQk9PU1Qgc2l0ZS4KICAgIFRoZSBvdGhlciBpcyBhbiBzcG9uc2VlQWRkcmVzcyB3aGljaCBpcyBhZGRyZXNzIG9mIG93bmVyIG9mIHRoaXMgY29udHJhY3QuCiAgICAqLwogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICAvLyBjaGVjayBjb25kaXRpb24KICAgICAgICByZXF1aXJlKGlzUGF5YWJsZUVuYWJsZWQpOwoKICAgICAgICAvLyBjaGVjayB2YWxpZGF0aW9uCiAgICAgICAgaWYobXNnLnZhbHVlIDw9IDApIHsgcmV2ZXJ0KCk7IH0KCiAgICAgICAgLy8gY2FsY3VsYXRlIHN1cHBvcnQgYW1vdW50IGluIFVTRAogICAgICAgIHVpbnQgc3VwcG9ydGVkQW1vdW50ID0gbXNnLnZhbHVlLm11bChyYXRlLkVUSF9VU0RfcmF0ZSgpKS5kaXYoMTAqKjE4KTsKICAgICAgICAvLyBpZiBzdXBwb3J0IGlzIGxlc3MgdGhhbiBtaW5pbXVtID0+IHJldHVybiBtb25leSB0byBzdXBwb3J0ZXIKICAgICAgICBpZihzdXBwb3J0ZWRBbW91bnQgPCBtaW5pbXVtU3VwcG9ydCkgeyByZXZlcnQoKTsgfQoKICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIHJhdGlvIG9mIEV0aGVyIGZvciBkaXN0cmlidXRpb24KICAgICAgICB1aW50IGV0aGVyUmF0aW9Gb3JPd25lciA9IHJiSW5mb3JtYXRpb25TdG9yZS5ldGhlclJhdGlvRm9yT3duZXIoKTsKICAgICAgICB1aW50IGV0aGVyUmF0aW9Gb3JTcG9uc2VlID0gdWludCgxMDApLnN1YihldGhlclJhdGlvRm9yT3duZXIpLnN1YihldGhlclJhdGlvRm9ySW52ZXN0b3IpOwoKICAgICAgICAvKiBkaXZpZGUgRXRoZXIgKi8KICAgICAgICAvLyBjYWxjdWxhdGUKICAgICAgICB1aW50IGV0aGVyRm9yT3duZXIgPSBtc2cudmFsdWUubXVsKGV0aGVyUmF0aW9Gb3JPd25lcikuZGl2KDEwMCk7CiAgICAgICAgdWludCBldGhlckZvckludmVzdG9yID0gbXNnLnZhbHVlLm11bChldGhlclJhdGlvRm9ySW52ZXN0b3IpLmRpdigxMDApOwogICAgICAgIHVpbnQgZXRoZXJGb3JTcG9uc2VlID0gbXNnLnZhbHVlLm11bChldGhlclJhdGlvRm9yU3BvbnNlZSkuZGl2KDEwMCk7CgogICAgICAgIC8vIGdldCBhZGRyZXNzCiAgICAgICAgYWRkcmVzcyBwcm9maXRDb250YWluZXJBZGRyZXNzID0gcmJJbmZvcm1hdGlvblN0b3JlLnByb2ZpdENvbnRhaW5lckFkZHJlc3MoKTsKICAgICAgICBhZGRyZXNzIGNvbXBhbnlXYWxsZXRBZGRyZXNzID0gcmJJbmZvcm1hdGlvblN0b3JlLmNvbXBhbnlXYWxsZXRBZGRyZXNzKCk7CgogICAgICAgIC8vIHNlbmQgRXRoZXIKICAgICAgICBpZighcHJvZml0Q29udGFpbmVyQWRkcmVzcy5zZW5kKGV0aGVyRm9ySW52ZXN0b3IpKSB7IHJldmVydCgpOyB9CiAgICAgICAgaWYoIWNvbXBhbnlXYWxsZXRBZGRyZXNzLnNlbmQoZXRoZXJGb3JPd25lcikpIHsgcmV2ZXJ0KCk7IH0KICAgICAgICBpZighc3BvbnNlZUFkZHJlc3Muc2VuZChldGhlckZvclNwb25zZWUpKSB7IHJldmVydCgpOyB9CgogICAgICAgIC8vIHRva2VuIGFtb3VudCBpcyB0cmFuc2ZlcmVkIHRvIHNlbmRlcgogICAgICAgIC8vIDEuMCB0b2tlbiA9IDEgY2VudCwgMSB1c2QgPSAxMDAgY2VudHMKICAgICAgICAvLyB3ZWkgKiBVUyQvKDEwICoqIDE4IHdlaSkgKiAxMDAgY2VudC9VUyQgKiAoMTAgKiogMTgoZGVjaW1hbHMpKQogICAgICAgIHVpbnQgdG9rZW5BbW91bnQgPSBtc2cudmFsdWUubXVsKHJhdGUuRVRIX1VTRF9yYXRlKCkpOwoKICAgICAgICAvLyBhZGQgdG9rZW5zCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQodG9rZW5BbW91bnQpOwoKICAgICAgICAvLyBpbmNyZWFzZSB0b3RhbCBzdXBwbHkKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZCh0b2tlbkFtb3VudCk7CgogICAgICAgIC8vIGNoZWNrIGNhcAogICAgICAgIGlmKHRvdGFsU3VwcGx5ID4gY2FwKSB7IHJldmVydCgpOyB9CgogICAgICAgIC8vIHNlbmQgZXhjaGFuZ2UgZXZlbnQKICAgICAgICBMb2dFeGNoYW5nZShtc2cuc2VuZGVyLCB0aGlzLCB0b2tlbkFtb3VudCk7CgogICAgICAgIC8vIHNlbmQgRXZlbnQKICAgICAgICBMb2dSZWNlaXZlZEV0aGVyKG1zZy5zZW5kZXIsIHRoaXMsIG1zZy52YWx1ZSwgbmFtZSk7CgogICAgICAgIC8vIHRyYW5mZXIgZXZlbnQKICAgICAgICBUcmFuc2ZlcihhZGRyZXNzKDB4MCksIG1zZy5zZW5kZXIsIHRva2VuQW1vdW50KTsKICAgIH0KCiAgICAvKioKICAgIEBub3RpY2UgQ2hhbmdlIHJiSW5mb3JtYXRpb25TdG9yZUFkZHJlc3MuCiAgICBAcGFyYW0gX2FkZHJlc3MgVGhlIGFkZHJlc3Mgb2YgbmV3IHJiSW5mb3JtYXRpb25TdG9yZQogICAgKi8KICAgIGZ1bmN0aW9uIHNldFJCSW5mb3JtYXRpb25TdG9yZUFkZHJlc3MoYWRkcmVzcyBfYWRkcmVzcykgewogICAgICAgIC8vIGNoZWNrIHNlbmRlciBpcyBtdWx0aXNpZyBhZGRyZXNzCiAgICAgICAgcmVxdWlyZShtdWx0aVNpZ0FkZHJlc3MgPT0gbXNnLnNlbmRlcik7CgogICAgICAgIHJiSW5mb3JtYXRpb25TdG9yZSA9IFJCSW5mb3JtYXRpb25TdG9yZShfYWRkcmVzcyk7CgogICAgICAgIExvZ1NldFJCSW5mb3JtYXRpb25TdG9yZUFkZHJlc3MoX2FkZHJlc3MpOwogICAgfQoKICAgIC8qKgogICAgQG5vdGljZSBDaGFuZ2UgbmFtZS4KICAgIEBwYXJhbSBfbmFtZSBUaGUgbmV3IG5hbWUgb2YgdG9rZW4KICAgICovCiAgICBmdW5jdGlvbiBzZXROYW1lKHN0cmluZyBfbmFtZSkgb25seU93bmVyIHsKICAgICAgICBuYW1lID0gX25hbWU7CgogICAgICAgIExvZ1NldE5hbWUoX25hbWUpOwogICAgfQoKICAgIC8qKgogICAgQG5vdGljZSBDaGFuZ2Ugc3ltYm9sLgogICAgQHBhcmFtIF9zeW1ib2wgVGhlIG5ldyBzeW1ib2wgb2YgdG9rZW4KICAgICovCiAgICBmdW5jdGlvbiBzZXRTeW1ib2woc3RyaW5nIF9zeW1ib2wpIG9ubHlPd25lciB7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKCiAgICAgICAgTG9nU2V0U3ltYm9sKF9zeW1ib2wpOwogICAgfQoKICAgIC8qKgogICAgQG5vdGljZSBNaW50IG5ldyB0b2tlbiBhbW91bnQuCiAgICBAcGFyYW0gX2FkZHJlc3MgVGhlIGFkZHJlc3MgdGhhdCBuZXcgdG9rZW4gYW1vdW50IGlzIGFkZGVkCiAgICBAcGFyYW0gX3ZhbHVlIFRoZSBuZXcgYW1vdW50IG9mIHRva2VuCiAgICAqLwogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF9hZGRyZXNzLCB1aW50IF92YWx1ZSkgewoKICAgICAgICAvLyBjaGVjayBzZW5kZXIgaXMgbXVsdGlzaWcgYWRkcmVzcwogICAgICAgIHJlcXVpcmUobXVsdGlTaWdBZGRyZXNzID09IG1zZy5zZW5kZXIpOwoKICAgICAgICAvLyBhZGQgdG9rZW5zCiAgICAgICAgYmFsYW5jZXNbX2FkZHJlc3NdID0gYmFsYW5jZXNbX2FkZHJlc3NdLmFkZChfdmFsdWUpOwoKICAgICAgICAvLyBpbmNyZWFzZSB0b3RhbCBzdXBwbHkKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfdmFsdWUpOwoKICAgICAgICAvLyBjaGVjayBjYXAKICAgICAgICBpZih0b3RhbFN1cHBseSA+IGNhcCkgeyByZXZlcnQoKTsgfQoKICAgICAgICBMb2dNaW50KF9hZGRyZXNzLCBfdmFsdWUpOwoKICAgICAgICAvLyB0cmFuZmVyIGV2ZW50CiAgICAgICAgVHJhbnNmZXIoYWRkcmVzcygweDApLCBfYWRkcmVzcywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgIEBub3RpY2UgSW5jcmVhc2UgY2FwLgogICAgQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRoYXQgc2hvdWxkIGJlIGluY3JlYXNlZAogICAgKi8KICAgIGZ1bmN0aW9uIGluY3JlYXNlQ2FwKHVpbnQgX3ZhbHVlKSBvbmx5T3duZXIgewogICAgICAgIC8vIGNoYW5nZSBjYXAgaGVyZQogICAgICAgIGNhcCA9IGNhcC5hZGQoX3ZhbHVlKTsKCiAgICAgICAgTG9nSW5jcmVhc2VDYXAoX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgIEBub3RpY2UgRGVjcmVhc2UgY2FwLgogICAgQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRoYXQgc2hvdWxkIGJlIGRlY3JlYXNlZAogICAgKi8KICAgIGZ1bmN0aW9uIGRlY3JlYXNlQ2FwKHVpbnQgX3ZhbHVlKSBvbmx5T3duZXIgewogICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgY2FwIGlzIGxvd2VyIHRoYW4gdG90YWxTdXBwbHkgb3Igbm90CiAgICAgICAgaWYodG90YWxTdXBwbHkgPiBjYXAuc3ViKF92YWx1ZSkpIHsgcmV2ZXJ0KCk7IH0KICAgICAgICAvLyBjaGFuZ2UgY2FwIGhlcmUKICAgICAgICBjYXAgPSBjYXAuc3ViKF92YWx1ZSk7CgogICAgICAgIExvZ0RlY3JlYXNlQ2FwKF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIFJvbGxiYWNrIHRyYW5zZmVyLgogICAgQHBhcmFtIF9mcm9tIFRoZSBFT0EgYWRkcmVzcyBmb3Igcm9sbGJhY2sgdHJhbnNmZXIKICAgIEBwYXJhbSBfdG8gVGhlIEVPQSBhZGRyZXNzIGZvciByb2xsYmFjayB0cmFuc2ZlcgogICAgQHBhcmFtIF92YWx1ZSBUaGUgbnVtYmVyIG9mIHRva2VuIGZvciByb2xsYmFjayB0cmFuc2ZlcgogICAgKi8KICAgIGZ1bmN0aW9uIHJvbGxiYWNrVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSB7CiAgICAgICAgLy8gY2hlY2sgc2VuZGVyIGlzIG11bHRpc2lnIGFkZHJlc3MKICAgICAgICByZXF1aXJlKG11bHRpU2lnQWRkcmVzcyA9PSBtc2cuc2VuZGVyKTsKCiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLmFkZChfdmFsdWUpOwoKICAgICAgICBMb2dSb2xsYmFja1RyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CgogICAgICAgIC8vIHRyYW5mZXIgZXZlbnQKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgQG5vdGljZSBUcmFuc2ZlciBmcm9tIG1zZy5zZW5kZXIgZm9yIGRvd25sb2FkaW5nIG9mIGNvbnRlbnQuCiAgICBAcGFyYW0gX3RvIFRoZSBFT0EgYWRkcmVzcyBmb3IgYnV5IGNvbnRlbnQKICAgIEBwYXJhbSBfdmFsdWUgVGhlIG51bWJlciBvZiB0b2tlbiBmb3IgYnV5IGNvbnRlbnQKICAgIEBwYXJhbSBfcGF5bWVudElkIFRoZSBpZCBvZiBjb250ZW50IHdoaWNoIG1zZy5zZW5kZXIgd2FudCB0byBidXkKICAgICovCiAgICBmdW5jdGlvbiBidXkoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCB1aW50IF9wYXltZW50SWQpIHsKICAgICAgICB0cmFuc2ZlcihfdG8sIF92YWx1ZSk7CgogICAgICAgIExvZ0J1eShtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX3BheW1lbnRJZCk7CiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIFRoaXMgbWV0aG9kIHdpbGwgY2hhbmdlIG9sZCBtdWx0aSBzaWduYXR1cmUgYWRkcmVzcyB3aXRoIG5ldyBvbmUuCiAgICBAcGFyYW0gX25ld0FkZHJlc3MgbmV3IGFkZHJlc3MgaXMgc2V0CiAgICAqLwogICAgZnVuY3Rpb24gY2hhbmdlTXVsdGlTaWdBZGRyZXNzKGFkZHJlc3MgX25ld0FkZHJlc3MpIHsKICAgICAgICAvLyBjaGVjayBzZW5kZXIgaXMgbXVsdGlzaWcgYWRkcmVzcwogICAgICAgIHJlcXVpcmUobXVsdGlTaWdBZGRyZXNzID09IG1zZy5zZW5kZXIpOwoKICAgICAgICBtdWx0aVNpZ0FkZHJlc3MgPSBfbmV3QWRkcmVzczsKCiAgICAgICAgTG9nQ2hhbmdlTXVsdGlTaWdBZGRyZXNzKF9uZXdBZGRyZXNzKTsKCiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIFRoaXMgbWV0aG9kIHdpbGwgY2hhbmdlIG9sZCBtdWx0aSBzaWduYXR1cmUgZm9yIHNwb25zZWUgYWRkcmVzcyB3aXRoIG5ldyBvbmUuCiAgICBAcGFyYW0gX25ld0FkZHJlc3MgbmV3IGFkZHJlc3MgaXMgc2V0CiAgICAqLwogICAgZnVuY3Rpb24gY2hhbmdlQWNjb3VudEFkZHJlc3NGb3JTcG9uc2VlQWRkcmVzcyhhZGRyZXNzIF9uZXdBZGRyZXNzKSB7CiAgICAgICAgLy8gY2hlY2sgc2VuZGVyIGlzIGFjY291bnQgZm9yIGNoYW5naW5nIHNwb25zZWUgYWRkcmVzcwogICAgICAgIHJlcXVpcmUoYWNjb3VudEFkZHJlc3NGb3JTcG9uc2VlQWRkcmVzcyA9PSBtc2cuc2VuZGVyKTsKCiAgICAgICAgYWNjb3VudEFkZHJlc3NGb3JTcG9uc2VlQWRkcmVzcyA9IF9uZXdBZGRyZXNzOwoKICAgICAgICBMb2dDaGFuZ2VBY2NvdW50QWRkcmVzc0ZvclNwb25zZWVBZGRyZXNzKF9uZXdBZGRyZXNzKTsKCiAgICB9CgogICAgLyoqCiAgICBAbm90aWNlIFRoaXMgbWV0aG9kIHdpbGwgY2hhbmdlIG9sZCBzcG9uc2VlIGFkZHJlc3Mgd2l0aCBuZXcgb25lLgogICAgQHBhcmFtIF9uZXdBZGRyZXNzIG5ldyBhZGRyZXNzIGlzIHNldAogICAgKi8KICAgIGZ1bmN0aW9uIGNoYW5nZVNwb25zZWVBZGRyZXNzKGFkZHJlc3MgX25ld0FkZHJlc3MpIHsKICAgICAgICAvLyBjaGVjayBzZW5kZXIgaXMgYWNjb3VudCBmb3IgY2hhbmdpbmcgc3BvbnNlZSBhZGRyZXNzCiAgICAgICAgcmVxdWlyZShhY2NvdW50QWRkcmVzc0ZvclNwb25zZWVBZGRyZXNzID09IG1zZy5zZW5kZXIpOwoKICAgICAgICBzcG9uc2VlQWRkcmVzcyA9IF9uZXdBZGRyZXNzOwoKICAgICAgICBMb2dDaGFuZ2VTcG9uc2VlQWRkcmVzcyhfbmV3QWRkcmVzcyk7CgogICAgfQoKICAgIC8qKgogICAgQG5vdGljZSBUaGlzIG1ldGhvZCB3aWxsIGNoYW5nZSBpc1BheWFibGVFbmFibGVkIGZsYWcuCiAgICAqLwogICAgZnVuY3Rpb24gY2hhbmdlSXNQYXlhYmxlRW5hYmxlZCgpIHsKICAgICAgICAvLyBjaGVjayBzZW5kZXIgaXMgbXVsdGlzaWcgYWRkcmVzcwogICAgICAgIHJlcXVpcmUobXVsdGlTaWdBZGRyZXNzID09IG1zZy5zZW5kZXIpOwoKICAgICAgICBpc1BheWFibGVFbmFibGVkID0gIWlzUGF5YWJsZUVuYWJsZWQ7CgogICAgICAgIExvZ0NoYW5nZUlzUGF5YWJsZUVuYWJsZWQoKTsKCiAgICB9Cn0='.
	

]
