Class {
	#name : #SRT1eb2a6d9a602914a5bd378988dcb78f13622a9f9,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1eb2a6d9a602914a5bd378988dcb78f13622a9f9 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4gCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogICAgCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICAgIAogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsgICAgICAKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBNaW50YWJsZSB0b2tlbgogKiBAZGV2IFNpbXBsZSBFUkMyMCBUb2tlbiBleGFtcGxlLCB3aXRoIG1pbnRhYmxlIHRva2VuIGNyZWF0aW9uCiAqIEBkZXYgSXNzdWU6ICogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9pc3N1ZXMvMTIwCiAqIEJhc2VkIG9uIGNvZGUgYnkgVG9rZW5NYXJrZXROZXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9Ub2tlbk1hcmtldE5ldC9pY28vYmxvYi9tYXN0ZXIvY29udHJhY3RzL01pbnRhYmxlVG9rZW4uc29sCiAqLwpjb250cmFjdCBNaW50YWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CiAgZXZlbnQgTWludEZpbmlzaGVkKCk7CgogIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKCiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBtaW50IHRva2VucwogICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIG1pbnRlZCB0b2tlbnMuCiAgICogQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gbWludC4KICAgKiBAcmV0dXJuIEEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyIGNhbk1pbnQgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgVHJhbnNmZXIoYWRkcmVzcygwKSwgX3RvLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBzdG9wIG1pbnRpbmcgbmV3IHRva2Vucy4KICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgb25seU93bmVyIGNhbk1pbnQgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICBNaW50RmluaXNoZWQoKTsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKY29udHJhY3QgR1VUIGlzIE93bmFibGUsIE1pbnRhYmxlVG9rZW4gewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OyAgICAKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiR2Vla3ogVXRpbGl0eSBUb2tlbiI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiR1VUIjsKICB1aW50MzIgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogIGFkZHJlc3MgcHVibGljIGFkZHJlc3NUZWFtOwogIGFkZHJlc3MgcHVibGljIGFkZHJlc3NSZXNlcnZlRnVuZDsKCiAgdWludCBwdWJsaWMgc3VtbVRlYW0gPSA0MDAwMDAwICogMSBldGhlcjsKICB1aW50IHB1YmxpYyBzdW1tUmVzZXJ2ZUZ1bmQgPSAxMDAwMDAwICogMSBldGhlcjsKCiAgZnVuY3Rpb24gR1VUKCkgcHVibGljIHsKICAgIGFkZHJlc3NUZWFtID0gMHgxNDJjMGRiYTc0NDljZWFlMkRjMEE1Y2UwNDhENjViNjkwNjMwMjc0OyAgLy9zZXQgeW91ciB2YWx1ZQogICAgYWRkcmVzc1Jlc2VydmVGdW5kID0gMHhjNzA5NTY1RDkyYTZCOWE5MTNmNGQ1M2RlNzMwNzEyZTc4ZmU1QjhDOyAvL3NldCB5b3VyIHZhbHVlCgogICAgLy9Gb3VuZGVycyBhbmQgc3VwcG9ydGVycyBpbml0aWFsIEFsbG9jYXRpb25zCiAgICBiYWxhbmNlc1thZGRyZXNzVGVhbV0gPSBiYWxhbmNlc1thZGRyZXNzVGVhbV0uYWRkKHN1bW1UZWFtKTsKICAgIGJhbGFuY2VzW2FkZHJlc3NSZXNlcnZlRnVuZF0gPSBiYWxhbmNlc1thZGRyZXNzUmVzZXJ2ZUZ1bmRdLmFkZChzdW1tUmVzZXJ2ZUZ1bmQpOwoKICAgIHRvdGFsU3VwcGx5ID0gc3VtbVRlYW0uYWRkKHN1bW1SZXNlcnZlRnVuZCk7CiAgfQogIGZ1bmN0aW9uIGdldFRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1Nil7CiAgICAgIHJldHVybiB0b3RhbFN1cHBseTsKICB9Cn0KCi8qKgogKiBAdGl0bGUgQ3Jvd2RzYWxlCiAqIEBkZXYgQ3Jvd2RzYWxlIGlzIGEgYmFzZSBjb250cmFjdCBmb3IgbWFuYWdpbmcgYSB0b2tlbiBjcm93ZHNhbGUuCiAqIENyb3dkc2FsZXMgaGF2ZSBhIHN0YXJ0IGFuZCBlbmQgdGltZXN0YW1wcywgd2hlcmUgQ29udHJpYnV0b3JzIGNhbiBtYWtlCiAqIHRva2VuIENvbnRyaWJ1dGlvbnMgYW5kIHRoZSBjcm93ZHNhbGUgd2lsbCBhc3NpZ24gdGhlbSB0b2tlbnMgYmFzZWQKICogb24gYSB0b2tlbiBwZXIgRVRIIHJhdGUuIEZ1bmRzIGNvbGxlY3RlZCBhcmUgZm9yd2FyZGVkIHRvIGEgd2FsbGV0CiAqIGFzIHRoZXkgYXJyaXZlLiBUaGUgY29udHJhY3QgcmVxdWlyZXMgYSBNaW50YWJsZVRva2VuIHRoYXQgd2lsbCBiZQogKiBtaW50ZWQgYXMgY29udHJpYnV0aW9ucyBhcnJpdmUsIG5vdGUgdGhhdCB0aGUgY3Jvd2RzYWxlIGNvbnRyYWN0CiAqIG11c3QgYmUgb3duZXIgb2YgdGhlIHRva2VuIGluIG9yZGVyIHRvIGJlIGFibGUgdG8gbWludCBpdC4KICovCmNvbnRyYWN0IENyb3dkc2FsZSBpcyBPd25hYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAvLyB0b3RhbFRva2VucwogIHVpbnQyNTYgcHVibGljIHRvdGFsVG9rZW5zOwogIC8vIHNvZnQgY2FwCiAgdWludCBzb2Z0Y2FwOwogIC8vIGJhbGFuY2VzIGZvciBzb2Z0Y2FwCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBiYWxhbmNlczsKICAvLyBUaGUgdG9rZW4gYmVpbmcgb2ZmZXJlZAogIEdVVCBwdWJsaWMgdG9rZW47CiAgLy8gc3RhcnQgYW5kIGVuZCB0aW1lc3RhbXBzIHdoZXJlIGludmVzdG1lbnRzIGFyZSBhbGxvd2VkIChib3RoIGluY2x1c2l2ZSkKICAKICAvL0Vhcmx5IHN0YWdlCiAgICAvL3N0YXJ0CiAgdWludDI1NiBwdWJsaWMgc3RhcnRFYXJseVN0YWdlMTsKICB1aW50MjU2IHB1YmxpYyBzdGFydEVhcmx5U3RhZ2UyOwogIHVpbnQyNTYgcHVibGljIHN0YXJ0RWFybHlTdGFnZTM7CiAgdWludDI1NiBwdWJsaWMgc3RhcnRFYXJseVN0YWdlNDsKICAgIC8vZW5kCiAgdWludDI1NiBwdWJsaWMgZW5kRWFybHlTdGFnZTE7CiAgdWludDI1NiBwdWJsaWMgZW5kRWFybHlTdGFnZTI7CiAgdWludDI1NiBwdWJsaWMgZW5kRWFybHlTdGFnZTM7CiAgdWludDI1NiBwdWJsaWMgZW5kRWFybHlTdGFnZTQ7ICAgCiAgCiAgLy9GaW5hbCBzdGFnZQogICAgLy9zdGFydAogIHVpbnQyNTYgcHVibGljIHN0YXJ0RmluYWxTdGFnZTE7CiAgdWludDI1NiBwdWJsaWMgc3RhcnRGaW5hbFN0YWdlMjsKICAgIC8vZW5kIAogIHVpbnQyNTYgcHVibGljIGVuZEZpbmFsU3RhZ2UxOyAgICAKICB1aW50MjU2IHB1YmxpYyBlbmRGaW5hbFN0YWdlMjsgIAogIAogIC8vdG9rZW4gZGlzdHJpYnV0aW9uCiAgdWludDI1NiBwdWJsaWMgbWF4RWFybHlTdGFnZTsKICB1aW50MjU2IHB1YmxpYyBtYXhGaW5hbFN0YWdlOwoKICB1aW50MjU2IHB1YmxpYyB0b3RhbEVhcmx5U3RhZ2U7CiAgdWludDI1NiBwdWJsaWMgdG90YWxGaW5hbFN0YWdlOwogIAogIC8vIGhvdyBtYW55IHRva2VuIHVuaXRzIGEgQ29udHJpYnV0b3IgZ2V0cyBwZXIgd2VpCiAgdWludDI1NiBwdWJsaWMgcmF0ZUVhcmx5U3RhZ2UxOwogIHVpbnQyNTYgcHVibGljIHJhdGVFYXJseVN0YWdlMjsKICB1aW50MjU2IHB1YmxpYyByYXRlRWFybHlTdGFnZTM7CiAgdWludDI1NiBwdWJsaWMgcmF0ZUVhcmx5U3RhZ2U0OwogIHVpbnQyNTYgcHVibGljIHJhdGVGaW5hbFN0YWdlMTsKICB1aW50MjU2IHB1YmxpYyByYXRlRmluYWxTdGFnZTI7ICAgCiAgCiAgLy8gUmVtYWluaW5nIFRva2VuIEFsbG9jYXRpb24gCiAgLy8gKGFmdGVyIGNvbXBsZXRpb24gb2YgYWxsIHN0YWdlcyBvZiBjcm93ZGZ1bmRpbmcpCiAgdWludCBwdWJsaWMgbWludFN0YXJ0OyAvLzMxIE1hciAyMDE4IDA4OjAwOjAwIEdNVAoKICAvLyBhZGRyZXNzIHdoZXJlIGZ1bmRzIGFyZSBjb2xsZWN0ZWQKICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CgogIC8vIG1pbmltdW0gcXVhbnRpdHkgdmFsdWVzCiAgdWludDI1NiBwdWJsaWMgbWluUXVhblZhbHVlczsgCgovKioKKiBldmVudCBmb3IgdG9rZW4gUHJvY3VyZW1lbnQgbG9nZ2luZwoqIEBwYXJhbSBjb250cmlidXRvciB3aG8gUGxlZGdlZCBmb3IgdGhlIHRva2VucwoqIEBwYXJhbSBiZW5lZmljaWFyeSB3aG8gZ290IHRoZSB0b2tlbnMKKiBAcGFyYW0gdmFsdWUgd2VpcyBDb250cmlidXRlZCBmb3IgUHJvY3VyZW1lbnQKKiBAcGFyYW0gYW1vdW50IGFtb3VudCBvZiB0b2tlbnMgUHJvY3VyZWQKKi8KICBldmVudCBUb2tlblByb2N1cmVtZW50KGFkZHJlc3MgaW5kZXhlZCBjb250cmlidXRvciwgYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFtb3VudCk7CiAgZnVuY3Rpb24gQ3Jvd2RzYWxlKCkgcHVibGljIHsKICAgIHRva2VuID0gY3JlYXRlVG9rZW5Db250cmFjdCgpOwogICAgLy8gdG90YWwgbnVtYmVyIG9mIHRva2VucwogICAgdG90YWxUb2tlbnMgPSAyNTAwMDAwMCAqIDEgZXRoZXI7CiAgICAvL3NvZnQgY2FwCiAgICBzb2Z0Y2FwID0gNDAwICogMSBldGhlcjsgICAKICAgIC8vIG1pbmltdW0gcXVhbnRpdHkgdmFsdWVzCiAgICBtaW5RdWFuVmFsdWVzID0gMTAwMDAwMDAwMDAwMDAwMDAwOyAvLzAuMSBldGgKICAgIC8vIHN0YXJ0IGFuZCBlbmQgdGltZXN0YW1wcyB3aGVyZSBpbnZlc3RtZW50cyBhcmUgYWxsb3dlZAogICAgLy9FYXJseSBzdGFnZQogICAgICAvL3N0YXJ0CiAgICBzdGFydEVhcmx5U3RhZ2UxID0gMTUxOTgwNDgwMDsvLzI4IEZlYiAyMDE4IDA4OjAwOjAwIEdNVAogICAgc3RhcnRFYXJseVN0YWdlMiA9IHN0YXJ0RWFybHlTdGFnZTEgKyAyICogMSBkYXlzOwogICAgc3RhcnRFYXJseVN0YWdlMyA9IHN0YXJ0RWFybHlTdGFnZTIgKyAyICogMSBkYXlzOwogICAgc3RhcnRFYXJseVN0YWdlNCA9IHN0YXJ0RWFybHlTdGFnZTMgKyAyICogMSBkYXlzOwogICAgICAvL2VuZAogICAgZW5kRWFybHlTdGFnZTEgPSBzdGFydEVhcmx5U3RhZ2UxICsgMiAqIDEgZGF5czsKICAgIGVuZEVhcmx5U3RhZ2UyID0gc3RhcnRFYXJseVN0YWdlMiArIDIgKiAxIGRheXM7CiAgICBlbmRFYXJseVN0YWdlMyA9IHN0YXJ0RWFybHlTdGFnZTMgKyAyICogMSBkYXlzOwogICAgZW5kRWFybHlTdGFnZTQgPSBzdGFydEVhcmx5U3RhZ2U0ICsgMiAqIDEgZGF5czsgICAKICAgIC8vRmluYWwgc3RhZ2UKICAgICAgLy9zdGFydAogICAgc3RhcnRGaW5hbFN0YWdlMSA9IDE1MjA1ODI0MDA7Ly8wOSBNYXIgMjAxOCAwODowMDowMCBHTVQKICAgIHN0YXJ0RmluYWxTdGFnZTIgPSBzdGFydEZpbmFsU3RhZ2UxICsgNiAqIDEgZGF5czsKICAgICAgLy9lbmQgCiAgICBlbmRGaW5hbFN0YWdlMSA9IHN0YXJ0RmluYWxTdGFnZTEgKyA2ICogMSBkYXlzOyAgICAKICAgIGVuZEZpbmFsU3RhZ2UyID0gc3RhcnRGaW5hbFN0YWdlMiArIDE2ICogMSBkYXlzOyAgICAgICAgIAogICAgLy8gcmVzdHJpY3Rpb25zIG9uIGFtb3VudHMgZHVyaW5nIHRoZSBjcm93ZGZ1bmRpbmcgZXZlbnQgc3RhZ2VzCiAgICBtYXhFYXJseVN0YWdlID0gNDAwMDAwMCAqIDEgZXRoZXI7CiAgICBtYXhGaW5hbFN0YWdlID0gMTYwMDAwMDAgKiAxIGV0aGVyOwogICAgLy8gcmF0ZTsKICAgIHJhdGVFYXJseVN0YWdlMSA9IDEwMDAwOwogICAgcmF0ZUVhcmx5U3RhZ2UyID0gNzUwMDsKICAgIHJhdGVFYXJseVN0YWdlMyA9IDUwMDA7CiAgICByYXRlRWFybHlTdGFnZTQgPSA0MDAwOwogICAgcmF0ZUZpbmFsU3RhZ2UxID0gMzAwMDsKICAgIHJhdGVGaW5hbFN0YWdlMiA9IDIwMDA7IAogICAgLy8gUmVtYWluaW5nIFRva2VuIEFsbG9jYXRpb24gCiAgICAvLyAoYWZ0ZXIgY29tcGxldGlvbiBvZiBhbGwgc3RhZ2VzIG9mIGNyb3dkZnVuZGluZyBldmVudCkKICAgIG1pbnRTdGFydCA9IGVuZEZpbmFsU3RhZ2UyOyAvLzMxIE1hciAyMDE4IDA4OjAwOjAwIEdNVAogICAgLy8gYWRkcmVzcyB3aGVyZSBmdW5kcyBhcmUgY29sbGVjdGVkCiAgICB3YWxsZXQgPSAweDgwQjQ4RjQ2Q0QxODU3ZGEzMmRCMTBmYTU0RTg1YTJGMThCOTY0MTI7CiAgfQoKICAKICBmdW5jdGlvbiBzZXRSYXRlRWFybHlTdGFnZTEodWludCBfcmF0ZUVhcmx5U3RhZ2UxKSBwdWJsaWMgewogICAgcmF0ZUVhcmx5U3RhZ2UxID0gX3JhdGVFYXJseVN0YWdlMTsKICB9CiAgZnVuY3Rpb24gc2V0UmF0ZUVhcmx5U3RhZ2UyKHVpbnQgX3JhdGVFYXJseVN0YWdlMikgcHVibGljIHsKICAgIHJhdGVFYXJseVN0YWdlMiA9IF9yYXRlRWFybHlTdGFnZTI7CiAgfSAgCiAgZnVuY3Rpb24gc2V0UmF0ZUVhcmx5U3RhZ2UzKHVpbnQgX3JhdGVFYXJseVN0YWdlMykgcHVibGljIHsKICAgIHJhdGVFYXJseVN0YWdlMyA9IF9yYXRlRWFybHlTdGFnZTM7CiAgfSAgCiAgZnVuY3Rpb24gc2V0UmF0ZUVhcmx5U3RhZ2U0KHVpbnQgX3JhdGVFYXJseVN0YWdlNCkgcHVibGljIHsKICAgIHJhdGVFYXJseVN0YWdlNCA9IF9yYXRlRWFybHlTdGFnZTQ7CiAgfSAgCiAgCiAgZnVuY3Rpb24gc2V0UmF0ZUZpbmFsU3RhZ2UxKHVpbnQgX3JhdGVGaW5hbFN0YWdlMSkgcHVibGljIHsKICAgIHJhdGVGaW5hbFN0YWdlMSA9IF9yYXRlRmluYWxTdGFnZTE7CiAgfSAgCiAgZnVuY3Rpb24gc2V0UmF0ZUZpbmFsU3RhZ2UyKHVpbnQgX3JhdGVGaW5hbFN0YWdlMikgcHVibGljIHsKICAgIHJhdGVGaW5hbFN0YWdlMiA9IF9yYXRlRmluYWxTdGFnZTI7CiAgfSAgIAogIAogIGZ1bmN0aW9uIGNyZWF0ZVRva2VuQ29udHJhY3QoKSBpbnRlcm5hbCByZXR1cm5zIChHVVQpIHsKICAgIHJldHVybiBuZXcgR1VUKCk7CiAgfQoKICAvLyBmYWxsYmFjayBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBQcm9jdXJlIHRva2VucwogIGZ1bmN0aW9uICgpIGV4dGVybmFsIHBheWFibGUgewogICAgcHJvY3VyZVRva2Vucyhtc2cuc2VuZGVyKTsKICB9CgogIC8vIGxvdyBsZXZlbCB0b2tlbiBQbGVkZ2UgZnVuY3Rpb24KICBmdW5jdGlvbiBwcm9jdXJlVG9rZW5zKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHB1YmxpYyBwYXlhYmxlIHsKICAgIHVpbnQyNTYgdG9rZW5zOwogICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICB1aW50MjU2IGJhY2tBbW91bnQ7CiAgICByZXF1aXJlKGJlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpOwogICAgLy9taW5pbXVtIGFtb3VudCBpbiBFVEgKICAgIHJlcXVpcmUod2VpQW1vdW50ID49IG1pblF1YW5WYWx1ZXMpOwogICAgLy9FYXJseVN0YWdlMQogICAgaWYgKG5vdyA+PSBzdGFydEVhcmx5U3RhZ2UxICYmIG5vdyA8IGVuZEVhcmx5U3RhZ2UxICYmIHRvdGFsRWFybHlTdGFnZSA8IG1heEVhcmx5U3RhZ2UpewogICAgICB0b2tlbnMgPSB3ZWlBbW91bnQubXVsKHJhdGVFYXJseVN0YWdlMSk7CiAgICAgIGlmIChtYXhFYXJseVN0YWdlLnN1Yih0b3RhbEVhcmx5U3RhZ2UpIDwgdG9rZW5zKXsKICAgICAgICB0b2tlbnMgPSBtYXhFYXJseVN0YWdlLnN1Yih0b3RhbEVhcmx5U3RhZ2UpOyAKICAgICAgICB3ZWlBbW91bnQgPSB0b2tlbnMuZGl2KHJhdGVFYXJseVN0YWdlMSk7CiAgICAgICAgYmFja0Ftb3VudCA9IG1zZy52YWx1ZS5zdWIod2VpQW1vdW50KTsKICAgICAgfQogICAgICB0b3RhbEVhcmx5U3RhZ2UgPSB0b3RhbEVhcmx5U3RhZ2UuYWRkKHRva2Vucyk7CiAgICB9CiAgICAvL0Vhcmx5U3RhZ2UyCiAgICBpZiAobm93ID49IHN0YXJ0RWFybHlTdGFnZTIgJiYgbm93IDwgZW5kRWFybHlTdGFnZTIgJiYgdG90YWxFYXJseVN0YWdlIDwgbWF4RWFybHlTdGFnZSl7CiAgICAgIHRva2VucyA9IHdlaUFtb3VudC5tdWwocmF0ZUVhcmx5U3RhZ2UyKTsKICAgICAgaWYgKG1heEVhcmx5U3RhZ2Uuc3ViKHRvdGFsRWFybHlTdGFnZSkgPCB0b2tlbnMpewogICAgICAgIHRva2VucyA9IG1heEVhcmx5U3RhZ2Uuc3ViKHRvdGFsRWFybHlTdGFnZSk7IAogICAgICAgIHdlaUFtb3VudCA9IHRva2Vucy5kaXYocmF0ZUVhcmx5U3RhZ2UyKTsKICAgICAgICBiYWNrQW1vdW50ID0gbXNnLnZhbHVlLnN1Yih3ZWlBbW91bnQpOwogICAgICB9CiAgICAgIHRvdGFsRWFybHlTdGFnZSA9IHRvdGFsRWFybHlTdGFnZS5hZGQodG9rZW5zKTsKICAgIH0gICAgCiAgICAvL0Vhcmx5U3RhZ2UzCiAgICBpZiAobm93ID49IHN0YXJ0RWFybHlTdGFnZTMgJiYgbm93IDwgZW5kRWFybHlTdGFnZTMgJiYgdG90YWxFYXJseVN0YWdlIDwgbWF4RWFybHlTdGFnZSl7CiAgICAgIHRva2VucyA9IHdlaUFtb3VudC5tdWwocmF0ZUVhcmx5U3RhZ2UzKTsKICAgICAgaWYgKG1heEVhcmx5U3RhZ2Uuc3ViKHRvdGFsRWFybHlTdGFnZSkgPCB0b2tlbnMpewogICAgICAgIHRva2VucyA9IG1heEVhcmx5U3RhZ2Uuc3ViKHRvdGFsRWFybHlTdGFnZSk7IAogICAgICAgIHdlaUFtb3VudCA9IHRva2Vucy5kaXYocmF0ZUVhcmx5U3RhZ2UzKTsKICAgICAgICBiYWNrQW1vdW50ID0gbXNnLnZhbHVlLnN1Yih3ZWlBbW91bnQpOwogICAgICB9CiAgICAgIHRvdGFsRWFybHlTdGFnZSA9IHRvdGFsRWFybHlTdGFnZS5hZGQodG9rZW5zKTsKICAgIH0gICAgCiAgICAvL0Vhcmx5U3RhZ2U0CiAgICBpZiAobm93ID49IHN0YXJ0RWFybHlTdGFnZTQgJiYgbm93IDwgZW5kRWFybHlTdGFnZTQgJiYgdG90YWxFYXJseVN0YWdlIDwgbWF4RWFybHlTdGFnZSl7CiAgICAgIHRva2VucyA9IHdlaUFtb3VudC5tdWwocmF0ZUVhcmx5U3RhZ2U0KTsKICAgICAgaWYgKG1heEVhcmx5U3RhZ2Uuc3ViKHRvdGFsRWFybHlTdGFnZSkgPCB0b2tlbnMpewogICAgICAgIHRva2VucyA9IG1heEVhcmx5U3RhZ2Uuc3ViKHRvdGFsRWFybHlTdGFnZSk7IAogICAgICAgIHdlaUFtb3VudCA9IHRva2Vucy5kaXYocmF0ZUVhcmx5U3RhZ2U0KTsKICAgICAgICBiYWNrQW1vdW50ID0gbXNnLnZhbHVlLnN1Yih3ZWlBbW91bnQpOwogICAgICB9CiAgICAgIHRvdGFsRWFybHlTdGFnZSA9IHRvdGFsRWFybHlTdGFnZS5hZGQodG9rZW5zKTsKICAgIH0gICAKICAgIC8vRmluYWxTdGFnZTEKICAgIGlmIChub3cgPj0gc3RhcnRGaW5hbFN0YWdlMSAmJiBub3cgPCBlbmRGaW5hbFN0YWdlMSAmJiB0b3RhbEZpbmFsU3RhZ2UgPCBtYXhGaW5hbFN0YWdlKXsKICAgICAgdG9rZW5zID0gd2VpQW1vdW50Lm11bChyYXRlRmluYWxTdGFnZTEpOwogICAgICBpZiAobWF4RmluYWxTdGFnZS5zdWIodG90YWxGaW5hbFN0YWdlKSA8IHRva2Vucyl7CiAgICAgICAgdG9rZW5zID0gbWF4RmluYWxTdGFnZS5zdWIodG90YWxGaW5hbFN0YWdlKTsgCiAgICAgICAgd2VpQW1vdW50ID0gdG9rZW5zLmRpdihyYXRlRmluYWxTdGFnZTEpOwogICAgICAgIGJhY2tBbW91bnQgPSBtc2cudmFsdWUuc3ViKHdlaUFtb3VudCk7CiAgICAgIH0KICAgICAgdG90YWxGaW5hbFN0YWdlID0gdG90YWxGaW5hbFN0YWdlLmFkZCh0b2tlbnMpOwogICAgfSAgICAgICAKICAgIC8vRmluYWxTdGFnZTIgICAgCiAgICBpZiAobm93ID49IHN0YXJ0RmluYWxTdGFnZTIgJiYgbm93IDwgZW5kRmluYWxTdGFnZTIgJiYgdG90YWxGaW5hbFN0YWdlIDwgbWF4RmluYWxTdGFnZSl7CiAgICAgIHRva2VucyA9IHdlaUFtb3VudC5tdWwocmF0ZUZpbmFsU3RhZ2UyKTsKICAgICAgaWYgKG1heEZpbmFsU3RhZ2Uuc3ViKHRvdGFsRmluYWxTdGFnZSkgPCB0b2tlbnMpewogICAgICAgIHRva2VucyA9IG1heEZpbmFsU3RhZ2Uuc3ViKHRvdGFsRmluYWxTdGFnZSk7IAogICAgICAgIHdlaUFtb3VudCA9IHRva2Vucy5kaXYocmF0ZUZpbmFsU3RhZ2UyKTsKICAgICAgICBiYWNrQW1vdW50ID0gbXNnLnZhbHVlLnN1Yih3ZWlBbW91bnQpOwogICAgICB9CiAgICAgIHRvdGFsRmluYWxTdGFnZSA9IHRvdGFsRmluYWxTdGFnZS5hZGQodG9rZW5zKTsKICAgIH0gICAgICAgIAogICAgCiAgICByZXF1aXJlKHRva2VucyA+IDApOwogICAgdG9rZW4ubWludChiZW5lZmljaWFyeSwgdG9rZW5zKTsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKG1zZy52YWx1ZSk7CiAgICAvL3dhbGxldC50cmFuc2Zlcih3ZWlBbW91bnQpOwogICAgCiAgICBpZiAoYmFja0Ftb3VudCA+IDApewogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGJhY2tBbW91bnQpOyAgICAKICAgIH0KICAgIFRva2VuUHJvY3VyZW1lbnQobXNnLnNlbmRlciwgYmVuZWZpY2lhcnksIHdlaUFtb3VudCwgdG9rZW5zKTsKICB9CgogIC8vTWludCBpcyBhbGxvd2VkIHdoaWxlIFRvdGFsU3VwcGx5IDw9IHRvdGFsVG9rZW5zCiAgZnVuY3Rpb24gbWludFRva2VucyhhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX2Ftb3VudCA+IDApOwogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKG5vdyA+PSBtaW50U3RhcnQpOwogICAgcmVxdWlyZShfYW1vdW50IDw9IHRvdGFsVG9rZW5zLnN1Yih0b2tlbi5nZXRUb3RhbFN1cHBseSgpKSk7CiAgICB0b2tlbi5taW50KF90bywgX2Ftb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgCiAgZnVuY3Rpb24gcmVmdW5kKCkgcHVibGljewogICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgPCBzb2Z0Y2FwICYmIG5vdyA+IGVuZEZpbmFsU3RhZ2UyKTsKICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPiAwKTsKICAgIHVpbnQgdmFsdWUgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXTsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodmFsdWUpOwogIH0KICAKICBmdW5jdGlvbiB0cmFuc2ZlclRvTXVsdGlzaWcoKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUodGhpcy5iYWxhbmNlID49IHNvZnRjYXAgJiYgbm93ID4gZW5kRmluYWxTdGFnZTIpOyAgCiAgICAgIHdhbGxldC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0gIAp9'.
	

]
