Class {
	#name : #SRT3b1D8701397AB3Cf86F10B0ef03854cFa06a2FA3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3b1D8701397AB3Cf86F10B0ef03854cFa06a2FA3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIGVtaXQgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKCgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCgoKCgoKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3VidHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgKi8KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICAvKioKICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgoKCgovKioKICogQHRpdGxlIENyb3dkc2FsZQogKiBAZGV2IENyb3dkc2FsZSBpcyBhIGJhc2UgY29udHJhY3QgZm9yIG1hbmFnaW5nIGEgdG9rZW4gY3Jvd2RzYWxlLAogKiBhbGxvd2luZyBpbnZlc3RvcnMgdG8gcHVyY2hhc2UgdG9rZW5zIHdpdGggZXRoZXIuIFRoaXMgY29udHJhY3QgaW1wbGVtZW50cwogKiBzdWNoIGZ1bmN0aW9uYWxpdHkgaW4gaXRzIG1vc3QgZnVuZGFtZW50YWwgZm9ybSBhbmQgY2FuIGJlIGV4dGVuZGVkIHRvIHByb3ZpZGUgYWRkaXRpb25hbAogKiBmdW5jdGlvbmFsaXR5IGFuZC9vciBjdXN0b20gYmVoYXZpb3IuCiAqIFRoZSBleHRlcm5hbCBpbnRlcmZhY2UgcmVwcmVzZW50cyB0aGUgYmFzaWMgaW50ZXJmYWNlIGZvciBwdXJjaGFzaW5nIHRva2VucywgYW5kIGNvbmZvcm0KICogdGhlIGJhc2UgYXJjaGl0ZWN0dXJlIGZvciBjcm93ZHNhbGVzLiBUaGV5IGFyZSAqbm90KiBpbnRlbmRlZCB0byBiZSBtb2RpZmllZCAvIG92ZXJyaWRlbi4KICogVGhlIGludGVybmFsIGludGVyZmFjZSBjb25mb3JtcyB0aGUgZXh0ZW5zaWJsZSBhbmQgbW9kaWZpYWJsZSBzdXJmYWNlIG9mIGNyb3dkc2FsZXMuIE92ZXJyaWRlIAogKiB0aGUgbWV0aG9kcyB0byBhZGQgZnVuY3Rpb25hbGl0eS4gQ29uc2lkZXIgdXNpbmcgJ3N1cGVyJyB3aGVyZSBhcHByb3BpYXRlIHRvIGNvbmNhdGVuYXRlCiAqIGJlaGF2aW9yLgogKi8KCmNvbnRyYWN0IENyb3dkc2FsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIC8vIFRoZSB0b2tlbiBiZWluZyBzb2xkCiAgRVJDMjAgcHVibGljIHRva2VuOwoKICAvLyBBZGRyZXNzIHdoZXJlIGZ1bmRzIGFyZSBjb2xsZWN0ZWQKICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CgogIC8vIEhvdyBtYW55IHRva2VuIHVuaXRzIGEgYnV5ZXIgZ2V0cyBwZXIgd2VpCiAgLy91aW50MjU2IHB1YmxpYyByYXRlOwoKICAvLyBBbW91bnQgb2Ygd2VpIHJhaXNlZAogIHVpbnQyNTYgcHVibGljIHdlaVJhaXNlZDsKCiAgLy8gQW1vdW50IG9mIHdlaSByYWlzZWQKICB1aW50MjU2IHB1YmxpYyB0b2tlbnNEaXN0cmlidXRlZDsKCiAgLyoqCiAgICogRXZlbnQgZm9yIHRva2VuIHB1cmNoYXNlIGxvZ2dpbmcKICAgKiBAcGFyYW0gcHVyY2hhc2VyIHdobyBwYWlkIGZvciB0aGUgdG9rZW5zCiAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IHdobyBnb3QgdGhlIHRva2VucwogICAqIEBwYXJhbSB2YWx1ZSB3ZWlzIHBhaWQgZm9yIHB1cmNoYXNlCiAgICogQHBhcmFtIGFtb3VudCBhbW91bnQgb2YgdG9rZW5zIHB1cmNoYXNlZAogICAqLwogIGV2ZW50IFRva2VuUHVyY2hhc2UoYWRkcmVzcyBpbmRleGVkIHB1cmNoYXNlciwgYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFtb3VudCk7CgogIC8qKgogICAqIEBwYXJhbSBfd2FsbGV0IEFkZHJlc3Mgd2hlcmUgY29sbGVjdGVkIGZ1bmRzIHdpbGwgYmUgZm9yd2FyZGVkIHRvCiAgICogQHBhcmFtIF90b2tlbiBBZGRyZXNzIG9mIHRoZSB0b2tlbiBiZWluZyBzb2xkCiAgICovCiAgZnVuY3Rpb24gQ3Jvd2RzYWxlKGFkZHJlc3MgX3dhbGxldCwgRVJDMjAgX3Rva2VuKSBwdWJsaWMgewogICAgcmVxdWlyZShfd2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdG9rZW4gIT0gYWRkcmVzcygwKSk7CgogICAgd2FsbGV0ID0gX3dhbGxldDsKICAgIHRva2VuID0gX3Rva2VuOwogIH0KCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBDcm93ZHNhbGUgZXh0ZXJuYWwgaW50ZXJmYWNlCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgLyoqCiAgICogQGRldiBmYWxsYmFjayBmdW5jdGlvbiAqKipETyBOT1QgT1ZFUlJJREUqKioKICAgKi8KICBmdW5jdGlvbiAoKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICB9CgogIC8qKgogICAqIEBkZXYgbG93IGxldmVsIHRva2VuIHB1cmNoYXNlICoqKkRPIE5PVCBPVkVSUklERSoqKgogICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgQWRkcmVzcyBwZXJmb3JtaW5nIHRoZSB0b2tlbiBwdXJjaGFzZQogICAqLwogIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIF9iZW5lZmljaWFyeSkgcHVibGljIHBheWFibGUgewoKICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwogICAgX3ByZVZhbGlkYXRlUHVyY2hhc2UoX2JlbmVmaWNpYXJ5LCB3ZWlBbW91bnQpOwoKICAgIC8vIGNhbGN1bGF0ZSB0b2tlbiBhbW91bnQgdG8gYmUgY3JlYXRlZAogICAgdWludDI1NiB0b2tlbnMgPSBfZ2V0VG9rZW5BbW91bnQod2VpQW1vdW50KTsKCiAgICAvLyB1cGRhdGUgc3RhdGUKICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKICAgIHRva2Vuc0Rpc3RyaWJ1dGVkID0gdG9rZW5zRGlzdHJpYnV0ZWQuYWRkKHRva2Vucyk7CgogICAgX3Byb2Nlc3NQdXJjaGFzZShfYmVuZWZpY2lhcnksIHRva2Vucyk7CiAgICBlbWl0IFRva2VuUHVyY2hhc2UobXNnLnNlbmRlciwgX2JlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRva2Vucyk7CgogICAgX3VwZGF0ZVB1cmNoYXNpbmdTdGF0ZShfYmVuZWZpY2lhcnksIHdlaUFtb3VudCk7CgogICAgX2ZvcndhcmRGdW5kcygpOwogICAgX3Bvc3RWYWxpZGF0ZVB1cmNoYXNlKF9iZW5lZmljaWFyeSwgd2VpQW1vdW50KTsKICB9CgogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gSW50ZXJuYWwgaW50ZXJmYWNlIChleHRlbnNpYmxlKQogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8qKgogICAqIEBkZXYgVmFsaWRhdGlvbiBvZiBhbiBpbmNvbWluZyBwdXJjaGFzZS4gVXNlIHJlcXVpcmUgc3RhdGVtZW50cyB0byByZXZlcnQgc3RhdGUgd2hlbiBjb25kaXRpb25zIGFyZSBub3QgbWV0LiBVc2Ugc3VwZXIgdG8gY29uY2F0ZW5hdGUgdmFsaWRhdGlvbnMuCiAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBBZGRyZXNzIHBlcmZvcm1pbmcgdGhlIHRva2VuIHB1cmNoYXNlCiAgICogQHBhcmFtIF93ZWlBbW91bnQgVmFsdWUgaW4gd2VpIGludm9sdmVkIGluIHRoZSBwdXJjaGFzZQogICAqLwogIGZ1bmN0aW9uIF9wcmVWYWxpZGF0ZVB1cmNoYXNlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF93ZWlBbW91bnQpIGludGVybmFsIHsKICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfd2VpQW1vdW50ICE9IDApOwogIH0KCiAgLyoqCiAgICogQGRldiBWYWxpZGF0aW9uIG9mIGFuIGV4ZWN1dGVkIHB1cmNoYXNlLiBPYnNlcnZlIHN0YXRlIGFuZCB1c2UgcmV2ZXJ0IHN0YXRlbWVudHMgdG8gdW5kbyByb2xsYmFjayB3aGVuIHZhbGlkIGNvbmRpdGlvbnMgYXJlIG5vdCBtZXQuCiAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBBZGRyZXNzIHBlcmZvcm1pbmcgdGhlIHRva2VuIHB1cmNoYXNlCiAgICogQHBhcmFtIF93ZWlBbW91bnQgVmFsdWUgaW4gd2VpIGludm9sdmVkIGluIHRoZSBwdXJjaGFzZQogICAqLwogIGZ1bmN0aW9uIF9wb3N0VmFsaWRhdGVQdXJjaGFzZShhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbCB7CiAgICAvLyBvcHRpb25hbCBvdmVycmlkZQogIH0KCiAgLyoqCiAgICogQGRldiBTb3VyY2Ugb2YgdG9rZW5zLiBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBtb2RpZnkgdGhlIHdheSBpbiB3aGljaCB0aGUgY3Jvd2RzYWxlIHVsdGltYXRlbHkgZ2V0cyBhbmQgc2VuZHMgaXRzIHRva2Vucy4KICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IEFkZHJlc3MgcGVyZm9ybWluZyB0aGUgdG9rZW4gcHVyY2hhc2UKICAgKiBAcGFyYW0gX3Rva2VuQW1vdW50IE51bWJlciBvZiB0b2tlbnMgdG8gYmUgZW1pdHRlZAogICAqLwogIGZ1bmN0aW9uIF9kZWxpdmVyVG9rZW5zKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF90b2tlbkFtb3VudCkgaW50ZXJuYWwgewogICAgdG9rZW4udHJhbnNmZXJGcm9tKHdhbGxldCwgX2JlbmVmaWNpYXJ5LCBfdG9rZW5BbW91bnQpOwogICAgLy90b2tlbi50cmFuc2ZlcihfYmVuZWZpY2lhcnksIF90b2tlbkFtb3VudCk7CiAgfQoKICAvKioKICAgKiBAZGV2IEV4ZWN1dGVkIHdoZW4gYSBwdXJjaGFzZSBoYXMgYmVlbiB2YWxpZGF0ZWQgYW5kIGlzIHJlYWR5IHRvIGJlIGV4ZWN1dGVkLiBOb3QgbmVjZXNzYXJpbHkgZW1pdHMvc2VuZHMgdG9rZW5zLgogICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgQWRkcmVzcyByZWNlaXZpbmcgdGhlIHRva2VucwogICAqIEBwYXJhbSBfdG9rZW5BbW91bnQgTnVtYmVyIG9mIHRva2VucyB0byBiZSBwdXJjaGFzZWQKICAgKi8KICBmdW5jdGlvbiBfcHJvY2Vzc1B1cmNoYXNlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF90b2tlbkFtb3VudCkgaW50ZXJuYWwgewogICAgX2RlbGl2ZXJUb2tlbnMoX2JlbmVmaWNpYXJ5LCBfdG9rZW5BbW91bnQpOwogIH0KCiAgLyoqCiAgICogQGRldiBPdmVycmlkZSBmb3IgZXh0ZW5zaW9ucyB0aGF0IHJlcXVpcmUgYW4gaW50ZXJuYWwgc3RhdGUgdG8gY2hlY2sgZm9yIHZhbGlkaXR5IChjdXJyZW50IHVzZXIgY29udHJpYnV0aW9ucywgZXRjLikKICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IEFkZHJlc3MgcmVjZWl2aW5nIHRoZSB0b2tlbnMKICAgKiBAcGFyYW0gX3dlaUFtb3VudCBWYWx1ZSBpbiB3ZWkgaW52b2x2ZWQgaW4gdGhlIHB1cmNoYXNlCiAgICovCiAgZnVuY3Rpb24gX3VwZGF0ZVB1cmNoYXNpbmdTdGF0ZShhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbCB7CiAgICAvLyBvcHRpb25hbCBvdmVycmlkZQogIH0KCiAgLyoqCiAgICogQGRldiBPdmVycmlkZSB0byBleHRlbmQgdGhlIHdheSBpbiB3aGljaCBldGhlciBpcyBjb252ZXJ0ZWQgdG8gdG9rZW5zLgogICAqIEBwYXJhbSBfd2VpQW1vdW50IFZhbHVlIGluIHdlaSB0byBiZSBjb252ZXJ0ZWQgaW50byB0b2tlbnMKICAgKiBAcmV0dXJuIE51bWJlciBvZiB0b2tlbnMgdGhhdCBjYW4gYmUgcHVyY2hhc2VkIHdpdGggdGhlIHNwZWNpZmllZCBfd2VpQW1vdW50CiAgICovCiAgZnVuY3Rpb24gX2dldFRva2VuQW1vdW50KHVpbnQyNTYgX3dlaUFtb3VudCkgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBtdXN0IG92ZXJyaWRlCiAgfQoKICAvKioKICAgKiBAZGV2IERldGVybWluZXMgaG93IEVUSCBpcyBzdG9yZWQvZm9yd2FyZGVkIG9uIHB1cmNoYXNlcy4KICAgKi8KICBmdW5jdGlvbiBfZm9yd2FyZEZ1bmRzKCkgaW50ZXJuYWwgewogICAgd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBUaW1lZENyb3dkc2FsZQogKiBAZGV2IENyb3dkc2FsZSBhY2NlcHRpbmcgY29udHJpYnV0aW9ucyBvbmx5IHdpdGhpbiBhIHRpbWUgZnJhbWUuCiAqLwpjb250cmFjdCBUaW1lZENyb3dkc2FsZSBpcyBDcm93ZHNhbGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICB1aW50MjU2IHB1YmxpYyBvcGVuaW5nVGltZTsKICB1aW50MjU2IHB1YmxpYyBjbG9zaW5nVGltZTsKCiAgLyoqCiAgICogQGRldiBSZXZlcnRzIGlmIG5vdCBpbiBjcm93ZHNhbGUgdGltZSByYW5nZS4gCiAgICovCiAgbW9kaWZpZXIgb25seVdoaWxlT3BlbiB7CiAgICByZXF1aXJlKG5vdyA+PSBvcGVuaW5nVGltZSAmJiBub3cgPD0gY2xvc2luZ1RpbWUpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQ29uc3RydWN0b3IsIHRha2VzIGNyb3dkc2FsZSBvcGVuaW5nIGFuZCBjbG9zaW5nIHRpbWVzLgogICAqIEBwYXJhbSBfb3BlbmluZ1RpbWUgQ3Jvd2RzYWxlIG9wZW5pbmcgdGltZQogICAqIEBwYXJhbSBfY2xvc2luZ1RpbWUgQ3Jvd2RzYWxlIGNsb3NpbmcgdGltZQogICAqLwogIGZ1bmN0aW9uIFRpbWVkQ3Jvd2RzYWxlKHVpbnQyNTYgX29wZW5pbmdUaW1lLCB1aW50MjU2IF9jbG9zaW5nVGltZSkgcHVibGljIHsKICAgIC8vcmVxdWlyZShfb3BlbmluZ1RpbWUgPj0gbm93KTsKICAgIHJlcXVpcmUoX2Nsb3NpbmdUaW1lID49IF9vcGVuaW5nVGltZSk7CgogICAgb3BlbmluZ1RpbWUgPSBfb3BlbmluZ1RpbWU7CiAgICBjbG9zaW5nVGltZSA9IF9jbG9zaW5nVGltZTsKICB9CgogIC8qKgogICAqIEBkZXYgQ2hlY2tzIHdoZXRoZXIgdGhlIHBlcmlvZCBpbiB3aGljaCB0aGUgY3Jvd2RzYWxlIGlzIG9wZW4gaGFzIGFscmVhZHkgZWxhcHNlZC4KICAgKiBAcmV0dXJuIFdoZXRoZXIgY3Jvd2RzYWxlIHBlcmlvZCBoYXMgZWxhcHNlZAogICAqLwogIGZ1bmN0aW9uIGhhc0Nsb3NlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBub3cgPiBjbG9zaW5nVGltZTsKICB9CiAgCiAgLyoqCiAgICogQGRldiBFeHRlbmQgcGFyZW50IGJlaGF2aW9yIHJlcXVpcmluZyB0byBiZSB3aXRoaW4gY29udHJpYnV0aW5nIHBlcmlvZAogICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgVG9rZW4gcHVyY2hhc2VyCiAgICogQHBhcmFtIF93ZWlBbW91bnQgQW1vdW50IG9mIHdlaSBjb250cmlidXRlZAogICAqLwogIGZ1bmN0aW9uIF9wcmVWYWxpZGF0ZVB1cmNoYXNlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF93ZWlBbW91bnQpIGludGVybmFsIG9ubHlXaGlsZU9wZW4gewogICAgc3VwZXIuX3ByZVZhbGlkYXRlUHVyY2hhc2UoX2JlbmVmaWNpYXJ5LCBfd2VpQW1vdW50KTsKICB9Cgp9CgoKCi8qKgogKiBAdGl0bGUgRmluYWxpemFibGVDcm93ZHNhbGUKICogQGRldiBFeHRlbnNpb24gb2YgQ3Jvd2RzYWxlIHdoZXJlIGFuIG93bmVyIGNhbiBkbyBleHRyYSB3b3JrCiAqIGFmdGVyIGZpbmlzaGluZy4KICovCmNvbnRyYWN0IEZpbmFsaXphYmxlQ3Jvd2RzYWxlIGlzIFRpbWVkQ3Jvd2RzYWxlLCBPd25hYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgYm9vbCBwdWJsaWMgaXNGaW5hbGl6ZWQgPSBmYWxzZTsKCiAgZXZlbnQgRmluYWxpemVkKCk7CgogIC8qKgogICAqIEBkZXYgTXVzdCBiZSBjYWxsZWQgYWZ0ZXIgY3Jvd2RzYWxlIGVuZHMsIHRvIGRvIHNvbWUgZXh0cmEgZmluYWxpemF0aW9uCiAgICogd29yay4gQ2FsbHMgdGhlIGNvbnRyYWN0J3MgZmluYWxpemF0aW9uIGZ1bmN0aW9uLgogICAqLwogIGZ1bmN0aW9uIGZpbmFsaXplKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKCFpc0ZpbmFsaXplZCk7CiAgICByZXF1aXJlKGhhc0Nsb3NlZCgpKTsKCiAgICBmaW5hbGl6YXRpb24oKTsKICAgIGVtaXQgRmluYWxpemVkKCk7CgogICAgaXNGaW5hbGl6ZWQgPSB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBDYW4gYmUgb3ZlcnJpZGRlbiB0byBhZGQgZmluYWxpemF0aW9uIGxvZ2ljLiBUaGUgb3ZlcnJpZGluZyBmdW5jdGlvbgogICAqIHNob3VsZCBjYWxsIHN1cGVyLmZpbmFsaXphdGlvbigpIHRvIGVuc3VyZSB0aGUgY2hhaW4gb2YgZmluYWxpemF0aW9uIGlzCiAgICogZXhlY3V0ZWQgZW50aXJlbHkuCiAgICovCiAgZnVuY3Rpb24gZmluYWxpemF0aW9uKCkgaW50ZXJuYWwgewogIH0KfQoKCgoKCgoKLyoqCiAqIEB0aXRsZSBDYXBwZWRDcm93ZHNhbGUKICogQGRldiBDcm93ZHNhbGUgd2l0aCBhIGxpbWl0IGZvciB0b3RhbCBjb250cmlidXRpb25zLgogKi8KY29udHJhY3QgQ2FwcGVkQ3Jvd2RzYWxlIGlzIENyb3dkc2FsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIHVpbnQyNTYgcHVibGljIGNhcDsKCiAgLyoqCiAgICogQGRldiBDb25zdHJ1Y3RvciwgdGFrZXMgbWF4aW11bSBhbW91bnQgb2Ygd2VpIGFjY2VwdGVkIGluIHRoZSBjcm93ZHNhbGUuCiAgICogQHBhcmFtIF9jYXAgTWF4IGFtb3VudCBvZiB3ZWkgdG8gYmUgY29udHJpYnV0ZWQKICAgKi8KICBmdW5jdGlvbiBDYXBwZWRDcm93ZHNhbGUodWludDI1NiBfY2FwKSBwdWJsaWMgewogICAgcmVxdWlyZShfY2FwID4gMCk7CiAgICBjYXAgPSBfY2FwOwogIH0KCiAgLyoqCiAgICogQGRldiBDaGVja3Mgd2hldGhlciB0aGUgY2FwIGhhcyBiZWVuIHJlYWNoZWQuIAogICAqIEByZXR1cm4gV2hldGhlciB0aGUgY2FwIHdhcyByZWFjaGVkCiAgICovCiAgZnVuY3Rpb24gY2FwUmVhY2hlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB3ZWlSYWlzZWQgPj0gY2FwOwogIH0KCiAgLyoqCiAgICogQGRldiBFeHRlbmQgcGFyZW50IGJlaGF2aW9yIHJlcXVpcmluZyBwdXJjaGFzZSB0byByZXNwZWN0IHRoZSBmdW5kaW5nIGNhcC4KICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IFRva2VuIHB1cmNoYXNlcgogICAqIEBwYXJhbSBfd2VpQW1vdW50IEFtb3VudCBvZiB3ZWkgY29udHJpYnV0ZWQKICAgKi8KICBmdW5jdGlvbiBfcHJlVmFsaWRhdGVQdXJjaGFzZShhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbCB7CiAgICBzdXBlci5fcHJlVmFsaWRhdGVQdXJjaGFzZShfYmVuZWZpY2lhcnksIF93ZWlBbW91bnQpOwogICAgcmVxdWlyZSh3ZWlSYWlzZWQuYWRkKF93ZWlBbW91bnQpIDw9IGNhcCk7CiAgfQoKfQoKCgoKCgoKCgoKCgovKioKICogQHRpdGxlIFJlZnVuZFZhdWx0CiAqIEBkZXYgVGhpcyBjb250cmFjdCBpcyB1c2VkIGZvciBzdG9yaW5nIGZ1bmRzIHdoaWxlIGEgY3Jvd2RzYWxlCiAqIGlzIGluIHByb2dyZXNzLiBTdXBwb3J0cyByZWZ1bmRpbmcgdGhlIG1vbmV5IGlmIGNyb3dkc2FsZSBmYWlscywKICogYW5kIGZvcndhcmRpbmcgaXQgaWYgY3Jvd2RzYWxlIGlzIHN1Y2Nlc3NmdWwuCiAqLwpjb250cmFjdCBSZWZ1bmRWYXVsdCBpcyBPd25hYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgZW51bSBTdGF0ZSB7IEFjdGl2ZSwgUmVmdW5kaW5nLCBDbG9zZWQgfQoKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkZXBvc2l0ZWQ7CiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwogIFN0YXRlIHB1YmxpYyBzdGF0ZTsKCiAgZXZlbnQgQ2xvc2VkKCk7CiAgZXZlbnQgUmVmdW5kc0VuYWJsZWQoKTsKICBldmVudCBSZWZ1bmRlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgd2VpQW1vdW50KTsKCiAgLyoqCiAgICogQHBhcmFtIF93YWxsZXQgVmF1bHQgYWRkcmVzcwogICAqLwogIGZ1bmN0aW9uIFJlZnVuZFZhdWx0KGFkZHJlc3MgX3dhbGxldCkgcHVibGljIHsKICAgIHJlcXVpcmUoX3dhbGxldCAhPSBhZGRyZXNzKDApKTsKICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICBzdGF0ZSA9IFN0YXRlLkFjdGl2ZTsKICB9CgogIC8qKgogICAqIEBwYXJhbSBpbnZlc3RvciBJbnZlc3RvciBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gZGVwb3NpdChhZGRyZXNzIGludmVzdG9yKSBvbmx5T3duZXIgcHVibGljIHBheWFibGUgewogICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5BY3RpdmUpOwogICAgZGVwb3NpdGVkW2ludmVzdG9yXSA9IGRlcG9zaXRlZFtpbnZlc3Rvcl0uYWRkKG1zZy52YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiBjbG9zZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgc3RhdGUgPSBTdGF0ZS5DbG9zZWQ7CiAgICBlbWl0IENsb3NlZCgpOwogICAgd2FsbGV0LnRyYW5zZmVyKGFkZHJlc3ModGhpcykuYmFsYW5jZSk7CiAgfQoKICBmdW5jdGlvbiBlbmFibGVSZWZ1bmRzKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICBzdGF0ZSA9IFN0YXRlLlJlZnVuZGluZzsKICAgIGVtaXQgUmVmdW5kc0VuYWJsZWQoKTsKICB9CgogIC8qKgogICAqIEBwYXJhbSBpbnZlc3RvciBJbnZlc3RvciBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gcmVmdW5kKGFkZHJlc3MgaW52ZXN0b3IpIHB1YmxpYyB7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlJlZnVuZGluZyk7CiAgICB1aW50MjU2IGRlcG9zaXRlZFZhbHVlID0gZGVwb3NpdGVkW2ludmVzdG9yXTsKICAgIGRlcG9zaXRlZFtpbnZlc3Rvcl0gPSAwOwogICAgaW52ZXN0b3IudHJhbnNmZXIoZGVwb3NpdGVkVmFsdWUpOwogICAgZW1pdCBSZWZ1bmRlZChpbnZlc3RvciwgZGVwb3NpdGVkVmFsdWUpOwogIH0KfQoKCgovKioKICogQHRpdGxlIFJlZnVuZGFibGVDcm93ZHNhbGUKICogQGRldiBFeHRlbnNpb24gb2YgQ3Jvd2RzYWxlIGNvbnRyYWN0IHRoYXQgYWRkcyBhIGZ1bmRpbmcgZ29hbCwgYW5kCiAqIHRoZSBwb3NzaWJpbGl0eSBvZiB1c2VycyBnZXR0aW5nIGEgcmVmdW5kIGlmIGdvYWwgaXMgbm90IG1ldC4KICogVXNlcyBhIFJlZnVuZFZhdWx0IGFzIHRoZSBjcm93ZHNhbGUncyB2YXVsdC4KICovCmNvbnRyYWN0IFJlZnVuZGFibGVDcm93ZHNhbGUgaXMgRmluYWxpemFibGVDcm93ZHNhbGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAvLyBtaW5pbXVtIGFtb3VudCBvZiBmdW5kcyB0byBiZSByYWlzZWQgaW4gd2VpcwogIHVpbnQyNTYgcHVibGljIGdvYWw7CgogIC8vIHJlZnVuZCB2YXVsdCB1c2VkIHRvIGhvbGQgZnVuZHMgd2hpbGUgY3Jvd2RzYWxlIGlzIHJ1bm5pbmcKICBSZWZ1bmRWYXVsdCBwdWJsaWMgdmF1bHQ7CiAKICAvKioKICAgKiBAZGV2IENvbnN0cnVjdG9yLCBjcmVhdGVzIFJlZnVuZFZhdWx0LiAKICAgKiBAcGFyYW0gX2dvYWwgRnVuZGluZyBnb2FsCiAgICovCiAgZnVuY3Rpb24gUmVmdW5kYWJsZUNyb3dkc2FsZSh1aW50MjU2IF9nb2FsKSBwdWJsaWMgewogICAgcmVxdWlyZShfZ29hbCA+IDApOwogICAgdmF1bHQgPSBuZXcgUmVmdW5kVmF1bHQod2FsbGV0KTsKICAgIGdvYWwgPSBfZ29hbDsKICB9CgogIC8qKgogICAqIEBkZXYgSW52ZXN0b3JzIGNhbiBjbGFpbSByZWZ1bmRzIGhlcmUgaWYgY3Jvd2RzYWxlIGlzIHVuc3VjY2Vzc2Z1bAogICAqLwogIGZ1bmN0aW9uIGNsYWltUmVmdW5kKCkgcHVibGljIHsKICAgIHJlcXVpcmUoaXNGaW5hbGl6ZWQpOwogICAgcmVxdWlyZSghZ29hbFJlYWNoZWQoKSk7CgogICAgdmF1bHQucmVmdW5kKG1zZy5zZW5kZXIpOwogIH0KCiAgLyoqCiAgICogQGRldiBDaGVja3Mgd2hldGhlciBmdW5kaW5nIGdvYWwgd2FzIHJlYWNoZWQuIAogICAqIEByZXR1cm4gV2hldGhlciBmdW5kaW5nIGdvYWwgd2FzIHJlYWNoZWQKICAgKi8KICBmdW5jdGlvbiBnb2FsUmVhY2hlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB3ZWlSYWlzZWQgPj0gZ29hbDsKICB9CgogIC8qKgogICAqIEBkZXYgdmF1bHQgZmluYWxpemF0aW9uIHRhc2ssIGNhbGxlZCB3aGVuIG93bmVyIGNhbGxzIGZpbmFsaXplKCkKICAgKi8KICBmdW5jdGlvbiBmaW5hbGl6YXRpb24oKSBpbnRlcm5hbCB7CiAgICBpZiAoZ29hbFJlYWNoZWQoKSkgewogICAgICB2YXVsdC5jbG9zZSgpOwogICAgfSBlbHNlIHsKICAgICAgdmF1bHQudHJhbnNmZXJPd25lcnNoaXAob3duZXIpOwogICAgfQoKICAgIHN1cGVyLmZpbmFsaXphdGlvbigpOwogIH0KCiAgLyoqCiAgICogQGRldiBPdmVycmlkZXMgQ3Jvd2RzYWxlIGZ1bmQgZm9yd2FyZGluZywgc2VuZGluZyBmdW5kcyB0byB2YXVsdC4KICAgKi8KICBmdW5jdGlvbiBfZm9yd2FyZEZ1bmRzKCkgaW50ZXJuYWwgewogICAgdmF1bHQuZGVwb3NpdC52YWx1ZShtc2cudmFsdWUpKG1zZy5zZW5kZXIpOwogIH0KCn0KCgoKCgoKCgovKioKICogQHRpdGxlIFBvc3REZWxpdmVyeUNyb3dkc2FsZQogKiBAZGV2IENyb3dkc2FsZSB0aGF0IGxvY2tzIHRva2VucyBmcm9tIHdpdGhkcmF3YWwgdW50aWwgaXQgZW5kcy4KICovCmNvbnRyYWN0IFBvc3REZWxpdmVyeUNyb3dkc2FsZSBpcyBUaW1lZENyb3dkc2FsZSwgT3duYWJsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZXM7CgogIC8qKgogICAqIEBkZXYgT3ZlcnJpZGVzIHBhcmVudCBieSBzdG9yaW5nIGJhbGFuY2VzIGluc3RlYWQgb2YgaXNzdWluZyB0b2tlbnMgcmlnaHQgYXdheS4KICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IFRva2VuIHB1cmNoYXNlcgogICAqIEBwYXJhbSBfdG9rZW5BbW91bnQgQW1vdW50IG9mIHRva2VucyBwdXJjaGFzZWQKICAgKi8KICBmdW5jdGlvbiBfcHJvY2Vzc1B1cmNoYXNlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF90b2tlbkFtb3VudCkgaW50ZXJuYWwgewogICAgYmFsYW5jZXNbX2JlbmVmaWNpYXJ5XSA9IGJhbGFuY2VzW19iZW5lZmljaWFyeV0uYWRkKF90b2tlbkFtb3VudCk7CiAgfQoKICAvKioKICAgKiBAZGV2IFdpdGhkcmF3IHRva2VucyBvbmx5IGFmdGVyIGNyb3dkc2FsZSBlbmRzLgogICAqLwogIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW5zKGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUoaGFzQ2xvc2VkKCkpOwogICAgdWludDI1NiBhbW91bnQgPSBiYWxhbmNlc1tfYmVuZWZpY2lhcnldOwogICAgcmVxdWlyZShhbW91bnQgPiAwKTsKICAgIGJhbGFuY2VzW19iZW5lZmljaWFyeV0gPSAwOwogICAgX2RlbGl2ZXJUb2tlbnMoX2JlbmVmaWNpYXJ5LCBhbW91bnQpOwogIH0KfQoKCgoKCgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgoKY29udHJhY3QgQ3hOY29udHJhY3QgaXMgQ2FwcGVkQ3Jvd2RzYWxlLCBSZWZ1bmRhYmxlQ3Jvd2RzYWxlLCBQb3N0RGVsaXZlcnlDcm93ZHNhbGUgewogICAgCiAgICAvLyBPbmx5IGZvciB0ZXN0TmV0OgogICAgLy91aW50IHByaXZTYWxlMXN0YXJ0ID0gbm93OwoKICAgIC8vIEJvdW50eSBoaXZlCiAgICBhZGRyZXNzIHBhcnRuZXJBZGRyZXNzOwoKICAgIC8vICAgIC8vICAyMCBNYXIgMjAxOCAgMDc6MDA6MDAgUE0gQ1NUCiAgICB1aW50IHByaXZTYWxlMXN0YXJ0ID0gMTUyMTU5NDAwMDsKCiAgICAvLyAgMTAgQXByIDIwMTggIDExOjU5OjAwIFBNIENTVAogICAgdWludCBwcml2U2FsZTFlbmQgPSAxNTIzNDI2NDAwOwoKICAgIC8vIDE2IEFwciAyMDE4ICAwNzowMDowMCBQTSBDU1QKICAgIHVpbnQgcHJpdlNhbGUyc3RhcnQgPSAxNTIzOTI2ODAwOwoKICAgIC8vIDA3IE1heSAyMDE4ICAxMTo1OTowMCBQTSBDU1QKICAgIHVpbnQgcHJpdlNhbGUyZW5kID0gMTUyNTc1OTIwMDsKCiAgICAvLyAxMSBNYXkgMjAxOCAwNzowMDowMCBQTSBDU1QKICAgIHVpbnQgc2FsZVN0YXJ0ID0gMTUyNjA4NjgwMDsKCiAgICAvLyAxOCBKdW4gMjAxOCAxMTo1OTowMCBQTSBDU1QKICAgIHVpbnQgc2FsZUVuZCA9IDE1MjY3MDk2MDA7CgogICAgZnVuY3Rpb24gQ3hOY29udHJhY3QodWludDI1NiBfb3BlbmluZ1RpbWUsIHVpbnQyNTYgX2Nsb3NpbmdUaW1lLCBhZGRyZXNzIF93YWxsZXQsIHVpbnQyNTYgX2NhcCwgRVJDMjAgX3Rva2VuLCB1aW50MjU2IF9nb2FsLCBhZGRyZXNzIF9wYXJ0bmVyQWRkcmVzcykgcHVibGljIHBheWFibGUKICAgICAgICBDcm93ZHNhbGUoX3dhbGxldCwgX3Rva2VuKQogICAgICAgIENhcHBlZENyb3dkc2FsZShfY2FwKQogICAgICAgIFRpbWVkQ3Jvd2RzYWxlKF9vcGVuaW5nVGltZSwgX2Nsb3NpbmdUaW1lKQogICAgICAgIFJlZnVuZGFibGVDcm93ZHNhbGUoX2dvYWwpIAogICAgewogICAgICAgIC8vQXMgZ29hbCBuZWVkcyB0byBiZSBtZXQgZm9yIGEgc3VjY2Vzc2Z1bCBjcm93ZHNhbGUKICAgICAgICAvL3RoZSB2YWx1ZSBuZWVkcyB0byBsZXNzIG9yIGVxdWFsIHRoYW4gYSBjYXAgd2hpY2ggaXMgbGltaXQgZm9yIGFjY2VwdGVkIGZ1bmRzCiAgICAgICAgcGFydG5lckFkZHJlc3MgPSBfcGFydG5lckFkZHJlc3M7CiAgICAgICAgcmVxdWlyZShfZ29hbCA8PSBfY2FwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfcHJlVmFsaWRhdGVQdXJjaGFzZShhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShjaGVja1ZhbHVlKF93ZWlBbW91bnQpKTsKICAgICAgICBzdXBlci5fcHJlVmFsaWRhdGVQdXJjaGFzZShfYmVuZWZpY2lhcnksIF93ZWlBbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9nZXRUb2tlbkFtb3VudCh1aW50MjU2IF93ZWlBbW91bnQpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBfd2VpQW1vdW50Lm11bChnZXRSYXRlKCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrVmFsdWUodWludDI1NiBhbW91bnQpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChub3cgPiBwcml2U2FsZTFzdGFydCAmJiBub3cgPCBwcml2U2FsZTFlbmQpIAogICAgICAgICAgICByZXR1cm4gKGFtb3VudCA+PSA1IGV0aGVyKTsKICAgICAgICBlbHNlIGlmIChub3cgPiBwcml2U2FsZTJzdGFydCAmJiBub3cgPCBwcml2U2FsZTJlbmQpIAogICAgICAgICAgICByZXR1cm4gKGFtb3VudCA+PSA1IGV0aGVyKTsKICAgICAgICBlbHNlIGlmIChub3cgPiBzYWxlU3RhcnQgJiYgbm93IDwgc2FsZUVuZCkgCiAgICAgICAgICAgIHJldHVybiAoYW1vdW50ID49IDAuMSBldGhlcik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFJhdGUoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKG5vdyA+IHByaXZTYWxlMXN0YXJ0ICYmIG5vdyA8IHByaXZTYWxlMWVuZCkgCiAgICAgICAgICAgIHJldHVybiAxNDM3NTsgLy8gU3RhZ2UgSQogICAgICAgIGVsc2UgaWYgKG5vdyA+IHByaXZTYWxlMnN0YXJ0ICYmIG5vdyA8IHByaXZTYWxlMmVuZCkgCiAgICAgICAgICAgIHJldHVybiAxMzc1MDsgLy8gU3RhZ2UgSUkKICAgICAgICBlbHNlIGlmIChub3cgPiBzYWxlU3RhcnQgJiYgbm93IDwgc2FsZUVuZCkgCiAgICAgICAgICAgIHJldHVybiAxMjUwMDsgLy8gUHVibGljIFNhbGUKICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5hbGl6YXRpb24oKSBpbnRlcm5hbCB7CiAgICAgICAgdWludDI1NiB0b2tlbnNGb3JQYXJ0bmVycyA9IDI4MDAwMDAgZXRoZXI7CiAgICAgICAgdWludDI1NiB0b2tlbnNOZWVkZWRUb0Nsb3NlID0gdG9rZW5zRm9yUGFydG5lcnMuYWRkKHRva2Vuc0Rpc3RyaWJ1dGVkKTsKICAgICAgICAKICAgICAgICByZXF1aXJlKHRva2VuLmJhbGFuY2VPZih3YWxsZXQpID49IHRva2Vuc05lZWRlZFRvQ2xvc2UpOwoKICAgICAgICB0b2tlbi50cmFuc2ZlckZyb20od2FsbGV0LCBwYXJ0bmVyQWRkcmVzcywgdG9rZW5zRm9yUGFydG5lcnMpOwoKICAgICAgICBzdXBlci5maW5hbGl6YXRpb24oKTsKICAgIH0KfQ=='.
	

]
