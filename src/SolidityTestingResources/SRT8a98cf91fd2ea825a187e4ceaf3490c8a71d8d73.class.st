Class {
	#name : #SRT8a98cf91fd2ea825a187e4ceaf3490c8a71d8d73,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8a98cf91fd2ea825a187e4ceaf3490c8a71d8d73 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBEZXN0cnVjdGlibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHRoYXQgY2FuIGJlIGRlc3Ryb3llZCBieSBvd25lci4gQWxsIGZ1bmRzIGluIGNvbnRyYWN0IHdpbGwgYmUgc2VudCB0byB0aGUgb3duZXIuCiAqLwpjb250cmFjdCBEZXN0cnVjdGlibGUgaXMgT3duYWJsZSB7CgogICAgZnVuY3Rpb24gRGVzdHJ1Y3RpYmxlKCkgcHVibGljIHBheWFibGUgeyB9CgogICAgLyoqCiAgICAgKiBAZGV2IFRyYW5zZmVycyB0aGUgY3VycmVudCBiYWxhbmNlIHRvIHRoZSBvd25lciBhbmQgdGVybWluYXRlcyB0aGUgY29udHJhY3QuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlc3Ryb3lBbmRTZW5kKGFkZHJlc3MgX3JlY2lwaWVudCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgc2VsZmRlc3RydWN0KF9yZWNpcGllbnQpOwogICAgfQp9CgovKioKICogQHRpdGxlIFB1bGxQYXltZW50CiAqIEBkZXYgQmFzZSBjb250cmFjdCBzdXBwb3J0aW5nIGFzeW5jIHNlbmQgZm9yIHB1bGwgcGF5bWVudHMuIEluaGVyaXQgZnJvbSB0aGlzCiAqIGNvbnRyYWN0IGFuZCB1c2UgYXN5bmNTZW5kIGluc3RlYWQgb2Ygc2VuZC4KICovCmNvbnRyYWN0IFB1bGxQYXltZW50IHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgcGF5bWVudHM7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFBheW1lbnRzOwoKICAgIC8qKgogICAgICogQGRldiBDYWxsZWQgYnkgdGhlIHBheWVyIHRvIHN0b3JlIHRoZSBzZW50IGFtb3VudCBhcyBjcmVkaXQgdG8gYmUgcHVsbGVkLgogICAgICogQHBhcmFtIGRlc3QgVGhlIGRlc3RpbmF0aW9uIGFkZHJlc3Mgb2YgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIGFtb3VudCBUaGUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICovCiAgICBmdW5jdGlvbiBhc3luY1NlbmQoYWRkcmVzcyBkZXN0LCB1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgewogICAgICAgIHBheW1lbnRzW2Rlc3RdID0gcGF5bWVudHNbZGVzdF0uYWRkKGFtb3VudCk7CiAgICAgICAgdG90YWxQYXltZW50cyA9IHRvdGFsUGF5bWVudHMuYWRkKGFtb3VudCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IHdpdGhkcmF3IGFjY3VtdWxhdGVkIGJhbGFuY2UsIGNhbGxlZCBieSBwYXllZS4KICAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXdQYXltZW50cygpIHB1YmxpYyB7CiAgICAgICAgYWRkcmVzcyBwYXllZSA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludDI1NiBwYXltZW50ID0gcGF5bWVudHNbcGF5ZWVdOwoKICAgICAgICByZXF1aXJlKHBheW1lbnQgIT0gMCk7CiAgICAgICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgPj0gcGF5bWVudCk7CgogICAgICAgIHRvdGFsUGF5bWVudHMgPSB0b3RhbFBheW1lbnRzLnN1YihwYXltZW50KTsKICAgICAgICBwYXltZW50c1twYXllZV0gPSAwOwoKICAgICAgICBhc3NlcnQocGF5ZWUuc2VuZChwYXltZW50KSk7CiAgICB9Cn0KCi8qKgogKiBAdGl0bGUgQm91bnR5CiAqIEBkZXYgVGhpcyBib3VudHkgd2lsbCBwYXkgb3V0IHRvIGEgcmVzZWFyY2hlciBpZiB0aGV5IGJyZWFrIGludmFyaWFudCBsb2dpYyBvZiB0aGUgY29udHJhY3QuCiAqLwpjb250cmFjdCBCb3VudHkgaXMgUHVsbFBheW1lbnQsIERlc3RydWN0aWJsZSB7CiAgICBib29sIHB1YmxpYyBjbGFpbWVkOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGFkZHJlc3MpIHB1YmxpYyByZXNlYXJjaGVyczsKCiAgICBldmVudCBUYXJnZXRDcmVhdGVkKGFkZHJlc3MgY3JlYXRlZEFkZHJlc3MpOwoKICAgIC8qKgogICAgICogQGRldiBGYWxsYmFjayBmdW5jdGlvbiBhbGxvd2luZyB0aGUgY29udHJhY3QgdG8gcmVjZWl2ZSBmdW5kcywgaWYgdGhleSBoYXZlbid0IGFscmVhZHkgYmVlbiBjbGFpbWVkLgogICAgICovCiAgICBmdW5jdGlvbigpIGV4dGVybmFsIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoIWNsYWltZWQpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBDcmVhdGUgYW5kIGRlcGxveSB0aGUgdGFyZ2V0IGNvbnRyYWN0IChleHRlbnNpb24gb2YgVGFyZ2V0IGNvbnRyYWN0KSwgYW5kIHNldHMgdGhlCiAgICAgKiBtc2cuc2VuZGVyIGFzIGEgcmVzZWFyY2hlcgogICAgICogQHJldHVybiBBIHRhcmdldCBjb250cmFjdAogICAgICovCiAgICBmdW5jdGlvbiBjcmVhdGVUYXJnZXQoKSBwdWJsaWMgcmV0dXJucyhUYXJnZXQpIHsKICAgICAgICBUYXJnZXQgdGFyZ2V0ID0gVGFyZ2V0KGRlcGxveUNvbnRyYWN0KCkpOwogICAgICAgIHJlc2VhcmNoZXJzW3RhcmdldF0gPSBtc2cuc2VuZGVyOwogICAgICAgIFRhcmdldENyZWF0ZWQodGFyZ2V0KTsKICAgICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0byBkZXBsb3kgdGhlIHRhcmdldCBjb250cmFjdC4KICAgICAqIEByZXR1cm4gQSB0YXJnZXQgY29udHJhY3QgYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiBkZXBsb3lDb250cmFjdCgpIGludGVybmFsIHJldHVybnMoYWRkcmVzcyk7CgogICAgLyoqCiAgICAgKiBAZGV2IFNlbmRzIHRoZSBjb250cmFjdCBmdW5kcyB0byB0aGUgcmVzZWFyY2hlciB0aGF0IHByb3ZlZCB0aGUgY29udHJhY3QgaXMgYnJva2VuLgogICAgICogQHBhcmFtIHRhcmdldCBjb250cmFjdAogICAgICovCiAgICBmdW5jdGlvbiBjbGFpbShUYXJnZXQgdGFyZ2V0KSBwdWJsaWMgewogICAgICAgIGFkZHJlc3MgcmVzZWFyY2hlciA9IHJlc2VhcmNoZXJzW3RhcmdldF07CiAgICAgICAgcmVxdWlyZShyZXNlYXJjaGVyICE9IDApOwogICAgICAgIC8vIENoZWNrIFRhcmdldCBjb250cmFjdCBpbnZhcmlhbnRzCiAgICAgICAgcmVxdWlyZSghdGFyZ2V0LmNoZWNrSW52YXJpYW50KCkpOwogICAgICAgIGFzeW5jU2VuZChyZXNlYXJjaGVyLCB0aGlzLmJhbGFuY2UpOwogICAgICAgIGNsYWltZWQgPSB0cnVlOwogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBUYXJnZXQKICogQGRldiBZb3VyIG1haW4gY29udHJhY3Qgc2hvdWxkIGluaGVyaXQgZnJvbSB0aGlzIGNsYXNzIGFuZCBpbXBsZW1lbnQgdGhlIGNoZWNrSW52YXJpYW50IG1ldGhvZC4KICovCmNvbnRyYWN0IFRhcmdldCB7CiAgICAvKioKICAgICAqIEBkZXYgQ2hlY2tzIGFsbCB2YWx1ZXMgYSBjb250cmFjdCBhc3N1bWVzIHRvIGJlIHRydWUgYWxsIHRoZSB0aW1lLiBJZiB0aGlzIGZ1bmN0aW9uIHJldHVybnMKICAgICAqIGZhbHNlLCB0aGUgY29udHJhY3QgaXMgYnJva2VuIGluIHNvbWUgd2F5IGFuZCBpcyBpbiBhbiBpbmNvbnNpc3RlbnQgc3RhdGUuCiAgICAgKiBJbiBvcmRlciB0byB3aW4gdGhlIGJvdW50eSwgc2VjdXJpdHkgcmVzZWFyY2hlcnMgd2lsbCB0cnkgdG8gY2F1c2UgdGhpcyBicm9rZW4gc3RhdGUuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYWxsIGludmFyaWFudCB2YWx1ZXMgYXJlIGNvcnJlY3QsIGZhbHNlIG90aGVyd2lzZS4KICAgICAqLwogICAgZnVuY3Rpb24gY2hlY2tJbnZhcmlhbnQoKSBwdWJsaWMgcmV0dXJucyhib29sKTsKfQoKLyoKKiAgQHRpdGxlIFByaWNpbmdTdHJhdGVneQoqICBBbiBhYnN0cmFjdCBjbGFzcyBmb3IgYWxsIFByaWNpbmcgU3RyYXRlZ3kgY29udHJhY3RzLgoqLwpjb250cmFjdCBQcmljaW5nU3RyYXRlZ3kgaXMgT3duYWJsZSB7CiAgICAvKgogICAgKiBAZGV2IE51bWJlciBzb2xkIHRva2VucyBmb3IgY3VycmVudCBzdHJhdGVneQogICAgKi8KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU29sZFRva2VucyA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWQgPSAwOwogICAgLyoKICAgICogQGRldiBDb3VudCBudW1iZXIgb2YgdG9rZW5zIHdpdGggYm9udXNlcwogICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgVmFsdWUgaW4gZXRoZXIgZnJvbSBpbnZlc3RvcgogICAgKiBAcmV0dXJuIHVpbnQyNTYgUmV0dXJuIG51bWJlciBvZiB0b2tlbnMgZm9yIGludmVzdG9yCiAgICAqLwogICAgZnVuY3Rpb24gY291bnRUb2tlbnModWludDI1NiBfdmFsdWUpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgdG9rZW5zQW5kQm9udXMpOwoKICAgIC8qCiAgICAqIEBkZXYgU3VtbWluZyBzb2xkIG9mIHRva2VucwogICAgKiBAcGFyYW0gX3Rva2Vuc0FuZEJvbnVzIHVpbnQyNTYgTnVtYmVyIHRva2VucyBmb3IgY3VycmVudCBzYWxlIGluIGEgdHJhbmNoZQogICAgKi8KICAgIGZ1bmN0aW9uIHNvbGRJblRyYW5jaGUodWludDI1NiBfdG9rZW5zQW5kQm9udXMpIGludGVybmFsOwoKICAgIC8qCiAgICAqIEBkZXYgQ2hlY2sgcmVxdWlyZWQgb2YgdG9rZW5zIGluIHRoZSB0cmFuY2hlCiAgICAqIEBwYXJhbSBfcmVxdWlyZWRUb2tlbnMgdWludDI1NiBOdW1iZXIgcmVxdWlyZWQgb2YgdG9rZW5zCiAgICAqIEByZXR1cm4gYm9vbGVhbiBSZXR1cm4gdHJ1ZSBpZiBjb3VudCBvZiB0b2tlbnMgaXMgYXZhaWxhYmxlCiAgICAqLwogICAgZnVuY3Rpb24gZ2V0RnJlZVRva2Vuc0luVHJhbmNoZSh1aW50MjU2IF9yZXF1aXJlZFRva2VucykgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7CgogICAgZnVuY3Rpb24gaXNOb0VtcHR5VHJhbmNoZXMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhib29sKTsKfQoKY29udHJhY3QgIFRyYW5jaGVQcmljaW5nU3RyYXRlZ3kgaXMgUHJpY2luZ1N0cmF0ZWd5LCBUYXJnZXQgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zQ2FwOwogICAgdWludDI1NiBwdWJsaWMgY2FwSW5XZWk7CgogICAgLyoKICAgICogRGVmaW5lIGJvbnVzIHNjaGVkdWxlIG9mIHRyYW5jaGVzLgogICAgKi8KICAgIHN0cnVjdCBCb251c1NjaGVkdWxlIHsKICAgICAgICB1aW50MjU2IGJvbnVzOyAvLyBCb251cyByYXRlIGZvciBjdXJyZW50IHRyYW5jaGUKICAgICAgICB1aW50IHZhbHVlRm9yVHJhbmNoZTsgLy8gQW1vdW50IG9mIHRva2VucyBhdmFpbGFibGUgZm9yIHRoZSBjdXJyZW50IHBlcmlvZAogICAgICAgIHVpbnQgcmF0ZTsgLy8gSG93IG11Y2ggdG9rZW5zIGZvciBvbmUgZXRoZXIKICAgIH0KCiAgICAvL2V2ZW50IGZvciB0ZXN0aW5nCiAgICBldmVudCBUb2tlbkZvckludmVzdG9yKHVpbnQyNTYgX3Rva2VuLCB1aW50MjU2IF90b2tlbkFuZEJvbnVzLCB1aW50MjU2IGluZGV4T2ZwZXJpb2QpOwoKICAgIHVpbnQgdHJhbmNoZXNDb3VudCA9IDA7CiAgICB1aW50IE1BWF9UUkFOQ0hFUyA9IDUwOwoKICAgIC8vU3RvcmUgQm9udXNTdHJhdGVneSBpbiBhIGZpeGVkIGFycmF5LCBzbyB0aGF0IGl0IGNhbiBiZSBzZWVuIGluIGEgYmxvY2tjaGFpbiBleHBsb3JlcgogICAgQm9udXNTY2hlZHVsZVtdIHB1YmxpYyB0cmFuY2hlczsKCiAgICAvKgogICAgKiBAZGV2IENvbnN0cnVjdG9yCiAgICAqIEBwYXJhbSBfYm9udXNlcyB1aW50MjU2W10gQm9udXNlcyBpbiB0cmFuY2hlcwogICAgKiBAcGFyYW0gX3ZhbHVlRm9yVHJhbmNoZXMgdWludFtdIFZhbHVlIG9mIHRva2VucyBpbiB0cmFuY2hlcwogICAgKiBAcGFyYW1zIF9yYXRlcyB1aW50W10gUmF0ZXMgZm9yIHRyYW5jaGVzCiAgICAqLwogICAgZnVuY3Rpb24gVHJhbmNoZVByaWNpbmdTdHJhdGVneSh1aW50MjU2W10gX2JvbnVzZXMsIHVpbnRbXSBfdmFsdWVGb3JUcmFuY2hlcywgdWludFtdIF9yYXRlcywKICAgICAgICB1aW50MjU2IF9jYXBJbldlaSwgdWludDI1NiBfdG9rZW5zQ2FwKSBwdWJsaWMgewoKICAgICAgICB0b2tlbnNDYXAgPSBfdG9rZW5zQ2FwOwogICAgICAgIGNhcEluV2VpID0gX2NhcEluV2VpOwogICAgICAgIHJlcXVpcmUoX2JvbnVzZXMubGVuZ3RoID09IF92YWx1ZUZvclRyYW5jaGVzLmxlbmd0aCAmJiBfdmFsdWVGb3JUcmFuY2hlcy5sZW5ndGggPT0gX3JhdGVzLmxlbmd0aCk7CiAgICAgICAgcmVxdWlyZShfYm9udXNlcy5sZW5ndGggPD0gTUFYX1RSQU5DSEVTKTsKCiAgICAgICAgdHJhbmNoZXNDb3VudCA9IF9ib251c2VzLmxlbmd0aDsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX2JvbnVzZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHRyYW5jaGVzLnB1c2goQm9udXNTY2hlZHVsZSh7CiAgICAgICAgICAgICAgICBib251czogX2JvbnVzZXNbaV0sCiAgICAgICAgICAgICAgICB2YWx1ZUZvclRyYW5jaGU6IF92YWx1ZUZvclRyYW5jaGVzW2ldLAogICAgICAgICAgICAgICAgcmF0ZTogX3JhdGVzW2ldCiAgICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICB9CgogICAgLyoKICAgICogQGRldiBDb3VudCBudW1iZXIgb2YgdG9rZW5zIHdpdGggYm9udXNlcwogICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgVmFsdWUgaW4gZXRoZXIKICAgICogQHJldHVybiB1aW50MjU2IFJldHVybiBudW1iZXIgb2YgdG9rZW5zIGZvciBhbiBpbnZlc3RvcgogICAgKi8KICAgIGZ1bmN0aW9uIGNvdW50VG9rZW5zKHVpbnQyNTYgX3ZhbHVlKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHRva2Vuc0FuZEJvbnVzKSB7CiAgICAgICAgdWludDI1NiBpbmRleE9mVHJhbmNoZSA9IGRlZmluZVRyYW5jaGVQZXJpb2QoKTsKCiAgICAgICAgcmVxdWlyZShpbmRleE9mVHJhbmNoZSAhPSBNQVhfVFJBTkNIRVMgKyAxKTsKCiAgICAgICAgQm9udXNTY2hlZHVsZSBjdXJyZW50VHJhbmNoZSA9IHRyYW5jaGVzW2luZGV4T2ZUcmFuY2hlXTsKICAgICAgICB1aW50MjU2IGV0aGVySW5XZWkgPSAxZTE4OwoKICAgICAgICB1aW50MjU2IGJvbnVzUmF0ZSA9IGN1cnJlbnRUcmFuY2hlLmJvbnVzOwogICAgICAgIHVpbnQgdmFsID0gbXNnLnZhbHVlICogZXRoZXJJbldlaTsKICAgICAgICB1aW50MjU2IG9uZVRva2VuSW5XZWkgPSBldGhlckluV2VpL2N1cnJlbnRUcmFuY2hlLnJhdGU7CiAgICAgICAgdWludCB0b2tlbnMgPSB2YWwgLyBvbmVUb2tlbkluV2VpOwogICAgICAgIHVpbnQyNTYgYm9udXNUb2tlbiA9IHRva2Vucy5tdWwoYm9udXNSYXRlKS5kaXYoMTAwKTsKICAgICAgICB0b2tlbnNBbmRCb251cyA9IHRva2Vucy5hZGQoYm9udXNUb2tlbik7CgogICAgICAgIHNvbGRJblRyYW5jaGUodG9rZW5zQW5kQm9udXMpOwogICAgICAgIHdlaVJhaXNlZCArPSBfdmFsdWU7CiAgICAgICAgVG9rZW5Gb3JJbnZlc3Rvcih0b2tlbnMsIHRva2Vuc0FuZEJvbnVzLCBpbmRleE9mVHJhbmNoZSk7CiAgICAgICAgcmV0dXJuIHRva2Vuc0FuZEJvbnVzOwogICAgfQoKICAgIC8qCiAgICAqIEBkZXYgQ2hlY2sgcmVxdWlyZWQgb2YgdG9rZW5zIGluIHRoZSB0cmFuY2hlCiAgICAqIEBwYXJhbSBfcmVxdWlyZWRUb2tlbnMgdWludDI1NiBOdW1iZXIgb2YgdG9rZW5zCiAgICAqIEByZXR1cm4gYm9vbGVhbiBSZXR1cm4gdHJ1ZSBpZiBjb3VudCBvZiB0b2tlbnMgaXMgYXZhaWxhYmxlCiAgICAqLwogICAgZnVuY3Rpb24gZ2V0RnJlZVRva2Vuc0luVHJhbmNoZSh1aW50MjU2IF9yZXF1aXJlZFRva2VucykgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGJvb2wgaGFzVG9rZW5zID0gZmFsc2U7CiAgICAgICAgdWludDI1NiBpbmRleE9mVHJhbmNoZSA9IGRlZmluZVRyYW5jaGVQZXJpb2QoKTsKICAgICAgICBoYXNUb2tlbnMgPSB0cmFuY2hlc1tpbmRleE9mVHJhbmNoZV0udmFsdWVGb3JUcmFuY2hlID4gX3JlcXVpcmVkVG9rZW5zOwoKICAgICAgICByZXR1cm4gaGFzVG9rZW5zOwogICAgfQoKICAgIC8qCiAgICAqIEBkZXYgU3VtbWluZyBzb2xkIG9mIHRva2VucwogICAgKiBAcGFyYW0gX3Rva2Vuc0FuZEJvbnVzIHVpbnQyNTYgTnVtYmVyIHRva2VucyBmb3IgY3VycmVudCBzYWxlCiAgICAqLwogICAgZnVuY3Rpb24gc29sZEluVHJhbmNoZSh1aW50MjU2IF90b2tlbnNBbmRCb251cykgaW50ZXJuYWwgewogICAgICAgIHVpbnQyNTYgaW5kZXhPZlRyYW5jaGUgPSBkZWZpbmVUcmFuY2hlUGVyaW9kKCk7CiAgICAgICAgcmVxdWlyZSh0cmFuY2hlc1tpbmRleE9mVHJhbmNoZV0udmFsdWVGb3JUcmFuY2hlID49IF90b2tlbnNBbmRCb251cyk7CiAgICAgICAgdHJhbmNoZXNbaW5kZXhPZlRyYW5jaGVdLnZhbHVlRm9yVHJhbmNoZSA9IHRyYW5jaGVzW2luZGV4T2ZUcmFuY2hlXS52YWx1ZUZvclRyYW5jaGUuc3ViKF90b2tlbnNBbmRCb251cyk7CiAgICAgICAgdG90YWxTb2xkVG9rZW5zID0gdG90YWxTb2xkVG9rZW5zLmFkZChfdG9rZW5zQW5kQm9udXMpOwogICAgfQoKICAgIC8qCiAgICAqIEBkZXYgQ2hlY2sgc3VtIG9mIHRoZSB0b2tlbnMgZm9yIHNhbGUgaW4gdGhlIHRyYW5jaGVzIGluIHRoZSBjcm93ZHNhbGUgdGltZQogICAgKi8KICAgIGZ1bmN0aW9uIGlzTm9FbXB0eVRyYW5jaGVzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICAgIHVpbnQyNTYgc3VtRnJlZVRva2VucyA9IDA7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdHJhbmNoZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgc3VtRnJlZVRva2VucyA9IHN1bUZyZWVUb2tlbnMuYWRkKHRyYW5jaGVzW2ldLnZhbHVlRm9yVHJhbmNoZSk7CiAgICAgICAgfQogICAgICAgIGJvb2wgaXNWYWxpZCA9IHN1bUZyZWVUb2tlbnMgPiAwOwogICAgICAgIHJldHVybiBpc1ZhbGlkOwogICAgfQoKICAgIC8qCiAgICAqIEBkZXYgZ2V0IGluZGV4IG9mIHRyYW5jaGUKICAgICogQHJldHVybiB1aW50MjU2IG51bWJlciBvZiBjdXJyZW50IHRyYW5jaGUgaW4gYXJyYXkgdHJhbmNoZXMKICAgICovCiAgICBmdW5jdGlvbiBkZWZpbmVUcmFuY2hlUGVyaW9kKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IHRyYW5jaGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICh0cmFuY2hlc1tpXS52YWx1ZUZvclRyYW5jaGUgPiAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gTUFYX1RSQU5DSEVTICsgMTsKICAgIH0KCiAgICAvKiBOb3cgd2UgaGF2ZSB0aGUgQm91bnR5IGNvZGUsIGFzIHRoZSBjb250cmFjdCBpcyBCb3VudHkuCiAgICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgaWYgdGhlIGNvbnRyYWN0IGhhcyBiZWVuIGNvbXByb21pc2VkLgogICAgKi8KICAgIGZ1bmN0aW9uIGNoZWNrSW52YXJpYW50KCkgcHVibGljIHJldHVybnMoYm9vbCkgewoKICAgICAgICB1aW50MjU2IHRyYW5jaGVQZXJpb2QgPSBkZWZpbmVUcmFuY2hlUGVyaW9kKCk7CiAgICAgICAgYm9vbCBpc1RyYW5jaGVzRG9uZSA9IHRyYW5jaGVQZXJpb2QgPT0gTUFYX1RSQU5DSEVTICsgMTsKICAgICAgICBib29sIGlzVG9rZW5zQ2FwUmVhY2hlZCA9IHRva2Vuc0NhcCA9PSB0b3RhbFNvbGRUb2tlbnM7CiAgICAgICAgYm9vbCBpc1dlaUNhcFJlYWNoZWQgPSB3ZWlSYWlzZWQgPT0gY2FwSW5XZWk7CgogICAgICAgIGJvb2wgaXNOb0NhcFJlYWNoZWQgPSBpc1RyYW5jaGVzRG9uZSAmJgogICAgICAgICAgICAoIWlzVG9rZW5zQ2FwUmVhY2hlZCB8fCAhaXNXZWlDYXBSZWFjaGVkKTsKCiAgICAgICAgYm9vbCBpc0V4Y2VlZGVkQ2FwID0gIWlzVHJhbmNoZXNEb25lICYmCiAgICAgICAgICAgIChpc1Rva2Vuc0NhcFJlYWNoZWQgfHwgaXNXZWlDYXBSZWFjaGVkKTsKCiAgICAgICAgLy8gQ2hlY2sgdGhlIGNvbXByb21pc2VkIGZsYWcuCiAgICAgICAgaWYgKGlzTm9DYXBSZWFjaGVkIHx8IGlzRXhjZWVkZWRDYXApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBwYXlDb250cmFjdCgpIHBheWFibGUgewogICAgICAgIGNvdW50VG9rZW5zKG1zZy52YWx1ZSk7CiAgICB9Cn0KCmNvbnRyYWN0IE1vd2pvd0JvdW50eSBpcyBCb3VudHkgewoKICAgIHVpbnQyNTZbXSBwdWJsaWMgcmF0ZXM7CiAgICB1aW50MjU2W10gcHVibGljIGJvbnVzZXM7CiAgICB1aW50MjU2W10gcHVibGljIHZhbHVlRm9yVHJhbmNoZXM7CiAgICB1aW50MjU2IGNhcEluV2VpOwogICAgdWludDI1NiBjYXBJblRva2VuczsKCiAgICBmdW5jdGlvbiBNb3dqb3dCb3VudHkgKHVpbnQyNTZbXSBfYm9udXNlcywgdWludDI1NltdIF92YWx1ZUZvclRyYW5jaGVzLAogICAgICAgIHVpbnQyNTZbXSBfcmF0ZXMsIHVpbnQyNTYgX2NhcEluV2VpLCB1aW50MjU2IF9jYXBJblRva2VucykgcHVibGljIHsKCiAgICAgICAgYm9udXNlcyA9IF9ib251c2VzOwogICAgICAgIHZhbHVlRm9yVHJhbmNoZXMgPSBfdmFsdWVGb3JUcmFuY2hlczsKICAgICAgICByYXRlcyA9IF9yYXRlczsKICAgICAgICBjYXBJbldlaSA9IF9jYXBJbldlaTsKICAgICAgICBjYXBJblRva2VucyA9IF9jYXBJblRva2VuczsKICAgIH0KCiAgICBmdW5jdGlvbiBkZXBsb3lDb250cmFjdCgpIGludGVybmFsIHJldHVybnMoYWRkcmVzcykgewogICAgICAgIHJldHVybiBuZXcgVHJhbmNoZVByaWNpbmdTdHJhdGVneShib251c2VzLCB2YWx1ZUZvclRyYW5jaGVzLCByYXRlcywgY2FwSW5XZWksIGNhcEluVG9rZW5zKTsKICAgIH0KCn0='.
	

]
