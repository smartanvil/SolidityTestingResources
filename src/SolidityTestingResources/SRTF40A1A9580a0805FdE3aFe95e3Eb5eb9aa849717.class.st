Class {
	#name : #SRTF40A1A9580a0805FdE3aFe95e3Eb5eb9aa849717,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTF40A1A9580a0805FdE3aFe95e3Eb5eb9aa849717 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKgogIENvcHlyaWdodCAyMDE3LCBBbnRvbiBFZ29yb3YgKE1vdGhlcnNoaXAgRm91bmRhdGlvbikKICBDb3B5cmlnaHQgMjAxNywgS2xhdXMgSG90dCAoQmxvY2tjaGFpbkxhYnMubnopCiAgQ29weXJpZ2h0IDIwMTcsIEpvcmdlIEl6cXVpZXJkbyAoQXJhZ29uIEZvdW5kYXRpb24pCiAgQ29weXJpZ2h0IDIwMTcsIEpvcmRpIEJheWxpbmEgKEdpdmV0aCkKCiAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQogIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCiAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KCiAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KCiAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KCiovCgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9Cn0KCmNvbnRyYWN0IENvbnRyb2xsZWQgewogIC8vLyBAbm90aWNlIFRoZSBhZGRyZXNzIG9mIHRoZSBjb250cm9sbGVyIGlzIHRoZSBvbmx5IGFkZHJlc3MgdGhhdCBjYW4gY2FsbAogIC8vLyAgYSBmdW5jdGlvbiB3aXRoIHRoaXMgbW9kaWZpZXIKICBtb2RpZmllciBvbmx5Q29udHJvbGxlciB7IGlmIChtc2cuc2VuZGVyICE9IGNvbnRyb2xsZXIpIHRocm93OyBfOyB9CgogIGFkZHJlc3MgcHVibGljIGNvbnRyb2xsZXI7CgogIGZ1bmN0aW9uIENvbnRyb2xsZWQoKSB7IGNvbnRyb2xsZXIgPSBtc2cuc2VuZGVyO30KCiAgLy8vIEBub3RpY2UgQ2hhbmdlcyB0aGUgY29udHJvbGxlciBvZiB0aGUgY29udHJhY3QKICAvLy8gQHBhcmFtIF9uZXdDb250cm9sbGVyIFRoZSBuZXcgY29udHJvbGxlciBvZiB0aGUgY29udHJhY3QKICBmdW5jdGlvbiBjaGFuZ2VDb250cm9sbGVyKGFkZHJlc3MgX25ld0NvbnRyb2xsZXIpIG9ubHlDb250cm9sbGVyIHsKICAgIGNvbnRyb2xsZXIgPSBfbmV3Q29udHJvbGxlcjsKICB9Cn0KCmNvbnRyYWN0IFJlZnVuZGFibGUgewogIGZ1bmN0aW9uIHJlZnVuZChhZGRyZXNzIHRoLCB1aW50IGFtb3VudCkgcmV0dXJucyAoYm9vbCk7Cn0KCi8vLyBAZGV2IFRoZSB0b2tlbiBjb250cm9sbGVyIGNvbnRyYWN0IG11c3QgaW1wbGVtZW50IHRoZXNlIGZ1bmN0aW9ucwpjb250cmFjdCBUb2tlbkNvbnRyb2xsZXIgewogIC8vLyBAbm90aWNlIENhbGxlZCB3aGVuIGBfb3duZXJgIHNlbmRzIGV0aGVyIHRvIHRoZSBNaW5pTWUgVG9rZW4gY29udHJhY3QKICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0aGF0IHNlbnQgdGhlIGV0aGVyIHRvIGNyZWF0ZSB0b2tlbnMKICAvLy8gQHJldHVybiBUcnVlIGlmIHRoZSBldGhlciBpcyBhY2NlcHRlZCwgZmFsc2UgaWYgaXQgdGhyb3dzCiAgZnVuY3Rpb24gcHJveHlQYXltZW50KGFkZHJlc3MgX293bmVyKSBwYXlhYmxlIHJldHVybnMoYm9vbCk7CgogIC8vLyBAbm90aWNlIE5vdGlmaWVzIHRoZSBjb250cm9sbGVyIGFib3V0IGEgdG9rZW4gdHJhbnNmZXIgYWxsb3dpbmcgdGhlCiAgLy8vICBjb250cm9sbGVyIHRvIHJlYWN0IGlmIGRlc2lyZWQKICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZmVyCiAgLy8vIEBwYXJhbSBfdG8gVGhlIGRlc3RpbmF0aW9uIG9mIHRoZSB0cmFuc2ZlcgogIC8vLyBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRoZSB0cmFuc2ZlcgogIC8vLyBAcmV0dXJuIEZhbHNlIGlmIHRoZSBjb250cm9sbGVyIGRvZXMgbm90IGF1dGhvcml6ZSB0aGUgdHJhbnNmZXIKICBmdW5jdGlvbiBvblRyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMoYm9vbCk7CgogIC8vLyBAbm90aWNlIE5vdGlmaWVzIHRoZSBjb250cm9sbGVyIGFib3V0IGFuIGFwcHJvdmFsIGFsbG93aW5nIHRoZQogIC8vLyAgY29udHJvbGxlciB0byByZWFjdCBpZiBkZXNpcmVkCiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdGhhdCBjYWxscyBgYXBwcm92ZSgpYAogIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIHNwZW5kZXIgaW4gdGhlIGBhcHByb3ZlKClgIGNhbGwKICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBpbiB0aGUgYGFwcHJvdmUoKWAgY2FsbAogIC8vLyBAcmV0dXJuIEZhbHNlIGlmIHRoZSBjb250cm9sbGVyIGRvZXMgbm90IGF1dGhvcml6ZSB0aGUgYXBwcm92YWwKICBmdW5jdGlvbiBvbkFwcHJvdmUoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2Ftb3VudCkKICAgIHJldHVybnMoYm9vbCk7Cn0KCmNvbnRyYWN0IEVSQzIwVG9rZW4gewogIC8qIFRoaXMgaXMgYSBzbGlnaHQgY2hhbmdlIHRvIHRoZSBFUkMyMCBiYXNlIHN0YW5kYXJkLgogICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgIGlzIHJlcGxhY2VkIHdpdGg6CiAgICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICAgVGhpcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgYSBnZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSB0b3RhbFN1cHBseS4KICAgICBUaGlzIGlzIG1vdmVkIHRvIHRoZSBiYXNlIGNvbnRyYWN0IHNpbmNlIHB1YmxpYyBnZXR0ZXIgZnVuY3Rpb25zIGFyZSBub3QKICAgICBjdXJyZW50bHkgcmVjb2duaXNlZCBhcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgbWF0Y2hpbmcgYWJzdHJhY3QKICAgICBmdW5jdGlvbiBieSB0aGUgY29tcGlsZXIuCiAgKi8KICAvLy8gdG90YWwgYW1vdW50IG9mIHRva2VucwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAvLy8gQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBCdXJuYWJsZSBpcyBDb250cm9sbGVkIHsKICAvLy8gQG5vdGljZSBUaGUgYWRkcmVzcyBvZiB0aGUgY29udHJvbGxlciBpcyB0aGUgb25seSBhZGRyZXNzIHRoYXQgY2FuIGNhbGwKICAvLy8gIGEgZnVuY3Rpb24gd2l0aCB0aGlzIG1vZGlmaWVyLCBhbHNvIHRoZSBidXJuZXIgY2FuIGNhbGwgYnV0IGFsc28gdGhlCiAgLy8vIHRhcmdldCBvZiB0aGUgZnVuY3Rpb24gbXVzdCBiZSB0aGUgYnVybmVyCiAgbW9kaWZpZXIgb25seUNvbnRyb2xsZXJPckJ1cm5lcihhZGRyZXNzIHRhcmdldCkgewogICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gY29udHJvbGxlciB8fCAobXNnLnNlbmRlciA9PSBidXJuZXIgJiYgbXNnLnNlbmRlciA9PSB0YXJnZXQpKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBvbmx5QnVybmVyIHsKICAgIGFzc2VydChtc2cuc2VuZGVyID09IGJ1cm5lcik7CiAgICBfOwogIH0KICBhZGRyZXNzIHB1YmxpYyBidXJuZXI7CgogIGZ1bmN0aW9uIEJ1cm5hYmxlKCkgeyBidXJuZXIgPSBtc2cuc2VuZGVyO30KCiAgLy8vIEBub3RpY2UgQ2hhbmdlcyB0aGUgYnVybmVyIG9mIHRoZSBjb250cmFjdAogIC8vLyBAcGFyYW0gX25ld0J1cm5lciBUaGUgbmV3IGJ1cm5lciBvZiB0aGUgY29udHJhY3QKICBmdW5jdGlvbiBjaGFuZ2VCdXJuZXIoYWRkcmVzcyBfbmV3QnVybmVyKSBvbmx5QnVybmVyIHsKICAgIGJ1cm5lciA9IF9uZXdCdXJuZXI7CiAgfQp9Cgpjb250cmFjdCBNaW5pTWVUb2tlbkkgaXMgRVJDMjBUb2tlbiwgQnVybmFibGUgewoKICAgICAgc3RyaW5nIHB1YmxpYyBuYW1lOyAgICAgICAgICAgICAgICAvL1RoZSBUb2tlbidzIG5hbWU6IGUuZy4gRGlnaXhEQU8gVG9rZW5zCiAgICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsgICAgICAgICAgICAgLy9OdW1iZXIgb2YgZGVjaW1hbHMgb2YgdGhlIHNtYWxsZXN0IHVuaXQKICAgICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7ICAgICAgICAgICAgICAvL0FuIGlkZW50aWZpZXI6IGUuZy4gUkVQCiAgICAgIHN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICdNTVRfMC4xJzsgLy9BbiBhcmJpdHJhcnkgdmVyc2lvbmluZyBzY2hlbWUKCi8vLy8vLy8vLy8vLy8vLy8vLy8KLy8gRVJDMjAgTWV0aG9kcwovLy8vLy8vLy8vLy8vLy8vLy8vCgoKICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNlbmQgYF9hbW91bnRgIHRva2VucyBvbgogICAgLy8vICBpdHMgYmVoYWxmLCBhbmQgdGhlbiBhIGZ1bmN0aW9uIGlzIHRyaWdnZXJlZCBpbiB0aGUgY29udHJhY3QgdGhhdCBpcwogICAgLy8vICBiZWluZyBhcHByb3ZlZCwgYF9zcGVuZGVyYC4gVGhpcyBhbGxvd3MgdXNlcnMgdG8gdXNlIHRoZWlyIHRva2VucyB0bwogICAgLy8vICBpbnRlcmFjdCB3aXRoIGNvbnRyYWN0cyBpbiBvbmUgZnVuY3Rpb24gY2FsbCBpbnN0ZWFkIG9mIHR3bwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgY29udHJhY3QgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBUcnVlIGlmIHRoZSBmdW5jdGlvbiBjYWxsIHdhcyBzdWNjZXNzZnVsCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbCgKICAgICAgICBhZGRyZXNzIF9zcGVuZGVyLAogICAgICAgIHVpbnQyNTYgX2Ftb3VudCwKICAgICAgICBieXRlcyBfZXh0cmFEYXRhCiAgICApIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgovLy8vLy8vLy8vLy8vLy8vCi8vIFF1ZXJ5IGJhbGFuY2UgYW5kIHRvdGFsU3VwcGx5IGluIEhpc3RvcnkKLy8vLy8vLy8vLy8vLy8vLwoKICAgIC8vLyBAZGV2IFF1ZXJpZXMgdGhlIGJhbGFuY2Ugb2YgYF9vd25lcmAgYXQgYSBzcGVjaWZpYyBgX2Jsb2NrTnVtYmVyYAogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogICAgLy8vIEBwYXJhbSBfYmxvY2tOdW1iZXIgVGhlIGJsb2NrIG51bWJlciB3aGVuIHRoZSBiYWxhbmNlIGlzIHF1ZXJpZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlIGF0IGBfYmxvY2tOdW1iZXJgCiAgICBmdW5jdGlvbiBiYWxhbmNlT2ZBdCgKICAgICAgICBhZGRyZXNzIF9vd25lciwKICAgICAgICB1aW50IF9ibG9ja051bWJlcgogICAgKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgICAvLy8gQG5vdGljZSBUb3RhbCBhbW91bnQgb2YgdG9rZW5zIGF0IGEgc3BlY2lmaWMgYF9ibG9ja051bWJlcmAuCiAgICAvLy8gQHBhcmFtIF9ibG9ja051bWJlciBUaGUgYmxvY2sgbnVtYmVyIHdoZW4gdGhlIHRvdGFsU3VwcGx5IGlzIHF1ZXJpZWQKICAgIC8vLyBAcmV0dXJuIFRoZSB0b3RhbCBhbW91bnQgb2YgdG9rZW5zIGF0IGBfYmxvY2tOdW1iZXJgCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseUF0KHVpbnQgX2Jsb2NrTnVtYmVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpOwoKLy8vLy8vLy8vLy8vLy8vLwovLyBDbG9uZSBUb2tlbiBNZXRob2QKLy8vLy8vLy8vLy8vLy8vLwoKICAgIC8vLyBAbm90aWNlIENyZWF0ZXMgYSBuZXcgY2xvbmUgdG9rZW4gd2l0aCB0aGUgaW5pdGlhbCBkaXN0cmlidXRpb24gYmVpbmcKICAgIC8vLyAgdGhpcyB0b2tlbiBhdCBgX3NuYXBzaG90QmxvY2tgCiAgICAvLy8gQHBhcmFtIF9jbG9uZVRva2VuTmFtZSBOYW1lIG9mIHRoZSBjbG9uZSB0b2tlbgogICAgLy8vIEBwYXJhbSBfY2xvbmVEZWNpbWFsVW5pdHMgTnVtYmVyIG9mIGRlY2ltYWxzIG9mIHRoZSBzbWFsbGVzdCB1bml0CiAgICAvLy8gQHBhcmFtIF9jbG9uZVRva2VuU3ltYm9sIFN5bWJvbCBvZiB0aGUgY2xvbmUgdG9rZW4KICAgIC8vLyBAcGFyYW0gX3NuYXBzaG90QmxvY2sgQmxvY2sgd2hlbiB0aGUgZGlzdHJpYnV0aW9uIG9mIHRoZSBwYXJlbnQgdG9rZW4gaXMKICAgIC8vLyAgY29waWVkIHRvIHNldCB0aGUgaW5pdGlhbCBkaXN0cmlidXRpb24gb2YgdGhlIG5ldyBjbG9uZSB0b2tlbjsKICAgIC8vLyAgaWYgdGhlIGJsb2NrIGlzIHplcm8gdGhhbiB0aGUgYWN0dWFsIGJsb2NrLCB0aGUgY3VycmVudCBibG9jayBpcyB1c2VkCiAgICAvLy8gQHBhcmFtIF90cmFuc2ZlcnNFbmFibGVkIFRydWUgaWYgdHJhbnNmZXJzIGFyZSBhbGxvd2VkIGluIHRoZSBjbG9uZQogICAgLy8vIEByZXR1cm4gVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBNaW5pTWVUb2tlbiBDb250cmFjdAogICAgZnVuY3Rpb24gY3JlYXRlQ2xvbmVUb2tlbigKICAgICAgICBzdHJpbmcgX2Nsb25lVG9rZW5OYW1lLAogICAgICAgIHVpbnQ4IF9jbG9uZURlY2ltYWxVbml0cywKICAgICAgICBzdHJpbmcgX2Nsb25lVG9rZW5TeW1ib2wsCiAgICAgICAgdWludCBfc25hcHNob3RCbG9jaywKICAgICAgICBib29sIF90cmFuc2ZlcnNFbmFibGVkCiAgICApIHJldHVybnMoYWRkcmVzcyk7CgovLy8vLy8vLy8vLy8vLy8vCi8vIEdlbmVyYXRlIGFuZCBkZXN0cm95IHRva2VucwovLy8vLy8vLy8vLy8vLy8vCgogICAgLy8vIEBub3RpY2UgR2VuZXJhdGVzIGBfYW1vdW50YCB0b2tlbnMgdGhhdCBhcmUgYXNzaWduZWQgdG8gYF9vd25lcmAKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCBiZSBhc3NpZ25lZCB0aGUgbmV3IHRva2VucwogICAgLy8vIEBwYXJhbSBfYW1vdW50IFRoZSBxdWFudGl0eSBvZiB0b2tlbnMgZ2VuZXJhdGVkCiAgICAvLy8gQHJldHVybiBUcnVlIGlmIHRoZSB0b2tlbnMgYXJlIGdlbmVyYXRlZCBjb3JyZWN0bHkKICAgIGZ1bmN0aW9uIGdlbmVyYXRlVG9rZW5zKGFkZHJlc3MgX293bmVyLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wpOwoKCiAgICAvLy8gQG5vdGljZSBCdXJucyBgX2Ftb3VudGAgdG9rZW5zIGZyb20gYF9vd25lcmAKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCBsb3NlIHRoZSB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX2Ftb3VudCBUaGUgcXVhbnRpdHkgb2YgdG9rZW5zIHRvIGJ1cm4KICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgdGhlIHRva2VucyBhcmUgYnVybmVkIGNvcnJlY3RseQogICAgZnVuY3Rpb24gZGVzdHJveVRva2VucyhhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sKTsKCi8vLy8vLy8vLy8vLy8vLy8KLy8gRW5hYmxlIHRva2VucyB0cmFuc2ZlcnMKLy8vLy8vLy8vLy8vLy8vLwoKICAgIC8vLyBAbm90aWNlIEVuYWJsZXMgdG9rZW4gaG9sZGVycyB0byB0cmFuc2ZlciB0aGVpciB0b2tlbnMgZnJlZWx5IGlmIHRydWUKICAgIC8vLyBAcGFyYW0gX3RyYW5zZmVyc0VuYWJsZWQgVHJ1ZSBpZiB0cmFuc2ZlcnMgYXJlIGFsbG93ZWQgaW4gdGhlIGNsb25lCiAgICBmdW5jdGlvbiBlbmFibGVUcmFuc2ZlcnMoYm9vbCBfdHJhbnNmZXJzRW5hYmxlZCk7CgovLy8vLy8vLy8vCi8vIFNhZmV0eSBNZXRob2RzCi8vLy8vLy8vLy8KCiAgICAvLy8gQG5vdGljZSBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBieSB0aGUgY29udHJvbGxlciB0byBleHRyYWN0IG1pc3Rha2VubHkKICAgIC8vLyAgc2VudCB0b2tlbnMgdG8gdGhpcyBjb250cmFjdC4KICAgIC8vLyBAcGFyYW0gX3Rva2VuIFRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlbiBjb250cmFjdCB0aGF0IHlvdSB3YW50IHRvIHJlY292ZXIKICAgIC8vLyAgc2V0IHRvIDAgaW4gY2FzZSB5b3Ugd2FudCB0byBleHRyYWN0IGV0aGVyLgogICAgZnVuY3Rpb24gY2xhaW1Ub2tlbnMoYWRkcmVzcyBfdG9rZW4pOwoKLy8vLy8vLy8vLy8vLy8vLwovLyBFdmVudHMKLy8vLy8vLy8vLy8vLy8vLwoKICAgIGV2ZW50IENsYWltZWRUb2tlbnMoYWRkcmVzcyBpbmRleGVkIF90b2tlbiwgYWRkcmVzcyBpbmRleGVkIF9jb250cm9sbGVyLCB1aW50IF9hbW91bnQpOwogICAgZXZlbnQgTmV3Q2xvbmVUb2tlbihhZGRyZXNzIGluZGV4ZWQgX2Nsb25lVG9rZW4sIHVpbnQgX3NuYXBzaG90QmxvY2spOwp9Cgpjb250cmFjdCBGaW5hbGl6YWJsZSB7CiAgdWludDI1NiBwdWJsaWMgZmluYWxpemVkQmxvY2s7CiAgYm9vbCBwdWJsaWMgZ29hbE1ldDsKCiAgZnVuY3Rpb24gZmluYWxpemUoKTsKfQoKY29udHJhY3QgQ29udHJpYnV0aW9uIGlzIENvbnRyb2xsZWQsIFRva2VuQ29udHJvbGxlciwgRmluYWxpemFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseUNhcDsgLy8gVG90YWwgTVNQIHN1cHBseSB0byBiZSBnZW5lcmF0ZWQKICB1aW50MjU2IHB1YmxpYyBleGNoYW5nZVJhdGU7IC8vIEVUSC1NU1AgZXhjaGFuZ2UgcmF0ZQogIHVpbnQyNTYgcHVibGljIHRvdGFsU29sZDsgLy8gSG93IG11Y2ggdG9rZW5zIHNvbGQKICB1aW50MjU2IHB1YmxpYyB0b3RhbFNhbGVTdXBwbHlDYXA7IC8vIFRva2VuIHNhbGUgY2FwCgogIE1pbmlNZVRva2VuSSBwdWJsaWMgc2l0OwogIE1pbmlNZVRva2VuSSBwdWJsaWMgbXNwOwoKICB1aW50MjU2IHB1YmxpYyBzdGFydEJsb2NrOwogIHVpbnQyNTYgcHVibGljIGVuZEJsb2NrOwoKICBhZGRyZXNzIHB1YmxpYyBkZXN0RXRoRGV2czsKICBhZGRyZXNzIHB1YmxpYyBkZXN0VG9rZW5zU2l0OwogIGFkZHJlc3MgcHVibGljIGRlc3RUb2tlbnNUZWFtOwogIGFkZHJlc3MgcHVibGljIGRlc3RUb2tlbnNSZWZlcmFsczsKCiAgYWRkcmVzcyBwdWJsaWMgbXNwQ29udHJvbGxlcjsKCiAgdWludDI1NiBwdWJsaWMgaW5pdGlhbGl6ZWRCbG9jazsKICB1aW50MjU2IHB1YmxpYyBmaW5hbGl6ZWRUaW1lOwoKICB1aW50MjU2IHB1YmxpYyBtaW5pbXVtX2ludmVzdG1lbnQ7CiAgdWludDI1NiBwdWJsaWMgbWluaW11bV9nb2FsOwoKICBib29sIHB1YmxpYyBwYXVzZWQ7CgogIG1vZGlmaWVyIGluaXRpYWxpemVkKCkgewogICAgYXNzZXJ0KGFkZHJlc3MobXNwKSAhPSAweDApOwogICAgXzsKICB9CgogIG1vZGlmaWVyIGNvbnRyaWJ1dGlvbk9wZW4oKSB7CiAgICBhc3NlcnQoZ2V0QmxvY2tOdW1iZXIoKSA+PSBzdGFydEJsb2NrICYmCiAgICAgICAgICAgIGdldEJsb2NrTnVtYmVyKCkgPD0gZW5kQmxvY2sgJiYKICAgICAgICAgICAgZmluYWxpemVkQmxvY2sgPT0gMCAmJgogICAgICAgICAgICBhZGRyZXNzKG1zcCkgIT0gMHgwKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBub3RQYXVzZWQoKSB7CiAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIENvbnRyaWJ1dGlvbigpIHsKICAgIC8vIEJvb2xlYW5zIGFyZSBmYWxzZSBieSBkZWZhdWx0IGNvbnNpZGVyIHJlbW92aW5nIHRoaXMKICAgIHBhdXNlZCA9IGZhbHNlOwogIH0KCiAgLy8vIEBub3RpY2UgVGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCBieSB0aGUgY29udHJvbGxlciBiZWZvcmUgdGhlIGNvbnRyaWJ1dGlvbgogIC8vLyAgcGVyaW9kIHN0YXJ0cyBUaGlzIGluaXRpYWxpemVzIG1vc3Qgb2YgdGhlIHBhcmFtZXRlcnMKICAvLy8gQHBhcmFtIF9tc3AgQWRkcmVzcyBvZiB0aGUgTVNQIHRva2VuIGNvbnRyYWN0CiAgLy8vIEBwYXJhbSBfbXNwQ29udHJvbGxlciBUb2tlbiBjb250cm9sbGVyIGZvciB0aGUgTVNQIHRoYXQgd2lsbCBiZSB0cmFuc2ZlcnJlZCBhZnRlcgogIC8vLyAgdGhlIGNvbnRyaWJ1dGlvbiBmaW5hbGl6ZXMuCiAgLy8vIEBwYXJhbSBfdG90YWxTdXBwbHlDYXAgTWF4aW11bSBhbW91bnQgb2YgdG9rZW5zIHRvIGdlbmVyYXRlIGR1cmluZyB0aGUgY29udHJpYnV0aW9uCiAgLy8vIEBwYXJhbSBfZXhjaGFuZ2VSYXRlIEVUSCB0byBNU1AgcmF0ZSBmb3IgdGhlIHRva2VuIHNhbGUKICAvLy8gQHBhcmFtIF9zdGFydEJsb2NrIEJsb2NrIHdoZW4gdGhlIGNvbnRyaWJ1dGlvbiBwZXJpb2Qgc3RhcnRzCiAgLy8vIEBwYXJhbSBfZW5kQmxvY2sgVGhlIGxhc3QgYmxvY2sgdGhhdCB0aGUgY29udHJpYnV0aW9uIHBlcmlvZCBpcyBhY3RpdmUKICAvLy8gQHBhcmFtIF9kZXN0RXRoRGV2cyBEZXN0aW5hdGlvbiBhZGRyZXNzIHdoZXJlIHRoZSBjb250cmlidXRpb24gZXRoZXIgaXMgc2VudAogIC8vLyBAcGFyYW0gX2Rlc3RUb2tlbnNTaXQgQWRkcmVzcyBvZiB0aGUgZXhjaGFuZ2VyIFNJVC1NU1Agd2hlcmUgdGhlIE1TUCBhcmUgc2VudAogIC8vLyAgdG8gYmUgZGlzdHJpYnV0ZWQgdG8gdGhlIFNJVCBob2xkZXJzLgogIC8vLyBAcGFyYW0gX2Rlc3RUb2tlbnNUZWFtIEFkZHJlc3Mgd2hlcmUgdGhlIHRva2VucyBmb3IgdGhlIHRlYW0gYXJlIHNlbnQKICAvLy8gQHBhcmFtIF9kZXN0VG9rZW5zUmVmZXJhbHMgQWRkcmVzcyB3aGVyZSB0aGUgdG9rZW5zIGZvciB0aGUgcmVmZXJhbCBzeXN0ZW0gYXJlIHNlbnQKICAvLy8gQHBhcmFtIF9zaXQgQWRkcmVzcyBvZiB0aGUgU0lUIHRva2VuIGNvbnRyYWN0CiAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgKICAgICAgYWRkcmVzcyBfbXNwLAogICAgICBhZGRyZXNzIF9tc3BDb250cm9sbGVyLAoKICAgICAgdWludDI1NiBfdG90YWxTdXBwbHlDYXAsCiAgICAgIHVpbnQyNTYgX2V4Y2hhbmdlUmF0ZSwKICAgICAgdWludDI1NiBfbWluaW11bV9nb2FsLAoKICAgICAgdWludDI1NiBfc3RhcnRCbG9jaywKICAgICAgdWludDI1NiBfZW5kQmxvY2ssCgogICAgICBhZGRyZXNzIF9kZXN0RXRoRGV2cywKICAgICAgYWRkcmVzcyBfZGVzdFRva2Vuc1NpdCwKICAgICAgYWRkcmVzcyBfZGVzdFRva2Vuc1RlYW0sCiAgICAgIGFkZHJlc3MgX2Rlc3RUb2tlbnNSZWZlcmFscywKCiAgICAgIGFkZHJlc3MgX3NpdAogICkgcHVibGljIG9ubHlDb250cm9sbGVyIHsKICAgIC8vIEluaXRpYWxpemUgb25seSBvbmNlCiAgICBhc3NlcnQoYWRkcmVzcyhtc3ApID09IDB4MCk7CgogICAgbXNwID0gTWluaU1lVG9rZW5JKF9tc3ApOwogICAgYXNzZXJ0KG1zcC50b3RhbFN1cHBseSgpID09IDApOwogICAgYXNzZXJ0KG1zcC5jb250cm9sbGVyKCkgPT0gYWRkcmVzcyh0aGlzKSk7CiAgICBhc3NlcnQobXNwLmRlY2ltYWxzKCkgPT0gMTgpOyAgLy8gU2FtZSBhbW91bnQgb2YgZGVjaW1hbHMgYXMgRVRICgogICAgcmVxdWlyZShfbXNwQ29udHJvbGxlciAhPSAweDApOwogICAgbXNwQ29udHJvbGxlciA9IF9tc3BDb250cm9sbGVyOwoKICAgIHJlcXVpcmUoX2V4Y2hhbmdlUmF0ZSA+IDApOwogICAgZXhjaGFuZ2VSYXRlID0gX2V4Y2hhbmdlUmF0ZTsKCiAgICBhc3NlcnQoX3N0YXJ0QmxvY2sgPj0gZ2V0QmxvY2tOdW1iZXIoKSk7CiAgICByZXF1aXJlKF9zdGFydEJsb2NrIDwgX2VuZEJsb2NrKTsKICAgIHN0YXJ0QmxvY2sgPSBfc3RhcnRCbG9jazsKICAgIGVuZEJsb2NrID0gX2VuZEJsb2NrOwoKICAgIHJlcXVpcmUoX2Rlc3RFdGhEZXZzICE9IDB4MCk7CiAgICBkZXN0RXRoRGV2cyA9IF9kZXN0RXRoRGV2czsKCiAgICByZXF1aXJlKF9kZXN0VG9rZW5zU2l0ICE9IDB4MCk7CiAgICBkZXN0VG9rZW5zU2l0ID0gX2Rlc3RUb2tlbnNTaXQ7CgogICAgcmVxdWlyZShfZGVzdFRva2Vuc1RlYW0gIT0gMHgwKTsKICAgIGRlc3RUb2tlbnNUZWFtID0gX2Rlc3RUb2tlbnNUZWFtOwoKICAgIHJlcXVpcmUoX2Rlc3RUb2tlbnNSZWZlcmFscyAhPSAweDApOwogICAgZGVzdFRva2Vuc1JlZmVyYWxzID0gX2Rlc3RUb2tlbnNSZWZlcmFsczsKCiAgICByZXF1aXJlKF9zaXQgIT0gMHgwKTsKICAgIHNpdCA9IE1pbmlNZVRva2VuSShfc2l0KTsKCiAgICBpbml0aWFsaXplZEJsb2NrID0gZ2V0QmxvY2tOdW1iZXIoKTsKICAgIC8vIFNJVCBhbW91bnQgc2hvdWxkIGJlIG5vIG1vcmUgdGhhbiAyMCUgb2YgTVNQIHRvdGFsIHN1cHBseSBjYXAKICAgIGFzc2VydChzaXQudG90YWxTdXBwbHlBdChpbml0aWFsaXplZEJsb2NrKSAqIDUgPD0gX3RvdGFsU3VwcGx5Q2FwKTsKICAgIHRvdGFsU3VwcGx5Q2FwID0gX3RvdGFsU3VwcGx5Q2FwOwoKICAgIC8vIFdlIGFyZSBnb2luZyB0byBzYWxlIDcwJSBvZiB0b3RhbCBzdXBwbHkgY2FwCiAgICB0b3RhbFNhbGVTdXBwbHlDYXAgPSBwZXJjZW50KDcwKS5tdWwoX3RvdGFsU3VwcGx5Q2FwKS5kaXYocGVyY2VudCgxMDApKTsKCiAgICBtaW5pbXVtX2dvYWwgPSBfbWluaW11bV9nb2FsOwogIH0KCiAgZnVuY3Rpb24gc2V0TWluaW11bUludmVzdG1lbnQoCiAgICAgIHVpbnQgX21pbmltdW1faW52ZXN0bWVudAogICkgcHVibGljIG9ubHlDb250cm9sbGVyIHsKICAgIG1pbmltdW1faW52ZXN0bWVudCA9IF9taW5pbXVtX2ludmVzdG1lbnQ7CiAgfQoKICBmdW5jdGlvbiBzZXRFeGNoYW5nZVJhdGUoCiAgICAgIHVpbnQgX2V4Y2hhbmdlUmF0ZQogICkgcHVibGljIG9ubHlDb250cm9sbGVyIHsKICAgIGFzc2VydChnZXRCbG9ja051bWJlcigpIDwgc3RhcnRCbG9jayk7CiAgICBleGNoYW5nZVJhdGUgPSBfZXhjaGFuZ2VSYXRlOwogIH0KCiAgLy8vIEBub3RpY2UgSWYgYW55Ym9keSBzZW5kcyBFdGhlciBkaXJlY3RseSB0byB0aGlzIGNvbnRyYWN0LCBjb25zaWRlciBoZSBpcwogIC8vLyAgZ2V0dGluZyBNU1BzLgogIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIG5vdFBhdXNlZCB7CiAgICBwcm94eVBheW1lbnQobXNnLnNlbmRlcik7CiAgfQoKCiAgLy8vLy8vLy8vLwogIC8vIFRva2VuQ29udHJvbGxlciBmdW5jdGlvbnMKICAvLy8vLy8vLy8vCgogIC8vLyBAbm90aWNlIFRoaXMgbWV0aG9kIHdpbGwgZ2VuZXJhbGx5IGJlIGNhbGxlZCBieSB0aGUgTVNQIHRva2VuIGNvbnRyYWN0IHRvCiAgLy8vICBhY3F1aXJlIE1TUHMuIE9yIGRpcmVjdGx5IGZyb20gdGhpcmQgcGFydGllcyB0aGF0IHdhbnQgdG8gYWNxdWlyZSBNU1BzIGluCiAgLy8vICBiZWhhbGYgb2YgYSB0b2tlbiBob2xkZXIuCiAgLy8vIEBwYXJhbSBfdGggTVNQIGhvbGRlciB3aGVyZSB0aGUgTVNQcyB3aWxsIGJlIG1pbnRlZC4KICBmdW5jdGlvbiBwcm94eVBheW1lbnQoYWRkcmVzcyBfdGgpIHB1YmxpYyBwYXlhYmxlIG5vdFBhdXNlZCBpbml0aWFsaXplZCBjb250cmlidXRpb25PcGVuIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RoICE9IDB4MCk7CiAgICBkb0J1eShfdGgpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBvblRyYW5zZmVyKGFkZHJlc3MsIGFkZHJlc3MsIHVpbnQyNTYpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBvbkFwcHJvdmUoYWRkcmVzcywgYWRkcmVzcywgdWludDI1NikgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGRvQnV5KGFkZHJlc3MgX3RoKSBpbnRlcm5hbCB7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBtaW5pbXVtX2ludmVzdG1lbnQpOwoKICAgIC8vIEFudGlzcGFtIG1lY2hhbmlzbQogICAgYWRkcmVzcyBjYWxsZXI7CiAgICBpZiAobXNnLnNlbmRlciA9PSBhZGRyZXNzKG1zcCkpIHsKICAgICAgY2FsbGVyID0gX3RoOwogICAgfSBlbHNlIHsKICAgICAgY2FsbGVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvLyBEbyBub3QgYWxsb3cgY29udHJhY3RzIHRvIGdhbWUgdGhlIHN5c3RlbQogICAgYXNzZXJ0KCFpc0NvbnRyYWN0KGNhbGxlcikpOwoKICAgIHVpbnQyNTYgdG9GdW5kID0gbXNnLnZhbHVlOwogICAgdWludDI1NiBsZWZ0Rm9yU2FsZSA9IHRva2Vuc0ZvclNhbGUoKTsKICAgIGlmICh0b0Z1bmQgPiAwKSB7CiAgICAgIGlmIChsZWZ0Rm9yU2FsZSA+IDApIHsKICAgICAgICB1aW50MjU2IHRva2Vuc0dlbmVyYXRlZCA9IHRvRnVuZC5tdWwoZXhjaGFuZ2VSYXRlKTsKCiAgICAgICAgLy8gQ2hlY2sgdG90YWwgc3VwcGx5IGNhcCByZWFjaGVkLCBzZWxsIHRoZSBhbGwgcmVtYWluaW5nIHRva2VucwogICAgICAgIGlmICh0b2tlbnNHZW5lcmF0ZWQgPiBsZWZ0Rm9yU2FsZSkgewogICAgICAgICAgdG9rZW5zR2VuZXJhdGVkID0gbGVmdEZvclNhbGU7CiAgICAgICAgICB0b0Z1bmQgPSBsZWZ0Rm9yU2FsZS5kaXYoZXhjaGFuZ2VSYXRlKTsKICAgICAgICB9CgogICAgICAgIGFzc2VydChtc3AuZ2VuZXJhdGVUb2tlbnMoX3RoLCB0b2tlbnNHZW5lcmF0ZWQpKTsKICAgICAgICB0b3RhbFNvbGQgPSB0b3RhbFNvbGQuYWRkKHRva2Vuc0dlbmVyYXRlZCk7CiAgICAgICAgaWYgKHRvdGFsU29sZCA+PSBtaW5pbXVtX2dvYWwpIHsKICAgICAgICAgIGdvYWxNZXQgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBkZXN0RXRoRGV2cy50cmFuc2Zlcih0b0Z1bmQpOwogICAgICAgIE5ld1NhbGUoX3RoLCB0b0Z1bmQsIHRva2Vuc0dlbmVyYXRlZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdG9GdW5kID0gMDsKICAgICAgfQogICAgfQoKICAgIHVpbnQyNTYgdG9SZXR1cm4gPSBtc2cudmFsdWUuc3ViKHRvRnVuZCk7CiAgICBpZiAodG9SZXR1cm4gPiAwKSB7CiAgICAgIC8vIElmIHRoZSBjYWxsIGNvbWVzIGZyb20gdGhlIFRva2VuIGNvbnRyb2xsZXIsCiAgICAgIC8vIHRoZW4gd2UgcmV0dXJuIGl0IHRvIHRoZSB0b2tlbiBIb2xkZXIuCiAgICAgIC8vIE90aGVyd2lzZSB3ZSByZXR1cm4gdG8gdGhlIHNlbmRlci4KICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhtc3ApKSB7CiAgICAgICAgX3RoLnRyYW5zZmVyKHRvUmV0dXJuKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHRvUmV0dXJuKTsKICAgICAgfQogICAgfQogIH0KCiAgLy8vIEBkZXYgSW50ZXJuYWwgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGlmIGFuIGFkZHJlc3MgaXMgYSBjb250cmFjdAogIC8vLyBAcGFyYW0gX2FkZHIgVGhlIGFkZHJlc3MgYmVpbmcgcXVlcmllZAogIC8vLyBAcmV0dXJuIFRydWUgaWYgYF9hZGRyYCBpcyBhIGNvbnRyYWN0CiAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICBpZiAoX2FkZHIgPT0gMCkgcmV0dXJuIGZhbHNlOwogICAgdWludDI1NiBzaXplOwogICAgYXNzZW1ibHkgewogICAgICBzaXplIDo9IGV4dGNvZGVzaXplKF9hZGRyKQogICAgfQogICAgcmV0dXJuIChzaXplID4gMCk7CiAgfQoKICBmdW5jdGlvbiByZWZ1bmQoKSBwdWJsaWMgewogICAgcmVxdWlyZShmaW5hbGl6ZWRCbG9jayAhPSAwKTsKICAgIHJlcXVpcmUoIWdvYWxNZXQpOwoKICAgIHVpbnQyNTYgYW1vdW50VG9rZW5zID0gbXNwLmJhbGFuY2VPZihtc2cuc2VuZGVyKTsKICAgIHJlcXVpcmUoYW1vdW50VG9rZW5zID4gMCk7CiAgICB1aW50MjU2IGFtb3VudEV0aGVyID0gYW1vdW50VG9rZW5zLmRpdihleGNoYW5nZVJhdGUpOwogICAgYWRkcmVzcyB0aCA9IG1zZy5zZW5kZXI7CgogICAgUmVmdW5kYWJsZShtc3BDb250cm9sbGVyKS5yZWZ1bmQodGgsIGFtb3VudFRva2Vucyk7CiAgICBSZWZ1bmRhYmxlKGRlc3RFdGhEZXZzKS5yZWZ1bmQodGgsIGFtb3VudEV0aGVyKTsKCiAgICBSZWZ1bmQodGgsIGFtb3VudFRva2VucywgYW1vdW50RXRoZXIpOwogIH0KCiAgZXZlbnQgUmVmdW5kKGFkZHJlc3MgX3Rva2VuX2hvbGRlciwgdWludDI1NiBfYW1vdW50X3Rva2VucywgdWludDI1NiBfYW1vdW50X2V0aGVyKTsKCiAgLy8vIEBub3RpY2UgVGhpcyBtZXRob2Qgd2lsbCBjYW4gYmUgY2FsbGVkIGJ5IHRoZSBjb250cm9sbGVyIGJlZm9yZSB0aGUgY29udHJpYnV0aW9uIHBlcmlvZAogIC8vLyAgZW5kIG9yIGJ5IGFueWJvZHkgYWZ0ZXIgdGhlIGBlbmRCbG9ja2AuIFRoaXMgbWV0aG9kIGZpbmFsaXplcyB0aGUgY29udHJpYnV0aW9uIHBlcmlvZAogIC8vLyAgYnkgY3JlYXRpbmcgdGhlIHJlbWFpbmluZyB0b2tlbnMgYW5kIHRyYW5zZmVycmluZyB0aGUgY29udHJvbGxlciB0byB0aGUgY29uZmlndXJlZAogIC8vLyAgY29udHJvbGxlci4KICBmdW5jdGlvbiBmaW5hbGl6ZSgpIHB1YmxpYyBpbml0aWFsaXplZCB7CiAgICBhc3NlcnQoZ2V0QmxvY2tOdW1iZXIoKSA+PSBzdGFydEJsb2NrKTsKICAgIGFzc2VydChtc2cuc2VuZGVyID09IGNvbnRyb2xsZXIgfHwgZ2V0QmxvY2tOdW1iZXIoKSA+IGVuZEJsb2NrIHx8IHRva2Vuc0ZvclNhbGUoKSA9PSAwKTsKICAgIHJlcXVpcmUoZmluYWxpemVkQmxvY2sgPT0gMCk7CgogICAgZmluYWxpemVkQmxvY2sgPSBnZXRCbG9ja051bWJlcigpOwogICAgZmluYWxpemVkVGltZSA9IG5vdzsKCiAgICBpZiAoZ29hbE1ldCkgewogICAgICAvLyBHZW5lcmF0ZSA1JSBmb3IgdGhlIHRlYW0KICAgICAgYXNzZXJ0KG1zcC5nZW5lcmF0ZVRva2VucygKICAgICAgICBkZXN0VG9rZW5zVGVhbSwKICAgICAgICBwZXJjZW50KDUpLm11bCh0b3RhbFN1cHBseUNhcCkuZGl2KHBlcmNlbnQoMTAwKSkpKTsKCiAgICAgIC8vIEdlbmVyYXRlIDUlIGZvciB0aGUgcmVmZXJhbCBib251c2VzCiAgICAgIGFzc2VydChtc3AuZ2VuZXJhdGVUb2tlbnMoCiAgICAgICAgZGVzdFRva2Vuc1JlZmVyYWxzLAogICAgICAgIHBlcmNlbnQoNSkubXVsKHRvdGFsU3VwcGx5Q2FwKS5kaXYocGVyY2VudCgxMDApKSkpOwoKICAgICAgLy8gR2VuZXJhdGUgdG9rZW5zIGZvciBTSVQgZXhjaGFuZ2VyCiAgICAgIGFzc2VydChtc3AuZ2VuZXJhdGVUb2tlbnMoCiAgICAgICAgZGVzdFRva2Vuc1NpdCwKICAgICAgICBzaXQudG90YWxTdXBwbHlBdChpbml0aWFsaXplZEJsb2NrKSkpOwogICAgfQoKICAgIG1zcC5jaGFuZ2VDb250cm9sbGVyKG1zcENvbnRyb2xsZXIpOwogICAgRmluYWxpemVkKCk7CiAgfQoKICBmdW5jdGlvbiBwZXJjZW50KHVpbnQyNTYgcCkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHAubXVsKDEwKioxNik7CiAgfQoKCiAgLy8vLy8vLy8vLwogIC8vIENvbnN0YW50IGZ1bmN0aW9ucwogIC8vLy8vLy8vLy8KCiAgLy8vIEByZXR1cm4gVG90YWwgdG9rZW5zIGlzc3VlZCBpbiB3ZWlzLgogIGZ1bmN0aW9uIHRva2Vuc0lzc3VlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gbXNwLnRvdGFsU3VwcGx5KCk7CiAgfQoKICAvLy8gQHJldHVybiBUb3RhbCB0b2tlbnMgYXZhaWxhbGUgZm9yIHRoZSBzYWxlIGluIHdlaXMuCiAgZnVuY3Rpb24gdG9rZW5zRm9yU2FsZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgIHJldHVybiB0b3RhbFNhbGVTdXBwbHlDYXAgPiB0b3RhbFNvbGQgPyB0b3RhbFNhbGVTdXBwbHlDYXAgLSB0b3RhbFNvbGQgOiAwOwogIH0KCgogIC8vLy8vLy8vLy8KICAvLyBUZXN0aW5nIHNwZWNpZmljIG1ldGhvZHMKICAvLy8vLy8vLy8vCgogIC8vLyBAbm90aWNlIFRoaXMgZnVuY3Rpb24gaXMgb3ZlcnJpZGRlbiBieSB0aGUgdGVzdCBNb2Nrcy4KICBmdW5jdGlvbiBnZXRCbG9ja051bWJlcigpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBibG9jay5udW1iZXI7CiAgfQoKCiAgLy8vLy8vLy8vLwogIC8vIFNhZmV0eSBNZXRob2RzCiAgLy8vLy8vLy8vLwoKICAvLy8gQG5vdGljZSBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBieSB0aGUgY29udHJvbGxlciB0byBleHRyYWN0IG1pc3Rha2VubHkKICAvLy8gIHNlbnQgdG9rZW5zIHRvIHRoaXMgY29udHJhY3QuCiAgLy8vIEBwYXJhbSBfdG9rZW4gVGhlIGFkZHJlc3Mgb2YgdGhlIHRva2VuIGNvbnRyYWN0IHRoYXQgeW91IHdhbnQgdG8gcmVjb3ZlcgogIC8vLyAgc2V0IHRvIDAgaW4gY2FzZSB5b3Ugd2FudCB0byBleHRyYWN0IGV0aGVyLgogIGZ1bmN0aW9uIGNsYWltVG9rZW5zKGFkZHJlc3MgX3Rva2VuKSBwdWJsaWMgb25seUNvbnRyb2xsZXIgewogICAgaWYgKG1zcC5jb250cm9sbGVyKCkgPT0gYWRkcmVzcyh0aGlzKSkgewogICAgICBtc3AuY2xhaW1Ub2tlbnMoX3Rva2VuKTsKICAgIH0KICAgIGlmIChfdG9rZW4gPT0gMHgwKSB7CiAgICAgIGNvbnRyb2xsZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIEVSQzIwVG9rZW4gdG9rZW4gPSBFUkMyMFRva2VuKF90b2tlbik7CiAgICB1aW50MjU2IGJhbGFuY2UgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICB0b2tlbi50cmFuc2Zlcihjb250cm9sbGVyLCBiYWxhbmNlKTsKICAgIENsYWltZWRUb2tlbnMoX3Rva2VuLCBjb250cm9sbGVyLCBiYWxhbmNlKTsKICB9CgoKICAvLy8gQG5vdGljZSBQYXVzZXMgdGhlIGNvbnRyaWJ1dGlvbiBpZiB0aGVyZSBpcyBhbnkgaXNzdWUKICBmdW5jdGlvbiBwYXVzZUNvbnRyaWJ1dGlvbigpIG9ubHlDb250cm9sbGVyIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgfQoKICAvLy8gQG5vdGljZSBSZXN1bWVzIHRoZSBjb250cmlidXRpb24KICBmdW5jdGlvbiByZXN1bWVDb250cmlidXRpb24oKSBvbmx5Q29udHJvbGxlciB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICB9CgogIGV2ZW50IENsYWltZWRUb2tlbnMoYWRkcmVzcyBpbmRleGVkIF90b2tlbiwgYWRkcmVzcyBpbmRleGVkIF9jb250cm9sbGVyLCB1aW50MjU2IF9hbW91bnQpOwogIGV2ZW50IE5ld1NhbGUoYWRkcmVzcyBpbmRleGVkIF90aCwgdWludDI1NiBfYW1vdW50LCB1aW50MjU2IF90b2tlbnMpOwogIGV2ZW50IEZpbmFsaXplZCgpOwp9CgovLy8gQHRpdGxlIE1TUFBsYWNlaG9sZGVyIENvbnRyYWN0Ci8vLyBAYXV0aG9yIEpvcmRpIEJheWxpbmEKLy8vIEBkZXYgVGhlIE1TUFBsYWNlaG9sZGVyIGNvbnRyYWN0IHdpbGwgdGFrZSBjb250cm9sIG92ZXIgdGhlIE1TUCBhZnRlciB0aGUgY29udHJpYnV0aW9uCi8vLyAgaXMgZmluYWxpemVkIGFuZCBiZWZvcmUgdGhlIE1vdGhlcnNoaXAgTmV0d29yayBpcyBkZXBsb3llZC4KLy8vICBUaGUgY29udHJhY3QgYWxsb3dzIGZvciBNU1AgdHJhbnNmZXJzIGFuZCB0cmFuc2ZlckZyb20gYW5kIGltcGxlbWVudHMgdGhlCi8vLyAgbG9naWMgZm9yIHRyYW5zZmVycmluZyBjb250cm9sIG9mIHRoZSB0b2tlbiB0byB0aGUgbmV0d29yayB3aGVuIHRoZSBvZmZlcmluZwovLy8gIGFza3MgaXQgdG8gZG8gc28uCgpjb250cmFjdCBNU1BQbGFjZUhvbGRlciBpcyBDb250cm9sbGVkLCBUb2tlbkNvbnRyb2xsZXIsIFJlZnVuZGFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBNaW5pTWVUb2tlbkkgcHVibGljIG1zcDsKICBDb250cmlidXRpb24gcHVibGljIGNvbnRyaWJ1dGlvbjsKCiAgdWludDI1NiBwdWJsaWMgYWN0aXZhdGlvblRpbWU7CiAgYWRkcmVzcyBwdWJsaWMgc2l0RXhjaGFuZ2VyOwoKICAvLy8gQG5vdGljZSBDb25zdHJ1Y3RvcgogIC8vLyBAcGFyYW0gX2NvbnRyb2xsZXIgVHJ1c3RlZCBjb250cm9sbGVyIGZvciB0aGlzIGNvbnRyYWN0LgogIC8vLyBAcGFyYW0gX21zcCBNU1AgdG9rZW4gY29udHJhY3QgYWRkcmVzcwogIC8vLyBAcGFyYW0gX2NvbnRyaWJ1dGlvbiBDb250cmlidXRpb24gY29udHJhY3QgYWRkcmVzcwogIC8vLyBAcGFyYW0gX3NpdEV4Y2hhbmdlciBTSVQtTVNQIEV4Y2hhbmdlIGFkZHJlc3MuIChEdXJpbmcgdGhlIGZpcnN0IGRheQogIC8vLyAgb25seSB0aGlzIGV4Y2hhbmdlciB3aWxsIGJlIGFibGUgdG8gbW92ZSB0b2tlbnMpCiAgZnVuY3Rpb24gTVNQUGxhY2VIb2xkZXIoYWRkcmVzcyBfY29udHJvbGxlciwgYWRkcmVzcyBfbXNwLCBhZGRyZXNzIF9jb250cmlidXRpb24sIGFkZHJlc3MgX3NpdEV4Y2hhbmdlcikgewogICAgY29udHJvbGxlciA9IF9jb250cm9sbGVyOwogICAgbXNwID0gTWluaU1lVG9rZW5JKF9tc3ApOwogICAgY29udHJpYnV0aW9uID0gQ29udHJpYnV0aW9uKF9jb250cmlidXRpb24pOwogICAgc2l0RXhjaGFuZ2VyID0gX3NpdEV4Y2hhbmdlcjsKICB9CgogIC8vLyBAbm90aWNlIFRoZSBjb250cm9sbGVyIG9mIHRoaXMgY29udHJhY3QgY2FuIGNoYW5nZSB0aGUgY29udHJvbGxlciBvZiB0aGUgTVNQIHRva2VuCiAgLy8vICBQbGVhc2UsIGJlIHN1cmUgdGhhdCB0aGUgY29udHJvbGxlciBpcyBhIHRydXN0ZWQgYWdlbnQgb3IgMHgwIGFkZHJlc3MuCiAgLy8vIEBwYXJhbSBfbmV3Q29udHJvbGxlciBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IGNvbnRyb2xsZXIKCiAgZnVuY3Rpb24gY2hhbmdlQ29udHJvbGxlcihhZGRyZXNzIF9uZXdDb250cm9sbGVyKSBwdWJsaWMgb25seUNvbnRyb2xsZXIgewogICAgbXNwLmNoYW5nZUNvbnRyb2xsZXIoX25ld0NvbnRyb2xsZXIpOwogICAgQ29udHJvbGxlckNoYW5nZWQoX25ld0NvbnRyb2xsZXIpOwogIH0KCiAgZnVuY3Rpb24gcmVmdW5kKGFkZHJlc3MgdGgsIHVpbnQgYW1vdW50KSByZXR1cm5zIChib29sKSB7CiAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBhZGRyZXNzKGNvbnRyaWJ1dGlvbikpOwogICAgbXNwLmRlc3Ryb3lUb2tlbnModGgsIGFtb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vLy8vLy8vLy8KICAvLyBNaW5pTWUgQ29udHJvbGxlciBJbnRlcmZhY2UgZnVuY3Rpb25zCiAgLy8vLy8vLy8vLwoKICAvLyBJbiBiZXR3ZWVuIHRoZSBvZmZlcmluZyBhbmQgdGhlIG5ldHdvcmsuIERlZmF1bHQgc2V0dGluZ3MgZm9yIGFsbG93aW5nIHRva2VuIHRyYW5zZmVycy4KICBmdW5jdGlvbiBwcm94eVBheW1lbnQoYWRkcmVzcykgcHVibGljIHBheWFibGUgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gb25UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzLCB1aW50MjU2KSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHRyYW5zZmVyYWJsZShfZnJvbSk7CiAgfQoKICBmdW5jdGlvbiBvbkFwcHJvdmUoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcywgdWludDI1NikgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB0cmFuc2ZlcmFibGUoX2Zyb20pOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJhYmxlKGFkZHJlc3MgX2Zyb20pIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgIGlmICghY29udHJpYnV0aW9uLmdvYWxNZXQoKSkgcmV0dXJuIGZhbHNlOwogICAgLy8gQWxsb3cgdGhlIGV4Y2hhbmdlciB0byB3b3JrIGZyb20gdGhlIGJlZ2lubmluZwogICAgaWYgKGFjdGl2YXRpb25UaW1lID09IDApIHsKICAgICAgdWludDI1NiBmID0gY29udHJpYnV0aW9uLmZpbmFsaXplZFRpbWUoKTsKICAgICAgaWYgKGYgPiAwKSB7CiAgICAgICAgYWN0aXZhdGlvblRpbWUgPSBmLmFkZCgyNCBob3Vycyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gKGdldFRpbWUoKSA+IGFjdGl2YXRpb25UaW1lKSB8fCAoX2Zyb20gPT0gc2l0RXhjaGFuZ2VyKTsKICB9CgoKICAvLy8vLy8vLy8vCiAgLy8gVGVzdGluZyBzcGVjaWZpYyBtZXRob2RzCiAgLy8vLy8vLy8vLwoKICAvLy8gQG5vdGljZSBUaGlzIGZ1bmN0aW9uIGlzIG92ZXJyaWRkZW4gYnkgdGhlIHRlc3QgTW9ja3MuCiAgZnVuY3Rpb24gZ2V0VGltZSgpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBub3c7CiAgfQoKCiAgLy8vLy8vLy8vLwogIC8vIFNhZmV0eSBNZXRob2RzCiAgLy8vLy8vLy8vLwoKICAvLy8gQG5vdGljZSBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBieSB0aGUgY29udHJvbGxlciB0byBleHRyYWN0IG1pc3Rha2VubHkKICAvLy8gIHNlbnQgdG9rZW5zIHRvIHRoaXMgY29udHJhY3QuCiAgLy8vIEBwYXJhbSBfdG9rZW4gVGhlIGFkZHJlc3Mgb2YgdGhlIHRva2VuIGNvbnRyYWN0IHRoYXQgeW91IHdhbnQgdG8gcmVjb3ZlcgogIC8vLyAgc2V0IHRvIDAgaW4gY2FzZSB5b3Ugd2FudCB0byBleHRyYWN0IGV0aGVyLgogIGZ1bmN0aW9uIGNsYWltVG9rZW5zKGFkZHJlc3MgX3Rva2VuKSBwdWJsaWMgb25seUNvbnRyb2xsZXIgewogICAgaWYgKG1zcC5jb250cm9sbGVyKCkgPT0gYWRkcmVzcyh0aGlzKSkgewogICAgICBtc3AuY2xhaW1Ub2tlbnMoX3Rva2VuKTsKICAgIH0KICAgIGlmIChfdG9rZW4gPT0gMHgwKSB7CiAgICAgIGNvbnRyb2xsZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIEVSQzIwVG9rZW4gdG9rZW4gPSBFUkMyMFRva2VuKF90b2tlbik7CiAgICB1aW50MjU2IGJhbGFuY2UgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICB0b2tlbi50cmFuc2Zlcihjb250cm9sbGVyLCBiYWxhbmNlKTsKICAgIENsYWltZWRUb2tlbnMoX3Rva2VuLCBjb250cm9sbGVyLCBiYWxhbmNlKTsKICB9CgogIGV2ZW50IENsYWltZWRUb2tlbnMoYWRkcmVzcyBpbmRleGVkIF90b2tlbiwgYWRkcmVzcyBpbmRleGVkIF9jb250cm9sbGVyLCB1aW50MjU2IF9hbW91bnQpOwogIGV2ZW50IENvbnRyb2xsZXJDaGFuZ2VkKGFkZHJlc3MgaW5kZXhlZCBfbmV3Q29udHJvbGxlcik7Cn0='.
	

]
