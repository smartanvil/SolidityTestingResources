Class {
	#name : #SRTfc07251450048bf4e9fa60b856c1e0abd1574d1c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfc07251450048bf4e9fa60b856c1e0abd1574d1c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBFdGhlcmVtb24gRVJDNzIxCgovLyBjb3B5cmlnaHQgPHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI0ODJiMjcyNjNjMjkyYjNjMDgwZDNjMjAyZDNhMmQyNTI3MjY2NjJiMjcyNSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4KCmNvbnRyYWN0IFNhZmVNYXRoIHsKCiAgICAvKiBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsgKi8KICAgIC8qICAgaWYgKCFhc3NlcnRpb24pIHsgKi8KICAgIC8qICAgICB0aHJvdzsgKi8KICAgIC8qICAgfSAqLwogICAgLyogfSAgICAgIC8vIGFzc2VydCBubyBsb25nZXIgbmVlZGVkIG9uY2Ugc29saWRpdHkgaXMgb24gMC40LjEwICovCgogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgdWludDI1NiB6ID0geCArIHk7CiAgICAgIGFzc2VydCgoeiA+PSB4KSAmJiAoeiA+PSB5KSk7CiAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVTdWJ0cmFjdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgYXNzZXJ0KHggPj0geSk7CiAgICAgIHVpbnQyNTYgeiA9IHggLSB5OwogICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlTXVsdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgdWludDI1NiB6ID0geCAqIHk7CiAgICAgIGFzc2VydCgoeCA9PSAwKXx8KHoveCA9PSB5KSk7CiAgICAgIHJldHVybiB6OwogICAgfQoKfQoKY29udHJhY3QgQmFzaWNBY2Nlc3NDb250cm9sIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgLy8gYWRkcmVzc1tdIHB1YmxpYyBtb2RlcmF0b3JzOwogICAgdWludDE2IHB1YmxpYyB0b3RhbE1vZGVyYXRvcnMgPSAwOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgbW9kZXJhdG9yczsKICAgIGJvb2wgcHVibGljIGlzTWFpbnRhaW5pbmcgPSB0cnVlOwoKICAgIGZ1bmN0aW9uIEJhc2ljQWNjZXNzQ29udHJvbCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlNb2RlcmF0b3JzKCkgewogICAgICAgIHJlcXVpcmUobW9kZXJhdG9yc1ttc2cuc2VuZGVyXSA9PSB0cnVlKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGlzQWN0aXZlIHsKICAgICAgICByZXF1aXJlKCFpc01haW50YWluaW5nKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIENoYW5nZU93bmVyKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBpZiAoX25ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIEFkZE1vZGVyYXRvcihhZGRyZXNzIF9uZXdNb2RlcmF0b3IpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGlmIChtb2RlcmF0b3JzW19uZXdNb2RlcmF0b3JdID09IGZhbHNlKSB7CiAgICAgICAgICAgIG1vZGVyYXRvcnNbX25ld01vZGVyYXRvcl0gPSB0cnVlOwogICAgICAgICAgICB0b3RhbE1vZGVyYXRvcnMgKz0gMTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIFJlbW92ZU1vZGVyYXRvcihhZGRyZXNzIF9vbGRNb2RlcmF0b3IpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGlmIChtb2RlcmF0b3JzW19vbGRNb2RlcmF0b3JdID09IHRydWUpIHsKICAgICAgICAgICAgbW9kZXJhdG9yc1tfb2xkTW9kZXJhdG9yXSA9IGZhbHNlOwogICAgICAgICAgICB0b3RhbE1vZGVyYXRvcnMgLT0gMTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIFVwZGF0ZU1haW50YWluaW5nKGJvb2wgX2lzTWFpbnRhaW5pbmcpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGlzTWFpbnRhaW5pbmcgPSBfaXNNYWludGFpbmluZzsKICAgIH0KfQoKCmNvbnRyYWN0IEV0aGVyZW1vbkVudW0gewoKICAgIGVudW0gUmVzdWx0Q29kZSB7CiAgICAgICAgU1VDQ0VTUywKICAgICAgICBFUlJPUl9DTEFTU19OT1RfRk9VTkQsCiAgICAgICAgRVJST1JfTE9XX0JBTEFOQ0UsCiAgICAgICAgRVJST1JfU0VORF9GQUlMLAogICAgICAgIEVSUk9SX05PVF9UUkFJTkVSLAogICAgICAgIEVSUk9SX05PVF9FTk9VR0hfTU9ORVksCiAgICAgICAgRVJST1JfSU5WQUxJRF9BTU9VTlQKICAgIH0KICAgIAogICAgZW51bSBBcnJheVR5cGUgewogICAgICAgIENMQVNTX1RZUEUsCiAgICAgICAgU1RBVF9TVEVQLAogICAgICAgIFNUQVRfU1RBUlQsCiAgICAgICAgU1RBVF9CQVNFLAogICAgICAgIE9CSl9TS0lMTAogICAgfQogICAgCiAgICBlbnVtIFByb3BlcnR5VHlwZSB7CiAgICAgICAgQU5DRVNUT1IsCiAgICAgICAgWEZBQ1RPUgogICAgfQp9Cgpjb250cmFjdCBFdGhlcmVtb25EYXRhQmFzZSBpcyBFdGhlcmVtb25FbnVtLCBCYXNpY0FjY2Vzc0NvbnRyb2wsIFNhZmVNYXRoIHsKICAgIAogICAgdWludDY0IHB1YmxpYyB0b3RhbE1vbnN0ZXI7CiAgICB1aW50MzIgcHVibGljIHRvdGFsQ2xhc3M7CiAgICAKICAgIC8vIHdyaXRlCiAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aGVyKGFkZHJlc3MgX3NlbmRUbywgdWludCBfYW1vdW50KSBvbmx5T3duZXIgcHVibGljIHJldHVybnMoUmVzdWx0Q29kZSk7CiAgICBmdW5jdGlvbiBhZGRFbGVtZW50VG9BcnJheVR5cGUoQXJyYXlUeXBlIF90eXBlLCB1aW50NjQgX2lkLCB1aW50OCBfdmFsdWUpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYyByZXR1cm5zKHVpbnQpOwogICAgZnVuY3Rpb24gdXBkYXRlSW5kZXhPZkFycmF5VHlwZShBcnJheVR5cGUgX3R5cGUsIHVpbnQ2NCBfaWQsIHVpbnQgX2luZGV4LCB1aW50OCBfdmFsdWUpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYyByZXR1cm5zKHVpbnQpOwogICAgZnVuY3Rpb24gc2V0TW9uc3RlckNsYXNzKHVpbnQzMiBfY2xhc3NJZCwgdWludDI1NiBfcHJpY2UsIHVpbnQyNTYgX3JldHVyblByaWNlLCBib29sIF9jYXRjaGFibGUpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYyByZXR1cm5zKHVpbnQzMik7CiAgICBmdW5jdGlvbiBhZGRNb25zdGVyT2JqKHVpbnQzMiBfY2xhc3NJZCwgYWRkcmVzcyBfdHJhaW5lciwgc3RyaW5nIF9uYW1lKSBvbmx5TW9kZXJhdG9ycyBwdWJsaWMgcmV0dXJucyh1aW50NjQpOwogICAgZnVuY3Rpb24gc2V0TW9uc3Rlck9iaih1aW50NjQgX29iaklkLCBzdHJpbmcgX25hbWUsIHVpbnQzMiBfZXhwLCB1aW50MzIgX2NyZWF0ZUluZGV4LCB1aW50MzIgX2xhc3RDbGFpbUluZGV4KSBvbmx5TW9kZXJhdG9ycyBwdWJsaWM7CiAgICBmdW5jdGlvbiBpbmNyZWFzZU1vbnN0ZXJFeHAodWludDY0IF9vYmpJZCwgdWludDMyIGFtb3VudCkgb25seU1vZGVyYXRvcnMgcHVibGljOwogICAgZnVuY3Rpb24gZGVjcmVhc2VNb25zdGVyRXhwKHVpbnQ2NCBfb2JqSWQsIHVpbnQzMiBhbW91bnQpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHJlbW92ZU1vbnN0ZXJJZE1hcHBpbmcoYWRkcmVzcyBfdHJhaW5lciwgdWludDY0IF9tb25zdGVySWQpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGFkZE1vbnN0ZXJJZE1hcHBpbmcoYWRkcmVzcyBfdHJhaW5lciwgdWludDY0IF9tb25zdGVySWQpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGNsZWFyTW9uc3RlclJldHVybkJhbGFuY2UodWludDY0IF9tb25zdGVySWQpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYyByZXR1cm5zKHVpbnQyNTYgYW1vdW50KTsKICAgIGZ1bmN0aW9uIGNvbGxlY3RBbGxSZXR1cm5CYWxhbmNlKGFkZHJlc3MgX3RyYWluZXIpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYyByZXR1cm5zKHVpbnQyNTYgYW1vdW50KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyTW9uc3RlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDY0IF9tb25zdGVySWQpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYyByZXR1cm5zKFJlc3VsdENvZGUpOwogICAgZnVuY3Rpb24gYWRkRXh0cmFCYWxhbmNlKGFkZHJlc3MgX3RyYWluZXIsIHVpbnQyNTYgX2Ftb3VudCkgb25seU1vZGVyYXRvcnMgcHVibGljIHJldHVybnModWludDI1Nik7CiAgICBmdW5jdGlvbiBkZWR1Y3RFeHRyYUJhbGFuY2UoYWRkcmVzcyBfdHJhaW5lciwgdWludDI1NiBfYW1vdW50KSBvbmx5TW9kZXJhdG9ycyBwdWJsaWMgcmV0dXJucyh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHNldEV4dHJhQmFsYW5jZShhZGRyZXNzIF90cmFpbmVyLCB1aW50MjU2IF9hbW91bnQpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYzsKICAgIAogICAgLy8gcmVhZAogICAgZnVuY3Rpb24gZ2V0U2l6ZUFycmF5VHlwZShBcnJheVR5cGUgX3R5cGUsIHVpbnQ2NCBfaWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQpOwogICAgZnVuY3Rpb24gZ2V0RWxlbWVudEluQXJyYXlUeXBlKEFycmF5VHlwZSBfdHlwZSwgdWludDY0IF9pZCwgdWludCBfaW5kZXgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQ4KTsKICAgIGZ1bmN0aW9uIGdldE1vbnN0ZXJDbGFzcyh1aW50MzIgX2NsYXNzSWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQzMiBjbGFzc0lkLCB1aW50MjU2IHByaWNlLCB1aW50MjU2IHJldHVyblByaWNlLCB1aW50MzIgdG90YWwsIGJvb2wgY2F0Y2hhYmxlKTsKICAgIGZ1bmN0aW9uIGdldE1vbnN0ZXJPYmoodWludDY0IF9vYmpJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDY0IG9iaklkLCB1aW50MzIgY2xhc3NJZCwgYWRkcmVzcyB0cmFpbmVyLCB1aW50MzIgZXhwLCB1aW50MzIgY3JlYXRlSW5kZXgsIHVpbnQzMiBsYXN0Q2xhaW1JbmRleCwgdWludCBjcmVhdGVUaW1lKTsKICAgIGZ1bmN0aW9uIGdldE1vbnN0ZXJOYW1lKHVpbnQ2NCBfb2JqSWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHN0cmluZyBuYW1lKTsKICAgIGZ1bmN0aW9uIGdldEV4dHJhQmFsYW5jZShhZGRyZXNzIF90cmFpbmVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGdldE1vbnN0ZXJEZXhTaXplKGFkZHJlc3MgX3RyYWluZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQpOwogICAgZnVuY3Rpb24gZ2V0TW9uc3Rlck9iaklkKGFkZHJlc3MgX3RyYWluZXIsIHVpbnQgaW5kZXgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQ2NCk7CiAgICBmdW5jdGlvbiBnZXRFeHBlY3RlZEJhbGFuY2UoYWRkcmVzcyBfdHJhaW5lcikgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDI1Nik7CiAgICBmdW5jdGlvbiBnZXRNb25zdGVyUmV0dXJuKHVpbnQ2NCBfb2JqSWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQyNTYgY3VycmVudCwgdWludDI1NiB0b3RhbCk7Cn0KCgppbnRlcmZhY2UgRXRoZXJlbW9uQmF0dGxlIHsKICAgIGZ1bmN0aW9uIGlzT25CYXR0bGUodWludDY0IF9vYmpJZCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyhib29sKTsKfQoKaW50ZXJmYWNlIEV0aGVyZW1vblRyYWRlSW50ZXJmYWNlIHsKICAgIGZ1bmN0aW9uIGlzT25UcmFkaW5nKHVpbnQ2NCBfb2JqSWQpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMoYm9vbCk7Cn0KCmNvbnRyYWN0IEVSQzcyMSB7CiAgICAvLyBFUkMyMCBjb21wYXRpYmxlIGZ1bmN0aW9ucwogICAgLy8gZnVuY3Rpb24gbmFtZSgpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBuYW1lKTsKICAgIC8vIGZ1bmN0aW9uIHN5bWJvbCgpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBzeW1ib2wpOwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIC8vIEZ1bmN0aW9ucyB0aGF0IGRlZmluZSBvd25lcnNoaXAKICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIHRva2VuT2ZPd25lckJ5SW5kZXgoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX2luZGV4KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCB0b2tlbklkKTsKICAgIC8vIFRva2VuIG1ldGFkYXRhCiAgICAvL2Z1bmN0aW9uIHRva2VuTWV0YWRhdGEodWludDI1NiBfdG9rZW5JZCkgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nIGluZm9VcmwpOwoKICAgIC8vIEV2ZW50cwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF90b2tlbklkKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfYXBwcm92ZWQsIHVpbnQyNTYgX3Rva2VuSWQpOwp9Cgpjb250cmFjdCBFdGhlcmVtb25Bc3NldCBpcyBCYXNpY0FjY2Vzc0NvbnRyb2wsIEVSQzcyMSB7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiRXRoZXJlbW9uQXNzZXQiOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiRU1PTkEiOwogICAgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykpIHB1YmxpYyBhbGxvd2VkOwogICAgCiAgICAvLyBkYXRhIGNvbnRyYWN0CiAgICBhZGRyZXNzIHB1YmxpYyBkYXRhQ29udHJhY3Q7CiAgICBhZGRyZXNzIHB1YmxpYyBiYXR0bGVDb250cmFjdDsKICAgIGFkZHJlc3MgcHVibGljIHRyYWRlQ29udHJhY3Q7CiAgICAKICAgIC8vIGhlbHBlciBzdHJ1Y3QKICAgIHN0cnVjdCBNb25zdGVyQ2xhc3NBY2MgewogICAgICAgIHVpbnQzMiBjbGFzc0lkOwogICAgICAgIHVpbnQyNTYgcHJpY2U7CiAgICAgICAgdWludDI1NiByZXR1cm5QcmljZTsKICAgICAgICB1aW50MzIgdG90YWw7CiAgICAgICAgYm9vbCBjYXRjaGFibGU7CiAgICB9CgogICAgc3RydWN0IE1vbnN0ZXJPYmpBY2MgewogICAgICAgIHVpbnQ2NCBtb25zdGVySWQ7CiAgICAgICAgdWludDMyIGNsYXNzSWQ7CiAgICAgICAgYWRkcmVzcyB0cmFpbmVyOwogICAgICAgIHN0cmluZyBuYW1lOwogICAgICAgIHVpbnQzMiBleHA7CiAgICAgICAgdWludDMyIGNyZWF0ZUluZGV4OwogICAgICAgIHVpbnQzMiBsYXN0Q2xhaW1JbmRleDsKICAgICAgICB1aW50IGNyZWF0ZVRpbWU7CiAgICB9CgogICAgLy8gbW9kaWZpZXIKICAgIAogICAgbW9kaWZpZXIgcmVxdWlyZURhdGFDb250cmFjdCB7CiAgICAgICAgcmVxdWlyZShkYXRhQ29udHJhY3QgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgcmVxdWlyZUJhdHRsZUNvbnRyYWN0IHsKICAgICAgICByZXF1aXJlKGJhdHRsZUNvbnRyYWN0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIHJlcXVpcmVUcmFkZUNvbnRyYWN0IHsKICAgICAgICByZXF1aXJlKHRyYWRlQ29udHJhY3QgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgXzsgICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBFdGhlcmVtb25Bc3NldChhZGRyZXNzIF9kYXRhQ29udHJhY3QsIGFkZHJlc3MgX2JhdHRsZUNvbnRyYWN0LCBhZGRyZXNzIF90cmFkZUNvbnRyYWN0KSBwdWJsaWMgewogICAgICAgIGRhdGFDb250cmFjdCA9IF9kYXRhQ29udHJhY3Q7CiAgICAgICAgYmF0dGxlQ29udHJhY3QgPSBfYmF0dGxlQ29udHJhY3Q7CiAgICAgICAgdHJhZGVDb250cmFjdCA9IF90cmFkZUNvbnRyYWN0OwogICAgfQoKICAgIGZ1bmN0aW9uIHNldENvbnRyYWN0KGFkZHJlc3MgX2RhdGFDb250cmFjdCwgYWRkcmVzcyBfYmF0dGxlQ29udHJhY3QsIGFkZHJlc3MgX3RyYWRlQ29udHJhY3QpIG9ubHlNb2RlcmF0b3JzIGV4dGVybmFsIHsKICAgICAgICBkYXRhQ29udHJhY3QgPSBfZGF0YUNvbnRyYWN0OwogICAgICAgIGJhdHRsZUNvbnRyYWN0ID0gX2JhdHRsZUNvbnRyYWN0OwogICAgICAgIHRyYWRlQ29udHJhY3QgPSBfdHJhZGVDb250cmFjdDsKICAgIH0KICAgIAogICAgCiAgICAvLyBwdWJsaWMKICAgIAogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmVxdWlyZURhdGFDb250cmFjdCByZXR1cm5zICh1aW50MjU2IHN1cHBseSl7CiAgICAgICAgRXRoZXJlbW9uRGF0YUJhc2UgZGF0YSA9IEV0aGVyZW1vbkRhdGFCYXNlKGRhdGFDb250cmFjdCk7CiAgICAgICAgcmV0dXJuIGRhdGEudG90YWxNb25zdGVyKCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJlcXVpcmVEYXRhQ29udHJhY3QgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICAgICAgRXRoZXJlbW9uRGF0YUJhc2UgZGF0YSA9IEV0aGVyZW1vbkRhdGFCYXNlKGRhdGFDb250cmFjdCk7CiAgICAgICAgcmV0dXJuIGRhdGEuZ2V0TW9uc3RlckRleFNpemUoX293bmVyKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgY29uc3RhbnQgcmVxdWlyZURhdGFDb250cmFjdCByZXR1cm5zIChhZGRyZXNzIG93bmVyKSB7CiAgICAgICAgRXRoZXJlbW9uRGF0YUJhc2UgZGF0YSA9IEV0aGVyZW1vbkRhdGFCYXNlKGRhdGFDb250cmFjdCk7CiAgICAgICAgTW9uc3Rlck9iakFjYyBtZW1vcnkgb2JqOwogICAgICAgIChvYmoubW9uc3RlcklkLCBvYmouY2xhc3NJZCwgb2JqLnRyYWluZXIsIG9iai5leHAsIG9iai5jcmVhdGVJbmRleCwgb2JqLmxhc3RDbGFpbUluZGV4LCBvYmouY3JlYXRlVGltZSkgPSBkYXRhLmdldE1vbnN0ZXJPYmoodWludDY0KF90b2tlbklkKSk7CiAgICAgICAgcmVxdWlyZShvYmoubW9uc3RlcklkID09IHVpbnQ2NChfdG9rZW5JZCkpOwogICAgICAgIHJldHVybiBvYmoudHJhaW5lcjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgaXNBY3RpdmUgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lck9mKF90b2tlbklkKSk7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IF90byk7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfdG9rZW5JZF0gPSBfdG87CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcmVxdWlyZURhdGFDb250cmFjdCByZXF1aXJlQmF0dGxlQ29udHJhY3QgcmVxdWlyZVRyYWRlQ29udHJhY3QgaXNBY3RpdmUgZXh0ZXJuYWwgewogICAgICAgIEV0aGVyZW1vbkRhdGFCYXNlIGRhdGEgPSBFdGhlcmVtb25EYXRhQmFzZShkYXRhQ29udHJhY3QpOwogICAgICAgIE1vbnN0ZXJPYmpBY2MgbWVtb3J5IG9iajsKICAgICAgICAob2JqLm1vbnN0ZXJJZCwgb2JqLmNsYXNzSWQsIG9iai50cmFpbmVyLCBvYmouZXhwLCBvYmouY3JlYXRlSW5kZXgsIG9iai5sYXN0Q2xhaW1JbmRleCwgb2JqLmNyZWF0ZVRpbWUpID0gZGF0YS5nZXRNb25zdGVyT2JqKHVpbnQ2NChfdG9rZW5JZCkpOwogICAgICAgIAogICAgICAgIHJlcXVpcmUob2JqLm1vbnN0ZXJJZCA9PSB1aW50NjQoX3Rva2VuSWQpKTsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gb2JqLnRyYWluZXIpOwogICAgICAgIAogICAgICAgIHJlcXVpcmUoYWxsb3dlZFtvYmoudHJhaW5lcl1bX3Rva2VuSWRdID09IG1zZy5zZW5kZXIpOwogICAgICAgIAogICAgICAgIC8vIGNoZWNrIGJhdHRsZSAmIHRyYWRlIGNvbnRyYWN0IAogICAgICAgIEV0aGVyZW1vbkJhdHRsZSBiYXR0bGUgPSBFdGhlcmVtb25CYXR0bGUoYmF0dGxlQ29udHJhY3QpOwogICAgICAgIEV0aGVyZW1vblRyYWRlSW50ZXJmYWNlIHRyYWRlID0gRXRoZXJlbW9uVHJhZGVJbnRlcmZhY2UodHJhZGVDb250cmFjdCk7CiAgICAgICAgaWYgKGJhdHRsZS5pc09uQmF0dGxlKG9iai5tb25zdGVySWQpIHx8IHRyYWRlLmlzT25UcmFkaW5nKG9iai5tb25zdGVySWQpKQogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICAKICAgICAgICAvLyByZW1vdmUgYWxsb3dlZAogICAgICAgIGFsbG93ZWRbb2JqLnRyYWluZXJdW190b2tlbklkXSA9IGFkZHJlc3MoMCk7CgogICAgICAgIC8vIHRyYW5zZmVyIG93bmVyCiAgICAgICAgZGF0YS5yZW1vdmVNb25zdGVySWRNYXBwaW5nKG9iai50cmFpbmVyLCBvYmoubW9uc3RlcklkKTsKICAgICAgICBkYXRhLmFkZE1vbnN0ZXJJZE1hcHBpbmcobXNnLnNlbmRlciwgb2JqLm1vbnN0ZXJJZCk7CiAgICAgICAgCiAgICAgICAgVHJhbnNmZXIob2JqLnRyYWluZXIsIG1zZy5zZW5kZXIsIF90b2tlbklkKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHJlcXVpcmVEYXRhQ29udHJhY3QgaXNBY3RpdmUgZXh0ZXJuYWwgewogICAgICAgIEV0aGVyZW1vbkRhdGFCYXNlIGRhdGEgPSBFdGhlcmVtb25EYXRhQmFzZShkYXRhQ29udHJhY3QpOwogICAgICAgIE1vbnN0ZXJPYmpBY2MgbWVtb3J5IG9iajsKICAgICAgICAob2JqLm1vbnN0ZXJJZCwgb2JqLmNsYXNzSWQsIG9iai50cmFpbmVyLCBvYmouZXhwLCBvYmouY3JlYXRlSW5kZXgsIG9iai5sYXN0Q2xhaW1JbmRleCwgb2JqLmNyZWF0ZVRpbWUpID0gZGF0YS5nZXRNb25zdGVyT2JqKHVpbnQ2NChfdG9rZW5JZCkpOwogICAgICAgIAogICAgICAgIHJlcXVpcmUob2JqLm1vbnN0ZXJJZCA9PSB1aW50NjQoX3Rva2VuSWQpKTsKICAgICAgICByZXF1aXJlKG9iai50cmFpbmVyID09IG1zZy5zZW5kZXIpOwogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBfdG8pOwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIAogICAgICAgIC8vIGNoZWNrIGJhdHRsZSAmIHRyYWRlIGNvbnRyYWN0IAogICAgICAgIEV0aGVyZW1vbkJhdHRsZSBiYXR0bGUgPSBFdGhlcmVtb25CYXR0bGUoYmF0dGxlQ29udHJhY3QpOwogICAgICAgIEV0aGVyZW1vblRyYWRlSW50ZXJmYWNlIHRyYWRlID0gRXRoZXJlbW9uVHJhZGVJbnRlcmZhY2UodHJhZGVDb250cmFjdCk7CiAgICAgICAgaWYgKGJhdHRsZS5pc09uQmF0dGxlKG9iai5tb25zdGVySWQpIHx8IHRyYWRlLmlzT25UcmFkaW5nKG9iai5tb25zdGVySWQpKQogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICAKICAgICAgICAvLyByZW1vdmUgYWxsb3dlZAogICAgICAgIGFsbG93ZWRbb2JqLnRyYWluZXJdW190b2tlbklkXSA9IGFkZHJlc3MoMCk7CiAgICAgICAgCiAgICAgICAgLy8gdHJhbnNmZXIgb3duZXIKICAgICAgICBkYXRhLnJlbW92ZU1vbnN0ZXJJZE1hcHBpbmcob2JqLnRyYWluZXIsIG9iai5tb25zdGVySWQpOwogICAgICAgIGRhdGEuYWRkTW9uc3RlcklkTWFwcGluZyhtc2cuc2VuZGVyLCBvYmoubW9uc3RlcklkKTsKICAgICAgICAKICAgICAgICBUcmFuc2ZlcihvYmoudHJhaW5lciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcmVxdWlyZURhdGFDb250cmFjdCByZXF1aXJlQmF0dGxlQ29udHJhY3QgcmVxdWlyZVRyYWRlQ29udHJhY3QgZXh0ZXJuYWwgewogICAgICAgIEV0aGVyZW1vbkRhdGFCYXNlIGRhdGEgPSBFdGhlcmVtb25EYXRhQmFzZShkYXRhQ29udHJhY3QpOwogICAgICAgIE1vbnN0ZXJPYmpBY2MgbWVtb3J5IG9iajsKICAgICAgICAob2JqLm1vbnN0ZXJJZCwgb2JqLmNsYXNzSWQsIG9iai50cmFpbmVyLCBvYmouZXhwLCBvYmouY3JlYXRlSW5kZXgsIG9iai5sYXN0Q2xhaW1JbmRleCwgb2JqLmNyZWF0ZVRpbWUpID0gZGF0YS5nZXRNb25zdGVyT2JqKHVpbnQ2NChfdG9rZW5JZCkpOwogICAgICAgIAogICAgICAgIHJlcXVpcmUob2JqLm1vbnN0ZXJJZCA9PSB1aW50NjQoX3Rva2VuSWQpKTsKICAgICAgICByZXF1aXJlKG9iai50cmFpbmVyID09IF9mcm9tKTsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF90byAhPSBfZnJvbSk7CiAgICAgICAgcmVxdWlyZShhbGxvd2VkW19mcm9tXVtfdG9rZW5JZF0gPT0gbXNnLnNlbmRlcik7CiAgICAKICAgICAgICAvLyBjaGVjayBiYXR0bGUgJiB0cmFkZSBjb250cmFjdCAKICAgICAgICBFdGhlcmVtb25CYXR0bGUgYmF0dGxlID0gRXRoZXJlbW9uQmF0dGxlKGJhdHRsZUNvbnRyYWN0KTsKICAgICAgICBFdGhlcmVtb25UcmFkZUludGVyZmFjZSB0cmFkZSA9IEV0aGVyZW1vblRyYWRlSW50ZXJmYWNlKHRyYWRlQ29udHJhY3QpOwogICAgICAgIGlmIChiYXR0bGUuaXNPbkJhdHRsZShvYmoubW9uc3RlcklkKSB8fCB0cmFkZS5pc09uVHJhZGluZyhvYmoubW9uc3RlcklkKSkKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgCiAgICAgICAgLy8gcmVtb3ZlIGFsbG93ZWQKICAgICAgICBhbGxvd2VkW19mcm9tXVtfdG9rZW5JZF0gPSBhZGRyZXNzKDApOwoKICAgICAgICAvLyB0cmFuc2ZlciBvd25lcgogICAgICAgIGRhdGEucmVtb3ZlTW9uc3RlcklkTWFwcGluZyhvYmoudHJhaW5lciwgb2JqLm1vbnN0ZXJJZCk7CiAgICAgICAgZGF0YS5hZGRNb25zdGVySWRNYXBwaW5nKF90bywgb2JqLm1vbnN0ZXJJZCk7CiAgICAgICAgCiAgICAgICAgVHJhbnNmZXIob2JqLnRyYWluZXIsIF90bywgX3Rva2VuSWQpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0b2tlbk9mT3duZXJCeUluZGV4KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9pbmRleCkgcHVibGljIGNvbnN0YW50IHJlcXVpcmVEYXRhQ29udHJhY3QgcmV0dXJucyAodWludCB0b2tlbklkKSB7CiAgICAgICAgRXRoZXJlbW9uRGF0YUJhc2UgZGF0YSA9IEV0aGVyZW1vbkRhdGFCYXNlKGRhdGFDb250cmFjdCk7CiAgICAgICAgcmV0dXJuIGRhdGEuZ2V0TW9uc3Rlck9iaklkKF9vd25lciwgX2luZGV4KTsKICAgIH0KfQ=='.
	

]
