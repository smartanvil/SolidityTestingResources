Class {
	#name : #SRT9EA80e204045329Ba752D03C395F82A12799f13d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9EA80e204045329Ba752D03C395F82A12799f13d >> base64 [
	^ 'Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tQkxPQ0tMQU5DRVIgVE9LRU4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLwovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8KCnByYWdtYSBzb2xpZGl0eSBeMC40Ljg7CgovLy8gTWlncmF0aW9uIEFnZW50Ci8vLyBhbGxvd3MgdXMgdG8gbWlncmF0ZSB0byBhIG5ldyBjb250cmFjdCBzaG91bGQgaXQgYmUgbmVlZGVkCi8vLyBtYWtlcyBibG9ja2xhbmNlciBmdXR1cmUgcHJvb2YKY29udHJhY3QgTWlncmF0aW9uQWdlbnQgewogICAgZnVuY3Rpb24gbWlncmF0ZUZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMEludGVyZmFjZSB7CiAgICAgLy8gR2V0IHRoZSB0b3RhbCB0b2tlbiBzdXBwbHkKICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpOwogIAogICAgIC8vIEdldCB0aGUgYWNjb3VudCBiYWxhbmNlIG9mIGFub3RoZXIgYWNjb3VudCB3aXRoIGFkZHJlc3MgX293bmVyCiAgICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogIAogICAgIC8vIFNlbmQgX3ZhbHVlIGFtb3VudCBvZiB0b2tlbnMgdG8gYWRkcmVzcyBfdG8KICAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgCiAgICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8KICAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIAogICAgIC8vIEFsbG93IF9zcGVuZGVyIHRvIHdpdGhkcmF3IGZyb20geW91ciBhY2NvdW50LCBtdWx0aXBsZSB0aW1lcywgdXAgdG8gdGhlIF92YWx1ZSBhbW91bnQuCiAgICAgLy8gSWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYWdhaW4gaXQgb3ZlcndyaXRlcyB0aGUgY3VycmVudCBhbGxvd2FuY2Ugd2l0aCBfdmFsdWUuCiAgICAgLy8gdGhpcyBmdW5jdGlvbiBpcyByZXF1aXJlZCBmb3Igc29tZSBERVggZnVuY3Rpb25hbGl0eQogICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgCiAgICAgLy8gUmV0dXJucyB0aGUgYW1vdW50IHdoaWNoIF9zcGVuZGVyIGlzIHN0aWxsIGFsbG93ZWQgdG8gd2l0aGRyYXcgZnJvbSBfb3duZXIKICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKICAKICAgICAvLyBUcmlnZ2VyZWQgd2hlbiB0b2tlbnMgYXJlIHRyYW5zZmVycmVkLgogICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogIAogICAgIC8vIFRyaWdnZXJlZCB3aGVuZXZlciBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBpcyBjYWxsZWQuCiAgICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCi8vLyBCbG9ja2xhbmNlciBUb2tlbiAoTE5DKSAtIGNyb3dkZnVuZGluZyBjb2RlIGZvciBCbG9ja2xhbmNlciBQcm9qZWN0CmNvbnRyYWN0IEJsb2NrbGFuY2VyVG9rZW4gaXMgRVJDMjBJbnRlcmZhY2UgewogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkxhbmNlciBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJMTkMiOwogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7ICAvLyAxOCBkZWNpbWFsIHBsYWNlcywgdGhlIHNhbWUgYXMgRVRILgoKICAgIC8vIFRoZSBmdW5kaW5nIGNhcCBpbiB3ZWlzLgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5DcmVhdGlvbkNhcCA9IDEwMDAwMDAwMDAqIDEwKioxODsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuQ3JlYXRpb25NaW4gPSAxNTAwMDAwMDAqIDEwKioxODsKICAgIAogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgdWludCBwdWJsaWMgZnVuZGluZ1N0YXJ0OwogICAgdWludCBwdWJsaWMgZnVuZGluZ0VuZDsKCiAgICAvLyBUaGUgZmxhZyBpbmRpY2F0ZXMgaWYgdGhlIExOQyBjb250cmFjdCBpcyBpbiBGdW5kaW5nIHN0YXRlLgogICAgYm9vbCBwdWJsaWMgZnVuZGluZyA9IHRydWU7CgogICAgLy8gUmVjZWl2ZXMgRVRIIGFuZCBpdHMgb3duIExOQyBlbmRvd21lbnQuCiAgICBhZGRyZXNzIHB1YmxpYyBtYXN0ZXI7CgogICAgLy8gVGhlIGN1cnJlbnQgdG90YWwgdG9rZW4gc3VwcGx5LgogICAgdWludDI1NiB0b3RhbFRva2VuczsKICAgIAogICAgLy9uZWVkZWQgdG8gY2FsY3VsYXRlIHRoZSBwcmljZSBhZnRlciB0aGUgcG93ZXIgZGF5CiAgICAvL3RoZSBwcmljZSBpbmNyZWFzZXMgYnkgMSAlIGZvciBldmVyeSAxMCBtaWxsaW9uIExOQyBzb2xkIGFmdGVyIHBvd2VyIGRheQogICAgdWludDI1NiBzb2xkQWZ0ZXJQb3dlckhvdXI7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgbGFzdFRyYW5zZmVycmVkOwogICAgCiAgICAvL25lZWRlZCB0byByZWZ1bmQgZXZlcnlvbmUgc2hvdWxkIHRoZSBJQ08gZmFpbAogICAgLy8gbmVlZGVkIGJlY2F1c2UgdGhlIHByaWNlIHBlciBMTkMgaXNuJ3QgbGluZWFyCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzRXRoZXI7CgogICAgLy9hZGRyZXNzIG9mIHRoZSBjb250cmFjdCB0aGF0IG1hbmFnZXMgdGhlIG1pZ3JhdGlvbgogICAgLy9jYW4gb25seSBiZSBjaGFuZ2VkIGJ5IHRoZSBjcmVhdG9yCiAgICBhZGRyZXNzIHB1YmxpYyBtaWdyYXRpb25BZ2VudDsKICAgIAogICAgLy90b3RhbCBhbW91bnQgb2YgdG9rZW4gbWlncmF0ZWQKICAgIC8vYWxsb3dzIGV2ZXJ5b25lIHRvIHNlZSB0aGUgcHJvZ3Jlc3Mgb2YgdGhlIG1pZ3JhdGlvbgogICAgdWludDI1NiBwdWJsaWMgdG90YWxNaWdyYXRlZDsKCiAgICBldmVudCBNaWdyYXRlKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgUmVmdW5kKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgdWludDI1NiBfdmFsdWUpOwogICAgCiAgICAvL3RvdGFsIGFtb3VudCBvZiBwYXJ0aWNpcGFudHMgaW4gdGhlIElDTwogICAgdWludCB0b3RhbFBhcnRpY2lwYW50czsKCiAgICBmdW5jdGlvbiBCbG9ja2xhbmNlclRva2VuKCkgewogICAgICAgIG1hc3RlciA9IG1zZy5zZW5kZXI7CiAgICAgICAgZnVuZGluZ1N0YXJ0ID0gMTUwMTk3NzYwMDsKICAgICAgICAvL2NoYW5nZSBmaXJzdCBudW1iZXIhCiAgICAgICAgZnVuZGluZ0VuZCA9IGZ1bmRpbmdTdGFydCArIDMxICogMSBkYXlzOy8vbm93ICsgMTAwMCAqIDEgbWludXRlczsKICAgIH0KICAgIAogICAgLy9yZXR1cm5zIHRoZSB0b3RhbCBhbW91bnQgb2YgcGFydGljaXBhbnRzIGluIHRoZSBJQ08KICAgIGZ1bmN0aW9uIGdldEFtb3VudG9mVG90YWxQYXJ0aWNpcGFudHMoKSBjb25zdGFudCByZXR1cm5zICh1aW50KXsKICAgICAgICByZXR1cm4gdG90YWxQYXJ0aWNpcGFudHM7CiAgICB9CiAgICAKICAgIC8vc2V0CiAgICBmdW5jdGlvbiBnZXRBbW91bnRTb2xkQWZ0ZXJQb3dlckRheSgpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnModWludDI1Nil7CiAgICAgICAgcmV0dXJuIHNvbGRBZnRlclBvd2VySG91cjsKICAgIH0KCiAgICAvLy8gYWxsb3dzIHRvIHRyYW5zZmVyIHRva2VuIHRvIGFub3RoZXIgYWRkcmVzcwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvLyBEb24ndCBhbGxvdyBpbiBmdW5kaW5nIHN0YXRlCiAgICAgICAgaWYoZnVuZGluZykgdGhyb3c7CgogICAgICAgIHZhciBzZW5kZXJCYWxhbmNlID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgICAgLy9vbmx5IGFsbG93IGlmIHRoZSBiYWxhbmNlIG9mIHRoZSBzZW5kZXIgaXMgbW9yZSB0aGFuIGhlIHdhbnQncyB0byBzZW5kCiAgICAgICAgaWYgKHNlbmRlckJhbGFuY2UgPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgLy9yZWR1Y2UgdGhlIHNlbmRlciBiYWxhbmNlIGJ5IHRoZSBhbW91bnQgaGUgc2VuZHMKICAgICAgICAgICAgc2VuZGVyQmFsYW5jZSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2VuZGVyQmFsYW5jZTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vaW5jcmVhc2UgdGhlIGJhbGFuY2Ugb2YgdGhlIHJlY2VpdmVyIGJ5IHRoZSBhbW91bnQgd2UgcmVkdWNlZCB0aGUgYmFsYW5jZSBvZiB0aGUgc2VuZGVyCiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICAKICAgICAgICAgICAgLy9zYXZlcyB0aGUgbGFzdCB0aW1lIHNvbWVvbmUgc2VudCBMTmMgZnJvbSB0aGlzIGFkZHJlc3MKICAgICAgICAgICAgLy9pcyBuZWVkZWQgZm9yIG91ciBUb2tlbiBIb2xkZXIgVHJpYnVuYWwKICAgICAgICAgICAgLy90aGlzIGVuc3VyZXMgdGhhdCBldmVyeW9uZSBjYW4gb25seSB2b3RlIG9uZSB0aW1lCiAgICAgICAgICAgIC8vb3RoZXJ3aXNlIGl0IHdvdWxkIGJlIHBvc3NpYmxlIHRvIHNlbmQgdGhlIExOQyBhcm91bmQgYW5kIGV2ZXJ5b25lIHZvdGVzIGFnYWluIGFuZCBhZ2FpbgogICAgICAgICAgICBsYXN0VHJhbnNmZXJyZWRbbXNnLnNlbmRlcl09YmxvY2sudGltZXN0YW1wOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICAvL3RyYW5zZmVyIGZhaWxlZAogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvL3JldHVybnMgdGhlIHRvdGFsIGFtb3VudCBvZiBMTkMgaW4gY2lyY3VsYXRpb24KICAgIC8vZ2V0IGRpc3BsYXllZCBvbiB0aGUgd2Vic2l0ZSB3aGlsc3QgdGhlIGNyb3dkIGZ1bmRpbmcKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSkgewogICAgICAgIHJldHVybiB0b3RhbFRva2VuczsKICAgIH0KICAgIAogICAgLy9yZXRydW5zIHRoZSBiYWxhbmNlIG9mIHRoZSBvd25lciBhZGRyZXNzCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQogICAgCiAgICAvL3JldHVybnMgdGhlIGFtb3VudCBhbnlvbmUgcGxlZGdlZCBpbnRvIHRoaXMgY29udHJhY3QKICAgIGZ1bmN0aW9uIEV0aGVyQmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzRXRoZXJbX293bmVyXTsKICAgIH0KICAgIAogICAgLy90aW1lIGxlZnQgYmVmb3JlIHRoZSBjcm9kc2FsZSBlbmRzCiAgICBmdW5jdGlvbiBUaW1lTGVmdCgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZihmdW5kaW5nRW5kPmJsb2NrLnRpbWVzdGFtcCkKICAgICAgICAgICAgcmV0dXJuIGZ1bmRpbmdFbmQtYmxvY2sudGltZXN0YW1wOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICAKICAgIC8vdGltZSBsZWZ0IGJlZm9yZSB0aGUgY3JvZHNhbGUgYmVnaW5zCiAgICBmdW5jdGlvbiBUaW1lTGVmdEJlZm9yZUNyb3dkc2FsZSgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZihmdW5kaW5nU3RhcnQ+YmxvY2sudGltZXN0YW1wKQogICAgICAgICAgICByZXR1cm4gZnVuZGluZ1N0YXJ0LWJsb2NrLnRpbWVzdGFtcDsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIC8vIGFsbG93cyB1cyB0byBtaWdyYXRlIHRvIGFuZXcgY29udHJhY3QKICAgIGZ1bmN0aW9uIG1pZ3JhdGUodWludDI1NiBfdmFsdWUpIGV4dGVybmFsIHsKICAgICAgICAvLyBjYW4gb25seSBiZSBjYWxsZWQgaWYgdGhlIGZ1bmRpbmcgZW5kZWQKICAgICAgICBpZihmdW5kaW5nKSB0aHJvdzsKICAgICAgICAKICAgICAgICAvL3RoZSBtaWdyYXRpb24gYWdlbnQgYWRkcmVzcyBuZWVkcyB0byBiZSBzZXQKICAgICAgICBpZihtaWdyYXRpb25BZ2VudCA9PSAwKSB0aHJvdzsKCiAgICAgICAgLy8gbXVzdCBtaWdyYXRlIG1vcmUgdGhhbiBub3RoaW5nCiAgICAgICAgaWYoX3ZhbHVlID09IDApIHRocm93OwogICAgICAgIAogICAgICAgIC8vaWYgdGhlIHZhbHVlIGlzIGhpZ2hlciB0aGFuIHRoZSBzZW5kZXIgb3ducyBhYm9ydAogICAgICAgIGlmKF92YWx1ZSA+IGJhbGFuY2VzW21zZy5zZW5kZXJdKSB0aHJvdzsKCiAgICAgICAgLy9yZWR1Y2UgdGhlIGJhbGFuY2Ugb2YgdGhlIG93bmVyCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIAogICAgICAgIC8vcmVkdWNlIHRoZSB0b2tlbiBsZWZ0IGluIHRoZSBvbGQgY29udHJhY3QKICAgICAgICB0b3RhbFRva2VucyAtPSBfdmFsdWU7CiAgICAgICAgdG90YWxNaWdyYXRlZCArPSBfdmFsdWU7CiAgICAgICAgCiAgICAgICAgLy9jYWxsIHRoZSBtaWdyYXRpb24gYWdlbnQgdG8gY29tcGxldGUgdGhlIG1pZ3JhdGlvbgogICAgICAgIC8vY3JlZGl0cyB0aGUgc2FtZSBhbW91bnQgb2YgTE5DIGluIHRoZSBuZXcgY29udHJhY3QKICAgICAgICBNaWdyYXRpb25BZ2VudChtaWdyYXRpb25BZ2VudCkubWlncmF0ZUZyb20obXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgICAgICBNaWdyYXRlKG1zZy5zZW5kZXIsIG1pZ3JhdGlvbkFnZW50LCBfdmFsdWUpOwogICAgfQoKICAgIC8vc2V0cyB0aGUgYWRkcmVzcyBvZiB0aGUgbWlncmF0aW9uIGFnZW50CiAgICBmdW5jdGlvbiBzZXRNaWdyYXRpb25BZ2VudChhZGRyZXNzIF9hZ2VudCkgZXh0ZXJuYWwgewogICAgICAgIC8vbm90IHBvc3NpYmxlIGluIGZ1bmRpbmcgbW9kZQogICAgICAgIGlmKGZ1bmRpbmcpIHRocm93OwogICAgICAgIAogICAgICAgIC8vb25seSBhbGxvdyB0byBzZXQgdGhpcyBvbmNlCiAgICAgICAgaWYobWlncmF0aW9uQWdlbnQgIT0gMCkgdGhyb3c7CiAgICAgICAgCiAgICAgICAgLy9hbmx5IHRoZSBvd25lciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uCiAgICAgICAgaWYobXNnLnNlbmRlciAhPSBtYXN0ZXIpIHRocm93OwogICAgICAgIAogICAgICAgIC8vc2V0IHRoZSBtaWdyYXRpb24gYWdlbnQKICAgICAgICBtaWdyYXRpb25BZ2VudCA9IF9hZ2VudDsKICAgIH0KICAgIAogICAgLy9yZXR1cm4gdGhlIGN1cnJlbnQgZXhjaGFuZ2UgcmF0ZSAtPiBMTkMgcGVyIEV0aGVyCiAgICBmdW5jdGlvbiBnZXRFeGNoYW5nZVJhdGUoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpewogICAgICAgIC8vMTUwMDAgTE5DIGF0IHBvd2VyIGRheQogICAgICAgIGlmKGZ1bmRpbmdTdGFydCArIDEgKiAxIGRheXMgPiBibG9jay50aW1lc3RhbXApewogICAgICAgICAgICByZXR1cm4gMTUwMDA7CiAgICAgICAgfQogICAgICAgIC8vb3RoZXJ3aXNlIHJlZHVjZSBieSAxICUgZXZlcnkgMTAgbWlsbGlvbiBMTkMgc29sZAogICAgICAgIGVsc2V7CiAgICAgICAgICAgIHVpbnQyNTYgZGVjcmVhc2U9MTAwLShzb2xkQWZ0ZXJQb3dlckhvdXIvMTAwMDAwMDAvMTAwMDAwMDAwMDAwMDAwMDAwMCk7CiAgICAgICAgICAgIGlmKGRlY3JlYXNlPDcwKXsKICAgICAgICAgICAgICAgIGRlY3JlYXNlPTcwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAxMDAwMCpkZWNyZWFzZS8xMDA7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvL3JldHVybnMgaWYgdGhlIGNyb3dkIHNhbGUgaXMgc3RpbGwgb3BlbgogICAgZnVuY3Rpb24gSUNPb3BlbigpIGNvbnN0YW50IHJldHVybnMoYm9vbCl7CiAgICAgICAgaWYoIWZ1bmRpbmcpIHJldHVybiBmYWxzZTsKICAgICAgICBlbHNlIGlmKGJsb2NrLnRpbWVzdGFtcCA8IGZ1bmRpbmdTdGFydCkgcmV0dXJuIGZhbHNlOwogICAgICAgIGVsc2UgaWYoYmxvY2sudGltZXN0YW1wID4gZnVuZGluZ0VuZCkgcmV0dXJuIGZhbHNlOwogICAgICAgIGVsc2UgaWYodG9rZW5DcmVhdGlvbkNhcCA8PSB0b3RhbFRva2VucykgcmV0dXJuIGZhbHNlOwogICAgICAgIGVsc2UgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gQ3Jvd2RmdW5kaW5nOgoKICAgIC8vd2hlbiBzb21lb25lIHNlbmQgZXRoZXIgdG8gdGhpcyBjb250cmFjdAogICAgZnVuY3Rpb24oKSBwYXlhYmxlIGV4dGVybmFsIHsKICAgICAgICAvL25vdCBwb3NzaWJsZSBpZiB0aGUgZnVuZGluZyBoYXMgZW5kZWQKICAgICAgICBpZighZnVuZGluZykgdGhyb3c7CiAgICAgICAgCiAgICAgICAgLy9ub3QgcG9zc2libGUgYmVmb3JlIHRoZSBmdW5kaW5nIHN0YXJ0ZWQKICAgICAgICBpZihibG9jay50aW1lc3RhbXAgPCBmdW5kaW5nU3RhcnQpIHRocm93OwogICAgICAgIAogICAgICAgIC8vbm90IHBvc3NpYmxlIGFmdGVyIHRoZSBmdW5kaW5nIGVuZGVkCiAgICAgICAgaWYoYmxvY2sudGltZXN0YW1wID4gZnVuZGluZ0VuZCkgdGhyb3c7CgogICAgICAgIC8vIERvIG5vdCBhbGxvdyBjcmVhdGluZyAwIG9yIG1vcmUgdGhhbiB0aGUgY2FwIHRva2Vucy4KICAgICAgICBpZihtc2cudmFsdWUgPT0gMCkgdGhyb3c7CiAgICAgICAgCiAgICAgICAgLy9kb24ndCBhbGxvdyB0byBjcmVhdGUgbW9yZSB0b2tlbiB0aGFuIHRoZSBtYXhpbXVtIGNhcAogICAgICAgIGlmKChtc2cudmFsdWUgICogZ2V0RXhjaGFuZ2VSYXRlKCkpID4gKHRva2VuQ3JlYXRpb25DYXAgLSB0b3RhbFRva2VucykpIHRocm93OwoKICAgICAgICAvL2NhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIExOQyB0aGUgc2VuZGVyIHJlY2VpdmVzCiAgICAgICAgdmFyIG51bVRva2VucyA9IG1zZy52YWx1ZSAqIGdldEV4Y2hhbmdlUmF0ZSgpOwogICAgICAgIHRvdGFsVG9rZW5zICs9IG51bVRva2VuczsKICAgICAgICAKICAgICAgICAvL2luY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW4gc29sZCBhZnRlciBwb3dlciBkYXkKICAgICAgICAvL2FsbG93cyB1cyB0byBjYWxjdWxhdGUgdGhlIDEgJSBwcmljZSBpbmNyZWFzZSBwZXIgMTAgbWlsbGlvbiBMTkMgc29sZAogICAgICAgIGlmKGdldEV4Y2hhbmdlUmF0ZSgpIT0xNTAwMCl7CiAgICAgICAgICAgIHNvbGRBZnRlclBvd2VySG91ciArPSBudW1Ub2tlbnM7CiAgICAgICAgfQoKICAgICAgICAvLyBpbmNyZWFzZSB0aGUgYW1vdW50IG9mIHRva2VuIHRoZSBzZW5kZXIgaG9sZHMKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBudW1Ub2tlbnM7CiAgICAgICAgCiAgICAgICAgLy9pbmNyZWFzZSB0aGUgYW1vdW50IG9mIGV0aGVyIHRoZSBzZW5kZXIgcGxlZGdlZCBpbnRvIHRoZSBjb250cmFjdAogICAgICAgIGJhbGFuY2VzRXRoZXJbbXNnLnNlbmRlcl0gKz0gbXNnLnZhbHVlOwogICAgICAgIAogICAgICAgIC8vaWNyZWFzZSB0aGUgYW1vdW50IG9mIHBlb3BsZSB0aGF0IHNlbnQgZXRoZXIgdG8gdGhpcyBjb250cmFjdAogICAgICAgIHRvdGFsUGFydGljaXBhbnRzKz0xOwoKICAgICAgICAvLyBMb2cgdG9rZW4gY3JlYXRpb24KICAgICAgICBUcmFuc2ZlcigwLCBtc2cuc2VuZGVyLCBudW1Ub2tlbnMpOwogICAgfQoKICAgIC8vY2FsbGVkIGFmdGVyIHRoZSBjcm9kc2FsZSBlbmRlZAogICAgLy9uZWVkZWQgdG8gYWxsb3cgZXZlcnlvbmUgdG8gc2VuZCB0aGVpciBMTkMgYXJvdW5kCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIGV4dGVybmFsIHsKICAgICAgICAvLyBub3QgcG9zc2libGUgaWYgdGhlIGZ1bmRpbmcgYWxyZWFkeSBlbmRlZAogICAgICAgIGlmKCFmdW5kaW5nKSB0aHJvdzsKICAgICAgICAKICAgICAgICAvL29ubHkgcG9zc2libGUgaWYgZnVuZGluZyBlbmRlZCBhbmQgdGhlIG1pbmltdW0gY2FwIGlzIHJlYWNoZWQgLSBvcgogICAgICAgIC8vdGhlIHRvdGFsIGFtb3VudCBvZiB0b2tlbiBpcyB0aGUgc2FtZSBhcyB0aGUgbWF4aW11bSBjYXAKICAgICAgICBpZigoYmxvY2sudGltZXN0YW1wIDw9IGZ1bmRpbmdFbmQgfHwKICAgICAgICAgICAgIHRvdGFsVG9rZW5zIDwgdG9rZW5DcmVhdGlvbk1pbikgJiYKICAgICAgICAgICAgKHRvdGFsVG9rZW5zKzUwMDAwMDAwMDAwMDAwMDAwMDAwMDApIDwgdG9rZW5DcmVhdGlvbkNhcCkgdGhyb3c7CgogICAgICAgIC8vIGFsbG93cyB0byB0cmFuZmVyIHRva2VuIHRvIGFub3RoZXIgYWRkcmVzcwogICAgICAgIC8vIGRpc2FibGVzIGJ1eWluZyBMTkMKICAgICAgICBmdW5kaW5nID0gZmFsc2U7CgogICAgICAgIC8vc2VuZCAxMiUgb2YgdGhlIHRva2VuIHRvIHRoZSBkZXZzCiAgICAgICAgLy8xMCAlIGZvciB0aGUgZGV2cwogICAgICAgIC8vMiAlIGZvciB0aGUgYm91bnR5IHBhcnRpY2lwYW50cwogICAgICAgIHVpbnQyNTYgcGVyY2VudE9mVG90YWwgPSAxMjsKICAgICAgICB1aW50MjU2IGFkZGl0aW9uYWxUb2tlbnMgPSB0b3RhbFRva2VucyAqIHBlcmNlbnRPZlRvdGFsIC8gKDEwMCAtIHBlcmNlbnRPZlRvdGFsKTsKICAgICAgICB0b3RhbFRva2VucyArPSBhZGRpdGlvbmFsVG9rZW5zOwogICAgICAgIGJhbGFuY2VzW21hc3Rlcl0gKz0gYWRkaXRpb25hbFRva2VuczsKICAgICAgICBUcmFuc2ZlcigwLCBtYXN0ZXIsIGFkZGl0aW9uYWxUb2tlbnMpOwoKICAgICAgICAvLyBUcmFuc2ZlciBFVEggdG8gdGhlIEJsb2NrbGFuY2VyIGFkZHJlc3MuCiAgICAgICAgaWYgKCFtYXN0ZXIuc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsKICAgIH0KCiAgICAvL2V2ZXJ5b25lIG5lZWRzIHRvIGNhbGwgdGhpcyBmdW5jdGlvbiBzaG91bGQgdGhlIG1pbmltdW0gY2FwIG5vdCBiZSByZWFjaGVkCiAgICAvL3JlZnVuZHMgdGhlIHNlbmRlcgogICAgZnVuY3Rpb24gcmVmdW5kKCkgZXh0ZXJuYWwgewogICAgICAgIC8vIG5vdCBwb3NzaWJsZSBhZnRlciB0aGUgSUNPIHdhcyBmaW5pc2hlZAogICAgICAgIGlmKCFmdW5kaW5nKSB0aHJvdzsKICAgICAgICAKICAgICAgICAvL25vdCBwb3NzaWJsZSBiZWZvcmUgdGhlIElDTyBlbmRlZAogICAgICAgIGlmKGJsb2NrLnRpbWVzdGFtcCA8PSBmdW5kaW5nRW5kKSB0aHJvdzsKICAgICAgICAKICAgICAgICAvL25vdCBwb3NzaWJsZSBpZiBtb3JlIHRva2VuIHdlcmUgY3JlYXRlZCB0aGFuIHRoZSBtaW5pbXVtCiAgICAgICAgaWYodG90YWxUb2tlbnMgPj0gdG9rZW5DcmVhdGlvbk1pbikgdGhyb3c7CgogICAgICAgIHZhciBsbmNWYWx1ZSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwogICAgICAgIHZhciBldGhWYWx1ZSA9IGJhbGFuY2VzRXRoZXJbbXNnLnNlbmRlcl07CiAgICAgICAgaWYgKGxuY1ZhbHVlID09IDApIHRocm93OwogICAgICAgIAogICAgICAgIC8vc2V0IHRoZSBhbW91bnQgb2YgdG9rZW4gdGhlIHNlbmRlciBoYXMgdG8gMAogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICAKICAgICAgICAvL3NldCB0aGUgYW1vdW50IG9mIGV0aGVyIHRoZSBzZW5kZXIgb3ducyB0byAwCiAgICAgICAgYmFsYW5jZXNFdGhlclttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgdG90YWxUb2tlbnMgLT0gbG5jVmFsdWU7CgogICAgICAgIFJlZnVuZChtc2cuc2VuZGVyLCBldGhWYWx1ZSk7CiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoZXRoVmFsdWUpKSB0aHJvdzsKICAgIH0KCQogICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8KICAgIC8vIFRoZSB0cmFuc2ZlckZyb20gbWV0aG9kIGlzIHVzZWQgZm9yIGEgd2l0aGRyYXcgd29ya2Zsb3csIGFsbG93aW5nIGNvbnRyYWN0cyB0byBzZW5kCiAgICAgLy8gdG9rZW5zIG9uIHlvdXIgYmVoYWxmLCBmb3IgZXhhbXBsZSB0byAiZGVwb3NpdCIgdG8gYSBjb250cmFjdCBhZGRyZXNzIGFuZC9vciB0byBjaGFyZ2UKICAgICAvLyBmZWVzIGluIHN1Yi1jdXJyZW5jaWVzOyB0aGUgY29tbWFuZCBzaG91bGQgZmFpbCB1bmxlc3MgdGhlIF9mcm9tIGFjY291bnQgaGFzCiAgICAgLy8gZGVsaWJlcmF0ZWx5IGF1dGhvcml6ZWQgdGhlIHNlbmRlciBvZiB0aGUgbWVzc2FnZSB2aWEgc29tZSBtZWNoYW5pc207IHdlIHByb3Bvc2UKICAgICAvLyB0aGVzZSBzdGFuZGFyZGl6ZWQgQVBJcyBmb3IgYXBwcm92YWw6CiAgICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sYWRkcmVzcyBfdG8sdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAgaWYoZnVuZGluZykgdGhyb3c7CiAgICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX2Ftb3VudAogICAgICAgICAgICAgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudAogICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAKICAgICAgICAgICAgICYmIGJhbGFuY2VzW190b10gKyBfYW1vdW50ID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF9hbW91bnQ7CiAgICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfYW1vdW50OwogICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfYW1vdW50OwogICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgfQogICAgIH0KICAKICAgICAvLyBBbGxvdyBfc3BlbmRlciB0byB3aXRoZHJhdyBmcm9tIHlvdXIgYWNjb3VudCwgbXVsdGlwbGUgdGltZXMsIHVwIHRvIHRoZSBfdmFsdWUgYW1vdW50LgogICAgIC8vIElmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGFnYWluIGl0IG92ZXJ3cml0ZXMgdGhlIGN1cnJlbnQgYWxsb3dhbmNlIHdpdGggX3ZhbHVlLgogICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAgaWYoZnVuZGluZykgdGhyb3c7CiAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX2Ftb3VudDsKICAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICB9CiAgCiAgICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgICB9Cn0='.
	

]
