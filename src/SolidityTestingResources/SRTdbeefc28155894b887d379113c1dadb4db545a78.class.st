Class {
	#name : #SRTdbeefc28155894b887d379113c1dadb4db545a78,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdbeefc28155894b887d379113c1dadb4db545a78 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIAogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBpbnRlcm5hbCB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQp9Cgpjb250cmFjdCB0b2tlbkludGVyZmFjZSB7CglmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IHJhdGVJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gcmVhZFJhdGUoc3RyaW5nIF9jdXJyZW5jeSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBvbmVFdGhlclZhbHVlKTsKfQoKY29udHJhY3QgUkMgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICBUb2tlblNhbGUgdG9rZW5TYWxlQ29udHJhY3Q7CiAgICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWU7CiAgICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOwogICAgCiAgICB1aW50MjU2IHB1YmxpYyBzb2xkVG9rZW5zOwogICAgdWludDI1NiBwdWJsaWMgcmVtYWluaW5nVG9rZW5zOwogICAgCiAgICB1aW50MjU2IHB1YmxpYyBvbmVUb2tlbkluRXVyV2VpOwoKICAgIGZ1bmN0aW9uIFJDKGFkZHJlc3MgX3Rva2VuU2FsZUNvbnRyYWN0LCB1aW50MjU2IF9vbmVUb2tlbkluRXVyV2VpLCB1aW50MjU2IF9yZW1haW5pbmdUb2tlbnMsICB1aW50MjU2IF9zdGFydFRpbWUgLCB1aW50MjU2IF9lbmRUaW1lICkgcHVibGljIHsKICAgICAgICByZXF1aXJlICggX3Rva2VuU2FsZUNvbnRyYWN0ICE9IDAgKTsKICAgICAgICByZXF1aXJlICggX29uZVRva2VuSW5FdXJXZWkgIT0gMCApOwogICAgICAgIHJlcXVpcmUoIF9yZW1haW5pbmdUb2tlbnMgIT0gMCApOwogICAgICAgIAogICAgICAgIHRva2VuU2FsZUNvbnRyYWN0ID0gVG9rZW5TYWxlKF90b2tlblNhbGVDb250cmFjdCk7CiAgICAgICAgCiAgICAgICAgdG9rZW5TYWxlQ29udHJhY3QuYWRkTWVCeVJDKCk7CiAgICAgICAgCiAgICAgICAgc29sZFRva2VucyA9IDA7CiAgICAgICAgcmVtYWluaW5nVG9rZW5zID0gX3JlbWFpbmluZ1Rva2VuczsKICAgICAgICBvbmVUb2tlbkluRXVyV2VpID0gX29uZVRva2VuSW5FdXJXZWk7CiAgICAgICAgCiAgICAgICAgc2V0VGltZVJDKCBfc3RhcnRUaW1lLCBfZW5kVGltZSApOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRUaW1lUkModWludDI1NiBfc3RhcnRUaW1lLCB1aW50MjU2IF9lbmRUaW1lICkgaW50ZXJuYWwgewogICAgICAgIGlmKCBfc3RhcnRUaW1lID09IDAgKSB7CiAgICAgICAgICAgIHN0YXJ0VGltZSA9IHRva2VuU2FsZUNvbnRyYWN0LnN0YXJ0VGltZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICAgICAgfQogICAgICAgIGlmKCBfZW5kVGltZSA9PSAwICkgewogICAgICAgICAgICBlbmRUaW1lID0gdG9rZW5TYWxlQ29udHJhY3QuZW5kVGltZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVuZFRpbWUgPSBfZW5kVGltZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlUb2tlblNhbGVPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gdG9rZW5TYWxlQ29udHJhY3Qub3duZXIoKSApOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFRpbWUodWludDI1NiBfbmV3U3RhcnQsIHVpbnQyNTYgX25ld0VuZCkgcHVibGljIG9ubHlUb2tlblNhbGVPd25lciB7CiAgICAgICAgaWYgKCBfbmV3U3RhcnQgIT0gMCApIHN0YXJ0VGltZSA9IF9uZXdTdGFydDsKICAgICAgICBpZiAoIF9uZXdFbmQgIT0gMCApIGVuZFRpbWUgPSBfbmV3RW5kOwogICAgfQogICAgCiAgICBldmVudCBCdXlSQyhhZGRyZXNzIGluZGV4ZWQgYnV5ZXIsIGJ5dGVzIHRyYWNrSUQsIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgc29sZFRva2VuLCB1aW50MjU2IHZhbHVlVG9rZW5JbkV1cldlaSApOwogICAgCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSggbm93ID4gc3RhcnRUaW1lICk7CiAgICAgICAgcmVxdWlyZSggbm93IDwgZW5kVGltZSApOwogICAgICAgIC8vcmVxdWlyZSggbXNnLnZhbHVlID49IDEqMTAqKjE4KTsgLy8xIEV0aGVyCiAgICAgICAgcmVxdWlyZSggcmVtYWluaW5nVG9rZW5zID4gMCApOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgdG9rZW5BbW91bnQgPSB0b2tlblNhbGVDb250cmFjdC5idXlGcm9tUkMudmFsdWUobXNnLnZhbHVlKShtc2cuc2VuZGVyLCBvbmVUb2tlbkluRXVyV2VpLCByZW1haW5pbmdUb2tlbnMpOwogICAgICAgIAogICAgICAgIHJlbWFpbmluZ1Rva2VucyA9IHJlbWFpbmluZ1Rva2Vucy5zdWIodG9rZW5BbW91bnQpOwogICAgICAgIHNvbGRUb2tlbnMgPSBzb2xkVG9rZW5zLmFkZCh0b2tlbkFtb3VudCk7CiAgICAgICAgCiAgICAgICAgQnV5UkMoIG1zZy5zZW5kZXIsIG1zZy5kYXRhLCBtc2cudmFsdWUsIHRva2VuQW1vdW50LCBvbmVUb2tlbkluRXVyV2VpICk7CiAgICB9Cn0KCmNvbnRyYWN0IFRva2VuU2FsZSBpcyBPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgdG9rZW5JbnRlcmZhY2UgcHVibGljIHRva2VuQ29udHJhY3Q7CiAgICByYXRlSW50ZXJmYWNlIHB1YmxpYyByYXRlQ29udHJhY3Q7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIHdhbGxldDsKICAgIGFkZHJlc3MgcHVibGljIGFkdmlzb3I7CiAgICB1aW50MjU2IHB1YmxpYyBhZHZpc29yRmVlOyAvLyAxID0gMCwxJQogICAgCgl1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgCiAgICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOyAgLy8gc2Vjb25kcyBmcm9tIDE5NzAtMDEtMDFUMDA6MDA6MDBaCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWU7ICAvLyBzZWNvbmRzIGZyb20gMTk3MC0wMS0wMVQwMDowMDowMFoKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHJjOwoKCiAgICBmdW5jdGlvbiBUb2tlblNhbGUoYWRkcmVzcyBfdG9rZW5BZGRyZXNzLCBhZGRyZXNzIF9yYXRlQWRkcmVzcywgdWludDI1NiBfc3RhcnRUaW1lLCB1aW50MjU2IF9lbmRUaW1lKSBwdWJsaWMgewogICAgICAgIHRva2VuQ29udHJhY3QgPSB0b2tlbkludGVyZmFjZShfdG9rZW5BZGRyZXNzKTsKICAgICAgICByYXRlQ29udHJhY3QgPSByYXRlSW50ZXJmYWNlKF9yYXRlQWRkcmVzcyk7CiAgICAgICAgc2V0VGltZShfc3RhcnRUaW1lLCBfZW5kVGltZSk7IAogICAgICAgIHdhbGxldCA9IG1zZy5zZW5kZXI7CiAgICAgICAgYWR2aXNvciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYWR2aXNvckZlZSA9IDAgKiAxMCoqMzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdG9rZW5WYWx1ZUluRXRoZXIodWludDI1NiBfb25lVG9rZW5JbkV1cldlaSkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2IHRrblZhbHVlKSB7CiAgICAgICAgdWludDI1NiBvbmVFdGhlckluRXVyID0gcmF0ZUNvbnRyYWN0LnJlYWRSYXRlKCJldXIiKTsKICAgICAgICB0a25WYWx1ZSA9IF9vbmVUb2tlbkluRXVyV2VpLm11bCgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSkuZGl2KG9uZUV0aGVySW5FdXIpOwogICAgICAgIHJldHVybiB0a25WYWx1ZTsKICAgIH0gCiAgICAKICAgIG1vZGlmaWVyIGlzQnV5YWJsZSgpIHsKICAgICAgICByZXF1aXJlKCBub3cgPiBzdGFydFRpbWUgKTsgLy8gY2hlY2sgaWYgc3RhcnRlZAogICAgICAgIHJlcXVpcmUoIG5vdyA8IGVuZFRpbWUgKTsgLy8gY2hlY2sgaWYgZW5kZWQKICAgICAgICByZXF1aXJlKCBtc2cudmFsdWUgPiAwICk7CgkJCgkJdWludDI1NiByZW1haW5pbmdUb2tlbnMgPSB0b2tlbkNvbnRyYWN0LmJhbGFuY2VPZih0aGlzKTsKICAgICAgICByZXF1aXJlKCByZW1haW5pbmdUb2tlbnMgPiAwICk7IC8vIENoZWNrIGlmIHRoZXJlIGFyZSBhbnkgcmVtYWluaW5nIHRva2VucyAKICAgICAgICBfOwogICAgfQogICAgCiAgICBldmVudCBCdXkoYWRkcmVzcyBidXllciwgdWludDI1NiB2YWx1ZSwgYWRkcmVzcyBpbmRleGVkIGFtYmFzc2Fkb3IpOwogICAgCiAgICBtb2RpZmllciBvbmx5UkMoKSB7CiAgICAgICAgcmVxdWlyZSggcmNbbXNnLnNlbmRlcl0gKTsgLy9jaGVjayBpZiBpcyBhbiBhdXRob3JpemVkIHJjQ29udHJhY3QKICAgICAgICBfOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBidXlGcm9tUkMoYWRkcmVzcyBfYnV5ZXIsIHVpbnQyNTYgX3JjVG9rZW5WYWx1ZSwgdWludDI1NiBfcmVtYWluaW5nVG9rZW5zKSBvbmx5UkMgaXNCdXlhYmxlIHB1YmxpYyBwYXlhYmxlIHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgb25lVG9rZW4gPSAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKTsKICAgICAgICB1aW50MjU2IHRva2VuVmFsdWUgPSB0b2tlblZhbHVlSW5FdGhlcihfcmNUb2tlblZhbHVlKTsKICAgICAgICB1aW50MjU2IHRva2VuQW1vdW50ID0gbXNnLnZhbHVlLm11bChvbmVUb2tlbikuZGl2KHRva2VuVmFsdWUpOwogICAgICAgIGFkZHJlc3MgX2FtYmFzc2Fkb3IgPSBtc2cuc2VuZGVyOwogICAgICAgIAogICAgICAgIAogICAgICAgIHVpbnQyNTYgcmVtYWluaW5nVG9rZW5zID0gdG9rZW5Db250cmFjdC5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgaWYgKCBfcmVtYWluaW5nVG9rZW5zIDwgcmVtYWluaW5nVG9rZW5zICkgewogICAgICAgICAgICByZW1haW5pbmdUb2tlbnMgPSBfcmVtYWluaW5nVG9rZW5zOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAoIHJlbWFpbmluZ1Rva2VucyA8IHRva2VuQW1vdW50ICkgewogICAgICAgICAgICB1aW50MjU2IHJlZnVuZCA9ICh0b2tlbkFtb3VudCAtIHJlbWFpbmluZ1Rva2VucykubXVsKHRva2VuVmFsdWUpLmRpdihvbmVUb2tlbik7CiAgICAgICAgICAgIHRva2VuQW1vdW50ID0gcmVtYWluaW5nVG9rZW5zOwogICAgICAgICAgICBmb3J3YXJkKG1zZy52YWx1ZS1yZWZ1bmQpOwoJCQlyZW1haW5pbmdUb2tlbnMgPSAwOyAvLyBzZXQgcmVtYWluaW5nIHRva2VuIHRvIDAKICAgICAgICAgICAgIF9idXllci50cmFuc2ZlcihyZWZ1bmQpOwogICAgICAgIH0gZWxzZSB7CgkJCXJlbWFpbmluZ1Rva2VucyA9IHJlbWFpbmluZ1Rva2Vucy5zdWIodG9rZW5BbW91bnQpOyAvLyB1cGRhdGUgcmVtYWluaW5nIHRva2VuIHdpdGhvdXQgYm9udXMKICAgICAgICAgICAgZm9yd2FyZChtc2cudmFsdWUpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICB0b2tlbkNvbnRyYWN0LnRyYW5zZmVyKF9idXllciwgdG9rZW5BbW91bnQpOwogICAgICAgIEJ1eShfYnV5ZXIsIHRva2VuQW1vdW50LCBfYW1iYXNzYWRvcik7CgkJCiAgICAgICAgcmV0dXJuIHRva2VuQW1vdW50OyAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZm9yd2FyZCh1aW50MjU2IF9hbW91bnQpIGludGVybmFsIHsKICAgICAgICB1aW50MjU2IGFkdmlzb3JBbW91bnQgPSBfYW1vdW50Lm11bChhZHZpc29yRmVlKS5kaXYoMTAqKjMpOwogICAgICAgIHVpbnQyNTYgd2FsbGV0QW1vdW50ID0gX2Ftb3VudCAtIGFkdmlzb3JBbW91bnQ7CiAgICAgICAgYWR2aXNvci50cmFuc2ZlcihhZHZpc29yQW1vdW50KTsKICAgICAgICB3YWxsZXQudHJhbnNmZXIod2FsbGV0QW1vdW50KTsKICAgIH0KCiAgICBldmVudCBOZXdSQyhhZGRyZXNzIGNvbnRyKTsKICAgIAogICAgZnVuY3Rpb24gYWRkTWVCeVJDKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKHR4Lm9yaWdpbiA9PSBvd25lcik7CiAgICAgICAgCiAgICAgICAgcmNbIG1zZy5zZW5kZXIgXSAgPSB0cnVlOwogICAgICAgIAogICAgICAgIE5ld1JDKG1zZy5zZW5kZXIpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRUaW1lKHVpbnQyNTYgX25ld1N0YXJ0LCB1aW50MjU2IF9uZXdFbmQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGlmICggX25ld1N0YXJ0ICE9IDAgKSBzdGFydFRpbWUgPSBfbmV3U3RhcnQ7CiAgICAgICAgaWYgKCBfbmV3RW5kICE9IDAgKSBlbmRUaW1lID0gX25ld0VuZDsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgb25seU93bmVyT3JSQygpIHsKICAgICAgICByZXF1aXJlKCByY1ttc2cuc2VuZGVyXSB8fCBtc2cuc2VuZGVyID09IG93bmVyICk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhdyhhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB0by50cmFuc2Zlcih2YWx1ZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW5zKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyBvbmx5T3duZXJPclJDIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdG9rZW5Db250cmFjdC50cmFuc2Zlcih0bywgdmFsdWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRUb2tlbkNvbnRyYWN0KGFkZHJlc3MgX3Rva2VuQ29udHJhY3QpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHRva2VuQ29udHJhY3QgPSB0b2tlbkludGVyZmFjZShfdG9rZW5Db250cmFjdCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0V2FsbGV0QWRkcmVzcyhhZGRyZXNzIF93YWxsZXQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldEFkdmlzb3JBZGRyZXNzKGFkZHJlc3MgX2Fkdmlzb3IpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgICAgICBhZHZpc29yID0gX2Fkdmlzb3I7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldEFkdmlzb3JGZWUodWludDI1NiBfYWR2aXNvckZlZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgICAgIGFkdmlzb3JGZWUgPSBfYWR2aXNvckZlZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0UmF0ZUNvbnRyYWN0KGFkZHJlc3MgX3JhdGVBZGRyZXNzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByYXRlQ29udHJhY3QgPSByYXRlSW50ZXJmYWNlKF9yYXRlQWRkcmVzcyk7CiAgICB9CgogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJldmVydCgpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBuZXdSQyh1aW50MjU2IF9vbmVUb2tlbkluRXVyV2VpLCB1aW50MjU2IF9yZW1haW5pbmdUb2tlbnMpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIG5ldyBSQyh0aGlzLCBfb25lVG9rZW5JbkV1cldlaSwgX3JlbWFpbmluZ1Rva2VucywgMCwgMCApOwogICAgfQp9Cgpjb250cmFjdCBQcml2YXRlU2FsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIFRva2VuU2FsZSB0b2tlblNhbGVDb250cmFjdDsKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZTsKICAgIHVpbnQyNTYgaW50ZXJuYWwgY29uc3RhbnQgd2Vla0luU2Vjb25kcyA9IDYwNDgwMDsgLy8gc2Vjb25kcyBpbiBhIHdlZWsKICAgIHVpbnQyNTYgcHVibGljIGVuZFRpbWU7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIHNvbGRUb2tlbnM7CiAgICB1aW50MjU2IHB1YmxpYyByZW1haW5pbmdUb2tlbnM7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIG9uZVRva2VuSW5FdXJXZWk7CgogICAgZnVuY3Rpb24gUHJpdmF0ZVNhbGUoYWRkcmVzcyBfdG9rZW5TYWxlQ29udHJhY3QsIHVpbnQyNTYgX29uZVRva2VuSW5FdXJXZWksIHVpbnQyNTYgX3JlbWFpbmluZ1Rva2VucywgIHVpbnQyNTYgX3N0YXJ0VGltZSAsIHVpbnQyNTYgX2VuZFRpbWUgKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKCBfdG9rZW5TYWxlQ29udHJhY3QgIT0gMCApOwogICAgICAgIHJlcXVpcmUgKCBfb25lVG9rZW5JbkV1cldlaSAhPSAwICk7CiAgICAgICAgcmVxdWlyZSggX3JlbWFpbmluZ1Rva2VucyAhPSAwICk7CiAgICAgICAgCiAgICAgICAgdG9rZW5TYWxlQ29udHJhY3QgPSBUb2tlblNhbGUoX3Rva2VuU2FsZUNvbnRyYWN0KTsKICAgICAgICAKICAgICAgICB0b2tlblNhbGVDb250cmFjdC5hZGRNZUJ5UkMoKTsKICAgICAgICAKICAgICAgICBzb2xkVG9rZW5zID0gMDsKICAgICAgICByZW1haW5pbmdUb2tlbnMgPSBfcmVtYWluaW5nVG9rZW5zOwogICAgICAgIG9uZVRva2VuSW5FdXJXZWkgPSBfb25lVG9rZW5JbkV1cldlaTsKICAgICAgICAKICAgICAgICBzZXRUaW1lUkMoIF9zdGFydFRpbWUsIF9lbmRUaW1lICk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFRpbWVSQyh1aW50MjU2IF9zdGFydFRpbWUsIHVpbnQyNTYgX2VuZFRpbWUgKSBpbnRlcm5hbCB7CiAgICAgICAgaWYoIF9zdGFydFRpbWUgPT0gMCApIHsKICAgICAgICAgICAgc3RhcnRUaW1lID0gdG9rZW5TYWxlQ29udHJhY3Quc3RhcnRUaW1lKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RhcnRUaW1lID0gX3N0YXJ0VGltZTsKICAgICAgICB9CiAgICAgICAgaWYoIF9lbmRUaW1lID09IDAgKSB7CiAgICAgICAgICAgIGVuZFRpbWUgPSB0b2tlblNhbGVDb250cmFjdC5lbmRUaW1lKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZW5kVGltZSA9IF9lbmRUaW1lOwogICAgICAgIH0KICAgIH0KICAgIAogICAgbW9kaWZpZXIgb25seVRva2VuU2FsZU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB0b2tlblNhbGVDb250cmFjdC5vd25lcigpICk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0VGltZSh1aW50MjU2IF9uZXdTdGFydCwgdWludDI1NiBfbmV3RW5kKSBwdWJsaWMgb25seVRva2VuU2FsZU93bmVyIHsKICAgICAgICBpZiAoIF9uZXdTdGFydCAhPSAwICkgc3RhcnRUaW1lID0gX25ld1N0YXJ0OwogICAgICAgIGlmICggX25ld0VuZCAhPSAwICkgZW5kVGltZSA9IF9uZXdFbmQ7CiAgICB9CiAgICAKICAgIGV2ZW50IEJ1eVJDKGFkZHJlc3MgaW5kZXhlZCBidXllciwgYnl0ZXMgdHJhY2tJRCwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBzb2xkVG9rZW4sIHVpbnQyNTYgdmFsdWVUb2tlbkluRXVyV2VpICk7CiAgICAKICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKCBub3cgPiBzdGFydFRpbWUgKTsKICAgICAgICByZXF1aXJlKCBub3cgPCBlbmRUaW1lICk7CiAgICAgICAgLy9yZXF1aXJlKCBtc2cudmFsdWUgPj0gMSoxMCoqMTgpOyAvLzEgRXRoZXIKICAgICAgICByZXF1aXJlKCByZW1haW5pbmdUb2tlbnMgPiAwICk7CiAgICAgICAgCiAgICAgICAgdWludDI1NiB0b2tlbkFtb3VudCA9IHRva2VuU2FsZUNvbnRyYWN0LmJ1eUZyb21SQy52YWx1ZShtc2cudmFsdWUpKG1zZy5zZW5kZXIsIG9uZVRva2VuSW5FdXJXZWksIHJlbWFpbmluZ1Rva2Vucyk7CiAgICAgICAgCiAgICAgICAgcmVtYWluaW5nVG9rZW5zID0gcmVtYWluaW5nVG9rZW5zLnN1Yih0b2tlbkFtb3VudCk7CiAgICAgICAgc29sZFRva2VucyA9IHNvbGRUb2tlbnMuYWRkKHRva2VuQW1vdW50KTsKICAgICAgICAKICAgICAgICB1aW50MjU2IGJvbnVzUmF0ZTsKICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyowICApIHsgYm9udXNSYXRlID0gMTAwMDsgfQogICAgICAgIGlmKCBub3cgPiBzdGFydFRpbWUgKyB3ZWVrSW5TZWNvbmRzKjEgICkgeyBib251c1JhdGUgPSA4MDA7IH0KICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyoyICApIHsgYm9udXNSYXRlID0gNjAwOyB9CiAgICAgICAgaWYoIG5vdyA+IHN0YXJ0VGltZSArIHdlZWtJblNlY29uZHMqMyAgKSB7IGJvbnVzUmF0ZSA9IDQwMDsgfQogICAgICAgIGlmKCBub3cgPiBzdGFydFRpbWUgKyB3ZWVrSW5TZWNvbmRzKjQgICkgeyBib251c1JhdGUgPSAyMDA7IH0KICAgICAgICBpZiggbm93ID4gc3RhcnRUaW1lICsgd2Vla0luU2Vjb25kcyo1ICApIHsgYm9udXNSYXRlID0gMDsgfQogICAgICAgIAogICAgICAgIHRva2VuU2FsZUNvbnRyYWN0LndpdGhkcmF3VG9rZW5zKG1zZy5zZW5kZXIsIHRva2VuQW1vdW50Lm11bCggYm9udXNSYXRlICkuZGl2KDEwKio0KSApOwogICAgICAgIAogICAgICAgIEJ1eVJDKCBtc2cuc2VuZGVyLCBtc2cuZGF0YSwgbXNnLnZhbHVlLCB0b2tlbkFtb3VudCwgb25lVG9rZW5JbkV1cldlaSApOwogICAgfQp9'.
	

]
