Class {
	#name : #SRTf805f3432f4569d6049c60036845959c8e398b15,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf805f3432f4569d6049c60036845959c8e398b15 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBKdXN0Q29pbiB7CgoJLy8gc2NhbGVGYWN0b3IgaXMgdXNlZCB0byBjb252ZXJ0IEV0aGVyIGludG8gdG9rZW5zIGFuZCB2aWNlLXZlcnNhOiB0aGV5J3JlIG9mIGRpZmZlcmVudAoJLy8gb3JkZXJzIG9mIG1hZ25pdHVkZSwgaGVuY2UgdGhlIG5lZWQgdG8gYnJpZGdlIGJldHdlZW4gdGhlIHR3by4KCXVpbnQyNTYgY29uc3RhbnQgc2NhbGVGYWN0b3IgPSAweDEwMDAwMDAwMDAwMDAwMDAwOyAgLy8gMl42NAoKCS8vIENSUiA9IDgwJQoJLy8gQ1JSIGlzIENhc2ggUmVzZXJ2ZSBSYXRpbyAoaW4gdGhpcyBjYXNlIENyeXB0byBSZXNlcnZlIFJhdGlvKS4KCS8vIEZvciBtb3JlIG9uIHRoaXM6IGNoZWNrIG91dCBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SZXNlcnZlX3JlcXVpcmVtZW50CglpbnQgY29uc3RhbnQgY3JyX24gPSA0OyAvLyBDUlIgbnVtZXJhdG9yCglpbnQgY29uc3RhbnQgY3JyX2QgPSA1OyAvLyBDUlIgZGVub21pbmF0b3IKCgkvLyBUaGUgcHJpY2UgY29lZmZpY2llbnQuIENob3NlbiBzdWNoIHRoYXQgYXQgMSB0b2tlbiB0b3RhbCBzdXBwbHkKCS8vIHRoZSBhbW91bnQgaW4gcmVzZXJ2ZSBpcyAwLjggZXRoZXIgYW5kIHRva2VuIHByaWNlIGlzIDEgRXRoZXIuCglpbnQgY29uc3RhbnQgcHJpY2VfY29lZmYgPSAtMHg2NzhhZGVhY2I5ODVjYjA2OwoKCS8vIFR5cGljYWwgdmFsdWVzIHRoYXQgd2UgaGF2ZSB0byBkZWNsYXJlLgoJc3RyaW5nIGNvbnN0YW50IHB1YmxpYyBuYW1lID0gIkp1c3RDb2luIjsKCXN0cmluZyBjb25zdGFudCBwdWJsaWMgc3ltYm9sID0gIkp1c3REIjsKCXVpbnQ4IGNvbnN0YW50IHB1YmxpYyBkZWNpbWFscyA9IDE4OwoKCS8vIEFycmF5IGJldHdlZW4gZWFjaCBhZGRyZXNzIGFuZCB0aGVpciBudW1iZXIgb2YgdG9rZW5zLgoJbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyB0b2tlbkJhbGFuY2U7CgkJCgkvLyBBcnJheSBiZXR3ZWVuIGVhY2ggYWRkcmVzcyBhbmQgaG93IG11Y2ggRXRoZXIgaGFzIGJlZW4gcGFpZCBvdXQgdG8gaXQuCgkvLyBOb3RlIHRoYXQgdGhpcyBpcyBzY2FsZWQgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJbWFwcGluZyhhZGRyZXNzID0+IGludDI1NikgcHVibGljIHBheW91dHM7CgoJLy8gVmFyaWFibGUgdHJhY2tpbmcgaG93IG1hbnkgdG9rZW5zIGFyZSBpbiBleGlzdGVuY2Ugb3ZlcmFsbC4KCXVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKCS8vIEFnZ3JlZ2F0ZSBzdW0gb2YgYWxsIHBheW91dHMuCgkvLyBOb3RlIHRoYXQgdGhpcyBpcyBzY2FsZWQgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJaW50MjU2IHRvdGFsUGF5b3V0czsKCgkvLyBWYXJpYWJsZSB0cmFja2luZyBob3cgbXVjaCBFdGhlciBlYWNoIHRva2VuIGlzIGN1cnJlbnRseSB3b3J0aC4KCS8vIE5vdGUgdGhhdCB0aGlzIGlzIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgl1aW50MjU2IGVhcm5pbmdzUGVyVG9rZW47CgkKCS8vIEN1cnJlbnQgY29udHJhY3QgYmFsYW5jZSBpbiBFdGhlcgoJdWludDI1NiBwdWJsaWMgY29udHJhY3RCYWxhbmNlOwogICAgYWRkcmVzcyBvd25lcjsKICAgIAoJZnVuY3Rpb24gSnVzdENvaW4oKSBwdWJsaWMgewoJICAgIG93bmVyID0gbXNnLnNlbmRlcjsKCX0KCgkvLyBUaGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBhcmUgdXNlZCBieSB0aGUgZnJvbnQtZW5kIGZvciBkaXNwbGF5IHB1cnBvc2VzLgoKCS8vIFJldHVybnMgdGhlIG51bWJlciBvZiB0b2tlbnMgY3VycmVudGx5IGhlbGQgYnkgX293bmVyLgoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CgkJcmV0dXJuIHRva2VuQmFsYW5jZVtfb3duZXJdOwoJfQoKCS8vIFdpdGhkcmF3cyBhbGwgZGl2aWRlbmRzIGhlbGQgYnkgdGhlIGNhbGxlciBzZW5kaW5nIHRoZSB0cmFuc2FjdGlvbiwgdXBkYXRlcwoJLy8gdGhlIHJlcXVpc2l0ZSBnbG9iYWwgdmFyaWFibGVzLCBhbmQgdHJhbnNmZXJzIEV0aGVyIGJhY2sgdG8gdGhlIGNhbGxlci4KCWZ1bmN0aW9uIHdpdGhkcmF3KCkgcHVibGljIHsKCQkvLyBSZXRyaWV2ZSB0aGUgZGl2aWRlbmRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWRkcmVzcyB0aGUgcmVxdWVzdCBjYW1lIGZyb20uCgkJdmFyIGJhbGFuY2UgPSBkaXZpZGVuZHMobXNnLnNlbmRlcik7CgkJCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5LCBpbmNyZW1lbnRpbmcgdGhlIHJlcXVlc3QgYWRkcmVzcyBieSBgYmFsYW5jZWAuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIFNlbmQgdGhlIGRpdmlkZW5kcyB0byB0aGUgYWRkcmVzcyB0aGF0IHJlcXVlc3RlZCB0aGUgd2l0aGRyYXcuCgkJY29udHJhY3RCYWxhbmNlID0gc3ViKGNvbnRyYWN0QmFsYW5jZSwgYmFsYW5jZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsgb3duZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKCQltc2cuc2VuZGVyLnRyYW5zZmVyKGJhbGFuY2UpOwoJfQoKCS8vIENvbnZlcnRzIHRoZSBFdGhlciBhY2NydWVkIGFzIGRpdmlkZW5kcyBiYWNrIGludG8gRVBZIHRva2VucyB3aXRob3V0IGhhdmluZyB0bwoJLy8gd2l0aGRyYXcgaXQgZmlyc3QuIFNhdmVzIG9uIGdhcyBhbmQgcG90ZW50aWFsIHByaWNlIHNwaWtlIGxvc3MuCglmdW5jdGlvbiByZWludmVzdERpdmlkZW5kcygpIHB1YmxpYyB7CgkJLy8gUmV0cmlldmUgdGhlIGRpdmlkZW5kcyBhc3NvY2lhdGVkIHdpdGggdGhlIGFkZHJlc3MgdGhlIHJlcXVlc3QgY2FtZSBmcm9tLgoJCXZhciBiYWxhbmNlID0gZGl2aWRlbmRzKG1zZy5zZW5kZXIpOwoJCQoJCS8vIFVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSwgaW5jcmVtZW50aW5nIHRoZSByZXF1ZXN0IGFkZHJlc3MgYnkgYGJhbGFuY2VgLgoJCS8vIFNpbmNlIHRoaXMgaXMgZXNzZW50aWFsbHkgYSBzaG9ydGN1dCB0byB3aXRoZHJhd2luZyBhbmQgcmVpbnZlc3RpbmcsIHRoaXMgc3RlcCBzdGlsbCBob2xkcy4KCQlwYXlvdXRzW21zZy5zZW5kZXJdICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEluY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gQXNzaWduIGJhbGFuY2UgdG8gYSBuZXcgdmFyaWFibGUuCgkJdWludCB2YWx1ZV8gPSAodWludCkgKGJhbGFuY2UpOwoJCQoJCS8vIElmIHlvdXIgZGl2aWRlbmRzIGFyZSB3b3J0aCBsZXNzIHRoYW4gMSBzemFibywgb3IgbW9yZSB0aGFuIGEgbWlsbGlvbiBFdGhlcgoJCS8vIChpbiB3aGljaCBjYXNlLCB3aHkgYXJlIHlvdSBldmVuIGhlcmUpLCBhYm9ydC4KCQlpZiAodmFsdWVfIDwgMC4wMDAwMDEgZXRoZXIgfHwgdmFsdWVfID4gMTAwMDAwMCBldGhlcikKCQkJcmV2ZXJ0KCk7CgkJCQoJCS8vIG1zZy5zZW5kZXIgaXMgdGhlIGFkZHJlc3Mgb2YgdGhlIGNhbGxlci4KCQl2YXIgc2VuZGVyID0gbXNnLnNlbmRlcjsKCQkKCQkvLyBBIHRlbXBvcmFyeSByZXNlcnZlIHZhcmlhYmxlIHVzZWQgZm9yIGNhbGN1bGF0aW5nIHRoZSByZXdhcmQgdGhlIGhvbGRlciBnZXRzIGZvciBidXlpbmcgdG9rZW5zLgoJCS8vIChZZXMsIHRoZSBidXllciByZWNlaXZlcyBhIHBhcnQgb2YgdGhlIGRpc3RyaWJ1dGlvbiBhcyB3ZWxsISkKCQl2YXIgcmVzID0gcmVzZXJ2ZSgpIC0gYmFsYW5jZTsKCgkJLy8gNSUgb2YgdGhlIHRvdGFsIEV0aGVyIHNlbnQgaXMgdXNlZCB0byBwYXkgZXhpc3RpbmcgaG9sZGVycy4KCQl2YXIgZmVlID0gZGl2KHZhbHVlXywgMjApOwoJCQoJCS8vIFRoZSBhbW91bnQgb2YgRXRoZXIgdXNlZCB0byBwdXJjaGFzZSBuZXcgdG9rZW5zIGZvciB0aGUgY2FsbGVyLgoJCXZhciBudW1FdGhlciA9IHZhbHVlXyAtIGZlZTsKCQkKCQkvLyBUaGUgbnVtYmVyIG9mIHRva2VucyB3aGljaCBjYW4gYmUgcHVyY2hhc2VkIGZvciBudW1FdGhlci4KCQl2YXIgbnVtVG9rZW5zID0gY2FsY3VsYXRlRGl2aWRlbmRUb2tlbnMobnVtRXRoZXIsIGJhbGFuY2UpOwoJCQoJCS8vIFRoZSBidXllciBmZWUsIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgkJdmFyIGJ1eWVyRmVlID0gZmVlICogc2NhbGVGYWN0b3I7CgkJCgkJLy8gQ2hlY2sgdGhhdCB3ZSBoYXZlIHRva2VucyBpbiBleGlzdGVuY2UgKHRoaXMgc2hvdWxkIGFsd2F5cyBiZSB0cnVlKSwgb3IKCQkvLyBlbHNlIHlvdSdyZSBnb25uYSBoYXZlIGEgYmFkIHRpbWUuCgkJaWYgKHRvdGFsU3VwcGx5ID4gMCkgewoJCQkvLyBDb21wdXRlIHRoZSBib251cyBjby1lZmZpY2llbnQgZm9yIGFsbCBleGlzdGluZyBob2xkZXJzIGFuZCB0aGUgYnV5ZXIuCgkJCS8vIFRoZSBidXllciByZWNlaXZlcyBwYXJ0IG9mIHRoZSBkaXN0cmlidXRpb24gZm9yIGVhY2ggdG9rZW4gYm91Z2h0IGluIHRoZQoJCQkvLyBzYW1lIHdheSB0aGV5IHdvdWxkIGhhdmUgaWYgdGhleSBib3VnaHQgZWFjaCB0b2tlbiBpbmRpdmlkdWFsbHkuCgkJCXZhciBib251c0NvRWZmID0KCQkJICAgIChzY2FsZUZhY3RvciAtIChyZXMgKyBudW1FdGhlcikgKiBudW1Ub2tlbnMgKiBzY2FsZUZhY3RvciAvICh0b3RhbFN1cHBseSArIG51bVRva2VucykgLyBudW1FdGhlcikKCQkJICAgICogKHVpbnQpKGNycl9kKSAvICh1aW50KShjcnJfZC1jcnJfbik7CgkJCQkKCQkJLy8gVGhlIHRvdGFsIHJld2FyZCB0byBiZSBkaXN0cmlidXRlZCBhbW9uZ3N0IHRoZSBtYXNzZXMgaXMgdGhlIGZlZSAoaW4gRXRoZXIpCgkJCS8vIG11bHRpcGxpZWQgYnkgdGhlIGJvbnVzIGNvLWVmZmljaWVudC4KCQkJdmFyIGhvbGRlclJld2FyZCA9IGZlZSAqIGJvbnVzQ29FZmY7CgkJCQoJCQlidXllckZlZSAtPSBob2xkZXJSZXdhcmQ7CgoJCQkvLyBGZWUgaXMgZGlzdHJpYnV0ZWQgdG8gYWxsIGV4aXN0aW5nIHRva2VuIGhvbGRlcnMgYmVmb3JlIHRoZSBuZXcgdG9rZW5zIGFyZSBwdXJjaGFzZWQuCgkJCS8vIHJld2FyZFBlclNoYXJlIGlzIHRoZSBhbW91bnQgZ2FpbmVkIHBlciB0b2tlbiB0aGFua3MgdG8gdGhpcyBidXktaW4uCgkJCXZhciByZXdhcmRQZXJTaGFyZSA9IGhvbGRlclJld2FyZCAvIHRvdGFsU3VwcGx5OwoJCQkKCQkJLy8gVGhlIEV0aGVyIHZhbHVlIHBlciB0b2tlbiBpcyBpbmNyZWFzZWQgcHJvcG9ydGlvbmFsbHkuCgkJCWVhcm5pbmdzUGVyVG9rZW4gKz0gcmV3YXJkUGVyU2hhcmU7CgkJfQoJCQoJCS8vIEFkZCB0aGUgbnVtVG9rZW5zIHdoaWNoIHdlcmUganVzdCBjcmVhdGVkIHRvIHRoZSB0b3RhbCBzdXBwbHkuIFdlJ3JlIGEgY3J5cHRvIGNlbnRyYWwgYmFuayEKCQl0b3RhbFN1cHBseSA9IGFkZCh0b3RhbFN1cHBseSwgbnVtVG9rZW5zKTsKCQkKCQkvLyBBc3NpZ24gdGhlIHRva2VucyB0byB0aGUgYmFsYW5jZSBvZiB0aGUgYnV5ZXIuCgkJdG9rZW5CYWxhbmNlW3NlbmRlcl0gPSBhZGQodG9rZW5CYWxhbmNlW3NlbmRlcl0sIG51bVRva2Vucyk7CgkJCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXQgYXJyYXkgc28gdGhhdCB0aGUgYnV5ZXIgY2Fubm90IGNsYWltIGRpdmlkZW5kcyBvbiBwcmV2aW91cyBwdXJjaGFzZXMuCgkJLy8gQWxzbyBpbmNsdWRlIHRoZSBmZWUgcGFpZCBmb3IgZW50ZXJpbmcgdGhlIHNjaGVtZS4KCQkvLyBGaXJzdCB3ZSBjb21wdXRlIGhvdyBtdWNoIHdhcyBqdXN0IHBhaWQgb3V0IHRvIHRoZSBidXllci4uLgoJCXZhciBwYXlvdXREaWZmICA9IChpbnQyNTYpICgoZWFybmluZ3NQZXJUb2tlbiAqIG51bVRva2VucykgLSBidXllckZlZSk7CgkJCgkJLy8gVGhlbiB3ZSB1cGRhdGUgdGhlIHBheW91dHMgYXJyYXkgZm9yIHRoZSBidXllciB3aXRoIHRoaXMgYW1vdW50Li4uCgkJcGF5b3V0c1tzZW5kZXJdICs9IHBheW91dERpZmY7CgkJCgkJLy8gQW5kIHRoZW4gd2UgZmluYWxseSBhZGQgaXQgdG8gdGhlIHZhcmlhYmxlIHRyYWNraW5nIHRoZSB0b3RhbCBhbW91bnQgc3BlbnQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgICAgKz0gcGF5b3V0RGlmZjsKCQkKCX0KCgkvLyBTZWxscyB5b3VyIHRva2VucyBmb3IgRXRoZXIuIFRoaXMgRXRoZXIgaXMgYXNzaWduZWQgdG8gdGhlIGNhbGxlcnMgZW50cnkKCS8vIGluIHRoZSB0b2tlbkJhbGFuY2UgYXJyYXksIGFuZCB0aGVyZWZvcmUgaXMgc2hvd24gYXMgYSBkaXZpZGVuZC4gQSBzZWNvbmQKCS8vIGNhbGwgdG8gd2l0aGRyYXcoKSBtdXN0IGJlIG1hZGUgdG8gaW52b2tlIHRoZSB0cmFuc2ZlciBvZiBFdGhlciBiYWNrIHRvIHlvdXIgYWRkcmVzcy4KCWZ1bmN0aW9uIHNlbGxNeVRva2VucygpIHB1YmxpYyB7CgkJdmFyIGJhbGFuY2UgPSBiYWxhbmNlT2YobXNnLnNlbmRlcik7CgkJc2VsbChiYWxhbmNlKTsKCX0KCgkvLyBUaGUgc2xhbS10aGUtYnV0dG9uIGVzY2FwZSBoYXRjaC4gU2VsbHMgdGhlIGNhbGxlcnMgdG9rZW5zIGZvciBFdGhlciwgdGhlbiBpbW1lZGlhdGVseQoJLy8gaW52b2tlcyB0aGUgd2l0aGRyYXcoKSBmdW5jdGlvbiwgc2VuZGluZyB0aGUgcmVzdWx0aW5nIEV0aGVyIHRvIHRoZSBjYWxsZXJzIGFkZHJlc3MuCiAgICBmdW5jdGlvbiBnZXRNZU91dE9mSGVyZSgpIHB1YmxpYyB7CgkJc2VsbE15VG9rZW5zKCk7CiAgICAgICAgd2l0aGRyYXcoKTsKCX0KCgkvLyBHYXRla2VlcGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIHRoZSBhbW91bnQgb2YgRXRoZXIgYmVpbmcgc2VudCBpc24ndCBlaXRoZXIKCS8vIHRvbyBzbWFsbCBvciB0b28gbGFyZ2UuIElmIGl0IHBhc3NlcywgZ29lcyBkaXJlY3QgdG8gYnV5KCkuCglmdW5jdGlvbiBmdW5kKCkgcGF5YWJsZSBwdWJsaWMgewoJCS8vIERvbid0IGFsbG93IGZvciBmdW5kaW5nIGlmIHRoZSBhbW91bnQgb2YgRXRoZXIgc2VudCBpcyBsZXNzIHRoYW4gMSBzemFiby4KCQlpZiAobXNnLnZhbHVlID4gMC4wMDAwMDEgZXRoZXIpIHsKCQkgICAgY29udHJhY3RCYWxhbmNlID0gYWRkKGNvbnRyYWN0QmFsYW5jZSwgbXNnLnZhbHVlKTsKCQkJYnV5KCk7CgkJfSBlbHNlIHsKCQkJcmV2ZXJ0KCk7CgkJfQogICAgfQoKCS8vIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgKGR5bmFtaWMpIHByaWNlIG9mIGJ1eWluZyBhIGZpbm5leSB3b3J0aCBvZiB0b2tlbnMuCglmdW5jdGlvbiBidXlQcmljZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CgkJcmV0dXJuIGdldFRva2Vuc0ZvckV0aGVyKDEgZmlubmV5KTsKCX0KCgkvLyBGdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIChkeW5hbWljKSBwcmljZSBvZiBzZWxsaW5nIGEgc2luZ2xlIHRva2VuLgoJZnVuY3Rpb24gc2VsbFByaWNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICB2YXIgZXRoID0gZ2V0RXRoZXJGb3JUb2tlbnMoMSBmaW5uZXkpOwogICAgICAgIHZhciBmZWUgPSBkaXYoZXRoLCAxMCk7CiAgICAgICAgcmV0dXJuIGV0aCAtIGZlZTsKICAgIH0KCgkvLyBDYWxjdWxhdGUgdGhlIGN1cnJlbnQgZGl2aWRlbmRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgY2FsbGVyIGFkZHJlc3MuIFRoaXMgaXMgdGhlIG5ldCByZXN1bHQKCS8vIG9mIG11bHRpcGx5aW5nIHRoZSBudW1iZXIgb2YgdG9rZW5zIGhlbGQgYnkgdGhlaXIgY3VycmVudCB2YWx1ZSBpbiBFdGhlciBhbmQgc3VidHJhY3RpbmcgdGhlCgkvLyBFdGhlciB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gcGFpZCBvdXQuCglmdW5jdGlvbiBkaXZpZGVuZHMoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGFtb3VudCkgewoJCXJldHVybiAodWludDI1NikgKChpbnQyNTYpKGVhcm5pbmdzUGVyVG9rZW4gKiB0b2tlbkJhbGFuY2VbX293bmVyXSkgLSBwYXlvdXRzW19vd25lcl0pIC8gc2NhbGVGYWN0b3I7Cgl9CgoJLy8gVmVyc2lvbiBvZiB3aXRoZHJhdyB0aGF0IGV4dHJhY3RzIHRoZSBkaXZpZGVuZHMgYW5kIHNlbmRzIHRoZSBFdGhlciB0byB0aGUgY2FsbGVyLgoJLy8gVGhpcyBpcyBvbmx5IHVzZWQgaW4gdGhlIGNhc2Ugd2hlbiB0aGVyZSBpcyBubyB0cmFuc2FjdGlvbiBkYXRhLCBhbmQgdGhhdCBzaG91bGQgYmUKCS8vIHF1aXRlIHJhcmUgdW5sZXNzIGludGVyYWN0aW5nIGRpcmVjdGx5IHdpdGggdGhlIHNtYXJ0IGNvbnRyYWN0LgoJZnVuY3Rpb24gd2l0aGRyYXdPbGQoYWRkcmVzcyB0bykgcHVibGljIHsKCQkvLyBSZXRyaWV2ZSB0aGUgZGl2aWRlbmRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWRkcmVzcyB0aGUgcmVxdWVzdCBjYW1lIGZyb20uCgkJdmFyIGJhbGFuY2UgPSBkaXZpZGVuZHMobXNnLnNlbmRlcik7CgkJCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5LCBpbmNyZW1lbnRpbmcgdGhlIHJlcXVlc3QgYWRkcmVzcyBieSBgYmFsYW5jZWAuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIFNlbmQgdGhlIGRpdmlkZW5kcyB0byB0aGUgYWRkcmVzcyB0aGF0IHJlcXVlc3RlZCB0aGUgd2l0aGRyYXcuCgkJY29udHJhY3RCYWxhbmNlID0gc3ViKGNvbnRyYWN0QmFsYW5jZSwgYmFsYW5jZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsgb3duZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKCQl0by50cmFuc2ZlcihiYWxhbmNlKTsJCQoJfQoKCS8vIEludGVybmFsIGJhbGFuY2UgZnVuY3Rpb24sIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBkeW5hbWljIHJlc2VydmUgdmFsdWUuCglmdW5jdGlvbiBiYWxhbmNlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBhbW91bnQpIHsKCQkvLyBtc2cudmFsdWUgaXMgdGhlIGFtb3VudCBvZiBFdGhlciBzZW50IGJ5IHRoZSB0cmFuc2FjdGlvbi4KCQlyZXR1cm4gY29udHJhY3RCYWxhbmNlIC0gbXNnLnZhbHVlOwoJfQoKCWZ1bmN0aW9uIGJ1eSgpIGludGVybmFsIHsKCQkvLyBBbnkgdHJhbnNhY3Rpb24gb2YgbGVzcyB0aGFuIDEgc3phYm8gaXMgbGlrZWx5IHRvIGJlIHdvcnRoIGxlc3MgdGhhbiB0aGUgZ2FzIHVzZWQgdG8gc2VuZCBpdC4KCQlpZiAobXNnLnZhbHVlIDwgMC4wMDAwMDEgZXRoZXIgfHwgbXNnLnZhbHVlID4gMTAwMDAwMCBldGhlcikKCQkJcmV2ZXJ0KCk7CgkJCQkJCQoJCS8vIG1zZy5zZW5kZXIgaXMgdGhlIGFkZHJlc3Mgb2YgdGhlIGNhbGxlci4KCQl2YXIgc2VuZGVyID0gbXNnLnNlbmRlcjsKCQkKCQkvLyA1JSBvZiB0aGUgdG90YWwgRXRoZXIgc2VudCBpcyB1c2VkIHRvIHBheSBleGlzdGluZyBob2xkZXJzLgoJCXZhciBmZWUgPSBkaXYobXNnLnZhbHVlLCAyMCk7CgkJCgkJLy8gVGhlIGFtb3VudCBvZiBFdGhlciB1c2VkIHRvIHB1cmNoYXNlIG5ldyB0b2tlbnMgZm9yIHRoZSBjYWxsZXIuCgkJdmFyIG51bUV0aGVyID0gbXNnLnZhbHVlIC0gZmVlOwoJCQoJCS8vIFRoZSBudW1iZXIgb2YgdG9rZW5zIHdoaWNoIGNhbiBiZSBwdXJjaGFzZWQgZm9yIG51bUV0aGVyLgoJCXZhciBudW1Ub2tlbnMgPSBnZXRUb2tlbnNGb3JFdGhlcihudW1FdGhlcik7CgkJCgkJLy8gVGhlIGJ1eWVyIGZlZSwgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCQl2YXIgYnV5ZXJGZWUgPSBmZWUgKiBzY2FsZUZhY3RvcjsKCQkKCQkvLyBDaGVjayB0aGF0IHdlIGhhdmUgdG9rZW5zIGluIGV4aXN0ZW5jZSAodGhpcyBzaG91bGQgYWx3YXlzIGJlIHRydWUpLCBvcgoJCS8vIGVsc2UgeW91J3JlIGdvbm5hIGhhdmUgYSBiYWQgdGltZS4KCQlpZiAodG90YWxTdXBwbHkgPiAwKSB7CgkJCS8vIENvbXB1dGUgdGhlIGJvbnVzIGNvLWVmZmljaWVudCBmb3IgYWxsIGV4aXN0aW5nIGhvbGRlcnMgYW5kIHRoZSBidXllci4KCQkJLy8gVGhlIGJ1eWVyIHJlY2VpdmVzIHBhcnQgb2YgdGhlIGRpc3RyaWJ1dGlvbiBmb3IgZWFjaCB0b2tlbiBib3VnaHQgaW4gdGhlCgkJCS8vIHNhbWUgd2F5IHRoZXkgd291bGQgaGF2ZSBpZiB0aGV5IGJvdWdodCBlYWNoIHRva2VuIGluZGl2aWR1YWxseS4KCQkJdmFyIGJvbnVzQ29FZmYgPQoJCQkgICAgKHNjYWxlRmFjdG9yIC0gKHJlc2VydmUoKSArIG51bUV0aGVyKSAqIG51bVRva2VucyAqIHNjYWxlRmFjdG9yIC8gKHRvdGFsU3VwcGx5ICsgbnVtVG9rZW5zKSAvIG51bUV0aGVyKQoJCQkgICAgKiAodWludCkoY3JyX2QpIC8gKHVpbnQpKGNycl9kLWNycl9uKTsKCQkJCQoJCQkvLyBUaGUgdG90YWwgcmV3YXJkIHRvIGJlIGRpc3RyaWJ1dGVkIGFtb25nc3QgdGhlIG1hc3NlcyBpcyB0aGUgZmVlIChpbiBFdGhlcikKCQkJLy8gbXVsdGlwbGllZCBieSB0aGUgYm9udXMgY28tZWZmaWNpZW50LgoJCQl2YXIgaG9sZGVyUmV3YXJkID0gZmVlICogYm9udXNDb0VmZjsKCQkJCgkJCWJ1eWVyRmVlIC09IGhvbGRlclJld2FyZDsKCgkJCS8vIEZlZSBpcyBkaXN0cmlidXRlZCB0byBhbGwgZXhpc3RpbmcgdG9rZW4gaG9sZGVycyBiZWZvcmUgdGhlIG5ldyB0b2tlbnMgYXJlIHB1cmNoYXNlZC4KCQkJLy8gcmV3YXJkUGVyU2hhcmUgaXMgdGhlIGFtb3VudCBnYWluZWQgcGVyIHRva2VuIHRoYW5rcyB0byB0aGlzIGJ1eS1pbi4KCQkJdmFyIHJld2FyZFBlclNoYXJlID0gaG9sZGVyUmV3YXJkIC8gdG90YWxTdXBwbHk7CgkJCQoJCQkvLyBUaGUgRXRoZXIgdmFsdWUgcGVyIHRva2VuIGlzIGluY3JlYXNlZCBwcm9wb3J0aW9uYWxseS4KCQkJZWFybmluZ3NQZXJUb2tlbiArPSByZXdhcmRQZXJTaGFyZTsKCQkJCgkJfQoKCQkvLyBBZGQgdGhlIG51bVRva2VucyB3aGljaCB3ZXJlIGp1c3QgY3JlYXRlZCB0byB0aGUgdG90YWwgc3VwcGx5LiBXZSdyZSBhIGNyeXB0byBjZW50cmFsIGJhbmshCgkJdG90YWxTdXBwbHkgPSBhZGQodG90YWxTdXBwbHksIG51bVRva2Vucyk7CgoJCS8vIEFzc2lnbiB0aGUgdG9rZW5zIHRvIHRoZSBiYWxhbmNlIG9mIHRoZSBidXllci4KCQl0b2tlbkJhbGFuY2Vbc2VuZGVyXSA9IGFkZCh0b2tlbkJhbGFuY2Vbc2VuZGVyXSwgbnVtVG9rZW5zKTsKCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXQgYXJyYXkgc28gdGhhdCB0aGUgYnV5ZXIgY2Fubm90IGNsYWltIGRpdmlkZW5kcyBvbiBwcmV2aW91cyBwdXJjaGFzZXMuCgkJLy8gQWxzbyBpbmNsdWRlIHRoZSBmZWUgcGFpZCBmb3IgZW50ZXJpbmcgdGhlIHNjaGVtZS4KCQkvLyBGaXJzdCB3ZSBjb21wdXRlIGhvdyBtdWNoIHdhcyBqdXN0IHBhaWQgb3V0IHRvIHRoZSBidXllci4uLgoJCXZhciBwYXlvdXREaWZmID0gKGludDI1NikgKChlYXJuaW5nc1BlclRva2VuICogbnVtVG9rZW5zKSAtIGJ1eWVyRmVlKTsKCQkKCQkvLyBUaGVuIHdlIHVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSBmb3IgdGhlIGJ1eWVyIHdpdGggdGhpcyBhbW91bnQuLi4KCQlwYXlvdXRzW3NlbmRlcl0gKz0gcGF5b3V0RGlmZjsKCQkKCQkvLyBBbmQgdGhlbiB3ZSBmaW5hbGx5IGFkZCBpdCB0byB0aGUgdmFyaWFibGUgdHJhY2tpbmcgdGhlIHRvdGFsIGFtb3VudCBzcGVudCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyAgICArPSBwYXlvdXREaWZmOwoJCQoJfQoKCS8vIFNlbGwgZnVuY3Rpb24gdGhhdCB0YWtlcyB0b2tlbnMgYW5kIGNvbnZlcnRzIHRoZW0gaW50byBFdGhlci4gQWxzbyBjb21lcyB3aXRoIGEgMTAlIGZlZQoJLy8gdG8gZGlzY291cmFnaW5nIGR1bXBpbmcsIGFuZCBtZWFucyB0aGF0IGlmIHNvbWVvbmUgbmVhciB0aGUgdG9wIHNlbGxzLCB0aGUgZmVlIGRpc3RyaWJ1dGVkCgkvLyB3aWxsIGJlICpzaWduaWZpY2FudCouCglmdW5jdGlvbiBzZWxsKHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB7CgkgICAgLy8gQ2FsY3VsYXRlIHRoZSBhbW91bnQgb2YgRXRoZXIgdGhhdCB0aGUgaG9sZGVycyB0b2tlbnMgc2VsbCBmb3IgYXQgdGhlIGN1cnJlbnQgc2VsbCBwcmljZS4KCQl2YXIgbnVtRXRoZXJzQmVmb3JlRmVlID0gZ2V0RXRoZXJGb3JUb2tlbnMoYW1vdW50KTsKCQkKCQkvLyA1JSBvZiB0aGUgcmVzdWx0aW5nIEV0aGVyIGlzIHVzZWQgdG8gcGF5IHJlbWFpbmluZyBob2xkZXJzLgogICAgICAgIHZhciBmZWUgPSBkaXYobnVtRXRoZXJzQmVmb3JlRmVlLCAyMCk7CgkJCgkJLy8gTmV0IEV0aGVyIGZvciB0aGUgc2VsbGVyIGFmdGVyIHRoZSBmZWUgaGFzIGJlZW4gc3VidHJhY3RlZC4KICAgICAgICB2YXIgbnVtRXRoZXJzID0gbnVtRXRoZXJzQmVmb3JlRmVlIC0gZmVlOwoJCQoJCS8vICpSZW1vdmUqIHRoZSBudW1Ub2tlbnMgd2hpY2ggd2VyZSBqdXN0IHNvbGQgZnJvbSB0aGUgdG90YWwgc3VwcGx5LiBXZSdyZSAvZGVmaW5pdGVseS8gYSBjcnlwdG8gY2VudHJhbCBiYW5rLgoJCXRvdGFsU3VwcGx5ID0gc3ViKHRvdGFsU3VwcGx5LCBhbW91bnQpOwoJCQogICAgICAgIC8vIFJlbW92ZSB0aGUgdG9rZW5zIGZyb20gdGhlIGJhbGFuY2Ugb2YgdGhlIGJ1eWVyLgoJCXRva2VuQmFsYW5jZVttc2cuc2VuZGVyXSA9IHN1Yih0b2tlbkJhbGFuY2VbbXNnLnNlbmRlcl0sIGFtb3VudCk7CgogICAgICAgIC8vIFVwZGF0ZSB0aGUgcGF5b3V0IGFycmF5IHNvIHRoYXQgdGhlIHNlbGxlciBjYW5ub3QgY2xhaW0gZnV0dXJlIGRpdmlkZW5kcyB1bmxlc3MgdGhleSBidXkgYmFjayBpbi4KCQkvLyBGaXJzdCB3ZSBjb21wdXRlIGhvdyBtdWNoIHdhcyBqdXN0IHBhaWQgb3V0IHRvIHRoZSBzZWxsZXIuLi4KCQl2YXIgcGF5b3V0RGlmZiA9IChpbnQyNTYpIChlYXJuaW5nc1BlclRva2VuICogYW1vdW50ICsgKG51bUV0aGVycyAqIHNjYWxlRmFjdG9yKSk7CgkJCiAgICAgICAgLy8gV2UgcmVkdWNlIHRoZSBhbW91bnQgcGFpZCBvdXQgdG8gdGhlIHNlbGxlciAodGhpcyBlZmZlY3RpdmVseSByZXNldHMgdGhlaXIgcGF5b3V0cyB2YWx1ZSB0byB6ZXJvLAoJCS8vIHNpbmNlIHRoZXkncmUgc2VsbGluZyBhbGwgb2YgdGhlaXIgdG9rZW5zKS4gVGhpcyBtYWtlcyBzdXJlIHRoZSBzZWxsZXIgaXNuJ3QgZGlzYWR2YW50YWdlZCBpZgoJCS8vIHRoZXkgZGVjaWRlIHRvIGJ1eSBiYWNrIGluLgoJCXBheW91dHNbbXNnLnNlbmRlcl0gLT0gcGF5b3V0RGlmZjsJCQoJCQoJCS8vIERlY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KICAgICAgICB0b3RhbFBheW91dHMgLT0gcGF5b3V0RGlmZjsKCQkKCQkvLyBDaGVjayB0aGF0IHdlIGhhdmUgdG9rZW5zIGluIGV4aXN0ZW5jZSAodGhpcyBpcyBhIGJpdCBvZiBhbiBpcnJlbGV2YW50IGNoZWNrIHNpbmNlIHdlJ3JlCgkJLy8gc2VsbGluZyB0b2tlbnMsIGJ1dCBpdCBndWFyZHMgYWdhaW5zdCBkaXZpc2lvbiBieSB6ZXJvKS4KCQlpZiAodG90YWxTdXBwbHkgPiAwKSB7CgkJCS8vIFNjYWxlIHRoZSBFdGhlciB0YWtlbiBhcyB0aGUgc2VsbGluZyBmZWUgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJCQl2YXIgZXRoZXJGZWUgPSBmZWUgKiBzY2FsZUZhY3RvcjsKCQkJCgkJCS8vIEZlZSBpcyBkaXN0cmlidXRlZCB0byBhbGwgcmVtYWluaW5nIHRva2VuIGhvbGRlcnMuCgkJCS8vIHJld2FyZFBlclNoYXJlIGlzIHRoZSBhbW91bnQgZ2FpbmVkIHBlciB0b2tlbiB0aGFua3MgdG8gdGhpcyBzZWxsLgoJCQl2YXIgcmV3YXJkUGVyU2hhcmUgPSBldGhlckZlZSAvIHRvdGFsU3VwcGx5OwoJCQkKCQkJLy8gVGhlIEV0aGVyIHZhbHVlIHBlciB0b2tlbiBpcyBpbmNyZWFzZWQgcHJvcG9ydGlvbmFsbHkuCgkJCWVhcm5pbmdzUGVyVG9rZW4gPSBhZGQoZWFybmluZ3NQZXJUb2tlbiwgcmV3YXJkUGVyU2hhcmUpOwoJCX0KCX0KCQoJLy8gRHluYW1pYyB2YWx1ZSBvZiBFdGhlciBpbiByZXNlcnZlLCBhY2NvcmRpbmcgdG8gdGhlIENSUiByZXF1aXJlbWVudC4KCWZ1bmN0aW9uIHJlc2VydmUoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGFtb3VudCkgewoJCXJldHVybiBzdWIoYmFsYW5jZSgpLAoJCQkgKCh1aW50MjU2KSAoKGludDI1NikgKGVhcm5pbmdzUGVyVG9rZW4gKiB0b3RhbFN1cHBseSkgLSB0b3RhbFBheW91dHMpIC8gc2NhbGVGYWN0b3IpKTsKCX0KCgkvLyBDYWxjdWxhdGVzIHRoZSBudW1iZXIgb2YgdG9rZW5zIHRoYXQgY2FuIGJlIGJvdWdodCBmb3IgYSBnaXZlbiBhbW91bnQgb2YgRXRoZXIsIGFjY29yZGluZyB0byB0aGUKCS8vIGR5bmFtaWMgcmVzZXJ2ZSBhbmQgdG90YWxTdXBwbHkgdmFsdWVzIChkZXJpdmVkIGZyb20gdGhlIGJ1eSBhbmQgc2VsbCBwcmljZXMpLgoJZnVuY3Rpb24gZ2V0VG9rZW5zRm9yRXRoZXIodWludDI1NiBldGhlcnZhbHVlKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b2tlbnMpIHsKCQlyZXR1cm4gc3ViKGZpeGVkRXhwKGZpeGVkTG9nKHJlc2VydmUoKSArIGV0aGVydmFsdWUpKmNycl9uL2Nycl9kICsgcHJpY2VfY29lZmYpLCB0b3RhbFN1cHBseSk7Cgl9CgoJLy8gU2VtYW50aWNhbGx5IHNpbWlsYXIgdG8gZ2V0VG9rZW5zRm9yRXRoZXIsIGJ1dCBzdWJ0cmFjdHMgdGhlIGNhbGxlcnMgYmFsYW5jZSBmcm9tIHRoZSBhbW91bnQgb2YgRXRoZXIgcmV0dXJuZWQgZm9yIGNvbnZlcnNpb24uCglmdW5jdGlvbiBjYWxjdWxhdGVEaXZpZGVuZFRva2Vucyh1aW50MjU2IGV0aGVydmFsdWUsIHVpbnQyNTYgc3VidmFsdWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2VucykgewoJCXJldHVybiBzdWIoZml4ZWRFeHAoZml4ZWRMb2cocmVzZXJ2ZSgpIC0gc3VidmFsdWUgKyBldGhlcnZhbHVlKSpjcnJfbi9jcnJfZCArIHByaWNlX2NvZWZmKSwgdG90YWxTdXBwbHkpOwoJfQoKCS8vIENvbnZlcnRzIGEgbnVtYmVyIHRva2VucyBpbnRvIGFuIEV0aGVyIHZhbHVlLgoJZnVuY3Rpb24gZ2V0RXRoZXJGb3JUb2tlbnModWludDI1NiB0b2tlbnMpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGV0aGVydmFsdWUpIHsKCQkvLyBIb3cgbXVjaCByZXNlcnZlIEV0aGVyIGRvIHdlIGhhdmUgbGVmdCBpbiB0aGUgY29udHJhY3Q/CgkJdmFyIHJlc2VydmVBbW91bnQgPSByZXNlcnZlKCk7CgoJCS8vIElmIHlvdSdyZSB0aGUgSGlnaGxhbmRlciAob3IgYmFnaG9sZGVyKSwgeW91IGdldCBUaGUgUHJpemUuIEV2ZXJ5dGhpbmcgbGVmdCBpbiB0aGUgdmF1bHQuCgkJaWYgKHRva2VucyA9PSB0b3RhbFN1cHBseSkKCQkJcmV0dXJuIHJlc2VydmVBbW91bnQ7CgoJCS8vIElmIHRoZXJlIHdvdWxkIGJlIGV4Y2VzcyBFdGhlciBsZWZ0IGFmdGVyIHRoZSB0cmFuc2FjdGlvbiB0aGlzIGlzIGNhbGxlZCB3aXRoaW4sIHJldHVybiB0aGUgRXRoZXIKCQkvLyBjb3JyZXNwb25kaW5nIHRvIHRoZSBlcXVhdGlvbiBpbiBEciBKb2NoZW4gSG9lbmlja2UncyBvcmlnaW5hbCBQb256aSBwYXBlciwgd2hpY2ggY2FuIGJlIGZvdW5kCgkJLy8gYXQgaHR0cHM6Ly90ZXN0LmpvY2hlbi1ob2VuaWNrZS5kZS9ldGgvcG9ueml0b2tlbi8gaW4gdGhlIHRoaXJkIGVxdWF0aW9uLCB3aXRoIHRoZSBDUlIgbnVtZXJhdG9yIAoJCS8vIGFuZCBkZW5vbWluYXRvciBhbHRlcmVkIHRvIDEgYW5kIDIgcmVzcGVjdGl2ZWx5LgoJCXJldHVybiBzdWIocmVzZXJ2ZUFtb3VudCwgZml4ZWRFeHAoKGZpeGVkTG9nKHRvdGFsU3VwcGx5IC0gdG9rZW5zKSAtIHByaWNlX2NvZWZmKSAqIGNycl9kL2Nycl9uKSk7Cgl9CgoJLy8gWW91IGRvbid0IGNhcmUgYWJvdXQgdGhlc2UsIGJ1dCBpZiB5b3UgcmVhbGx5IGRvIHRoZXkncmUgaGV4IHZhbHVlcyBmb3IgCgkvLyBjby1lZmZpY2llbnRzIHVzZWQgdG8gc2ltdWxhdGUgYXBwcm94aW1hdGlvbnMgb2YgdGhlIGxvZyBhbmQgZXhwIGZ1bmN0aW9ucy4KCWludDI1NiAgY29uc3RhbnQgb25lICAgICAgICA9IDB4MTAwMDAwMDAwMDAwMDAwMDA7Cgl1aW50MjU2IGNvbnN0YW50IHNxcnQyICAgICAgPSAweDE2YTA5ZTY2N2YzYmNjOTA4OwoJdWludDI1NiBjb25zdGFudCBzcXJ0ZG90NSAgID0gMHgwYjUwNGYzMzNmOWRlNjQ4NDsKCWludDI1NiAgY29uc3RhbnQgbG4yICAgICAgICA9IDB4MGIxNzIxN2Y3ZDFjZjc5YWM7CglpbnQyNTYgIGNvbnN0YW50IGxuMl82NGRvdDUgPSAweDJjYjUzZjA5ZjA1Y2M2MjdjODsKCWludDI1NiAgY29uc3RhbnQgYzEgICAgICAgICA9IDB4MWZmZmZmZmZmZmY5ZGFjOWI7CglpbnQyNTYgIGNvbnN0YW50IGMzICAgICAgICAgPSAweDBhYWFhYWFhYzE2ODc3OTA4OwoJaW50MjU2ICBjb25zdGFudCBjNSAgICAgICAgID0gMHgwNjY2NjY0ZTVlOWZhMGM5OTsKCWludDI1NiAgY29uc3RhbnQgYzcgICAgICAgICA9IDB4MDQ5MjU0MDI2YTc2MzBhY2Y7CglpbnQyNTYgIGNvbnN0YW50IGM5ICAgICAgICAgPSAweDAzOGJkNzVlZDM3NzUzZDY4OwoJaW50MjU2ICBjb25zdGFudCBjMTEgICAgICAgID0gMHgwMzI4NGEwYzE0NjEwOTI0ZjsKCgkvLyBUaGUgcG9seW5vbWlhbCBSID0gYzEqeCArIGMzKnheMyArIC4uLiArIGMxMSAqIHheMTEKCS8vIGFwcHJveGltYXRlcyB0aGUgZnVuY3Rpb24gbG9nKDEreCktbG9nKDEteCkKCS8vIEhlbmNlIFIocykgPSBsb2coKDErcykvKDEtcykpID0gbG9nKGEpCglmdW5jdGlvbiBmaXhlZExvZyh1aW50MjU2IGEpIGludGVybmFsIHB1cmUgcmV0dXJucyAoaW50MjU2IGxvZykgewoJCWludDMyIHNjYWxlID0gMDsKCQl3aGlsZSAoYSA+IHNxcnQyKSB7CgkJCWEgLz0gMjsKCQkJc2NhbGUrKzsKCQl9CgkJd2hpbGUgKGEgPD0gc3FydGRvdDUpIHsKCQkJYSAqPSAyOwoJCQlzY2FsZS0tOwoJCX0KCQlpbnQyNTYgcyA9ICgoKGludDI1NikoYSkgLSBvbmUpICogb25lKSAvICgoaW50MjU2KShhKSArIG9uZSk7CgkJdmFyIHogPSAocypzKSAvIG9uZTsKCQlyZXR1cm4gc2NhbGUgKiBsbjIgKwoJCQkocyooYzEgKyAoeiooYzMgKyAoeiooYzUgKyAoeiooYzcgKyAoeiooYzkgKyAoeipjMTEvb25lKSkKCQkJCS9vbmUpKS9vbmUpKS9vbmUpKS9vbmUpKS9vbmUpOwoJfQoKCWludDI1NiBjb25zdGFudCBjMiA9ICAweDAyYWFhYWFhYWFhMDE1ZGIwOwoJaW50MjU2IGNvbnN0YW50IGM0ID0gLTB4MDAwYjYwYjYwODA4Mzk5ZDE7CglpbnQyNTYgY29uc3RhbnQgYzYgPSAgMHgwMDAwNDU1OTU2YmNjZGQwNjsKCWludDI1NiBjb25zdGFudCBjOCA9IC0weDAwMDAwMWI4OTNhZDA0YjNhOwoJCgkvLyBUaGUgcG9seW5vbWlhbCBSID0gMiArIGMyKnheMiArIGM0KnheNCArIC4uLgoJLy8gYXBwcm94aW1hdGVzIHRoZSBmdW5jdGlvbiB4KihleHAoeCkrMSkvKGV4cCh4KS0xKQoJLy8gSGVuY2UgZXhwKHgpID0gKFIoeCkreCkvKFIoeCkteCkKCWZ1bmN0aW9uIGZpeGVkRXhwKGludDI1NiBhKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYgZXhwKSB7CgkJaW50MjU2IHNjYWxlID0gKGEgKyAobG4yXzY0ZG90NSkpIC8gbG4yIC0gNjQ7CgkJYSAtPSBzY2FsZSpsbjI7CgkJaW50MjU2IHogPSAoYSphKSAvIG9uZTsKCQlpbnQyNTYgUiA9ICgoaW50MjU2KSgyKSAqIG9uZSkgKwoJCQkoeiooYzIgKyAoeiooYzQgKyAoeiooYzYgKyAoeipjOC9vbmUpKS9vbmUpKS9vbmUpKS9vbmUpOwoJCWV4cCA9ICh1aW50MjU2KSAoKChSICsgYSkgKiBvbmUpIC8gKFIgLSBhKSk7CgkJaWYgKHNjYWxlID49IDApCgkJCWV4cCA8PD0gc2NhbGU7CgkJZWxzZQoJCQlleHAgPj49IC1zY2FsZTsKCQlyZXR1cm4gZXhwOwoJfQoJCgkvLyBUaGUgYmVsb3cgYXJlIHNhZmVtYXRoIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgZm91ciBhcml0aG1ldGljIG9wZXJhdG9ycwoJLy8gZGVzaWduZWQgdG8gZXhwbGljaXRseSBwcmV2ZW50IG92ZXItIGFuZCB1bmRlci1mbG93cyBvZiBpbnRlZ2VyIHZhbHVlcy4KCglmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCWlmIChhID09IDApIHsKCQkJcmV0dXJuIDA7CgkJfQoJCXVpbnQyNTYgYyA9IGEgKiBiOwoJCWFzc2VydChjIC8gYSA9PSBiKTsKCQlyZXR1cm4gYzsKCX0KCglmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCS8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAoJCXVpbnQyNTYgYyA9IGEgLyBiOwoJCS8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCgkJcmV0dXJuIGM7Cgl9CgoJZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCQlhc3NlcnQoYiA8PSBhKTsKCQlyZXR1cm4gYSAtIGI7Cgl9CgoJZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCQl1aW50MjU2IGMgPSBhICsgYjsKCQlhc3NlcnQoYyA+PSBhKTsKCQlyZXR1cm4gYzsKCX0KCgkvLyBUaGlzIGFsbG93cyB5b3UgdG8gYnV5IHRva2VucyBieSBzZW5kaW5nIEV0aGVyIGRpcmVjdGx5IHRvIHRoZSBzbWFydCBjb250cmFjdAoJLy8gd2l0aG91dCBpbmNsdWRpbmcgYW55IHRyYW5zYWN0aW9uIGRhdGEgKHVzZWZ1bCBmb3IsIHNheSwgbW9iaWxlIHdhbGxldCBhcHBzKS4KCWZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKCQkvLyBtc2cudmFsdWUgaXMgdGhlIGFtb3VudCBvZiBFdGhlciBzZW50IGJ5IHRoZSB0cmFuc2FjdGlvbi4KCQlpZiAobXNnLnZhbHVlID4gMCkgewoJCQlmdW5kKCk7CgkJfSBlbHNlIHsKCQkJd2l0aGRyYXdPbGQobXNnLnNlbmRlcik7CgkJfQoJfQp9'.
	

]
