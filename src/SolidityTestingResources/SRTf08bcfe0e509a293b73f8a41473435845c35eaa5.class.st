Class {
	#name : #SRTf08bcfe0e509a293b73f8a41473435845c35eaa5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf08bcfe0e509a293b73f8a41473435845c35eaa5 >> base64 [
	^ 'bGlicmFyeSBBcnJheUxpYiB7CiAgLy8gSW5zZXJ0cyB0byBrZWVwIGFycmF5IHNvcnRlZCAoYXNzdW1lcyBpbnB1dCBhcnJheSBpcyBzb3J0ZWQpCglmdW5jdGlvbiBpbnNlcnRJblBsYWNlKHVpbnQ4W10gc3RvcmFnZSBzZWxmLCB1aW50OCBuKSB7CgkJdWludDggaW5zZXJ0aW5nSW5kZXggPSAwOwoKCQl3aGlsZSAoc2VsZi5sZW5ndGggPiAwICYmIGluc2VydGluZ0luZGV4IDwgc2VsZi5sZW5ndGggJiYgc2VsZltpbnNlcnRpbmdJbmRleF0gPCBuKSB7CgkJCWluc2VydGluZ0luZGV4ICs9IDE7CgkJfQoKCQlzZWxmLmxlbmd0aCArPSAxOwoJCWZvciAodWludDggaSA9IHVpbnQ4KHNlbGYubGVuZ3RoKSAtIDE7IGkgPiBpbnNlcnRpbmdJbmRleDsgaS0tKSB7CgkJCXNlbGZbaV0gPSBzZWxmW2kgLSAxXTsKCQl9CgoJCXNlbGZbaW5zZXJ0aW5nSW5kZXhdID0gbjsKCX0KfQoKCmxpYnJhcnkgRGVja0xpYiB7Cgl1c2luZyBBcnJheUxpYiBmb3IgdWludDhbXTsKCgllbnVtIFN1aXQgeyBTcGFkZXMsIEhlYXJ0cywgQ2x1YnMsIERpYW1vbmRzIH0KCXVpbnQ4IGNvbnN0YW50IGNhcmRzUGVyU3VpdCA9IDEzOwoJdWludDggY29uc3RhbnQgc3VpdHMgPSA0OwoJdWludDggY29uc3RhbnQgdG90YWxDYXJkcyA9IGNhcmRzUGVyU3VpdCAqIHN1aXRzOwoKCXN0cnVjdCBEZWNrIHsKCQl1aW50OFtdIHVzZWRDYXJkczsgLy8gYWx3YXlzIGhhcyB0byBiZSBzb3J0ZWQKCQlhZGRyZXNzIHBsYXllcjsKCQl1aW50MjU2IGdhbWVJRDsKCX0KCglmdW5jdGlvbiBpbml0KERlY2sgc3RvcmFnZSBzZWxmLCB1aW50MjU2IGdhbWVJRCkgIHsKCQlzZWxmLnVzZWRDYXJkcyA9IG5ldyB1aW50OFtdKDApOwoJCXNlbGYucGxheWVyID0gbXNnLnNlbmRlcjsKCQlzZWxmLmdhbWVJRCA9IGdhbWVJRDsKCX0KCglmdW5jdGlvbiBnZXRDYXJkKERlY2sgc3RvcmFnZSBzZWxmLCB1aW50MjU2IGJsb2NrTnVtYmVyKSAgcmV0dXJucyAodWludDgpICB7CgkJdWludCBjYXJkSW5kZXggPSBzZWxmLnVzZWRDYXJkcy5sZW5ndGg7CgkJaWYgKGNhcmRJbmRleCA+PSB0b3RhbENhcmRzKSB0aHJvdzsKCQl1aW50OCByID0gdWludDgoZ2V0UmFuZG9tTnVtYmVyKGJsb2NrTnVtYmVyLCBzZWxmLnBsYXllciwgc2VsZi5nYW1lSUQsIGNhcmRJbmRleCwgdG90YWxDYXJkcyAtIGNhcmRJbmRleCkpOwoKCQlmb3IgKHVpbnQ4IGkgPSAwOyBpIDwgY2FyZEluZGV4OyBpKyspIHsKCQkJaWYgKHNlbGYudXNlZENhcmRzW2ldIDw9IHIpIHIgKz0gMTsKCQl9CgoJCXNlbGYudXNlZENhcmRzLmluc2VydEluUGxhY2Uocik7CgoJCXJldHVybiByOwoJfQoKCWZ1bmN0aW9uIGNhcmREZXNjcmlwdGlvbih1aW50OCBzZWxmKSBjb25zdGFudCByZXR1cm5zIChTdWl0LCB1aW50OCkgewoJCXJldHVybiAoU3VpdChzZWxmIC8gY2FyZHNQZXJTdWl0KSwgY2FyZEZhY2V2YWx1ZShzZWxmKSk7Cgl9CgoJZnVuY3Rpb24gY2FyZEVtb2ppZmllZCh1aW50OCBzZWxmKSBjb25zdGFudCByZXR1cm5zICh1aW50OCwgc3RyaW5nKSB7CgkJc3RyaW5nIG1lbW9yeSBlbW9qaVN1aXQ7CgoJCXZhciAoc3VpdCwgbnVtYmVyKSA9IGNhcmREZXNjcmlwdGlvbihzZWxmKTsKCQlpZiAoc3VpdCA9PSBTdWl0LkNsdWJzKSBlbW9qaVN1aXQgPSAi4pmj77iPIjsKCQllbHNlIGlmIChzdWl0ID09IFN1aXQuRGlhbW9uZHMpIGVtb2ppU3VpdCA9ICLimabvuI8iOwoJCWVsc2UgaWYgKHN1aXQgPT0gU3VpdC5IZWFydHMpIGVtb2ppU3VpdCA9ICLimaXvuI8iOwoJCWVsc2UgaWYgKHN1aXQgPT0gU3VpdC5TcGFkZXMpIGVtb2ppU3VpdCA9ICLimaDvuI8iOwoKCQlyZXR1cm4gKG51bWJlciwgZW1vamlTdWl0KTsKCX0KCglmdW5jdGlvbiBjYXJkRmFjZXZhbHVlKHVpbnQ4IHNlbGYpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KSB7CgkJcmV0dXJuIDEgKyBzZWxmICUgY2FyZHNQZXJTdWl0OwoJfQoKCWZ1bmN0aW9uIGJsYWNramFja1ZhbHVlKHVpbnQ4IHNlbGYpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KSB7CgkJdWludDggY2FyZFZhbHVlID0gY2FyZEZhY2V2YWx1ZShzZWxmKTsKCQlyZXR1cm4gY2FyZFZhbHVlIDwgMTAgPyBjYXJkVmFsdWUgOiAxMDsKCX0KCglmdW5jdGlvbiBnZXRSYW5kb21OdW1iZXIodWludCBiLCBhZGRyZXNzIHBsYXllciwgdWludDI1NiBnYW1lSUQsIHVpbnQgbiwgdWludCBtKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CgkJLy8gVXNlcyBibG9ja2hhc2ggYXMgcmFuZG9tbmVzcyBzb3VyY2UuCgkJLy8gQ3JlZGl0czogaHR0cHM6Ly9naXRodWIuY29tL0J1bmppbi9Sb3VsZXRoL2Jsb2IvbWFzdGVyL1Byb3ZhYmx5X0ZhaXJfTm9fQ2hlYXRpbmcubWQKCQlieXRlczMyIGJsb2NrSGFzaCA9IGJsb2NrLmJsb2NraGFzaChiKTsKCQlpZiAoYmxvY2tIYXNoID09IDB4MCkgdGhyb3c7CgkJcmV0dXJuIHVpbnQodWludDI1NihrZWNjYWsyNTYoYmxvY2tIYXNoLCBwbGF5ZXIsIGdhbWVJRCwgbikpICUgbSk7CgoJfQp9CgpsaWJyYXJ5IEdhbWVMaWIgewogIHVzaW5nIERlY2tMaWIgZm9yICo7CgogIHVpbnQ4IGNvbnN0YW50IGhvdXNlTGltaXQgPSAxNzsKICB1aW50OCBjb25zdGFudCB0YXJnZXQgPSAyMTsKCiAgZW51bSBDb21wYXJhaXNvblJlc3VsdCB7IEZpcnN0LCBTZWNvbmQsIFRpZSB9CiAgZW51bSBHYW1lU3RhdGUgeyBJbml0aWFsQ2FyZHMsIFdhaXRpbmcsIEhpdCwgU3RhbmQsIEZpbmlzaGVkIH0KICBlbnVtIEdhbWVSZXN1bHQgeyBPbmdvaW5nLCBIb3VzZSwgVGllLCBQbGF5ZXIsIFBsYXllck5hdHVyYWwgfQoKICBzdHJ1Y3QgR2FtZSB7CiAgICBhZGRyZXNzIHBsYXllcjsKICAgIHVpbnQyNTYgYmV0OwogICAgdWludDI1NiBwYXlvdXQ7CiAgICB1aW50MjU2IGdhbWVJRDsKCiAgICBEZWNrTGliLkRlY2sgZGVjazsKICAgIHVpbnQ4W10gaG91c2VDYXJkczsKICAgIHVpbnQ4W10gcGxheWVyQ2FyZHM7CgogICAgdWludDI1NiBhY3Rpb25CbG9jazsgLy8gQmxvY2sgb24gd2hpY2ggY29tbWl0bWVudCB0byBwZXJmb3JtIGFuIGFjdGlvbiBoYXBwZW5zLgoKICAgIEdhbWVTdGF0ZSBzdGF0ZTsKICAgIEdhbWVSZXN1bHQgcmVzdWx0OwoKICAgIGJvb2wgY2xvc2VkOwogIH0KCiAgZnVuY3Rpb24gaW5pdChHYW1lIHN0b3JhZ2Ugc2VsZiwgdWludDI1NiBnYW1lSUQpIHsKICAgIHNlbGYucGxheWVyID0gbXNnLnNlbmRlcjsKICAgIHNlbGYuYmV0ID0gbXNnLnZhbHVlOwogICAgc2VsZi5wYXlvdXQgPSAwOwogICAgc2VsZi5ob3VzZUNhcmRzID0gbmV3IHVpbnQ4W10oMCk7CiAgICBzZWxmLnBsYXllckNhcmRzID0gbmV3IHVpbnQ4W10oMCk7CiAgICBzZWxmLmFjdGlvbkJsb2NrID0gYmxvY2subnVtYmVyOwogICAgc2VsZi5zdGF0ZSA9IEdhbWVTdGF0ZS5Jbml0aWFsQ2FyZHM7CiAgICBzZWxmLnJlc3VsdCA9IEdhbWVSZXN1bHQuT25nb2luZzsKICAgIHNlbGYuY2xvc2VkID0gZmFsc2U7CiAgICBzZWxmLmdhbWVJRCA9IGdhbWVJRDsKCiAgICBzZWxmLmRlY2suaW5pdChnYW1lSUQpOwogIH0KCiAgZnVuY3Rpb24gdGljayhHYW1lIHN0b3JhZ2Ugc2VsZikgIHJldHVybnMgKGJvb2wpIHsKICAgIGlmIChibG9jay5udW1iZXIgPD0gc2VsZi5hY3Rpb25CbG9jaykgcmV0dXJuIGZhbHNlOyAvLyBDYW4ndCB0aWNrIHlldAogICAgaWYgKHNlbGYuYWN0aW9uQmxvY2sgKyAyNTUgPCBibG9jay5udW1iZXIpIHsKICAgICAgZW5kR2FtZShzZWxmLCBHYW1lUmVzdWx0LkhvdXNlKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICBpZiAoIW5lZWRzVGljayhzZWxmKSkgcmV0dXJuIHRydWU7IC8vIG5vdCBuZWVkZWQsIGV2ZXJ5dGhpbmcgaXMgZmluZQoKICAgIGlmIChzZWxmLnN0YXRlID09IEdhbWVTdGF0ZS5Jbml0aWFsQ2FyZHMpIGRlYWxJbml0aWFsQ2FyZHMoc2VsZik7CiAgICBpZiAoc2VsZi5zdGF0ZSA9PSBHYW1lU3RhdGUuSGl0KSBkZWFsSGl0Q2FyZChzZWxmKTsKCiAgICBpZiAoc2VsZi5zdGF0ZSA9PSBHYW1lU3RhdGUuU3RhbmQpIHsKICAgICAgZGVhbEhvdXNlQ2FyZHMoc2VsZik7CiAgICAgIGNoZWNrR2FtZVJlc3VsdChzZWxmKTsKICAgIH0gZWxzZSB7CiAgICAgIGNoZWNrR2FtZUNvbnRpbnVlcyhzZWxmKTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIG5lZWRzVGljayhHYW1lIHN0b3JhZ2Ugc2VsZikgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgaWYgKHNlbGYuc3RhdGUgPT0gR2FtZVN0YXRlLldhaXRpbmcpIHJldHVybiBmYWxzZTsKICAgIGlmIChzZWxmLnN0YXRlID09IEdhbWVTdGF0ZS5GaW5pc2hlZCkgcmV0dXJuIGZhbHNlOwoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gY2hlY2tHYW1lUmVzdWx0KEdhbWUgc3RvcmFnZSBzZWxmKSAgewogICAgdWludDggaG91c2VIYW5kID0gY291bnRIYW5kKHNlbGYuaG91c2VDYXJkcyk7CgogICAgaWYgKGhvdXNlSGFuZCA9PSB0YXJnZXQgJiYgc2VsZi5ob3VzZUNhcmRzLmxlbmd0aCA9PSAyKSByZXR1cm4gZW5kR2FtZShzZWxmLCBHYW1lUmVzdWx0LkhvdXNlKTsgLy8gSG91c2UgbmF0dXJhbAoKICAgIENvbXBhcmFpc29uUmVzdWx0IHJlc3VsdCA9IGNvbXBhcmVIYW5kcyhob3VzZUhhbmQsIGNvdW50SGFuZChzZWxmLnBsYXllckNhcmRzKSk7CiAgICBpZiAocmVzdWx0ID09IENvbXBhcmFpc29uUmVzdWx0LkZpcnN0KSByZXR1cm4gZW5kR2FtZShzZWxmLCBHYW1lUmVzdWx0LkhvdXNlKTsKICAgIGlmIChyZXN1bHQgPT0gQ29tcGFyYWlzb25SZXN1bHQuU2Vjb25kKSByZXR1cm4gZW5kR2FtZShzZWxmLCBHYW1lUmVzdWx0LlBsYXllcik7CgogICAgZW5kR2FtZShzZWxmLCBHYW1lUmVzdWx0LlRpZSk7CiAgfQoKICBmdW5jdGlvbiBjaGVja0dhbWVDb250aW51ZXMoR2FtZSBzdG9yYWdlIHNlbGYpICB7CiAgICB1aW50OCBwbGF5ZXJIYW5kID0gY291bnRIYW5kKHNlbGYucGxheWVyQ2FyZHMpOwogICAgaWYgKHBsYXllckhhbmQgPT0gdGFyZ2V0ICYmIHNlbGYucGxheWVyQ2FyZHMubGVuZ3RoID09IDIpIHJldHVybiBlbmRHYW1lKHNlbGYsIEdhbWVSZXN1bHQuUGxheWVyTmF0dXJhbCk7IC8vIHBsYXllciBuYXR1cmFsCiAgICBpZiAocGxheWVySGFuZCA+IHRhcmdldCkgcmV0dXJuIGVuZEdhbWUoc2VsZiwgR2FtZVJlc3VsdC5Ib3VzZSk7IC8vIFBsYXllciBidXN0ZWQKICAgIGlmIChwbGF5ZXJIYW5kID09IHRhcmdldCkgewogICAgICAvLyBQbGF5ZXIgaXMgZm9yY2VkIHRvIHN0YW5kIHdpdGggMjEKICAgICAgdWludDI1NiBjdXJyZW50QWN0aW9uQmxvY2sgPSBzZWxmLmFjdGlvbkJsb2NrOwogICAgICBwbGF5ZXJEZWNpc2lvbihzZWxmLCBHYW1lU3RhdGUuU3RhbmQpOwogICAgICBzZWxmLmFjdGlvbkJsb2NrID0gY3VycmVudEFjdGlvbkJsb2NrOwogICAgICBpZiAoIXRpY2soc2VsZikpIHRocm93OyAvLyBGb3JjZXMgdGljaywgY29tbWl0bWVudCB0byBwbGF5IGFjdHVhbGx5IGhhcHBlbmVkIHBhc3QgYmxvY2sKICAgIH0KICB9CgogIGZ1bmN0aW9uIHBsYXllckRlY2lzaW9uKEdhbWUgc3RvcmFnZSBzZWxmLCBHYW1lU3RhdGUgZGVjaXNpb24pICB7CiAgICBpZiAoc2VsZi5zdGF0ZSAhPSBHYW1lU3RhdGUuV2FpdGluZykgdGhyb3c7CiAgICBpZiAoZGVjaXNpb24gIT0gR2FtZVN0YXRlLkhpdCAmJiBkZWNpc2lvbiAhPSBHYW1lU3RhdGUuU3RhbmQpIHRocm93OwoKICAgIHNlbGYuc3RhdGUgPSBkZWNpc2lvbjsKICAgIHNlbGYuYWN0aW9uQmxvY2sgPSBibG9jay5udW1iZXI7CiAgfQoKICBmdW5jdGlvbiBkZWFsSW5pdGlhbENhcmRzKEdhbWUgc3RvcmFnZSBzZWxmKSBwcml2YXRlIHsKICAgIHNlbGYucGxheWVyQ2FyZHMucHVzaChzZWxmLmRlY2suZ2V0Q2FyZChzZWxmLmFjdGlvbkJsb2NrKSk7CiAgICBzZWxmLmhvdXNlQ2FyZHMucHVzaChzZWxmLmRlY2suZ2V0Q2FyZChzZWxmLmFjdGlvbkJsb2NrKSk7CiAgICBzZWxmLnBsYXllckNhcmRzLnB1c2goc2VsZi5kZWNrLmdldENhcmQoc2VsZi5hY3Rpb25CbG9jaykpOwoKICAgIHNlbGYuc3RhdGUgPSBHYW1lU3RhdGUuV2FpdGluZzsKICB9CgogIGZ1bmN0aW9uIGRlYWxIaXRDYXJkKEdhbWUgc3RvcmFnZSBzZWxmKSBwcml2YXRlIHsKICAgIHNlbGYucGxheWVyQ2FyZHMucHVzaChzZWxmLmRlY2suZ2V0Q2FyZChzZWxmLmFjdGlvbkJsb2NrKSk7CgogICAgc2VsZi5zdGF0ZSA9IEdhbWVTdGF0ZS5XYWl0aW5nOwogIH0KCiAgZnVuY3Rpb24gZGVhbEhvdXNlQ2FyZHMoR2FtZSBzdG9yYWdlIHNlbGYpIHByaXZhdGUgewogICAgc2VsZi5ob3VzZUNhcmRzLnB1c2goc2VsZi5kZWNrLmdldENhcmQoc2VsZi5hY3Rpb25CbG9jaykpOwoKICAgIGlmIChjb3VudEhhbmQoc2VsZi5ob3VzZUNhcmRzKSA8IGhvdXNlTGltaXQpIGRlYWxIb3VzZUNhcmRzKHNlbGYpOwogIH0KCiAgZnVuY3Rpb24gZW5kR2FtZShHYW1lIHN0b3JhZ2Ugc2VsZiwgR2FtZVJlc3VsdCByZXN1bHQpIHsKICAgIHNlbGYucmVzdWx0ID0gcmVzdWx0OwogICAgc2VsZi5zdGF0ZSA9IEdhbWVTdGF0ZS5GaW5pc2hlZDsKICAgIHNlbGYucGF5b3V0ID0gcGF5b3V0Rm9yUmVzdWx0KHNlbGYucmVzdWx0LCBzZWxmLmJldCk7CgogICAgY2xvc2VHYW1lKHNlbGYpOwogIH0KCiAgZnVuY3Rpb24gY2xvc2VHYW1lKEdhbWUgc3RvcmFnZSBzZWxmKSBwcml2YXRlIHsKICAgIGlmIChzZWxmLmNsb3NlZCkgdGhyb3c7IC8vIGNhbm5vdCByZS1jbG9zZQogICAgaWYgKHNlbGYuc3RhdGUgIT0gR2FtZVN0YXRlLkZpbmlzaGVkKSB0aHJvdzsgLy8gbm90IGNsb3NhYmxlCgogICAgc2VsZi5jbG9zZWQgPSB0cnVlOwoKICAgIGlmIChzZWxmLnBheW91dCA+IDApIHsKICAgICAgaWYgKCFzZWxmLnBsYXllci5zZW5kKHNlbGYucGF5b3V0KSkgdGhyb3c7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwYXlvdXRGb3JSZXN1bHQoR2FtZVJlc3VsdCByZXN1bHQsIHVpbnQyNTYgYmV0KSBwcml2YXRlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChyZXN1bHQgPT0gR2FtZVJlc3VsdC5QbGF5ZXJOYXR1cmFsKSByZXR1cm4gYmV0ICogNSAvIDI7IC8vIGJldCArIDEuNXggYmV0CiAgICBpZiAocmVzdWx0ID09IEdhbWVSZXN1bHQuUGxheWVyKSByZXR1cm4gYmV0ICogMjsgLy8gZG91YmxlcyBiZXQKICAgIGlmIChyZXN1bHQgPT0gR2FtZVJlc3VsdC5UaWUpIHJldHVybiBiZXQ7IC8vIHJldHVybnMgYmV0CgogICAgcmV0dXJuIDA7CiAgfQoKICBmdW5jdGlvbiBjb3VudEhhbmQodWludDhbXSBtZW1vcnkgaGFuZCkgIHJldHVybnMgKHVpbnQ4KSB7CiAgICB1aW50OFtdIG1lbW9yeSBwb3NzaWJsZVN1bXMgPSBuZXcgdWludDhbXSgxKTsKCiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBoYW5kLmxlbmd0aDsgaSsrKSB7CiAgICAgIHVpbnQ4IHZhbHVlID0gaGFuZFtpXS5ibGFja2phY2tWYWx1ZSgpOwogICAgICB1aW50IGwgPSBwb3NzaWJsZVN1bXMubGVuZ3RoOwogICAgICBmb3IgKHVpbnQgaiA9IDA7IGogPCBsOyBqKyspIHsKICAgICAgICBwb3NzaWJsZVN1bXNbal0gKz0gdmFsdWU7CiAgICAgICAgaWYgKHZhbHVlID09IDEpIHsgLy8gaXMgQWNlCiAgICAgICAgICBwb3NzaWJsZVN1bXMgPSBhcHBlbmRBcnJheShwb3NzaWJsZVN1bXMsIHBvc3NpYmxlU3Vtc1tqXSArIDEwKTsgLy8gRm9yayBwb3NzaWJsZSBzdW0gd2l0aCAxMSBhcyBhY2UgdmFsdWUuCiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGJlc3RTdW0ocG9zc2libGVTdW1zKTsKICB9CgogIGZ1bmN0aW9uIGJlc3RTdW0odWludDhbXSBwb3NzaWJsZVN1bXMpICByZXR1cm5zICh1aW50OCBiZXN0U3VtKSB7CiAgICBiZXN0U3VtID0gNTA7IC8vIHZlcnkgYmFkIGhhbmQKICAgIGZvciAodWludCBpID0gMDsgaSA8IHBvc3NpYmxlU3Vtcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoY29tcGFyZUhhbmRzKGJlc3RTdW0sIHBvc3NpYmxlU3Vtc1tpXSkgPT0gQ29tcGFyYWlzb25SZXN1bHQuU2Vjb25kKSB7CiAgICAgICAgYmVzdFN1bSA9IHBvc3NpYmxlU3Vtc1tpXTsKICAgICAgfQogICAgfQogICAgcmV0dXJuOwogIH0KCiAgZnVuY3Rpb24gYXBwZW5kQXJyYXkodWludDhbXSBtZW1vcnkgYXJyYXksIHVpbnQ4IG4pICByZXR1cm5zICh1aW50OFtdIG1lbW9yeSkgewogICAgdWludDhbXSBtZW1vcnkgbmV3QXJyYXkgPSBuZXcgdWludDhbXShhcnJheS5sZW5ndGggKyAxKTsKICAgIGZvciAodWludDggaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgewogICAgICBuZXdBcnJheVtpXSA9IGFycmF5W2ldOwogICAgfQogICAgbmV3QXJyYXlbYXJyYXkubGVuZ3RoXSA9IG47CiAgICByZXR1cm4gbmV3QXJyYXk7CiAgfQoKICBmdW5jdGlvbiBjb21wYXJlSGFuZHModWludDggYSwgdWludDggYikgIHJldHVybnMgKENvbXBhcmFpc29uUmVzdWx0KSB7CiAgICBpZiAoYSA8PSB0YXJnZXQgJiYgYiA8PSB0YXJnZXQpIHsKICAgICAgaWYgKGEgPiBiKSByZXR1cm4gQ29tcGFyYWlzb25SZXN1bHQuRmlyc3Q7CiAgICAgIGlmIChhIDwgYikgcmV0dXJuIENvbXBhcmFpc29uUmVzdWx0LlNlY29uZDsKICAgIH0KCiAgICBpZiAoYSA+IHRhcmdldCAmJiBiID4gdGFyZ2V0KSB7CiAgICAgIGlmIChhIDwgYikgcmV0dXJuIENvbXBhcmFpc29uUmVzdWx0LkZpcnN0OwogICAgICBpZiAoYSA+IGIpIHJldHVybiBDb21wYXJhaXNvblJlc3VsdC5TZWNvbmQ7CiAgICB9CgogICAgaWYgKGEgPiB0YXJnZXQpIHJldHVybiBDb21wYXJhaXNvblJlc3VsdC5TZWNvbmQ7CiAgICBpZiAoYiA+IHRhcmdldCkgcmV0dXJuIENvbXBhcmFpc29uUmVzdWx0LkZpcnN0OwoKICAgIHJldHVybiBDb21wYXJhaXNvblJlc3VsdC5UaWU7CiAgfQp9'.
	

]
