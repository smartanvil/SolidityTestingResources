Class {
	#name : #SRT177b63c7caf85a360074bcb095952aa8e929ae03,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT177b63c7caf85a360074bcb095952aa8e929ae03 >> base64 [
	^ 'LyoqCiAqICBNdWx0aVNpZy5zb2wgdjEuMS4wCiAqIAogKiAgQmlsYWwgQXJpZiAtIGh0dHBzOi8vdHdpdHRlci5jb20vZnVydXNpeXlhXwogKiAgRHJhZ2xldCBHYm1ICiAqLwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgoKbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBwdXJlIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBwdXJlIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBwdXJlIGludGVybmFsIHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBwdXJlIGludGVybmFsIHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBwdXJlIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCn0KCmNvbnRyYWN0IFJlZW50cmFuY3lHdWFyZCB7CgogIC8qKgogICAqIEBkZXYgV2UgdXNlIGEgc2luZ2xlIGxvY2sgZm9yIHRoZSB3aG9sZSBjb250cmFjdC4KICAgKi8KICBib29sIHByaXZhdGUgcmVudHJhbmN5X2xvY2sgPSBmYWxzZTsKCiAgLyoqCiAgICogQGRldiBQcmV2ZW50cyBhIGNvbnRyYWN0IGZyb20gY2FsbGluZyBpdHNlbGYsIGRpcmVjdGx5IG9yIGluZGlyZWN0bHkuCiAgICogQG5vdGljZSBJZiB5b3UgbWFyayBhIGZ1bmN0aW9uIGBub25SZWVudHJhbnRgLCB5b3Ugc2hvdWxkIGFsc28KICAgKiBtYXJrIGl0IGBleHRlcm5hbGAuIENhbGxpbmcgb25lIG5vblJlZW50cmFudCBmdW5jdGlvbiBmcm9tCiAgICogYW5vdGhlciBpcyBub3Qgc3VwcG9ydGVkLiBJbnN0ZWFkLCB5b3UgY2FuIGltcGxlbWVudCBhCiAgICogYHByaXZhdGVgIGZ1bmN0aW9uIGRvaW5nIHRoZSBhY3R1YWwgd29yaywgYW5kIGEgYGV4dGVybmFsYAogICAqIHdyYXBwZXIgbWFya2VkIGFzIGBub25SZWVudHJhbnRgLgogICAqLwogIG1vZGlmaWVyIG5vblJlZW50cmFudCgpIHsKICAgIHJlcXVpcmUoIXJlbnRyYW5jeV9sb2NrKTsKICAgIHJlbnRyYW5jeV9sb2NrID0gdHJ1ZTsKICAgIF87CiAgICByZW50cmFuY3lfbG9jayA9IGZhbHNlOwogIH0KCn0KCi8qKgogKiBNdWx0aVNpZyBpcyBkZXNpZ25lZCB0byBob2xkIGZ1bmRzIG9mIHRoZSBpY28uIEFjY291bnQgaXMgY29udHJvbGxlZCBieSBmb3VyIGFkbWluaXN0cmF0b3MuIFRvIHRyaWdnZXIgYSBwYXlvdXQKICogdGhyZWUgb3V0IG9mIGZvdXIgYWRtaW5pc3RyYXRvcnMgd2lsbCBtdXN0IGFncmVlIG9uIHNhbWUgYW1vdW50IG9mIGV0aGVycyB0byBiZSB0cmFuc2ZlcnJlZC4gRHVyaW5nIHRoZSBzaWduaW5nCiAqIHByb2Nlc3MgaWYgb25lIGFkbWluaXN0cmF0b3Igc2VuZHMgZGlmZmVyZW50IHRhcmdldHRlZCBhZGRyZXNzIG9yIGFtb3VudCBvZiBldGhlcnMsIHByb2Nlc3Mgd2lsbCBhYm9ydCBhbmQgdGhleQogKiBuZWVkIHRvIHN0YXJ0IGFnYWluLgogKiBBZG1pbmlzdHJhdG9yIGNhbiBiZSByZXBsYWNlZCBidXQgdGhyZWUgb3V0IG9mIGZvdXIgbXVzdCBhZ3JlZSB1cG9uIHJlcGxhY2VtZW50IG9mIGZvdXJ0aCBhZG1pbmlzdHJhdG9yLiBUaHJlZQogKiBhZG1pbnMgd2lsbCBzZW5kIGFkZHJlc3Mgb2YgZm91cnRoIGFkbWluaXN0cmF0b3IgYWxvbmcgd2l0aCBhZGRyZXNzIG9mIG5ldyBvbmUgYWRtaW5pc3RyYXRvci4gSWYgYSBzaW5nbGUgb25lCiAqIHNlbmRzIGRpZmZlcmVudCBhZGRyZXNzIHRoZSB1cGRhdGluZyBwcm9jZXNzIHdpbGwgYWJvcnQgYW5kIHRoZXkgbmVlZCB0byBzdGFydCBhZ2Fpbi4gCiAqLwoKY29udHJhY3QgTXVsdGlTaWcgaXMgUmVlbnRyYW5jeUd1YXJkewogIAogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogIAogIC8vIE1haW50YWluIHN0YXRlIGZ1bmRzIHRyYW5zZmVyIHNpZ25pbmcgcHJvY2VzcwogIHN0cnVjdCBUcmFuc2FjdGlvbnsKICAgIGFkZHJlc3NbM10gc2lnbmVyOwogICAgdWludCBjb25maXJtYXRpb25zOwogICAgdWludDI1NiBldGg7CiAgfQogIAogIC8vIGNvdW50IGFuZCByZWNvcmQgc2lnbmVycyB3aXRoIGV0aGVycyB0aGV5IGFncmVlIHRvIHRyYW5zZmVyCiAgVHJhbnNhY3Rpb24gcHJpdmF0ZSAgcGVuZGluZzsKICAgIAogIC8vIHRoZSBudW1iZXIgb2YgYWRtaW5pc3RyYXRvciB0aGF0IG11c3QgY29uZmlybSB0aGUgc2FtZSBvcGVyYXRpb24gYmVmb3JlIGl0IGlzIHJ1bi4KICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyByZXF1aXJlZCA9IDM7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwcml2YXRlIGFkbWluaXN0cmF0b3JzOwogCiAgLy8gRnVuZHMgaGFzIGFycml2ZWQgaW50byB0aGUgY29udHJhY3QgKHJlY29yZCBob3cgbXVjaCkuCiAgZXZlbnQgRGVwb3NpdChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IHZhbHVlKTsKICAKICAvLyBGdW5kcyB0cmFuc2ZlciB0byBvdGhlciBjb250cmFjdAogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcmlzdFNpZ25lciwgYWRkcmVzcyBpbmRleGVkIHNlY29uZFNpZ25lciwgYWRkcmVzcyBpbmRleGVkIHRoaXJkU2lnbmVyLCBhZGRyZXNzIHRvLHVpbnQyNTYgZXRoLGJvb2wgc3VjY2Vzcyk7CiAgCiAgLy8gQWRtaW5pc3RyYXRvciBzdWNjZXNzZnVsbHkgc2lnbnMgYSBmdW5kIHRyYW5zZmVyCiAgZXZlbnQgVHJhbnNmZXJDb25maXJtZWQoYWRkcmVzcyBzaWduZXIsdWludDI1NiBhbW91bnQsdWludDI1NiByZW1haW5pbmdDb25maXJtYXRpb25zKTsKICAKICAvLyBBZG1pbmlzdHJhdG9yIHN1Y2Nlc3NmdWxseSBzaWducyBhIGtleSB1cGRhdGUgdHJhbnNhY3Rpb24KICBldmVudCBVcGRhdGVDb25maXJtZWQoYWRkcmVzcyBpbmRleGVkIHNpZ25lcixhZGRyZXNzIGluZGV4ZWQgbmV3QWRkcmVzcyx1aW50MjU2IHJlbWFpbmluZ0NvbmZpcm1hdGlvbnMpOwogIAogIAogIC8vIEFkbWluaXN0cmF0b3IgdmlvbGF0ZWQgY29uc2Vuc3VzCiAgZXZlbnQgVmlvbGF0ZWQoc3RyaW5nIGFjdGlvbiwgYWRkcmVzcyBzZW5kZXIpOyAKICAKICAvLyBBZG1pbmlzdHJhdG9yIGtleSB1cGRhdGVkIChhZG1pbmlzdHJhdG9yIHJlcGxhY2VkKQogIGV2ZW50IEtleVJlcGxhY2VkKGFkZHJlc3Mgb2xkS2V5LGFkZHJlc3MgbmV3S2V5KTsKCiAgZXZlbnQgRXZlbnRUcmFuc2Zlcldhc1Jlc2V0KCk7CiAgZXZlbnQgRXZlbnRVcGRhdGVXYXNSZXNldCgpOwogIAogIAogIGZ1bmN0aW9uIE11bHRpU2lnKCkgcHVibGljIHsKCiAgICBhZG1pbmlzdHJhdG9yc1sweDhFMGM1QTFiNTVkNEU3MUI3ODkxMDEwRUY1MDRiMTFmMTlGNGM0NjZdID0gdHJ1ZTsKICAgIGFkbWluaXN0cmF0b3JzWzB4NWU3NzE1NkNEMzU1NzRBMWRBQzEyNTk5MkI3M2IzQzVhOTczYTRlYl0gPSB0cnVlOwogICAgYWRtaW5pc3RyYXRvcnNbMHg2MDRFZEY4RkUwMWRiMEFkYWZFRDQ3MDFGNURlNDJiMTUwNjdkMjNjXSA9IHRydWU7CiAgICBhZG1pbmlzdHJhdG9yc1sweGVkNEM3M0FkNzZEOTA3MTVkNjQ4Nzk3QWNkMjlBODUyOUVENTExQTBdID0gdHJ1ZTsKCiAgfQogIAogIC8qKgogICAqIEBkZXYgIFRvIHRyaWdnZXIgcGF5b3V0IHRocmVlIG91dCBvZiBmb3VyIGFkbWluaXN0cmF0b3JzIGNhbGwgdGhpcwogICAqIGZ1bmN0aW9uLCBmdW5kcyB3aWxsIGJlIHRyYW5zZmVycmVkIHJpZ2h0IGFmdGVyIHZlcmlmaWNhdGlvbiBvZgogICAqIHRoaXJkIHNpZ25lciBjYWxsLgogICAqIEBwYXJhbSByZWNpcGllbnQgVGhlIGFkZHJlc3Mgb2YgcmVjaXBpZW50CiAgICogQHBhcmFtIGFtb3VudCBBbW91bnQgb2Ygd2VpIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyByZWNpcGllbnQsIHVpbnQyNTYgYW1vdW50KSBleHRlcm5hbCBvbmx5QWRtaW4gbm9uUmVlbnRyYW50IHsKICAgIAogICAgLy8gaW5wdXQgdmFsaWRhdGlvbnMKICAgIHJlcXVpcmUoIHJlY2lwaWVudCAhPSAweDAwICk7CiAgICByZXF1aXJlKCBhbW91bnQgPiAwICk7CiAgICByZXF1aXJlKCB0aGlzLmJhbGFuY2UgPj0gYW1vdW50KTsKCiAgICB1aW50IHJlbWFpbmluZzsKICAgIAogICAgLy8gU3RhcnQgb2Ygc2lnbmluZyBwcm9jZXNzLCBmaXJzdCBzaWduZXIgd2lsbCBmaW5hbGl6ZSBpbnB1dHMgZm9yIHJlbWFpbmluZyB0d28KICAgIGlmKHBlbmRpbmcuY29uZmlybWF0aW9ucyA9PSAwKXsKICAgICAgICAKICAgICAgICBwZW5kaW5nLnNpZ25lcltwZW5kaW5nLmNvbmZpcm1hdGlvbnNdID0gbXNnLnNlbmRlcjsKICAgICAgICBwZW5kaW5nLmV0aCA9IGFtb3VudDsKICAgICAgICBwZW5kaW5nLmNvbmZpcm1hdGlvbnMgPSBwZW5kaW5nLmNvbmZpcm1hdGlvbnMuYWRkKDEpOwogICAgICAgIHJlbWFpbmluZyA9IHJlcXVpcmVkLnN1YihwZW5kaW5nLmNvbmZpcm1hdGlvbnMpOwogICAgICAgIFRyYW5zZmVyQ29uZmlybWVkKG1zZy5zZW5kZXIsYW1vdW50LHJlbWFpbmluZyk7CiAgICAgICAgcmV0dXJuOwogICAgCiAgICB9CiAgICAKICAgIC8vIENvbXBhcmUgYW1vdW50IG9mIHdlaSB3aXRoIHByZXZpb3VzIGNvbmZpcm10YWlvbgogICAgaWYocGVuZGluZy5ldGggIT0gYW1vdW50KXsKICAgICAgICB0cmFuc2ZlclZpb2xhdGVkKCJJbmNvcnJlY3QgYW1vdW50IG9mIHdlaSBwYXNzZWQiKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIC8vIG1ha2Ugc3VyZSBzaWduZXIgaXMgbm90IHRyeWluZyB0byBzcGFtCiAgICBpZihtc2cuc2VuZGVyID09IHBlbmRpbmcuc2lnbmVyWzBdKXsKICAgICAgICB0cmFuc2ZlclZpb2xhdGVkKCJTaWduZXIgaXMgc3BhbW1pbmciKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIHBlbmRpbmcuc2lnbmVyW3BlbmRpbmcuY29uZmlybWF0aW9uc10gPSBtc2cuc2VuZGVyOwogICAgcGVuZGluZy5jb25maXJtYXRpb25zID0gcGVuZGluZy5jb25maXJtYXRpb25zLmFkZCgxKTsKICAgIHJlbWFpbmluZyA9IHJlcXVpcmVkLnN1YihwZW5kaW5nLmNvbmZpcm1hdGlvbnMpOwogICAgCiAgICAvLyBtYWtlIHN1cmUgc2lnbmVyIGlzIG5vdCB0cnlpbmcgdG8gc3BhbQogICAgaWYoIHJlbWFpbmluZyA9PSAwKXsKICAgICAgICBpZihtc2cuc2VuZGVyID09IHBlbmRpbmcuc2lnbmVyWzFdKXsKICAgICAgICAgICAgdHJhbnNmZXJWaW9sYXRlZCgiT25lIG9mIHNpZ25lcnMgaXMgc3BhbW1pbmciKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgIH0KICAgIAogICAgVHJhbnNmZXJDb25maXJtZWQobXNnLnNlbmRlcixhbW91bnQscmVtYWluaW5nKTsKICAgIAogICAgLy8gSWYgdGhyZWUgY29uZmlybWF0aW9uIGFyZSBkb25lLCB0cmlnZ2VyIHBheW91dAogICAgaWYgKHBlbmRpbmcuY29uZmlybWF0aW9ucyA9PSAzKXsKICAgICAgICBpZihyZWNpcGllbnQuc2VuZChhbW91bnQpKXsKICAgICAgICAgICAgVHJhbnNmZXIocGVuZGluZy5zaWduZXJbMF0scGVuZGluZy5zaWduZXJbMV0sIHBlbmRpbmcuc2lnbmVyWzJdLCByZWNpcGllbnQsYW1vdW50LHRydWUpOwogICAgICAgIH1lbHNlewogICAgICAgICAgICBUcmFuc2ZlcihwZW5kaW5nLnNpZ25lclswXSxwZW5kaW5nLnNpZ25lclsxXSwgcGVuZGluZy5zaWduZXJbMl0sIHJlY2lwaWVudCxhbW91bnQsZmFsc2UpOwogICAgICAgIH0KICAgICAgICBSZXNldFRyYW5zZmVyU3RhdGUoKTsKICAgIH0gCiAgfQogIAogIGZ1bmN0aW9uIHRyYW5zZmVyVmlvbGF0ZWQoc3RyaW5nIGVycm9yKSBwcml2YXRlIHsKICAgIFZpb2xhdGVkKGVycm9yLCBtc2cuc2VuZGVyKTsKICAgIFJlc2V0VHJhbnNmZXJTdGF0ZSgpOwogIH0KICAKICBmdW5jdGlvbiBSZXNldFRyYW5zZmVyU3RhdGUoKSBpbnRlcm5hbAogIHsKICAgICAgZGVsZXRlIHBlbmRpbmc7CiAgICAgIEV2ZW50VHJhbnNmZXJXYXNSZXNldCgpOwogIH0KCgogIC8qKgogICAqIEBkZXYgUmVzZXQgdmFsdWVzIG9mIHBlbmRpbmcgKFRyYW5zYWN0aW9uIG9iamVjdCkKICAgKi8KICBmdW5jdGlvbiBhYm9ydFRyYW5zYWN0aW9uKCkgZXh0ZXJuYWwgb25seUFkbWluewogICAgICAgUmVzZXRUcmFuc2ZlclN0YXRlKCk7CiAgfQogIAogIC8qKiAKICAgKiBAZGV2IEZhbGxiYWNrIGZ1bmN0aW9uLCByZWNlaXZlcyB2YWx1ZSBhbmQgZW1pdHMgYSBkZXBvc2l0IGV2ZW50LiAKICAgKi8KICBmdW5jdGlvbigpIHBheWFibGUgcHVibGljIHsKICAgIC8vIGp1c3QgYmVpbmcgc2VudCBzb21lIGNhc2g/CiAgICBpZiAobXNnLnZhbHVlID4gMCkKICAgICAgRGVwb3NpdChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogIH0KCiAgLyoqCiAgICogQGRldiBDaGVja3MgaWYgZ2l2ZW4gYWRkcmVzcyBpcyBhbiBhZG1pbmlzdHJhdG9yLgogICAqIEBwYXJhbSBfYWRkciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIGNoZWNrLgogICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgYWRkcmVzcyBpcyBhbiBhZG1pbmlzdHJhdG9yIGFuZCBmYXNlIG90aGVyd2lzZS4KICAgKi8KICBmdW5jdGlvbiBpc0FkbWluaXN0cmF0b3IoYWRkcmVzcyBfYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBhZG1pbmlzdHJhdG9yc1tfYWRkcl07CiAgfQogIAogIC8vIE1haW50aWFuIHN0YXRlIG9mIGFkbWluaXN0cmF0b3Iga2V5IHVwZGF0ZSBwcm9jZXNzCiAgc3RydWN0IEtleVVwZGF0ZXsKICAgIGFkZHJlc3NbM10gc2lnbmVyOwogICAgdWludCBjb25maXJtYXRpb25zOwogICAgYWRkcmVzcyBvbGRBZGRyZXNzOwogICAgYWRkcmVzcyBuZXdBZGRyZXNzOwogIH0KICAKICBLZXlVcGRhdGUgcHJpdmF0ZSB1cGRhdGluZzsKICAKICAvKioKICAgKiBAZGV2IFRocmVlIGFkbW5pc3RyYXRvciBjYW4gcmVwbGFjZSBrZXkgb2YgZm91cnRoIGFkbWluaXN0cmF0b3IuIAogICAqIEBwYXJhbSBfb2xkQWRkcmVzcyBBZGRyZXNzIG9mIGFkbWluaXNyYXRvciBuZWVkcyB0byBiZSByZXBsYWNlZAogICAqIEBwYXJhbSBfbmV3QWRkcmVzcyBBZGRyZXNzIG9mIG5ldyBhZG1pbmlzdHJhdG9yCiAgICovCiAgZnVuY3Rpb24gdXBkYXRlQWRtaW5pc3RyYXRvcktleShhZGRyZXNzIF9vbGRBZGRyZXNzLCBhZGRyZXNzIF9uZXdBZGRyZXNzKSBleHRlcm5hbCBvbmx5QWRtaW4gewogICAgCiAgICAvLyBpbnB1dCB2ZXJpZmljYXRpb25zCiAgICByZXF1aXJlKGlzQWRtaW5pc3RyYXRvcihfb2xkQWRkcmVzcykpOwogICAgcmVxdWlyZSggX25ld0FkZHJlc3MgIT0gMHgwMCApOwogICAgcmVxdWlyZSghaXNBZG1pbmlzdHJhdG9yKF9uZXdBZGRyZXNzKSk7CiAgICByZXF1aXJlKCBtc2cuc2VuZGVyICE9IF9vbGRBZGRyZXNzICk7CiAgICAKICAgIC8vIGNvdW50IGNvbmZpcm1hdGlvbiAKICAgIHVpbnQyNTYgcmVtYWluaW5nOwogICAgCiAgICAvLyBzdGFydCBvZiB1cGRhdGluZyBwcm9jZXNzLCBmaXJzdCBzaWduZXIgd2lsbCBmaW5hbGl6ZSBhZGRyZXNzIHRvIGJlIHJlcGxhY2VkCiAgICAvLyBhbmQgbmV3IGFkZHJlc3MgdG8gYmUgcmVnaXN0ZXJlZCwgcmVtYWluaW5nIHR3byBtdXN0IGNvbmZpcm0KICAgIGlmKCB1cGRhdGluZy5jb25maXJtYXRpb25zID09IDApewogICAgICAgIAogICAgICAgIHVwZGF0aW5nLnNpZ25lclt1cGRhdGluZy5jb25maXJtYXRpb25zXSA9IG1zZy5zZW5kZXI7CiAgICAgICAgdXBkYXRpbmcub2xkQWRkcmVzcyA9IF9vbGRBZGRyZXNzOwogICAgICAgIHVwZGF0aW5nLm5ld0FkZHJlc3MgPSBfbmV3QWRkcmVzczsKICAgICAgICB1cGRhdGluZy5jb25maXJtYXRpb25zID0gdXBkYXRpbmcuY29uZmlybWF0aW9ucy5hZGQoMSk7CiAgICAgICAgcmVtYWluaW5nID0gcmVxdWlyZWQuc3ViKHVwZGF0aW5nLmNvbmZpcm1hdGlvbnMpOwogICAgICAgIFVwZGF0ZUNvbmZpcm1lZChtc2cuc2VuZGVyLF9uZXdBZGRyZXNzLHJlbWFpbmluZyk7CiAgICAgICAgcmV0dXJuOwogICAgICAgIAogICAgfQogICAgCiAgICAvLyB2aW9sYXRlZCBjb25zZW5zdXMKICAgIGlmKHVwZGF0aW5nLm9sZEFkZHJlc3MgIT0gX29sZEFkZHJlc3MpewogICAgICAgIFZpb2xhdGVkKCJPbGQgYWRkcmVzc2VzIGRvIG5vdCBtYXRjaCIsbXNnLnNlbmRlcik7CiAgICAgICAgUmVzZXRVcGRhdGVTdGF0ZSgpOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgaWYodXBkYXRpbmcubmV3QWRkcmVzcyAhPSBfbmV3QWRkcmVzcyl7CiAgICAgICAgVmlvbGF0ZWQoIk5ldyBhZGRyZXNzZXMgZG8gbm90IG1hdGNoIixtc2cuc2VuZGVyKTsKICAgICAgICBSZXNldFVwZGF0ZVN0YXRlKCk7CiAgICAgICAgcmV0dXJuOyAKICAgIH0KICAgIAogICAgLy8gbWFrZSBzdXJlIGFkbWluIGlzIG5vdCB0cnlpbmcgdG8gc3BhbQogICAgaWYobXNnLnNlbmRlciA9PSB1cGRhdGluZy5zaWduZXJbMF0pewogICAgICAgIFZpb2xhdGVkKCJTaWduZXIgaXMgc3BhbW1pbmciLG1zZy5zZW5kZXIpOwogICAgICAgIFJlc2V0VXBkYXRlU3RhdGUoKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAgICAgCiAgICB1cGRhdGluZy5zaWduZXJbdXBkYXRpbmcuY29uZmlybWF0aW9uc10gPSBtc2cuc2VuZGVyOwogICAgdXBkYXRpbmcuY29uZmlybWF0aW9ucyA9IHVwZGF0aW5nLmNvbmZpcm1hdGlvbnMuYWRkKDEpOwogICAgcmVtYWluaW5nID0gcmVxdWlyZWQuc3ViKHVwZGF0aW5nLmNvbmZpcm1hdGlvbnMpOwoKICAgIGlmKCByZW1haW5pbmcgPT0gMCl7CiAgICAgICAgaWYobXNnLnNlbmRlciA9PSB1cGRhdGluZy5zaWduZXJbMV0pewogICAgICAgICAgICBWaW9sYXRlZCgiT25lIG9mIHNpZ25lcnMgaXMgc3BhbW1pbmciLG1zZy5zZW5kZXIpOwogICAgICAgICAgICBSZXNldFVwZGF0ZVN0YXRlKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICB9CgogICAgVXBkYXRlQ29uZmlybWVkKG1zZy5zZW5kZXIsX25ld0FkZHJlc3MscmVtYWluaW5nKTsKICAgIAogICAgLy8gaWYgdGhyZWUgY29uZmlybWF0aW9uIGFyZSBkb25lLCByZWdpc3RlciBuZXcgYWRtaW4gYW5kIHJlbW92ZSBvbGQgb25lCiAgICBpZiggdXBkYXRpbmcuY29uZmlybWF0aW9ucyA9PSAzICl7CiAgICAgICAgS2V5UmVwbGFjZWQoX29sZEFkZHJlc3MsIF9uZXdBZGRyZXNzKTsKICAgICAgICBSZXNldFVwZGF0ZVN0YXRlKCk7CiAgICAgICAgZGVsZXRlIGFkbWluaXN0cmF0b3JzW19vbGRBZGRyZXNzXTsKICAgICAgICBhZG1pbmlzdHJhdG9yc1tfbmV3QWRkcmVzc10gPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgIH0KICB9CiAgCiAgZnVuY3Rpb24gUmVzZXRVcGRhdGVTdGF0ZSgpIGludGVybmFsCiAgewogICAgICBkZWxldGUgdXBkYXRpbmc7CiAgICAgIEV2ZW50VXBkYXRlV2FzUmVzZXQoKTsKICB9CgogIC8qKgogICAqIEBkZXYgUmVzZXQgdmFsdWVzIG9mIHVwZGF0aW5nIChLZXlVcGRhdGUgb2JqZWN0KQogICAqLwogIGZ1bmN0aW9uIGFib3J0VXBkYXRlKCkgZXh0ZXJuYWwgb25seUFkbWluewogICAgICBSZXNldFVwZGF0ZVN0YXRlKCk7CiAgfQogIAogIC8qKgogICAqIEBkZXYgbW9kaWZpZXIgYWxsb3cgb25seSBpZiBmdW5jdGlvbiBpcyBjYWxsZWQgYnkgYWRtaW5pc3RyYXRvcgogICAqLwogIG1vZGlmaWVyIG9ubHlBZG1pbigpewogICAgICBpZiggIWFkbWluaXN0cmF0b3JzW21zZy5zZW5kZXJdICl7CiAgICAgICAgICByZXZlcnQoKTsKICAgICAgfQogICAgICBfOwogIH0KfQ=='.
	

]
