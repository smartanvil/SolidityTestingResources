Class {
	#name : #SRT4355fc160f74328f9b383df2ec589bb3dfd82ba0,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4355fc160f74328f9b383df2ec589bb3dfd82ba0 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCgovKioKICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogKiBCeSBPcGVuWmVwcGVsaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL1NhZmVNYXRoLnNvbAogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGlmKCEoYSA9PSAwIHx8IGMgLyBhID09IGIpKSB0aHJvdzsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZighKGIgPD0gYSkpIHRocm93OwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGlmKCEoYyA+PSBhKSkgdGhyb3c7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKfQoKY29udHJhY3QgQ29udHJhY3RSZWNlaXZlcnsKICAgIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGJ5dGVzICBfZGF0YSkgZXh0ZXJuYWw7Cn0KCgovL0Jhc2ljIEVSQzIzIHRva2VuLCBiYWNrd2FyZCBjb21wYXRpYmxlIHdpdGggRVJDMjAgdHJhbnNmZXIgZnVuY3Rpb24uCi8vQmFzZWQgaW4gcGFydCBvbiBjb2RlIGJ5IG9wZW4temVwcGVsaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkuZ2l0CmNvbnRyYWN0IEVSQzIzQmFzaWNUb2tlbiB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICAKICAgIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGJ5dGVzICBfZGF0YSkgZXh0ZXJuYWwgewogICAgICAgIHRocm93OwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgICAgICAvL1N0YW5kYXJkIEVSQzIzIHRyYW5zZmVyIGZ1bmN0aW9uCgogICAgICAgIGlmKGlzQ29udHJhY3QoX3RvKSkgewogICAgICAgICAgICB0cmFuc2ZlclRvQ29udHJhY3QoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRyYW5zZmVyVG9BZGRyZXNzKF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgewoKICAgICAgICAvL3N0YW5kYXJkIGZ1bmN0aW9uIHRyYW5zZmVyIHNpbWlsYXIgdG8gRVJDMjAgdHJhbnNmZXIgd2l0aCBubyBfZGF0YQogICAgICAgIC8vYWRkZWQgZHVlIHRvIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHJlYXNvbnMKCiAgICAgICAgYnl0ZXMgbWVtb3J5IGVtcHR5OwogICAgICAgIGlmKGlzQ29udHJhY3QoX3RvKSkgewogICAgICAgICAgICB0cmFuc2ZlclRvQ29udHJhY3QoX3RvLCBfdmFsdWUsIGVtcHR5KTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRyYW5zZmVyVG9BZGRyZXNzKF90bywgX3ZhbHVlLCBlbXB0eSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9BZGRyZXNzKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGludGVybmFsIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJUb0NvbnRyYWN0KGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGludGVybmFsIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YiggX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoIF92YWx1ZSk7CiAgICAgICAgQ29udHJhY3RSZWNlaXZlciByZWNlaXZlciA9IENvbnRyYWN0UmVjZWl2ZXIoX3RvKTsKICAgICAgICByZWNlaXZlci50b2tlbkZhbGxiYWNrKG1zZy5zZW5kZXIsIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsgICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLy9hc3NlbWJsZSB0aGUgZ2l2ZW4gYWRkcmVzcyBieXRlY29kZS4gSWYgYnl0ZWNvZGUgZXhpc3RzIHRoZW4gdGhlIF9hZGRyIGlzIGEgY29udHJhY3QuCiAgICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIHJldHVybnMgKGJvb2wgaXNfY29udHJhY3QpIHsKICAgICAgICAgIHVpbnQyNTYgbGVuZ3RoOwogICAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICAgIC8vcmV0cmlldmUgdGhlIHNpemUgb2YgdGhlIGNvZGUgb24gdGFyZ2V0IGFkZHJlc3MsIHRoaXMgbmVlZHMgYXNzZW1ibHkKICAgICAgICAgICAgICBsZW5ndGggOj0gZXh0Y29kZXNpemUoX2FkZHIpCiAgICAgICAgICB9CiAgICAgICAgICBpZihsZW5ndGg+MCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgfQp9Cgpjb250cmFjdCBFUkMyM1N0YW5kYXJkVG9rZW4gaXMgRVJDMjNCYXNpY1Rva2VuIHsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIGV2ZW50IEFwcHJvdmFsIChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB7CiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAgICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAgICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93OwoKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgewoKICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgICAgaWYgKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9IDApKSB0aHJvdzsKCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKfQoKCgoKLy8gQmFzZWQgaW4gcGFydCBvbiBjb2RlIGJ5IE9wZW4tWmVwcGVsaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkuZ2l0Ci8vIEJhc2VkIGluIHBhcnQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKY29udHJhY3QgT3B1c1Rva2VuIGlzIEVSQzIzU3RhbmRhcmRUb2tlbiB7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiT3B1cyBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJPUFQiOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIGFkZHJlc3MgcHVibGljIG11bHRpc2lnPWFkZHJlc3MoMHgxNDI2YzFmOTFiOTIzMDQzRjdDNUZiYWJDNmUzNjllN2NCYWVmM2YwKTsgLy9tdWx0aXNpZyB3YWxsZXQsIHRvIHdoaWNoIGFsbCBjb250cmlidXRpb25zIHdpbGwgYmUgc2VudAogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRhdGlvbjsgLy9vd25lciBhZGRyZXNzCiAgICBhZGRyZXNzIHB1YmxpYyBjYW5kaWRhdGU7IC8vb3duZXIgY2FuZGlkYXRlIGluIDItcGhhc2Ugb3duZXJzaGlwIHRyYW5zZmVyCgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBjb250cmlidXRpb25zOyAvL2tlZXBzIHRyYWNrIG9mIGV0aGVyIGNvbnRyaWJ1dGlvbnMgaW4gV2VpIG9mIGVhY2ggY29udHJpYnV0b3IgYWRkcmVzcwogICAgdWludDI1NiBwdWJsaWMgc3RhcnRCbG9jayA9IDQwMjMzMzM7IC8vcHJlLWNyb3dkc2FsZSBzdGFydCBibG9jayAoMzBtaW4gZWFsaWVyIHRoYW4gZXN0aW1hdGUpIAogICAgdWludDI1NiBwdWJsaWMgcHJlRW5kQmxvY2sgPSA0MDU3MjMzOyAvL3ByZS1jcm93ZHNhbGUgZW5kIGJsb2NrKDFoIGFmdGVyIGVzdGltYXRlZCB0aW1lKQogICAgdWludDI1NiBwdWJsaWMgcGhhc2UxU3RhcnRCbG9jayA9IDQwNjY2MzM7IC8vQ3Jvd2RzYWxlIHN0YXJ0IGJsb2NrICgxaCBlYXJsaWVyKQogICAgdWludDI1NiBwdWJsaWMgcGhhc2UxRW5kQmxvY2sgPSA0MTAwMjMzOyAvL1dlZWsgMSBlbmQgYmxvY2sgKGVzdGltYXRlKQogICAgdWludDI1NiBwdWJsaWMgcGhhc2UyRW5kQmxvY2sgPSA0MTMzODMzOyAvL1dlZWsgMiBlbmQgYmxvY2sgKGVzdGltYXRlKQogICAgdWludDI1NiBwdWJsaWMgcGhhc2UzRW5kQmxvY2sgPSA0MjAxNDMzOyAvL1dlZWsgNCBlbmQgYmxvY2sgKDJoIGxhdGVyKQogICAgdWludDI1NiBwdWJsaWMgZW5kQmxvY2sgPSA0MjAxNDMzOyAvL3dob2xlIGNyb3dkc2FsZSBlbmQgYmxvY2sKICAgIHVpbnQyNTYgcHVibGljIGNyb3dkc2FsZVRva2VuU3VwcGx5ID0gOTAwMDAwMDAwICogKDEwKioxOCk7IC8vQW1vdW50IG9mIHRva2VucyBmb3Igc2FsZSBkdXJpbmcgY3Jvd2RzYWxlCiAgICB1aW50MjU2IHB1YmxpYyBlY29zeXN0ZW1Ub2tlblN1cHBseSA9IDEwMDAwMDAwMCAqICgxMCoqMTgpOyAvL1Rva2VucyBmb3Igc3VwcG9ydGluZyB0aGUgT3B1cyBlY28tc3lzdGVtLCBlLmcuIHB1cmNoYXNpbmcgbXVzaWMgbGljZW5zZXMsIGFydGlzdCBib3VudGllcywgZXRjLgogICAgdWludDI1NiBwdWJsaWMgZm91bmRhdGlvblRva2VuU3VwcGx5ID0gNjAwMDAwMDAwICogKDEwKioxOCk7IC8vVG9rZW5zIGRpc3RyaWJ1dGVkIHRvIHRoZSBPcHVzIGZvdW5kYXRpb24sIGRldmVsb3BlcnMgYW5kIGFuZ2VsIGludmVzdG9ycwogICAgdWludDI1NiBwdWJsaWMgY3Jvd2RzYWxlVG9rZW5Tb2xkID0gMDsgLy9LZWVwcyB0cmFjayBvZiB0aGUgYW1vdW50IG9mIHRva2VucyBzb2xkIGR1cmluZyB0aGUgY3Jvd2RzYWxlCiAgICB1aW50MjU2IHB1YmxpYyBwcmVzYWxlRXRoZXJSYWlzZWQgPSAwOyAvL0tlZXBzIHRyYWNrIG9mIHRoZSBFdGhlciByYWlzZWQgZHVyaW5nIHRoZSBjcm93ZHNhbGUKICAgIHVpbnQyNTYgcHVibGljIHRyYW5zZmVyTG9ja3VwID0gOTYwMDsKICAgIGJvb2wgcHVibGljIGhhbHRlZCA9IGZhbHNlOyAvL0hhbHQgY3Jvd2RzYWxlIGluIGVtZXJnZW5jeQogICAgZXZlbnQgSGFsdCgpOyAvL0hhbHQgZXZlbnQKICAgIGV2ZW50IFVuaGFsdCgpOyAvL1VuaGFsdCBldmVudAoKICAgIG1vZGlmaWVyIG9ubHlGb3VuZGF0aW9uKCkgewogICAgICAgIC8vb25seSBkbyBpZiBjYWxsIGlzIGZyb20gb3duZXIgbW9kaWZpZXIKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBmb3VuZGF0aW9uKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGNyb3dkc2FsZVRyYW5zZmVyTG9jaygpIHsKICAgICAgICAvLyBsb2NrdXAgZHVyaW5nIGFuZCBhZnRlciA0OGggb2YgZW5kIG9mIGNyb3dkc2FsZQogICAgICAgIGlmIChibG9jay5udW1iZXIgPD0gZW5kQmxvY2suYWRkKHRyYW5zZmVyTG9ja3VwKSkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciB3aGVuTm90SGFsdGVkKCkgewogICAgICAgIC8vIG9ubHkgZG8gd2hlbiBub3QgaGFsdGVkIG1vZGlmaWVyCiAgICAgICAgaWYgKGhhbHRlZCkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvL0NvbnN0cnVjdG9yOiBzZXQgbXVsdGlzaWcgY3Jvd2RzYWxlIHJlY2lwaWVudCB3YWxsZXQgYWRkcmVzcyBhbmQgZnVuZCB0aGUgZm91bmRhdGlvbgogICAgLy9Jbml0aWFsaXplIHRvdGFsIHN1cHBseSBhbmQgYWxsb2NhdGUgZWNvc3lzdGVtICYgZm91bmRhdGlvbiB0b2tlbnMKICAJZnVuY3Rpb24gT3B1c1Rva2VuKCkgewogICAgICAgIGZvdW5kYXRpb24gPSBtc2cuc2VuZGVyOwogICAgICAgIHRvdGFsU3VwcGx5ID0gZWNvc3lzdGVtVG9rZW5TdXBwbHkuYWRkKGZvdW5kYXRpb25Ub2tlblN1cHBseSk7CiAgICAgICAgYmFsYW5jZXNbZm91bmRhdGlvbl0gPSB0b3RhbFN1cHBseTsKICAJfQoKICAgIC8vRmFsbGJhY2sgZnVuY3Rpb24gd2hlbiByZWNlaXZpbmcgRXRoZXIuCiAgICBmdW5jdGlvbigpIHBheWFibGUgewogICAgICAgIGJ1eSgpOwogICAgfQoKCiAgICAvL0hhbHQgSUNPIGluIGNhc2Ugb2YgZW1lcmdlbmN5LgogICAgZnVuY3Rpb24gaGFsdCgpIG9ubHlGb3VuZGF0aW9uIHsKICAgICAgICBoYWx0ZWQgPSB0cnVlOwogICAgICAgIEhhbHQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1bmhhbHQoKSBvbmx5Rm91bmRhdGlvbiB7CiAgICAgICAgaGFsdGVkID0gZmFsc2U7CiAgICAgICAgVW5oYWx0KCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5KCkgcGF5YWJsZSB7CiAgICAgICAgYnV5UmVjaXBpZW50KG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vQWxsb3cgYWRkcmVzc2VzIHRvIGJ1eSB0b2tlbiBmb3IgYW5vdGhlciBhY2NvdW50CiAgICBmdW5jdGlvbiBidXlSZWNpcGllbnQoYWRkcmVzcyByZWNpcGllbnQpIHB1YmxpYyBwYXlhYmxlIHdoZW5Ob3RIYWx0ZWQgewogICAgICAgIGlmKG1zZy52YWx1ZSA9PSAwKSB0aHJvdzsKICAgICAgICBpZighKHByZUNyb3dkc2FsZU9uKCl8fGNyb3dkc2FsZU9uKCkpKSB0aHJvdzsvL29ubHkgYWxsb3dzIGR1cmluZyBwcmVzYWxlL2Nyb3dkc2FsZQogICAgICAgIGlmKGNvbnRyaWJ1dGlvbnNbcmVjaXBpZW50XS5hZGQobXNnLnZhbHVlKT5wZXJBZGRyZXNzQ2FwKCkpIHRocm93Oy8vcGVyIGFkZHJlc3MgY2FwCiAgICAgICAgdWludDI1NiB0b2tlbnMgPSBtc2cudmFsdWUubXVsKHJldHVyblJhdGUoKSk7IC8vZGVjaW1hbHM9MTgsIHNvIG5vIG5lZWQgdG8gYWRqdXN0IGZvciB1bml0CiAgICAgICAgaWYoY3Jvd2RzYWxlVG9rZW5Tb2xkLmFkZCh0b2tlbnMpPmNyb3dkc2FsZVRva2VuU3VwcGx5KSB0aHJvdzsvL21heCBzdXBwbHkgbGltaXQKCiAgICAgICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IGJhbGFuY2VzW3JlY2lwaWVudF0uYWRkKHRva2Vucyk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQodG9rZW5zKTsKICAgICAgICBwcmVzYWxlRXRoZXJSYWlzZWQgPSBwcmVzYWxlRXRoZXJSYWlzZWQuYWRkKG1zZy52YWx1ZSk7CiAgICAgICAgY29udHJpYnV0aW9uc1tyZWNpcGllbnRdID0gY29udHJpYnV0aW9uc1tyZWNpcGllbnRdLmFkZChtc2cudmFsdWUpOwogICAgICAgIGNyb3dkc2FsZVRva2VuU29sZCA9IGNyb3dkc2FsZVRva2VuU29sZC5hZGQodG9rZW5zKTsKICAgICAgICBpZihjcm93ZHNhbGVUb2tlblNvbGQgPT0gY3Jvd2RzYWxlVG9rZW5TdXBwbHkpewogICAgICAgIC8vSWYgY3Jvd2RzYWxlIHRva2VuIHNvbGQgb3V0LCBlbmQgY3Jvd2RzYWxlCiAgICAgICAgICAgIGlmKGJsb2NrLm51bWJlciA8IHByZUVuZEJsb2NrKSB7CiAgICAgICAgICAgICAgICBwcmVFbmRCbG9jayA9IGJsb2NrLm51bWJlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbmRCbG9jayA9IGJsb2NrLm51bWJlcjsKICAgICAgICB9CiAgICAgICAgaWYgKCFtdWx0aXNpZy5zZW5kKG1zZy52YWx1ZSkpIHRocm93OyAvL2ltbWVkaWF0ZWx5IHNlbmQgRXRoZXIgdG8gbXVsdGlzaWcgYWRkcmVzcwogICAgICAgIFRyYW5zZmVyKHRoaXMsIHJlY2lwaWVudCwgdG9rZW5zKTsKICAgIH0KCiAgICAvL0J1cm5zIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBmcm9tIHRoZSBmb3VuZGF0aW9uCiAgICAvL1VzZWQgdG8gYnVybiB1bnNwZW50IGZ1bmRzIGluIGZvdW5kYXRpb24gREFPCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBleHRlcm5hbCBvbmx5Rm91bmRhdGlvbiByZXR1cm5zIChib29sKSB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIGFkZHJlc3MoMCksIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8yLXBoYXNlIG93bmVyc2hpcCB0cmFuc2ZlcjsKICAgIC8vcHJldmVudCB0cmFuc2ZlcnJpbmcgb3duZXJzaGlwIHRvIG5vbi1leGlzdGVudCBhZGRyZXNzZXMgYnkgYWNjaWRlbnQuCiAgICBmdW5jdGlvbiBwcm9wb3NlRm91bmRhdGlvblRyYW5zZmVyKGFkZHJlc3MgbmV3Rm91bmRhdGlvbikgZXh0ZXJuYWwgb25seUZvdW5kYXRpb24gewogICAgICAgIC8vcHJvcG9zZSBuZXcgb3duZXIKICAgICAgICBjYW5kaWRhdGUgPSBuZXdGb3VuZGF0aW9uOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbmNlbEZvdW5kYXRpb25UcmFuc2ZlcigpIGV4dGVybmFsIG9ubHlGb3VuZGF0aW9uIHsKICAgICAgICBjYW5kaWRhdGUgPSBhZGRyZXNzKDApOwogICAgfQoKICAgIGZ1bmN0aW9uIGFjY2VwdEZvdW5kYXRpb25UcmFuc2ZlcigpIGV4dGVybmFsIHsKICAgICAgICAvL25ldyBvd25lciBhY2NlcHQgdHJhbnNmZXIgdG8gY29tcGxldGUgdHJhbnNmZXIKICAgICAgICBpZihtc2cuc2VuZGVyICE9IGNhbmRpZGF0ZSkgdGhyb3c7CiAgICAgICAgZm91bmRhdGlvbiA9IGNhbmRpZGF0ZTsKICAgICAgICBjYW5kaWRhdGUgPSBhZGRyZXNzKDApOwogICAgfQoKICAgIC8vQWxsb3cgdG8gY2hhbmdlIHRoZSByZWNpcGllbnQgbXVsdGlzaWcgYWRkcmVzcwogICAgZnVuY3Rpb24gc2V0TXVsdGlzaWcoYWRkcmVzcyBhZGRyKSBleHRlcm5hbCBvbmx5Rm91bmRhdGlvbiB7CiAgICAgIAlpZiAoYWRkciA9PSBhZGRyZXNzKDApKSB0aHJvdzsKICAgICAgCW11bHRpc2lnID0gYWRkcjsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgY3Jvd2RzYWxlVHJhbnNmZXJMb2NrIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgfQoKCSAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgY3Jvd2RzYWxlVHJhbnNmZXJMb2NrIHsKICAgICAgICBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CgkgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgY3Jvd2RzYWxlVHJhbnNmZXJMb2NrIHsKICAgICAgICBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvL1JldHVybiByYXRlIG9mIHRva2VuIGFnYWluc3QgZXRoZXIuCiAgICBmdW5jdGlvbiByZXR1cm5SYXRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICAgIGlmIChibG9jay5udW1iZXI+PXN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPD1wcmVFbmRCbG9jaykgcmV0dXJuIDg4ODg7IC8vUHJlLWNyb3dkc2FsZQogICAgICAgIGlmIChibG9jay5udW1iZXI+PXBoYXNlMVN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPD1waGFzZTFFbmRCbG9jaykgcmV0dXJuIDgwMDA7IC8vQ3Jvd2RzYWxlIHBoYXNlMQogICAgICAgIGlmIChibG9jay5udW1iZXI+cGhhc2UxRW5kQmxvY2sgJiYgYmxvY2subnVtYmVyPD1waGFzZTJFbmRCbG9jaykgcmV0dXJuIDc1MDA7IC8vUGhhc2UyCiAgICAgICAgaWYgKGJsb2NrLm51bWJlcj5waGFzZTJFbmRCbG9jayAmJiBibG9jay5udW1iZXI8PXBoYXNlM0VuZEJsb2NrKSByZXR1cm4gNzAwMDsgLy9QaGFzZTMKICAgIH0KCiAgICAvL3BlciBhZGRyZXNzIGNhcCBpbiBXZWk6IDEwMDAgZXRoZXIgKyAxJSBvZiBldGhlciByZWNlaXZlZCBhdCB0aGUgZ2l2ZW4gdGltZS4KICAgIGZ1bmN0aW9uIHBlckFkZHJlc3NDYXAoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBiYXNlbGluZSA9IDEwMDAgKiAoMTAqKjE4KTsKICAgICAgICByZXR1cm4gYmFzZWxpbmUuYWRkKHByZXNhbGVFdGhlclJhaXNlZC5kaXYoMTAwKSk7CiAgICB9CgogICAgZnVuY3Rpb24gcHJlQ3Jvd2RzYWxlT24oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIC8vcmV0dXJuIHdoZXRoZXIgcHJlc2FsZSBpcyBvbiBhY2NvcmRpbmcgdG8gYmxvY2sgbnVtYmVyCiAgICAgICAgcmV0dXJuIChibG9jay5udW1iZXI+PXN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPD1wcmVFbmRCbG9jayk7CiAgICB9CgogICAgZnVuY3Rpb24gY3Jvd2RzYWxlT24oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIC8vcmV0dXJuIHdoZXRoZXIgY3Jvd2RzYWxlIGlzIG9uIGFjY29yZGluZyB0byBibG9jayBudW1iZXIKICAgICAgICByZXR1cm4gKGJsb2NrLm51bWJlcj49cGhhc2UxU3RhcnRCbG9jayAmJiBibG9jay5udW1iZXI8PWVuZEJsb2NrKTsKICAgIH0KCgogICAgZnVuY3Rpb24gZ2V0RXRoZXJSYWlzZWQoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy9nZXR0ZXIgZnVuY3Rpb24gZm9yIGV0aGVyUmFpc2VkCiAgICAgICAgcmV0dXJuIHByZXNhbGVFdGhlclJhaXNlZDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb2tlblNvbGQoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy9nZXR0ZXIgZnVuY3Rpb24gZm9yIGNyb3dkc2FsZVRva2VuU29sZAogICAgICAgIHJldHVybiBjcm93ZHNhbGVUb2tlblNvbGQ7CiAgICB9Cgp9'.
	

]
