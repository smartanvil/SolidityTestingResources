Class {
	#name : #SRT73b29c2a2dd1c18fe95cc43f67e5d202651794fe,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT73b29c2a2dd1c18fe95cc43f67e5d202651794fe >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovLyBGaWxlOiBjb250cmFjdHMvZXJjMjAvVG9rZW4uc29sCgpjb250cmFjdCBUb2tlbiB7CgogICAgLy8vIEByZXR1cm4gdG90YWwgYW1vdW50IG9mIHRva2VucwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50IHN1cHBseSkge30KCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHt9CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CgogICAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfYWRkcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB3ZWkgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykge30KCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOwp9CgovLyBGaWxlOiBjb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKCmNvbnRyYWN0IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhIC8gYjsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogICAgfQoKICAgIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICAgIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL293bmVyc2hpcC9Pd25hYmxlLnNvbAoKLyoKICogT3duYWJsZQogKgogKiBCYXNlIGNvbnRyYWN0IHdpdGggYW4gb3duZXIuCiAqIFByb3ZpZGVzIG9ubHlPd25lciBtb2RpZmllciwgd2hpY2ggcHJldmVudHMgZnVuY3Rpb24gZnJvbSBydW5uaW5nIGlmIGl0IGlzIGNhbGxlZCBieSBhbnlvbmUgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAqLwoKY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICB9CiAgICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy92ZXN0aW5nL1Zlc3RpbmdXYWxsZXQuc29sCgpjb250cmFjdCBWZXN0aW5nV2FsbGV0IGlzIE93bmFibGUsIFNhZmVNYXRoIHsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gVmVzdGluZ1NjaGVkdWxlKSBwdWJsaWMgc2NoZWR1bGVzOyAgICAgICAgLy8gdmVzdGluZyBzY2hlZHVsZXMgZm9yIGdpdmVuIGFkZHJlc3NlcwogICAgbWFwcGluZyhhZGRyZXNzID0+IGFkZHJlc3MpIHB1YmxpYyBhZGRyZXNzQ2hhbmdlUmVxdWVzdHM7ICAgIC8vIHJlcXVlc3RlZCBhZGRyZXNzIGNoYW5nZXMKCiAgICBUb2tlbiBwdWJsaWMgdmVzdGluZ1Rva2VuOwoKICAgIGFkZHJlc3MgcHVibGljIGFwcHJvdmVkV2FsbGV0OwoKICAgIGV2ZW50IFZlc3RpbmdTY2hlZHVsZVJlZ2lzdGVyZWQoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHJlZ2lzdGVyZWRBZGRyZXNzLAogICAgICAgIGFkZHJlc3MgZGVwb3NpdG9yLAogICAgICAgIHVpbnQgc3RhcnRUaW1lSW5TZWMsCiAgICAgICAgdWludCBjbGlmZlRpbWVJblNlYywKICAgICAgICB1aW50IGVuZFRpbWVJblNlYywKICAgICAgICB1aW50IHRvdGFsQW1vdW50CiAgICApOwoKCiAgICBldmVudCBXaXRoZHJhd2FsKGFkZHJlc3MgaW5kZXhlZCByZWdpc3RlcmVkQWRkcmVzcywgdWludCBhbW91bnRXaXRoZHJhd24pOwoKICAgIGV2ZW50IFZlc3RpbmdFbmRlZEJ5T3duZXIoYWRkcmVzcyBpbmRleGVkIHJlZ2lzdGVyZWRBZGRyZXNzLCB1aW50IGFtb3VudFdpdGhkcmF3biwgdWludCBhbW91bnRSZWZ1bmRlZCk7CgogICAgZXZlbnQgQWRkcmVzc0NoYW5nZVJlcXVlc3RlZChhZGRyZXNzIGluZGV4ZWQgb2xkUmVnaXN0ZXJlZEFkZHJlc3MsIGFkZHJlc3MgaW5kZXhlZCBuZXdSZWdpc3RlcmVkQWRkcmVzcyk7CgogICAgZXZlbnQgQWRkcmVzc0NoYW5nZUNvbmZpcm1lZChhZGRyZXNzIGluZGV4ZWQgb2xkUmVnaXN0ZXJlZEFkZHJlc3MsIGFkZHJlc3MgaW5kZXhlZCBuZXdSZWdpc3RlcmVkQWRkcmVzcyk7CgogICAgc3RydWN0IFZlc3RpbmdTY2hlZHVsZSB7CiAgICAgICAgdWludCBzdGFydFRpbWVJblNlYzsKICAgICAgICB1aW50IGNsaWZmVGltZUluU2VjOwogICAgICAgIHVpbnQgZW5kVGltZUluU2VjOwogICAgICAgIHVpbnQgdG90YWxBbW91bnQ7CiAgICAgICAgdWludCB0b3RhbEFtb3VudFdpdGhkcmF3bjsKICAgICAgICBhZGRyZXNzIGRlcG9zaXRvcjsKICAgIH0KCiAgICBtb2RpZmllciBhZGRyZXNzUmVnaXN0ZXJlZChhZGRyZXNzIHRhcmdldCkgewogICAgICAgIFZlc3RpbmdTY2hlZHVsZSBzdG9yYWdlIHZlc3RpbmdTY2hlZHVsZSA9IHNjaGVkdWxlc1t0YXJnZXRdOwogICAgICAgIHJlcXVpcmUodmVzdGluZ1NjaGVkdWxlLmRlcG9zaXRvciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGFkZHJlc3NOb3RSZWdpc3RlcmVkKGFkZHJlc3MgdGFyZ2V0KSB7CiAgICAgICAgVmVzdGluZ1NjaGVkdWxlIHN0b3JhZ2UgdmVzdGluZ1NjaGVkdWxlID0gc2NoZWR1bGVzW3RhcmdldF07CiAgICAgICAgcmVxdWlyZSh2ZXN0aW5nU2NoZWR1bGUuZGVwb3NpdG9yID09IGFkZHJlc3MoMCkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgcGVuZGluZ0FkZHJlc3NDaGFuZ2VSZXF1ZXN0KGFkZHJlc3MgdGFyZ2V0KSB7CiAgICAgICAgcmVxdWlyZShhZGRyZXNzQ2hhbmdlUmVxdWVzdHNbdGFyZ2V0XSAhPSBhZGRyZXNzKDApKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHBhc3RDbGlmZlRpbWUoYWRkcmVzcyB0YXJnZXQpIHsKICAgICAgICBWZXN0aW5nU2NoZWR1bGUgc3RvcmFnZSB2ZXN0aW5nU2NoZWR1bGUgPSBzY2hlZHVsZXNbdGFyZ2V0XTsKICAgICAgICByZXF1aXJlKGdldFRpbWUoKSA+IHZlc3RpbmdTY2hlZHVsZS5jbGlmZlRpbWVJblNlYyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciB2YWxpZFZlc3RpbmdTY2hlZHVsZVRpbWVzKHVpbnQgc3RhcnRUaW1lSW5TZWMsIHVpbnQgY2xpZmZUaW1lSW5TZWMsIHVpbnQgZW5kVGltZUluU2VjKSB7CiAgICAgICAgcmVxdWlyZShjbGlmZlRpbWVJblNlYyA+PSBzdGFydFRpbWVJblNlYyk7CiAgICAgICAgcmVxdWlyZShlbmRUaW1lSW5TZWMgPj0gY2xpZmZUaW1lSW5TZWMpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgYWRkcmVzc05vdE51bGwoYWRkcmVzcyB0YXJnZXQpIHsKICAgICAgICByZXF1aXJlKHRhcmdldCAhPSBhZGRyZXNzKDApKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLyBAZGV2IEFzc2lnbnMgYSB2ZXN0aW5nIHRva2VuIHRvIHRoZSB3YWxsZXQuCiAgICAvLy8gQHBhcmFtIF92ZXN0aW5nVG9rZW4gVG9rZW4gdGhhdCB3aWxsIGJlIHZlc3RlZC4KICAgIGZ1bmN0aW9uIFZlc3RpbmdXYWxsZXQoYWRkcmVzcyBfdmVzdGluZ1Rva2VuKSB7CiAgICAgICAgdmVzdGluZ1Rva2VuID0gVG9rZW4oX3Zlc3RpbmdUb2tlbik7CiAgICAgICAgYXBwcm92ZWRXYWxsZXQgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlZ2lzdGVyVmVzdGluZ1NjaGVkdWxlV2l0aFBlcmNlbnRhZ2UoCiAgICAgICAgYWRkcmVzcyBfYWRkcmVzc1RvUmVnaXN0ZXIsCiAgICAgICAgYWRkcmVzcyBfZGVwb3NpdG9yLAogICAgICAgIHVpbnQgX3N0YXJ0VGltZUluU2VjLAogICAgICAgIHVpbnQgX2NsaWZmVGltZUluU2VjLAogICAgICAgIHVpbnQgX2VuZFRpbWVJblNlYywKICAgICAgICB1aW50IF90b3RhbEFtb3VudCwKICAgICAgICB1aW50IF9wZXJjZW50YWdlCiAgICApCiAgICBwdWJsaWMKICAgIG9ubHlPd25lcgogICAgYWRkcmVzc05vdE51bGwoX2RlcG9zaXRvcikKICAgIHZhbGlkVmVzdGluZ1NjaGVkdWxlVGltZXMoX3N0YXJ0VGltZUluU2VjLCBfY2xpZmZUaW1lSW5TZWMsIF9lbmRUaW1lSW5TZWMpCiAgICB7CiAgICAgICAgcmVxdWlyZShfcGVyY2VudGFnZSA8PSAxMDApOwogICAgICAgIHVpbnQgdmVzdGVkQW1vdW50ID0gc2FmZURpdihzYWZlTXVsKAogICAgICAgICAgICAgICAgX3RvdGFsQW1vdW50LCBfcGVyY2VudGFnZQogICAgICAgICAgICApLCAxMDApOwogICAgICAgIHJlZ2lzdGVyVmVzdGluZ1NjaGVkdWxlKF9hZGRyZXNzVG9SZWdpc3RlciwgX2RlcG9zaXRvciwgX3N0YXJ0VGltZUluU2VjLCBfY2xpZmZUaW1lSW5TZWMsIF9lbmRUaW1lSW5TZWMsIHZlc3RlZEFtb3VudCk7CiAgICB9CgogICAgLy8vIEBkZXYgUmVnaXN0ZXJzIGEgdmVzdGluZyBzY2hlZHVsZSB0byBhbiBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfYWRkcmVzc1RvUmVnaXN0ZXIgVGhlIGFkZHJlc3MgdGhhdCBpcyBhbGxvd2VkIHRvIHdpdGhkcmF3IHZlc3RlZCB0b2tlbnMgZm9yIHRoaXMgc2NoZWR1bGUuCiAgICAvLy8gQHBhcmFtIF9kZXBvc2l0b3IgQWRkcmVzcyB0aGF0IHdpbGwgYmUgZGVwb3NpdGluZyB2ZXN0aW5nIHRva2VuLgogICAgLy8vIEBwYXJhbSBfc3RhcnRUaW1lSW5TZWMgVGhlIHRpbWUgaW4gc2Vjb25kcyB0aGF0IHZlc3RpbmcgYmVnYW4uCiAgICAvLy8gQHBhcmFtIF9jbGlmZlRpbWVJblNlYyBUaGUgdGltZSBpbiBzZWNvbmRzIHRoYXQgdG9rZW5zIGJlY29tZSB3aXRoZHJhd2FibGUuCiAgICAvLy8gQHBhcmFtIF9lbmRUaW1lSW5TZWMgVGhlIHRpbWUgaW4gc2Vjb25kcyB0aGF0IHZlc3RpbmcgZW5kcy4KICAgIC8vLyBAcGFyYW0gX3RvdGFsQW1vdW50IFRoZSB0b3RhbCBhbW91bnQgb2YgdG9rZW5zIHRoYXQgdGhlIHJlZ2lzdGVyZWQgYWRkcmVzcyBjYW4gd2l0aGRyYXcgYnkgdGhlIGVuZCBvZiB0aGUgdmVzdGluZyBwZXJpb2QuCiAgICBmdW5jdGlvbiByZWdpc3RlclZlc3RpbmdTY2hlZHVsZSgKICAgICAgICBhZGRyZXNzIF9hZGRyZXNzVG9SZWdpc3RlciwKICAgICAgICBhZGRyZXNzIF9kZXBvc2l0b3IsCiAgICAgICAgdWludCBfc3RhcnRUaW1lSW5TZWMsCiAgICAgICAgdWludCBfY2xpZmZUaW1lSW5TZWMsCiAgICAgICAgdWludCBfZW5kVGltZUluU2VjLAogICAgICAgIHVpbnQgX3RvdGFsQW1vdW50CiAgICApCiAgICBwdWJsaWMKICAgIG9ubHlPd25lcgogICAgYWRkcmVzc05vdE51bGwoX2RlcG9zaXRvcikKICAgIHZhbGlkVmVzdGluZ1NjaGVkdWxlVGltZXMoX3N0YXJ0VGltZUluU2VjLCBfY2xpZmZUaW1lSW5TZWMsIF9lbmRUaW1lSW5TZWMpCiAgICB7CgogICAgICAgIHJlcXVpcmUodmVzdGluZ1Rva2VuLnRyYW5zZmVyRnJvbShhcHByb3ZlZFdhbGxldCwgYWRkcmVzcyh0aGlzKSwgX3RvdGFsQW1vdW50KSk7CiAgICAgICAgcmVxdWlyZSh2ZXN0aW5nVG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpID49IF90b3RhbEFtb3VudCk7CgogICAgICAgIHNjaGVkdWxlc1tfYWRkcmVzc1RvUmVnaXN0ZXJdID0gVmVzdGluZ1NjaGVkdWxlKHsKICAgICAgICAgICAgc3RhcnRUaW1lSW5TZWMgOiBfc3RhcnRUaW1lSW5TZWMsCiAgICAgICAgICAgIGNsaWZmVGltZUluU2VjIDogX2NsaWZmVGltZUluU2VjLAogICAgICAgICAgICBlbmRUaW1lSW5TZWMgOiBfZW5kVGltZUluU2VjLAogICAgICAgICAgICB0b3RhbEFtb3VudCA6IF90b3RhbEFtb3VudCwKICAgICAgICAgICAgdG90YWxBbW91bnRXaXRoZHJhd24gOiAwLAogICAgICAgICAgICBkZXBvc2l0b3IgOiBfZGVwb3NpdG9yCiAgICAgICAgICAgIH0pOwoKICAgICAgICBWZXN0aW5nU2NoZWR1bGVSZWdpc3RlcmVkKAogICAgICAgICAgICBfYWRkcmVzc1RvUmVnaXN0ZXIsCiAgICAgICAgICAgIF9kZXBvc2l0b3IsCiAgICAgICAgICAgIF9zdGFydFRpbWVJblNlYywKICAgICAgICAgICAgX2NsaWZmVGltZUluU2VjLAogICAgICAgICAgICBfZW5kVGltZUluU2VjLAogICAgICAgICAgICBfdG90YWxBbW91bnQKICAgICAgICApOwogICAgfQoKICAgIC8vLyBAZGV2IEFsbG93cyBhIHJlZ2lzdGVyZWQgYWRkcmVzcyB0byB3aXRoZHJhdyB0b2tlbnMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiB2ZXN0ZWQuCiAgICBmdW5jdGlvbiB3aXRoZHJhdygpCiAgICBwdWJsaWMKICAgIHBhc3RDbGlmZlRpbWUobXNnLnNlbmRlcikKICAgIHsKICAgICAgICBWZXN0aW5nU2NoZWR1bGUgc3RvcmFnZSB2ZXN0aW5nU2NoZWR1bGUgPSBzY2hlZHVsZXNbbXNnLnNlbmRlcl07CiAgICAgICAgdWludCB0b3RhbEFtb3VudFZlc3RlZCA9IGdldFRvdGFsQW1vdW50VmVzdGVkKHZlc3RpbmdTY2hlZHVsZSk7CiAgICAgICAgdWludCBhbW91bnRXaXRoZHJhd2FibGUgPSBzYWZlU3ViKHRvdGFsQW1vdW50VmVzdGVkLCB2ZXN0aW5nU2NoZWR1bGUudG90YWxBbW91bnRXaXRoZHJhd24pOwogICAgICAgIHZlc3RpbmdTY2hlZHVsZS50b3RhbEFtb3VudFdpdGhkcmF3biA9IHRvdGFsQW1vdW50VmVzdGVkOwoKICAgICAgICBpZiAoYW1vdW50V2l0aGRyYXdhYmxlID4gMCkgewogICAgICAgICAgICByZXF1aXJlKHZlc3RpbmdUb2tlbi50cmFuc2Zlcihtc2cuc2VuZGVyLCBhbW91bnRXaXRoZHJhd2FibGUpKTsKICAgICAgICAgICAgV2l0aGRyYXdhbChtc2cuc2VuZGVyLCBhbW91bnRXaXRoZHJhd2FibGUpOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgY29udHJhY3Qgb3duZXIgdG8gdGVybWluYXRlIGEgdmVzdGluZyBzY2hlZHVsZSwgdHJhbnNmZXJpbmcgcmVtYWluaW5nIHZlc3RlZCB0b2tlbnMgdG8gdGhlIHJlZ2lzdGVyZWQgYWRkcmVzcyBhbmQgcmVmdW5kaW5nIG93bmVyIHdpdGggcmVtYWluaW5nIHRva2Vucy4KICAgIC8vLyBAcGFyYW0gX2FkZHJlc3NUb0VuZCBBZGRyZXNzIHRoYXQgaXMgY3VycmVudGx5IHJlZ2lzdGVyZWQgdG8gdGhlIHZlc3Rpbmcgc2NoZWR1bGUgdGhhdCB3aWxsIGJlIGNsb3NlZC4KICAgIC8vLyBAcGFyYW0gX2FkZHJlc3NUb1JlZnVuZCBBZGRyZXNzIHRoYXQgd2lsbCByZWNlaXZlIHVudmVzdGVkIHRva2Vucy4KICAgIGZ1bmN0aW9uIGVuZFZlc3RpbmcoYWRkcmVzcyBfYWRkcmVzc1RvRW5kLCBhZGRyZXNzIF9hZGRyZXNzVG9SZWZ1bmQpCiAgICBwdWJsaWMKICAgIG9ubHlPd25lcgogICAgYWRkcmVzc05vdE51bGwoX2FkZHJlc3NUb1JlZnVuZCkKICAgIHsKICAgICAgICBWZXN0aW5nU2NoZWR1bGUgc3RvcmFnZSB2ZXN0aW5nU2NoZWR1bGUgPSBzY2hlZHVsZXNbX2FkZHJlc3NUb0VuZF07CgogICAgICAgIHVpbnQgYW1vdW50V2l0aGRyYXdhYmxlID0gMDsKICAgICAgICB1aW50IGFtb3VudFJlZnVuZGFibGUgPSAwOwoKICAgICAgICBpZiAoZ2V0VGltZSgpIDwgdmVzdGluZ1NjaGVkdWxlLmNsaWZmVGltZUluU2VjKSB7CiAgICAgICAgICAgIGFtb3VudFJlZnVuZGFibGUgPSB2ZXN0aW5nU2NoZWR1bGUudG90YWxBbW91bnQ7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB1aW50IHRvdGFsQW1vdW50VmVzdGVkID0gZ2V0VG90YWxBbW91bnRWZXN0ZWQodmVzdGluZ1NjaGVkdWxlKTsKICAgICAgICAgICAgYW1vdW50V2l0aGRyYXdhYmxlID0gc2FmZVN1Yih0b3RhbEFtb3VudFZlc3RlZCwgdmVzdGluZ1NjaGVkdWxlLnRvdGFsQW1vdW50V2l0aGRyYXduKTsKICAgICAgICAgICAgYW1vdW50UmVmdW5kYWJsZSA9IHNhZmVTdWIodmVzdGluZ1NjaGVkdWxlLnRvdGFsQW1vdW50LCB0b3RhbEFtb3VudFZlc3RlZCk7CiAgICAgICAgfQoKICAgICAgICBkZWxldGUgc2NoZWR1bGVzW19hZGRyZXNzVG9FbmRdOwogICAgICAgIHJlcXVpcmUoYW1vdW50V2l0aGRyYXdhYmxlID09IDAgfHwgdmVzdGluZ1Rva2VuLnRyYW5zZmVyKF9hZGRyZXNzVG9FbmQsIGFtb3VudFdpdGhkcmF3YWJsZSkpOwogICAgICAgIHJlcXVpcmUoYW1vdW50UmVmdW5kYWJsZSA9PSAwIHx8IHZlc3RpbmdUb2tlbi50cmFuc2ZlcihfYWRkcmVzc1RvUmVmdW5kLCBhbW91bnRSZWZ1bmRhYmxlKSk7CgogICAgICAgIFZlc3RpbmdFbmRlZEJ5T3duZXIoX2FkZHJlc3NUb0VuZCwgYW1vdW50V2l0aGRyYXdhYmxlLCBhbW91bnRSZWZ1bmRhYmxlKTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgYSByZWdpc3RlcmVkIGFkZHJlc3MgdG8gcmVxdWVzdCBhbiBhZGRyZXNzIGNoYW5nZS4KICAgIC8vLyBAcGFyYW0gX25ld1JlZ2lzdGVyZWRBZGRyZXNzIERlc2lyZWQgYWRkcmVzcyB0byB1cGRhdGUgdG8uCiAgICBmdW5jdGlvbiByZXF1ZXN0QWRkcmVzc0NoYW5nZShhZGRyZXNzIF9uZXdSZWdpc3RlcmVkQWRkcmVzcykKICAgIHB1YmxpYwogICAgYWRkcmVzc05vdFJlZ2lzdGVyZWQoX25ld1JlZ2lzdGVyZWRBZGRyZXNzKQogICAgYWRkcmVzc05vdE51bGwoX25ld1JlZ2lzdGVyZWRBZGRyZXNzKQogICAgewogICAgICAgIGFkZHJlc3NDaGFuZ2VSZXF1ZXN0c1ttc2cuc2VuZGVyXSA9IF9uZXdSZWdpc3RlcmVkQWRkcmVzczsKICAgICAgICBBZGRyZXNzQ2hhbmdlUmVxdWVzdGVkKG1zZy5zZW5kZXIsIF9uZXdSZWdpc3RlcmVkQWRkcmVzcyk7CiAgICB9CgogICAgLy8vIEBkZXYgQ29uZmlybSBhbiBhZGRyZXNzIGNoYW5nZSBhbmQgbWlncmF0ZSB2ZXN0aW5nIHNjaGVkdWxlIHRvIG5ldyBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfb2xkUmVnaXN0ZXJlZEFkZHJlc3MgQ3VycmVudCByZWdpc3RlcmVkIGFkZHJlc3MuCiAgICAvLy8gQHBhcmFtIF9uZXdSZWdpc3RlcmVkQWRkcmVzcyBBZGRyZXNzIHRvIG1pZ3JhdGUgdmVzdGluZyBzY2hlZHVsZSB0by4KICAgIGZ1bmN0aW9uIGNvbmZpcm1BZGRyZXNzQ2hhbmdlKGFkZHJlc3MgX29sZFJlZ2lzdGVyZWRBZGRyZXNzLCBhZGRyZXNzIF9uZXdSZWdpc3RlcmVkQWRkcmVzcykKICAgIHB1YmxpYwogICAgb25seU93bmVyCiAgICBwZW5kaW5nQWRkcmVzc0NoYW5nZVJlcXVlc3QoX29sZFJlZ2lzdGVyZWRBZGRyZXNzKQogICAgYWRkcmVzc05vdFJlZ2lzdGVyZWQoX25ld1JlZ2lzdGVyZWRBZGRyZXNzKQogICAgewogICAgICAgIGFkZHJlc3MgbmV3UmVnaXN0ZXJlZEFkZHJlc3MgPSBhZGRyZXNzQ2hhbmdlUmVxdWVzdHNbX29sZFJlZ2lzdGVyZWRBZGRyZXNzXTsKICAgICAgICByZXF1aXJlKG5ld1JlZ2lzdGVyZWRBZGRyZXNzID09IF9uZXdSZWdpc3RlcmVkQWRkcmVzcyk7CiAgICAgICAgLy8gcHJldmVudHMgcmFjZSBjb25kaXRpb24KCiAgICAgICAgVmVzdGluZ1NjaGVkdWxlIG1lbW9yeSB2ZXN0aW5nU2NoZWR1bGUgPSBzY2hlZHVsZXNbX29sZFJlZ2lzdGVyZWRBZGRyZXNzXTsKICAgICAgICBzY2hlZHVsZXNbbmV3UmVnaXN0ZXJlZEFkZHJlc3NdID0gdmVzdGluZ1NjaGVkdWxlOwoKICAgICAgICBkZWxldGUgc2NoZWR1bGVzW19vbGRSZWdpc3RlcmVkQWRkcmVzc107CiAgICAgICAgZGVsZXRlIGFkZHJlc3NDaGFuZ2VSZXF1ZXN0c1tfb2xkUmVnaXN0ZXJlZEFkZHJlc3NdOwoKICAgICAgICBBZGRyZXNzQ2hhbmdlQ29uZmlybWVkKF9vbGRSZWdpc3RlcmVkQWRkcmVzcywgX25ld1JlZ2lzdGVyZWRBZGRyZXNzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRBcHByb3ZlZFdhbGxldChhZGRyZXNzIF9hcHByb3ZlZFdhbGxldCkKICAgIHB1YmxpYwogICAgYWRkcmVzc05vdE51bGwoX2FwcHJvdmVkV2FsbGV0KQogICAgb25seU93bmVyIHsKICAgICAgICBhcHByb3ZlZFdhbGxldCA9IF9hcHByb3ZlZFdhbGxldDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUaW1lKCkgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIG5vdzsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfdGFyZ2V0KSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgVmVzdGluZ1NjaGVkdWxlIHN0b3JhZ2UgdmVzdGluZ1NjaGVkdWxlID0gc2NoZWR1bGVzW190YXJnZXRdOwogICAgICAgIHVpbnQgdG90YWxBbW91bnRWZXN0ZWQgPSBnZXRUb3RhbEFtb3VudFZlc3RlZCh2ZXN0aW5nU2NoZWR1bGUpOwogICAgICAgIHVpbnQgYW1vdW50V2l0aGRyYXdhYmxlID0gc2FmZVN1Yih0b3RhbEFtb3VudFZlc3RlZCwgdmVzdGluZ1NjaGVkdWxlLnRvdGFsQW1vdW50V2l0aGRyYXduKTsKICAgICAgICByZXR1cm4gYW1vdW50V2l0aGRyYXdhYmxlOwogICAgfQoKICAgIC8vLyBAZGV2IENhbGN1bGF0ZXMgdGhlIHRvdGFsIHRva2VucyB0aGF0IGhhdmUgYmVlbiB2ZXN0ZWQgZm9yIGEgdmVzdGluZyBzY2hlZHVsZSwgYXNzdW1pbmcgdGhlIHNjaGVkdWxlIGlzIHBhc3QgdGhlIGNsaWZmLgogICAgLy8vIEBwYXJhbSB2ZXN0aW5nU2NoZWR1bGUgVmVzdGluZyBzY2hlZHVsZSB1c2VkIHRvIGNhbGN1bGF0ZSB2ZXN0ZWQgdG9rZW5zLgogICAgLy8vIEByZXR1cm4gVG90YWwgdG9rZW5zIHZlc3RlZCBmb3IgYSB2ZXN0aW5nIHNjaGVkdWxlLgogICAgZnVuY3Rpb24gZ2V0VG90YWxBbW91bnRWZXN0ZWQoVmVzdGluZ1NjaGVkdWxlIHZlc3RpbmdTY2hlZHVsZSkKICAgIGludGVybmFsCiAgICB2aWV3CiAgICByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIGlmIChnZXRUaW1lKCkgPj0gdmVzdGluZ1NjaGVkdWxlLmVuZFRpbWVJblNlYykgewogICAgICAgICAgICByZXR1cm4gdmVzdGluZ1NjaGVkdWxlLnRvdGFsQW1vdW50OwogICAgICAgIH0KCiAgICAgICAgdWludCB0aW1lU2luY2VTdGFydEluU2VjID0gc2FmZVN1YihnZXRUaW1lKCksIHZlc3RpbmdTY2hlZHVsZS5zdGFydFRpbWVJblNlYyk7CiAgICAgICAgdWludCB0b3RhbFZlc3RpbmdUaW1lSW5TZWMgPSBzYWZlU3ViKHZlc3RpbmdTY2hlZHVsZS5lbmRUaW1lSW5TZWMsIHZlc3RpbmdTY2hlZHVsZS5zdGFydFRpbWVJblNlYyk7CiAgICAgICAgdWludCB0b3RhbEFtb3VudFZlc3RlZCA9IHNhZmVEaXYoCiAgICAgICAgICAgIHNhZmVNdWwodGltZVNpbmNlU3RhcnRJblNlYywgdmVzdGluZ1NjaGVkdWxlLnRvdGFsQW1vdW50KSwgdG90YWxWZXN0aW5nVGltZUluU2VjCiAgICAgICAgKTsKCiAgICAgICAgcmV0dXJuIHRvdGFsQW1vdW50VmVzdGVkOwogICAgfQp9'.
	

]
