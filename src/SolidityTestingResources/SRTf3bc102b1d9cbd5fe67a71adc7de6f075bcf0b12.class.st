Class {
	#name : #SRTf3bc102b1d9cbd5fe67a71adc7de6f075bcf0b12,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf3bc102b1d9cbd5fe67a71adc7de6f075bcf0b12 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9Cn0KCi8qKioqKgogICAgKiBPcmdpbmFsbHkgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5CiAgICAqIE1vZGlmaWVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9hZ2Fyd2FsYWthcnNoCiAgICAqLwppbnRlcmZhY2UgdG9rZW5SZWNpcGllbnQgeyBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWM7IH0KLyoqKioqCiAgICAqIEB0aXRsZSBCYXNpYyBUb2tlbgogICAgKiBAZGV2IEJhc2ljIFZlcnNpb24gb2YgYSBHZW5lcmljIFRva2VuCiAgICAqLwpjb250cmFjdCBFUkMyMEJhc2ljVG9rZW4gaXMgUGF1c2FibGV7CiAgICAvLyAxOCBkZWNpbWFscyBpcyB0aGUgc3Ryb25nbHkgc3VnZ2VzdGVkIGRlZmF1bHQsIGF2b2lkIGNoYW5naW5nIGl0CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICAvLyBUaGlzIGNyZWF0ZXMgYW4gYXJyYXkgd2l0aCBhbGwgYmFsYW5jZXMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIC8vIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CgogICAgLy8gVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgYnVybnQKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8vRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgICAgcmVxdWlyZShtc2cuZGF0YS5sZW5ndGggPj0gc2l6ZSArIDQpIDsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogSW50ZXJuYWwgdHJhbnNmZXIsIG9ubHkgY2FuIGJlIGNhbGxlZCBieSB0aGlzIGNvbnRyYWN0CiAgICAgKi8KICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHdoZW5Ob3RQYXVzZWQgaW50ZXJuYWwgewogICAgICAgIC8vIFByZXZlbnQgdHJhbnNmZXIgdG8gMHgwIGFkZHJlc3MuIFVzZSBidXJuKCkgaW5zdGVhZAogICAgICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7CiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSk7CiAgICAgICAgLy8gU2F2ZSB0aGlzIGZvciBhbiBhc3NlcnRpb24gaW4gdGhlIGZ1dHVyZQogICAgICAgIHVpbnQgcHJldmlvdXNCYWxhbmNlcyA9IGJhbGFuY2VzW19mcm9tXSArIGJhbGFuY2VzW190b107CiAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudAogICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgLy8gQXNzZXJ0cyBhcmUgdXNlZCB0byB1c2Ugc3RhdGljIGFuYWx5c2lzIHRvIGZpbmQgYnVncyBpbiB5b3VyIGNvZGUuIFRoZXkgc2hvdWxkIG5ldmVyIGZhaWwKICAgICAgICBhc3NlcnQoYmFsYW5jZXNbX2Zyb21dICsgYmFsYW5jZXNbX3RvXSA9PSBwcmV2aW91c0JhbGFuY2VzKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvdGhlciBhZGRyZXNzCiAgICAgKgogICAgICogU2VuZCBgX3ZhbHVlYCB0b2tlbnMgdG8gYF90b2AgaW4gYmVoYWxmIG9mIGBfZnJvbWAKICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAgKiBAcGFyYW0gX3ZhbHVlIHRoZSBhbW91bnQgdG8gc2VuZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB3aGVuTm90UGF1c2VkIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKTsgICAgIC8vIENoZWNrIGFsbG93YW5jZQogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXIgdG9rZW5zCiAgICAgKgogICAgICogU2VuZCBgX3ZhbHVlYCB0b2tlbnMgdG8gYF90b2AgZnJvbSB5b3VyIGFjY291bnQKICAgICAqCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCB0byBzZW5kCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgd2hlbk5vdFBhdXNlZCBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSBwdWJsaWMgewogICAgICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIENyZWF0ZSBgbWludGVkQW1vdW50YCB0b2tlbnMgYW5kIHNlbmQgaXQgdG8gYHRhcmdldGAKICAgICAqIEBwYXJhbSB0YXJnZXQgQWRkcmVzcyB0byByZWNlaXZlIHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSBtaW50ZWRBbW91bnQgdGhlIGFtb3VudCBvZiB0b2tlbnMgaXQgd2lsbCByZWNlaXZlCiAgICAgKi8KICAgIGZ1bmN0aW9uIG1pbnRUb2tlbihhZGRyZXNzIHRhcmdldCwgdWludDI1NiBtaW50ZWRBbW91bnQpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGJhbGFuY2VzW3RhcmdldF0gKz0gbWludGVkQW1vdW50OwogICAgICAgIHRvdGFsU3VwcGx5ICs9IG1pbnRlZEFtb3VudDsKICAgICAgICBUcmFuc2ZlcigwLCB0aGlzLCBtaW50ZWRBbW91bnQpOwogICAgICAgIFRyYW5zZmVyKHRoaXMsIHRhcmdldCwgbWludGVkQW1vdW50KTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBhbGxvd2FuY2UgZm9yIG90aGVyIGFkZHJlc3MKICAgICAqCiAgICAgKiBBbGxvd3MgYF9zcGVuZGVyYCB0byBzcGVuZCBubyBtb3JlIHRoYW4gYF92YWx1ZWAgdG9rZW5zIGluIHlvdXIgYmVoYWxmCiAgICAgKgogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIGF1dGhvcml6ZWQgdG8gc3BlbmQKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIG1heCBhbW91bnQgdGhleSBjYW4gc3BlbmQKICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBhbGxvd2FuY2UgZm9yIG90aGVyIGFkZHJlc3MgYW5kIG5vdGlmeQogICAgICoKICAgICAqIEFsbG93cyBgX3NwZW5kZXJgIHRvIHNwZW5kIG5vIG1vcmUgdGhhbiBgX3ZhbHVlYCB0b2tlbnMgaW4geW91ciBiZWhhbGYsIGFuZCB0aGVuIHBpbmcgdGhlIGNvbnRyYWN0IGFib3V0IGl0CiAgICAgKgogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIGF1dGhvcml6ZWQgdG8gc3BlbmQKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIG1heCBhbW91bnQgdGhleSBjYW4gc3BlbmQKICAgICAqIEBwYXJhbSBfZXh0cmFEYXRhIHNvbWUgZXh0cmEgaW5mb3JtYXRpb24gdG8gc2VuZCB0byB0aGUgYXBwcm92ZWQgY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsKICAgICAgICBpZiAoYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgewogICAgICAgICAgICBzcGVuZGVyLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBEZXN0cm95IHRva2VucwogICAgICoKICAgICAqIFJlbW92ZSBgX3ZhbHVlYCB0b2tlbnMgZnJvbSB0aGUgc3lzdGVtIGlycmV2ZXJzaWJseQogICAgICoKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiBtb25leSB0byBidXJuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSk7ICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOyAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIHRvdGFsU3VwcGx5IC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlcyB0b3RhbFN1cHBseQogICAgICAgIEJ1cm4obXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIERlc3Ryb3kgdG9rZW5zIGZyb20gb3RoZXIgYWNjb3VudAogICAgICoKICAgICAqIFJlbW92ZSBgX3ZhbHVlYCB0b2tlbnMgZnJvbSB0aGUgc3lzdGVtIGlycmV2ZXJzaWJseSBvbiBiZWhhbGYgb2YgYF9mcm9tYC4KICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gdGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgICogQHBhcmFtIF92YWx1ZSB0aGUgYW1vdW50IG9mIG1vbmV5IHRvIGJ1cm4KICAgICAqLwogICAgZnVuY3Rpb24gYnVybkZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUpOyAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgdGFyZ2V0ZWQgYmFsYW5jZSBpcyBlbm91Z2gKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKTsgICAgLy8gQ2hlY2sgYWxsb3dhbmNlCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgdGFyZ2V0ZWQgYmFsYW5jZQogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIncyBhbGxvd2FuY2UKICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRvdGFsU3VwcGx5CiAgICAgICAgQnVybihfZnJvbSwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAJICogUmV0dXJuIGJhbGFuY2Ugb2YgYW4gYWNjb3VudAogICAgICogQHBhcmFtIF9vd25lciB0aGUgYWRkcmVzcyB0byBnZXQgYmFsYW5jZQogIAkgKi8KICAJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgCQlyZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAJfQoKICAgIC8qKgogIAkgKiBSZXR1cm4gYWxsb3dhbmNlIGZvciBvdGhlciBhZGRyZXNzCiAgICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHNwZW5kIHRvIHRoZSBvdGhlcgogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIGF1dGhvcml6ZWQgdG8gc3BlbmQKICAJICovCiAgCWZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgCQlyZXR1cm4gYWxsb3dhbmNlW19vd25lcl1bX3NwZW5kZXJdOwogIAl9Cn0KCmNvbnRyYWN0IEpXQ1Rva2VuIGlzIEVSQzIwQmFzaWNUb2tlbiB7Cgl1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCglzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgICAgICA9ICJKV0MiOyAvL3Rva2VucyBuYW1lCglzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCAgICA9ICJKV0MiOyAvL3Rva2VuIHN5bWJvbAoJdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsgICAgLy90b2tlbiBkZWNpbWFsCglzdHJpbmcgcHVibGljIGNvbnN0YW50IHZlcnNpb24gICA9ICIxLjAiOyAvL3Rva2VucyB2ZXJzaW9uCgoJdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5QcmVTYWxlICAgICAgICAgPSAxMDAwMDAwMDAgKiAxMCoqZGVjaW1hbHM7Ly90b2tlbnMgZm9yIHByZS1zYWxlCgl1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlblB1YmxpY1NhbGUgICAgICA9IDQwMDAwMDAwMCAqIDEwKipkZWNpbWFsczsvL3Rva2VucyBmb3IgcHVibGljLXNhbGUKCXVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuUmVzZXJ2ZSAgICAgICAgID0gMzAwMDAwMDAwICogMTAqKmRlY2ltYWxzOy8vdG9rZW5zIGZvciByZXNlcnZlCgl1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlblRlYW1TdXBwb3J0ZXIgICA9IDEyMDAwMDAwMCAqIDEwKipkZWNpbWFsczsvL3Rva2VucyBmb3IgVGVhbSAmIFN1cHBvcnRlcgoJdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5BZHZpc29yUGFydG5lcnMgPSA4MDAwMDAwMCAgKiAxMCoqZGVjaW1hbHM7Ly90b2tlbnMgZm9yIEFkdmlzb3IKCglhZGRyZXNzIHB1YmxpYyBpY29Db250cmFjdDsKCgkvLyBjb25zdHJ1Y3RvcgoJZnVuY3Rpb24gSldDVG9rZW4oKSBwdWJsaWMgewoJCXRvdGFsU3VwcGx5ID0gdG9rZW5QcmVTYWxlICsgdG9rZW5QdWJsaWNTYWxlICsgdG9rZW5SZXNlcnZlICsgdG9rZW5UZWFtU3VwcG9ydGVyICsgdG9rZW5BZHZpc29yUGFydG5lcnM7Cgl9CgoJLyoqCgkgKiBTZXQgSUNPIENvbnRyYWN0IGZvciB0aGlzIHRva2VuIHRvIG1ha2Ugc3VyZSBjYWxsZWQgYnkgb3VyIElDTyBjb250cmFjdAoJICogQHBhcmFtIF9pY29Db250cmFjdCAtIElDTyBDb250cmFjdCBhZGRyZXNzCgkgKi8KCWZ1bmN0aW9uIHNldEljb0NvbnRyYWN0KGFkZHJlc3MgX2ljb0NvbnRyYWN0KSBwdWJsaWMgb25seU93bmVyIHsKCQlpZiAoX2ljb0NvbnRyYWN0ICE9IGFkZHJlc3MoMCkpIHsKCQkJaWNvQ29udHJhY3QgPSBfaWNvQ29udHJhY3Q7CgkJfQoJfQoKCS8qKgoJICogU2VsbCB0b2tlbnMgd2hlbiBJQ08uIE9ubHkgY2FsbGVkIGJ5IElDTyBDb250cmFjdAoJICogQHBhcmFtIF9yZWNpcGllbnQgLSBhZGRyZXNzIHNlbmQgRVRIIHRvIGJ1eSB0b2tlbnMKCSAqIEBwYXJhbSBfdmFsdWUgLSBhbW91bnQgb2YgRVRIcwoJICovCglmdW5jdGlvbiBzZWxsKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoJCWFzc2VydChfdmFsdWUgPiAwKTsKCQlyZXF1aXJlKG1zZy5zZW5kZXIgPT0gaWNvQ29udHJhY3QpOwoKCQliYWxhbmNlc1tfcmVjaXBpZW50XSA9IGJhbGFuY2VzW19yZWNpcGllbnRdLmFkZChfdmFsdWUpOwoKCQlUcmFuc2ZlcigweDAsIF9yZWNpcGllbnQsIF92YWx1ZSk7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCgkgKiBQYXkgYm9udXMgJiBhZmZpbGlhdGUgdG8gYWRkcmVzcwoJICogQHBhcmFtIF9yZWNpcGllbnQgLSBhZGRyZXNzIHRvIHJlY2VpdmUgYm9udXMgJiBhZmZpbGlhdGUKCSAqIEBwYXJhbSBfdmFsdWUgLSB2YWx1ZSBib251cyAmIGFmZmlsaWF0ZSB0byBnaXZlCgkgKi8KCWZ1bmN0aW9uIHBheUJvbnVzQWZmaWxpYXRlKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCQlhc3NlcnQoX3ZhbHVlID4gMCk7CgkJcmVxdWlyZShtc2cuc2VuZGVyID09IGljb0NvbnRyYWN0KTsKCgkJYmFsYW5jZXNbX3JlY2lwaWVudF0gPSBiYWxhbmNlc1tfcmVjaXBpZW50XS5hZGQoX3ZhbHVlKTsKCQl0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfdmFsdWUpOwoKCQlUcmFuc2ZlcigweDAsIF9yZWNpcGllbnQsIF92YWx1ZSk7CgkJcmV0dXJuIHRydWU7Cgl9Cn0KCi8qKgogKiBTdG9yZSBjb25maWcgb2YgcGhhc2UgSUNPCiAqLwpjb250cmFjdCBJY29QaGFzZSB7CiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgcGhhc2VQcmVzYWxlX0Zyb20gPSAxNTE3NDkzNjAwOy8vMTRoIDAxLzAyLzIwMTggR01UCiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgcGhhc2VQcmVzYWxlX1RvID0gMTUxODcwMzIwMDsvLzE0aCAxNS8wMi8yMDE4IEdNVAoKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBwaGFzZVB1YmxpY1NhbGUxX0Zyb20gPSAxNTIwNjkwNDAwOy8vMTRoIDEwLzAzLzIwMTggR01UCiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgcGhhc2VQdWJsaWNTYWxlMV9UbyA9IDE1MjExMjI0MDA7Ly8xNGggMTUvMDMvMjAxOCBHTVQKCiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgcGhhc2VQdWJsaWNTYWxlMl9Gcm9tID0gMTUyMTEyMjQwMDsvLzE0aCAxNS8wMy8yMDE4IEdNVAogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHBoYXNlUHVibGljU2FsZTJfVG8gPSAxNTIxNTU0NDAwOy8vMTRoIDIwLzAzLzIwMTggR01UCgogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHBoYXNlUHVibGljU2FsZTNfRnJvbSA9IDE1MjE1NTQ0MDA7Ly8xNGggMjAvMDMvMjAxOCBHTVQKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBwaGFzZVB1YmxpY1NhbGUzX1RvID0gMTUyMTk4NjQwMDsvLzE0aCAyNS8wMy8yMDE4IEdNVAp9CgovKioKICogVGhpcyBjb250cmFjdCB3aWxsIGdpdmUgYWZmaWxpYXRlIGZvciB1c2VyIHdoZW4gYnV5IHRva2Vucy4gVGhlIGFmZmlsaWF0ZSB3aWxsIGJlIHBhaWQgYWZ0ZXIgZmluaXNoaW5nIElDTwogKi8KY29udHJhY3QgQWZmaWxpYXRlIGlzIE93bmFibGUgewoKCS8vQ29udHJvbCBBZmZpbGlhdGUgZmVhdHVyZS4KCWJvb2wgcHVibGljIGlzQWZmaWxpYXRlOwoKCS8vQWZmaWxpYXRlIGxldmVsLCBpbml0IGlzIDEKCXVpbnQyNTYgcHVibGljIGFmZmlsaWF0ZUxldmVsID0gMTsKCgkvL0VhY2ggdXNlciB3aWxsIGhhdmUgZGlmZmVyZW50IHJhdGUKCW1hcHBpbmcodWludDI1NiA9PiB1aW50MjU2KSBwdWJsaWMgYWZmaWxpYXRlUmF0ZTsKCgkvL0tlZXAgYmFsYW5jZSBvZiB1c2VyCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHJlZmVycmFsQmFsYW5jZTsvL3JlZmVyZWU9PnZhbHVlCgoJbWFwcGluZyhhZGRyZXNzID0+IGFkZHJlc3MpIHB1YmxpYyByZWZlcnJhbDsvL3JlZmVyZWU9PnJlZmVycmVyCgltYXBwaW5nKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIHJlZmVycmFsSW5kZXg7Ly9pbmRleD0+cmVmZXJlZQoKCXVpbnQyNTYgcHVibGljIHJlZmVycmFsQ291bnQ7CgoJLy9hbW91bnQgb2YgYWNjb3VudHMgaGF2ZSBiZWVuIHBhaWQgYWZmaWxpYXRlCgl1aW50MjU2IHB1YmxpYyBpbmRleFBhaWRBZmZpbGlhdGU7CgoJLyoqCgkgKiBUaHJvdyBpZiBhZmZpbGlhdGUgaXMgZGlzYWJsZQoJICovCgltb2RpZmllciB3aGVuQWZmaWxpYXRlKCkgewoJCXJlcXVpcmUgKGlzQWZmaWxpYXRlKTsKCQlfOwoJfQoKCS8qKgoJICogY29uc3RydWN0b3IgYWZmaWxpYXRlIHdpdGggbGV2ZWwgMSByYXRlID0gMTAlCgkgKi8KCWZ1bmN0aW9uIEFmZmlsaWF0ZSgpIHB1YmxpYyB7CgkJaXNBZmZpbGlhdGU9dHJ1ZTsKCQlhZmZpbGlhdGVMZXZlbD0xOwoJCWFmZmlsaWF0ZVJhdGVbMF09MTA7Cgl9CgoJLyoqCgkgKiBFbmFibGUgYWZmaWxpYXRlIGZvciB0aGUgY29udHJhY3QKCSAqLwoJZnVuY3Rpb24gZW5hYmxlQWZmaWxpYXRlKCkgcHVibGljIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CgkJcmVxdWlyZSAoIWlzQWZmaWxpYXRlKTsKCQlpc0FmZmlsaWF0ZT10cnVlOwoJCXJldHVybiB0cnVlOwoJfQoKCS8qKgoJICogRGlzYWJsZSBhZmZpbGlhdGUgZm9yIHRoZSBjb250cmFjdAoJICovCglmdW5jdGlvbiBkaXNhYmxlQWZmaWxpYXRlKCkgcHVibGljIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CgkJcmVxdWlyZSAoaXNBZmZpbGlhdGUpOwoJCWlzQWZmaWxpYXRlPWZhbHNlOwoJCXJldHVybiB0cnVlOwoJfQoKCS8qKgoJICogUmV0dXJuIGN1cnJlbnQgYWZmaWxpYXRlIGxldmVsCgkgKi8KCWZ1bmN0aW9uIGdldEFmZmlsaWF0ZUxldmVsKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikKCXsKCQlyZXR1cm4gYWZmaWxpYXRlTGV2ZWw7Cgl9CgoJLyoqCgkgKiBVcGRhdGUgYWZmaWxpYXRlIGxldmVsIGJ5IG93bmVyCgkgKiBAcGFyYW0gX2xldmVsIC0gbmV3IGxldmVsCgkgKi8KCWZ1bmN0aW9uIHNldEFmZmlsaWF0ZUxldmVsKHVpbnQyNTYgX2xldmVsKSBwdWJsaWMgb25seU93bmVyIHdoZW5BZmZpbGlhdGUgcmV0dXJucyhib29sKQoJewoJCWFmZmlsaWF0ZUxldmVsPV9sZXZlbDsKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvKioKCSAqIEdldCByZWZlcnJlciBhZGRyZXNzCgkgKiBAcGFyYW0gX3JlZmVyZWUgLSB0aGUgcmVmZXJlZSBhZGRyZXNzCgkgKi8KCWZ1bmN0aW9uIGdldFJlZmVycmVyQWRkcmVzcyhhZGRyZXNzIF9yZWZlcmVlKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykKCXsKCQlyZXR1cm4gcmVmZXJyYWxbX3JlZmVyZWVdOwoJfQoKCS8qKgoJICogR2V0IHJlZmVyZWUgYWRkcmVzcwoJICogQHBhcmFtIF9yZWZlcnJlciAtIHRoZSByZWZlcnJlciBhZGRyZXNzCgkgKi8KCWZ1bmN0aW9uIGdldFJlZmVyZWVBZGRyZXNzKGFkZHJlc3MgX3JlZmVycmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzc1tdIF9yZWZlcmVlKQoJewoJCWFkZHJlc3NbXSBtZW1vcnkgcmVmZXJlZVRlbXAgPSBuZXcgYWRkcmVzc1tdKHJlZmVycmFsQ291bnQpOwoJCXVpbnQgY291bnQgPSAwOwoJCXVpbnQgaTsKCQlmb3IgKGk9MDsgaTxyZWZlcnJhbENvdW50OyBpKyspewoJCQlpZihyZWZlcnJhbFtyZWZlcnJhbEluZGV4W2ldXSA9PSBfcmVmZXJyZXIpewoJCQkJcmVmZXJlZVRlbXBbY291bnRdID0gcmVmZXJyYWxJbmRleFtpXTsKCgkJCQljb3VudCArPSAxOwoJCQl9CgkJfQoKCQlfcmVmZXJlZSA9IG5ldyBhZGRyZXNzW10oY291bnQpOwoJCWZvciAoaT0wOyBpPGNvdW50OyBpKyspCgkJCV9yZWZlcmVlW2ldID0gcmVmZXJlZVRlbXBbaV07Cgl9CgoJLyoqCgkgKiBNYXBwaW5nIHJlZmVyZWUgYWRkcmVzcyB3aXRoIHJlZmVycmVyIGFkZHJlc3MKCSAqIEBwYXJhbSBfcGFyZW50IC0gdGhlIHJlZmVycmVyIGFkZHJlc3MKCSAqIEBwYXJhbSBfY2hpbGQgLSB0aGUgcmVmZXJlZSBhZGRyZXNzCgkgKi8KCWZ1bmN0aW9uIHNldFJlZmVycmFsQWRkcmVzcyhhZGRyZXNzIF9wYXJlbnQsIGFkZHJlc3MgX2NoaWxkKSBwdWJsaWMgb25seU93bmVyIHdoZW5BZmZpbGlhdGUgcmV0dXJucyAoYm9vbCkKCXsKCQlyZXF1aXJlKF9wYXJlbnQgIT0gYWRkcmVzcygweDAwKSk7CgkJcmVxdWlyZShfY2hpbGQgIT0gYWRkcmVzcygweDAwKSk7CgoJCXJlZmVycmFsSW5kZXhbcmVmZXJyYWxDb3VudF09X2NoaWxkOwoJCXJlZmVycmFsW19jaGlsZF09X3BhcmVudDsKCQlyZWZlcnJhbENvdW50Kys7CgoJCXJlZmVycmFsQmFsYW5jZVtfY2hpbGRdPTA7CgoJCXJldHVybiB0cnVlOwoJfQoKCS8qKgoJICogR2V0IGFmZmlsaWF0ZSByYXRlIGJ5IGxldmVsCgkgKiBAcGFyYW0gX2xldmVsIC0gbGV2ZWwgdG8gZ2V0IGFmZmlsaWF0ZSByYXRlCgkgKi8KCWZ1bmN0aW9uIGdldEFmZmlsaWF0ZVJhdGUodWludDI1NiBfbGV2ZWwpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJhdGUpCgl7CgkJcmV0dXJuIGFmZmlsaWF0ZVJhdGVbX2xldmVsXTsKCX0KCgkvKioKCSAqIFNldCBhZmZpbGlhdGUgcmF0ZSBmb3IgbGV2ZWwKCSAqIEBwYXJhbSBfbGV2ZWwgLSB0aGUgbGV2ZWwgdG8gYmUgc2V0IHRoZSBuZXcgcmF0ZQoJICogQHBhcmFtIF9yYXRlIC0gbmV3IHJhdGUKCSAqLwoJZnVuY3Rpb24gc2V0QWZmaWxpYXRlUmF0ZSh1aW50MjU2IF9sZXZlbCwgdWludDI1NiBfcmF0ZSkgcHVibGljIG9ubHlPd25lciB3aGVuQWZmaWxpYXRlIHJldHVybnMgKGJvb2wpCgl7CgkJYWZmaWxpYXRlUmF0ZVtfbGV2ZWxdPV9yYXRlOwoJCXJldHVybiB0cnVlOwoJfQoKCS8qKgoJICogR2V0IGFmZmlsaWF0ZSBiYWxhbmNlIG9mIGFuIGFjY291bnQKCSAqIEBwYXJhbSBfcmVmZXJlZSAtIHRoZSBhZGRyZXNzIHRvIGdldCBhZmZpbGlhdGUgb2YKCSAqLwoJZnVuY3Rpb24gYmFsYW5jZUFmZmlsaWF0ZU9mKGFkZHJlc3MgX3JlZmVyZWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KQoJewoJCXJldHVybiByZWZlcnJhbEJhbGFuY2VbX3JlZmVyZWVdOwoJfQoKCS8qKgoJICogUGF5IGFmZmlsaWF0ZQoJICovCglmdW5jdGlvbiBwYXlBZmZpbGlhdGUoKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7Cn0KCi8qKgogKiBUaGlzIGNvbnRyYWN0IHdpbGwgZ2l2ZSBib251cyBmb3IgdXNlciB3aGVuIGJ1eSB0b2tlbnMuIFRoZSBib251cyB3aWxsIGJlIHBhaWQgYWZ0ZXIgZmluaXNoaW5nIElDTwogKi8KY29udHJhY3QgQm9udXMgaXMgSWNvUGhhc2UsIE93bmFibGUgewoJdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgoJLy9kZWNpbWFscyBvZiB0b2tlbnMKCXVpbnQyNTYgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCgkvL2VuYWJsZS9kaXNhYmxlCglib29sIHB1YmxpYyBpc0JvbnVzOwoKCS8vc3RvcmFnZQoJbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBib251c0FjY291bnRCYWxhbmNlczsKCW1hcHBpbmcodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgYm9udXNBY2NvdW50SW5kZXg7Cgl1aW50MjU2IHB1YmxpYyBib251c0FjY291bnRDb3VudDsKCgl1aW50MjU2IHB1YmxpYyBpbmRleFBhaWRCb251czsvL2Ftb3VudCBvZiBhY2NvdW50cyBoYXZlIGJlZW4gcGFpZCBib251cwoKCWZ1bmN0aW9uIEJvbnVzKCkgcHVibGljIHsKCQlpc0JvbnVzID0gdHJ1ZTsKCX0KCgkvKioKCSAqIEVuYWJsZSBib251cwoJICovCglmdW5jdGlvbiBlbmFibGVCb251cygpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkKCXsKCQlyZXF1aXJlKCFpc0JvbnVzKTsKCQlpc0JvbnVzPXRydWU7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCgkgKiBEaXNhYmxlIGJvbnVzCgkgKi8KCWZ1bmN0aW9uIGRpc2FibGVCb251cygpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkKCXsKCQlyZXF1aXJlKGlzQm9udXMpOwoJCWlzQm9udXM9ZmFsc2U7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCgkgKiBHZXQgYm9udXMgcGVyY2VudCBieSB0aW1lCgkgKi8KCWZ1bmN0aW9uIGdldFRpbWVCb251cygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKCQl1aW50MjU2IGJvbnVzID0gMDsKCgkJaWYobm93Pj1waGFzZVByZXNhbGVfRnJvbSAmJiBub3c8cGhhc2VQcmVzYWxlX1RvKXsKCQkJYm9udXMgPSAyMDsKCQl9IGVsc2UgaWYgKG5vdz49cGhhc2VQdWJsaWNTYWxlMV9Gcm9tICYmIG5vdzxwaGFzZVB1YmxpY1NhbGUxX1RvKSB7CgkJCWJvbnVzID0gMTA7CgkJfSBlbHNlIGlmIChub3c+PXBoYXNlUHVibGljU2FsZTJfRnJvbSAmJiBub3c8cGhhc2VQdWJsaWNTYWxlMl9UbykgewoJCQlib251cyA9IDY7CgkJfSBlbHNlIGlmIChub3c+PXBoYXNlUHVibGljU2FsZTNfRnJvbSAmJiBub3c8cGhhc2VQdWJsaWNTYWxlM19UbykgewoJCQlib251cyA9IDM7CgkJfQoKCQlyZXR1cm4gYm9udXM7Cgl9CgoJLyoqCgkgKiBHZXQgYm9udXMgYmFsYW5jZSBvZiBhbiBhY2NvdW50CgkgKiBAcGFyYW0gX293bmVyIC0gdGhlIGFkZHJlc3MgdG8gZ2V0IGJvbnVzIG9mCgkgKi8KCWZ1bmN0aW9uIGJhbGFuY2VCb251c09mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKQoJewoJCXJldHVybiBib251c0FjY291bnRCYWxhbmNlc1tfb3duZXJdOwoJfQoKCS8qKgoJICogR2V0IGJvbnVzIGJhbGFuY2Ugb2YgYW4gYWNjb3VudAoJICovCglmdW5jdGlvbiBwYXlCb251cygpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKfQoKLyoqCiAqIFRoaXMgY29udHJhY3Qgd2lsbCBzZW5kIHRva2VucyB3aGVuIGFuIGFjY291bnQgc2VuZCBldGgKICogTm90ZTogYmVmb3JlIHNlbmQgZXRoIHRvIHRva2VuLCBhZGRyZXNzIGhhcyB0byBiZSByZWdpc3RlcmVkIGJ5IHJlZ2lzdGVyUmVjaXBpZW50IGZ1bmN0aW9uCiAqLwpjb250cmFjdCBJY29Db250cmFjdCBpcyBJY29QaGFzZSwgT3duYWJsZSwgUGF1c2FibGUsIEFmZmlsaWF0ZSwgQm9udXMgewoJdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgoJSldDVG9rZW4gY2NjOwoKCXVpbnQyNTYgcHVibGljIHRvdGFsVG9rZW5TYWxlOwoJdWludDI1NiBwdWJsaWMgbWluQ29udHJpYnV0aW9uID0gMC41IGV0aGVyOy8vbWluaW11biBldGggdXNlZCB0byBidXkgdG9rZW5zCgl1aW50MjU2IHB1YmxpYyB0b2tlbkV4Y2hhbmdlUmF0ZSA9IDcwMDA7Ly8xRVRIPTcwMDAgdG9rZW5zCgl1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKCXVpbnQyNTYgcHVibGljIHRva2VuUmVtYWluUHJlU2FsZTsvL3Rva2VucyByZW1haW4gZm9yIHByZS1zYWxlCgl1aW50MjU2IHB1YmxpYyB0b2tlblJlbWFpblB1YmxpY1NhbGU7Ly90b2tlbnMgZm9yIHB1YmxpYy1zYWxlCgoJYWRkcmVzcyBwdWJsaWMgZXRoRnVuZERlcG9zaXQgPSAweEM2OWY3NjJDZjcyNTVjMTNlNjE2RThEOGViMzI4QTY1ODhjQTI4MjY7Ly9tdWx0aS1zaWcgd2FsbGV0CglhZGRyZXNzIHB1YmxpYyB0b2tlbkFkZHJlc3M7CgoJYm9vbCBwdWJsaWMgaXNGaW5hbGl6ZWQ7CgoJdWludDI1NiBwdWJsaWMgbWF4R2FzUmVmdW5kID0gMC4wMDQgZXRoZXI7Ly9tYXhpbXVtIGdhcyB1c2VkIHRvIHJlZnVuZCBmb3IgZWFjaCB0cmFuc2FjdGlvbgoKCS8vY29uc3RydWN0b3IKCWZ1bmN0aW9uIEljb0NvbnRyYWN0KGFkZHJlc3MgX3Rva2VuQWRkcmVzcykgcHVibGljIHsKCQl0b2tlbkFkZHJlc3MgPSBfdG9rZW5BZGRyZXNzOwoKCQljY2MgPSBKV0NUb2tlbih0b2tlbkFkZHJlc3MpOwoJCXRvdGFsVG9rZW5TYWxlID0gY2NjLnRva2VuUHJlU2FsZSgpICsgY2NjLnRva2VuUHVibGljU2FsZSgpOwoKCQl0b2tlblJlbWFpblByZVNhbGUgPSBjY2MudG9rZW5QcmVTYWxlKCk7Ly90b2tlbnMgcmVtYWluIGZvciBwcmUtc2FsZQoJCXRva2VuUmVtYWluUHVibGljU2FsZSA9IGNjYy50b2tlblB1YmxpY1NhbGUoKTsvL3Rva2VucyBmb3IgcHVibGljLXNhbGUKCgkJaXNGaW5hbGl6ZWQ9ZmFsc2U7Cgl9CgoJLyoqCgkgKiB3ZWIzIGNoYW5nZSB0b2tlbiBmcm9tIGV0aAoJICogQHBhcmFtIF92YWx1ZSAtIGFtb3VudCBvZiBFVEggdG8gY29udmVydCB0byB0b2tlbgoJICovCglmdW5jdGlvbiBjaGFuZ2VFVEgyVG9rZW4odWludDI1NiBfdmFsdWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKCQl1aW50MjU2IGV0aGVyUmVjZXYgPSBfdmFsdWUgKyBtYXhHYXNSZWZ1bmQ7CgkJcmVxdWlyZSAoZXRoZXJSZWNldiA+PSBtaW5Db250cmlidXRpb24pOwoKCQl1aW50MjU2IHJhdGUgPSBnZXRUb2tlbkV4Y2hhbmdlUmF0ZSgpOwoKCQl1aW50MjU2IHRva2VucyA9IGV0aGVyUmVjZXYubXVsKHJhdGUpOwoKCQkvL2dldCBjdXJyZW50IHBoYXNlIG9mIElDTwoJCXVpbnQyNTYgcGhhc2VJQ08gPSBnZXRDdXJyZW50SUNPUGhhc2UoKTsKCQl1aW50MjU2IHRva2VuUmVtYWluID0gMDsKCQlpZihwaGFzZUlDTyA9PSAxKXsvL3ByZS1zYWxlCgkJCXRva2VuUmVtYWluID0gdG9rZW5SZW1haW5QcmVTYWxlOwoJCX0gZWxzZSBpZiAocGhhc2VJQ08gPT0gMiB8fCBwaGFzZUlDTyA9PSAzIHx8IHBoYXNlSUNPID09IDQpIHsKCQkJdG9rZW5SZW1haW4gPSB0b2tlblJlbWFpblB1YmxpY1NhbGU7CgkJfQoKCQlpZiAodG9rZW5SZW1haW4gPCB0b2tlbnMpIHsKCQkJdG9rZW5zPXRva2VuUmVtYWluOwoJCX0KCgkJcmV0dXJuIHRva2VuczsKCX0KCgkvKioKCSAqIHdpbGwgYmUgY2FsbGVkIHdoZW4gdXNlciBzZW5kIGV0aCB0byBidXkgdG9rZW4KCSAqLwoJZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgd2hlbk5vdFBhdXNlZCB7CgkJcmVxdWlyZSAoIWlzRmluYWxpemVkKTsKCQlyZXF1aXJlIChtc2cuc2VuZGVyICE9IGFkZHJlc3MoMCkpOwoKCQl1aW50MjU2IGV0aGVyUmVjZXYgPSBtc2cudmFsdWUgKyBtYXhHYXNSZWZ1bmQ7CgkJcmVxdWlyZSAoZXRoZXJSZWNldiA+PSBtaW5Db250cmlidXRpb24pOwoKCQkvL2dldCBjdXJyZW50IHRva2VuIGV4Y2hhbmdlIHJhdGUKCQl0b2tlbkV4Y2hhbmdlUmF0ZSA9IGdldFRva2VuRXhjaGFuZ2VSYXRlKCk7CgoJCXVpbnQyNTYgdG9rZW5zID0gZXRoZXJSZWNldi5tdWwodG9rZW5FeGNoYW5nZVJhdGUpOwoKCQkvL2dldCBjdXJyZW50IHBoYXNlIG9mIElDTwoJCXVpbnQyNTYgcGhhc2VJQ08gPSBnZXRDdXJyZW50SUNPUGhhc2UoKTsKCgkJcmVxdWlyZShwaGFzZUlDTyE9MCk7CgoJCXVpbnQyNTYgdG9rZW5SZW1haW4gPSAwOwoJCWlmKHBoYXNlSUNPID09IDEpey8vcHJlLXNhbGUKCQkJdG9rZW5SZW1haW4gPSB0b2tlblJlbWFpblByZVNhbGU7CgkJfSBlbHNlIGlmIChwaGFzZUlDTyA9PSAyIHx8IHBoYXNlSUNPID09IDMgfHwgcGhhc2VJQ08gPT0gNCkgewoJCQl0b2tlblJlbWFpbiA9IHRva2VuUmVtYWluUHVibGljU2FsZTsKCQl9CgoJCS8vdGhyb3cgaWYgdG9rZW5SZW1haW49PTAKCQlyZXF1aXJlKHRva2VuUmVtYWluPjApOwoKCQlpZiAodG9rZW5SZW1haW4gPCB0b2tlbnMpIHsKCQkJLy9pZiB0b2tlbnMgaXMgbm90IGVub3VnaCB0byBidXkKCgkJCXVpbnQyNTYgdG9rZW5zVG9SZWZ1bmQgPSB0b2tlbnMuc3ViKHRva2VuUmVtYWluKTsKCQkJdWludDI1NiBldGhlclRvUmVmdW5kID0gdG9rZW5zVG9SZWZ1bmQgLyB0b2tlbkV4Y2hhbmdlUmF0ZTsKCgkJCS8vcmVmdW5kIGV0aCB0byBidXllcgoJCQltc2cuc2VuZGVyLnRyYW5zZmVyKGV0aGVyVG9SZWZ1bmQpOwoKCQkJdG9rZW5zPXRva2VuUmVtYWluOwoJCQlldGhlclJlY2V2ID0gZXRoZXJSZWNldi5zdWIoZXRoZXJUb1JlZnVuZCk7CgoJCQl0b2tlblJlbWFpbiA9IDA7CgkJfSBlbHNlIHsKCQkJdG9rZW5SZW1haW4gPSB0b2tlblJlbWFpbi5zdWIodG9rZW5zKTsKCQl9CgoJCS8vc3RvcmUgdG9rZW4gcmVtYWluIGJ5IHBoYXNlCgkJaWYocGhhc2VJQ08gPT0gMSl7Ly9wcmUtc2FsZQoJCQl0b2tlblJlbWFpblByZVNhbGUgPSB0b2tlblJlbWFpbjsKCQl9IGVsc2UgaWYgKHBoYXNlSUNPID09IDIgfHwgcGhhc2VJQ08gPT0gMyB8fCBwaGFzZUlDTyA9PSA0KSB7CgkJCXRva2VuUmVtYWluUHVibGljU2FsZSA9IHRva2VuUmVtYWluOwoJCX0KCgkJLy9zZW5kIHRva2VuCgkJY2NjLnNlbGwobXNnLnNlbmRlciwgdG9rZW5zKTsKCQlldGhGdW5kRGVwb3NpdC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwoKCQkvL2JvbnVzCgkJaWYoaXNCb251cyl7CgkJCS8vYm9udXMgdGltZQoJCQl1aW50MjU2IGJvbnVzVGltZVRva2VuID0gdG9rZW5zLm11bChnZXRUaW1lQm9udXMoKSkvMTAwOwoKCQkJLy9zdG9yZSBib251cwoJCQlpZihib251c0FjY291bnRCYWxhbmNlc1ttc2cuc2VuZGVyXT09MCl7Ly9uZXcKCQkJCWJvbnVzQWNjb3VudEluZGV4W2JvbnVzQWNjb3VudENvdW50XT1tc2cuc2VuZGVyOwoJCQkJYm9udXNBY2NvdW50Q291bnQrKzsKCQkJfQoKCQkJYm9udXNBY2NvdW50QmFsYW5jZXNbbXNnLnNlbmRlcl09Ym9udXNBY2NvdW50QmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKGJvbnVzVGltZVRva2VuKTsKCQl9CgoJCS8vYWZmaWxpYXRlCgkJaWYoaXNBZmZpbGlhdGUpewoJCQlhZGRyZXNzIGNoaWxkPW1zZy5zZW5kZXI7CgkJCWZvcih1aW50MjU2IGk9MDsgaTxhZmZpbGlhdGVMZXZlbDsgaSsrKXsKCQkJCXVpbnQyNTYgZ2lmdFRva2VuPWFmZmlsaWF0ZVJhdGVbaV0ubXVsKHRva2VucykvMTAwOwoKCQkJCWFkZHJlc3MgcGFyZW50ID0gcmVmZXJyYWxbY2hpbGRdOwoJCQkJaWYocGFyZW50ICE9IGFkZHJlc3MoMHgwMCkpey8vaGFzIGFmZmlsaWF0ZQoJCQkJCXJlZmVycmFsQmFsYW5jZVtjaGlsZF09cmVmZXJyYWxCYWxhbmNlW2NoaWxkXS5hZGQoZ2lmdFRva2VuKTsKCQkJCX0KCgkJCQljaGlsZD1wYXJlbnQ7CgkJCX0KCQl9Cgl9CgoJLyoqCgkgKiBQYXkgYWZmaWxpYXRlIHRvIGFkZHJlc3MuIENhbGxlZCB3aGVuIElDTyBmaW5pc2gKCSAqLwoJZnVuY3Rpb24gcGF5QWZmaWxpYXRlKCkgcHVibGljIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCQl1aW50MjU2IHRvSW5kZXggPSBpbmRleFBhaWRBZmZpbGlhdGUgKyAxNTsKCQlpZihyZWZlcnJhbENvdW50IDwgdG9JbmRleCkKCQkJdG9JbmRleCA9IHJlZmVycmFsQ291bnQ7CgoJCWZvcih1aW50MjU2IGk9aW5kZXhQYWlkQWZmaWxpYXRlOyBpPHRvSW5kZXg7IGkrKykgewoJCQlhZGRyZXNzIHJlZmVyZWUgPSByZWZlcnJhbEluZGV4W2ldOwoKCQkJaWYocmVmZXJyYWxCYWxhbmNlW3JlZmVyZWVdPjApCgkJCQlwYXlBZmZpbGlhdGUxQWRkcmVzcyhyZWZlcmVlKTsKCQl9CgoJCXJldHVybiB0cnVlOwoJfQoKCS8qKgoJICogUGF5IGFmZmlsaWF0ZSB0byBvbmx5IGEgYWRkcmVzcwoJICogQHBhcmFtIF9yZWZlcmVlIC0gdGhlIGFkZHJlc3Mgb2YgcmVmZXJlZQoJICovCglmdW5jdGlvbiBwYXlBZmZpbGlhdGUxQWRkcmVzcyhhZGRyZXNzIF9yZWZlcmVlKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoJCWFkZHJlc3MgcmVmZXJyZXIgPSByZWZlcnJhbFtfcmVmZXJlZV07CgkJY2NjLnBheUJvbnVzQWZmaWxpYXRlKHJlZmVycmVyLCByZWZlcnJhbEJhbGFuY2VbX3JlZmVyZWVdKTsKCgkJcmVmZXJyYWxCYWxhbmNlW19yZWZlcmVlXT0wOwoJCXJldHVybiB0cnVlOwoJfQoKCS8qKgoJICogUGF5IGJvbnVzIHRvIGFkZHJlc3MuIENhbGxlZCB3aGVuIElDTyBmaW5pc2gKCSAqLwoJZnVuY3Rpb24gcGF5Qm9udXMoKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoJCXVpbnQyNTYgdG9JbmRleCA9IGluZGV4UGFpZEJvbnVzICsgMTU7CgkJaWYoYm9udXNBY2NvdW50Q291bnQgPCB0b0luZGV4KQoJCQl0b0luZGV4ID0gYm9udXNBY2NvdW50Q291bnQ7CgoJCWZvcih1aW50MjU2IGk9aW5kZXhQYWlkQm9udXM7IGk8dG9JbmRleDsgaSsrKQoJCXsKCQkJaWYoYm9udXNBY2NvdW50QmFsYW5jZXNbYm9udXNBY2NvdW50SW5kZXhbaV1dPjApCgkJCQlwYXlCb251czFBZGRyZXNzKGJvbnVzQWNjb3VudEluZGV4W2ldKTsKCQl9CgoJCXJldHVybiB0cnVlOwoJfQoKCS8qKgoJICogUGF5IGJvbnVzIHRvIG9ubHkgYSBhZGRyZXNzCgkgKiBAcGFyYW0gX2FkZHJlc3MgLSB0aGUgYWRkcmVzcyB0byBwYXkgYm9udXMKCSAqLwoJZnVuY3Rpb24gcGF5Qm9udXMxQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoJCWNjYy5wYXlCb251c0FmZmlsaWF0ZShfYWRkcmVzcywgYm9udXNBY2NvdW50QmFsYW5jZXNbX2FkZHJlc3NdKTsKCQlib251c0FjY291bnRCYWxhbmNlc1tfYWRkcmVzc109MDsKCQlyZXR1cm4gdHJ1ZTsKCX0KCglmdW5jdGlvbiBmaW5hbGl6ZSgpIGV4dGVybmFsIG9ubHlPd25lciB7CgkJcmVxdWlyZSAoIWlzRmluYWxpemVkKTsKCQkvLyBtb3ZlIHRvIG9wZXJhdGlvbmFsCgkJaXNGaW5hbGl6ZWQgPSB0cnVlOwoJCXBheUFmZmlsaWF0ZSgpOwoJCXBheUJvbnVzKCk7CgkJZXRoRnVuZERlcG9zaXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKCX0KCgkvKioKCSAqIEdldCB0b2tlbiBleGNoYW5nZSByYXRlCgkgKi8KCWZ1bmN0aW9uIGdldFRva2VuRXhjaGFuZ2VSYXRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NiByYXRlKSB7CgkJcmF0ZSA9IHRva2VuRXhjaGFuZ2VSYXRlOwoJCWlmKG5vdzxwaGFzZVByZXNhbGVfVG8pewoJCQlpZihub3c+PXBoYXNlUHJlc2FsZV9Gcm9tKQoJCQkJcmF0ZSA9IDEwMDAwOwoJCX0gZWxzZSBpZihub3c8cGhhc2VQdWJsaWNTYWxlM19Ubyl7CgkJCXJhdGUgPSA3MDAwOwoJCX0KCX0KCgkvKioKCSAqIEdldCB0aGUgY3VycmVudCBJQ08gcGhhc2UKCSAqLwoJZnVuY3Rpb24gZ2V0Q3VycmVudElDT1BoYXNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NiBwaGFzZSkgewoJCXBoYXNlID0gMDsKCQlpZihub3c+PXBoYXNlUHJlc2FsZV9Gcm9tICYmIG5vdzxwaGFzZVByZXNhbGVfVG8pewoJCQlwaGFzZSA9IDE7CgkJfSBlbHNlIGlmIChub3c+PXBoYXNlUHVibGljU2FsZTFfRnJvbSAmJiBub3c8cGhhc2VQdWJsaWNTYWxlMV9UbykgewoJCQlwaGFzZSA9IDI7CgkJfSBlbHNlIGlmIChub3c+PXBoYXNlUHVibGljU2FsZTJfRnJvbSAmJiBub3c8cGhhc2VQdWJsaWNTYWxlMl9UbykgewoJCQlwaGFzZSA9IDM7CgkJfSBlbHNlIGlmIChub3c+PXBoYXNlUHVibGljU2FsZTNfRnJvbSAmJiBub3c8cGhhc2VQdWJsaWNTYWxlM19UbykgewoJCQlwaGFzZSA9IDQ7CgkJfQoJfQoKCS8qKgoJICogR2V0IGFtb3VudCBvZiB0b2tlbnMgdGhhdCBiZSBzb2xkCgkgKi8KCWZ1bmN0aW9uIGdldFRva2VuU29sZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgdG9rZW5Tb2xkKSB7CgkJLy9nZXQgY3VycmVudCBwaGFzZSBvZiBJQ08KCQl1aW50MjU2IHBoYXNlSUNPID0gZ2V0Q3VycmVudElDT1BoYXNlKCk7CgkJdG9rZW5Tb2xkID0gMDsKCQlpZihwaGFzZUlDTyA9PSAxKXsvL3ByZS1zYWxlCgkJCXRva2VuU29sZCA9IGNjYy50b2tlblByZVNhbGUoKS5zdWIodG9rZW5SZW1haW5QcmVTYWxlKTsKCQl9IGVsc2UgaWYgKHBoYXNlSUNPID09IDIgfHwgcGhhc2VJQ08gPT0gMyB8fCBwaGFzZUlDTyA9PSA0KSB7CgkJCXRva2VuU29sZCA9IGNjYy50b2tlblByZVNhbGUoKS5zdWIodG9rZW5SZW1haW5QcmVTYWxlKSArIGNjYy50b2tlblB1YmxpY1NhbGUoKS5zdWIodG9rZW5SZW1haW5QdWJsaWNTYWxlKTsKCQl9Cgl9CgoJLyoqCgkgKiBTZXQgdG9rZW4gZXhjaGFuZ2UgcmF0ZQoJICogQHBhcmFtIF90b2tlbkV4Y2hhbmdlUmF0ZSAtIHJhdGUgb2YgZXRoLXRva2VuCgkgKi8KCWZ1bmN0aW9uIHNldFRva2VuRXhjaGFuZ2VSYXRlKHVpbnQyNTYgX3Rva2VuRXhjaGFuZ2VSYXRlKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKCQlyZXF1aXJlKF90b2tlbkV4Y2hhbmdlUmF0ZT4wKTsKCQl0b2tlbkV4Y2hhbmdlUmF0ZT1fdG9rZW5FeGNoYW5nZVJhdGU7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCgkgKiBzZXQgbWluIGV0aCBjb250cmlidXRlCgkgKiBAcGFyYW0gX21pbkNvbnRyaWJ1dGlvbiAtIG1pbiBldGggdG8gY29udHJpYnV0ZQoJICovCglmdW5jdGlvbiBzZXRNaW5Db250cmlidXRpb24odWludDI1NiBfbWluQ29udHJpYnV0aW9uKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKCQlyZXF1aXJlKF9taW5Db250cmlidXRpb24+MCk7CgkJbWluQ29udHJpYnV0aW9uPV9taW5Db250cmlidXRpb247CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCgkgKiBDaGFuZ2UgbXVsdGktc2lnIGFkZHJlc3MsIHRoZSBhZGRyZXNzIHRvIHJlY2VpdmUgRVRICgkgKiBAcGFyYW0gX2V0aEZ1bmREZXBvc2l0IC0gbmV3IG11bHRpLXNpZyBhZGRyZXNzCgkgKi8KCWZ1bmN0aW9uIHNldEV0aEZ1bmREZXBvc2l0KGFkZHJlc3MgX2V0aEZ1bmREZXBvc2l0KSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKCQlyZXF1aXJlKF9ldGhGdW5kRGVwb3NpdCAhPSBhZGRyZXNzKDApKTsKCQlldGhGdW5kRGVwb3NpdD1fZXRoRnVuZERlcG9zaXQ7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCgkgKiBTZXQgbWF4IGdhcyB0byByZWZ1bmQgd2hlbiBhbiBhZGRyZXNzIHNlbmQgRVRIIHRvIGJ1eSB0b2tlbnMKCSAqIEBwYXJhbSBfbWF4R2FzUmVmdW5kIC0gbWF4IGdhcwoJICovCglmdW5jdGlvbiBzZXRNYXhHYXNSZWZ1bmQodWludDI1NiBfbWF4R2FzUmVmdW5kKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKCQlyZXF1aXJlKF9tYXhHYXNSZWZ1bmQgPiAwKTsKCQltYXhHYXNSZWZ1bmQgPSBfbWF4R2FzUmVmdW5kOwoJCXJldHVybiB0cnVlOwoJfQp9'.
	

]
