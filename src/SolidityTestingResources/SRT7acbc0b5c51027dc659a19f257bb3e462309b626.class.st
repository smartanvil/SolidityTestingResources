Class {
	#name : #SRT7acbc0b5c51027dc659a19f257bb3e462309b626,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7acbc0b5c51027dc659a19f257bb3e462309b626 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMDsKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IEFkZHMgb25seU93bmVyIG1vZGlmaWVyLiBTdWJjb250cmFjdHMgc2hvdWxkIGltcGxlbWVudCBjaGVja093bmVyIHRvIGNoZWNrIGlmIGNhbGxlciBpcyBvd25lci4KICovCmNvbnRyYWN0IE93bmFibGUgewogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIGNoZWNrT3duZXIoKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrT3duZXIoKSBpbnRlcm5hbDsKfQoKLyoqCiAqIEB0aXRsZSBPd25hYmxlSW1wbAogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlSW1wbCBpcyBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlSW1wbCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBmdW5jdGlvbiBjaGVja093bmVyKCkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9Cn0KCi8qKgogKiBAdGl0bGUgUmVhZC1vbmx5IEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IFJlYWRPbmx5VG9rZW4gewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBUb2tlbiBpcyBSZWFkT25seVRva2VuIHsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IE1pbnRhYmxlVG9rZW4gaXMgVG9rZW4gewogICAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKTsKfQoKLyoqCiAqIEB0aXRsZSBTYWxlIGNvbnRyYWN0IGZvciBEYW9ub21pYyBwbGF0Zm9ybSBzaG91bGQgaW1wbGVtZW50IHRoaXMKICovCmNvbnRyYWN0IFNhbGUgewogICAgLyoqCiAgICAgKiBAZGV2IFRoaXMgZXZlbnQgc2hvdWxkIGJlIGVtaXR0ZWQgd2hlbiB1c2VyIGJ1eXMgc29tZXRoaW5nCiAgICAgKi8KICAgIGV2ZW50IFB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBidXllciwgYWRkcmVzcyB0b2tlbiwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBzb2xkLCB1aW50MjU2IGJvbnVzKTsKICAgIC8qKgogICAgICogQGRldiBTaG91bGQgYmUgZW1pdHRlZCBpZiBuZXcgcGF5bWVudCBtZXRob2QgYWRkZWQKICAgICAqLwogICAgZXZlbnQgUmF0ZUFkZChhZGRyZXNzIHRva2VuKTsKICAgIC8qKgogICAgICogQGRldiBTaG91bGQgYmUgZW1pdHRlZCBpZiBwYXltZW50IG1ldGhvZCByZW1vdmVkCiAgICAgKi8KICAgIGV2ZW50IFJhdGVSZW1vdmUoYWRkcmVzcyB0b2tlbik7CgogICAgLyoqCiAgICAgKiBAZGV2IENhbGN1bGF0ZSByYXRlIGZvciBzcGVjaWZpZWQgcGF5bWVudCBtZXRob2QKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0UmF0ZShhZGRyZXNzIHRva2VuKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1Nik7CiAgICAvKioKICAgICAqIEBkZXYgQ2FsY3VsYXRlIGN1cnJlbnQgYm9udXMgaW4gdG9rZW5zCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldEJvbnVzKHVpbnQyNTYgc29sZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpOwp9CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqIEBkZXYgdGhpcyB2ZXJzaW9uIGNvcGllZCBmcm9tIHplcHBlbGluLXNvbGlkaXR5LCBjb25zdGFudCBjaGFuZ2VkIHRvIHB1cmUKICovCmxpYnJhcnkgU2FmZU1hdGggewogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAoYSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCi8qKgogKiBAdGl0bGUgVG9rZW4gcmVwcmVzZW50cyBzb21lIGV4dGVybmFsIHZhbHVlIChmb3IgZXhhbXBsZSwgQlRDKQogKi8KY29udHJhY3QgRXh0ZXJuYWxUb2tlbiBpcyBUb2tlbiB7CiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgYnl0ZXMgZGF0YSk7CiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUsIGJ5dGVzIGRhdGEpOwoKICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWM7Cn0KCi8qKgogKiBAZGV2IFRoaXMgYWRhcHRlciBoZWxwcyB0byByZWNlaXZlIHRva2Vucy4gSXQgaGFzIHNvbWUgc3ViY29udHJhY3RzIGZvciBkaWZmZXJlbnQgdG9rZW5zOgogKiAgIEVSQzIwUmVjZWl2ZUFkYXB0ZXIgLSBmb3IgcmVjZWl2aW5nIHNpbXBsZSBFUkMyMCB0b2tlbnMKICogICBFUkMyMjNSZWNlaXZlQWRhcHRlciAtIGZvciByZWNlaXZpbmcgRVJDMjIzIHRva2VucwogKiAgIFJlY2VpdmVBcHByb3ZhbEFkYXB0ZXIgLSBmb3IgcmVjZWl2aW5nIEVSQzIwIHRva2VucyB3aGVuIHRva2VuIG5vdGlmaWVzIHJlY2VpdmVyIHdpdGggcmVjZWl2ZUFwcHJvdmFsCiAqICAgRXRoZXJSZWNlaXZlQWRhcHRlciAtIGZvciByZWNlaXZpbmcgZXRoZXIgKG9uUmVjZWl2ZSBjYWxsYmFjayB3aWxsIGJlIHVzZWQpLiB0aGlzIGlzIG5lZWRlZCBmb3IgaGFuZGxpbmcgZXRoZXIgbGlrZSB0b2tlbnMKICogICBDb21wYXRSZWNlaXZlQXBwcm92YWwgLSBpbXBsZW1lbnRzIGFsbCB0aGVzZSBhZGFwdGVycwogKi8KY29udHJhY3QgUmVjZWl2ZUFkYXB0ZXIgewoKICAgIC8qKgogICAgICogQGRldiBSZWNlaXZlIHRva2VucyBmcm9tIHNvbWVvbmUuIE93bmVyIG9mIHRoZSB0b2tlbnMgc2hvdWxkIGFwcHJvdmUgZmlyc3QKICAgICAqLwogICAgZnVuY3Rpb24gb25SZWNlaXZlKGFkZHJlc3MgX3Rva2VuLCBhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGludGVybmFsOwp9CgovKioKICogQGRldiBIZWxwcyB0byByZWNlaXZlIEVSQzIwLWNvbXBsYWludCB0b2tlbnMuIE93bmVyIHNob3VsZCBjYWxsIHRva2VuLmFwcHJvdmUgZmlyc3QKICovCmNvbnRyYWN0IEVSQzIwUmVjZWl2ZUFkYXB0ZXIgaXMgUmVjZWl2ZUFkYXB0ZXIgewogICAgZnVuY3Rpb24gcmVjZWl2ZShhZGRyZXNzIF90b2tlbiwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgewogICAgICAgIFRva2VuIHRva2VuID0gVG9rZW4oX3Rva2VuKTsKICAgICAgICB0b2tlbi50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgX3ZhbHVlKTsKICAgICAgICBvblJlY2VpdmUoX3Rva2VuLCBtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMjMgVG9rZW5SZWNlaXZlciBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIyMwogKi8KY29udHJhY3QgVG9rZW5SZWNlaXZlciB7CiAgICBmdW5jdGlvbiBvblRva2VuVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWM7Cn0KCi8qKgogKiBAZGV2IEhlbHBzIHRvIHJlY2VpdmUgRVJDMjIzLWNvbXBsYWludCB0b2tlbnMuIEVSQzIyMyBUb2tlbiBjb250cmFjdCBzaG91bGQgbm90aWZ5IHJlY2VpdmVyLgogKi8KY29udHJhY3QgRVJDMjIzUmVjZWl2ZUFkYXB0ZXIgaXMgVG9rZW5SZWNlaXZlciwgUmVjZWl2ZUFkYXB0ZXIgewogICAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHB1YmxpYyB7CiAgICAgICAgb25SZWNlaXZlKG1zZy5zZW5kZXIsIF9mcm9tLCBfdmFsdWUsIF9kYXRhKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvblRva2VuVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgewogICAgICAgIG9uUmVjZWl2ZShtc2cuc2VuZGVyLCBfZnJvbSwgX3ZhbHVlLCBfZGF0YSk7CiAgICB9Cn0KCmNvbnRyYWN0IEV0aGVyUmVjZWl2ZXIgewoJZnVuY3Rpb24gcmVjZWl2ZVdpdGhEYXRhKGJ5dGVzIF9kYXRhKSBwYXlhYmxlIHB1YmxpYzsKfQoKY29udHJhY3QgRXRoZXJSZWNlaXZlQWRhcHRlciBpcyBFdGhlclJlY2VpdmVyLCBSZWNlaXZlQWRhcHRlciB7CiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHB1YmxpYyB7CiAgICAgICAgcmVjZWl2ZVdpdGhEYXRhKCIiKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWNlaXZlV2l0aERhdGEoYnl0ZXMgX2RhdGEpIHBheWFibGUgcHVibGljIHsKICAgICAgICBvblJlY2VpdmUoYWRkcmVzcygwKSwgbXNnLnNlbmRlciwgbXNnLnZhbHVlLCBfZGF0YSk7CiAgICB9Cn0KCi8qKgogKiBAZGV2IFRoaXMgUmVjZWl2ZUFkYXB0ZXIgc3VwcG9ydHMgYWxsIHBvc3NpYmxlIHRva2VucwogKi8KY29udHJhY3QgQ29tcGF0UmVjZWl2ZUFkYXB0ZXIgaXMgRVJDMjBSZWNlaXZlQWRhcHRlciwgRVJDMjIzUmVjZWl2ZUFkYXB0ZXIsIEV0aGVyUmVjZWl2ZUFkYXB0ZXIgewoKfQoKY29udHJhY3QgQWJzdHJhY3RTYWxlIGlzIFNhbGUsIENvbXBhdFJlY2VpdmVBZGFwdGVyLCBPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIGV2ZW50IFdpdGhkcmF3KGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQnVybihhZGRyZXNzIHRva2VuLCB1aW50MjU2IHZhbHVlLCBieXRlcyBkYXRhKTsKCiAgICBmdW5jdGlvbiBvblJlY2VpdmUoYWRkcmVzcyBfdG9rZW4sIGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQyNTYgc29sZCA9IGdldFNvbGQoX3Rva2VuLCBfdmFsdWUpOwogICAgICAgIHJlcXVpcmUoc29sZCA+IDApOwogICAgICAgIHVpbnQyNTYgYm9udXMgPSBnZXRCb251cyhzb2xkKTsKICAgICAgICBhZGRyZXNzIGJ1eWVyOwogICAgICAgIGlmIChfZGF0YS5sZW5ndGggPT0gMjApIHsKICAgICAgICAgICAgYnV5ZXIgPSBhZGRyZXNzKHRvQnl0ZXMyMChfZGF0YSwgMCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUoX2RhdGEubGVuZ3RoID09IDApOwogICAgICAgICAgICBidXllciA9IF9mcm9tOwogICAgICAgIH0KICAgICAgICBjaGVja1B1cmNoYXNlVmFsaWQoYnV5ZXIsIHNvbGQsIGJvbnVzKTsKICAgICAgICBkb1B1cmNoYXNlKGJ1eWVyLCBzb2xkLCBib251cyk7CiAgICAgICAgUHVyY2hhc2UoYnV5ZXIsIF90b2tlbiwgX3ZhbHVlLCBzb2xkLCBib251cyk7CiAgICAgICAgb25QdXJjaGFzZShidXllciwgX3Rva2VuLCBfdmFsdWUsIHNvbGQsIGJvbnVzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTb2xkKGFkZHJlc3MgX3Rva2VuLCB1aW50MjU2IF92YWx1ZSkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHJhdGUgPSBnZXRSYXRlKF90b2tlbik7CiAgICAgICAgcmVxdWlyZShyYXRlID4gMCk7CiAgICAgICAgcmV0dXJuIF92YWx1ZS5tdWwocmF0ZSkuZGl2KDEwKioxOCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Qm9udXModWludDI1NiBzb2xkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1Nik7CgogICAgZnVuY3Rpb24gZ2V0UmF0ZShhZGRyZXNzIF90b2tlbikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpOwoKICAgIGZ1bmN0aW9uIGRvUHVyY2hhc2UoYWRkcmVzcyBidXllciwgdWludDI1NiBzb2xkLCB1aW50MjU2IGJvbnVzKSBpbnRlcm5hbDsKCiAgICBmdW5jdGlvbiBjaGVja1B1cmNoYXNlVmFsaWQoYWRkcmVzcyAvKmJ1eWVyKi8sIHVpbnQyNTYgLypzb2xkKi8sIHVpbnQyNTYgLypib251cyovKSBpbnRlcm5hbCB7CgogICAgfQoKICAgIGZ1bmN0aW9uIG9uUHVyY2hhc2UoYWRkcmVzcyAvKmJ1eWVyKi8sIGFkZHJlc3MgLyp0b2tlbiovLCB1aW50MjU2IC8qdmFsdWUqLywgdWludDI1NiAvKnNvbGQqLywgdWludDI1NiAvKmJvbnVzKi8pIGludGVybmFsIHsKCiAgICB9CgogICAgZnVuY3Rpb24gdG9CeXRlczIwKGJ5dGVzIGIsIHVpbnQyNTYgX3N0YXJ0KSBwdXJlIGludGVybmFsIHJldHVybnMgKGJ5dGVzMjAgcmVzdWx0KSB7CiAgICAgICAgcmVxdWlyZShfc3RhcnQgKyAyMCA8PSBiLmxlbmd0aCk7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBsZXQgZnJvbSA6PSBhZGQoX3N0YXJ0LCBhZGQoYiwgMHgyMCkpCiAgICAgICAgICAgIHJlc3VsdCA6PSBtbG9hZChmcm9tKQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhdyhhZGRyZXNzIF90b2tlbiwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICB2ZXJpZnlDYW5XaXRoZHJhdyhfdG9rZW4sIF90bywgX3ZhbHVlKTsKICAgICAgICBpZiAoX3Rva2VuID09IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgX3RvLnRyYW5zZmVyKF92YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgVG9rZW4oX3Rva2VuKS50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICAgICAgfQogICAgICAgIFdpdGhkcmF3KF90b2tlbiwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHZlcmlmeUNhbldpdGhkcmF3KGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgdG8sIHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbDsKCiAgICBmdW5jdGlvbiBidXJuV2l0aERhdGEoYWRkcmVzcyBfdG9rZW4sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgRXh0ZXJuYWxUb2tlbihfdG9rZW4pLmJ1cm4oX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgQnVybihfdG9rZW4sIF92YWx1ZSwgX2RhdGEpOwogICAgfQp9CgovKioKICogQHRpdGxlIFRoaXMgc2FsZSBtaW50cyB0b2tlbiB3aGVuIHVzZXIgc2VuZHMgYWNjZXB0ZWQgcGF5bWVudHMKICovCmNvbnRyYWN0IE1pbnRpbmdTYWxlIGlzIEFic3RyYWN0U2FsZSB7CiAgICBNaW50YWJsZVRva2VuIHB1YmxpYyB0b2tlbjsKCiAgICBmdW5jdGlvbiBNaW50aW5nU2FsZShhZGRyZXNzIF90b2tlbikgcHVibGljIHsKICAgICAgICB0b2tlbiA9IE1pbnRhYmxlVG9rZW4oX3Rva2VuKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkb1B1cmNoYXNlKGFkZHJlc3MgYnV5ZXIsIHVpbnQyNTYgc29sZCwgdWludDI1NiBib251cykgaW50ZXJuYWwgewogICAgICAgIHRva2VuLm1pbnQoYnV5ZXIsIHNvbGQuYWRkKGJvbnVzKSk7CiAgICB9CgogICAgZnVuY3Rpb24gdmVyaWZ5Q2FuV2l0aGRyYXcoYWRkcmVzcywgYWRkcmVzcywgdWludDI1NikgaW50ZXJuYWwgewoKICAgIH0KfQoKY29udHJhY3QgQ2FwcGVkU2FsZSBpcyBBYnN0cmFjdFNhbGUgewogICAgdWludDI1NiBwdWJsaWMgY2FwOwogICAgdWludDI1NiBwdWJsaWMgaW5pdGlhbENhcDsKCiAgICBmdW5jdGlvbiBDYXBwZWRTYWxlKHVpbnQyNTYgX2NhcCkgcHVibGljIHsKICAgICAgICBjYXAgPSBfY2FwOwogICAgICAgIGluaXRpYWxDYXAgPSBfY2FwOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrUHVyY2hhc2VWYWxpZChhZGRyZXNzIGJ1eWVyLCB1aW50MjU2IHNvbGQsIHVpbnQyNTYgYm9udXMpIGludGVybmFsIHsKICAgICAgICBzdXBlci5jaGVja1B1cmNoYXNlVmFsaWQoYnV5ZXIsIHNvbGQsIGJvbnVzKTsKICAgICAgICByZXF1aXJlKGNhcCA+PSBzb2xkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvblB1cmNoYXNlKGFkZHJlc3MgYnV5ZXIsIGFkZHJlc3MgdG9rZW4sIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgc29sZCwgdWludDI1NiBib251cykgaW50ZXJuYWwgewogICAgICAgIHN1cGVyLm9uUHVyY2hhc2UoYnV5ZXIsIHRva2VuLCB2YWx1ZSwgc29sZCwgYm9udXMpOwogICAgICAgIGNhcCA9IGNhcC5zdWIoc29sZCk7CiAgICB9Cn0KCmNvbnRyYWN0IEV0aWNrZXQ0U2FsZSBpcyBNaW50aW5nU2FsZSwgT3duYWJsZUltcGwsIENhcHBlZFNhbGUgewogICAgYWRkcmVzcyBwdWJsaWMgYnRjVG9rZW47CgogICAgdWludDI1NiBwdWJsaWMgc3RhcnQ7CiAgICB1aW50MjU2IHB1YmxpYyBlbmQ7CgogICAgdWludDI1NiBwdWJsaWMgYnRjRXRoUmF0ZSA9IDEwICogMTAqKjEwOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZXRoRXQ0UmF0ZSA9IDEwMDAgKiAxMCoqMTg7CgogICAgZnVuY3Rpb24gRXRpY2tldDRTYWxlKGFkZHJlc3MgX21pbnRhYmxlVG9rZW4sIGFkZHJlc3MgX2J0Y1Rva2VuLCB1aW50MjU2IF9zdGFydCwgdWludDI1NiBfZW5kLCB1aW50MjU2IF9jYXApIE1pbnRpbmdTYWxlKF9taW50YWJsZVRva2VuKSBDYXBwZWRTYWxlKF9jYXApIHsKICAgICAgICBidGNUb2tlbiA9IF9idGNUb2tlbjsKICAgICAgICBzdGFydCA9IF9zdGFydDsKICAgICAgICBlbmQgPSBfZW5kOwogICAgICAgIFJhdGVBZGQoYWRkcmVzcygwKSk7CiAgICAgICAgUmF0ZUFkZChfYnRjVG9rZW4pOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrUHVyY2hhc2VWYWxpZChhZGRyZXNzIGJ1eWVyLCB1aW50MjU2IHNvbGQsIHVpbnQyNTYgYm9udXMpIGludGVybmFsIHsKICAgICAgICBzdXBlci5jaGVja1B1cmNoYXNlVmFsaWQoYnV5ZXIsIHNvbGQsIGJvbnVzKTsKICAgICAgICByZXF1aXJlKG5vdyA+IHN0YXJ0ICYmIG5vdyA8IGVuZCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UmF0ZShhZGRyZXNzIF90b2tlbikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAoX3Rva2VuID09IGJ0Y1Rva2VuKSB7CiAgICAgICAgICAgIHJldHVybiBidGNFdGhSYXRlICogZXRoRXQ0UmF0ZTsKICAgICAgICB9IGVsc2UgaWYgKF90b2tlbiA9PSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIHJldHVybiBldGhFdDRSYXRlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgIH0KCiAgICBldmVudCBCdGNFdGhSYXRlQ2hhbmdlKHVpbnQyNTYgYnRjRXRoUmF0ZSk7CgogICAgZnVuY3Rpb24gc2V0QnRjRXRoUmF0ZSh1aW50MjU2IF9idGNFdGhSYXRlKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBidGNFdGhSYXRlID0gX2J0Y0V0aFJhdGU7CiAgICAgICAgQnRjRXRoUmF0ZUNoYW5nZShfYnRjRXRoUmF0ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdFdGgoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICB3aXRoZHJhdyhhZGRyZXNzKDApLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdCdGMoYnl0ZXMgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgYnVybldpdGhEYXRhKGJ0Y1Rva2VuLCBfdmFsdWUsIF90byk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJUb2tlbk93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBPd25hYmxlSW1wbCh0b2tlbikudHJhbnNmZXJPd25lcnNoaXAobmV3T3duZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyV2l0aEJvbnVzKGFkZHJlc3MgYmVuZWZpY2lhcnksIHVpbnQyNTYgYW1vdW50KSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICB1aW50MjU2IGJvbnVzID0gZ2V0Qm9udXMoYW1vdW50KTsKICAgICAgICBkb1B1cmNoYXNlKGJlbmVmaWNpYXJ5LCBhbW91bnQsIGJvbnVzKTsKICAgICAgICBQdXJjaGFzZShiZW5lZmljaWFyeSwgYWRkcmVzcygxKSwgMCwgYW1vdW50LCBib251cyk7CiAgICAgICAgb25QdXJjaGFzZShiZW5lZmljaWFyeSwgYWRkcmVzcygxKSwgMCwgYW1vdW50LCBib251cyk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBiZW5lZmljaWFyeSwgdWludDI1NiBhbW91bnQpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGRvUHVyY2hhc2UoYmVuZWZpY2lhcnksIGFtb3VudCwgMCk7CiAgICAgICAgUHVyY2hhc2UoYmVuZWZpY2lhcnksIGFkZHJlc3MoMSksIDAsIGFtb3VudCwgMCk7CiAgICAgICAgb25QdXJjaGFzZShiZW5lZmljaWFyeSwgYWRkcmVzcygxKSwgMCwgYW1vdW50LCAwKTsKICAgIH0KfQoKY29udHJhY3QgUHJlU2FsZSBpcyBFdGlja2V0NFNhbGUgewoJZnVuY3Rpb24gUHJlU2FsZShhZGRyZXNzIF9taW50YWJsZVRva2VuLCBhZGRyZXNzIF9idGNUb2tlbiwgdWludDI1NiBfc3RhcnQsIHVpbnQyNTYgX2VuZCwgdWludDI1NiBfY2FwKSBFdGlja2V0NFNhbGUoX21pbnRhYmxlVG9rZW4sIF9idGNUb2tlbiwgX3N0YXJ0LCBfZW5kLCBfY2FwKSB7CgoJfQoKCWZ1bmN0aW9uIGdldEJvbnVzKHVpbnQyNTYgc29sZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKCQl1aW50MjU2IGRpZmZEYXlzID0gKG5vdyAtIHN0YXJ0KSAvIDg2NDAwOwoJCWlmIChkaWZmRGF5cyA8IDIpIHsKCQkJcmV0dXJuIHNvbGQubXVsKDQwKS5kaXYoMTAwKTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gZ2V0VGltZUJvbnVzKHNvbGQsIGRpZmZEYXlzKSArIGdldEFtb3VudEJvbnVzKHNvbGQpOwoJCX0KCX0KCglmdW5jdGlvbiBnZXRUaW1lQm9udXModWludDI1NiBzb2xkLCB1aW50MjU2IGRpZmZEYXlzKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CgkJdWludDI1NiBpbnRlcnZhbCA9IChkaWZmRGF5cyAtIDIpIC8gNTsKCQlpZiAoaW50ZXJ2YWwgPT0gMCkgewoJCQlyZXR1cm4gc29sZC5tdWwoMTUpLmRpdigxMDApOwoJCX0gZWxzZSBpZiAoaW50ZXJ2YWwgPT0gMSkgewoJCQlyZXR1cm4gc29sZC5tdWwoMTIpLmRpdigxMDApOwoJCX0gZWxzZSBpZiAoaW50ZXJ2YWwgPT0gMiB8fCBpbnRlcnZhbCA9PSAzKSB7CgkJCXJldHVybiBzb2xkLm11bCgxMCkuZGl2KDEwMCk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIHNvbGQubXVsKDgpLmRpdigxMDApOwoJCX0KCX0KCglmdW5jdGlvbiBnZXRBbW91bnRCb251cyh1aW50MjU2IHNvbGQpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKCQlpZiAoc29sZCA+IDIwMDAwICogMTAqKjE4KSB7CgkJCXJldHVybiBzb2xkLm11bCgzMCkuZGl2KDEwMCk7CgkJfSBlbHNlIGlmIChzb2xkID4gMTUwMDAgKiAxMCoqMTgpIHsKCQkJcmV0dXJuIHNvbGQubXVsKDI1KS5kaXYoMTAwKTsKCQl9IGVsc2UgaWYgKHNvbGQgPiAxMDAwMCAqIDEwKioxOCkgewoJCQlyZXR1cm4gc29sZC5tdWwoMjApLmRpdigxMDApOwoJCX0gZWxzZSBpZiAoc29sZCA+IDUwMDAgKiAxMCoqMTgpIHsKCQkJcmV0dXJuIHNvbGQubXVsKDE1KS5kaXYoMTAwKTsKCQl9IGVsc2UgaWYgKHNvbGQgPiAxMDAwICogMTAqKjE4KSB7CgkJCXJldHVybiBzb2xkLm11bCgxMCkuZGl2KDEwMCk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIDA7CgkJfQoJfQp9'.
	

]
