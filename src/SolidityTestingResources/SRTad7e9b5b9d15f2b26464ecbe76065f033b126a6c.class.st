Class {
	#name : #SRTad7e9b5b9d15f2b26464ecbe76065f033b126a6c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTad7e9b5b9d15f2b26464ecbe76065f033b126a6c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBSYW5kb20gewoKICAgIHVpbnQgcHVibGljIHRpY2tldHNOdW0gPSAwOwogICAgCiAgICBtYXBwaW5nKHVpbnQgPT4gdWludCkgaW50ZXJuYWwgdGlja2V0czsgIC8vIHRpY2tldHMgZm9yIHRoZSBjdXJyZW50IGRyYXcKICAgIG1hcHBpbmcodWludCA9PiBib29sKSBpbnRlcm5hbCBwYXllZF9iYWNrOyAvLyB0aWNrZXQgcGF5bWVudCByZWZ1bmRpbmcgaWRlbnRpZmllcgogICAgCiAgICBhZGRyZXNzW10gcHVibGljIGFkZHI7IC8vIGFkZHJlc3NlcyBvZiBhbGwgdGhlIGRyYXcgcGFydGljaXBhbnRzCiAgICAKICAgIHVpbnQzMiBwdWJsaWMgcmFuZG9tX251bSA9IDA7IC8vIGRyYXcgc2VyaWFsIG51bWJlcgogCiAgICB1aW50IHB1YmxpYyBsaXZlQmxvY2tzTnVtYmVyID0gNTc2MDsgLy8gYW1vdW50IG9mIGJsb2NrcyB1bnRpbGwgdGhlIGxvdHRlcnkgZW5kaW5nCiAgICB1aW50IHB1YmxpYyBzdGFydEJsb2NrTnVtYmVyID0gMDsgLy8gaW5pdGlhbCBibG9jayBvZiB0aGUgY3VycmVudCBsb3R0ZXJ5CiAgICB1aW50IHB1YmxpYyBlbmRCbG9ja051bWJlciA9IDA7IC8vIGZpbmFsIGJsb2NrIG9mIHRoZSBjdXJyZW50IGxvdHRlcnkKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBvbmVQb3RXZWkgPSAxMDAwMDAwMDAwMDAwMDAwMDsgLy8gMSB0aWNrZXQgY29zdCBpcyAwLjAxIEVUSAoKICAgIGFkZHJlc3MgcHVibGljIGludl9jb250cmFjdCA9IDB4NTE5MmM1NUIxMDY0RDkyMEMxNWRCMTI1ZUYyRTY5YTE3NTU4RTY1YTsgLy8gaW52ZXN0aW5nIGNvbnRyYWN0CiAgICBhZGRyZXNzIHB1YmxpYyBydG1fY29udHJhY3QgPSAweDdFMDhjMDQ2OENCZTlGNDhkOEE0RDI0NjA5NWRFYjhiQzFFQjJlN2U7IC8vIHRlYW0gY29udHJhY3QKICAgIGFkZHJlc3MgcHVibGljIG1ya19jb250cmFjdCA9IDB4YzAxYzA4QjJiNDUxMzI4OTQ3YkZiN0JhNWZmQTNhZjk2Q2ZjMzQzMDsgLy8gbWFya2V0aW5nIGNvbnRyYWN0CiAgICAKICAgIGFkZHJlc3MgbWFuYWdlcjsgLy8gbG90dGVyeSBtYW5hZ2VyIGFkZHJlc3MKICAgIAogICAgdWludCBwdWJsaWMgd2lubmVyc19jb3VudCA9IDA7IC8vIGFtb3VudCBvZiB3aW5uZXJzIGluIHRoZSBjdXJyZW50IGRyYXcKICAgIHVpbnQgbGFzdF93aW5uZXIgPSAwOyAvLyBhbW91bnQgb2Ygd2lubmVycyBhbHJlYWR5IHJlY2VpdmVkIHJld2FyZHMKICAgIHVpbnQgcHVibGljIG90aGVyc19wcml6ZSA9IDA7IC8vIHByaXplIGZ1bmQgbGVzcyBqYWNrIHBvdHMKICAgIAogICAgdWludCBwdWJsaWMgZmVlX2JhbGFuY2UgPSAwOyAvLyBjdXJyZW50IGJhbGFuY2UgYXZhaWxhYmxlIGZvciBjb21taXRpbmcgcGF5bWVudCB0byBpbnZlc3RpbmcsIHRlYW0gYW5kIG1hcmtldGluZyBjb250cmFjdHMKCiAgICAKICAgIC8vIEV2ZW50cwogICAgLy8gVGhpcyBnZW5lcmF0ZXMgYSBwdWJsaWNzIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cwogICAgCiAgICBldmVudCBCdXkoYWRkcmVzcyBpbmRleGVkIHNlbmRlciwgdWludCBldGgpOyAvLyB0aWNrZXRzIHB1cmNoYXNlCiAgICBldmVudCBXaXRoZHJhdyhhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLCBhZGRyZXNzIHRvLCB1aW50IGV0aCk7IC8vIHJld2FyZCBhY2NydWluZwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7IC8vIGV2ZW50OiBzZW5kaW5nIHRpY2tldCB0byBhbm90aGVyIGFkZHJlc3MKICAgIGV2ZW50IFRyYW5zZmVyRXJyb3IoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsgLy8gZXZlbnQgKGVycm9yKTogc2VuZGluZyBFVEggZnJvbSB0aGUgY29udHJhY3Qgd2FzIGZhaWxlZAogICAgCgogICAgLy8gbWV0aG9kcyB3aXRoIGZvbGxvd2luZyBtb2RpZmllciBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIG1hbmFnZXIKICAgIG1vZGlmaWVyIG9ubHlNYW5hZ2VyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBtYW5hZ2VyKTsKICAgICAgICBfOwogICAgfQogICAgCgogICAgLy8gY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIFJhbmRvbSgpIHB1YmxpYyB7CiAgICAgICAgbWFuYWdlciA9IG1zZy5zZW5kZXI7CiAgICAgICAgc3RhcnRCbG9ja051bWJlciA9IGJsb2NrLm51bWJlciAtIDE7CiAgICAgICAgZW5kQmxvY2tOdW1iZXIgPSBzdGFydEJsb2NrTnVtYmVyICsgbGl2ZUJsb2Nrc051bWJlcjsKICAgIH0KCgogICAgLy8vIGZ1bmN0aW9uIGZvciBzdHJhaWdodCB0aWNrZXRzIHB1cmNoYXNlIChzZW5kaW5nIEVUSCB0byB0aGUgY29udHJhY3QgYWRkcmVzcykKICAgIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyIDwgZW5kQmxvY2tOdW1iZXIgfHwgbXNnLnZhbHVlIDwgMTAwMDAwMDAwMDAwMDAwMDAwMCk7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA+IDAgJiYgbGFzdF93aW5uZXIgPT0gMCkgewogICAgICAgICAgICB1aW50IHZhbCA9ICBtc2cudmFsdWUgLyBvbmVQb3RXZWk7CiAgICAgICAgICAgIHVpbnQgaSA9IDA7CiAgICAgICAgICAgIHVpbnQgaXggPSBjaGVja0FkZHJlc3MobXNnLnNlbmRlcik7CiAgICAgICAgICAgIGZvcihpOyBpIDwgdmFsOyBpKyspIHsgdGlja2V0c1t0aWNrZXRzTnVtK2ldID0gaXg7IH0KICAgICAgICAgICAgdGlja2V0c051bSArPSBpOwogICAgICAgICAgICBCdXkobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgICAgICB9CiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA+PSBlbmRCbG9ja051bWJlcikgeyAKICAgICAgICAgICAgRW5kTG90dGVyeSgpOyAKICAgICAgICB9CiAgICB9CgoKICAgIC8vLyBmdW5jdGlvbiBmb3IgdGlja2V0IHNlbmRpbmcgZnJvbSBvd25lcidzIGFkZHJlc3MgdG8gZGVzaWduYXRlZCBhZGRyZXNzCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdGlja2V0TnVtKSBwdWJsaWMgewogICAgICAgIGlmIChtc2cuc2VuZGVyID09IGdldEFkZHJlc3ModGlja2V0c1tfdGlja2V0TnVtXSkgJiYgX3RvICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgdWludCBpeCA9IGNoZWNrQWRkcmVzcyhfdG8pOwogICAgICAgICAgICB0aWNrZXRzW190aWNrZXROdW1dID0gaXg7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3RpY2tldE51bSk7CiAgICAgICAgfQogICAgfQoKCiAgICAvLy8gbWFuYWdlcidzIG9wcG9ydHVuaXR5IHRvIHdyaXRlIG9mZiBFVEggZnJvbSB0aGUgY29udHJhY3QsIGluIGEgY2FzZSBvZiB1bmZvcnNlZW4gY29udHJhY3QgYmxvY2tpbmcgKHBvc3NpYmxlIGluIG9ubHkgY2FzZSBvZiBtb3JlIHRoYW4gMjQgaG91cnMgZnJvbSB0aGUgbW9tZW50IG9mIGxvdHRlcnkgZW5kaW5nIGhhZCBwYXNzZWQgYW5kIGEgbmV3IG9uZSBoYXMgbm90IHN0YXJ0ZWQpCiAgICBmdW5jdGlvbiBtYW5hZ2VyX3dpdGhkcmF3KCkgb25seU1hbmFnZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+PSBlbmRCbG9ja051bWJlciArIGxpdmVCbG9ja3NOdW1iZXIpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KICAgIAogICAgLy8vIGxvdHRlcnkgZW5kaW5nCiAgICBmdW5jdGlvbiBFbmRMb3R0ZXJ5KCkgcHVibGljIHBheWFibGUgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShibG9jay5udW1iZXIgPj0gZW5kQmxvY2tOdW1iZXIpOyAKICAgICAgICB1aW50IHRuID0gdGlja2V0c051bTsKICAgICAgICBpZih0biA8IDMpIHsgCiAgICAgICAgICAgIHRuID0gMDsKICAgICAgICAgICAgaWYobXNnLnZhbHVlID4gMCkgeyBtc2cuc2VuZGVyLnRyYW5zZmVyKG1zZy52YWx1ZSk7IH0KICAgICAgICAgICAgc3RhcnROZXdEcmF3KG1zZy52YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdWludCBwZiA9IHByaXplRnVuZCgpOwogICAgICAgIHVpbnQganAxID0gcGVyY2VudChwZiwgMTApOwogICAgICAgIHVpbnQganAyID0gcGVyY2VudChwZiwgNCk7CiAgICAgICAgdWludCBqcDMgPSBwZXJjZW50KHBmLCAxKTsKICAgICAgICB1aW50IGxhc3RiZXRfcHJpemUgPSBvbmVQb3RXZWkqMTA7CiAgICAgICAgCiAgICAgICAgaWYobGFzdF93aW5uZXIgPT0gMCkgewogICAgICAgICAgICAKICAgICAgICAgICAgd2lubmVyc19jb3VudCA9IHBlcmNlbnQodG4sIDQpICsgMzsgCiAgICAgICAgICAgIAogICAgICAgICAgICB1aW50IHByaXplcyA9IGpwMSArIGpwMiArIGpwMyArIGxhc3RiZXRfcHJpemUqMjsKICAgICAgICAgICAgdWludCBmdWxsX3ByaXplcyA9IGpwMSArIGpwMiArIGpwMyArIChsYXN0YmV0X3ByaXplICogKCAod2lubmVyc19jb3VudCsxKS8xMCApICk7CgogICAgICAgICAgICBpZih3aW5uZXJzX2NvdW50IDwgMTApIHsKICAgICAgICAgICAgICAgIGlmKHByaXplcyA+IHBmKSB7CiAgICAgICAgICAgICAgICAgICAgb3RoZXJzX3ByaXplID0gMDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb3RoZXJzX3ByaXplID0gcGYgLSBwcml6ZXM7ICAgIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYoZnVsbF9wcml6ZXMgPiBwZikgewogICAgICAgICAgICAgICAgICAgIG90aGVyc19wcml6ZSA9IDA7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG90aGVyc19wcml6ZSA9IHBmIC0gZnVsbF9wcml6ZXM7ICAgIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBzZW5kRXRoKGdldEFkZHJlc3ModGlja2V0c1tnZXRXaW5uaW5nTnVtYmVyKDEpXSksIGpwMSk7CiAgICAgICAgICAgIHNlbmRFdGgoZ2V0QWRkcmVzcyh0aWNrZXRzW2dldFdpbm5pbmdOdW1iZXIoMildKSwganAyKTsKICAgICAgICAgICAgc2VuZEV0aChnZXRBZGRyZXNzKHRpY2tldHNbZ2V0V2lubmluZ051bWJlcigzKV0pLCBqcDMpOwogICAgICAgICAgICBsYXN0X3dpbm5lciArPSAxOwogICAgICAgICAgICAKICAgICAgICAgICAgc2VuZEV0aChtc2cuc2VuZGVyLCBsYXN0YmV0X3ByaXplICsgbXNnLnZhbHVlKTsgCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gCiAgICAgICAgCiAgICAgICAgaWYobGFzdF93aW5uZXIgPCB3aW5uZXJzX2NvdW50ICsgMSAmJiBvdGhlcnNfcHJpemUgPiAwKSB7CiAgICAgICAgICAgIAogICAgICAgICAgICB1aW50IHZhbCA9IG90aGVyc19wcml6ZSAvIHdpbm5lcnNfY291bnQ7CiAgICAgICAgICAgIHVpbnQgaTsKICAgICAgICAgICAgdWludDggY250ID0gMDsKICAgICAgICAgICAgZm9yKGkgPSBsYXN0X3dpbm5lcjsgaSA8IHdpbm5lcnNfY291bnQgKyAxOyBpKyspIHsKICAgICAgICAgICAgICAgIHNlbmRFdGgoZ2V0QWRkcmVzcyh0aWNrZXRzW2dldFdpbm5pbmdOdW1iZXIoaSszKV0pLCB2YWwpOwogICAgICAgICAgICAgICAgY250Kys7CiAgICAgICAgICAgICAgICBpZihjbnQgPiA5KSB7CiAgICAgICAgICAgICAgICAgICAgbGFzdF93aW5uZXIgPSBpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGxhc3Rfd2lubmVyID0gaTsKICAgICAgICAgICAgc2VuZEV0aChtc2cuc2VuZGVyLCBsYXN0YmV0X3ByaXplICsgbXNnLnZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIAogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICBzdGFydE5ld0RyYXcobGFzdGJldF9wcml6ZSArIG1zZy52YWx1ZSk7ICAgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHNlbmRFdGgobXNnLnNlbmRlciwgbGFzdGJldF9wcml6ZSArIG1zZy52YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vLyBuZXcgZHJhdyBzdGFydAogICAgZnVuY3Rpb24gc3RhcnROZXdEcmF3KHVpbnQgX21zZ192YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIHRpY2tldHNOdW0gPSAwOwogICAgICAgIHN0YXJ0QmxvY2tOdW1iZXIgPSBibG9jay5udW1iZXIgLSAxOwogICAgICAgIGVuZEJsb2NrTnVtYmVyID0gc3RhcnRCbG9ja051bWJlciArIGxpdmVCbG9ja3NOdW1iZXI7CiAgICAgICAgcmFuZG9tX251bSArPSAxOwogICAgICAgIHdpbm5lcnNfY291bnQgPSAwOwogICAgICAgIGxhc3Rfd2lubmVyID0gMDsKICAgICAgICBmZWVfYmFsYW5jZSArPSAodGhpcy5iYWxhbmNlIC0gX21zZ192YWx1ZSk7CiAgICB9CiAgICAKICAgIC8vLyBzZW5kaW5nIHJld2FyZHMgdG8gdGhlIGludmVzdGluZywgdGVhbSBhbmQgbWFya2V0aW5nIGNvbnRyYWN0cyAKICAgIGZ1bmN0aW9uIHBheWZlZSgpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShmZWVfYmFsYW5jZSA+IDApOwogICAgICAgIHVpbnQgdmFsID0gZmVlX2JhbGFuY2U7CiAgICAgICAgaW52X2NvbnRyYWN0LnRyYW5zZmVyKCBwZXJjZW50KHZhbCwgMjApICk7CiAgICAgICAgcnRtX2NvbnRyYWN0LnRyYW5zZmVyKCBwZXJjZW50KHZhbCwgNDkpICk7CiAgICAgICAgbXJrX2NvbnRyYWN0LnRyYW5zZmVyKCBwZXJjZW50KHZhbCwgMzApICk7CiAgICAgICAgZmVlX2JhbGFuY2UgPSAwOwogICAgfQogICAgCiAgICAvLy8gZnVuY3Rpb24gZm9yIHNlbmRpbmcgRVRIIHdpdGggYmFsYW5jZSBjaGVjayAoZG9lcyBub3QgaW50ZXJydXB0IHRoZSBwcm9ncmFtIGlmIGJhbGFuY2UgaXMgbm90IHN1ZmZpY2llbnQpCiAgICBmdW5jdGlvbiBzZW5kRXRoKGFkZHJlc3MgX3RvLCB1aW50IF92YWwpIGludGVybmFsIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmKHRoaXMuYmFsYW5jZSA8IF92YWwpIHsKICAgICAgICAgICAgVHJhbnNmZXJFcnJvcihfdG8sIF92YWwpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIF90by50cmFuc2ZlcihfdmFsKTsKICAgICAgICBXaXRoZHJhdyhhZGRyZXNzKHRoaXMpLCBfdG8sIF92YWwpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAKICAgIC8vLyBnZXQgd2lubmluZyB0aWNrZXQgbnVtYmVyIGJhc2luZyBvbiBibG9jayBoYXNnIChibG9jayBudW1iZXIgaXMgYmVpbmcgY2FsY3VsYXRlZCBiYXNpbmcgb24gc3BlY2lmaWVkIGRpc3BsYWNlbWVudCkKICAgIGZ1bmN0aW9uIGdldFdpbm5pbmdOdW1iZXIodWludCBfYmxvY2tzaGlmdCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiB1aW50KGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXIgLSBfYmxvY2tzaGlmdCkpICUgdGlja2V0c051bSArIDE7CiAgICB9CiAgICAKCiAgICAvLy8gY3VycmVudCBhbW91bnQgb2YgamFjayBwb3QgMQogICAgZnVuY3Rpb24gamFja1BvdEEoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHBlcmNlbnQocHJpemVGdW5kKCksIDEwKTsKICAgIH0KICAgIAogICAgLy8vIGN1cnJlbnQgYW1vdW50IG9mIGphY2sgcG90IDIKICAgIGZ1bmN0aW9uIGphY2tQb3RCKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBwZXJjZW50KHByaXplRnVuZCgpLCA0KTsKICAgIH0KICAgIAogICAgLy8vIGN1cnJlbnQgYW1vdW50IG9mIGphY2sgcG90IDMKICAgIGZ1bmN0aW9uIGphY2tQb3RDKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBwZXJjZW50KHByaXplRnVuZCgpLCAxKTsKICAgIH0KCiAgICAvLy8gY3VycmVudCBhbW91bnQgb2YgcHJpemUgZnVuZAogICAgZnVuY3Rpb24gcHJpemVGdW5kKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiAoICh0aWNrZXRzTnVtICogb25lUG90V2VpKSAvIDEwMCApICogOTA7CiAgICB9CgogICAgLy8vIGZ1bmN0aW9uIGZvciBjYWxjdWxhdGluZyBkZWZpbml0ZSBwZXJjZW50IG9mIGEgbnVtYmVyCiAgICBmdW5jdGlvbiBwZXJjZW50KHVpbnQgX3ZhbCwgdWludDggX3BlcmNlbnQpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gKCBfdmFsIC8gMTAwICkgKiBfcGVyY2VudDsKICAgIH0KCgogICAgLy8vIHJldHVybnMgb3duZXIgYWRkcmVzcyB1c2luZyB0aWNrZXQgbnVtYmVyCiAgICBmdW5jdGlvbiBnZXRUaWNrZXRPd25lcih1aW50IF9udW0pIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICBpZih0aWNrZXRzTnVtID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBnZXRBZGRyZXNzKHRpY2tldHNbX251bV0pOwogICAgfQoKICAgIC8vLyByZXR1cm5zIGFtb3VudCBvZiB0aWNrZXRzIGZvciB0aGUgY3VycmVudCBkcmF3IGluIHRoZSBwb3NzZXNzaW9uIG9mIHNwZWNpZmllZCBhZGRyZXNzCiAgICBmdW5jdGlvbiBnZXRUaWNrZXRzQ291bnQoYWRkcmVzcyBfYWRkcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIGlmKHRpY2tldHNOdW0gPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludCBudW0gPSAwOwogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgdGlja2V0c051bTsgaSsrKSB7CiAgICAgICAgICAgIGlmKHRpY2tldHNbaV0gPT0gcmVhZEFkZHJlc3MoX2FkZHIpKSB7CiAgICAgICAgICAgICAgICBudW0rKzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVtOwogICAgfQogICAgCiAgICAvLy8gcmV0dXJucyB0aWNrZXRzIG51bWJlcnMgZm9yIHRoZSBjdXJyZW50IGRyYXcgaW4gdGhlIHBvc3Nlc3Npb24gb2Ygc3BlY2lmaWVkIGFkZHJlc3MKICAgIGZ1bmN0aW9uIGdldFRpY2tldHNBdEFkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnRbXSkgewogICAgICAgIHVpbnRbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnRbXShnZXRUaWNrZXRzQ291bnQoX2FkZHJlc3MpKTsKICAgICAgICB1aW50IG51bSA9IDA7CiAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGkgPCB0aWNrZXRzTnVtOyBpKyspIHsKICAgICAgICAgICAgaWYoZ2V0QWRkcmVzcyh0aWNrZXRzW2ldKSA9PSBfYWRkcmVzcykgewogICAgICAgICAgICAgICAgcmVzdWx0W251bV0gPSBpOwogICAgICAgICAgICAgICAgbnVtKys7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCgogICAgLy8vIHJldHVybnMgYW1vdW50IG9mIHBhaWQgcmV3YXJkcyBmb3IgdGhlIGN1cnJlbnQgZHJhdwogICAgZnVuY3Rpb24gZ2V0TGFzdFdpbm5lcigpIHB1YmxpYyB2aWV3IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBsYXN0X3dpbm5lcisxOwogICAgfQoKCiAgICAvLy8gaW52ZXN0aW5nIGNvbnRyYWN0IGFkZHJlc3MgY2hhbmdlCiAgICBmdW5jdGlvbiBzZXRJbnZDb250cmFjdChhZGRyZXNzIF9hZGRyKSBvbmx5TWFuYWdlciBwdWJsaWMgewogICAgICAgIGludl9jb250cmFjdCA9IF9hZGRyOwogICAgfQoKICAgIC8vLyB0ZWFtIGNvbnRyYWN0IGFkZHJlc3MgY2hhbmdlCiAgICBmdW5jdGlvbiBzZXRSdG1Db250cmFjdChhZGRyZXNzIF9hZGRyKSBvbmx5TWFuYWdlciBwdWJsaWMgewogICAgICAgIHJ0bV9jb250cmFjdCA9IF9hZGRyOwogICAgfQoKICAgIC8vLyBtYXJrZXRpbmcgY29udHJhY3QgYWRkcmVzcyBjaGFuZ2UKICAgIGZ1bmN0aW9uIHNldE1ya0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIG9ubHlNYW5hZ2VyIHB1YmxpYyB7CiAgICAgICAgbXJrX2NvbnRyYWN0ID0gX2FkZHI7CiAgICB9CgoKICAgIC8vLyByZXR1cm5zIG51bWJlciBvZiBwYXJ0aWNpcGFudCAoaW4gdGhlIGxpc3Qgb2YgcGFydGljaXBhbnRzKSBieSBiZWxvbmdpbmcgYWRkcmVzcyBhbmQgYWRkaW5nIHRvIHRoZSBsaXN0LCBpZiBub3QgZm91bmQKICAgIGZ1bmN0aW9uIGNoZWNrQWRkcmVzcyhhZGRyZXNzIF9hZGRyKSBwdWJsaWMgcmV0dXJucyAodWludCBhZGRyX251bSkKICAgIHsKICAgICAgICBmb3IodWludCBpPTA7IGk8YWRkci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZihhZGRyW2ldID09IF9hZGRyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gYWRkci5wdXNoKF9hZGRyKSAtIDE7CiAgICB9CiAgICAKICAgIC8vLyByZXR1cm5zIHBhcnRpY2lwYW50cyBudW1iZXIgKGluIHRoZSBsaXN0IG9mIHBhcnRpY2lwYW50cykgYmUgYmVsb25naW5nIGFkZHJlc3MgKHJlYWQgb25seSkKICAgIGZ1bmN0aW9uIHJlYWRBZGRyZXNzKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQgYWRkcl9udW0pCiAgICB7CiAgICAgICAgZm9yKHVpbnQgaT0wOyBpPGFkZHIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYoYWRkcltpXSA9PSBfYWRkcikgewogICAgICAgICAgICAgICAgcmV0dXJuIGk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgLy8vIHJldHVybnMgYWRkcmVzcyBieSB0aGUgbnVtYmVyIGluIHRoZSBsaXN0IG9mIHBhcnRpY2lwYW50cwogICAgZnVuY3Rpb24gZ2V0QWRkcmVzcyh1aW50IF9pbmRleCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBhZGRyW19pbmRleF07CiAgICB9CgoKICAgIC8vLyBtZXRob2QgZm9yIGRpcmVjdCBjb250cmFjdCByZXBsZW5pc2htZW50IHdpdGggRVRICiAgICBmdW5jdGlvbiBkZXBvc2l0KCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CiAgICB9CiAgICAKCn0='.
	

]
