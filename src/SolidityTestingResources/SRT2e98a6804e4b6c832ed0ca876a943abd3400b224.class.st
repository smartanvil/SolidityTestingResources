Class {
	#name : #SRT2e98a6804e4b6c832ed0ca876a943abd3400b224,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2e98a6804e4b6c832ed0ca876a943abd3400b224 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIEB0aXRsZSBCZWxhIFRva2VuIENvbnRyYWN0CiAqIEBmaWxlIEJlbGEuc29sCiAqIEBhdXRob3IgSm9lIEpvcmRhbiwgQnVyZ1RlY2ggU29sdXRpb25zCiAqIEB2ZXJzaW9uIDEuMAogKgogKiBAc2VjdGlvbiBMSUNFTlNFCiAqCiAqIENvbnRhY3QgZm9yIGxpY2Vuc2luZyBkZXRhaWxzLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBAc2VjdGlvbiBERVNDUklQVElPTgogKgogKiBUaGlzIGlzIGFuIEVSQzIwLWJhc2VkIHRva2VuIHdpdGggc3Rha2luZyBmdW5jdGlvbmFsaXR5LgogKgogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLy8gT3BlblplcHBlbGluIGxpYnJhcnkgaW1wb3J0cwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgovLy8qIFRydWZmbGUgZm9ybWF0IAoKCgoKCgoKCgoKCgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCgoKCgoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqCiAgICogQmV3YXJlIHRoYXQgY2hhbmdpbmcgYW4gYWxsb3dhbmNlIHdpdGggdGhpcyBtZXRob2QgYnJpbmdzIHRoZSByaXNrIHRoYXQgc29tZW9uZSBtYXkgdXNlIGJvdGggdGhlIG9sZAogICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgKiByYWNlIGNvbmRpdGlvbiBpcyB0byBmaXJzdCByZWR1Y2UgdGhlIHNwZW5kZXIncyBhbGxvd2FuY2UgdG8gMCBhbmQgc2V0IHRoZSBkZXNpcmVkIHZhbHVlIGFmdGVyd2FyZHM6CiAgICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIC8qKgogICAqIEBkZXYgSW5jcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfYWRkZWRWYWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBpbmNyZWFzZSB0aGUgYWxsb3dhbmNlIGJ5LgogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRGVjcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGRlY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3VidHJhY3RlZFZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGRlY3JlYXNlIHRoZSBhbGxvd2FuY2UgYnkuCiAgICovCiAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgfQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCn0KCgoKCgovKioKICogQHRpdGxlIE1pbnRhYmxlIHRva2VuCiAqIEBkZXYgU2ltcGxlIEVSQzIwIFRva2VuIGV4YW1wbGUsIHdpdGggbWludGFibGUgdG9rZW4gY3JlYXRpb24KICogQGRldiBJc3N1ZTogKiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2lzc3Vlcy8xMjAKICogQmFzZWQgb24gY29kZSBieSBUb2tlbk1hcmtldE5ldDogaHR0cHM6Ly9naXRodWIuY29tL1Rva2VuTWFya2V0TmV0L2ljby9ibG9iL21hc3Rlci9jb250cmFjdHMvTWludGFibGVUb2tlbi5zb2wKICovCgpjb250cmFjdCBNaW50YWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CiAgLy9ldmVudCBNaW50RmluaXNoZWQoKTsKCiAgLy9ib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCiAgLyoKICBtb2RpZmllciBjYW5NaW50KCkgewogICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKICAgIF87CiAgfQogICovCgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNlaXZlIHRoZSBtaW50ZWQgdG9rZW5zLgogICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIG1pbnQuCiAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgVHJhbnNmZXIoYWRkcmVzcygwKSwgX3RvLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBzdG9wIG1pbnRpbmcgbmV3IHRva2Vucy4KICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgCiAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIG9ubHlPd25lciBjYW5NaW50IHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgTWludEZpbmlzaGVkKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgKi8KfQoKCgoKCi8qKgogKiBAdGl0bGUgQ29udHJhY3RzIHRoYXQgc2hvdWxkIG5vdCBvd24gRXRoZXIKICogQGF1dGhvciBSZW1jbyBCbG9lbWVuIDw8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjU5MmIzYzM0M2EzNjE5NmIiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L3NwYW4+z4AuY29tPgogKiBAZGV2IFRoaXMgdHJpZXMgdG8gYmxvY2sgaW5jb21pbmcgZXRoZXIgdG8gcHJldmVudCBhY2NpZGVudGFsIGxvc3Mgb2YgRXRoZXIuIFNob3VsZCBFdGhlciBlbmQgdXAKICogaW4gdGhlIGNvbnRyYWN0LCBpdCB3aWxsIGFsbG93IHRoZSBvd25lciB0byByZWNsYWltIHRoaXMgZXRoZXIuCiAqIEBub3RpY2UgRXRoZXIgY2FuIHN0aWxsIGJlIHNlbmQgdG8gdGhpcyBjb250cmFjdCBieToKICogY2FsbGluZyBmdW5jdGlvbnMgbGFiZWxlZCBgcGF5YWJsZWAKICogYHNlbGZkZXN0cnVjdChjb250cmFjdF9hZGRyZXNzKWAKICogbWluaW5nIGRpcmVjdGx5IHRvIHRoZSBjb250cmFjdCBhZGRyZXNzCiovCmNvbnRyYWN0IEhhc05vRXRoZXIgaXMgT3duYWJsZSB7CgogIC8qKgogICogQGRldiBDb25zdHJ1Y3RvciB0aGF0IHJlamVjdHMgaW5jb21pbmcgRXRoZXIKICAqIEBkZXYgVGhlIGBwYXlhYmxlYCBmbGFnIGlzIGFkZGVkIHNvIHdlIGNhbiBhY2Nlc3MgYG1zZy52YWx1ZWAgd2l0aG91dCBjb21waWxlciB3YXJuaW5nLiBJZiB3ZQogICogbGVhdmUgb3V0IHBheWFibGUsIHRoZW4gU29saWRpdHkgd2lsbCBhbGxvdyBpbmhlcml0aW5nIGNvbnRyYWN0cyB0byBpbXBsZW1lbnQgYSBwYXlhYmxlCiAgKiBjb25zdHJ1Y3Rvci4gQnkgZG9pbmcgaXQgdGhpcyB3YXkgd2UgcHJldmVudCBhIHBheWFibGUgY29uc3RydWN0b3IgZnJvbSB3b3JraW5nLiBBbHRlcm5hdGl2ZWx5CiAgKiB3ZSBjb3VsZCB1c2UgYXNzZW1ibHkgdG8gYWNjZXNzIG1zZy52YWx1ZS4KICAqLwogIGZ1bmN0aW9uIEhhc05vRXRoZXIoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA9PSAwKTsKICB9CgogIC8qKgogICAqIEBkZXYgRGlzYWxsb3dzIGRpcmVjdCBzZW5kIGJ5IHNldHRpbmdzIGEgZGVmYXVsdCBmdW5jdGlvbiB3aXRob3V0IHRoZSBgcGF5YWJsZWAgZmxhZy4KICAgKi8KICBmdW5jdGlvbigpIGV4dGVybmFsIHsKICB9CgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgYWxsIEV0aGVyIGhlbGQgYnkgdGhlIGNvbnRyYWN0IHRvIHRoZSBvd25lci4KICAgKi8KICBmdW5jdGlvbiByZWNsYWltRXRoZXIoKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgYXNzZXJ0KG93bmVyLnNlbmQodGhpcy5iYWxhbmNlKSk7CiAgfQp9CgoKLy8vKiBSZW1peCBmb3JtYXQKLy9pbXBvcnQgIi4vTWludGFibGVUb2tlbi5zb2wiOwovL2ltcG9ydCAiLi9IYXNOb0V0aGVyLnNvbCI7CgoKY29udHJhY3QgQmVsYSBpcyBNaW50YWJsZVRva2VuLCBIYXNOb0V0aGVyIAp7CiAgICAvLyBVc2luZyBsaWJyYXJpZXMgCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8vIFN0YXRlIFZhcmlhYmxlcyBmb3IgdGhlIEJlbGEgdG9rZW4gY29udHJhY3QKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIEVSQzIwIHRva2VuIHN0YXRlCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAKICAgIC8qKgogICAgVGhlc2Ugc3RhdGUgdmFycyBhcmUgaGFuZGxlZCBpbiB0aGUgT3BlblplcHBlbGluIGxpYnJhcmllczsKICAgIHdlIGRpc3BsYXkgdGhlbSBoZXJlIGZvciB0aGUgZGV2ZWxvcGVyJ3MgaW5mb3JtYXRpb24uCiAgICAqKioKICAgIC8vIEVSQzIwQmFzaWMgLSBTdG9yZSBhY2NvdW50IGJhbGFuY2VzCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlczsKCiAgICAvLyBTdGFuZGFyZFRva2VuIC0gT3duZXIgb2YgYWNjb3VudCBhcHByb3ZlcyB0cmFuc2ZlciBvZiBhbiBhbW91bnQgdG8gYW5vdGhlciBhY2NvdW50CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2VkOwoKICAgIC8vIAogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICAqLwogICAgCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBIdW1hbiB0b2tlbiBzdGF0ZQogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkJlbGEiOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiQkVMQSI7CiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgIGRlY2ltYWxzID0gMTg7CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIFN0YXRlIHZhcnMgZm9yIGN1c3RvbSBzdGFraW5nIGFuZCBidWRnZXQgZnVuY3Rpb25hbGl0eQogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLyBPd25lciBsYXN0IG1pbnRlZCB0aW1lCiAgICB1aW50IHB1YmxpYyBvd25lclRpbWVMYXN0TWludGVkOwogICAgLy8gT3duZXIgbWludGVkIHRva2VucyBwZXIgc2Vjb25kCiAgICB1aW50IHB1YmxpYyBvd25lck1pbnRSYXRlOwoKICAgIC8vLyBTdGFrZSBtaW50aW5nCiAgICAvLyBNaW50ZWQgdG9rZW5zIHBlciBzZWNvbmQgZm9yIGFsbCBzdGFrZXJzCiAgICB1aW50IHByaXZhdGUgZ2xvYmFsTWludFJhdGU7CiAgICAvLyBUb3RhbCB0b2tlbnMgY3VycmVudGx5IHN0YWtlZAogICAgdWludCBwdWJsaWMgdG90YWxCZWxhU3Rha2VkOyAKCiAgICAvLyBzdHJ1Y3QgdGhhdCB3aWxsIGhvbGQgdXNlciBzdGFrZQogICAgc3RydWN0IFRva2VuU3Rha2VEYXRhIHsKICAgICAgICB1aW50IGluaXRpYWxTdGFrZUJhbGFuY2U7CiAgICAgICAgdWludCBpbml0aWFsU3Rha2VUaW1lOwogICAgICAgIHVpbnQgaW5pdGlhbFN0YWtlUGVyY2VudGFnZTsKICAgICAgICBhZGRyZXNzIHN0YWtlU3BsaXRBZGRyZXNzOwogICAgfQogICAgCiAgICAvLyBUcmFjayBhbGwgdG9rZW5zIHN0YWtlZAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBUb2tlblN0YWtlRGF0YSkgcHVibGljIHN0YWtlQmFsYW5jZXM7CgogICAgLy8gRmlyZSBhIGxvZ2dhYmxlIGV2ZW50IHdoZW4gdG9rZW5zIGFyZSBzdGFrZWQKICAgIGV2ZW50IFN0YWtlKGFkZHJlc3MgaW5kZXhlZCBzdGFrZXIsIGFkZHJlc3MgaW5kZXhlZCBzdGFrZVNwbGl0QWRkcmVzcywgdWludDI1NiB2YWx1ZSk7CgogICAgLy8gRmlyZSBhIGxvZ2dhYmxlIGV2ZW50IHdoZW4gc3Rha2VkIHRva2VucyBhcmUgdmVzdGVkCiAgICBldmVudCBWZXN0KGFkZHJlc3MgaW5kZXhlZCB2ZXN0ZXIsIGFkZHJlc3MgaW5kZXhlZCBzdGFrZVNwbGl0QWRkcmVzcywgdWludDI1NiBzdGFrZWRBbW91bnQsIHVpbnQyNTYgc3Rha2luZ0dhaW5zKTsKCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8vIEJlZ2luIEJlbGEgdG9rZW4gZnVuY3Rpb25hbGl0eQogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLy8gQGRldiBCZWxhIHRva2VuIGNvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBCZWxhKCkgcHVibGljCiAgICB7CiAgICAgICAgLy8gRGVmaW5lIG93bmVyCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIC8vIERlZmluZSBpbml0aWFsIG93bmVyIHN1cHBseS4gKGV0aGVyIGhlcmUgaXMgdXNlZCBvbmx5IHRvIGdldCB0aGUgZGVjaW1hbHMgcmlnaHQpCiAgICAgICAgdWludCBfaW5pdE93bmVyU3VwcGx5ID0gNDEwMDAwMDAgZXRoZXI7CiAgICAgICAgLy8gT25lLXRpbWUgYnVsayBtaW50IGdpdmVuIHRvIG93bmVyCiAgICAgICAgYm9vbCBfc3VjY2VzcyA9IG1pbnQobXNnLnNlbmRlciwgX2luaXRPd25lclN1cHBseSk7CiAgICAgICAgLy8gQWJvcnQgaWYgaW5pdGlhbCBtaW50aW5nIGZhaWxlZCBmb3Igd2hhdGV2ZXIgcmVhc29uCiAgICAgICAgcmVxdWlyZShfc3VjY2Vzcyk7CgogICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIFNldCB1cCBzdGF0ZSBtaW50aW5nIHZhcmlhYmxlcwogICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgICAgICAvLyBTZXQgbGFzdCBtaW50ZWQgdG8gY3VycmVudCBibG9jay50aW1lc3RhbXAgKCdub3cnKQogICAgICAgIG93bmVyVGltZUxhc3RNaW50ZWQgPSBub3c7CiAgICAgICAgCiAgICAgICAgLy8gNDUwMCBtaW50ZWQgdG9rZW5zIHBlciBkYXksIDg2NDAwIHNlY29uZHMgaW4gYSBkYXkKICAgICAgICBvd25lck1pbnRSYXRlID0gY2FsY3VsYXRlRnJhY3Rpb24oNDUwMCwgODY0MDAsIGRlY2ltYWxzKTsKICAgICAgICAKICAgICAgICAvLyA0LDkwMCwwMDAgdGFyZ2V0ZWQgbWludGVkIHRva2VucyBwZXIgeWVhciB2aWEgc3Rha2luZzsgMzEsNTM2LDAwMCBzZWNvbmRzIHBlciB5ZWFyCiAgICAgICAgZ2xvYmFsTWludFJhdGUgPSBjYWxjdWxhdGVGcmFjdGlvbig0OTAwMDAwLCAzMTUzNjAwMCwgZGVjaW1hbHMpOwogICAgfQoKICAgIC8vLyBAZGV2IHN0YWtpbmcgZnVuY3Rpb24gd2hpY2ggYWxsb3dzIHVzZXJzIHRvIHN0YWtlIGFuIGFtb3VudCBvZiB0b2tlbnMgdG8gZ2FpbiBpbnRlcmVzdCBmb3IgdXAgdG8gMzAgZGF5cyAKICAgIGZ1bmN0aW9uIHN0YWtlQmVsYSh1aW50IF9zdGFrZUFtb3VudCkgZXh0ZXJuYWwKICAgIHsKICAgICAgICAvLyBSZXF1aXJlIHRoYXQgdG9rZW5zIGFyZSBzdGFrZWQgc3VjY2Vzc2Z1bGx5CiAgICAgICAgcmVxdWlyZShzdGFrZVRva2Vucyhfc3Rha2VBbW91bnQpKTsKICAgIH0KCiAgICAvLy8gQGRldiBzdGFraW5nIGZ1bmN0aW9uIHdoaWNoIGFsbG93cyB1c2VycyB0byBzcGxpdCB0aGUgaW50ZXJlc3QgZWFybmVkIHdpdGggYW5vdGhlciBhZGRyZXNzCiAgICBmdW5jdGlvbiBzdGFrZUJlbGFTcGxpdCh1aW50IF9zdGFrZUFtb3VudCwgYWRkcmVzcyBfc3Rha2VTcGxpdEFkZHJlc3MpIGV4dGVybmFsCiAgICB7CiAgICAgICAgLy8gUmVxdWlyZSB0aGF0IGEgQmVsYSBzcGxpdCBhY3R1YWxseSBiZSBzcGxpdCB3aXRoIGFuIGFkZHJlc3MKICAgICAgICByZXF1aXJlKF9zdGFrZVNwbGl0QWRkcmVzcyA+IDApOwogICAgICAgIC8vIFN0b3JlIHNwbGl0IGFkZHJlc3MgaW50byBzdGFrZSBtYXBwaW5nCiAgICAgICAgc3Rha2VCYWxhbmNlc1ttc2cuc2VuZGVyXS5zdGFrZVNwbGl0QWRkcmVzcyA9IF9zdGFrZVNwbGl0QWRkcmVzczsKICAgICAgICAvLyBSZXF1aXJlIHRoYXQgdG9rZW5zIGFyZSBzdGFrZWQgc3VjY2Vzc2Z1bGx5CiAgICAgICAgcmVxdWlyZShzdGFrZVRva2Vucyhfc3Rha2VBbW91bnQpKTsKCiAgICB9CgogICAgLy8vIEBkZXYgYWxsb3dzIHVzZXJzIHRvIHJlY2xhaW0gYW55IHN0YWtlZCB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIGJvb2wgb24gc3VjY2VzcwogICAgZnVuY3Rpb24gY2xhaW1TdGFrZSgpIGV4dGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICAvLy8gU2FuaXR5IGNoZWNrczogCiAgICAgICAgLy8gcmVxdWlyZSB0aGF0IHRoZXJlIHdhcyBzb21lIGFtb3VudCB2ZXN0ZWQKICAgICAgICByZXF1aXJlKHN0YWtlQmFsYW5jZXNbbXNnLnNlbmRlcl0uaW5pdGlhbFN0YWtlQmFsYW5jZSA+IDApOwogICAgICAgIC8vIHJlcXVpcmUgdGhhdCB0aW1lIGhhcyBlbGFwc2VkCiAgICAgICAgcmVxdWlyZShub3cgPiBzdGFrZUJhbGFuY2VzW21zZy5zZW5kZXJdLmluaXRpYWxTdGFrZVRpbWUpOwoKICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIHRpbWUgZWxhcHNlZCBzaW5jZSB0aGUgdG9rZW5zIHdlcmUgb3JpZ2luYWxseSBzdGFrZWQKICAgICAgICB1aW50IF90aW1lUGFzc2VkU2luY2VTdGFrZSA9IG5vdy5zdWIoc3Rha2VCYWxhbmNlc1ttc2cuc2VuZGVyXS5pbml0aWFsU3Rha2VUaW1lKTsKCiAgICAgICAgLy8gQ2FsY3VsYXRlIHRva2VucyB0byBtaW50CiAgICAgICAgdWludCBfdG9rZW5zVG9NaW50ID0gY2FsY3VsYXRlU3Rha2VHYWlucyhfdGltZVBhc3NlZFNpbmNlU3Rha2UpOwoKICAgICAgICAvLyBBZGQgdGhlIG9yaWdpbmFsIHN0YWtlIGJhY2sgdG8gdGhlIHVzZXIncyBiYWxhbmNlCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gc3Rha2VCYWxhbmNlc1ttc2cuc2VuZGVyXS5pbml0aWFsU3Rha2VCYWxhbmNlOwogICAgICAgIAogICAgICAgIC8vIFN1YnRyYWN0IHN0YWtlIGJhbGFuY2UgZnJvbSB0b3RhbEJlbGFTdGFrZWQKICAgICAgICB0b3RhbEJlbGFTdGFrZWQgLT0gc3Rha2VCYWxhbmNlc1ttc2cuc2VuZGVyXS5pbml0aWFsU3Rha2VCYWxhbmNlOwogICAgICAgIAogICAgICAgIC8vIE1pbnQgdGhlIG5ldyB0b2tlbnM7IHRoZSBuZXcgdG9rZW5zIGFyZSBhZGRlZCB0byB0aGUgdXNlcidzIGJhbGFuY2UKICAgICAgICBpZiAoc3Rha2VCYWxhbmNlc1ttc2cuc2VuZGVyXS5zdGFrZVNwbGl0QWRkcmVzcyA+IDApIAogICAgICAgIHsKICAgICAgICAgICAgLy8gU3BsaXR0aW5nIHN0YWtlLCBzbyBtaW50IGhhbGYgdG8gc2VuZGVyIGFuZCBoYWxmIHRvIHN0YWtlU3BsaXRBZGRyZXNzCiAgICAgICAgICAgIG1pbnQobXNnLnNlbmRlciwgX3Rva2Vuc1RvTWludC5kaXYoMikpOwogICAgICAgICAgICBtaW50KHN0YWtlQmFsYW5jZXNbbXNnLnNlbmRlcl0uc3Rha2VTcGxpdEFkZHJlc3MsIF90b2tlbnNUb01pbnQuZGl2KDIpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBOb3Qgc3BsaXRpbmcgc3Rha2U7IG1pbnQgYWxsIG5ldyB0b2tlbnMgYW5kIGdpdmUgdGhlbSB0byBtc2cuc2VuZGVyIAogICAgICAgICAgICBtaW50KG1zZy5zZW5kZXIsIF90b2tlbnNUb01pbnQpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBGaXJlIGFuIGV2ZW50IHRvIHRlbGwgdGhlIHdvcmxkIG9mIHRoZSBuZXdseSB2ZXN0ZWQgdG9rZW5zCiAgICAgICAgVmVzdChtc2cuc2VuZGVyLCBzdGFrZUJhbGFuY2VzW21zZy5zZW5kZXJdLnN0YWtlU3BsaXRBZGRyZXNzLCBzdGFrZUJhbGFuY2VzW21zZy5zZW5kZXJdLmluaXRpYWxTdGFrZUJhbGFuY2UsIF90b2tlbnNUb01pbnQpOwoKICAgICAgICAvLyBDbGVhciBvdXQgc3RvcmVkIGRhdGEgZnJvbSBtYXBwaW5nCiAgICAgICAgc3Rha2VCYWxhbmNlc1ttc2cuc2VuZGVyXS5pbml0aWFsU3Rha2VCYWxhbmNlID0gMDsKICAgICAgICBzdGFrZUJhbGFuY2VzW21zZy5zZW5kZXJdLmluaXRpYWxTdGFrZVRpbWUgPSAwOwogICAgICAgIHN0YWtlQmFsYW5jZXNbbXNnLnNlbmRlcl0uaW5pdGlhbFN0YWtlUGVyY2VudGFnZSA9IDA7CiAgICAgICAgc3Rha2VCYWxhbmNlc1ttc2cuc2VuZGVyXS5zdGFrZVNwbGl0QWRkcmVzcyA9IDA7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IEFsbG93cyB1c2VyIHRvIGNoZWNrIHRoZWlyIHN0YWtlZCBiYWxhbmNlCiAgICBmdW5jdGlvbiBnZXRTdGFrZWRCYWxhbmNlKCkgdmlldyBleHRlcm5hbCByZXR1cm5zICh1aW50IHN0YWtlZEJhbGFuY2UpIAogICAgewogICAgICAgIHJldHVybiBzdGFrZUJhbGFuY2VzW21zZy5zZW5kZXJdLmluaXRpYWxTdGFrZUJhbGFuY2U7CiAgICB9CgogICAgLy8vIEBkZXYgYWxsb3dzIGNvbnRyYWN0IG93bmVyIHRvIGNsYWltIHRoZWlyIG1pbnQKICAgIGZ1bmN0aW9uIG93bmVyQ2xhaW0oKSBleHRlcm5hbCBvbmx5T3duZXIKICAgIHsKICAgICAgICAvLyBTYW5pdHkgY2hlY2s6IGVuc3VyZSB0aGF0IHdlIGRpZG4ndCB0cmF2ZWwgYmFjayBpbiB0aW1lCiAgICAgICAgcmVxdWlyZShub3cgPiBvd25lclRpbWVMYXN0TWludGVkKTsKICAgICAgICAKICAgICAgICB1aW50IF90aW1lUGFzc2VkU2luY2VMYXN0TWludDsKICAgICAgICB1aW50IF90b2tlbk1pbnRDb3VudDsKICAgICAgICBib29sIF9taW50aW5nU3VjY2VzczsKCiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2Ygc2Vjb25kcyB0aGF0IGhhdmUgcGFzc2VkIHNpbmNlIHRoZSBvd25lciBsYXN0IHRvb2sgYSBjbGFpbQogICAgICAgIF90aW1lUGFzc2VkU2luY2VMYXN0TWludCA9IG5vdy5zdWIob3duZXJUaW1lTGFzdE1pbnRlZCk7CgogICAgICAgIC8vIFNhbml0eSBjaGVjazogZW5zdXJlIHRoYXQgc29tZSB0aW1lIGhhcyBwYXNzZWQgc2luY2UgdGhlIG93bmVyIGxhc3QgY2xhaW1lZAogICAgICAgIGFzc2VydChfdGltZVBhc3NlZFNpbmNlTGFzdE1pbnQgPiAwKTsKCiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB0b2tlbiBtaW50IGFtb3VudCwgZGV0ZXJtaW5lZCBmcm9tIHRoZSBudW1iZXIgb2Ygc2Vjb25kcyBwYXNzZWQgYW5kIHRoZSBvd25lck1pbnRSYXRlCiAgICAgICAgX3Rva2VuTWludENvdW50ID0gY2FsY3VsYXRlTWludFRvdGFsKF90aW1lUGFzc2VkU2luY2VMYXN0TWludCwgb3duZXJNaW50UmF0ZSk7CgogICAgICAgIC8vIE1pbnQgdGhlIG93bmVyJ3MgdG9rZW5zOyB0aGlzIGFsc28gaW5jcmVhc2VzIHRvdGFsU3VwcGx5CiAgICAgICAgX21pbnRpbmdTdWNjZXNzID0gbWludChtc2cuc2VuZGVyLCBfdG9rZW5NaW50Q291bnQpOwoKICAgICAgICAvLyBTYW5pdHkgY2hlY2s6IGVuc3VyZSB0aGF0IHRoZSBtaW50aW5nIHdhcyBzdWNjZXNzZnVsCiAgICAgICAgcmVxdWlyZShfbWludGluZ1N1Y2Nlc3MpOwogICAgICAgIAogICAgICAgIC8vIE5ldyBtaW50aW5nIHdhcyBhIHN1Y2Nlc3MhIFNldCBsYXN0IHRpbWUgbWludGVkIHRvIGN1cnJlbnQgYmxvY2sudGltZXN0YW1wIChub3cpCiAgICAgICAgb3duZXJUaW1lTGFzdE1pbnRlZCA9IG5vdzsKICAgIH0KCiAgICAvLy8gQGRldiBzdGFrZSBmdW5jdGlvbiByZWR1Y2VzIHRoZSB1c2VyJ3MgdG90YWwgYXZhaWxhYmxlIGJhbGFuY2UuIHRvdGFsU3VwcGx5IGlzIHVuYWZmZWN0ZWQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIGRldGVybWluZXMgaG93IG1hbnkgdG9rZW5zIGEgdXNlciB3YW50cyB0byBzdGFrZQogICAgZnVuY3Rpb24gc3Rha2VUb2tlbnModWludDI1NiBfdmFsdWUpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIC8vLyBTYW5pdHkgQ2hlY2tzOgogICAgICAgIC8vIFlvdSBjYW4gb25seSBzdGFrZSBhcyBtYW55IHRva2VucyBhcyB5b3UgaGF2ZQogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKICAgICAgICAvLyBZb3UgY2FuIG9ubHkgc3Rha2UgdG9rZW5zIGlmIHlvdSBoYXZlIG5vdCBhbHJlYWR5IHN0YWtlZCB0b2tlbnMKICAgICAgICByZXF1aXJlKHN0YWtlQmFsYW5jZXNbbXNnLnNlbmRlcl0uaW5pdGlhbFN0YWtlQmFsYW5jZSA9PSAwKTsKCiAgICAgICAgLy8gU3VidHJhY3Qgc3Rha2UgYW1vdW50IGZyb20gcmVndWxhciB0b2tlbiBiYWxhbmNlCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKCiAgICAgICAgLy8gQWRkIHN0YWtlIGFtb3VudCB0byBzdGFrZWQgYmFsYW5jZQogICAgICAgIHN0YWtlQmFsYW5jZXNbbXNnLnNlbmRlcl0uaW5pdGlhbFN0YWtlQmFsYW5jZSA9IF92YWx1ZTsKCiAgICAgICAgLy8gSW5jcmVtZW50IHRoZSBnbG9iYWwgc3Rha2VkIHRva2VucyB2YWx1ZQogICAgICAgIHRvdGFsQmVsYVN0YWtlZCArPSBfdmFsdWU7CgogICAgICAgIC8vLyBEZXRlcm1pbmUgcGVyY2VudGFnZSBvZiBnbG9iYWwgc3Rha2UKICAgICAgICBzdGFrZUJhbGFuY2VzW21zZy5zZW5kZXJdLmluaXRpYWxTdGFrZVBlcmNlbnRhZ2UgPSBjYWxjdWxhdGVGcmFjdGlvbihfdmFsdWUsIHRvdGFsQmVsYVN0YWtlZCwgZGVjaW1hbHMpOwogICAgICAgIAogICAgICAgIC8vIFNhdmUgdGhlIHRpbWUgdGhhdCB0aGUgc3Rha2Ugc3RhcnRlZAogICAgICAgIHN0YWtlQmFsYW5jZXNbbXNnLnNlbmRlcl0uaW5pdGlhbFN0YWtlVGltZSA9IG5vdzsKCiAgICAgICAgLy8gRmlyZSBhbiBldmVudCB0byB0ZWxsIHRoZSB3b3JsZCBvZiB0aGUgbmV3bHkgc3Rha2VkIHRva2VucwogICAgICAgIFN0YWtlKG1zZy5zZW5kZXIsIHN0YWtlQmFsYW5jZXNbbXNnLnNlbmRlcl0uc3Rha2VTcGxpdEFkZHJlc3MsIF92YWx1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IEhlbHBlciBmdW5jdGlvbiB0byBjbGFpbVN0YWtlIHRoYXQgbW9kdWxhcml6ZXMgdGhlIG1pbnRpbmcgdmlhIHN0YWtpbmcgY2FsY3VsYXRpb24gCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVTdGFrZUdhaW5zKHVpbnQgX3RpbWVQYXNzZWRTaW5jZVN0YWtlKSB2aWV3IHByaXZhdGUgcmV0dXJucyAodWludCBtaW50VG90YWwpCiAgICB7CiAgICAgICAgLy8gU3RvcmUgc2Vjb25kcyBpbiBhIGRheSAobmVlZCBpdCBpbiB2YXJpYWJsZSB0byB1c2UgU2FmZU1hdGgpCiAgICAgICAgdWludCBfc2Vjb25kc1BlckRheSA9IDg2NDAwOwogICAgICAgIHVpbnQgX2ZpbmFsU3Rha2VQZXJjZW50YWdlOyAgICAgLy8gc3RvcmUgb3VyIHN0YWtlIHBlcmNlbnRhZ2UgYXQgdGhlIHRpbWUgb2Ygc3Rha2UgY2xhaW0KICAgICAgICB1aW50IF9zdGFrZVBlcmNlbnRhZ2VBdmVyYWdlOyAgIC8vIHN0b3JlIG91ciBjYWxjdWxhdGVkIGF2ZXJhZ2UgbWludGluZyByYXRlICgoaW5pdGlhbCtmaW5hbCkgLyAyKQogICAgICAgIHVpbnQgX2ZpbmFsTWludFJhdGU7ICAgICAgICAgICAgLy8gc3RvcmUgb3VyIGNhbGN1bGF0ZWQgZmluYWwgbWludCByYXRlIChpbiBCZWxhLXBlci1zZWNvbmQpCiAgICAgICAgdWludCBfdG9rZW5zVG9NaW50ID0gMDsgICAgICAgICAvLyBzdG9yZSBudW1iZXIgb2YgbmV3IHRva2VucyB0byBiZSBtaW50ZWQKICAgICAgICAKICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGFtb3VudCB0byBiZSBuZXdseSBtaW50ZWQgdXBvbiB2ZXN0aW5nLCBpZiBhbnkKICAgICAgICBpZiAoX3RpbWVQYXNzZWRTaW5jZVN0YWtlID4gX3NlY29uZHNQZXJEYXkpIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vLyBXZSd2ZSBwYXNzZWQgdGhlIG1pbmltdW0gc3Rha2luZyB0aW1lOyBjYWxjdWxhdGUgbWludGluZyByYXRlIGF2ZXJhZ2UgKChpbml0aWFsUmF0ZSArIGZpbmFsUmF0ZSkgLyAyKQogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRmlyc3QsIGNhbGN1bGF0ZSBvdXIgZmluYWwgc3Rha2UgcGVyY2VudGFnZSBiYXNlZCB1cG9uIHRoZSB0b3RhbCBhbW91bnQgb2YgQmVsYSBzdGFrZWQKICAgICAgICAgICAgX2ZpbmFsU3Rha2VQZXJjZW50YWdlID0gY2FsY3VsYXRlRnJhY3Rpb24oc3Rha2VCYWxhbmNlc1ttc2cuc2VuZGVyXS5pbml0aWFsU3Rha2VCYWxhbmNlLCB0b3RhbEJlbGFTdGFrZWQsIGRlY2ltYWxzKTsKCiAgICAgICAgICAgIC8vIFNlY29uZCwgY2FsY3VsYXRlIGF2ZXJhZ2Ugb2YgaW5pdGlhbCBhbmQgZmluYWwgc3Rha2UgcGVyY2VudGFnZQogICAgICAgICAgICBfc3Rha2VQZXJjZW50YWdlQXZlcmFnZSA9IGNhbGN1bGF0ZUZyYWN0aW9uKChzdGFrZUJhbGFuY2VzW21zZy5zZW5kZXJdLmluaXRpYWxTdGFrZVBlcmNlbnRhZ2UuYWRkKF9maW5hbFN0YWtlUGVyY2VudGFnZSkpLCAyLCAwKTsKCiAgICAgICAgICAgIC8vIEZpbmFsbHksIGNhbGN1bGF0ZSBvdXIgZmluYWwgbWludCByYXRlIChpbiBCZWxhLXBlci1zZWNvbmQpCiAgICAgICAgICAgIF9maW5hbE1pbnRSYXRlID0gZ2xvYmFsTWludFJhdGUubXVsKF9zdGFrZVBlcmNlbnRhZ2VBdmVyYWdlKTsgCiAgICAgICAgICAgIF9maW5hbE1pbnRSYXRlID0gX2ZpbmFsTWludFJhdGUuZGl2KDEgZXRoZXIpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gVG9rZW5zIHdlcmUgc3Rha2VkIGZvciBlbm91Z2ggdGltZSB0byBtaW50IG5ldyB0b2tlbnM7IGRldGVybWluZSBob3cgbWFueQogICAgICAgICAgICBpZiAoX3RpbWVQYXNzZWRTaW5jZVN0YWtlID4gX3NlY29uZHNQZXJEYXkubXVsKDMwKSkgewogICAgICAgICAgICAgICAgLy8gVG9rZW5zIHdlcmUgc3Rha2VkIGZvciB0aGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSAoMzAgZGF5cykKICAgICAgICAgICAgICAgIF90b2tlbnNUb01pbnQgPSBjYWxjdWxhdGVNaW50VG90YWwoX3NlY29uZHNQZXJEYXkubXVsKDMwKSwgX2ZpbmFsTWludFJhdGUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gVG9rZW5zIHdlcmUgc3Rha2VkIGZvciBhIG1pbnRhYmxlIGFtb3VudCBvZiB0aW1lLCBidXQgbGVzcyB0aGFuIHRoZSAzMC1kYXkgbWF4CiAgICAgICAgICAgICAgICBfdG9rZW5zVG9NaW50ID0gY2FsY3VsYXRlTWludFRvdGFsKF90aW1lUGFzc2VkU2luY2VTdGFrZSwgX2ZpbmFsTWludFJhdGUpOwogICAgICAgICAgICB9CiAgICAgICAgfSAKICAgICAgICAKICAgICAgICAvLyBSZXR1cm4gdGhlIGFtb3VudCBvZiBuZXcgdG9rZW5zIHRvIGJlIG1pbnRlZAogICAgICAgIHJldHVybiBfdG9rZW5zVG9NaW50OwoKICAgIH0KCiAgICAvLy8gQGRldiBjYWxjdWxhdGVGcmFjdGlvbiBhbGxvd3MgdXMgdG8gYmV0dGVyIGhhbmRsZSB0aGUgU29saWRpdHkgdWdsaW5lc3Mgb2Ygbm90IGhhdmluZyBkZWNpbWFscyBhcyBhIG5hdGl2ZSB0eXBlIAogICAgLy8vIEBwYXJhbSBfbnVtZXJhdG9yIGlzIHRoZSB0b3AgcGFydCBvZiB0aGUgZnJhY3Rpb24gd2UgYXJlIGNhbGN1bGF0aW5nCiAgICAvLy8gQHBhcmFtIF9kZW5vbWluYXRvciBpcyB0aGUgYm90dG9tIHBhcnQgb2YgdGhlIGZyYWN0aW9uIHdlIGFyZSBjYWxjdWxhdGluZwogICAgLy8vIEBwYXJhbSBfcHJlY2lzaW9uIHRlbGxzIHRoZSBmdW5jdGlvbiBob3cgbWFueSBzaWduaWZpY2FudCBkaWdpdHMgdG8gY2FsY3VsYXRlIG91dCB0bwogICAgLy8vIEByZXR1cm4gcXVvdGllbnQgcmV0dXJucyB0aGUgcmVzdWx0IG9mIG91ciBmcmFjdGlvbiBjYWxjdWxhdGlvbgogICAgZnVuY3Rpb24gY2FsY3VsYXRlRnJhY3Rpb24odWludCBfbnVtZXJhdG9yLCB1aW50IF9kZW5vbWluYXRvciwgdWludCBfcHJlY2lzaW9uKSBwdXJlIHByaXZhdGUgcmV0dXJucyh1aW50IHF1b3RpZW50KSAKICAgIHsKICAgICAgICAvLyBUYWtlIHBhc3NlZCB2YWx1ZSBhbmQgZXhwYW5kIGl0IHRvIHRoZSByZXF1aXJlZCBwcmVjaXNpb24KICAgICAgICBfbnVtZXJhdG9yID0gX251bWVyYXRvci5tdWwoMTAgKiogKF9wcmVjaXNpb24gKyAxKSk7CiAgICAgICAgLy8gaGFuZGxlIGxhc3QtZGlnaXQgcm91bmRpbmcKICAgICAgICB1aW50IF9xdW90aWVudCA9ICgoX251bWVyYXRvci5kaXYoX2Rlbm9taW5hdG9yKSkgKyA1KSAvIDEwOwogICAgICAgIHJldHVybiAoX3F1b3RpZW50KTsKICAgIH0KCiAgICAvLy8gQGRldiBEZXRlcm1pbmVzIG1pbnQgdG90YWwgYmFzZWQgdXBvbiBob3cgbWFueSBzZWNvbmRzIGhhdmUgcGFzc2VkCiAgICAvLy8gQHBhcmFtIF90aW1lSW5TZWNvbmRzIHRha2VzIHRoZSB0aW1lIHRoYXQgaGFzIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgbWludGluZwogICAgLy8vIEByZXR1cm4gdWludCB3aXRoIHRoZSBjYWxjdWxhdGVkIG51bWJlciBvZiBuZXcgdG9rZW5zIHRvIG1pbnQKICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZU1pbnRUb3RhbCh1aW50IF90aW1lSW5TZWNvbmRzLCB1aW50IF9taW50UmF0ZSkgcHVyZSBwcml2YXRlIHJldHVybnModWludCBtaW50QW1vdW50KQogICAgewogICAgICAgIC8vIENhbGN1bGF0ZXMgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gbWludCBiYXNlZCB1cG9uIHRoZSBudW1iZXIgb2Ygc2Vjb25kcyBwYXNzZWQKICAgICAgICByZXR1cm4oX3RpbWVJblNlY29uZHMubXVsKF9taW50UmF0ZSkpOwogICAgfQoKfQ=='.
	

]
