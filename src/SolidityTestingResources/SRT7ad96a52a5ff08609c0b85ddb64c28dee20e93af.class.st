Class {
	#name : #SRT7ad96a52a5ff08609c0b85ddb64c28dee20e93af,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7ad96a52a5ff08609c0b85ddb64c28dee20e93af >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9CgovKioKICogQHRpdGxlIFNpbXBsZVRva2VuCiAqIEBkZXYgVmVyeSBzaW1wbGUgRVJDMjAgVG9rZW4gZXhhbXBsZSwgd2hlcmUgYWxsIHRva2VucyBhcmUgcHJlLWFzc2lnbmVkIHRvIHRoZSBjcmVhdG9yLgogKiBOb3RlIHRoZXkgY2FuIGxhdGVyIGRpc3RyaWJ1dGUgdGhlc2UgdG9rZW5zIGFzIHRoZXkgd2lzaCB1c2luZyBgdHJhbnNmZXJgIGFuZCBvdGhlcgogKiBgU3RhbmRhcmRUb2tlbmAgZnVuY3Rpb25zLgogKi8KY29udHJhY3QgT3Bwb3J0eVRva2VuIGlzIFN0YW5kYXJkVG9rZW4gewoKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiT3Bwb3J0eVRva2VuIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJPUFAiOwogIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBJTklUSUFMX1NVUFBMWSA9IDEwMDAwMDAwMDAgKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwoKICAvKioKICAgKiBAZGV2IENvbnRydWN0b3IgdGhhdCBnaXZlcyBtc2cuc2VuZGVyIGFsbCBvZiBleGlzdGluZyB0b2tlbnMuCiAgICovCiAgZnVuY3Rpb24gT3Bwb3J0eVRva2VuKCkgcHVibGljIHsKICAgIHRvdGFsU3VwcGx5ID0gSU5JVElBTF9TVVBQTFk7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IElOSVRJQUxfU1VQUExZOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgUGF1c2FibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgogKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CiAgZXZlbnQgUGF1c2UoKTsKICBldmVudCBVbnBhdXNlKCk7CgogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBub3QgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gdHJ1ZTsKICAgIFBhdXNlKCk7CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgKi8KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogIH0KfQoKY29udHJhY3QgSG9sZFNhbGVDb250cmFjdCBpcyBPd25hYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAvLyBBZGRyZXNzZXMgYW5kIGNvbnRyYWN0cwogIE9wcG9ydHlUb2tlbiBwdWJsaWMgT3BwVG9rZW47CgogIHN0cnVjdCBIb2xkZXIgewogICAgYm9vbCBpc0FjdGl2ZTsKICAgIHVpbnQgdG9rZW5zOwogICAgdWludCBob2xkUGVyaW9kVGltZXN0YW1wOwogICAgYm9vbCB3aXRoZHJhd2VkOwogIH0KCiAgbWFwcGluZyhhZGRyZXNzID0+IEhvbGRlcikgcHVibGljIGhvbGRlckxpc3Q7CiAgbWFwcGluZyh1aW50ID0+IGFkZHJlc3MpIHByaXZhdGUgaG9sZGVySW5kZXhlczsKCiAgbWFwcGluZyAodWludCA9PiBhZGRyZXNzKSBwcml2YXRlIGFzc2V0T3duZXJzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHJpdmF0ZSBhc3NldE93bmVyc0luZGV4OwogIHVpbnQgcHJpdmF0ZSBhc3NldE93bmVyc0luZGV4ZXM7CgogIHVpbnQgcHJpdmF0ZSBob2xkZXJJbmRleDsKICB1aW50IHByaXZhdGUgaG9sZGVyV2l0aGRyYXdJbmRleDsKCiAgdWludCBwcml2YXRlIHRva2VuQWRkSG9sZDsKICB1aW50IHByaXZhdGUgdG9rZW5XaXRoZHJhd0hvbGQ7CgogIGV2ZW50IFRva2Vuc1RyYW5zZmVyZWQoYWRkcmVzcyBjb250cmlidXRvciAsIHVpbnQgYW1vdW50KTsKICBldmVudCBIb2xkKGFkZHJlc3Mgc2VuZGVyLCBhZGRyZXNzIGNvbnRyaWJ1dG9yLCB1aW50IGFtb3VudCwgdWludCBob2xkUGVyaW9kKTsKCiAgbW9kaWZpZXIgb25seUFzc2V0c093bmVycygpIHsKICAgIHJlcXVpcmUoYXNzZXRPd25lcnNJbmRleFttc2cuc2VuZGVyXSA+IDApOwogICAgXzsKICB9CgogIC8qIGNvbnN0cnVjdG9yICovCiAgZnVuY3Rpb24gSG9sZFNhbGVDb250cmFjdChhZGRyZXNzIF9PcHBUb2tlbikgcHVibGljIHsKICAgIE9wcFRva2VuID0gT3Bwb3J0eVRva2VuKF9PcHBUb2tlbik7CiAgICBhZGRBc3NldHNPd25lcihtc2cuc2VuZGVyKTsKICB9CgogIGZ1bmN0aW9uIGFkZEhvbGRlcihhZGRyZXNzIGhvbGRlciwgdWludCB0b2tlbnMsIHVpbnQgdGltZXN0KSBvbmx5QXNzZXRzT3duZXJzIGV4dGVybmFsIHsKICAgIGlmIChob2xkZXJMaXN0W2hvbGRlcl0uaXNBY3RpdmUgPT0gZmFsc2UpIHsKICAgICAgaG9sZGVyTGlzdFtob2xkZXJdLmlzQWN0aXZlID0gdHJ1ZTsKICAgICAgaG9sZGVyTGlzdFtob2xkZXJdLnRva2VucyA9IHRva2VuczsKICAgICAgaG9sZGVyTGlzdFtob2xkZXJdLmhvbGRQZXJpb2RUaW1lc3RhbXAgPSB0aW1lc3Q7CiAgICAgIGhvbGRlckluZGV4ZXNbaG9sZGVySW5kZXhdID0gaG9sZGVyOwogICAgICBob2xkZXJJbmRleCsrOwogICAgfSBlbHNlIHsKICAgICAgaG9sZGVyTGlzdFtob2xkZXJdLnRva2VucyArPSB0b2tlbnM7CiAgICAgIGhvbGRlckxpc3RbaG9sZGVyXS5ob2xkUGVyaW9kVGltZXN0YW1wID0gdGltZXN0OwogICAgfQogICAgdG9rZW5BZGRIb2xkICs9IHRva2VuczsKICAgIEhvbGQobXNnLnNlbmRlciwgaG9sZGVyLCB0b2tlbnMsIHRpbWVzdCk7CiAgfQoKICBmdW5jdGlvbiBnZXRCYWxhbmNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiBPcHBUb2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgfQoKICBmdW5jdGlvbiB1bmxvY2tUb2tlbnMoKSBleHRlcm5hbCB7CiAgICBhZGRyZXNzIGNvbnRyaWJ1dG9yID0gbXNnLnNlbmRlcjsKCiAgICBpZiAoaG9sZGVyTGlzdFtjb250cmlidXRvcl0uaXNBY3RpdmUgJiYgIWhvbGRlckxpc3RbY29udHJpYnV0b3JdLndpdGhkcmF3ZWQpIHsKICAgICAgaWYgKG5vdyA+PSBob2xkZXJMaXN0W2NvbnRyaWJ1dG9yXS5ob2xkUGVyaW9kVGltZXN0YW1wKSB7CiAgICAgICAgaWYgKCBPcHBUb2tlbi50cmFuc2ZlciggbXNnLnNlbmRlciwgaG9sZGVyTGlzdFtjb250cmlidXRvcl0udG9rZW5zICkgKSB7CiAgICAgICAgICBUb2tlbnNUcmFuc2ZlcmVkKGNvbnRyaWJ1dG9yLCAgaG9sZGVyTGlzdFtjb250cmlidXRvcl0udG9rZW5zKTsKICAgICAgICAgIHRva2VuV2l0aGRyYXdIb2xkICs9IGhvbGRlckxpc3RbY29udHJpYnV0b3JdLnRva2VuczsKICAgICAgICAgIGhvbGRlckxpc3RbY29udHJpYnV0b3JdLndpdGhkcmF3ZWQgPSB0cnVlOwogICAgICAgICAgaG9sZGVyV2l0aGRyYXdJbmRleCsrOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhZGRBc3NldHNPd25lcihhZGRyZXNzIF9vd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICBhc3NldE93bmVyc0luZGV4ZXMrKzsKICAgIGFzc2V0T3duZXJzW2Fzc2V0T3duZXJzSW5kZXhlc10gPSBfb3duZXI7CiAgICBhc3NldE93bmVyc0luZGV4W19vd25lcl0gPSBhc3NldE93bmVyc0luZGV4ZXM7CiAgfQogIGZ1bmN0aW9uIHJlbW92ZUFzc2V0c093bmVyKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHVpbnQgaW5kZXggPSBhc3NldE93bmVyc0luZGV4W19vd25lcl07CiAgICBkZWxldGUgYXNzZXRPd25lcnNJbmRleFtfb3duZXJdOwogICAgZGVsZXRlIGFzc2V0T3duZXJzW2luZGV4XTsKICAgIGFzc2V0T3duZXJzSW5kZXhlcy0tOwogIH0KICBmdW5jdGlvbiBnZXRBc3NldHNPd25lcnModWludCBfaW5kZXgpIG9ubHlPd25lciBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgcmV0dXJuIGFzc2V0T3duZXJzW19pbmRleF07CiAgfQoKICBmdW5jdGlvbiBnZXRPdmVyVG9rZW5zKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKGdldEJhbGFuY2UoKSA+ICh0b2tlbkFkZEhvbGQgLSB0b2tlbldpdGhkcmF3SG9sZCkpOwogICAgdWludCBiYWxhbmNlID0gZ2V0QmFsYW5jZSgpIC0gKHRva2VuQWRkSG9sZCAtIHRva2VuV2l0aGRyYXdIb2xkKTsKICAgIGlmKGJhbGFuY2UgPiAwKSB7CiAgICAgIGlmKE9wcFRva2VuLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGJhbGFuY2UpKSB7CiAgICAgICAgVG9rZW5zVHJhbnNmZXJlZChtc2cuc2VuZGVyLCAgYmFsYW5jZSk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGdldFRva2VuQWRkSG9sZCgpIG9ubHlPd25lciBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIHRva2VuQWRkSG9sZDsKICB9CiAgZnVuY3Rpb24gZ2V0VG9rZW5XaXRoZHJhd0hvbGQoKSBvbmx5T3duZXIgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiB0b2tlbldpdGhkcmF3SG9sZDsKICB9CiAgZnVuY3Rpb24gZ2V0SG9sZGVySW5kZXgoKSBvbmx5T3duZXIgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiBob2xkZXJJbmRleDsKICB9CiAgZnVuY3Rpb24gZ2V0SG9sZGVyV2l0aGRyYXdJbmRleCgpIG9ubHlPd25lciBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIGhvbGRlcldpdGhkcmF3SW5kZXg7CiAgfQp9Cgpjb250cmFjdCBUb2tlblNhbGUgaXMgUGF1c2FibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBPcHBvcnR5VG9rZW4gcHVibGljIHRva2VuOwoKICBIb2xkU2FsZUNvbnRyYWN0IHB1YmxpYyBob2xkQ29udHJhY3Q7CgogIGVudW0gU2FsZVN0YXRlICB7IE5FVywgU0FMRSwgRU5ERUQgfQogIFNhbGVTdGF0ZSBwdWJsaWMgc3RhdGU7CgogIHVpbnQgcHVibGljIGVuZERhdGU7CiAgdWludCBwdWJsaWMgdW5ob2xkRGF0ZTsKICB1aW50IHB1YmxpYyBtaW5pbWFsQ29udHJpYnV0aW9uOwoKICAvLyBhZGRyZXNzIHdoZXJlIGZ1bmRzIGFyZSBjb2xsZWN0ZWQKICBhZGRyZXNzIHByaXZhdGUgd2FsbGV0OwoKICAvLyB0b3RhbCBFVEggY29sbGVjdGVkCiAgdWludCBwcml2YXRlIGV0aFJhaXNlZDsKCiAgdWludCBwcml2YXRlIHByaWNlOwogIHVpbnQ4IHByaXZhdGUgYm9udXM7CgogIHVpbnQgcHJpdmF0ZSB0b2tlblJhaXNlZDsKICBib29sIHB1YmxpYyB0b2tlbnNUcmFuc2ZlcnJlZFRvSG9sZDsKCiAgLyogRXZlbnRzICovCiAgZXZlbnQgU2FsZVN0YXJ0ZWQodWludCBibG9ja051bWJlcik7CiAgZXZlbnQgU2FsZUVuZGVkKHVpbnQgYmxvY2tOdW1iZXIpOwogIGV2ZW50IEZ1bmRUcmFuc2ZlcmVkKGFkZHJlc3MgY29udHJpYiwgdWludCBhbW91bnQpOwogIGV2ZW50IFdpdGhkcmF3ZWRFdGhUb1dhbGxldCh1aW50IGFtb3VudCk7CiAgZXZlbnQgTWFudWFsQ2hhbmdlRW5kRGF0ZSh1aW50IGJlZm9yZURhdGUsIHVpbnQgYWZ0ZXJEYXRlKTsKICBldmVudCBNYW51YWxDaGFuZ2VVbmhvbGREYXRlKHVpbnQgYmVmb3JlRGF0ZSwgdWludCBhZnRlckRhdGUpOwogIGV2ZW50IFRva2Vuc1RyYW5zZmVyZWRUb0hvbGQoYWRkcmVzcyBob2xkLCB1aW50IGFtb3VudCk7CiAgZXZlbnQgQWRkZWRUb0hvbGRlcihhZGRyZXNzIHNlbmRlciwgdWludCB0b2tlbkFtb3VudCwgdWludCBob2xkVGltZXN0YW1wKTsKICBldmVudCBDaGFuZ2VNaW5BbW91bnQodWludCBvbGRNaW5BbW91bnQsIHVpbnQgbWluQW1vdW50KTsKCiAgbWFwcGluZyAodWludCA9PiBhZGRyZXNzKSBwcml2YXRlIGFzc2V0T3duZXJzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHJpdmF0ZSBhc3NldE93bmVyc0luZGV4OwogIHVpbnQgcHJpdmF0ZSBhc3NldE93bmVyc0luZGV4ZXM7CgogIG1vZGlmaWVyIG9ubHlBc3NldHNPd25lcnMoKSB7CiAgICByZXF1aXJlKGFzc2V0T3duZXJzSW5kZXhbbXNnLnNlbmRlcl0gPiAwKTsKICAgIF87CiAgfQoKICAvKiBjb25zdHJ1Y3RvciAqLwogIGZ1bmN0aW9uIFRva2VuU2FsZShhZGRyZXNzIHRva2VuQWRkcmVzcywgYWRkcmVzcyB3YWxsZXRBZGRyZXNzLCB1aW50IGVuZCwgdWludCBlbmRIb2xkRGF0ZSwgYWRkcmVzcyBob2xkQ29udCkgcHVibGljIHsKICAgIHRva2VuID0gT3Bwb3J0eVRva2VuKHRva2VuQWRkcmVzcyk7CiAgICBzdGF0ZSA9IFNhbGVTdGF0ZS5ORVc7CgogICAgZW5kRGF0ZSAgICAgPSBlbmQ7CiAgICB1bmhvbGREYXRlICA9IGVuZEhvbGREYXRlOwogICAgcHJpY2UgICAgICAgPSAwLjAwMDIgKiAxIGV0aGVyOwogICAgd2FsbGV0ICAgICAgPSB3YWxsZXRBZGRyZXNzOwogICAgbWluaW1hbENvbnRyaWJ1dGlvbiA9IDAuMSAqIDEgZXRoZXI7CiAgICBib251cyA9IDA7CgogICAgaG9sZENvbnRyYWN0ID0gSG9sZFNhbGVDb250cmFjdChob2xkQ29udCk7CiAgICBhZGRBc3NldHNPd25lcihtc2cuc2VuZGVyKTsKICB9CgogIGZ1bmN0aW9uKCkgd2hlbk5vdFBhdXNlZCBwdWJsaWMgcGF5YWJsZSB7CiAgICByZXF1aXJlKHN0YXRlID09IFNhbGVTdGF0ZS5TQUxFKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IG1pbmltYWxDb250cmlidXRpb24pOwoKICAgIGlmIChub3cgPiBlbmREYXRlKSB7CiAgICAgIHN0YXRlID0gU2FsZVN0YXRlLkVOREVEOwogICAgICBTYWxlRW5kZWQoYmxvY2subnVtYmVyKTsKICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgICByZXR1cm4gOwogICAgfQoKICAgIGV0aFJhaXNlZCArPSBtc2cudmFsdWU7CgogICAgdWludCB0b2tlbkFtb3VudCAgPSBtc2cudmFsdWUuZGl2KHByaWNlKTsKICAgIHRva2VuQW1vdW50ICs9IHRva2VuQW1vdW50Lm11bChib251cykuZGl2KDEwMCk7CiAgICB0b2tlbkFtb3VudCAqPSAxIGV0aGVyOwoKICAgIHRva2VuUmFpc2VkICs9IHRva2VuQW1vdW50OwoKICAgIGhvbGRDb250cmFjdC5hZGRIb2xkZXIobXNnLnNlbmRlciwgdG9rZW5BbW91bnQsIHVuaG9sZERhdGUpOwogICAgQWRkZWRUb0hvbGRlcihtc2cuc2VuZGVyLCB0b2tlbkFtb3VudCwgdW5ob2xkRGF0ZSk7CiAgICBGdW5kVHJhbnNmZXJlZChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwoKICAgIC8vIGZvcndhcmQgdGhlIGZ1bmRzIHRvIHRoZSB3YWxsZXQKICAgIGZvcndhcmRGdW5kcygpOwogIH0KCiAgLyoqCiAgICAgKiBzZW5kIGV0aGVyIHRvIHRoZSBmdW5kIGNvbGxlY3Rpb24gd2FsbGV0CiAgICAgKiBvdmVycmlkZSB0byBjcmVhdGUgY3VzdG9tIGZ1bmQgZm9yd2FyZGluZyBtZWNoYW5pc21zCiAgICAgKi8KICBmdW5jdGlvbiBmb3J3YXJkRnVuZHMoKSBpbnRlcm5hbCB7CiAgICB3YWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGdldEJhbGFuY2VDb250cmFjdCgpIHZpZXcgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICB9CgogIGZ1bmN0aW9uIHN0YXJ0U2FsZSgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShzdGF0ZSA9PSBTYWxlU3RhdGUuTkVXKTsKICAgIHN0YXRlID0gU2FsZVN0YXRlLlNBTEU7CiAgICBTYWxlU3RhcnRlZChibG9jay5udW1iZXIpOwogIH0KICBmdW5jdGlvbiBlbmRTYWxlKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKHN0YXRlID09IFNhbGVTdGF0ZS5TQUxFKTsKICAgIHN0YXRlID0gU2FsZVN0YXRlLkVOREVEOwogICAgU2FsZUVuZGVkKGJsb2NrLm51bWJlcik7CiAgfQoKICBmdW5jdGlvbiBzZW5kVG9rZW5zVG9Ib2xkKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKHN0YXRlID09IFNhbGVTdGF0ZS5FTkRFRCk7CgogICAgcmVxdWlyZShnZXRCYWxhbmNlQ29udHJhY3QoKSA+PSB0b2tlblJhaXNlZCk7CgogICAgaWYgKHRva2VuLnRyYW5zZmVyKGhvbGRDb250cmFjdCwgdG9rZW5SYWlzZWQgKSkgewogICAgICB0b2tlbnNUcmFuc2ZlcnJlZFRvSG9sZCA9IHRydWU7CiAgICAgIFRva2Vuc1RyYW5zZmVyZWRUb0hvbGQoaG9sZENvbnRyYWN0LCB0b2tlblJhaXNlZCApOwogICAgfQogIH0KICBmdW5jdGlvbiBnZXRUb2tlbnNCYWNrKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKHN0YXRlID09IFNhbGVTdGF0ZS5FTkRFRCk7CiAgICByZXF1aXJlKHRva2Vuc1RyYW5zZmVycmVkVG9Ib2xkID09IHRydWUpOwogICAgdWludCBiYWxhbmNlOwogICAgYmFsYW5jZSA9IGdldEJhbGFuY2VDb250cmFjdCgpIDsKICAgIHRva2VuLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGJhbGFuY2UpOwogIH0KICBmdW5jdGlvbiB3aXRoZHJhd0V0aCgpIHB1YmxpYyB7CiAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSAhPSAwKTsKICAgIHJlcXVpcmUoc3RhdGUgPT0gU2FsZVN0YXRlLkVOREVEKTsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB3YWxsZXQpOwogICAgcmVxdWlyZSh0b2tlbnNUcmFuc2ZlcnJlZFRvSG9sZCA9PSB0cnVlKTsKICAgIHVpbnQgYmFsID0gdGhpcy5iYWxhbmNlOwogICAgd2FsbGV0LnRyYW5zZmVyKGJhbCk7CiAgICBXaXRoZHJhd2VkRXRoVG9XYWxsZXQoYmFsKTsKICB9CgogIGZ1bmN0aW9uIHNldFVuaG9sZERhdGUodWludCBkYXRlKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUoc3RhdGUgPT0gU2FsZVN0YXRlLk5FVyB8fCBzdGF0ZSA9PSBTYWxlU3RhdGUuU0FMRSk7CiAgICB1aW50IG9sZEVuZERhdGUgPSB1bmhvbGREYXRlOwogICAgdW5ob2xkRGF0ZSA9IGRhdGU7CiAgICBNYW51YWxDaGFuZ2VVbmhvbGREYXRlKG9sZEVuZERhdGUsIGRhdGUpOwogIH0KICBmdW5jdGlvbiBzZXRFbmREYXRlKHVpbnQgZGF0ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKHN0YXRlID09IFNhbGVTdGF0ZS5ORVcgfHwgc3RhdGUgPT0gU2FsZVN0YXRlLlNBTEUpOwogICAgcmVxdWlyZShkYXRlID4gbm93KTsKICAgIHVpbnQgb2xkRW5kRGF0ZSA9IGVuZERhdGU7CiAgICBlbmREYXRlID0gZGF0ZTsKICAgIE1hbnVhbENoYW5nZUVuZERhdGUob2xkRW5kRGF0ZSwgZGF0ZSk7CiAgfQogIGZ1bmN0aW9uIHNldE1pbmltYWxDb250cmlidXRpb24odWludCBtaW5pbXVtQW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgIHVpbnQgb2xkTWluQW1vdW50ID0gbWluaW1hbENvbnRyaWJ1dGlvbjsKICAgIG1pbmltYWxDb250cmlidXRpb24gPSBtaW5pbXVtQW1vdW50OwogICAgQ2hhbmdlTWluQW1vdW50KG9sZE1pbkFtb3VudCwgbWluaW1hbENvbnRyaWJ1dGlvbik7CiAgfQogIGZ1bmN0aW9uIHNldEJvbnVzKHVpbnQ4IG5ld0JvbnVzKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3Qm9udXMgPj0gMCk7CiAgICBib251cyA9IG5ld0JvbnVzOwogIH0KCiAgZnVuY3Rpb24gYWRkQXNzZXRzT3duZXIoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgYXNzZXRPd25lcnNJbmRleGVzKys7CiAgICBhc3NldE93bmVyc1thc3NldE93bmVyc0luZGV4ZXNdID0gX293bmVyOwogICAgYXNzZXRPd25lcnNJbmRleFtfb3duZXJdID0gYXNzZXRPd25lcnNJbmRleGVzOwogIH0KICBmdW5jdGlvbiByZW1vdmVBc3NldHNPd25lcihhZGRyZXNzIF9vd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICB1aW50IGluZGV4ID0gYXNzZXRPd25lcnNJbmRleFtfb3duZXJdOwogICAgZGVsZXRlIGFzc2V0T3duZXJzSW5kZXhbX293bmVyXTsKICAgIGRlbGV0ZSBhc3NldE93bmVyc1tpbmRleF07CiAgICBhc3NldE93bmVyc0luZGV4ZXMtLTsKICB9CiAgZnVuY3Rpb24gZ2V0QXNzZXRzT3duZXJzKHVpbnQgX2luZGV4KSBvbmx5T3duZXIgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsKICAgIHJldHVybiBhc3NldE93bmVyc1tfaW5kZXhdOwogIH0KCiAgZnVuY3Rpb24gZ2V0VG9rZW5CYWxhbmNlKCkgb25seUFzc2V0c093bmVycyBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICB9CiAgZnVuY3Rpb24gZ2V0RXRoUmFpc2VkKCkgb25seUFzc2V0c093bmVycyBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIGV0aFJhaXNlZDsKICB9CiAgZnVuY3Rpb24gZ2V0Qm9udXMoKSBvbmx5QXNzZXRzT3duZXJzIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gYm9udXM7CiAgfQogIGZ1bmN0aW9uIGdldFRva2VuUmFpc2VkKCkgb25seUFzc2V0c093bmVycyBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIHRva2VuUmFpc2VkOwogIH0KfQ=='.
	

]
