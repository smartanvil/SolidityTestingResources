Class {
	#name : #SRT9e1a813ee8ac44d581b241605d7d9eb99af89f09,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9e1a813ee8ac44d581b241605d7d9eb99af89f09 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7Cgpjb250cmFjdCBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludCBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhICYmIGMgPj0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cgp9Cgpjb250cmFjdCBFUkMyMEludGVyZmFjZSB7CiAgICAvLyBHZXQgdGhlIHRvdGFsIHRva2VuIHN1cHBseQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSk7CgogICAgLy8gR2V0IHRoZSBhY2NvdW50IGJhbGFuY2Ugb2YgYW5vdGhlciBhY2NvdW50IHdpdGggYWRkcmVzcyBfb3duZXIKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgogICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyB0byBhZGRyZXNzIF90bwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8gQWxsb3cgX3NwZW5kZXIgdG8gd2l0aGRyYXcgZnJvbSB5b3VyIGFjY291bnQsIG11bHRpcGxlIHRpbWVzLCB1cCB0byB0aGUgX3ZhbHVlIGFtb3VudC4KICAgIC8vIElmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGFnYWluIGl0IG92ZXJ3cml0ZXMgdGhlIGN1cnJlbnQgYWxsb3dhbmNlIHdpdGggX3ZhbHVlLgogICAgLy8gdGhpcyBmdW5jdGlvbiBpcyByZXF1aXJlZCBmb3Igc29tZSBERVggZnVuY3Rpb25hbGl0eQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8gUmV0dXJucyB0aGUgYW1vdW50IHdoaWNoIF9zcGVuZGVyIGlzIHN0aWxsIGFsbG93ZWQgdG8gd2l0aGRyYXcgZnJvbSBfb3duZXIKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICAvLyBUcmlnZ2VyZWQgd2hlbiB0b2tlbnMgYXJlIHRyYW5zZmVycmVkLgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CgogICAgLy8gVHJpZ2dlcmVkIHdoZW5ldmVyIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIGlzIGNhbGxlZC4KICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9CgoKY29udHJhY3QgR0JUIGlzIEVSQzIwSW50ZXJmYWNlIHsKICAgIHVpbnQyNTYgcHVibGljIGV4cGlyYXRpb25CbG9jazsKICAgIGZ1bmN0aW9uIGlzQWN0aXZlKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBhY3RpdmF0ZWQpOwp9CgoKY29udHJhY3QgR0JJVCBpcyBTYWZlTWF0aCB7CiAgICBhZGRyZXNzIHB1YmxpYyBhZG1pbiA9IDB4Yjc3MjcyNWMwZTQ1M2FGNGM5M2ZjRDAwQTRjRjAwNUM3Mzg4OTEyNjsgLy90aGUgYWRtaW4gYWRkcmVzcwogICAgYWRkcmVzcyBwdWJsaWMgZmVlQWNjb3VudCA9IDB4ZTA0RjMyMGJDYzBlODc5NmUyZTYwOTJCMzc5NkM3MjJhMTIyMEJmNTsgLy90aGUgYWNjb3VudCB0aGF0IHdpbGwgcmVjZWl2ZSBmZWVzCiAgICBhZGRyZXNzIHB1YmxpYyBnYnRBZGRyZXNzID0gMHhlMDRGMzIwYkNjMGU4Nzk2ZTJlNjA5MkIzNzk2QzcyMmExMjIwQmY1OwoKICAgIHVpbnQyNTYgcHVibGljIG1ha2VGZWUgPSAwOyAvL3BlcmNlbnRhZ2UgdGltZXMgKDEgZXRoZXIpCiAgICB1aW50MjU2IHB1YmxpYyB0YWtlRmVlID0gMTsgLy9wZXJjZW50YWdlIHRpbWVzICgxIGV0aGVyKQogICAgdWludDI1NiBwdWJsaWMgbGFzdEZyZWVCbG9jayA9IDUwMDAwMDAwMDsKCiAgICBtYXBwaW5nIChieXRlczMyID0+IHVpbnQyNTYpIHB1YmxpYyBzZWxsT3JkZXJCYWxhbmNlczsgLy9hIGhhc2ggb2YgYXZhaWxhYmxlIG9yZGVyIGJhbGFuY2VzIGhvbGRzIGEgbnVtYmVyIG9mIHRva2VucwogICAgbWFwcGluZyAoYnl0ZXMzMiA9PiB1aW50MjU2KSBwdWJsaWMgYnV5T3JkZXJCYWxhbmNlczsgLy9hIGhhc2ggb2YgYXZhaWxhYmxlIG9yZGVyIGJhbGFuY2VzLiBob2xkcyBhIG51bWJlciBvZiBldGgKCiAgICBldmVudCBNYWtlQnV5T3JkZXIoYnl0ZXMzMiBvcmRlckhhc2gsIGFkZHJlc3MgaW5kZXhlZCB0b2tlbiwgdWludDI1NiB0b2tlbkFtb3VudCwgdWludDI1NiB3ZWlBbW91bnQsIGFkZHJlc3MgaW5kZXhlZCBidXllcik7CgogICAgZXZlbnQgTWFrZVNlbGxPcmRlcihieXRlczMyIG9yZGVySGFzaCwgYWRkcmVzcyBpbmRleGVkIHRva2VuLCB1aW50MjU2IHRva2VuQW1vdW50LCB1aW50MjU2IHdlaUFtb3VudCwgYWRkcmVzcyBpbmRleGVkIHNlbGxlcik7CgogICAgZXZlbnQgQ2FuY2VsQnV5T3JkZXIoYnl0ZXMzMiBvcmRlckhhc2gsIGFkZHJlc3MgaW5kZXhlZCB0b2tlbiwgdWludDI1NiB0b2tlbkFtb3VudCwgdWludDI1NiB3ZWlBbW91bnQsIGFkZHJlc3MgaW5kZXhlZCBidXllcik7CgogICAgZXZlbnQgQ2FuY2VsU2VsbE9yZGVyKGJ5dGVzMzIgb3JkZXJIYXNoLCBhZGRyZXNzIGluZGV4ZWQgdG9rZW4sIHVpbnQyNTYgdG9rZW5BbW91bnQsIHVpbnQyNTYgd2VpQW1vdW50LCBhZGRyZXNzIGluZGV4ZWQgc2VsbGVyKTsKCiAgICBldmVudCBUYWtlQnV5T3JkZXIoYnl0ZXMzMiBvcmRlckhhc2gsIGFkZHJlc3MgaW5kZXhlZCB0b2tlbiwgdWludDI1NiB0b2tlbkFtb3VudCwgdWludDI1NiB3ZWlBbW91bnQsIHVpbnQyNTYgdG90YWxUcmFuc2FjdGlvblRva2VucywgYWRkcmVzcyBpbmRleGVkIGJ1eWVyLCBhZGRyZXNzIGluZGV4ZWQgc2VsbGVyKTsKCiAgICBldmVudCBUYWtlU2VsbE9yZGVyKGJ5dGVzMzIgb3JkZXJIYXNoLCBhZGRyZXNzIGluZGV4ZWQgdG9rZW4sIHVpbnQyNTYgdG9rZW5BbW91bnQsIHVpbnQyNTYgd2VpQW1vdW50LCB1aW50MjU2IHRvdGFsVHJhbnNhY3Rpb25XZWksIGFkZHJlc3MgaW5kZXhlZCBidXllciwgYWRkcmVzcyBpbmRleGVkIHNlbGxlcik7CgogICAgZnVuY3Rpb24oKSBwdWJsaWMgewogICAgICAgIHJldmVydCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUFkbWluKGFkZHJlc3MgYWRtaW5fKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhZG1pbik7CiAgICAgICAgYWRtaW4gPSBhZG1pbl87CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlR0JUQWRkcmVzcyhhZGRyZXNzIGdidEFkZHJlc3NfKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhZG1pbik7CiAgICAgICAgcmVxdWlyZShibG9jay5udW1iZXIgPiBHQlQoZ2J0QWRkcmVzcykuZXhwaXJhdGlvbkJsb2NrKCkpOwogICAgICAgIGdidEFkZHJlc3MgPSBnYnRBZGRyZXNzXzsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VMYXN0RnJlZUJsb2NrKHVpbnQyNTYgX2xhc3RGcmVlQmxvY2spIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluKTsKICAgICAgICByZXF1aXJlKF9sYXN0RnJlZUJsb2NrID4gYmxvY2subnVtYmVyICsgMTAwKTsgLy9hbm5vdW5jZSBhdCBsZWFzdCAxMDAgYmxvY2tzIGFoZWFkCiAgICAgICAgbGFzdEZyZWVCbG9jayA9IF9sYXN0RnJlZUJsb2NrOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUZlZUFjY291bnQoYWRkcmVzcyBmZWVBY2NvdW50XykgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRtaW4pOwogICAgICAgIGZlZUFjY291bnQgPSBmZWVBY2NvdW50XzsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VNYWtlRmVlKHVpbnQyNTYgbWFrZUZlZV8pIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluKTsKICAgICAgICByZXF1aXJlKG1ha2VGZWVfIDwgbWFrZUZlZSk7CiAgICAgICAgbWFrZUZlZSA9IG1ha2VGZWVfOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVRha2VGZWUodWludDI1NiB0YWtlRmVlXykgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRtaW4pOwogICAgICAgIHJlcXVpcmUodGFrZUZlZV8gPCB0YWtlRmVlKTsKICAgICAgICB0YWtlRmVlID0gdGFrZUZlZV87CiAgICB9CgogICAgZnVuY3Rpb24gZmVlRnJvbVRvdGFsQ29zdEZvckFjY291bnQodWludDI1NiB0b3RhbENvc3QsIHVpbnQyNTYgZmVlQW1vdW50LCBhZGRyZXNzIGFjY291bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGZlZUZyb21Ub3RhbENvc3QodG90YWxDb3N0LCBmZWVBbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZlZUZyb21Ub3RhbENvc3QodWludDI1NiB0b3RhbENvc3QsIHVpbnQyNTYgZmVlQW1vdW50KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewoKICAgICAgICB1aW50MjU2IGNvc3QgPSBzYWZlTXVsKHRvdGFsQ29zdCwgKDEgZXRoZXIpKSAvIHNhZmVBZGQoKDEgZXRoZXIpLCBmZWVBbW91bnQpOwoKICAgICAgICAvLyBDYWxjdWxhdGUgY2VpbChjb3N0KS4KICAgICAgICB1aW50MjU2IHJlbWFpbmRlciA9IHNhZmVNdWwodG90YWxDb3N0LCAoMSBldGhlcikpICUgc2FmZUFkZCgoMSBldGhlciksIGZlZUFtb3VudCk7CiAgICAgICAgaWYgKHJlbWFpbmRlciAhPSAwKSB7CiAgICAgICAgICAgIGNvc3QgPSBzYWZlQWRkKGNvc3QsIDEpOwogICAgICAgIH0KCiAgICAgICAgdWludDI1NiBmZWUgPSBzYWZlU3ViKHRvdGFsQ29zdCwgY29zdCk7CiAgICAgICAgcmV0dXJuIGZlZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVGZWVGb3JBY2NvdW50KHVpbnQyNTYgY29zdCwgdWludDI1NiBmZWVBbW91bnQsIGFkZHJlc3MgYWNjb3VudCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gY2FsY3VsYXRlRmVlKGNvc3QsIGZlZUFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlRmVlKHVpbnQyNTYgY29zdCwgdWludDI1NiBmZWVBbW91bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBmZWUgPSBzYWZlTXVsKGNvc3QsIGZlZUFtb3VudCkgLyAoMSBldGhlcik7CiAgICAgICAgcmV0dXJuIGZlZTsKICAgIH0KCiAgICAvLyBNYWtlcyBhbiBvZmZlciB0byB0cmFkZSB0b2tlbkFtb3VudCBvZiBFUkMyMCB0b2tlbiwgdG9rZW4sIGZvciB3ZWlBbW91bnQgb2Ygd2VpLgogICAgZnVuY3Rpb24gbWFrZVNlbGxPcmRlcihhZGRyZXNzIHRva2VuLCB1aW50MjU2IHRva2VuQW1vdW50LCB1aW50MjU2IHdlaUFtb3VudCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKHRva2VuQW1vdW50ICE9IDApOwogICAgICAgIHJlcXVpcmUod2VpQW1vdW50ICE9IDApOwoKICAgICAgICBieXRlczMyIGggPSBzaGEyNTYodG9rZW4sIHRva2VuQW1vdW50LCB3ZWlBbW91bnQsIG1zZy5zZW5kZXIpOwoKCiAgICAgICAgLy8gVXBkYXRlIGJhbGFuY2UuCiAgICAgICAgc2VsbE9yZGVyQmFsYW5jZXNbaF0gPSBzYWZlQWRkKHNlbGxPcmRlckJhbGFuY2VzW2hdLCB0b2tlbkFtb3VudCk7CgogICAgICAgIC8vIENoZWNrIGFsbG93YW5jZS4gIC0tIERvbmUgYWZ0ZXIgdXBkYXRpbmcgYmFsYW5jZSBiYyBpdCBtYWtlcyBhIGNhbGwgdG8gYW4gdW50cnVzdGVkIGNvbnRyYWN0LgogICAgICAgIHJlcXVpcmUodG9rZW5BbW91bnQgPD0gRVJDMjBJbnRlcmZhY2UodG9rZW4pLmFsbG93YW5jZShtc2cuc2VuZGVyLCB0aGlzKSk7CgogICAgICAgIC8vIEdyYWIgdGhlIHRva2VuLgogICAgICAgIGlmICghRVJDMjBJbnRlcmZhY2UodG9rZW4pLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCB0aGlzLCB0b2tlbkFtb3VudCkpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQoKCiAgICAgICAgTWFrZVNlbGxPcmRlcihoLCB0b2tlbiwgdG9rZW5BbW91bnQsIHdlaUFtb3VudCwgbXNnLnNlbmRlcik7CiAgICB9CgogICAgLy8gTWFrZXMgYW4gb2ZmZXIgdG8gdHJhZGUgbXNnLnZhbHVlIHdlaSBmb3IgdG9rZW5BbW91bnQgb2YgdG9rZW4gKGFuIEVSQzIwIHRva2VuKS4KICAgIGZ1bmN0aW9uIG1ha2VCdXlPcmRlcihhZGRyZXNzIHRva2VuLCB1aW50MjU2IHRva2VuQW1vdW50KSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSh0b2tlbkFtb3VudCAhPSAwKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSAhPSAwKTsKCiAgICAgICAgdWludDI1NiBmZWUgPSBmZWVGcm9tVG90YWxDb3N0KG1zZy52YWx1ZSwgbWFrZUZlZSk7CiAgICAgICAgdWludDI1NiB2YWx1ZU5vRmVlID0gc2FmZVN1Yihtc2cudmFsdWUsIGZlZSk7CiAgICAgICAgYnl0ZXMzMiBoID0gc2hhMjU2KHRva2VuLCB0b2tlbkFtb3VudCwgdmFsdWVOb0ZlZSwgbXNnLnNlbmRlcik7CgogICAgICAgIC8vcHV0IGV0aGVyIGluIHRoZSBidXlPcmRlckJhbGFuY2VzIG1hcAogICAgICAgIGJ1eU9yZGVyQmFsYW5jZXNbaF0gPSBzYWZlQWRkKGJ1eU9yZGVyQmFsYW5jZXNbaF0sIG1zZy52YWx1ZSk7CgogICAgICAgIC8vIE5vdGlmeSBhbGwgY2xpZW50cy4KICAgICAgICBNYWtlQnV5T3JkZXIoaCwgdG9rZW4sIHRva2VuQW1vdW50LCB2YWx1ZU5vRmVlLCBtc2cuc2VuZGVyKTsKICAgIH0KCgogICAgLy8gQ2FuY2VscyBhbGwgcHJldmlvdXMgb2ZmZXJzIGJ5IG1zZy5zZW5kZXIgdG8gdHJhZGUgdG9rZW5BbW91bnQgb2YgdG9rZW5zIGZvciB3ZWlBbW91bnQgb2Ygd2VpLgogICAgZnVuY3Rpb24gY2FuY2VsQWxsU2VsbE9yZGVycyhhZGRyZXNzIHRva2VuLCB1aW50MjU2IHRva2VuQW1vdW50LCB1aW50MjU2IHdlaUFtb3VudCkgcHVibGljIHsKICAgICAgICBieXRlczMyIGggPSBzaGEyNTYodG9rZW4sIHRva2VuQW1vdW50LCB3ZWlBbW91bnQsIG1zZy5zZW5kZXIpOwogICAgICAgIHVpbnQyNTYgcmVtYWluID0gc2VsbE9yZGVyQmFsYW5jZXNbaF07CiAgICAgICAgZGVsZXRlIHNlbGxPcmRlckJhbGFuY2VzW2hdOwoKICAgICAgICBFUkMyMEludGVyZmFjZSh0b2tlbikudHJhbnNmZXIobXNnLnNlbmRlciwgcmVtYWluKTsKCiAgICAgICAgQ2FuY2VsU2VsbE9yZGVyKGgsIHRva2VuLCB0b2tlbkFtb3VudCwgd2VpQW1vdW50LCBtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvLyBDYW5jZWxzIGFueSBwcmV2aW91cyBvZmZlcnMgdG8gdHJhZGUgd2VpQW1vdW50IG9mIHdlaSBmb3IgdG9rZW5BbW91bnQgb2YgdG9rZW5zLiBSZWZ1bmRzIHRoZSB3ZWkgdG8gc2VuZGVyLgogICAgZnVuY3Rpb24gY2FuY2VsQWxsQnV5T3JkZXJzKGFkZHJlc3MgdG9rZW4sIHVpbnQyNTYgdG9rZW5BbW91bnQsIHVpbnQyNTYgd2VpQW1vdW50KSBwdWJsaWMgewogICAgICAgIGJ5dGVzMzIgaCA9IHNoYTI1Nih0b2tlbiwgdG9rZW5BbW91bnQsIHdlaUFtb3VudCwgbXNnLnNlbmRlcik7CiAgICAgICAgdWludDI1NiByZW1haW4gPSBidXlPcmRlckJhbGFuY2VzW2hdOwogICAgICAgIGRlbGV0ZSBidXlPcmRlckJhbGFuY2VzW2hdOwoKICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChyZW1haW4pKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KCiAgICAgICAgQ2FuY2VsQnV5T3JkZXIoaCwgdG9rZW4sIHRva2VuQW1vdW50LCB3ZWlBbW91bnQsIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vIFRha2Ugc29tZSAob3IgYWxsKSBvZiB0aGUgZXRoZXIgKG1pbnVzIGZlZXMpIGluIHRoZSBidXlPcmRlckJhbGFuY2VzIGhhc2ggaW4gZXhjaGFuZ2UgZm9yIHRvdGFsVG9rZW5zIHRva2Vucy4KICAgIGZ1bmN0aW9uIHRha2VCdXlPcmRlcihhZGRyZXNzIHRva2VuLCB1aW50MjU2IHRva2VuQW1vdW50LCB1aW50MjU2IHdlaUFtb3VudCwgdWludDI1NiB0b3RhbFRva2VucywgYWRkcmVzcyBidXllcikgcHVibGljIHsKICAgICAgICByZXF1aXJlKHRva2VuQW1vdW50ICE9IDApOwogICAgICAgIHJlcXVpcmUod2VpQW1vdW50ICE9IDApOwogICAgICAgIHJlcXVpcmUodG90YWxUb2tlbnMgIT0gMCk7CgogICAgICAgIGJ5dGVzMzIgaCA9IHNoYTI1Nih0b2tlbiwgdG9rZW5BbW91bnQsIHdlaUFtb3VudCwgYnV5ZXIpOwoKICAgICAgICAvLyBIb3cgbWFueSB3ZWkgZm9yIHRoZSBhbW91bnQgb2YgdG9rZW5zIGJlaW5nIHNvbGQ/CiAgICAgICAgdWludDI1NiB0cmFuc2FjdGlvbldlaUFtb3VudE5vRmVlID0gc2FmZU11bCh0b3RhbFRva2Vucywgd2VpQW1vdW50KSAvIHRva2VuQW1vdW50OwoKICAgICAgICAvLyBEb2VzIHRoZSBidXllciAobWFrZXIpIGhhdmUgZW5vdWdoIG1vbmV5IGluIHRoZSBjb250cmFjdD8KICAgICAgICB1aW50MjU2IHVudmVzdGVkTWFrZUZlZSA9IGNhbGN1bGF0ZUZlZSh0cmFuc2FjdGlvbldlaUFtb3VudE5vRmVlLCBtYWtlRmVlKTsKICAgICAgICB1aW50MjU2IHRvdGFsVHJhbnNhY3Rpb25XZWlBbW91bnQgPSBzYWZlQWRkKHRyYW5zYWN0aW9uV2VpQW1vdW50Tm9GZWUsIHVudmVzdGVkTWFrZUZlZSk7CiAgICAgICAgcmVxdWlyZShidXlPcmRlckJhbGFuY2VzW2hdID49IHRvdGFsVHJhbnNhY3Rpb25XZWlBbW91bnQpOwoKCiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBhY3R1YWwgdmVzdGVkIGZlZXMuCiAgICAgICAgdWludDI1NiBjdXJyZW50VGFrZUZlZSA9IGNhbGN1bGF0ZUZlZUZvckFjY291bnQodHJhbnNhY3Rpb25XZWlBbW91bnROb0ZlZSwgdGFrZUZlZSwgbXNnLnNlbmRlcik7CiAgICAgICAgdWludDI1NiBjdXJyZW50TWFrZUZlZSA9IGNhbGN1bGF0ZUZlZUZvckFjY291bnQodHJhbnNhY3Rpb25XZWlBbW91bnROb0ZlZSwgbWFrZUZlZSwgYnV5ZXIpOwoKICAgICAgICAvLyBQcm9jZWVkIHdpdGggdHJhbnNmZXJyaW5nIGJhbGFuY2VzLgoKICAgICAgICAvLyBVcGRhdGUgb3VyIGludGVybmFsIGFjY291bnRpbmcuCiAgICAgICAgYnV5T3JkZXJCYWxhbmNlc1toXSA9IHNhZmVTdWIoYnV5T3JkZXJCYWxhbmNlc1toXSwgdG90YWxUcmFuc2FjdGlvbldlaUFtb3VudCk7CgoKICAgICAgICAvLyBEaWQgdGhlIHNlbGxlciBzZW5kIGVub3VnaCB0b2tlbnM/ICAtLSBUaGlzIGNoZWNrIGlzIGhlcmUgYmMgaXQgY2FsbHMgdG8gYW4gdW50cnVzdGVkIGNvbnRyYWN0LgogICAgICAgIHJlcXVpcmUoRVJDMjBJbnRlcmZhY2UodG9rZW4pLmFsbG93YW5jZShtc2cuc2VuZGVyLCB0aGlzKSA+PSB0b3RhbFRva2Vucyk7CgogICAgICAgIC8vIFNlbmQgYnV5ZXIgdGhlaXIgdG9rZW5zIGFuZCBhbnkgZmVlIHJlZnVuZC4KICAgICAgICBpZiAoY3VycmVudE1ha2VGZWUgPCB1bnZlc3RlZE1ha2VGZWUpIHsvLyB0aGUgYnV5ZXIgZ290IGEgZmVlIGRpc2NvdW50LiBTZW5kIHRoZSByZWZ1bmQuCiAgICAgICAgICAgIHVpbnQyNTYgcmVmdW5kQW1vdW50ID0gc2FmZVN1Yih1bnZlc3RlZE1ha2VGZWUsIGN1cnJlbnRNYWtlRmVlKTsKICAgICAgICAgICAgaWYgKCFidXllci5zZW5kKHJlZnVuZEFtb3VudCkpIHsKICAgICAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghRVJDMjBJbnRlcmZhY2UodG9rZW4pLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBidXllciwgdG90YWxUb2tlbnMpKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KCiAgICAgICAgLy8gR3JhYiBvdXIgZmVlLgogICAgICAgIGlmIChzYWZlQWRkKGN1cnJlbnRUYWtlRmVlLCBjdXJyZW50TWFrZUZlZSkgPiAwKSB7CiAgICAgICAgICAgIGlmICghZmVlQWNjb3VudC5zZW5kKHNhZmVBZGQoY3VycmVudFRha2VGZWUsIGN1cnJlbnRNYWtlRmVlKSkpIHsKICAgICAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBTZW5kIHNlbGxlciB0aGUgcHJvY2VlZHMuCiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoc2FmZVN1Yih0cmFuc2FjdGlvbldlaUFtb3VudE5vRmVlLCBjdXJyZW50VGFrZUZlZSkpKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KCiAgICAgICAgVGFrZUJ1eU9yZGVyKGgsIHRva2VuLCB0b2tlbkFtb3VudCwgd2VpQW1vdW50LCB0b3RhbFRva2VucywgYnV5ZXIsIG1zZy5zZW5kZXIpOwogICAgfQoKCiAgICBmdW5jdGlvbiB0YWtlU2VsbE9yZGVyKGFkZHJlc3MgdG9rZW4sIHVpbnQyNTYgdG9rZW5BbW91bnQsIHVpbnQyNTYgd2VpQW1vdW50LCBhZGRyZXNzIHNlbGxlcikgcHVibGljIHBheWFibGUgewoKICAgICAgICByZXF1aXJlKHRva2VuQW1vdW50ICE9IDApOwogICAgICAgIHJlcXVpcmUod2VpQW1vdW50ICE9IDApOwoKICAgICAgICBieXRlczMyIGggPSBzaGEyNTYodG9rZW4sIHRva2VuQW1vdW50LCB3ZWlBbW91bnQsIHNlbGxlcik7CgogICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIGNvbnRyYWN0IGhhcyBlbm91Z2ggdG9rZW4gdG8gc2F0aXNmeSB0aGlzIG9yZGVyLgogICAgICAgIHVpbnQyNTYgY3VycmVudFRha2VGZWUgPSBmZWVGcm9tVG90YWxDb3N0Rm9yQWNjb3VudChtc2cudmFsdWUsIHRha2VGZWUsIG1zZy5zZW5kZXIpOwogICAgICAgIHVpbnQyNTYgdHJhbnNhY3Rpb25XZWlBbW91bnROb0ZlZSA9IHNhZmVTdWIobXNnLnZhbHVlLCBjdXJyZW50VGFrZUZlZSk7CiAgICAgICAgdWludDI1NiB0b3RhbFRva2VucyA9IHNhZmVNdWwodHJhbnNhY3Rpb25XZWlBbW91bnROb0ZlZSwgdG9rZW5BbW91bnQpIC8gd2VpQW1vdW50OwogICAgICAgIHJlcXVpcmUoc2VsbE9yZGVyQmFsYW5jZXNbaF0gPj0gdG90YWxUb2tlbnMpOwoKICAgICAgICAvLyBDYWxjdWxhdGUgdG90YWwgdmVzdGVkIGZlZS4KICAgICAgICB1aW50MjU2IGN1cnJlbnRNYWtlRmVlID0gY2FsY3VsYXRlRmVlRm9yQWNjb3VudCh0cmFuc2FjdGlvbldlaUFtb3VudE5vRmVlLCBtYWtlRmVlLCBzZWxsZXIpOwogICAgICAgIHVpbnQyNTYgdG90YWxGZWUgPSBzYWZlQWRkKGN1cnJlbnRNYWtlRmVlLCBjdXJyZW50VGFrZUZlZSk7CgogICAgICAgIHVpbnQyNTYgbWFrZXJQcm9jZWVkc0FmdGVyRmVlID0gc2FmZVN1Yih0cmFuc2FjdGlvbldlaUFtb3VudE5vRmVlLCBjdXJyZW50TWFrZUZlZSk7CgogICAgICAgIC8vIFRyYW5zZmVyLgoKICAgICAgICAvLyBVcGRhdGUgaW50ZXJuYWwgYWNjb3VudGluZy4KICAgICAgICBzZWxsT3JkZXJCYWxhbmNlc1toXSA9IHNhZmVTdWIoc2VsbE9yZGVyQmFsYW5jZXNbaF0sIHRvdGFsVG9rZW5zKTsKCiAgICAgICAgLy8gU2VuZCBidXllciB0aGUgdG9rZW5zLgogICAgICAgIGlmICghRVJDMjBJbnRlcmZhY2UodG9rZW4pLnRyYW5zZmVyKG1zZy5zZW5kZXIsIHRvdGFsVG9rZW5zKSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CgogICAgICAgIC8vIFRha2Ugb3VyIGZlZS4KICAgICAgICBpZiAodG90YWxGZWUgPiAwKSB7CiAgICAgICAgICAgIGlmICghZmVlQWNjb3VudC5zZW5kKHRvdGFsRmVlKSkgewogICAgICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIFNlbmQgc2VsbGVyIHRoZSBwcm9jZWVkcy4KICAgICAgICBpZiAoIXNlbGxlci5zZW5kKG1ha2VyUHJvY2VlZHNBZnRlckZlZSkpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQoKICAgICAgICBUYWtlU2VsbE9yZGVyKGgsIHRva2VuLCB0b2tlbkFtb3VudCwgd2VpQW1vdW50LCB0cmFuc2FjdGlvbldlaUFtb3VudE5vRmVlLCBtc2cuc2VuZGVyLCBzZWxsZXIpOwogICAgfQp9'.
	

]
