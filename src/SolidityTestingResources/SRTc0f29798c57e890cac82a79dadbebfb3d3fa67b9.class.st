Class {
	#name : #SRTc0f29798c57e890cac82a79dadbebfb3d3fa67b9,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc0f29798c57e890cac82a79dadbebfb3d3fa67b9 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKY29udHJhY3QgRmxpZ2h0RGVsYXlDb250cm9sbGVySW50ZXJmYWNlIHsKCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FkZHIpIHJldHVybnMgKGJvb2wgX2lzT3duZXIpOwoKICAgIGZ1bmN0aW9uIHNlbGZSZWdpc3RlcihieXRlczMyIF9pZCkgcmV0dXJucyAoYm9vbCByZXN1bHQpOwoKICAgIGZ1bmN0aW9uIGdldENvbnRyYWN0KGJ5dGVzMzIgX2lkKSByZXR1cm5zIChhZGRyZXNzIF9hZGRyKTsKfQoKY29udHJhY3QgRmxpZ2h0RGVsYXlEYXRhYmFzZU1vZGVsIHsKCiAgICAvLyBMZWRnZXIgYWNjb3VudHMuCiAgICBlbnVtIEFjYyB7CiAgICAgICAgUHJlbWl1bSwgICAgICAvLyAwCiAgICAgICAgUmlza0Z1bmQsICAgICAvLyAxCiAgICAgICAgUGF5b3V0LCAgICAgICAvLyAyCiAgICAgICAgQmFsYW5jZSwgICAgICAvLyAzCiAgICAgICAgUmV3YXJkLCAgICAgICAvLyA0CiAgICAgICAgT3JhY2xpemVDb3N0cyAvLyA1CiAgICB9CgogICAgLy8gcG9saWN5IFN0YXR1cyBDb2RlcyBhbmQgbWVhbmluZzoKICAgIC8vCiAgICAvLyAwMCA9IEFwcGxpZWQ6CSAgdGhlIGN1c3RvbWVyIGhhcyBwYXllZCBhIHByZW1pdW0sIGJ1dCB0aGUgb3JhY2xlIGhhcwogICAgLy8JCQkJCSAgICAgICAgbm90IHlldCBjaGVja2VkIGFuZCBjb25maXJtZWQuCiAgICAvLwkJCQkJICAgICAgICBUaGUgY3VzdG9tZXIgY2FuIHN0aWxsIHJldm9rZSB0aGUgcG9saWN5LgogICAgLy8gMDEgPSBBY2NlcHRlZDoJICB0aGUgb3JhY2xlIGhhcyBjaGVja2VkIGFuZCBjb25maXJtZWQuCiAgICAvLwkJCQkJICAgICAgICBUaGUgY3VzdG9tZXIgY2FuIHN0aWxsIHJldm9rZSB0aGUgcG9saWN5LgogICAgLy8gMDIgPSBSZXZva2VkOgkgIFRoZSBjdXN0b21lciBoYXMgcmV2b2tlZCB0aGUgcG9saWN5LgogICAgLy8JCQkJCSAgICAgICAgVGhlIHByZW1pdW0gbWludXMgY2FuY2VsbGF0aW9uIGZlZSBpcyBwYXllZCBiYWNrIHRvIHRoZQogICAgLy8JCQkJCSAgICAgICAgY3VzdG9tZXIgYnkgdGhlIG9yYWNsZS4KICAgIC8vIDAzID0gUGFpZE91dDoJICBUaGUgZmxpZ2h0IGhhcyBlbmRlZCB3aXRoIGRlbGF5LgogICAgLy8JCQkJCSAgICAgICAgVGhlIG9yYWNsZSBoYXMgY2hlY2tlZCBhbmQgcGF5ZWQgb3V0LgogICAgLy8gMDQgPSBFeHBpcmVkOgkgIFRoZSBmbGlnaHQgaGFzIGVuZGV0IHdpdGggPDE1bWluLiBkZWxheS4KICAgIC8vCQkJCQkgICAgICAgIE5vIHBheW91dC4KICAgIC8vIDA1ID0gRGVjbGluZWQ6CSAgVGhlIGFwcGxpY2F0aW9uIHdhcyBpbnZhbGlkLgogICAgLy8JCQkJCSAgICAgICAgVGhlIHByZW1pdW0gbWludXMgY2FuY2VsbGF0aW9uIGZlZSBpcyBwYXllZCBiYWNrIHRvIHRoZQogICAgLy8JCQkJCSAgICAgICAgY3VzdG9tZXIgYnkgdGhlIG9yYWNsZS4KICAgIC8vIDA2ID0gU2VuZEZhaWxlZDoJRHVyaW5nIFJldm9rZSwgRGVjbGluZSBvciBQYXlvdXQsIHNlbmRpbmcgZXRoZXIgZmFpbGVkCiAgICAvLwkJCQkJICAgICAgICBmb3IgdW5rbm93biByZWFzb25zLgogICAgLy8JCQkJCSAgICAgICAgVGhlIGZ1bmRzIHJlbWFpbiBpbiB0aGUgY29udHJhY3RzIFJpc2tGdW5kLgoKCiAgICAvLyAgICAgICAgICAgICAgICAgICAwMCAgICAgICAwMSAgICAgICAgMDIgICAgICAgMDMgICAgICAgIDA0ICAgICAgMDUgICAgICAgICAgIDA2CiAgICBlbnVtIHBvbGljeVN0YXRlIHsgQXBwbGllZCwgQWNjZXB0ZWQsIFJldm9rZWQsIFBhaWRPdXQsIEV4cGlyZWQsIERlY2xpbmVkLCBTZW5kRmFpbGVkIH0KCiAgICAvLyBvcmFjbGl6ZSBjYWxsYmFjayB0eXBlczoKICAgIGVudW0gb3JhY2xpemVTdGF0ZSB7IEZvclVuZGVyd3JpdGluZywgRm9yUGF5b3V0IH0KCiAgICAvLyAgICAgICAgICAgICAgIDAwICAgMDEgICAwMiAgIDAzCiAgICBlbnVtIEN1cnJlbmN5IHsgRVRILCBFVVIsIFVTRCwgR0JQIH0KCiAgICAvLyB0aGUgcG9saWN5IHN0cnVjdHVyZTogdGhpcyBzdHJ1Y3R1cmUga2VlcHMgdHJhY2sgb2YgdGhlIGluZGl2aWR1YWwgcGFyYW1ldGVycyBvZiBhIHBvbGljeS4KICAgIC8vIHR5cGljYWxseSBjdXN0b21lciBhZGRyZXNzLCBwcmVtaXVtIGFuZCBzb21lIHN0YXR1cyBpbmZvcm1hdGlvbi4KICAgIHN0cnVjdCBQb2xpY3kgewogICAgICAgIC8vIDAgLSB0aGUgY3VzdG9tZXIKICAgICAgICBhZGRyZXNzIGN1c3RvbWVyOwoKICAgICAgICAvLyAxIC0gcHJlbWl1bQogICAgICAgIHVpbnQgcHJlbWl1bTsKICAgICAgICAvLyByaXNrIHNwZWNpZmljIHBhcmFtZXRlcnM6CiAgICAgICAgLy8gMiAtIHBvaW50ZXIgdG8gdGhlIHJpc2sgaW4gdGhlIHJpc2tzIG1hcHBpbmcKICAgICAgICBieXRlczMyIHJpc2tJZDsKICAgICAgICAvLyBjdXN0b20gcGF5b3V0IHBhdHRlcm4KICAgICAgICAvLyBpbiBmdXR1cmUgdmVyc2lvbnMsIGN1c3RvbWVyIHdpbGwgYmUgYWJsZSB0byB0YW1wZXIgd2l0aCB0aGlzIGFycmF5LgogICAgICAgIC8vIHRvIGtlZXAgdGhpbmdzIHNpbXBsZSwgd2UgaGF2ZSBkZWNpZGVkIHRvIGhhcmQtY29kZSB0aGUgYXJyYXkgZm9yIGFsbCBwb2xpY2llcy4KICAgICAgICAvLyB1aW50OFs1XSBwYXR0ZXJuOwogICAgICAgIC8vIDMgLSBwcm9iYWJpbGl0eSB3ZWlnaHQuIHRoaXMgaXMgdGhlIGNlbnRyYWwgcGFyYW1ldGVyCiAgICAgICAgdWludCB3ZWlnaHQ7CiAgICAgICAgLy8gNCAtIGNhbGN1bGF0ZWQgUGF5b3V0CiAgICAgICAgdWludCBjYWxjdWxhdGVkUGF5b3V0OwogICAgICAgIC8vIDUgLSBhY3R1YWwgUGF5b3V0CiAgICAgICAgdWludCBhY3R1YWxQYXlvdXQ7CgogICAgICAgIC8vIHN0YXR1cyBmaWVsZHM6CiAgICAgICAgLy8gNiAtIHRoZSBzdGF0ZSBvZiB0aGUgcG9saWN5CiAgICAgICAgcG9saWN5U3RhdGUgc3RhdGU7CiAgICAgICAgLy8gNyAtIHRpbWUgb2YgbGFzdCBzdGF0ZSBjaGFuZ2UKICAgICAgICB1aW50IHN0YXRlVGltZTsKICAgICAgICAvLyA4IC0gc3RhdGUgY2hhbmdlIG1lc3NhZ2UvcmVhc29uCiAgICAgICAgYnl0ZXMzMiBzdGF0ZU1lc3NhZ2U7CiAgICAgICAgLy8gOSAtIFRMU05vdGFyeSBQcm9vZgogICAgICAgIGJ5dGVzIHByb29mOwogICAgICAgIC8vIDEwIC0gQ3VycmVuY3kKICAgICAgICBDdXJyZW5jeSBjdXJyZW5jeTsKICAgICAgICAvLyAxMCAtIEV4dGVybmFsIGN1c3RvbWVyIGlkCiAgICAgICAgYnl0ZXMzMiBjdXN0b21lckV4dGVybmFsSWQ7CiAgICB9CgogICAgLy8gdGhlIHJpc2sgc3RydWN0dXJlOyB0aGlzIHN0cnVjdHVyZSBrZWVwcyB0cmFjayBvZiB0aGUgcmlzay0KICAgIC8vIHNwZWNpZmljIHBhcmFtZXRlcnMuCiAgICAvLyBzZXZlcmFsIHBvbGljaWVzIGNhbiBzaGFyZSB0aGUgc2FtZSByaXNrIHN0cnVjdHVyZSAodHlwaWNhbGx5CiAgICAvLyBzb21lIHBlb3BsZSBmbHlpbmcgd2l0aCB0aGUgc2FtZSBwbGFuZSkKICAgIHN0cnVjdCBSaXNrIHsKICAgICAgICAvLyAwIC0gQWlybGluZSBDb2RlICsgRmxpZ2h0TnVtYmVyCiAgICAgICAgYnl0ZXMzMiBjYXJyaWVyRmxpZ2h0TnVtYmVyOwogICAgICAgIC8vIDEgLSBzY2hlZHVsZWQgZGVwYXJ0dXJlIGFuZCBhcnJpdmFsIHRpbWUgaW4gdGhlIGZvcm1hdCAvZGVwL1lZWVkvTU0vREQKICAgICAgICBieXRlczMyIGRlcGFydHVyZVllYXJNb250aERheTsKICAgICAgICAvLyAyIC0gdGhlIGluaXRhbCBhcnJpdmFsIHRpbWUKICAgICAgICB1aW50IGFycml2YWxUaW1lOwogICAgICAgIC8vIDMgLSB0aGUgZmluYWwgZGVsYXkgaW4gbWludXRlcwogICAgICAgIHVpbnQgZGVsYXlJbk1pbnV0ZXM7CiAgICAgICAgLy8gNCAtIHRoZSBkZXRlcm1pbmVkIGRlbGF5IGNhdGVnb3J5ICgwLTUpCiAgICAgICAgdWludDggZGVsYXk7CiAgICAgICAgLy8gNSAtIHdlIGxpbWl0IHRoZSBjdW11bGF0ZWQgd2VpZ2h0ZWQgcHJlbWl1bSB0byBhdm9pZCBjbHVzdGVyIHJpc2tzCiAgICAgICAgdWludCBjdW11bGF0ZWRXZWlnaHRlZFByZW1pdW07CiAgICAgICAgLy8gNiAtIG1heCBjdW11bGF0ZWQgUGF5b3V0IGZvciB0aGlzIHJpc2sKICAgICAgICB1aW50IHByZW1pdW1NdWx0aXBsaWVyOwogICAgfQoKICAgIC8vIHRoZSBvcmFjbGl6ZSBjYWxsYmFjayBzdHJ1Y3R1cmU6IHdlIHVzZSBzZXZlcmFsIG9yYWNsaXplIGNhbGxzLgogICAgLy8gYWxsIG9yYWNsaXplIGNhbGxzIHdpbGwgcmVzdWx0IGluIGEgY29tbW9uIGNhbGxiYWNrIHRvIF9fY2FsbGJhY2soLi4uKS4KICAgIC8vIHRvIGtlZXAgdHJhY2sgb2YgdGhlIGRpZmZlcmVudCBxdWVyeXMgd2UgaGF2ZSB0byBpbnRyb2R1Y2UgdGhpcyBzdHJ1Y3QuCiAgICBzdHJ1Y3QgT3JhY2xpemVDYWxsYmFjayB7CiAgICAgICAgLy8gZm9yIHdoaWNoIHBvbGljeSBoYXZlIHdlIGNhbGxlZD8KICAgICAgICB1aW50IHBvbGljeUlkOwogICAgICAgIC8vIGZvciB3aGljaCBwdXJwb3NlIGRpZCB3ZSBjYWxsPyB7Rm9yVW5kZXJ3cml0ZSB8IEZvclBheW91dH0KICAgICAgICBvcmFjbGl6ZVN0YXRlIG9TdGF0ZTsKICAgICAgICAvLyB0aW1lCiAgICAgICAgdWludCBvcmFjbGl6ZVRpbWU7CiAgICB9CgogICAgc3RydWN0IEN1c3RvbWVyIHsKICAgICAgICBieXRlczMyIGN1c3RvbWVyRXh0ZXJuYWxJZDsKICAgICAgICBib29sIGlkZW50aXR5Q29uZmlybWVkOwogICAgfQp9Cgpjb250cmFjdCBGbGlnaHREZWxheUNvbnRyb2xsZWRDb250cmFjdCBpcyBGbGlnaHREZWxheURhdGFiYXNlTW9kZWwgewoKICAgIGFkZHJlc3MgcHVibGljIGNvbnRyb2xsZXI7CiAgICBGbGlnaHREZWxheUNvbnRyb2xsZXJJbnRlcmZhY2UgRkRfQ0k7CgogICAgbW9kaWZpZXIgb25seUNvbnRyb2xsZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbnRyb2xsZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q29udHJvbGxlcihhZGRyZXNzIF9jb250cm9sbGVyKSBpbnRlcm5hbCByZXR1cm5zIChib29sIF9yZXN1bHQpIHsKICAgICAgICBjb250cm9sbGVyID0gX2NvbnRyb2xsZXI7CiAgICAgICAgRkRfQ0kgPSBGbGlnaHREZWxheUNvbnRyb2xsZXJJbnRlcmZhY2UoX2NvbnRyb2xsZXIpOwogICAgICAgIF9yZXN1bHQgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlc3RydWN0KCkgb25seUNvbnRyb2xsZXIgewogICAgICAgIHNlbGZkZXN0cnVjdChjb250cm9sbGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDb250cmFjdHMoKSBvbmx5Q29udHJvbGxlciB7fQoKICAgIGZ1bmN0aW9uIGdldENvbnRyYWN0KGJ5dGVzMzIgX2lkKSBpbnRlcm5hbCByZXR1cm5zIChhZGRyZXNzIF9hZGRyKSB7CiAgICAgICAgX2FkZHIgPSBGRF9DSS5nZXRDb250cmFjdChfaWQpOwogICAgfQp9Cgpjb250cmFjdCBGbGlnaHREZWxheUNvbnN0YW50cyB7CgogICAgLyoKICAgICogR2VuZXJhbCBldmVudHMKICAgICovCgovLyAtLT4gdGVzdC1tb2RlCi8vICAgICAgICBldmVudCBMb2dVaW50KHN0cmluZyBfbWVzc2FnZSwgdWludCBfdWludCk7Ci8vICAgICAgICBldmVudCBMb2dVaW50RXRoKHN0cmluZyBfbWVzc2FnZSwgdWludCBldGhVaW50KTsKLy8gICAgICAgIGV2ZW50IExvZ1VpbnRUaW1lKHN0cmluZyBfbWVzc2FnZSwgdWludCB0aW1lVWludCk7Ci8vICAgICAgICBldmVudCBMb2dJbnQoc3RyaW5nIF9tZXNzYWdlLCBpbnQgX2ludCk7Ci8vICAgICAgICBldmVudCBMb2dBZGRyZXNzKHN0cmluZyBfbWVzc2FnZSwgYWRkcmVzcyBfYWRkcmVzcyk7Ci8vICAgICAgICBldmVudCBMb2dCeXRlczMyKHN0cmluZyBfbWVzc2FnZSwgYnl0ZXMzMiBoZXhCeXRlczMyKTsKLy8gICAgICAgIGV2ZW50IExvZ0J5dGVzKHN0cmluZyBfbWVzc2FnZSwgYnl0ZXMgaGV4Qnl0ZXMpOwovLyAgICAgICAgZXZlbnQgTG9nQnl0ZXMzMlN0cihzdHJpbmcgX21lc3NhZ2UsIGJ5dGVzMzIgc3RyQnl0ZXMzMik7Ci8vICAgICAgICBldmVudCBMb2dTdHJpbmcoc3RyaW5nIF9tZXNzYWdlLCBzdHJpbmcgX3N0cmluZyk7Ci8vICAgICAgICBldmVudCBMb2dCb29sKHN0cmluZyBfbWVzc2FnZSwgYm9vbCBfYm9vbCk7Ci8vICAgICAgICBldmVudCBMb2coYWRkcmVzcyk7Ci8vIDwtLSB0ZXN0LW1vZGUKCiAgICBldmVudCBMb2dQb2xpY3lBcHBsaWVkKAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyLAogICAgICAgIGJ5dGVzMzIgc3RyQ2FycmllckZsaWdodE51bWJlciwKICAgICAgICB1aW50IGV0aFByZW1pdW0KICAgICk7CiAgICBldmVudCBMb2dQb2xpY3lBY2NlcHRlZCgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICB1aW50IF9zdGF0aXN0aWNzMCwKICAgICAgICB1aW50IF9zdGF0aXN0aWNzMSwKICAgICAgICB1aW50IF9zdGF0aXN0aWNzMiwKICAgICAgICB1aW50IF9zdGF0aXN0aWNzMywKICAgICAgICB1aW50IF9zdGF0aXN0aWNzNCwKICAgICAgICB1aW50IF9zdGF0aXN0aWNzNQogICAgKTsKICAgIGV2ZW50IExvZ1BvbGljeVBhaWRPdXQoCiAgICAgICAgdWludCBfcG9saWN5SWQsCiAgICAgICAgdWludCBldGhBbW91bnQKICAgICk7CiAgICBldmVudCBMb2dQb2xpY3lFeHBpcmVkKAogICAgICAgIHVpbnQgX3BvbGljeUlkCiAgICApOwogICAgZXZlbnQgTG9nUG9saWN5RGVjbGluZWQoCiAgICAgICAgdWludCBfcG9saWN5SWQsCiAgICAgICAgYnl0ZXMzMiBzdHJSZWFzb24KICAgICk7CiAgICBldmVudCBMb2dQb2xpY3lNYW51YWxQYXlvdXQoCiAgICAgICAgdWludCBfcG9saWN5SWQsCiAgICAgICAgYnl0ZXMzMiBzdHJSZWFzb24KICAgICk7CiAgICBldmVudCBMb2dTZW5kRnVuZHMoCiAgICAgICAgYWRkcmVzcyBfcmVjaXBpZW50LAogICAgICAgIHVpbnQ4IF9mcm9tLAogICAgICAgIHVpbnQgZXRoQW1vdW50CiAgICApOwogICAgZXZlbnQgTG9nUmVjZWl2ZUZ1bmRzKAogICAgICAgIGFkZHJlc3MgX3NlbmRlciwKICAgICAgICB1aW50OCBfdG8sCiAgICAgICAgdWludCBldGhBbW91bnQKICAgICk7CiAgICBldmVudCBMb2dTZW5kRmFpbCgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBieXRlczMyIHN0clJlYXNvbgogICAgKTsKICAgIGV2ZW50IExvZ09yYWNsaXplQ2FsbCgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBieXRlczMyIGhleFF1ZXJ5SWQsCiAgICAgICAgc3RyaW5nIF9vcmFjbGl6ZVVybCwKICAgICAgICB1aW50MjU2IF9vcmFjbGl6ZVRpbWUKICAgICk7CiAgICBldmVudCBMb2dPcmFjbGl6ZUNhbGxiYWNrKAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIGJ5dGVzMzIgaGV4UXVlcnlJZCwKICAgICAgICBzdHJpbmcgX3Jlc3VsdCwKICAgICAgICBieXRlcyBoZXhQcm9vZgogICAgKTsKICAgIGV2ZW50IExvZ1NldFN0YXRlKAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIHVpbnQ4IF9wb2xpY3lTdGF0ZSwKICAgICAgICB1aW50IF9zdGF0ZVRpbWUsCiAgICAgICAgYnl0ZXMzMiBfc3RhdGVNZXNzYWdlCiAgICApOwogICAgZXZlbnQgTG9nRXh0ZXJuYWwoCiAgICAgICAgdWludDI1NiBfcG9saWN5SWQsCiAgICAgICAgYWRkcmVzcyBfYWRkcmVzcywKICAgICAgICBieXRlczMyIF9leHRlcm5hbElkCiAgICApOwoKICAgIC8qCiAgICAqIEdlbmVyYWwgY29uc3RhbnRzCiAgICAqLwoKICAgIC8vIG1pbmltdW0gb2JzZXJ2YXRpb25zIGZvciB2YWxpZCBwcmVkaWN0aW9uCiAgICB1aW50IGNvbnN0YW50IE1JTl9PQlNFUlZBVElPTlMgPSAxMDsKICAgIC8vIG1pbmltdW0gcHJlbWl1bSB0byBjb3ZlciBjb3N0cwogICAgdWludCBjb25zdGFudCBNSU5fUFJFTUlVTSA9IDUwIGZpbm5leTsKICAgIC8vIG1heGltdW0gcHJlbWl1bQogICAgdWludCBjb25zdGFudCBNQVhfUFJFTUlVTSA9IDEgZXRoZXI7CiAgICAvLyBtYXhpbXVtIHBheW91dAogICAgdWludCBjb25zdGFudCBNQVhfUEFZT1VUID0gMTEwMCBmaW5uZXk7CgogICAgdWludCBjb25zdGFudCBNSU5fUFJFTUlVTV9FVVIgPSAxNTAwIHdlaTsKICAgIHVpbnQgY29uc3RhbnQgTUFYX1BSRU1JVU1fRVVSID0gMjkwMDAgd2VpOwogICAgdWludCBjb25zdGFudCBNQVhfUEFZT1VUX0VVUiA9IDMwMDAwIHdlaTsKCiAgICB1aW50IGNvbnN0YW50IE1JTl9QUkVNSVVNX1VTRCA9IDE3MDAgd2VpOwogICAgdWludCBjb25zdGFudCBNQVhfUFJFTUlVTV9VU0QgPSAzNDAwMCB3ZWk7CiAgICB1aW50IGNvbnN0YW50IE1BWF9QQVlPVVRfVVNEID0gMzUwMDAgd2VpOwoKICAgIHVpbnQgY29uc3RhbnQgTUlOX1BSRU1JVU1fR0JQID0gMTMwMCB3ZWk7CiAgICB1aW50IGNvbnN0YW50IE1BWF9QUkVNSVVNX0dCUCA9IDI1MDAwIHdlaTsKICAgIHVpbnQgY29uc3RhbnQgTUFYX1BBWU9VVF9HQlAgPSAyNzAgd2VpOwoKICAgIC8vIG1heGltdW0gY3VtdWxhdGVkIHdlaWdodGVkIHByZW1pdW0gcGVyIHJpc2sKICAgIHVpbnQgY29uc3RhbnQgTUFYX0NVTVVMQVRFRF9XRUlHSFRFRF9QUkVNSVVNID0gNjAgZXRoZXI7CiAgICAvLyAxIHBlcmNlbnQgZm9yIERBTywgMSBwZXJjZW50IGZvciBtYWludGFpbmVyCiAgICB1aW50OCBjb25zdGFudCBSRVdBUkRfUEVSQ0VOVCA9IDI7CiAgICAvLyByZXNlcnZlIGZvciB0YWlsIHJpc2tzCiAgICB1aW50OCBjb25zdGFudCBSRVNFUlZFX1BFUkNFTlQgPSAxOwogICAgLy8gdGhlIHdlaWdodCBwYXR0ZXJuOyBpbiBmdXR1cmUgdmVyc2lvbnMgdGhpcyBtYXkgYmVjb21lIHBhcnQgb2YgdGhlIHBvbGljeSBzdHJ1Y3QuCiAgICAvLyBjdXJyZW50bHkgY2FuJ3QgYmUgY29uc3RhbnQgYmVjYXVzZSBvZiBjb21waWxlciByZXN0cmljdGlvbnMKICAgIC8vIFdFSUdIVF9QQVRURVJOWzBdIGlzIG5vdCB1c2VkLCBqdXN0IHRvIGJlIGNvbnNpc3RlbnQKICAgIHVpbnQ4WzZdIFdFSUdIVF9QQVRURVJOID0gWwogICAgICAgIDAsCiAgICAgICAgMTAsCiAgICAgICAgMjAsCiAgICAgICAgMzAsCiAgICAgICAgNTAsCiAgICAgICAgNTAKICAgIF07CgovLyAtLT4gcHJvZC1tb2RlCiAgICAvLyBERUZJTklUSU9OUyBGT1IgUk9QU1RFTiBBTkQgTUFJTk5FVAogICAgLy8gbWluaW11bSB0aW1lIGJlZm9yZSBkZXBhcnR1cmUgZm9yIGFwcGx5aW5nCiAgICB1aW50IGNvbnN0YW50IE1JTl9USU1FX0JFRk9SRV9ERVBBUlRVUkUJPSAyNCBob3VyczsgLy8gZm9yIHByb2R1Y3Rpb24KICAgIC8vIGNoZWNrIGZvciBkZWxheSBhZnRlciAuLiBtaW51dGVzIGFmdGVyIHNjaGVkdWxlZCBhcnJpdmFsCiAgICB1aW50IGNvbnN0YW50IENIRUNLX1BBWU9VVF9PRkZTRVQgPSAxNSBtaW51dGVzOyAvLyBmb3IgcHJvZHVjdGlvbgovLyA8LS0gcHJvZC1tb2RlCgovLyAtLT4gdGVzdC1tb2RlCi8vICAgICAgICAvLyBERUZJTklUSU9OUyBGT1IgTE9DQUwgVEVTVE5FVAovLyAgICAgICAgLy8gbWluaW11bSB0aW1lIGJlZm9yZSBkZXBhcnR1cmUgZm9yIGFwcGx5aW5nCi8vICAgICAgICB1aW50IGNvbnN0YW50IE1JTl9USU1FX0JFRk9SRV9ERVBBUlRVUkUgPSAxIHNlY29uZHM7IC8vIGZvciB0ZXN0aW5nCi8vICAgICAgICAvLyBjaGVjayBmb3IgZGVsYXkgYWZ0ZXIgLi4gbWludXRlcyBhZnRlciBzY2hlZHVsZWQgYXJyaXZhbAovLyAgICAgICAgdWludCBjb25zdGFudCBDSEVDS19QQVlPVVRfT0ZGU0VUID0gMSBzZWNvbmRzOyAvLyBmb3IgdGVzdGluZwovLyA8LS0gdGVzdC1tb2RlCgogICAgLy8gbWF4aW11bSBkdXJhdGlvbiBvZiBmbGlnaHQKICAgIHVpbnQgY29uc3RhbnQgTUFYX0ZMSUdIVF9EVVJBVElPTiA9IDIgZGF5czsKICAgIC8vIERlYWRsaW5lIGZvciBhY2NlcHRhbmNlIG9mIHBvbGljaWVzOiAzMS4xMi4yMDMwIChUZXN0bmV0KQogICAgdWludCBjb25zdGFudCBDT05UUkFDVF9ERUFEX0xJTkUgPSAxOTIyMzk2Mzk5OwoKICAgIHVpbnQgY29uc3RhbnQgTUlOX0RFUEFSVFVSRV9MSU0gPSAxNTA4MTk4NDAwOwoKICAgIHVpbnQgY29uc3RhbnQgTUFYX0RFUEFSVFVSRV9MSU0gPSAxNTA5ODQwMDAwOwoKICAgIC8vIGdhcyBDb25zdGFudHMgZm9yIG9yYWNsaXplCiAgICB1aW50IGNvbnN0YW50IE9SQUNMSVpFX0dBUyA9IDEwMDAwMDA7CgoKICAgIC8qCiAgICAqIFVSTHMgYW5kIHF1ZXJ5IHN0cmluZ3MgZm9yIG9yYWNsaXplCiAgICAqLwoKLy8gLS0+IHByb2QtbW9kZQogICAgLy8gREVGSU5JVElPTlMgRk9SIFJPUFNURU4gQU5EIE1BSU5ORVQKICAgIHN0cmluZyBjb25zdGFudCBPUkFDTElaRV9SQVRJTkdTX0JBU0VfVVJMID0KICAgICAgICAvLyByYXRpbmdzIGFwaSBpcyB2MSwgc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLmZsaWdodHN0YXRzLmNvbS9hcGktZG9jcy9yYXRpbmdzL3YxCiAgICAgICAgIltVUkxdIGpzb24oaHR0cHM6Ly9hcGkuZmxpZ2h0c3RhdHMuY29tL2ZsZXgvcmF0aW5ncy9yZXN0L3YxL2pzb24vZmxpZ2h0LyI7CiAgICBzdHJpbmcgY29uc3RhbnQgT1JBQ0xJWkVfUkFUSU5HU19RVUVSWSA9CiAgICAgICAgIj8ke1tkZWNyeXB0XSA8IS0tUFVUIEVOQ1JZUFRFRF9RVUVSWSBIRVJFLS0+IH0pLnJhdGluZ3NbMF1bJ29ic2VydmF0aW9ucycsJ2xhdGUxNScsJ2xhdGUzMCcsJ2xhdGU0NScsJ2NhbmNlbGxlZCcsJ2RpdmVydGVkJywnYXJyaXZhbEFpcnBvcnRGc0NvZGUnXSI7CiAgICBzdHJpbmcgY29uc3RhbnQgT1JBQ0xJWkVfU1RBVFVTX0JBU0VfVVJMID0KICAgICAgICAvLyBmbGlnaHQgc3RhdHVzIGFwaSBpcyB2Miwgc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLmZsaWdodHN0YXRzLmNvbS9hcGktZG9jcy9mbGlnaHRzdGF0dXMvdjIvZmxpZ2h0CiAgICAgICAgIltVUkxdIGpzb24oaHR0cHM6Ly9hcGkuZmxpZ2h0c3RhdHMuY29tL2ZsZXgvZmxpZ2h0c3RhdHVzL3Jlc3QvdjIvanNvbi9mbGlnaHQvc3RhdHVzLyI7CiAgICBzdHJpbmcgY29uc3RhbnQgT1JBQ0xJWkVfU1RBVFVTX1FVRVJZID0KICAgICAgICAvLyBwYXR0ZXJuOgogICAgICAgICI/JHtbZGVjcnlwdF0gPCEtLVBVVCBFTkNSWVBURURfUVVFUlkgSEVSRS0tPiB9JnV0Yz10cnVlKS5mbGlnaHRTdGF0dXNlc1swXVsnc3RhdHVzJywnZGVsYXlzJywnb3BlcmF0aW9uYWxUaW1lcyddIjsKLy8gPC0tIHByb2QtbW9kZQoKLy8gLS0+IHRlc3QtbW9kZQovLyAgICAgICAgLy8gREVGSU5JVElPTlMgRk9SIExPQ0FMIFRFU1RORVQKLy8gICAgICAgIHN0cmluZyBjb25zdGFudCBPUkFDTElaRV9SQVRJTkdTX0JBU0VfVVJMID0KLy8gICAgICAgICAgICAvLyByYXRpbmdzIGFwaSBpcyB2MSwgc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLmZsaWdodHN0YXRzLmNvbS9hcGktZG9jcy9yYXRpbmdzL3YxCi8vICAgICAgICAgICAgIltVUkxdIGpzb24oaHR0cHM6Ly9hcGktdGVzdC5ldGhlcmlzYy5jb20vZmxleC9yYXRpbmdzL3Jlc3QvdjEvanNvbi9mbGlnaHQvIjsKLy8gICAgICAgIHN0cmluZyBjb25zdGFudCBPUkFDTElaRV9SQVRJTkdTX1FVRVJZID0KLy8gICAgICAgICAgICAvLyBmb3IgdGVzdHJwYzoKLy8gICAgICAgICAgICAiKS5yYXRpbmdzWzBdWydvYnNlcnZhdGlvbnMnLCdsYXRlMTUnLCdsYXRlMzAnLCdsYXRlNDUnLCdjYW5jZWxsZWQnLCdkaXZlcnRlZCcsJ2Fycml2YWxBaXJwb3J0RnNDb2RlJ10iOwovLyAgICAgICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1NUQVRVU19CQVNFX1VSTCA9Ci8vICAgICAgICAgICAgLy8gZmxpZ2h0IHN0YXR1cyBhcGkgaXMgdjIsIHNlZSBodHRwczovL2RldmVsb3Blci5mbGlnaHRzdGF0cy5jb20vYXBpLWRvY3MvZmxpZ2h0c3RhdHVzL3YyL2ZsaWdodAovLyAgICAgICAgICAgICJbVVJMXSBqc29uKGh0dHBzOi8vYXBpLXRlc3QuZXRoZXJpc2MuY29tL2ZsZXgvZmxpZ2h0c3RhdHVzL3Jlc3QvdjIvanNvbi9mbGlnaHQvc3RhdHVzLyI7Ci8vICAgICAgICBzdHJpbmcgY29uc3RhbnQgT1JBQ0xJWkVfU1RBVFVTX1FVRVJZID0KLy8gICAgICAgICAgICAvLyBmb3IgdGVzdHJwYzoKLy8gICAgICAgICAgICAiP3V0Yz10cnVlKS5mbGlnaHRTdGF0dXNlc1swXVsnc3RhdHVzJywnZGVsYXlzJywnb3BlcmF0aW9uYWxUaW1lcyddIjsKLy8gPC0tIHRlc3QtbW9kZQp9Cgpjb250cmFjdCBGbGlnaHREZWxheURhdGFiYXNlSW50ZXJmYWNlIGlzIEZsaWdodERlbGF5RGF0YWJhc2VNb2RlbCB7CgogICAgZnVuY3Rpb24gc2V0QWNjZXNzQ29udHJvbChhZGRyZXNzIF9jb250cmFjdCwgYWRkcmVzcyBfY2FsbGVyLCB1aW50OCBfcGVybSk7CgogICAgZnVuY3Rpb24gc2V0QWNjZXNzQ29udHJvbCgKICAgICAgICBhZGRyZXNzIF9jb250cmFjdCwKICAgICAgICBhZGRyZXNzIF9jYWxsZXIsCiAgICAgICAgdWludDggX3Blcm0sCiAgICAgICAgYm9vbCBfYWNjZXNzCiAgICApOwoKICAgIGZ1bmN0aW9uIGdldEFjY2Vzc0NvbnRyb2woYWRkcmVzcyBfY29udHJhY3QsIGFkZHJlc3MgX2NhbGxlciwgdWludDggX3Blcm0pIHJldHVybnMgKGJvb2wgX2FsbG93ZWQpOwoKICAgIGZ1bmN0aW9uIHNldExlZGdlcih1aW50OCBfaW5kZXgsIGludCBfdmFsdWUpOwoKICAgIGZ1bmN0aW9uIGdldExlZGdlcih1aW50OCBfaW5kZXgpIHJldHVybnMgKGludCBfdmFsdWUpOwoKICAgIGZ1bmN0aW9uIGdldEN1c3RvbWVyUHJlbWl1bSh1aW50IF9wb2xpY3lJZCkgcmV0dXJucyAoYWRkcmVzcyBfY3VzdG9tZXIsIHVpbnQgX3ByZW1pdW0pOwoKICAgIGZ1bmN0aW9uIGdldFBvbGljeURhdGEodWludCBfcG9saWN5SWQpIHJldHVybnMgKGFkZHJlc3MgX2N1c3RvbWVyLCB1aW50IF9wcmVtaXVtLCB1aW50IF93ZWlnaHQpOwoKICAgIGZ1bmN0aW9uIGdldFBvbGljeVN0YXRlKHVpbnQgX3BvbGljeUlkKSByZXR1cm5zIChwb2xpY3lTdGF0ZSBfc3RhdGUpOwoKICAgIGZ1bmN0aW9uIGdldFJpc2tJZCh1aW50IF9wb2xpY3lJZCkgcmV0dXJucyAoYnl0ZXMzMiBfcmlza0lkKTsKCiAgICBmdW5jdGlvbiBjcmVhdGVQb2xpY3koYWRkcmVzcyBfY3VzdG9tZXIsIHVpbnQgX3ByZW1pdW0sIEN1cnJlbmN5IF9jdXJyZW5jeSwgYnl0ZXMzMiBfY3VzdG9tZXJFeHRlcm5hbElkLCBieXRlczMyIF9yaXNrSWQpIHJldHVybnMgKHVpbnQgX3BvbGljeUlkKTsKCiAgICBmdW5jdGlvbiBzZXRTdGF0ZSgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBwb2xpY3lTdGF0ZSBfc3RhdGUsCiAgICAgICAgdWludCBfc3RhdGVUaW1lLAogICAgICAgIGJ5dGVzMzIgX3N0YXRlTWVzc2FnZQogICAgKTsKCiAgICBmdW5jdGlvbiBzZXRXZWlnaHQodWludCBfcG9saWN5SWQsIHVpbnQgX3dlaWdodCwgYnl0ZXMgX3Byb29mKTsKCiAgICBmdW5jdGlvbiBzZXRQYXlvdXRzKHVpbnQgX3BvbGljeUlkLCB1aW50IF9jYWxjdWxhdGVkUGF5b3V0LCB1aW50IF9hY3R1YWxQYXlvdXQpOwoKICAgIGZ1bmN0aW9uIHNldERlbGF5KHVpbnQgX3BvbGljeUlkLCB1aW50OCBfZGVsYXksIHVpbnQgX2RlbGF5SW5NaW51dGVzKTsKCiAgICBmdW5jdGlvbiBnZXRSaXNrUGFyYW1ldGVycyhieXRlczMyIF9yaXNrSWQpCiAgICAgICAgcmV0dXJucyAoYnl0ZXMzMiBfY2FycmllckZsaWdodE51bWJlciwgYnl0ZXMzMiBfZGVwYXJ0dXJlWWVhck1vbnRoRGF5LCB1aW50IF9hcnJpdmFsVGltZSk7CgogICAgZnVuY3Rpb24gZ2V0UHJlbWl1bUZhY3RvcnMoYnl0ZXMzMiBfcmlza0lkKQogICAgICAgIHJldHVybnMgKHVpbnQgX2N1bXVsYXRlZFdlaWdodGVkUHJlbWl1bSwgdWludCBfcHJlbWl1bU11bHRpcGxpZXIpOwoKICAgIGZ1bmN0aW9uIGNyZWF0ZVVwZGF0ZVJpc2soYnl0ZXMzMiBfY2FycmllckZsaWdodE51bWJlciwgYnl0ZXMzMiBfZGVwYXJ0dXJlWWVhck1vbnRoRGF5LCB1aW50IF9hcnJpdmFsVGltZSkKICAgICAgICByZXR1cm5zIChieXRlczMyIF9yaXNrSWQpOwoKICAgIGZ1bmN0aW9uIHNldFByZW1pdW1GYWN0b3JzKGJ5dGVzMzIgX3Jpc2tJZCwgdWludCBfY3VtdWxhdGVkV2VpZ2h0ZWRQcmVtaXVtLCB1aW50IF9wcmVtaXVtTXVsdGlwbGllcik7CgogICAgZnVuY3Rpb24gZ2V0T3JhY2xpemVDYWxsYmFjayhieXRlczMyIF9xdWVyeUlkKQogICAgICAgIHJldHVybnMgKHVpbnQgX3BvbGljeUlkLCB1aW50IF9hcnJpdmFsVGltZSk7CgogICAgZnVuY3Rpb24gZ2V0T3JhY2xpemVQb2xpY3lJZChieXRlczMyIF9xdWVyeUlkKQogICAgcmV0dXJucyAodWludCBfcG9saWN5SWQpOwoKICAgIGZ1bmN0aW9uIGNyZWF0ZU9yYWNsaXplQ2FsbGJhY2soCiAgICAgICAgYnl0ZXMzMiBfcXVlcnlJZCwKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBvcmFjbGl6ZVN0YXRlIF9vcmFjbGl6ZVN0YXRlLAogICAgICAgIHVpbnQgX29yYWNsaXplVGltZQogICAgKTsKCiAgICBmdW5jdGlvbiBjaGVja1RpbWUoYnl0ZXMzMiBfcXVlcnlJZCwgYnl0ZXMzMiBfcmlza0lkLCB1aW50IF9vZmZzZXQpCiAgICAgICAgcmV0dXJucyAoYm9vbCBfcmVzdWx0KTsKfQoKY29udHJhY3QgRmxpZ2h0RGVsYXlBY2Nlc3NDb250cm9sbGVySW50ZXJmYWNlIHsKCiAgICBmdW5jdGlvbiBzZXRQZXJtaXNzaW9uQnlJZCh1aW50OCBfcGVybSwgYnl0ZXMzMiBfaWQpOwoKICAgIGZ1bmN0aW9uIHNldFBlcm1pc3Npb25CeUlkKHVpbnQ4IF9wZXJtLCBieXRlczMyIF9pZCwgYm9vbCBfYWNjZXNzKTsKCiAgICBmdW5jdGlvbiBzZXRQZXJtaXNzaW9uQnlBZGRyZXNzKHVpbnQ4IF9wZXJtLCBhZGRyZXNzIF9hZGRyKTsKCiAgICBmdW5jdGlvbiBzZXRQZXJtaXNzaW9uQnlBZGRyZXNzKHVpbnQ4IF9wZXJtLCBhZGRyZXNzIF9hZGRyLCBib29sIF9hY2Nlc3MpOwoKICAgIGZ1bmN0aW9uIGNoZWNrUGVybWlzc2lvbih1aW50OCBfcGVybSwgYWRkcmVzcyBfYWRkcikgcmV0dXJucyAoYm9vbCBfc3VjY2Vzcyk7Cn0KCgpjb250cmFjdCBGbGlnaHREZWxheUxlZGdlckludGVyZmFjZSBpcyBGbGlnaHREZWxheURhdGFiYXNlTW9kZWwgewoKICAgIGZ1bmN0aW9uIHJlY2VpdmVGdW5kcyhBY2MgX3RvKSBwYXlhYmxlOwoKICAgIGZ1bmN0aW9uIHNlbmRGdW5kcyhhZGRyZXNzIF9yZWNpcGllbnQsIEFjYyBfZnJvbSwgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sIF9zdWNjZXNzKTsKCiAgICBmdW5jdGlvbiBib29ra2VlcGluZyhBY2MgX2Zyb20sIEFjYyBfdG8sIHVpbnQgYW1vdW50KTsKfQoKY29udHJhY3QgRmxpZ2h0RGVsYXlVbmRlcndyaXRlSW50ZXJmYWNlIHsKCiAgICBmdW5jdGlvbiBzY2hlZHVsZVVuZGVyd3JpdGVPcmFjbGl6ZUNhbGwodWludCBfcG9saWN5SWQsIGJ5dGVzMzIgX2NhcnJpZXJGbGlnaHROdW1iZXIpOwp9Cgpjb250cmFjdCBDb252ZXJ0TGliIHsKCiAgICAvLyAuLiBzaW5jZSBiZWdpbm5pbmcgb2YgdGhlIHllYXIKICAgIHVpbnQxNlsxMl0gZGF5c19zaW5jZSA9IFsKICAgICAgICAxMSwKICAgICAgICA0MiwKICAgICAgICA3MCwKICAgICAgICAxMDEsCiAgICAgICAgMTMxLAogICAgICAgIDE2MiwKICAgICAgICAxOTIsCiAgICAgICAgMjIzLAogICAgICAgIDI1NCwKICAgICAgICAyODQsCiAgICAgICAgMzE1LAogICAgICAgIDM0NQogICAgXTsKCiAgICBmdW5jdGlvbiBiMzJ0b1N0cmluZyhieXRlczMyIHgpIGludGVybmFsIHJldHVybnMgKHN0cmluZykgewogICAgICAgIC8vIGdhcyB1c2FnZTogYWJvdXQgMUsgZ2FzIHBlciBjaGFyLgogICAgICAgIGJ5dGVzIG1lbW9yeSBieXRlc1N0cmluZyA9IG5ldyBieXRlcygzMik7CiAgICAgICAgdWludCBjaGFyQ291bnQgPSAwOwoKICAgICAgICBmb3IgKHVpbnQgaiA9IDA7IGogPCAzMjsgaisrKSB7CiAgICAgICAgICAgIGJ5dGUgY2hhciA9IGJ5dGUoYnl0ZXMzMih1aW50KHgpICogMiAqKiAoOCAqIGopKSk7CiAgICAgICAgICAgIGlmIChjaGFyICE9IDApIHsKICAgICAgICAgICAgICAgIGJ5dGVzU3RyaW5nW2NoYXJDb3VudF0gPSBjaGFyOwogICAgICAgICAgICAgICAgY2hhckNvdW50Kys7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGJ5dGVzIG1lbW9yeSBieXRlc1N0cmluZ1RyaW1tZWQgPSBuZXcgYnl0ZXMoY2hhckNvdW50KTsKCiAgICAgICAgZm9yIChqID0gMDsgaiA8IGNoYXJDb3VudDsgaisrKSB7CiAgICAgICAgICAgIGJ5dGVzU3RyaW5nVHJpbW1lZFtqXSA9IGJ5dGVzU3RyaW5nW2pdOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHN0cmluZyhieXRlc1N0cmluZ1RyaW1tZWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGIzMnRvSGV4U3RyaW5nKGJ5dGVzMzIgeCkgcmV0dXJucyAoc3RyaW5nKSB7CiAgICAgICAgYnl0ZXMgbWVtb3J5IGIgPSBuZXcgYnl0ZXMoNjQpOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IDMyOyBpKyspIHsKICAgICAgICAgICAgdWludDggYnkgPSB1aW50OCh1aW50KHgpIC8gKDIqKig4KigzMSAtIGkpKSkpOwogICAgICAgICAgICB1aW50OCBoaWdoID0gYnkvMTY7CiAgICAgICAgICAgIHVpbnQ4IGxvdyA9IGJ5IC0gMTYqaGlnaDsKICAgICAgICAgICAgaWYgKGhpZ2ggPiA5KSB7CiAgICAgICAgICAgICAgICBoaWdoICs9IDM5OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChsb3cgPiA5KSB7CiAgICAgICAgICAgICAgICBsb3cgKz0gMzk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYlsyKmldID0gYnl0ZShoaWdoKzQ4KTsKICAgICAgICAgICAgYlsyKmkrMV0gPSBieXRlKGxvdys0OCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc3RyaW5nKGIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHBhcnNlSW50KHN0cmluZyBfYSkgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBwYXJzZUludChfYSwgMCk7CiAgICB9CgogICAgLy8gcGFyc2VJbnQocGFyc2VGbG9hdCoxMF5fYikKICAgIGZ1bmN0aW9uIHBhcnNlSW50KHN0cmluZyBfYSwgdWludCBfYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIGJ5dGVzIG1lbW9yeSBicmVzdWx0ID0gYnl0ZXMoX2EpOwogICAgICAgIHVpbnQgbWludCA9IDA7CiAgICAgICAgYm9vbCBkZWNpbWFscyA9IGZhbHNlOwogICAgICAgIGZvciAodWludCBpID0gMDsgaTxicmVzdWx0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICgoYnJlc3VsdFtpXSA+PSA0OCkmJihicmVzdWx0W2ldIDw9IDU3KSkgewogICAgICAgICAgICAgICAgaWYgKGRlY2ltYWxzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKF9iID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2ItLTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBtaW50ICo9IDEwOwogICAgICAgICAgICAgICAgbWludCArPSB1aW50KGJyZXN1bHRbaV0pIC0gNDg7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoYnJlc3VsdFtpXSA9PSA0NikgewogICAgICAgICAgICAgICAgZGVjaW1hbHMgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChfYiA+IDApIHsKICAgICAgICAgICAgbWludCAqPSAxMCoqX2I7CiAgICAgICAgfQogICAgICAgIHJldHVybiBtaW50OwogICAgfQoKICAgIC8vIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb24geWllbGRzIGNvcnJlY3QgcmVzdWx0cyBpbiB0aGUgdGltZSBiZXR3ZWVuIDEuMy4yMDE2IGFuZCAyOC4wMi4yMDIwLAogICAgLy8gc28gd2l0aGluIHRoZSB2YWxpZGl0eSBvZiB0aGUgY29udHJhY3QgaXRzIGNvcnJlY3QuCiAgICBmdW5jdGlvbiB0b1VuaXh0aW1lKGJ5dGVzMzIgX2RheU1vbnRoWWVhcikgY29uc3RhbnQgcmV0dXJucyAodWludCB1bml4dGltZSkgewogICAgICAgIC8vIF9kYXlfbW9udGhfeWVhciA9IC9kZXAvMjAxNi8wOS8xMAogICAgICAgIGJ5dGVzIG1lbW9yeSBiRG15ID0gYnl0ZXMoYjMydG9TdHJpbmcoX2RheU1vbnRoWWVhcikpOwogICAgICAgIGJ5dGVzIG1lbW9yeSB0ZW1wMiA9IGJ5dGVzKG5ldyBzdHJpbmcoMikpOwogICAgICAgIGJ5dGVzIG1lbW9yeSB0ZW1wNCA9IGJ5dGVzKG5ldyBzdHJpbmcoNCkpOwoKICAgICAgICB0ZW1wNFswXSA9IGJEbXlbNV07CiAgICAgICAgdGVtcDRbMV0gPSBiRG15WzZdOwogICAgICAgIHRlbXA0WzJdID0gYkRteVs3XTsKICAgICAgICB0ZW1wNFszXSA9IGJEbXlbOF07CiAgICAgICAgdWludCB5ZWFyID0gcGFyc2VJbnQoc3RyaW5nKHRlbXA0KSk7CgogICAgICAgIHRlbXAyWzBdID0gYkRteVsxMF07CiAgICAgICAgdGVtcDJbMV0gPSBiRG15WzExXTsKICAgICAgICB1aW50IG1vbnRoID0gcGFyc2VJbnQoc3RyaW5nKHRlbXAyKSk7CgogICAgICAgIHRlbXAyWzBdID0gYkRteVsxM107CiAgICAgICAgdGVtcDJbMV0gPSBiRG15WzE0XTsKICAgICAgICB1aW50IGRheSA9IHBhcnNlSW50KHN0cmluZyh0ZW1wMikpOwoKICAgICAgICB1bml4dGltZSA9ICgoeWVhciAtIDE5NzApICogMzY1ICsgZGF5c19zaW5jZVttb250aC0xXSArIGRheSkgKiA4NjQwMDsKICAgIH0KfQoKY29udHJhY3QgRmxpZ2h0RGVsYXlOZXdQb2xpY3kgaXMgRmxpZ2h0RGVsYXlDb250cm9sbGVkQ29udHJhY3QsIEZsaWdodERlbGF5Q29uc3RhbnRzLCBDb252ZXJ0TGliIHsKCiAgICBGbGlnaHREZWxheUFjY2Vzc0NvbnRyb2xsZXJJbnRlcmZhY2UgRkRfQUM7CiAgICBGbGlnaHREZWxheURhdGFiYXNlSW50ZXJmYWNlIEZEX0RCOwogICAgRmxpZ2h0RGVsYXlMZWRnZXJJbnRlcmZhY2UgRkRfTEc7CiAgICBGbGlnaHREZWxheVVuZGVyd3JpdGVJbnRlcmZhY2UgRkRfVVc7CgogICAgZnVuY3Rpb24gRmxpZ2h0RGVsYXlOZXdQb2xpY3koYWRkcmVzcyBfY29udHJvbGxlcikgewogICAgICAgIHNldENvbnRyb2xsZXIoX2NvbnRyb2xsZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldENvbnRyYWN0cygpIG9ubHlDb250cm9sbGVyIHsKICAgICAgICBGRF9BQyA9IEZsaWdodERlbGF5QWNjZXNzQ29udHJvbGxlckludGVyZmFjZShnZXRDb250cmFjdCgiRkQuQWNjZXNzQ29udHJvbGxlciIpKTsKICAgICAgICBGRF9EQiA9IEZsaWdodERlbGF5RGF0YWJhc2VJbnRlcmZhY2UoZ2V0Q29udHJhY3QoIkZELkRhdGFiYXNlIikpOwogICAgICAgIEZEX0xHID0gRmxpZ2h0RGVsYXlMZWRnZXJJbnRlcmZhY2UoZ2V0Q29udHJhY3QoIkZELkxlZGdlciIpKTsKICAgICAgICBGRF9VVyA9IEZsaWdodERlbGF5VW5kZXJ3cml0ZUludGVyZmFjZShnZXRDb250cmFjdCgiRkQuVW5kZXJ3cml0ZSIpKTsKCiAgICAgICAgRkRfQUMuc2V0UGVybWlzc2lvbkJ5QWRkcmVzcygxMDEsIDB4MCk7CiAgICAgICAgRkRfQUMuc2V0UGVybWlzc2lvbkJ5SWQoMTAyLCAiRkQuQ29udHJvbGxlciIpOwogICAgICAgIEZEX0FDLnNldFBlcm1pc3Npb25CeUlkKDEwMywgIkZELk93bmVyIik7CiAgICB9CgogICAgZnVuY3Rpb24gYm9va0FuZENhbGNSZW1haW5pbmdQcmVtaXVtKCkgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgdiA9IG1zZy52YWx1ZTsKICAgICAgICB1aW50IHJlc2VydmUgPSB2ICogUkVTRVJWRV9QRVJDRU5UIC8gMTAwOwogICAgICAgIHVpbnQgcmVtYWluID0gdiAtIHJlc2VydmU7CiAgICAgICAgdWludCByZXdhcmQgPSByZW1haW4gKiBSRVdBUkRfUEVSQ0VOVCAvIDEwMDsKCiAgICAgICAgLy8gRkRfTEcuYm9va2tlZXBpbmcoQWNjLkJhbGFuY2UsIEFjYy5QcmVtaXVtLCB2KTsKICAgICAgICBGRF9MRy5ib29ra2VlcGluZyhBY2MuUHJlbWl1bSwgQWNjLlJpc2tGdW5kLCByZXNlcnZlKTsKICAgICAgICBGRF9MRy5ib29ra2VlcGluZyhBY2MuUHJlbWl1bSwgQWNjLlJld2FyZCwgcmV3YXJkKTsKCiAgICAgICAgcmV0dXJuICh1aW50KHJlbWFpbiAtIHJld2FyZCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1haW50ZW5hbmNlTW9kZShib29sIF9vbikgewogICAgICAgIGlmIChGRF9BQy5jaGVja1Blcm1pc3Npb24oMTAzLCBtc2cuc2VuZGVyKSkgewogICAgICAgICAgICBGRF9BQy5zZXRQZXJtaXNzaW9uQnlBZGRyZXNzKDEwMSwgMHgwLCAhX29uKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gY3JlYXRlIG5ldyBwb2xpY3kKICAgIGZ1bmN0aW9uIG5ld1BvbGljeSgKICAgICAgICBieXRlczMyIF9jYXJyaWVyRmxpZ2h0TnVtYmVyLAogICAgICAgIGJ5dGVzMzIgX2RlcGFydHVyZVllYXJNb250aERheSwKICAgICAgICB1aW50MjU2IF9kZXBhcnR1cmVUaW1lLAogICAgICAgIHVpbnQyNTYgX2Fycml2YWxUaW1lLAogICAgICAgIEN1cnJlbmN5IF9jdXJyZW5jeSwKICAgICAgICBieXRlczMyIF9jdXN0b21lckV4dGVybmFsSWQpIHBheWFibGUKICAgIHsKICAgICAgICAvLyBoZXJlIHdlIGNhbiBzd2l0Y2ggaXQgb2ZmLgogICAgICAgIHJlcXVpcmUoRkRfQUMuY2hlY2tQZXJtaXNzaW9uKDEwMSwgMHgwKSk7CgogICAgICAgIHJlcXVpcmUodWludDI1NihfY3VycmVuY3kpIDw9IDMpOwoKICAgICAgICB1aW50OCBwYXltZW50VHlwZSA9IHVpbnQ4KF9jdXJyZW5jeSk7CgogICAgICAgIGlmIChwYXltZW50VHlwZSA9PSAwKSB7CiAgICAgICAgICAgIC8vIEVUSAogICAgICAgICAgICBpZiAobXNnLnZhbHVlIDwgTUlOX1BSRU1JVU0gfHwgbXNnLnZhbHVlID4gTUFYX1BSRU1JVU0pIHsKICAgICAgICAgICAgICAgIExvZ1BvbGljeURlY2xpbmVkKDAsICJJbnZhbGlkIHByZW1pdW0gdmFsdWUiKTsKICAgICAgICAgICAgICAgIEZEX0xHLnNlbmRGdW5kcyhtc2cuc2VuZGVyLCBBY2MuUHJlbWl1bSwgbXNnLnZhbHVlKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBGRF9DSS5nZXRDb250cmFjdCgiRkQuQ3VzdG9tZXJzQWRtaW4iKSk7CgogICAgICAgICAgICBpZiAocGF5bWVudFR5cGUgPT0gMSkgewogICAgICAgICAgICAgICAgLy8gRVVSCiAgICAgICAgICAgICAgICBpZiAobXNnLnZhbHVlIDwgTUlOX1BSRU1JVU1fRVVSIHx8IG1zZy52YWx1ZSA+IE1BWF9QUkVNSVVNX0VVUikgewogICAgICAgICAgICAgICAgICAgIExvZ1BvbGljeURlY2xpbmVkKDAsICJJbnZhbGlkIHByZW1pdW0gdmFsdWUiKTsKICAgICAgICAgICAgICAgICAgICBGRF9MRy5zZW5kRnVuZHMobXNnLnNlbmRlciwgQWNjLlByZW1pdW0sIG1zZy52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocGF5bWVudFR5cGUgPT0gMikgewogICAgICAgICAgICAgICAgLy8gVVNECiAgICAgICAgICAgICAgICBpZiAobXNnLnZhbHVlIDwgTUlOX1BSRU1JVU1fVVNEIHx8IG1zZy52YWx1ZSA+IE1BWF9QUkVNSVVNX1VTRCkgewogICAgICAgICAgICAgICAgICAgIExvZ1BvbGljeURlY2xpbmVkKDAsICJJbnZhbGlkIHByZW1pdW0gdmFsdWUiKTsKICAgICAgICAgICAgICAgICAgICBGRF9MRy5zZW5kRnVuZHMobXNnLnNlbmRlciwgQWNjLlByZW1pdW0sIG1zZy52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocGF5bWVudFR5cGUgPT0gMykgewogICAgICAgICAgICAgICAgLy8gR0JQCiAgICAgICAgICAgICAgICBpZiAobXNnLnZhbHVlIDwgTUlOX1BSRU1JVU1fR0JQIHx8IG1zZy52YWx1ZSA+IE1BWF9QUkVNSVVNX0dCUCkgewogICAgICAgICAgICAgICAgICAgIExvZ1BvbGljeURlY2xpbmVkKDAsICJJbnZhbGlkIHByZW1pdW0gdmFsdWUiKTsKICAgICAgICAgICAgICAgICAgICBGRF9MRy5zZW5kRnVuZHMobXNnLnNlbmRlciwgQWNjLlByZW1pdW0sIG1zZy52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBmb3J3YXJkIHByZW1pdW0KICAgICAgICBGRF9MRy5yZWNlaXZlRnVuZHMudmFsdWUobXNnLnZhbHVlKShBY2MuUHJlbWl1bSk7CgoKICAgICAgICAvLyBkb24ndCBBY2NlcHQgZmxpZ2h0cyB3aXRoIGRlcGFydHVyZSB0aW1lIGVhcmxpZXIgdGhhbiBpbiAyNCBob3VycywKICAgICAgICAvLyBvciBhcnJpdmFsVGltZSBiZWZvcmUgZGVwYXJ0dXJlVGltZSwKICAgICAgICAvLyBvciBkZXBhcnR1cmVUaW1lIGFmdGVyIE1vbiwgMjYgU2VwIDIwMTYgMTI6MDA6MDAgR01UCiAgICAgICAgdWludCBkbXkgPSB0b1VuaXh0aW1lKF9kZXBhcnR1cmVZZWFyTW9udGhEYXkpOwoKLy8gLS0+IGRlYnVnLW1vZGUKLy8gICAgICAgICAgICBMb2dVaW50VGltZSgiTmV3UG9saWN5OiBkbXk6ICIsIGRteSk7Ci8vICAgICAgICAgICAgTG9nVWludFRpbWUoIk5ld1BvbGljeTogX2RlcGFydHVyZVRpbWU6ICIsIF9kZXBhcnR1cmVUaW1lKTsKLy8gPC0tIGRlYnVnLW1vZGUKCiAgICAgICAgaWYgKAogICAgICAgICAgICBfYXJyaXZhbFRpbWUgPCBfZGVwYXJ0dXJlVGltZSB8fAogICAgICAgICAgICBfYXJyaXZhbFRpbWUgPiBfZGVwYXJ0dXJlVGltZSArIE1BWF9GTElHSFRfRFVSQVRJT04gfHwKICAgICAgICAgICAgX2RlcGFydHVyZVRpbWUgPCBub3cgKyBNSU5fVElNRV9CRUZPUkVfREVQQVJUVVJFIHx8CiAgICAgICAgICAgIF9kZXBhcnR1cmVUaW1lID4gQ09OVFJBQ1RfREVBRF9MSU5FIHx8CiAgICAgICAgICAgIF9kZXBhcnR1cmVUaW1lIDwgZG15IHx8CiAgICAgICAgICAgIF9kZXBhcnR1cmVUaW1lID4gZG15ICsgMjQgaG91cnMgfHwKICAgICAgICAgICAgX2RlcGFydHVyZVRpbWUgPCBNSU5fREVQQVJUVVJFX0xJTSB8fAogICAgICAgICAgICBfZGVwYXJ0dXJlVGltZSA+IE1BWF9ERVBBUlRVUkVfTElNCiAgICAgICAgKSB7CiAgICAgICAgICAgIExvZ1BvbGljeURlY2xpbmVkKDAsICJJbnZhbGlkIGFycml2YWwvZGVwYXJ0dXJlIHRpbWUiKTsKICAgICAgICAgICAgRkRfTEcuc2VuZEZ1bmRzKG1zZy5zZW5kZXIsIEFjYy5QcmVtaXVtLCBtc2cudmFsdWUpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBieXRlczMyIHJpc2tJZCA9IEZEX0RCLmNyZWF0ZVVwZGF0ZVJpc2soX2NhcnJpZXJGbGlnaHROdW1iZXIsIF9kZXBhcnR1cmVZZWFyTW9udGhEYXksIF9hcnJpdmFsVGltZSk7CgogICAgICAgIHZhciAoY3VtdWxhdGVkV2VpZ2h0ZWRQcmVtaXVtLCBwcmVtaXVtTXVsdGlwbGllcikgPSBGRF9EQi5nZXRQcmVtaXVtRmFjdG9ycyhyaXNrSWQpOwoKICAgICAgICAvLyByb3VnaGx5IGNoZWNrLCB3aGV0aGVyIE1BWF9DVU1VTEFURURfV0VJR0hURURfUFJFTUlVTSB3aWxsIGJlIGV4Y2VlZGVkCiAgICAgICAgLy8gKHdlIEFjY2VwdCB0aGUgaW5BY2N1cmFjeSB0aGF0IHRoZSByZWFsIHJlbWFpbmluZyBwcmVtaXVtIGlzIDMlIGxvd2VyKSwKICAgICAgICAvLyBidXQgd2UgYXJlIGNvbnNlcnZhdGl2ZTsKICAgICAgICAvLyBpZiB0aGlzIGlzIHRoZSBmaXJzdCBwb2xpY3ksIHRoZSBsZWZ0IHNpZGUgd2lsbCBiZSAwCiAgICAgICAgaWYgKG1zZy52YWx1ZSAqIHByZW1pdW1NdWx0aXBsaWVyICsgY3VtdWxhdGVkV2VpZ2h0ZWRQcmVtaXVtID49IE1BWF9DVU1VTEFURURfV0VJR0hURURfUFJFTUlVTSkgewogICAgICAgICAgICBMb2dQb2xpY3lEZWNsaW5lZCgwLCAiQ2x1c3RlciByaXNrIik7CiAgICAgICAgICAgIEZEX0xHLnNlbmRGdW5kcyhtc2cuc2VuZGVyLCBBY2MuUHJlbWl1bSwgbXNnLnZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZiAoY3VtdWxhdGVkV2VpZ2h0ZWRQcmVtaXVtID09IDApIHsKICAgICAgICAgICAgLy8gYXQgdGhlIGZpcnN0IHBvbGljZSwgd2Ugc2V0IHIuY3VtdWxhdGVkV2VpZ2h0ZWRQcmVtaXVtIHRvIHRoZSBtYXguCiAgICAgICAgICAgIC8vIHRoaXMgcHJldmVudHMgZnVydGhlciBwb2xpY2VzIHRvIGJlIEFjY2VwdGVkLCB1bnRpbCB0aGUgY29ycmVjdAogICAgICAgICAgICAvLyB2YWx1ZSBpcyBjYWxjdWxhdGVkIGFmdGVyIHRoZSBmaXJzdCBjYWxsYmFjayBmcm9tIHRoZSBvcmFjbGUuCiAgICAgICAgICAgIEZEX0RCLnNldFByZW1pdW1GYWN0b3JzKHJpc2tJZCwgTUFYX0NVTVVMQVRFRF9XRUlHSFRFRF9QUkVNSVVNLCBwcmVtaXVtTXVsdGlwbGllcik7CiAgICAgICAgfQoKICAgICAgICB1aW50IHByZW1pdW0gPSBib29rQW5kQ2FsY1JlbWFpbmluZ1ByZW1pdW0oKTsKICAgICAgICB1aW50IHBvbGljeUlkID0gRkRfREIuY3JlYXRlUG9saWN5KG1zZy5zZW5kZXIsIHByZW1pdW0sIF9jdXJyZW5jeSwgX2N1c3RvbWVyRXh0ZXJuYWxJZCwgcmlza0lkKTsKCiAgICAgICAgaWYgKHByZW1pdW1NdWx0aXBsaWVyID4gMCkgewogICAgICAgICAgICBGRF9EQi5zZXRQcmVtaXVtRmFjdG9ycygKICAgICAgICAgICAgICAgIHJpc2tJZCwKICAgICAgICAgICAgICAgIGN1bXVsYXRlZFdlaWdodGVkUHJlbWl1bSArIHByZW1pdW0gKiBwcmVtaXVtTXVsdGlwbGllciwKICAgICAgICAgICAgICAgIHByZW1pdW1NdWx0aXBsaWVyCiAgICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICAvLyBub3cgd2UgaGF2ZSBzdWNjZXNzZnVsbHkgYXBwbGllZAogICAgICAgIEZEX0RCLnNldFN0YXRlKAogICAgICAgICAgICBwb2xpY3lJZCwKICAgICAgICAgICAgcG9saWN5U3RhdGUuQXBwbGllZCwKICAgICAgICAgICAgbm93LAogICAgICAgICAgICAiUG9saWN5IGFwcGxpZWQgYnkgY3VzdG9tZXIiCiAgICAgICAgKTsKCiAgICAgICAgTG9nUG9saWN5QXBwbGllZCgKICAgICAgICAgICAgcG9saWN5SWQsCiAgICAgICAgICAgIG1zZy5zZW5kZXIsCiAgICAgICAgICAgIF9jYXJyaWVyRmxpZ2h0TnVtYmVyLAogICAgICAgICAgICBwcmVtaXVtCiAgICAgICAgKTsKCiAgICAgICAgTG9nRXh0ZXJuYWwoCiAgICAgICAgICAgIHBvbGljeUlkLAogICAgICAgICAgICBtc2cuc2VuZGVyLAogICAgICAgICAgICBfY3VzdG9tZXJFeHRlcm5hbElkCiAgICAgICAgKTsKCiAgICAgICAgRkRfVVcuc2NoZWR1bGVVbmRlcndyaXRlT3JhY2xpemVDYWxsKHBvbGljeUlkLCBfY2FycmllckZsaWdodE51bWJlcik7CiAgICB9Cn0='.
	

]
