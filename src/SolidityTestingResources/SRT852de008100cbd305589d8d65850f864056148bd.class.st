Class {
	#name : #SRT852de008100cbd305589d8d65850f864056148bd,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT852de008100cbd305589d8d65850f864056148bd >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBPd25lZCBjb250cmFjdAovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjb250cmFjdCBDb250cm9sbGVkIHsKCiAgICBhZGRyZXNzIHB1YmxpYyBjb250cm9sbGVyOwoKICAgIGZ1bmN0aW9uIENvbnRyb2xsZWQoKSBwdWJsaWMgewogICAgICAgIGNvbnRyb2xsZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlDb250cm9sbGVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cm9sbGVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUNvbnRyb2xsZXIoYWRkcmVzcyBfbmV3Q29udHJvbGxlcikgcHVibGljIG9ubHlDb250cm9sbGVyIHsKICAgICAgICBjb250cm9sbGVyID0gX25ld0NvbnRyb2xsZXI7CiAgICB9Cn0KCi8vIFNhZmUgbWF0aHMsIGJvcnJvd2VkIGZyb20gT3BlblplcHBlbGluCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KbGlicmFyeSBTYWZlTWF0aCB7CgogICAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9Ci8vIHRva2VuUmVjaXBpZW50IGNvbnRyYWN0Ci8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KY29udHJhY3QgdG9rZW5SZWNpcGllbnQgewogICAgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90b2tlbiwgYnl0ZXMgX2V4dHJhRGF0YSkgcHVibGljOwp9CgovLyBzdGFuZGFyZCBFUkMyMCBUb2tlbiBpbnRlcmZhY2UKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjb250cmFjdCBFUkMyMFRva2VuIHsKICAgIC8qIFRoaXMgaXMgYSBzbGlnaHQgY2hhbmdlIHRvIHRoZSBFUkMyMCBiYXNlIHN0YW5kYXJkLgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7CiAgICBpcyByZXBsYWNlZCB3aXRoOgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBUaGlzIGF1dG9tYXRpY2FsbHkgY3JlYXRlcyBhIGdldHRlciBmdW5jdGlvbiBmb3IgdGhlIHRvdGFsU3VwcGx5LgogICAgVGhpcyBpcyBtb3ZlZCB0byB0aGUgYmFzZSBjb250cmFjdCBzaW5jZSBwdWJsaWMgZ2V0dGVyIGZ1bmN0aW9ucyBhcmUgbm90CiAgICBjdXJyZW50bHkgcmVjb2duaXNlZCBhcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgbWF0Y2hpbmcgYWJzdHJhY3QKICAgIGZ1bmN0aW9uIGJ5IHRoZSBjb21waWxlci4KICAgICovCiAgICAvLy8gdG90YWwgYW1vdW50IG9mIHRva2VucwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogICAgLy8vIEByZXR1cm4gVGhlIGJhbGFuY2UKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlcgogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCi8vIEFkZHJlc3NMaW1pdCBjb250cmFjdAovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnRyYWN0IEFkZHJlc3NMaW1pdCB7CiAgICBtb2RpZmllciBub3RDb250cmFjdEFkZHJlc3MoYWRkcmVzcyBfYWRkcikgewogICAgICAgIHJlcXVpcmUgKCFpc0NvbnRyYWN0QWRkcmVzcyhfYWRkcikpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGlzQ29udHJhY3RBZGRyZXNzKGFkZHJlc3MgX2FkZHIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICAgIHVpbnQyNTYgc2l6ZTsKICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgIHNpemUgOj0gZXh0Y29kZXNpemUoX2FkZHIpCiAgICAgICAgfQogICAgICAgIHJldHVybiBzaXplID4gMDsKICAgIH0KfQoKLy8gc3RhbmRhcmQgRVJDMjAgVG9rZW4KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjb250cmFjdCBzdGFuZGFyZFRva2VuIGlzIEVSQzIwVG9rZW4sIEFkZHJlc3NMaW1pdCB7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2FuY2VzOwogICAgYm9vbCBwdWJsaWMgdG9rZW5Gcm96ZW4gPSB0cnVlOwogICAgCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0aGF0J3MgYmFsYW5jZSBpcyBiZWluZyByZXF1ZXN0ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlIG9mIGBfb3duZXJgIGF0IHRoZSBjdXJyZW50IGJsb2NrCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoCiAgICAgICAgYWRkcmVzcyBfb3duZXIpIAogICAgICAgIGNvbnN0YW50IAogICAgICAgIHB1YmxpYyAKICAgICAgICByZXR1cm5zICh1aW50MjU2KSAKICAgIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBTZW5kIGBfdmFsdWVgIHRva2VucyB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoCiAgICAgICAgYWRkcmVzcyBfdG8sCiAgICAgICAgdWludDI1NiBfdmFsdWUpIAogICAgICAgIHB1YmxpYyAKICAgICAgICBub3RDb250cmFjdEFkZHJlc3MoX3RvKSAKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIAogICAgewogICAgICAgIHJlcXVpcmUgKCF0b2tlbkZyb3plbik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaHJvdyBpZiB0b2tlbiBpcyBmcm96ZW4KICAgICAgICByZXF1aXJlIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOyAgICAgICAgICAgLy8gVGhyb3cgaWYgc2VuZGVyIGhhcyBpbnN1ZmZpY2llbnQgYmFsYW5jZQogICAgICAgIHJlcXVpcmUgKGJhbGFuY2VzW190b10gKyBfdmFsdWUgPj0gYmFsYW5jZXNbX3RvXSk7ICAvLyBUaHJvdyBpZiBvd2VyZmxvdyBkZXRlY3RlZAogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAvLyBEZWR1Y3Qgc2VuZGVycyBiYWxhbmNlCiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCByZWNpdmVycyBiYWxhbmNlCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOyAgICAgICAgICAgICAgICAgIC8vIFJhaXNlIFRyYW5zZmVyIGV2ZW50CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucyBvbgogICAgLy8vICBpdHMgYmVoYWxmLiBUaGlzIGlzIGEgbW9kaWZpZWQgdmVyc2lvbiBvZiB0aGUgRVJDMjAgYXBwcm92ZSBmdW5jdGlvbgogICAgLy8vICB0byBiZSBhIGxpdHRsZSBiaXQgc2FmZXIKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsCiAgICBmdW5jdGlvbiBhcHByb3ZlKAogICAgICAgIGFkZHJlc3MgX3NwZW5kZXIsIAogICAgICAgIHVpbnQyNTYgX3ZhbHVlKSAKICAgICAgICBwdWJsaWMgCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSAKICAgIHsKICAgICAgICByZXF1aXJlICghdG9rZW5Gcm96ZW4pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhyb3cgaWYgdG9rZW4gaXMgZnJvemVuCiAgICAgICAgYWxsb3dhbmNlc1ttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7ICAgICAgICAgIC8vIFNldCBhbGxvd2FuY2UKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsgICAgICAgICAgICAgLy8gUmFpc2UgQXBwcm92YWwgZXZlbnQKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzZW5kIGBfdmFsdWVgIHRva2VucyBvbgogICAgLy8vICBpdHMgYmVoYWxmLCBhbmQgdGhlbiBhIGZ1bmN0aW9uIGlzIHRyaWdnZXJlZCBpbiB0aGUgY29udHJhY3QgdGhhdCBpcwogICAgLy8vICBiZWluZyBhcHByb3ZlZCwgYF9zcGVuZGVyYC4gVGhpcyBhbGxvd3MgdXNlcnMgdG8gdXNlIHRoZWlyIHRva2VucyB0bwogICAgLy8vICBpbnRlcmFjdCB3aXRoIGNvbnRyYWN0cyBpbiBvbmUgZnVuY3Rpb24gY2FsbCBpbnN0ZWFkIG9mIHR3bwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgY29udHJhY3QgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgdGhlIGZ1bmN0aW9uIGNhbGwgd2FzIHN1Y2Nlc3NmdWwKICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKAogICAgICAgIGFkZHJlc3MgX3NwZW5kZXIsIAogICAgICAgIHVpbnQyNTYgX3ZhbHVlLCAKICAgICAgICBieXRlcyBfZXh0cmFEYXRhKSAKICAgICAgICBwdWJsaWMgCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSAKICAgIHsKICAgICAgICByZXF1aXJlICghdG9rZW5Gcm96ZW4pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhyb3cgaWYgdG9rZW4gaXMgZnJvemVuCiAgICAgICAgdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsgICAgICAgICAgICAgIC8vIENhc3Qgc3BlbmRlciB0byB0b2tlblJlY2lwaWVudCBjb250cmFjdAogICAgICAgIGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgYXBwcm92YWwgdG8gY29udHJhY3QgZm9yIF92YWx1ZQogICAgICAgIHNwZW5kZXIucmVjZWl2ZUFwcHJvdmFsKG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSk7ICAvLyBSYWlzZSBtZXRob2Qgb24gX3NwZW5kZXIgY29udHJhY3QKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBTZW5kIGBfdmFsdWVgIHRva2VucyB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdAogICAgLy8vICBpcyBhcHByb3ZlZCBieSBgX2Zyb21gCiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIGhvbGRpbmcgdGhlIHRva2VucyBiZWluZyB0cmFuc2ZlcnJlZAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oCiAgICAgICAgYWRkcmVzcyBfZnJvbSwgCiAgICAgICAgYWRkcmVzcyBfdG8sIAogICAgICAgIHVpbnQyNTYgX3ZhbHVlKSAKICAgICAgICBwdWJsaWMgCiAgICAgICAgbm90Q29udHJhY3RBZGRyZXNzKF90bykKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIAogICAgewogICAgICAgIHJlcXVpcmUgKCF0b2tlbkZyb3plbik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaHJvdyBpZiB0b2tlbiBpcyBmcm96ZW4KICAgICAgICByZXF1aXJlIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKTsgICAgICAgICAgICAgICAgLy8gVGhyb3cgaWYgc2VuZGVyIGRvZXMgbm90IGhhdmUgZW5vdWdoIGJhbGFuY2UKICAgICAgICByZXF1aXJlIChiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID49IGJhbGFuY2VzW190b10pOyAgLy8gVGhyb3cgaWYgb3ZlcmZsb3cgZGV0ZWN0ZWQKICAgICAgICByZXF1aXJlIChfdmFsdWUgPD0gYWxsb3dhbmNlc1tfZnJvbV1bbXNnLnNlbmRlcl0pOyAgLy8gVGhyb3cgaWYgeW91IGRvIG5vdCBoYXZlIGFsbG93YW5jZQogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWR1Y3Qgc2VuZGVycyBiYWxhbmNlCiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCByZWNpcGllbnQgYmFsYW5jZQogICAgICAgIGFsbG93YW5jZXNbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsgICAgICAgICAgICAvLyBEZWR1Y3QgYWxsb3dhbmNlIGZvciB0aGlzIGFkZHJlc3MKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgVHJhbnNmZXIgZXZlbnQKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBUaGlzIGZ1bmN0aW9uIG1ha2VzIGl0IGVhc3kgdG8gcmVhZCB0aGUgYGFsbG93YW5jZXNbXWAgbWFwCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCB0aGF0IG93bnMgdGhlIHRva2VuCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgb2YgX293bmVyIHRoYXQgX3NwZW5kZXIgaXMgYWxsb3dlZCB0byBzcGVuZAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKAogICAgICAgIGFkZHJlc3MgX293bmVyLCAKICAgICAgICBhZGRyZXNzIF9zcGVuZGVyKSAKICAgICAgICBjb25zdGFudCAKICAgICAgICBwdWJsaWMgCiAgICAgICAgcmV0dXJucyAodWludDI1NikgCiAgICB7CiAgICAgICAgcmV0dXJuIGFsbG93YW5jZXNbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cgp9Cgpjb250cmFjdCBVc2VDaGFpblRva2VuIGlzIHN0YW5kYXJkVG9rZW4sIENvbnRyb2xsZWQgewogICAgCiAgICAvLy8gICAgICAgICAgc3RhcnRDcm93ZHNhbGVUaW1lICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BDcm93ZHNhbGVUaW1lICAgICAgICAgIAogICAgLy8vICAgICAgICAgICAgICAgICAgfDxwcml2YXRlIHBsYWNlbWVudD58ICAgICB8PHByaXZhdGUgcHJlc2FsZT58ICAgICAgICAgfDxwdWJsaWMgc2FsZT58CiAgICAvLy8gICAgICAgICAgICAgICBvLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLW8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1vCiAgICAvLy8gICAgICAgICAgICAgICAgICAgICAgPDEwJSBPRkY+ICAgICAgICAgICAgICAgIDw1JSAgT0ZGPiAgIAogICAgLy8vICBwYXltZW50IGFjY2VwdGVkOiAgIDxCVEMvRVRIPiAgICAgICAgICAgICAgICA8QlRDL0VUSD4gICAgICAgICAgICAgICAgPEJUQy9FVEg+IAogICAgCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICBzdHJpbmcgY29uc3RhbnQgcHVibGljIG5hbWUgICA9ICJVc2VDaGFpblRva2VuIjsKICAgIHN0cmluZyBjb25zdGFudCBwdWJsaWMgc3ltYm9sID0gIlVTVCI7CiAgICB1aW50IGNvbnN0YW50IHB1YmxpYyBkZWNpbWFscyA9IDE4OwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5ID0gMDsKICAgIHVpbnQyNTYgY29uc3RhbnQgcHVibGljIHRvcFRvdGFsU3VwcGx5ID0gMioxMCoqNyoxMCoqZGVjaW1hbHM7CiAgICB1aW50IHB1YmxpYyBjb3Jwb3JhdGVTdXBwbHkgICAgICAgID0gcGVyY2VudCh0b3BUb3RhbFN1cHBseSwgMjApOwogICAgdWludCBwdWJsaWMgcHJpdmF0ZVBsYWNlbWVudFN1cHBseSA9IHBlcmNlbnQodG9wVG90YWxTdXBwbHksIDgpOwogICAgdWludCBwdWJsaWMgcHJpdmF0ZVByZXNhbGVTdXBwbHkgICA9IHBlcmNlbnQodG9wVG90YWxTdXBwbHksIDEyKTsKICAgIHVpbnQgcHVibGljIHB1YmxpY1NhbGVTdXBwbHkgICAgICAgPSBwZXJjZW50KHRvcFRvdGFsU3VwcGx5LCAxMCk7CiAgICB1aW50IHB1YmxpYyBlY29GdW5kU3VwcGx5ICAgICAgICAgID0gcGVyY2VudCh0b3BUb3RhbFN1cHBseSwgNTApOwogICAgdWludCBwdWJsaWMgc29mdENhcCAgICAgICAgICAgICAgICA9IHBlcmNlbnQodG9wVG90YWxTdXBwbHksIDYpOwogICAgdWludCBwdWJsaWMgc3RhcnRDcm93ZHNhbGVUaW1lOwogICAgdWludCBwdWJsaWMgc3RvcENyb3dkc2FsZVRpbWU7CiAgICBhZGRyZXNzIHB1YmxpYyB3YWxsZXRBZGRyZXNzOwogICAgYm9vbCAgICBwdWJsaWMgZmluYWxpemVkOyAKICAgIAogICAgLy8vIEBub3RpY2UgU2V2ZXJhbCBzdGFnZXMKICAgIGVudW0gc3RhZ2VBdCB7CiAgICAgICAgbm90U3RhcnQsCiAgICAgICAgcHJpdmF0ZVBsYWNlbWVudCwKICAgICAgICBwcml2YXRlUHJlc2FsZSwKICAgICAgICBwdWJsaWNTYWxlLAogICAgICAgIGZpbmFsU3RhdGUKICAgIH0KICAgIAogICAgLy8vIEBub3RpY2Ugb25seSBXYWxsZXQgYWRkcmVzcwogICAgbW9kaWZpZXIgb25seVdhbGxldEFkZHIoKSB7CiAgICAgICAgcmVxdWlyZSAod2FsbGV0QWRkcmVzcyA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICAvLy8gQGRldiBGYWxsYmFjayB0byBjYWxsaW5nIGRlcG9zaXQgd2hlbiBldGhlciBpcyBzZW50IGRpcmVjdGx5IHRvIGNvbnRyYWN0LgogICAgZnVuY3Rpb24oKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSghZmluYWxpemVkKTsKICAgICAgICBkZXBvc2l0VG9rZW4obXNnLnZhbHVlKTsKICAgICAgICBpZih0aGlzLmJhbGFuY2UgPj0gMTAgZXRoZXIpIHsKICAgICAgICAgICAgd2FsbGV0QWRkcmVzcy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy8vIEBub3RpY2UgSW5pdGlhbCBmdW5jdGlvbgogICAgZnVuY3Rpb24gVXNlQ2hhaW5Ub2tlbih1aW50IF9zdGFydENyb3dkc2FsZVRpbWUsIHVpbnQgX3N0b3BDcm93ZHNhbGVUaW1lLCBhZGRyZXNzIF93YWxsZXRBZGRyZXNzKSBwdWJsaWMgewogICAgICAgIGNvbnRyb2xsZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHN0YXJ0Q3Jvd2RzYWxlVGltZSA9IF9zdGFydENyb3dkc2FsZVRpbWU7CiAgICAgICAgc3RvcENyb3dkc2FsZVRpbWUgPSBfc3RvcENyb3dkc2FsZVRpbWU7CiAgICAgICAgd2FsbGV0QWRkcmVzcyA9IF93YWxsZXRBZGRyZXNzOwogICAgfQogICAgCiAgICAvLy8gQGRldiBCdXlzIHRva2VucyB3aXRoIEV0aGVyLgogICAgZnVuY3Rpb24gZGVwb3NpdFRva2VuKHVpbnQgX3ZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPj0gbWluaW1hbFJlcXVpcmUoKSk7CiAgICAgICAgdWludCB0b2tlbkFsbG9jID0gYnV5UHJpY2VBdChleGNoYW5nZVByaWNlICogX3ZhbHVlKTsKICAgICAgICByZXF1aXJlICh0b2tlbkFsbG9jICE9IDApOwogICAgICAgIG1pbnRUb2tlbnMobXNnLnNlbmRlciwgdG9rZW5BbGxvYyk7CiAgICB9CgogICAgLy8vIEBkZXYgSXNzdWUgbmV3IHRva2VucwogICAgZnVuY3Rpb24gbWludFRva2VucyhhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZSAoYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPj0gYmFsYW5jZXNbX3RvXSk7ICAgICAgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkgPD0gdG9wVG90YWxTdXBwbHkpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsgICAgICAgICAgICAgLy8gU2V0IG1pbnRlZCBjb2lucyB0byB0YXJnZXQKICAgICAgICBUcmFuc2ZlcigweDAsIF90bywgX2Ftb3VudCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBUcmFuc2ZlciBldmVudCBmcm9tIDB4MAogICAgfQogICAgCiAgICAvLy8gQG5vdGljZSBNaW5pbWFsIHJlcXVpcmVtZW50CiAgICBmdW5jdGlvbiBtaW5pbWFsUmVxdWlyZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIGlmIChzdGFnZU5vdygpID09IHN0YWdlQXQucHVibGljU2FsZSkgewogICAgICAgICAgICByZXR1cm4gMSBldGhlcjsKICAgICAgICB9CiAgICAgICAgaWYgKHN0YWdlTm93KCkgPT0gc3RhZ2VBdC5wcml2YXRlUHJlc2FsZSkgewogICAgICAgICAgICByZXR1cm4gMTAgZXRoZXI7CiAgICAgICAgfQogICAgICAgIGlmIChzdGFnZU5vdygpID09IHN0YWdlQXQucHJpdmF0ZVBsYWNlbWVudCkgewogICAgICAgICAgICByZXR1cm4gMTAwIGV0aGVyOwogICAgICAgIH0KICAgIH0KICAgIAogICAgdWludCBwdWJsaWMgcHVibGljQWxsb2NhdGluZ1Rva2VuOwogICAgdWludCBwdWJsaWMgcHJpdmF0ZVBsYWNlbWVudEFsbG9jYXRpbmdUb2tlbjsKICAgIHVpbnQgcHVibGljIHByaXZhdGVQcmVzYWxlQWxsb2NhdGluZ1Rva2VuOwogICAgCiAgICAvLy8gQG5vdGljZSBDYWxjdWxhdGUgZXhjaGFuZ2U6CiAgICAvLy8gcHJpdmF0ZSBQbGFjZW1lbnQgU3RhZ2UgOiAxMCUgT0ZGCiAgICAvLy8gcHJpdmF0ZSBQcmVzYWxlIFN0YWdlICAgOiA1JSBPRkYKICAgIGZ1bmN0aW9uIGJ1eVByaWNlQXQodWludDI1NiBfdG9rZW5BbGxvY1dpdGhvdXREaXNjb3VudCkgaW50ZXJuYWwgcmV0dXJucyh1aW50KSB7CiAgICAgICAgaWYgKHN0YWdlTm93KCkgPT0gc3RhZ2VBdC5wdWJsaWNTYWxlKSB7CiAgICAgICAgICAgIHB1YmxpY0FsbG9jYXRpbmdUb2tlbiA9IHB1YmxpY0FsbG9jYXRpbmdUb2tlbi5hZGQoX3Rva2VuQWxsb2NXaXRob3V0RGlzY291bnQpOwogICAgICAgICAgICByZXF1aXJlKHB1YmxpY0FsbG9jYXRpbmdUb2tlbiA8PSBwdWJsaWNTYWxlU3VwcGx5KTsKICAgICAgICAgICAgcmV0dXJuIF90b2tlbkFsbG9jV2l0aG91dERpc2NvdW50OwogICAgICAgIH0KICAgICAgICBpZiAoc3RhZ2VOb3coKSA9PSBzdGFnZUF0LnByaXZhdGVQcmVzYWxlKSB7CiAgICAgICAgICAgIHVpbnQgX3ByaXZhdGVQcmVzYWxlQWxsb2MgPSBfdG9rZW5BbGxvY1dpdGhvdXREaXNjb3VudCArIHBlcmNlbnQoX3Rva2VuQWxsb2NXaXRob3V0RGlzY291bnQsIDUpOwogICAgICAgICAgICBwcml2YXRlUHJlc2FsZUFsbG9jYXRpbmdUb2tlbiA9IHByaXZhdGVQcmVzYWxlQWxsb2NhdGluZ1Rva2VuLmFkZChfcHJpdmF0ZVByZXNhbGVBbGxvYyk7CiAgICAgICAgICAgIHJlcXVpcmUocHJpdmF0ZVByZXNhbGVBbGxvY2F0aW5nVG9rZW4gPD0gcHJpdmF0ZVByZXNhbGVTdXBwbHkpOwogICAgICAgICAgICByZXR1cm4gX3ByaXZhdGVQcmVzYWxlQWxsb2M7CiAgICAgICAgfQogICAgICAgIGlmIChzdGFnZU5vdygpID09IHN0YWdlQXQucHJpdmF0ZVBsYWNlbWVudCkgewogICAgICAgICAgICB1aW50IF9wcml2YXRlUGxhY2VtZW50QWxsb2MgPSBfdG9rZW5BbGxvY1dpdGhvdXREaXNjb3VudCArIHBlcmNlbnQoX3Rva2VuQWxsb2NXaXRob3V0RGlzY291bnQsIDEwKTsKICAgICAgICAgICAgcHJpdmF0ZVBsYWNlbWVudEFsbG9jYXRpbmdUb2tlbiA9IHByaXZhdGVQbGFjZW1lbnRBbGxvY2F0aW5nVG9rZW4uYWRkKF9wcml2YXRlUGxhY2VtZW50QWxsb2MpOwogICAgICAgICAgICByZXF1aXJlKHByaXZhdGVQbGFjZW1lbnRBbGxvY2F0aW5nVG9rZW4gPD0gcHJpdmF0ZVBsYWNlbWVudFN1cHBseSk7CiAgICAgICAgICAgIHJldHVybiBfcHJpdmF0ZVBsYWNlbWVudEFsbG9jOwogICAgICAgIH0KICAgICAgICBpZiAoc3RhZ2VOb3coKSA9PSBzdGFnZUF0Lm5vdFN0YXJ0KSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICBpZiAoc3RhZ2VOb3coKSA9PSBzdGFnZUF0LmZpbmFsU3RhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvLy8gQGRldiBDaGVjayB0aGUgY3VycmVudCBzdGFnZQogICAgZnVuY3Rpb24gc3RhZ2VOb3coKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChzdGFnZUF0KSB7CiAgICAgICAgaWYgKGdldFRpbWVzdGFtcCgpIDwgc3RhcnRDcm93ZHNhbGVUaW1lKSB7CiAgICAgICAgICAgIHJldHVybiBzdGFnZUF0Lm5vdFN0YXJ0OwogICAgICAgIH0KICAgICAgICBlbHNlIGlmKGdldFRpbWVzdGFtcCgpIDwgc3RhcnRDcm93ZHNhbGVUaW1lICsgMjcgZGF5cykgewogICAgICAgICAgICByZXR1cm4gc3RhZ2VBdC5wcml2YXRlUGxhY2VtZW50OwogICAgICAgIH0KICAgICAgICBlbHNlIGlmKGdldFRpbWVzdGFtcCgpIDwgc3RhcnRDcm93ZHNhbGVUaW1lICsgNzEgZGF5cykgewogICAgICAgICAgICByZXR1cm4gc3RhZ2VBdC5wcml2YXRlUHJlc2FsZTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZihnZXRUaW1lc3RhbXAoKSA8IHN0b3BDcm93ZHNhbGVUaW1lKSB7CiAgICAgICAgICAgIHJldHVybiBzdGFnZUF0LnB1YmxpY1NhbGU7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gc3RhZ2VBdC5maW5hbFN0YXRlOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy8vIEBkZXYgY2FsY3V0ZSB0aGUgdG9rZW5zCiAgICBmdW5jdGlvbiBwZXJjZW50KHVpbnQgX3Rva2VuLCB1aW50IF9wZXJjZW50YWdlKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gX3BlcmNlbnRhZ2UubXVsKF90b2tlbikuZGl2KDEwMCk7CiAgICB9CiAgICAKICAgIHVpbnQgcHVibGljIGV4Y2hhbmdlUHJpY2UgPSA5MDsKICAgIAogICAgLy8vIEBkZXYgU2V0IGV4Y2hhbmdlIFByaWNlCiAgICBmdW5jdGlvbiBzZXRFeGNoYW5nZVByaWNlKCB1aW50IF9wcmljZSkgcHVibGljIG9ubHlDb250cm9sbGVyIHJldHVybnModWludCkgewogICAgICAgIGV4Y2hhbmdlUHJpY2UgPSBfcHJpY2U7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IEdldCBjdXJyZW50IHRpbWVzdGFtcAogICAgZnVuY3Rpb24gZ2V0VGltZXN0YW1wKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIG5vdzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gd2l0aERyYXcoKSBwdWJsaWMgcGF5YWJsZSBvbmx5Q29udHJvbGxlciB7CiAgICAgICAgcmVxdWlyZSAod2FsbGV0QWRkcmVzcyAhPSBhZGRyZXNzKDApKTsKICAgICAgICB3YWxsZXRBZGRyZXNzLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CiAgICAKICAgIC8vLyBAbm90aWNlIHVuZnJlZXplIHRva2VuIHRyYW5zZmVyCiAgICBmdW5jdGlvbiB1bmZyZWV6ZVRva2VuVHJhbnNmZXIoYm9vbCBfZnJlZXplKSBwdWJsaWMgb25seUNvbnRyb2xsZXIgewogICAgICAgIHRva2VuRnJvemVuID0gIV9mcmVlemU7CiAgICB9CiAgICAKICAgIC8vLyBAbm90aWNlIG9ubHkgd2FsbGV0IGFkZHJlc3MgY2FuIHNldCBuZXcgd2FsbGV0IGFkZHJlc3MKICAgIGZ1bmN0aW9uIHNldFdhbGxldEFkZHJlc3MoYWRkcmVzcyBfd2FsbGV0QWRkcmVzcykgcHVibGljIG9ubHlXYWxsZXRBZGRyIHsKICAgICAgICB3YWxsZXRBZGRyZXNzID0gX3dhbGxldEFkZHJlc3M7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IGFsbG9jYXRlIHByaXZhdGUgc3RhZ2UgdG9rZW5zCiAgICBmdW5jdGlvbiBhbGxvY2F0ZVRva2VucyhhZGRyZXNzW10gX293bmVycywgdWludDI1NltdIF92YWx1ZXMpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICAgICAgcmVxdWlyZSAoX293bmVycy5sZW5ndGggPT0gX3ZhbHVlcy5sZW5ndGgpOwogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgX293bmVycy5sZW5ndGggOyBpKyspewogICAgICAgICAgICBhZGRyZXNzIG93bmVyID0gX293bmVyc1tpXTsKICAgICAgICAgICAgdWludCB2YWx1ZSA9IF92YWx1ZXNbaV07CiAgICAgICAgICAgIG1pbnRUb2tlbnMob3duZXIsIHZhbHVlKTsKICAgICAgICB9CiAgICB9CiAgICAKCiAgICBmdW5jdGlvbiBhbGxvY2F0ZUNvcnBvcmF0ZVRva2VuKGFkZHJlc3MgX2NvckFjY291bnQsIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIG9ubHlDb250cm9sbGVyIHsKICAgICAgICByZXF1aXJlKF9jb3JBY2NvdW50ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2NvckFjY291bnRdICsgX2Ftb3VudCA8PSBjb3Jwb3JhdGVTdXBwbHkpOwogICAgICAgIG1pbnRUb2tlbnMoX2NvckFjY291bnQsIF9hbW91bnQpOwogICAgfQogICAgCiAgICB1aW50IHB1YmxpYyBlY29GdW5kaW5nU3VwcGx5OwogICAgCiAgICBmdW5jdGlvbiBhbGxvY2F0ZUVjb0Z1bmRUb2tlbihhZGRyZXNzW10gX293bmVycywgdWludDI1NltdIF92YWx1ZXMpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICAgICAgcmVxdWlyZSAoX293bmVycy5sZW5ndGggPT0gX3ZhbHVlcy5sZW5ndGgpOwogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgX293bmVycy5sZW5ndGggOyBpKyspewogICAgICAgICAgICBhZGRyZXNzIG93bmVyID0gX293bmVyc1tpXTsKICAgICAgICAgICAgdWludDI1NiB2YWx1ZSA9IF92YWx1ZXNbaV07CiAgICAgICAgICAgIGVjb0Z1bmRpbmdTdXBwbHkgPSBlY29GdW5kaW5nU3VwcGx5LmFkZCh2YWx1ZSk7CiAgICAgICAgICAgIHJlcXVpcmUoZWNvRnVuZGluZ1N1cHBseSA8PSBlY29GdW5kU3VwcGx5KTsKICAgICAgICAgICAgbWludFRva2Vucyhvd25lciwgdmFsdWUpOwogICAgICAgIH0KICAgIH0KICAgICAgICAKICAgIC8vLyBAbm90aWNlIGZpbmFsaXplCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICAgICAgLy8gb25seSBhZnRlciBjbG9zZWQgc3RhZ2UKICAgICAgICByZXF1aXJlKHN0YWdlTm93KCkgPT0gc3RhZ2VBdC5maW5hbFN0YXRlKTsgICAgIAogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkgKyBlY29GdW5kU3VwcGx5ID49IHNvZnRDYXApOwogICAgICAgIGZpbmFsaXplZCA9IHRydWU7CiAgICB9CiAgICAKfQ=='.
	

]
