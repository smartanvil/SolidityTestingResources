Class {
	#name : #SRTb9538e1c5dcf080a77e155920d669b849278fd72,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb9538e1c5dcf080a77e155920d669b849278fd72 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CiAgZXZlbnQgUGF1c2UoKTsKICBldmVudCBVbnBhdXNlKCk7CgogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBub3QgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gdHJ1ZTsKICAgIFBhdXNlKCk7CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgKi8KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogIH0KfQoKCmNvbnRyYWN0IENvbnRhY3RhYmxlIGlzIE93bmFibGV7CgogICAgc3RyaW5nIHB1YmxpYyBjb250YWN0SW5mb3JtYXRpb247CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgb3duZXIgdG8gc2V0IGEgc3RyaW5nIHdpdGggdGhlaXIgY29udGFjdCBpbmZvcm1hdGlvbi4KICAgICAqIEBwYXJhbSBpbmZvIFRoZSBjb250YWN0IGluZm9ybWF0aW9uIHRvIGF0dGFjaCB0byB0aGUgY29udHJhY3QuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldENvbnRhY3RJbmZvcm1hdGlvbihzdHJpbmcgaW5mbykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgIGNvbnRhY3RJbmZvcm1hdGlvbiA9IGluZm87CiAgICAgfQp9CgoKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgTG9ja2FibGVUb2tlbiBpcyBFUkMyMCB7CiAgICBmdW5jdGlvbiBhZGRUb1RpbWVMb2NrZWRMaXN0KGFkZHJlc3MgYWRkcikgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IFByaWNpbmdTdHJhdGVneSB7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogICAgdWludFs2XSBwdWJsaWMgbGltaXRzOwogICAgdWludFs2XSBwdWJsaWMgcmF0ZXM7CgogICAgZnVuY3Rpb24gUHJpY2luZ1N0cmF0ZWd5KAogICAgICAgIHVpbnRbNl0gX2xpbWl0cywKICAgICAgICB1aW50WzZdIF9yYXRlcwogICAgKSBwdWJsaWMgCiAgICB7CiAgICAgICAgcmVxdWlyZShfbGltaXRzLmxlbmd0aCA9PSBfcmF0ZXMubGVuZ3RoKTsKICAgICAgICAKICAgICAgICBsaW1pdHMgPSBfbGltaXRzOwogICAgICAgIHJhdGVzID0gX3JhdGVzOwogICAgfQoKICAgIC8qKiBJbnRlcmZhY2UgZGVjbGFyYXRpb24uICovCiAgICBmdW5jdGlvbiBpc1ByaWNpbmdTdHJhdGVneSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqIENhbGN1bGF0ZSB0aGUgY3VycmVudCBwcmljZSBmb3IgYnV5IGluIGFtb3VudC4gKi8KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVRva2VuQW1vdW50KHVpbnQgd2VpQW1vdW50LCB1aW50IHRva2Vuc1NvbGQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHRva2VuQW1vdW50KSB7CiAgICAgICAgdWludCByYXRlID0gMDsKCiAgICAgICAgZm9yICh1aW50OCBpID0gMDsgaSA8IGxpbWl0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAodG9rZW5zU29sZCA+PSBsaW1pdHNbaV0pIHsKICAgICAgICAgICAgICAgIHJhdGUgPSByYXRlc1tpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHdlaUFtb3VudC5tdWwocmF0ZSk7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIFByZWljbwogKiBAZGV2IFByZWljbyBpcyBhIGNvbnRyYWN0IGZvciBtYW5hZ2luZyBhIHRva2VuIGNyb3dkc2FsZS4KICogUHJlaWNvcyBoYXZlIGEgc3RhcnQgYW5kIGVuZCB0aW1lc3RhbXBzLCB3aGVyZSBpbnZlc3RvcnMgY2FuIG1ha2UKICogdG9rZW4gcHVyY2hhc2VzIGFuZCB0aGUgY3Jvd2RzYWxlIHdpbGwgYXNzaWduIHRoZW0gdG9rZW5zIGJhc2VkCiAqIG9uIGEgdG9rZW4gcGVyIEVUSCByYXRlLiBGdW5kcyBjb2xsZWN0ZWQgYXJlIGZvcndhcmRlZCB0byBhIHdhbGxldAogKiBhcyB0aGV5IGFycml2ZS4KICovCmNvbnRyYWN0IFByZWljbyBpcyBQYXVzYWJsZSwgQ29udGFjdGFibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgCiAgICAvLyBUaGUgdG9rZW4gYmVpbmcgc29sZAogICAgTG9ja2FibGVUb2tlbiBwdWJsaWMgdG9rZW47CiAgCiAgICAvLyBzdGFydCBhbmQgZW5kIHRpbWVzdGFtcHMgd2hlcmUgaW52ZXN0bWVudHMgYXJlIGFsbG93ZWQgKGJvdGggaW5jbHVzaXZlKQogICAgdWludCBwdWJsaWMgc3RhcnRUaW1lOwogICAgdWludCBwdWJsaWMgZW5kVGltZTsKICAKICAgIC8vIGFkZHJlc3Mgd2hlcmUgZnVuZHMgYXJlIGNvbGxlY3RlZAogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwogIAogICAgLy8gdGhlIGNvbnRyYWN0LCB3aGljaCBkZXRlcm1pbmUgaG93IG1hbnkgdG9rZW4gdW5pdHMgYSBidXllciBnZXRzIHBlciB3ZWkKICAgIFByaWNpbmdTdHJhdGVneSBwdWJsaWMgcHJpY2luZ1N0cmF0ZWd5OwogIAogICAgLy8gYW1vdW50IG9mIHJhaXNlZCBtb25leSBpbiB3ZWkKICAgIHVpbnQgcHVibGljIHdlaVJhaXNlZDsKCiAgICAvLyBhbW91bnQgb2YgdG9rZW5zIHRoYXQgd2FzIHNvbGQgb24gdGhlIGNyb3dkc2FsZQogICAgdWludCBwdWJsaWMgdG9rZW5zU29sZDsKCiAgICAvLyBtYXhpbXVtIGFtb3VudCBvZiB3ZWkgaW4gdG90YWwsIHRoYXQgY2FuIGJlIGludmVzdGVkCiAgICB1aW50IHB1YmxpYyB3ZWlNYXhpbXVtR29hbDsKCiAgICAvLyBpZiB3ZWlNaW5pbXVtR29hbCB3aWxsIG5vdCBiZSByZWFjaGVkIHRpbGwgZW5kVGltZSwgaW52ZXN0b3JzIHdpbGwgYmUgYWJsZSB0byByZWZ1bmQgRVRICiAgICB1aW50IHB1YmxpYyB3ZWlNaW5pbXVtR29hbDsKCiAgICAvLyBIb3cgbWFueSBkaXN0aW5jdCBhZGRyZXNzZXMgaGF2ZSBpbnZlc3RlZAogICAgdWludCBwdWJsaWMgaW52ZXN0b3JDb3VudDsKCiAgICAvLyBob3cgbXVjaCB3ZWkgd2UgaGF2ZSByZXR1cm5lZCBiYWNrIHRvIHRoZSBjb250cmFjdCBhZnRlciBhIGZhaWxlZCBjcm93ZGZ1bmQKICAgIHVpbnQgcHVibGljIGxvYWRlZFJlZnVuZDsKCiAgICAvLyBob3cgbXVjaCB3ZWkgd2UgaGF2ZSBnaXZlbiBiYWNrIHRvIGludmVzdG9ycwogICAgdWludCBwdWJsaWMgd2VpUmVmdW5kZWQ7CgogICAgLy9Ib3cgbXVjaCBFVEggZWFjaCBhZGRyZXNzIGhhcyBpbnZlc3RlZCB0byB0aGlzIGNyb3dkc2FsZQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgaW52ZXN0ZWRBbW91bnRPZjsKCiAgICAvLyBBZGRyZXNzZXMgdGhhdCBhcmUgYWxsb3dlZCB0byBpbnZlc3QgYmVmb3JlIElDTyBvZmZpY2FsIG9wZW5zCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBlYXJseVBhcnRpY2lwYW50V2hpdGVsaXN0OwogIAogICAgLyoqCiAgICAgKiBldmVudCBmb3IgdG9rZW4gcHVyY2hhc2UgbG9nZ2luZwogICAgICogQHBhcmFtIHB1cmNoYXNlciB3aG8gcGFpZCBmb3IgdGhlIHRva2VucwogICAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IHdobyBnb3QgdGhlIHRva2VucwogICAgICogQHBhcmFtIHZhbHVlIHdlaXMgcGFpZCBmb3IgcHVyY2hhc2UKICAgICAqIEBwYXJhbSB0b2tlbkFtb3VudCBhbW91bnQgb2YgdG9rZW5zIHB1cmNoYXNlZAogICAgICovCiAgICBldmVudCBUb2tlblB1cmNoYXNlKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LAogICAgICAgIHVpbnQgdmFsdWUsCiAgICAgICAgdWludCB0b2tlbkFtb3VudAogICAgKTsKCiAgICAvLyBhIHJlZnVuZCB3YXMgcHJvY2Vzc2VkIGZvciBhbiBpbnZlc3RvcgogICAgZXZlbnQgUmVmdW5kKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQgd2VpQW1vdW50KTsKCiAgICBmdW5jdGlvbiBQcmVpY28oCiAgICAgICAgdWludCBfc3RhcnRUaW1lLAogICAgICAgIHVpbnQgX2VuZFRpbWUsCiAgICAgICAgUHJpY2luZ1N0cmF0ZWd5IF9wcmljaW5nU3RyYXRlZ3ksCiAgICAgICAgTG9ja2FibGVUb2tlbiBfdG9rZW4sCiAgICAgICAgYWRkcmVzcyBfd2FsbGV0LAogICAgICAgIHVpbnQgX3dlaU1heGltdW1Hb2FsLAogICAgICAgIHVpbnQgX3dlaU1pbmltdW1Hb2FsLAogICAgICAgIHVpbnQgX3Rva2Vuc1NvbGQKICAgICkgewogICAgICAgIHJlcXVpcmUoX3N0YXJ0VGltZSA+PSBub3cpOwogICAgICAgIHJlcXVpcmUoX2VuZFRpbWUgPj0gX3N0YXJ0VGltZSk7CiAgICAgICAgcmVxdWlyZShfcHJpY2luZ1N0cmF0ZWd5LmlzUHJpY2luZ1N0cmF0ZWd5KCkpOwogICAgICAgIHJlcXVpcmUoYWRkcmVzcyhfdG9rZW4pICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfd2FsbGV0ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfd2VpTWF4aW11bUdvYWwgPiAwKTsKICAgICAgICByZXF1aXJlKF93ZWlNaW5pbXVtR29hbCA+IDApOwoKICAgICAgICBzdGFydFRpbWUgPSBfc3RhcnRUaW1lOwogICAgICAgIGVuZFRpbWUgPSBfZW5kVGltZTsKICAgICAgICBwcmljaW5nU3RyYXRlZ3kgPSBfcHJpY2luZ1N0cmF0ZWd5OwogICAgICAgIHRva2VuID0gX3Rva2VuOwogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICAgICAgd2VpTWF4aW11bUdvYWwgPSBfd2VpTWF4aW11bUdvYWw7CiAgICAgICAgd2VpTWluaW11bUdvYWwgPSBfd2VpTWluaW11bUdvYWw7CiAgICAgICAgdG9rZW5zU29sZCA9IF90b2tlbnNTb2xkOwp9CgogICAgLy8gZmFsbGJhY2sgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYnV5IHRva2VucwogICAgZnVuY3Rpb24gKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vIGxvdyBsZXZlbCB0b2tlbiBwdXJjaGFzZSBmdW5jdGlvbgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHBheWFibGUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKHZhbGlkUHVyY2hhc2UoKSk7CiAgICAKICAgICAgICB1aW50IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKICAgIAogICAgICAgIC8vIGNhbGN1bGF0ZSB0b2tlbiBhbW91bnQgdG8gYmUgY3JlYXRlZAogICAgICAgIHVpbnQgdG9rZW5BbW91bnQgPSBwcmljaW5nU3RyYXRlZ3kuY2FsY3VsYXRlVG9rZW5BbW91bnQod2VpQW1vdW50LCB0b2tlbnNTb2xkKTsKICAgIAogICAgICAgIC8vIHVwZGF0ZSBzdGF0ZQogICAgICAgIGlmIChpbnZlc3RlZEFtb3VudE9mW2JlbmVmaWNpYXJ5XSA9PSAwKSB7CiAgICAgICAgICAgIC8vIEEgbmV3IGludmVzdG9yCiAgICAgICAgICAgIGludmVzdG9yQ291bnQrKzsKICAgICAgICB9CiAgICAgICAgaW52ZXN0ZWRBbW91bnRPZltiZW5lZmljaWFyeV0gPSBpbnZlc3RlZEFtb3VudE9mW2JlbmVmaWNpYXJ5XS5hZGQod2VpQW1vdW50KTsKICAgICAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CiAgICAgICAgdG9rZW5zU29sZCA9IHRva2Vuc1NvbGQuYWRkKHRva2VuQW1vdW50KTsKICAgIAogICAgICAgIHRva2VuLnRyYW5zZmVyRnJvbShvd25lciwgYmVuZWZpY2lhcnksIHRva2VuQW1vdW50KTsKICAgICAgICBUb2tlblB1cmNoYXNlKG1zZy5zZW5kZXIsIGJlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRva2VuQW1vdW50KTsKCiAgICAgICAgd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIHJldHVybiB0cnVlIGlmIHRoZSB0cmFuc2FjdGlvbiBjYW4gYnV5IHRva2VucwogICAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBib29sIHdpdGhpblBlcmlvZCA9IChub3cgPj0gc3RhcnRUaW1lIHx8IGVhcmx5UGFydGljaXBhbnRXaGl0ZWxpc3RbbXNnLnNlbmRlcl0pICYmIG5vdyA8PSBlbmRUaW1lOwogICAgICAgIGJvb2wgbm9uWmVyb1B1cmNoYXNlID0gbXNnLnZhbHVlICE9IDA7CiAgICAgICAgYm9vbCB3aXRoaW5DYXAgPSB3ZWlSYWlzZWQuYWRkKG1zZy52YWx1ZSkgPD0gd2VpTWF4aW11bUdvYWw7CgogICAgICAgIHJldHVybiB3aXRoaW5QZXJpb2QgJiYgbm9uWmVyb1B1cmNoYXNlICYmIHdpdGhpbkNhcDsKICAgIH0KCiAgICAvLyByZXR1cm4gdHJ1ZSBpZiBjcm93ZHNhbGUgZXZlbnQgaGFzIGVuZGVkCiAgICBmdW5jdGlvbiBoYXNFbmRlZCgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBib29sIGNhcFJlYWNoZWQgPSB3ZWlSYWlzZWQgPj0gd2VpTWF4aW11bUdvYWw7CiAgICAgICAgYm9vbCBhZnRlckVuZFRpbWUgPSBub3cgPiBlbmRUaW1lOwogICAgICAgIAogICAgICAgIHJldHVybiBjYXBSZWFjaGVkIHx8IGFmdGVyRW5kVGltZTsKICAgIH0KCiAgICAvLyBnZXQgdGhlIGFtb3VudCBvZiB1bnNvbGQgdG9rZW5zIGFsbG9jYXRlZCB0byB0aGlzIGNvbnRyYWN0OwogICAgZnVuY3Rpb24gZ2V0V2VpTGVmdCgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gd2VpTWF4aW11bUdvYWwgLSB3ZWlSYWlzZWQ7CiAgICB9CgogICAgLy8gcmV0dXJuIHRydWUgaWYgdGhlIGNyb3dkc2FsZSBoYXMgcmFpc2VkIGVub3VnaCBtb25leSB0byBiZSBhIHN1Y2Nlc3NmdWwuCiAgICBmdW5jdGlvbiBpc01pbmltdW1Hb2FsUmVhY2hlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHdlaVJhaXNlZCA+PSB3ZWlNaW5pbXVtR29hbDsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBhbGxvd3MgdG8gYWRkIGFuZCBleGNsdWRlIGFkZHJlc3NlcyBmcm9tIGVhcmx5UGFydGljaXBhbnRXaGl0ZWxpc3QgZm9yIG93bmVyCiAgICAgKiBAcGFyYW0gaXNXaGl0ZWxpc3RlZCBpcyB0cnVlIGZvciBhZGRpbmcgYWRkcmVzcyBpbnRvIHdoaXRlbGlzdCwgZmFsc2UgLSB0byBleGNsdWRlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGVkaXRFYXJseVBhcmljaXBhbnRXaGl0ZWxpc3QoYWRkcmVzcyBhZGRyLCBib29sIGlzV2hpdGVsaXN0ZWQpIGV4dGVybmFsIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICAgICAgZWFybHlQYXJ0aWNpcGFudFdoaXRlbGlzdFthZGRyXSA9IGlzV2hpdGVsaXN0ZWQ7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gYWxsb3dzIHRvIHVwZGF0ZSB0b2tlbnMgcmF0ZSBmb3Igb3duZXIKICAgIGZ1bmN0aW9uIHNldFByaWNpbmdTdHJhdGVneShQcmljaW5nU3RyYXRlZ3kgX3ByaWNpbmdTdHJhdGVneSkgZXh0ZXJuYWwgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBwcmljaW5nU3RyYXRlZ3kgPSBfcHJpY2luZ1N0cmF0ZWd5OwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBBbGxvdyBsb2FkIHJlZnVuZHMgYmFjayBvbiB0aGUgY29udHJhY3QgZm9yIHRoZSByZWZ1bmRpbmcuCiAgICAqCiAgICAqIFRoZSB0ZWFtIGNhbiB0cmFuc2ZlciB0aGUgZnVuZHMgYmFjayBvbiB0aGUgc21hcnQgY29udHJhY3QgaW4gdGhlIGNhc2UgdGhlIG1pbmltdW0gZ29hbCB3YXMgbm90IHJlYWNoZWQuLgogICAgKi8KICAgIGZ1bmN0aW9uIGxvYWRSZWZ1bmQoKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwogICAgICAgIHJlcXVpcmUoIWlzTWluaW11bUdvYWxSZWFjaGVkKCkpOwogICAgICAgIAogICAgICAgIGxvYWRlZFJlZnVuZCA9IGxvYWRlZFJlZnVuZC5hZGQobXNnLnZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICogSW52ZXN0b3JzIGNhbiBjbGFpbSByZWZ1bmQuCiAgICAqCiAgICAqIE5vdGUgdGhhdCBhbnkgcmVmdW5kcyBmcm9tIHByb3h5IGJ1eWVycyBzaG91bGQgYmUgaGFuZGxlZCBzZXBhcmF0ZWx5LAogICAgKiBhbmQgbm90IHRocm91Z2ggdGhpcyBjb250cmFjdC4KICAgICovCiAgICBmdW5jdGlvbiByZWZ1bmQoKSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZSghaXNNaW5pbXVtR29hbFJlYWNoZWQoKSAmJiBsb2FkZWRSZWZ1bmQgPiAwKTsKICAgICAgICB1aW50MjU2IHdlaVZhbHVlID0gaW52ZXN0ZWRBbW91bnRPZlttc2cuc2VuZGVyXTsKICAgICAgICByZXF1aXJlKHdlaVZhbHVlID4gMCk7CiAgICAgICAgCiAgICAgICAgaW52ZXN0ZWRBbW91bnRPZlttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgd2VpUmVmdW5kZWQgPSB3ZWlSZWZ1bmRlZC5hZGQod2VpVmFsdWUpOwogICAgICAgIFJlZnVuZChtc2cuc2VuZGVyLCB3ZWlWYWx1ZSk7CiAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcih3ZWlWYWx1ZSk7CiAgICB9Cn0='.
	

]
