Class {
	#name : #SRTdd57115129fb4a4da7d5e49d32d8e36d183ca8ef,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdd57115129fb4a4da7d5e49d32d8e36d183ca8ef >> base64 [
	^ 'Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBEZXZlbG9wZXIgTmVjaGVzb3YgQW5kcmV5ICYgT2JqZWN0TWljcm8sIEluYyAKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBFUkMgVG9rZW4gU3RhbmRhcmQgIzIwIEludGVyZmFjZQovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKCnByYWdtYSBzb2xpZGl0eSBeMC40LjE4OyAgICAKCiAgbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgIHJldHVybiBjOwogICAgfQogIH0KCiAgY29udHJhY3QgRVJDMjBJbnRlcmZhY2UgewogICAgICAvLyBHZXQgdGhlIHRvdGFsIHRva2VuIHN1cHBseQogICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpOwogICAKICAgICAgLy8gR2V0IHRoZSBhY2NvdW50IGJhbGFuY2Ugb2YgYW5vdGhlciBhY2NvdW50IHdpdGggYWRkcmVzcyBfb3duZXIKICAgICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAKICAgICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyB0byBhZGRyZXNzIF90bwogICAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgIAogICAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogICAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAKICAgICAgLy8gQWxsb3cgX3NwZW5kZXIgdG8gd2l0aGRyYXcgZnJvbSB5b3VyIGFjY291bnQsIG11bHRpcGxlIHRpbWVzLCB1cCB0byB0aGUgX3ZhbHVlIGFtb3VudC4KICAgICAgLy8gSWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYWdhaW4gaXQgb3ZlcndyaXRlcyB0aGUgY3VycmVudCBhbGxvd2FuY2Ugd2l0aCBfdmFsdWUuCiAgICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgcmVxdWlyZWQgZm9yIHNvbWUgREVYIGZ1bmN0aW9uYWxpdHkKICAgICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgCiAgICAgIC8vIFJldHVybnMgdGhlIGFtb3VudCB3aGljaCBfc3BlbmRlciBpcyBzdGlsbCBhbGxvd2VkIHRvIHdpdGhkcmF3IGZyb20gX293bmVyCiAgICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwogICAKICAgICAgLy8gVHJpZ2dlcmVkIHdoZW4gdG9rZW5zIGFyZSB0cmFuc2ZlcnJlZC4KICAgICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgIAogICAgICAvLyBUcmlnZ2VyZWQgd2hlbmV2ZXIgYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgaXMgY2FsbGVkLgogICAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKICB9ICAKICAgCiAgY29udHJhY3QgSW91X1Rva2VuIGlzIEVSQzIwSW50ZXJmYWNlIHsKCiAgICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIklPVSI7CiAgICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJJT1UgdG9rZW4iOwogICAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsgCiAgICAgICAgICAgCiAgICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IG1heFRva2VucyA9IDgwMCoxMCoqNioxMCoqMTg7IAogICAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBvd25lclN1cHBseSA9IG1heFRva2VucyozMC8xMDA7CiAgICAgIHVpbnQyNTYgX3RvdGFsU3VwcGx5ID0gb3duZXJTdXBwbHk7ICAKCiAgICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuX3ByaWNlID0gMTAqKjE4KjEvODAwOyAKICAgICAgdWludDI1NiBwdWJsaWMgcHJlX2ljb19zdGFydCA9IDE1MTU5NzQ0MDA7IC8vIEphbiAxNSwgMjAxOCB1dGMKICAgICAgdWludDI1NiBwdWJsaWMgaWNvX3N0YXJ0ID0gMTUxODA0ODAwMDsgLy8gRmViIDgsIDIwMTggdXRjCiAgICAgIHVpbnQyNTYgcHVibGljIGljb19maW5pc2ggPSAxNTIxOTM2MDAwOyAvLyBNYXIgMjUsIDIwMTggdXRjCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IG1pblZhbHVlUHJlID0gMTAqKjE4KjEvMTAwMDAwMDsgCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IG1pblZhbHVlID0gMTAqKjE4KjEvMTAwMDAwMDsgCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50IG1heFZhbHVlID0gMzAwMCoxMCoqMTg7CgogICAgICB1aW50IHB1YmxpYyBjb2VmID0gMTAyOwoKICAgICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgICAgIAogICAgICAvLyBPd25lciBvZiB0aGlzIGNvbnRyYWN0CiAgICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAKICAgICAgLy8gQmFsYW5jZXMgZm9yIGVhY2ggYWNjb3VudAogICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgIAogICAgICAvLyBPd25lciBvZiBhY2NvdW50IGFwcHJvdmVzIHRoZSB0cmFuc2ZlciBvZiBhbiBhbW91bnQgdG8gYW5vdGhlciBhY2NvdW50CiAgICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgICAgLy8gT3JkZXJzIGhvbGRlcnMgd2hvIHdpc2ggc2VsbCB0b2tlbnMsIHNhdmUgYW1vdW50CiAgICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgb3JkZXJzX3NlbGxfYW1vdW50OwoKICAgICAgLy8gT3JkZXJzIGhvbGRlcnMgd2hvIHdpc2ggc2VsbCB0b2tlbnMsIHNhdmUgcHJpY2UKICAgICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBvcmRlcnNfc2VsbF9wcmljZTsKCiAgICAgIC8vb3JkZXJzIGxpc3QKICAgICAgYWRkcmVzc1tdIHB1YmxpYyBvcmRlcnNfc2VsbF9saXN0OwoKICAgICAgLy8gVHJpZ2dlcmVkIG9uIHNldCBTRUxMIG9yZGVyCiAgICAgIGV2ZW50IE9yZGVyX3NlbGwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludDI1NiBfbWF4X2Ftb3VudCwgdWludDI1NiBfcHJpY2UpOyAgICAgIAoKICAgICAgLy8gVHJpZ2dlcmVkIG9uIGV4ZWN1dGUgU0VMTCBvcmRlcgogICAgICBldmVudCBPcmRlcl9leGVjdXRlKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfYW1vdW50LCB1aW50MjU2IF9wcmljZSk7ICAgICAgCiAgIAogICAgICAvLyBGdW5jdGlvbnMgd2l0aCB0aGlzIG1vZGlmaWVyIGNhbiBvbmx5IGJlIGV4ZWN1dGVkIGJ5IHRoZSBvd25lcgogICAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgfQogICAgICAgICAgXzsKICAgICAgfSAgICAgIAogICAKICAgICAgLy8gQ29uc3RydWN0b3IKICAgICAgZnVuY3Rpb24gSW91X1Rva2VuKCkgewogICAgICAgICAgLy9vd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgICBvd25lciA9IDB4MGExNjZFOTAwNzFiMEZmRTc3NzI0RjViMWNEQURGNjJBQ0M2M2QxMDsKICAgICAgICAgIGJhbGFuY2VzW293bmVyXSA9IG93bmVyU3VwcGx5OwogICAgICB9CiAgICAgIAogICAgICAvL2RlZmF1bHQgZnVuY3Rpb24gICAgICAKICAgICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsgICAgICAgIAogICAgICAgICAgdG9rZW5zX2J1eSgpOyAgICAgICAgCiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSkgewogICAgICAgICAgdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHk7CiAgICAgIH0KCiAgICAgIC8vV2l0aGRyYXcgbW9uZXkgZnJvbSBjb250cmFjdCBiYWxhbmNlIHRvIG93bmVyCiAgICAgIGZ1bmN0aW9uIHdpdGhkcmF3KHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyIHJldHVybnMgKGJvb2wgcmVzdWx0KSB7CiAgICAgICAgICB1aW50MjU2IGJhbGFuY2U7CiAgICAgICAgICBiYWxhbmNlID0gdGhpcy5iYWxhbmNlOwogICAgICAgICAgaWYoX2Ftb3VudCA+IDApIGJhbGFuY2UgPSBfYW1vdW50OwogICAgICAgICAgb3duZXIuc2VuZChiYWxhbmNlKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICAvL0NoYW5nZSBjb2VmCiAgICAgIGZ1bmN0aW9uIGNoYW5nZV9jb2VmKHVpbnQyNTYgX2NvZWYpIG9ubHlPd25lciByZXR1cm5zIChib29sIHJlc3VsdCkgewogICAgICAgICAgY29lZiA9IF9jb2VmOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIC8vQ2hhbmdlIGljb19zdGFydCBkYXRlCiAgICAgIGZ1bmN0aW9uIGNoYW5nZV9pY29fc3RhcnQodWludDI1NiBfaWNvX3N0YXJ0KSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCByZXN1bHQpIHsKICAgICAgICAgIGljb19zdGFydCA9IF9pY29fc3RhcnQ7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgLy9DaGFuZ2UgaWNvX2ZpbmlzaCBkYXRlCiAgICAgIGZ1bmN0aW9uIGNoYW5nZV9pY29fZmluaXNoKHVpbnQyNTYgX2ljb19maW5pc2gpIG9ubHlPd25lciByZXR1cm5zIChib29sIHJlc3VsdCkgewogICAgICAgICAgaWNvX2ZpbmlzaCA9IF9pY29fZmluaXNoOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgCiAgICAgIC8vIFRvdGFsIHRva2VucyBvbiB1c2VyIGFkZHJlc3MKICAgICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgICB9CiAgIAogICAgICAvLyBUcmFuc2ZlciB0aGUgYmFsYW5jZSBmcm9tIG93bmVyJ3MgYWNjb3VudCB0byBhbm90aGVyIGFjY291bnQKICAgICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7ICAgICAgICAgIAoKICAgICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50IAogICAgICAgICAgICAgICYmIF9hbW91bnQgPiAwCiAgICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX2Ftb3VudDsKICAgICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF9hbW91bnQ7CiAgICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICB9CiAgIAogICAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogICAgICAvLyBUaGUgdHJhbnNmZXJGcm9tIG1ldGhvZCBpcyB1c2VkIGZvciBhIHdpdGhkcmF3IHdvcmtmbG93LCBhbGxvd2luZyBjb250cmFjdHMgdG8gc2VuZAogICAgICAvLyB0b2tlbnMgb24geW91ciBiZWhhbGYsIGZvciBleGFtcGxlIHRvICJkZXBvc2l0IiB0byBhIGNvbnRyYWN0IGFkZHJlc3MgYW5kL29yIHRvIGNoYXJnZQogICAgICAvLyBmZWVzIGluIHN1Yi1jdXJyZW5jaWVzOyB0aGUgY29tbWFuZCBzaG91bGQgZmFpbCB1bmxlc3MgdGhlIF9mcm9tIGFjY291bnQgaGFzCiAgICAgIC8vIGRlbGliZXJhdGVseSBhdXRob3JpemVkIHRoZSBzZW5kZXIgb2YgdGhlIG1lc3NhZ2UgdmlhIHNvbWUgbWVjaGFuaXNtOyB3ZSBwcm9wb3NlCiAgICAgIC8vIHRoZXNlIHN0YW5kYXJkaXplZCBBUElzIGZvciBhcHByb3ZhbDoKICAgICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKAogICAgICAgICAgYWRkcmVzcyBfZnJvbSwKICAgICAgICAgIGFkZHJlc3MgX3RvLAogICAgICAgICAgdWludDI1NiBfYW1vdW50CiAgICAgKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsgICAgICAgICAKCiAgICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX2Ftb3VudAogICAgICAgICAgICAgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudAogICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAKICAgICAgICAgICAgICYmIGJhbGFuY2VzW190b10gKyBfYW1vdW50ID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF9hbW91bnQ7CiAgICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfYW1vdW50OwogICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfYW1vdW50OwogICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgfQogICAgIH0KICAKICAgICAvLyBBbGxvdyBfc3BlbmRlciB0byB3aXRoZHJhdyBmcm9tIHlvdXIgYWNjb3VudCwgbXVsdGlwbGUgdGltZXMsIHVwIHRvIHRoZSBfdmFsdWUgYW1vdW50LgogICAgIC8vIElmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGFnYWluIGl0IG92ZXJ3cml0ZXMgdGhlIGN1cnJlbnQgYWxsb3dhbmNlIHdpdGggX3ZhbHVlLgogICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfYW1vdW50OwogICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX2Ftb3VudCk7CiAgICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KICAgIAogICAgIC8vUmV0dXJuIHBhcmFtLCBob3cgbWFueSB0b2tlbnMgY2FuIHNlbmQgX3NwZW5kZXIgZnJvbSBfb3duZXIgYWNjb3VudCAgCiAgICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgICB9IAoKICAgICAgLyoqCiAgICAgICogQnV5IHRva2VucyBvbiBwcmUtaWNvIGFuZCBpY28gd2l0aCBib251c2VzIG9uIHRpbWUgYm91bmRhcmllcwogICAgICAqLwogICAgICBmdW5jdGlvbiB0b2tlbnNfYnV5KCkgcGF5YWJsZSByZXR1cm5zIChib29sKSB7IAoKICAgICAgICB1aW50MjU2IHRub3cgPSBub3c7CiAgICAgICAgCiAgICAgICAgaWYodG5vdyA8IHByZV9pY29fc3RhcnQpIHRocm93OwogICAgICAgIGlmKHRub3cgPiBpY29fZmluaXNoKSB0aHJvdzsKICAgICAgICBpZihfdG90YWxTdXBwbHkgPj0gbWF4VG9rZW5zKSB0aHJvdzsKICAgICAgICBpZighKG1zZy52YWx1ZSA+PSB0b2tlbl9wcmljZSkpIHRocm93OwogICAgICAgIGlmKCEobXNnLnZhbHVlID49IG1pblZhbHVlKSkgdGhyb3c7CiAgICAgICAgaWYobXNnLnZhbHVlID4gbWF4VmFsdWUpIHRocm93OwoKICAgICAgICB1aW50IHRva2Vuc19idXkgPSAobXNnLnZhbHVlKjEwKioxOCkuZGl2KHRva2VuX3ByaWNlKTsKICAgICAgICB1aW50IHRva2Vuc19idXlfdG90YWw7CgogICAgICAgIGlmKCEodG9rZW5zX2J1eSA+IDApKSB0aHJvdzsgICAKICAgICAgICAKICAgICAgICAvL0JvbnVzIGZvciB0b3RhbCB0b2tlbnMgYW1vdW50IGZvciBhbGwgY29udHJhY3QKICAgICAgICB1aW50IGIxID0gMDsKICAgICAgICAvL1RpbWUgYm9udXMgb24gUHJlLUlDTyAmJiBJQ08KICAgICAgICB1aW50IGIyID0gMDsKICAgICAgICAvL0luZGl2aWR1YWwgYm9udXMgZm9yIHRva2VucyBhbW91bnQKICAgICAgICB1aW50IGIzID0gMDsKCiAgICAgICAgaWYoX3RvdGFsU3VwcGx5IDw9IDEwKjEwKio2KjEwKioxOCkgewogICAgICAgICAgYjEgPSB0b2tlbnNfYnV5KjMwLzEwMDsKICAgICAgICB9CiAgICAgICAgaWYoKDEwKjEwKio2KjEwKioxOCA8IF90b3RhbFN1cHBseSkmJihfdG90YWxTdXBwbHkgPD0gMjAqMTAqKjYqMTAqKjE4KSkgewogICAgICAgICAgYjEgPSB0b2tlbnNfYnV5KjI1LzEwMDsKICAgICAgICB9CiAgICAgICAgaWYoKDIwKjEwKio2KjEwKioxOCA8IF90b3RhbFN1cHBseSkmJihfdG90YWxTdXBwbHkgPD0gMzAqMTAqKjYqMTAqKjE4KSkgewogICAgICAgICAgYjEgPSB0b2tlbnNfYnV5KjIwLzEwMDsKICAgICAgICB9CiAgICAgICAgaWYoKDMwKjEwKio2KjEwKioxOCA8IF90b3RhbFN1cHBseSkmJihfdG90YWxTdXBwbHkgPD0gNDAqMTAqKjYqMTAqKjE4KSkgewogICAgICAgICAgYjEgPSB0b2tlbnNfYnV5KjE1LzEwMDsKICAgICAgICB9CiAgICAgICAgaWYoKDQwKjEwKio2KjEwKioxOCA8IF90b3RhbFN1cHBseSkmJihfdG90YWxTdXBwbHkgPD0gNTAqMTAqKjYqMTAqKjE4KSkgewogICAgICAgICAgYjEgPSB0b2tlbnNfYnV5KjEwLzEwMDsKICAgICAgICB9CiAgICAgICAgaWYoNTAqMTAqKjYqMTAqKjE4IDw9IF90b3RhbFN1cHBseSkgewogICAgICAgICAgYjEgPSB0b2tlbnNfYnV5KjUvMTAwOwogICAgICAgIH0gICAgICAgIAoKICAgICAgICBpZih0bm93IDwgaWNvX3N0YXJ0KSB7CiAgICAgICAgICBiMiA9IHRva2Vuc19idXkqNDAvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoaWNvX3N0YXJ0ICsgODY0MDAqMCA8PSB0bm93KSYmKHRub3cgPCBpY29fc3RhcnQgKyA4NjQwMCo1KSl7CiAgICAgICAgICBiMiA9IHRva2Vuc19idXkqNS8xMDA7CiAgICAgICAgfSAKICAgICAgICBpZigoaWNvX3N0YXJ0ICsgODY0MDAqNSA8PSB0bm93KSYmKHRub3cgPCBpY29fc3RhcnQgKyA4NjQwMCoxMCkpewogICAgICAgICAgYjIgPSB0b2tlbnNfYnV5KjQvMTAwOyAgICAgICAgCiAgICAgICAgfSAKICAgICAgICBpZigoaWNvX3N0YXJ0ICsgODY0MDAqMTAgPD0gdG5vdykmJih0bm93IDwgaWNvX3N0YXJ0ICsgODY0MDAqMjApKXsKICAgICAgICAgIGIyID0gdG9rZW5zX2J1eSo1LzEwMDsgICAgICAgIAogICAgICAgIH0gCiAgICAgICAgaWYoKGljb19zdGFydCArIDg2NDAwKjIwIDw9IHRub3cpJiYodG5vdyA8IGljb19zdGFydCArIDg2NDAwKjMwKSl7CiAgICAgICAgICBiMiA9IHRva2Vuc19idXkqMi8xMDA7ICAgICAgICAKICAgICAgICB9IAogICAgICAgIGlmKGljb19zdGFydCArIDg2NDAwKjMwIDw9IHRub3cpewogICAgICAgICAgYjIgPSB0b2tlbnNfYnV5KjEvMTAwOyAgICAgICAgCiAgICAgICAgfQogICAgICAgIAoKICAgICAgICBpZigoMTAwMCoxMCoqMTggPD0gdG9rZW5zX2J1eSkmJig1MDAwKjEwKioxOCA8PSB0b2tlbnNfYnV5KSkgewogICAgICAgICAgYjMgPSB0b2tlbnNfYnV5KjUvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoNTAwMSoxMCoqMTggPD0gdG9rZW5zX2J1eSkmJigxMDAwMCoxMCoqMTggPCB0b2tlbnNfYnV5KSkgewogICAgICAgICAgYjMgPSB0b2tlbnNfYnV5Kjc1LzEwLzEwMDsKICAgICAgICB9CiAgICAgICAgaWYoKDEwMDAxKjEwKioxOCA8PSB0b2tlbnNfYnV5KSYmKDE1MDAwKjEwKioxOCA8IHRva2Vuc19idXkpKSB7CiAgICAgICAgICBiMyA9IHRva2Vuc19idXkqMTAvMTAwOwogICAgICAgIH0KICAgICAgICBpZigoMTUwMDEqMTAqKjE4IDw9IHRva2Vuc19idXkpJiYoMjAwMDAqMTAqKjE4IDwgdG9rZW5zX2J1eSkpIHsKICAgICAgICAgIGIzID0gdG9rZW5zX2J1eSoxMjUvMTAvMTAwOwogICAgICAgIH0KICAgICAgICBpZigyMDAwMSoxMCoqMTggPD0gdG9rZW5zX2J1eSkgewogICAgICAgICAgYjMgPSB0b2tlbnNfYnV5KjE1LzEwMDsKICAgICAgICB9CgogICAgICAgIHRva2Vuc19idXlfdG90YWwgPSB0b2tlbnNfYnV5LmFkZChiMSk7CiAgICAgICAgdG9rZW5zX2J1eV90b3RhbCA9IHRva2Vuc19idXlfdG90YWwuYWRkKGIyKTsKICAgICAgICB0b2tlbnNfYnV5X3RvdGFsID0gdG9rZW5zX2J1eV90b3RhbC5hZGQoYjMpOyAgICAgICAgCgogICAgICAgIGlmKF90b3RhbFN1cHBseS5hZGQodG9rZW5zX2J1eV90b3RhbCkgPiBtYXhUb2tlbnMpIHRocm93OwogICAgICAgIF90b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseS5hZGQodG9rZW5zX2J1eV90b3RhbCk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQodG9rZW5zX2J1eV90b3RhbCk7ICAgICAgICAgCgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIAogICAgICAvKioKICAgICAgKiBHZXQgdG90YWwgU0VMTCBvcmRlcnMKICAgICAgKi8gICAgICAKICAgICAgZnVuY3Rpb24gb3JkZXJzX3NlbGxfdG90YWwgKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBvcmRlcnNfc2VsbF9saXN0Lmxlbmd0aDsKICAgICAgfSAKCiAgICAgIC8qKgogICAgICAqIEdldCBob3cgbWFueSB0b2tlbnMgY2FuIGJ1eSBmcm9tIHRoaXMgU0VMTCBvcmRlcgogICAgICAqLwogICAgICBmdW5jdGlvbiBnZXRfb3JkZXJzX3NlbGxfYW1vdW50KGFkZHJlc3MgX2Zyb20pIGNvbnN0YW50IHJldHVybnModWludCkgewoKICAgICAgICB1aW50IF9hbW91bnRfbWF4ID0gMDsKCiAgICAgICAgaWYoIShvcmRlcnNfc2VsbF9hbW91bnRbX2Zyb21dID4gMCkpIHJldHVybiBfYW1vdW50X21heDsKCiAgICAgICAgaWYoYmFsYW5jZU9mKF9mcm9tKSA+IDApIF9hbW91bnRfbWF4ID0gYmFsYW5jZU9mKF9mcm9tKTsKICAgICAgICBpZihvcmRlcnNfc2VsbF9hbW91bnRbX2Zyb21dIDwgX2Ftb3VudF9tYXgpIF9hbW91bnRfbWF4ID0gb3JkZXJzX3NlbGxfYW1vdW50W19mcm9tXTsKCiAgICAgICAgcmV0dXJuIF9hbW91bnRfbWF4OwogICAgICB9CgogICAgICAvKioKICAgICAgKiBVc2VyIGNyZWF0ZSBTRUxMIG9yZGVyLiAgCiAgICAgICovCiAgICAgIGZ1bmN0aW9uIG9yZGVyX3NlbGwodWludDI1NiBfbWF4X2Ftb3VudCwgdWludDI1NiBfcHJpY2UpIHJldHVybnMgKGJvb2wpIHsKCiAgICAgICAgaWYoIShfbWF4X2Ftb3VudCA+IDApKSB0aHJvdzsKICAgICAgICBpZighKF9wcmljZSA+IDApKSB0aHJvdzsgICAgICAgIAoKICAgICAgICBvcmRlcnNfc2VsbF9hbW91bnRbbXNnLnNlbmRlcl0gPSBfbWF4X2Ftb3VudDsKICAgICAgICBvcmRlcnNfc2VsbF9wcmljZVttc2cuc2VuZGVyXSA9IChfcHJpY2UqY29lZikuZGl2KDEwMCk7CiAgICAgICAgb3JkZXJzX3NlbGxfbGlzdC5wdXNoKG1zZy5zZW5kZXIpOyAgICAgICAgCgogICAgICAgIE9yZGVyX3NlbGwobXNnLnNlbmRlciwgX21heF9hbW91bnQsIG9yZGVyc19zZWxsX3ByaWNlW21zZy5zZW5kZXJdKTsgICAgICAKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIC8qKgogICAgICAqIE9yZGVyIEJ1eSB0b2tlbnMgLSBpdCdzIG9yZGVyIHNlYXJjaCBzZWxsIG9yZGVyIGZyb20gdXNlciBfZnJvbSBhbmQgaWYgYWxsIG9rLCBzZW5kIHRva2VuIGFuZCBtb25leSAKICAgICAgKi8KICAgICAgZnVuY3Rpb24gb3JkZXJfYnV5KGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX21heF9wcmljZSkgcGF5YWJsZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgCiAgICAgICAgaWYoIShtc2cudmFsdWUgPiAwKSkgdGhyb3c7CiAgICAgICAgaWYoIShfbWF4X3ByaWNlID4gMCkpIHRocm93OyAgICAgICAgCiAgICAgICAgaWYoIShvcmRlcnNfc2VsbF9hbW91bnRbX2Zyb21dID4gMCkpIHRocm93OwogICAgICAgIGlmKCEob3JkZXJzX3NlbGxfcHJpY2VbX2Zyb21dID4gMCkpIHRocm93OyAKICAgICAgICBpZihvcmRlcnNfc2VsbF9wcmljZVtfZnJvbV0gPiBfbWF4X3ByaWNlKSB0aHJvdzsKCiAgICAgICAgdWludCBfYW1vdW50ID0gKG1zZy52YWx1ZSoxMCoqMTgpLmRpdihvcmRlcnNfc2VsbF9wcmljZVtfZnJvbV0pOwogICAgICAgIHVpbnQgX2Ftb3VudF9mcm9tID0gZ2V0X29yZGVyc19zZWxsX2Ftb3VudChfZnJvbSk7CgogICAgICAgIGlmKF9hbW91bnQgPiBfYW1vdW50X2Zyb20pIF9hbW91bnQgPSBfYW1vdW50X2Zyb207ICAgICAgICAKICAgICAgICBpZighKF9hbW91bnQgPiAwKSkgdGhyb3c7ICAgICAgICAKCiAgICAgICAgdWludCBfdG90YWxfbW9uZXkgPSAob3JkZXJzX3NlbGxfcHJpY2VbX2Zyb21dKl9hbW91bnQpLmRpdigxMCoqMTgpOwogICAgICAgIGlmKF90b3RhbF9tb25leSA+IG1zZy52YWx1ZSkgdGhyb3c7CgogICAgICAgIHVpbnQgX3NlbGxlcl9tb25leSA9IChfdG90YWxfbW9uZXkqMTAwKS5kaXYoY29lZik7CiAgICAgICAgdWludCBfYnV5ZXJfbW9uZXkgPSBtc2cudmFsdWUgLSBfdG90YWxfbW9uZXk7CgogICAgICAgIGlmKF9zZWxsZXJfbW9uZXkgPiBtc2cudmFsdWUpIHRocm93OwogICAgICAgIGlmKF9zZWxsZXJfbW9uZXkgKyBfYnV5ZXJfbW9uZXkgPiBtc2cudmFsdWUpIHRocm93OwoKICAgICAgICBpZihfc2VsbGVyX21vbmV5ID4gMCkgX2Zyb20uc2VuZChfc2VsbGVyX21vbmV5KTsKICAgICAgICBpZihfYnV5ZXJfbW9uZXkgPiAwKSBtc2cuc2VuZGVyLnNlbmQoX2J1eWVyX21vbmV5KTsKCiAgICAgICAgb3JkZXJzX3NlbGxfYW1vdW50W19mcm9tXSAtPSBfYW1vdW50OyAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF9hbW91bnQ7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gX2Ftb3VudDsgCgogICAgICAgIE9yZGVyX2V4ZWN1dGUoX2Zyb20sIG1zZy5zZW5kZXIsIF9hbW91bnQsIG9yZGVyc19zZWxsX3ByaWNlW19mcm9tXSk7CgogICAgICB9CiAgICAgIAogfQ=='.
	

]
