Class {
	#name : #SRT93765bd8e354192749e40088b3ce765e6e1824c9,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT93765bd8e354192749e40088b3ce765e6e1824c9 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwogCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBSeWFuY29pbiB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgX2luaXRpYWxTdXBwbHkgPSAxNTAwMDAwMCAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CiAgICB1aW50MjU2IF90b3RhbFN1cHBseSA9IDA7CiAgICB1aW50MjU2IF90b3RhbFNvbGQgPSAwOwogICAgCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJSWUMiOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlJ5YW5jb2luIjsKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDY7CiAgICB1aW50MjU2IHB1YmxpYyByYXRlID0gMSBldGhlciAvICg1MDAgKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpKTsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgCiAgICBib29sIHB1YmxpYyBfY29udHJhY3RTdGF0dXMgPSB0cnVlOwogICAgCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7IC8vY29udHJvbCBhbGxvdyB0byBzcGVuZAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSAgX2Zyb3plbkFjY291bnQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpICBfdG9rZW5BY2NvdW50OwoKICAgIGFkZHJlc3NbXSB0b2tlbkhvbGRlcnM7CiAgICAKICAgIC8vRXZlbnQKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgVXBkYXRlU3RhdHVzKHN0cmluZyBuZXdTdGF0dXMpOwogICAgZXZlbnQgQnVybihhZGRyZXNzIHRhcmdldCwgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgTWludGVkVG9rZW4oYWRkcmVzcyB0YXJnZXQsIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEZyb3plbkZ1bmRzKGFkZHJlc3MgdGFyZ2V0LCBib29sIF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICAgIAogICAgZnVuY3Rpb24gUnlhbmNvaW4oKSAgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBfdG90YWxTdXBwbHkgPSBfaW5pdGlhbFN1cHBseTsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBfdG90YWxTdXBwbHk7CiAgICAgICAgc2V0VG9rZW5Ib2xkZXJzKG93bmVyKTsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciAhPSAweDApOwogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHN0b3BDb250cmFjdCgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIF9jb250cmFjdFN0YXR1cyA9IGZhbHNlOwogICAgICAgIFVwZGF0ZVN0YXR1cygiQ29udHJhY3QgaXMgc3RvcCIpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBlbmFibGVDb250cmFjdCgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIF9jb250cmFjdFN0YXR1cyA9IHRydWU7CiAgICAgICAgVXBkYXRlU3RhdHVzKCJDb250cmFjdCBpcyBlbmFibGUiKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgcmV0dXJuIF90b3RhbFN1cHBseTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdG90YWxTb2xkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpewogICAgICAgIHJldHVybiBfdG90YWxTb2xkOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0b3RhbFJhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgcmV0dXJuIHJhdGU7CiAgICB9CiAgICAKICAgCiAgICBmdW5jdGlvbiB1cGRhdGVSYXRlKHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKICAgICAgICByYXRlID0gMSBldGhlciAvIChfdmFsdWUgKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSBwdWJsaWMgewogICAgICAgIGNyZWF0ZVRva2VucygpOyAvL3NlbmQgbW9uZXkgdG8gY29udHJhY3Qgb3duZXIKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY3JlYXRlVG9rZW5zKCkgcHVibGljIHBheWFibGV7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwICYmIG1zZy52YWx1ZSA+IHJhdGUgJiYgX2NvbnRyYWN0U3RhdHVzKTsKICAgICAgICAKICAgICAgICB1aW50MjU2IHRva2VucyA9IG1zZy52YWx1ZS5kaXYocmF0ZSk7CiAgICAgICAgCiAgICAgICAgcmVxdWlyZSh0b2tlbnMgKyBfdG90YWxTb2xkIDwgX3RvdGFsU3VwcGx5KTsKICAgICAgICAKICAgICAgICByZXF1aXJlKAogICAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gID49IHRva2VucwogICAgICAgICAgICAmJiB0b2tlbnMgPiAwCiAgICAgICAgKTsKICAgICAgICAKICAgICAgICBfdHJhbnNmZXIob3duZXIsIG1zZy5zZW5kZXIsIHRva2Vucyk7CiAgICAgICAgVHJhbnNmZXIob3duZXIsIG1zZy5zZW5kZXIsIHRva2Vucyk7CiAgICAgICAgX3RvdGFsU29sZCA9IF90b3RhbFNvbGQuYWRkKHRva2Vucyk7CiAgICAgICAgCiAgICAgICAgb3duZXIudHJhbnNmZXIobXNnLnZhbHVlKTsgLy90cmFuc2ZlciBldGhlciB0byBjb250cmFjdCBvd2VyCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSl7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgLy9DaGVjayBjb250cmFjdCBpcyBzdG9wCiAgICAgICAgcmVxdWlyZShfY29udHJhY3RTdGF0dXMpOwogICAgICAgIHJlcXVpcmUoIV9mcm96ZW5BY2NvdW50W21zZy5zZW5kZXJdKTsKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgLy8gUHJldmVudCB0cmFuc2ZlciB0byAweDAgYWRkcmVzcy4gVXNlIGJ1cm4oKSBpbnN0ZWFkCiAgICAgICAgcmVxdWlyZShfdG8gIT0gMHgwKTsKICAgICAgICAvLyBDaGVjayB2YWx1ZSBtb3JlIHRoYW4gMAogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSk7CiAgICAgICAgLy8gU2F2ZSB0aGlzIGZvciBhbiBhc3NlcnRpb24gaW4gdGhlIGZ1dHVyZQogICAgICAgIHVpbnQyNTYgcHJldmlvdXNCYWxhbmNlcyA9IGJhbGFuY2VzW19mcm9tXSArIGJhbGFuY2VzW190b107CiAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAvLyBTZXQgdG9rZW4gaG9sZGVyIGxpc3QKICAgICAgICBzZXRUb2tlbkhvbGRlcnMoX3RvKTsKICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudAogICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgLy8gQXNzZXJ0cyBhcmUgdXNlZCB0byB1c2Ugc3RhdGljIGFuYWx5c2lzIHRvIGZpbmQgYnVncyBpbiB5b3VyIGNvZGUuIFRoZXkgc2hvdWxkIG5ldmVyIGZhaWwKICAgICAgICBhc3NlcnQoYmFsYW5jZXNbX2Zyb21dICsgYmFsYW5jZXNbX3RvXSA9PSBwcmV2aW91c0JhbGFuY2VzKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tT3duZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFRva2VuSG9sZGVycyhhZGRyZXNzIF9ob2xkZXIpIGludGVybmFsIHsKICAgICAgICBpZiAoX3Rva2VuQWNjb3VudFtfaG9sZGVyXSkgcmV0dXJuOwogICAgICAgIHRva2VuSG9sZGVycy5wdXNoKF9ob2xkZXIpIC0xOwogICAgICAgIF90b2tlbkFjY291bnRbX2hvbGRlcl0gPSB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRUb2tlbkhvbGRlcnMoKSB2aWV3IHB1YmxpYyByZXR1cm5zIChhZGRyZXNzW10pIHsKICAgICAgICByZXR1cm4gdG9rZW5Ib2xkZXJzOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjb3VudFRva2VuSG9sZGVycygpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdG9rZW5Ib2xkZXJzLmxlbmd0aDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOyAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIF90b3RhbFN1cHBseSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlcyB0b3RhbFN1cHBseQogICAgICAgIEJ1cm4obXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYnVybkZyb21Pd25lcihhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKF9mcm9tICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKTsgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRhcmdldGVkIGJhbGFuY2UgaXMgZW5vdWdoCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgdGFyZ2V0ZWQgYmFsYW5jZQogICAgICAgIF90b3RhbFN1cHBseSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRvdGFsU3VwcGx5CiAgICAgICAgQnVybihfZnJvbSwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gbWludFRva2VuKGFkZHJlc3MgX3RhcmdldCwgdWludDI1NiBfbWludGVkQW1vdW50KSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKF90YXJnZXQgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfbWludGVkQW1vdW50ID4gMCk7CiAgICAgICAgYmFsYW5jZXNbX3RhcmdldF0gKz0gX21pbnRlZEFtb3VudDsKICAgICAgICBfdG90YWxTdXBwbHkgKz0gX21pbnRlZEFtb3VudDsKICAgICAgICBzZXRUb2tlbkhvbGRlcnMoX3RhcmdldCk7CiAgICAgICAgVHJhbnNmZXIoMCwgb3duZXIsIF9taW50ZWRBbW91bnQpOwogICAgICAgIFRyYW5zZmVyKG93bmVyLCBfdGFyZ2V0LCBfbWludGVkQW1vdW50KTsKICAgICAgICBNaW50ZWRUb2tlbihfdGFyZ2V0LCBfbWludGVkQW1vdW50KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0ZnJlZXplQWNjb3VudChhZGRyZXNzIF90YXJnZXQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sIGZyZWV6ZSkgewogICAgICAgIHJlcXVpcmUoX3RhcmdldCAhPSAweDApOwogICAgICAgIHJldHVybiBfZnJvemVuQWNjb3VudFtfdGFyZ2V0XTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZnJlZXplQWNjb3VudChhZGRyZXNzIF90YXJnZXQsIGJvb2wgZnJlZXplKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKF90YXJnZXQgIT0gMHgwKTsKICAgICAgICBfZnJvemVuQWNjb3VudFtfdGFyZ2V0XSA9IGZyZWV6ZTsKICAgICAgICBGcm96ZW5GdW5kcyhfdGFyZ2V0LCBmcmVlemUpOwogICAgfQogICAgCiAgICAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF9mcm9tICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKICAgICAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogIAogIC8qKgogICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqCiAgICogQmV3YXJlIHRoYXQgY2hhbmdpbmcgYW4gYWxsb3dhbmNlIHdpdGggdGhpcyBtZXRob2QgYnJpbmdzIHRoZSByaXNrIHRoYXQgc29tZW9uZSBtYXkgdXNlIGJvdGggdGhlIG9sZAogICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgKiByYWNlIGNvbmRpdGlvbiBpcyB0byBmaXJzdCByZWR1Y2UgdGhlIHNwZW5kZXIncyBhbGxvd2FuY2UgdG8gMCBhbmQgc2V0IHRoZSBkZXNpcmVkIHZhbHVlIGFmdGVyd2FyZHM6CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3NwZW5kZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgfQogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXF1aXJlKF9vd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF9zcGVuZGVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQogICAgCiAgICAvKioKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKi8KICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShfc3BlbmRlciAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF9hZGRlZFZhbHVlID4gMCk7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKF9zcGVuZGVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3N1YnRyYWN0ZWRWYWx1ZSA+IDApOwogICAgICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgICAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICAgICAgfQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgfQogICAgCn0='.
	

]
