Class {
	#name : #SRTdf6ef343350780bf8c3410bf062e0c015b1dd671,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdf6ef343350780bf8c3410bf062e0c015b1dd671 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBCTUNQbGF0Zm9ybSB7CiAgICBtYXBwaW5nKGJ5dGVzMzIgPT4gYWRkcmVzcykgcHVibGljIHByb3hpZXM7CiAgICBmdW5jdGlvbiBuYW1lKGJ5dGVzMzIgX3N5bWJvbCkgcmV0dXJucyhzdHJpbmcpOwogICAgZnVuY3Rpb24gc2V0UHJveHkoYWRkcmVzcyBfYWRkcmVzcywgYnl0ZXMzMiBfc3ltYm9sKSByZXR1cm5zKHVpbnQgZXJyb3JDb2RlKTsKICAgIGZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBfb3duZXIsIGJ5dGVzMzIgX3N5bWJvbCkgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KGJ5dGVzMzIgX3N5bWJvbCkgcmV0dXJucyh1aW50KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9ob2xkZXIsIGJ5dGVzMzIgX3N5bWJvbCkgcmV0dXJucyh1aW50KTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9zcGVuZGVyLCBieXRlczMyIF9zeW1ib2wpIHJldHVybnModWludCk7CiAgICBmdW5jdGlvbiBiYXNlVW5pdChieXRlczMyIF9zeW1ib2wpIHJldHVybnModWludDgpOwogICAgZnVuY3Rpb24gcHJveHlUcmFuc2ZlcldpdGhSZWZlcmVuY2UoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlczMyIF9zeW1ib2wsIHN0cmluZyBfcmVmZXJlbmNlLCBhZGRyZXNzIF9zZW5kZXIpIHJldHVybnModWludCBlcnJvckNvZGUpOwogICAgZnVuY3Rpb24gcHJveHlUcmFuc2ZlckZyb21XaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMzMiBfc3ltYm9sLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKHVpbnQgZXJyb3JDb2RlKTsKICAgIGZ1bmN0aW9uIHByb3h5QXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSwgYnl0ZXMzMiBfc3ltYm9sLCBhZGRyZXNzIF9zZW5kZXIpIHJldHVybnModWludCBlcnJvckNvZGUpOwogICAgZnVuY3Rpb24gaXNzdWVBc3NldChieXRlczMyIF9zeW1ib2wsIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX25hbWUsIHN0cmluZyBfZGVzY3JpcHRpb24sIHVpbnQ4IF9iYXNlVW5pdCwgYm9vbCBfaXNSZWlzc3VhYmxlKSByZXR1cm5zKHVpbnQgZXJyb3JDb2RlKTsKICAgIGZ1bmN0aW9uIHJlaXNzdWVBc3NldChieXRlczMyIF9zeW1ib2wsIHVpbnQgX3ZhbHVlKSByZXR1cm5zKHVpbnQgZXJyb3JDb2RlKTsKICAgIGZ1bmN0aW9uIHJldm9rZUFzc2V0KGJ5dGVzMzIgX3N5bWJvbCwgdWludCBfdmFsdWUpIHJldHVybnModWludCBlcnJvckNvZGUpOwogICAgZnVuY3Rpb24gaXNSZWlzc3VhYmxlKGJ5dGVzMzIgX3N5bWJvbCkgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyc2hpcChieXRlczMyIF9zeW1ib2wsIGFkZHJlc3MgX25ld093bmVyKSByZXR1cm5zKHVpbnQgZXJyb3JDb2RlKTsKfQoKY29udHJhY3QgQk1DQXNzZXQgewogICAgZnVuY3Rpb24gX190cmFuc2ZlcldpdGhSZWZlcmVuY2UoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX190cmFuc2ZlckZyb21XaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UsIGFkZHJlc3MgX3NlbmRlcikgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIF9fYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX19wcm9jZXNzKGJ5dGVzIF9kYXRhLCBhZGRyZXNzIF9zZW5kZXIpIHBheWFibGUgewogICAgICAgIHRocm93OwogICAgfQp9Cgpjb250cmFjdCBFUkMyMCB7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7Cn0KCi8qKgogKiBAdGl0bGUgQk1DIEFzc2V0IFByb3h5LgogKgogKiBQcm94eSBpbXBsZW1lbnRzIEVSQzIwIGludGVyZmFjZSBhbmQgYWN0cyBhcyBhIGdhdGV3YXkgdG8gYSBzaW5nbGUgcGxhdGZvcm0gYXNzZXQuCiAqIFByb3h5IGFkZHMgc3ltYm9sIGFuZCBjYWxsZXIoc2VuZGVyKSB3aGVuIGZvcndhcmRpbmcgcmVxdWVzdHMgdG8gcGxhdGZvcm0uCiAqIEV2ZXJ5IHJlcXVlc3QgdGhhdCBpcyBtYWRlIGJ5IGNhbGxlciBmaXJzdCBzZW50IHRvIHRoZSBzcGVjaWZpYyBhc3NldCBpbXBsZW1lbnRhdGlvbgogKiBjb250cmFjdCwgd2hpY2ggdGhlbiBjYWxscyBiYWNrIHRvIGJlIGZvcndhcmRlZCBvbnRvIHBsYXRmb3JtLgogKgogKiBDYWxscyBmbG93OiBDYWxsZXIgLT4KICogICAgICAgICAgICAgUHJveHkuZnVuYyguLi4pIC0+CiAqICAgICAgICAgICAgIEFzc2V0Ll9fZnVuYyguLi4sIENhbGxlci5hZGRyZXNzKSAtPgogKiAgICAgICAgICAgICBQcm94eS5fX2Z1bmMoLi4uLCBDYWxsZXIuYWRkcmVzcykgLT4KICogICAgICAgICAgICAgUGxhdGZvcm0ucHJveHlGdW5jKC4uLiwgc3ltYm9sLCBDYWxsZXIuYWRkcmVzcykKICoKICogQXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgaXMgbXV0YWJsZSwgYnV0IGVhY2ggdXNlciBoYXZlIGFuIG9wdGlvbiB0byBzdGljayB3aXRoCiAqIG9sZCBpbXBsZW1lbnRhdGlvbiwgdGhyb3VnaCBleHBsaWNpdCBkZWNpc2lvbiBtYWRlIGluIHRpbWVseSBtYW5uZXIsIGlmIGhlIGRvZXNuJ3QgYWdyZWUKICogd2l0aCBuZXcgcnVsZXMuCiAqIEVhY2ggdXNlciBoYXZlIGEgcG9zc2liaWxpdHkgdG8gdXBncmFkZSB0byBsYXRlc3QgYXNzZXQgY29udHJhY3QgaW1wbGVtZW50YXRpb24sIHdpdGhvdXQgdGhlCiAqIHBvc3NpYmlsaXR5IHRvIHJvbGxiYWNrLgogKgogKiBOb3RlOiBhbGwgdGhlIG5vbiBjb25zdGFudCBmdW5jdGlvbnMgcmV0dXJuIGZhbHNlIGluc3RlYWQgb2YgdGhyb3dpbmcgaW4gY2FzZSBpZiBzdGF0ZSBjaGFuZ2UKICogZGlkbid0IGhhcHBlbiB5ZXQuCiAqLwpjb250cmFjdCBCTUNBc3NldFByb3h5IGlzIEVSQzIwIHsKCiAgICAvLyBTdXBwb3J0cyBCTUNQbGF0Zm9ybSBhYmlsaXR5IHRvIHJldHVybiBlcnJvciBjb2RlcyBmcm9tIG1ldGhvZHMKICAgIHVpbnQgY29uc3RhbnQgT0sgPSAxOwoKICAgIC8vIEFzc2lnbmVkIHBsYXRmb3JtLCBpbW11dGFibGUuCiAgICBCTUNQbGF0Zm9ybSBwdWJsaWMgYm1jUGxhdGZvcm07CgogICAgLy8gQXNzaWduZWQgc3ltYm9sLCBpbW11dGFibGUuCiAgICBieXRlczMyIHB1YmxpYyBzbWJsOwoKICAgIC8vIEFzc2lnbmVkIG5hbWUsIGltbXV0YWJsZS4KICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKCiAgICAvKioKICAgICAqIFNldHMgcGxhdGZvcm0gYWRkcmVzcywgYXNzaWducyBzeW1ib2wgYW5kIG5hbWUuCiAgICAgKgogICAgICogQ2FuIGJlIHNldCBvbmx5IG9uY2UuCiAgICAgKgogICAgICogQHBhcmFtIF9ibWNQbGF0Zm9ybSBwbGF0Zm9ybSBjb250cmFjdCBhZGRyZXNzLgogICAgICogQHBhcmFtIF9zeW1ib2wgYXNzaWduZWQgc3ltYm9sLgogICAgICogQHBhcmFtIF9uYW1lIGFzc2lnbmVkIG5hbWUuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBpbml0KEJNQ1BsYXRmb3JtIF9ibWNQbGF0Zm9ybSwgc3RyaW5nIF9zeW1ib2wsIHN0cmluZyBfbmFtZSkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKGFkZHJlc3MoYm1jUGxhdGZvcm0pICE9IDB4MCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGJtY1BsYXRmb3JtID0gX2JtY1BsYXRmb3JtOwogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICAgICAgc21ibCA9IHN0cmluZ1RvQnl0ZXMzMihfc3ltYm9sKTsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gc3RyaW5nVG9CeXRlczMyKHN0cmluZyBtZW1vcnkgc291cmNlKSByZXR1cm5zIChieXRlczMyIHJlc3VsdCkgewogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICByZXN1bHQgOj0gbWxvYWQoYWRkKHNvdXJjZSwgMzIpKQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIE9ubHkgcGxhdGZvcm0gaXMgYWxsb3dlZCB0byBjYWxsLgogICAgICovCiAgICBtb2RpZmllciBvbmx5Qk1DUGxhdGZvcm0oKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhibWNQbGF0Zm9ybSkpIHsKICAgICAgICAgICAgXzsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBPbmx5IGN1cnJlbnQgYXNzZXQgb3duZXIgaXMgYWxsb3dlZCB0byBjYWxsLgogICAgICovCiAgICBtb2RpZmllciBvbmx5QXNzZXRPd25lcigpIHsKICAgICAgICBpZiAoYm1jUGxhdGZvcm0uaXNPd25lcihtc2cuc2VuZGVyLCBzbWJsKSkgewogICAgICAgICAgICBfOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgZm9yIGN1cnJlbnQgY2FsbGVyLgogICAgICoKICAgICAqIEByZXR1cm4gYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QuCiAgICAgKi8KICAgIGZ1bmN0aW9uIF9nZXRBc3NldCgpIGludGVybmFsIHJldHVybnMoQk1DQXNzZXQpIHsKICAgICAgICByZXR1cm4gQk1DQXNzZXQoZ2V0VmVyc2lvbkZvcihtc2cuc2VuZGVyKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFzc2V0IHRvdGFsIHN1cHBseS4KICAgICAqCiAgICAgKiBAcmV0dXJuIGFzc2V0IHRvdGFsIHN1cHBseS4KICAgICAqLwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gYm1jUGxhdGZvcm0udG90YWxTdXBwbHkoc21ibCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFzc2V0IGJhbGFuY2UgZm9yIGEgcGFydGljdWxhciBob2xkZXIuCiAgICAgKgogICAgICogQHBhcmFtIF9vd25lciBob2xkZXIgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcmV0dXJuIGhvbGRlciBiYWxhbmNlLgogICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBibWNQbGF0Zm9ybS5iYWxhbmNlT2YoX293bmVyLCBzbWJsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYXNzZXQgYWxsb3dhbmNlIGZyb20gb25lIGhvbGRlciB0byBhbm90aGVyLgogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBob2xkZXIgdGhhdCBhbGxvd2VkIHNwZW5kaW5nLgogICAgICogQHBhcmFtIF9zcGVuZGVyIGhvbGRlciB0aGF0IGlzIGFsbG93ZWQgdG8gc3BlbmQuCiAgICAgKgogICAgICogQHJldHVybiBob2xkZXIgdG8gc3BlbmRlciBhbGxvd2FuY2UuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gYm1jUGxhdGZvcm0uYWxsb3dhbmNlKF9mcm9tLCBfc3BlbmRlciwgc21ibCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFzc2V0IGRlY2ltYWxzLgogICAgICoKICAgICAqIEByZXR1cm4gYXNzZXQgZGVjaW1hbHMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkgY29uc3RhbnQgcmV0dXJucyh1aW50OCkgewogICAgICAgIHJldHVybiBibWNQbGF0Zm9ybS5iYXNlVW5pdChzbWJsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZmVycyBhc3NldCBiYWxhbmNlIGZyb20gdGhlIGNhbGxlciB0byBzcGVjaWZpZWQgcmVjZWl2ZXIuCiAgICAgKgogICAgICogQHBhcmFtIF90byBob2xkZXIgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChfdG8gIT0gMHgwKSB7CiAgICAgICAgICByZXR1cm4gX3RyYW5zZmVyV2l0aFJlZmVyZW5jZShfdG8sIF92YWx1ZSwgIiIpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZmVycyBhc3NldCBiYWxhbmNlIGZyb20gdGhlIGNhbGxlciB0byBzcGVjaWZpZWQgcmVjZWl2ZXIgYWRkaW5nIHNwZWNpZmllZCBjb21tZW50LgogICAgICoKICAgICAqIEBwYXJhbSBfdG8gaG9sZGVyIGFkZHJlc3MgdG8gZ2l2ZSB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICogQHBhcmFtIF9yZWZlcmVuY2UgdHJhbnNmZXIgY29tbWVudCB0byBiZSBpbmNsdWRlZCBpbiBhIHBsYXRmb3JtJ3MgVHJhbnNmZXIgZXZlbnQuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcldpdGhSZWZlcmVuY2UoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKF90byAhPSAweDApIHsKICAgICAgICAgICAgcmV0dXJuIF90cmFuc2ZlcldpdGhSZWZlcmVuY2UoX3RvLCBfdmFsdWUsIF9yZWZlcmVuY2UpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJlc29sdmVzIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGZvciB0aGUgY2FsbGVyIGFuZCBmb3J3YXJkcyB0aGVyZSBhcmd1bWVudHMgYWxvbmcgd2l0aAogICAgICogdGhlIGNhbGxlciBhZGRyZXNzLgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gX3RyYW5zZmVyV2l0aFJlZmVyZW5jZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIHN0cmluZyBfcmVmZXJlbmNlKSBpbnRlcm5hbCByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gX2dldEFzc2V0KCkuX190cmFuc2ZlcldpdGhSZWZlcmVuY2UoX3RvLCBfdmFsdWUsIF9yZWZlcmVuY2UsIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogUGVyZm9ybXMgdHJhbnNmZXIgY2FsbCBvbiB0aGUgcGxhdGZvcm0gYnkgdGhlIG5hbWUgb2Ygc3BlY2lmaWVkIHNlbmRlci4KICAgICAqCiAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgYnkgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYXNzaWduZWQgdG8gc2VuZGVyLgogICAgICoKICAgICAqIEBwYXJhbSBfdG8gaG9sZGVyIGFkZHJlc3MgdG8gZ2l2ZSB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICogQHBhcmFtIF9yZWZlcmVuY2UgdHJhbnNmZXIgY29tbWVudCB0byBiZSBpbmNsdWRlZCBpbiBhIHBsYXRmb3JtJ3MgVHJhbnNmZXIgZXZlbnQuCiAgICAgKiBAcGFyYW0gX3NlbmRlciBpbml0aWFsIGNhbGxlci4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIF9fdHJhbnNmZXJXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UsIGFkZHJlc3MgX3NlbmRlcikgb25seUFjY2Vzcyhfc2VuZGVyKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gYm1jUGxhdGZvcm0ucHJveHlUcmFuc2ZlcldpdGhSZWZlcmVuY2UoX3RvLCBfdmFsdWUsIHNtYmwsIF9yZWZlcmVuY2UsIF9zZW5kZXIpID09IE9LOwogICAgfQoKICAgIC8qKgogICAgICogUHJmb3JtcyBhbGxvd2FuY2UgdHJhbnNmZXIgb2YgYXNzZXQgYmFsYW5jZSBiZXR3ZWVuIGhvbGRlcnMuCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIGhvbGRlciBhZGRyZXNzIHRvIHRha2UgZnJvbS4KICAgICAqIEBwYXJhbSBfdG8gaG9sZGVyIGFkZHJlc3MgdG8gZ2l2ZSB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKF90byAhPSAweDApIHsKICAgICAgICAgICAgcmV0dXJuIF9nZXRBc3NldCgpLl9fdHJhbnNmZXJGcm9tV2l0aFJlZmVyZW5jZShfZnJvbSwgX3RvLCBfdmFsdWUsICIiLCBtc2cuc2VuZGVyKTsKICAgICAgICAgfQogICAgICAgICBlbHNlIHsKICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUGVyZm9ybXMgYWxsb3dhbmNlIHRyYW5zZmVyIGNhbGwgb24gdGhlIHBsYXRmb3JtIGJ5IHRoZSBuYW1lIG9mIHNwZWNpZmllZCBzZW5kZXIuCiAgICAgKgogICAgICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJ5IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFzc2lnbmVkIHRvIHNlbmRlci4KICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gaG9sZGVyIGFkZHJlc3MgdG8gdGFrZSBmcm9tLgogICAgICogQHBhcmFtIF90byBob2xkZXIgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgKiBAcGFyYW0gX3JlZmVyZW5jZSB0cmFuc2ZlciBjb21tZW50IHRvIGJlIGluY2x1ZGVkIGluIGEgcGxhdGZvcm0ncyBUcmFuc2ZlciBldmVudC4KICAgICAqIEBwYXJhbSBfc2VuZGVyIGluaXRpYWwgY2FsbGVyLgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gX190cmFuc2ZlckZyb21XaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UsIGFkZHJlc3MgX3NlbmRlcikgb25seUFjY2Vzcyhfc2VuZGVyKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gYm1jUGxhdGZvcm0ucHJveHlUcmFuc2ZlckZyb21XaXRoUmVmZXJlbmNlKF9mcm9tLCBfdG8sIF92YWx1ZSwgc21ibCwgX3JlZmVyZW5jZSwgX3NlbmRlcikgPT0gT0s7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIGFzc2V0IHNwZW5kaW5nIGFsbG93YW5jZSBmb3IgYSBzcGVjaWZpZWQgc3BlbmRlci4KICAgICAqCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgaG9sZGVyIGFkZHJlc3MgdG8gc2V0IGFsbG93YW5jZSB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIGFsbG93LgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKF9zcGVuZGVyICE9IDB4MCkgewogICAgICAgICAgICAgcmV0dXJuIF9nZXRBc3NldCgpLl9fYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlLCBtc2cuc2VuZGVyKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBQZXJmb3JtcyBhbGxvd2FuY2Ugc2V0dGluZyBjYWxsIG9uIHRoZSBwbGF0Zm9ybSBieSB0aGUgbmFtZSBvZiBzcGVjaWZpZWQgc2VuZGVyLgogICAgICoKICAgICAqIENhbiBvbmx5IGJlIGNhbGxlZCBieSBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhc3NpZ25lZCB0byBzZW5kZXIuCiAgICAgKgogICAgICogQHBhcmFtIF9zcGVuZGVyIGhvbGRlciBhZGRyZXNzIHRvIHNldCBhbGxvd2FuY2UgdG8uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCB0byBhbGxvdy4KICAgICAqIEBwYXJhbSBfc2VuZGVyIGluaXRpYWwgY2FsbGVyLgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gX19hcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlLCBhZGRyZXNzIF9zZW5kZXIpIG9ubHlBY2Nlc3MoX3NlbmRlcikgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIGJtY1BsYXRmb3JtLnByb3h5QXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlLCBzbWJsLCBfc2VuZGVyKSA9PSBPSzsKICAgIH0KCiAgICAvKioKICAgICAqIEVtaXRzIEVSQzIwIFRyYW5zZmVyIGV2ZW50IG9uIHRoaXMgY29udHJhY3QuCiAgICAgKgogICAgICogQ2FuIG9ubHkgYmUsIGFuZCwgY2FsbGVkIGJ5IGFzc2lnbmVkIHBsYXRmb3JtIHdoZW4gYXNzZXQgdHJhbnNmZXIgaGFwcGVucy4KICAgICAqLwogICAgZnVuY3Rpb24gZW1pdFRyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seUJNQ1BsYXRmb3JtKCkgewogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBFbWl0cyBFUkMyMCBBcHByb3ZhbCBldmVudCBvbiB0aGlzIGNvbnRyYWN0LgogICAgICoKICAgICAqIENhbiBvbmx5IGJlLCBhbmQsIGNhbGxlZCBieSBhc3NpZ25lZCBwbGF0Zm9ybSB3aGVuIGFzc2V0IGFsbG93YW5jZSBzZXQgaGFwcGVucy4KICAgICAqLwogICAgZnVuY3Rpb24gZW1pdEFwcHJvdmUoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIG9ubHlCTUNQbGF0Zm9ybSgpIHsKICAgICAgICBBcHByb3ZhbChfZnJvbSwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXNvbHZlcyBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBmb3IgdGhlIGNhbGxlciBhbmQgZm9yd2FyZHMgdGhlcmUgdHJhbnNhY3Rpb24gZGF0YSwKICAgICAqIGFsb25nIHdpdGggdGhlIHZhbHVlLiBUaGlzIGFsbG93cyBmb3IgcHJveHkgaW50ZXJmYWNlIGdyb3d0aC4KICAgICAqLwogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgX2dldEFzc2V0KCkuX19wcm9jZXNzLnZhbHVlKG1zZy52YWx1ZSkobXNnLmRhdGEsIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogSW5kaWNhdGVzIGFuIHVwZ3JhZGUgZnJlZXplLXRpbWUgc3RhcnQsIGFuZCB0aGUgbmV4dCBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdC4KICAgICAqLwogICAgZXZlbnQgVXBncmFkZVByb3Bvc2FsKGFkZHJlc3MgbmV3VmVyc2lvbik7CgogICAgLy8gQ3VycmVudCBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgYWRkcmVzcyBsYXRlc3RWZXJzaW9uOwoKICAgIC8vIFByb3Bvc2VkIG5leHQgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgIGFkZHJlc3MgcGVuZGluZ1ZlcnNpb247CgogICAgLy8gVXBncmFkZSBmcmVlemUtdGltZSBzdGFydC4KICAgIHVpbnQgcGVuZGluZ1ZlcnNpb25UaW1lc3RhbXA7CgogICAgLy8gVGltZXNwYW4gZm9yIHVzZXJzIHRvIHJldmlldyB0aGUgbmV3IGltcGxlbWVudGF0aW9uIGFuZCBtYWtlIGRlY2lzaW9uLgogICAgdWludCBjb25zdGFudCBVUEdSQURFX0ZSRUVaRV9USU1FID0gMyBkYXlzOwoKICAgIC8vIEFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MgdGhhdCB1c2VyIGRlY2lkZWQgdG8gc3RpY2sgd2l0aC4KICAgIC8vIDB4MCBtZWFucyB0aGF0IHVzZXIgdXNlcyBsYXRlc3QgdmVyc2lvbi4KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBhZGRyZXNzKSB1c2VyT3B0T3V0VmVyc2lvbjsKCiAgICAvKioKICAgICAqIE9ubHkgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYXNzaWduZWQgdG8gc2VuZGVyIGlzIGFsbG93ZWQgdG8gY2FsbC4KICAgICAqLwogICAgbW9kaWZpZXIgb25seUFjY2VzcyhhZGRyZXNzIF9zZW5kZXIpIHsKICAgICAgICBpZiAoZ2V0VmVyc2lvbkZvcihfc2VuZGVyKSA9PSBtc2cuc2VuZGVyKSB7CiAgICAgICAgICAgIF87CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzIGFzc2lnbmVkIHRvIHNlbmRlci4KICAgICAqCiAgICAgKiBAcGFyYW0gX3NlbmRlciBzZW5kZXIgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcmV0dXJuIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFZlcnNpb25Gb3IoYWRkcmVzcyBfc2VuZGVyKSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gdXNlck9wdE91dFZlcnNpb25bX3NlbmRlcl0gPT0gMCA/IGxhdGVzdFZlcnNpb24gOiB1c2VyT3B0T3V0VmVyc2lvbltfc2VuZGVyXTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgY3VycmVudCBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgICoKICAgICAqIEByZXR1cm4gYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0TGF0ZXN0VmVyc2lvbigpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcykgewogICAgICAgIHJldHVybiBsYXRlc3RWZXJzaW9uOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBwcm9wb3NlZCBuZXh0IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKgogICAgICogQHJldHVybiBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBnZXRQZW5kaW5nVmVyc2lvbigpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcykgewogICAgICAgIHJldHVybiBwZW5kaW5nVmVyc2lvbjsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdXBncmFkZSBmcmVlemUtdGltZSBzdGFydC4KICAgICAqCiAgICAgKiBAcmV0dXJuIGZyZWV6ZS10aW1lIHN0YXJ0LgogICAgICovCiAgICBmdW5jdGlvbiBnZXRQZW5kaW5nVmVyc2lvblRpbWVzdGFtcCgpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBwZW5kaW5nVmVyc2lvblRpbWVzdGFtcDsKICAgIH0KCiAgICAvKioKICAgICAqIFByb3Bvc2UgbmV4dCBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgICoKICAgICAqIENhbiBvbmx5IGJlIGNhbGxlZCBieSBjdXJyZW50IGFzc2V0IG93bmVyLgogICAgICoKICAgICAqIE5vdGU6IGZyZWV6ZS10aW1lIHNob3VsZCBub3QgYmUgYXBwbGllZCBmb3IgdGhlIGluaXRpYWwgc2V0dXAuCiAgICAgKgogICAgICogQHBhcmFtIF9uZXdWZXJzaW9uIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBwcm9wb3NlVXBncmFkZShhZGRyZXNzIF9uZXdWZXJzaW9uKSBvbmx5QXNzZXRPd25lcigpIHJldHVybnMoYm9vbCkgewogICAgICAgIC8vIFNob3VsZCBub3QgYWxyZWFkeSBiZSBpbiB0aGUgdXBncmFkaW5nIHByb2Nlc3MuCiAgICAgICAgaWYgKHBlbmRpbmdWZXJzaW9uICE9IDB4MCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIC8vIE5ldyB2ZXJzaW9uIGFkZHJlc3Mgc2hvdWxkIGJlIG90aGVyIHRoYW4gMHgwLgogICAgICAgIGlmIChfbmV3VmVyc2lvbiA9PSAweDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICAvLyBEb24ndCBhcHBseSBmcmVlemUtdGltZSBmb3IgdGhlIGluaXRpYWwgc2V0dXAuCiAgICAgICAgaWYgKGxhdGVzdFZlcnNpb24gPT0gMHgwKSB7CiAgICAgICAgICAgIGxhdGVzdFZlcnNpb24gPSBfbmV3VmVyc2lvbjsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHBlbmRpbmdWZXJzaW9uID0gX25ld1ZlcnNpb247CiAgICAgICAgcGVuZGluZ1ZlcnNpb25UaW1lc3RhbXAgPSBub3c7CiAgICAgICAgVXBncmFkZVByb3Bvc2FsKF9uZXdWZXJzaW9uKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIENhbmNlbCB0aGUgcGVuZGluZyB1cGdyYWRlIHByb2Nlc3MuCiAgICAgKgogICAgICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJ5IGN1cnJlbnQgYXNzZXQgb3duZXIuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBwdXJnZVVwZ3JhZGUoKSBvbmx5QXNzZXRPd25lcigpIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChwZW5kaW5nVmVyc2lvbiA9PSAweDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBkZWxldGUgcGVuZGluZ1ZlcnNpb247CiAgICAgICAgZGVsZXRlIHBlbmRpbmdWZXJzaW9uVGltZXN0YW1wOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogRmluYWxpemUgYW4gdXBncmFkZSBwcm9jZXNzIHNldHRpbmcgbmV3IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKgogICAgICogQ2FuIG9ubHkgYmUgY2FsbGVkIGFmdGVyIGFuIHVwZ3JhZGUgZnJlZXplLXRpbWUuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBjb21taXRVcGdyYWRlKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKHBlbmRpbmdWZXJzaW9uID09IDB4MCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChwZW5kaW5nVmVyc2lvblRpbWVzdGFtcCArIFVQR1JBREVfRlJFRVpFX1RJTUUgPiBub3cpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBsYXRlc3RWZXJzaW9uID0gcGVuZGluZ1ZlcnNpb247CiAgICAgICAgZGVsZXRlIHBlbmRpbmdWZXJzaW9uOwogICAgICAgIGRlbGV0ZSBwZW5kaW5nVmVyc2lvblRpbWVzdGFtcDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIERpc2FncmVlIHdpdGggcHJvcG9zZWQgdXBncmFkZSwgYW5kIHN0aWNrIHdpdGggY3VycmVudCBhc3NldCBpbXBsZW1lbnRhdGlvbgogICAgICogdW50aWwgZnVydGhlciBleHBsaWNpdCBhZ3JlZW1lbnQgdG8gdXBncmFkZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIG9wdE91dCgpIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmICh1c2VyT3B0T3V0VmVyc2lvblttc2cuc2VuZGVyXSAhPSAweDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICB1c2VyT3B0T3V0VmVyc2lvblttc2cuc2VuZGVyXSA9IGxhdGVzdFZlcnNpb247CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbXBsaWNpdGx5IGFncmVlIHRvIHVwZ3JhZGUgdG8gY3VycmVudCBhbmQgZnV0dXJlIGFzc2V0IGltcGxlbWVudGF0aW9uIHVwZ3JhZGVzLAogICAgICogdW50aWwgZnVydGhlciBleHBsaWNpdCBkaXNhZ3JlZW1lbnQuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBvcHRJbigpIHJldHVybnMoYm9vbCkgewogICAgICAgIGRlbGV0ZSB1c2VyT3B0T3V0VmVyc2lvblttc2cuc2VuZGVyXTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ=='.
	

]
