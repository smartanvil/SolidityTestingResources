Class {
	#name : #SRT63ed2a40d7b0a8fc9017c9b9c765deb531115ea8,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT63ed2a40d7b0a8fc9017c9b9c765deb531115ea8 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLy8gSXRlbTIzcyA6MwoKLy8vIEB0aXRsZSBJbnRlcmZhY2UgZm9yIGNvbnRyYWN0cyBjb25mb3JtaW5nIHRvIEVSQy03MjE6IE5vbi1GdW5naWJsZSBUb2tlbnMKLy8vIEBhdXRob3IgRGlldGVyIFNoaXJsZXkgPDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iZjQ5MDkxODA5MWI0OTU4YzlkOWI5OThlOTE5YWRhOTc5YiI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+IChodHRwczovL2dpdGh1Yi5jb20vZGV0ZSkKY29udHJhY3QgRVJDNzIxIHsKICAvLyBSZXF1aXJlZCBtZXRob2RzCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICBmdW5jdGlvbiBpbXBsZW1lbnRzRVJDNzIxKCkgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIGFkZHIpOwogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiB0b3RhbCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB0b2tlbklkKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBhcHByb3ZlZCwgdWludDI1NiB0b2tlbklkKTsKCn0KCi8vLyBNb2RpZmllZCBmcm9tIHRoZSBDcnlwdG9DZWxlYnJpdGllcyBjb250cmFjdCBBbmQgRW1vamlCbG9ja2hhaW4gYW5kIDUwc2hhZGVzRVRICmNvbnRyYWN0IEV0aGVyV2F0Y2ggaXMgRVJDNzIxIHsKCiAgLyoqKiBFVkVOVFMgKioqLwoKICAvLy8gQGRldiBUaGUgQmlydGggZXZlbnQgaXMgZmlyZWQgd2hlbmV2ZXIgYSBuZXcgaXRlbTIzIGNvbWVzIGludG8gZXhpc3RlbmNlLgogIGV2ZW50IEJpcnRoKHVpbnQyNTYgdG9rZW5JZCwgc3RyaW5nIG5hbWUsIGFkZHJlc3Mgb3duZXIpOwoKICAvLy8gQGRldiBUaGUgVG9rZW5Tb2xkIGV2ZW50IGlzIGZpcmVkIHdoZW5ldmVyIGEgdG9rZW4gaXMgc29sZC4KICBldmVudCBUb2tlblNvbGQodWludDI1NiB0b2tlbklkLCB1aW50MjU2IG9sZFByaWNlLCB1aW50MjU2IG5ld1ByaWNlLCBhZGRyZXNzIHByZXZPd25lciwgYWRkcmVzcyB3aW5uZXIsIHN0cmluZyBuYW1lKTsKCiAgLy8vIEBkZXYgVHJhbnNmZXIgZXZlbnQgYXMgZGVmaW5lZCBpbiBjdXJyZW50IGRyYWZ0IG9mIEVSQzcyMS4KICAvLy8gIG93bmVyc2hpcCBpcyBhc3NpZ25lZCwgaW5jbHVkaW5nIGJpcnRocy4KICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CgogIC8qKiogQ09OU1RBTlRTICoqKi8KICAvL3VpbnQyNTYgcHJpdmF0ZSBzdGFydGluZ1ByaWNlID0gMC4wMDEgZXRoZXI7CgogIC8vLyBAbm90aWNlIE5hbWUgYW5kIHN5bWJvbCBvZiB0aGUgbm9uIGZ1bmdpYmxlIHRva2VuLCBhcyBkZWZpbmVkIGluIEVSQzcyMS4KICBzdHJpbmcgcHVibGljIGNvbnN0YW50IE5BTUUgPSAiQ3J5cHRvV2F0Y2hlcyI7IC8vIHNvbGhpbnQtZGlzYWJsZS1saW5lCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBTWU1CT0wgPSAiQ3J5cHRvV2F0Y2giOyAvLyBzb2xoaW50LWRpc2FibGUtbGluZQoKICAvKioqIFNUT1JBR0UgKioqLwoKICAvLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBpdGVtMjMgSURzIHRvIHRoZSBhZGRyZXNzIHRoYXQgb3ducyB0aGVtLiBBbGwgaXRlbTIzcyBoYXZlCiAgLy8vICBzb21lIHZhbGlkIG93bmVyIGFkZHJlc3MuCiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgaXRlbTIzSW5kZXhUb093bmVyOwoKICAvLyBAZGV2IEEgbWFwcGluZyBmcm9tIG93bmVyIGFkZHJlc3MgdG8gY291bnQgb2YgdG9rZW5zIHRoYXQgYWRkcmVzcyBvd25zLgogIC8vICBVc2VkIGludGVybmFsbHkgaW5zaWRlIGJhbGFuY2VPZigpIHRvIHJlc29sdmUgb3duZXJzaGlwIGNvdW50LgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBvd25lcnNoaXBUb2tlbkNvdW50OwoKICAvLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBJdGVtMjNJRHMgdG8gYW4gYWRkcmVzcyB0aGF0IGhhcyBiZWVuIGFwcHJvdmVkIHRvIGNhbGwKICAvLy8gIHRyYW5zZmVyRnJvbSgpLiBFYWNoIEl0ZW0yMyBjYW4gb25seSBoYXZlIG9uZSBhcHByb3ZlZCBhZGRyZXNzIGZvciB0cmFuc2ZlcgogIC8vLyAgYXQgYW55IHRpbWUuIEEgemVybyB2YWx1ZSBtZWFucyBubyBhcHByb3ZhbCBpcyBvdXRzdGFuZGluZy4KICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBpdGVtMjNJbmRleFRvQXBwcm92ZWQ7CgogIC8vIEBkZXYgQSBtYXBwaW5nIGZyb20gSXRlbTIzSURzIHRvIHRoZSBwcmljZSBvZiB0aGUgdG9rZW4uCiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIGl0ZW0yM0luZGV4VG9QcmljZTsKCiAgLy8vIEBkZXYgQSBtYXBwaW5nIGZyb20gSXRlbTIzSURzIHRvIHRoZSBwcmV2aXB1cyBwcmljZSBvZiB0aGUgdG9rZW4uIFVzZWQKICAvLy8gdG8gY2FsY3VsYXRlIHByaWNlIGRlbHRhIGZvciBwYXlvdXRzCiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIGl0ZW0yM0luZGV4VG9QcmV2aW91c1ByaWNlOwoKICAvLyBAZGV2IEEgbWFwcGluZyBmcm9tIGl0ZW0yM0lkIHRvIHRoZSA3IGxhc3Qgb3duZXJzLgogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzc1s1XSkgcHJpdmF0ZSBpdGVtMjNJbmRleFRvUHJldmlvdXNPd25lcnM7CgoKICAvLyBUaGUgYWRkcmVzc2VzIG9mIHRoZSBhY2NvdW50cyAob3IgY29udHJhY3RzKSB0aGF0IGNhbiBleGVjdXRlIGFjdGlvbnMgd2l0aGluIGVhY2ggcm9sZXMuCiAgYWRkcmVzcyBwdWJsaWMgY2VvQWRkcmVzczsKICBhZGRyZXNzIHB1YmxpYyBjb29BZGRyZXNzOwoKICAvKioqIERBVEFUWVBFUyAqKiovCiAgc3RydWN0IEl0ZW0yMyB7CiAgICBzdHJpbmcgbmFtZTsKICB9CgogIEl0ZW0yM1tdIHByaXZhdGUgaXRlbTIzczsKCiAgLyoqKiBBQ0NFU1MgTU9ESUZJRVJTICoqKi8KICAvLy8gQGRldiBBY2Nlc3MgbW9kaWZpZXIgZm9yIENFTy1vbmx5IGZ1bmN0aW9uYWxpdHkKICBtb2RpZmllciBvbmx5Q0VPKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNlb0FkZHJlc3MpOwogICAgXzsKICB9CgogIC8vLyBAZGV2IEFjY2VzcyBtb2RpZmllciBmb3IgQ09PLW9ubHkgZnVuY3Rpb25hbGl0eQogIG1vZGlmaWVyIG9ubHlDT08oKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY29vQWRkcmVzcyk7CiAgICBfOwogIH0KCiAgLy8vIEFjY2VzcyBtb2RpZmllciBmb3IgY29udHJhY3Qgb3duZXIgb25seSBmdW5jdGlvbmFsaXR5CiAgbW9kaWZpZXIgb25seUNMZXZlbCgpIHsKICAgIHJlcXVpcmUoCiAgICAgIG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyB8fAogICAgICBtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MKICAgICk7CiAgICBfOwogIH0KCiAgLyoqKiBDT05TVFJVQ1RPUiAqKiovCiAgZnVuY3Rpb24gRXRoZXJXYXRjaCgpIHB1YmxpYyB7CiAgICBjZW9BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgIGNvb0FkZHJlc3MgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqKiBQVUJMSUMgRlVOQ1RJT05TICoqKi8KICAvLy8gQG5vdGljZSBHcmFudCBhbm90aGVyIGFkZHJlc3MgdGhlIHJpZ2h0IHRvIHRyYW5zZmVyIHRva2VuIHZpYSB0YWtlT3duZXJzaGlwKCkgYW5kIHRyYW5zZmVyRnJvbSgpLgogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIGJlIGdyYW50ZWQgdHJhbnNmZXIgYXBwcm92YWwuIFBhc3MgYWRkcmVzcygwKSB0bwogIC8vLyAgY2xlYXIgYWxsIGFwcHJvdmFscy4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gYXBwcm92ZSgKICAgIGFkZHJlc3MgX3RvLAogICAgdWludDI1NiBfdG9rZW5JZAogICkgcHVibGljIHsKICAgIC8vIENhbGxlciBtdXN0IG93biB0b2tlbi4KICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKCiAgICBpdGVtMjNJbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdID0gX3RvOwoKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgLy8vIEZvciBxdWVyeWluZyBiYWxhbmNlIG9mIGEgcGFydGljdWxhciBhY2NvdW50CiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZm9yIGJhbGFuY2UgcXVlcnkKICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gb3duZXJzaGlwVG9rZW5Db3VudFtfb3duZXJdOwogIH0KCiAgLy8vIEBkZXYgQ3JlYXRlcyBhIG5ldyBJdGVtMjMgd2l0aCB0aGUgZ2l2ZW4gbmFtZS4KICBmdW5jdGlvbiBjcmVhdGVDb250cmFjdEl0ZW0yMyhzdHJpbmcgX25hbWUgLCBzdHJpbmcgX3N0YXJ0aW5nUCApIHB1YmxpYyBvbmx5Q09PIHsKICAgIF9jcmVhdGVJdGVtMjMoX25hbWUsIGFkZHJlc3ModGhpcyksIHN0cmluZ1RvVWludCggX3N0YXJ0aW5nUCkpOwogIH0KCgoKZnVuY3Rpb24gc3RyaW5nVG9VaW50KHN0cmluZyBfYW1vdW50KSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50IHJlc3VsdCkgewogICAgYnl0ZXMgbWVtb3J5IGIgPSBieXRlcyhfYW1vdW50KTsKICAgIHVpbnQgaTsKICAgIHVpbnQgY291bnRlckJlZm9yZURvdDsKICAgIHVpbnQgY291bnRlckFmdGVyRG90OwogICAgcmVzdWx0ID0gMDsKICAgIHVpbnQgdG90TnVtID0gYi5sZW5ndGg7CiAgICB0b3ROdW0tLTsKICAgIGJvb2wgaGFzRG90ID0gZmFsc2U7CgogICAgZm9yIChpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgICB1aW50IGMgPSB1aW50KGJbaV0pOwoKICAgICAgICBpZiAoYyA+PSA0OCAmJiBjIDw9IDU3KSB7CiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCAqIDEwICsgKGMgLSA0OCk7CiAgICAgICAgICAgIGNvdW50ZXJCZWZvcmVEb3QgKys7CiAgICAgICAgICAgIHRvdE51bS0tOwogICAgICAgIH0KCiAgICAgICAgaWYoYyA9PSA0Nil7CiAgICAgICAgICAgIGhhc0RvdCA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KCiAgICBpZihoYXNEb3QpIHsKICAgICAgICBmb3IgKHVpbnQgaiA9IGNvdW50ZXJCZWZvcmVEb3QgKyAxOyBqIDwgMTg7IGorKykgewogICAgICAgICAgICB1aW50IG0gPSB1aW50KGJbal0pOwoKICAgICAgICAgICAgaWYgKG0gPj0gNDggJiYgbSA8PSA1NykgewogICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICogMTAgKyAobSAtIDQ4KTsKICAgICAgICAgICAgICAgIGNvdW50ZXJBZnRlckRvdCArKzsKICAgICAgICAgICAgICAgIHRvdE51bS0tOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZih0b3ROdW0gPT0gMCl7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgICBpZihjb3VudGVyQWZ0ZXJEb3QgPCAxOCl7CiAgICAgICAgIHVpbnQgYWRkTnVtID0gMTggLSBjb3VudGVyQWZ0ZXJEb3Q7CiAgICAgICAgIHVpbnQgbXVsdHVwbHkgPSAxMCAqKiBhZGROdW07CiAgICAgICAgIHJldHVybiByZXN1bHQgPSByZXN1bHQgKiBtdWx0dXBseTsKICAgICB9CgogICAgIHJldHVybiByZXN1bHQ7Cn0KCgogIC8vLyBAbm90aWNlIFJldHVybnMgYWxsIHRoZSByZWxldmFudCBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIGl0ZW0yMy4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSB0b2tlbklkIG9mIHRoZSBpdGVtMjMgb2YgaW50ZXJlc3QuCiAgZnVuY3Rpb24gZ2V0SXRlbTIzKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKAogICAgc3RyaW5nIGl0ZW0yM05hbWUsCiAgICB1aW50MjU2IHNlbGxpbmdQcmljZSwKICAgIGFkZHJlc3Mgb3duZXIsCiAgICB1aW50MjU2IHByZXZpb3VzUHJpY2UsCiAgICBhZGRyZXNzWzVdIHByZXZpb3VzT3duZXJzCiAgKSB7CiAgICBJdGVtMjMgc3RvcmFnZSBpdGVtMjMgPSBpdGVtMjNzW190b2tlbklkXTsKICAgIGl0ZW0yM05hbWUgPSBpdGVtMjMubmFtZTsKICAgIHNlbGxpbmdQcmljZSA9IGl0ZW0yM0luZGV4VG9QcmljZVtfdG9rZW5JZF07CiAgICBvd25lciA9IGl0ZW0yM0luZGV4VG9Pd25lcltfdG9rZW5JZF07CiAgICBwcmV2aW91c1ByaWNlID0gaXRlbTIzSW5kZXhUb1ByZXZpb3VzUHJpY2VbX3Rva2VuSWRdOwogICAgcHJldmlvdXNPd25lcnMgPSBpdGVtMjNJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdOwogIH0KCgogIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuIE5BTUU7CiAgfQoKICAvLy8gRm9yIHF1ZXJ5aW5nIG93bmVyIG9mIHRva2VuCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgdG9rZW5JRCBmb3Igb3duZXIgaW5xdWlyeQogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKQogICAgcHVibGljCiAgICB2aWV3CiAgICByZXR1cm5zIChhZGRyZXNzIG93bmVyKQogIHsKICAgIG93bmVyID0gaXRlbTIzSW5kZXhUb093bmVyW190b2tlbklkXTsKICAgIHJlcXVpcmUob3duZXIgIT0gYWRkcmVzcygwKSk7CiAgfQoKICBmdW5jdGlvbiBwYXlvdXQoYWRkcmVzcyBfdG8pIHB1YmxpYyBvbmx5Q0xldmVsIHsKICAgIF9wYXlvdXQoX3RvKTsKICB9CgogIC8vIEFsbG93cyBzb21lb25lIHRvIHNlbmQgZXRoZXIgYW5kIG9idGFpbiB0aGUgdG9rZW4KICBmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgcGF5YWJsZSB7CiAgICBhZGRyZXNzIG9sZE93bmVyID0gaXRlbTIzSW5kZXhUb093bmVyW190b2tlbklkXTsKICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwoKICAgIGFkZHJlc3NbNV0gc3RvcmFnZSBwcmV2aW91c093bmVycyA9IGl0ZW0yM0luZGV4VG9QcmV2aW91c093bmVyc1tfdG9rZW5JZF07CgogICAgdWludDI1NiBzZWxsaW5nUHJpY2UgPSBpdGVtMjNJbmRleFRvUHJpY2VbX3Rva2VuSWRdOwogICAgdWludDI1NiBwcmV2aW91c1ByaWNlID0gaXRlbTIzSW5kZXhUb1ByZXZpb3VzUHJpY2VbX3Rva2VuSWRdOwogICAgLy8gTWFraW5nIHN1cmUgdG9rZW4gb3duZXIgaXMgbm90IHNlbmRpbmcgdG8gc2VsZgogICAgcmVxdWlyZShvbGRPd25lciAhPSBuZXdPd25lcik7CgogICAgLy8gU2FmZXR5IGNoZWNrIHRvIHByZXZlbnQgYWdhaW5zdCBhbiB1bmV4cGVjdGVkIDB4MCBkZWZhdWx0LgogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwobmV3T3duZXIpKTsKCiAgICAvLyBNYWtpbmcgc3VyZSBzZW50IGFtb3VudCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNlbGxpbmdQcmljZQogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gc2VsbGluZ1ByaWNlKTsKCiAgICB1aW50MjU2IHByaWNlRGVsdGEgPSBTYWZlTWF0aC5zdWIoc2VsbGluZ1ByaWNlLCBwcmV2aW91c1ByaWNlKTsKICAgIHVpbnQyNTYgb3duZXJQYXlvdXQgPSBTYWZlTWF0aC5hZGQocHJldmlvdXNQcmljZSwgU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihwcmljZURlbHRhLCAxMDApLCA0MCkpOwoKCiAgICB1aW50MjU2IHB1cmNoYXNlRXhjZXNzID0gU2FmZU1hdGguc3ViKG1zZy52YWx1ZSwgc2VsbGluZ1ByaWNlKTsKCiAgICBpdGVtMjNJbmRleFRvUHJpY2VbX3Rva2VuSWRdID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsaW5nUHJpY2UsIDE1MCksIDEwMCk7CiAgICBpdGVtMjNJbmRleFRvUHJldmlvdXNQcmljZVtfdG9rZW5JZF0gPSBzZWxsaW5nUHJpY2U7CgogICAgdWludDI1NiBzdHJhbmdlUHJpY2UgPSB1aW50MjU2KFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYocHJpY2VEZWx0YSwgMTAwKSwgMTApKTsKICAgIHVpbnQyNTYgc3RyYW5nZVByaWNlMiA9IHVpbnQyNTYoMCk7CgoKICAgIC8vIFBheSBwcmV2aW91cyB0b2tlbk93bmVyIGlmIG93bmVyIGlzIG5vdCBjb250cmFjdAogICAgLy8gYW5kIGlmIHByZXZpb3VzIHByaWNlIGlzIG5vdCAwCiAgICBpZiAob2xkT3duZXIgIT0gYWRkcmVzcyh0aGlzKSkgewogICAgICAvLyBvbGQgb3duZXIgZ2V0cyBlbnRpcmUgaW5pdGlhbCBwYXltZW50IGJhY2sKICAgICAgb2xkT3duZXIudHJhbnNmZXIob3duZXJQYXlvdXQpOwogICAgfSBlbHNlIHsKICAgICAgc3RyYW5nZVByaWNlID0gU2FmZU1hdGguYWRkKG93bmVyUGF5b3V0LCBzdHJhbmdlUHJpY2UpOwogICAgfQoKICAgIC8vIE5leHQgZGlzdHJpYnV0ZSBwYXlvdXQgVG90YWwgYW1vbmcgcHJldmlvdXMgT3duZXJzCiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICBpZiAocHJldmlvdXNPd25lcnNbaV0gIT0gYWRkcmVzcyh0aGlzKSkgewogICAgICAgICAgICBzdHJhbmdlUHJpY2UyKz11aW50MjU2KFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYocHJpY2VEZWx0YSwgMTAwKSwgMTApKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdHJhbmdlUHJpY2UgPSBTYWZlTWF0aC5hZGQoc3RyYW5nZVByaWNlLCB1aW50MjU2KFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYocHJpY2VEZWx0YSwgMTAwKSwgMTApKSk7CiAgICAgICAgfQogICAgfQoKICAgIGNlb0FkZHJlc3MudHJhbnNmZXIoc3RyYW5nZVByaWNlK3N0cmFuZ2VQcmljZTIpOwogICAgLy9jZW9BZGRyZXNzLnRyYW5zZmVyKHN0cmFuZ2VQcmljZTIpOwogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwoKICAgIC8vVG9rZW5Tb2xkKF90b2tlbklkLCBzZWxsaW5nUHJpY2UsIGl0ZW0yM0luZGV4VG9QcmljZVtfdG9rZW5JZF0sIG9sZE93bmVyLCBuZXdPd25lciwgaXRlbTIzc1tfdG9rZW5JZF0ubmFtZSk7CgogICAgbXNnLnNlbmRlci50cmFuc2ZlcihwdXJjaGFzZUV4Y2Vzcyk7CiAgfQoKCiAgZnVuY3Rpb24gcHJpY2VPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHByaWNlKSB7CiAgICByZXR1cm4gaXRlbTIzSW5kZXhUb1ByaWNlW190b2tlbklkXTsKICB9CgogIC8vLyBAZGV2IEFzc2lnbnMgYSBuZXcgYWRkcmVzcyB0byBhY3QgYXMgdGhlIENFTy4gT25seSBhdmFpbGFibGUgdG8gdGhlIGN1cnJlbnQgQ0VPLgogIC8vLyBAcGFyYW0gX25ld0NFTyBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IENFTwogIGZ1bmN0aW9uIHNldENFTyhhZGRyZXNzIF9uZXdDRU8pIHB1YmxpYyBvbmx5Q0VPIHsKICAgIHJlcXVpcmUoX25ld0NFTyAhPSBhZGRyZXNzKDApKTsKCiAgICBjZW9BZGRyZXNzID0gX25ld0NFTzsKICB9CgogIC8vLyBAZGV2IEFzc2lnbnMgYSBuZXcgYWRkcmVzcyB0byBhY3QgYXMgdGhlIENPTy4gT25seSBhdmFpbGFibGUgdG8gdGhlIGN1cnJlbnQgQ09PLgogIC8vLyBAcGFyYW0gX25ld0NPTyBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IENPTwogIGZ1bmN0aW9uIHNldENPTyhhZGRyZXNzIF9uZXdDT08pIHB1YmxpYyBvbmx5Q0VPIHsKICAgIHJlcXVpcmUoX25ld0NPTyAhPSBhZGRyZXNzKDApKTsKICAgIGNvb0FkZHJlc3MgPSBfbmV3Q09POwogIH0KCiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsKICAgIHJldHVybiBTWU1CT0w7CiAgfQoKICAvLy8gQG5vdGljZSBBbGxvdyBwcmUtYXBwcm92ZWQgdXNlciB0byB0YWtlIG93bmVyc2hpcCBvZiBhIHRva2VuCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgSUQgb2YgdGhlIFRva2VuIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGlmIHRoaXMgY2FsbCBzdWNjZWVkcy4KICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsKICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwogICAgYWRkcmVzcyBvbGRPd25lciA9IGl0ZW0yM0luZGV4VG9Pd25lcltfdG9rZW5JZF07CgogICAgLy8gU2FmZXR5IGNoZWNrIHRvIHByZXZlbnQgYWdhaW5zdCBhbiB1bmV4cGVjdGVkIDB4MCBkZWZhdWx0LgogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwobmV3T3duZXIpKTsKCiAgICAvLyBNYWtpbmcgc3VyZSB0cmFuc2ZlciBpcyBhcHByb3ZlZAogICAgcmVxdWlyZShfYXBwcm92ZWQobmV3T3duZXIsIF90b2tlbklkKSk7CgogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwogIH0KCiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIG93bmVyIHdob3NlIGl0ZW0yMyB0b2tlbnMgd2UgYXJlIGludGVyZXN0ZWQgaW4uCiAgLy8vIEBkZXYgVGhpcyBtZXRob2QgTVVTVCBORVZFUiBiZSBjYWxsZWQgYnkgc21hcnQgY29udHJhY3QgY29kZS4gRmlyc3QsIGl0J3MgZmFpcmx5CiAgLy8vICBleHBlbnNpdmUgKGl0IHdhbGtzIHRoZSBlbnRpcmUgSXRlbTIzcyBhcnJheSBsb29raW5nIGZvciBpdGVtMjNzIGJlbG9uZ2luZyB0byBvd25lciksCiAgLy8vICBidXQgaXQgYWxzbyByZXR1cm5zIGEgZHluYW1pYyBhcnJheSwgd2hpY2ggaXMgb25seSBzdXBwb3J0ZWQgZm9yIHdlYjMgY2FsbHMsIGFuZAogIC8vLyAgbm90IGNvbnRyYWN0LXRvLWNvbnRyYWN0IGNhbGxzLgogIGZ1bmN0aW9uIHRva2Vuc09mT3duZXIoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NltdIG93bmVyVG9rZW5zKSB7CiAgICB1aW50MjU2IHRva2VuQ291bnQgPSBiYWxhbmNlT2YoX293bmVyKTsKICAgIGlmICh0b2tlbkNvdW50ID09IDApIHsKICAgICAgICAvLyBSZXR1cm4gYW4gZW1wdHkgYXJyYXkKICAgICAgcmV0dXJuIG5ldyB1aW50MjU2W10oMCk7CiAgICB9IGVsc2UgewogICAgICB1aW50MjU2W10gbWVtb3J5IHJlc3VsdCA9IG5ldyB1aW50MjU2W10odG9rZW5Db3VudCk7CiAgICAgIHVpbnQyNTYgdG90YWxJdGVtMjNzID0gdG90YWxTdXBwbHkoKTsKICAgICAgdWludDI1NiByZXN1bHRJbmRleCA9IDA7CiAgICAgIHVpbnQyNTYgaXRlbTIzSWQ7CiAgICAgIGZvciAoaXRlbTIzSWQgPSAwOyBpdGVtMjNJZCA8PSB0b3RhbEl0ZW0yM3M7IGl0ZW0yM0lkKyspIHsKICAgICAgICBpZiAoaXRlbTIzSW5kZXhUb093bmVyW2l0ZW0yM0lkXSA9PSBfb3duZXIpIHsKICAgICAgICAgIHJlc3VsdFtyZXN1bHRJbmRleF0gPSBpdGVtMjNJZDsKICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfQoKICAvLy8gRm9yIHF1ZXJ5aW5nIHRvdGFsU3VwcGx5IG9mIHRva2VuCiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpIHsKICAgIHJldHVybiBpdGVtMjNzLmxlbmd0aDsKICB9CgogIC8vLyBPd25lciBpbml0YXRlcyB0aGUgdHJhbnNmZXIgb2YgdGhlIHRva2VuIHRvIGFub3RoZXIgYWNjb3VudAogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgdG8uCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgSUQgb2YgdGhlIFRva2VuIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGlmIHRoaXMgY2FsbCBzdWNjZWVkcy4KICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIHRyYW5zZmVyKAogICAgYWRkcmVzcyBfdG8sCiAgICB1aW50MjU2IF90b2tlbklkCiAgKSBwdWJsaWMgewogICAgcmVxdWlyZShfb3ducyhtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CiAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvLy8gVGhpcmQtcGFydHkgaW5pdGlhdGVzIHRyYW5zZmVyIG9mIHRva2VuIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3MgZm9yIHRoZSB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZCBmcm9tLgogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgdG8uCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgSUQgb2YgdGhlIFRva2VuIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGlmIHRoaXMgY2FsbCBzdWNjZWVkcy4KICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgKICAgIGFkZHJlc3MgX2Zyb20sCiAgICBhZGRyZXNzIF90bywKICAgIHVpbnQyNTYgX3Rva2VuSWQKICApIHB1YmxpYyB7CiAgICByZXF1aXJlKF9vd25zKF9mcm9tLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYXBwcm92ZWQoX3RvLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CiAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KCiAgLyoqKiBQUklWQVRFIEZVTkNUSU9OUyAqKiovCiAgLy8vIFNhZmV0eSBjaGVjayBvbiBfdG8gYWRkcmVzcyB0byBwcmV2ZW50IGFnYWluc3QgYW4gdW5leHBlY3RlZCAweDAgZGVmYXVsdC4KICBmdW5jdGlvbiBfYWRkcmVzc05vdE51bGwoYWRkcmVzcyBfdG8pIHByaXZhdGUgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gX3RvICE9IGFkZHJlc3MoMCk7CiAgfQoKICAvLy8gRm9yIGNoZWNraW5nIGFwcHJvdmFsIG9mIHRyYW5zZmVyIGZvciBhZGRyZXNzIF90bwogIGZ1bmN0aW9uIF9hcHByb3ZlZChhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBpdGVtMjNJbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdID09IF90bzsKICB9CgogIC8vLyBGb3IgY3JlYXRpbmcgSXRlbTIzCiAgZnVuY3Rpb24gX2NyZWF0ZUl0ZW0yMyhzdHJpbmcgX25hbWUsIGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSkgcHJpdmF0ZSB7CiAgICBJdGVtMjMgbWVtb3J5IF9pdGVtMjMgPSBJdGVtMjMoewogICAgICBuYW1lOiBfbmFtZQogICAgfSk7CiAgICB1aW50MjU2IG5ld0l0ZW0yM0lkID0gaXRlbTIzcy5wdXNoKF9pdGVtMjMpIC0gMTsKCiAgICAvLyBJdCdzIHByb2JhYmx5IG5ldmVyIGdvaW5nIHRvIGhhcHBlbiwgNCBiaWxsaW9uIHRva2VucyBhcmUgQSBMT1QsIGJ1dAogICAgLy8gbGV0J3MganVzdCBiZSAxMDAlIHN1cmUgd2UgbmV2ZXIgbGV0IHRoaXMgaGFwcGVuLgogICAgcmVxdWlyZShuZXdJdGVtMjNJZCA9PSB1aW50MjU2KHVpbnQzMihuZXdJdGVtMjNJZCkpKTsKCiAgICBCaXJ0aChuZXdJdGVtMjNJZCwgX25hbWUsIF9vd25lcik7CgogICAgaXRlbTIzSW5kZXhUb1ByaWNlW25ld0l0ZW0yM0lkXSA9IF9wcmljZTsKICAgIGl0ZW0yM0luZGV4VG9QcmV2aW91c1ByaWNlW25ld0l0ZW0yM0lkXSA9IDA7CiAgICBpdGVtMjNJbmRleFRvUHJldmlvdXNPd25lcnNbbmV3SXRlbTIzSWRdID0KICAgICAgICBbYWRkcmVzcyh0aGlzKSwgYWRkcmVzcyh0aGlzKSwgYWRkcmVzcyh0aGlzKSwgYWRkcmVzcyh0aGlzKV07CgogICAgLy8gVGhpcyB3aWxsIGFzc2lnbiBvd25lcnNoaXAsIGFuZCBhbHNvIGVtaXQgdGhlIFRyYW5zZmVyIGV2ZW50IGFzCiAgICAvLyBwZXIgRVJDNzIxIGRyYWZ0CiAgICBfdHJhbnNmZXIoYWRkcmVzcygwKSwgX293bmVyLCBuZXdJdGVtMjNJZCk7CiAgfQoKICAvLy8gQ2hlY2sgZm9yIHRva2VuIG93bmVyc2hpcAogIGZ1bmN0aW9uIF9vd25zKGFkZHJlc3MgY2xhaW1hbnQsIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gY2xhaW1hbnQgPT0gaXRlbTIzSW5kZXhUb093bmVyW190b2tlbklkXTsKICB9CgogIC8vLyBGb3IgcGF5aW5nIG91dCBiYWxhbmNlIG9uIGNvbnRyYWN0CiAgZnVuY3Rpb24gX3BheW91dChhZGRyZXNzIF90bykgcHJpdmF0ZSB7CiAgICBpZiAoX3RvID09IGFkZHJlc3MoMCkpIHsKICAgICAgY2VvQWRkcmVzcy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfSBlbHNlIHsKICAgICAgX3RvLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CiAgfQoKICAvLy8gQGRldiBBc3NpZ25zIG93bmVyc2hpcCBvZiBhIHNwZWNpZmljIEl0ZW0yMyB0byBhbiBhZGRyZXNzLgogIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICAvLyBTaW5jZSB0aGUgbnVtYmVyIG9mIGl0ZW0yM3MgaXMgY2FwcGVkIHRvIDJeMzIgd2UgY2FuJ3Qgb3ZlcmZsb3cgdGhpcwogICAgb3duZXJzaGlwVG9rZW5Db3VudFtfdG9dKys7CiAgICAvL3RyYW5zZmVyIG93bmVyc2hpcAogICAgaXRlbTIzSW5kZXhUb093bmVyW190b2tlbklkXSA9IF90bzsKICAgIC8vIFdoZW4gY3JlYXRpbmcgbmV3IGl0ZW0yM3MgX2Zyb20gaXMgMHgwLCBidXQgd2UgY2FuJ3QgYWNjb3VudCB0aGF0IGFkZHJlc3MuCiAgICBpZiAoX2Zyb20gIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lcnNoaXBUb2tlbkNvdW50W19mcm9tXS0tOwogICAgICAvLyBjbGVhciBhbnkgcHJldmlvdXNseSBhcHByb3ZlZCBvd25lcnNoaXAgZXhjaGFuZ2UKICAgICAgZGVsZXRlIGl0ZW0yM0luZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF07CiAgICB9CiAgICAvLyBVcGRhdGUgdGhlIGl0ZW0yM0luZGV4VG9QcmV2aW91c093bmVycwogICAgaXRlbTIzSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXVs0XT1pdGVtMjNJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzNdOwogICAgaXRlbTIzSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXVszXT1pdGVtMjNJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzJdOwogICAgaXRlbTIzSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXVsyXT1pdGVtMjNJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzFdOwogICAgaXRlbTIzSW5kZXhUb1ByZXZpb3VzT3duZXJzW190b2tlbklkXVsxXT1pdGVtMjNJbmRleFRvUHJldmlvdXNPd25lcnNbX3Rva2VuSWRdWzBdOwogICAgLy8gdGhlIF9mcm9tIGFkZHJlc3MgZm9yIGNyZWF0aW9uIGlzIDAsIHNvIGluc3RlYWQgc2V0IGl0IHRvIHRoZSBjb250cmFjdCBhZGRyZXNzCiAgICBpZiAoX2Zyb20gIT0gYWRkcmVzcygwKSkgewogICAgICAgIGl0ZW0yM0luZGV4VG9QcmV2aW91c093bmVyc1tfdG9rZW5JZF1bMF09X2Zyb207CiAgICB9IGVsc2UgewogICAgICAgIGl0ZW0yM0luZGV4VG9QcmV2aW91c093bmVyc1tfdG9rZW5JZF1bMF09YWRkcmVzcyh0aGlzKTsKICAgIH0KICAgIC8vIEVtaXQgdGhlIHRyYW5zZmVyIGV2ZW50LgogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KfQoKCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9'.
	

]
