Class {
	#name : #SRT16b5d98ac50a4f8326972a6528278b53c8a1180f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT16b5d98ac50a4f8326972a6528278b53c8a1180f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCmNvbnRyYWN0IFBhdXNhYmxlVG9rZW4gaXMgT3duYWJsZSB7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGluY3JlYXNlRnJvemVuKGFkZHJlc3MgX293bmVyLHVpbnQyNTYgX2luY3JlbWVudGFsQW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWM7Cn0KCmNvbnRyYWN0IEFkZHJlc3NXaGl0ZWxpc3QgaXMgT3duYWJsZSB7CiAgICAvLyB0aGUgYWRkcmVzc2VzIHRoYXQgYXJlIGluY2x1ZGVkIGluIHRoZSB3aGl0ZWxpc3QKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgd2hpdGVsaXN0ZWQ7CiAgICAKICAgIGZ1bmN0aW9uIGlzV2hpdGVsaXN0ZWQoYWRkcmVzcyBhZGRyKSB2aWV3IHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHdoaXRlbGlzdGVkW2FkZHJdOwogICAgfQoKICAgIGV2ZW50IExvZ1doaXRlbGlzdEFkZChhZGRyZXNzIGluZGV4ZWQgYWRkcik7CgogICAgLy8gYWRkIHRoZXNlIGFkZHJlc3NlcyB0byB0aGUgd2hpdGVsaXN0CiAgICBmdW5jdGlvbiBhZGRUb1doaXRlbGlzdChhZGRyZXNzW10gYWRkcmVzc2VzKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBhZGRyZXNzZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKCF3aGl0ZWxpc3RlZFthZGRyZXNzZXNbaV1dKSB7CiAgICAgICAgICAgICAgICB3aGl0ZWxpc3RlZFthZGRyZXNzZXNbaV1dID0gdHJ1ZTsKICAgICAgICAgICAgICAgIExvZ1doaXRlbGlzdEFkZChhZGRyZXNzZXNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBldmVudCBMb2dXaGl0ZWxpc3RSZW1vdmUoYWRkcmVzcyBpbmRleGVkIGFkZHIpOwoKICAgIC8vIHJlbW92ZSB0aGVzZSBhZGRyZXNzZXMgZnJvbSB0aGUgd2hpdGVsaXN0CiAgICBmdW5jdGlvbiByZW1vdmVGcm9tV2hpdGVsaXN0KGFkZHJlc3NbXSBhZGRyZXNzZXMpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGFkZHJlc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAod2hpdGVsaXN0ZWRbYWRkcmVzc2VzW2ldXSkgewogICAgICAgICAgICAgICAgd2hpdGVsaXN0ZWRbYWRkcmVzc2VzW2ldXSA9IGZhbHNlOwogICAgICAgICAgICAgICAgTG9nV2hpdGVsaXN0UmVtb3ZlKGFkZHJlc3Nlc1tpXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9Cgpjb250cmFjdCBIb3JzZVRva2VuQ3Jvd2RzYWxlIGlzIE93bmFibGUsIEFkZHJlc3NXaGl0ZWxpc3QgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICBQYXVzYWJsZVRva2VuICBwdWJsaWMgdG9rZW5SZXdhcmQ7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZHJlc3Mgb2YgdGhlIHRva2VuIHVzZWQgYXMgcmV3YXJkCgogICAgLy8gZGVwbG95bWVudCB2YXJpYWJsZXMgZm9yIHN0YXRpYyBzdXBwbHkgc2FsZQogICAgdWludDI1NiBwdWJsaWMgaW5pdGlhbFN1cHBseTsKICAgIHVpbnQyNTYgcHVibGljIHRva2Vuc1JlbWFpbmluZzsKICAgIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzOwoKICAgIC8vIG11bHRpLXNpZyBhZGRyZXNzZXMgYW5kIHByaWNlIHZhcmlhYmxlCiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeVdhbGxldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiZW5lZmljaWFyeU11bHRpU2lnIChmb3VuZGVyIGdyb3VwKSBvciB3YWxsZXQgYWNjb3VudAogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zUGVyRXRoUHJpY2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGluaXRpYWwgdmFsdWUgZmxvYXRpbmcgcHJpY2VWYXIgMTAsMDAwIHRva2VucyBwZXIgRXRoCgogICAgLy8gdWludDI1NiB2YWx1ZXMgZm9yIG1pbixtYXgsY2Fwcyx0cmFja2luZwogICAgdWludDI1NiBwdWJsaWMgYW1vdW50UmFpc2VkSW5XZWk7CiAgICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nTWluQ2FwSW5XZWk7CgogICAgLy8gcHJpY2luZyB2ZXJpYWJsZQogICAgdWludDI1NiBwdWJsaWMgcDFfZHVyYXRpb247CiAgICB1aW50MjU2IHB1YmxpYyBwMl9zdGFydDsKICAgIHVpbnQyNTYgcHVibGljIHAxX3doaXRlX2R1cmF0aW9uOwoKICAgIC8vIGxvb3AgY29udHJvbCwgSUNPIHN0YXJ0dXAgYW5kIGxpbWl0ZXJzCiAgICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nU3RhcnRUaW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyb3dkc2FsZSBzdGFydCB0aW1lIwogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ0VuZFRpbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjcm93ZHNhbGUgZW5kIHRpbWUjCiAgICBib29sICAgIHB1YmxpYyBpc0Nyb3dkU2FsZUNsb3NlZCAgICAgICAgICAgICAgID0gZmFsc2U7ICAgICAvLyBjcm93ZHNhbGUgY29tcGxldGlvbiBib29sZWFuCiAgICBib29sICAgIHB1YmxpYyBhcmVGdW5kc1JlbGVhc2VkVG9CZW5lZmljaWFyeSAgID0gZmFsc2U7ICAgICAvLyBib29sZWFuIGZvciBmb3VuZGVyIHRvIHJlY2VpdmUgRXRoIG9yIG5vdAogICAgYm9vbCAgICBwdWJsaWMgaXNDcm93ZFNhbGVTZXR1cCAgICAgICAgICAgICAgICA9IGZhbHNlOyAgICAgLy8gYm9vbGVhbiBmb3IgY3Jvd2RzYWxlIHNldHVwCgogICAgLy8gR2FzIHByaWNlIGxpbWl0CiAgICB1aW50MjU2IG1heEdhc1ByaWNlID0gNTAwMDAwMDAwMDA7CgogICAgZXZlbnQgQnV5KGFkZHJlc3MgaW5kZXhlZCBfc2VuZGVyLCB1aW50MjU2IF9ldGgsIHVpbnQyNTYgX0hPUlNFKTsKICAgIGV2ZW50IFJlZnVuZChhZGRyZXNzIGluZGV4ZWQgX3JlZnVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgZnVuZFZhbHVlOwoKCiAgICAvLyBjb252ZXJ0IHRva2VucyB0byBkZWNpbWFscwogICAgZnVuY3Rpb24gdG9Qb255KHVpbnQyNTYgYW1vdW50KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBhbW91bnQubXVsKDEwKipkZWNpbWFscyk7CiAgICB9CgogICAgLy8gY29udmVydCB0b2tlbnMgdG8gd2hvbGUKICAgIGZ1bmN0aW9uIHRvSG9yc2UodWludDI1NiBhbW91bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGFtb3VudC5kaXYoMTAqKmRlY2ltYWxzKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVNYXhHYXNQcmljZSh1aW50MjU2IF9uZXdHYXNQcmljZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfbmV3R2FzUHJpY2UgIT0gMCk7CiAgICAgICAgbWF4R2FzUHJpY2UgPSBfbmV3R2FzUHJpY2U7CiAgICB9CgogICAgLy8gc2V0dXAgdGhlIENyb3dkU2FsZSBwYXJhbWV0ZXJzCiAgICBmdW5jdGlvbiBzZXR1cENyb3dkc2FsZSh1aW50MjU2IF9mdW5kaW5nU3RhcnRUaW1lKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIGlmICgoIShpc0Nyb3dkU2FsZVNldHVwKSkKICAgICAgICAgICAgJiYgKCEoYmVuZWZpY2lhcnlXYWxsZXQgPiAwKSkpewogICAgICAgICAgICAvLyBpbml0IGFkZHJlc3NlcwogICAgICAgICAgICB0b2tlblJld2FyZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBQYXVzYWJsZVRva2VuKDB4NUIwNzUxNzEzYjI1MjdkN2YwMDJjMGM0ZTJhMzdlMTIxOTYxMEE2Qik7CiAgICAgICAgICAgIGJlbmVmaWNpYXJ5V2FsbGV0ICAgICAgICAgICAgICAgICAgICAgICA9IDB4RWIwQjQwYThiRTE5MTYwQ2E2MzA3NmFFNjczNTdCMWExMGM4QzMxQTsKICAgICAgICAgICAgdG9rZW5zUGVyRXRoUHJpY2UgICAgICAgICAgICAgICAgICAgICAgID0gMTI1MDA7CgogICAgICAgICAgICAvLyBmdW5kaW5nIHRhcmdldHMKICAgICAgICAgICAgZnVuZGluZ01pbkNhcEluV2VpICAgICAgICAgICAgICAgICAgICAgID0gNDAwIGV0aGVyOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy80MDAgRXRoIChtaW4gY2FwKSAtIGNyb3dkc2FsZSBpcyBjb25zaWRlcmVkIHN1Y2Nlc3MgYWZ0ZXIgdGhpcyB2YWx1ZQoKICAgICAgICAgICAgLy8gdXBkYXRlIHZhbHVlcwogICAgICAgICAgICBkZWNpbWFscyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAxODsKICAgICAgICAgICAgYW1vdW50UmFpc2VkSW5XZWkgICAgICAgICAgICAgICAgICAgICAgID0gMDsKICAgICAgICAgICAgaW5pdGlhbFN1cHBseSAgICAgICAgICAgICAgICAgICAgICAgICAgID0gdG9Qb255KDEwMDAwMDAwMCk7ICAgICAgICAgICAgICAgICAgLy8gICAxMDAgbWlsbGlvbiAqIDE4IGRlY2ltYWwKICAgICAgICAgICAgdG9rZW5zUmVtYWluaW5nICAgICAgICAgICAgICAgICAgICAgICAgID0gaW5pdGlhbFN1cHBseTsKCiAgICAgICAgICAgIGZ1bmRpbmdTdGFydFRpbWUgICAgICAgICAgICAgICAgICAgICAgICA9IF9mdW5kaW5nU3RhcnRUaW1lOwogICAgICAgICAgICBwMV9kdXJhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSA3IGRheXM7CiAgICAgICAgICAgIHAxX3doaXRlX2R1cmF0aW9uICAgICAgICAgICAgICAgICAgICAgICA9IDEgZGF5czsKICAgICAgICAgICAgCiAgICAgICAgICAgIHAyX3N0YXJ0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGZ1bmRpbmdTdGFydFRpbWUgKyBwMV9kdXJhdGlvbiArIDYgZGF5czsKCiAgICAgICAgICAgIGZ1bmRpbmdFbmRUaW1lICAgICAgICAgICAgICAgICAgICAgICAgICA9IHAyX3N0YXJ0ICsgNCB3ZWVrczsKCiAgICAgICAgICAgIC8vIGNvbmZpZ3VyZSBjcm93ZHNhbGUKICAgICAgICAgICAgaXNDcm93ZFNhbGVTZXR1cCAgICAgICAgICAgICAgICAgICAgICAgID0gdHJ1ZTsKICAgICAgICAgICAgaXNDcm93ZFNhbGVDbG9zZWQgICAgICAgICAgICAgICAgICAgICAgID0gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJvbnVzUHJpY2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBib251cykgewogICAgICAgIHJlcXVpcmUoaXNDcm93ZFNhbGVTZXR1cCk7CiAgICAgICAgcmVxdWlyZShmdW5kaW5nU3RhcnRUaW1lICsgcDFfZHVyYXRpb24gPD0gcDJfc3RhcnQgKTsKICAgICAgICBpZiAobm93ID49IGZ1bmRpbmdTdGFydFRpbWUgJiYgbm93IDw9IGZ1bmRpbmdTdGFydFRpbWUgKyBwMV9kdXJhdGlvbikgeyAvLyBQaGFzZS0xIEJvbnVzICAgICsxMDAlID0gMjUsMDAwIEhPUlNFICA9IDEgRVRICiAgICAgICAgICAgIGJvbnVzID0gMTI1MDA7CiAgICAgICAgfSBlbHNlIGlmIChub3cgPiBwMl9zdGFydCAmJiBub3cgPD0gcDJfc3RhcnQgKyAxIGRheXMgKSB7IC8vIFBoYXNlLTIgZGF5LTEgQm9udXMgKzUwJSA9IDE4LDc1MCBIT1JTRSA9IDEgRVRICiAgICAgICAgICAgIGJvbnVzID0gNjI1MDsKICAgICAgICB9IGVsc2UgaWYgKG5vdyA+IHAyX3N0YXJ0ICsgMSBkYXlzICYmIG5vdyA8PSBwMl9zdGFydCArIDEgd2Vla3MgKSB7IC8vIFBoYXNlLTIgd2Vlay0xIEJvbnVzICsyMCUgPSAxNSwwMDAgSE9SU0UgPSAxIEVUSAogICAgICAgICAgICBib251cyA9IDI1MDA7CiAgICAgICAgfSBlbHNlIGlmIChub3cgPiBwMl9zdGFydCArIDEgd2Vla3MgJiYgbm93IDw9IHAyX3N0YXJ0ICsgMiB3ZWVrcyApIHsgLy8gUGhhc2UtMiB3ZWVrLTIgQm9udXMgKzEwJSA9IDEzLDc1MCBIT1JTRSA9IDEgRVRICiAgICAgICAgICAgIGJvbnVzID0gMTI1MDsKICAgICAgICB9IGVsc2UgaWYgKG5vdyA+IHAyX3N0YXJ0ICsgMiB3ZWVrcyAmJiBub3cgPD0gZnVuZGluZ0VuZFRpbWUgKSB7IC8vIFBoYXNlLTIgd2Vlay0zJiB3ZWVrLTQgQm9udXMgKzAlID0gMTIsNTAwIEhPUlNFID0gMSBFVEgKICAgICAgICAgICAgYm9udXMgPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBwMV9kdXJhdGlvbiBjb25zdGFudC4gT25seSBwMiBzdGFydCBjaGFuZ2VzLiBwMiBzdGFydCBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIDEgbW9udGggZnJvbSBwMSBlbmQKICAgIGZ1bmN0aW9uIHVwZGF0ZUR1cmF0aW9uKHVpbnQyNTYgX25ld1AyU3RhcnQpIGV4dGVybmFsIG9ubHlPd25lciB7IC8vIGZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgZHVyYXRpb24gb2YgcGhhc2UtMSBhbmQgYWRqdXN0IHRoZSBzdGFydCB0aW1lIG9mIHBoYXNlLTIKICAgICAgICByZXF1aXJlKCBpc0Nyb3dkU2FsZVNldHVwCiAgICAgICAgICAgICYmICEocDJfc3RhcnQgPT0gX25ld1AyU3RhcnQpCiAgICAgICAgICAgICYmICEoX25ld1AyU3RhcnQgPiBmdW5kaW5nU3RhcnRUaW1lICsgcDFfZHVyYXRpb24gKyAzMCBkYXlzKQogICAgICAgICAgICAmJiAobm93IDwgcDJfc3RhcnQpCiAgICAgICAgICAgICYmIChmdW5kaW5nU3RhcnRUaW1lICsgcDFfZHVyYXRpb24gPCBfbmV3UDJTdGFydCkpOwogICAgICAgIHAyX3N0YXJ0ID0gX25ld1AyU3RhcnQ7CiAgICAgICAgZnVuZGluZ0VuZFRpbWUgPSBwMl9zdGFydC5hZGQoNCB3ZWVrcyk7CiAgICB9CgogICAgLy8gZGVmYXVsdCBwYXlhYmxlIGZ1bmN0aW9uIHdoZW4gc2VuZGluZyBldGhlciB0byB0aGlzIGNvbnRyYWN0CiAgICBmdW5jdGlvbiAoKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKHR4Lmdhc3ByaWNlIDw9IG1heEdhc1ByaWNlKTsKICAgICAgICByZXF1aXJlKG1zZy5kYXRhLmxlbmd0aCA9PSAwKTsKICAgICAgICAKICAgICAgICBCdXlIT1JTRXRva2VucygpOwogICAgfQoKICAgIGZ1bmN0aW9uIEJ1eUhPUlNFdG9rZW5zKCkgcHVibGljIHBheWFibGUgewogICAgICAgIC8vIGNvbmRpdGlvbnMgKGxlbmd0aCwgY3Jvd2RzYWxlIHNldHVwLCB6ZXJvIGNoZWNrLCBleGNlZWQgZnVuZGluZyBjb250cmliIGNoZWNrLCBjb250cmFjdCB2YWxpZCBjaGVjaywgd2l0aGluIGZ1bmRpbmcgYmxvY2sgcmFuZ2UgY2hlY2ssIGJhbGFuY2Ugb3ZlcmZsb3cgY2hlY2sgZXRjKQogICAgICAgIHJlcXVpcmUoIShtc2cudmFsdWUgPT0gMCkKICAgICAgICAmJiAoaXNDcm93ZFNhbGVTZXR1cCkKICAgICAgICAmJiAobm93ID49IGZ1bmRpbmdTdGFydFRpbWUpCiAgICAgICAgJiYgKG5vdyA8PSBmdW5kaW5nRW5kVGltZSkKICAgICAgICAmJiAodG9rZW5zUmVtYWluaW5nID4gMCkpOwoKICAgICAgICAvLyBvbmx5IHdoaXRlbGlzdGVkIGFkZHJlc3NlcyBhcmUgYWxsb3dlZCBkdXJpbmcgdGhlIGZpcnN0IGRheSBvZiBwaGFzZSAxCiAgICAgICAgaWYgKG5vdyA8PSBmdW5kaW5nU3RhcnRUaW1lICsgcDFfd2hpdGVfZHVyYXRpb24pIHsKICAgICAgICAgICAgYXNzZXJ0KGlzV2hpdGVsaXN0ZWQobXNnLnNlbmRlcikpOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IHJld2FyZFRyYW5zZmVyQW1vdW50ICAgICAgICA9IDA7CiAgICAgICAgdWludDI1NiByZXdhcmRCYXNlVHJhbnNmZXJBbW91bnQgICAgPSAwOwogICAgICAgIHVpbnQyNTYgcmV3YXJkQm9udXNUcmFuc2ZlckFtb3VudCAgID0gMDsKICAgICAgICB1aW50MjU2IGNvbnRyaWJ1dGlvbkluV2VpICAgICAgICAgICA9IG1zZy52YWx1ZTsKICAgICAgICB1aW50MjU2IHJlZnVuZEluV2VpICAgICAgICAgICAgICAgICA9IDA7CgogICAgICAgIHJld2FyZEJvbnVzVHJhbnNmZXJBbW91bnQgICAgICAgPSBzZXRCb251c1ByaWNlKCk7CiAgICAgICAgcmV3YXJkQmFzZVRyYW5zZmVyQW1vdW50ICAgICAgICA9IChtc2cudmFsdWUubXVsKHRva2Vuc1BlckV0aFByaWNlKSk7IC8vIFNpbmNlIGJvdGggZXRoZXIgYW5kIEhPUlNFIGhhdmUgMTggZGVjaW1hbHMsIE5vIG5lZWQgb2YgY29udmVyc2lvbgogICAgICAgIHJld2FyZEJvbnVzVHJhbnNmZXJBbW91bnQgICAgICAgPSAobXNnLnZhbHVlLm11bChyZXdhcmRCb251c1RyYW5zZmVyQW1vdW50KSk7IC8vIFNpbmNlIGJvdGggZXRoZXIgYW5kIEhPUlNFIGhhdmUgMTggZGVjaW1hbHMsIE5vIG5lZWQgb2YgY29udmVyc2lvbgogICAgICAgIHJld2FyZFRyYW5zZmVyQW1vdW50ICAgICAgICAgICAgPSByZXdhcmRCYXNlVHJhbnNmZXJBbW91bnQuYWRkKHJld2FyZEJvbnVzVHJhbnNmZXJBbW91bnQpOwoKICAgICAgICBpZiAocmV3YXJkVHJhbnNmZXJBbW91bnQgPiB0b2tlbnNSZW1haW5pbmcpIHsKICAgICAgICAgICAgdWludDI1NiBwYXJ0aWFsUGVyY2VudGFnZTsKICAgICAgICAgICAgcGFydGlhbFBlcmNlbnRhZ2UgPSB0b2tlbnNSZW1haW5pbmcubXVsKDEwKioxOCkuZGl2KHJld2FyZFRyYW5zZmVyQW1vdW50KTsKICAgICAgICAgICAgY29udHJpYnV0aW9uSW5XZWkgPSBjb250cmlidXRpb25JbldlaS5tdWwocGFydGlhbFBlcmNlbnRhZ2UpLmRpdigxMCoqMTgpOwogICAgICAgICAgICByZXdhcmRCb251c1RyYW5zZmVyQW1vdW50ID0gcmV3YXJkQm9udXNUcmFuc2ZlckFtb3VudC5tdWwocGFydGlhbFBlcmNlbnRhZ2UpLmRpdigxMCoqMTgpOwogICAgICAgICAgICByZXdhcmRUcmFuc2ZlckFtb3VudCA9IHRva2Vuc1JlbWFpbmluZzsKICAgICAgICAgICAgcmVmdW5kSW5XZWkgPSBtc2cudmFsdWUuc3ViKGNvbnRyaWJ1dGlvbkluV2VpKTsKICAgICAgICB9CgogICAgICAgIGFtb3VudFJhaXNlZEluV2VpICAgICAgICAgICAgICAgPSBhbW91bnRSYWlzZWRJbldlaS5hZGQoY29udHJpYnV0aW9uSW5XZWkpOwogICAgICAgIHRva2Vuc1JlbWFpbmluZyAgICAgICAgICAgICAgICAgPSB0b2tlbnNSZW1haW5pbmcuc3ViKHJld2FyZFRyYW5zZmVyQW1vdW50KTsgIC8vIHdpbGwgY2F1c2UgdGhyb3cgaWYgYXR0ZW1wdCB0byBwdXJjaGFzZSBvdmVyIHRoZSB0b2tlbiBsaW1pdCBpbiBvbmUgdHggb3IgYXQgYWxsIG9uY2UgbGltaXQgcmVhY2hlZAogICAgICAgIGZ1bmRWYWx1ZVttc2cuc2VuZGVyXSAgICAgICAgICAgPSBmdW5kVmFsdWVbbXNnLnNlbmRlcl0uYWRkKGNvbnRyaWJ1dGlvbkluV2VpKTsKICAgICAgICBhc3NlcnQodG9rZW5SZXdhcmQuaW5jcmVhc2VGcm96ZW4obXNnLnNlbmRlciwgcmV3YXJkQm9udXNUcmFuc2ZlckFtb3VudCkpOwogICAgICAgIHRva2VuUmV3YXJkLnRyYW5zZmVyKG1zZy5zZW5kZXIsIHJld2FyZFRyYW5zZmVyQW1vdW50KTsKICAgICAgICBCdXkobXNnLnNlbmRlciwgY29udHJpYnV0aW9uSW5XZWksIHJld2FyZFRyYW5zZmVyQW1vdW50KTsKICAgICAgICBpZiAocmVmdW5kSW5XZWkgPiAwKSB7CiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIocmVmdW5kSW5XZWkpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBiZW5lZmljaWFyeU11bHRpU2lnV2l0aGRyYXcoKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIGNoZWNrR29hbFJlYWNoZWQoKTsKICAgICAgICByZXF1aXJlKGFyZUZ1bmRzUmVsZWFzZWRUb0JlbmVmaWNpYXJ5ICYmIChhbW91bnRSYWlzZWRJbldlaSA+PSBmdW5kaW5nTWluQ2FwSW5XZWkpKTsKICAgICAgICBiZW5lZmljaWFyeVdhbGxldC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrR29hbFJlYWNoZWQoKSBwdWJsaWMgcmV0dXJucyAoYnl0ZXMzMiByZXNwb25zZSkgeyAvLyByZXR1cm4gY3Jvd2RmdW5kIHN0YXR1cyB0byBvd25lciBmb3IgZWFjaCByZXN1bHQgY2FzZSwgdXBkYXRlIHB1YmxpYyBjb25zdGFudAogICAgICAgIC8vIHVwZGF0ZSBzdGF0ZSAmIHN0YXR1cyB2YXJpYWJsZXMKICAgICAgICByZXF1aXJlIChpc0Nyb3dkU2FsZVNldHVwKTsKICAgICAgICBpZiAoKGFtb3VudFJhaXNlZEluV2VpIDwgZnVuZGluZ01pbkNhcEluV2VpKSAmJiAoYmxvY2sudGltZXN0YW1wIDw9IGZ1bmRpbmdFbmRUaW1lICYmIGJsb2NrLnRpbWVzdGFtcCA+PSBmdW5kaW5nU3RhcnRUaW1lKSkgeyAvLyBJQ08gaW4gcHJvZ3Jlc3MsIHVuZGVyIHNvZnRjYXAKICAgICAgICAgICAgYXJlRnVuZHNSZWxlYXNlZFRvQmVuZWZpY2lhcnkgPSBmYWxzZTsKICAgICAgICAgICAgaXNDcm93ZFNhbGVDbG9zZWQgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuICJJbiBwcm9ncmVzcyAoRXRoIDwgU29mdGNhcCkiOwogICAgICAgIH0gZWxzZSBpZiAoKGFtb3VudFJhaXNlZEluV2VpIDwgZnVuZGluZ01pbkNhcEluV2VpKSAmJiAoYmxvY2sudGltZXN0YW1wIDwgZnVuZGluZ1N0YXJ0VGltZSkpIHsgLy8gSUNPIGhhcyBub3Qgc3RhcnRlZAogICAgICAgICAgICBhcmVGdW5kc1JlbGVhc2VkVG9CZW5lZmljaWFyeSA9IGZhbHNlOwogICAgICAgICAgICBpc0Nyb3dkU2FsZUNsb3NlZCA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm4gIkNyb3dkc2FsZSBpcyBzZXR1cCI7CiAgICAgICAgfSBlbHNlIGlmICgoYW1vdW50UmFpc2VkSW5XZWkgPCBmdW5kaW5nTWluQ2FwSW5XZWkpICYmIChibG9jay50aW1lc3RhbXAgPiBmdW5kaW5nRW5kVGltZSkpIHsgLy8gSUNPIGVuZGVkLCB1bmRlciBzb2Z0Y2FwCiAgICAgICAgICAgIGFyZUZ1bmRzUmVsZWFzZWRUb0JlbmVmaWNpYXJ5ID0gZmFsc2U7CiAgICAgICAgICAgIGlzQ3Jvd2RTYWxlQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgICAgcmV0dXJuICJVbnN1Y2Nlc3NmdWwgKEV0aCA8IFNvZnRjYXApIjsKICAgICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWRJbldlaSA+PSBmdW5kaW5nTWluQ2FwSW5XZWkpICYmICh0b2tlbnNSZW1haW5pbmcgPT0gMCkpIHsgLy8gSUNPIGVuZGVkLCBhbGwgdG9rZW5zIGdvbmUKICAgICAgICAgICAgYXJlRnVuZHNSZWxlYXNlZFRvQmVuZWZpY2lhcnkgPSB0cnVlOwogICAgICAgICAgICBpc0Nyb3dkU2FsZUNsb3NlZCA9IHRydWU7CiAgICAgICAgICAgIHJldHVybiAiU3VjY2Vzc2Z1bCAoSE9SU0UgPj0gSGFyZGNhcCkhIjsKICAgICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWRJbldlaSA+PSBmdW5kaW5nTWluQ2FwSW5XZWkpICYmIChibG9jay50aW1lc3RhbXAgPiBmdW5kaW5nRW5kVGltZSkgJiYgKHRva2Vuc1JlbWFpbmluZyA+IDApKSB7IC8vIElDTyBlbmRlZCwgb3ZlciBzb2Z0Y2FwIQogICAgICAgICAgICBhcmVGdW5kc1JlbGVhc2VkVG9CZW5lZmljaWFyeSA9IHRydWU7CiAgICAgICAgICAgIGlzQ3Jvd2RTYWxlQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgICAgcmV0dXJuICJTdWNjZXNzZnVsIChFdGggPj0gU29mdGNhcCkhIjsKICAgICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWRJbldlaSA+PSBmdW5kaW5nTWluQ2FwSW5XZWkpICYmICh0b2tlbnNSZW1haW5pbmcgPiAwKSAmJiAoYmxvY2sudGltZXN0YW1wIDw9IGZ1bmRpbmdFbmRUaW1lKSkgeyAvLyBJQ08gaW4gcHJvZ3Jlc3MsIG92ZXIgc29mdGNhcCEKICAgICAgICAgICAgYXJlRnVuZHNSZWxlYXNlZFRvQmVuZWZpY2lhcnkgPSB0cnVlOwogICAgICAgICAgICBpc0Nyb3dkU2FsZUNsb3NlZCA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm4gIkluIHByb2dyZXNzIChFdGggPj0gU29mdGNhcCkhIjsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kKCkgZXh0ZXJuYWwgeyAvLyBhbnkgY29udHJpYnV0b3IgY2FuIGNhbGwgdGhpcyB0byBoYXZlIHRoZWlyIEV0aCByZXR1cm5lZC4gdXNlcidzIHB1cmNoYXNlZCBIT1JTRSB0b2tlbnMgYXJlIGJ1cm5lZCBwcmlvciByZWZ1bmQgb2YgRXRoLgogICAgICAgIGNoZWNrR29hbFJlYWNoZWQoKTsKICAgICAgICAvL3JlcXVpcmUgbWluQ2FwIG5vdCByZWFjaGVkCiAgICAgICAgcmVxdWlyZSAoKGFtb3VudFJhaXNlZEluV2VpIDwgZnVuZGluZ01pbkNhcEluV2VpKQogICAgICAgICYmIChpc0Nyb3dkU2FsZUNsb3NlZCkKICAgICAgICAmJiAobm93ID4gZnVuZGluZ0VuZFRpbWUpCiAgICAgICAgJiYgKGZ1bmRWYWx1ZVttc2cuc2VuZGVyXSA+IDApKTsKCiAgICAgICAgLy9yZWZ1bmQgRXRoIHNlbnQKICAgICAgICB1aW50MjU2IGV0aFJlZnVuZCA9IGZ1bmRWYWx1ZVttc2cuc2VuZGVyXTsKICAgICAgICBmdW5kVmFsdWVbbXNnLnNlbmRlcl0gPSAwOwoKICAgICAgICAvL3NlbmQgRXRoIGJhY2ssIGJ1cm4gdG9rZW5zCiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihldGhSZWZ1bmQpOwogICAgICAgIFJlZnVuZChtc2cuc2VuZGVyLCBldGhSZWZ1bmQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1cm5SZW1haW5pbmdUb2tlbnMoKSBvbmx5T3duZXIgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUobm93ID4gZnVuZGluZ0VuZFRpbWUpOwogICAgICAgIHVpbnQyNTYgdG9rZW5zVG9CdXJuID0gdG9rZW5SZXdhcmQuYmFsYW5jZU9mKHRoaXMpOwogICAgICAgIHRva2VuUmV3YXJkLmJ1cm4odG9rZW5zVG9CdXJuKTsKICAgIH0KfQoKbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQ=='.
	

]
