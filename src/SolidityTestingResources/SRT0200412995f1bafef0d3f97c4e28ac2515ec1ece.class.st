Class {
	#name : #SRT0200412995f1bafef0d3f97c4e28ac2515ec1ece,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0200412995f1bafef0d3f97c4e28ac2515ec1ece >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBGaWxlOiBjb250cmFjdHMvRVJDMjIzUmVjZWl2ZXIuc29sCgovKioKICogQHRpdGxlIENvbnRyYWN0IHRoYXQgd2lsbCB3b3JrIHdpdGggRVJDMjIzIHRva2Vucy4KICovCgpjb250cmFjdCBFUkMyMjNSZWNlaXZlciB7CgkvKioKCSAqIEBkZXYgU3RhbmRhcmQgRVJDMjIzIGZ1bmN0aW9uIHRoYXQgd2lsbCBoYW5kbGUgaW5jb21pbmcgdG9rZW4gdHJhbnNmZXJzLgoJICoKCSAqIEBwYXJhbSBfZnJvbSAgVG9rZW4gc2VuZGVyIGFkZHJlc3MuCgkgKiBAcGFyYW0gX3ZhbHVlIEFtb3VudCBvZiB0b2tlbnMuCgkgKiBAcGFyYW0gX2RhdGEgIFRyYW5zYWN0aW9uIG1ldGFkYXRhLgoJICovCglmdW5jdGlvbiB0b2tlbkZhbGxiYWNrKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljOwp9CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvb3duZXJzaGlwL093bmFibGUuc29sCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL293bmVyc2hpcC9DbGFpbWFibGUuc29sCgovKioKICogQHRpdGxlIENsYWltYWJsZQogKiBAZGV2IEV4dGVuc2lvbiBmb3IgdGhlIE93bmFibGUgY29udHJhY3QsIHdoZXJlIHRoZSBvd25lcnNoaXAgbmVlZHMgdG8gYmUgY2xhaW1lZC4KICogVGhpcyBhbGxvd3MgdGhlIG5ldyBvd25lciB0byBhY2NlcHQgdGhlIHRyYW5zZmVyLgogKi8KY29udHJhY3QgQ2xhaW1hYmxlIGlzIE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIHBlbmRpbmdPd25lcjsKCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0aHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIHBlbmRpbmdPd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5UGVuZGluZ093bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHBlbmRpbmdPd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gc2V0IHRoZSBwZW5kaW5nT3duZXIgYWRkcmVzcy4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcGVuZGluZ093bmVyID0gbmV3T3duZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgcGVuZGluZ093bmVyIGFkZHJlc3MgdG8gZmluYWxpemUgdGhlIHRyYW5zZmVyLgogICAqLwogIGZ1bmN0aW9uIGNsYWltT3duZXJzaGlwKCkgb25seVBlbmRpbmdPd25lciBwdWJsaWMgewogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIHBlbmRpbmdPd25lcik7CiAgICBvd25lciA9IHBlbmRpbmdPd25lcjsKICAgIHBlbmRpbmdPd25lciA9IGFkZHJlc3MoMCk7CiAgfQp9CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvdG9rZW4vRVJDMjAvRVJDMjBCYXNpYy5zb2wKCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL3Rva2VuL0VSQzIwL0Jhc2ljVG9rZW4uc29sCgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIHVpbnQyNTYgdG90YWxTdXBwbHlfOwoKICAvKioKICAqIEBkZXYgdG90YWwgbnVtYmVyIG9mIHRva2VucyBpbiBleGlzdGVuY2UKICAqLwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHRvdGFsU3VwcGx5XzsKICB9CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCi8vIEZpbGU6IHplcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy90b2tlbi9FUkMyMC9FUkMyMC5zb2wKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCi8vIEZpbGU6IHplcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy90b2tlbi9FUkMyMC9TdGFuZGFyZFRva2VuLnNvbAoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqCiAgICogQmV3YXJlIHRoYXQgY2hhbmdpbmcgYW4gYWxsb3dhbmNlIHdpdGggdGhpcyBtZXRob2QgYnJpbmdzIHRoZSByaXNrIHRoYXQgc29tZW9uZSBtYXkgdXNlIGJvdGggdGhlIG9sZAogICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgKiByYWNlIGNvbmRpdGlvbiBpcyB0byBmaXJzdCByZWR1Y2UgdGhlIHNwZW5kZXIncyBhbGxvd2FuY2UgdG8gMCBhbmQgc2V0IHRoZSBkZXNpcmVkIHZhbHVlIGFmdGVyd2FyZHM6CiAgICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIC8qKgogICAqIEBkZXYgSW5jcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfYWRkZWRWYWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBpbmNyZWFzZSB0aGUgYWxsb3dhbmNlIGJ5LgogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRGVjcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGRlY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3VidHJhY3RlZFZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGRlY3JlYXNlIHRoZSBhbGxvd2FuY2UgYnkuCiAgICovCiAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgfQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9FUkMyMjNUb2tlbi5zb2wKCi8qIQlFUkMyMjMgdG9rZW4gaW1wbGVtZW50YXRpb24KICovCmNvbnRyYWN0IEVSQzIyM1Rva2VuIGlzIFN0YW5kYXJkVG9rZW4sIENsYWltYWJsZSB7Cgl1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCglib29sIHB1YmxpYyBlcmMyMjNBY3RpdmF0ZWQ7CgoJLyohCVdoaXRlbGlzdGluZyBhZGRyZXNzZXMgb2Ygc21hcnQgY29udHJhY3RzIHdoaWNoIGhhdmUKCgkgKi8KCW1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHdoaXRlTGlzdENvbnRyYWN0czsKCgkvKiEJUGVyIHVzZXI6IHdoaXRlbGlzdGluZyBhZGRyZXNzZXMgb2Ygc21hcnQgY29udHJhY3RzIHdoaWNoIGhhdmUKCgkgKi8KCW1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSApIHB1YmxpYyB1c2VyV2hpdGVMaXN0Q29udHJhY3RzOwoKCWZ1bmN0aW9uIHNldEVSQzIyM0FjdGl2YXRlZChib29sIF9hY3RpdmF0ZSkgcHVibGljIG9ubHlPd25lciB7CgkJZXJjMjIzQWN0aXZhdGVkID0gX2FjdGl2YXRlOwoJfQoJZnVuY3Rpb24gc2V0V2hpdGVMaXN0Q29udHJhY3QoYWRkcmVzcyBfYWRkciwgYm9vbCBmKSBwdWJsaWMgb25seU93bmVyIHsKCQl3aGl0ZUxpc3RDb250cmFjdHNbX2FkZHJdID0gZjsKCX0KCWZ1bmN0aW9uIHNldFVzZXJXaGl0ZUxpc3RDb250cmFjdChhZGRyZXNzIF9hZGRyLCBib29sIGYpIHB1YmxpYyB7CgkJdXNlcldoaXRlTGlzdENvbnRyYWN0c1ttc2cuc2VuZGVyXVtfYWRkcl0gPSBmOwoJfQoKCWZ1bmN0aW9uIGNoZWNrQW5kSW52b2tlUmVjZWl2ZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgaW50ZXJuYWwgewoJCXVpbnQgY29kZUxlbmd0aDsKCgkJYXNzZW1ibHkgewoJCQkvLyBSZXRyaWV2ZSB0aGUgc2l6ZSBvZiB0aGUgY29kZQoJCQljb2RlTGVuZ3RoIDo9IGV4dGNvZGVzaXplKF90bykKCQl9CgoJCWlmIChjb2RlTGVuZ3RoPjApIHsKCQkJRVJDMjIzUmVjZWl2ZXIgcmVjZWl2ZXIgPSBFUkMyMjNSZWNlaXZlcihfdG8pOwoJCQlyZWNlaXZlci50b2tlbkZhbGxiYWNrKG1zZy5zZW5kZXIsIF92YWx1ZSwgX2RhdGEpOwoJCX0KCX0KCglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CgkJYm9vbCBvayA9IHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKCQlpZiAoZXJjMjIzQWN0aXZhdGVkCgkJCSYmIHdoaXRlTGlzdENvbnRyYWN0c1tfdG9dID09ZmFsc2UKCQkJJiYgdXNlcldoaXRlTGlzdENvbnRyYWN0c1ttc2cuc2VuZGVyXVtfdG9dID09ZmFsc2UpIHsKCQkJYnl0ZXMgbWVtb3J5IGVtcHR5OwoJCQljaGVja0FuZEludm9rZVJlY2VpdmVyKF90bywgX3ZhbHVlLCBlbXB0eSk7CgkJfQoJCXJldHVybiBvazsKCX0KCglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewoJCWJvb2wgb2sgPSBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CgkJaWYgKGVyYzIyM0FjdGl2YXRlZAoJCQkmJiB3aGl0ZUxpc3RDb250cmFjdHNbX3RvXSA9PWZhbHNlCgkJCSYmIHVzZXJXaGl0ZUxpc3RDb250cmFjdHNbbXNnLnNlbmRlcl1bX3RvXSA9PWZhbHNlKSB7CgkJCWNoZWNrQW5kSW52b2tlUmVjZWl2ZXIoX3RvLCBfdmFsdWUsIF9kYXRhKTsKCQl9CgkJcmV0dXJuIG9rOwoJfQoKCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CgkJYm9vbCBvayA9IHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwoJCWlmIChlcmMyMjNBY3RpdmF0ZWQKCQkJJiYgd2hpdGVMaXN0Q29udHJhY3RzW190b10gPT1mYWxzZQoJCQkmJiB1c2VyV2hpdGVMaXN0Q29udHJhY3RzW19mcm9tXVtfdG9dID09ZmFsc2UKCQkJJiYgdXNlcldoaXRlTGlzdENvbnRyYWN0c1ttc2cuc2VuZGVyXVtfdG9dID09ZmFsc2UpIHsKCQkJYnl0ZXMgbWVtb3J5IGVtcHR5OwoJCQljaGVja0FuZEludm9rZVJlY2VpdmVyKF90bywgX3ZhbHVlLCBlbXB0eSk7CgkJfQoJCXJldHVybiBvazsKCX0KCglmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKCQlib29sIG9rID0gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CgkJaWYgKGVyYzIyM0FjdGl2YXRlZAoJCQkmJiB3aGl0ZUxpc3RDb250cmFjdHNbX3RvXSA9PWZhbHNlCgkJCSYmIHVzZXJXaGl0ZUxpc3RDb250cmFjdHNbX2Zyb21dW190b10gPT1mYWxzZQoJCQkmJiB1c2VyV2hpdGVMaXN0Q29udHJhY3RzW21zZy5zZW5kZXJdW190b10gPT1mYWxzZSkgewoJCQljaGVja0FuZEludm9rZVJlY2VpdmVyKF90bywgX3ZhbHVlLCBfZGF0YSk7CgkJfQoJCXJldHVybiBvazsKCX0KCn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9CdXJuYWJsZVRva2VuLnNvbAoKLyohCUZ1bmN0aW9uYWxpdHkgdG8ga2VlcCBidXJuIGZvciBvd25lci4KCUNvcHkgZnJvbSBCdXJuYWJsZSB0b2tlbiBidXQgb25seSBmb3Igb3duZXIKICovCmNvbnRyYWN0IEJ1cm5hYmxlVG9rZW4gaXMgRVJDMjIzVG9rZW4gewoJdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgoJLyohIENvcHkgZnJvbSBCdXJuYWJsZSB0b2tlbiBidXQgb25seSBmb3Igb3duZXIgKi8KCglldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwoKCS8qKgoJICogQGRldiBCdXJucyBhIHNwZWNpZmljIGFtb3VudCBvZiB0b2tlbnMuCgkgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgYnVybmVkLgoJICovCglmdW5jdGlvbiBidXJuVG9rZW5CdXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgb25seU93bmVyIHsKCQlyZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgkJLy8gbm8gbmVlZCB0byByZXF1aXJlIHZhbHVlIDw9IHRvdGFsU3VwcGx5LCBzaW5jZSB0aGF0IHdvdWxkIGltcGx5IHRoZQoJCS8vIHNlbmRlcidzIGJhbGFuY2UgaXMgZ3JlYXRlciB0aGFuIHRoZSB0b3RhbFN1cHBseSwgd2hpY2ggKnNob3VsZCogYmUgYW4gYXNzZXJ0aW9uIGZhaWx1cmUKCgkJYWRkcmVzcyBidXJuZXIgPSBtc2cuc2VuZGVyOwoJCWJhbGFuY2VzW2J1cm5lcl0gPSBiYWxhbmNlc1tidXJuZXJdLnN1YihfdmFsdWUpOwoJCXRvdGFsU3VwcGx5XyA9IHRvdGFsU3VwcGx5Xy5zdWIoX3ZhbHVlKTsKCQlCdXJuKGJ1cm5lciwgX3ZhbHVlKTsKCX0KfQoKLy8gRmlsZTogY29udHJhY3RzL0hvbGRlcnNUb2tlbi5zb2wKCi8qIQlGdW5jdGlvbmFsaXR5IHRvIGtlZXAgdXAtdG8tZGF0ZWQgbGlzdCBvZiBhbGwgaG9sZGVycy4KICovCmNvbnRyYWN0IEhvbGRlcnNUb2tlbiBpcyBCdXJuYWJsZVRva2VuIHsKCXVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKCS8qIQlLZWVwIHRoZSBsaXN0IG9mIGFkZHJlc3NlcyBvZiBob2xkZXJzIHVwLXRvLWRhdGVkCgoJCW90aGVyIGNvbnRyYWN0cyBjYW4gY29tbXVuaWNhdGUgd2l0aCBvciB0byBkbyBvcGVyYXRpb25zCgkJd2l0aCBhbGwgaG9sZGVycyBvZiB0b2tlbnMKCSAqLwoJbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgaXNIb2xkZXI7CglhZGRyZXNzIFtdIHB1YmxpYyBob2xkZXJzOwoKCWZ1bmN0aW9uIGFkZEhvbGRlcihhZGRyZXNzIF9hZGRyKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CgkJaWYgKGlzSG9sZGVyW19hZGRyXSAhPSB0cnVlKSB7CgkJCWhvbGRlcnNbaG9sZGVycy5sZW5ndGgrK10gPSBfYWRkcjsKCQkJaXNIb2xkZXJbX2FkZHJdID0gdHJ1ZTsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CgkJcmVxdWlyZShfdG8gIT0gYWRkcmVzcyh0aGlzKSk7IC8vIFByZXZlbnQgdHJhbnNmZXIgdG8gY29udHJhY3QgaXRzZWxmCgkJYm9vbCBvayA9IHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKCQlhZGRIb2xkZXIoX3RvKTsKCQlyZXR1cm4gb2s7Cgl9CgoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKCQlyZXF1aXJlKF90byAhPSBhZGRyZXNzKHRoaXMpKTsgLy8gUHJldmVudCB0cmFuc2ZlciB0byBjb250cmFjdCBpdHNlbGYKCQlib29sIG9rID0gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUsIF9kYXRhKTsKCQlhZGRIb2xkZXIoX3RvKTsKCQlyZXR1cm4gb2s7Cgl9CgoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKCQlyZXF1aXJlKF90byAhPSBhZGRyZXNzKHRoaXMpKTsgLy8gUHJldmVudCB0cmFuc2ZlciB0byBjb250cmFjdCBpdHNlbGYKCQlib29sIG9rID0gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CgkJYWRkSG9sZGVyKF90byk7CgkJcmV0dXJuIG9rOwoJfQoKCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewoJCXJlcXVpcmUoX3RvICE9IGFkZHJlc3ModGhpcykpOyAvLyBQcmV2ZW50IHRyYW5zZmVyIHRvIGNvbnRyYWN0IGl0c2VsZgoJCWJvb2wgb2sgPSBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlLCBfZGF0YSk7CgkJYWRkSG9sZGVyKF90byk7CgkJcmV0dXJuIG9rOwoJfQoKfQoKLy8gRmlsZTogY29udHJhY3RzL01pZ3JhdGlvbkFnZW50LnNvbAoKLyohCURlZmluaXRpb24gb2YgZGVzdGluYXRpb24gaW50ZXJmYWNlCglmb3IgY29udHJhY3QgdGhhdCBjYW4gYmUgdXNlZCBmb3IgbWlncmF0aW9uCiAqLwpjb250cmFjdCBNaWdyYXRpb25BZ2VudCB7CglmdW5jdGlvbiBtaWdyYXRlRnJvbShhZGRyZXNzIGZyb20sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKfQoKLy8gRmlsZTogY29udHJhY3RzL01pZ3JhdG9yeVRva2VuLnNvbAoKLyohCUZ1bmN0aW9uYWxpdHkgdG8gc3VwcG9ydCBtaWdyYXRpb25zIHRvIG5ldyB1cGdyYWRlZCBjb250cmFjdAoJZm9yIHRva2Vucy4gT25seSBoYXMgZWZmZWN0IGlmIG1pZ3JhdGlvbnMgYXJlIGVuYWJsZWQgYW5kCglhZGRyZXNzIG9mIG5ldyBjb250cmFjdCBpcyBrbm93bi4KICovCmNvbnRyYWN0IE1pZ3JhdG9yeVRva2VuIGlzIEhvbGRlcnNUb2tlbiB7Cgl1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCgkvLyEgQWRkcmVzcyBvZiBuZXcgY29udHJhY3QgZm9yIHBvc3NpYmxlIHVwZ3JhZGVzCglhZGRyZXNzIHB1YmxpYyBtaWdyYXRpb25BZ2VudDsKCS8vISBDb3VudGVyIHRvIGl0ZXJhdGUgKGJ5IHBvcnRpb25zKSB0aHJvdWdoIGFsbCBhZGRyZXNzZXMgZm9yIG1pZ3JhdGlvbgoJdWludDI1NiBwdWJsaWMgbWlncmF0aW9uQ291bnRDb21wbGV0ZTsKCgkvKiEJU2V0dXAgdGhlIGFkZHJlc3MgZm9yIG5ldyBjb250cmFjdCAodG8gbWlncmF0ZSBjb2lucyB0bykKCQlDYW4gYmUgY2FsbGVkIG9ubHkgYnkgb3duZXIgKG9ubHlPd25lcikKCSAqLwoJZnVuY3Rpb24gc2V0TWlncmF0aW9uQWdlbnQoYWRkcmVzcyBhZ2VudCkgcHVibGljIG9ubHlPd25lciB7CgkJbWlncmF0aW9uQWdlbnQgPSBhZ2VudDsKCX0KCgkvKiEJTWlncmF0ZSB0b2tlbnMgdG8gdGhlIG5ldyB0b2tlbiBjb250cmFjdAoJCVRoZSBtZXRob2QgY2FuIGJlIG9ubHkgY2FsbGVkIHdoZW4gbWlncmF0aW9uIGFnZW50IGlzIHNldC4KCgkJQ2FuIGJlIGNhbGxlZCBieSB1c2VyKGhvbGRlcikgdGhhdCB3b3VsZCBsaWtlIHRvIHRyYW5zZmVyCgkJY29pbnMgdG8gbmV3IGNvbnRyYWN0IGltbWVkaWF0ZWx5LgoJICovCglmdW5jdGlvbiBtaWdyYXRlKCkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKCQlyZXF1aXJlKG1pZ3JhdGlvbkFnZW50ICE9IDB4MCk7CgkJdWludDI1NiB2YWx1ZSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwoJCWJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKHZhbHVlKTsKCQl0b3RhbFN1cHBseV8gPSB0b3RhbFN1cHBseV8uc3ViKHZhbHVlKTsKCQlNaWdyYXRpb25BZ2VudChtaWdyYXRpb25BZ2VudCkubWlncmF0ZUZyb20obXNnLnNlbmRlciwgdmFsdWUpOwoJCS8vIE5vdGlmeSBhbnlvbmUgbGlzdGVuaW5nIHRoYXQgdGhpcyBtaWdyYXRpb24gdG9vayBwbGFjZQoJCU1pZ3JhdGUobXNnLnNlbmRlciwgdmFsdWUpOwoJCXJldHVybiB0cnVlOwoJfQoKCS8qIQlNaWdyYXRlIGhvbGRlcnMgb2YgdG9rZW5zIHRvIHRoZSBuZXcgY29udHJhY3QKCQlUaGUgbWV0aG9kIGNhbiBiZSBvbmx5IGNhbGxlZCB3aGVuIG1pZ3JhdGlvbiBhZ2VudCBpcyBzZXQuCgoJCUNhbiBiZSBjYWxsZWQgb25seSBieSBvd25lciAob25seU93bmVyKQoJICovCglmdW5jdGlvbiBtaWdyYXRlSG9sZGVycyh1aW50MjU2IGNvdW50KSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKCQlyZXF1aXJlKGNvdW50ID4gMCk7CgkJcmVxdWlyZShtaWdyYXRpb25BZ2VudCAhPSAweDApOwoJCS8vIENhbGN1bGF0ZSBib3VuZHMgZm9yIHByb2Nlc3NpbmcKCQljb3VudCA9IG1pZ3JhdGlvbkNvdW50Q29tcGxldGUuYWRkKGNvdW50KTsKCQlpZiAoY291bnQgPiBob2xkZXJzLmxlbmd0aCkgewoJCQljb3VudCA9IGhvbGRlcnMubGVuZ3RoOwoJCX0KCQkvLyBQcm9jZXNzIG1pZ3JhdGlvbgoJCWZvciAodWludDI1NiBpID0gbWlncmF0aW9uQ291bnRDb21wbGV0ZTsgaSA8IGNvdW50OyBpKyspIHsKCQkJYWRkcmVzcyBob2xkZXIgPSBob2xkZXJzW2ldOwoJCQl1aW50IHZhbHVlID0gYmFsYW5jZXNbaG9sZGVyXTsKCQkJYmFsYW5jZXNbaG9sZGVyXSA9IGJhbGFuY2VzW2hvbGRlcl0uc3ViKHZhbHVlKTsKCQkJdG90YWxTdXBwbHlfID0gdG90YWxTdXBwbHlfLnN1Yih2YWx1ZSk7CgkJCU1pZ3JhdGlvbkFnZW50KG1pZ3JhdGlvbkFnZW50KS5taWdyYXRlRnJvbShob2xkZXIsIHZhbHVlKTsKCQkJLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIG1pZ3JhdGlvbiB0b29rIHBsYWNlCgkJCU1pZ3JhdGUoaG9sZGVyLCB2YWx1ZSk7CgkJfQoJCW1pZ3JhdGlvbkNvdW50Q29tcGxldGUgPSBjb3VudDsKCQlyZXR1cm4gdHJ1ZTsKCX0KCglldmVudCBNaWdyYXRlKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgdWludDI1NiB2YWx1ZSk7Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9Gb2xsb3dDb2luLnNvbAoKY29udHJhY3QgRm9sbG93Q29pbiBpcyBNaWdyYXRvcnlUb2tlbiB7Cgl1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCgkvLyEgVG9rZW4gbmFtZSBGb2xsb3dDb2luCglzdHJpbmcgcHVibGljIG5hbWU7CgkvLyEgVG9rZW4gc3ltYm9sIEZMTFcKCXN0cmluZyBwdWJsaWMgc3ltYm9sOwoJLy8hIFRva2VuIGRlY2ltYWxzLCAxOAoJdWludDggcHVibGljIGRlY2ltYWxzOwoKCS8qIQlDb250cnVjdG9yCgkgKi8KCWZ1bmN0aW9uIEZvbGxvd0NvaW4oKSBwdWJsaWMgewoJCW5hbWUgPSAiRm9sbG93Q29pbiI7CgkJc3ltYm9sID0gIkZMTFciOwoJCWRlY2ltYWxzID0gMTg7CgkJdG90YWxTdXBwbHlfID0gNTE1NTQ3NTM1MTczOTU5MDc2MTc0ODIwMDAwOwoJCWJhbGFuY2VzW293bmVyXSA9IHRvdGFsU3VwcGx5XzsKCQlob2xkZXJzW2hvbGRlcnMubGVuZ3RoKytdID0gb3duZXI7CgkJaXNIb2xkZXJbb3duZXJdID0gdHJ1ZTsKCX0KCgkvLyEgQWRkcmVzcyBvZiBtaWdyYXRpb24gZ2F0ZSB0byBkbyB0cmFuc2Zlck11bHRpIG9uIG1pZ3JhdGlvbgoJYWRkcmVzcyBwdWJsaWMgbWlncmF0aW9uR2F0ZTsKCgkvKiEJU2V0dXAgdGhlIGFkZHJlc3MgZm9yIG5ldyBjb250cmFjdCAodG8gbWlncmF0ZSBjb2lucyB0bykKCQlDYW4gYmUgY2FsbGVkIG9ubHkgYnkgb3duZXIgKG9ubHlPd25lcikKCSAqLwoJZnVuY3Rpb24gc2V0TWlncmF0aW9uR2F0ZShhZGRyZXNzIF9hZGRyKSBwdWJsaWMgb25seU93bmVyIHsKCQltaWdyYXRpb25HYXRlID0gX2FkZHI7Cgl9CgoJLyohCVRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgbWlncmF0aW9uR2F0ZS4KCSAqLwoJbW9kaWZpZXIgb25seU1pZ3JhdGlvbkdhdGUoKSB7CgkJcmVxdWlyZShtc2cuc2VuZGVyID09IG1pZ3JhdGlvbkdhdGUpOwoJCV87Cgl9CgoJLyohCVRyYW5zZmVyIHRva2VucyB0byBtdWx0aXBlIGRlc3RpbmF0aW9uIGFkZHJlc3NlcwoJCVJldHVybnMgbGlzdCB3aXRoIGFwcHJvcHJpYXRlIChieSBpbmRleCkgc3VjY2Vzc2Z1bCBzdGF0dXNlcy4KCQkoc3RyaW5nIHdpdGggMCBvciAxIGNoYXJzKQoJICovCglmdW5jdGlvbiB0cmFuc2Zlck11bHRpKGFkZHJlc3MgW10gX3RvcywgdWludDI1NiBbXSBfdmFsdWVzKSBwdWJsaWMgb25seU1pZ3JhdGlvbkdhdGUgcmV0dXJucyAoc3RyaW5nKSB7CgkJcmVxdWlyZShfdG9zLmxlbmd0aCA9PSBfdmFsdWVzLmxlbmd0aCk7CgkJYnl0ZXMgbWVtb3J5IHJldHVybl92YWx1ZXMgPSBuZXcgYnl0ZXMoX3Rvcy5sZW5ndGgpOwoKCQlmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfdG9zLmxlbmd0aDsgaSsrKSB7CgkJCWFkZHJlc3MgX3RvID0gX3Rvc1tpXTsKCQkJdWludDI1NiBfdmFsdWUgPSBfdmFsdWVzW2ldOwoJCQlyZXR1cm5fdmFsdWVzW2ldID0gYnl0ZSg0OCk7IC8vJzAnCgoJCQlpZiAoX3RvICE9IGFkZHJlc3MoMCkgJiYKCQkJCV92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSkgewoKCQkJCWJvb2wgb2sgPSB0cmFuc2ZlcihfdG8sIF92YWx1ZSk7CgkJCQlpZiAob2spIHsKCQkJCQlyZXR1cm5fdmFsdWVzW2ldID0gYnl0ZSg0OSk7IC8vJzEnCgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuIHN0cmluZyhyZXR1cm5fdmFsdWVzKTsKCX0KCgkvKiEJRG8gbm90IGFjY2VwdCBpbmNvbWluZyBldGhlcgoJICovCglmdW5jdGlvbigpIHB1YmxpYyBwYXlhYmxlIHsKCQlyZXZlcnQoKTsKCX0KfQ=='.
	

]
