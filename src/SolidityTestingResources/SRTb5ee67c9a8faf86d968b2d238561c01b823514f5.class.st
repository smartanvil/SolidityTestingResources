Class {
	#name : #SRTb5ee67c9a8faf86d968b2d238561c01b823514f5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb5ee67c9a8faf86d968b2d238561c01b823514f5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSB7CiAgICAgIHRocm93OwogICAgfQogIH0KfQoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sIAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLiAKICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqIAogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuIAogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgIHRocm93OwogICAgfQogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uIAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogIH0KCn0KCi8qKgogKiBAdGl0bGUgUGF1c2FibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgogKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CiAgZXZlbnQgUGF1c2UoKTsKICBldmVudCBVbnBhdXNlKCk7CgogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKCiAgLyoqCiAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgSVMgcGF1c2VkCiAgICovCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgIGlmIChwYXVzZWQpIHRocm93OwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgbW9kaWZpZXIgdG8gYWxsb3cgYWN0aW9ucyBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IElTIE5PVCBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkIHsKICAgIGlmICghcGF1c2VkKSB0aHJvdzsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgKi8KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50IHB1YmxpYyBfdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLgogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBPd25hYmxlLCBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAvLyBhZGRpdGlvbmFsIHZhcmlhYmxlcyBmb3IgdXNlIGlmIHRyYW5zYWN0aW9uIGZlZXMgZXZlciBiZWNhbWUgbmVjZXNzYXJ5CiAgdWludCBwdWJsaWMgYmFzaXNQb2ludHNSYXRlID0gMDsKICB1aW50IHB1YmxpYyBtYXhpbXVtRmVlID0gMDsKCiAgLyoqCiAgICogQGRldiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjay4KICAgKi8KICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsKICAgICAgIHRocm93OwogICAgIH0KICAgICBfOwogIH0KCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CiAgICB1aW50IGZlZSA9IChfdmFsdWUubXVsKGJhc2lzUG9pbnRzUmF0ZSkpLmRpdigxMDAwMCk7CiAgICBpZiAoZmVlID4gbWF4aW11bUZlZSkgewogICAgICBmZWUgPSBtYXhpbXVtRmVlOwogICAgfQogICAgdWludCBzZW5kQW1vdW50ID0gX3ZhbHVlLnN1YihmZWUpOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChzZW5kQW1vdW50KTsKICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5hZGQoZmVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgc2VuZEFtb3VudCk7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludCByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgogIHVpbnQgY29uc3RhbnQgTUFYX1VJTlQgPSAyKioyNTYgLSAxOwoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIGlmIChfdmFsdWUgPiBfYWxsb3dhbmNlKSB0aHJvdzsKCiAgICB1aW50IGZlZSA9IChfdmFsdWUubXVsKGJhc2lzUG9pbnRzUmF0ZSkpLmRpdigxMDAwMCk7CiAgICBpZiAoZmVlID4gbWF4aW11bUZlZSkgewogICAgICBmZWUgPSBtYXhpbXVtRmVlOwogICAgfQogICAgdWludCBzZW5kQW1vdW50ID0gX3ZhbHVlLnN1YihmZWUpOwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChzZW5kQW1vdW50KTsKICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5hZGQoZmVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGlmIChfYWxsb3dhbmNlIDwgTUFYX1VJTlQpIHsKICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgfQogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgc2VuZEFtb3VudCk7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgaWYgKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9IDApKSB0aHJvdzsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGFuIGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludCBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKCi8vLyBAdGl0bGUgLSBUZXRoZXIgVG9rZW4gQ29udHJhY3QgLSBUZXRoZXIudG8KLy8vIEBhdXRob3IgRW5yaWNvIFJ1YmJvbGkgLSA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjgyZTdlY2YwZWJlMWVkYzJlMGViZjZlNGViZWNlN2ZhYWNlMWVkZWYiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgovLy8gQGF1dGhvciBXaWxsIEhhcmJvcm5lIC0gPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSIzOTRlNTA1NTU1Nzk1YzRkNTE1ZjUwNTc1YzQxMTc1YTU2NTQiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgoKY29udHJhY3QgVGV0aGVyVG9rZW4gaXMgUGF1c2FibGUsIFN0YW5kYXJkVG9rZW4gewoKICBzdHJpbmcgcHVibGljIG5hbWU7CiAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgdWludCBwdWJsaWMgZGVjaW1hbHM7CiAgYWRkcmVzcyBwdWJsaWMgdXBncmFkZWRBZGRyZXNzOwogIGJvb2wgcHVibGljIGRlcHJlY2F0ZWQ7CgogIC8vICBUaGUgY29udHJhY3QgY2FuIGJlIGluaXRpYWxpemVkIHdpdGggYSBudW1iZXIgb2YgdG9rZW5zCiAgLy8gIEFsbCB0aGUgdG9rZW5zIGFyZSBkZXBvc2l0ZWQgdG8gdGhlIG93bmVyIGFkZHJlc3MKICAvLwogIC8vIEBwYXJhbSBfYmFsYW5jZSBJbml0aWFsIHN1cHBseSBvZiB0aGUgY29udHJhY3QKICAvLyBAcGFyYW0gX25hbWUgVG9rZW4gTmFtZQogIC8vIEBwYXJhbSBfc3ltYm9sIFRva2VuIHN5bWJvbAogIC8vIEBwYXJhbSBfZGVjaW1hbHMgVG9rZW4gZGVjaW1hbHMKICBmdW5jdGlvbiBUZXRoZXJUb2tlbih1aW50IF9pbml0aWFsU3VwcGx5LCBzdHJpbmcgX25hbWUsIHN0cmluZyBfc3ltYm9sLCB1aW50IF9kZWNpbWFscyl7CiAgICAgIF90b3RhbFN1cHBseSA9IF9pbml0aWFsU3VwcGx5OwogICAgICBuYW1lID0gX25hbWU7CiAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICAgIGRlY2ltYWxzID0gX2RlY2ltYWxzOwogICAgICBiYWxhbmNlc1tvd25lcl0gPSBfaW5pdGlhbFN1cHBseTsKICAgICAgZGVwcmVjYXRlZCA9IGZhbHNlOwogIH0KCiAgLy8gRm9yd2FyZCBFUkMyMCBtZXRob2RzIHRvIHVwZ3JhZGVkIGNvbnRyYWN0IGlmIHRoaXMgb25lIGlzIGRlcHJlY2F0ZWQKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHdoZW5Ob3RQYXVzZWQgewogICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgcmV0dXJuIFN0YW5kYXJkVG9rZW4odXBncmFkZWRBZGRyZXNzKS50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQogIH0KCiAgLy8gRm9yd2FyZCBFUkMyMCBtZXRob2RzIHRvIHVwZ3JhZGVkIGNvbnRyYWN0IGlmIHRoaXMgb25lIGlzIGRlcHJlY2F0ZWQKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSB3aGVuTm90UGF1c2VkIHsKICAgIGlmIChkZXByZWNhdGVkKSB7CiAgICAgIHJldHVybiBTdGFuZGFyZFRva2VuKHVwZ3JhZGVkQWRkcmVzcykudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CiAgfQoKICAvLyBGb3J3YXJkIEVSQzIwIG1ldGhvZHMgdG8gdXBncmFkZWQgY29udHJhY3QgaWYgdGhpcyBvbmUgaXMgZGVwcmVjYXRlZAogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCl7CiAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICByZXR1cm4gU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLmJhbGFuY2VPZih3aG8pOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN1cGVyLmJhbGFuY2VPZih3aG8pOwogICAgfQogIH0KCiAgLy8gRm9yd2FyZCBFUkMyMCBtZXRob2RzIHRvIHVwZ3JhZGVkIGNvbnRyYWN0IGlmIHRoaXMgb25lIGlzIGRlcHJlY2F0ZWQKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CiAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICByZXR1cm4gU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLmFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc3VwZXIuYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKTsKICAgIH0KICB9CgogIC8vIEZvcndhcmQgRVJDMjAgbWV0aG9kcyB0byB1cGdyYWRlZCBjb250cmFjdCBpZiB0aGlzIG9uZSBpcyBkZXByZWNhdGVkCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgcmV0dXJuIFN0YW5kYXJkVG9rZW4odXBncmFkZWRBZGRyZXNzKS5hbGxvd2FuY2UoX293bmVyLCBfc3BlbmRlcik7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc3VwZXIuYWxsb3dhbmNlKF9vd25lciwgX3NwZW5kZXIpOwogICAgfQogIH0KCiAgLy8gZGVwcmVjYXRlIGN1cnJlbnQgY29udHJhY3QgaW4gZmF2b3VyIG9mIGEgbmV3IG9uZQogIGZ1bmN0aW9uIGRlcHJlY2F0ZShhZGRyZXNzIF91cGdyYWRlZEFkZHJlc3MpIG9ubHlPd25lciB7CiAgICBkZXByZWNhdGVkID0gdHJ1ZTsKICAgIHVwZ3JhZGVkQWRkcmVzcyA9IF91cGdyYWRlZEFkZHJlc3M7CiAgICBEZXByZWNhdGUoX3VwZ3JhZGVkQWRkcmVzcyk7CiAgfQoKICAvLyBkZXByZWNhdGUgY3VycmVudCBjb250cmFjdCBpZiBmYXZvdXIgb2YgYSBuZXcgb25lCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KXsKICAgIGlmIChkZXByZWNhdGVkKSB7CiAgICAgIHJldHVybiBTdGFuZGFyZFRva2VuKHVwZ3JhZGVkQWRkcmVzcykudG90YWxTdXBwbHkoKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBfdG90YWxTdXBwbHk7CiAgICB9CiAgfQoKICAvLyBJc3N1ZSBhIG5ldyBhbW91bnQgb2YgdG9rZW5zCiAgLy8gdGhlc2UgdG9rZW5zIGFyZSBkZXBvc2l0ZWQgaW50byB0aGUgb3duZXIgYWRkcmVzcwogIC8vCiAgLy8gQHBhcmFtIF9hbW91bnQgTnVtYmVyIG9mIHRva2VucyB0byBiZSBpc3N1ZWQKICBmdW5jdGlvbiBpc3N1ZSh1aW50IGFtb3VudCkgb25seU93bmVyIHsKICAgIGlmIChfdG90YWxTdXBwbHkgKyBhbW91bnQgPCBfdG90YWxTdXBwbHkpIHRocm93OwogICAgaWYgKGJhbGFuY2VzW293bmVyXSArIGFtb3VudCA8IGJhbGFuY2VzW293bmVyXSkgdGhyb3c7CgogICAgYmFsYW5jZXNbb3duZXJdICs9IGFtb3VudDsKICAgIF90b3RhbFN1cHBseSArPSBhbW91bnQ7CiAgICBJc3N1ZShhbW91bnQpOwogIH0KCiAgLy8gUmVkZWVtIHRva2Vucy4KICAvLyBUaGVzZSB0b2tlbnMgYXJlIHdpdGhkcmF3biBmcm9tIHRoZSBvd25lciBhZGRyZXNzCiAgLy8gaWYgdGhlIGJhbGFuY2UgbXVzdCBiZSBlbm91Z2ggdG8gY292ZXIgdGhlIHJlZGVlbQogIC8vIG9yIHRoZSBjYWxsIHdpbGwgZmFpbC4KICAvLyBAcGFyYW0gX2Ftb3VudCBOdW1iZXIgb2YgdG9rZW5zIHRvIGJlIGlzc3VlZAogIGZ1bmN0aW9uIHJlZGVlbSh1aW50IGFtb3VudCkgb25seU93bmVyIHsKICAgICAgaWYgKF90b3RhbFN1cHBseSA8IGFtb3VudCkgdGhyb3c7CiAgICAgIGlmIChiYWxhbmNlc1tvd25lcl0gPCBhbW91bnQpIHRocm93OwoKICAgICAgX3RvdGFsU3VwcGx5IC09IGFtb3VudDsKICAgICAgYmFsYW5jZXNbb3duZXJdIC09IGFtb3VudDsKICAgICAgUmVkZWVtKGFtb3VudCk7CiAgfQoKICBmdW5jdGlvbiBzZXRQYXJhbXModWludCBuZXdCYXNpc1BvaW50cywgdWludCBuZXdNYXhGZWUpIG9ubHlPd25lciB7CiAgICAgIC8vIEVuc3VyZSB0cmFuc3BhcmVuY3kgYnkgaGFyZGNvZGluZyBsaW1pdCBiZXlvbmQgd2hpY2ggZmVlcyBjYW4gbmV2ZXIgYmUgYWRkZWQKICAgICAgaWYgKG5ld0Jhc2lzUG9pbnRzID4gMjApIHRocm93OwogICAgICBpZiAobmV3TWF4RmVlID4gNTApIHRocm93OwoKICAgICAgYmFzaXNQb2ludHNSYXRlID0gbmV3QmFzaXNQb2ludHM7CiAgICAgIG1heGltdW1GZWUgPSBuZXdNYXhGZWUubXVsKDEwKipkZWNpbWFscyk7CgogICAgICBQYXJhbXMoYmFzaXNQb2ludHNSYXRlLCBkZWNpbWFscyk7CiAgfQoKICAvLyBDYWxsZWQgd2hlbiBuZXcgdG9rZW4gYXJlIGlzc3VlZAogIGV2ZW50IElzc3VlKHVpbnQgYW1vdW50KTsKCiAgLy8gQ2FsbGVkIHdoZW4gdG9rZW5zIGFyZSByZWRlZW1lZAogIGV2ZW50IFJlZGVlbSh1aW50IGFtb3VudCk7CgogIC8vIENhbGxlZCB3aGVuIGNvbnRyYWN0IGlzIGRlcHJlY2F0ZWQKICBldmVudCBEZXByZWNhdGUoYWRkcmVzcyBuZXdBZGRyZXNzKTsKCiAgLy8gQ2FsbGVkIGlmIGNvbnRyYWN0IGV2ZXIgYWRkcyBmZWVzCiAgZXZlbnQgUGFyYW1zKHVpbnQgZmVlQmFzaXNQb2ludHMsIHVpbnQgbWF4RmVlKTsKfQ=='.
	

]
