Class {
	#name : #SRTdadf84e3adfc746e005d55ab427c1a8b1cc9cba5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdadf84e3adfc746e005d55ab427c1a8b1cc9cba5 >> base64 [
	^ 'LyoqCiAqICBNdWx0aVNpZy5zb2wgdjEuMS4wCiAqIAogKiAgQmlsYWwgQXJpZiAtIGh0dHBzOi8vdHdpdHRlci5jb20vZnVydXNpeXlhXwogKiAgRHJhZ2xldCBHYm1ICiAqLwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgoKbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBwdXJlIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBwdXJlIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBwdXJlIGludGVybmFsIHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBwdXJlIGludGVybmFsIHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBwdXJlIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCn0KCmNvbnRyYWN0IFJlZW50cmFuY3lHdWFyZCB7CgogIC8qKgogICAqIEBkZXYgV2UgdXNlIGEgc2luZ2xlIGxvY2sgZm9yIHRoZSB3aG9sZSBjb250cmFjdC4KICAgKi8KICBib29sIHByaXZhdGUgcmVudHJhbmN5X2xvY2sgPSBmYWxzZTsKCiAgLyoqCiAgICogQGRldiBQcmV2ZW50cyBhIGNvbnRyYWN0IGZyb20gY2FsbGluZyBpdHNlbGYsIGRpcmVjdGx5IG9yIGluZGlyZWN0bHkuCiAgICogQG5vdGljZSBJZiB5b3UgbWFyayBhIGZ1bmN0aW9uIGBub25SZWVudHJhbnRgLCB5b3Ugc2hvdWxkIGFsc28KICAgKiBtYXJrIGl0IGBleHRlcm5hbGAuIENhbGxpbmcgb25lIG5vblJlZW50cmFudCBmdW5jdGlvbiBmcm9tCiAgICogYW5vdGhlciBpcyBub3Qgc3VwcG9ydGVkLiBJbnN0ZWFkLCB5b3UgY2FuIGltcGxlbWVudCBhCiAgICogYHByaXZhdGVgIGZ1bmN0aW9uIGRvaW5nIHRoZSBhY3R1YWwgd29yaywgYW5kIGEgYGV4dGVybmFsYAogICAqIHdyYXBwZXIgbWFya2VkIGFzIGBub25SZWVudHJhbnRgLgogICAqLwogIG1vZGlmaWVyIG5vblJlZW50cmFudCgpIHsKICAgIHJlcXVpcmUoIXJlbnRyYW5jeV9sb2NrKTsKICAgIHJlbnRyYW5jeV9sb2NrID0gdHJ1ZTsKICAgIF87CiAgICByZW50cmFuY3lfbG9jayA9IGZhbHNlOwogIH0KCn0KCi8qKgogKiBNdWx0aVNpZyBpcyBkZXNpZ25lZCB0byBob2xkIGZ1bmRzIG9mIHRoZSBpY28uIEFjY291bnQgaXMgY29udHJvbGxlZCBieSBmb3VyIGFkbWluaXN0cmF0b3MuIFRvIHRyaWdnZXIgYSBwYXlvdXQKICogdGhyZWUgb3V0IG9mIGZvdXIgYWRtaW5pc3RyYXRvcnMgd2lsbCBtdXN0IGFncmVlIG9uIHNhbWUgYW1vdW50IG9mIGV0aGVycyB0byBiZSB0cmFuc2ZlcnJlZC4gRHVyaW5nIHRoZSBzaWduaW5nCiAqIHByb2Nlc3MgaWYgb25lIGFkbWluaXN0cmF0b3Igc2VuZHMgZGlmZmVyZW50IHRhcmdldHRlZCBhZGRyZXNzIG9yIGFtb3VudCBvZiBldGhlcnMsIHByb2Nlc3Mgd2lsbCBhYm9ydCBhbmQgdGhleQogKiBuZWVkIHRvIHN0YXJ0IGFnYWluLgogKiBBZG1pbmlzdHJhdG9yIGNhbiBiZSByZXBsYWNlZCBidXQgdGhyZWUgb3V0IG9mIGZvdXIgbXVzdCBhZ3JlZSB1cG9uIHJlcGxhY2VtZW50IG9mIGZvdXJ0aCBhZG1pbmlzdHJhdG9yLiBUaHJlZQogKiBhZG1pbnMgd2lsbCBzZW5kIGFkZHJlc3Mgb2YgZm91cnRoIGFkbWluaXN0cmF0b3IgYWxvbmcgd2l0aCBhZGRyZXNzIG9mIG5ldyBvbmUgYWRtaW5pc3RyYXRvci4gSWYgYSBzaW5nbGUgb25lCiAqIHNlbmRzIGRpZmZlcmVudCBhZGRyZXNzIHRoZSB1cGRhdGluZyBwcm9jZXNzIHdpbGwgYWJvcnQgYW5kIHRoZXkgbmVlZCB0byBzdGFydCBhZ2Fpbi4gCiAqLwoKY29udHJhY3QgTXVsdGlTaWcgaXMgUmVlbnRyYW5jeUd1YXJkewogIAogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogIAogIC8vIE1haW50YWluIHN0YXRlIGZ1bmRzIHRyYW5zZmVyIHNpZ25pbmcgcHJvY2VzcwogIHN0cnVjdCBUcmFuc2FjdGlvbnsKICAgIGFkZHJlc3NbM10gc2lnbmVyOwogICAgdWludCBjb25maXJtYXRpb25zOwogICAgdWludDI1NiBldGg7CiAgfQogIAogIC8vIGNvdW50IGFuZCByZWNvcmQgc2lnbmVycyB3aXRoIGV0aGVycyB0aGV5IGFncmVlIHRvIHRyYW5zZmVyCiAgVHJhbnNhY3Rpb24gcHJpdmF0ZSAgcGVuZGluZzsKICAgIAogIC8vIHRoZSBudW1iZXIgb2YgYWRtaW5pc3RyYXRvciB0aGF0IG11c3QgY29uZmlybSB0aGUgc2FtZSBvcGVyYXRpb24gYmVmb3JlIGl0IGlzIHJ1bi4KICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyByZXF1aXJlZCA9IDM7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwcml2YXRlIGFkbWluaXN0cmF0b3JzOwogCiAgLy8gRnVuZHMgaGFzIGFycml2ZWQgaW50byB0aGUgY29udHJhY3QgKHJlY29yZCBob3cgbXVjaCkuCiAgZXZlbnQgRGVwb3NpdChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IHZhbHVlKTsKICAKICAvLyBGdW5kcyB0cmFuc2ZlciB0byBvdGhlciBjb250cmFjdAogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcmlzdFNpZ25lciwgYWRkcmVzcyBpbmRleGVkIHNlY29uZFNpZ25lciwgYWRkcmVzcyBpbmRleGVkIHRoaXJkU2lnbmVyLCBhZGRyZXNzIHRvLHVpbnQyNTYgZXRoLGJvb2wgc3VjY2Vzcyk7CiAgCiAgLy8gQWRtaW5pc3RyYXRvciBzdWNjZXNzZnVsbHkgc2lnbnMgYSBmdW5kIHRyYW5zZmVyCiAgZXZlbnQgVHJhbnNmZXJDb25maXJtZWQoYWRkcmVzcyBzaWduZXIsdWludDI1NiBhbW91bnQsdWludDI1NiByZW1haW5pbmdDb25maXJtYXRpb25zKTsKICAKICAvLyBBZG1pbmlzdHJhdG9yIHN1Y2Nlc3NmdWxseSBzaWducyBhIGtleSB1cGRhdGUgdHJhbnNhY3Rpb24KICBldmVudCBVcGRhdGVDb25maXJtZWQoYWRkcmVzcyBpbmRleGVkIHNpZ25lcixhZGRyZXNzIGluZGV4ZWQgbmV3QWRkcmVzcyx1aW50MjU2IHJlbWFpbmluZ0NvbmZpcm1hdGlvbnMpOwogIAogIAogIC8vIEFkbWluaXN0cmF0b3IgdmlvbGF0ZWQgY29uc2Vuc3VzCiAgZXZlbnQgVmlvbGF0ZWQoc3RyaW5nIGFjdGlvbiwgYWRkcmVzcyBzZW5kZXIpOyAKICAKICAvLyBBZG1pbmlzdHJhdG9yIGtleSB1cGRhdGVkIChhZG1pbmlzdHJhdG9yIHJlcGxhY2VkKQogIGV2ZW50IEtleVJlcGxhY2VkKGFkZHJlc3Mgb2xkS2V5LGFkZHJlc3MgbmV3S2V5KTsKCiAgZXZlbnQgRXZlbnRUcmFuc2Zlcldhc1Jlc2V0KCk7CiAgZXZlbnQgRXZlbnRVcGRhdGVXYXNSZXNldCgpOwogIAogIAogIGZ1bmN0aW9uIFByZUlDTygpIHB1YmxpYyB7CgogICAgYWRtaW5pc3RyYXRvcnNbMHg4RTBjNUExYjU1ZDRFNzFCNzg5MTAxMEVGNTA0YjExZjE5RjRjNDY2XSA9IHRydWU7CiAgICBhZG1pbmlzdHJhdG9yc1sweDVlNzcxNTZDRDM1NTc0QTFkQUMxMjU5OTJCNzNiM0M1YTk3M2E0ZWJdID0gdHJ1ZTsKICAgIGFkbWluaXN0cmF0b3JzWzB4NjA0RWRGOEZFMDFkYjBBZGFmRUQ0NzAxRjVEZTQyYjE1MDY3ZDIzY10gPSB0cnVlOwogICAgYWRtaW5pc3RyYXRvcnNbMHhlZDRDNzNBZDc2RDkwNzE1ZDY0ODc5N0FjZDI5QTg1MjlFRDUxMUEwXSA9IHRydWU7CgogIH0KICAKICAvKioKICAgKiBAZGV2ICBUbyB0cmlnZ2VyIHBheW91dCB0aHJlZSBvdXQgb2YgZm91ciBhZG1pbmlzdHJhdG9ycyBjYWxsIHRoaXMKICAgKiBmdW5jdGlvbiwgZnVuZHMgd2lsbCBiZSB0cmFuc2ZlcnJlZCByaWdodCBhZnRlciB2ZXJpZmljYXRpb24gb2YKICAgKiB0aGlyZCBzaWduZXIgY2FsbC4KICAgKiBAcGFyYW0gcmVjaXBpZW50IFRoZSBhZGRyZXNzIG9mIHJlY2lwaWVudAogICAqIEBwYXJhbSBhbW91bnQgQW1vdW50IG9mIHdlaSB0byBiZSB0cmFuc2ZlcnJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgcmVjaXBpZW50LCB1aW50MjU2IGFtb3VudCkgZXh0ZXJuYWwgb25seUFkbWluIG5vblJlZW50cmFudCB7CiAgICAKICAgIC8vIGlucHV0IHZhbGlkYXRpb25zCiAgICByZXF1aXJlKCByZWNpcGllbnQgIT0gMHgwMCApOwogICAgcmVxdWlyZSggYW1vdW50ID4gMCApOwogICAgcmVxdWlyZSggdGhpcy5iYWxhbmNlID49IGFtb3VudCk7CgogICAgdWludCByZW1haW5pbmc7CiAgICAKICAgIC8vIFN0YXJ0IG9mIHNpZ25pbmcgcHJvY2VzcywgZmlyc3Qgc2lnbmVyIHdpbGwgZmluYWxpemUgaW5wdXRzIGZvciByZW1haW5pbmcgdHdvCiAgICBpZihwZW5kaW5nLmNvbmZpcm1hdGlvbnMgPT0gMCl7CiAgICAgICAgCiAgICAgICAgcGVuZGluZy5zaWduZXJbcGVuZGluZy5jb25maXJtYXRpb25zXSA9IG1zZy5zZW5kZXI7CiAgICAgICAgcGVuZGluZy5ldGggPSBhbW91bnQ7CiAgICAgICAgcGVuZGluZy5jb25maXJtYXRpb25zID0gcGVuZGluZy5jb25maXJtYXRpb25zLmFkZCgxKTsKICAgICAgICByZW1haW5pbmcgPSByZXF1aXJlZC5zdWIocGVuZGluZy5jb25maXJtYXRpb25zKTsKICAgICAgICBUcmFuc2ZlckNvbmZpcm1lZChtc2cuc2VuZGVyLGFtb3VudCxyZW1haW5pbmcpOwogICAgICAgIHJldHVybjsKICAgIAogICAgfQogICAgCiAgICAvLyBDb21wYXJlIGFtb3VudCBvZiB3ZWkgd2l0aCBwcmV2aW91cyBjb25maXJtdGFpb24KICAgIGlmKHBlbmRpbmcuZXRoICE9IGFtb3VudCl7CiAgICAgICAgdHJhbnNmZXJWaW9sYXRlZCgiSW5jb3JyZWN0IGFtb3VudCBvZiB3ZWkgcGFzc2VkIik7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgCiAgICAvLyBtYWtlIHN1cmUgc2lnbmVyIGlzIG5vdCB0cnlpbmcgdG8gc3BhbQogICAgaWYobXNnLnNlbmRlciA9PSBwZW5kaW5nLnNpZ25lclswXSl7CiAgICAgICAgdHJhbnNmZXJWaW9sYXRlZCgiU2lnbmVyIGlzIHNwYW1taW5nIik7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgCiAgICBwZW5kaW5nLnNpZ25lcltwZW5kaW5nLmNvbmZpcm1hdGlvbnNdID0gbXNnLnNlbmRlcjsKICAgIHBlbmRpbmcuY29uZmlybWF0aW9ucyA9IHBlbmRpbmcuY29uZmlybWF0aW9ucy5hZGQoMSk7CiAgICByZW1haW5pbmcgPSByZXF1aXJlZC5zdWIocGVuZGluZy5jb25maXJtYXRpb25zKTsKICAgIAogICAgLy8gbWFrZSBzdXJlIHNpZ25lciBpcyBub3QgdHJ5aW5nIHRvIHNwYW0KICAgIGlmKCByZW1haW5pbmcgPT0gMCl7CiAgICAgICAgaWYobXNnLnNlbmRlciA9PSBwZW5kaW5nLnNpZ25lclsxXSl7CiAgICAgICAgICAgIHRyYW5zZmVyVmlvbGF0ZWQoIk9uZSBvZiBzaWduZXJzIGlzIHNwYW1taW5nIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICB9CiAgICAKICAgIFRyYW5zZmVyQ29uZmlybWVkKG1zZy5zZW5kZXIsYW1vdW50LHJlbWFpbmluZyk7CiAgICAKICAgIC8vIElmIHRocmVlIGNvbmZpcm1hdGlvbiBhcmUgZG9uZSwgdHJpZ2dlciBwYXlvdXQKICAgIGlmIChwZW5kaW5nLmNvbmZpcm1hdGlvbnMgPT0gMyl7CiAgICAgICAgaWYocmVjaXBpZW50LnNlbmQoYW1vdW50KSl7CiAgICAgICAgICAgIFRyYW5zZmVyKHBlbmRpbmcuc2lnbmVyWzBdLHBlbmRpbmcuc2lnbmVyWzFdLCBwZW5kaW5nLnNpZ25lclsyXSwgcmVjaXBpZW50LGFtb3VudCx0cnVlKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgVHJhbnNmZXIocGVuZGluZy5zaWduZXJbMF0scGVuZGluZy5zaWduZXJbMV0sIHBlbmRpbmcuc2lnbmVyWzJdLCByZWNpcGllbnQsYW1vdW50LGZhbHNlKTsKICAgICAgICB9CiAgICAgICAgUmVzZXRUcmFuc2ZlclN0YXRlKCk7CiAgICB9IAogIH0KICAKICBmdW5jdGlvbiB0cmFuc2ZlclZpb2xhdGVkKHN0cmluZyBlcnJvcikgcHJpdmF0ZSB7CiAgICBWaW9sYXRlZChlcnJvciwgbXNnLnNlbmRlcik7CiAgICBSZXNldFRyYW5zZmVyU3RhdGUoKTsKICB9CiAgCiAgZnVuY3Rpb24gUmVzZXRUcmFuc2ZlclN0YXRlKCkgaW50ZXJuYWwKICB7CiAgICAgIGRlbGV0ZSBwZW5kaW5nOwogICAgICBFdmVudFRyYW5zZmVyV2FzUmVzZXQoKTsKICB9CgoKICAvKioKICAgKiBAZGV2IFJlc2V0IHZhbHVlcyBvZiBwZW5kaW5nIChUcmFuc2FjdGlvbiBvYmplY3QpCiAgICovCiAgZnVuY3Rpb24gYWJvcnRUcmFuc2FjdGlvbigpIGV4dGVybmFsIG9ubHlBZG1pbnsKICAgICAgIFJlc2V0VHJhbnNmZXJTdGF0ZSgpOwogIH0KICAKICAvKiogCiAgICogQGRldiBGYWxsYmFjayBmdW5jdGlvbiwgcmVjZWl2ZXMgdmFsdWUgYW5kIGVtaXRzIGEgZGVwb3NpdCBldmVudC4gCiAgICovCiAgZnVuY3Rpb24oKSBwYXlhYmxlIHB1YmxpYyB7CiAgICAvLyBqdXN0IGJlaW5nIHNlbnQgc29tZSBjYXNoPwogICAgaWYgKG1zZy52YWx1ZSA+IDApCiAgICAgIERlcG9zaXQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgQ2hlY2tzIGlmIGdpdmVuIGFkZHJlc3MgaXMgYW4gYWRtaW5pc3RyYXRvci4KICAgKiBAcGFyYW0gX2FkZHIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBjaGVjay4KICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIGFkZHJlc3MgaXMgYW4gYWRtaW5pc3RyYXRvciBhbmQgZmFzZSBvdGhlcndpc2UuCiAgICovCiAgZnVuY3Rpb24gaXNBZG1pbmlzdHJhdG9yKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gYWRtaW5pc3RyYXRvcnNbX2FkZHJdOwogIH0KICAKICAvLyBNYWludGlhbiBzdGF0ZSBvZiBhZG1pbmlzdHJhdG9yIGtleSB1cGRhdGUgcHJvY2VzcwogIHN0cnVjdCBLZXlVcGRhdGV7CiAgICBhZGRyZXNzWzNdIHNpZ25lcjsKICAgIHVpbnQgY29uZmlybWF0aW9uczsKICAgIGFkZHJlc3Mgb2xkQWRkcmVzczsKICAgIGFkZHJlc3MgbmV3QWRkcmVzczsKICB9CiAgCiAgS2V5VXBkYXRlIHByaXZhdGUgdXBkYXRpbmc7CiAgCiAgLyoqCiAgICogQGRldiBUaHJlZSBhZG1uaXN0cmF0b3IgY2FuIHJlcGxhY2Uga2V5IG9mIGZvdXJ0aCBhZG1pbmlzdHJhdG9yLiAKICAgKiBAcGFyYW0gX29sZEFkZHJlc3MgQWRkcmVzcyBvZiBhZG1pbmlzcmF0b3IgbmVlZHMgdG8gYmUgcmVwbGFjZWQKICAgKiBAcGFyYW0gX25ld0FkZHJlc3MgQWRkcmVzcyBvZiBuZXcgYWRtaW5pc3RyYXRvcgogICAqLwogIGZ1bmN0aW9uIHVwZGF0ZUFkbWluaXN0cmF0b3JLZXkoYWRkcmVzcyBfb2xkQWRkcmVzcywgYWRkcmVzcyBfbmV3QWRkcmVzcykgZXh0ZXJuYWwgb25seUFkbWluIHsKICAgIAogICAgLy8gaW5wdXQgdmVyaWZpY2F0aW9ucwogICAgcmVxdWlyZShpc0FkbWluaXN0cmF0b3IoX29sZEFkZHJlc3MpKTsKICAgIHJlcXVpcmUoIF9uZXdBZGRyZXNzICE9IDB4MDAgKTsKICAgIHJlcXVpcmUoIWlzQWRtaW5pc3RyYXRvcihfbmV3QWRkcmVzcykpOwogICAgcmVxdWlyZSggbXNnLnNlbmRlciAhPSBfb2xkQWRkcmVzcyApOwogICAgCiAgICAvLyBjb3VudCBjb25maXJtYXRpb24gCiAgICB1aW50MjU2IHJlbWFpbmluZzsKICAgIAogICAgLy8gc3RhcnQgb2YgdXBkYXRpbmcgcHJvY2VzcywgZmlyc3Qgc2lnbmVyIHdpbGwgZmluYWxpemUgYWRkcmVzcyB0byBiZSByZXBsYWNlZAogICAgLy8gYW5kIG5ldyBhZGRyZXNzIHRvIGJlIHJlZ2lzdGVyZWQsIHJlbWFpbmluZyB0d28gbXVzdCBjb25maXJtCiAgICBpZiggdXBkYXRpbmcuY29uZmlybWF0aW9ucyA9PSAwKXsKICAgICAgICAKICAgICAgICB1cGRhdGluZy5zaWduZXJbdXBkYXRpbmcuY29uZmlybWF0aW9uc10gPSBtc2cuc2VuZGVyOwogICAgICAgIHVwZGF0aW5nLm9sZEFkZHJlc3MgPSBfb2xkQWRkcmVzczsKICAgICAgICB1cGRhdGluZy5uZXdBZGRyZXNzID0gX25ld0FkZHJlc3M7CiAgICAgICAgdXBkYXRpbmcuY29uZmlybWF0aW9ucyA9IHVwZGF0aW5nLmNvbmZpcm1hdGlvbnMuYWRkKDEpOwogICAgICAgIHJlbWFpbmluZyA9IHJlcXVpcmVkLnN1Yih1cGRhdGluZy5jb25maXJtYXRpb25zKTsKICAgICAgICBVcGRhdGVDb25maXJtZWQobXNnLnNlbmRlcixfbmV3QWRkcmVzcyxyZW1haW5pbmcpOwogICAgICAgIHJldHVybjsKICAgICAgICAKICAgIH0KICAgIAogICAgLy8gdmlvbGF0ZWQgY29uc2Vuc3VzCiAgICBpZih1cGRhdGluZy5vbGRBZGRyZXNzICE9IF9vbGRBZGRyZXNzKXsKICAgICAgICBWaW9sYXRlZCgiT2xkIGFkZHJlc3NlcyBkbyBub3QgbWF0Y2giLG1zZy5zZW5kZXIpOwogICAgICAgIFJlc2V0VXBkYXRlU3RhdGUoKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIGlmKHVwZGF0aW5nLm5ld0FkZHJlc3MgIT0gX25ld0FkZHJlc3MpewogICAgICAgIFZpb2xhdGVkKCJOZXcgYWRkcmVzc2VzIGRvIG5vdCBtYXRjaCIsbXNnLnNlbmRlcik7CiAgICAgICAgUmVzZXRVcGRhdGVTdGF0ZSgpOwogICAgICAgIHJldHVybjsgCiAgICB9CiAgICAKICAgIC8vIG1ha2Ugc3VyZSBhZG1pbiBpcyBub3QgdHJ5aW5nIHRvIHNwYW0KICAgIGlmKG1zZy5zZW5kZXIgPT0gdXBkYXRpbmcuc2lnbmVyWzBdKXsKICAgICAgICBWaW9sYXRlZCgiU2lnbmVyIGlzIHNwYW1taW5nIixtc2cuc2VuZGVyKTsKICAgICAgICBSZXNldFVwZGF0ZVN0YXRlKCk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgICAgIAogICAgdXBkYXRpbmcuc2lnbmVyW3VwZGF0aW5nLmNvbmZpcm1hdGlvbnNdID0gbXNnLnNlbmRlcjsKICAgIHVwZGF0aW5nLmNvbmZpcm1hdGlvbnMgPSB1cGRhdGluZy5jb25maXJtYXRpb25zLmFkZCgxKTsKICAgIHJlbWFpbmluZyA9IHJlcXVpcmVkLnN1Yih1cGRhdGluZy5jb25maXJtYXRpb25zKTsKCiAgICBpZiggcmVtYWluaW5nID09IDApewogICAgICAgIGlmKG1zZy5zZW5kZXIgPT0gdXBkYXRpbmcuc2lnbmVyWzFdKXsKICAgICAgICAgICAgVmlvbGF0ZWQoIk9uZSBvZiBzaWduZXJzIGlzIHNwYW1taW5nIixtc2cuc2VuZGVyKTsKICAgICAgICAgICAgUmVzZXRVcGRhdGVTdGF0ZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgfQoKICAgIFVwZGF0ZUNvbmZpcm1lZChtc2cuc2VuZGVyLF9uZXdBZGRyZXNzLHJlbWFpbmluZyk7CiAgICAKICAgIC8vIGlmIHRocmVlIGNvbmZpcm1hdGlvbiBhcmUgZG9uZSwgcmVnaXN0ZXIgbmV3IGFkbWluIGFuZCByZW1vdmUgb2xkIG9uZQogICAgaWYoIHVwZGF0aW5nLmNvbmZpcm1hdGlvbnMgPT0gMyApewogICAgICAgIEtleVJlcGxhY2VkKF9vbGRBZGRyZXNzLCBfbmV3QWRkcmVzcyk7CiAgICAgICAgUmVzZXRVcGRhdGVTdGF0ZSgpOwogICAgICAgIGRlbGV0ZSBhZG1pbmlzdHJhdG9yc1tfb2xkQWRkcmVzc107CiAgICAgICAgYWRtaW5pc3RyYXRvcnNbX25ld0FkZHJlc3NdID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICB9CiAgfQogIAogIGZ1bmN0aW9uIFJlc2V0VXBkYXRlU3RhdGUoKSBpbnRlcm5hbAogIHsKICAgICAgZGVsZXRlIHVwZGF0aW5nOwogICAgICBFdmVudFVwZGF0ZVdhc1Jlc2V0KCk7CiAgfQoKICAvKioKICAgKiBAZGV2IFJlc2V0IHZhbHVlcyBvZiB1cGRhdGluZyAoS2V5VXBkYXRlIG9iamVjdCkKICAgKi8KICBmdW5jdGlvbiBhYm9ydFVwZGF0ZSgpIGV4dGVybmFsIG9ubHlBZG1pbnsKICAgICAgUmVzZXRVcGRhdGVTdGF0ZSgpOwogIH0KICAKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIGFsbG93IG9ubHkgaWYgZnVuY3Rpb24gaXMgY2FsbGVkIGJ5IGFkbWluaXN0cmF0b3IKICAgKi8KICBtb2RpZmllciBvbmx5QWRtaW4oKXsKICAgICAgaWYoICFhZG1pbmlzdHJhdG9yc1ttc2cuc2VuZGVyXSApewogICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgIH0KICAgICAgXzsKICB9Cn0='.
	

]
