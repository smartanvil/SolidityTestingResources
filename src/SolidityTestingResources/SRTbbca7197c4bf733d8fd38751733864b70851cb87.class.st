Class {
	#name : #SRTbbca7197c4bf733d8fd38751733864b70851cb87,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbbca7197c4bf733d8fd38751733864b70851cb87 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKgogKiBBYnN0cmFjdCBUb2tlbiBTbWFydCBDb250cmFjdC4gIENvcHlyaWdodCAmIzE2OTsgMjAxNyBieSBDSUJVUyBXT1JMRC4KICogQXV0aG9yOiA8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjAxNjI2ZTZmNzU2MDYyNzU0MTYyNjg2Mzc0NzIyZjc2NmU3MzZkNjUiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L3NwYW4+CiAqLwoKIAogLyoKICogU2FmZSBNYXRoIFNtYXJ0IENvbnRyYWN0LiAgQ29weXJpZ2h0ICYjMTY5OyAyMDE3LTIwMTggYnkgQ0lCVVMgV09STEQuCiAqIEF1dGhvcjogPHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJiZmRjZDBkMWNiZGVkY2NiZmZkY2Q2ZGRjYWNjOTFjOGQwY2RkM2RiIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPgogKiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9tYXRoL1NhZmVNYXRoLnNvbAogKi8KCmNvbnRyYWN0IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKCgovKioKICogRVJDLTIwIHN0YW5kYXJkIHRva2VuIGludGVyZmFjZSwgYXMgZGVmaW5lZAogKiA8YSBocmVmPSJodHRwOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCI+aGVyZTwvYT4uCiAqLwpjb250cmFjdCBUb2tlbiB7CiAgCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCgoKLyoqCiAqIEFic3RyYWN0IFRva2VuIFNtYXJ0IENvbnRyYWN0IHRoYXQgY291bGQgYmUgdXNlZCBhcyBhIGJhc2UgY29udHJhY3QgZm9yCiAqIEVSQy0yMCB0b2tlbiBjb250cmFjdHMuCiAqLwpjb250cmFjdCBBYnN0cmFjdFRva2VuIGlzIFRva2VuLCBTYWZlTWF0aCB7CiAgLyoqCiAgICogQ3JlYXRlIG5ldyBBYnN0cmFjdCBUb2tlbiBjb250cmFjdC4KICAgKi8KICBmdW5jdGlvbiBBYnN0cmFjdFRva2VuICgpIHsKICAgIC8vIERvIG5vdGhpbmcKICB9CiAgCiAgLyoqCiAgICogR2V0IG51bWJlciBvZiB0b2tlbnMgY3VycmVudGx5IGJlbG9uZ2luZyB0byBnaXZlbiBvd25lci4KICAgKgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyB0byBnZXQgbnVtYmVyIG9mIHRva2VucyBjdXJyZW50bHkgYmVsb25naW5nIHRvIHRoZQogICAqICAgICAgICBvd25lciBvZgogICAqIEByZXR1cm4gbnVtYmVyIG9mIHRva2VucyBjdXJyZW50bHkgYmVsb25naW5nIHRvIHRoZSBvd25lciBvZiBnaXZlbiBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBhY2NvdW50cyBbX293bmVyXTsKICB9CgogIC8qKgogICAqIFRyYW5zZmVyIGdpdmVuIG51bWJlciBvZiB0b2tlbnMgZnJvbSBtZXNzYWdlIHNlbmRlciB0byBnaXZlbiByZWNpcGllbnQuCiAgICoKICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW5zIHRvIHRoZSBvd25lciBvZgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2ZlciB0byB0aGUgb3duZXIgb2YgZ2l2ZW4gYWRkcmVzcwogICAqIEByZXR1cm4gdHJ1ZSBpZiB0b2tlbnMgd2VyZSB0cmFuc2ZlcnJlZCBzdWNjZXNzZnVsbHksIGZhbHNlIG90aGVyd2lzZQogICAqIGFjY291bnRzIFtfdG9dICsgX3ZhbHVlID4gYWNjb3VudHMgW190b10gZm9yIG92ZXJmbG93IGNoZWNrCiAgICogd2hpY2ggaXMgYWxyZWFkeSBpbiBzYWZlTWF0aAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIGlmIChhY2NvdW50cyBbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHJldHVybiBmYWxzZTsKICAgIGlmIChfdmFsdWUgPiAwICYmIG1zZy5zZW5kZXIgIT0gX3RvKSB7CiAgICAgIGFjY291bnRzIFttc2cuc2VuZGVyXSA9IHNhZmVTdWIgKGFjY291bnRzIFttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgYWNjb3VudHMgW190b10gPSBzYWZlQWRkIChhY2NvdW50cyBbX3RvXSwgX3ZhbHVlKTsKICAgIH0KICAgIFRyYW5zZmVyIChtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIFRyYW5zZmVyIGdpdmVuIG51bWJlciBvZiB0b2tlbnMgZnJvbSBnaXZlbiBvd25lciB0byBnaXZlbiByZWNpcGllbnQuCiAgICoKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbSB0aGUgb3duZXIgb2YKICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW5zIHRvIHRoZSBvd25lciBvZgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2ZlciBmcm9tIGdpdmVuIG93bmVyIHRvIGdpdmVuCiAgICogICAgICAgIHJlY2lwaWVudAogICAqIEByZXR1cm4gdHJ1ZSBpZiB0b2tlbnMgd2VyZSB0cmFuc2ZlcnJlZCBzdWNjZXNzZnVsbHksIGZhbHNlIG90aGVyd2lzZQogICAqIGFjY291bnRzIFtfdG9dICsgX3ZhbHVlID4gYWNjb3VudHMgW190b10gZm9yIG92ZXJmbG93IGNoZWNrCiAgICogd2hpY2ggaXMgYWxyZWFkeSBpbiBzYWZlTWF0aAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpCiAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIGlmIChhbGxvd2FuY2VzIFtfZnJvbV1bbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHJldHVybiBmYWxzZTsKICAgIGlmIChhY2NvdW50cyBbX2Zyb21dIDwgX3ZhbHVlKSByZXR1cm4gZmFsc2U7IAoKICAgIGlmIChfdmFsdWUgPiAwICYmIF9mcm9tICE9IF90bykgewoJICBhbGxvd2FuY2VzIFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViIChhbGxvd2FuY2VzIFtfZnJvbV1bbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICAgIGFjY291bnRzIFtfZnJvbV0gPSBzYWZlU3ViIChhY2NvdW50cyBbX2Zyb21dLCBfdmFsdWUpOwogICAgICBhY2NvdW50cyBbX3RvXSA9IHNhZmVBZGQgKGFjY291bnRzIFtfdG9dLCBfdmFsdWUpOwogICAgfQogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQWxsb3cgZ2l2ZW4gc3BlbmRlciB0byB0cmFuc2ZlciBnaXZlbiBudW1iZXIgb2YgdG9rZW5zIGZyb20gbWVzc2FnZSBzZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgdG8gYWxsb3cgdGhlIG93bmVyIG9mIHRvIHRyYW5zZmVyIHRva2VucyBmcm9tIG1lc3NhZ2Ugc2VuZGVyCiAgICogQHBhcmFtIF92YWx1ZSBudW1iZXIgb2YgdG9rZW5zIHRvIGFsbG93IHRvIHRyYW5zZmVyCiAgICogQHJldHVybiB0cnVlIGlmIHRva2VuIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsbHkgYXBwcm92ZWQsIGZhbHNlIG90aGVyd2lzZQogICAqLwogICBmdW5jdGlvbiBhcHByb3ZlIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBhbGxvd2FuY2VzIFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbCAobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIFRlbGwgaG93IG1hbnkgdG9rZW5zIGdpdmVuIHNwZW5kZXIgaXMgY3VycmVudGx5IGFsbG93ZWQgdG8gdHJhbnNmZXIgZnJvbQogICAqIGdpdmVuIG93bmVyLgogICAqCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIHRvIGdldCBudW1iZXIgb2YgdG9rZW5zIGFsbG93ZWQgdG8gYmUgdHJhbnNmZXJyZWQKICAgKiAgICAgICAgZnJvbSB0aGUgb3duZXIgb2YKICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyB0byBnZXQgbnVtYmVyIG9mIHRva2VucyBhbGxvd2VkIHRvIGJlIHRyYW5zZmVycmVkCiAgICogICAgICAgIGJ5IHRoZSBvd25lciBvZgogICAqIEByZXR1cm4gbnVtYmVyIG9mIHRva2VucyBnaXZlbiBzcGVuZGVyIGlzIGN1cnJlbnRseSBhbGxvd2VkIHRvIHRyYW5zZmVyCiAgICogICAgICAgICBmcm9tIGdpdmVuIG93bmVyCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudAogIHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dhbmNlcyBbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBNYXBwaW5nIGZyb20gYWRkcmVzc2VzIG9mIHRva2VuIGhvbGRlcnMgdG8gdGhlIG51bWJlcnMgb2YgdG9rZW5zIGJlbG9uZ2luZwogICAqIHRvIHRoZXNlIHRva2VuIGhvbGRlcnMuCiAgICovCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBhY2NvdW50czsKCiAgLyoqCiAgICogTWFwcGluZyBmcm9tIGFkZHJlc3NlcyBvZiB0b2tlbiBob2xkZXJzIHRvIHRoZSBtYXBwaW5nIG9mIGFkZHJlc3NlcyBvZgogICAqIHNwZW5kZXJzIHRvIHRoZSBhbGxvd2FuY2VzIHNldCBieSB0aGVzZSB0b2tlbiBob2xkZXJzIHRvIHRoZXNlIHNwZW5kZXJzLgogICAqLwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHJpdmF0ZSBhbGxvd2FuY2VzOwp9CgoKLyoqCiAqIENJQlVTIHRva2VuIHNtYXJ0IGNvbnRyYWN0LgogKi8KY29udHJhY3QgQ0lCVVNUb2tlbiBpcyBBYnN0cmFjdFRva2VuIHsKICAvKioKICAgKiBNYXhpbXVtIGFsbG93ZWQgbnVtYmVyIG9mIHRva2VucyBpbiBjaXJjdWxhdGlvbi4KICAgKlRvdGFsIFN1cHBseSBmb3IgUHJlIElDTyA9ICgxMCUgb2YgMTAwMDAwMDAwID0gMTAwMDAwMDApICBhbmQgIElDTyA9ICgzMCUgb2YgMTAwMDAwMDAwID0gMzAwMDAwMDApIAogICAqIDEwXl4xMCBpcyBkb25lIGZvciBkZWNpbWFsIHBsYWNlcywgdGhpcyBpcyBzdGFuZGFyZCBwcmFjdGljZSBhcyBhbGwgZXRoZXJzIGFyZSBhY3R1YWxseSB3ZWkgaW4gRVZNCiAgICovCiAgIAogICAKICB1aW50MjU2IGNvbnN0YW50IE1BWF9UT0tFTl9DT1VOVCA9IDEwMDAwMDAwMCAqICgxMCoqMTApOwogICAKICAvKioKICAgKiBBZGRyZXNzIG9mIHRoZSBvd25lciBvZiB0aGlzIHNtYXJ0IGNvbnRyYWN0LgogICAqLwogIGFkZHJlc3MgcHJpdmF0ZSBvd25lcjsKCiAgLyoqCiAgICogQ3VycmVudCBudW1iZXIgb2YgdG9rZW5zIGluIGNpcmN1bGF0aW9uLgogICAqLwogIHVpbnQyNTYgdG9rZW5Db3VudCA9IDA7CiAgCiAKICAvKioKICAgKiBUcnVlIGlmIHRva2VucyB0cmFuc2ZlcnMgYXJlIGN1cnJlbnRseSBmcm96ZW4sIGZhbHNlIG90aGVyd2lzZS4KICAgKi8KICBib29sIGZyb3plbiA9IGZhbHNlOwogIAogIC8qKgogICAqIENvdW50ZXIgb2YgdG90YWwgZnVuZHMgY29sbGVjdGVkLCBpbiB3ZWkKICAqLwogIHVpbnQgcHVibGljIHRvdGFsQ29sbGVjdGVkID0gMDsKCiAgLyoqCiAgICogQ3JlYXRlIG5ldyBDSUJVUyB0b2tlbiBzbWFydCBjb250cmFjdCBhbmQgbWFrZSBtc2cuc2VuZGVyIHRoZQogICAqIG93bmVyIG9mIHRoaXMgc21hcnQgY29udHJhY3QuCiAgICovCiAgZnVuY3Rpb24gQ0lCVVNUb2tlbiAoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBHZXQgdG90YWwgbnVtYmVyIG9mIHRva2VucyBpbiBjaXJjdWxhdGlvbi4KICAgKgogICAqIEByZXR1cm4gdG90YWwgbnVtYmVyIG9mIHRva2VucyBpbiBjaXJjdWxhdGlvbgogICAqLwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpIHsKICAgIHJldHVybiB0b2tlbkNvdW50OwogIH0KCiAgc3RyaW5nIGNvbnN0YW50IHB1YmxpYyBuYW1lID0gIkNJQlVTIFRva2VuIjsKICBzdHJpbmcgY29uc3RhbnQgcHVibGljIHN5bWJvbCA9ICJDQlQiOwogIHVpbnQ4IGNvbnN0YW50IHB1YmxpYyBkZWNpbWFscyA9IDEwOwogIAogIC8qKgogICAqIFRyYW5zZmVyIGdpdmVuIG51bWJlciBvZiB0b2tlbnMgZnJvbSBtZXNzYWdlIHNlbmRlciB0byBnaXZlbiByZWNpcGllbnQuCiAgICoKICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW5zIHRvIHRoZSBvd25lciBvZgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2ZlciB0byB0aGUgb3duZXIgb2YgZ2l2ZW4gYWRkcmVzcwogICAqIEByZXR1cm4gdHJ1ZSBpZiB0b2tlbnMgd2VyZSB0cmFuc2ZlcnJlZCBzdWNjZXNzZnVsbHksIGZhbHNlIG90aGVyd2lzZQogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoZnJvemVuKSByZXR1cm4gZmFsc2U7CiAgICBlbHNlIHJldHVybiBBYnN0cmFjdFRva2VuLnRyYW5zZmVyIChfdG8sIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBUcmFuc2ZlciBnaXZlbiBudW1iZXIgb2YgdG9rZW5zIGZyb20gZ2l2ZW4gb3duZXIgdG8gZ2l2ZW4gcmVjaXBpZW50LgogICAqCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gdGhlIG93bmVyIG9mCiAgICogQHBhcmFtIF90byBhZGRyZXNzIHRvIHRyYW5zZmVyIHRva2VucyB0byB0aGUgb3duZXIgb2YKICAgKiBAcGFyYW0gX3ZhbHVlIG51bWJlciBvZiB0b2tlbnMgdG8gdHJhbnNmZXIgZnJvbSBnaXZlbiBvd25lciB0byBnaXZlbgogICAqICAgICAgICByZWNpcGllbnQKICAgKiBAcmV0dXJuIHRydWUgaWYgdG9rZW5zIHdlcmUgdHJhbnNmZXJyZWQgc3VjY2Vzc2Z1bGx5LCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoZnJvemVuKSByZXR1cm4gZmFsc2U7CiAgICBlbHNlIHJldHVybiBBYnN0cmFjdFRva2VuLnRyYW5zZmVyRnJvbSAoX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9CgogICAvKioKICAgKiBDaGFuZ2UgaG93IG1hbnkgdG9rZW5zIGdpdmVuIHNwZW5kZXIgaXMgYWxsb3dlZCB0byB0cmFuc2ZlciBmcm9tIG1lc3NhZ2UKICAgKiBzcGVuZGVyLiAgSW4gb3JkZXIgdG8gcHJldmVudCBkb3VibGUgc3BlbmRpbmcgb2YgYWxsb3dhbmNlLAogICAqIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICogYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAqIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyB0byBhbGxvdyB0aGUgb3duZXIgb2YgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20KICAgKiAgICAgICAgbWVzc2FnZSBzZW5kZXIKICAgKiBAcGFyYW0gX3ZhbHVlIG51bWJlciBvZiB0b2tlbnMgdG8gYWxsb3cgdG8gdHJhbnNmZXIKICAgKiBAcmV0dXJuIHRydWUgaWYgdG9rZW4gdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWxseSBhcHByb3ZlZCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZSAoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCXJlcXVpcmUoYWxsb3dhbmNlIChtc2cuc2VuZGVyLCBfc3BlbmRlcikgPT0gMCB8fCBfdmFsdWUgPT0gMCk7CiAgICByZXR1cm4gQWJzdHJhY3RUb2tlbi5hcHByb3ZlIChfc3BlbmRlciwgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIENyZWF0ZSBfdmFsdWUgbmV3IHRva2VucyBhbmQgZ2l2ZSBuZXcgY3JlYXRlZCB0b2tlbnMgdG8gbXNnLnNlbmRlci4KICAgKiBNYXkgb25seSBiZSBjYWxsZWQgYnkgc21hcnQgY29udHJhY3Qgb3duZXIuCiAgICoKICAgKiBAcGFyYW0gX3ZhbHVlIG51bWJlciBvZiB0b2tlbnMgdG8gY3JlYXRlCiAgICogQHBhcmFtIF9jb2xsZWN0ZWQgdG90YWwgYW1vdW50cyBvZiBmdW5kIGNvbGxlY3RlZCBmb3IgdGhpcyBpc3N1YW5jZSwgaW4gd2VpCiAgICogQHJldHVybiB0cnVlIGlmIHRva2VucyB3ZXJlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBmdW5jdGlvbiBjcmVhdGVUb2tlbnModWludDI1NiBfdmFsdWUsIHVpbnQgX2NvbGxlY3RlZCkKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmVxdWlyZSAobXNnLnNlbmRlciA9PSBvd25lcik7CgogICAgaWYgKF92YWx1ZSA+IDApIHsKICAgICAgaWYgKF92YWx1ZSA+IHNhZmVTdWIgKE1BWF9UT0tFTl9DT1VOVCwgdG9rZW5Db3VudCkpIHJldHVybiBmYWxzZTsKCSAgCiAgICAgIGFjY291bnRzIFttc2cuc2VuZGVyXSA9IHNhZmVBZGQgKGFjY291bnRzIFttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgdG9rZW5Db3VudCA9IHNhZmVBZGQgKHRva2VuQ291bnQsIF92YWx1ZSk7CiAgICAgIHRvdGFsQ29sbGVjdGVkID0gc2FmZUFkZCh0b3RhbENvbGxlY3RlZCwgX2NvbGxlY3RlZCk7CgkgIAoJICAvLyBhZGRpbmcgdHJhbnNmZXIgZXZlbnQgYW5kIF9mcm9tIGFkZHJlc3MgYXMgbnVsbCBhZGRyZXNzCgkgIFRyYW5zZmVyKDB4MCwgbXNnLnNlbmRlciwgX3ZhbHVlKTsKCSAgCgkgIHJldHVybiB0cnVlOwogICAgfQoJCgkgIHJldHVybiBmYWxzZTsKICAgIAogIH0KICAKICAKICAvKioKICAgKiBGb3IgZnV0dXJlIHVzZSBvbmx5IHdobmUgd2Ugd2lsbCBuZWVkIG1vcmUgdG9rZW5zIGZvciBvdXIgbWFpbiBhcHBsaWNhdGlvbgogICAqIENyZWF0ZSBtaW50ZWRBbW91bnQgbmV3IHRva2VucyBhbmQgZ2l2ZSBuZXcgY3JlYXRlZCB0b2tlbnMgdG8gdGFyZ2V0LgogICAqIE1heSBvbmx5IGJlIGNhbGxlZCBieSBzbWFydCBjb250cmFjdCBvd25lci4KICAgKiBAcGFyYW0gbWludGVkQW1vdW50IG51bWJlciBvZiB0b2tlbnMgdG8gY3JlYXRlCiAgICogQHJldHVybiB0cnVlIGlmIHRva2VucyB3ZXJlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICAKICBmdW5jdGlvbiBtaW50VG9rZW4oYWRkcmVzcyB0YXJnZXQsIHVpbnQyNTYgbWludGVkQW1vdW50KSAKICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICBpZiAobWludGVkQW1vdW50ID4gMCkgewoJICAKICAgICAgYWNjb3VudHMgW3RhcmdldF0gPSBzYWZlQWRkIChhY2NvdW50cyBbdGFyZ2V0XSwgbWludGVkQW1vdW50KTsKICAgICAgdG9rZW5Db3VudCA9IHNhZmVBZGQgKHRva2VuQ291bnQsIG1pbnRlZEFtb3VudCk7CgkgIAoJICAvLyBhZGRpbmcgdHJhbnNmZXIgZXZlbnQgYW5kIF9mcm9tIGFkZHJlc3MgYXMgbnVsbCBhZGRyZXNzCgkgIFRyYW5zZmVyKDB4MCwgdGFyZ2V0LCBtaW50ZWRBbW91bnQpOwoJICAKCSAgIHJldHVybiB0cnVlOwogICAgfQoJICByZXR1cm4gZmFsc2U7CiAgIAogICAgfQoKICAvKioKICAgKiBTZXQgbmV3IG93bmVyIGZvciB0aGUgc21hcnQgY29udHJhY3QuCiAgICogTWF5IG9ubHkgYmUgY2FsbGVkIGJ5IHNtYXJ0IGNvbnRyYWN0IG93bmVyLgogICAqCiAgICogQHBhcmFtIF9uZXdPd25lciBhZGRyZXNzIG9mIG5ldyBvd25lciBvZiB0aGUgc21hcnQgY29udHJhY3QKICAgKi8KICBmdW5jdGlvbiBzZXRPd25lcihhZGRyZXNzIF9uZXdPd25lcikgewogICAgcmVxdWlyZSAobXNnLnNlbmRlciA9PSBvd25lcik7CgogICAgb3duZXIgPSBfbmV3T3duZXI7CiAgfQoKICAvKioKICAgKiBGcmVlemUgdG9rZW4gdHJhbnNmZXJzLgogICAqIE1heSBvbmx5IGJlIGNhbGxlZCBieSBzbWFydCBjb250cmFjdCBvd25lci4KICAgKi8KICBmdW5jdGlvbiBmcmVlemVUcmFuc2ZlcnMgKCkgewogICAgcmVxdWlyZSAobXNnLnNlbmRlciA9PSBvd25lcik7CgogICAgaWYgKCFmcm96ZW4pIHsKICAgICAgZnJvemVuID0gdHJ1ZTsKICAgICAgRnJlZXplICgpOwogICAgfQogIH0KCiAgLyoqCiAgICogVW5mcmVlemUgdG9rZW4gdHJhbnNmZXJzLgogICAqIE1heSBvbmx5IGJlIGNhbGxlZCBieSBzbWFydCBjb250cmFjdCBvd25lci4KICAgKi8KICBmdW5jdGlvbiB1bmZyZWV6ZVRyYW5zZmVycyAoKSB7CiAgICByZXF1aXJlIChtc2cuc2VuZGVyID09IG93bmVyKTsKCiAgICBpZiAoZnJvemVuKSB7CiAgICAgIGZyb3plbiA9IGZhbHNlOwogICAgICBVbmZyZWV6ZSAoKTsKICAgIH0KICB9CiAgCiAgLypBIHVzZXIgaXMgYWJsZSB0byB1bmludGVudGlvbmFsbHkgc2VuZCB0b2tlbnMgdG8gYSBjb250cmFjdCAKICAqIGFuZCBpZiB0aGUgY29udHJhY3QgaXMgbm90IHByZXBhcmVkIHRvIHJlZnVuZCB0aGVtIHRoZXkgd2lsbCBnZXQgc3R1Y2sgaW4gdGhlIGNvbnRyYWN0LiAKICAqIFRoZSBzYW1lIGlzc3VlIHVzZWQgdG8gaGFwcGVuIGZvciBFdGhlciB0b28gYnV0IG5ldyBTb2xpZGl0eSB2ZXJzaW9ucyBhZGRlZCB0aGUgcGF5YWJsZSBtb2RpZmllciB0bwogICogcHJldmVudCB1bmludGVuZGVkIEV0aGVyIHRyYW5zZmVycy4gSG93ZXZlciwgdGhlcmXigJlzIG5vIHN1Y2ggbWVjaGFuaXNtIGZvciB0b2tlbiB0cmFuc2ZlcnMuCiAgKiBzbyB0aGUgYmVsb3cgZnVuY3Rpb24gaXMgY3JlYXRlZAogICovCiAgCiAgZnVuY3Rpb24gcmVmdW5kVG9rZW5zKGFkZHJlc3MgX3Rva2VuLCBhZGRyZXNzIF9yZWZ1bmQsIHVpbnQyNTYgX3ZhbHVlKSB7CiAgICByZXF1aXJlIChtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIHJlcXVpcmUoX3Rva2VuICE9IGFkZHJlc3ModGhpcykpOwogICAgQWJzdHJhY3RUb2tlbiB0b2tlbiA9IEFic3RyYWN0VG9rZW4oX3Rva2VuKTsKICAgIHRva2VuLnRyYW5zZmVyKF9yZWZ1bmQsIF92YWx1ZSk7CiAgICBSZWZ1bmRUb2tlbnMoX3Rva2VuLCBfcmVmdW5kLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgICogTG9nZ2VkIHdoZW4gdG9rZW4gdHJhbnNmZXJzIHdlcmUgZnJvemVuLgogICAqLwogIGV2ZW50IEZyZWV6ZSAoKTsKCiAgLyoqCiAgICogTG9nZ2VkIHdoZW4gdG9rZW4gdHJhbnNmZXJzIHdlcmUgdW5mcm96ZW4uCiAgICovCiAgZXZlbnQgVW5mcmVlemUgKCk7CiAgCiAgLyoqCiAgICogd2hlbiBhY2NpZGVudGFsbHkgc2VuZCBvdGhlciB0b2tlbnMgYXJlIHJlZnVuZGVkCiAgICovCiAgCiAgZXZlbnQgUmVmdW5kVG9rZW5zKGFkZHJlc3MgX3Rva2VuLCBhZGRyZXNzIF9yZWZ1bmQsIHVpbnQyNTYgX3ZhbHVlKTsKfQ=='.
	

]
