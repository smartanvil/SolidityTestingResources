Class {
	#name : #SRTa12667757d73866417364680efbfd69c70cf767d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa12667757d73866417364680efbfd69c70cf767d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIG5vdCBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCgpIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgd2hlblBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgfQp9CgoKY29udHJhY3QgSW52ZXN0b3JzTGlzdCBpcyBPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAgIC8qIEludmVzdG9yICovCgogICAgZW51bSBXaGl0ZUxpc3RTdGF0dXMgIHtVc3VhbCwgV2hpdGVMaXN0LCBQcmVXaGl0ZUxpc3R9CgogICAgc3RydWN0IEludmVzdG9yIHsKICAgICAgICBieXRlczMyIGlkOwogICAgICAgIHVpbnQgdG9rZW5zQ291bnQ7CiAgICAgICAgYWRkcmVzcyB3YWxsZXRGb3JUb2tlbnM7CiAgICAgICAgV2hpdGVMaXN0U3RhdHVzIHdoaXRlTGlzdFN0YXR1czsKICAgICAgICBib29sIGlzVmVyaWZpZWQ7CiAgICB9CgogICAgLypJbnZlc3RvcidzIGVuZCovCgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBtYW5pcHVsYXRvcnM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJ5dGVzMzIpIHB1YmxpYyBuYXRpdmVJbnZlc3RvcnNJZHM7CiAgICBtYXBwaW5nIChieXRlczMyID0+IEludmVzdG9yKSBwdWJsaWMgaW52ZXN0b3JzTGlzdDsKCiAgICAvKk1hbmlwdWxhdG9ycyovCgogICAgbW9kaWZpZXIgYWxsb3dlZFRvTWFuaXB1bGF0ZSgpewogICAgICAgIHJlcXVpcmUobWFuaXB1bGF0b3JzW21zZy5zZW5kZXJdIHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlTWFuaXB1bGF0b3JBZGRyZXNzKGFkZHJlc3Mgc2FsZUFkZHJlc3MsIGJvb2wgaXNBbGxvd2VkVG9NYW5pcHVsYXRlKSBleHRlcm5hbCBvbmx5T3duZXJ7CiAgICAgICAgcmVxdWlyZShzYWxlQWRkcmVzcyAhPSAweDApOwogICAgICAgIG1hbmlwdWxhdG9yc1tzYWxlQWRkcmVzc10gPSBpc0FsbG93ZWRUb01hbmlwdWxhdGU7CiAgICB9CgogICAgLypNYW5pcHVsYXRvcnMnIGVuZCovCgogICAgZnVuY3Rpb24gc2V0SW52ZXN0b3JJZChhZGRyZXNzIGludmVzdG9yQWRkcmVzcywgYnl0ZXMzMiBpZCkgZXh0ZXJuYWwgb25seU93bmVyewogICAgICAgIHJlcXVpcmUoaW52ZXN0b3JBZGRyZXNzICE9IDB4MCAmJiBpZCAhPSAwKTsKICAgICAgICBuYXRpdmVJbnZlc3RvcnNJZHNbaW52ZXN0b3JBZGRyZXNzXSA9IGlkOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZEludmVzdG9yKAogICAgICAgIGJ5dGVzMzIgaWQsCiAgICAgICAgV2hpdGVMaXN0U3RhdHVzIHN0YXR1cywKICAgICAgICBib29sIGlzVmVyaWZpZWQKICAgICkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGlkICE9IDApOwogICAgICAgIHJlcXVpcmUoaW52ZXN0b3JzTGlzdFtpZF0uaWQgPT0gMCk7CgogICAgICAgIGludmVzdG9yc0xpc3RbaWRdLmlkID0gaWQ7CiAgICAgICAgaW52ZXN0b3JzTGlzdFtpZF0udG9rZW5zQ291bnQgPSAwOwogICAgICAgIGludmVzdG9yc0xpc3RbaWRdLndoaXRlTGlzdFN0YXR1cyA9IHN0YXR1czsKICAgICAgICBpbnZlc3RvcnNMaXN0W2lkXS5pc1ZlcmlmaWVkID0gaXNWZXJpZmllZDsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVJbnZlc3RvcihieXRlczMyIGlkKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoaWQgIT0gMCAmJiBpbnZlc3RvcnNMaXN0W2lkXS5pZCAhPSAwKTsKICAgICAgICBpbnZlc3RvcnNMaXN0W2lkXS5pZCA9IDA7CiAgICB9CgogICAgZnVuY3Rpb24gaXNBbGxvd2VkVG9CdXlCeUFkZHJlc3MoYWRkcmVzcyBpbnZlc3RvcikgZXh0ZXJuYWwgdmlldyByZXR1cm5zKGJvb2wpewogICAgICAgIHJlcXVpcmUoaW52ZXN0b3IgIT0gMHgwKTsKICAgICAgICBieXRlczMyIGlkID0gbmF0aXZlSW52ZXN0b3JzSWRzW2ludmVzdG9yXTsKICAgICAgICByZXF1aXJlKGlkICE9IDAgJiYgaW52ZXN0b3JzTGlzdFtpZF0uaWQgIT0gMCk7CiAgICAgICAgcmV0dXJuIGludmVzdG9yc0xpc3RbaWRdLmlzVmVyaWZpZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gaXNBbGxvd2VkVG9CdXlCeUFkZHJlc3NXaXRob3V0VmVyaWZpY2F0aW9uKGFkZHJlc3MgaW52ZXN0b3IpIGV4dGVybmFsIHZpZXcgcmV0dXJucyhib29sKXsKICAgICAgICByZXF1aXJlKGludmVzdG9yICE9IDB4MCk7CiAgICAgICAgYnl0ZXMzMiBpZCA9IG5hdGl2ZUludmVzdG9yc0lkc1tpbnZlc3Rvcl07CiAgICAgICAgcmVxdWlyZShpZCAhPSAwICYmIGludmVzdG9yc0xpc3RbaWRdLmlkICE9IDApOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzQWxsb3dlZFRvQnV5KGJ5dGVzMzIgaWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyhib29sKXsKICAgICAgICByZXF1aXJlKGlkICE9IDAgJiYgaW52ZXN0b3JzTGlzdFtpZF0uaWQgIT0gMCk7CiAgICAgICAgcmV0dXJuIGludmVzdG9yc0xpc3RbaWRdLmlzVmVyaWZpZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gaXNQcmVXaGl0ZUxpc3RlZChieXRlczMyIGlkKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKGJvb2wpewogICAgICAgIHJlcXVpcmUoaWQgIT0gMCAmJiBpbnZlc3RvcnNMaXN0W2lkXS5pZCAhPSAwKTsKICAgICAgICByZXR1cm4gaW52ZXN0b3JzTGlzdFtpZF0ud2hpdGVMaXN0U3RhdHVzID09IFdoaXRlTGlzdFN0YXR1cy5QcmVXaGl0ZUxpc3Q7CiAgICB9CgogICAgZnVuY3Rpb24gaXNXaGl0ZUxpc3RlZChieXRlczMyIGlkKSBleHRlcm5hbCB2aWV3IHJldHVybnMoYm9vbCl7CiAgICAgICAgcmVxdWlyZShpZCAhPSAwICYmIGludmVzdG9yc0xpc3RbaWRdLmlkICE9IDApOwogICAgICAgIHJldHVybiBpbnZlc3RvcnNMaXN0W2lkXS53aGl0ZUxpc3RTdGF0dXMgPT0gV2hpdGVMaXN0U3RhdHVzLldoaXRlTGlzdDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRWZXJpZmljYXRpb25TdGF0dXMoYnl0ZXMzMiBpZCwgYm9vbCBzdGF0dXMpIGV4dGVybmFsIG9ubHlPd25lcnsKICAgICAgICByZXF1aXJlKGlkICE9IDAgJiYgaW52ZXN0b3JzTGlzdFtpZF0uaWQgIT0gMCk7CiAgICAgICAgaW52ZXN0b3JzTGlzdFtpZF0uaXNWZXJpZmllZCA9IHN0YXR1czsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRXaGl0ZUxpc3RTdGF0dXMoYnl0ZXMzMiBpZCwgV2hpdGVMaXN0U3RhdHVzIHN0YXR1cykgZXh0ZXJuYWwgb25seU93bmVyewogICAgICAgIHJlcXVpcmUoaWQgIT0gMCAmJiBpbnZlc3RvcnNMaXN0W2lkXS5pZCAhPSAwKTsKICAgICAgICBpbnZlc3RvcnNMaXN0W2lkXS53aGl0ZUxpc3RTdGF0dXMgPSBzdGF0dXM7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkVG9rZW5zKGJ5dGVzMzIgaWQsIHVpbnQgdG9rZW5zKSBleHRlcm5hbCBhbGxvd2VkVG9NYW5pcHVsYXRlewogICAgICAgIHJlcXVpcmUoaWQgIT0gMCAmJiBpbnZlc3RvcnNMaXN0W2lkXS5pZCAhPSAwKTsKICAgICAgICBpbnZlc3RvcnNMaXN0W2lkXS50b2tlbnNDb3VudCA9IGludmVzdG9yc0xpc3RbaWRdLnRva2Vuc0NvdW50LmFkZCh0b2tlbnMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1YlRva2VucyhieXRlczMyIGlkLCB1aW50IHRva2VucykgZXh0ZXJuYWwgYWxsb3dlZFRvTWFuaXB1bGF0ZXsKICAgICAgICByZXF1aXJlKGlkICE9IDAgJiYgaW52ZXN0b3JzTGlzdFtpZF0uaWQgIT0gMCk7CiAgICAgICAgaW52ZXN0b3JzTGlzdFtpZF0udG9rZW5zQ291bnQgPSBpbnZlc3RvcnNMaXN0W2lkXS50b2tlbnNDb3VudC5zdWIodG9rZW5zKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRXYWxsZXRGb3JUb2tlbnMoYnl0ZXMzMiBpZCwgYWRkcmVzcyB3YWxsZXQpIGV4dGVybmFsIG9ubHlPd25lcnsKICAgICAgICByZXF1aXJlKGlkICE9IDAgJiYgaW52ZXN0b3JzTGlzdFtpZF0uaWQgIT0gMCk7CiAgICAgICAgaW52ZXN0b3JzTGlzdFtpZF0ud2FsbGV0Rm9yVG9rZW5zID0gd2FsbGV0OwogICAgfQp9Cgpjb250cmFjdCBCb251bVByZVNhbGUgaXMgUGF1c2FibGV7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiQm9udW0gUHJlU2FsZSI7CgogICAgdWludCBwdWJsaWMgc3RhcnREYXRlOwogICAgdWludCBwdWJsaWMgZW5kRGF0ZTsKICAgIHVpbnQgcHVibGljIHdoaXRlTGlzdFByZVNhbGVEdXJhdGlvbiA9IDEgZGF5czsKCiAgICBmdW5jdGlvbiBzZXRXaGl0ZUxpc3REdXJhdGlvbih1aW50IGR1cmF0aW9uKSBleHRlcm5hbCBvbmx5T3duZXJ7CiAgICAgICAgcmVxdWlyZShkdXJhdGlvbiA+IDApOwogICAgICAgIHdoaXRlTGlzdFByZVNhbGVEdXJhdGlvbiA9IGR1cmF0aW9uICogMSBkYXlzOwogICAgfQoKICAgIHVpbnQgcHVibGljIGZpYXRWYWx1ZU11bHRpcGxpZXIgPSAxMCoqNjsKICAgIHVpbnQgcHVibGljIHRva2VuRGVjaW1hbHMgPSAxMCoqMTg7CgogICAgSW52ZXN0b3JzTGlzdCBwdWJsaWMgaW52ZXN0b3JzOwoKICAgIGFkZHJlc3MgYmVuZWZpY2lhcnk7CgogICAgdWludCBwdWJsaWMgZXRoVXNkUmF0ZTsKICAgIHVpbnQgcHVibGljIGNvbGxlY3RlZCA9IDA7CiAgICB1aW50IHB1YmxpYyB0b2tlbnNTb2xkID0gMDsKICAgIHVpbnQgcHVibGljIHRva2Vuc1NvbGRXaXRoQm9udXMgPSAwOwoKICAgIHVpbnRbXSBmaXJzdENvbHVtbjsKICAgIHVpbnRbXSBzZWNvbmRDb2x1bW47CgogICAgZXZlbnQgTmV3Q29udHJpYnV0aW9uKGFkZHJlc3MgaW5kZXhlZCBob2xkZXIsIHVpbnQgdG9rZW5BbW91bnQsIHVpbnQgZXRoZXJBbW91bnQpOwoKICAgIGZ1bmN0aW9uIEJvbnVtUHJlU2FsZSgKICAgICAgICB1aW50IF9zdGFydERhdGUsCiAgICAgICAgdWludCBfZW5kRGF0ZSwKICAgICAgICBhZGRyZXNzIF9pbnZlc3RvcnMsCiAgICAgICAgYWRkcmVzcyBfYmVuZWZpY2lhcnksCiAgICAgICAgdWludCBfYmFzZUV0aFVzZFJhdGUKICAgICkgcHVibGljIHsKICAgICAgICBzdGFydERhdGUgPSBfc3RhcnREYXRlOwogICAgICAgIGVuZERhdGUgPSBfZW5kRGF0ZTsKCiAgICAgICAgaW52ZXN0b3JzID0gSW52ZXN0b3JzTGlzdChfaW52ZXN0b3JzKTsKICAgICAgICBiZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKCiAgICAgICAgZXRoVXNkUmF0ZSA9IF9iYXNlRXRoVXNkUmF0ZTsKCiAgICAgICAgaW5pdEJvbnVzU3lzdGVtKCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGluaXRCb251c1N5c3RlbSgpIHByaXZhdGV7CiAgICAgICAgZmlyc3RDb2x1bW4ucHVzaCgxNzUwMDAwKTsKICAgICAgICBmaXJzdENvbHVtbi5wdXNoKDEwMzYwMDAwKTsKICAgICAgICBmaXJzdENvbHVtbi5wdXNoKDE4OTgwMDAwKTsKICAgICAgICBmaXJzdENvbHVtbi5wdXNoKDI1MDAwMDAwKTsKCiAgICAgICAgc2Vjb25kQ29sdW1uLnB1c2goMTU2MDAwMCk7CiAgICAgICAgc2Vjb25kQ29sdW1uLnB1c2goOTIyMDAwMCk7CiAgICAgICAgc2Vjb25kQ29sdW1uLnB1c2goMTY4ODAwMDApOwogICAgICAgIHNlY29uZENvbHVtbi5wdXNoKDIyMjMwMDAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXROZXdCZW5lZmljaWFyeShhZGRyZXNzIG5ld0JlbmVmaWNpYXJ5KSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobmV3QmVuZWZpY2lhcnkgIT0gMHgwKTsKICAgICAgICBiZW5lZmljaWFyeSA9IG5ld0JlbmVmaWNpYXJ5OwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEV0aFVzZFJhdGUodWludCByYXRlKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUocmF0ZSA+IDApOwogICAgICAgIGV0aFVzZFJhdGUgPSByYXRlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldE5ld1N0YXJ0RGF0ZSh1aW50IG5ld1N0YXJ0RGF0ZSkgZXh0ZXJuYWwgb25seU93bmVyewogICAgICAgIHJlcXVpcmUobmV3U3RhcnREYXRlID4gMCk7CiAgICAgICAgc3RhcnREYXRlID0gbmV3U3RhcnREYXRlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldE5ld0VuZERhdGUodWludCBuZXdFbmREYXRlKSBleHRlcm5hbCBvbmx5T3duZXJ7CiAgICAgICAgcmVxdWlyZShuZXdFbmREYXRlID4gMCk7CiAgICAgICAgZW5kRGF0ZSA9IG5ld0VuZERhdGU7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TmV3SW52ZXN0b3JzTGlzdChhZGRyZXNzIGludmVzdG9yc0xpc3QpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShpbnZlc3RvcnNMaXN0ICE9IDB4MCk7CiAgICAgICAgaW52ZXN0b3JzID0gSW52ZXN0b3JzTGlzdChpbnZlc3RvcnNMaXN0KTsKICAgIH0KCiAgICBtb2RpZmllciBhY3RpdmVQcmVTYWxlKCl7CiAgICAgICAgcmVxdWlyZShub3cgPj0gc3RhcnREYXRlICYmIG5vdyA8IGVuZERhdGUpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgdW5kZXJDYXAoKXsKICAgICAgICByZXF1aXJlKHRva2Vuc1NvbGQgPCB1aW50KDc1MDAwMCkubXVsKHRva2VuRGVjaW1hbHMpKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGlzQWxsb3dlZFRvQnV5KCl7CiAgICAgICAgcmVxdWlyZShpbnZlc3RvcnMuaXNBbGxvd2VkVG9CdXlCeUFkZHJlc3NXaXRob3V0VmVyaWZpY2F0aW9uKG1zZy5zZW5kZXIpKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG1pbmltdW1BbW91bnQoKXsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZS5tdWwoZXRoVXNkUmF0ZSkuZGl2KGZpYXRWYWx1ZU11bHRpcGxpZXIubXVsKDEgZXRoZXIpKSA+PSAxMDApOwogICAgICAgIF87CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgbmF0aXZlSW52ZXN0b3JzOwoKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSBwdWJsaWMgd2hlbk5vdFBhdXNlZCBhY3RpdmVQcmVTYWxlIG1pbmltdW1BbW91bnQgdW5kZXJDYXB7CiAgICAgICAgdWludCB0b2tlbnMgPSBtc2cudmFsdWUubXVsKGV0aFVzZFJhdGUpLmRpdihmaWF0VmFsdWVNdWx0aXBsaWVyKTsKICAgICAgICB0b2tlbnNTb2xkID0gdG9rZW5zU29sZC5hZGQodG9rZW5zKTsKICAgICAgICAKICAgICAgICB0b2tlbnMgPSB0b2tlbnMuYWRkKGNhbGN1bGF0ZUJvbnVzKHRva2VucykpOwogICAgICAgIG5hdGl2ZUludmVzdG9yc1ttc2cuc2VuZGVyXSA9IHRva2VuczsKICAgICAgICB0b2tlbnNTb2xkV2l0aEJvbnVzID0gIHRva2Vuc1NvbGRXaXRoQm9udXMuYWRkKHRva2Vucyk7CiAgICAgICAgCiAgICAgICAgbmF0aXZlSW52ZXN0b3JzW21zZy5zZW5kZXJdID0gdG9rZW5zOwogICAgICAgIE5ld0NvbnRyaWJ1dGlvbihtc2cuc2VuZGVyLCB0b2tlbnMsIG1zZy52YWx1ZSk7CgogICAgICAgIGNvbGxlY3RlZCA9IGNvbGxlY3RlZC5hZGQobXNnLnZhbHVlKTsKCiAgICAgICAgYmVuZWZpY2lhcnkudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH0KCgogICAgLy91c2QgKiAxMF42CiAgICBmdW5jdGlvbiBvdGhlckNvaW5zUHVyY2hhc2UoYnl0ZXMzMiBpZCwgdWludCBhbW91bnRJblVzZCkgZXh0ZXJuYWwgd2hlbk5vdFBhdXNlZCB1bmRlckNhcCBhY3RpdmVQcmVTYWxlIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShpZC5sZW5ndGggPiAwICYmIGFtb3VudEluVXNkID49ICh1aW50KDEwMCkubXVsKGZpYXRWYWx1ZU11bHRpcGxpZXIpKSAmJiBpbnZlc3RvcnMuaXNBbGxvd2VkVG9CdXkoaWQpKTsKCiAgICAgICAgdWludCB0b2tlbnMgPSBhbW91bnRJblVzZC5tdWwodG9rZW5EZWNpbWFscykuZGl2KGZpYXRWYWx1ZU11bHRpcGxpZXIpOwoKICAgICAgICB0b2tlbnNTb2xkID0gdG9rZW5zU29sZC5hZGQodG9rZW5zKTsKICAgICAgICB0b2tlbnMgPSB0b2tlbnMuYWRkKGNhbGN1bGF0ZUJvbnVzKHRva2VucykpOwogICAgICAgIHRva2Vuc1NvbGRXaXRoQm9udXMgPSAgdG9rZW5zU29sZFdpdGhCb251cy5hZGQodG9rZW5zKTsKCiAgICAgICAgaW52ZXN0b3JzLmFkZFRva2VucyhpZCwgdG9rZW5zKTsKICAgIH0KCgogICAgZnVuY3Rpb24gY2FsY3VsYXRlQm9udXModWludCB0b2tlbnNDb3VudCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpewogICAgICAgIC8vKzEgYmVjYXVzZSBuZWVkcyB3aG9sZSBkYXlzCiAgICAgICAgdWludCBkYXkgPSAoKG5vdy5zdWIoc3RhcnREYXRlLmFkZCh3aGl0ZUxpc3RQcmVTYWxlRHVyYXRpb24pKSkuZGl2KDEgZGF5cykpLmFkZCgxKTsKICAgICAgICB1aW50IEIxOwogICAgICAgIHVpbnQgQjI7CgogICAgICAgIGlmICh0b2tlbnNDb3VudCA8IHVpbnQoMTAwMCkubXVsKHRva2VuRGVjaW1hbHMpKSB7CiAgICAgICAgICAgIEIxID0gKCgodG9rZW5zQ291bnQgLSAxMDAgKiB0b2tlbkRlY2ltYWxzKSAqIChmaXJzdENvbHVtblsxXSAtIGZpcnN0Q29sdW1uWzBdKSkgLyAgKCgxMDAwLTEwMCkgKiB0b2tlbkRlY2ltYWxzKSkgKyBmaXJzdENvbHVtblswXTsKICAgICAgICAgICAgQjIgPSAoKCh0b2tlbnNDb3VudCAtIDEwMCAqIHRva2VuRGVjaW1hbHMpICogKHNlY29uZENvbHVtblsxXSAtIHNlY29uZENvbHVtblswXSkpIC8gICgoMTAwMC0xMDApICogdG9rZW5EZWNpbWFscykpICsgc2Vjb25kQ29sdW1uWzBdOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRva2Vuc0NvdW50ID49IHVpbnQoMTAwMCkubXVsKHRva2VuRGVjaW1hbHMpICYmIHRva2Vuc0NvdW50IDwgdWludCgxMDAwMCkubXVsKHRva2VuRGVjaW1hbHMpKSB7CiAgICAgICAgICAgIEIxID0gKCgodG9rZW5zQ291bnQgLSAxMDAwICogdG9rZW5EZWNpbWFscykgKiAoZmlyc3RDb2x1bW5bMl0gLSBmaXJzdENvbHVtblsxXSkpIC8gKCgxMDAwMC0xMDAwKSAqIHRva2VuRGVjaW1hbHMpKSArIGZpcnN0Q29sdW1uWzFdOwogICAgICAgICAgICBCMiA9ICgoKHRva2Vuc0NvdW50IC0gMTAwMCAqIHRva2VuRGVjaW1hbHMpICogKHNlY29uZENvbHVtblsyXSAtIHNlY29uZENvbHVtblsxXSkpIC8gKCgxMDAwMC0xMDAwKSAqIHRva2VuRGVjaW1hbHMpKSArIHNlY29uZENvbHVtblsxXTsKICAgICAgICB9CgogICAgICAgIGlmICh0b2tlbnNDb3VudCA+PSB1aW50KDEwMDAwKS5tdWwodG9rZW5EZWNpbWFscykgJiYgdG9rZW5zQ291bnQgPCB1aW50KDUwMDAwKS5tdWwodG9rZW5EZWNpbWFscykpIHsKICAgICAgICAgICAgQjEgPSAoKCh0b2tlbnNDb3VudCAtIDEwMDAwICogdG9rZW5EZWNpbWFscykgKiAoZmlyc3RDb2x1bW5bM10gLSBmaXJzdENvbHVtblsyXSkpIC8gKCg1MDAwMC0xMDAwMCkgKiB0b2tlbkRlY2ltYWxzKSkgKyBmaXJzdENvbHVtblsyXTsKICAgICAgICAgICAgQjIgPSAoKCh0b2tlbnNDb3VudCAtIDEwMDAwICogdG9rZW5EZWNpbWFscykgKiAoc2Vjb25kQ29sdW1uWzNdIC0gc2Vjb25kQ29sdW1uWzJdKSkgLyAoKDUwMDAwLTEwMDAwKSAqIHRva2VuRGVjaW1hbHMpKSArIHNlY29uZENvbHVtblsyXTsKICAgICAgICB9CgogICAgICAgIGlmICh0b2tlbnNDb3VudCA+PSAgdWludCg1MDAwMCkubXVsKHRva2VuRGVjaW1hbHMpKSB7CiAgICAgICAgICAgIEIxID0gZmlyc3RDb2x1bW5bM107CiAgICAgICAgICAgIEIyID0gc2Vjb25kQ29sdW1uWzNdOwogICAgICAgIH0KCiAgICAgICAgdWludCBib251c1BlcmNlbnQgPSBCMS5zdWIoKChkYXkgLSAxKS5tdWwoQjEgLSBCMikpLmRpdigxMikpOwoKICAgICAgICByZXR1cm4gY2FsY3VsYXRlQm9udXNUb2tlbnNBbW91bnQodG9rZW5zQ291bnQsIGJvbnVzUGVyY2VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlQm9udXNUb2tlbnNBbW91bnQodWludCB0b2tlbnNDb3VudCwgdWludCBib251c1BlcmNlbnQpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyh1aW50KXsKICAgICAgICB1aW50IGJvbnVzID0gdG9rZW5zQ291bnQubXVsKGJvbnVzUGVyY2VudCk7CiAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICBib251cyA9IGJvbnVzLmRpdihmaWF0VmFsdWVNdWx0aXBsaWVyKTsKICAgICAgICByZXR1cm4gYm9udXM7CiAgICB9Cn0='.
	

]
