Class {
	#name : #SRT6EEE3497d91ED600646f4e31000329ef2e5d210E,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6EEE3497d91ED600646f4e31000329ef2e5d210E >> base64 [
	^ 'LyoKICBDb3B5cmlnaHQgMjAxNyBMb29wcmluZyBQcm9qZWN0IEx0ZCAoTG9vcHJpbmcgRm91bmRhdGlvbikuCiAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKi8KcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Ci8vLyBAdGl0bGUgVWludFV0aWwKLy8vIEBhdXRob3IgRGFuaWVsIFdhbmcgLSA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9ImM3YTNhNmE5YWVhMmFiODdhYmE4YThiN2I1YWVhOWEwZTlhOGI1YTAiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgovLy8gQGRldiB1aW50IHV0aWxpdHkgZnVuY3Rpb25zCmxpYnJhcnkgTWF0aFVpbnQgewogICAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgYykgewogICAgICAgIGMgPSBhICogYjsKICAgICAgICByZXF1aXJlKGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIH0KICAgIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmVxdWlyZShiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KICAgIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICBjID0gYSArIGI7CiAgICAgICAgcmVxdWlyZShjID49IGEpOwogICAgfQogICAgZnVuY3Rpb24gdG9sZXJhbnRTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgcmV0dXJuIChhID49IGIpID8gYSAtIGIgOiAwOwogICAgfQogICAgLy8vIEBkZXYgY2FsY3VsYXRlIHRoZSBzcXVhcmUgb2YgQ29lZmZpY2llbnQgb2YgVmFyaWF0aW9uIChDVikKICAgIC8vLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db2VmZmljaWVudF9vZl92YXJpYXRpb24KICAgIGZ1bmN0aW9uIGN2c3F1YXJlKAogICAgICAgIHVpbnRbXSBhcnIsCiAgICAgICAgdWludCBzY2FsZQogICAgICAgICkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHB1cmUKICAgICAgICByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHVpbnQgbGVuID0gYXJyLmxlbmd0aDsKICAgICAgICByZXF1aXJlKGxlbiA+IDEpOwogICAgICAgIHJlcXVpcmUoc2NhbGUgPiAwKTsKICAgICAgICB1aW50IGF2ZyA9IDA7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgYXZnICs9IGFycltpXTsKICAgICAgICB9CiAgICAgICAgYXZnID0gYXZnIC8gbGVuOwogICAgICAgIGlmIChhdmcgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludCBjdnMgPSAwOwogICAgICAgIHVpbnQgcyA9IDA7CiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcnJbaV0gPiBhdmcgPyBhcnJbaV0gLSBhdmcgOiBhdmcgLSBhcnJbaV07CiAgICAgICAgICAgIGN2cyArPSBtdWwocywgcyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAobXVsKG11bChjdnMsIHNjYWxlKSAvIGF2Zywgc2NhbGUpIC8gYXZnKSAvIChsZW4gLSAxKTsKICAgIH0KfQovKgogIENvcHlyaWdodCAyMDE3IExvb3ByaW5nIFByb2plY3QgTHRkIChMb29wcmluZyBGb3VuZGF0aW9uKS4KICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqLwovKgogIENvcHlyaWdodCAyMDE3IExvb3ByaW5nIFByb2plY3QgTHRkIChMb29wcmluZyBGb3VuZGF0aW9uKS4KICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqLwovLy8gQHRpdGxlIEVSQzIwIGludGVyZmFjZQovLy8gQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCmNvbnRyYWN0IEVSQzIwIHsKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwoJCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKfQovKgogIENvcHlyaWdodCAyMDE3IExvb3ByaW5nIFByb2plY3QgTHRkIChMb29wcmluZyBGb3VuZGF0aW9uKS4KICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqLwovLy8gQHRpdGxlIE93bmFibGUKLy8vIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYwovLy8gICAgICBhdXRob3JpemF0aW9uIGNvbnRyb2wgZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mCi8vLyAgICAgICJ1c2VyIHBlcm1pc3Npb25zIi4KY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIC8vLyBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0CiAgICAvLy8gICAgICB0byB0aGUgc2VuZGVyLgogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQogICAgLy8vIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CiAgICAvLy8gQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYQogICAgLy8vICAgICAgbmV3T3duZXIuCiAgICAvLy8gQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgfQogICAgfQp9Ci8vLyBAdGl0bGUgVG9rZW5UcmFuc2ZlckRlbGVnYXRlIC0gQWN0cyBhcyBhIG1pZGRsZSBtYW4gdG8gdHJhbnNmZXIgRVJDMjAgdG9rZW5zCi8vLyBvbiBiZWhhbGYgb2YgZGlmZmVyZW50IHZlcnNpb25zIG9mIExvb3ByaW5nIHByb3RvY29sIHRvIGF2b2lkIEVSQzIwCi8vLyByZS1hdXRob3JpemF0aW9uLgovLy8gQGF1dGhvciBEYW5pZWwgV2FuZyAtIDw8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iODJlNmUzZWNlYmU3ZWVjMmVlZWRlZGYyZjBlYmVjZTVhY2VkZjBlNSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvYT4+Lgpjb250cmFjdCBUb2tlblRyYW5zZmVyRGVsZWdhdGUgaXMgT3duYWJsZSB7CiAgICB1c2luZyBNYXRoVWludCBmb3IgdWludDsKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vLyBWYXJpYWJsZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy8KICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBBZGRyZXNzSW5mbykgcHJpdmF0ZSBhZGRyZXNzSW5mb3M7CiAgICBhZGRyZXNzIHB1YmxpYyBsYXRlc3RBZGRyZXNzOwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8vIFN0cnVjdHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgc3RydWN0IEFkZHJlc3NJbmZvIHsKICAgICAgICBhZGRyZXNzIHByZXZpb3VzOwogICAgICAgIHVpbnQzMiAgaW5kZXg7CiAgICAgICAgYm9vbCAgICBhdXRob3JpemVkOwogICAgfQogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8vIE1vZGlmaWVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgbW9kaWZpZXIgb25seUF1dGhvcml6ZWQoKSB7CiAgICAgICAgaWYgKGlzQWRkcmVzc0F1dGhvcml6ZWQobXNnLnNlbmRlcikgPT0gZmFsc2UpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLy8gRXZlbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICBldmVudCBBZGRyZXNzQXV0aG9yaXplZChhZGRyZXNzIGluZGV4ZWQgYWRkciwgdWludDMyIG51bWJlcik7CiAgICBldmVudCBBZGRyZXNzRGVhdXRob3JpemVkKGFkZHJlc3MgaW5kZXhlZCBhZGRyLCB1aW50MzIgbnVtYmVyKTsKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vLyBQdWJsaWMgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy8KICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vLyBAZGV2IEFkZCBhIExvb3ByaW5nIHByb3RvY29sIGFkZHJlc3MuCiAgICAvLy8gQHBhcmFtIGFkZHIgQSBsb29wcmluZyBwcm90b2NvbCBhZGRyZXNzLgogICAgZnVuY3Rpb24gYXV0aG9yaXplQWRkcmVzcyhhZGRyZXNzIGFkZHIpCiAgICAgICAgb25seU93bmVyCiAgICAgICAgZXh0ZXJuYWwKICAgIHsKICAgICAgICBBZGRyZXNzSW5mbyBzdG9yYWdlIGFkZHJJbmZvID0gYWRkcmVzc0luZm9zW2FkZHJdOwogICAgICAgIGlmIChhZGRySW5mby5pbmRleCAhPSAwKSB7IC8vIGV4aXN0aW5nCiAgICAgICAgICAgIGlmIChhZGRySW5mby5hdXRob3JpemVkID09IGZhbHNlKSB7IC8vIHJlLWF1dGhvcml6ZQogICAgICAgICAgICAgICAgYWRkckluZm8uYXV0aG9yaXplZCA9IHRydWU7CiAgICAgICAgICAgICAgICBBZGRyZXNzQXV0aG9yaXplZChhZGRyLCBhZGRySW5mby5pbmRleCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhZGRyZXNzIHByZXYgPSBsYXRlc3RBZGRyZXNzOwogICAgICAgICAgICBpZiAocHJldiA9PSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgICAgICBhZGRySW5mby5pbmRleCA9IDE7CiAgICAgICAgICAgICAgICBhZGRySW5mby5hdXRob3JpemVkID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFkZHJJbmZvLnByZXZpb3VzID0gcHJldjsKICAgICAgICAgICAgICAgIGFkZHJJbmZvLmluZGV4ID0gYWRkcmVzc0luZm9zW3ByZXZdLmluZGV4ICsgMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBhZGRySW5mby5hdXRob3JpemVkID0gdHJ1ZTsKICAgICAgICAgICAgbGF0ZXN0QWRkcmVzcyA9IGFkZHI7CiAgICAgICAgICAgIEFkZHJlc3NBdXRob3JpemVkKGFkZHIsIGFkZHJJbmZvLmluZGV4KTsKICAgICAgICB9CiAgICB9CiAgICAvLy8gQGRldiBSZW1vdmUgYSBMb29wcmluZyBwcm90b2NvbCBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBhZGRyIEEgbG9vcHJpbmcgcHJvdG9jb2wgYWRkcmVzcy4KICAgIGZ1bmN0aW9uIGRlYXV0aG9yaXplQWRkcmVzcyhhZGRyZXNzIGFkZHIpCiAgICAgICAgb25seU93bmVyCiAgICAgICAgZXh0ZXJuYWwKICAgIHsKICAgICAgICB1aW50MzIgaW5kZXggPSBhZGRyZXNzSW5mb3NbYWRkcl0uaW5kZXg7CiAgICAgICAgaWYgKGluZGV4ICE9IDApIHsKICAgICAgICAgICAgYWRkcmVzc0luZm9zW2FkZHJdLmF1dGhvcml6ZWQgPSBmYWxzZTsKICAgICAgICAgICAgQWRkcmVzc0RlYXV0aG9yaXplZChhZGRyLCBpbmRleCk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gaXNBZGRyZXNzQXV0aG9yaXplZChhZGRyZXNzIGFkZHIpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmV0dXJuIGFkZHJlc3NJbmZvc1thZGRyXS5hdXRob3JpemVkOwogICAgfQogICAgZnVuY3Rpb24gZ2V0TGF0ZXN0QXV0aG9yaXplZEFkZHJlc3Nlcyh1aW50IG1heCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zIChhZGRyZXNzW10gYWRkcmVzc2VzKQogICAgewogICAgICAgIGFkZHJlc3NlcyA9IG5ldyBhZGRyZXNzW10obWF4KTsKICAgICAgICBhZGRyZXNzIGFkZHIgPSBsYXRlc3RBZGRyZXNzOwogICAgICAgIEFkZHJlc3NJbmZvIG1lbW9yeSBhZGRySW5mbzsKICAgICAgICB1aW50IGNvdW50ID0gMDsKICAgICAgICB3aGlsZSAoYWRkciAhPSBhZGRyZXNzKDApICYmIG1heCA8IGNvdW50KSB7CiAgICAgICAgICAgIGFkZHJJbmZvID0gYWRkcmVzc0luZm9zW2FkZHJdOwogICAgICAgICAgICBpZiAoYWRkckluZm8uaW5kZXggPT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYWRkcmVzc2VzW2NvdW50KytdID0gYWRkcjsKICAgICAgICAgICAgYWRkciA9IGFkZHJJbmZvLnByZXZpb3VzOwogICAgICAgIH0KICAgIH0KICAgIC8vLyBAZGV2IEludm9rZSBFUkMyMCB0cmFuc2ZlckZyb20gbWV0aG9kLgogICAgLy8vIEBwYXJhbSB0b2tlbiBBZGRyZXNzIG9mIHRva2VuIHRvIHRyYW5zZmVyLgogICAgLy8vIEBwYXJhbSBmcm9tIEFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW4gZnJvbS4KICAgIC8vLyBAcGFyYW0gdG8gQWRkcmVzcyB0byB0cmFuc2ZlciB0b2tlbiB0by4KICAgIC8vLyBAcGFyYW0gdmFsdWUgQW1vdW50IG9mIHRva2VuIHRvIHRyYW5zZmVyLgogICAgZnVuY3Rpb24gdHJhbnNmZXJUb2tlbigKICAgICAgICBhZGRyZXNzIHRva2VuLAogICAgICAgIGFkZHJlc3MgZnJvbSwKICAgICAgICBhZGRyZXNzIHRvLAogICAgICAgIHVpbnQgICAgdmFsdWUpCiAgICAgICAgb25seUF1dGhvcml6ZWQKICAgICAgICBleHRlcm5hbAogICAgewogICAgICAgIGlmICh2YWx1ZSA+IDAgJiYgZnJvbSAhPSB0bykgewogICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgRVJDMjAodG9rZW4pLnRyYW5zZmVyRnJvbShmcm9tLCB0bywgdmFsdWUpCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gYmF0Y2hUcmFuc2ZlclRva2VuKAogICAgICAgIHVpbnQgcmluZ1NpemUsIAogICAgICAgIGFkZHJlc3MgbHJjVG9rZW5BZGRyZXNzLAogICAgICAgIGFkZHJlc3MgZmVlUmVjaXBpZW50LAogICAgICAgIGJ5dGVzMzJbXSBiYXRjaCkKICAgICAgICBvbmx5QXV0aG9yaXplZAogICAgICAgIGV4dGVybmFsCiAgICB7CiAgICAgICAgcmVxdWlyZShiYXRjaC5sZW5ndGggPT0gcmluZ1NpemUgKiA2KTsKICAgICAgICB1aW50IHAgPSByaW5nU2l6ZSAqIDI7CiAgICAgICAgdmFyIGxyYyA9IEVSQzIwKGxyY1Rva2VuQWRkcmVzcyk7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgcmluZ1NpemU7IGkrKykgewogICAgICAgICAgICB1aW50IHByZXYgPSAoKGkgKyByaW5nU2l6ZSAtIDEpICUgcmluZ1NpemUpOwogICAgICAgICAgICBhZGRyZXNzIHRva2VuUyA9IGFkZHJlc3MoYmF0Y2hbaV0pOwogICAgICAgICAgICBhZGRyZXNzIG93bmVyID0gYWRkcmVzcyhiYXRjaFtyaW5nU2l6ZSArIGldKTsKICAgICAgICAgICAgYWRkcmVzcyBwcmV2T3duZXIgPSBhZGRyZXNzKGJhdGNoW3JpbmdTaXplICsgcHJldl0pOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gUGF5IHRva2VuUyB0byBwcmV2aW91cyBvcmRlciwgb3IgdG8gbWluZXIgYXMgcHJldmlvdXMgb3JkZXIncwogICAgICAgICAgICAvLyBtYXJnaW4gc3BsaXQgb3IvYW5kIHRoaXMgb3JkZXIncyBtYXJnaW4gc3BsaXQuCiAgICAgICAgICAgIEVSQzIwIF90b2tlblM7CiAgICAgICAgICAgIC8vIFRyeSB0byBjcmVhdGUgRVJDMjAgaW5zdGFuY2VzIG9ubHkgb25jZSBwZXIgdG9rZW4uCiAgICAgICAgICAgIGlmIChvd25lciAhPSBwcmV2T3duZXIgfHwgb3duZXIgIT0gZmVlUmVjaXBpZW50ICYmIGJhdGNoW3ArMV0gIT0gMCkgewogICAgICAgICAgICAgICAgX3Rva2VuUyA9IEVSQzIwKHRva2VuUyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gSGVyZSBiYXRjaFtwXSBoYXMgYmVlbiBjaGVja2VkIG5vdCB0byBiZSAwLgogICAgICAgICAgICBpZiAob3duZXIgIT0gcHJldk93bmVyKSB7CiAgICAgICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgICAgIF90b2tlblMudHJhbnNmZXJGcm9tKG93bmVyLCBwcmV2T3duZXIsIHVpbnQoYmF0Y2hbcF0pKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAob3duZXIgIT0gZmVlUmVjaXBpZW50KSB7CiAgICAgICAgICAgICAgICBpZiAoYmF0Y2hbcCsxXSAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgICAgICAgICAgICAgX3Rva2VuUy50cmFuc2ZlckZyb20ob3duZXIsIGZlZVJlY2lwaWVudCwgdWludChiYXRjaFtwKzFdKSkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgIGlmIChiYXRjaFtwKzJdICE9IDApIHsKICAgICAgICAgICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgICAgICAgICBscmMudHJhbnNmZXJGcm9tKGZlZVJlY2lwaWVudCwgb3duZXIsIHVpbnQoYmF0Y2hbcCsyXSkpCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChiYXRjaFtwKzNdICE9IDApIHsKICAgICAgICAgICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgICAgICAgICBscmMudHJhbnNmZXJGcm9tKG93bmVyLCBmZWVSZWNpcGllbnQsIHVpbnQoYmF0Y2hbcCszXSkpCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBwICs9IDQ7CiAgICAgICAgfQogICAgfQp9'.
	

]
