Class {
	#name : #SRT651efeba62be2911f211b9e39ae7dcf3094bd758,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT651efeba62be2911f211b9e39ae7dcf3094bd758 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CmxpYnJhcnkgU2FmZU1hdGggeyAgICAKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIHJldHVybiBjOwogIH0gCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0gCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9ICAKfQoKY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgYm9vbCBwdWJsaWMgdGVhbVN0YWtlc0Zyb3plbiA9IHRydWU7CiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIAogIGZ1bmN0aW9uIEJhc2ljVG9rZW4oKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KICAKICBtb2RpZmllciBub3RGcm96ZW4oKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gb3duZXIgfHwgKG1zZy5zZW5kZXIgPT0gb3duZXIgJiYgIXRlYW1TdGFrZXNGcm96ZW4pKTsKICAgIF87CiAgfQoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBub3RGcm96ZW4gcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CiAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW19mcm9tXSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIG5vdEZyb3plbiByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyBub3RGcm96ZW4gcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgfSBlbHNlIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICB9CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQp9Cgpjb250cmFjdCBSSSBpcyBTdGFuZGFyZFRva2VuIHsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiRnVuZGFyaWEgU3Rha2UiOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlJJIjsKICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAwOwp9Cgpjb250cmFjdCBTYWxlIGlzIFJJIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCi8qKioqKioqKioqIAogKiBDb21tb24gKgogKioqKioqKioqKi8KCiAgICAvLyBUSElTIElTIEtFWSBWQVJJQUJMRSBBTkQgREVGSU5FRCBBQ0NPUkRJTkcgVE8gVkFMVUUgT0YgUExBTk5FRCBDT1NUUyBPTiBUSEUgUEFHRSBodHRwczovL2J1c2luZXNzLmZ1bmRhcmlhLmNvbQogICAgdWludCBwdWJsaWMgcG9vbENhcFVTRCA9IDEwMDI3NTA7IC8vIDEwMDI3NTAgaW5pdGlhbGx5CiAgICAvLyBVU0QgcGVyIDEgZXRoZXIsIGFkZGVkIDEwJSBhcHJveGltYXRlbGx5IHRvIHNlY3VyZSBmcm9tIHdyb25nIGxvdyBwcmljZS4gV2UgbmVlZCBhZGQgMTAlIG9mIFN0YWtlcyB0byBzdXBwbHkgdG8gY292ZXIgc3VjaCBwcmljZS4KICAgIHVpbnQgcHVibGljIHVzZFBlckV0aGVyID0gMzUwOwogICAgdWludCBwdWJsaWMgc3VwcGx5Q2FwOyAvLyBDdXJyZW50IHRvdGFsIHN1cHBseSBjYXAgYWNjb3JkaW5nIHRvIGxhc3RTdGFrZVByaWNlVVNDZW50cyBhbmQgcG9vbENhcFVTRCAKICAgIHVpbnQgcHVibGljIGJ1c2luZXNzUGxhbm5lZFBlcmlvZER1cmF0aW9uID0gMzY1IGRheXM7IC8vIHRvdGFsIHBlcmlvZCBwbGFubmVkIGZvciBidXNpbmVzcyBhY3Rpdml0eSAzNjUgZGF5cwogICAgdWludCBwdWJsaWMgYnVzaW5lc3NQbGFubmVkUGVyaW9kRW5kVGltZXN0YW1wOwogICAgdWludCBwdWJsaWMgdGVhbUNhcDsgLy8gdGVhbSBTdGFrZXMgY2FwYWNpdHkKICAgIHVpbnQ4IHB1YmxpYyB0ZWFtU2hhcmUgPSA0NTsgLy8gc2hhcmUgZm9yIHRlYW0KICAgIHVpbnQgcHVibGljIGRpc3RyaWJ1dGVkVGVhbVN0YWtlczsgLy8gZGlzdHJpYnV0ZWQgU3Rha2VzIHRvIHRlYW0gICAKICAgIHVpbnQgcHVibGljIGNvbnRyYWN0Q3JlYXRlZFRpbWVzdGFtcDsgLy8gd2hlbiB0aGlzIGNvbnRyYWN0IHdhcyBjcmVhdGVkICAKICAgIGFkZHJlc3MgcHVibGljIHBvb2wgPSAweDE4ODI0NjQ1MzMwNzJlOWZDZDhDNkQzYzVjNWI1ODg1NDhCOTUyOTY7IC8vIGluaXRpYWwgcG9vbCB3YWxsZXQgYWRkcmVzcyAgCiAgICBtYXBwaW5nIChhZGRyZXNzPT5ib29sKSBwdWJsaWMgcmVqZWN0ZWRJbnZlc3RtZW50V2l0aGRyYXdhbHM7CiAgICB1aW50IHB1YmxpYyBhbGxvd2VkQW1vdW50VG9UcmFuc2ZlclRvUG9vbDsgLy8gdGhpcyBhbW91bnQgaXMgaW5jcmVhc2VkIHdoZW4gaW52ZXN0b3IgcmVqZWN0cyB0byB3aXRoZHJhdyBoaXMvaGVyIGludmVzdG1lbnQKICAgIHVpbnQgcHVibGljIGFsbG93ZWRBbW91bnRUcmFuc2ZlcmVkVG9Qb29sVG90YWw7IC8vIHN1bSBvZiBhbGwgYWxsb3dlZEFtb3VudFRvVHJhbnNmZXJUb1Bvb2wgdXNlZCAKICAgIHVpbnQgcHVibGljIGludmVzdG1lbnRHdWlkZXNSZXdhcmRzV2l0aGRyYXduOyAvLyB0b3RhbCBhbW91bnQgb2YgcmV3YXJkcyB3ZWkgd2l0aGRyYXduIGJ5IEd1aWRlcyAgCgovKioqKioqKioqKiAKICogQm91bnR5ICoKICoqKioqKioqKiovCiAKICAgIHVpbnQgcHVibGljIGRpc3RyaWJ1dGVkQm91bnR5U3Rha2VzOyAvLyBib3VudHkgYWR2aXNvcnMgU3Rha2VzIGRpc3RyaWJ1dGVkIHRvdGFsICAgIAogICAgdWludCBwdWJsaWMgYm91bnR5Q2FwOyAvLyBib3VudHkgYWR2aXNvcnMgU3Rha2VzIGNhcGFjaXR5ICAgIAogICAgdWludDggcHVibGljIGJvdW50eVNoYXJlID0gNzsgLy8gc2hhcmUgZm9yIGJvdW50eSAgICAKICAgIAovKioqKioqKioqKiogCiAqIFNhbGUgKgogKioqKioqKioqKiovCiAgICBhZGRyZXNzIHN1cHBsaWVyID0gMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOyAvLyBhZGRyZXNzIG9mIFN0YWtlcyBpbml0aWFsIHN1cHBsaWVyIChhYnN0cmFjdCkKICAgIC8vIGRhdGEgdG8gc3RvcmUgaW52ZXN0ZWQgd2VpIHZhbHVlICYgU3Rha2VzIGZvciBJbnZlc3RvcgogICAgc3RydWN0IHNhbGVEYXRhIHsKICAgICAgdWludCBzdGFrZXM7IC8vIGhvdyBtYW55IFN0YWtlcyB3aGVyZSByZWNpZXZlZCBieSB0aGlzIEludmVzdG9yIHRvdGFsCiAgICAgIHVpbnQgaW52ZXN0ZWQ7IC8vIGhvdyBtdWNoIHdlaSB0aGlzIEludmVzdG9yIGludmVzdGVkIHRvdGFsCiAgICAgIHVpbnQgYm9udXNTdGFrZXM7IC8vIGhvdyBtYW55IGJvbnVzIFN0YWtlcyB3aGVyZSByZWNpZXZlZCBieSB0aGlzIEludmVzdG9yCiAgICAgIHVpbnQgZ3VpZGVSZXdhcmQ7IC8vIEludmVzdG1lbnQgR3VpZGUgcmV3YXJkIGFtb3VudAogICAgICBhZGRyZXNzIGd1aWRlOyAvLyBhZGRyZXNzIG9mIEludmVzdG1lbnQgR3VpZGUKICAgIH0KICAgIG1hcHBpbmcgKGFkZHJlc3M9PnNhbGVEYXRhKSBwdWJsaWMgc2FsZVN0YXQ7IC8vIGludmVzdGVkIHZhbHVlICsgU3Rha2VzIGRhdGEgZm9yIGV2ZXJ5IEludmVzdG9yICAgICAgICAKICAgIHVpbnQgcHVibGljIHNhbGVTdGFydFRpbWVzdGFtcCA9IDE1MTEzNzM2MDA7IC8vIHJlZ3VsYXIgU3Rha2VzIHNhbGUgc3RhcnQgZGF0ZSAgICAgICAgICAgIAogICAgdWludCBwdWJsaWMgc2FsZUVuZFRpbWVzdGFtcCA9IDE1MTM5NjU2MDA7IAogICAgdWludCBwdWJsaWMgZGlzdHJpYnV0ZWRTYWxlU3Rha2VzOyAvLyBkaXN0cmlidXRlZCBzdGFrZXMgdG8gYWxsIEludmVzdG9ycwogICAgdWludCBwdWJsaWMgdG90YWxJbnZlc3RlZDsgLy9ob3cgbWFueSBpbnZlc3RlZCB0b3RhbAogICAgdWludCBwdWJsaWMgdG90YWxXaXRoZHJhd247IC8vaG93IG1hbnkgd2l0aGRyYXduIHRvdGFsCiAgICB1aW50IHB1YmxpYyBzYWxlQ2FwOyAvLyByZWd1bGFyIHNhbGUgU3Rha2VzIGNhcGFjaXR5ICAgCiAgICB1aW50OCBwdWJsaWMgc2FsZVNoYXJlID0gNDU7IC8vIHNoYXJlIGZvciByZWd1bGFyIHNhbGUKICAgIHVpbnQgcHVibGljIGxhc3RTdGFrZVByaWNlVVNDZW50czsgLy8gU3Rha2UgcHJpY2UgaW4gVS5TLiBjZW50cyBpcyBkZXRlcm1pbmVkIGFjY29yZGluZyB0byBjdXJyZW50IHRpbWVzdGFtcCAodGhlIGZ1cnRoZXIgLSB0aGUgaGlnaGVyIHByaWNlKSAgICAKICAgIHVpbnRbXSBwdWJsaWMgdGFyZ2V0UHJpY2U7ICAgIAogICAgYm9vbCBwdWJsaWMgcHJpY2VJc0Zyb3plbiA9IGZhbHNlOyAvLyBzdG9wIGluY3JlYXNpbmcgdGhlIHByaWNlIHRlbXBvcmFyeSAoaW4gY2FzZSBvZiBsb3cgZGVtYW5kLiBDYW4gYmUgY2FsbGVkIG9ubHkgYWZ0ZXIgc2FsZUVuZFRpbWVzdGFtcCkgICAgICAgCiAgICAKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAKICogQm9udXMgU3Rha2VzICYgSW52ZXN0bWVudCBHdWlkZXMgKgogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLyAgICAKICAgIC8vIGRhdGEgdG8gc3RvcmUgSW52ZXN0bWVudCBHdWlkZSByZXdhcmQKICAgIHN0cnVjdCBndWlkZURhdGEgewogICAgICBib29sIHJlZ2lzdGVyZWQ7IC8vIGlzIHRoaXMgSW52ZXN0bWVudCBHdWlkZSByZWdpc3RlcmVkCiAgICAgIHVpbnQgYWNjdW11bGF0ZWRQb3RlbnRpYWxSZXdhcmQ7IC8vIGhvdyBtYW55IHJld2FyZCB3ZWkgYXJlIHBvdGVudGlhbGx5IGF2YWlsYWJsZQogICAgICB1aW50IHJld2FyZFRvV2l0aGRyYXc7IC8vIGF2YWlsYWJlIHJld2FyZCB0byB3aXRoZHJhdyBub3cKICAgICAgdWludCBwZXJpb2RpY2FsbHlXaXRoZHJhd25SZXdhcmQ7IC8vIGhvdyBtdWNoIHJld2FyZCB3ZWkgd2hlcmUgd2l0aGRyYXduIGJ5IHRoaXMgSW52ZXN0bWVudCBHdWlkZSBhbHJlYWR5CiAgICB9CiAgICBtYXBwaW5nIChhZGRyZXNzPT5ndWlkZURhdGEpIHB1YmxpYyBndWlkZXNTdGF0OyAvLyBtYXBwaW5nIG9mIEludmVzdG1lbnQgR3VpZGVzIGRhdGFzICAgIAogICAgdWludCBwdWJsaWMgYm9udXNDYXA7IC8vIG1heCBhbW91bnQgb2YgYm9udXMgU3Rha2VzIGF2YWlsYWJlCiAgICB1aW50IHB1YmxpYyBkaXN0cmlidXRlZEJvbnVzU3Rha2VzOyAvLyBob3cgbWFueSBib251cyBTdGFrZXMgYXJlIGFscmVhZHkgZGlzdHJpYnV0ZWQKICAgIHVpbnQgcHVibGljIGJvbnVzU2hhcmUgPSAzOyAvLyBzaGFyZSBvZiBib251cyBTdGFrZXMgaW4gc3VwcGx5Q2FwCiAgICB1aW50OCBwdWJsaWMgZ3VpZGVJbnZlc3RtZW50QXR0cmFjdGVkU2hhcmVUb1BheSA9IDEwOyAvLyByZXdhcmQgZm9yIHRoZSBJbnZlc3RtZW50IEd1aWRlCgovKgogIFdBTlQgVE8gRUFSTiBPTiBTVEFLRVMgU0FMRSA/CiAgQkVDT01FIElOVkVTVE1FTlQgR1VJREUgQU5EIFJFQ0lFVkUgMTAlIE9GIEFUVFJBQ1RFRCBJTlZFU1RNRU5UICEKICBJTlRST0RVQ0UgWU9VUlNFTEYgT04gPGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9ImY4YmVhZGI2YmNiOWFhYjFiOWQ2YmJiN2I1YjhiZmI1YjliMWI0ZDZiYmI3YjUiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+ICYgR0lWRSBZT1VSIFdBTExFVCBBRERSRVNTCiovICAgIAoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAKICogVG8gUG9vbCB0cmFuc2ZlcnMgJiBJbnZlc3RtZW50IHdpdGhkcmF3YWwgKgogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICAgIHVpbnQ4IHB1YmxpYyBmaW5hbmNlUGVyaW9kc0NvdW50ID0gMTI7IC8vIEhvdyBtYW55IGZpbmFuY2UgcGVyaW9kcyBpbiBwbGFubmVkIHBlcmlvZAogICAgdWludFtdIHB1YmxpYyBmaW5hbmNlUGVyaW9kc1RpbWVzdGFtcHM7IC8vIFN1cHBvcnRpdmUgYXJyYXkgZm9yIHNlYXJjaGluZyBjdXJyZW50IGZpbmFuY2UgcGVyaW9kCiAgICB1aW50IHB1YmxpYyB0cmFuc2ZlcmVkVG9Qb29sOyAvLyBob3cgbXVjaCB3ZWkgdHJhbnNmZXJlZCB0byBwb29sIGFscmVhZHkKCi8qIEVWRU5UUyAqLwoKICAgIGV2ZW50IFN0YWtlc1NhbGUoYWRkcmVzcyB0bywgdWludCB3ZWlJbnZlc3RlZCwgdWludCBzdGFrZXNSZWNpZXZlZCwgdWludCB0ZWFtU3Rha2VzUmVjaWV2ZWQsIHVpbnQgc3Rha2VfcHJpY2VfdXNfY2VudHMpOwogICAgZXZlbnQgQm91bnR5RGlzdHJpYnV0ZWQoYWRkcmVzcyB0bywgdWludCBib3VudHlTdGFrZXMpOwogICAgZXZlbnQgVHJhbnNmZXJlZFRvUG9vbCh1aW50IHdlaUFtb3VudCwgdWludDggY3VycmVudEZpbmFuY2lhbFBlcmlvZE5vKTsKICAgIGV2ZW50IEludmVzdG1lbnRXaXRoZHJhd24oYWRkcmVzcyB0bywgdWludCB3aXRoZHJhd25XZWlBbW91bnQsIHVpbnQgc3Rha2VzQnVybmVkLCB1aW50OCByZW1haW5lZEZ1bGxGaW5hbmNpYWxQZXJpb2RzKTsKICAgIGV2ZW50IFVzZFBlckV0aGVyQ2hhbmdlZCh1aW50IG9sZFVzZFBlckV0aGVyLCB1aW50IG5ld1VzZFBlckV0aGVyKTsKICAgIGV2ZW50IEJvbnVzRGlzdHJpYnV0ZWQoYWRkcmVzcyB0bywgdWludCBib251c1N0YWtlcywgYWRkcmVzcyBndWlkZSwgdWludCBhY2N1bXVsYXRlZFBvdGVudGlhbFJld2FyZCk7CiAgICBldmVudCBQb29sQ2FwQ2hhbmdlZCh1aW50IG9sZENhcFVTRCwgdWludCBuZXdDYXBVU0QpOwogICAgZXZlbnQgUmVnaXN0ZXJHdWlkZShhZGRyZXNzIGludmVzdG1lbnRHdWlkZSk7CiAgICBldmVudCBUYXJnZXRQcmljZUNoYW5nZWQodWludDggTiwgdWludCBvbGRUYXJnZXRQcmljZSwgdWludCBuZXdUYXJnZXRQcmljZSk7CiAgICBldmVudCBJbnZlc3RtZW50R3VpZGVXaXRoZHJhd1Jld2FyZChhZGRyZXNzIGludmVzdG1lbnRHdWlkZSwgdWludCB3aXRoZHJhd25SZXdhcmRXZWkpOwogICAgCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlcj09b3duZXIpOwogICAgICBfOwogICAgfQogIC8qKgogICAqIEBkZXYgRGV0ZXJtaW5lIGR1cmF0aW9uIG9mIGZpbmFuY2UgcGVyaW9kLCBmaWxsIGFycmF5IHdpdGggZmluYW5jZSBwZXJpb2RzIHRpbWVzdGFtcHMsCiAgICogICAgICBzZXQgYnVzaW5lc3NQbGFubmVkUGVyaW9kRW5kVGltZXN0YW1wIGFuZCBjb250cmFjdENyZWF0ZWRUaW1lc3RhbXAsICAgIAogICAqLyAgICAgIAogICAgZnVuY3Rpb24gU2FsZSgpIHB1YmxpYyB7ICAgICAKICAgICAgdWludCBmaW5hbmNlUGVyaW9kRHVyYXRpb24gPSBidXNpbmVzc1BsYW5uZWRQZXJpb2REdXJhdGlvbi9maW5hbmNlUGVyaW9kc0NvdW50OyAvLyBxdWFudGl0eSBvZiBzZWNvbmRzIGluIGNob3NlbiBmaW5hbmNlIHBlcmlvZAogICAgICAvLyBtYWtpbmcgYXJyYXkgd2l0aCB0aW1lc3RhbXBzIG9mIGV2ZXJ5IGZpbmFuY2UgcGVyaW9kIGVuZCBkYXRlCiAgICAgIGZpbmFuY2VQZXJpb2RzVGltZXN0YW1wcy5wdXNoKHNhbGVFbmRUaW1lc3RhbXApOyAvLyBmaXJzdCBmaW5hbmNlIHBlcmlvZCBpcyB3aG9sZSBzYWxlIHBlcmlvZAogICAgICBmb3IodWludDggaT0xOyBpPD1maW5hbmNlUGVyaW9kc0NvdW50OyBpKyspIHsKICAgICAgICBmaW5hbmNlUGVyaW9kc1RpbWVzdGFtcHMucHVzaChzYWxlRW5kVGltZXN0YW1wK2ZpbmFuY2VQZXJpb2REdXJhdGlvbippKTsgIAogICAgICB9CiAgICAgIGJ1c2luZXNzUGxhbm5lZFBlcmlvZEVuZFRpbWVzdGFtcCA9IHNhbGVFbmRUaW1lc3RhbXArYnVzaW5lc3NQbGFubmVkUGVyaW9kRHVyYXRpb247IAogICAgICBjb250cmFjdENyZWF0ZWRUaW1lc3RhbXAgPSBub3c7CiAgICAgIHRhcmdldFByaWNlLnB1c2goMSk7IC8vIEluaXRpYWwgU3Rha2UgcHJpY2UgbWFyayBpbiBVLlMuIGNlbnRzICgxIGNlbnQgPSAkMC4wMSkgIAogICAgICB0YXJnZXRQcmljZS5wdXNoKDEwKTsgLy8gcHJpY2UgbWFyayBhdCB0aGUgc2FsZSBwZXJpb2Qgc3RhcnQgdGltZXN0YW1wICAgICAgCiAgICAgIHRhcmdldFByaWNlLnB1c2goMTAwKTsgLy8gcHJpY2UgbWFyayBhdCB0aGUgc2FsZSBwZXJpb2QgZW5kIHRpbWVzdGFtcCAgICAgICAKICAgICAgdGFyZ2V0UHJpY2UucHVzaCgxMDAwKTsgLy8gcHJpY2UgbWFyayBhdCBodGUgZW5kIG9mIGJ1c2luZXNzIHBsYW5uZWQgcGVyaW9kCiAgICAgIGJhbGFuY2VzW3N1cHBsaWVyXSA9IDA7IC8vIG51bGxpZnkgU3Rha2VzIGZvcm1hbCBzdXBwbGllciBiYWxhbmNlICAgICAgICAgCiAgICB9CiAgLyoqCiAgICogQGRldiBIb3cgbWFueSBpbnZlc3RtZW50IHJlbWFpbmVkPyBNYXhpbXVtIGludmVzdG1lbnQgaXMgcG9vbENhcFVTRAogICAqIEByZXR1cm4gcmVtYWluaW5nSW52ZXN0bWVudCBpbiB3ZWkgICAKICAgKi8gICAgIAogICAgZnVuY3Rpb24gcmVtYWluaW5nSW52ZXN0bWVudCgpIHB1YmxpYyB2aWV3IHJldHVybnModWludCkgewogICAgICByZXR1cm4gcG9vbENhcFVTRC5kaXYodXNkUGVyRXRoZXIpLm11bCgxIGV0aGVyKS5zdWIodG90YWxJbnZlc3RlZCk7ICAKICAgIH0KICAvKioKICAgKiBAZGV2IER5bmFtaWNhbGx5IHNldCBjYXBzCiAgICovICAgICAgIAogICAgZnVuY3Rpb24gc2V0Q2FwcygpIGludGVybmFsIHsKICAgICAgLy8gcmVtYWluaW5nIFN0YWtlcyBhcmUgZGV0ZXJtaW5lZCBvbmx5IGZyb20gcmVtYWluaW5nSW52ZXN0bWVudAogICAgICBzYWxlQ2FwID0gZGlzdHJpYnV0ZWRTYWxlU3Rha2VzK3N0YWtlRm9yV2VpKHJlbWFpbmluZ0ludmVzdG1lbnQoKSk7IC8vIG1heCBhdmFpbGFibGUgU3Rha2VzIGZvciBzYWxlIGluY2x1ZGluZyBhbHJlYWR5IGRpc3RyaWJ1dGVkCiAgICAgIHN1cHBseUNhcCA9IHNhbGVDYXAubXVsKDEwMCkuZGl2KHNhbGVTaGFyZSk7IC8vIG1heCBhdmFpbGFibGUgU3Rha2VzIGZvciBzdXBwbHlpbmcKICAgICAgdGVhbUNhcCA9IHN1cHBseUNhcC5tdWwodGVhbVNoYXJlKS5kaXYoMTAwKTsgLy8gbWF4IGF2YWlsYWJsZSB0ZWFtIFN0YWtlcwogICAgICBib251c0NhcCA9IHN1cHBseUNhcC5tdWwoYm9udXNTaGFyZSkuZGl2KDEwMCk7IC8vIG1heCBhdmFpbGFibGUgU3Rha2VzIGZvciBib251cwogICAgICBib3VudHlDYXAgPSBzdXBwbHlDYXAuc3ViKHNhbGVDYXApLnN1Yih0ZWFtQ2FwKS5zdWIoYm9udXNDYXApOyAvLyBtYXggYXZhaWxhYmxlIFN0YWtlcyBmb3IgYm91bnR5ICAgICAgICAKICAgIH0KICAvKioKICAgKiBAZGV2IER5bmFtaWNhbGx5IHNldCB0aGUgcHJpY2Ugb2YgU3Rha2UgaW4gVVNEIGNlbnRzLCB3aGljaCBkZXBlbmRzIG9uIGN1cnJlbnQgdGltZXN0YW1wIChwcmljZSBncm93cyB3aXRoIHRpbWUpCiAgICovICAgICAgIAogICAgZnVuY3Rpb24gc2V0U3Rha2VQcmljZVVTQ2VudHMoKSBpbnRlcm5hbCB7CiAgICAgICAgdWludCB0YXJnZXRQcmljZUZyb207CiAgICAgICAgdWludCB0YXJnZXRQcmljZVRvOwogICAgICAgIHVpbnQgc3RhcnRUaW1lc3RhbXA7CiAgICAgICAgdWludCBlbmRUaW1lc3RhbXA7CiAgICAgIC8vIHNldCBwcmljZSBmb3IgcHJlIHNhbGUgcGVyaW9kICAgICAgCiAgICAgIGlmKG5vdyA8IHNhbGVTdGFydFRpbWVzdGFtcCkgewogICAgICAgIHRhcmdldFByaWNlRnJvbSA9IHRhcmdldFByaWNlWzBdOwogICAgICAgIHRhcmdldFByaWNlVG8gPSB0YXJnZXRQcmljZVsxXTsKICAgICAgICBzdGFydFRpbWVzdGFtcCA9IGNvbnRyYWN0Q3JlYXRlZFRpbWVzdGFtcDsKICAgICAgICBlbmRUaW1lc3RhbXAgPSBzYWxlU3RhcnRUaW1lc3RhbXA7ICAgICAgICAKICAgICAgLy8gc2V0IHByaWNlIGZvciBzYWxlIHBlcmlvZAogICAgICB9IGVsc2UgaWYobm93ID49IHNhbGVTdGFydFRpbWVzdGFtcCAmJiBub3cgPCBzYWxlRW5kVGltZXN0YW1wKSB7CiAgICAgICAgdGFyZ2V0UHJpY2VGcm9tID0gdGFyZ2V0UHJpY2VbMV07CiAgICAgICAgdGFyZ2V0UHJpY2VUbyA9IHRhcmdldFByaWNlWzJdOwogICAgICAgIHN0YXJ0VGltZXN0YW1wID0gc2FsZVN0YXJ0VGltZXN0YW1wOwogICAgICAgIGVuZFRpbWVzdGFtcCA9IHNhbGVFbmRUaW1lc3RhbXA7ICAgIAogICAgICAvLyBzZXQgcHJpY2UgZm9yIHBvc3Qgc2FsZSBwZXJpb2QKICAgICAgfSBlbHNlIGlmKG5vdyA+PSBzYWxlRW5kVGltZXN0YW1wICYmIG5vdyA8IGJ1c2luZXNzUGxhbm5lZFBlcmlvZEVuZFRpbWVzdGFtcCkgewogICAgICAgIHRhcmdldFByaWNlRnJvbSA9IHRhcmdldFByaWNlWzJdOwogICAgICAgIHRhcmdldFByaWNlVG8gPSB0YXJnZXRQcmljZVszXTsKICAgICAgICBzdGFydFRpbWVzdGFtcCA9IHNhbGVFbmRUaW1lc3RhbXA7CiAgICAgICAgZW5kVGltZXN0YW1wID0gYnVzaW5lc3NQbGFubmVkUGVyaW9kRW5kVGltZXN0YW1wOyAgICAKICAgICAgfSAgICAgCiAgICAgIGxhc3RTdGFrZVByaWNlVVNDZW50cyA9IHRhcmdldFByaWNlRnJvbSArICgobm93LXN0YXJ0VGltZXN0YW1wKSoodGFyZ2V0UHJpY2VUby10YXJnZXRQcmljZUZyb20pKS8oZW5kVGltZXN0YW1wLXN0YXJ0VGltZXN0YW1wKTsgICAgICAgCiAgICB9ICAKICAvKioKICAgKiBAZGV2IFJlY2lldmUgd2VpIGFuZCBwcm9jZXNzIFN0YWtlcyBzYWxlCiAgICovICAgIAogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHB1YmxpYyB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBhZGRyZXNzKDApKTsKICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsgLy8gcHJvY2VzcyBvbmx5IHJlcXVlc3RzIHdpdGggd2VpCiAgICAgIHJlcXVpcmUobm93IDwgYnVzaW5lc3NQbGFubmVkUGVyaW9kRW5kVGltZXN0YW1wKTsgLy8gbm8gbGF0ZXIgdGhlbiBhdCB0aGUgZW5kIG9mIHBsYW5uZWQgcGVyaW9kCiAgICAgIHByb2Nlc3NTYWxlKCk7ICAgICAgIAogICAgfQogIC8qKgogICAqIEBkZXYgUHJvY2VzcyBTdGFrZXMgc2FsZQogICAqLyAgICAgICAKICAgIGZ1bmN0aW9uIHByb2Nlc3NTYWxlKCkgaW50ZXJuYWwgewogICAgICBpZighcHJpY2VJc0Zyb3plbikgeyAvLyByZWZyZXNoIHByaWNlIG9ubHkgaWYgcHJpY2UgaXMgbm90IGZyb3plbgogICAgICAgIHNldFN0YWtlUHJpY2VVU0NlbnRzKCk7CiAgICAgIH0KICAgICAgc2V0Q2FwcygpOyAgICAKCiAgICAgICAgdWludCB0ZWFtU3Rha2VzOyAvLyBTdGFrZXMgZm9yIHRoZSB0ZWFtIGFjY29yZGluZyB0byB0ZWFtU2hhcmUKICAgICAgICB1aW50IHNhbGVTdGFrZXM7IC8vIFN0YWtlcyBmb3IgdGhlIFNhbGUKICAgICAgICB1aW50IHdlaUludmVzdGVkOyAvLyB3ZWlJbnZlc3RlZCBub3cgYnkgdGhpcyBJbnZlc3RvcgogICAgICAgIHVpbnQgdHJ5U2FsZVN0YWtlcyA9IHN0YWtlRm9yV2VpKG1zZy52YWx1ZSk7IC8vIHRyeSB0byBnZXQgdGhpcyBxdWFudGl0eSBvZiBTdGFrZXMKCiAgICAgIGlmKHRyeVNhbGVTdGFrZXMgPiAxKSB7CiAgICAgICAgdWludCB0cnlEaXN0cmlidXRlID0gZGlzdHJpYnV0ZWRTYWxlU3Rha2VzK3RyeVNhbGVTdGFrZXM7IC8vIHRyeSB0byBkaXN0cmlidXRlIHRoaXMgdHJ5U3Rha2VzICAgICAgICAKICAgICAgICBpZih0cnlEaXN0cmlidXRlIDw9IHNhbGVDYXApIHsgLy8gc2FsZUNhcCBub3QgcmVhY2hlZAogICAgICAgICAgc2FsZVN0YWtlcyA9IHRyeVNhbGVTdGFrZXM7IC8vIGFsbCB0cnlTdGFrZXMgY2FuIGJlIHNvbGQKICAgICAgICAgIHdlaUludmVzdGVkID0gbXNnLnZhbHVlOyAvLyBhbGwgY3VycmVudCB3ZWkgYXJlIGFjY2VwdGVkICAgICAgICAgICAgICAgICAgICAKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2FsZVN0YWtlcyA9IHNhbGVDYXAtZGlzdHJpYnV0ZWRTYWxlU3Rha2VzOyAvLyBvbmx5IHJlbW5hbnQgb2YgU3Rha2VzIGFyZSBhdmFpbGFibGUKICAgICAgICAgIHdlaUludmVzdGVkID0gd2VpRm9yU3Rha2Uoc2FsZVN0YWtlcyk7IC8vIHdlaSBmb3IgYXZhaWxhYmxlIHJlbW5hbnQgb2YgU3Rha2VzIAogICAgICAgIH0KICAgICAgICB0ZWFtU3Rha2VzID0gKHNhbGVTdGFrZXMqdGVhbVNoYXJlKS5kaXYoc2FsZVNoYXJlKTsgLy8gcGFydCBvZiBTdGFrZXMgZm9yIGEgdGVhbSAgICAgICAgCiAgICAgICAgaWYoc2FsZVN0YWtlcyA+IDApIHsgICAgICAgICAgCiAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gKz0gdGVhbVN0YWtlczsgLy8gcmV3YXJkaW5nIHRlYW0gYWNjb3JkaW5nIHRvIHRlYW1TaGFyZQogICAgICAgICAgdG90YWxTdXBwbHkgKz0gdGVhbVN0YWtlczsgLy8gc3VwcGx5aW5nIHRlYW0gU3Rha2VzCiAgICAgICAgICBkaXN0cmlidXRlZFRlYW1TdGFrZXMgKz0gdGVhbVN0YWtlczsgLy8gc2F2aW5nIGRpc3RyaWJ1dGVkIHRlYW0gU3Rha2VzIAogICAgICAgICAgc2FsZVN1cHBseShtc2cuc2VuZGVyLCBzYWxlU3Rha2VzLCB3ZWlJbnZlc3RlZCk7IC8vIHByb2Nlc3Mgc2FsZVN1cHBseQogICAgICAgICAgaWYoc2FsZVN0YXRbbXNnLnNlbmRlcl0uZ3VpZGUgIT0gYWRkcmVzcygwKSkgeyAvLyB3ZSBoYXZlIEludmVzdG1lbnQgR3VpZGUgdG8gcmV3YXJkIGFuZCBkaXN0cmlidXRlIGJvbnVzIFN0YWtlcwogICAgICAgICAgICBkaXN0cmlidXRlQm9udXNTdGFrZXMobXNnLnNlbmRlciwgc2FsZVN0YWtlcywgd2VpSW52ZXN0ZWQpOyAgCiAgICAgICAgICB9ICAgICAgICAgIAogICAgICAgIH0gICAgICAgIAogICAgICAgIGlmKHRyeURpc3RyaWJ1dGUgPiBzYWxlQ2FwKSB7CiAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKG1zZy52YWx1ZS13ZWlJbnZlc3RlZCk7IC8vIHJldHVybiByZW1uYW50CiAgICAgICAgfSAgICAgICAgCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcihtc2cudmFsdWUpOyAvLyByZXR1cm4gaW5jb3JyZWN0IHdlaQogICAgICB9CiAgICB9CiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciBTdGFrZXMgZnJvbSBvd25lciBiYWxhbmNlIHRvIGJ1eWVyIGJhbGFuY2UgJiBzYXZpbmcgZGF0YSB0byBzYWxlU3RhdCBzdG9yYWdlCiAgICogQHBhcmFtIF90byBpcyBhZGRyZXNzIG9mIGJ1eWVyIAogICAqIEBwYXJhbSBfc3Rha2VzIGlzIHF1YW50aXR5IG9mIFN0YWtlcyB0cmFuc2ZlcmVkIAogICAqIEBwYXJhbSBfd2VpIGlzIHZhbHVlIGludmVzdGVkICAgICAgICAKICAgKi8gCiAgICBmdW5jdGlvbiBzYWxlU3VwcGx5KGFkZHJlc3MgX3RvLCB1aW50IF9zdGFrZXMsIHVpbnQgX3dlaSkgaW50ZXJuYWwgewogICAgICByZXF1aXJlKF9zdGFrZXMgPiAwKTsgIAogICAgICBiYWxhbmNlc1tfdG9dICs9IF9zdGFrZXM7IC8vIHN1cHBseSBzb2xkIFN0YWtlcyBkaXJlY3RseSB0byBidXllcgogICAgICB0b3RhbFN1cHBseSArPSBfc3Rha2VzOwogICAgICBkaXN0cmlidXRlZFNhbGVTdGFrZXMgKz0gX3N0YWtlczsKICAgICAgdG90YWxJbnZlc3RlZCA9IHRvdGFsSW52ZXN0ZWQuYWRkKF93ZWkpOyAvLyBhZGRpbmcgdG8gdG90YWwgaW52ZXN0bWVudAogICAgICAvLyBzYXZpbmcgc3RhdAogICAgICBzYWxlU3RhdFtfdG9dLnN0YWtlcyArPSBfc3Rha2VzOyAvLyBzdGF0aW5nIFN0YWtlcyBib3VnaHQgICAgICAgCiAgICAgIHNhbGVTdGF0W190b10uaW52ZXN0ZWQgPSBzYWxlU3RhdFtfdG9dLmludmVzdGVkLmFkZChfd2VpKTsgLy8gc3RhdGluZyB3ZWkgaW52ZXN0ZWQKICAgICAgVHJhbnNmZXIoc3VwcGxpZXIsIF90bywgX3N0YWtlcyk7CiAgICB9ICAgICAgCiAgLyoqCiAgICogQGRldiBTZXQgbmV3IG93bmVyCiAgICogQHBhcmFtIG5ld19vd25lciBuZXcgb3duZXIgIAogICAqLyAgICAKICAgIGZ1bmN0aW9uIHNldE5ld093bmVyKGFkZHJlc3MgbmV3X293bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgb3duZXIgPSBuZXdfb3duZXI7IAogICAgfQogIC8qKgogICAqIEBkZXYgU2V0IG5ldyBldGhlciBwcmljZSBpbiBVU0QuIFNob3VsZCBiZSBjaGFuZ2VkIHdoZW4gcHJpY2UgZ3Jvdy1mYWxsIDUlLTEwJQogICAqIEBwYXJhbSBuZXdfdXNkX3Blcl9ldGhlciBuZXcgcHJpY2UgIAogICAqLyAgICAKICAgIGZ1bmN0aW9uIHNldFVzZFBlckV0aGVyKHVpbnQgbmV3X3VzZF9wZXJfZXRoZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICBVc2RQZXJFdGhlckNoYW5nZWQodXNkUGVyRXRoZXIsIG5ld191c2RfcGVyX2V0aGVyKTsKICAgICAgdXNkUGVyRXRoZXIgPSBuZXdfdXNkX3Blcl9ldGhlcjsgCiAgICB9CiAgLyoqCiAgICogQGRldiBTZXQgYWRkcmVzcyBvZiB3YWxsZXQgd2hlcmUgaW52ZXN0bWVudCB3aWxsIGJlIHRyYW5zZmVyZWQgZm9yIGZ1cnRoZXIgdXNpbmcgaW4gYnVzaW5lc3MgdHJhbnNhY3Rpb25zCiAgICogQHBhcmFtIF9wb29sIG5ldyBhZGRyZXNzIG9mIHRoZSBQb29sICAgCiAgICovICAgICAgICAgCiAgICBmdW5jdGlvbiBzZXRQb29sQWRkcmVzcyhhZGRyZXNzIF9wb29sKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgcG9vbCA9IF9wb29sOyAgCiAgICB9CiAgLyoqCiAgICogQGRldiBDaGFuZ2UgUG9vbCBjYXBhY2l0eSBpbiBVU0QKICAgKiBAcGFyYW0gbmV3X3Bvb2xfY2FwX3VzZCBuZXcgUG9vbCBjYXAgaW4gJCAgIAogICAqLyAgICAKICAgIGZ1bmN0aW9uIHNldFBvb2xDYXBVU0QodWludCBuZXdfcG9vbF9jYXBfdXNkKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgUG9vbENhcENoYW5nZWQocG9vbENhcFVTRCwgbmV3X3Bvb2xfY2FwX3VzZCk7CiAgICAgIHBvb2xDYXBVU0QgPSBuZXdfcG9vbF9jYXBfdXNkOyAKICAgIH0KICAvKioKICAgKiBAZGV2IFJlZ2lzdGVyIEludmVzdG1lbnQgR3VpZGUKICAgKiBAcGFyYW0gaW52ZXN0bWVudF9ndWlkZSBhZGRyZXNzIG9mIEludmVzdG1lbnQgR3VpZGUgICAKICAgKi8gICAgIAogICAgZnVuY3Rpb24gcmVnaXN0ZXJHdWlkZShhZGRyZXNzIGludmVzdG1lbnRfZ3VpZGUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICBndWlkZXNTdGF0W2ludmVzdG1lbnRfZ3VpZGVdLnJlZ2lzdGVyZWQgPSB0cnVlOwogICAgICBSZWdpc3Rlckd1aWRlKGludmVzdG1lbnRfZ3VpZGUpOwogICAgfQogIC8qKgogICAqIEBkZXYgU3RvcCBpbmNyZWFzaW5nIHByaWNlIGR5bmFtaWNhbGx5LiBTZXQgaXQgYXMgc3RhdGljIHRlbXBvcmFyeS4gCiAgICovICAgCiAgICBmdW5jdGlvbiBmcmVlemVQcmljZSgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICBwcmljZUlzRnJvemVuID0gdHJ1ZTsgCiAgICB9CiAgLyoqCiAgICogQGRldiBDb250aW51ZSBpbmNyZWFzaW5nIHByaWNlIGR5bmFtaWNhbGx5ICh0aGUgc3RhbmRhcmQsIHVzdWFsIGFsZ29yaXRobSkuCiAgICovICAgICAgIAogICAgZnVuY3Rpb24gdW5mcmVlemVQcmljZSgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICBwcmljZUlzRnJvemVuID0gZmFsc2U7IC8vIHRoaXMgbWVhbnMgdGhhdCBwcmljZSBpcyB1bmZyb3plbiAgCiAgICB9CiAgLyoqCiAgICogQGRldiBBYmlsaXR5IHRvIHR1bmUgZHluYW1pYyBwcmljZSBjaGFuZ2luZyB3aXRoIHRpbWUuCiAgICovICAgICAgIAogICAgZnVuY3Rpb24gc2V0VGFyZ2V0UHJpY2UodWludDggbiwgdWludCBzdGFrZV9wcmljZV91c19jZW50cykgcHVibGljIG9ubHlPd25lciB7CiAgICAgIFRhcmdldFByaWNlQ2hhbmdlZChuLCB0YXJnZXRQcmljZVtuXSwgc3Rha2VfcHJpY2VfdXNfY2VudHMpOwogICAgICB0YXJnZXRQcmljZVtuXSA9IHN0YWtlX3ByaWNlX3VzX2NlbnRzOwogICAgfSAgCiAgLyoqCiAgICogQGRldiBHZXQgYW5kIHNldCBhZGRyZXNzIG9mIEludmVzdG1lbnQgR3VpZGUgYW5kIGRpc3RyaWJ1dGUgYm9udXMgU3Rha2VzIGFuZCBHdWlkZSByZXdhcmQKICAgKiBAcGFyYW0ga2V5IGFkZHJlc3Mgb2YgSW52ZXN0bWVudCBHdWlkZSAgIAogICAqLyAgICAgCiAgICBmdW5jdGlvbiBnZXRCb251c1N0YWtlc1Blcm1hbmVudGx5KGFkZHJlc3Mga2V5KSBwdWJsaWMgewogICAgICByZXF1aXJlKGd1aWRlc1N0YXRba2V5XS5yZWdpc3RlcmVkKTsKICAgICAgcmVxdWlyZShzYWxlU3RhdFttc2cuc2VuZGVyXS5ndWlkZSA9PSBhZGRyZXNzKDApKTsgLy8gSW52ZXN0bWVudCBHdWlkZSBpcyBub3QgYXBwbGllZCB5ZXQgZm9yIHRoaXMgSW52ZXN0b3IKICAgICAgc2FsZVN0YXRbbXNnLnNlbmRlcl0uZ3VpZGUgPSBrZXk7IC8vIGFwcGx5IEludi4gR3VpZGUgCiAgICAgIGlmKHNhbGVTdGF0W21zZy5zZW5kZXJdLmludmVzdGVkID4gMCkgeyAvLyB3ZSBoYXZlIGludmVzdGVkIHZhbHVlLCBwcm9jZXNzIGRpc3RyaWJ1dGlvbiBvZiBib251cyBTdGFrZXMgYW5kIHJld2FyZGluZyBhIEd1aWRlICAgICAKICAgICAgICBkaXN0cmlidXRlQm9udXNTdGFrZXMobXNnLnNlbmRlciwgc2FsZVN0YXRbbXNnLnNlbmRlcl0uc3Rha2VzLCBzYWxlU3RhdFttc2cuc2VuZGVyXS5pbnZlc3RlZCk7CiAgICAgIH0KICAgIH0KICAvKioKICAgKiBAZGV2IERpc3RyaWJ1dGUgYm9udXMgU3Rha2VzIHRvIEludmVzdG9yIGFjY29yZGluZyB0byBib251c1NoYXJlCiAgICogQHBhcmFtIF90byB0byB3aGljaCBJbnZlc3RvciB0byBkaXN0cmlidXRlCiAgICogQHBhcmFtIGFkZGVkX3N0YWtlcyBob3cgbWFueSBTdGFrZXMgYXJlIGFkZGVkIGJ5IHRoaXMgSW52ZXN0b3IgICAgCiAgICogQHBhcmFtIGFkZGVkX3dlaSBob3cgbXVjaCB3ZWkgYXJlIGludmVzdGVkIGJ5IHRoaXMgSW52ZXN0b3IgCiAgICogQHJldHVybiB3ZWkgcXVhbnRpdHkgICAgICAgIAogICAqLyAgICAgICAKICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGVCb251c1N0YWtlcyhhZGRyZXNzIF90bywgdWludCBhZGRlZF9zdGFrZXMsIHVpbnQgYWRkZWRfd2VpKSBpbnRlcm5hbCB7CiAgICAgIHVpbnQgYWRkZWRfYm9udXNfc3Rha2VzID0gKGFkZGVkX3N0YWtlcyooKGJvbnVzU2hhcmUqMTAwKS5kaXYoc2FsZVNoYXJlKSkpLzEwMDsgLy8gaG93IG1hbnkgYm9udXMgU3Rha2VzIHRvIGFkZAogICAgICByZXF1aXJlKGRpc3RyaWJ1dGVkQm9udXNTdGFrZXMrYWRkZWRfYm9udXNfc3Rha2VzIDw9IGJvbnVzQ2FwKTsgLy8gY2hlY2sgaXMgYm9udXMgY2FwIGlzIG5vdCBvdmVyZmxvd2VkCiAgICAgIHVpbnQgYWRkZWRfcG90ZW50aWFsX3Jld2FyZCA9IChhZGRlZF93ZWkqZ3VpZGVJbnZlc3RtZW50QXR0cmFjdGVkU2hhcmVUb1BheSkvMTAwOyAvLyByZXdhcmQgZm9yIHRoZSBHdWlkZQogICAgICBpZighcmVqZWN0ZWRJbnZlc3RtZW50V2l0aGRyYXdhbHNbX3RvXSkgewogICAgICAgIGd1aWRlc1N0YXRbc2FsZVN0YXRbX3RvXS5ndWlkZV0uYWNjdW11bGF0ZWRQb3RlbnRpYWxSZXdhcmQgKz0gYWRkZWRfcG90ZW50aWFsX3Jld2FyZDsgLy8gc2F2ZSBwb3RlbnRpYWwgcmV3YXJkIGZvciB0aGUgR3VpZGUKICAgICAgfSBlbHNlIHsKICAgICAgICBndWlkZXNTdGF0W3NhbGVTdGF0W190b10uZ3VpZGVdLnJld2FyZFRvV2l0aGRyYXcgKz0gYWRkZWRfcG90ZW50aWFsX3Jld2FyZDsgLy8gbGV0IGxpbmtlZCBJbnZlc3RtZW50IEd1aWRlIHRvIHdpdGhkcmF3IGFsbCB0aGlzIHJld2FyZCAgIAogICAgICB9ICAgICAgCiAgICAgIHNhbGVTdGF0W190b10uZ3VpZGVSZXdhcmQgKz0gYWRkZWRfcG90ZW50aWFsX3Jld2FyZDsgLy8gYWRkIGd1aWRlUmV3YXJkIHdlaSB2YWx1ZSBmb3Igc3RhdAogICAgICBzYWxlU3RhdFtfdG9dLmJvbnVzU3Rha2VzICs9IGFkZGVkX2JvbnVzX3N0YWtlczsgLy8gYWRkIGJvbnVzU3Rha2VzIGZvciBzdGF0ICAgIAogICAgICBiYWxhbmNlc1tfdG9dICs9IGFkZGVkX2JvbnVzX3N0YWtlczsgLy8gdHJhbnNmZXIgYm9udXMgU3Rha2VzCiAgICAgIGRpc3RyaWJ1dGVkQm9udXNTdGFrZXMgKz0gYWRkZWRfYm9udXNfc3Rha2VzOyAvLyBzYXZlIGJvbnVzIFN0YWtlcyBkaXN0cmlidXRpb24KICAgICAgdG90YWxTdXBwbHkgKz0gYWRkZWRfYm9udXNfc3Rha2VzOyAvLyBpbmNyZWFzZSB0b3RhbFN1cHBseQogICAgICBCb251c0Rpc3RyaWJ1dGVkKF90bywgYWRkZWRfYm9udXNfc3Rha2VzLCBzYWxlU3RhdFtfdG9dLmd1aWRlLCBhZGRlZF9wb3RlbnRpYWxfcmV3YXJkKTsgICAgICAgICAgCiAgICB9CiAgLyoqCiAgICogQGRldiBHZXQgY3VycmVudCBmaW5hbmNlIHBlcmlvZCBudW1iZXIKICAgKiBAcmV0dXJuIGN1cnJlbnQgZmluYW5jZSBwZXJpb2QgbnVtYmVyICAgICAgICAKICAgKi8gICAgCiAgICBmdW5jdGlvbiBjdXJyZW50RmluYW5jZVBlcmlvZCgpIGludGVybmFsIHZpZXcgcmV0dXJucyh1aW50OCkgewogICAgICB1aW50OCBjdXJyZW50X2ZpbmFuY2VfcGVyaW9kID0gMDsKICAgICAgZm9yKHVpbnQ4IGk9MDsgaSA8PSBmaW5hbmNlUGVyaW9kc0NvdW50OyBpKyspIHsKICAgICAgICBjdXJyZW50X2ZpbmFuY2VfcGVyaW9kID0gaTsKICAgICAgICBpZihub3c8ZmluYW5jZVBlcmlvZHNUaW1lc3RhbXBzW2ldKSB7ICAgICAgICAgIAogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBjdXJyZW50X2ZpbmFuY2VfcGVyaW9kOyAgICAgIAogICAgfQogIC8qKgogICAqIEBkZXYgU2hvdyBob3cgbXVjaCB3ZWkgY2FuIHdpdGhkcmF3IEludmVzdG1lbnQgR3VpZGUKICAgKiBAcGFyYW0gX2d1aWRlIGFkZHJlc3Mgb2YgcmVnaXN0ZXJlZCBndWlkZSAKICAgKiBAcmV0dXJuIHdlaSBxdWFudGl0eSAgICAgICAgCiAgICovICAgICAKICAgIGZ1bmN0aW9uIGd1aWRlUmV3YXJkVG9XaXRoZHJhdyhhZGRyZXNzIF9ndWlkZSkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICAgIC8vIHJld2FyZCB0byB3aXRoZHJhdyBkZXBlbmRzIG9uIGN1cnJlbnQgZmluYW5jZSBwZXJpb2QgYW5kIGRvIG5vdCBpbmNsdWRlIHBvdGVudGlhbGx5IHdpdGhkcmF3IGFtb3VudCBvZiBpbnZlc3RtZW50CiAgICAgIHJldHVybiAoZ3VpZGVzU3RhdFtfZ3VpZGVdLmFjY3VtdWxhdGVkUG90ZW50aWFsUmV3YXJkKihjdXJyZW50RmluYW5jZVBlcmlvZCgpKzEpKS8oZmluYW5jZVBlcmlvZHNDb3VudCsxKSArIGd1aWRlc1N0YXRbX2d1aWRlXS5yZXdhcmRUb1dpdGhkcmF3IC0gZ3VpZGVzU3RhdFtfZ3VpZGVdLnBlcmlvZGljYWxseVdpdGhkcmF3blJld2FyZDsgIAogICAgfSAgCiAgCiAgLyoKICAgIHdlaUZvclN0YWtlICYgc3Rha2VGb3JXZWkgZnVuY3Rpb25zIHNvbWV0aW1lcyBzaG93IG5vdCBjb3JyZWN0IHRyYW5zbGF0ZWQgdmFsdWUgZnJvbSBkYXBwIGludGVyZmFjZSAodmlldykgCiAgICBiZWNhdXNlIGxhc3RTdGFrZVByaWNlVVNDZW50cyBzb21ldGltZXMgdGVtcG9yYXJ5IG91dGRhdGVkIChpbiB2aWV3IG1vZGUpCiAgICBidXQgaXQgZG9lc24ndCBtZWFuIHRoYXQgZXhlY3V0aW9uIGl0c2VsZiBpcyBub3QgY29ycmVjdCAgCiAgKi8gIAogIAogIC8qKgogICAqIEBkZXYgVHJhbnNsYXRlIHdlaSB0byBTdGFrZXMKICAgKiBAcGFyYW0gaW5wdXRfd2VpIGlzIHdlaSB0byB0cmFuc2xhdGUgaW50byBzdGFrZXMsIAogICAqIEByZXR1cm4gU3Rha2VzIHF1YW50aXR5ICAgICAgICAKICAgKi8gCiAgICBmdW5jdGlvbiBzdGFrZUZvcldlaSh1aW50IGlucHV0X3dlaSkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICAgIHJldHVybiAoKGlucHV0X3dlaSp1c2RQZXJFdGhlcioxMDApLzEgZXRoZXIpL2xhc3RTdGFrZVByaWNlVVNDZW50czsgICAgCiAgICB9ICAKICAvKioKICAgKiBAZGV2IFRyYW5zbGF0ZSBTdGFrZXMgdG8gd2VpCiAgICogQHBhcmFtIGlucHV0X3N0YWtlIGlzIHN0YWtlcyB0byB0cmFuc2xhdGUgaW50byB3ZWkKICAgKiBAcmV0dXJuIHdlaSBxdWFudGl0eSAgICAgICAgCiAgICovIAogICAgZnVuY3Rpb24gd2VpRm9yU3Rha2UodWludCBpbnB1dF9zdGFrZSkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICAgIHJldHVybiAoaW5wdXRfc3Rha2UqbGFzdFN0YWtlUHJpY2VVU0NlbnRzKjEgZXRoZXIpLyh1c2RQZXJFdGhlcioxMDApOyAgICAKICAgIH0gCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB3ZWkgZnJvbSB0aGlzIGNvbnRyYWN0IHRvIHBvb2wgd2FsbGV0IHBhcnRpYWxseSBvbmx5LCAKICAgKiAgICAgIDEpIGZvciBmdW5kaW5nIHByb21vdGlvbiBvZiBTdGFrZXMgc2FsZSAgIAogICAqICAgICAgMikgYWNjb3JkaW5nIHRvIHNoYXJlIChmaW5hbmNlX3BlcmlvZHNfbGFzdCArIGN1cnJlbnRfZmluYW5jZV9wZXJpb2QpIC8gYnVzaW5lc3NfcGxhbm5lZF9wZXJpb2QKICAgKi8gICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvUG9vbCgpIHB1YmxpYyBvbmx5T3duZXIgeyAgICAgIAogICAgICB1aW50IG1heF9hdmFpbGFibGU7IC8vIG1heF9hdmFpbGFibGUgZnVuZHMgZm9yIHRyYW5zZmVyaW5nIHRvIHBvb2wgICAgCiAgICAgIHVpbnQgYW1vdW50VG9UcmFuc2ZlcjsgLy8gYW1vdW50IHRvIHRyYW5zZmVyIHRvIHBvb2wKICAgICAgICAvLyBzZWFyY2ggZW5kIHRpbWVzdGFtcCBvZiBjdXJyZW50IGZpbmFuY2lhbCBwZXJpb2QKICAgICAgICBmb3IodWludDggaT0wOyBpIDw9IGZpbmFuY2VQZXJpb2RzQ291bnQ7IGkrKykgewogICAgICAgICAgLy8gZm91bmQgZW5kIHRpbWVzdGFtcCBvZiBjdXJyZW50IGZpbmFuY2lhbCBwZXJpb2QgT1Igbm93IGlzIGxhdGVyIHRoZW4gYnVzaW5lc3MgcGxhbm5lZCBlbmQgZGF0ZSAodHJhbnNmZXIgd2VpIHJlbW5hbnQpCiAgICAgICAgICBpZihub3cgPCBmaW5hbmNlUGVyaW9kc1RpbWVzdGFtcHNbaV0gfHwgKGkgPT0gZmluYW5jZVBlcmlvZHNDb3VudCAmJiBub3cgPiBmaW5hbmNlUGVyaW9kc1RpbWVzdGFtcHNbaV0pKSB7ICAgCiAgICAgICAgICAgIC8vIGF2YWlhbGJlIG9ubHkgcGFydCBvZiB0b3RhbCB2YWx1ZSBvZiB0b3RhbCBpbnZlc3RlZCBmdW5kcyB3aXRoIHN1YnN0cmFjdGVkIHRvdGFsIGFsbG93ZWQgYW1vdW50IHRyYW5zZmVyZWQKICAgICAgICAgICAgbWF4X2F2YWlsYWJsZSA9ICgoaSsxKSoodG90YWxJbnZlc3RlZCt0b3RhbFdpdGhkcmF3bi1hbGxvd2VkQW1vdW50VHJhbnNmZXJlZFRvUG9vbFRvdGFsKSkvKGZpbmFuY2VQZXJpb2RzQ291bnQrMSk7IAogICAgICAgICAgICAvLyBub3QgYWxsIG1heF9hdmFpbGFibGUgZnVuZHMgYXJlIHRyYW5zZmVyZWQgYXQgdGhlIG1vbWVudCBPUiB3ZSBoYXZlIGFsbG93ZWQgYW1vdW50IHRvIHRyYW5zZmVyCiAgICAgICAgICAgIGlmKG1heF9hdmFpbGFibGUgPiB0cmFuc2ZlcmVkVG9Qb29sLWFsbG93ZWRBbW91bnRUcmFuc2ZlcmVkVG9Qb29sVG90YWwgfHwgYWxsb3dlZEFtb3VudFRvVHJhbnNmZXJUb1Bvb2wgPiAwKSB7CiAgICAgICAgICAgICAgaWYoYWxsb3dlZEFtb3VudFRvVHJhbnNmZXJUb1Bvb2wgPiAwKSB7IC8vIHdlIGhhdmUgYWxsb3dlZCBieSBJbnZlc3RvciAocmVqZWN0ZWQgdG8gd2l0aGRyYXcpIGFtb3VudAogICAgICAgICAgICAgICAgYW1vdW50VG9UcmFuc2ZlciA9IGFsbG93ZWRBbW91bnRUb1RyYW5zZmVyVG9Qb29sOyAvLyB0byB0cmFuc2ZlciB0aGlzIGFsbG93ZWQgYW1vdW50IAogICAgICAgICAgICAgICAgYWxsb3dlZEFtb3VudFRyYW5zZmVyZWRUb1Bvb2xUb3RhbCArPSBhbGxvd2VkQW1vdW50VG9UcmFuc2ZlclRvUG9vbDsgLy8gYWRkIGFsbG93ZWQgYW1vdW50IHRvIHRvdGFsIGFsbG93ZWQgYW1vdW50CiAgICAgICAgICAgICAgICBhbGxvd2VkQW1vdW50VG9UcmFuc2ZlclRvUG9vbCA9IDA7ICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFtb3VudFRvVHJhbnNmZXIgPSBtYXhfYXZhaWxhYmxlLXRyYW5zZmVyZWRUb1Bvb2w7IC8vIG9ubHkgcmVtYWluZWQgYW1vdW50IGlzIGF2YWlsYWJsZSB0byB0cmFuc2ZlcgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZihhbW91bnRUb1RyYW5zZmVyID4gdGhpcy5iYWxhbmNlKSB7IC8vIHJlbWFpbmVkIGFtb3VudCB0byB0cmFuc2ZlciBtb3JlIHRoZW4gY3VycmVudCBiYWxhbmNlCiAgICAgICAgICAgICAgICBhbW91bnRUb1RyYW5zZmVyID0gdGhpcy5iYWxhbmNlOyAvLyBjb3JyZWN0IGFtb3VudCB0byB0cmFuc2ZlciAgCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRyYW5zZmVyZWRUb1Bvb2wgKz0gYW1vdW50VG9UcmFuc2ZlcjsgLy8gaW5jcmVhc2UgdHJhbnNmZXJlZCB0byBwb29sIGFtb3VudCAgICAgICAgICAgICAgIAogICAgICAgICAgICAgIHBvb2wudHJhbnNmZXIoYW1vdW50VG9UcmFuc2Zlcik7ICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgVHJhbnNmZXJlZFRvUG9vbChhbW91bnRUb1RyYW5zZmVyLCBpKzEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFsbG93ZWRBbW91bnRUb1RyYW5zZmVyVG9Qb29sPTA7CiAgICAgICAgICAgIGJyZWFrOyAgICAKICAgICAgICAgIH0KICAgICAgICB9ICAgICAKICAgIH0gIAogIC8qKgogICAqIEBkZXYgSW52ZXN0b3IgY2FuIHdpdGhkcmF3IHBhcnQgb2YgaGlzL2hlciBpbnZlc3RtZW50LgogICAqICAgICAgQSBzaXplIG9mIHRoaXMgcGFydCBkZXBlbmRzIG9uIGhvdyBtYW55IGZpbmFuY2lhbCBwZXJpb2RzIGxhc3QgYW5kIGhvdyBtYW55IHJlbWFpbmVkLgogICAqICAgICAgSW52ZXN0b3IgZ2l2ZXMgYmFjayBhbGwgc3Rha2VzIHdoaWNoIGhlL3NoZSBnb3QgZm9yIGhpcy9oZXIgaW52ZXN0bWVudC4gICAgIAogICAqLyAgICAgICAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3SW52ZXN0bWVudCgpIHB1YmxpYyB7CiAgICAgIHJlcXVpcmUoIXJlamVjdGVkSW52ZXN0bWVudFdpdGhkcmF3YWxzW21zZy5zZW5kZXJdKTsgLy8gdGhpcyBJbnZlc3RvciBub3QgcmVqZWN0ZWQgdG8gd2l0aGRyYXcgdGhlaXIgaW52ZXN0bWVudAogICAgICByZXF1aXJlKHNhbGVTdGF0W21zZy5zZW5kZXJdLnN0YWtlcyA+IDApOwogICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IHNhbGVTdGF0W21zZy5zZW5kZXJdLnN0YWtlcytzYWxlU3RhdFttc2cuc2VuZGVyXS5ib251c1N0YWtlcyk7IC8vIEludmVzdG9yIGhhcyBuZWVkZWQgc3Rha2VzIHRvIHJldHVybgogICAgICB1aW50IHJlbWFpbmVkOyAvLyBhbGwgaW52ZXN0bWVudCB3aGljaCBhcmUgYXZhaWxhYmxlIHRvIHdpdGhkcmF3IGJ5IGFsbCBJbnZlc3RvcnMKICAgICAgdWludCB0b193aXRoZHJhdzsgLy8gYXZhaWxhYmxlIGZ1bmRzIHRvIHdpdGhkcmF3IGZvciB0aGlzIHBhcnRpY3VsYXIgSW52ZXN0b3IKICAgICAgZm9yKHVpbnQ4IGk9MDsgaSA8IGZpbmFuY2VQZXJpb2RzQ291bnQ7IGkrKykgeyAvLyBsYXN0IGZpbi4gcGVyaW9kIGlzIG5vdCBhdmFpbGFibGUKICAgICAgICBpZihub3c8ZmluYW5jZVBlcmlvZHNUaW1lc3RhbXBzW2ldKSB7IC8vIGZpbmQgZW5kIHRpbWVzdGFtcCBvZiBjdXJyZW50IGZpbmFuY2lhbCBwZXJpb2QgICAgICAgICAgCiAgICAgICAgICByZW1haW5lZCA9IHRvdGFsSW52ZXN0ZWQgLSAoKGkrMSkqdG90YWxJbnZlc3RlZCkvKGZpbmFuY2VQZXJpb2RzQ291bnQrMSk7IC8vIHJlbWFpbmVkIGludmVzdG1lbnQgdG8gd2l0aGRyYXcgYnkgYWxsIEludmVzdG9ycyAKICAgICAgICAgIHRvX3dpdGhkcmF3ID0gKHNhbGVTdGF0W21zZy5zZW5kZXJdLmludmVzdGVkKnJlbWFpbmVkKS90b3RhbEludmVzdGVkOyAvLyBpbnZlc3RtZW50IHRvIHdpdGhkcmF3IGJ5IHRoaXMgSW52ZXN0b3IKICAgICAgICAgIHVpbnQgc2FsZV9zdGFrZXNfdG9fYnVybiA9IHNhbGVTdGF0W21zZy5zZW5kZXJdLnN0YWtlcytzYWxlU3RhdFttc2cuc2VuZGVyXS5ib251c1N0YWtlczsgLy8gcmV0dXJuaW5nIGFsbCBTdGFrZXMgc2F2ZWQgaW4gc2FsZVN0YXRbbXNnLnNlbmRlcl0KICAgICAgICAgIHVpbnQgdGVhbV9zdGFrZXNfdG9fYnVybiA9IChzYWxlU3RhdFttc2cuc2VuZGVyXS5zdGFrZXMqdGVhbVNoYXJlKS9zYWxlU2hhcmU7IC8vIGFwcHJvcHJpYXRlIGlzc3VlZCB0ZWFtIFN0YWtlcyBhcmUgYWxzbyBidXJuZWQKICAgICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5zdWIodGVhbV9zdGFrZXNfdG9fYnVybik7IC8vIGJ1cm4gYXBwcm9wcmlhdGUgdGVhbSBTdGFrZXMKICAgICAgICAgIGRpc3RyaWJ1dGVkVGVhbVN0YWtlcyAtPSB0ZWFtX3N0YWtlc190b19idXJuOyAvLyByZW1vdmUgdGVhbSBTdGFrZXMgZnJvbSBkaXN0cmlidXRpb24gICAgICAgICAKICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKHNhbGVfc3Rha2VzX3RvX2J1cm4pOyAvLyBidXJuIHN0YWtlcyBnb3QgZm9yIGludmVzdGVkIHdlaQogICAgICAgICAgdG90YWxJbnZlc3RlZCA9IHRvdGFsSW52ZXN0ZWQuc3ViKHRvX3dpdGhkcmF3KTsgLy8gZGVjcmVhc2UgaW52ZXN0ZWQgdG90YWwgdmFsdWUKICAgICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKHNhbGVfc3Rha2VzX3RvX2J1cm4pLnN1Yih0ZWFtX3N0YWtlc190b19idXJuKTsgLy8gdG90YWxTdXBwbHkgaXMgZGVjcmVhc2VkCiAgICAgICAgICBkaXN0cmlidXRlZFNhbGVTdGFrZXMgLT0gc2FsZVN0YXRbbXNnLnNlbmRlcl0uc3Rha2VzOwogICAgICAgICAgaWYoc2FsZVN0YXRbbXNnLnNlbmRlcl0uZ3VpZGUgIT0gYWRkcmVzcygwKSkgeyAvLyB3ZSBoYXZlIEd1aWRlIGFuZCBib251c1N0YWtlcwogICAgICAgICAgICAvLyBwb3RlbnRpYWwgcmV3YXJkIGZvciB0aGUgR3VpZGUgaXMgZGVjcmVhc2VkIHByb3BvcnRpb25hbGx5CiAgICAgICAgICAgIGd1aWRlc1N0YXRbc2FsZVN0YXRbbXNnLnNlbmRlcl0uZ3VpZGVdLmFjY3VtdWxhdGVkUG90ZW50aWFsUmV3YXJkIC09IChzYWxlU3RhdFttc2cuc2VuZGVyXS5ndWlkZVJld2FyZCAtICgoaSsxKSpzYWxlU3RhdFttc2cuc2VuZGVyXS5ndWlkZVJld2FyZCkvKGZpbmFuY2VQZXJpb2RzQ291bnQrMSkpOyAKICAgICAgICAgICAgZGlzdHJpYnV0ZWRCb251c1N0YWtlcyAtPSBzYWxlU3RhdFttc2cuc2VuZGVyXS5ib251c1N0YWtlczsKICAgICAgICAgICAgc2FsZVN0YXRbbXNnLnNlbmRlcl0uYm9udXNTdGFrZXMgPSAwOwogICAgICAgICAgICBzYWxlU3RhdFttc2cuc2VuZGVyXS5ndWlkZVJld2FyZCA9IDA7ICAgICAgICAgIAogICAgICAgICAgfQogICAgICAgICAgc2FsZVN0YXRbbXNnLnNlbmRlcl0uc3Rha2VzID0gMDsgLy8gbnVsbGlmeSBTdGFrZXMgcmVjaWV2ZWQgdmFsdWUgICAgICAgICAgCiAgICAgICAgICBzYWxlU3RhdFttc2cuc2VuZGVyXS5pbnZlc3RlZCA9IDA7IC8vIG51bGxpZnkgd2VpIGludmVzdGVkIHZhbHVlCiAgICAgICAgICB0b3RhbFdpdGhkcmF3biArPSB0b193aXRoZHJhdzsKICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodG9fd2l0aGRyYXcpOyAvLyB3aXRkcmF3IGludmVzdG1lbnQKICAgICAgICAgIEludmVzdG1lbnRXaXRoZHJhd24obXNnLnNlbmRlciwgdG9fd2l0aGRyYXcsIHNhbGVfc3Rha2VzX3RvX2J1cm4sIGZpbmFuY2VQZXJpb2RzQ291bnQtaSk7ICAgICAgICAgIAogICAgICAgICAgYnJlYWs7ICAKICAgICAgICB9CiAgICAgIH0gICAgICAKICAgIH0KICAvKioKICAgKiBAZGV2IEludmVzdG9yIHJlamVjdHMgd2l0aGRyYXcgaW52ZXN0bWVudC4gVGhpcyBsZXRzIEludmVzdG1lbnQgR3VpZGUgd2l0aGRyYXcgYWxsIGhpcy9oZXIgcmV3YXJkIHJlbGF0ZWQgdG8gdGhpcyBJbnZlc3RvciAgIAogICAqLyAgICAgCiAgICBmdW5jdGlvbiByZWplY3RJbnZlc3RtZW50V2l0aGRyYXdhbCgpIHB1YmxpYyB7CiAgICAgIHJlamVjdGVkSW52ZXN0bWVudFdpdGhkcmF3YWxzW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgYWRkcmVzcyBndWlkZSA9IHNhbGVTdGF0W21zZy5zZW5kZXJdLmd1aWRlOwogICAgICBpZihndWlkZSAhPSBhZGRyZXNzKDApKSB7IC8vIEludi4gR3VpZGUgZXhpc3RzCiAgICAgICAgaWYoc2FsZVN0YXRbbXNnLnNlbmRlcl0uZ3VpZGVSZXdhcmQgPj0gZ3VpZGVzU3RhdFtndWlkZV0ucGVyaW9kaWNhbGx5V2l0aGRyYXduUmV3YXJkKSB7IC8vIGFscmVhZHkgd2l0aGRyYXdlZCBsZXNzIHRoZW4gdG8gd2l0aGRyYXcgZm9yIHRoaXMgSW52ZXN0b3IKICAgICAgICAgIHVpbnQgcmVtYWluZWRSZXdhcmRUb1dpdGhkcmF3ID0gc2FsZVN0YXRbbXNnLnNlbmRlcl0uZ3VpZGVSZXdhcmQtZ3VpZGVzU3RhdFtndWlkZV0ucGVyaW9kaWNhbGx5V2l0aGRyYXduUmV3YXJkOwogICAgICAgICAgZ3VpZGVzU3RhdFtndWlkZV0ucGVyaW9kaWNhbGx5V2l0aGRyYXduUmV3YXJkID0gMDsgLy8gd2l0aGRyYXduIHJld2FyZCBpcyBjb3VudGVkIGFzIHdpdGhkcmF3biBvZiB0aGlzIEludmVzdG9yIHJld2FyZCAKICAgICAgICAgIGlmKGd1aWRlc1N0YXRbZ3VpZGVdLmFjY3VtdWxhdGVkUG90ZW50aWFsUmV3YXJkID49IHJlbWFpbmVkUmV3YXJkVG9XaXRoZHJhdykgeyAvLyB3ZSBoYXZlIGVub3VnaCBwb3RlbnRpYWwgcmV3YXJkCiAgICAgICAgICAgIGd1aWRlc1N0YXRbZ3VpZGVdLmFjY3VtdWxhdGVkUG90ZW50aWFsUmV3YXJkIC09IHJlbWFpbmVkUmV3YXJkVG9XaXRoZHJhdzsgLy8gZGVjcmVhc2UgcG90ZW50aWFsIHJld2FyZAogICAgICAgICAgICBndWlkZXNTdGF0W2d1aWRlXS5yZXdhcmRUb1dpdGhkcmF3ICs9IHJlbWFpbmVkUmV3YXJkVG9XaXRoZHJhdzsgIC8vIGluY3JlYXNlIHRvdGFsIGFtb3VudCB0byB3aXRoZHJhdyByaWdodCBub3cKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGd1aWRlc1N0YXRbZ3VpZGVdLmFjY3VtdWxhdGVkUG90ZW50aWFsUmV3YXJkID0gMDsgLy8gc29tZXRoaW5nIHdyb25nIHNvIG51bGxpZnkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gc3Vic3RyYWN0IGN1cnJlbnQgSW52ZXN0b3IncyByZXdhcmQgZnJvbSBwZXJpb2RpY2FsbHkgd2l0aGRyYXduIHJld2FyZCB0byByZW1vdmUgaXQgZnJvbSB3aXRoZHJhd25lZAogICAgICAgICAgZ3VpZGVzU3RhdFtndWlkZV0ucGVyaW9kaWNhbGx5V2l0aGRyYXduUmV3YXJkIC09IHNhbGVTdGF0W21zZy5zZW5kZXJdLmd1aWRlUmV3YXJkOwogICAgICAgICAgLy8gd2UgaGF2ZSBlbm91Z2ggcG90ZW50aWFsIHJld2FyZCAtIGFsbCBvayAKICAgICAgICAgIGlmKGd1aWRlc1N0YXRbZ3VpZGVdLmFjY3VtdWxhdGVkUG90ZW50aWFsUmV3YXJkID49IHNhbGVTdGF0W21zZy5zZW5kZXJdLmd1aWRlUmV3YXJkKSB7CiAgICAgICAgICAgIC8vIHdlIGRvIG5vdCBjb3VudCB0aGlzIEludmVzdG9yIGd1aWRlUmV3YXJkIGluIHBvdGVudGlhbCByZXdhcmQKICAgICAgICAgICAgZ3VpZGVzU3RhdFtndWlkZV0uYWNjdW11bGF0ZWRQb3RlbnRpYWxSZXdhcmQgLT0gc2FsZVN0YXRbbXNnLnNlbmRlcl0uZ3VpZGVSZXdhcmQ7CiAgICAgICAgICAgIGd1aWRlc1N0YXRbZ3VpZGVdLnJld2FyZFRvV2l0aGRyYXcgKz0gc2FsZVN0YXRbbXNnLnNlbmRlcl0uZ3VpZGVSZXdhcmQ7ICAvLyBpbmNyZWFzZSB0b3RhbCBhbW91bnQgdG8gd2l0aGRyYXcgcmlnaHQgbm93ICAKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGd1aWRlc1N0YXRbZ3VpZGVdLmFjY3VtdWxhdGVkUG90ZW50aWFsUmV3YXJkID0gMDsgLy8gc29tZXRoaW5nIHdyb25nIHNvIG51bGxpZnkgIAogICAgICAgICAgfSAgIAogICAgICAgIH0KICAgICAgfQogICAgICBhbGxvd2VkQW1vdW50VG9UcmFuc2ZlclRvUG9vbCArPSBzYWxlU3RhdFttc2cuc2VuZGVyXS5pbnZlc3RlZDsKICAgIH0KICAKICAvKioKICAgKiBAZGV2IERpc3RyaWJ1dGUgYm91bnR5IHJld2FyZHMgZm9yIGJvdW50eSB0YXNrcwogICAqIEBwYXJhbSBfdG8gaXMgYWRkcmVzcyBvZiBib3VudHkgaHVudGVyCiAgICogQHBhcmFtIF9zdGFrZXMgaXMgcXVhbnRpdHkgb2YgU3Rha2VzIHRyYW5zZmVyZWQgICAgICAgCiAgICovICAgICAKICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGVCb3VudHkoYWRkcmVzcyBfdG8sIHVpbnQgX3N0YWtlcykgcHVibGljIG9ubHlPd25lciB7CiAgICAgIHJlcXVpcmUoZGlzdHJpYnV0ZWRCb3VudHlTdGFrZXMrX3N0YWtlcyA8PSBib3VudHlDYXApOyAvLyBubyBtb3JlIHRoZW4gbWF4aW11bSBjYXBhY2l0eSBjYW4gYmUgZGlzdHJpYnV0ZWQKICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9zdGFrZXMpOyAvLyB0bwogICAgICB0b3RhbFN1cHBseSArPSBfc3Rha2VzOyAKICAgICAgZGlzdHJpYnV0ZWRCb3VudHlTdGFrZXMgKz0gX3N0YWtlczsgLy8gYWRkaW5nIHRvIHRvdGFsIGJvdW50eSBkaXN0cmlidXRlZAogICAgICBCb3VudHlEaXN0cmlidXRlZChfdG8sIF9zdGFrZXMpOyAgICAKICAgIH0gIAogIC8qKgogICAqIEBkZXYgVW5mcmVlemUgdGVhbSBTdGFrZXMuIE9ubHkgYWZ0ZXIgZXhjZXNzZWQgU3Rha2VzIGhhdmUgYnVybmVkLgogICAqLyAgICAgIAogICAgZnVuY3Rpb24gdW5GcmVlemUoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgLy8gb25seSBhZnRlciBwbGFubmVkIHBlcmlvZAogICAgICBpZihub3cgPiBidXNpbmVzc1BsYW5uZWRQZXJpb2RFbmRUaW1lc3RhbXApIHsKICAgICAgICB0ZWFtU3Rha2VzRnJvemVuID0gZmFsc2U7IC8vIG1ha2UgdGVhbSBzdGFrZXMgYXZhaWxhYmxlIGZvciB0cmFuc2ZlcmluZwogICAgICB9ICAKICAgIH0KfQ=='.
	

]
