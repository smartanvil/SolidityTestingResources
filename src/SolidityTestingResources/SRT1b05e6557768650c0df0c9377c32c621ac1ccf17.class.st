Class {
	#name : #SRT1b05e6557768650c0df0c9377c32c621ac1ccf17,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1b05e6557768650c0df0c9377c32c621ac1ccf17 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBORlRIb3VzZUdhbWUgewogICAgc3RydWN0IExpc3RpbmcgewogICAgICAgIHVpbnQgc3RhcnRQcmljZTsKICAgICAgICB1aW50IGVuZFByaWNlOwogICAgICAgIHVpbnQgc3RhcnRlZEF0OwogICAgICAgIHVpbnQgZW5kc0F0OwogICAgICAgIGJvb2wgaXNBdmFpbGFibGU7CiAgICB9CgogICAgZW51bSBIb3VzZUNsYXNzZXMgewogICAgICAgIFNoYWNrLAogICAgICAgIEFwYXJ0bWVudCwKICAgICAgICBCdW5nYWxvdywKICAgICAgICBIb3VzZSwKICAgICAgICBNYW5zaW9uLAogICAgICAgIEVzdGF0ZSwKICAgICAgICBQZW50aG91c2UsCiAgICAgICAgQXNoZXMKICAgIH0KCiAgICBzdHJ1Y3QgSG91c2UgewogICAgICAgIGFkZHJlc3Mgb3duZXI7CiAgICAgICAgdWludCBzdHJlZXROdW1iZXI7CiAgICAgICAgc3RyaW5nIHN0cmVldE5hbWU7CiAgICAgICAgc3RyaW5nIHN0cmVldFR5cGU7CiAgICAgICAgc3RyaW5nIGNvbG9yQ29kZTsKICAgICAgICB1aW50IG51bUJlZHJvb21zOwogICAgICAgIHVpbnQgbnVtQmF0aHJvb21zOwogICAgICAgIHVpbnQgc3F1YXJlRm9vdGFnZTsKICAgICAgICB1aW50IHByb3BlcnR5VmFsdWU7CiAgICAgICAgdWludCBzdGF0dXNWYWx1ZTsKICAgICAgICBIb3VzZUNsYXNzZXMgY2xhc3M7CiAgICAgICAgdWludCBjbGFzc1ZhcmlhbnQ7CiAgICB9CgogICAgc3RydWN0IFRyYWl0IHsKICAgICAgICBzdHJpbmcgbmFtZTsKICAgICAgICBib29sIGlzTmVnYXRpdmU7CiAgICB9CgogICAgYWRkcmVzcyBwdWJsaWMgZ2FtZU93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgZ2FtZURldmVsb3BlcjsKCiAgICB1aW50IHB1YmxpYyBwcmVzYWxlU2FsZXM7CiAgICB1aW50IHB1YmxpYyBwcmVzYWxlTGltaXQgPSA1MDAwOwogICAgYm9vbCBwdWJsaWMgcHJlc2FsZU9uZ29pbmcgPSB0cnVlOwogICAgdWludCBwcmVzYWxlRGV2RmVlID0gMjA7CiAgICB1aW50IHByZXNhbGVQcm9jZWVkczsKICAgIHVpbnQgcHJlc2FsZURldlBheW91dDsKCiAgICB1aW50IHB1YmxpYyBidWlsZFByaWNlID0gMTUwIGZpbm5leTsKICAgIHVpbnQgcHVibGljIGFkZGl0aW9uUHJpY2UgPSAxMDAgZmlubmV5OwogICAgdWludCBwdWJsaWMgc2FsZUZlZSA9IDI7IC8vIHBlcmNlbnQKCiAgICBIb3VzZVtdIHB1YmxpYyBob3VzZXM7CiAgICBUcmFpdFtdIHB1YmxpYyB0cmFpdHM7CgogICAgbWFwcGluZyAodWludCA9PiB1aW50WzRdKSBwdWJsaWMgaG91c2VUcmFpdHM7CiAgICBtYXBwaW5nICh1aW50ID0+IExpc3RpbmcpIHB1YmxpYyBsaXN0aW5nczsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBvd25lZEhvdXNlczsKICAgIG1hcHBpbmcgKHVpbnQgPT4gdWludCkgcHVibGljIGNsYXNzVmFyaWFudHM7CiAgICBtYXBwaW5nICh1aW50ID0+IGFkZHJlc3MpIGFwcHJvdmVkVHJhbnNmZXJzOwoKICAgIHN0cmluZ1tdIGNvbG9ycyA9IFsiZTk2YjYzIl07CiAgICBzdHJpbmdbXSBzdHJlZXROYW1lcyA9IFsiTWFpbiJdOwogICAgc3RyaW5nW10gc3RyZWV0VHlwZXMgPSBbIlN0cmVldCJdOwoKICAgIG1vZGlmaWVyIG9ubHlCeShhZGRyZXNzIF9hdXRob3JpemVkKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IF9hdXRob3JpemVkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlCeU93bmVyT3JEZXYgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBnYW1lT3duZXIgfHwgbXNnLnNlbmRlciA9PSBnYW1lRGV2ZWxvcGVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlCeUFzc2V0T3duZXIodWludCBfdG9rZW5JZCkgewogICAgICAgIHJlcXVpcmUob3duZXJPZihfdG9rZW5JZCkgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5RHVyaW5nUHJlc2FsZSB7CiAgICAgICAgcmVxdWlyZShwcmVzYWxlT25nb2luZyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBORlRIb3VzZUdhbWUoKSBwdWJsaWMgewogICAgICAgIGdhbWVPd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgZ2FtZURldmVsb3BlciA9IG1zZy5zZW5kZXI7CgogICAgICAgIHByZXNhbGVPbmdvaW5nID0gdHJ1ZTsKICAgICAgICBwcmVzYWxlTGltaXQgPSA1MDAwOwogICAgICAgIHByZXNhbGVEZXZGZWUgPSAyMDsKCiAgICAgICAgYnVpbGRQcmljZSA9IDE1MCBmaW5uZXk7CiAgICAgICAgYWRkaXRpb25QcmljZSA9IDEwIGZpbm5leTsKICAgICAgICBzYWxlRmVlID0gMjsKICAgIH0KCiAgICAvKiBFUkMtMjAgQ29tcGF0aWJpbGl0eSAqLwogICAgZnVuY3Rpb24gbmFtZSgpIHB1cmUgcHVibGljIHJldHVybnMgKHN0cmluZykgewogICAgICAgIHJldHVybiAiU3ViUHJpbWVDcnlwdG8iOwogICAgfQoKICAgIGZ1bmN0aW9uIHN5bWJvbCgpIHB1cmUgcHVibGljIHJldHVybnMgKHN0cmluZykgewogICAgICAgcmV0dXJuICJIT1VTRSI7CiAgICB9CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGhvdXNlcy5sZW5ndGg7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBvd25lZEhvdXNlc1tfb3duZXJdOwogICAgfQoKICAgIC8qIEVSQy0yMCArIEVSQy03MjEgVG9rZW4gRXZlbnRzICovCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQgX251bVRva2Vucyk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX2FwcHJvdmVkLCB1aW50IF90b2tlbklkKTsKCiAgICAvKiBFUkMtNzIxIFRva2VuIE93bmVyc2hpcCAqLwogICAgZnVuY3Rpb24gb3duZXJPZih1aW50IF90b2tlbklkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBob3VzZXNbX3Rva2VuSWRdLm93bmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQgX3Rva2VuSWQpIG9ubHlCeUFzc2V0T3duZXIoX3Rva2VuSWQpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IF90byk7CiAgICAgICAgYXBwcm92ZWRUcmFuc2ZlcnNbX3Rva2VuSWRdID0gX3RvOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRUcmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgICBIb3VzZSBzdG9yYWdlIGhvdXNlID0gaG91c2VzW190b2tlbklkXTsKCiAgICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBob3VzZS5vd25lcjsKICAgICAgYWRkcmVzcyBuZXdPd25lciA9IF90bzsKCiAgICAgIG93bmVkSG91c2VzW29sZE93bmVyXS0tOwogICAgICBvd25lZEhvdXNlc1tuZXdPd25lcl0rKzsKICAgICAgaG91c2Uub3duZXIgPSBuZXdPd25lcjsKCiAgICAgIEFwcHJvdmFsKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwogICAgICBUcmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIDEpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludCBfdG9rZW5JZCkgcHVibGljIHsKICAgICAgICBIb3VzZSBzdG9yYWdlIGhvdXNlID0gaG91c2VzW190b2tlbklkXTsKCiAgICAgICAgYWRkcmVzcyBvbGRPd25lciA9IGhvdXNlLm93bmVyOwogICAgICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwoKICAgICAgICByZXF1aXJlKGFwcHJvdmVkVHJhbnNmZXJzW190b2tlbklkXSA9PSBuZXdPd25lcik7CgogICAgICAgIG93bmVkSG91c2VzW29sZE93bmVyXSAtPSAxOwogICAgICAgIG93bmVkSG91c2VzW25ld093bmVyXSArPSAxOwogICAgICAgIGhvdXNlLm93bmVyID0gbmV3T3duZXI7CgogICAgICAgIFRyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgMSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3Rva2VuSWQpIHB1YmxpYyB7CiAgICAgICAgSG91c2Ugc3RvcmFnZSBob3VzZSA9IGhvdXNlc1tfdG9rZW5JZF07CgogICAgICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBob3VzZS5vd25lcjsKICAgICAgICBhZGRyZXNzIG5ld093bmVyID0gX3RvOwoKICAgICAgICByZXF1aXJlKG9sZE93bmVyICE9IG5ld093bmVyKTsKICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAobXNnLnNlbmRlciA9PSBvbGRPd25lcikgfHwKICAgICAgICAgICAgKGFwcHJvdmVkVHJhbnNmZXJzW190b2tlbklkXSA9PSBuZXdPd25lcikKICAgICAgICApOwoKICAgICAgICBvd25lZEhvdXNlc1tvbGRPd25lcl0tLTsKICAgICAgICBvd25lZEhvdXNlc1tuZXdPd25lcl0rKzsKICAgICAgICBob3VzZS5vd25lciA9IG5ld093bmVyOwoKICAgICAgICBUcmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIDEpOwogICAgfQoKICAgIC8qIFRva2VuLVNwZWNpZmljIEV2ZW50cyAqLwogICAgZXZlbnQgTWludGVkKHVpbnQgX3Rva2VuSWQpOwogICAgZXZlbnQgVXBncmFkZWQodWludCBfdG9rZW5JZCk7CiAgICBldmVudCBEZXN0cm95ZWQodWludCBfdG9rZW5JZCk7CgogICAgLyogUHVibGljIEZ1bmN0aW9uYWxpdHkgKi8KICAgIGZ1bmN0aW9uIGJ1aWxkSG91c2UoKSBwYXlhYmxlIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgIG1zZy52YWx1ZSA+PSBidWlsZFByaWNlIHx8CiAgICAgICAgICBtc2cuc2VuZGVyID09IGdhbWVPd25lciB8fAogICAgICAgICAgbXNnLnNlbmRlciA9PSBnYW1lRGV2ZWxvcGVyCiAgICAgICAgKTsKCiAgICAgICAgaWYgKHByZXNhbGVPbmdvaW5nKSB7CiAgICAgICAgICBwcmVzYWxlU2FsZXMrKzsKICAgICAgICAgIHByZXNhbGVQcm9jZWVkcyArPSBtc2cudmFsdWU7CiAgICAgICAgfQoKICAgICAgICBnZW5lcmF0ZUhvdXNlKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1aWxkQWRkaXRpb24odWludCBfdG9rZW5JZCkgb25seUJ5QXNzZXRPd25lcihfdG9rZW5JZCkgcGF5YWJsZSBwdWJsaWMgewogICAgICAgIEhvdXNlIHN0b3JhZ2UgaG91c2UgPSBob3VzZXNbX3Rva2VuSWRdOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IGFkZGl0aW9uUHJpY2UpOwoKICAgICAgICBpZiAocHJlc2FsZU9uZ29pbmcpIHByZXNhbGVQcm9jZWVkcyArPSBtc2cudmFsdWU7CgogICAgICAgIGhvdXNlLm51bUJlZHJvb21zICs9IChtc2cudmFsdWUgLyBhZGRpdGlvblByaWNlKTsKICAgICAgICBwcm9jZXNzVXBncmFkZXMoaG91c2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1cm5Gb3JJbnN1cmFuY2UodWludCBfdG9rZW5JZCkgb25seUJ5QXNzZXRPd25lcihfdG9rZW5JZCkgcHVibGljIHsKICAgICAgICBIb3VzZSBzdG9yYWdlIGhvdXNlID0gaG91c2VzW190b2tlbklkXTsKICAgICAgICB1aW50IHJhbmQgPSBub3RSYW5kb21XaXRoU2VlZCgxMDAwLCBfdG9rZW5JZCk7CgogICAgICAgIC8vIDgwJSBjaGFuY2UgImNsYWltIiBpcyBpbnZlc3RpZ2F0ZWQKICAgICAgICBpZiAocmFuZCA+IDc5OSkgewogICAgICAgICAgICB1cGdyYWRlQXNzZXQoX3Rva2VuSWQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGludmVzdGlnYXRpb25zIHlpZWxkIGVxdWFsIGNoYW5jZSBvZiB1cGdyYWRlIG9yIHBlcm1hbmVudCBsb3NzCiAgICAgICAgICAgIGlmIChyYW5kID4gNDk5KSB7CiAgICAgICAgICAgICAgICB1cGdyYWRlQXNzZXQoX3Rva2VuSWQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaG91c2UuY2xhc3MgPSBIb3VzZUNsYXNzZXMuQXNoZXM7CiAgICAgICAgICAgICAgICBob3VzZS5zdGF0dXNWYWx1ZSA9IDA7CiAgICAgICAgICAgICAgICBob3VzZS5udW1CZWRyb29tcyA9IDA7CiAgICAgICAgICAgICAgICBob3VzZS5udW1CYXRocm9vbXMgPSAwOwogICAgICAgICAgICAgICAgaG91c2UucHJvcGVydHlWYWx1ZSA9IDA7CiAgICAgICAgICAgICAgICBEZXN0cm95ZWQoX3Rva2VuSWQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHB1cmNoYXNlQXNzZXQodWludCBfdG9rZW5JZCkgcGF5YWJsZSBwdWJsaWMgewogICAgICAgIExpc3Rpbmcgc3RvcmFnZSBsaXN0aW5nID0gbGlzdGluZ3NbX3Rva2VuSWRdOwoKICAgICAgICB1aW50IGN1cnJlbnRQcmljZSA9IGNhbGN1bGF0ZUN1cnJlbnRQcmljZShsaXN0aW5nKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBjdXJyZW50UHJpY2UpOwoKICAgICAgICByZXF1aXJlKGxpc3RpbmcuaXNBdmFpbGFibGUgJiYgbGlzdGluZy5lbmRzQXQgPiBub3cpOwogICAgICAgIGxpc3RpbmcuaXNBdmFpbGFibGUgPSBmYWxzZTsKCiAgICAgICAgaWYgKHByZXNhbGVPbmdvaW5nICYmICgrK3ByZXNhbGVTYWxlcyA+PSBwcmVzYWxlTGltaXQpKSB7CiAgICAgICAgICBwcmVzYWxlT25nb2luZyA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGhvdXNlc1tfdG9rZW5JZF0ub3duZXIgIT0gYWRkcmVzcyh0aGlzKSkgewogICAgICAgICAgICB1aW50IGZlZSA9IGN1cnJlbnRQcmljZSAvICgxMDAgLyBzYWxlRmVlKTsKICAgICAgICAgICAgdWludCBzZWxsZXJQcm9jZWVkcyA9IGN1cnJlbnRQcmljZSAtIGZlZTsKICAgICAgICAgICAgcHJlc2FsZVByb2NlZWRzICs9IChtc2cudmFsdWUgLSBzZWxsZXJQcm9jZWVkcyk7CiAgICAgICAgICAgIGhvdXNlc1tfdG9rZW5JZF0ub3duZXIudHJhbnNmZXIoc2VsbGVyUHJvY2VlZHMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHByZXNhbGVQcm9jZWVkcyArPSBtc2cudmFsdWU7CiAgICAgICAgfQoKICAgICAgICBhcHByb3ZlQW5kVHJhbnNmZXIobXNnLnNlbmRlciwgX3Rva2VuSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGxpc3RBc3NldCh1aW50IF90b2tlbklkLCB1aW50IF9zdGFydFByaWNlLCB1aW50IF9lbmRQcmljZSwgdWludCBfbnVtRGF5cykgb25seUJ5QXNzZXRPd25lcihfdG9rZW5JZCkgcHVibGljIHsKICAgICAgICBjcmVhdGVMaXN0aW5nKF90b2tlbklkLCBfc3RhcnRQcmljZSwgX2VuZFByaWNlLCBfbnVtRGF5cyk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlQXNzZXRMaXN0aW5nKHVpbnQgX3Rva2VuSWQpIHB1YmxpYyBvbmx5QnlBc3NldE93bmVyKF90b2tlbklkKSB7CiAgICAgICAgbGlzdGluZ3NbX3Rva2VuSWRdLmlzQXZhaWxhYmxlID0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SG91c2VUcmFpdHModWludCBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludFs0XSkgewogICAgICAgIHJldHVybiBob3VzZVRyYWl0c1tfdG9rZW5JZF07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VHJhaXRDb3VudCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdHJhaXRzLmxlbmd0aDsKICAgIH0KCiAgICAvKiBBZG1pbiBGdW5jdGlvbmFsaXR5ICovCiAgICBmdW5jdGlvbiBhZGROZXdDb2xvcihzdHJpbmcgX2NvbG9yQ29kZSkgcHVibGljIG9ubHlCeU93bmVyT3JEZXYgewogICAgICAgIGNvbG9yc1tjb2xvcnMubGVuZ3RoKytdID0gX2NvbG9yQ29kZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGROZXdUcmFpdChzdHJpbmcgX25hbWUsIGJvb2wgX2lzTmVnYXRpdmUpIHB1YmxpYyBvbmx5QnlPd25lck9yRGV2IHsKICAgICAgICB1aW50IHRyYWl0SWQgPSB0cmFpdHMubGVuZ3RoKys7CiAgICAgICAgdHJhaXRzW3RyYWl0SWRdLm5hbWUgPSBfbmFtZTsKICAgICAgICB0cmFpdHNbdHJhaXRJZF0uaXNOZWdhdGl2ZSA9IF9pc05lZ2F0aXZlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZE5ld1N0cmVldE5hbWUoc3RyaW5nIF9uYW1lKSBwdWJsaWMgb25seUJ5T3duZXJPckRldiB7CiAgICAgICAgc3RyZWV0TmFtZXNbc3RyZWV0TmFtZXMubGVuZ3RoKytdID0gX25hbWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkTmV3U3RyZWV0VHlwZShzdHJpbmcgX3R5cGUpIHB1YmxpYyBvbmx5QnlPd25lck9yRGV2IHsKICAgICAgICBzdHJlZXRUeXBlc1tzdHJlZXRUeXBlcy5sZW5ndGgrK10gPSBfdHlwZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZW5lcmF0ZVByZXNhbGVIb3VzZSgpIG9ubHlCeU93bmVyT3JEZXYgb25seUR1cmluZ1ByZXNhbGUgcHVibGljIHsKICAgICAgICB1aW50IGhvdXNlSWQgPSBnZW5lcmF0ZUhvdXNlKHRoaXMpOwogICAgICAgIHVpbnQgc2VsbFByaWNlID0gKGhvdXNlc1tob3VzZUlkXS5wcm9wZXJ0eVZhbHVlIC8gNTAwMCkgKiAxIGZpbm5leTsKCiAgICAgICAgaWYgKHNlbGxQcmljZSA+IDI1MCBmaW5uZXkpIHNlbGxQcmljZSA9IDI1MCBmaW5uZXk7CiAgICAgICAgaWYgKHNlbGxQcmljZSA8IDUwIGZpbm5leSkgc2VsbFByaWNlID0gNTAgZmlubmV5OwoKICAgICAgICBjcmVhdGVMaXN0aW5nKGhvdXNlSWQsIHNlbGxQcmljZSwgMCwgMzApOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFZhcmlhbnRDb3VudCh1aW50IF9ob3VzZUNsYXNzLCB1aW50IF92YXJpYW50Q291bnQpIHB1YmxpYyBvbmx5QnlPd25lck9yRGV2IHsKICAgICAgICBjbGFzc1ZhcmlhbnRzW19ob3VzZUNsYXNzXSA9IF92YXJpYW50Q291bnQ7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdGZWVzKGFkZHJlc3MgX2Rlc3RpbmF0aW9uKSBwdWJsaWMgb25seUJ5KGdhbWVPd25lcikgewogICAgICAgIHVpbnQgcmVtYWluaW5nUHJlc2FsZVByb2NlZWRzID0gcHJlc2FsZVByb2NlZWRzIC0gcHJlc2FsZURldlBheW91dDsKICAgICAgICB1aW50IGRldnNTaGFyZSA9IHJlbWFpbmluZ1ByZXNhbGVQcm9jZWVkcyAvICgxMDAgLyBwcmVzYWxlRGV2RmVlKTsKCiAgICAgICAgaWYgKGRldnNTaGFyZSA+IDApIHsKICAgICAgICAgIHByZXNhbGVEZXZQYXlvdXQgKz0gZGV2c1NoYXJlOwogICAgICAgICAgZ2FtZURldmVsb3Blci50cmFuc2ZlcihkZXZzU2hhcmUpOwogICAgICAgIH0KCiAgICAgICAgX2Rlc3RpbmF0aW9uLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdEZXZGZWVzKGFkZHJlc3MgX2Rlc3RpbmF0aW9uKSBwdWJsaWMgb25seUJ5KGdhbWVEZXZlbG9wZXIpIHsKICAgICAgICB1aW50IHJlbWFpbmluZ1ByZXNhbGVQcm9jZWVkcyA9IHByZXNhbGVQcm9jZWVkcyAtIHByZXNhbGVEZXZQYXlvdXQ7CiAgICAgICAgdWludCBkZXZzU2hhcmUgPSByZW1haW5pbmdQcmVzYWxlUHJvY2VlZHMgLyAoMTAwIC8gcHJlc2FsZURldkZlZSk7CgogICAgICAgIGlmIChkZXZzU2hhcmUgPiAwKSB7CiAgICAgICAgICBwcmVzYWxlRGV2UGF5b3V0ICs9IGRldnNTaGFyZTsKICAgICAgICAgIF9kZXN0aW5hdGlvbi50cmFuc2ZlcihkZXZzU2hhcmUpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckdhbWVPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5QnkoZ2FtZU93bmVyKSB7CiAgICAgICAgZ2FtZU93bmVyID0gX25ld093bmVyOwogICAgfQoKICAgIC8qIEludGVybmFsIEZ1bmN0aW9uYWxpdHkgKi8KICAgIGZ1bmN0aW9uIGdlbmVyYXRlSG91c2UoYWRkcmVzcyBvd25lcikgaW50ZXJuYWwgcmV0dXJucyAodWludCBob3VzZUlkKSB7CiAgICAgICAgaG91c2VJZCA9IGhvdXNlcy5sZW5ndGgrKzsKCiAgICAgICAgSG91c2VDbGFzc2VzIGhvdXNlQ2xhc3MgPSByYW5kb21Ib3VzZUNsYXNzKCk7CiAgICAgICAgdWludCBudW1CZWRyb29tcyA9IHJhbmRvbUJlZHJvb21zKGhvdXNlQ2xhc3MpOwogICAgICAgIHVpbnQgbnVtQmF0aHJvb21zID0gcmFuZG9tQmF0aHJvb21zKG51bUJlZHJvb21zKTsKICAgICAgICB1aW50IHNxdWFyZUZvb3RhZ2UgPSBjYWxjdWxhdGVTcXVhcmVGb290YWdlKGhvdXNlQ2xhc3MsIG51bUJlZHJvb21zLCBudW1CYXRocm9vbXMpOwogICAgICAgIHVpbnQgcHJvcGVydHlWYWx1ZSA9IGNhbGN1bGF0ZVByb3BlcnR5VmFsdWUoaG91c2VDbGFzcywgc3F1YXJlRm9vdGFnZSwgbnVtQmF0aHJvb21zLCBudW1CZWRyb29tcyk7CgogICAgICAgIGhvdXNlc1tob3VzZUlkXSA9IEhvdXNlKHsKICAgICAgICAgIG93bmVyOiBvd25lciwKICAgICAgICAgIGNsYXNzOiBob3VzZUNsYXNzLAogICAgICAgICAgc3RyZWV0TnVtYmVyOiBub3RSYW5kb21XaXRoU2VlZCg5OTk5LCBzcXVhcmVGb290YWdlICsgaG91c2VJZCksCiAgICAgICAgICBzdHJlZXROYW1lOiBzdHJlZXROYW1lc1tub3RSYW5kb20oc3RyZWV0TmFtZXMubGVuZ3RoKV0sCiAgICAgICAgICBzdHJlZXRUeXBlOiBzdHJlZXRUeXBlc1tub3RSYW5kb20oc3RyZWV0VHlwZXMubGVuZ3RoKV0sCiAgICAgICAgICBwcm9wZXJ0eVZhbHVlOiBwcm9wZXJ0eVZhbHVlLAogICAgICAgICAgc3RhdHVzVmFsdWU6IHByb3BlcnR5VmFsdWUgLyAxMDAwMCwKICAgICAgICAgIGNvbG9yQ29kZTogY29sb3JzW25vdFJhbmRvbShjb2xvcnMubGVuZ3RoKV0sCiAgICAgICAgICBudW1CYXRocm9vbXM6IG51bUJhdGhyb29tcywKICAgICAgICAgIG51bUJlZHJvb21zOiBudW1CZWRyb29tcywKICAgICAgICAgIHNxdWFyZUZvb3RhZ2U6IHNxdWFyZUZvb3RhZ2UsCiAgICAgICAgICBjbGFzc1ZhcmlhbnQ6IHJhbmRvbUNsYXNzVmFyaWFudChob3VzZUNsYXNzKQogICAgICAgIH0pOwoKICAgICAgICBob3VzZVRyYWl0c1tob3VzZUlkXSA9IFsKICAgICAgICAgICAgbm90UmFuZG9tV2l0aFNlZWQodHJhaXRzLmxlbmd0aCwgcHJvcGVydHlWYWx1ZSArIGhvdXNlSWQgKiA1KSwKICAgICAgICAgICAgbm90UmFuZG9tV2l0aFNlZWQodHJhaXRzLmxlbmd0aCwgc3F1YXJlRm9vdGFnZSArIGhvdXNlSWQgKiA0KSwKICAgICAgICAgICAgbm90UmFuZG9tV2l0aFNlZWQodHJhaXRzLmxlbmd0aCwgbnVtQmF0aHJvb21zICsgaG91c2VJZCAqIDMpLAogICAgICAgICAgICBub3RSYW5kb21XaXRoU2VlZCh0cmFpdHMubGVuZ3RoLCBudW1CZWRyb29tcyArIGhvdXNlSWQgKiAyKQogICAgICAgIF07CgogICAgICAgIG93bmVkSG91c2VzW293bmVyXSsrOwogICAgICAgIE1pbnRlZChob3VzZUlkKTsKICAgICAgICBUcmFuc2ZlcihhZGRyZXNzKDApLCBvd25lciwgMSk7CgogICAgICAgIHJldHVybiBob3VzZUlkOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZUxpc3RpbmcodWludCB0b2tlbklkLCB1aW50IHN0YXJ0UHJpY2UsIHVpbnQgZW5kUHJpY2UsIHVpbnQgbnVtRGF5cykgaW50ZXJuYWwgewogICAgICAgIGxpc3RpbmdzW3Rva2VuSWRdID0gTGlzdGluZyh7CiAgICAgICAgICBzdGFydFByaWNlOiBzdGFydFByaWNlLAogICAgICAgICAgZW5kUHJpY2U6IGVuZFByaWNlLAogICAgICAgICAgc3RhcnRlZEF0OiBub3csCiAgICAgICAgICBlbmRzQXQ6IG5vdyArIChudW1EYXlzICogMjQgaG91cnMpLAogICAgICAgICAgaXNBdmFpbGFibGU6IHRydWUKICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVDdXJyZW50UHJpY2UoTGlzdGluZyBsaXN0aW5nKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICBpZiAobGlzdGluZy5lbmRQcmljZSAhPSBsaXN0aW5nLnN0YXJ0UHJpY2UpIHsKICAgICAgICAgIHVpbnQgbnVtYmVyT2ZQZXJpb2RzID0gbGlzdGluZy5lbmRzQXQgLSBsaXN0aW5nLnN0YXJ0ZWRBdDsKICAgICAgICAgIHVpbnQgY3VycmVudFBlcmlvZCA9IChub3cgLSBsaXN0aW5nLnN0YXJ0ZWRBdCkgLyBudW1iZXJPZlBlcmlvZHM7CiAgICAgICAgICByZXR1cm4gY3VycmVudFBlcmlvZCAqIChsaXN0aW5nLnN0YXJ0UHJpY2UgKyBsaXN0aW5nLmVuZFByaWNlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGxpc3Rpbmcuc3RhcnRQcmljZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlUHJvcGVydHlWYWx1ZShIb3VzZUNsYXNzZXMgaG91c2VDbGFzcywgdWludCBzcXVhcmVGb290YWdlLCB1aW50IG51bUJhdGhyb29tcywgdWludCBudW1CZWRyb29tcykgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBwcm9wZXJ0eVZhbHVlID0gKHVpbnQoaG91c2VDbGFzcykgKyAxKSAqIDEwOwogICAgICAgIHByb3BlcnR5VmFsdWUgKz0gKG51bUJhdGhyb29tcyArIDEpICogMTA7CiAgICAgICAgcHJvcGVydHlWYWx1ZSArPSAobnVtQmVkcm9vbXMgKyAxKSAqIDI1OwogICAgICAgIHByb3BlcnR5VmFsdWUgKz0gc3F1YXJlRm9vdGFnZSAqIDI1OwogICAgICAgIHByb3BlcnR5VmFsdWUgKj0gNTsKCiAgICAgICAgcmV0dXJuIHVpbnQoaG91c2VDbGFzcykgPiA0ID8gcHJvcGVydHlWYWx1ZSAqIDUgOiBwcm9wZXJ0eVZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHJhbmRvbUhvdXNlQ2xhc3MoKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKEhvdXNlQ2xhc3NlcykgewogICAgICAgIHVpbnQgcmFuZCA9IG5vdFJhbmRvbSgxMDAwKTsKCiAgICAgICAgaWYgKHJhbmQgPCAzMDApIHsKICAgICAgICAgICAgcmV0dXJuIEhvdXNlQ2xhc3Nlcy5TaGFjazsKICAgICAgICB9IGVsc2UgaWYgKHJhbmQgPiAzMDAgJiYgcmFuZCA8IDU1MCkgewogICAgICAgICAgICByZXR1cm4gSG91c2VDbGFzc2VzLkFwYXJ0bWVudDsKICAgICAgICB9IGVsc2UgaWYgKHJhbmQgPiA1NTAgJiYgcmFuZCA8IDc1MCkgewogICAgICAgICAgICByZXR1cm4gSG91c2VDbGFzc2VzLkJ1bmdhbG93OwogICAgICAgIH0gZWxzZSBpZiAocmFuZCA+IDc1MCAmJiByYW5kIDwgOTAwKSB7CiAgICAgICAgICAgIHJldHVybiBIb3VzZUNsYXNzZXMuSG91c2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIEhvdXNlQ2xhc3Nlcy5NYW5zaW9uOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByYW5kb21DbGFzc1ZhcmlhbnQoSG91c2VDbGFzc2VzIGhvdXNlQ2xhc3MpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgcG9zc2libGVWYXJpYW50cyA9IDEwOwogICAgICAgIGlmIChjbGFzc1ZhcmlhbnRzW3VpbnQoaG91c2VDbGFzcyldICE9IDApIHBvc3NpYmxlVmFyaWFudHMgPSBjbGFzc1ZhcmlhbnRzW3VpbnQoaG91c2VDbGFzcyldOwogICAgICAgIHJldHVybiBub3RSYW5kb20ocG9zc2libGVWYXJpYW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gcmFuZG9tQmVkcm9vbXMoSG91c2VDbGFzc2VzIGhvdXNlQ2xhc3MpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgY2xhc3MgPSB1aW50KGhvdXNlQ2xhc3MpOwogICAgICAgIHJldHVybiBjbGFzcyA+PSAxID8gY2xhc3MgKyBub3RSYW5kb20oNCkgOiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIHJhbmRvbUJhdGhyb29tcyh1aW50IG51bUJlZHJvb21zKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gbnVtQmVkcm9vbXMgPCAyID8gbnVtQmVkcm9vbXMgOiBudW1CZWRyb29tcyAtIG5vdFJhbmRvbSgzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVTcXVhcmVGb290YWdlKEhvdXNlQ2xhc3NlcyBob3VzZUNsYXNzLCB1aW50IG51bUJlZHJvb21zLCB1aW50IG51bUJhdGhyb29tcykgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBiYXNlU3FmdCA9IHVpbnQoaG91c2VDbGFzcykgPj0gNCA/IDUwIDogMjU7CiAgICAgICAgdWludCBtdWx0aXBsaWVyID0gdWludChob3VzZUNsYXNzKSArIDE7CgogICAgICAgIHVpbnQgYmVkcm9vbVNxZnQgPSAobnVtQmVkcm9vbXMgKyAxKSAqIDEwICogYmFzZVNxZnQ7CiAgICAgICAgdWludCBiYXRocm9vbVNxZnQgPSAobnVtQmF0aHJvb21zICsgMSkgKiA1ICogYmFzZVNxZnQ7CgogICAgICAgIHJldHVybiAoYmVkcm9vbVNxZnQgKyBiYXRocm9vbVNxZnQpICogbXVsdGlwbGllcjsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGdyYWRlQXNzZXQodWludCB0b2tlbklkKSBpbnRlcm5hbCB7CiAgICAgICAgSG91c2Ugc3RvcmFnZSBob3VzZSA9IGhvdXNlc1t0b2tlbklkXTsKCiAgICAgICAgaWYgKHVpbnQoaG91c2UuY2xhc3MpIDwgNSkgewogICAgICAgICAgaG91c2UuY2xhc3MgPSBIb3VzZUNsYXNzZXModWludChob3VzZS5jbGFzcykgKyAxKTsKICAgICAgICB9CgogICAgICAgIGhvdXNlLm51bUJlZHJvb21zKys7CiAgICAgICAgaG91c2UubnVtQmF0aHJvb21zKys7CiAgICAgICAgcHJvY2Vzc1VwZ3JhZGVzKGhvdXNlKTsKICAgICAgICBVcGdyYWRlZCh0b2tlbklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcm9jZXNzVXBncmFkZXMoSG91c2Ugc3RvcmFnZSBob3VzZSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgY2xhc3MgPSB1aW50KGhvdXNlLmNsYXNzKTsKICAgICAgICBpZiAoY2xhc3MgPD0gaG91c2UubnVtQmVkcm9vbXMpIHsKICAgICAgICAgICAgaG91c2UuY2xhc3MgPSBIb3VzZUNsYXNzZXMuQnVuZ2Fsb3c7CiAgICAgICAgfSBlbHNlIGlmIChjbGFzcyA8IDIgJiYgaG91c2UubnVtQmVkcm9vbXMgPiA1KSB7CiAgICAgICAgICAgIGhvdXNlLmNsYXNzID0gSG91c2VDbGFzc2VzLlBlbnRob3VzZTsKICAgICAgICB9IGVsc2UgaWYgKGNsYXNzIDwgNCAmJiBob3VzZS5udW1CZWRyb29tcyA+IDEwKSB7CiAgICAgICAgICAgIGhvdXNlLmNsYXNzID0gSG91c2VDbGFzc2VzLk1hbnNpb247CiAgICAgICAgfSBlbHNlIGlmIChjbGFzcyA8IDYgJiYgaG91c2UubnVtQmVkcm9vbXMgPiAxNSkgewogICAgICAgICAgICBob3VzZS5jbGFzcyA9IEhvdXNlQ2xhc3Nlcy5Fc3RhdGU7CiAgICAgICAgfQoKICAgICAgICBob3VzZS5zcXVhcmVGb290YWdlID0gY2FsY3VsYXRlU3F1YXJlRm9vdGFnZSgKICAgICAgICAgIGhvdXNlLmNsYXNzLCBob3VzZS5udW1CZWRyb29tcywgaG91c2UubnVtQmF0aHJvb21zCiAgICAgICAgKTsKCiAgICAgICAgaG91c2UucHJvcGVydHlWYWx1ZSA9IGNhbGN1bGF0ZVByb3BlcnR5VmFsdWUoCiAgICAgICAgICBob3VzZS5jbGFzcywgaG91c2Uuc3F1YXJlRm9vdGFnZSwgaG91c2UubnVtQmF0aHJvb21zLCBob3VzZS5udW1CZWRyb29tcwogICAgICAgICk7CgogICAgICAgIGhvdXNlLnN0YXR1c1ZhbHVlICs9IGhvdXNlLnN0YXR1c1ZhbHVlIC8gMTA7CiAgICB9CgogICAgZnVuY3Rpb24gbm90UmFuZG9tKHVpbnQgbGVzc1RoYW4pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdWludChrZWNjYWsyNTYoCiAgICAgICAgICAgIChob3VzZXMubGVuZ3RoICsgMSkgKyAodHguZ2FzcHJpY2UgKiBsZXNzVGhhbikgKwogICAgICAgICAgICAoYmxvY2suZGlmZmljdWx0eSAqIGJsb2NrLm51bWJlciArIG5vdykgKiBtc2cuZ2FzCiAgICAgICAgKSkgJSBsZXNzVGhhbjsKICAgIH0KCiAgICBmdW5jdGlvbiBub3RSYW5kb21XaXRoU2VlZCh1aW50IGxlc3NUaGFuLCB1aW50IHNlZWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdWludChrZWNjYWsyNTYoCiAgICAgICAgICAgIHNlZWQgKyBibG9jay5nYXNsaW1pdCArIGJsb2NrLm51bWJlcgogICAgICAgICkpICUgbGVzc1RoYW47CiAgICB9Cn0='.
	

]
