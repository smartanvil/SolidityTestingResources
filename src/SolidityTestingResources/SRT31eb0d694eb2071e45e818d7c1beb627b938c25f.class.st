Class {
	#name : #SRT31eb0d694eb2071e45e818d7c1beb627b938c25f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT31eb0d694eb2071e45e818d7c1beb627b938c25f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgoKCgoKCgoKCgoKCgoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLgogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICB1aW50MjU2IHRvdGFsU3VwcGx5XzsKCiAgLyoqCiAgKiBAZGV2IHRvdGFsIG51bWJlciBvZiB0b2tlbnMgaW4gZXhpc3RlbmNlCiAgKi8KICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiB0b3RhbFN1cHBseV87CiAgfQoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CgoKCgoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqCiAgICogQmV3YXJlIHRoYXQgY2hhbmdpbmcgYW4gYWxsb3dhbmNlIHdpdGggdGhpcyBtZXRob2QgYnJpbmdzIHRoZSByaXNrIHRoYXQgc29tZW9uZSBtYXkgdXNlIGJvdGggdGhlIG9sZAogICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgKiByYWNlIGNvbmRpdGlvbiBpcyB0byBmaXJzdCByZWR1Y2UgdGhlIHNwZW5kZXIncyBhbGxvd2FuY2UgdG8gMCBhbmQgc2V0IHRoZSBkZXNpcmVkIHZhbHVlIGFmdGVyd2FyZHM6CiAgICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIC8qKgogICAqIEBkZXYgSW5jcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfYWRkZWRWYWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBpbmNyZWFzZSB0aGUgYWxsb3dhbmNlIGJ5LgogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRGVjcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGRlY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3VidHJhY3RlZFZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGRlY3JlYXNlIHRoZSBhbGxvd2FuY2UgYnkuCiAgICovCiAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgfQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCn0KCgoKCgoKLyoqCiAqIEB0aXRsZSBCdXJuYWJsZSBUb2tlbgogKiBAZGV2IFRva2VuIHRoYXQgY2FuIGJlIGlycmV2ZXJzaWJseSBidXJuZWQgKGRlc3Ryb3llZCkuCiAqLwpjb250cmFjdCBCdXJuYWJsZVRva2VuIGlzIEJhc2ljVG9rZW4gewoKICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAvKioKICAgKiBAZGV2IEJ1cm5zIGEgc3BlY2lmaWMgYW1vdW50IG9mIHRva2Vucy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgYnVybmVkLgogICAqLwogIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHB1YmxpYyB7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CiAgICAvLyBubyBuZWVkIHRvIHJlcXVpcmUgdmFsdWUgPD0gdG90YWxTdXBwbHksIHNpbmNlIHRoYXQgd291bGQgaW1wbHkgdGhlCiAgICAvLyBzZW5kZXIncyBiYWxhbmNlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgdG90YWxTdXBwbHksIHdoaWNoICpzaG91bGQqIGJlIGFuIGFzc2VydGlvbiBmYWlsdXJlCgogICAgYWRkcmVzcyBidXJuZXIgPSBtc2cuc2VuZGVyOwogICAgYmFsYW5jZXNbYnVybmVyXSA9IGJhbGFuY2VzW2J1cm5lcl0uc3ViKF92YWx1ZSk7CiAgICB0b3RhbFN1cHBseV8gPSB0b3RhbFN1cHBseV8uc3ViKF92YWx1ZSk7CiAgICBCdXJuKGJ1cm5lciwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKGJ1cm5lciwgYWRkcmVzcygwKSwgX3ZhbHVlKTsKICB9Cn0KCgoKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3VidHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgKi8KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICAvKioKICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgpjb250cmFjdCBHb29Ub2tlbiBpcyBTdGFuZGFyZFRva2VuLCBCdXJuYWJsZVRva2VuIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkdPTyI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiR29vVG9rZW4iOwoKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgSU5JVElBTF9TVVBQTFkgPSAyMTc4NjAwMDAwMDAwICogKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsKCiAgICB1aW50MjU2IHZlc3RpbmdUaW1lID0gMDsKCiAgICBhZGRyZXNzIHJlc2VydmVkID0gMHg5RjI0N2I3ZUIzNjNkNTZBNzZBQTI2RjI3YjA2RkQ0ZjU4RjkzRDEzOwogICAgYWRkcmVzcyB0ZWFtICAgICA9IDB4Yzk0ZDBBODI4OTkwQjZiMmFCNzc2NzJiQjI2NTZiRTE0YjQ3MThmYjsKCiAgICBhZGRyZXNzIHJld2FyZCAgID0gMHg1MWIyRjU4OUVlN0Y0OEFGODIxMTg3OTBhNmYzRjJCMTdlQWY4YjAyOwogICAgYWRkcmVzcyBib3VudHkgICA9IDB4QzdBRjYyM2YxNjgyZDdDRkNiYzhmNTNhRmVjN2RCZDQ3NjdDN2VDQjsKCgogICAgZnVuY3Rpb24gR29vVG9rZW4odWludDI1NiBfdmVzdGluZ1RpbWUpIHB1YmxpYyB7CiAgICAgICAgdmVzdGluZ1RpbWUgPSBfdmVzdGluZ1RpbWU7CiAgICAgICAgdG90YWxTdXBwbHlfID0gSU5JVElBTF9TVVBQTFk7CgogICAgICAgIC8vIEluaXRpYWxEaXN0cmlidXRpb24KICAgICAgICBwcmVTYWxlKG1zZy5zZW5kZXIsIGZyb21QZXJjZW50YWdlKElOSVRJQUxfU1VQUExZLCA0MykpOyAgICAvLyA0MyUgU2FsZXMKICAgICAgICBwcmVTYWxlKHRlYW0sICAgICAgIGZyb21QZXJjZW50YWdlKElOSVRJQUxfU1VQUExZLCAxNSkpOyAgICAvLyAxNSUgVGVhbQogICAgICAgIHByZVNhbGUocmVzZXJ2ZWQsICAgZnJvbVBlcmNlbnRhZ2UoSU5JVElBTF9TVVBQTFksIDMwKSk7ICAgIC8vIDMwJSBSZXNlcnZlZAogICAgICAgIHByZVNhbGUocmV3YXJkLCAgICAgZnJvbVBlcmNlbnRhZ2UoSU5JVElBTF9TVVBQTFksIDcpKTsgICAgIC8vIDclICBSZXdhcmRzCiAgICAgICAgcHJlU2FsZShib3VudHksICAgICBmcm9tUGVyY2VudGFnZShJTklUSUFMX1NVUFBMWSwgNSkpOyAgICAgLy8gNSUgIEJvdW50eQogICAgfQoKICAgIGZ1bmN0aW9uIHByZVNhbGUoYWRkcmVzcyBfYWRkcmVzcywgdWludDI1NiBfYW1vdW50KSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgYmFsYW5jZXNbX2FkZHJlc3NdID0gX2Ftb3VudDsKICAgICAgICBUcmFuc2ZlcihhZGRyZXNzKDB4MCksIF9hZGRyZXNzLCBfYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja1Blcm1pc3Npb25zKGFkZHJlc3MgX2Zyb20pIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKCiAgICAgICAgaWYgKF9mcm9tID09IHRlYW0gJiYgbm93IDwgdmVzdGluZ1RpbWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewoKICAgICAgICByZXF1aXJlKGNoZWNrUGVybWlzc2lvbnMobXNnLnNlbmRlcikpOwogICAgICAgIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewoKICAgICAgICByZXF1aXJlKGNoZWNrUGVybWlzc2lvbnMoX2Zyb20pKTsKICAgICAgICBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmcm9tUGVyY2VudGFnZSh1aW50MjU2IHZhbHVlLCB1aW50MjU2IHBlcmNlbnRhZ2UpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiAodmFsdWUqcGVyY2VudGFnZSkvMTAwOwogICAgfQp9CgoKCgoKCgoKLyoqCiAqIEB0aXRsZSBDcm93ZHNhbGUKICogQGRldiBDcm93ZHNhbGUgaXMgYSBiYXNlIGNvbnRyYWN0IGZvciBtYW5hZ2luZyBhIHRva2VuIGNyb3dkc2FsZSwKICogYWxsb3dpbmcgaW52ZXN0b3JzIHRvIHB1cmNoYXNlIHRva2VucyB3aXRoIGV0aGVyLiBUaGlzIGNvbnRyYWN0IGltcGxlbWVudHMKICogc3VjaCBmdW5jdGlvbmFsaXR5IGluIGl0cyBtb3N0IGZ1bmRhbWVudGFsIGZvcm0gYW5kIGNhbiBiZSBleHRlbmRlZCB0byBwcm92aWRlIGFkZGl0aW9uYWwKICogZnVuY3Rpb25hbGl0eSBhbmQvb3IgY3VzdG9tIGJlaGF2aW9yLgogKiBUaGUgZXh0ZXJuYWwgaW50ZXJmYWNlIHJlcHJlc2VudHMgdGhlIGJhc2ljIGludGVyZmFjZSBmb3IgcHVyY2hhc2luZyB0b2tlbnMsIGFuZCBjb25mb3JtCiAqIHRoZSBiYXNlIGFyY2hpdGVjdHVyZSBmb3IgY3Jvd2RzYWxlcy4gVGhleSBhcmUgKm5vdCogaW50ZW5kZWQgdG8gYmUgbW9kaWZpZWQgLyBvdmVycmlkZW4uCiAqIFRoZSBpbnRlcm5hbCBpbnRlcmZhY2UgY29uZm9ybXMgdGhlIGV4dGVuc2libGUgYW5kIG1vZGlmaWFibGUgc3VyZmFjZSBvZiBjcm93ZHNhbGVzLiBPdmVycmlkZSAKICogdGhlIG1ldGhvZHMgdG8gYWRkIGZ1bmN0aW9uYWxpdHkuIENvbnNpZGVyIHVzaW5nICdzdXBlcicgd2hlcmUgYXBwcm9waWF0ZSB0byBjb25jYXRlbmF0ZQogKiBiZWhhdmlvci4KICovCgpjb250cmFjdCBDcm93ZHNhbGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAvLyBUaGUgdG9rZW4gYmVpbmcgc29sZAogIEVSQzIwIHB1YmxpYyB0b2tlbjsKCiAgLy8gQWRkcmVzcyB3aGVyZSBmdW5kcyBhcmUgY29sbGVjdGVkCiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwoKICAvLyBIb3cgbWFueSB0b2tlbiB1bml0cyBhIGJ1eWVyIGdldHMgcGVyIHdlaQogIHVpbnQyNTYgcHVibGljIHJhdGU7CgogIC8vIEFtb3VudCBvZiB3ZWkgcmFpc2VkCiAgdWludDI1NiBwdWJsaWMgd2VpUmFpc2VkOwoKICAvKioKICAgKiBFdmVudCBmb3IgdG9rZW4gcHVyY2hhc2UgbG9nZ2luZwogICAqIEBwYXJhbSBwdXJjaGFzZXIgd2hvIHBhaWQgZm9yIHRoZSB0b2tlbnMKICAgKiBAcGFyYW0gYmVuZWZpY2lhcnkgd2hvIGdvdCB0aGUgdG9rZW5zCiAgICogQHBhcmFtIHZhbHVlIHdlaXMgcGFpZCBmb3IgcHVyY2hhc2UKICAgKiBAcGFyYW0gYW1vdW50IGFtb3VudCBvZiB0b2tlbnMgcHVyY2hhc2VkCiAgICovCiAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKCiAgLyoqCiAgICogQHBhcmFtIF9yYXRlIE51bWJlciBvZiB0b2tlbiB1bml0cyBhIGJ1eWVyIGdldHMgcGVyIHdlaQogICAqIEBwYXJhbSBfd2FsbGV0IEFkZHJlc3Mgd2hlcmUgY29sbGVjdGVkIGZ1bmRzIHdpbGwgYmUgZm9yd2FyZGVkIHRvCiAgICogQHBhcmFtIF90b2tlbiBBZGRyZXNzIG9mIHRoZSB0b2tlbiBiZWluZyBzb2xkCiAgICovCiAgZnVuY3Rpb24gQ3Jvd2RzYWxlKHVpbnQyNTYgX3JhdGUsIGFkZHJlc3MgX3dhbGxldCwgRVJDMjAgX3Rva2VuKSBwdWJsaWMgewogICAgcmVxdWlyZShfcmF0ZSA+IDApOwogICAgcmVxdWlyZShfd2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdG9rZW4gIT0gYWRkcmVzcygwKSk7CgogICAgcmF0ZSA9IF9yYXRlOwogICAgd2FsbGV0ID0gX3dhbGxldDsKICAgIHRva2VuID0gX3Rva2VuOwogIH0KCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBDcm93ZHNhbGUgZXh0ZXJuYWwgaW50ZXJmYWNlCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgLyoqCiAgICogQGRldiBmYWxsYmFjayBmdW5jdGlvbiAqKipETyBOT1QgT1ZFUlJJREUqKioKICAgKi8KICBmdW5jdGlvbiAoKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICB9CgogIC8qKgogICAqIEBkZXYgbG93IGxldmVsIHRva2VuIHB1cmNoYXNlICoqKkRPIE5PVCBPVkVSUklERSoqKgogICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgQWRkcmVzcyBwZXJmb3JtaW5nIHRoZSB0b2tlbiBwdXJjaGFzZQogICAqLwogIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIF9iZW5lZmljaWFyeSkgcHVibGljIHBheWFibGUgewoKICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwogICAgX3ByZVZhbGlkYXRlUHVyY2hhc2UoX2JlbmVmaWNpYXJ5LCB3ZWlBbW91bnQpOwoKICAgIC8vIGNhbGN1bGF0ZSB0b2tlbiBhbW91bnQgdG8gYmUgY3JlYXRlZAogICAgdWludDI1NiB0b2tlbnMgPSBfZ2V0VG9rZW5BbW91bnQod2VpQW1vdW50KTsKCiAgICAvLyB1cGRhdGUgc3RhdGUKICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKCiAgICBfcHJvY2Vzc1B1cmNoYXNlKF9iZW5lZmljaWFyeSwgdG9rZW5zKTsKICAgIFRva2VuUHVyY2hhc2UobXNnLnNlbmRlciwgX2JlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRva2Vucyk7CgogICAgX3VwZGF0ZVB1cmNoYXNpbmdTdGF0ZShfYmVuZWZpY2lhcnksIHdlaUFtb3VudCk7CgogICAgX2ZvcndhcmRGdW5kcygpOwogICAgX3Bvc3RWYWxpZGF0ZVB1cmNoYXNlKF9iZW5lZmljaWFyeSwgd2VpQW1vdW50KTsKICB9CgogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gSW50ZXJuYWwgaW50ZXJmYWNlIChleHRlbnNpYmxlKQogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8qKgogICAqIEBkZXYgVmFsaWRhdGlvbiBvZiBhbiBpbmNvbWluZyBwdXJjaGFzZS4gVXNlIHJlcXVpcmUgc3RhdGVtZW50cyB0byByZXZlcnQgc3RhdGUgd2hlbiBjb25kaXRpb25zIGFyZSBub3QgbWV0LiBVc2Ugc3VwZXIgdG8gY29uY2F0ZW5hdGUgdmFsaWRhdGlvbnMuCiAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBBZGRyZXNzIHBlcmZvcm1pbmcgdGhlIHRva2VuIHB1cmNoYXNlCiAgICogQHBhcmFtIF93ZWlBbW91bnQgVmFsdWUgaW4gd2VpIGludm9sdmVkIGluIHRoZSBwdXJjaGFzZQogICAqLwogIGZ1bmN0aW9uIF9wcmVWYWxpZGF0ZVB1cmNoYXNlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF93ZWlBbW91bnQpIGludGVybmFsIHsKICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfd2VpQW1vdW50ICE9IDApOwogIH0KCiAgLyoqCiAgICogQGRldiBWYWxpZGF0aW9uIG9mIGFuIGV4ZWN1dGVkIHB1cmNoYXNlLiBPYnNlcnZlIHN0YXRlIGFuZCB1c2UgcmV2ZXJ0IHN0YXRlbWVudHMgdG8gdW5kbyByb2xsYmFjayB3aGVuIHZhbGlkIGNvbmRpdGlvbnMgYXJlIG5vdCBtZXQuCiAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBBZGRyZXNzIHBlcmZvcm1pbmcgdGhlIHRva2VuIHB1cmNoYXNlCiAgICogQHBhcmFtIF93ZWlBbW91bnQgVmFsdWUgaW4gd2VpIGludm9sdmVkIGluIHRoZSBwdXJjaGFzZQogICAqLwogIGZ1bmN0aW9uIF9wb3N0VmFsaWRhdGVQdXJjaGFzZShhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbCB7CiAgICAvLyBvcHRpb25hbCBvdmVycmlkZQogIH0KCiAgLyoqCiAgICogQGRldiBTb3VyY2Ugb2YgdG9rZW5zLiBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBtb2RpZnkgdGhlIHdheSBpbiB3aGljaCB0aGUgY3Jvd2RzYWxlIHVsdGltYXRlbHkgZ2V0cyBhbmQgc2VuZHMgaXRzIHRva2Vucy4KICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IEFkZHJlc3MgcGVyZm9ybWluZyB0aGUgdG9rZW4gcHVyY2hhc2UKICAgKiBAcGFyYW0gX3Rva2VuQW1vdW50IE51bWJlciBvZiB0b2tlbnMgdG8gYmUgZW1pdHRlZAogICAqLwogIGZ1bmN0aW9uIF9kZWxpdmVyVG9rZW5zKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF90b2tlbkFtb3VudCkgaW50ZXJuYWwgewogICAgdG9rZW4udHJhbnNmZXIoX2JlbmVmaWNpYXJ5LCBfdG9rZW5BbW91bnQpOwogIH0KCiAgLyoqCiAgICogQGRldiBFeGVjdXRlZCB3aGVuIGEgcHVyY2hhc2UgaGFzIGJlZW4gdmFsaWRhdGVkIGFuZCBpcyByZWFkeSB0byBiZSBleGVjdXRlZC4gTm90IG5lY2Vzc2FyaWx5IGVtaXRzL3NlbmRzIHRva2Vucy4KICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IEFkZHJlc3MgcmVjZWl2aW5nIHRoZSB0b2tlbnMKICAgKiBAcGFyYW0gX3Rva2VuQW1vdW50IE51bWJlciBvZiB0b2tlbnMgdG8gYmUgcHVyY2hhc2VkCiAgICovCiAgZnVuY3Rpb24gX3Byb2Nlc3NQdXJjaGFzZShhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfdG9rZW5BbW91bnQpIGludGVybmFsIHsKICAgIF9kZWxpdmVyVG9rZW5zKF9iZW5lZmljaWFyeSwgX3Rva2VuQW1vdW50KTsKICB9CgogIC8qKgogICAqIEBkZXYgT3ZlcnJpZGUgZm9yIGV4dGVuc2lvbnMgdGhhdCByZXF1aXJlIGFuIGludGVybmFsIHN0YXRlIHRvIGNoZWNrIGZvciB2YWxpZGl0eSAoY3VycmVudCB1c2VyIGNvbnRyaWJ1dGlvbnMsIGV0Yy4pCiAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBBZGRyZXNzIHJlY2VpdmluZyB0aGUgdG9rZW5zCiAgICogQHBhcmFtIF93ZWlBbW91bnQgVmFsdWUgaW4gd2VpIGludm9sdmVkIGluIHRoZSBwdXJjaGFzZQogICAqLwogIGZ1bmN0aW9uIF91cGRhdGVQdXJjaGFzaW5nU3RhdGUoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQyNTYgX3dlaUFtb3VudCkgaW50ZXJuYWwgewogICAgLy8gb3B0aW9uYWwgb3ZlcnJpZGUKICB9CgogIC8qKgogICAqIEBkZXYgT3ZlcnJpZGUgdG8gZXh0ZW5kIHRoZSB3YXkgaW4gd2hpY2ggZXRoZXIgaXMgY29udmVydGVkIHRvIHRva2Vucy4KICAgKiBAcGFyYW0gX3dlaUFtb3VudCBWYWx1ZSBpbiB3ZWkgdG8gYmUgY29udmVydGVkIGludG8gdG9rZW5zCiAgICogQHJldHVybiBOdW1iZXIgb2YgdG9rZW5zIHRoYXQgY2FuIGJlIHB1cmNoYXNlZCB3aXRoIHRoZSBzcGVjaWZpZWQgX3dlaUFtb3VudAogICAqLwogIGZ1bmN0aW9uIF9nZXRUb2tlbkFtb3VudCh1aW50MjU2IF93ZWlBbW91bnQpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIF93ZWlBbW91bnQubXVsKHJhdGUpOwogIH0KCiAgLyoqCiAgICogQGRldiBEZXRlcm1pbmVzIGhvdyBFVEggaXMgc3RvcmVkL2ZvcndhcmRlZCBvbiBwdXJjaGFzZXMuCiAgICovCiAgZnVuY3Rpb24gX2ZvcndhcmRGdW5kcygpIGludGVybmFsIHsKICAgIHdhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOwogIH0KfQoKCgovKioKICogQHRpdGxlIFRpbWVkQ3Jvd2RzYWxlCiAqIEBkZXYgQ3Jvd2RzYWxlIGFjY2VwdGluZyBjb250cmlidXRpb25zIG9ubHkgd2l0aGluIGEgdGltZSBmcmFtZS4KICovCmNvbnRyYWN0IFRpbWVkQ3Jvd2RzYWxlIGlzIENyb3dkc2FsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIHVpbnQyNTYgcHVibGljIG9wZW5pbmdUaW1lOwogIHVpbnQyNTYgcHVibGljIGNsb3NpbmdUaW1lOwoKICAvKioKICAgKiBAZGV2IFJldmVydHMgaWYgbm90IGluIGNyb3dkc2FsZSB0aW1lIHJhbmdlLiAKICAgKi8KICBtb2RpZmllciBvbmx5V2hpbGVPcGVuIHsKICAgIHJlcXVpcmUobm93ID49IG9wZW5pbmdUaW1lICYmIG5vdyA8PSBjbG9zaW5nVGltZSk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBDb25zdHJ1Y3RvciwgdGFrZXMgY3Jvd2RzYWxlIG9wZW5pbmcgYW5kIGNsb3NpbmcgdGltZXMuCiAgICogQHBhcmFtIF9vcGVuaW5nVGltZSBDcm93ZHNhbGUgb3BlbmluZyB0aW1lCiAgICogQHBhcmFtIF9jbG9zaW5nVGltZSBDcm93ZHNhbGUgY2xvc2luZyB0aW1lCiAgICovCiAgZnVuY3Rpb24gVGltZWRDcm93ZHNhbGUodWludDI1NiBfb3BlbmluZ1RpbWUsIHVpbnQyNTYgX2Nsb3NpbmdUaW1lKSBwdWJsaWMgewovLyAgICByZXF1aXJlKF9vcGVuaW5nVGltZSA+PSBub3cpOwogICAgcmVxdWlyZShfY2xvc2luZ1RpbWUgPj0gX29wZW5pbmdUaW1lKTsKCiAgICBvcGVuaW5nVGltZSA9IF9vcGVuaW5nVGltZTsKICAgIGNsb3NpbmdUaW1lID0gX2Nsb3NpbmdUaW1lOwogIH0KCiAgLyoqCiAgICogQGRldiBDaGVja3Mgd2hldGhlciB0aGUgcGVyaW9kIGluIHdoaWNoIHRoZSBjcm93ZHNhbGUgaXMgb3BlbiBoYXMgYWxyZWFkeSBlbGFwc2VkLgogICAqIEByZXR1cm4gV2hldGhlciBjcm93ZHNhbGUgcGVyaW9kIGhhcyBlbGFwc2VkCiAgICovCiAgZnVuY3Rpb24gaGFzQ2xvc2VkKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIG5vdyA+IGNsb3NpbmdUaW1lOwogIH0KICAKICAvKioKICAgKiBAZGV2IEV4dGVuZCBwYXJlbnQgYmVoYXZpb3IgcmVxdWlyaW5nIHRvIGJlIHdpdGhpbiBjb250cmlidXRpbmcgcGVyaW9kCiAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBUb2tlbiBwdXJjaGFzZXIKICAgKiBAcGFyYW0gX3dlaUFtb3VudCBBbW91bnQgb2Ygd2VpIGNvbnRyaWJ1dGVkCiAgICovCiAgZnVuY3Rpb24gX3ByZVZhbGlkYXRlUHVyY2hhc2UoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQyNTYgX3dlaUFtb3VudCkgaW50ZXJuYWwgb25seVdoaWxlT3BlbiB7CiAgICBzdXBlci5fcHJlVmFsaWRhdGVQdXJjaGFzZShfYmVuZWZpY2lhcnksIF93ZWlBbW91bnQpOwogIH0KCn0KCgoKCmNvbnRyYWN0IEdvb0Nyb3dkc2FsZSBpcyBUaW1lZENyb3dkc2FsZSwgT3duYWJsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBib29sIHB1YmxpYyBpc0JvbnVzID0gdHJ1ZTsKICAgIGJvb2wgcHVibGljIGlzUHJlSUNPID0gdHJ1ZTsKICAgIHVpbnQyNTYgcHVibGljIHJhdGU7CgogICAgdWludDI1NiBwdWJsaWMgdmVzdGluZ1RpbWU7CgogICAgRVJDMjAgcHVibGljIHRva2VuOwoKICAgIC8vIENvbnN0cnVjdG9yCiAgICAvLyA9PT09PT09PT09PT0KICAgIGZ1bmN0aW9uIEdvb0Nyb3dkc2FsZSh1aW50MjU2IF9zdGFydFRpbWUsIHVpbnQyNTYgX2VuZFRpbWUsIHVpbnQyNTYgX3Zlc3RpbmdUaW1lLCB1aW50MjU2IF9yYXRlLCBhZGRyZXNzIF93YWxsZXQpIHB1YmxpYyBDcm93ZHNhbGUoX3JhdGUsIF93YWxsZXQsIHRva2VuID0gbmV3IEdvb1Rva2VuKF92ZXN0aW5nVGltZSkpIFRpbWVkQ3Jvd2RzYWxlKF9zdGFydFRpbWUsIF9lbmRUaW1lKSB7CiAgICAgICAgdmVzdGluZ1RpbWUgPSBfdmVzdGluZ1RpbWU7CiAgICAgICAgcmF0ZSA9IF9yYXRlOwogICAgfQoKICAgIC8qKgogICAgKiBAcGFyYW0gX3dlaUFtb3VudCBWYWx1ZSBpbiB3ZWkgdG8gYmUgY29udmVydGVkIGludG8gdG9rZW5zCiAgICAqIEByZXR1cm4gTnVtYmVyIG9mIHRva2VucyB0aGF0IGNhbiBiZSBwdXJjaGFzZWQgd2l0aCB0aGUgc3BlY2lmaWVkIF93ZWlBbW91bnQKICAgICovCiAgICBmdW5jdGlvbiBfZ2V0VG9rZW5BbW91bnQodWludDI1NiBfd2VpQW1vdW50KSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHRva2VucyA9IF93ZWlBbW91bnQubXVsKHJhdGUpOwoKICAgICAgICAvLyBhZGQgYm9udXMgcmV3YXJkcyAtIGlmIHF1YWxpZmllZAogICAgICAgIGlmIChpc0JvbnVzKSB7CiAgICAgICAgICAgIHVpbnQyNTYgYm9udXNUb2tlbnMgPSBfZ2V0Qm9udXNUb2tlbkFtb3VudChfd2VpQW1vdW50LCB0b2tlbnMpOwogICAgICAgICAgICB0b2tlbnMgPSB0b2tlbnMuYWRkKGJvbnVzVG9rZW5zKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0b2tlbnM7CiAgICB9CgogICAgZnVuY3Rpb24gX2dldEJvbnVzVG9rZW5BbW91bnQodWludDI1NiBfd2VpQW1vdW50LCB1aW50MjU2IF90b2tlbnMpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgcGVyY2VudGFnZSA9IDA7CgogICAgICAgIGlmIChfd2VpQW1vdW50ID49IDUwIGV0aGVyKSB7CiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAxMDA7CiAgICAgICAgfSBlbHNlIGlmIChfd2VpQW1vdW50ID49IDIwIGV0aGVyKSB7CiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSA3NTsKICAgICAgICB9IGVsc2UgaWYgKF93ZWlBbW91bnQgPj0gMTAgZXRoZXIpIHsKICAgICAgICAgICAgcGVyY2VudGFnZSA9IDUwOwogICAgICAgIH0gZWxzZSBpZiAoX3dlaUFtb3VudCA+PSA1IGV0aGVyKSB7CiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAyMDsKICAgICAgICB9IGVsc2UgaWYgKF93ZWlBbW91bnQgPj0gMSBldGhlcikgewogICAgICAgICAgICBwZXJjZW50YWdlID0gMTA7CiAgICAgICAgfQoKICAgICAgICBpZiAocGVyY2VudGFnZSA+IDApIHsKCiAgICAgICAgICAgIGlmIChpc1ByZUlDTykgewogICAgICAgICAgICAgICAgcGVyY2VudGFnZSA9IHBlcmNlbnRhZ2UubXVsKDIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZnJvbVBlcmNlbnRhZ2UoX3Rva2VucywgcGVyY2VudGFnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJvbnVzKGJvb2wgX2lzQm9udXMpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgaXNCb251cyA9IF9pc0JvbnVzOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByZUlDTyhib29sIF9pc1ByZUlDTykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBpc1ByZUlDTyA9IF9pc1ByZUlDTzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRSYXRlKHVpbnQyNTYgX3JhdGUpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcmF0ZSA9IF9yYXRlOwogICAgfQoKICAgIGZ1bmN0aW9uIGZyb21QZXJjZW50YWdlKHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgcGVyY2VudGFnZSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuICh2YWx1ZSpwZXJjZW50YWdlKS8xMDA7CiAgICB9Cn0='.
	

]
