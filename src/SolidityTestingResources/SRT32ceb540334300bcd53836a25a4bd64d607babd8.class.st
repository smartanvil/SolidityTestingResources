Class {
	#name : #SRT32ceb540334300bcd53836a25a4bd64d607babd8,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT32ceb540334300bcd53836a25a4bd64d607babd8 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBEU0F1dGhvcml0eSB7CiAgICBmdW5jdGlvbiBjYW5DYWxsKAogICAgICAgIGFkZHJlc3Mgc3JjLCBhZGRyZXNzIGRzdCwgYnl0ZXM0IHNpZwogICAgKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKTsKfQoKY29udHJhY3QgRFNBdXRoRXZlbnRzIHsKICAgIGV2ZW50IExvZ1NldEF1dGhvcml0eSAoYWRkcmVzcyBpbmRleGVkIGF1dGhvcml0eSk7CiAgICBldmVudCBMb2dTZXRPd25lciAgICAgKGFkZHJlc3MgaW5kZXhlZCBvd25lcik7Cn0KCmNvbnRyYWN0IERTQXV0aCBpcyBEU0F1dGhFdmVudHMgewogICAgRFNBdXRob3JpdHkgIHB1YmxpYyAgYXV0aG9yaXR5OwogICAgYWRkcmVzcyAgICAgIHB1YmxpYyAgb3duZXI7CgogICAgZnVuY3Rpb24gRFNBdXRoKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgTG9nU2V0T3duZXIobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0T3duZXIoYWRkcmVzcyBvd25lcl8pCiAgICAgICAgcHVibGljCiAgICAgICAgYXV0aAogICAgewogICAgICAgIG93bmVyID0gb3duZXJfOwogICAgICAgIExvZ1NldE93bmVyKG93bmVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRBdXRob3JpdHkoRFNBdXRob3JpdHkgYXV0aG9yaXR5XykKICAgICAgICBwdWJsaWMKICAgICAgICBhdXRoCiAgICB7CiAgICAgICAgYXV0aG9yaXR5ID0gYXV0aG9yaXR5XzsKICAgICAgICBMb2dTZXRBdXRob3JpdHkoYXV0aG9yaXR5KTsKICAgIH0KCiAgICBtb2RpZmllciBhdXRoIHsKICAgICAgICByZXF1aXJlKGlzQXV0aG9yaXplZChtc2cuc2VuZGVyLCBtc2cuc2lnKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0F1dGhvcml6ZWQoYWRkcmVzcyBzcmMsIGJ5dGVzNCBzaWcpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChzcmMgPT0gYWRkcmVzcyh0aGlzKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKHNyYyA9PSBvd25lcikgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGF1dGhvcml0eSA9PSBEU0F1dGhvcml0eSgwKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGF1dGhvcml0eS5jYW5DYWxsKHNyYywgdGhpcywgc2lnKTsKICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IERTTm90ZSB7CiAgICBldmVudCBMb2dOb3RlKAogICAgICAgIGJ5dGVzNCAgIGluZGV4ZWQgIHNpZywKICAgICAgICBhZGRyZXNzICBpbmRleGVkICBndXksCiAgICAgICAgYnl0ZXMzMiAgaW5kZXhlZCAgZm9vLAogICAgICAgIGJ5dGVzMzIgIGluZGV4ZWQgIGJhciwKICAgICAgICB1aW50ICAgICAgICAgICAgICB3YWQsCiAgICAgICAgYnl0ZXMgICAgICAgICAgICAgZmF4CiAgICApIGFub255bW91czsKCiAgICBtb2RpZmllciBub3RlIHsKICAgICAgICBieXRlczMyIGZvbzsKICAgICAgICBieXRlczMyIGJhcjsKCiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBmb28gOj0gY2FsbGRhdGFsb2FkKDQpCiAgICAgICAgICAgIGJhciA6PSBjYWxsZGF0YWxvYWQoMzYpCiAgICAgICAgfQoKICAgICAgICBMb2dOb3RlKG1zZy5zaWcsIG1zZy5zZW5kZXIsIGZvbywgYmFyLCBtc2cudmFsdWUsIG1zZy5kYXRhKTsKCiAgICAgICAgXzsKICAgIH0KfQoKY29udHJhY3QgRFNTdG9wIGlzIERTTm90ZSwgRFNBdXRoIHsKCiAgICBib29sIHB1YmxpYyBzdG9wcGVkOwoKICAgIG1vZGlmaWVyIHN0b3BwYWJsZSB7CiAgICAgICAgcmVxdWlyZSghc3RvcHBlZCk7CiAgICAgICAgXzsKICAgIH0KICAgIGZ1bmN0aW9uIHN0b3AoKSBwdWJsaWMgYXV0aCBub3RlIHsKICAgICAgICBzdG9wcGVkID0gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIHN0YXJ0KCkgcHVibGljIGF1dGggbm90ZSB7CiAgICAgICAgc3RvcHBlZCA9IGZhbHNlOwogICAgfQoKfQoKLy8gVG9rZW4gc3RhbmRhcmQgQVBJCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAoKY29udHJhY3QgRVJDMjAgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50IHN1cHBseSk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoIGFkZHJlc3Mgd2hvICkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCB2YWx1ZSk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoIGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlciApIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQgX2FsbG93YW5jZSk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIG9rKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSggYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUgKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CgogICAgZXZlbnQgVHJhbnNmZXIoIGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoIGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgovKioKICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQp9Cgpjb250cmFjdCBCZXRHYW1lIGlzIERTU3RvcCB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBzdHJ1Y3QgQmV0IHsKICAgICAgICAvLyBwbGF5ZXIKICAgICAgICBhZGRyZXNzIHBsYXllcjsKICAgICAgICBieXRlczMyIHNlY3JldEhhc2g7CiAgICAgICAgdWludDI1NiBhbW91bnQ7CiAgICAgICAgdWludCByb3VuZElkOwoKICAgICAgICAvLyBzZWNyZXQgYW5kIHJldmVhbAogICAgICAgIGJvb2wgaXNSZXZlYWxlZDsgICAgLy8gZmxhZwogICAgICAgIHVpbnQgbm9uY2U7CiAgICAgICAgYm9vbCBndWVzc09kZDsKICAgICAgICBieXRlczMyIHNlY3JldDsKICAgIH0KCiAgICBzdHJ1Y3QgUm91bmQgewogICAgICAgIHVpbnQgYmV0Q291bnQ7CiAgICAgICAgdWludFtdIGJldElkczsKCiAgICAgICAgdWludCBzdGFydEJldEJsb2NrOwogICAgICAgIHVpbnQgc3RhcnRSZXZlYWxCbG9jazsKICAgICAgICB1aW50IG1heEJldEJsb2NrQ291bnQ7ICAgICAgLy8gTWF4IEJsb2NrIENvdW50IGZvciB3YXRpbmcgb3RoZXJzIHRvIGpvaW4gYmV0dGluZywgd2lsbCByZXR1cm4gZnVuZHMgaWYgbm8gZW5vdWdoIGJldHMgam9pbiBpbi4KICAgICAgICB1aW50IG1heFJldmVhbEJsb2NrQ291bnQ7ICAgLy8gU2hvdWxkIGhhdmUgZW5vdWdoIG1pbmltYWwgYmxvY2tzIGUuZy4gPjEwMAogICAgICAgIHVpbnQgZmluYWxpemVkQmxvY2s7CiAgICB9CgogICAgdWludCBwdWJsaWMgYmV0Q291bnQ7CiAgICB1aW50IHB1YmxpYyByb3VuZENvdW50OwoKICAgIG1hcHBpbmcodWludCA9PiBCZXQpIHB1YmxpYyBiZXRzOwogICAgbWFwcGluZyh1aW50ID0+IFJvdW5kKSBwdWJsaWMgcm91bmRzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBiYWxhbmNlc0ZvcldpdGhkcmF3OwoKICAgIHVpbnQgcHVibGljIHBvb2xBbW91bnQ7CiAgICB1aW50MjU2IHB1YmxpYyBpbml0aWFsaXplVGltZTsKICAgIEVSQzIwIHB1YmxpYyBwbHM7CgogICAgc3RydWN0IFRva2VuTWVzc2FnZSB7CiAgICAgICAgYm9vbCBpbml0OwogICAgICAgIGFkZHJlc3MgZmFsbGJhY2tGcm9tOwogICAgICAgIHVpbnQyNTYgZmFsbGJhY2tWYWx1ZTsKICAgIH0KCiAgICBUb2tlbk1lc3NhZ2UgcHVibGljIHRva2VuTXNnOwoKICAgIG1vZGlmaWVyIG5vdE51bGwoYWRkcmVzcyBfYWRkcmVzcykgewogICAgICAgIGlmIChfYWRkcmVzcyA9PSAwKQogICAgICAgICAgICB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHRva2VuUGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkZHJlc3ModGhpcykpOwogICAgICAgIHJlcXVpcmUodG9rZW5Nc2cuaW5pdCk7CgogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gQmV0R2FtZShhZGRyZXNzIF9wbHMpCiAgICB7CiAgICAgICAgaW5pdGlhbGl6ZVRpbWUgPSBub3c7CiAgICAgICAgcm91bmRDb3VudCA9IDE7CgogICAgICAgIHBscyA9IEVSQzIwKF9wbHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uVG9rZW5UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChfdG8gPT0gYWRkcmVzcyh0aGlzKSkKICAgICAgICB7CiAgICAgICAgICAgIGlmIChzdG9wcGVkKSByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWNlaXZlVG9rZW4oYWRkcmVzcyBmcm9tLCB1aW50MjU2IF9hbW91bnQsIGFkZHJlc3MgX3Rva2VuKSBwdWJsaWMKICAgIHsKICAgICAgICAvLyBkbyBub3RoaW5nLgogICAgfQoKICAgIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhwbHMpKTsKICAgICAgICByZXF1aXJlKCFzdG9wcGVkKTsKICAgICAgICB0b2tlbk1zZy5pbml0ID0gdHJ1ZTsKICAgICAgICB0b2tlbk1zZy5mYWxsYmFja0Zyb20gPSBfZnJvbTsKICAgICAgICB0b2tlbk1zZy5mYWxsYmFja1ZhbHVlID0gX3ZhbHVlOwoKICAgICAgICBpZighIHRoaXMuY2FsbChfZGF0YSkpewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CgogICAgICAgIHRva2VuTXNnLmluaXQgPSBmYWxzZTsKICAgICAgICB0b2tlbk1zZy5mYWxsYmFja0Zyb20gPSAweDA7CiAgICAgICAgdG9rZW5Nc2cuZmFsbGJhY2tWYWx1ZSA9IDA7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHN0YXJ0Um91bmRXaXRoRmlyc3RCZXQodWludCBfYmV0Q291bnQsIHVpbnQgX21heEJldEJsb2NrQ291bnQsIHVpbnQgX21heFJldmVhbEJsb2NrQ291bnQsIGJ5dGVzMzIgX3NlY3JldEhhc2hGb3JGaXJzdEJldCkgcHVibGljIHRva2VuUGF5YWJsZSByZXR1cm5zICh1aW50IHJvdW5kSWQpCiAgICB7CiAgICAgICAgcmVxdWlyZShfYmV0Q291bnQgPj0gMik7CiAgICAgICAgcmVxdWlyZShfbWF4QmV0QmxvY2tDb3VudCA+PSAxMDApOwogICAgICAgIHJlcXVpcmUoX21heFJldmVhbEJsb2NrQ291bnQgPj0gMTAwKTsKCiAgICAgICAgcmVxdWlyZSh0b2tlbk1zZy5mYWxsYmFja1ZhbHVlID4gMCk7CgogICAgICAgIHVpbnQgYmV0SWQgPSBhZGRCZXQodG9rZW5Nc2cuZmFsbGJhY2tGcm9tLCBfc2VjcmV0SGFzaEZvckZpcnN0QmV0LCB0b2tlbk1zZy5mYWxsYmFja1ZhbHVlKTsKCiAgICAgICAgcm91bmRJZCA9IGFkZFJvdW5kKF9iZXRDb3VudCwgX21heEJldEJsb2NrQ291bnQsIF9tYXhSZXZlYWxCbG9ja0NvdW50LCBiZXRJZCk7CiAgICB9CgogICAgZnVuY3Rpb24gYmV0V2l0aFJvdW5kKHVpbnQgX3JvdW5kSWQsIGJ5dGVzMzIgX3NlY3JldEhhc2hGb3JCZXQpIHB1YmxpYyB0b2tlblBheWFibGUKICAgIHsKICAgICAgICByZXF1aXJlKHRva2VuTXNnLmZhbGxiYWNrVmFsdWUgPiAwKTsKICAgICAgICByZXF1aXJlKHJvdW5kc1tfcm91bmRJZF0uZmluYWxpemVkQmxvY2sgPT0gMCk7CiAgICAgICAgcmVxdWlyZShyb3VuZHNbX3JvdW5kSWRdLmJldElkcy5sZW5ndGggPCByb3VuZHNbX3JvdW5kSWRdLmJldENvdW50KTsKICAgICAgICByZXF1aXJlKCFpc1BsYXllckluUm91bmQoX3JvdW5kSWQsIHRva2VuTXNnLmZhbGxiYWNrRnJvbSkpOwoKICAgICAgICB1aW50IGJldElkID0gYWRkQmV0KHRva2VuTXNnLmZhbGxiYWNrRnJvbSwgX3NlY3JldEhhc2hGb3JCZXQsIHRva2VuTXNnLmZhbGxiYWNrVmFsdWUpOwogICAgICAgIHJvdW5kc1tfcm91bmRJZF0uYmV0SWRzLnB1c2goYmV0SWQpOwogICAgICAgIGJldHNbYmV0SWRdLnJvdW5kSWQgPSBfcm91bmRJZDsKCiAgICAgICAgaWYgKHJvdW5kc1tfcm91bmRJZF0uYmV0SWRzLmxlbmd0aCA9PSByb3VuZHNbX3JvdW5kSWRdLmJldENvdW50KQogICAgICAgIHsKICAgICAgICAgICAgcm91bmRzW19yb3VuZElkXS5zdGFydFJldmVhbEJsb2NrID0gZ2V0QmxvY2tOdW1iZXIoKTsKCiAgICAgICAgICAgIFJvdW5kUmV2ZWFsU3RhcnRlZChfcm91bmRJZCwgcm91bmRzW19yb3VuZElkXS5zdGFydFJldmVhbEJsb2NrKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gYW55b25lIGNhbiB0cnkgdG8gcmV2ZWFsIHRoZSBiZXQKICAgIGZ1bmN0aW9uIHJldmVhbEJldCh1aW50IGJldElkLCB1aW50IF9ub25jZSwgYm9vbCBfZ3Vlc3NPZGQsIGJ5dGVzMzIgX3NlY3JldCkgcHVibGljIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgQmV0IGJldCA9IGJldHNbYmV0SWRdOwogICAgICAgIFJvdW5kIHJvdW5kID0gcm91bmRzW2JldC5yb3VuZElkXTsKICAgICAgICByZXF1aXJlKHJvdW5kLmJldElkcy5sZW5ndGggPT0gcm91bmQuYmV0Q291bnQpOwogICAgICAgIHJlcXVpcmUocm91bmQuZmluYWxpemVkQmxvY2sgPT0gMCk7CgogICAgICAgIGlmIChiZXQuc2VjcmV0SGFzaCA9PSBrZWNjYWsyNTYoX25vbmNlLCBfZ3Vlc3NPZGQsIF9zZWNyZXQpICkKICAgICAgICB7CiAgICAgICAgICAgIGJldC5pc1JldmVhbGVkID0gdHJ1ZTsKICAgICAgICAgICAgYmV0Lm5vbmNlID0gX25vbmNlOwogICAgICAgICAgICBiZXQuZ3Vlc3NPZGQgPSBfZ3Vlc3NPZGQ7CiAgICAgICAgICAgIGJldC5zZWNyZXQgPSBfc2VjcmV0OwogICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvLyBhbnlvbmUgY2FuIHRyeSB0byBmaW5hbGl6ZSBhZnRlciB0aGUgbWF4IGJsb2NrIGNvdW50IG9yIGJldHMgaW4gdGhlIHJvdW5kIGFyZSBhbGwgcmV2ZWFsZWQuCiAgICBmdW5jdGlvbiBmaW5hbGl6ZVJvdW5kKHVpbnQgcm91bmRJZCkgcHVibGljCiAgICB7CiAgICAgICAgcmVxdWlyZShyb3VuZHNbcm91bmRJZF0uZmluYWxpemVkQmxvY2sgPT0gMCk7CiAgICAgICAgdWludCBmaW5hbGl6ZWRCbG9jayA9IGdldEJsb2NrTnVtYmVyKCk7CiAgICAgICAgCiAgICAgICAgdWludCBpID0gMDsKICAgICAgICBCZXQgYmV0OwogICAgICAgIGlmIChyb3VuZHNbcm91bmRJZF0uYmV0SWRzLmxlbmd0aCA8IHJvdW5kc1tyb3VuZElkXS5iZXRDb3VudCAmJiBmaW5hbGl6ZWRCbG9jay5zdWIocm91bmRzW3JvdW5kSWRdLnN0YXJ0QmV0QmxvY2spID4gcm91bmRzW3JvdW5kSWRdLm1heEJldEJsb2NrQ291bnQpCiAgICAgICAgewogICAgICAgICAgICAvLyByZXR1cm4gZnVuZHMgdG8gcGxheWVycyBpZiBiZXR0aW5nIHRpbWVvdXQKICAgICAgICAgICAgZm9yIChpPTA7IGk8cm91bmRzW3JvdW5kSWRdLmJldElkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgYmV0ID0gYmV0c1tyb3VuZHNbcm91bmRJZF0uYmV0SWRzW2ldXTsKICAgICAgICAgICAgICAgIGJhbGFuY2VzRm9yV2l0aGRyYXdbYmV0LnBsYXllcl0gPSBiYWxhbmNlc0ZvcldpdGhkcmF3W2JldC5wbGF5ZXJdLmFkZChiZXQuYW1vdW50KTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAocm91bmRzW3JvdW5kSWRdLmJldElkcy5sZW5ndGggPT0gcm91bmRzW3JvdW5kSWRdLmJldENvdW50KSB7CiAgICAgICAgICAgIGJvb2wgYmV0c1JldmVhbGVkID0gYmV0UmV2ZWFsZWQocm91bmRJZCk7CiAgICAgICAgICAgIGlmICghYmV0c1JldmVhbGVkICYmIGZpbmFsaXplZEJsb2NrLnN1Yihyb3VuZHNbcm91bmRJZF0uc3RhcnRSZXZlYWxCbG9jaykgPiByb3VuZHNbcm91bmRJZF0ubWF4UmV2ZWFsQmxvY2tDb3VudCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gcmV0dXJuIGZ1bmRzIHRvIHBsYXllcnMgd2hvIGhhdmUgYWxyZWFkeSByZXZlYWxlZAogICAgICAgICAgICAgICAgLy8gYnV0IGZvciB0aG9zZSB3aG8gZGlkbid0IHJldmVhbCwgdGhlIGZ1bmRzIGdvIHRvIHBvb2wKICAgICAgICAgICAgICAgIC8vIHJldmVhbGluZyB0aW1lb3V0CiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcm91bmRzW3JvdW5kSWRdLmJldElkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmIChiZXRzW3JvdW5kc1tyb3VuZElkXS5iZXRJZHNbaV1dLmlzUmV2ZWFsZWQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlc0ZvcldpdGhkcmF3W2JldHNbcm91bmRzW3JvdW5kSWRdLmJldElkc1tpXV0ucGxheWVyXSA9IGJhbGFuY2VzRm9yV2l0aGRyYXdbYmV0c1tyb3VuZHNbcm91bmRJZF0uYmV0SWRzW2ldXS5wbGF5ZXJdLmFkZChiZXRzW3JvdW5kc1tyb3VuZElkXS5iZXRJZHNbaV1dLmFtb3VudCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBnbyB0byBwb29sCiAgICAgICAgICAgICAgICAgICAgICAgIHBvb2xBbW91bnQgPSBwb29sQW1vdW50LmFkZChiZXRzW3JvdW5kc1tyb3VuZElkXS5iZXRJZHNbaV1dLmFtb3VudCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGJldHNSZXZlYWxlZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdWludCBkdXN0TGVmdCA9IGZpbmFsaXplUmV3YXJkRm9yUm91bmQocm91bmRJZCk7CiAgICAgICAgICAgICAgICBwb29sQW1vdW50ID0gcG9vbEFtb3VudC5hZGQoZHVzdExlZnQpOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgIH0KCiAgICAgICAgfSBlbHNlCiAgICAgICAgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIHJvdW5kc1tyb3VuZElkXS5maW5hbGl6ZWRCbG9jayA9IGZpbmFsaXplZEJsb2NrOwogICAgICAgIFJvdW5kRmluYWxpemVkKHJvdW5kSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgcHVibGljIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgdmFyIGFtb3VudCA9IGJhbGFuY2VzRm9yV2l0aGRyYXdbbXNnLnNlbmRlcl07CiAgICAgICAgaWYgKGFtb3VudCA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNGb3JXaXRoZHJhd1ttc2cuc2VuZGVyXSA9IDA7CgogICAgICAgICAgICBpZiAoIXBscy50cmFuc2Zlcihtc2cuc2VuZGVyLCBhbW91bnQpKSB7CiAgICAgICAgICAgICAgICAvLyBObyBuZWVkIHRvIGNhbGwgdGhyb3cgaGVyZSwganVzdCByZXNldCB0aGUgYW1vdW50IG93aW5nCiAgICAgICAgICAgICAgICBiYWxhbmNlc0ZvcldpdGhkcmF3W21zZy5zZW5kZXJdID0gYW1vdW50OwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsYWltRnJvbVBvb2woKSBwdWJsaWMgYXV0aAogICAgewogICAgICAgIG93bmVyLnRyYW5zZmVyKHBvb2xBbW91bnQpOwogICAgICAgIENsYWltRnJvbVBvb2woKTsKICAgIH0KCiAgICAvKgogICAgICogQ29uc3RhbnQgZnVuY3Rpb25zCiAgICAgKi8KICAgIC8vIEZvciBwbGF5ZXJzIHRvIGNhbGN1bGF0ZSBoYXNoIG9mIHNlY3JldCBiZWZvcmUgc3RhcnQgYSBiZXQuCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVTZWNyZXRIYXNoKHVpbnQgX25vbmNlLCBib29sIF9ndWVzc09kZCwgYnl0ZXMzMiBfc2VjcmV0KSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAoYnl0ZXMzMiBzZWNyZXRIYXNoKQogICAgewogICAgICAgIHNlY3JldEhhc2ggPSBrZWNjYWsyNTYoX25vbmNlLCBfZ3Vlc3NPZGQsIF9zZWNyZXQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzUGxheWVySW5Sb3VuZCh1aW50IF9yb3VuZElkLCBhZGRyZXNzIF9wbGF5ZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sIGlzSW4pCiAgICB7CiAgICAgICAgZm9yICh1aW50IGk9MDsgaSA8IHJvdW5kc1tfcm91bmRJZF0uYmV0SWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChiZXRzW3JvdW5kc1tfcm91bmRJZF0uYmV0SWRzW2ldXS5wbGF5ZXIgPT0gX3BsYXllcikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaXNJbiA9IHRydWU7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlzSW4gPSBmYWxzZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0QmV0SWRzKHVpbnQgcm91bmRJbmRleCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnRbXSBfYmV0SWRzKQogICAgewogICAgICAgIF9iZXRJZHMgPSBuZXcgdWludFtdKHJvdW5kc1tyb3VuZEluZGV4XS5iZXRJZHMubGVuZ3RoKTsKCiAgICAgICAgZm9yICh1aW50IGk9MDsgaSA8IHJvdW5kc1tyb3VuZEluZGV4XS5iZXRJZHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIF9iZXRJZHNbaV0gPSByb3VuZHNbcm91bmRJbmRleF0uYmV0SWRzW2ldOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJldElkQXRSb3VuZCh1aW50IHJvdW5kSW5kZXgsIHVpbnQgaW5uZXJJbmRleCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcm91bmRzW3JvdW5kSW5kZXhdLmJldElkc1tpbm5lckluZGV4XTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRCZXRTaXplQXRSb3VuZCh1aW50IHJvdW5kSW5kZXgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHJvdW5kc1tyb3VuZEluZGV4XS5iZXRJZHMubGVuZ3RoOwogICAgfQoKICAgIGZ1bmN0aW9uIGJldFJldmVhbGVkKHVpbnQgcm91bmRJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMoYm9vbCkKICAgIHsKICAgICAgICBib29sIGJldHNSZXZlYWxlZCA9IHRydWU7CiAgICAgICAgdWludCBpID0gMDsKICAgICAgICBCZXQgYmV0OwogICAgICAgIGZvciAoaT0wOyBpPHJvdW5kc1tyb3VuZElkXS5iZXRJZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYmV0ID0gYmV0c1tyb3VuZHNbcm91bmRJZF0uYmV0SWRzW2ldXTsKICAgICAgICAgICAgaWYgKCFiZXQuaXNSZXZlYWxlZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYmV0c1JldmVhbGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gYmV0c1JldmVhbGVkOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRKYWNrcG90UmVzdWx0cyh1aW50IHJvdW5kSWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQsIHVpbnQsIGJvb2wpCiAgICB7CiAgICAgICAgdWludCBqYWNrcG90U3VtOwogICAgICAgIHVpbnQgamFja3BvdFNlY3JldDsKICAgICAgICB1aW50IG9kZFN1bTsKCiAgICAgICAgdWludCBpID0gMDsKICAgICAgICBmb3IgKGk9MDsgaTxyb3VuZHNbcm91bmRJZF0uYmV0SWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGphY2twb3RTdW0gPSBqYWNrcG90U3VtLmFkZChiZXRzW3JvdW5kc1tyb3VuZElkXS5iZXRJZHNbaV1dLmFtb3VudCk7CiAgICAgICAgICAgIGphY2twb3RTZWNyZXQgPSBqYWNrcG90U2VjcmV0LmFkZCh1aW50KGJldHNbcm91bmRzW3JvdW5kSWRdLmJldElkc1tpXV0uc2VjcmV0KSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiggYmV0c1tyb3VuZHNbcm91bmRJZF0uYmV0SWRzW2ldXS5ndWVzc09kZCApewogICAgICAgICAgICAgICAgb2RkU3VtID0gb2RkU3VtLmFkZChiZXRzW3JvdW5kc1tyb3VuZElkXS5iZXRJZHNbaV1dLmFtb3VudCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgYm9vbCBpc09kZFdpbiA9IChqYWNrcG90U2VjcmV0ICUgMiA9PSAxKTsKCiAgICAgICAgLy8gYWxsIGlzIG9kZCwgb3IgYWxsIGlzIG5vdCBvZGQKICAgICAgICBpZiAob2RkU3VtID09IDAgfHwgb2RkU3VtID09IGphY2twb3RTdW0pCiAgICAgICAgewogICAgICAgICAgICBpc09kZFdpbiA9IG9kZFN1bSA+IDAgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiAoamFja3BvdFN1bSwgb2RkU3VtLCBpc09kZFdpbik7CiAgICB9CgogICAgLy8vIEBub3RpY2UgVGhpcyBmdW5jdGlvbiBpcyBvdmVycmlkZGVuIGJ5IHRoZSB0ZXN0IE1vY2tzLgogICAgZnVuY3Rpb24gZ2V0QmxvY2tOdW1iZXIoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGJsb2NrLm51bWJlcjsKICAgIH0KCiAgICAvKgogICAgICogSW50ZXJuYWwgZnVuY3Rpb25zCiAgICAgKi8KICAgIC8vLyBAZGV2IEFkZHMgYSBuZXcgYmV0IHRvIHRoZSBiZXQgbWFwcGluZywgaWYgYmV0IGRvZXMgbm90IGV4aXN0IHlldC4KICAgIC8vLyBAcGFyYW0gX3BsYXllciBUaGUgcGxheWVyIG9mIHRoZSBiZXQuCiAgICAvLy8gQHBhcmFtIF9zZWNyZXRIYXNoIFRoZSBoYXNoIG9mIHRoZSBub25jZSwgZ3Vlc3NPZGQsIGFuZCBzZWNyZXQgZm9yIHRoZSBiZXQsIGhhc2gg77ydIGtlY2NhazI1NihfbnVtLCBfZ3Vlc3NPZGQsIF9zZWNyZXQpIAogICAgLy8vIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdGhlIGJldC4KICAgIC8vLyBAcmV0dXJuIFJldHVybnMgYmV0IElELgogICAgZnVuY3Rpb24gYWRkQmV0KGFkZHJlc3MgX3BsYXllciwgYnl0ZXMzMiBfc2VjcmV0SGFzaCwgdWludDI1NiBfYW1vdW50KQogICAgICAgIGludGVybmFsCiAgICAgICAgbm90TnVsbChfcGxheWVyKQogICAgICAgIHJldHVybnMgKHVpbnQgYmV0SWQpCiAgICB7CiAgICAgICAgYmV0SWQgPSBiZXRDb3VudDsKICAgICAgICBiZXRzW2JldElkXSA9IEJldCh7CiAgICAgICAgICAgIHBsYXllcjogX3BsYXllciwKICAgICAgICAgICAgc2VjcmV0SGFzaDogX3NlY3JldEhhc2gsCiAgICAgICAgICAgIGFtb3VudDogX2Ftb3VudCwKICAgICAgICAgICAgcm91bmRJZDogMCwKICAgICAgICAgICAgaXNSZXZlYWxlZDogZmFsc2UsCiAgICAgICAgICAgIG5vbmNlOjAsCiAgICAgICAgICAgIGd1ZXNzT2RkOmZhbHNlLAogICAgICAgICAgICBzZWNyZXQ6ICIiCiAgICAgICAgfSk7CiAgICAgICAgYmV0Q291bnQgKz0gMTsKICAgICAgICBCZXRTdWJtaXNzaW9uKGJldElkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRSb3VuZCh1aW50IF9iZXRDb3VudCwgdWludCBfbWF4QmV0QmxvY2tDb3VudCwgdWludCBfbWF4UmV2ZWFsQmxvY2tDb3VudCwgdWludCBfYmV0SWQpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICByZXR1cm5zICh1aW50IHJvdW5kSWQpCiAgICB7CiAgICAgICAgcm91bmRJZCA9IHJvdW5kQ291bnQ7CiAgICAgICAgcm91bmRzW3JvdW5kSWRdLmJldENvdW50ID0gX2JldENvdW50OwogICAgICAgIHJvdW5kc1tyb3VuZElkXS5tYXhCZXRCbG9ja0NvdW50ID0gX21heEJldEJsb2NrQ291bnQ7CiAgICAgICAgcm91bmRzW3JvdW5kSWRdLm1heFJldmVhbEJsb2NrQ291bnQgPSBfbWF4UmV2ZWFsQmxvY2tDb3VudDsKICAgICAgICByb3VuZHNbcm91bmRJZF0uYmV0SWRzLnB1c2goX2JldElkKTsKICAgICAgICByb3VuZHNbcm91bmRJZF0uc3RhcnRCZXRCbG9jayA9IGdldEJsb2NrTnVtYmVyKCk7CiAgICAgICAgcm91bmRzW3JvdW5kSWRdLnN0YXJ0UmV2ZWFsQmxvY2sgPSAwOwogICAgICAgIHJvdW5kc1tyb3VuZElkXS5maW5hbGl6ZWRCbG9jayA9IDA7CgogICAgICAgIGJldHNbX2JldElkXS5yb3VuZElkID0gcm91bmRJZDsKCiAgICAgICAgcm91bmRDb3VudCArPSAxOwogICAgICAgIFJvdW5kU3VibWlzc2lvbihyb3VuZElkKTsKICAgICAgICBSb3VuZEJldFN0YXJ0ZWQocm91bmRJZCwgcm91bmRzW3JvdW5kSWRdLnN0YXJ0QmV0QmxvY2spOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBmaW5hbGl6ZVJld2FyZEZvckJldCh1aW50IGJldElkLCBib29sIGlzT2RkV2luLCB1aW50IGphY2twb3RTdW0sIHVpbnQgb2RkU3VtLCB1aW50IGV2ZW5TdW0sIHVpbnQgZHVzdExlZnQpIGludGVybmFsIHJldHVybnModWludCkKICAgIHsKICAgICAgICB1aW50IHJld2FyZCA9IDA7CiAgICAgICAgaWYgKGlzT2RkV2luICYmIGJldHNbYmV0SWRdLmd1ZXNzT2RkKQogICAgICAgIHsKICAgICAgICAgICAgcmV3YXJkID0gYmV0c1tiZXRJZF0uYW1vdW50Lm11bChqYWNrcG90U3VtKS5kaXYob2RkU3VtKTsKICAgICAgICAgICAgYmFsYW5jZXNGb3JXaXRoZHJhd1tiZXRzW2JldElkXS5wbGF5ZXJdID0gYmFsYW5jZXNGb3JXaXRoZHJhd1tiZXRzW2JldElkXS5wbGF5ZXJdLmFkZChyZXdhcmQpOwogICAgICAgICAgICBkdXN0TGVmdCA9IGR1c3RMZWZ0LnN1YihyZXdhcmQpOwogICAgICAgIH0gZWxzZSBpZiAoIWlzT2RkV2luICYmICFiZXRzW2JldElkXS5ndWVzc09kZCkKICAgICAgICB7CiAgICAgICAgICAgIHJld2FyZCA9IGJldHNbYmV0SWRdLmFtb3VudC5tdWwoamFja3BvdFN1bSkuZGl2KGV2ZW5TdW0pOwogICAgICAgICAgICBiYWxhbmNlc0ZvcldpdGhkcmF3W2JldHNbYmV0SWRdLnBsYXllcl0gPSBiYWxhbmNlc0ZvcldpdGhkcmF3W2JldHNbYmV0SWRdLnBsYXllcl0uYWRkKHJld2FyZCk7CiAgICAgICAgICAgIGR1c3RMZWZ0ID0gZHVzdExlZnQuc3ViKHJld2FyZCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBkdXN0TGVmdDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZmluYWxpemVSZXdhcmRGb3JSb3VuZCh1aW50IHJvdW5kSWQpIGludGVybmFsIHJldHVybnMgKHVpbnQgZHVzdExlZnQpCiAgICB7CiAgICAgICAgdmFyIChqYWNrcG90U3VtLCBvZGRTdW0sIGlzT2RkV2luKSA9IGdldEphY2twb3RSZXN1bHRzKHJvdW5kSWQpOwoKICAgICAgICBkdXN0TGVmdCA9IGphY2twb3RTdW07CgogICAgICAgIHVpbnQgaSA9IDA7CiAgICAgICAgZm9yIChpPTA7IGk8cm91bmRzW3JvdW5kSWRdLmJldElkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBkdXN0TGVmdCA9IGZpbmFsaXplUmV3YXJkRm9yQmV0KHJvdW5kc1tyb3VuZElkXS5iZXRJZHNbaV0sIGlzT2RkV2luLCBqYWNrcG90U3VtLCBvZGRTdW0sIGphY2twb3RTdW0gLSBvZGRTdW0sIGR1c3RMZWZ0KTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vLyBAbm90aWNlIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGJ5IHRoZSBjb250cm9sbGVyIHRvIGV4dHJhY3QgbWlzdGFrZW5seQogICAgLy8vICBzZW50IHRva2VucyB0byB0aGlzIGNvbnRyYWN0LgogICAgLy8vIEBwYXJhbSBfdG9rZW4gVGhlIGFkZHJlc3Mgb2YgdGhlIHRva2VuIGNvbnRyYWN0IHRoYXQgeW91IHdhbnQgdG8gcmVjb3ZlcgogICAgLy8vICBzZXQgdG8gMCBpbiBjYXNlIHlvdSB3YW50IHRvIGV4dHJhY3QgZXRoZXIuCiAgICBmdW5jdGlvbiBjbGFpbVRva2VucyhhZGRyZXNzIF90b2tlbikgcHVibGljIGF1dGggewogICAgICAgIGlmIChfdG9rZW4gPT0gMHgwKSB7CiAgICAgICAgICAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgRVJDMjAgdG9rZW4gPSBFUkMyMChfdG9rZW4pOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgYmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICAKICAgICAgICB0b2tlbi50cmFuc2Zlcihvd25lciwgYmFsYW5jZSk7CiAgICAgICAgQ2xhaW1lZFRva2VucyhfdG9rZW4sIG93bmVyLCBiYWxhbmNlKTsKICAgIH0KCiAgICBldmVudCBCZXRTdWJtaXNzaW9uKHVpbnQgaW5kZXhlZCBfYmV0SWQpOwogICAgZXZlbnQgUm91bmRTdWJtaXNzaW9uKHVpbnQgaW5kZXhlZCBfcm91bmRJZCk7CiAgICBldmVudCBDbGFpbUZyb21Qb29sKCk7CiAgICBldmVudCBDbGFpbWVkVG9rZW5zKGFkZHJlc3MgaW5kZXhlZCBfdG9rZW4sIGFkZHJlc3MgaW5kZXhlZCBfY29udHJvbGxlciwgdWludDI1NiBfYW1vdW50KTsKICAgIGV2ZW50IFJvdW5kRmluYWxpemVkKHVpbnQgaW5kZXhlZCBfcm91bmRJZCk7CiAgICBldmVudCBSb3VuZEJldFN0YXJ0ZWQodWludCBpbmRleGVkIF9yb3VuZElkLCB1aW50IHN0YXJ0QmV0QmxvY2spOwogICAgZXZlbnQgUm91bmRSZXZlYWxTdGFydGVkKHVpbnQgaW5kZXhlZCBfcm91bmRJZCwgdWludCBzdGFydFJldmVhbEJsb2NrKTsKfQ=='.
	

]
