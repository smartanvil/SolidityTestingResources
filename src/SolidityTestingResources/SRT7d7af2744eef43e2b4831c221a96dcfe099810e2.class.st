Class {
	#name : #SRT7d7af2744eef43e2b4831c221a96dcfe099810e2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7d7af2744eef43e2b4831c221a96dcfe099810e2 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKCmNvbnRyYWN0IEludGVyZmFjZUNvbnRlbnRDcmVhdG9yVW5pdmVyc2UgewogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIpOwogIGZ1bmN0aW9uIHByaWNlT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBwcmljZSk7CiAgZnVuY3Rpb24gZ2V0TmV4dFByaWNlKHVpbnQgcHJpY2UsIHVpbnQgX3Rva2VuSWQpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIGxhc3RTdWJUb2tlbkJ1eWVyT2YodWludCB0b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zKGFkZHJlc3MpOwogIGZ1bmN0aW9uIGxhc3RTdWJUb2tlbkNyZWF0b3JPZih1aW50IHRva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMoYWRkcmVzcyk7CgogIC8vCiAgZnVuY3Rpb24gY3JlYXRlQ29sbGVjdGlibGUodWludDI1NiB0b2tlbklkLCB1aW50MjU2IF9wcmljZSwgYWRkcmVzcyBjcmVhdG9yLCBhZGRyZXNzIG93bmVyKSBleHRlcm5hbCA7Cn0KCmNvbnRyYWN0IEludGVyZmFjZVlDQyB7CiAgZnVuY3Rpb24gcGF5Rm9yVXBncmFkZShhZGRyZXNzIHVzZXIsIHVpbnQgcHJpY2UpIGV4dGVybmFsICByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIG1pbnRDb2luc0Zvck9sZENvbGxlY3RpYmxlcyhhZGRyZXNzIHRvLCB1aW50MjU2IGFtb3VudCwgYWRkcmVzcyB1bml2ZXJzZU93bmVyKSBleHRlcm5hbCAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiB0cmFkZVByZVRva2VuKHVpbnQgcHJpY2UsIGFkZHJlc3MgYnV5ZXIsIGFkZHJlc3Mgc2VsbGVyLCB1aW50IGJ1cm5QZXJjZW50LCBhZGRyZXNzIHVuaXZlcnNlT3duZXIpIGV4dGVybmFsOwogIGZ1bmN0aW9uIHBheW91dEZvck1pbmluZyhhZGRyZXNzIHVzZXIsIHVpbnQgYW1vdW50KSBleHRlcm5hbDsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKfQoKY29udHJhY3QgSW50ZXJmYWNlTWluaW5nIHsKICBmdW5jdGlvbiBjcmVhdGVNaW5lRm9yVG9rZW4odWludCB0b2tlbklkLCB1aW50IGxldmVsLCB1aW50IHhwLCB1aW50IG5leHRMZXZlbEJyZWFrLCB1aW50IGJsb2NrbnVtYmVyKSBleHRlcm5hbDsKICBmdW5jdGlvbiBwYXlvdXRNaW5pbmcodWludCB0b2tlbklkLCBhZGRyZXNzIG93bmVyLCBhZGRyZXNzIG5ld093bmVyKSBleHRlcm5hbDsKICBmdW5jdGlvbiBsZXZlbFVwTWluaW5nKHVpbnQgdG9rZW5JZCkgZXh0ZXJuYWw7Cn0KCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBPd25lZCB7CiAgLy8gVGhlIGFkZHJlc3NlcyBvZiB0aGUgYWNjb3VudHMgKG9yIGNvbnRyYWN0cykgdGhhdCBjYW4gZXhlY3V0ZSBhY3Rpb25zIHdpdGhpbiBlYWNoIHJvbGVzLgogIGFkZHJlc3MgcHVibGljIGNlb0FkZHJlc3M7CiAgYWRkcmVzcyBwdWJsaWMgY29vQWRkcmVzczsKICBhZGRyZXNzIHByaXZhdGUgbmV3Q2VvQWRkcmVzczsKICBhZGRyZXNzIHByaXZhdGUgbmV3Q29vQWRkcmVzczsKCgogIGZ1bmN0aW9uIE93bmVkKCkgcHVibGljIHsKICAgICAgY2VvQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgIGNvb0FkZHJlc3MgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqKiBBQ0NFU1MgTU9ESUZJRVJTICoqKi8KICAvLy8gQGRldiBBY2Nlc3MgbW9kaWZpZXIgZm9yIENFTy1vbmx5IGZ1bmN0aW9uYWxpdHkKICBtb2RpZmllciBvbmx5Q0VPKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNlb0FkZHJlc3MpOwogICAgXzsKICB9CgogIC8vLyBAZGV2IEFjY2VzcyBtb2RpZmllciBmb3IgQ09PLW9ubHkgZnVuY3Rpb25hbGl0eQogIG1vZGlmaWVyIG9ubHlDT08oKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY29vQWRkcmVzcyk7CiAgICBfOwogIH0KCiAgLy8vIEFjY2VzcyBtb2RpZmllciBmb3IgY29udHJhY3Qgb3duZXIgb25seSBmdW5jdGlvbmFsaXR5CiAgbW9kaWZpZXIgb25seUNMZXZlbCgpIHsKICAgIHJlcXVpcmUoCiAgICAgIG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyB8fAogICAgICBtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MKICAgICk7CiAgICBfOwogIH0KCiAgLy8vIEBkZXYgQXNzaWducyBhIG5ldyBhZGRyZXNzIHRvIGFjdCBhcyB0aGUgQ0VPLiBPbmx5IGF2YWlsYWJsZSB0byB0aGUgY3VycmVudCBDRU8uCiAgLy8vIEBwYXJhbSBfbmV3Q0VPIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgQ0VPCiAgZnVuY3Rpb24gc2V0Q0VPKGFkZHJlc3MgX25ld0NFTykgcHVibGljIG9ubHlDRU8gewogICAgcmVxdWlyZShfbmV3Q0VPICE9IGFkZHJlc3MoMCkpOwogICAgbmV3Q2VvQWRkcmVzcyA9IF9uZXdDRU87CiAgfQoKICAvLy8gQGRldiBBc3NpZ25zIGEgbmV3IGFkZHJlc3MgdG8gYWN0IGFzIHRoZSBDT08uIE9ubHkgYXZhaWxhYmxlIHRvIHRoZSBjdXJyZW50IENPTy4KICAvLy8gQHBhcmFtIF9uZXdDT08gVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBDT08KICBmdW5jdGlvbiBzZXRDT08oYWRkcmVzcyBfbmV3Q09PKSBwdWJsaWMgb25seUNFTyB7CiAgICByZXF1aXJlKF9uZXdDT08gIT0gYWRkcmVzcygwKSk7CiAgICBuZXdDb29BZGRyZXNzID0gX25ld0NPTzsKICB9CgogIGZ1bmN0aW9uIGFjY2VwdENlb093bmVyc2hpcCgpIHB1YmxpYyB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdDZW9BZGRyZXNzKTsKICAgICAgcmVxdWlyZShhZGRyZXNzKDApICE9IG5ld0Nlb0FkZHJlc3MpOwogICAgICBjZW9BZGRyZXNzID0gbmV3Q2VvQWRkcmVzczsKICAgICAgbmV3Q2VvQWRkcmVzcyA9IGFkZHJlc3MoMCk7CiAgfQoKICBmdW5jdGlvbiBhY2NlcHRDb29Pd25lcnNoaXAoKSBwdWJsaWMgewogICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3Q29vQWRkcmVzcyk7CiAgICAgIHJlcXVpcmUoYWRkcmVzcygwKSAhPSBuZXdDb29BZGRyZXNzKTsKICAgICAgY29vQWRkcmVzcyA9IG5ld0Nvb0FkZHJlc3M7CiAgICAgIG5ld0Nvb0FkZHJlc3MgPSBhZGRyZXNzKDApOwogIH0KCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgeW91Q29sbGVjdENvbnRyYWN0czsKICBmdW5jdGlvbiBhZGRZb3VDb2xsZWN0Q29udHJhY3QoYWRkcmVzcyBjb250cmFjdEFkZHJlc3MsIGJvb2wgYWN0aXZlKSBwdWJsaWMgb25seUNPTyB7CiAgICB5b3VDb2xsZWN0Q29udHJhY3RzW2NvbnRyYWN0QWRkcmVzc10gPSBhY3RpdmU7CiAgfQogIG1vZGlmaWVyIG9ubHlZQ0MoKSB7CiAgICByZXF1aXJlKHlvdUNvbGxlY3RDb250cmFjdHNbbXNnLnNlbmRlcl0pOwogICAgXzsKICB9CgogIEludGVyZmFjZVlDQyB5Y2M7CiAgSW50ZXJmYWNlQ29udGVudENyZWF0b3JVbml2ZXJzZSB5Y3Q7CiAgSW50ZXJmYWNlTWluaW5nIHljbTsKICBmdW5jdGlvbiBzZXRNYWluWW91Q29sbGVjdENvbnRyYWN0QWRkcmVzc2VzKGFkZHJlc3MgeWNjQ29udHJhY3QsIGFkZHJlc3MgeWN0Q29udHJhY3QsIGFkZHJlc3MgeWNtQ29udHJhY3QsIGFkZHJlc3NbXSBvdGhlckNvbnRyYWN0cykgcHVibGljIG9ubHlDT08gewogICAgeWNjID0gSW50ZXJmYWNlWUNDKHljY0NvbnRyYWN0KTsKICAgIHljdCA9IEludGVyZmFjZUNvbnRlbnRDcmVhdG9yVW5pdmVyc2UoeWN0Q29udHJhY3QpOwogICAgeWNtID0gSW50ZXJmYWNlTWluaW5nKHljbUNvbnRyYWN0KTsKICAgIHlvdUNvbGxlY3RDb250cmFjdHNbeWNjQ29udHJhY3RdID0gdHJ1ZTsKICAgIHlvdUNvbGxlY3RDb250cmFjdHNbeWN0Q29udHJhY3RdID0gdHJ1ZTsKICAgIHlvdUNvbGxlY3RDb250cmFjdHNbeWNtQ29udHJhY3RdID0gdHJ1ZTsKICAgIGZvciAodWludDE2IGluZGV4ID0gMDsgaW5kZXggPCBvdGhlckNvbnRyYWN0cy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgeW91Q29sbGVjdENvbnRyYWN0c1tvdGhlckNvbnRyYWN0c1tpbmRleF1dID0gdHJ1ZTsKICAgIH0KICB9CiAgZnVuY3Rpb24gc2V0WWNjQ29udHJhY3RBZGRyZXNzKGFkZHJlc3MgeWNjQ29udHJhY3QpIHB1YmxpYyBvbmx5Q09PIHsKICAgIHljYyA9IEludGVyZmFjZVlDQyh5Y2NDb250cmFjdCk7CiAgICB5b3VDb2xsZWN0Q29udHJhY3RzW3ljY0NvbnRyYWN0XSA9IHRydWU7CiAgfQogIGZ1bmN0aW9uIHNldFljdENvbnRyYWN0QWRkcmVzcyhhZGRyZXNzIHljdENvbnRyYWN0KSBwdWJsaWMgb25seUNPTyB7CiAgICB5Y3QgPSBJbnRlcmZhY2VDb250ZW50Q3JlYXRvclVuaXZlcnNlKHljdENvbnRyYWN0KTsKICAgIHlvdUNvbGxlY3RDb250cmFjdHNbeWN0Q29udHJhY3RdID0gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gc2V0WWNtQ29udHJhY3RBZGRyZXNzKGFkZHJlc3MgeWNtQ29udHJhY3QpIHB1YmxpYyBvbmx5Q09PIHsKICAgIHljbSA9IEludGVyZmFjZU1pbmluZyh5Y21Db250cmFjdCk7CiAgICB5b3VDb2xsZWN0Q29udHJhY3RzW3ljbUNvbnRyYWN0XSA9IHRydWU7CiAgfQoKfQoKY29udHJhY3QgVHJhbnNmZXJJbnRlcmZhY2VFUkM3MjFZQyB7CiAgZnVuY3Rpb24gdHJhbnNmZXJUb2tlbihhZGRyZXNzIHRvLCB1aW50MjU2IHRva2VuSWQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwp9CmNvbnRyYWN0IFRyYW5zZmVySW50ZXJmYWNlRVJDMjAgewogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdG9rZW5zKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKfQoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBFUkMgVG9rZW4gU3RhbmRhcmQgIzIwIEludGVyZmFjZQovLyBodHRwczovL2dpdGh1Yi5jb20vQ29uc2VuU3lzL1Rva2Vucy9ibG9iL21hc3Rlci9jb250cmFjdHMvZWlwMjAvRUlQMjAuc29sCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KY29udHJhY3QgWW91Q29sbGVjdEJhc2UgaXMgT3duZWQgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBldmVudCBSZWRCdXR0b24odWludCB2YWx1ZSwgdWludCB0b3RhbFN1cHBseSk7CgogIC8vIFBheW91dAogIGZ1bmN0aW9uIHBheW91dChhZGRyZXNzIF90bykgcHVibGljIG9ubHlDTGV2ZWwgewogICAgX3BheW91dChfdG8sIHRoaXMuYmFsYW5jZSk7CiAgfQogIGZ1bmN0aW9uIHBheW91dChhZGRyZXNzIF90bywgdWludCBhbW91bnQpIHB1YmxpYyBvbmx5Q0xldmVsIHsKICAgIGlmIChhbW91bnQ+dGhpcy5iYWxhbmNlKQogICAgICBhbW91bnQgPSB0aGlzLmJhbGFuY2U7CiAgICBfcGF5b3V0KF90bywgYW1vdW50KTsKICB9CiAgZnVuY3Rpb24gX3BheW91dChhZGRyZXNzIF90bywgdWludCBhbW91bnQpIHByaXZhdGUgewogICAgaWYgKF90byA9PSBhZGRyZXNzKDApKSB7CiAgICAgIGNlb0FkZHJlc3MudHJhbnNmZXIoYW1vdW50KTsKICAgIH0gZWxzZSB7CiAgICAgIF90by50cmFuc2ZlcihhbW91bnQpOwogICAgfQogIH0KCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gT3duZXIgY2FuIHRyYW5zZmVyIG91dCBhbnkgYWNjaWRlbnRhbGx5IHNlbnQgRVJDMjAgdG9rZW5zCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgZnVuY3Rpb24gdHJhbnNmZXJBbnlFUkMyMFRva2VuKGFkZHJlc3MgdG9rZW5BZGRyZXNzLCB1aW50IHRva2VucykgcHVibGljIG9ubHlDRU8gcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgIHJldHVybiBUcmFuc2ZlckludGVyZmFjZUVSQzIwKHRva2VuQWRkcmVzcykudHJhbnNmZXIoY2VvQWRkcmVzcywgdG9rZW5zKTsKICB9Cn0KCgpjb250cmFjdCBEb25hdGUgaXMgWW91Q29sbGVjdEJhc2UgewogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIHRva2VuSW5kZXhUb093bmVyOwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHVibGljIHRva2VuSW5kZXhUb1ByaWNlOwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGRvbmF0ZUFkZHJlc3M7CiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgdG9rZW5XaW5uZXI7CiAgdWludDI1NiBkb25hdGVUb2tlbkNvdW50OwogIHVpbnQyNTYgaGlnaGVzdFByaWNlID0gMC4wMDEgZXRoZXI7CiAgYWRkcmVzcyBwdWJsaWMgbmV4dFJvdW5kV2lubmVyOwoKICB1aW50MjU2IGxhc3RCdXlCbG9jazsKICB1aW50MjU2IHJvdW5kRGVsYXkgPSAxOTk5OwogIGJvb2wgc3RhcnRlZCA9IGZhbHNlOwogICAgCiAgZXZlbnQgVG9rZW5Tb2xkKHVpbnQyNTYgaW5kZXhlZCB0b2tlbklkLCB1aW50MjU2IHByaWNlLCBhZGRyZXNzIHByZXZPd25lciwgYWRkcmVzcyB3aW5uZXIpOwoKICAvKioqIENPTlNUUlVDVE9SICoqKi8KICBmdW5jdGlvbiBEb25hdGUoKSBwdWJsaWMgewogIH0KCiAgLy8vIEZvciBjcmVhdGluZyBDb2xsZWN0aWJsZXMKICBmdW5jdGlvbiBhZGREb25hdGVUb2tlbkFkZHJlc3MoYWRkcmVzcyBhZHIpIGV4dGVybmFsIG9ubHlDRU8gewogICAgZG9uYXRlVG9rZW5Db3VudCA9IGRvbmF0ZVRva2VuQ291bnQuYWRkKDEpOwogICAgZG9uYXRlQWRkcmVzc1tkb25hdGVUb2tlbkNvdW50XSA9IGFkcjsKICB9CiAgZnVuY3Rpb24gdXBkYXRlRG9uYXRlVG9rZW5BZGRyZXNzKGFkZHJlc3MgYWRyLCB1aW50MjU2IHRva2VuSWQpIGV4dGVybmFsIG9ubHlDRU8gewogICAgZG9uYXRlQWRkcmVzc1t0b2tlbklkXSA9IGFkcjsKICB9CiAgZnVuY3Rpb24gY2hhbmdlUm91bmREZWxheSh1aW50MjU2IGRlbGF5KSBleHRlcm5hbCBvbmx5Q0VPIHsKICAgIHJvdW5kRGVsYXkgPSBkZWxheTsKICB9CgogIGZ1bmN0aW9uIGdldEJsb2Nrc1VudGlsTmV4dFJvdW5kKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICBpZiAobGFzdEJ1eUJsb2NrK3JvdW5kRGVsYXk8YmxvY2subnVtYmVyKQogICAgICByZXR1cm4gMDsKICAgIHJldHVybiBsYXN0QnV5QmxvY2sgKyByb3VuZERlbGF5IC0gYmxvY2subnVtYmVyICsgMTsKICB9CiAgZnVuY3Rpb24gc3RhcnQoKSBwdWJsaWMgb25seUNFTyB7CiAgICBzdGFydGVkID0gdHJ1ZTsKICAgIHN0YXJ0TmV4dFJvdW5kKCk7CiAgfQogIAogIGZ1bmN0aW9uIHN0YXJ0TmV4dFJvdW5kKCkgcHVibGljIHsKICAgIHJlcXVpcmUoc3RhcnRlZCk7CiAgICByZXF1aXJlKGxhc3RCdXlCbG9jaytyb3VuZERlbGF5PGJsb2NrLm51bWJlcik7CiAgICB0b2tlbkluZGV4VG9QcmljZVswXSA9IGhpZ2hlc3RQcmljZTsKICAgIHRva2VuSW5kZXhUb093bmVyWzBdID0gbmV4dFJvdW5kV2lubmVyOwogICAgdG9rZW5XaW5uZXJbMF0gPSB0b2tlbkluZGV4VG9Pd25lclswXTsKICAgIAogICAgZm9yICh1aW50IGluZGV4ID0gMTsgaW5kZXggPD0gZG9uYXRlVG9rZW5Db3VudDsgaW5kZXgrKykgewogICAgICB0b2tlbkluZGV4VG9QcmljZVtpbmRleF0gPSAwLjAwMSBldGhlcjsKICAgICAgdG9rZW5XaW5uZXJbaW5kZXhdID0gdG9rZW5JbmRleFRvT3duZXJbaW5kZXhdOwogICAgfQogICAgaGlnaGVzdFByaWNlID0gMC4wMDEgZXRoZXI7CiAgICBsYXN0QnV5QmxvY2sgPSBibG9jay5udW1iZXI7CiAgfQoKICBmdW5jdGlvbiBnZXROZXh0UHJpY2UodWludCBwcmljZSkgcHVibGljIHB1cmUgcmV0dXJucyAodWludCkgewogICAgaWYgKHByaWNlIDwgMSBldGhlcikKICAgICAgcmV0dXJuIHByaWNlLm11bCgyMDApLmRpdig4Nyk7CiAgICByZXR1cm4gcHJpY2UubXVsKDEyMCkuZGl2KDg3KTsKICB9CgogIGZ1bmN0aW9uIGJ1eVRva2VuKHVpbnQgX3Rva2VuSWQpIHB1YmxpYyBwYXlhYmxlIHsKICAgIGFkZHJlc3Mgb2xkT3duZXIgPSB0b2tlbkluZGV4VG9Pd25lcltfdG9rZW5JZF07CiAgICB1aW50MjU2IHNlbGxpbmdQcmljZSA9IHRva2VuSW5kZXhUb1ByaWNlW190b2tlbklkXTsKICAgIHJlcXVpcmUob2xkT3duZXIhPW1zZy5zZW5kZXIpOwogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gc2VsbGluZ1ByaWNlKTsKICAgIHJlcXVpcmUoc2VsbGluZ1ByaWNlID4gMCk7CgogICAgdWludDI1NiBwdXJjaGFzZUV4Y2VzcyA9IG1zZy52YWx1ZS5zdWIoc2VsbGluZ1ByaWNlKTsKICAgIHVpbnQyNTYgcGF5bWVudCA9IHNlbGxpbmdQcmljZS5tdWwoODcpLmRpdigxMDApOwogICAgdWludDI1NiBmZWVPbmNlID0gc2VsbGluZ1ByaWNlLnN1YihwYXltZW50KS5kaXYoMTMpOwogICAgdWludDI1NiBmZWVUaHJlZSA9IGZlZU9uY2UubXVsKDMpOwogICAgdWludDI1NiBuZXh0UHJpY2UgPSBnZXROZXh0UHJpY2Uoc2VsbGluZ1ByaWNlKTsKICAgIC8vIFVwZGF0ZSBwcmljZXMKICAgIHRva2VuSW5kZXhUb1ByaWNlW190b2tlbklkXSA9IG5leHRQcmljZTsKICAgIC8vIFRyYW5zZmVycyB0aGUgVG9rZW4KICAgIHRva2VuSW5kZXhUb093bmVyW190b2tlbklkXSA9IG1zZy5zZW5kZXI7CiAgICBsYXN0QnV5QmxvY2sgPSBibG9jay5udW1iZXI7CiAgICBpZiAoX3Rva2VuSWQgPiAwKSB7CiAgICAgIC8vIFRheGVzIGZvciBsYXN0IHJvdW5kIHdpbm5lciBvciBuZXcgb3duZXIgb2YgdGhlIEFsbC1Eb25hdGUtVG9rZW4KICAgICAgaWYgKHRva2VuSW5kZXhUb093bmVyWzBdIT1hZGRyZXNzKDApKQogICAgICAgIHRva2VuSW5kZXhUb093bmVyWzBdLnRyYW5zZmVyKGZlZVRocmVlKTsKICAgICAgLy8gQ2hlY2sgZm9yIG5ldyB3aW5uZXIgb2YgdGhpcyByb3VuZAogICAgICBpZiAobmV4dFByaWNlID4gaGlnaGVzdFByaWNlKSB7CiAgICAgICAgaGlnaGVzdFByaWNlID0gbmV4dFByaWNlOwogICAgICAgIG5leHRSb3VuZFdpbm5lciA9IG1zZy5zZW5kZXI7CiAgICAgIH0KICAgIH0KICAgIC8vIERvbmF0aW9uCiAgICBkb25hdGVBZGRyZXNzW190b2tlbklkXS50cmFuc2ZlcihmZWVUaHJlZSk7CiAgICAvLyBUYXhlcyBmb3IgbGFzdCByb3VuZCB0b2tlbiB3aW5uZXIgCiAgICBpZiAodG9rZW5XaW5uZXJbX3Rva2VuSWRdIT1hZGRyZXNzKDApKQogICAgICB0b2tlbldpbm5lcltfdG9rZW5JZF0udHJhbnNmZXIoZmVlVGhyZWUpOwogICAgLy8gVGF4ZXMgZm9yIHVuaXZlcnNlCiAgICB5Y3Qub3duZXJPZigwKS50cmFuc2ZlcihmZWVPbmNlKTsKICAgIC8vIFBheW1lbnQgZm9yIG9sZCBvd25lcgogICAgaWYgKG9sZE93bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb2xkT3duZXIudHJhbnNmZXIocGF5bWVudCk7CiAgICB9CgogICAgVG9rZW5Tb2xkKF90b2tlbklkLCBzZWxsaW5nUHJpY2UsIG9sZE93bmVyLCBtc2cuc2VuZGVyKTsKCiAgICAvLyByZWZ1bmQgd2hlbiBwYWlkIHRvbyBtdWNoCiAgICBpZiAocHVyY2hhc2VFeGNlc3M+MCkKICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihwdXJjaGFzZUV4Y2Vzcyk7CiAgfQoKCiAgZnVuY3Rpb24gZ2V0Q29sbGVjdGlibGVXaXRoTWV0YSh1aW50MjU2IHRva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3Rva2VuSWQsIHVpbnQyNTYgc2VsbGluZ1ByaWNlLCBhZGRyZXNzIG93bmVyLCB1aW50MjU2IG5leHRTZWxsaW5nUHJpY2UsIGFkZHJlc3MgX3Rva2VuV2lubmVyLCBhZGRyZXNzIF9kb25hdGVBZGRyZXNzKSB7CiAgICBfdG9rZW5JZCA9IHRva2VuSWQ7CiAgICBzZWxsaW5nUHJpY2UgPSB0b2tlbkluZGV4VG9QcmljZVt0b2tlbklkXTsKICAgIG93bmVyID0gdG9rZW5JbmRleFRvT3duZXJbdG9rZW5JZF07CiAgICBuZXh0U2VsbGluZ1ByaWNlID0gZ2V0TmV4dFByaWNlKHNlbGxpbmdQcmljZSk7CiAgICAKICAgIF90b2tlbldpbm5lciA9IHRva2VuV2lubmVyW3Rva2VuSWRdOwogICAgX2RvbmF0ZUFkZHJlc3MgPSBkb25hdGVBZGRyZXNzW3Rva2VuSWRdOwogIH0KCn0='.
	

]
