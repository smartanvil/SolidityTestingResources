Class {
	#name : #SRT5156e901a673049011500022be70f8d50bf8e4a1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5156e901a673049011500022be70f8d50bf8e4a1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgZW1pdCBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgppbnRlcmZhY2UgVG9rZW5JbnRlcmZhY2UgewogICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgdG9rZW5Pd25lcikgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKTsKICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyB0b2tlbk93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKICAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHRva2VucykgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB0b2tlbnMpIGV4dGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB0b2tlbnMpIGV4dGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWw7IAogICAgIGZ1bmN0aW9uIGxvY2tUb2tlbnNGb3JGcyAoYWRkcmVzcyBGMSwgYWRkcmVzcyBGMikgZXh0ZXJuYWw7CiAgICAgZnVuY3Rpb24gbG9ja1Rva2Vuc0ZvckFzKCBhZGRyZXNzIEExLCBhZGRyZXNzIEEyLCBhZGRyZXNzIEEzLCBhZGRyZXNzIEE0LCBhZGRyZXNzIEE1LCBhZGRyZXNzIEE2LCBhZGRyZXNzIEE3LCBhZGRyZXNzIEE4LCBhZGRyZXNzIEE5KSBleHRlcm5hbDsKICAgICBmdW5jdGlvbiBsb2NrVG9rZW5zRm9yQ3MoYWRkcmVzcyBDMSxhZGRyZXNzIEMyLCBhZGRyZXNzIEMzKSBleHRlcm5hbDsKICAgICBmdW5jdGlvbiBsb2NrVG9rZW5zRm9yVGVhbUFuZFJlc2VydmUoYWRkcmVzcyB0ZWFtKSBleHRlcm5hbDsKICAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHRva2Vucyk7CiAgICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIHRva2VuT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHRva2Vucyk7CiAgICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgYnVybmVyLCB1aW50MjU2IHZhbHVlKTsKfQoKIGNvbnRyYWN0IERheURheUNyb3dkc2FsZSBpcyBPd25hYmxlewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogCiAgLy8gVGhlIHRva2VuIGJlaW5nIHNvbGQKICBUb2tlbkludGVyZmFjZSBwdWJsaWMgdG9rZW47CgogIC8vIHN0YXJ0IGFuZCBlbmQgdGltZXN0YW1wcyB3aGVyZSBpbnZlc3RtZW50cyBhcmUgYWxsb3dlZCAoYm90aCBpbmNsdXNpdmUpCiAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lOwogIHVpbnQyNTYgcHVibGljIGVuZFRpbWU7CgoKICAvLyBob3cgbWFueSB0b2tlbiB1bml0cyBhIGJ1eWVyIGdldHMgcGVyIHdlaQogIHVpbnQyNTYgcHVibGljIHJhdGVQZXJXZWkgPSA1MDAwMDsKCiAgLy8gYW1vdW50IG9mIHJhaXNlZCBtb25leSBpbiB3ZWkKICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWQ7CgogIHVpbnQyNTYgVE9LRU5TX1NPTEQ7CiAgCiAgdWludDI1NiBtaW5pbXVtQ29udHJpYnV0aW9uUHJpdmF0ZSA9IDEwICogMTAgKiogMTg7IC8vMTAgZXRoIGlzIHRoZSBtaW5pbXVtIGNvbnRyaWJ1dGlvbiBpbiBwcml2YXRlIGludmVzdG1lbnQgcGhhc2UKICB1aW50MjU2IG1heGltdW1Db250cmlidXRpb25Qcml2YXRlID0gMjAwICogMTAgKiogMTg7IC8vMjAwIGV0aCBpcyB0aGUgbWF4aW11bSBjb250cmlidXRpb24gaW4gcHJpdmF0ZSBpbnZlc3RtZW50IHBoYXNlCiAgCiAgdWludDI1NiBtaW5pbXVtQ29udHJpYnV0aW9uUHVibGljID0gMSAqIDEwICoqIDE4OyAvLzEgZXRoIGlzIHRoZSBtaW5pbXVtIGNvbnRyaWJ1dGlvbiBpbiBwdWJsaWMgaW52ZXN0bWVudCBwaGFzZQogIHVpbnQyNTYgbWF4aW11bUNvbnRyaWJ1dGlvblB1YmxpYyA9IDEwICogMTAgKiogMTg7IC8vMTAgZXRoIGlzIHRoZSBtYXhpbXVtIGNvbnRyaWJ1dGlvbiBpbiBwdWJsaWMgaW52ZXN0bWVudCBwaGFzZQogIAogIHVpbnQyNTYgbWF4VG9rZW5zVG9TYWxlSW5Qcml2YXRlU2VlZFBoYXNlMTsKICB1aW50MjU2IG1heFRva2Vuc1RvU2FsZUluUHJpdmF0ZVNlZWRQaGFzZTI7CiAgdWludDI1NiBtYXhUb2tlbnNUb1NhbGVJblN5bmRpY2FndGVTZWVkOyAKICB1aW50MjU2IG1heFRva2Vuc1RvU2FsZUluUHJlSVRPUHVibGljOwogIHVpbnQyNTYgbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTE7CiAgdWludDI1NiBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMjsKICB1aW50MjU2IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UzOwogIHVpbnQyNTYgbWF4VG9rZW5zVG9TYWxlOwogIAogIHVpbnQyNTYgYm9udXNJblByaXZhdGVTZWVkUGhhc2UxOwogIHVpbnQyNTYgYm9udXNJblByaXZhdGVTZWVkUGhhc2UyOwogIHVpbnQyNTYgYm9udXNJblN5bmRpY2FndGVTZWVkOyAKICB1aW50MjU2IGJvbnVzSW5QcmVJVE9QdWJsaWM7CiAgdWludDI1NiBib251c0luSVRPUHVibGljUGhhc2UxOwogIHVpbnQyNTYgYm9udXNJbklUT1B1YmxpY1BoYXNlMjsKICB1aW50MjU2IGJvbnVzSW5JVE9QdWJsaWNQaGFzZTM7CiAgCiAgYm9vbCBpc0Nyb3dkc2FsZVBhdXNlZCA9IGZhbHNlOwogIAogIHVpbnQyNTYgc29mdENhcDsKICB1aW50MjU2IGhhcmRDYXA7CiAgCiAgbWFwcGluZyhhZGRyZXNzPT51aW50MjU2KSBhbW91bnRTZW50QnlCdXllcnM7IAogIGJvb2wgcmVmdW5kVG9CdXllcnMgPSBmYWxzZTsKICB1aW50MjU2IHRvdGFsRHVyYXRpb25JbkRheXMgPSAxNjYgZGF5czsKICB1aW50MjU2IGRlY2ltYWxzID0gMjsKICAvKioKICAgKiBldmVudCBmb3IgdG9rZW4gcHVyY2hhc2UgbG9nZ2luZwogICAqIEBwYXJhbSBwdXJjaGFzZXIgd2hvIHBhaWQgZm9yIHRoZSB0b2tlbnMKICAgKiBAcGFyYW0gYmVuZWZpY2lhcnkgd2hvIGdvdCB0aGUgdG9rZW5zCiAgICogQHBhcmFtIHZhbHVlIHdlaXMgcGFpZCBmb3IgcHVyY2hhc2UKICAgKiBAcGFyYW0gYW1vdW50IGFtb3VudCBvZiB0b2tlbnMgcHVyY2hhc2VkCiAgICovCiAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKCiAgZnVuY3Rpb24gRGF5RGF5Q3Jvd2RzYWxlKHVpbnQyNTYgX3N0YXJ0VGltZSwgYWRkcmVzcyBfd2FsbGV0LCBhZGRyZXNzIF90b2tlbkFkZHJlc3MpIHB1YmxpYyAKICB7CiAgICByZXF1aXJlKF9zdGFydFRpbWUgPj1ub3cpOwogICAgcmVxdWlyZShfd2FsbGV0ICE9IDB4MCk7CgogICAgc3RhcnRUaW1lID0gX3N0YXJ0VGltZTsgIAogICAgZW5kVGltZSA9IHN0YXJ0VGltZSArIHRvdGFsRHVyYXRpb25JbkRheXM7CiAgICByZXF1aXJlKGVuZFRpbWUgPj0gc3RhcnRUaW1lKTsKICAgCiAgICBvd25lciA9IF93YWxsZXQ7CiAgICAKICAgIHNvZnRDYXAgPSAzODYwKjEwKioxODsKICAgIGhhcmRDYXAgPSAyMzAwMCoxMCoqMTg7CiAgICAKICAgIG1heFRva2Vuc1RvU2FsZUluUHJpdmF0ZVNlZWRQaGFzZTEgPSAxOTk1MDAwMDAgKiAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKTsKICAgIG1heFRva2Vuc1RvU2FsZUluUHJpdmF0ZVNlZWRQaGFzZTIgPSAzODg1MDAwMDAgKiAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKTsKICAgIG1heFRva2Vuc1RvU2FsZUluU3luZGljYWd0ZVNlZWQgPSA5MjQwMDAwMDAgKiAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKTsgCiAgICBtYXhUb2tlbnNUb1NhbGVJblByZUlUT1B1YmxpYyA9IDEzOTY1MDAwMDAgKiAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKTsKICAgIG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UxID0gMTc5MDI1MDAwMCAqIDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpOwogICAgbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTIgPSAyMjk0MjUwMDAwICogMTAgKiogdWludDI1NihkZWNpbWFscyk7CiAgICBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMyA9IDI4OTgwMDAwMDAgKiAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKTsKICAgIG1heFRva2Vuc1RvU2FsZSA9IDMwMDAwMDAwMDAgKiAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKTsKCiAgICBib251c0luUHJpdmF0ZVNlZWRQaGFzZTEgPSA5MDsKICAgIGJvbnVzSW5Qcml2YXRlU2VlZFBoYXNlMiA9IDgwOwogICAgYm9udXNJblN5bmRpY2FndGVTZWVkID0gNzA7IAogICAgYm9udXNJblByZUlUT1B1YmxpYyA9IDUwOwogICAgYm9udXNJbklUT1B1YmxpY1BoYXNlMSA9IDI1OwogICAgYm9udXNJbklUT1B1YmxpY1BoYXNlMiA9IDIwOwogICAgYm9udXNJbklUT1B1YmxpY1BoYXNlMyA9IDE1OwogICAgCiAgICB0b2tlbiA9IFRva2VuSW50ZXJmYWNlKF90b2tlbkFkZHJlc3MpOwogIH0KICAKICAKICAgLy8gZmFsbGJhY2sgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYnV5IHRva2VucwogICBmdW5jdGlvbiAoKSBwdWJsaWMgIHBheWFibGUgewogICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZGV0ZXJtaW5lQm9udXModWludCB0b2tlbnMpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiBib251cykgCiAgICB7CiAgICAgICAgdWludDI1NiB0aW1lRWxhcHNlZCA9IG5vdyAtIHN0YXJ0VGltZTsKICAgICAgICB1aW50MjU2IHRpbWVFbGFwc2VkSW5EYXlzID0gdGltZUVsYXBzZWQuZGl2KDEgZGF5cyk7CiAgICAgICAgCiAgICAgICAgLy9wcml2YXRlIHNlZWQgcGhhc2UgMSAoNSBkYXlzKQogICAgICAgIGlmICh0aW1lRWxhcHNlZEluRGF5cyA8NSkKICAgICAgICB7CiAgICAgICAgICAgIC8vYm9udXMgYXBwbGljYXRpb24gb2YgcHJpdmF0ZSBzZWVkIHBoYXNlIDEKICAgICAgICAgICAgaWYgKFRPS0VOU19TT0xEIDxtYXhUb2tlbnNUb1NhbGVJblByaXZhdGVTZWVkUGhhc2UxKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoYm9udXNJblByaXZhdGVTZWVkUGhhc2UxKTsgCiAgICAgICAgICAgICAgICBib251cyA9IGJvbnVzLmRpdigxMDApOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoVE9LRU5TX1NPTEQuYWRkKHRva2Vucy5hZGQoYm9udXMpKSA8PSBtYXhUb2tlbnNUb1NhbGVJblByaXZhdGVTZWVkUGhhc2UxKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLy9ib251cyBhcHBsaWNhdGlvbiBvZiBwcml2YXRlIHNlZWQgcGhhc2UgMgogICAgICAgICAgICBlbHNlIGlmIChUT0tFTlNfU09MRCA+PSBtYXhUb2tlbnNUb1NhbGVJblByaXZhdGVTZWVkUGhhc2UxICYmIFRPS0VOU19TT0xEIDwgbWF4VG9rZW5zVG9TYWxlSW5Qcml2YXRlU2VlZFBoYXNlMikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYm9udXMgPSB0b2tlbnMubXVsKGJvbnVzSW5Qcml2YXRlU2VlZFBoYXNlMik7CiAgICAgICAgICAgICAgICBib251cyA9IGJvbnVzLmRpdigxMDApOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoVE9LRU5TX1NPTEQuYWRkKHRva2Vucy5hZGQoYm9udXMpKSA8PSBtYXhUb2tlbnNUb1NhbGVJblByaXZhdGVTZWVkUGhhc2UyKTsKICAgICAgICAgICAgfSAKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vYm9udXMgYXBwbGljYXRpb24gb2YgU3luZGljYWd0ZVNlZWQKICAgICAgICAgICAgZWxzZSBpZiAoVE9LRU5TX1NPTEQgPj0gbWF4VG9rZW5zVG9TYWxlSW5Qcml2YXRlU2VlZFBoYXNlMiAmJiBUT0tFTlNfU09MRCA8IG1heFRva2Vuc1RvU2FsZUluU3luZGljYWd0ZVNlZWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zLm11bChib251c0luU3luZGljYWd0ZVNlZWQpOwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKFRPS0VOU19TT0xELmFkZCh0b2tlbnMuYWRkKGJvbnVzKSkgPD0gbWF4VG9rZW5zVG9TYWxlSW5TeW5kaWNhZ3RlU2VlZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vYm9udXMgYXBwbGljYXRpb24gb2YgUHJlSVRPUHVibGljIHBoYXNlCiAgICAgICAgICAgIGVsc2UgaWYgKFRPS0VOU19TT0xEID49IG1heFRva2Vuc1RvU2FsZUluU3luZGljYWd0ZVNlZWQgJiYgVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJblByZUlUT1B1YmxpYykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYm9udXMgPSB0b2tlbnMubXVsKGJvbnVzSW5QcmVJVE9QdWJsaWMpOwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKFRPS0VOU19TT0xELmFkZCh0b2tlbnMuYWRkKGJvbnVzKSkgPD0gbWF4VG9rZW5zVG9TYWxlSW5QcmVJVE9QdWJsaWMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvL2JvbnVzIGFwcGxpY2F0aW9uIG9mIElUT1B1YmxpYyBwaGFzZSAxCiAgICAgICAgICAgIGVsc2UgaWYgKFRPS0VOU19TT0xEID49IG1heFRva2Vuc1RvU2FsZUluUHJlSVRPUHVibGljICYmIFRPS0VOU19TT0xEIDwgbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTEpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zLm11bChib251c0luSVRPUHVibGljUGhhc2UxKTsKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRC5hZGQodG9rZW5zLmFkZChib251cykpIDw9IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UxKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLy9ib251cyBhcHBsaWNhdGlvbiBvZiBJVE9QdWJsaWMgcGhhc2UgMgogICAgICAgICAgICBlbHNlIGlmIChUT0tFTlNfU09MRCA+PSBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMSAmJiBUT0tFTlNfU09MRCA8IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UyKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoYm9udXNJbklUT1B1YmxpY1BoYXNlMik7CiAgICAgICAgICAgICAgICBib251cyA9IGJvbnVzLmRpdigxMDApOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoVE9LRU5TX1NPTEQuYWRkKHRva2Vucy5hZGQoYm9udXMpKSA8PSBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vYm9udXMgYXBwbGljYXRpb24gb2YgSVRPUHVibGljIHBoYXNlIDMKICAgICAgICAgICAgZWxzZSBpZiAoVE9LRU5TX1NPTEQgPj0gbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTIgJiYgVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYm9udXMgPSB0b2tlbnMubXVsKGJvbnVzSW5JVE9QdWJsaWNQaGFzZTMpOwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKFRPS0VOU19TT0xELmFkZCh0b2tlbnMuYWRkKGJvbnVzKSkgPD0gbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gMDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICAvL3ByaXZhdGUgc2VlZCBwaGFzZSAyICgxMCBkYXlzKQogICAgICAgIGVsc2UgaWYgKHRpbWVFbGFwc2VkSW5EYXlzID49IDUgJiYgdGltZUVsYXBzZWRJbkRheXMgPDE2KQogICAgICAgIHsKICAgICAgICAgICAgLy9ib251cyBhcHBsaWNhdGlvbiBvZiBwcml2YXRlIHNlZWQgcGhhc2UgMgogICAgICAgICAgICBpZiAoVE9LRU5TX1NPTEQgPj0gbWF4VG9rZW5zVG9TYWxlSW5Qcml2YXRlU2VlZFBoYXNlMSAmJiBUT0tFTlNfU09MRCA8IG1heFRva2Vuc1RvU2FsZUluUHJpdmF0ZVNlZWRQaGFzZTIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zLm11bChib251c0luUHJpdmF0ZVNlZWRQaGFzZTIpOwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKFRPS0VOU19TT0xELmFkZCh0b2tlbnMuYWRkKGJvbnVzKSkgPD0gbWF4VG9rZW5zVG9TYWxlSW5Qcml2YXRlU2VlZFBoYXNlMik7CiAgICAgICAgICAgIH0gCiAgICAgICAgICAgIAogICAgICAgICAgICAvL2JvbnVzIGFwcGxpY2F0aW9uIG9mIFN5bmRpY2FndGVTZWVkCiAgICAgICAgICAgIGVsc2UgaWYgKFRPS0VOU19TT0xEID49IG1heFRva2Vuc1RvU2FsZUluUHJpdmF0ZVNlZWRQaGFzZTIgJiYgVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJblN5bmRpY2FndGVTZWVkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoYm9udXNJblN5bmRpY2FndGVTZWVkKTsKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRC5hZGQodG9rZW5zLmFkZChib251cykpIDw9IG1heFRva2Vuc1RvU2FsZUluU3luZGljYWd0ZVNlZWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvL2JvbnVzIGFwcGxpY2F0aW9uIG9mIFByZUlUT1B1YmxpYyBwaGFzZQogICAgICAgICAgICBlbHNlIGlmIChUT0tFTlNfU09MRCA+PSBtYXhUb2tlbnNUb1NhbGVJblN5bmRpY2FndGVTZWVkICYmIFRPS0VOU19TT0xEIDwgbWF4VG9rZW5zVG9TYWxlSW5QcmVJVE9QdWJsaWMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zLm11bChib251c0luUHJlSVRPUHVibGljKTsKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRC5hZGQodG9rZW5zLmFkZChib251cykpIDw9IG1heFRva2Vuc1RvU2FsZUluUHJlSVRPUHVibGljKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLy9ib251cyBhcHBsaWNhdGlvbiBvZiBJVE9QdWJsaWMgcGhhc2UgMQogICAgICAgICAgICBlbHNlIGlmIChUT0tFTlNfU09MRCA+PSBtYXhUb2tlbnNUb1NhbGVJblByZUlUT1B1YmxpYyAmJiBUT0tFTlNfU09MRCA8IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UxKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoYm9udXNJbklUT1B1YmxpY1BoYXNlMSk7CiAgICAgICAgICAgICAgICBib251cyA9IGJvbnVzLmRpdigxMDApOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoVE9LRU5TX1NPTEQuYWRkKHRva2Vucy5hZGQoYm9udXMpKSA8PSBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vYm9udXMgYXBwbGljYXRpb24gb2YgSVRPUHVibGljIHBoYXNlIDIKICAgICAgICAgICAgZWxzZSBpZiAoVE9LRU5TX1NPTEQgPj0gbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTEgJiYgVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYm9udXMgPSB0b2tlbnMubXVsKGJvbnVzSW5JVE9QdWJsaWNQaGFzZTIpOwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKFRPS0VOU19TT0xELmFkZCh0b2tlbnMuYWRkKGJvbnVzKSkgPD0gbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvL2JvbnVzIGFwcGxpY2F0aW9uIG9mIElUT1B1YmxpYyBwaGFzZSAzCiAgICAgICAgICAgIGVsc2UgaWYgKFRPS0VOU19TT0xEID49IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UyICYmIFRPS0VOU19TT0xEIDwgbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zLm11bChib251c0luSVRPUHVibGljUGhhc2UzKTsKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRC5hZGQodG9rZW5zLmFkZChib251cykpIDw9IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy9TeW5kaWNhZ3RlIHBoYXNlICgxOSBkYXlzKSAKICAgICAgICBlbHNlIGlmICh0aW1lRWxhcHNlZEluRGF5cyA+PSAxNiAmJiB0aW1lRWxhcHNlZEluRGF5czwzNikKICAgICAgICB7CiAgICAgICAgICAgIC8vYm9udXMgYXBwbGljYXRpb24gb2YgU3luZGljYWd0ZVNlZWQKICAgICAgICAgICAgaWYgKFRPS0VOU19TT0xEID49IG1heFRva2Vuc1RvU2FsZUluUHJpdmF0ZVNlZWRQaGFzZTIgJiYgVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJblN5bmRpY2FndGVTZWVkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoYm9udXNJblN5bmRpY2FndGVTZWVkKTsKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRC5hZGQodG9rZW5zLmFkZChib251cykpIDw9IG1heFRva2Vuc1RvU2FsZUluU3luZGljYWd0ZVNlZWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvL2JvbnVzIGFwcGxpY2F0aW9uIG9mIFByZUlUT1B1YmxpYyBwaGFzZQogICAgICAgICAgICBlbHNlIGlmIChUT0tFTlNfU09MRCA+PSBtYXhUb2tlbnNUb1NhbGVJblN5bmRpY2FndGVTZWVkICYmIFRPS0VOU19TT0xEIDwgbWF4VG9rZW5zVG9TYWxlSW5QcmVJVE9QdWJsaWMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zLm11bChib251c0luUHJlSVRPUHVibGljKTsKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRC5hZGQodG9rZW5zLmFkZChib251cykpIDw9IG1heFRva2Vuc1RvU2FsZUluUHJlSVRPUHVibGljKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLy9ib251cyBhcHBsaWNhdGlvbiBvZiBJVE9QdWJsaWMgcGhhc2UgMQogICAgICAgICAgICBlbHNlIGlmIChUT0tFTlNfU09MRCA+PSBtYXhUb2tlbnNUb1NhbGVJblByZUlUT1B1YmxpYyAmJiBUT0tFTlNfU09MRCA8IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UxKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoYm9udXNJbklUT1B1YmxpY1BoYXNlMSk7CiAgICAgICAgICAgICAgICBib251cyA9IGJvbnVzLmRpdigxMDApOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoVE9LRU5TX1NPTEQuYWRkKHRva2Vucy5hZGQoYm9udXMpKSA8PSBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vYm9udXMgYXBwbGljYXRpb24gb2YgSVRPUHVibGljIHBoYXNlIDIKICAgICAgICAgICAgZWxzZSBpZiAoVE9LRU5TX1NPTEQgPj0gbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTEgJiYgVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYm9udXMgPSB0b2tlbnMubXVsKGJvbnVzSW5JVE9QdWJsaWNQaGFzZTIpOwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKFRPS0VOU19TT0xELmFkZCh0b2tlbnMuYWRkKGJvbnVzKSkgPD0gbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvL2JvbnVzIGFwcGxpY2F0aW9uIG9mIElUT1B1YmxpYyBwaGFzZSAzCiAgICAgICAgICAgIGVsc2UgaWYgKFRPS0VOU19TT0xEID49IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UyICYmIFRPS0VOU19TT0xEIDwgbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zLm11bChib251c0luSVRPUHVibGljUGhhc2UzKTsKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRC5hZGQodG9rZW5zLmFkZChib251cykpIDw9IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gUGF1c2UgYmVmb3JlIHRoZSBwdWJsaWMgcGhhc2VzCiAgICAgICAgZWxzZSBpZiAodGltZUVsYXBzZWRJbkRheXMgPj0gMzYgJiYgdGltZUVsYXBzZWRJbkRheXM8MTAzKQogICAgICAgIHsKICAgICAgICAgICAgLy82NyBkYXlzIGJyZWFrCiAgICAgICAgICAgIHJldmVydCgpOyAgLy9ubyBzYWxlIGR1cmluZyB0aGlzIHRpbWUsIHNvIHJldmVydCB0aGlzIHRyYW5zYWN0aW9uCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFByZS1JVE8gcHVibGljIHBoYXNlICg1IGRheXMpCiAgICAgICAgZWxzZSBpZiAodGltZUVsYXBzZWRJbkRheXMgPj0gMTAzICYmIHRpbWVFbGFwc2VkSW5EYXlzPDEwOSkKICAgICAgICB7CiAgICAgICAgICAgIC8vYm9udXMgYXBwbGljYXRpb24gb2YgUHJlSVRPUHVibGljIHBoYXNlCiAgICAgICAgICAgIGlmIChUT0tFTlNfU09MRCA+PSBtYXhUb2tlbnNUb1NhbGVJblN5bmRpY2FndGVTZWVkICYmIFRPS0VOU19TT0xEIDwgbWF4VG9rZW5zVG9TYWxlSW5QcmVJVE9QdWJsaWMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zLm11bChib251c0luUHJlSVRPUHVibGljKTsKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRC5hZGQodG9rZW5zLmFkZChib251cykpIDw9IG1heFRva2Vuc1RvU2FsZUluUHJlSVRPUHVibGljKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLy9ib251cyBhcHBsaWNhdGlvbiBvZiBJVE9QdWJsaWMgcGhhc2UgMQogICAgICAgICAgICBlbHNlIGlmIChUT0tFTlNfU09MRCA+PSBtYXhUb2tlbnNUb1NhbGVJblByZUlUT1B1YmxpYyAmJiBUT0tFTlNfU09MRCA8IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UxKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoYm9udXNJbklUT1B1YmxpY1BoYXNlMSk7CiAgICAgICAgICAgICAgICBib251cyA9IGJvbnVzLmRpdigxMDApOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoVE9LRU5TX1NPTEQuYWRkKHRva2Vucy5hZGQoYm9udXMpKSA8PSBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vYm9udXMgYXBwbGljYXRpb24gb2YgSVRPUHVibGljIHBoYXNlIDIKICAgICAgICAgICAgZWxzZSBpZiAoVE9LRU5TX1NPTEQgPj0gbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTEgJiYgVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYm9udXMgPSB0b2tlbnMubXVsKGJvbnVzSW5JVE9QdWJsaWNQaGFzZTIpOwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKFRPS0VOU19TT0xELmFkZCh0b2tlbnMuYWRkKGJvbnVzKSkgPD0gbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvL2JvbnVzIGFwcGxpY2F0aW9uIG9mIElUT1B1YmxpYyBwaGFzZSAzCiAgICAgICAgICAgIGVsc2UgaWYgKFRPS0VOU19TT0xEID49IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UyICYmIFRPS0VOU19TT0xEIDwgbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zLm11bChib251c0luSVRPUHVibGljUGhhc2UzKTsKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRC5hZGQodG9rZW5zLmFkZChib251cykpIDw9IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gUHVibGljIElUTyBwaGFzZSAxICgxNSBkYXlzKQogICAgICAgIGVsc2UgaWYgKHRpbWVFbGFwc2VkSW5EYXlzID49IDEwOSAmJiB0aW1lRWxhcHNlZEluRGF5czwxMjUpCiAgICAgICAgewogICAgICAgICAgICAvL2JvbnVzIGFwcGxpY2F0aW9uIG9mIElUT1B1YmxpYyBwaGFzZSAxCiAgICAgICAgICAgIGlmIChUT0tFTlNfU09MRCA+PSBtYXhUb2tlbnNUb1NhbGVJblByZUlUT1B1YmxpYyAmJiBUT0tFTlNfU09MRCA8IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UxKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoYm9udXNJbklUT1B1YmxpY1BoYXNlMSk7CiAgICAgICAgICAgICAgICBib251cyA9IGJvbnVzLmRpdigxMDApOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoVE9LRU5TX1NPTEQuYWRkKHRva2Vucy5hZGQoYm9udXMpKSA8PSBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vYm9udXMgYXBwbGljYXRpb24gb2YgSVRPUHVibGljIHBoYXNlIDIKICAgICAgICAgICAgZWxzZSBpZiAoVE9LRU5TX1NPTEQgPj0gbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTEgJiYgVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYm9udXMgPSB0b2tlbnMubXVsKGJvbnVzSW5JVE9QdWJsaWNQaGFzZTIpOwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKFRPS0VOU19TT0xELmFkZCh0b2tlbnMuYWRkKGJvbnVzKSkgPD0gbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvL2JvbnVzIGFwcGxpY2F0aW9uIG9mIElUT1B1YmxpYyBwaGFzZSAzCiAgICAgICAgICAgIGVsc2UgaWYgKFRPS0VOU19TT0xEID49IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UyICYmIFRPS0VOU19TT0xEIDwgbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zLm11bChib251c0luSVRPUHVibGljUGhhc2UzKTsKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRC5hZGQodG9rZW5zLmFkZChib251cykpIDw9IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gUHVibGljIElUTyBwaGFzZSAyICgyMCBkYXlzKQogICAgICAgIGVsc2UgaWYgKHRpbWVFbGFwc2VkSW5EYXlzID49IDEyNSAmJiB0aW1lRWxhcHNlZEluRGF5czwxNDYpCiAgICAgICAgewogICAgICAgICAgICAvL2JvbnVzIGFwcGxpY2F0aW9uIG9mIElUT1B1YmxpYyBwaGFzZSAyCiAgICAgICAgICAgIGlmIChUT0tFTlNfU09MRCA+PSBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMSAmJiBUT0tFTlNfU09MRCA8IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UyKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoYm9udXNJbklUT1B1YmxpY1BoYXNlMik7CiAgICAgICAgICAgICAgICBib251cyA9IGJvbnVzLmRpdigxMDApOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoVE9LRU5TX1NPTEQuYWRkKHRva2Vucy5hZGQoYm9udXMpKSA8PSBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vYm9udXMgYXBwbGljYXRpb24gb2YgSVRPUHVibGljIHBoYXNlIDMKICAgICAgICAgICAgZWxzZSBpZiAoVE9LRU5TX1NPTEQgPj0gbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTIgJiYgVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJbklUT1B1YmxpY1BoYXNlMykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYm9udXMgPSB0b2tlbnMubXVsKGJvbnVzSW5JVE9QdWJsaWNQaGFzZTMpOwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKFRPS0VOU19TT0xELmFkZCh0b2tlbnMuYWRkKGJvbnVzKSkgPD0gbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gMDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBQdWJsaWMgSVRPIHBoYXNlIDMgKDIwIGRheXMpCiAgICAgICAgZWxzZSBpZiAodGltZUVsYXBzZWRJbkRheXMgPj0gMTQ2ICYmIHRpbWVFbGFwc2VkSW5EYXlzPDE2NykKICAgICAgICB7CiAgICAgICAgICAgIC8vYm9udXMgYXBwbGljYXRpb24gb2YgSVRPUHVibGljIHBoYXNlIDMKICAgICAgICAgICAgaWYgKFRPS0VOU19TT0xEID49IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UyICYmIFRPS0VOU19TT0xEIDwgbWF4VG9rZW5zVG9TYWxlSW5JVE9QdWJsaWNQaGFzZTMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zLm11bChib251c0luSVRPUHVibGljUGhhc2UzKTsKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRC5hZGQodG9rZW5zLmFkZChib251cykpIDw9IG1heFRva2Vuc1RvU2FsZUluSVRPUHVibGljUGhhc2UzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZWxzZSAKICAgICAgICB7CiAgICAgICAgICAgIGJvbnVzID0gMDsKICAgICAgICB9CiAgICB9CgogIC8vIGxvdyBsZXZlbCB0b2tlbiBwdXJjaGFzZSBmdW5jdGlvbgogIAogIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIGJlbmVmaWNpYXJ5KSBwdWJsaWMgcGF5YWJsZSB7CiAgICByZXF1aXJlKGJlbmVmaWNpYXJ5ICE9IDB4MCk7CiAgICByZXF1aXJlKGlzQ3Jvd2RzYWxlUGF1c2VkID09IGZhbHNlKTsKICAgIHJlcXVpcmUodmFsaWRQdXJjaGFzZSgpKTsKICAgIAogICAgaWYgKGlzUHJpdmF0ZUludmVzdG1lbnRQaGFzZSgpKQogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlPj0gbWluaW11bUNvbnRyaWJ1dGlvblByaXZhdGUgJiYgbXNnLnZhbHVlPD1tYXhpbXVtQ29udHJpYnV0aW9uUHJpdmF0ZSk7CiAgICBlbHNlCiAgICAgICAgcmVxdWlyZShtc2cudmFsdWU+PSBtaW5pbXVtQ29udHJpYnV0aW9uUHVibGljICYmIG1zZy52YWx1ZTw9bWF4aW11bUNvbnRyaWJ1dGlvblB1YmxpYyk7CiAgICAKICAgIHJlcXVpcmUoVE9LRU5TX1NPTEQ8bWF4VG9rZW5zVG9TYWxlKTsKICAgCiAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKICAgIAogICAgLy8gY2FsY3VsYXRlIHRva2VuIGFtb3VudCB0byBiZSBjcmVhdGVkCiAgICB1aW50IHdlaUFtb3VudEZvclRva2VucyA9IHdlaUFtb3VudC5kaXYoMTAqKjE2KTsKICAgIHVpbnQyNTYgdG9rZW5zID0gd2VpQW1vdW50Rm9yVG9rZW5zLm11bChyYXRlUGVyV2VpKTsKICAgIHVpbnQyNTYgYm9udXMgPSBkZXRlcm1pbmVCb251cyh0b2tlbnMpOwogICAgdG9rZW5zID0gdG9rZW5zLmFkZChib251cyk7CiAgICByZXF1aXJlKFRPS0VOU19TT0xELmFkZCh0b2tlbnMpPD1tYXhUb2tlbnNUb1NhbGUpOwogICAgCiAgICAvLyB1cGRhdGUgc3RhdGUKICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKICAgIAogICAgdG9rZW4udHJhbnNmZXIoYmVuZWZpY2lhcnksdG9rZW5zKTsKICAgIGFtb3VudFNlbnRCeUJ1eWVyc1tiZW5lZmljaWFyeV0gPSB3ZWlBbW91bnQ7CiAgICBlbWl0IFRva2VuUHVyY2hhc2Uob3duZXIsIGJlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRva2Vucyk7CiAgICBUT0tFTlNfU09MRCA9IFRPS0VOU19TT0xELmFkZCh0b2tlbnMpOwogICAgZm9yd2FyZEZ1bmRzKCk7CiAgfQoKICAvLyBzZW5kIGV0aGVyIHRvIHRoZSBmdW5kIGNvbGxlY3Rpb24gd2FsbGV0CiAgZnVuY3Rpb24gZm9yd2FyZEZ1bmRzKCkgaW50ZXJuYWwgewogICAgb3duZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKICB9CgogIC8vIEByZXR1cm4gdHJ1ZSBpZiB0aGUgdHJhbnNhY3Rpb24gY2FuIGJ1eSB0b2tlbnMKICBmdW5jdGlvbiB2YWxpZFB1cmNoYXNlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgYm9vbCB3aXRoaW5QZXJpb2QgPSBub3cgPj0gc3RhcnRUaW1lICYmIG5vdyA8PSBlbmRUaW1lOwogICAgYm9vbCBub25aZXJvUHVyY2hhc2UgPSBtc2cudmFsdWUgIT0gMDsKICAgIHJldHVybiB3aXRoaW5QZXJpb2QgJiYgbm9uWmVyb1B1cmNoYXNlOwogIH0KCiAgLy8gQHJldHVybiB0cnVlIGlmIGNyb3dkc2FsZSBldmVudCBoYXMgZW5kZWQKICBmdW5jdGlvbiBoYXNFbmRlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gbm93ID4gZW5kVGltZTsKICB9CiAgCiAgIC8qKgogICAgKiBmdW5jdGlvbiB0byBjaGFuZ2UgdGhlIGVuZCB0aW1lc3RhbXAgb2YgdGhlIGljbwogICAgKiBjYW4gb25seSBiZSBjYWxsZWQgYnkgb3duZXIgd2FsbGV0CiAgICAqKi8KICAgIGZ1bmN0aW9uIGNoYW5nZUVuZERhdGUodWludDI1NiBlbmRUaW1lVW5peFRpbWVzdGFtcCkgcHVibGljIG9ubHlPd25lcnsKICAgICAgICBlbmRUaW1lID0gZW5kVGltZVVuaXhUaW1lc3RhbXA7CiAgICB9CiAgICAKICAgIC8qKgogICAgKiBmdW5jdGlvbiB0byBjaGFuZ2UgdGhlIHN0YXJ0IHRpbWVzdGFtcCBvZiB0aGUgaWNvCiAgICAqIGNhbiBvbmx5IGJlIGNhbGxlZCBieSBvd25lciB3YWxsZXQKICAgICoqLwogICAgCiAgICBmdW5jdGlvbiBjaGFuZ2VTdGFydERhdGUodWludDI1NiBzdGFydFRpbWVVbml4VGltZXN0YW1wKSBwdWJsaWMgb25seU93bmVyewogICAgICAgIHN0YXJ0VGltZSA9IHN0YXJ0VGltZVVuaXhUaW1lc3RhbXA7CiAgICB9CiAgICAKICAgIC8qKgogICAgKiBmdW5jdGlvbiB0byBjaGFuZ2UgdGhlIHJhdGUgb2YgdG9rZW5zCiAgICAqIGNhbiBvbmx5IGJlIGNhbGxlZCBieSBvd25lciB3YWxsZXQKICAgICoqLwogICAgZnVuY3Rpb24gc2V0UHJpY2VSYXRlKHVpbnQyNTYgbmV3UHJpY2UpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJhdGVQZXJXZWkgPSBuZXdQcmljZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2hhbmdlTWluaW11bUNvbnRyaWJ1dGlvbkZvclByaXZhdGVQaGFzZSh1aW50MjU2IG1pbkNvbnRyaWJ1dGlvbikgcHVibGljIG9ubHlPd25lcnsKICAgICAgICBtaW5pbXVtQ29udHJpYnV0aW9uUHJpdmF0ZSA9IG1pbkNvbnRyaWJ1dGlvbi5tdWwoMTAgKiogMTUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjaGFuZ2VNaW5pbXVtQ29udHJpYnV0aW9uRm9yUHVibGljUGhhc2UodWludDI1NiBtaW5Db250cmlidXRpb24pIHB1YmxpYyBvbmx5T3duZXJ7CiAgICAgICAgbWluaW11bUNvbnRyaWJ1dGlvblB1YmxpYyA9IG1pbkNvbnRyaWJ1dGlvbi5tdWwoMTAgKiogMTUpOwogICAgfQogICAgCiAgICAgZnVuY3Rpb24gY2hhbmdlTWF4aW11bUNvbnRyaWJ1dGlvbkZvclByaXZhdGVQaGFzZSh1aW50MjU2IG1pbkNvbnRyaWJ1dGlvbikgcHVibGljIG9ubHlPd25lcnsKICAgICAgICBtYXhpbXVtQ29udHJpYnV0aW9uUHJpdmF0ZSA9IG1pbkNvbnRyaWJ1dGlvbi5tdWwoMTAgKiogMTUpOwogICAgfQogICAgCiAgICAgZnVuY3Rpb24gY2hhbmdlTWF4aW11bUNvbnRyaWJ1dGlvbkZvclB1YmxpY1BoYXNlKHVpbnQyNTYgbWluQ29udHJpYnV0aW9uKSBwdWJsaWMgb25seU93bmVyewogICAgICAgIG1heGltdW1Db250cmlidXRpb25QdWJsaWMgPSBtaW5Db250cmlidXRpb24ubXVsKDEwICoqIDE1KTsKICAgIH0KICAgICAvKioKICAgICAqIGZ1bmN0aW9uIHRvIHBhdXNlIHRoZSBjcm93ZHNhbGUgCiAgICAgKiBjYW4gb25seSBiZSBjYWxsZWQgZnJvbSBvd25lciB3YWxsZXQKICAgICAqKi8KICAgICAKICAgIGZ1bmN0aW9uIHBhdXNlQ3Jvd2RzYWxlKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaXNDcm93ZHNhbGVQYXVzZWQgPSB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogZnVuY3Rpb24gdG8gcmVzdW1lIHRoZSBjcm93ZHNhbGUgaWYgaXQgaXMgcGF1c2VkCiAgICAgKiBjYW4gb25seSBiZSBjYWxsZWQgZnJvbSBvd25lciB3YWxsZXQKICAgICAqKi8gCiAgICBmdW5jdGlvbiByZXN1bWVDcm93ZHNhbGUoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpc0Nyb3dkc2FsZVBhdXNlZCA9IGZhbHNlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIGZ1bmN0aW9uIHRvIGNoYW5nZSB0aGUgc29mdCBjYXAgb2YgdGhlIGNvbnRyYWN0IAogICAgICoqLwogICAgZnVuY3Rpb24gY2hhbmdlU29mdENhcCh1aW50MjU2IHNvZnRDYXBFdGhlcnMpIHB1YmxpYyBvbmx5T3duZXIKICAgIHsKICAgICAgICBzb2Z0Q2FwID0gc29mdENhcEV0aGVycy5tdWwoMTAqKjE4KTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBmdW5jdGlvbiB0byBjaGFuZ2UgdGhlIGhhcmQgY2FwIG9mIHRoZSBjb250cmFjdCAKICAgICAqKi8KICAgIGZ1bmN0aW9uIGNoYW5nZUhhcmRDYXAodWludDI1NiBoYXJkQ2FwRXRoZXJzKSBwdWJsaWMgb25seU93bmVyCiAgICB7CiAgICAgICAgaGFyZENhcCA9IGhhcmRDYXBFdGhlcnMubXVsKDEwKioxOCk7CiAgICB9CiAgICAgCiAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgLy8gUmVtYWluaW5nIHRva2VucyBmb3Igc2FsZQogICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIGZ1bmN0aW9uIHJlbWFpbmluZ1Rva2Vuc0ZvclNhbGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgICByZXR1cm4gbWF4VG9rZW5zVG9TYWxlLnN1YihUT0tFTlNfU09MRCk7CiAgICAgfQogICAgCiAgICAgZnVuY3Rpb24gaXNQcml2YXRlSW52ZXN0bWVudFBoYXNlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkKICAgICB7CiAgICAgICAgIHVpbnQgdGltZVBhc3NlZCA9IG5vdy5zdWIoc3RhcnRUaW1lKTsKICAgICAgICAgaWYgKHRpbWVQYXNzZWQ8PTMwIGRheXMpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICB9CiAgICAgCiAgICAgZnVuY3Rpb24gYnVyblVuc29sZFRva2VucygpIHB1YmxpYyBvbmx5T3duZXIgCiAgICAgewogICAgICAgICByZXF1aXJlKGhhc0VuZGVkKCkpOwogICAgICAgICB1aW50IHZhbHVlID0gcmVtYWluaW5nVG9rZW5zRm9yU2FsZSgpOwogICAgICAgICB0b2tlbi5idXJuKHZhbHVlKTsKICAgICAgICAgVE9LRU5TX1NPTEQgPSBtYXhUb2tlbnNUb1NhbGU7CiAgICAgfQogICAgCiAgICAgZnVuY3Rpb24gdG9rZW5zQWxsb2NhdGVkRm9yRnMoYWRkcmVzcyBGMSwgYWRkcmVzcyBGMikgcHVibGljIG9ubHlPd25lcgogICAgIHsKICAgICAgICAgdG9rZW4udHJhbnNmZXIoRjEsOTAwMDAwMDAgKiAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CiAgICAgICAgIHRva2VuLnRyYW5zZmVyKEYyLDYwMDAwMDAwICogMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgICB0b2tlbi5sb2NrVG9rZW5zRm9yRnMoRjEsRjIpOwogICAgICAgICAKICAgICB9CiAgICAgZnVuY3Rpb24gdG9rZW5zQWxsb2NhdGVkRm9yQXMoIGFkZHJlc3MgQTEsIGFkZHJlc3MgQTIsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIEEzLCBhZGRyZXNzIEE0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIEE1LCBhZGRyZXNzIEE2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIEE3LCBhZGRyZXNzIEE4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIEE5KSBwdWJsaWMgb25seU93bmVyCiAgICAgewogICAgICAgICB0b2tlbi50cmFuc2ZlcihBMSw5MDAwMDAwMCAqIDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsKICAgICAgICAgdG9rZW4udHJhbnNmZXIoQTIsNjAwMDAwMDAgKiAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CiAgICAgICAgIHRva2VuLnRyYW5zZmVyKEEzLDMwMDAwMDAwICogMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgICB0b2tlbi50cmFuc2ZlcihBNCw2MDAwMDAwMCAqIDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsKICAgICAgICAgdG9rZW4udHJhbnNmZXIoQTUsNjAwMDAwMDAgKiAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CiAgICAgICAgIHRva2VuLnRyYW5zZmVyKEE2LDE1MDAwMDAwICogMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgICB0b2tlbi50cmFuc2ZlcihBNywxNTAwMDAwMCAqIDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsKICAgICAgICAgdG9rZW4udHJhbnNmZXIoQTgsMTUwMDAwMDAgKiAxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CiAgICAgICAgIHRva2VuLnRyYW5zZmVyKEE5LDE1MDAwMDAwICogMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgICB0b2tlbi5sb2NrVG9rZW5zRm9yQXMoQTEsQTIsQTMsQTQsQTUsQTYsQTcsQTgsQTkpOwogICAgIH0KICAgICBmdW5jdGlvbiB0b2tlbnNBbGxvY2F0ZWRGb3JDcyhhZGRyZXNzIEMxLCBhZGRyZXNzIEMyLCBhZGRyZXNzIEMzKSBwdWJsaWMgb25seU93bmVyCiAgICAgewogICAgICAgICB0b2tlbi50cmFuc2ZlcihDMSwyNTAwMDAwICogMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgICB0b2tlbi50cmFuc2ZlcihDMiwxMDAwMDAwICogMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgICB0b2tlbi50cmFuc2ZlcihDMywxNTAwMDAwICogMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgICB0b2tlbi5sb2NrVG9rZW5zRm9yQ3MoQzEsQzIsQzMpOwogICAgIH0KICAgICAgZnVuY3Rpb24gdG9rZW5zQWxsb2NhdGVkRm9yVGVhbUFuZFJlc2VydmUoYWRkcmVzcyB0ZWFtKSBwdWJsaWMgb25seU93bmVyCiAgICAgewogICAgICAgICB0b2tlbi50cmFuc2Zlcih0ZWFtLDYzMDAwMDAwICogMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgICB0b2tlbi5sb2NrVG9rZW5zRm9yVGVhbUFuZFJlc2VydmUodGVhbSk7CiAgICAgfQogICAgIAogICAgIGZ1bmN0aW9uIHJlZnVuZFRvQnV5ZXJzSWZTb2Z0Q2FwTm90UmVhY2hlZCgpIHB1YmxpYyBwYXlhYmxlIG9ubHlPd25lcgogICAgIHsKICAgICAgICAgcmVxdWlyZShoYXNFbmRlZCgpKTsKICAgICAgICAgcmVxdWlyZSh3ZWlSYWlzZWQ8c29mdENhcCk7CiAgICAgICAgIHJlcXVpcmUobXNnLnZhbHVlPj13ZWlSYWlzZWQpOwogICAgICAgICByZWZ1bmRUb0J1eWVycyA9IHRydWU7CiAgICAgfQogICAgIAogICAgIGZ1bmN0aW9uIGdldFJlZnVuZCgpIHB1YmxpYyAKICAgICB7CiAgICAgICAgIHJlcXVpcmUocmVmdW5kVG9CdXllcnMgPT0gdHJ1ZSk7CiAgICAgICAgIGlmIChhbW91bnRTZW50QnlCdXllcnNbbXNnLnNlbmRlcl0gPiAwKQogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudFNlbnRCeUJ1eWVyc1ttc2cuc2VuZGVyXSk7CiAgICAgfQp9'.
	

]
