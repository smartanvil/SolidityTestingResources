Class {
	#name : #SRT291a1b4ba9e936741d5cb185ad74fa9a32d048d8,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT291a1b4ba9e936741d5cb185ad74fa9a32d048d8 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7Cgpjb250cmFjdCBvd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGZ1bmN0aW9uIG93bmVkKCkgcHVibGljIHtvd25lciA9IG1zZy5zZW5kZXI7fQogICAgbW9kaWZpZXIgb25seU93bmVyIHtyZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpO187fQogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7b3duZXIgPSBuZXdPd25lcjt9Cn0KCmNvbnRyYWN0IFdpdGhkcmF3YWxDb250cmFjdCBpcyBvd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyByaWNoZXN0OwogICAgdWludCBwdWJsaWMgbW9zdFNlbnQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHBlbmRpbmdXaXRoZHJhd2FsczsKICAgIGZ1bmN0aW9uIFdpdGhkcmF3YWxDb250cmFjdCgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByaWNoZXN0ID0gbXNnLnNlbmRlcjsKICAgICAgICBtb3N0U2VudCA9IG1zZy52YWx1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIGJlY29tZVJpY2hlc3QoKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA+IG1vc3RTZW50KSB7CiAgICAgICAgICAgIHBlbmRpbmdXaXRoZHJhd2Fsc1tyaWNoZXN0XSArPSBtc2cudmFsdWU7CiAgICAgICAgICAgIHJpY2hlc3QgPSBtc2cuc2VuZGVyOwogICAgICAgICAgICBtb3N0U2VudCA9IG1zZy52YWx1ZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgdWludCBhbW91bnQgPSBwZW5kaW5nV2l0aGRyYXdhbHNbbXNnLnNlbmRlcl07CiAgICAgICAgcGVuZGluZ1dpdGhkcmF3YWxzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudCk7CiAgICB9CiAgICBmdW5jdGlvbiBzZXRNb3N0U2VudCh1aW50IF9uZXdNb3N0U2VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgbW9zdFNlbnQgPSBfbmV3TW9zdFNlbnQ7CiAgICB9Cn0KCmNvbnRyYWN0IFNpbXBsZU1hcmtldCBpcyBvd25lZCwgV2l0aGRyYXdhbENvbnRyYWN0IHsKCiAgICB1aW50IHB1YmxpYyAgICBzdGFydFByaWNlOwogICAgdWludCBwdWJsaWMgICAgZml4UHJpY2UgID0gMC4xIGV0aGVyOwogICAgdWludCBpbnRlcm5hbCAgZGVjaW1hbHMgID0gMDsKICAgIGJ5dGVzMzIgcHVibGljIHByb2R1Y3RJZCA9IDB4MDsKCglzdHJ1Y3QgVXNlclN0cnVjdCB7CgkJdWludCB1c2VyTGlzdFBvaW50ZXI7CgkJYnl0ZXMzMltdIHByb2R1Y3RLZXlzOwoJCWJ5dGVzMzIgdXNlckVtYWlsOwoJCWJ5dGVzMzIgdXNlck5hbWU7CgkJbWFwcGluZyhieXRlczMyID0+IHVpbnQpIHByb2R1Y3RLZXlQb2ludGVyczsKCX0KCgltYXBwaW5nKGJ5dGVzMzIgPT4gVXNlclN0cnVjdCkgcHVibGljIHVzZXJTdHJ1Y3RzOwoJYnl0ZXMzMltdIHB1YmxpYyB1c2VyTGlzdDsKCglzdHJ1Y3QgUHJvZHVjdFN0cnVjdCB7CgkJdWludCBwcm9kdWN0TGlzdFBvaW50ZXI7CgkJYnl0ZXMzMiB1c2VyS2V5OwoJCWJ5dGVzMzIgc2l6ZTsKCQl1aW50IHByb2R1Y3RQcmljZTsKCQlzdHJpbmcgZGVsaXZlcnk7CgkJYm9vbCBpblNhbGU7CgkJYWRkcmVzc1tdIGhpc3RvcnlVc2VyOwoJCXVpbnRbXSBoaXN0b3J5RGF0ZTsKCQl1aW50W10gaGlzdG9yeVByaWNlOwoJfQoKCW1hcHBpbmcoYnl0ZXMzMiA9PiBQcm9kdWN0U3RydWN0KSBwdWJsaWMgcHJvZHVjdFN0cnVjdHM7CglieXRlczMyW10gcHVibGljIHByb2R1Y3RMaXN0OwoKCWV2ZW50IExvZ05ld1VzZXIoYWRkcmVzcyBzZW5kZXIsIGJ5dGVzMzIgdXNlcklkKTsKCWV2ZW50IExvZ05ld1Byb2R1Y3QoYWRkcmVzcyBzZW5kZXIsIGJ5dGVzMzIgcHJvZHVjdElkLCBieXRlczMyIHVzZXJJZCk7CglldmVudCBMb2dVc2VyRGVsZXRlZChhZGRyZXNzIHNlbmRlciwgYnl0ZXMzMiB1c2VySWQpOwoJZXZlbnQgTG9nUHJvZHVjdERlbGV0ZWQoYWRkcmVzcyBzZW5kZXIsIGJ5dGVzMzIgcHJvZHVjdElkKTsKCglmdW5jdGlvbiBnZXRVc2VyQ291bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50IHVzZXJDb3VudCkgewoJCXJldHVybiB1c2VyTGlzdC5sZW5ndGg7Cgl9CgoJZnVuY3Rpb24gZ2V0UHJvZHVjdENvdW50KCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCBwcm9kdWN0Q291bnQpewoJCXJldHVybiBwcm9kdWN0TGlzdC5sZW5ndGg7Cgl9CgkKCWZ1bmN0aW9uIGdldFVzZXJQcm9kdWN0c0tleXMoYnl0ZXMzMiBfdXNlcklkKSBwdWJsaWMgdmlldyByZXR1cm5zKGJ5dGVzMzJbXSl7CgkgICAgcmVxdWlyZShpc1VzZXIoX3VzZXJJZCkpOwoJICAgIHJldHVybiB1c2VyU3RydWN0c1tfdXNlcklkXS5wcm9kdWN0S2V5czsKCX0KCglmdW5jdGlvbiBnZXRQcm9kdWN0SGlzdG9yeVVzZXIoYnl0ZXMzMiBfcHJvZHVjdElkKSBwdWJsaWMgdmlldyByZXR1cm5zKGFkZHJlc3NbXSkgewoJICAgIHJldHVybiBwcm9kdWN0U3RydWN0c1tfcHJvZHVjdElkXS5oaXN0b3J5VXNlcjsKCX0KCglmdW5jdGlvbiBnZXRQcm9kdWN0SGlzdG9yeURhdGUoYnl0ZXMzMiBfcHJvZHVjdElkKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnRbXSkgewoJICAgIHJldHVybiBwcm9kdWN0U3RydWN0c1tfcHJvZHVjdElkXS5oaXN0b3J5RGF0ZTsKCX0KCglmdW5jdGlvbiBnZXRQcm9kdWN0SGlzdG9yeVByaWNlKGJ5dGVzMzIgX3Byb2R1Y3RJZCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50W10pIHsKCSAgICByZXR1cm4gcHJvZHVjdFN0cnVjdHNbX3Byb2R1Y3RJZF0uaGlzdG9yeVByaWNlOwoJfQoKCWZ1bmN0aW9uIGlzVXNlcihieXRlczMyIHVzZXJJZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCBpc0luZGVlZCkgewoJCWlmKHVzZXJMaXN0Lmxlbmd0aD09MCkgcmV0dXJuIGZhbHNlOwoJCXJldHVybiB1c2VyTGlzdFt1c2VyU3RydWN0c1t1c2VySWRdLnVzZXJMaXN0UG9pbnRlcl0gPT0gdXNlcklkOwoJfQoKCWZ1bmN0aW9uIGlzUHJvZHVjdChieXRlczMyIF9wcm9kdWN0SWQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGJvb2wgaXNJbmRlZWQpIHsKCQlpZihwcm9kdWN0TGlzdC5sZW5ndGg9PTApIHJldHVybiBmYWxzZTsKCQlyZXR1cm4gcHJvZHVjdExpc3RbcHJvZHVjdFN0cnVjdHNbX3Byb2R1Y3RJZF0ucHJvZHVjdExpc3RQb2ludGVyXSA9PSBfcHJvZHVjdElkOwoJfQoKCWZ1bmN0aW9uIGlzVXNlclByb2R1Y3QoYnl0ZXMzMiBfcHJvZHVjdElkLCBieXRlczMyIF91c2VySWQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGJvb2wgaXNJbmRlZWQpIHsKCgkJaWYocHJvZHVjdExpc3QubGVuZ3RoPT0wKSByZXR1cm4gZmFsc2U7CgkJaWYodXNlckxpc3QubGVuZ3RoPT0wKSByZXR1cm4gZmFsc2U7CgoJCXJldHVybiBwcm9kdWN0U3RydWN0c1tfcHJvZHVjdElkXS51c2VyS2V5ID09IF91c2VySWQ7Cgl9CgoJZnVuY3Rpb24gZ2V0VXNlclByb2R1Y3RDb3VudChieXRlczMyIHVzZXJJZCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCBwcm9kdWN0Q291bnQpIHsKCQlyZXF1aXJlKGlzVXNlcih1c2VySWQpKTsKCQlyZXR1cm4gdXNlclN0cnVjdHNbdXNlcklkXS5wcm9kdWN0S2V5cy5sZW5ndGg7Cgl9CgoJZnVuY3Rpb24gZ2V0VXNlclByb2R1Y3RBdEluZGV4KGJ5dGVzMzIgdXNlcklkLCB1aW50IHJvdykgcHVibGljIGNvbnN0YW50IHJldHVybnMoYnl0ZXMzMiBwcm9kdWN0S2V5KSB7CgkJcmVxdWlyZShpc1VzZXIodXNlcklkKSk7CgkJcmV0dXJuIHVzZXJTdHJ1Y3RzW3VzZXJJZF0ucHJvZHVjdEtleXNbcm93XTsKCX0KCglmdW5jdGlvbiBjcmVhdGVVc2VyKGJ5dGVzMzIgX3VzZXJOYW1lLCBieXRlczMyIF91c2VyRW1haWwpIHB1YmxpYyB7CgkgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IDApOwogICAgICAgIGJ5dGVzMzIgdXNlcklkID0gYnl0ZXMzMihtc2cuc2VuZGVyKTsKCQlyZXF1aXJlKCFpc1VzZXIodXNlcklkKSk7CgoJCXVzZXJTdHJ1Y3RzW3VzZXJJZF0udXNlckxpc3RQb2ludGVyID0gdXNlckxpc3QucHVzaCh1c2VySWQpLTE7CgkJdXNlclN0cnVjdHNbdXNlcklkXS51c2VyRW1haWwgICAgICAgPSBfdXNlckVtYWlsOwoJCXVzZXJTdHJ1Y3RzW3VzZXJJZF0udXNlck5hbWUgICAgICAgID0gX3VzZXJOYW1lOwoKCQlMb2dOZXdVc2VyKG1zZy5zZW5kZXIsIHVzZXJJZCk7Cgl9CgoJZnVuY3Rpb24gY3JlYXRlUHJvZHVjdChieXRlczMyIF9zaXplLCBzdHJpbmcgZGVsaXZlcnksIGJ5dGVzMzIgX3VzZXJOYW1lLCBieXRlczMyIF91c2VyRW1haWwpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7CgkJCgkJcmVxdWlyZShtc2cuc2VuZGVyICE9IDApOwogICAgICAgIHJlcXVpcmUoc3RhcnRQcmljZSAhPSAwKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSAgPj0gc3RhcnRQcmljZSk7CiAgICAgICAgcmVxdWlyZShwcm9kdWN0TGlzdC5sZW5ndGggPD0gMTAwKTsKICAgICAgICAKCQlieXRlczMyIHVzZXJJZCAgICA9IGJ5dGVzMzIobXNnLnNlbmRlcik7CgkJdWludCBwcm9kdWN0Q291bnQgPSBwcm9kdWN0TGlzdC5sZW5ndGggKyAxOwoJCXByb2R1Y3RJZCAgICAgICAgID0gYnl0ZXMzMihwcm9kdWN0Q291bnQpOwoKICAgICAgICBpZighaXNVc2VyKHVzZXJJZCkpIHsKICAgICAgICAgICAgcmVxdWlyZShfdXNlck5hbWUgIT0wKTsKICAgICAgICAgICAgcmVxdWlyZShfdXNlckVtYWlsICE9MCk7CiAgICAgICAgICAgIGNyZWF0ZVVzZXIoX3VzZXJOYW1lLCBfdXNlckVtYWlsKTsKICAgICAgICB9CgoJCXJlcXVpcmUoaXNVc2VyKHVzZXJJZCkpOwoJCXJlcXVpcmUoIWlzUHJvZHVjdChwcm9kdWN0SWQpKTsKCgkJcHJvZHVjdFN0cnVjdHNbcHJvZHVjdElkXS5wcm9kdWN0TGlzdFBvaW50ZXIgPSBwcm9kdWN0TGlzdC5wdXNoKHByb2R1Y3RJZCktMTsKCQlwcm9kdWN0U3RydWN0c1twcm9kdWN0SWRdLnVzZXJLZXkgICAgICAgICAgICA9IHVzZXJJZDsKCQlwcm9kdWN0U3RydWN0c1twcm9kdWN0SWRdLnNpemUgICAgICAgICAgICAgICA9IF9zaXplOwoJCXByb2R1Y3RTdHJ1Y3RzW3Byb2R1Y3RJZF0ucHJvZHVjdFByaWNlICAgICAgID0gc3RhcnRQcmljZTsKCQlwcm9kdWN0U3RydWN0c1twcm9kdWN0SWRdLmRlbGl2ZXJ5ICAgICAgICAgICA9IGRlbGl2ZXJ5OwoJCXByb2R1Y3RTdHJ1Y3RzW3Byb2R1Y3RJZF0uaW5TYWxlICAgICAgICAgICAgID0gZmFsc2U7CgoJCXByb2R1Y3RTdHJ1Y3RzW3Byb2R1Y3RJZF0uaGlzdG9yeVVzZXIucHVzaChtc2cuc2VuZGVyKTsKCQlwcm9kdWN0U3RydWN0c1twcm9kdWN0SWRdLmhpc3RvcnlEYXRlLnB1c2gobm93KTsKCQlwcm9kdWN0U3RydWN0c1twcm9kdWN0SWRdLmhpc3RvcnlQcmljZS5wdXNoKHN0YXJ0UHJpY2UpOwoJCQoJCXVzZXJTdHJ1Y3RzW3VzZXJJZF0ucHJvZHVjdEtleVBvaW50ZXJzW3Byb2R1Y3RJZF0gPSB1c2VyU3RydWN0c1t1c2VySWRdLnByb2R1Y3RLZXlzLnB1c2gocHJvZHVjdElkKSAtIDE7CgkJCgkJTG9nTmV3UHJvZHVjdChtc2cuc2VuZGVyLCBwcm9kdWN0SWQsIHVzZXJJZCk7CgkJCgkJdWludCBvZGRNb25leSA9IG1zZy52YWx1ZSAtIHN0YXJ0UHJpY2U7CgogICAgICAgIHRoaXMudHJhbnNmZXIoc3RhcnRQcmljZSk7CiAgICAgICAgdWludCBjb3VudFByb2R1Y3QgPSBnZXRQcm9kdWN0Q291bnQoKTsKICAgICAgICBzdGFydFByaWNlICAgICAgICA9ICgoY291bnRQcm9kdWN0ICogZml4UHJpY2UpICsgZml4UHJpY2UpICogMTAgKiogZGVjaW1hbHM7CgogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIob2RkTW9uZXkpOwoKCQlyZXR1cm4gdHJ1ZTsKCX0KCglmdW5jdGlvbiBkZWxldGVVc2VyKGJ5dGVzMzIgdXNlcklkKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMoYm9vbCBzdWNjZXMpIHsKCgkJcmVxdWlyZShpc1VzZXIodXNlcklkKSk7CgkJcmVxdWlyZSh1c2VyU3RydWN0c1t1c2VySWRdLnByb2R1Y3RLZXlzLmxlbmd0aCA8PSAwKTsKCgkJdWludCByb3dUb0RlbGV0ZSAgPSB1c2VyU3RydWN0c1t1c2VySWRdLnVzZXJMaXN0UG9pbnRlcjsKCQlieXRlczMyIGtleVRvTW92ZSA9IHVzZXJMaXN0W3VzZXJMaXN0Lmxlbmd0aC0xXTsKCgkJdXNlckxpc3Rbcm93VG9EZWxldGVdICAgICAgICAgICAgICAgICAgPSBrZXlUb01vdmU7CgkJdXNlclN0cnVjdHNba2V5VG9Nb3ZlXS51c2VyTGlzdFBvaW50ZXIgPSByb3dUb0RlbGV0ZTsKCQl1c2VyU3RydWN0c1trZXlUb01vdmVdLnVzZXJFbWFpbCAgICAgICA9IDB4MDsKCQl1c2VyU3RydWN0c1trZXlUb01vdmVdLnVzZXJOYW1lICAgICAgICA9IDB4MDsKCgkJdXNlckxpc3QubGVuZ3RoLS07CgoJCUxvZ1VzZXJEZWxldGVkKG1zZy5zZW5kZXIsIHVzZXJJZCk7CgoJCXJldHVybiB0cnVlOwoJfQoKCWZ1bmN0aW9uIGRlbGV0ZVByb2R1Y3QoYnl0ZXMzMiBfcHJvZHVjdElkKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7CgkJCgkJcmVxdWlyZShpc1Byb2R1Y3QoX3Byb2R1Y3RJZCkpOwoJCQoJCXVpbnQgcm93VG9EZWxldGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IHByb2R1Y3RTdHJ1Y3RzW19wcm9kdWN0SWRdLnByb2R1Y3RMaXN0UG9pbnRlcjsKCQlieXRlczMyIGtleVRvTW92ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBwcm9kdWN0TGlzdFtwcm9kdWN0TGlzdC5sZW5ndGgtMV07CgoJCXByb2R1Y3RMaXN0W3Jvd1RvRGVsZXRlXSAgICAgICAgICAgICAgICAgICAgICA9IGtleVRvTW92ZTsKCQlwcm9kdWN0U3RydWN0c1tfcHJvZHVjdElkXS5wcm9kdWN0TGlzdFBvaW50ZXIgPSByb3dUb0RlbGV0ZTsKCQkKCQlwcm9kdWN0TGlzdC5sZW5ndGgtLTsKCgkJYnl0ZXMzMiB1c2VySWQgPSBwcm9kdWN0U3RydWN0c1tfcHJvZHVjdElkXS51c2VyS2V5OwoJCXJvd1RvRGVsZXRlICAgID0gdXNlclN0cnVjdHNbdXNlcklkXS5wcm9kdWN0S2V5UG9pbnRlcnNbX3Byb2R1Y3RJZF07CgkJa2V5VG9Nb3ZlICAgICAgPSB1c2VyU3RydWN0c1t1c2VySWRdLnByb2R1Y3RLZXlzW3VzZXJTdHJ1Y3RzW3VzZXJJZF0ucHJvZHVjdEtleXMubGVuZ3RoLTFdOwoKCQl1c2VyU3RydWN0c1t1c2VySWRdLnByb2R1Y3RLZXlzW3Jvd1RvRGVsZXRlXSAgICAgID0ga2V5VG9Nb3ZlOwoJCXVzZXJTdHJ1Y3RzW3VzZXJJZF0ucHJvZHVjdEtleVBvaW50ZXJzW2tleVRvTW92ZV0gPSByb3dUb0RlbGV0ZTsKCQkKCQl1c2VyU3RydWN0c1t1c2VySWRdLnByb2R1Y3RLZXlzLmxlbmd0aC0tOwoJCQoJCUxvZ1Byb2R1Y3REZWxldGVkKG1zZy5zZW5kZXIsIF9wcm9kdWN0SWQpOwoJCXVpbnQgY291bnRQcm9kdWN0ID0gZ2V0UHJvZHVjdENvdW50KCk7CgkJcHJvZHVjdElkID0gYnl0ZXMzMihjb3VudFByb2R1Y3QgLSAxKTsKCQkKCQlyZXR1cm4gdHJ1ZTsKCX0KCglmdW5jdGlvbiBjaGFuZ2VPd25lcigKCSAgICBieXRlczMyIF9wcm9kdWN0SWQsIAoJICAgIGJ5dGVzMzIgX29sZE93bmVyLCAKCSAgICBieXRlczMyIF9uZXdPd25lciwgCgkgICAgYWRkcmVzcyBvbGRPd25lciwgCgkgICAgc3RyaW5nIF9uZXdEZWxpdmVyeSwKCSAgICBieXRlczMyIF91c2VyTmFtZSwKCSAgICBieXRlczMyIF91c2VyRW1haWwKCSAgICApIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKCSAgICByZXF1aXJlKGlzUHJvZHVjdChfcHJvZHVjdElkKSk7CgkgICAgcmVxdWlyZShpc1VzZXIoX29sZE93bmVyKSk7CgkgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gcHJvZHVjdFN0cnVjdHNbX3Byb2R1Y3RJZF0ucHJvZHVjdFByaWNlKTsKCgkgICAgaWYoaXNVc2VyUHJvZHVjdChfcHJvZHVjdElkLCBfbmV3T3duZXIpKSByZXR1cm4gZmFsc2U7CgoJICAgIGlmKCFpc1VzZXIoX25ld093bmVyKSkgewogICAgICAgICAgICByZXF1aXJlKF91c2VyTmFtZSAhPTApOwogICAgICAgICAgICByZXF1aXJlKF91c2VyRW1haWwgIT0wKTsKICAgICAgICAgICAgY3JlYXRlVXNlcihfdXNlck5hbWUsIF91c2VyRW1haWwpOwogICAgICAgIH0KCgkgICAgcHJvZHVjdFN0cnVjdHNbX3Byb2R1Y3RJZF0udXNlcktleSAgPSBfbmV3T3duZXI7CgkJcHJvZHVjdFN0cnVjdHNbX3Byb2R1Y3RJZF0uZGVsaXZlcnkgPSBfbmV3RGVsaXZlcnk7CgkJcHJvZHVjdFN0cnVjdHNbX3Byb2R1Y3RJZF0uaW5TYWxlICAgPSBmYWxzZTsKCgkJcHJvZHVjdFN0cnVjdHNbX3Byb2R1Y3RJZF0uaGlzdG9yeVVzZXIucHVzaChtc2cuc2VuZGVyKTsKCQlwcm9kdWN0U3RydWN0c1tfcHJvZHVjdElkXS5oaXN0b3J5RGF0ZS5wdXNoKG5vdyk7CgkJcHJvZHVjdFN0cnVjdHNbX3Byb2R1Y3RJZF0uaGlzdG9yeVByaWNlLnB1c2gocHJvZHVjdFN0cnVjdHNbX3Byb2R1Y3RJZF0ucHJvZHVjdFByaWNlKTsKCQkKICAgIAl1c2VyU3RydWN0c1tfbmV3T3duZXJdLnByb2R1Y3RLZXlQb2ludGVyc1tfcHJvZHVjdElkXSA9IHVzZXJTdHJ1Y3RzW19uZXdPd25lcl0ucHJvZHVjdEtleXMucHVzaChfcHJvZHVjdElkKSAtIDE7CgogICAgICAgIGJvb2wgc3RhcnQgPSBmYWxzZTsKCiAgICAJZm9yKHVpbnQgaT0wO2k8dXNlclN0cnVjdHNbX29sZE93bmVyXS5wcm9kdWN0S2V5cy5sZW5ndGg7aSsrKSB7CiAgICAJICAgIGlmKChpKzEpID09IHVzZXJTdHJ1Y3RzW19vbGRPd25lcl0ucHJvZHVjdEtleXMubGVuZ3RoKXsKICAgIAkgICAgICAgIHVzZXJTdHJ1Y3RzW19vbGRPd25lcl0ucHJvZHVjdEtleXNbaV0gPSAweDA7CiAgICAJICAgIH1lbHNlewogICAgCSAgICAgICAgaWYodXNlclN0cnVjdHNbX29sZE93bmVyXS5wcm9kdWN0S2V5c1tpXSA9PSBfcHJvZHVjdElkIHx8IHN0YXJ0KXsKICAgIAkgICAgICAgICAgICB1c2VyU3RydWN0c1tfb2xkT3duZXJdLnByb2R1Y3RLZXlzW2ldID0gdXNlclN0cnVjdHNbX29sZE93bmVyXS5wcm9kdWN0S2V5c1tpKzFdOwogICAgCSAgICAgICAgICAgIHN0YXJ0ID0gdHJ1ZTsKICAgIAkgICAgICAgIH0KICAgIAkgICAgfQoJCX0KCQkKCQlkZWxldGUgdXNlclN0cnVjdHNbX29sZE93bmVyXS5wcm9kdWN0S2V5UG9pbnRlcnNbX3Byb2R1Y3RJZF07CgkJZGVsZXRlIHVzZXJTdHJ1Y3RzW19vbGRPd25lcl0ucHJvZHVjdEtleXNbdXNlclN0cnVjdHNbX29sZE93bmVyXS5wcm9kdWN0S2V5cy5sZW5ndGgtMV07CiAgICAgICAgdXNlclN0cnVjdHNbX29sZE93bmVyXS5wcm9kdWN0S2V5cy5sZW5ndGgtLTsKCQkKCQl0aGlzLnRyYW5zZmVyKG1zZy52YWx1ZSk7CgkJb2xkT3duZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKCgkgICAgcmV0dXJuIHRydWU7Cgl9CgkKCWZ1bmN0aW9uIGNoYW5nZUluU2FsZShieXRlczMyIF9wcm9kdWN0SWQsIGJ5dGVzMzIgX3VzZXJJZCwgdWludCBfbmV3UHJpY2UpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7CgoJICAgcmVxdWlyZShpc1Byb2R1Y3QoX3Byb2R1Y3RJZCkpOwoJICAgcmVxdWlyZShpc1VzZXIoX3VzZXJJZCkpOwoKCSAgIHByb2R1Y3RTdHJ1Y3RzW19wcm9kdWN0SWRdLnByb2R1Y3RQcmljZSA9IF9uZXdQcmljZTsKCSAgIHByb2R1Y3RTdHJ1Y3RzW19wcm9kdWN0SWRdLmluU2FsZSAgICAgICA9IHRydWU7CgoJICAgcmV0dXJuIHRydWU7Cgl9CgogICAgZnVuY3Rpb24gc2V0UHJpY2VzKHVpbnQgX25ld1ByaWNlKSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfbmV3UHJpY2UgIT0gMCk7CiAgICAgICAgaWYoc3RhcnRQcmljZSA9PSAwKSB7CiAgICAgICAgICAgIHN0YXJ0UHJpY2UgPSAoMSBldGhlciAvIF9uZXdQcmljZSkgKiAxMCAqKiBkZWNpbWFsczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1aW50IGNvdW50UHJvZHVjdCA9IGdldFByb2R1Y3RDb3VudCgpOwogICAgICAgICAgICBzdGFydFByaWNlID0gKDEgZXRoZXIgLyAoY291bnRQcm9kdWN0ICogX25ld1ByaWNlKSkgKiAxMCAqKiBkZWNpbWFsczsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Rml4UHJpY2UodWludCBfbmV3Rml4UHJpY2UpIHB1YmxpYyBwYXlhYmxlIG9ubHlPd25lciByZXR1cm5zKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAgICE9IDApOwogICAgICAgIHJlcXVpcmUoX25ld0ZpeFByaWNlICE9IDApOwogICAgICAgIGZpeFByaWNlID0gX25ld0ZpeFByaWNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldERlY2ltYWxzKHVpbnQgX25ld0RlY2ltYWxzKSBwdWJsaWMgcGF5YWJsZSBvbmx5T3duZXIgcmV0dXJucyhib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gMCk7CiAgICAgICAgZGVjaW1hbHMgPSBfbmV3RGVjaW1hbHM7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24oKSBwdWJsaWMgcGF5YWJsZSB7fQoKICAgIGZ1bmN0aW9uIFNpbXBsZU1hcmtldCgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBzdGFydFByaWNlID0gMC4xIGV0aGVyOwogICAgfQp9'.
	

]
