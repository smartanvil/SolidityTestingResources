Class {
	#name : #SRT8418c859eb647209785c972f50b003efb4290d05,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8418c859eb647209785c972f50b003efb4290d05 >> base64 [
	^ 'LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogVGhpcyBjb250cmFjdCBoYXMgYmVlbiBtZXJnZWQgd2l0aCBzb2xpZGlmeQogKiBodHRwczovL2dpdGh1Yi5jb20vdGllc25ldHdvcmsvc29saWRpZnkKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiAKIHByYWdtYSBzb2xpZGl0eSBeMC40LjE4OwoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0JDU0Nyb3dkc2FsZS5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4uL3Rva2VuL0lUb2tlblBvb2wuc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0VSQzIwU3RhbmRhcmRUb2tlbi5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vSUVSQzIwVG9rZW4uc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKY29udHJhY3QgSUVSQzIwVG9rZW4gewoKICAgIC8vIHRoZXNlIGZ1bmN0aW9ucyBhcmVuJ3QgYWJzdHJhY3Qgc2luY2UgdGhlIGNvbXBpbGVyIGVtaXRzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGdldHRlciBmdW5jdGlvbnMgYXMgZXh0ZXJuYWwgICAgCiAgICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBfbmFtZSkgeyBfbmFtZTsgfQogICAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBfc3ltYm9sKSB7IF9zeW1ib2w7IH0KICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscykgeyBfZGVjaW1hbHM7IH0KICAgIAogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCB0b3RhbCkge3RvdGFsO30KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkge19vd25lcjsgYmFsYW5jZTt9ICAgIAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHtfb3duZXI7IF9zcGVuZGVyOyByZW1haW5pbmc7fQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgCgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKTsKfQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vSUVSQzIwVG9rZW4uc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi9jb21tb24vU2FmZU1hdGguc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLyoqZGV2IFV0aWxpdHkgbWV0aG9kcyBmb3Igb3ZlcmZsb3ctcHJvb2YgYXJpdGhtZXRpYyBvcGVyYXRpb25zIAoqLwpjb250cmFjdCBTYWZlTWF0aCB7CgogICAgLyoqZGV2IFJldHVybnMgdGhlIHN1bSBvZiBhIGFuZCBiLiBUaHJvd3MgYW4gZXhjZXB0aW9uIGlmIGl0IGV4Y2VlZHMgdWludDI1NiBsaW1pdHMqLwogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7ICAgICAgICAKICAgICAgICBhc3NlcnQoYStiID49IGEpOwogICAgICAgIHJldHVybiBhK2I7CiAgICB9CgogICAgLyoqZGV2IFJldHVybnMgdGhlIGRpZmZlcmVuY2Ugb2YgYSBhbmQgYi4gVGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiBhIGlzIGxlc3MgdGhhbiBiKi8KICAgIGZ1bmN0aW9uIHNhZmVTdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChhID49IGIpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICAvKipkZXYgUmV0dXJucyB0aGUgcHJvZHVjdCBvZiBhIGFuZCBiLiBUaHJvd3MgYW4gZXhjZXB0aW9uIGlmIGl0IGV4Y2VlZHMgdWludDI1NiBsaW1pdHMqLwogICAgZnVuY3Rpb24gc2FmZU11bHQodWludDI1NiB4LCB1aW50MjU2IHkpIGludGVybmFsIHB1cmUgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0geCAqIHk7CiAgICAgICAgYXNzZXJ0KCh4ID09IDApIHx8ICh6IC8geCA9PSB5KSk7CiAgICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZURpdih1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KHkgIT0gMCk7CiAgICAgICAgcmV0dXJuIHggLyB5OwogICAgfQp9LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi9jb21tb24vU2FmZU1hdGguc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8qKkBkZXYgU3RhbmRhcmQgRVJDMjAgY29tcGxpYW50IHRva2VuIGltcGxlbWVudGF0aW9uICovCmNvbnRyYWN0IEVSQzIwU3RhbmRhcmRUb2tlbiBpcyBJRVJDMjBUb2tlbiwgU2FmZU1hdGggewogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7CgogICAgLy90b2tlbnMgYWxyZWFkeSBpc3N1ZWQKICAgIHVpbnQyNTYgdG9rZW5zSXNzdWVkOwogICAgLy9iYWxhbmNlcyBmb3IgZWFjaCBhY2NvdW50CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgLy9vbmUgYWNjb3VudCBhcHByb3ZlcyB0aGUgdHJhbnNmZXIgb2YgYW4gYW1vdW50IHRvIGFub3RoZXIgYWNjb3VudAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgIGZ1bmN0aW9uIEVSQzIwU3RhbmRhcmRUb2tlbigpIHB1YmxpYyB7CiAgICAgCiAgICB9ICAgIAoKICAgIC8vCiAgICAvL0lFUkMyMFRva2VuIGltcGxlbWVudGF0aW9uCiAgICAvLyAKCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHRvdGFsKSB7CiAgICAgICAgdG90YWwgPSB0b2tlbnNJc3N1ZWQ7CiAgICB9CiAKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgICAgIGJhbGFuY2UgPSBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgLy8gc2FmZVN1YiBpbnNpZGUgZG9UcmFuc2ZlciB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgICAgICBkb1RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsgICAgICAgIAogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIAogICAgICAgIC8vIENoZWNrIGZvciBhbGxvd2FuY2UgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gc2FmZVN1YihhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSwgX3ZhbHVlKTsgICAgICAgIAogICAgICAgIC8vIHNhZmVTdWIgaW5zaWRlIGRvVHJhbnNmZXIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICAgICAgZG9UcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOyAgICAgICAgCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZW1haW5pbmcgPSBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfSAgICAKCiAgICAvLwogICAgLy8gQWRkaXRpb25hbCBmdW5jdGlvbnMKICAgIC8vCiAgICAvKipAZGV2IEdldHMgcmVhbCB0b2tlbiBhbW91bnQgaW4gdGhlIHNtYWxsZXN0IHRva2VuIHVuaXRzICovCiAgICBmdW5jdGlvbiBnZXRSZWFsVG9rZW5BbW91bnQodWludDI1NiB0b2tlbnMpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHRva2VucyAqICh1aW50MjU2KDEwKSAqKiBkZWNpbWFscyk7CiAgICB9CgogICAgLy8KICAgIC8vIEludGVybmFsIGZ1bmN0aW9ucwogICAgLy8gICAgCiAgICAKICAgIGZ1bmN0aW9uIGRvVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlc1tfZnJvbV0sIF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgIH0KfS8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9FUkMyMFN0YW5kYXJkVG9rZW4uc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8qKkBkZXYgVG9rZW4gcG9vbCB0aGF0IG1hbmFnZXMgaXRzIHRva2VucyBieSBkZXNpZ25hdGluZyB0cnVzdGVlcyAqLwpjb250cmFjdCBJVG9rZW5Qb29sIHsgICAgCgogICAgLyoqQGRldiBUb2tlbiB0byBiZSBtYW5hZ2VkICovCiAgICBFUkMyMFN0YW5kYXJkVG9rZW4gcHVibGljIHRva2VuOwoKICAgIC8qKkBkZXYgQ2hhbmdlcyB0cnVzdGVlIHN0YXRlICovCiAgICBmdW5jdGlvbiBzZXRUcnVzdGVlKGFkZHJlc3MgdHJ1c3RlZSwgYm9vbCBzdGF0ZSkgcHVibGljOwoKICAgIC8vIHRoZXNlIGZ1bmN0aW9ucyBhcmVuJ3QgYWJzdHJhY3Qgc2luY2UgdGhlIGNvbXBpbGVyIGVtaXRzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGdldHRlciBmdW5jdGlvbnMgYXMgZXh0ZXJuYWwKICAgIC8qKkBkZXYgUmV0dXJucyByZW1haW5pbmcgdG9rZW4gYW1vdW50ICovCiAgICBmdW5jdGlvbiBnZXRUb2tlbkFtb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2Vucykge3Rva2Vuczt9Cn0vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4uL3Rva2VuL0lUb2tlblBvb2wuc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi90b2tlbi9SZXR1cm5Ub2tlbkFnZW50LnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi4vY29tbW9uL01hbmFnZWFibGUuc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi9jb21tb24vT3duZWQuc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0lPd25lZC5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKipAZGV2IFNpbXBsZSBpbnRlcmZhY2UgdG8gT3duZWQgYmFzZSBjbGFzcyAqLwpjb250cmFjdCBJT3duZWQgewogICAgZnVuY3Rpb24gb3duZXIoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykge30KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWM7Cn0vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vSU93bmVkLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgpjb250cmFjdCBPd25lZCBpcyBJT3duZWQgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7ICAgICAgICAKCiAgICBmdW5jdGlvbiBPd25lZCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8vIGFsbG93cyBleGVjdXRpb24gYnkgdGhlIG93bmVyIG9ubHkKICAgIG1vZGlmaWVyIG93bmVyT25seSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKkBkZXYgYWxsb3dzIHRyYW5zZmVycmluZyB0aGUgY29udHJhY3Qgb3duZXJzaGlwLiAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvd25lck9ubHkgewogICAgICAgIHJlcXVpcmUoX25ld093bmVyICE9IG93bmVyKTsKICAgICAgICBvd25lciA9IF9uZXdPd25lcjsKICAgIH0KfQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4uL2NvbW1vbi9Pd25lZC5zb2wiIDogZW5kCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLy8vQSB0b2tlbiB0aGF0IGhhdmUgYW4gb3duZXIgYW5kIGEgbGlzdCBvZiBtYW5hZ2VycyB0aGF0IGNhbiBwZXJmb3JtIHNvbWUgb3BlcmF0aW9ucwovLy9Pd25lciBpcyBhbHdheXMgYSBtYW5hZ2VyIHRvbwpjb250cmFjdCBNYW5hZ2VhYmxlIGlzIE93bmVkIHsKCiAgICBldmVudCBNYW5hZ2VyU2V0KGFkZHJlc3MgbWFuYWdlciwgYm9vbCBzdGF0ZSk7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgbWFuYWdlcnM7CgogICAgZnVuY3Rpb24gTWFuYWdlYWJsZSgpIHB1YmxpYyBPd25lZCgpIHsKICAgICAgICBtYW5hZ2Vyc1tvd25lcl0gPSB0cnVlOwogICAgfQoKICAgIC8qKkBkZXYgQWxsb3dzIGV4ZWN1dGlvbiBieSBtYW5hZ2VycyBvbmx5ICovCiAgICBtb2RpZmllciBtYW5hZ2VyT25seSB7CiAgICAgICAgcmVxdWlyZShtYW5hZ2Vyc1ttc2cuc2VuZGVyXSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgc3VwZXIudHJhbnNmZXJPd25lcnNoaXAoX25ld093bmVyKTsKCiAgICAgICAgbWFuYWdlcnNbX25ld093bmVyXSA9IHRydWU7CiAgICAgICAgbWFuYWdlcnNbbXNnLnNlbmRlcl0gPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRNYW5hZ2VyKGFkZHJlc3MgbWFuYWdlciwgYm9vbCBzdGF0ZSkgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgbWFuYWdlcnNbbWFuYWdlcl0gPSBzdGF0ZTsKICAgICAgICBNYW5hZ2VyU2V0KG1hbmFnZXIsIHN0YXRlKTsKICAgIH0KfS8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi4vY29tbW9uL01hbmFnZWFibGUuc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi90b2tlbi9SZXR1cm5hYmxlVG9rZW4uc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKCgoKCi8vL1Rva2VuIHRoYXQgd2hlbiBzZW50IHRvIHNwZWNpZmllZCBjb250cmFjdCAocmV0dXJuQWdlbnQpIGludm9rZXMgYWRkaXRpb25hbCBhY3Rpb25zCmNvbnRyYWN0IFJldHVybmFibGVUb2tlbiBpcyBNYW5hZ2VhYmxlLCBFUkMyMFN0YW5kYXJkVG9rZW4gewoKICAgIC8qKkBkZXYgTGlzdCBvZiByZXR1cm4gYWdlbnRzICovCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyByZXR1cm5BZ2VudHM7CgogICAgZnVuY3Rpb24gUmV0dXJuYWJsZVRva2VuKCkgcHVibGljIHt9ICAgIAogICAgCiAgICAvKipAZGV2IFNldHMgbmV3IHJldHVybiBhZ2VudCAqLwogICAgZnVuY3Rpb24gc2V0UmV0dXJuQWdlbnQoUmV0dXJuVG9rZW5BZ2VudCBhZ2VudCkgcHVibGljIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXR1cm5BZ2VudHNbYWRkcmVzcyhhZ2VudCldID0gdHJ1ZTsKICAgIH0KCiAgICAvKipAZGV2IFJlbW92ZXMgcmV0dXJuIGFnZW50IGZyb20gbGlzdCAqLwogICAgZnVuY3Rpb24gcmVtb3ZlUmV0dXJuQWdlbnQoUmV0dXJuVG9rZW5BZ2VudCBhZ2VudCkgcHVibGljIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXR1cm5BZ2VudHNbYWRkcmVzcyhhZ2VudCldID0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gZG9UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGludGVybmFsIHsKICAgICAgICBzdXBlci5kb1RyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgaWYgKHJldHVybkFnZW50c1tfdG9dKSB7CiAgICAgICAgICAgIFJldHVyblRva2VuQWdlbnQoX3RvKS5yZXR1cm5Ub2tlbihfZnJvbSwgX3ZhbHVlKTsgICAgICAgICAgICAgICAgCiAgICAgICAgfQogICAgfQp9LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi90b2tlbi9SZXR1cm5hYmxlVG9rZW4uc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8vL1JldHVybmFibGUgdG9rZW5zIHJlY2VpdmVyCmNvbnRyYWN0IFJldHVyblRva2VuQWdlbnQgaXMgTWFuYWdlYWJsZSB7CiAgICAvL1JldHVybmFibGVUb2tlbiBwdWJsaWMgcmV0dXJuYWJsZVRva2VuOwoKICAgIC8qKkBkZXYgTGlzdCBvZiByZXR1cm5hYmxlIHRva2VucyBpbiBmb3JtYXQgdG9rZW4tPmZsYWcgICovCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyByZXR1cm5hYmxlVG9rZW5zOwoKICAgIC8qKkBkZXYgQWxsb3dzIG9ubHkgdG9rZW4gdG8gZXhlY3V0ZSBtZXRob2QgKi8KICAgIC8vbW9kaWZpZXIgcmV0dXJuYWJsZVRva2VuT25seSB7cmVxdWlyZShtc2cuc2VuZGVyID09IGFkZHJlc3MocmV0dXJuYWJsZVRva2VuKSk7IF87fQogICAgbW9kaWZpZXIgcmV0dXJuYWJsZVRva2VuT25seSB7cmVxdWlyZShyZXR1cm5hYmxlVG9rZW5zW21zZy5zZW5kZXJdKTsgXzt9CgogICAgLyoqQGRldiBFeGVjdXRlcyB3aGVuIHRva2VucyBhcmUgdHJhbnNmZXJyZWQgdG8gdGhpcyAqLwogICAgZnVuY3Rpb24gcmV0dXJuVG9rZW4oYWRkcmVzcyBmcm9tLCB1aW50MjU2IGFtb3VudFJldHVybmVkKSAgcHVibGljOwoKICAgIC8qKkBkZXYgU2V0cyB0b2tlbiB0aGF0IGNhbiBjYWxsIHJldHVyblRva2VuIG1ldGhvZCAqLwogICAgZnVuY3Rpb24gc2V0UmV0dXJuYWJsZVRva2VuKFJldHVybmFibGVUb2tlbiB0b2tlbikgcHVibGljIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXR1cm5hYmxlVG9rZW5zW2FkZHJlc3ModG9rZW4pXSA9IHRydWU7CiAgICB9CgogICAgLyoqQGRldiBSZW1vdmVzIHRva2VuIHRoYXQgY2FuIGNhbGwgcmV0dXJuVG9rZW4gbWV0aG9kICovCiAgICBmdW5jdGlvbiByZW1vdmVSZXR1cm5hYmxlVG9rZW4oUmV0dXJuYWJsZVRva2VuIHRva2VuKSBwdWJsaWMgbWFuYWdlck9ubHkgewogICAgICAgIHJldHVybmFibGVUb2tlbnNbYWRkcmVzcyh0b2tlbildID0gZmFsc2U7CiAgICB9Cn0vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4uL3Rva2VuL1JldHVyblRva2VuQWdlbnQuc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCgovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vSUludmVzdFJlc3RyaWN0aW9ucy5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgoKCi8qKiBAZGV2IFJlc3RyaWN0aW9ucyBvbiBpbnZlc3RtZW50ICovCmNvbnRyYWN0IElJbnZlc3RSZXN0cmljdGlvbnMgaXMgTWFuYWdlYWJsZSB7CiAgICAvKipAZGV2IFJldHVybnMgdHJ1ZSBpZiBpbnZlc3RtZXQgaXMgYWxsb3dlZCAqLwogICAgZnVuY3Rpb24gY2FuSW52ZXN0KGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQgYW1vdW50LCB1aW50IHRva2Vuc0xlZnQpIGNvbnN0YW50IHJldHVybnMgKGJvb2wgcmVzdWx0KSB7CiAgICAgICAgaW52ZXN0b3I7IGFtb3VudDsgcmVzdWx0OyB0b2tlbnNMZWZ0OwogICAgfQoKICAgIC8qKkBkZXYgQ2FsbGVkIHdoZW4gaW52ZXN0bWVudCB3YXMgbWFkZSAqLwogICAgZnVuY3Rpb24gaW52ZXN0SGFwcGVuZWQoYWRkcmVzcyBpbnZlc3RvciwgdWludCBhbW91bnQpIG1hbmFnZXJPbmx5IHt9ICAgIAp9LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0lJbnZlc3RSZXN0cmljdGlvbnMuc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0lDcm93ZHNhbGVGb3JtdWxhLnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8qKkBkZXYgQWJzdHJhY3Rpb24gb2YgY3Jvd2RzYWxlIHRva2VuIGNhbGN1bGF0aW9uIGZ1bmN0aW9uICovCmNvbnRyYWN0IElDcm93ZHNhbGVGb3JtdWxhIHsKCiAgICAvKipAZGV2IFJldHVybnMgYW1vdW50IG9mIHRva2VucyB0aGF0IGNhbiBiZSBib3VnaHQgd2l0aCBnaXZlbiB3ZWlBbW91bnQgKi8KICAgIGZ1bmN0aW9uIGhvd01hbnlUb2tlbnNGb3JFdGhlcih1aW50MjU2IHdlaUFtb3VudCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2IHRva2VucywgdWludDI1NiBleGNlc3MpIHsKICAgICAgICB3ZWlBbW91bnQ7IHRva2VuczsgZXhjZXNzOwogICAgfQoKICAgIC8qKkBkZXYgUmV0dXJucyBob3cgbWFueSB0b2tlbnMgbGVmdCBmb3Igc2FsZSAqLwogICAgZnVuY3Rpb24gdG9rZW5zTGVmdCgpIGNvbnN0YW50IHJldHVybnModWludDI1NiBfbGVmdCkgeyBfbGVmdDt9ICAgIAp9LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0lDcm93ZHNhbGVGb3JtdWxhLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4uL3Rva2VuL1Rva2VuSG9sZGVyLnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCgoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0lUb2tlbkhvbGRlci5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgoKCi8qCiAgICBUb2tlbiBIb2xkZXIgaW50ZXJmYWNlCiovCmNvbnRyYWN0IElUb2tlbkhvbGRlciB7CiAgICBmdW5jdGlvbiB3aXRoZHJhd1Rva2VucyhJRVJDMjBUb2tlbiBfdG9rZW4sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYzsKfQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vSVRva2VuSG9sZGVyLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKipAZGV2IEEgY29udmVuaWVudCB3YXkgdG8gbWFuYWdlIHRva2VuJ3Mgb2YgYSBjb250cmFjdCAqLwpjb250cmFjdCBUb2tlbkhvbGRlciBpcyBJVG9rZW5Ib2xkZXIsIE1hbmFnZWFibGUgewogICAgCiAgICBmdW5jdGlvbiBUb2tlbkhvbGRlcigpIHsKICAgIH0KCiAgICAvKiogQGRldiBXaXRoZHJhd3MgdG9rZW5zIGhlbGQgYnkgdGhlIGNvbnRyYWN0IGFuZCBzZW5kcyB0aGVtIHRvIGEgZ2l2ZW4gYWRkcmVzcyAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXdUb2tlbnMoSUVSQzIwVG9rZW4gX3Rva2VuLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIG1hbmFnZXJPbmx5CiAgICB7CiAgICAgICAgYXNzZXJ0KF90b2tlbi50cmFuc2ZlcihfdG8sIF9hbW91bnQpKTsKICAgIH0KfQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4uL3Rva2VuL1Rva2VuSG9sZGVyLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKipAZGV2IENyb3dkc2FsZSBiYXNlIGNvbnRyYWN0LCB1c2VkIGZvciBQUkUtVEdFIGFuZCBUR0Ugc3RhZ2VzCiogVG9rZW4gaG9sZGVyIHNob3VsZCBhbHNvIGJlIHRoZSBvd25lciBvZiB0aGlzIGNvbnRyYWN0ICovCmNvbnRyYWN0IEJDU0Nyb3dkc2FsZSBpcyBSZXR1cm5Ub2tlbkFnZW50LCBUb2tlbkhvbGRlciwgSUNyb3dkc2FsZUZvcm11bGEsIFNhZmVNYXRoIHsKCiAgICBlbnVtIFN0YXRlIHtVbmtub3duLCBCZWZvcmVTdGFydCwgQWN0aXZlLCBGaW5pc2hlZFN1Y2Nlc3MsIEZpbmlzaGVkRmFpbHVyZX0KICAgIAogICAgSVRva2VuUG9vbCBwdWJsaWMgdG9rZW5Qb29sOwogICAgSUludmVzdFJlc3RyaWN0aW9ucyBwdWJsaWMgcmVzdHJpY3Rpb25zOyAvL3Jlc3RyaWN0aW9ucyBvbiBpbnZlc3RtZW50CiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeTsgLy9hZGRyZXNzIG9mIGNvbnRyYWN0IHRvIGNvbGxlY3QgZXRoZXIKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZTsgLy91bml0IHRpbWVzdGFtcCBvZiBzdGFydCB0aW1lCiAgICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOyAvL3VuaXggdGltZXN0YW1wIG9mIGVuZCBkYXRlCiAgICB1aW50MjU2IHB1YmxpYyBtaW5pbXVtR29hbEluV2VpOyAvL1RPRE8gb3IgaW4gdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNGb3JPbmVFdGhlcjsgLy9ob3cgbWFueSB0b2tlbnMgY2FuIHlvdSBidXkgZm9yIDEgZXRoZXIgICAKICAgIHVpbnQyNTYgcmVhbEFtb3VudEZvck9uZUV0aGVyOyAvL2hvdyBtYW55IHRva2VucyBjYW4geW91IGJ1eSBmb3IgMSBldGhlciAqIDEwKipkZWNpbWFscyAgIAogICAgdWludDI1NiBib251c1BjdDsgICAvL2FkZGl0aW9uYWwgcGVyY2VudCBvZiB0b2tlbnMgICAgCiAgICBib29sIHB1YmxpYyB3aXRoZHJldzsgLy90cnVlIGlmIGJlbmVmaWNpYXJ5IGFscmVhZHkgd2l0aGRyZXcKCiAgICB1aW50MjU2IHB1YmxpYyB3ZWlDb2xsZWN0ZWQ7CiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNTb2xkOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxJbnZlc3RtZW50czsKCiAgICBib29sIHB1YmxpYyBmYWlsdXJlOyAvL3RydWUgaWYgc29tZSBlcnJvciBvY2N1cnJlZCBkdXJpbmcgY3Jvd2RzYWxlCgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgaW52ZXN0ZWRGcm9tOyAvL2hvdyBtYW55IHdlaSBzcGVjaWZpYyBhZGRyZXNzIGludmVzdGVkCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyByZXR1cm5lZFRvOyAvL2hvdyBtYW55IHdlaSByZXR1cm5lZCB0byBzcGVjaWZpYyBhZGRyZXNzIGlmIHNhbGUgZmFpbHMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHRva2Vuc1NvbGRUbzsgLy9ob3cgbWFueSB0b2tlbnMgc29sZCB0byBzcGVjaWZpYyBhZGRyZWVzcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgb3ZlcnBheXM7ICAgICAvL292ZXJwYXlzIGZvciBzZW5kIHZhbHVlIGV4Y2Vzc2VzCgogICAgLy8gQSBuZXcgaW52ZXN0bWVudCB3YXMgbWFkZQogICAgZXZlbnQgSW52ZXN0ZWQoYWRkcmVzcyBpbnZlc3RvciwgdWludCB3ZWlBbW91bnQsIHVpbnQgdG9rZW5BbW91bnQpOwogICAgLy8gUmVmdW5kIHdhcyBwcm9jZXNzZWQgZm9yIGEgY29udHJpYnV0b3IKICAgIGV2ZW50IFJlZnVuZChhZGRyZXNzIGludmVzdG9yLCB1aW50IHdlaUFtb3VudCk7CiAgICAvLyBPdmVycGF5IHJlZnVuZCB3YXMgcHJvY2Vzc2VkIGZvciBhIGNvbnRyaWJ1dG9yCiAgICBldmVudCBPdmVycGF5UmVmdW5kKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQgd2VpQW1vdW50KTsKCiAgICAvKipAZGV2IENyb3dkc2FsZSBjb25zdHJ1Y3RvciwgY2FuIHNwZWNpZnkgc3RhcnRUaW1lIGFzIDAgdG8gc3RhcnQgY3Jvd2RzYWxlIGltbWVkaWF0ZWx5IAogICAgX3Rva2Vuc0Zvck9uZUV0aGVyIC0gZG9lc24idCBkZXBlbmQgb24gdG9rZW4gZGVjaW1hbHMgICAqLyAKICAgIGZ1bmN0aW9uIEJDU0Nyb3dkc2FsZSggICAgICAgIAogICAgICAgIElUb2tlblBvb2wgX3Rva2VuUG9vbCwKICAgICAgICBJSW52ZXN0UmVzdHJpY3Rpb25zIF9yZXN0cmljdGlvbnMsCiAgICAgICAgYWRkcmVzcyBfYmVuZWZpY2lhcnksIAogICAgICAgIHVpbnQyNTYgX3N0YXJ0VGltZSwgCiAgICAgICAgdWludDI1NiBfZHVyYXRpb25JbkhvdXJzLCAKICAgICAgICB1aW50MjU2IF9nb2FsSW5XZWksCiAgICAgICAgdWludDI1NiBfdG9rZW5zRm9yT25lRXRoZXIsCiAgICAgICAgdWludDI1NiBfYm9udXNQY3QpIAogICAgewogICAgICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShhZGRyZXNzKF90b2tlblBvb2wpICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfdG9rZW5zRm9yT25lRXRoZXIgPiAwKTsgCiAgICAgICAgCiAgICAgICAgdG9rZW5Qb29sID0gX3Rva2VuUG9vbDsKICAgICAgICBiZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgICAgICByZXN0cmljdGlvbnMgPSBfcmVzdHJpY3Rpb25zOwogICAgICAgIAogICAgICAgIGlmIChfc3RhcnRUaW1lID09IDApIHsKICAgICAgICAgICAgc3RhcnRUaW1lID0gbm93OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICAgICAgfQoKICAgICAgICBlbmRUaW1lID0gKF9kdXJhdGlvbkluSG91cnMgKiAxIGhvdXJzKSArIHN0YXJ0VGltZTsKICAgICAgICAKICAgICAgICB0b2tlbnNGb3JPbmVFdGhlciA9IF90b2tlbnNGb3JPbmVFdGhlcjsKICAgICAgICBtaW5pbXVtR29hbEluV2VpID0gX2dvYWxJbldlaTsKICAgICAgICBib251c1BjdCA9IF9ib251c1BjdDsKCiAgICAgICAgd2VpQ29sbGVjdGVkID0gMDsKICAgICAgICB0b2tlbnNTb2xkID0gMDsKICAgICAgICB0b3RhbEludmVzdG1lbnRzID0gMDsKICAgICAgICBmYWlsdXJlID0gZmFsc2U7CiAgICAgICAgd2l0aGRyZXcgPSBmYWxzZTsgICAgICAgIAogICAgICAgIHJlYWxBbW91bnRGb3JPbmVFdGhlciA9IHRva2VuUG9vbC50b2tlbigpLmdldFJlYWxUb2tlbkFtb3VudCh0b2tlbnNGb3JPbmVFdGhlcik7CiAgICB9CgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBpbnZlc3QoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnZlc3QoKSBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKGNhbkludmVzdChtc2cuc2VuZGVyLCBtc2cudmFsdWUpKTsKICAgICAgICAKICAgICAgICB1aW50MjU2IGV4Y2VzczsKICAgICAgICB1aW50MjU2IHdlaVBhaWQgPSBtc2cudmFsdWU7CiAgICAgICAgdWludDI1NiB0b2tlbnNUb0J1eTsKICAgICAgICAodG9rZW5zVG9CdXksIGV4Y2VzcykgPSBob3dNYW55VG9rZW5zRm9yRXRoZXIod2VpUGFpZCk7CgogICAgICAgIHJlcXVpcmUodG9rZW5zVG9CdXkgPD0gdG9rZW5zTGVmdCgpICYmIHRva2Vuc1RvQnV5ID4gMCk7CgogICAgICAgIGlmIChleGNlc3MgPiAwKSB7CiAgICAgICAgICAgIG92ZXJwYXlzW21zZy5zZW5kZXJdID0gc2FmZUFkZChvdmVycGF5c1ttc2cuc2VuZGVyXSwgZXhjZXNzKTsKICAgICAgICAgICAgd2VpUGFpZCA9IHNhZmVTdWIod2VpUGFpZCwgZXhjZXNzKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaW52ZXN0ZWRGcm9tW21zZy5zZW5kZXJdID0gc2FmZUFkZChpbnZlc3RlZEZyb21bbXNnLnNlbmRlcl0sIHdlaVBhaWQpOyAgICAgIAogICAgICAgIHRva2Vuc1NvbGRUb1ttc2cuc2VuZGVyXSA9IHNhZmVBZGQodG9rZW5zU29sZFRvW21zZy5zZW5kZXJdLCB0b2tlbnNUb0J1eSk7CiAgICAgICAgCiAgICAgICAgdG9rZW5zU29sZCA9IHNhZmVBZGQodG9rZW5zU29sZCwgdG9rZW5zVG9CdXkpOwogICAgICAgIHdlaUNvbGxlY3RlZCA9IHNhZmVBZGQod2VpQ29sbGVjdGVkLCB3ZWlQYWlkKTsKCiAgICAgICAgaWYoYWRkcmVzcyhyZXN0cmljdGlvbnMpICE9IDB4MCkgewogICAgICAgICAgICByZXN0cmljdGlvbnMuaW52ZXN0SGFwcGVuZWQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmVxdWlyZSh0b2tlblBvb2wudG9rZW4oKS50cmFuc2ZlckZyb20odG9rZW5Qb29sLCBtc2cuc2VuZGVyLCB0b2tlbnNUb0J1eSkpOwogICAgICAgICsrdG90YWxJbnZlc3RtZW50czsKICAgICAgICBJbnZlc3RlZChtc2cuc2VuZGVyLCB3ZWlQYWlkLCB0b2tlbnNUb0J1eSk7CiAgICB9CgogICAgLyoqQGRldiBSZXR1cm5Ub2tlbkFnZW50IG92ZXJyaWRlLiBSZXR1cm5zIGV0aGVyIGlmIGNyb3dkc2FsZSBpcyBmYWlsZWQgCiAgICAgICAgYW5kIGFtb3VudCBvZiByZXR1cm5lZCB0b2tlbnMgaXMgZXhhY3RseSB0aGUgc2FtZSBhcyBib3VnaHQgKi8KICAgIGZ1bmN0aW9uIHJldHVyblRva2VuKGFkZHJlc3MgZnJvbSwgdWludDI1NiBhbW91bnRSZXR1cm5lZCkgcHVibGljIHJldHVybmFibGVUb2tlbk9ubHkgewogICAgICAgIGlmIChtc2cuc2VuZGVyID09IGFkZHJlc3ModG9rZW5Qb29sLnRva2VuKCkpICYmIGdldFN0YXRlKCkgPT0gU3RhdGUuRmluaXNoZWRGYWlsdXJlKSB7CiAgICAgICAgICAgIC8vcmVxdWlyZShnZXRTdGF0ZSgpID09IFN0YXRlLkZpbmlzaGVkRmFpbHVyZSk7CiAgICAgICAgICAgIHJlcXVpcmUodG9rZW5zU29sZFRvW2Zyb21dID09IGFtb3VudFJldHVybmVkKTsKCiAgICAgICAgICAgIHJldHVybmVkVG9bZnJvbV0gPSBpbnZlc3RlZEZyb21bZnJvbV07CiAgICAgICAgICAgIGludmVzdGVkRnJvbVtmcm9tXSA9IDA7CiAgICAgICAgICAgIGZyb20udHJhbnNmZXIocmV0dXJuZWRUb1tmcm9tXSk7CgogICAgICAgICAgICBSZWZ1bmQoZnJvbSwgcmV0dXJuZWRUb1tmcm9tXSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKkBkZXYgUmV0dXJucyB0cnVlIGlmIGl0IGlzIHBvc3NpYmxlIHRvIGludmVzdCAqLwogICAgZnVuY3Rpb24gY2FuSW52ZXN0KGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQyNTYgYW1vdW50KSBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gZ2V0U3RhdGUoKSA9PSBTdGF0ZS5BY3RpdmUgJiYKICAgICAgICAgICAgICAgICAgICAoYWRkcmVzcyhyZXN0cmljdGlvbnMpID09IDB4MCB8fCAKICAgICAgICAgICAgICAgICAgICByZXN0cmljdGlvbnMuY2FuSW52ZXN0KGludmVzdG9yLCBhbW91bnQsIHRva2Vuc0xlZnQoKSkpOwogICAgfQoKICAgIC8qKkBkZXYgSUNyb3dkc2FsZUZvcm11bGEgb3ZlcnJpZGUgKi8KICAgIGZ1bmN0aW9uIGhvd01hbnlUb2tlbnNGb3JFdGhlcih1aW50MjU2IHdlaUFtb3VudCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2IHRva2VucywgdWludDI1NiBleGNlc3MpIHsgICAgICAgIAogICAgICAgIHVpbnQyNTYgYnBjdCA9IGdldEN1cnJlbnRCb251c1BjdCh3ZWlBbW91bnQpOwogICAgICAgIHVpbnQyNTYgbWF4VG9rZW5zID0gKHRva2Vuc0xlZnQoKSAqIDEwMCkgLyAoMTAwICsgYnBjdCk7CgogICAgICAgIHRva2VucyA9IHdlaUFtb3VudCAqIHJlYWxBbW91bnRGb3JPbmVFdGhlciAvIDEgZXRoZXI7CiAgICAgICAgaWYgKHRva2VucyA+IG1heFRva2VucykgewogICAgICAgICAgICB0b2tlbnMgPSBtYXhUb2tlbnM7CiAgICAgICAgfQoKICAgICAgICBleGNlc3MgPSB3ZWlBbW91bnQgLSB0b2tlbnMgKiAxIGV0aGVyIC8gcmVhbEFtb3VudEZvck9uZUV0aGVyOwoKICAgICAgICB0b2tlbnMgPSAodG9rZW5zICogMTAwICsgdG9rZW5zICogYnBjdCkgLyAxMDA7CiAgICB9CgogICAgLyoqQGRldiBSZXR1cm5zIGN1cnJlbnQgYm9udXMgcGVyY2VudCBbMC0xMDBdICovCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50Qm9udXNQY3QodWludDI1NiBpbnZlc3RtZW50KSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGJvbnVzUGN0OwogICAgfQogICAgCiAgICAvKipAZGV2IFJldHVybnMgaG93IG1hbnkgdG9rZW5zIGxlZnQgZm9yIHNhbGUgKi8KICAgIGZ1bmN0aW9uIHRva2Vuc0xlZnQoKSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsgICAgICAgIAogICAgICAgIHJldHVybiB0b2tlblBvb2wuZ2V0VG9rZW5BbW91bnQoKTsKICAgIH0KCiAgICAvKipAZGV2IFJldHVybnMgZnVuZHMgdGhhdCBzaG91bGQgYmUgc2VudCB0byBiZW5lZmljaWFyeSAqLwogICAgZnVuY3Rpb24gYW1vdW50VG9CZW5lZmljaWFyeSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gd2VpQ29sbGVjdGVkOwogICAgfSAKCiAgICAvKipAZGV2IFJldHVybnMgY3Jvd2RzYWxlIGN1cnJlbnQgc3RhdGUgKi8KICAgIGZ1bmN0aW9uIGdldFN0YXRlKCkgY29uc3RhbnQgcmV0dXJucyAoU3RhdGUpIHsKICAgICAgICBpZiAoZmFpbHVyZSkgewogICAgICAgICAgICByZXR1cm4gU3RhdGUuRmluaXNoZWRGYWlsdXJlOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAobm93IDwgc3RhcnRUaW1lKSB7CiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5CZWZvcmVTdGFydDsKICAgICAgICB9IGVsc2UgaWYgKChlbmRUaW1lID09IDAgfHwgbm93IDwgZW5kVGltZSkgJiYgdG9rZW5zTGVmdCgpID4gMCkgewogICAgICAgICAgICByZXR1cm4gU3RhdGUuQWN0aXZlOwogICAgICAgIH0gZWxzZSBpZiAod2VpQ29sbGVjdGVkID49IG1pbmltdW1Hb2FsSW5XZWkgfHwgdG9rZW5zTGVmdCgpIDw9IDApIHsKICAgICAgICAgICAgcmV0dXJuIFN0YXRlLkZpbmlzaGVkU3VjY2VzczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gU3RhdGUuRmluaXNoZWRGYWlsdXJlOwogICAgICAgIH0KICAgIH0KCiAgICAvKipAZGV2IEFsbG93cyBpbnZlc3RvciB0byB3aXRoZHJhdyBvdmVycGF5ICovCiAgICBmdW5jdGlvbiB3aXRoZHJhd092ZXJwYXkoKSB7CiAgICAgICAgdWludCBhbW91bnQgPSBvdmVycGF5c1ttc2cuc2VuZGVyXTsKICAgICAgICBvdmVycGF5c1ttc2cuc2VuZGVyXSA9IDA7ICAgICAgICAKCiAgICAgICAgaWYgKGFtb3VudCA+IDApIHsKICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIuc2VuZChhbW91bnQpKSB7CiAgICAgICAgICAgICAgICBPdmVycGF5UmVmdW5kKG1zZy5zZW5kZXIsIGFtb3VudCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBvdmVycGF5c1ttc2cuc2VuZGVyXSA9IGFtb3VudDsgLy9yZXN0b3JlIGZ1bmRzIGluIGNhc2Ugb2YgZmFpbGVkIHNlbmQKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKipAZGV2IFRyYW5zZmVycyBhbGwgY29sbGVjdGVkIGZ1bmRzIHRvIGJlbmVmaWNpYXJ5Ki8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9CZW5lZmljaWFyeSgpIHsKICAgICAgICByZXF1aXJlKGdldFN0YXRlKCkgPT0gU3RhdGUuRmluaXNoZWRTdWNjZXNzICYmICF3aXRoZHJldyk7CiAgICAgICAgCiAgICAgICAgd2l0aGRyZXcgPSB0cnVlOwogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gYW1vdW50VG9CZW5lZmljaWFyeSgpOwoKICAgICAgICBiZW5lZmljaWFyeS50cmFuc2ZlcihhbW91bnQpOwogICAgICAgIFJlZnVuZChiZW5lZmljaWFyeSwgYW1vdW50KTsKICAgIH0KCiAgICAvKipAZGV2IE1ha2VzIGNyb3dkc2FsZSBmYWlsZWQvb2ssIGZvciBlbWVyZ2VuY3kgcmVhc29ucyAqLwogICAgZnVuY3Rpb24gbWFrZUZhaWxlZChib29sIHN0YXRlKSBtYW5hZ2VyT25seSB7CiAgICAgICAgZmFpbHVyZSA9IHN0YXRlOwogICAgfQoKICAgIC8qKkBkZXYgU2V0cyBuZXcgYmVuZWZpY2lhcnkgKi8KICAgIGZ1bmN0aW9uIGNoYW5nZUJlbmVmaWNpYXJ5KGFkZHJlc3MgbmV3QmVuZWZpY2lhcnkpIG1hbmFnZXJPbmx5IHsKICAgICAgICBiZW5lZmljaWFyeSA9IG5ld0JlbmVmaWNpYXJ5OwogICAgfQp9IC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9CQ1NDcm93ZHNhbGUuc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8qKkBkZXYgQWRkaXRpb24gdG8gdG9rZW4tYWNjZXB0aW5nIGNyb3dkc2FsZSBjb250cmFjdC4gCiAgICBBbGxvd3MgdG8gc2V0IGJvbnVzIGRlY3JlYXNpbmcgd2l0aCB0aW1lLiAKICAgIEZvciBleGFtcGxlLCBpZiB3ZSBhbnQgdG8gc2V0IGJvbnVzIHRhaHQgZGVjcmVhc2VzIGZyb20gKzIwJSB0byArNSUgZWFjaCB3ZWVrIC0zJSwKICAgIGFuZCB0aGVuIHN0YXlzIG9uICslNSwgdGhlbiBjb25zdHJ1Y3RvciBwYXJhbWV0ZXJzIHNob3VsZCBiZToKICAgIF9ib251c1BjdCA9IDIwCiAgICBfbWF4RGVjcmVhc2VQY3QgPSAxNQogICAgX2RlY3JlYXNlU3RlcFBjdCA9IDMKICAgIF9zdGVwRHVyYXRpb25EYXlzID0gNwoKICAgIEluIGFkZGl0aW9uLCBpdCBhbGxvd3MgdG8gc2V0IGludmVzdG1lbnQgc3RlcHMgd2l0aCBkaWZmZXJlbnQgYm9udXMuIAogICAgRm9yIGV4YW1wbGUsIGlmIHRoZXJlIGlzIGZvbGxvd2luZyBzY2hlbWU6CiAgICBEZWZhdWx0IGJvbnVzICsyMCUKICAgIDEtNSBFVEggOiArMSUgYm9udXMsIAogICAgNS0xMCBFVEggOiArMiUgYm9udXMsCiAgICAxMC0yMCBFVEggOiArMyUgYm9udXMsCiAgICAyMCsgRVRIIDogKzUlIGJvbnVzLCAKICAgIHRoZW4gY29uc3RydWN0b3IgcGFyYW1ldGVycyBzaG91bGQgYmU6CiAgICBfYm9udXNQY3QgPSAyMAogICAgX2ludmVzdFN0ZXBzID0gWzEsNSwxMCwyMF0KICAgIF9ib251c1BjdFN0ZXBzID0gWzEsMiwzLDVdCiAgICAqLyAKY29udHJhY3QgQkNTQWRkQm9udXNDcm93ZHNhbGUgaXMgQkNTQ3Jvd2RzYWxlIHsKICAgIAogICAgdWludDI1NiBwdWJsaWMgZGVjcmVhc2VTdGVwUGN0OwogICAgdWludDI1NiBwdWJsaWMgc3RlcER1cmF0aW9uOwogICAgdWludDI1NiBwdWJsaWMgbWF4RGVjcmVhc2VQY3Q7CiAgICB1aW50MjU2W10gcHVibGljIGludmVzdFN0ZXBzOwogICAgdWludDhbXSBwdWJsaWMgYm9udXNQY3RTdGVwczsKICAgIAogICAgZnVuY3Rpb24gQkNTQWRkQm9udXNDcm93ZHNhbGUoICAgICAgICAKICAgICAgICBJVG9rZW5Qb29sIF90b2tlblBvb2wsCiAgICAgICAgSUludmVzdFJlc3RyaWN0aW9ucyBfcmVzdHJpY3Rpb25zLAogICAgICAgIGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCAKICAgICAgICB1aW50MjU2IF9zdGFydFRpbWUsIAogICAgICAgIHVpbnQyNTYgX2R1cmF0aW9uSW5Ib3VycywgCiAgICAgICAgdWludDI1NiBfZ29hbEluV2VpLAogICAgICAgIHVpbnQyNTYgX3Rva2Vuc0Zvck9uZUV0aGVyLAogICAgICAgIHVpbnQyNTYgX2JvbnVzUGN0LAogICAgICAgIHVpbnQyNTYgX21heERlY3JlYXNlUGN0LCAgICAgICAgCiAgICAgICAgdWludDI1NiBfZGVjcmVhc2VTdGVwUGN0LAogICAgICAgIHVpbnQyNTYgX3N0ZXBEdXJhdGlvbkRheXMsCiAgICAgICAgdWludDI1NltdIF9pbnZlc3RTdGVwcywKICAgICAgICB1aW50OFtdIF9ib251c1BjdFN0ZXBzICAgICAgICAgICAgICAKICAgICAgICApIAogICAgICAgIEJDU0Nyb3dkc2FsZSgKICAgICAgICAgICAgX3Rva2VuUG9vbCwKICAgICAgICAgICAgX3Jlc3RyaWN0aW9ucywKICAgICAgICAgICAgX2JlbmVmaWNpYXJ5LCAKICAgICAgICAgICAgX3N0YXJ0VGltZSwgCiAgICAgICAgICAgIF9kdXJhdGlvbkluSG91cnMsIAogICAgICAgICAgICBfZ29hbEluV2VpLAogICAgICAgICAgICBfdG9rZW5zRm9yT25lRXRoZXIsCiAgICAgICAgICAgIF9ib251c1BjdAogICAgICAgICkKICAgIHsKICAgICAgICByZXF1aXJlIChfYm9udXNQY3QgPj0gbWF4RGVjcmVhc2VQY3QpOwoKICAgICAgICBpbnZlc3RTdGVwcyA9IF9pbnZlc3RTdGVwczsKICAgICAgICBib251c1BjdFN0ZXBzID0gX2JvbnVzUGN0U3RlcHM7CiAgICAgICAgbWF4RGVjcmVhc2VQY3QgPSBfbWF4RGVjcmVhc2VQY3Q7CiAgICAgICAgZGVjcmVhc2VTdGVwUGN0ID0gX2RlY3JlYXNlU3RlcFBjdDsKICAgICAgICBzdGVwRHVyYXRpb24gPSBfc3RlcER1cmF0aW9uRGF5cyAqIDEgZGF5czsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50Qm9udXNQY3QodWludDI1NiBpbnZlc3RtZW50KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIAogICAgICAgIHVpbnQyNTYgZGVjcmVhc2VQY3QgPSBkZWNyZWFzZVN0ZXBQY3QgKiAobm93IC0gc3RhcnRUaW1lKSAvIHN0ZXBEdXJhdGlvbjsKICAgICAgICBpZiAoZGVjcmVhc2VQY3QgPiBtYXhEZWNyZWFzZVBjdCkgewogICAgICAgICAgICBkZWNyZWFzZVBjdCA9IG1heERlY3JlYXNlUGN0OwogICAgICAgIH0KCiAgICAgICAgdWludDI1NiBmaXJzdDI0aEFkZGl0aW9uID0gKG5vdyAtIHN0YXJ0VGltZSA8IDEgZGF5cyA/IDEgOiAwKTsKCiAgICAgICAgZm9yIChpbnQyNTYgaSA9IGludDI1NihpbnZlc3RTdGVwcy5sZW5ndGgpIC0gMTsgaSA+PSAwOyAtLWkpIHsKICAgICAgICAgICAgaWYgKGludmVzdG1lbnQgPj0gaW52ZXN0U3RlcHNbdWludDI1NihpKV0pIHsKICAgICAgICAgICAgICAgIHJldHVybiBib251c1BjdCAtIGRlY3JlYXNlUGN0ICsgYm9udXNQY3RTdGVwc1t1aW50MjU2KGkpXSArIGZpcnN0MjRoQWRkaXRpb247CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICByZXR1cm4gYm9udXNQY3QgLSBkZWNyZWFzZVBjdCArIGZpcnN0MjRoQWRkaXRpb247CiAgICB9Cgp9'.
	

]
