Class {
	#name : #SRTC2D346915414047795418b16694CA0B3F01251a6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTC2D346915414047795418b16694CA0B3F01251a6 >> base64 [
	^ 'LyoKICogVklTVEEgRklOVEVDSCAgCiAqIFNNQVJUIENPTlRSQUNUIEZPUiBDUk9XTlNBTEUgaHR0cDovL3d3dy52aXN0YWZpbi5jb20KICogRWRpdCBieSBSYXkgSW5kaW5vcgogKiBBcHByb3ZlZCBieSBKYWNreSBIc2llaAogKi8KCnByYWdtYSBzb2xpZGl0eSBeMC40LjExOwpsaWJyYXJ5IFNhZmVNYXRoIHsKCWZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewoJCXVpbnQgYyA9IGEgKiBiOwoJCWFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CgkJcmV0dXJuIGM7Cgl9CgkKCWZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewoJCWFzc2VydChiID4gMCk7CgkJdWludCBjID0gYSAvIGI7CgkJYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7CgkJcmV0dXJuIGM7Cgl9CgkKCWZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewoJCWFzc2VydChiIDw9IGEpOwoJCXJldHVybiBhIC0gYjsKCX0KCQoJZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CgkJdWludCBjID0gYSArIGI7CgkJYXNzZXJ0KGMgPj0gYSk7CgkJcmV0dXJuIGM7Cgl9CgkKCWZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CgkJcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwoJfQoJCglmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewoJCXJldHVybiBhIDwgYiA/IGEgOiBiOwoJfQoJCglmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKCQlyZXR1cm4gYSA+PSBiID8gYSA6IGI7Cgl9CgkKCWZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewoJCXJldHVybiBhIDwgYiA/IGEgOiBiOwoJfQoJCglmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKCQlpZiAoIWFzc2VydGlvbikgewoJCQl0aHJvdzsKICAgIH0KICB9Cn0KCgpjb250cmFjdCBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgkKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIF87CiAgICB9CgkKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICB9CiAgICB9Cn0KCgoKLyoKICogUGF1c2FibGUgRnVuY3Rpb24KICogQWJzdHJhY3QgY29udHJhY3QgdGhhdCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIGZ1bmN0aW9uLiAKICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewoJYm9vbCBwdWJsaWMgc3RvcHBlZCA9IGZhbHNlOwoJbW9kaWZpZXIgc3RvcEluRW1lcmdlbmN5IHsKCQlpZiAoc3RvcHBlZCkgewoJCQl0aHJvdzsKCQl9CgkJXzsKCX0KICAKCW1vZGlmaWVyIG9ubHlJbkVtZXJnZW5jeSB7CgkJaWYgKCFzdG9wcGVkKSB7CgkJCXRocm93OwoJCX0KCQlfOwoJfQoJCi8qCiAqIEVtZXJnZW5jeVN0b3AgRnVuY3Rpb24KICogY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbWVyZ2VuY3ksIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUgCiAqLwpmdW5jdGlvbiBlbWVyZ2VuY3lTdG9wKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIHN0b3BwZWQgPSB0cnVlOwoJfQoKCQovKgogKiBSZWxlYXNlIEVtZXJnZW5jeVN0YXRlIEZ1bmN0aW9uCiAqIGNhbGxlZCBieSB0aGUgb3duZXIgb24gZW5kIG9mIGVtZXJnZW5jeSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICovICAKCmZ1bmN0aW9uIHJlbGVhc2UoKSBleHRlcm5hbCBvbmx5T3duZXIgb25seUluRW1lcmdlbmN5IHsKICAgIHN0b3BwZWQgPSBmYWxzZTsKCX0KfQoKLyoKICogRVJDMjBCYXNpYyBjbGFzcwogKiBBYnN0cmFjdCBjb250cmFjdCB0aGF0IGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgRVJDMjBiYXNpYyBwZXJzaXN0ZW50IGRhdGEgaW4gc3RhdGUgdmFyaWFibGVzLgogKi8gCQpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwp9CgoKLyoKICogRVJDMjAgY2xhc3MKICogQWJzdHJhY3QgY29udHJhY3QgdGhhdCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IEVSQzIwIHBlcnNpc3RlbnQgZGF0YSBpbiBzdGF0ZSB2YXJpYWJsZXMuCiAqLyAKY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CglmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwoJZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwoJZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCgoKLyoKICogQmFzaWNUb2tlbiBjbGFzcwogKiBBYnN0cmFjdCBjb250cmFjdCB0aGF0IGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgQmFzaWNUb2tlbiBmdW5jdGlvbnMgYW5kICBwZXJzaXN0ZW50IGRhdGEgaW4gc3RhdGUgdmFyaWFibGVzLgogKi8KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgCgl1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKICAKCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKICAKCS8qCgkqIEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrICAKCSovCgltb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CgkJaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsKCQl0aHJvdzsKCQl9CgkJXzsKCX0KCQoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CgkJYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKCQliYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKCQlUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7Cgl9CgkKCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CgkJcmV0dXJuIGJhbGFuY2VzW19vd25lcl07Cgl9Cn0KCgoKLyoKICogU3RhbmRhcmRUb2tlbiBjbGFzcwogKiBBYnN0cmFjdCBjb250cmFjdCB0aGF0IGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgU3RhbmRUb2tlbiBmdW5jdGlvbnMgYW5kICBwZXJzaXN0ZW50IGRhdGEgaW4gc3RhdGUgdmFyaWFibGVzLgogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBCYXNpY1Rva2VuLCBFUkMyMCB7CgltYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CglmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoJZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgewoJCS8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCgkJLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKCQkvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKCQkvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKCQlpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93OwoJCWFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwoJCUFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwoJfQoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewoJCXJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwoJfQp9CgoKCi8qKgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBWSVNUQSB0b2tlbiBzbWFydCBjb250cmFjdC4gSW1wbGVtZW50cwogKiBWSVNUQUNPSU4gY2xhc3MKICovCmNvbnRyYWN0IFZJU1RBY29pbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKCXN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJWSVNUQWNvaW4iOwoJc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiVlRBIjsKCXVpbnQgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMDsKCS8vIENvbnN0cnVjdG9yCglmdW5jdGlvbiBWSVNUQWNvaW4oKSB7CgkJdG90YWxTdXBwbHkgPSA1MDAwMDAwMDsKCQliYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHRvdGFsU3VwcGx5OyAvLyBTZW5kIGFsbCB0b2tlbnMgdG8gb3duZXIKCX0KfQoKCgoKCgovKioKICogQ3Jvd2RzYWxlIFNtYXJ0IENvbnRyYWN0IGZvciBWSVNUQSBGSU5URUNICiAqIFRoaXMgc21hcnQgY29udHJhY3QgY29sbGVjdHMgRVRILCBhbmQgaW4gcmV0dXJuIGVtaXRzIFZJU1RBY29pbiB0b2tlbnMgdG8gdGhlIGJhY2tlcnMKICovCmNvbnRyYWN0IFZJU1RBQ3Jvd2RTYWxlUDEgaXMgUGF1c2FibGUgewogICAgCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKICAgIHN0cnVjdCBCYWNrZXIgewogICAgICAgIHVpbnQgd2VpUmVjZWl2ZWQ7IC8vIEFtb3VudCBvZiBFdGhlciBnaXZlbgogICAgICAgIHVpbnQgY29pblNlbnQ7CiAgICB9CgkKICAgIC8qCiAgICAqIENvbnN0YW50cwogICAgKi8KICAgIC8qIE1pbmltdW0gbnVtYmVyIG9mIFZJU1RBY29pbiB0byBzZWxsICovCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fQ0FQID0gMTsgLy8gMSBWSVNUQWNvaW5zCiAgICAvKiBNYXhpbXVtIG51bWJlciBvZiBWSVNUQWNvaW4gdG8gc2VsbCAqLwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTUFYX0NBUCA9IDUwMDAwMDA7IC8vIDUwMDAgVklTVEFjb2lucwogICAgLyogTWluaW11bSBhbW91bnQgdG8gaW52ZXN0ICovCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fSU5WRVNUX0VUSEVSID0gNTAwIGZpbm5leTsKICAgIC8qIENyb3dkc2FsZSBwZXJpb2QgKi8KICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBDUk9XRFNBTEVfUEVSSU9EID0gMTUgZGF5czsKICAgIC8qIE51bWJlciBvZiBWSVNUQWNvaW5zIHBlciBFdGhlciAqLwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQ09JTl9QRVJfRVRIRVIgPSAzNTA7IC8vIDEgVklTVEFjb2lucy9ldGgKCQoJCgkKCQogICAgLyoKICAgICogVmFyaWFibGVzCiAgICAqLwogICAgLyogVklTVEFjb2luIGNvbnRyYWN0IHJlZmVyZW5jZSAqLwogICAgVklTVEFjb2luIHB1YmxpYyBjb2luOwogICAgLyogTXVsdGlzaWcgY29udHJhY3QgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIEV0aGVyICovCiAgICBhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZ0V0aGVyOwogICAgLyogTnVtYmVyIG9mIEV0aGVyIHJlY2VpdmVkICovCiAgICB1aW50IHB1YmxpYyBldGhlclJlY2VpdmVkOwogICAgLyogTnVtYmVyIG9mIFZJU1RBY29pbnMgc2VudCB0byBFdGhlciBjb250cmlidXRvcnMgKi8KICAgIHVpbnQgcHVibGljIGNvaW5TZW50VG9FdGhlcjsKICAgIC8qIENyb3dkc2FsZSBzdGFydCB0aW1lICovCiAgICB1aW50IHB1YmxpYyBzdGFydFRpbWU7CiAgICAvKiBDcm93ZHNhbGUgZW5kIHRpbWUgKi8KICAgIHVpbnQgcHVibGljIGVuZFRpbWU7CiAgICAvKiBJcyBjcm93ZHNhbGUgc3RpbGwgb24gZ29pbmcgKi8KICAgIGJvb2wgcHVibGljIGNyb3dkc2FsZUNsb3NlZCA9IGZhbHNlOwogICAgLyogQmFja2VycyBFdGhlciBpbmRleGVkIGJ5IHRoZWlyIEV0aGVyZXVtIGFkZHJlc3MgKi8KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBCYWNrZXIpIHB1YmxpYyBiYWNrZXJzOwoJCgkKCQoJCiAgICAvKgogICAgKiBNb2RpZmllcnMKICAgICovCiAgICBtb2RpZmllciBtaW5DYXBOb3RSZWFjaGVkKCkgewogICAgICAgIGlmICgobm93IDwgZW5kVGltZSkgfHwgY29pblNlbnRUb0V0aGVyID49IE1JTl9DQVAgKSB0aHJvdzsKICAgICAgICBfOwogICAgfQogICAgbW9kaWZpZXIgcmVzcGVjdFRpbWVGcmFtZSgpIHsKICAgICAgICBpZiAoKG5vdyA8IHN0YXJ0VGltZSkgfHwgKG5vdyA+IGVuZFRpbWUgKSkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCQoJCiAgICAvKgogICAgICogRXZlbnQKICAgICovCiAgICBldmVudCBMb2dSZWNlaXZlZEVUSChhZGRyZXNzIGFkZHIsIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgTG9nQ29pbnNFbWl0ZWQoYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQgYW1vdW50KTsKCQoJCiAgICAvKgogICAgICogQ29uc3RydWN0b3IKICAgICovCiAgICBmdW5jdGlvbiBWSVNUQUNyb3dkU2FsZVAxKGFkZHJlc3MgX1ZJU1RBY29pbkFkZHJlc3MsIGFkZHJlc3MgX3RvKSB7CiAgICAgICAgY29pbiA9IFZJU1RBY29pbihfVklTVEFjb2luQWRkcmVzcyk7CiAgICAgICAgbXVsdGlzaWdFdGhlciA9IF90bzsKICAgIH0KCQoJCiAgICAvKiAKICAgICAqIFRoZSBmYWxsYmFjayBmdW5jdGlvbiBjb3JyZXNwb25kcyB0byBhIGRvbmF0aW9uIGluIEVUSAogICAgICovCiAgICBmdW5jdGlvbigpIHN0b3BJbkVtZXJnZW5jeSByZXNwZWN0VGltZUZyYW1lIHBheWFibGUgewogICAgICAgIGlmIChjcm93ZHNhbGVDbG9zZWQpIHRocm93OyAvL0Nyb3dkc2FsZSB3YXMgY2xvc2VkLgoJCXJlY2VpdmVFVEgobXNnLnNlbmRlcik7CiAgICB9CgkKCQogICAgLyogCiAgICAgKiBUbyBjYWxsIHRvIHN0YXJ0IHRoZSBjcm93ZHNhbGUKICAgICAqLwogICAgZnVuY3Rpb24gc3RhcnQoKSBvbmx5T3duZXIgewogICAgICAgIGlmIChzdGFydFRpbWUgIT0gMCkgdGhyb3c7IC8vIENyb3dkc2FsZSB3YXMgYWxyZWFkeSBzdGFydGVkCiAgICAgICAgc3RhcnRUaW1lID0gbm93IDsgICAgICAgICAgICAKICAgICAgICBlbmRUaW1lID0gIG5vdyArIENST1dEU0FMRV9QRVJJT0Q7ICAgIAogICAgfQoJCgkKICAgIC8qCiAgICAgKiAgUmVjZWl2ZXMgYSBkb25hdGlvbiBpbiBFdGhlcgogICAgKi8KICAgIGZ1bmN0aW9uIHJlY2VpdmVFVEgoYWRkcmVzcyBiZW5lZmljaWFyeSkgaW50ZXJuYWwgewogICAgICAgIGlmIChtc2cudmFsdWUgPCBNSU5fSU5WRVNUX0VUSEVSKSB0aHJvdzsgLy8gRG9uJ3QgYWNjZXB0IGZ1bmRpbmcgdW5kZXIgYSBwcmVkZWZpbmVkIHRocmVzaG9sZCAgICAgICAgCiAgICAgICAgdWludCBjb2luVG9TZW5kID0gYm9udXMobXNnLnZhbHVlLm11bChDT0lOX1BFUl9FVEhFUikuZGl2KDEgZXRoZXIpKTsgLy8gQ29tcHV0ZSB0aGUgbnVtYmVyIG9mIFZJU1RBY29pbiB0byBzZW5kCiAgICAgICAgaWYgKGNvaW5Ub1NlbmQuYWRkKGNvaW5TZW50VG9FdGhlcikgPiBNQVhfQ0FQKSB0aHJvdzsgICAgCiAgICAgICAgQmFja2VyIGJhY2tlciA9IGJhY2tlcnNbYmVuZWZpY2lhcnldOwogICAgICAgIGNvaW4udHJhbnNmZXIoYmVuZWZpY2lhcnksIGNvaW5Ub1NlbmQpOyAvLyBUcmFuc2ZlciBWSVNUQWNvaW5zIHJpZ2h0IG5vdwoJCWlmICghbXVsdGlzaWdFdGhlci5zZW5kKHRoaXMuYmFsYW5jZSkpIHRocm93OyAvL1RyYW5zZmVyIEVUSCB0byBWSVNUQSBFQ0MJCQogICAgICAgIGJhY2tlci5jb2luU2VudCA9IGJhY2tlci5jb2luU2VudC5hZGQoY29pblRvU2VuZCk7CiAgICAgICAgYmFja2VyLndlaVJlY2VpdmVkID0gYmFja2VyLndlaVJlY2VpdmVkLmFkZChtc2cudmFsdWUpOyAvLyBVcGRhdGUgdGhlIHRvdGFsIHdlaSBjb2xsZWN0ZWQgZHVyaW5nIHRoZSBjcm93ZGZ1bmRpbmcgZm9yIHRoaXMgYmFja2VyICAgIAogICAgICAgIGV0aGVyUmVjZWl2ZWQgPSBldGhlclJlY2VpdmVkLmFkZChtc2cudmFsdWUpOyAvLyBVcGRhdGUgdGhlIHRvdGFsIHdlaSBjb2xsZWN0ZWQgZHVyaW5nIHRoZSBjcm93ZGZ1bmRpbmcKICAgICAgICBjb2luU2VudFRvRXRoZXIgPSBjb2luU2VudFRvRXRoZXIuYWRkKGNvaW5Ub1NlbmQpOwogICAgICAgIC8vIFNlbmQgZXZlbnRzCiAgICAgICAgTG9nQ29pbnNFbWl0ZWQobXNnLnNlbmRlciAsY29pblRvU2VuZCk7CiAgICAgICAgTG9nUmVjZWl2ZWRFVEgoYmVuZWZpY2lhcnksIGV0aGVyUmVjZWl2ZWQpOyAKICAgIH0KICAgIAogICAgLyoKICAgICAqQ29tcHV0ZSB0aGUgVklTVEFjb2luIEJPTlVTIGFjY29yZGluZyB0byB0aGUgaW52ZXN0bWVudCBwZXJpb2QKICAgICAqLwogICAgZnVuY3Rpb24gYm9udXModWludCBhbW91bnQpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gYW1vdW50LmFkZChhbW91bnQuZGl2KDUpKTsgICAvLyBib251cyAyMCUKICAgIH0KCQoJCgkKCQogICAgLyogIAogICAgICogRklOQUxJWkUgdGhlIGNyb3dkc2FsZSwgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBpY28gcGVyaW9kCiAgICAqLwogICAgZnVuY3Rpb24gZmluYWxpemUoKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBpZiAobm93IDwgZW5kVGltZSkgeyAvLyBDYW5ub3QgZmluYWxpc2UgYmVmb3JlIENST1dEU0FMRV9QRVJJT0Qgb3IgYmVmb3JlIHNlbGxpbmcgYWxsIGNvaW5zCiAgICAgICAgICAgIGlmIChjb2luU2VudFRvRXRoZXIgPT0gTUFYX0NBUCkgewogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFtdWx0aXNpZ0V0aGVyLnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7IC8vIE1vdmUgdGhlIHJlbWFpbmluZyBFdGhlciB0byB0aGUgbXVsdGlzaWcgYWRkcmVzcwoJCWdldFJlbWFpbkNvaW5zKCk7CiAgICAgICAgY3Jvd2RzYWxlQ2xvc2VkID0gdHJ1ZTsKICAgIH0KCQoJCiAgICAvKiAgCiAgICAqIEZhaWxzYWZlIGRyYWluCiAgICAqLwogICAgZnVuY3Rpb24gZHJhaW4oKSBvbmx5T3duZXIgewogICAgICAgIGlmICghb3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpKSB0aHJvdzsKICAgIH0KCQoJCiAgICAvKioKICAgICAqIEFsbG93IHRvIGNoYW5nZSB0aGUgdGVhbSBtdWx0aXNpZyBhZGRyZXNzIGluIHRoZSBjYXNlIG9mIGVtZXJnZW5jeS4KICAgICAqLwogICAgZnVuY3Rpb24gc2V0TXVsdGlzaWcoYWRkcmVzcyBhZGRyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBpZiAoYWRkciA9PSBhZGRyZXNzKDApKSB0aHJvdzsKICAgICAgICBtdWx0aXNpZ0V0aGVyID0gYWRkcjsKICAgIH0KCQoJCiAgICAvKioKICAgICAqIE1hbnVhbGx5IGJhY2sgVklTVEFjb2luIG93bmVyIGFkZHJlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJhY2tWSVNUQWNvaW5Pd25lcigpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGNvaW4udHJhbnNmZXJPd25lcnNoaXAob3duZXIpOwogICAgfQoJCgkKICAgIC8qKgogICAgICogR2V0IHJlYW1pbiBjb2lucyBiYWNrIHRvIG93bmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFJlbWFpbkNvaW5zKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgdmFyIHJlbWFpbnMgPSBNQVhfQ0FQIC0gY29pblNlbnRUb0V0aGVyOwogICAgICAgIEJhY2tlciBiYWNrZXIgPSBiYWNrZXJzW293bmVyXTsKICAgICAgICBjb2luLnRyYW5zZmVyKG93bmVyLCByZW1haW5zKTsgLy8gVHJhbnNmZXIgVklTVEFjb2lucyByaWdodCBub3cgCiAgICAgICAgYmFja2VyLmNvaW5TZW50ID0gYmFja2VyLmNvaW5TZW50LmFkZChyZW1haW5zKTsKICAgICAgICBjb2luU2VudFRvRXRoZXIgPSBjb2luU2VudFRvRXRoZXIuYWRkKHJlbWFpbnMpOwogICAgICAgIC8vIFNlbmQgZXZlbnRzCiAgICAgICAgTG9nQ29pbnNFbWl0ZWQodGhpcyAscmVtYWlucyk7CiAgICAgICAgTG9nUmVjZWl2ZWRFVEgob3duZXIsIGV0aGVyUmVjZWl2ZWQpOyAKICAgIH0KfQ=='.
	

]
