Class {
	#name : #SRTf8d81eb6c765397ecfadc3b396715267bb41f241,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf8d81eb6c765397ecfadc3b396715267bb41f241 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBDcm93ZHNhbGUgewogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgX3JlY2lwaWVudCkgcGF5YWJsZTsKfQoKY29udHJhY3QgQ2FwV2hpdGVsaXN0IHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgd2hpdGVsaXN0OwoKICAgIGV2ZW50IFNldChhZGRyZXNzIF9hZGRyZXNzLCB1aW50MjU2IF9hbW91bnQpOwoKICAgIGZ1bmN0aW9uIENhcFdoaXRlbGlzdCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgLy8gU2V0IGluIHByb2QKICAgIH0KCiAgICBmdW5jdGlvbiBkZXN0cnVjdCgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0V2hpdGVsaXN0ZWQoYWRkcmVzcyBfYWRkcmVzcywgdWludDI1NiBfYW1vdW50KSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBzZXRXaGl0ZWxpc3RJbnRlcm5hbChfYWRkcmVzcywgX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0V2hpdGVsaXN0SW50ZXJuYWwoYWRkcmVzcyBfYWRkcmVzcywgdWludDI1NiBfYW1vdW50KSBwcml2YXRlIHsKICAgICAgICB3aGl0ZWxpc3RbX2FkZHJlc3NdID0gX2Ftb3VudDsKICAgICAgICBTZXQoX2FkZHJlc3MsIF9hbW91bnQpOwogICAgfQp9Cgpjb250cmFjdCBUb2tlbiB7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9CgoKLyogIEVSQyAyMCB0b2tlbiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSkgewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUpIHsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCAgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICAgIH0KICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBNaW50YWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CiAgZXZlbnQgTWludEZpbmlzaGVkKCk7CgogIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKICBtb2RpZmllciBjYW5NaW50KCkgewogICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIG1pbnQgdG9rZW5zCiAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgbWludGVkIHRva2Vucy4KICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAqLwogIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyIGNhbk1pbnQgcHVibGljIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgVHJhbnNmZXIoMHgwLCBfdG8sIF9hbW91bnQpOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBzdG9wIG1pbnRpbmcgbmV3IHRva2Vucy4KICAgKi8KICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgTWludEZpbmlzaGVkKCk7CiAgfQp9CmNvbnRyYWN0IFJDTlRva2VuIGlzIE1pbnRhYmxlVG9rZW4gewogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlJpcGlvIENyZWRpdCBOZXR3b3JrIFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlJDTiI7CiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIHN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICIxLjAiOwp9Cgpjb250cmFjdCBQcmVhbGxvY2F0aW9uc1doaXRlbGlzdCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHdoaXRlbGlzdDsKCiAgICBldmVudCBTZXQoYWRkcmVzcyBfYWRkcmVzcywgYm9vbCBfZW5hYmxlZCk7CgogICAgZnVuY3Rpb24gUHJlYWxsb2NhdGlvbnNXaGl0ZWxpc3QoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIC8vIFNldCBpbiBwcm9kCiAgICB9CgogICAgZnVuY3Rpb24gZGVzdHJ1Y3QoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFdoaXRlbGlzdGVkKGFkZHJlc3MgX2FkZHJlc3MsIGJvb2wgX2VuYWJsZWQpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIHNldFdoaXRlbGlzdEludGVybmFsKF9hZGRyZXNzLCBfZW5hYmxlZCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0V2hpdGVsaXN0SW50ZXJuYWwoYWRkcmVzcyBfYWRkcmVzcywgYm9vbCBfZW5hYmxlZCkgcHJpdmF0ZSB7CiAgICAgICAgd2hpdGVsaXN0W19hZGRyZXNzXSA9IF9lbmFibGVkOwogICAgICAgIFNldChfYWRkcmVzcywgX2VuYWJsZWQpOwogICAgfQp9Cgpjb250cmFjdCBSQ05Dcm93ZHNhbGUgaXMgQ3Jvd2RzYWxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIC8vIG1ldGFkYXRhCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIC8vIGNvbnRyYWN0cwogICAgYWRkcmVzcyBwdWJsaWMgZXRoRnVuZERlcG9zaXQ7ICAgICAgLy8gZGVwb3NpdCBhZGRyZXNzIGZvciBFVEggZm9yIFJpcGlvCiAgICBhZGRyZXNzIHB1YmxpYyByY25GdW5kRGVwb3NpdDsgICAgICAvLyBkZXBvc2l0IGFkZHJlc3MgZm9yIFJpcGlvIHVzZSBhbmQgUkNOIFVzZXIgRnVuZAoKICAgIC8vIGNyb3dkc2FsZSBwYXJhbWV0ZXJzCiAgICBib29sIHB1YmxpYyBpc0ZpbmFsaXplZDsgICAgICAgICAgICAgIC8vIHN3aXRjaGVkIHRvIHRydWUgaW4gb3BlcmF0aW9uYWwgc3RhdGUKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdTdGFydFRpbWVzdGFtcDsKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdFbmRUaW1lc3RhbXA7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCByY25GdW5kID0gNDkwICogKDEwKio2KSAqIDEwKipkZWNpbWFsczsgICAvLyA0OTBtIFJDTiByZXNlcnZlZCBmb3IgUmlwaW8gdXNlCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlbkV4Y2hhbmdlUmF0ZSA9IDQwMDA7IC8vIDQwMDAgUkNOIHRva2VucyBwZXIgMSBFVEgKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuQ3JlYXRpb25DYXAgPSAgMTAwMCAqICgxMCoqNikgKiAxMCoqZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBtaW5CdXlUb2tlbnMgPSA0MDAgKiAxMCoqZGVjaW1hbHM7IC8vIDAuMSBFVEgKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGdhc1ByaWNlTGltaXQgPSA2MCAqIDEwKio5OyAvLyBHYXMgbGltaXQgNjAgZ3dlaQoKICAgIC8vIGV2ZW50cwogICAgZXZlbnQgQ3JlYXRlUkNOKGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJvdWdodDsgLy8gY2FwIG1hcAoKICAgIENhcFdoaXRlbGlzdCBwdWJsaWMgd2hpdGVMaXN0OwogICAgUHJlYWxsb2NhdGlvbnNXaGl0ZWxpc3QgcHVibGljIHByZWFsbG9jYXRpb25zV2hpdGVsaXN0OwogICAgUkNOVG9rZW4gcHVibGljIHRva2VuOwoKICAgIC8vIGNvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBSQ05Dcm93ZHNhbGUoYWRkcmVzcyBfZXRoRnVuZERlcG9zaXQsCiAgICAgICAgICBhZGRyZXNzIF9yY25GdW5kRGVwb3NpdCwKICAgICAgICAgIHVpbnQyNTYgX2Z1bmRpbmdTdGFydFRpbWVzdGFtcCwKICAgICAgICAgIHVpbnQyNTYgX2Z1bmRpbmdFbmRUaW1lc3RhbXApIHsKICAgICAgdG9rZW4gPSBuZXcgUkNOVG9rZW4oKTsKICAgICAgd2hpdGVMaXN0ID0gbmV3IENhcFdoaXRlbGlzdCgpOwogICAgICBwcmVhbGxvY2F0aW9uc1doaXRlbGlzdCA9IG5ldyBQcmVhbGxvY2F0aW9uc1doaXRlbGlzdCgpOwoKICAgICAgLy8gc2FuaXR5IGNoZWNrcwogICAgICBhc3NlcnQoX2V0aEZ1bmREZXBvc2l0ICE9IDB4MCk7CiAgICAgIGFzc2VydChfcmNuRnVuZERlcG9zaXQgIT0gMHgwKTsKICAgICAgYXNzZXJ0KF9mdW5kaW5nU3RhcnRUaW1lc3RhbXAgPCBfZnVuZGluZ0VuZFRpbWVzdGFtcCk7CiAgICAgIGFzc2VydCh1aW50MjU2KHRva2VuLmRlY2ltYWxzKCkpID09IGRlY2ltYWxzKTsgCgogICAgICBpc0ZpbmFsaXplZCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAvL2NvbnRyb2xzIHByZSB0aHJvdWdoIGNyb3dkc2FsZSBzdGF0ZQogICAgICBldGhGdW5kRGVwb3NpdCA9IF9ldGhGdW5kRGVwb3NpdDsKICAgICAgcmNuRnVuZERlcG9zaXQgPSBfcmNuRnVuZERlcG9zaXQ7CiAgICAgIGZ1bmRpbmdTdGFydFRpbWVzdGFtcCA9IF9mdW5kaW5nU3RhcnRUaW1lc3RhbXA7CiAgICAgIGZ1bmRpbmdFbmRUaW1lc3RhbXAgPSBfZnVuZGluZ0VuZFRpbWVzdGFtcDsKICAgICAgdG9rZW4ubWludChyY25GdW5kRGVwb3NpdCwgcmNuRnVuZCk7CiAgICAgIENyZWF0ZVJDTihyY25GdW5kRGVwb3NpdCwgcmNuRnVuZCk7ICAvLyBsb2dzIFJpcGlvIEludGwgZnVuZAogICAgfQoKICAgIC8vIGZhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGJ1eSB0b2tlbnMKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgogICAgLy8gbG93IGxldmVsIHRva2VuIHB1cmNoYXNlIGZ1bmN0aW9uCiAgICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBiZW5lZmljaWFyeSkgcGF5YWJsZSB7CiAgICAgIHJlcXVpcmUgKCFpc0ZpbmFsaXplZCk7CiAgICAgIHJlcXVpcmUgKGJsb2NrLnRpbWVzdGFtcCA+PSBmdW5kaW5nU3RhcnRUaW1lc3RhbXAgfHwgcHJlYWxsb2NhdGlvbnNXaGl0ZWxpc3Qud2hpdGVsaXN0KG1zZy5zZW5kZXIpKTsKICAgICAgcmVxdWlyZSAoYmxvY2sudGltZXN0YW1wIDw9IGZ1bmRpbmdFbmRUaW1lc3RhbXApOwogICAgICByZXF1aXJlIChtc2cudmFsdWUgIT0gMCk7CiAgICAgIHJlcXVpcmUgKGJlbmVmaWNpYXJ5ICE9IDB4MCk7CiAgICAgIHJlcXVpcmUgKHR4Lmdhc3ByaWNlIDw9IGdhc1ByaWNlTGltaXQpOwoKICAgICAgdWludDI1NiB0b2tlbnMgPSBtc2cudmFsdWUubXVsKHRva2VuRXhjaGFuZ2VSYXRlKTsgLy8gY2hlY2sgdGhhdCB3ZSdyZSBub3Qgb3ZlciB0b3RhbHMKICAgICAgdWludDI1NiBjaGVja2VkU3VwcGx5ID0gdG9rZW4udG90YWxTdXBwbHkoKS5hZGQodG9rZW5zKTsKICAgICAgdWludDI1NiBjaGVja2VkQm91Z2h0ID0gYm91Z2h0W21zZy5zZW5kZXJdLmFkZCh0b2tlbnMpOwoKICAgICAgLy8gaWYgc2VuZGVyIGlzIG5vdCB3aGl0ZWxpc3RlZCBvciBleGNlZWRzIHRoZWlyIGNhcCwgY2FuY2VsIHRoZSB0cmFuc2FjdGlvbgogICAgICByZXF1aXJlIChjaGVja2VkQm91Z2h0IDw9IHdoaXRlTGlzdC53aGl0ZWxpc3QobXNnLnNlbmRlcikgfHwgcHJlYWxsb2NhdGlvbnNXaGl0ZWxpc3Qud2hpdGVsaXN0KG1zZy5zZW5kZXIpKTsKCiAgICAgIC8vIHJldHVybiBtb25leSBpZiBzb21ldGhpbmcgZ29lcyB3cm9uZwogICAgICByZXF1aXJlICh0b2tlbkNyZWF0aW9uQ2FwID49IGNoZWNrZWRTdXBwbHkpOwoKICAgICAgLy8gcmV0dXJuIG1vbmV5IGlmIHRva2VucyBpcyBsZXNzIHRoYW4gdGhlIG1pbiBhbW91bnQgYW5kIHRoZSB0b2tlbiBpcyBub3QgZmluYWxpemluZwogICAgICAvLyB0aGUgbWluIGFtb3VudCBkb2VzIG5vdCBhcHBseSBpZiB0aGUgYXZhaWxhYmxlcyB0b2tlbnMgYXJlIGxlc3MgdGhhbiB0aGUgbWluIGFtb3VudC4KICAgICAgcmVxdWlyZSAodG9rZW5zID49IG1pbkJ1eVRva2VucyB8fCAodG9rZW5DcmVhdGlvbkNhcCAtIHRva2VuLnRvdGFsU3VwcGx5KCkpIDw9IG1pbkJ1eVRva2Vucyk7CgogICAgICB0b2tlbi5taW50KGJlbmVmaWNpYXJ5LCB0b2tlbnMpOwogICAgICBib3VnaHRbbXNnLnNlbmRlcl0gPSBjaGVja2VkQm91Z2h0OwogICAgICBDcmVhdGVSQ04oYmVuZWZpY2lhcnksIHRva2Vucyk7ICAvLyBsb2dzIHRva2VuIGNyZWF0aW9uCgogICAgICBmb3J3YXJkRnVuZHMoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIHsKICAgICAgcmVxdWlyZSAoIWlzRmluYWxpemVkKTsKICAgICAgcmVxdWlyZSAoYmxvY2sudGltZXN0YW1wID4gZnVuZGluZ0VuZFRpbWVzdGFtcCB8fCB0b2tlbi50b3RhbFN1cHBseSgpID09IHRva2VuQ3JlYXRpb25DYXApOwogICAgICByZXF1aXJlIChtc2cuc2VuZGVyID09IGV0aEZ1bmREZXBvc2l0KTsKICAgICAgaXNGaW5hbGl6ZWQgPSB0cnVlOwogICAgICB0b2tlbi5maW5pc2hNaW50aW5nKCk7CiAgICAgIHdoaXRlTGlzdC5kZXN0cnVjdCgpOwogICAgICBwcmVhbGxvY2F0aW9uc1doaXRlbGlzdC5kZXN0cnVjdCgpOwogICAgfQoKICAgIC8vIHNlbmQgZXRoZXIgdG8gdGhlIGZ1bmQgY29sbGVjdGlvbiB3YWxsZXQKICAgIGZ1bmN0aW9uIGZvcndhcmRGdW5kcygpIGludGVybmFsIHsKICAgICAgZXRoRnVuZERlcG9zaXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRXaGl0ZWxpc3QoYWRkcmVzcyBfYWRkcmVzcywgdWludDI1NiBfYW1vdW50KSB7CiAgICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gZXRoRnVuZERlcG9zaXQpOwogICAgICB3aGl0ZUxpc3Quc2V0V2hpdGVsaXN0ZWQoX2FkZHJlc3MsIF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByZWFsbG9jYXRpb25XaGl0ZWxpc3QoYWRkcmVzcyBfYWRkcmVzcywgYm9vbCBfc3RhdHVzKSB7CiAgICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gZXRoRnVuZERlcG9zaXQpOwogICAgICBwcmVhbGxvY2F0aW9uc1doaXRlbGlzdC5zZXRXaGl0ZWxpc3RlZChfYWRkcmVzcywgX3N0YXR1cyk7CiAgICB9Cn0='.
	

]
