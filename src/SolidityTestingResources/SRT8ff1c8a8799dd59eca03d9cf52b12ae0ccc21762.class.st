Class {
	#name : #SRT8ff1c8a8799dd59eca03d9cf52b12ae0ccc21762,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8ff1c8a8799dd59eca03d9cf52b12ae0ccc21762 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBNYW5hZ2VyIHsKICAgIGFkZHJlc3MgcHVibGljIGNlbzsKICAgIGFkZHJlc3MgcHVibGljIGNmbzsKICAgIGFkZHJlc3MgcHVibGljIGNvbzsKICAgIGFkZHJlc3MgcHVibGljIGNhbzsKCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNDZW8sIGFkZHJlc3MgaW5kZXhlZCBuZXdDZW8pOwogICAgZXZlbnQgUGF1c2UoKTsKICAgIGV2ZW50IFVucGF1c2UoKTsKCgogICAgLyoqCiAgICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAgKiBhY2NvdW50LgogICAgKi8KICAgIGZ1bmN0aW9uIE1hbmFnZXIoKSBwdWJsaWMgewogICAgICAgIGNvbyA9IG1zZy5zZW5kZXI7IAogICAgICAgIGNmbyA9IDB4NDQ3ODcwQzJmMzM0RmNkYTY4ZTY0NGFFNTNEYjM0NzFBOWY3MzAyRDsKICAgICAgICBjZW8gPSAweDZFQzlDNmZjRTE1REI5ODI1MjFlQTIwODc0NzQyOTFmQTVBZDZkMzE7CiAgICAgICAgY2FvID0gMHgzOTFFZjJjQjBjODFBMkM0N0Q2NTljM2UzZTY2NzVGNTUwZTRiMTgzOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICAqLwogICAgbW9kaWZpZXIgb25seUNFTygpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY2VvKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlDT08oKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Q0FPKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjYW8pOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIGJvb2wgYWxsb3dUcmFuc2ZlciA9IGZhbHNlOwogICAgCiAgICBmdW5jdGlvbiBjaGFuZ2VBbGxvd1RyYW5zZmVyU3RhdGUoKSBwdWJsaWMgb25seUNPTyB7CiAgICAgICAgaWYgKGFsbG93VHJhbnNmZXIpIHsKICAgICAgICAgICAgYWxsb3dUcmFuc2ZlciA9IGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsbG93VHJhbnNmZXIgPSB0cnVlOwogICAgICAgIH0KICAgIH0KICAgIAogICAgbW9kaWZpZXIgd2hlblRyYW5zZmVyQWxsb3dlZCgpIHsKICAgICAgICByZXF1aXJlKGFsbG93VHJhbnNmZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3Q2VvLgogICAgKiBAcGFyYW0gbmV3Q2VvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgICovCiAgICBmdW5jdGlvbiBkZW1pc2VDRU8oYWRkcmVzcyBuZXdDZW8pIHB1YmxpYyBvbmx5Q0VPIHsKICAgICAgICByZXF1aXJlKG5ld0NlbyAhPSBhZGRyZXNzKDApKTsKICAgICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChjZW8sIG5ld0Nlbyk7CiAgICAgICAgY2VvID0gbmV3Q2VvOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldENGTyhhZGRyZXNzIG5ld0NmbykgcHVibGljIG9ubHlDRU8gewogICAgICAgIHJlcXVpcmUobmV3Q2ZvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGNmbyA9IG5ld0NmbzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDT08oYWRkcmVzcyBuZXdDb28pIHB1YmxpYyBvbmx5Q0VPIHsKICAgICAgICByZXF1aXJlKG5ld0NvbyAhPSBhZGRyZXNzKDApKTsKICAgICAgICBjb28gPSBuZXdDb287CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q0FPKGFkZHJlc3MgbmV3Q2FvKSBwdWJsaWMgb25seUNFTyB7CiAgICAgICAgcmVxdWlyZShuZXdDYW8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgY2FvID0gbmV3Q2FvOwogICAgfQoKICAgIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKCiAgICAvKioKICAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBub3QgcGF1c2VkLgogICAgKi8KICAgIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICAgICAgcmVxdWlyZSghcGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgICovCiAgICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgICAgIHJlcXVpcmUocGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgICovCiAgICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlDQU8gd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgICAgIHBhdXNlZCA9IHRydWU7CiAgICAgICAgUGF1c2UoKTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICAqLwogICAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlDQU8gd2hlblBhdXNlZCBwdWJsaWMgewogICAgICAgIHBhdXNlZCA9IGZhbHNlOwogICAgICAgIFVucGF1c2UoKTsKICAgIH0KfQoKCmNvbnRyYWN0IFNraW5CYXNlIGlzIE1hbmFnZXIgewoKICAgIHN0cnVjdCBTa2luIHsKICAgICAgICB1aW50MTI4IGFwcGVhcmFuY2U7CiAgICAgICAgdWludDY0IGNvb2xkb3duRW5kVGltZTsKICAgICAgICB1aW50NjQgbWl4aW5nV2l0aElkOwogICAgfQoKICAgIC8vIEFsbCBza2lucywgbWFwcGluZyBmcm9tIHNraW4gaWQgdG8gc2tpbiBhcHByYW5jZQogICAgbWFwcGluZyAodWludDI1NiA9PiBTa2luKSBza2luczsKCiAgICAvLyBNYXBwaW5nIGZyb20gc2tpbiBpZCB0byBvd25lcgogICAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgc2tpbklkVG9Pd25lcjsKCiAgICAvLyBXaGV0aGVyIGEgc2tpbiBpcyBvbiBzYWxlCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGJvb2wpIHB1YmxpYyBpc09uU2FsZTsKCiAgICAvLyBOdW1iZXIgb2YgYWxsIHRvdGFsIHZhbGlkIHNraW5zCiAgICAvLyBza2luSWQgMCBzaG91bGQgbm90IGNvcnJlc3BvbmQgdG8gYW55IHNraW4sIGJlY2F1c2Ugc2tpbi5taXhpbmdXaXRoSWQ9PTAgaW5kaWNhdGVzIG5vdCBtaXhpbmcKICAgIHVpbnQyNTYgcHVibGljIG5leHRTa2luSWQgPSAxOyAgCgogICAgLy8gTnVtYmVyIG9mIHNraW5zIGFuIGFjY291bnQgb3ducwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgbnVtU2tpbk9mQWNjb3VudHM7CgogICAgZXZlbnQgU2tpblRyYW5zZmVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiBza2luSWQpOwogICAgCiAgICAvLyAvLyBHaXZlIHNvbWUgc2tpbnMgdG8gaW5pdCBhY2NvdW50IGZvciB1bml0IHRlc3RzCiAgICAvLyBmdW5jdGlvbiBTa2luQmFzZSgpIHB1YmxpYyB7CiAgICAvLyAgICAgYWRkcmVzcyBhY2NvdW50MCA9IDB4NjI3MzA2MDkwYWJhQjNBNmUxNDAwZTkzNDViQzYwYzc4YThCRWY1NzsKICAgIC8vICAgICBhZGRyZXNzIGFjY291bnQxID0gMHhmMTdmNTIxNTFFYkVGNkM3MzM0RkFEMDgwYzU3MDRENzcyMTZiNzMyOwoKICAgIC8vICAgICAvLyBDcmVhdGUgc2ltcGxlIHNraW5zCiAgICAvLyAgICAgU2tpbiBtZW1vcnkgc2tpbiA9IFNraW4oe2FwcGVhcmFuY2U6IDAsIGNvb2xkb3duRW5kVGltZTowLCBtaXhpbmdXaXRoSWQ6IDB9KTsKICAgIC8vICAgICBmb3IgKHVpbnQyNTYgaSA9IDE7IGkgPD0gMTU7IGkrKykgewogICAgLy8gICAgICAgICBpZiAoaSA8IDEwKSB7CiAgICAvLyAgICAgICAgICAgICBza2luLmFwcGVhcmFuY2UgPSB1aW50MTI4KGkpOwogICAgLy8gICAgICAgICAgICAgaWYgKGkgPCA3KSB7IAogICAgLy8gICAgICAgICAgICAgICAgIHNraW5JZFRvT3duZXJbaV0gPSBhY2NvdW50MDsKICAgIC8vICAgICAgICAgICAgICAgICBudW1Ta2luT2ZBY2NvdW50c1thY2NvdW50MF0gKz0gMTsKICAgIC8vICAgICAgICAgICAgIH0gZWxzZSB7ICAKICAgIC8vICAgICAgICAgICAgICAgICBza2luSWRUb093bmVyW2ldID0gYWNjb3VudDE7CiAgICAvLyAgICAgICAgICAgICAgICAgbnVtU2tpbk9mQWNjb3VudHNbYWNjb3VudDFdICs9IDE7CiAgICAvLyAgICAgICAgICAgICB9CiAgICAvLyAgICAgICAgIH0gZWxzZSB7ICAKICAgIC8vICAgICAgICAgICAgIHNraW4uYXBwZWFyYW5jZSA9IHVpbnQxMjgoYmxvY2suYmxvY2toYXNoKGJsb2NrLm51bWJlciAtIGkgKyA5KSk7CiAgICAvLyAgICAgICAgICAgICBza2luSWRUb093bmVyW2ldID0gYWNjb3VudDE7CiAgICAvLyAgICAgICAgICAgICBudW1Ta2luT2ZBY2NvdW50c1thY2NvdW50MV0gKz0gMTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICBza2luc1tpXSA9IHNraW47CiAgICAvLyAgICAgICAgIGlzT25TYWxlW2ldID0gZmFsc2U7CiAgICAvLyAgICAgICAgIG5leHRTa2luSWQgKz0gMTsKICAgIC8vICAgICB9CiAgICAvLyB9IAoKICAgIC8vIEdldCB0aGUgaS10aCBza2luIGFuIGFjY291bnQgb3ducywgZm9yIG9mZi1jaGFpbiB1c2FnZSBvbmx5CiAgICBmdW5jdGlvbiBza2luT2ZBY2NvdW50QnlJZChhZGRyZXNzIGFjY291bnQsIHVpbnQyNTYgaWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgdWludDI1NiBjb3VudCA9IDA7CiAgICAgICB1aW50MjU2IG51bVNraW5PZkFjY291bnQgPSBudW1Ta2luT2ZBY2NvdW50c1thY2NvdW50XTsKICAgICAgIHJlcXVpcmUobnVtU2tpbk9mQWNjb3VudCA+IDApOwogICAgICAgcmVxdWlyZShpZCA8IG51bVNraW5PZkFjY291bnQpOwogICAgICAgZm9yICh1aW50MjU2IGkgPSAxOyBpIDwgbmV4dFNraW5JZDsgaSsrKSB7CiAgICAgICAgICAgaWYgKHNraW5JZFRvT3duZXJbaV0gPT0gYWNjb3VudCkgewogICAgICAgICAgICAgICAvLyBUaGlzIHNraW4gYmVsb25ncyB0byBjdXJyZW50IGFjY291bnQKICAgICAgICAgICAgICAgaWYgKGNvdW50ID09IGlkKSB7CiAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBpZC10aCBza2luIG9mIGN1cnJlbnQgYWNjb3VudCwgYS5rLmEsIHdoYXQgd2UgbmVlZAogICAgICAgICAgICAgICAgICAgIHJldHVybiBpOwogICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgLy8gR2V0IHNraW4gYnkgaWQKICAgIGZ1bmN0aW9uIGdldFNraW4odWludDI1NiBpZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDEyOCwgdWludDY0LCB1aW50NjQpIHsKICAgICAgICByZXF1aXJlKGlkID4gMCk7CiAgICAgICAgcmVxdWlyZShpZCA8IG5leHRTa2luSWQpOwogICAgICAgIFNraW4gc3RvcmFnZSBza2luID0gc2tpbnNbaWRdOwogICAgICAgIHJldHVybiAoc2tpbi5hcHBlYXJhbmNlLCBza2luLmNvb2xkb3duRW5kVGltZSwgc2tpbi5taXhpbmdXaXRoSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RVRIKCkgZXh0ZXJuYWwgb25seUNBTyB7CiAgICAgICAgY2ZvLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyUDJQKHVpbnQyNTYgaWQsIGFkZHJlc3MgdGFyZ2V0QWNjb3VudCkgd2hlblRyYW5zZmVyQWxsb3dlZCBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoc2tpbklkVG9Pd25lcltpZF0gPT0gbXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IHRhcmdldEFjY291bnQpOwogICAgICAgIHNraW5JZFRvT3duZXJbaWRdID0gdGFyZ2V0QWNjb3VudDsKICAgICAgICAKICAgICAgICBudW1Ta2luT2ZBY2NvdW50c1ttc2cuc2VuZGVyXSAtPSAxOwogICAgICAgIG51bVNraW5PZkFjY291bnRzW3RhcmdldEFjY291bnRdICs9IDE7CiAgICAgICAgCiAgICAgICAgLy8gZW1pdCBldmVudAogICAgICAgIFNraW5UcmFuc2Zlcihtc2cuc2VuZGVyLCB0YXJnZXRBY2NvdW50LCBpZCk7CiAgICB9Cn0KCgpjb250cmFjdCBNaXhGb3JtdWxhSW50ZXJmYWNlIHsKICAgIGZ1bmN0aW9uIGNhbGNOZXdTa2luQXBwZWFyYW5jZSh1aW50MTI4IHgsIHVpbnQxMjggeSkgcHVibGljIHJldHVybnMgKHVpbnQxMjgpOwoKICAgIC8vIGNyZWF0ZSByYW5kb20gYXBwZWFyYW5jZQogICAgZnVuY3Rpb24gcmFuZG9tU2tpbkFwcGVhcmFuY2UodWludDI1NiBleHRlcm5hbE51bSkgcHVibGljIHJldHVybnMgKHVpbnQxMjgpOwoKICAgIC8vIGJsZWFjaAogICAgZnVuY3Rpb24gYmxlYWNoQXBwZWFyYW5jZSh1aW50MTI4IGFwcGVhcmFuY2UsIHVpbnQxMjggYXR0cmlidXRlcykgcHVibGljIHJldHVybnMgKHVpbnQxMjgpOwoKICAgIC8vIHJlY3ljbGUKICAgIGZ1bmN0aW9uIHJlY3ljbGVBcHBlYXJhbmNlKHVpbnQxMjhbNV0gYXBwZWFyYW5jZXMsIHVpbnQyNTYgcHJlZmVyZW5jZSkgcHVibGljIHJldHVybnMgKHVpbnQxMjgpOwoKICAgIC8vIHN1bW1vbjEwCiAgICBmdW5jdGlvbiBzdW1tb24xMFNraW5BcHBlYXJhbmNlKHVpbnQyNTYgZXh0ZXJuYWxOdW0pIHB1YmxpYyByZXR1cm5zICh1aW50MTI4KTsKfQoKY29udHJhY3QgU2tpbk1peCBpcyBTa2luQmFzZSB7CgogICAgLy8gTWl4IGZvcm11bGEKICAgIE1peEZvcm11bGFJbnRlcmZhY2UgcHVibGljIG1peEZvcm11bGE7CgoKICAgIC8vIFByZS1wYWlkIGV0aGVyIGZvciBzeW50aGVzaXphdGlvbiwgd2lsbCBiZSByZXR1cm5lZCB0byB1c2VyIGlmIHRoZSBzeW50aGVzaXphdGlvbiBmYWlsZWQgKG1pbnVzIGdhcykuCiAgICB1aW50MjU2IHB1YmxpYyBwcmVQYWlkRmVlID0gMTUwMDAwICogNTAwMDAwMDAwMDsgLy8gKDE1dyBnYXMgKiA1IGd3ZWkpCgogICAgLy8gRXZlbnRzCiAgICBldmVudCBNaXhTdGFydChhZGRyZXNzIGFjY291bnQsIHVpbnQyNTYgc2tpbkFJZCwgdWludDI1NiBza2luQklkKTsKICAgIGV2ZW50IEF1dG9NaXgoYWRkcmVzcyBhY2NvdW50LCB1aW50MjU2IHNraW5BSWQsIHVpbnQyNTYgc2tpbkJJZCwgdWludDY0IGNvb2xkb3duRW5kVGltZSk7CiAgICBldmVudCBNaXhTdWNjZXNzKGFkZHJlc3MgYWNjb3VudCwgdWludDI1NiBza2luSWQsIHVpbnQyNTYgc2tpbkFJZCwgdWludDI1NiBza2luQklkKTsKCiAgICAvLyBTZXQgbWl4IGZvcm11bGEgY29udHJhY3QgYWRkcmVzcyAKICAgIGZ1bmN0aW9uIHNldE1peEZvcm11bGFBZGRyZXNzKGFkZHJlc3MgbWl4Rm9ybXVsYUFkZHJlc3MpIGV4dGVybmFsIG9ubHlDT08gewogICAgICAgIG1peEZvcm11bGEgPSBNaXhGb3JtdWxhSW50ZXJmYWNlKG1peEZvcm11bGFBZGRyZXNzKTsKICAgIH0KCiAgICAvLyBzZXRQcmVQYWlkRmVlOiBzZXQgYWR2YW5jZSBhbW91bnQsIG9ubHkgb3duZXIgY2FuIGNhbGwgdGhpcwogICAgZnVuY3Rpb24gc2V0UHJlUGFpZEZlZSh1aW50MjU2IG5ld1ByZVBhaWRGZWUpIGV4dGVybmFsIG9ubHlDT08gewogICAgICAgIHByZVBhaWRGZWUgPSBuZXdQcmVQYWlkRmVlOwogICAgfQoKICAgIC8vIF9pc0Nvb2xkb3duUmVhZHk6IGNoZWNrIHdoZXRoZXIgY29vbGRvd24gcGVyaW9kIGhhcyBiZWVuIHBhc3NlZAogICAgZnVuY3Rpb24gX2lzQ29vbGRvd25SZWFkeSh1aW50MjU2IHNraW5BSWQsIHVpbnQyNTYgc2tpbkJJZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gKHNraW5zW3NraW5BSWRdLmNvb2xkb3duRW5kVGltZSA8PSB1aW50NjQobm93KSkgJiYgKHNraW5zW3NraW5CSWRdLmNvb2xkb3duRW5kVGltZSA8PSB1aW50NjQobm93KSk7CiAgICB9CgogICAgLy8gX2lzTm90TWl4aW5nOiBjaGVjayB3aGV0aGVyIHR3byBza2lucyBhcmUgaW4gYW5vdGhlciBtaXhpbmcgcHJvY2VzcwogICAgZnVuY3Rpb24gX2lzTm90TWl4aW5nKHVpbnQyNTYgc2tpbkFJZCwgdWludDI1NiBza2luQklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAoc2tpbnNbc2tpbkFJZF0ubWl4aW5nV2l0aElkID09IDApICYmIChza2luc1tza2luQklkXS5taXhpbmdXaXRoSWQgPT0gMCk7CiAgICB9CgogICAgLy8gX3NldENvb2xkb3duVGltZTogc2V0IG5ldyBjb29sZG93biB0aW1lCiAgICBmdW5jdGlvbiBfc2V0Q29vbGRvd25FbmRUaW1lKHVpbnQyNTYgc2tpbkFJZCwgdWludDI1NiBza2luQklkKSBwcml2YXRlIHsKICAgICAgICB1aW50MjU2IGVuZCA9IG5vdyArIDUgbWludXRlczsKICAgICAgICAvLyB1aW50MjU2IGVuZCA9IG5vdzsKICAgICAgICBza2luc1tza2luQUlkXS5jb29sZG93bkVuZFRpbWUgPSB1aW50NjQoZW5kKTsKICAgICAgICBza2luc1tza2luQklkXS5jb29sZG93bkVuZFRpbWUgPSB1aW50NjQoZW5kKTsKICAgIH0KCiAgICAvLyBfaXNWYWxpZFNraW46IHdoZXRoZXIgYW4gYWNjb3VudCBjYW4gbWl4IHVzaW5nIHRoZXNlIHNraW5zCiAgICAvLyBNYWtlIHN1cmUgdHdvIHRoaW5nczoKICAgIC8vIDEuIHRoZXNlIHR3byBza2lucyBkbyBleGlzdAogICAgLy8gMi4gdGhpcyBhY2NvdW50IG93bnMgdGhlc2Ugc2tpbnMKICAgIGZ1bmN0aW9uIF9pc1ZhbGlkU2tpbihhZGRyZXNzIGFjY291bnQsIHVpbnQyNTYgc2tpbkFJZCwgdWludDI1NiBza2luQklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIC8vIE1ha2Ugc3VyZSB0aG9zZSB0d28gc2tpbnMgYmVsb25ncyB0byB0aGlzIGFjY291bnQKICAgICAgICBpZiAoc2tpbkFJZCA9PSBza2luQklkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKChza2luQUlkID09IDApIHx8IChza2luQklkID09IDApKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKChza2luQUlkID49IG5leHRTa2luSWQpIHx8IChza2luQklkID49IG5leHRTa2luSWQpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChza2luSWRUb093bmVyW3NraW5BSWRdID09IGFjY291bnQpICYmIChza2luSWRUb093bmVyW3NraW5CSWRdID09IGFjY291bnQpOwogICAgfQoKICAgIC8vIF9pc05vdE9uU2FsZTogd2hldGhlciBhIHNraW4gaXMgbm90IG9uIHNhbGUKICAgIGZ1bmN0aW9uIF9pc05vdE9uU2FsZSh1aW50MjU2IHNraW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gKGlzT25TYWxlW3NraW5JZF0gPT0gZmFsc2UpOwogICAgfQoKICAgIC8vIG1peCAgCiAgICBmdW5jdGlvbiBtaXgodWludDI1NiBza2luQUlkLCB1aW50MjU2IHNraW5CSWQpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHsKCiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciBza2lucyBhcmUgdmFsaWQKICAgICAgICByZXF1aXJlKF9pc1ZhbGlkU2tpbihtc2cuc2VuZGVyLCBza2luQUlkLCBza2luQklkKSk7CgogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgc2tpbnMgYXJlIG5laXRoZXIgb24gc2FsZQogICAgICAgIHJlcXVpcmUoX2lzTm90T25TYWxlKHNraW5BSWQpICYmIF9pc05vdE9uU2FsZShza2luQklkKSk7CgogICAgICAgIC8vIENoZWNrIGNvb2xkb3duCiAgICAgICAgcmVxdWlyZShfaXNDb29sZG93blJlYWR5KHNraW5BSWQsIHNraW5CSWQpKTsKCiAgICAgICAgLy8gQ2hlY2sgdGhlc2Ugc2tpbnMgYXJlIG5vdCBpbiBhbm90aGVyIHByb2Nlc3MKICAgICAgICByZXF1aXJlKF9pc05vdE1peGluZyhza2luQUlkLCBza2luQklkKSk7CgogICAgICAgIC8vIFNldCBuZXcgY29vbGRvd24gdGltZQogICAgICAgIF9zZXRDb29sZG93bkVuZFRpbWUoc2tpbkFJZCwgc2tpbkJJZCk7CgogICAgICAgIC8vIE1hcmsgc2tpbnMgYXMgaW4gbWl4aW5nCiAgICAgICAgc2tpbnNbc2tpbkFJZF0ubWl4aW5nV2l0aElkID0gdWludDY0KHNraW5CSWQpOwogICAgICAgIHNraW5zW3NraW5CSWRdLm1peGluZ1dpdGhJZCA9IHVpbnQ2NChza2luQUlkKTsKCiAgICAgICAgLy8gRW1pdCBNaXhTdGFydCBldmVudAogICAgICAgIE1peFN0YXJ0KG1zZy5zZW5kZXIsIHNraW5BSWQsIHNraW5CSWQpOwogICAgfQoKICAgIC8vIE1peGluZyBhdXRvCiAgICBmdW5jdGlvbiBtaXhBdXRvKHVpbnQyNTYgc2tpbkFJZCwgdWludDI1NiBza2luQklkKSBwdWJsaWMgcGF5YWJsZSB3aGVuTm90UGF1c2VkIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBwcmVQYWlkRmVlKTsKCiAgICAgICAgbWl4KHNraW5BSWQsIHNraW5CSWQpOwoKICAgICAgICBTa2luIHN0b3JhZ2Ugc2tpbiA9IHNraW5zW3NraW5BSWRdOwoKICAgICAgICBBdXRvTWl4KG1zZy5zZW5kZXIsIHNraW5BSWQsIHNraW5CSWQsIHNraW4uY29vbGRvd25FbmRUaW1lKTsKICAgIH0KCiAgICAvLyBHZXQgbWl4aW5nIHJlc3VsdCwgcmV0dXJuIHRoZSByZXN1bHRlZCBza2luIGlkCiAgICBmdW5jdGlvbiBnZXRNaXhpbmdSZXN1bHQodWludDI1NiBza2luQUlkLCB1aW50MjU2IHNraW5CSWQpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHsKICAgICAgICAvLyBDaGVjayB0aGVzZSB0d28gc2tpbnMgYmVsb25ncyB0byB0aGUgc2FtZSBhY2NvdW50CiAgICAgICAgYWRkcmVzcyBhY2NvdW50ID0gc2tpbklkVG9Pd25lcltza2luQUlkXTsKICAgICAgICByZXF1aXJlKGFjY291bnQgPT0gc2tpbklkVG9Pd25lcltza2luQklkXSk7CgogICAgICAgIC8vIENoZWNrIHRoZXNlIHR3byBza2lucyBhcmUgaW4gdGhlIHNhbWUgbWl4aW5nIHByb2Nlc3MKICAgICAgICBTa2luIHN0b3JhZ2Ugc2tpbkEgPSBza2luc1tza2luQUlkXTsKICAgICAgICBTa2luIHN0b3JhZ2Ugc2tpbkIgPSBza2luc1tza2luQklkXTsKICAgICAgICByZXF1aXJlKHNraW5BLm1peGluZ1dpdGhJZCA9PSB1aW50NjQoc2tpbkJJZCkpOwogICAgICAgIHJlcXVpcmUoc2tpbkIubWl4aW5nV2l0aElkID09IHVpbnQ2NChza2luQUlkKSk7CgogICAgICAgIC8vIENoZWNrIGNvb2xkb3duCiAgICAgICAgcmVxdWlyZShfaXNDb29sZG93blJlYWR5KHNraW5BSWQsIHNraW5CSWQpKTsKCiAgICAgICAgLy8gQ3JlYXRlIG5ldyBza2luCiAgICAgICAgdWludDEyOCBuZXdTa2luQXBwZWFyYW5jZSA9IG1peEZvcm11bGEuY2FsY05ld1NraW5BcHBlYXJhbmNlKHNraW5BLmFwcGVhcmFuY2UsIHNraW5CLmFwcGVhcmFuY2UpOwogICAgICAgIFNraW4gbWVtb3J5IG5ld1NraW4gPSBTa2luKHthcHBlYXJhbmNlOiBuZXdTa2luQXBwZWFyYW5jZSwgY29vbGRvd25FbmRUaW1lOiB1aW50NjQobm93KSwgbWl4aW5nV2l0aElkOiAwfSk7CiAgICAgICAgc2tpbnNbbmV4dFNraW5JZF0gPSBuZXdTa2luOwogICAgICAgIHNraW5JZFRvT3duZXJbbmV4dFNraW5JZF0gPSBhY2NvdW50OwogICAgICAgIGlzT25TYWxlW25leHRTa2luSWRdID0gZmFsc2U7CiAgICAgICAgbmV4dFNraW5JZCsrOwoKICAgICAgICAvLyBDbGVhciBvbGQgc2tpbnMKICAgICAgICBza2luQS5taXhpbmdXaXRoSWQgPSAwOwogICAgICAgIHNraW5CLm1peGluZ1dpdGhJZCA9IDA7CgogICAgICAgIC8vIEluIG9yZGVyIHRvIGRpc3Rpbmd1aXNoIGNyZWF0ZWQgc2tpbnMgaW4gbWludGluZyB3aXRoIGRlc3Ryb3llZCBza2lucwogICAgICAgIC8vIHNraW5JZFRvT3duZXJbc2tpbkFJZF0gPSBvd25lcjsKICAgICAgICAvLyBza2luSWRUb093bmVyW3NraW5CSWRdID0gb3duZXI7CiAgICAgICAgZGVsZXRlIHNraW5JZFRvT3duZXJbc2tpbkFJZF07CiAgICAgICAgZGVsZXRlIHNraW5JZFRvT3duZXJbc2tpbkJJZF07CiAgICAgICAgLy8gcmVxdWlyZShudW1Ta2luT2ZBY2NvdW50c1thY2NvdW50XSA+PSAyKTsKICAgICAgICBudW1Ta2luT2ZBY2NvdW50c1thY2NvdW50XSAtPSAxOwoKICAgICAgICBNaXhTdWNjZXNzKGFjY291bnQsIG5leHRTa2luSWQgLSAxLCBza2luQUlkLCBza2luQklkKTsKICAgIH0KfQoKY29udHJhY3QgU2tpbk1hcmtldCBpcyBTa2luTWl4IHsKCiAgICAvLyBDdXQgcmF0aW8gZm9yIGEgdHJhbnNhY3Rpb24KICAgIC8vIFZhbHVlcyAwLTEwLDAwMCBtYXAgdG8gMCUtMTAwJQogICAgdWludDEyOCBwdWJsaWMgdHJDdXQgPSA0MDA7CgogICAgLy8gU2FsZSBvcmRlcnMgbGlzdCAKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHVibGljIGRlc2lyZWRQcmljZTsKCiAgICAvLyBldmVudHMKICAgIGV2ZW50IFB1dE9uU2FsZShhZGRyZXNzIGFjY291bnQsIHVpbnQyNTYgc2tpbklkKTsKICAgIGV2ZW50IFdpdGhkcmF3U2FsZShhZGRyZXNzIGFjY291bnQsIHVpbnQyNTYgc2tpbklkKTsKICAgIGV2ZW50IEJ1eUluTWFya2V0KGFkZHJlc3MgYnV5ZXIsIHVpbnQyNTYgc2tpbklkKTsKCiAgICAvLyBmdW5jdGlvbnMKCiAgICBmdW5jdGlvbiBzZXRUckN1dCh1aW50MjU2IG5ld0N1dCkgZXh0ZXJuYWwgb25seUNPTyB7CiAgICAgICAgdHJDdXQgPSB1aW50MTI4KG5ld0N1dCk7CiAgICB9CgogICAgLy8gUHV0IGFzc2V0IG9uIHNhbGUKICAgIGZ1bmN0aW9uIHB1dE9uU2FsZSh1aW50MjU2IHNraW5JZCwgdWludDI1NiBwcmljZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIC8vIE9ubHkgb3duZXIgb2Ygc2tpbiBwYXNzCiAgICAgICAgcmVxdWlyZShza2luSWRUb093bmVyW3NraW5JZF0gPT0gbXNnLnNlbmRlcik7CgogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgc2tpbiBpcyBtaXhpbmcgCiAgICAgICAgcmVxdWlyZShza2luc1tza2luSWRdLm1peGluZ1dpdGhJZCA9PSAwKTsKCiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciBza2luIGlzIGFscmVhZHkgb24gc2FsZQogICAgICAgIHJlcXVpcmUoaXNPblNhbGVbc2tpbklkXSA9PSBmYWxzZSk7CgogICAgICAgIHJlcXVpcmUocHJpY2UgPiAwKTsgCgogICAgICAgIC8vIFB1dCBvbiBzYWxlCiAgICAgICAgZGVzaXJlZFByaWNlW3NraW5JZF0gPSBwcmljZTsKICAgICAgICBpc09uU2FsZVtza2luSWRdID0gdHJ1ZTsKCiAgICAgICAgLy8gRW1pdCB0aGUgQXBwcm92YWwgZXZlbnQKICAgICAgICBQdXRPblNhbGUobXNnLnNlbmRlciwgc2tpbklkKTsKICAgIH0KICAKICAgIC8vIFdpdGhkcmF3IGFuIHNhbGUgb3JkZXIKICAgIGZ1bmN0aW9uIHdpdGhkcmF3U2FsZSh1aW50MjU2IHNraW5JZCkgZXh0ZXJuYWwgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciB0aGlzIHNraW4gaXMgb24gc2FsZQogICAgICAgIHJlcXVpcmUoaXNPblNhbGVbc2tpbklkXSA9PSB0cnVlKTsKICAgICAgICAKICAgICAgICAvLyBDYW4gb25seSB3aXRoZHJhdyBzZWxmJ3Mgc2FsZQogICAgICAgIHJlcXVpcmUoc2tpbklkVG9Pd25lcltza2luSWRdID09IG1zZy5zZW5kZXIpOwoKICAgICAgICAvLyBXaXRoZHJhdwogICAgICAgIGlzT25TYWxlW3NraW5JZF0gPSBmYWxzZTsKICAgICAgICBkZXNpcmVkUHJpY2Vbc2tpbklkXSA9IDA7CgogICAgICAgIC8vIEVtaXQgdGhlIGNhbmNlbCBldmVudAogICAgICAgIFdpdGhkcmF3U2FsZShtc2cuc2VuZGVyLCBza2luSWQpOwogICAgfQogCiAgICAvLyBCdXkgc2tpbiBpbiBtYXJrZXQKICAgIGZ1bmN0aW9uIGJ1eUluTWFya2V0KHVpbnQyNTYgc2tpbklkKSBleHRlcm5hbCBwYXlhYmxlIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBza2luIGlzIG9uIHNhbGUKICAgICAgICByZXF1aXJlKGlzT25TYWxlW3NraW5JZF0gPT0gdHJ1ZSk7CgogICAgICAgIGFkZHJlc3Mgc2VsbGVyID0gc2tpbklkVG9Pd25lcltza2luSWRdOwoKICAgICAgICAvLyBDaGVjayB0aGUgc2VuZGVyIGlzbid0IHRoZSBzZWxsZXIKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gc2VsbGVyKTsKCiAgICAgICAgdWludDI1NiBfcHJpY2UgPSBkZXNpcmVkUHJpY2Vbc2tpbklkXTsKICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHBheSB2YWx1ZSBpcyBlbm91Z2gKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBfcHJpY2UpOwoKICAgICAgICAvLyBDdXQgYW5kIHRoZW4gc2VuZCB0aGUgcHJvY2VlZHMgdG8gc2VsbGVyCiAgICAgICAgdWludDI1NiBzZWxsZXJQcm9jZWVkcyA9IF9wcmljZSAtIF9jb21wdXRlQ3V0KF9wcmljZSk7CgogICAgICAgIHNlbGxlci50cmFuc2ZlcihzZWxsZXJQcm9jZWVkcyk7CgogICAgICAgIC8vIFRyYW5zZmVyIHNraW4gZnJvbSBzZWxsZXIgdG8gYnV5ZXIKICAgICAgICBudW1Ta2luT2ZBY2NvdW50c1tzZWxsZXJdIC09IDE7CiAgICAgICAgc2tpbklkVG9Pd25lcltza2luSWRdID0gbXNnLnNlbmRlcjsKICAgICAgICBudW1Ta2luT2ZBY2NvdW50c1ttc2cuc2VuZGVyXSArPSAxOwogICAgICAgIGlzT25TYWxlW3NraW5JZF0gPSBmYWxzZTsKICAgICAgICBkZXNpcmVkUHJpY2Vbc2tpbklkXSA9IDA7CgogICAgICAgIC8vIEVtaXQgdGhlIGJ1eSBldmVudAogICAgICAgIEJ1eUluTWFya2V0KG1zZy5zZW5kZXIsIHNraW5JZCk7CiAgICB9CgogICAgLy8gQ29tcHV0ZSB0aGUgbWFya2V0Q3V0CiAgICBmdW5jdGlvbiBfY29tcHV0ZUN1dCh1aW50MjU2IF9wcmljZSkgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIF9wcmljZSAqIHRyQ3V0IC8gMTAwMDA7CiAgICB9Cn0KCmNvbnRyYWN0IFNraW5NaW50aW5nIGlzIFNraW5NYXJrZXQgewoKICAgIC8vIExpbWl0cyB0aGUgbnVtYmVyIG9mIHNraW5zIHRoZSBjb250cmFjdCBvd25lciBjYW4gZXZlciBjcmVhdGUuCiAgICB1aW50MjU2IHB1YmxpYyBza2luQ3JlYXRlZExpbWl0ID0gNTAwMDA7CiAgICB1aW50MjU2IHB1YmxpYyBza2luQ3JlYXRlZE51bTsKCiAgICAvLyBUaGUgc3VtbW9uIGFuZCBibGVhY2ggbnVtYmVycyBvZiBlYWNoIGFjY291bnRzOiB3aWxsIGJlIGNsZWFyZWQgZXZlcnkgZGF5CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBhY2NvdW50VG9TdW1tb25OdW07CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBhY2NvdW50VG9CbGVhY2hOdW07CgogICAgLy8gUGF5IGxldmVsIG9mIGVhY2ggYWNjb3VudHMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGFjY291bnRUb1BheUxldmVsOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYWNjb3VudExhc3RDbGVhclRpbWU7CgogICAgLy8gRnJlZSBibGVhY2ggbnVtYmVyIGRvbmF0ZWQKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGZyZWVCbGVhY2hOdW07CiAgICBib29sIGlzQmxlYWNoQWxsb3dlZCA9IHRydWU7CgogICAgdWludDI1NiBwdWJsaWMgbGV2ZWxDbGVhclRpbWUgPSBub3c7CgogICAgLy8gcHJpY2UgYW5kIGxpbWl0CiAgICB1aW50MjU2IHB1YmxpYyBibGVhY2hEYWlseUxpbWl0ID0gMzsKICAgIHVpbnQyNTYgcHVibGljIGJhc2VTdW1tb25QcmljZSA9IDEgZmlubmV5OwogICAgdWludDI1NiBwdWJsaWMgYmxlYWNoUHJpY2UgPSAzMDAgZmlubmV5OyAgLy8gZG8gbm90IGNhbGwgdGhpcwoKICAgIC8vIFBheSBsZXZlbAogICAgdWludDI1Nls1XSBwdWJsaWMgbGV2ZWxTcGxpdHMgPSBbMTAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMjAwXTsKICAgIAogICAgdWludDI1Nls2XSBwdWJsaWMgcGF5TXVsdGlwbGUgPSBbMTAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDE1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAzMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQwXTsKCgogICAgLy8gZXZlbnRzCiAgICBldmVudCBDcmVhdGVOZXdTa2luKHVpbnQyNTYgc2tpbklkLCBhZGRyZXNzIGFjY291bnQpOwogICAgZXZlbnQgQmxlYWNoKHVpbnQyNTYgc2tpbklkLCB1aW50MTI4IG5ld0FwcGVhcmFuY2UpOwoKICAgIC8vIGZ1bmN0aW9ucwoKICAgIC8vIFNldCBwcmljZSAKICAgIGZ1bmN0aW9uIHNldEJhc2VTdW1tb25QcmljZSh1aW50MjU2IG5ld1ByaWNlKSBleHRlcm5hbCBvbmx5Q09PIHsKICAgICAgICBiYXNlU3VtbW9uUHJpY2UgPSBuZXdQcmljZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRCbGVhY2hQcmljZSh1aW50MjU2IG5ld1ByaWNlKSBleHRlcm5hbCBvbmx5Q09PIHsKICAgICAgICBibGVhY2hQcmljZSA9IG5ld1ByaWNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJsZWFjaERhaWx5TGltaXQodWludDI1NiBsaW1pdCkgZXh0ZXJuYWwgb25seUNPTyB7CiAgICAgICAgYmxlYWNoRGFpbHlMaW1pdCA9IGxpbWl0OwogICAgfQoKICAgIGZ1bmN0aW9uIHN3aXRjaEJsZWFjaEFsbG93ZWQoYm9vbCBuZXdCbGVhY2hBbGxvd2VkKSBleHRlcm5hbCBvbmx5Q09PIHsKICAgICAgICBpc0JsZWFjaEFsbG93ZWQgPSBuZXdCbGVhY2hBbGxvd2VkOwogICAgfQoKICAgIC8vIENyZWF0ZSBiYXNlIHNraW4gZm9yIHNlbGwuIE9ubHkgb3duZXIgY2FuIGNyZWF0ZQogICAgZnVuY3Rpb24gY3JlYXRlU2tpbih1aW50MTI4IHNwZWNpZmllZEFwcGVhcmFuY2UsIHVpbnQyNTYgc2FsZVByaWNlKSBleHRlcm5hbCBvbmx5Q09PIHsKICAgICAgICByZXF1aXJlKHNraW5DcmVhdGVkTnVtIDwgc2tpbkNyZWF0ZWRMaW1pdCk7CgogICAgICAgIC8vIENyZWF0ZSBzcGVjaWZpZWQgc2tpbgogICAgICAgIC8vIHVpbnQxMjggcmFuZG9tQXBwZWFyYW5jZSA9IG1peEZvcm11bGEucmFuZG9tU2tpbkFwcGVhcmFuY2UoKTsKICAgICAgICBTa2luIG1lbW9yeSBuZXdTa2luID0gU2tpbih7YXBwZWFyYW5jZTogc3BlY2lmaWVkQXBwZWFyYW5jZSwgY29vbGRvd25FbmRUaW1lOiB1aW50NjQobm93KSwgbWl4aW5nV2l0aElkOiAwfSk7CiAgICAgICAgc2tpbnNbbmV4dFNraW5JZF0gPSBuZXdTa2luOwogICAgICAgIHNraW5JZFRvT3duZXJbbmV4dFNraW5JZF0gPSBjb287CiAgICAgICAgaXNPblNhbGVbbmV4dFNraW5JZF0gPSBmYWxzZTsKCiAgICAgICAgLy8gRW1pdCB0aGUgY3JlYXRlIGV2ZW50CiAgICAgICAgQ3JlYXRlTmV3U2tpbihuZXh0U2tpbklkLCBjb28pOwoKICAgICAgICAvLyBQdXQgdGhpcyBza2luIG9uIHNhbGUKICAgICAgICBwdXRPblNhbGUobmV4dFNraW5JZCwgc2FsZVByaWNlKTsKCiAgICAgICAgbmV4dFNraW5JZCsrOwogICAgICAgIG51bVNraW5PZkFjY291bnRzW2Nvb10gKz0gMTsgICAKICAgICAgICBza2luQ3JlYXRlZE51bSArPSAxOwogICAgfQoKICAgIC8vIERvbmF0ZSBhIHNraW4gdG8gcGxheWVyLiBPbmx5IENPTyBjYW4gb3BlcmF0ZQogICAgZnVuY3Rpb24gZG9uYXRlU2tpbih1aW50MTI4IHNwZWNpZmllZEFwcGVhcmFuY2UsIGFkZHJlc3MgZG9uZWUpIGV4dGVybmFsIHdoZW5Ob3RQYXVzZWQgb25seUNPTyB7CiAgICAgICAgU2tpbiBtZW1vcnkgbmV3U2tpbiA9IFNraW4oe2FwcGVhcmFuY2U6IHNwZWNpZmllZEFwcGVhcmFuY2UsIGNvb2xkb3duRW5kVGltZTogdWludDY0KG5vdyksIG1peGluZ1dpdGhJZDogMH0pOwogICAgICAgIHNraW5zW25leHRTa2luSWRdID0gbmV3U2tpbjsKICAgICAgICBza2luSWRUb093bmVyW25leHRTa2luSWRdID0gZG9uZWU7CiAgICAgICAgaXNPblNhbGVbbmV4dFNraW5JZF0gPSBmYWxzZTsKCiAgICAgICAgLy8gRW1pdCB0aGUgY3JlYXRlIGV2ZW50CiAgICAgICAgQ3JlYXRlTmV3U2tpbihuZXh0U2tpbklkLCBkb25lZSk7CgogICAgICAgIG5leHRTa2luSWQrKzsKICAgICAgICBudW1Ta2luT2ZBY2NvdW50c1tkb25lZV0gKz0gMTsgICAKICAgICAgICBza2luQ3JlYXRlZE51bSArPSAxOwogICAgfQoKICAgIC8vIAogICAgZnVuY3Rpb24gbW92ZURhdGEodWludDEyOFtdIGxlZ2FjeUFwcGVhcmFuY2UsIGFkZHJlc3NbXSBsZWdhY3lPd25lciwgYm9vbFtdIGxlZ2FjeUlzT25TYWxlLCB1aW50MjU2W10gbGVnYWN5RGVzaXJlZFByaWNlKSBleHRlcm5hbCBvbmx5Q09PIHsKICAgICAgICBTa2luIG1lbW9yeSBuZXdTa2luID0gU2tpbih7YXBwZWFyYW5jZTogMCwgY29vbGRvd25FbmRUaW1lOiAwLCBtaXhpbmdXaXRoSWQ6IDB9KTsKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBsZWdhY3lPd25lci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBuZXdTa2luLmFwcGVhcmFuY2UgPSBsZWdhY3lBcHBlYXJhbmNlW2ldOwogICAgICAgICAgICBuZXdTa2luLmNvb2xkb3duRW5kVGltZSA9IHVpbnQ2NChub3cpOwogICAgICAgICAgICBuZXdTa2luLm1peGluZ1dpdGhJZCA9IDA7CiAgICAgICAgICAgIAogICAgICAgICAgICBza2luc1tuZXh0U2tpbklkXSA9IG5ld1NraW47CiAgICAgICAgICAgIHNraW5JZFRvT3duZXJbbmV4dFNraW5JZF0gPSBsZWdhY3lPd25lcltpXTsKICAgICAgICAgICAgaXNPblNhbGVbbmV4dFNraW5JZF0gPSBsZWdhY3lJc09uU2FsZVtpXTsKICAgICAgICAgICAgZGVzaXJlZFByaWNlW25leHRTa2luSWRdID0gbGVnYWN5RGVzaXJlZFByaWNlW2ldOwogICAgCiAgICAgICAgICAgIC8vIEVtaXQgdGhlIGNyZWF0ZSBldmVudAogICAgICAgICAgICBDcmVhdGVOZXdTa2luKG5leHRTa2luSWQsIGxlZ2FjeU93bmVyW2ldKTsKICAgIAogICAgICAgICAgICBuZXh0U2tpbklkKys7CiAgICAgICAgICAgIG51bVNraW5PZkFjY291bnRzW2xlZ2FjeU93bmVyW2ldXSArPSAxOwogICAgICAgICAgICBpZiAobnVtU2tpbk9mQWNjb3VudHNbbGVnYWN5T3duZXJbaV1dID4gZnJlZUJsZWFjaE51bVtsZWdhY3lPd25lcltpXV0qMTAgfHwgZnJlZUJsZWFjaE51bVtsZWdhY3lPd25lcltpXV0gPT0gMCkgewogICAgICAgICAgICAgICAgZnJlZUJsZWFjaE51bVtsZWdhY3lPd25lcltpXV0gKz0gMTsKICAgICAgICAgICAgfSAgIAogICAgICAgICAgICBza2luQ3JlYXRlZE51bSArPSAxOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBTdW1tb24KICAgIGZ1bmN0aW9uIHN1bW1vbigpIGV4dGVybmFsIHBheWFibGUgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgLy8gQ2xlYXIgZGFpbHkgc3VtbW9uIG51bWJlcnMKICAgICAgICBpZiAoYWNjb3VudExhc3RDbGVhclRpbWVbbXNnLnNlbmRlcl0gPT0gdWludDI1NigwKSkgewogICAgICAgICAgICAvLyBUaGlzIGFjY291bnQncyBmaXJzdCB0aW1lIHRvIHN1bW1vbiwgd2UgZG8gbm90IG5lZWQgdG8gY2xlYXIgc3VtbW9uIG51bWJlcnMKICAgICAgICAgICAgYWNjb3VudExhc3RDbGVhclRpbWVbbXNnLnNlbmRlcl0gPSBub3c7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKGFjY291bnRMYXN0Q2xlYXJUaW1lW21zZy5zZW5kZXJdIDwgbGV2ZWxDbGVhclRpbWUgJiYgbm93ID4gbGV2ZWxDbGVhclRpbWUpIHsKICAgICAgICAgICAgICAgIGFjY291bnRUb1N1bW1vbk51bVttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgICAgICAgICBhY2NvdW50VG9QYXlMZXZlbFttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgICAgICAgICBhY2NvdW50TGFzdENsZWFyVGltZVttc2cuc2VuZGVyXSA9IG5vdzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdWludDI1NiBwYXlMZXZlbCA9IGFjY291bnRUb1BheUxldmVsW21zZy5zZW5kZXJdOwogICAgICAgIHVpbnQyNTYgcHJpY2UgPSBwYXlNdWx0aXBsZVtwYXlMZXZlbF0gKiBiYXNlU3VtbW9uUHJpY2U7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gcHJpY2UpOwoKICAgICAgICAvLyBDcmVhdGUgcmFuZG9tIHNraW4KICAgICAgICB1aW50MTI4IHJhbmRvbUFwcGVhcmFuY2UgPSBtaXhGb3JtdWxhLnJhbmRvbVNraW5BcHBlYXJhbmNlKG5leHRTa2luSWQpOwogICAgICAgIC8vIHVpbnQxMjggcmFuZG9tQXBwZWFyYW5jZSA9IDA7CiAgICAgICAgU2tpbiBtZW1vcnkgbmV3U2tpbiA9IFNraW4oe2FwcGVhcmFuY2U6IHJhbmRvbUFwcGVhcmFuY2UsIGNvb2xkb3duRW5kVGltZTogdWludDY0KG5vdyksIG1peGluZ1dpdGhJZDogMH0pOwogICAgICAgIHNraW5zW25leHRTa2luSWRdID0gbmV3U2tpbjsKICAgICAgICBza2luSWRUb093bmVyW25leHRTa2luSWRdID0gbXNnLnNlbmRlcjsKICAgICAgICBpc09uU2FsZVtuZXh0U2tpbklkXSA9IGZhbHNlOwoKICAgICAgICAvLyBFbWl0IHRoZSBjcmVhdGUgZXZlbnQKICAgICAgICBDcmVhdGVOZXdTa2luKG5leHRTa2luSWQsIG1zZy5zZW5kZXIpOwoKICAgICAgICBuZXh0U2tpbklkKys7CiAgICAgICAgbnVtU2tpbk9mQWNjb3VudHNbbXNnLnNlbmRlcl0gKz0gMTsKICAgICAgICAKICAgICAgICBhY2NvdW50VG9TdW1tb25OdW1bbXNnLnNlbmRlcl0gKz0gMTsKICAgICAgICAKICAgICAgICAvLyBIYW5kbGUgdGhlIHBheWxldmVsICAgICAgICAKICAgICAgICBpZiAocGF5TGV2ZWwgPCA1KSB7CiAgICAgICAgICAgIGlmIChhY2NvdW50VG9TdW1tb25OdW1bbXNnLnNlbmRlcl0gPj0gbGV2ZWxTcGxpdHNbcGF5TGV2ZWxdKSB7CiAgICAgICAgICAgICAgICBhY2NvdW50VG9QYXlMZXZlbFttc2cuc2VuZGVyXSA9IHBheUxldmVsICsgMTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvLyBTdW1tb24xMAogICAgZnVuY3Rpb24gc3VtbW9uMTAoKSBleHRlcm5hbCBwYXlhYmxlIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIC8vIENsZWFyIGRhaWx5IHN1bW1vbiBudW1iZXJzCiAgICAgICAgaWYgKGFjY291bnRMYXN0Q2xlYXJUaW1lW21zZy5zZW5kZXJdID09IHVpbnQyNTYoMCkpIHsKICAgICAgICAgICAgLy8gVGhpcyBhY2NvdW50J3MgZmlyc3QgdGltZSB0byBzdW1tb24sIHdlIGRvIG5vdCBuZWVkIHRvIGNsZWFyIHN1bW1vbiBudW1iZXJzCiAgICAgICAgICAgIGFjY291bnRMYXN0Q2xlYXJUaW1lW21zZy5zZW5kZXJdID0gbm93OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChhY2NvdW50TGFzdENsZWFyVGltZVttc2cuc2VuZGVyXSA8IGxldmVsQ2xlYXJUaW1lICYmIG5vdyA+IGxldmVsQ2xlYXJUaW1lKSB7CiAgICAgICAgICAgICAgICBhY2NvdW50VG9TdW1tb25OdW1bbXNnLnNlbmRlcl0gPSAwOwogICAgICAgICAgICAgICAgYWNjb3VudFRvUGF5TGV2ZWxbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgICAgICAgICAgYWNjb3VudExhc3RDbGVhclRpbWVbbXNnLnNlbmRlcl0gPSBub3c7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHVpbnQyNTYgcGF5TGV2ZWwgPSBhY2NvdW50VG9QYXlMZXZlbFttc2cuc2VuZGVyXTsKICAgICAgICB1aW50MjU2IHByaWNlID0gcGF5TXVsdGlwbGVbcGF5TGV2ZWxdICogYmFzZVN1bW1vblByaWNlOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByaWNlKjEwKTsKCiAgICAgICAgU2tpbiBtZW1vcnkgbmV3U2tpbjsKICAgICAgICB1aW50MTI4IHJhbmRvbUFwcGVhcmFuY2U7CiAgICAgICAgLy8gQ3JlYXRlIHJhbmRvbSBza2luCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgMTA7IGkrKykgewogICAgICAgICAgICByYW5kb21BcHBlYXJhbmNlID0gbWl4Rm9ybXVsYS5yYW5kb21Ta2luQXBwZWFyYW5jZShuZXh0U2tpbklkKTsKICAgICAgICAgICAgbmV3U2tpbiA9IFNraW4oe2FwcGVhcmFuY2U6IHJhbmRvbUFwcGVhcmFuY2UsIGNvb2xkb3duRW5kVGltZTogdWludDY0KG5vdyksIG1peGluZ1dpdGhJZDogMH0pOwogICAgICAgICAgICBza2luc1tuZXh0U2tpbklkXSA9IG5ld1NraW47CiAgICAgICAgICAgIHNraW5JZFRvT3duZXJbbmV4dFNraW5JZF0gPSBtc2cuc2VuZGVyOwogICAgICAgICAgICBpc09uU2FsZVtuZXh0U2tpbklkXSA9IGZhbHNlOwogICAgICAgICAgICAvLyBFbWl0IHRoZSBjcmVhdGUgZXZlbnQKICAgICAgICAgICAgQ3JlYXRlTmV3U2tpbihuZXh0U2tpbklkLCBtc2cuc2VuZGVyKTsKICAgICAgICAgICAgbmV4dFNraW5JZCsrOwogICAgICAgIH0gIAoKICAgICAgICAvLyBHaXZlIGFkZGl0aW9uYWwgc2tpbgogICAgICAgIHJhbmRvbUFwcGVhcmFuY2UgPSBtaXhGb3JtdWxhLnN1bW1vbjEwU2tpbkFwcGVhcmFuY2UobmV4dFNraW5JZCk7CiAgICAgICAgbmV3U2tpbiA9IFNraW4oe2FwcGVhcmFuY2U6IHJhbmRvbUFwcGVhcmFuY2UsIGNvb2xkb3duRW5kVGltZTogdWludDY0KG5vdyksIG1peGluZ1dpdGhJZDogMH0pOwogICAgICAgIHNraW5zW25leHRTa2luSWRdID0gbmV3U2tpbjsKICAgICAgICBza2luSWRUb093bmVyW25leHRTa2luSWRdID0gbXNnLnNlbmRlcjsKICAgICAgICBpc09uU2FsZVtuZXh0U2tpbklkXSA9IGZhbHNlOwogICAgICAgIC8vIEVtaXQgdGhlIGNyZWF0ZSBldmVudAogICAgICAgIENyZWF0ZU5ld1NraW4obmV4dFNraW5JZCwgbXNnLnNlbmRlcik7CiAgICAgICAgbmV4dFNraW5JZCsrOwoKICAgICAgICBudW1Ta2luT2ZBY2NvdW50c1ttc2cuc2VuZGVyXSArPSAxMTsKICAgICAgICBhY2NvdW50VG9TdW1tb25OdW1bbXNnLnNlbmRlcl0gKz0gMTA7CiAgICAgICAgCiAgICAgICAgLy8gSGFuZGxlIHRoZSBwYXlsZXZlbCAgICAgICAgCiAgICAgICAgaWYgKHBheUxldmVsIDwgNSkgewogICAgICAgICAgICBpZiAoYWNjb3VudFRvU3VtbW9uTnVtW21zZy5zZW5kZXJdID49IGxldmVsU3BsaXRzW3BheUxldmVsXSkgewogICAgICAgICAgICAgICAgYWNjb3VudFRvUGF5TGV2ZWxbbXNnLnNlbmRlcl0gPSBwYXlMZXZlbCArIDE7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLy8gUmVjeWNsZSBiaW4KICAgIGZ1bmN0aW9uIHJlY3ljbGVTa2luKHVpbnQyNTZbNV0gd2FzdGVTa2lucywgdWludDI1NiBwcmVmZXJJbmRleCkgZXh0ZXJuYWwgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICAgIHJlcXVpcmUoc2tpbklkVG9Pd25lclt3YXN0ZVNraW5zW2ldXSA9PSBtc2cuc2VuZGVyKTsKICAgICAgICAgICAgc2tpbklkVG9Pd25lclt3YXN0ZVNraW5zW2ldXSA9IGFkZHJlc3MoMCk7CiAgICAgICAgfQoKICAgICAgICB1aW50MTI4WzVdIG1lbW9yeSBhcHBzOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgYXBwc1tpXSA9IHNraW5zW3dhc3RlU2tpbnNbaV1dLmFwcGVhcmFuY2U7CiAgICAgICAgfQogICAgICAgIC8vIENyZWF0ZSByYW5kb20gc2tpbgogICAgICAgIHVpbnQxMjggcmVjeWNsZUFwcCA9IG1peEZvcm11bGEucmVjeWNsZUFwcGVhcmFuY2UoYXBwcywgcHJlZmVySW5kZXgpOwogICAgICAgIFNraW4gbWVtb3J5IG5ld1NraW4gPSBTa2luKHthcHBlYXJhbmNlOiByZWN5Y2xlQXBwLCBjb29sZG93bkVuZFRpbWU6IHVpbnQ2NChub3cpLCBtaXhpbmdXaXRoSWQ6IDB9KTsKICAgICAgICBza2luc1tuZXh0U2tpbklkXSA9IG5ld1NraW47CiAgICAgICAgc2tpbklkVG9Pd25lcltuZXh0U2tpbklkXSA9IG1zZy5zZW5kZXI7CiAgICAgICAgaXNPblNhbGVbbmV4dFNraW5JZF0gPSBmYWxzZTsKCiAgICAgICAgLy8gRW1pdCB0aGUgY3JlYXRlIGV2ZW50CiAgICAgICAgQ3JlYXRlTmV3U2tpbihuZXh0U2tpbklkLCBtc2cuc2VuZGVyKTsKCiAgICAgICAgbmV4dFNraW5JZCsrOwogICAgICAgIG51bVNraW5PZkFjY291bnRzW21zZy5zZW5kZXJdIC09IDQ7CiAgICB9CgogICAgLy8gQmxlYWNoIHNvbWUgYXR0cmlidXRlcwogICAgZnVuY3Rpb24gYmxlYWNoKHVpbnQxMjggc2tpbklkLCB1aW50MTI4IGF0dHJpYnV0ZXMpIGV4dGVybmFsIHBheWFibGUgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgcmVxdWlyZShpc0JsZWFjaEFsbG93ZWQpOwoKICAgICAgICAvLyBDbGVhciBkYWlseSBzdW1tb24gbnVtYmVycwogICAgICAgIGlmIChhY2NvdW50TGFzdENsZWFyVGltZVttc2cuc2VuZGVyXSA9PSB1aW50MjU2KDApKSB7CiAgICAgICAgICAgIC8vIFRoaXMgYWNjb3VudCdzIGZpcnN0IHRpbWUgdG8gc3VtbW9uLCB3ZSBkbyBub3QgbmVlZCB0byBjbGVhciBibGVhY2ggbnVtYmVycwogICAgICAgICAgICBhY2NvdW50TGFzdENsZWFyVGltZVttc2cuc2VuZGVyXSA9IG5vdzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoYWNjb3VudExhc3RDbGVhclRpbWVbbXNnLnNlbmRlcl0gPCBsZXZlbENsZWFyVGltZSAmJiBub3cgPiBsZXZlbENsZWFyVGltZSkgewogICAgICAgICAgICAgICAgYWNjb3VudFRvQmxlYWNoTnVtW21zZy5zZW5kZXJdID0gMDsKICAgICAgICAgICAgICAgIGFjY291bnRMYXN0Q2xlYXJUaW1lW21zZy5zZW5kZXJdID0gbm93OwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXF1aXJlKGFjY291bnRUb0JsZWFjaE51bVttc2cuc2VuZGVyXSA8IGJsZWFjaERhaWx5TGltaXQpOwogICAgICAgIGFjY291bnRUb0JsZWFjaE51bVttc2cuc2VuZGVyXSArPSAxOwoKICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG1zZy5zZW5kZXIgaXMgb3duZXIgb2YgdGhlIHNraW4gCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHNraW5JZFRvT3duZXJbc2tpbklkXSk7CgogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBza2luIGlzIG9uIHNhbGUgCiAgICAgICAgcmVxdWlyZShpc09uU2FsZVtza2luSWRdID09IGZhbHNlKTsKCiAgICAgICAgdWludDI1NiBibGVhY2hOdW0gPSAwOwogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IDg7IGkrKykgewogICAgICAgICAgICBpZiAoKGF0dHJpYnV0ZXMgJiAodWludDEyOCgxKSA8PCBpKSkgPiAwKSB7CiAgICAgICAgICAgICAgICBpZiAoZnJlZUJsZWFjaE51bVttc2cuc2VuZGVyXSA+IDApIHsKICAgICAgICAgICAgICAgICAgICBmcmVlQmxlYWNoTnVtW21zZy5zZW5kZXJdLS07CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGJsZWFjaE51bSsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhlcmUgaXMgZW5vdWdoIG1vbmV5CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gYmxlYWNoTnVtICogYmxlYWNoUHJpY2UpOwoKICAgICAgICBTa2luIHN0b3JhZ2Ugb3JpZ2luU2tpbiA9IHNraW5zW3NraW5JZF07CiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciB0aGlzIHNraW4gaXMgaW4gbWl4aW5nIAogICAgICAgIHJlcXVpcmUob3JpZ2luU2tpbi5taXhpbmdXaXRoSWQgPT0gMCk7CiAgICAgICAgCiAgICAgICAgdWludDEyOCBuZXdBcHBlYXJhbmNlID0gbWl4Rm9ybXVsYS5ibGVhY2hBcHBlYXJhbmNlKG9yaWdpblNraW4uYXBwZWFyYW5jZSwgYXR0cmlidXRlcyk7CiAgICAgICAgb3JpZ2luU2tpbi5hcHBlYXJhbmNlID0gbmV3QXBwZWFyYW5jZTsKCiAgICAgICAgLy8gRW1pdCBibGVhY2ggZXZlbnQKICAgICAgICBCbGVhY2goc2tpbklkLCBuZXdBcHBlYXJhbmNlKTsKICAgIH0KCiAgICAvLyBPdXIgZGFlbW9uIHdpbGwgY2xlYXIgZGFpbHkgc3VtbW9uIG51bWJlcnMKICAgIGZ1bmN0aW9uIGNsZWFyU3VtbW9uTnVtKCkgZXh0ZXJuYWwgb25seUNPTyB7CiAgICAgICAgdWludDI1NiBuZXh0RGF5ID0gbGV2ZWxDbGVhclRpbWUgKyAxIGRheXM7CiAgICAgICAgaWYgKG5vdyA+IG5leHREYXkpIHsKICAgICAgICAgICAgbGV2ZWxDbGVhclRpbWUgPSBuZXh0RGF5OwogICAgICAgIH0KICAgIH0KfQ=='.
	

]
