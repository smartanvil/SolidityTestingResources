Class {
	#name : #SRT6863be0e7cf7ce860a574760e9020d519a8bdc47,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6863be0e7cf7ce860a574760e9020d519a8bdc47 >> base64 [
	^ 'Lyogc29saGludC1kaXNhYmxlIG5vLXNpbXBsZS1ldmVudC1mdW5jLW5hbWUgKi8KCnByYWdtYSBzb2xpZGl0eSBeMC40LjE4OwoKCi8qCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkKICoKICogVGhlIE1JVCBMaWNlbnNlIChNSVQpCiAqIENvcHlyaWdodCAoYykgMjAxNiBTbWFydCBDb250cmFjdCBTb2x1dGlvbnMsIEluYy4KICovCmxpYnJhcnkgU2FmZU1hdGggewogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAoYSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCgovKgogKiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5CiAqCiAqIFRoZSBNSVQgTGljZW5zZSAoTUlUKQogKiBDb3B5cmlnaHQgKGMpIDIwMTYgU21hcnQgQ29udHJhY3QgU29sdXRpb25zLCBJbmMuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9Cn0KCgovKgogKiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5CiAqCiAqIFRoZSBNSVQgTGljZW5zZSAoTUlUKQogKiBDb3B5cmlnaHQgKGMpIDIwMTYgU21hcnQgQ29udHJhY3QgU29sdXRpb25zLCBJbmMuCiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgoKLyoKICogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eQogKgogKiBUaGUgTUlUIExpY2Vuc2UgKE1JVCkKICogQ29weXJpZ2h0IChjKSAyMDE2IFNtYXJ0IENvbnRyYWN0IFNvbHV0aW9ucywgSW5jLgogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgaW50ZXJuYWwgYmFsYW5jZXM7CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KfQoKCi8qKgogKiBAdGl0bGUgQSB0b2tlbiB0aGF0IGNhbiBkZWNyZWFzZSBpdHMgc3VwcGx5CiAqIEBhdXRob3IgSmFrdWIgU3RlZmFuc2tpIChodHRwczovL2dpdGh1Yi5jb20vanN0ZWZhbnNraSkKICoKICogaHR0cHM6Ly9naXRodWIuY29tL09uTGl2ZVBsYXRmb3JtL29ubGl2ZS1jb250cmFjdHMKICoKICogVGhlIEJTRCAzLUNsYXVzZSBDbGVhciBMaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxOCBPbkxpdmUgTFRECiAqLwpjb250cmFjdCBCdXJuYWJsZVRva2VuIGlzIEJhc2ljVG9rZW4gewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIC8qKgogICAgICogQGRldiBBZGRyZXNzIHdoZXJlIGJ1cm5lZCB0b2tlbnMgYXJlIFRyYW5zZmVycmVkLgogICAgICogQGRldiBUaGlzIGlzIHVzZWZ1bCBmb3IgYmxvY2tjaGFpbiBleHBsb3JlcnMgb3BlcmF0aW5nIG9uIFRyYW5zZmVyIGV2ZW50LgogICAgICovCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBCVVJOX0FERFJFU1MgPSBhZGRyZXNzKDB4MCk7CgogICAgLyoqCiAgICAgKiBAZGV2IFRva2VucyBkZXN0cm95ZWQgZnJvbSBzcGVjaWZpZWQgYWRkcmVzcwogICAgICogQHBhcmFtIGZyb20gYWRkcmVzcyBUaGUgYnVybmVyCiAgICAgKiBAcGFyYW0gYW1vdW50IHVpbnQyNTYgVGhlIGFtb3VudCBvZiBkZXN0cm95ZWQgdG9rZW5zCiAgICAgKi8KICAgIGV2ZW50IEJ1cm5lZChhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiBhbW91bnQpOwoKICAgIG1vZGlmaWVyIG9ubHlIb2xkZXIodWludDI1NiBhbW91bnQpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IGFtb3VudCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRGVzdHJveSB0b2tlbnMgKHJlZHVjZSB0b3RhbCBzdXBwbHkpCiAgICAgKiBAcGFyYW0gYW1vdW50IHVpbnQyNTYgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYnVybmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBhbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seUhvbGRlcihhbW91bnQpCiAgICB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoYW1vdW50KTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihhbW91bnQpOwoKICAgICAgICBCdXJuZWQobXNnLnNlbmRlciwgYW1vdW50KTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBCVVJOX0FERFJFU1MsIGFtb3VudCk7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIEEgdG9rZW4gd2l0aCBtb2RpZmlhYmxlIG5hbWUgYW5kIHN5bWJvbAogKiBAYXV0aG9yIEpha3ViIFN0ZWZhbnNraSAoaHR0cHM6Ly9naXRodWIuY29tL2pzdGVmYW5za2kpCiAqCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9PbkxpdmVQbGF0Zm9ybS9vbmxpdmUtY29udHJhY3RzCiAqCiAqIFRoZSBCU0QgMy1DbGF1c2UgQ2xlYXIgTGljZW5zZQogKiBDb3B5cmlnaHQgKGMpIDIwMTggT25MaXZlIExURAogKi8KY29udHJhY3QgRGVzY3JpcHRpdmVUb2tlbiBpcyBCYXNpY1Rva2VuLCBPd25hYmxlIHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIGJvb2wgcHVibGljIGlzRGVzY3JpcHRpb25GaW5hbGl6ZWQ7CiAgICB1aW50MjU2IHB1YmxpYyBkZWNpbWFscyA9IDE4OwoKICAgIGZ1bmN0aW9uIERlc2NyaXB0aXZlVG9rZW4oCiAgICAgICAgc3RyaW5nIF9uYW1lLAogICAgICAgIHN0cmluZyBfc3ltYm9sCiAgICApCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU5vdEVtcHR5KF9uYW1lKQogICAgICAgIG9ubHlOb3RFbXB0eShfc3ltYm9sKQogICAgewogICAgICAgIG5hbWUgPSBfbmFtZTsKICAgICAgICBzeW1ib2wgPSBfc3ltYm9sOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBMb2dzIGNoYW5nZSBvZiB0b2tlbiBuYW1lIGFuZCBzeW1ib2wKICAgICAqIEBwYXJhbSBuYW1lIHN0cmluZyBUaGUgbmV3IHRva2VuIG5hbWUKICAgICAqIEBwYXJhbSBzeW1ib2wgc3RyaW5nIFRoZSBuZXcgdG9rZW4gc3ltYm9sCiAgICAgKi8KICAgIGV2ZW50IERlc2NyaXB0aW9uQ2hhbmdlZChzdHJpbmcgbmFtZSwgc3RyaW5nIHN5bWJvbCk7CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1cnRoZXIgY2hhbmdlcyB0byBuYW1lIGFuZCBzeW1ib2wgYXJlIGZvcmJpZGRlbgogICAgICovCiAgICBldmVudCBEZXNjcmlwdGlvbkZpbmFsaXplZCgpOwoKICAgIG1vZGlmaWVyIG9ubHlOb3RFbXB0eShzdHJpbmcgc3RyKSB7CiAgICAgICAgcmVxdWlyZShieXRlcyhzdHIpLmxlbmd0aCA+IDApOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seURlc2NyaXB0aW9uTm90RmluYWxpemVkKCkgewogICAgICAgIHJlcXVpcmUoIWlzRGVzY3JpcHRpb25GaW5hbGl6ZWQpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IENoYW5nZSBuYW1lIGFuZCBzeW1ib2wgb2YgdG9rZW5zCiAgICAgKiBAZGV2IE1heSBiZSB1c2VkIGluIGNhc2Ugb2Ygc3ltYm9sIGNvbGxpc2lvbnMgaW4gZXhjaGFuZ2VzLgogICAgICogQHBhcmFtIF9uYW1lIHN0cmluZyBBIG5ldyB0b2tlbiBuYW1lCiAgICAgKiBAcGFyYW0gX3N5bWJvbCBzdHJpbmcgQSBuZXcgdG9rZW4gc3ltYm9sCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNoYW5nZURlc2NyaXB0aW9uKHN0cmluZyBfbmFtZSwgc3RyaW5nIF9zeW1ib2wpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICAgICAgb25seURlc2NyaXB0aW9uTm90RmluYWxpemVkCiAgICAgICAgb25seU5vdEVtcHR5KF9uYW1lKQogICAgICAgIG9ubHlOb3RFbXB0eShfc3ltYm9sKQogICAgewogICAgICAgIG5hbWUgPSBfbmFtZTsKICAgICAgICBzeW1ib2wgPSBfc3ltYm9sOwoKICAgICAgICBEZXNjcmlwdGlvbkNoYW5nZWQobmFtZSwgc3ltYm9sKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgUHJldmVudHMgZnVydGhlciBjaGFuZ2VzIHRvIG5hbWUgYW5kIHN5bWJvbAogICAgICovCiAgICBmdW5jdGlvbiBmaW5hbGl6ZURlc2NyaXB0aW9uKCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgICAgICBvbmx5RGVzY3JpcHRpb25Ob3RGaW5hbGl6ZWQKICAgIHsKICAgICAgICBpc0Rlc2NyaXB0aW9uRmluYWxpemVkID0gdHJ1ZTsKCiAgICAgICAgRGVzY3JpcHRpb25GaW5hbGl6ZWQoKTsKICAgIH0KfQoKCi8qKgogKiBAdGl0bGUgQSB0b2tlbiB0aGF0IGNhbiBpbmNyZWFzZSBpdHMgc3VwcGx5IGluIGluaXRpYWwgcGVyaW9kCiAqIEBhdXRob3IgSmFrdWIgU3RlZmFuc2tpIChodHRwczovL2dpdGh1Yi5jb20vanN0ZWZhbnNraSkKICoKICogaHR0cHM6Ly9naXRodWIuY29tL09uTGl2ZVBsYXRmb3JtL29ubGl2ZS1jb250cmFjdHMKICoKICogVGhlIEJTRCAzLUNsYXVzZSBDbGVhciBMaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxOCBPbkxpdmUgTFRECiAqLwpjb250cmFjdCBNaW50YWJsZVRva2VuIGlzIEJhc2ljVG9rZW4sIE93bmFibGUgewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIC8qKgogICAgICogQGRldiBBZGRyZXNzIGZyb20gd2hpY2ggbWludGVkIHRva2VucyBhcmUgVHJhbnNmZXJyZWQuCiAgICAgKiBAZGV2IFRoaXMgaXMgdXNlZnVsIGZvciBibG9ja2NoYWluIGV4cGxvcmVycyBvcGVyYXRpbmcgb24gVHJhbnNmZXIgZXZlbnQuCiAgICAgKi8KICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IE1JTlRfQUREUkVTUyA9IGFkZHJlc3MoMHgwKTsKCiAgICAvKioKICAgICAqIEBkZXYgSW5kaWNhdGVzIHdoZXRoZXIgY3JlYXRpbmcgdG9rZW5zIGhhcyBmaW5pc2hlZAogICAgICovCiAgICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQ7CgogICAgLyoqCiAgICAgKiBAZGV2IEFkZHJlc3NlcyBhbGxvd2VkIHRvIGNyZWF0ZSB0b2tlbnMKICAgICAqLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgaXNNaW50aW5nTWFuYWdlcjsKCiAgICAvKioKICAgICAqIEBkZXYgVG9rZW5zIG1pbnRlZCB0byBzcGVjaWZpZWQgYWRkcmVzcwogICAgICogQHBhcmFtIHRvIGFkZHJlc3MgVGhlIHJlY2VpdmVyIG9mIHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSBhbW91bnQgdWludDI1NiBUaGUgYW1vdW50IG9mIHRva2VucwogICAgICovCiAgICBldmVudCBNaW50ZWQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CgogICAgLyoqCiAgICAgKiBAZGV2IEFwcHJvdmVzIHNwZWNpZmllZCBhZGRyZXNzIGFzIGEgTWludGluZyBNYW5hZ2VyCiAgICAgKiBAcGFyYW0gYWRkciBhZGRyZXNzIFRoZSBhcHByb3ZlZCBhZGRyZXNzCiAgICAgKi8KICAgIGV2ZW50IE1pbnRpbmdNYW5hZ2VyQXBwcm92ZWQoYWRkcmVzcyBhZGRyKTsKCiAgICAvKioKICAgICAqIEBkZXYgUmV2b2tlcyBzcGVjaWZpZWQgYWRkcmVzcyBhcyBhIE1pbnRpbmcgTWFuYWdlcgogICAgICogQHBhcmFtIGFkZHIgYWRkcmVzcyBUaGUgcmV2b2tlZCBhZGRyZXNzCiAgICAgKi8KICAgIGV2ZW50IE1pbnRpbmdNYW5hZ2VyUmV2b2tlZChhZGRyZXNzIGFkZHIpOwoKICAgIC8qKgogICAgICogQGRldiBDcmVhdGlvbiBvZiB0b2tlbnMgZmluaXNoZWQKICAgICAqLwogICAgZXZlbnQgTWludGluZ0ZpbmlzaGVkKCk7CgogICAgbW9kaWZpZXIgb25seU1pbnRpbmdNYW5hZ2VyKGFkZHJlc3MgYWRkcikgewogICAgICAgIHJlcXVpcmUoaXNNaW50aW5nTWFuYWdlclthZGRyXSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5TWludGluZ05vdEZpbmlzaGVkIHsKICAgICAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFwcHJvdmUgc3BlY2lmaWVkIGFkZHJlc3MgdG8gbWludCB0b2tlbnMKICAgICAqIEBwYXJhbSBhZGRyIGFkZHJlc3MgVGhlIGFwcHJvdmVkIE1pbnRpbmcgTWFuYWdlciBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmVNaW50aW5nTWFuYWdlcihhZGRyZXNzIGFkZHIpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICAgICAgb25seU1pbnRpbmdOb3RGaW5pc2hlZAogICAgewogICAgICAgIGlzTWludGluZ01hbmFnZXJbYWRkcl0gPSB0cnVlOwoKICAgICAgICBNaW50aW5nTWFuYWdlckFwcHJvdmVkKGFkZHIpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGb3JiaWQgc3BlY2lmaWVkIGFkZHJlc3MgdG8gbWludCB0b2tlbnMKICAgICAqIEBwYXJhbSBhZGRyIGFkZHJlc3MgVGhlIGRlbmllZCBNaW50aW5nIE1hbmFnZXIgYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiByZXZva2VNaW50aW5nTWFuYWdlcihhZGRyZXNzIGFkZHIpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICAgICAgb25seU1pbnRpbmdNYW5hZ2VyKGFkZHIpCiAgICAgICAgb25seU1pbnRpbmdOb3RGaW5pc2hlZAogICAgewogICAgICAgIGRlbGV0ZSBpc01pbnRpbmdNYW5hZ2VyW2FkZHJdOwoKICAgICAgICBNaW50aW5nTWFuYWdlclJldm9rZWQoYWRkcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IENyZWF0ZSBuZXcgdG9rZW5zIGFuZCB0cmFuc2ZlciB0aGVtIHRvIHNwZWNpZmllZCBhZGRyZXNzCiAgICAgKiBAcGFyYW0gdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0bwogICAgICogQHBhcmFtIGFtb3VudCB1aW50MjU2IFRoZSBhbW91bnQgdG8gYmUgbWludGVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyB0bywgdWludDI1NiBhbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU1pbnRpbmdNYW5hZ2VyKG1zZy5zZW5kZXIpCiAgICAgICAgb25seU1pbnRpbmdOb3RGaW5pc2hlZAogICAgewogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKGFtb3VudCk7CiAgICAgICAgYmFsYW5jZXNbdG9dID0gYmFsYW5jZXNbdG9dLmFkZChhbW91bnQpOwoKICAgICAgICBNaW50ZWQodG8sIGFtb3VudCk7CiAgICAgICAgVHJhbnNmZXIoTUlOVF9BRERSRVNTLCB0bywgYW1vdW50KTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgUHJldmVudCBmdXJ0aGVyIGNyZWF0aW9uIG9mIHRva2VucwogICAgICovCiAgICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgICAgICBvbmx5TWludGluZ05vdEZpbmlzaGVkCiAgICB7CiAgICAgICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKCiAgICAgICAgTWludGluZ0ZpbmlzaGVkKCk7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIEEgdG9rZW4gdGhhdCBjYW4gaW5jcmVhc2UgaXRzIHN1cHBseSB0byB0aGUgc3BlY2lmaWVkIGxpbWl0CiAqIEBhdXRob3IgSmFrdWIgU3RlZmFuc2tpIChodHRwczovL2dpdGh1Yi5jb20vanN0ZWZhbnNraSkKICoKICogaHR0cHM6Ly9naXRodWIuY29tL09uTGl2ZVBsYXRmb3JtL29ubGl2ZS1jb250cmFjdHMKICoKICogVGhlIEJTRCAzLUNsYXVzZSBDbGVhciBMaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxOCBPbkxpdmUgTFRECiAqLwpjb250cmFjdCBDYXBwZWRNaW50YWJsZVRva2VuIGlzIE1pbnRhYmxlVG9rZW4gewoKICAgIC8qKgogICAgICogQGRldiBNYXhpbXVtIHN1cHBseSB0aGF0IGNhbiBiZSBtaW50ZWQKICAgICAqLwogICAgdWludDI1NiBwdWJsaWMgbWF4U3VwcGx5OwoKICAgIGZ1bmN0aW9uIENhcHBlZE1pbnRhYmxlVG9rZW4odWludDI1NiBfbWF4U3VwcGx5KQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlOb3RaZXJvKF9tYXhTdXBwbHkpCiAgICB7CiAgICAgICAgbWF4U3VwcGx5ID0gX21heFN1cHBseTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Tm90WmVybyh1aW50MjU2IHZhbHVlKSB7CiAgICAgICAgcmVxdWlyZSh2YWx1ZSAhPSAwKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlOb3RFeGNlZWRpbmdNYXhTdXBwbHkodWludDI1NiBzdXBwbHkpIHsKICAgICAgICByZXF1aXJlKHN1cHBseSA8PSBtYXhTdXBwbHkpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IENyZWF0ZSBuZXcgdG9rZW5zIGFuZCB0cmFuc2ZlciB0aGVtIHRvIHNwZWNpZmllZCBhZGRyZXNzCiAgICAgKiBAZGV2IENoZWNrcyBhZ2FpbnN0IGNhcHBlZCBtYXggc3VwcGx5IG9mIHRva2VuLgogICAgICogQHBhcmFtIHRvIGFkZHJlc3MgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8KICAgICAqIEBwYXJhbSBhbW91bnQgdWludDI1NiBUaGUgYW1vdW50IHRvIGJlIG1pbnRlZAogICAgICovCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgdG8sIHVpbnQyNTYgYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlOb3RFeGNlZWRpbmdNYXhTdXBwbHkodG90YWxTdXBwbHkuYWRkKGFtb3VudCkpCiAgICB7CiAgICAgICAgcmV0dXJuIE1pbnRhYmxlVG9rZW4ubWludCh0bywgYW1vdW50KTsKICAgIH0KfQoKCi8qCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkKICoKICogVGhlIE1JVCBMaWNlbnNlIChNSVQpCiAqIENvcHlyaWdodCAoYykgMjAxNiBTbWFydCBDb250cmFjdCBTb2x1dGlvbnMsIEluYy4KICoKICogaHR0cHM6Ly9naXRodWIuY29tL09uTGl2ZVBsYXRmb3JtL29ubGl2ZS1jb250cmFjdHMKICoKICogVGhlIEJTRCAzLUNsYXVzZSBDbGVhciBMaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxOCBPbkxpdmUgTFRECiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgoKLyoKICogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eQogKgogKiBUaGUgTUlUIExpY2Vuc2UgKE1JVCkKICogQ29weXJpZ2h0IChjKSAyMDE2IFNtYXJ0IENvbnRyYWN0IFNvbHV0aW9ucywgSW5jLgogKgogKiBodHRwczovL2dpdGh1Yi5jb20vT25MaXZlUGxhdGZvcm0vb25saXZlLWNvbnRyYWN0cwogKgogKiBUaGUgQlNEIDMtQ2xhdXNlIENsZWFyIExpY2Vuc2UKICogQ29weXJpZ2h0IChjKSAyMDE4IE9uTGl2ZSBMVEQKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAgICoKICAgICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBJbmNyZWFzZSB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgICoKICAgICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX2FkZGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gaW5jcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KICAgICAqLwogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBEZWNyZWFzZSB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgICoKICAgICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGRlY3JlbWVudAogICAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3N1YnRyYWN0ZWRWYWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBkZWNyZWFzZSB0aGUgYWxsb3dhbmNlIGJ5LgogICAgICovCiAgICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICAgICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICAgICAgfQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBFUkMyMCB0b2tlbiB3aXRoIG1hbnVhbCBpbml0aWFsIGxvY2sgdXAgcGVyaW9kCiAqIEBhdXRob3IgSmFrdWIgU3RlZmFuc2tpIChodHRwczovL2dpdGh1Yi5jb20vanN0ZWZhbnNraSkKICoKICogaHR0cHM6Ly9naXRodWIuY29tL09uTGl2ZVBsYXRmb3JtL29ubGl2ZS1jb250cmFjdHMKICoKICogVGhlIEJTRCAzLUNsYXVzZSBDbGVhciBMaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxOCBPbkxpdmUgTFRECiAqLwpjb250cmFjdCBSZWxlYXNhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CgogICAgLyoqCiAgICAgKiBAZGV2IENvbnRyb2xzIHdoZXRoZXIgdG9rZW4gdHJhbnNmZXJzIGFyZSBlbmFibGVkCiAgICAgKiBAZGV2IElmIGZhbHNlLCB0b2tlbiBpcyBpbiB0cmFuc2ZlciBsb2NrIHVwIHBlcmlvZC4KICAgICAqLwogICAgYm9vbCBwdWJsaWMgcmVsZWFzZWQ7CgogICAgLyoqCiAgICAgKiBAZGV2IENvbnRyYWN0IG9yIEVPQSB0aGF0IGNhbiBlbmFibGUgdG9rZW4gdHJhbnNmZXJzCiAgICAgKi8KICAgIGFkZHJlc3MgcHVibGljIHJlbGVhc2VNYW5hZ2VyOwoKICAgIC8qKgogICAgICogQGRldiBNYXAgb2YgYWRkcmVzc2VzIGFsbG93ZWQgdG8gdHJhbnNmZXIgdG9rZW5zIGRlc3BpdGUgdGhlIGxvY2sgdXAgcGVyaW9kCiAgICAgKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGlzVHJhbnNmZXJNYW5hZ2VyOwoKICAgIC8qKgogICAgICogQGRldiBTcGVjaWZpZWQgYWRkcmVzcyBzZXQgYXMgYSBSZWxlYXNlIE1hbmFnZXIKICAgICAqIEBwYXJhbSBhZGRyIGFkZHJlc3MgVGhlIGFwcHJvdmVkIGFkZHJlc3MKICAgICAqLwogICAgZXZlbnQgUmVsZWFzZU1hbmFnZXJTZXQoYWRkcmVzcyBhZGRyKTsKCiAgICAvKioKICAgICAqIEBkZXYgQXBwcm92ZXMgc3BlY2lmaWVkIGFkZHJlc3MgYXMgVHJhbnNmZXIgTWFuYWdlcgogICAgICogQHBhcmFtIGFkZHIgYWRkcmVzcyBUaGUgYXBwcm92ZWQgYWRkcmVzcwogICAgICovCiAgICBldmVudCBUcmFuc2Zlck1hbmFnZXJBcHByb3ZlZChhZGRyZXNzIGFkZHIpOwoKICAgIC8qKgogICAgICogQGRldiBSZXZva2VzIHNwZWNpZmllZCBhZGRyZXNzIGFzIFRyYW5zZmVyIE1hbmFnZXIKICAgICAqIEBwYXJhbSBhZGRyIGFkZHJlc3MgVGhlIGRlbmllZCBhZGRyZXNzCiAgICAgKi8KICAgIGV2ZW50IFRyYW5zZmVyTWFuYWdlclJldm9rZWQoYWRkcmVzcyBhZGRyKTsKCiAgICAvKioKICAgICAqIEBkZXYgTWFya3MgdG9rZW4gYXMgcmVsZWFzZWQgKHRyYW5zZmVyYWJsZSkKICAgICAqLwogICAgZXZlbnQgUmVsZWFzZWQoKTsKCiAgICAvKioKICAgICAqIEBkZXYgVG9rZW4gaXMgcmVsZWFzZWQgb3Igc3BlY2lmaWVkIGFkZHJlc3MgaXMgdHJhbnNmZXIgbWFuYWdlcgogICAgICovCiAgICBtb2RpZmllciBvbmx5VHJhbnNmZXJhYmxlRnJvbShhZGRyZXNzIGZyb20pIHsKICAgICAgICBpZiAoIXJlbGVhc2VkKSB7CiAgICAgICAgICAgIHJlcXVpcmUoaXNUcmFuc2Zlck1hbmFnZXJbZnJvbV0pOwogICAgICAgIH0KCiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgU3BlY2lmaWVkIGFkZHJlc3MgaXMgdHJhbnNmZXIgbWFuYWdlcgogICAgICovCiAgICBtb2RpZmllciBvbmx5VHJhbnNmZXJNYW5hZ2VyKGFkZHJlc3MgYWRkcikgewogICAgICAgIHJlcXVpcmUoaXNUcmFuc2Zlck1hbmFnZXJbYWRkcl0pOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFNlbmRlciBpcyByZWxlYXNlIG1hbmFnZXIKICAgICAqLwogICAgbW9kaWZpZXIgb25seVJlbGVhc2VNYW5hZ2VyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSByZWxlYXNlTWFuYWdlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVG9rZW4gaXMgcmVsZWFzZWQgKHRyYW5zZmVyYWJsZSkKICAgICAqLwogICAgbW9kaWZpZXIgb25seVJlbGVhc2VkKCkgewogICAgICAgIHJlcXVpcmUocmVsZWFzZWQpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFRva2VuIGlzIGluIGxvY2sgdXAgcGVyaW9kCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlOb3RSZWxlYXNlZCgpIHsKICAgICAgICByZXF1aXJlKCFyZWxlYXNlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgU2V0IHJlbGVhc2UgbWFuYWdlciBpZiB0b2tlbiBub3QgcmVsZWFzZWQgeWV0CiAgICAgKiBAcGFyYW0gYWRkciBhZGRyZXNzIFRoZSBuZXcgUmVsZWFzZSBNYW5hZ2VyIGFkZHJlc3MKICAgICAqLwogICAgZnVuY3Rpb24gc2V0UmVsZWFzZU1hbmFnZXIoYWRkcmVzcyBhZGRyKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgICAgIG9ubHlOb3RSZWxlYXNlZAogICAgewogICAgICAgIHJlbGVhc2VNYW5hZ2VyID0gYWRkcjsKCiAgICAgICAgUmVsZWFzZU1hbmFnZXJTZXQoYWRkcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFwcHJvdmUgc3BlY2lmaWVkIGFkZHJlc3MgdG8gbWFrZSB0cmFuc2ZlcnMgaW4gbG9jayB1cCBwZXJpb2QKICAgICAqIEBwYXJhbSBhZGRyIGFkZHJlc3MgVGhlIGFwcHJvdmVkIFRyYW5zZmVyIE1hbmFnZXIgYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlVHJhbnNmZXJNYW5hZ2VyKGFkZHJlc3MgYWRkcikKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgICAgICBvbmx5Tm90UmVsZWFzZWQKICAgIHsKICAgICAgICBpc1RyYW5zZmVyTWFuYWdlclthZGRyXSA9IHRydWU7CgogICAgICAgIFRyYW5zZmVyTWFuYWdlckFwcHJvdmVkKGFkZHIpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGb3JiaWQgc3BlY2lmaWVkIGFkZHJlc3MgdG8gbWFrZSB0cmFuc2ZlcnMgaW4gbG9jayB1cCBwZXJpb2QKICAgICAqIEBwYXJhbSBhZGRyIGFkZHJlc3MgVGhlIGRlbmllZCBUcmFuc2ZlciBNYW5hZ2VyIGFkZHJlc3MKICAgICAqLwogICAgZnVuY3Rpb24gcmV2b2tlVHJhbnNmZXJNYW5hZ2VyKGFkZHJlc3MgYWRkcikKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgICAgICBvbmx5VHJhbnNmZXJNYW5hZ2VyKGFkZHIpCiAgICAgICAgb25seU5vdFJlbGVhc2VkCiAgICB7CiAgICAgICAgZGVsZXRlIGlzVHJhbnNmZXJNYW5hZ2VyW2FkZHJdOwoKICAgICAgICBUcmFuc2Zlck1hbmFnZXJSZXZva2VkKGFkZHIpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBSZWxlYXNlIHRva2VuIGFuZCBtYWtlcyBpdCB0cmFuc2ZlcmFibGUKICAgICAqLwogICAgZnVuY3Rpb24gcmVsZWFzZSgpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seVJlbGVhc2VNYW5hZ2VyCiAgICAgICAgb25seU5vdFJlbGVhc2VkCiAgICB7CiAgICAgICAgcmVsZWFzZWQgPSB0cnVlOwoKICAgICAgICBSZWxlYXNlZCgpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUcmFuc2ZlciB0b2tlbiB0byBhIHNwZWNpZmllZCBhZGRyZXNzCiAgICAgKiBAZGV2IEF2YWlsYWJsZSBvbmx5IGFmdGVyIHRva2VuIHJlbGVhc2UKICAgICAqIEBwYXJhbSB0byBhZGRyZXNzIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvCiAgICAgKiBAcGFyYW0gYW1vdW50IHVpbnQyNTYgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcigKICAgICAgICBhZGRyZXNzIHRvLAogICAgICAgIHVpbnQyNTYgYW1vdW50CiAgICApCiAgICAgICAgcHVibGljCiAgICAgICAgb25seVRyYW5zZmVyYWJsZUZyb20obXNnLnNlbmRlcikKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2Zlcih0bywgYW1vdW50KTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgICogQGRldiBBdmFpbGFibGUgb25seSBhZnRlciB0b2tlbiByZWxlYXNlCiAgICAgKiBAcGFyYW0gZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgICAqIEBwYXJhbSB0byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAgKiBAcGFyYW0gYW1vdW50IHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKAogICAgICAgIGFkZHJlc3MgZnJvbSwKICAgICAgICBhZGRyZXNzIHRvLAogICAgICAgIHVpbnQyNTYgYW1vdW50CiAgICApCiAgICAgICAgcHVibGljCiAgICAgICAgb25seVRyYW5zZmVyYWJsZUZyb20oZnJvbSkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oZnJvbSwgdG8sIGFtb3VudCk7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIE9uTGl2ZSBUb2tlbgogKiBAYXV0aG9yIEpha3ViIFN0ZWZhbnNraSAoaHR0cHM6Ly9naXRodWIuY29tL2pzdGVmYW5za2kpCiAqIEBkZXYgSW1wbGVtZW50cyBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBNaW50YWJsZSBieSBzZWxlY3RlZCBhZGRyZXNzZXMgdW50aWwgc2FsZSBmaW5pc2hlcwogKiBAZGV2IEEgY2FwIG9uIHRvdGFsIHN1cHBseSBvZiB0b2tlbnMKICogQGRldiBCdXJuYWJsZSBieSBhbnlvbmUKICogQGRldiBNYW51YWwgbG9jay11cCBwZXJpb2QgKG5vbi10cmFuc2ZlcmFibGUpIHdpdGggYSBub24tcmV2ZXJzaWJsZSByZWxlYXNlIGJ5IHRoZSBzZWxlY3RlZCBhZGRyZXNzCiAqIEBkZXYgTW9kaWZpYWJsZSBzeW1ib2wgYW5kIG5hbWUgaW4gY2FzZSBvZiBjb2xsaXNpb24KICoKICogaHR0cHM6Ly9naXRodWIuY29tL09uTGl2ZVBsYXRmb3JtL29ubGl2ZS1jb250cmFjdHMKICoKICogVGhlIEJTRCAzLUNsYXVzZSBDbGVhciBMaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxOCBPbkxpdmUgTFRECiAqLwpjb250cmFjdCBPbkxpdmVUb2tlbiBpcyBEZXNjcmlwdGl2ZVRva2VuLCBSZWxlYXNhYmxlVG9rZW4sIENhcHBlZE1pbnRhYmxlVG9rZW4sIEJ1cm5hYmxlVG9rZW4gewoKICAgIGZ1bmN0aW9uIE9uTGl2ZVRva2VuKAogICAgICAgIHN0cmluZyBfbmFtZSwKICAgICAgICBzdHJpbmcgX3N5bWJvbCwKICAgICAgICB1aW50MjU2IF9tYXhTdXBwbHkKICAgICkKICAgICAgICBwdWJsaWMKICAgICAgICBEZXNjcmlwdGl2ZVRva2VuKF9uYW1lLCBfc3ltYm9sKQogICAgICAgIENhcHBlZE1pbnRhYmxlVG9rZW4oX21heFN1cHBseSkKICAgIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9Cn0='.
	

]
