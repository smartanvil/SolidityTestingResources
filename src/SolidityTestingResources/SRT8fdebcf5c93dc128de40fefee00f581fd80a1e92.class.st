Class {
	#name : #SRT8fdebcf5c93dc128de40fefee00f581fd80a1e92,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8fdebcf5c93dc128de40fefee00f581fd80a1e92 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgppbnRlcmZhY2UgVG9rZW4gewogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiBkZWNpbWFscygpcHVibGljIHZpZXcgcmV0dXJucyAodWludDgpOwp9CgovKioKICogQHRpdGxlIFZhdWx0CiAqIEBkZXYgVGhpcyBjb250cmFjdCBpcyB1c2VkIGZvciBzdG9yaW5nIGZ1bmRzIHdoaWxlIGEgY3Jvd2RzYWxlCiAqIGlzIGluIHByb2dyZXNzLiBGdW5kcyB3aWxsIGJlIHRyYW5zZmVycmVkIHRvIG93bmVyIG9uY2Ugc2FsZSBlbmRzCiAqLwpjb250cmFjdCBWYXVsdCBpcyBPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIGVudW0gU3RhdGUgeyBBY3RpdmUsIENsb3NlZCB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgZGVwb3NpdGVkOwogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwogICAgU3RhdGUgcHVibGljIHN0YXRlOwoKICAgIGV2ZW50IENsb3NlZCgpOwogICAgZXZlbnQgd2l0aGRyYXduKGFkZHJlc3MgX3dhbGxldCk7CiAgICBmdW5jdGlvbiBWYXVsdChhZGRyZXNzIF93YWxsZXQpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfd2FsbGV0ICE9IDB4MCk7CiAgICAgICAgd2FsbGV0ID0gX3dhbGxldDsKICAgICAgICBzdGF0ZSA9IFN0YXRlLkFjdGl2ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZXBvc2l0KGFkZHJlc3MgaW52ZXN0b3IpIHB1YmxpYyBvbmx5T3duZXIgIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsKICAgICAgICBkZXBvc2l0ZWRbaW52ZXN0b3JdID0gZGVwb3NpdGVkW2ludmVzdG9yXS5hZGQobXNnLnZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZSgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsKICAgICAgICBzdGF0ZSA9IFN0YXRlLkNsb3NlZDsKICAgICAgICBDbG9zZWQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhd1RvV2FsbGV0KCkgb25seU93bmVyIHB1YmxpY3sKICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQ2xvc2VkKTsKICAgIHdhbGxldC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgd2l0aGRyYXduKHdhbGxldCk7CiAgfQp9CgoKY29udHJhY3QgQ09PU0Nyb3dkc2FsZXMgaXMgT3duYWJsZXsKICAgICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICAgIAogICAgICAvL1Rva2VuIHRvIGJlIHVzZWQgZm9yIHRoaXMgc2FsZQogICAgICBUb2tlbiBwdWJsaWMgdG9rZW47CiAgICAgIAogICAgICAvL0FsbCBmdW5kcyB3aWxsIGdvIGludG8gdGhpcyB2YXVsdAogICAgICBWYXVsdCBwdWJsaWMgdmF1bHQ7CiAgICAgIAogICAgICAvL1RvdGFsIHRva2VucyB3aGljaCBpcyBvbiBmb3Igc2FsZQogICAgICB1aW50MjU2IHB1YmxpYyBjcm93ZFNhbGVIYXJkQ2FwOwogICAgICAKICAgICAgCiAgICAgIC8vVGhlcmUgY2FuIGJlIDUgdGllcnMgYW5kIGl0IHdpbGwgY29udGFpbiBpbmZvIGFib3V0IGVhY2ggdGllcgogICAgICBzdHJ1Y3QgVGllckluZm97CiAgICAgICAgICB1aW50MjU2IGhhcmRjYXA7CiAgICAgICAgICB1aW50MjU2IHN0YXJ0VGltZTsKICAgICAgICAgIHVpbnQyNTYgZW5kVGltZTsKICAgICAgICAgIHVpbnQyNTYgcmF0ZTsKICAgICAgICAgIHVpbnQ4IGJvbnVzUGVyY2VudGFnZTsKICAgICAgICAgIHVpbnQyNTYgd2VpUmFpc2VkOwogICAgICB9CiAgICAgIAogICAgICAvL2luZm8gb2YgZWFjaCB0aWVyCiAgICAgIFRpZXJJbmZvW10gcHVibGljIHRpZXJzOwogICAgICAKICAgICAgLy9Ub3RhbCBmdW5kaW5nCiAgICAgIHVpbnQyNTYgcHVibGljIHRvdGFsRnVuZGluZzsKICAgICAgCiAgICAgIHVpbnQ4IHB1YmxpYyBub09mVGllcnM7CiAgICAgIAogICAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNTb2xkOwogICAgCiAgICAgIC8vS2VlcCB0cmFjayB3aGV0aGVyIHNhbGVzIGlzIGFjdGl2ZSBvciBub3QKICAgICAgYm9vbCBwdWJsaWMgc2FsZXNBY3RpdmU7CiAgICAgIAogICAgICAvL0tlZXAgdHJhY2sgb2Ygd2hldGhlciB0aGUgc2FsZSBoYXMgZW5kZWQgb3Igbm90CiAgICAgIGJvb2wgcHVibGljIHNhbGVFbmRlZDsKICAgICAgCiAgICAgIGJvb2wgcHVibGljIHVuc3BlbnRDcmVkaXRzV2l0aGRyYXduOwogICAgICAKICAgICAgLy90byBtYWtlIHN1cmUgY29udHJhY3QgaXMgcG93ZXJlZHVwIG9ubHkgb25jZQogICAgICBib29sIGNvbnRyYWN0UG93ZXJlZFVwID0gZmFsc2U7CiAgICAgIAogICAgICAvL0V2ZW50IHRvIHRyaWdnZXIgU2FsZSBzdG9wCiAgICAgIGV2ZW50IFNhbGVTdG9wcGVkKGFkZHJlc3MgX293bmVyLCB1aW50MjU2IHRpbWUpOwogICAgICAKICAgICAgLy9FdmVudCB0byB0cmlnZ2VyIG5vcm1hbCBmbG93IG9mIHNhbGUgZW5kCiAgICAgIGV2ZW50IEZpbmFsaXplZChhZGRyZXNzIF9vd25lciwgdWludDI1NiB0aW1lKTsKICAgIAogICAgIC8qKgogICAgICogZXZlbnQgZm9yIHRva2VuIHB1cmNoYXNlIGxvZ2dpbmcKICAgICAqIEBwYXJhbSBwdXJjaGFzZXIgd2hvIHBhaWQgZm9yIHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSBiZW5lZmljaWFyeSB3aG8gZ290IHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSB2YWx1ZSB3ZWlzIHBhaWQgZm9yIHB1cmNoYXNlCiAgICAgKiBAcGFyYW0gYW1vdW50IGFtb3VudCBvZiB0b2tlbnMgcHVyY2hhc2VkCiAgICAgKi8KICAgICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBhbW91bnQpOwogICAgCiAgICAvL21vZGlmaWVycyAgICAKICAgIG1vZGlmaWVyIF9zYWxlQWN0aXZlKCl7CiAgICAgICAgcmVxdWlyZShzYWxlc0FjdGl2ZSk7CiAgICAgICAgXzsKICAgIH0KICAKICAgICBtb2RpZmllciBub25aZXJvQWRkcmVzcyhhZGRyZXNzIF90bykgewogICAgICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgbm9uWmVyb0V0aCgpIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIF9zYWxlRW5kZWQoKSB7CiAgICAgICAgcmVxdWlyZShzYWxlRW5kZWQpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIHRpZXJzRW1wdHkoKXsKICAgICAgICByZXF1aXJlKG5vT2ZUaWVycz09MCk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gQ09PU0Nyb3dkc2FsZXMoYWRkcmVzcyBfdG9rZW5Ub0JlVXNlZCwgYWRkcmVzcyBfd2FsbGV0KXB1YmxpYyBub25aZXJvQWRkcmVzcyhfdG9rZW5Ub0JlVXNlZCkgbm9uWmVyb0FkZHJlc3MoX3dhbGxldCl7CiAgICAgICAgdG9rZW4gPSBUb2tlbihfdG9rZW5Ub0JlVXNlZCk7CiAgICAgICAgdmF1bHQgPSBuZXcgVmF1bHQoX3dhbGxldCk7CiAgICB9CiAgICAKICAgIC8qKgogICAgKiAgICAgQGRldiBDaGVjayBpZiBzYWxlIGNvbnRyYWN0IGhhcyBlbm91Z2ggdG9rZW5zIG9uIGl0cyBhY2NvdW50IGJhbGFuY2UgCiAgICAqICAgICB0byByZXdhcmQgYWxsIHBvc3NpYmxlIHBhcnRpY2lwYXRpb25zIHdpdGhpbiBzYWxlIHBlcmlvZAogICAgKi8KICAgIGZ1bmN0aW9uIHBvd2VyVXBDb250cmFjdCgpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgCiAgICAgICAgcmVxdWlyZSghY29udHJhY3RQb3dlcmVkVXApOwogICAgICAgIAogICAgICAgIC8vIENvbnRyYWN0IHNob3VsZCBub3QgYmUgcG93ZXJlZCB1cCBwcmV2aW91c2x5CiAgICAgICAgcmVxdWlyZSghc2FsZXNBY3RpdmUpOwoKICAgICAgICAvLyBDb250cmFjdCBzaG91bGQgaGF2ZSBlbm91Z2ggUGFyc2VjIGNyZWRpdHMKICAgICAgICByZXF1aXJlKHRva2VuLmJhbGFuY2VPZih0aGlzKSA+PSBjcm93ZFNhbGVIYXJkQ2FwKTsKICAgICAgICAKICAgICAgICAvL2NoZWNrIHdoZXRoZXIgdGllciBpbmZvcm1hdGlvbiBoYXMgYmVlbiBlbnRlcmVkCiAgICAgICAgcmVxdWlyZShub09mVGllcnM+MCAmJiB0aWVycy5sZW5ndGg9PW5vT2ZUaWVycyk7CiAgICAgIAogICAgICAgIC8vYWN0aXZhdGUgdGhlIHNhbGUgcHJvY2VzcwogICAgICAgIHNhbGVzQWN0aXZlPXRydWU7CiAgICAgICAgCiAgICAgICAgY29udHJhY3RQb3dlcmVkVXAgPSB0cnVlOwogICAgfQogICAgCiAgICAvL2ZvciBFbWVyZ2VuY3kgc3RvcCBvZiB0aGUgc2FsZQogICAgZnVuY3Rpb24gZW1lcmdlbmN5U3RvcCgpIHB1YmxpYyBvbmx5T3duZXIgX3NhbGVBY3RpdmV7CiAgICAgICAgc2FsZXNBY3RpdmUgPSBmYWxzZTsKICAgICAgICBzYWxlRW5kZWQgPSB0cnVlOyAgICAKICAgICAgICB2YXVsdC5jbG9zZSgpOwogICAgICAgIFNhbGVTdG9wcGVkKG1zZy5zZW5kZXIsIG5vdyk7CiAgICB9CiAgICAKICAgIC8qKgogICAqIEBkZXYgTXVzdCBiZSBjYWxsZWQgYWZ0ZXIgc2FsZSBlbmRzLCB0byBkbyBzb21lIGV4dHJhIGZpbmFsaXphdGlvbgogICAqIHdvcmsuIENhbGxzIHRoZSBjb250cmFjdCdzIGZpbmFsaXphdGlvbiBmdW5jdGlvbi4KICAgKi8KICAgIGZ1bmN0aW9uIGZpbmFsaXplKClwdWJsaWMgb25seU93bmVyIF9zYWxlQWN0aXZlewogICAgICAgIHJlcXVpcmUoc2FsZVRpbWVPdmVyKCkpOwogICAgICAgIHNhbGVzQWN0aXZlID0gZmFsc2U7CiAgICAgICAgc2FsZUVuZGVkID0gdHJ1ZTsKICAgICAgICB2YXVsdC5jbG9zZSgpOwogICAgICAgIEZpbmFsaXplZChtc2cuc2VuZGVyLCBub3cpOwogICAgfQogICAgCiAgICAgIC8vIEByZXR1cm4gdHJ1ZSBpZiBhbGwgdGhlIHRpZXJzIGhhcyBiZWVuIGVuZGVkCiAgZnVuY3Rpb24gc2FsZVRpbWVPdmVyKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICBpZihub09mVGllcnM9PTApewogICAgICAgICAgLy9zaW5jZSBubyB0aWVycyBoYXMgYmVlbiBwcm92aWRlZCB5ZXQsIGhlbmNlIHNhbGVzIGhhcyBub3Qgc3RhcnRlZCB0byBlbmQKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICAvL0lmIGxhc3QgdGllciBoYXMgZW5kZWQsIGl0IG1lYW4gYWxsIHRpZXJzIGFyZSBmaW5pc2hlZAogICAgcmV0dXJuIG5vdyA+IHRpZXJzW25vT2ZUaWVycy0xXS5lbmRUaW1lOwogIH0KICAKICAgIC8vaWYgY3Jvd2RzYWxlcyBpcyBvdmVyLCB0aGUgbW9uZXkgcmFzaWVkIHNob3VsZCBiZSB0cmFuc2ZlcnJlZCB0byB0aGUgd2FsbGV0IGFkZHJlc3MKICBmdW5jdGlvbiB3aXRoZHJhd0Z1bmRzKCkgcHVibGljIG9ubHlPd25lciBfc2FsZUVuZGVkewogIAogICAgICB2YXVsdC53aXRoZHJhd1RvV2FsbGV0KCk7CiAgfQogIAogIC8qKgogICogQGRldiBDYW4gYmUgY2FsbGVkIG9ubHkgb25jZS4gVGhlIG1ldGhvZCB0byBhbGxvdyBvd25lciB0byBzZXQgdGllciBpbmZvcm1hdGlvbgogICogQHBhcmFtIF9ub09mVGllcnMgVGhlIGludGVnZXIgdG8gc2V0IG51bWJlciBvZiB0aWVycwogICogQHBhcmFtIF9zdGFydFRpbWVzIFRoZSBhcnJheSBjb250YWluaW5nIHN0YXJ0IHRpbWUgb2YgZWFjaCB0aWVyCiAgKiBAcGFyYW0gX2VuZFRpbWVzIFRoZSBhcnJheSBjb250YWluaW5nIGVuZCB0aW1lIG9mIGVhY2ggdGllcgogICogQHBhcmFtIF9oYXJkQ2FwcyBUaGUgYXJyYXkgY29udGFpbmluZyBoYXJkIGNhcCBmb3IgZWFjaCB0aWVyCiAgKiBAcGFyYW0gX3JhdGVzIFRoZSBhcnJheSBjb250YWluaW5nIG51bWJlciBvZiB0b2tlbnMgcGVyIGV0aGVyIGZvciBlYWNoIHRpZXIKICAqIEBwYXJhbSBfYm9udXNQZXJjZW50YWdlcyBUaGUgYXJyYXkgY29udGFpbmluZyBib251cyBwZXJjZW50YWdlIGZvciBlYWNoIHRpZXIKICAqIFRoZSBhcnJheXMgc2hvdWxkIGJlIGluIHN5bmMgd2l0aCBlYWNoIG90aGVyLiBGb3IgZWFjaCBpbmRleCAwIGZvciBlYWNoIG9mIHRoZSBhcnJheSBzaG91bGQgY29udGFpbiBpbmZvIGFib3V0IFRpZXIgMSwgc2ltaWxhcmx5IGZvciBUaWVyMiwgMyw0IGFuZCA1LgogICogU2FsZXMgaGFyZCBjYXAgd2lsbCBiZSB0aGUgaGFyZCBjYXAgb2YgbGFzdCB0aWVyCiAgKi8KICBmdW5jdGlvbiBzZXRUaWVyc0luZm8odWludDggX25vT2ZUaWVycywgdWludDI1NltdIF9zdGFydFRpbWVzLCB1aW50MjU2W10gX2VuZFRpbWVzLCB1aW50MjU2W10gX2hhcmRDYXBzLCB1aW50MjU2W10gX3JhdGVzLCB1aW50OFtdIF9ib251c1BlcmNlbnRhZ2VzKXB1YmxpYyBvbmx5T3duZXIgdGllcnNFbXB0eXsKICAgIAogICAgLy9NaW5pbXUgbnVtYmVyIG9mIHRpZXJzIHNob3VsZCBiZSAxIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gNQogICAgcmVxdWlyZShfbm9PZlRpZXJzPj0xICYmIF9ub09mVGllcnM8PTUpOwogICAgCiAgICAvL0VhY2ggYXJyYXkgc2hvdWxkIGNvbnRhaW4gaW5mbyBhYm91dCBlYWNoIHRpZXIKICAgIHJlcXVpcmUoX3N0YXJ0VGltZXMubGVuZ3RoID09IF9ub09mVGllcnMpOwogICAgcmVxdWlyZShfZW5kVGltZXMubGVuZ3RoPT1fbm9PZlRpZXJzKTsKICAgIHJlcXVpcmUoX2hhcmRDYXBzLmxlbmd0aD09X25vT2ZUaWVycyk7CiAgICByZXF1aXJlKF9yYXRlcy5sZW5ndGg9PV9ub09mVGllcnMpOwogICAgcmVxdWlyZShfYm9udXNQZXJjZW50YWdlcy5sZW5ndGg9PV9ub09mVGllcnMpOwogICAgCiAgICBub09mVGllcnMgPSBfbm9PZlRpZXJzOwogICAgCiAgICBmb3IodWludDggaT0wO2k8bm9PZlRpZXJzO2krKyl7CiAgICAgICAgcmVxdWlyZShfaGFyZENhcHNbaV0+MCk7CiAgICAgICAgcmVxdWlyZShfZW5kVGltZXNbaV0+X3N0YXJ0VGltZXNbaV0pOwogICAgICAgIHJlcXVpcmUoX3JhdGVzW2ldPjApOwogICAgICAgIHJlcXVpcmUoX2JvbnVzUGVyY2VudGFnZXNbaV0+MCk7CiAgICAgICAgaWYoaT4wKXsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vY2hlY2sgaGFyZCBjYXAgZm9yIHRoaXMgdGllciBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIHRoZSBwcmV2aW91cyB0aWVyCiAgICAgICAgICAgIHJlcXVpcmUoX2hhcmRDYXBzW2ldID4gX2hhcmRDYXBzW2ktMV0pOwogICAgICAgICAgICAKICAgICAgICAgICAgLy9zdGFydCB0aW1lIG9mIHRoaXMgdGllciBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIHByZXZpb3VzIHRpZXIKICAgICAgICAgICAgcmVxdWlyZShfc3RhcnRUaW1lc1tpXT5fZW5kVGltZXNbaS0xXSk7CiAgICAgICAgICAgIAogICAgICAgICAgICB0aWVycy5wdXNoKFRpZXJJbmZvKHsKICAgICAgICAgICAgICAgIGhhcmRjYXA6X2hhcmRDYXBzW2ldLm11bCggMTAgKiogdWludDI1Nih0b2tlbi5kZWNpbWFscygpKSksCiAgICAgICAgICAgICAgICBzdGFydFRpbWU6X3N0YXJ0VGltZXNbaV0sCiAgICAgICAgICAgICAgICBlbmRUaW1lOl9lbmRUaW1lc1tpXSwKICAgICAgICAgICAgICAgIHJhdGU6X3JhdGVzW2ldLAogICAgICAgICAgICAgICAgYm9udXNQZXJjZW50YWdlOl9ib251c1BlcmNlbnRhZ2VzW2ldLAogICAgICAgICAgICAgICAgd2VpUmFpc2VkOjAKICAgICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgICAvL3N0YXJ0IHRpbWUgb2YgdGllcjEgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiBjdXJyZW50IHRpbWUKICAgICAgICAgICAgcmVxdWlyZShfc3RhcnRUaW1lc1tpXT5ub3cpOwogICAgICAgICAgCiAgICAgICAgICAgIHRpZXJzLnB1c2goVGllckluZm8oewogICAgICAgICAgICAgICAgaGFyZGNhcDpfaGFyZENhcHNbaV0ubXVsKCAxMCAqKiB1aW50MjU2KHRva2VuLmRlY2ltYWxzKCkpKSwgLy9tdWx0aXBseWluZyB3aXRoIGRlY2ltYWwgcGxhY2VzLiBTbyBpZiBoYXJkIGNhcCBpcyBzZXQgdG8gMSBpdCBpcyBhY3R1YWxseSBzZXQgdG8gMSAqIDEwXmRlY2ltYWxzCiAgICAgICAgICAgICAgICBzdGFydFRpbWU6X3N0YXJ0VGltZXNbaV0sCiAgICAgICAgICAgICAgICBlbmRUaW1lOl9lbmRUaW1lc1tpXSwKICAgICAgICAgICAgICAgIHJhdGU6X3JhdGVzW2ldLAogICAgICAgICAgICAgICAgYm9udXNQZXJjZW50YWdlOl9ib251c1BlcmNlbnRhZ2VzW2ldLAogICAgICAgICAgICAgICAgd2VpUmFpc2VkOjAKICAgICAgICAgICAgfSkpOwogICAgICAgIH0KICAgIH0KICAgIGNyb3dkU2FsZUhhcmRDYXAgPSBfaGFyZENhcHNbbm9PZlRpZXJzLTFdLm11bCggMTAgKiogdWludDI1Nih0b2tlbi5kZWNpbWFscygpKSk7CiAgfQogICAgCiAgICAvKioKICAgICogQGRldiBBbGxvd3Mgb3duZXIgdG8gdHJhbnNmZXIgdW5zb2xkIHRva2VucyB0byBoaXMvaGVyIGFkZHJlc3MKICAgICogVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2UgdGhlIHNhbGUgaGFzIGJlZW4gc3RvcHBlZC9lbmRlZAogICAgKi8KICAgZnVuY3Rpb24gb3duZXJXaXRoZHJhd1Vuc3BlbnRDcmVkaXRzKClwdWJsaWMgb25seU93bmVyIF9zYWxlRW5kZWR7CiAgICAgICAgcmVxdWlyZSghdW5zcGVudENyZWRpdHNXaXRoZHJhd24pOwogICAgICAgIHVuc3BlbnRDcmVkaXRzV2l0aGRyYXduID0gdHJ1ZTsKICAgICAgICB0b2tlbi50cmFuc2Zlcihvd25lciwgdG9rZW4uYmFsYW5jZU9mKHRoaXMpKTsKICAgfQogICAKICAgLy9GYWxsYmFjayBmdW5jdGlvbiB1c2VkIHRvIGJ1eXRva2VucwogICBmdW5jdGlvbigpcHVibGljIHBheWFibGV7CiAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgIH0KICAgCiAgIC8qKgogICAqIEBkZXYgTG93IGxldmVsIHRva2VuIHB1cmNoYXNlIGZ1bmN0aW9uCiAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IFRoZSBhZGRyZXNzIHdobyB3aWxsIHJlY2VpdmUgdGhlIHRva2VucyBmb3IgdGhpcyB0cmFuc2FjdGlvbgogICAqLwogICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBiZW5lZmljaWFyeSlwdWJsaWMgX3NhbGVBY3RpdmUgbm9uWmVyb0V0aCBub25aZXJvQWRkcmVzcyhiZW5lZmljaWFyeSkgcGF5YWJsZSByZXR1cm5zKGJvb2wpewogICAgICAgCiAgICAgICBpbnQ4IGN1cnJlbnRUaWVySW5kZXggPSBnZXRDdXJyZW50bHlSdW5uaW5nVGllcigpOwogICAgICAgYXNzZXJ0KGN1cnJlbnRUaWVySW5kZXg+PTApOwogICAgICAgCiAgICAgICBUaWVySW5mbyBzdG9yYWdlIGN1cnJlbnRseVJ1bm5pbmdUaWVyID0gdGllcnNbdWludDI1NihjdXJyZW50VGllckluZGV4KV07CiAgICAgICAKICAgICAgIC8vaGFyZCBjYXAgZm9yIHRoaXMgdGllciBoYXMgbm90IGJlZW4gcmVhY2hlZAogICAgICAgcmVxdWlyZSh0b2tlbnNTb2xkIDwgY3VycmVudGx5UnVubmluZ1RpZXIuaGFyZGNhcCk7CiAgICAgICAKICAgICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwogICAgICAgCiAgICAgICB1aW50MjU2IHRva2VucyA9IHdlaUFtb3VudC5tdWwoY3VycmVudGx5UnVubmluZ1RpZXIucmF0ZSk7CiAgICAgICAKICAgICAgIHVpbnQyNTYgYm9udXNlZFRva2VucyA9IGFwcGx5Qm9udXModG9rZW5zLCBjdXJyZW50bHlSdW5uaW5nVGllci5ib251c1BlcmNlbnRhZ2UpOwogICAgICAgCiAgICAgICAvL1RvdGFsIHRva2VucyBzb2xkIGluY2x1ZGluZyBjdXJyZW50IHNhbGUgc2hvdWxkIGJlIGxlc3MgdGhhbiBoYXJkIGNhcCBvZiB0aGlzIHRpZXIKICAgICAgIGFzc2VydCh0b2tlbnNTb2xkLmFkZChib251c2VkVG9rZW5zKSA8PSBjdXJyZW50bHlSdW5uaW5nVGllci5oYXJkY2FwKTsKICAgICAgIAogICAgICAgdG9rZW5zU29sZCA9IHRva2Vuc1NvbGQuYWRkKGJvbnVzZWRUb2tlbnMpOwogICAgICAgCiAgICAgICB0b3RhbEZ1bmRpbmcgPSB0b3RhbEZ1bmRpbmcuYWRkKHdlaUFtb3VudCk7CiAgICAgICAKICAgICAgIGN1cnJlbnRseVJ1bm5pbmdUaWVyLndlaVJhaXNlZCA9IGN1cnJlbnRseVJ1bm5pbmdUaWVyLndlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKICAgICAgIHZhdWx0LmRlcG9zaXQudmFsdWUobXNnLnZhbHVlKShtc2cuc2VuZGVyKTsKICAgICAgIHRva2VuLnRyYW5zZmVyKGJlbmVmaWNpYXJ5LCBib251c2VkVG9rZW5zKTsKICAgICAgIFRva2VuUHVyY2hhc2UobXNnLnNlbmRlciwgYmVuZWZpY2lhcnksIHdlaUFtb3VudCwgYm9udXNlZFRva2Vucyk7CiAgICAgICAKICAgfQogICAKICAgICBmdW5jdGlvbiBhcHBseUJvbnVzKHVpbnQyNTYgdG9rZW5zLCB1aW50OCBwZXJjZW50KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgICh1aW50MjU2IGJvbnVzZWRUb2tlbnMpIHsKICAgICAgICB1aW50MjU2IHRva2Vuc1RvQWRkID0gdG9rZW5zLm11bChwZXJjZW50KS5kaXYoMTAwKTsKICAgICAgICByZXR1cm4gdG9rZW5zLmFkZCh0b2tlbnNUb0FkZCk7CiAgICB9CiAgICAKICAgLyoqCiAgICAqIEBkZXYgcmV0dXJucyB0aGUgY3VycmVudGx5IHJ1bm5pbmcgdGllciBpbmRleCBhcyBwZXIgdGltZQogICAgKiBSZXR1cm4gLTEgaWYgbm8gdGllciBpcyBydW5uaW5nIGN1cnJlbnRseQogICAgKiAqLwogICBmdW5jdGlvbiBnZXRDdXJyZW50bHlSdW5uaW5nVGllcigpcHVibGljIHZpZXcgcmV0dXJucyhpbnQ4KXsKICAgICAgZm9yKHVpbnQ4IGk9MDtpPG5vT2ZUaWVycztpKyspewogICAgICAgICAgaWYobm93Pj10aWVyc1tpXS5zdGFydFRpbWUgJiYgbm93PHRpZXJzW2ldLmVuZFRpbWUpewogICAgICAgICAgICAgIHJldHVybiBpbnQ4KGkpOwogICAgICAgICAgfQogICAgICB9ICAgCiAgICAgIHJldHVybiAtMTsKICAgfQogICAKICAgLyoqCiAgICogQGRldiBHZXQgZnVuY3RpbmcgaW5mbyBvZiB1c2VyL2FkZHJlc3MuIEl0IHdpbGwgcmV0dXJuIGhvdyBtdWNoIGZ1bmRpbmcgdGhlIHVzZXIgaGFzIG1hZGUgaW4gdGVybXMgb2Ygd2VpCiAgICovCiAgIGZ1bmN0aW9uIGdldEZ1bmRpbmdJbmZvRm9yVXNlcihhZGRyZXNzIF91c2VyKXB1YmxpYyB2aWV3IG5vblplcm9BZGRyZXNzKF91c2VyKSByZXR1cm5zKHVpbnQyNTYpewogICAgICAgcmV0dXJuIHZhdWx0LmRlcG9zaXRlZChfdXNlcik7CiAgIH0KICAgCiAgICAgIAp9'.
	

]
