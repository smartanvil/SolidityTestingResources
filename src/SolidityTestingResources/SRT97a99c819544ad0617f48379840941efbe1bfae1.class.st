Class {
	#name : #SRT97a99c819544ad0617f48379840941efbe1bfae1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT97a99c819544ad0617f48379840941efbe1bfae1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgoKY29udHJhY3QgU3VwcG9ydGVkQ29udHJhY3QgewogIC8vIE1lbWJlcnMgY2FuIGNhbGwgYW55IGNvbnRyYWN0IHRoYXQgZXhwb3NlcyBhIGB0aGVDeWJlck1lc3NhZ2VgIG1ldGhvZC4KICBmdW5jdGlvbiB0aGVDeWJlck1lc3NhZ2Uoc3RyaW5nKSBwdWJsaWM7Cn0KCgpjb250cmFjdCBFUkMyMCB7CiAgLy8gV2Ugd2FudCB0byBiZSBhYmxlIHRvIHJlY292ZXIgJiBkb25hdGUgYW55IHRva2VucyBzZW50IHRvIHRoZSBjb250cmFjdC4KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKfQoKCmNvbnRyYWN0IHRoZUN5YmVyIHsKICAvLyB0aGVDeWJlciBpcyBhIGRlY2VudHJhbGl6ZWQgY2x1Yi4gSXQgZG9lcyBub3Qgc3VwcG9ydCBlcXVpdHkgbWVtYmVyc2hpcHMsCiAgLy8gcGF5bWVudCBvZiBkdWVzLCBvciBwYXlvdXRzIHRvIHRoZSBtZW1iZXJzLiBJbnN0ZWFkLCBpdCBpcyBtZWFudCB0byBlbmFibGUKICAvLyBkYXBwcyB0aGF0IGFsbG93IG1lbWJlcnMgdG8gY29tbXVuaWNhdGUgd2l0aCBvbmUgYW5vdGhlciBvciB0aGF0IHByb3ZpZGUKICAvLyBhcmJpdHJhcnkgaW5jZW50aXZlcyBvciBzcGVjaWFsIGFjY2VzcyB0byB0aGUgY2x1YidzIG1lbWJlcnMuIFRvIGJlY29tZSBhCiAgLy8gbWVtYmVyIG9mIHRoZUN5YmVyLCB5b3UgbXVzdCBiZSBhZGRlZCBieSBhbiBleGlzdGluZyBtZW1iZXIuIEZ1cnRoZXJtb3JlLAogIC8vIGV4aXN0aW5nIG1lbWJlcnNoaXBzIGNhbiBiZSByZXZva2VkIGlmIGEgZ2l2ZW4gbWVtYmVyIGJlY29tZXMgaW5hY3RpdmUgZm9yCiAgLy8gdG9vIGxvbmcuIFRvdGFsIG1lbWJlcnNoaXAgaXMgY2FwcGVkIGFuZCB1bmlxdWUgYWRkcmVzc2VzIGFyZSByZXF1aXJlZC4KCiAgZXZlbnQgTmV3TWVtYmVyKHVpbnQ4IGluZGV4ZWQgbWVtYmVySWQsIGJ5dGVzMzIgbWVtYmVyTmFtZSwgYWRkcmVzcyBpbmRleGVkIG1lbWJlckFkZHJlc3MpOwogIGV2ZW50IE5ld01lbWJlck5hbWUodWludDggaW5kZXhlZCBtZW1iZXJJZCwgYnl0ZXMzMiBuZXdNZW1iZXJOYW1lKTsKICBldmVudCBOZXdNZW1iZXJLZXkodWludDggaW5kZXhlZCBtZW1iZXJJZCwgc3RyaW5nIG5ld01lbWJlcktleSk7CiAgZXZlbnQgTWVtYmVyc2hpcFRyYW5zZmVycmVkKHVpbnQ4IGluZGV4ZWQgbWVtYmVySWQsIGFkZHJlc3MgbmV3TWVtYmVyQWRkcmVzcyk7CiAgZXZlbnQgTWVtYmVyUHJvY2xhaW1lZEluYWN0aXZlKHVpbnQ4IGluZGV4ZWQgbWVtYmVySWQsIHVpbnQ4IGluZGV4ZWQgcHJvY2xhaW1pbmdNZW1iZXJJZCk7CiAgZXZlbnQgTWVtYmVySGVhcnRiZWF0ZWQodWludDggaW5kZXhlZCBtZW1iZXJJZCk7CiAgZXZlbnQgTWVtYmVyc2hpcFJldm9rZWQodWludDggaW5kZXhlZCBtZW1iZXJJZCwgdWludDggaW5kZXhlZCByZXZva2luZ01lbWJlcklkKTsKICBldmVudCBCcm9hZGNhc3RNZXNzYWdlKHVpbnQ4IGluZGV4ZWQgbWVtYmVySWQsIHN0cmluZyBtZXNzYWdlKTsKICBldmVudCBEaXJlY3RNZXNzYWdlKHVpbnQ4IGluZGV4ZWQgbWVtYmVySWQsIHVpbnQ4IGluZGV4ZWQgdG9NZW1iZXJJZCwgc3RyaW5nIG1lc3NhZ2UpOwogIGV2ZW50IENhbGwodWludDggaW5kZXhlZCBtZW1iZXJJZCwgYWRkcmVzcyBpbmRleGVkIGNvbnRyYWN0QWRkcmVzcywgc3RyaW5nIG1lc3NhZ2UpOwogIGV2ZW50IEZ1bmRzRG9uYXRlZCh1aW50OCBpbmRleGVkIG1lbWJlcklkLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBUb2tlbnNEb25hdGVkKHVpbnQ4IGluZGV4ZWQgbWVtYmVySWQsIGFkZHJlc3MgdG9rZW5Db250cmFjdEFkZHJlc3MsIHVpbnQyNTYgdmFsdWUpOwoKICAvLyBUaGVyZSBjYW4gb25seSBiZSAyNTYgbWVtYmVycyAobWVtYmVyIG51bWJlciAwIHRvIDI1NSkgaW4gdGhlQ3liZXIuCiAgdWludDE2IHByaXZhdGUgY29uc3RhbnQgTUFYTUVNQkVSU18gPSAyNTY7CgogIC8vIEEgbWVtYmVyc2hpcCB0aGF0IGhhcyBiZWVuIG1hcmtlZCBhcyBpbmFjdGl2ZSBmb3IgOTAgZGF5cyBtYXkgYmUgcmV2b2tlZC4KICB1aW50NjQgcHJpdmF0ZSBjb25zdGFudCBJTkFDVElWSVRZVElNRU9VVF8gPSA5MCBkYXlzOwoKICAvLyBTZXQgdGhlIGV0aGVyZXVtIHRpcCBqYXIgKGV0aGVyZXVtZm91bmRhdGlvbi5ldGgpIGFzIHRoZSBkb25hdGlvbiBhZGRyZXNzLgogIGFkZHJlc3MgcHJpdmF0ZSBjb25zdGFudCBET05BVElPTkFERFJFU1NfID0gMHhmQjY5MTYwOTVjYTFkZjYwYkI3OUNlOTJjRTNFYTc0YzM3YzVkMzU5OwoKICAvLyBBIG1lbWJlciBoYXMgYSBuYW1lLCBhIHB1YmxpYyBrZXksIGEgZGF0ZSB0aGV5IGpvaW5lZCwgYW5kIGEgZGF0ZSB0aGV5IHdlcmUKICAvLyBtYXJrZWQgYXMgaW5hY3RpdmUgKHdoaWNoIGlzIGVxdWlhbCB0byAwIGlmIHRoZXkgYXJlIGN1cnJlbnRseSBhY3RpdmUpLgogIHN0cnVjdCBNZW1iZXIgewogICAgYm9vbCBtZW1iZXI7CiAgICBieXRlczMyIG5hbWU7CiAgICBzdHJpbmcgcHVia2V5OwogICAgdWludDY0IG1lbWJlclNpbmNlOwogICAgdWludDY0IGluYWN0aXZlU2luY2U7CiAgfQoKICAvLyBTZXQgdXAgYSBmaXhlZCBhcnJheSBvZiBtZW1iZXJzIGluZGV4ZWQgYnkgbWVtYmVyIGlkLgogIE1lbWJlcltNQVhNRU1CRVJTX10gaW50ZXJuYWwgbWVtYmVyc187CgogIC8vIE1hcCBhZGRyZXNzZXMgdG8gYm9vbGVhbnMgZGVzaWduYXRpbmcgdGhhdCB0aGV5IGNvbnRyb2wgdGhlIG1lbWJlcnNoaXAuCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBpbnRlcm5hbCBhZGRyZXNzSXNNZW1iZXJfOwoKICAvLyBNYXAgYWRkcmVzc2VzIHRvIG1lbWJlciBpZHMuCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50OCkgaW50ZXJuYWwgYWRkcmVzc1RvTWVtYmVyXzsKCiAgLy8gTWFwIG1lbWJlciBpZHMgdG8gYWRkcmVzc2VzIHRoYXQgb3duIHRoZSBtZW1iZXJzaGlwLgogIG1hcHBpbmcgKHVpbnQgPT4gYWRkcmVzcykgaW50ZXJuYWwgbWVtYmVyVG9BZGRyZXNzXzsKCiAgLy8gTW9zdCBtZXRob2RzIG9mIHRoZSBjb250cmFjdCwgbGlrZSBhZGRpbmcgbmV3IG1lbWJlcnMgb3IgcmV2b2tpbmcgZXhpc3RpbmcKICAvLyBpbmFjdGl2ZSBtZW1iZXJzLCBjYW4gb25seSBiZSBjYWxsZWQgYnkgYSB2YWxpZCBtZW1iZXIuCiAgbW9kaWZpZXIgbWVtYmVyc09ubHkoKSB7CiAgICAvLyBPbmx5IGFsbG93IHRyYW5zYWN0aW9ucyBvcmlnaW5hdGluZyBmcm9tIGEgZGVzaWduYXRlZCBtZW1iZXIgYWRkcmVzcy4KICAgIHJlcXVpcmUoYWRkcmVzc0lzTWVtYmVyX1ttc2cuc2VuZGVyXSk7CiAgICBfOwogIH0KCiAgLy8gSW4gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLCBzZXQgdXAgdGhlIGNvbnRyYWN0IGNyZWF0b3IgYXMgdGhlIGZpcnN0CiAgLy8gbWVtYmVyIHNvIHRoYXQgb3RoZXIgbmV3IG1lbWJlcnMgY2FuIGJlIGFkZGVkLgogIGZ1bmN0aW9uIHRoZUN5YmVyKCkgcHVibGljIHsKICAgIC8vIExvZyB0aGUgYWRkaXRpb24gb2YgdGhlIGZpcnN0IG1lbWJlciAoY29udHJhY3QgY3JlYXRvcikuCiAgICBOZXdNZW1iZXIoMCwgIiIsIG1zZy5zZW5kZXIpOwoKICAgIC8vIFNldCB1cCB0aGUgbWVtYmVyOiBzdGF0dXMsIG5hbWUsIGtleSwgbWVtYmVyIHNpbmNlICYgaW5hY3RpdmUgc2luY2UuCiAgICBtZW1iZXJzX1swXSA9IE1lbWJlcih0cnVlLCBieXRlczMyKCIiKSwgIiIsIHVpbnQ2NChub3cpLCAwKTsKICAgIAogICAgLy8gU2V0IHVwIHRoZSBhZGRyZXNzIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWVtYmVyLgogICAgbWVtYmVyVG9BZGRyZXNzX1swXSA9IG1zZy5zZW5kZXI7CgogICAgLy8gUG9pbnQgdGhlIGFkZHJlc3MgdG8gbWVtYmVyJ3MgaWQuCiAgICBhZGRyZXNzVG9NZW1iZXJfW21zZy5zZW5kZXJdID0gMDsKCiAgICAvLyBHcmFudCBtZW1iZXJzLW9ubHkgYWNjZXNzIHRvIHRoZSBuZXcgbWVtYmVyLgogICAgYWRkcmVzc0lzTWVtYmVyX1ttc2cuc2VuZGVyXSA9IHRydWU7CiAgfQoKICAvLyBFeGlzdGluZyBtZW1iZXJzIGNhbiBkZXNpZ25hdGUgbmV3IHVzZXJzIGJ5IHNwZWNpZnlpbmcgYW4gdW51c2VkIG1lbWJlciBpZAogIC8vIGFuZCBhZGRyZXNzLiBUaGUgbmV3IG1lbWJlcidzIGluaXRpYWwgbWVtYmVyIG5hbWUgc2hvdWxkIGFsc28gYmUgc3VwcGxpZWQuCiAgZnVuY3Rpb24gbmV3TWVtYmVyKHVpbnQ4IF9tZW1iZXJJZCwgYnl0ZXMzMiBfbWVtYmVyTmFtZSwgYWRkcmVzcyBfbWVtYmVyQWRkcmVzcykgcHVibGljIG1lbWJlcnNPbmx5IHsKICAgIC8vIE1lbWJlcnMgbmVlZCBhIG5vbi1udWxsIGFkZHJlc3MuCiAgICByZXF1aXJlKF9tZW1iZXJBZGRyZXNzICE9IGFkZHJlc3MoMCkpOwoKICAgIC8vIEV4aXN0aW5nIG1lbWJlcnMgKHRoYXQgaGF2ZSBub3QgZmFsbGVuIGluYWN0aXZlKSBjYW5ub3QgYmUgcmVwbGFjZWQuCiAgICByZXF1aXJlICghbWVtYmVyc19bX21lbWJlcklkXS5tZW1iZXIpOwoKICAgIC8vIE9uZSBhZGRyZXNzIGNhbm5vdCBob2xkIG1vcmUgdGhhbiBvbmUgbWVtYmVyc2hpcC4KICAgIHJlcXVpcmUgKCFhZGRyZXNzSXNNZW1iZXJfW19tZW1iZXJBZGRyZXNzXSk7CgogICAgLy8gTG9nIHRoZSBhZGRpdGlvbiBvZiBhIG5ldyBtZW1iZXI6IChtZW1iZXIgaWQsIG5hbWUsIGFkZHJlc3MpLgogICAgTmV3TWVtYmVyKF9tZW1iZXJJZCwgX21lbWJlck5hbWUsIF9tZW1iZXJBZGRyZXNzKTsKCiAgICAvLyBTZXQgdXAgdGhlIG1lbWJlcjogc3RhdHVzLCBuYW1lLCBgbWVtYmVyIHNpbmNlYCAmIGBpbmFjdGl2ZSBzaW5jZWAuCiAgICBtZW1iZXJzX1tfbWVtYmVySWRdID0gTWVtYmVyKHRydWUsIF9tZW1iZXJOYW1lLCAiIiwgdWludDY0KG5vdyksIDApOwogICAgCiAgICAvLyBTZXQgdXAgdGhlIGFkZHJlc3MgYXNzb2NpYXRlZCB3aXRoIHRoZSBtZW1iZXIgaWQuCiAgICBtZW1iZXJUb0FkZHJlc3NfW19tZW1iZXJJZF0gPSBfbWVtYmVyQWRkcmVzczsKCiAgICAvLyBQb2ludCB0aGUgYWRkcmVzcyB0byB0aGUgbWVtYmVyIGlkLgogICAgYWRkcmVzc1RvTWVtYmVyX1tfbWVtYmVyQWRkcmVzc10gPSBfbWVtYmVySWQ7CgogICAgLy8gR3JhbnQgbWVtYmVycy1vbmx5IGFjY2VzcyB0byB0aGUgbmV3IG1lbWJlci4KICAgIGFkZHJlc3NJc01lbWJlcl9bX21lbWJlckFkZHJlc3NdID0gdHJ1ZTsKICB9CgogIC8vIE1lbWJlcnMgY2FuIHNldCBhIG5hbWUgKGVuY29kZWQgYXMgYSBoZXggdmFsdWUpIHRoYXQgd2lsbCBiZSBhc3NvY2lhdGVkCiAgLy8gd2l0aCB0aGVpciBtZW1iZXJzaGlwLgogIGZ1bmN0aW9uIGNoYW5nZU5hbWUoYnl0ZXMzMiBfbmV3TWVtYmVyTmFtZSkgcHVibGljIG1lbWJlcnNPbmx5IHsKICAgIC8vIExvZyB0aGUgbWVtYmVyJ3MgbmFtZSBjaGFuZ2U6IChtZW1iZXIgaWQsIG5ldyBuYW1lKS4KICAgIE5ld01lbWJlck5hbWUoYWRkcmVzc1RvTWVtYmVyX1ttc2cuc2VuZGVyXSwgX25ld01lbWJlck5hbWUpOwoKICAgIC8vIENoYW5nZSB0aGUgbWVtYmVyJ3MgbmFtZS4KICAgIG1lbWJlcnNfW2FkZHJlc3NUb01lbWJlcl9bbXNnLnNlbmRlcl1dLm5hbWUgPSBfbmV3TWVtYmVyTmFtZTsKICB9CgogIC8vIE1lbWJlcnMgY2FuIHNldCBhIHB1YmxpYyBrZXkgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIHZlcmlmeWluZyBzaWduZWQKICAvLyBtZXNzYWdlcyBmcm9tIHRoZSBtZW1iZXIgb3IgZW5jcnlwdGluZyBtZXNzYWdlcyBpbnRlbmRlZCBmb3IgdGhlIG1lbWJlci4KICBmdW5jdGlvbiBjaGFuZ2VLZXkoc3RyaW5nIF9uZXdNZW1iZXJLZXkpIHB1YmxpYyBtZW1iZXJzT25seSB7CiAgICAvLyBMb2cgdGhlIG1lbWJlcidzIGtleSBjaGFuZ2U6IChtZW1iZXIgaWQsIG5ldyBtZW1iZXIga2V5KS4KICAgIE5ld01lbWJlcktleShhZGRyZXNzVG9NZW1iZXJfW21zZy5zZW5kZXJdLCBfbmV3TWVtYmVyS2V5KTsKCiAgICAvLyBDaGFuZ2UgdGhlIG1lbWJlcidzIHB1YmxpYyBrZXkuCiAgICBtZW1iZXJzX1thZGRyZXNzVG9NZW1iZXJfW21zZy5zZW5kZXJdXS5wdWJrZXkgPSBfbmV3TWVtYmVyS2V5OwogIH0KCiAgLy8gTWVtYmVycyBjYW4gdHJhbnNmZXIgdGhlaXIgbWVtYmVyc2hpcCB0byBhIG5ldyBhZGRyZXNzOyB3aGVuIHRoZXkgZG8sIHRoZQogIC8vIGZpZWxkcyBvbiB0aGUgbWVtYmVyc2hpcCBhcmUgYWxsIHJlc2V0LgogIGZ1bmN0aW9uIHRyYW5zZmVyTWVtYmVyc2hpcChhZGRyZXNzIF9uZXdNZW1iZXJBZGRyZXNzKSBwdWJsaWMgbWVtYmVyc09ubHkgewogICAgLy8gTWVtYmVycyBuZWVkIGEgbm9uLW51bGwgYWRkcmVzcy4KICAgIHJlcXVpcmUoX25ld01lbWJlckFkZHJlc3MgIT0gYWRkcmVzcygwKSk7CgogICAgLy8gTWVtYmVyc2hpcHMgY2Fubm90IGJlIHRyYW5zZmVycmVkIHRvIGV4aXN0aW5nIG1lbWJlcnMuCiAgICByZXF1aXJlICghYWRkcmVzc0lzTWVtYmVyX1tfbmV3TWVtYmVyQWRkcmVzc10pOwoKICAgIC8vIExvZyB0cmFuc2ZlciBvZiBtZW1iZXJzaGlwOiAobWVtYmVyIGlkLCBuZXcgYWRkcmVzcykuCiAgICBNZW1iZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzc1RvTWVtYmVyX1ttc2cuc2VuZGVyXSwgX25ld01lbWJlckFkZHJlc3MpOwogICAgCiAgICAvLyBSZXZva2UgbWVtYmVycy1vbmx5IGFjY2VzcyBmb3IgdGhlIG9sZCBtZW1iZXIuCiAgICBkZWxldGUgYWRkcmVzc0lzTWVtYmVyX1ttc2cuc2VuZGVyXTsKICAgIAogICAgLy8gUmVzZXQgZmllbGRzIG9uIHRoZSBtZW1iZXJzaGlwLgogICAgbWVtYmVyc19bYWRkcmVzc1RvTWVtYmVyX1ttc2cuc2VuZGVyXV0ubWVtYmVyU2luY2UgPSB1aW50NjQobm93KTsKICAgIG1lbWJlcnNfW2FkZHJlc3NUb01lbWJlcl9bbXNnLnNlbmRlcl1dLmluYWN0aXZlU2luY2UgPSAwOwogICAgbWVtYmVyc19bYWRkcmVzc1RvTWVtYmVyX1ttc2cuc2VuZGVyXV0ubmFtZSA9IGJ5dGVzMzIoIiIpOwogICAgbWVtYmVyc19bYWRkcmVzc1RvTWVtYmVyX1ttc2cuc2VuZGVyXV0ucHVia2V5ID0gIiI7CiAgICAKICAgIC8vIFJlcGxhY2UgdGhlIGFkZHJlc3MgYXNzb2NpYXRlZCB3aXRoIHRoZSBtZW1iZXIgaWQuCiAgICBtZW1iZXJUb0FkZHJlc3NfW2FkZHJlc3NUb01lbWJlcl9bbXNnLnNlbmRlcl1dID0gX25ld01lbWJlckFkZHJlc3M7CgogICAgLy8gUG9pbnQgdGhlIG5ldyBhZGRyZXNzIHRvIHRoZSBtZW1iZXIgaWQgYW5kIGNsZWFuIHVwIHRoZSBvbGQgcG9pbnRlci4KICAgIGFkZHJlc3NUb01lbWJlcl9bX25ld01lbWJlckFkZHJlc3NdID0gYWRkcmVzc1RvTWVtYmVyX1ttc2cuc2VuZGVyXTsKICAgIGRlbGV0ZSBhZGRyZXNzVG9NZW1iZXJfW21zZy5zZW5kZXJdOwoKICAgIC8vIEdyYW50IG1lbWJlcnMtb25seSBhY2Nlc3MgdG8gdGhlIG5ldyBtZW1iZXIuCiAgICBhZGRyZXNzSXNNZW1iZXJfW19uZXdNZW1iZXJBZGRyZXNzXSA9IHRydWU7CiAgfQoKICAvLyBBcyBhIG1lY2hhbmlzbSB0byByZW1vdmUgbWVtYmVycyB0aGF0IGFyZSBubyBsb25nZXIgYWN0aXZlIGR1ZSB0byBsb3N0IGtleXMKICAvLyBvciBhIGxhY2sgb2YgZW5nYWdlbWVudCwgb3RoZXIgbWVtYmVycyBtYXkgcHJvY2xhaW0gdGhlbSBhcyBpbmFjdGl2ZS4KICBmdW5jdGlvbiBwcm9jbGFpbUluYWN0aXZlKHVpbnQ4IF9tZW1iZXJJZCkgcHVibGljIG1lbWJlcnNPbmx5IHsKICAgIC8vIE1lbWJlcnMgbXVzdCBleGlzdCBhbmQgYmUgY3VycmVudGx5IGFjdGl2ZSB0byBwcm9jbGFpbSBpbmFjdGl2aXR5LgogICAgcmVxdWlyZShtZW1iZXJzX1tfbWVtYmVySWRdLm1lbWJlcik7CiAgICByZXF1aXJlKG1lbWJlcklzQWN0aXZlKF9tZW1iZXJJZCkpOwogICAgCiAgICAvLyBNZW1iZXJzIGNhbm5vdCBwcm9jbGFpbSB0aGVtc2VsdmVzIGFzIGluYWN0aXZlIChzYWZldHkgbWVhc3VyZSkuCiAgICByZXF1aXJlKGFkZHJlc3NUb01lbWJlcl9bbXNnLnNlbmRlcl0gIT0gX21lbWJlcklkKTsKCiAgICAvLyBMb2cgcHJvY2xhbWF0aW9uIG9mIGluYWN0aXZpdHk6IChpbmFjdGl2ZSBtZW1iZXIgaWQsIG1lbWJlciBpZCwgdGltZSkuCiAgICBNZW1iZXJQcm9jbGFpbWVkSW5hY3RpdmUoX21lbWJlcklkLCBhZGRyZXNzVG9NZW1iZXJfW21zZy5zZW5kZXJdKTsKICAgIAogICAgLy8gU2V0IHRoZSBgaW5hY3RpdmVTaW5jZWAgZmllbGQgb24gdGhlIGluYWN0aXZlIG1lbWJlci4KICAgIG1lbWJlcnNfW19tZW1iZXJJZF0uaW5hY3RpdmVTaW5jZSA9IHVpbnQ2NChub3cpOwogIH0KCiAgLy8gTWVtYmVycyB0aGF0IGhhdmUgZXJyb25lb3VzbHkgYmVlbiBtYXJrZWQgYXMgaW5hY3RpdmUgbWF5IHNlbmQgYSBoZWFydGJlYXQKICAvLyB0byBwcm92ZSB0aGF0IHRoZXkgYXJlIHN0aWxsIGFjdGl2ZSwgdm9pZGluZyB0aGUgYGluYWN0aXZlU2luY2VgIHByb3BlcnR5LgogIGZ1bmN0aW9uIGhlYXJ0YmVhdCgpIHB1YmxpYyBtZW1iZXJzT25seSB7CiAgICAvLyBMb2cgdGhhdCB0aGUgbWVtYmVyIGhhcyBoZWFydGJlYXRlZCBhbmQgaXMgc3RpbGwgYWN0aXZlLgogICAgTWVtYmVySGVhcnRiZWF0ZWQoYWRkcmVzc1RvTWVtYmVyX1ttc2cuc2VuZGVyXSk7CgogICAgLy8gRGVzaWduYXRlIG1lbWJlciBhcyBhY3RpdmUgYnkgdm9pZGluZyB0aGVpciBgaW5hY3RpdmVTaW5jZWAgZmllbGQuCiAgICBtZW1iZXJzX1thZGRyZXNzVG9NZW1iZXJfW21zZy5zZW5kZXJdXS5pbmFjdGl2ZVNpbmNlID0gMDsKICB9CgogIC8vIElmIGEgbWVtYmVyIGhhcyBiZWVuIG1hcmtlZCBpbmFjdGl2ZSBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBpbmFjdGl2aXR5CiAgLy8gdGltZW91dCwgYW5vdGhlciBtZW1iZXIgbWF5IHJldm9rZSB0aGVpciBtZW1iZXJzaGlwIGFuZCBkZWxldGUgdGhlbS4KICBmdW5jdGlvbiByZXZva2VNZW1iZXJzaGlwKHVpbnQ4IF9tZW1iZXJJZCkgcHVibGljIG1lbWJlcnNPbmx5IHsKICAgIC8vIE1lbWJlcnMgbXVzdCBleGlzdCBpbiBvcmRlciB0byBiZSByZXZva2VkLgogICAgcmVxdWlyZShtZW1iZXJzX1tfbWVtYmVySWRdLm1lbWJlcik7CgogICAgLy8gTWVtYmVycyBtdXN0IGJlIGRlc2lnbmF0ZWQgYXMgaW5hY3RpdmUuCiAgICByZXF1aXJlKCFtZW1iZXJJc0FjdGl2ZShfbWVtYmVySWQpKTsKCiAgICAvLyBNZW1iZXJzIGNhbm5vdCByZXZva2UgdGhlbXNlbHZlcyAoc2FmZXR5IG1lYXN1cmUpLgogICAgcmVxdWlyZShhZGRyZXNzVG9NZW1iZXJfW21zZy5zZW5kZXJdICE9IF9tZW1iZXJJZCk7CgogICAgLy8gTWVtYmVycyBtdXN0IGJlIGluYWN0aXZlIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGluYWN0aXZpdHkgdGltZW91dC4KICAgIHJlcXVpcmUobm93ID49IG1lbWJlcnNfW19tZW1iZXJJZF0uaW5hY3RpdmVTaW5jZSArIElOQUNUSVZJVFlUSU1FT1VUXyk7CgogICAgLy8gTG9nIHRoYXQgdGhlIG1lbWJlcnNoaXAgaGFzIGJlZW4gcmV2b2tlZC4KICAgIE1lbWJlcnNoaXBSZXZva2VkKF9tZW1iZXJJZCwgYWRkcmVzc1RvTWVtYmVyX1ttc2cuc2VuZGVyXSk7CgogICAgLy8gUmV2b2tlIG1lbWJlcnMtb25seSBhY2Nlc3MgZm9yIHRoZSBtZW1iZXIuCiAgICBkZWxldGUgYWRkcmVzc0lzTWVtYmVyX1ttZW1iZXJUb0FkZHJlc3NfW19tZW1iZXJJZF1dOwoKICAgIC8vIERlbGV0ZSB0aGUgcG9pbnRlciBsaW5raW5nIHRoZSBhZGRyZXNzIHRvIHRoZSBtZW1iZXIgaWQuCiAgICBkZWxldGUgYWRkcmVzc1RvTWVtYmVyX1ttZW1iZXJUb0FkZHJlc3NfW19tZW1iZXJJZF1dOwogICAgCiAgICAvLyBEZWxldGUgdGhlIGFkZHJlc3MgYXNzb2NpYXRlZCB3aXRoIHRoZSBtZW1iZXIgaWQuCiAgICBkZWxldGUgbWVtYmVyVG9BZGRyZXNzX1tfbWVtYmVySWRdOwoKICAgIC8vIEZpbmFsbHksIGRlbGV0ZSB0aGUgbWVtYmVyLgogICAgZGVsZXRlIG1lbWJlcnNfW19tZW1iZXJJZF07CiAgfQoKICAvLyBXaGlsZSBtb3N0IG1lc3NhZ2luZyBpcyBpbnRlbmRlZCB0byBvY2N1ciBvZmYtY2hhaW4gdXNpbmcgc3VwcGxpZWQga2V5cywKICAvLyBtZW1iZXJzIGNhbiBhbHNvIGJyb2FkY2FzdCBhIG1lc3NhZ2UgYXMgYW4gb24tY2hhaW4gZXZlbnQuCiAgZnVuY3Rpb24gYnJvYWRjYXN0TWVzc2FnZShzdHJpbmcgX21lc3NhZ2UpIHB1YmxpYyBtZW1iZXJzT25seSB7CiAgICAvLyBMb2cgdGhlIG1lc3NhZ2UuCiAgICBCcm9hZGNhc3RNZXNzYWdlKGFkZHJlc3NUb01lbWJlcl9bbXNnLnNlbmRlcl0sIF9tZXNzYWdlKTsKICB9CgogIC8vIEluIGFkZGl0aW9uLCBtZW1iZXJzIGNhbiBzZW5kIGRpcmVjdCBtZXNzYWdlZXMgYXMgYW4gb24tY2hhaW4gZXZlbnQuIFRoZXNlCiAgLy8gbWVzc2FnZXMgYXJlIGludGVuZGVkIHRvIGJlIGVuY3J5cHRlZCB1c2luZyB0aGUgcmVjaXBpZW50J3MgcHVibGljIGtleS4KICBmdW5jdGlvbiBkaXJlY3RNZXNzYWdlKHVpbnQ4IF90b01lbWJlcklkLCBzdHJpbmcgX21lc3NhZ2UpIHB1YmxpYyBtZW1iZXJzT25seSB7CiAgICAvLyBMb2cgdGhlIG1lc3NhZ2UuCiAgICBEaXJlY3RNZXNzYWdlKGFkZHJlc3NUb01lbWJlcl9bbXNnLnNlbmRlcl0sIF90b01lbWJlcklkLCBfbWVzc2FnZSk7CiAgfQoKICAvLyBNZW1iZXJzIGNhbiBhbHNvIHBhc3MgYSBtZXNzYWdlIHRvIGFueSBjb250cmFjdCB0aGF0IHN1cHBvcnRzIGl0ICh2aWEgdGhlCiAgLy8gYHRoZUN5YmVyTWVzc2FnZShzdHJpbmcpYCBmdW5jdGlvbiksIGRlc2lnbmF0ZWQgYnkgdGhlIGNvbnRyYWN0IGFkZHJlc3MuCiAgZnVuY3Rpb24gcGFzc01lc3NhZ2UoYWRkcmVzcyBfY29udHJhY3RBZGRyZXNzLCBzdHJpbmcgX21lc3NhZ2UpIHB1YmxpYyBtZW1iZXJzT25seSB7CiAgICAvLyBMb2cgdGhhdCBhbm90aGVyIGNvbnRyYWN0IGhhcyBiZWVuIGNhbGxlZCBhbmQgcGFzc2VkIGEgbWVzc2FnZS4KICAgIENhbGwoYWRkcmVzc1RvTWVtYmVyX1ttc2cuc2VuZGVyXSwgX2NvbnRyYWN0QWRkcmVzcywgX21lc3NhZ2UpOwoKICAgIC8vIGNhbGwgdGhlIG1ldGhvZCBvZiB0aGUgdGFyZ2V0IGNvbnRyYWN0IGFuZCBwYXNzIGluIHRoZSBtZXNzYWdlLgogICAgU3VwcG9ydGVkQ29udHJhY3QoX2NvbnRyYWN0QWRkcmVzcykudGhlQ3liZXJNZXNzYWdlKF9tZXNzYWdlKTsKICB9CgogIC8vIFRoZSBjb250cmFjdCBpcyBub3QgcGF5YWJsZSBieSBkZXNpZ24sIGJ1dCBjb3VsZCBlbmQgdXAgd2l0aCBhIGJhbGFuY2UgYXMKICAvLyBhIHJlY2lwaWVudCBvZiBhIHNlbGZkZXN0cnVjdCAvIGNvaW5iYXNlIG9mIGEgbWluZWQgYmxvY2suCiAgZnVuY3Rpb24gZG9uYXRlRnVuZHMoKSBwdWJsaWMgbWVtYmVyc09ubHkgewogICAgLy8gTG9nIHRoZSBkb25hdGlvbiBvZiBhbnkgZnVuZHMgdGhhdCBoYXZlIG1hZGUgdGhlaXIgd2F5IGludG8gdGhlIGNvbnRyYWN0LgogICAgRnVuZHNEb25hdGVkKGFkZHJlc3NUb01lbWJlcl9bbXNnLnNlbmRlcl0sIHRoaXMuYmFsYW5jZSk7CgogICAgLy8gU2VuZCBhbGwgYXZhaWxhYmxlIGZ1bmRzIHRvIHRoZSBkb25hdGlvbiBhZGRyZXNzLgogICAgRE9OQVRJT05BRERSRVNTXy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0KCiAgLy8gV2UgYWxzbyB3YW50IHRvIGJlIGFibGUgdG8gYWNjZXNzIGFueSB0b2tlbnMgdGhhdCBhcmUgc2VudCB0byB0aGUgY29udHJhY3QuCiAgZnVuY3Rpb24gZG9uYXRlVG9rZW5zKGFkZHJlc3MgX3Rva2VuQ29udHJhY3RBZGRyZXNzKSBwdWJsaWMgbWVtYmVyc09ubHkgewogICAgLy8gTWFrZSBzdXJlIHRoYXQgd2UgZGlkbid0IHBhc3MgaW4gdGhlIGN1cnJlbnQgY29udHJhY3QgYWRkcmVzcyBieSBtaXN0YWtlLgogICAgcmVxdWlyZShfdG9rZW5Db250cmFjdEFkZHJlc3MgIT0gYWRkcmVzcyh0aGlzKSk7CgogICAgLy8gTG9nIHRoZSBkb25hdGlvbiBvZiBhbnkgdG9rZW5zIHRoYXQgaGF2ZSBiZWVuIHNlbnQgaW50byB0aGUgY29udHJhY3QuCiAgICBUb2tlbnNEb25hdGVkKGFkZHJlc3NUb01lbWJlcl9bbXNnLnNlbmRlcl0sIF90b2tlbkNvbnRyYWN0QWRkcmVzcywgRVJDMjAoX3Rva2VuQ29udHJhY3RBZGRyZXNzKS5iYWxhbmNlT2YodGhpcykpOwoKICAgIC8vIFNlbmQgYWxsIGF2YWlsYWJsZSB0b2tlbnMgYXQgdGhlIGdpdmVuIGNvbnRyYWN0IHRvIHRoZSBkb25hdGlvbiBhZGRyZXNzLgogICAgRVJDMjAoX3Rva2VuQ29udHJhY3RBZGRyZXNzKS50cmFuc2ZlcihET05BVElPTkFERFJFU1NfLCBFUkMyMChfdG9rZW5Db250cmFjdEFkZHJlc3MpLmJhbGFuY2VPZih0aGlzKSk7CiAgfQoKICBmdW5jdGlvbiBnZXRNZW1iZXJzaGlwU3RhdHVzKGFkZHJlc3MgX21lbWJlckFkZHJlc3MpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wgbWVtYmVyLCB1aW50OCBtZW1iZXJJZCkgewogICAgcmV0dXJuICgKICAgICAgYWRkcmVzc0lzTWVtYmVyX1tfbWVtYmVyQWRkcmVzc10sCiAgICAgIGFkZHJlc3NUb01lbWJlcl9bX21lbWJlckFkZHJlc3NdCiAgICApOwogIH0KCiAgZnVuY3Rpb24gZ2V0TWVtYmVySW5mb3JtYXRpb24odWludDggX21lbWJlcklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChieXRlczMyIG1lbWJlck5hbWUsIHN0cmluZyBtZW1iZXJLZXksIHVpbnQ2NCBtZW1iZXJTaW5jZSwgdWludDY0IGluYWN0aXZlU2luY2UsIGFkZHJlc3MgbWVtYmVyQWRkcmVzcykgewogICAgcmV0dXJuICgKICAgICAgbWVtYmVyc19bX21lbWJlcklkXS5uYW1lLAogICAgICBtZW1iZXJzX1tfbWVtYmVySWRdLnB1YmtleSwKICAgICAgbWVtYmVyc19bX21lbWJlcklkXS5tZW1iZXJTaW5jZSwKICAgICAgbWVtYmVyc19bX21lbWJlcklkXS5pbmFjdGl2ZVNpbmNlLAogICAgICBtZW1iZXJUb0FkZHJlc3NfW19tZW1iZXJJZF0KICAgICk7CiAgfQoKICBmdW5jdGlvbiBtYXhNZW1iZXJzKCkgcHVibGljIHB1cmUgcmV0dXJucyh1aW50MTYpIHsKICAgIHJldHVybiBNQVhNRU1CRVJTXzsKICB9CgogIGZ1bmN0aW9uIGluYWN0aXZpdHlUaW1lb3V0KCkgcHVibGljIHB1cmUgcmV0dXJucyh1aW50NjQpIHsKICAgIHJldHVybiBJTkFDVElWSVRZVElNRU9VVF87CiAgfQoKICBmdW5jdGlvbiBkb25hdGlvbkFkZHJlc3MoKSBwdWJsaWMgcHVyZSByZXR1cm5zKGFkZHJlc3MpIHsKICAgIHJldHVybiBET05BVElPTkFERFJFU1NfOwogIH0KCiAgZnVuY3Rpb24gbWVtYmVySXNBY3RpdmUodWludDggX21lbWJlcklkKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiAobWVtYmVyc19bX21lbWJlcklkXS5pbmFjdGl2ZVNpbmNlID09IDApOwogIH0KfQ=='.
	

]
