Class {
	#name : #SRT7563e06d6507dd9ee37ba9f957e0d57a6a16daa1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7563e06d6507dd9ee37ba9f957e0d57a6a16daa1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovLyBXb2xmIENyeXB0byBwb29saW5nIGNvbnRyYWN0IGZvciBOT1VTCi8vIHdyaXR0ZW4gYnkgQGlhbWRlZmluaXRlbHlhaHVtYW4KCgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIAogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBFUkMyMCB7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHt9CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9Cn0KCmNvbnRyYWN0IFByZXNhbGVQb29sIHsKCiAgLy8gU2FmZU1hdGggaXMgYSBsaWJyYXJ5IHRvIGVuc3VyZSB0aGF0IG1hdGggb3BlcmF0aW9ucyBkbyBub3QgaGF2ZSBvdmVyZmxvdyBlcnJvcnMKICAvLyBodHRwczovL3plcHBlbGluLXNvbGlkaXR5LnJlYWR0aGVkb2NzLmlvL2VuL2xhdGVzdC9zYWZlbWF0aC5odG1sCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgCiAgLy8gVGhlIGNvbnRyYWN0IGhhcyAzIHN0YWdlczoKICAvLyAxIC0gVGhlIGluaXRpYWwgc3RhdGUuIENvbnRyaWJ1dG9ycyBjYW4gZGVwb3NpdCBvciB3aXRoZHJhdyBldGggdG8gdGhlIGNvbnRyYWN0LgogIC8vIDIgLSBUaGUgb3duZXIgaGFzIGNsb3NlZCB0aGUgY29udHJhY3QgZm9yIGZ1cnRoZXIgZGVwb3NpdHMuIENvbnRyaWJ1dGluZyBhZGRyZXNzZXMgY2FuIHN0aWxsIHdpdGhkcmF3IGV0aCBmcm9tIHRoZSBjb250cmFjdC4KICAvLyAzIC0gVGhlIGV0aCBpcyBzZW50IGZyb20gdGhlIGNvbnRyYWN0IHRvIHRoZSByZWNlaXZlci4gVW51c2VkIGV0aCBjYW4gYmUgY2xhaW1lZCBieSBjb250cmlidXRvcnMgaW1tZWRpYXRlbHkuCiAgLy8gICAgIE9uY2UgdG9rZW5zIGFyZSBzZW50IHRvIHRoZSBjb250cmFjdCwgdGhlIG93bmVyIGVuYWJsZXMgd2l0aGRyYXdhbHMgYW5kIGNvbnRyaWJ1dG9ycyBjYW4gd2l0aGRyYXcgdGhlaXIgdG9rZW5zLgogIHVpbnQ4IHB1YmxpYyBjb250cmFjdFN0YWdlID0gMTsKICAKICAvLyBUaGVzZSB2YXJpYWJsZXMgYXJlIHNldCBhdCB0aGUgdGltZSBvZiBjb250cmFjdCBjcmVhdGlvbgogIC8vIHRoZSBhZGRyZXNzIHRoYXQgY3JlYXRlcyB0aGUgY29udHJhY3QKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAvLyB0aGUgbWluaW11bSBldGggYW1vdW50IChpbiB3ZWkpIHRoYXQgY2FuIGJlIHNlbnQgYnkgYSBjb250cmlidXRpbmcgYWRkcmVzcwogIHVpbnQgY29uc3RhbnQgcHVibGljIGNvbnRyaWJ1dGlvbk1pbiA9IDEwMDAwMDAwMDAwMDAwMDAwMDsKICAvLyB0aGUgbWF4aW11bSBldGggYW1vdW50IChpbiB3ZWkpIHRoYXQgY2FuIGJlIGhlbGQgYnkgdGhlIGNvbnRyYWN0CiAgdWludCBwdWJsaWMgbWF4Q29udHJhY3RCYWxhbmNlOwogIC8vIHRoZSAlIG9mIHRva2VucyBrZXB0IGJ5IHRoZSBjb250cmFjdCBvd25lcgogIHVpbnQgcHVibGljIGZlZVBjdDsKICAvLyB0aGUgYWRkcmVzc2VzIHRoYXQgdGhlIHBvb2wgbWF5IGJlIHBhaWQgb3V0IHRvCiAgYWRkcmVzc1tdIHB1YmxpYyByZWNlaXZlckFkZHJlc3NlcyA9IFsweDMxMzNiMzNlMjAzZjcwNjZlM2UwNDQ5NDUwNjAzZTdmZjZjNDcxN2YsICAvLyAxMDAwKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg0M2Q3YzU4MDdkQzA0ODBCMWIzODg0Q2M4OTFBOTFjQmE4N0ZFZjE0LCAgLy8gNzUwLTEwMDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4Yjk3N2RhOWFmOGFhMjhmY2M4NDkzZWIzMmM1NGEwODE5NzY4MGQ3MF07IC8vIDUwMC03NTAKICAvLyB0aGUgYWRkcmVzcyB0aGUgcG9vbCB3YXMgcGFpZCB0bwogIGFkZHJlc3MgcHVibGljIHBhaWRBZGRyZXNzOwogIAogIAogIC8vIFRoZXNlIHZhcmlhYmxlcyBhcmUgYWxsIGluaXRpYWxseSBibGFuayBhbmQgYXJlIHNldCBhdCBzb21lIHBvaW50IGR1cmluZyB0aGUgY29udHJhY3QKICAvLyB0aGUgYW1vdW50IG9mIGV0aCAoaW4gd2VpKSBwcmVzZW50IGluIHRoZSBjb250cmFjdCB3aGVuIGl0IHdhcyBzdWJtaXR0ZWQKICB1aW50IHB1YmxpYyBmaW5hbEJhbGFuY2U7CiAgLy8gYW4gYXJyYXkgY29udGFpbmluZyBldGggYW1vdW50cyB0byBiZSByZWZ1bmRlZCBpbiBzdGFnZSAzCiAgdWludFtdIHB1YmxpYyBldGhSZWZ1bmRBbW91bnQ7CiAgLy8gdGhlIGRlZmF1bHQgdG9rZW4gY29udHJhY3QgdG8gYmUgdXNlZCBmb3Igd2l0aGRyYXdpbmcgdG9rZW5zIGluIHN0YWdlIDMKICBhZGRyZXNzIHB1YmxpYyBhY3RpdmVUb2tlbjsKICAKICAvLyBhIGRhdGEgc3RydWN0dXJlIGZvciBob2xkaW5nIHRoZSBjb250cmlidXRpb24gYW1vdW50LCBldGggcmVmdW5kIHN0YXR1cywgYW5kIHRva2VuIHdpdGhkcmF3YWwgc3RhdHVzIGZvciBlYWNoIGFkZHJlc3MKICBzdHJ1Y3QgQ29udHJpYnV0b3IgewogICAgdWludCBldGhSZWZ1bmQ7CiAgICB1aW50IGJhbGFuY2U7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHRva2Vuc0NsYWltZWQ7CiAgfQogIC8vIGEgbWFwcGluZyB0aGF0IGhvbGRzIHRoZSBjb250cmlidXRvciBzdHJ1Y3QgZm9yIGVhY2ggYWRkcmVzcwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gQ29udHJpYnV0b3IpIGNvbnRyaWJ1dG9yTWFwOwogIAogIC8vIGEgZGF0YSBzdHJ1Y3R1cmUgZm9yIGhvbGRpbmcgaW5mb3JtYXRpb24gcmVsYXRlZCB0byB0b2tlbiB3aXRoZHJhd2Fscy4KICBzdHJ1Y3QgVG9rZW5BbGxvY2F0aW9uIHsKICAgIEVSQzIwIHRva2VuOwogICAgdWludFtdIHBjdDsKICAgIHVpbnQgYmFsYW5jZVJlbWFpbmluZzsKICB9CiAgLy8gYSBtYXBwaW5nIHRoYXQgaG9sZHMgdGhlIHRva2VuIGFsbG9jYXRpb24gc3RydWN0IGZvciBlYWNoIHRva2VuIGFkZHJlc3MKICBtYXBwaW5nIChhZGRyZXNzID0+IFRva2VuQWxsb2NhdGlvbikgZGlzdHJpYnV0aW9uTWFwOwogIAogIAogIC8vIHRoaXMgbW9kaWZpZXIgaXMgdXNlZCBmb3IgZnVuY3Rpb25zIHRoYXQgY2FuIG9ubHkgYmUgYWNjZXNzZWQgYnkgdGhlIGNvbnRyYWN0IGNyZWF0b3IKICBtb2RpZmllciBvbmx5T3duZXIgKCkgewogICAgcmVxdWlyZSAobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KICAKICAvLyB0aGlzIG1vZGlmaWVyIGlzIHVzZWQgdG8gcHJldmVudCByZS1lbnRyYW5jeSBleHBsb2l0cyBkdXJpbmcgY29udHJhY3QgPiBjb250cmFjdCBpbnRlcmFjdGlvbgogIGJvb2wgbG9ja2VkOwogIG1vZGlmaWVyIG5vUmVlbnRyYW5jeSgpIHsKICAgIHJlcXVpcmUgKCFsb2NrZWQpOwogICAgbG9ja2VkID0gdHJ1ZTsKICAgIF87CiAgICBsb2NrZWQgPSBmYWxzZTsKICB9CiAgCiAgLy8gRXZlbnRzIHRyaWdnZXJlZCB0aHJvdWdob3V0IGNvbnRyYWN0IGV4ZWN1dGlvbgogIC8vIFRoZXNlIGNhbiBiZSB3YXRjaGVkIHZpYSBnZXRoIGZpbHRlcnMgdG8ga2VlcCB1cC10by1kYXRlIHdpdGggdGhlIGNvbnRyYWN0CiAgZXZlbnQgQ29udHJpYnV0b3JCYWxhbmNlQ2hhbmdlZCAoYWRkcmVzcyBjb250cmlidXRvciwgdWludCB0b3RhbEJhbGFuY2UpOwogIGV2ZW50IFBvb2xTdWJtaXR0ZWQgKGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgYW1vdW50KTsKICBldmVudCBXaXRoZHJhd2Fsc09wZW4gKGFkZHJlc3MgdG9rZW5BZGRyKTsKICBldmVudCBUb2tlbnNXaXRoZHJhd24gKGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgYW1vdW50KTsKICBldmVudCBFdGhSZWZ1bmRSZWNlaXZlZCAoYWRkcmVzcyBzZW5kZXIsIHVpbnQgYW1vdW50KTsKICBldmVudCBFdGhSZWZ1bmRlZCAoYWRkcmVzcyByZWNlaXZlciwgdWludCBhbW91bnQpOwogIGV2ZW50IEVSQzIyM1JlY2VpdmVkIChhZGRyZXNzIHRva2VuLCB1aW50IHZhbHVlKTsKICAgCiAgLy8gVGhlc2UgYXJlIGludGVybmFsIGZ1bmN0aW9ucyB1c2VkIGZvciBjYWxjdWxhdGluZyBmZWVzLCBldGggYW5kIHRva2VuIGFsbG9jYXRpb25zIGFzICUKICAvLyByZXR1cm5zIGEgdmFsdWUgYXMgYSAlIGFjY3VyYXRlIHRvIDIwIGRlY2ltYWwgcG9pbnRzCiAgZnVuY3Rpb24gX3RvUGN0ICh1aW50IG51bWVyYXRvciwgdWludCBkZW5vbWluYXRvciApIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIG51bWVyYXRvci5tdWwoMTAgKiogMjApIC8gZGVub21pbmF0b3I7CiAgfQogIAogIC8vIHJldHVybnMgJSBvZiBhbnkgbnVtYmVyLCB3aGVyZSAlIGdpdmVuIHdhcyBnZW5lcmF0ZWQgd2l0aCB0b1BjdAogIGZ1bmN0aW9uIF9hcHBseVBjdCAodWludCBudW1lcmF0b3IsIHVpbnQgcGN0KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiBudW1lcmF0b3IubXVsKHBjdCkgLyAoMTAgKiogMjApOwogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhdCB0aGUgdGltZSBvZiBjb250cmFjdCBjcmVhdGlvbiwKICAvLyBpdCBzZXRzIHRoZSBpbml0aWFsIHZhcmlhYmxlcyBhbmQgdGhlIGNvbnRyYWN0IG93bmVyLgogIGZ1bmN0aW9uIFByZXNhbGVQb29sKHVpbnQgY29udHJhY3RNYXhJbldlaSwgdWludCBmZWUpIHB1YmxpYyB7CiAgICByZXF1aXJlIChmZWUgPCAxMDApOwogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgbWF4Q29udHJhY3RCYWxhbmNlID0gY29udHJhY3RNYXhJbldlaTsKICAgIGZlZVBjdCA9IF90b1BjdChmZWUsMTAwKTsKICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbmV2ZXIgZXRoIGlzIHNlbnQgaW50byB0aGUgY29udHJhY3QuCiAgLy8gVGhlIGFtb3VudCBzZW50IGlzIGFkZGVkIHRvIHRoZSBiYWxhbmNlIGluIHRoZSBDb250cmlidXRvciBzdHJ1Y3QgYXNzb2NpYXRlZCB3aXRoIHRoZSBzZW5kaW5nIGFkZHJlc3MuCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSBwdWJsaWMgewogICAgaWYgKGNvbnRyYWN0U3RhZ2UgPT0gMSkgewogICAgICBfZXRoRGVwb3NpdCgpOwogICAgfSBlbHNlIGlmIChjb250cmFjdFN0YWdlID09IDMpIHsKICAgICAgX2V0aFJlZnVuZCgpOwogICAgfSBlbHNlIHJldmVydCgpOwogIH0KICAKICAvLyBJbnRlcm5hbCBmdW5jdGlvbiBmb3IgaGFuZGxpbmcgZXRoIGRlcG9zaXRzIGR1cmluZyBjb250cmFjdCBzdGFnZSBvbmUuCiAgZnVuY3Rpb24gX2V0aERlcG9zaXQgKCkgaW50ZXJuYWwgewogICAgYXNzZXJ0IChjb250cmFjdFN0YWdlID09IDEpOyAgCiAgICB1aW50IHNpemU7CiAgICBhZGRyZXNzIGFkZHIgPSBtc2cuc2VuZGVyOwogICAgYXNzZW1ibHkgeyBzaXplIDo9IGV4dGNvZGVzaXplKGFkZHIpIH0KICAgIHJlcXVpcmUgKHNpemUgPT0gMCk7CiAgICByZXF1aXJlICh0aGlzLmJhbGFuY2UgPD0gbWF4Q29udHJhY3RCYWxhbmNlKTsKICAgIHZhciBjID0gY29udHJpYnV0b3JNYXBbbXNnLnNlbmRlcl07CiAgICB1aW50IG5ld0JhbGFuY2UgPSBjLmJhbGFuY2UuYWRkKG1zZy52YWx1ZSk7CiAgICByZXF1aXJlIChuZXdCYWxhbmNlID49IGNvbnRyaWJ1dGlvbk1pbik7CiAgICBjLmJhbGFuY2UgPSBuZXdCYWxhbmNlOwogICAgQ29udHJpYnV0b3JCYWxhbmNlQ2hhbmdlZChtc2cuc2VuZGVyLCBuZXdCYWxhbmNlKTsKICB9CiAgCiAgLy8gSW50ZXJuYWwgZnVuY3Rpb24gZm9yIGhhbmRsaW5nIGV0aCByZWZ1bmRzIGR1cmluZyBzdGFnZSB0aHJlZS4KICBmdW5jdGlvbiBfZXRoUmVmdW5kICgpIGludGVybmFsIHsKICAgIGFzc2VydCAoY29udHJhY3RTdGFnZSA9PSAzKTsKICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSBwYWlkQWRkcmVzcyk7CiAgICByZXF1aXJlIChtc2cudmFsdWUgPj0gY29udHJpYnV0aW9uTWluKTsKICAgIGV0aFJlZnVuZEFtb3VudC5wdXNoKG1zZy52YWx1ZSk7CiAgICBFdGhSZWZ1bmRSZWNlaXZlZChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB0byB3aXRoZHJhdyBldGggb3IgdG9rZW5zIGZyb20gdGhlIGNvbnRyYWN0LiBJdCBjYW4gb25seSBiZSBjYWxsZWQgYnkgYWRkcmVzc2VzIHRoYXQgc2hvdyBhIGJhbGFuY2UgZ3JlYXRlciB0aGFuIDAuCiAgLy8gSWYgY2FsbGVkIGR1cmluZyBzdGFnZXMgb25lIG9yIHR3bywgdGhlIGZ1bGwgZXRoIGJhbGFuY2UgZGVwb3NpdGVkIGludG8gdGhlIGNvbnRyYWN0IGlzIHJldHVybmVkIGFuZCB0aGUgY29udHJpYnV0b3IncyBiYWxhbmNlIHJlc2V0IHRvIDAuCiAgLy8gSWYgY2FsbGVkIGR1cmluZyBzdGFnZSB0aHJlZSwgdGhlIGNvbnRyaWJ1dG9yJ3MgdW51c2VkIGV0aCB3aWxsIGJlIHJldHVybmVkLCBhcyB3ZWxsIGFzIGFueSBhdmFpbGFibGUgdG9rZW5zLgogIC8vIFRoZSB0b2tlbiBhZGRyZXNzIG1heSBiZSBwcm92aWRlZCBvcHRpb25hbGx5IHRvIHdpdGhkcmF3IHRva2VucyB0aGF0IGFyZSBub3QgY3VycmVudGx5IHRoZSBkZWZhdWx0IHRva2VuIChhaXJkcm9wcykuCiAgZnVuY3Rpb24gd2l0aGRyYXcgKGFkZHJlc3MgdG9rZW5BZGRyKSBwdWJsaWMgewogICAgdmFyIGMgPSBjb250cmlidXRvck1hcFttc2cuc2VuZGVyXTsKICAgIHJlcXVpcmUgKGMuYmFsYW5jZSA+IDApOwogICAgaWYgKGNvbnRyYWN0U3RhZ2UgPCAzKSB7CiAgICAgIHVpbnQgYW1vdW50VG9UcmFuc2ZlciA9IGMuYmFsYW5jZTsKICAgICAgYy5iYWxhbmNlID0gMDsKICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnRUb1RyYW5zZmVyKTsKICAgICAgQ29udHJpYnV0b3JCYWxhbmNlQ2hhbmdlZChtc2cuc2VuZGVyLCAwKTsKICAgIH0gZWxzZSB7CiAgICAgIF93aXRoZHJhdyhtc2cuc2VuZGVyLCB0b2tlbkFkZHIpOwogICAgfSAgCiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gYWxsb3dzIHRoZSBjb250cmFjdCBvd25lciB0byBmb3JjZSBhIHdpdGhkcmF3YWwgdG8gYW55IGNvbnRyaWJ1dG9yLgogIGZ1bmN0aW9uIHdpdGhkcmF3Rm9yIChhZGRyZXNzIGNvbnRyaWJ1dG9yLCBhZGRyZXNzIHRva2VuQWRkcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlID09IDMpOwogICAgcmVxdWlyZSAoY29udHJpYnV0b3JNYXBbY29udHJpYnV0b3JdLmJhbGFuY2UgPiAwKTsKICAgIF93aXRoZHJhdyhjb250cmlidXRvciwgdG9rZW5BZGRyKTsKICB9CiAgCiAgLy8gVGhpcyBpbnRlcm5hbCBmdW5jdGlvbiBoYW5kbGVzIHdpdGhkcmF3YWxzIGR1cmluZyBzdGFnZSB0aHJlZS4KICAvLyBUaGUgYXNzb2NpYXRlZCBldmVudHMgd2lsbCBmaXJlIHRvIG5vdGlmeSB3aGVuIGEgcmVmdW5kIG9yIHRva2VuIGFsbG9jYXRpb24gaXMgY2xhaW1lZC4KICBmdW5jdGlvbiBfd2l0aGRyYXcgKGFkZHJlc3MgcmVjZWl2ZXIsIGFkZHJlc3MgdG9rZW5BZGRyKSBpbnRlcm5hbCB7CiAgICBhc3NlcnQgKGNvbnRyYWN0U3RhZ2UgPT0gMyk7CiAgICB2YXIgYyA9IGNvbnRyaWJ1dG9yTWFwW3JlY2VpdmVyXTsKICAgIGlmICh0b2tlbkFkZHIgPT0gMHgwMCkgewogICAgICB0b2tlbkFkZHIgPSBhY3RpdmVUb2tlbjsKICAgIH0KICAgIHZhciBkID0gZGlzdHJpYnV0aW9uTWFwW3Rva2VuQWRkcl07CiAgICByZXF1aXJlICggZXRoUmVmdW5kQW1vdW50Lmxlbmd0aCA+IGMuZXRoUmVmdW5kIHx8IGQucGN0Lmxlbmd0aCA+IGMudG9rZW5zQ2xhaW1lZFt0b2tlbkFkZHJdICk7CiAgICBpZiAoZXRoUmVmdW5kQW1vdW50Lmxlbmd0aCA+IGMuZXRoUmVmdW5kKSB7CiAgICAgIHVpbnQgcGN0ID0gX3RvUGN0KGMuYmFsYW5jZSwgZmluYWxCYWxhbmNlKTsKICAgICAgdWludCBldGhBbW91bnQgPSAwOwogICAgICBmb3IgKHVpbnQgaSA9IGMuZXRoUmVmdW5kOyBpIDwgZXRoUmVmdW5kQW1vdW50Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZXRoQW1vdW50ID0gZXRoQW1vdW50LmFkZChfYXBwbHlQY3QoZXRoUmVmdW5kQW1vdW50W2ldLCBwY3QpKTsKICAgICAgfQogICAgICBjLmV0aFJlZnVuZCA9IGV0aFJlZnVuZEFtb3VudC5sZW5ndGg7CiAgICAgIGlmIChldGhBbW91bnQgPiAwKSB7CiAgICAgICAgcmVjZWl2ZXIudHJhbnNmZXIoZXRoQW1vdW50KTsKICAgICAgICBFdGhSZWZ1bmRlZChyZWNlaXZlciwgZXRoQW1vdW50KTsKICAgICAgfQogICAgfQogICAgaWYgKGQucGN0Lmxlbmd0aCA+IGMudG9rZW5zQ2xhaW1lZFt0b2tlbkFkZHJdKSB7CiAgICAgIHVpbnQgdG9rZW5BbW91bnQgPSAwOwogICAgICBmb3IgKGkgPSBjLnRva2Vuc0NsYWltZWRbdG9rZW5BZGRyXTsgaSA8IGQucGN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdG9rZW5BbW91bnQgPSB0b2tlbkFtb3VudC5hZGQoX2FwcGx5UGN0KGMuYmFsYW5jZSwgZC5wY3RbaV0pKTsKICAgICAgfQogICAgICBjLnRva2Vuc0NsYWltZWRbdG9rZW5BZGRyXSA9IGQucGN0Lmxlbmd0aDsKICAgICAgaWYgKHRva2VuQW1vdW50ID4gMCkgewogICAgICAgIHJlcXVpcmUgKGQudG9rZW4udHJhbnNmZXIocmVjZWl2ZXIsIHRva2VuQW1vdW50KSk7CiAgICAgICAgZC5iYWxhbmNlUmVtYWluaW5nID0gZC5iYWxhbmNlUmVtYWluaW5nLnN1Yih0b2tlbkFtb3VudCk7CiAgICAgICAgVG9rZW5zV2l0aGRyYXduKHJlY2VpdmVyLCB0b2tlbkFtb3VudCk7CiAgICAgIH0gIAogICAgfQogICAgCiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBkdXJpbmcgc3RhZ2VzIG9uZSBvciB0d28gdG8gbW9kaWZ5IHRoZSBtYXhpbXVtIGJhbGFuY2Ugb2YgdGhlIGNvbnRyYWN0LgogIC8vIEl0IGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXIuIFRoZSBhbW91bnQgY2Fubm90IGJlIHNldCB0byBsb3dlciB0aGFuIHRoZSBjdXJyZW50IGJhbGFuY2Ugb2YgdGhlIGNvbnRyYWN0LgogIGZ1bmN0aW9uIG1vZGlmeU1heENvbnRyYWN0QmFsYW5jZSAodWludCBhbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZSAoY29udHJhY3RTdGFnZSA8IDMpOwogICAgcmVxdWlyZSAoYW1vdW50ID49IGNvbnRyaWJ1dGlvbk1pbik7CiAgICByZXF1aXJlIChhbW91bnQgPj0gdGhpcy5iYWxhbmNlKTsKICAgIG1heENvbnRyYWN0QmFsYW5jZSA9IGFtb3VudDsKICB9CiAgCiAgLy8gVGhpcyBjYWxsYWJsZSBmdW5jdGlvbiByZXR1cm5zIHRoZSB0b3RhbCBwb29sIGNhcCwgY3VycmVudCBiYWxhbmNlIGFuZCByZW1haW5pbmcgYmFsYW5jZSB0byBiZSBmaWxsZWQuCiAgZnVuY3Rpb24gY2hlY2tQb29sQmFsYW5jZSAoKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50IHBvb2xDYXAsIHVpbnQgYmFsYW5jZSwgdWludCByZW1haW5pbmcpIHsKICAgIGlmIChjb250cmFjdFN0YWdlID09IDEpIHsKICAgICAgcmVtYWluaW5nID0gbWF4Q29udHJhY3RCYWxhbmNlLnN1Yih0aGlzLmJhbGFuY2UpOwogICAgfSBlbHNlIHsKICAgICAgcmVtYWluaW5nID0gMDsKICAgIH0KICAgIHJldHVybiAobWF4Q29udHJhY3RCYWxhbmNlLHRoaXMuYmFsYW5jZSxyZW1haW5pbmcpOwogIH0KICAKICAvLyBUaGlzIGNhbGxhYmxlIGZ1bmN0aW9uIHJldHVybnMgdGhlIGJhbGFuY2UsIGNvbnRyaWJ1dGlvbiBjYXAsIGFuZCByZW1haW5pbmcgYXZhaWxhYmxlIGJhbGFuY2Ugb2YgYW55IGNvbnRyaWJ1dG9yLgogIGZ1bmN0aW9uIGNoZWNrQ29udHJpYnV0b3JCYWxhbmNlIChhZGRyZXNzIGFkZHIpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQgYmFsYW5jZSwgdWludCBjYXAsIHVpbnQgcmVtYWluaW5nKSB7CiAgICB2YXIgYyA9IGNvbnRyaWJ1dG9yTWFwW2FkZHJdOwogICAgaWYgKGNvbnRyYWN0U3RhZ2UgPT0gMSkgewogICAgICByZW1haW5pbmcgPSBtYXhDb250cmFjdEJhbGFuY2Uuc3ViKHRoaXMuYmFsYW5jZSk7CiAgICB9IGVsc2UgewogICAgICByZW1haW5pbmcgPSAwOwogICAgfQogICAgcmV0dXJuIChjLmJhbGFuY2UsIG1heENvbnRyYWN0QmFsYW5jZSwgcmVtYWluaW5nKTsKICB9CiAgCiAgLy8gVGhpcyBjYWxsYWJsZSBmdW5jdGlvbiByZXR1cm5zIHRoZSB0b2tlbiBiYWxhbmNlIHRoYXQgYSBjb250cmlidXRvciBjYW4gY3VycmVudGx5IGNsYWltLgogIGZ1bmN0aW9uIGNoZWNrQXZhaWxhYmxlVG9rZW5zIChhZGRyZXNzIGFkZHIsIGFkZHJlc3MgdG9rZW5BZGRyKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50IHRva2VuQW1vdW50KSB7CiAgICB2YXIgYyA9IGNvbnRyaWJ1dG9yTWFwW2FkZHJdOwogICAgdmFyIGQgPSBkaXN0cmlidXRpb25NYXBbdG9rZW5BZGRyXTsKICAgIGZvciAodWludCBpID0gYy50b2tlbnNDbGFpbWVkW3Rva2VuQWRkcl07IGkgPCBkLnBjdC5sZW5ndGg7IGkrKykgewogICAgICB0b2tlbkFtb3VudCA9IHRva2VuQW1vdW50LmFkZChfYXBwbHlQY3QoYy5iYWxhbmNlLCBkLnBjdFtpXSkpOwogICAgfQogICAgcmV0dXJuIHRva2VuQW1vdW50OwogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIGNsb3NlcyBmdXJ0aGVyIGNvbnRyaWJ1dGlvbnMgdG8gdGhlIGNvbnRyYWN0LCBhZHZhbmNpbmcgaXQgdG8gc3RhZ2UgdHdvLgogIC8vIEl0IGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXIuICBBZnRlciB0aGlzIGNhbGwgaGFzIGJlZW4gbWFkZSwgY29udHJpYnV0aW5nIGFkZHJlc3NlcwogIC8vIGNhbiBzdGlsbCByZW1vdmUgdGhlaXIgZXRoIGZyb20gdGhlIGNvbnRyYWN0IGJ1dCBjYW5ub3QgY29udHJpYnV0ZSBhbnkgbW9yZS4KICBmdW5jdGlvbiBjbG9zZUNvbnRyaWJ1dGlvbnMgKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlID09IDEpOwogICAgY29udHJhY3RTdGFnZSA9IDI7CiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gcmVvcGVucyB0aGUgY29udHJhY3QgdG8gY29udHJpYnV0aW9ucywgcmV0dXJuaW5nIGl0IHRvIHN0YWdlIG9uZS4KICAvLyBJdCBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIG93bmVyIGR1cmluZyBzdGFnZSB0d28uCiAgZnVuY3Rpb24gcmVvcGVuQ29udHJpYnV0aW9ucyAoKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUgKGNvbnRyYWN0U3RhZ2UgPT0gMik7CiAgICBjb250cmFjdFN0YWdlID0gMTsKICB9CgogIC8vIFRoaXMgZnVuY3Rpb24gc2VuZHMgdGhlIHBvb2xlZCBldGggdG8gdGhlIHJlY2VpdmluZyBhZGRyZXNzLCBjYWxjdWxhdGVzIHRoZSAlIG9mIHVudXNlZCBldGggdG8gYmUgcmV0dXJuZWQsCiAgLy8gYW5kIGFkdmFuY2VzIHRoZSBjb250cmFjdCB0byBzdGFnZSB0aHJlZS4gSXQgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBjb250cmFjdCBvd25lciBkdXJpbmcgc3RhZ2VzIG9uZSBvciB0d28uCiAgLy8gVGhlIGFtb3VudCB0byBzZW5kIChnaXZlbiBpbiB3ZWkpIG11c3QgYmUgc3BlY2lmaWVkIGR1cmluZyB0aGUgY2FsbC4gQXMgdGhpcyBmdW5jdGlvbiBjYW4gb25seSBiZSBleGVjdXRlZCBvbmNlLAogIC8vIGl0IGlzIFZFUlkgSU1QT1JUQU5UIG5vdCB0byBnZXQgdGhlIGFtb3VudCB3cm9uZy4KICBmdW5jdGlvbiBzdWJtaXRQb29sICh1aW50IGFtb3VudEluV2VpKSBwdWJsaWMgb25seU93bmVyIG5vUmVlbnRyYW5jeSB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlIDwgMyk7CiAgICByZXF1aXJlIChjb250cmlidXRpb25NaW4gPD0gYW1vdW50SW5XZWkgJiYgYW1vdW50SW5XZWkgPD0gdGhpcy5iYWxhbmNlKTsKICAgIGZpbmFsQmFsYW5jZSA9IHRoaXMuYmFsYW5jZTsKICAgIGlmIChhbW91bnRJbldlaSA+PSAxMDAwIGV0aGVyKSBwYWlkQWRkcmVzcyA9IHJlY2VpdmVyQWRkcmVzc2VzWzBdOwogICAgZWxzZSBpZiAoYW1vdW50SW5XZWkgPj0gNzUwIGV0aGVyKSBwYWlkQWRkcmVzcyA9IHJlY2VpdmVyQWRkcmVzc2VzWzFdOwogICAgZWxzZSBwYWlkQWRkcmVzcyA9IHJlY2VpdmVyQWRkcmVzc2VzWzJdOwogICAgcmVxdWlyZSAocGFpZEFkZHJlc3MuY2FsbC52YWx1ZShhbW91bnRJbldlaSkuZ2FzKG1zZy5nYXMuc3ViKDUwMDApKSgpKTsKICAgIGV0aFJlZnVuZEFtb3VudC5wdXNoKHRoaXMuYmFsYW5jZSk7CiAgICBjb250cmFjdFN0YWdlID0gMzsKICAgIFBvb2xTdWJtaXR0ZWQocGFpZEFkZHJlc3MsIGFtb3VudEluV2VpKTsKICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiBvcGVucyB0aGUgY29udHJhY3QgdXAgZm9yIHRva2VuIHdpdGhkcmF3YWxzLgogIC8vIEl0IGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXIgZHVyaW5nIHN0YWdlIDMuICBUaGUgb3duZXIgc3BlY2lmaWVzIHRoZSBhZGRyZXNzIG9mIGFuIEVSQzIwIHRva2VuCiAgLy8gY29udHJhY3QgdGhhdCB0aGlzIGNvbnRyYWN0IGhhcyBhIGJhbGFuY2UgaW4sIGFuZCBvcHRpb25hbGx5IGEgYm9vbCB0byBwcmV2ZW50IHRoaXMgdG9rZW4gZnJvbSBiZWluZwogIC8vIHRoZSBkZWZhdWx0IHdpdGhkcmF3YWwgKGluIHRoZSBldmVudCBvZiBhbiBhaXJkcm9wLCBmb3IgZXhhbXBsZSkuCiAgZnVuY3Rpb24gZW5hYmxlVG9rZW5XaXRoZHJhd2FscyAoYWRkcmVzcyB0b2tlbkFkZHIsIGJvb2wgbm90RGVmYXVsdCkgcHVibGljIG9ubHlPd25lciBub1JlZW50cmFuY3kgewogICAgcmVxdWlyZSAoY29udHJhY3RTdGFnZSA9PSAzKTsKICAgIGlmIChub3REZWZhdWx0KSB7CiAgICAgIHJlcXVpcmUgKGFjdGl2ZVRva2VuICE9IDB4MDApOwogICAgfSBlbHNlIHsKICAgICAgYWN0aXZlVG9rZW4gPSB0b2tlbkFkZHI7CiAgICB9CiAgICB2YXIgZCA9IGRpc3RyaWJ1dGlvbk1hcFt0b2tlbkFkZHJdOyAgICAKICAgIGlmIChkLnBjdC5sZW5ndGggPT0gMCkgZC50b2tlbiA9IEVSQzIwKHRva2VuQWRkcik7CiAgICB1aW50IGFtb3VudCA9IGQudG9rZW4uYmFsYW5jZU9mKHRoaXMpLnN1YihkLmJhbGFuY2VSZW1haW5pbmcpOwogICAgcmVxdWlyZSAoYW1vdW50ID4gMCk7CiAgICBpZiAoZmVlUGN0ID4gMCkgewogICAgICByZXF1aXJlIChkLnRva2VuLnRyYW5zZmVyKG93bmVyLF9hcHBseVBjdChhbW91bnQsIGZlZVBjdCkpKTsKICAgIH0KICAgIGFtb3VudCA9IGQudG9rZW4uYmFsYW5jZU9mKHRoaXMpLnN1YihkLmJhbGFuY2VSZW1haW5pbmcpOwogICAgZC5iYWxhbmNlUmVtYWluaW5nID0gZC50b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICBkLnBjdC5wdXNoKF90b1BjdChhbW91bnQsIGZpbmFsQmFsYW5jZSkpOwogICAgV2l0aGRyYXdhbHNPcGVuKHRva2VuQWRkcik7CiAgfQogIAogIC8vIFRoaXMgaXMgYSBzdGFuZGFyZCBmdW5jdGlvbiByZXF1aXJlZCBmb3IgRVJDMjIzIGNvbXBhdGliaWxpdHkuCiAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayAoYWRkcmVzcyBmcm9tLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSBwdWJsaWMgewogICAgRVJDMjIzUmVjZWl2ZWQoZnJvbSwgdmFsdWUpOwogIH0KICAKfQ=='.
	

]
