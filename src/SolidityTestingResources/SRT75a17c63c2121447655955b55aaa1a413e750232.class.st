Class {
	#name : #SRT75a17c63c2121447655955b55aaa1a413e750232,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT75a17c63c2121447655955b55aaa1a413e750232 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcwogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAvKioKICAqIEBkZXYgVHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZAogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwoKICAgIHVpbnQyNTYgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICoKICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlciBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBNaW50YWJsZSB0b2tlbgogKiBAZGV2IFNpbXBsZSBFUkMyMCBUb2tlbiBleGFtcGxlLCB3aXRoIG1pbnRhYmxlIHRva2VuIGNyZWF0aW9uCiAqIEBkZXYgSXNzdWU6ICogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9pc3N1ZXMvMTIwCiAqIEJhc2VkIG9uIGNvZGUgYnkgVG9rZW5NYXJrZXROZXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9Ub2tlbk1hcmtldE5ldC9pY28vYmxvYi9tYXN0ZXIvY29udHJhY3RzL01pbnRhYmxlVG9rZW4uc29sCiAqLwoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBtaW50IHRva2VucwogICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIG1pbnRlZCB0b2tlbnMuCiAgICogQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gbWludC4KICAgKiBAcmV0dXJuIEEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyIGNhbk1pbnQgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgVHJhbnNmZXIoMHgwLCBfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIHN0b3AgbWludGluZyBuZXcgdG9rZW5zLgogICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICBNaW50RmluaXNoZWQoKTsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9Cn0KCi8qKgogKiBAdGl0bGUgQ3J5ZGVyIHRva2VuIGNvbnRyYWN0CiAqIEBkZXYgVGhlIG1pbnRpbmcgZnVuY3Rpb25hbGl0eSBpcyByZWltcGxlbWVudGVkLCBhcyBvcHBvc2VkIHRvIGluaGVyaXRlZAogKiBmcm9tIE1pbnRhYmxlVG9rZW4sIHRvIGFsbG93IGZvciBnaXZpbmcgcmlnaHQgdG8gbWludCB0byBhcmJpdGVyeSBhY2NvdW50LgogKi8KY29udHJhY3QgQ3J5ZGVyVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSwgUGF1c2FibGUgewogIC8vIERpc2FibGUgdHJhbnNmZXIgdW5sZXNzIGV4cGxpY2l0bHkgZW5hYmxlZAogIGZ1bmN0aW9uIENyeWRlclRva2VuKCkgcHVibGljIHsgcGF1c2VkID0gdHJ1ZTsgfQoKICAvLyBUaGUgYWRkcmVzcyBvZiB0aGUgY29udHJhY3Qgb3IgdXNlciB0aGF0IGlzIGFsbG93ZWQgdG8gbWludCB0b2tlbnMuCiAgYWRkcmVzcyBwdWJsaWMgbWludGVyOwogIAogIC8qKgogICAqIEBkZXYgVmFyaWFibGVzCiAgICoKICAgKiBAcHVibGljIEZSRUVaRV9USU1FIHVpbnQgdGhlIHRpbWUgd2hlbiB0ZWFtIHRva2VucyBjYW4gYmUgdHJhbnNmZXJlZAogICAqIEBwdWJsaWMgYm91bnR5IHRoZSBhZGRyZXNzIG9mIGJvdW50eSBtYW5hZ2VyIAogICovCiAgdWludCBwdWJsaWMgRlJFRVpFX1RJTUUgPSAxNTUwNjgyMDAwOwogIGFkZHJlc3MgcHVibGljIGJvdW50eSA9IDB4YTI1OEViMTgxN2FBMTIyYWNCYTRBZjY2QTdBMDY0QUU2RTEwNTUyQTsKCiAgLyoqCiAgICogQGRldiBTZXQgdGhlIGFkZHJlc3Mgb2YgdGhlIG1pbnRlcgogICAqIEBwYXJhbSBfbWludGVyIGFkZHJlc3MgdG8gYmUgc2V0IGFzIG1pbnRlci4KICAgKgogICAqIE5vdGU6IFdlIGFsc28gbmVlZCB0byBpbXBsZW1lbnQgIm1pbnQiIG1ldGhvZC4KICAgKi8KICBmdW5jdGlvbiBzZXRNaW50ZXIoYWRkcmVzcyBfbWludGVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgbWludGVyID0gX21pbnRlcjsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNlaXZlIHRoZSBtaW50ZWQgdG9rZW5zLgogICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIG1pbnQuCiAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbWludGVyKTsKCiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKCiAgICBUcmFuc2ZlcigweDAsIF90bywgX2Ftb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgYWNjb3VudCBmb3IgcGF1c2VkL3VucGF1c2VkLXN0YXRlLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIC8vIENoZWNrIGZvciBwYXVzZWQgd2l0aCBhbiBleGNlcHRpb24gb2YgYm91bnR5IG1hbmFnZXIgYW5kIGZyZWV6ZSB0ZWFtIHRva2VucyBmb3IgMSB5ZWFyCiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYm91bnR5IHx8ICghcGF1c2VkICYmIG1zZy5zZW5kZXIgIT0gb3duZXIpIHx8ICghcGF1c2VkICYmIG1zZy5zZW5kZXIgPT0gb3duZXIgJiYgbm93ID4gRlJFRVpFX1RJTUUpKTsKICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgLy8gQ2hlY2sgZm9yIHBhdXNlZCB3aXRoIGFuIGV4Y2VwdGlvbiBvZiBib3VudHkgbWFuYWdlciBhbmQgZnJlZXplIHRlYW0gdG9rZW5zIGZvciAxIHllYXIgd2l0aCBhbiBhZGRpdGlvbmFsIF9mcm9tIGNoZWNrCiAgICByZXF1aXJlKChtc2cuc2VuZGVyID09IGJvdW50eSAmJiBfZnJvbSA9PSBib3VudHkpIHx8ICghcGF1c2VkICYmIG1zZy5zZW5kZXIgIT0gb3duZXIgJiYgX2Zyb20gIT0gb3duZXIpIHx8ICghcGF1c2VkICYmIG1zZy5zZW5kZXIgPT0gb3duZXIgJiYgbm93ID4gRlJFRVpFX1RJTUUpKTsKICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgVG9rZW4gbWV0YS1pbmZvcm1hdGlvbgogICAqIEBwYXJhbSBuYW1lIG9mIHRoZSB0b2tlbiBhcyBpdCdzIHNob3duIHRvIHVzZXIKICAgKiBAcGFyYW0gc3ltYm9sIG9mIHRoZSB0b2tlbgogICAqIEBwYXJhbSBkZWNpbWFscyBudW1iZXIKICAgKiBOdW1iZXIgb2YgaW5kaXZpc2libGUgdG9rZW5zIHRoYXQgbWFrZSB1cCAxIENSWURFUiA9IDEwXntkZWNpbWFsc30KICAgKi8KICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiQ3J5ZGVyIFRva2VuIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJDUllERVIiOwogIHVpbnQ4ICBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKfQoKLyoqCiAqIEB0aXRsZSBDcnlkZXIgY3Jvd2RzYWxlIGNvbnRyYWN0CiAqIEBkZXYgR292ZXJuIHRoZSBzYWxlOgogKiAgIDEpIFRha2luZyBwbGFjZSBpbiBhIHNwZWNpZmljIGxpbWl0ZWQgcGVyaW9kIG9mIHRpbWUuCiAqICAgMikgSGF2aW5nIEhBUkRDQVAgdmFsdWUgc2V0IC0tLSBhIG51bWJlciBvZiBzb2xkIHRva2VucyB0byBlbmQgdGhlIHNhbGUKICoKICogT3duZXIgY2FuIGNoYW5nZSB0aW1lIHBhcmFtZXRlcnMgYXQgYW55IHRpbWUgLS0tIGp1c3QgaW4gY2FzZSBvZiBlbWVyZ2VuY3kKICogT3duZXIgY2FuIGNoYW5nZSBtaW50ZXIgYXQgYW55IHRpbWUgLS0tIGp1c3QgaW4gY2FzZSBvZiBlbWVyZ2VuY3kKICoKICogISEhIFRoZXJlIGlzIG5vIHdheSB0byBjaGFuZ2UgdGhlIGFkZHJlc3Mgb2YgdGhlIHdhbGxldCBvciBib3VudHkgbWFuYWdlciAhISEKICovCmNvbnRyYWN0IENyeWRlckNyb3dkc2FsZSBpcyBPd25hYmxlIHsKICAgIC8vIFVzZSBTYWZlTWF0aCBsaWJyYXJ5IHRvIHByb3ZpZGUgbWV0aG9kcyBmb3IgdWludDI1Ni10eXBlIHZhcnMuCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICAvLyBUaGUgaGFyZGNvZGVkIGFkZHJlc3Mgb2Ygd2FsbGV0CiAgICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CgogICAgLy8gVGhlIGFkZHJlc3Mgb2YgcHJlc2FsZSB0b2tlbgogICAgQ3J5ZGVyVG9rZW4gcHVibGljIHByZXNhbGVUb2tlbjsKICAgIAogICAgLy8gVGhlIGFkZHJlc3Mgb2Ygc2FsZSB0b2tlbgogICAgQ3J5ZGVyVG9rZW4gcHVibGljIHRva2VuOwogICAgCiAgICAvLyBCb3VudHkgbXVzdCBiZSBhbGxvY2F0ZWQgb25seSBvbmNlCiAgICBib29sIHB1YmxpYyBpc0JvdW50eUFsbG9jYXRlZCA9IGZhbHNlOwogICAgCiAgICAvLyBSZXF1ZXN0ZWQgdG9rZW5zIGFycmF5CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgdG9rZW5SZXF1ZXN0czsKCiAgICAvKioKICAgICAqIEBkZXYgVmFyaWFibGVzCiAgICAgKgogICAgICogQHB1YmxpYyBTVEFSVF9USU1FIHVpbnQgdGhlIHRpbWUgb2YgdGhlIHN0YXJ0IG9mIHRoZSBzYWxlCiAgICAgKiBAcHVibGljIENMT1NFX1RJTUUgdWludCB0aGUgdGltZSBvZiB0aGUgZW5kIG9mIHRoZSBzYWxlCiAgICAgKiBAcHVibGljIEhBUkRDQVAgdWludDI1NiBpZiBASEFSRENBUCBpcyByZWFjaGVkLCBzYWxlIHN0b3BzCiAgICAgKiBAcHVibGljIGV4Y2hhbmdlUmF0ZSB0aGUgYW1vdW50IG9mIGluZGl2aXNpYmxlIHF1YW50aXRpZXMgKD0xMF4xOCBDUllERVIpIGdpdmVuIGZvciAxIHdlaQogICAgICogQHB1YmxpYyBib3VudHkgdGhlIGFkZHJlc3Mgb2YgYm91bnR5IG1hbmFnZXIgCiAgICAgKi8KICAgIHVpbnQgcHVibGljIFNUQVJUX1RJTUUgPSAxNTE2NDY3NjAwOwogICAgdWludCBwdWJsaWMgQ0xPU0VfVElNRSA9IDE1MTkxNDYwMDA7CiAgICB1aW50MjU2IHB1YmxpYyBIQVJEQ0FQID0gNDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgdWludDI1NiBwdWJsaWMgZXhjaGFuZ2VSYXRlID0gMzAwMDsKICAgIGFkZHJlc3MgcHVibGljIGJvdW50eSA9IDB4YTI1OEViMTgxN2FBMTIyYWNCYTRBZjY2QTdBMDY0QUU2RTEwNTUyQTsKCiAgICAvKioKICAgICAqIEZhbGxiYWNrIGZ1bmN0aW9uCiAgICAgKiBAZGV2IFRoZSBjb250cmFjdHMgYXJlIHByZXZlbnRlZCBmcm9tIHVzaW5nIGZhbGxiYWNrIGZ1bmN0aW9uLgogICAgICogVGhhdCBwcmV2ZW50cyBsb29zaW5nIGNvbnRyb2wgb2YgdG9rZW5zIHRoYXQgd2lsbCBldmVudHVhbGx5IGdldCBhdHRyaWJ1dGVkIHRvIHRoZSBjb250cmFjdCwgbm90IHRoZSB1c2VyLgogICAgICogVG8gYnV5IHRva2VucyBmcm9tIHRoZSB3YWxsZXQgKHRoYXQgaXMgYSBjb250cmFjdCkgdXNlciBoYXMgdG8gc3BlY2lmeSBiZW5lZmljaWFyeSBvZiB0b2tlbnMgdXNpbmcgYnV5VG9rZW5zIG1ldGhvZC4KICAgICAqLwogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSBwdWJsaWMgewogICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gdHgub3JpZ2luKTsKICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBIGZ1bmN0aW9uIHRvIHdpdGhkcmF3IGFsbCBmdW5kcy4KICAgICAqIE5vcm1hbGx5LCBjb250cmFjdCBzaG91bGQgbm90IGhhdmUgZXRoZXIgYXQgYWxsLgogICAgICovCiAgICBmdW5jdGlvbiB3aXRoZHJhdygpIG9ubHlPd25lciBwdWJsaWMgewogICAgICB3YWxsZXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVGhlIGNvbnN0cnVjdG9yIHNldHMgdGhlIHRva2VucyBhZGRyZXNzCiAgICAgKiBAcGFyYW0gX3Rva2VuIGFkZHJlc3MKICAgICAqLwogICAgZnVuY3Rpb24gQ3J5ZGVyQ3Jvd2RzYWxlKGFkZHJlc3MgX3ByZXNhbGVUb2tlbiwgYWRkcmVzcyBfdG9rZW4sIGFkZHJlc3MgX3dhbGxldCkgcHVibGljIHsKICAgICAgcHJlc2FsZVRva2VuID0gQ3J5ZGVyVG9rZW4oX3ByZXNhbGVUb2tlbik7CiAgICAgIHRva2VuICA9IENyeWRlclRva2VuKF90b2tlbik7CiAgICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBldmVudCBmb3IgdG9rZW4gcHVyY2hhc2UgbG9nZ2luZwogICAgICogQHBhcmFtIHB1cmNoYXNlciB3aG8gcGFpZCBmb3IgdGhlIHRva2VucwogICAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IHdobyBnb3QgdGhlIHRva2VucwogICAgICogQHBhcmFtIHZhbHVlIHdlaXMgcGFpZCBmb3IgcHVyY2hhc2UKICAgICAqIEBwYXJhbSBhbW91bnQgYW1vdW50IG9mIHRva2VucyBwdXJjaGFzZWQKICAgICAqLwogICAgZXZlbnQgVG9rZW5QdXJjaGFzZSgKICAgICAgYWRkcmVzcyBpbmRleGVkIHB1cmNoYXNlciwKICAgICAgYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LAogICAgICB1aW50MjU2IHZhbHVlLAogICAgICB1aW50MjU2IGFtb3VudAogICAgKTsKCiAgICAvKioKICAgICAqIEBkZXYgU2V0cyB0aGUgc3RhcnQgYW5kIGVuZCBvZiB0aGUgc2FsZS4KICAgICAqIEBwYXJhbSBfc3RhcnQgdWludDI1NiBzdGFydCBvZiB0aGUgc2FsZS4KICAgICAqIEBwYXJhbSBfY2xvc2UgdWludDI1NiBlbmQgb2YgdGhlIHNhbGUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFRpbWUodWludCBfc3RhcnQsIHVpbnQgX2Nsb3NlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgcmVxdWlyZSggX3N0YXJ0IDwgX2Nsb3NlICk7CiAgICAgIFNUQVJUX1RJTUUgPSBfc3RhcnQ7CiAgICAgIENMT1NFX1RJTUUgPSBfY2xvc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFNldHMgZXhoYW5nZSByYXRlLCBpZSBhbW91bnQgb2YgdG9rZW5zICgxMF4xOCBDUllERVIpIGZvciAxIHdlaS4KICAgICAqIEBwYXJhbSBfZXhjaGFuZ2VSYXRlIHVpbnQyNTYgbmV3IGV4aGFuZ2UgcmF0ZS4KICAgICAqLwogICAgZnVuY3Rpb24gc2V0RXhjaGFuZ2VSYXRlKHVpbnQyNTYgX2V4Y2hhbmdlUmF0ZSkgcHVibGljIG9ubHlPd25lciAgewogICAgICByZXF1aXJlKG5vdyA8IFNUQVJUX1RJTUUpOwogICAgICBleGNoYW5nZVJhdGUgPSBfZXhjaGFuZ2VSYXRlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBCdXkgdG9rZW5zIGZvciBhbGwgc2VudCBldGhlci4gVG9rZW5zIHdpbGwgYmUgYWRkZWQgdG8gYmVuZWZpY2lhcnkncyBhY2NvdW50CiAgICAgKiBAcGFyYW0gYmVuZWZpY2lhcnkgYWRkcmVzcyB0aGUgb3duZXIgb2YgYm91Z2h0IHRva2Vucy4KICAgICAqLwogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHBheWFibGUgcHVibGljIHsKICAgICAgdWludDI1NiB0b3RhbCA9IHRva2VuLnRvdGFsU3VwcGx5KCk7CiAgICAgIHVpbnQyNTYgYW1vdW50ID0gbXNnLnZhbHVlOwogICAgICByZXF1aXJlKGFtb3VudCA+IDApOwoKICAgICAgLy8gQ2hlY2sgdGhhdCBoYXJkY2FwIG5vdCByZWFjaGVkLCBhbmQgc2FsZS10aW1lLgogICAgICByZXF1aXJlKHRvdGFsIDwgSEFSRENBUCk7CiAgICAgIHJlcXVpcmUobm93ID49IFNUQVJUX1RJTUUpOwogICAgICByZXF1aXJlKG5vdyA8IENMT1NFX1RJTUUpOwoKICAgICAgLy8gT3ZlcnJpZGUgZXhjaGFuZ2UgcmF0ZSBmb3IgZGFpbHkgYm9udXNlcwogICAgICBpZiAobm93IDwgU1RBUlRfVElNRSArIDM2MDAgKiAyNCAqIDEpIHsKICAgICAgICAgIGV4Y2hhbmdlUmF0ZSA9IDM5MDA7CiAgICAgIH0gZWxzZSBpZiAobm93IDwgU1RBUlRfVElNRSArIDM2MDAgKiAyNCAqIDMpIHsKICAgICAgICAgIGV4Y2hhbmdlUmF0ZSA9IDM3NTA7CiAgICAgIH0gZWxzZSBpZiAobm93IDwgU1RBUlRfVElNRSArIDM2MDAgKiAyNCAqIDUpIHsKICAgICAgICAgIGV4Y2hhbmdlUmF0ZSA9IDM2MDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgICBleGNoYW5nZVJhdGUgPSAzMDAwOwogICAgICB9CgogICAgICAvLyBNaW50IHRva2VucyBib3VnaHQgZm9yIGFsbCBzZW50IGV0aGVyIHRvIGJlbmVmaWNpYXJ5CiAgICAgIHVpbnQyNTYgdG9rZW5zID0gYW1vdW50Lm11bChleGNoYW5nZVJhdGUpOwoKICAgICAgdG9rZW4ubWludChiZW5lZmljaWFyeSwgdG9rZW5zKTsKICAgICAgVG9rZW5QdXJjaGFzZShtc2cuc2VuZGVyLCBiZW5lZmljaWFyeSwgYW1vdW50LCB0b2tlbnMpOwoKICAgICAgLy8gTWludCA4JSB0b2tlbnMgdG8gd2FsbGV0IGFzIGEgdGVhbSBwYXJ0CiAgICAgIHVpbnQyNTYgdGVhbVRva2VucyA9IHRva2VucyAvIDEwMCAqIDg7CiAgICAgIHRva2VuLm1pbnQod2FsbGV0LCB0ZWFtVG9rZW5zKTsKCiAgICAgIC8vIEZpbmFsbHksIHNlbnQgYWxsIHRoZSBtb25leSB0byB3YWxsZXQKICAgICAgd2FsbGV0LnRyYW5zZmVyKGFtb3VudCk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQGRldiBPbmUgdGltZSBjb21tYW5kIHRvIGFsbG9jYXRlIDVrayBib3VudHkgdG9rZW5zCiAgICAgKi8KICAgICAKICAgICBmdW5jdGlvbiBhbGxvY2F0ZUJvdW50eSgpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgIC8vIENoZWNrIGZvciBib3VudHkgbWFuYWdlciBhbmQgYWxsb2NhdGlvbiBzdGF0ZQogICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYm91bnR5ICYmIGlzQm91bnR5QWxsb2NhdGVkID09IGZhbHNlKTsKICAgICAgICAgLy8gTWludCBib3VudHkgdG9rZW5zIHRvIGJvdW50eSBtYW5hZ2VycyBhZGRyZXNzCiAgICAgICAgIHRva2VuLm1pbnQoYm91bnR5LCA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKTsKICAgICAgICAgaXNCb3VudHlBbGxvY2F0ZWQgPSB0cnVlOwogICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICB9CiAgICAgCiAgICAgZnVuY3Rpb24gcmVxdWVzdFRva2VucygpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgIHJlcXVpcmUocHJlc2FsZVRva2VuLmJhbGFuY2VPZihtc2cuc2VuZGVyKSA+IDAgJiYgdG9rZW5SZXF1ZXN0c1ttc2cuc2VuZGVyXSA9PSBmYWxzZSk7CiAgICAgICAgIHRva2VuLm1pbnQobXNnLnNlbmRlciwgcHJlc2FsZVRva2VuLmJhbGFuY2VPZihtc2cuc2VuZGVyKSk7CiAgICAgICAgIHRva2VuUmVxdWVzdHNbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICB9Cn0='.
	

]
