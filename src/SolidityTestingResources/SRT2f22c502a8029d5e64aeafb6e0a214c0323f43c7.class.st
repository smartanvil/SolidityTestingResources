Class {
	#name : #SRT2f22c502a8029d5e64aeafb6e0a214c0323f43c7,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2f22c502a8029d5e64aeafb6e0a214c0323f43c7 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgoKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKCi8qCiAqIEB0aXRsZSBUaGlzIGlzIHByb3h5IGZvciBhbmFseXRpY3MuIFRhcmdldCBjb250cmFjdCBjYW4gYmUgZm91bmQgYXQgZmllbGQgbV9hbmFseXRpY3MgKHNlZSAicmVhZCBjb250cmFjdCIpLgogKiBAYXV0aG9yIEVlbmFlCgogKiBGSVhNRSBhZnRlciBmaXggb2YgdHJ1ZmZsZSBpc3N1ZSAjNTYwOiByZWZhY3RvciB0byBhIHNlcGFyYXRlIGNvbnRyYWN0IGZpbGUgd2hpY2ggdXNlcyBJbnZlc3RtZW50QW5hbHl0aWNzIGludGVyZmFjZQogKi8KY29udHJhY3QgQW5hbHl0aWNQcm94eSB7CgogICAgZnVuY3Rpb24gQW5hbHl0aWNQcm94eSgpIHsKICAgICAgICBtX2FuYWx5dGljcyA9IEludmVzdG1lbnRBbmFseXRpY3MobXNnLnNlbmRlcik7CiAgICB9CgogICAgLy8vIEBub3RpY2UgZm9yd2FyZCBwYXltZW50IHRvIGFuYWx5dGljcy1jYXBhYmxlIGNvbnRyYWN0CiAgICBmdW5jdGlvbigpIHBheWFibGUgewogICAgICAgIG1fYW5hbHl0aWNzLmlhSW52ZXN0ZWRCeS52YWx1ZShtc2cudmFsdWUpKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIEludmVzdG1lbnRBbmFseXRpY3MgcHVibGljIG1fYW5hbHl0aWNzOwp9CgoKLyoKICogQHRpdGxlIE1peGluIGNvbnRyYWN0IHdoaWNoIHN1cHBvcnRzIGRpZmZlcmVudCBwYXltZW50IGNoYW5uZWxzIGFuZCBwcm92aWRlcyBhbmFseXRpY2FsIHBlci1jaGFubmVsIGRhdGEuCiAqIEBhdXRob3IgRWVuYWUKICovCmNvbnRyYWN0IEludmVzdG1lbnRBbmFseXRpY3MgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgZnVuY3Rpb24gSW52ZXN0bWVudEFuYWx5dGljcygpewogICAgfQoKICAgIC8vLyBAZGV2IGNyZWF0ZXMgbW9yZSBwYXltZW50IGNoYW5uZWxzLCB1cCB0byB0aGUgbGltaXQgYnV0IG5vdCBleGNlZWRpbmcgZ2FzIHN0aXBlbmQKICAgIGZ1bmN0aW9uIGNyZWF0ZU1vcmVQYXltZW50Q2hhbm5lbHNJbnRlcm5hbCh1aW50IGxpbWl0KSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBwYXltZW50Q2hhbm5lbHNDcmVhdGVkOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGxpbWl0OyBpKyspIHsKICAgICAgICAgICAgdWludCBzdGFydGluZ0dhcyA9IG1zZy5nYXM7CiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAqIH4xNzBrIG9mIGdhcyBwZXIgcGF5bWVudENoYW5uZWwsCiAgICAgICAgICAgICAqIHVzaW5nIGdhcyBwcmljZSA9IDRHd2VpIDJrIHBheW1lbnRDaGFubmVscyB3aWxsIGNvc3QgfjEuNCBFVEguCiAgICAgICAgICAgICAqLwoKICAgICAgICAgICAgYWRkcmVzcyBwYXltZW50Q2hhbm5lbCA9IG5ldyBBbmFseXRpY1Byb3h5KCk7CiAgICAgICAgICAgIG1fdmFsaWRQYXltZW50Q2hhbm5lbHNbcGF5bWVudENoYW5uZWxdID0gdHJ1ZTsKICAgICAgICAgICAgbV9wYXltZW50Q2hhbm5lbHMucHVzaChwYXltZW50Q2hhbm5lbCk7CiAgICAgICAgICAgIHBheW1lbnRDaGFubmVsc0NyZWF0ZWQrKzsKCiAgICAgICAgICAgIC8vIGNvc3Qgb2YgY3JlYXRpbmcgb25lIGNoYW5uZWwKICAgICAgICAgICAgdWludCBnYXNQZXJDaGFubmVsID0gc3RhcnRpbmdHYXMuc3ViKG1zZy5nYXMpOwogICAgICAgICAgICBpZiAoZ2FzUGVyQ2hhbm5lbC5hZGQoNTAwMDApID4gbXNnLmdhcykKICAgICAgICAgICAgICAgIGJyZWFrOyAgLy8gZW5vdWdoIHByb3hpZXMgZm9yIHRoaXMgY2FsbAogICAgICAgIH0KICAgICAgICByZXR1cm4gcGF5bWVudENoYW5uZWxzQ3JlYXRlZDsKICAgIH0KCgogICAgLy8vIEBkZXYgcHJvY2VzcyBwYXltZW50cyAtIHJlY29yZCBhbmFseXRpY3MgYW5kIHBhc3MgY29udHJvbCB0byBpYU9uSW52ZXN0ZWQgY2FsbGJhY2sKICAgIGZ1bmN0aW9uIGlhSW52ZXN0ZWRCeShhZGRyZXNzIGludmVzdG9yKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgICAgICBhZGRyZXNzIHBheW1lbnRDaGFubmVsID0gbXNnLnNlbmRlcjsKICAgICAgICBpZiAobV92YWxpZFBheW1lbnRDaGFubmVsc1twYXltZW50Q2hhbm5lbF0pIHsKICAgICAgICAgICAgLy8gcGF5bWVudCByZWNlaXZlZCBieSBvbmUgb2Ygb3VyIGNoYW5uZWxzCiAgICAgICAgICAgIHVpbnQgdmFsdWUgPSBtc2cudmFsdWU7CiAgICAgICAgICAgIG1faW52ZXN0bWVudHNCeVBheW1lbnRDaGFubmVsW3BheW1lbnRDaGFubmVsXSA9IG1faW52ZXN0bWVudHNCeVBheW1lbnRDaGFubmVsW3BheW1lbnRDaGFubmVsXS5hZGQodmFsdWUpOwogICAgICAgICAgICAvLyBXZSBrbm93IGZvciBzdXJlIHRoYXQgaW52ZXN0bWVudCBjYW1lIGZyb20gc3BlY2lmaWVkIGludmVzdG9yIChzZWUgQW5hbHl0aWNQcm94eSkuCiAgICAgICAgICAgIGlhT25JbnZlc3RlZChpbnZlc3RvciwgdmFsdWUsIHRydWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIExvb2tzIGxpa2Ugc29tZSB1c2VyIGhhcyBwYWlkIHRvIHRoaXMgbWV0aG9kLCB0aGlzIHBheW1lbnQgaXMgbm90IGluY2x1ZGVkIGluIHRoZSBhbmFseXRpY3MsCiAgICAgICAgICAgIC8vIGJ1dCwgb2YgY291cnNlLCBwcm9jZXNzZWQuCiAgICAgICAgICAgIGlhT25JbnZlc3RlZChtc2cuc2VuZGVyLCBtc2cudmFsdWUsIGZhbHNlKTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIEBkZXYgY2FsbGJhY2sKICAgIGZ1bmN0aW9uIGlhT25JbnZlc3RlZChhZGRyZXNzIGludmVzdG9yLCB1aW50IHBheW1lbnQsIGJvb2wgdXNpbmdQYXltZW50Q2hhbm5lbCkgaW50ZXJuYWwgewogICAgfQoKCiAgICBmdW5jdGlvbiBwYXltZW50Q2hhbm5lbHNDb3VudCgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gbV9wYXltZW50Q2hhbm5lbHMubGVuZ3RoOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlYWRBbmFseXRpY3NNYXAoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzW10sIHVpbnRbXSkgewogICAgICAgIGFkZHJlc3NbXSBtZW1vcnkga2V5cyA9IG5ldyBhZGRyZXNzW10obV9wYXltZW50Q2hhbm5lbHMubGVuZ3RoKTsKICAgICAgICB1aW50W10gbWVtb3J5IHZhbHVlcyA9IG5ldyB1aW50W10obV9wYXltZW50Q2hhbm5lbHMubGVuZ3RoKTsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbV9wYXltZW50Q2hhbm5lbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYWRkcmVzcyBrZXkgPSBtX3BheW1lbnRDaGFubmVsc1tpXTsKICAgICAgICAgICAga2V5c1tpXSA9IGtleTsKICAgICAgICAgICAgdmFsdWVzW2ldID0gbV9pbnZlc3RtZW50c0J5UGF5bWVudENoYW5uZWxba2V5XTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAoa2V5cywgdmFsdWVzKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWFkUGF5bWVudENoYW5uZWxzKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzc1tdKSB7CiAgICAgICAgcmV0dXJuIG1fcGF5bWVudENoYW5uZWxzOwogICAgfQoKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIG1faW52ZXN0bWVudHNCeVBheW1lbnRDaGFubmVsOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIG1fdmFsaWRQYXltZW50Q2hhbm5lbHM7CgogICAgYWRkcmVzc1tdIHB1YmxpYyBtX3BheW1lbnRDaGFubmVsczsKfQoKLyoqCiAqIEB0aXRsZSBIZWxwcyBjb250cmFjdHMgZ3VhcmQgYWdhaW5zIHJlbnRyYW5jeSBhdHRhY2tzLgogKiBAYXV0aG9yIFJlbWNvIEJsb2VtZW4gPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJjMWIzYTRhY2EyYWU4MWYzIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPs+ALmNvbT4KICogQG5vdGljZSBJZiB5b3UgbWFyayBhIGZ1bmN0aW9uIGBub25SZWVudHJhbnRgLCB5b3Ugc2hvdWxkIGFsc28KICogbWFyayBpdCBgZXh0ZXJuYWxgLgogKi8KY29udHJhY3QgUmVlbnRyYW5jeUd1YXJkIHsKCiAgLyoqCiAgICogQGRldiBXZSB1c2UgYSBzaW5nbGUgbG9jayBmb3IgdGhlIHdob2xlIGNvbnRyYWN0LgogICAqLwogIGJvb2wgcHJpdmF0ZSByZW50cmFuY3lfbG9jayA9IGZhbHNlOwoKICAvKioKICAgKiBAZGV2IFByZXZlbnRzIGEgY29udHJhY3QgZnJvbSBjYWxsaW5nIGl0c2VsZiwgZGlyZWN0bHkgb3IgaW5kaXJlY3RseS4KICAgKiBAbm90aWNlIElmIHlvdSBtYXJrIGEgZnVuY3Rpb24gYG5vblJlZW50cmFudGAsIHlvdSBzaG91bGQgYWxzbwogICAqIG1hcmsgaXQgYGV4dGVybmFsYC4gQ2FsbGluZyBvbmUgbm9uUmVlbnRyYW50IGZ1bmN0aW9uIGZyb20KICAgKiBhbm90aGVyIGlzIG5vdCBzdXBwb3J0ZWQuIEluc3RlYWQsIHlvdSBjYW4gaW1wbGVtZW50IGEKICAgKiBgcHJpdmF0ZWAgZnVuY3Rpb24gZG9pbmcgdGhlIGFjdHVhbCB3b3JrLCBhbmQgYSBgZXh0ZXJuYWxgCiAgICogd3JhcHBlciBtYXJrZWQgYXMgYG5vblJlZW50cmFudGAuCiAgICovCiAgbW9kaWZpZXIgbm9uUmVlbnRyYW50KCkgewogICAgcmVxdWlyZSghcmVudHJhbmN5X2xvY2spOwogICAgcmVudHJhbmN5X2xvY2sgPSB0cnVlOwogICAgXzsKICAgIHJlbnRyYW5jeV9sb2NrID0gZmFsc2U7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgfQoKfQoKCmNvbnRyYWN0IFNUUVRva2VuIHsKICAgIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgZXh0ZXJuYWw7Cn0KCi8vLyBAdGl0bGUgU3RvcmlxYSBwcmUtSUNPIGNvbnRyYWN0CmNvbnRyYWN0IFNUUVByZUlDTyBpcyBPd25hYmxlLCBSZWVudHJhbmN5R3VhcmQsIEludmVzdG1lbnRBbmFseXRpY3MgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgZXZlbnQgRnVuZFRyYW5zZmVyKGFkZHJlc3MgYmFja2VyLCB1aW50IGFtb3VudCwgYm9vbCBpc0NvbnRyaWJ1dGlvbik7CgogICAgZnVuY3Rpb24gU1RRUHJlSUNPKGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgZnVuZHMpIHsKICAgICAgICByZXF1aXJlKGFkZHJlc3MoMCkgIT0gYWRkcmVzcyh0b2tlbikgJiYgYWRkcmVzcygwKSAhPSBhZGRyZXNzKGZ1bmRzKSk7CgogICAgICAgIG1fdG9rZW4gPSBTVFFUb2tlbih0b2tlbik7CiAgICAgICAgbV9mdW5kcyA9IGZ1bmRzOwogICAgfQoKCiAgICAvLyBQVUJMSUMgaW50ZXJmYWNlOiBwYXltZW50cwoKICAgIC8vIGZhbGxiYWNrIGZ1bmN0aW9uIGFzIGEgc2hvcnRjdXQKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSgwID09IG1zZy5kYXRhLmxlbmd0aCk7CiAgICAgICAgYnV5KCk7ICAvLyBvbmx5IGludGVybmFsIGNhbGwgaGVyZSEKICAgIH0KCiAgICAvLy8gQG5vdGljZSBJQ08gcGFydGljaXBhdGlvbgogICAgZnVuY3Rpb24gYnV5KCkgcHVibGljIHBheWFibGUgeyAgICAgLy8gZG9udCBtYXJrIGFzIGV4dGVybmFsIQogICAgICAgIGlhT25JbnZlc3RlZChtc2cuc2VuZGVyLCBtc2cudmFsdWUsIGZhbHNlKTsKICAgIH0KCgogICAgLy8gUFVCTElDIGludGVyZmFjZTogbWFpbnRlbmFuY2UKCiAgICBmdW5jdGlvbiBjcmVhdGVNb3JlUGF5bWVudENoYW5uZWxzKHVpbnQgbGltaXQpIGV4dGVybmFsIG9ubHlPd25lciByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZU1vcmVQYXltZW50Q2hhbm5lbHNJbnRlcm5hbChsaW1pdCk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgVGVzdHMgb3duZXJzaGlwIG9mIHRoZSBjdXJyZW50IGNhbGxlci4KICAgIC8vLyBAcmV0dXJuIHRydWUgaWYgaXQncyBhbiBvd25lcgogICAgLy8gSXQncyBhZHZpc2FibGUgdG8gY2FsbCBpdCBieSBuZXcgb3duZXIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIHNhbWUgZXJyb25lb3VzIGFkZHJlc3MgaXMgbm90IGNvcHktcGFzdGVkIHRvCiAgICAvLyBhZGRPd25lci9jaGFuZ2VPd25lciBhbmQgdG8gaXNPd25lci4KICAgIGZ1bmN0aW9uIGFtSU93bmVyKCkgZXh0ZXJuYWwgY29uc3RhbnQgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgLy8gSU5URVJOQUwKCiAgICAvLy8gQGRldiBwYXltZW50IGNhbGxiYWNrCiAgICBmdW5jdGlvbiBpYU9uSW52ZXN0ZWQoYWRkcmVzcyBpbnZlc3RvciwgdWludCBwYXltZW50LCBib29sIHVzaW5nUGF5bWVudENoYW5uZWwpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICBub25SZWVudHJhbnQKICAgIHsKICAgICAgICByZXF1aXJlKHBheW1lbnQgPj0gY19NaW5JbnZlc3RtZW50KTsKICAgICAgICByZXF1aXJlKGdldEN1cnJlbnRUaW1lKCkgPj0gY19zdGFydFRpbWUgJiYgZ2V0Q3VycmVudFRpbWUoKSA8IGNfZW5kVGltZSB8fCBtc2cuc2VuZGVyID09IG93bmVyKTsKCiAgICAgICAgdWludCBzdGFydGluZ0ludmFyaWFudCA9IHRoaXMuYmFsYW5jZS5hZGQobV9mdW5kcy5iYWxhbmNlKTsKCiAgICAgICAgLy8gcmV0dXJuIG9yIHVwZGF0ZSBwYXltZW50IGlmIG5lZWRlZAogICAgICAgIHVpbnQgcGF5bWVudEFsbG93ZWQgPSBnZXRNYXhpbXVtRnVuZHMoKS5zdWIobV90b3RhbEludmVzdGVkKTsKICAgICAgICBpZiAoMCA9PSBwYXltZW50QWxsb3dlZCkgewogICAgICAgICAgICBpbnZlc3Rvci50cmFuc2ZlcihwYXltZW50KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB1aW50IGNoYW5nZTsKICAgICAgICBpZiAocGF5bWVudEFsbG93ZWQgPCBwYXltZW50KSB7CiAgICAgICAgICAgIGNoYW5nZSA9IHBheW1lbnQuc3ViKHBheW1lbnRBbGxvd2VkKTsKICAgICAgICAgICAgcGF5bWVudCA9IHBheW1lbnRBbGxvd2VkOwogICAgICAgIH0KCiAgICAgICAgLy8gY2FsY3VsYXRlIHJhdGUKICAgICAgICB1aW50IGJvbnVzUGVyY2VudCA9IGNfcHJlSUNPQm9udXNQZXJjZW50OwogICAgICAgIGJvbnVzUGVyY2VudCArPSBnZXRMYXJnZVBheW1lbnRCb251cyhwYXltZW50KTsKICAgICAgICBpZiAodXNpbmdQYXltZW50Q2hhbm5lbCkKICAgICAgICAgICAgYm9udXNQZXJjZW50ICs9IGNfcGF5bWVudENoYW5uZWxCb251c1BlcmNlbnQ7CgogICAgICAgIHVpbnQgcmF0ZSA9IGNfU1RRcGVyRVRILm11bCgxMDAgKyBib251c1BlcmNlbnQpLmRpdigxMDApOwoKICAgICAgICAvLyBpc3N1ZSB0b2tlbnMKICAgICAgICB1aW50IHN0cSA9IHBheW1lbnQubXVsKHJhdGUpOwogICAgICAgIG1fdG9rZW4ubWludChpbnZlc3Rvciwgc3RxKTsKCiAgICAgICAgLy8gcmVjb3JkIHBheW1lbnQKICAgICAgICBtX2Z1bmRzLnRyYW5zZmVyKHBheW1lbnQpOwogICAgICAgIG1fdG90YWxJbnZlc3RlZCA9IG1fdG90YWxJbnZlc3RlZC5hZGQocGF5bWVudCk7CiAgICAgICAgYXNzZXJ0KG1fdG90YWxJbnZlc3RlZCA8PSBnZXRNYXhpbXVtRnVuZHMoKSk7CiAgICAgICAgRnVuZFRyYW5zZmVyKGludmVzdG9yLCBwYXltZW50LCB0cnVlKTsKCiAgICAgICAgaWYgKGNoYW5nZSA+IDApCiAgICAgICAgICAgIGludmVzdG9yLnRyYW5zZmVyKGNoYW5nZSk7CgogICAgICAgIGFzc2VydChzdGFydGluZ0ludmFyaWFudCA9PSB0aGlzLmJhbGFuY2UuYWRkKG1fZnVuZHMuYmFsYW5jZSkuYWRkKGNoYW5nZSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldExhcmdlUGF5bWVudEJvbnVzKHVpbnQgcGF5bWVudCkgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKHBheW1lbnQgPiAxMDAwIGV0aGVyKSByZXR1cm4gMTA7CiAgICAgICAgaWYgKHBheW1lbnQgPiA4MDAgZXRoZXIpIHJldHVybiA4OwogICAgICAgIGlmIChwYXltZW50ID4gNTAwIGV0aGVyKSByZXR1cm4gNTsKICAgICAgICBpZiAocGF5bWVudCA+IDIwMCBldGhlcikgcmV0dXJuIDI7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgLy8vIEBkZXYgdG8gYmUgb3ZlcnJpZGRlbiBpbiB0ZXN0cwogICAgZnVuY3Rpb24gZ2V0Q3VycmVudFRpbWUoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIG5vdzsKICAgIH0KCiAgICAvLy8gQGRldiB0byBiZSBvdmVycmlkZGVuIGluIHRlc3RzCiAgICBmdW5jdGlvbiBnZXRNYXhpbXVtRnVuZHMoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGNfTWF4aW11bUZ1bmRzOwogICAgfQoKCiAgICAvLyBGSUVMRFMKCiAgICAvLy8gQG5vdGljZSBzdGFydCB0aW1lIG9mIHRoZSBwcmUtSUNPCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBjX3N0YXJ0VGltZSA9IDE1MDc3NjY0MDA7CgogICAgLy8vIEBub3RpY2UgZW5kIHRpbWUgb2YgdGhlIHByZS1JQ08KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGNfZW5kVGltZSA9IGNfc3RhcnRUaW1lICsgKDEgZGF5cyk7CgogICAgLy8vIEBub3RpY2UgbWluaW11bSBpbnZlc3RtZW50CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBjX01pbkludmVzdG1lbnQgPSAxMCBmaW5uZXk7CgogICAgLy8vIEBub3RpY2UgbWF4aW11bSBpbnZlc3RtZW50cyB0byBiZSBhY2NlcHRlZCBkdXJpbmcgcHJlLUlDTwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgY19NYXhpbXVtRnVuZHMgPSA4MDAwIGV0aGVyOwoKCiAgICAvLy8gQG5vdGljZSBzdGFydGluZyBleGNoYW5nZSByYXRlIG9mIFNUUQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgY19TVFFwZXJFVEggPSAxMDAwMDA7CgogICAgLy8vIEBub3RpY2UgcHJlLUlDTyBib251cwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgY19wcmVJQ09Cb251c1BlcmNlbnQgPSA0MDsKCiAgICAvLy8gQG5vdGljZSBhdXRob3Jpc2VkIHBheW1lbnQgYm9udXMKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGNfcGF5bWVudENoYW5uZWxCb251c1BlcmNlbnQgPSAyOwoKCiAgICAvLy8gQGRldiB0b3RhbCBpbnZlc3RtZW50cyBhbW91bnQKICAgIHVpbnQgcHVibGljIG1fdG90YWxJbnZlc3RlZDsKCiAgICAvLy8gQGRldiBjb250cmFjdCByZXNwb25zaWJsZSBmb3IgdG9rZW4gYWNjb3VudGluZwogICAgU1RRVG9rZW4gcHVibGljIG1fdG9rZW47CgogICAgLy8vIEBkZXYgYWRkcmVzcyByZXNwb25zaWJsZSBmb3IgaW52ZXN0bWVudHMgYWNjb3VudGluZwogICAgYWRkcmVzcyBwdWJsaWMgbV9mdW5kczsKfQ=='.
	

]
