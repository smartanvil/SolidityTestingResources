Class {
	#name : #SRT5B5afaA565ABa14833dE0ceE321e63A807fd407B,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5B5afaA565ABa14833dE0ceE321e63A807fd407B >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vCi8vIEJVTEIgVHVsaXBNYW5pYSB0b2tlbiBwdWJsaWMgc2FsZSBjb250cmFjdAovLwovLyBGb3IgZGV0YWlscywgcGxlYXNlIHZpc2l0OiBodHRwczovL3R1bGlwbWFuaWEuY28KLy8KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8KLy8gU2FmZU1hdGgzCi8vCi8vIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9tYXRoL1NhZmVNYXRoLnNvbAovLyAobm8gbmVlZCB0byBpbXBsZW1lbnQgZGl2aXNpb24pCi8vCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmxpYnJhcnkgU2FmZU1hdGgzIHsKCiAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50IGMpIHsKICAgIGMgPSBhICogYjsKICAgIGFzc2VydCggYSA9PSAwIHx8IGMgLyBhID09IGIgKTsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KCBiIDw9IGEgKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCBjKSB7CiAgICBjID0gYSArIGI7CiAgICBhc3NlcnQoIGMgPj0gYSApOwogIH0KCn0KCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vCi8vIE93bmVkIGNvbnRyYWN0Ci8vCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmNvbnRyYWN0IE93bmVkIHsKCiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogIC8vIEV2ZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJQcm9wb3NlZChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8pOwogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7CgogIC8vIE1vZGlmaWVyIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgIHJlcXVpcmUoIG1zZy5zZW5kZXIgPT0gb3duZXIgKTsKICAgIF87CiAgfQoKICAvLyBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIGZ1bmN0aW9uIE93bmVkKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCBfbmV3T3duZXIgIT0gb3duZXIgKTsKICAgIHJlcXVpcmUoIF9uZXdPd25lciAhPSBhZGRyZXNzKDB4MCkgKTsKICAgIE93bmVyc2hpcFRyYW5zZmVyUHJvcG9zZWQob3duZXIsIF9uZXdPd25lcik7CiAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICB9CgogIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lcik7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLwovLyBFUkMgVG9rZW4gU3RhbmRhcmQgIzIwIEludGVyZmFjZQovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9ibG9iL21hc3Rlci9FSVBTL2VpcC0yMC10b2tlbi1zdGFuZGFyZC5tZAovLwovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpjb250cmFjdCBFUkMyMEludGVyZmFjZSB7CgogIC8vIEV2ZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7CgogIC8vIEZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSk7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKCn0KCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vCi8vIEVSQyBUb2tlbiBTdGFuZGFyZCAjMjAKLy8KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKY29udHJhY3QgRVJDMjBUb2tlbiBpcyBFUkMyMEludGVyZmFjZSwgT3duZWQgewogIAogIHVzaW5nIFNhZmVNYXRoMyBmb3IgdWludDsKCiAgdWludCBwdWJsaWMgdG9rZW5zSXNzdWVkVG90YWwgPSAwOwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgLy8gRnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAvKiBUb3RhbCB0b2tlbiBzdXBwbHkgKi8KCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gdG9rZW5zSXNzdWVkVG90YWw7CiAgfQoKICAvKiBHZXQgdGhlIGFjY291bnQgYmFsYW5jZSBmb3IgYW4gYWRkcmVzcyAqLwoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKICAvKiBUcmFuc2ZlciB0aGUgYmFsYW5jZSBmcm9tIG93bmVyJ3MgYWNjb3VudCB0byBhbm90aGVyIGFjY291bnQgKi8KCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAvLyBhbW91bnQgc2VudCBjYW5ub3QgZXhjZWVkIGJhbGFuY2UKICAgIHJlcXVpcmUoIGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQgKTsKCiAgICAvLyB1cGRhdGUgYmFsYW5jZXMKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSAgICAgICAgPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKCiAgICAvLyBsb2cgZXZlbnQKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qIEFsbG93IF9zcGVuZGVyIHRvIHdpdGhkcmF3IGZyb20geW91ciBhY2NvdW50IHVwIHRvIF9hbW91bnQgKi8KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy8gYXBwcm92YWwgYW1vdW50IGNhbm5vdCBleGNlZWQgdGhlIGJhbGFuY2UKICAgIHJlcXVpcmUgKCBiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50ICk7CiAgICAgIAogICAgLy8gdXBkYXRlIGFsbG93ZWQgYW1vdW50CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAKICAgIC8vIGxvZyBldmVudAogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKiBTcGVuZGVyIG9mIHRva2VucyB0cmFuc2ZlcnMgdG9rZW5zIGZyb20gdGhlIG93bmVyJ3MgYmFsYW5jZSAqLwogIC8qIE11c3QgYmUgcHJlLWFwcHJvdmVkIGJ5IG93bmVyICovCgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIC8vIGJhbGFuY2UgY2hlY2tzCiAgICByZXF1aXJlKCBiYWxhbmNlc1tfZnJvbV0gPj0gX2Ftb3VudCApOwogICAgcmVxdWlyZSggYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCApOwoKICAgIC8vIHVwZGF0ZSBiYWxhbmNlcyBhbmQgYWxsb3dlZCBhbW91bnQKICAgIGJhbGFuY2VzW19mcm9tXSAgICAgICAgICAgID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfYW1vdW50KTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSAgICAgICAgICAgICAgPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKCiAgICAvLyBsb2cgZXZlbnQKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKiBSZXR1cm5zIHRoZSBhbW91bnQgb2YgdG9rZW5zIGFwcHJvdmVkIGJ5IHRoZSBvd25lciAqLwogIC8qIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGJ5IHNwZW5kZXIgKi8KCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8KLy8gVHVsaXBNYW5pYSBwdWJsaWMgdG9rZW4gc2FsZQovLwovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpjb250cmFjdCBUdWxpcE1hbmlhIGlzIEVSQzIwVG9rZW4gewoKICAvKiBVdGlsaXR5IHZhcmlhYmxlICovCiAgCiAgdWludCBjb25zdGFudCBFNiA9IDEwKio2OwogIAogIC8qIEJhc2ljIHRva2VuIGRhdGEgKi8KCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lICAgICA9ICJUdWxpcCBNYW5pYSI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgICA9ICJCVUxCIjsKICB1aW50OCAgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gNjsKCiAgLyogV2FsbGV0IGFkZHJlc3NlcyAtIGluaXRpYWxseSBzZXQgdG8gb3duZXIgYXQgZGVwbG95bWVudCAqLwogIAogIGFkZHJlc3MgcHVibGljIHdhbGxldDsKICBhZGRyZXNzIHB1YmxpYyBhZG1pbldhbGxldDsKCiAgLyogSUNPIGRhdGVzICovCgogIHVpbnQgcHVibGljIGNvbnN0YW50IERBVEVfUFJFU0FMRV9TVEFSVCA9IDE1MTA3NTgwMDA7IC8vIDE1LU5vdi0yMDE3IDE1OjAwIFVUQwogIHVpbnQgcHVibGljIGNvbnN0YW50IERBVEVfUFJFU0FMRV9FTkQgICA9IDE1MTEzNjI4MDA7IC8vIDIyLU5vdi0yMDE3IDE1OjAwIFVUQwoKICB1aW50IHB1YmxpYyBjb25zdGFudCBEQVRFX0lDT19TVEFSVCA9IDE1MTEzNjI4MDE7IC8vIDIyLU5vdi0yMDE3IDE1OjAwOjAxIFVUQwogIHVpbnQgcHVibGljIGNvbnN0YW50IERBVEVfSUNPX0VORCAgID0gMTUxMzg2ODQwMDsgLy8gMjEtRGVjLTIwMTcgMTU6MDAgVVRDCgogIC8qIElDTyB0b2tlbnMgcGVyIEVUSCAqLwogIAogIHVpbnQgcHVibGljIHRva2Vuc1BlckV0aCA9IDMzNiAqIEU2OwogIHVpbnQgcHVibGljIGNvbnN0YW50IEJPTlVTX1BSRVNBTEUgPSAxMDA7CgogIC8qIE90aGVyIElDTyBwYXJhbWV0ZXJzICovICAKICAKICB1aW50IHB1YmxpYyBjb25zdGFudCBUT0tFTl9TVVBQTFlfVE9UQUwgPSAxMDAwMDAwMCAqIEU2OyAvLyAxME0gdG9rZW5zCiAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9LRU5fU1VQUExZX0lDTyAgID0gODUwMDAwMCAqIEU2OyAvLyA4LjVNIHRva2VucwogIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOX1NVUFBMWV9NS1QgICA9ICAxNTAwMDAwICogRTY7IC8vICAxLjVNIHRva2VucwoKICB1aW50IHB1YmxpYyBjb25zdGFudCBQUkVTQUxFX0VUSF9DQVAgPSAgNzUwIGV0aGVyOwoKICB1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fQ09OVFJJQlVUSU9OID0gMSBldGhlciAvIDUwMDsgLy8gMC4wMDIgRXRoZXIKICB1aW50IHB1YmxpYyBjb25zdGFudCBNQVhfQ09OVFJJQlVUSU9OID0gMzAwIGV0aGVyOwoKICB1aW50IHB1YmxpYyBjb25zdGFudCBDT09MRE9XTl9QRVJJT0QgPSAgMiBkYXlzOwogIHVpbnQgcHVibGljIGNvbnN0YW50IENMQVdCQUNLX1BFUklPRCA9IDIgZGF5czsKCiAgLyogQ3Jvd2RzYWxlIHZhcmlhYmxlcyAqLwoKICB1aW50IHB1YmxpYyBpY29FdGhlclJlY2VpdmVkID0gMDsgLy8gRXRoZXIgYWN0dWFsbHkgcmVjZWl2ZWQgYnkgdGhlIGNvbnRyYWN0CgogIHVpbnQgcHVibGljIHRva2Vuc0lzc3VlZEljbyAgID0gMDsKICB1aW50IHB1YmxpYyB0b2tlbnNJc3N1ZWRNa3QgICA9IDA7CiAgCiAgdWludCBwdWJsaWMgdG9rZW5zQ2xhaW1lZEFpcmRyb3AgPSAwOwogIAogIC8qIEtlZXAgdHJhY2sgb2YgRXRoZXIgY29udHJpYnV0ZWQgYW5kIHRva2VucyByZWNlaXZlZCBkdXJpbmcgQ3Jvd2RzYWxlICovCiAgCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBpY29FdGhlckNvbnRyaWJ1dGVkOwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgaWNvVG9rZW5zUmVjZWl2ZWQ7CgogIC8qIEtlZXAgdHJhY2sgb2YgcGFydGljaXBhbnRzIHdobyAKICAvKiAtIGhhdmUgcmVjZWl2ZWQgdGhlaXIgYWlyZHJvcHBlZCB0b2tlbnMgYWZ0ZXIgYSBzdWNjZXNzZnVsIElDTyAqLwogIC8qIC0gb3IgaGF2ZSByZWNsYWltZWQgdGhlaXIgY29udHJpYnV0aW9ucyBpbiBjYXNlIG9mIGZhaWxlZCBDcm93ZHNhbGUgKi8KICAvKiAtIGFyZSBsb2NrZWQgKi8KICAKICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFpcmRyb3BDbGFpbWVkOwogIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgcmVmdW5kQ2xhaW1lZDsKICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGxvY2tlZDsKCiAgLy8gRXZlbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIAogIGV2ZW50IFdhbGxldFVwZGF0ZWQoYWRkcmVzcyBfbmV3V2FsbGV0KTsKICBldmVudCBBZG1pbldhbGxldFVwZGF0ZWQoYWRkcmVzcyBfbmV3QWRtaW5XYWxsZXQpOwogIGV2ZW50IFRva2Vuc1BlckV0aFVwZGF0ZWQodWludCBfdG9rZW5zUGVyRXRoKTsKICBldmVudCBUb2tlbnNNaW50ZWQoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfdG9rZW5zLCB1aW50IF9iYWxhbmNlKTsKICBldmVudCBUb2tlbnNJc3N1ZWQoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfdG9rZW5zLCB1aW50IF9iYWxhbmNlLCB1aW50IF9ldGhlckNvbnRyaWJ1dGVkKTsKICBldmVudCBSZWZ1bmQoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfYW1vdW50LCB1aW50IF90b2tlbnMpOwogIGV2ZW50IEFpcmRyb3AoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfYW1vdW50LCB1aW50IF9iYWxhbmNlKTsKICBldmVudCBMb2NrUmVtb3ZlZChhZGRyZXNzIGluZGV4ZWQgX3BhcnRpY2lwYW50KTsKCiAgLy8gQmFzaWMgRnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLQoKICAvKiBJbml0aWFsaXplIChvd25lciBpcyBzZXQgdG8gbXNnLnNlbmRlciBieSBPd25lZC5Pd25lZCgpICovCgogIGZ1bmN0aW9uIFR1bGlwTWFuaWEoKSB7CiAgICByZXF1aXJlKCBUT0tFTl9TVVBQTFlfSUNPICsgVE9LRU5fU1VQUExZX01LVCA9PSBUT0tFTl9TVVBQTFlfVE9UQUwgKTsKICAgIHdhbGxldCA9IG93bmVyOwogICAgYWRtaW5XYWxsZXQgPSBvd25lcjsKICB9CgogIC8qIEZhbGxiYWNrICovCiAgCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICBidXlUb2tlbnMoKTsKICB9CiAgCiAgLy8gSW5mb3JtYXRpb24gZnVuY3Rpb25zIC0tLS0tLS0tLS0tLQogIAogIC8qIFdoYXQgdGltZSBpcyBpdD8gKi8KICAKICBmdW5jdGlvbiBhdE5vdygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiBub3c7CiAgfQogIAogIC8qIEFyZSB0b2tlbnMgdHJhbnNmZXJhYmxlPyAqLwoKICBmdW5jdGlvbiBpc1RyYW5zZmVyYWJsZSgpIGNvbnN0YW50IHJldHVybnMgKGJvb2wgdHJhbnNmZXJhYmxlKSB7CiAgICAgaWYgKCBhdE5vdygpIDwgREFURV9JQ09fRU5EICsgQ09PTERPV05fUEVSSU9EICkgcmV0dXJuIGZhbHNlOwogICAgIHJldHVybiB0cnVlOwogIH0KICAKICAvLyBMb2NrIGZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8qIE1hbmFnZSBsb2NrZWQgKi8KCiAgZnVuY3Rpb24gcmVtb3ZlTG9jayhhZGRyZXNzIF9wYXJ0aWNpcGFudCkgewogICAgcmVxdWlyZSggbXNnLnNlbmRlciA9PSBhZG1pbldhbGxldCB8fCBtc2cuc2VuZGVyID09IG93bmVyICk7CiAgICBsb2NrZWRbX3BhcnRpY2lwYW50XSA9IGZhbHNlOwogICAgTG9ja1JlbW92ZWQoX3BhcnRpY2lwYW50KTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZUxvY2tNdWx0aXBsZShhZGRyZXNzW10gX3BhcnRpY2lwYW50cykgewogICAgcmVxdWlyZSggbXNnLnNlbmRlciA9PSBhZG1pbldhbGxldCB8fCBtc2cuc2VuZGVyID09IG93bmVyICk7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfcGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGxvY2tlZFtfcGFydGljaXBhbnRzW2ldXSA9IGZhbHNlOwogICAgICBMb2NrUmVtb3ZlZChfcGFydGljaXBhbnRzW2ldKTsKICAgIH0KICB9CgogIC8vIE93bmVyIEZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0KICAKICAvKiBDaGFuZ2UgdGhlIGNyb3dkc2FsZSB3YWxsZXQgYWRkcmVzcyAqLwoKICBmdW5jdGlvbiBzZXRXYWxsZXQoYWRkcmVzcyBfd2FsbGV0KSBvbmx5T3duZXIgewogICAgcmVxdWlyZSggX3dhbGxldCAhPSBhZGRyZXNzKDB4MCkgKTsKICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICBXYWxsZXRVcGRhdGVkKHdhbGxldCk7CiAgfQoKICAvKiBDaGFuZ2UgdGhlIGFkbWluIHdhbGxldCBhZGRyZXNzICovCgogIGZ1bmN0aW9uIHNldEFkbWluV2FsbGV0KGFkZHJlc3MgX3dhbGxldCkgb25seU93bmVyIHsKICAgIHJlcXVpcmUoIF93YWxsZXQgIT0gYWRkcmVzcygweDApICk7CiAgICBhZG1pbldhbGxldCA9IF93YWxsZXQ7CiAgICBBZG1pbldhbGxldFVwZGF0ZWQoYWRtaW5XYWxsZXQpOwogIH0KCiAgLyogQ2hhbmdlIHRva2Vuc1BlckV0aCBiZWZvcmUgSUNPIHN0YXJ0ICovCiAgCiAgZnVuY3Rpb24gdXBkYXRlVG9rZW5zUGVyRXRoKHVpbnQgX3Rva2Vuc1BlckV0aCkgb25seU93bmVyIHsKICAgIHJlcXVpcmUoIGF0Tm93KCkgPCBEQVRFX1BSRVNBTEVfU1RBUlQgKTsKICAgIHRva2Vuc1BlckV0aCA9IF90b2tlbnNQZXJFdGg7CiAgICBUb2tlbnNQZXJFdGhVcGRhdGVkKF90b2tlbnNQZXJFdGgpOwogIH0KCiAgLyogTWludGluZyBvZiBtYXJrZXRpbmcgdG9rZW5zIGJ5IG93bmVyICovCgogIGZ1bmN0aW9uIG1pbnRNYXJrZXRpbmcoYWRkcmVzcyBfcGFydGljaXBhbnQsIHVpbnQgX3Rva2Vucykgb25seU93bmVyIHsKICAgIC8vIGNoZWNrIGFtb3VudAogICAgcmVxdWlyZSggX3Rva2VucyA8PSBUT0tFTl9TVVBQTFlfTUtULnN1Yih0b2tlbnNJc3N1ZWRNa3QpICk7CiAgICAKICAgIC8vIHVwZGF0ZSBiYWxhbmNlcwogICAgYmFsYW5jZXNbX3BhcnRpY2lwYW50XSA9IGJhbGFuY2VzW19wYXJ0aWNpcGFudF0uYWRkKF90b2tlbnMpOwogICAgdG9rZW5zSXNzdWVkTWt0ICAgICAgICA9IHRva2Vuc0lzc3VlZE1rdC5hZGQoX3Rva2Vucyk7CiAgICB0b2tlbnNJc3N1ZWRUb3RhbCAgICAgID0gdG9rZW5zSXNzdWVkVG90YWwuYWRkKF90b2tlbnMpOwogICAgCiAgICAvLyBsb2NrZWQKICAgIGxvY2tlZFtfcGFydGljaXBhbnRdID0gdHJ1ZTsKICAgIAogICAgLy8gbG9nIHRoZSBtaW50aW5nCiAgICBUcmFuc2ZlcigweDAsIF9wYXJ0aWNpcGFudCwgX3Rva2Vucyk7CiAgICBUb2tlbnNNaW50ZWQoX3BhcnRpY2lwYW50LCBfdG9rZW5zLCBiYWxhbmNlc1tfcGFydGljaXBhbnRdKTsKICB9CgogIC8qIE93bmVyIGNsYXdiYWNrIG9mIHJlbWFpbmluZyBmdW5kcyBhZnRlciBjbGF3YmFjayBwZXJpb2QgKi8KICAvKiAoZm9yIHVzZSBpbiBjYXNlIG9mIGEgZmFpbGVkIENyb3dkc2FsZSkgKi8KICAKICBmdW5jdGlvbiBvd25lckNsYXdiYWNrKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIHJlcXVpcmUoIGF0Tm93KCkgPiBEQVRFX0lDT19FTkQgKyBDTEFXQkFDS19QRVJJT0QgKTsKICAgIHdhbGxldC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0KCiAgLyogVHJhbnNmZXIgb3V0IGFueSBhY2NpZGVudGFsbHkgc2VudCBFUkMyMCB0b2tlbnMgKi8KCiAgZnVuY3Rpb24gdHJhbnNmZXJBbnlFUkMyMFRva2VuKGFkZHJlc3MgdG9rZW5BZGRyZXNzLCB1aW50IGFtb3VudCkgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICByZXR1cm4gRVJDMjBJbnRlcmZhY2UodG9rZW5BZGRyZXNzKS50cmFuc2Zlcihvd25lciwgYW1vdW50KTsKICB9CgogIC8vIFByaXZhdGUgZnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0KCiAgLyogQWNjZXB0IEVUSCBkdXJpbmcgY3Jvd2RzYWxlIChjYWxsZWQgYnkgZGVmYXVsdCBmdW5jdGlvbikgKi8KCiAgZnVuY3Rpb24gYnV5VG9rZW5zKCkgcHJpdmF0ZSB7CiAgICB1aW50IHRzID0gYXROb3coKTsKICAgIGJvb2wgaXNQcmVzYWxlID0gZmFsc2U7CiAgICBib29sIGlzSWNvID0gZmFsc2U7CiAgICB1aW50IHRva2VucyA9IDA7CiAgICAKICAgIC8vIG1pbmltdW0gY29udHJpYnV0aW9uCiAgICByZXF1aXJlKCBtc2cudmFsdWUgPj0gTUlOX0NPTlRSSUJVVElPTiApOwogICAgCiAgICAvLyBvbmUgYWRkcmVzcyB0cmFuc2ZlciBoYXJkIGNhcAogICAgcmVxdWlyZSggaWNvRXRoZXJDb250cmlidXRlZFttc2cuc2VuZGVyXS5hZGQobXNnLnZhbHVlKSA8PSBNQVhfQ09OVFJJQlVUSU9OICk7CgogICAgLy8gY2hlY2sgZGF0ZXMgZm9yIHByZXNhbGUgb3IgSUNPCiAgICBpZiAodHMgPiBEQVRFX1BSRVNBTEVfU1RBUlQgJiYgdHMgPCBEQVRFX1BSRVNBTEVfRU5EKSBpc1ByZXNhbGUgPSB0cnVlOyAgCiAgICBpZiAodHMgPiBEQVRFX0lDT19TVEFSVCAmJiB0cyA8IERBVEVfSUNPX0VORCkgaXNJY28gPSB0cnVlOyAgCiAgICByZXF1aXJlKCBpc1ByZXNhbGUgfHwgaXNJY28gKTsKCiAgICAvLyBwcmVzYWxlIGNhcCBpbiBFdGhlcgogICAgaWYgKGlzUHJlc2FsZSkgcmVxdWlyZSggaWNvRXRoZXJSZWNlaXZlZC5hZGQobXNnLnZhbHVlKSA8PSBQUkVTQUxFX0VUSF9DQVAgKTsKICAgIAogICAgLy8gZ2V0IGJhc2VsaW5lIG51bWJlciBvZiB0b2tlbnMKICAgIHRva2VucyA9IHRva2Vuc1BlckV0aC5tdWwobXNnLnZhbHVlKSAvIDEgZXRoZXI7CiAgICAKICAgIC8vIGFwcGx5IHByZXNhbGUgYm9udXMKICAgIGlmIChpc1ByZXNhbGUpIHsKICAgICAgdG9rZW5zID0gdG9rZW5zLm11bCgxMDAgKyBCT05VU19QUkVTQUxFKSAvIDEwMDsKICAgIH0KICAgIAogICAgLy8gSUNPIHRva2VuIHZvbHVtZSBjYXAKICAgIHJlcXVpcmUoIHRva2Vuc0lzc3VlZEljby5hZGQodG9rZW5zKSA8PSBUT0tFTl9TVVBQTFlfSUNPICk7CgogICAgLy8gcmVnaXN0ZXIgdG9rZW5zCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAgICAgICAgICA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZCh0b2tlbnMpOwogICAgaWNvVG9rZW5zUmVjZWl2ZWRbbXNnLnNlbmRlcl0gPSBpY29Ub2tlbnNSZWNlaXZlZFttc2cuc2VuZGVyXS5hZGQodG9rZW5zKTsKICAgIHRva2Vuc0lzc3VlZEljbyAgICAgICAgICAgICAgID0gdG9rZW5zSXNzdWVkSWNvLmFkZCh0b2tlbnMpOwogICAgdG9rZW5zSXNzdWVkVG90YWwgICAgICAgICAgICAgPSB0b2tlbnNJc3N1ZWRUb3RhbC5hZGQodG9rZW5zKTsKICAgIAogICAgLy8gcmVnaXN0ZXIgRXRoZXIKICAgIGljb0V0aGVyUmVjZWl2ZWQgICAgICAgICAgICAgICAgPSBpY29FdGhlclJlY2VpdmVkLmFkZChtc2cudmFsdWUpOwogICAgaWNvRXRoZXJDb250cmlidXRlZFttc2cuc2VuZGVyXSA9IGljb0V0aGVyQ29udHJpYnV0ZWRbbXNnLnNlbmRlcl0uYWRkKG1zZy52YWx1ZSk7CiAgICAKICAgIC8vIGxvY2tlZAogICAgbG9ja2VkW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgIAogICAgLy8gbG9nIHRva2VuIGlzc3VhbmNlCiAgICBUcmFuc2ZlcigweDAsIG1zZy5zZW5kZXIsIHRva2Vucyk7CiAgICBUb2tlbnNJc3N1ZWQobXNnLnNlbmRlciwgdG9rZW5zLCBiYWxhbmNlc1ttc2cuc2VuZGVyXSwgbXNnLnZhbHVlKTsKCiAgICB3YWxsZXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICB9CiAgCiAgLy8gRVJDMjAgZnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLQoKICAvKiBPdmVycmlkZSAidHJhbnNmZXIiIChFUkMyMCkgKi8KCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXF1aXJlKCBpc1RyYW5zZmVyYWJsZSgpICk7CiAgICByZXF1aXJlKCBsb2NrZWRbbXNnLnNlbmRlcl0gPT0gZmFsc2UgKTsKICAgIHJlcXVpcmUoIGxvY2tlZFtfdG9dID09IGZhbHNlICk7CiAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfYW1vdW50KTsKICB9CiAgCiAgLyogT3ZlcnJpZGUgInRyYW5zZmVyRnJvbSIgKEVSQzIwKSAqLwoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXF1aXJlKCBpc1RyYW5zZmVyYWJsZSgpICk7CiAgICByZXF1aXJlKCBsb2NrZWRbX2Zyb21dID09IGZhbHNlICk7CiAgICByZXF1aXJlKCBsb2NrZWRbX3RvXSA9PSBmYWxzZSApOwogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfYW1vdW50KTsKICB9CgogIC8vIEV4dGVybmFsIGZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0KCiAgLyogUmVjbGFpbWluZyBvZiBmdW5kcyBieSBjb250cmlidXRvcnMgaW4gY2FzZSBvZiBhIGZhaWxlZCBjcm93ZHNhbGUgKi8KICAvKiAoaXQgd2lsbCBmYWlsIGlmIGFjY291bnQgaXMgZW1wdHkgYWZ0ZXIgb3duZXJDbGF3YmFjaykgKi8KCiAgLyogV2hpbGUgdGhlcmUgY291bGQgbm90IGhhdmUgYmVlbiBhbnkgdG9rZW4gdHJhbnNmZXJzIHlldCwgYSBjb250cmlidXRvciAqLwogIC8qIG1heSBoYXZlIHJlY2VpdmVkIG1pbnRlZCB0b2tlbnMsIHNvIHRoZSB0b2tlbiBiYWxhbmNlIGFmdGVyIGEgcmVmdW5kICovIAogIC8qIG1heSBzdGlsbCBiZSBwb3NpdGl2ZSAqLwogIAogIGZ1bmN0aW9uIHJlY2xhaW1GdW5kcygpIGV4dGVybmFsIHsKICAgIHVpbnQgdG9rZW5zOyAvLyB0b2tlbnMgdG8gZGVzdHJveQogICAgdWludCBhbW91bnQ7IC8vIHJlZnVuZCBhbW91bnQKICAgIAogICAgLy8gaWNvIGlzIGZpbmlzaGVkCiAgICByZXF1aXJlKCBhdE5vdygpID4gREFURV9JQ09fRU5EKTsKICAgIAogICAgLy8gY2hlY2sgaWYgcmVmdW5kIGhhcyBhbHJlYWR5IGJlZW4gY2xhaW1lZAogICAgcmVxdWlyZSggIXJlZnVuZENsYWltZWRbbXNnLnNlbmRlcl0gKTsKICAgIAogICAgLy8gY2hlY2sgaWYgdGhlcmUgaXMgYW55dGhpbmcgdG8gcmVmdW5kCiAgICByZXF1aXJlKCBpY29FdGhlckNvbnRyaWJ1dGVkW21zZy5zZW5kZXJdID4gMCApOwogICAgCiAgICAvLyB1cGRhdGUgdmFyaWFibGVzIGFmZmVjdGVkIGJ5IHJlZnVuZAogICAgdG9rZW5zID0gaWNvVG9rZW5zUmVjZWl2ZWRbbXNnLnNlbmRlcl07CiAgICBhbW91bnQgPSBpY29FdGhlckNvbnRyaWJ1dGVkW21zZy5zZW5kZXJdOwoKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKHRva2Vucyk7CiAgICB0b2tlbnNJc3N1ZWRUb3RhbCAgICA9IHRva2Vuc0lzc3VlZFRvdGFsLnN1Yih0b2tlbnMpOwogICAgCiAgICByZWZ1bmRDbGFpbWVkW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgIAogICAgLy8gdHJhbnNmZXIgb3V0IHJlZnVuZAogICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQpOwogICAgCiAgICAvLyBsb2cKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDB4MCwgdG9rZW5zKTsKICAgIFJlZnVuZChtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vucyk7CiAgfQoKICAvKiBDbGFpbWluZyBvZiAiYWlyZHJvcHBlZCIgdG9rZW5zIGluIGNhc2Ugb2Ygc3VjY2Vzc2Z1bCBjcm93ZHNhbGUgKi8KICAvKiBDYW4gYmUgZG9uZSBieSB0b2tlbiBob2xkZXIsIG9yIGJ5IGFkbWluV2FsbGV0ICovIAoKICBmdW5jdGlvbiBjbGFpbUFpcmRyb3AoKSBleHRlcm5hbCB7CiAgICBkb0FpcmRyb3AobXNnLnNlbmRlcik7CiAgfQoKICBmdW5jdGlvbiBhZG1pbkNsYWltQWlyZHJvcChhZGRyZXNzIF9wYXJ0aWNpcGFudCkgZXh0ZXJuYWwgewogICAgcmVxdWlyZSggbXNnLnNlbmRlciA9PSBhZG1pbldhbGxldCApOwogICAgZG9BaXJkcm9wKF9wYXJ0aWNpcGFudCk7CiAgfQoKICBmdW5jdGlvbiBhZG1pbkNsYWltQWlyZHJvcE11bHRpcGxlKGFkZHJlc3NbXSBfYWRkcmVzc2VzKSBleHRlcm5hbCB7CiAgICByZXF1aXJlKCBtc2cuc2VuZGVyID09IGFkbWluV2FsbGV0ICk7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfYWRkcmVzc2VzLmxlbmd0aDsgaSsrKSBkb0FpcmRyb3AoX2FkZHJlc3Nlc1tpXSk7CiAgfSAgCiAgCiAgZnVuY3Rpb24gZG9BaXJkcm9wKGFkZHJlc3MgX3BhcnRpY2lwYW50KSBpbnRlcm5hbCB7CiAgICB1aW50IGFpcmRyb3AgPSBjb21wdXRlQWlyZHJvcChfcGFydGljaXBhbnQpOwoKICAgIHJlcXVpcmUoIGFpcmRyb3AgPiAwICk7CgogICAgLy8gdXBkYXRlIGJhbGFuY2VzIGFuZCB0b2tlbiBpc3N1ZSB2b2x1bWUKICAgIGFpcmRyb3BDbGFpbWVkW19wYXJ0aWNpcGFudF0gPSB0cnVlOwogICAgYmFsYW5jZXNbX3BhcnRpY2lwYW50XSA9IGJhbGFuY2VzW19wYXJ0aWNpcGFudF0uYWRkKGFpcmRyb3ApOwogICAgdG9rZW5zSXNzdWVkVG90YWwgICAgICA9IHRva2Vuc0lzc3VlZFRvdGFsLmFkZChhaXJkcm9wKTsKICAgIHRva2Vuc0NsYWltZWRBaXJkcm9wICAgPSB0b2tlbnNDbGFpbWVkQWlyZHJvcC5hZGQoYWlyZHJvcCk7CiAgICAKICAgIC8vIGxvZwogICAgQWlyZHJvcChfcGFydGljaXBhbnQsIGFpcmRyb3AsIGJhbGFuY2VzW19wYXJ0aWNpcGFudF0pOwogICAgVHJhbnNmZXIoMHgwLCBfcGFydGljaXBhbnQsIGFpcmRyb3ApOwogIH0KCiAgLyogRnVuY3Rpb24gdG8gZXN0aW1hdGUgYWlyZHJvcCBhbW91bnQuIEZvciBzb21lIGFjY291bnRzLCB0aGUgdmFsdWUgb2YgKi8KICAvKiB0b2tlbnMgcmVjZWl2ZWQgYnkgY2FsbGluZyBjbGFpbUFpcmRyb3AoKSBtYXkgYmUgbGVzcyB0aGFuIGdhcyBjb3N0cyAqLwogIAogIC8qIElmIGFuIGFjY291bnQgaGFzIHRva2VucyBmcm9tIHRoZSBpY28sIHRoZSBhbW91bnQgYWZ0ZXIgdGhlIGFpcmRyb3AgKi8KICAvKiB3aWxsIGJlIG5ld0JhbGFuY2UgPSB0b2tlbnMgKiBUT0tFTl9TVVBQTFlfSUNPIC8gdG9rZW5zSXNzdWVkSWNvICovCiAgICAgIAogIGZ1bmN0aW9uIGNvbXB1dGVBaXJkcm9wKGFkZHJlc3MgX3BhcnRpY2lwYW50KSBjb25zdGFudCByZXR1cm5zICh1aW50IGFpcmRyb3ApIHsKICAgIC8vIHJldHVybiAwIGlmIGl0J3MgdG9vIGVhcmx5CiAgICBpZiAoIGF0Tm93KCkgPCBEQVRFX0lDT19FTkQgKSByZXR1cm4gMDsKICAgIAogICAgLy8gcmV0dXJuIDAgaWYgdGhlIGFpcmRyb3Agd2FzIGFscmVhZHkgY2xhaW1lZAogICAgaWYoIGFpcmRyb3BDbGFpbWVkW19wYXJ0aWNpcGFudF0gKSByZXR1cm4gMDsKCiAgICAvLyByZXR1cm4gMCBpZiB0aGUgYWNjb3VudCBkb2VzIG5vdCBob2xkIGFueSBjcm93ZHNhbGUgdG9rZW5zCiAgICBpZiggaWNvVG9rZW5zUmVjZWl2ZWRbX3BhcnRpY2lwYW50XSA9PSAwICkgcmV0dXJuIDA7CiAgICAKICAgIC8vIGFpcmRyb3AgYW1vdW50CiAgICB1aW50IHRva2VucyA9IGljb1Rva2Vuc1JlY2VpdmVkW19wYXJ0aWNpcGFudF07CiAgICB1aW50IG5ld0JhbGFuY2UgPSB0b2tlbnMubXVsKFRPS0VOX1NVUFBMWV9JQ08pIC8gdG9rZW5zSXNzdWVkSWNvOwogICAgYWlyZHJvcCA9IG5ld0JhbGFuY2UgLSB0b2tlbnM7CiAgfSAgCgogIC8qIE11bHRpcGxlIHRva2VuIHRyYW5zZmVycyBmcm9tIG9uZSBhZGRyZXNzIHRvIHNhdmUgZ2FzICovCiAgLyogKGxvbmdlciBfYW1vdW50cyBhcnJheSBub3QgYWNjZXB0ZWQgPSBzYW5pdHkgY2hlY2spICovCgogIGZ1bmN0aW9uIHRyYW5zZmVyTXVsdGlwbGUoYWRkcmVzc1tdIF9hZGRyZXNzZXMsIHVpbnRbXSBfYW1vdW50cykgZXh0ZXJuYWwgewogICAgcmVxdWlyZSggaXNUcmFuc2ZlcmFibGUoKSApOwogICAgcmVxdWlyZSggbG9ja2VkW21zZy5zZW5kZXJdID09IGZhbHNlICk7CiAgICByZXF1aXJlKCBfYWRkcmVzc2VzLmxlbmd0aCA9PSBfYW1vdW50cy5sZW5ndGggKTsKICAgIGZvciAodWludCBpID0gMDsgaSA8IF9hZGRyZXNzZXMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGxvY2tlZFtfYWRkcmVzc2VzW2ldXSA9PSBmYWxzZSkgc3VwZXIudHJhbnNmZXIoX2FkZHJlc3Nlc1tpXSwgX2Ftb3VudHNbaV0pOwogICAgfQogIH0gIAoKfQ=='.
	

]
