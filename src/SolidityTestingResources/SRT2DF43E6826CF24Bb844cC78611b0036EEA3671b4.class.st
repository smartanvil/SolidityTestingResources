Class {
	#name : #SRT2DF43E6826CF24Bb844cC78611b0036EEA3671b4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2DF43E6826CF24Bb844cC78611b0036EEA3671b4 >> base64 [
	^ 'Y29udHJhY3QgSUVSQzIwVG9rZW4gewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkge30KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7fQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fQoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KY29udHJhY3QgSUtZQyB7CiAgICBmdW5jdGlvbiBnZXRLeWNMZXZlbChhZGRyZXNzIF9jbGllbnRBZGRyZXNzKSBjb25zdGFudCByZXR1cm5zICh1aW50IGxldmVsKXt9CiAgICBmdW5jdGlvbiBnZXRJc0NvbXBhbnkoYWRkcmVzcyBfY2xpZW50QWRkcmVzcykgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBzdGF0ZSl7fQp9CmNvbnRyYWN0IElUb2tlbiB7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KSB7fQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHt9CiAgICBmdW5jdGlvbiB0cmFuc2ZlclZpYVByb3h5KGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAodWludCBlcnJvcikge30KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbVZpYVByb3h5KGFkZHJlc3MgX3NvdXJjZSwgYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAodWludCBlcnJvcikge30KICAgIGZ1bmN0aW9uIGFwcHJvdmVGcm9tUHJveHkoYWRkcmVzcyBfc291cmNlLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAodWludCBlcnJvcikge30KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHt9CiAgICBmdW5jdGlvbiBpc3N1ZU5ld0NvaW5zKGFkZHJlc3MgX2Rlc3RpbmF0aW9uLCB1aW50IF9hbW91bnQpIHJldHVybnMgKHVpbnQgZXJyb3Ipe30KICAgIGZ1bmN0aW9uIGlzc3VlTmV3SGVsZENvaW5zKGFkZHJlc3MgX2Rlc3RpbmF0aW9uLCB1aW50IF9hbW91bnQpe30KICAgIGZ1bmN0aW9uIGRlc3Ryb3lPbGRDb2lucyhhZGRyZXNzIF9kZXN0aW5hdGlvbiwgdWludCBfYW1vdW50KSByZXR1cm5zICh1aW50IGVycm9yKSB7fQogICAgZnVuY3Rpb24gdGFrZVRva2Vuc0ZvckJhY2tpbmcoYWRkcmVzcyBfZGVzdGluYXRpb24sIHVpbnQgX2Ftb3VudCl7fQp9CmNvbnRyYWN0IElUb2tlblJlY2lwaWVudCB7CglmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKTsKfQoKY29udHJhY3QgQ3JlYXRpb25Db250cmFjdHsKCiAgICBhZGRyZXNzIHB1YmxpYyBjdXJhdG9yOwogICAgYWRkcmVzcyBwdWJsaWMgZGV2OwogICAgSVRva2VuIHRva2VuQ29udHJhY3Q7CgogICAgZnVuY3Rpb24gQ3JlYXRpb25Db250cmFjdCgpewogICAgICAgIGRldiA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlKGFkZHJlc3MgX2Rlc3RpbmF0aW9uLCB1aW50IF9hbW91bnQpewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGN1cmF0b3IpIHRocm93OwoKICAgICAgICB0b2tlbkNvbnRyYWN0Lmlzc3VlTmV3Q29pbnMoX2Rlc3RpbmF0aW9uLCBfYW1vdW50KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY3JlYXRlSGVsZChhZGRyZXNzIF9kZXN0aW5hdGlvbiwgdWludCBfYW1vdW50KXsKICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gY3VyYXRvcikgdGhyb3c7CiAgICAgICAgIAogICAgICAgICB0b2tlbkNvbnRyYWN0Lmlzc3VlTmV3SGVsZENvaW5zKF9kZXN0aW5hdGlvbiwgX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q3JlYXRpb25DdXJhdG9yKGFkZHJlc3MgX2N1cmF0b3JBZHJlc3MpewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGRldikgdGhyb3c7CgogICAgICAgIGN1cmF0b3IgPSBfY3VyYXRvckFkcmVzczsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRUb2tlbkNvbnRyYWN0KGFkZHJlc3MgX2NvbnRyYWN0QWRkcmVzcyl7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gY3VyYXRvcikgdGhyb3c7CgogICAgICAgIHRva2VuQ29udHJhY3QgPSBJVG9rZW4oX2NvbnRyYWN0QWRkcmVzcyk7CiAgICB9CgogICAgZnVuY3Rpb24ga2lsbENvbnRyYWN0KCl7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gZGV2KSB0aHJvdzsKCiAgICAgICAgc2VsZmRlc3RydWN0KGRldik7CiAgICB9CgogICAgZnVuY3Rpb24gdG9rZW5BZGRyZXNzKCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyB0b2tlbkFkZHJlc3MpewogICAgICAgIHJldHVybiBhZGRyZXNzKHRva2VuQ29udHJhY3QpOwogICAgfQp9Cgpjb250cmFjdCBEZXN0cnVjdGlvbkNvbnRyYWN0ewoKICAgIGFkZHJlc3MgcHVibGljIGN1cmF0b3I7CiAgICBhZGRyZXNzIHB1YmxpYyBkZXY7CiAgICBJVG9rZW4gdG9rZW5Db250cmFjdDsKCiAgICBmdW5jdGlvbiBEZXN0cnVjdGlvbkNvbnRyYWN0KCl7CiAgICAgICAgZGV2ID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBmdW5jdGlvbiBkZXN0cm95KHVpbnQgX2Ftb3VudCl7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gY3VyYXRvcikgdGhyb3c7CgogICAgICAgIHRva2VuQ29udHJhY3QuZGVzdHJveU9sZENvaW5zKG1zZy5zZW5kZXIsIF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldERlc3RydWN0aW9uQ3VyYXRvcihhZGRyZXNzIF9jdXJhdG9yQWRyZXNzKXsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBkZXYpIHRocm93OwoKICAgICAgICBjdXJhdG9yID0gX2N1cmF0b3JBZHJlc3M7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0VG9rZW5Db250cmFjdChhZGRyZXNzIF9jb250cmFjdEFkZHJlc3MpewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGN1cmF0b3IpIHRocm93OwoKICAgICAgICB0b2tlbkNvbnRyYWN0ID0gSVRva2VuKF9jb250cmFjdEFkZHJlc3MpOwogICAgfQoKICAgIGZ1bmN0aW9uIGtpbGxDb250cmFjdCgpewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGRldikgdGhyb3c7CgogICAgICAgIHNlbGZkZXN0cnVjdChkZXYpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRva2VuQWRkcmVzcygpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MgdG9rZW5BZGRyZXNzKXsKICAgICAgICByZXR1cm4gYWRkcmVzcyh0b2tlbkNvbnRyYWN0KTsKICAgIH0KfQoKCmNvbnRyYWN0IFNwYWNlQ29pbiBpcyBJRVJDMjBUb2tlbnsKCiAgc3RydWN0IGFjY291bnR7CiAgICB1aW50IGF2YWxpYWJsZUJhbGFuY2U7CiAgICB1aW50IGhlbGRCYWxhbmNlOwogICAgdWludCBhbW91bnRUb0NsYWltOwogICAgdWludCBsYXN0Q2xhaW1lZDsKICB9CgogICAgLy8KICAgIC8qIFZhcmlhYmxlcyAqLwogICAgLy8KCiAgICBhZGRyZXNzIHB1YmxpYyBkZXY7CiAgICBhZGRyZXNzIHB1YmxpYyBjdXJhdG9yOwogICAgYWRkcmVzcyBwdWJsaWMgY3JlYXRpb25BZGRyZXNzOwogICAgYWRkcmVzcyBwdWJsaWMgZGVzdHJ1Y3Rpb25BZGRyZXNzOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSAwOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxIZWxkU3VwcGx5ID0gMDsKICAgIGJvb2wgcHVibGljIGxvY2tkb3duID0gZmFsc2U7CiAgICB1aW50IHB1YmxpYyBibG9ja3NQZXJNb250aDsKICAgIHVpbnQgcHVibGljIGRlZmF1bHRDbGFpbVBlcmNlbnRhZ2U7CiAgICB1aW50IHB1YmxpYyBjbGFpbVRyZXNob2xkOwoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICdTcGFjZUNvaW4nOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAnU0NUJzsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDg7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBhY2NvdW50KSBhY2NvdW50czsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICAvLwogICAgLyogRXZlbnRzICovCiAgICAvLwoKICAgIGV2ZW50IFRva2Vuc0NsYWltZWQoYWRkcmVzcyBfZGVzdGluYXRpb24sIHVpbnQgX2Ftb3VudCk7CiAgICBldmVudCBDcmVhdGUoYWRkcmVzcyBfZGVzdGluYXRpb24sIHVpbnQgX2Ftb3VudCk7CiAgICBldmVudCBDcmVhdGVIZWxkKGFkZHJlc3MgX2Rlc3RpbmF0aW9uLCB1aW50IF9hbW91bnQpOwogICAgZXZlbnQgRGVzdHJveShhZGRyZXNzIF9kZXN0aW5hdGlvbiwgdWludCBfYW1vdW50KTsKCiAgICAvLwogICAgLyogQ29uc3RydWN0b3IgKi8KICAgIC8vCgogICAgZnVuY3Rpb24gU3BhY2VDb2luKCkgewogICAgICAgIGRldiA9IG1zZy5zZW5kZXI7CiAgICAgICAgbGFzdEJsb2NrQ2xhaW1lZCA9IGJsb2NrLm51bWJlcjsKICAgIH0KCiAgICAvLwogICAgLyogVG9rZW4gcmVsYXRlZCBtZXRob2RzICovCiAgICAvLwoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGFjY291bnRzW19vd25lcl0uYXZhbGlhYmxlQmFsYW5jZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gaGVsZEJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGFjY291bnRzW19vd25lcl0uaGVsZEJhbGFuY2U7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYoYWNjb3VudHNbbXNnLnNlbmRlcl0uYXZhbGlhYmxlQmFsYW5jZSA8IF9hbW91bnQpIHRocm93OwogICAgICAgIGlmKGFjY291bnRzW190b10uYXZhbGlhYmxlQmFsYW5jZSArIF9hbW91bnQgPD0gYWNjb3VudHNbX3RvXS5hdmFsaWFibGVCYWxhbmNlKSB0aHJvdzsKICAgICAgICBpZihsb2NrZG93bikgdGhyb3c7CgogICAgICAgIGFjY291bnRzW21zZy5zZW5kZXJdLmF2YWxpYWJsZUJhbGFuY2UgLT0gX2Ftb3VudDsKICAgICAgICBhY2NvdW50c1tfdG9dLmF2YWxpYWJsZUJhbGFuY2UgKz0gX2Ftb3VudDsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZihhY2NvdW50c1tfZnJvbV0uYXZhbGlhYmxlQmFsYW5jZSA8IF9hbW91bnQpIHRocm93OwogICAgICAgIGlmKGFjY291bnRzW190b10uYXZhbGlhYmxlQmFsYW5jZSArIF9hbW91bnQgPD0gYWNjb3VudHNbX3RvXS5hdmFsaWFibGVCYWxhbmNlKSB0aHJvdzsKICAgICAgICBpZihfYW1vdW50ID4gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pIHRocm93OwogICAgICAgIGlmKGxvY2tkb3duKSB0aHJvdzsKCiAgICAgICAgYWNjb3VudHNbX2Zyb21dLmF2YWxpYWJsZUJhbGFuY2UgLT0gX2Ftb3VudDsKICAgICAgICBhY2NvdW50c1tfdG9dLmF2YWxpYWJsZUJhbGFuY2UgKz0gX2Ftb3VudDsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfYW1vdW50OwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgZnVuY3Rpb24gY2xhaW1IZWxkQmFsYW5jZSgpewogICAgICBpZiAoYWNjb3VudHNbbXNnLnNlbmRlcl0uaGVsZEJhbGFuY2UgPT0gMCkgdGhyb3c7CiAgICAgIGlmIChhY2NvdW50c1ttc2cuc2VuZGVyXS5sYXN0Q2xhaW1lZCArIGJsb2Nrc1Blck1vbnRoID49IGJsb2NrLm51bWJlcikgdGhyb3c7IAoKICAgICAgdWludCB2YWx1ZVRvQ2xhaW0gPSAwOwogICAgICBpZiAoYWNjb3VudHNbbXNnLnNlbmRlcl0uYW1vdW50VG9DbGFpbSA9PSAwKXsKICAgICAgICAgIHZhbHVlVG9DbGFpbSA9IChhY2NvdW50c1ttc2cuc2VuZGVyXS5oZWxkQmFsYW5jZSAqIGRlZmF1bHRDbGFpbVBlcmNlbnRhZ2UpIC8gMTAwOwogICAgICAgICAgaWYgKHZhbHVlVG9DbGFpbSA9PSAwKSB0aHJvdzsKICAgICAgfWVsc2V7CiAgICAgICAgICBpZiAoYWNjb3VudHNbbXNnLnNlbmRlcl0uYW1vdW50VG9DbGFpbSA8PSBhY2NvdW50c1ttc2cuc2VuZGVyXS5oZWxkQmFsYW5jZSl7CiAgICAgICAgICAgICAgdmFsdWVUb0NsYWltID0gYWNjb3VudHNbbXNnLnNlbmRlcl0uYW1vdW50VG9DbGFpbTsKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIHZhbHVlVG9DbGFpbSA9IGFjY291bnRzW21zZy5zZW5kZXJdLmhlbGRCYWxhbmNlOwogICAgICAgICAgfQogICAgICB9CiAgICAgIAogICAgICBpZiAoYWNjb3VudHNbbXNnLnNlbmRlcl0uaGVsZEJhbGFuY2UgPCBjbGFpbVRyZXNob2xkKXsKICAgICAgICAgIHZhbHVlVG9DbGFpbSA9IGFjY291bnRzW21zZy5zZW5kZXJdLmhlbGRCYWxhbmNlOyAKICAgICAgfQoKICAgICAgdG90YWxTdXBwbHkgKz0gdmFsdWVUb0NsYWltOwogICAgICB0b3RhbEhlbGRTdXBwbHkgLT0gdmFsdWVUb0NsYWltOwogICAgICBhY2NvdW50c1ttc2cuc2VuZGVyXS5hdmFsaWFibGVCYWxhbmNlICs9IHZhbHVlVG9DbGFpbTsKICAgICAgYWNjb3VudHNbbXNnLnNlbmRlcl0uaGVsZEJhbGFuY2UgLT0gdmFsdWVUb0NsYWltOwogICAgICBhY2NvdW50c1ttc2cuc2VuZGVyXS5sYXN0Q2xhaW1lZCA9IGJsb2NrLm51bWJlcjsKICAgICAgYWNjb3VudHNbbXNnLnNlbmRlcl0uYW1vdW50VG9DbGFpbSA9IDA7CiAgICAgIFRva2Vuc0NsYWltZWQobXNnLnNlbmRlciwgdmFsdWVUb0NsYWltKTsKICAgICAgQ3JlYXRlKG1zZy5zZW5kZXIsIHZhbHVlVG9DbGFpbSk7CiAgICAgIFRyYW5zZmVyKDB4MCwgbXNnLnNlbmRlciwgdmFsdWVUb0NsYWltKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc3N1ZU5ld0NvaW5zKGFkZHJlc3MgX2Rlc3RpbmF0aW9uLCB1aW50IF9hbW91bnQpewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNyZWF0aW9uQWRkcmVzcykgdGhyb3c7CiAgICAgICAgaWYoYWNjb3VudHNbX2Rlc3RpbmF0aW9uXS5hdmFsaWFibGVCYWxhbmNlICsgX2Ftb3VudCA8IGFjY291bnRzW19kZXN0aW5hdGlvbl0uYXZhbGlhYmxlQmFsYW5jZSkgdGhyb3c7CiAgICAgICAgaWYodG90YWxTdXBwbHkgKyBfYW1vdW50IDwgdG90YWxTdXBwbHkpIHRocm93OwoKICAgICAgICB0b3RhbFN1cHBseSArPSBfYW1vdW50OwogICAgICAgIGFjY291bnRzW19kZXN0aW5hdGlvbl0uYXZhbGlhYmxlQmFsYW5jZSArPSBfYW1vdW50OwogICAgICAgIENyZWF0ZShfZGVzdGluYXRpb24sIF9hbW91bnQpOwogICAgICAgIFRyYW5zZmVyKDB4MCwgX2Rlc3RpbmF0aW9uLCBfYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc3N1ZU5ld0hlbGRDb2lucyhhZGRyZXNzIF9kZXN0aW5hdGlvbiwgdWludCBfYW1vdW50KXsKICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gY3JlYXRpb25BZGRyZXNzKSB0aHJvdzsKICAgICAgaWYoYWNjb3VudHNbX2Rlc3RpbmF0aW9uXS5oZWxkQmFsYW5jZSArIF9hbW91bnQgPCBhY2NvdW50c1tfZGVzdGluYXRpb25dLmhlbGRCYWxhbmNlKSB0aHJvdzsKICAgICAgaWYodG90YWxTdXBwbHkgKyB0b3RhbEhlbGRTdXBwbHkgKyBfYW1vdW50IDwgdG90YWxTdXBwbHkgKyB0b3RhbEhlbGRTdXBwbHkpIHRocm93OwoKICAgICAgaWYoYWNjb3VudHNbX2Rlc3RpbmF0aW9uXS5sYXN0Q2xhaW1lZCA9PSAwKXsKICAgICAgICAgIGFjY291bnRzW19kZXN0aW5hdGlvbl0ubGFzdENsYWltZWQgPSBibG9jay5udW1iZXI7CiAgICAgIH0gIAogICAgICB0b3RhbEhlbGRTdXBwbHkgKz0gX2Ftb3VudDsKICAgICAgYWNjb3VudHNbX2Rlc3RpbmF0aW9uXS5oZWxkQmFsYW5jZSArPSBfYW1vdW50OwogICAgICBDcmVhdGVIZWxkKF9kZXN0aW5hdGlvbiwgX2Ftb3VudCk7CgogICAgfQoKICAgIGZ1bmN0aW9uIGRlc3Ryb3lPbGRDb2lucyhhZGRyZXNzIF9kZXN0aW5hdGlvbiwgdWludCBfYW1vdW50KXsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBkZXN0cnVjdGlvbkFkZHJlc3MpIHRocm93OwogICAgICAgIGlmIChhY2NvdW50c1tfZGVzdGluYXRpb25dLmF2YWxpYWJsZUJhbGFuY2UgPCBfYW1vdW50KSB0aHJvdzsKCiAgICAgICAgdG90YWxTdXBwbHkgLT0gX2Ftb3VudDsKICAgICAgICBhY2NvdW50c1tfZGVzdGluYXRpb25dLmF2YWxpYWJsZUJhbGFuY2UgLT0gX2Ftb3VudDsKICAgICAgICBEZXN0cm95KF9kZXN0aW5hdGlvbiwgX2Ftb3VudCk7CiAgICAgICAgVHJhbnNmZXIoX2Rlc3RpbmF0aW9uLCAweDAsIF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbGxIZWxkRGF0YShhZGRyZXNzW10gX2FjY291bnRzLCB1aW50W10gX2Ftb3VudHNUb0NsYWltKXsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBjdXJhdG9yKSB0aHJvdzsKICAgICAgICBpZiAoX2FjY291bnRzLmxlbmd0aCAhPSBfYW1vdW50c1RvQ2xhaW0ubGVuZ3RoKSB0aHJvdzsKCiAgICAgICAgZm9yICh1aW50IGNudCA9IDA7IGNudCA8IF9hY2NvdW50cy5sZW5ndGg7IGNudCsrKXsKICAgICAgICAgIGFjY291bnRzW19hY2NvdW50c1tjbnRdXS5hbW91bnRUb0NsYWltID0gX2Ftb3VudHNUb0NsYWltW2NudF07CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldFRva2VuQ3VyYXRvcihhZGRyZXNzIF9jdXJhdG9yQWRkcmVzcyl7CiAgICAgICAgaWYoIG1zZy5zZW5kZXIgIT0gZGV2KSB0aHJvdzsKCiAgICAgICAgY3VyYXRvciA9IF9jdXJhdG9yQWRkcmVzczsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDcmVhdGlvbkFkZHJlc3MoYWRkcmVzcyBfY29udHJhY3RBZGRyZXNzKXsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBjdXJhdG9yKSB0aHJvdzsKCiAgICAgICAgY3JlYXRpb25BZGRyZXNzID0gX2NvbnRyYWN0QWRkcmVzczsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXREZXN0cnVjdGlvbkFkZHJlc3MoYWRkcmVzcyBfY29udHJhY3RBZGRyZXNzKXsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBjdXJhdG9yKSB0aHJvdzsKCiAgICAgICAgZGVzdHJ1Y3Rpb25BZGRyZXNzID0gX2NvbnRyYWN0QWRkcmVzczsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRCbG9ja3NQZXJNb250aCh1aW50IF9ibG9ja3MpewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGN1cmF0b3IpIHRocm93OwoKICAgICAgICBibG9ja3NQZXJNb250aCA9IF9ibG9ja3M7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0RGVmYXVsdENsYWltUGVyY2VudGFnZSh1aW50IF9wZXJjZW50YWdlKXsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBjdXJhdG9yKSB0aHJvdzsKICAgICAgICBpZiAoX3BlcmNlbnRhZ2UgPiAxMDApIHRocm93OwoKICAgICAgICBkZWZhdWx0Q2xhaW1QZXJjZW50YWdlID0gX3BlcmNlbnRhZ2U7CiAgICB9CgogICAgZnVuY3Rpb24gZW1lcmdlbmN5TG9jaygpewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGN1cmF0b3IgJiYgbXNnLnNlbmRlciAhPSBkZXYpIHRocm93OwoKICAgICAgICBsb2NrZG93biA9ICFsb2NrZG93bjsKICAgIH0KCiAgICBmdW5jdGlvbiBraWxsQ29udHJhY3QoKXsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBkZXYpIHRocm93OwoKICAgICAgICBzZWxmZGVzdHJ1Y3QoZGV2KTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgSVRva2VuUmVjaXBpZW50IHNwZW5kZXIgPSBJVG9rZW5SZWNpcGllbnQoX3NwZW5kZXIpOwogICAgICAgIHNwZW5kZXIucmVjZWl2ZUFwcHJvdmFsKG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgdWludCBwdWJsaWMgYmxvY2tSZXdhcmQ7CiAgICB1aW50IHB1YmxpYyBsYXN0QmxvY2tDbGFpbWVkOwoKICAgIGZ1bmN0aW9uIGdldE1pbmluZ1Jld2FyZCgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYmxvY2suY29pbmJhc2UpOwogICAgICAgIHVpbnQgYW1vdW50ID0gKGJsb2NrLm51bWJlciAtIGxhc3RCbG9ja0NsYWltZWQpICogYmxvY2tSZXdhcmQ7CiAgICAgICAgaWYoYWNjb3VudHNbbXNnLnNlbmRlcl0uYXZhbGlhYmxlQmFsYW5jZSArIGFtb3VudCA8IGFjY291bnRzW21zZy5zZW5kZXJdLmF2YWxpYWJsZUJhbGFuY2UpIHRocm93OwogICAgICAgIGlmKHRvdGFsU3VwcGx5ICsgYW1vdW50IDwgdG90YWxTdXBwbHkpIHRocm93OwoKICAgICAgICB0b3RhbFN1cHBseSArPSBhbW91bnQ7CiAgICAgICAgYWNjb3VudHNbbXNnLnNlbmRlcl0uYXZhbGlhYmxlQmFsYW5jZSArPSBhbW91bnQ7CiAgICAgICAgQ3JlYXRlKG1zZy5zZW5kZXIsIGFtb3VudCk7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBtc2cuc2VuZGVyLCBhbW91bnQpOwoKICAgICAgICBsYXN0QmxvY2tDbGFpbWVkID0gYmxvY2subnVtYmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJsb2NrUmV3YXJkKHVpbnQgX2Jsb2NrUmV3YXJkKXsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBjdXJhdG9yKSB0aHJvdzsKCiAgICAgICAgYmxvY2tSZXdhcmQgPSBfYmxvY2tSZXdhcmQ7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldENsYWltVHJlc2hvbGQodWludCBfY2xhaW1UcmVzaG9sZCl7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gY3VyYXRvcikgdGhyb3c7CgogICAgICAgIGNsYWltVHJlc2hvbGQgPSBfY2xhaW1UcmVzaG9sZDsKICAgIH0KICAgIAp9'.
	

]
