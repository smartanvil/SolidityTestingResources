Class {
	#name : #SRT6e5f94d66846e05eb8a5f83c9c9691ee72fd5e9e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6e5f94d66846e05eb8a5f83c9c9691ee72fd5e9e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCmxpYnJhcnkgU2FmZUVSQzIwIHsKICBmdW5jdGlvbiBzYWZlVHJhbnNmZXIoRVJDMjBCYXNpYyB0b2tlbiwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgYXNzZXJ0KHRva2VuLnRyYW5zZmVyKHRvLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gc2FmZVRyYW5zZmVyRnJvbShFUkMyMCB0b2tlbiwgYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBpbnRlcm5hbCB7CiAgICBhc3NlcnQodG9rZW4udHJhbnNmZXJGcm9tKGZyb20sIHRvLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFwcHJvdmUoRVJDMjAgdG9rZW4sIGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgYXNzZXJ0KHRva2VuLmFwcHJvdmUoc3BlbmRlciwgdmFsdWUpKTsKICB9Cn0KCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgogICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCmNvbnRyYWN0IEJvdW50eU1hbmFnZXIgaXMgT3duYWJsZSAgewoJdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgoJCgoJCgkvKlZhcmlhYmxlcyBhYm91dCB0aGUgdG9rZW4gY29udHJhY3QgKi8JCglQZWN1bGl1bSBwdWJsaWMgcGVjdWw7IC8vIFRoZSBQZWN1bGl1bSB0b2tlbgoJYm9vbCBwdWJsaWMgaW5pdFBlY3VsOyAvLyBib29sZWFuIHRvIGtub3cgaWYgdGhlIFBlY3VsaXVtIHRva2VuIGFkZHJlc3MgaGFzIGJlZW4gaW5pdAoJCglldmVudCBJbml0aWFsaXplZFRva2VuKGFkZHJlc3MgY29udHJhY3RUb2tlbik7CgkKCS8qVmFyaWFibGVzIGFib3V0IHRoZSBib3VudHkgbWFuYWdlciAqLwoJYWRkcmVzcyBwdWJsaWMgYm91bnR5bWFuYWdlciA7IC8vIGFkZHJlc3Mgb2YgdGhlIGJvdW50eSBtYW5hZ2VyIAoJdWludDI1NiBwdWJsaWMgYm91bnR5bWFuYWdlclNoYXJlOyAvLyBuYiB0b2tlbiBmb3IgdGhlIGJvdW50eW1hbmFnZXIKCWJvb2wgcHVibGljIEZpcnN0X3BheV9ib3VudHltYW5hZ2VyOyAvLyBib29sZWFuIHRvIHRlc3QgaWYgdGhlIGZpcnN0IHBheSBoYXMgYmVlbiBzZW5kIHRvIHRoZSBib3VudHltYW5hZ2VyCgl1aW50MjU2IHB1YmxpYyBmaXJzdF9wYXk7IC8vIHBvdXJjZW50IG9mIHRoZSBmaXJzdCBwYXkgcmF0ZQoJdWludDI1NiBwdWJsaWMgbW9udGx5X3BheTsgLy8gcG91cmNlbnQgb2YgdGhlIG1vbnRseSBwYXkgcmF0ZQoJYm9vbCBwdWJsaWMgYm91bnR5SW5pdDsgLy8gYm9vbGVhbiB0byBrbm93IGlmIHRoZSBib3VudHkgYWRkcmVzcyBoYXMgYmVlbiBpbml0Cgl1aW50MjU2IHB1YmxpYyBwYXlkYXk7IC8vIERheSB3aGVuIHRoZSBib3VudHkgbWFuYWdlciBpcyBwYWlkCgl1aW50MjU2IHB1YmxpYyBuYk1vbnRoc1BheTsgLy8gVGhlIG1vbnRseSBwYXkgaXMgc2VudCBmb3IgNiBtb250aHMKCglldmVudCBJbml0aWFsaXplZE1hbmFnZXIoYWRkcmVzcyBNYW5hZ2VyQWRkKTsKCWV2ZW50IEZpcnN0UGF5U2VuZCh1aW50MjU2IGZpcnN0LGFkZHJlc3MgcmVjZWl2ZXIpOwoJZXZlbnQgTW9udGhseVBheVNlbmQodWludDI1NiBtb250aFBheSxhZGRyZXNzIHJlY2VpdmVyTW9udGhseSk7CgkKCQoJLy9Db25zdHJ1Y3RvcgoJZnVuY3Rpb24gQm91bnR5TWFuYWdlcigpIHsKCQkKCQlib3VudHltYW5hZ2VyU2hhcmUgPSBTYWZlTWF0aC5tdWwoNzIwMDAwMDAsKDEwKio4KSk7IC8vIHdlIGFsbG9jYXRlIDcyIG1pbGxpb24gdG9rZW4gdG8gdGhlIGJvdW50eSBtYW5hZ2VyIChtYXliZSB0byBjaGFuZ2UpCgkJCgkJZmlyc3RfcGF5ID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bCg0MCxib3VudHltYW5hZ2VyU2hhcmUpLDEwMCk7IC8vIGZpcnN0IHBheSBpcyA0MCUKCQltb250bHlfcGF5ID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bCgxMCxib3VudHltYW5hZ2VyU2hhcmUpLDEwMCk7IC8vIG90aGVyIHBheSBhcmUgMTAlCgkJbmJNb250aHNQYXkgPSAwOwoJCQoJCUZpcnN0X3BheV9ib3VudHltYW5hZ2VyPXRydWU7CgkJaW5pdFBlY3VsID0gZmFsc2U7CgkJYm91bnR5SW5pdD09ZmFsc2U7CgkJCgoJfQoJCgkKCS8qKiogIEZ1bmN0aW9ucyBvZiB0aGUgY29udHJhY3QgKioqLwoJCglmdW5jdGlvbiBJbml0UGVjdWxpdW1BZHJlc3MoYWRkcmVzcyBwZWN1bEFkcmVzcykgb25seU93bmVyIAoJeyAvLyBXZSBpbml0IHRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlbgoJCgkJcGVjdWwgPSBQZWN1bGl1bShwZWN1bEFkcmVzcyk7CgkJcGF5ZGF5ID0gcGVjdWwuZGF0ZURlZnJvc3QoKTsKCQlpbml0UGVjdWwgPSB0cnVlOwoJCUluaXRpYWxpemVkVG9rZW4ocGVjdWxBZHJlc3MpOwoJCgl9CgkKCWZ1bmN0aW9uIGNoYW5nZV9ib3VudHlfbWFuYWdlciAoYWRkcmVzcyBwdWJsaWNfa2V5KSBvbmx5T3duZXIgCgl7IC8vIHRvIGNoYW5nZSB0aGUgYm91bnR5IG1hbmFnZXIgYWRkcmVzcwoJCgkJYm91bnR5bWFuYWdlciA9IHB1YmxpY19rZXk7CgkJYm91bnR5SW5pdD10cnVlOwoJCUluaXRpYWxpemVkTWFuYWdlcihwdWJsaWNfa2V5KTsKCQoJfQoJCglmdW5jdGlvbiB0cmFuc2Zlck1hbmFnZXIoKSBvbmx5T3duZXIgSW5pdGlhbGl6ZSBCb3VudHlNYW5hZ2VySW5pdCAKCXsgLy8gVHJhbnNmZXIgcGVjdWwgZm9yIHRoZSBCb3VudHkgbWFuYWdlcgoJCQoJCXJlcXVpcmUobm93ID4gcGF5ZGF5KTsKCQoJCWlmKEZpcnN0X3BheV9ib3VudHltYW5hZ2VyPT1mYWxzZSAmJiBuYk1vbnRoc1BheSA8IDYpCgkJewoKCQkJcGVjdWwudHJhbnNmZXIoYm91bnR5bWFuYWdlcixtb250bHlfcGF5KTsKCQkJcGF5ZGF5ID0gcGF5ZGF5LmFkZCggMzEgZGF5cyk7CgkJCW5iTW9udGhzUGF5PW5iTW9udGhzUGF5LmFkZCgxKTsKCQkJTW9udGhseVBheVNlbmQobW9udGx5X3BheSxib3VudHltYW5hZ2VyKTsKCQkKCQl9CgkJCgkJaWYoRmlyc3RfcGF5X2JvdW50eW1hbmFnZXI9PXRydWUpCgkJewoKCQkJcGVjdWwudHJhbnNmZXIoYm91bnR5bWFuYWdlcixmaXJzdF9wYXkpOwoJCQlwYXlkYXkgPSBwYXlkYXkuYWRkKCAzNSBkYXlzKTsKCQkJRmlyc3RfcGF5X2JvdW50eW1hbmFnZXI9ZmFsc2U7CgkJCUZpcnN0UGF5U2VuZChmaXJzdF9wYXksYm91bnR5bWFuYWdlcik7CgkJCgkJfQoKCgkJCgl9CgkJLyoqKiAgTW9kaWZpZXJzIG9mIHRoZSBjb250cmFjdCAqKiovCgkKCW1vZGlmaWVyIEluaXRpYWxpemUgeyAvLyBXZSBuZWVkIHRvIGluaXRpYWxpemUgZmlyc3QgdGhlIHRva2VuIGNvbnRyYWN0CgkJcmVxdWlyZSAoaW5pdFBlY3VsPT10cnVlKTsKCQlfOwogICAgCX0KICAgIAltb2RpZmllciBCb3VudHlNYW5hZ2VySW5pdCB7IC8vIFdlIG5lZWQgdG8gaW5pdGlhbGl6ZSBmaXJzdCB0aGUgYWRkcmVzcyBvZiB0aGUgYm91bnR5TWFuYWdlcgoJCXJlcXVpcmUgKGJvdW50eUluaXQ9PXRydWUpOwoJCV87CiAgICAJfSAKCn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpICB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICB1aW50MjU2IF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqCiAgICogQmV3YXJlIHRoYXQgY2hhbmdpbmcgYW4gYWxsb3dhbmNlIHdpdGggdGhpcyBtZXRob2QgYnJpbmdzIHRoZSByaXNrIHRoYXQgc29tZW9uZSBtYXkgdXNlIGJvdGggdGhlIG9sZAogICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgKiByYWNlIGNvbmRpdGlvbiBpcyB0byBmaXJzdCByZWR1Y2UgdGhlIHNwZW5kZXIncyBhbGxvd2FuY2UgdG8gMCBhbmQgc2V0IHRoZSBkZXNpcmVkIHZhbHVlIGFmdGVyd2FyZHM6CiAgICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCiAgLyoqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKi8KICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgfSBlbHNlIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICB9CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKfQoKY29udHJhY3QgQnVybmFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsKCiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8qKgogICAgICogQGRldiBCdXJucyBhIHNwZWNpZmljIGFtb3VudCBvZiB0b2tlbnMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgYnVybmVkLgogICAgICovCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgICAgIC8vIG5vIG5lZWQgdG8gcmVxdWlyZSB2YWx1ZSA8PSB0b3RhbFN1cHBseSwgc2luY2UgdGhhdCB3b3VsZCBpbXBseSB0aGUKICAgICAgICAvLyBzZW5kZXIncyBiYWxhbmNlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgdG90YWxTdXBwbHksIHdoaWNoICpzaG91bGQqIGJlIGFuIGFzc2VydGlvbiBmYWlsdXJlCgogICAgICAgIGFkZHJlc3MgYnVybmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tidXJuZXJdID0gYmFsYW5jZXNbYnVybmVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIEJ1cm4oYnVybmVyLCBfdmFsdWUpOwogICAgfQp9Cgpjb250cmFjdCBQZWN1bGl1bSBpcyBCdXJuYWJsZVRva2VuLE93bmFibGUgeyAvLyBPdXIgdG9rZW4gaXMgYSBzdGFuZGFyZCBFUkMyMCBUb2tlbiB3aXRoIGJ1cm5hYmxlIGFuZCBvd25hYmxlIGFwdGl0dWRlCgoJdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7IC8vIFdlIHVzZSBzYWZlbWF0aCB0byBkbyBiYXNpYyBtYXRoIG9wZXJhdGlvbiAoKywtLCosLykKCXVzaW5nIFNhZmVFUkMyMCBmb3IgRVJDMjBCYXNpYzsgCgogICAgCS8qIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuIGZvciBFUkMyMCBjb21wbGlhbmNlICovCglzdHJpbmcgcHVibGljIG5hbWUgPSAiUGVjdWxpdW0iOyAvL3Rva2VuIG5hbWUgCiAgICAJc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiUENMIjsgLy8gdG9rZW4gc3ltYm9sCiAgICAJdWludDI1NiBwdWJsaWMgZGVjaW1hbHMgPSA4OyAvLyB0b2tlbiBudW1iZXIgb2YgZGVjaW1hbAogICAgCQogICAgCS8qIFB1YmxpYyB2YXJpYWJsZXMgc3BlY2lmaWMgZm9yIFBlY3VsaXVtICovCiAgICAgICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgTUFYX1NVUFBMWV9OQlRPS0VOICAgPSAyMDAwMDAwMDAwMCoxMCoqODsgLy8gVGhlIG1heCBjYXAgaXMgMjAgQmlsbGlvbiBQZWN1bGl1bQoKCXVpbnQyNTYgcHVibGljIGRhdGVTdGFydENvbnRyYWN0OyAvLyBUaGUgZGF0ZSBvZiB0aGUgZGVwbG95bWVudCBvZiB0aGUgdG9rZW4KCW1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgYmFsYW5jZXNDYW5TZWxsOyAvLyBUaGUgYm9vbGVhbiB2YXJpYWJsZSwgdG8gZnJvc3QgdGhlIHRva2VucwoJdWludDI1NiBwdWJsaWMgZGF0ZURlZnJvc3Q7IC8vIFRoZSBkYXRlIHdoZW4gdGhlIG93bmVycyBvZiB0b2tlbiBjYW4gZGVmcm9zdCB0aGVpciB0b2tlbnMKCgogICAgCS8qIEV2ZW50IGZvciB0aGUgZnJlZXplIG9mIGFjY291bnQgKi8KIAlldmVudCBGcm96ZW5GdW5kcyhhZGRyZXNzIHRhcmdldCwgYm9vbCBmcm96ZW4pOyAgICAgCSAKICAgICAJZXZlbnQgRGVmcm96ZShhZGRyZXNzIG1zZ0FkZCwgYm9vbCBmcmVlemUpOwoJCgoKICAgCgkvL0NvbnN0cnVjdG9yCglmdW5jdGlvbiBQZWN1bGl1bSgpIHsKCQl0b3RhbFN1cHBseSA9IE1BWF9TVVBQTFlfTkJUT0tFTjsKCQliYWxhbmNlc1tvd25lcl0gPSB0b3RhbFN1cHBseTsgLy8gQXQgdGhlIGJlZ2lubmluZywgdGhlIG93bmVyIGhhcyBhbGwgdGhlIHRva2Vucy4gCgkJYmFsYW5jZXNDYW5TZWxsW293bmVyXSA9IHRydWU7IC8vIFRoZSBvd25lciBuZWVkIHRvIHNlbGwgdG9rZW4gZm9yIHRoZSBwcml2YXRlIHNhbGUgYW5kIGZvciB0aGUgcHJlSUNPLCBJQ08uCgkJCgkJZGF0ZVN0YXJ0Q29udHJhY3Q9bm93OwoJCWRhdGVEZWZyb3N0ID0gZGF0ZVN0YXJ0Q29udHJhY3QgKyA4NSBkYXlzOyAvLyBldmVyeWJvZHkgY2FuIGRlZnJvc3QgaGlzIG93biB0b2tlbiBhZnRlciB0aGUgMjUgamFudWFyeSAyMDE4ICg4NSBkYXlzIGFmdGVyIDEgTm92ZW1iZXIpCgoJfQoKCS8qKiogUHVibGljIEZ1bmN0aW9ucyBvZiB0aGUgY29udHJhY3QgKioqLwkKCQoJZnVuY3Rpb24gZGVmcm9zdFRva2VuKCkgcHVibGljIAoJeyAvLyBGdW5jdGlvbiB0byBkZWZyb3N0IHlvdXIgb3duIHRva2VuLCBhZnRlciB0aGUgZGF0ZSBvZiB0aGUgZGVmcm9zdAoJCgkJcmVxdWlyZShub3c+ZGF0ZURlZnJvc3QpOwoJCWJhbGFuY2VzQ2FuU2VsbFttc2cuc2VuZGVyXT10cnVlOwoJCURlZnJvemUobXNnLnNlbmRlcix0cnVlKTsKCX0KCQkJCQoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgCgl7IC8vIFdlIG92ZXJyaWdodCB0aGUgdHJhbnNmZXIgZnVuY3Rpb24gdG8gYWxsb3cgZnJlZXplIHBvc3NpYmlsaXR5CgkKCQlyZXF1aXJlKGJhbGFuY2VzQ2FuU2VsbFttc2cuc2VuZGVyXSk7CgkJcmV0dXJuIEJhc2ljVG9rZW4udHJhbnNmZXIoX3RvLF92YWx1ZSk7CgkKCX0KCQoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIAoJeyAvLyBXZSBvdmVycmlnaHQgdGhlIHRyYW5zZmVyRnJvbSBmdW5jdGlvbiB0byBhbGxvdyBmcmVlemUgcG9zc2liaWxpdHkgKG5lZWQgdG8gYWxsb3cgYmVmb3JlKQoJCgkJcmVxdWlyZShiYWxhbmNlc0NhblNlbGxbbXNnLnNlbmRlcl0pOwkKCQlyZXR1cm4gU3RhbmRhcmRUb2tlbi50cmFuc2ZlckZyb20oX2Zyb20sX3RvLF92YWx1ZSk7CgkKCX0KCgkvKioqICBPd25lciBGdW5jdGlvbnMgb2YgdGhlIGNvbnRyYWN0ICoqKi8JCgogICAJZnVuY3Rpb24gZnJlZXplQWNjb3VudChhZGRyZXNzIHRhcmdldCwgYm9vbCBjYW5TZWxsKSBvbmx5T3duZXIgCiAgIAl7CiAgICAgICAgCiAgICAgICAgCWJhbGFuY2VzQ2FuU2VsbFt0YXJnZXRdID0gY2FuU2VsbDsKICAgICAgICAJRnJvemVuRnVuZHModGFyZ2V0LCBjYW5TZWxsKTsKICAgIAkKICAgIAl9CgoKCS8qKiogT3RoZXJzIEZ1bmN0aW9ucyBvZiB0aGUgY29udHJhY3QgKioqLwkKCQoJLyogQXBwcm92ZXMgYW5kIHRoZW4gY2FsbHMgdGhlIHJlY2VpdmluZyBjb250cmFjdCAqLwoJZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoJCWFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwoJCUFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwoKCQlyZXF1aXJlKF9zcGVuZGVyLmNhbGwoYnl0ZXM0KGJ5dGVzMzIoc2hhMygicmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MsdWludDI1NixhZGRyZXNzLGJ5dGVzKSIpKSksIG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSkpOwogICAgICAgIAlyZXR1cm4gdHJ1ZTsKICAgIH0KCiAgCWZ1bmN0aW9uIGdldEJsb2NrVGltZXN0YW1wKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikKICAJewogICAgICAgIAogICAgICAgIAlyZXR1cm4gbm93OwogIAkKICAJfQoKICAJZnVuY3Rpb24gZ2V0T3duZXJJbmZvcygpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3Mgb3duZXJBZGRyLCB1aW50MjU2IG93bmVyQmFsYW5jZSkgIAogIAl7IC8vIFJldHVybiBpbmZvIGFib3V0IHRoZSBwdWJsaWMgYWRkcmVzcyBhbmQgYmFsYW5jZSBvZiB0aGUgYWNjb3VudCBvZiB0aGUgb3duZXIgb2YgdGhlIGNvbnRyYWN0CiAgICAJCiAgICAJCW93bmVyQWRkciA9IG93bmVyOwoJCW93bmVyQmFsYW5jZSA9IGJhbGFuY2VPZihvd25lckFkZHIpOwogIAkKICAJfQoKfQ=='.
	

]
