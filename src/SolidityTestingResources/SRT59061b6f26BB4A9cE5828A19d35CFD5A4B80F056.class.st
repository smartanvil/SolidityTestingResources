Class {
	#name : #SRT59061b6f26BB4A9cE5828A19d35CFD5A4B80F056,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT59061b6f26BB4A9cE5828A19d35CFD5A4B80F056 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCmNvbnRyYWN0IE93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX2FkZHIpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKF9hZGRyID09IDB4MCkgdGhyb3c7CiAgICAgICAgb3duZXIgPSBfYWRkcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB0aHJvdzsKICAgICAgICBfOwogICAgfQp9Cgpjb250cmFjdCBNdXRleCBpcyBPd25lZCB7CiAgICBib29sIGxvY2tlZCA9IGZhbHNlOwogICAgbW9kaWZpZXIgbXV0ZXhlZCB7CiAgICAgICAgaWYgKGxvY2tlZCkgdGhyb3c7CiAgICAgICAgbG9ja2VkID0gdHJ1ZTsKICAgICAgICBfOwogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHVuTXV0ZXgoKSBvbmx5T3duZXIgewogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgfQp9CgoKY29udHJhY3QgUmVudGFsIGlzIE93bmVkIHsKICAgIGZ1bmN0aW9uIFJlbnRhbChhZGRyZXNzIF9vd25lcikgewogICAgICAgIGlmIChfb3duZXIgPT0gMHgwKSB0aHJvdzsKICAgICAgICBvd25lciA9IF9vd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBvZmZlcihhZGRyZXNzIGZyb20sIHVpbnQgbnVtKSB7CgogICAgfQoKICAgIGZ1bmN0aW9uIGNsYWltQmFsYW5jZShhZGRyZXNzKSByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBleGVjKGFkZHJlc3MgZGVzdCkgb25seU93bmVyIHsKICAgICAgICBpZiAoIWRlc3QuY2FsbChtc2cuZGF0YSkpIHRocm93OwogICAgfQp9Cgpjb250cmFjdCBUb2tlbiBpcyBPd25lZCwgTXV0ZXggewogICAgdWludCBPTkUgPSAxMCoqODsKICAgIHVpbnQgcHJpY2UgPSA1MDAwOwogICAgTGVkZ2VyIGxlZGdlcjsKICAgIFJlbnRhbCByZW50YWxDb250cmFjdDsKICAgIHVpbnQ4IHJvbGxPdmVyVGltZSA9IDQ7CiAgICB1aW50OCBzdGFydFRpbWUgPSA4OwogICAgYm9vbCBsaXZlID0gZmFsc2U7CiAgICBhZGRyZXNzIGNsdWI7CiAgICB1aW50IGxvY2tlZFN1cHBseSA9IDA7CiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7IAogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7ICAgICAKICAgIHN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICcwLjEnOyAgCiAgICBib29sIHRyYW5zZmVyc09uID0gZmFsc2U7CgoKCiAgICBmdW5jdGlvbiBUb2tlbihhZGRyZXNzIF9vd25lciwgc3RyaW5nIF90b2tlbk5hbWUsIHVpbnQ4IF9kZWNpbWFscywgc3RyaW5nIF9zeW1ib2wsIGFkZHJlc3MgX2xlZGdlciwgYWRkcmVzcyBfcmVudGFsKSB7CiAgICAgICAgaWYgKF9vd25lciA9PSAweDApIHRocm93OwogICAgICAgIG93bmVyID0gX293bmVyOwoKICAgICAgICBuYW1lID0gX3Rva2VuTmFtZTsKICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsKICAgICAgICBzeW1ib2wgPSBfc3ltYm9sOwogICAgICAgIE9ORSA9IDEwKip1aW50KGRlY2ltYWxzKTsKICAgICAgICBsZWRnZXIgPSBMZWRnZXIoX2xlZGdlcik7CiAgICAgICAgcmVudGFsQ29udHJhY3QgPSBSZW50YWwoX3JlbnRhbCk7CiAgICB9CgogICAgLyoKICAgICoJQm9va2tlZXBpbmcgYW5kIEFkbWluIEZ1bmN0aW9ucwogICAgKi8KCiAgICBldmVudCBMZWRnZXJVcGRhdGVkKGFkZHJlc3MsYWRkcmVzcyk7CgogICAgZnVuY3Rpb24gY2hhbmdlQ2x1YihhZGRyZXNzIF9hZGRyKSBvbmx5T3duZXIgewogICAgICAgIGlmIChfYWRkciA9PSAweDApIHRocm93OwoKICAgICAgICBjbHViID0gX2FkZHI7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlUHJpY2UodWludCBfbnVtKSBvbmx5T3duZXIgewogICAgICAgIHByaWNlID0gX251bTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKChhICsgYikgPCBhKSB0aHJvdzsKICAgICAgICByZXR1cm4gKGEgKyBiKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VMZWRnZXIoYWRkcmVzcyBfYWRkcikgb25seU93bmVyIHsKICAgICAgICBpZiAoX2FkZHIgPT0gMHgwKSB0aHJvdzsKCiAgICAgICAgTGVkZ2VyVXBkYXRlZChtc2cuc2VuZGVyLCBfYWRkcik7CiAgICAgICAgbGVkZ2VyID0gTGVkZ2VyKF9hZGRyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VSZW50YWwoYWRkcmVzcyBfYWRkcikgb25seU93bmVyIHsKICAgICAgICBpZiAoX2FkZHIgPT0gMHgwKSB0aHJvdzsKICAgICAgICByZW50YWxDb250cmFjdCA9IFJlbnRhbChfYWRkcik7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlVGltZXModWludDggX3JvbGxPdmVyLCB1aW50OCBfc3RhcnQpIG9ubHlPd25lciB7CiAgICAgICAgcm9sbE92ZXJUaW1lID0gX3JvbGxPdmVyOwogICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydDsKICAgIH0KCiAgICAvKgogICAgKiBMb2NraW5nIGlzIGEgZmVhdHVyZSB0aGF0IHR1cm5zIGEgdXNlcidzIGJhbGFuY2VzIGludG8KICAgICogdW4taXNzdWVkIHRva2VucywgdGFraW5nIHRoZW0gb3V0IG9mIGFuIGFjY291bnQgYW5kIHJlZHVjaW5nIHRoZSBzdXBwbHkuCiAgICAqIERpbHV0aW5nIGlzIHNvIG5hbWVkIHRvIHJlbWluZCB0aGUgY2FsbGVyIHRoYXQgdGhleSBhcmUgY2hhbmdpbmcgdGhlIG1vbmV5IHN1cHBseS4KICAgICAgICAqLwoKICAgIGZ1bmN0aW9uIGxvY2soYWRkcmVzcyBfc2VpemVBZGRyKSBvbmx5T3duZXIgbXV0ZXhlZCB7CiAgICAgICAgdWludCBteUJhbGFuY2UgPSBsZWRnZXIuYmFsYW5jZU9mKF9zZWl6ZUFkZHIpOwoKICAgICAgICBsb2NrZWRTdXBwbHkgKz0gbXlCYWxhbmNlOwogICAgICAgIGxlZGdlci5zZXRCYWxhbmNlKF9zZWl6ZUFkZHIsIDApOwogICAgfQoKICAgIGV2ZW50IERpbHV0aW9uKGFkZHJlc3MsIHVpbnQpOwoKICAgIGZ1bmN0aW9uIGRpbHV0ZShhZGRyZXNzIF9kZXN0QWRkciwgdWludCBhbW91bnQpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKGFtb3VudCA+IGxvY2tlZFN1cHBseSkgdGhyb3c7CgogICAgICAgIERpbHV0aW9uKF9kZXN0QWRkciwgYW1vdW50KTsKCiAgICAgICAgbG9ja2VkU3VwcGx5IC09IGFtb3VudDsKCiAgICAgICAgdWludCBjdXJCYWxhbmNlID0gbGVkZ2VyLmJhbGFuY2VPZihfZGVzdEFkZHIpOwogICAgICAgIGN1ckJhbGFuY2UgPSBzYWZlQWRkKGFtb3VudCwgY3VyQmFsYW5jZSk7CiAgICAgICAgbGVkZ2VyLnNldEJhbGFuY2UoX2Rlc3RBZGRyLCBjdXJCYWxhbmNlKTsKICAgIH0KCiAgICAvKiAKICAgICAqIENyb3dkc2FsZSAtLSAKICAgICAqCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbXBsZXRlQ3Jvd2RzYWxlKCkgb25seU93bmVyIHsKICAgICAgICAvLyBMb2NrIHVuc29sZCB0b2tlbnMKICAgICAgICAvLyBhbGxvdyB0cmFuc2ZlcnMgZm9yIGFyYml0cmFyeSBvd25lcnMKICAgICAgICB0cmFuc2ZlcnNPbiA9IHRydWU7CiAgICAgICAgbG9jayhvd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gcGF1c2VUcmFuc2ZlcnMoKSBvbmx5T3duZXIgewogICAgICAgIHRyYW5zZmVyc09uID0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gcmVzdW1lVHJhbnNmZXJzKCkgb25seU93bmVyIHsKICAgICAgICB0cmFuc2ZlcnNPbiA9IHRydWU7CiAgICB9CgogICAgLyoKICAgICogUmVudGluZyAtLSBMb2dpYyBUQkQgbGF0ZXIuIEZvciBub3csIHdlIHRydXN0IHRoZSByZW50YWwgY29udHJhY3QKICAgICogdG8gbWFuYWdlIGV2ZXJ5dGhpbmcgYWJvdXQgdGhlIHJlbnRhbHMsIGluY2x1ZGluZyBib29ra2VlcGluZyBvbiBlYXJuaW5ncwogICAgKiBhbmQgcmV0dXJuaW5nIHRva2Vucy4KICAgICovCgogICAgZnVuY3Rpb24gcmVudE91dCh1aW50IG51bSkgewogICAgICAgIGlmIChsZWRnZXIuYmFsYW5jZU9mKG1zZy5zZW5kZXIpIDwgbnVtKSB0aHJvdzsKICAgICAgICByZW50YWxDb250cmFjdC5vZmZlcihtc2cuc2VuZGVyLCBudW0pOwogICAgICAgIGxlZGdlci50b2tlblRyYW5zZmVyKG1zZy5zZW5kZXIsIHJlbnRhbENvbnRyYWN0LCBudW0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsYWltVW5yZW50ZWQoKSB7ICAKICAgICAgICB1aW50IGFtb3VudCA9IHJlbnRhbENvbnRyYWN0LmNsYWltQmFsYW5jZShtc2cuc2VuZGVyKTsgLy8gdGhpcyBzaG91bGQgcmVkdWNlIHNlbmRlcidzIGNsYWltYWJsZUJhbGFuY2UgdG8gMAoKICAgICAgICBsZWRnZXIudG9rZW5UcmFuc2ZlcihyZW50YWxDb250cmFjdCwgbXNnLnNlbmRlciwgYW1vdW50KTsKICAgIH0KCiAgICAvKgogICAgKiBCdXJuaW5nIC0tIFdlIGFsbG93IGFueSB1c2VyIHRvIGJ1cm4gdG9rZW5zLgogICAgKgogICAgICovCgogICAgZnVuY3Rpb24gYnVybih1aW50IF9hbW91bnQpIHsKICAgICAgICB1aW50IGJhbGFuY2UgPSBsZWRnZXIuYmFsYW5jZU9mKG1zZy5zZW5kZXIpOwogICAgICAgIGlmIChfYW1vdW50ID4gYmFsYW5jZSkgdGhyb3c7CgogICAgICAgIGxlZGdlci5zZXRCYWxhbmNlKG1zZy5zZW5kZXIsIGJhbGFuY2UgLSBfYW1vdW50KTsKICAgIH0KCiAgICAvKgogICAgRW50cnkKICAgICovCiAgICBmdW5jdGlvbiBjaGVja0luKHVpbnQgX251bUNoZWNraW5zKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpbnQgbmVlZGVkID0gaW50KHByaWNlICogT05FKiBfbnVtQ2hlY2tpbnMpOwogICAgICAgIGlmIChpbnQobGVkZ2VyLmJhbGFuY2VPZihtc2cuc2VuZGVyKSkgPiBuZWVkZWQpIHsKICAgICAgICAgICAgbGVkZ2VyLmNoYW5nZVVzZWQobXNnLnNlbmRlciwgbmVlZGVkKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvLyBFUkMyMCBTdXBwb3J0LiBUaGlzIGNvdWxkIGFsc28gdXNlIHRoZSBmYWxsYmFjayBidXQKICAgIC8vIEkgcHJlZmVyIHRoZSBjb250cm9sIGZvciBub3cuCgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcywgYWRkcmVzcywgdWludCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzLCBhZGRyZXNzLCB1aW50KTsKCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBsZWRnZXIudG90YWxTdXBwbHkoKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAoIXRyYW5zZmVyc09uICYmIG1zZy5zZW5kZXIgIT0gb3duZXIpIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoISBsZWRnZXIudG9rZW5UcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpKSB7IHJldHVybiBmYWxzZTsgfQoKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKCF0cmFuc2ZlcnNPbiAmJiBtc2cuc2VuZGVyICE9IG93bmVyKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKCEgbGVkZ2VyLnRva2VuVHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIF9mcm9tLCBfdG8sIF9hbW91bnQpICkgeyByZXR1cm4gZmFsc2U7fQoKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIGxlZGdlci5hbGxvd2FuY2UoX2Zyb20sIF90byk7IAogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoIGxlZGdlci50b2tlbkFwcHJvdmUobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSkgKSB7CiAgICAgICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9hZGRyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gbGVkZ2VyLmJhbGFuY2VPZihfYWRkcik7CiAgICB9Cn0KCmNvbnRyYWN0IExlZGdlciBpcyBPd25lZCB7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSB1c2VkVG9kYXk7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBzZWVuSGVyZTsKICAgIGFkZHJlc3NbXSBwdWJsaWMgc2VlbkhlcmVBOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIGFkZHJlc3MgdG9rZW47CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseSA9IDA7CgogICAgZnVuY3Rpb24gTGVkZ2VyKGFkZHJlc3MgX293bmVyLCB1aW50IF9wcmVNaW5lZCwgdWludCBPTkUpIHsKICAgICAgICBpZiAoX293bmVyID09IDB4MCkgdGhyb3c7CiAgICAgICAgb3duZXIgPSBfb3duZXI7CgogICAgICAgIHNlZW5IZXJlW19vd25lcl0gPSB0cnVlOwogICAgICAgIHNlZW5IZXJlQS5wdXNoKF9vd25lcik7CgogICAgICAgIHRvdGFsU3VwcGx5ID0gX3ByZU1pbmVkICpPTkU7CiAgICAgICAgYmFsYW5jZXNbX293bmVyXSA9IHRvdGFsU3VwcGx5OwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlUb2tlbiB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gdG9rZW4pIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVRva2VuT3JPd25lciB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gdG9rZW4gJiYgbXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCgogICAgZnVuY3Rpb24gdG9rZW5UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBhbW91bnQpIG9ubHlUb2tlbiByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAoYW1vdW50ID4gYmFsYW5jZXNbX2Zyb21dKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKChiYWxhbmNlc1tfdG9dICsgYW1vdW50KSA8IGJhbGFuY2VzW190b10pIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoYW1vdW50ID09IDApIHsgcmV0dXJuIGZhbHNlOyB9CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBhbW91bnQ7CiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBhbW91bnQ7CgogICAgICAgIGlmIChzZWVuSGVyZVtfdG9dID09IGZhbHNlKSB7CiAgICAgICAgICAgIHNlZW5IZXJlQS5wdXNoKF90byk7CiAgICAgICAgICAgIHNlZW5IZXJlW190b10gPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdG9rZW5UcmFuc2ZlckZyb20oYWRkcmVzcyBfc2VuZGVyLCBhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBhbW91bnQpIG9ubHlUb2tlbiByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAoYWxsb3dlZFtfZnJvbV1bX3NlbmRlcl0gPD0gYW1vdW50KSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKGFtb3VudCA+IGJhbGFuY2VPZihfZnJvbSkpIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoYW1vdW50ID09IDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgaWYgKChiYWxhbmNlc1tfdG9dICsgYW1vdW50KSA8IGFtb3VudCkgcmV0dXJuIGZhbHNlOwoKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gYW1vdW50OwogICAgICAgIGJhbGFuY2VzW190b10gKz0gYW1vdW50OwogICAgICAgIGFsbG93ZWRbX2Zyb21dW19zZW5kZXJdIC09IGFtb3VudDsKCiAgICAgICAgaWYgKHNlZW5IZXJlW190b10gPT0gZmFsc2UpIHsKICAgICAgICAgICAgc2VlbkhlcmVBLnB1c2goX3RvKTsKICAgICAgICAgICAgc2VlbkhlcmVbX3RvXSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgZnVuY3Rpb24gY2hhbmdlVXNlZChhZGRyZXNzIF9hZGRyLCBpbnQgYW1vdW50KSBvbmx5VG9rZW4gewogICAgICAgIGludCBteVRvZGF5ID0gaW50KHVzZWRUb2RheVtfYWRkcl0pICsgYW1vdW50OwogICAgICAgIHVzZWRUb2RheVtfYWRkcl0gPSB1aW50KG15VG9kYXkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlc2V0VXNlZFRvZGF5KHVpbnQ4IHN0YXJ0SSwgdWludDggbnVtVGltZXMpIG9ubHlUb2tlbk9yT3duZXIgcmV0dXJucyh1aW50OCkgewogICAgICAgIHVpbnQ4IG51bURlbGV0ZWQ7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbnVtVGltZXMgJiYgaSArIHN0YXJ0SSA8IHNlZW5IZXJlQS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAodXNlZFRvZGF5W3NlZW5IZXJlQVtpK3N0YXJ0SV1dICE9IDApIHsgCiAgICAgICAgICAgICAgICBkZWxldGUgdXNlZFRvZGF5W3NlZW5IZXJlQVtpK3N0YXJ0SV1dOwogICAgICAgICAgICAgICAgbnVtRGVsZXRlZCsrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBudW1EZWxldGVkOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9hZGRyKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgLy8gZG9uJ3QgZm9yZ2V0IHRvIHN1YnRyYWN0IHVzZWRUb2RheQogICAgICAgIGlmICh1c2VkVG9kYXlbX2FkZHJdID49IGJhbGFuY2VzW19hZGRyXSkgeyByZXR1cm4gMDt9CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19hZGRyXSAtIHVzZWRUb2RheVtfYWRkcl07CiAgICB9CgogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcywgYWRkcmVzcywgdWludCk7CgogICAgZnVuY3Rpb24gdG9rZW5BcHByb3ZlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBvbmx5VG9rZW4gcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFsbG93ZWRbX2Zyb21dW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChfZnJvbSwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVRva2VuKGFkZHJlc3MgX3Rva2VuKSBvbmx5T3duZXIgewogICAgICAgIHRva2VuID0gVG9rZW4oX3Rva2VuKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWR1Y2VUb3RhbFN1cHBseSh1aW50IGFtb3VudCkgb25seVRva2VuIHsKICAgICAgICBpZiAoYW1vdW50ID4gdG90YWxTdXBwbHkpIHRocm93OwoKICAgICAgICB0b3RhbFN1cHBseSAtPSBhbW91bnQ7ICAgIAogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJhbGFuY2UoYWRkcmVzcyBfYWRkciwgdWludCBhbW91bnQpIG9ubHlUb2tlbk9yT3duZXIgewogICAgICAgIGlmIChiYWxhbmNlc1tfYWRkcl0gPT0gYW1vdW50KSB7IHJldHVybjsgfQogICAgICAgIGlmIChiYWxhbmNlc1tfYWRkcl0gPCBhbW91bnQpIHsKICAgICAgICAgICAgLy8gaW5jcmVhc2luZyB0b3RhbFN1cHBseQogICAgICAgICAgICB1aW50IGluY3JlYXNlID0gYW1vdW50IC0gYmFsYW5jZXNbX2FkZHJdOwogICAgICAgICAgICB0b3RhbFN1cHBseSArPSBpbmNyZWFzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBkZWNyZWFzaW5nIHRvdGFsU3VwcGx5CiAgICAgICAgICAgIHVpbnQgZGVjcmVhc2UgPSBiYWxhbmNlc1tfYWRkcl0gLSBhbW91bnQ7CiAgICAgICAgICAgIC8vVE9ETzogc2FmZVN1YgogICAgICAgICAgICB0b3RhbFN1cHBseSAtPSBkZWNyZWFzZTsKICAgICAgICB9CiAgICAgICAgYmFsYW5jZXNbX2FkZHJdID0gYW1vdW50OwogICAgfQoKfQ=='.
	

]
