Class {
	#name : #SRTe59015e2d097b545f0b1701c64310f98e3600495,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe59015e2d097b545f0b1701c64310f98e3600495 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgogCiAvKgogKiBOWVggVG9rZW4gc2FsZQogKgogKiBTdXBwb3J0cyBFUkMyMCwgRVJDMjIzIHN0YWRhcmRzCiAqCiAqIFRoZSBOWVggdG9rZW4gaXMgbWludGFibGUgZHVyaW5nIFRva2VuIFNhbGUuIE9uIFRva2VuIFNhbGUgZmluYWxpemF0aW9uIGl0CiAqIHdpbGwgYmUgbWludGVkIHVwIHRvIHRoZSBjYXAgYW5kIG1pbnRpbmcgd2lsbCBiZSBmaW5pc2hlZCBmb3JldmVyCiAqLwoKCnByYWdtYSBzb2xpZGl0eSBeMC40LjE4OwoKCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9pbmNsdWRlL01pbnRhYmxlVG9rZW4uc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICJ6ZXBwZWxpbi9jb250cmFjdHMvdG9rZW4vU3RhbmRhcmRUb2tlbi5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0Jhc2ljVG9rZW4uc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9FUkMyMEJhc2ljLnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0VSQzIwQmFzaWMuc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi9tYXRoL1NhZmVNYXRoLnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4uL21hdGgvU2FmZU1hdGguc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuIAogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9Ci8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9CYXNpY1Rva2VuLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9FUkMyMC5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgoKCgoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0VSQzIwLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICJ6ZXBwZWxpbi9jb250cmFjdHMvdG9rZW4vU3RhbmRhcmRUb2tlbi5zb2wiIDogZW5kCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgInplcHBlbGluL2NvbnRyYWN0cy9vd25lcnNoaXAvT3duYWJsZS5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgfQoKfQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgInplcHBlbGluL2NvbnRyYWN0cy9vd25lcnNoaXAvT3duYWJsZS5zb2wiIDogZW5kCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLyoqCiAqIE1pbnRhYmxlIHRva2VuCiAqLwoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5ID0gMDsKICAgIGFkZHJlc3MgbWludGVyOwoKICAgIG1vZGlmaWVyIG9ubHlNaW50ZXIoKXsKICAgICAgICByZXF1aXJlKG1pbnRlciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldE1pbnRlcihhZGRyZXNzIF9taW50ZXIpIG9ubHlPd25lciB7CiAgICAgICAgbWludGVyID0gX21pbnRlcjsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIG9ubHlNaW50ZXIgewogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgICAgICBUcmFuc2ZlcihhZGRyZXNzKDB4MCksIF90bywgX2Ftb3VudCk7CiAgICB9Cn0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL2luY2x1ZGUvTWludGFibGVUb2tlbi5zb2wiIDogZW5kCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vaW5jbHVkZS9FUkMyM1BheWFibGVUb2tlbi5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgoKCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9FUkMyMy5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgoKCgovKgogKiBFUkMyMwogKiBFUkMyMyBpbnRlcmZhY2UKICogc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMjMKICovCmNvbnRyYWN0IEVSQzIzIGlzIEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSk7CgogICAgZXZlbnQgVHJhbnNmZXJEYXRhKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEpOwp9Ci8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9FUkMyMy5zb2wiIDogZW5kCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vRVJDMjNQYXlhYmxlUmVjZWl2ZXIuc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLyoKKiBDb250cmFjdCB0aGF0IGlzIHdvcmtpbmcgd2l0aCBFUkMyMjMgdG9rZW5zCiovCgpjb250cmFjdCBFUkMyM1BheWFibGVSZWNlaXZlciB7CiAgICBmdW5jdGlvbiB0b2tlbkZhbGxiYWNrKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcGF5YWJsZTsKfQoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0VSQzIzUGF5YWJsZVJlY2VpdmVyLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKiogIGh0dHBzOi8vZ2l0aHViLmNvbS9EZXhhcmFuL0VSQzIzLXRva2Vucy9ibG9iL21hc3Rlci90b2tlbi9FUkMyMjMvRVJDMjIzQmFzaWNUb2tlbi5zb2wKICoKICovCmNvbnRyYWN0IEVSQzIzUGF5YWJsZVRva2VuIGlzIEJhc2ljVG9rZW4sIEVSQzIzewogICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIHVzZXIgb3IgYW5vdGhlciBjb250cmFjdCB3YW50cyB0byB0cmFuc2ZlciBmdW5kcyAuCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKXsKICAgICAgICB0cmFuc2ZlckFuZFBheSh0bywgdmFsdWUsIGRhdGEpOwogICAgfQoKICAgIC8vIFN0YW5kYXJkIGZ1bmN0aW9uIHRyYW5zZmVyIHNpbWlsYXIgdG8gRVJDMjAgdHJhbnNmZXIgd2l0aCBubyBfZGF0YSAuCiAgICAvLyBBZGRlZCBkdWUgdG8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgcmVhc29ucyAuCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sKXsKICAgICAgICBieXRlcyBtZW1vcnkgZW1wdHk7CiAgICAgICAgdHJhbnNmZXIodG8sIHZhbHVlLCBlbXB0eSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJBbmRQYXkoYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkgcGF5YWJsZSB7CgogICAgICAgIHVpbnQgY29kZUxlbmd0aDsKCiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgc2l6ZSBvZiB0aGUgY29kZSBvbiB0YXJnZXQgYWRkcmVzcywgdGhpcyBuZWVkcyBhc3NlbWJseSAuCiAgICAgICAgICAgIGNvZGVMZW5ndGggOj0gZXh0Y29kZXNpemUodG8pCiAgICAgICAgfQoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1Yih2YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbdG9dID0gYmFsYW5jZXNbdG9dLmFkZCh2YWx1ZSk7CgogICAgICAgIGlmKGNvZGVMZW5ndGg+MCkgewogICAgICAgICAgICBFUkMyM1BheWFibGVSZWNlaXZlciByZWNlaXZlciA9IEVSQzIzUGF5YWJsZVJlY2VpdmVyKHRvKTsKICAgICAgICAgICAgcmVjZWl2ZXIudG9rZW5GYWxsYmFjay52YWx1ZShtc2cudmFsdWUpKG1zZy5zZW5kZXIsIHZhbHVlLCBkYXRhKTsKICAgICAgICB9ZWxzZSBpZihtc2cudmFsdWUgPiAwKXsKICAgICAgICAgICAgdG8udHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICB9CgogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIHRvLCB2YWx1ZSk7CiAgICAgICAgaWYoZGF0YS5sZW5ndGggPiAwKQogICAgICAgICAgICBUcmFuc2ZlckRhdGEobXNnLnNlbmRlciwgdG8sIHZhbHVlLCBkYXRhKTsKICAgIH0KfQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vaW5jbHVkZS9FUkMyM1BheWFibGVUb2tlbi5zb2wiIDogZW5kCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKCmNvbnRyYWN0IE5ZWFRva2VuIGlzIE1pbnRhYmxlVG9rZW4sIEVSQzIzUGF5YWJsZVRva2VuIHsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJOWVggVG9rZW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiTllYIjsKCiAgICBib29sIHB1YmxpYyB0cmFuc2ZlckVuYWJsZWQgPSB0cnVlOwoKICAgIC8vVGhlIGNhcCBpcyAxNSBtbG4gTllYCiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgQ0FQID0gMTUqKDEwKio2KTsKCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpewogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkuYWRkKF9hbW91bnQpIDw9IENBUCk7CiAgICAgICAgc3VwZXIubWludChfdG8sIF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIE5ZWFRva2VuKGFkZHJlc3MgdGVhbSkgewogICAgICAgIC8vVHJhbnNmZXIgb3duZXJzaGlwIG9uIHRoZSB0b2tlbiB0byB0ZWFtIG9uIGNyZWF0aW9uCiAgICAgICAgdHJhbnNmZXJPd25lcnNoaXAodGVhbSk7CiAgICAgICAgLy8gbWludGVyIGlzIHRoZSBUb2tlblNhbGUgY29udHJhY3QKICAgICAgICBtaW50ZXIgPSBtc2cuc2VuZGVyOyAKICAgICAgICAvLy8gUHJlc2VydmUgMyAwMDAgMDAwIHRva2VucyBmb3IgdGhlIHRlYW0KICAgICAgICBtaW50KHRlYW0sIDMwMDAwMDApOwogICAgfQoKICAgIC8qKgogICAgKiBPdmVycmlkaW5nIGFsbCB0cmFuc2ZlcnMgdG8gY2hlY2sgaWYgdHJhbnNmZXJzIGFyZSBlbmFibGVkCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJBbmRQYXkoYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkgcGF5YWJsZXsKICAgICAgICByZXF1aXJlKHRyYW5zZmVyRW5hYmxlZCk7CiAgICAgICAgc3VwZXIudHJhbnNmZXJBbmRQYXkodG8sIHZhbHVlLCBkYXRhKTsKICAgIH0KCiAgICBmdW5jdGlvbiBlbmFibGVUcmFuc2Zlcihib29sIGVuYWJsZWQpIG9ubHlPd25lcnsKICAgICAgICB0cmFuc2ZlckVuYWJsZWQgPSBlbmFibGVkOwogICAgfQoKfQoKY29udHJhY3QgVG9rZW5TYWxlIGlzIE93bmFibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogICAgLy8gQ29uc3RhbnRzCiAgICAvLyA9PT09PT09PT0KICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBtaWxsaW9ucyA9IDFlNjsKCiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgQ0FQID0gMTUqbWlsbGlvbnM7CiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgU0FMRV9DQVAgPSAxMiptaWxsaW9uczsKICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBTT0ZUX0NBUCA9IDE0MDAwMDA7CiAgICAKICAgIC8vIEFsbG9jYXRlZCBmb3IgdGhlIHRlYW0gdXBvbiBjb250cmFjdCBjcmVhdGlvbgogICAgLy8gPT09PT09PT09CiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgVEVBTV9DQVAgPSAzMDAwMDAwOwoKICAgIHVpbnQgcHVibGljIHByaWNlID0gMC4wMDEgZXRoZXI7CiAgICAKICAgIC8vIEhvbGQgaW52ZXN0b3IncyBldGhlciBhbW91bnRzIHRvIHJlZnVuZAogICAgYWRkcmVzc1tdIGNvbnRyaWJ1dG9yczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBjb250cmlidXRpb25zOwoKICAgIC8vIEV2ZW50cwogICAgLy8gPT09PT09CgogICAgZXZlbnQgQWx0QnV5KGFkZHJlc3MgaG9sZGVyLCB1aW50IHRva2Vucywgc3RyaW5nIHR4SGFzaCk7CiAgICBldmVudCBCdXkoYWRkcmVzcyBob2xkZXIsIHVpbnQgdG9rZW5zKTsKICAgIGV2ZW50IFJ1blNhbGUoKTsKICAgIGV2ZW50IFBhdXNlU2FsZSgpOwogICAgZXZlbnQgRmluaXNoU2FsZSgpOwogICAgZXZlbnQgUHJpY2VTZXQodWludCB3ZWlQZXJOWVgpOwoKICAgIC8vIFN0YXRlIHZhcmlhYmxlcwogICAgLy8gPT09PT09PT09PT09PT09CiAgICBib29sIHB1YmxpYyBwcmVzYWxlID0gdHJ1ZTsKICAgIE5ZWFRva2VuIHB1YmxpYyB0b2tlbjsKICAgIGFkZHJlc3MgYXV0aG9yaXR5OyAvL0FuIGFjY291bnQgdG8gY29udHJvbCB0aGUgY29udHJhY3Qgb24gYmVoYWxmIG9mIHRoZSBvd25lcgogICAgYWRkcmVzcyByb2JvdDsgLy9BbiBhY2NvdW50IHRvIHB1cmNoYXNlIHRva2VucyBmb3IgYWx0Y29pbnMKICAgIGJvb2wgcHVibGljIGlzT3BlbiA9IHRydWU7CgogICAgLy8gQ29uc3RydWN0b3IKICAgIC8vID09PT09PT09PT09CgogICAgZnVuY3Rpb24gVG9rZW5TYWxlKCl7CiAgICAgICAgdG9rZW4gPSBuZXcgTllYVG9rZW4obXNnLnNlbmRlcik7CgogICAgICAgIGF1dGhvcml0eSA9IG1zZy5zZW5kZXI7CiAgICAgICAgcm9ib3QgPSBtc2cuc2VuZGVyOwogICAgICAgIHRyYW5zZmVyT3duZXJzaGlwKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vIFB1YmxpYyBmdW5jdGlvbnMKICAgIC8vID09PT09PT09PT09PT09PT0KICAgIGZ1bmN0aW9uIHRvZ2dsZVByZXNhbGUoYm9vbCBhY3RpdmF0ZSkgb25seUF1dGhvcml0eSB7CiAgICAgICAgcHJlc2FsZSA9IGFjdGl2YXRlOwogICAgfQoKCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50UHJpY2UoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICBpZihwcmVzYWxlKSB7CiAgICAgICAgICAgIHJldHVybiBwcmljZSAtIChwcmljZSoyMC8xMDApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcHJpY2U7CiAgICB9CiAgICAvKioKICAgICogQ29tcHV0ZXMgbnVtYmVyIG9mIHRva2VucyB3aXRoIGJvbnVzIGZvciB0aGUgc3BlY2lmaWVkIGV0aGVyLiBDb3JyZWN0bHkKICAgICogYWRkcyBib251c2VzIGlmIHRoZSBzdW0gaXMgbGFyZ2UgZW5vdWdoIHRvIGJlbG9uZyB0byBzZXZlcmFsIGJvbnVzIGludGVydmFscwogICAgKi8KICAgIGZ1bmN0aW9uIGdldFRva2Vuc0Ftb3VudCh1aW50IGV0aGVyVmFsKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCB0b2tlbnMgPSAwOwogICAgICAgIHRva2VucyArPSBldGhlclZhbC9nZXRDdXJyZW50UHJpY2UoKTsKICAgICAgICByZXR1cm4gdG9rZW5zOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eShhZGRyZXNzIHRvKSBvbmx5T3BlbiBwYXlhYmxlewogICAgICAgIHVpbnQgYW1vdW50ID0gbXNnLnZhbHVlOwogICAgICAgIHVpbnQgdG9rZW5zID0gZ2V0VG9rZW5zQW1vdW50VW5kZXJDYXAoYW1vdW50KTsKICAgICAgICAKICAgICAgICAvLyBvd25lci50cmFuc2ZlcihhbW91bnQpOwoKCQl0b2tlbi5taW50KHRvLCB0b2tlbnMpOwoJCQoJCXVpbnQgYWxyZWFkeUNvbnRyaWJ1dGVkID0gY29udHJpYnV0aW9uc1t0b107CgkJaWYoYWxyZWFkeUNvbnRyaWJ1dGVkID09IDApIC8vIG5ldyBjb250cmlidXRvcgoJCSAgICBjb250cmlidXRvcnMucHVzaCh0byk7CgkJICAgIAoJCWNvbnRyaWJ1dGlvbnNbdG9dID0gY29udHJpYnV0aW9uc1t0b10uYWRkKG1zZy52YWx1ZSk7CgogICAgICAgIEJ1eSh0bywgdG9rZW5zKTsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlewogICAgICAgIGJ1eShtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvLyBNb2RpZmllcnMKICAgIC8vID09PT09PT09PT09PT09PT09CgogICAgbW9kaWZpZXIgb25seUF1dGhvcml0eSgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYXV0aG9yaXR5IHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVJvYm90KCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSByb2JvdCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3BlbigpIHsKICAgICAgICByZXF1aXJlKGlzT3Blbik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBQcml2ZWxlZ2VkIGZ1bmN0aW9ucwogICAgLy8gPT09PT09PT09PT09PT09PT09PT0KCiAgICAvKioKICAgICogVXNlZCB0byBidXkgdG9rZW5zIGZvciBhbHRjb2lucy4KICAgICogUm9ib3QgbWF5IGNhbGwgaXQgYmVmb3JlIFRva2VuU2FsZSBvZmZpY2lhbGx5IHN0YXJ0cyB0byBtaWdyYXRlIGVhcmx5IGludmVzdG9ycwogICAgKi8KICAgIGZ1bmN0aW9uIGJ1eUFsdChhZGRyZXNzIHRvLCB1aW50IGV0aGVyQW1vdW50LCBzdHJpbmcgX3R4SGFzaCkgb25seVJvYm90IHsKICAgICAgICB1aW50IHRva2VucyA9IGdldFRva2Vuc0Ftb3VudFVuZGVyQ2FwKGV0aGVyQW1vdW50KTsKICAgICAgICB0b2tlbi5taW50KHRvLCB0b2tlbnMpOwogICAgICAgIEFsdEJ1eSh0bywgdG9rZW5zLCBfdHhIYXNoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRBdXRob3JpdHkoYWRkcmVzcyBfYXV0aG9yaXR5KSBvbmx5T3duZXIgewogICAgICAgIGF1dGhvcml0eSA9IF9hdXRob3JpdHk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Um9ib3QoYWRkcmVzcyBfcm9ib3QpIG9ubHlBdXRob3JpdHkgewogICAgICAgIHJvYm90ID0gX3JvYm90OwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByaWNlKHVpbnQgZXRoZXJQZXJOWVgpIG9ubHlBdXRob3JpdHkgewogICAgICAgIHByaWNlID0gZXRoZXJQZXJOWVg7CiAgICAgICAgUHJpY2VTZXQocHJpY2UpOwogICAgfQoKICAgIC8vIFNBTEUgc3RhdGUgbWFuYWdlbWVudDogc3RhcnQgLyBwYXVzZSAvIGZpbmFsaXplCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gb3Blbihib29sIG9wbikgb25seUF1dGhvcml0eSB7CiAgICAgICAgaXNPcGVuID0gb3BuOwogICAgICAgIG9wbiA/IFJ1blNhbGUoKSA6IFBhdXNlU2FsZSgpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBmaW5hbGl6ZVByZXNhbGUoKSBvbmx5QXV0aG9yaXR5IHsKICAgICAgICAvLyBDaGVjayBmb3IgU09GVF9DQVAKICAgICAgICByZXF1aXJlKHRva2VuLnRvdGFsU3VwcGx5KCkgPiBTT0ZUX0NBUCArIFRFQU1fQ0FQKTsKICAgICAgICAvLyBUcmFuc2ZlciBjb2xsZWN0ZWQgc29mdGNhcCB0byB0aGUgdGVhbQogICAgICAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZmluYWxpemUoKSBvbmx5QXV0aG9yaXR5IHsKICAgICAgICAvLyBDaGVjayBmb3IgU09GVF9DQVAKICAgICAgICBpZih0b2tlbi50b3RhbFN1cHBseSgpIDwgU09GVF9DQVAgKyBURUFNX0NBUCkgeyAvLyBTb2Z0IGNhcCBpcyBub3QgcmVhY2hlZCwgcmV0dXJuIGFsbCBjb250cmlidXRpb25zIHRvIGludmVzdG9ycwogICAgICAgICAgICB1aW50IHggPSAwOwogICAgICAgICAgICB3aGlsZSh4IDwgY29udHJpYnV0b3JzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgdWludCBhbW91bnRUb1JldHVybiA9IGNvbnRyaWJ1dGlvbnNbY29udHJpYnV0b3JzW3hdXTsKICAgICAgICAgICAgICAgIGNvbnRyaWJ1dG9yc1t4XS50cmFuc2ZlcihhbW91bnRUb1JldHVybik7CiAgICAgICAgICAgICAgICB4Kys7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdWludCBkaWZmID0gQ0FQLnN1Yih0b2tlbi50b3RhbFN1cHBseSgpKTsKICAgICAgICBpZihkaWZmID4gMCkgLy9UaGUgdW5zb2xkIGNhcGFjaXR5IG1vdmVzIHRvIHRlYW0KICAgICAgICAgICAgdG9rZW4ubWludChvd25lciwgZGlmZik7CiAgICAgICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICAgICAgICBGaW5pc2hTYWxlKCk7CiAgICB9CgogICAgLy8gUHJpdmF0ZSBmdW5jdGlvbnMKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgICAvKioKICAgICogR2V0cyB0b2tlbnMgZm9yIHNwZWNpZmllZCBldGhlciBwcm92aWRlZCB0aGF0IHRoZXkgYXJlIHN0aWxsIHVuZGVyIHRoZSBjYXAKICAgICovCiAgICBmdW5jdGlvbiBnZXRUb2tlbnNBbW91bnRVbmRlckNhcCh1aW50IGV0aGVyQW1vdW50KSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKHVpbnQpewogICAgICAgIHVpbnQgdG9rZW5zID0gZ2V0VG9rZW5zQW1vdW50KGV0aGVyQW1vdW50KTsKICAgICAgICByZXF1aXJlKHRva2VucyA+IDApOwogICAgICAgIHJlcXVpcmUodG9rZW5zLmFkZCh0b2tlbi50b3RhbFN1cHBseSgpKSA8PSBTQUxFX0NBUCk7CiAgICAgICAgcmV0dXJuIHRva2VuczsKICAgIH0KCn0='.
	

]
