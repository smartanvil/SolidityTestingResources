Class {
	#name : #SRT922bcf2a9bd398a3ca942bc66436d8c4de57b83d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT922bcf2a9bd398a3ca942bc66436d8c4de57b83d >> base64 [
	^ 'LyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGVFeHRlbmRlZCB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgYWRkcmVzcyBwdWJsaWMgYWRtaW47CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGVFeHRlbmRlZCgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIGFkbWluID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIgb3IgYWRtaW4uCiAgICovCiAgbW9kaWZpZXIgb25seUFkbWluKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gYWRtaW4pOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KICB9CgogIC8qKgogICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gY2hhbmdlIGFkbWluIG9mIHRoZSBjb250cmFjdAogICogQHBhcmFtIG5ld0FkbWluIFRoZSBuZXcgYWRtaW4gYWRkcmVzcwogICovCiAgZnVuY3Rpb24gY2hhbmdlQWRtaW4oYWRkcmVzcyBuZXdBZG1pbikgb25seU93bmVyIHsKICAgIGlmIChuZXdBZG1pbiAhPSBhZGRyZXNzKDApKSB7CiAgICAgIGFkbWluID0gbmV3QWRtaW47CiAgICB9CiAgfQp9CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgaUNoYW1waW9uIHsKICAgIHVpbnQyNTYgcHVibGljIGN1cnJlbnRHYW1lQmxvY2tOdW1iZXI7CgogICAgZnVuY3Rpb24gYnV5VGlja2V0KGFkZHJlc3MpIHJldHVybnMgKHVpbnQyNTYsIHVpbnQyNTYpIHt9CiAgICBmdW5jdGlvbiBzdGFydEdhbWUoKSByZXR1cm5zIChib29sKSB7fQogICAgZnVuY3Rpb24gZmluaXNoQ3VycmVudEdhbWUoKSByZXR1cm5zIChhZGRyZXNzKSB7fQogICAgZnVuY3Rpb24gc2V0R2FtZVByaXplKHVpbnQyNTYsIHVpbnQyNTYpIHt9Cn0KCmNvbnRyYWN0IE90dG9sb3R0byBpcyBPd25hYmxlRXh0ZW5kZWQgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDg7CiAgICAKICAgIGV2ZW50IFN0YXJ0ZWRHYW1lKHVpbnQyNTYgaW5kZXhlZCBfZ2FtZSwgdWludDI1NiBfbmV4dEdhbWUpOwogICAgZXZlbnQgR2FtZVByb2dyZXNzKHVpbnQyNTYgaW5kZXhlZCBfZ2FtZSwgdWludDI1NiBfcHJvY2Vzc2VkLCB1aW50MjU2IF90b1Byb2Nlc3MpOwogICAgZXZlbnQgVGlja2V0KHVpbnQyNTYgaW5kZXhlZCBfZ2FtZSwgYWRkcmVzcyBpbmRleGVkIF9hZGRyZXNzLCBieXRlczMgYmV0KTsKICAgIGV2ZW50IFdpbihhZGRyZXNzIGluZGV4ZWQgX2FkZHJlc3MsIHVpbnQyNTYgaW5kZXhlZCBfZ2FtZSwgdWludDI1NiBfbWF0Y2hlcywgdWludDI1NiBfYW1vdW50LCB1aW50MjU2IF90aW1lKTsKICAgIGV2ZW50IEphY2twb3QoYWRkcmVzcyBpbmRleGVkIF9hZGRyZXNzLCB1aW50MjU2IGluZGV4ZWQgX2dhbWUsIHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBfdGltZSk7CiAgICBldmVudCBSYWlzZWRCeVBhcnRuZXIoYWRkcmVzcyBpbmRleGVkIF9wYXJ0bmVyLCB1aW50MjU2IF9nYW1lLCB1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgX3RpbWUpOwogICAgZXZlbnQgQ2hhbXBpb25HYW1lU3RhcnRlZCh1aW50MjU2IGluZGV4ZWQgX2dhbWUsIHVpbnQyNTYgX3RpbWUpOwogICAgZXZlbnQgQ2hhbXBpb25HYW1lRmluaXNoZWQodWludDI1NiBpbmRleGVkIF9nYW1lLCBhZGRyZXNzIGluZGV4ZWQgX3dpbm5lciwgdWludDI1NiBfYW1vdW50LCB1aW50MjU2IF90aW1lKTsKCiAgICBzdHJ1Y3QgV2lubmVyIHsKICAgICAgICBhZGRyZXNzIHBsYXllcjsKICAgICAgICBieXRlczMgIGJldDsKICAgICAgICB1aW50OCAgIG1hdGNoZXM7CiAgICB9CiAgICAKICAgIHN0cnVjdCBCZXQgewogICAgICAgIGFkZHJlc3MgcGxheWVyOwogICAgICAgIGJ5dGVzMyAgYmV0OwogICAgfQoKICAgIHN0cnVjdCBUaWNrZXRCZXQgewogICAgICAgIGJ5dGVzMyAgYmV0OwogICAgICAgIGJvb2wgICAgaXNQYXllZDsKICAgIH0KCiAgICBpQ2hhbXBpb24gcHVibGljIGNoYW1waW9uOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKHVpbnQyNTYgPT4gVGlja2V0QmV0W10pKSB0aWNrZXRzOwogICAgbWFwcGluZyh1aW50MjU2ID0+IEJldFtdKSBnYW1lQmV0czsKICAgIG1hcHBpbmcodWludDI1NiA9PiBXaW5uZXJbXSkgd2lubmVyczsKICAgIG1hcHBpbmcodWludDI1NiA9PiB1aW50MjU2KSB3ZWlSYWlzZWQ7CiAgICBtYXBwaW5nKHVpbnQyNTYgPT4gdWludDI1NikgZ2FtZVN0YXJ0QmxvY2s7CiAgICBtYXBwaW5nKHVpbnQyNTYgPT4gdWludDMyWzddKSBnYW1lU3RhdHM7CiAgICBtYXBwaW5nKHVpbnQyNTYgPT4gYm9vbCkgZ2FtZUNhbGN1bGF0ZWQ7CiAgICBtYXBwaW5nKHVpbnQyNTYgPT4gdWludDI1NikgZ2FtZUNhbGN1bGF0aW9uUHJvZ3Jlc3M7CiAgICBtYXBwaW5nKHVpbnQ4ID0+IHVpbnQ4KSBwZXJjZW50czsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBhZGRyZXNzKSBwYXJ0bmVyOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGFkZHJlc3NbXSkgcGFydG5lcnM7CgogICAgdWludDI1NiBwdWJsaWMgamFja3BvdDsKICAgIAogICAgdWludDI1NiBwdWJsaWMgZ2FtZU5leHQ7CiAgICB1aW50MjU2IHB1YmxpYyBnYW1lUGxheWVkOyAgCiAgICB1aW50OCAgIHB1YmxpYyBnYW1lRHVyYXRpb24gPSA2OwoKICAgIGJvb2wgcHVibGljIGdhbWVQbGF5ZWRTdGF0dXMgPSBmYWxzZTsKICAgIAogICAgdWludDY0ICBwdWJsaWMgdGlja2V0UHJpY2UgPSAwLjAwMSBldGhlcjsKICAgIAogICAgZnVuY3Rpb24gT3R0b2xvdHRvKCkge30KICAgIAogICAgZnVuY3Rpb24gaW5pdChhZGRyZXNzIF9jaGFtcGlvbikgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGdhbWVOZXh0ID09IDApOwogICAgICAgIGdhbWVOZXh0ID0gYmxvY2subnVtYmVyOwogICAgICAgIAogICAgICAgIHBlcmNlbnRzWzFdID0gNTsKICAgICAgICBwZXJjZW50c1syXSA9IDg7CiAgICAgICAgcGVyY2VudHNbM10gPSAxMjsKICAgICAgICBwZXJjZW50c1s0XSA9IDE1OwogICAgICAgIHBlcmNlbnRzWzVdID0gMjU7CiAgICAgICAgcGVyY2VudHNbNl0gPSAzNTsKCiAgICAgICAgY2hhbXBpb24gPSBpQ2hhbXBpb24oX2NoYW1waW9uKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRHYW1lUHJpemUodWludDI1NiBfZ2FtZSkKICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiB3ZWlSYWlzZWRbX2dhbWVdOyAgICAgICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRHYW1lU3RhcnRCbG9jayh1aW50MjU2IF9nYW1lKSAKICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBnYW1lU3RhcnRCbG9ja1tfZ2FtZV07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldEdhbWVDYWxjdWxhdGlvblByb2dyZXNzKHVpbnQyNTYgX2dhbWUpIAogICAgICAgICAgICBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGdhbWVDYWxjdWxhdGlvblByb2dyZXNzW19nYW1lXTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQbGF5ZXJzQ291bnQodWludDI1NiBfZ2FtZSkKICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBnYW1lQmV0c1tfZ2FtZV0ubGVuZ3RoOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEdhbWVDYWxjdWxhdGVkU3RhdHModWludDI1NiBfZ2FtZSkKICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyAodWludDMyWzddKSB7CiAgICAgICAgcmV0dXJuIGdhbWVTdGF0c1tfZ2FtZV07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UGFydG5lcihhZGRyZXNzIF9wbGF5ZXIpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gcGFydG5lcltfcGxheWVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQYXJ0bmVycyhhZGRyZXNzIF9wbGF5ZXIpIAogICAgICAgICAgICBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzW10pIHsKICAgICAgICByZXR1cm4gcGFydG5lcnNbX3BsYXllcl07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QmV0KGFkZHJlc3MgX3BsYXllciwgdWludDI1NiBfZ2FtZSkgCiAgICAgICAgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzW10pIHsKICAgICAgICBieXRlczNbXSBtZW1vcnkgYmV0cyA9IG5ldyBieXRlczNbXSh0aWNrZXRzW19wbGF5ZXJdW19nYW1lXS5sZW5ndGgpOwogICAgICAgIGZvciAodWludDMyIGkgPSAwOyBpIDwgdGlja2V0c1tfcGxheWVyXVtfZ2FtZV0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYmV0c1tpXSA9IHRpY2tldHNbX3BsYXllcl1bX2dhbWVdW2ldLmJldDsKICAgICAgICB9ICAgICAgICAKICAgICAgICByZXR1cm4gYmV0czsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRXaW5uZXJzKHVpbnQyNTYgX2dhbWUpIAogICAgICAgICAgICBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzW10pIHsKICAgICAgICBhZGRyZXNzW10gbWVtb3J5IF93aW5uZXJzID0gbmV3IGFkZHJlc3NbXSh3aW5uZXJzW19nYW1lXS5sZW5ndGgpOwogICAgICAgIGZvciAodWludDMyIGkgPSAwOyBpIDwgd2lubmVyc1tfZ2FtZV0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgX3dpbm5lcnNbaV0gPSB3aW5uZXJzW19nYW1lXVtpXS5wbGF5ZXI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfd2lubmVyczsKICAgIH0KCiAgICBmdW5jdGlvbiBiZXRzQXJlUGF5ZWQoYWRkcmVzcyBfcGxheWVyLCB1aW50MjU2IF9nYW1lKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgdWludDI1NiBzdGFydEJsb2NrID0gZ2V0R2FtZVN0YXJ0QmxvY2soX2dhbWUpOwogICAgICAgIGZvciAodWludDE2IGkgPSAwOyBpIDwgdGlja2V0c1tfcGxheWVyXVtfZ2FtZV0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRpY2tldHNbX3BsYXllcl1bX2dhbWVdW2ldLmlzUGF5ZWQgPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIHVpbnQ4IG1hdGNoZXMgPSBnZXRNYXRjaGVzKHN0YXJ0QmxvY2ssIHRpY2tldHNbX3BsYXllcl1bX2dhbWVdW2ldLmJldCk7CiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcyA+IDApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0R2FtZUJsb2Nrcyh1aW50MjU2IF9nYW1lKSAKICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyhieXRlczMyW10pIHsKICAgICAgICB1aW50MjU2IHN0YXJ0QmxvY2sgPSBnZXRHYW1lU3RhcnRCbG9jayhfZ2FtZSk7CiAgICAgICAgYnl0ZXMzMltdIG1lbW9yeSBibG9ja3MgPSBuZXcgYnl0ZXMzMltdKDYpOwogICAgICAgIHVpbnQ4IG51bSA9IDA7CiAgICAgICAgZm9yIChzdGFydEJsb2NrOyBzdGFydEJsb2NrICsgbnVtIDw9IHN0YXJ0QmxvY2sgKyBnYW1lRHVyYXRpb24gLSAxOyBudW0rKykgewogICAgICAgICAgICBibG9ja3NbbnVtXSA9IGJsb2NrLmJsb2NraGFzaChzdGFydEJsb2NrICsgbnVtKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIGJsb2NrczsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdG9CeXRlcyh1aW50OCBuMSwgdWludDggbjIsIHVpbnQ4IG4zLCB1aW50OCBuNCwgdWludDggbjUsIHVpbnQ4IG42KSAKICAgICAgICAgICAgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzKSB7CiAgICAgICAgcmV0dXJuIGJ5dGVzMygxNioqNSpuMSsxNioqNCpuMisxNioqMypuMysxNioqMipuNCsxNioqMSpuNStuNik7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIG1vZGlmeUJldChieXRlczMyIF9iZXQsIHVpbnQyNTYgX3N0ZXApIAogICAgICAgICAgICBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChieXRlczMyKSB7CiAgICAgICAgcmV0dXJuIF9iZXQgPj4gKDIzMiArIChfc3RlcCAqIDQgLSA0KSkgPDwgMjUyID4+IDI1MjsKICAgIH0KCiAgICBmdW5jdGlvbiBtb2RpZnlCbG9jayh1aW50MjU2IF9ibG9ja051bWJlcikgCiAgICAgICAgICAgIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzMzIpIHsKICAgICAgICByZXR1cm4gYmxvY2suYmxvY2toYXNoKF9ibG9ja051bWJlcikgPDwgMjUyID4+IDI1MjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZXF1YWxOdW1iZXIoYnl0ZXMzMiBfYmV0LCB1aW50MjU2IF9nYW1lLCB1aW50MjU2IF9lbmRCbG9jaykgCiAgICAgICAgICAgIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICB1aW50MjU2IHN0ZXAgPSBfZW5kQmxvY2sgLSBfZ2FtZTsKICAgICAgICBpZiAobW9kaWZ5QmxvY2soX2dhbWUpIF4gbW9kaWZ5QmV0KF9iZXQsIHN0ZXApID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gbWFrZUJldCh1aW50OCBuMSwgdWludDggbjIsIHVpbnQ4IG4zLCB1aW50OCBuNCwgdWludDggbjUsIHVpbnQ4IG42LCBhZGRyZXNzIF9wYXJ0bmVyKSAKICAgICAgICAgICAgcGF5YWJsZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPT0gdGlja2V0UHJpY2UpOwogICAgICAgICAgICAgICAgCiAgICAgICAgYnl0ZXMzIHVCZXQgPSB0b0J5dGVzKG4xLCBuMiwgbjMsIG40LCBuNSwgbjYpOwogICAgICAgIEJldCBtZW1vcnkgcEJldCA9IEJldCh7cGxheWVyOiBtc2cuc2VuZGVyLCBiZXQ6IHVCZXR9KTsKICAgICAgICBUaWNrZXRCZXQgbWVtb3J5IHRCZXQgPSBUaWNrZXRCZXQoe2JldDogdUJldCwgaXNQYXllZDogZmFsc2V9KTsKCiAgICAgICAgdGlja2V0c1ttc2cuc2VuZGVyXVtnYW1lTmV4dF0ucHVzaCh0QmV0KTsKICAgICAgICBnYW1lQmV0c1tnYW1lTmV4dF0ucHVzaChwQmV0KTsKICAgICAgICAKICAgICAgICB3ZWlSYWlzZWRbZ2FtZU5leHRdICs9IHRpY2tldFByaWNlOwogICAgICAgIAogICAgICAgIFRpY2tldChnYW1lTmV4dCwgbXNnLnNlbmRlciwgdUJldCk7CgogICAgICAgIGNoYW1waW9uLmJ1eVRpY2tldChtc2cuc2VuZGVyKTsKCiAgICAgICAgaWYgKF9wYXJ0bmVyICE9IDB4MCAmJiBwYXJ0bmVyW21zZy5zZW5kZXJdID09IDB4MCkgewogICAgICAgICAgICBhZGRQYXJ0bmVyKF9wYXJ0bmVyLCBtc2cuc2VuZGVyKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0R2FtZSgpIG9ubHlBZG1pbiByZXR1cm5zIChib29sKSB7CiAgICAgICAgZ2FtZVBsYXllZCA9IGdhbWVOZXh0OwogICAgICAgIGdhbWVOZXh0ID0gYmxvY2subnVtYmVyOwogICAgICAgIGdhbWVQbGF5ZWRTdGF0dXMgPSB0cnVlOwoKICAgICAgICBnYW1lU3RhcnRCbG9ja1tnYW1lUGxheWVkXSA9IGdhbWVOZXh0ICsgZ2FtZUR1cmF0aW9uOwoKCiAgICAgICAgamFja3BvdCArPSB3ZWlSYWlzZWRbZ2FtZVBsYXllZF0ubXVsKHBlcmNlbnRzWzZdKS5kaXYoMTAwKTsKICAgICAgICBTdGFydGVkR2FtZShnYW1lUGxheWVkLCBnYW1lTmV4dCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE1hdGNoZXModWludDI1NiBfZ2FtZSwgYnl0ZXMzIF9iZXQpIAogICAgICAgICAgICBjb25zdGFudCByZXR1cm5zICh1aW50OCkgewogICAgICAgIGJ5dGVzMzIgYmV0ID0gYnl0ZXMzMihfYmV0KTsKICAgICAgICB1aW50MjU2IGVuZEJsb2NrID0gX2dhbWUgKyBnYW1lRHVyYXRpb247CiAgICAgICAgdWludDggbWF0Y2hlcyA9IDA7CiAgICAgICAgZm9yICg7IGVuZEJsb2NrID4gX2dhbWU7IF9nYW1lKyspIHsKICAgICAgICAgICAgaWYgKGVxdWFsTnVtYmVyKGJldCwgX2dhbWUsIGVuZEJsb2NrKSkgewogICAgICAgICAgICAgICAgbWF0Y2hlcysrOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBtYXRjaGVzOwogICAgfQogICAgICAgIAogICAgZnVuY3Rpb24gZ2V0QWxsTWF0Y2hlcyh1aW50MjU2IF9nYW1lKSAKICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyAodWludDI1NltdKSB7CiAgICAgICAgdWludDI1NiBzdGFydEJsb2NrID0gZ2V0R2FtZVN0YXJ0QmxvY2soX2dhbWUpOwogICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgbWF0Y2hlcyA9IG5ldyB1aW50MjU2W10oNyk7CiAgICAgICAgZm9yICh1aW50MzIgaSA9IDA7IGkgPCBnYW1lQmV0c1tfZ2FtZV0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgQmV0IG1lbW9yeSBiZXQgPSBnYW1lQmV0c1tfZ2FtZV1baV07CiAgICAgICAgICAgIHVpbnQ4IG1hdGNoZWQgPSBnZXRNYXRjaGVzKHN0YXJ0QmxvY2ssIGJldC5iZXQpOwogICAgICAgICAgICBpZiAobWF0Y2hlZCA9PSAwKSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAobWF0Y2hlZCA9PSAxKSA/IG1hdGNoZXNbMV0gKz0gMSA6IAogICAgICAgICAgICAobWF0Y2hlZCA9PSAyKSA/IG1hdGNoZXNbMl0gKz0gMSA6IAogICAgICAgICAgICAobWF0Y2hlZCA9PSAzKSA/IG1hdGNoZXNbM10gKz0gMSA6IAogICAgICAgICAgICAobWF0Y2hlZCA9PSA0KSA/IG1hdGNoZXNbNF0gKz0gMSA6CiAgICAgICAgICAgIChtYXRjaGVkID09IDUpID8gbWF0Y2hlc1s1XSArPSAxIDoKICAgICAgICAgICAgKG1hdGNoZWQgPT0gNikgPyBtYXRjaGVzWzZdICs9IDEgOiBtYXRjaGVzWzZdICs9IDA7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBtYXRjaGVzOwogICAgfQoKICAgIGZ1bmN0aW9uIGdhbWVJc092ZXIodWludDI1NiBfZ2FtZSkgCiAgICAgICAgICAgIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoZ2FtZVN0YXJ0QmxvY2tbX2dhbWVdID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIChnYW1lU3RhcnRCbG9ja1tfZ2FtZV0gKyBnYW1lRHVyYXRpb24gLSAxKSA8IGJsb2NrLm51bWJlcjsgICAKICAgIH0KCiAgICBmdW5jdGlvbiBnYW1lSXNDYWxjdWxhdGVkKHVpbnQyNTYgX2dhbWUpCiAgICAgICAgICAgIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gZ2FtZUNhbGN1bGF0ZWRbX2dhbWVdOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUdhbWVUb0NhbGN1bGF0ZWQodWludDI1NiBfZ2FtZSkgaW50ZXJuYWwgewogICAgICAgIGdhbWVDYWxjdWxhdGVkW19nYW1lXSA9IHRydWU7CiAgICAgICAgZ2FtZVBsYXllZFN0YXR1cyA9IGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHByb2Nlc3NHYW1lKHVpbnQyNTYgX2dhbWUsIHVpbnQyNTYgY2FsY3VsYXRpb25TdGVwKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShnYW1lUGxheWVkU3RhdHVzID09IHRydWUpOwogICAgICAgIHJlcXVpcmUoZ2FtZUlzT3ZlcihfZ2FtZSkpOwoKICAgICAgICBpZiAoZ2FtZUlzQ2FsY3VsYXRlZChfZ2FtZSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKCiAgICAgICAgaWYgKGdhbWVDYWxjdWxhdGlvblByb2dyZXNzW19nYW1lXSA9PSBnYW1lQmV0c1tfZ2FtZV0ubGVuZ3RoKSB7CiAgICAgICAgICAgIHVwZGF0ZUdhbWVUb0NhbGN1bGF0ZWQoX2dhbWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IAoKICAgICAgICB1aW50MjU2IHN0ZXBzID0gY2FsY3VsYXRpb25TdGVwOwogICAgICAgIGlmIChnYW1lQ2FsY3VsYXRpb25Qcm9ncmVzc1tfZ2FtZV0gKyBzdGVwcyA+IGdhbWVCZXRzW19nYW1lXS5sZW5ndGgpIHsKICAgICAgICAgICAgc3RlcHMgLT0gZ2FtZUNhbGN1bGF0aW9uUHJvZ3Jlc3NbX2dhbWVdICsgc3RlcHMgLSBnYW1lQmV0c1tfZ2FtZV0ubGVuZ3RoOwogICAgICAgIH0KICAgIAogICAgICAgIHVpbnQzMltdIG1lbW9yeSBtYXRjaGVzID0gbmV3IHVpbnQzMltdKDcpOwogICAgICAgIHVpbnQyNTYgdG8gPSBnYW1lQ2FsY3VsYXRpb25Qcm9ncmVzc1tfZ2FtZV0gKyBzdGVwczsKICAgICAgICB1aW50MjU2IHN0YXJ0QmxvY2sgPSBnZXRHYW1lU3RhcnRCbG9jayhfZ2FtZSk7CiAgICAgICAgZm9yICg7IGdhbWVDYWxjdWxhdGlvblByb2dyZXNzW19nYW1lXSA8IHRvOyBnYW1lQ2FsY3VsYXRpb25Qcm9ncmVzc1tfZ2FtZV0rKykgewogICAgICAgICAgICBCZXQgbWVtb3J5IGJldCA9IGdhbWVCZXRzW19nYW1lXVtnYW1lQ2FsY3VsYXRpb25Qcm9ncmVzc1tfZ2FtZV1dOwogICAgICAgICAgICB1aW50OCBtYXRjaGVkID0gZ2V0TWF0Y2hlcyhzdGFydEJsb2NrLCBiZXQuYmV0KTsKICAgICAgICAgICAgaWYgKG1hdGNoZWQgPT0gMCkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKG1hdGNoZWQgPT0gMSkgPyBtYXRjaGVzWzFdICs9IDEgOiAKICAgICAgICAgICAgKG1hdGNoZWQgPT0gMikgPyBtYXRjaGVzWzJdICs9IDEgOiAKICAgICAgICAgICAgKG1hdGNoZWQgPT0gMykgPyBtYXRjaGVzWzNdICs9IDEgOiAKICAgICAgICAgICAgKG1hdGNoZWQgPT0gNCkgPyBtYXRjaGVzWzRdICs9IDEgOgogICAgICAgICAgICAobWF0Y2hlZCA9PSA1KSA/IG1hdGNoZXNbNV0gKz0gMSA6CiAgICAgICAgICAgIChtYXRjaGVkID09IDYpID8gbWF0Y2hlc1s2XSArPSAxIDogZ2FtZVN0YXRzW19nYW1lXVs2XTsKICAgICAgICB9CgogICAgICAgIGZvciAodWludDggaSA9IDE7IGkgPD0gNjsgaSsrKSB7CiAgICAgICAgICAgIGdhbWVTdGF0c1tfZ2FtZV1baV0gKz0gbWF0Y2hlc1tpXTsKICAgICAgICB9CgogICAgICAgIEdhbWVQcm9ncmVzcyhfZ2FtZSwgZ2FtZUNhbGN1bGF0aW9uUHJvZ3Jlc3NbX2dhbWVdLCBnYW1lQmV0c1tfZ2FtZV0ubGVuZ3RoKTsKICAgICAgICBpZiAoZ2FtZUNhbGN1bGF0aW9uUHJvZ3Jlc3NbX2dhbWVdID09IGdhbWVCZXRzW19nYW1lXS5sZW5ndGgpIHsKICAgICAgICAgICAgdXBkYXRlR2FtZVRvQ2FsY3VsYXRlZChfZ2FtZSk7CiAgICAgICAgICAgIGRpc3RyaWJ1dGVSYWlzZWRXZWlUb0phY2twb3QoX2dhbWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXN0cmlidXRlUmFpc2VkV2VpVG9KYWNrcG90KHVpbnQyNTYgX2dhbWUpIGludGVybmFsIHsKICAgICAgICBmb3IgKHVpbnQ4IGkgPSAxOyBpIDw9IDU7IGkgKyspIHsKICAgICAgICAgICAgaWYgKGdhbWVTdGF0c1tfZ2FtZV1baV0gPT0gMCkgewogICAgICAgICAgICAgICAgamFja3BvdCArPSB3ZWlSYWlzZWRbX2dhbWVdLm11bChwZXJjZW50c1tpXSkuZGl2KDEwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZGlzdHJpYnV0ZUZ1bmRzKHVpbnQyNTYgd2VpV2luLCB1aW50MjU2IF9nYW1lLCB1aW50OCBtYXRjaGVkLCBhZGRyZXNzIF9wbGF5ZXIpIAogICAgICAgICAgICBpbnRlcm5hbCB7CiAgICAgICAgdWludDI1NiB0b093bmVyID0gd2VpV2luLmRpdig1KTsKICAgICAgICB1aW50MjU2IHRvUGFydG5lciA9IDA7CgogICAgICAgIGlmIChwYXJ0bmVyW19wbGF5ZXJdICE9IDB4MCkgewogICAgICAgICAgICB0b1BhcnRuZXIgPSB0b093bmVyLm11bCg1KS5kaXYoMTAwKTsKICAgICAgICAgICAgcGFydG5lcltfcGxheWVyXS50cmFuc2Zlcih0b1BhcnRuZXIpOwogICAgICAgICAgICBSYWlzZWRCeVBhcnRuZXIoX3BsYXllciwgX2dhbWUsIHRvUGFydG5lciwgbm93KTsKICAgICAgICB9CgogICAgICAgIF9wbGF5ZXIudHJhbnNmZXIod2VpV2luIC0gdG9Pd25lcik7CiAgICAgICAgb3duZXIudHJhbnNmZXIodG9Pd25lciAtIHRvUGFydG5lcik7CgogICAgICAgIFdpbihfcGxheWVyLCBfZ2FtZSwgbWF0Y2hlZCwgd2VpV2luLCBub3cpOwogICAgICAgIGlmIChtYXRjaGVkID09IDYpIHsKICAgICAgICAgICAgSmFja3BvdChfcGxheWVyLCBfZ2FtZSwgd2VpV2luLCBub3cpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQcml6ZShhZGRyZXNzIF9wbGF5ZXIsIHVpbnQyNTYgX2dhbWUsIGJ5dGVzMyBfYmV0LCB1aW50MTYgX2luZGV4KSAKICAgICAgICAgICAgcmV0dXJucyAoYm9vbCkgewogICAgICAgIFRpY2tldEJldCBtZW1vcnkgdGlja2V0ID0gdGlja2V0c1tfcGxheWVyXVtfZ2FtZV1bX2luZGV4XTsKCiAgICAgICAgaWYgKHRpY2tldC5pc1BheWVkIHx8IHRpY2tldC5iZXQgIT0gX2JldCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHVpbnQyNTYgc3RhcnRCbG9jayA9IGdldEdhbWVTdGFydEJsb2NrKF9nYW1lKTsKICAgICAgICB1aW50OCBtYXRjaGVkID0gZ2V0TWF0Y2hlcyhzdGFydEJsb2NrLCB0aWNrZXQuYmV0KTsKICAgICAgICBpZiAobWF0Y2hlZCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHVpbnQyNTYgd2VpV2luID0gMDsKICAgICAgICBpZiAobWF0Y2hlZCAhPSA2KSB7CiAgICAgICAgICAgIHVpbnQyNTYgd2VpQnlNYXRjaCA9IHdlaVJhaXNlZFtnYW1lUGxheWVkXS5tdWwocGVyY2VudHNbbWF0Y2hlZF0pLmRpdigxMDApOwogICAgICAgICAgICB3ZWlXaW4gPSB3ZWlCeU1hdGNoLmRpdihnYW1lU3RhdHNbX2dhbWVdW21hdGNoZWRdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB3ZWlXaW4gPSBqYWNrcG90LmRpdihnYW1lU3RhdHNbX2dhbWVdW21hdGNoZWRdKTsKICAgICAgICAgICAgamFja3BvdCAtPSB3ZWlXaW47CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGRpc3RyaWJ1dGVGdW5kcyh3ZWlXaW4sIF9nYW1lLCBtYXRjaGVkLCBfcGxheWVyKTsKCiAgICAgICAgdGlja2V0LmlzUGF5ZWQgPSB0cnVlOwogICAgICAgIHRpY2tldHNbX3BsYXllcl1bX2dhbWVdW19pbmRleF0gPSB0aWNrZXQ7CgogICAgICAgIHdpbm5lcnNbZ2FtZVBsYXllZF0ucHVzaChXaW5uZXIoewogICAgICAgICAgICBwbGF5ZXI6IF9wbGF5ZXIsCiAgICAgICAgICAgIGJldDogdGlja2V0LmJldCwKICAgICAgICAgICAgbWF0Y2hlczogbWF0Y2hlZAogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkUGFydG5lcihhZGRyZXNzIF9wYXJ0bmVyLCBhZGRyZXNzIF9wbGF5ZXIpIAogICAgICAgICAgICBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKHBhcnRuZXJbX3BsYXllcl0gIT0gMHgwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHBhcnRuZXJbX3BsYXllcl0gPSBfcGFydG5lcjsKICAgICAgICBwYXJ0bmVyc1tfcGFydG5lcl0ucHVzaChfcGxheWVyKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gY2hhbXBpb24KICAgIGZ1bmN0aW9uIHN0YXJ0Q2hhbXBpb25HYW1lKCkgb25seUFkbWluIHsKICAgICAgICBjaGFtcGlvbi5zdGFydEdhbWUoKTsKCiAgICAgICAgdWludDI1NiBjdXJyZW50R2FtZSA9IGNoYW1waW9uLmN1cnJlbnRHYW1lQmxvY2tOdW1iZXIoKTsKICAgICAgICBDaGFtcGlvbkdhbWVTdGFydGVkKGN1cnJlbnRHYW1lLCBub3cpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmlzaENoYW1waW9uR2FtZSgpIG9ubHlBZG1pbiB7CiAgICAgICAgdWludDI1NiBjdXJyZW50R2FtZSA9IGNoYW1waW9uLmN1cnJlbnRHYW1lQmxvY2tOdW1iZXIoKTsKICAgICAgICAKICAgICAgICBhZGRyZXNzIHdpbm5lciA9IGNoYW1waW9uLmZpbmlzaEN1cnJlbnRHYW1lKCk7CiAgICAgICAgcmVxdWlyZSh3aW5uZXIgIT0gMHgwKTsKCiAgICAgICAgY2hhbXBpb24uc2V0R2FtZVByaXplKGN1cnJlbnRHYW1lLCBqYWNrcG90KTsKCiAgICAgICAgd2lubmVyLnRyYW5zZmVyKGphY2twb3QgLSBqYWNrcG90LmRpdig1KSk7CiAgICAgICAgb3duZXIudHJhbnNmZXIoamFja3BvdC5kaXYoNSkpOwoKICAgICAgICBDaGFtcGlvbkdhbWVGaW5pc2hlZChjdXJyZW50R2FtZSwgd2lubmVyLCBqYWNrcG90LCBub3cpOwoKICAgICAgICBqYWNrcG90ID0gMDsKICAgIH0KfQ=='.
	

]
