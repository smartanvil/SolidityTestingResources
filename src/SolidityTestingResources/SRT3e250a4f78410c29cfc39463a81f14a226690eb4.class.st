Class {
	#name : #SRT3e250a4f78410c29cfc39463a81f14a226690eb4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3e250a4f78410c29cfc39463a81f14a226690eb4 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovKioKICogQHRpdGxlIElucHV0IHZhbGlkYXRpb24KICoKICogLSBWYWxpZGF0ZXMgYXJndW1lbnQgbGVuZ3RoCiAqCiAqICNjcmVhdGVkIDAxLzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IElucHV0VmFsaWRhdG9yIHsKCiAgICAvKioKICAgICAqIEVSQzIwIFNob3J0IEFkZHJlc3MgQXR0YWNrIGZpeAogICAgICovCiAgICBtb2RpZmllciBzYWZlX2FyZ3VtZW50cyh1aW50IF9udW1BcmdzKSB7CiAgICAgICAgYXNzZXJ0KG1zZy5kYXRhLmxlbmd0aCA9PSBfbnVtQXJncyAqIDMyICsgNCk7CiAgICAgICAgXzsKICAgIH0KfQoKCi8qKgogKiBAdGl0bGUgTXVsdGktb3duZWQgaW50ZXJmYWNlCiAqCiAqIEludGVyZmFjZSB0aGF0IGFsbG93cyBtdWx0aXBsZSBvd25lcnMKICoKICogI2NyZWF0ZWQgMDkvMTAvMjAxNwogKiAjYXV0aG9yIEZyYW5rIEJvbm5ldAogKi8KY29udHJhY3QgSU11bHRpT3duZWQgewoKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIGBfYWNjb3VudGAgaXMgYW4gb3duZXIKICAgICAqCiAgICAgKiBAcGFyYW0gX2FjY291bnQgVGhlIGFkZHJlc3MgdG8gdGVzdCBhZ2FpbnN0CiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBfYWNjb3VudCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgYW1vdW50IG9mIG93bmVycwogICAgICoKICAgICAqIEByZXR1cm4gVGhlIGFtb3VudCBvZiBvd25lcnMKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0T3duZXJDb3VudCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKCiAgICAvKioKICAgICAqIEdldHMgdGhlIG93bmVyIGF0IGBfaW5kZXhgCiAgICAgKgogICAgICogQHBhcmFtIF9pbmRleCBUaGUgaW5kZXggb2YgdGhlIG93bmVyCiAgICAgKiBAcmV0dXJuIFRoZSBhZGRyZXNzIG9mIHRoZSBvd25lciBmb3VuZCBhdCBgX2luZGV4YAogICAgICovCiAgICBmdW5jdGlvbiBnZXRPd25lckF0KHVpbnQgX2luZGV4KSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKTsKCgogICAgIC8qKgogICAgICogQWRkcyBgX2FjY291bnRgIGFzIGEgbmV3IG93bmVyCiAgICAgKgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhY2NvdW50IHRvIGFkZCBhcyBhbiBvd25lcgogICAgICovCiAgICBmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIF9hY2NvdW50KTsKCgogICAgLyoqCiAgICAgKiBSZW1vdmVzIGBfYWNjb3VudGAgYXMgYW4gb3duZXIKICAgICAqCiAgICAgKiBAcGFyYW0gX2FjY291bnQgVGhlIGFjY291bnQgdG8gcmVtb3ZlIGFzIGFuIG93bmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlbW92ZU93bmVyKGFkZHJlc3MgX2FjY291bnQpOwp9CgoKLyoqCiAqIEB0aXRsZSBNdWx0aS1vd25lZAogKgogKiBBbGxvd3MgbXVsdGlwbGUgb3duZXJzCiAqCiAqICNjcmVhdGVkIDA5LzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IE11bHRpT3duZWQgaXMgSU11bHRpT3duZWQgewoKICAgIC8vIE93bmVycwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwcml2YXRlIG93bmVyczsKICAgIGFkZHJlc3NbXSBwcml2YXRlIG93bmVyc0luZGV4OwoKCiAgICAgLyoqCiAgICAgKiBBY2Nlc3MgaXMgcmVzdHJpY3RlZCB0byBvd25lcnMgb25seQogICAgICovCiAgICBtb2RpZmllciBvbmx5X293bmVyKCkgewogICAgICAgIHJlcXVpcmUoaXNPd25lcihtc2cuc2VuZGVyKSk7CiAgICAgICAgXzsKICAgIH0KCgogICAgLyoqCiAgICAgKiBUaGUgcHVibGlzaGVyIGlzIHRoZSBpbml0aWFsIG93bmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIE11bHRpT3duZWQoKSB7CiAgICAgICAgb3duZXJzSW5kZXgucHVzaChtc2cuc2VuZGVyKTsKICAgICAgICBvd25lcnNbbXNnLnNlbmRlcl0gPSAwOwogICAgfQoKCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiBgX2FjY291bnRgIGlzIHRoZSBjdXJyZW50IG93bmVyCiAgICAgKgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhZGRyZXNzIHRvIHRlc3QgYWdhaW5zdAogICAgICovCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FjY291bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIG93bmVyc1tfYWNjb3VudF0gPCBvd25lcnNJbmRleC5sZW5ndGggJiYgX2FjY291bnQgPT0gb3duZXJzSW5kZXhbb3duZXJzW19hY2NvdW50XV07CiAgICB9CgoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgYW1vdW50IG9mIG93bmVycwogICAgICoKICAgICAqIEByZXR1cm4gVGhlIGFtb3VudCBvZiBvd25lcnMKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0T3duZXJDb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIG93bmVyc0luZGV4Lmxlbmd0aDsKICAgIH0KCgogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBvd25lciBhdCBgX2luZGV4YAogICAgICoKICAgICAqIEBwYXJhbSBfaW5kZXggVGhlIGluZGV4IG9mIHRoZSBvd25lcgogICAgICogQHJldHVybiBUaGUgYWRkcmVzcyBvZiB0aGUgb3duZXIgZm91bmQgYXQgYF9pbmRleGAKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0T3duZXJBdCh1aW50IF9pbmRleCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gb3duZXJzSW5kZXhbX2luZGV4XTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBBZGRzIGBfYWNjb3VudGAgYXMgYSBuZXcgb3duZXIKICAgICAqCiAgICAgKiBAcGFyYW0gX2FjY291bnQgVGhlIGFjY291bnQgdG8gYWRkIGFzIGFuIG93bmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFkZE93bmVyKGFkZHJlc3MgX2FjY291bnQpIHB1YmxpYyBvbmx5X293bmVyIHsKICAgICAgICBpZiAoIWlzT3duZXIoX2FjY291bnQpKSB7CiAgICAgICAgICAgIG93bmVyc1tfYWNjb3VudF0gPSBvd25lcnNJbmRleC5wdXNoKF9hY2NvdW50KSAtIDE7CiAgICAgICAgfQogICAgfQoKCiAgICAvKioKICAgICAqIFJlbW92ZXMgYF9hY2NvdW50YCBhcyBhbiBvd25lcgogICAgICoKICAgICAqIEBwYXJhbSBfYWNjb3VudCBUaGUgYWNjb3VudCB0byByZW1vdmUgYXMgYW4gb3duZXIKICAgICAqLwogICAgZnVuY3Rpb24gcmVtb3ZlT3duZXIoYWRkcmVzcyBfYWNjb3VudCkgcHVibGljIG9ubHlfb3duZXIgewogICAgICAgIGlmIChpc093bmVyKF9hY2NvdW50KSkgewogICAgICAgICAgICB1aW50IGluZGV4VG9EZWxldGUgPSBvd25lcnNbX2FjY291bnRdOwogICAgICAgICAgICBhZGRyZXNzIGtleVRvTW92ZSA9IG93bmVyc0luZGV4W293bmVyc0luZGV4Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICBvd25lcnNJbmRleFtpbmRleFRvRGVsZXRlXSA9IGtleVRvTW92ZTsKICAgICAgICAgICAgb3duZXJzW2tleVRvTW92ZV0gPSBpbmRleFRvRGVsZXRlOyAKICAgICAgICAgICAgb3duZXJzSW5kZXgubGVuZ3RoLS07CiAgICAgICAgfQogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBUb2tlbiByZXRyaWV2ZSBpbnRlcmZhY2UKICoKICogQWxsb3dzIHRva2VucyB0byBiZSByZXRyaWV2ZWQgZnJvbSBhIGNvbnRyYWN0CiAqCiAqICNjcmVhdGVkIDI5LzA5LzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IElUb2tlblJldHJpZXZlciB7CgogICAgLyoqCiAgICAgKiBFeHRyYWN0cyB0b2tlbnMgZnJvbSB0aGUgY29udHJhY3QKICAgICAqCiAgICAgKiBAcGFyYW0gX3Rva2VuQ29udHJhY3QgVGhlIGFkZHJlc3Mgb2YgRVJDMjAgY29tcGF0aWJsZSB0b2tlbgogICAgICovCiAgICBmdW5jdGlvbiByZXRyaWV2ZVRva2VucyhhZGRyZXNzIF90b2tlbkNvbnRyYWN0KTsKfQoKCi8qKgogKiBAdGl0bGUgVG9rZW4gcmV0cmlldmUKICoKICogQWxsb3dzIHRva2VucyB0byBiZSByZXRyaWV2ZWQgZnJvbSBhIGNvbnRyYWN0CiAqCiAqICNjcmVhdGVkIDE4LzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IFRva2VuUmV0cmlldmVyIGlzIElUb2tlblJldHJpZXZlciB7CgogICAgLyoqCiAgICAgKiBFeHRyYWN0cyB0b2tlbnMgZnJvbSB0aGUgY29udHJhY3QKICAgICAqCiAgICAgKiBAcGFyYW0gX3Rva2VuQ29udHJhY3QgVGhlIGFkZHJlc3Mgb2YgRVJDMjAgY29tcGF0aWJsZSB0b2tlbgogICAgICovCiAgICBmdW5jdGlvbiByZXRyaWV2ZVRva2VucyhhZGRyZXNzIF90b2tlbkNvbnRyYWN0KSBwdWJsaWMgewogICAgICAgIElUb2tlbiB0b2tlbkluc3RhbmNlID0gSVRva2VuKF90b2tlbkNvbnRyYWN0KTsKICAgICAgICB1aW50IHRva2VuQmFsYW5jZSA9IHRva2VuSW5zdGFuY2UuYmFsYW5jZU9mKHRoaXMpOwogICAgICAgIGlmICh0b2tlbkJhbGFuY2UgPiAwKSB7CiAgICAgICAgICAgIHRva2VuSW5zdGFuY2UudHJhbnNmZXIobXNnLnNlbmRlciwgdG9rZW5CYWxhbmNlKTsKICAgICAgICB9CiAgICB9Cn0KCgovKioKICogQHRpdGxlIE9ic2VydmFibGUgaW50ZXJmYWNlCiAqCiAqIEFsbG93cyBvYnNlcnZlcnMgdG8gcmVnaXN0ZXIgYW5kIHVucmVnaXN0ZXIgd2l0aCB0aGUgCiAqIGltcGxlbWVudGluZyBzbWFydC1jb250cmFjdCB0aGF0IGlzIG9ic2VydmFibGUKICoKICogI2NyZWF0ZWQgMDkvMTAvMjAxNwogKiAjYXV0aG9yIEZyYW5rIEJvbm5ldAogKi8KY29udHJhY3QgSU9ic2VydmFibGUgewoKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIGBfYWNjb3VudGAgaXMgYSByZWdpc3RlcmVkIG9ic2VydmVyCiAgICAgKiAKICAgICAqIEBwYXJhbSBfYWNjb3VudCBUaGUgYWNjb3VudCB0byB0ZXN0IGFnYWluc3QKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgYWNjb3VudCBpcyBhIHJlZ2lzdGVyZWQgb2JzZXJ2ZXIKICAgICAqLwogICAgZnVuY3Rpb24gaXNPYnNlcnZlcihhZGRyZXNzIF9hY2NvdW50KSBjb25zdGFudCByZXR1cm5zIChib29sKTsKCgogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBhbW91bnQgb2YgcmVnaXN0ZXJlZCBvYnNlcnZlcnMKICAgICAqIAogICAgICogQHJldHVybiBUaGUgYW1vdW50IG9mIHJlZ2lzdGVyZWQgb2JzZXJ2ZXJzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldE9ic2VydmVyQ291bnQoKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCgogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBvYnNlcnZlciBhdCBgX2luZGV4YAogICAgICogCiAgICAgKiBAcGFyYW0gX2luZGV4IFRoZSBpbmRleCBvZiB0aGUgb2JzZXJ2ZXIKICAgICAqIEByZXR1cm4gVGhlIG9ic2VydmVycyBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldE9ic2VydmVyQXRJbmRleCh1aW50IF9pbmRleCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyk7CgoKICAgIC8qKgogICAgICogUmVnaXN0ZXIgYF9vYnNlcnZlcmAgYXMgYW4gb2JzZXJ2ZXIKICAgICAqIAogICAgICogQHBhcmFtIF9vYnNlcnZlciBUaGUgYWNjb3VudCB0byBhZGQgYXMgYW4gb2JzZXJ2ZXIKICAgICAqLwogICAgZnVuY3Rpb24gcmVnaXN0ZXJPYnNlcnZlcihhZGRyZXNzIF9vYnNlcnZlcik7CgoKICAgIC8qKgogICAgICogVW5yZWdpc3RlciBgX29ic2VydmVyYCBhcyBhbiBvYnNlcnZlcgogICAgICogCiAgICAgKiBAcGFyYW0gX29ic2VydmVyIFRoZSBhY2NvdW50IHRvIHJlbW92ZSBhcyBhbiBvYnNlcnZlcgogICAgICovCiAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyT2JzZXJ2ZXIoYWRkcmVzcyBfb2JzZXJ2ZXIpOwp9CgoKLyoqCiAqIEB0aXRsZSBBYnN0cmFjdCBPYnNlcnZhYmxlCiAqCiAqIEFsbG93cyBvYnNlcnZlcnMgdG8gcmVnaXN0ZXIgYW5kIHVucmVnaXN0ZXIgd2l0aCB0aGUgdGhlIAogKiBpbXBsZW1lbnRpbmcgc21hcnQtY29udHJhY3QgdGhhdCBpcyBvYnNlcnZhYmxlCiAqCiAqICNjcmVhdGVkIDA5LzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IE9ic2VydmFibGUgaXMgSU9ic2VydmFibGUgewoKICAgIC8vIE9ic2VydmVycwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHByaXZhdGUgb2JzZXJ2ZXJzOwogICAgYWRkcmVzc1tdIHByaXZhdGUgb2JzZXJ2ZXJJbmRleDsKCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYF9hY2NvdW50YCBpcyBhIHJlZ2lzdGVyZWQgb2JzZXJ2ZXIKICAgICAqIAogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhY2NvdW50IHRvIHRlc3QgYWdhaW5zdAogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSBhY2NvdW50IGlzIGEgcmVnaXN0ZXJlZCBvYnNlcnZlcgogICAgICovCiAgICBmdW5jdGlvbiBpc09ic2VydmVyKGFkZHJlc3MgX2FjY291bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIG9ic2VydmVyc1tfYWNjb3VudF0gPCBvYnNlcnZlckluZGV4Lmxlbmd0aCAmJiBfYWNjb3VudCA9PSBvYnNlcnZlckluZGV4W29ic2VydmVyc1tfYWNjb3VudF1dOwogICAgfQoKCiAgICAvKioKICAgICAqIEdldHMgdGhlIGFtb3VudCBvZiByZWdpc3RlcmVkIG9ic2VydmVycwogICAgICogCiAgICAgKiBAcmV0dXJuIFRoZSBhbW91bnQgb2YgcmVnaXN0ZXJlZCBvYnNlcnZlcnMKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0T2JzZXJ2ZXJDb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIG9ic2VydmVySW5kZXgubGVuZ3RoOwogICAgfQoKCiAgICAvKioKICAgICAqIEdldHMgdGhlIG9ic2VydmVyIGF0IGBfaW5kZXhgCiAgICAgKiAKICAgICAqIEBwYXJhbSBfaW5kZXggVGhlIGluZGV4IG9mIHRoZSBvYnNlcnZlcgogICAgICogQHJldHVybiBUaGUgb2JzZXJ2ZXJzIGFkZHJlc3MKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0T2JzZXJ2ZXJBdEluZGV4KHVpbnQgX2luZGV4KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBvYnNlcnZlckluZGV4W19pbmRleF07CiAgICB9CgoKICAgIC8qKgogICAgICogUmVnaXN0ZXIgYF9vYnNlcnZlcmAgYXMgYW4gb2JzZXJ2ZXIKICAgICAqIAogICAgICogQHBhcmFtIF9vYnNlcnZlciBUaGUgYWNjb3VudCB0byBhZGQgYXMgYW4gb2JzZXJ2ZXIKICAgICAqLwogICAgZnVuY3Rpb24gcmVnaXN0ZXJPYnNlcnZlcihhZGRyZXNzIF9vYnNlcnZlcikgcHVibGljIHsKICAgICAgICByZXF1aXJlKGNhblJlZ2lzdGVyT2JzZXJ2ZXIoX29ic2VydmVyKSk7CiAgICAgICAgaWYgKCFpc09ic2VydmVyKF9vYnNlcnZlcikpIHsKICAgICAgICAgICAgb2JzZXJ2ZXJzW19vYnNlcnZlcl0gPSBvYnNlcnZlckluZGV4LnB1c2goX29ic2VydmVyKSAtIDE7CiAgICAgICAgfQogICAgfQoKCiAgICAvKioKICAgICAqIFVucmVnaXN0ZXIgYF9vYnNlcnZlcmAgYXMgYW4gb2JzZXJ2ZXIKICAgICAqIAogICAgICogQHBhcmFtIF9vYnNlcnZlciBUaGUgYWNjb3VudCB0byByZW1vdmUgYXMgYW4gb2JzZXJ2ZXIKICAgICAqLwogICAgZnVuY3Rpb24gdW5yZWdpc3Rlck9ic2VydmVyKGFkZHJlc3MgX29ic2VydmVyKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoY2FuVW5yZWdpc3Rlck9ic2VydmVyKF9vYnNlcnZlcikpOwogICAgICAgIGlmIChpc09ic2VydmVyKF9vYnNlcnZlcikpIHsKICAgICAgICAgICAgdWludCBpbmRleFRvRGVsZXRlID0gb2JzZXJ2ZXJzW19vYnNlcnZlcl07CiAgICAgICAgICAgIGFkZHJlc3Mga2V5VG9Nb3ZlID0gb2JzZXJ2ZXJJbmRleFtvYnNlcnZlckluZGV4Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICBvYnNlcnZlckluZGV4W2luZGV4VG9EZWxldGVdID0ga2V5VG9Nb3ZlOwogICAgICAgICAgICBvYnNlcnZlcnNba2V5VG9Nb3ZlXSA9IGluZGV4VG9EZWxldGU7CiAgICAgICAgICAgIG9ic2VydmVySW5kZXgubGVuZ3RoLS07CiAgICAgICAgfQogICAgfQoKCiAgICAvKioKICAgICAqIFJldHVybnMgd2hldGhlciBpdCBpcyBhbGxvd2VkIHRvIHJlZ2lzdGVyIGBfb2JzZXJ2ZXJgIGJ5IGNhbGxpbmcgCiAgICAgKiBjYW5SZWdpc3Rlck9ic2VydmVyKCkgaW4gdGhlIGltcGxlbWVudGluZyBzbWFydC1jb250cmFjdAogICAgICoKICAgICAqIEBwYXJhbSBfb2JzZXJ2ZXIgVGhlIGFkZHJlc3MgdG8gcmVnaXN0ZXIgYXMgYW4gb2JzZXJ2ZXIKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgc2VuZGVyIGlzIGFsbG93ZWQgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhblJlZ2lzdGVyT2JzZXJ2ZXIoYWRkcmVzcyBfb2JzZXJ2ZXIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwoKCiAgICAvKioKICAgICAqIFJldHVybnMgd2hldGhlciBpdCBpcyBhbGxvd2VkIHRvIHVucmVnaXN0ZXIgYF9vYnNlcnZlcmAgYnkgY2FsbGluZyAKICAgICAqIGNhblJlZ2lzdGVyT2JzZXJ2ZXIoKSBpbiB0aGUgaW1wbGVtZW50aW5nIHNtYXJ0LWNvbnRyYWN0CiAgICAgKgogICAgICogQHBhcmFtIF9vYnNlcnZlciBUaGUgYWRkcmVzcyB0byB1bnJlZ2lzdGVyIGFzIGFuIG9ic2VydmVyCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHNlbmRlciBpcyBhbGxvd2VkIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBjYW5VbnJlZ2lzdGVyT2JzZXJ2ZXIoYWRkcmVzcyBfb2JzZXJ2ZXIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwp9CgoKLyoqCiAqIEB0aXRsZSBUb2tlbiBvYnNlcnZlciBpbnRlcmZhY2UKICoKICogQWxsb3dzIGEgdG9rZW4gc21hcnQtY29udHJhY3QgdG8gbm90aWZ5IG9ic2VydmVycyAKICogd2hlbiB0b2tlbnMgYXJlIHJlY2VpdmVkCiAqCiAqICNjcmVhdGVkIDA5LzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IElUb2tlbk9ic2VydmVyIHsKCiAgICAvKioKICAgICAqIENhbGxlZCBieSB0aGUgb2JzZXJ2ZWQgdG9rZW4gc21hcnQtY29udHJhY3QgaW4gb3JkZXIgCiAgICAgKiB0byBub3RpZnkgdGhlIHRva2VuIG9ic2VydmVyIHdoZW4gdG9rZW5zIGFyZSByZWNlaXZlZAogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyB0aGF0IHRoZSB0b2tlbnMgd2hlcmUgc2VuZCBmcm9tCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgd2FzIHJlY2VpdmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIG5vdGlmeVRva2Vuc1JlY2VpdmVkKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgRVJDMjAgY29tcGF0aWJsZSB0b2tlbiBpbnRlcmZhY2UKICoKICogLSBJbXBsZW1lbnRzIEVSQyAyMCBUb2tlbiBzdGFuZGFyZAogKiAtIEltcGxlbWVudHMgc2hvcnQgYWRkcmVzcyBhdHRhY2sgZml4CiAqCiAqICNjcmVhdGVkIDI5LzA5LzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IElUb2tlbiB7IAoKICAgIC8qKiAKICAgICAqIEdldCB0aGUgdG90YWwgc3VwcGx5IG9mIHRva2VucwogICAgICogCiAgICAgKiBAcmV0dXJuIFRoZSB0b3RhbCBzdXBwbHkKICAgICAqLwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCgogICAgLyoqIAogICAgICogR2V0IGJhbGFuY2Ugb2YgYF9vd25lcmAgCiAgICAgKiAKICAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogICAgICogQHJldHVybiBUaGUgYmFsYW5jZQogICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKCiAgICAvKiogCiAgICAgKiBTZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgICAgKiAKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wpOwoKCiAgICAvKiogCiAgICAgKiBTZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgICAqIAogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sKTsKCgogICAgLyoqIAogICAgICogYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAgKiAKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sKTsKCgogICAgLyoqIAogICAgICogR2V0IHRoZSBhbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyB0aGF0IGBfc3BlbmRlcmAgaXMgYWxsb3dlZCB0byBzcGVuZCBmcm9tIGBfb3duZXJgCiAgICAgKiAKICAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgICogQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7Cn0KCgovKioKICogQHRpdGxlIEVSQzIwIGNvbXBhdGlibGUgdG9rZW4KICoKICogLSBJbXBsZW1lbnRzIEVSQyAyMCBUb2tlbiBzdGFuZGFyZAogKiAtIEltcGxlbWVudHMgc2hvcnQgYWRkcmVzcyBhdHRhY2sgZml4CiAqCiAqICNjcmVhdGVkIDI5LzA5LzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IFRva2VuIGlzIElUb2tlbiwgSW5wdXRWYWxpZGF0b3IgewoKICAgIC8vIEV0aGVyZXVtIHRva2VuIHN0YW5kYXJkCiAgICBzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gIlRva2VuIDAuMyI7CiAgICBzdHJpbmcgcHVibGljIG5hbWU7ICAgICAgICAKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDggcHVibGljIGRlY2ltYWxzOwoKICAgIC8vIFRva2VuIHN0YXRlCiAgICB1aW50IGludGVybmFsIHRvdGFsVG9rZW5TdXBwbHk7CgogICAgLy8gVG9rZW4gYmFsYW5jZXMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgaW50ZXJuYWwgYmFsYW5jZXM7CgogICAgLy8gVG9rZW4gYWxsb3dhbmNlcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBpbnRlcm5hbCBhbGxvd2VkOwoKCiAgICAvLyBFdmVudHMKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludCBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7CgogICAgLyoqIAogICAgICogQ29uc3RydWN0IEVSQzIwIHRva2VuCiAgICAgKiAKICAgICAqIEBwYXJhbSBfbmFtZSBUaGUgZnVsbCB0b2tlbiBuYW1lCiAgICAgKiBAcGFyYW0gX3N5bWJvbCBUaGUgdG9rZW4gc3ltYm9sIChhYmVycmF0aW9uKQogICAgICogQHBhcmFtIF9kZWNpbWFscyBUaGUgdG9rZW4gcHJlY2lzaW9uCiAgICAgKi8KICAgIGZ1bmN0aW9uIFRva2VuKHN0cmluZyBfbmFtZSwgc3RyaW5nIF9zeW1ib2wsIHVpbnQ4IF9kZWNpbWFscykgewogICAgICAgIG5hbWUgPSBfbmFtZTsKICAgICAgICBzeW1ib2wgPSBfc3ltYm9sOwogICAgICAgIGRlY2ltYWxzID0gX2RlY2ltYWxzOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICB0b3RhbFRva2VuU3VwcGx5ID0gMDsKICAgIH0KCgogICAgLyoqIAogICAgICogR2V0IHRoZSB0b3RhbCB0b2tlbiBzdXBwbHkKICAgICAqIAogICAgICogQHJldHVybiBUaGUgdG90YWwgc3VwcGx5CiAgICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdG90YWxUb2tlblN1cHBseTsKICAgIH0KCgogICAgLyoqIAogICAgICogR2V0IGJhbGFuY2Ugb2YgYF9vd25lcmAgCiAgICAgKiAKICAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogICAgICogQHJldHVybiBUaGUgYmFsYW5jZQogICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgoKICAgIC8qKiAKICAgICAqIFNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgICAqIAogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHNhZmVfYXJndW1lbnRzKDIpIHJldHVybnMgKGJvb2wpIHsKCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoIHRva2VucwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsgICAKCiAgICAgICAgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+PSBiYWxhbmNlc1tfdG9dKTsKCiAgICAgICAgLy8gVHJhbnNmZXIgdG9rZW5zCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwoKICAgICAgICAvLyBOb3RpZnkgbGlzdGVuZXJzCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvKiogCiAgICAgKiBTZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgICAqIAogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdCAKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHNhZmVfYXJndW1lbnRzKDMpIHJldHVybnMgKGJvb2wpIHsKCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKTsKCiAgICAgICAgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+PSBiYWxhbmNlc1tfdG9dKTsKCiAgICAgICAgLy8gQ2hlY2sgYWxsb3dhbmNlCiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgICAgICAvLyBUcmFuc2ZlciB0b2tlbnMKICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwoKICAgICAgICAvLyBVcGRhdGUgYWxsb3dhbmNlCiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwoKICAgICAgICAvLyBOb3RpZnkgbGlzdGVuZXJzCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgLyoqIAogICAgICogYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAgKiAKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMgc2FmZV9hcmd1bWVudHMoMikgcmV0dXJucyAoYm9vbCkgewoKICAgICAgICAvLyBVcGRhdGUgYWxsb3dhbmNlCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CgogICAgICAgIC8vIE5vdGlmeSBsaXN0ZW5lcnMKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgLyoqIAogICAgICogR2V0IHRoZSBhbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyB0aGF0IGBfc3BlbmRlcmAgaXMgYWxsb3dlZCB0byBzcGVuZCBmcm9tIGBfb3duZXJgCiAgICAgKiAKICAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgICogQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cn0KCgovKioKICogQHRpdGxlIE1hbmFnZWRUb2tlbiBpbnRlcmZhY2UKICoKICogQWRkcyB0aGUgZm9sbG93aW5nIGZ1bmN0aW9uYWxpdHkgdG8gdGhlIGJhc2ljIEVSQzIwIHRva2VuCiAqIC0gTG9ja2luZwogKiAtIElzc3VpbmcKICogLSBCdXJuaW5nIAogKgogKiAjY3JlYXRlZCAyOS8wOS8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBJTWFuYWdlZFRva2VuIGlzIElUb2tlbiB7IAoKICAgIC8qKiAKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdG9rZW4gaXMgbG9ja2VkCiAgICAgKiAKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdG9rZW4gaXMgbG9ja2VkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzTG9ja2VkKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogTG9ja3MgdGhlIHRva2VuIHNvIHRoYXQgdGhlIHRyYW5zZmVyaW5nIG9mIHZhbHVlIGlzIGRpc2FibGVkIAogICAgICoKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdW5sb2NraW5nIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBsb2NrKCkgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogVW5sb2NrcyB0aGUgdG9rZW4gc28gdGhhdCB0aGUgdHJhbnNmZXJpbmcgb2YgdmFsdWUgaXMgZW5hYmxlZCAKICAgICAqCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHVubG9ja2luZyB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gdW5sb2NrKCkgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogSXNzdWVzIGBfdmFsdWVgIG5ldyB0b2tlbnMgdG8gYF90b2AKICAgICAqCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHdoaWNoIHRoZSB0b2tlbnMgd2lsbCBiZSBpc3N1ZWQKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiBuZXcgdG9rZW5zIHRvIGlzc3VlCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRva2VucyB3aGVyZSBzdWNlc3NmdWxseSBpc3N1ZWQgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzc3VlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogQnVybnMgYF92YWx1ZWAgdG9rZW5zIG9mIGBfZnJvbWAKICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3MgdGhhdCBvd25zIHRoZSB0b2tlbnMgdG8gYmUgYnVybmVkCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGJ1cm5lZAogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0b2tlbnMgd2hlcmUgc3VjZXNzZnVsbHkgYnVybmVkIG9yIG5vdCAKICAgICAqLwogICAgZnVuY3Rpb24gYnVybihhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCk7Cn0KCgovKioKICogQHRpdGxlIE1hbmFnZWRUb2tlbgogKgogKiBBZGRzIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25hbGl0eSB0byB0aGUgYmFzaWMgRVJDMjAgdG9rZW4KICogLSBMb2NraW5nCiAqIC0gSXNzdWluZwogKiAtIEJ1cm5pbmcgCiAqCiAqICNjcmVhdGVkIDI5LzA5LzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IE1hbmFnZWRUb2tlbiBpcyBJTWFuYWdlZFRva2VuLCBUb2tlbiwgTXVsdGlPd25lZCB7CgogICAgLy8gVG9rZW4gc3RhdGUKICAgIGJvb2wgaW50ZXJuYWwgbG9ja2VkOwoKCiAgICAvKioKICAgICAqIEFsbG93IGFjY2VzcyBvbmx5IHdoZW4gbm90IGxvY2tlZAogICAgICovCiAgICBtb2RpZmllciBvbmx5X3doZW5fdW5sb2NrZWQoKSB7CiAgICAgICAgcmVxdWlyZSghbG9ja2VkKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvKiogCiAgICAgKiBDb25zdHJ1Y3QgbWFuYWdlZCBFUkMyMCB0b2tlbgogICAgICogCiAgICAgKiBAcGFyYW0gX25hbWUgVGhlIGZ1bGwgdG9rZW4gbmFtZQogICAgICogQHBhcmFtIF9zeW1ib2wgVGhlIHRva2VuIHN5bWJvbCAoYWJlcnJhdGlvbikKICAgICAqIEBwYXJhbSBfZGVjaW1hbHMgVGhlIHRva2VuIHByZWNpc2lvbgogICAgICogQHBhcmFtIF9sb2NrZWQgV2hldGhlciB0aGUgdG9rZW4gc2hvdWxkIGJlIGxvY2tlZCBpbml0aWFsbHkKICAgICAqLwogICAgZnVuY3Rpb24gTWFuYWdlZFRva2VuKHN0cmluZyBfbmFtZSwgc3RyaW5nIF9zeW1ib2wsIHVpbnQ4IF9kZWNpbWFscywgYm9vbCBfbG9ja2VkKSAKICAgICAgICBUb2tlbihfbmFtZSwgX3N5bWJvbCwgX2RlY2ltYWxzKSB7CiAgICAgICAgbG9ja2VkID0gX2xvY2tlZDsKICAgIH0KCgogICAgLyoqIAogICAgICogU2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgICogCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgb25seV93aGVuX3VubG9ja2VkIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQoKCiAgICAvKiogCiAgICAgKiBTZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgICAqIAogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgb25seV93aGVuX3VubG9ja2VkIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgoKICAgIC8qKiAKICAgICAqIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogICAgICogCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlcgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VwZXIuYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKTsKICAgIH0KCgogICAgLyoqIAogICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB0b2tlbiBpcyBsb2NrZWQKICAgICAqIAogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0b2tlbiBpcyBsb2NrZWQKICAgICAqLwogICAgZnVuY3Rpb24gaXNMb2NrZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBsb2NrZWQ7CiAgICB9CgoKICAgIC8qKgogICAgICogTG9ja3MgdGhlIHRva2VuIHNvIHRoYXQgdGhlIHRyYW5zZmVyaW5nIG9mIHZhbHVlIGlzIGVuYWJsZWQgCiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSBsb2NraW5nIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBsb2NrKCkgcHVibGljIG9ubHlfb3duZXIgcmV0dXJucyAoYm9vbCkgIHsKICAgICAgICBsb2NrZWQgPSB0cnVlOwogICAgICAgIHJldHVybiBsb2NrZWQ7CiAgICB9CgoKICAgIC8qKgogICAgICogVW5sb2NrcyB0aGUgdG9rZW4gc28gdGhhdCB0aGUgdHJhbnNmZXJpbmcgb2YgdmFsdWUgaXMgZW5hYmxlZCAKICAgICAqCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHVubG9ja2luZyB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gdW5sb2NrKCkgcHVibGljIG9ubHlfb3duZXIgcmV0dXJucyAoYm9vbCkgIHsKICAgICAgICBsb2NrZWQgPSBmYWxzZTsKICAgICAgICByZXR1cm4gIWxvY2tlZDsKICAgIH0KCgogICAgLyoqCiAgICAgKiBJc3N1ZXMgYF92YWx1ZWAgbmV3IHRva2VucyB0byBgX3RvYAogICAgICoKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gd2hpY2ggdGhlIHRva2VucyB3aWxsIGJlIGlzc3VlZAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIG5ldyB0b2tlbnMgdG8gaXNzdWUKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzc3VlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIG9ubHlfb3duZXIgc2FmZV9hcmd1bWVudHMoMikgcmV0dXJucyAoYm9vbCkgewogICAgICAgIAogICAgICAgIC8vIENoZWNrIGZvciBvdmVyZmxvd3MKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW190b10gKyBfdmFsdWUgPj0gYmFsYW5jZXNbX3RvXSk7CgogICAgICAgIC8vIENyZWF0ZSB0b2tlbnMKICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICB0b3RhbFRva2VuU3VwcGx5ICs9IF92YWx1ZTsKCiAgICAgICAgLy8gTm90aWZ5IGxpc3RlbmVycyAKICAgICAgICBUcmFuc2ZlcigwLCB0aGlzLCBfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKHRoaXMsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBCdXJucyBgX3ZhbHVlYCB0b2tlbnMgb2YgYF9yZWNpcGllbnRgCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIHRoYXQgb3ducyB0aGUgdG9rZW5zIHRvIGJlIGJ1cm5lZAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBidXJuZWQKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdG9rZW5zIHdoZXJlIHN1Y2Vzc2Z1bGx5IGJ1cm5lZCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gYnVybihhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSkgcHVibGljIG9ubHlfb3duZXIgc2FmZV9hcmd1bWVudHMoMikgcmV0dXJucyAoYm9vbCkgewoKICAgICAgICAvLyBDaGVjayBpZiB0aGUgdG9rZW4gb3duZXIgaGFzIGVub3VnaCB0b2tlbnMKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUpOwoKICAgICAgICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gLSBfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKCiAgICAgICAgLy8gQnVybiB0b2tlbnMKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgIHRvdGFsVG9rZW5TdXBwbHkgLT0gX3ZhbHVlOwoKICAgICAgICAvLyBOb3RpZnkgbGlzdGVuZXJzIAogICAgICAgIFRyYW5zZmVyKF9mcm9tLCAwLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBEUlAgU2VjdXJpdHkgdG9rZW4gKERSUFMpCiAqCiAqIERSUFMgYXMgaW5kaWNhdGVkIGJ5IGl0cyDigJhT4oCZIGRlc2lnbmF0aW9uLCBtYWludGFpbmluZyB0aGUgcHJpbWFyeSBzZWN1cml0eSBmdW5jdGlvbnMgb2YgdGhlIERSUCB0b2tlbiBhcyAKICogb3V0bGluZWQgd2l0aGluIHRoZSBEY29ycCB3aGl0ZXBhcGVyIChodHRwczovL3d3dy5kY29ycC5pdC93aGl0ZXBhcGVyKS4gJiMxNjA7CiAqCiAqIFRob3NlIHdobyBiZWFyIERSUFMgd2lsbCBiZSBlbnRpdGxlZCB0byBwcm9maXQgc2hhcmluZyBpbiB0aGUgZm9ybSBvZiBkaXZpZGVuZHMgYXMgcGVyIGEgdm90aW5nIHByb2Nlc3MsIAogKiBhbmQgaXMgY29uc2lkZXJlZCB0aGUgIlNlY3VyaXR5IiB0b2tlbiBvZiBEY29ycC4KICoKICogaHR0cHM6Ly93d3cuZGNvcnAuaXQvZHJwcwogKgogKiAjY3JlYXRlZCAwMS8xMC8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBEUlBTVG9rZW4gaXMgTWFuYWdlZFRva2VuLCBPYnNlcnZhYmxlLCBUb2tlblJldHJpZXZlciB7CgogICAgCiAgICAvKioKICAgICAqIENvbnN0cnVjdCB0aGUgbWFuYWdlZCBzZWN1cml0eSB0b2tlbgogICAgICovCiAgICBmdW5jdGlvbiBEUlBTVG9rZW4oKSBNYW5hZ2VkVG9rZW4oIkRSUCBTZWN1cml0eSIsICJEUlBTIiwgOCwgZmFsc2UpIHt9CgoKICAgIC8qKgogICAgICogUmV0dXJucyB3aGV0aGVyIHNlbmRlciBpcyBhbGxvd2VkIHRvIHJlZ2lzdGVyIGBfb2JzZXJ2ZXJgCiAgICAgKgogICAgICogQHBhcmFtIF9vYnNlcnZlciBUaGUgYWRkcmVzcyB0byByZWdpc3RlciBhcyBhbiBvYnNlcnZlcgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSBzZW5kZXIgaXMgYWxsb3dlZCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gY2FuUmVnaXN0ZXJPYnNlcnZlcihhZGRyZXNzIF9vYnNlcnZlcikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBfb2JzZXJ2ZXIgIT0gYWRkcmVzcyh0aGlzKSAmJiBpc093bmVyKG1zZy5zZW5kZXIpOwogICAgfQoKCiAgICAvKioKICAgICAqIFJldHVybnMgd2hldGhlciBzZW5kZXIgaXMgYWxsb3dlZCB0byB1bnJlZ2lzdGVyIGBfb2JzZXJ2ZXJgCiAgICAgKgogICAgICogQHBhcmFtIF9vYnNlcnZlciBUaGUgYWRkcmVzcyB0byB1bnJlZ2lzdGVyIGFzIGFuIG9ic2VydmVyCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHNlbmRlciBpcyBhbGxvd2VkIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBjYW5VbnJlZ2lzdGVyT2JzZXJ2ZXIoYWRkcmVzcyBfb2JzZXJ2ZXIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gbXNnLnNlbmRlciA9PSBfb2JzZXJ2ZXIgfHwgaXNPd25lcihtc2cuc2VuZGVyKTsKICAgIH0KCgogICAgLyoqIAogICAgICogU2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgICogLSBOb3RpZmllcyByZWdpc3RlcmVkIG9ic2VydmVycyB3aGVuIHRoZSBvYnNlcnZlciByZWNlaXZlcyB0b2tlbnMKICAgICAqIAogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBib29sIHJlc3VsdCA9IHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgICAgICBpZiAoaXNPYnNlcnZlcihfdG8pKSB7CiAgICAgICAgICAgIElUb2tlbk9ic2VydmVyKF90bykubm90aWZ5VG9rZW5zUmVjZWl2ZWQobXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgoKICAgIC8qKiAKICAgICAqIFNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgICogLSBOb3RpZmllcyByZWdpc3RlcmVkIG9ic2VydmVycyB3aGVuIHRoZSBvYnNlcnZlciByZWNlaXZlcyB0b2tlbnMKICAgICAqIAogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGJvb2wgcmVzdWx0ID0gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgaWYgKGlzT2JzZXJ2ZXIoX3RvKSkgewogICAgICAgICAgICBJVG9rZW5PYnNlcnZlcihfdG8pLm5vdGlmeVRva2Vuc1JlY2VpdmVkKF9mcm9tLCBfdmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCgogICAgLyoqCiAgICAgKiBGYWlsc2FmZSBtZWNoYW5pc20KICAgICAqIAogICAgICogQWxsb3dzIHRoZSBvd25lciB0byByZXRyaWV2ZSB0b2tlbnMgZnJvbSB0aGUgY29udHJhY3QgdGhhdCAKICAgICAqIG1pZ2h0IGhhdmUgYmVlbiBzZW5kIHRoZXJlIGJ5IGFjY2lkZW50CiAgICAgKgogICAgICogQHBhcmFtIF90b2tlbkNvbnRyYWN0IFRoZSBhZGRyZXNzIG9mIEVSQzIwIGNvbXBhdGlibGUgdG9rZW4KICAgICAqLwogICAgZnVuY3Rpb24gcmV0cmlldmVUb2tlbnMoYWRkcmVzcyBfdG9rZW5Db250cmFjdCkgcHVibGljIG9ubHlfb3duZXIgewogICAgICAgIHN1cGVyLnJldHJpZXZlVG9rZW5zKF90b2tlbkNvbnRyYWN0KTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBQcmV2ZW50cyB0aGUgYWNjaWRlbnRhbCBzZW5kaW5nIG9mIGV0aGVyCiAgICAgKi8KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgIHJldmVydCgpOwogICAgfQp9'.
	

]
