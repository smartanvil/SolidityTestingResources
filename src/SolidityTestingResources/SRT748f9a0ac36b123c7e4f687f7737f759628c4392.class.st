Class {
	#name : #SRT748f9a0ac36b123c7e4f687f7737f759628c4392,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT748f9a0ac36b123c7e4f687f7737f759628c4392 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMCB7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgIGludGVybmFsIG93bmVyczsKCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCiAgICAvKioKICAgICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAgICogYWNjb3VudC4KICAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgICAgICBvd25lcnNbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShvd25lcnNbbXNnLnNlbmRlcl0gPT0gdHJ1ZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIG5ld0FsbG93ZWQpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIG93bmVyc1tuZXdBbGxvd2VkXSA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlT3duZXIoYWRkcmVzcyB0b1JlbW92ZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgb3duZXJzW3RvUmVtb3ZlXSA9IGZhbHNlOwogICAgfQoKfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLgogKi8KY29udHJhY3QgQmlnVG9rZW4gaXMgRVJDMjAsIE93bmFibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIkJpZyBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJCSUciOwogICAgdWludDI1NiBwdWJsaWMgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQyNTYgcHVibGljIG1pbnRQZXJCbG9jayA9IDMzMzMzMzMzMzMzMzMzMzsKCiAgICBzdHJ1Y3QgQmlnVHJhbnNhY3Rpb24gewogICAgICAgIHVpbnQgYmxvY2tOdW1iZXI7CiAgICAgICAgdWludDI1NiBhbW91bnQ7CiAgICB9CgogICAgdWludCBwdWJsaWMgY29tbWlzc2lvblBlcmNlbnQgPSAxMDsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsVHJhbnNhY3Rpb25zID0gMDsKICAgIGJvb2wgcHVibGljIGVuYWJsZWRNaW50ID0gdHJ1ZTsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsTWVtYmVyczsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKICAgIG1hcHBpbmcodWludDI1NiA9PiBCaWdUcmFuc2FjdGlvbikgcHVibGljIHRyYW5zYWN0aW9uczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGxhc3RNaW50OwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIGludmVzdGVkOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBjb25maXJtZWQ7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIG1lbWJlcnM7CgogICAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKICAgIGV2ZW50IENvbW1pc3Npb24odWludDI1NiBhbW91bnQpOwoKICAgIC8qKgogICAgICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgdWludDI1NiBjdXJyZW50QmFsYW5jZSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwogICAgICAgIHVpbnQyNTYgYmFsYW5jZVRvTWludCA9IGdldEJhbGFuY2VUb01pbnQobXNnLnNlbmRlcik7CiAgICAgICAgdWludDI1NiBjb21taXNzaW9uID0gX3ZhbHVlICogY29tbWlzc2lvblBlcmNlbnQgLyAxMDA7CiAgICAgICAgcmVxdWlyZSgoX3ZhbHVlICsgY29tbWlzc2lvbikgPD0gKGN1cnJlbnRCYWxhbmNlICsgYmFsYW5jZVRvTWludCkpOwoKICAgICAgICBpZihiYWxhbmNlVG9NaW50ID4gMCl7CiAgICAgICAgICAgIGN1cnJlbnRCYWxhbmNlID0gY3VycmVudEJhbGFuY2UuYWRkKGJhbGFuY2VUb01pbnQpOwogICAgICAgICAgICBNaW50KG1zZy5zZW5kZXIsIGJhbGFuY2VUb01pbnQpOwogICAgICAgICAgICBsYXN0TWludFttc2cuc2VuZGVyXSA9IGJsb2NrLm51bWJlcjsKICAgICAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoYmFsYW5jZVRvTWludCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIAoKICAgICAgICBpZihibG9jay5udW1iZXIgPT0gdHJhbnNhY3Rpb25zW3RvdGFsVHJhbnNhY3Rpb25zIC0gMV0uYmxvY2tOdW1iZXIpIHsKICAgICAgICAgICAgdHJhbnNhY3Rpb25zW3RvdGFsVHJhbnNhY3Rpb25zIC0gMV0uYW1vdW50ID0gdHJhbnNhY3Rpb25zW3RvdGFsVHJhbnNhY3Rpb25zIC0gMV0uYW1vdW50ICsgKGNvbW1pc3Npb24gLyB0b3RhbE1lbWJlcnMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVpbnQgdHJhbnNhY3Rpb25JRCA9IHRvdGFsVHJhbnNhY3Rpb25zKys7CiAgICAgICAgICAgIHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbklEXSA9IEJpZ1RyYW5zYWN0aW9uKGJsb2NrLm51bWJlciwgY29tbWlzc2lvbiAvIHRvdGFsTWVtYmVycyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gY3VycmVudEJhbGFuY2Uuc3ViKF92YWx1ZSArIGNvbW1pc3Npb24pOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CgogICAgICAgIHVpbnQyNTYgY3VycmVudEJhbGFuY2UgPSBiYWxhbmNlc1tfZnJvbV07CiAgICAgICAgdWludDI1NiBiYWxhbmNlVG9NaW50ID0gZ2V0QmFsYW5jZVRvTWludChfZnJvbSk7CiAgICAgICAgdWludDI1NiBjb21taXNzaW9uID0gX3ZhbHVlICogY29tbWlzc2lvblBlcmNlbnQgLyAxMDA7CiAgICAgICAgcmVxdWlyZSgoX3ZhbHVlICsgY29tbWlzc2lvbikgPD0gKGN1cnJlbnRCYWxhbmNlICsgYmFsYW5jZVRvTWludCkpOwoKICAgICAgICBpZihiYWxhbmNlVG9NaW50ID4gMCl7CiAgICAgICAgICAgIGN1cnJlbnRCYWxhbmNlID0gY3VycmVudEJhbGFuY2UuYWRkKGJhbGFuY2VUb01pbnQpOwogICAgICAgICAgICBNaW50KF9mcm9tLCBiYWxhbmNlVG9NaW50KTsKICAgICAgICAgICAgbGFzdE1pbnRbX2Zyb21dID0gYmxvY2subnVtYmVyOwogICAgICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChiYWxhbmNlVG9NaW50KTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgaWYoYmxvY2subnVtYmVyID09IHRyYW5zYWN0aW9uc1t0b3RhbFRyYW5zYWN0aW9ucyAtIDFdLmJsb2NrTnVtYmVyKSB7CiAgICAgICAgICAgIHRyYW5zYWN0aW9uc1t0b3RhbFRyYW5zYWN0aW9ucyAtIDFdLmFtb3VudCA9IHRyYW5zYWN0aW9uc1t0b3RhbFRyYW5zYWN0aW9ucyAtIDFdLmFtb3VudCArIChjb21taXNzaW9uIC8gdG90YWxNZW1iZXJzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1aW50IHRyYW5zYWN0aW9uSUQgPSB0b3RhbFRyYW5zYWN0aW9ucysrOwogICAgICAgICAgICB0cmFuc2FjdGlvbnNbdHJhbnNhY3Rpb25JRF0gPSBCaWdUcmFuc2FjdGlvbihibG9jay5udW1iZXIsIGNvbW1pc3Npb24gLyB0b3RhbE1lbWJlcnMpOwogICAgICAgIH0KCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gY3VycmVudEJhbGFuY2Uuc3ViKF92YWx1ZSArIGNvbW1pc3Npb24pOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICBpZihsYXN0TWludFtfb3duZXJdICE9IDApewogICAgICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXSArIGdldEJhbGFuY2VUb01pbnQoX293bmVyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgICAqCiAgICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICAgKiByYWNlIGNvbmRpdGlvbiBpcyB0byBmaXJzdCByZWR1Y2UgdGhlIHNwZW5kZXIncyBhbGxvd2FuY2UgdG8gMCBhbmQgc2V0IHRoZSBkZXNpcmVkIHZhbHVlIGFmdGVyd2FyZHM6CiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIC8qKgogICAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgICAqLwogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICAgICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICAgICAgfQogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcmVmcmVzaEJhbGFuY2UoYWRkcmVzcyBfYWRkcmVzcykgcHVibGljIHJldHVybnMgKHVpbnQyNTYpewogICAgICAgIGlmKCFtZW1iZXJzW19hZGRyZXNzXSkgcmV0dXJuOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgYmFsYW5jZVRvTWludCA9IGdldEJhbGFuY2VUb01pbnQoX2FkZHJlc3MpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKGJhbGFuY2VUb01pbnQpOwogICAgICAgIGJhbGFuY2VzW19hZGRyZXNzXSA9IGJhbGFuY2VzW19hZGRyZXNzXSArIGJhbGFuY2VUb01pbnQ7CiAgICAgICAgbGFzdE1pbnRbX2FkZHJlc3NdID0gYmxvY2subnVtYmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgICAgIE1pbnQoX3RvLCBfYW1vdW50KTsKICAgICAgICBUcmFuc2ZlcigweDAsIF90bywgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QmFsYW5jZVRvTWludChhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgaWYoIWVuYWJsZWRNaW50KSByZXR1cm4gMDsKICAgICAgICBpZighbWVtYmVyc1tfYWRkcmVzc10pIHJldHVybiAwOwogICAgICAgIGlmKGxhc3RNaW50W19hZGRyZXNzXSA9PSAwKSByZXR1cm4gMDsKCiAgICAgICAgdWludDI1NiBiYWxhbmNlVG9NaW50ID0gKGJsb2NrLm51bWJlciAtIGxhc3RNaW50W19hZGRyZXNzXSkgKiBtaW50UGVyQmxvY2s7CiAgICAgICAgCiAgICAgICAgZm9yKHVpbnQgaSA9IHRvdGFsVHJhbnNhY3Rpb25zIC0gMTsgaSA+PSAwOyBpLS0pewogICAgICAgICAgICBpZihibG9jay5udW1iZXIgPT0gdHJhbnNhY3Rpb25zW2ldLmJsb2NrTnVtYmVyKSBjb250aW51ZTsKICAgICAgICAgICAgaWYodHJhbnNhY3Rpb25zW2ldLmJsb2NrTnVtYmVyIDwgbGFzdE1pbnRbX2FkZHJlc3NdKSByZXR1cm4gYmFsYW5jZVRvTWludDsKICAgICAgICAgICAgaWYodHJhbnNhY3Rpb25zW2ldLmFtb3VudCA+IG1pbnRQZXJCbG9jaykgewogICAgICAgICAgICAgICAgYmFsYW5jZVRvTWludCA9IGJhbGFuY2VUb01pbnQuYWRkKHRyYW5zYWN0aW9uc1tpXS5hbW91bnQgLSBtaW50UGVyQmxvY2spOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYmFsYW5jZVRvTWludDsKICAgIH0KCiAgICBmdW5jdGlvbiBzdG9wTWludCgpIHB1YmxpYyBvbmx5T3duZXJ7CiAgICAgICAgZW5hYmxlZE1pbnQgPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdGFydE1pbnQoKSBwdWJsaWMgb25seU93bmVyewogICAgICAgIGVuYWJsZWRNaW50ID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb25maXJtKGFkZHJlc3MgX2FkZHJlc3MpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGNvbmZpcm1lZFtfYWRkcmVzc10gPSB0cnVlOwogICAgICAgIGlmKCFtZW1iZXJzW19hZGRyZXNzXSAmJiBpbnZlc3RlZFtfYWRkcmVzc10pewogICAgICAgICAgICBtZW1iZXJzW19hZGRyZXNzXSA9IHRydWU7CiAgICAgICAgICAgIHRvdGFsTWVtYmVycyA9IHRvdGFsTWVtYmVycy5hZGQoMSk7CiAgICAgICAgICAgIHNldExhc3RNaW50KF9hZGRyZXNzLCBibG9jay5udW1iZXIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB1bmNvbmZpcm0oYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgY29uZmlybWVkW19hZGRyZXNzXSA9IGZhbHNlOwogICAgICAgIGlmKG1lbWJlcnNbX2FkZHJlc3NdKXsKICAgICAgICAgICAgbWVtYmVyc1tfYWRkcmVzc10gPSBmYWxzZTsKICAgICAgICAgICAgdG90YWxNZW1iZXJzID0gdG90YWxNZW1iZXJzLnN1YigxKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldExhc3RNaW50KGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX2Jsb2NrKSBvbmx5T3duZXIgcHVibGljewogICAgICAgIGxhc3RNaW50W19hZGRyZXNzXSA9IF9ibG9jazsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDb21taXNzaW9uKHVpbnQgX2NvbW1pc3Npb24pIG9ubHlPd25lciBwdWJsaWN7CiAgICAgICAgY29tbWlzc2lvblBlcmNlbnQgPSBfY29tbWlzc2lvbjsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRNaW50UGVyQmxvY2sodWludDI1NiBfbWludFBlckJsb2NrKSBvbmx5T3duZXIgcHVibGljewogICAgICAgIG1pbnRQZXJCbG9jayA9IF9taW50UGVyQmxvY2s7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0SW52ZXN0ZWQoYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHB1YmxpY3sKICAgICAgICBpbnZlc3RlZFtfYWRkcmVzc10gPSB0cnVlOwogICAgICAgIGlmKGNvbmZpcm1lZFtfYWRkcmVzc10gJiYgIW1lbWJlcnNbX2FkZHJlc3NdKXsKICAgICAgICAgICAgbWVtYmVyc1tfYWRkcmVzc10gPSB0cnVlOwogICAgICAgICAgICB0b3RhbE1lbWJlcnMgPSB0b3RhbE1lbWJlcnMuYWRkKDEpOwogICAgICAgICAgICByZWZyZXNoQmFsYW5jZShfYWRkcmVzcyk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGlzTWVtYmVyKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGJvb2wpewogICAgICAgIHJldHVybiBtZW1iZXJzW19hZGRyZXNzXTsKICAgIH0KCn0KCgpjb250cmFjdCBDcm93ZHNhbGUgaXMgT3duYWJsZXsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICBCaWdUb2tlbiBwdWJsaWMgdG9rZW47CiAgICB1aW50IHB1YmxpYyBjb2xsZWN0ZWQ7CiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmVjaWFyOwoKICAgIGZ1bmN0aW9uIENyb3dkc2FsZShhZGRyZXNzIF90b2tlbiwgYWRkcmVzcyBfYmVuZWZlY2lhcil7CiAgICAgICAgdG9rZW4gPSBCaWdUb2tlbihfdG9rZW4pOwogICAgICAgIGJlbmVmZWNpYXIgPSBfYmVuZWZlY2lhcjsKICAgICAgICBvd25lcnNbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IDAuMDEgZXRoZXIpOwogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gbXNnLnZhbHVlIC8gMC4wMSBldGhlciAqIDEgZXRoZXI7CgogICAgICAgIGlmKG1zZy52YWx1ZSA+PSAxMDAgZXRoZXIgJiYgbXNnLnZhbHVlIDwgNTAwIGV0aGVyKSBhbW91bnQgPSBhbW91bnQgKiAxMSAvIDEwOwogICAgICAgIGlmKG1zZy52YWx1ZSA+PSA1MDAgZXRoZXIgJiYgbXNnLnZhbHVlIDwgMTAwMCBldGhlcikgYW1vdW50ID0gYW1vdW50ICogMTIgLyAxMDsKICAgICAgICBpZihtc2cudmFsdWUgPj0gMTAwMCBldGhlciAmJiBtc2cudmFsdWUgPCA1MDAwIGV0aGVyKSBhbW91bnQgPSBhbW91bnQgKiAxMyAvIDEwOwogICAgICAgIGlmKG1zZy52YWx1ZSA+PSA1MDAwIGV0aGVyICYmIG1zZy52YWx1ZSA8IDEwMDAwIGV0aGVyKSBhbW91bnQgPSBhbW91bnQgKiAxNCAvIDEwOwogICAgICAgIGlmKG1zZy52YWx1ZSA+PSAxMDAwMCBldGhlcikgYW1vdW50ID0gYW1vdW50ICogMTUgLyAxMDsKCiAgICAgICAgY29sbGVjdGVkID0gY29sbGVjdGVkLmFkZChtc2cudmFsdWUpOwoKICAgICAgICB0b2tlbi5taW50KG1zZy5zZW5kZXIsIGFtb3VudCk7CiAgICAgICAgdG9rZW4uc2V0SW52ZXN0ZWQobXNnLnNlbmRlcik7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGNvbmZpcm1BZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBvbmx5T3duZXJ7CiAgICAgICAgdG9rZW4uY29uZmlybShfYWRkcmVzcyk7CiAgICB9CgogICAgZnVuY3Rpb24gdW5jb25maXJtQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgb25seU93bmVyewogICAgICAgIHRva2VuLnVuY29uZmlybShfYWRkcmVzcyk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0QmVuZWZlY2lhcihhZGRyZXNzIF9iZW5lZmVjaWFyKSBwdWJsaWMgb25seU93bmVyewogICAgICAgIGJlbmVmZWNpYXIgPSBfYmVuZWZlY2lhcjsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhdygpIHB1YmxpYyBvbmx5T3duZXJ7CiAgICAgICAgYmVuZWZlY2lhci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfQoKfQ=='.
	

]
