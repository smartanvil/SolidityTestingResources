Class {
	#name : #SRT05c19e52e73353799aff84f390e9a27e11836477,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT05c19e52e73353799aff84f390e9a27e11836477 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCmNvbnRyYWN0IEJhc2UgewogICAgbW9kaWZpZXIgb25seShhZGRyZXNzIGFsbG93ZWQpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWxsb3dlZCk7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICAgICBhc3NlcnQobXNnLmRhdGEubGVuZ3RoID09IHNpemUgKyA0KTsKICAgICAgICBfOwogICAgfSAKICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgIC8vICogICAgICAgICAgcmVlbnRyYW5jeSBoYW5kbGluZyAgICAgICAgICAgICAgICAgICoKICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgIHVpbnQgcHJpdmF0ZSBiaXRsb2NrcyA9IDA7CiAgICBtb2RpZmllciBub1JlZW50cmFuY3kodWludCBtKSB7CiAgICAgICAgdmFyIF9sb2NrcyA9IGJpdGxvY2tzOwogICAgICAgIHJlcXVpcmUoX2xvY2tzICYgbSA8PSAwKTsKICAgICAgICBiaXRsb2NrcyB8PSBtOwogICAgICAgIF87CiAgICAgICAgYml0bG9ja3MgPSBfbG9ja3M7CiAgICB9CiAgICBtb2RpZmllciBub0FueVJlZW50cmFuY3kgewogICAgICAgIHZhciBfbG9ja3MgPSBiaXRsb2NrczsKICAgICAgICByZXF1aXJlKF9sb2NrcyA8PSAwKTsKICAgICAgICBiaXRsb2NrcyA9IHVpbnQoLTEpOwogICAgICAgIF87CiAgICAgICAgYml0bG9ja3MgPSBfbG9ja3M7CiAgICB9CiAgICBtb2RpZmllciByZWVudHJhbnQgeyBfOyB9Cn0KCgpjb250cmFjdCBFUkMyMCBpcyBCYXNlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBib29sIHB1YmxpYyBpc0Zyb3plbiA9IGZhbHNlOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKTsKICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIGlzTm90RnJvemVuT25seSBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKHRoaXMpKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmVfZml4ZWQoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfY3VycmVudFZhbHVlLCB1aW50IF92YWx1ZSkgcHVibGljIGlzTm90RnJvemVuT25seSBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZihhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSBfY3VycmVudFZhbHVlKXsKICAgICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHB1YmxpYyBpc05vdEZyb3plbk9ubHkgb25seVBheWxvYWRTaXplKDIgKiAzMikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwogICAgbW9kaWZpZXIgaXNOb3RGcm96ZW5Pbmx5KCkgewogICAgICAgIHJlcXVpcmUoIWlzRnJvemVuKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGlzRnJvemVuT25seSgpewogICAgICAgIHJlcXVpcmUoaXNGcm96ZW4pOwogICAgICAgIF87CiAgICB9Cgp9CgoKY29udHJhY3QgVG9rZW4gaXMgRVJDMjAgewogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIkFycmF5LmlvIFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gImVSQVkiOwogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gMTg7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBCSVQgPSAxMCoqMTg7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBCQVNFID0gMTAwMDAgKiBCSVQ7CiAgICBib29sIHB1YmxpYyB0Z2VMaXZlID0gZmFsc2U7CiAgICB1aW50IHB1YmxpYyB0Z2VTdGFydEJsb2NrOwogICAgdWludCBwdWJsaWMgdGdlU2V0dGluZ3NBbW91bnQ7CiAgICB1aW50IHB1YmxpYyB0Z2VTZXR0aW5nc1BhcnRJbnZlc3RvcjsKICAgIHVpbnQgcHVibGljIHRnZVNldHRpbmdzUGFydFByb2plY3Q7CiAgICB1aW50IHB1YmxpYyB0Z2VTZXR0aW5nc1BhcnRGb3VuZGVyczsKICAgIHVpbnQgcHVibGljIHRnZVNldHRpbmdzQmxvY2tzUGVyU3RhZ2U7CiAgICB1aW50IHB1YmxpYyB0Z2VTZXR0aW5nc1BhcnRJbnZlc3RvckluY3JlYXNlUGVyU3RhZ2U7CiAgICB1aW50IHB1YmxpYyB0Z2VTZXR0aW5nc0Ftb3VudENvbGxlY3Q7CiAgICB1aW50IHB1YmxpYyB0Z2VTZXR0aW5nc01heFN0YWdlczsKICAgIGFkZHJlc3MgcHVibGljIHByb2plY3RXYWxsZXQ7CiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGVyc1dhbGxldDsKICAgIGFkZHJlc3MgY29uc3RhbnQgcHVibGljIGJ1cm5BZGRyZXNzID0gYWRkcmVzcygwKTsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGludkJhbGFuY2VzOwogICAgdWludCBwdWJsaWMgdG90YWxJbnZTdXBwbHk7CgogICAgbW9kaWZpZXIgaXNUZ2VMaXZlKCl7CiAgICAgICAgcmVxdWlyZSh0Z2VMaXZlKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGlzTm90VGdlTGl2ZSgpewogICAgICAgIHJlcXVpcmUoIXRnZUxpdmUpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbWF4U3RhZ2VzSXNOb3RBY2hpZXZlZCgpIHsKICAgICAgICBpZiAodG90YWxTdXBwbHkgPiBCSVQpIHsKICAgICAgICAgICAgdWludCBzdGFnZSA9IGJsb2NrLm51bWJlci5zdWIodGdlU3RhcnRCbG9jaykuZGl2KHRnZVNldHRpbmdzQmxvY2tzUGVyU3RhZ2UpOwogICAgICAgICAgICByZXF1aXJlKHN0YWdlIDwgdGdlU2V0dGluZ3NNYXhTdGFnZXMpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHRhcmdldElzTm90QWNoaWV2ZWQoKXsKICAgICAgICByZXF1aXJlKHRnZVNldHRpbmdzQW1vdW50Q29sbGVjdCA8IHRnZVNldHRpbmdzQW1vdW50KTsKICAgICAgICBfOwogICAgfQoKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIF9vd25lciwgIHVpbnQgX3ZhbHVlKTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyBpc05vdEZyb3plbk9ubHkgb25seVBheWxvYWRTaXplKDIgKiAzMikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBpZihiYWxhbmNlc1twcm9qZWN0V2FsbGV0XSA8IDEgKiBCSVQpewogICAgICAgICAgICBfaW50ZXJuYWxUZ2VTZXRMaXZlKCk7CiAgICAgICAgfQogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBDb25zdHJ1Y3RvcgogICAgLy8vIEBwYXJhbSBfcHJvamVjdFdhbGxldCBXYWxsZXQgb2YgcHJvamVjdAogICAgLy8vIEBwYXJhbSBfZm91bmRlcnNXYWxsZXQgV2FsbGV0IG9mIGZvdW5kZXJzCiAgICBmdW5jdGlvbiBUb2tlbihhZGRyZXNzIF9wcm9qZWN0V2FsbGV0LCBhZGRyZXNzIF9mb3VuZGVyc1dhbGxldCkgcHVibGljIHsKICAgICAgICBwcm9qZWN0V2FsbGV0ID0gX3Byb2plY3RXYWxsZXQ7CiAgICAgICAgZm91bmRlcnNXYWxsZXQgPSBfZm91bmRlcnNXYWxsZXQ7CiAgICB9CgogICAgLy8vIEBkZXYgRmFsbGJhY2sgZnVuY3Rpb24gYWxsb3dzIHRvIGJ1eSB0b2tlbnMKICAgIGZ1bmN0aW9uICgpCiAgICBwdWJsaWMKICAgIHBheWFibGUKICAgIGlzVGdlTGl2ZQogICAgaXNOb3RGcm96ZW5Pbmx5CiAgICB0YXJnZXRJc05vdEFjaGlldmVkCiAgICBtYXhTdGFnZXNJc05vdEFjaGlldmVkCiAgICBub0FueVJlZW50cmFuY3kKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwogICAgICAgIGlmKHRnZVNldHRpbmdzQW1vdW50Q29sbGVjdC5hZGQobXNnLnZhbHVlKSA+PSB0Z2VTZXR0aW5nc0Ftb3VudCl7CiAgICAgICAgICAgIF9maW5pc2hUZ2UoKTsKICAgICAgICB9CiAgICAgICAgdWludCByZWZ1bmRBbW91bnQgPSAwOwogICAgICAgIHVpbnQgc2VuZGVyQW1vdW50ID0gbXNnLnZhbHVlOwogICAgICAgIGlmKHRnZVNldHRpbmdzQW1vdW50Q29sbGVjdC5hZGQobXNnLnZhbHVlKSA+PSB0Z2VTZXR0aW5nc0Ftb3VudCl7CiAgICAgICAgICAgIHJlZnVuZEFtb3VudCA9IHRnZVNldHRpbmdzQW1vdW50Q29sbGVjdC5hZGQobXNnLnZhbHVlKS5zdWIodGdlU2V0dGluZ3NBbW91bnQpOwogICAgICAgICAgICBzZW5kZXJBbW91bnQgPSAobXNnLnZhbHVlKS5zdWIocmVmdW5kQW1vdW50KTsKICAgICAgICB9CiAgICAgICAgdWludCBzdGFnZSA9IGJsb2NrLm51bWJlci5zdWIodGdlU3RhcnRCbG9jaykuZGl2KHRnZVNldHRpbmdzQmxvY2tzUGVyU3RhZ2UpOyAgICAgICAgCiAgICAgICAgCiAgICAgICAgdWludCBjdXJyZW50UGFydEludmVzdG9yID0gdGdlU2V0dGluZ3NQYXJ0SW52ZXN0b3IuYWRkKHN0YWdlLm11bCh0Z2VTZXR0aW5nc1BhcnRJbnZlc3RvckluY3JlYXNlUGVyU3RhZ2UpKTsKICAgICAgICB1aW50IGFsbFN0YWtlcyA9IGN1cnJlbnRQYXJ0SW52ZXN0b3IuYWRkKHRnZVNldHRpbmdzUGFydFByb2plY3QpLmFkZCh0Z2VTZXR0aW5nc1BhcnRGb3VuZGVycyk7CiAgICAgICAgdWludCBhbW91bnRQcm9qZWN0ID0gc2VuZGVyQW1vdW50Lm11bCh0Z2VTZXR0aW5nc1BhcnRQcm9qZWN0KS5kaXYoYWxsU3Rha2VzKTsKICAgICAgICB1aW50IGFtb3VudEZvdW5kZXJzID0gc2VuZGVyQW1vdW50Lm11bCh0Z2VTZXR0aW5nc1BhcnRGb3VuZGVycykuZGl2KGFsbFN0YWtlcyk7CiAgICAgICAgdWludCBhbW91bnRTZW5kZXIgPSBzZW5kZXJBbW91bnQuc3ViKGFtb3VudFByb2plY3QpLnN1YihhbW91bnRGb3VuZGVycyk7CiAgICAgICAgX21pbnQoYW1vdW50UHJvamVjdCwgYW1vdW50Rm91bmRlcnMsIGFtb3VudFNlbmRlcik7CiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihyZWZ1bmRBbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEZpbmlzaGVkKCkKICAgIHB1YmxpYwogICAgb25seShwcm9qZWN0V2FsbGV0KQogICAgaXNOb3RGcm96ZW5Pbmx5CiAgICBpc1RnZUxpdmUKICAgIHsKICAgICAgICBpZihiYWxhbmNlc1twcm9qZWN0V2FsbGV0XSA+IDEqQklUKXsKICAgICAgICAgICAgX2ZpbmlzaFRnZSgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBTdGFydCBuZXcgdGdlIHN0YWdlCiAgICBmdW5jdGlvbiB0Z2VTZXRMaXZlKCkKICAgIHB1YmxpYwogICAgb25seShwcm9qZWN0V2FsbGV0KQogICAgaXNOb3RUZ2VMaXZlCiAgICBpc05vdEZyb3plbk9ubHkKICAgIHsKICAgICAgICBfaW50ZXJuYWxUZ2VTZXRMaXZlKCk7CiAgICB9CgogICAgLy8vIEBkZXYgQnVybiB0b2tlbnMgdG8gYnVybkFkZHJlc3MgZnJvbSBtc2cuc2VuZGVyIHdhbGxldAogICAgLy8vIEBwYXJhbSBfYW1vdW50IEFtb3VudCBvZiB0b2tlbnMKICAgIGZ1bmN0aW9uIGJ1cm4odWludCBfYW1vdW50KQogICAgcHVibGljIAogICAgaXNOb3RGcm96ZW5Pbmx5CiAgICBub0FueVJlZW50cmFuY3kgICAgCiAgICByZXR1cm5zKGJvb2wgX3N1Y2Nlc3MpCiAgICB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbYnVybkFkZHJlc3NdID0gYmFsYW5jZXNbYnVybkFkZHJlc3NdLmFkZChfYW1vdW50KTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfYW1vdW50KTsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKF9hbW91bnQpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIGJ1cm5BZGRyZXNzLCBfYW1vdW50KTsKICAgICAgICBCdXJuKGJ1cm5BZGRyZXNzLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBfZm91bmRlcnNXYWxsZXQgV2FsbGV0IG9mIGZvdW5kZXJzCiAgICAvLy8gQHBhcmFtIGRlc3RzIGFycmF5IG9mIGFkZHJlc3NlcyAKICAgIC8vLyBAcGFyYW0gdmFsdWVzIGFycmF5IGFtb3VudCBvZiB0b2tlbnMgdG8gdHJhbnNmZXIgICAgCiAgICBmdW5jdGlvbiBtdWx0aVRyYW5zZmVyKGFkZHJlc3NbXSBkZXN0cywgdWludFtdIHZhbHVlcykgCiAgICBwdWJsaWMgCiAgICBpc05vdEZyb3plbk9ubHkKICAgIHJldHVybnModWludCkgCiAgICB7CiAgICAgICAgdWludCBpID0gMDsKICAgICAgICB3aGlsZSAoaSA8IGRlc3RzLmxlbmd0aCkgewogICAgICAgICAgIHRyYW5zZmVyKGRlc3RzW2ldLCB2YWx1ZXNbaV0pOwogICAgICAgICAgIGkgKz0gMTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGk7CiAgICB9CgogICAgLy8tLS0tLS0tLS0tLS0tLS0tIEZST1pFTiAtLS0tLS0tLS0tLS0tLS0tLQogICAgLy8vIEBkZXYgQWxsb3dzIGFuIG93bmVyIHRvIGNvbmZpcm0gZnJlZXplbmcgcHJvY2VzcwogICAgZnVuY3Rpb24gc2V0RnJlZXplKCkKICAgIHB1YmxpYwogICAgb25seShwcm9qZWN0V2FsbGV0KQogICAgaXNOb3RGcm96ZW5Pbmx5CiAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIGlzRnJvemVuID0gdHJ1ZTsKICAgICAgICB0b3RhbEludlN1cHBseSA9IGFkZHJlc3ModGhpcykuYmFsYW5jZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgdG8gdXNlcnMgd2l0aGRyYXcgZXRoIGluIGZyb3plbiBzdGFnZSAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RnJvemVuKCkKICAgIHB1YmxpYwogICAgaXNGcm96ZW5Pbmx5CiAgICBub0FueVJlZW50cmFuY3kKICAgIHsKICAgICAgICByZXF1aXJlKGludkJhbGFuY2VzW21zZy5zZW5kZXJdID4gMCk7CiAgICAgICAgCiAgICAgICAgdWludCBhbW91bnRXaXRoZHJhdyA9IHRvdGFsSW52U3VwcGx5Lm11bChpbnZCYWxhbmNlc1ttc2cuc2VuZGVyXSkuZGl2KHRvdGFsU3VwcGx5KTsgICAgICAgIAogICAgICAgIGludkJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudFdpdGhkcmF3KTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgYW4gb3duZXIgdG8gY29uZmlybSBhIGNoYW5nZSBzZXR0aW5ncyByZXF1ZXN0LgogICAgZnVuY3Rpb24gZXhlY3V0ZVNldHRpbmdzQ2hhbmdlKAogICAgICAgIHVpbnQgYW1vdW50LCAKICAgICAgICB1aW50IHBhcnRJbnZlc3RvciwKICAgICAgICB1aW50IHBhcnRQcm9qZWN0LCAKICAgICAgICB1aW50IHBhcnRGb3VuZGVycywgCiAgICAgICAgdWludCBibG9ja3NQZXJTdGFnZSwgCiAgICAgICAgdWludCBwYXJ0SW52ZXN0b3JJbmNyZWFzZVBlclN0YWdlLAogICAgICAgIHVpbnQgbWF4U3RhZ2VzCiAgICApIAogICAgcHVibGljCiAgICBvbmx5KHByb2plY3RXYWxsZXQpCiAgICBpc05vdFRnZUxpdmUgCiAgICBpc05vdEZyb3plbk9ubHkKICAgIHJldHVybnMoYm9vbCBzdWNjZXNzKSAKICAgIHsKICAgICAgICB0Z2VTZXR0aW5nc0Ftb3VudCA9IGFtb3VudDsKICAgICAgICB0Z2VTZXR0aW5nc1BhcnRJbnZlc3RvciA9IHBhcnRJbnZlc3RvcjsKICAgICAgICB0Z2VTZXR0aW5nc1BhcnRQcm9qZWN0ID0gcGFydFByb2plY3Q7CiAgICAgICAgdGdlU2V0dGluZ3NQYXJ0Rm91bmRlcnMgPSBwYXJ0Rm91bmRlcnM7CiAgICAgICAgdGdlU2V0dGluZ3NCbG9ja3NQZXJTdGFnZSA9IGJsb2Nrc1BlclN0YWdlOwogICAgICAgIHRnZVNldHRpbmdzUGFydEludmVzdG9ySW5jcmVhc2VQZXJTdGFnZSA9IHBhcnRJbnZlc3RvckluY3JlYXNlUGVyU3RhZ2U7CiAgICAgICAgdGdlU2V0dGluZ3NNYXhTdGFnZXMgPSBtYXhTdGFnZXM7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8tLS0tLS0tLS0tLS0tLS0tIEdFVFRFUlMgLS0tLS0tLS0tLS0tLS0tLQogICAgLy8vIEBkZXYgQW1vdW50IG9mIGJsb2NrcyBsZWZ0IHRvIHRoZSBlbmQgb2YgdGhpcyBzdGFnZSBvZiBUR0UgCiAgICBmdW5jdGlvbiB0Z2VTdGFnZUJsb2NrTGVmdCgpIAogICAgcHVibGljIAogICAgdmlldwogICAgaXNUZ2VMaXZlCiAgICByZXR1cm5zKHVpbnQpCiAgICB7CiAgICAgICAgdWludCBzdGFnZSA9IGJsb2NrLm51bWJlci5zdWIodGdlU3RhcnRCbG9jaykuZGl2KHRnZVNldHRpbmdzQmxvY2tzUGVyU3RhZ2UpOwogICAgICAgIHJldHVybiB0Z2VTdGFydEJsb2NrLmFkZChzdGFnZS5tdWwodGdlU2V0dGluZ3NCbG9ja3NQZXJTdGFnZSkpLnN1YihibG9jay5udW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRnZUN1cnJlbnRQYXJ0SW52ZXN0b3IoKQogICAgcHVibGljCiAgICB2aWV3CiAgICBpc1RnZUxpdmUKICAgIHJldHVybnModWludCkKICAgIHsKICAgICAgICB1aW50IHN0YWdlID0gYmxvY2subnVtYmVyLnN1Yih0Z2VTdGFydEJsb2NrKS5kaXYodGdlU2V0dGluZ3NCbG9ja3NQZXJTdGFnZSk7CiAgICAgICAgcmV0dXJuIHRnZVNldHRpbmdzUGFydEludmVzdG9yLmFkZChzdGFnZS5tdWwodGdlU2V0dGluZ3NQYXJ0SW52ZXN0b3JJbmNyZWFzZVBlclN0YWdlKSk7CiAgICB9CgogICAgZnVuY3Rpb24gdGdlTmV4dFBhcnRJbnZlc3RvcigpCiAgICBwdWJsaWMKICAgIHZpZXcKICAgIGlzVGdlTGl2ZQogICAgcmV0dXJucyh1aW50KQogICAgewogICAgICAgIHVpbnQgc3RhZ2UgPSBibG9jay5udW1iZXIuc3ViKHRnZVN0YXJ0QmxvY2spLmRpdih0Z2VTZXR0aW5nc0Jsb2Nrc1BlclN0YWdlKS5hZGQoMSk7ICAgICAgICAKICAgICAgICByZXR1cm4gdGdlU2V0dGluZ3NQYXJ0SW52ZXN0b3IuYWRkKHN0YWdlLm11bCh0Z2VTZXR0aW5nc1BhcnRJbnZlc3RvckluY3JlYXNlUGVyU3RhZ2UpKTsKICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0gSU5URVJOQUwgLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBfZmluaXNoVGdlKCkKICAgIGludGVybmFsCiAgICB7CiAgICAgICAgdGdlTGl2ZSA9IGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIF9taW50KHVpbnQgX2Ftb3VudFByb2plY3QsIHVpbnQgX2Ftb3VudEZvdW5kZXJzLCB1aW50IF9hbW91bnRTZW5kZXIpCiAgICBpbnRlcm5hbAogICAgewogICAgICAgIGJhbGFuY2VzW3Byb2plY3RXYWxsZXRdID0gYmFsYW5jZXNbcHJvamVjdFdhbGxldF0uYWRkKF9hbW91bnRQcm9qZWN0KTsKICAgICAgICBiYWxhbmNlc1tmb3VuZGVyc1dhbGxldF0gPSBiYWxhbmNlc1tmb3VuZGVyc1dhbGxldF0uYWRkKF9hbW91bnRGb3VuZGVycyk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQoX2Ftb3VudFNlbmRlcik7CiAgICAgICAgaW52QmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBpbnZCYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQoX2Ftb3VudFNlbmRlcik7CiAgICAgICAgdGdlU2V0dGluZ3NBbW91bnRDb2xsZWN0ID0gdGdlU2V0dGluZ3NBbW91bnRDb2xsZWN0LmFkZChfYW1vdW50UHJvamVjdCtfYW1vdW50Rm91bmRlcnMrX2Ftb3VudFNlbmRlcik7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudFByb2plY3QrX2Ftb3VudEZvdW5kZXJzK19hbW91bnRTZW5kZXIpOwogICAgICAgIFRyYW5zZmVyKDB4MCwgbXNnLnNlbmRlciwgX2Ftb3VudFNlbmRlcik7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBwcm9qZWN0V2FsbGV0LCBfYW1vdW50UHJvamVjdCk7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBmb3VuZGVyc1dhbGxldCwgX2Ftb3VudEZvdW5kZXJzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfaW50ZXJuYWxUZ2VTZXRMaXZlKCkKICAgIGludGVybmFsCiAgICB7CiAgICAgICAgdGdlTGl2ZSA9IHRydWU7CiAgICAgICAgdGdlU3RhcnRCbG9jayA9IGJsb2NrLm51bWJlcjsKICAgICAgICB0Z2VTZXR0aW5nc0Ftb3VudENvbGxlY3QgPSAwOwogICAgfQp9'.
	

]
