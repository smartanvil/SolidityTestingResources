Class {
	#name : #SRT514bc174df04a4b04ae2Be81ee8c788c3796B06B,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT514bc174df04a4b04ae2Be81ee8c788c3796B06B >> base64 [
	^ 'LyoKCkNvcHlyaWdodCAoYykgMjAxNyBFc3Blcml0ZSBMdGQuIDw8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjI0NDg0MTQzNDU0ODY0NDE1NzU0NDE1NjRkNTA0MTBhNDc0YjBhNGE1ZSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+CgpUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMKV0lUSCBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRgpNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUgpBTlkgU1BFQ0lBTCwgRElSRUNULCBJTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTCldIQVRTT0VWRVIgUkVTVUxUSU5HIEZST00gTE9TUyBPRiBVU0UsIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IKU0VSVklDRVMsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UKT1IgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUgpQRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLgoKKi8KCnByYWdtYSBzb2xpZGl0eSBeMC40LjEzOwoKbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IEVSQzIyM1JlY2VpdmluZ0NvbnRyYWN0IHsKICAgIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWM7Cn0KCmNvbnRyYWN0IEVSQzIwRVJDMjIzIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKICAKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgaW5kZXhlZCBfdmFsdWUpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBpbmRleGVkIF92YWx1ZSwgYnl0ZXMgX2RhdGEpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBEZWNvIGlzIEVSQzIwRVJDMjIzIHsKCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJEZWNvIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJERUMiOwogIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogIAogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRvdGFsU3VwcGx5ID0gNioxMCoqMjY7IC8vIDYwMCwwMDAsMDAwLiAwMDAsMDAwLDAwMCwwMDAsMDAwLDAwMCB1bml0cwogICAgCiAgLy8gQWNjb3VudHMKICAKICBtYXBwaW5nKGFkZHJlc3MgPT4gQWNjb3VudCkgcHJpdmF0ZSBhY2NvdW50czsKICAKICBzdHJ1Y3QgQWNjb3VudCB7CiAgICB1aW50MjU2IGJhbGFuY2U7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYWxsb3dlZDsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBpc0FsbG93YW5jZUF1dGhvcml6ZWQ7CiAgfSAgCiAgCiAgLy8gRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suCiAgLy8gaHR0cDovL3Zlc3NlbmVzLmNvbS90aGUtZXJjMjAtc2hvcnQtYWRkcmVzcy1hdHRhY2stZXhwbGFpbmVkLwogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50MjU2IHNpemUpIHsKICAgIHJlcXVpcmUobXNnLmRhdGEubGVuZ3RoID49IHNpemUgKyA0KTsKICAgICBfOwogIH0KCiAgLy8gSW5pdGlhbGl6YXRpb24KCiAgZnVuY3Rpb24gRGVjbygpIHsKICAgIGFjY291bnRzW21zZy5zZW5kZXJdLmJhbGFuY2UgPSB0b3RhbFN1cHBseTsKICAgIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIHRvdGFsU3VwcGx5KTsKICB9CgogIC8vIEJhbGFuY2UKCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYWNjb3VudHNbX293bmVyXS5iYWxhbmNlOwogIH0KCiAgLy8gVHJhbnNmZXJzCgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgcmV0dXJucyAoYm9vbCkgewogICAgcGVyZm9ybVRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCAiIik7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHJldHVybnMgKGJvb2wpIHsKICAgIHBlcmZvcm1UcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShoYXNBcHByb3ZhbChfZnJvbSwgbXNnLnNlbmRlcikpOwogICAgdWludDI1NiBfYWxsb3dlZCA9IGFjY291bnRzW19mcm9tXS5hbGxvd2VkW21zZy5zZW5kZXJdOyAgICAKICAgIHBlcmZvcm1UcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUsICIiKTsgICAgCiAgICBhY2NvdW50c1tfZnJvbV0uYWxsb3dlZFttc2cuc2VuZGVyXSA9IF9hbGxvd2VkLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gcGVyZm9ybVRyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHByaXZhdGUgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gMHgwKTsKICAgIGFjY291bnRzW19mcm9tXS5iYWxhbmNlID0gYWNjb3VudHNbX2Zyb21dLmJhbGFuY2Uuc3ViKF92YWx1ZSk7ICAgIAogICAgYWNjb3VudHNbX3RvXS5iYWxhbmNlID0gYWNjb3VudHNbX3RvXS5iYWxhbmNlLmFkZChfdmFsdWUpOwogICAgaWYgKGlzQ29udHJhY3QoX3RvKSkgewogICAgICBFUkMyMjNSZWNlaXZpbmdDb250cmFjdCByZWNlaXZlciA9IEVSQzIyM1JlY2VpdmluZ0NvbnRyYWN0KF90byk7CiAgICAgIHJlY2VpdmVyLnRva2VuRmFsbGJhY2soX2Zyb20sIF92YWx1ZSwgX2RhdGEpOwogICAgfSAgICAKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF90bykgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICB1aW50MjU2IGNvZGVMZW5ndGg7CiAgICBhc3NlbWJseSB7CiAgICAgIGNvZGVMZW5ndGggOj0gZXh0Y29kZXNpemUoX3RvKQogICAgfQogICAgcmV0dXJuIGNvZGVMZW5ndGggPiAwOwogIH0KCiAgLy8gQXBwcm92YWwgJiBBbGxvd2FuY2UKICAKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gX3NwZW5kZXIpOwogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhY2NvdW50c1ttc2cuc2VuZGVyXS5hbGxvd2VkW19zcGVuZGVyXSAhPSAwKSkgewogICAgICByZXZlcnQoKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgYWNjb3VudHNbbXNnLnNlbmRlcl0uYWxsb3dlZFtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBhY2NvdW50c1ttc2cuc2VuZGVyXS5pc0FsbG93YW5jZUF1dGhvcml6ZWRbX3NwZW5kZXJdID0gdHJ1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWNjb3VudHNbX293bmVyXS5hbGxvd2VkW19zcGVuZGVyXTsKICB9CgogIGZ1bmN0aW9uIGhhc0FwcHJvdmFsKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7ICAgICAgICAKICAgIHJldHVybiBhY2NvdW50c1tfb3duZXJdLmlzQWxsb3dhbmNlQXV0aG9yaXplZFtfc3BlbmRlcl07CiAgfQoKICBmdW5jdGlvbiByZW1vdmVBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyKSB7ICAgIAogICAgZGVsZXRlKGFjY291bnRzW21zZy5zZW5kZXJdLmFsbG93ZWRbX3NwZW5kZXJdKTsKICAgIGFjY291bnRzW21zZy5zZW5kZXJdLmlzQWxsb3dhbmNlQXV0aG9yaXplZFtfc3BlbmRlcl0gPSBmYWxzZTsKICB9Cgp9Cgpjb250cmFjdCBEZWNvQmFuayB7CiAgCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIERlY28gcHVibGljIHRva2VuOyAgCiAgCiAgYWRkcmVzcyBwcml2YXRlIGNyb3dkc2FsZVdhbGxldDsKICBhZGRyZXNzIHByaXZhdGUgZGVjb1Jlc2VydmVXYWxsZXQ7CiAgdWludDI1NiBwdWJsaWMgd2VpUmFpc2VkOwoKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b3RhbFN1cHBseVVuaXRzID0gNioxMCoqMjY7CiAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IE1JTklNVU1fV0VJID0gMTAqKjE2OwogIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBCQVNFID0gMTAqKjE4OwogIHVpbnQyNTYgcHVibGljIG9yaWdpbmFsUmF0ZSA9IDMwMDA7CgogIHVpbnQyNTYgcHVibGljIGNyb3dkc2FsZURpc3RyaWJ1dGVkVW5pdHMgPSAwOwogIHVpbnQyNTYgcHVibGljIGlzc3VlckRpc3RyaWJ1dGVkVW5pdHMgPSAwOwoKICAvLyBQcmVzYWxlCiAgdWludDI1NiBwdWJsaWMgcHJlc2FsZVN0YXJ0VGltZTsKICB1aW50MjU2IHB1YmxpYyBwcmVzYWxlRW5kVGltZTsKICB1aW50MjU2IHByaXZhdGUgcHJlc2FsZURpc2NvdW50ID0gNTA7CiAgdWludDI1NiBwcml2YXRlIHByZXNhbGVQZXJjZW50YWdlID0gNTsKCiAgdWludDI1NiBwdWJsaWMgaXNzdWVyUmVzZXJ2ZWRNYXhpbXVtUGVyY2VudGFnZSA9IDU7CgogIC8vIFNhbGUKICB1aW50MjU2IHB1YmxpYyBzYWxlU3RhcnRUaW1lOwogIHVpbnQyNTYgcHVibGljIHNhbGVFbmRUaW1lOwogIHVpbnQyNTYgcHJpdmF0ZSBzYWxlRGlzY291bnQgPSAyNTsKCiAgLy8gUmV3YXJkcwogIHVpbnQyNTYgcHVibGljIHJld2FyZERpc3RyaWJ1dGlvblN0YXJ0OwogIHVpbnQyNTYgcHVibGljIHJld2FyZERpc3RyaWJ1dGVkVW5pdHMgPSAwOyAgCgogIC8vIENvbnRyaWJ1dG9ycwogIG1hcHBpbmcoYWRkcmVzcyA9PiBDb250cmlidXRvcikgcHJpdmF0ZSBjb250cmlidXRvcnM7CgogIHN0cnVjdCBDb250cmlidXRvciB7ICAgIAogICAgdWludDI1NiBjb250cmlidXRlZFdlaTsKICAgIHVpbnQyNTYgZGVjb1VuaXRzOwogICAgdWludDI1NiByZXdhcmREaXN0cmlidXRlZERlY29Vbml0czsKICB9CgogIHVpbnQyNTYgcHVibGljIGNvbnRyaWJ1dG9yc0NvdW50ID0gMDsKCiAgLy8gRXZlbnRzCiAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBSZXdhcmREaXN0cmlidXRlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBSZW1haW5pbmdSZXdhcmRPd25lcnNoaXBDaGFuZ2VkKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8pOyAgCgogIGFkZHJlc3MgcHJpdmF0ZSBjb250cmFjdENyZWF0b3IgPSBtc2cuc2VuZGVyOwoKICBmdW5jdGlvbiBEZWNvQmFuaygpIHsKICAgIHRva2VuID0gbmV3IERlY28oKTsKCiAgICBwcmVzYWxlU3RhcnRUaW1lID0gMTUwNjgxNjAwMDsgLy8gU3VuZGF5LCBPY3RvYmVyIDEsIDIwMTcgMTI6MDA6MDAgQU0KICAgIHByZXNhbGVFbmRUaW1lID0gcHJlc2FsZVN0YXJ0VGltZSArIDMwIGRheXM7CgogICAgc2FsZVN0YXJ0VGltZSA9IHByZXNhbGVFbmRUaW1lICsgMSBkYXlzOwogICAgc2FsZUVuZFRpbWUgPSBzYWxlU3RhcnRUaW1lICsgMTgwIGRheXM7CgogICAgcmV3YXJkRGlzdHJpYnV0aW9uU3RhcnQgPSBzYWxlRW5kVGltZSArIDEgZGF5czsKCiAgICBjcm93ZHNhbGVXYWxsZXQgPSAweEVhQzRmZjlBYTgzNDJkOEI1YzU5MzcwQWMwNGE1NTM2N0E3ODhCMzA7CiAgICBkZWNvUmVzZXJ2ZVdhbGxldCA9IDB4REEwMWZEZUVGNTczYjVjQzUxRDBEZGMyNjAwRjQ3NmFhQzcxQTYwMDsKICB9CgogIC8vIFNhbGUgZXZlbnRzCgogIG1vZGlmaWVyIHZhbGlkUHVyY2hhc2UoKSB7CiAgICByZXF1aXJlKGlzVmFsaWRQdXJjaGFzZSgpKTsKICAgIF87CiAgfQogIAogIGZ1bmN0aW9uIGlzVmFsaWRQdXJjaGFzZSgpIHByaXZhdGUgcmV0dXJucyAoYm9vbCkgewogICAgYm9vbCBtaW5pbXVtQ29udHJpYnV0aW9uID0gbXNnLnZhbHVlID49IE1JTklNVU1fV0VJOwogICAgcmV0dXJuIG1pbmltdW1Db250cmlidXRpb24gJiYgKHByZXNhbGVBY3RpdmUoKSB8fCBzYWxlQWN0aXZlKCkpOwogIH0gIAoKICBmdW5jdGlvbigpIHBheWFibGUgdmFsaWRQdXJjaGFzZSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gMHgwKTsKICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICB9CgogIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIGJlbmVmaWNpYXJ5KSBwcml2YXRlIHsgICAgCiAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsgICAgCiAgICB1aW50MjU2IHRva2VucyA9IHdlaUFtb3VudC5tdWwoY3VycmVudFJhdGUoKSk7CiAgICB1aW50MjU2IGlzc3VlclJlc2VydmVUb2tlbnMgPSB1bml0c0Zvcklzc3VlclJlc2VydmUodG9rZW5zKTsKICAgIAogICAgcmVxdWlyZShjcm93ZHNhbGVEaXN0cmlidXRlZFVuaXRzLmFkZCh0b2tlbnMpLmFkZChpc3N1ZXJSZXNlcnZlVG9rZW5zKSA8PSB0b3RhbFN1cHBseVVuaXRzKTsKCiAgICBpbmNyZW1lbnRDb250cmlidXRvcnNDb3VudChiZW5lZmljaWFyeSk7CgogICAgY29udHJpYnV0b3JzW2JlbmVmaWNpYXJ5XS5kZWNvVW5pdHMgPSBjb250cmlidXRvcnNbYmVuZWZpY2lhcnldLmRlY29Vbml0cy5hZGQodG9rZW5zKTsKICAgIGNvbnRyaWJ1dG9yc1tiZW5lZmljaWFyeV0uY29udHJpYnV0ZWRXZWkgPSBjb250cmlidXRvcnNbYmVuZWZpY2lhcnldLmNvbnRyaWJ1dGVkV2VpLmFkZCh3ZWlBbW91bnQpOwoKICAgIGlzc3VlckRpc3RyaWJ1dGVkVW5pdHMgPSBpc3N1ZXJEaXN0cmlidXRlZFVuaXRzLmFkZChpc3N1ZXJSZXNlcnZlVG9rZW5zKTsKICAgIGNyb3dkc2FsZURpc3RyaWJ1dGVkVW5pdHMgPSBjcm93ZHNhbGVEaXN0cmlidXRlZFVuaXRzLmFkZCh0b2tlbnMpLmFkZChpc3N1ZXJSZXNlcnZlVG9rZW5zKTsKICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKICAgICAgICAgICAgCiAgICBUb2tlblB1cmNoYXNlKGJlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRva2Vucyk7CiAgICAKICAgIGNyb3dkc2FsZVdhbGxldC50cmFuc2Zlcih3ZWlBbW91bnQpOwogICAgdG9rZW4udHJhbnNmZXIoYmVuZWZpY2lhcnksIHRva2Vucyk7CiAgICBpZiAoaXNzdWVyUmVzZXJ2ZVRva2VucyAhPSAwKSB7CiAgICAgIHRva2VuLnRyYW5zZmVyKGRlY29SZXNlcnZlV2FsbGV0LCBpc3N1ZXJSZXNlcnZlVG9rZW5zKTsKICAgIH0gICAgICAgICAgICAKICB9CgogIGZ1bmN0aW9uIGluY3JlbWVudENvbnRyaWJ1dG9yc0NvdW50KGFkZHJlc3MgX2FkZHJlc3MpIHByaXZhdGUgewogICAgaWYgKGNvbnRyaWJ1dG9yc1tfYWRkcmVzc10uY29udHJpYnV0ZWRXZWkgPT0gMCkgewogICAgICBjb250cmlidXRvcnNDb3VudCA9IGNvbnRyaWJ1dG9yc0NvdW50LmFkZCgxKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGNvbnRyaWJ1dGVkV2VpKGFkZHJlc3MgX2FkZHJlc3MpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gY29udHJpYnV0b3JzW19hZGRyZXNzXS5jb250cmlidXRlZFdlaTsKICB9CgogIGZ1bmN0aW9uIGRpc3RpYnV0ZWREZWNvVW5pdHMoYWRkcmVzcyBfYWRkcmVzcykgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBjb250cmlidXRvcnNbX2FkZHJlc3NdLmRlY29Vbml0czsKICB9CgogIGZ1bmN0aW9uIGNpcmN1bGF0aW5nU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBjcm93ZHNhbGVEaXN0cmlidXRlZFVuaXRzLmFkZChyZXdhcmREaXN0cmlidXRlZFVuaXRzKTsKICB9CgogIGZ1bmN0aW9uIGN1cnJlbnREaXNjb3VudFBlcmNlbnRhZ2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKHByZXNhbGVTdGFydFRpbWUgPiBub3cpIHsgcmV0dXJuIHByZXNhbGVEaXNjb3VudDsgfQogICAgaWYgKHByZXNhbGVBY3RpdmUoKSkgeyByZXR1cm4gcHJlc2FsZURpc2NvdW50OyB9CiAgICB1aW50MjU2IGRpc2NvdW50U3ViID0gc2FsZVN0YWdlKCkubXVsKDUpOwogICAgdWludDI1NiBkaXNjb3VudCA9IHNhbGVEaXNjb3VudC5zdWIoZGlzY291bnRTdWIpOwogICAgcmV0dXJuIGRpc2NvdW50OwogIH0KCiAgZnVuY3Rpb24gY3VycmVudFJhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiB4ID0gKEJBU0UubXVsKDEwMCkuc3ViKGN1cnJlbnREaXNjb3VudFBlcmNlbnRhZ2UoKS5tdWwoQkFTRSkpKS5kaXYoMTAwKTsKICAgIHJldHVybiBvcmlnaW5hbFJhdGUubXVsKEJBU0UpLmRpdih4KTsKICB9CgogIC8vIFByZXNhbGUKCiAgZnVuY3Rpb24gcHJlc2FsZUxpbWl0VW5pdHMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHRvdGFsU3VwcGx5VW5pdHMuZGl2KDEwMCkubXVsKHByZXNhbGVQZXJjZW50YWdlKTsKICB9CgogIGZ1bmN0aW9uIHNob3VsZEVuZFByZXNhbGUoKSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIGlmICgoY3Jvd2RzYWxlRGlzdHJpYnV0ZWRVbml0cy5zdWIoaXNzdWVyRGlzdHJpYnV0ZWRVbml0cykgPj0gcHJlc2FsZUxpbWl0VW5pdHMoKSkgfHwgKG5vdyA+PSBwcmVzYWxlRW5kVGltZSkpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwcmVzYWxlQWN0aXZlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIGJvb2wgaW5SYW5nZSA9IG5vdyA+PSBwcmVzYWxlU3RhcnRUaW1lICYmIG5vdyA8IHByZXNhbGVFbmRUaW1lOwogICAgcmV0dXJuIGluUmFuZ2UgJiYgc2hvdWxkRW5kUHJlc2FsZSgpID09IGZhbHNlOwogIH0KCiAgLy8gU2FsZQoKICBmdW5jdGlvbiB1bml0c0xpbWl0Rm9yQ3VycmVudFNhbGVTdGFnZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gdG90YWxTdXBwbHlVbml0cy5kaXYoMTAwKS5tdWwoY3VycmVudE1heGltdW1TYWxlUGVyY2VudGFnZSgpKTsKICB9CgogIGZ1bmN0aW9uIG1heGltdW1TYWxlTGltaXRVbml0cygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gdG90YWxTdXBwbHlVbml0cy5kaXYoMTAwKS5tdWwoNTApOwogIH0KCiAgZnVuY3Rpb24gY3VycmVudE1heGltdW1TYWxlUGVyY2VudGFnZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gc2FsZVN0YWdlKCkubXVsKDgpLmFkZCgxMCk7CiAgfQoKICBmdW5jdGlvbiBzYWxlTGltaXRSZWFjaGVkRm9yQ3VycmVudFN0YWdlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiAoY3Jvd2RzYWxlRGlzdHJpYnV0ZWRVbml0cy5zdWIoaXNzdWVyRGlzdHJpYnV0ZWRVbml0cykgPj0gdW5pdHNMaW1pdEZvckN1cnJlbnRTYWxlU3RhZ2UoKSk7CiAgfQoKICBmdW5jdGlvbiBjdXJyZW50U2FsZVN0YWdlKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBzYWxlU3RhZ2UoKS5hZGQoMSk7CiAgfQoKICBmdW5jdGlvbiBzYWxlU3RhZ2UoKSBwcml2YXRlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgZGVsdGEgPSBzYWxlRW5kVGltZS5zdWIoc2FsZVN0YXJ0VGltZSk7CiAgICB1aW50MjU2IHN0YWdlU3RlcCA9IGRlbHRhLmRpdig2KTsKICAgIGludDI1NiBzdGFnZURlbHRhID0gaW50MjU2KG5vdyAtIHNhbGVTdGFydFRpbWUpOwogICAgaWYgKChzdGFnZURlbHRhIDw9IDApIHx8IChzdGFnZVN0ZXAgPT0gMCkpIHsKICAgICAgcmV0dXJuIDA7CiAgICB9IGVsc2UgewogICAgICB1aW50MjU2IHJlbWluZGVyID0gdWludDI1NihzdGFnZURlbHRhKSAlIHN0YWdlU3RlcDsKICAgICAgdWludDI1NiBkaXZpZGFibGVEZWx0YSA9IHVpbnQyNTYoc3RhZ2VEZWx0YSkuc3ViKHJlbWluZGVyKTsKICAgICAgdWludDI1NiBzdGFnZSA9IGRpdmlkYWJsZURlbHRhLmRpdihzdGFnZVN0ZXApOwogICAgICBpZiAoc3RhZ2UgPD0gNSkgewogICAgICAgIHJldHVybiBzdGFnZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gNTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gc2FsZUFjdGl2ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICBib29sIGluUmFuZ2UgPSBub3cgPj0gc2FsZVN0YXJ0VGltZSAmJiBub3cgPCBzYWxlRW5kVGltZTsgICAgICAgIAogICAgcmV0dXJuIGluUmFuZ2UgJiYgc2FsZUxpbWl0UmVhY2hlZEZvckN1cnJlbnRTdGFnZSgpID09IGZhbHNlOwogIH0KCiAgLy8gSXNzdWVyIFJlc2VydmUKCiAgZnVuY3Rpb24gdW5pdHNGb3JJc3N1ZXJSZXNlcnZlKHVpbnQyNTYgX3Rva2Vuc0ZvckRpc3RyaWJ1dGlvbikgcHJpdmF0ZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IHJlc2lkdWUgPSBtYXhpbXVtSXNzdWVyUmVzZXJ2ZWRVbml0cygpLnN1Yihpc3N1ZXJEaXN0cmlidXRlZFVuaXRzKTsKICAgIHVpbnQyNTYgdG9Jc3N1ZXIgPSBfdG9rZW5zRm9yRGlzdHJpYnV0aW9uLmRpdigxMDApLm11bCgxMCk7CiAgICBpZiAocmVzaWR1ZSA+IHRvSXNzdWVyKSB7CiAgICAgIHJldHVybiB0b0lzc3VlcjsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiByZXNpZHVlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gbWF4aW11bUlzc3VlclJlc2VydmVkVW5pdHMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHRvdGFsU3VwcGx5VW5pdHMuZGl2KDEwMCkubXVsKGlzc3VlclJlc2VydmVkTWF4aW11bVBlcmNlbnRhZ2UpOwogIH0KCiAgLy8gUmV3YXJkIGRpc3RyaWJ1dGlvbgoKICBtb2RpZmllciBhZnRlclNhbGUoKSB7CiAgICByZXF1aXJlKHJld2FyZERpc3RyaWJ1dGlvblN0YXJ0ZWQoKSk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gcmV3YXJkRGlzdHJpYnV0aW9uU3RhcnRlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gbm93ID49IHJld2FyZERpc3RyaWJ1dGlvblN0YXJ0OwogIH0KCiAgZnVuY3Rpb24gcmVxdWVzdFJld2FyZCgpIGFmdGVyU2FsZSBleHRlcm5hbCB7CiAgICBpZiAoKG1zZy5zZW5kZXIgPT0gY29udHJhY3RDcmVhdG9yKSAmJiAocmV3YXJkRGlzdHJpYnV0aW9uRW5kZWQoKSkpIHsKICAgICAgc2VuZE5vdERpc3RyaWJ1dGVkVW5pdHMoKTsKICAgIH0gZWxzZSB7CiAgICAgIHJld2FyZERpc3RyaWJ1dGlvbihtc2cuc2VuZGVyKTsKICAgIH0gICAgCiAgfQoKICBmdW5jdGlvbiByZXdhcmREaXN0cmlidXRpb24oYWRkcmVzcyBfYWRkcmVzcykgcHJpdmF0ZSB7CiAgICByZXF1aXJlKGNvbnRyaWJ1dG9yc1tfYWRkcmVzc10uY29udHJpYnV0ZWRXZWkgPiAwKTsgICAgCiAgICB1aW50MjU2IHJld2FyZCA9IHBheWFibGVSZXdhcmQoX2FkZHJlc3MpOwogICAgcmVxdWlyZShyZXdhcmQgPiAwKTsKICAgIHNlbmRSZXdhcmQoX2FkZHJlc3MsIHJld2FyZCk7CiAgfQoKICBmdW5jdGlvbiBzZW5kTm90RGlzdHJpYnV0ZWRVbml0cygpIHByaXZhdGUgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbnRyYWN0Q3JlYXRvcik7CiAgICB1aW50MjU2IGJhbGFuY2UgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICBSZXdhcmREaXN0cmlidXRlZChjb250cmFjdENyZWF0b3IsIGJhbGFuY2UpOwogICAgc2VuZFJld2FyZChjb250cmFjdENyZWF0b3IsIGJhbGFuY2UpOwogIH0KCiAgZnVuY3Rpb24gcGF5YWJsZVJld2FyZChhZGRyZXNzIF9hZGRyZXNzKSBhZnRlclNhbGUgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgdW5pdHNMZWZ0ID0gdG90YWxVbml0c0xlZnQoKTsKICAgIGlmICh1bml0c0xlZnQgPCAxMCoqNCkgewogICAgICByZXR1cm4gdW5pdHNMZWZ0OwogICAgfQogICAgdWludDI1NiB0b3RhbFJld2FyZCA9IGNvbnRyaWJ1dG9yVG90YWxSZXdhcmQoX2FkZHJlc3MpOwogICAgdWludDI1NiBwYWlkQm9udXMgPSBjb250cmlidXRvcnNbX2FkZHJlc3NdLnJld2FyZERpc3RyaWJ1dGVkRGVjb1VuaXRzOwogICAgdWludDI1NiB0b3RhbFJld2FyZExlZnQgPSB0b3RhbFJld2FyZC5zdWIocGFpZEJvbnVzKTsKICAgIHVpbnQyNTYgYm9udXNQZXJEYXkgPSB0b3RhbFJld2FyZC5kaXYocmV3YXJkRGF5cygpKTsKICAgIGlmICgodG90YWxSZXdhcmRMZWZ0ID4gMCkgJiYgKChib251c1BlckRheSA9PSAwKSB8fCAocmV3YXJkRGF5c0xlZnQoKSA9PSAwKSkpIHsKICAgICAgcmV0dXJuIHRvdGFsUmV3YXJkTGVmdDsKICAgIH0KICAgIHVpbnQyNTYgdG90YWxQYXlhYmxlID0gcmV3YXJkUGF5YWJsZURheXMoKS5tdWwoYm9udXNQZXJEYXkpOwogICAgdWludDI1NiByZXdhcmQgPSB0b3RhbFBheWFibGUuc3ViKHBhaWRCb251cyk7CiAgICByZXR1cm4gcmV3YXJkOwogIH0KCiAgZnVuY3Rpb24gc2VuZFJld2FyZChhZGRyZXNzIF9hZGRyZXNzLCB1aW50MjU2IF92YWx1ZSkgcHJpdmF0ZSB7CiAgICBjb250cmlidXRvcnNbX2FkZHJlc3NdLnJld2FyZERpc3RyaWJ1dGVkRGVjb1VuaXRzID0gY29udHJpYnV0b3JzW19hZGRyZXNzXS5yZXdhcmREaXN0cmlidXRlZERlY29Vbml0cy5hZGQoX3ZhbHVlKTsKICAgIHJld2FyZERpc3RyaWJ1dGVkVW5pdHMgPSByZXdhcmREaXN0cmlidXRlZFVuaXRzLmFkZChfdmFsdWUpOyAKICAgIFJld2FyZERpc3RyaWJ1dGVkKF9hZGRyZXNzLCBfdmFsdWUpOwogICAgdG9rZW4udHJhbnNmZXIoX2FkZHJlc3MsIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiByZXdhcmRQYXlhYmxlRGF5cygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IHBheWFibGVEYXlzID0gcmV3YXJkRGF5cygpLnN1YihyZXdhcmREYXlzTGVmdCgpKTsKICAgIGlmIChwYXlhYmxlRGF5cyA9PSAwKSB7CiAgICAgIHBheWFibGVEYXlzID0gMTsKICAgIH0KICAgIGlmIChwYXlhYmxlRGF5cyA+IHJld2FyZERheXMoKSkgewogICAgICBwYXlhYmxlRGF5cyA9IHJld2FyZERheXMoKTsKICAgIH0KICAgIHJldHVybiBwYXlhYmxlRGF5czsKICB9CgogIGZ1bmN0aW9uIHJld2FyZERheXMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiByYXRlID0gcmV3YXJkVW5pdHNSYXRlUGVyWWVhcigpOwogICAgaWYgKHJhdGUgPT0gMCkgewogICAgICByZXR1cm4gODAgKiAzNjU7IC8vIEluaXRpYWwgYXNzdW1wdGlvbgogICAgfQogICAgdWludDI1NiBkYXlzVG9Db21wbGV0ZSA9ICh0b3RhbFN1cHBseVVuaXRzLnN1Yihjcm93ZHNhbGVEaXN0cmlidXRlZFVuaXRzKSkubXVsKDM2NSkuZGl2KHJhdGUpOwogICAgcmV0dXJuIGRheXNUb0NvbXBsZXRlOwogIH0KCiAgZnVuY3Rpb24gcmV3YXJkVW5pdHNSYXRlUGVyWWVhcigpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gY3Jvd2RzYWxlRGlzdHJpYnV0ZWRVbml0cy5kaXYoMTAwKTsKICB9CgogIGZ1bmN0aW9uIGN1cnJlbnRSZXdhcmRSZWxlYXNlUGVyY2VudGFnZVJhdGVQZXJZZWFyKCkgYWZ0ZXJTYWxlIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiByZXdhcmRVbml0c1JhdGVQZXJZZWFyKCkubXVsKDEwKioxOCkuZGl2KGNpcmN1bGF0aW5nU3VwcGx5KCkpLm11bCgxMDApOyAvLyBEaXZpZGUgYnkgMTAqKjE4IHRvIGdldCB0aGUgYWN0dWFsIGRlY2ltYWwgJSB2YWx1ZQogIH0KCiAgZnVuY3Rpb24gcmV3YXJkRGlzdHJpYnV0aW9uRW5kKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgc2Vjb25kc1RvQ29tcGxldGUgPSByZXdhcmREYXlzKCkubXVsKDEgZGF5cyk7CiAgICByZXR1cm4gcmV3YXJkRGlzdHJpYnV0aW9uU3RhcnQuYWRkKHNlY29uZHNUb0NvbXBsZXRlKTsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZVJlbWFpbmluZ0RlY29SZXdhcmRPd25lcihhZGRyZXNzIF9uZXdPd25lciwgc3RyaW5nIF9jb25maXJtYXRpb24pIGFmdGVyU2FsZSBleHRlcm5hbCB7CiAgICByZXF1aXJlKF9uZXdPd25lciAhPSAweDApOwogICAgcmVxdWlyZShzaGEzKF9jb25maXJtYXRpb24pID09IHNoYTMoIkNPTkZJUk0iKSk7CiAgICByZXF1aXJlKF9uZXdPd25lciAhPSBhZGRyZXNzKHRoaXMpKTsKICAgIHJlcXVpcmUoX25ld093bmVyICE9IGFkZHJlc3ModG9rZW4pKTsgICAgCiAgICByZXF1aXJlKGNvbnRyaWJ1dG9yc1tfbmV3T3duZXJdLmRlY29Vbml0cyA9PSAwKTsKICAgIHJlcXVpcmUoY29udHJpYnV0b3JzW21zZy5zZW5kZXJdLmRlY29Vbml0cyA+IDApOwogICAgcmVxdWlyZSh0b2tlbi5iYWxhbmNlT2YoX25ld093bmVyKSA+IDApOyAvLyBUaGUgbmV3IG93bmVyIG11c3QgaGF2ZSBzb21lIG51bWJlciBvZiBERUNPIHRva2Vucy4gSXQgcHJvb2ZzIHRoYXQgX25ld093bmVyIGFkZHJlc3MgaXMgcmVhbC4KICAgIGNvbnRyaWJ1dG9yc1tfbmV3T3duZXJdID0gY29udHJpYnV0b3JzW21zZy5zZW5kZXJdOwogICAgZGVsZXRlKGNvbnRyaWJ1dG9yc1ttc2cuc2VuZGVyXSk7CiAgICBSZW1haW5pbmdSZXdhcmRPd25lcnNoaXBDaGFuZ2VkKG1zZy5zZW5kZXIsIF9uZXdPd25lcik7CiAgfSAgCgogIGZ1bmN0aW9uIHRvdGFsVW5pdHNMZWZ0KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGludDI1NiB1bml0cyA9IGludDI1Nih0b3RhbFN1cHBseVVuaXRzKSAtIGludDI1NigocmV3YXJkRGlzdHJpYnV0ZWRVbml0cy5hZGQoY3Jvd2RzYWxlRGlzdHJpYnV0ZWRVbml0cykpKTsgCiAgICBpZiAodW5pdHMgPCAwKSB7CiAgICAgIHJldHVybiB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICB9CiAgICByZXR1cm4gdWludDI1Nih1bml0cyk7CiAgfQoKICBmdW5jdGlvbiByZXdhcmREYXlzTGVmdCgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAobm93IDwgcmV3YXJkRGlzdHJpYnV0aW9uU3RhcnQpIHsKICAgICAgcmV0dXJuIHJld2FyZERheXMoKTsKICAgIH0KICAgIGludDI1NiBsZWZ0ID0gKGludDI1NihyZXdhcmREaXN0cmlidXRpb25FbmQoKSkgLSBpbnQyNTYobm93KSkgLyAxIGRheXM7CiAgICBpZiAobGVmdCA8IDApIHsKICAgICAgbGVmdCA9IDA7CiAgICB9CiAgICByZXR1cm4gdWludDI1NihsZWZ0KTsKICB9CgogIGZ1bmN0aW9uIGNvbnRyaWJ1dG9yVG90YWxSZXdhcmQoYWRkcmVzcyBfYWRkcmVzcykgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgcHJvcG9ydGlvbiA9IGNvbnRyaWJ1dG9yc1tfYWRkcmVzc10uZGVjb1VuaXRzLm11bCgxMCoqMzIpLmRpdihjcm93ZHNhbGVEaXN0cmlidXRlZFVuaXRzLnN1Yihpc3N1ZXJEaXN0cmlidXRlZFVuaXRzKSk7CiAgICB1aW50MjU2IGxlZnRGb3JCb251c2VzID0gdG90YWxTdXBwbHlVbml0cy5zdWIoY3Jvd2RzYWxlRGlzdHJpYnV0ZWRVbml0cyk7CiAgICB1aW50MjU2IHJld2FyZCA9IGxlZnRGb3JCb251c2VzLm11bChwcm9wb3J0aW9uKS5kaXYoMTAqKjMyKTsKICAgIHVpbnQyNTYgdG90YWxMZWZ0ID0gdG90YWxTdXBwbHlVbml0cyAtIChyZXdhcmREaXN0cmlidXRlZFVuaXRzLmFkZChyZXdhcmQpLmFkZChjcm93ZHNhbGVEaXN0cmlidXRlZFVuaXRzKSk7CiAgICBpZiAodG90YWxMZWZ0IDwgMTAqKjQpIHsKICAgICAgcmV3YXJkID0gcmV3YXJkLmFkZCh0b3RhbExlZnQpOwogICAgfSAgICAKICAgIHJldHVybiByZXdhcmQ7CiAgfQoKICBmdW5jdGlvbiBjb250cmlidXRvckRpc3RyaWJ1dGVkUmV3YXJkKGFkZHJlc3MgX2FkZHJlc3MpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gY29udHJpYnV0b3JzW19hZGRyZXNzXS5yZXdhcmREaXN0cmlidXRlZERlY29Vbml0czsKICB9ICAKCiAgZnVuY3Rpb24gcmV3YXJkRGlzdHJpYnV0aW9uRW5kZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIG5vdyA+IHJld2FyZERpc3RyaWJ1dGlvbkVuZCgpOwogIH0KCn0='.
	

]
