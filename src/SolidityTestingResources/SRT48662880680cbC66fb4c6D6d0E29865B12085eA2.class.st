Class {
	#name : #SRT48662880680cbC66fb4c6D6d0E29865B12085eA2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT48662880680cbC66fb4c6D6d0E29865B12085eA2 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBQcm92ZXIgewogICAgLy8gYXR0YWNoIGxpYnJhcnkKICAgIHVzaW5nIFNldHMgZm9yICo7CgoKICAgIC8vIHN0b3JhZ2UgdmFycwogICAgYWRkcmVzcyBvd25lcjsKICAgIFNldHMuYWRkcmVzc1NldCBpbnRlcm5hbCB1c2VyczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gVXNlckFjY291bnQpIGludGVybmFsIGxlZGdlcjsKICAgIAogICAgCiAgICAvLyBzdHJ1Y3RzCiAgICBzdHJ1Y3QgVXNlckFjY291bnQgewogICAgICAgIFNldHMuYnl0ZXMzMlNldCBoYXNoZXM7CiAgICAgICAgbWFwcGluZyAoYnl0ZXMzMiA9PiBFbnRyeSkgZW50cmllczsKICAgIH0KCiAgICBzdHJ1Y3QgRW50cnkgewogICAgICAgIHVpbnQyNTYgdGltZTsKICAgICAgICB1aW50MjU2IHZhbHVlOwogICAgfQoKCiAgICAvLyBjb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gUHJvdmVyKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KICAgIAogICAgCiAgICAvLyBmYWxsYmFjazogdW5tYXRjaGVkIHRyYW5zYWN0aW9ucyB3aWxsIGJlIHJldHVybmVkCiAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICB9CgoKICAgIC8vIG1vZGlmaWVyIHRvIGNoZWNrIGlmIHNlbmRlciBoYXMgYW4gYWNjb3VudAogICAgbW9kaWZpZXIgaGFzQWNjb3VudCgpIHsKICAgICAgICBhc3NlcnQobGVkZ2VyW21zZy5zZW5kZXJdLmhhc2hlcy5sZW5ndGgoKSA+PSAxKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvLyBleHRlcm5hbCBmdW5jdGlvbnMKICAgIC8vIHByb3ZpbmcKICAgIGZ1bmN0aW9uIHByb3ZlSXQoYWRkcmVzcyB0YXJnZXQsIGJ5dGVzMzIgZGF0YUhhc2gpIGV4dGVybmFsIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAoYm9vbCBwcm92ZWQsIHVpbnQyNTYgdGltZSwgdWludDI1NiB2YWx1ZSkKICAgIHsKICAgICAgICByZXR1cm4gc3RhdHVzKHRhcmdldCwgZGF0YUhhc2gpOwogICAgfQoKICAgIGZ1bmN0aW9uIHByb3ZlSXQoYWRkcmVzcyB0YXJnZXQsIHN0cmluZyBkYXRhU3RyaW5nKSBleHRlcm5hbCBjb25zdGFudAogICAgICAgIHJldHVybnMgKGJvb2wgcHJvdmVkLCB1aW50MjU2IHRpbWUsIHVpbnQyNTYgdmFsdWUpCiAgICB7CiAgICAgICAgcmV0dXJuIHN0YXR1cyh0YXJnZXQsIHNoYTMoZGF0YVN0cmluZykpOwogICAgfQogICAgCiAgICAvLyBhbGxvdyBhY2Nlc3MgdG8gb3VyIHN0cnVjdHMgdmlhIGZ1bmN0aW9ucyB3aXRoIGNvbnZlbmllbnQgcmV0dXJuIHZhbHVlcwogICAgZnVuY3Rpb24gdXNlcnNHZXR0ZXIoKSBwdWJsaWMgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50MjU2IG51bWJlcl91bmlxdWVfYWRkcmVzc2VzLCBhZGRyZXNzW10gdW5pcXVlX2FkZHJlc3NlcykKICAgIHsKICAgICAgICByZXR1cm4gKHVzZXJzLmxlbmd0aCgpLCB1c2Vycy5tZW1iZXJzKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1c2VyRW50cmllcyhhZGRyZXNzIHRhcmdldCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMltdKSB7CiAgICAgICAgcmV0dXJuIGxlZGdlclt0YXJnZXRdLmhhc2hlcy5tZW1iZXJzOwogICAgfQogICAgCiAgICAKICAgIC8vIHB1YmxpYyBmdW5jdGlvbnMKICAgIC8vIGFkZGluZyBlbnRyaWVzCiAgICBmdW5jdGlvbiBhZGRFbnRyeShieXRlczMyIGRhdGFIYXNoKSBwYXlhYmxlIHsKICAgICAgICBfYWRkRW50cnkoZGF0YUhhc2gpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZEVudHJ5KHN0cmluZyBkYXRhU3RyaW5nKSBwYXlhYmxlIHsKICAgICAgICBfYWRkRW50cnkoc2hhMyhkYXRhU3RyaW5nKSk7CiAgICB9CgogICAgLy8gZGVsZXRpbmcgZW50cmllcwogICAgZnVuY3Rpb24gZGVsZXRlRW50cnkoYnl0ZXMzMiBkYXRhSGFzaCkgaGFzQWNjb3VudCB7CiAgICAgICAgX2RlbGV0ZUVudHJ5KGRhdGFIYXNoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxldGVFbnRyeShzdHJpbmcgZGF0YVN0cmluZykgaGFzQWNjb3VudCB7CiAgICAgICAgX2RlbGV0ZUVudHJ5KHNoYTMoZGF0YVN0cmluZykpOwogICAgfQogICAgCiAgICAvLyBhbGxvdyBvd25lciB0byBkZWxldGUgY29udHJhY3QgaWYgbm8gYWNjb3VudHMgZXhpc3QKICAgIGZ1bmN0aW9uIHNlbGZEZXN0cnVjdCgpIHsKICAgICAgICBpZiAoKG1zZy5zZW5kZXIgPT0gb3duZXIpICYmICh1c2Vycy5sZW5ndGgoKSA9PSAwKSkgewogICAgICAgICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgICAgIH0KICAgIH0KCgogICAgLy8gaW50ZXJuYWwgZnVuY3Rpb25zCiAgICBmdW5jdGlvbiBfYWRkRW50cnkoYnl0ZXMzMiBkYXRhSGFzaCkgaW50ZXJuYWwgewogICAgICAgIC8vIGVuc3VyZSB0aGUgZW50cnkgZG9lc24ndCBleGlzdAogICAgICAgIGFzc2VydCghbGVkZ2VyW21zZy5zZW5kZXJdLmhhc2hlcy5jb250YWlucyhkYXRhSGFzaCkpOwogICAgICAgIC8vIHVwZGF0ZSBVc2VyQWNjb3VudCAoaGFzaGVzIHRoZW4gZW50cmllcykKICAgICAgICBsZWRnZXJbbXNnLnNlbmRlcl0uaGFzaGVzLmluc2VydChkYXRhSGFzaCk7CiAgICAgICAgbGVkZ2VyW21zZy5zZW5kZXJdLmVudHJpZXNbZGF0YUhhc2hdID0gRW50cnkobm93LCBtc2cudmFsdWUpOwogICAgICAgIC8vIGFkZCBzZW5kZXIgdG8gdXNlcmxpc3QKICAgICAgICB1c2Vycy5pbnNlcnQobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gX2RlbGV0ZUVudHJ5KGJ5dGVzMzIgZGF0YUhhc2gpIGludGVybmFsIHsKICAgICAgICAvLyBlbnN1cmUgdGhlIGVudHJ5IGRvZXMgZXhpc3QKICAgICAgICBhc3NlcnQobGVkZ2VyW21zZy5zZW5kZXJdLmhhc2hlcy5jb250YWlucyhkYXRhSGFzaCkpOwogICAgICAgIHVpbnQyNTYgcmViYXRlID0gbGVkZ2VyW21zZy5zZW5kZXJdLmVudHJpZXNbZGF0YUhhc2hdLnZhbHVlOwogICAgICAgIC8vIHVwZGF0ZSBVc2VyQWNjb3VudCAoaGFzaGVzIHRoZW4gZW50cmllcykKICAgICAgICBsZWRnZXJbbXNnLnNlbmRlcl0uaGFzaGVzLnJlbW92ZShkYXRhSGFzaCk7CiAgICAgICAgZGVsZXRlIGxlZGdlclttc2cuc2VuZGVyXS5lbnRyaWVzW2RhdGFIYXNoXTsKICAgICAgICAvLyBzZW5kIHRoZSByZWJhdGUKICAgICAgICBpZiAocmViYXRlID4gMCkgewogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHJlYmF0ZSk7CiAgICAgICAgfQogICAgICAgIC8vIGRlbGV0ZSBmcm9tIHVzZXJsaXN0IGlmIHRoaXMgd2FzIHRoZSB1c2VyJ3MgbGFzdCBlbnRyeQogICAgICAgIGlmIChsZWRnZXJbbXNnLnNlbmRlcl0uaGFzaGVzLmxlbmd0aCgpID09IDApIHsKICAgICAgICAgICAgdXNlcnMucmVtb3ZlKG1zZy5zZW5kZXIpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyByZXR1cm4gc3RhdHVzIG9mIGFyYml0cmFyeSBhZGRyZXNzIGFuZCBkYXRhSGFzaAogICAgZnVuY3Rpb24gc3RhdHVzKGFkZHJlc3MgdGFyZ2V0LCBieXRlczMyIGRhdGFIYXNoKSBpbnRlcm5hbCBjb25zdGFudAogICAgICAgIHJldHVybnMgKGJvb2wgcHJvdmVkLCB1aW50MjU2IHRpbWUsIHVpbnQyNTYgdmFsdWUpCiAgICB7CiAgICAgICAgcmV0dXJuIChsZWRnZXJbbXNnLnNlbmRlcl0uaGFzaGVzLmNvbnRhaW5zKGRhdGFIYXNoKSwKICAgICAgICAgICAgICAgIGxlZGdlclt0YXJnZXRdLmVudHJpZXNbZGF0YUhhc2hdLnRpbWUsCiAgICAgICAgICAgICAgICBsZWRnZXJbdGFyZ2V0XS5lbnRyaWVzW2RhdGFIYXNoXS52YWx1ZSk7CiAgICB9Cn0KCi8vIG5vdGU6IGJyZWFrcyBpZiBtZW1iZXJzLmxlbmd0aCBleGNlZWRzIDJeMjU2LTEgKHNvLCBub3QgcmVhbGx5IGEgcHJvYmxlbSkKbGlicmFyeSBTZXRzIHsKICAgIC8vIGFkZHJlc3Mgc2V0CiAgICBzdHJ1Y3QgYWRkcmVzc1NldCB7CiAgICAgICAgYWRkcmVzc1tdIG1lbWJlcnM7CiAgICAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBtZW1iZXJFeGlzdHM7CiAgICAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBtZW1iZXJJbmRleDsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnNlcnQoYWRkcmVzc1NldCBzdG9yYWdlIHNlbGYsIGFkZHJlc3Mgb3RoZXIpIHsKICAgICAgICBpZiAoIXNlbGYubWVtYmVyRXhpc3RzW290aGVyXSkgewogICAgICAgICAgICBzZWxmLm1lbWJlckV4aXN0c1tvdGhlcl0gPSB0cnVlOwogICAgICAgICAgICBzZWxmLm1lbWJlckluZGV4W290aGVyXSA9IHNlbGYubWVtYmVycy5sZW5ndGg7CiAgICAgICAgICAgIHNlbGYubWVtYmVycy5wdXNoKG90aGVyKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlKGFkZHJlc3NTZXQgc3RvcmFnZSBzZWxmLCBhZGRyZXNzIG90aGVyKSB7CiAgICAgICAgaWYgKHNlbGYubWVtYmVyRXhpc3RzW290aGVyXSkgIHsKICAgICAgICAgICAgc2VsZi5tZW1iZXJFeGlzdHNbb3RoZXJdID0gZmFsc2U7CiAgICAgICAgICAgIHVpbnQgaW5kZXggPSBzZWxmLm1lbWJlckluZGV4W290aGVyXTsKICAgICAgICAgICAgLy8gY2hhbmdlIGluZGV4IG9mIGxhc3QgdmFsdWUgdG8gaW5kZXggb2Ygb3RoZXIgCiAgICAgICAgICAgIHNlbGYubWVtYmVySW5kZXhbc2VsZi5tZW1iZXJzW3NlbGYubWVtYmVycy5sZW5ndGggLSAxXV0gPSBpbmRleDsKICAgICAgICAgICAgLy8gY29weSBsYXN0IHZhbHVlIG92ZXIgb3RoZXIgYW5kIGRlY3JlbWVudCBsZW5ndGgKICAgICAgICAgICAgc2VsZi5tZW1iZXJzW2luZGV4XSA9IHNlbGYubWVtYmVyc1tzZWxmLm1lbWJlcnMubGVuZ3RoIC0gMV07CiAgICAgICAgICAgIHNlbGYubWVtYmVycy5sZW5ndGgtLTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY29udGFpbnMoYWRkcmVzc1NldCBzdG9yYWdlIHNlbGYsIGFkZHJlc3Mgb3RoZXIpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc2VsZi5tZW1iZXJFeGlzdHNbb3RoZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGxlbmd0aChhZGRyZXNzU2V0IHN0b3JhZ2Ugc2VsZikgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBzZWxmLm1lbWJlcnMubGVuZ3RoOwogICAgfQoKCiAgICAvLyB1aW50IHNldAogICAgc3RydWN0IHVpbnRTZXQgewogICAgICAgIHVpbnRbXSBtZW1iZXJzOwogICAgICAgIG1hcHBpbmcgKHVpbnQgPT4gYm9vbCkgbWVtYmVyRXhpc3RzOwogICAgICAgIG1hcHBpbmcgKHVpbnQgPT4gdWludCkgbWVtYmVySW5kZXg7CiAgICB9CgogICAgZnVuY3Rpb24gaW5zZXJ0KHVpbnRTZXQgc3RvcmFnZSBzZWxmLCB1aW50IG90aGVyKSB7CiAgICAgICAgaWYgKCFzZWxmLm1lbWJlckV4aXN0c1tvdGhlcl0pIHsKICAgICAgICAgICAgc2VsZi5tZW1iZXJFeGlzdHNbb3RoZXJdID0gdHJ1ZTsKICAgICAgICAgICAgc2VsZi5tZW1iZXJJbmRleFtvdGhlcl0gPSBzZWxmLm1lbWJlcnMubGVuZ3RoOwogICAgICAgICAgICBzZWxmLm1lbWJlcnMucHVzaChvdGhlcik7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZSh1aW50U2V0IHN0b3JhZ2Ugc2VsZiwgdWludCBvdGhlcikgewogICAgICAgIGlmIChzZWxmLm1lbWJlckV4aXN0c1tvdGhlcl0pICB7CiAgICAgICAgICAgIHNlbGYubWVtYmVyRXhpc3RzW290aGVyXSA9IGZhbHNlOwogICAgICAgICAgICB1aW50IGluZGV4ID0gc2VsZi5tZW1iZXJJbmRleFtvdGhlcl07CiAgICAgICAgICAgIC8vIGNoYW5nZSBpbmRleCBvZiBsYXN0IHZhbHVlIHRvIGluZGV4IG9mIG90aGVyIAogICAgICAgICAgICBzZWxmLm1lbWJlckluZGV4W3NlbGYubWVtYmVyc1tzZWxmLm1lbWJlcnMubGVuZ3RoIC0gMV1dID0gaW5kZXg7CiAgICAgICAgICAgIC8vIGNvcHkgbGFzdCB2YWx1ZSBvdmVyIG90aGVyIGFuZCBkZWNyZW1lbnQgbGVuZ3RoCiAgICAgICAgICAgIHNlbGYubWVtYmVyc1tpbmRleF0gPSBzZWxmLm1lbWJlcnNbc2VsZi5tZW1iZXJzLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBzZWxmLm1lbWJlcnMubGVuZ3RoLS07CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvbnRhaW5zKHVpbnRTZXQgc3RvcmFnZSBzZWxmLCB1aW50IG90aGVyKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVyRXhpc3RzW290aGVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBsZW5ndGgodWludFNldCBzdG9yYWdlIHNlbGYpIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gc2VsZi5tZW1iZXJzLmxlbmd0aDsKICAgIH0KCgogICAgLy8gdWludDggc2V0CiAgICBzdHJ1Y3QgdWludDhTZXQgewogICAgICAgIHVpbnQ4W10gbWVtYmVyczsKICAgICAgICBtYXBwaW5nICh1aW50OCA9PiBib29sKSBtZW1iZXJFeGlzdHM7CiAgICAgICAgbWFwcGluZyAodWludDggPT4gdWludCkgbWVtYmVySW5kZXg7CiAgICB9CgogICAgZnVuY3Rpb24gaW5zZXJ0KHVpbnQ4U2V0IHN0b3JhZ2Ugc2VsZiwgdWludDggb3RoZXIpIHsKICAgICAgICBpZiAoIXNlbGYubWVtYmVyRXhpc3RzW290aGVyXSkgewogICAgICAgICAgICBzZWxmLm1lbWJlckV4aXN0c1tvdGhlcl0gPSB0cnVlOwogICAgICAgICAgICBzZWxmLm1lbWJlckluZGV4W290aGVyXSA9IHNlbGYubWVtYmVycy5sZW5ndGg7CiAgICAgICAgICAgIHNlbGYubWVtYmVycy5wdXNoKG90aGVyKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlKHVpbnQ4U2V0IHN0b3JhZ2Ugc2VsZiwgdWludDggb3RoZXIpIHsKICAgICAgICBpZiAoc2VsZi5tZW1iZXJFeGlzdHNbb3RoZXJdKSAgewogICAgICAgICAgICBzZWxmLm1lbWJlckV4aXN0c1tvdGhlcl0gPSBmYWxzZTsKICAgICAgICAgICAgdWludCBpbmRleCA9IHNlbGYubWVtYmVySW5kZXhbb3RoZXJdOwogICAgICAgICAgICAvLyBjaGFuZ2UgaW5kZXggb2YgbGFzdCB2YWx1ZSB0byBpbmRleCBvZiBvdGhlciAKICAgICAgICAgICAgc2VsZi5tZW1iZXJJbmRleFtzZWxmLm1lbWJlcnNbc2VsZi5tZW1iZXJzLmxlbmd0aCAtIDFdXSA9IGluZGV4OwogICAgICAgICAgICAvLyBjb3B5IGxhc3QgdmFsdWUgb3ZlciBvdGhlciBhbmQgZGVjcmVtZW50IGxlbmd0aAogICAgICAgICAgICBzZWxmLm1lbWJlcnNbaW5kZXhdID0gc2VsZi5tZW1iZXJzW3NlbGYubWVtYmVycy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgc2VsZi5tZW1iZXJzLmxlbmd0aC0tOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjb250YWlucyh1aW50OFNldCBzdG9yYWdlIHNlbGYsIHVpbnQ4IG90aGVyKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVyRXhpc3RzW290aGVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBsZW5ndGgodWludDhTZXQgc3RvcmFnZSBzZWxmKSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVycy5sZW5ndGg7CiAgICB9CgoKICAgIC8vIGludCBzZXQKICAgIHN0cnVjdCBpbnRTZXQgewogICAgICAgIGludFtdIG1lbWJlcnM7CiAgICAgICAgbWFwcGluZyAoaW50ID0+IGJvb2wpIG1lbWJlckV4aXN0czsKICAgICAgICBtYXBwaW5nIChpbnQgPT4gdWludCkgbWVtYmVySW5kZXg7CiAgICB9CgogICAgZnVuY3Rpb24gaW5zZXJ0KGludFNldCBzdG9yYWdlIHNlbGYsIGludCBvdGhlcikgewogICAgICAgIGlmICghc2VsZi5tZW1iZXJFeGlzdHNbb3RoZXJdKSB7CiAgICAgICAgICAgIHNlbGYubWVtYmVyRXhpc3RzW290aGVyXSA9IHRydWU7CiAgICAgICAgICAgIHNlbGYubWVtYmVySW5kZXhbb3RoZXJdID0gc2VsZi5tZW1iZXJzLmxlbmd0aDsKICAgICAgICAgICAgc2VsZi5tZW1iZXJzLnB1c2gob3RoZXIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmUoaW50U2V0IHN0b3JhZ2Ugc2VsZiwgaW50IG90aGVyKSB7CiAgICAgICAgaWYgKHNlbGYubWVtYmVyRXhpc3RzW290aGVyXSkgIHsKICAgICAgICAgICAgc2VsZi5tZW1iZXJFeGlzdHNbb3RoZXJdID0gZmFsc2U7CiAgICAgICAgICAgIHVpbnQgaW5kZXggPSBzZWxmLm1lbWJlckluZGV4W290aGVyXTsKICAgICAgICAgICAgLy8gY2hhbmdlIGluZGV4IG9mIGxhc3QgdmFsdWUgdG8gaW5kZXggb2Ygb3RoZXIgCiAgICAgICAgICAgIHNlbGYubWVtYmVySW5kZXhbc2VsZi5tZW1iZXJzW3NlbGYubWVtYmVycy5sZW5ndGggLSAxXV0gPSBpbmRleDsKICAgICAgICAgICAgLy8gY29weSBsYXN0IHZhbHVlIG92ZXIgb3RoZXIgYW5kIGRlY3JlbWVudCBsZW5ndGgKICAgICAgICAgICAgc2VsZi5tZW1iZXJzW2luZGV4XSA9IHNlbGYubWVtYmVyc1tzZWxmLm1lbWJlcnMubGVuZ3RoIC0gMV07CiAgICAgICAgICAgIHNlbGYubWVtYmVycy5sZW5ndGgtLTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY29udGFpbnMoaW50U2V0IHN0b3JhZ2Ugc2VsZiwgaW50IG90aGVyKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVyRXhpc3RzW290aGVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBsZW5ndGgoaW50U2V0IHN0b3JhZ2Ugc2VsZikgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBzZWxmLm1lbWJlcnMubGVuZ3RoOwogICAgfQoKCiAgICAvLyBpbnQ4IHNldAogICAgc3RydWN0IGludDhTZXQgewogICAgICAgIGludDhbXSBtZW1iZXJzOwogICAgICAgIG1hcHBpbmcgKGludDggPT4gYm9vbCkgbWVtYmVyRXhpc3RzOwogICAgICAgIG1hcHBpbmcgKGludDggPT4gdWludCkgbWVtYmVySW5kZXg7CiAgICB9CgogICAgZnVuY3Rpb24gaW5zZXJ0KGludDhTZXQgc3RvcmFnZSBzZWxmLCBpbnQ4IG90aGVyKSB7CiAgICAgICAgaWYgKCFzZWxmLm1lbWJlckV4aXN0c1tvdGhlcl0pIHsKICAgICAgICAgICAgc2VsZi5tZW1iZXJFeGlzdHNbb3RoZXJdID0gdHJ1ZTsKICAgICAgICAgICAgc2VsZi5tZW1iZXJJbmRleFtvdGhlcl0gPSBzZWxmLm1lbWJlcnMubGVuZ3RoOwogICAgICAgICAgICBzZWxmLm1lbWJlcnMucHVzaChvdGhlcik7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZShpbnQ4U2V0IHN0b3JhZ2Ugc2VsZiwgaW50OCBvdGhlcikgewogICAgICAgIGlmIChzZWxmLm1lbWJlckV4aXN0c1tvdGhlcl0pICB7CiAgICAgICAgICAgIHNlbGYubWVtYmVyRXhpc3RzW290aGVyXSA9IGZhbHNlOwogICAgICAgICAgICB1aW50IGluZGV4ID0gc2VsZi5tZW1iZXJJbmRleFtvdGhlcl07CiAgICAgICAgICAgIC8vIGNoYW5nZSBpbmRleCBvZiBsYXN0IHZhbHVlIHRvIGluZGV4IG9mIG90aGVyIAogICAgICAgICAgICBzZWxmLm1lbWJlckluZGV4W3NlbGYubWVtYmVyc1tzZWxmLm1lbWJlcnMubGVuZ3RoIC0gMV1dID0gaW5kZXg7CiAgICAgICAgICAgIC8vIGNvcHkgbGFzdCB2YWx1ZSBvdmVyIG90aGVyIGFuZCBkZWNyZW1lbnQgbGVuZ3RoCiAgICAgICAgICAgIHNlbGYubWVtYmVyc1tpbmRleF0gPSBzZWxmLm1lbWJlcnNbc2VsZi5tZW1iZXJzLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBzZWxmLm1lbWJlcnMubGVuZ3RoLS07CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvbnRhaW5zKGludDhTZXQgc3RvcmFnZSBzZWxmLCBpbnQ4IG90aGVyKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVyRXhpc3RzW290aGVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBsZW5ndGgoaW50OFNldCBzdG9yYWdlIHNlbGYpIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gc2VsZi5tZW1iZXJzLmxlbmd0aDsKICAgIH0KCgogICAgLy8gYnl0ZSBzZXQKICAgIHN0cnVjdCBieXRlU2V0IHsKICAgICAgICBieXRlW10gbWVtYmVyczsKICAgICAgICBtYXBwaW5nIChieXRlID0+IGJvb2wpIG1lbWJlckV4aXN0czsKICAgICAgICBtYXBwaW5nIChieXRlID0+IHVpbnQpIG1lbWJlckluZGV4OwogICAgfQoKICAgIGZ1bmN0aW9uIGluc2VydChieXRlU2V0IHN0b3JhZ2Ugc2VsZiwgYnl0ZSBvdGhlcikgewogICAgICAgIGlmICghc2VsZi5tZW1iZXJFeGlzdHNbb3RoZXJdKSB7CiAgICAgICAgICAgIHNlbGYubWVtYmVyRXhpc3RzW290aGVyXSA9IHRydWU7CiAgICAgICAgICAgIHNlbGYubWVtYmVySW5kZXhbb3RoZXJdID0gc2VsZi5tZW1iZXJzLmxlbmd0aDsKICAgICAgICAgICAgc2VsZi5tZW1iZXJzLnB1c2gob3RoZXIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmUoYnl0ZVNldCBzdG9yYWdlIHNlbGYsIGJ5dGUgb3RoZXIpIHsKICAgICAgICBpZiAoc2VsZi5tZW1iZXJFeGlzdHNbb3RoZXJdKSAgewogICAgICAgICAgICBzZWxmLm1lbWJlckV4aXN0c1tvdGhlcl0gPSBmYWxzZTsKICAgICAgICAgICAgdWludCBpbmRleCA9IHNlbGYubWVtYmVySW5kZXhbb3RoZXJdOwogICAgICAgICAgICAvLyBjaGFuZ2UgaW5kZXggb2YgbGFzdCB2YWx1ZSB0byBpbmRleCBvZiBvdGhlciAKICAgICAgICAgICAgc2VsZi5tZW1iZXJJbmRleFtzZWxmLm1lbWJlcnNbc2VsZi5tZW1iZXJzLmxlbmd0aCAtIDFdXSA9IGluZGV4OwogICAgICAgICAgICAvLyBjb3B5IGxhc3QgdmFsdWUgb3ZlciBvdGhlciBhbmQgZGVjcmVtZW50IGxlbmd0aAogICAgICAgICAgICBzZWxmLm1lbWJlcnNbaW5kZXhdID0gc2VsZi5tZW1iZXJzW3NlbGYubWVtYmVycy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgc2VsZi5tZW1iZXJzLmxlbmd0aC0tOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjb250YWlucyhieXRlU2V0IHN0b3JhZ2Ugc2VsZiwgYnl0ZSBvdGhlcikgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzZWxmLm1lbWJlckV4aXN0c1tvdGhlcl07CiAgICB9CgogICAgZnVuY3Rpb24gbGVuZ3RoKGJ5dGVTZXQgc3RvcmFnZSBzZWxmKSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWVtYmVycy5sZW5ndGg7CiAgICB9CgoKICAgIC8vIGJ5dGVzMzIgc2V0CiAgICBzdHJ1Y3QgYnl0ZXMzMlNldCB7CiAgICAgICAgYnl0ZXMzMltdIG1lbWJlcnM7CiAgICAgICAgbWFwcGluZyAoYnl0ZXMzMiA9PiBib29sKSBtZW1iZXJFeGlzdHM7CiAgICAgICAgbWFwcGluZyAoYnl0ZXMzMiA9PiB1aW50KSBtZW1iZXJJbmRleDsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnNlcnQoYnl0ZXMzMlNldCBzdG9yYWdlIHNlbGYsIGJ5dGVzMzIgb3RoZXIpIHsKICAgICAgICBpZiAoIXNlbGYubWVtYmVyRXhpc3RzW290aGVyXSkgewogICAgICAgICAgICBzZWxmLm1lbWJlckV4aXN0c1tvdGhlcl0gPSB0cnVlOwogICAgICAgICAgICBzZWxmLm1lbWJlckluZGV4W290aGVyXSA9IHNlbGYubWVtYmVycy5sZW5ndGg7CiAgICAgICAgICAgIHNlbGYubWVtYmVycy5wdXNoKG90aGVyKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlKGJ5dGVzMzJTZXQgc3RvcmFnZSBzZWxmLCBieXRlczMyIG90aGVyKSB7CiAgICAgICAgaWYgKHNlbGYubWVtYmVyRXhpc3RzW290aGVyXSkgIHsKICAgICAgICAgICAgc2VsZi5tZW1iZXJFeGlzdHNbb3RoZXJdID0gZmFsc2U7CiAgICAgICAgICAgIHVpbnQgaW5kZXggPSBzZWxmLm1lbWJlckluZGV4W290aGVyXTsKICAgICAgICAgICAgLy8gY2hhbmdlIGluZGV4IG9mIGxhc3QgdmFsdWUgdG8gaW5kZXggb2Ygb3RoZXIgCiAgICAgICAgICAgIHNlbGYubWVtYmVySW5kZXhbc2VsZi5tZW1iZXJzW3NlbGYubWVtYmVycy5sZW5ndGggLSAxXV0gPSBpbmRleDsKICAgICAgICAgICAgLy8gY29weSBsYXN0IHZhbHVlIG92ZXIgb3RoZXIgYW5kIGRlY3JlbWVudCBsZW5ndGgKICAgICAgICAgICAgc2VsZi5tZW1iZXJzW2luZGV4XSA9IHNlbGYubWVtYmVyc1tzZWxmLm1lbWJlcnMubGVuZ3RoIC0gMV07CiAgICAgICAgICAgIHNlbGYubWVtYmVycy5sZW5ndGgtLTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY29udGFpbnMoYnl0ZXMzMlNldCBzdG9yYWdlIHNlbGYsIGJ5dGVzMzIgb3RoZXIpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc2VsZi5tZW1iZXJFeGlzdHNbb3RoZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGxlbmd0aChieXRlczMyU2V0IHN0b3JhZ2Ugc2VsZikgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBzZWxmLm1lbWJlcnMubGVuZ3RoOwogICAgfQp9'.
	

]
