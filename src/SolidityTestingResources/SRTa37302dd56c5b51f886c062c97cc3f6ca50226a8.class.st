Class {
	#name : #SRTa37302dd56c5b51f886c062c97cc3f6ca50226a8,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa37302dd56c5b51f886c062c97cc3f6ca50226a8 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7Cgpjb250cmFjdCBvd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBmdW5jdGlvbiBvd25lZCgpICBwdWJsaWMgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KfQoKY29udHJhY3QgdG9rZW5SZWNpcGllbnQgewogICAgZXZlbnQgcmVjZWl2ZWRFdGhlcihhZGRyZXNzIHNlbmRlciwgdWludCBhbW91bnQpOwogICAgZXZlbnQgcmVjZWl2ZWRUb2tlbnMoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKTsKCiAgICBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWMgewogICAgICAgIFRva2VuIHQgPSBUb2tlbihfdG9rZW4pOwogICAgICAgIHJlcXVpcmUodC50cmFuc2ZlckZyb20oX2Zyb20sIHRoaXMsIF92YWx1ZSkpOwogICAgICAgIHJlY2VpdmVkVG9rZW5zKF9mcm9tLCBfdmFsdWUsIF90b2tlbiwgX2V4dHJhRGF0YSk7CiAgICB9CgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSAgcHVibGljIHsKICAgICAgICByZWNlaXZlZEV0aGVyKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9Cn0KCmludGVyZmFjZSBUb2tlbiB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKfQoKY29udHJhY3QgQ29uZ3Jlc3MgaXMgb3duZWQsIHRva2VuUmVjaXBpZW50IHsKICAgIC8vIENvbnRyYWN0IFZhcmlhYmxlcyBhbmQgZXZlbnRzCiAgICB1aW50IHB1YmxpYyBtaW5pbXVtUXVvcnVtOwogICAgdWludCBwdWJsaWMgZGViYXRpbmdQZXJpb2RJbk1pbnV0ZXM7CiAgICBpbnQgcHVibGljIG1ham9yaXR5TWFyZ2luOwogICAgUHJvcG9zYWxbXSBwdWJsaWMgcHJvcG9zYWxzOwogICAgdWludCBwdWJsaWMgbnVtUHJvcG9zYWxzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgbWVtYmVySWQ7CiAgICBNZW1iZXJbXSBwdWJsaWMgbWVtYmVyczsKCiAgICBldmVudCBQcm9wb3NhbEFkZGVkKHVpbnQgcHJvcG9zYWxJRCwgYWRkcmVzcyByZWNpcGllbnQsIHVpbnQgYW1vdW50LCBzdHJpbmcgZGVzY3JpcHRpb24pOwogICAgZXZlbnQgVm90ZWQodWludCBwcm9wb3NhbElELCBib29sIHBvc2l0aW9uLCBhZGRyZXNzIHZvdGVyLCBzdHJpbmcganVzdGlmaWNhdGlvbik7CiAgICBldmVudCBQcm9wb3NhbFRhbGxpZWQodWludCBwcm9wb3NhbElELCBpbnQgcmVzdWx0LCB1aW50IHF1b3J1bSwgYm9vbCBhY3RpdmUpOwogICAgZXZlbnQgTWVtYmVyc2hpcENoYW5nZWQoYWRkcmVzcyBtZW1iZXIsIGJvb2wgaXNNZW1iZXIpOwogICAgZXZlbnQgQ2hhbmdlT2ZSdWxlcyh1aW50IG5ld01pbmltdW1RdW9ydW0sIHVpbnQgbmV3RGViYXRpbmdQZXJpb2RJbk1pbnV0ZXMsIGludCBuZXdNYWpvcml0eU1hcmdpbik7CgogICAgc3RydWN0IFByb3Bvc2FsIHsKICAgICAgICBhZGRyZXNzIHJlY2lwaWVudDsKICAgICAgICB1aW50IGFtb3VudDsKICAgICAgICBzdHJpbmcgZGVzY3JpcHRpb247CiAgICAgICAgdWludCB2b3RpbmdEZWFkbGluZTsKICAgICAgICBib29sIGV4ZWN1dGVkOwogICAgICAgIGJvb2wgcHJvcG9zYWxQYXNzZWQ7CiAgICAgICAgdWludCBudW1iZXJPZlZvdGVzOwogICAgICAgIGludCBjdXJyZW50UmVzdWx0OwogICAgICAgIGJ5dGVzMzIgcHJvcG9zYWxIYXNoOwogICAgICAgIFZvdGVbXSB2b3RlczsKICAgICAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHZvdGVkOwogICAgfQoKICAgIHN0cnVjdCBNZW1iZXIgewogICAgICAgIGFkZHJlc3MgbWVtYmVyOwogICAgICAgIHN0cmluZyBuYW1lOwogICAgICAgIHVpbnQgbWVtYmVyU2luY2U7CiAgICB9CgogICAgc3RydWN0IFZvdGUgewogICAgICAgIGJvb2wgaW5TdXBwb3J0OwogICAgICAgIGFkZHJlc3Mgdm90ZXI7CiAgICAgICAgc3RyaW5nIGp1c3RpZmljYXRpb247CiAgICB9CgogICAgLy8gTW9kaWZpZXIgdGhhdCBhbGxvd3Mgb25seSBzaGFyZWhvbGRlcnMgdG8gdm90ZSBhbmQgY3JlYXRlIG5ldyBwcm9wb3NhbHMKICAgIG1vZGlmaWVyIG9ubHlNZW1iZXJzIHsKICAgICAgICByZXF1aXJlKG1lbWJlcklkW21zZy5zZW5kZXJdICE9IDApOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RvciBmdW5jdGlvbgogICAgICovCiAgICBmdW5jdGlvbiBDb25ncmVzcyAoCiAgICAgICAgdWludCBtaW5pbXVtUXVvcnVtRm9yUHJvcG9zYWxzLAogICAgICAgIHVpbnQgbWludXRlc0ZvckRlYmF0ZSwKICAgICAgICBpbnQgbWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5CiAgICApICBwYXlhYmxlIHB1YmxpYyB7CiAgICAgICAgY2hhbmdlVm90aW5nUnVsZXMobWluaW11bVF1b3J1bUZvclByb3Bvc2FscywgbWludXRlc0ZvckRlYmF0ZSwgbWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5KTsKICAgICAgICAvLyBJdOKAmXMgbmVjZXNzYXJ5IHRvIGFkZCBhbiBlbXB0eSBmaXJzdCBtZW1iZXIKICAgICAgICBhZGRNZW1iZXIoMCwgIiIpOwogICAgICAgIC8vIGFuZCBsZXQncyBhZGQgdGhlIGZvdW5kZXIsIHRvIHNhdmUgYSBzdGVwIGxhdGVyCiAgICAgICAgYWRkTWVtYmVyKG93bmVyLCAnZm91bmRlcicpOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIG1lbWJlcgogICAgICoKICAgICAqIE1ha2UgYHRhcmdldE1lbWJlcmAgYSBtZW1iZXIgbmFtZWQgYG1lbWJlck5hbWVgCiAgICAgKgogICAgICogQHBhcmFtIHRhcmdldE1lbWJlciBldGhlcmV1bSBhZGRyZXNzIHRvIGJlIGFkZGVkCiAgICAgKiBAcGFyYW0gbWVtYmVyTmFtZSBwdWJsaWMgbmFtZSBmb3IgdGhhdCBtZW1iZXIKICAgICAqLwogICAgZnVuY3Rpb24gYWRkTWVtYmVyKGFkZHJlc3MgdGFyZ2V0TWVtYmVyLCBzdHJpbmcgbWVtYmVyTmFtZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgdWludCBpZCA9IG1lbWJlcklkW3RhcmdldE1lbWJlcl07CiAgICAgICAgaWYgKGlkID09IDApIHsKICAgICAgICAgICAgbWVtYmVySWRbdGFyZ2V0TWVtYmVyXSA9IG1lbWJlcnMubGVuZ3RoOwogICAgICAgICAgICBpZCA9IG1lbWJlcnMubGVuZ3RoKys7CiAgICAgICAgfQoKICAgICAgICBtZW1iZXJzW2lkXSA9IE1lbWJlcih7bWVtYmVyOiB0YXJnZXRNZW1iZXIsIG1lbWJlclNpbmNlOiBub3csIG5hbWU6IG1lbWJlck5hbWV9KTsKICAgICAgICBNZW1iZXJzaGlwQ2hhbmdlZCh0YXJnZXRNZW1iZXIsIHRydWUpOwogICAgfQoKICAgIC8qKgogICAgICogUmVtb3ZlIG1lbWJlcgogICAgICoKICAgICAqIEBub3RpY2UgUmVtb3ZlIG1lbWJlcnNoaXAgZnJvbSBgdGFyZ2V0TWVtYmVyYAogICAgICoKICAgICAqIEBwYXJhbSB0YXJnZXRNZW1iZXIgZXRoZXJldW0gYWRkcmVzcyB0byBiZSByZW1vdmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlbW92ZU1lbWJlcihhZGRyZXNzIHRhcmdldE1lbWJlcikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtZW1iZXJJZFt0YXJnZXRNZW1iZXJdICE9IDApOwoKICAgICAgICBmb3IgKHVpbnQgaSA9IG1lbWJlcklkW3RhcmdldE1lbWJlcl07IGk8bWVtYmVycy5sZW5ndGgtMTsgaSsrKXsKICAgICAgICAgICAgbWVtYmVyc1tpXSA9IG1lbWJlcnNbaSsxXTsKICAgICAgICB9CiAgICAgICAgZGVsZXRlIG1lbWJlcnNbbWVtYmVycy5sZW5ndGgtMV07CiAgICAgICAgbWVtYmVycy5sZW5ndGgtLTsKICAgIH0KCiAgICAvKioKICAgICAqIENoYW5nZSB2b3RpbmcgcnVsZXMKICAgICAqCiAgICAgKiBNYWtlIHNvIHRoYXQgcHJvcG9zYWxzIG5lZWQgdG8gYmUgZGlzY3Vzc2VkIGZvciBhdCBsZWFzdCBgbWludXRlc0ZvckRlYmF0ZS82MGAgaG91cnMsCiAgICAgKiBoYXZlIGF0IGxlYXN0IGBtaW5pbXVtUXVvcnVtRm9yUHJvcG9zYWxzYCB2b3RlcywgYW5kIGhhdmUgNTAlICsgYG1hcmdpbk9mVm90ZXNGb3JNYWpvcml0eWAgdm90ZXMgdG8gYmUgZXhlY3V0ZWQKICAgICAqCiAgICAgKiBAcGFyYW0gbWluaW11bVF1b3J1bUZvclByb3Bvc2FscyBob3cgbWFueSBtZW1iZXJzIG11c3Qgdm90ZSBvbiBhIHByb3Bvc2FsIGZvciBpdCB0byBiZSBleGVjdXRlZAogICAgICogQHBhcmFtIG1pbnV0ZXNGb3JEZWJhdGUgdGhlIG1pbmltdW0gYW1vdW50IG9mIGRlbGF5IGJldHdlZW4gd2hlbiBhIHByb3Bvc2FsIGlzIG1hZGUgYW5kIHdoZW4gaXQgY2FuIGJlIGV4ZWN1dGVkCiAgICAgKiBAcGFyYW0gbWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5IHRoZSBwcm9wb3NhbCBuZWVkcyB0byBoYXZlIDUwJSBwbHVzIHRoaXMgbnVtYmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNoYW5nZVZvdGluZ1J1bGVzKAogICAgICAgIHVpbnQgbWluaW11bVF1b3J1bUZvclByb3Bvc2FscywKICAgICAgICB1aW50IG1pbnV0ZXNGb3JEZWJhdGUsCiAgICAgICAgaW50IG1hcmdpbk9mVm90ZXNGb3JNYWpvcml0eQogICAgKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBtaW5pbXVtUXVvcnVtID0gbWluaW11bVF1b3J1bUZvclByb3Bvc2FsczsKICAgICAgICBkZWJhdGluZ1BlcmlvZEluTWludXRlcyA9IG1pbnV0ZXNGb3JEZWJhdGU7CiAgICAgICAgbWFqb3JpdHlNYXJnaW4gPSBtYXJnaW5PZlZvdGVzRm9yTWFqb3JpdHk7CgogICAgICAgIENoYW5nZU9mUnVsZXMobWluaW11bVF1b3J1bSwgZGViYXRpbmdQZXJpb2RJbk1pbnV0ZXMsIG1ham9yaXR5TWFyZ2luKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBQcm9wb3NhbAogICAgICoKICAgICAqIFByb3Bvc2UgdG8gc2VuZCBgd2VpQW1vdW50IC8gMWUxOGAgZXRoZXIgdG8gYGJlbmVmaWNpYXJ5YCBmb3IgYGpvYkRlc2NyaXB0aW9uYC4gYHRyYW5zYWN0aW9uQnl0ZWNvZGUgPyBDb250YWlucyA6IERvZXMgbm90IGNvbnRhaW5gIGNvZGUuCiAgICAgKgogICAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IHdobyB0byBzZW5kIHRoZSBldGhlciB0bwogICAgICogQHBhcmFtIHdlaUFtb3VudCBhbW91bnQgb2YgZXRoZXIgdG8gc2VuZCwgaW4gd2VpCiAgICAgKiBAcGFyYW0gam9iRGVzY3JpcHRpb24gRGVzY3JpcHRpb24gb2Ygam9iCiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25CeXRlY29kZSBieXRlY29kZSBvZiB0cmFuc2FjdGlvbgogICAgICovCiAgICBmdW5jdGlvbiBuZXdQcm9wb3NhbCgKICAgICAgICBhZGRyZXNzIGJlbmVmaWNpYXJ5LAogICAgICAgIHVpbnQgd2VpQW1vdW50LAogICAgICAgIHN0cmluZyBqb2JEZXNjcmlwdGlvbiwKICAgICAgICBieXRlcyB0cmFuc2FjdGlvbkJ5dGVjb2RlCiAgICApCiAgICAgICAgb25seU1lbWJlcnMgcHVibGljCiAgICAgICAgcmV0dXJucyAodWludCBwcm9wb3NhbElEKQogICAgewogICAgICAgIHByb3Bvc2FsSUQgPSBwcm9wb3NhbHMubGVuZ3RoKys7CiAgICAgICAgUHJvcG9zYWwgc3RvcmFnZSBwID0gcHJvcG9zYWxzW3Byb3Bvc2FsSURdOwogICAgICAgIHAucmVjaXBpZW50ID0gYmVuZWZpY2lhcnk7CiAgICAgICAgcC5hbW91bnQgPSB3ZWlBbW91bnQ7CiAgICAgICAgcC5kZXNjcmlwdGlvbiA9IGpvYkRlc2NyaXB0aW9uOwogICAgICAgIHAucHJvcG9zYWxIYXNoID0ga2VjY2FrMjU2KGJlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRyYW5zYWN0aW9uQnl0ZWNvZGUpOwogICAgICAgIHAudm90aW5nRGVhZGxpbmUgPSBub3cgKyBkZWJhdGluZ1BlcmlvZEluTWludXRlcyAqIDEgbWludXRlczsKICAgICAgICBwLmV4ZWN1dGVkID0gZmFsc2U7CiAgICAgICAgcC5wcm9wb3NhbFBhc3NlZCA9IGZhbHNlOwogICAgICAgIHAubnVtYmVyT2ZWb3RlcyA9IDA7CiAgICAgICAgUHJvcG9zYWxBZGRlZChwcm9wb3NhbElELCBiZW5lZmljaWFyeSwgd2VpQW1vdW50LCBqb2JEZXNjcmlwdGlvbik7CiAgICAgICAgbnVtUHJvcG9zYWxzID0gcHJvcG9zYWxJRCsxOwoKICAgICAgICByZXR1cm4gcHJvcG9zYWxJRDsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBwcm9wb3NhbCBpbiBFdGhlcgogICAgICoKICAgICAqIFByb3Bvc2UgdG8gc2VuZCBgZXRoZXJBbW91bnRgIGV0aGVyIHRvIGBiZW5lZmljaWFyeWAgZm9yIGBqb2JEZXNjcmlwdGlvbmAuIGB0cmFuc2FjdGlvbkJ5dGVjb2RlID8gQ29udGFpbnMgOiBEb2VzIG5vdCBjb250YWluYCBjb2RlLgogICAgICogVGhpcyBpcyBhIGNvbnZlbmllbmNlIGZ1bmN0aW9uIHRvIHVzZSBpZiB0aGUgYW1vdW50IHRvIGJlIGdpdmVuIGlzIGluIHJvdW5kIG51bWJlciBvZiBldGhlciB1bml0cy4KICAgICAqCiAgICAgKiBAcGFyYW0gYmVuZWZpY2lhcnkgd2hvIHRvIHNlbmQgdGhlIGV0aGVyIHRvCiAgICAgKiBAcGFyYW0gZXRoZXJBbW91bnQgYW1vdW50IG9mIGV0aGVyIHRvIHNlbmQKICAgICAqIEBwYXJhbSBqb2JEZXNjcmlwdGlvbiBEZXNjcmlwdGlvbiBvZiBqb2IKICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbkJ5dGVjb2RlIGJ5dGVjb2RlIG9mIHRyYW5zYWN0aW9uCiAgICAgKi8KICAgIGZ1bmN0aW9uIG5ld1Byb3Bvc2FsSW5FdGhlcigKICAgICAgICBhZGRyZXNzIGJlbmVmaWNpYXJ5LAogICAgICAgIHVpbnQgZXRoZXJBbW91bnQsCiAgICAgICAgc3RyaW5nIGpvYkRlc2NyaXB0aW9uLAogICAgICAgIGJ5dGVzIHRyYW5zYWN0aW9uQnl0ZWNvZGUKICAgICkKICAgICAgICBvbmx5TWVtYmVycyBwdWJsaWMKICAgICAgICByZXR1cm5zICh1aW50IHByb3Bvc2FsSUQpCiAgICB7CiAgICAgICAgcmV0dXJuIG5ld1Byb3Bvc2FsKGJlbmVmaWNpYXJ5LCBldGhlckFtb3VudCAqIDEgZXRoZXIsIGpvYkRlc2NyaXB0aW9uLCB0cmFuc2FjdGlvbkJ5dGVjb2RlKTsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgcHJvcG9zYWwgY29kZSBtYXRjaGVzCiAgICAgKgogICAgICogQHBhcmFtIHByb3Bvc2FsTnVtYmVyIElEIG51bWJlciBvZiB0aGUgcHJvcG9zYWwgdG8gcXVlcnkKICAgICAqIEBwYXJhbSBiZW5lZmljaWFyeSB3aG8gdG8gc2VuZCB0aGUgZXRoZXIgdG8KICAgICAqIEBwYXJhbSB3ZWlBbW91bnQgYW1vdW50IG9mIGV0aGVyIHRvIHNlbmQKICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbkJ5dGVjb2RlIGJ5dGVjb2RlIG9mIHRyYW5zYWN0aW9uCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNoZWNrUHJvcG9zYWxDb2RlKAogICAgICAgIHVpbnQgcHJvcG9zYWxOdW1iZXIsCiAgICAgICAgYWRkcmVzcyBiZW5lZmljaWFyeSwKICAgICAgICB1aW50IHdlaUFtb3VudCwKICAgICAgICBieXRlcyB0cmFuc2FjdGlvbkJ5dGVjb2RlCiAgICApCiAgICAgICAgY29uc3RhbnQgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCBjb2RlQ2hlY2tzT3V0KQogICAgewogICAgICAgIFByb3Bvc2FsIHN0b3JhZ2UgcCA9IHByb3Bvc2Fsc1twcm9wb3NhbE51bWJlcl07CiAgICAgICAgcmV0dXJuIHAucHJvcG9zYWxIYXNoID09IGtlY2NhazI1NihiZW5lZmljaWFyeSwgd2VpQW1vdW50LCB0cmFuc2FjdGlvbkJ5dGVjb2RlKTsKICAgIH0KCiAgICAvKioKICAgICAqIExvZyBhIHZvdGUgZm9yIGEgcHJvcG9zYWwKICAgICAqCiAgICAgKiBWb3RlIGBzdXBwb3J0c1Byb3Bvc2FsPyBpbiBzdXBwb3J0IG9mIDogYWdhaW5zdGAgcHJvcG9zYWwgI2Bwcm9wb3NhbE51bWJlcmAKICAgICAqCiAgICAgKiBAcGFyYW0gcHJvcG9zYWxOdW1iZXIgbnVtYmVyIG9mIHByb3Bvc2FsCiAgICAgKiBAcGFyYW0gc3VwcG9ydHNQcm9wb3NhbCBlaXRoZXIgaW4gZmF2b3Igb3IgYWdhaW5zdCBpdAogICAgICogQHBhcmFtIGp1c3RpZmljYXRpb25UZXh0IG9wdGlvbmFsIGp1c3RpZmljYXRpb24gdGV4dAogICAgICovCiAgICBmdW5jdGlvbiB2b3RlKAogICAgICAgIHVpbnQgcHJvcG9zYWxOdW1iZXIsCiAgICAgICAgYm9vbCBzdXBwb3J0c1Byb3Bvc2FsLAogICAgICAgIHN0cmluZyBqdXN0aWZpY2F0aW9uVGV4dAogICAgKQogICAgICAgIG9ubHlNZW1iZXJzIHB1YmxpYwogICAgICAgIHJldHVybnMgKHVpbnQgdm90ZUlEKQogICAgewogICAgICAgIFByb3Bvc2FsIHN0b3JhZ2UgcCA9IHByb3Bvc2Fsc1twcm9wb3NhbE51bWJlcl07ICAgICAgICAgLy8gR2V0IHRoZSBwcm9wb3NhbAogICAgICAgIHJlcXVpcmUoIXAudm90ZWRbbXNnLnNlbmRlcl0pOyAgICAgICAgIC8vIElmIGhhcyBhbHJlYWR5IHZvdGVkLCBjYW5jZWwKICAgICAgICBwLnZvdGVkW21zZy5zZW5kZXJdID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhpcyB2b3RlciBhcyBoYXZpbmcgdm90ZWQKICAgICAgICBwLm51bWJlck9mVm90ZXMrKzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmNyZWFzZSB0aGUgbnVtYmVyIG9mIHZvdGVzCiAgICAgICAgaWYgKHN1cHBvcnRzUHJvcG9zYWwpIHsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhleSBzdXBwb3J0IHRoZSBwcm9wb3NhbAogICAgICAgICAgICBwLmN1cnJlbnRSZXN1bHQrKzsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluY3JlYXNlIHNjb3JlCiAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhleSBkb24ndAogICAgICAgICAgICBwLmN1cnJlbnRSZXN1bHQtLTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlY3JlYXNlIHRoZSBzY29yZQogICAgICAgIH0KCiAgICAgICAgLy8gQ3JlYXRlIGEgbG9nIG9mIHRoaXMgZXZlbnQKICAgICAgICBWb3RlZChwcm9wb3NhbE51bWJlciwgIHN1cHBvcnRzUHJvcG9zYWwsIG1zZy5zZW5kZXIsIGp1c3RpZmljYXRpb25UZXh0KTsKICAgICAgICByZXR1cm4gcC5udW1iZXJPZlZvdGVzOwogICAgfQoKICAgIC8qKgogICAgICogRmluaXNoIHZvdGUKICAgICAqCiAgICAgKiBDb3VudCB0aGUgdm90ZXMgcHJvcG9zYWwgI2Bwcm9wb3NhbE51bWJlcmAgYW5kIGV4ZWN1dGUgaXQgaWYgYXBwcm92ZWQKICAgICAqCiAgICAgKiBAcGFyYW0gcHJvcG9zYWxOdW1iZXIgcHJvcG9zYWwgbnVtYmVyCiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25CeXRlY29kZSBvcHRpb25hbDogaWYgdGhlIHRyYW5zYWN0aW9uIGNvbnRhaW5lZCBhIGJ5dGVjb2RlLCB5b3UgbmVlZCB0byBzZW5kIGl0CiAgICAgKi8KICAgIGZ1bmN0aW9uIGV4ZWN1dGVQcm9wb3NhbCh1aW50IHByb3Bvc2FsTnVtYmVyLCBieXRlcyB0cmFuc2FjdGlvbkJ5dGVjb2RlKSBwdWJsaWMgewogICAgICAgIFByb3Bvc2FsIHN0b3JhZ2UgcCA9IHByb3Bvc2Fsc1twcm9wb3NhbE51bWJlcl07CgogICAgICAgIHJlcXVpcmUobm93ID4gcC52b3RpbmdEZWFkbGluZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQgaXMgcGFzdCB0aGUgdm90aW5nIGRlYWRsaW5lCiAgICAgICAgICAgICYmICFwLmV4ZWN1dGVkICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGl0IGhhcyBub3QgYWxyZWFkeSBiZWVuIGV4ZWN1dGVkCiAgICAgICAgICAgICYmIHAucHJvcG9zYWxIYXNoID09IGtlY2NhazI1NihwLnJlY2lwaWVudCwgcC5hbW91bnQsIHRyYW5zYWN0aW9uQnl0ZWNvZGUpICAvLyBhbmQgdGhlIHN1cHBsaWVkIGNvZGUgbWF0Y2hlcyB0aGUgcHJvcG9zYWwKICAgICAgICAgICAgJiYgcC5udW1iZXJPZlZvdGVzID49IG1pbmltdW1RdW9ydW0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgYSBtaW5pbXVtIHF1b3J1bSBoYXMgYmVlbiByZWFjaGVkLi4uCgogICAgICAgIC8vIC4uLnRoZW4gZXhlY3V0ZSByZXN1bHQKCiAgICAgICAgaWYgKHAuY3VycmVudFJlc3VsdCA+IG1ham9yaXR5TWFyZ2luKSB7CiAgICAgICAgICAgIC8vIFByb3Bvc2FsIHBhc3NlZDsgZXhlY3V0ZSB0aGUgdHJhbnNhY3Rpb24KCiAgICAgICAgICAgIHAuZXhlY3V0ZWQgPSB0cnVlOyAvLyBBdm9pZCByZWN1cnNpdmUgY2FsbGluZwogICAgICAgICAgICByZXF1aXJlKHAucmVjaXBpZW50LmNhbGwudmFsdWUocC5hbW91bnQpKHRyYW5zYWN0aW9uQnl0ZWNvZGUpKTsKCiAgICAgICAgICAgIHAucHJvcG9zYWxQYXNzZWQgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFByb3Bvc2FsIGZhaWxlZAogICAgICAgICAgICBwLnByb3Bvc2FsUGFzc2VkID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAvLyBGaXJlIEV2ZW50cwogICAgICAgIFByb3Bvc2FsVGFsbGllZChwcm9wb3NhbE51bWJlciwgcC5jdXJyZW50UmVzdWx0LCBwLm51bWJlck9mVm90ZXMsIHAucHJvcG9zYWxQYXNzZWQpOwogICAgfQp9'.
	

]
