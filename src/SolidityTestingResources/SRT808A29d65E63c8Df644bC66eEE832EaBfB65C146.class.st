Class {
	#name : #SRT808A29d65E63c8Df644bC66eEE832EaBfB65C146,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT808A29d65E63c8Df644bC66eEE832EaBfB65C146 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7Cgpjb250cmFjdCBPd25lZCB7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBvd25lcnM7CgogICAgZnVuY3Rpb24gT3duZWQoKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBvd25lcnNbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lcnN7CiAgICAgICAgYWRkcmVzcyBzZW4gPSBtc2cuc2VuZGVyOwogICAgICAgIHJlcXVpcmUob3duZXJzW21zZy5zZW5kZXJdID09IHRydWUpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXJPcmlnaW57CiAgICAgICAgcmVxdWlyZSh0eC5vcmlnaW4gPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gYWRkT3duZXIoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lcnN7CiAgICAgICAgb3duZXJzW25ld093bmVyXSA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlT3duZXIoKSBwdWJsaWMgb25seU93bmVyc3sKICAgICAgICBvd25lcnNbbXNnLnNlbmRlcl0gPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVPd25lcihhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyewogICAgICAgIG93bmVyc1tuZXdPd25lcl0gPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgbykgcHVibGljIHZpZXcgcmV0dXJucyhib29sKXsKICAgICAgICByZXR1cm4gb3duZXJzW29dID09IHRydWU7CiAgICB9Cn0KCi8vQ2FuIGJlIHVzZWQgYnkgb3RoZXIgY29udHJhY3RzIHRvIGdldCBhcHByb3ZhbCB0byBzcGVuZCB0b2tlbnMKaW50ZXJmYWNlIFRva2VuUmVjaXBpZW50IHsKICAgIGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9leHRyYURhdGEpIGV4dGVybmFsOwp9CgoKY29udHJhY3QgVG9rZW5FUkMyMCBpcyBPd25lZCB7CgogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93YW5jZTsKCiAgICAvLyBUaGlzIGdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIHRva2VuT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHRva2Vucyk7CgogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiB2YWx1ZSk7CgogICAgZnVuY3Rpb24gVG9rZW5FUkMyMCh1aW50MjU2IGluaXRpYWxTdXBwbHksCgkJc3RyaW5nIHRva2VuTmFtZSwKCQlzdHJpbmcgdG9rZW5TeW1ib2wsCgkJdWludDggZGVjKSBwdWJsaWMgewogICAgICAgIC8vIHRvdGFsU3VwcGx5ID0gaW5pdGlhbFN1cHBseSAqIDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpOyAgLy8gVXBkYXRlIHRvdGFsIHN1cHBseSB3aXRoIHRoZSBkZWNpbWFsIGFtb3VudAogICAgICAgIHRvdGFsU3VwcGx5ID0gaW5pdGlhbFN1cHBseTsgLy8gVXBkYXRlIHRvdGFsIHN1cHBseSB3aXRoIHRoZSBkZWNpbWFsIGFtb3VudAogICAgICAgIGJhbGFuY2VPZlt0aGlzXSA9IHRvdGFsU3VwcGx5OyAvLyBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucwogICAgICAgIG5hbWUgPSB0b2tlbk5hbWU7IC8vIFNldCB0aGUgbmFtZSBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIHN5bWJvbCA9IHRva2VuU3ltYm9sOyAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIGRlY2ltYWxzID0gZGVjOwogICAgfQoKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIGludGVybmFsIHsKICAgICAgICAvLyBQcmV2ZW50IHRyYW5zZmVyIHRvIDB4MCBhZGRyZXNzLiBVc2UgYnVybigpIGluc3RlYWQKICAgICAgICByZXF1aXJlKF90byAhPSAweDApOwogICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW19mcm9tXSA+PSBfdmFsdWUpOwogICAgICAgIC8vIENoZWNrIGZvciBvdmVyZmxvd3MKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlID4gYmFsYW5jZU9mW190b10pOwogICAgICAgIC8vIFNhdmUgdGhpcyBmb3IgYW4gYXNzZXJ0aW9uIGluIHRoZSBmdXR1cmUKICAgICAgICB1aW50IHByZXZpb3VzQmFsYW5jZXMgPSBiYWxhbmNlT2ZbX2Zyb21dICsgYmFsYW5jZU9mW190b107CiAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQKICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAvLyBBc3NlcnRzIGFyZSB1c2VkIHRvIHVzZSBzdGF0aWMgYW5hbHlzaXMgdG8gZmluZCBidWdzIGluIHlvdXIgY29kZS4gVGhleSBzaG91bGQgbmV2ZXIgZmFpbAogICAgICAgIGFzc2VydChiYWxhbmNlT2ZbX2Zyb21dICsgYmFsYW5jZU9mW190b10gPT0gcHJldmlvdXNCYWxhbmNlcyk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIHRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpewogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pOyAvLyBDaGVjayBhbGxvd2FuY2UKICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICB0cmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcHVibGljCglyZXR1cm5zKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgVG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IFRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsKICAgICAgICBpZiAoYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgewogICAgICAgICAgICBzcGVuZGVyLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMoYm9vbCBzdWNjZXNzKXsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOyAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOyAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7IC8vIFVwZGF0ZXMgdG90YWxTdXBwbHkKICAgICAgICBCdXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYnVybkZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7IC8vIENoZWNrIGlmIHRoZSB0YXJnZXRlZCBiYWxhbmNlIGlzIGVub3VnaAogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pOyAvLyBDaGVjayBhbGxvd2FuY2UKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsgLy8gU3VidHJhY3QgZnJvbSB0aGUgdGFyZ2V0ZWQgYmFsYW5jZQogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOyAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIncyBhbGxvd2FuY2UKICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7IC8vIFVwZGF0ZSB0b3RhbFN1cHBseQogICAgICAgIEJ1cm4oX2Zyb20sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCgpjb250cmFjdCBNaWZmbGluVG9rZW4gaXMgT3duZWQsIFRva2VuRVJDMjAgewogICAgCiAgICB1aW50OCBwdWJsaWMgdG9rZW5JZDsKICAgIHVpbnQyNTYgZXRoRG9sUmF0ZSA9IDEwMDA7CiAgICB1aW50MjU2IHdlaVJhdGUgPSAxMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgYWRkcmVzcyBleGNoYW5nZTsKICAgIHVpbnQyNTYgcHVibGljIGJ1eVByaWNlOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxDb250cmlidXRpb24gPSAwOwogICAgdWludDI1NiBwdWJsaWMgaGlnaGVzdENvbnRyaWJ1dGlvbiA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyBsb3dlc3RDb250cmlidXRpb24gPSAyICoqIDI1NiAtIDE7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbEJvdWdodCA9IDA7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGZyb3plbkFjY291bnQ7CgogICAgLyogVGhpcyBnZW5lcmF0ZXMgYSBwdWJsaWMgZXZlbnQgb24gdGhlIGJsb2NrY2hhaW4gdGhhdCB3aWxsIG5vdGlmeSBjbGllbnRzICovCiAgICBldmVudCBGcm96ZW5GdW5kcyhhZGRyZXNzIHRhcmdldCwgYm9vbCBmcm96ZW4pOwoKICAgIGZ1bmN0aW9uIE1pZmZsaW5Ub2tlbihhZGRyZXNzIGV4YWQsCgkJdWludDggdGlkLAoJCXVpbnQyNTYgaXNzdWUsCgkJc3RyaW5nIHRva2VuTmFtZSwKCQlzdHJpbmcgdG9rZW5TeW1ib2wsCgkJdWludDggZGVjKQoJCVRva2VuRVJDMjAoaXNzdWUgKiAxMCAqKiB1aW50MjU2KGRlYyksIHRva2VuTmFtZSwgdG9rZW5TeW1ib2wsIGRlYykgcHVibGljIHsKICAgICAgICB0b2tlbklkID0gdGlkOwogICAgICAgIE1pZmZsaW5NYXJrZXQgZSA9IE1pZmZsaW5NYXJrZXQoZXhhZCk7CiAgICAgICAgZS5zZXRUb2tlbih0b2tlbklkLHRoaXMpOwogICAgICAgIGV4Y2hhbmdlID0gZXhhZDsKICAgICAgICBhZGRPd25lcihleGNoYW5nZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5KHVpbnQgX3ZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgdHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgICAgICB0b3RhbEJvdWdodCArPSBfdmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gMHgwKTsgLy8gUHJldmVudCB0cmFuc2ZlciB0byAweDAgYWRkcmVzcy4gVXNlIGJ1cm4oKSBpbnN0ZWFkCiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7IC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPiBiYWxhbmNlT2ZbX3RvXSk7IC8vIENoZWNrIGZvciBvdmVyZmxvd3MKICAgICAgICByZXF1aXJlKCFmcm96ZW5BY2NvdW50W19mcm9tXSk7IC8vIENoZWNrIGlmIHNlbmRlciBpcyBmcm96ZW4KICAgICAgICByZXF1aXJlKCFmcm96ZW5BY2NvdW50W190b10pOyAvLyBDaGVjayBpZiByZWNpcGllbnQgaXMgZnJvemVuCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSAtPSBfdmFsdWU7IC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIC8vIHB1YmxpYyBtZXRob2RzIHRvIGdpdmUgYW5kIHRha2UgdGhhdCBvbmx5IG93bmVycyBjYW4gY2FsbAogICAgZnVuY3Rpb24gZ2l2ZShhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBvbmx5T3duZXJzIHJldHVybnMoYm9vbCBzdWNjZXNzKXsKICAgICAgICB0cmFuc2Zlcih0aGlzLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdGFrZShhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIG9ubHlPd25lcnMgcmV0dXJucyhib29sIHN1Y2Nlc3MpewogICAgICAgIHRyYW5zZmVyKF9mcm9tLCB0aGlzLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIC8gQG5vdGljZSBgZnJlZXplPyBQcmV2ZW50IHwgQWxsb3dgIGB0YXJnZXRgIGZyb20gc2VuZGluZyAmIHJlY2VpdmluZyB0b2tlbnMKICAgIC8vIC8gQHBhcmFtIHRhcmdldCBBZGRyZXNzIHRvIGJlIGZyb3plbgogICAgLy8gLyBAcGFyYW0gZnJlZXplIGVpdGhlciB0byBmcmVlemUgaXQgb3Igbm90CiAgICBmdW5jdGlvbiBmcmVlemVBY2NvdW50KGFkZHJlc3MgdGFyZ2V0LCBib29sIGZyZWV6ZSkgcHVibGljIG9ubHlPd25lcnN7CiAgICAgICAgZnJvemVuQWNjb3VudFt0YXJnZXRdID0gZnJlZXplOwogICAgICAgIEZyb3plbkZ1bmRzKHRhcmdldCwgZnJlZXplKTsKICAgIH0KCiAgICAvLyAvIEBub3RpY2UgQWxsb3cgdXNlcnMgdG8gYnV5IHRva2VucyBmb3IgYG5ld0J1eVByaWNlYCBldGggYW5kIHNlbGwgdG9rZW5zIGZvciBgbmV3U2VsbFByaWNlYCBldGgKICAgIC8vIC8gQHBhcmFtIG5ld0J1eVByaWNlIFByaWNlIHVzZXJzIGNhbiBidXkgZnJvbSB0aGUgY29udHJhY3QKICAgIGZ1bmN0aW9uIHNldEJ1eVByaWNlKHVpbnQyNTYgbmV3QnV5UHJpY2UpIHB1YmxpYyBvbmx5T3duZXJzewogICAgICAgIGJ1eVByaWNlID0gbmV3QnV5UHJpY2U7CiAgICB9CgogICAgLy8gUlVMRSB3ZSBhbHdheXMgbG93ZXIgdGhlIHByaWNlIGFueSB0aW1lIHRoZXJlIGlzIGEgbmV3IGhpZ2ggY29udHJpYnV0aW9uIQogICAgZnVuY3Rpb24gY29udHJpYnV0aW9uKHVpbnQyNTYgYW1vdW50KWludGVybmFsIHJldHVybnMoaW50IGhpZ2hsb3cpewogICAgICAgIG93bmVyLnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgICAgdG90YWxDb250cmlidXRpb24gKz0gbXNnLnZhbHVlOwogICAgICAgIGlmIChhbW91bnQgPiBoaWdoZXN0Q29udHJpYnV0aW9uKSB7CiAgICAgICAgICAgIHVpbnQyNTYgb25lcGVyID0gYnV5UHJpY2UgKiA5OSAvIDEwMDsgLy8gbG93ZXIgYnkgMSUqCiAgICAgICAgICAgIHVpbnQyNTYgZnVsbHBlciA9IGJ1eVByaWNlICogIGhpZ2hlc3RDb250cmlidXRpb24gLyBhbW91bnQ7IC8vIGxvd2VyIGJ5IGhvdyBtdWNoIHlvdSBiZWF0IHRoZSBwcmlvciBjb250cmlidXRpb24KICAgICAgICAgICAgaWYoZnVsbHBlciA+IG9uZXBlcikgYnV5UHJpY2UgPSBmdWxscGVyOwogICAgICAgICAgICBlbHNlIGJ1eVByaWNlID0gb25lcGVyOwogICAgICAgICAgICBoaWdoZXN0Q29udHJpYnV0aW9uID0gYW1vdW50OwogICAgICAgICAgICAvLyBnaXZlIHJld2FyZAogICAgICAgICAgICBNaWZmbGluTWFya2V0KGV4Y2hhbmdlKS5oaWdoQ29udHJpYnV0aW9uQXdhcmQobXNnLnNlbmRlcik7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0gZWxzZSBpZihhbW91bnQgPCBsb3dlc3RDb250cmlidXRpb24pewogICAgICAgICAgICBNaWZmbGluTWFya2V0KGV4Y2hhbmdlKS5sb3dDb250cmlidXRpb25Bd2FyZChtc2cuc2VuZGVyKTsKICAgICAgICAgICAgbG93ZXN0Q29udHJpYnV0aW9uID0gYW1vdW50OwogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfSBlbHNlIHJldHVybiAwOwogICAgfQoKICAgIC8vIHNlbGwgdG9rZW5zIGJhY2sgdG8gc2VuZGVyIHVzaW5nIG93bmVycyBldGhlcgogICAgZnVuY3Rpb24gc2VsbCh1aW50MjU2IGFtb3VudCkgcHVibGljIHsKICAgICAgICB0cmFuc2Zlcihtc2cuc2VuZGVyLCB0aGlzLCBhbW91bnQpOyAvLyBtYWtlcyB0aGUgdHJhbnNmZXJzCiAgICB9Cn0KCgovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKiAgICAgICBDVVNUT00gTUlGRkxJTiBUT0tFTlMgICAgICAgKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCmNvbnRyYWN0IEJlZXRCdWNrIGlzIE93bmVkLCBNaWZmbGluVG9rZW4gewogICAgZnVuY3Rpb24gQmVldEJ1Y2soYWRkcmVzcyBleGNoYW5nZSlNaWZmbGluVG9rZW4oZXhjaGFuZ2UsIDIsIDIwMDAwMDAsICJCZWV0IEJ1Y2siLCAiQkVFVCIsIDgpIHB1YmxpYyB7CiAgICAgICAgYnV5UHJpY2UgPSB3ZWlSYXRlIC8gZXRoRG9sUmF0ZSAvIHVpbnQoMTApICoqIGRlY2ltYWxzOyAvLyAxZAogICAgfQoKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKICAgICAgICBjb250cmlidXRpb24obXNnLnZhbHVlKTsKICAgICAgICB1aW50MjU2IGFtb3VudFRvR2l2ZSA9IDA7CiAgICAgICAgdWludDI1NiBwcmljZSA9IGJ1eVByaWNlOwogICAgICAgIGlmICh0b3RhbEJvdWdodCA8IDEwMDAwKSB7CiAgICAgICAgICAgIHByaWNlIC09IHByaWNlICogMTUgLyAxMDA7CiAgICAgICAgfSBlbHNlIGlmICh0b3RhbEJvdWdodCA8IDUwMDAwKSB7CiAgICAgICAgICAgIHByaWNlIC09IHByaWNlIC8gMTA7CiAgICAgICAgfSBlbHNlIGlmICh0b3RhbEJvdWdodCA8IDEwMDAwMCkgewogICAgICAgICAgICBwcmljZSAtPSBwcmljZSAvIDIwOwogICAgICAgIH0gZWxzZSBpZiAodG90YWxCb3VnaHQgPCAyMDAwMDApIHsKICAgICAgICAgICAgcHJpY2UgLT0gcHJpY2UgLyAxMDA7CiAgICAgICAgfQogICAgICAgIGFtb3VudFRvR2l2ZSArPSBtc2cudmFsdWUgLyBwcmljZTsKICAgICAgICBidXkoYW1vdW50VG9HaXZlKTsKICAgIH0KfQoKCmNvbnRyYWN0IE5hcE5pY2tlbCBpcyBPd25lZCwgTWlmZmxpblRva2VuIHsKCiAgICBmdW5jdGlvbiBOYXBOaWNrZWwoYWRkcmVzcyBleGNoYW5nZSkKCU1pZmZsaW5Ub2tlbihleGNoYW5nZSwgMywgMTAwMDAwMDAwMCwgIk5hcCBOaWNrZWwiLCAiTkFQUCIsIDgpIHB1YmxpYyB7CiAgICAgICAgYnV5UHJpY2UgPSB3ZWlSYXRlIC8gZXRoRG9sUmF0ZSAvICB1aW50KDEwKSAqKiBkZWNpbWFscyAvIDIwOyAvLyA1YwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKICAgICAgICBjb250cmlidXRpb24obXNnLnZhbHVlKTsKICAgICAgICB1aW50MjU2IHByaWNlID0gYnV5UHJpY2U7CiAgICAgICAgdWludDI1NiBlc3RUaW1lID0gYmxvY2sudGltZXN0YW1wIC0gNSAqIDYwICogNjA7CiAgICAgICAgdWludDggbW9udGg7CiAgICAgICAgdWludDggZGF5OwogICAgICAgIHVpbnQ4IGhvdXI7CiAgICAgICAgdWludDggd2Vla2RheTsKICAgICAgICAoLCBtb250aCxkYXksaG91ciwsLHdlZWtkYXkpID0gcGFyc2VUaW1lc3RhbXBQYXJ0cyhlc3RUaW1lKTsKICAgICAgICBpZiAobW9udGggPT0gNCAmJiBkYXkgPT0gMjYpIHsKICAgICAgICAgICAgLy8gaXRzIHByZXR6ZWwgZGF5CiAgICAgICAgICAgIHByaWNlICs9IGJ1eVByaWNlIC8gNTsKICAgICAgICB9IGVsc2UgaWYgKHdlZWtkYXkgPT0gMCB8fCB3ZWVrZGF5ID09IDYpIHsKICAgICAgICAgICAgLy8gYnV5aW5nIGR1cmluZyB3ZWVrZW5kLCBnZXQgb2ZmIG15IHByb3BlcnR5CiAgICAgICAgICAgIHByaWNlICs9IGJ1eVByaWNlICogMTUgLyAxMDA7CiAgICAgICAgfSBlbHNlIGlmIChob3VyIDwgOSB8fCBob3VyID49IDE3KSB7CiAgICAgICAgICAgIC8vIGJ1eWluZyBvdXRzaWRlIG9mIHdvcmsgaG91cnMsIGltIGluIG15IGhvdCB0dWIKICAgICAgICAgICAgcHJpY2UgKz0gYnV5UHJpY2UgLyAxMDsKICAgICAgICB9IGVsc2UgaWYgKGhvdXIgPiAxMiAmJiBob3VyIDwgMTMpIHsKICAgICAgICAgICAgLy8gYnV5aW5nIGR1cmluZyBsdW5jaCwgbGVhdmUgbWUgYWxvbmUgZGFtbWl0CiAgICAgICAgICAgIHByaWNlICs9IGJ1eVByaWNlIC8gMjA7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgYW1vdW50VG9HaXZlID0gMDsKICAgICAgICBhbW91bnRUb0dpdmUgKz0gbXNnLnZhbHVlIC8gcHJpY2U7CiAgICAgICAgYnV5KGFtb3VudFRvR2l2ZSk7CiAgICB9CiAgICAKICAgIHN0cnVjdCBfRGF0ZVRpbWUgewogICAgICAgICAgICAgICAgdWludDE2IHllYXI7CiAgICAgICAgICAgICAgICB1aW50OCBtb250aDsKICAgICAgICAgICAgICAgIHVpbnQ4IGRheTsKICAgICAgICAgICAgICAgIHVpbnQ4IGhvdXI7CiAgICAgICAgICAgICAgICB1aW50OCBtaW51dGU7CiAgICAgICAgICAgICAgICB1aW50OCBzZWNvbmQ7CiAgICAgICAgICAgICAgICB1aW50OCB3ZWVrZGF5OwogICAgICAgIH0KCiAgICAgICAgdWludCBjb25zdGFudCBEQVlfSU5fU0VDT05EUyA9IDg2NDAwOwogICAgICAgIHVpbnQgY29uc3RhbnQgWUVBUl9JTl9TRUNPTkRTID0gMzE1MzYwMDA7CiAgICAgICAgdWludCBjb25zdGFudCBMRUFQX1lFQVJfSU5fU0VDT05EUyA9IDMxNjIyNDAwOwoKICAgICAgICB1aW50IGNvbnN0YW50IEhPVVJfSU5fU0VDT05EUyA9IDM2MDA7CiAgICAgICAgdWludCBjb25zdGFudCBNSU5VVEVfSU5fU0VDT05EUyA9IDYwOwoKICAgICAgICB1aW50MTYgY29uc3RhbnQgT1JJR0lOX1lFQVIgPSAxOTcwOwoKICAgICAgICBmdW5jdGlvbiBpc0xlYXBZZWFyKHVpbnQxNiB5ZWFyKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgICAgICAgICBpZiAoeWVhciAlIDQgIT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoeWVhciAlIDEwMCAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHllYXIgJSA0MDAgIT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGxlYXBZZWFyc0JlZm9yZSh1aW50IHllYXIpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICAgICAgICAgIHllYXIgLT0gMTsKICAgICAgICAgICAgICAgIHJldHVybiB5ZWFyIC8gNCAtIHllYXIgLyAxMDAgKyB5ZWFyIC8gNDAwOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0RGF5c0luTW9udGgodWludDggbW9udGgsIHVpbnQxNiB5ZWFyKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50OCkgewogICAgICAgICAgICAgICAgaWYgKG1vbnRoID09IDEgfHwgbW9udGggPT0gMyB8fCBtb250aCA9PSA1IHx8IG1vbnRoID09IDcgfHwgbW9udGggPT0gOCB8fCBtb250aCA9PSAxMCB8fCBtb250aCA9PSAxMikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMzE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChtb250aCA9PSA0IHx8IG1vbnRoID09IDYgfHwgbW9udGggPT0gOSB8fCBtb250aCA9PSAxMSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMzA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0xlYXBZZWFyKHllYXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAyOTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHBhcnNlVGltZXN0YW1wUGFydHModWludCB0aW1lc3RhbXApIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQxNiB5ZWFyLHVpbnQ4IG1vbnRoLHVpbnQ4IGRheSwgdWludDggaG91cix1aW50OCBtaW51dGUsdWludDggc2Vjb25kLHVpbnQ4IHdlZWtkYXkpIHsKICAgICAgICAgICAgX0RhdGVUaW1lIG1lbW9yeSBkdCA9IHBhcnNlVGltZXN0YW1wKHRpbWVzdGFtcCk7CiAgICAgICAgICAgIHJldHVybiAoZHQueWVhcixkdC5tb250aCxkdC5kYXksZHQuaG91cixkdC5taW51dGUsZHQuc2Vjb25kLGR0LndlZWtkYXkpOwogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIHBhcnNlVGltZXN0YW1wKHVpbnQgdGltZXN0YW1wKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKF9EYXRlVGltZSBkdCkgewogICAgICAgICAgICAgICAgdWludCBzZWNvbmRzQWNjb3VudGVkRm9yID0gMDsKICAgICAgICAgICAgICAgIHVpbnQgYnVmOwogICAgICAgICAgICAgICAgdWludDggaTsKCiAgICAgICAgICAgICAgICAvLyBZZWFyCiAgICAgICAgICAgICAgICBkdC55ZWFyID0gZ2V0WWVhcih0aW1lc3RhbXApOwogICAgICAgICAgICAgICAgYnVmID0gbGVhcFllYXJzQmVmb3JlKGR0LnllYXIpIC0gbGVhcFllYXJzQmVmb3JlKE9SSUdJTl9ZRUFSKTsKCiAgICAgICAgICAgICAgICBzZWNvbmRzQWNjb3VudGVkRm9yICs9IExFQVBfWUVBUl9JTl9TRUNPTkRTICogYnVmOwogICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciArPSBZRUFSX0lOX1NFQ09ORFMgKiAoZHQueWVhciAtIE9SSUdJTl9ZRUFSIC0gYnVmKTsKCiAgICAgICAgICAgICAgICAvLyBNb250aAogICAgICAgICAgICAgICAgdWludCBzZWNvbmRzSW5Nb250aDsKICAgICAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPD0gMTI7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzSW5Nb250aCA9IERBWV9JTl9TRUNPTkRTICogZ2V0RGF5c0luTW9udGgoaSwgZHQueWVhcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWNvbmRzSW5Nb250aCArIHNlY29uZHNBY2NvdW50ZWRGb3IgPiB0aW1lc3RhbXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdC5tb250aCA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciArPSBzZWNvbmRzSW5Nb250aDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBEYXkKICAgICAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPD0gZ2V0RGF5c0luTW9udGgoZHQubW9udGgsIGR0LnllYXIpOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERBWV9JTl9TRUNPTkRTICsgc2Vjb25kc0FjY291bnRlZEZvciA+IHRpbWVzdGFtcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR0LmRheSA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciArPSBEQVlfSU5fU0VDT05EUzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBIb3VyCiAgICAgICAgICAgICAgICBkdC5ob3VyID0gZ2V0SG91cih0aW1lc3RhbXApOwoKICAgICAgICAgICAgICAgIC8vIE1pbnV0ZQogICAgICAgICAgICAgICAgZHQubWludXRlID0gZ2V0TWludXRlKHRpbWVzdGFtcCk7CgogICAgICAgICAgICAgICAgLy8gU2Vjb25kCiAgICAgICAgICAgICAgICBkdC5zZWNvbmQgPSBnZXRTZWNvbmQodGltZXN0YW1wKTsKCiAgICAgICAgICAgICAgICAvLyBEYXkgb2Ygd2Vlay4KICAgICAgICAgICAgICAgIGR0LndlZWtkYXkgPSBnZXRXZWVrZGF5KHRpbWVzdGFtcCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRZZWFyKHVpbnQgdGltZXN0YW1wKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50MTYpIHsKICAgICAgICAgICAgICAgIHVpbnQgc2Vjb25kc0FjY291bnRlZEZvciA9IDA7CiAgICAgICAgICAgICAgICB1aW50MTYgeWVhcjsKICAgICAgICAgICAgICAgIHVpbnQgbnVtTGVhcFllYXJzOwoKICAgICAgICAgICAgICAgIC8vIFllYXIKICAgICAgICAgICAgICAgIHllYXIgPSB1aW50MTYoT1JJR0lOX1lFQVIgKyB0aW1lc3RhbXAgLyBZRUFSX0lOX1NFQ09ORFMpOwogICAgICAgICAgICAgICAgbnVtTGVhcFllYXJzID0gbGVhcFllYXJzQmVmb3JlKHllYXIpIC0gbGVhcFllYXJzQmVmb3JlKE9SSUdJTl9ZRUFSKTsKCiAgICAgICAgICAgICAgICBzZWNvbmRzQWNjb3VudGVkRm9yICs9IExFQVBfWUVBUl9JTl9TRUNPTkRTICogbnVtTGVhcFllYXJzOwogICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciArPSBZRUFSX0lOX1NFQ09ORFMgKiAoeWVhciAtIE9SSUdJTl9ZRUFSIC0gbnVtTGVhcFllYXJzKTsKCiAgICAgICAgICAgICAgICB3aGlsZSAoc2Vjb25kc0FjY291bnRlZEZvciA+IHRpbWVzdGFtcCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNMZWFwWWVhcih1aW50MTYoeWVhciAtIDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHNBY2NvdW50ZWRGb3IgLT0gTEVBUF9ZRUFSX0lOX1NFQ09ORFM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciAtPSBZRUFSX0lOX1NFQ09ORFM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgeWVhciAtPSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHllYXI7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRNb250aCh1aW50IHRpbWVzdGFtcCkgcHVibGljIHB1cmUgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZVRpbWVzdGFtcCh0aW1lc3RhbXApLm1vbnRoOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0RGF5KHVpbnQgdGltZXN0YW1wKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50OCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlVGltZXN0YW1wKHRpbWVzdGFtcCkuZGF5OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0SG91cih1aW50IHRpbWVzdGFtcCkgcHVibGljIHB1cmUgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB1aW50OCgodGltZXN0YW1wIC8gNjAgLyA2MCkgJSAyNCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRNaW51dGUodWludCB0aW1lc3RhbXApIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdWludDgoKHRpbWVzdGFtcCAvIDYwKSAlIDYwKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldFNlY29uZCh1aW50IHRpbWVzdGFtcCkgcHVibGljIHB1cmUgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB1aW50OCh0aW1lc3RhbXAgJSA2MCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRXZWVrZGF5KHVpbnQgdGltZXN0YW1wKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50OCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHVpbnQ4KCh0aW1lc3RhbXAgLyBEQVlfSU5fU0VDT05EUyArIDQpICUgNyk7CiAgICAgICAgfQoKfQoKCmNvbnRyYWN0IFF1YWJpdHlRdWFydGVyIGlzIE93bmVkLCBNaWZmbGluVG9rZW4gewogICAgdWludCBsYXN0Q29udHJpYnV0aW9uVGltZSA9IDA7CgogICAgZnVuY3Rpb24gUXVhYml0eVF1YXJ0ZXIoYWRkcmVzcyBleGNoYW5nZSkKCU1pZmZsaW5Ub2tlbihleGNoYW5nZSwgNCwgNDIwMDAwMDAwLCAiUXVhYml0eSBRdWFydGVyIiwgIlFVQUIiLCA4KSBwdWJsaWMgewogICAgICAgIGJ1eVByaWNlID0gd2VpUmF0ZSAvIGV0aERvbFJhdGUgLyB1aW50KDEwKSAqKiBkZWNpbWFscyAvIDQ7IC8vIDI1YwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKICAgICAgICBjb250cmlidXRpb24obXNnLnZhbHVlKTsKICAgICAgICB1aW50MjU2IGFtb3VudFRvR2l2ZSA9IDA7CiAgICAgICAgYW1vdW50VG9HaXZlICs9IG1zZy52YWx1ZSAvIGJ1eVByaWNlOwogICAgICAgIHVpbnQyNTYgdGltZSA9IGJsb2NrLnRpbWVzdGFtcDsKICAgICAgICB1aW50MjU2IGRpZmYgPSB0aW1lIC0gbGFzdENvbnRyaWJ1dGlvblRpbWUgLyA2MCAvIDYwOwogICAgICAgIHVpbnQyNTYgY2hhbmNlID0gMDsKICAgICAgICBpZiAoZGlmZiA+IDk2KQoJCQljaGFuY2UgPSA1MDsKICAgICAgICBpZiAoZGlmZiA+IDQ4KQoJCQljaGFuY2UgPSA0MDsKICAgICAgICBlbHNlIGlmIChkaWZmID4gMjQpCgkJCWNoYW5jZSA9IDMwOwogICAgICAgIGVsc2UgaWYgKGRpZmYgPiAxMikKCQkJY2hhbmNlID0gMjA7CiAgICAgICAgZWxzZSBpZiAoZGlmZiA+IDEpCgkJCWNoYW5jZSA9IDEwOwogICAgICAgIGVsc2UgY2hhbmNlID0gNTsKICAgICAgICBpZiAoY2hhbmNlID4gMCkgewogICAgICAgICAgICB1aW50MjU2IGxhc3RCbG9ja0hhc2ggPSB1aW50MjU2KGtlY2NhazI1NihibG9jay5ibG9ja2hhc2goYmxvY2subnVtYmVyIC0gMSksIHVpbnQ4KDApKSk7CiAgICAgICAgICAgIGlmIChsYXN0QmxvY2tIYXNoICUgMTAwIDwgY2hhbmNlKSB7CiAgICAgICAgICAgICAgICAvLyBzdG9sZSAxMCUgZXh0cmEhCiAgICAgICAgICAgICAgICBhbW91bnRUb0dpdmUgKz0gYW1vdW50VG9HaXZlIC8gMTA7CiAgICAgICAgICAgIH19CiAgICAgICAgYnV5KGFtb3VudFRvR2l2ZSk7CiAgICB9Cn0KCgpjb250cmFjdCBLZWxldmluS29pbiBpcyBPd25lZCwgTWlmZmxpblRva2VuIHsKICAgIAogICAgZnVuY3Rpb24gS2VsZXZpbktvaW4oYWRkcmVzcyBleGNoYW5nZSkKCU1pZmZsaW5Ub2tlbihleGNoYW5nZSwgNSwgNjkwMDAwMDAsICJLZWxldmluIEtvaW4iLCAiS0xFViIsIDgpIHB1YmxpYyB7CiAgICAgICAgYnV5UHJpY2UgPSB3ZWlSYXRlIC8gZXRoRG9sUmF0ZSAvIHVpbnQoMTApICoqIGRlY2ltYWxzIC8gNTA7IC8vIDJjCiAgICB9CgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSBwdWJsaWMgewogICAgICAgIGNvbnRyaWJ1dGlvbihtc2cudmFsdWUpOwogICAgICAgIC8vIGhhdmUgdG8gYmFsYW5jZSB0aGUgYm9va3MhCiAgICAgICAgdWludDI1NiBsYXN0QmxvY2tIYXNoID0gdWludDI1NihrZWNjYWsyNTYoYmxvY2suYmxvY2toYXNoKGJsb2NrLm51bWJlciAtIDEpLCB1aW50OCgwKSkpOwogICAgICAgIHVpbnQyNTYgbmV3UHJpY2UgPSBidXlQcmljZSArICgobGFzdEJsb2NrSGFzaCAlIChidXlQcmljZSAqIDY5IC8gMTAwMCkpIC0gKGJ1eVByaWNlICogNjkgKiAyIC8gMTAwMCkpOwogICAgICAgIGJ1eVByaWNlID0gbmV3UHJpY2U7CiAgICAgICAgdWludDI1NiBhbW91bnRUb0dpdmUgPSBtc2cudmFsdWUgLyBidXlQcmljZTsKICAgICAgICBpZiAoYnV5UHJpY2UgJSBtc2cudmFsdWUgPT0gMCkKCQkJYW1vdW50VG9HaXZlICs9IGFtb3VudFRvR2l2ZSAqIDY5IC8gMTAwMDsgLy8gYWRkIDYuOSUKICAgICAgICBidXkoYW1vdW50VG9HaXZlKTsKICAgIH0KfQoKCmNvbnRyYWN0IE5uZXhOb3RlIGlzIE93bmVkLCBNaWZmbGluVG9rZW4gewogICAgCiAgICBmdW5jdGlvbiBObmV4Tm90ZShhZGRyZXNzIGV4Y2hhbmdlKSAKCU1pZmZsaW5Ub2tlbihleGNoYW5nZSwgNiwgNjY2MDAwMDAwLCAiTm5leCBOb3RlIiwgIk5ORVgiLCA4KSBwdWJsaWMgewogICAgICAgIGJ1eVByaWNlID0gd2VpUmF0ZSAvIGV0aERvbFJhdGUgLyB1aW50KDEwKSAqKiBkZWNpbWFscyAvIDEwMDsgLy8gMWMKICAgIH0KCiAgICAvLyBEbyB5b3UgcmVhbGx5IHdhbnQgYSBObmV4IE5vdGU/CiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHB1YmxpYyB7CiAgICAgICAgLy8gdGhpcyBpcyB0aGUgb25seSBwbGFjZSBJIGhhdmUgaHVtYW4gY29udGFjdCwgc28gdGhlIG1vcmUgdGhlIGJldHRlcgogICAgICAgIGNvbnRyaWJ1dGlvbihtc2cudmFsdWUpOwogICAgICAgIC8vIHlvdSBjYW4gZ2V0IHVwIHRvIGEgNTAlIGRpc2NvdW50CiAgICAgICAgdWludCBtYXhEaXNjb3VudFJhbmdlID0gYnV5UHJpY2UgKiAxMDA7CiAgICAgICAgdWludCBkaXNjb3VudFBlcmNlbnQ7CiAgICAgICAgaWYobXNnLnZhbHVlID49IG1heERpc2NvdW50UmFuZ2UpIGRpc2NvdW50UGVyY2VudCA9IDEwMDsKICAgICAgICBlbHNlIGRpc2NvdW50UGVyY2VudCA9IG1zZy52YWx1ZSAvIG1heERpc2NvdW50UmFuZ2UgKiAxMDA7CiAgICAgICAgdWludCBwcmljZSA9IGJ1eVByaWNlIC0gKGJ1eVByaWNlIC8gMikgKiAoZGlzY291bnRQZXJjZW50IC8gMTAwKTsKICAgICAgICB1aW50IGFtb3VudFRvR2l2ZSA9IG1zZy52YWx1ZSAvIHByaWNlOwogICAgICAgIGJ1eShhbW91bnRUb0dpdmUpOwogICAgfQp9CgoKY29udHJhY3QgRHVuZGllRG9sbGFyIGlzIE93bmVkLCBNaWZmbGluVG9rZW4gewogICAgbWFwcGluZyh1aW50OCA9PiBzdHJpbmcpIHB1YmxpYyBhd2FyZHM7CiAgICB1aW50OCBwdWJsaWMgYXdhcmRzQ291bnQ7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyh1aW50OCA9PiB1aW50MjU2KSkgcHVibGljIGF3YXJkc09mOwoKICAgIGZ1bmN0aW9uIER1bmRpZURvbGxhcihhZGRyZXNzIGV4Y2hhbmdlKQoJTWlmZmxpblRva2VuKGV4Y2hhbmdlLCAxLCAxNzI1MDAwMDAwLCAiRHVuZGllIERvbGxhciIsICJEVU5EIiwgMCkgcHVibGljIHsKICAgICAgICBidXlQcmljZSA9IHdlaVJhdGUgLyBldGhEb2xSYXRlICogMTA7IC8vIDEwZAogICAgICAgIGF3YXJkc1swXSA9ICJCZXN0IERhZCBBd2FyZCI7CiAgICAgICAgYXdhcmRzWzFdID0gIkJlc3QgTW9tIEF3YXJkIjsKICAgICAgICBhd2FyZHNbMl0gPSAiSG90dGVzdCBpbiB0aGUgT2ZmaWNlIEF3YXJkIjsKICAgICAgICBhd2FyZHNbM10gPSAiRGlhYmV0ZXMgQXdhcmQiOwogICAgICAgIGF3YXJkc1s0XSA9ICJQcm9taXNpbmcgQXNzaXN0YW50IE1hbmFnZXIgQXdhcmQiOwogICAgICAgIGF3YXJkc1s1XSA9ICJDdXRlc3QgUmVkaGVhZCBpbiB0aGUgT2ZmaWNlIEF3YXJkIjsKICAgICAgICBhd2FyZHNbNl0gPSAiQmVzdCBIb3N0IEF3YXJkIjsKICAgICAgICBhd2FyZHNbN10gPSAiRG9vYmllIERvb2JpZSBQb3RoZWFkIFN0b25lciBvZiB0aGUgWWVhciBBd2FyZCI7CiAgICAgICAgYXdhcmRzWzhdID0gIkV4dHJlbWUgUmVwdWxzaXZlbmVzcyBBd2FyZCI7CiAgICAgICAgYXdhcmRzWzldID0gIlJlZGVmaW5pbmcgQmVhdXR5IEF3YXJkIjsKICAgICAgICBhd2FyZHNbMTBdID0gIktpbmQgb2YgQSBCaXRjaCBBd2FyZCI7CiAgICAgICAgYXdhcmRzWzExXSA9ICJNb3ZpbmcgT24gVXAgQXdhcmQiOwogICAgICAgIGF3YXJkc1sxMl0gPSAiV29yc3QgU2FsZXNtYW4gb2YgdGhlIFllYXIiOwogICAgICAgIGF3YXJkc1sxM10gPSAiQnVzaWVzdCBCZWF2ZXIgQXdhcmQiOwogICAgICAgIGF3YXJkc1sxNF0gPSAiVGlnaHQtQXNzIEF3YXJkIjsKICAgICAgICBhd2FyZHNbMTVdID0gIlNwaWN5IEN1cnJ5IEF3YXJkIjsKICAgICAgICBhd2FyZHNbMTZdID0gIkRvbid0IEdvIGluIFRoZXJlIEFmdGVyIE1lIjsKICAgICAgICBhd2FyZHNbMTddID0gIkZpbmUgV29yayBBd2FyZCI7CiAgICAgICAgYXdhcmRzWzE4XSA9ICJXaGl0ZXN0IFNuZWFrZXJzIEF3YXJkIjsKICAgICAgICBhd2FyZHNbMTldID0gIkdyZWF0IFdvcmsgQXdhcmQiOwogICAgICAgIGF3YXJkc1syMF0gPSAiTG9uZ2VzdCBFbmdhZ2VtZW50IEF3YXJkIjsKICAgICAgICBhd2FyZHNbMjFdID0gIlNob3cgTWUgdGhlIE1vbmV5IEF3YXJkIjsKICAgICAgICBhd2FyZHNbMjJdID0gIkJlc3QgQm9zcyBBd2FyZCI7CiAgICAgICAgYXdhcmRzWzIzXSA9ICJHcmFjZSBVbmRlciBGaXJlIEF3YXJkIjsKICAgICAgICBhd2FyZHNDb3VudCA9IDI0OwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZEF3YXJkKHN0cmluZyBuYW1lKSBwdWJsaWMgb25seU93bmVyc3sKICAgICAgICBhd2FyZHNbYXdhcmRzQ291bnRdID0gbmFtZTsKICAgICAgICBhd2FyZHNDb3VudCsrOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKICAgICAgICBjb250cmlidXRpb24obXNnLnZhbHVlKTsKICAgICAgICB1aW50MjU2IGFtb3VudFRvR2l2ZSA9IG1zZy52YWx1ZSAvIGJ1eVByaWNlOwogICAgICAgIGJ1eShhbW91bnRUb0dpdmUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIHN1cGVyLnRyYW5zZmVyKF9mcm9tLF90byxfdmFsdWUpOwogICAgICAgIHRyYW5zZmVyQXdhcmRzKF9mcm9tLF90byxfdmFsdWUpOwogICAgfQoKCS8vVGhpcyBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB0aGUgYWJvdmUgZnVuY3Rpb24KICAgIGZ1bmN0aW9uIHRyYW5zZmVyQXdhcmRzKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQyNTYgbGFzdEJsb2NrSGFzaCA9IHVpbnQyNTYoa2VjY2FrMjU2KGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXIgLSAxKSwgdWludDgoMCkpKSArIF92YWx1ZTsKICAgICAgICB1aW50OCBhd2FyZCA9IHVpbnQ4KGxhc3RCbG9ja0hhc2ggJSBhd2FyZHNDb3VudCk7CiAgICAgICAgaWYoX2Zyb20gPT0gYWRkcmVzcyh0aGlzKSkgewogICAgICAgICAgICAvL2RvbnQgbmVlZCB0byBsb29wIHRocm91Z2ggYXdhcmRzCiAgICAgICAgICAgIHRyYW5zZmVyQXdhcmRzKF9mcm9tLF90byxhd2FyZCxfdmFsdWUpOwoKICAgICAgICB9IGVsc2UgeyAvLyBvbmx5IHRha2UgYXdhcmRzIHRoYXQgdGhleSBoYXZlCiAgICAgICAgICAgIHVpbnQgbGVmdCA9IF92YWx1ZTsKICAgICAgCiAgICAgIAkJZm9yICh1aW50OCBpID0gMDsgaSA8IGF3YXJkc0NvdW50OyBpKyspIHsKICAgICAgICAgICAgICAgIHVpbnQyNTYgYmFsID0gYXdhcmRCYWxhbmNlT2YoX2Zyb20sYXdhcmQpOwogICAgICAgICAgICAgICAgaWYoYmFsID4gMCl7CiAgICAgICAgICAgICAgICAgICAgaWYoYmFsIDwgbGVmdCkgewogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlckF3YXJkcyhfZnJvbSxfdG8sYXdhcmQsYmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCAtPSBiYWw7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAJdHJhbnNmZXJBd2FyZHMoX2Zyb20sX3RvLGF3YXJkLGxlZnQpOwogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihsZWZ0ID09IDApIGJyZWFrOwogICAgICAgICAgICAgICAgYXdhcmQgKys7CiAgICAgICAgICAgICAgICBpZihhd2FyZCA9PSBhd2FyZHNDb3VudCAtIDEpIGF3YXJkID0gMDsgLy8gcmVzZXQKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXJBd2FyZHMoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50OCBhd2FyZCAsIHVpbnQgdmFsdWUpIGludGVybmFsIHsKICAgICAgICAvL2RvbnQgdHJ5IHRvIHRha2Ugc3BlY2lmaWMgYXdhcmRzIGZyb20gdGhlIGNvbnRyYWN0CiAgICAgICAgaWYoZnJvbSAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgICAgICAgIHJlcXVpcmUoYXdhcmRCYWxhbmNlT2YoZnJvbSxhd2FyZCkgPj0gdmFsdWUgKTsKICAgICAgICAgICAgYXdhcmRzT2ZbZnJvbV1bYXdhcmRdIC09IHZhbHVlOwogICAgICAgIH0KICAgICAgICAvL2RvbnQgdHJ5IHRvIHNlbmQgc3BlY2lmaWMgYXdhcmRzIHRvIHRoZSBjb250cmFjdAogICAgICAgIGlmKHRvICE9IGFkZHJlc3ModGhpcykpIGF3YXJkc09mW3RvXVthd2FyZF0gKz0gdmFsdWU7CiAgICB9CiAgICAKCiAgICBmdW5jdGlvbiBhd2FyZEJhbGFuY2VPZihhZGRyZXNzIGFkZHksdWludDggYXdhcmQpIHZpZXcgcHVibGljIHJldHVybnModWludCl7CiAgICAgICAgcmV0dXJuIGF3YXJkc09mW2FkZHldW2F3YXJkXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYXdhcmROYW1lKHVpbnQ4IGlkKSB2aWV3IHB1YmxpYyByZXR1cm5zKHN0cmluZykgewogICAgICAgIHJldHVybiBhd2FyZHNbaWRdOwogICAgfQp9CgoKY29udHJhY3QgTWlmZmxpbk1hcmtldCBpcyBPd25lZCB7CiAgICBtYXBwaW5nKHVpbnQ4ID0+IGFkZHJlc3MpIHB1YmxpYyB0b2tlbklkczsKICAgIC8vbWFwcGluZyh1aW50OCA9PiBtYXBwaW5nKHVpbnQ4ID0+IHVpbnQyNTYpKSBleGNoYW5nZVJhdGVzOwogICAgbWFwcGluZyh1aW50OCA9PiBtYXBwaW5nKHVpbnQ4ID0+IGludDI1NikpIHB1YmxpYyB0b3RhbEV4Y2hhbmdlZDsKICAgIHVpbnQ4IHJld2FyZFRva2VuSWQgPSAxOwogICAgYm9vbCBhY3RpdmU7CiAgICAKICAgICBmdW5jdGlvbiBNaWZmbGluTWFya2V0KCkgcHVibGljIHsKICAgICAgICAgYWN0aXZlID0gdHJ1ZTsKICAgICB9CiAgICAKICAgICBtb2RpZmllciBvbmx5VG9rZW5zIHsKICAgICAgICBNaWZmbGluVG9rZW4gbXQgPSBNaWZmbGluVG9rZW4obXNnLnNlbmRlcik7CiAgICAgICAgLy8gbWFrZSBzdXJlIHNlbmRlciBpcyBhIHRva2VuIGNvbnRyYWN0CiAgICAgICAgcmVxdWlyZSh0b2tlbklkc1ttdC50b2tlbklkKCldID09IG1zZy5zZW5kZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gc2V0VG9rZW4odWludDggdGlkLGFkZHJlc3MgYWRkeSkgcHVibGljIG9ubHlPd25lck9yaWdpbiB7IC8vIE9ubHkgYWRkIHRva2VucyB0aGF0IHdlcmUgY3JlYXRlZCBieSBleGNoYW5nZSBvd25lcgogICAgICAgIHRva2VuSWRzW3RpZF0gPSBhZGR5OwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZVRva2VuKHVpbnQ4IGlkKSBwdWJsaWMgb25seU93bmVyIHsgLy8gT25seSBhZGQgdG9rZW5zIHRoYXQgd2VyZSBjcmVhdGVkIGJ5IG93bmVyCiAgICAgICAgdG9rZW5JZHNbaWRdID0gMDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0QWN0aXZlKGJvb2wgYWN0KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBhY3RpdmUgPSBhY3Q7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UmV3YXJkVG9rZW4oKSBwdWJsaWMgdmlldyByZXR1cm5zKE1pZmZsaW5Ub2tlbil7CiAgICAgICAgcmV0dXJuIGdldFRva2VuQnlJZChyZXdhcmRUb2tlbklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb2tlbkJ5SWQodWludDggaWQpIHB1YmxpYyB2aWV3IHJldHVybnMoTWlmZmxpblRva2VuKXsKICAgICAgICByZXF1aXJlKHRva2VuSWRzW2lkXSA+IDApOwogICAgICAgIHJldHVybiBNaWZmbGluVG9rZW4odG9rZW5JZHNbaWRdKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0VG9rZW5CeUFkZHJlc3MoYWRkcmVzcyBhZGR5KSBwdWJsaWMgdmlldyByZXR1cm5zKE1pZmZsaW5Ub2tlbil7CiAgICAgICAgTWlmZmxpblRva2VuIHRva2VuID0gTWlmZmxpblRva2VuKGFkZHkpOwogICAgICAgIHVpbnQ4IHRva2VuSWQgPSB0b2tlbi50b2tlbklkKCk7CiAgICAgICAgcmVxdWlyZSh0b2tlbklkc1t0b2tlbklkXSA9PSBhZGR5KTsKICAgICAgICByZXR1cm4gdG9rZW47CiAgICB9CgogICAgZnVuY3Rpb24gZXhjaGFuZ2VUb2tlbnNCeUFkZHJlc3ModWludDI1NiBmcm9tQW1vdW50LCBhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8pIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShhY3RpdmUpOwogICAgICAgIHVpbnQyNTYgdGFrZUFtb3VudCA9IGZyb21BbW91bnQ7CiAgICAgICAgTWlmZmxpblRva2VuIGZyb21Ub2tlbiA9IGdldFRva2VuQnlBZGRyZXNzKGZyb20pOwogICAgICAgIE1pZmZsaW5Ub2tlbiB0b1Rva2VuID0gZ2V0VG9rZW5CeUFkZHJlc3ModG8pOwogICAgICAgIHVpbnQ4IGZyb21JZCA9IGZyb21Ub2tlbi50b2tlbklkKCk7CiAgICAgICAgdWludDggdG9JZCA9IHRvVG9rZW4udG9rZW5JZCgpOwogICAgICAgIHVpbnQyNTYgZnJvbVByaWNlID0gZnJvbVRva2VuLmJ1eVByaWNlKCk7CiAgICAgICAgdWludDI1NiB0b1ByaWNlID0gdG9Ub2tlbi5idXlQcmljZSgpOwogICAgICAgIHVpbnQyNTYgdG9BbW91bnQgPSBmcm9tQW1vdW50ICogZnJvbVByaWNlIC8gdG9QcmljZTsKICAgICAgICB0YWtlQW1vdW50ID0gdG9BbW91bnQgKiB0b1ByaWNlIC8gZnJvbVByaWNlOwogICAgICAgIC8vIHRha2UgZnJvbVRva2VucyBiYWNrIHRvIGNvbnRyYWN0CiAgICAgICAgZnJvbVRva2VuLnRha2UobXNnLnNlbmRlciwgdGFrZUFtb3VudCk7CiAgICAgICAgLy8gZ2l2ZSB0b1Rva2VucyBvdXQgZnJvbSBjb250cmFjdAogICAgICAgIHRvVG9rZW4uZ2l2ZShtc2cuc2VuZGVyLCB0b0Ftb3VudCk7CiAgICAgICAgLy8gdXBkYXRlIHNvbWUgc3RhdHMKICAgICAgICB0b3RhbEV4Y2hhbmdlZFtmcm9tSWRdW3RvSWRdICs9IGludCh0b0Ftb3VudCk7CiAgICAgICAgdG90YWxFeGNoYW5nZWRbdG9JZF1bZnJvbUlkXSAtPSBpbnQodGFrZUFtb3VudCk7CiAgICB9CgogICAgLy8gbW9zdCBiYXNpYyBleGNoYW5nZSAtIGp1c3QgY2FsY3VsYXRlcyBwcmljZSByYXRpbwogICAgZnVuY3Rpb24gZXhjaGFuZ2VUb2tlbnNCeUlkKHVpbnQyNTYgZnJvbUFtb3VudCwgdWludDggZnJvbSwgdWludDggdG8pIHB1YmxpYyB7CiAgICAgICAgYWRkcmVzcyBmcm9tQWRkcmVzcyA9IHRva2VuSWRzW2Zyb21dOwogICAgICAgIGFkZHJlc3MgdG9BZGRyZXNzID0gdG9rZW5JZHNbdG9dOwogICAgICAgIGV4Y2hhbmdlVG9rZW5zQnlBZGRyZXNzKGZyb21BbW91bnQsZnJvbUFkZHJlc3MsdG9BZGRyZXNzKTsKCSAgICAvL2FkanVzdCBwcmljZT8KICAgIH0KCiAgICBmdW5jdGlvbiBoaWdoQ29udHJpYnV0aW9uQXdhcmQoYWRkcmVzcyB0bykgcHVibGljIG9ubHlUb2tlbnMgewogICAgICAgIE1pZmZsaW5Ub2tlbiByZXdhcmQgPSBnZXRSZXdhcmRUb2tlbigpOwogICAgICAgIC8vZG9udCB0aHJvdyBhbiBlcnJvciBpZiB0aGVyZSBhcmUgbm8gbW9yZSB0b2tlbnMKICAgICAgICBpZihyZXdhcmQuYmFsYW5jZU9mKHJld2FyZCkgPiAwKXsKICAgICAgICAgICAgcmV3YXJkLmdpdmUodG8sIDEpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBsb3dDb250cmlidXRpb25Bd2FyZChhZGRyZXNzIHRvKSBwdWJsaWMgb25seVRva2VucyB7CiAgICAgICAgTWlmZmxpblRva2VuIHJld2FyZCA9IGdldFJld2FyZFRva2VuKCk7CiAgICAgICAgLy9kb250IHRocm93IGFuIGVycm9yIGhlcmUgc2luY2UgdGhpcyBpcyBqdXN0IHN1Z2FyCiAgICAgICAgaWYocmV3YXJkLmJhbGFuY2VPZih0bykgPiAwKXsKICAgICAgICAgICAgcmV3YXJkLnRha2UodG8sIDEpOwogICAgICAgIH0KICAgIH0KfQ=='.
	

]
