Class {
	#name : #SRT1400300399f6fc996a58846bc251e28282a97c2b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1400300399f6fc996a58846bc251e28282a97c2b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IDAuNC4yMTsKCgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICAvKioKICAgICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAoYSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgICAqLwogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFN1YnRyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICAgKi8KICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAgICovCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9Cgpjb250cmFjdCBFUkMyMCB7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCgppbnRlcmZhY2UgTGFuZE1hbmFnZW1lbnRJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gb3duZXJBZGRyZXNzKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIG1hbmFnZXJBZGRyZXNzKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIGNvbW11bml0eUFkZHJlc3MoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gZGl2aWRlbmRNYW5hZ2VyQWRkcmVzcygpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyk7CiAgICBmdW5jdGlvbiB3YWxsZXRBZGRyZXNzKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzKTsKICAgIC8vICAgIGZ1bmN0aW9uIHVuaWNvcm5Ub2tlbkFkZHJlc3MoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gY2FuZHlUb2tlbigpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyk7CiAgICBmdW5jdGlvbiBtZWdhQ2FuZHlUb2tlbigpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyk7CiAgICBmdW5jdGlvbiB1c2VyUmFua0FkZHJlc3MoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gY2FuZHlMYW5kQWRkcmVzcygpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyk7CiAgICBmdW5jdGlvbiBjYW5keUxhbmRTYWxlQWRkcmVzcygpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyk7CgogICAgZnVuY3Rpb24gaXNVbmljb3JuQ29udHJhY3QoYWRkcmVzcyBfdW5pY29ybkNvbnRyYWN0QWRkcmVzcykgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChib29sKTsKCiAgICBmdW5jdGlvbiBwYXVzZWQoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gcHJlc2FsZU9wZW4oKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gZmlyc3RSYW5rRm9yRnJlZSgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCk7CgogICAgZnVuY3Rpb24gZXRoTGFuZFNhbGVPcGVuKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChib29sKTsKCiAgICBmdW5jdGlvbiBsYW5kUHJpY2VXZWkoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gbGFuZFByaWNlQ2FuZHkoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQpOwoKICAgIGZ1bmN0aW9uIHJlZ2lzdGVySW5pdChhZGRyZXNzIF9jb250cmFjdCkgZXh0ZXJuYWw7Cn0KCgoKY29udHJhY3QgTGFuZEFjY2Vzc0NvbnRyb2wgewoKICAgIExhbmRNYW5hZ2VtZW50SW50ZXJmYWNlIHB1YmxpYyBsYW5kTWFuYWdlbWVudDsKCiAgICBmdW5jdGlvbiBMYW5kQWNjZXNzQ29udHJvbChhZGRyZXNzIF9sYW5kTWFuYWdlbWVudEFkZHJlc3MpIHB1YmxpYyB7CiAgICAgICAgbGFuZE1hbmFnZW1lbnQgPSBMYW5kTWFuYWdlbWVudEludGVyZmFjZShfbGFuZE1hbmFnZW1lbnRBZGRyZXNzKTsKICAgICAgICBsYW5kTWFuYWdlbWVudC5yZWdpc3RlckluaXQodGhpcyk7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBsYW5kTWFuYWdlbWVudC5vd25lckFkZHJlc3MoKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5TWFuYWdlcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbGFuZE1hbmFnZW1lbnQubWFuYWdlckFkZHJlc3MoKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Q29tbXVuaXR5KCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBsYW5kTWFuYWdlbWVudC5jb21tdW5pdHlBZGRyZXNzKCkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgICAgICByZXF1aXJlKCFsYW5kTWFuYWdlbWVudC5wYXVzZWQoKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciB3aGVuUGF1c2VkIHsKICAgICAgICByZXF1aXJlKGxhbmRNYW5hZ2VtZW50LnBhdXNlZCgpKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlXaGlsZUV0aFNhbGVPcGVuIHsKICAgICAgICByZXF1aXJlKGxhbmRNYW5hZ2VtZW50LmV0aExhbmRTYWxlT3BlbigpKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlMYW5kTWFuYWdlbWVudCgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhsYW5kTWFuYWdlbWVudCkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVVuaWNvcm5Db250cmFjdCgpIHsKICAgICAgICByZXF1aXJlKGxhbmRNYW5hZ2VtZW50LmlzVW5pY29ybkNvbnRyYWN0KG1zZy5zZW5kZXIpKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlDYW5keUxhbmQoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkZHJlc3MobGFuZE1hbmFnZW1lbnQuY2FuZHlMYW5kQWRkcmVzcygpKSk7CiAgICAgICAgXzsKICAgIH0KCgogICAgbW9kaWZpZXIgd2hpbGVQcmVzYWxlT3BlbigpIHsKICAgICAgICByZXF1aXJlKGxhbmRNYW5hZ2VtZW50LnByZXNhbGVPcGVuKCkpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gaXNHYW1lUGF1c2VkKCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGxhbmRNYW5hZ2VtZW50LnBhdXNlZCgpOwogICAgfQp9CgoKY29udHJhY3QgQ2FuUmVjZWl2ZUFwcHJvdmFsIHsKICAgIGV2ZW50IFJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIGZyb20sIHVpbnQyNTYgdmFsdWUsIGFkZHJlc3MgdG9rZW4pOwoKICAgIG1hcHBpbmcgKGJ5dGVzNCA9PiBib29sKSBhbGxvd2VkRnVuY3M7CgogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgbnVtd29yZHMpIHsKICAgICAgICBhc3NlcnQobXNnLmRhdGEubGVuZ3RoID49IG51bXdvcmRzICogMzIgKyA0KTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlTZWxmKCl7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkZHJlc3ModGhpcykpOwogICAgICAgIF87CiAgICB9CgoKICAgIGZ1bmN0aW9uIGJ5dGVzVG9CeXRlczQoYnl0ZXMgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zIChieXRlczQgb3V0KSB7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICAgICAgICAgIG91dCB8PSBieXRlczQoYltpXSAmIDB4RkYpID4+IChpIDw8IDMpOwogICAgICAgIH0KICAgIH0KCn0KCgpjb250cmFjdCBVc2VyUmFuayBpcyBMYW5kQWNjZXNzQ29udHJvbCwgQ2FuUmVjZWl2ZUFwcHJvdmFsIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIEVSQzIwIHB1YmxpYyBjYW5keVRva2VuOwoKICAgIHN0cnVjdCBSYW5rewogICAgICAgIHVpbnQgbGFuZExpbWl0OwogICAgICAgIHVpbnQgcHJpY2VDYW5keTsKICAgICAgICB1aW50IHByaWNlRXRoOwogICAgICAgIHN0cmluZyB0aXRsZTsKICAgIH0KCiAgICBtYXBwaW5nICh1aW50ID0+IFJhbmspIHB1YmxpYyByYW5rczsKICAgIHVpbnQgcHVibGljIHJhbmtzQ291bnQgPSAwOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIHVzZXJSYW5rczsKCiAgICBldmVudCBUb2tlbnNUcmFuc2ZlcnJlZChhZGRyZXNzIHdhbGxldCwgdWludCB2YWx1ZSk7CiAgICBldmVudCBOZXdSYW5rQWRkZWQodWludCBpbmRleCwgdWludCBfbGFuZExpbWl0LCBzdHJpbmcgX3RpdGxlLCB1aW50IF9wcmljZUNhbmR5LCB1aW50IF9wcmljZUV0aCk7CiAgICBldmVudCBSYW5rQ2hhbmdlKHVpbnQgaW5kZXgsIHVpbnQgcHJpY2VDYW5keSwgdWludCBwcmljZUV0aCk7CiAgICBldmVudCBCdXlOZXh0UmFuayhhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQgaW5kZXgpOwogICAgZXZlbnQgQnV5UmFuayhhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQgaW5kZXgpOwoKCgogICAgZnVuY3Rpb24gVXNlclJhbmsoYWRkcmVzcyBfbGFuZE1hbmFnZW1lbnRBZGRyZXNzKSBMYW5kQWNjZXNzQ29udHJvbChfbGFuZE1hbmFnZW1lbnRBZGRyZXNzKSBwdWJsaWMgewoKICAgICAgICBhbGxvd2VkRnVuY3NbYnl0ZXM0KGtlY2NhazI1NigiX3JlY2VpdmVCdXlOZXh0UmFuayhhZGRyZXNzKSIpKV0gPSB0cnVlOwogICAgICAgIGFsbG93ZWRGdW5jc1tieXRlczQoa2VjY2FrMjU2KCJfcmVjZWl2ZUJ1eVJhbmsoYWRkcmVzcyx1aW50MjU2KSIpKV0gPSB0cnVlOwogICAgICAgIC8vMzM1MDAwMDAwMDAwMDAwMCBmb3IgY2FuZHkKCiAgICAgICAgYWRkUmFuaygxLCAgIDM2MDAwMDAwMDAwMDAwMDAwMDAwLCAgIDEyMDYwMDAwMDAwMDAwMDAwMCwiQ3J5cHRvbG9yZCIpOwogICAgICAgIGFkZFJhbmsoNSwgICAxNDQwMDAwMDAwMDAwMDAwMDAwMDAsICA0ODI0MDAwMDAwMDAwMDAwMDAsIkZvcmtsb3JkIik7CiAgICAgICAgYWRkUmFuaygxMCwgIDE4MDAwMDAwMDAwMDAwMDAwMDAwMCwgIDYwMzAwMDAwMDAwMDAwMDAwMCwiRGVjZW50cmFsb3JkIik7CiAgICAgICAgYWRkUmFuaygyMCwgIDM2MDAwMDAwMDAwMDAwMDAwMDAwMCwgIDEyMDYwMDAwMDAwMDAwMDAwMDAsIlRlY2hub21hc3RlciIpOwogICAgICAgIGFkZFJhbmsoNTAsICAxMDgwMDAwMDAwMDAwMDAwMDAwMDAwLCAzNjE4MDAwMDAwMDAwMDAwMDAwLCJCaXRtYXN0ZXIiKTsKICAgICAgICBhZGRSYW5rKDEwMCwgMTgwMDAwMDAwMDAwMDAwMDAwMDAwMCwgNjAzMDAwMDAwMDAwMDAwMDAwMCwiTWVnYW1hc3RlciIpOwogICAgICAgIGFkZFJhbmsoMjAwLCAzNjAwMDAwMDAwMDAwMDAwMDAwMDAwLCAxMjA2MDAwMDAwMDAwMDAwMDAwMCwiQ3liZXJkdWtlIik7CiAgICAgICAgYWRkUmFuayg0MDAsIDcyMDAwMDAwMDAwMDAwMDAwMDAwMDAsIDI0MTIwMDAwMDAwMDAwMDAwMDAwLCJOYW5vcHJpbmNlIik7CiAgICAgICAgYWRkUmFuayg2NTAsIDkwMDAwMDAwMDAwMDAwMDAwMDAwMDAsIDMwMTUwMDAwMDAwMDAwMDAwMDAwLCJIeXBlcnByaW5jZSIpOwogICAgICAgIGFkZFJhbmsoMTAwMCwxMjYwMDAwMDAwMDAwMDAwMDAwMDAwMCw0MjIxMDAwMDAwMDAwMDAwMDAwMCwiRXRoZXJjYWVzYXIiKTsKCgogICAgfQoKICAgIGZ1bmN0aW9uIGluaXQoKSBvbmx5TGFuZE1hbmFnZW1lbnQgd2hlblBhdXNlZCBleHRlcm5hbCB7CiAgICAgICAgY2FuZHlUb2tlbiA9IEVSQzIwKGxhbmRNYW5hZ2VtZW50LmNhbmR5VG9rZW4oKSk7CiAgICB9CgoKCiAgICBmdW5jdGlvbiBhZGRSYW5rKHVpbnQgX2xhbmRMaW1pdCwgdWludCBfcHJpY2VDYW5keSwgdWludCBfcHJpY2VFdGgsIHN0cmluZyBfdGl0bGUpIG9ubHlPd25lciBwdWJsaWMgIHsKICAgICAgICAvL9GB0YLQvtC40LzQvtGB0YLRjCDQtNC+0LHQsNCy0LvRj9C10LzQvtCz0L4g0LTQvtC70LbQvdCwINCx0YvRgtGMINC90LUg0L3QuNC20LUg0L/RgNC10LTRi9C00YPRidC10LPQvgogICAgICAgIHJlcXVpcmUocmFua3NbcmFua3NDb3VudF0ucHJpY2VDYW5keSA8PSBfcHJpY2VDYW5keSAmJiByYW5rc1tyYW5rc0NvdW50XS5wcmljZUV0aCA8PSBfcHJpY2VFdGgpOwogICAgICAgIHJhbmtzQ291bnQrKzsKICAgICAgICBSYW5rIHN0b3JhZ2UgciA9IHJhbmtzW3JhbmtzQ291bnRdOwoKICAgICAgICByLmxhbmRMaW1pdCA9IF9sYW5kTGltaXQ7CiAgICAgICAgci5wcmljZUNhbmR5ID0gX3ByaWNlQ2FuZHk7CiAgICAgICAgci5wcmljZUV0aCA9IF9wcmljZUV0aDsKICAgICAgICByLnRpdGxlID0gX3RpdGxlOwogICAgICAgIGVtaXQgTmV3UmFua0FkZGVkKHJhbmtzQ291bnQsIF9sYW5kTGltaXQsX3RpdGxlLF9wcmljZUNhbmR5LF9wcmljZUV0aCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGVkaXRSYW5rKHVpbnQgX2luZGV4LCB1aW50IF9wcmljZUNhbmR5LCB1aW50IF9wcmljZUV0aCkgb25seU1hbmFnZXIgcHVibGljICB7CiAgICAgICAgcmVxdWlyZShfaW5kZXggPiAwICYmIF9pbmRleCA8PSByYW5rc0NvdW50KTsKICAgICAgICBpZiAoX2luZGV4ID4gMSkgewogICAgICAgICAgICByZXF1aXJlKHJhbmtzW19pbmRleCAtIDFdLnByaWNlQ2FuZHkgPD0gX3ByaWNlQ2FuZHkgJiYgcmFua3NbX2luZGV4IC0gMV0ucHJpY2VFdGggPD0gX3ByaWNlRXRoKTsKICAgICAgICB9CiAgICAgICAgaWYgKF9pbmRleCA8IHJhbmtzQ291bnQpIHsKICAgICAgICAgICAgcmVxdWlyZShyYW5rc1tfaW5kZXggKyAxXS5wcmljZUNhbmR5ID49IF9wcmljZUNhbmR5ICYmIHJhbmtzW19pbmRleCArIDFdLnByaWNlRXRoID49IF9wcmljZUV0aCk7CiAgICAgICAgfQoKICAgICAgICBSYW5rIHN0b3JhZ2UgciA9IHJhbmtzW19pbmRleF07CiAgICAgICAgci5wcmljZUNhbmR5ID0gX3ByaWNlQ2FuZHk7CiAgICAgICAgci5wcmljZUV0aCA9IF9wcmljZUV0aDsKICAgICAgICBlbWl0IFJhbmtDaGFuZ2UoX2luZGV4LCBfcHJpY2VDYW5keSwgX3ByaWNlRXRoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXlOZXh0UmFuaygpIHB1YmxpYyB7CiAgICAgICAgX2J1eU5leHRSYW5rKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9yZWNlaXZlQnV5TmV4dFJhbmsoYWRkcmVzcyBfYmVuZWZpY2lhcnkpIG9ubHlTZWxmIG9ubHlQYXlsb2FkU2l6ZSgxKSBwdWJsaWMgewogICAgICAgIF9idXlOZXh0UmFuayhfYmVuZWZpY2lhcnkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVJhbmsodWludCBfaW5kZXgpIHB1YmxpYyB7CiAgICAgICAgX2J1eVJhbmsobXNnLnNlbmRlciwgX2luZGV4KTsKICAgIH0KCiAgICBmdW5jdGlvbiBfcmVjZWl2ZUJ1eVJhbmsoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQgX2luZGV4KSBvbmx5U2VsZiBvbmx5UGF5bG9hZFNpemUoMikgcHVibGljIHsKICAgICAgICBfYnV5UmFuayhfYmVuZWZpY2lhcnksIF9pbmRleCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIF9idXlOZXh0UmFuayhhZGRyZXNzIF9iZW5lZmljaWFyeSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgX2luZGV4ID0gdXNlclJhbmtzW19iZW5lZmljaWFyeV0gKyAxOwogICAgICAgIHJlcXVpcmUoX2luZGV4IDw9IHJhbmtzQ291bnQpOwoKICAgICAgICByZXF1aXJlKGNhbmR5VG9rZW4udHJhbnNmZXJGcm9tKF9iZW5lZmljaWFyeSwgdGhpcywgcmFua3NbX2luZGV4XS5wcmljZUNhbmR5KSk7CiAgICAgICAgdXNlclJhbmtzW19iZW5lZmljaWFyeV0gPSBfaW5kZXg7CiAgICAgICAgZW1pdCBCdXlOZXh0UmFuayhfYmVuZWZpY2lhcnksIF9pbmRleCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIF9idXlSYW5rKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50IF9pbmRleCkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoX2luZGV4IDw9IHJhbmtzQ291bnQpOwogICAgICAgIHJlcXVpcmUodXNlclJhbmtzW19iZW5lZmljaWFyeV0gPCBfaW5kZXgpOwoKICAgICAgICB1aW50IGZ1bGxQcmljZSA9IF9nZXRQcmljZSh1c2VyUmFua3NbX2JlbmVmaWNpYXJ5XSwgX2luZGV4KTsKCiAgICAgICAgcmVxdWlyZShjYW5keVRva2VuLnRyYW5zZmVyRnJvbShfYmVuZWZpY2lhcnksIHRoaXMsIGZ1bGxQcmljZSkpOwogICAgICAgIHVzZXJSYW5rc1tfYmVuZWZpY2lhcnldID0gX2luZGV4OwogICAgICAgIGVtaXQgQnV5UmFuayhfYmVuZWZpY2lhcnksIF9pbmRleCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldFByZVNhbGVSYW5rKGFkZHJlc3MgX3VzZXIsIHVpbnQgX2luZGV4KSBvbmx5TWFuYWdlciB3aGlsZVByZXNhbGVPcGVuIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfaW5kZXggPD0gcmFua3NDb3VudCk7CiAgICAgICAgcmVxdWlyZSh1c2VyUmFua3NbX3VzZXJdIDwgX2luZGV4KTsKICAgICAgICB1c2VyUmFua3NbX3VzZXJdID0gX2luZGV4OwogICAgICAgIGVtaXQgQnV5UmFuayhfdXNlciwgX2luZGV4KTsKICAgIH0KCgoKICAgIGZ1bmN0aW9uIGdldE5leHRSYW5rKGFkZHJlc3MgX3VzZXIpIG9ubHlVbmljb3JuQ29udHJhY3QgcHVibGljIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IF9pbmRleCA9IHVzZXJSYW5rc1tfdXNlcl0gKyAxOwogICAgICAgIHJlcXVpcmUoX2luZGV4IDw9IHJhbmtzQ291bnQpOwogICAgICAgIHVzZXJSYW5rc1tfdXNlcl0gPSBfaW5kZXg7CiAgICAgICAgcmV0dXJuIF9pbmRleDsKICAgICAgICBlbWl0IEJ1eU5leHRSYW5rKG1zZy5zZW5kZXIsIF9pbmRleCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldFJhbmsoYWRkcmVzcyBfdXNlciwgdWludCBfaW5kZXgpIG9ubHlVbmljb3JuQ29udHJhY3QgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9pbmRleCA8PSByYW5rc0NvdW50KTsKICAgICAgICByZXF1aXJlKHVzZXJSYW5rc1tfdXNlcl0gPD0gX2luZGV4KTsKICAgICAgICB1c2VyUmFua3NbX3VzZXJdID0gX2luZGV4OwogICAgICAgIGVtaXQgQnV5UmFuayhfdXNlciwgX2luZGV4KTsKICAgIH0KCgogICAgZnVuY3Rpb24gX2dldFByaWNlKHVpbnQgX3VzZXJSYW5rLCB1aW50IF9pbmRleCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGZ1bGxQcmljZSA9IDA7CgogICAgICAgIGZvcih1aW50IGkgPSBfdXNlclJhbmsrMTsgaSA8PSBfaW5kZXg7IGkrKykKICAgICAgICB7CiAgICAgICAgICAgIGZ1bGxQcmljZSA9IGZ1bGxQcmljZS5hZGQocmFua3NbaV0ucHJpY2VDYW5keSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZnVsbFByaWNlOwogICAgfQoKCiAgICBmdW5jdGlvbiBnZXRJbmRpdmlkdWFsUHJpY2UoYWRkcmVzcyBfdXNlciwgdWludCBfaW5kZXgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXF1aXJlKF9pbmRleCA8PSByYW5rc0NvdW50KTsKICAgICAgICByZXF1aXJlKHVzZXJSYW5rc1tfdXNlcl0gPCBfaW5kZXgpOwoKICAgICAgICByZXR1cm4gX2dldFByaWNlKHVzZXJSYW5rc1tfdXNlcl0sIF9pbmRleCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldFJhbmtQcmljZUNhbmR5KHVpbnQgX2luZGV4KSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHJhbmtzW19pbmRleF0ucHJpY2VDYW5keTsKICAgIH0KCgogICAgZnVuY3Rpb24gZ2V0UmFua1ByaWNlRXRoKHVpbnQgX2luZGV4KSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHJhbmtzW19pbmRleF0ucHJpY2VFdGg7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UmFua0xhbmRMaW1pdCh1aW50IF9pbmRleCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiByYW5rc1tfaW5kZXhdLmxhbmRMaW1pdDsKICAgIH0KCgogICAgZnVuY3Rpb24gZ2V0UmFua1RpdGxlKHVpbnQgX2luZGV4KSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcpIHsKICAgICAgICByZXR1cm4gcmFua3NbX2luZGV4XS50aXRsZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRVc2VyUmFuayhhZGRyZXNzIF91c2VyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHVzZXJSYW5rc1tfdXNlcl07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VXNlckxhbmRMaW1pdChhZGRyZXNzIF91c2VyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHJhbmtzW3VzZXJSYW5rc1tfdXNlcl1dLmxhbmRMaW1pdDsKICAgIH0KCgogICAgZnVuY3Rpb24gd2l0aGRyYXdUb2tlbnMoKSBwdWJsaWMgb25seU1hbmFnZXIgIHsKICAgICAgICByZXF1aXJlKGNhbmR5VG9rZW4uYmFsYW5jZU9mKHRoaXMpID4gMCk7CiAgICAgICAgY2FuZHlUb2tlbi50cmFuc2ZlcihsYW5kTWFuYWdlbWVudC53YWxsZXRBZGRyZXNzKCksIGNhbmR5VG9rZW4uYmFsYW5jZU9mKHRoaXMpKTsKICAgICAgICBlbWl0IFRva2Vuc1RyYW5zZmVycmVkKGxhbmRNYW5hZ2VtZW50LndhbGxldEFkZHJlc3MoKSwgY2FuZHlUb2tlbi5iYWxhbmNlT2YodGhpcykpOwogICAgfQoKCiAgICBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWMgewogICAgICAgIC8vcmVxdWlyZShfdG9rZW4gPT0gbGFuZE1hbmFnZW1lbnQuY2FuZHlUb2tlbigpKTsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhjYW5keVRva2VuKSk7CiAgICAgICAgcmVxdWlyZShhbGxvd2VkRnVuY3NbYnl0ZXNUb0J5dGVzNChfZXh0cmFEYXRhKV0pOwogICAgICAgIHJlcXVpcmUoYWRkcmVzcyh0aGlzKS5jYWxsKF9leHRyYURhdGEpKTsKICAgICAgICBlbWl0IFJlY2VpdmVBcHByb3ZhbChfZnJvbSwgX3ZhbHVlLCBfdG9rZW4pOwogICAgfQoKfQ=='.
	

]
