Class {
	#name : #SRTf8e6bacd9298df8b0aba67ef2ef8348fabc5ae8a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf8e6bacd9298df8b0aba67ef2ef8348fabc5ae8a >> base64 [
	^ 'Y29udHJhY3QgQ0FWQXNzZXQgewogICAgZnVuY3Rpb24gX190cmFuc2ZlcldpdGhSZWZlcmVuY2UoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX190cmFuc2ZlckZyb21XaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UsIGFkZHJlc3MgX3NlbmRlcikgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIF9fYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX19wcm9jZXNzKGJ5dGVzIF9kYXRhLCBhZGRyZXNzIF9zZW5kZXIpIHBheWFibGUgewogICAgICAgIHJldmVydCgpOwogICAgfQp9Cgpjb250cmFjdCBFUkMyMCB7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKCiAgICBmdW5jdGlvbiBkZWNpbWFscygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KTsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKfQoKY29udHJhY3QgQ0FWUGxhdGZvcm0gewogICAgbWFwcGluZyhieXRlczMyID0+IGFkZHJlc3MpIHB1YmxpYyBwcm94aWVzOwogICAgZnVuY3Rpb24gc3ltYm9scyh1aW50IF9pZHgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChieXRlczMyKTsKICAgIGZ1bmN0aW9uIHN5bWJvbHNDb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgICBmdW5jdGlvbiBuYW1lKGJ5dGVzMzIgX3N5bWJvbCkgcmV0dXJucyhzdHJpbmcpOwogICAgZnVuY3Rpb24gc2V0UHJveHkoYWRkcmVzcyBfYWRkcmVzcywgYnl0ZXMzMiBfc3ltYm9sKSByZXR1cm5zKHVpbnQgZXJyb3JDb2RlKTsKICAgIGZ1bmN0aW9uIGlzQ3JlYXRlZChieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX293bmVyLCBieXRlczMyIF9zeW1ib2wpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBvd25lcihieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcyk7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseShieXRlczMyIF9zeW1ib2wpIHJldHVybnModWludCk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfaG9sZGVyLCBieXRlczMyIF9zeW1ib2wpIHJldHVybnModWludCk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfc3BlbmRlciwgYnl0ZXMzMiBfc3ltYm9sKSByZXR1cm5zKHVpbnQpOwogICAgZnVuY3Rpb24gYmFzZVVuaXQoYnl0ZXMzMiBfc3ltYm9sKSByZXR1cm5zKHVpbnQ4KTsKICAgIGZ1bmN0aW9uIHByb3h5VHJhbnNmZXJXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMzMiBfc3ltYm9sLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKHVpbnQgZXJyb3JDb2RlKTsKICAgIGZ1bmN0aW9uIHByb3h5VHJhbnNmZXJGcm9tV2l0aFJlZmVyZW5jZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzMzIgX3N5bWJvbCwgc3RyaW5nIF9yZWZlcmVuY2UsIGFkZHJlc3MgX3NlbmRlcikgcmV0dXJucyh1aW50IGVycm9yQ29kZSk7CiAgICBmdW5jdGlvbiBwcm94eUFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUsIGJ5dGVzMzIgX3N5bWJvbCwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKHVpbnQgZXJyb3JDb2RlKTsKICAgIGZ1bmN0aW9uIGlzc3VlQXNzZXQoYnl0ZXMzMiBfc3ltYm9sLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9uYW1lLCBzdHJpbmcgX2Rlc2NyaXB0aW9uLCB1aW50OCBfYmFzZVVuaXQsIGJvb2wgX2lzUmVpc3N1YWJsZSkgcmV0dXJucyh1aW50IGVycm9yQ29kZSk7CiAgICBmdW5jdGlvbiBpc3N1ZUFzc2V0KGJ5dGVzMzIgX3N5bWJvbCwgdWludCBfdmFsdWUsIHN0cmluZyBfbmFtZSwgc3RyaW5nIF9kZXNjcmlwdGlvbiwgdWludDggX2Jhc2VVbml0LCBib29sIF9pc1JlaXNzdWFibGUsIGFkZHJlc3MgX2FjY291bnQpIHJldHVybnModWludCBlcnJvckNvZGUpOwogICAgZnVuY3Rpb24gcmVpc3N1ZUFzc2V0KGJ5dGVzMzIgX3N5bWJvbCwgdWludCBfdmFsdWUpIHJldHVybnModWludCBlcnJvckNvZGUpOwogICAgZnVuY3Rpb24gcmV2b2tlQXNzZXQoYnl0ZXMzMiBfc3ltYm9sLCB1aW50IF92YWx1ZSkgcmV0dXJucyh1aW50IGVycm9yQ29kZSk7CiAgICBmdW5jdGlvbiBpc1JlaXNzdWFibGUoYnl0ZXMzMiBfc3ltYm9sKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gY2hhbmdlT3duZXJzaGlwKGJ5dGVzMzIgX3N5bWJvbCwgYWRkcmVzcyBfbmV3T3duZXIpIHJldHVybnModWludCBlcnJvckNvZGUpOwogICAgZnVuY3Rpb24gaGFzQXNzZXRSaWdodHMoYWRkcmVzcyBfb3duZXIsIGJ5dGVzMzIgX3N5bWJvbCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IENBVkFzc2V0UHJveHkgaXMgRVJDMjAgewoKICAgIC8vIFN1cHBvcnRzIENBVlBsYXRmb3JtIGFiaWxpdHkgdG8gcmV0dXJuIGVycm9yIGNvZGVzIGZyb20gbWV0aG9kcwogICAgdWludCBjb25zdGFudCBPSyA9IDE7CgogICAgLy8gQXNzaWduZWQgcGxhdGZvcm0sIGltbXV0YWJsZS4KICAgIENBVlBsYXRmb3JtIHB1YmxpYyBwbGF0Zm9ybTsKCiAgICAvLyBBc3NpZ25lZCBzeW1ib2wsIGltbXV0YWJsZS4KICAgIGJ5dGVzMzIgcHVibGljIHNtYmw7CgogICAgLy8gQXNzaWduZWQgbmFtZSwgaW1tdXRhYmxlLgogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwoKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwoKICAgIC8qKgogICAgICogU2V0cyBwbGF0Zm9ybSBhZGRyZXNzLCBhc3NpZ25zIHN5bWJvbCBhbmQgbmFtZS4KICAgICAqCiAgICAgKiBDYW4gYmUgc2V0IG9ubHkgb25jZS4KICAgICAqCiAgICAgKiBAcGFyYW0gX3BsYXRmb3JtIHBsYXRmb3JtIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKiBAcGFyYW0gX3N5bWJvbCBhc3NpZ25lZCBzeW1ib2wuCiAgICAgKiBAcGFyYW0gX25hbWUgYXNzaWduZWQgbmFtZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGluaXQoQ0FWUGxhdGZvcm0gX3BsYXRmb3JtLCBzdHJpbmcgX3N5bWJvbCwgc3RyaW5nIF9uYW1lKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAoYWRkcmVzcyhwbGF0Zm9ybSkgIT0gMHgwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcGxhdGZvcm0gPSBfcGxhdGZvcm07CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICBzbWJsID0gc3RyaW5nVG9CeXRlczMyKF9zeW1ib2wpOwogICAgICAgIG5hbWUgPSBfbmFtZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdHJpbmdUb0J5dGVzMzIoc3RyaW5nIG1lbW9yeSBzb3VyY2UpIHJldHVybnMgKGJ5dGVzMzIgcmVzdWx0KSB7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgIHJlc3VsdCA6PSBtbG9hZChhZGQoc291cmNlLCAzMikpCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogT25seSBwbGF0Zm9ybSBpcyBhbGxvd2VkIHRvIGNhbGwuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlQbGF0Zm9ybSgpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBhZGRyZXNzKHBsYXRmb3JtKSkgewogICAgICAgICAgICBfOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIE9ubHkgY3VycmVudCBhc3NldCBvd25lciBpcyBhbGxvd2VkIHRvIGNhbGwuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlBc3NldE93bmVyKCkgewogICAgICAgIGlmIChwbGF0Zm9ybS5pc093bmVyKG1zZy5zZW5kZXIsIHNtYmwpKSB7CiAgICAgICAgICAgIF87CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBmb3IgY3VycmVudCBjYWxsZXIuCiAgICAgKgogICAgICogQHJldHVybiBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdC4KICAgICAqLwogICAgZnVuY3Rpb24gX2dldEFzc2V0KCkgaW50ZXJuYWwgcmV0dXJucyhDQVZBc3NldCkgewogICAgICAgIHJldHVybiBDQVZBc3NldChnZXRWZXJzaW9uRm9yKG1zZy5zZW5kZXIpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYXNzZXQgdG90YWwgc3VwcGx5LgogICAgICoKICAgICAqIEByZXR1cm4gYXNzZXQgdG90YWwgc3VwcGx5LgogICAgICovCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBwbGF0Zm9ybS50b3RhbFN1cHBseShzbWJsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYXNzZXQgYmFsYW5jZSBmb3IgYSBwYXJ0aWN1bGFyIGhvbGRlci4KICAgICAqCiAgICAgKiBAcGFyYW0gX293bmVyIGhvbGRlciBhZGRyZXNzLgogICAgICoKICAgICAqIEByZXR1cm4gaG9sZGVyIGJhbGFuY2UuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIHBsYXRmb3JtLmJhbGFuY2VPZihfb3duZXIsIHNtYmwpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhc3NldCBhbGxvd2FuY2UgZnJvbSBvbmUgaG9sZGVyIHRvIGFub3RoZXIuCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIGhvbGRlciB0aGF0IGFsbG93ZWQgc3BlbmRpbmcuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgaG9sZGVyIHRoYXQgaXMgYWxsb3dlZCB0byBzcGVuZC4KICAgICAqCiAgICAgKiBAcmV0dXJuIGhvbGRlciB0byBzcGVuZGVyIGFsbG93YW5jZS4KICAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBwbGF0Zm9ybS5hbGxvd2FuY2UoX2Zyb20sIF9zcGVuZGVyLCBzbWJsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYXNzZXQgZGVjaW1hbHMuCiAgICAgKgogICAgICogQHJldHVybiBhc3NldCBkZWNpbWFscy4KICAgICAqLwogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBjb25zdGFudCByZXR1cm5zKHVpbnQ4KSB7CiAgICAgICAgcmV0dXJuIHBsYXRmb3JtLmJhc2VVbml0KHNtYmwpOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXJzIGFzc2V0IGJhbGFuY2UgZnJvbSB0aGUgY2FsbGVyIHRvIHNwZWNpZmllZCByZWNlaXZlci4KICAgICAqCiAgICAgKiBAcGFyYW0gX3RvIGhvbGRlciBhZGRyZXNzIHRvIGdpdmUgdG8uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCB0byB0cmFuc2Zlci4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKF90byAhPSAweDApIHsKICAgICAgICAgIHJldHVybiBfdHJhbnNmZXJXaXRoUmVmZXJlbmNlKF90bywgX3ZhbHVlLCAiIik7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXJzIGFzc2V0IGJhbGFuY2UgZnJvbSB0aGUgY2FsbGVyIHRvIHNwZWNpZmllZCByZWNlaXZlciBhZGRpbmcgc3BlY2lmaWVkIGNvbW1lbnQuCiAgICAgKgogICAgICogQHBhcmFtIF90byBob2xkZXIgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgKiBAcGFyYW0gX3JlZmVyZW5jZSB0cmFuc2ZlciBjb21tZW50IHRvIGJlIGluY2x1ZGVkIGluIGEgcGxhdGZvcm0ncyBUcmFuc2ZlciBldmVudC4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyV2l0aFJlZmVyZW5jZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIHN0cmluZyBfcmVmZXJlbmNlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAoX3RvICE9IDB4MCkgewogICAgICAgICAgICByZXR1cm4gX3RyYW5zZmVyV2l0aFJlZmVyZW5jZShfdG8sIF92YWx1ZSwgX3JlZmVyZW5jZSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmVzb2x2ZXMgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgZm9yIHRoZSBjYWxsZXIgYW5kIGZvcndhcmRzIHRoZXJlIGFyZ3VtZW50cyBhbG9uZyB3aXRoCiAgICAgKiB0aGUgY2FsbGVyIGFkZHJlc3MuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBfdHJhbnNmZXJXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UpIGludGVybmFsIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBfZ2V0QXNzZXQoKS5fX3RyYW5zZmVyV2l0aFJlZmVyZW5jZShfdG8sIF92YWx1ZSwgX3JlZmVyZW5jZSwgbXNnLnNlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBQZXJmb3JtcyB0cmFuc2ZlciBjYWxsIG9uIHRoZSBwbGF0Zm9ybSBieSB0aGUgbmFtZSBvZiBzcGVjaWZpZWQgc2VuZGVyLgogICAgICoKICAgICAqIENhbiBvbmx5IGJlIGNhbGxlZCBieSBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhc3NpZ25lZCB0byBzZW5kZXIuCiAgICAgKgogICAgICogQHBhcmFtIF90byBob2xkZXIgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgKiBAcGFyYW0gX3JlZmVyZW5jZSB0cmFuc2ZlciBjb21tZW50IHRvIGJlIGluY2x1ZGVkIGluIGEgcGxhdGZvcm0ncyBUcmFuc2ZlciBldmVudC4KICAgICAqIEBwYXJhbSBfc2VuZGVyIGluaXRpYWwgY2FsbGVyLgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gX190cmFuc2ZlcldpdGhSZWZlcmVuY2UoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSBvbmx5QWNjZXNzKF9zZW5kZXIpIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBwbGF0Zm9ybS5wcm94eVRyYW5zZmVyV2l0aFJlZmVyZW5jZShfdG8sIF92YWx1ZSwgc21ibCwgX3JlZmVyZW5jZSwgX3NlbmRlcikgPT0gT0s7CiAgICB9CgogICAgLyoqCiAgICAgKiBQcmZvcm1zIGFsbG93YW5jZSB0cmFuc2ZlciBvZiBhc3NldCBiYWxhbmNlIGJldHdlZW4gaG9sZGVycy4KICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gaG9sZGVyIGFkZHJlc3MgdG8gdGFrZSBmcm9tLgogICAgICogQHBhcmFtIF90byBob2xkZXIgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAoX3RvICE9IDB4MCkgewogICAgICAgICAgICByZXR1cm4gX2dldEFzc2V0KCkuX190cmFuc2ZlckZyb21XaXRoUmVmZXJlbmNlKF9mcm9tLCBfdG8sIF92YWx1ZSwgIiIsIG1zZy5zZW5kZXIpOwogICAgICAgICB9CiAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBQZXJmb3JtcyBhbGxvd2FuY2UgdHJhbnNmZXIgY2FsbCBvbiB0aGUgcGxhdGZvcm0gYnkgdGhlIG5hbWUgb2Ygc3BlY2lmaWVkIHNlbmRlci4KICAgICAqCiAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgYnkgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYXNzaWduZWQgdG8gc2VuZGVyLgogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBob2xkZXIgYWRkcmVzcyB0byB0YWtlIGZyb20uCiAgICAgKiBAcGFyYW0gX3RvIGhvbGRlciBhZGRyZXNzIHRvIGdpdmUgdG8uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCB0byB0cmFuc2Zlci4KICAgICAqIEBwYXJhbSBfcmVmZXJlbmNlIHRyYW5zZmVyIGNvbW1lbnQgdG8gYmUgaW5jbHVkZWQgaW4gYSBwbGF0Zm9ybSdzIFRyYW5zZmVyIGV2ZW50LgogICAgICogQHBhcmFtIF9zZW5kZXIgaW5pdGlhbCBjYWxsZXIuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBfX3RyYW5zZmVyRnJvbVdpdGhSZWZlcmVuY2UoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSBvbmx5QWNjZXNzKF9zZW5kZXIpIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBwbGF0Zm9ybS5wcm94eVRyYW5zZmVyRnJvbVdpdGhSZWZlcmVuY2UoX2Zyb20sIF90bywgX3ZhbHVlLCBzbWJsLCBfcmVmZXJlbmNlLCBfc2VuZGVyKSA9PSBPSzsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgYXNzZXQgc3BlbmRpbmcgYWxsb3dhbmNlIGZvciBhIHNwZWNpZmllZCBzcGVuZGVyLgogICAgICoKICAgICAqIEBwYXJhbSBfc3BlbmRlciBob2xkZXIgYWRkcmVzcyB0byBzZXQgYWxsb3dhbmNlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gYWxsb3cuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAoX3NwZW5kZXIgIT0gMHgwKSB7CiAgICAgICAgICAgICByZXR1cm4gX2dldEFzc2V0KCkuX19hcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUsIG1zZy5zZW5kZXIpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFBlcmZvcm1zIGFsbG93YW5jZSBzZXR0aW5nIGNhbGwgb24gdGhlIHBsYXRmb3JtIGJ5IHRoZSBuYW1lIG9mIHNwZWNpZmllZCBzZW5kZXIuCiAgICAgKgogICAgICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJ5IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFzc2lnbmVkIHRvIHNlbmRlci4KICAgICAqCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgaG9sZGVyIGFkZHJlc3MgdG8gc2V0IGFsbG93YW5jZSB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIGFsbG93LgogICAgICogQHBhcmFtIF9zZW5kZXIgaW5pdGlhbCBjYWxsZXIuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBfX2FwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUsIGFkZHJlc3MgX3NlbmRlcikgb25seUFjY2Vzcyhfc2VuZGVyKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gcGxhdGZvcm0ucHJveHlBcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUsIHNtYmwsIF9zZW5kZXIpID09IE9LOwogICAgfQoKICAgIC8qKgogICAgICogRW1pdHMgRVJDMjAgVHJhbnNmZXIgZXZlbnQgb24gdGhpcyBjb250cmFjdC4KICAgICAqCiAgICAgKiBDYW4gb25seSBiZSwgYW5kLCBjYWxsZWQgYnkgYXNzaWduZWQgcGxhdGZvcm0gd2hlbiBhc3NldCB0cmFuc2ZlciBoYXBwZW5zLgogICAgICovCiAgICBmdW5jdGlvbiBlbWl0VHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGxhdGZvcm0oKSB7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEVtaXRzIEVSQzIwIEFwcHJvdmFsIGV2ZW50IG9uIHRoaXMgY29udHJhY3QuCiAgICAgKgogICAgICogQ2FuIG9ubHkgYmUsIGFuZCwgY2FsbGVkIGJ5IGFzc2lnbmVkIHBsYXRmb3JtIHdoZW4gYXNzZXQgYWxsb3dhbmNlIHNldCBoYXBwZW5zLgogICAgICovCiAgICBmdW5jdGlvbiBlbWl0QXBwcm92ZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgb25seVBsYXRmb3JtKCkgewogICAgICAgIEFwcHJvdmFsKF9mcm9tLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlc29sdmVzIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGZvciB0aGUgY2FsbGVyIGFuZCBmb3J3YXJkcyB0aGVyZSB0cmFuc2FjdGlvbiBkYXRhLAogICAgICogYWxvbmcgd2l0aCB0aGUgdmFsdWUuIFRoaXMgYWxsb3dzIGZvciBwcm94eSBpbnRlcmZhY2UgZ3Jvd3RoLgogICAgICovCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICBfZ2V0QXNzZXQoKS5fX3Byb2Nlc3MudmFsdWUobXNnLnZhbHVlKShtc2cuZGF0YSwgbXNnLnNlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbmRpY2F0ZXMgYW4gdXBncmFkZSBmcmVlemUtdGltZSBzdGFydCwgYW5kIHRoZSBuZXh0IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0LgogICAgICovCiAgICBldmVudCBVcGdyYWRlUHJvcG9zYWwoYWRkcmVzcyBuZXdWZXJzaW9uKTsKCiAgICAvLyBDdXJyZW50IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICBhZGRyZXNzIGxhdGVzdFZlcnNpb247CgogICAgLy8gUHJvcG9zZWQgbmV4dCBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgYWRkcmVzcyBwZW5kaW5nVmVyc2lvbjsKCiAgICAvLyBVcGdyYWRlIGZyZWV6ZS10aW1lIHN0YXJ0LgogICAgdWludCBwZW5kaW5nVmVyc2lvblRpbWVzdGFtcDsKCiAgICAvLyBUaW1lc3BhbiBmb3IgdXNlcnMgdG8gcmV2aWV3IHRoZSBuZXcgaW1wbGVtZW50YXRpb24gYW5kIG1ha2UgZGVjaXNpb24uCiAgICB1aW50IGNvbnN0YW50IFVQR1JBREVfRlJFRVpFX1RJTUUgPSAzIGRheXM7CgogICAgLy8gQXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcyB0aGF0IHVzZXIgZGVjaWRlZCB0byBzdGljayB3aXRoLgogICAgLy8gMHgwIG1lYW5zIHRoYXQgdXNlciB1c2VzIGxhdGVzdCB2ZXJzaW9uLgogICAgbWFwcGluZyhhZGRyZXNzID0+IGFkZHJlc3MpIHVzZXJPcHRPdXRWZXJzaW9uOwoKICAgIC8qKgogICAgICogT25seSBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhc3NpZ25lZCB0byBzZW5kZXIgaXMgYWxsb3dlZCB0byBjYWxsLgogICAgICovCiAgICBtb2RpZmllciBvbmx5QWNjZXNzKGFkZHJlc3MgX3NlbmRlcikgewogICAgICAgIGlmIChnZXRWZXJzaW9uRm9yKF9zZW5kZXIpID09IG1zZy5zZW5kZXIpIHsKICAgICAgICAgICAgXzsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MgYXNzaWduZWQgdG8gc2VuZGVyLgogICAgICoKICAgICAqIEBwYXJhbSBfc2VuZGVyIHNlbmRlciBhZGRyZXNzLgogICAgICoKICAgICAqIEByZXR1cm4gYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0VmVyc2lvbkZvcihhZGRyZXNzIF9zZW5kZXIpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcykgewogICAgICAgIHJldHVybiB1c2VyT3B0T3V0VmVyc2lvbltfc2VuZGVyXSA9PSAwID8gbGF0ZXN0VmVyc2lvbiA6IHVzZXJPcHRPdXRWZXJzaW9uW19zZW5kZXJdOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBjdXJyZW50IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKgogICAgICogQHJldHVybiBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBnZXRMYXRlc3RWZXJzaW9uKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIGxhdGVzdFZlcnNpb247CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHByb3Bvc2VkIG5leHQgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcmV0dXJuIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFBlbmRpbmdWZXJzaW9uKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIHBlbmRpbmdWZXJzaW9uOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB1cGdyYWRlIGZyZWV6ZS10aW1lIHN0YXJ0LgogICAgICoKICAgICAqIEByZXR1cm4gZnJlZXplLXRpbWUgc3RhcnQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFBlbmRpbmdWZXJzaW9uVGltZXN0YW1wKCkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIHBlbmRpbmdWZXJzaW9uVGltZXN0YW1wOwogICAgfQoKICAgIC8qKgogICAgICogUHJvcG9zZSBuZXh0IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKgogICAgICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJ5IGN1cnJlbnQgYXNzZXQgb3duZXIuCiAgICAgKgogICAgICogTm90ZTogZnJlZXplLXRpbWUgc2hvdWxkIG5vdCBiZSBhcHBsaWVkIGZvciB0aGUgaW5pdGlhbCBzZXR1cC4KICAgICAqCiAgICAgKiBAcGFyYW0gX25ld1ZlcnNpb24gYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHByb3Bvc2VVcGdyYWRlKGFkZHJlc3MgX25ld1ZlcnNpb24pIG9ubHlBc3NldE93bmVyKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgLy8gU2hvdWxkIG5vdCBhbHJlYWR5IGJlIGluIHRoZSB1cGdyYWRpbmcgcHJvY2Vzcy4KICAgICAgICBpZiAocGVuZGluZ1ZlcnNpb24gIT0gMHgwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgLy8gTmV3IHZlcnNpb24gYWRkcmVzcyBzaG91bGQgYmUgb3RoZXIgdGhhbiAweDAuCiAgICAgICAgaWYgKF9uZXdWZXJzaW9uID09IDB4MCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIC8vIERvbid0IGFwcGx5IGZyZWV6ZS10aW1lIGZvciB0aGUgaW5pdGlhbCBzZXR1cC4KICAgICAgICBpZiAobGF0ZXN0VmVyc2lvbiA9PSAweDApIHsKICAgICAgICAgICAgbGF0ZXN0VmVyc2lvbiA9IF9uZXdWZXJzaW9uOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcGVuZGluZ1ZlcnNpb24gPSBfbmV3VmVyc2lvbjsKICAgICAgICBwZW5kaW5nVmVyc2lvblRpbWVzdGFtcCA9IG5vdzsKICAgICAgICBVcGdyYWRlUHJvcG9zYWwoX25ld1ZlcnNpb24pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQ2FuY2VsIHRoZSBwZW5kaW5nIHVwZ3JhZGUgcHJvY2Vzcy4KICAgICAqCiAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgYnkgY3VycmVudCBhc3NldCBvd25lci4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHB1cmdlVXBncmFkZSgpIG9ubHlBc3NldE93bmVyKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKHBlbmRpbmdWZXJzaW9uID09IDB4MCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGRlbGV0ZSBwZW5kaW5nVmVyc2lvbjsKICAgICAgICBkZWxldGUgcGVuZGluZ1ZlcnNpb25UaW1lc3RhbXA7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBGaW5hbGl6ZSBhbiB1cGdyYWRlIHByb2Nlc3Mgc2V0dGluZyBuZXcgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAqCiAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgYWZ0ZXIgYW4gdXBncmFkZSBmcmVlemUtdGltZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbW1pdFVwZ3JhZGUoKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAocGVuZGluZ1ZlcnNpb24gPT0gMHgwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKHBlbmRpbmdWZXJzaW9uVGltZXN0YW1wICsgVVBHUkFERV9GUkVFWkVfVElNRSA+IG5vdykgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGxhdGVzdFZlcnNpb24gPSBwZW5kaW5nVmVyc2lvbjsKICAgICAgICBkZWxldGUgcGVuZGluZ1ZlcnNpb247CiAgICAgICAgZGVsZXRlIHBlbmRpbmdWZXJzaW9uVGltZXN0YW1wOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogRGlzYWdyZWUgd2l0aCBwcm9wb3NlZCB1cGdyYWRlLCBhbmQgc3RpY2sgd2l0aCBjdXJyZW50IGFzc2V0IGltcGxlbWVudGF0aW9uCiAgICAgKiB1bnRpbCBmdXJ0aGVyIGV4cGxpY2l0IGFncmVlbWVudCB0byB1cGdyYWRlLgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gb3B0T3V0KCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKHVzZXJPcHRPdXRWZXJzaW9uW21zZy5zZW5kZXJdICE9IDB4MCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHVzZXJPcHRPdXRWZXJzaW9uW21zZy5zZW5kZXJdID0gbGF0ZXN0VmVyc2lvbjsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEltcGxpY2l0bHkgYWdyZWUgdG8gdXBncmFkZSB0byBjdXJyZW50IGFuZCBmdXR1cmUgYXNzZXQgaW1wbGVtZW50YXRpb24gdXBncmFkZXMsCiAgICAgKiB1bnRpbCBmdXJ0aGVyIGV4cGxpY2l0IGRpc2FncmVlbWVudC4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIG9wdEluKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgZGVsZXRlIHVzZXJPcHRPdXRWZXJzaW9uW21zZy5zZW5kZXJdOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9'.
	

]
