Class {
	#name : #SRTe04ed83230374b51d17c96866fde24c0f99b6377,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe04ed83230374b51d17c96866fde24c0f99b6377 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCmxpYnJhcnkgU2FmZUVSQzIwIHsKICBmdW5jdGlvbiBzYWZlVHJhbnNmZXIoRVJDMjBCYXNpYyB0b2tlbiwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgYXNzZXJ0KHRva2VuLnRyYW5zZmVyKHRvLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gc2FmZVRyYW5zZmVyRnJvbShFUkMyMCB0b2tlbiwgYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBpbnRlcm5hbCB7CiAgICBhc3NlcnQodG9rZW4udHJhbnNmZXJGcm9tKGZyb20sIHRvLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFwcHJvdmUoRVJDMjAgdG9rZW4sIGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgYXNzZXJ0KHRva2VuLmFwcHJvdmUoc3BlbmRlciwgdmFsdWUpKTsKICB9Cn0KCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgogICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCmNvbnRyYWN0IERlbGl2ZXJ5IGlzIE93bmFibGV7Cgl1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCQoJdWludDI1NiBwdWJsaWMgQWlyZHJvcHNhbW91bnQ7IC8vIEFpcmRyb3AgdG90YWwgYW1vdW50Cgl1aW50MjU2IHB1YmxpYyBkZWNpbWFsczsgLy8gZGVjaW1hbCBvZiB0aGUgdG9rZW4KCQoJUGVjdWxpdW0gcHVibGljIHBlY3VsOyAvLyB0b2tlbiBQZWN1bGl1bQoJYm9vbCBwdWJsaWMgaW5pdFBlY3VsOyAvLyBXZSBuZWVkIGZpcnN0IHRvIGluaXQgdGhlIFBlY3VsaXVtIFRva2VuIGFkZHJlc3MKCglldmVudCBBaXJkcm9wT25lKGFkZHJlc3MgYWlyZHJvcGFkZHJlc3MsdWludDI1NiBuYlRva2VuU2VuZEFpcmRyb3ApOyAvLyBFdmVudCBmb3Igb25lIGFpcmRyb3AKCWV2ZW50IEFpcmRyb3BMaXN0KGFkZHJlc3NbXSBhaXJkcm9wTGlzdEFkZHJlc3MsdWludDI1NltdIGxpc3RUb2tlblNlbmRBaXJkcm9wKTsgLy8gRXZlbnQgZm9yIGFsbCB0aGUgYWlyZHJvcAoJZXZlbnQgSW5pdGlhbGl6ZWRUb2tlbihhZGRyZXNzIGNvbnRyYWN0VG9rZW4pOwoKCS8vQ29uc3RydWN0b3IKCWZ1bmN0aW9uIERlbGl2ZXJ5KCl7CgkKCQlBaXJkcm9wc2Ftb3VudCA9IDI4MDAwMDAwOyAvLyBXZSBhbGxvY2F0ZSAyOCBNaWxsaW9ucyB0b2tlbiBmb3IgdGhlIGFpcmRyb3AgKG1heWJlIHRvIGNoYW5nZSkgCgkJaW5pdFBlY3VsID0gZmFsc2U7Cgl9CgkKCQoJLyoqKiAgRnVuY3Rpb25zIG9mIHRoZSBjb250cmFjdCAqKiovCgkKCQoJZnVuY3Rpb24gSW5pdFBlY3VsaXVtQWRyZXNzKGFkZHJlc3MgcGVjdWxBZHJlc3MpIG9ubHlPd25lcgoJeyAvLyBXZSBpbml0IHRoZSBQZWN1bGl1bSB0b2tlbiBhZGRyZXNzCgkKCQlwZWN1bCA9IFBlY3VsaXVtKHBlY3VsQWRyZXNzKTsKCQlkZWNpbWFscyA9IHBlY3VsLmRlY2ltYWxzKCk7CgkJaW5pdFBlY3VsID0gdHJ1ZTsKCQlJbml0aWFsaXplZFRva2VuKHBlY3VsQWRyZXNzKTsKCX0KCQoKCWZ1bmN0aW9uIGFpcmRyb3BzVG9rZW5zKGFkZHJlc3NbXSBfdmFkZHIsIHVpbnQyNTZbXSBfdmFtb3VudHMpIG9ubHlPd25lciBJbml0aWFsaXplIE5vdEVtcHR5IAoJeyAKCQkKCQlyZXF1aXJlIChBaXJkcm9wc2Ftb3VudCA+MCk7CgkJcmVxdWlyZSAoIF92YWRkci5sZW5ndGggPT0gX3ZhbW91bnRzLmxlbmd0aCApOwoJCS8vTG9vcGluZyBpbnRvIGlucHV0IGFycmF5cyB0byBhc3NpZ24gdGFyZ2V0IGFtb3VudCB0byBlYWNoIGdpdmVuIGFkZHJlc3MgCgkJdWludDI1NiBhbW91bnRUb1NlbmRUb3RhbCA9IDA7CgkJCgkJZm9yICh1aW50MjU2IGluZGV4VGVzdD0wOyBpbmRleFRlc3Q8X3ZhZGRyLmxlbmd0aDsgaW5kZXhUZXN0KyspIC8vIFdlIGZpcnN0IHRlc3QgdGhhdCB3ZSBoYXZlIGVub3VnaCB0b2tlbiB0byBzZW5kCgkJewoJCQoJCQlhbW91bnRUb1NlbmRUb3RhbC5hZGQoX3ZhbW91bnRzW2luZGV4VGVzdF0pOyAKCQkKCQl9CQkKCQlyZXF1aXJlKGFtb3VudFRvU2VuZFRvdGFsPD1BaXJkcm9wc2Ftb3VudCk7IC8vIElmIG5vIGVub3VnaCB0b2tlbiwgY2FuY2VsIHRoZSBzZWxsIAoJCQoJCWZvciAodWludDI1NiBpbmRleD0wOyBpbmRleDxfdmFkZHIubGVuZ3RoOyBpbmRleCsrKSAKCQl7CgkJCQoJCQlhZGRyZXNzIHRvQWRkcmVzcyA9IF92YWRkcltpbmRleF07CgkJCXVpbnQyNTYgYW1vdW50VG9fU2VuZCA9IF92YW1vdW50c1tpbmRleF0ubXVsKDEwICoqIGRlY2ltYWxzKTsKCQkKCSAgICAgICAgICAgICAgICBwZWN1bC50cmFuc2Zlcih0b0FkZHJlc3MsYW1vdW50VG9fU2VuZCk7CgkJCUFpcmRyb3BPbmUodG9BZGRyZXNzLGFtb3VudFRvX1NlbmQpOwoJCQkKCQl9CgkJQWlyZHJvcHNhbW91bnQgPSBBaXJkcm9wc2Ftb3VudC5zdWIoYW1vdW50VG9TZW5kVG90YWwpOwoJCQkKCQlBaXJkcm9wTGlzdChfdmFkZHIsX3ZhbW91bnRzKTsKCSAgICAgIAoJfQoJCgkvKioqICBNb2RpZmllcnMgb2YgdGhlIGNvbnRyYWN0ICoqKi8KCgltb2RpZmllciBOb3RFbXB0eSB7CgkJcmVxdWlyZSAoQWlyZHJvcHNhbW91bnQ+MCk7CgkJXzsKCX0KCQoJbW9kaWZpZXIgSW5pdGlhbGl6ZSB7CglyZXF1aXJlIChpbml0UGVjdWw9PXRydWUpOwoJXzsKCX0gCgogICAgCiAgICB9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSAgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgogICAgdWludDI1NiBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIC8qKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICovCiAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgfQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCn0KCmNvbnRyYWN0IEJ1cm5hYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgYnVybmVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICAvKioKICAgICAqIEBkZXYgQnVybnMgYSBzcGVjaWZpYyBhbW91bnQgb2YgdG9rZW5zLgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIGJ1cm5lZC4KICAgICAqLwogICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKICAgICAgICAvLyBubyBuZWVkIHRvIHJlcXVpcmUgdmFsdWUgPD0gdG90YWxTdXBwbHksIHNpbmNlIHRoYXQgd291bGQgaW1wbHkgdGhlCiAgICAgICAgLy8gc2VuZGVyJ3MgYmFsYW5jZSBpcyBncmVhdGVyIHRoYW4gdGhlIHRvdGFsU3VwcGx5LCB3aGljaCAqc2hvdWxkKiBiZSBhbiBhc3NlcnRpb24gZmFpbHVyZQoKICAgICAgICBhZGRyZXNzIGJ1cm5lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYmFsYW5jZXNbYnVybmVyXSA9IGJhbGFuY2VzW2J1cm5lcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgICAgICBCdXJuKGJ1cm5lciwgX3ZhbHVlKTsKICAgIH0KfQoKY29udHJhY3QgUGVjdWxpdW0gaXMgQnVybmFibGVUb2tlbixPd25hYmxlIHsgLy8gT3VyIHRva2VuIGlzIGEgc3RhbmRhcmQgRVJDMjAgVG9rZW4gd2l0aCBidXJuYWJsZSBhbmQgb3duYWJsZSBhcHRpdHVkZQoKCXVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OyAvLyBXZSB1c2Ugc2FmZW1hdGggdG8gZG8gYmFzaWMgbWF0aCBvcGVyYXRpb24gKCssLSwqLC8pCgl1c2luZyBTYWZlRVJDMjAgZm9yIEVSQzIwQmFzaWM7IAoKICAgIAkvKiBQdWJsaWMgdmFyaWFibGVzIG9mIHRoZSB0b2tlbiBmb3IgRVJDMjAgY29tcGxpYW5jZSAqLwoJc3RyaW5nIHB1YmxpYyBuYW1lID0gIlBlY3VsaXVtIjsgLy90b2tlbiBuYW1lIAogICAgCXN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlBDTCI7IC8vIHRva2VuIHN5bWJvbAogICAgCXVpbnQyNTYgcHVibGljIGRlY2ltYWxzID0gODsgLy8gdG9rZW4gbnVtYmVyIG9mIGRlY2ltYWwKICAgIAkKICAgIAkvKiBQdWJsaWMgdmFyaWFibGVzIHNwZWNpZmljIGZvciBQZWN1bGl1bSAqLwogICAgICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IE1BWF9TVVBQTFlfTkJUT0tFTiAgID0gMjAwMDAwMDAwMDAqMTAqKjg7IC8vIFRoZSBtYXggY2FwIGlzIDIwIEJpbGxpb24gUGVjdWxpdW0KCgl1aW50MjU2IHB1YmxpYyBkYXRlU3RhcnRDb250cmFjdDsgLy8gVGhlIGRhdGUgb2YgdGhlIGRlcGxveW1lbnQgb2YgdGhlIHRva2VuCgltYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGJhbGFuY2VzQ2FuU2VsbDsgLy8gVGhlIGJvb2xlYW4gdmFyaWFibGUsIHRvIGZyb3N0IHRoZSB0b2tlbnMKCXVpbnQyNTYgcHVibGljIGRhdGVEZWZyb3N0OyAvLyBUaGUgZGF0ZSB3aGVuIHRoZSBvd25lcnMgb2YgdG9rZW4gY2FuIGRlZnJvc3QgdGhlaXIgdG9rZW5zCgoKICAgIAkvKiBFdmVudCBmb3IgdGhlIGZyZWV6ZSBvZiBhY2NvdW50ICovCiAJZXZlbnQgRnJvemVuRnVuZHMoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJvemVuKTsgICAgIAkgCiAgICAgCWV2ZW50IERlZnJvemUoYWRkcmVzcyBtc2dBZGQsIGJvb2wgZnJlZXplKTsKCQoKCiAgIAoJLy9Db25zdHJ1Y3RvcgoJZnVuY3Rpb24gUGVjdWxpdW0oKSB7CgkJdG90YWxTdXBwbHkgPSBNQVhfU1VQUExZX05CVE9LRU47CgkJYmFsYW5jZXNbb3duZXJdID0gdG90YWxTdXBwbHk7IC8vIEF0IHRoZSBiZWdpbm5pbmcsIHRoZSBvd25lciBoYXMgYWxsIHRoZSB0b2tlbnMuIAoJCWJhbGFuY2VzQ2FuU2VsbFtvd25lcl0gPSB0cnVlOyAvLyBUaGUgb3duZXIgbmVlZCB0byBzZWxsIHRva2VuIGZvciB0aGUgcHJpdmF0ZSBzYWxlIGFuZCBmb3IgdGhlIHByZUlDTywgSUNPLgoJCQoJCWRhdGVTdGFydENvbnRyYWN0PW5vdzsKCQlkYXRlRGVmcm9zdCA9IGRhdGVTdGFydENvbnRyYWN0ICsgODUgZGF5czsgLy8gZXZlcnlib2R5IGNhbiBkZWZyb3N0IGhpcyBvd24gdG9rZW4gYWZ0ZXIgdGhlIDI1IGphbnVhcnkgMjAxOCAoODUgZGF5cyBhZnRlciAxIE5vdmVtYmVyKQoKCX0KCgkvKioqIFB1YmxpYyBGdW5jdGlvbnMgb2YgdGhlIGNvbnRyYWN0ICoqKi8JCgkKCWZ1bmN0aW9uIGRlZnJvc3RUb2tlbigpIHB1YmxpYyAKCXsgLy8gRnVuY3Rpb24gdG8gZGVmcm9zdCB5b3VyIG93biB0b2tlbiwgYWZ0ZXIgdGhlIGRhdGUgb2YgdGhlIGRlZnJvc3QKCQoJCXJlcXVpcmUobm93PmRhdGVEZWZyb3N0KTsKCQliYWxhbmNlc0NhblNlbGxbbXNnLnNlbmRlcl09dHJ1ZTsKCQlEZWZyb3plKG1zZy5zZW5kZXIsdHJ1ZSk7Cgl9CgkJCQkKCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIAoJeyAvLyBXZSBvdmVycmlnaHQgdGhlIHRyYW5zZmVyIGZ1bmN0aW9uIHRvIGFsbG93IGZyZWV6ZSBwb3NzaWJpbGl0eQoJCgkJcmVxdWlyZShiYWxhbmNlc0NhblNlbGxbbXNnLnNlbmRlcl0pOwoJCXJldHVybiBCYXNpY1Rva2VuLnRyYW5zZmVyKF90byxfdmFsdWUpOwoJCgl9CgkKCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSAKCXsgLy8gV2Ugb3ZlcnJpZ2h0IHRoZSB0cmFuc2ZlckZyb20gZnVuY3Rpb24gdG8gYWxsb3cgZnJlZXplIHBvc3NpYmlsaXR5IChuZWVkIHRvIGFsbG93IGJlZm9yZSkKCQoJCXJlcXVpcmUoYmFsYW5jZXNDYW5TZWxsW21zZy5zZW5kZXJdKTsJCgkJcmV0dXJuIFN0YW5kYXJkVG9rZW4udHJhbnNmZXJGcm9tKF9mcm9tLF90byxfdmFsdWUpOwoJCgl9CgoJLyoqKiAgT3duZXIgRnVuY3Rpb25zIG9mIHRoZSBjb250cmFjdCAqKiovCQoKICAgCWZ1bmN0aW9uIGZyZWV6ZUFjY291bnQoYWRkcmVzcyB0YXJnZXQsIGJvb2wgY2FuU2VsbCkgb25seU93bmVyIAogICAJewogICAgICAgIAogICAgICAgIAliYWxhbmNlc0NhblNlbGxbdGFyZ2V0XSA9IGNhblNlbGw7CiAgICAgICAgCUZyb3plbkZ1bmRzKHRhcmdldCwgY2FuU2VsbCk7CiAgICAJCiAgICAJfQoKCgkvKioqIE90aGVycyBGdW5jdGlvbnMgb2YgdGhlIGNvbnRyYWN0ICoqKi8JCgkKCS8qIEFwcHJvdmVzIGFuZCB0aGVuIGNhbGxzIHRoZSByZWNlaXZpbmcgY29udHJhY3QgKi8KCWZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCQlhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKCQlBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKCgkJcmVxdWlyZShfc3BlbmRlci5jYWxsKGJ5dGVzNChieXRlczMyKHNoYTMoInJlY2VpdmVBcHByb3ZhbChhZGRyZXNzLHVpbnQyNTYsYWRkcmVzcyxieXRlcykiKSkpLCBtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpKTsKICAgICAgICAJcmV0dXJuIHRydWU7CiAgICB9CgogIAlmdW5jdGlvbiBnZXRCbG9ja1RpbWVzdGFtcCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpCiAgCXsKICAgICAgICAKICAgICAgICAJcmV0dXJuIG5vdzsKICAJCiAgCX0KCiAgCWZ1bmN0aW9uIGdldE93bmVySW5mb3MoKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzIG93bmVyQWRkciwgdWludDI1NiBvd25lckJhbGFuY2UpICAKICAJeyAvLyBSZXR1cm4gaW5mbyBhYm91dCB0aGUgcHVibGljIGFkZHJlc3MgYW5kIGJhbGFuY2Ugb2YgdGhlIGFjY291bnQgb2YgdGhlIG93bmVyIG9mIHRoZSBjb250cmFjdAogICAgCQogICAgCQlvd25lckFkZHIgPSBvd25lcjsKCQlvd25lckJhbGFuY2UgPSBiYWxhbmNlT2Yob3duZXJBZGRyKTsKICAJCiAgCX0KCn0='.
	

]
