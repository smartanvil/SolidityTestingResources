Class {
	#name : #SRTa5dc0165b798779ac80acc84c4da4ee77b79843f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa5dc0165b798779ac80acc84c4da4ee77b79843f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKKgoqICAgIEkgIE4gICAgUCAgSSAgWiAgWiAgQSAgICAgVyAgRSAgICAgQyAgUiAgVSAgUyAgVAoqICAKKiAgICBfX19fX18gX19fXyAgIF9fX19fICAgICAgIF9fX19fIF8KKiAgIHwgIF9fX18vIF9fIFwgLyBfX19ffCAgICAgfCAgX18gKF8pCiogICB8IHxfXyB8IHwgIHwgfCAoX19fICAgICAgIHwgfF9fKSB8IF9fX19fX19fX18gXwoqICAgfCAgX198fCB8ICB8IHxcX19fIFwgICAgICB8ICBfX18vIHxfICAvXyAgLyBfYCB8CiogICB8IHxfX198IHxfX3wgfF9fX18pIHwgIF8gIHwgfCAgIHwgfC8gLyAvIC8gKF98IHwKKiAgIHxfX19fX19cX19fXy98X19fX18vICAoXykgfF98ICAgfF8vX19fL19fX1xfXyxffAoqCioKKgoqICAgQ0hFQ0sgSFRUUFM6Ly9FT1MuUElaWkEgT04gSE9XIFRPIEdFVCBZT1VSIFNMSUNFCiogICBFTkQ6IDE4IE1BWSAyMDE4CioKKiAgIFRoaXMgaXMgZm9yIHRoZSBmdW4uIFRoYW5rIHlvdSB0b2tlbiBmYWN0b3J5IGZvciB5b3VyIHNtYXJ0IGNvbnRyYWN0IGluc3BpcmF0aW9uLgoqICAgSnVtbXkgJiBjcnVzdHkuIEdldCB5b3VyICYjMTI3ODI5O0VQUyB3aGlsZSBpdCdzIGhvdC4gCioKKiAgIGh0dHBzOi8vZW9zLnBpenphCioKKgoqKi8KCi8vIEZpbGU6IGNvbnRyYWN0c1xjb25maWdzXEVvc1BpenphU2xpY2VDb25maWcuc29sCgoKLyoqCiAqIEB0aXRsZSBFb3NQaXp6YVNsaWNlQ29uZmlnCiAqCiAqIEBkZXYgVGhlIHN0YXRpYyBjb25maWd1cmF0aW9uIGZvciB0aGUgRU9TIFBpenphIFNsaWNlLgogKi8KY29udHJhY3QgRW9zUGl6emFTbGljZUNvbmZpZyB7CiAgICAvLyBUaGUgbmFtZSBvZiB0aGUgdG9rZW4uCiAgICBzdHJpbmcgY29uc3RhbnQgTkFNRSA9ICJFT1MuUGl6emEiOwoKICAgIC8vIFRoZSBzeW1ib2wgb2YgdGhlIHRva2VuLgogICAgc3RyaW5nIGNvbnN0YW50IFNZTUJPTCA9ICJFUFMiOwoKICAgIC8vIFRoZSBudW1iZXIgb2YgZGVjaW1hbHMgZm9yIHRoZSB0b2tlbi4KICAgIHVpbnQ4IGNvbnN0YW50IERFQ0lNQUxTID0gMTg7ICAvLyBTYW1lIGFzIGV0aGVycy4KCiAgICAvLyBEZWNpbWFsIGZhY3RvciBmb3IgbXVsdGlwbGljYXRpb24gcHVycG9zZXMuCiAgICB1aW50IGNvbnN0YW50IERFQ0lNQUxTX0ZBQ1RPUiA9IDEwICoqIHVpbnQoREVDSU1BTFMpOwp9CgovLyBGaWxlOiBjb250cmFjdHNcaW50ZXJmYWNlc1xFUkMyMFRva2VuSW50ZXJmYWNlLnNvbAoKLyoqCiAqIEBkZXYgVGhlIHN0YW5kYXJkIEVSQzIwIFRva2VuIGludGVyZmFjZS4KICovCmNvbnRyYWN0IEVSQzIwVG9rZW5JbnRlcmZhY2UgewogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7ICAvKiBzaG9ydGhhbmQgZm9yIHB1YmxpYyBmdW5jdGlvbiBhbmQgYSBwcm9wZXJ0eSAqLwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKCn0KCi8vIEZpbGU6IGNvbnRyYWN0c1xsaWJyYXJpZXNcU2FmZU1hdGguc29sCgovKioKICogQGRldiBMaWJyYXJ5IHRoYXQgaGVscHMgcHJldmVudCBpbnRlZ2VyIG92ZXJmbG93cyBhbmQgdW5kZXJmbG93cywKICogaW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eQogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBwbHVzKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gbWludXModWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgIGFzc2VydChiIDw9IGEpOwoKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwoKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYyA9IGEgLyBiOwoKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQoKLy8gRmlsZTogY29udHJhY3RzXHRyYWl0c1xFUkMyMFRva2VuLnNvbAoKLyoqCiAqIEB0aXRsZSBFUkMyMFRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50cyB0aGUgb3BlcmF0aW9ucyBkZWNsYXJlZCBpbiB0aGUgYEVSQzIwVG9rZW5JbnRlcmZhY2VgLgogKi8KY29udHJhY3QgRVJDMjBUb2tlbiBpcyBFUkMyMFRva2VuSW50ZXJmYWNlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAgIC8vIFRva2VuIGFjY291bnQgYmFsYW5jZXMuCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAgIC8vIERlbGVnYXRlZCBudW1iZXIgb2YgdG9rZW5zIHRvIHRyYW5zZmVyLgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwoKCgogICAgLyoqCiAgICAgKiBAZGV2IENoZWNrcyB0aGUgYmFsYW5jZSBvZiBhIGNlcnRhaW4gYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcGFyYW0gX2FjY291bnQgVGhlIGFkZHJlc3Mgd2hpY2gncyBiYWxhbmNlIHdpbGwgYmUgY2hlY2tlZC4KICAgICAqCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIGJhbGFuY2Ugb2YgdGhlIGBfYWNjb3VudGAgYWRkcmVzcy4KICAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX2FjY291bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX2FjY291bnRdOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUcmFuc2ZlcnMgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4KICAgICAqCiAgICAgKiBAcGFyYW0gX3RvIFRoZSB0YXJnZXQgYWRkcmVzcyB0byB3aGljaCB0aGUgYF92YWx1ZWAgbnVtYmVyIG9mIHRva2VucyB3aWxsIGJlIHNlbnQuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBudW1iZXIgb2YgdG9rZW5zIHRvIHNlbmQuCiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IF92YWx1ZSB8fCBfdmFsdWUgPT0gMCkgewoKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLnBsdXMoX3ZhbHVlKTsKCgogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFNlbmQgYF92YWx1ZWAgdG9rZW5zIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBpZiBgX2Zyb21gIGhhcyBhcHByb3ZlZCB0aGUgcHJvY2Vzcy4KICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlci4KICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudC4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIG51bWJlciBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQuCiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dIDwgX3ZhbHVlIHx8IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIDwgX3ZhbHVlIHx8IF92YWx1ZSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLnBsdXMoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKCgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgYW5vdGhlciBjb250cmFjdCB0byBzcGVuZCBzb21lIHRva2VucyBvbiB5b3VyIGJlaGFsZi4KICAgICAqCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgd2hpY2ggd2lsbCBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIgb2YgdG9rZW5zLgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgbnVtYmVyIG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIuCiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBTaG93cyB0aGUgbnVtYmVyIG9mIHRva2VucyBhcHByb3ZlZCBieSBgX293bmVyYCB0aGF0IGFyZSBhbGxvd2VkIHRvIGJlIHRyYW5zZmVycmVkIGJ5IGBfc3BlbmRlcmAuCiAgICAgKgogICAgICogQHBhcmFtIF9vd25lciBUaGUgYWNjb3VudCB3aGljaCBhbGxvd2VkIHRoZSB0cmFuc2Zlci4KICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWNjb3VudCB3aGljaCB3aWxsIHNwZW5kIHRoZSB0b2tlbnMuCiAgICAgKgogICAgICogQHJldHVybiBUaGUgbnVtYmVyIG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZC4KICAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KfQoKLy8gRmlsZTogY29udHJhY3RzXHRyYWl0c1xIYXNPd25lci5zb2wKCi8qKgogKiBAdGl0bGUgSGFzT3duZXIKICoKICogQGRldiBBbGxvd3MgZm9yIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gY2VydGFpbiBmdW5jdGlvbmFsaXR5LgogKi8KY29udHJhY3QgSGFzT3duZXIgewogICAgLy8gQ3VycmVudCBvd25lci4KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIC8vIENvbmRpdGlvbmFsbHkgdGhlIG5ldyBvd25lci4KICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgY29uc3RydWN0b3IuCiAgICAgKgogICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgb3duZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIEhhc093bmVyKGFkZHJlc3MgX293bmVyKSBpbnRlcm5hbCB7CiAgICAgICAgb3duZXIgPSBfb3duZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFjY2VzcyBjb250cm9sIG1vZGlmaWVyIHRoYXQgYWxsb3dzIG9ubHkgdGhlIGN1cnJlbnQgb3duZXIgdG8gY2FsbCB0aGUgZnVuY3Rpb24uCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUaGUgZXZlbnQgaXMgZmlyZWQgd2hlbiB0aGUgY3VycmVudCBvd25lciBpcyBjaGFuZ2VkLgogICAgICoKICAgICAqIEBwYXJhbSBfb2xkT3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIHByZXZpb3VzIG93bmVyLgogICAgICogQHBhcmFtIF9uZXdPd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IG93bmVyLgogICAgICovCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX29sZE93bmVyLCBhZGRyZXNzIGluZGV4ZWQgX25ld093bmVyKTsKCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXJpbmcgdGhlIG93bmVyc2hpcCBpcyBhIHR3by1zdGVwIHByb2Nlc3MsIGFzIHdlIHByZXBhcmUKICAgICAqIGZvciB0aGUgdHJhbnNmZXIgYnkgc2V0dGluZyBgbmV3T3duZXJgIGFuZCByZXF1aXJpbmcgYG5ld093bmVyYCB0byBhY2NlcHQKICAgICAqIHRoZSB0cmFuc2Zlci4gVGhpcyBwcmV2ZW50cyBhY2NpZGVudGFsIGxvY2stb3V0IGlmIHNvbWV0aGluZyBnb2VzIHdyb25nCiAgICAgKiB3aGVuIHBhc3NpbmcgdGhlIGBuZXdPd25lcmAgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcGFyYW0gX25ld093bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBwcm9wb3NlZCBuZXcgb3duZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVGhlIGBuZXdPd25lcmAgZmluaXNoZXMgdGhlIG93bmVyc2hpcCB0cmFuc2ZlciBwcm9jZXNzIGJ5IGFjY2VwdGluZyB0aGUKICAgICAqIG93bmVyc2hpcC4KICAgICAqLwogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpOwoKICAgICAgICBPd25lcnNoaXBUcmFuc2Zlcihvd25lciwgbmV3T3duZXIpOwoKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQp9CgovLyBGaWxlOiBjb250cmFjdHNcdHJhaXRzXEZyZWV6YWJsZS5zb2wKCi8qKgogKiBAdGl0bGUgRnJlZXphYmxlCiAqIEBkZXYgVGhpcyB0cmFpdCBhbGxvd3MgdG8gZnJlZXplIHRoZSB0cmFuc2FjdGlvbnMgaW4gYSBUb2tlbgogKi8KY29udHJhY3QgRnJlZXphYmxlIGlzIEhhc093bmVyIHsKICBib29sIHB1YmxpYyBmcm96ZW4gPSBmYWxzZTsKCiAgLyoqCiAgICogQGRldiBNb2RpZmllciBtYWtlcyBtZXRob2RzIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IGZyb3plbi4KICAgKi8KICBtb2RpZmllciByZXF1aXJlTm90RnJvemVuKCkgewogICAgcmVxdWlyZSghZnJvemVuKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgb3duZXIgdG8gImZyZWV6ZSIgdGhlIGNvbnRyYWN0LgogICAqLwogIGZ1bmN0aW9uIGZyZWV6ZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgZnJvemVuID0gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byAidW5mcmVlemUiIHRoZSBjb250cmFjdC4KICAgKi8KICBmdW5jdGlvbiB1bmZyZWV6ZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgZnJvemVuID0gZmFsc2U7CiAgfQp9CgovLyBGaWxlOiBjb250cmFjdHNcdHJhaXRzXEZyZWV6YWJsZUVSQzIwVG9rZW4uc29sCgovKioKICogQHRpdGxlIEZyZWV6YWJsZUVSQzIwVG9rZW4KICoKICogQGRldiBFeHRlbmRzIEVSQzIwVG9rZW4gYW5kIGFkZHMgYWJpbGl0eSB0byBmcmVlemUgYWxsIHRyYW5zZmVycyBvZiB0b2tlbnMuCiAqLwpjb250cmFjdCBGcmVlemFibGVFUkMyMFRva2VuIGlzIEVSQzIwVG9rZW4sIEZyZWV6YWJsZSB7CiAgICAvKioKICAgICAqIEBkZXYgT3ZlcnJpZGVzIHRoZSBvcmlnaW5hbCBFUkMyMFRva2VuIGltcGxlbWVudGF0aW9uIGJ5IGFkZGluZyB3aGVuTm90RnJvemVuIG1vZGlmaWVyLgogICAgICoKICAgICAqIEBwYXJhbSBfdG8gVGhlIHRhcmdldCBhZGRyZXNzIHRvIHdoaWNoIHRoZSBgX3ZhbHVlYCBudW1iZXIgb2YgdG9rZW5zIHdpbGwgYmUgc2VudC4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIG51bWJlciBvZiB0b2tlbnMgdG8gc2VuZC4KICAgICAqCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdC4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmVxdWlyZU5vdEZyb3plbiByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBTZW5kIGBfdmFsdWVgIHRva2VucyB0byBgX3RvYCBmcm9tIGBfZnJvbWAgaWYgYF9mcm9tYCBoYXMgYXBwcm92ZWQgdGhlIHByb2Nlc3MuCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIuCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBudW1iZXIgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkLgogICAgICoKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90LgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmVxdWlyZU5vdEZyb3plbiByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyBhbm90aGVyIGNvbnRyYWN0IHRvIHNwZW5kIHNvbWUgdG9rZW5zIG9uIHlvdXIgYmVoYWxmLgogICAgICoKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCB3aGljaCB3aWxsIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlciBvZiB0b2tlbnMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBudW1iZXIgb2YgdG9rZW5zIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2Zlci4KICAgICAqCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdC4KICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcHVibGljIHJlcXVpcmVOb3RGcm96ZW4gcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLmFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9Cgp9CgovLyBGaWxlOiBjb250cmFjdHNcRW9zUGl6emFTbGljZS5zb2wKCi8qKgogKiBAdGl0bGUgRU9TIFBpenphIFNsaWNlCiAqCiAqIEBkZXYgQSBzdGFuZGFyZCB0b2tlbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgRVJDMjAgdG9rZW4gc3RhbmRhcmQgd2l0aCBhZGRlZAogKiAgICAgIEhhc093bmVyIHRyYWl0IGFuZCBpbml0aWFsaXplZCB1c2luZyB0aGUgY29uZmlndXJhdGlvbiBjb25zdGFudHMuCiAqLwpjb250cmFjdCBFb3NQaXp6YVNsaWNlIGlzIEVvc1BpenphU2xpY2VDb25maWcsIEhhc093bmVyLCBGcmVlemFibGVFUkMyMFRva2VuIHsKICAgIC8vIFRoZSBuYW1lIG9mIHRoZSB0b2tlbi4KICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKCiAgICAvLyBUaGUgc3ltYm9sIGZvciB0aGUgdG9rZW4uCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKCiAgICAvLyBUaGUgZGVjaW1hbHMgb2YgdGhlIHRva2VuLgogICAgdWludDggcHVibGljIGRlY2ltYWxzOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgY29uc3RydWN0b3IuIEluaXRpYWxseSBzZXRzIGB0b3RhbFN1cHBseWAgYW5kIHRoZSBiYWxhbmNlIG9mIHRoZQogICAgICogICAgICBgb3duZXJgIGFkZHJlc3MgYWNjb3JkaW5nIHRvIHRoZSBpbml0aWFsaXphdGlvbiBwYXJhbWV0ZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIEVvc1BpenphU2xpY2UodWludCBfdG90YWxTdXBwbHkpIHB1YmxpYwogICAgICAgIEhhc093bmVyKG1zZy5zZW5kZXIpCiAgICB7CiAgICAgICAgbmFtZSA9IE5BTUU7CiAgICAgICAgc3ltYm9sID0gU1lNQk9MOwogICAgICAgIGRlY2ltYWxzID0gREVDSU1BTFM7CiAgICAgICAgdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHk7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gX3RvdGFsU3VwcGx5OwogICAgfQp9CgovLyBGaWxlOiBjb250cmFjdHNcY29uZmlnc1xFb3NQaXp6YVNsaWNlRG9uYXRpb25yYWlzZXJDb25maWcuc29sCgovKioKICogQHRpdGxlIEVvc1BpenphU2xpY2VEb25hdGlvbnJhaXNlckNvbmZpZwogKgogKiBAZGV2IFRoZSBzdGF0aWMgY29uZmlndXJhdGlvbiBmb3IgdGhlIEVPUyBQaXp6YSBTbGljZSBkb25hdGlvbnJhaXNlci4KICovCmNvbnRyYWN0IEVvc1BpenphU2xpY2VEb25hdGlvbnJhaXNlckNvbmZpZyBpcyBFb3NQaXp6YVNsaWNlQ29uZmlnIHsKICAgIC8vIFRoZSBudW1iZXIgb2YgJiMxMjc4Mjk7IHBlciAxIEVUSC4KICAgIHVpbnQgY29uc3RhbnQgQ09OVkVSU0lPTl9SQVRFID0gMTAwMDAwOwoKICAgIC8vIFRoZSBwdWJsaWMgc2FsZSBoYXJkIGNhcCBvZiB0aGUgZG9uYXRpb25yYWlzZXIuCiAgICB1aW50IGNvbnN0YW50IFRPS0VOU19IQVJEX0NBUCA9IDk1ICogKDEwKio3KSAqIERFQ0lNQUxTX0ZBQ1RPUjsKCiAgICAvLyBUaGUgc3RhcnQgZGF0ZSBvZiB0aGUgZG9uYXRpb25yYWlzZXI6IEZyaWRheSwgOSBNYXJjaCAyMDE4IDIxOjIyOjIyIFVUQy4KICAgIHVpbnQgY29uc3RhbnQgU1RBUlRfREFURSA9IDE1MjA2MzA1NDI7CgogICAgLy8gVGhlIGVuZCBkYXRlIG9mIHRoZSBkb25hdGlvbnJhaXNlcjogIE1heSAxOCwgMjAxOCwgMTI6MzU6MjAgQU0gVVRDIC0gQml0Y29pbiBQaXp6YSA4dGggeWVhciBjZWxlYnJhdGlvbiBtb21lbnQuCiAgICB1aW50IGNvbnN0YW50IEVORF9EQVRFID0gIDE1MjY2MDM3MjA7CgoKICAgIC8vIFRvdGFsIG51bWJlciBvZiB0b2tlbnMgbG9ja2VkIGZvciB0aGUgJiMxMjc4Mjk7IGNvcmUgdGVhbS4KICAgIHVpbnQgY29uc3RhbnQgVE9LRU5TX0xPQ0tFRF9DT1JFX1RFQU0gPSAzNSAqICgxMCoqNikgKiBERUNJTUFMU19GQUNUT1I7CgogICAgLy8gVG90YWwgbnVtYmVyIG9mIHRva2VucyBsb2NrZWQgZm9yICYjMTI3ODI5OyBhZHZpc29ycy4KICAgIHVpbnQgY29uc3RhbnQgVE9LRU5TX0xPQ0tFRF9BRFZJU09SUyA9IDEyNSAqICgxMCoqNSkgKiBERUNJTUFMU19GQUNUT1I7CgogICAgLy8gVGhlIHJlbGVhc2UgZGF0ZSBmb3IgdG9rZW5zIGxvY2tlZCBmb3IgdGhlICYjMTI3ODI5OyBjb3JlIHRlYW0uCiAgICB1aW50IGNvbnN0YW50IFRPS0VOU19MT0NLRURfQ09SRV9URUFNX1JFTEVBU0VfREFURSA9IEVORF9EQVRFICsgMSBkYXlzOwoKICAgIC8vIFRoZSByZWxlYXNlIGRhdGUgZm9yIHRva2VucyBsb2NrZWQgZm9yICYjMTI3ODI5OyBhZHZpc29ycy4KICAgIHVpbnQgY29uc3RhbnQgVE9LRU5TX0xPQ0tFRF9BRFZJU09SU19SRUxFQVNFX0RBVEUgPSBFTkRfREFURSArIDEgZGF5czsKCiAgICAvLyBUb3RhbCBudW1iZXIgb2YgdG9rZW5zIGxvY2tlZCBmb3IgYm91bnR5IHByb2dyYW0uCiAgICB1aW50IGNvbnN0YW50IFRPS0VOU19CT1VOVFlfUFJPR1JBTSA9IDI1ICogKDEwKio1KSAqIERFQ0lNQUxTX0ZBQ1RPUjsKCiAgICAvLyBNYXhpbXVtIGdhcyBwcmljZSBsaW1pdAogICAgdWludCBjb25zdGFudCBNQVhfR0FTX1BSSUNFID0gOTAwMDAwMDAwMDAgd2VpOyAvLyA5MCBnd2VpL3NoYW5vbgoKICAgIC8vIE1pbmltdW0gaW5kaXZpZHVhbCBjb250cmlidXRpb24KICAgIHVpbnQgY29uc3RhbnQgTUlOX0NPTlRSSUJVVElPTiA9ICAwLjA1IGV0aGVyOwoKICAgIC8vIEluZGl2aWR1YWwgbGltaXQgaW4gZXRoZXIKICAgIHVpbnQgY29uc3RhbnQgSU5ESVZJRFVBTF9FVEhFUl9MSU1JVCA9ICA0OTk5IGV0aGVyOwp9CgovLyBGaWxlOiBjb250cmFjdHNcdHJhaXRzXFRva2VuU2FmZS5zb2wKCi8qKgogKiBAdGl0bGUgVG9rZW5TYWZlCiAqCiAqIEBkZXYgQSBtdWx0aS1idW5kbGUgdG9rZW4gc2FmZSBjb250cmFjdCB0aGF0IGNvbnRhaW5zIGxvY2tlZCB0b2tlbnMgcmVsZWFzZWQgYWZ0ZXIgYSBkYXRlIGZvciB0aGUgc3BlY2lmaWMgYnVuZGxlIHR5cGUuCiAqLwpjb250cmFjdCBUb2tlblNhZmUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogICAgc3RydWN0IEFjY291bnRzQnVuZGxlIHsKICAgICAgICAvLyBUaGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyBsb2NrZWQuCiAgICAgICAgdWludCBsb2NrZWRUb2tlbnM7CiAgICAgICAgLy8gVGhlIHJlbGVhc2UgZGF0ZSBmb3IgdGhlIGxvY2tlZCB0b2tlbnMKICAgICAgICAvLyBOb3RlOiBVbml4IHRpbWVzdGFtcCBmaXRzIHVpbnQzMiwgaG93ZXZlciBibG9jay50aW1lc3RhbXAgaXMgdWludAogICAgICAgIHVpbnQgcmVsZWFzZURhdGU7CiAgICAgICAgLy8gVGhlIGJhbGFuY2VzIGZvciB0aGUgJiMxMjc4Mjk7IGxvY2tlZCB0b2tlbiBhY2NvdW50cy4KICAgICAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogICAgfQoKICAgIC8vIFRoZSBhY2NvdW50IGJ1bmRsZXMgb2YgbG9ja2VkIHRva2VucyBncm91cGVkIGJ5IHJlbGVhc2UgZGF0ZQogICAgbWFwcGluZyAodWludDggPT4gQWNjb3VudHNCdW5kbGUpIHB1YmxpYyBidW5kbGVzOwoKICAgIC8vIFRoZSBgRVJDMjBUb2tlbkludGVyZmFjZWAgY29udHJhY3QuCiAgICBFUkMyMFRva2VuSW50ZXJmYWNlIHRva2VuOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgY29uc3RydWN0b3IuCiAgICAgKgogICAgICogQHBhcmFtIF90b2tlbiBUaGUgYWRkcmVzcyBvZiB0aGUgRU9TIFBpenphIFNsaWNlcyAoZG9uYXRpb24pIGNvbnRyYWN0LgogICAgICovCiAgICBmdW5jdGlvbiBUb2tlblNhZmUoYWRkcmVzcyBfdG9rZW4pIHB1YmxpYyB7CiAgICAgICAgdG9rZW4gPSBFUkMyMFRva2VuSW50ZXJmYWNlKF90b2tlbik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBmdW5jdGlvbiBpbml0aWFsaXplcyB0aGUgYnVuZGxlIG9mIGFjY291bnRzIHdpdGggYSByZWxlYXNlIGRhdGUuCiAgICAgKgogICAgICogQHBhcmFtIF90eXBlIEJ1bmRsZSB0eXBlLgogICAgICogQHBhcmFtIF9yZWxlYXNlRGF0ZSBVbml4IHRpbWVzdGFtcCBvZiB0aGUgdGltZSBhZnRlciB3aGljaCB0aGUgdG9rZW5zIGNhbiBiZSByZWxlYXNlZAogICAgICovCiAgICBmdW5jdGlvbiBpbml0QnVuZGxlKHVpbnQ4IF90eXBlLCB1aW50IF9yZWxlYXNlRGF0ZSkgaW50ZXJuYWwgewogICAgICAgIGJ1bmRsZXNbX3R5cGVdLnJlbGVhc2VEYXRlID0gX3JlbGVhc2VEYXRlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBZGQgbmV3IGFjY291bnQgd2l0aCBsb2NrZWQgdG9rZW4gYmFsYW5jZSB0byB0aGUgc3BlY2lmaWVkIGJ1bmRsZSB0eXBlLgogICAgICoKICAgICAqIEBwYXJhbSBfdHlwZSBCdW5kbGUgdHlwZS4KICAgICAqIEBwYXJhbSBfYWNjb3VudCBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCB0byBiZSBhZGRlZC4KICAgICAqIEBwYXJhbSBfYmFsYW5jZSBUaGUgbnVtYmVyIG9mIHRva2VucyB0byBiZSBsb2NrZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFkZExvY2tlZEFjY291bnQodWludDggX3R5cGUsIGFkZHJlc3MgX2FjY291bnQsIHVpbnQgX2JhbGFuY2UpIGludGVybmFsIHsKICAgICAgICB2YXIgYnVuZGxlID0gYnVuZGxlc1tfdHlwZV07CiAgICAgICAgYnVuZGxlLmJhbGFuY2VzW19hY2NvdW50XSA9IGJ1bmRsZS5iYWxhbmNlc1tfYWNjb3VudF0ucGx1cyhfYmFsYW5jZSk7CiAgICAgICAgYnVuZGxlLmxvY2tlZFRva2VucyA9IGJ1bmRsZS5sb2NrZWRUb2tlbnMucGx1cyhfYmFsYW5jZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyBhbiBhY2NvdW50IHRvIGJlIHJlbGVhc2VkIGlmIGl0IG1lZXRzIHRoZSB0aW1lIGNvbnN0cmFpbnRzLgogICAgICoKICAgICAqIEBwYXJhbSBfdHlwZSBCdW5kbGUgdHlwZS4KICAgICAqIEBwYXJhbSBfYWNjb3VudCBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCB0byBiZSByZWxlYXNlZC4KICAgICAqLwogICAgZnVuY3Rpb24gcmVsZWFzZUFjY291bnQodWludDggX3R5cGUsIGFkZHJlc3MgX2FjY291bnQpIGludGVybmFsIHsKICAgICAgICB2YXIgYnVuZGxlID0gYnVuZGxlc1tfdHlwZV07CiAgICAgICAgcmVxdWlyZShub3cgPj0gYnVuZGxlLnJlbGVhc2VEYXRlKTsKICAgICAgICB1aW50IHRva2VucyA9IGJ1bmRsZS5iYWxhbmNlc1tfYWNjb3VudF07CiAgICAgICAgcmVxdWlyZSh0b2tlbnMgPiAwKTsKICAgICAgICBidW5kbGUuYmFsYW5jZXNbX2FjY291bnRdID0gMDsKICAgICAgICBidW5kbGUubG9ja2VkVG9rZW5zID0gYnVuZGxlLmxvY2tlZFRva2Vucy5taW51cyh0b2tlbnMpOwogICAgICAgIGlmICghdG9rZW4udHJhbnNmZXIoX2FjY291bnQsIHRva2VucykpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgfQp9CgovLyBGaWxlOiBjb250cmFjdHNcRW9zUGl6emFTbGljZVNhZmUuc29sCgovKioKICogQHRpdGxlIEVvc1BpenphU2xpY2VTYWZlCiAqCiAqIEBkZXYgVGhlIEVPUyBQaXp6YSBTbGljZSBzYWZlIGNvbnRhaW5pbmcgYWxsIGRldGFpbHMgYWJvdXQgbG9ja2VkIHRva2Vucy4KICovCmNvbnRyYWN0IEVvc1BpenphU2xpY2VTYWZlIGlzIFRva2VuU2FmZSwgRW9zUGl6emFTbGljZURvbmF0aW9ucmFpc2VyQ29uZmlnIHsKICAgIC8vIEJ1bmRsZSB0eXBlIGNvbnN0YW50cwogICAgdWludDggY29uc3RhbnQgQ09SRV9URUFNID0gMDsKICAgIHVpbnQ4IGNvbnN0YW50IEFEVklTT1JTID0gMTsKCiAgICAvKioKICAgICAqIEBkZXYgVGhlIGNvbnN0cnVjdG9yLgogICAgICoKICAgICAqIEBwYXJhbSBfdG9rZW4gVGhlIGFkZHJlc3Mgb2YgdGhlIEVPUyBQaXp6YSAoZG9uYXRpb24pIGNvbnRyYWN0LgogICAgICovCiAgICBmdW5jdGlvbiBFb3NQaXp6YVNsaWNlU2FmZShhZGRyZXNzIF90b2tlbikgcHVibGljCiAgICAgICAgVG9rZW5TYWZlKF90b2tlbikKICAgIHsKICAgICAgICB0b2tlbiA9IEVSQzIwVG9rZW5JbnRlcmZhY2UoX3Rva2VuKTsKCiAgICAgICAgLy8vIENvcmUgdGVhbS4KICAgICAgICBpbml0QnVuZGxlKENPUkVfVEVBTSwKICAgICAgICAgICAgVE9LRU5TX0xPQ0tFRF9DT1JFX1RFQU1fUkVMRUFTRV9EQVRFCiAgICAgICAgKTsKCiAgICAgICAgLy8gQWNjb3VudHMgd2l0aCB0b2tlbnMgbG9ja2VkIGZvciB0aGUgJiMxMjc4Mjk7IGNvcmUgdGVhbS4KICAgICAgICBhZGRMb2NrZWRBY2NvdW50KENPUkVfVEVBTSwgMHgzY2UyMTViMmU0ZEM5RDJiYTBlMmZDNTA5OTMxNUU0RmEwNWQ4QUEyLCAzNSAqICgxMCoqNikgKiBERUNJTUFMU19GQUNUT1IpOwoKCiAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlIHRva2VucyBhZGQgdXAgdG8gdGhlIGNvbnN0YW50IGluIHRoZSBjb25maWd1cmF0aW9uLgogICAgICAgIGFzc2VydChidW5kbGVzW0NPUkVfVEVBTV0ubG9ja2VkVG9rZW5zID09IFRPS0VOU19MT0NLRURfQ09SRV9URUFNKTsKCiAgICAgICAgLy8vIEFkdmlzb3JzLgogICAgICAgIGluaXRCdW5kbGUoQURWSVNPUlMsCiAgICAgICAgICAgIFRPS0VOU19MT0NLRURfQURWSVNPUlNfUkVMRUFTRV9EQVRFCiAgICAgICAgKTsKCiAgICAgICAgLy8gQWNjb3VudHMgd2l0aCAmIzEyNzgyOTsgdG9rZW5zIGxvY2tlZCBmb3IgYWR2aXNvcnMuCiAgICAgICAgYWRkTG9ja2VkQWNjb3VudChBRFZJU09SUywgMHhDMGUzMjFFOTMwNWMyMWI3MkY1RWU3NTJBOUU4RDllQ0QwZjJlMmIxLCAyNSAqICgxMCoqNSkgKiBERUNJTUFMU19GQUNUT1IpOwogICAgICAgIGFkZExvY2tlZEFjY291bnQoQURWSVNPUlMsIDB4NTU3OThDRjIzNEZFYTc2MGIwNTkxNTM3NTE3Qzk3NkZEYjBjNTNCYSwgMjUgKiAoMTAqKjUpICogREVDSU1BTFNfRkFDVE9SKTsKICAgICAgICBhZGRMb2NrZWRBY2NvdW50KEFEVklTT1JTLCAweGJjNzMyZTczQjk0QTVDNGE4ZjYwZDBEOThDNDAyNmRGMjFENTAwZjUsIDI1ICogKDEwKio1KSAqIERFQ0lNQUxTX0ZBQ1RPUik7CiAgICAgICAgYWRkTG9ja2VkQWNjb3VudChBRFZJU09SUywgMHgwODhFRUVlN0M0YzI2MDQxRkJiNGU4M0MxMENCMDc4NEM4MWM4NmY5LCAyNSAqICgxMCoqNSkgKiBERUNJTUFMU19GQUNUT1IpOwogICAgICAgIGFkZExvY2tlZEFjY291bnQoQURWSVNPUlMsIDB4NTJkNjQwYzljNDE3RDliN0UzNzcwZDk2MDk0NkRkNUJkMkVCNjNkYiwgMjUgKiAoMTAqKjUpICogREVDSU1BTFNfRkFDVE9SKTsKCgogICAgICAgIC8vIFZlcmlmeSB0aGF0IHRoZSB0b2tlbnMgYWRkIHVwIHRvIHRoZSBjb25zdGFudCBpbiB0aGUgY29uZmlndXJhdGlvbi4KICAgICAgICBhc3NlcnQoYnVuZGxlc1tBRFZJU09SU10ubG9ja2VkVG9rZW5zID09IFRPS0VOU19MT0NLRURfQURWSVNPUlMpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBSZXR1cm5zIHRoZSB0b3RhbCBsb2NrZWQgdG9rZW5zLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBieSB0aGUgZG9uYXRpb25yYWlzZXIgdG8gZGV0ZXJtaW5lIG51bWJlciBvZiB0b2tlbnMgdG8gY3JlYXRlIHVwb24gZmluYWxpemF0aW9uLgogICAgICoKICAgICAqIEByZXR1cm4gVGhlIGN1cnJlbnQgdG90YWwgbnVtYmVyIG9mIGxvY2tlZCBFT1MgUGl6emEgU2xpY2VzLgogICAgICovCiAgICBmdW5jdGlvbiB0b3RhbFRva2Vuc0xvY2tlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGJ1bmRsZXNbQ09SRV9URUFNXS5sb2NrZWRUb2tlbnMucGx1cyhidW5kbGVzW0FEVklTT1JTXS5sb2NrZWRUb2tlbnMpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgY29yZSB0ZWFtIGFjY291bnQgJiMxMjc4Mjk7IHRva2VucyB0byBiZSByZWxlYXNlZC4KICAgICAqLwogICAgZnVuY3Rpb24gcmVsZWFzZUNvcmVUZWFtQWNjb3VudCgpIHB1YmxpYyB7CiAgICAgICAgcmVsZWFzZUFjY291bnQoQ09SRV9URUFNLCBtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIGFkdmlzb3JzIGFjY291bnQgJiMxMjc4Mjk7IHRva2VucyB0byBiZSByZWxlYXNlZC4KICAgICAqLwogICAgZnVuY3Rpb24gcmVsZWFzZUFkdmlzb3JzQWNjb3VudCgpIHB1YmxpYyB7CiAgICAgICAgcmVsZWFzZUFjY291bnQoQURWSVNPUlMsIG1zZy5zZW5kZXIpOwogICAgfQp9CgovLyBGaWxlOiBjb250cmFjdHNcdHJhaXRzXFdoaXRlbGlzdC5zb2wKCmNvbnRyYWN0IFdoaXRlbGlzdCBpcyBIYXNPd25lcgp7CiAgICAvLyBXaGl0ZWxpc3QgbWFwcGluZwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyB3aGl0ZWxpc3Q7CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBjb25zdHJ1Y3Rvci4KICAgICAqLwogICAgZnVuY3Rpb24gV2hpdGVsaXN0KGFkZHJlc3MgX293bmVyKSBwdWJsaWMKICAgICAgICBIYXNPd25lcihfb3duZXIpCiAgICB7CgogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBY2Nlc3MgY29udHJvbCBtb2RpZmllciB0aGF0IGFsbG93cyBvbmx5IHdoaXRlbGlzdGVkIGFkZHJlc3MgdG8gY2FsbCB0aGUgbWV0aG9kLgogICAgICovCiAgICBtb2RpZmllciBvbmx5V2hpdGVsaXN0ZWQgewogICAgICAgIHJlcXVpcmUod2hpdGVsaXN0W21zZy5zZW5kZXJdKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0aGF0IHNldHMgd2hpdGVsaXN0IHN0YXR1cyBpbiBiYXRjaC4KICAgICAqCiAgICAgKiBAcGFyYW0gX2VudHJpZXMgQW4gYXJyYXkgd2l0aCB0aGUgZW50cmllcyB0byBiZSB1cGRhdGVkCiAgICAgKiBAcGFyYW0gX3N0YXR1cyBUaGUgbmV3IHN0YXR1cyB0byBhcHBseQogICAgICovCiAgICBmdW5jdGlvbiBzZXRXaGl0ZWxpc3RFbnRyaWVzKGFkZHJlc3NbXSBfZW50cmllcywgYm9vbCBfc3RhdHVzKSBpbnRlcm5hbCB7CiAgICAgICAgZm9yICh1aW50MzIgaSA9IDA7IGkgPCBfZW50cmllcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB3aGl0ZWxpc3RbX2VudHJpZXNbaV1dID0gX3N0YXR1czsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFB1YmxpYyBmdW5jdGlvbiB0aGF0IGFsbG93cyB0aGUgb3duZXIgdG8gd2hpdGVsaXN0IG11bHRpcGxlIGVudHJpZXMKICAgICAqCiAgICAgKiBAcGFyYW0gX2VudHJpZXMgQW4gYXJyYXkgd2l0aCB0aGUgZW50cmllcyB0byBiZSB3aGl0ZWxpc3RlZAogICAgICovCiAgICBmdW5jdGlvbiB3aGl0ZWxpc3RBZGRyZXNzZXMoYWRkcmVzc1tdIF9lbnRyaWVzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBzZXRXaGl0ZWxpc3RFbnRyaWVzKF9lbnRyaWVzLCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgUHVibGljIGZ1bmN0aW9uIHRoYXQgYWxsb3dzIHRoZSBvd25lciB0byBibGFja2xpc3QgbXVsdGlwbGUgZW50cmllcwogICAgICoKICAgICAqIEBwYXJhbSBfZW50cmllcyBBbiBhcnJheSB3aXRoIHRoZSBlbnRyaWVzIHRvIGJlIGJsYWNrbGlzdAogICAgICovCiAgICBmdW5jdGlvbiBibGFja2xpc3RBZGRyZXNzZXMoYWRkcmVzc1tdIF9lbnRyaWVzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBzZXRXaGl0ZWxpc3RFbnRyaWVzKF9lbnRyaWVzLCBmYWxzZSk7CiAgICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0c1xFb3NQaXp6YVNsaWNlRG9uYXRpb25yYWlzZXIuc29sCgovKioKICogQHRpdGxlIEVvc1BpenphU2xpY2VEb25hdGlvbnJhaXNlcgogKgogKiBAZGV2IFRoZSBFT1MgUGl6emEgU2xpY2UgZG9uYXRpb25yYWlzZXIgY29udHJhY3QuCiAqLwpjb250cmFjdCBFb3NQaXp6YVNsaWNlRG9uYXRpb25yYWlzZXIgaXMgRW9zUGl6emFTbGljZSwgRW9zUGl6emFTbGljZURvbmF0aW9ucmFpc2VyQ29uZmlnLCBXaGl0ZWxpc3QgewogICAgLy8gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGRvbmF0aW9ucmFpc2VyIGhhcyBlbmRlZCBvciBub3QuCiAgICBib29sIHB1YmxpYyBmaW5hbGl6ZWQgPSBmYWxzZTsKCiAgICAvLyBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCB3aGljaCB3aWxsIHJlY2VpdmUgdGhlIGZ1bmRzIGdhdGhlcmVkIGJ5IHRoZSBkb25hdGlvbnJhaXNlci4KICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwoKICAgIC8vIFRoZSBudW1iZXIgb2YgJiMxMjc4Mjk7IHBhcnRpY2lwYW50cyB3aWxsIHJlY2VpdmUgcGVyIDEgRVRILgogICAgdWludCBwdWJsaWMgY29udmVyc2lvblJhdGU7CgogICAgLy8gRG9uYXRpb25yYWlzZXIgc3RhcnQgZGF0ZS4KICAgIHVpbnQgcHVibGljIHN0YXJ0RGF0ZTsKCiAgICAvLyBEb25hdGlvbnJhaXNlciBlbmQgZGF0ZS4KICAgIHVpbnQgcHVibGljIGVuZERhdGU7CgogICAgLy8gRG9uYXRpb25yYWlzZXIgdG9rZW5zIGhhcmQgY2FwLgogICAgdWludCBwdWJsaWMgaGFyZENhcDsKCiAgICAvLyBUaGUgYEVvc1BpenphU2xpY2VTYWZlYCBjb250cmFjdC4KICAgIEVvc1BpenphU2xpY2VTYWZlIHB1YmxpYyBlb3NQaXp6YVNsaWNlU2FmZTsKCiAgICAvLyBUaGUgbWluaW11bSBhbW91bnQgb2YgZXRoZXIgYWxsb3dlZCBpbiB0aGUgcHVibGljIHNhbGUKICAgIHVpbnQgaW50ZXJuYWwgbWluaW11bUNvbnRyaWJ1dGlvbjsKCiAgICAvLyBUaGUgbWF4aW11bSBhbW91bnQgb2YgZXRoZXIgYWxsb3dlZCBwZXIgYWRkcmVzcwogICAgdWludCBpbnRlcm5hbCBpbmRpdmlkdWFsTGltaXQ7CgogICAgLy8gTnVtYmVyIG9mIHRva2VucyBzb2xkIGR1cmluZyB0aGUgZG9uYXRpb25yYWlzZXIuCiAgICB1aW50IHByaXZhdGUgdG9rZW5zU29sZDsKCgoKICAgIC8qKgogICAgICogQGRldiBUaGUgZXZlbnQgZmlyZXMgZXZlcnkgdGltZSBhIG5ldyBidXllciBlbnRlcnMgdGhlIGRvbmF0aW9ucmFpc2VyLgogICAgICoKICAgICAqIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyBvZiB0aGUgYnV5ZXIuCiAgICAgKiBAcGFyYW0gX2V0aGVycyBUaGUgbnVtYmVyIG9mIGV0aGVycyBzZW50LgogICAgICogQHBhcmFtIF90b2tlbnMgVGhlIG51bWJlciBvZiB0b2tlbnMgcmVjZWl2ZWQgYnkgdGhlIGJ1eWVyLgogICAgICogQHBhcmFtIF9uZXdUb3RhbFN1cHBseSBUaGUgdXBkYXRlZCB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGN1cnJlbnRseSBpbiBjaXJjdWxhdGlvbi4KICAgICAqIEBwYXJhbSBfY29udmVyc2lvblJhdGUgVGhlIGNvbnZlcnNpb24gcmF0ZSBhdCB3aGljaCB0aGUgdG9rZW5zIHdlcmUgYm91Z2h0LgogICAgICovCiAgICBldmVudCBGdW5kc1JlY2VpdmVkKGFkZHJlc3MgaW5kZXhlZCBfYWRkcmVzcywgdWludCBfZXRoZXJzLCB1aW50IF90b2tlbnMsIHVpbnQgX25ld1RvdGFsU3VwcGx5LCB1aW50IF9jb252ZXJzaW9uUmF0ZSk7CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBldmVudCBmaXJlcyB3aGVuIHRoZSBiZW5lZmljaWFyeSBvZiB0aGUgZG9uYXRpb25yYWlzZXIgaXMgY2hhbmdlZC4KICAgICAqCiAgICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgYmVuZWZpY2lhcnkuCiAgICAgKi8KICAgIGV2ZW50IEJlbmVmaWNpYXJ5Q2hhbmdlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5KTsKCiAgICAvKioKICAgICAqIEBkZXYgVGhlIGV2ZW50IGZpcmVzIHdoZW4gdGhlIG51bWJlciBvZiAmIzEyNzgyOTtFUFMgcGVyIDEgRVRIIGlzIGNoYW5nZWQuCiAgICAgKgogICAgICogQHBhcmFtIF9jb252ZXJzaW9uUmF0ZSBUaGUgbmV3IG51bWJlciBvZiAmIzEyNzgyOTtFUFMgcGVyIDEgRVRILgogICAgICovCiAgICBldmVudCBDb252ZXJzaW9uUmF0ZUNoYW5nZSh1aW50IF9jb252ZXJzaW9uUmF0ZSk7CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBldmVudCBmaXJlcyB3aGVuIHRoZSBkb25hdGlvbnJhaXNlciBpcyBzdWNjZXNzZnVsbHkgZmluYWxpemVkLgogICAgICoKICAgICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgVGhlIGFkZHJlc3Mgb2YgdGhlIGJlbmVmaWNpYXJ5LgogICAgICogQHBhcmFtIF9ldGhlcnMgVGhlIG51bWJlciBvZiBldGhlcnMgdHJhbnNmZXJlZCB0byB0aGUgYmVuZWZpY2lhcnkuCiAgICAgKiBAcGFyYW0gX3RvdGFsU3VwcGx5IFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGluIGNpcmN1bGF0aW9uLgogICAgICovCiAgICBldmVudCBGaW5hbGl6ZWQoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQgX2V0aGVycywgdWludCBfdG90YWxTdXBwbHkpOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgY29uc3RydWN0b3IuCiAgICAgKgogICAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHJlY2VpdmUgdGhlIGZ1bmRzIGdhdGhlcmVkIGJ5IHRoZSBkb25hdGlvbnJhaXNlci4KICAgICAqLwogICAgZnVuY3Rpb24gRW9zUGl6emFTbGljZURvbmF0aW9ucmFpc2VyKGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBwdWJsaWMKICAgICAgICBFb3NQaXp6YVNsaWNlKDApCiAgICAgICAgV2hpdGVsaXN0KG1zZy5zZW5kZXIpCiAgICB7CiAgICAgICAgcmVxdWlyZShfYmVuZWZpY2lhcnkgIT0gMCk7CgogICAgICAgIGJlbmVmaWNpYXJ5ID0gX2JlbmVmaWNpYXJ5OwogICAgICAgIGNvbnZlcnNpb25SYXRlID0gQ09OVkVSU0lPTl9SQVRFOwogICAgICAgIHN0YXJ0RGF0ZSA9IFNUQVJUX0RBVEU7CiAgICAgICAgZW5kRGF0ZSA9IEVORF9EQVRFOwogICAgICAgIGhhcmRDYXAgPSBUT0tFTlNfSEFSRF9DQVA7CiAgICAgICAgdG9rZW5zU29sZCA9IDA7CiAgICAgICAgbWluaW11bUNvbnRyaWJ1dGlvbiA9IE1JTl9DT05UUklCVVRJT047CiAgICAgICAgaW5kaXZpZHVhbExpbWl0ID0gSU5ESVZJRFVBTF9FVEhFUl9MSU1JVCAqIENPTlZFUlNJT05fUkFURTsKCiAgICAgICAgZW9zUGl6emFTbGljZVNhZmUgPSBuZXcgRW9zUGl6emFTbGljZVNhZmUodGhpcyk7CgogICAgICAgIC8vIEZyZWV6ZSB0aGUgdHJhbnNmZXJzIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGRvbmF0aW9ucmFpc2VyLiBSZW1vdmVkIHRoaXMsIHlvdSBjYW4gaW1tZWRpYXRlbHkgdHJhbnNmZXIgeW91ciAmIzEyNzgyOTtFUFMgdG8gYW55IGV0aGVyIGFkZHJlc3MgeW91IGxpa2UhCiAgICAgICAgLy8gZnJlZXplKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IENoYW5nZXMgdGhlIGJlbmVmaWNpYXJ5IG9mIHRoZSBkb25hdGlvbnJhaXNlci4KICAgICAqCiAgICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgYmVuZWZpY2lhcnkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldEJlbmVmaWNpYXJ5KGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9iZW5lZmljaWFyeSAhPSAwKTsKCiAgICAgICAgYmVuZWZpY2lhcnkgPSBfYmVuZWZpY2lhcnk7CgogICAgICAgIEJlbmVmaWNpYXJ5Q2hhbmdlKF9iZW5lZmljaWFyeSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFNldHMgY29udmVyc3Rpb24gcmF0ZSBvZiAxIEVUSCB0byAmIzEyNzgyOTtFUFMuIENhbiBvbmx5IGJlIGNoYW5nZWQgYmVmb3JlIHRoZSBkb25hdGlvbnJhaXNlciBzdGFydHMuCiAgICAgKgogICAgICogQHBhcmFtIF9jb252ZXJzaW9uUmF0ZSBUaGUgbmV3IG51bWJlciBvZiBFT1MgUGl6emEgU2xpY2VzIHBlciAxIEVUSC4KICAgICAqLwogICAgZnVuY3Rpb24gc2V0Q29udmVyc2lvblJhdGUodWludCBfY29udmVyc2lvblJhdGUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobm93IDwgc3RhcnREYXRlKTsKICAgICAgICByZXF1aXJlKF9jb252ZXJzaW9uUmF0ZSA+IDApOwoKICAgICAgICBjb252ZXJzaW9uUmF0ZSA9IF9jb252ZXJzaW9uUmF0ZTsKICAgICAgICBpbmRpdmlkdWFsTGltaXQgPSBJTkRJVklEVUFMX0VUSEVSX0xJTUlUICogX2NvbnZlcnNpb25SYXRlOwoKICAgICAgICBDb252ZXJzaW9uUmF0ZUNoYW5nZShfY29udmVyc2lvblJhdGUpOwogICAgfQoKCgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBkZWZhdWx0IGZ1bmN0aW9uIHdoaWNoIHdpbGwgZmlyZSBldmVyeSB0aW1lIHNvbWVvbmUgc2VuZHMgZXRoZXJzIHRvIHRoaXMgY29udHJhY3QncyBhZGRyZXNzLgogICAgICovCiAgICBmdW5jdGlvbigpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBidXlUb2tlbnMoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQ3JlYXRlcyBuZXcgdG9rZW5zIGJhc2VkIG9uIHRoZSBudW1iZXIgb2YgZXRoZXJzIHNlbnQgYW5kIHRoZSBjb252ZXJzaW9uIHJhdGUuCiAgICAgKi8KICAgIC8vZnVuY3Rpb24gYnV5VG9rZW5zKCkgcHVibGljIHBheWFibGUgb25seVdoaXRlbGlzdGVkIHsKICAgIGZ1bmN0aW9uIGJ1eVRva2VucygpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKCFmaW5hbGl6ZWQpOwogICAgICAgIHJlcXVpcmUobm93ID49IHN0YXJ0RGF0ZSk7CiAgICAgICAgcmVxdWlyZShub3cgPD0gZW5kRGF0ZSk7CiAgICAgICAgcmVxdWlyZSh0eC5nYXNwcmljZSA8PSBNQVhfR0FTX1BSSUNFKTsgIC8vIGdhcyBwcmljZSBsaW1pdAogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IG1pbmltdW1Db250cmlidXRpb24pOyAgLy8gcmVxdWlyZWQgbWluaW11bSBjb250cmlidXRpb24KICAgICAgICByZXF1aXJlKHRva2Vuc1NvbGQgPD0gaGFyZENhcCk7CgogICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIHRva2VucyB0aGUgYnV5ZXIgd2lsbCByZWNlaXZlLgogICAgICAgIHVpbnQgdG9rZW5zID0gbXNnLnZhbHVlLm11bChjb252ZXJzaW9uUmF0ZSk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5wbHVzKHRva2Vucyk7CgogICAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBpbmRpdmlkdWFsIGNvbnRyaWJ1dGlvbiBsaW1pdCBoYXMgbm90IGJlZW4gcmVhY2hlZAogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPD0gaW5kaXZpZHVhbExpbWl0KTsKCgoKICAgICAgICB0b2tlbnNTb2xkID0gdG9rZW5zU29sZC5wbHVzKHRva2Vucyk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5wbHVzKHRva2Vucyk7CgogICAgICAgIFRyYW5zZmVyKDB4MCwgbXNnLnNlbmRlciwgdG9rZW5zKTsKCiAgICAgICAgRnVuZHNSZWNlaXZlZCgKICAgICAgICAgICAgbXNnLnNlbmRlciwKICAgICAgICAgICAgbXNnLnZhbHVlLAogICAgICAgICAgICB0b2tlbnMsCiAgICAgICAgICAgIHRvdGFsU3VwcGx5LAogICAgICAgICAgICBjb252ZXJzaW9uUmF0ZQogICAgICAgICk7CiAgICB9CgoKCiAgICAvKioKICAgICAqIEBkZXYgRmluYWxpemUgdGhlIGRvbmF0aW9ucmFpc2VyIGlmIGBlbmREYXRlYCBoYXMgcGFzc2VkIG9yIGlmIGBoYXJkQ2FwYCBpcyByZWFjaGVkLgogICAgICovCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoKHRvdGFsU3VwcGx5ID49IGhhcmRDYXApIHx8IChub3cgPj0gZW5kRGF0ZSkpOwogICAgICAgIHJlcXVpcmUoIWZpbmFsaXplZCk7CgogICAgICAgIGFkZHJlc3MgY29udHJhY3RBZGRyZXNzID0gdGhpczsKICAgICAgICBGaW5hbGl6ZWQoYmVuZWZpY2lhcnksIGNvbnRyYWN0QWRkcmVzcy5iYWxhbmNlLCB0b3RhbFN1cHBseSk7CgogICAgICAgIC8vLyBTZW5kIHRoZSB0b3RhbCBudW1iZXIgb2YgRVRIIGdhdGhlcmVkIHRvIHRoZSBiZW5lZmljaWFyeS4KICAgICAgICBiZW5lZmljaWFyeS50cmFuc2Zlcihjb250cmFjdEFkZHJlc3MuYmFsYW5jZSk7CgogICAgICAgIC8vLyBBbGxvY2F0ZSBsb2NrZWQgdG9rZW5zIHRvIHRoZSBgRW9zUGl6emFTbGljZVNhZmVgIGNvbnRyYWN0LgogICAgICAgIHVpbnQgdG90YWxUb2tlbnNMb2NrZWQgPSBlb3NQaXp6YVNsaWNlU2FmZS50b3RhbFRva2Vuc0xvY2tlZCgpOwogICAgICAgIGJhbGFuY2VzW2FkZHJlc3MoZW9zUGl6emFTbGljZVNhZmUpXSA9IGJhbGFuY2VzW2FkZHJlc3MoZW9zUGl6emFTbGljZVNhZmUpXS5wbHVzKHRvdGFsVG9rZW5zTG9ja2VkKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnBsdXModG90YWxUb2tlbnNMb2NrZWQpOwoKICAgICAgICAvLyBUcmFuc2ZlciB0aGUgZnVuZHMgZm9yIHRoZSBib3VudHkgcHJvZ3JhbS4KICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0ucGx1cyhUT0tFTlNfQk9VTlRZX1BST0dSQU0pOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkucGx1cyhUT0tFTlNfQk9VTlRZX1BST0dSQU0pOwoKICAgICAgICAvLy8gRmluYWxpemUgdGhlIGRvbmF0aW9ucmFpc2VyLiBLZWVwIGluIG1pbmQgdGhhdCB0aGlzIGNhbm5vdCBiZSB1bmRvbmUuCiAgICAgICAgZmluYWxpemVkID0gdHJ1ZTsKCiAgICAgICAgLy8gVW5mcmVlemUgdHJhbnNmZXJzCiAgICAgICAgdW5mcmVlemUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgYWxsb3cgb3duZXIgdG8gY29sbGVjdCBiYWxhbmNlIG9mIGNvbnRyYWN0IGR1cmluZyBkb25hdGlvbiBwZXJpb2QKICAgICAqLwoKICAgIGZ1bmN0aW9uIGNvbGxlY3QoKSBwdWJsaWMgb25seU93bmVyIHsKCiAgICAgICAgYWRkcmVzcyBjb250cmFjdEFkZHJlc3MgPSB0aGlzOwogICAgICAgIC8vLyBTZW5kIHRoZSB0b3RhbCBudW1iZXIgb2YgRVRIIGdhdGhlcmVkIHRvIHRoZSBiZW5lZmljaWFyeS4KICAgICAgICBiZW5lZmljaWFyeS50cmFuc2Zlcihjb250cmFjdEFkZHJlc3MuYmFsYW5jZSk7CgogICAgfQp9'.
	

]
