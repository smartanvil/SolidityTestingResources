Class {
	#name : #SRTba6a643f02fad92124c936ad0f4e9b6889812881,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTba6a643f02fad92124c936ad0f4e9b6889812881 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgoKCgoKY29udHJhY3QgQ3V0aWVDb3JlSW50ZXJmYWNlCnsKICAgIGZ1bmN0aW9uIGlzQ3V0aWVDb3JlKCkgcHVyZSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9jdXRpZUlkKSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9jdXRpZUlkKSBleHRlcm5hbDsKCiAgICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX2N1dGllSWQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoYWRkcmVzcyBvd25lcik7CgogICAgZnVuY3Rpb24gZ2V0Q3V0aWUodWludDQwIF9pZCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICgKICAgICAgICB1aW50MjU2IGdlbmVzLAogICAgICAgIHVpbnQ0MCBiaXJ0aFRpbWUsCiAgICAgICAgdWludDQwIGNvb2xkb3duRW5kVGltZSwKICAgICAgICB1aW50NDAgbW9tSWQsCiAgICAgICAgdWludDQwIGRhZElkLAogICAgICAgIHVpbnQxNiBjb29sZG93bkluZGV4LAogICAgICAgIHVpbnQxNiBnZW5lcmF0aW9uCiAgICApOwoKICAgICBmdW5jdGlvbiBnZXRHZW5lcyh1aW50NDAgX2lkKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICgKICAgICAgICB1aW50MjU2IGdlbmVzCiAgICApOwoKCiAgICBmdW5jdGlvbiBnZXRDb29sZG93bkVuZFRpbWUodWludDQwIF9pZCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoCiAgICAgICAgdWludDQwIGNvb2xkb3duRW5kVGltZQogICAgKTsKCiAgICBmdW5jdGlvbiBnZXRDb29sZG93bkluZGV4KHVpbnQ0MCBfaWQpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnMgKAogICAgICAgIHVpbnQxNiBjb29sZG93bkluZGV4CiAgICApOwoKCiAgICBmdW5jdGlvbiBnZXRHZW5lcmF0aW9uKHVpbnQ0MCBfaWQpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnMgKAogICAgICAgIHVpbnQxNiBnZW5lcmF0aW9uCiAgICApOwoKICAgIGZ1bmN0aW9uIGdldE9wdGlvbmFsKHVpbnQ0MCBfaWQpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnMgKAogICAgICAgIHVpbnQ2NCBvcHRpb25hbAogICAgKTsKCgogICAgZnVuY3Rpb24gY2hhbmdlR2VuZXMoCiAgICAgICAgdWludDQwIF9jdXRpZUlkLAogICAgICAgIHVpbnQyNTYgX2dlbmVzKQogICAgICAgIHB1YmxpYzsKCiAgICBmdW5jdGlvbiBjaGFuZ2VDb29sZG93bkVuZFRpbWUoCiAgICAgICAgdWludDQwIF9jdXRpZUlkLAogICAgICAgIHVpbnQ0MCBfY29vbGRvd25FbmRUaW1lKQogICAgICAgIHB1YmxpYzsKCiAgICBmdW5jdGlvbiBjaGFuZ2VDb29sZG93bkluZGV4KAogICAgICAgIHVpbnQ0MCBfY3V0aWVJZCwKICAgICAgICB1aW50MTYgX2Nvb2xkb3duSW5kZXgpCiAgICAgICAgcHVibGljOwoKICAgIGZ1bmN0aW9uIGNoYW5nZU9wdGlvbmFsKAogICAgICAgIHVpbnQ0MCBfY3V0aWVJZCwKICAgICAgICB1aW50NjQgX29wdGlvbmFsKQogICAgICAgIHB1YmxpYzsKCiAgICBmdW5jdGlvbiBjaGFuZ2VHZW5lcmF0aW9uKAogICAgICAgIHVpbnQ0MCBfY3V0aWVJZCwKICAgICAgICB1aW50MTYgX2dlbmVyYXRpb24pCiAgICAgICAgcHVibGljOwp9CgoKCgoKCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgZW1pdCBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgoKCi8qKgogKiBAdGl0bGUgUGF1c2FibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgogKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CiAgZXZlbnQgUGF1c2UoKTsKICBldmVudCBVbnBhdXNlKCk7CgogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBub3QgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gdHJ1ZTsKICAgIGVtaXQgUGF1c2UoKTsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgd2hlblBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBlbWl0IFVucGF1c2UoKTsKICB9Cn0KCgoKLy8vIEB0aXRsZSBBdWN0aW9uIE1hcmtldCBmb3IgQmxvY2tjaGFpbiBDdXRpZXMuCi8vLyBAYXV0aG9yIGh0dHBzOi8vQmxvY2tDaGFpbkFyY2hpdGVjdC5pbwpjb250cmFjdCBNYXJrZXRJbnRlcmZhY2UgCnsKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RXRoRnJvbUJhbGFuY2UoKSBleHRlcm5hbDsgICAgCgogICAgZnVuY3Rpb24gY3JlYXRlQXVjdGlvbih1aW50NDAgX2N1dGllSWQsIHVpbnQxMjggX3N0YXJ0UHJpY2UsIHVpbnQxMjggX2VuZFByaWNlLCB1aW50NDAgX2R1cmF0aW9uLCBhZGRyZXNzIF9zZWxsZXIpIHB1YmxpYyBwYXlhYmxlOwoKICAgIGZ1bmN0aW9uIGJpZCh1aW50NDAgX2N1dGllSWQpIHB1YmxpYyBwYXlhYmxlOwp9CgoKLy8vIEB0aXRsZSBBdWN0aW9uIE1hcmtldCBmb3IgQmxvY2tjaGFpbiBDdXRpZXMuCi8vLyBAYXV0aG9yIGh0dHBzOi8vQmxvY2tDaGFpbkFyY2hpdGVjdC5pbwpjb250cmFjdCBNYXJrZXQgaXMgTWFya2V0SW50ZXJmYWNlLCBQYXVzYWJsZQp7CiAgICAvLyBTaG93cyB0aGUgYXVjdGlvbiBvbiBhbiBDdXRpZSBUb2tlbgogICAgc3RydWN0IEF1Y3Rpb24gewogICAgICAgIC8vIFByaWNlIChpbiB3ZWkpIGF0IHRoZSBiZWdpbm5pbmcgb2YgYXVjdGlvbgogICAgICAgIHVpbnQxMjggc3RhcnRQcmljZTsKICAgICAgICAvLyBQcmljZSAoaW4gd2VpKSBhdCB0aGUgZW5kIG9mIGF1Y3Rpb24KICAgICAgICB1aW50MTI4IGVuZFByaWNlOwogICAgICAgIC8vIEN1cnJlbnQgb3duZXIgb2YgVG9rZW4KICAgICAgICBhZGRyZXNzIHNlbGxlcjsKICAgICAgICAvLyBBdWN0aW9uIGR1cmF0aW9uIGluIHNlY29uZHMKICAgICAgICB1aW50NDAgZHVyYXRpb247CiAgICAgICAgLy8gVGltZSB3aGVuIGF1Y3Rpb24gc3RhcnRlZAogICAgICAgIC8vIE5PVEU6IDAgaWYgdGhpcyBhdWN0aW9uIGhhcyBiZWVuIGNvbmNsdWRlZAogICAgICAgIHVpbnQ0MCBzdGFydGVkQXQ7CiAgICB9CgogICAgLy8gUmVmZXJlbmNlIHRvIGNvbnRyYWN0IHRoYXQgdHJhY2tzIG93bmVyc2hpcAogICAgQ3V0aWVDb3JlSW50ZXJmYWNlIHB1YmxpYyBjb3JlQ29udHJhY3Q7CgogICAgLy8gQ3V0IG93bmVyIHRha2VzIG9uIGVhY2ggYXVjdGlvbiwgaW4gYmFzaXMgcG9pbnRzIC0gMS8xMDAgb2YgYSBwZXIgY2VudC4KICAgIC8vIFZhbHVlcyAwLTEwLDAwMCBtYXAgdG8gMCUtMTAwJQogICAgdWludDE2IHB1YmxpYyBvd25lckZlZTsKCiAgICAvLyBNYXAgZnJvbSB0b2tlbiBJRCB0byB0aGVpciBjb3JyZXNwb25kaW5nIGF1Y3Rpb24uCiAgICBtYXBwaW5nICh1aW50NDAgPT4gQXVjdGlvbikgY3V0aWVJZFRvQXVjdGlvbjsKCiAgICBldmVudCBBdWN0aW9uQ3JlYXRlZCh1aW50NDAgY3V0aWVJZCwgdWludDEyOCBzdGFydFByaWNlLCB1aW50MTI4IGVuZFByaWNlLCB1aW50NDAgZHVyYXRpb24sIHVpbnQyNTYgZmVlKTsKICAgIGV2ZW50IEF1Y3Rpb25TdWNjZXNzZnVsKHVpbnQ0MCBjdXRpZUlkLCB1aW50MTI4IHRvdGFsUHJpY2UsIGFkZHJlc3Mgd2lubmVyKTsKICAgIGV2ZW50IEF1Y3Rpb25DYW5jZWxsZWQodWludDQwIGN1dGllSWQpOwoKICAgIC8vLyBAZGV2IGRpc2FibGVzIHNlbmRpbmcgZnVuZCB0byB0aGlzIGNvbnRyYWN0CiAgICBmdW5jdGlvbigpIGV4dGVybmFsIHt9CgogICAgbW9kaWZpZXIgY2FuQmVTdG9yZWRJbjEyOEJpdHModWludDI1NiBfdmFsdWUpIAogICAgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IDB4RkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkYpOwogICAgICAgIF87CiAgICB9CgogICAgLy8gQGRldiBBZGRzIHRvIHRoZSBsaXN0IG9mIG9wZW4gYXVjdGlvbnMgYW5kIGZpcmVzIHRoZQogICAgLy8gIEF1Y3Rpb25DcmVhdGVkIGV2ZW50LgogICAgLy8gQHBhcmFtIF9jdXRpZUlkIFRoZSB0b2tlbiBJRCBpcyB0byBiZSBwdXQgb24gYXVjdGlvbi4KICAgIC8vIEBwYXJhbSBfYXVjdGlvbiBUbyBhZGQgYW4gYXVjdGlvbi4KICAgIC8vIEBwYXJhbSBfZmVlIEFtb3VudCBvZiBtb25leSB0byBmZWF0dXJlIGF1Y3Rpb24KICAgIGZ1bmN0aW9uIF9hZGRBdWN0aW9uKHVpbnQ0MCBfY3V0aWVJZCwgQXVjdGlvbiBfYXVjdGlvbiwgdWludDI1NiBfZmVlKSBpbnRlcm5hbAogICAgewogICAgICAgIC8vIFJlcXVpcmUgdGhhdCBhbGwgYXVjdGlvbnMgaGF2ZSBhIGR1cmF0aW9uIG9mCiAgICAgICAgLy8gYXQgbGVhc3Qgb25lIG1pbnV0ZS4gKEtlZXBzIG91ciBtYXRoIGZyb20gZ2V0dGluZyBoYWlyeSEpCiAgICAgICAgcmVxdWlyZShfYXVjdGlvbi5kdXJhdGlvbiA+PSAxIG1pbnV0ZXMpOwoKICAgICAgICBjdXRpZUlkVG9BdWN0aW9uW19jdXRpZUlkXSA9IF9hdWN0aW9uOwogICAgICAgIAogICAgICAgIGVtaXQgQXVjdGlvbkNyZWF0ZWQoCiAgICAgICAgICAgIF9jdXRpZUlkLAogICAgICAgICAgICBfYXVjdGlvbi5zdGFydFByaWNlLAogICAgICAgICAgICBfYXVjdGlvbi5lbmRQcmljZSwKICAgICAgICAgICAgX2F1Y3Rpb24uZHVyYXRpb24sCiAgICAgICAgICAgIF9mZWUKICAgICAgICApOwogICAgfQoKICAgIC8vIEBkZXYgUmV0dXJucyB0cnVlIGlmIHRoZSB0b2tlbiBpcyBjbGFpbWVkIGJ5IHRoZSBjbGFpbWFudC4KICAgIC8vIEBwYXJhbSBfY2xhaW1hbnQgLSBBZGRyZXNzIGNsYWltaW5nIHRvIG93biB0aGUgdG9rZW4uCiAgICBmdW5jdGlvbiBfaXNPd25lcihhZGRyZXNzIF9jbGFpbWFudCwgdWludDI1NiBfY3V0aWVJZCkgaW50ZXJuYWwgdmlldyByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiAoY29yZUNvbnRyYWN0Lm93bmVyT2YoX2N1dGllSWQpID09IF9jbGFpbWFudCk7CiAgICB9CgogICAgLy8gQGRldiBUcmFuc2ZlcnMgdGhlIHRva2VuIG93bmVkIGJ5IHRoaXMgY29udHJhY3QgdG8gYW5vdGhlciBhZGRyZXNzLgogICAgLy8gUmV0dXJucyB0cnVlIHdoZW4gdGhlIHRyYW5zZmVyIHN1Y2NlZWRzLgogICAgLy8gQHBhcmFtIF9yZWNlaXZlciAtIEFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW4gdG8uCiAgICAvLyBAcGFyYW0gX2N1dGllSWQgLSBUb2tlbiBJRCB0byB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9yZWNlaXZlciwgdWludDQwIF9jdXRpZUlkKSBpbnRlcm5hbAogICAgewogICAgICAgIC8vIGl0IHdpbGwgdGhyb3cgaWYgdHJhbnNmZXIgZmFpbHMKICAgICAgICBjb3JlQ29udHJhY3QudHJhbnNmZXIoX3JlY2VpdmVyLCBfY3V0aWVJZCk7CiAgICB9CgogICAgLy8gQGRldiBFc2Nyb3dzIHRoZSB0b2tlbiBhbmQgYXNzaWducyBvd25lcnNoaXAgdG8gdGhpcyBjb250cmFjdC4KICAgIC8vIFRocm93cyBpZiB0aGUgZXNjcm93IGZhaWxzLgogICAgLy8gQHBhcmFtIF9vd25lciAtIEN1cnJlbnQgb3duZXIgYWRkcmVzcyBvZiB0b2tlbiB0byBlc2Nyb3cuCiAgICAvLyBAcGFyYW0gX2N1dGllSWQgLSBUb2tlbiBJRCB0aGUgYXBwcm92YWwgb2Ygd2hpY2ggaXMgdG8gYmUgdmVyaWZpZWQuCiAgICBmdW5jdGlvbiBfZXNjcm93KGFkZHJlc3MgX293bmVyLCB1aW50NDAgX2N1dGllSWQpIGludGVybmFsCiAgICB7CiAgICAgICAgLy8gaXQgd2lsbCB0aHJvdyBpZiB0cmFuc2ZlciBmYWlscwogICAgICAgIGNvcmVDb250cmFjdC50cmFuc2ZlckZyb20oX293bmVyLCB0aGlzLCBfY3V0aWVJZCk7CiAgICB9CgoKICAgIC8vIEBkZXYganVzdCBjYW5jZWwgYXVjdGlvbi4KICAgIGZ1bmN0aW9uIF9jYW5jZWxBY3RpdmVBdWN0aW9uKHVpbnQ0MCBfY3V0aWVJZCwgYWRkcmVzcyBfc2VsbGVyKSBpbnRlcm5hbAogICAgewogICAgICAgIF9yZW1vdmVBdWN0aW9uKF9jdXRpZUlkKTsKICAgICAgICBfdHJhbnNmZXIoX3NlbGxlciwgX2N1dGllSWQpOwogICAgICAgIGVtaXQgQXVjdGlvbkNhbmNlbGxlZChfY3V0aWVJZCk7CiAgICB9CgogICAgLy8gQGRldiBDYWxjdWxhdGVzIHRoZSBwcmljZSBhbmQgdHJhbnNmZXJzIHdpbm5pbmdzLgogICAgLy8gRG9lcyBub3QgdHJhbnNmZXIgdG9rZW4gb3duZXJzaGlwLgogICAgZnVuY3Rpb24gX2JpZCh1aW50NDAgX2N1dGllSWQsIHVpbnQxMjggX2JpZEFtb3VudCkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHJldHVybnMgKHVpbnQxMjgpCiAgICB7CiAgICAgICAgLy8gR2V0IGEgcmVmZXJlbmNlIHRvIHRoZSBhdWN0aW9uIHN0cnVjdAogICAgICAgIEF1Y3Rpb24gc3RvcmFnZSBhdWN0aW9uID0gY3V0aWVJZFRvQXVjdGlvbltfY3V0aWVJZF07CgogICAgICAgIHJlcXVpcmUoX2lzT25BdWN0aW9uKGF1Y3Rpb24pKTsKCiAgICAgICAgLy8gQ2hlY2sgdGhhdCBiaWQgPiBjdXJyZW50IHByaWNlCiAgICAgICAgdWludDEyOCBwcmljZSA9IF9jdXJyZW50UHJpY2UoYXVjdGlvbik7CiAgICAgICAgcmVxdWlyZShfYmlkQW1vdW50ID49IHByaWNlKTsKCiAgICAgICAgLy8gUHJvdmlkZSBhIHJlZmVyZW5jZSB0byB0aGUgc2VsbGVyIGJlZm9yZSB0aGUgYXVjdGlvbiBzdHJ1Y3QgaXMgZGVsZXRlZC4KICAgICAgICBhZGRyZXNzIHNlbGxlciA9IGF1Y3Rpb24uc2VsbGVyOwoKICAgICAgICBfcmVtb3ZlQXVjdGlvbihfY3V0aWVJZCk7CgogICAgICAgIC8vIFRyYW5zZmVyIHByb2NlZWRzIHRvIHNlbGxlciAoaWYgdGhlcmUgYXJlIGFueSEpCiAgICAgICAgaWYgKHByaWNlID4gMCkgewogICAgICAgICAgICB1aW50MTI4IGZlZSA9IF9jb21wdXRlRmVlKHByaWNlKTsKICAgICAgICAgICAgdWludDEyOCBzZWxsZXJWYWx1ZSA9IHByaWNlIC0gZmVlOwoKICAgICAgICAgICAgc2VsbGVyLnRyYW5zZmVyKHNlbGxlclZhbHVlKTsKICAgICAgICB9CgogICAgICAgIGVtaXQgQXVjdGlvblN1Y2Nlc3NmdWwoX2N1dGllSWQsIHByaWNlLCBtc2cuc2VuZGVyKTsKCiAgICAgICAgcmV0dXJuIHByaWNlOwogICAgfQoKICAgIC8vIEBkZXYgUmVtb3ZlcyBmcm9tIHRoZSBsaXN0IG9mIG9wZW4gYXVjdGlvbnMuCiAgICAvLyBAcGFyYW0gX2N1dGllSWQgLSBJRCBvZiB0b2tlbiBvbiBhdWN0aW9uLgogICAgZnVuY3Rpb24gX3JlbW92ZUF1Y3Rpb24odWludDQwIF9jdXRpZUlkKSBpbnRlcm5hbAogICAgewogICAgICAgIGRlbGV0ZSBjdXRpZUlkVG9BdWN0aW9uW19jdXRpZUlkXTsKICAgIH0KCiAgICAvLyBAZGV2IFJldHVybnMgdHJ1ZSBpZiB0aGUgdG9rZW4gaXMgb24gYXVjdGlvbi4KICAgIC8vIEBwYXJhbSBfYXVjdGlvbiAtIEF1Y3Rpb24gdG8gY2hlY2suCiAgICBmdW5jdGlvbiBfaXNPbkF1Y3Rpb24oQXVjdGlvbiBzdG9yYWdlIF9hdWN0aW9uKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmV0dXJuIChfYXVjdGlvbi5zdGFydGVkQXQgPiAwKTsKICAgIH0KCgogICAgLy8gQGRldiBjYWxjdWxhdGUgY3VycmVudCBwcmljZSBvZiBhdWN0aW9uLiAKICAgIC8vICBXaGVuIHRlc3RpbmcsIG1ha2UgdGhpcyBmdW5jdGlvbiBwdWJsaWMgYW5kIHR1cm4gb24KICAgIC8vICBgQ3VycmVudCBwcmljZSBjYWxjdWxhdGlvbmAgdGVzdCBzdWl0ZS4KICAgIGZ1bmN0aW9uIF9jb21wdXRlQ3VycmVudFByaWNlKAogICAgICAgIHVpbnQxMjggX3N0YXJ0UHJpY2UsCiAgICAgICAgdWludDEyOCBfZW5kUHJpY2UsCiAgICAgICAgdWludDQwIF9kdXJhdGlvbiwKICAgICAgICB1aW50NDAgX3NlY29uZHNQYXNzZWQKICAgICkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHB1cmUKICAgICAgICByZXR1cm5zICh1aW50MTI4KQogICAgewogICAgICAgIGlmIChfc2Vjb25kc1Bhc3NlZCA+PSBfZHVyYXRpb24pIHsKICAgICAgICAgICAgcmV0dXJuIF9lbmRQcmljZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpbnQyNTYgdG90YWxQcmljZUNoYW5nZSA9IGludDI1NihfZW5kUHJpY2UpIC0gaW50MjU2KF9zdGFydFByaWNlKTsKICAgICAgICAgICAgaW50MjU2IGN1cnJlbnRQcmljZUNoYW5nZSA9IHRvdGFsUHJpY2VDaGFuZ2UgKiBpbnQyNTYoX3NlY29uZHNQYXNzZWQpIC8gaW50MjU2KF9kdXJhdGlvbik7CiAgICAgICAgICAgIHVpbnQxMjggY3VycmVudFByaWNlID0gX3N0YXJ0UHJpY2UgKyB1aW50MTI4KGN1cnJlbnRQcmljZUNoYW5nZSk7CiAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gY3VycmVudFByaWNlOwogICAgICAgIH0KICAgIH0KICAgIC8vIEBkZXYgcmV0dXJuIGN1cnJlbnQgcHJpY2Ugb2YgdG9rZW4uCiAgICBmdW5jdGlvbiBfY3VycmVudFByaWNlKEF1Y3Rpb24gc3RvcmFnZSBfYXVjdGlvbikKICAgICAgICBpbnRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50MTI4KQogICAgewogICAgICAgIHVpbnQ0MCBzZWNvbmRzUGFzc2VkID0gMDsKCiAgICAgICAgdWludDQwIHRpbWVOb3cgPSB1aW50NDAobm93KTsKICAgICAgICBpZiAodGltZU5vdyA+IF9hdWN0aW9uLnN0YXJ0ZWRBdCkgewogICAgICAgICAgICBzZWNvbmRzUGFzc2VkID0gdGltZU5vdyAtIF9hdWN0aW9uLnN0YXJ0ZWRBdDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBfY29tcHV0ZUN1cnJlbnRQcmljZSgKICAgICAgICAgICAgX2F1Y3Rpb24uc3RhcnRQcmljZSwKICAgICAgICAgICAgX2F1Y3Rpb24uZW5kUHJpY2UsCiAgICAgICAgICAgIF9hdWN0aW9uLmR1cmF0aW9uLAogICAgICAgICAgICBzZWNvbmRzUGFzc2VkCiAgICAgICAgKTsKICAgIH0KCiAgICAvLyBAZGV2IENhbGN1bGF0ZXMgb3duZXIncyBjdXQgb2YgYSBzYWxlLgogICAgLy8gQHBhcmFtIF9wcmljZSAtIFNhbGUgcHJpY2Ugb2YgY3V0aWUuCiAgICBmdW5jdGlvbiBfY29tcHV0ZUZlZSh1aW50MTI4IF9wcmljZSkgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MTI4KQogICAgewogICAgICAgIHJldHVybiBfcHJpY2UgKiBvd25lckZlZSAvIDEwMDAwOwogICAgfQoKCiAgICAvLyBAZGV2IFJlbW92ZSBhbGwgRXRoZXIgZnJvbSB0aGUgY29udHJhY3Qgd2l0aCB0aGUgb3duZXIncyBjdXRzLiBBbHNvLCByZW1vdmUgYW55IEV0aGVyIHNlbnQgZGlyZWN0bHkgdG8gdGhlIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAvLyAgVHJhbnNmZXJzIHRvIHRoZSB0b2tlbiBjb250cmFjdCwgYnV0IGNhbiBiZSBjYWxsZWQgYnkKICAgIC8vICB0aGUgb3duZXIgb3IgdGhlIHRva2VuIGNvbnRyYWN0LgogICAgZnVuY3Rpb24gd2l0aGRyYXdFdGhGcm9tQmFsYW5jZSgpIGV4dGVybmFsCiAgICB7CiAgICAgICAgYWRkcmVzcyBjb3JlQWRkcmVzcyA9IGFkZHJlc3MoY29yZUNvbnRyYWN0KTsKCiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgbXNnLnNlbmRlciA9PSBvd25lciB8fAogICAgICAgICAgICBtc2cuc2VuZGVyID09IGNvcmVBZGRyZXNzCiAgICAgICAgKTsKICAgICAgICBjb3JlQWRkcmVzcy50cmFuc2ZlcihhZGRyZXNzKHRoaXMpLmJhbGFuY2UpOwogICAgfQoKCiAgICAvLyBAZGV2IGNyZWF0ZSBhbmQgYmVnaW4gbmV3IGF1Y3Rpb24uCiAgICBmdW5jdGlvbiBjcmVhdGVBdWN0aW9uKHVpbnQ0MCBfY3V0aWVJZCwgdWludDEyOCBfc3RhcnRQcmljZSwgdWludDEyOCBfZW5kUHJpY2UsIHVpbnQ0MCBfZHVyYXRpb24sIGFkZHJlc3MgX3NlbGxlcikgCiAgICAgICAgcHVibGljIHdoZW5Ob3RQYXVzZWQgcGF5YWJsZQogICAgewogICAgICAgIHJlcXVpcmUoX2lzT3duZXIobXNnLnNlbmRlciwgX2N1dGllSWQpKTsKICAgICAgICBfZXNjcm93KG1zZy5zZW5kZXIsIF9jdXRpZUlkKTsKICAgICAgICBBdWN0aW9uIG1lbW9yeSBhdWN0aW9uID0gQXVjdGlvbigKICAgICAgICAgICAgX3N0YXJ0UHJpY2UsCiAgICAgICAgICAgIF9lbmRQcmljZSwKICAgICAgICAgICAgX3NlbGxlciwKICAgICAgICAgICAgX2R1cmF0aW9uLAogICAgICAgICAgICB1aW50NDAobm93KQogICAgICAgICk7CiAgICAgICAgX2FkZEF1Y3Rpb24oX2N1dGllSWQsIGF1Y3Rpb24sIG1zZy52YWx1ZSk7CiAgICB9CgogICAgLy8gQGRldiBTZXQgdGhlIHJlZmVyZW5jZSB0byBjdXRpZSBvd25lcnNoaXAgY29udHJhY3QuIFZlcmlmeSB0aGUgb3duZXIncyBmZWUuCiAgICAvLyAgQHBhcmFtIGZlZSBzaG91bGQgYmUgYmV0d2VlbiAwLTEwLDAwMC4KICAgIGZ1bmN0aW9uIHNldHVwKGFkZHJlc3MgX2NvcmVDb250cmFjdEFkZHJlc3MsIHVpbnQxNiBfZmVlKSBwdWJsaWMKICAgIHsKICAgICAgICByZXF1aXJlKGNvcmVDb250cmFjdCA9PSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF9mZWUgPD0gMTAwMDApOwogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CgogICAgICAgIG93bmVyRmVlID0gX2ZlZTsKICAgICAgICAKICAgICAgICBDdXRpZUNvcmVJbnRlcmZhY2UgY2FuZGlkYXRlQ29udHJhY3QgPSBDdXRpZUNvcmVJbnRlcmZhY2UoX2NvcmVDb250cmFjdEFkZHJlc3MpOwogICAgICAgIHJlcXVpcmUoY2FuZGlkYXRlQ29udHJhY3QuaXNDdXRpZUNvcmUoKSk7CiAgICAgICAgY29yZUNvbnRyYWN0ID0gY2FuZGlkYXRlQ29udHJhY3Q7CiAgICB9CgogICAgLy8gQGRldiBTZXQgdGhlIG93bmVyJ3MgZmVlLgogICAgLy8gIEBwYXJhbSBmZWUgc2hvdWxkIGJlIGJldHdlZW4gMC0xMCwwMDAuCiAgICBmdW5jdGlvbiBzZXRGZWUodWludDE2IF9mZWUpIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUoX2ZlZSA8PSAxMDAwMCk7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKCiAgICAgICAgb3duZXJGZWUgPSBfZmVlOwogICAgfQoKICAgIC8vIEBkZXYgYmlkIG9uIGF1Y3Rpb24uIENvbXBsZXRlIGl0IGFuZCB0cmFuc2ZlciBvd25lcnNoaXAgb2YgY3V0aWUgaWYgZW5vdWdoIGV0aGVyIHdhcyBnaXZlbi4KICAgIGZ1bmN0aW9uIGJpZCh1aW50NDAgX2N1dGllSWQpIHB1YmxpYyBwYXlhYmxlIHdoZW5Ob3RQYXVzZWQgY2FuQmVTdG9yZWRJbjEyOEJpdHMobXNnLnZhbHVlKQogICAgewogICAgICAgIC8vIF9iaWQgdGhyb3dzIGlmIHNvbWV0aGluZyBmYWlsZWQuCiAgICAgICAgX2JpZChfY3V0aWVJZCwgdWludDEyOChtc2cudmFsdWUpKTsKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX2N1dGllSWQpOwogICAgfQoKICAgIC8vIEBkZXYgUmV0dXJucyBhdWN0aW9uIGluZm8gZm9yIGEgdG9rZW4gb24gYXVjdGlvbi4KICAgIC8vIEBwYXJhbSBfY3V0aWVJZCAtIElEIG9mIHRva2VuIG9uIGF1Y3Rpb24uCiAgICBmdW5jdGlvbiBnZXRBdWN0aW9uSW5mbyh1aW50NDAgX2N1dGllSWQpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnMKICAgICgKICAgICAgICBhZGRyZXNzIHNlbGxlciwKICAgICAgICB1aW50MTI4IHN0YXJ0UHJpY2UsCiAgICAgICAgdWludDEyOCBlbmRQcmljZSwKICAgICAgICB1aW50NDAgZHVyYXRpb24sCiAgICAgICAgdWludDQwIHN0YXJ0ZWRBdAogICAgKSB7CiAgICAgICAgQXVjdGlvbiBzdG9yYWdlIGF1Y3Rpb24gPSBjdXRpZUlkVG9BdWN0aW9uW19jdXRpZUlkXTsKICAgICAgICByZXF1aXJlKF9pc09uQXVjdGlvbihhdWN0aW9uKSk7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgYXVjdGlvbi5zZWxsZXIsCiAgICAgICAgICAgIGF1Y3Rpb24uc3RhcnRQcmljZSwKICAgICAgICAgICAgYXVjdGlvbi5lbmRQcmljZSwKICAgICAgICAgICAgYXVjdGlvbi5kdXJhdGlvbiwKICAgICAgICAgICAgYXVjdGlvbi5zdGFydGVkQXQKICAgICAgICApOwogICAgfQoKICAgIC8vIEBkZXYgUmV0dXJucyB0aGUgY3VycmVudCBwcmljZSBvZiBhbiBhdWN0aW9uLgogICAgZnVuY3Rpb24gZ2V0Q3VycmVudFByaWNlKHVpbnQ0MCBfY3V0aWVJZCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAodWludDEyOCkKICAgIHsKICAgICAgICBBdWN0aW9uIHN0b3JhZ2UgYXVjdGlvbiA9IGN1dGllSWRUb0F1Y3Rpb25bX2N1dGllSWRdOwogICAgICAgIHJlcXVpcmUoX2lzT25BdWN0aW9uKGF1Y3Rpb24pKTsKICAgICAgICByZXR1cm4gX2N1cnJlbnRQcmljZShhdWN0aW9uKTsKICAgIH0KCiAgICAvLyBAZGV2IENhbmNlbHMgdW5maW5pc2hlZCBhdWN0aW9uIGFuZCByZXR1cm5zIHRva2VuIHRvIG93bmVyLiAKICAgIC8vIENhbiBiZSBjYWxsZWQgd2hlbiBjb250cmFjdCBpcyBwYXVzZWQuCiAgICBmdW5jdGlvbiBjYW5jZWxBY3RpdmVBdWN0aW9uKHVpbnQ0MCBfY3V0aWVJZCkgcHVibGljCiAgICB7CiAgICAgICAgQXVjdGlvbiBzdG9yYWdlIGF1Y3Rpb24gPSBjdXRpZUlkVG9BdWN0aW9uW19jdXRpZUlkXTsKICAgICAgICByZXF1aXJlKF9pc09uQXVjdGlvbihhdWN0aW9uKSk7CiAgICAgICAgYWRkcmVzcyBzZWxsZXIgPSBhdWN0aW9uLnNlbGxlcjsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gc2VsbGVyKTsKICAgICAgICBfY2FuY2VsQWN0aXZlQXVjdGlvbihfY3V0aWVJZCwgc2VsbGVyKTsKICAgIH0KCiAgICAvLyBAZGV2IENhbmNlbHMgYXVjdGlvbiB3aGVuIGNvbnRyYWN0IGlzIG9uIHBhdXNlLiBPcHRpb24gaXMgYXZhaWxhYmxlIG9ubHkgdG8gb3duZXJzIGluIHVyZ2VudCBzaXR1YXRpb25zLiBUb2tlbnMgcmV0dXJuZWQgdG8gc2VsbGVyLgogICAgLy8gIFVzZWQgb24gQ29yZSBjb250cmFjdCB1cGdyYWRlLgogICAgZnVuY3Rpb24gY2FuY2VsQWN0aXZlQXVjdGlvbldoZW5QYXVzZWQodWludDQwIF9jdXRpZUlkKSB3aGVuUGF1c2VkIG9ubHlPd25lciBwdWJsaWMKICAgIHsKICAgICAgICBBdWN0aW9uIHN0b3JhZ2UgYXVjdGlvbiA9IGN1dGllSWRUb0F1Y3Rpb25bX2N1dGllSWRdOwogICAgICAgIHJlcXVpcmUoX2lzT25BdWN0aW9uKGF1Y3Rpb24pKTsKICAgICAgICBfY2FuY2VsQWN0aXZlQXVjdGlvbihfY3V0aWVJZCwgYXVjdGlvbi5zZWxsZXIpOwogICAgfQp9CgoKLy8vIEB0aXRsZSBBdWN0aW9uIG1hcmtldCBmb3IgY3V0aWVzIHNhbGUgCi8vLyBAYXV0aG9yIGh0dHBzOi8vQmxvY2tDaGFpbkFyY2hpdGVjdC5pbwpjb250cmFjdCBTYWxlTWFya2V0IGlzIE1hcmtldAp7CiAgICAvLyBAZGV2IFNhbml0eSBjaGVjayByZXZlYWxzIHRoYXQgdGhlCiAgICAvLyAgYXVjdGlvbiBpbiBvdXIgc2V0U2FsZUF1Y3Rpb25BZGRyZXNzKCkgY2FsbCBpcyByaWdodC4KICAgIGJvb2wgcHVibGljIGlzU2FsZU1hcmtldCA9IHRydWU7CiAgICAKCiAgICAvLyBAZGV2IGNyZWF0ZSBhbmQgc3RhcnQgYSBuZXcgYXVjdGlvbgogICAgLy8gQHBhcmFtIF9jdXRpZUlkIC0gSUQgb2YgY3V0aWUgdG8gYXVjdGlvbiwgc2VuZGVyIG11c3QgYmUgb3duZXIuCiAgICAvLyBAcGFyYW0gX3N0YXJ0UHJpY2UgLSBQcmljZSBvZiBpdGVtIChpbiB3ZWkpIGF0IHRoZSBiZWdpbm5pbmcgb2YgYXVjdGlvbi4KICAgIC8vIEBwYXJhbSBfZW5kUHJpY2UgLSBQcmljZSBvZiBpdGVtIChpbiB3ZWkpIGF0IHRoZSBlbmQgb2YgYXVjdGlvbi4KICAgIC8vIEBwYXJhbSBfZHVyYXRpb24gLSBMZW5ndGggb2YgYXVjdGlvbiAoaW4gc2Vjb25kcykuCiAgICAvLyBAcGFyYW0gX3NlbGxlciAtIFNlbGxlcgogICAgZnVuY3Rpb24gY3JlYXRlQXVjdGlvbigKICAgICAgICB1aW50NDAgX2N1dGllSWQsCiAgICAgICAgdWludDEyOCBfc3RhcnRQcmljZSwKICAgICAgICB1aW50MTI4IF9lbmRQcmljZSwKICAgICAgICB1aW50NDAgX2R1cmF0aW9uLAogICAgICAgIGFkZHJlc3MgX3NlbGxlcgogICAgKQogICAgICAgIHB1YmxpYwogICAgICAgIHBheWFibGUKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhjb3JlQ29udHJhY3QpKTsKICAgICAgICBfZXNjcm93KF9zZWxsZXIsIF9jdXRpZUlkKTsKICAgICAgICBBdWN0aW9uIG1lbW9yeSBhdWN0aW9uID0gQXVjdGlvbigKICAgICAgICAgICAgX3N0YXJ0UHJpY2UsCiAgICAgICAgICAgIF9lbmRQcmljZSwKICAgICAgICAgICAgX3NlbGxlciwKICAgICAgICAgICAgX2R1cmF0aW9uLAogICAgICAgICAgICB1aW50NDAobm93KQogICAgICAgICk7CiAgICAgICAgX2FkZEF1Y3Rpb24oX2N1dGllSWQsIGF1Y3Rpb24sIG1zZy52YWx1ZSk7CiAgICB9CgogICAgLy8gQGRldiBMYXN0U2FsZVByaWNlIGlzIHVwZGF0ZWQgaWYgc2VsbGVyIGlzIHRoZSB0b2tlbiBjb250cmFjdC4KICAgIC8vIE90aGVyd2lzZSwgZGVmYXVsdCBiaWQgbWV0aG9kIGlzIHVzZWQuCiAgICBmdW5jdGlvbiBiaWQodWludDQwIF9jdXRpZUlkKQogICAgICAgIHB1YmxpYwogICAgICAgIHBheWFibGUKICAgICAgICBjYW5CZVN0b3JlZEluMTI4Qml0cyhtc2cudmFsdWUpCiAgICB7CiAgICAgICAgLy8gX2JpZCB2ZXJpZmllcyB0b2tlbiBJRCBzaXplCiAgICAgICAgX2JpZChfY3V0aWVJZCwgdWludDEyOChtc2cudmFsdWUpKTsKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX2N1dGllSWQpOwoKICAgIH0KfQ=='.
	

]
