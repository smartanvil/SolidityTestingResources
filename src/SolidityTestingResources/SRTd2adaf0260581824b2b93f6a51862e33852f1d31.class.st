Class {
	#name : #SRTd2adaf0260581824b2b93f6a51862e33852f1d31,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd2adaf0260581824b2b93f6a51862e33852f1d31 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKgogICAgICAgICAgLC9gLgogICAgICAgICwnLyBfX2AuCiAgICAgICwnXy9fICBfIF9gLgogICAgLCdfXy9fIF9fXyBfICBgLgogICwnXyAgL19fXyBfXyBfIF9fIGAuCiAnLS4uXy9fX18uLi4tIi0uLS4uX19gLgogIEErCgogLT1bIEZhaXJQb256aSB2MS4wIF09LQogCiAgSW5zcGlyZWQgYnkgaHR0cHM6Ly90ZXN0LmpvY2hlbi1ob2VuaWNrZS5kZS9ldGgvcG9ueml0b2tlbi8KICBCYXNlZCBvbiBFdGhQeXJhbWlkCiAKIC0gUmVzZXJ2ZSByZXF1aXJlbWVudCByYXRpbyAoY3JyX2QpIGlzIGZpeGVkIGZyb20gcHJldmlvdXMgUG9XSCBjbG9uZXMgdGhhdCBnYXZlIHZlcnkgaGlnaCBkaXN0cmlidXRpb24gdG8gZmlyc3QgaW52ZXN0b3JzCiAtIENvbnRyYWN0IHdpbGwgZ28gbGl2ZSBhdCA4IEFNIFVUQyB0aW1lLCBTYXR1cmRheSwgRmViIDMgMjAxOAogICAgLSBUaGlzIHRpbWUgd2lsbCBiZSBwb3N0ZWQgdG8gYWxsIHB1YmxpYyBjaGFubmVscyB0byBlbnN1cmUgZmFpciBkaXN0cmlidXRpb24KIC0gNSUgZmVlIG9uIGJ1eSBhbmQgc2VsbCBkaXN0cmlidXRlZCBhcyBkaXZpZGVuZHMgdG8gYWxsIHRva2VuIGhvbGRlcnMuIERpdmlkZW5kcyBjYW4gYmUgZWFzaWx5IHJlaW52ZXN0ZWQKICAgIC0gVGhpcyBpcyByZWR1Y2VkIGZyb20gMTAlIGluIEV0aFB5cmFtaWQgdG8gZW5jb3VyYWdlIG1vcmUgdHJhZGluZwogICAgCi0gVGhpcyBpcyB0cnVseSB0aGUgUGVvcGxlJ3MgUG9uemkuCiovCgpjb250cmFjdCBGYWlyUG9uemkgewoKCS8vIHNjYWxlRmFjdG9yIGlzIHVzZWQgdG8gY29udmVydCBFdGhlciBpbnRvIHRva2VucyBhbmQgdmljZS12ZXJzYTogdGhleSdyZSBvZiBkaWZmZXJlbnQKCS8vIG9yZGVycyBvZiBtYWduaXR1ZGUsIGhlbmNlIHRoZSBuZWVkIHRvIGJyaWRnZSBiZXR3ZWVuIHRoZSB0d28uCgl1aW50MjU2IGNvbnN0YW50IHNjYWxlRmFjdG9yID0gMHgxMDAwMDAwMDAwMDAwMDAwMDsgIC8vIDJeNjQKCgkvLyBDUlIgPSAyNSUKCS8vIENSUiBpcyBDYXNoIFJlc2VydmUgUmF0aW8gKGluIHRoaXMgY2FzZSBDcnlwdG8gUmVzZXJ2ZSBSYXRpbykuCgkvLyBGb3IgbW9yZSBvbiB0aGlzOiBjaGVjayBvdXQgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmVzZXJ2ZV9yZXF1aXJlbWVudAoJaW50IGNvbnN0YW50IGNycl9uID0gMTsgLy8gQ1JSIG51bWVyYXRvcgoJaW50IGNvbnN0YW50IGNycl9kID0gNDsgLy8gQ1JSIGRlbm9taW5hdG9yCgoJLy8gVGhlIHByaWNlIGNvZWZmaWNpZW50LiBDaG9zZW4gc3VjaCB0aGF0IGF0IDEgdG9rZW4gdG90YWwgc3VwcGx5CgkvLyB0aGUgYW1vdW50IGluIHJlc2VydmUgaXMgMC41IGV0aGVyIGFuZCB0b2tlbiBwcmljZSBpcyAxIEV0aGVyLgoJaW50IGNvbnN0YW50IHByaWNlX2NvZWZmID0gLTB4Mjk2QUJGNzg0QTM1ODQ2OEM7CgoJLy8gVHlwaWNhbCB2YWx1ZXMgdGhhdCB3ZSBoYXZlIHRvIGRlY2xhcmUuCglzdHJpbmcgY29uc3RhbnQgcHVibGljIG5hbWUgPSAiRmFpclBvbnppIjsKCXN0cmluZyBjb25zdGFudCBwdWJsaWMgc3ltYm9sID0gIlBPTloiOwoJdWludDggY29uc3RhbnQgcHVibGljIGRlY2ltYWxzID0gMTg7CgoJLy8gQXJyYXkgYmV0d2VlbiBlYWNoIGFkZHJlc3MgYW5kIHRoZWlyIG51bWJlciBvZiB0b2tlbnMuCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHRva2VuQmFsYW5jZTsKCQkKCS8vIEFycmF5IGJldHdlZW4gZWFjaCBhZGRyZXNzIGFuZCBob3cgbXVjaCBFdGhlciBoYXMgYmVlbiBwYWlkIG91dCB0byBpdC4KCS8vIE5vdGUgdGhhdCB0aGlzIGlzIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgltYXBwaW5nKGFkZHJlc3MgPT4gaW50MjU2KSBwdWJsaWMgcGF5b3V0czsKCgkvLyBWYXJpYWJsZSB0cmFja2luZyBob3cgbWFueSB0b2tlbnMgYXJlIGluIGV4aXN0ZW5jZSBvdmVyYWxsLgoJdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgoJLy8gQWdncmVnYXRlIHN1bSBvZiBhbGwgcGF5b3V0cy4KCS8vIE5vdGUgdGhhdCB0aGlzIGlzIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCglpbnQyNTYgdG90YWxQYXlvdXRzOwoKCS8vIFZhcmlhYmxlIHRyYWNraW5nIGhvdyBtdWNoIEV0aGVyIGVhY2ggdG9rZW4gaXMgY3VycmVudGx5IHdvcnRoLgoJLy8gTm90ZSB0aGF0IHRoaXMgaXMgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCXVpbnQyNTYgZWFybmluZ3NQZXJUb2tlbjsKCglmdW5jdGlvbiBGYWlyUG9uemkoKSBwdWJsaWMge30KCgkvLyBUaGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBhcmUgdXNlZCBieSB0aGUgZnJvbnQtZW5kIGZvciBkaXNwbGF5IHB1cnBvc2VzLgoKCS8vIFJldHVybnMgdGhlIG51bWJlciBvZiB0b2tlbnMgY3VycmVudGx5IGhlbGQgYnkgX293bmVyLgoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CgkJcmV0dXJuIHRva2VuQmFsYW5jZVtfb3duZXJdOwoJfQoKCS8vIFdpdGhkcmF3cyBhbGwgZGl2aWRlbmRzIGhlbGQgYnkgdGhlIGNhbGxlciBzZW5kaW5nIHRoZSB0cmFuc2FjdGlvbiwgdXBkYXRlcwoJLy8gdGhlIHJlcXVpc2l0ZSBnbG9iYWwgdmFyaWFibGVzLCBhbmQgdHJhbnNmZXJzIEV0aGVyIGJhY2sgdG8gdGhlIGNhbGxlci4KCWZ1bmN0aW9uIHdpdGhkcmF3KCkgcHVibGljIHsKCQkvLyBSZXRyaWV2ZSB0aGUgZGl2aWRlbmRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWRkcmVzcyB0aGUgcmVxdWVzdCBjYW1lIGZyb20uCgkJdmFyIGJhbGFuY2UgPSBkaXZpZGVuZHMobXNnLnNlbmRlcik7CgkJCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5LCBpbmNyZW1lbnRpbmcgdGhlIHJlcXVlc3QgYWRkcmVzcyBieSBgYmFsYW5jZWAuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIFNlbmQgdGhlIGRpdmlkZW5kcyB0byB0aGUgYWRkcmVzcyB0aGF0IHJlcXVlc3RlZCB0aGUgd2l0aGRyYXcuCgkJbXNnLnNlbmRlci50cmFuc2ZlcihiYWxhbmNlKTsKCX0KCgkvLyBDb252ZXJ0cyB0aGUgRXRoZXIgYWNjcnVlZCBhcyBkaXZpZGVuZHMgYmFjayBpbnRvIEVUUCB0b2tlbnMgd2l0aG91dCBoYXZpbmcgdG8KCS8vIHdpdGhkcmF3IGl0IGZpcnN0LiBTYXZlcyBvbiBnYXMgYW5kIHBvdGVudGlhbCBwcmljZSBzcGlrZSBsb3NzLgoJZnVuY3Rpb24gcmVpbnZlc3REaXZpZGVuZHMoKSBwdWJsaWMgewoJCS8vIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhZGRyZXNzIHRoZSByZXF1ZXN0IGNhbWUgZnJvbS4KCQl2YXIgYmFsYW5jZSA9IGRpdmlkZW5kcyhtc2cuc2VuZGVyKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dHMgYXJyYXksIGluY3JlbWVudGluZyB0aGUgcmVxdWVzdCBhZGRyZXNzIGJ5IGBiYWxhbmNlYC4KCQkvLyBTaW5jZSB0aGlzIGlzIGVzc2VudGlhbGx5IGEgc2hvcnRjdXQgdG8gd2l0aGRyYXdpbmcgYW5kIHJlaW52ZXN0aW5nLCB0aGlzIHN0ZXAgc3RpbGwgaG9sZHMuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEFzc2lnbiBiYWxhbmNlIHRvIGEgbmV3IHZhcmlhYmxlLgoJCXVpbnQgdmFsdWVfID0gKHVpbnQpIChiYWxhbmNlKTsKCQkKCQkvLyBJZiB5b3VyIGRpdmlkZW5kcyBhcmUgd29ydGggbGVzcyB0aGFuIDEgc3phYm8sIG9yIG1vcmUgdGhhbiBhIG1pbGxpb24gRXRoZXIKCQkvLyAoaW4gd2hpY2ggY2FzZSwgd2h5IGFyZSB5b3UgZXZlbiBoZXJlKSwgYWJvcnQuCgkJaWYgKHZhbHVlXyA8IDAuMDAwMDAxIGV0aGVyIHx8IHZhbHVlXyA+IDEwMDAwMDAgZXRoZXIpCgkJCXJldmVydCgpOwoJCQkKCQkvLyBtc2cuc2VuZGVyIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSBjYWxsZXIuCgkJdmFyIHNlbmRlciA9IG1zZy5zZW5kZXI7CgkJCgkJLy8gQSB0ZW1wb3JhcnkgcmVzZXJ2ZSB2YXJpYWJsZSB1c2VkIGZvciBjYWxjdWxhdGluZyB0aGUgcmV3YXJkIHRoZSBob2xkZXIgZ2V0cyBmb3IgYnV5aW5nIHRva2Vucy4KCQkvLyAoWWVzLCB0aGUgYnV5ZXIgcmVjZWl2ZXMgYSBwYXJ0IG9mIHRoZSBkaXN0cmlidXRpb24gYXMgd2VsbCEpCgkJdmFyIHJlcyA9IHJlc2VydmUoKSAtIGJhbGFuY2U7CgoJCS8vIDUlIG9mIHRoZSB0b3RhbCBFdGhlciBzZW50IGlzIHVzZWQgdG8gcGF5IGV4aXN0aW5nIGhvbGRlcnMuCgkJdmFyIGZlZSA9IGRpdih2YWx1ZV8sIDUpOwoJCQoJCS8vIFRoZSBhbW91bnQgb2YgRXRoZXIgdXNlZCB0byBwdXJjaGFzZSBuZXcgdG9rZW5zIGZvciB0aGUgY2FsbGVyLgoJCXZhciBudW1FdGhlciA9IHZhbHVlXyAtIGZlZTsKCQkKCQkvLyBUaGUgbnVtYmVyIG9mIHRva2VucyB3aGljaCBjYW4gYmUgcHVyY2hhc2VkIGZvciBudW1FdGhlci4KCQl2YXIgbnVtVG9rZW5zID0gY2FsY3VsYXRlRGl2aWRlbmRUb2tlbnMobnVtRXRoZXIsIGJhbGFuY2UpOwoJCQoJCS8vIFRoZSBidXllciBmZWUsIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgkJdmFyIGJ1eWVyRmVlID0gZmVlICogc2NhbGVGYWN0b3I7CgkJCgkJLy8gQ2hlY2sgdGhhdCB3ZSBoYXZlIHRva2VucyBpbiBleGlzdGVuY2UgKHRoaXMgc2hvdWxkIGFsd2F5cyBiZSB0cnVlKSwgb3IKCQkvLyBlbHNlIHlvdSdyZSBnb25uYSBoYXZlIGEgYmFkIHRpbWUuCgkJaWYgKHRvdGFsU3VwcGx5ID4gMCkgewoJCQkvLyBDb21wdXRlIHRoZSBib251cyBjby1lZmZpY2llbnQgZm9yIGFsbCBleGlzdGluZyBob2xkZXJzIGFuZCB0aGUgYnV5ZXIuCgkJCS8vIFRoZSBidXllciByZWNlaXZlcyBwYXJ0IG9mIHRoZSBkaXN0cmlidXRpb24gZm9yIGVhY2ggdG9rZW4gYm91Z2h0IGluIHRoZQoJCQkvLyBzYW1lIHdheSB0aGV5IHdvdWxkIGhhdmUgaWYgdGhleSBib3VnaHQgZWFjaCB0b2tlbiBpbmRpdmlkdWFsbHkuCgkJCXZhciBib251c0NvRWZmID0KCQkJICAgIChzY2FsZUZhY3RvciAtIChyZXMgKyBudW1FdGhlcikgKiBudW1Ub2tlbnMgKiBzY2FsZUZhY3RvciAvICh0b3RhbFN1cHBseSArIG51bVRva2VucykgLyBudW1FdGhlcikKCQkJICAgICogKHVpbnQpKGNycl9kKSAvICh1aW50KShjcnJfZC1jcnJfbik7CgkJCQkKCQkJLy8gVGhlIHRvdGFsIHJld2FyZCB0byBiZSBkaXN0cmlidXRlZCBhbW9uZ3N0IHRoZSBtYXNzZXMgaXMgdGhlIGZlZSAoaW4gRXRoZXIpCgkJCS8vIG11bHRpcGxpZWQgYnkgdGhlIGJvbnVzIGNvLWVmZmljaWVudC4KCQkJdmFyIGhvbGRlclJld2FyZCA9IGZlZSAqIGJvbnVzQ29FZmY7CgkJCQoJCQlidXllckZlZSAtPSBob2xkZXJSZXdhcmQ7CgoJCQkvLyBGZWUgaXMgZGlzdHJpYnV0ZWQgdG8gYWxsIGV4aXN0aW5nIHRva2VuIGhvbGRlcnMgYmVmb3JlIHRoZSBuZXcgdG9rZW5zIGFyZSBwdXJjaGFzZWQuCgkJCS8vIHJld2FyZFBlclNoYXJlIGlzIHRoZSBhbW91bnQgZ2FpbmVkIHBlciB0b2tlbiB0aGFua3MgdG8gdGhpcyBidXktaW4uCgkJCXZhciByZXdhcmRQZXJTaGFyZSA9IGhvbGRlclJld2FyZCAvIHRvdGFsU3VwcGx5OwoJCQkKCQkJLy8gVGhlIEV0aGVyIHZhbHVlIHBlciB0b2tlbiBpcyBpbmNyZWFzZWQgcHJvcG9ydGlvbmFsbHkuCgkJCWVhcm5pbmdzUGVyVG9rZW4gKz0gcmV3YXJkUGVyU2hhcmU7CgkJfQoJCQoJCS8vIEFkZCB0aGUgbnVtVG9rZW5zIHdoaWNoIHdlcmUganVzdCBjcmVhdGVkIHRvIHRoZSB0b3RhbCBzdXBwbHkuIFdlJ3JlIGEgY3J5cHRvIGNlbnRyYWwgYmFuayEKCQl0b3RhbFN1cHBseSA9IGFkZCh0b3RhbFN1cHBseSwgbnVtVG9rZW5zKTsKCQkKCQkvLyBBc3NpZ24gdGhlIHRva2VucyB0byB0aGUgYmFsYW5jZSBvZiB0aGUgYnV5ZXIuCgkJdG9rZW5CYWxhbmNlW3NlbmRlcl0gPSBhZGQodG9rZW5CYWxhbmNlW3NlbmRlcl0sIG51bVRva2Vucyk7CgkJCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXQgYXJyYXkgc28gdGhhdCB0aGUgYnV5ZXIgY2Fubm90IGNsYWltIGRpdmlkZW5kcyBvbiBwcmV2aW91cyBwdXJjaGFzZXMuCgkJLy8gQWxzbyBpbmNsdWRlIHRoZSBmZWUgcGFpZCBmb3IgZW50ZXJpbmcgdGhlIHNjaGVtZS4KCQkvLyBGaXJzdCB3ZSBjb21wdXRlIGhvdyBtdWNoIHdhcyBqdXN0IHBhaWQgb3V0IHRvIHRoZSBidXllci4uLgoJCXZhciBwYXlvdXREaWZmICA9IChpbnQyNTYpICgoZWFybmluZ3NQZXJUb2tlbiAqIG51bVRva2VucykgLSBidXllckZlZSk7CgkJCgkJLy8gVGhlbiB3ZSB1cGRhdGUgdGhlIHBheW91dHMgYXJyYXkgZm9yIHRoZSBidXllciB3aXRoIHRoaXMgYW1vdW50Li4uCgkJcGF5b3V0c1tzZW5kZXJdICs9IHBheW91dERpZmY7CgkJCgkJLy8gQW5kIHRoZW4gd2UgZmluYWxseSBhZGQgaXQgdG8gdGhlIHZhcmlhYmxlIHRyYWNraW5nIHRoZSB0b3RhbCBhbW91bnQgc3BlbnQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgICAgKz0gcGF5b3V0RGlmZjsKCQkKCX0KCgkvLyBTZWxscyB5b3VyIHRva2VucyBmb3IgRXRoZXIuIFRoaXMgRXRoZXIgaXMgYXNzaWduZWQgdG8gdGhlIGNhbGxlcnMgZW50cnkKCS8vIGluIHRoZSB0b2tlbkJhbGFuY2UgYXJyYXksIGFuZCB0aGVyZWZvcmUgaXMgc2hvd24gYXMgYSBkaXZpZGVuZC4gQSBzZWNvbmQKCS8vIGNhbGwgdG8gd2l0aGRyYXcoKSBtdXN0IGJlIG1hZGUgdG8gaW52b2tlIHRoZSB0cmFuc2ZlciBvZiBFdGhlciBiYWNrIHRvIHlvdXIgYWRkcmVzcy4KCWZ1bmN0aW9uIHNlbGxNeVRva2VucygpIHB1YmxpYyB7CgkJdmFyIGJhbGFuY2UgPSBiYWxhbmNlT2YobXNnLnNlbmRlcik7CgkJc2VsbChiYWxhbmNlKTsKCX0KCgkvLyBUaGUgc2xhbS10aGUtYnV0dG9uIGVzY2FwZSBoYXRjaC4gU2VsbHMgdGhlIGNhbGxlcnMgdG9rZW5zIGZvciBFdGhlciwgdGhlbiBpbW1lZGlhdGVseQoJLy8gaW52b2tlcyB0aGUgd2l0aGRyYXcoKSBmdW5jdGlvbiwgc2VuZGluZyB0aGUgcmVzdWx0aW5nIEV0aGVyIHRvIHRoZSBjYWxsZXJzIGFkZHJlc3MuCiAgICBmdW5jdGlvbiBnZXRNZU91dE9mSGVyZSgpIHB1YmxpYyB7CgkJc2VsbE15VG9rZW5zKCk7CiAgICAgICAgd2l0aGRyYXcoKTsKCX0KCgkvLyBHYXRla2VlcGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIHRoZSBhbW91bnQgb2YgRXRoZXIgYmVpbmcgc2VudCBpc24ndCBlaXRoZXIKCS8vIHRvbyBzbWFsbCBvciB0b28gbGFyZ2UuIElmIGl0IHBhc3NlcywgZ29lcyBkaXJlY3QgdG8gYnV5KCkuCglmdW5jdGlvbiBmdW5kKCkgcGF5YWJsZSBwdWJsaWMgewoJCS8vIERvbid0IGFsbG93IGZvciBmdW5kaW5nIGlmIHRoZSBhbW91bnQgb2YgRXRoZXIgc2VudCBpcyBsZXNzIHRoYW4gMSBzemFiby4KCQlpZiAobXNnLnZhbHVlID4gMC4wMDAwMDEgZXRoZXIpIHsKCQkJYnV5KCk7CgkJfQogICAgfQoKCS8vIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgKGR5bmFtaWMpIHByaWNlIG9mIGJ1eWluZyBhIGZpbm5leSB3b3J0aCBvZiB0b2tlbnMuCglmdW5jdGlvbiBidXlQcmljZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CgkJcmV0dXJuIGdldFRva2Vuc0ZvckV0aGVyKDEgZmlubmV5KTsKCX0KCgkvLyBGdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIChkeW5hbWljKSBwcmljZSBvZiBzZWxsaW5nIGEgc2luZ2xlIHRva2VuLgoJZnVuY3Rpb24gc2VsbFByaWNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICB2YXIgZXRoID0gZ2V0RXRoZXJGb3JUb2tlbnMoMSBmaW5uZXkpOwogICAgICAgIHZhciBmZWUgPSBkaXYoZXRoLCA1KTsKICAgICAgICByZXR1cm4gZXRoIC0gZmVlOwogICAgfQoKCS8vIENhbGN1bGF0ZSB0aGUgY3VycmVudCBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjYWxsZXIgYWRkcmVzcy4gVGhpcyBpcyB0aGUgbmV0IHJlc3VsdAoJLy8gb2YgbXVsdGlwbHlpbmcgdGhlIG51bWJlciBvZiB0b2tlbnMgaGVsZCBieSB0aGVpciBjdXJyZW50IHZhbHVlIGluIEV0aGVyIGFuZCBzdWJ0cmFjdGluZyB0aGUKCS8vIEV0aGVyIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBwYWlkIG91dC4KCWZ1bmN0aW9uIGRpdmlkZW5kcyhhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW1vdW50KSB7CgkJcmV0dXJuICh1aW50MjU2KSAoKGludDI1NikoZWFybmluZ3NQZXJUb2tlbiAqIHRva2VuQmFsYW5jZVtfb3duZXJdKSAtIHBheW91dHNbX293bmVyXSkgLyBzY2FsZUZhY3RvcjsKCX0KCgkvLyBWZXJzaW9uIG9mIHdpdGhkcmF3IHRoYXQgZXh0cmFjdHMgdGhlIGRpdmlkZW5kcyBhbmQgc2VuZHMgdGhlIEV0aGVyIHRvIHRoZSBjYWxsZXIuCgkvLyBUaGlzIGlzIG9ubHkgdXNlZCBpbiB0aGUgY2FzZSB3aGVuIHRoZXJlIGlzIG5vIHRyYW5zYWN0aW9uIGRhdGEsIGFuZCB0aGF0IHNob3VsZCBiZQoJLy8gcXVpdGUgcmFyZSB1bmxlc3MgaW50ZXJhY3RpbmcgZGlyZWN0bHkgd2l0aCB0aGUgc21hcnQgY29udHJhY3QuCglmdW5jdGlvbiB3aXRoZHJhd09sZChhZGRyZXNzIHRvKSBwdWJsaWMgewoJCS8vIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhZGRyZXNzIHRoZSByZXF1ZXN0IGNhbWUgZnJvbS4KCQl2YXIgYmFsYW5jZSA9IGRpdmlkZW5kcyhtc2cuc2VuZGVyKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dHMgYXJyYXksIGluY3JlbWVudGluZyB0aGUgcmVxdWVzdCBhZGRyZXNzIGJ5IGBiYWxhbmNlYC4KCQlwYXlvdXRzW21zZy5zZW5kZXJdICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEluY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gU2VuZCB0aGUgZGl2aWRlbmRzIHRvIHRoZSBhZGRyZXNzIHRoYXQgcmVxdWVzdGVkIHRoZSB3aXRoZHJhdy4KCQl0by50cmFuc2ZlcihiYWxhbmNlKTsKCX0KCgkvLyBJbnRlcm5hbCBiYWxhbmNlIGZ1bmN0aW9uLCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgZHluYW1pYyByZXNlcnZlIHZhbHVlLgoJZnVuY3Rpb24gYmFsYW5jZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW1vdW50KSB7CgkJLy8gbXNnLnZhbHVlIGlzIHRoZSBhbW91bnQgb2YgRXRoZXIgc2VudCBieSB0aGUgdHJhbnNhY3Rpb24uCgkJcmV0dXJuIHRoaXMuYmFsYW5jZSAtIG1zZy52YWx1ZTsKCX0KCglmdW5jdGlvbiBidXkoKSBpbnRlcm5hbCB7CgkJLy8gQW55IHRyYW5zYWN0aW9uIG9mIGxlc3MgdGhhbiAxIHN6YWJvIGlzIGxpa2VseSB0byBiZSB3b3J0aCBsZXNzIHRoYW4gdGhlIGdhcyB1c2VkIHRvIHNlbmQgaXQuCgkJaWYgKG1zZy52YWx1ZSA8IDAuMDAwMDAxIGV0aGVyIHx8IG1zZy52YWx1ZSA+IDEwMDAwMDAgZXRoZXIpCgkJCXJldmVydCgpOwoJCQkKCQkvLyBtc2cuc2VuZGVyIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSBjYWxsZXIuCgkJdmFyIHNlbmRlciA9IG1zZy5zZW5kZXI7CgkJCgkJLy8gNSUgb2YgdGhlIHRvdGFsIEV0aGVyIHNlbnQgaXMgdXNlZCB0byBwYXkgZXhpc3RpbmcgaG9sZGVycy4KCQl2YXIgZmVlID0gZGl2KG1zZy52YWx1ZSwgNSk7CgkJCgkJLy8gVGhlIGFtb3VudCBvZiBFdGhlciB1c2VkIHRvIHB1cmNoYXNlIG5ldyB0b2tlbnMgZm9yIHRoZSBjYWxsZXIuCgkJdmFyIG51bUV0aGVyID0gbXNnLnZhbHVlIC0gZmVlOwoJCQoJCS8vIFRoZSBudW1iZXIgb2YgdG9rZW5zIHdoaWNoIGNhbiBiZSBwdXJjaGFzZWQgZm9yIG51bUV0aGVyLgoJCXZhciBudW1Ub2tlbnMgPSBnZXRUb2tlbnNGb3JFdGhlcihudW1FdGhlcik7CgkJCgkJLy8gVGhlIGJ1eWVyIGZlZSwgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCQl2YXIgYnV5ZXJGZWUgPSBmZWUgKiBzY2FsZUZhY3RvcjsKCQkKCQkvLyBDaGVjayB0aGF0IHdlIGhhdmUgdG9rZW5zIGluIGV4aXN0ZW5jZSAodGhpcyBzaG91bGQgYWx3YXlzIGJlIHRydWUpLCBvcgoJCS8vIGVsc2UgeW91J3JlIGdvbm5hIGhhdmUgYSBiYWQgdGltZS4KCQlpZiAodG90YWxTdXBwbHkgPiAwKSB7CgkJCS8vIENvbXB1dGUgdGhlIGJvbnVzIGNvLWVmZmljaWVudCBmb3IgYWxsIGV4aXN0aW5nIGhvbGRlcnMgYW5kIHRoZSBidXllci4KCQkJLy8gVGhlIGJ1eWVyIHJlY2VpdmVzIHBhcnQgb2YgdGhlIGRpc3RyaWJ1dGlvbiBmb3IgZWFjaCB0b2tlbiBib3VnaHQgaW4gdGhlCgkJCS8vIHNhbWUgd2F5IHRoZXkgd291bGQgaGF2ZSBpZiB0aGV5IGJvdWdodCBlYWNoIHRva2VuIGluZGl2aWR1YWxseS4KCQkJdmFyIGJvbnVzQ29FZmYgPQoJCQkgICAgKHNjYWxlRmFjdG9yIC0gKHJlc2VydmUoKSArIG51bUV0aGVyKSAqIG51bVRva2VucyAqIHNjYWxlRmFjdG9yIC8gKHRvdGFsU3VwcGx5ICsgbnVtVG9rZW5zKSAvIG51bUV0aGVyKQoJCQkgICAgKiAodWludCkoY3JyX2QpIC8gKHVpbnQpKGNycl9kLWNycl9uKTsKCQkJCQoJCQkvLyBUaGUgdG90YWwgcmV3YXJkIHRvIGJlIGRpc3RyaWJ1dGVkIGFtb25nc3QgdGhlIG1hc3NlcyBpcyB0aGUgZmVlIChpbiBFdGhlcikKCQkJLy8gbXVsdGlwbGllZCBieSB0aGUgYm9udXMgY28tZWZmaWNpZW50LgoJCQl2YXIgaG9sZGVyUmV3YXJkID0gZmVlICogYm9udXNDb0VmZjsKCQkJCgkJCWJ1eWVyRmVlIC09IGhvbGRlclJld2FyZDsKCgkJCS8vIEZlZSBpcyBkaXN0cmlidXRlZCB0byBhbGwgZXhpc3RpbmcgdG9rZW4gaG9sZGVycyBiZWZvcmUgdGhlIG5ldyB0b2tlbnMgYXJlIHB1cmNoYXNlZC4KCQkJLy8gcmV3YXJkUGVyU2hhcmUgaXMgdGhlIGFtb3VudCBnYWluZWQgcGVyIHRva2VuIHRoYW5rcyB0byB0aGlzIGJ1eS1pbi4KCQkJdmFyIHJld2FyZFBlclNoYXJlID0gaG9sZGVyUmV3YXJkIC8gdG90YWxTdXBwbHk7CgkJCQoJCQkvLyBUaGUgRXRoZXIgdmFsdWUgcGVyIHRva2VuIGlzIGluY3JlYXNlZCBwcm9wb3J0aW9uYWxseS4KCQkJZWFybmluZ3NQZXJUb2tlbiArPSByZXdhcmRQZXJTaGFyZTsKCQkJCgkJfQoKCQkvLyBBZGQgdGhlIG51bVRva2VucyB3aGljaCB3ZXJlIGp1c3QgY3JlYXRlZCB0byB0aGUgdG90YWwgc3VwcGx5LiBXZSdyZSBhIGNyeXB0byBjZW50cmFsIGJhbmshCgkJdG90YWxTdXBwbHkgPSBhZGQodG90YWxTdXBwbHksIG51bVRva2Vucyk7CgoJCS8vIEFzc2lnbiB0aGUgdG9rZW5zIHRvIHRoZSBiYWxhbmNlIG9mIHRoZSBidXllci4KCQl0b2tlbkJhbGFuY2Vbc2VuZGVyXSA9IGFkZCh0b2tlbkJhbGFuY2Vbc2VuZGVyXSwgbnVtVG9rZW5zKTsKCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXQgYXJyYXkgc28gdGhhdCB0aGUgYnV5ZXIgY2Fubm90IGNsYWltIGRpdmlkZW5kcyBvbiBwcmV2aW91cyBwdXJjaGFzZXMuCgkJLy8gQWxzbyBpbmNsdWRlIHRoZSBmZWUgcGFpZCBmb3IgZW50ZXJpbmcgdGhlIHNjaGVtZS4KCQkvLyBGaXJzdCB3ZSBjb21wdXRlIGhvdyBtdWNoIHdhcyBqdXN0IHBhaWQgb3V0IHRvIHRoZSBidXllci4uLgoJCXZhciBwYXlvdXREaWZmID0gKGludDI1NikgKChlYXJuaW5nc1BlclRva2VuICogbnVtVG9rZW5zKSAtIGJ1eWVyRmVlKTsKCQkKCQkvLyBUaGVuIHdlIHVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSBmb3IgdGhlIGJ1eWVyIHdpdGggdGhpcyBhbW91bnQuLi4KCQlwYXlvdXRzW3NlbmRlcl0gKz0gcGF5b3V0RGlmZjsKCQkKCQkvLyBBbmQgdGhlbiB3ZSBmaW5hbGx5IGFkZCBpdCB0byB0aGUgdmFyaWFibGUgdHJhY2tpbmcgdGhlIHRvdGFsIGFtb3VudCBzcGVudCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyAgICArPSBwYXlvdXREaWZmOwoJCQoJfQoKCS8vIFNlbGwgZnVuY3Rpb24gdGhhdCB0YWtlcyB0b2tlbnMgYW5kIGNvbnZlcnRzIHRoZW0gaW50byBFdGhlci4gQWxzbyBjb21lcyB3aXRoIGEgMTAlIGZlZQoJLy8gdG8gZGlzY291cmFnaW5nIGR1bXBpbmcsIGFuZCBtZWFucyB0aGF0IGlmIHNvbWVvbmUgbmVhciB0aGUgdG9wIHNlbGxzLCB0aGUgZmVlIGRpc3RyaWJ1dGVkCgkvLyB3aWxsIGJlICpzaWduaWZpY2FudCouCglmdW5jdGlvbiBzZWxsKHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB7CgkgICAgLy8gQ2FsY3VsYXRlIHRoZSBhbW91bnQgb2YgRXRoZXIgdGhhdCB0aGUgaG9sZGVycyB0b2tlbnMgc2VsbCBmb3IgYXQgdGhlIGN1cnJlbnQgc2VsbCBwcmljZS4KCQl2YXIgbnVtRXRoZXJzQmVmb3JlRmVlID0gZ2V0RXRoZXJGb3JUb2tlbnMoYW1vdW50KTsKCQkKCQkvLyA1JSBvZiB0aGUgcmVzdWx0aW5nIEV0aGVyIGlzIHVzZWQgdG8gcGF5IHJlbWFpbmluZyBob2xkZXJzLgogICAgICAgIHZhciBmZWUgPSBkaXYobnVtRXRoZXJzQmVmb3JlRmVlLCA1KTsKCQkKCQkvLyBOZXQgRXRoZXIgZm9yIHRoZSBzZWxsZXIgYWZ0ZXIgdGhlIGZlZSBoYXMgYmVlbiBzdWJ0cmFjdGVkLgogICAgICAgIHZhciBudW1FdGhlcnMgPSBudW1FdGhlcnNCZWZvcmVGZWUgLSBmZWU7CgkJCgkJLy8gKlJlbW92ZSogdGhlIG51bVRva2VucyB3aGljaCB3ZXJlIGp1c3Qgc29sZCBmcm9tIHRoZSB0b3RhbCBzdXBwbHkuIFdlJ3JlIC9kZWZpbml0ZWx5LyBhIGNyeXB0byBjZW50cmFsIGJhbmsuCgkJdG90YWxTdXBwbHkgPSBzdWIodG90YWxTdXBwbHksIGFtb3VudCk7CgkJCiAgICAgICAgLy8gUmVtb3ZlIHRoZSB0b2tlbnMgZnJvbSB0aGUgYmFsYW5jZSBvZiB0aGUgYnV5ZXIuCgkJdG9rZW5CYWxhbmNlW21zZy5zZW5kZXJdID0gc3ViKHRva2VuQmFsYW5jZVttc2cuc2VuZGVyXSwgYW1vdW50KTsKCiAgICAgICAgLy8gVXBkYXRlIHRoZSBwYXlvdXQgYXJyYXkgc28gdGhhdCB0aGUgc2VsbGVyIGNhbm5vdCBjbGFpbSBmdXR1cmUgZGl2aWRlbmRzIHVubGVzcyB0aGV5IGJ1eSBiYWNrIGluLgoJCS8vIEZpcnN0IHdlIGNvbXB1dGUgaG93IG11Y2ggd2FzIGp1c3QgcGFpZCBvdXQgdG8gdGhlIHNlbGxlci4uLgoJCXZhciBwYXlvdXREaWZmID0gKGludDI1NikgKGVhcm5pbmdzUGVyVG9rZW4gKiBhbW91bnQgKyAobnVtRXRoZXJzICogc2NhbGVGYWN0b3IpKTsKCQkKICAgICAgICAvLyBXZSByZWR1Y2UgdGhlIGFtb3VudCBwYWlkIG91dCB0byB0aGUgc2VsbGVyICh0aGlzIGVmZmVjdGl2ZWx5IHJlc2V0cyB0aGVpciBwYXlvdXRzIHZhbHVlIHRvIHplcm8sCgkJLy8gc2luY2UgdGhleSdyZSBzZWxsaW5nIGFsbCBvZiB0aGVpciB0b2tlbnMpLiBUaGlzIG1ha2VzIHN1cmUgdGhlIHNlbGxlciBpc24ndCBkaXNhZHZhbnRhZ2VkIGlmCgkJLy8gdGhleSBkZWNpZGUgdG8gYnV5IGJhY2sgaW4uCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSAtPSBwYXlvdXREaWZmOwkJCgkJCgkJLy8gRGVjcmVhc2UgdGhlIHRvdGFsIGFtb3VudCB0aGF0J3MgYmVlbiBwYWlkIG91dCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgogICAgICAgIHRvdGFsUGF5b3V0cyAtPSBwYXlvdXREaWZmOwoJCQoJCS8vIENoZWNrIHRoYXQgd2UgaGF2ZSB0b2tlbnMgaW4gZXhpc3RlbmNlICh0aGlzIGlzIGEgYml0IG9mIGFuIGlycmVsZXZhbnQgY2hlY2sgc2luY2Ugd2UncmUKCQkvLyBzZWxsaW5nIHRva2VucywgYnV0IGl0IGd1YXJkcyBhZ2FpbnN0IGRpdmlzaW9uIGJ5IHplcm8pLgoJCWlmICh0b3RhbFN1cHBseSA+IDApIHsKCQkJLy8gU2NhbGUgdGhlIEV0aGVyIHRha2VuIGFzIHRoZSBzZWxsaW5nIGZlZSBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgkJCXZhciBldGhlckZlZSA9IGZlZSAqIHNjYWxlRmFjdG9yOwoJCQkKCQkJLy8gRmVlIGlzIGRpc3RyaWJ1dGVkIHRvIGFsbCByZW1haW5pbmcgdG9rZW4gaG9sZGVycy4KCQkJLy8gcmV3YXJkUGVyU2hhcmUgaXMgdGhlIGFtb3VudCBnYWluZWQgcGVyIHRva2VuIHRoYW5rcyB0byB0aGlzIHNlbGwuCgkJCXZhciByZXdhcmRQZXJTaGFyZSA9IGV0aGVyRmVlIC8gdG90YWxTdXBwbHk7CgkJCQoJCQkvLyBUaGUgRXRoZXIgdmFsdWUgcGVyIHRva2VuIGlzIGluY3JlYXNlZCBwcm9wb3J0aW9uYWxseS4KCQkJZWFybmluZ3NQZXJUb2tlbiA9IGFkZChlYXJuaW5nc1BlclRva2VuLCByZXdhcmRQZXJTaGFyZSk7CgkJfQoJfQoJCgkvLyBEeW5hbWljIHZhbHVlIG9mIEV0aGVyIGluIHJlc2VydmUsIGFjY29yZGluZyB0byB0aGUgQ1JSIHJlcXVpcmVtZW50LgoJZnVuY3Rpb24gcmVzZXJ2ZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW1vdW50KSB7CgkJcmV0dXJuIHN1YihiYWxhbmNlKCksCgkJCSAoKHVpbnQyNTYpICgoaW50MjU2KSAoZWFybmluZ3NQZXJUb2tlbiAqIHRvdGFsU3VwcGx5KSAtIHRvdGFsUGF5b3V0cykgLyBzY2FsZUZhY3RvcikpOwoJfQoKCS8vIENhbGN1bGF0ZXMgdGhlIG51bWJlciBvZiB0b2tlbnMgdGhhdCBjYW4gYmUgYm91Z2h0IGZvciBhIGdpdmVuIGFtb3VudCBvZiBFdGhlciwgYWNjb3JkaW5nIHRvIHRoZQoJLy8gZHluYW1pYyByZXNlcnZlIGFuZCB0b3RhbFN1cHBseSB2YWx1ZXMgKGRlcml2ZWQgZnJvbSB0aGUgYnV5IGFuZCBzZWxsIHByaWNlcykuCglmdW5jdGlvbiBnZXRUb2tlbnNGb3JFdGhlcih1aW50MjU2IGV0aGVydmFsdWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2VucykgewoJCXJldHVybiBzdWIoZml4ZWRFeHAoZml4ZWRMb2cocmVzZXJ2ZSgpICsgZXRoZXJ2YWx1ZSkqY3JyX24vY3JyX2QgKyBwcmljZV9jb2VmZiksIHRvdGFsU3VwcGx5KTsKCX0KCgkvLyBTZW1hbnRpY2FsbHkgc2ltaWxhciB0byBnZXRUb2tlbnNGb3JFdGhlciwgYnV0IHN1YnRyYWN0cyB0aGUgY2FsbGVycyBiYWxhbmNlIGZyb20gdGhlIGFtb3VudCBvZiBFdGhlciByZXR1cm5lZCBmb3IgY29udmVyc2lvbi4KCWZ1bmN0aW9uIGNhbGN1bGF0ZURpdmlkZW5kVG9rZW5zKHVpbnQyNTYgZXRoZXJ2YWx1ZSwgdWludDI1NiBzdWJ2YWx1ZSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG9rZW5zKSB7CgkJcmV0dXJuIHN1YihmaXhlZEV4cChmaXhlZExvZyhyZXNlcnZlKCkgLSBzdWJ2YWx1ZSArIGV0aGVydmFsdWUpKmNycl9uL2Nycl9kICsgcHJpY2VfY29lZmYpLCB0b3RhbFN1cHBseSk7Cgl9CgoJLy8gQ29udmVydHMgYSBudW1iZXIgdG9rZW5zIGludG8gYW4gRXRoZXIgdmFsdWUuCglmdW5jdGlvbiBnZXRFdGhlckZvclRva2Vucyh1aW50MjU2IHRva2VucykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgZXRoZXJ2YWx1ZSkgewoJCS8vIEhvdyBtdWNoIHJlc2VydmUgRXRoZXIgZG8gd2UgaGF2ZSBsZWZ0IGluIHRoZSBjb250cmFjdD8KCQl2YXIgcmVzZXJ2ZUFtb3VudCA9IHJlc2VydmUoKTsKCgkJLy8gSWYgeW91J3JlIHRoZSBIaWdobGFuZGVyIChvciBiYWdob2xkZXIpLCB5b3UgZ2V0IFRoZSBQcml6ZS4gRXZlcnl0aGluZyBsZWZ0IGluIHRoZSB2YXVsdC4KCQlpZiAodG9rZW5zID09IHRvdGFsU3VwcGx5KQoJCQlyZXR1cm4gcmVzZXJ2ZUFtb3VudDsKCgkJLy8gSWYgdGhlcmUgd291bGQgYmUgZXhjZXNzIEV0aGVyIGxlZnQgYWZ0ZXIgdGhlIHRyYW5zYWN0aW9uIHRoaXMgaXMgY2FsbGVkIHdpdGhpbiwgcmV0dXJuIHRoZSBFdGhlcgoJCS8vIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGVxdWF0aW9uIGluIERyIEpvY2hlbiBIb2VuaWNrZSdzIG9yaWdpbmFsIFBvbnppIHBhcGVyLCB3aGljaCBjYW4gYmUgZm91bmQKCQkvLyBhdCBodHRwczovL3Rlc3Quam9jaGVuLWhvZW5pY2tlLmRlL2V0aC9wb256aXRva2VuLyBpbiB0aGUgdGhpcmQgZXF1YXRpb24sIHdpdGggdGhlIENSUiBudW1lcmF0b3IgCgkJLy8gYW5kIGRlbm9taW5hdG9yIGFsdGVyZWQgdG8gMSBhbmQgMiByZXNwZWN0aXZlbHkuCgkJcmV0dXJuIHN1YihyZXNlcnZlQW1vdW50LCBmaXhlZEV4cCgoZml4ZWRMb2codG90YWxTdXBwbHkgLSB0b2tlbnMpIC0gcHJpY2VfY29lZmYpICogY3JyX2QvY3JyX24pKTsKCX0KCgkvLyBZb3UgZG9uJ3QgY2FyZSBhYm91dCB0aGVzZSwgYnV0IGlmIHlvdSByZWFsbHkgZG8gdGhleSdyZSBoZXggdmFsdWVzIGZvciAKCS8vIGNvLWVmZmljaWVudHMgdXNlZCB0byBzaW11bGF0ZSBhcHByb3hpbWF0aW9ucyBvZiB0aGUgbG9nIGFuZCBleHAgZnVuY3Rpb25zLgoJaW50MjU2ICBjb25zdGFudCBvbmUgICAgICAgID0gMHgxMDAwMDAwMDAwMDAwMDAwMDsKCXVpbnQyNTYgY29uc3RhbnQgc3FydDIgICAgICA9IDB4MTZhMDllNjY3ZjNiY2M5MDg7Cgl1aW50MjU2IGNvbnN0YW50IHNxcnRkb3Q1ICAgPSAweDBiNTA0ZjMzM2Y5ZGU2NDg0OwoJaW50MjU2ICBjb25zdGFudCBsbjIgICAgICAgID0gMHgwYjE3MjE3ZjdkMWNmNzlhYzsKCWludDI1NiAgY29uc3RhbnQgbG4yXzY0ZG90NSA9IDB4MmNiNTNmMDlmMDVjYzYyN2M4OwoJaW50MjU2ICBjb25zdGFudCBjMSAgICAgICAgID0gMHgxZmZmZmZmZmZmZjlkYWM5YjsKCWludDI1NiAgY29uc3RhbnQgYzMgICAgICAgICA9IDB4MGFhYWFhYWFjMTY4Nzc5MDg7CglpbnQyNTYgIGNvbnN0YW50IGM1ICAgICAgICAgPSAweDA2NjY2NjRlNWU5ZmEwYzk5OwoJaW50MjU2ICBjb25zdGFudCBjNyAgICAgICAgID0gMHgwNDkyNTQwMjZhNzYzMGFjZjsKCWludDI1NiAgY29uc3RhbnQgYzkgICAgICAgICA9IDB4MDM4YmQ3NWVkMzc3NTNkNjg7CglpbnQyNTYgIGNvbnN0YW50IGMxMSAgICAgICAgPSAweDAzMjg0YTBjMTQ2MTA5MjRmOwoKCS8vIFRoZSBwb2x5bm9taWFsIFIgPSBjMSp4ICsgYzMqeF4zICsgLi4uICsgYzExICogeF4xMQoJLy8gYXBwcm94aW1hdGVzIHRoZSBmdW5jdGlvbiBsb2coMSt4KS1sb2coMS14KQoJLy8gSGVuY2UgUihzKSA9IGxvZygoMStzKS8oMS1zKSkgPSBsb2coYSkKCWZ1bmN0aW9uIGZpeGVkTG9nKHVpbnQyNTYgYSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zIChpbnQyNTYgbG9nKSB7CgkJaW50MzIgc2NhbGUgPSAwOwoJCXdoaWxlIChhID4gc3FydDIpIHsKCQkJYSAvPSAyOwoJCQlzY2FsZSsrOwoJCX0KCQl3aGlsZSAoYSA8PSBzcXJ0ZG90NSkgewoJCQlhICo9IDI7CgkJCXNjYWxlLS07CgkJfQoJCWludDI1NiBzID0gKCgoaW50MjU2KShhKSAtIG9uZSkgKiBvbmUpIC8gKChpbnQyNTYpKGEpICsgb25lKTsKCQl2YXIgeiA9IChzKnMpIC8gb25lOwoJCXJldHVybiBzY2FsZSAqIGxuMiArCgkJCShzKihjMSArICh6KihjMyArICh6KihjNSArICh6KihjNyArICh6KihjOSArICh6KmMxMS9vbmUpKQoJCQkJL29uZSkpL29uZSkpL29uZSkpL29uZSkpL29uZSk7Cgl9CgoJaW50MjU2IGNvbnN0YW50IGMyID0gIDB4MDJhYWFhYWFhYWEwMTVkYjA7CglpbnQyNTYgY29uc3RhbnQgYzQgPSAtMHgwMDBiNjBiNjA4MDgzOTlkMTsKCWludDI1NiBjb25zdGFudCBjNiA9ICAweDAwMDA0NTU5NTZiY2NkZDA2OwoJaW50MjU2IGNvbnN0YW50IGM4ID0gLTB4MDAwMDAxYjg5M2FkMDRiM2E7CgkKCS8vIFRoZSBwb2x5bm9taWFsIFIgPSAyICsgYzIqeF4yICsgYzQqeF40ICsgLi4uCgkvLyBhcHByb3hpbWF0ZXMgdGhlIGZ1bmN0aW9uIHgqKGV4cCh4KSsxKS8oZXhwKHgpLTEpCgkvLyBIZW5jZSBleHAoeCkgPSAoUih4KSt4KS8oUih4KS14KQoJZnVuY3Rpb24gZml4ZWRFeHAoaW50MjU2IGEpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NiBleHApIHsKCQlpbnQyNTYgc2NhbGUgPSAoYSArIChsbjJfNjRkb3Q1KSkgLyBsbjIgLSA2NDsKCQlhIC09IHNjYWxlKmxuMjsKCQlpbnQyNTYgeiA9IChhKmEpIC8gb25lOwoJCWludDI1NiBSID0gKChpbnQyNTYpKDIpICogb25lKSArCgkJCSh6KihjMiArICh6KihjNCArICh6KihjNiArICh6KmM4L29uZSkpL29uZSkpL29uZSkpL29uZSk7CgkJZXhwID0gKHVpbnQyNTYpICgoKFIgKyBhKSAqIG9uZSkgLyAoUiAtIGEpKTsKCQlpZiAoc2NhbGUgPj0gMCkKCQkJZXhwIDw8PSBzY2FsZTsKCQllbHNlCgkJCWV4cCA+Pj0gLXNjYWxlOwoJCXJldHVybiBleHA7Cgl9CgkKCS8vIFRoZSBiZWxvdyBhcmUgc2FmZW1hdGggaW1wbGVtZW50YXRpb25zIG9mIHRoZSBmb3VyIGFyaXRobWV0aWMgb3BlcmF0b3JzCgkvLyBkZXNpZ25lZCB0byBleHBsaWNpdGx5IHByZXZlbnQgb3Zlci0gYW5kIHVuZGVyLWZsb3dzIG9mIGludGVnZXIgdmFsdWVzLgoKCWZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CgkJaWYgKGEgPT0gMCkgewoJCQlyZXR1cm4gMDsKCQl9CgkJdWludDI1NiBjID0gYSAqIGI7CgkJYXNzZXJ0KGMgLyBhID09IGIpOwoJCXJldHVybiBjOwoJfQoKCWZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CgkJLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCgkJdWludDI1NiBjID0gYSAvIGI7CgkJLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKCQlyZXR1cm4gYzsKCX0KCglmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCWFzc2VydChiIDw9IGEpOwoJCXJldHVybiBhIC0gYjsKCX0KCglmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCXVpbnQyNTYgYyA9IGEgKyBiOwoJCWFzc2VydChjID49IGEpOwoJCXJldHVybiBjOwoJfQoKCS8vIFRoaXMgYWxsb3dzIHlvdSB0byBidXkgdG9rZW5zIGJ5IHNlbmRpbmcgRXRoZXIgZGlyZWN0bHkgdG8gdGhlIHNtYXJ0IGNvbnRyYWN0CgkvLyB3aXRob3V0IGluY2x1ZGluZyBhbnkgdHJhbnNhY3Rpb24gZGF0YSAodXNlZnVsIGZvciwgc2F5LCBtb2JpbGUgd2FsbGV0IGFwcHMpLgoJZnVuY3Rpb24gKCkgcGF5YWJsZSBwdWJsaWMgewoJCS8vIG1zZy52YWx1ZSBpcyB0aGUgYW1vdW50IG9mIEV0aGVyIHNlbnQgYnkgdGhlIHRyYW5zYWN0aW9uLgoJCWlmIChtc2cudmFsdWUgPiAwKSB7CgkJCWJ1eSgpOwoJCX0gZWxzZSB7CgkJCXdpdGhkcmF3T2xkKG1zZy5zZW5kZXIpOwoJCX0KCX0KfQ=='.
	

]
