Class {
	#name : #SRT4055ce7003525c966beff40cfe6f04ab4c0dd82f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4055ce7003525c966beff40cfe6f04ab4c0dd82f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8vIEBhZGRyZXNzIDB4NDA1NWNlNzAwMzUyNWM5NjZiZWZmNDBjZmU2ZjA0YWI0YzBkZDgyZgovLyBUaGUgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBHYW1lIElDTyBzbWFydCBjb250cmFjdCB3YXMgaW5zcGlyZWQgYnkKLy8gdGhlIEV0aGVyZXVtIHRva2VuIGNyZWF0aW9uIHR1dG9yaWFsLCB0aGUgRmlyc3RCbG9vZCB0b2tlbiwgYW5kIHRoZSBCQVQgdG9rZW4uCgovLy8vLy8vLy8vLy8vLy8KLy8gU0FGRSBNQVRIIC8vCi8vLy8vLy8vLy8vLy8vLwoKY29udHJhY3QgU2FmZU1hdGggewoKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludDI1NiB4LCB1aW50MjU2IHkpIGludGVybmFsIHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgeiA9IHggKyB5OwogICAgICAgIHJlcXVpcmUoKHogPj0geCkgJiYgKHogPj0geSkpOwogICAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVTdWJ0cmFjdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmVxdWlyZSh4ID49IHkpOwogICAgICAgIHVpbnQyNTYgeiA9IHggLSB5OwogICAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVNdWx0KHVpbnQyNTYgeCwgdWludDI1NiB5KSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHogPSB4ICogeTsKICAgICAgICByZXF1aXJlKCh4ID09IDApfHwoei94ID09IHkpKTsKICAgICAgICByZXR1cm4gejsKICAgIH0KCn0KCgovLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBTVEFOREFSRCBUT0tFTiAvLwovLy8vLy8vLy8vLy8vLy8vLy8vLwoKY29udHJhY3QgVG9rZW4gewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKLyogIEVSQyAyMCB0b2tlbiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQp9CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy9HQU1FLkNPTSBJQ08gVE9LRU4vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8KCmNvbnRyYWN0IEdhbWVJQ08gaXMgU3RhbmRhcmRUb2tlbiwgU2FmZU1hdGggewogICAgLy8gRGVzY3JpcHRpdmUgcHJvcGVydGllcwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkdhbWUuY29tIFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkdUQyI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gIjEuMCI7CgogICAgLy8gQWNjb3VudCBmb3IgZXRoZXIgcHJvY2VlZC4KICAgIGFkZHJlc3MgcHVibGljIGV0aGVyUHJvY2VlZHNBY2NvdW50ID0gMHgwOwogICAgYWRkcmVzcyBwdWJsaWMgbXVsdGlXYWxsZXQgPSAweDA7CgogICAgLy8gVGhlc2UgcGFyYW1zIHNwZWNpZnkgdGhlIHN0YXJ0LCBlbmQsIG1pbiwgYW5kIG1heCBvZiB0aGUgc2FsZS4KICAgIGJvb2wgcHVibGljIGlzRmluYWxpemVkOwoKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzBUb3RhbFN1cHBseSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cxVG90YWxTdXBwbHkgPSAwOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93MlRvdGFsU3VwcGx5ID0gMDsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzNUb3RhbFN1cHBseSA9IDA7CgogICAgdWludDI1NiBwdWJsaWMgd2luZG93MFN0YXJ0VGltZSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cwRW5kVGltZSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cxU3RhcnRUaW1lID0gMDsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzFFbmRUaW1lID0gMDsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzJTdGFydFRpbWUgPSAwOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93MkVuZFRpbWUgPSAwOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93M1N0YXJ0VGltZSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3czRW5kVGltZSA9IDA7CgogICAgLy8gc2V0dGluZyB0aGUgY2FwYWNpdHkgb2YgZXZlcnkgcGFydCBvZiBpY28KICAgIHVpbnQyNTYgcHVibGljIHByZXNlcnZlZFRva2VucyA9IDEzMDAwMDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cwVG9rZW5DcmVhdGlvbkNhcCA9IDIwMDAwMDAwMCAqIDEwKipkZWNpbWFsczsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzFUb2tlbkNyZWF0aW9uQ2FwID0gMjAwMDAwMDAwICogMTAqKmRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93MlRva2VuQ3JlYXRpb25DYXAgPSAzMDAwMDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3czVG9rZW5DcmVhdGlvbkNhcCA9IDAgKiAxMCoqZGVjaW1hbHM7CgogICAgLy8gU2V0dGluZyB0aGUgZXhjaGFuZ2UgcmF0ZSBmb3IgdGhlIElDTy4KICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzBUb2tlbkV4Y2hhbmdlUmF0ZSA9IDUwMDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cxVG9rZW5FeGNoYW5nZVJhdGUgPSA0MDAwOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93MlRva2VuRXhjaGFuZ2VSYXRlID0gMzAwMDsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzNUb2tlbkV4Y2hhbmdlUmF0ZSA9IDA7CgogICAgdWludDI1NiBwdWJsaWMgcHJlSUNPTGltaXQgPSAwOwoKICAgIC8vIEV2ZW50cyBmb3IgbG9nZ2luZyByZWZ1bmRzIGFuZCB0b2tlbiBjcmVhdGlvbi4KICAgIC8vZXZlbnQgTG9nUmVmdW5kKGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IENyZWF0ZUdhbWVJY28oYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgUHJlSUNPVG9rZW5QdXNoZWQoYWRkcmVzcyBpbmRleGVkIF9idXllciwgdWludDI1NiBfYW1vdW50KTsKCiAgICAvLyBjb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gR2FtZUlDTygpCiAgICB7CiAgICAgICAgdG90YWxTdXBwbHkgPSAgMjAwMDAwMDAwMCAqIDEwKipkZWNpbWFsczsKICAgICAgICBpc0ZpbmFsaXplZCAgICAgICAgICAgICA9IGZhbHNlOwogICAgICAgIGV0aGVyUHJvY2VlZHNBY2NvdW50ICAgID0gbXNnLnNlbmRlcjsKICAgIH0KICAgIGZ1bmN0aW9uIGFkanVzdFRpbWUoCiAgICB1aW50MjU2IF93aW5kb3cwU3RhcnRUaW1lLCB1aW50MjU2IF93aW5kb3cwRW5kVGltZSwKICAgIHVpbnQyNTYgX3dpbmRvdzFTdGFydFRpbWUsIHVpbnQyNTYgX3dpbmRvdzFFbmRUaW1lLAogICAgdWludDI1NiBfd2luZG93MlN0YXJ0VGltZSwgdWludDI1NiBfd2luZG93MkVuZFRpbWUpCiAgICB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKICAgICAgICB3aW5kb3cwU3RhcnRUaW1lID0gX3dpbmRvdzBTdGFydFRpbWU7CiAgICAgICAgd2luZG93MEVuZFRpbWUgPSBfd2luZG93MEVuZFRpbWU7CiAgICAgICAgd2luZG93MVN0YXJ0VGltZSA9IF93aW5kb3cxU3RhcnRUaW1lOwogICAgICAgIHdpbmRvdzFFbmRUaW1lID0gX3dpbmRvdzFFbmRUaW1lOwogICAgICAgIHdpbmRvdzJTdGFydFRpbWUgPSBfd2luZG93MlN0YXJ0VGltZTsKICAgICAgICB3aW5kb3cyRW5kVGltZSA9IF93aW5kb3cyRW5kVGltZTsKICAgIH0KICAgIGZ1bmN0aW9uIGFkanVzdFN1cHBseSh1aW50MjU2IF93aW5kb3cwVG90YWxTdXBwbHksIHVpbnQyNTYgX3dpbmRvdzFUb3RhbFN1cHBseSwgdWludDI1NiBfd2luZG93MlRvdGFsU3VwcGx5KXsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoZXJQcm9jZWVkc0FjY291bnQpOwogICAgICAgIHdpbmRvdzBUb3RhbFN1cHBseSA9IF93aW5kb3cwVG90YWxTdXBwbHkgKiAxMCoqZGVjaW1hbHM7CiAgICAgICAgd2luZG93MVRvdGFsU3VwcGx5ID0gX3dpbmRvdzFUb3RhbFN1cHBseSAqIDEwKipkZWNpbWFsczsKICAgICAgICB3aW5kb3cyVG90YWxTdXBwbHkgPSBfd2luZG93MlRvdGFsU3VwcGx5ICogMTAqKmRlY2ltYWxzOwogICAgfQogICAgZnVuY3Rpb24gYWRqdXN0Q2FwKHVpbnQyNTYgX3ByZXNlcnZlZFRva2VucywgdWludDI1NiBfd2luZG93MFRva2VuQ3JlYXRpb25DYXAsIHVpbnQyNTYgX3dpbmRvdzFUb2tlbkNyZWF0aW9uQ2FwLCB1aW50MjU2IF93aW5kb3cyVG9rZW5DcmVhdGlvbkNhcCl7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKICAgICAgICBwcmVzZXJ2ZWRUb2tlbnMgPSBfcHJlc2VydmVkVG9rZW5zICogMTAqKmRlY2ltYWxzOwogICAgICAgIHdpbmRvdzBUb2tlbkNyZWF0aW9uQ2FwID0gX3dpbmRvdzBUb2tlbkNyZWF0aW9uQ2FwICogMTAqKmRlY2ltYWxzOwogICAgICAgIHdpbmRvdzFUb2tlbkNyZWF0aW9uQ2FwID0gX3dpbmRvdzFUb2tlbkNyZWF0aW9uQ2FwICogMTAqKmRlY2ltYWxzOwogICAgICAgIHdpbmRvdzJUb2tlbkNyZWF0aW9uQ2FwID0gX3dpbmRvdzJUb2tlbkNyZWF0aW9uQ2FwICogMTAqKmRlY2ltYWxzOwogICAgfQogICAgZnVuY3Rpb24gYWRqdXN0UmF0ZSh1aW50MjU2IF93aW5kb3cwVG9rZW5FeGNoYW5nZVJhdGUsIHVpbnQyNTYgX3dpbmRvdzFUb2tlbkV4Y2hhbmdlUmF0ZSwgdWludDI1NiBfd2luZG93MlRva2VuRXhjaGFuZ2VSYXRlKXsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoZXJQcm9jZWVkc0FjY291bnQpOwogICAgICAgIHdpbmRvdzBUb2tlbkV4Y2hhbmdlUmF0ZSA9IF93aW5kb3cwVG9rZW5FeGNoYW5nZVJhdGU7CiAgICAgICAgd2luZG93MVRva2VuRXhjaGFuZ2VSYXRlID0gX3dpbmRvdzFUb2tlbkV4Y2hhbmdlUmF0ZTsKICAgICAgICB3aW5kb3cyVG9rZW5FeGNoYW5nZVJhdGUgPSBfd2luZG93MlRva2VuRXhjaGFuZ2VSYXRlOwogICAgfQogICAgZnVuY3Rpb24gc2V0UHJvY2VlZHNBY2NvdW50KGFkZHJlc3MgX25ld0V0aGVyUHJvY2VlZHNBY2NvdW50KSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKICAgICAgICBldGhlclByb2NlZWRzQWNjb3VudCA9IF9uZXdFdGhlclByb2NlZWRzQWNjb3VudDsKICAgIH0KICAgIGZ1bmN0aW9uIHNldE11bHRpV2FsbGV0KGFkZHJlc3MgX25ld1dhbGxldCl7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKICAgICAgICBtdWx0aVdhbGxldCA9IF9uZXdXYWxsZXQ7CiAgICB9CiAgICBmdW5jdGlvbiBzZXRQcmVJQ09MaW1pdCh1aW50MjU2IF9wcmVJQ09MaW1pdCl7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKICAgICAgICBwcmVJQ09MaW1pdCA9IF9wcmVJQ09MaW1pdDsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmVJQ09QdXNoKGFkZHJlc3MgYnV5ZXIsIHVpbnQyNTYgYW1vdW50KSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKCiAgICAgICAgdWludDI1NiB0b2tlbnMgPSAwOwogICAgICAgIHVpbnQyNTYgY2hlY2tlZFN1cHBseSA9IDA7CiAgICAgICAgY2hlY2tlZFN1cHBseSA9IHNhZmVBZGQod2luZG93MFRvdGFsU3VwcGx5LCBhbW91bnQpOwogICAgICAgIHJlcXVpcmUod2luZG93MFRva2VuQ3JlYXRpb25DYXAgPj0gY2hlY2tlZFN1cHBseSk7CiAgICAgICAgYmFsYW5jZXNbYnV5ZXJdICs9IHRva2VuczsKICAgICAgICB3aW5kb3cwVG90YWxTdXBwbHkgPSBjaGVja2VkU3VwcGx5OwogICAgICAgIFByZUlDT1Rva2VuUHVzaGVkKGJ1eWVyLCBhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgIGNyZWF0ZSgpOwogICAgfQogICAgZnVuY3Rpb24gY3JlYXRlKCkgaW50ZXJuYWx7CiAgICAgICAgcmVxdWlyZSghaXNGaW5hbGl6ZWQpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IDAuMDAxIGV0aGVyKTsKICAgICAgICB1aW50MjU2IHRva2VucyA9IDA7CiAgICAgICAgdWludDI1NiBjaGVja2VkU3VwcGx5ID0gMDsKCiAgICAgICAgaWYod2luZG93MFN0YXJ0VGltZSAhPSAwICYmIHdpbmRvdzBFbmRUaW1lICE9IDAgJiYgdGltZSgpID49IHdpbmRvdzBTdGFydFRpbWUgJiYgdGltZSgpIDw9IHdpbmRvdzBFbmRUaW1lKXsKICAgICAgICAgICAgaWYocHJlSUNPTGltaXQgPiAwKXsKICAgICAgICAgICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByZUlDT0xpbWl0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0b2tlbnMgPSBzYWZlTXVsdChtc2cudmFsdWUsIHdpbmRvdzBUb2tlbkV4Y2hhbmdlUmF0ZSk7CiAgICAgICAgICAgIGNoZWNrZWRTdXBwbHkgPSBzYWZlQWRkKHdpbmRvdzBUb3RhbFN1cHBseSwgdG9rZW5zKTsKICAgICAgICAgICAgcmVxdWlyZSh3aW5kb3cwVG9rZW5DcmVhdGlvbkNhcCA+PSBjaGVja2VkU3VwcGx5KTsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gdG9rZW5zOwogICAgICAgICAgICB3aW5kb3cwVG90YWxTdXBwbHkgPSBjaGVja2VkU3VwcGx5OwogICAgICAgICAgICBDcmVhdGVHYW1lSWNvKG1zZy5zZW5kZXIsIHRva2Vucyk7CiAgICAgICAgfWVsc2UgaWYod2luZG93MVN0YXJ0VGltZSAhPSAwICYmIHdpbmRvdzFFbmRUaW1lIT0gMCAmJiB0aW1lKCkgPj0gd2luZG93MVN0YXJ0VGltZSAmJiB0aW1lKCkgPD0gd2luZG93MUVuZFRpbWUpewogICAgICAgICAgICB0b2tlbnMgPSBzYWZlTXVsdChtc2cudmFsdWUsIHdpbmRvdzFUb2tlbkV4Y2hhbmdlUmF0ZSk7CiAgICAgICAgICAgIGNoZWNrZWRTdXBwbHkgPSBzYWZlQWRkKHdpbmRvdzFUb3RhbFN1cHBseSwgdG9rZW5zKTsKICAgICAgICAgICAgcmVxdWlyZSh3aW5kb3cxVG9rZW5DcmVhdGlvbkNhcCA+PSBjaGVja2VkU3VwcGx5KTsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gdG9rZW5zOwogICAgICAgICAgICB3aW5kb3cxVG90YWxTdXBwbHkgPSBjaGVja2VkU3VwcGx5OwogICAgICAgICAgICBDcmVhdGVHYW1lSWNvKG1zZy5zZW5kZXIsIHRva2Vucyk7CiAgICAgICAgfWVsc2UgaWYod2luZG93MlN0YXJ0VGltZSAhPSAwICYmIHdpbmRvdzJFbmRUaW1lICE9IDAgJiYgdGltZSgpID49IHdpbmRvdzJTdGFydFRpbWUgJiYgdGltZSgpIDw9IHdpbmRvdzJFbmRUaW1lKXsKICAgICAgICAgICAgdG9rZW5zID0gc2FmZU11bHQobXNnLnZhbHVlLCB3aW5kb3cyVG9rZW5FeGNoYW5nZVJhdGUpOwogICAgICAgICAgICBjaGVja2VkU3VwcGx5ID0gc2FmZUFkZCh3aW5kb3cyVG90YWxTdXBwbHksIHRva2Vucyk7CiAgICAgICAgICAgIHJlcXVpcmUod2luZG93MlRva2VuQ3JlYXRpb25DYXAgPj0gY2hlY2tlZFN1cHBseSk7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IHRva2VuczsKICAgICAgICAgICAgd2luZG93MlRvdGFsU3VwcGx5ID0gY2hlY2tlZFN1cHBseTsKICAgICAgICAgICAgQ3JlYXRlR2FtZUljbyhtc2cuc2VuZGVyLCB0b2tlbnMpOwogICAgICAgIH1lbHNlewogICAgICAgICAgICByZXF1aXJlKGZhbHNlKTsKICAgICAgICB9CgogICAgfQoKICAgIGZ1bmN0aW9uIHRpbWUoKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGJsb2NrLnRpbWVzdGFtcDsKICAgIH0KCiAgICBmdW5jdGlvbiB0b2RheSh1aW50IHN0YXJ0VGltZSkgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBkYXlGb3IodGltZSgpLCBzdGFydFRpbWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRheUZvcih1aW50IHRpbWVzdGFtcCwgdWludCBzdGFydFRpbWUpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdGltZXN0YW1wIDwgc3RhcnRUaW1lID8gMCA6IHNhZmVTdWJ0cmFjdCh0aW1lc3RhbXAsIHN0YXJ0VGltZSkgLyAyNCBob3VycyArIDE7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aERyYXcodWludDI1NiBfdmFsdWUpewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBldGhlclByb2NlZWRzQWNjb3VudCk7CiAgICAgICAgaWYobXVsdGlXYWxsZXQgIT0gMHgwKXsKICAgICAgICAgICAgaWYgKCFtdWx0aVdhbGxldC5zZW5kKF92YWx1ZSkpIHJlcXVpcmUoZmFsc2UpOwogICAgICAgIH1lbHNlewogICAgICAgICAgICBpZiAoIWV0aGVyUHJvY2VlZHNBY2NvdW50LnNlbmQoX3ZhbHVlKSkgcmVxdWlyZShmYWxzZSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmFsaXplKCkgewogICAgICAgIHJlcXVpcmUoIWlzRmluYWxpemVkKTsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoZXJQcm9jZWVkc0FjY291bnQpOwogICAgICAgIGlzRmluYWxpemVkID0gdHJ1ZTsKICAgICAgICBiYWxhbmNlc1tldGhlclByb2NlZWRzQWNjb3VudF0gKz0gdG90YWxTdXBwbHktIHdpbmRvdzBUb3RhbFN1cHBseS0gd2luZG93MVRvdGFsU3VwcGx5IC0gd2luZG93MlRvdGFsU3VwcGx5OwogICAgICAgIGlmKG11bHRpV2FsbGV0ICE9IDB4MCl7CiAgICAgICAgICAgIGlmICghbXVsdGlXYWxsZXQuc2VuZCh0aGlzLmJhbGFuY2UpKSByZXF1aXJlKGZhbHNlKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgaWYgKCFldGhlclByb2NlZWRzQWNjb3VudC5zZW5kKHRoaXMuYmFsYW5jZSkpIHJlcXVpcmUoZmFsc2UpOwogICAgICAgIH0KICAgIH0KCn0='.
	

]
