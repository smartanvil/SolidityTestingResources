Class {
	#name : #SRT4a3b35487a56cfb9df80716054f793aa4c3bc1f2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4a3b35487a56cfb9df80716054f793aa4c3bc1f2 >> base64 [
	^ 'LyoKZmlsZTogICBkZXBvc2l0b2ZmZXIuc29sCnZlcjogICAgMC4xLjIKYXV0aG9yOiBDaHJpcyBLd2FuCmRhdGU6ICAgMjgtT0NULTIwMTcvMTEtTWFyY2gtMjAxOC8yLUFwcmlsLTIwMTgKZW1haWw6ICBlY29ycG51IEFUIGdtYWlsLmNvbQoKQSBjb2xsYXRlZCBjb250cmFjdCBzZXQgZm9yIGEgdG9rZW4gc2FsZSBzcGVjaWZpYyB0byB0aGUgcmVxdWlybWVudHMgb2YKRGVwb3NpdG9mZmVyIChET1QpIHRva2VuIHByb2R1Y3QuCgpUaGlzIHNvZnR3YXJlIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCmJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCk1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIApTZWUgTUlUIExpY2VuY2UgZm9yIGZ1cnRoZXIgZGV0YWlscy4KPGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUPi4KCiovCgoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXAoKIGRlcG9zaXRvZmZlciB0b2tlbiBzYWxlIGNvbmZpZ3VyYXRpb24KClwqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgovLyBDb250YWlucyB0b2tlbiBzYWxlIHBhcmFtZXRlcnMKY29udHJhY3QgZGVwb3NpdG9mZmVyVG9rZW5Db25maWcKewogICAgLy8gRVJDMjAgdHJhZGUgbmFtZSBhbmQgc3ltYm9sCiAgICBzdHJpbmcgcHVibGljICAgICAgICAgICBuYW1lICAgICAgICAgICAgPSAiVVNQYXQ3Mzc2NjEyIGRlcG9zaXRvZmZlciI7CiAgICBzdHJpbmcgcHVibGljICAgICAgICAgICBzeW1ib2wgICAgICAgICAgPSAiRE8iOwoKICAgIC8vIE93bmVyIGhhcyBwb3dlciB0byBhYm9ydCwgZGlzY291bnQgYWRkcmVzc2VzLCBzd2VlcCBzdWNjZXNzZnVsIGZ1bmRzLAogICAgLy8gY2hhbmdlIG93bmVyLCBzd2VlcCBhbGllbiB0b2tlbnMuCiAgICBhZGRyZXNzIHB1YmxpYyAgICAgICAgICBvd25lciAgICAgICAgICAgPSAweEIzNTNjRjQxQTBDQWEzOEQ2NTk3QTdhMTMzN2RlYmYwYjA5ZGQ4YWU7IC8vIFByaW1hcnkgYWRkcmVzcyBjaGVja3N1bW1lZAogICAgCiAgICAvLyBGdW5kIHdhbGxldCBzaG91bGQgYWxzbyBiZSBhdWRpdGVkIHByaW9yIHRvIGRlcGxveW1lbnQKICAgIC8vIE5PVEU6IE11c3QgYmUgY2hlY2tzdW1tZWQgYWRkcmVzcyEKICAgIC8vYWRkcmVzcyBwdWJsaWMgICAgICAgICAgZnVuZFdhbGxldCAgICAgID0gMHhFNEJlMzE1N0RCRDcxQWNkN0FkNTY2N2RiMDBBQTExMUMwMDg4MTk1OyAvLyBtdWx0aVNpZyBhZGRyZXNzIGNoZWNrc3VtbWVkCiAgICAgYWRkcmVzcyBwdWJsaWMgICAgICAgICAgIGZ1bmRXYWxsZXQgICAgICA9IDB4NDZGRjcwMDZGOEVBNUFENzU3MEE4NEQ3QkUwZWQ3ODIyNEQzYWI1ZTsgLy8gbWFpbgogICAgLy9hZGRyZXNzIHB1YmxpYyAgICAgICAgICBmdW5kV2FsbGV0ID0gMHgwZjA5N2ZBM0RjMzE5QzVlYzI5OWVBMzNGOTQxNzQ0ZkM1Y2NFM2VjOyAvL3JvcHN0ZXIgdGVzdAogICAgCiAgICAvL3lvdSBjYW5ub3QgdXNlIHJlZ3VsYXIgYWRkcmVzcywgeW91IG5lZWQgdG8gY3JlYXRlIGEgY29udHJhY3Qgd2FsbGV0IGFuZCBuZWVkIHRvIG1ha2UgaXQgY2hlY2tlZHN1bW1lZCBzZWFyY2ggbmV0ICAKICAgIAogICAgLy8gVG9rZW5zIGF3YXJkZWQgcGVyIFVTRCBjb250cmlidXRlZAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgICAgVE9LRU5TX1BFUl9VU0QgID0gMjsKCiAgICAvLyBFdGhlciBtYXJrZXQgcHJpY2UgaW4gVVNECiAgICB1aW50IHB1YmxpYyBjb25zdGFudCAgICBVU0RfUEVSX0VUSCAgICAgPSAzODA7IC8vIGFwcHJveCA3IGRheSBhdmVyYWdlIEhpZ2ggTG93IGFzIGF0IDI5dGggT0NUIDIwMTcKICAgIAogICAgLy8gTWluaW11bSBhbmQgbWF4aW11bSB0YXJnZXQgaW4gVVNECiAgICB1aW50IHB1YmxpYyBjb25zdGFudCAgICBNSU5fVVNEX0ZVTkQgICAgPSAxOyAgLy8gJDEKICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIE1BWF9VU0RfRlVORCAgICA9IDIwMDAwMDA7IC8vICQyIG1pbwogICAgCiAgICAvLyBOb24tS1lDIGNvbnRyaWJ1dGlvbiBsaW1pdCBpbiBVU0QKICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIEtZQ19VU0RfTE1UICAgICA9IDUwMDAwOwogICAgCiAgICAvLyBUaGVyZSB3aWxsIGJlIGV4YWN0bHkgNDAwMDAwMCB0b2tlbnMgcmVnYXJkbGVzcyBvZiBudW1iZXIgc29sZAogICAgLy8gVW5zb2xkIHRva2VucyBhcmUgcHV0IGdpdmVuIHRvIHRoZSBGb3VuZGVyIG9uIFRydXN0IHRvIGZ1bmQgb3BlcmF0aW9ucyBvZiB0aGUgUHJvamVjdAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgICAgTUFYX1RPS0VOUyAgICAgID0gNDAwMDAwMDsgLy8gNCBtaW8KICAgIAogICAgLy8gRnVuZGluZyBiZWdpbnMgb24gMzB0aCBPQ1QgMjAxNwogICAgCiAgICAvL3VpbnQgcHVibGljIGNvbnN0YW50ICAgIFNUQVJUX0RBVEUgICAgICA9IDE1MDkzMTgwMDE7IC8vIDMwLjEwLjIwMTcgMTAgQU0gYW5kIDEgU2VjIFN5ZG5leSBUaW1lCiAgICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIFNUQVJUX0RBVEUgICAgICA9IDE1MjA3NzYzMzc7IC8vIE1vbmRheSBNYXJjaCAxMiwgMjAxOCAwMDo1MjoxNyAoYW0pIGluIHRpbWUgem9uZSBBdXN0cmFsaWEvU3lkbmV5IChBRURUKQogICAgICAKICAgIC8vIFBlcmlvZCBmb3IgZnVuZHJhaXNpbmcKICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIEZVTkRJTkdfUEVSSU9EICA9IDE4MCBkYXlzOwp9CgoKbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgYyA9IGEgKyBiOwogICAgICAgIHJlcXVpcmUoYyA+PSBhKTsKICAgIH0KICAgIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICByZXF1aXJlKGIgPD0gYSk7CiAgICAgICAgYyA9IGEgLSBiOwogICAgfQogICAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgYykgewogICAgICAgIGMgPSBhICogYjsKICAgICAgICByZXF1aXJlKGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIH0KICAgIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICByZXF1aXJlKGIgPiAwKTsKICAgICAgICBjID0gYSAvIGI7CiAgICB9Cn0KCgpjb250cmFjdCBSZWVudHJ5UHJvdGVjdGVkCnsKICAgIC8vIFRoZSByZWVudHJ5IHByb3RlY3Rpb24gc3RhdGUgbXV0ZXguCiAgICBib29sIF9fcmVNdXRleDsKCiAgICAvLyBTZXRzIGFuZCByZXNldHMgbXV0ZXggaW4gb3JkZXIgdG8gYmxvY2sgZnVuY3RpbiByZWVudHJ5CiAgICBtb2RpZmllciBwcmV2ZW50UmVlbnRyeSgpIHsKICAgICAgICByZXF1aXJlKCFfX3JlTXV0ZXgpOwogICAgICAgIF9fcmVNdXRleCA9IHRydWU7CiAgICAgICAgXzsKICAgICAgICBkZWxldGUgX19yZU11dGV4OwogICAgfQoKICAgIC8vIEJsb2NrcyBmdW5jdGlvbiBlbnRyeSBpZiBtdXRleCBpcyBzZXQKICAgIG1vZGlmaWVyIG5vUmVlbnRyeSgpIHsKICAgICAgICByZXF1aXJlKCFfX3JlTXV0ZXgpOwogICAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IEVSQzIwVG9rZW4KewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgovKiBDb25zdGFudHMgKi8KCiAgICAvLyBub25lCiAgICAKLyogU3RhdGUgdmFyaWFibGUgKi8KCiAgICAvLy8gQHJldHVybiBUaGUgVG90YWwgc3VwcGx5IG9mIHRva2VucwogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICAKICAgIC8vLyBAcmV0dXJuIFRva2VuIHN5bWJvbAogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICAKICAgIC8vIFRva2VuIG93bmVyc2hpcCBtYXBwaW5nCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogICAgCiAgICAvLyBBbGxvd2FuY2VzIG1hcHBpbmcKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCi8qIEV2ZW50cyAqLwoKICAgIC8vIFRyaWdnZXJlZCB3aGVuIHRva2VucyBhcmUgdHJhbnNmZXJyZWQuCiAgICBldmVudCBUcmFuc2ZlcigKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgX2Zyb20sCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIF90bywKICAgICAgICB1aW50MjU2IF9hbW91bnQpOwoKICAgIC8vIFRyaWdnZXJlZCB3aGVuZXZlciBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkgaXMgY2FsbGVkLgogICAgZXZlbnQgQXBwcm92YWwoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIF9vd25lciwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsCiAgICAgICAgdWludDI1NiBfYW1vdW50KTsKCi8qIE1vZGlmaWVycyAqLwoKICAgIC8vIG5vbmUKICAgIAovKiBGdW5jdGlvbnMgKi8KCiAgICAvLyBVc2luZyBhbiBleHBsaWNpdCBnZXR0ZXIgYWxsb3dzIGZvciBmdW5jdGlvbiBvdmVybG9hZGluZyAgICAKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9hZGRyKQogICAgICAgIHB1YmxpYwogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX2FkZHJdOwogICAgfQogICAgCiAgICAvLyBVc2luZyBhbiBleHBsaWNpdCBnZXR0ZXIgYWxsb3dzIGZvciBmdW5jdGlvbiBvdmVybG9hZGluZyAgICAKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyB0byBhZGRyZXNzIF90bwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiB4ZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7CiAgICB9CgogICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShfYW1vdW50IDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKICAgICAgICAKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsKICAgICAgICByZXR1cm4geGZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgIH0KCiAgICAvLyBQcm9jZXNzIGEgdHJhbnNmZXIgaW50ZXJuYWxseS4KICAgIGZ1bmN0aW9uIHhmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShfYW1vdW50IDw9IGJhbGFuY2VzW19mcm9tXSk7CgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgICAgIAogICAgICAgIC8vIGF2b2lkIHdhc3RpbmcgZ2FzIG9uIDAgdG9rZW4gdHJhbnNmZXJzCiAgICAgICAgaWYoX2Ftb3VudCA9PSAwKSByZXR1cm4gdHJ1ZTsKICAgICAgICAKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VzW190b10gICA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEFwcHJvdmVzIGEgdGhpcmQtcGFydHkgc3BlbmRlcgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgoKCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cCgojIyBDb25kaXRpb25hbCBFbnRyeSBUYWJsZQoKRnVuY3Rpb25zIG11c3QgdGhyb3cgb24gRiBjb25kaXRpb25zCgpDb25kaXRpb25hbCBFbnRyeSBUYWJsZSAoZnVuY3Rpb25zIG11c3QgdGhyb3cgb24gRiBjb25kaXRpb25zKQoKcmVuZXRyeSBwcmV2ZW50aW9uIG9uIGFsbCBwdWJsaWMgbXV0YXRpbmcgZnVuY3Rpb25zClJlZW50cnkgbXV0ZXggc2V0IGluIG1vdmVGdW5kc1RvV2FsbGV0KCksIHJlZnVuZCgpCgp8ZnVuY3Rpb24gICAgICAgICAgICAgICAgfDxTVEFSVF9EQVRFfDxFTkRfREFURSB8ZnVuZEZhaWxlZCAgfGZ1bmRTdWNjZWVkZWR8aWNvU3VjY2VlZGVkCnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18Oi0tLS0tLS0tLTp8Oi0tLS0tLS0tOnw6LS0tLS0tLS0tLTp8Oi0tLS0tLS0tLS0tOnw6LS0tLS0tLS0tOnwKfCgpICAgICAgICAgICAgICAgICAgICAgIHxLWUMgICAgICAgIHxUICAgICAgICAgfEYgICAgICAgICAgIHxUICAgICAgICAgICAgfEYgICAgICAgICAgfAp8YWJvcnQoKSAgICAgICAgICAgICAgICAgfFQgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICAgfFQgICAgICAgICAgICB8RiAgICAgICAgICB8Cnxwcm94eVB1cmNoYXNlKCkgICAgICAgICB8S1lDICAgICAgICB8VCAgICAgICAgIHxGICAgICAgICAgICB8VCAgICAgICAgICAgIHxGICAgICAgICAgIHwKfGFkZEt5Y0FkZHJlc3MoKSAgICAgICAgIHxUICAgICAgICAgIHxUICAgICAgICAgfEYgICAgICAgICAgIHxUICAgICAgICAgICAgfFQgICAgICAgICAgfAp8ZmluYWxpc2VJQ08oKSAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8RiAgICAgICAgICAgfFQgICAgICAgICAgICB8VCAgICAgICAgICB8CnxyZWZ1bmQoKSAgICAgICAgICAgICAgICB8RiAgICAgICAgICB8RiAgICAgICAgIHxUICAgICAgICAgICB8RiAgICAgICAgICAgIHxGICAgICAgICAgIHwKfHRyYW5zZmVyKCkgICAgICAgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfEYgICAgICAgICAgIHxGICAgICAgICAgICAgfFQgICAgICAgICAgfAp8dHJhbnNmZXJGcm9tKCkgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8RiAgICAgICAgICAgfEYgICAgICAgICAgICB8VCAgICAgICAgICB8CnxhcHByb3ZlKCkgICAgICAgICAgICAgICB8RiAgICAgICAgICB8RiAgICAgICAgIHxGICAgICAgICAgICB8RiAgICAgICAgICAgIHxUICAgICAgICAgIHwKfGNoYW5nZU93bmVyKCkgICAgICAgICAgIHxUICAgICAgICAgIHxUICAgICAgICAgfFQgICAgICAgICAgIHxUICAgICAgICAgICAgfFQgICAgICAgICAgfAp8YWNjZXB0T3duZXJzaGlwKCkgICAgICAgfFQgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICAgfFQgICAgICAgICAgICB8VCAgICAgICAgICB8CnxjaGFuZ2VkZXBvc2l0bygpICAgICAgICAgIHxUICAgICAgICAgIHxUICAgICAgICAgfFQgICAgICAgICAgIHxUICAgICAgICAgICAgfFQgICAgICAgICAgfAp8ZGVzdHJveSgpICAgICAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8IV9fYWJvcnRGdXNlfEYgICAgICAgICAgICB8RiAgICAgICAgICB8Cnx0cmFuc2ZlckFueUVSQzIwVG9rZW5zKCl8VCAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgICB8VCAgICAgICAgICAgIHxUICAgICAgICAgIHwKClwqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgpjb250cmFjdCBkZXBvc2l0b2ZmZXJUb2tlbkFic3RyYWN0CnsKLy8gVE9ETyBjb21tZW50IGV2ZW50cwoKLy8gTG9nZ2VkIHdoZW4gZnVuZGVyIGV4Y2VlZHMgdGhlIEtZQyBsaW1pdAogICAgZXZlbnQgS1lDQWRkcmVzcyhhZGRyZXNzIGluZGV4ZWQgX2FkZHIsIGJvb2wgaW5kZXhlZCBfa3ljKTsKCi8vIExvZ2dlZCB1cG9uIHJlZnVuZAogICAgZXZlbnQgUmVmdW5kZWQoYWRkcmVzcyBpbmRleGVkIF9hZGRyLCB1aW50IGluZGV4ZWQgX3ZhbHVlKTsKCi8vIExvZ2dlZCB3aGVuIG5ldyBvd25lciBhY2NlcHRzIG93bmVyc2hpcAogICAgZXZlbnQgQ2hhbmdlZE93bmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7CiAgICAKLy8gTG9nZ2VkIHdoZW4gb3duZXIgaW5pdGlhdGVzIGEgY2hhbmdlIG9mIG93bmVyc2hpcAogICAgZXZlbnQgQ2hhbmdlT3duZXJUbyhhZGRyZXNzIGluZGV4ZWQgX3RvKTsKCi8vIExvZ2dlZCB3aGVuIElDTyBldGhlciBmdW5kcyBhcmUgdHJhbnNmZXJyZWQgdG8gYW4gYWRkcmVzcwogICAgZXZlbnQgRnVuZHNUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgX3dhbGxldCwgdWludCBpbmRleGVkIF92YWx1ZSk7CgoKICAgIC8vIFRoaXMgZnVzZSBibG93cyB1cG9uIGNhbGxpbmcgYWJvcnQoKSB3aGljaCBmb3JjZXMgYSBmYWlsIHN0YXRlCiAgICBib29sIHB1YmxpYyBfX2Fib3J0RnVzZSA9IHRydWU7CiAgICAKICAgIC8vIFNldCB0byB0cnVlIGFmdGVyIHRoZSBmdW5kIGlzIHN3ZXB0IHRvIHRoZSBmdW5kIHdhbGxldCwgYWxsb3dzIHRva2VuCiAgICAvLyB0cmFuc2ZlcnMgYW5kIHByZXZlbnRzIGFib3J0KCkKICAgIGJvb2wgcHVibGljIGljb1N1Y2Nlc3NmdWw7CgogICAgLy8gVG9rZW4gY29udmVyc2lvbiBmYWN0b3JzIGFyZSBjYWxjdWxhdGVkIHdpdGggZGVjaW1hbCBwbGFjZXMgYXQgcGFyaXR5IHdpdGggZXRoZXIKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIC8vIEFuIGFkZHJlc3MgYXV0aG9yaXNlZCB0byB0YWtlIG93bmVyc2hpcAogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CiAgICAKICAgIC8vIFRoZSBkZXBvc2l0byBzbWFydCBjb250cmFjdCBhZGRyZXNzCiAgICBhZGRyZXNzIHB1YmxpYyBkZXBvc2l0bzsKICAgIAogICAgLy8gVG90YWwgZXRoZXIgcmFpc2VkIGR1cmluZyBmdW5kaW5nCiAgICB1aW50IHB1YmxpYyBldGhlclJhaXNlZDsKICAgIAogICAgLy8gUHJlYXV0aG9yaXplZCB0cmFuY2ggZGlzY291bnQgYWRkcmVzc2VzCiAgICAvLyBob2xkZXIgPT4gZGlzY291bnQKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGt5Y0FkZHJlc3NlczsKICAgIAogICAgLy8gUmVjb3JkIG9mIGV0aGVyIHBhaWQgcGVyIGFkZHJlc3MKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGV0aGVyQ29udHJpYnV0ZWQ7CgogICAgLy8gUmV0dXJuIGB0cnVlYCBpZiBNSU5fRlVORFMgd2VyZSByYWlzZWQKICAgIGZ1bmN0aW9uIGZ1bmRTdWNjZWVkZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7CiAgICAKICAgIC8vIFJldHVybiBgdHJ1ZWAgaWYgTUlOX0ZVTkRTIHdlcmUgbm90IHJhaXNlZCBiZWZvcmUgRU5EX0RBVEUKICAgIGZ1bmN0aW9uIGZ1bmRGYWlsZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7CgogICAgLy8gUmV0dXJucyBVU0QgcmFpc2VkIGZvciBzZXQgRVRIL1VTRCByYXRlCiAgICBmdW5jdGlvbiB1c2RSYWlzZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCk7CgogICAgLy8gUmV0dXJucyBhbiBhbW91bnQgaW4gZXRoIGVxdWl2aWxlbnQgdG8gVVNEIGF0IHRoZSBzZXQgcmF0ZQogICAgZnVuY3Rpb24gdXNkVG9FdGgodWludCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCk7CiAgICAKICAgIC8vIFJldHVybnMgdGhlIFVTRCB2YWx1ZSBvZiBldGhlciBhdCB0aGUgc2V0IFVTRC9FVEggcmF0ZQogICAgZnVuY3Rpb24gZXRoVG9Vc2QodWludCBfd2VpKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCk7CgogICAgLy8gUmV0dXJucyB0b2tlbi9ldGhlciBjb252ZXJzaW9uIGdpdmVuIGV0aGVyIHZhbHVlIGFuZCBhZGRyZXNzLiAKICAgIGZ1bmN0aW9uIGV0aFRvVG9rZW5zKHVpbnQgX2V0aCkKICAgICAgICBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCk7CgogICAgLy8gUHJvY2Vzc2VzIGEgdG9rZW4gcHVyY2hhc2UgZm9yIGEgZ2l2ZW4gYWRkcmVzcwogICAgZnVuY3Rpb24gcHJveHlQdXJjaGFzZShhZGRyZXNzIF9hZGRyKSBwYXlhYmxlIHJldHVybnMgKGJvb2wpOwoKICAgIC8vIE93bmVyIGNhbiBtb3ZlIGZ1bmRzIG9mIHN1Y2Nlc3NmdWwgZnVuZCB0byBmdW5kV2FsbGV0IAogICAgZnVuY3Rpb24gZmluYWxpc2VJQ08oKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICAKICAgIC8vIFJlZ2lzdGVycyBhIGRpc2NvdW50ZWQgYWRkcmVzcwogICAgZnVuY3Rpb24gYWRkS3ljQWRkcmVzcyhhZGRyZXNzIF9hZGRyLCBib29sIF9reWMpCiAgICAgICAgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIC8vIFJlZnVuZCBvbiBmYWlsZWQgb3IgYWJvcnRlZCBzYWxlIAogICAgZnVuY3Rpb24gcmVmdW5kKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgICAvLyBUbyBjYW5jZWwgdG9rZW4gc2FsZSBwcmlvciB0byBTVEFSVF9EQVRFCiAgICBmdW5jdGlvbiBhYm9ydCgpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIAogICAgLy8gQ2hhbmdlIHRoZSBkZXBvc2l0byBiYWNrZW5kIGNvbnRyYWN0IGFkZHJlc3MKICAgIGZ1bmN0aW9uIGNoYW5nZWRlcG9zaXRvKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIAogICAgLy8gRm9yIG93bmVyIHRvIHNhbHZhZ2UgdG9rZW5zIHNlbnQgdG8gY29udHJhY3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyQW55RVJDMjBUb2tlbihhZGRyZXNzIHRva2VuQWRkcmVzcywgdWludCBhbW91bnQpCiAgICAgICAgcmV0dXJucyAoYm9vbCk7Cn0KCgovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXAoKIGRlcG9zaXRvZmZlciB0b2tlbiBpbXBsaW1lbnRhdGlvbgoKXCotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCmNvbnRyYWN0IGRlcG9zaXRvZmZlclRva2VuIGlzIAogICAgUmVlbnRyeVByb3RlY3RlZCwKICAgIEVSQzIwVG9rZW4sCiAgICBkZXBvc2l0b2ZmZXJUb2tlbkFic3RyYWN0LAogICAgZGVwb3NpdG9mZmVyVG9rZW5Db25maWcKewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgovLwovLyBDb25zdGFudHMKLy8KCiAgICAvLyBVU0QgdG8gZXRoZXIgY29udmVyc2lvbiBmYWN0b3JzIGNhbGN1bGF0ZWQgZnJvbSBgZGVwb3NpdG9mZmVyVG9rZW5Db25maWdgIGNvbnN0YW50cyAKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19QRVJfRVRIID0gVE9LRU5TX1BFUl9VU0QgKiBVU0RfUEVSX0VUSDsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9FVEhfRlVORCAgID0gMSBldGhlciAqIE1JTl9VU0RfRlVORCAvIFVTRF9QRVJfRVRIOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTUFYX0VUSF9GVU5EICAgPSAxIGV0aGVyICogTUFYX1VTRF9GVU5EIC8gVVNEX1BFUl9FVEg7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBLWUNfRVRIX0xNVCAgICA9IDEgZXRoZXIgKiBLWUNfVVNEX0xNVCAgLyBVU0RfUEVSX0VUSDsKCiAgICAvLyBHZW5lcmFsIGZ1bmRpbmcgb3BlbnMgTEVBRF9JTl9QRVJJT0QgYWZ0ZXIgZGVwbG95bWVudCAodGltZXN0YW1wcyBjYW4ndCBiZSBjb25zdGFudCkKICAgIHVpbnQgcHVibGljIEVORF9EQVRFICA9IFNUQVJUX0RBVEUgKyBGVU5ESU5HX1BFUklPRDsKCi8vCi8vIE1vZGlmaWVycwovLwoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKLy8KLy8gRnVuY3Rpb25zCi8vCgogICAgLy8gQ29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIGRlcG9zaXRvZmZlclRva2VuKCkKICAgIHsKICAgICAgICAvLyBJQ08gcGFyYW1ldGVycyBhcmUgc2V0IGluIGRlcG9zaXRvZmZlclRTQ29uZmlnCiAgICAgICAgLy8gSW52YWxpZCBjb25maWd1cmF0aW9uIGNhdGNoaW5nIGhlcmUKICAgICAgICByZXF1aXJlKGJ5dGVzKHN5bWJvbCkubGVuZ3RoID4gMCk7CiAgICAgICAgcmVxdWlyZShieXRlcyhuYW1lKS5sZW5ndGggPiAwKTsKICAgICAgICByZXF1aXJlKG93bmVyICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShmdW5kV2FsbGV0ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShUT0tFTlNfUEVSX1VTRCA+IDApOwogICAgICAgIHJlcXVpcmUoVVNEX1BFUl9FVEggPiAwKTsKICAgICAgICByZXF1aXJlKE1JTl9VU0RfRlVORCA+IDApOwogICAgICAgIHJlcXVpcmUoTUFYX1VTRF9GVU5EID4gTUlOX1VTRF9GVU5EKTsKICAgICAgICByZXF1aXJlKFNUQVJUX0RBVEUgPiAwKTsKICAgICAgICByZXF1aXJlKEZVTkRJTkdfUEVSSU9EID4gMCk7CiAgICAgICAgCiAgICAgICAgLy8gU2V0dXAgYW5kIGFsbG9jYXRlIHRva2VuIHN1cHBseSB0byAxOCBkZWNpbWFsIHBsYWNlcwogICAgICAgIHRvdGFsU3VwcGx5ID0gTUFYX1RPS0VOUyAqIDFlMTg7CiAgICAgICAgYmFsYW5jZXNbZnVuZFdhbGxldF0gPSB0b3RhbFN1cHBseTsKICAgICAgICBUcmFuc2ZlcigweDAsIGZ1bmRXYWxsZXQsIHRvdGFsU3VwcGx5KTsKICAgIH0KICAgIAogICAgLy8gRGVmYXVsdCBmdW5jdGlvbgogICAgZnVuY3Rpb24gKCkKICAgICAgICBwYXlhYmxlCiAgICB7CiAgICAgICAgLy8gUGFzcyB0aHJvdWdoIHRvIHB1cmNoYXNpbmcgZnVuY3Rpb24uIFdpbGwgdGhyb3cgb24gZmFpbGVkIG9yCiAgICAgICAgLy8gc3VjY2Vzc2Z1bCBJQ08KICAgICAgICBwcm94eVB1cmNoYXNlKG1zZy5zZW5kZXIpOwogICAgfQoKLy8KLy8gR2V0dGVycwovLwoKICAgIC8vIElDTyBmYWlscyBpZiBhYm9ydGVkIG9yIG1pbmltdW0gZnVuZHMgYXJlIG5vdCByYWlzZWQgYnkgdGhlIGVuZCBkYXRlCiAgICBmdW5jdGlvbiBmdW5kRmFpbGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmV0dXJuICFfX2Fib3J0RnVzZQogICAgICAgICAgICB8fCAobm93ID4gRU5EX0RBVEUgJiYgZXRoZXJSYWlzZWQgPCBNSU5fRVRIX0ZVTkQpOwogICAgfQogICAgCiAgICAvLyBGdW5kaW5nIHN1Y2NlZWRzIGlmIG5vdCBhYm9ydGVkLCBtaW5pbXVtIGZ1bmRzIGFyZSByYWlzZWQgYmVmb3JlIGVuZCBkYXRlCiAgICBmdW5jdGlvbiBmdW5kU3VjY2VlZGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmV0dXJuICFmdW5kRmFpbGVkKCkKICAgICAgICAgICAgJiYgZXRoZXJSYWlzZWQgPj0gTUlOX0VUSF9GVU5EOwogICAgfQoKICAgIC8vIFJldHVybnMgdGhlIFVTRCB2YWx1ZSBvZiBldGhlciBhdCB0aGUgc2V0IFVTRC9FVEggcmF0ZQogICAgZnVuY3Rpb24gZXRoVG9Vc2QodWludCBfd2VpKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICByZXR1cm4gVVNEX1BFUl9FVEgubXVsKF93ZWkpLmRpdigxIGV0aGVyKTsKICAgIH0KICAgIAogICAgLy8gUmV0dXJucyB0aGUgZXRoZXIgdmFsdWUgb2YgVVNEIGF0IHRoZSBzZXQgVVNEL0VUSCByYXRlCiAgICBmdW5jdGlvbiB1c2RUb0V0aCh1aW50IF91c2QpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHJldHVybiBfdXNkLm11bCgxIGV0aGVyKS5kaXYoVVNEX1BFUl9FVEgpOwogICAgfQogICAgCiAgICAvLyBSZXR1cm5zIHRoZSBVU0QgdmFsdWUgb2YgZXRoZXIgcmFpc2VkIGF0IHRoZSBzZXQgVVNEL0VUSCByYXRlCiAgICBmdW5jdGlvbiB1c2RSYWlzZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICByZXR1cm4gZXRoVG9Vc2QoZXRoZXJSYWlzZWQpOwogICAgfQogICAgCiAgICAvLyBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdG9rZW5zIGZvciBnaXZlbiBhbW91bnQgb2YgZXRoZXIgZm9yIGFuIGFkZHJlc3MgCiAgICBmdW5jdGlvbiBldGhUb1Rva2Vucyh1aW50IF93ZWkpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHVpbnQgdXNkID0gZXRoVG9Vc2QoX3dlaSk7CiAgICAgICAgCiAgICAgICAgLy8gUGVyY2VudCBib251cyBmdW5kaW5nIHRpZXJzIGZvciBVU0QgZnVuZGluZwogICAgICAgIHVpbnQgYm9udXMgPSAwOwogICAgLy8gICAgICAgIHVzZCA+PSAyMDAwMDAwID8gMzUgOgogICAgLy8gICAgICAgIHVzZCA+PSA1MDAwMDAgID8gMzAgOgogICAgLy8gICAgICAgIHVzZCA+PSAxMDAwMDAgID8gMjAgOgogICAgLy8gICAgICAgIHVzZCA+PSAyNTAwMCAgID8gMTUgOgogICAgLy8gICAgICAgIHVzZCA+PSAxMDAwMCAgID8gMTAgOgogICAgLy8gICAgICAgIHVzZCA+PSA1MDAwICAgID8gNSAgOgogICAgLy8gICAgICAgIHVzZCA+PSAxMDAwICAgID8gMSAgOiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgLy8gdXNpbmcgbi4yIGZpeGVkIHBvaW50IGRlY2ltYWwgZm9yIHdob2xlIG51bWJlciBwZXJjZW50YWdlLgogICAgICAgIHJldHVybiBfd2VpLm11bChUT0tFTlNfUEVSX0VUSCkubXVsKGJvbnVzICsgMTAwKS5kaXYoMTAwKTsKICAgIH0KCi8vCi8vIElDTyBmdW5jdGlvbnMKLy8KCiAgICAvLyBUaGUgZnVuZHJhaXNpbmcgY2FuIGJlIGFib3J0ZWQgYW55IHRpbWUgYmVmb3JlIGZ1bmRzIGFyZSBzd2VwdCB0byB0aGUKICAgIC8vIGZ1bmRXYWxsZXQuCiAgICAvLyBUaGlzIHdpbGwgZm9yY2UgYSBmYWlsIHN0YXRlIGFuZCBhbGxvdyByZWZ1bmRzIHRvIGJlIGNvbGxlY3RlZC4KICAgIGZ1bmN0aW9uIGFib3J0KCkKICAgICAgICBwdWJsaWMKICAgICAgICBub1JlZW50cnkKICAgICAgICBvbmx5T3duZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoIWljb1N1Y2Nlc3NmdWwpOwogICAgICAgIGRlbGV0ZSBfX2Fib3J0RnVzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gR2VuZXJhbCBhZGRyZXNzZXMgY2FuIHB1cmNoYXNlIHRva2VucyBkdXJpbmcgZnVuZGluZwogICAgZnVuY3Rpb24gcHJveHlQdXJjaGFzZShhZGRyZXNzIF9hZGRyKQogICAgICAgIHBheWFibGUKICAgICAgICBub1JlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoIWZ1bmRGYWlsZWQoKSk7CiAgICAgICAgcmVxdWlyZSghaWNvU3VjY2Vzc2Z1bCk7CiAgICAgICAgcmVxdWlyZShub3cgPD0gRU5EX0RBVEUpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CiAgICAgICAgCiAgICAgICAgLy8gTm9uLUtZQydlZCBmdW5kZXJzIGNhbiBvbmx5IGNvbnRyaWJ1dGUgdXAgdG8gJDEwMDAwIGFmdGVyIHByZWZ1bmQgcGVyaW9kCiAgICAgICAgaWYoIWt5Y0FkZHJlc3Nlc1tfYWRkcl0pCiAgICAgICAgewogICAgICAgICAgICByZXF1aXJlKG5vdyA+PSBTVEFSVF9EQVRFKTsKICAgICAgICAgICAgcmVxdWlyZSgoZXRoZXJDb250cmlidXRlZFtfYWRkcl0uYWRkKG1zZy52YWx1ZSkpIDw9IEtZQ19FVEhfTE1UKTsKICAgICAgICB9CgogICAgICAgIC8vIEdldCBldGhlciB0byB0b2tlbiBjb252ZXJzaW9uCiAgICAgICAgdWludCB0b2tlbnMgPSBldGhUb1Rva2Vucyhtc2cudmFsdWUpOwogICAgICAgIAogICAgICAgIC8vIHRyYW5zZmVyIHRva2VucyBmcm9tIGZ1bmQgd2FsbGV0CiAgICAgICAgCiAgICAgICAgeGZlcihmdW5kV2FsbGV0LCBfYWRkciwgdG9rZW5zKTsKICAgICAgICAKICAgICAgICAvLyBVcGRhdGUgaG9sZGVyIHBheW1lbnRzCiAgICAgICAgZXRoZXJDb250cmlidXRlZFtfYWRkcl0gPSBldGhlckNvbnRyaWJ1dGVkW19hZGRyXS5hZGQobXNnLnZhbHVlKTsKICAgICAgICAKICAgICAgICAvLyBVcGRhdGUgZnVuZHMgcmFpc2VkCiAgICAgICAgZXRoZXJSYWlzZWQgPSBldGhlclJhaXNlZC5hZGQobXNnLnZhbHVlKTsKICAgICAgICAKICAgICAgICAvLyBCYWlsIGlmIHRoaXMgcHVzaGVzIHRoZSBmdW5kIG92ZXIgdGhlIFVTRCBjYXAgb3IgVG9rZW4gY2FwCiAgICAgICAgcmVxdWlyZShldGhlclJhaXNlZCA8PSBNQVhfRVRIX0ZVTkQpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gT3duZXIgY2FuIEtZQyAob3IgcmV2b2tlKSBhZGRyZXNzZXMgdW50aWwgY2xvc2Ugb2YgZnVuZGluZwogICAgZnVuY3Rpb24gYWRkS3ljQWRkcmVzcyhhZGRyZXNzIF9hZGRyLCBib29sIF9reWMpCiAgICBwdWJsaWMKICAgICAgICBub1JlZW50cnkKICAgICAgICBvbmx5T3duZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgcmVxdWlyZSghZnVuZEZhaWxlZCgpKTsKCiAgICAgICAga3ljQWRkcmVzc2VzW19hZGRyXSA9IF9reWM7CiAgICAgICAgS1lDQWRkcmVzcyhfYWRkciwgX2t5Yyk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBPd25lciBjYW4gc3dlZXAgYSBzdWNjZXNzZnVsIGZ1bmRpbmcgdG8gdGhlIGZ1bmRXYWxsZXQKICAgIC8vIENvbnRyYWN0IGNhbiBiZSBhYm9ydGVkIHVwIHVudGlsIHRoaXMgYWN0aW9uLgogICAgLy8gRWZmZWN0aXZlIG9uY2UgYnV0IGNhbiBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZSB0byB3aXRoZHJhdyBlZGdlIGNhc2UKICAgIC8vIGZ1bmRzIHJlY2lldmVkIGJ5IGNvbnRyYWN0IHdoaWNoIGNhbiBzZWxmZGVzdHJ1Y3QgdG8gdGhpcyBhZGRyZXNzCiAKICAgIAogICAgZnVuY3Rpb24gZmluYWxpc2VJQ08oKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgICAgIHByZXZlbnRSZWVudHJ5KCkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoZnVuZFN1Y2NlZWRlZCgpKTsKCiAgICAgICAgaWNvU3VjY2Vzc2Z1bCA9IHRydWU7CgogICAgICAgIEZ1bmRzVHJhbnNmZXJyZWQoZnVuZFdhbGxldCwgdGhpcy5iYWxhbmNlKTsKICAgICAgICBmdW5kV2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIFJlZnVuZHMgY2FuIGJlIGNsYWltZWQgZnJvbSBhIGZhaWxlZCBJQ08KICAgIGZ1bmN0aW9uIHJlZnVuZChhZGRyZXNzIF9hZGRyKQogICAgICAgIHB1YmxpYwogICAgICAgIHByZXZlbnRSZWVudHJ5KCkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoZnVuZEZhaWxlZCgpKTsKICAgICAgICAKICAgICAgICB1aW50IHZhbHVlID0gZXRoZXJDb250cmlidXRlZFtfYWRkcl07CgogICAgICAgIC8vIFRyYW5zZmVyIHRva2VucyBiYWNrIHRvIG9yaWdpbgogICAgICAgIC8vIChOb3QgcmVhbGx5IG5lY2Vzc2FyeSBidXQgbG9va2luZyBmb3IgZ3JhY2VmdWwgZXhpdCkKICAgICAgICB4ZmVyKF9hZGRyLCBmdW5kV2FsbGV0LCBiYWxhbmNlc1tfYWRkcl0pOwoKICAgICAgICAvLyBnYXJiYWdlIGNvbGxlY3QKICAgICAgICBkZWxldGUgZXRoZXJDb250cmlidXRlZFtfYWRkcl07CiAgICAgICAgZGVsZXRlIGt5Y0FkZHJlc3Nlc1tfYWRkcl07CiAgICAgICAgCiAgICAgICAgUmVmdW5kZWQoX2FkZHIsIHZhbHVlKTsKICAgICAgICBpZiAodmFsdWUgPiAwKSB7CiAgICAgICAgICAgIF9hZGRyLnRyYW5zZmVyKHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgovLwovLyBFUkMyMCBvdmVybG9hZGVkIGZ1bmN0aW9ucwovLwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgcHJldmVudFJlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIC8vIElDTyBtdXN0IGJlIHN1Y2Nlc3NmdWwKICAgICAgICByZXF1aXJlKGljb1N1Y2Nlc3NmdWwpOwogICAgICAgIHN1cGVyLnRyYW5zZmVyKF90bywgX2Ftb3VudCk7CgogICAgICAgIGlmIChfdG8gPT0gZGVwb3NpdG8pCiAgICAgICAgICAgIC8vIE5vdGlmeSB0aGUgZGVwb3NpdG8gY29udHJhY3QgaXQgaGFzIGJlZW4gc2VudCB0b2tlbnMKICAgICAgICAgICAgcmVxdWlyZShOb3RpZnkoZGVwb3NpdG8pLm5vdGlmeShtc2cuc2VuZGVyLCBfYW1vdW50KSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgcHJldmVudFJlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIC8vIElDTyBtdXN0IGJlIHN1Y2Nlc3NmdWwKICAgICAgICByZXF1aXJlKGljb1N1Y2Nlc3NmdWwpOwogICAgICAgIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfYW1vdW50KTsKCiAgICAgICAgaWYgKF90byA9PSBkZXBvc2l0bykKICAgICAgICAgICAgLy8gTm90aWZ5IHRoZSBkZXBvc2l0byBjb250cmFjdCBpdCBoYXMgYmVlbiBzZW50IHRva2VucwogICAgICAgICAgICByZXF1aXJlKE5vdGlmeShkZXBvc2l0bykubm90aWZ5KG1zZy5zZW5kZXIsIF9hbW91bnQpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICAvLyBJQ08gbXVzdCBiZSBzdWNjZXNzZnVsCiAgICAgICAgcmVxdWlyZShpY29TdWNjZXNzZnVsKTsKICAgICAgICBzdXBlci5hcHByb3ZlKF9zcGVuZGVyLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCi8vCi8vIENvbnRyYWN0IG1hbmFnbWVudCBmdW5jdGlvbnMKLy8KCiAgICAvLyBUbyBpbml0aWF0ZSBhbiBvd25lcnNoaXAgY2hhbmdlCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9uZXdPd25lcikKICAgICAgICBwdWJsaWMKICAgICAgICBub1JlZW50cnkKICAgICAgICBvbmx5T3duZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIENoYW5nZU93bmVyVG8oX25ld093bmVyKTsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBUbyBhY2NlcHQgb3duZXJzaGlwLiBSZXF1aXJlZCB0byBwcm92ZSBuZXcgYWRkcmVzcyBjYW4gY2FsbCB0aGUgY29udHJhY3QuCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG5ld093bmVyKTsKICAgICAgICBDaGFuZ2VkT3duZXIob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIENoYW5nZSB0aGUgYWRkcmVzcyBvZiB0aGUgZGVwb3NpdG8gY29udHJhY3QgYWRkcmVzcy4gVGhlIGNvbnRyYWN0CiAgICAvLyBtdXN0IGltcGxpbWVudCB0aGUgYE5vdGlmeWAgaW50ZXJmYWNlLgogICAgZnVuY3Rpb24gY2hhbmdlZGVwb3NpdG8oYWRkcmVzcyBfYWRkcikKICAgICAgICBwdWJsaWMKICAgICAgICBub1JlZW50cnkKICAgICAgICBvbmx5T3duZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIGRlcG9zaXRvID0gX2FkZHI7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIFRoZSBjb250cmFjdCBjYW4gYmUgc2VsZmRlc3RydWN0ZWQgYWZ0ZXIgYWJvcnQgYW5kIGV0aGVyIGJhbGFuY2UgaXMgMC4KICAgIGZ1bmN0aW9uIGRlc3Ryb3koKQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIG9ubHlPd25lcgogICAgewogICAgICAgIHJlcXVpcmUoIV9fYWJvcnRGdXNlKTsKICAgICAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSA9PSAwKTsKICAgICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgfQogICAgCiAgICAvLyBPd25lciBjYW4gc2FsdmFnZSBBTllUWVBFIEVSQzIwIHRva2VucyB0aGF0IG1heSBoYXZlIGJlZW4gc2VudCB0byB0aGUgYWNjb3VudCBieSBhY2NpZGVudCAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyQW55RVJDMjBUb2tlbihhZGRyZXNzIHRva2VuQWRkcmVzcywgdWludCBhbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICAgICAgcHJldmVudFJlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKSAKICAgIHsKICAgICAgICByZXF1aXJlKEVSQzIwVG9rZW4odG9rZW5BZGRyZXNzKS50cmFuc2Zlcihvd25lciwgYW1vdW50KSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCgppbnRlcmZhY2UgTm90aWZ5CnsKICAgIGV2ZW50IE5vdGlmaWVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgdWludCBpbmRleGVkIF9hbW91bnQpOwogICAgCiAgICBmdW5jdGlvbiBub3RpZnkoYWRkcmVzcyBfZnJvbSwgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7Cn0KCgpjb250cmFjdCBkZXBvc2l0b1Rlc3QgaXMgTm90aWZ5CnsKICAgIGFkZHJlc3MgcHVibGljIGRvdDsKICAgIAogICAgZnVuY3Rpb24gc2V0ZG90KGFkZHJlc3MgX2FkZHIpIHsgZG90ID0gX2FkZHI7IH0KICAgIAogICAgZnVuY3Rpb24gbm90aWZ5KGFkZHJlc3MgX2Zyb20sIHVpbnQgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGRvdCk7CiAgICAgICAgTm90aWZpZWQoX2Zyb20sIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9'.
	

]
