Class {
	#name : #SRT4abc1ebf49ab9d98c83609f6475e6ec75ffe409b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4abc1ebf49ab9d98c83609f6475e6ec75ffe409b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovLyBQcmVzYWxlIFBvb2wgY29udHJhY3QgZm9yIEN1cnJlbnQKLy8gd3JpdHRlbiBieSBAYWltZGVmaW5pdGVseWFodW1hbgoKCmxpYnJhcnkgU2FmZU1hdGggewogICAgCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IEVSQzIwIHsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkge30KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KfQoKY29udHJhY3QgUHJlc2FsZVBvb2wgewoKICAvLyBTYWZlTWF0aCBpcyBhIGxpYnJhcnkgdG8gZW5zdXJlIHRoYXQgbWF0aCBvcGVyYXRpb25zIGRvIG5vdCBoYXZlIG92ZXJmbG93IGVycm9ycwogIC8vIGh0dHBzOi8vemVwcGVsaW4tc29saWRpdHkucmVhZHRoZWRvY3MuaW8vZW4vbGF0ZXN0L3NhZmVtYXRoLmh0bWwKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKICAKICAvLyBUaGUgY29udHJhY3QgaGFzIDMgc3RhZ2VzOgogIC8vIDEgLSBUaGUgaW5pdGlhbCBzdGF0ZS4gQ29udHJpYnV0b3JzIGNhbiBkZXBvc2l0IG9yIHdpdGhkcmF3IGV0aCB0byB0aGUgY29udHJhY3QuCiAgLy8gMiAtIFRoZSBvd25lciBoYXMgY2xvc2VkIHRoZSBjb250cmFjdCBmb3IgZnVydGhlciBkZXBvc2l0cy4gQ29udHJpYnV0aW5nIGFkZHJlc3NlcyBjYW4gc3RpbGwgd2l0aGRyYXcgZXRoIGZyb20gdGhlIGNvbnRyYWN0LgogIC8vIDMgLSBUaGUgZXRoIGlzIHNlbnQgZnJvbSB0aGUgY29udHJhY3QgdG8gdGhlIHJlY2VpdmVyLiBVbnVzZWQgZXRoIGNhbiBiZSBjbGFpbWVkIGJ5IGNvbnRyaWJ1dG9ycyBpbW1lZGlhdGVseS4KICAvLyAgICAgT25jZSB0b2tlbnMgYXJlIHNlbnQgdG8gdGhlIGNvbnRyYWN0LCB0aGUgb3duZXIgZW5hYmxlcyB3aXRoZHJhd2FscyBhbmQgY29udHJpYnV0b3JzIGNhbiB3aXRoZHJhdyB0aGVpciB0b2tlbnMuCiAgdWludDggcHVibGljIGNvbnRyYWN0U3RhZ2UgPSAxOwogIAogIC8vIFRoZXNlIHZhcmlhYmxlcyBhcmUgc2V0IGF0IHRoZSB0aW1lIG9mIGNvbnRyYWN0IGNyZWF0aW9uCiAgLy8gdGhlIGFkZHJlc3MgdGhhdCBjcmVhdGVzIHRoZSBjb250cmFjdAogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIC8vIHRoZSBtaW5pbXVtIGV0aCBhbW91bnQgKGluIHdlaSkgdGhhdCBjYW4gYmUgc2VudCBieSBhIGNvbnRyaWJ1dGluZyBhZGRyZXNzCiAgdWludCBwdWJsaWMgY29udHJpYnV0aW9uTWluID0gMTAwMDAwMDAwMDAwMDAwMDAwOwogIC8vIHRoZSBtYXhpbXVtIGV0aCBhbW91bnQgKGluIHdlaSkgdGhhdCBjYW4gYmUgaGVsZCBieSB0aGUgY29udHJhY3QKICB1aW50IHB1YmxpYyBtYXhDb250cmFjdEJhbGFuY2U7CiAgLy8gdGhlICUgb2YgdG9rZW5zIGtlcHQgYnkgdGhlIGNvbnRyYWN0IG93bmVyCiAgdWludCBwdWJsaWMgZmVlUGN0OwogIC8vIHRoZSBhZGRyZXNzIHRoYXQgdGhlIHBvb2wgd2lsbCBiZSBwYWlkIG91dCB0bwogIGFkZHJlc3MgcHVibGljIHJlY2VpdmVyQWRkcmVzczsKICAKICAvLyBUaGVzZSB2YXJpYWJsZXMgYXJlIGFsbCBpbml0aWFsbHkgYmxhbmsgYW5kIGFyZSBzZXQgYXQgc29tZSBwb2ludCBkdXJpbmcgdGhlIGNvbnRyYWN0CiAgLy8gdGhlIGFtb3VudCBvZiBldGggKGluIHdlaSkgcHJlc2VudCBpbiB0aGUgY29udHJhY3Qgd2hlbiBpdCB3YXMgc3VibWl0dGVkCiAgdWludCBwdWJsaWMgZmluYWxCYWxhbmNlOwogIC8vIGFuIGFycmF5IGNvbnRhaW5pbmcgZXRoIGFtb3VudHMgdG8gYmUgcmVmdW5kZWQgaW4gc3RhZ2UgMwogIHVpbnRbXSBwdWJsaWMgZXRoUmVmdW5kQW1vdW50OwogIC8vIHRoZSBkZWZhdWx0IHRva2VuIGNvbnRyYWN0IHRvIGJlIHVzZWQgZm9yIHdpdGhkcmF3aW5nIHRva2VucyBpbiBzdGFnZSAzCiAgYWRkcmVzcyBwdWJsaWMgYWN0aXZlVG9rZW47CiAgCiAgLy8gYSBkYXRhIHN0cnVjdHVyZSBmb3IgaG9sZGluZyB0aGUgY29udHJpYnV0aW9uIGFtb3VudCwgZXRoIHJlZnVuZCBzdGF0dXMsIGFuZCB0b2tlbiB3aXRoZHJhd2FsIHN0YXR1cyBmb3IgZWFjaCBhZGRyZXNzCiAgc3RydWN0IENvbnRyaWJ1dG9yIHsKICAgIHVpbnQgZXRoUmVmdW5kOwogICAgdWludCBiYWxhbmNlOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSB0b2tlbnNDbGFpbWVkOwogIH0KICAvLyBhIG1hcHBpbmcgdGhhdCBob2xkcyB0aGUgY29udHJpYnV0b3Igc3RydWN0IGZvciBlYWNoIGFkZHJlc3MKICBtYXBwaW5nIChhZGRyZXNzID0+IENvbnRyaWJ1dG9yKSBjb250cmlidXRvck1hcDsKICAKICAvLyBhIGRhdGEgc3RydWN0dXJlIGZvciBob2xkaW5nIGluZm9ybWF0aW9uIHJlbGF0ZWQgdG8gdG9rZW4gd2l0aGRyYXdhbHMuCiAgc3RydWN0IFRva2VuQWxsb2NhdGlvbiB7CiAgICBFUkMyMCB0b2tlbjsKICAgIHVpbnRbXSBwY3Q7CiAgICB1aW50IGJhbGFuY2VSZW1haW5pbmc7CiAgfQogIC8vIGEgbWFwcGluZyB0aGF0IGhvbGRzIHRoZSB0b2tlbiBhbGxvY2F0aW9uIHN0cnVjdCBmb3IgZWFjaCB0b2tlbiBhZGRyZXNzCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBUb2tlbkFsbG9jYXRpb24pIGRpc3RyaWJ1dGlvbk1hcDsKICAKICAKICAvLyB0aGlzIG1vZGlmaWVyIGlzIHVzZWQgZm9yIGZ1bmN0aW9ucyB0aGF0IGNhbiBvbmx5IGJlIGFjY2Vzc2VkIGJ5IHRoZSBjb250cmFjdCBjcmVhdG9yCiAgbW9kaWZpZXIgb25seU93bmVyICgpIHsKICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CiAgCiAgLy8gdGhpcyBtb2RpZmllciBpcyB1c2VkIHRvIHByZXZlbnQgcmUtZW50cmFuY3kgZXhwbG9pdHMgZHVyaW5nIGNvbnRyYWN0ID4gY29udHJhY3QgaW50ZXJhY3Rpb24KICBib29sIGxvY2tlZDsKICBtb2RpZmllciBub1JlZW50cmFuY3koKSB7CiAgICByZXF1aXJlICghbG9ja2VkKTsKICAgIGxvY2tlZCA9IHRydWU7CiAgICBfOwogICAgbG9ja2VkID0gZmFsc2U7CiAgfQogIAogIC8vIEV2ZW50cyB0cmlnZ2VyZWQgdGhyb3VnaG91dCBjb250cmFjdCBleGVjdXRpb24KICAvLyBUaGVzZSBjYW4gYmUgd2F0Y2hlZCB2aWEgZ2V0aCBmaWx0ZXJzIHRvIGtlZXAgdXAtdG8tZGF0ZSB3aXRoIHRoZSBjb250cmFjdAogIGV2ZW50IENvbnRyaWJ1dG9yQmFsYW5jZUNoYW5nZWQgKGFkZHJlc3MgY29udHJpYnV0b3IsIHVpbnQgdG90YWxCYWxhbmNlKTsKICBldmVudCBQb29sU3VibWl0dGVkIChhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCk7CiAgZXZlbnQgV2l0aGRyYXdhbHNPcGVuIChhZGRyZXNzIHRva2VuQWRkcik7CiAgZXZlbnQgVG9rZW5zV2l0aGRyYXduIChhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCk7CiAgZXZlbnQgRXRoUmVmdW5kUmVjZWl2ZWQgKGFkZHJlc3Mgc2VuZGVyLCB1aW50IGFtb3VudCk7CiAgZXZlbnQgRXRoUmVmdW5kZWQgKGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgYW1vdW50KTsKICBldmVudCBFUkMyMjNSZWNlaXZlZCAoYWRkcmVzcyB0b2tlbiwgdWludCB2YWx1ZSk7CiAgIAogIC8vIFRoZXNlIGFyZSBpbnRlcm5hbCBmdW5jdGlvbnMgdXNlZCBmb3IgY2FsY3VsYXRpbmcgZmVlcywgZXRoIGFuZCB0b2tlbiBhbGxvY2F0aW9ucyBhcyAlCiAgLy8gcmV0dXJucyBhIHZhbHVlIGFzIGEgJSBhY2N1cmF0ZSB0byAyMCBkZWNpbWFsIHBvaW50cwogIGZ1bmN0aW9uIF90b1BjdCAodWludCBudW1lcmF0b3IsIHVpbnQgZGVub21pbmF0b3IgKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiBudW1lcmF0b3IubXVsKDEwICoqIDIwKSAvIGRlbm9taW5hdG9yOwogIH0KICAKICAvLyByZXR1cm5zICUgb2YgYW55IG51bWJlciwgd2hlcmUgJSBnaXZlbiB3YXMgZ2VuZXJhdGVkIHdpdGggdG9QY3QKICBmdW5jdGlvbiBfYXBwbHlQY3QgKHVpbnQgbnVtZXJhdG9yLCB1aW50IHBjdCkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gbnVtZXJhdG9yLm11bChwY3QpIC8gKDEwICoqIDIwKTsKICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYXQgdGhlIHRpbWUgb2YgY29udHJhY3QgY3JlYXRpb24sCiAgLy8gaXQgc2V0cyB0aGUgaW5pdGlhbCB2YXJpYWJsZXMgYW5kIHRoZSBjb250cmFjdCBvd25lci4KICBmdW5jdGlvbiBQcmVzYWxlUG9vbChhZGRyZXNzIHJlY2VpdmVyQWRkciwgdWludCBjb250cmFjdE1heEluV2VpLCB1aW50IGZlZSkgcHVibGljIHsKICAgIHJlcXVpcmUgKGZlZSA8IDEwMCk7CiAgICByZXF1aXJlIChyZWNlaXZlckFkZHIgIT0gMHgwMCk7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICByZWNlaXZlckFkZHJlc3MgPSByZWNlaXZlckFkZHI7CiAgICBtYXhDb250cmFjdEJhbGFuY2UgPSBjb250cmFjdE1heEluV2VpOwogICAgZmVlUGN0ID0gX3RvUGN0KGZlZSwxMDApOwogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuZXZlciBldGggaXMgc2VudCBpbnRvIHRoZSBjb250cmFjdC4KICAvLyBUaGUgYW1vdW50IHNlbnQgaXMgYWRkZWQgdG8gdGhlIGJhbGFuY2UgaW4gdGhlIENvbnRyaWJ1dG9yIHN0cnVjdCBhc3NvY2lhdGVkIHdpdGggdGhlIHNlbmRpbmcgYWRkcmVzcy4KICBmdW5jdGlvbiAoKSBwYXlhYmxlIHB1YmxpYyB7CiAgICBpZiAoY29udHJhY3RTdGFnZSA9PSAxKSB7CiAgICAgIF9ldGhEZXBvc2l0KCk7CiAgICB9IGVsc2UgaWYgKGNvbnRyYWN0U3RhZ2UgPT0gMykgewogICAgICBfZXRoUmVmdW5kKCk7CiAgICB9IGVsc2UgcmV2ZXJ0KCk7CiAgfQogIAogIC8vIEludGVybmFsIGZ1bmN0aW9uIGZvciBoYW5kbGluZyBldGggZGVwb3NpdHMgZHVyaW5nIGNvbnRyYWN0IHN0YWdlIG9uZS4KICBmdW5jdGlvbiBfZXRoRGVwb3NpdCAoKSBpbnRlcm5hbCB7CiAgICBhc3NlcnQgKGNvbnRyYWN0U3RhZ2UgPT0gMSk7ICAKICAgIHVpbnQgc2l6ZTsKICAgIGFkZHJlc3MgYWRkciA9IG1zZy5zZW5kZXI7CiAgICBhc3NlbWJseSB7IHNpemUgOj0gZXh0Y29kZXNpemUoYWRkcikgfQogICAgcmVxdWlyZSAoc2l6ZSA9PSAwKTsKICAgIHJlcXVpcmUgKHRoaXMuYmFsYW5jZSA8PSBtYXhDb250cmFjdEJhbGFuY2UpOwogICAgdmFyIGMgPSBjb250cmlidXRvck1hcFttc2cuc2VuZGVyXTsKICAgIHVpbnQgbmV3QmFsYW5jZSA9IGMuYmFsYW5jZS5hZGQobXNnLnZhbHVlKTsKICAgIHJlcXVpcmUgKG5ld0JhbGFuY2UgPj0gY29udHJpYnV0aW9uTWluKTsKICAgIGMuYmFsYW5jZSA9IG5ld0JhbGFuY2U7CiAgICBDb250cmlidXRvckJhbGFuY2VDaGFuZ2VkKG1zZy5zZW5kZXIsIG5ld0JhbGFuY2UpOwogIH0KICAKICAvLyBJbnRlcm5hbCBmdW5jdGlvbiBmb3IgaGFuZGxpbmcgZXRoIHJlZnVuZHMgZHVyaW5nIHN0YWdlIHRocmVlLgogIGZ1bmN0aW9uIF9ldGhSZWZ1bmQgKCkgaW50ZXJuYWwgewogICAgYXNzZXJ0IChjb250cmFjdFN0YWdlID09IDMpOwogICAgcmVxdWlyZSAobXNnLnNlbmRlciA9PSBvd25lciB8fCBtc2cuc2VuZGVyID09IHJlY2VpdmVyQWRkcmVzcyk7CiAgICByZXF1aXJlIChtc2cudmFsdWUgPj0gY29udHJpYnV0aW9uTWluKTsKICAgIGV0aFJlZnVuZEFtb3VudC5wdXNoKG1zZy52YWx1ZSk7CiAgICBFdGhSZWZ1bmRSZWNlaXZlZChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB0byB3aXRoZHJhdyBldGggb3IgdG9rZW5zIGZyb20gdGhlIGNvbnRyYWN0LiBJdCBjYW4gb25seSBiZSBjYWxsZWQgYnkgYWRkcmVzc2VzIHRoYXQgc2hvdyBhIGJhbGFuY2UgZ3JlYXRlciB0aGFuIDAuCiAgLy8gSWYgY2FsbGVkIGR1cmluZyBzdGFnZXMgb25lIG9yIHR3bywgdGhlIGZ1bGwgZXRoIGJhbGFuY2UgZGVwb3NpdGVkIGludG8gdGhlIGNvbnRyYWN0IGlzIHJldHVybmVkIGFuZCB0aGUgY29udHJpYnV0b3IncyBiYWxhbmNlIHJlc2V0IHRvIDAuCiAgLy8gSWYgY2FsbGVkIGR1cmluZyBzdGFnZSB0aHJlZSwgdGhlIGNvbnRyaWJ1dG9yJ3MgdW51c2VkIGV0aCB3aWxsIGJlIHJldHVybmVkLCBhcyB3ZWxsIGFzIGFueSBhdmFpbGFibGUgdG9rZW5zLgogIC8vIFRoZSB0b2tlbiBhZGRyZXNzIG1heSBiZSBwcm92aWRlZCBvcHRpb25hbGx5IHRvIHdpdGhkcmF3IHRva2VucyB0aGF0IGFyZSBub3QgY3VycmVudGx5IHRoZSBkZWZhdWx0IHRva2VuIChhaXJkcm9wcykuCiAgZnVuY3Rpb24gd2l0aGRyYXcgKGFkZHJlc3MgdG9rZW5BZGRyKSBwdWJsaWMgewogICAgdmFyIGMgPSBjb250cmlidXRvck1hcFttc2cuc2VuZGVyXTsKICAgIHJlcXVpcmUgKGMuYmFsYW5jZSA+IDApOwogICAgaWYgKGNvbnRyYWN0U3RhZ2UgPCAzKSB7CiAgICAgIHVpbnQgYW1vdW50VG9UcmFuc2ZlciA9IGMuYmFsYW5jZTsKICAgICAgYy5iYWxhbmNlID0gMDsKICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnRUb1RyYW5zZmVyKTsKICAgICAgQ29udHJpYnV0b3JCYWxhbmNlQ2hhbmdlZChtc2cuc2VuZGVyLCAwKTsKICAgIH0gZWxzZSB7CiAgICAgIF93aXRoZHJhdyhtc2cuc2VuZGVyLCB0b2tlbkFkZHIpOwogICAgfSAgCiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gYWxsb3dzIHRoZSBjb250cmFjdCBvd25lciB0byBmb3JjZSBhIHdpdGhkcmF3YWwgdG8gYW55IGNvbnRyaWJ1dG9yLgogIGZ1bmN0aW9uIHdpdGhkcmF3Rm9yIChhZGRyZXNzIGNvbnRyaWJ1dG9yLCBhZGRyZXNzIHRva2VuQWRkcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlID09IDMpOwogICAgcmVxdWlyZSAoY29udHJpYnV0b3JNYXBbY29udHJpYnV0b3JdLmJhbGFuY2UgPiAwKTsKICAgIF93aXRoZHJhdyhjb250cmlidXRvciwgdG9rZW5BZGRyKTsKICB9CiAgCiAgLy8gVGhpcyBpbnRlcm5hbCBmdW5jdGlvbiBoYW5kbGVzIHdpdGhkcmF3YWxzIGR1cmluZyBzdGFnZSB0aHJlZS4KICAvLyBUaGUgYXNzb2NpYXRlZCBldmVudHMgd2lsbCBmaXJlIHRvIG5vdGlmeSB3aGVuIGEgcmVmdW5kIG9yIHRva2VuIGFsbG9jYXRpb24gaXMgY2xhaW1lZC4KICBmdW5jdGlvbiBfd2l0aGRyYXcgKGFkZHJlc3MgcmVjZWl2ZXIsIGFkZHJlc3MgdG9rZW5BZGRyKSBpbnRlcm5hbCB7CiAgICBhc3NlcnQgKGNvbnRyYWN0U3RhZ2UgPT0gMyk7CiAgICB2YXIgYyA9IGNvbnRyaWJ1dG9yTWFwW3JlY2VpdmVyXTsKICAgIGlmICh0b2tlbkFkZHIgPT0gMHgwMCkgewogICAgICB0b2tlbkFkZHIgPSBhY3RpdmVUb2tlbjsKICAgIH0KICAgIHZhciBkID0gZGlzdHJpYnV0aW9uTWFwW3Rva2VuQWRkcl07CiAgICByZXF1aXJlICggZXRoUmVmdW5kQW1vdW50Lmxlbmd0aCA+IGMuZXRoUmVmdW5kIHx8IGQucGN0Lmxlbmd0aCA+IGMudG9rZW5zQ2xhaW1lZFt0b2tlbkFkZHJdICk7CiAgICBpZiAoZXRoUmVmdW5kQW1vdW50Lmxlbmd0aCA+IGMuZXRoUmVmdW5kKSB7CiAgICAgIHVpbnQgcGN0ID0gX3RvUGN0KGMuYmFsYW5jZSwgZmluYWxCYWxhbmNlKTsKICAgICAgdWludCBldGhBbW91bnQgPSAwOwogICAgICBmb3IgKHVpbnQgaSA9IGMuZXRoUmVmdW5kOyBpIDwgZXRoUmVmdW5kQW1vdW50Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZXRoQW1vdW50ID0gZXRoQW1vdW50LmFkZChfYXBwbHlQY3QoZXRoUmVmdW5kQW1vdW50W2ldLCBwY3QpKTsKICAgICAgfQogICAgICBjLmV0aFJlZnVuZCA9IGV0aFJlZnVuZEFtb3VudC5sZW5ndGg7CiAgICAgIGlmIChldGhBbW91bnQgPiAwKSB7CiAgICAgICAgcmVjZWl2ZXIudHJhbnNmZXIoZXRoQW1vdW50KTsKICAgICAgICBFdGhSZWZ1bmRlZChyZWNlaXZlciwgZXRoQW1vdW50KTsKICAgICAgfQogICAgfQogICAgaWYgKGQucGN0Lmxlbmd0aCA+IGMudG9rZW5zQ2xhaW1lZFt0b2tlbkFkZHJdKSB7CiAgICAgIHVpbnQgdG9rZW5BbW91bnQgPSAwOwogICAgICBmb3IgKGkgPSBjLnRva2Vuc0NsYWltZWRbdG9rZW5BZGRyXTsgaSA8IGQucGN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdG9rZW5BbW91bnQgPSB0b2tlbkFtb3VudC5hZGQoX2FwcGx5UGN0KGMuYmFsYW5jZSwgZC5wY3RbaV0pKTsKICAgICAgfQogICAgICBjLnRva2Vuc0NsYWltZWRbdG9rZW5BZGRyXSA9IGQucGN0Lmxlbmd0aDsKICAgICAgaWYgKHRva2VuQW1vdW50ID4gMCkgewogICAgICAgIHJlcXVpcmUgKGQudG9rZW4udHJhbnNmZXIocmVjZWl2ZXIsIHRva2VuQW1vdW50KSk7CiAgICAgICAgZC5iYWxhbmNlUmVtYWluaW5nID0gZC5iYWxhbmNlUmVtYWluaW5nLnN1Yih0b2tlbkFtb3VudCk7CiAgICAgICAgVG9rZW5zV2l0aGRyYXduKHJlY2VpdmVyLCB0b2tlbkFtb3VudCk7CiAgICAgIH0gIAogICAgfQogICAgCiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBkdXJpbmcgc3RhZ2VzIG9uZSBvciB0d28gdG8gbW9kaWZ5IHRoZSBtYXhpbXVtIGJhbGFuY2Ugb2YgdGhlIGNvbnRyYWN0LgogIC8vIEl0IGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXIuIFRoZSBhbW91bnQgY2Fubm90IGJlIHNldCB0byBsb3dlciB0aGFuIHRoZSBjdXJyZW50IGJhbGFuY2Ugb2YgdGhlIGNvbnRyYWN0LgogIGZ1bmN0aW9uIG1vZGlmeU1heENvbnRyYWN0QmFsYW5jZSAodWludCBhbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZSAoY29udHJhY3RTdGFnZSA8IDMpOwogICAgcmVxdWlyZSAoYW1vdW50ID49IGNvbnRyaWJ1dGlvbk1pbik7CiAgICByZXF1aXJlIChhbW91bnQgPj0gdGhpcy5iYWxhbmNlKTsKICAgIG1heENvbnRyYWN0QmFsYW5jZSA9IGFtb3VudDsKICB9CiAgCiAgLy8gVGhpcyBjYWxsYWJsZSBmdW5jdGlvbiByZXR1cm5zIHRoZSB0b3RhbCBwb29sIGNhcCwgY3VycmVudCBiYWxhbmNlIGFuZCByZW1haW5pbmcgYmFsYW5jZSB0byBiZSBmaWxsZWQuCiAgZnVuY3Rpb24gY2hlY2tQb29sQmFsYW5jZSAoKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50IHBvb2xDYXAsIHVpbnQgYmFsYW5jZSwgdWludCByZW1haW5pbmcpIHsKICAgIGlmIChjb250cmFjdFN0YWdlID09IDEpIHsKICAgICAgcmVtYWluaW5nID0gbWF4Q29udHJhY3RCYWxhbmNlLnN1Yih0aGlzLmJhbGFuY2UpOwogICAgfSBlbHNlIHsKICAgICAgcmVtYWluaW5nID0gMDsKICAgIH0KICAgIHJldHVybiAobWF4Q29udHJhY3RCYWxhbmNlLHRoaXMuYmFsYW5jZSxyZW1haW5pbmcpOwogIH0KICAKICAvLyBUaGlzIGNhbGxhYmxlIGZ1bmN0aW9uIHJldHVybnMgdGhlIGJhbGFuY2UsIGNvbnRyaWJ1dGlvbiBjYXAsIGFuZCByZW1haW5pbmcgYXZhaWxhYmxlIGJhbGFuY2Ugb2YgYW55IGNvbnRyaWJ1dG9yLgogIGZ1bmN0aW9uIGNoZWNrQ29udHJpYnV0b3JCYWxhbmNlIChhZGRyZXNzIGFkZHIpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQgYmFsYW5jZSwgdWludCBjYXAsIHVpbnQgcmVtYWluaW5nKSB7CiAgICB2YXIgYyA9IGNvbnRyaWJ1dG9yTWFwW2FkZHJdOwogICAgaWYgKGNvbnRyYWN0U3RhZ2UgPT0gMSkgewogICAgICByZW1haW5pbmcgPSBtYXhDb250cmFjdEJhbGFuY2Uuc3ViKHRoaXMuYmFsYW5jZSk7CiAgICB9IGVsc2UgewogICAgICByZW1haW5pbmcgPSAwOwogICAgfQogICAgcmV0dXJuIChjLmJhbGFuY2UsIG1heENvbnRyYWN0QmFsYW5jZSwgcmVtYWluaW5nKTsKICB9CiAgCiAgLy8gVGhpcyBjYWxsYWJsZSBmdW5jdGlvbiByZXR1cm5zIHRoZSB0b2tlbiBiYWxhbmNlIHRoYXQgYSBjb250cmlidXRvciBjYW4gY3VycmVudGx5IGNsYWltLgogIGZ1bmN0aW9uIGNoZWNrQXZhaWxhYmxlVG9rZW5zIChhZGRyZXNzIGFkZHIsIGFkZHJlc3MgdG9rZW5BZGRyKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50IHRva2VuQW1vdW50KSB7CiAgICB2YXIgYyA9IGNvbnRyaWJ1dG9yTWFwW2FkZHJdOwogICAgdmFyIGQgPSBkaXN0cmlidXRpb25NYXBbdG9rZW5BZGRyXTsKICAgIGZvciAodWludCBpID0gYy50b2tlbnNDbGFpbWVkW3Rva2VuQWRkcl07IGkgPCBkLnBjdC5sZW5ndGg7IGkrKykgewogICAgICB0b2tlbkFtb3VudCA9IHRva2VuQW1vdW50LmFkZChfYXBwbHlQY3QoYy5iYWxhbmNlLCBkLnBjdFtpXSkpOwogICAgfQogICAgcmV0dXJuIHRva2VuQW1vdW50OwogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIGNsb3NlcyBmdXJ0aGVyIGNvbnRyaWJ1dGlvbnMgdG8gdGhlIGNvbnRyYWN0LCBhZHZhbmNpbmcgaXQgdG8gc3RhZ2UgdHdvLgogIC8vIEl0IGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXIuICBBZnRlciB0aGlzIGNhbGwgaGFzIGJlZW4gbWFkZSwgY29udHJpYnV0aW5nIGFkZHJlc3NlcwogIC8vIGNhbiBzdGlsbCByZW1vdmUgdGhlaXIgZXRoIGZyb20gdGhlIGNvbnRyYWN0IGJ1dCBjYW5ub3QgY29udHJpYnV0ZSBhbnkgbW9yZS4KICBmdW5jdGlvbiBjbG9zZUNvbnRyaWJ1dGlvbnMgKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlID09IDEpOwogICAgY29udHJhY3RTdGFnZSA9IDI7CiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gcmVvcGVucyB0aGUgY29udHJhY3QgdG8gY29udHJpYnV0aW9ucywgcmV0dXJuaW5nIGl0IHRvIHN0YWdlIG9uZS4KICAvLyBJdCBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIG93bmVyIGR1cmluZyBzdGFnZSB0d28uCiAgZnVuY3Rpb24gcmVvcGVuQ29udHJpYnV0aW9ucyAoKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUgKGNvbnRyYWN0U3RhZ2UgPT0gMik7CiAgICBjb250cmFjdFN0YWdlID0gMTsKICB9CgogIC8vIFRoaXMgZnVuY3Rpb24gc2VuZHMgdGhlIHBvb2xlZCBldGggdG8gdGhlIHJlY2VpdmluZyBhZGRyZXNzLCBjYWxjdWxhdGVzIHRoZSAlIG9mIHVudXNlZCBldGggdG8gYmUgcmV0dXJuZWQsCiAgLy8gYW5kIGFkdmFuY2VzIHRoZSBjb250cmFjdCB0byBzdGFnZSB0aHJlZS4gSXQgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBjb250cmFjdCBvd25lciBkdXJpbmcgc3RhZ2VzIG9uZSBvciB0d28uCiAgLy8gVGhlIGFtb3VudCB0byBzZW5kIChnaXZlbiBpbiB3ZWkpIG11c3QgYmUgc3BlY2lmaWVkIGR1cmluZyB0aGUgY2FsbC4gQXMgdGhpcyBmdW5jdGlvbiBjYW4gb25seSBiZSBleGVjdXRlZCBvbmNlLAogIC8vIGl0IGlzIFZFUlkgSU1QT1JUQU5UIG5vdCB0byBnZXQgdGhlIGFtb3VudCB3cm9uZy4KICBmdW5jdGlvbiBzdWJtaXRQb29sICh1aW50IGFtb3VudEluV2VpKSBwdWJsaWMgb25seU93bmVyIG5vUmVlbnRyYW5jeSB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlIDwgMyk7CiAgICByZXF1aXJlIChjb250cmlidXRpb25NaW4gPD0gYW1vdW50SW5XZWkgJiYgYW1vdW50SW5XZWkgPD0gdGhpcy5iYWxhbmNlKTsKICAgIGZpbmFsQmFsYW5jZSA9IHRoaXMuYmFsYW5jZTsKICAgIHJlcXVpcmUgKHJlY2VpdmVyQWRkcmVzcy5jYWxsLnZhbHVlKGFtb3VudEluV2VpKS5nYXMobXNnLmdhcy5zdWIoNTAwMCkpKCkpOwogICAgZXRoUmVmdW5kQW1vdW50LnB1c2godGhpcy5iYWxhbmNlKTsKICAgIGNvbnRyYWN0U3RhZ2UgPSAzOwogICAgUG9vbFN1Ym1pdHRlZChyZWNlaXZlckFkZHJlc3MsIGFtb3VudEluV2VpKTsKICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiBvcGVucyB0aGUgY29udHJhY3QgdXAgZm9yIHRva2VuIHdpdGhkcmF3YWxzLgogIC8vIEl0IGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXIgZHVyaW5nIHN0YWdlIDMuICBUaGUgb3duZXIgc3BlY2lmaWVzIHRoZSBhZGRyZXNzIG9mIGFuIEVSQzIwIHRva2VuCiAgLy8gY29udHJhY3QgdGhhdCB0aGlzIGNvbnRyYWN0IGhhcyBhIGJhbGFuY2UgaW4sIGFuZCBvcHRpb25hbGx5IGEgYm9vbCB0byBwcmV2ZW50IHRoaXMgdG9rZW4gZnJvbSBiZWluZwogIC8vIHRoZSBkZWZhdWx0IHdpdGhkcmF3YWwgKGluIHRoZSBldmVudCBvZiBhbiBhaXJkcm9wLCBmb3IgZXhhbXBsZSkuCiAgZnVuY3Rpb24gZW5hYmxlVG9rZW5XaXRoZHJhd2FscyAoYWRkcmVzcyB0b2tlbkFkZHIsIGJvb2wgbm90RGVmYXVsdCkgcHVibGljIG9ubHlPd25lciBub1JlZW50cmFuY3kgewogICAgcmVxdWlyZSAoY29udHJhY3RTdGFnZSA9PSAzKTsKICAgIGlmIChub3REZWZhdWx0KSB7CiAgICAgIHJlcXVpcmUgKGFjdGl2ZVRva2VuICE9IDB4MDApOwogICAgfSBlbHNlIHsKICAgICAgYWN0aXZlVG9rZW4gPSB0b2tlbkFkZHI7CiAgICB9CiAgICB2YXIgZCA9IGRpc3RyaWJ1dGlvbk1hcFt0b2tlbkFkZHJdOyAgICAKICAgIGlmIChkLnBjdC5sZW5ndGggPT0gMCkgZC50b2tlbiA9IEVSQzIwKHRva2VuQWRkcik7CiAgICB1aW50IGFtb3VudCA9IGQudG9rZW4uYmFsYW5jZU9mKHRoaXMpLnN1YihkLmJhbGFuY2VSZW1haW5pbmcpOwogICAgcmVxdWlyZSAoYW1vdW50ID4gMCk7CiAgICBpZiAoZmVlUGN0ID4gMCkgewogICAgICByZXF1aXJlIChkLnRva2VuLnRyYW5zZmVyKG93bmVyLF9hcHBseVBjdChhbW91bnQsIGZlZVBjdCkpKTsKICAgIH0KICAgIGFtb3VudCA9IGQudG9rZW4uYmFsYW5jZU9mKHRoaXMpLnN1YihkLmJhbGFuY2VSZW1haW5pbmcpOwogICAgZC5iYWxhbmNlUmVtYWluaW5nID0gZC50b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICBkLnBjdC5wdXNoKF90b1BjdChhbW91bnQsIGZpbmFsQmFsYW5jZSkpOwogICAgV2l0aGRyYXdhbHNPcGVuKHRva2VuQWRkcik7CiAgfQogIAogIC8vIFRoaXMgaXMgYSBzdGFuZGFyZCBmdW5jdGlvbiByZXF1aXJlZCBmb3IgRVJDMjIzIGNvbXBhdGliaWxpdHkuCiAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayAoYWRkcmVzcyBmcm9tLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSBwdWJsaWMgewogICAgRVJDMjIzUmVjZWl2ZWQoZnJvbSwgdmFsdWUpOwogIH0KICAKfQ=='.
	

]
