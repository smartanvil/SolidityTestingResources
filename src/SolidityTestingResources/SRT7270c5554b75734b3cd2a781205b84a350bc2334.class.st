Class {
	#name : #SRT7270c5554b75734b3cd2a781205b84a350bc2334,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7270c5554b75734b3cd2a781205b84a350bc2334 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBGaWxlOiBjb250cmFjdHMvQ29yZS9NYW5hZ2VhYmxlLnNvbAoKY29udHJhY3QgTWFuYWdlYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgbWFuYWdlcjsKCgogIC8qKgogICAqIEBkZXYgQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBNYW5hZ2VhYmxlIGNvbnRyYWN0LgogICAqIEBwYXJhbSBfbWFuYWdlciBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gTWFuYWdlYWJsZShhZGRyZXNzIF9tYW5hZ2VyKSBwdWJsaWMgewogICAgcmVxdWlyZShfbWFuYWdlciAhPSAweDApOwogICAgbWFuYWdlciA9IF9tYW5hZ2VyOwogIH0KCiAgLyoqCiAgICogQGRldiBDaGVja3MgaWYgdGhlIG1zZy5zZW5kZXIgaXMgdGhlIG1hbmFnZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU1hbmFnZXIoKSB7IAogICAgcmVxdWlyZSAobXNnLnNlbmRlciA9PSBtYW5hZ2VyICYmIG1hbmFnZXIgIT0gMHgwKTsKICAgIF87IAogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL0NvcmUvQWN0aXZhdGFibGUuc29sCgpjb250cmFjdCBBY3RpdmF0YWJsZSBpcyBNYW5hZ2VhYmxlIHsKICBldmVudCBBY3RpdmF0ZWRDb250cmFjdCh1aW50MjU2IGFjdGl2YXRlZEF0KTsKICBldmVudCBEZWFjdGl2YXRlZENvbnRyYWN0KHVpbnQyNTYgZGVhY3RpdmF0ZWRBdCk7CgogIGJvb2wgcHVibGljIGFjdGl2ZTsKICAKICAvKioKICAgKiBAZGV2IENoZWNrIGlmIHRoZSBjb250cmFjdCBpcyBhY3RpdmUuIAogICAqLwogIG1vZGlmaWVyIGlzQWN0aXZlKCkgewogICAgcmVxdWlyZShhY3RpdmUpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQ2hlY2sgaWYgdGhlIGNvbnRyYWN0IGlzIG5vdCBhY3RpdmUuIAogICAqLwogIG1vZGlmaWVyIGlzTm90QWN0aXZlKCkgewogICAgcmVxdWlyZSghYWN0aXZlKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFjdGl2YXRlIHRoZSBjb250cmFjdC4KICAgKi8KICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHB1YmxpYyBvbmx5TWFuYWdlciBpc05vdEFjdGl2ZSB7CiAgICAvLyBTZXQgdGhlIGZsYWcgdG8gdHJ1ZS4KICAgIGFjdGl2ZSA9IHRydWU7CgogICAgLy8gVHJpZ2dlciBldmVudC4KICAgIEFjdGl2YXRlZENvbnRyYWN0KG5vdyk7CiAgfQoKICAvKioKICAgKiBAZGV2IERlYWN0aWF0ZSB0aGUgY29udHJhY3QuCiAgICovCiAgZnVuY3Rpb24gZGVhY3RpdmF0ZSgpIHB1YmxpYyBvbmx5TWFuYWdlciBpc0FjdGl2ZSB7CiAgICAvLyBTZXQgdGhlIGZsYWcgdG8gZmFsc2UuCiAgICBhY3RpdmUgPSBmYWxzZTsKCiAgICAvLyBUcmlnZ2VyIGV2ZW50LgogICAgRGVhY3RpdmF0ZWRDb250cmFjdChub3cpOwogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL0NvcmUvVmVyc2lvbmFibGUuc29sCgpjb250cmFjdCBWZXJzaW9uYWJsZSBpcyBBY3RpdmF0YWJsZSB7CiAgc3RyaW5nIHB1YmxpYyBuYW1lOwogIHN0cmluZyBwdWJsaWMgdmVyc2lvbjsKICB1aW50MjU2IHB1YmxpYyBpZGVudGlmaWVyOwogIHVpbnQyNTYgcHVibGljIGNyZWF0ZWRBdDsKCiAgLyoqCiAgICogQGRldiBDcmVhdGUgYSBuZXcgaW50YW5jZSBvZiBhIFZlcnNpb25hYmxlIGNvbnRyYWN0LiBTZXRzIHRoZQogICAqICAgICAgY3JlYXRlZEF0IHVuaXggdGltZXN0YW1wIHRvIGN1cnJlbnQgYmxvY2sgdGltZXN0YW1wLgogICAqLwogIGZ1bmN0aW9uIFZlcnNpb25hYmxlIChzdHJpbmcgX25hbWUsIHN0cmluZyBfdmVyc2lvbiwgdWludDI1NiBfaWRlbnRpZmllcikgcHVibGljIHsKICAgIHJlcXVpcmUgKGJ5dGVzKF9uYW1lKS5sZW5ndGggIT0gMHgwICYmIGJ5dGVzKF92ZXJzaW9uKS5sZW5ndGggIT0gMHgwICYmIF9pZGVudGlmaWVyID4gMCk7CgogICAgLy8gU2V0IHZhcmlhYmxlcy4KICAgIG5hbWUgPSBfbmFtZTsKICAgIHZlcnNpb24gPSBfdmVyc2lvbjsKICAgIGlkZW50aWZpZXIgPSBfaWRlbnRpZmllcjsKICAgIGNyZWF0ZWRBdCA9IG5vdzsKICB9Cn0KCi8vIEZpbGU6IHplcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy9vd25lcnNoaXAvT3duYWJsZS5zb2wKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9NYW5hZ2VtZW50L0NvbnRyYWN0TWFuYWdlbWVudFN5c3RlbS5zb2wKCmNvbnRyYWN0IENvbnRyYWN0TWFuYWdlbWVudFN5c3RlbSBpcyBPd25hYmxlIHsKICBldmVudCBVcGdyYWRlZENvbnRyYWN0ICh1aW50MjU2IGNvbnRyYWN0SWRlbnRpZmllciwgYWRkcmVzcyBpbmRleGVkIG9sZENvbnRyYWN0QWRkcmVzcywgYWRkcmVzcyBpbmRleGVkIG5ld0NvbnRyYWN0QWRkcmVzcyk7CiAgZXZlbnQgUm9sbGJhY2tlZENvbnRyYWN0ICh1aW50MjU2IGNvbnRyYWN0SWRlbnRpZmllciwgYWRkcmVzcyBpbmRleGVkIGZyb21Db250cmFjdEFkZHJlc3MsIGFkZHJlc3MgaW5kZXhlZCB0b0NvbnRyYWN0QWRkcmVzcyk7CgogIG1hcHBpbmcgKHVpbnQyNTYgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSkgcHVibGljIG1hbmFnZWRDb250cmFjdHM7CiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgYWN0aXZlQ29udHJhY3RzOwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYm9vbCkgbWlncmF0aW9uTG9ja3M7CgogIC8qKgogICAqIEBkZXYgRW5zdXJlIG5vIGxvY2tzIGFyZSBpbiBwbGFjZSBmb3IgdGhlIGdpdmVuIGNvbnRyYWN0IGlkZW50aWZpZXIuCiAgICogQHBhcmFtIGNvbnRyYWN0SWRlbnRpZmllciB1aW50MjU2CiAgICovCiAgbW9kaWZpZXIgb25seVdpdGhvdXRMb2NrKHVpbnQyNTYgY29udHJhY3RJZGVudGlmaWVyKSB7CiAgICByZXF1aXJlKCFtaWdyYXRpb25Mb2Nrc1tjb250cmFjdElkZW50aWZpZXJdKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2ICAgIEdldCB0aGUgYWRkcmVzcyBvZiB0aGUgYWN0aXZlIGNvbnRyYWN0IGZvciB0aGUgZ2l2ZW4gaWRlbnRpZmllci4KICAgKiBAcGFyYW0gIGNvbnRyYWN0SWRlbnRpZmllciB1aW50MjU2CiAgICogQHJldHVybiBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gZ2V0QWN0aXZlQ29udHJhY3RBZGRyZXNzKHVpbnQyNTYgY29udHJhY3RJZGVudGlmaWVyKQogICAgcHVibGljCiAgICBjb25zdGFudAogICAgb25seVdpdGhvdXRMb2NrKGNvbnRyYWN0SWRlbnRpZmllcikKICAgIHJldHVybnMgKGFkZHJlc3MgYWN0aXZlQ29udHJhY3QpCiAgewogICAgLy8gVmFsaWRhdGUgdGhlIGZ1bmN0aW9uIGFyZ3VtZW50cy4KICAgIHJlcXVpcmUoY29udHJhY3RJZGVudGlmaWVyICE9IDB4MCk7CiAgICAKICAgIC8vIEdldCB0aGUgYWN0aXZlIGNvbnRyYWN0IGZvciB0aGUgZ2l2ZW4gaWRlbnRpZmllci4KICAgIGFjdGl2ZUNvbnRyYWN0ID0gYWN0aXZlQ29udHJhY3RzW2NvbnRyYWN0SWRlbnRpZmllcl07CgogICAgLy8gRW5zdXJlIHRoZSBhZGRyZXNzIGlzIHNldCBhbmQgdGhlIGNvbnRyYWN0IGlzIGFjdGl2ZS4KICAgIHJlcXVpcmUoYWN0aXZlQ29udHJhY3QgIT0gMHgwICYmIEFjdGl2YXRhYmxlKGFjdGl2ZUNvbnRyYWN0KS5hY3RpdmUoKSk7CiAgfQoKICAvKioKICAgKiBAZGV2ICAgIENoZWNrIGlmIHRoZSBjb250cmFjdCBmb3IgdGhlIGdpdmVuIGFkZHJlc3MgaXMgbWFuYWdlZC4KICAgKiBAcGFyYW0gIGNvbnRyYWN0SWRlbnRpZmllciB1aW50MjU2CiAgICogQHBhcmFtICBjb250cmFjdEFkZHJlc3MgICAgYWRkcmVzcwogICAqIEByZXR1cm4gYm9vbAogICAqLwogIGZ1bmN0aW9uIGV4aXN0c01hbmFnZWRDb250cmFjdCh1aW50MjU2IGNvbnRyYWN0SWRlbnRpZmllciwgYWRkcmVzcyBjb250cmFjdEFkZHJlc3MpCiAgICBwdWJsaWMKICAgIGNvbnN0YW50CiAgICByZXR1cm5zIChib29sKQogIHsKICAgIC8vIFZhbGlkYXRlIHRoZSBmdW5jdGlvbiBhcmd1bWVudHMuCiAgICByZXF1aXJlKGNvbnRyYWN0SWRlbnRpZmllciAhPSAweDAgJiYgY29udHJhY3RBZGRyZXNzICE9IDB4MCk7CgogICAgcmV0dXJuIG1hbmFnZWRDb250cmFjdHNbY29udHJhY3RJZGVudGlmaWVyXVtjb250cmFjdEFkZHJlc3NdOwogIH0KCiAgLyoqCiAgICogQGRldiAgICBVcGdyYWRlIHRoZSBjb250cmFjdCBmb3IgdGhlIGdpdmVuIGNvbnRyYWN0IGlkZW50aWZpZXIgdG8gYSBuZXdlciB2ZXJzaW9uLgogICAqIEBkZXYgICAgaW52ZXN0aWdhdGUgcG90ZW50aWFsIHJhY2UgY29uZGl0aW9uCiAgICogQHBhcmFtICBjb250cmFjdElkZW50aWZpZXIgdWludDI1NgogICAqIEBwYXJhbSAgbmV3Q29udHJhY3RBZGRyZXNzIGFkZHJlc3MKICAgKi8KICBmdW5jdGlvbiB1cGdyYWRlQ29udHJhY3QodWludDI1NiBjb250cmFjdElkZW50aWZpZXIsIGFkZHJlc3MgbmV3Q29udHJhY3RBZGRyZXNzKQogICAgcHVibGljCiAgICBvbmx5T3duZXIKICAgIG9ubHlXaXRob3V0TG9jayhjb250cmFjdElkZW50aWZpZXIpCiAgewogICAgLy8gVmFsaWRhdGUgdGhlIGZ1bmN0aW9uIGFyZ3VtZW50cy4KICAgIHJlcXVpcmUoY29udHJhY3RJZGVudGlmaWVyICE9IDB4MCAmJiBuZXdDb250cmFjdEFkZHJlc3MgIT0gMHgwKTsKICAgIAogICAgLy8gTG9jayB0aGUgY29udHJhY3RJZGVudGlmaWVyLgogICAgbWlncmF0aW9uTG9ja3NbY29udHJhY3RJZGVudGlmaWVyXSA9IHRydWU7CgogICAgLy8gTmV3IGNvbnRyYWN0IHNob3VsZCBub3QgYmUgYWN0aXZlLgogICAgcmVxdWlyZSghQWN0aXZhdGFibGUobmV3Q29udHJhY3RBZGRyZXNzKS5hY3RpdmUoKSk7CgogICAgLy8gTmV3IGNvbnRyYWN0IHNob3VsZCBtYXRjaCB0aGUgZ2l2ZW4gY29udHJhY3RJZGVudGlmaWVyLgogICAgcmVxdWlyZShjb250cmFjdElkZW50aWZpZXIgPT0gVmVyc2lvbmFibGUobmV3Q29udHJhY3RBZGRyZXNzKS5pZGVudGlmaWVyKCkpOwoKICAgIC8vIEVuc3VyZSB0aGUgbmV3IGNvbnRyYWN0IGlzIG5vdCBhbHJlYWR5IG1hbmFnZWQuCiAgICByZXF1aXJlICghZXhpc3RzTWFuYWdlZENvbnRyYWN0KGNvbnRyYWN0SWRlbnRpZmllciwgbmV3Q29udHJhY3RBZGRyZXNzKSk7CgogICAgLy8gR2V0IHRoZSBvbGQgY29udHJhY3QgYWRkcmVzcy4KICAgIGFkZHJlc3Mgb2xkQ29udHJhY3RBZGRyZXNzID0gYWN0aXZlQ29udHJhY3RzW2NvbnRyYWN0SWRlbnRpZmllcl07CgogICAgLy8gRW5zdXJlIHRoZSBvbGQgY29udHJhY3QgaXMgbm90IGRlYWN0aXZhdGVkIGFscmVhZHkuCiAgICBpZiAob2xkQ29udHJhY3RBZGRyZXNzICE9IDB4MCkgewogICAgICByZXF1aXJlKEFjdGl2YXRhYmxlKG9sZENvbnRyYWN0QWRkcmVzcykuYWN0aXZlKCkpOwogICAgfQoKICAgIC8vIFN3YXAgdGhlIHN0YXRlcy4KICAgIHN3YXBDb250cmFjdHNTdGF0ZXMoY29udHJhY3RJZGVudGlmaWVyLCBuZXdDb250cmFjdEFkZHJlc3MsIG9sZENvbnRyYWN0QWRkcmVzcyk7CgogICAgLy8gQWRkIGl0IHRvIHRoZSBtYW5hZ2VkIG9uZXMuCiAgICBtYW5hZ2VkQ29udHJhY3RzW2NvbnRyYWN0SWRlbnRpZmllcl1bbmV3Q29udHJhY3RBZGRyZXNzXSA9IHRydWU7CgogICAgLy8gVW5sb2NrIHRoZSBjb250cmFjdElkZW50aWZpZXIuCiAgICBtaWdyYXRpb25Mb2Nrc1tjb250cmFjdElkZW50aWZpZXJdID0gZmFsc2U7CiAgICAKICAgIC8vIFRyaWdnZXIgZXZlbnQuCiAgICBVcGdyYWRlZENvbnRyYWN0KGNvbnRyYWN0SWRlbnRpZmllciwgb2xkQ29udHJhY3RBZGRyZXNzLCBuZXdDb250cmFjdEFkZHJlc3MpOwogIH0KCiAgLyoqCiAgICogQGRldiBSb2xsYmFjayB0aGUgY29udHJhY3QgZm9yIHRoZSBnaXZlbiBjb250cmFjdCBpZGVudGlmaWVyIHRvIHRoZSBwcm92aWRlZCB2ZXJzaW9uLgogICAqIEBkZXYgaW52ZXN0aWdhdGUgcG90ZW50aWFsIHJhY2UgY29uZGl0aW9uCiAgICogQHBhcmFtICBjb250cmFjdElkZW50aWZpZXIgdWludDI1NgogICAqIEBwYXJhbSAgdG9Db250cmFjdEFkZHJlc3MgIGFkZHJlc3MKICAgKi8KICBmdW5jdGlvbiByb2xsYmFja0NvbnRyYWN0KHVpbnQyNTYgY29udHJhY3RJZGVudGlmaWVyLCBhZGRyZXNzIHRvQ29udHJhY3RBZGRyZXNzKQogICAgcHVibGljCiAgICBvbmx5T3duZXIKICAgIG9ubHlXaXRob3V0TG9jayhjb250cmFjdElkZW50aWZpZXIpCiAgewogICAgLy8gVmFsaWRhdGUgdGhlIGZ1bmN0aW9uIGFyZ3VtZW50cy4KICAgIHJlcXVpcmUoY29udHJhY3RJZGVudGlmaWVyICE9IDB4MCAmJiB0b0NvbnRyYWN0QWRkcmVzcyAhPSAweDApOwoKICAgIC8vIExvY2sgdGhlIGNvbnRyYWN0SWRlbnRpZmllci4KICAgIG1pZ3JhdGlvbkxvY2tzW2NvbnRyYWN0SWRlbnRpZmllcl0gPSB0cnVlOwoKICAgIC8vIFRvIGNvbnRyYWN0IHNob3VsZCBtYXRjaCB0aGUgZ2l2ZW4gY29udHJhY3RJZGVudGlmaWVyLgogICAgcmVxdWlyZShjb250cmFjdElkZW50aWZpZXIgPT0gVmVyc2lvbmFibGUodG9Db250cmFjdEFkZHJlc3MpLmlkZW50aWZpZXIoKSk7CgogICAgLy8gUm9sbGJhY2sgInRvIiBjb250cmFjdCBzaG91bGQgYmUgbWFuYWdlZCBhbmQgaW5hY3RpdmUuCiAgICByZXF1aXJlICghQWN0aXZhdGFibGUodG9Db250cmFjdEFkZHJlc3MpLmFjdGl2ZSgpICYmIGV4aXN0c01hbmFnZWRDb250cmFjdChjb250cmFjdElkZW50aWZpZXIsIHRvQ29udHJhY3RBZGRyZXNzKSk7CgogICAgLy8gR2V0IHRoZSByb2xsYmFjayAiZnJvbSIgY29udHJhY3QgZm9yIGdpdmVuIGlkZW50aWZpZXIuIFdpbGwgZmFpbCBpZiB0aGVyZSBpcyBubyBhY3RpdmUgY29udHJhY3QuCiAgICBhZGRyZXNzIGZyb21Db250cmFjdEFkZHJlc3MgPSBhY3RpdmVDb250cmFjdHNbY29udHJhY3RJZGVudGlmaWVyXTsKCiAgICAvLyBTd2FwIHRoZSBzdGF0ZXMuCiAgICBzd2FwQ29udHJhY3RzU3RhdGVzKGNvbnRyYWN0SWRlbnRpZmllciwgdG9Db250cmFjdEFkZHJlc3MsIGZyb21Db250cmFjdEFkZHJlc3MpOwoKICAgIC8vIFVubG9jayB0aGUgY29udHJhY3RJZGVudGlmaWVyLgogICAgbWlncmF0aW9uTG9ja3NbY29udHJhY3RJZGVudGlmaWVyXSA9IGZhbHNlOwoKICAgIC8vIFRyaWdnZXIgZXZlbnQuCiAgICBSb2xsYmFja2VkQ29udHJhY3QoY29udHJhY3RJZGVudGlmaWVyLCBmcm9tQ29udHJhY3RBZGRyZXNzLCB0b0NvbnRyYWN0QWRkcmVzcyk7CiAgfQogIAogIC8qKgogICAqIEBkZXYgU3dhcCB0aGUgZ2l2ZW4gY29udHJhY3RzIHN0YXRlcyBhcyBkZWZpbmVkOgogICAqICAgICAgICAtIG5ld0NvbnRyYWN0QWRkcmVzcyB3aWxsIGJlIGFjdGl2YXRlZAogICAqICAgICAgICAtIG9sZENvbnRyYWN0QWRkcmVzcyB3aWxsIGJlIGRlYWN0aXZlZAogICAqIEBwYXJhbSAgY29udHJhY3RJZGVudGlmaWVyIHVpbnQyNTYKICAgKiBAcGFyYW0gIG5ld0NvbnRyYWN0QWRkcmVzcyBhZGRyZXNzCiAgICogQHBhcmFtICBvbGRDb250cmFjdEFkZHJlc3MgYWRkcmVzcwogICAqLwogIGZ1bmN0aW9uIHN3YXBDb250cmFjdHNTdGF0ZXModWludDI1NiBjb250cmFjdElkZW50aWZpZXIsIGFkZHJlc3MgbmV3Q29udHJhY3RBZGRyZXNzLCBhZGRyZXNzIG9sZENvbnRyYWN0QWRkcmVzcykgaW50ZXJuYWwgewogICAgLy8gRGVhY3RpdmF0ZSB0aGUgb2xkIGNvbnRyYWN0LgogICAgaWYgKG9sZENvbnRyYWN0QWRkcmVzcyAhPSAweDApIHsKICAgICAgQWN0aXZhdGFibGUob2xkQ29udHJhY3RBZGRyZXNzKS5kZWFjdGl2YXRlKCk7CiAgICB9CgogICAgLy8gQWN0aXZhdGUgdGhlIG5ldyBjb250cmFjdC4KICAgIEFjdGl2YXRhYmxlKG5ld0NvbnRyYWN0QWRkcmVzcykuYWN0aXZhdGUoKTsKCiAgICAgLy8gU2V0IHRoZSBuZXcgY29udHJhY3QgYXMgdGhlIGFjdGl2ZSBvbmUgZm9yIHRoZSBnaXZlbiBpZGVudGlmaWVyLgogICAgYWN0aXZlQ29udHJhY3RzW2NvbnRyYWN0SWRlbnRpZmllcl0gPSBuZXdDb250cmFjdEFkZHJlc3M7CiAgfQp9CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8vIEZpbGU6IHplcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy90b2tlbi9FUkMyMEJhc2ljLnNvbAoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLy8gRmlsZTogY29udHJhY3RzL1Rva2VuL1N3aXNzQ3J5cHRvRXhjaGFuZ2VUb2tlbi5zb2wKCi8qKgogKiBAdGl0bGUgU3dpc3NDcnlwdG9FeGNoYW5nZSBTdGFuZGFyZCBFUkMyMCBjb21wYXRpYmxlIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIFN3aXNzQ3J5cHRvRXhjaGFuZ2UgY29tcGFueSBzaGFyZXMuCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBPcGVuWmVwcGVsaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzL3Rva2VuL1N0YW5kYXJkVG9rZW4uc29sCiAqLwpjb250cmFjdCBTd2lzc0NyeXB0b0V4Y2hhbmdlVG9rZW4gaXMgRVJDMjBCYXNpYywgVmVyc2lvbmFibGUgewogIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CgogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlNDWCI7CiAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMDsKCiAgdWludDI1NiBpbnRlcm5hbCBjb25zdGFudCBDT01QQU5ZX0NPTlRSQUNUX0lEID0gMTAxOwoKICAvKioKICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFN3aXNzQ3J5cHRvRXhjaGFuZ2VUb2tlbiBjb250cmFjdC4KICAgKiBAcGFyYW0gaW5pdGlhbFNoYXJlaG9sZGVyQWRkcmVzcyBhZGRyZXNzIAogICAqIEBwYXJhbSBpbml0aWFsQW1vdW50ICAgICAgICAgICAgIHVpbnQyNTYgCiAgICovCiAgZnVuY3Rpb24gU3dpc3NDcnlwdG9FeGNoYW5nZVRva2VuIChhZGRyZXNzIGluaXRpYWxTaGFyZWhvbGRlckFkZHJlc3MsIHVpbnQyNTYgaW5pdGlhbEFtb3VudCwgYWRkcmVzcyBfbWFuYWdlcikKICAgIHB1YmxpYwogICAgTWFuYWdlYWJsZSAoX21hbmFnZXIpCiAgICBWZXJzaW9uYWJsZSAoIlN3aXNzQ3J5cHRvRXhjaGFuZ2VUb2tlbiIsICIxLjAuMCIsIDEpCiAgewogICAgcmVxdWlyZShpbml0aWFsQW1vdW50ID4gMCk7CiAgICByZXF1aXJlKGluaXRpYWxTaGFyZWhvbGRlckFkZHJlc3MgIT0gMHgwKTsKCiAgICBiYWxhbmNlc1tpbml0aWFsU2hhcmVob2xkZXJBZGRyZXNzXSA9IGluaXRpYWxBbW91bnQ7CiAgICB0b3RhbFN1cHBseSA9IGluaXRpYWxBbW91bnQ7CiAgfQoKICAvKioKICAgKiBAZGV2IEVzbnVyZSB0aGUgbXNnLnNlbmRlciBpcyB0aGUgY29tcGFueSBjb250cmFjdC4KICAgKi8KICBtb2RpZmllciBvbmx5Q29tcGFueSgpIHsKICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gQ29udHJhY3RNYW5hZ2VtZW50U3lzdGVtKG1hbmFnZXIpLmdldEFjdGl2ZUNvbnRyYWN0QWRkcmVzcyhDT01QQU5ZX0NPTlRSQUNUX0lEKSk7CiAgICBfOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCiAgLyoqCiAgKiBAZGV2IFRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgaXNBY3RpdmUgb25seUNvbXBhbnkgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gMHgwKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4KICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIGlzQWN0aXZlIG9ubHlDb21wYW55IHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwoKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBtaW50IHRva2Vucy4KICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAqIEByZXR1cm4gQSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gbWludCh1aW50MjU2IF9hbW91bnQpIGlzQWN0aXZlIG9ubHlDb21wYW55IHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAvLyBUaGUgcmVjZWl2ZXIgb2YgdGhlIG1pbnRlZCB0b2tlbnMgd2lsbCBiZSB0aGUgY29tcGFueSBjb250cmFjdC4KICAgIGFkZHJlc3MgX2NvbXBhbnlBZGRyZXNzID0gQ29udHJhY3RNYW5hZ2VtZW50U3lzdGVtKG1hbmFnZXIpLmdldEFjdGl2ZUNvbnRyYWN0QWRkcmVzcyhDT01QQU5ZX0NPTlRSQUNUX0lEKTsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX2NvbXBhbnlBZGRyZXNzXSA9IGJhbGFuY2VzW19jb21wYW55QWRkcmVzc10uYWRkKF9hbW91bnQpOwogICAgTWludChfY29tcGFueUFkZHJlc3MsIF9hbW91bnQpOwogICAgVHJhbnNmZXIoMHgwLCBfY29tcGFueUFkZHJlc3MsIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9CgovLyBGaWxlOiBjb250cmFjdHMvQ29tcGFueS9CYXNlQ29tcGFueS5zb2wKCmNvbnRyYWN0IEJhc2VDb21wYW55IGlzIFZlcnNpb25hYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAKICB1aW50MjU2IGludGVybmFsIGNvbnN0YW50IFRPS0VOX0NPTlRSQUNUX0lEID0gMTsKCiAgLyoqCiAgICogQGRldiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGNvbXBhbnkgY29udHJhY3QuCiAgICogQHBhcmFtIF9uYW1lICAgICAgIHN0cmluZwogICAqIEBwYXJhbSBfdmVyc2lvbiAgICBzdHJpbmcKICAgKiBAcGFyYW0gX2lkZW50aWZpZXIgdWludDI1NgogICAqIEBwYXJhbSBfbWFuYWdlciAgICBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gQmFzZUNvbXBhbnkoc3RyaW5nIF9uYW1lLCBzdHJpbmcgX3ZlcnNpb24sIHVpbnQyNTYgX2lkZW50aWZpZXIsIGFkZHJlc3MgX21hbmFnZXIpIHB1YmxpYyBWZXJzaW9uYWJsZSAoX25hbWUsIF92ZXJzaW9uLCBfaWRlbnRpZmllcikgTWFuYWdlYWJsZShfbWFuYWdlcikge30KCiAgLyoqCiAgICogQGRldiBHZXQgdGhlIGFtb3VudCBvZiBzaGFyZXMgdGhhdCBhIHNoYXJlaG9sZGVyIG93bnMgaW4gcGVyY2VudGFnZQogICAqICAgICAgcmVsYXRpdmUgdG8gdGhlIHRvdGFsIG51bWJlciBvZiBzaGFyZXMuCiAgICogQHBhcmFtICBzaGFyZWhvbGRlciBhZGRyZXNzCiAgICogQHJldHVybiB1aW50MjU2CiAgICovCiAgZnVuY3Rpb24gZ2V0U2hhcmVzUGVyY2VudGFnZShhZGRyZXNzIHNoYXJlaG9sZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiB0b3RhbFNoYXJlc0Ftb3VudCA9IHRva2VuKCkudG90YWxTdXBwbHkoKTsKICAgIHVpbnQyNTYgb3duZWRTaGFyZXMgPSB0b2tlbigpLmJhbGFuY2VPZihzaGFyZWhvbGRlcik7CiAgICByZXR1cm4gb3duZWRTaGFyZXMubXVsKDEwMCkuZGl2KHRvdGFsU2hhcmVzQW1vdW50KTsKICB9CgogIC8qKgogICAqIEBkZXYgR2V0IHRoZSBsYXRlc3QgdG9rZW4gY29udHJhY3QgYWRkcmVzcy4KICAgKiBAcmV0dXJuIGFkZHJlc3MKICAgKi8KICBmdW5jdGlvbiB0b2tlbkFkZHJlc3MoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgcmV0dXJuIENvbnRyYWN0TWFuYWdlbWVudFN5c3RlbShtYW5hZ2VyKS5nZXRBY3RpdmVDb250cmFjdEFkZHJlc3MoVE9LRU5fQ09OVFJBQ1RfSUQpOwogIH0KCiAgLyoqCiAgICogQGRldiBHZXQgdGhlIGxhdGVzdCByZWZlcmVuY2UgdG8gdGhlIHRva2VuLgogICAqIEByZXR1cm4gU3dpc3NDcnlwdG9FeGNoYW5nZVRva2VuCiAgICovCiAgZnVuY3Rpb24gdG9rZW4oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoU3dpc3NDcnlwdG9FeGNoYW5nZVRva2VuKSB7CiAgICByZXR1cm4gU3dpc3NDcnlwdG9FeGNoYW5nZVRva2VuKHRva2VuQWRkcmVzcygpKTsKICB9CgogIC8qKgogICAqIEBkZXYgQ2hlY2sgaWYgdGhlIHByb3ZpZGVkIGFkZHJlc3MgaXMgYSBjb21wYW55IHNoYXJlaG9sZGVyLgogICAqIEBwYXJhbSBfYWRkciBhZGRyZXNzCiAgICogQHJldHVybiBib29sCiAgICovCiAgZnVuY3Rpb24gaXNTaGFyZWhvbGRlcihhZGRyZXNzIF9hZGRyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHRva2VuKCkuYmFsYW5jZU9mKF9hZGRyKSA+IDAgJiYgX2FkZHIgIT0gYWRkcmVzcyh0aGlzKTsKICB9CiAgICAKICAvKioKICAgKiBAZGV2IENoZWNrIGlmIHRoZSBnaXZlbiBhZGRyZXNzIGlzIGEgbWFqb3JpdHkgY29tcGFueSBzaGFyZWhvbGRlci4KICAgKiBAcGFyYW0gX2FkZHIgYWRkcmVzcwogICAqIEByZXR1cm4gYm9vbAogICAqLwogIGZ1bmN0aW9uIGlzTWFqb3JpdHlTaGFyZWhvbGRlcihhZGRyZXNzIF9hZGRyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIChnZXRTaGFyZXNQZXJjZW50YWdlKF9hZGRyKSA+IDUwKTsKICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9Db21wYW55L1N3aXNzQ3J5cHRvRXhjaGFuZ2VDb21wYW55LnNvbAoKY29udHJhY3QgU3dpc3NDcnlwdG9FeGNoYW5nZUNvbXBhbnkgaXMgQmFzZUNvbXBhbnkgewogIGV2ZW50IFByb2Nlc3NlZEludmVzdG1lbnQoYWRkcmVzcyBpbmRleGVkIGludmVzdG9yLCB1aW50MjU2IHdlaUFtb3VudCwgdWludDI1NiBzaGFyZXMpOwogIGV2ZW50IFNhbGVDb21wbGV0ZWQoYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHdlaUFtb3VudCwgdWludDI1NiBzaGFyZXMpOwogIGV2ZW50IFNhbGVFbmRlZCh1aW50MjU2IGVuZGVkQXQpOwogIGV2ZW50IFNhbGVBYm9ydGVkKHVpbnQyNTYgYWJvcnRlZEF0KTsKCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIFNhbGUgcHVibGljIGN1cnJlbnRTYWxlOwoKICAvLyBEZWZpbml0aW9uIG9mIGEgc2FsZS4KICBzdHJ1Y3QgU2FsZSB7CiAgICBhZGRyZXNzIGNyZWF0b3I7CiAgICBhZGRyZXNzIGJlbmVmaWNpYXJ5OwogICAgYWRkcmVzcyBpbnZlc3RvcjsKICAgIGFkZHJlc3Mgc2hhcmVob2xkZXI7CiAgICB1aW50MjU2IHJhdGU7CiAgICB1aW50MjU2IHdlaVJhaXNlZDsKICAgIHVpbnQyNTYgc2hhcmVzU29sZDsKICAgIHVpbnQyNTYgc2hhcmVzQ2FwOwogICAgYm9vbCBlbmRlZDsKICAgIGJvb2wgZXhpc3RzOwogIH0KICAKICAvKioKICAgKiBAZGV2IENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgY29tcGFueSBjb250cmFjdC4KICAgKiBAcGFyYW0gX21hbmFnZXIgYWRkcmVzcwogICAqLwogIGZ1bmN0aW9uIFN3aXNzQ3J5cHRvRXhjaGFuZ2VDb21wYW55KGFkZHJlc3MgX21hbmFnZXIpIHB1YmxpYyBCYXNlQ29tcGFueSgiU3dpc3NDcnlwdG9FeGNoYW5nZUNvbXBhbnkiLCAiMS4wLjEiLCAxMDEsIF9tYW5hZ2VyKSB7fQoKICAvKioKICAgKiBAZGV2IEVuc3VyZSB0aGUgbXNnLnNlbmRlciBpcyBhbiBzaGFyZWhvbGRlciBvZiB0aGUgY29tcGFueS4KICAgKi8KICBtb2RpZmllciBvbmx5U2hhcmVob2xkZXIoKSB7CiAgICByZXF1aXJlKGlzU2hhcmVob2xkZXIobXNnLnNlbmRlcikpOwogICAgXzsgCiAgfQogIAogIC8qKgogICAqIEBkZXYgRW5zdXJlIHRoZSBtc2cuc2VuZGVyIGlzIGhhcyBvdmVyIDUwJSBvZiB0aGUgY29tcGFueSBzaGFyZXMuCiAgICovCiAgbW9kaWZpZXIgb25seU1ham9yaXR5KCkgewogICAgcmVxdWlyZShpc01ham9yaXR5U2hhcmVob2xkZXIobXNnLnNlbmRlcikpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgRW5zdXJlIHRoZSBtc2cuc2VuZGVyIGlzIHRoZXNhbGUgY3JlYXRvci4KICAgKi8KICBtb2RpZmllciBvbmx5U2FsZUNyZWF0b3IoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY3VycmVudFNhbGUuY3JlYXRvcik7CiAgICBfOyAKICB9CiAgCiAgLyoqCiAgICogQGRldiBFbnN1cmUgdGhlcmUgaXMgbm8gc2FsZSBpbiBwcm9ncmVzcy4KICAgKi8KICBtb2RpZmllciBvbmx5V2hlbk5vdFNlbGxpbmcoKSB7IAogICAgcmVxdWlyZSghY3VycmVudFNhbGUuZXhpc3RzKTsKICAgIF87IAogIH0KICAKICAvKioKICAgKiBAZGV2IEVuc3VyZSB0aGVyZSBpcyBhIHNhbGUgaW4gcHJvZ3Jlc3MuCiAgICovCiAgbW9kaWZpZXIgb25seVdoZW5TZWxsaW5nKCkgeyAKICAgIHJlcXVpcmUoY3VycmVudFNhbGUuZXhpc3RzKTsKICAgIF87IAogIH0KCiAgCiAgLyoqCiAgICogQGRldiBIYW5kbGUgYW4gaW5jb21pbmcgZXRoZXIgdHJhbnNmZXIuCiAgICovCiAgZnVuY3Rpb24gKCkKICAgIHB1YmxpYwogICAgcGF5YWJsZQogICAgaXNBY3RpdmUKICAgIG9ubHlXaGVuU2VsbGluZwogIHsKICAgIC8vIFZhbGlkYXRlIHRoZSBwdXJjaGFzZS4KICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjdXJyZW50U2FsZS5pbnZlc3RvciAmJiBtc2cudmFsdWUgPiAwKTsKCiAgICAvLyBGb3J3YXJkIHRoZSBjYWxsIHRvIHRoZSBTYWxlIGNvbnRyYWN0LgogICAgcHJvY2Vzc1BheW1lbnQoKTsKICB9CgogIC8qKgogICAqIEBkZXYgSW5pdGlhbGl6ZSBhIG5ldyBzYWxlLgogICAqIEBwYXJhbSByYXRlICAgICAgICAgdWludDI1NgogICAqIEBwYXJhbSBzaGFyZXNDYXAgICAgdWludDI1NgogICAqIEBwYXJhbSBiZW5lZmljaWFyeSAgYWRkcmVzcyAKICAgKiBAcGFyYW0gaW52ZXN0b3IgICAgIGFkZHJlc3MgCiAgICovCiAgZnVuY3Rpb24gaW5pdGlhbGl6ZU5ld1NhbGUoCiAgICB1aW50MjU2IHJhdGUsCiAgICB1aW50MjU2IHNoYXJlc0NhcCwKICAgIGFkZHJlc3MgYmVuZWZpY2lhcnksCiAgICBhZGRyZXNzIGludmVzdG9yCiAgKQogICAgcHVibGljCiAgICBpc0FjdGl2ZQogICAgb25seU1ham9yaXR5CiAgICBvbmx5V2hlbk5vdFNlbGxpbmcKICB7CiAgICAvLyBWYWxpZGF0ZSB0aGUgcGFyYW1ldGVycy4KICAgIHJlcXVpcmUocmF0ZSA+IDApOwogICAgcmVxdWlyZShzaGFyZXNDYXAgPiAwKTsKICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gMHgwKTsKICAgIHJlcXVpcmUoaW52ZXN0b3IgIT0gMHgwKTsKICAgIHJlcXVpcmUodG9rZW4oKS5iYWxhbmNlT2YobXNnLnNlbmRlcikgPj0gc2hhcmVzQ2FwKTsKCiAgICAvLyBTZXQgc2FsZSBwcm9wZXJ0aWVzLgogICAgY3VycmVudFNhbGUuY3JlYXRvciA9IG1zZy5zZW5kZXI7CiAgICBjdXJyZW50U2FsZS5yYXRlID0gcmF0ZTsKICAgIGN1cnJlbnRTYWxlLnNoYXJlc0NhcCA9IHNoYXJlc0NhcDsKICAgIGN1cnJlbnRTYWxlLmJlbmVmaWNpYXJ5ID0gYmVuZWZpY2lhcnk7CiAgICBjdXJyZW50U2FsZS5pbnZlc3RvciA9IGludmVzdG9yOwogICAgY3VycmVudFNhbGUuc2hhcmVob2xkZXIgPSBtc2cuc2VuZGVyOwogICAgY3VycmVudFNhbGUud2VpUmFpc2VkID0gMDsKICAgIGN1cnJlbnRTYWxlLnNoYXJlc1NvbGQgPSAwOwogICAgY3VycmVudFNhbGUuZW5kZWQgPSBmYWxzZTsKICAgIGN1cnJlbnRTYWxlLmV4aXN0cyA9IHRydWU7CgogICAgLy8gVHJhbnNmZXIgdGhlIGZ1bmRzIHRvIHRoZSBjb21wYW55LgogICAgcmVxdWlyZSh0b2tlbigpLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBhZGRyZXNzKHRoaXMpLCBzaGFyZXNDYXApKTsKCiAgICAvLyBFbmZvcmNlIHRoYXQgb25lIHNoYXJlaG9sZGVyIHdpbGwgcmVtYWluIG1ham9yaXR5LgogICAgcmVxdWlyZShpc01ham9yaXR5U2hhcmVob2xkZXIobXNnLnNlbmRlcikpOwogIH0KCiAgLyoqCiAgICogQGRldiBQcm9jZXNzIHRoZSBwYXltZW50IGZyb20gdGhlIGludmVzdG9yLgogICAqLwogIGZ1bmN0aW9uIHByb2Nlc3NQYXltZW50KCkKICAgIHByaXZhdGUKICB7CiAgICBhZGRyZXNzIGludmVzdG9yID0gY3VycmVudFNhbGUuaW52ZXN0b3I7CiAgICB1aW50MjU2IGV4Y2Vzc1dlaSA9IDA7CiAgICB1aW50MjU2IHNoYXJlc1NvbGQgPSBjdXJyZW50U2FsZS5zaGFyZXNTb2xkOwogICAgdWludDI1NiBzaGFyZXNDYXAgPSBjdXJyZW50U2FsZS5zaGFyZXNDYXA7CiAgICB1aW50MjU2IHJhdGUgPSBjdXJyZW50U2FsZS5yYXRlOwogICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICB1aW50MjU2IHNoYXJlcyA9IHdlaUFtb3VudC5tdWwocmF0ZSkuZGl2KDEgZXRoZXIpOwoKICAgIC8vIElmIHRoZSBhZnRlciB0aGlzIGludmVzdG1lbnQgdGhlIGNhcCB3aWxsIGJlIHJlYWNoZWQKICAgIC8vIHRoZSBzYWxlIHdpbGwgZW5kIGFuZCB0aGUgZXhjZXNzIHdlaSB3aWxsIGJlIHNlbnQKICAgIC8vIGJhY2sgdG8gdGhlIGludmVzdG9yLiAKICAgIGlmIChzaGFyZXNTb2xkLmFkZChzaGFyZXMpID4gc2hhcmVzQ2FwKSB7CiAgICAgIGV4Y2Vzc1dlaSA9IHNoYXJlc1NvbGQuYWRkKHNoYXJlcykuc3ViKHNoYXJlc0NhcCkubXVsKDEgZXRoZXIpLmRpdihyYXRlKTsKICAgICAgd2VpQW1vdW50ID0gd2VpQW1vdW50LnN1YihleGNlc3NXZWkpOwogICAgICBzaGFyZXMgPSBzaGFyZXNDYXAuc3ViKHNoYXJlc1NvbGQpOwogICAgfSBlbHNlIHsKICAgICAgLy93ZSBjYXJlIG9mIGludmVzdG9ycyBtb25leQogICAgICBleGNlc3NXZWkgPSB3ZWlBbW91bnQuc3ViKHNoYXJlcy5tdWwoMSBldGhlcikuZGl2KHJhdGUpKTsKICAgICAgd2VpQW1vdW50ID0gd2VpQW1vdW50LnN1YihleGNlc3NXZWkpOwogICAgfQoKICAgIC8vIHVwZGF0ZSBzaGFyZXMKICAgIGN1cnJlbnRTYWxlLnNoYXJlc1NvbGQgPSBzaGFyZXNTb2xkLmFkZChzaGFyZXMpOwoKICAgIC8vIHVwZGF0ZSB3ZWlSYWlzZWQuCiAgICBjdXJyZW50U2FsZS53ZWlSYWlzZWQgPSBjdXJyZW50U2FsZS53ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgLy9jbG9zZSBzYWxlCiAgICBpZihjdXJyZW50U2FsZS5zaGFyZXNTb2xkID09IHNoYXJlc0NhcCkgewogICAgICBjdXJyZW50U2FsZS5lbmRlZCA9IHRydWU7CiAgICAgIFNhbGVFbmRlZChub3cpOwogICAgfQoKICAgIC8vIFNlbmQgdG9rZW5zIHRvIHRoZSBpbnZlc3Rvci4KICAgIHJlcXVpcmUodG9rZW4oKS50cmFuc2ZlcihpbnZlc3Rvciwgc2hhcmVzKSk7CgogICAgLy8gU2VuZCBleGNlc3MgYmFjayB0byB0aGUgaW52ZXN0b3IuCiAgICBpZiAoZXhjZXNzV2VpID4gMCkgewogICAgICBpbnZlc3Rvci50cmFuc2ZlcihleGNlc3NXZWkpOwogICAgfQoKICAgIC8vIFRyaWdnZXIgZXZlbnQuCiAgICBQcm9jZXNzZWRJbnZlc3RtZW50KGludmVzdG9yLCB3ZWlBbW91bnQsIHNoYXJlcyk7CiAgfQoKICAvKioKICAgKiBAZGV2IEZpbmFsaXplIHRoZSBpbiBwcm9ncmVzcyBzYWxlLgogICAqLwogIGZ1bmN0aW9uIGZpbmFsaXplU2FsZSgpCiAgICBwdWJsaWMKICAgIGlzQWN0aXZlCiAgICBvbmx5U2FsZUNyZWF0b3IKICAgIG9ubHlXaGVuU2VsbGluZwogIHsKICAgIHJlcXVpcmUoY3VycmVudFNhbGUuZW5kZWQpOwogICAgcmVxdWlyZShjdXJyZW50U2FsZS5zaGFyZXNTb2xkID09IGN1cnJlbnRTYWxlLnNoYXJlc0NhcCk7CgogICAgLy8gU2VuZCB3ZWkgdG8gdGhlIGJlbmVmaWNpYXJ5LgogICAgY3VycmVudFNhbGUuYmVuZWZpY2lhcnkudHJhbnNmZXIoY3VycmVudFNhbGUud2VpUmFpc2VkKTsgCgogICAgLy8gVHJpZ2dlciBldmVudC4KICAgIFNhbGVDb21wbGV0ZWQoY3VycmVudFNhbGUuYmVuZWZpY2lhcnksIGN1cnJlbnRTYWxlLndlaVJhaXNlZCwgY3VycmVudFNhbGUuc2hhcmVzU29sZCk7CiAgICAKICAgIC8vIFJlc2V0IHNhbGUuCiAgICBjdXJyZW50U2FsZS5leGlzdHMgPSBmYWxzZTsKICB9CgogIC8qKgogICAqIEBkZXYgQWJvcnQgdGhlIGN1cnJlbnQgc2FsZS4KICAgKi8KICBmdW5jdGlvbiBhYm9ydFNhbGUoKQogICAgcHVibGljCiAgICBpc0FjdGl2ZQogICAgb25seVNhbGVDcmVhdG9yCiAgICBvbmx5V2hlblNlbGxpbmcKICB7CiAgICByZXF1aXJlKCFjdXJyZW50U2FsZS5lbmRlZCk7CgogICAgYWRkcmVzcyBpbnZlc3RvciA9IGN1cnJlbnRTYWxlLmludmVzdG9yOwogICAgYWRkcmVzcyBzaGFyZWhvbGRlciA9IGN1cnJlbnRTYWxlLnNoYXJlaG9sZGVyOwogICAgYWRkcmVzcyBjb21wYW55ID0gYWRkcmVzcyh0aGlzKTsKCiAgICAvLyBTZW5kIHdlaSBiYWNrIHRvIHRoZSBpbnZlc3Rvci4KICAgIGludmVzdG9yLnRyYW5zZmVyKGN1cnJlbnRTYWxlLndlaVJhaXNlZCk7CgogICAgLy8gU2VuZCB0b2tlbnMgYmFjayBmcm9tIHRoZSBpbnZlc3RvciB0byBjb21wYW55LgogICAgcmVxdWlyZSh0b2tlbigpLnRyYW5zZmVyRnJvbShpbnZlc3RvciwgY29tcGFueSwgY3VycmVudFNhbGUuc2hhcmVzU29sZCkpOwoKICAgIC8vIFNlbmQgdG9rZW5zIGJhY2sgZnJvbSB0aGUgY29tcGFueSB0byB0aGUgc2hhcmVob2xkZXIuCiAgICByZXF1aXJlKHRva2VuKCkudHJhbnNmZXJGcm9tKGNvbXBhbnksIHNoYXJlaG9sZGVyLCBjdXJyZW50U2FsZS5zaGFyZXNDYXApKTsKCiAgICAvLyBUcmlnZ2VyIGV2ZW50LgogICAgU2FsZUFib3J0ZWQobm93KTsKCiAgICAvLyBSZXNldCBzYWxlIHN0YXRlLgogICAgY3VycmVudFNhbGUuZXhpc3RzID0gZmFsc2U7CiAgfQp9'.
	

]
