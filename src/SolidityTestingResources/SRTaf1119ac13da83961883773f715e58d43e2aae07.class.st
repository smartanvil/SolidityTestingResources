Class {
	#name : #SRTaf1119ac13da83961883773f715e58d43e2aae07,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTaf1119ac13da83961883773f715e58d43e2aae07 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgSXRlbVRva2VuIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgZXZlbnQgQm91Z2h0ICh1aW50MjU2IGluZGV4ZWQgX2l0ZW1JZCwgYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludDI1NiBfcHJpY2UpOwogIGV2ZW50IFNvbGQgKHVpbnQyNTYgaW5kZXhlZCBfaXRlbUlkLCBhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50MjU2IF9wcmljZSk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF90b2tlbklkKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX2FwcHJvdmVkLCB1aW50MjU2IF90b2tlbklkKTsKCiAgYWRkcmVzcyBwcml2YXRlIG93bmVyOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHJpdmF0ZSBhZG1pbnM7CiAgSUl0ZW1SZWdpc3RyeSBwcml2YXRlIGl0ZW1SZWdpc3RyeTsKICBib29sIHByaXZhdGUgZXJjNzIxRW5hYmxlZCA9IGZhbHNlOwoKICB1aW50MjU2IHByaXZhdGUgaW5jcmVhc2VMaW1pdDEgPSAwLjAyIGV0aGVyOwogIHVpbnQyNTYgcHJpdmF0ZSBpbmNyZWFzZUxpbWl0MiA9IDAuNSBldGhlcjsKICB1aW50MjU2IHByaXZhdGUgaW5jcmVhc2VMaW1pdDMgPSAyLjAgZXRoZXI7CiAgdWludDI1NiBwcml2YXRlIGluY3JlYXNlTGltaXQ0ID0gNS4wIGV0aGVyOwoKICB1aW50MjU2W10gcHJpdmF0ZSBsaXN0ZWRJdGVtczsKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgb3duZXJPZkl0ZW07CiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIHN0YXJ0aW5nUHJpY2VPZkl0ZW07CiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIHByaWNlT2ZJdGVtOwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHJpdmF0ZSBhcHByb3ZlZE9mSXRlbTsKCiAgZnVuY3Rpb24gSXRlbVRva2VuICgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICBhZG1pbnNbb3duZXJdID0gdHJ1ZTsKICB9CgogIC8qIE1vZGlmaWVycyAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUob3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUFkbWlucygpIHsKICAgIHJlcXVpcmUoYWRtaW5zW21zZy5zZW5kZXJdKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBvbmx5RVJDNzIxKCkgewogICAgcmVxdWlyZShlcmM3MjFFbmFibGVkKTsKICAgIF87CiAgfQoKICAvKiBPd25lciAqLwogIGZ1bmN0aW9uIHNldE93bmVyIChhZGRyZXNzIF9vd25lcikgb25seU93bmVyKCkgcHVibGljIHsKICAgIG93bmVyID0gX293bmVyOwogIH0KCiAgZnVuY3Rpb24gc2V0SXRlbVJlZ2lzdHJ5IChhZGRyZXNzIF9pdGVtUmVnaXN0cnkpIG9ubHlPd25lcigpIHB1YmxpYyB7CiAgICBpdGVtUmVnaXN0cnkgPSBJSXRlbVJlZ2lzdHJ5KF9pdGVtUmVnaXN0cnkpOwogIH0KCiAgZnVuY3Rpb24gYWRkQWRtaW4gKGFkZHJlc3MgX2FkbWluKSBvbmx5T3duZXIoKSBwdWJsaWMgewogICAgYWRtaW5zW19hZG1pbl0gPSB0cnVlOwogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlQWRtaW4gKGFkZHJlc3MgX2FkbWluKSBvbmx5T3duZXIoKSBwdWJsaWMgewogICAgZGVsZXRlIGFkbWluc1tfYWRtaW5dOwogIH0KCiAgLy8gVW5sb2NrcyBFUkM3MjEgYmVoYXZpb3VyLCBhbGxvd2luZyBmb3IgdHJhZGluZyBvbiB0aGlyZCBwYXJ0eSBwbGF0Zm9ybXMuCiAgZnVuY3Rpb24gZW5hYmxlRVJDNzIxICgpIG9ubHlPd25lcigpIHB1YmxpYyB7CiAgICBlcmM3MjFFbmFibGVkID0gdHJ1ZTsKICB9CgogIC8qIFdpdGhkcmF3ICovCiAgLyoKICAgIE5PVElDRTogVGhlc2UgZnVuY3Rpb25zIHdpdGhkcmF3IHRoZSBkZXZlbG9wZXIncyBjdXQgd2hpY2ggaXMgbGVmdAogICAgaW4gdGhlIGNvbnRyYWN0IGJ5IGBidXlgLiBVc2VyIGZ1bmRzIGFyZSBpbW1lZGlhdGVseSBzZW50IHRvIHRoZSBvbGQKICAgIG93bmVyIGluIGBidXlgLCBubyB1c2VyIGZ1bmRzIGFyZSBsZWZ0IGluIHRoZSBjb250cmFjdC4KICAqLwogIGZ1bmN0aW9uIHdpdGhkcmF3QWxsICgpIG9ubHlPd25lcigpIHB1YmxpYyB7CiAgICBvd25lci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0KCiAgZnVuY3Rpb24gd2l0aGRyYXdBbW91bnQgKHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyKCkgcHVibGljIHsKICAgIG93bmVyLnRyYW5zZmVyKF9hbW91bnQpOwogIH0KCiAgLyogTGlzdGluZyAqLwogIGZ1bmN0aW9uIHBvcHVsYXRlRnJvbUl0ZW1SZWdpc3RyeSAodWludDI1NltdIF9pdGVtSWRzKSBvbmx5T3duZXIoKSBwdWJsaWMgewogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX2l0ZW1JZHMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKHByaWNlT2ZJdGVtW19pdGVtSWRzW2ldXSA+IDAgfHwgaXRlbVJlZ2lzdHJ5LnByaWNlT2YoX2l0ZW1JZHNbaV0pID09IDApIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgbGlzdEl0ZW1Gcm9tUmVnaXN0cnkoX2l0ZW1JZHNbaV0pOwogICAgfQogIH0KCiAgZnVuY3Rpb24gbGlzdEl0ZW1Gcm9tUmVnaXN0cnkgKHVpbnQyNTYgX2l0ZW1JZCkgb25seU93bmVyKCkgcHVibGljIHsKICAgIHJlcXVpcmUoaXRlbVJlZ2lzdHJ5ICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShpdGVtUmVnaXN0cnkub3duZXJPZihfaXRlbUlkKSAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoaXRlbVJlZ2lzdHJ5LnByaWNlT2YoX2l0ZW1JZCkgPiAwKTsKCiAgICB1aW50MjU2IHByaWNlID0gaXRlbVJlZ2lzdHJ5LnByaWNlT2YoX2l0ZW1JZCk7CiAgICBhZGRyZXNzIGl0ZW1Pd25lciA9IGl0ZW1SZWdpc3RyeS5vd25lck9mKF9pdGVtSWQpOwogICAgbGlzdEl0ZW0oX2l0ZW1JZCwgcHJpY2UsIGl0ZW1Pd25lcik7CiAgfQoKICBmdW5jdGlvbiBsaXN0TXVsdGlwbGVJdGVtcyAodWludDI1NltdIF9pdGVtSWRzLCB1aW50MjU2IF9wcmljZSwgYWRkcmVzcyBfb3duZXIpIG9ubHlBZG1pbnMoKSBleHRlcm5hbCB7CiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfaXRlbUlkcy5sZW5ndGg7IGkrKykgewogICAgICBsaXN0SXRlbShfaXRlbUlkc1tpXSwgX3ByaWNlLCBfb3duZXIpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gbGlzdEl0ZW0gKHVpbnQyNTYgX2l0ZW1JZCwgdWludDI1NiBfcHJpY2UsIGFkZHJlc3MgX293bmVyKSBvbmx5QWRtaW5zKCkgcHVibGljIHsKICAgIHJlcXVpcmUoX3ByaWNlID4gMCk7CiAgICByZXF1aXJlKHByaWNlT2ZJdGVtW19pdGVtSWRdID09IDApOwogICAgcmVxdWlyZShvd25lck9mSXRlbVtfaXRlbUlkXSA9PSBhZGRyZXNzKDApKTsKCiAgICBvd25lck9mSXRlbVtfaXRlbUlkXSA9IF9vd25lcjsKICAgIHByaWNlT2ZJdGVtW19pdGVtSWRdID0gX3ByaWNlOwogICAgc3RhcnRpbmdQcmljZU9mSXRlbVtfaXRlbUlkXSA9IF9wcmljZTsKICAgIGxpc3RlZEl0ZW1zLnB1c2goX2l0ZW1JZCk7CiAgfQoKICAvKiBCdXlpbmcgKi8KICBmdW5jdGlvbiBjYWxjdWxhdGVOZXh0UHJpY2UgKHVpbnQyNTYgX3ByaWNlKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9uZXh0UHJpY2UpIHsKICAgIGlmIChfcHJpY2UgPCBpbmNyZWFzZUxpbWl0MSkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgyMDApLmRpdig5NSk7CiAgICB9IGVsc2UgaWYgKF9wcmljZSA8IGluY3JlYXNlTGltaXQyKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDEzNSkuZGl2KDk2KTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDMpIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTI1KS5kaXYoOTcpOwogICAgfSBlbHNlIGlmIChfcHJpY2UgPCBpbmNyZWFzZUxpbWl0NCkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgxMTcpLmRpdig5Nyk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgxMTUpLmRpdig5OCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjYWxjdWxhdGVEZXZDdXQgKHVpbnQyNTYgX3ByaWNlKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9kZXZDdXQpIHsKICAgIGlmIChfcHJpY2UgPCBpbmNyZWFzZUxpbWl0MSkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCg1KS5kaXYoMTAwKTsgLy8gNSUKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDIpIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoNCkuZGl2KDEwMCk7IC8vIDQlCiAgICB9IGVsc2UgaWYgKF9wcmljZSA8IGluY3JlYXNlTGltaXQzKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDMpLmRpdigxMDApOyAvLyAzJQogICAgfSBlbHNlIGlmIChfcHJpY2UgPCBpbmNyZWFzZUxpbWl0NCkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgzKS5kaXYoMTAwKTsgLy8gMyUKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDIpLmRpdigxMDApOyAvLyAyJQogICAgfQogIH0KCiAgLyoKICAgICBCdXkgYSBlc3RhdGUgZGlyZWN0bHkgZnJvbSB0aGUgY29udHJhY3QgZm9yIHRoZSBjYWxjdWxhdGVkIHByaWNlCiAgICAgd2hpY2ggZW5zdXJlcyB0aGF0IHRoZSBvd25lciBnZXRzIGEgcHJvZml0LiAgQWxsIEVzdGF0ZXMgdGhhdAogICAgIGhhdmUgYmVlbiBsaXN0ZWQgY2FuIGJlIGJvdWdodCBieSB0aGlzIG1ldGhvZC4gVXNlciBmdW5kcyBhcmUgc2VudAogICAgIGRpcmVjdGx5IHRvIHRoZSBwcmV2aW91cyBvd25lciBhbmQgYXJlIG5ldmVyIHN0b3JlZCBpbiB0aGUgY29udHJhY3QuCiAgKi8KICBmdW5jdGlvbiBidXkgKHVpbnQyNTYgX2l0ZW1JZCkgcGF5YWJsZSBwdWJsaWMgewogICAgcmVxdWlyZShwcmljZU9mKF9pdGVtSWQpID4gMCk7CiAgICByZXF1aXJlKG93bmVyT2YoX2l0ZW1JZCkgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBwcmljZU9mKF9pdGVtSWQpKTsKICAgIHJlcXVpcmUob3duZXJPZihfaXRlbUlkKSAhPSBtc2cuc2VuZGVyKTsKICAgIHJlcXVpcmUoIWlzQ29udHJhY3QobXNnLnNlbmRlcikpOwogICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IGFkZHJlc3MoMCkpOwoKICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBvd25lck9mKF9pdGVtSWQpOwogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICB1aW50MjU2IHByaWNlID0gcHJpY2VPZihfaXRlbUlkKTsKICAgIHVpbnQyNTYgZXhjZXNzID0gbXNnLnZhbHVlLnN1YihwcmljZSk7CgogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX2l0ZW1JZCk7CiAgICBwcmljZU9mSXRlbVtfaXRlbUlkXSA9IG5leHRQcmljZU9mKF9pdGVtSWQpOwoKICAgIEJvdWdodChfaXRlbUlkLCBuZXdPd25lciwgcHJpY2UpOwogICAgU29sZChfaXRlbUlkLCBvbGRPd25lciwgcHJpY2UpOwoKICAgIC8vIERldmV2bG9wZXIncyBjdXQgd2hpY2ggaXMgbGVmdCBpbiBjb250cmFjdCBhbmQgYWNjZXNlZCBieQogICAgLy8gYHdpdGhkcmF3QWxsYCBhbmQgYHdpdGhkcmF3QW1vdW50VG9gIG1ldGhvZHMuCiAgICB1aW50MjU2IGRldkN1dCA9IGNhbGN1bGF0ZURldkN1dChwcmljZSk7CgogICAgLy8gVHJhbnNmZXIgcGF5bWVudCB0byBvbGQgb3duZXIgbWludXMgdGhlIGRldmVsb3BlcidzIGN1dC4KICAgIG9sZE93bmVyLnRyYW5zZmVyKHByaWNlLnN1YihkZXZDdXQpKTsKCiAgICBpZiAoZXhjZXNzID4gMCkgewogICAgICBuZXdPd25lci50cmFuc2ZlcihleGNlc3MpOwogICAgfQogIH0KCiAgLyogRVJDNzIxICovCiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wgX2ltcGxlbWVudHMpIHsKICAgIHJldHVybiBlcmM3MjFFbmFibGVkOwogIH0KCiAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZyBfbmFtZSkgewogICAgcmV0dXJuICJDcnlwdG9uYW1lcy5jYyI7CiAgfQoKICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcgX3N5bWJvbCkgewogICAgcmV0dXJuICJDTlMiOwogIH0KCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF90b3RhbFN1cHBseSkgewogICAgcmV0dXJuIGxpc3RlZEl0ZW1zLmxlbmd0aDsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZiAoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2JhbGFuY2UpIHsKICAgIHVpbnQyNTYgY291bnRlciA9IDA7CgogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgbGlzdGVkSXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKG93bmVyT2YobGlzdGVkSXRlbXNbaV0pID09IF9vd25lcikgewogICAgICAgIGNvdW50ZXIrKzsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBjb3VudGVyOwogIH0KCiAgZnVuY3Rpb24gb3duZXJPZiAodWludDI1NiBfaXRlbUlkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIF9vd25lcikgewogICAgcmV0dXJuIG93bmVyT2ZJdGVtW19pdGVtSWRdOwogIH0KCiAgZnVuY3Rpb24gdG9rZW5zT2YgKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2W10gX3Rva2VuSWRzKSB7CiAgICB1aW50MjU2W10gbWVtb3J5IGl0ZW1zID0gbmV3IHVpbnQyNTZbXShiYWxhbmNlT2YoX293bmVyKSk7CgogICAgdWludDI1NiBpdGVtQ291bnRlciA9IDA7CiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBsaXN0ZWRJdGVtcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAob3duZXJPZihsaXN0ZWRJdGVtc1tpXSkgPT0gX293bmVyKSB7CiAgICAgICAgaXRlbXNbaXRlbUNvdW50ZXJdID0gbGlzdGVkSXRlbXNbaV07CiAgICAgICAgaXRlbUNvdW50ZXIgKz0gMTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBpdGVtczsKICB9CgogIGZ1bmN0aW9uIHRva2VuRXhpc3RzICh1aW50MjU2IF9pdGVtSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wgX2V4aXN0cykgewogICAgcmV0dXJuIHByaWNlT2YoX2l0ZW1JZCkgPiAwOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZWRGb3IodWludDI1NiBfaXRlbUlkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIF9hcHByb3ZlZCkgewogICAgcmV0dXJuIGFwcHJvdmVkT2ZJdGVtW19pdGVtSWRdOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfaXRlbUlkKSBvbmx5RVJDNzIxKCkgcHVibGljIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBfdG8pOwogICAgcmVxdWlyZSh0b2tlbkV4aXN0cyhfaXRlbUlkKSk7CiAgICByZXF1aXJlKG93bmVyT2YoX2l0ZW1JZCkgPT0gbXNnLnNlbmRlcik7CgogICAgaWYgKF90byA9PSAwKSB7CiAgICAgIGlmIChhcHByb3ZlZE9mSXRlbVtfaXRlbUlkXSAhPSAwKSB7CiAgICAgICAgZGVsZXRlIGFwcHJvdmVkT2ZJdGVtW19pdGVtSWRdOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIDAsIF9pdGVtSWQpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBhcHByb3ZlZE9mSXRlbVtfaXRlbUlkXSA9IF90bzsKICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfaXRlbUlkKTsKICAgIH0KICB9CgogIC8qIFRyYW5zZmVycmluZyBhIGNvdW50cnkgdG8gYW5vdGhlciBvd25lciB3aWxsIGVudGl0bGUgdGhlIG5ldyBvd25lciB0aGUgcHJvZml0cyBmcm9tIGBidXlgICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2l0ZW1JZCkgb25seUVSQzcyMSgpIHB1YmxpYyB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXJPZihfaXRlbUlkKSk7CiAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfaXRlbUlkKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfaXRlbUlkKSBvbmx5RVJDNzIxKCkgcHVibGljIHsKICAgIHJlcXVpcmUoYXBwcm92ZWRGb3IoX2l0ZW1JZCkgPT0gbXNnLnNlbmRlcik7CiAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX2l0ZW1JZCk7CiAgfQoKICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2l0ZW1JZCkgaW50ZXJuYWwgewogICAgcmVxdWlyZSh0b2tlbkV4aXN0cyhfaXRlbUlkKSk7CiAgICByZXF1aXJlKG93bmVyT2YoX2l0ZW1JZCkgPT0gX2Zyb20pOwogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKHRoaXMpKTsKCiAgICBvd25lck9mSXRlbVtfaXRlbUlkXSA9IF90bzsKICAgIGFwcHJvdmVkT2ZJdGVtW19pdGVtSWRdID0gMDsKCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfaXRlbUlkKTsKICB9CgogIC8qIFJlYWQgKi8KICBmdW5jdGlvbiBpc0FkbWluIChhZGRyZXNzIF9hZG1pbikgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCBfaXNBZG1pbikgewogICAgcmV0dXJuIGFkbWluc1tfYWRtaW5dOwogIH0KCiAgZnVuY3Rpb24gc3RhcnRpbmdQcmljZU9mICh1aW50MjU2IF9pdGVtSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3N0YXJ0aW5nUHJpY2UpIHsKICAgIHJldHVybiBzdGFydGluZ1ByaWNlT2ZJdGVtW19pdGVtSWRdOwogIH0KCiAgZnVuY3Rpb24gcHJpY2VPZiAodWludDI1NiBfaXRlbUlkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9wcmljZSkgewogICAgcmV0dXJuIHByaWNlT2ZJdGVtW19pdGVtSWRdOwogIH0KCiAgZnVuY3Rpb24gbmV4dFByaWNlT2YgKHVpbnQyNTYgX2l0ZW1JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfbmV4dFByaWNlKSB7CiAgICByZXR1cm4gY2FsY3VsYXRlTmV4dFByaWNlKHByaWNlT2YoX2l0ZW1JZCkpOwogIH0KCiAgZnVuY3Rpb24gYWxsT2YgKHVpbnQyNTYgX2l0ZW1JZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfc3RhcnRpbmdQcmljZSwgdWludDI1NiBfcHJpY2UsIHVpbnQyNTYgX25leHRQcmljZSkgewogICAgcmV0dXJuIChvd25lck9mKF9pdGVtSWQpLCBzdGFydGluZ1ByaWNlT2YoX2l0ZW1JZCksIHByaWNlT2YoX2l0ZW1JZCksIG5leHRQcmljZU9mKF9pdGVtSWQpKTsKICB9CgogIGZ1bmN0aW9uIGl0ZW1zRm9yU2FsZUxpbWl0ICh1aW50MjU2IF9mcm9tLCB1aW50MjU2IF90YWtlKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2W10gX2l0ZW1zKSB7CiAgICB1aW50MjU2W10gbWVtb3J5IGl0ZW1zID0gbmV3IHVpbnQyNTZbXShfdGFrZSk7CgogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX3Rha2U7IGkrKykgewogICAgICBpdGVtc1tpXSA9IGxpc3RlZEl0ZW1zW19mcm9tICsgaV07CiAgICB9CgogICAgcmV0dXJuIGl0ZW1zOwogIH0KCiAgLyogVXRpbCAqLwogIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBhZGRyKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHVpbnQgc2l6ZTsKICAgIGFzc2VtYmx5IHsgc2l6ZSA6PSBleHRjb2Rlc2l6ZShhZGRyKSB9IC8vIHNvbGl1bS1kaXNhYmxlLWxpbmUKICAgIHJldHVybiBzaXplID4gMDsKICB9Cn0KCmludGVyZmFjZSBJSXRlbVJlZ2lzdHJ5IHsKICBmdW5jdGlvbiBpdGVtc0ZvclNhbGVMaW1pdCAodWludDI1NiBfZnJvbSwgdWludDI1NiBfdGFrZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NltdIF9pdGVtcyk7CiAgZnVuY3Rpb24gb3duZXJPZiAodWludDI1NiBfaXRlbUlkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIF9vd25lcik7CiAgZnVuY3Rpb24gcHJpY2VPZiAodWludDI1NiBfaXRlbUlkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9wcmljZSk7Cn0='.
	

]
