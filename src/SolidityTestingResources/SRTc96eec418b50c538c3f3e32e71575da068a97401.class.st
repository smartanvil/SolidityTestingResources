Class {
	#name : #SRTc96eec418b50c538c3f3e32e71575da068a97401,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc96eec418b50c538c3f3e32e71575da068a97401 >> base64 [
	^ 'LyoqCiAqICBfX19fXyAgICAgICAgICAgICBfICAgXyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAqIC8gIF9fIFwgICAgICAgICAgIHwgfCAoXykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAqIHwgLyAgXC8gX19fICBfIF9fIHwgfF8gXyBfIF9fICAgX18gXyAgX19fIF8gX18gICBfX18gXyAgIF8gCiAqIHwgfCAgICAvIF8gXHwgJ18gXHwgX198IHwgJ18gXCAvIF9gIHwvIF8gXCAnXyBcIC8gX198IHwgfCB8CiAqIHwgXF9fL1wgKF8pIHwgfCB8IHwgfF98IHwgfCB8IHwgKF98IHwgIF9fLyB8IHwgfCAoX198IHxffCB8CiAqICBcX19fXy9cX19fL3xffCB8X3xcX198X3xffCB8X3xcX18sIHxcX19ffF98IHxffFxfX198XF9fLCB8CiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX18vIHwgICAgICAgICAgICAgICAgIF9fLyB8CiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8X19fLyAgICAgICAgICAgICAgICAgfF9fXy8gCiAqCiAqLwoKLyoqCiAqIE92ZXJmbG93IGF3YXJlIHVpbnQgbWF0aCBmdW5jdGlvbnMuCiAqCiAqIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9NYWtlckRBTy9tYWtlci1vdGMvYmxvYi9tYXN0ZXIvY29udHJhY3RzL3NpbXBsZV9tYXJrZXQuc29sCiAqLwpwcmFnbWEgc29saWRpdHkgXjAuNC44Owpjb250cmFjdCBTYWZlTWF0aCB7CiAgLy9pbnRlcm5hbHMKCiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgaWYgKCFhc3NlcnRpb24pIHRocm93OwogIH0KfQoKLyoqCiAqIEVSQyAyMCB0b2tlbgogKgogKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IFRva2VuIHsKCiAgICAvLy8gQHJldHVybiB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KSB7fQoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkge30KCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9hZGRyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHdlaSB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fQoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cgp9CgovKioKICogRVJDIDIwIHRva2VuCiAqCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBUb2tlbiB7CgogICAgLyoqCiAgICAgKiBSZXZpZXdlZDoKICAgICAqIC0gSW50ZXJnZXIgb3ZlcmZsb3cgPSBPSywgY2hlY2tlZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vRGVmYXVsdCBhc3N1bWVzIHRvdGFsU3VwcGx5IGNhbid0IGJlIG92ZXIgbWF4ICgyXjI1NiAtIDEpLgogICAgICAgIC8vSWYgeW91ciB0b2tlbiBsZWF2ZXMgb3V0IHRvdGFsU3VwcGx5IGFuZCBjYW4gaXNzdWUgbW9yZSB0b2tlbnMgYXMgdGltZSBnb2VzIG9uLCB5b3UgbmVlZCB0byBjaGVjayBpZiBpdCBkb2Vzbid0IHdyYXAuCiAgICAgICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIC8vaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy9zYW1lIGFzIGFib3ZlLiBSZXBsYWNlIHRoaXMgbGluZSB3aXRoIHRoZSBmb2xsb3dpbmcgaWYgeW91IHdhbnQgdG8gcHJvdGVjdCBhZ2FpbnN0IHdyYXBwaW5nIHVpbnRzLgogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIC8vaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7Cgp9CgoKLyoqCiAqIENvbnRpbmdlbmN5IGNyb3dkc2FsZSBjcm93ZHNhbGUgY29udHJhY3QuIE1vZGlmaWVkIGZyb20gRmlyc3RCbG9vZCBjcm93ZHNhbGUgY29udHJhY3QuCiAqCiAqIFNlY3VyaXR5IGNyaXRlcmlhIGV2YWx1YXRlZCBhZ2FpbnN0IGh0dHA6Ly9ldGhlcmV1bS5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvODU1MS9tZXRob2RvbG9naWNhbC1zZWN1cml0eS1yZXZpZXctb2YtYS1zbWFydC1jb250cmFjdAogKgogKgogKi8KY29udHJhY3QgQ29udGluZ2VuY3lUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBTYWZlTWF0aCB7CiAgICAvKgogICAgICAgIE1vZGlmaWVkIHZlcnNpb24gb2YgdGhlIEZpcnN0Qmxvb2QuaW8gdG9rZW4gYW5kIHRva2VuIHNhbGUKICAgICovCiAgICAKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJDb250aW5nZW5jeSBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJDVFkiOwogICAgdWludCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQgcHVibGljIHN0YXJ0QmxvY2sgPSAzMTAwMDAwOyAvL2Nyb3dkc2FsZSBzdGFydCBibG9jawogICAgdWludCBwdWJsaWMgZW5kQmxvY2sgPSAzMjcyODAwOyAvL2Nyb3dkc2FsZSBlbmQgYmxvY2sKCiAgICAvLyBJbml0aWFsIGZvdW5kZXIgYWRkcmVzcwogICAgLy8gQWxsIGRlcG9zaXRlZCBFVEggd2lsbCBiZSBmb3J3YXJkZWQgdG8gdGhpcyBhZGRyZXNzLgogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlciA9IDB4NDQ4NWY0NGFhMWY5OWI0M0JENjQwMDU4NkMxQjJBMDJlYzI2M0VjMDsKCiAgICB1aW50IHB1YmxpYyBldGhlckNhcCA9IDg1MDAwMCAqIDEwKioxODsgLy9tYXggYW1vdW50IHJhaXNlZCBkdXJpbmcgY3Jvd2RzYWxlICg4LjVNIFVTRCB3b3J0aCBvZiBldGhlciB3aWxsIGJlIG1lYXN1cmVkIHdpdGggYSBtb3ZpbmcgYXZlcmFnZSBtYXJrZXQgcHJpY2UgYXQgYmVnaW5uaW5nIG9mIHRoZSBjcm93ZHNhbGUpCiAgICB1aW50IHB1YmxpYyB0cmFuc2ZlckxvY2t1cCA9IDM3MDI4NDsgLy90cmFuc2ZlcnMgYXJlIGxvY2tlZCBmb3IgdGhpcyBtYW55IGJsb2NrcyBhZnRlciBlbmRCbG9jayAoYXNzdW1pbmcgMTQgc2Vjb25kIGJsb2NrcywgdGhpcyBpcyAyIG1vbnRocykKICAgIHVpbnQgcHVibGljIGZvdW5kZXJMb2NrdXAgPSAxMTI2Mjg1OyAvL2ZvdW5kZXIgYWxsb2NhdGlvbiBjYW5ub3QgYmUgY3JlYXRlZCB1bnRpbCB0aGlzIG1hbnkgYmxvY2tzIGFmdGVyIGVuZEJsb2NrIChhc3N1bWluZyAxNCBzZWNvbmQgYmxvY2tzLCB0aGlzIGlzIDYgbW9udGhzKQoKICAgIHVpbnQgcHVibGljIGZvdW5kZXJBbGxvY2F0aW9uID0gMTAgKiAxMCoqMTY7IC8vMTAlIG9mIHRva2VuIHN1cHBseSBhbGxvY2F0ZWQgcG9zdC1jcm93ZHNhbGUgZm9yIHRoZSBmb3VuZGVyIGFsbG9jYXRpb24KICAgIGJvb2wgcHVibGljIGZvdW5kZXJBbGxvY2F0ZWQgPSBmYWxzZTsgLy90aGlzIHdpbGwgY2hhbmdlIHRvIHRydWUgd2hlbiB0aGUgZm91bmRlciBmdW5kIGlzIGFsbG9jYXRlZAogICAgdWludCBwdWJsaWMgcHJlc2FsZVRva2VuU3VwcGx5ID0gMDsgLy90aGlzIHdpbGwga2VlcCB0cmFjayBvZiB0aGUgdG9rZW4gc3VwcGx5IGNyZWF0ZWQgZHVyaW5nIHRoZSBjcm93ZHNhbGUKICAgIHVpbnQgcHVibGljIHByZXNhbGVFdGhlclJhaXNlZCA9IDA7IC8vdGhpcyB3aWxsIGtlZXAgdHJhY2sgb2YgdGhlIEV0aGVyIHJhaXNlZCBkdXJpbmcgdGhlIGNyb3dkc2FsZQogICAgYm9vbCBwdWJsaWMgaGFsdGVkID0gZmFsc2U7IC8vdGhlIGZvdW5kZXIgYWRkcmVzcyBjYW4gc2V0IHRoaXMgdG8gdHJ1ZSB0byBoYWx0IHRoZSBjcm93ZHNhbGUgZHVlIHRvIGVtZXJnZW5jeQogICAgZXZlbnQgQnV5KGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsIHVpbnQgZXRoLCB1aW50IGZidCk7CiAgICBldmVudCBXaXRoZHJhdyhhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLCBhZGRyZXNzIHRvLCB1aW50IGV0aCk7CiAgICBldmVudCBBbGxvY2F0ZUZvdW5kZXJUb2tlbnMoYWRkcmVzcyBpbmRleGVkIHNlbmRlcik7CgogICAgLyoqCiAgICAgKiBTZWN1cml0eSByZXZpZXcKICAgICAqCiAgICAgKiAtIEludGVnZXIgb3ZlcmZsb3c6IGRvZXMgbm90IGFwcGx5LCBibG9ja251bWJlciBjYW4ndCBncm93IHRoYXQgaGlnaAogICAgICogLSBEaXZpc2lvbiBpcyB0aGUgbGFzdCBvcGVyYXRpb24gYW5kIGNvbnN0YW50LCBzaG91bGQgbm90IGNhdXNlIGlzc3VlcwogICAgICogLSBQcmljZSBmdW5jdGlvbiBwbG90dGVkIGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vaXNzdWVzLzIKICAgICAqLwogICAgZnVuY3Rpb24gcHJpY2UoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICBpZiAoYmxvY2subnVtYmVyPj1zdGFydEJsb2NrICYmIGJsb2NrLm51bWJlcjxzdGFydEJsb2NrKzI1MCkgcmV0dXJuIDE3MDsgLy9mdW5jdGlvbigpIHsKICAgICAgICBpZiAoYmxvY2subnVtYmVyPHN0YXJ0QmxvY2sgfHwgYmxvY2subnVtYmVyPmVuZEJsb2NrKSByZXR1cm4gMTAwOyAvL2RlZmF1bHQgcHJpY2UKICAgICAgICByZXR1cm4gMTAwICsgNCooZW5kQmxvY2sgLSBibG9jay5udW1iZXIpLyhlbmRCbG9jayAtIHN0YXJ0QmxvY2sgKyAxKSo2Ny80OyAvL2Nyb3dkc2FsZSBwcmljZQogICAgfQoKICAgIC8vIHByaWNlKCkgZXhwb3NlZCBmb3IgdW5pdCB0ZXN0cwogICAgZnVuY3Rpb24gdGVzdFByaWNlKHVpbnQgYmxvY2tOdW1iZXIpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIGlmIChibG9ja051bWJlcj49c3RhcnRCbG9jayAmJiBibG9ja051bWJlcjxzdGFydEJsb2NrKzI1MCkgcmV0dXJuIDE3MDsgLy9ob3VyIG9uZQogICAgICAgIGlmIChibG9ja051bWJlcjxzdGFydEJsb2NrIHx8IGJsb2NrTnVtYmVyPmVuZEJsb2NrKSByZXR1cm4gMTAwOyAvL2RlZmF1bHQgcHJpY2UKICAgICAgICByZXR1cm4gMTAwICsgNCooZW5kQmxvY2sgLSBibG9ja051bWJlcikvKGVuZEJsb2NrIC0gc3RhcnRCbG9jayArIDEpKjY3LzQ7IC8vY3Jvd2RzYWxlIHByaWNlCiAgICB9CgogICAgLy8gQnV5IGVudHJ5IHBvaW50CiAgICBmdW5jdGlvbigpIHBheWFibGUgewogICAgICAgIGJ1eVJlY2lwaWVudChtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIE1haW4gdG9rZW4gYnV5IGZ1bmN0aW9uLgogICAgICoKICAgICAqIFNlY3VyaXR5IHJldmlldwogICAgICoKICAgICAqIC0gSW50ZWdlciBtYXRoOiBvayAtIHVzaW5nIFNhZmVNYXRoCiAgICAgKgogICAgICogLSBoYWx0IGZsYWcgYWRkZWQgLSBvawogICAgICoKICAgICAqIEFwcGxpY2FibGUgdGVzdHM6CiAgICAgKgogICAgICogLSBUZXN0IGhhbHRpbmcsIGJ1eWluZywgYW5kIGZhaWxpbmcKICAgICAqIC0gVGVzdCBidXlpbmcgb24gYmVoYWxmIG9mIGEgcmVjaXBpZW50CiAgICAgKiAtIFRlc3QgYnV5CiAgICAgKiAtIFRlc3QgdW5oYWx0aW5nLCBidXlpbmcsIGFuZCBzdWNjZWVkaW5nCiAgICAgKiAtIFRlc3QgYnV5aW5nIGFmdGVyIHRoZSBzYWxlIGVuZHMKICAgICAqCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1eVJlY2lwaWVudChhZGRyZXNzIHJlY2lwaWVudCkgcGF5YWJsZSB7CiAgICAgICAgaWYgKGJsb2NrLm51bWJlcjxzdGFydEJsb2NrIHx8IGJsb2NrLm51bWJlcj5lbmRCbG9jayB8fCBzYWZlQWRkKHByZXNhbGVFdGhlclJhaXNlZCxtc2cudmFsdWUpPmV0aGVyQ2FwIHx8IGhhbHRlZCkgdGhyb3c7CiAgICAgICAgdWludCB0b2tlbnMgPSBzYWZlTXVsKG1zZy52YWx1ZSwgcHJpY2UoKSk7CiAgICAgICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IHNhZmVBZGQoYmFsYW5jZXNbcmVjaXBpZW50XSwgdG9rZW5zKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIHRva2Vucyk7CiAgICAgICAgcHJlc2FsZUV0aGVyUmFpc2VkID0gc2FmZUFkZChwcmVzYWxlRXRoZXJSYWlzZWQsIG1zZy52YWx1ZSk7CgogICAgICAgIC8vaWYgKCFmb3VuZGVyLnNlbmQobXNnLnZhbHVlKSkgdGhyb3c7IC8vaW1tZWRpYXRlbHkgc2VuZCBFdGhlciB0byBmb3VuZGVyIGFkZHJlc3MKICAgICAgICAvL0R1ZSB0byBNZXRhbWFzayBub3Qgc2VuZGluZyBlbm91Z2ggZ2FzIHdpdGggdGhpcyBtZXRob2QsIHdlIHNlbmQgZXRoZXIgbGF0ZXIgd2l0aCB0aGUgZnVuY3Rpb24gImZvdW5kZXJXaXRoZHJhdyIgYmVsb3cKCiAgICAgICAgQnV5KHJlY2lwaWVudCwgbXNnLnZhbHVlLCB0b2tlbnMpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBmb3VuZGVyV2l0aGRyYXcodWludCBhbW91bnQpIHsKICAgICAgICAvLyBGb3VuZGVyIHRvIHJlY2VpdmUgcHJlc2FsZSBldGhlcgogICAgICAgIGlmIChtc2cuc2VuZGVyIT1mb3VuZGVyKSB0aHJvdzsKICAgICAgICBpZiAoIWZvdW5kZXIuc2VuZChhbW91bnQpKSB0aHJvdzsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB1cCBmb3VuZGVyIGFkZHJlc3MgdG9rZW4gYmFsYW5jZS4KICAgICAqCiAgICAgKiBTZWN1cml0eSByZXZpZXcKICAgICAqCiAgICAgKiAtIEludGVnZXIgbWF0aDogb2sgLSBvbmx5IGNhbGxlZCBvbmNlIHdpdGggZml4ZWQgcGFyYW1ldGVycwogICAgICoKICAgICAqIEFwcGxpY2FibGUgdGVzdHM6CiAgICAgKgogICAgICogLSBUZXN0IGJvdW50eSBhbmQgZWNvc3lzdGVtIGFsbG9jYXRpb24KICAgICAqIC0gVGVzdCBib3VudHkgYW5kIGVjb3N5c3RlbSBhbGxvY2F0aW9uIHR3aWNlCiAgICAgKgogICAgICovCiAgICBmdW5jdGlvbiBhbGxvY2F0ZUZvdW5kZXJUb2tlbnMoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIhPWZvdW5kZXIpIHRocm93OwogICAgICAgIGlmIChibG9jay5udW1iZXIgPD0gZW5kQmxvY2sgKyBmb3VuZGVyTG9ja3VwKSB0aHJvdzsKICAgICAgICBpZiAoZm91bmRlckFsbG9jYXRlZCkgdGhyb3c7CiAgICAgICAgLy9pZiAoIWJvdW50eUFsbG9jYXRlZCB8fCAhZWNvc3lzdGVtQWxsb2NhdGVkKSB0aHJvdzsgLy8gRXh0cmEgYm91bnR5IG9yIGVjb3N5c3RlbSBhbGxvY2F0aW9uIGZvciBmb3VuZGVycyBkaXNhYmxlZCBmb3IgY29udGluZ2VuY3kKICAgICAgICBiYWxhbmNlc1tmb3VuZGVyXSA9IHNhZmVBZGQoYmFsYW5jZXNbZm91bmRlcl0sIHByZXNhbGVUb2tlblN1cHBseSAqIGZvdW5kZXJBbGxvY2F0aW9uIC8gKDEgZXRoZXIpKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIHByZXNhbGVUb2tlblN1cHBseSAqIGZvdW5kZXJBbGxvY2F0aW9uIC8gKDEgZXRoZXIpKTsKICAgICAgICBmb3VuZGVyQWxsb2NhdGVkID0gdHJ1ZTsKICAgICAgICBBbGxvY2F0ZUZvdW5kZXJUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBFbWVyZ2VuY3kgU3RvcCBjcm93ZHNhbGUuCiAgICAgKgogICAgICogIEFwcGxpY2FibGUgdGVzdHM6CiAgICAgKgogICAgICogLSBUZXN0IHVuaGFsdGluZywgYnV5aW5nLCBhbmQgc3VjY2VlZGluZwogICAgICovCiAgICBmdW5jdGlvbiBoYWx0KCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyIT1mb3VuZGVyKSB0aHJvdzsKICAgICAgICBoYWx0ZWQgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHVuaGFsdCgpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciE9Zm91bmRlcikgdGhyb3c7CiAgICAgICAgaGFsdGVkID0gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGFuZ2UgZm91bmRlciBhZGRyZXNzICh3aGVyZSBjcm93ZHNhbGUgRVRIIGlzIGJlaW5nIGZvcndhcmRlZCkuCiAgICAgKgogICAgICogQXBwbGljYWJsZSB0ZXN0czoKICAgICAqCiAgICAgKiAtIFRlc3QgZm91bmRlciBjaGFuZ2UgYnkgaGFja2VyCiAgICAgKiAtIFRlc3QgZm91bmRlciBjaGFuZ2UKICAgICAqIC0gVGVzdCBmb3VuZGVyIHRva2VuIGFsbG9jYXRpb24gdHdpY2UKICAgICAqCiAgICAgKi8KCiAgICBmdW5jdGlvbiBjaGFuZ2VGb3VuZGVyKGFkZHJlc3MgbmV3Rm91bmRlcikgewogICAgICAgIGlmIChtc2cuc2VuZGVyIT1mb3VuZGVyKSB0aHJvdzsKICAgICAgICBmb3VuZGVyID0gbmV3Rm91bmRlcjsKICAgIH0KCiAgICAvKioKICAgICAqIEVSQyAyMCBTdGFuZGFyZCBUb2tlbiBpbnRlcmZhY2UgdHJhbnNmZXIgZnVuY3Rpb24KICAgICAqCiAgICAgKiBQcmV2ZW50IHRyYW5zZmVycyB1bnRpbCBmcmVlemUgcGVyaW9kIGlzIG92ZXIuCiAgICAgKgogICAgICogQXBwbGljYWJsZSB0ZXN0czoKICAgICAqCiAgICAgKiAtIFRlc3QgcmVzdHJpY3RlZCBlYXJseSB0cmFuc2ZlcgogICAgICogLSBUZXN0IHRyYW5zZmVyIGFmdGVyIHJlc3RyaWN0ZWQgcGVyaW9kCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8PSBlbmRCbG9jayArIHRyYW5zZmVyTG9ja3VwICYmIG1zZy5zZW5kZXIhPWZvdW5kZXIpIHRocm93OwogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEVSQyAyMCBTdGFuZGFyZCBUb2tlbiBpbnRlcmZhY2UgdHJhbnNmZXIgZnVuY3Rpb24KICAgICAqCiAgICAgKiBQcmV2ZW50IHRyYW5zZmVycyB1bnRpbCBmcmVlemUgcGVyaW9kIGlzIG92ZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChibG9jay5udW1iZXIgPD0gZW5kQmxvY2sgKyB0cmFuc2ZlckxvY2t1cCAmJiBtc2cuc2VuZGVyIT1mb3VuZGVyKSB0aHJvdzsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9Cgp9'.
	

]
