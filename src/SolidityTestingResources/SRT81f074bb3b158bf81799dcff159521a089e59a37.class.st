Class {
	#name : #SRT81f074bb3b158bf81799dcff159521a089e59a37,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT81f074bb3b158bf81799dcff159521a089e59a37 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCgovKioKICogQHRpdGxlIEVSQzIwCiAqLwpjb250cmFjdCBFUkMyMCB7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKICAgIAogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgTWFpbnN0cmVldFRva2VuCiAqLwpjb250cmFjdCBNYWluc3RyZWV0VG9rZW4gaXMgRVJDMjAgewogICAgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIG93bmVyTUlUOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwogICAgdWludCBwdWJsaWMgdG90YWxNSVQ7CiAgICB1aW50IHB1YmxpYyBzdGFydDsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgbWFpbnN0cmVldENyb3dkZnVuZDsKCiAgICBhZGRyZXNzIHB1YmxpYyBpbnRlbGxpc3lzOwogICAgCiAgICBib29sIHB1YmxpYyB0ZXN0aW5nOwoKICAgIG1vZGlmaWVyIGZyb21Dcm93ZGZ1bmQoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gbWFpbnN0cmVldENyb3dkZnVuZCkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgaXNBY3RpdmUoKSB7CiAgICAgICAgaWYgKGJsb2NrLnRpbWVzdGFtcCA8IHN0YXJ0KSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGlzTm90QWN0aXZlKCkgewogICAgICAgIGlmICghdGVzdGluZyAmJiBibG9jay50aW1lc3RhbXAgPj0gc3RhcnQpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgcmVjaXBpZW50SXNWYWxpZChhZGRyZXNzIHJlY2lwaWVudCkgewogICAgICAgIGlmIChyZWNpcGllbnQgPT0gMCB8fCByZWNpcGllbnQgPT0gYWRkcmVzcyh0aGlzKSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBzZW5kZXJIYXNTdWZmaWNpZW50KHVpbnQgTUlUKSB7CiAgICAgICAgaWYgKG93bmVyTUlUW21zZy5zZW5kZXJdIDwgTUlUKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHRyYW5zZmVyQXBwcm92ZWQoYWRkcmVzcyBmcm9tLCB1aW50IE1JVCkgewogICAgICAgIGlmIChhbGxvd2VkW2Zyb21dW21zZy5zZW5kZXJdIDwgTUlUIHx8IG93bmVyTUlUW2Zyb21dIDwgTUlUKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGFsbG93YW5jZUlzWmVybyhhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpIHsKICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzJiMxODA7CiAgICAgICAgLy8gYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwwKWAgaWYgaXQgaXMgbm90CiAgICAgICAgLy8gYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgICAgIGlmICgodmFsdWUgIT0gMCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bc3BlbmRlcl0gIT0gMCkpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFRva2VucyBoYXZlIGJlZW4gYWRkZWQgdG8gYW4gYWRkcmVzcyBieSB0aGUgY3Jvd2RmdW5kaW5nIGNvbnRyYWN0LgogICAgICogQHBhcmFtIHJlY2lwaWVudCBBZGRyZXNzIHJlY2VpdmluZyB0aGUgTUlULgogICAgICogQHBhcmFtIE1JVCBBbW91bnQgb2YgTUlUIGFkZGVkLgogICAgICovCiAgICBldmVudCBUb2tlbnNBZGRlZChhZGRyZXNzIGluZGV4ZWQgcmVjaXBpZW50LCB1aW50IE1JVCk7CgogICAgLyoqCiAgICAgKiBAZGV2IENvbnN0cnVjdG9yLgogICAgICogQHBhcmFtIF9tYWluc3RyZWV0Q3Jvd2RmdW5kIEFkZHJlc3Mgb2YgY3Jvd2RmdW5kIGNvbnRyYWN0LgogICAgICogQHBhcmFtIF9pbnRlbGxpc3lzIEFkZHJlc3MgdG8gcmVjZWl2ZSBpbnRlbGxpc3lzJyB0b2tlbnMuCiAgICAgKiBAcGFyYW0gX3N0YXJ0IFRpbWVzdGFtcCB3aGVuIHRoZSB0b2tlbiBiZWNvbWVzIGFjdGl2ZS4KICAgICAqLwogICAgZnVuY3Rpb24gTWFpbnN0cmVldFRva2VuKGFkZHJlc3MgX21haW5zdHJlZXRDcm93ZGZ1bmQsIGFkZHJlc3MgX2ludGVsbGlzeXMsIHVpbnQgX3N0YXJ0LCBib29sIF90ZXN0aW5nKSB7CiAgICAgICAgbWFpbnN0cmVldENyb3dkZnVuZCA9IF9tYWluc3RyZWV0Q3Jvd2RmdW5kOwogICAgICAgIGludGVsbGlzeXMgPSBfaW50ZWxsaXN5czsKICAgICAgICBzdGFydCA9IF9zdGFydDsKICAgICAgICB0ZXN0aW5nID0gX3Rlc3Rpbmc7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQGRldiBBZGQgdG8gdG9rZW4gYmFsYW5jZSBvbiBhZGRyZXNzLiBNdXN0IGJlIGZyb20gY3Jvd2RmdW5kLgogICAgICogQHBhcmFtIHJlY2lwaWVudCBBZGRyZXNzIHRvIGFkZCB0b2tlbnMgdG8uCiAgICAgKiBAcmV0dXJuIE1JVCBBbW91bnQgb2YgTUlUIHRvIGFkZC4KICAgICAqLwogICAgZnVuY3Rpb24gYWRkVG9rZW5zKGFkZHJlc3MgcmVjaXBpZW50LCB1aW50IE1JVCkgZXh0ZXJuYWwgaXNOb3RBY3RpdmUgZnJvbUNyb3dkZnVuZCB7CiAgICAgICAgb3duZXJNSVRbcmVjaXBpZW50XSArPSBNSVQ7CiAgICAgICAgdWludCBpbnRlbGxpc3lzTUlUID0gTUlUIC8gMTA7CiAgICAgICAgb3duZXJNSVRbaW50ZWxsaXN5c10gKz0gaW50ZWxsaXN5c01JVDsKICAgICAgICB0b3RhbE1JVCArPSBNSVQgKyBpbnRlbGxpc3lzTUlUOwogICAgICAgIFRva2Vuc0FkZGVkKHJlY2lwaWVudCwgTUlUKTsKICAgICAgICBUb2tlbnNBZGRlZChpbnRlbGxpc3lzLCBpbnRlbGxpc3lzTUlUKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgSW1wbGVtZW50cyBFUkMyMCB0b3RhbFN1cHBseSgpCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSkgewogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxNSVQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEltcGxlbWVudHMgRVJDMjAgYmFsYW5jZU9mKCkKICAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICBiYWxhbmNlID0gb3duZXJNSVRbX293bmVyXTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgSW1wbGVtZW50cyBFUkMyMCB0cmFuc2ZlcigpCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgaXNBY3RpdmUgcmVjaXBpZW50SXNWYWxpZChfdG8pIHNlbmRlckhhc1N1ZmZpY2llbnQoX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBvd25lck1JVFttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgb3duZXJNSVRbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBJbXBsZW1lbnRzIEVSQzIwIHRyYW5zZmVyRnJvbSgpCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGlzQWN0aXZlIHJlY2lwaWVudElzVmFsaWQoX3RvKSB0cmFuc2ZlckFwcHJvdmVkKF9mcm9tLCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIG93bmVyTUlUW190b10gKz0gX3ZhbHVlOwogICAgICAgIG93bmVyTUlUW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEltcGxlbWVudHMgRVJDMjAgYXBwcm92ZSgpCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIGlzQWN0aXZlIGFsbG93YW5jZUlzWmVybyhfc3BlbmRlciwgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgSW1wbGVtZW50cyBFUkMyMCBhbGxvd2FuY2UoKQogICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmVtYWluaW5nID0gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCn0KCgovKioKICogQHRpdGxlIE1haW5zdHJlZXRDcm93ZGZ1bmQKICovCmNvbnRyYWN0IE1haW5zdHJlZXRDcm93ZGZ1bmQgewogICAgCiAgICB1aW50IHB1YmxpYyBzdGFydDsKICAgIHVpbnQgcHVibGljIGVuZDsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBzZW5kZXJFVEg7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBzZW5kZXJNSVQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyByZWNpcGllbnRFVEg7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyByZWNpcGllbnRNSVQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyByZWNpcGllbnRFeHRyYU1JVDsKCiAgICB1aW50IHB1YmxpYyB0b3RhbEVUSDsKICAgIHVpbnQgcHVibGljIGxpbWl0RVRIOwoKICAgIHVpbnQgcHVibGljIGJvbnVzMVN0YXJ0RVRIOwogICAgdWludCBwdWJsaWMgYm9udXMyU3RhcnRFVEg7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgd2hpdGVsaXN0ZWRBZGRyZXNzZXM7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIGV4aXRBZGRyZXNzOwogICAgYWRkcmVzcyBwdWJsaWMgY3JlYXRvcjsKCiAgICBNYWluc3RyZWV0VG9rZW4gcHVibGljIG1haW5zdHJlZXRUb2tlbjsKCiAgICBldmVudCBNSVRQdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLCBhZGRyZXNzIGluZGV4ZWQgcmVjaXBpZW50LCB1aW50IEVUSCwgdWludCBNSVQpOwoKICAgIG1vZGlmaWVyIHNhbGVBY3RpdmUoKSB7CiAgICAgICAgaWYgKGFkZHJlc3MobWFpbnN0cmVldFRva2VuKSA9PSAwKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICBpZiAoYmxvY2sudGltZXN0YW1wIDwgc3RhcnQgfHwgYmxvY2sudGltZXN0YW1wID49IGVuZCkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgaWYgKHRvdGFsRVRIICsgbXNnLnZhbHVlID4gbGltaXRFVEgpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaGFzVmFsdWUoKSB7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA9PSAwKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICBfOwogICAgfQogICAgCiAgICBtb2RpZmllciBzZW5kZXJJc1doaXRlbGlzdGVkKCkgewogICAgICAgIGlmICh3aGl0ZWxpc3RlZEFkZHJlc3Nlc1ttc2cuc2VuZGVyXSAhPSB0cnVlKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHJlY2lwaWVudElzVmFsaWQoYWRkcmVzcyByZWNpcGllbnQpIHsKICAgICAgICBpZiAocmVjaXBpZW50ID09IDAgfHwgcmVjaXBpZW50ID09IGFkZHJlc3ModGhpcykpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaXNDcmVhdG9yKCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNyZWF0b3IpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgdG9rZW5Db250cmFjdE5vdFNldCgpIHsKICAgICAgICBpZiAoYWRkcmVzcyhtYWluc3RyZWV0VG9rZW4pICE9IDApIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IENvbnN0cnVjdG9yLgogICAgICogQHBhcmFtIF9zdGFydCBUaW1lc3RhbXAgb2Ygd2hlbiB0aGUgY3Jvd2RzYWxlIHdpbGwgc3RhcnQuCiAgICAgKiBAcGFyYW0gX2VuZCBUaW1lc3RhbXAgb2Ygd2hlbiB0aGUgY3Jvd2RzYWxlIHdpbGwgZW5kLgogICAgICogQHBhcmFtIF9saW1pdEVUSCBNYXhpbXVtIGFtb3VudCBvZiBFVEggdGhhdCBjYW4gYmUgc2VudCB0byB0aGUgY29udHJhY3QgaW4gdG90YWwuIERlbm9taW5hdGVkIGluIHdlaS4KICAgICAqIEBwYXJhbSBfYm9udXMxU3RhcnRFVEggQW1vdW50IG9mIEV0aGVyIChkZW5vbWluYXRlZCBpbiB3ZWkpIHRoYXQgaXMgcmVxdWlyZWQgdG8gcXVhbGlmeSBmb3IgdGhlIGZpcnN0IGJvbnVzLgogICAgICogQHBhcmFtIF9ib251czFTdGFydEVUSCBBbW91bnQgb2YgRXRoZXIgKGRlbm9taW5hdGVkIGluIHdlaSkgdGhhdCBpcyByZXF1aXJlZCB0byBxdWFsaWZ5IGZvciB0aGUgc2Vjb25kIGJvbnVzLgogICAgICogQHBhcmFtIF9leGl0QWRkcmVzcyBBZGRyZXNzIHRoYXQgYWxsIEVUSCBzaG91bGQgYmUgZm9yd2FyZGVkIHRvLgogICAgICogQHBhcmFtIHdoaXRlbGlzdDEgRmlyc3QgYWRkcmVzcyB0aGF0IGNhbiBzZW5kIEVUSC4KICAgICAqIEBwYXJhbSB3aGl0ZWxpc3QyIFNlY29uZCBhZGRyZXNzIHRoYXQgY2FuIHNlbmQgRVRILgogICAgICogQHBhcmFtIHdoaXRlbGlzdDMgVGhpcmQgYWRkcmVzcyB0aGF0IGNhbiBzZW5kIEVUSC4KICAgICAqLwogICAgZnVuY3Rpb24gTWFpbnN0cmVldENyb3dkZnVuZCh1aW50IF9zdGFydCwgdWludCBfZW5kLCB1aW50IF9saW1pdEVUSCwgdWludCBfYm9udXMxU3RhcnRFVEgsIHVpbnQgX2JvbnVzMlN0YXJ0RVRILCBhZGRyZXNzIF9leGl0QWRkcmVzcywgYWRkcmVzcyB3aGl0ZWxpc3QxLCBhZGRyZXNzIHdoaXRlbGlzdDIsIGFkZHJlc3Mgd2hpdGVsaXN0MykgewogICAgICAgIGNyZWF0b3IgPSBtc2cuc2VuZGVyOwogICAgICAgIHN0YXJ0ID0gX3N0YXJ0OwogICAgICAgIGVuZCA9IF9lbmQ7CiAgICAgICAgbGltaXRFVEggPSBfbGltaXRFVEg7CiAgICAgICAgYm9udXMxU3RhcnRFVEggPSBfYm9udXMxU3RhcnRFVEg7CiAgICAgICAgYm9udXMyU3RhcnRFVEggPSBfYm9udXMyU3RhcnRFVEg7CgogICAgICAgIHdoaXRlbGlzdGVkQWRkcmVzc2VzW3doaXRlbGlzdDFdID0gdHJ1ZTsKICAgICAgICB3aGl0ZWxpc3RlZEFkZHJlc3Nlc1t3aGl0ZWxpc3QyXSA9IHRydWU7CiAgICAgICAgd2hpdGVsaXN0ZWRBZGRyZXNzZXNbd2hpdGVsaXN0M10gPSB0cnVlOwogICAgICAgIGV4aXRBZGRyZXNzID0gX2V4aXRBZGRyZXNzOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEBkZXYgU2V0IHRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlbiBjb250cmFjdC4gTXVzdCBiZSBjYWxsZWQgYnkgY3JlYXRvciBvZiB0aGlzLiBDYW4gb25seSBiZSBzZXQgb25jZS4KICAgICAqIEBwYXJhbSBfbWFpbnN0cmVldFRva2VuIEFkZHJlc3Mgb2YgdGhlIHRva2VuIGNvbnRyYWN0LgogICAgICovCiAgICBmdW5jdGlvbiBzZXRUb2tlbkNvbnRyYWN0KE1haW5zdHJlZXRUb2tlbiBfbWFpbnN0cmVldFRva2VuKSBleHRlcm5hbCBpc0NyZWF0b3IgdG9rZW5Db250cmFjdE5vdFNldCB7CiAgICAgICAgbWFpbnN0cmVldFRva2VuID0gX21haW5zdHJlZXRUb2tlbjsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRm9yd2FyZCBFdGhlciB0byB0aGUgZXhpdCBhZGRyZXNzLiBTdG9yZSBhbGwgRVRIIGFuZCBNSVQgaW5mb3JtYXRpb24gaW4gcHVibGljIHN0YXRlIGFuZCBsb2dzLgogICAgICogQHBhcmFtIHJlY2lwaWVudCBBZGRyZXNzIHRoYXQgdG9rZW5zIHNob3VsZCBiZSBhdHRyaWJ1dGVkIHRvLgogICAgICogQHJldHVybiBNSVQgQW1vdW50IG9mIE1JVCBwdXJjaGFzZWQuIFRoaXMgZG9lcyBub3QgaW5jbHVkZSB0aGUgcGVyLXJlY2lwaWVudCBxdWFudGl0eSBib251cy4KICAgICAqLwogICAgZnVuY3Rpb24gcHVyY2hhc2VNSVQoYWRkcmVzcyByZWNpcGllbnQpIGV4dGVybmFsIHNlbmRlcklzV2hpdGVsaXN0ZWQgcGF5YWJsZSBzYWxlQWN0aXZlIGhhc1ZhbHVlIHJlY2lwaWVudElzVmFsaWQocmVjaXBpZW50KSByZXR1cm5zICh1aW50IGluY3JlYXNlTUlUKSB7CiAgICAgICAgCiAgICAgICAgLy8gQXR0ZW1wdCB0byBzZW5kIHRoZSBFVEggdG8gdGhlIGV4aXQgYWRkcmVzcy4KICAgICAgICBpZiAoIWV4aXRBZGRyZXNzLnNlbmQobXNnLnZhbHVlKSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gVXBkYXRlIEVUSCBhbW91bnRzLgogICAgICAgIHNlbmRlckVUSFttc2cuc2VuZGVyXSArPSBtc2cudmFsdWU7CiAgICAgICAgcmVjaXBpZW50RVRIW3JlY2lwaWVudF0gKz0gbXNnLnZhbHVlOwogICAgICAgIHRvdGFsRVRIICs9IG1zZy52YWx1ZTsKCiAgICAgICAgLy8gQ2FsY3VsYXRlIE1JVCBwdXJjaGFzZWQgZGlyZWN0bHkgaW4gdGhpcyB0cmFuc2FjdGlvbi4KICAgICAgICB1aW50IE1JVCA9IG1zZy52YWx1ZSAqIDEwOyAgIC8vICQxIC8gTUlUIGJhc2VkIG9uICQxMCAvIEVUSCB2YWx1ZQoKICAgICAgICAvLyBDYWxjdWxhdGUgdGltZS1iYXNlZCBib251cy4KICAgICAgICBpZiAoYmxvY2sudGltZXN0YW1wIC0gc3RhcnQgPCAxIHdlZWtzKSB7CiAgICAgICAgICAgIE1JVCArPSBNSVQgLyAxMDsgICAgLy8gMTAlIGJvbnVzCiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGJsb2NrLnRpbWVzdGFtcCAtIHN0YXJ0IDwgNSB3ZWVrcykgewogICAgICAgICAgICBNSVQgKz0gTUlUIC8gMjA7ICAgIC8vIDUlIGJvbnVzCiAgICAgICAgfQoKICAgICAgICAvLyBSZWNvcmQgZGlyZWN0bHktcHVyY2hhc2VkIE1JVC4KICAgICAgICBzZW5kZXJNSVRbbXNnLnNlbmRlcl0gKz0gTUlUOwogICAgICAgIHJlY2lwaWVudE1JVFtyZWNpcGllbnRdICs9IE1JVDsKCiAgICAgICAgLy8gU3RvcmUgcHJldmlvdXMgdmFsdWUtYmFzZWQgYm9udXMgZm9yIHRoaXMgYWRkcmVzcy4KICAgICAgICB1aW50IG9sZEV4dHJhID0gcmVjaXBpZW50RXh0cmFNSVRbcmVjaXBpZW50XTsKCiAgICAgICAgLy8gQ2FsY3VsYXRlIG5ldyB2YWx1ZS1iYXNlZCBib251cy4KICAgICAgICBpZiAocmVjaXBpZW50RVRIW3JlY2lwaWVudF0gPj0gYm9udXMyU3RhcnRFVEgpIHsKICAgICAgICAgICAgcmVjaXBpZW50RXh0cmFNSVRbcmVjaXBpZW50XSA9IChyZWNpcGllbnRNSVRbcmVjaXBpZW50XSAqIDgpIC8gMTAwOyAgICAgIC8vIDglIGJvbnVzCiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHJlY2lwaWVudEVUSFtyZWNpcGllbnRdID49IGJvbnVzMVN0YXJ0RVRIKSB7CiAgICAgICAgICAgIHJlY2lwaWVudEV4dHJhTUlUW3JlY2lwaWVudF0gPSAocmVjaXBpZW50TUlUW3JlY2lwaWVudF0gKiA0KSAvIDEwMDsgICAgICAvLyA0JSBib251cwogICAgICAgIH0KCiAgICAgICAgLy8gQ2FsY3VsYXRlIE1JVCBpbmNyZWFzZSBmb3IgdGhpcyBhZGRyZXNzIGZyb20gdGhpcyB0cmFuc2FjdGlvbi4KICAgICAgICBpbmNyZWFzZU1JVCA9IE1JVCArIChyZWNpcGllbnRFeHRyYU1JVFtyZWNpcGllbnRdIC0gb2xkRXh0cmEpOwoKICAgICAgICAvLyBUZWxsIHRoZSB0b2tlbiBjb250cmFjdCBhYm91dCB0aGUgaW5jcmVhc2UuCiAgICAgICAgbWFpbnN0cmVldFRva2VuLmFkZFRva2VucyhyZWNpcGllbnQsIGluY3JlYXNlTUlUKTsKCiAgICAgICAgLy8gTG9nIHRoaXMgcHVyY2hhc2UuCiAgICAgICAgTUlUUHVyY2hhc2UobXNnLnNlbmRlciwgcmVjaXBpZW50LCBtc2cudmFsdWUsIGluY3JlYXNlTUlUKTsKICAgIH0KCn0='.
	

]
