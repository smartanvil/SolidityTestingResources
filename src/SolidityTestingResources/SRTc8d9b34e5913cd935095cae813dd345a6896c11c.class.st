Class {
	#name : #SRTc8d9b34e5913cd935095cae813dd345a6896c11c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc8d9b34e5913cd935095cae813dd345a6896c11c >> base64 [
	^ 'Ly8gQXBwaWNzIHRva2Vuc2FsZSBzbWFydCBjb250cmFjdC4KLy8gRGV2ZWxvcGVkIGJ5IFBoZW5vbS5UZWFtIDw8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjBiNjI2NTZkNjQ0YjdiNjM2ZTY1NjQ2NjI1N2Y2ZTZhNjYiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L3NwYW4+PgoKcHJhZ21hIHNvbGlkaXR5IF4gMC40LjE1OwoKLyoqCiAqICAgQHRpdGxlIFNhZmVNYXRoCiAqICAgQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICAgIGFzc2VydChiID4gMCk7CiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQoKCi8qKgogKiAgIEB0aXRsZSBFUkMyMAogKiAgIEBkZXYgU3RhbmRhcnQgRVJDMjAgdG9rZW4gaW50ZXJmYWNlCiAqLwpjb250cmFjdCBFUkMyMCB7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDA7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCi8qKgoqICAgQHRpdGxlIEFwcGljc0lDTyBjb250cmFjdCAgLSB0YWtlcyBmdW5kcyBmcm9tIHVzZXJzIGFuZCBpc3N1ZXMgdG9rZW5zCiovCmNvbnRyYWN0IEFwcGljc0lDTyB7CiAgICAvLyBYQVAgLSBBcHBpY3MgdG9rZW4gY29udHJhY3QKICAgIEFwcGljc1Rva2VuIHB1YmxpYyBYQVAgPSBuZXcgQXBwaWNzVG9rZW4odGhpcyk7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gc3RyaW5nKSBwdWJsaWMgIGtleXM7CgogICAgLy8gVG9rZW4gcHJpY2UgcGFyYW1ldGVycwogICAgLy8gVGhlc2UgcGFyYW1ldGVzIGNhbiBiZSBjaGFuZ2VkIG9ubHkgYnkgbWFuYWdlciBvZiBjb250cmFjdAogICAgdWludDI1NiBwdWJsaWMgUmF0ZV9FdGggPSA3MDA7IC8vIFJhdGUgVVNEIHBlciBFVEgKICAgIHVpbnQyNTYgcHVibGljIFRva2Vuc19QZXJfRG9sbGFyX051bWVyYXRvciA9IDIwOy8vIEFwcGljcyB0b2tlbiA9IDAuMTUkCiAgICB1aW50MjU2IHB1YmxpYyBUb2tlbnNfUGVyX0RvbGxhcl9EZW5vbWluYXRvciA9IDM7Ly8gQXBwaWNzIHRva2VuID0gMC4xNSQKICAgIAogICAgLy8gQ3Jvd2RmdW5kaW5nIHBhcmFtZXRlcnMKICAgIHVpbnQyNTYgY29uc3RhbnQgQXBwaWNzUGFydCA9IDIwOyAvLyAyMCUgb2YgVG90YWxTdXBwbHkgZm9yIEFwcGljcwogICAgdWludDI1NiBjb25zdGFudCBFY29zeXN0ZW1QYXJ0ID0gMjA7IC8vIDIwJSBvZiBUb3RhbFN1cHBseSBmb3IgRWNvc3lzdGVtCiAgICB1aW50MjU2IGNvbnN0YW50IFN0ZWVtaXRQYXJ0ID0gNTsgLy8gNSUgb2YgVG90YWxTdXBwbHkgZm9yIFN0ZWVtaXQKICAgIHVpbnQyNTYgY29uc3RhbnQgQm91bnR5UGFydCA9IDU7IC8vIDUlIG9mIFRvdGFsU3VwcGx5IGZvciBCb3VudHkKICAgIHVpbnQyNTYgY29uc3RhbnQgaWNvUGFydCA9IDUwOyAvLyA1MCUgb2YgVG90YWxTdXBwbHkgZm9yIFB1YmxpY0lDTyBhbmQgUHJpdmF0ZU9mZmVyCiAgICB1aW50MjU2IGNvbnN0YW50IFByZVNhbGVIYXJkQ2FwID0gMTI1MDAwMDAqMWUxODsKICAgIHVpbnQyNTYgY29uc3RhbnQgUm91bmRBSGFyZENhcCA9IDI1MDAwMDAwKjFlMTg7CiAgICB1aW50MjU2IGNvbnN0YW50IFJvdW5kQkhhcmRDYXAgPSAzMDAwMDAwMCoxZTE4OwogICAgdWludDI1NiBjb25zdGFudCBSb3VuZENIYXJkQ2FwID0gMzAwMDAwMDAqMWUxODsKICAgIHVpbnQyNTYgY29uc3RhbnQgUm91bmRESGFyZENhcCA9IDIyNTAwMDAwKjFlMTg7CiAgICB1aW50MjU2IHB1YmxpYyBQcmVTYWxlU29sZCA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyBSb3VuZEFTb2xkID0gMDsKICAgIHVpbnQyNTYgcHVibGljIFJvdW5kQlNvbGQgPSAwOwogICAgdWludDI1NiBwdWJsaWMgUm91bmRDU29sZCA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyBSb3VuZERTb2xkID0gMDsgICAgICAgIAogICAgdWludDI1NiBjb25zdGFudCBURU5USE9VU0VORExJTUlUID0gNjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY7CiAgICAvLyBPdXRwdXQgZXRoZXJldW0gYWRkcmVzc2VzCiAgICBhZGRyZXNzIHB1YmxpYyBDb21wYW55OwogICAgYWRkcmVzcyBwdWJsaWMgQXBwaWNzRnVuZDsKICAgIGFkZHJlc3MgcHVibGljIEVjb3N5c3RlbUZ1bmQ7CiAgICBhZGRyZXNzIHB1YmxpYyBTdGVlbWl0RnVuZDsKICAgIGFkZHJlc3MgcHVibGljIEJvdW50eUZ1bmQ7CiAgICBhZGRyZXNzIHB1YmxpYyBNYW5hZ2VyOyAvLyBNYW5hZ2VyIGNvbnRyb2xzIGNvbnRyYWN0CiAgICBhZGRyZXNzIHB1YmxpYyBDb250cm9sbGVyX0FkZHJlc3MxOyAvLyBGaXJzdCBhZGRyZXNzIHRoYXQgaXMgdXNlZCB0byBidXkgdG9rZW5zIGZvciBvdGhlciBjcnlwdG9zCiAgICBhZGRyZXNzIHB1YmxpYyBDb250cm9sbGVyX0FkZHJlc3MyOyAvLyBTZWNvbmQgYWRkcmVzcyB0aGF0IGlzIHVzZWQgdG8gYnV5IHRva2VucyBmb3Igb3RoZXIgY3J5cHRvcwogICAgYWRkcmVzcyBwdWJsaWMgQ29udHJvbGxlcl9BZGRyZXNzMzsgLy8gVGhpcmQgYWRkcmVzcyB0aGF0IGlzIHVzZWQgdG8gYnV5IHRva2VucyBmb3Igb3RoZXIgY3J5cHRvcwogICAgYWRkcmVzcyBwdWJsaWMgT3JhY2xlOyAvLyBPcmFjbGUgYWRkcmVzcwoKICAgIC8vIFBvc3NpYmxlIElDTyBzdGF0dXNlcwogICAgZW51bSBTdGF0dXNJQ08gewogICAgICAgIENyZWF0ZWQsCiAgICAgICAgUHJlU2FsZVN0YXJ0ZWQsCiAgICAgICAgUHJlU2FsZVBhdXNlZCwKICAgICAgICBQcmVTYWxlRmluaXNoZWQsCiAgICAgICAgUm91bmRBU3RhcnRlZCwKICAgICAgICBSb3VuZEFQYXVzZWQsCiAgICAgICAgUm91bmRBRmluaXNoZWQsCiAgICAgICAgUm91bmRCU3RhcnRlZCwKICAgICAgICBSb3VuZEJQYXVzZWQsCiAgICAgICAgUm91bmRCRmluaXNoZWQsCiAgICAgICAgUm91bmRDU3RhcnRlZCwKICAgICAgICBSb3VuZENQYXVzZWQsCiAgICAgICAgUm91bmRDRmluaXNoZWQsCiAgICAgICAgUm91bmREU3RhcnRlZCwKICAgICAgICBSb3VuZERQYXVzZWQsCiAgICAgICAgUm91bmRERmluaXNoZWQKICAgIH0KCiAgICBTdGF0dXNJQ08gc3RhdHVzSUNPID0gU3RhdHVzSUNPLkNyZWF0ZWQ7CgogICAgLy8gRXZlbnRzIExvZwogICAgZXZlbnQgTG9nU3RhcnRQcmVTYWxlUm91bmQoKTsKICAgIGV2ZW50IExvZ1BhdXNlUHJlU2FsZVJvdW5kKCk7CiAgICBldmVudCBMb2dGaW5pc2hQcmVTYWxlUm91bmQoCiAgICAgICAgYWRkcmVzcyBBcHBpY3NGdW5kLCAKICAgICAgICBhZGRyZXNzIEVjb3N5c3RlbUZ1bmQsCiAgICAgICAgYWRkcmVzcyBTdGVlbWl0RnVuZCwKICAgICAgICBhZGRyZXNzIEJvdW50eUZ1bmQKICAgICk7CiAgICBldmVudCBMb2dTdGFydFJvdW5kQSgpOwogICAgZXZlbnQgTG9nUGF1c2VSb3VuZEEoKTsKICAgIGV2ZW50IExvZ0ZpbmlzaFJvdW5kQSgKICAgICAgICBhZGRyZXNzIEFwcGljc0Z1bmQsIAogICAgICAgIGFkZHJlc3MgRWNvc3lzdGVtRnVuZCwKICAgICAgICBhZGRyZXNzIFN0ZWVtaXRGdW5kLAogICAgICAgIGFkZHJlc3MgQm91bnR5RnVuZAogICAgKTsKICAgIGV2ZW50IExvZ1N0YXJ0Um91bmRCKCk7CiAgICBldmVudCBMb2dQYXVzZVJvdW5kQigpOwogICAgZXZlbnQgTG9nRmluaXNoUm91bmRCKAogICAgICAgIGFkZHJlc3MgQXBwaWNzRnVuZCwgCiAgICAgICAgYWRkcmVzcyBFY29zeXN0ZW1GdW5kLAogICAgICAgIGFkZHJlc3MgU3RlZW1pdEZ1bmQsCiAgICAgICAgYWRkcmVzcyBCb3VudHlGdW5kCiAgICApOwogICAgZXZlbnQgTG9nU3RhcnRSb3VuZEMoKTsKICAgIGV2ZW50IExvZ1BhdXNlUm91bmRDKCk7CiAgICBldmVudCBMb2dGaW5pc2hSb3VuZEMoCiAgICAgICAgYWRkcmVzcyBBcHBpY3NGdW5kLCAKICAgICAgICBhZGRyZXNzIEVjb3N5c3RlbUZ1bmQsCiAgICAgICAgYWRkcmVzcyBTdGVlbWl0RnVuZCwKICAgICAgICBhZGRyZXNzIEJvdW50eUZ1bmQKICAgICk7CiAgICBldmVudCBMb2dTdGFydFJvdW5kRCgpOwogICAgZXZlbnQgTG9nUGF1c2VSb3VuZEQoKTsKICAgIGV2ZW50IExvZ0ZpbmlzaFJvdW5kRCgKICAgICAgICBhZGRyZXNzIEFwcGljc0Z1bmQsIAogICAgICAgIGFkZHJlc3MgRWNvc3lzdGVtRnVuZCwKICAgICAgICBhZGRyZXNzIFN0ZWVtaXRGdW5kLAogICAgICAgIGFkZHJlc3MgQm91bnR5RnVuZAogICAgKTsKICAgIGV2ZW50IExvZ0J1eUZvckludmVzdG9yKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQyNTYgYWlkVmFsdWUsIHN0cmluZyB0eEhhc2gpOwogICAgZXZlbnQgTG9nUmVnaXN0ZXIoYWRkcmVzcyBpbnZlc3Rvciwgc3RyaW5nIGtleSk7CgogICAgLy8gTW9kaWZpZXJzCiAgICAvLyBBbGxvd3MgZXhlY3V0aW9uIGJ5IHRoZSBvcmFjbGUgb25seQogICAgbW9kaWZpZXIgb3JhY2xlT25seSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IE9yYWNsZSk7CiAgICAgICAgXzsKICAgIH0KICAgIC8vIEFsbG93cyBleGVjdXRpb24gYnkgdGhlIGNvbnRyYWN0IG1hbmFnZXIgb25seQogICAgbW9kaWZpZXIgbWFuYWdlck9ubHkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBNYW5hZ2VyKTsKICAgICAgICBfOwogICAgfQogICAgLy8gQWxsb3dzIGV4ZWN1dGlvbiBieSB0aGUgb25lIG9mIGNvbnRyb2xsZXJzIG9ubHkKICAgIG1vZGlmaWVyIGNvbnRyb2xsZXJzT25seSB7CiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgKG1zZy5zZW5kZXIgPT0gQ29udHJvbGxlcl9BZGRyZXNzMSkgfHwgCiAgICAgICAgICAgIChtc2cuc2VuZGVyID09IENvbnRyb2xsZXJfQWRkcmVzczIpIHx8IAogICAgICAgICAgICAobXNnLnNlbmRlciA9PSBDb250cm9sbGVyX0FkZHJlc3MzKQogICAgICAgICk7CiAgICAgICAgXzsKICAgIH0KICAgIC8vIEFsbG93cyBleGVjdXRpb24gaWYgdGhlIGFueSByb3VuZCBzdGFydGVkIG9ubHkKICAgIG1vZGlmaWVyIHN0YXJ0ZWRPbmx5IHsKICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAoc3RhdHVzSUNPID09IFN0YXR1c0lDTy5QcmVTYWxlU3RhcnRlZCkgfHwgCiAgICAgICAgICAgIChzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlJvdW5kQVN0YXJ0ZWQpIHx8IAogICAgICAgICAgICAoc3RhdHVzSUNPID09IFN0YXR1c0lDTy5Sb3VuZEJTdGFydGVkKSB8fAogICAgICAgICAgICAoc3RhdHVzSUNPID09IFN0YXR1c0lDTy5Sb3VuZENTdGFydGVkKSB8fAogICAgICAgICAgICAoc3RhdHVzSUNPID09IFN0YXR1c0lDTy5Sb3VuZERTdGFydGVkKQogICAgICAgICk7CiAgICAgICAgXzsKICAgIH0KICAgIC8vIEFsbG93cyBleGVjdXRpb24gaWYgdGhlIGFueSByb3VuZCBmaW5pc2hlZCBvbmx5CiAgICBtb2RpZmllciBmaW5pc2hlZE9ubHkgewogICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIChzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlByZVNhbGVGaW5pc2hlZCkgfHwgCiAgICAgICAgICAgIChzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlJvdW5kQUZpbmlzaGVkKSB8fCAKICAgICAgICAgICAgKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUm91bmRCRmluaXNoZWQpIHx8CiAgICAgICAgICAgIChzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlJvdW5kQ0ZpbmlzaGVkKSB8fAogICAgICAgICAgICAoc3RhdHVzSUNPID09IFN0YXR1c0lDTy5Sb3VuZERGaW5pc2hlZCkKICAgICAgICApOwogICAgICAgIF87CiAgICB9CgoKICAgLyoqCiAgICAqICAgQGRldiBDb250cmFjdCBjb25zdHJ1Y3RvciBmdW5jdGlvbgogICAgKi8KICAgIGZ1bmN0aW9uIEFwcGljc0lDTygKICAgICAgICBhZGRyZXNzIF9Db21wYW55LAogICAgICAgIGFkZHJlc3MgX0FwcGljc0Z1bmQsCiAgICAgICAgYWRkcmVzcyBfRWNvc3lzdGVtRnVuZCwKICAgICAgICBhZGRyZXNzIF9TdGVlbWl0RnVuZCwKICAgICAgICBhZGRyZXNzIF9Cb3VudHlGdW5kLAogICAgICAgIGFkZHJlc3MgX01hbmFnZXIsCiAgICAgICAgYWRkcmVzcyBfQ29udHJvbGxlcl9BZGRyZXNzMSwKICAgICAgICBhZGRyZXNzIF9Db250cm9sbGVyX0FkZHJlc3MyLAogICAgICAgIGFkZHJlc3MgX0NvbnRyb2xsZXJfQWRkcmVzczMsCiAgICAgICAgYWRkcmVzcyBfT3JhY2xlCiAgICApCiAgICAgICAgcHVibGljIHsKICAgICAgICBDb21wYW55ID0gX0NvbXBhbnk7CiAgICAgICAgQXBwaWNzRnVuZCA9IF9BcHBpY3NGdW5kOwogICAgICAgIEVjb3N5c3RlbUZ1bmQgPSBfRWNvc3lzdGVtRnVuZDsKICAgICAgICBTdGVlbWl0RnVuZCA9IF9TdGVlbWl0RnVuZDsKICAgICAgICBCb3VudHlGdW5kID0gX0JvdW50eUZ1bmQ7CiAgICAgICAgTWFuYWdlciA9IF9NYW5hZ2VyOwogICAgICAgIENvbnRyb2xsZXJfQWRkcmVzczEgPSBfQ29udHJvbGxlcl9BZGRyZXNzMTsKICAgICAgICBDb250cm9sbGVyX0FkZHJlc3MyID0gX0NvbnRyb2xsZXJfQWRkcmVzczI7CiAgICAgICAgQ29udHJvbGxlcl9BZGRyZXNzMyA9IF9Db250cm9sbGVyX0FkZHJlc3MzOwogICAgICAgIE9yYWNsZSA9IF9PcmFjbGU7CiAgICB9CgogICAvKioKICAgICogICBAZGV2IFNldCByYXRlIG9mIEVUSCBhbmQgdXBkYXRlIHRva2VuIHByaWNlCiAgICAqICAgQHBhcmFtIF9SYXRlRXRoICAgICAgIGN1cnJlbnQgRVRIIHJhdGUKICAgICovCiAgICBmdW5jdGlvbiBzZXRSYXRlKHVpbnQyNTYgX1JhdGVFdGgpIGV4dGVybmFsIG9yYWNsZU9ubHkgewogICAgICAgIFJhdGVfRXRoID0gX1JhdGVFdGg7CiAgICB9CgogICAvKioKICAgICogICBAZGV2IFN0YXJ0IFByZS1TYWxlCiAgICAqICAgU2V0IElDTyBzdGF0dXMgdG8gUHJlU2FsZVN0YXJ0ZWQKICAgICovCiAgICBmdW5jdGlvbiBzdGFydFByZVNhbGVSb3VuZCgpIGV4dGVybmFsIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uQ3JlYXRlZCB8fCBzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlByZVNhbGVQYXVzZWQpOwogICAgICAgIHN0YXR1c0lDTyA9IFN0YXR1c0lDTy5QcmVTYWxlU3RhcnRlZDsKICAgICAgICBMb2dTdGFydFByZVNhbGVSb3VuZCgpOwogICAgfQoKICAgLyoqCiAgICAqICAgQGRldiBQYXVzZSBQcmUtU2FsZQogICAgKiAgIFNldCBJY28gc3RhdHVzIHRvIFByZVNhbGVQYXVzZWQKICAgICovCiAgICBmdW5jdGlvbiBwYXVzZVByZVNhbGVSb3VuZCgpIGV4dGVybmFsIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUHJlU2FsZVN0YXJ0ZWQpOwogICAgICAgIHN0YXR1c0lDTyA9IFN0YXR1c0lDTy5QcmVTYWxlUGF1c2VkOwogICAgICAgIExvZ1BhdXNlUHJlU2FsZVJvdW5kKCk7CiAgICB9CgoKICAgLyoqCiAgICAqICAgQGRldiBGaW5pc2ggUHJlLVNhbGUgYW5kIG1pbnQgdG9rZW5zIGZvciBBcHBpY3NGdW5kLCBFY29zeXN0ZW1GdW5kLCBTdGVlbWl0RnVuZCwKICAgICAgICBSZXdhcmRGdW5kIGFuZCBSZWZlcnJhbEZ1bmQKICAgICogICBTZXQgSWNvIHN0YXR1cyB0byBQcmVTYWxlRmluaXNoZWQKICAgICovCiAgICBmdW5jdGlvbiBmaW5pc2hQcmVTYWxlUm91bmQoKSBleHRlcm5hbCBtYW5hZ2VyT25seSB7CiAgICAgICAgcmVxdWlyZShzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlByZVNhbGVTdGFydGVkIHx8IHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUHJlU2FsZVBhdXNlZCk7CiAgICAgICAgdWludDI1NiB0b3RhbEFtb3VudCA9IFByZVNhbGVTb2xkLm11bCgxMDApLmRpdihpY29QYXJ0KTsKICAgICAgICBYQVAubWludFRva2VucyhBcHBpY3NGdW5kLCBBcHBpY3NQYXJ0Lm11bCh0b3RhbEFtb3VudCkuZGl2KDEwMCkpOwogICAgICAgIFhBUC5taW50VG9rZW5zKEVjb3N5c3RlbUZ1bmQsIEVjb3N5c3RlbVBhcnQubXVsKHRvdGFsQW1vdW50KS5kaXYoMTAwKSk7CiAgICAgICAgWEFQLm1pbnRUb2tlbnMoU3RlZW1pdEZ1bmQsIFN0ZWVtaXRQYXJ0Lm11bCh0b3RhbEFtb3VudCkuZGl2KDEwMCkpOwogICAgICAgIFhBUC5taW50VG9rZW5zKEJvdW50eUZ1bmQsIEJvdW50eVBhcnQubXVsKHRvdGFsQW1vdW50KS5kaXYoMTAwKSk7CiAgICAgICAgc3RhdHVzSUNPID0gU3RhdHVzSUNPLlByZVNhbGVGaW5pc2hlZDsKICAgICAgICBMb2dGaW5pc2hQcmVTYWxlUm91bmQoQXBwaWNzRnVuZCwgRWNvc3lzdGVtRnVuZCwgU3RlZW1pdEZ1bmQsIEJvdW50eUZ1bmQpOwoKICAgIH0KICAgCiAgIC8qKgogICAgKiAgIEBkZXYgU3RhcnQgUm91bmQgQQogICAgKiAgIFNldCBJQ08gc3RhdHVzIHRvIFJvdW5kQVN0YXJ0ZWQKICAgICovCiAgICBmdW5jdGlvbiBzdGFydFJvdW5kQSgpIGV4dGVybmFsIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUHJlU2FsZUZpbmlzaGVkIHx8IHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUm91bmRBUGF1c2VkKTsKICAgICAgICBzdGF0dXNJQ08gPSBTdGF0dXNJQ08uUm91bmRBU3RhcnRlZDsKICAgICAgICBMb2dTdGFydFJvdW5kQSgpOwogICAgfQoKICAgLyoqCiAgICAqICAgQGRldiBQYXVzZSBSb3VuZCBBCiAgICAqICAgU2V0IEljbyBzdGF0dXMgdG8gUm91bmRBUGF1c2VkCiAgICAqLwogICAgZnVuY3Rpb24gcGF1c2VSb3VuZEEoKSBleHRlcm5hbCBtYW5hZ2VyT25seSB7CiAgICAgICAgcmVxdWlyZShzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlJvdW5kQVN0YXJ0ZWQpOwogICAgICAgIHN0YXR1c0lDTyA9IFN0YXR1c0lDTy5Sb3VuZEFQYXVzZWQ7CiAgICAgICAgTG9nUGF1c2VSb3VuZEEoKTsKICAgIH0KCgogICAvKioKICAgICogICBAZGV2IEZpbmlzaCBSb3VuZCBBIGFuZCBtaW50IHRva2VucyBBcHBpY3NGdW5kLCBFY29zeXN0ZW1GdW5kLCBTdGVlbWl0RnVuZCwKICAgICAgICBSZXdhcmRGdW5kIGFuZCBSZWZlcnJhbEZ1bmQKICAgICogICBTZXQgSWNvIHN0YXR1cyB0byBSb3VuZEFGaW5pc2hlZAogICAgKi8KICAgIGZ1bmN0aW9uIGZpbmlzaFJvdW5kQSgpIGV4dGVybmFsIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUm91bmRBU3RhcnRlZCB8fCBzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlJvdW5kQVBhdXNlZCk7CiAgICAgICAgdWludDI1NiB0b3RhbEFtb3VudCA9IFJvdW5kQVNvbGQubXVsKDEwMCkuZGl2KGljb1BhcnQpOwogICAgICAgIFhBUC5taW50VG9rZW5zKEFwcGljc0Z1bmQsIEFwcGljc1BhcnQubXVsKHRvdGFsQW1vdW50KS5kaXYoMTAwKSk7CiAgICAgICAgWEFQLm1pbnRUb2tlbnMoRWNvc3lzdGVtRnVuZCwgRWNvc3lzdGVtUGFydC5tdWwodG90YWxBbW91bnQpLmRpdigxMDApKTsKICAgICAgICBYQVAubWludFRva2VucyhTdGVlbWl0RnVuZCwgU3RlZW1pdFBhcnQubXVsKHRvdGFsQW1vdW50KS5kaXYoMTAwKSk7CiAgICAgICAgWEFQLm1pbnRUb2tlbnMoQm91bnR5RnVuZCwgQm91bnR5UGFydC5tdWwodG90YWxBbW91bnQpLmRpdigxMDApKTsKICAgICAgICBzdGF0dXNJQ08gPSBTdGF0dXNJQ08uUm91bmRBRmluaXNoZWQ7CiAgICAgICAgTG9nRmluaXNoUm91bmRBKEFwcGljc0Z1bmQsIEVjb3N5c3RlbUZ1bmQsIFN0ZWVtaXRGdW5kLCBCb3VudHlGdW5kKTsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgU3RhcnQgUm91bmQgQgogICAgKiAgIFNldCBJQ08gc3RhdHVzIHRvIFJvdW5kQlN0YXJ0ZWQKICAgICovCiAgICBmdW5jdGlvbiBzdGFydFJvdW5kQigpIGV4dGVybmFsIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUm91bmRBRmluaXNoZWQgfHwgc3RhdHVzSUNPID09IFN0YXR1c0lDTy5Sb3VuZEJQYXVzZWQpOwogICAgICAgIHN0YXR1c0lDTyA9IFN0YXR1c0lDTy5Sb3VuZEJTdGFydGVkOwogICAgICAgIExvZ1N0YXJ0Um91bmRCKCk7CiAgICB9CgogICAvKioKICAgICogICBAZGV2IFBhdXNlIFJvdW5kIEIKICAgICogICBTZXQgSWNvIHN0YXR1cyB0byBSb3VuZEJQYXVzZWQKICAgICovCiAgICBmdW5jdGlvbiBwYXVzZVJvdW5kQigpIGV4dGVybmFsIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUm91bmRCU3RhcnRlZCk7CiAgICAgICAgc3RhdHVzSUNPID0gU3RhdHVzSUNPLlJvdW5kQlBhdXNlZDsKICAgICAgICBMb2dQYXVzZVJvdW5kQigpOwogICAgfQoKCiAgIC8qKgogICAgKiAgIEBkZXYgRmluaXNoIFJvdW5kIEIgYW5kIG1pbnQgdG9rZW5zIEFwcGljc0Z1bmQsIEVjb3N5c3RlbUZ1bmQsIFN0ZWVtaXRGdW5kLAogICAgICAgIFJld2FyZEZ1bmQgYW5kIFJlZmVycmFsRnVuZAogICAgKiAgIFNldCBJY28gc3RhdHVzIHRvIFJvdW5kQkZpbmlzaGVkCiAgICAqLwogICAgZnVuY3Rpb24gZmluaXNoUm91bmRCKCkgZXh0ZXJuYWwgbWFuYWdlck9ubHkgewogICAgICAgIHJlcXVpcmUoc3RhdHVzSUNPID09IFN0YXR1c0lDTy5Sb3VuZEJTdGFydGVkIHx8IHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUm91bmRCUGF1c2VkKTsKICAgICAgICB1aW50MjU2IHRvdGFsQW1vdW50ID0gUm91bmRCU29sZC5tdWwoMTAwKS5kaXYoaWNvUGFydCk7CiAgICAgICAgWEFQLm1pbnRUb2tlbnMoQXBwaWNzRnVuZCwgQXBwaWNzUGFydC5tdWwodG90YWxBbW91bnQpLmRpdigxMDApKTsKICAgICAgICBYQVAubWludFRva2VucyhFY29zeXN0ZW1GdW5kLCBFY29zeXN0ZW1QYXJ0Lm11bCh0b3RhbEFtb3VudCkuZGl2KDEwMCkpOwogICAgICAgIFhBUC5taW50VG9rZW5zKFN0ZWVtaXRGdW5kLCBTdGVlbWl0UGFydC5tdWwodG90YWxBbW91bnQpLmRpdigxMDApKTsKICAgICAgICBYQVAubWludFRva2VucyhCb3VudHlGdW5kLCBCb3VudHlQYXJ0Lm11bCh0b3RhbEFtb3VudCkuZGl2KDEwMCkpOwogICAgICAgIHN0YXR1c0lDTyA9IFN0YXR1c0lDTy5Sb3VuZEJGaW5pc2hlZDsKICAgICAgICBMb2dGaW5pc2hSb3VuZEIoQXBwaWNzRnVuZCwgRWNvc3lzdGVtRnVuZCwgU3RlZW1pdEZ1bmQsIEJvdW50eUZ1bmQpOwogICAgfQoKICAgLyoqCiAgICAqICAgQGRldiBTdGFydCBSb3VuZCBDCiAgICAqICAgU2V0IElDTyBzdGF0dXMgdG8gUm91bmRDU3RhcnRlZAogICAgKi8KICAgIGZ1bmN0aW9uIHN0YXJ0Um91bmRDKCkgZXh0ZXJuYWwgbWFuYWdlck9ubHkgewogICAgICAgIHJlcXVpcmUoc3RhdHVzSUNPID09IFN0YXR1c0lDTy5Sb3VuZEJGaW5pc2hlZCB8fCBzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlJvdW5kQ1BhdXNlZCk7CiAgICAgICAgc3RhdHVzSUNPID0gU3RhdHVzSUNPLlJvdW5kQ1N0YXJ0ZWQ7CiAgICAgICAgTG9nU3RhcnRSb3VuZEMoKTsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgUGF1c2UgUm91bmQgQwogICAgKiAgIFNldCBJY28gc3RhdHVzIHRvIFJvdW5kQ1BhdXNlZAogICAgKi8KICAgIGZ1bmN0aW9uIHBhdXNlUm91bmRDKCkgZXh0ZXJuYWwgbWFuYWdlck9ubHkgewogICAgICAgIHJlcXVpcmUoc3RhdHVzSUNPID09IFN0YXR1c0lDTy5Sb3VuZENTdGFydGVkKTsKICAgICAgICBzdGF0dXNJQ08gPSBTdGF0dXNJQ08uUm91bmRDUGF1c2VkOwogICAgICAgIExvZ1BhdXNlUm91bmRDKCk7CiAgICB9CgoKICAgLyoqCiAgICAqICAgQGRldiBGaW5pc2ggUm91bmQgQyBhbmQgbWludCB0b2tlbnMgQXBwaWNzRnVuZCwgRWNvc3lzdGVtRnVuZCwgU3RlZW1pdEZ1bmQsCiAgICAgICAgUmV3YXJkRnVuZCBhbmQgUmVmZXJyYWxGdW5kCiAgICAqICAgU2V0IEljbyBzdGF0dXMgdG8gUm91bmRDU3RhcnRlZAogICAgKi8KICAgIGZ1bmN0aW9uIGZpbmlzaFJvdW5kQygpIGV4dGVybmFsIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUm91bmRDU3RhcnRlZCB8fCBzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlJvdW5kQ1BhdXNlZCk7CiAgICAgICAgdWludDI1NiB0b3RhbEFtb3VudCA9IFJvdW5kQ1NvbGQubXVsKDEwMCkuZGl2KGljb1BhcnQpOwogICAgICAgIFhBUC5taW50VG9rZW5zKEFwcGljc0Z1bmQsIEFwcGljc1BhcnQubXVsKHRvdGFsQW1vdW50KS5kaXYoMTAwKSk7CiAgICAgICAgWEFQLm1pbnRUb2tlbnMoRWNvc3lzdGVtRnVuZCwgRWNvc3lzdGVtUGFydC5tdWwodG90YWxBbW91bnQpLmRpdigxMDApKTsKICAgICAgICBYQVAubWludFRva2VucyhTdGVlbWl0RnVuZCwgU3RlZW1pdFBhcnQubXVsKHRvdGFsQW1vdW50KS5kaXYoMTAwKSk7CiAgICAgICAgWEFQLm1pbnRUb2tlbnMoQm91bnR5RnVuZCwgQm91bnR5UGFydC5tdWwodG90YWxBbW91bnQpLmRpdigxMDApKTsKICAgICAgICBzdGF0dXNJQ08gPSBTdGF0dXNJQ08uUm91bmRDRmluaXNoZWQ7CiAgICAgICAgTG9nRmluaXNoUm91bmRDKEFwcGljc0Z1bmQsIEVjb3N5c3RlbUZ1bmQsIFN0ZWVtaXRGdW5kLCBCb3VudHlGdW5kKTsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgU3RhcnQgUm91bmQgRAogICAgKiAgIFNldCBJQ08gc3RhdHVzIHRvIFJvdW5kRFN0YXJ0ZWQKICAgICovCiAgICBmdW5jdGlvbiBzdGFydFJvdW5kRCgpIGV4dGVybmFsIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUm91bmRDRmluaXNoZWQgfHwgc3RhdHVzSUNPID09IFN0YXR1c0lDTy5Sb3VuZERQYXVzZWQpOwogICAgICAgIHN0YXR1c0lDTyA9IFN0YXR1c0lDTy5Sb3VuZERTdGFydGVkOwogICAgICAgIExvZ1N0YXJ0Um91bmREKCk7CiAgICB9CgogICAvKioKICAgICogICBAZGV2IFBhdXNlIFJvdW5kIEQKICAgICogICBTZXQgSWNvIHN0YXR1cyB0byBSb3VuZERQYXVzZWQKICAgICovCiAgICBmdW5jdGlvbiBwYXVzZVJvdW5kRCgpIGV4dGVybmFsIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUm91bmREU3RhcnRlZCk7CiAgICAgICAgc3RhdHVzSUNPID0gU3RhdHVzSUNPLlJvdW5kRFBhdXNlZDsKICAgICAgICBMb2dQYXVzZVJvdW5kRCgpOwogICAgfQoKCiAgIC8qKgogICAgKiAgIEBkZXYgRmluaXNoIFJvdW5kIEQgYW5kIG1pbnQgdG9rZW5zIEFwcGljc0Z1bmQsIEVjb3N5c3RlbUZ1bmQsIFN0ZWVtaXRGdW5kLAogICAgICAgIFJld2FyZEZ1bmQgYW5kIFJlZmVycmFsRnVuZAogICAgKiAgIFNldCBJY28gc3RhdHVzIHRvIFJvdW5kREZpbmlzaGVkCiAgICAqLwogICAgZnVuY3Rpb24gZmluaXNoUm91bmREKCkgZXh0ZXJuYWwgbWFuYWdlck9ubHkgewogICAgICAgIHJlcXVpcmUoc3RhdHVzSUNPID09IFN0YXR1c0lDTy5Sb3VuZERTdGFydGVkIHx8IHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUm91bmREUGF1c2VkKTsKICAgICAgICB1aW50MjU2IHRvdGFsQW1vdW50ID0gUm91bmREU29sZC5tdWwoMTAwKS5kaXYoaWNvUGFydCk7CiAgICAgICAgWEFQLm1pbnRUb2tlbnMoQXBwaWNzRnVuZCwgQXBwaWNzUGFydC5tdWwodG90YWxBbW91bnQpLmRpdigxMDApKTsKICAgICAgICBYQVAubWludFRva2VucyhFY29zeXN0ZW1GdW5kLCBFY29zeXN0ZW1QYXJ0Lm11bCh0b3RhbEFtb3VudCkuZGl2KDEwMCkpOwogICAgICAgIFhBUC5taW50VG9rZW5zKFN0ZWVtaXRGdW5kLCBTdGVlbWl0UGFydC5tdWwodG90YWxBbW91bnQpLmRpdigxMDApKTsKICAgICAgICBYQVAubWludFRva2VucyhCb3VudHlGdW5kLCBCb3VudHlQYXJ0Lm11bCh0b3RhbEFtb3VudCkuZGl2KDEwMCkpOwogICAgICAgIHN0YXR1c0lDTyA9IFN0YXR1c0lDTy5Sb3VuZERGaW5pc2hlZDsKICAgICAgICBMb2dGaW5pc2hSb3VuZEQoQXBwaWNzRnVuZCwgRWNvc3lzdGVtRnVuZCwgU3RlZW1pdEZ1bmQsIEJvdW50eUZ1bmQpOwogICAgfSAgICAKCgogICAvKioKICAgICogICBAZGV2IEVuYWJsZSB0b2tlbiB0cmFuc2ZlcnMKICAgICovCiAgICBmdW5jdGlvbiB1bmZyZWV6ZSgpIGV4dGVybmFsIG1hbmFnZXJPbmx5IHsKICAgICAgICBYQVAuZGVmcm9zdFRva2VucygpOwogICAgfQoKICAgLyoqCiAgICAqICAgQGRldiBEaXNhYmxlIHRva2VuIHRyYW5zZmVycwogICAgKi8KICAgIGZ1bmN0aW9uIGZyZWV6ZSgpIGV4dGVybmFsIG1hbmFnZXJPbmx5IHsKICAgICAgICBYQVAuZnJvc3RUb2tlbnMoKTsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgRmFsbGJhY2sgZnVuY3Rpb24gY2FsbHMgYnV5VG9rZW5zKCkgZnVuY3Rpb24gdG8gYnV5IHRva2VucwogICAgKiAgICAgICAgd2hlbiBpbnZlc3RvciBzZW5kcyBFVEggdG8gYWRkcmVzcyBvZiBJQ08gY29udHJhY3QKICAgICovCiAgICBmdW5jdGlvbigpIGV4dGVybmFsIHBheWFibGUgewogICAgICAgIHVpbnQyNTYgdG9rZW5zOyAKICAgICAgICB0b2tlbnMgPSBtc2cudmFsdWUubXVsKFRva2Vuc19QZXJfRG9sbGFyX051bWVyYXRvcikubXVsKFJhdGVfRXRoKTsKICAgICAgICAvLyByb3VuZGluZyB0b2tlbnMgYW1vdW50OgogICAgICAgIHRva2VucyA9IHRva2Vucy5kaXYoVG9rZW5zX1Blcl9Eb2xsYXJfRGVub21pbmF0b3IpOwogICAgICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyLCB0b2tlbnMpOwogICAgfQoKICAgLyoqCiAgICAqICAgQGRldiBJc3N1ZXMgdG9rZW5zIGZvciB1c2VycyB3aG8gbWFkZSBwdXJjaGFzZXMgaW4gb3RoZXIgY3J5cHRvY3VycmVuY2llcwogICAgKiAgIEBwYXJhbSBfaW52ZXN0b3IgICAgIGFkZHJlc3MgdGhlIHRva2VucyB3aWxsIGJlIGlzc3VlZCB0bwogICAgKiAgIEBwYXJhbSBfeGFwVmFsdWUgICAgIG51bWJlciBvZiBBcHBpY3MgdG9rZW5zCiAgICAqICAgQHBhcmFtIF90eEhhc2ggICAgICAgdHJhbnNhY3Rpb24gaGFzaCBvZiBpbnZlc3RvcidzIHBheW1lbnQKICAgICovCiAgICBmdW5jdGlvbiBidXlGb3JJbnZlc3RvcigKICAgICAgICBhZGRyZXNzIF9pbnZlc3RvciwKICAgICAgICB1aW50MjU2IF94YXBWYWx1ZSwKICAgICAgICBzdHJpbmcgX3R4SGFzaAogICAgKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgY29udHJvbGxlcnNPbmx5CiAgICAgICAgc3RhcnRlZE9ubHkgewogICAgICAgIGJ1eVRva2VucyhfaW52ZXN0b3IsIF94YXBWYWx1ZSk7ICAgICAgICAKICAgICAgICBMb2dCdXlGb3JJbnZlc3RvcihfaW52ZXN0b3IsIF94YXBWYWx1ZSwgX3R4SGFzaCk7CiAgICB9CgoKICAgLyoqCiAgICAqICAgQGRldiBJc3N1ZSB0b2tlbnMgZm9yIGludmVzdG9ycyB3aG8gcGFpZCBpbiBldGhlcgogICAgKiAgIEBwYXJhbSBfaW52ZXN0b3IgICAgIGFkZHJlc3Mgd2hpY2ggdGhlIHRva2VucyB3aWxsIGJlIGlzc3VlZCB0bwogICAgKiAgIEBwYXJhbSBfeGFwVmFsdWUgICAgIG51bWJlciBvZiBBcHBpY3MgdG9rZW5zCiAgICAqLwogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgX2ludmVzdG9yLCB1aW50MjU2IF94YXBWYWx1ZSkgaW50ZXJuYWwgc3RhcnRlZE9ubHkgewogICAgICAgIHJlcXVpcmUoX3hhcFZhbHVlID4gMCk7CiAgICAgICAgdWludDI1NiBib251cyA9IGdldEJvbnVzKF94YXBWYWx1ZSk7CiAgICAgICAgdWludDI1NiB0b3RhbCA9IF94YXBWYWx1ZS5hZGQoYm9udXMpOwogICAgICAgIGlmIChzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlByZVNhbGVTdGFydGVkKSB7CiAgICAgICAgICAgIHJlcXVpcmUgKFByZVNhbGVTb2xkLmFkZCh0b3RhbCkgPD0gUHJlU2FsZUhhcmRDYXApOwogICAgICAgICAgICByZXF1aXJlKF94YXBWYWx1ZSA+IFRFTlRIT1VTRU5ETElNSVQpOwogICAgICAgICAgICBQcmVTYWxlU29sZCA9IFByZVNhbGVTb2xkLmFkZCh0b3RhbCk7CiAgICAgICAgfQogICAgICAgIGlmIChzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlJvdW5kQVN0YXJ0ZWQpIHsKICAgICAgICAgICAgcmVxdWlyZSAoUm91bmRBU29sZC5hZGQodG90YWwpIDw9IFJvdW5kQUhhcmRDYXApOwogICAgICAgICAgICBSb3VuZEFTb2xkID0gUm91bmRBU29sZC5hZGQodG90YWwpOwogICAgICAgIH0KICAgICAgICBpZiAoc3RhdHVzSUNPID09IFN0YXR1c0lDTy5Sb3VuZEJTdGFydGVkKSB7CiAgICAgICAgICAgIHJlcXVpcmUgKFJvdW5kQlNvbGQuYWRkKHRvdGFsKSA8PSBSb3VuZEJIYXJkQ2FwKTsKICAgICAgICAgICAgUm91bmRCU29sZCA9IFJvdW5kQlNvbGQuYWRkKHRvdGFsKTsKICAgICAgICB9CiAgICAgICAgaWYgKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uUm91bmRDU3RhcnRlZCkgewogICAgICAgICAgICByZXF1aXJlIChSb3VuZENTb2xkLmFkZCh0b3RhbCkgPD0gUm91bmRDSGFyZENhcCk7CiAgICAgICAgICAgIFJvdW5kQ1NvbGQgPSBSb3VuZENTb2xkLmFkZCh0b3RhbCk7CiAgICAgICAgfQogICAgICAgIGlmIChzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlJvdW5kRFN0YXJ0ZWQpIHsKICAgICAgICAgICAgcmVxdWlyZSAoUm91bmREU29sZC5hZGQodG90YWwpIDw9IFJvdW5kREhhcmRDYXApOwogICAgICAgICAgICBSb3VuZERTb2xkID0gUm91bmREU29sZC5hZGQodG90YWwpOwogICAgICAgIH0KICAgICAgICBYQVAubWludFRva2VucyhfaW52ZXN0b3IsIHRvdGFsKTsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgQ2FsY3VsYXRlcyBib251cwogICAgKiAgIEBwYXJhbSBfdmFsdWUgICAgICAgIGFtb3VudCBvZiB0b2tlbnMKICAgICogICBAcmV0dXJuICAgICAgICAgICAgICBib251cyB2YWx1ZQogICAgKi8KICAgIGZ1bmN0aW9uIGdldEJvbnVzKHVpbnQyNTYgX3ZhbHVlKQogICAgICAgIHB1YmxpYwogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHVpbnQyNTYgYm9udXMgPSAwOwogICAgICAgIGlmIChzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlByZVNhbGVTdGFydGVkKSB7CiAgICAgICAgICAgIGJvbnVzID0gX3ZhbHVlLm11bCgyMCkuZGl2KDEwMCk7CiAgICAgICAgfQogICAgICAgIGlmIChzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlJvdW5kQVN0YXJ0ZWQpIHsKICAgICAgICAgICAgYm9udXMgPSBfdmFsdWUubXVsKDE1KS5kaXYoMTAwKTsgCiAgICAgICAgfQogICAgICAgIGlmIChzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlJvdW5kQlN0YXJ0ZWQpIHsKICAgICAgICAgICAgYm9udXMgPSBfdmFsdWUubXVsKDEwKS5kaXYoMTAwKTsgCiAgICAgICAgfQogICAgICAgIGlmIChzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlJvdW5kQ1N0YXJ0ZWQpIHsKICAgICAgICAgICAgYm9udXMgPSBfdmFsdWUubXVsKDUpLmRpdigxMDApOyAKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJvbnVzOwogICAgfQogICAgCiAgICBmdW5jdGlvbiByZWdpc3RlcihzdHJpbmcgX2tleSkgcHVibGljIHsKICAgICAgICBrZXlzW21zZy5zZW5kZXJdID0gX2tleTsKICAgICAgICBMb2dSZWdpc3Rlcihtc2cuc2VuZGVyLCBfa2V5KTsKICAgIH0KCgogICAvKioKICAgICogICBAZGV2IEFsbG93cyBDb21wYW55IHdpdGhkcmF3IGludmVzdG1lbnRzIHdoZW4gcm91bmQgaXMgb3ZlcgogICAgKi8KICAgIGZ1bmN0aW9uIHdpdGhkcmF3RXRoZXIoKSBleHRlcm5hbCBtYW5hZ2VyT25seSBmaW5pc2hlZE9ubHl7CiAgICAgICAgQ29tcGFueS50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfQoKfQoKCi8qKgogKiAgIEB0aXRsZSAKICogICBAZGV2IEFwcGljcyB0b2tlbiBjb250cmFjdAogKi8KY29udHJhY3QgQXBwaWNzVG9rZW4gaXMgRVJDMjAgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiQXBwaWNzIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlhBUCI7CiAgICB1aW50MjU2IHB1YmxpYyBkZWNpbWFscyA9IDE4OwoKICAgIC8vIEljbyBjb250cmFjdCBhZGRyZXNzCiAgICBhZGRyZXNzIHB1YmxpYyBpY287CiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50MjU2IHZhbHVlKTsKCiAgICAvLyBEaXNhYmxlcy9lbmFibGVzIHRva2VuIHRyYW5zZmVycwogICAgYm9vbCBwdWJsaWMgdG9rZW5zQXJlRnJvemVuID0gdHJ1ZTsKCiAgICAvLyBBbGxvd3MgZXhlY3V0aW9uIGJ5IHRoZSBpY28gb25seQogICAgbW9kaWZpZXIgaWNvT25seSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGljbyk7CiAgICAgICAgXzsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgQ29udHJhY3QgY29uc3RydWN0b3IgZnVuY3Rpb24gc2V0cyBJY28gYWRkcmVzcwogICAgKiAgIEBwYXJhbSBfaWNvICAgICAgICAgIGljbyBhZGRyZXNzCiAgICAqLwogICAgZnVuY3Rpb24gQXBwaWNzVG9rZW4oYWRkcmVzcyBfaWNvKSBwdWJsaWMgewogICAgICAgIGljbyA9IF9pY287CiAgICB9CgogICAvKioKICAgICogICBAZGV2IE1pbnQgdG9rZW5zCiAgICAqICAgQHBhcmFtIF9ob2xkZXIgICAgICAgYmVuZWZpY2lhcnkgYWRkcmVzcyB0aGUgdG9rZW5zIHdpbGwgYmUgaXNzdWVkIHRvCiAgICAqICAgQHBhcmFtIF92YWx1ZSAgICAgICAgbnVtYmVyIG9mIHRva2VucyB0byBpc3N1ZQogICAgKi8KICAgIGZ1bmN0aW9uIG1pbnRUb2tlbnMoYWRkcmVzcyBfaG9sZGVyLCB1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWwgaWNvT25seSB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKICAgICAgICBiYWxhbmNlc1tfaG9sZGVyXSA9IGJhbGFuY2VzW19ob2xkZXJdLmFkZChfdmFsdWUpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBfaG9sZGVyLCBfdmFsdWUpOwogICAgfQoKICAgLyoqCiAgICAqICAgQGRldiBFbmFibGVzIHRva2VuIHRyYW5zZmVycwogICAgKi8KICAgIGZ1bmN0aW9uIGRlZnJvc3RUb2tlbnMoKSBleHRlcm5hbCBpY29Pbmx5IHsKICAgICAgdG9rZW5zQXJlRnJvemVuID0gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAqICAgQGRldiBEaXNhYmxlcyB0b2tlbiB0cmFuc2ZlcnMKICAgICovCiAgICBmdW5jdGlvbiBmcm9zdFRva2VucygpIGV4dGVybmFsIGljb09ubHkgewogICAgICB0b2tlbnNBcmVGcm96ZW4gPSB0cnVlOwogICAgfQoKICAgLyoqCiAgICAqICAgQGRldiBCdXJuIFRva2VucwogICAgKiAgIEBwYXJhbSBfaW52ZXN0b3IgICAgIHRva2VuIGhvbGRlciBhZGRyZXNzIHdoaWNoIHRoZSB0b2tlbnMgd2lsbCBiZSBidXJudAogICAgKiAgIEBwYXJhbSBfdmFsdWUgICAgICAgIG51bWJlciBvZiB0b2tlbnMgdG8gYnVybgogICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm5Ub2tlbnMoYWRkcmVzcyBfaW52ZXN0b3IsIHVpbnQyNTYgX3ZhbHVlKSBleHRlcm5hbCBpY29Pbmx5IHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW19pbnZlc3Rvcl0gPiAwKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW19pbnZlc3Rvcl0gPSBiYWxhbmNlc1tfaW52ZXN0b3JdLnN1YihfdmFsdWUpOwogICAgICAgIEJ1cm4oX2ludmVzdG9yLCBfdmFsdWUpOwogICAgfQoKICAgLyoqCiAgICAqICAgQGRldiBHZXQgYmFsYW5jZSBvZiBpbnZlc3RvcgogICAgKiAgIEBwYXJhbSBfb3duZXIgICAgICAgIGludmVzdG9yJ3MgYWRkcmVzcwogICAgKiAgIEByZXR1cm4gICAgICAgICAgICAgIGJhbGFuY2Ugb2YgaW52ZXN0b3IKICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAvKioKICAgICogICBAZGV2IFNlbmQgY29pbnMKICAgICogICB0aHJvd3Mgb24gYW55IGVycm9yIHJhdGhlciB0aGVuIHJldHVybiBhIGZhbHNlIGZsYWcgdG8gbWluaW1pemUKICAgICogICB1c2VyIGVycm9ycwogICAgKiAgIEBwYXJhbSBfdG8gICAgICAgICAgIHRhcmdldCBhZGRyZXNzCiAgICAqICAgQHBhcmFtIF9hbW91bnQgICAgICAgdHJhbnNmZXIgYW1vdW50CiAgICAqCiAgICAqICAgQHJldHVybiB0cnVlIGlmIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXF1aXJlKCF0b2tlbnNBcmVGcm96ZW4pOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgLyoqCiAgICAqICAgQGRldiBBbiBhY2NvdW50L2NvbnRyYWN0IGF0dGVtcHRzIHRvIGdldCB0aGUgY29pbnMKICAgICogICB0aHJvd3Mgb24gYW55IGVycm9yIHJhdGhlciB0aGVuIHJldHVybiBhIGZhbHNlIGZsYWcgdG8gbWluaW1pemUgdXNlciBlcnJvcnMKICAgICoKICAgICogICBAcGFyYW0gX2Zyb20gICAgICAgICBzb3VyY2UgYWRkcmVzcwogICAgKiAgIEBwYXJhbSBfdG8gICAgICAgICAgIHRhcmdldCBhZGRyZXNzCiAgICAqICAgQHBhcmFtIF9hbW91bnQgICAgICAgdHJhbnNmZXIgYW1vdW50CiAgICAqCiAgICAqICAgQHJldHVybiB0cnVlIGlmIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmVxdWlyZSghdG9rZW5zQXJlRnJvemVuKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF9hbW91bnQpOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgQWxsb3dzIGFub3RoZXIgYWNjb3VudC9jb250cmFjdCB0byBzcGVuZCBzb21lIHRva2VucyBvbiBpdHMgYmVoYWxmCiAgICAqICAgdGhyb3dzIG9uIGFueSBlcnJvciByYXRoZXIgdGhlbiByZXR1cm4gYSBmYWxzZSBmbGFnIHRvIG1pbmltaXplIHVzZXIgZXJyb3JzCiAgICAqCiAgICAqICAgYWxzbywgdG8gbWluaW1pemUgdGhlIHJpc2sgb2YgdGhlIGFwcHJvdmUvdHJhbnNmZXJGcm9tIGF0dGFjayB2ZWN0b3IKICAgICogICBhcHByb3ZlIGhhcyB0byBiZSBjYWxsZWQgdHdpY2UgaW4gMiBzZXBhcmF0ZSB0cmFuc2FjdGlvbnMgLSBvbmNlIHRvCiAgICAqICAgY2hhbmdlIHRoZSBhbGxvd2FuY2UgdG8gMCBhbmQgc2Vjb25kbHkgdG8gY2hhbmdlIGl0IHRvIHRoZSBuZXcgYWxsb3dhbmNlCiAgICAqICAgdmFsdWUKICAgICoKICAgICogICBAcGFyYW0gX3NwZW5kZXIgICAgICBhcHByb3ZlZCBhZGRyZXNzCiAgICAqICAgQHBhcmFtIF9hbW91bnQgICAgICAgYWxsb3dhbmNlIGFtb3VudAogICAgKgogICAgKiAgIEByZXR1cm4gdHJ1ZSBpZiB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwKICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHJldHVybnMoYm9vbCkgewogICAgICAgIHJlcXVpcmUoKF9hbW91bnQgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgLyoqCiAgICAqICAgQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgKgogICAgKiAgIEBwYXJhbSBfb3duZXIgICAgICAgIHRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzCiAgICAqICAgQHBhcmFtIF9zcGVuZGVyICAgICAgdGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMKICAgICoKICAgICogICBAcmV0dXJuICAgICAgICAgICAgICB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlcgogICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQp9'.
	

]
