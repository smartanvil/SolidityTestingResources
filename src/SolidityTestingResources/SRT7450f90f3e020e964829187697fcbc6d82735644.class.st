Class {
	#name : #SRT7450f90f3e020e964829187697fcbc6d82735644,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7450f90f3e020e964829187697fcbc6d82735644 >> base64 [
	^ 'LyoqCiAqIFRoZSBFZGdlbGVzcyBibGFja2phY2sgY29udHJhY3Qgb25seSBhbGxvd3MgY2FsbHMgZnJvbSB0aGUgYXV0aG9yaXplZCBjYXNpbm8gcHJveHkgY29udHJhY3RzLiAKICogVGhlIHByb3h5IGNvbnRyYWN0IG9ubHkgZm9yd2FyZCBtb3ZlcyBpZiBjYWxsZWQgYnkgYW4gYXV0aG9yaXplZCB3YWxsZXQgb3duZWQgYnkgdGhlIEVkZ2VsZXNzIGNhc2lubywgYnV0IHRoZSBnYW1lCiAqIGRhdGEgaGFzIHRvIGJlIHNpZ25lZCBieSB0aGUgcGxheWVyIHRvIHNob3cgaGlzIGFwcHJvdmFsLiBUaGlzIHdheSwgRWRnZWxlc3MgY2FuIHByb3ZpZGUgYSBmbHVpZCBnYW1lIGV4cGVyaWVuY2UKICogd2l0aG91dCBoYXZpbmcgdG8gd2FpdCBmb3IgdHJhbnNhY3Rpb24gY29uZmlybWF0aW9ucy4KICogYXV0aG9yOiBKdWxpYSBBbHRlbnJpZWQKICoqLwoKcHJhZ21hIHNvbGlkaXR5IF4gMC40IC4xNzsKCmNvbnRyYWN0IG93bmVkIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICBtb2RpZmllciBvbmx5T3duZXIgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBvd25lZCgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQp9Cgpjb250cmFjdCBtb3J0YWwgaXMgb3duZWQgewogIGZ1bmN0aW9uIGNsb3NlKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogIH0KfQoKY29udHJhY3QgY2FzaW5vIGlzIG1vcnRhbCB7CiAgLyoqIHRoZSBtaW5pbXVtIGJldCoqLwogIHVpbnQgcHVibGljIG1pbmltdW1CZXQ7CiAgLyoqIHRoZSBtYXhpbXVtIGJldCAqKi8KICB1aW50IHB1YmxpYyBtYXhpbXVtQmV0OwogIC8qKiB0ZWxscyBpZiBhbiBhZGRyZXNzIGlzIGF1dGhvcml6ZWQgdG8gY2FsbCBnYW1lIGZ1bmN0aW9ucyAqKi8KICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGF1dGhvcml6ZWQ7CgogIC8qKiBub3RpZnkgbGlzdGVuZXJzIHRoYXQgYW4gZXJyb3Igb2NjdXJyZWQqKi8KICBldmVudCBFcnJvcih1aW50OCBlcnJvckNvZGUpOwoKICAvKiogCiAgICogY29uc3RydWN0dXIuIGluaXRpYWxpemUgdGhlIGNvbnRyYWN0IHdpdGggaW5pdGlhbCB2YWx1ZXMuIAogICAqIEBwYXJhbSBtaW5CZXQgICAgICAgICB0aGUgbWluaW11bSBiZXQKICAgKiAgICAgICAgbWF4QmV0ICAgICAgICAgdGhlIG1heGltdW0gYmV0CiAgICoqLwogIGZ1bmN0aW9uIGNhc2lubyh1aW50IG1pbkJldCwgdWludCBtYXhCZXQpIHB1YmxpYyB7CiAgICBtaW5pbXVtQmV0ID0gbWluQmV0OwogICAgbWF4aW11bUJldCA9IG1heEJldDsKICB9CgogIC8qKiAKICAgKiBhbGxvd3MgdGhlIG93bmVyIHRvIGNoYW5nZSB0aGUgbWluaW11bSBiZXQKICAgKiBAcGFyYW0gbmV3TWluIHRoZSBuZXcgbWluaW11bSBiZXQKICAgKiovCiAgZnVuY3Rpb24gc2V0TWluaW11bUJldCh1aW50IG5ld01pbikgb25seU93bmVyIHB1YmxpYyB7CiAgICBtaW5pbXVtQmV0ID0gbmV3TWluOwogIH0KCiAgLyoqIAogICAqIGFsbG93cyB0aGUgb3duZXIgdG8gY2hhbmdlIHRoZSBtYXhpbXVtIGJldAogICAqIEBwYXJhbSBuZXdNYXggdGhlIG5ldyBtYXhpbXVtIGJldAogICAqKi8KICBmdW5jdGlvbiBzZXRNYXhpbXVtQmV0KHVpbnQgbmV3TWF4KSBvbmx5T3duZXIgcHVibGljIHsKICAgIG1heGltdW1CZXQgPSBuZXdNYXg7CiAgfQoKCiAgLyoqCiAgICogYXV0aG9yaXplIGEgYWRkcmVzcyB0byBjYWxsIGdhbWUgZnVuY3Rpb25zLgogICAqIEBwYXJhbSBhZGRyIHRoZSBhZGRyZXNzIHRvIGJlIGF1dGhvcml6ZWQKICAgKiovCiAgZnVuY3Rpb24gYXV0aG9yaXplKGFkZHJlc3MgYWRkcikgb25seU93bmVyIHB1YmxpYyB7CiAgICBhdXRob3JpemVkW2FkZHJdID0gdHJ1ZTsKICB9CgogIC8qKgogICAqIGRlYXV0aG9yaXplIGEgYWRkcmVzcyB0byBjYWxsIGdhbWUgZnVuY3Rpb25zLgogICAqIEBwYXJhbSBhZGRyIHRoZSBhZGRyZXNzIHRvIGJlIGRlYXV0aG9yaXplZAogICAqKi8KICBmdW5jdGlvbiBkZWF1dGhvcml6ZShhZGRyZXNzIGFkZHIpIG9ubHlPd25lciBwdWJsaWMgewogICAgYXV0aG9yaXplZFthZGRyXSA9IGZhbHNlOwogIH0KCgogIC8qKgogICAqIGNoZWNrcyBpZiBhbiBhZGRyZXNzIGlzIGF1dGhvcml6ZWQgdG8gY2FsbCBnYW1lIGZ1bmN0aW9uYWxpdHkKICAgKiovCiAgbW9kaWZpZXIgb25seUF1dGhvcml6ZWQgewogICAgcmVxdWlyZShhdXRob3JpemVkW21zZy5zZW5kZXJdKTsKICAgIF87CiAgfQp9Cgpjb250cmFjdCBibGFja2phY2sgaXMgY2FzaW5vIHsKICBzdHJ1Y3QgR2FtZSB7CiAgICAvKiogdGhlIGhhc2ggb2YgdGhlIChwYXJ0aWFsKSBkZWNrICoqLwogICAgYnl0ZXMzMiBkZWNrOwogICAgLyoqIHRoZSBoYXNoIG9mIHRoZSBjYXNpbm8gc2VlZCB1c2VkIGZvciByYW5kb21uZXNzIGdlbmVyYXRpb24gYW5kIGRlY2staGFzaGluZywgYWxzbyBzZXJ2ZXMgYXMgaWQqKi8KICAgIGJ5dGVzMzIgc2VlZEhhc2g7CiAgICAvKiogdGhlIHBsYXllciBhZGRyZXNzICoqLwogICAgYWRkcmVzcyBwbGF5ZXI7CiAgICAvKiogdGhlIGJldCAqKi8KICAgIHVpbnQgYmV0OwogIH0KCiAgLyoqIHRoZSB2YWx1ZSBvZiB0aGUgY2FyZHM6IEFjZSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIEosIFEsIEsgLiBBY2UgY2FuIGJlIDEgb3IgMTEsIG9mIGNvdXJzZS4gCiAgICogICB0aGUgdmFsdWUgb2YgYSBjYXJkIGNhbiBiZSBkZXRlcm1pbmVkIGJ5IGxvb2tpbmcgdXAgY2FyZFZhbHVlc1tjYXJkSWQlMTNdKiovCiAgdWludDhbMTNdIGNhcmRWYWx1ZXMgPSBbMTEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMCwgMTAsIDEwXTsKCiAgLyoqIHVzZSB0aGUgZ2FtZSBpZCB0byByZWZlcmVuY2UgdGhlIGdhbWVzICoqLwogIG1hcHBpbmcoYnl0ZXMzMiA9PiBHYW1lKSBnYW1lczsKICAvKiogbGlzdCBvZiBzcGxpdHMgcGVyIGdhbWUgLSBsZW5ndGggMCBpbiBtb3N0IGNhc2VzICoqLwogIG1hcHBpbmcoYnl0ZXMzMiA9PiB1aW50OFtdKSBzcGxpdHM7CiAgLyoqIHRlbGxzIGlmIGEgaGFuZCBvZiBhIGdpdmVuIGdhbWUgaGFzIGJlZW4gZG91YmxlZCAqKi8KICBtYXBwaW5nKGJ5dGVzMzIgPT4gbWFwcGluZyh1aW50OCA9PiBib29sKSkgZG91YmxlZDsKICAvKiogdGVsbHMgaWYgdGhlIHBsYXllciBhbHJlYWR5IGNsYWltZWQgaGlzIHdpbiAqKi8KICBtYXBwaW5nKGJ5dGVzMzIgPT4gYm9vbCkgb3ZlcjsKCiAgLyoqIG5vdGlmeSBsaXN0ZW5lcnMgdGhhdCBhIG5ldyByb3VuZCBvZiBibGFja2phY2sgc3RhcnRlZCAqKi8KICBldmVudCBOZXdHYW1lKGJ5dGVzMzIgaW5kZXhlZCBpZCwgYnl0ZXMzMiBkZWNrLCBieXRlczMyIHNydlNlZWQsIGJ5dGVzMzIgY1NlZWQsIGFkZHJlc3MgcGxheWVyLCB1aW50IGJldCk7CiAgLyoqIG5vdGlmeSBsaXN0ZW5lcnMgb2YgdGhlIGdhbWUgb3V0Y29tZSAqKi8KICBldmVudCBSZXN1bHQoYnl0ZXMzMiBpbmRleGVkIGlkLCBhZGRyZXNzIHBsYXllciwgdWludCB3aW4pOwogIC8qKiBub3RpZnkgbGlzdGVuZXJzIHRoYXQgdGhlIHBsYXllciBkb3VibGVkICoqLwogIGV2ZW50IERvdWJsZShieXRlczMyIGluZGV4ZWQgaWQsIHVpbnQ4IGhhbmQpOwogIC8qKiBub3RpZnkgbGlzdGVuZXJzIHRoYXQgdGhlIHBsYXllciBzcGxpdCAqKi8KICBldmVudCBTcGxpdChieXRlczMyIGluZGV4ZWQgaWQsIHVpbnQ4IGhhbmQpOwoKICAvKiogCiAgICogY29uc3RydWN0dXIuIGluaXRpYWxpemUgdGhlIGNvbnRyYWN0IHdpdGggYSBtaW5pbXVtIGJldCBhbmQgYSBzaWduZXIgYWRkcmVzcy4gCiAgICogQHBhcmFtIG1pbkJldCAgICAgICAgIHRoZSBtaW5pbXVtIGJldAogICAqICAgICAgICBtYXhCZXQgICAgICAgICB0aGUgbWF4aW11bSBiZXQKICAgKiAgICAgICAgYmFua3JvbGwgICAgICAgdGhlIGxvd2VyIGJvdW5kIGZvciBwcm9maXQgc2hhcmluZwogICAqICAgICAgICBsb3R0ZXJ5QWRkcmVzcyB0aGUgYWRkcmVzcyBvZiB0aGUgbG90dGVyeSBjb250cmFjdAogICAqICAgICAgICBwcm9maXRBZGRyZXNzICB0aGUgYWRkcmVzcyB0byBzZW5kIDYwJSBvZiB0aGUgcHJvZml0IHRvIG9uIHBheWRheQogICAqKi8KICBmdW5jdGlvbiBibGFja2phY2sodWludCBtaW5CZXQsIHVpbnQgbWF4QmV0KSBjYXNpbm8obWluQmV0LCBtYXhCZXQpIHB1YmxpYyB7CgogIH0KCiAgLyoqIAogICAqICAgaW5pdGlhbGl6ZXMgYSByb3VuZCBvZiBibGFja2phY2sgd2l0aCBhbiBpZCwgdGhlIGhhc2ggb2YgdGhlIChwYXJ0aWFsKSBkZWNrIGFuZCB0aGUgaGFzaCBvZiB0aGUgc2VydmVyIHNlZWQuIAogICAqICAgYWNjZXB0cyB0aGUgYmV0LgogICAqICAgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGUgYmV0IGlzIHRvbyBsb3cgb3IgYSBnYW1lIHdpdGggdGhlIGdpdmVuIGlkIGFscmVhZHkgZXhpc3RzLgogICAqICAgQHBhcmFtIHBsYXllciAgdGhlIGFkZHJlc3Mgb2YgdGhlIHBsYXllcgogICAqICAgICAgICAgIHZhbHVlICAgdGhlIHZhbHVlIG9mIHRoZSBiZXQgaW4gdG9rZW5zCiAgICogICAgICAgICAgZGVjayAgICB0aGUgaGFzaCBvZiB0aGUgZGVjawogICAqICAgICAgICAgIHNydlNlZWQgdGhlIGhhc2ggb2YgdGhlIHNlcnZlciBzZWVkCiAgICogICAgICAgICAgY1NlZWQgICB0aGUgcGxhaW4gY2xpZW50IHNlZWQKICAgKiovCiAgZnVuY3Rpb24gaW5pdEdhbWUoYWRkcmVzcyBwbGF5ZXIsIHVpbnQgdmFsdWUsIGJ5dGVzMzIgZGVjaywgYnl0ZXMzMiBzcnZTZWVkLCBieXRlczMyIGNTZWVkKSBvbmx5QXV0aG9yaXplZCBwdWJsaWMgewogICAgLy90aHJvdyBpZiBnYW1lIHdpdGggaWQgYWxyZWFkeSBleGlzdHMuIGxhdGVyIG1heWJlIHRocm93IG9ubHkgaWYgZ2FtZSB3aXRoIGlkIGlzIHN0aWxsIHJ1bm5pbmcKICAgIGFzc2VydCh2YWx1ZSA+PSBtaW5pbXVtQmV0ICYmIHZhbHVlIDw9IG1heGltdW1CZXQpOwogICAgYXNzZXJ0KCFnYW1lRXhpc3RzKHNydlNlZWQpKTsKICAgIGdhbWVzW3NydlNlZWRdID0gR2FtZShkZWNrLCBzcnZTZWVkLCBwbGF5ZXIsIHZhbHVlKTsKICAgIE5ld0dhbWUoc3J2U2VlZCwgZGVjaywgc3J2U2VlZCwgY1NlZWQsIHBsYXllciwgdmFsdWUpOwogIH0KCiAgLyoqCiAgICogICBkb3VibGVzIHRoZSBiZXQgb2YgdGhlIGdhbWUgd2l0aCB0aGUgZ2l2ZW4gaWQgaWYgdGhlIGNvcnJlY3QgYW1vdW50IGlzIHNlbnQgYW5kIHRoZSBwbGF5ZXIgZGlkIG5vdCBkb3VibGUgdGhlIGhhbmQgeWV0LgogICAqICAgQHBhcmFtIGlkICAgIHRoZSBnYW1lIGlkCiAgICogICAgICAgICAgaGFuZCAgdGhlIGluZGV4IG9mIHRoZSBoYW5kIGJlaW5nIGRvdWJsZWQKICAgKiAgICAgICAgICB2YWx1ZSB0aGUgbnVtYmVyIG9mIHRva2VucyBzZW50IGJ5IHRoZSBwbGF5ZXIKICAgKiovCiAgZnVuY3Rpb24gZG91YmxlKGJ5dGVzMzIgaWQsIHVpbnQ4IGhhbmQsIHVpbnQgdmFsdWUpIG9ubHlBdXRob3JpemVkIHB1YmxpYyB7CiAgICBHYW1lIHN0b3JhZ2UgZ2FtZSA9IGdhbWVzW2lkXTsKICAgIHJlcXVpcmUodmFsdWUgPT0gZ2FtZS5iZXQpOwogICAgcmVxdWlyZShoYW5kIDw9IHNwbGl0c1tpZF0ubGVuZ3RoICYmICFkb3VibGVkW2lkXVtoYW5kXSk7CiAgICBkb3VibGVkW2lkXVtoYW5kXSA9IHRydWU7CiAgICBEb3VibGUoaWQsIGhhbmQpOwogIH0KCiAgLyoqCiAgICogICBzcGxpdHMgdGhlIGhhbmRzIG9mIHRoZSBnYW1lIHdpdGggdGhlIGdpdmVuIGlkIGlmIHRoZSBjb3JyZWN0IGFtb3VudCBpcyBzZW50IGZyb20gdGhlIHBsYXllciBhZGRyZXNzIGFuZCB0aGUgcGxheWVyCiAgICogICBkaWQgbm90IHNwbGl0IHlldC4KICAgKiAgIEBwYXJhbSBpZCAgICB0aGUgZ2FtZSBpZAogICAqICAgICAgICAgIGhhbmQgIHRoZSBpbmRleCBvZiB0aGUgaGFuZCBiZWluZyBzcGxpdAogICAqICAgICAgICAgIHZhbHVlIHRoZSBudW1iZXIgb2YgdG9rZW5zIHNlbnQgYnkgdGhlIHBsYXllcgogICAqKi8KICBmdW5jdGlvbiBzcGxpdChieXRlczMyIGlkLCB1aW50OCBoYW5kLCB1aW50IHZhbHVlKSBvbmx5QXV0aG9yaXplZCBwdWJsaWMgewogICAgR2FtZSBzdG9yYWdlIGdhbWUgPSBnYW1lc1tpZF07CiAgICByZXF1aXJlKHZhbHVlID09IGdhbWUuYmV0KTsKICAgIHJlcXVpcmUoc3BsaXRzW2lkXS5sZW5ndGggPCAzKTsKICAgIHNwbGl0c1tpZF0ucHVzaChoYW5kKTsKICAgIFNwbGl0KGlkLCBoYW5kKTsKICB9CgoKICAvKioKICAgKiBieSBzdXJyZW5kZXJpbmcgaGFsZiB0aGUgYmV0IGlzIHJldHVybmVkIHRvIHRoZSBwbGF5ZXIuCiAgICogc2VuZCB0aGUgcGxhaW4gc2VydmVyIHNlZWQgdG8gY2hlY2sgaWYgaXQncyBjb3JyZWN0CiAgICogQHBhcmFtIHNlZWQgdGhlIHNlcnZlciBzZWVkCiAgICoqLwogIGZ1bmN0aW9uIHN1cnJlbmRlcihieXRlczMyIHNlZWQpIG9ubHlBdXRob3JpemVkIHB1YmxpYyB7CiAgICB2YXIgaWQgPSBrZWNjYWsyNTYoc2VlZCk7CiAgICBHYW1lIHN0b3JhZ2UgZ2FtZSA9IGdhbWVzW2lkXTsKICAgIHJlcXVpcmUoaWQgPT0gZ2FtZS5zZWVkSGFzaCk7CiAgICByZXF1aXJlKCFvdmVyW2lkXSk7CiAgICBvdmVyW2lkXSA9IHRydWU7CiAgICBhc3NlcnQobXNnLnNlbmRlci5jYWxsKGJ5dGVzNChrZWNjYWsyNTYoInNoaWZ0KGFkZHJlc3MsdWludDI1NikiKSksIGdhbWUucGxheWVyLCBnYW1lLmJldCAvIDIpKTsKICAgIFJlc3VsdChpZCwgZ2FtZS5wbGF5ZXIsIGdhbWUuYmV0IC8gMik7CiAgfQoKICAvKiogCiAgICogZmlyc3QgY2hlY2tzIGlmIGRlY2sgYW5kIHRoZSBwbGF5ZXIncyBudW1iZXIgb2YgY2FyZHMgYXJlIGNvcnJlY3QsIHRoZW4gY2hlY2tzIGlmIHRoZSBwbGF5ZXIgd29uIGFuZCBpZiBzbywgc2VuZHMgdGhlIHdpbi4KICAgKiBAcGFyYW0gZGVjayAgICAgIHRoZSBwYXJ0aWFsIGRlY2sKICAgKiAgICAgICAgc2VlZCAgICAgIHRoZSBwbGFpbiBzZXJ2ZXIgc2VlZAogICAqICAgICAgICBudW1DYXJkcyAgdGhlIG51bWJlciBvZiBjYXJkcyBwZXIgaGFuZAogICAqKi8KICBmdW5jdGlvbiBzdGFuZCh1aW50OFtdIGRlY2ssIGJ5dGVzMzIgc2VlZCwgdWludDhbXSBudW1DYXJkcykgb25seUF1dGhvcml6ZWQgcHVibGljIHsKICAgIHZhciBnYW1lSWQgPSBrZWNjYWsyNTYoc2VlZCk7IC8vaWYgc2VlZCBpcyBpbmNvcnJlY3QgdGhlIGZpcnN0IGNvbmRpdGlvbiB3aWxsIGFscmVhZHkgZmFpbAogICAgR2FtZSBzdG9yYWdlIGdhbWUgPSBnYW1lc1tnYW1lSWRdOwogICAgYXNzZXJ0KCFvdmVyW2dhbWVJZF0pOwogICAgYXNzZXJ0KGNoZWNrRGVjayhnYW1lSWQsIGRlY2ssIHNlZWQpKTsKICAgIGFzc2VydChzcGxpdHNbZ2FtZUlkXS5sZW5ndGggPT0gbnVtQ2FyZHMubGVuZ3RoIC0gMSk7CiAgICBvdmVyW2dhbWVJZF0gPSB0cnVlOwogICAgdWludCB3aW4gPSBkZXRlcm1pbmVPdXRjb21lKGdhbWVJZCwgZGVjaywgbnVtQ2FyZHMpOwogICAgaWYgKHdpbiA+IDApIGFzc2VydChtc2cuc2VuZGVyLmNhbGwoYnl0ZXM0KGtlY2NhazI1Nigic2hpZnQoYWRkcmVzcyx1aW50MjU2KSIpKSwgZ2FtZS5wbGF5ZXIsIHdpbikpOwogICAgUmVzdWx0KGdhbWVJZCwgZ2FtZS5wbGF5ZXIsIHdpbik7CiAgfQoKICAvKioKICAgKiBjaGVja3MgaWYgYSBnYW1lIHdpdGggdGhlIGdpdmVuIGlkIGFscmVhZHkgZXhpc3RzCiAgICogQHBhcmFtIGlkIHRoZSBnYW1lIGlkCiAgICoqLwogIGZ1bmN0aW9uIGdhbWVFeGlzdHMoYnl0ZXMzMiBpZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoZ2FtZXNbaWRdLnBsYXllciAhPSAweDApIHJldHVybiB0cnVlOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLyoqCiAgICogY2hlY2sgaWYgZGVjayBhbmQgY2FzaW5vIHNlZWQgYXJlIGNvcnJlY3QuCiAgICogQHBhcmFtIGdhbWVJZCB0aGUgZ2FtZSBpZAogICAqICAgICAgICBkZWNrICAgdGhlIHBhcnRpYWwgZGVjawogICAqICAgICAgICBzZWVkICAgdGhlIHNlcnZlciBzZWVkCiAgICogQHJldHVybiB0cnVlIGlmIGNvcnJlY3QKICAgKiovCiAgZnVuY3Rpb24gY2hlY2tEZWNrKGJ5dGVzMzIgZ2FtZUlkLCB1aW50OFtdIGRlY2ssIGJ5dGVzMzIgc2VlZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMoYm9vbCBjb3JyZWN0KSB7CiAgICBpZiAoa2VjY2FrMjU2KGNvbnZlcnRUb0J5dGVzKGRlY2spLCBzZWVkKSAhPSBnYW1lc1tnYW1lSWRdLmRlY2spIHJldHVybiBmYWxzZTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogY29udmVydHMgYW4gdWludDggYXJyYXkgdG8gYnl0ZXMKICAgKiBAcGFyYW0gYnl0ZUFycmF5IHRoZSB1aW50OCBhcnJheSB0byBiZSBjb252ZXJ0ZWQKICAgKiBAcmV0dXJuIHRoZSBieXRlcwogICAqKi8KICBmdW5jdGlvbiBjb252ZXJ0VG9CeXRlcyh1aW50OFtdIGJ5dGVBcnJheSkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyhieXRlcyBiKSB7CiAgICBiID0gbmV3IGJ5dGVzKGJ5dGVBcnJheS5sZW5ndGgpOwogICAgZm9yICh1aW50OCBpID0gMDsgaSA8IGJ5dGVBcnJheS5sZW5ndGg7IGkrKykKICAgICAgYltpXSA9IGJ5dGUoYnl0ZUFycmF5W2ldKTsKICB9CgogIC8qKgogICAqIGRldGVybWluZXMgdGhlIG91dGNvbWUgb2YgYSBnYW1lIGFuZCByZXR1cm5zIHRoZSB3aW4uIAogICAqIGluIGNhc2Ugb2YgYSBsb3NzLCB3aW4gaXMgMC4KICAgKiBAcGFyYW0gZ2FtZUlkICAgIHRoZSBpZCBvZiB0aGUgZ2FtZQogICAqICAgICAgICBjYXJkcyAgICAgdGhlIGNhcmRzIC8gcGFydGlhbCBkZWNrCiAgICogICAgICAgIG51bUNhcmRzICB0aGUgbnVtYmVyIG9mIGNhcmRzIHBlciBoYW5kCiAgICogQHJldHVybiB0aGUgdG90YWwgd2luIG9mIGFsbCBoYW5kcwogICAqKi8KICBmdW5jdGlvbiBkZXRlcm1pbmVPdXRjb21lKGJ5dGVzMzIgZ2FtZUlkLCB1aW50OFtdIGNhcmRzLCB1aW50OFtdIG51bUNhcmRzKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50IHRvdGFsV2luKSB7CiAgICBHYW1lIHN0b3JhZ2UgZ2FtZSA9IGdhbWVzW2dhbWVJZF07CiAgICB2YXIgcGxheWVyVmFsdWVzID0gZ2V0UGxheWVyVmFsdWVzKGNhcmRzLCBudW1DYXJkcywgc3BsaXRzW2dhbWVJZF0pOwogICAgdmFyIChkZWFsZXJWYWx1ZSwgZGVhbGVyQkopID0gZ2V0RGVhbGVyVmFsdWUoY2FyZHMsIHN1bShudW1DYXJkcykpOwogICAgdWludCB3aW47CiAgICBmb3IgKHVpbnQ4IGggPSAwOyBoIDwgbnVtQ2FyZHMubGVuZ3RoOyBoKyspIHsKICAgICAgdWludDggcGxheWVyVmFsdWUgPSBwbGF5ZXJWYWx1ZXNbaF07CiAgICAgIC8vYnVzdCBpZiB2YWx1ZSA+IDIxCiAgICAgIGlmIChwbGF5ZXJWYWx1ZSA+IDIxKSB3aW4gPSAwOwogICAgICAvL3BsYXllciBibGFja2phY2sgYnV0IG5vIGRlYWxlciBibGFja2phY2sKICAgICAgZWxzZSBpZiAobnVtQ2FyZHMubGVuZ3RoID09IDEgJiYgcGxheWVyVmFsdWUgPT0gMjEgJiYgbnVtQ2FyZHNbaF0gPT0gMiAmJiAhZGVhbGVyQkopIHsKICAgICAgICB3aW4gPSBnYW1lLmJldCAqIDUgLyAyOyAvL3BheSAzIHRvIDIKICAgICAgfQogICAgICAvL3BsYXllciB3aW5zIHJlZ3VsYXJseQogICAgICBlbHNlIGlmIChwbGF5ZXJWYWx1ZSA+IGRlYWxlclZhbHVlIHx8IGRlYWxlclZhbHVlID4gMjEpCiAgICAgICAgd2luID0gZ2FtZS5iZXQgKiAyOwogICAgICAvL3RpZQogICAgICBlbHNlIGlmIChwbGF5ZXJWYWx1ZSA9PSBkZWFsZXJWYWx1ZSkKICAgICAgICB3aW4gPSBnYW1lLmJldDsKICAgICAgLy9wbGF5ZXIgbG9vc2VzCiAgICAgIGVsc2UKICAgICAgICB3aW4gPSAwOwoKICAgICAgaWYgKGRvdWJsZWRbZ2FtZUlkXVtoXSkgd2luICo9IDI7CiAgICAgIHRvdGFsV2luICs9IHdpbjsKICAgIH0KICB9CgogIC8qKgogICAqICAgY2FsY3VsYXRlcyB0aGUgdmFsdWUgb2YgdGhlIHBsYXllcidzIGhhbmRzLgogICAqICAgQHBhcmFtIGNhcmRzICAgICBob2xkcyB0aGUgKHBhcnRpYWwpIGRlY2suCiAgICogICAgICAgICAgbnVtQ2FyZHMgIHRoZSBudW1iZXIgb2YgY2FyZHMgcGVyIHBsYXllciBoYW5kCiAgICogICAgICAgICAgcFNwbGl0cyAgIHRoZSBwbGF5ZXIncyBzcGxpdHMgKGhhbmQgaW5kZXgpCiAgICogICBAcmV0dXJuIHRoZSB2YWx1ZXMgb2YgdGhlIHBsYXllcidzIGhhbmRzCiAgICoqLwogIGZ1bmN0aW9uIGdldFBsYXllclZhbHVlcyh1aW50OFtdIGNhcmRzLCB1aW50OFtdIG51bUNhcmRzLCB1aW50OFtdIHBTcGxpdHMpIGNvbnN0YW50IGludGVybmFsIHJldHVybnModWludDhbNV0gcGxheWVyVmFsdWVzKSB7CiAgICB1aW50OCBjYXJkSW5kZXg7CiAgICB1aW50OCBzcGxpdEluZGV4OwogICAgKGNhcmRJbmRleCwgc3BsaXRJbmRleCwgcGxheWVyVmFsdWVzKSA9IHBsYXlIYW5kKDAsIDAsIDAsIHBsYXllclZhbHVlcywgY2FyZHMsIG51bUNhcmRzLCBwU3BsaXRzKTsKICB9CgogIC8qKgogICAqICAgcmVjdXJzaXZlbHkgcGxheXMgdGhlIHBsYXllcidzIGhhbmRzLgogICAqICAgQHBhcmFtIGhJbmRleCAgICAgICAgdGhlIGhhbmQgaW5kZXgKICAgKiAgICAgICAgICBjSW5kZXggICAgICAgIHRoZSBpbmRleCBvZiB0aGUgbmV4dCBjYXJkIHRvIGRyYXcKICAgKiAgICAgICAgICBzSW5kZXggICAgICAgIHRoZSBpbmRleCBvZiB0aGUgbmV4dCBzcGxpdCwgaWYgdGhlcmUgaXMgYW55CiAgICogICAgICAgICAgcGxheWVyVmFsdWVzICB0aGUgdmFsdWVzIG9mIHRoZSBwbGF5ZXIncyBoYW5kcyAobm90IHlldCBjb21wbGV0ZSkKICAgKiAgICAgICAgICBjYXJkcyAgICAgICAgIGhvbGRzIHRoZSAocGFydGlhbCkgZGVjay4KICAgKiAgICAgICAgICBudW1DYXJkcyAgICAgIHRoZSBudW1iZXIgb2YgY2FyZHMgcGVyIHBsYXllciBoYW5kCiAgICogICAgICAgICAgcFNwbGl0cyAgICAgICAgdGhlIGFycmF5IG9mIHNwbGl0cwogICAqICAgQHJldHVybiB0aGUgdmFsdWVzIG9mIHRoZSBwbGF5ZXIncyBoYW5kcyBhbmQgdGhlIGN1cnJlbnQgY2FyZCBpbmRleAogICAqKi8KICBmdW5jdGlvbiBwbGF5SGFuZCh1aW50OCBoSW5kZXgsIHVpbnQ4IGNJbmRleCwgdWludDggc0luZGV4LCB1aW50OFs1XSBwbGF5ZXJWYWx1ZXMsIHVpbnQ4W10gY2FyZHMsIHVpbnQ4W10gbnVtQ2FyZHMsIHVpbnQ4W10gcFNwbGl0cykgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyh1aW50OCwgdWludDgsIHVpbnQ4WzVdKSB7CiAgICBwbGF5ZXJWYWx1ZXNbaEluZGV4XSA9IGNhcmRWYWx1ZXNbY2FyZHNbY0luZGV4XSAlIDEzXTsKICAgIGNJbmRleCA9IGNJbmRleCA8IDQgPyBjSW5kZXggKyAyIDogY0luZGV4ICsgMTsKICAgIHdoaWxlIChzSW5kZXggPCBwU3BsaXRzLmxlbmd0aCAmJiBwU3BsaXRzW3NJbmRleF0gPT0gaEluZGV4KSB7CiAgICAgIHNJbmRleCsrOwogICAgICAoY0luZGV4LCBzSW5kZXgsIHBsYXllclZhbHVlcykgPSBwbGF5SGFuZChzSW5kZXgsIGNJbmRleCwgc0luZGV4LCBwbGF5ZXJWYWx1ZXMsIGNhcmRzLCBudW1DYXJkcywgcFNwbGl0cyk7CiAgICB9CiAgICB1aW50OCBudW1BY2VzID0gcGxheWVyVmFsdWVzW2hJbmRleF0gPT0gMTEgPyAxIDogMDsKICAgIHVpbnQ4IGNhcmQ7CiAgICBmb3IgKHVpbnQ4IGkgPSAxOyBpIDwgbnVtQ2FyZHNbaEluZGV4XTsgaSsrKSB7CiAgICAgIGNhcmQgPSBjYXJkc1tjSW5kZXhdICUgMTM7CiAgICAgIHBsYXllclZhbHVlc1toSW5kZXhdICs9IGNhcmRWYWx1ZXNbY2FyZF07CiAgICAgIGlmIChjYXJkID09IDApIG51bUFjZXMrKzsKICAgICAgY0luZGV4ID0gY0luZGV4IDwgNCA/IGNJbmRleCArIDIgOiBjSW5kZXggKyAxOwogICAgfQogICAgd2hpbGUgKG51bUFjZXMgPiAwICYmIHBsYXllclZhbHVlc1toSW5kZXhdID4gMjEpIHsKICAgICAgcGxheWVyVmFsdWVzW2hJbmRleF0gLT0gMTA7CiAgICAgIG51bUFjZXMtLTsKICAgIH0KICAgIHJldHVybiAoY0luZGV4LCBzSW5kZXgsIHBsYXllclZhbHVlcyk7CiAgfQoKCgogIC8qKgogICAqICAgY2FsY3VsYXRlcyB0aGUgdmFsdWUgb2YgYSBkZWFsZXIncyBoYW5kLgogICAqICAgQHBhcmFtIGNhcmRzICAgICBob2xkcyB0aGUgKHBhcnRpYWwpIGRlY2suCiAgICogICAgICAgICAgbnVtQ2FyZHMgIHRoZSBudW1iZXIgb2YgY2FyZHMgdGhlIHBsYXllciBob2xkcwogICAqICAgQHJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGRlYWxlcidzIGhhbmQgYW5kIGEgZmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBkZWFsZXIgaGFzIGdvdCBhIGJsYWNramFjawogICAqKi8KICBmdW5jdGlvbiBnZXREZWFsZXJWYWx1ZSh1aW50OFtdIGNhcmRzLCB1aW50OCBudW1DYXJkcykgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyh1aW50OCBkZWFsZXJWYWx1ZSwgYm9vbCBiaikgewoKICAgIC8vZGVhbGVyIGFsd2F5cyByZWNlaXZlcyBzZWNvbmQgYW5kIGZvcnRoIGNhcmQKICAgIHVpbnQ4IGNhcmQgPSBjYXJkc1sxXSAlIDEzOwogICAgdWludDggY2FyZDIgPSBjYXJkc1szXSAlIDEzOwogICAgZGVhbGVyVmFsdWUgPSBjYXJkVmFsdWVzW2NhcmRdICsgY2FyZFZhbHVlc1tjYXJkMl07CiAgICB1aW50OCBudW1BY2VzOwogICAgaWYgKGNhcmQgPT0gMCkgbnVtQWNlcysrOwogICAgaWYgKGNhcmQyID09IDApIG51bUFjZXMrKzsKICAgIGlmIChkZWFsZXJWYWx1ZSA+IDIxKSB7IC8vMiBhY2VzLGNvdW50IGFzIDEyCiAgICAgIGRlYWxlclZhbHVlIC09IDEwOwogICAgICBudW1BY2VzLS07CiAgICB9IGVsc2UgaWYgKGRlYWxlclZhbHVlID09IDIxKSB7CiAgICAgIHJldHVybiAoMjEsIHRydWUpOwogICAgfQogICAgLy90YWtlIGNhcmRzIHVudGlsIHZhbHVlIHJlYWNoZXMgMTcgb3IgbW9yZS4gCiAgICB1aW50OCBpOwogICAgd2hpbGUgKGRlYWxlclZhbHVlIDwgMTcpIHsKICAgICAgY2FyZCA9IGNhcmRzW251bUNhcmRzICsgaSArIDJdICUgMTM7CiAgICAgIGRlYWxlclZhbHVlICs9IGNhcmRWYWx1ZXNbY2FyZF07CiAgICAgIGlmIChjYXJkID09IDApIG51bUFjZXMrKzsKICAgICAgaWYgKGRlYWxlclZhbHVlID4gMjEgJiYgbnVtQWNlcyA+IDApIHsKICAgICAgICBkZWFsZXJWYWx1ZSAtPSAxMDsKICAgICAgICBudW1BY2VzLS07CiAgICAgIH0KICAgICAgaSsrOwogICAgfQogIH0KCiAgLyoqCiAgICogc3VtcyB1cCB0aGUgZ2l2ZW4gbnVtYmVycwogICAqIG5vdGU6ICBwbGF5ZXIgd2lsbCBhbHdheXMgaG9sZCBsZXNzIHRoYW4gMTAwIGNhcmRzCiAgICogQHBhcmFtIG51bWJlcnMgICB0aGUgbnVtYmVycyB0byBzdW0gdXAKICAgKiBAcmV0dXJuIHRoZSBzdW0gb2YgdGhlIG51bWJlcnMKICAgKiovCiAgZnVuY3Rpb24gc3VtKHVpbnQ4W10gbnVtYmVycykgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyh1aW50OCBzKSB7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBudW1iZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHMgKz0gbnVtYmVyc1tpXTsKICAgIH0KICB9Cgp9'.
	

]
