Class {
	#name : #SRT333ed5c993816de6fb3ee49de7c6deb8d70cf982,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT333ed5c993816de6fb3ee49de7c6deb8d70cf982 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKY29udHJhY3QgT3duYWJsZSB7CiAgICAgIGFkZHJlc3MgcHVibGljICAgICAgICBvd25lcjsKCgogICAgICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkIChhZGRyZXNzIGluZGV4ZWQgcHJldk93bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKICAgICAgICBmdW5jdGlvbiBPd25hYmxlICgpIHB1YmxpYyB7CiAgICAgICAgICAgICAgICBvd25lciAgICAgICA9IG1zZy5zZW5kZXI7CiAgICAgICAgfQoKICAgICAgICBtb2RpZmllciBvbmx5T3duZXIgKCkgewogICAgICAgICAgICAgICAgcmVxdWlyZSAobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgICAgICAgICBfOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAgKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgICAgICAgIHJlcXVpcmUgKG5ld093bmVyICE9IGFkZHJlc3MgKDApKTsKCiAgICAgICAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQgKG93bmVyLCBuZXdPd25lcik7CiAgICAgICAgICAgICAgb3duZXIgICAgID0gbmV3T3duZXI7CiAgICAgICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICAgICAgZnVuY3Rpb24gYWRkICh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgICAgICAgdWludDI1NiAgIGMgPSBhICsgYjsKICAgICAgICAgICAgICBhc3NlcnQgKGMgPj0gYSk7CiAgICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdWIgKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAgICAgICBhc3NlcnQgKGIgPD0gYSk7CiAgICAgICAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbXVsICh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgICAgICAgICBpZiAoYSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgICAgICAgICBhc3NlcnQgKGMvYSA9PSBiKTsKICAgICAgICAgICAgICAgIHJldHVybiBjOwogICAgICAgIH0KfQoKCi8vIEVSQzIwIHN0YW5kYXJkCmNvbnRyYWN0IEVSQzIwIHsKICAgICAgICAvLyBCYXNpYwogICAgICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5ICgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgICAgIGZ1bmN0aW9uIGJhbGFuY2VPZiAoYWRkcmVzcyB0b2tlbk93bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgICAgICBmdW5jdGlvbiB0cmFuc2ZlciAoYWRkcmVzcyB0bywgdWludDI1NiBhbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgICAgICBldmVudCBUcmFuc2ZlciAoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwoKICAgICAgICAvLyBBZGRpdGlvbmFsCiAgICAgICAgZnVuY3Rpb24gYWxsb3dhbmNlIChhZGRyZXNzIHRva2VuT3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICAgICAgZnVuY3Rpb24gYXBwcm92ZSAoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IGFtb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSAoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IGFtb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgICAgIGV2ZW50IEFwcHJvdmFsIChhZGRyZXNzIGluZGV4ZWQgdG9rZW5Pd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgYW1vdW50KTsKfQoKCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAgewogICAgICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgICAgICAvLyBCYXNpYwogICAgICAgIHVpbnQyNTYgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90b2tlblRvdGFsOwogICAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgICAgICAgIF90b2tlbkJhbGFuY2VzOwoKICAgICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSAoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3Rva2VuVG90YWw7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBiYWxhbmNlT2YgKGFkZHJlc3MgdG9rZW5Pd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgICAgICAgICAgcmV0dXJuIF90b2tlbkJhbGFuY2VzW3Rva2VuT3duZXJdOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gX3RyYW5zZmVyIChhZGRyZXNzIHRvLCB1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgewogICAgICAgICAgICAgICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgICAgICAgICAgICAgLy8gU2FmZU1hdGguYWRkIHdpbGwgdGhyb3cgaWYgb3ZlcmZsb3dzCiAgICAgICAgICAgICAgICBfdG9rZW5CYWxhbmNlc1ttc2cuc2VuZGVyXSAgICAgID0gX3Rva2VuQmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViIChhbW91bnQpOwogICAgICAgICAgICAgICAgX3Rva2VuQmFsYW5jZXNbdG9dICAgICAgICAgICAgICA9IF90b2tlbkJhbGFuY2VzW3RvXS5hZGQgKGFtb3VudCk7CgogICAgICAgICAgICAgICAgVHJhbnNmZXIgKG1zZy5zZW5kZXIsIHRvLCBhbW91bnQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdHJhbnNmZXIgKGFkZHJlc3MgdG8sIHVpbnQyNTYgYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgICAgICAgICAgcmVxdWlyZSAodG8gIT0gYWRkcmVzcyAoMCkpOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoYW1vdW50IDw9IF90b2tlbkJhbGFuY2VzW21zZy5zZW5kZXJdKTsgICAgIC8vIHNob3VsZCBub3QgYmUgbmVjZXNzYXJ5LCBidXQgZG91YmxlIGNoZWNrcwoKICAgICAgICAgICAgICAgIF90cmFuc2ZlciAodG8sIGFtb3VudCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgoKICAgICAgICAvLyBBZGRpdGlvbmFsCiAgICAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCAgX3Rva2VuQWxsb3dhbmNlOwoKICAgICAgICBmdW5jdGlvbiBhbGxvd2FuY2UgKGFkZHJlc3MgdG9rZW5Pd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3Rva2VuQWxsb3dhbmNlW3Rva2VuT3duZXJdW3NwZW5kZXJdOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYXBwcm92ZSAoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IGFtb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAgICAgICAgIF90b2tlbkFsbG93YW5jZVttc2cuc2VuZGVyXVtzcGVuZGVyXSAgID0gYW1vdW50OwogICAgICAgICAgICAgICAgQXBwcm92YWwgKG1zZy5zZW5kZXIsIHNwZW5kZXIsIGFtb3VudCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIF90cmFuc2ZlckZyb20gKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiBhbW91bnQpIGludGVybmFsIHsKICAgICAgICAgICAgICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgICAgICAgICAgICAgIC8vIFNhZmVNYXRoLmFkZCB3aWxsIHRocm93IGlmIG92ZXJmbG93cwogICAgICAgICAgICAgICAgX3Rva2VuQmFsYW5jZXNbZnJvbV0gICAgPSBfdG9rZW5CYWxhbmNlc1tmcm9tXS5zdWIgKGFtb3VudCk7CiAgICAgICAgICAgICAgICBfdG9rZW5CYWxhbmNlc1t0b10gICAgICA9IF90b2tlbkJhbGFuY2VzW3RvXS5hZGQgKGFtb3VudCk7CgogICAgICAgICAgICAgICAgVHJhbnNmZXIgKGZyb20sIHRvLCBhbW91bnQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tIChhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgICAgICAgICAgcmVxdWlyZSAodG8gIT0gYWRkcmVzcyAoMCkpOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoYW1vdW50IDw9IF90b2tlbkJhbGFuY2VzW2Zyb21dKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKGFtb3VudCA8PSBfdG9rZW5BbGxvd2FuY2VbZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgICAgICAgICAgICAgIF90cmFuc2ZlckZyb20gKGZyb20sIHRvLCBhbW91bnQpOwoKICAgICAgICAgICAgICAgIF90b2tlbkFsbG93YW5jZVtmcm9tXVttc2cuc2VuZGVyXSAgICAgPSBfdG9rZW5BbGxvd2FuY2VbZnJvbV1bbXNnLnNlbmRlcl0uc3ViIChhbW91bnQpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQp9CgoKY29udHJhY3QgUlNQU2NpZW5jZUludGVyZmFjZSB7CgogICAgICAgIGZ1bmN0aW9uIGlzUlNQU2NpZW5jZSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpOwogICAgICAgIGZ1bmN0aW9uIGNhbGNQb3NlQml0cyAodWludDI1NiBzZWssIHVpbnQyNTYgcG9zZXNlazAsIHVpbnQyNTYgcG9zZXNlazEpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQyNTYpOwp9CgoKY29udHJhY3QgUm9ja1NjaXNzb3JQYXBlciBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICAgICAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICAgICAgc3RyaW5nIHB1YmxpYyAgIG5hbWUgICAgICAgICAgICAgICAgPSAnUm9ja1NjaXNzb3JQYXBlcic7CiAgICAgICAgc3RyaW5nIHB1YmxpYyAgIHN5bWJvbCAgICAgICAgICAgICAgPSAnUlNQJzsKICAgICAgICB1aW50OCBwdWJsaWMgICAgZGVjaW1hbHMgICAgICAgICAgICA9IDE4OwoKICAgICAgICAvLyB1aW50MjU2IHB1YmxpYyAgaW5pdGlhbEFtb3VudCAgICAgICAgPSA1ICogMTAqKnVpbnQoZGVjaW1hbHMrNik7CgogICAgICAgIFJTUFNjaWVuY2VJbnRlcmZhY2UgcHVibGljICAgICAgcnNwU2NpZW5jZTsKCgogICAgICAgIGZ1bmN0aW9uIF9zZXRSU1BTY2llbmNlQWRkcmVzcyAoYWRkcmVzcyBhZGRyKSBpbnRlcm5hbCB7CiAgICAgICAgICAgICAgICBSU1BTY2llbmNlSW50ZXJmYWNlICAgICBjYW5kaWRhdGUgICA9IFJTUFNjaWVuY2VJbnRlcmZhY2UgKGFkZHIpOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoY2FuZGlkYXRlLmlzUlNQU2NpZW5jZSAoKSk7CiAgICAgICAgICAgICAgICByc3BTY2llbmNlICAgICAgPSBjYW5kaWRhdGU7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzZXRSU1BTY2llbmNlQWRkcmVzcyAoYWRkcmVzcyBhZGRyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICAgICAgICAgIF9zZXRSU1BTY2llbmNlQWRkcmVzcyAoYWRkcik7CiAgICAgICAgfQoKICAgICAgICAvLyBDb25zdHJ1Y3RvciBpcyBub3QgY2FsbGVkIG11bHRpcGxlIHRpbWVzLCBmb3J0dW5hdGVseQogICAgICAgIGZ1bmN0aW9uIFJvY2tTY2lzc29yUGFwZXIgKGFkZHJlc3MgYWRkcikgcHVibGljIHsKICAgICAgICAgICAgICAgIC8vIE9ud2VyIHNob3VsZCBiZSBzZXQgdXAgYW5kIGJlY29tZSBtc2cuc2VuZGVyCiAgICAgICAgICAgICAgICAvLyBEdXJpbmcgdGVzdCwgbWludCBvd25lciBzb21lIGFtb3VudAogICAgICAgICAgICAgICAgLy8gRHVyaW5nIGRlcGxveW1lbnQsIG9ud2VyIGhpbXNlbGYgaGFzIHRvIGJ1eSB0b2tlbnMgdG8gYmUgZmFpcgogICAgICAgICAgICAgICAgLy8gX21pbnQgKG1zZy5zZW5kZXIsIGluaXRpYWxBbW91bnQpOwoKICAgICAgICAgICAgICAgIGlmIChhZGRyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3NldFJTUFNjaWVuY2VBZGRyZXNzIChhZGRyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICAgICAgICAgIHJldmVydCAoKTsKICAgICAgICB9CgoKICAgICAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyAgICAgICAgIHdlaUludmVzdGVkOwogICAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljICAgICAgICAgd2VpUmVmdW5kZWQ7CgogICAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYWRkcmVzcykgcHVibGljICAgICAgICAgcmVmZXJyYWxzOwogICAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljICAgICAgICAgblJlZnM7CiAgICAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgICAgICAgICB3ZWlGcm9tUmVmczsKCiAgICAgICAgZXZlbnQgVG9rZW5JbnZlc3QgKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIHVpbnQyNTYgbldlaXMsIHVpbnQyNTYgblRva2VucywgYWRkcmVzcyByZWZlcnJhbCk7CiAgICAgICAgZXZlbnQgVG9rZW5SZWZ1bmQgKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIHVpbnQyNTYgbldlaXMsIHVpbnQyNTYgblRva2Vucyk7CgogICAgICAgIC8vIEJ1eWluZyBhbmQgc2VsbGluZyBpbmN1ciBtaW50aW5nIGFuZCBidXJuaW5nCiAgICAgICAgZnVuY3Rpb24gX21pbnQgKGFkZHJlc3MgdG9rZW5Pd25lciwgdWludDI1NiBhbW91bnQpIGludGVybmFsIHsKICAgICAgICAgICAgICAgIF90b2tlblRvdGFsICAgICAgICAgICAgICAgICAgICAgPSBfdG9rZW5Ub3RhbC5hZGQgKGFtb3VudCk7CiAgICAgICAgICAgICAgICBfdG9rZW5CYWxhbmNlc1t0b2tlbk93bmVyXSAgICAgKz0gYW1vdW50OyAgIC8vIG5vIG5lZWQgdG8gcmVxdWlyZSwgb3ZlcmZsb3cgYWxyZWFkeSBjaGVja2VkIGFib3ZlCgogICAgICAgICAgICAgICAgLy8gSnVzdCBlbWl0IGEgVHJhbnNmZXIgRXZlbnQKICAgICAgICAgICAgICAgIFRyYW5zZmVyIChhZGRyZXNzICgwKSwgdG9rZW5Pd25lciwgYW1vdW50KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIF9idXJuIChhZGRyZXNzIHRva2VuT3duZXIsIHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB7CiAgICAgICAgICAgICAgICBfdG9rZW5CYWxhbmNlc1t0b2tlbk93bmVyXSAgPSBfdG9rZW5CYWxhbmNlc1t0b2tlbk93bmVyXS5zdWIgKGFtb3VudCk7CiAgICAgICAgICAgICAgICBfdG9rZW5Ub3RhbCAgICAgICAgICAgICAgICAtPSBhbW91bnQ7ICAgICAgIC8vIG5vIG5lZWQgdG8gcmVxdWlyZSwgdW5kZXJmbG93IGFscmVhZHkgY2hlY2tlZCBhYm92ZQoKICAgICAgICAgICAgICAgIC8vIEp1c3QgZW1pdCBhIFRyYW5zZmVyIEV2ZW50CiAgICAgICAgICAgICAgICBUcmFuc2ZlciAodG9rZW5Pd25lciwgYWRkcmVzcyAoMCksIGFtb3VudCk7CiAgICAgICAgfQoKICAgICAgICAvLyBPbmx5IG93bmVyIGlzIGFsbG93ZWQgdG8gZG8gdGhpcwogICAgICAgIGZ1bmN0aW9uIG1pbnQgKHVpbnQyNTYgYW1vdW50KSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICAgICAgICAgIF9taW50IChtc2cuc2VuZGVyLCBhbW91bnQpOwogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIGJ1eVRva2VucyAoYWRkcmVzcyByZWZlcnJhbCkgcHVibGljIHBheWFibGUgewogICAgICAgICAgICAgICAgLy8gbWluaW11bSBidXlzOiAxIHRva2VuCiAgICAgICAgICAgICAgICB1aW50MjU2ICAgICBhbW91bnQgICAgICA9IG1zZy52YWx1ZS5tdWwgKDUwMDApOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoYW1vdW50ID49IDEgKiAxMCoqdWludChkZWNpbWFscykpOwoKICAgICAgICAgICAgICAgIC8vIF9wcm9jZXNzUHVyY2hhc2UsIF9kZWxpdmVyVG9rZW5zIHVzaW5nIE1pbnRpbmcKICAgICAgICAgICAgICAgIF9taW50IChtc2cuc2VuZGVyLCBhbW91bnQpOwoKICAgICAgICAgICAgICAgIGlmICggcmVmZXJyYWxzW21zZy5zZW5kZXJdID09IGFkZHJlc3MoMCkgJiYKICAgICAgICAgICAgICAgICAgICAgcmVmZXJyYWwgIT0gbXNnLnNlbmRlciApIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlZmVycmFsID09IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcnJhbCAgICA9IG93bmVyOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICByZWZlcnJhbHNbbXNnLnNlbmRlcl0gICA9IHJlZmVycmFsOwogICAgICAgICAgICAgICAgICAgICAgICBuUmVmc1tyZWZlcnJhbF0gICAgICAgICs9IDE7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gRnVuZCBsb2dzCiAgICAgICAgICAgICAgICB3ZWlJbnZlc3RlZFttc2cuc2VuZGVyXSAgICArPSBtc2cudmFsdWU7CiAgICAgICAgICAgICAgICBUb2tlbkludmVzdCAobXNnLnNlbmRlciwgbXNnLnZhbHVlLCBhbW91bnQsIHJlZmVycmFsKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNlbGxUb2tlbnMgKHVpbnQyNTYgYW1vdW50KSBwdWJsaWMgewogICAgICAgICAgICAgICAgX2J1cm4gKG1zZy5zZW5kZXIsIGFtb3VudCk7CgogICAgICAgICAgICAgICAgLy8gdWludDI1NiAgICAgbldlaXMgICA9IGFtb3VudC9yYXRlICogMC45OwogICAgICAgICAgICAgICAgdWludDI1NiAgICAgbldlaXMgICA9IGFtb3VudCAvIDUwMDA7CiAgICAgICAgICAgICAgICAvLyBnYW1lQmFsYW5jZSAgICAgICAgLT0gbldlaXM7CgogICAgICAgICAgICAgICAgLy8gRnVuZCBsb2dzCiAgICAgICAgICAgICAgICB3ZWlSZWZ1bmRlZFttc2cuc2VuZGVyXSAgICAgKz0gbldlaXM7CiAgICAgICAgICAgICAgICBUb2tlblJlZnVuZCAobXNnLnNlbmRlciwgbldlaXMsIGFtb3VudCk7CgogICAgICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlciAobldlaXMpOwogICAgICAgIH0KCgoKICAgICAgICAvLyBHYW1pbmdzCiAgICAgICAgc3RydWN0IEdhbWVSU1AgewogICAgICAgICAgICAgICAgYWRkcmVzcyAgICAgICAgIGNyZWF0b3I7CiAgICAgICAgICAgICAgICB1aW50MjU2ICAgICAgICAgY3JlYXRvclBvc2U7CiAgICAgICAgICAgICAgICAvLyB1aW50MjU2CiAgICAgICAgICAgICAgICB1aW50MjU2ICAgICAgICAgblRva2VuczsKCiAgICAgICAgICAgICAgICBhZGRyZXNzICAgICAgICAgcGxheWVyOwogICAgICAgICAgICAgICAgdWludDI1NiAgICAgICAgIHBsYXllclBvc2U7CiAgICAgICAgICAgICAgICB1aW50MjU2ICAgICAgICAgc2VrOwogICAgICAgICAgICAgICAgdWludDI1NiAgICAgICAgIHBvc2ViaXRzOwogICAgICAgIH0KCgogICAgICAgIEdhbWVSU1BbXSAgIGdhbWVzOwogICAgICAgIC8vIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljICAgICAgICAgbGFzdEdhbWVJZDsKCiAgICAgICAgZnVuY3Rpb24gdG90YWxHYW1lcyAoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2FtZXMubGVuZ3RoOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2FtZUluZm8gKHVpbnQyNTYgZ2FtZUlkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzLCB1aW50MjU2LCB1aW50MjU2LCBhZGRyZXNzLCB1aW50MjU2LCB1aW50MjU2LCB1aW50MjU2KSB7CiAgICAgICAgICAgICAgICBHYW1lUlNQIHN0b3JhZ2UgICAgIGdhbWUgICAgPSBnYW1lc1tnYW1lSWRdOwoKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgZ2FtZS5jcmVhdG9yLAogICAgICAgICAgICAgICAgICAgIGdhbWUuY3JlYXRvclBvc2UsCiAgICAgICAgICAgICAgICAgICAgZ2FtZS5uVG9rZW5zLAogICAgICAgICAgICAgICAgICAgIGdhbWUucGxheWVyLAogICAgICAgICAgICAgICAgICAgIGdhbWUucGxheWVyUG9zZSwKICAgICAgICAgICAgICAgICAgICBnYW1lLnNlaywKICAgICAgICAgICAgICAgICAgICBnYW1lLnBvc2ViaXRzCiAgICAgICAgICAgICAgICApOwogICAgICAgIH0KCgogICAgICAgIHVpbnQ4IHB1YmxpYyAgICAgICAgb3duZXJDdXQgICAgICAgICAgICA9IDU7ICAgICAgICAgICAgICAgIC8vIDUgcGVyY2VudAogICAgICAgIHVpbnQ4IHB1YmxpYyAgICAgICAgcmVmZXJyYWxDdXQgICAgICAgICA9IDU7ICAgICAgICAgICAgICAgIC8vIDUgcGVyY2VudAogICAgICAgIGZ1bmN0aW9uIGNoYW5nZUZlZUN1dCAodWludDggb3duQ3V0LCB1aW50OCByZWZDdXQpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgICAgICAgICAgb3duZXJDdXQgICAgICAgID0gb3duQ3V0OwogICAgICAgICAgICAgICAgcmVmZXJyYWxDdXQgICAgID0gcmVmQ3V0OwogICAgICAgIH0KCgogICAgICAgIGV2ZW50IEdhbWVDcmVhdGVkIChhZGRyZXNzIGluZGV4ZWQgY3JlYXRvciwgdWludDI1NiBnYW1lSWQsIHVpbnQyNTYgcG9zZSk7CiAgICAgICAgZXZlbnQgR2FtZVBsYXllZCAoYWRkcmVzcyBpbmRleGVkIHBsYXllciwgdWludDI1NiBnYW1lSWQsIHVpbnQyNTYgcG9zZSk7CiAgICAgICAgZXZlbnQgR2FtZVNvbHZlZCAoYWRkcmVzcyBpbmRleGVkIHNvbHZlciwgdWludDI1NiBnYW1lSWQsIHVpbnQyNTYgcG9zZWJpdHMsIGFkZHJlc3MgcmVmZXJyYWwsIHVpbnQyNTYgc29sdmVyRmVlKTsKCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlR2FtZSAodWludDI1NiBhbW91bnQsIHVpbnQyNTYgcG9zZSkgcHVibGljIHsKICAgICAgICAgICAgICAgIC8vIFdpbGwgY2hlY2sgdG9rZW5CYWxhbmNlIG9mIHNlbmRlciBpbiB0cmFuc2ZlciAoKQogICAgICAgICAgICAgICAgLy8gcmVxdWlyZSAoX3Rva2VuQmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gYW1vdW50ICYmIGFtb3VudCA+PSAxMDAgKiAxMCoqdWludChkZWNpbWFscykpOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoX3Rva2VuQmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gYW1vdW50KTsKCiAgICAgICAgICAgICAgICAvLyBXZSBzZXQgMSBhcyB0aGUgbWluaW1hbCB0b2tlbiByZXF1aXJlZCwgYnV0IDEwMCB0b2tlbnMgcHJvYmFibHkgaXMgdGhlIG1pbmltdW0gdmlhYmxlCiAgICAgICAgICAgICAgICByZXF1aXJlIChhbW91bnQgPj0gMSAqIDEwKip1aW50KGRlY2ltYWxzKSk7CgoKICAgICAgICAgICAgICAgIC8vIGVzY3JldyB0b2tlbnM7CiAgICAgICAgICAgICAgICBfdHJhbnNmZXIgKHRoaXMsIGFtb3VudCk7CgogICAgICAgICAgICAgICAgR2FtZVJTUCBtZW1vcnkgICAgICBnYW1lICAgID0gR2FtZVJTUCAoewogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdG9yOiAgICAgICAgbXNnLnNlbmRlciwKICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRvclBvc2U6ICAgIHBvc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIG5Ub2tlbnM6ICAgICAgICBhbW91bnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjogICAgICAgICBhZGRyZXNzICgwKSwKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyUG9zZTogICAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlazogICAgICAgICAgICAwLAogICAgICAgICAgICAgICAgICAgICAgICBwb3NlYml0czogICAgICAgMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdWludDI1NiAgICAgZ2FtZUlkICAgICAgICAgID0gZ2FtZXMucHVzaCAoZ2FtZSkgLSAxOwoKICAgICAgICAgICAgICAgIC8vIGxhc3RHYW1lSWRbbXNnLnNlbmRlcl0gICAgICA9IGdhbWVJZDsKICAgICAgICAgICAgICAgIC8vIFRvZG86IExhc3QgR2FtZUlkCiAgICAgICAgICAgICAgICAvLyBMZXQncyBiZSBhYnNvbHV0ZWx5IHN1cmUgYXJyYXkgZG9uJ3QgaGl0IGl0cyBsaW1pdHMKICAgICAgICAgICAgICAgIHJlcXVpcmUgKGdhbWVJZCA9PSB1aW50MjU2KHVpbnQzMihnYW1lSWQpKSk7CiAgICAgICAgICAgICAgICBHYW1lQ3JlYXRlZCAobXNnLnNlbmRlciwgZ2FtZUlkLCBwb3NlKTsKICAgICAgICB9CgoKICAgICAgICBmdW5jdGlvbiBwbGF5R2FtZSAodWludDI1NiBnYW1lSWQsIHVpbnQyNTYgcG9zZSkgcHVibGljIHsKICAgICAgICAgICAgICAgIEdhbWVSU1Agc3RvcmFnZSAgICAgZ2FtZSAgICA9IGdhbWVzW2dhbWVJZF07CgogICAgICAgICAgICAgICAgcmVxdWlyZSAobXNnLnNlbmRlciAhPSBnYW1lLmNyZWF0b3IpOwogICAgICAgICAgICAgICAgcmVxdWlyZSAoZ2FtZS5wbGF5ZXIgPT0gYWRkcmVzcyAoMCkpOwoKICAgICAgICAgICAgICAgIHVpbnQyNTYgICAgIG5Ub2tlbnMgPSBnYW1lLm5Ub2tlbnM7CiAgICAgICAgICAgICAgICAvLyBXaWxsIGNoZWNrIHRva2VuQmFsYW5jZSBvZiBzZW5kZXIgaW4gdHJhbnNmZXIgKCkKICAgICAgICAgICAgICAgIHJlcXVpcmUgKF90b2tlbkJhbGFuY2VzW21zZy5zZW5kZXJdID49IG5Ub2tlbnMpOwoKICAgICAgICAgICAgICAgIC8vIGVzY3JldyB0b2tlbnM7CiAgICAgICAgICAgICAgICBfdHJhbnNmZXIgKHRoaXMsIG5Ub2tlbnMpOwoKICAgICAgICAgICAgICAgIGdhbWUucGxheWVyICAgICAgICAgPSBtc2cuc2VuZGVyOwogICAgICAgICAgICAgICAgZ2FtZS5wbGF5ZXJQb3NlICAgICA9IHBvc2U7CgogICAgICAgICAgICAgICAgR2FtZVBsYXllZCAobXNnLnNlbmRlciwgZ2FtZUlkLCBwb3NlKTsKICAgICAgICB9CgogICAgICAgIC8vIENvbnZlbmllbmNlIGZ1bmN0aW9ucwogICAgICAgIGZ1bmN0aW9uIGJ1eUFuZENyZWF0ZUdhbWUgKHVpbnQyNTYgYW1vdW50LCB1aW50MjU2IHBvc2UsIGFkZHJlc3MgcmVmZXJyYWwpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICAgICAgICAgIGJ1eVRva2VucyAocmVmZXJyYWwpOwogICAgICAgICAgICAgICAgY3JlYXRlR2FtZSAoYW1vdW50LCBwb3NlKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGJ1eUFuZFBsYXlHYW1lICh1aW50MjU2IGdhbWVJZCwgdWludDI1NiBwb3NlLCBhZGRyZXNzIHJlZmVycmFsKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgICAgICAgICBidXlUb2tlbnMgKHJlZmVycmFsKTsKICAgICAgICAgICAgICAgIHBsYXlHYW1lIChnYW1lSWQsIHBvc2UpOwogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIF9zb2x2ZUdhbWUgKHVpbnQyNTYgZ2FtZUlkLCB1aW50MjU2IHNlaywgdWludDI1NiBzb2xGZWUpIHB1YmxpYyB7CiAgICAgICAgICAgICAgICBHYW1lUlNQIHN0b3JhZ2UgICAgIGdhbWUgICAgPSBnYW1lc1tnYW1lSWRdOwoKICAgICAgICAgICAgICAgIHJlcXVpcmUgKGdhbWUucGxheWVyICE9IGFkZHJlc3MgKDApKTsKICAgICAgICAgICAgICAgIHVpbnQyNTYgICAgIG5Ub2tlbnMgICAgID0gZ2FtZS5uVG9rZW5zOwoKICAgICAgICAgICAgICAgIHJlcXVpcmUgKF90b2tlbkJhbGFuY2VzW3RoaXNdID49IG5Ub2tlbnMgKiAyKTsKCiAgICAgICAgICAgICAgICB1aW50MjU2ICAgICBvd25lckZlZSAgICAgICAgICAgID0gblRva2VucyAqIDIgKiBvd25lckN1dCAvIDEwMDsKICAgICAgICAgICAgICAgIHVpbnQyNTYgICAgIHJlZmVycmFsRmVlICAgICAgICAgPSBuVG9rZW5zICogMiAqIHJlZmVycmFsQ3V0IC8gMTAwOwogICAgICAgICAgICAgICAgdWludDI1NiAgICAgd2lubmVyUHJpemUgICAgICAgICA9IG5Ub2tlbnMgKiAyIC0gb3duZXJGZWUgLSByZWZlcnJhbEZlZSAtIHNvbEZlZTsKICAgICAgICAgICAgICAgIHVpbnQyNTYgICAgIGRyYXdQcml6ZSAgICAgICAgICAgPSBuVG9rZW5zIC0gc29sRmVlLzI7CgogICAgICAgICAgICAgICAgcmVxdWlyZSAoZ2FtZS5zZWsgPT0gMCAmJiBzZWsgIT0gMCk7CiAgICAgICAgICAgICAgICBnYW1lLnNlayAgICAgICAgPSBzZWs7CgogICAgICAgICAgICAgICAgYWRkcmVzcyAgICAgcmVmZXJyYWw7CiAgICAgICAgICAgICAgICAvLyBMZXQncyBzdGFydCBzb2x2aW5nIHRoZSBnYW1lCiAgICAgICAgICAgICAgICB1aW50MjU2ICAgICBwb3NlYml0cyAgICAgICAgPSByc3BTY2llbmNlLmNhbGNQb3NlQml0cyAoc2VrLCBnYW1lLmNyZWF0b3JQb3NlLCBnYW1lLnBsYXllclBvc2UpOwoKICAgICAgICAgICAgICAgIC8vIFJLLCBTQywgUEEsICAgUkssIFNDLCBQQQogICAgICAgICAgICAgICAgLy8gMSwgIDIsICA0LCAgICA4LCAgMTYsIDMyCiAgICAgICAgICAgICAgICBpZiAoKHBvc2ViaXRzICUgOSkgPT0gMCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA5LCAxOCBvciAzNgogICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlIChkcmF3UHJpemUgPj0gMCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBkcmF3ICh3ZSBkb24ndCB0YWtlIGFueSBmZWVzIC0gZmFpciBlbm91Z2g/KQogICAgICAgICAgICAgICAgICAgICAgICBfdHJhbnNmZXJGcm9tICh0aGlzLCBnYW1lLmNyZWF0b3IsIGRyYXdQcml6ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90cmFuc2ZlckZyb20gKHRoaXMsIGdhbWUucGxheWVyLCBkcmF3UHJpemUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoKHBvc2ViaXRzICUgMTcpID09IDAgfHwgcG9zZWJpdHMgPT0gMTIpIHsgICAgICAgICAgLy8gMTIsIDE3LCBvciAzNAogICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlICh3aW5uZXJQcml6ZSA+PSAwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVycmFsICAgICAgICAgICAgPSByZWZlcnJhbHNbZ2FtZS5jcmVhdG9yXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlZmVycmFsID09IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcnJhbCAgICA9IG93bmVyOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdG9yIHdpbnMKICAgICAgICAgICAgICAgICAgICAgICAgX3RyYW5zZmVyRnJvbSAodGhpcywgZ2FtZS5jcmVhdG9yLCB3aW5uZXJQcml6ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90cmFuc2ZlckZyb20gKHRoaXMsIHJlZmVycmFsLCByZWZlcnJhbEZlZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90cmFuc2ZlckZyb20gKHRoaXMsIG93bmVyLCBvd25lckZlZSk7CgogICAgICAgICAgICAgICAgICAgICAgICB3ZWlGcm9tUmVmc1tyZWZlcnJhbF0gICAgICs9IHJlZmVycmFsRmVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoKHBvc2ViaXRzICUgMTApID09IDAgfHwgcG9zZWJpdHMgPT0gMzMpIHsgICAgICAgICAgLy8gMTAsIDIwLCBvciAzMwogICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlICh3aW5uZXJQcml6ZSA+PSAwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVycmFsICAgICAgICAgICAgPSByZWZlcnJhbHNbZ2FtZS5wbGF5ZXJdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVmZXJyYWwgPT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVycmFsICAgID0gb3duZXI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBsYXllciB3aW5zCiAgICAgICAgICAgICAgICAgICAgICAgIF90cmFuc2ZlckZyb20gKHRoaXMsIGdhbWUucGxheWVyLCB3aW5uZXJQcml6ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90cmFuc2ZlckZyb20gKHRoaXMsIHJlZmVycmFsLCByZWZlcnJhbEZlZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90cmFuc2ZlckZyb20gKHRoaXMsIG93bmVyLCBvd25lckZlZSk7CgogICAgICAgICAgICAgICAgICAgICAgICB3ZWlGcm9tUmVmc1tyZWZlcnJhbF0gICAgICs9IHJlZmVycmFsRmVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChzb2xGZWUgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90cmFuc2ZlckZyb20gKHRoaXMsIG1zZy5zZW5kZXIsIHNvbEZlZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZ2FtZS5wb3NlYml0cyAgICA9IHBvc2ViaXRzOwogICAgICAgICAgICAgICAgR2FtZVNvbHZlZCAobXNnLnNlbmRlciwgZ2FtZUlkLCBnYW1lLnBvc2ViaXRzLCByZWZlcnJhbCwgc29sRmVlKTsKICAgICAgICB9CgoKCiAgICAgICAgLy8gQW55b25lIGNvdWxkIGNhbGwgdGhpcyB0byBjbGFpbSB0aGUgcHJpemUgKGFuIHBheSBnYXMgaGltc2VsZikKICAgICAgICBmdW5jdGlvbiBzb2x2ZUdhbWUgKHVpbnQyNTYgZ2FtZUlkLCB1aW50MjU2IHNlaykgcHVibGljIHsKICAgICAgICAgICAgICAgIF9zb2x2ZUdhbWUgKGdhbWVJZCwgc2VrLCAwKTsKICAgICAgICB9CgogICAgICAgIC8vIE9yIHRoZSBnYW1lIGNvdWxkIGJlIGF1dG9tYXRpY2FsbHkgc29sdmVkIGEgZmV3IG1vbWVudHMgbGF0ZXIgYnkgdGhlIG93bmVyLAogICAgICAgIC8vIGNoYXJnaW5nIGEgJ3NvbHZlckZlZScKICAgICAgICBmdW5jdGlvbiBhdXRvU29sdmVHYW1lICh1aW50MjU2IGdhbWVJZCwgdWludDI1NiBzZWssIHVpbnQyNTYgc29sRmVlKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICAgICAgICAgIF9zb2x2ZUdhbWUgKGdhbWVJZCwgc2VrLCBzb2xGZWUpOwogICAgICAgIH0KCn0='.
	

]
