Class {
	#name : #SRTAe79358DA89abaB5e85E1BEc1cb2C94E2553d192,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTAe79358DA89abaB5e85E1BEc1cb2C94E2553d192 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICB9CiAgICB9Cgp9CgovKioKICogQHRpdGxlIEF1dGhvcml6YWJsZQogKiBAZGV2IEFsbG93cyB0byBhdXRob3JpemUgYWNjZXNzIHRvIGNlcnRhaW4gZnVuY3Rpb24gY2FsbHMKICoKICogQUJJCiAqIFt7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6ImF1dGhvcml6ZXJzIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5IjoidmlldyIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYWRkciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiYWRkQXV0aG9yaXplZCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W3sibmFtZSI6Il9hZGRyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJpc0F1dGhvcml6ZWQiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImJvb2wifV0sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3IiwidHlwZSI6ImZ1bmN0aW9uIn0seyJpbnB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSIsInR5cGUiOiJjb25zdHJ1Y3RvciJ9XQogKi8KY29udHJhY3QgQXV0aG9yaXphYmxlIHsKCiAgICBhZGRyZXNzW10gcHVibGljIGF1dGhvcml6ZXJzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGF1dGhvcml6ZXJJbmRleDsKCiAgICAvKioKICAgICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCB0YXQgaXMgbm90IGF1dGhvcml6ZWQuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlBdXRob3JpemVkIHsKICAgICAgICByZXF1aXJlKGlzQXV0aG9yaXplZChtc2cuc2VuZGVyKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQ29udHJ1Y3RvciB0aGF0IGF1dGhvcml6ZXMgdGhlIG1zZy5zZW5kZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIEF1dGhvcml6YWJsZSgpIHB1YmxpYyB7CiAgICAgICAgYXV0aG9yaXplcnMubGVuZ3RoID0gMjsKICAgICAgICBhdXRob3JpemVyc1sxXSA9IG1zZy5zZW5kZXI7CiAgICAgICAgYXV0aG9yaXplckluZGV4W21zZy5zZW5kZXJdID0gMTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgaWYgYW4gYWRkcmVzcyBpcyBhdXRob3JpemVkCiAgICAgKiBAcGFyYW0gX2FkZHIgdGhlIGFkZHJlc3MgdG8gY2hlY2sgaWYgaXQgaXMgYXV0aG9yaXplZC4KICAgICAqIEByZXR1cm4gYm9vbGVhbiBmbGFnIGlmIGFkZHJlc3MgaXMgYXV0aG9yaXplZC4KICAgICAqLwogICAgZnVuY3Rpb24gaXNBdXRob3JpemVkKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyB2aWV3IHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBhdXRob3JpemVySW5kZXhbX2FkZHJdID4gMDsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gYWRkIGEgbmV3IGF1dGhvcml6ZXIKICAgICAqIEBwYXJhbSBfYWRkciB0aGUgYWRkcmVzcyB0byBhZGQgYXMgYSBuZXcgYXV0aG9yaXplci4KICAgICAqLwogICAgZnVuY3Rpb24gYWRkQXV0aG9yaXplZChhZGRyZXNzIF9hZGRyKSBleHRlcm5hbCBvbmx5QXV0aG9yaXplZCB7CiAgICAgICAgYXV0aG9yaXplckluZGV4W19hZGRyXSA9IGF1dGhvcml6ZXJzLmxlbmd0aDsKICAgICAgICBhdXRob3JpemVycy5sZW5ndGgrKzsKICAgICAgICBhdXRob3JpemVyc1thdXRob3JpemVycy5sZW5ndGggLSAxXSA9IF9hZGRyOwogICAgfQp9CgovKioKICogQHRpdGxlIEludmVzdG9ycwogKiBAZGV2IEFsbG93cyB0byBnZXQgaW52ZXN0b3JzCiAqCiAqIEFCSQogKiBbeyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJhdXRob3JpemVycyIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6InZpZXciLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6ImludmVzdG9ycyIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6InZpZXciLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2FkZHIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwibmFtZSI6ImFkZEF1dGhvcml6ZWQiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUiLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2ludiIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiYWRkSW52ZXN0b3IiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUiLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYWRkciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiaXNBdXRob3JpemVkIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5IjoidmlldyIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiaW5wdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUiLCJ0eXBlIjoiY29uc3RydWN0b3IifV0KICovCmNvbnRyYWN0IEludmVzdG9ycyBpcyBBdXRob3JpemFibGUgewoKICAgIGFkZHJlc3NbXSBwdWJsaWMgaW52ZXN0b3JzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGludmVzdG9ySW5kZXg7CgogICAgLyoqCiAgICAgKiBAZGV2IENvbnRydWN0b3IgdGhhdCBhdXRob3JpemVzIHRoZSBtc2cuc2VuZGVyLgogICAgICovCiAgICBmdW5jdGlvbiBJbnZlc3RvcnMoKSBwdWJsaWMgewogICAgICAgIGludmVzdG9ycy5sZW5ndGggPSAyOwogICAgICAgIGludmVzdG9yc1sxXSA9IG1zZy5zZW5kZXI7CiAgICAgICAgaW52ZXN0b3JJbmRleFttc2cuc2VuZGVyXSA9IDE7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGFkZCBhIG5ldyBpbnZlc3RvcgogICAgICogQHBhcmFtIF9pbnYgdGhlIGFkZHJlc3MgdG8gYWRkIGFzIGEgbmV3IGludmVzdG9yLgogICAgICovCiAgICBmdW5jdGlvbiBhZGRJbnZlc3RvcihhZGRyZXNzIF9pbnYpIHB1YmxpYyB7CiAgICAgICAgaWYgKGludmVzdG9ySW5kZXhbX2ludl0gPD0gMCkgewogICAgICAgICAgICBpbnZlc3RvckluZGV4W19pbnZdID0gaW52ZXN0b3JzLmxlbmd0aDsKICAgICAgICAgICAgaW52ZXN0b3JzLmxlbmd0aCsrOwogICAgICAgICAgICBpbnZlc3RvcnNbaW52ZXN0b3JzLmxlbmd0aCAtIDFdID0gX2ludjsKICAgICAgICB9CgogICAgfQp9CgovKioKICogQHRpdGxlIEV4Y2hhbmdlUmF0ZQogKiBAZGV2IEFsbG93cyB1cGRhdGluZyBhbmQgcmV0cmlldmVpbmcgb2YgQ29udmVyc2lvbiBSYXRlcyBmb3IgUEFZIHRva2VucwogKgogKiBBQkkKICogW3siY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfc3ltYm9sIiwidHlwZSI6InN0cmluZyJ9LHsibmFtZSI6Il9yYXRlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJ1cGRhdGVSYXRlIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6ImRhdGEiLCJ0eXBlIjoidWludDI1NltdIn1dLCJuYW1lIjoidXBkYXRlUmF0ZXMiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUiLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfc3ltYm9sIiwidHlwZSI6InN0cmluZyJ9XSwibmFtZSI6ImdldFJhdGUiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3IiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6Im93bmVyIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5IjoidmlldyIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJieXRlczMyIn1dLCJuYW1lIjoicmF0ZXMiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3IiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Im5ld093bmVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJ0cmFuc2Zlck93bmVyc2hpcCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiYW5vbnltb3VzIjpmYWxzZSwiaW5wdXRzIjpbeyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InRpbWVzdGFtcCIsInR5cGUiOiJ1aW50MjU2In0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InN5bWJvbCIsInR5cGUiOiJieXRlczMyIn0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InJhdGUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6IlJhdGVVcGRhdGVkIiwidHlwZSI6ImV2ZW50In1dCiAqLwpjb250cmFjdCBFeGNoYW5nZVJhdGUgaXMgT3duYWJsZSB7CgogICAgZXZlbnQgUmF0ZVVwZGF0ZWQodWludCB0aW1lc3RhbXAsIGJ5dGVzMzIgc3ltYm9sLCB1aW50IHJhdGUpOwoKICAgIG1hcHBpbmcoYnl0ZXMzMiA9PiB1aW50KSBwdWJsaWMgcmF0ZXM7CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB1cGRhdGUgYSBzaW5nbGUgcmF0ZS4KICAgICAqIEBwYXJhbSBfc3ltYm9sIFRoZSBzeW1ib2wgdG8gYmUgdXBkYXRlZC4KICAgICAqIEBwYXJhbSBfcmF0ZSB0aGUgcmF0ZSBmb3IgdGhlIHN5bWJvbC4KICAgICAqLwogICAgZnVuY3Rpb24gdXBkYXRlUmF0ZShzdHJpbmcgX3N5bWJvbCwgdWludCBfcmF0ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmF0ZXNba2VjY2FrMjU2KF9zeW1ib2wpXSA9IF9yYXRlOwogICAgICAgIFJhdGVVcGRhdGVkKG5vdywga2VjY2FrMjU2KF9zeW1ib2wpLCBfcmF0ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB1cGRhdGUgbXVsdGlwbGUgcmF0ZXMuCiAgICAgKiBAcGFyYW0gZGF0YSBhbiBhcnJheSB0aGF0IGFsdGVybmF0ZXMga2VjY2FrMjU2IGhhc2hlcyBvZiB0aGUgc3ltYm9sIGFuZCB0aGUgY29ycmVzcG9uZGluZyByYXRlIC4KICAgICAqLwogICAgZnVuY3Rpb24gdXBkYXRlUmF0ZXModWludFtdIGRhdGEpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGlmIChkYXRhLmxlbmd0aCAlIDIgPiAwKQogICAgICAgIHJldmVydCgpOwogICAgICAgIHVpbnQgaSA9IDA7CiAgICAgICAgd2hpbGUgKGkgPCBkYXRhLmxlbmd0aCAvIDIpIHsKICAgICAgICAgICAgYnl0ZXMzMiBzeW1ib2wgPSBieXRlczMyKGRhdGFbaSAqIDJdKTsKICAgICAgICAgICAgdWludCByYXRlID0gZGF0YVtpICogMiArIDFdOwogICAgICAgICAgICByYXRlc1tzeW1ib2xdID0gcmF0ZTsKICAgICAgICAgICAgUmF0ZVVwZGF0ZWQobm93LCBzeW1ib2wsIHJhdGUpOwogICAgICAgICAgICBpKys7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgdGhlIGFueW9uZSB0byByZWFkIHRoZSBjdXJyZW50IHJhdGUuCiAgICAgKiBAcGFyYW0gX3N5bWJvbCB0aGUgc3ltYm9sIHRvIGJlIHJldHJpZXZlZC4KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0UmF0ZShzdHJpbmcgX3N5bWJvbCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIHJhdGVzW2tlY2NhazI1Nihfc3ltYm9sKV07CiAgICB9Cn0KCi8qKgogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludCBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQ2NCkgewogICAgICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDY0KSB7CiAgICAgICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgICB9CgogICAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgICB9CgogICAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcHVibGljOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KCgoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSAgcHVibGljOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CgogICAgLyoqCiAgICAgKiBAZGV2IEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrLgogICAgICovCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAgICogQHJldHVybiBBbiB1aW50IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHZpZXcgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9Cgp9CgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtYW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJ0IHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEJhc2ljVG9rZW4sIEVSQzIwIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgoKICAgIC8qKgogICAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgICAqIEBwYXJhbSBfdmFsdWUgdWludCB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgewogICAgICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgICAgIC8vIGlmIChfdmFsdWUgPiBfYWxsb3dhbmNlKSB0aHJvdzsKCiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWFobGYgb2YgbXNnLnNlbmRlci4KICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsKCiAgICAgICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgICAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgcmV2ZXJ0KCk7CgogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGFuIGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcmV0dXJuIEEgdWludCBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgdmlldyByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKfQoKLyoqCiAqIEB0aXRsZSBNaW50YWJsZSB0b2tlbgogKiBAZGV2IFNpbXBsZSBFUkMyMCBUb2tlbiBleGFtcGxlLCB3aXRoIG1pbnRhYmxlIHRva2VuIGNyZWF0aW9uCiAqIEBkZXYgSXNzdWU6ICogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9pc3N1ZXMvMTIwCiAqIEJhc2VkIG9uIGNvZGUgYnkgVG9rZW5NYXJrZXROZXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9Ub2tlbk1hcmtldE5ldC9pY28vYmxvYi9tYXN0ZXIvY29udHJhY3RzL01pbnRhYmxlVG9rZW4uc29sCiAqLwoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICAgIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKICAgIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwogICAgZXZlbnQgTWludFJlc3RhcnRlZCgpOwoKICAgIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHkgPSAwOwoKCiAgICBtb2RpZmllciBjYW5NaW50KCkgewogICAgICAgIGlmKG1pbnRpbmdGaW5pc2hlZCkgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2lldmUgdGhlIG1pbnRlZCB0b2tlbnMuCiAgICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqLwogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBvbmx5T3duZXIgY2FuTWludCByZXR1cm5zIChib29sKSB7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgICAgIE1pbnQoX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gc3RvcCBtaW50aW5nIG5ldyB0b2tlbnMuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqLwogICAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICAgICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICBNaW50RmluaXNoZWQoKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gcmVzdGFydCBtaW50aW5nIG5ldyB0b2tlbnMuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqLwogICAgZnVuY3Rpb24gcmVzdGFydE1pbnRpbmcoKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwogICAgICAgIE1pbnRSZXN0YXJ0ZWQoKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKCi8qKgogKiBAdGl0bGUgSW52ZXN0eVRva2VuCiAqIEBkZXYgVGhlIG1haW4gUEFZIHRva2VuIGNvbnRyYWN0CiAqCiAqIEFCSQogKiBbeyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6Im1pbnRpbmdGaW5pc2hlZCIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYm9vbCJ9XSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6InZpZXciLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoibmFtZSIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoic3RyaW5nIn1dLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5IjoidmlldyIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfc3BlbmRlciIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX3ZhbHVlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJhcHByb3ZlIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6InRvdGFsU3VwcGx5Iiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5IjoidmlldyIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfZnJvbSIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX3RvIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfdmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6InRyYW5zZmVyRnJvbSIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoic3RhcnRUcmFkaW5nIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6ImRlY2ltYWxzIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5IjoidmlldyIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfdG8iLCJ0eXBlIjoiYWRkcmVzcyJ9LHsibmFtZSI6Il9hbW91bnQiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6Im1pbnQiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImJvb2wifV0sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6InRyYWRpbmdTdGFydGVkIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5IjoidmlldyIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W3sibmFtZSI6Il9vd25lciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiYmFsYW5jZU9mIiwib3V0cHV0cyI6W3sibmFtZSI6ImJhbGFuY2UiLCJ0eXBlIjoidWludDI1NiJ9XSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6InZpZXciLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbXSwibmFtZSI6ImZpbmlzaE1pbnRpbmciLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImJvb2wifV0sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6Im93bmVyIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5IjoidmlldyIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJzeW1ib2wiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InN0cmluZyJ9XSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6InZpZXciLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX3RvIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfdmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6InRyYW5zZmVyIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W10sIm5hbWUiOiJyZXN0YXJ0TWludGluZyIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYm9vbCJ9XSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUiLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfb3duZXIiLCJ0eXBlIjoiYWRkcmVzcyJ9LHsibmFtZSI6Il9zcGVuZGVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJhbGxvd2FuY2UiLCJvdXRwdXRzIjpbeyJuYW1lIjoicmVtYWluaW5nIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3IiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Im5ld093bmVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJ0cmFuc2Zlck93bmVyc2hpcCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiYW5vbnltb3VzIjpmYWxzZSwiaW5wdXRzIjpbeyJpbmRleGVkIjp0cnVlLCJuYW1lIjoidG8iLCJ0eXBlIjoiYWRkcmVzcyJ9LHsiaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJ2YWx1ZSIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoiTWludCIsInR5cGUiOiJldmVudCJ9LHsiYW5vbnltb3VzIjpmYWxzZSwiaW5wdXRzIjpbXSwibmFtZSI6Ik1pbnRGaW5pc2hlZCIsInR5cGUiOiJldmVudCJ9LHsiYW5vbnltb3VzIjpmYWxzZSwiaW5wdXRzIjpbXSwibmFtZSI6Ik1pbnRSZXN0YXJ0ZWQiLCJ0eXBlIjoiZXZlbnQifSx7ImFub255bW91cyI6ZmFsc2UsImlucHV0cyI6W3siaW5kZXhlZCI6dHJ1ZSwibmFtZSI6Im93bmVyIiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJzcGVuZGVyIiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoidmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6IkFwcHJvdmFsIiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJmcm9tIiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJ0byIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InZhbHVlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJUcmFuc2ZlciIsInR5cGUiOiJldmVudCJ9XQogKi8KY29udHJhY3QgSW52ZXN0eVRva2VuIGlzIE1pbnRhYmxlVG9rZW4gewoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJJbnZlc3R5IENvaW4iOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiSVZDNjYiOwogICAgdWludCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKCiAgICBib29sIHB1YmxpYyB0cmFkaW5nU3RhcnRlZCA9IGZhbHNlOwoKICAgIC8qKgogICAgICogQGRldiBtb2RpZmllciB0aGF0IHRocm93cyBpZiB0cmFkaW5nIGhhcyBub3Qgc3RhcnRlZCB5ZXQKICAgICAqLwogICAgbW9kaWZpZXIgaGFzU3RhcnRlZFRyYWRpbmcoKSB7CiAgICAgICAgcmVxdWlyZSh0cmFkaW5nU3RhcnRlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byBlbmFibGUgdGhlIHRyYWRpbmcuIFRoaXMgY2FuIG5vdCBiZSB1bmRvbmUKICAgICAqLwogICAgZnVuY3Rpb24gc3RhcnRUcmFkaW5nKCkgb25seU93bmVyIHsKICAgICAgICB0cmFkaW5nU3RhcnRlZCA9IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyBhbnlvbmUgdG8gdHJhbnNmZXIgdGhlIFBBWSB0b2tlbnMgb25jZSB0cmFkaW5nIGhhcyBzdGFydGVkCiAgICAgKiBAcGFyYW0gX3RvIHRoZSByZWNpcGllbnQgYWRkcmVzcyBvZiB0aGUgdG9rZW5zLgogICAgICogQHBhcmFtIF92YWx1ZSBudW1iZXIgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaGFzU3RhcnRlZFRyYWRpbmcgewogICAgICAgIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBBbGxvd3MgYW55b25lIHRvIHRyYW5zZmVyIHRoZSBQQVkgdG9rZW5zIG9uY2UgdHJhZGluZyBoYXMgc3RhcnRlZAogICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaGFzU3RhcnRlZFRyYWRpbmcgewogICAgICAgIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKfQoKLyoqCiAqIEB0aXRsZSBNYWluU2FsZQogKiBAZGV2IFRoZSBtYWluIFBBWSB0b2tlbiBzYWxlIGNvbnRyYWN0CiAqCiAqIEFCSQogKiBbeyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9tdWx0aXNpZ1ZhdWx0IiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJzZXRNdWx0aXNpZ1ZhdWx0Iiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbeyJuYW1lIjoiYXV0aG9yaXplckluZGV4IiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJnZXRBdXRob3JpemVyIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5IjoidmlldyIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJleGNoYW5nZVJhdGUiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImFkZHJlc3MifV0sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3IiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJpbnZlc3RvcnMiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImFkZHJlc3MifV0sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3IiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6InJlY2lwaWVudCIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoidG9rZW5zIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJhdXRob3JpemVkQ3JlYXRlVG9rZW5zIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6InByZXNhbGVBY3RpdmUiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImJvb2wifV0sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJ2aWV3IiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W10sIm5hbWUiOiJ0cmFuc2ZlclRva2VuIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6Im93bmVyIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5IjoidmlldyIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoiZmluaXNoUHJlc2FsZSIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYm9vbCJ9XSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUiLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2V4Y2hhbmdlUmF0ZSIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoic2V0RXhjaGFuZ2VSYXRlIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il90b2tlbiIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoicmV0cmlldmVUb2tlbnMiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUiLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJpbnZlc3RvckluZGV4IiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJnZXRJbnZlc3RvciIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6InZpZXciLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoicmVjaXBpZW50IiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJjcmVhdGVUb2tlbnMiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6dHJ1ZSwic3RhdGVNdXRhYmlsaXR5IjoicGF5YWJsZSIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYWRkciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiYWRkQXV0aG9yaXplZCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJtdWx0aXNpZ1ZhdWx0Iiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5IjoidmlldyIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoicmVzdGFydFByZXNhbGUiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImJvb2wifV0sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9pbnYiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwibmFtZSI6ImFkZEludmVzdG9yIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJzdGF0ZU11dGFiaWxpdHkiOiJub25wYXlhYmxlIiwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Im5ld093bmVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJ0cmFuc2Zlck93bmVyc2hpcCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5Ijoibm9ucGF5YWJsZSIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJ0b2tlbiIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6InZpZXciLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYWRkciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiaXNBdXRob3JpemVkIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwic3RhdGVNdXRhYmlsaXR5IjoidmlldyIsInR5cGUiOiJmdW5jdGlvbiJ9LHsiaW5wdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInN0YXRlTXV0YWJpbGl0eSI6Im5vbnBheWFibGUiLCJ0eXBlIjoiY29uc3RydWN0b3IifSx7InBheWFibGUiOnRydWUsInN0YXRlTXV0YWJpbGl0eSI6InBheWFibGUiLCJ0eXBlIjoiZmFsbGJhY2sifSx7ImFub255bW91cyI6ZmFsc2UsImlucHV0cyI6W3siaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJyZWNpcGllbnQiLCJ0eXBlIjoiYWRkcmVzcyJ9LHsiaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJldGhlcl9hbW91bnQiLCJ0eXBlIjoidWludDI1NiJ9LHsiaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJwYXlfYW1vdW50IiwidHlwZSI6InVpbnQyNTYifSx7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoiZXhjaGFuZ2VyYXRlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJUb2tlblNvbGQiLCJ0eXBlIjoiZXZlbnQifSx7ImFub255bW91cyI6ZmFsc2UsImlucHV0cyI6W3siaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJyZWNpcGllbnQiLCJ0eXBlIjoiYWRkcmVzcyJ9LHsiaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJwYXlfYW1vdW50IiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJBdXRob3JpemVkQ3JlYXRlIiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoiUHJlc2FsZUZpbmlzaGVkIiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoiUHJlc2FsZVJlU3RhcnRlZCIsInR5cGUiOiJldmVudCJ9XQogKi8KY29udHJhY3QgSW52ZXN0eVByZXNhbGUgaXMgT3duYWJsZSwgQXV0aG9yaXphYmxlLCBJbnZlc3RvcnMgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgICBldmVudCBUb2tlblNvbGQoYWRkcmVzcyByZWNpcGllbnQsIHVpbnQgZXRoZXJfYW1vdW50LCB1aW50IHBheV9hbW91bnQsIHVpbnQgZXhjaGFuZ2VyYXRlKTsKICAgIGV2ZW50IEF1dGhvcml6ZWRDcmVhdGUoYWRkcmVzcyByZWNpcGllbnQsIHVpbnQgcGF5X2Ftb3VudCk7CiAgICBldmVudCBQcmVzYWxlRmluaXNoZWQoKTsKICAgIGV2ZW50IFByZXNhbGVSZVN0YXJ0ZWQoKTsKCiAgICBJbnZlc3R5VG9rZW4gcHVibGljIHRva2VuID0gbmV3IEludmVzdHlUb2tlbigpOwoKICAgIGFkZHJlc3MgcHVibGljIG11bHRpc2lnVmF1bHQ7CiAgICB1aW50IGNvbnN0YW50IE1JTExJX1VTRF9UT19JVkNfUkFURSA9IDM0Oy8vcHJlc2FsZSBmaXhlZCBJVkMgY29pbiBjb3N0CgogICAgRXhjaGFuZ2VSYXRlIHB1YmxpYyBleGNoYW5nZVJhdGU7CgogICAgYm9vbCBwdWJsaWMgcHJlc2FsZUFjdGl2ZSA9IHRydWU7CiAgICBtb2RpZmllciBpc1ByZXNhbGVBY3RpdmUoKSB7CiAgICAgICAgaWYoIXByZXNhbGVBY3RpdmUpIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBjb25zdHJ1Y3RvcgogICAgICovCiAgICBmdW5jdGlvbiBJbnZlc3R5UHJlc2FsZSgpIHsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gc3RvcCBtaW50aW5nIG5ldyB0b2tlbnMuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqLwogICAgZnVuY3Rpb24gZmluaXNoUHJlc2FsZSgpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHByZXNhbGVBY3RpdmUgPSBmYWxzZTsKICAgICAgICBQcmVzYWxlRmluaXNoZWQoKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gc3RvcCBtaW50aW5nIG5ldyB0b2tlbnMuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqLwogICAgZnVuY3Rpb24gcmVzdGFydFByZXNhbGUoKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBwcmVzYWxlQWN0aXZlID0gdHJ1ZTsKICAgICAgICBQcmVzYWxlUmVTdGFydGVkKCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyBhbnlvbmUgdG8gY3JlYXRlIHRva2VucyBieSBkZXBvc2l0aW5nIGV0aGVyLgogICAgICogQHBhcmFtIHJlY2lwaWVudCB0aGUgcmVjaXBpZW50IHRvIHJlY2VpdmUgdG9rZW5zLgogICAgICovCiAgICBmdW5jdGlvbiBjcmVhdGVUb2tlbnMoYWRkcmVzcyByZWNpcGllbnQpIHB1YmxpYyBpc1ByZXNhbGVBY3RpdmUgcGF5YWJsZSB7CiAgICAgICAgdmFyIGVpbnN0ZWluVG9Vc2RSYXRlID0gZXhjaGFuZ2VSYXRlLmdldFJhdGUoIkVpbnN0ZWluVG9VU0QiKTsKICAgICAgICB1aW50IGl2YyA9IChlaW5zdGVpblRvVXNkUmF0ZS5tdWwobXNnLnZhbHVlKS5kaXYoTUlMTElfVVNEX1RPX0lWQ19SQVRFKSk7Ly8gMTggc2lnbnMgYWZ0ZXIgY29tbWEKICAgICAgICB0b2tlbi5taW50KHJlY2lwaWVudCwgaXZjKTsKICAgICAgICBhZGRJbnZlc3RvcihyZWNpcGllbnQpOwogICAgICAgIHJlcXVpcmUobXVsdGlzaWdWYXVsdC5zZW5kKG1zZy52YWx1ZSkpOwogICAgICAgIFRva2VuU29sZChyZWNpcGllbnQsIG1zZy52YWx1ZSwgaXZjLCBlaW5zdGVpblRvVXNkUmF0ZSAvIDEwMDApOwogICAgfQoKICAgIC8qKgogICAqIEBkZXYgQWxsb3dzIGF1dGhvcml6ZWQgYWNjZXMgdG8gY3JlYXRlIHRva2Vucy4gVGhpcyBpcyB1c2VkIGZvciBCaXRjb2luIGFuZCBFUkMyMCBkZXBvc2l0cwogICAqIEBwYXJhbSByZWNpcGllbnQgdGhlIHJlY2lwaWVudCB0byByZWNlaXZlIHRva2Vucy4KICAgKiBAcGFyYW0gdG9rZW5zIG51bWJlciBvZiB0b2tlbnMgdG8gYmUgY3JlYXRlZC4KICAgKi8KICAgIGZ1bmN0aW9uIGF1dGhvcml6ZWRDcmVhdGVUb2tlbnMoYWRkcmVzcyByZWNpcGllbnQsIHVpbnQgdG9rZW5zKSBwdWJsaWMgb25seUF1dGhvcml6ZWQgewogICAgICAgIHRva2VuLm1pbnQocmVjaXBpZW50LCB0b2tlbnMpOwogICAgICAgIGFkZEludmVzdG9yKHJlY2lwaWVudCk7CiAgICAgICAgQXV0aG9yaXplZENyZWF0ZShyZWNpcGllbnQsIHRva2Vucyk7CiAgICB9CgogICAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvIHNldCB0aGUgZXhjaGFuZ2VyYXRlIGNvbnRyYWN0LgogICAqIEBwYXJhbSBfZXhjaGFuZ2VSYXRlIHRoZSBleGNoYW5nZXJhdGUgYWRkcmVzcwogICAqLwogICAgZnVuY3Rpb24gc2V0RXhjaGFuZ2VSYXRlKGFkZHJlc3MgX2V4Y2hhbmdlUmF0ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgZXhjaGFuZ2VSYXRlID0gRXhjaGFuZ2VSYXRlKF9leGNoYW5nZVJhdGUpOwogICAgfQoKICAgIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byB0cmFuc2ZlciBFUkMyMCB0b2tlbnMgdG8gdGhlIG11bHRpIHNpZyB2YXVsdAogICAqIEBwYXJhbSBfdG9rZW4gdGhlIGNvbnRyYWN0IGFkZHJlc3Mgb2YgdGhlIEVSQzIwIGNvbnRyYWN0CiAgICovCiAgICBmdW5jdGlvbiByZXRyaWV2ZVRva2VucyhhZGRyZXNzIF90b2tlbikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgRVJDMjAgb3V0ZXJUb2tlbiA9IEVSQzIwKF90b2tlbik7CiAgICAgICAgdG9rZW4udHJhbnNmZXIobXVsdGlzaWdWYXVsdCwgb3V0ZXJUb2tlbi5iYWxhbmNlT2YodGhpcykpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvIHNldCB0aGUgbXVsdGlzaWcgY29udHJhY3QuCiAgICAgKiBAcGFyYW0gX211bHRpc2lnVmF1bHQgdGhlIG11bHRpc2lnIGNvbnRyYWN0IGFkZHJlc3MKICAgICAqLwogICAgZnVuY3Rpb24gc2V0TXVsdGlzaWdWYXVsdChhZGRyZXNzIF9tdWx0aXNpZ1ZhdWx0KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpZiAoX211bHRpc2lnVmF1bHQgIT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICBtdWx0aXNpZ1ZhdWx0ID0gX211bHRpc2lnVmF1bHQ7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQGRldiBPd25lcnNoaXAgb2YgdGhlIFBBWSB0b2tlbiBjb250cmFjdCBpcyB0cmFuc2ZlcmVkIHRvIHRoaXMgb3duZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9rZW4oKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB0b2tlbi50cmFuc2Zlck93bmVyc2hpcChvd25lcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIHJlY2VpdmVzIGV0aGVyIGFuZCBjcmVhdGVkIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgdG9rZW5zIGZvciB0aGUKICAgICAqIG1zZy5zZW5kZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgICAgY3JlYXRlVG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQp9'.
	

]
