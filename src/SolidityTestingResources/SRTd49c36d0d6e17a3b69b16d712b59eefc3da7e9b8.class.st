Class {
	#name : #SRTd49c36d0d6e17a3b69b16d712b59eefc3da7e9b8,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd49c36d0d6e17a3b69b16d712b59eefc3da7e9b8 >> base64 [
	^ 'LyoKZmlsZTogICBIdXQzNElDTy5zb2wKdmVyOiAgICAwLjIuNF9kZXBsb3kKYXV0aG9yOiBEYXJyeWwgTW9ycmlzCmRhdGU6ICAgMjctT2N0LTIwMTcKZW1haWw6ICBvMHJhZ21hbjBvIEFUIGdtYWlsLmNvbQooYykgRGFycnlsIE1vcnJpcyAyMDE3CgpBIGNvbGxhdGVkIGNvbnRyYWN0IHNldCBmb3IgdGhlIHJlY2VpcHQgb2YgZnVuZHMgYW5kIHByb2R1Y3Rpb24gYW5kIHRyYW5zZmVyCm9mIEVSQzIwIHRva2VucyBhcyBzcGVjaWZpZWQgYnkgSHV0MzQuCgpMaWNlbnNlCi0tLS0tLS0KVGhpcyBzb2Z0d2FyZSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLApidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgpNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICAKU2VlIE1JVCBMaWNlbmNlIGZvciBmdXJ0aGVyIGRldGFpbHMuCjxodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVD4uCgpSZWxlYXNlIE5vdGVzCi0tLS0tLS0tLS0tLS0KKiBBZGRlZCBgZXZlbnQgQWJvcnRlZCgpYAoqIGNvcnJlY3QgYHdob2xlc2FsZUxlZnRgIG1hZ25pdHVkZSBidWcKKiBBbGwgdGVzdHMgcGFzc2VkCgpEZWRpY2F0aW9ucwotLS0tLS0tLS0tLS0tCiogd2l0aCBsb3ZlIHRvIElzYWJlbGxhIGFuZCBwZWEgZnJvbSB5b3VyIGRhZAoqIHh4IHRvIGVkaWUsIHJvYmluLCB3aWxsaWFtIGFuZCBjaGFybG90dGUgeAoqLwoKCnByYWdtYSBzb2xpZGl0eSBeMC40LjE3OwoKLy8gQXVkaXRlZCAyNyBPY3RvYmVyIDIwMTcgYnkgRGFycnlsIE1vcnJpcywgUGV0ZXIgR29kYm9sdApjb250cmFjdCBIdXQzNENvbmZpZwp7CiAgICAvLyBFUkMyMCB0b2tlbiBuYW1lCiAgICBzdHJpbmcgIHB1YmxpYyBjb25zdGFudCBuYW1lICAgICAgICAgICAgPSAiSHV0MzQgRW50cm9weSI7CiAgICAKICAgIC8vIEVSQzIwIHRyYWRpbmcgc3ltYm9sCiAgICBzdHJpbmcgIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgICAgICAgICAgPSAiRU5UIjsKCiAgICAvLyBFUkMyMCBkZWNpbWFsIHBsYWNlcwogICAgdWludDggICBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgICAgICAgID0gMTg7CgogICAgLy8gVG90YWwgc3VwcGx5ICgqIGluIHVuaXQgRU5UICopCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBUT1RBTF9UT0tFTlMgICAgPSAxMDAwMDAwMDA7CgogICAgLy8gQ29udHJhY3Qgb3duZXIgYXQgdGltZSBvZiBkZXBsb3ltZW50LgogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgT1dORVIgICAgICAgICAgID0gMHhkQTM3ODBDZmYyYUUzYTU5YWUxNmVDMTczNERFZWM3N2E3ZmQ4ZGIyOwoKICAgIC8vICsgbmV3IERhdGUoIjAwOjAwIDIgTm92ZW1iZXIgMjAxNyB1dGMiKS8xMDAwCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBTVEFSVF9EQVRFICAgICAgPSAxNTA5NTgwODAwOwoKICAgIC8vIEEgSHV0MzQgYWRkcmVzcyB0byBvd24gdG9rZW5zCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBIVVQzNF9SRVRBSU4gICAgPSAweDMxMzVGNGFjQTNDMUFkNDc1ODk4MTUwMGY4ZEIyMEViRGM1QTFjYUI7CiAgICAKICAgIC8vIEEgSHV0MzQgYWRkcmVzcyB0byBhY2NlcHQgcmFpc2VkIGZ1bmRzCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBIVVQzNF9XQUxMRVQgICAgPSAweEE3MGQwNGRDNGE2NDk2MGM0MENEMkVEMkNERTM2RDc2Q0E0RURGYUI7CiAgICAKICAgIC8vIFBlcmNlbnRhZ2Ugb2YgdG9rZW5zIHRvIGJlIHZlc3RlZCBvdmVyIDIgeWVhcnMuIDIwJQogICAgdWludCAgICBwdWJsaWMgY29uc3RhbnQgVkVTVEVEX1BFUkNFTlQgID0gMjA7CgogICAgLy8gVmVzdGluZyBwZXJpb2QKICAgIHVpbnQgICAgcHVibGljIGNvbnN0YW50IFZFU1RJTkdfUEVSSU9EICA9IDI2IHdlZWtzOwoKICAgIC8vIE1pbmltdW0gY2FwIG92ZXIgd2hpY2ggdGhlIGZ1bmRpbmcgaXMgY29uc2lkZXJlZCBzdWNjZXNzZnVsCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBNSU5fQ0FQICAgICAgICAgPSAzMDAwICogMSBldGhlcjsKCiAgICAvLyBBbiBldGhlciB0aHJlc2hvbGQgb3ZlciB3aGljaCBhIGZ1bmRlciBtdXN0IEtZQyBiZWZvcmUgdG9rZW5zIGNhbiBiZQogICAgLy8gdHJhbnNmZXJyZWQgKHVuaXQgb2YgZXRoZXIpOwogICAgdWludCAgICBwdWJsaWMgY29uc3RhbnQgS1lDX1RIUkVTSE9MRCAgID0gMTUwICogMSBldGhlcjsKCiAgICAvLyBBIG1pbmltdW0gYW1vdW50IG9mIGV0aGVyIGZ1bmRpbmcgYmVmb3JlIHRoZSBjb25jaWVyZ2UgcmF0ZSBpcyBhcHBsaWVkCiAgICAvLyB0byB0b2tlbnMKICAgIHVpbnQgICAgcHVibGljIGNvbnN0YW50IFdIT0xFU0FMRV9USFJFU0hPTEQgID0gMTUwICogMSBldGhlcjsKICAgIAogICAgLy8gTnVtYmVyIG9mIHRva2VucyB1cCBmb3Igd2hvbGVzYWxlIHB1cmNoYXNlcnMgKCogaW4gdW5pdCBFTlQgKikKICAgIHVpbnQgICAgcHVibGljIGNvbnN0YW50IFdIT0xFU0FMRV9UT0tFTlMgPSAxMjUwMDAwMDsKCiAgICAvLyBUb2tlbnMgc29sZCB0byBwcmVmdW5kZXJzICgqIGluIHVuaXQgRU5UICopCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBQUkVTT0xEX1RPS0VOUyAgPSAxODE3NTAwOwogICAgCiAgICAvLyBQcmVzYWxlIGV0aGVyIGlzIGVzdGltYXRlZWQgZnJvbSBmaWF0IHJhaXNlZCBwcmlvciB0byBJQ08gYXQgdGhlIEVUSC9BVUQKICAgIC8vIHJhdGUgYXQgdGhlIHRpbWUgb2YgY29udHJhY3QgZGVwbG95bWVudAogICAgdWludCAgICBwdWJsaWMgY29uc3RhbnQgUFJFU0FMRV9FVEhfUkFJU0UgPSAyMTkwICogMSBldGhlcjsKICAgIAogICAgLy8gQWRkcmVzcyBob2xkaW5nIHByZXNvbGQgdG9rZW5zIHRvIGJlIGRpc3RyaWJ1dGVkIGFmdGVyIElDTwogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgUFJFU09MRF9BRERSRVNTID0gMHg2QkY3MDhlRjJDMUZEY2UzNjAzYzA0Q0U5NTQ3QUE2RTEzNDA5M2I2OwogICAgCiAgICAvLyB3aG9sZXNhbGUgcmF0ZSBmb3IgcHVyY2hhc2VzIG92ZXIgV0hPTEVTQUxFX1RIUkVTSE9MRCBldGhlcgogICAgdWludCAgICBwdWJsaWMgY29uc3RhbnQgUkFURV9XSE9MRVNBTEUgID0gMTAwMDsKCiAgICAvLyBUaW1lIGRlcGVuZGFudCByZXRhaWwgcmF0ZXMKICAgIC8vIEZpcnN0IERheQogICAgdWludCAgICBwdWJsaWMgY29uc3RhbnQgUkFURV9EQVlfMCAgICAgID0gNzUwOwoKICAgIC8vIEZpcnN0IFdlZWsgKFRoZSBzaXggZGF5cyBhZnRlciBmaXJzdCBkYXkpCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBSQVRFX0RBWV8xICAgICAgPSA2NTI7CgogICAgLy8gU2Vjb25kIFdlZWsKICAgIHVpbnQgICAgcHVibGljIGNvbnN0YW50IFJBVEVfREFZXzcgICAgICA9IDU4ODsKCiAgICAvLyBUaGlyZCBXZWVrCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBSQVRFX0RBWV8xNCAgICAgPSA1NDU7CgogICAgLy8gRm91cnRoIFdlZWsKICAgIHVpbnQgICAgcHVibGljIGNvbnN0YW50IFJBVEVfREFZXzIxICAgICA9IDUxNzsKCiAgICAvLyBGaWZ0aCBXZWVrCiAgICB1aW50ICAgIHB1YmxpYyBjb25zdGFudCBSQVRFX0RBWV8yOCAgICAgPSA1MDA7Cn0KCgpsaWJyYXJ5IFNhZmVNYXRoCnsKICAgIC8vIGEgYWRkIHRvIGIKICAgIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICB9CiAgICAKICAgIC8vIGEgc3VidHJhY3QgYgogICAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgYykgewogICAgICAgIGMgPSBhIC0gYjsKICAgICAgICBhc3NlcnQoYyA8PSBhKTsKICAgIH0KICAgIAogICAgLy8gYSBtdWx0aXBsaWVkIGJ5IGIKICAgIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIH0KICAgIAogICAgLy8gYSBkaXZpZGVkIGJ5IGIKICAgIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICBhc3NlcnQoYiAhPSAwKTsKICAgICAgICBjID0gYSAvIGI7CiAgICB9Cn0KCgpjb250cmFjdCBSZWVudHJ5UHJvdGVjdGVkCnsKICAgIC8vIFRoZSByZWVudHJ5IHByb3RlY3Rpb24gc3RhdGUgbXV0ZXguCiAgICBib29sIF9fcmVNdXRleDsKCiAgICAvLyBTZXRzIGFuZCBjbGVhcnMgbXV0ZXggaW4gb3JkZXIgdG8gYmxvY2sgZnVuY3Rpb24gcmVlbnRyeQogICAgbW9kaWZpZXIgcHJldmVudFJlZW50cnkoKSB7CiAgICAgICAgcmVxdWlyZSghX19yZU11dGV4KTsKICAgICAgICBfX3JlTXV0ZXggPSB0cnVlOwogICAgICAgIF87CiAgICAgICAgZGVsZXRlIF9fcmVNdXRleDsKICAgIH0KCiAgICAvLyBCbG9ja3MgZnVuY3Rpb24gZW50cnkgaWYgbXV0ZXggaXMgc2V0CiAgICBtb2RpZmllciBub1JlZW50cnkoKSB7CiAgICAgICAgcmVxdWlyZSghX19yZU11dGV4KTsKICAgICAgICBfOwogICAgfQp9CgoKY29udHJhY3QgRVJDMjBUb2tlbgp7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCi8qIENvbnN0YW50cyAqLwoKICAgIC8vIG5vbmUKICAgIAovKiBTdGF0ZSB2YXJpYWJsZSAqLwoKICAgIC8vLyBAcmV0dXJuIFRoZSBUb3RhbCBzdXBwbHkgb2YgdG9rZW5zCiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIAogICAgLy8vIEByZXR1cm4gVG9rZW5zIG93bmVkIGJ5IGFuIGFkZHJlc3MKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CiAgICAKICAgIC8vLyBAcmV0dXJuIFRva2VucyBzcGVuZGFibGUgYnkgYSB0aHJpZHBhcnR5CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgovKiBFdmVudHMgKi8KCiAgICAvLyBUcmlnZ2VyZWQgd2hlbiB0b2tlbnMgYXJlIHRyYW5zZmVycmVkLgogICAgZXZlbnQgVHJhbnNmZXIoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIF9mcm9tLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfdG8sCiAgICAgICAgdWludDI1NiBfYW1vdW50KTsKCiAgICAvLyBUcmlnZ2VyZWQgd2hlbmV2ZXIgYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpIGlzIGNhbGxlZC4KICAgIGV2ZW50IEFwcHJvdmFsKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLAogICAgICAgIHVpbnQyNTYgX2Ftb3VudCk7CgovKiBNb2RpZmllcnMgKi8KCiAgICAvLyBub25lCiAgICAKLyogRnVuY3Rpb25zICovCgogICAgLy8gVXNpbmcgYW4gZXhwbGljaXQgZ2V0dGVyIGFsbG93cyBmb3IgZnVuY3Rpb24gb3ZlcmxvYWRpbmcgICAgCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfYWRkcikKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX2FkZHJdOwogICAgfQogICAgCiAgICAvLyBVc2luZyBhbiBleHBsaWNpdCBnZXR0ZXIgYWxsb3dzIGZvciBmdW5jdGlvbiBvdmVybG9hZGluZyAgICAKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyB0byBhZGRyZXNzIF90bwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiB4ZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7CiAgICB9CgogICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShfYW1vdW50IDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKICAgICAgICAKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsKICAgICAgICByZXR1cm4geGZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgIH0KCiAgICAvLyBQcm9jZXNzIGEgdHJhbnNmZXIgaW50ZXJuYWxseS4KICAgIGZ1bmN0aW9uIHhmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShfYW1vdW50IDw9IGJhbGFuY2VzW19mcm9tXSk7CgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgICAgIAogICAgICAgIC8vIGF2b2lkIHdhc3RpbmcgZ2FzIG9uIDAgdG9rZW4gdHJhbnNmZXJzCiAgICAgICAgaWYoX2Ftb3VudCA9PSAwKSByZXR1cm4gdHJ1ZTsKICAgICAgICAKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VzW190b10gICA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEFwcHJvdmVzIGEgdGhpcmQtcGFydHkgc3BlbmRlcgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwKCiMjIENvbmRpdGlvbmFsIEVudHJ5IFRhYmxlCgpGdW5jdGlvbnMgbXVzdCB0aHJvdyBvbiBGIGNvbmRpdGlvbnMKClJlbmV0cnkgcHJldmVudGlvbiBpcyBvbiBhbGwgcHVibGljIG11dGF0aW5nIGZ1bmN0aW9ucwpSZWVudHJ5IG11dGV4IHNldCBpbiBmaW5hbGl6ZUlDTygpLCBleHRlcm5hbFhmZXIoKSwgcmVmdW5kKCkKCnxmdW5jdGlvbiAgICAgICAgICAgICAgICB8PHN0YXJ0RGF0ZSB8PGVuZERhdGUgIHxmdW5kRmFpbGVkICB8ZnVuZFJhaXNlZHxpY29TdWNjZWVkZWQKfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tOnw6LS0tLS0tLS06fDotLS0tLS0tLS0tOnw6LS0tLS0tLS06fDotLS0tLS0tLS06fAp8KCkgICAgICAgICAgICAgICAgICAgICAgfEYgICAgICAgICAgfFQgICAgICAgICB8RiAgICAgICAgICAgfFQgICAgICAgICB8RiAgICAgICAgICB8CnxhYm9ydCgpICAgICAgICAgICAgICAgICB8VCAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgICB8VCAgICAgICAgIHxGICAgICAgICAgIHwKfHByb3h5UHVyY2hhc2UoKSAgICAgICAgIHxGICAgICAgICAgIHxUICAgICAgICAgfEYgICAgICAgICAgIHxUICAgICAgICAgfEYgICAgICAgICAgfAp8ZmluYWxpemVJQ08oKSAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8RiAgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICB8CnxyZWZ1bmQoKSAgICAgICAgICAgICAgICB8RiAgICAgICAgICB8RiAgICAgICAgIHxUICAgICAgICAgICB8RiAgICAgICAgIHxGICAgICAgICAgIHwKfHJlZnVuZEZvcigpICAgICAgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfFQgICAgICAgICAgIHxGICAgICAgICAgfEYgICAgICAgICAgfAp8dHJhbnNmZXIoKSAgICAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8RiAgICAgICAgICAgfEYgICAgICAgICB8VCAgICAgICAgICB8Cnx0cmFuc2ZlckZyb20oKSAgICAgICAgICB8RiAgICAgICAgICB8RiAgICAgICAgIHxGICAgICAgICAgICB8RiAgICAgICAgIHxUICAgICAgICAgIHwKfHRyYW5zZmVyVG9NYW55KCkgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfEYgICAgICAgICAgIHxGICAgICAgICAgfFQgICAgICAgICAgfAp8YXBwcm92ZSgpICAgICAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8RiAgICAgICAgICAgfEYgICAgICAgICB8VCAgICAgICAgICB8CnxjbGVhckt5YygpICAgICAgICAgICAgICB8VCAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgIHwKfHJlbGVhc2VWZXN0ZWQoKSAgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfEYgICAgICAgICAgIHxGICAgICAgICAgfG5vdz5yZWxlYXNlfAp8Y2hhbmdlT3duZXIoKSAgICAgICAgICAgfFQgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICB8CnxhY2NlcHRPd25lcnNoaXAoKSAgICAgICB8VCAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgIHwKfHRyYW5zZmVyRXh0ZXJuYWxUb2tlbnMoKXxUICAgICAgICAgIHxUICAgICAgICAgfFQgICAgICAgICAgIHxUICAgICAgICAgfFQgICAgICAgICAgfAp8ZGVzdHJveSgpICAgICAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8IV9fYWJvcnRGdXNlfEYgICAgICAgICB8RiAgICAgICAgICB8CgpcKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKY29udHJhY3QgSHV0MzRJQ09BYnN0cmFjdAp7CiAgICAvLy8gQGRldiBMb2dnZWQgdXBvbiByZWNlaXZpbmcgYSBkZXBvc2l0CiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdmFsdWUgaGFzIGJlZW4gcmVjaWV2ZWQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSB2YWx1ZSBvZiBldGhlciByZWNlaXZlZAogICAgZXZlbnQgRGVwb3NpdChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIHVpbnQgX3ZhbHVlKTsKICAgIAogICAgLy8vIEBkZXYgTG9nZ2VkIHVwb24gYSB3aXRoZHJhd2FsCiAgICAvLy8gQHBhcmFtIF9mcm9tIHRoZSBhZGRyZXNzIG9mIHRoZSB3aXRoZHJhd2VyCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIHRvIHdoaWNoIHZhbHVlIHdhcyBzZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgdmFsdWUgaW4gZXRoZXIgd2hpY2ggd2FzIHdpdGhkcmF3bgogICAgZXZlbnQgV2l0aGRyYXdhbChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQgX3ZhbHVlKTsKCiAgICAvLy8gQGRldiBMb2dnZWQgd2hlbiBuZXcgb3duZXIgYWNjZXB0cyBvd25lcnNoaXAKICAgIC8vLyBAcGFyYW0gX2Zyb20gdGhlIG9sZCBvd25lciBhZGRyZXNzCiAgICAvLy8gQHBhcmFtIF90byB0aGUgbmV3IG93bmVyIGFkZHJlc3MKICAgIGV2ZW50IENoYW5nZWRPd25lcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8pOwogICAgCiAgICAvLy8gQGRldiBMb2dnZWQgd2hlbiBvd25lciBpbml0aWF0ZXMgYSBjaGFuZ2Ugb2Ygb3duZXJzaGlwCiAgICAvLy8gQHBhcmFtIF90byB0aGUgbmV3IG93bmVyIGFkZHJlc3MKICAgIGV2ZW50IENoYW5nZU93bmVyVG8oYWRkcmVzcyBpbmRleGVkIF90byk7CiAgICAKICAgIC8vLyBAZGV2IExvZ2dlZCB3aGVuIGEgZnVuZGVyIGV4Y2VlZHMgdGhlIEtZQyBsaW1pdAogICAgLy8vIEBwYXJhbSBfYWRkciBBZGRyZXNzIHRvIHNldCBvciBjbGVhciBLWUMgZmxhZwogICAgLy8vIEBwYXJhbSBfa3ljIEEgYm9vbGVhbiBmbGFnCiAgICBldmVudCBLeWMoYWRkcmVzcyBpbmRleGVkIF9hZGRyLCBib29sIF9reWMpOwoKICAgIC8vLyBAZGV2IExvZ2dlZCB3aGVuIHZlc3RlZCB0b2tlbnMgYXJlIHJlbGVhc2VkIGJhY2sgdG8gSFVUMzJfV0FMTEVUCiAgICAvLy8gQHBhcmFtIF9yZWxlYXNlRGF0ZSBUaGUgb2ZmaWNpYWwgcmVsZWFzZSBkYXRlIChldmVuIGlmIHJlbGVhc2VkIGF0CiAgICAvLy8gbGF0ZXIgZGF0ZSkKICAgIGV2ZW50IFZlc3RpbmdSZWxlYXNlZCh1aW50IF9yZWxlYXNlRGF0ZSk7CiAgICAKICAgIC8vLyBAZGV2IExvZ2dlZCBpZiB0aGUgY29udHJhY3QgaXMgYWJvcnRlZAogICAgZXZlbnQgQWJvcnRlZCgpOwoKLy8KLy8gQ29uc3RhbnRzCi8vCgogICAgLy8vIEBkZXYgVGhlIEh1dDM0IHZlc3RpbmcgJ3BzdWRvLWFkZHJlc3MnIGZvciB0cmFuc2ZlcnJpbmcgYW5kIHJlbGVhc2luZwogICAgLy8vIHZlc3RlZCB0b2tlbnMgdG8gdGhlIEh1dDM0IFdhbGxldC4gVGhlIGFkZHJlc3MgaXMgVVRGOCBlbmNvZGluZyBvZiB0aGUKICAgIC8vLyBzdHJpbmcgYW5kIGNhbiBvbmx5IGJlIGFjY2Vzc2VkIGJ5IHRoZSAncmVsZWFzZVZlc3RlZCgpJyBmdW5jdGlvbi4KICAgIC8vLyBAcmV0dXJuIGAweDQ4NzU3NDMzMzQyMDU2NjU3Mzc0Njk2ZTY3MDAwMDAwMDAwMDAwMDBgCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBIVVQzNF9WRVNUX0FERFIgPSBhZGRyZXNzKGJ5dGVzMjAoIkh1dDM0IFZlc3RpbmciKSk7CgovLwovLyBTdGF0ZSBWYXJpYWJsZXMKLy8KCiAgICAvLy8gQGRldiBUaGlzIGZ1c2UgYmxvd3MgdXBvbiBjYWxsaW5nIGFib3J0KCkgd2hpY2ggZm9yY2VzIGEgZmFpbCBzdGF0ZQogICAgLy8vIEByZXR1cm4gdGhlIGFib3J0IHN0YXRlLiB0cnVlID09IG5vdCBhYm9ydGVkCiAgICBib29sIHB1YmxpYyBfX2Fib3J0RnVzZSA9IHRydWU7CiAgICAKICAgIC8vLyBAZGV2IFNldHMgdG8gdHJ1ZSBhZnRlciB0aGUgZnVuZCBpcyBzd2VwdCB0byB0aGUgZnVuZCB3YWxsZXQsIGFsbG93cwogICAgLy8vIHRva2VuIHRyYW5zZmVycyBhbmQgcHJldmVudHMgYWJvcnQoKQogICAgLy8vIEByZXR1cm4gZmluYWwgc3VjY2VzcyBzdGF0ZSBvZiBJQ08KICAgIGJvb2wgcHVibGljIGljb1N1Y2NlZWRlZDsKCiAgICAvLy8gQGRldiBBbiBhZGRyZXNzIHBlcm1pc3Npb25lZCB0byBlbmFjdCBvd25lciByZXN0cmljdGVkIGZ1bmN0aW9ucwogICAgLy8vIEByZXR1cm4gb3duZXIKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgCiAgICAvLy8gQGRldiBBbiBhZGRyZXNzIHBlcm1pc3Npb25lZCB0byB0YWtlIG93bmVyc2hpcCBvZiB0aGUgY29udHJhY3QKICAgIC8vLyBAcmV0dXJuIG5ldyBvd25lciBhZGRyZXNzCiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKCiAgICAvLy8gQGRldiBBIHRhbGx5IG9mIHRvdGFsIGV0aGVyIHJhaXNlZCBkdXJpbmcgdGhlIGZ1bmRpbmcgcGVyaW9kCiAgICAvLy8gQHJldHVybiBUb3RhbCBldGhlciByYWlzZWQgZHVyaW5nIGZ1bmRpbmcKICAgIHVpbnQgcHVibGljIGV0aGVyUmFpc2VkOwogICAgCiAgICAvLy8gQHJldHVybiBXaG9sZXNhbGUgdG9rZW5zIGF2YWlsYWJsZSBmb3Igc2FsZQogICAgdWludCBwdWJsaWMgd2hvbGVzYWxlTGVmdDsKICAgIAogICAgLy8vIEByZXR1cm4gVG90YWwgZXRoZXIgcmVmdW5kZWQuIFVzZWQgdG8gcGVybWlzaW9uIGNhbGwgdG8gYGRlc3Ryb3koKWAKICAgIHVpbnQgcHVibGljIHJlZnVuZGVkOwogICAgCiAgICAvLy8gQHJldHVybnMgRGF0ZSBvZiBuZXh0IHZlc3RpbmcgcmVsZWFzZQogICAgdWludCBwdWJsaWMgbmV4dFJlbGVhc2VEYXRlOwoKICAgIC8vLyBAcmV0dXJuIEV0aGVyIHBhaWQgYnkgYW4gYWRkcmVzcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgZXRoZXJDb250cmlidXRlZDsKICAgIAogICAgLy8vIEByZXR1cm5zIEtZQyBmbGFnIGZvciBhbiBhZGRyZXNzCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBtdXN0S3ljOwoKLy8KLy8gTW9kaWZpZXJzCi8vCgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCi8vCi8vIEZ1bmN0aW9uIEFic3RyYWN0cwovLwoKICAgIC8vLyBAcmV0dXJuIGB0cnVlYCBpZiBNSU5fRlVORFMgd2VyZSByYWlzZWQKICAgIGZ1bmN0aW9uIGZ1bmRSYWlzZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKTsKICAgIAogICAgLy8vIEByZXR1cm4gYHRydWVgIGlmIE1JTl9GVU5EUyB3ZXJlIG5vdCByYWlzZWQgYmVmb3JlIEVORF9EQVRFIG9yIGNvbnRyYWN0IAogICAgLy8vIGhhcyBiZWVuIGFib3J0ZWQKICAgIGZ1bmN0aW9uIGZ1bmRGYWlsZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKTsKCiAgICAvLy8gQHJldHVybiBUaGUgY3VycmVudCByZXRhaWwgcmF0ZSBmb3IgdG9rZW4gcHVyY2hhc2UKICAgIGZ1bmN0aW9uIGN1cnJlbnRSYXRlKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCk7CiAgICAKICAgIC8vLyBAcGFyYW0gX3dlaSBBIHZhbHVlIG9mIGV0aGVyIGluIHVuaXRzIG9mIHdlaQogICAgLy8vIEByZXR1cm4gYWxsVG9rZW5zXyByZXR1cm5hYmxlIHRva2VucyBmb3IgdGhlIGZ1bmRpbmcgYW1vdW50CiAgICAvLy8gQHJldHVybiB3aG9sZXNhbGVUb2tlbl8gTnVtYmVyIG9mIHRva2VucyBwdXJjaGFzZWQgYXQgd2hvbGVzYWxlIHJhdGUKICAgIGZ1bmN0aW9uIGV0aFRvVG9rZW5zKHVpbnQgX3dlaSkKICAgICAgICBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50IGFsbFRva2Vuc18sIHVpbnQgd2hvbGVzYWxlVG9rZW5zXyk7CgogICAgLy8vIEBub3RpY2UgUHJvY2Vzc2VzIGEgdG9rZW4gcHVyY2hhc2UgZm9yIGBfYWRkcmAKICAgIC8vLyBAcGFyYW0gX2FkZHIgQW4gYWRkcmVzcyB0byBwdXJjaGFzZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEJvb2xlYW4gc3VjY2VzcyB2YWx1ZQogICAgLy8vIEBkZXYgUmVxdWlyZXMgPDE1MCwwMDAgZ2FzCiAgICBmdW5jdGlvbiBwcm94eVB1cmNoYXNlKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKGJvb2wpOwoKICAgIC8vLyBAbm90aWNlIEZpbmFsaXplIHRoZSBJQ08gYW5kIHRyYW5zZmVyIGZ1bmRzCiAgICAvLy8gQHJldHVybiBCb29sZWFuIHN1Y2Nlc3MgdmFsdWUKICAgIGZ1bmN0aW9uIGZpbmFsaXplSUNPKCkgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIC8vLyBAbm90aWNlIENsZWFyIHRoZSBLWUMgZmxhZ3MgZm9yIGFuIGFycmF5IG9mIGFkZHJlc3NlcyB0byBhbGxvdyB0b2tlbnMKICAgIC8vLyB0cmFuc2ZlcnMKICAgIGZ1bmN0aW9uIGNsZWFyS3ljKGFkZHJlc3NbXSBfYWRkcnMpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIAogICAgLy8vIEBub3RpY2UgTWFrZSBidWxrIHRyYW5zZmVyIG9mIHRva2VucyB0byBtYW55IGFkZHJlc3NlcwogICAgLy8vIEBwYXJhbSBfYWRkcnMgQW4gYXJyYXkgb2YgcmVjaXBpZW50IGFkZHJlc3NlcwogICAgLy8vIEBwYXJhbSBfYW1vdW50cyBBbiBhcnJheSBvZiBhbW91bnRzIHRvIHRyYW5zZmVyIHRvIHJlc3BlY3RpdmUgYWRkcmVzc2VzCiAgICAvLy8gQHJldHVybiBCb29sZWFuIHN1Y2Nlc3MgdmFsdWUKICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9NYW55KGFkZHJlc3NbXSBfYWRkcnMsIHVpbnRbXSBfYW1vdW50cykKICAgICAgICBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgLy8vIEBub3RpY2UgUmVsZWFzZSB2ZXN0ZWQgdG9rZW5zIGFmdGVyIGEgbWF0dXJpdHkgZGF0ZQogICAgLy8vIEByZXR1cm4gQm9vbGVhbiBzdWNjZXNzIHZhbHVlCiAgICBmdW5jdGlvbiByZWxlYXNlVmVzdGVkKCkgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIC8vLyBAbm90aWNlIENsYWltIHJlZnVuZCBvbiBmYWlsZWQgSUNPCiAgICAvLy8gQHJldHVybiBCb29sZWFuIHN1Y2Nlc3MgdmFsdWUKICAgIGZ1bmN0aW9uIHJlZnVuZCgpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIAogICAgLy8vIEBub3RpY2UgUHVzaCByZWZ1bmQgZm9yIGBfYWRkcmAgZnJvbSBmYWlsZWQgSUNPCiAgICAvLy8gQHBhcmFtIF9hZGRycyBBbiBhcnJheSBvZiBhZGRyZXNzIHRvIHJlZnVuZAogICAgLy8vIEByZXR1cm4gQm9vbGVhbiBzdWNjZXNzIHZhbHVlCiAgICBmdW5jdGlvbiByZWZ1bmRGb3IoYWRkcmVzc1tdIF9hZGRycykgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIC8vLyBAbm90aWNlIEFib3J0IHRoZSB0b2tlbiBzYWxlIHByaW9yIHRvIGZpbmFsaXplSUNPKCkgCiAgICBmdW5jdGlvbiBhYm9ydCgpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgICAvLy8gQG5vdGljZSBTYWx2YWdlIGBfYW1vdW50YCB0b2tlbnMgYXQgYF9rYWRkcmAgYW5kIHNlbmQgdGhlbSB0byBgX3RvYAogICAgLy8vIEBwYXJhbSBfa0FkZHIgQW4gRVJDMjAgY29udHJhY3QgYWRkcmVzcwogICAgLy8vIEBwYXJhbSBfdG8gYW5kIGFkZHJlc3MgdG8gc2VuZCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX2Ftb3VudCBUaGUgbnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2ZlcgogICAgLy8vIEByZXR1cm4gQm9vbGVhbiBzdWNjZXNzIHZhbHVlCiAgICBmdW5jdGlvbiB0cmFuc2ZlckV4dGVybmFsVG9rZW4oYWRkcmVzcyBfa0FkZHIsIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpCiAgICAgICAgcHVibGljIHJldHVybnMgKGJvb2wpOwp9CgoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwKCiBIdXQzNElDTyBpbXBsaW1lbnRhdGlvbgoKXCotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCmNvbnRyYWN0IEh1dDM0SUNPIGlzIAogICAgUmVlbnRyeVByb3RlY3RlZCwKICAgIEVSQzIwVG9rZW4sCiAgICBIdXQzNElDT0Fic3RyYWN0LAogICAgSHV0MzRDb25maWcKewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgovLwovLyBDb25zdGFudHMKLy8KCiAgICAvLyBUb2tlbiBmaXhlZCBwb2ludCBmb3IgZGVjaW1hbCBwbGFjZXMKICAgIHVpbnQgY29uc3RhbnQgVE9LRU4gPSB1aW50KDEwKSoqZGVjaW1hbHM7IAoKICAgIC8vIENhbGN1bGF0ZSB2ZXN0ZWQgdG9rZW5zCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBWRVNURURfVE9LRU5TID0KICAgICAgICAgICAgVE9UQUxfVE9LRU5TICogVE9LRU4gKiBWRVNURURfUEVSQ0VOVCAvIDEwMDsKICAgICAgICAgICAgCiAgICAvLyBIdXQzNCByZXRhaW5zIDUwJSBvZiB0b2tlbnMgKDcwJSAtIDIwJSB2ZXN0ZWQgdG9rZW5zKSAKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFJFVEFJTkVEX1RPS0VOUyA9IFRPS0VOICogVE9UQUxfVE9LRU5TIC8gMjsKCiAgICAvLyBDYWxjdWxhdGUgZW5kIGRhdGUKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEVORF9EQVRFID0gU1RBUlRfREFURSArIDM1IGRheXM7CgogICAgLy8gRGl2aWRlcyBgZXRoZXJSYWlzZWRgIHRvIGNhbGN1bGF0ZSBjb21taXNpb24KICAgIC8vIGV0aGVyUmFpc2VkLzYuNjYuLi4gPT0gZXRoZXJSYWlzZWQgKiAxLjUlIC8gMTAwCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBDT01NSVNTSU9OX0RJViA9IDY3OwoKICAgIC8vIERldmVsb3BlciBjb21taXNzaW9uIHdhbGxldAogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgQ09NTUlTU0lPTl9XQUxMRVQgPSAKICAgICAgICAweDAwNjVENTA2RTQ3NUI1REJENzY0ODBiQUZhNTdmZTdDNDFjNzgzYWY7CgovLwovLyBGdW5jdGlvbnMKLy8KCiAgICBmdW5jdGlvbiBIdXQzNElDTygpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgLy8gUnVuIHNhbml0eSBjaGVja3MKICAgICAgICByZXF1aXJlKFRPVEFMX1RPS0VOUyAhPSAwKTsKICAgICAgICByZXF1aXJlKE9XTkVSICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShIVVQzNF9SRVRBSU4gIT0gMHgwKTsKICAgICAgICByZXF1aXJlKEhVVDM0X1dBTExFVCAhPSAweDApOwogICAgICAgIHJlcXVpcmUoUFJFU09MRF9UT0tFTlMgPD0gV0hPTEVTQUxFX1RPS0VOUyk7CiAgICAgICAgcmVxdWlyZShQUkVTT0xEX1RPS0VOUyA9PSAwIHx8IFBSRVNPTERfQUREUkVTUyAhPSAweDApOwogICAgICAgIHJlcXVpcmUoTUlOX0NBUCAhPSAwKTsKICAgICAgICByZXF1aXJlKFNUQVJUX0RBVEUgPj0gbm93KTsKICAgICAgICByZXF1aXJlKGJ5dGVzKG5hbWUpLmxlbmd0aCAhPSAwKTsKICAgICAgICByZXF1aXJlKGJ5dGVzKHN5bWJvbCkubGVuZ3RoICE9IDApOwogICAgICAgIHJlcXVpcmUoS1lDX1RIUkVTSE9MRCAhPSAwKTsKICAgICAgICByZXF1aXJlKFJBVEVfREFZXzAgPj0gUkFURV9EQVlfMSk7CiAgICAgICAgcmVxdWlyZShSQVRFX0RBWV8xID49IFJBVEVfREFZXzcpOwogICAgICAgIHJlcXVpcmUoUkFURV9EQVlfNyA+PSBSQVRFX0RBWV8xNCk7CiAgICAgICAgcmVxdWlyZShSQVRFX0RBWV8xNCA+PSBSQVRFX0RBWV8yMSk7CiAgICAgICAgcmVxdWlyZShSQVRFX0RBWV8yMSA+PSBSQVRFX0RBWV8yOCk7CiAgICAgICAgCiAgICAgICAgb3duZXIgPSBPV05FUjsKICAgICAgICB0b3RhbFN1cHBseSA9IFRPVEFMX1RPS0VOUy5tdWwoVE9LRU4pOwogICAgICAgIHdob2xlc2FsZUxlZnQgPSBXSE9MRVNBTEVfVE9LRU5TLm11bChUT0tFTik7CiAgICAgICAgdWludCBwcmVzb2xkID0gUFJFU09MRF9UT0tFTlMubXVsKFRPS0VOKTsKICAgICAgICB3aG9sZXNhbGVMZWZ0ID0gd2hvbGVzYWxlTGVmdC5zdWIocHJlc29sZCk7CgogICAgICAgIC8vIFByZXNhbGUgcmFpc2UgaXMgYXBwb3hpbWF0ZSBnaXZlbiBpdCB3YXMgY29uZHVjdGVkIGluIEZpYXQuCiAgICAgICAgZXRoZXJSYWlzZWQgPSBQUkVTQUxFX0VUSF9SQUlTRTsKCiAgICAgICAgLy8gTWludCB0aGUgdG90YWwgc3VwcGx5IGludG8gSHV0MzQgdG9rZW4gaG9sZGluZyBhZGRyZXNzCiAgICAgICAgYmFsYW5jZXNbSFVUMzRfUkVUQUlOXSA9IHRvdGFsU3VwcGx5OwogICAgICAgIFRyYW5zZmVyKDB4MCwgSFVUMzRfUkVUQUlOLCB0b3RhbFN1cHBseSk7CgogICAgICAgIC8vIFRyYW5zZmVyIHZlc3RlZCB0b2tlbnMgZnJvbSBob2xkaW5nIHdhbGxldCB0byB2ZXN0aW5nIHBzZXVkby1hZGRyZXNzCiAgICAgICAgYmFsYW5jZXNbSFVUMzRfUkVUQUlOXSA9IGJhbGFuY2VzW0hVVDM0X1JFVEFJTl0uc3ViKFZFU1RFRF9UT0tFTlMpOwogICAgICAgIGJhbGFuY2VzW0hVVDM0X1ZFU1RfQUREUl0gPSBiYWxhbmNlc1tIVVQzNF9WRVNUX0FERFJdLmFkZChWRVNURURfVE9LRU5TKTsKICAgICAgICBUcmFuc2ZlcihIVVQzNF9SRVRBSU4sIEhVVDM0X1ZFU1RfQUREUiwgVkVTVEVEX1RPS0VOUyk7CgogICAgICAgIC8vIFRyYW5zZmVyIHByZXNvbGQgdG9rZW5zIHRvIGhvbGRpbmcgYWRkcmVzczsKICAgICAgICBiYWxhbmNlc1tIVVQzNF9SRVRBSU5dID0gYmFsYW5jZXNbSFVUMzRfUkVUQUlOXS5zdWIocHJlc29sZCk7CiAgICAgICAgYmFsYW5jZXNbUFJFU09MRF9BRERSRVNTXSA9IGJhbGFuY2VzW1BSRVNPTERfQUREUkVTU10uYWRkKHByZXNvbGQpOwogICAgICAgIFRyYW5zZmVyKEhVVDM0X1JFVEFJTiwgUFJFU09MRF9BRERSRVNTLCBwcmVzb2xkKTsKICAgIH0KCiAgICAvLyBEZWZhdWx0IGZ1bmN0aW9uLiBBY2NlcHRzIHBheW1lbnRzIGR1cmluZyBmdW5kaW5nIHBlcmlvZAogICAgZnVuY3Rpb24gKCkKICAgICAgICBwdWJsaWMKICAgICAgICBwYXlhYmxlCiAgICB7CiAgICAgICAgLy8gUGFzcyB0aHJvdWdoIHRvIHB1cmNoYXNpbmcgZnVuY3Rpb24uIFdpbGwgdGhyb3cgb24gZmFpbGVkIG9yCiAgICAgICAgLy8gc3VjY2Vzc2Z1bCBJQ08KICAgICAgICBwcm94eVB1cmNoYXNlKG1zZy5zZW5kZXIpOwogICAgfQoKLy8KLy8gR2V0dGVycwovLwoKICAgIC8vIElDTyBmYWlscyBpZiBhYm9ydGVkIG9yIG1pbmltdW0gZnVuZHMgYXJlIG5vdCByYWlzZWQgYnkgdGhlIGVuZCBkYXRlCiAgICBmdW5jdGlvbiBmdW5kRmFpbGVkKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gIV9fYWJvcnRGdXNlCiAgICAgICAgICAgIHx8IChub3cgPiBFTkRfREFURSAmJiBldGhlclJhaXNlZCA8IE1JTl9DQVApOwogICAgfQogICAgCiAgICAvLyBGdW5kaW5nIHN1Y2NlZWRzIGlmIG5vdCBhYm9ydGVkLCBtaW5pbXVtIGZ1bmRzIGFyZSByYWlzZWQgYmVmb3JlIGVuZCBkYXRlCiAgICBmdW5jdGlvbiBmdW5kUmFpc2VkKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gIWZ1bmRGYWlsZWQoKQogICAgICAgICAgICAmJiBldGhlclJhaXNlZCA+PSBNSU5fQ0FQCiAgICAgICAgICAgICYmIG5vdyA+IFNUQVJUX0RBVEU7CiAgICB9CgogICAgLy8gUmV0dXJucyB3aG9sZXNhbGUgdmFsdWUgaW4gd2VpCiAgICBmdW5jdGlvbiB3aG9sZVNhbGVWYWx1ZUxlZnQoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHJldHVybiB3aG9sZXNhbGVMZWZ0IC8gUkFURV9XSE9MRVNBTEU7CiAgICB9CgogICAgZnVuY3Rpb24gY3VycmVudFJhdGUoKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHJldHVybgogICAgICAgICAgICBmdW5kRmFpbGVkKCkgPyAwIDoKICAgICAgICAgICAgaWNvU3VjY2VlZGVkID8gMCA6CiAgICAgICAgICAgIG5vdyA8IFNUQVJUX0RBVEUgPyAwIDoKICAgICAgICAgICAgbm93IDwgU1RBUlRfREFURSArIDEgZGF5cyA/IFJBVEVfREFZXzAgOgogICAgICAgICAgICBub3cgPCBTVEFSVF9EQVRFICsgNyBkYXlzID8gUkFURV9EQVlfMSA6CiAgICAgICAgICAgIG5vdyA8IFNUQVJUX0RBVEUgKyAxNCBkYXlzID8gUkFURV9EQVlfNyA6CiAgICAgICAgICAgIG5vdyA8IFNUQVJUX0RBVEUgKyAyMSBkYXlzID8gUkFURV9EQVlfMTQgOgogICAgICAgICAgICBub3cgPCBTVEFSVF9EQVRFICsgMjggZGF5cyA/IFJBVEVfREFZXzIxIDoKICAgICAgICAgICAgbm93IDwgRU5EX0RBVEUgPyBSQVRFX0RBWV8yOCA6CiAgICAgICAgICAgIDA7CiAgICB9CiAgICAKICAgIC8vIENhbGN1bGF0ZXMgdGhlIHNhbGUgYW5kIHdob2xlc2FsZSBwb3J0aW9uIG9mIHRva2VucyBmb3IgYSBnaXZlbiB2YWx1ZQogICAgLy8gb2Ygd2VpIGF0IHRoZSB0aW1lIG9mIGNhbGxpbmcuCiAgICBmdW5jdGlvbiBldGhUb1Rva2Vucyh1aW50IF93ZWkpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnMgKHVpbnQgYWxsVG9rZW5zXywgdWludCB3aG9sZXNhbGVUb2tlbnNfKQogICAgewogICAgICAgIC8vIEdldCB3aG9sZXNhbGUgcG9ydGlvbiBvZiBldGhlciBhbmQgdG9rZW5zCiAgICAgICAgdWludCB3c1ZhbHVlTGVmdCA9IHdob2xlU2FsZVZhbHVlTGVmdCgpOwogICAgICAgIHVpbnQgd2hvbGVzYWxlU3BlbmQgPSAKICAgICAgICAgICAgICAgIGZ1bmRGYWlsZWQoKSA/IDAgOgogICAgICAgICAgICAgICAgaWNvU3VjY2VlZGVkID8gMCA6CiAgICAgICAgICAgICAgICBub3cgPCBTVEFSVF9EQVRFID8gMCA6CiAgICAgICAgICAgICAgICBub3cgPiBFTkRfREFURSA/IDAgOgogICAgICAgICAgICAgICAgLy8gTm8gd2hvbGVzYWxlIHB1cmNoc2UKICAgICAgICAgICAgICAgIF93ZWkgPCBXSE9MRVNBTEVfVEhSRVNIT0xEID8gMCA6CiAgICAgICAgICAgICAgICAvLyBUb3RhbCB3aG9sZXNhbGUgcHVyY2hhc2UKICAgICAgICAgICAgICAgIF93ZWkgPCB3c1ZhbHVlTGVmdCA/ICBfd2VpIDoKICAgICAgICAgICAgICAgIC8vIG92ZXIgZnVuZGVkIGZvciByZW1haW5pbmcgd2hvbGVzYWxlIHRva2VucwogICAgICAgICAgICAgICAgd3NWYWx1ZUxlZnQ7CiAgICAgICAgCiAgICAgICAgd2hvbGVzYWxlVG9rZW5zXyA9IHdob2xlc2FsZVNwZW5kCiAgICAgICAgICAgICAgICAubXVsKFJBVEVfV0hPTEVTQUxFKQogICAgICAgICAgICAgICAgLm11bChUT0tFTikKICAgICAgICAgICAgICAgIC5kaXYoMSBldGhlcik7CgogICAgICAgIC8vIFJlbWFpbmluZyB3ZWkgdXNlZCB0byBwdXJjaGFzZSByZXRhaWwgdG9rZW5zCiAgICAgICAgX3dlaSA9IF93ZWkuc3ViKHdob2xlc2FsZVNwZW5kKTsKCiAgICAgICAgLy8gR2V0IHJldGFpbCByYXRlICAgICAgICAKICAgICAgICB1aW50IHNhbGVSYXRlID0gY3VycmVudFJhdGUoKTsKCiAgICAgICAgYWxsVG9rZW5zXyA9IF93ZWkKICAgICAgICAgICAgICAgIC5tdWwoc2FsZVJhdGUpCiAgICAgICAgICAgICAgICAubXVsKFRPS0VOKQogICAgICAgICAgICAgICAgLmRpdigxIGV0aGVyKQogICAgICAgICAgICAgICAgLmFkZCh3aG9sZXNhbGVUb2tlbnNfKTsKICAgIH0KCi8vCi8vIElDTyBmdW5jdGlvbnMKLy8KCiAgICAvLyBUaGUgZnVuZHJhaXNpbmcgY2FuIGJlIGFib3J0ZWQgYW55IHRpbWUgYmVmb3JlIGBmaW5hbGlzZUlDTygpYCBpcyBjYWxsZWQuCiAgICAvLyBUaGlzIHdpbGwgZm9yY2UgYSBmYWlsIHN0YXRlIGFuZCBhbGxvdyByZWZ1bmRzIHRvIGJlIGNvbGxlY3RlZC4KICAgIC8vIFRoZSBvd25lciBjYW4gYWJvcnQgb3IgYW55b25lIGVsc2UgaWYgYSBzdWNjZXNzZnVsIGZ1bmQgaGFzIG5vdCBiZWVuCiAgICAvLyBmaW5hbGlzZWQgYmVmb3JlIDcgZGF5cyBhZnRlciB0aGUgZW5kIGRhdGUuCiAgICBmdW5jdGlvbiBhYm9ydCgpCiAgICAgICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKCFpY29TdWNjZWVkZWQpOwogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lciB8fCBub3cgPiBFTkRfREFURSAgKyAxNCBkYXlzKTsKICAgICAgICBkZWxldGUgX19hYm9ydEZ1c2U7CiAgICAgICAgQWJvcnRlZCgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBHZW5lcmFsIGFkZHJlc3NlcyBjYW4gcHVyY2hhc2UgdG9rZW5zIGR1cmluZyBmdW5kaW5nCiAgICBmdW5jdGlvbiBwcm94eVB1cmNoYXNlKGFkZHJlc3MgX2FkZHIpCiAgICAgICAgcHVibGljCiAgICAgICAgcGF5YWJsZQogICAgICAgIG5vUmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZSghZnVuZEZhaWxlZCgpKTsKICAgICAgICByZXF1aXJlKCFpY29TdWNjZWVkZWQpOwogICAgICAgIHJlcXVpcmUobm93ID4gU1RBUlRfREFURSk7CiAgICAgICAgcmVxdWlyZShub3cgPD0gRU5EX0RBVEUpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CiAgICAgICAgCiAgICAgICAgLy8gTG9nIGV0aGVyIGRlcG9zaXQKICAgICAgICBEZXBvc2l0IChfYWRkciwgbXNnLnZhbHVlKTsKICAgICAgICAKICAgICAgICAvLyBHZXQgZXRoZXIgdG8gdG9rZW4gY29udmVyc2lvbgogICAgICAgIHVpbnQgdG9rZW5zOwogICAgICAgIC8vIFBvcnRpb24gb2YgdG9rZW5zIHNvbGQgYXQgd2hvbGVzYWxlIHJhdGUKICAgICAgICB1aW50IHdob2xlc2FsZVRva2VuczsKCiAgICAgICAgKHRva2Vucywgd2hvbGVzYWxlVG9rZW5zKSA9IGV0aFRvVG9rZW5zKG1zZy52YWx1ZSk7CgogICAgICAgIC8vIEJsb2NrIGFueSBmYWlsZWQgdG9rZW4gY3JlYXRpb24KICAgICAgICByZXF1aXJlKHRva2VucyA+IDApOwoKICAgICAgICAvLyBQcmV2ZW50IG92ZXIgc3Vic2NyaWJpbmcgCiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tIVVQzNF9SRVRBSU5dIC0gdG9rZW5zID49IFJFVEFJTkVEX1RPS0VOUyk7CgogICAgICAgIC8vIEFkanVzdCB3aG9sZXNhbGUgdG9rZW5zIGxlZnQgZm9yIHNhbGUKICAgICAgICBpZiAod2hvbGVzYWxlVG9rZW5zICE9IDApIHsKICAgICAgICAgICAgd2hvbGVzYWxlTGVmdCA9IHdob2xlc2FsZUxlZnQuc3ViKHdob2xlc2FsZVRva2Vucyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIHRyYW5zZmVyIHRva2VucyBmcm9tIGZ1bmQgd2FsbGV0CiAgICAgICAgYmFsYW5jZXNbSFVUMzRfUkVUQUlOXSA9IGJhbGFuY2VzW0hVVDM0X1JFVEFJTl0uc3ViKHRva2Vucyk7CiAgICAgICAgYmFsYW5jZXNbX2FkZHJdID0gYmFsYW5jZXNbX2FkZHJdLmFkZCh0b2tlbnMpOwogICAgICAgIFRyYW5zZmVyKEhVVDM0X1JFVEFJTiwgX2FkZHIsIHRva2Vucyk7CgogICAgICAgIC8vIFVwZGF0ZSBmdW5kcyByYWlzZWQKICAgICAgICBldGhlclJhaXNlZCA9IGV0aGVyUmFpc2VkLmFkZChtc2cudmFsdWUpOwoKICAgICAgICAvLyBVcGRhdGUgaG9sZGVyIHBheW1lbnRzCiAgICAgICAgZXRoZXJDb250cmlidXRlZFtfYWRkcl0gPSBldGhlckNvbnRyaWJ1dGVkW19hZGRyXS5hZGQobXNnLnZhbHVlKTsKCiAgICAgICAgLy8gQ2hlY2sgS1lDIHJlcXVpcmVtZW50CiAgICAgICAgaWYoZXRoZXJDb250cmlidXRlZFtfYWRkcl0gPj0gS1lDX1RIUkVTSE9MRCAmJiAhbXVzdEt5Y1tfYWRkcl0pIHsKICAgICAgICAgICAgbXVzdEt5Y1tfYWRkcl0gPSB0cnVlOwogICAgICAgICAgICBLeWMoX2FkZHIsIHRydWUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIE93bmVyIGNhbiBzd2VlcCBhIHN1Y2Nlc3NmdWwgZnVuZGluZyB0byB0aGUgZnVuZFdhbGxldC4KICAgIC8vIENhbiBiZSBjYWxsZWQgcmVwZWF0ZWRseSB0byByZWNvdmVyIGVycmFudCBldGhlciB3aGljaCBtYXkgaGF2ZSBiZWVuCiAgICAvLyBgc2VsZmRlc3RydWN0ZWRgIHRvIHRoZSBjb250cmFjdAogICAgLy8gQ29udHJhY3QgY2FuIGJlIGFib3J0ZWQgdXAgdW50aWwgdGhpcyByZXR1cm5zIGB0cnVlYAogICAgZnVuY3Rpb24gZmluYWxpemVJQ08oKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgICAgIHByZXZlbnRSZWVudHJ5KCkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIC8vIE11c3QgaGF2ZSByZWFjaGVkIG1pbmltdW0gY2FwCiAgICAgICAgcmVxdWlyZShmdW5kUmFpc2VkKCkpOwoKICAgICAgICAvLyBTZXQgZmlyc3QgdmVzdGluZyBkYXRlIChvbmx5IG9uY2UgYXMgdGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIGFnYWluKQogICAgICAgIGlmKCFpY29TdWNjZWVkZWQpIHsKICAgICAgICAgICAgbmV4dFJlbGVhc2VEYXRlID0gbm93ICsgVkVTVElOR19QRVJJT0Q7CiAgICAgICAgfQoKICAgICAgICAvLyBTZXQgc3VjY2VzcyBmbGFnOwogICAgICAgIGljb1N1Y2NlZWRlZCA9IHRydWU7CiAgICAgICAgCiAgICAgICAgLy8gVHJhbnNmZXIgJSBEZXZlbG9wZXIgY29tbWlzc2lvbgogICAgICAgIHVpbnQgZGV2Q29tbWlzc2lvbiA9IGNhbGNDb21taXNzaW9uKCk7CiAgICAgICAgV2l0aGRyYXdhbCh0aGlzLCBDT01NSVNTSU9OX1dBTExFVCwgZGV2Q29tbWlzc2lvbik7CiAgICAgICAgQ09NTUlTU0lPTl9XQUxMRVQudHJhbnNmZXIoZGV2Q29tbWlzc2lvbik7CgogICAgICAgIC8vIFJlbWFpbmluZyAlIHRvIHRoZSBmdW5kIHdhbGxldAogICAgICAgIFdpdGhkcmF3YWwodGhpcywgSFVUMzRfV0FMTEVULCB0aGlzLmJhbGFuY2UpOwogICAgICAgIEhVVDM0X1dBTExFVC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsZWFyS3ljKGFkZHJlc3NbXSBfYWRkcnMpCiAgICAgICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgb25seU93bmVyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICB1aW50IGxlbiA9IF9hZGRycy5sZW5ndGg7CiAgICAgICAgZm9yKHVpbnQgaTsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIGRlbGV0ZSBtdXN0S3ljW19hZGRyc1tpXV07CiAgICAgICAgICAgIEt5YyhfYWRkcnNbaV0sIGZhbHNlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gUmVsZWFzZXMgdmVzdGVkIHRva2VucyBiYWNrIHRvIEh1dDM0IHdhbGxldAogICAgZnVuY3Rpb24gcmVsZWFzZVZlc3RlZCgpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKG5vdyA+IG5leHRSZWxlYXNlRGF0ZSk7CiAgICAgICAgVmVzdGluZ1JlbGVhc2VkKG5leHRSZWxlYXNlRGF0ZSk7CiAgICAgICAgbmV4dFJlbGVhc2VEYXRlID0gbmV4dFJlbGVhc2VEYXRlLmFkZChWRVNUSU5HX1BFUklPRCk7CiAgICAgICAgcmV0dXJuIHhmZXIoSFVUMzRfVkVTVF9BRERSLCBIVVQzNF9SRVRBSU4sIFZFU1RFRF9UT0tFTlMgLyA0KTsKICAgIH0KCiAgICAvLyBEaXJlY3QgcmVmdW5kIHRvIGNhbGxlcgogICAgZnVuY3Rpb24gcmVmdW5kKCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIGFkZHJlc3NbXSBtZW1vcnkgYWRkcnMgPSBuZXcgYWRkcmVzc1tdKDEpOwogICAgICAgIGFkZHJzWzBdID0gbXNnLnNlbmRlcjsKICAgICAgICByZXR1cm4gcmVmdW5kRm9yKGFkZHJzKTsKICAgIH0KICAgIAogICAgLy8gQnVsayByZWZ1bmRzIGNhbiBiZSBwdXNoZWQgZnJvbSBhIGZhaWxlZCBJQ08KICAgIGZ1bmN0aW9uIHJlZnVuZEZvcihhZGRyZXNzW10gX2FkZHJzKQogICAgICAgIHB1YmxpYwogICAgICAgIHByZXZlbnRSZWVudHJ5KCkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoZnVuZEZhaWxlZCgpKTsKICAgICAgICB1aW50IGk7CiAgICAgICAgdWludCBsZW4gPSBfYWRkcnMubGVuZ3RoOwogICAgICAgIHVpbnQgdmFsdWU7CiAgICAgICAgdWludCB0b2tlbnM7CiAgICAgICAgYWRkcmVzcyBhZGRyOwogICAgICAgIAogICAgICAgIGZvciAoaTsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIGFkZHIgPSBfYWRkcnNbaV07CiAgICAgICAgICAgIHZhbHVlID0gZXRoZXJDb250cmlidXRlZFthZGRyXTsKICAgICAgICAgICAgdG9rZW5zID0gYmFsYW5jZXNbYWRkcl07CiAgICAgICAgICAgIGlmICh0b2tlbnMgPiAwKSB7ICAgIAogICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRva2VucwogICAgICAgICAgICAgICAgLy8gdHJhbnNmZXIgdG9rZW5zIGZyb20gZnVuZCB3YWxsZXQKICAgICAgICAgICAgICAgIGJhbGFuY2VzW0hVVDM0X1JFVEFJTl0gPSBiYWxhbmNlc1tIVVQzNF9SRVRBSU5dLmFkZCh0b2tlbnMpOwogICAgICAgICAgICAgICAgZGVsZXRlIGJhbGFuY2VzW2FkZHJdOwogICAgICAgICAgICAgICAgVHJhbnNmZXIoYWRkciwgSFVUMzRfUkVUQUlOLCB0b2tlbnMpOwogICAgICAgICAgICB9CiAgICAKICAgICAgICAgICAgaWYgKHZhbHVlID4gMCkgewogICAgICAgICAgICAgICAgLy8gUmVmdW5kIGV0aGVyIGNvbnRyaWJ1dGlvbgogICAgICAgICAgICAgICAgZGVsZXRlIGV0aGVyQ29udHJpYnV0ZWRbYWRkcl07CiAgICAgICAgICAgICAgICBkZWxldGUgbXVzdEt5Y1thZGRyXTsKICAgICAgICAgICAgICAgIHJlZnVuZGVkID0gcmVmdW5kZWQuYWRkKHZhbHVlKTsKICAgICAgICAgICAgICAgIFdpdGhkcmF3YWwodGhpcywgYWRkciwgdmFsdWUpOwogICAgICAgICAgICAgICAgYWRkci50cmFuc2Zlcih2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgovLwovLyBFUkMyMCBhZGRpdGlvbmFsIGFuZCBvdmVybG9hZGVkIGZ1bmN0aW9ucwovLwoKICAgIC8vIEFsbG93cyBhIHNlbmRlciB0byB0cmFuc2ZlciB0b2tlbnMgdG8gYW4gYXJyYXkgb2YgcmVjaXBpZW50cwogICAgZnVuY3Rpb24gdHJhbnNmZXJUb01hbnkoYWRkcmVzc1tdIF9hZGRycywgdWludFtdIF9hbW91bnRzKQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShfYWRkcnMubGVuZ3RoID09IF9hbW91bnRzLmxlbmd0aCk7CiAgICAgICAgdWludCBsZW4gPSBfYWRkcnMubGVuZ3RoOwogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgeGZlcihtc2cuc2VuZGVyLCBfYWRkcnNbaV0sIF9hbW91bnRzW2ldKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIE92ZXJsb2FkIHRvIGNoZWNrIElDTyBzdWNjZXNzIGFuZCBLWUMgZmxhZ3MuCiAgICBmdW5jdGlvbiB4ZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICBub1JlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoaWNvU3VjY2VlZGVkKTsKICAgICAgICByZXF1aXJlKCFtdXN0S3ljW19mcm9tXSk7CiAgICAgICAgc3VwZXIueGZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBPdmVybG9hZCB0byByZXF1aXJlIElDTyBzdWNjZXNzCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICBub1JlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIC8vIElDTyBtdXN0IGJlIHN1Y2Nlc3NmdWwKICAgICAgICByZXF1aXJlKGljb1N1Y2NlZWRlZCk7CiAgICAgICAgc3VwZXIuYXBwcm92ZShfc3BlbmRlciwgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgovLwovLyBDb250cmFjdCBtYW5hZ2VtZW50IGZ1bmN0aW9ucwovLwoKICAgIC8vIEluaXRpYXRlIGEgY2hhbmdlIG9mIG93bmVyIHRvIGBfb3duZXJgCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9vd25lcikKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIENoYW5nZU93bmVyVG8oX293bmVyKTsKICAgICAgICBuZXdPd25lciA9IF9vd25lcjsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gRmluYWxpc2UgY2hhbmdlIG9mIG93bmVyc2hpcCB0byBuZXdPd25lcgogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lcik7CiAgICAgICAgQ2hhbmdlZE93bmVyKG93bmVyLCBtc2cuc2VuZGVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIGRlbGV0ZSBuZXdPd25lcjsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBUaGlzIHdpbGwgc2VsZmRlc3RydWN0IHRoZSBjb250cmFjdCBvbiB0aGUgY29uZGl0dGlvbiBhbGwgaGF2ZSBiZWVuCiAgICAvLyBwcm9jZXNzZWQuCiAgICBmdW5jdGlvbiBkZXN0cm95KCkKICAgICAgICBwdWJsaWMKICAgICAgICBub1JlZW50cnkKICAgICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICByZXF1aXJlKCFfX2Fib3J0RnVzZSk7CiAgICAgICAgcmVxdWlyZShyZWZ1bmRlZCA9PSAoZXRoZXJSYWlzZWQgLSBQUkVTQUxFX0VUSF9SQUlTRSkpOwogICAgICAgIC8vIExvZyBidXJuZWQgdG9rZW5zIGZvciBjb21wbGV0ZSBsZWRnZXIgYWNjb3VudGluZyBvbiBhcmNoaXZhbCBub2RlcwogICAgICAgIFRyYW5zZmVyKEhVVDM0X1JFVEFJTiwgMHgwLCBiYWxhbmNlc1tIVVQzNF9SRVRBSU5dKTsKICAgICAgICBUcmFuc2ZlcihIVVQzNF9WRVNUX0FERFIsIDB4MCwgVkVTVEVEX1RPS0VOUyk7CiAgICAgICAgVHJhbnNmZXIoUFJFU09MRF9BRERSRVNTLCAweDAsIFBSRVNPTERfVE9LRU5TKTsKICAgICAgICAvLyBHYXJiYWdlIGNvbGxlY3QgbWFwcGVkIHN0YXRlCiAgICAgICAgZGVsZXRlIGJhbGFuY2VzW0hVVDM0X1JFVEFJTl07CiAgICAgICAgZGVsZXRlIGJhbGFuY2VzW1BSRVNPTERfQUREUkVTU107CiAgICAgICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICAgIH0KICAgIAogICAgLy8gT3duZXIgY2FuIHNhbHZhZ2UgRVJDMjAgdG9rZW5zIHRoYXQgbWF5IGhhdmUgYmVlbiBzZW50IHRvIHRoZSBhY2NvdW50CiAgICBmdW5jdGlvbiB0cmFuc2ZlckV4dGVybmFsVG9rZW4oYWRkcmVzcyBfa0FkZHIsIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICAgICAgcHJldmVudFJlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKSAKICAgIHsKICAgICAgICByZXF1aXJlKEVSQzIwVG9rZW4oX2tBZGRyKS50cmFuc2ZlcihfdG8sIF9hbW91bnQpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gQ2FsY3VsYXRlIGNvbW1pc3Npb24gb24gcHJlZnVuZGVkIGFuZCByYWlzZWQgZXRoZXIuCiAgICBmdW5jdGlvbiBjYWxjQ29tbWlzc2lvbigpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50KQogICAgewogICAgICAgIHVpbnQgY29tbWlzc2lvbiA9ICh0aGlzLmJhbGFuY2UgKyBQUkVTQUxFX0VUSF9SQUlTRSkgLyBDT01NSVNTSU9OX0RJVjsKICAgICAgICAvLyBFZGdlIGNhc2UgdGhhdCBwcmVmdW5kIGNhdXNlcyBjb21taXNzaW9uIHRvIGJlIGdyZWF0ZXIgdGhhbiBiYWxhbmNlCiAgICAgICAgcmV0dXJuIGNvbW1pc3Npb24gPD0gdGhpcy5iYWxhbmNlID8gY29tbWlzc2lvbiA6IHRoaXMuYmFsYW5jZTsKICAgIH0KfQ=='.
	

]
