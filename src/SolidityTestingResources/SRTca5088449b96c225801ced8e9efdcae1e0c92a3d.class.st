Class {
	#name : #SRTca5088449b96c225801ced8e9efdcae1e0c92a3d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTca5088449b96c225801ced8e9efdcae1e0c92a3d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMDsKCmNvbnRyYWN0IEV0aGVyVGFua3MgewogICAgCiAgICBzdHJ1Y3QgVGFua0h1bGwgewogICAgICAgIHVpbnQzMiBhcm1vcjsgLy8gSHVsbCdzIGFybW9yIHZhbHVlCiAgICAgICAgdWludDMyIHNwZWVkOyAvLyBIdWxsJ3Mgc3BlZWQgdmFsdWUKICAgICAgICB1aW50OCBsZWFndWU7IC8vIFRoZSBiYXR0bGUgbGVhZ3VlIHdoaWNoIGFsbG93cyB0byBwbGF5IHdpdGggdGhpcyBodWxsIHR5cGUKICAgIH0KICAgIAogICAgc3RydWN0IFRhbmtXZWFwb24gewogICAgICAgIHVpbnQzMiBtaW5EYW1hZ2U7IC8vIFdlYXBvbiBtaW5pbWFsIGRhbWFnZSB2YWx1ZQogICAgICAgIHVpbnQzMiBtYXhEYW1hZ2U7IC8vIFdlYXBvbiBtYXhpbXVtIGRhbWFnZSB2YWx1ZQogICAgICAgIHVpbnQzMiBhdHRhY2tTcGVlZDsgLy8gV2VhcG9uJ3MgYXR0YWNrIHNwZWVkIHZhbHVlCiAgICAgICAgdWludDggbGVhZ3VlOyAvLyBUaGUgYmF0dGxlIGxlYWd1ZSB3aGljaCBhbGxvd3MgdG8gcGxheSB3aXRoIHRoaXMgd2VhcG9uIHR5cGUKICAgIH0KICAgIAogICAgc3RydWN0IFRhbmtQcm9kdWN0IHsKICAgICAgICBzdHJpbmcgbmFtZTsgLy8gVGFuaydzIG5hbWUKICAgICAgICB1aW50MzIgaHVsbDsgLy8gSHVsbCdzIElECiAgICAgICAgdWludDMyIHdlYXBvbjsgLy8gV2VhcG9uJ3MgSUQKICAgICAgICAvLyBVbmZvcnR1bmF0ZWx5LCBpdCdzIGltcG9zaWJsZSB0byBkZWZpbmUgdGhlIHZhcmlhYmxlIGluc2lkZSB0aGUgc3RydWN0IGFzIGNvbnN0YW50LgogICAgICAgIC8vIEhvd2V2ZXIsIHlvdSBjYW4gcmVhZCB0aGlzIHNtYXJ0LWNvbnRyYWN0IGFuZCBzZWUgdGhhdCB0aGVyZSBhcmUgbm8gY2hhbmdlcyBhdCBhbGwgcmVsYXRlZCB0byB0aGUgc3RhcnQgcHJpY2VzLgogICAgICAgIHVpbnQyNTYgc3RhcnRQcmljZTsKICAgICAgICB1aW50MjU2IGN1cnJlbnRQcmljZTsgLy8gVGhlIGN1cnJlbnQgcHJpY2UuIENoYW5nZXMgZXZlcnkgdGltZSBzb21lb25lIGJ1eXMgdGhpcyBraW5kIG9mIHRhbmsKICAgICAgICB1aW50MjU2IGVhcm5pbmc7IC8vIFRoZSBhbW91bnQgb2YgZWFybmluZyBlYWNoIG93bmVyIG9mIHRoaXMgdGFuayBnZXRzIHdoZW4gc29tZW9uZSBidXlzIHRoaXMgdHlwZSBvZiB0YW5rCiAgICAgICAgdWludDI1NiByZWxlYXNlVGltZTsgLy8gVGhlIG1vbWVudCB3aGVuIGl0IHdpbGwgYmUgYWxsb3dlZCB0byBidXkgdGhpcyB0eXBlIG9mIHRhbmsKICAgIH0KICAgICAgICAKICAgIHN0cnVjdCBUYW5rRW50aXR5IHsKICAgICAgICB1aW50MzIgcHJvZHVjdElEOwogICAgICAgIHVpbnQ4WzRdIHVwZ3JhZGVzOwogICAgICAgIGFkZHJlc3Mgb3duZXI7IC8vIFRoZSBhZGRyZXNzIG9mIHRoZSBvd25lciBvZiB0aGlzIHRhbmsKICAgICAgICBhZGRyZXNzIGVhcm5lcjsgLy8gVGhlIGFkZHJlc3Mgb2YgdGhlIGVhcm5lciBvZiB0aGlzIHRhbmsgd2hvIGdldCBwYWlkCiAgICAgICAgYm9vbCBzZWxsaW5nOyAvLyBJcyB0aGlzIHRhbmsgb24gdGhlIGF1Y3Rpb24gbm93PwogICAgICAgIHVpbnQyNTYgYXVjdGlvbkVudGl0eTsgLy8gSWYgaXQncyBvbiB0aGUgYXVjdGlvbiwKICAgICAgICB1aW50MjU2IGVhcm5lZDsgLy8gVG90YWwgZnVuZHMgZWFybmVkIHdpdGggdGhpcyB0YW5rCiAgICAgICAgdWludDMyIGV4cDsgLy8gVGFuaydzIGV4cGVyaWVuY2UKICAgIH0KICAgIAoKICAgIHN0cnVjdCBBdWN0aW9uRW50aXR5IHsKICAgICAgICB1aW50MzIgdGFua0lkOwogICAgICAgIHVpbnQyNTYgc3RhcnRQcmljZTsKICAgICAgICB1aW50MjU2IGZpbmlzaFByaWNlOwogICAgICAgIHVpbnQyNTYgc3RhcnRUaW1lOwogICAgICAgIHVpbnQyNTYgZHVyYXRpb247CiAgICB9CiAgICAKICAgIGV2ZW50IEV2ZW50Q2FzaE91dCAoCiAgICAgICBhZGRyZXNzIGluZGV4ZWQgcGxheWVyLAogICAgICAgdWludDI1NiBhbW91bnQKICAgICAgICk7IC8vOy0pCiAgICAKICAgIGV2ZW50IEV2ZW50TG9naW4gKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIsCiAgICAgICAgc3RyaW5nIGhhc2gKICAgICAgICApOyAvLzstKQogICAgCiAgICBldmVudCBFdmVudFVwZ3JhZGVUYW5rICgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgcGxheWVyLAogICAgICAgIHVpbnQzMiB0YW5rSUQsCiAgICAgICAgdWludDggdXBncmFkZUNob2ljZQogICAgICAgICk7IC8vIDstKQogICAgCiAgICBldmVudCBFdmVudFRyYW5zZmVyICgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgcGxheWVyLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCByZWNlaXZlciwKICAgICAgICB1aW50MzIgdGFua0lECiAgICAgICAgKTsgLy8gOy0pCiAgICAgICAgCiAgICBldmVudCBFdmVudFRyYW5zZmVyQWN0aW9uICgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgcGxheWVyLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCByZWNlaXZlciwKICAgICAgICB1aW50MzIgdGFua0lELAogICAgICAgIHVpbnQ4IEFjdGlvblR5cGUKICAgICAgICApOyAvLyA7LSkKICAgICAgICAKICAgIGV2ZW50IEV2ZW50QXVjdGlvbiAoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHBsYXllciwKICAgICAgICB1aW50MzIgdGFua0lELAogICAgICAgIHVpbnQyNTYgc3RhcnRQcmljZSwKICAgICAgICB1aW50MjU2IGZpbmlzaFByaWNlLAogICAgICAgIHVpbnQyNTYgZHVyYXRpb24sCiAgICAgICAgdWludDI1NiBjdXJyZW50VGltZQogICAgICAgICk7IC8vIDstKQogICAgZXZlbnQgRXZlbnRDYW5jZWxBdWN0aW9uICgKICAgICAgICB1aW50MzIgdGFua0lECiAgICAgICAgKTsgLy8gOy0pCiAgICAKICAgIGV2ZW50IEV2ZW50QmlkICgKICAgICAgICB1aW50MzIgdGFua0lEICAKICAgICAgICApOyAvLyA7LSkKICAgIAogICAgZXZlbnQgRXZlbnRQcm9kdWN0ICgKICAgICAgICB1aW50MzIgcHJvZHVjdElELAogICAgICAgIHN0cmluZyBuYW1lLAogICAgICAgIHVpbnQzMiBodWxsLAogICAgICAgIHVpbnQzMiB3ZWFwb24sCiAgICAgICAgdWludDI1NiBwcmljZSwKICAgICAgICB1aW50MjU2IGVhcm5pbmcsCiAgICAgICAgdWludDI1NiByZWxlYXNlVGltZSwKICAgICAgICB1aW50MjU2IGN1cnJlbnRUaW1lCiAgICAgICAgKTsgLy8gOy0pCiAgICAgICAgCiAgICBldmVudCBFdmVudEJ1eVRhbmsgKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIsCiAgICAgICAgdWludDMyIHByb2R1Y3RJRCwKICAgICAgICB1aW50MzIgdGFua0lECiAgICAgICAgKTsgLy8gOy0pCgogICAgCiAgICBhZGRyZXNzIHB1YmxpYyBVcGdyYWRlTWFzdGVyOyAvLyBFYXJucyBmZWVzIGZvciB1cGdyYWRpbmcgdGFua3MgKDAuMDUgRXRoKQogICAgYWRkcmVzcyBwdWJsaWMgQXVjdGlvbk1hc3RlcjsgLy8gRWFybnMgZmVlcyBmb3IgcHJvZHVjaW5nIGF1Y3Rpb25zICgzJSkKICAgIGFkZHJlc3MgcHVibGljIFRhbmtTZWxsTWFzdGVyOyAvLyBFYXJucyBmZWVzIGZvciBzZWxsaW5nIHRhbmtzIChzdGFydCBwcmljZSkKICAgIC8vIE5vIG1vZGlmaWVycyB3ZXJlIG5lZWRlZCwgYmVjYXVzZSBlYWNoIGFjY2VzcyBpcyBjaGVja2VkIG5vIG1vcmUgdGhhbiBvbmUgdGltZSBpbiB0aGUgd2hvbGUgY29kZSwKICAgIC8vIFNvIGNhbGxpbmcgInJlcXVpcmUobXNnLnNlbmRlciA9PSBVcGdyYWRlTWFzdGVyKTsiIGlzIGVub3VnaC4KICAgIAogICAgZnVuY3Rpb24gQ2hhbmdlVXBncmFkZU1hc3RlciAoYWRkcmVzcyBfbmV3TWFzdGVyKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBVcGdyYWRlTWFzdGVyKTsKICAgICAgICBVcGdyYWRlTWFzdGVyID0gX25ld01hc3RlcjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gQ2hhbmdlVGFua1NlbGxNYXN0ZXIgKGFkZHJlc3MgX25ld01hc3RlcikgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gVGFua1NlbGxNYXN0ZXIpOwogICAgICAgIFRhbmtTZWxsTWFzdGVyID0gX25ld01hc3RlcjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gQ2hhbmdlQXVjdGlvbk1hc3RlciAoYWRkcmVzcyBfbmV3TWFzdGVyKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBBdWN0aW9uTWFzdGVyKTsKICAgICAgICBBdWN0aW9uTWFzdGVyID0gX25ld01hc3RlcjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gRXRoZXJUYW5rcygpIHB1YmxpYyB7CiAgICAgICAgCiAgICAgICAgVXBncmFkZU1hc3RlciA9IG1zZy5zZW5kZXI7CiAgICAgICAgQXVjdGlvbk1hc3RlciA9IG1zZy5zZW5kZXI7CiAgICAgICAgVGFua1NlbGxNYXN0ZXIgPSBtc2cuc2VuZGVyOwoKICAgICAgICAvLyBDcmVhdGluZyAxMSBodWxscwogICAgICAgIG5ld1RhbmtIdWxsKDEwMCwgNSwgMSk7CiAgICAgICAgbmV3VGFua0h1bGwoNjAsIDYsIDIpOwogICAgICAgIG5ld1RhbmtIdWxsKDE0MCwgNCwgMSk7CiAgICAgICAgbmV3VGFua0h1bGwoMjAwLCAzLCAxKTsKICAgICAgICBuZXdUYW5rSHVsbCgyNDAsIDMsIDEpOwogICAgICAgIG5ld1RhbmtIdWxsKDIwMCwgNiwgMik7CiAgICAgICAgbmV3VGFua0h1bGwoMzYwLCA0LCAyKTsKICAgICAgICBuZXdUYW5rSHVsbCgxODAsIDksIDMpOwogICAgICAgIG5ld1RhbmtIdWxsKDI0MCwgOCwgMyk7CiAgICAgICAgbmV3VGFua0h1bGwoNTAwLCA0LCAyKTsKICAgICAgICBuZXdUYW5rSHVsbCg0NDAsIDYsIDMpOwogICAgICAgIAogICAgICAgIC8vIENyZWF0aW5nIDExIHdlYXBvbnMKICAgICAgICBuZXdUYW5rV2VhcG9uKDYsIDE0LCA1LCAxKTsKICAgICAgICBuZXdUYW5rV2VhcG9uKDE4LCAyNiwgMywgMik7CiAgICAgICAgbmV3VGFua1dlYXBvbig0NCwgNjYsIDIsIDEpOwogICAgICAgIG5ld1RhbmtXZWFwb24oMjEsIDQ5LCAzLCAxKTsKICAgICAgICBuZXdUYW5rV2VhcG9uKDYwLCA5MCwgMiwgMik7CiAgICAgICAgbmV3VGFua1dlYXBvbigyMSwgNDksIDIsIDIpOwogICAgICAgIG5ld1RhbmtXZWFwb24oNDgsIDcyLCAzLCAyKTsKICAgICAgICBuZXdUYW5rV2VhcG9uKDEzLCAyOSwgOSwgMyk7CiAgICAgICAgbmV3VGFua1dlYXBvbigzNiwgODQsIDQsIDMpOwogICAgICAgIG5ld1RhbmtXZWFwb24oMTIwLCAxODAsIDIsIDMpOwogICAgICAgIG5ld1RhbmtXZWFwb24oNzIsIDEwOCwgNCwgMyk7CiAgICAgICAgCiAgICAgICAgLy8gQ3JlYXRpbmcgZmlyc3QgMTEgdGFuayB0eXBlcwogICAgICAgIG5ld1RhbmtQcm9kdWN0KCJMVC0xIiwgMSwgMSwgMTAwMDAwMDAwMDAwMDAwMDAsIDEwMDAwMDAwMDAwMDAwMCwgbm93KTsKICAgICAgICBuZXdUYW5rUHJvZHVjdCgiTFQtMiIsIDIsIDIsIDUwMDAwMDAwMDAwMDAwMDAwLCA1MDAwMDAwMDAwMDAwMDAsIG5vdyk7CiAgICAgICAgbmV3VGFua1Byb2R1Y3QoIk1ULTEiLCAzLCAzLCAxMDAwMDAwMDAwMDAwMDAwMDAsIDEwMDAwMDAwMDAwMDAwMDAsIG5vdyk7CiAgICAgICAgbmV3VGFua1Byb2R1Y3QoIkhULTEiLCA0LCA0LCA1MDAwMDAwMDAwMDAwMDAwMDAsIDUwMDAwMDAwMDAwMDAwMDAsIG5vdyk7CiAgICAgICAgbmV3VGFua1Byb2R1Y3QoIlNQRy0xIiwgNSwgNSwgNTAwMDAwMDAwMDAwMDAwMDAwLCA1MDAwMDAwMDAwMDAwMDAwLCBub3cpOwogICAgICAgIG5ld1RhbmtQcm9kdWN0KCJNVC0yIiwgNiwgNiwgNzAwMDAwMDAwMDAwMDAwMDAwLCA3MDAwMDAwMDAwMDAwMDAwLCBub3crKDYwKjYwKjIpKTsKICAgICAgICBuZXdUYW5rUHJvZHVjdCgiSFQtMiIsIDcsIDcsIDE1MDAwMDAwMDAwMDAwMDAwMDAsIDE1MDAwMDAwMDAwMDAwMDAwLCBub3crKDYwKjYwKjUpKTsKICAgICAgICBuZXdUYW5rUHJvZHVjdCgiTFQtMyIsIDgsIDgsIDMwMDAwMDAwMDAwMDAwMDAwMCwgMzAwMDAwMDAwMDAwMDAwMCwgbm93Kyg2MCo2MCo4KSk7CiAgICAgICAgbmV3VGFua1Byb2R1Y3QoIk1ULTMiLCA5LCA5LCAxNTAwMDAwMDAwMDAwMDAwMDAwLCAxNTAwMDAwMDAwMDAwMDAwMCwgbm93Kyg2MCo2MCoyNCkpOwogICAgICAgIG5ld1RhbmtQcm9kdWN0KCJTUEctMiIsIDEwLCAxMCwgMjAwMDAwMDAwMDAwMDAwMDAwMCwgMjAwMDAwMDAwMDAwMDAwMDAsIG5vdysoNjAqNjAqMjQqMikpOwogICAgICAgIG5ld1RhbmtQcm9kdWN0KCJIVC0zIiwgMTEsIDExLCAyNTAwMDAwMDAwMDAwMDAwMDAwLCAyNTAwMDAwMDAwMDAwMDAwMCwgbm93Kyg2MCo2MCoyNCozKSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNhc2hPdXQgKHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUgKF9hbW91bnQgPj0gMCk7IC8vanVzdCBpbiBjYXNlCiAgICAgICAgcmVxdWlyZSAoX2Ftb3VudCA9PSB1aW50MjU2KHVpbnQxMjgoX2Ftb3VudCkpKTsgLy8gSnVzdCBzb21lIG1hZ2ljIHN0dWZmCiAgICAgICAgcmVxdWlyZSAodGhpcy5iYWxhbmNlID49IF9hbW91bnQpOyAvLyBDaGVja2luZyBpZiB0aGlzIGNvbnRyYWN0IGhhcyBlbm91Z2h0IG1vbmV5IHRvIHBheQogICAgICAgIHJlcXVpcmUgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQpOyAvLyBDaGVja2luZyBpZiBwbGF5ZXIgaGFzIGVub3VnaCBmdW5kcyBvbiBoaXMgYmFsYW5jZQogICAgICAgIGlmIChfYW1vdW50ID09IDApewogICAgICAgICAgICBfYW1vdW50ID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0ZWQgYW1vdW50IGlzIDAsIGl0IG1lYW5zIHRoYXQgcGxheWVyIHdhbnRzIHRvIGNhc2hvdXQgdGhlIHdob2xlIGFtb3VudCBvZiBiYWxhbmNlCiAgICAgICAgfQogICAgICAgIGlmIChtc2cuc2VuZGVyLnNlbmQoX2Ftb3VudCkpeyAvLyBTZW5kaW5nIGZ1bmRzIGFuZCBpZiB0aGUgdHJhbnNhY3Rpb24gaXMgc3VjY2Vzc2Z1bAogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfYW1vdW50OyAvLyBDaGFuZ2luZyB0aGUgYW1vdW50IG9mIGZ1bmRzIG9uIHRoZSBwbGF5ZXIncyBpbi1nYW1lIGJhbGFuY2UKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgRXZlbnRDYXNoT3V0IChtc2cuc2VuZGVyLCBfYW1vdW50KTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGxvZ2luIChzdHJpbmcgX2hhc2gpIHB1YmxpYyB7CiAgICAgICAgRXZlbnRMb2dpbiAobXNnLnNlbmRlciwgX2hhc2gpOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgLy91cGdyYWRlIHRhbmsKICAgIC8vIEBfdXBncmFkZUNob2ljZTogMCBpcyBmb3IgYXJtb3IsIDEgaXMgZm9yIGRhbWFnZSwgMiBpcyBmb3Igc3BlZWQsIDMgaXMgZm9yIGF0dGFjayBzcGVlZAogICAgZnVuY3Rpb24gdXBncmFkZVRhbmsgKHVpbnQzMiBfdGFua0lELCB1aW50OCBfdXBncmFkZUNob2ljZSkgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUgKF90YW5rSUQgPiAwICYmIF90YW5rSUQgPCBuZXdJZFRhbmspOyAvLyBDaGVja2luZyBpZiB0aGUgdGFuayBleGlzdHMKICAgICAgICByZXF1aXJlICh0YW5rc1tfdGFua0lEXS5vd25lciA9PSBtc2cuc2VuZGVyKTsgLy8gQ2hlY2tpbmcgaWYgc2VuZGVyIG93bnMgdGhpcyB0YW5rCiAgICAgICAgcmVxdWlyZSAoX3VwZ3JhZGVDaG9pY2UgPj0gMCAmJiBfdXBncmFkZUNob2ljZSA8IDQpOyAvLyBIYXMgdG8gYmUgYmV0d2VlbiAwIGFuZCAzCiAgICAgICAgcmVxdWlyZSAodGFua3NbX3RhbmtJRF0udXBncmFkZXNbX3VwZ3JhZGVDaG9pY2VdIDwgNSk7IC8vIE9ubHkgNSB1cGdyYWRlcyBhcmUgYWxsb3dlZCBmb3IgZWFjaCB0eXBlIG9mIHRhbmsncyBwYXJhbWV0cmVzCiAgICAgICAgcmVxdWlyZSAobXNnLnZhbHVlID49IHVwZ3JhZGVQcmljZSk7IC8vIENoZWNraW5nIGlmIHRoZXJlIGlzIGVub3VnaCBhbW91bnQgb2YgbW9uZXkgZm9yIHRoZSB1cGdyYWRlCiAgICAgICAgdGFua3NbX3RhbmtJRF0udXBncmFkZXNbX3VwZ3JhZGVDaG9pY2VdKys7IC8vIFVwZ3JhZGluZwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IG1zZy52YWx1ZS11cGdyYWRlUHJpY2U7IC8vIFJldHVybmluZyB0aGUgcmVzdCBhbW91bnQgb2YgbW9uZXkgYmFjayB0byB0aGUgdGFuayBvd25lcgogICAgICAgIGJhbGFuY2VzW1VwZ3JhZGVNYXN0ZXJdICs9IHVwZ3JhZGVQcmljZTsgLy8gU2VuZGluZyB0aGUgYW1vdW50IG9mIG1vbmV5IHNwZW50IG9uIHRoZSB1cGdyYWRlIHRvIHRoZSBjb250cmFjdCBjcmVhdG9yCiAgICAgICAgCiAgICAgICAgRXZlbnRVcGdyYWRlVGFuayAobXNnLnNlbmRlciwgX3RhbmtJRCwgX3VwZ3JhZGVDaG9pY2UpOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgCiAgICAvLyBUcmFuc2Zlci4gVXNpbmcgZm9yIHNlbmRpbmcgdGFua3MgdG8gYW5vdGhlciBwbGF5ZXJzCiAgICBmdW5jdGlvbiBfdHJhbnNmZXIgKHVpbnQzMiBfdGFua0lELCBhZGRyZXNzIF9yZWNlaXZlcikgcHVibGljIHsKICAgICAgICByZXF1aXJlIChfdGFua0lEID4gMCAmJiBfdGFua0lEIDwgbmV3SWRUYW5rKTsgLy8gQ2hlY2tpbmcgaWYgdGhlIHRhbmsgZXhpc3RzCiAgICAgICAgcmVxdWlyZSAodGFua3NbX3RhbmtJRF0ub3duZXIgPT0gbXNnLnNlbmRlcik7IC8vQ2hlY2tpbmcgaWYgc2VuZGVyIG93bnMgdGhpcyB0YW5rCiAgICAgICAgcmVxdWlyZSAobXNnLnNlbmRlciAhPSBfcmVjZWl2ZXIpOyAvLyBDaGVja2luZyB0aGF0IHRoZSBvd25lciBpcyBub3Qgc2VuZGluZyB0aGUgdGFuayB0byBoaW1zZWxmCiAgICAgICAgcmVxdWlyZSAodGFua3NbX3RhbmtJRF0uc2VsbGluZyA9PSBmYWxzZSk7IC8vTWFraW5nIHN1cmUgdGhhdCB0aGUgdGFuayBpcyBub3Qgb24gdGhlIGF1Y3Rpb24gbm93CiAgICAgICAgdGFua3NbX3RhbmtJRF0ub3duZXIgPSBfcmVjZWl2ZXI7IC8vIENoYW5naW5nIHRoZSB0YW5rJ3Mgb3duZXIKICAgICAgICB0YW5rc1tfdGFua0lEXS5lYXJuZXIgPSBfcmVjZWl2ZXI7IC8vIENoYW5naW5nIHRoZSB0YW5rJ3MgZWFybmVyIGFkZHJlc3MKCiAgICAgICAgRXZlbnRUcmFuc2ZlciAobXNnLnNlbmRlciwgX3JlY2VpdmVyLCBfdGFua0lEKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIC8vIFRyYW5zZmVyIEFjdGlvbi4gVXNpbmcgZm9yIHNlbmRpbmcgdGFua3MgdG8gRXRoZXJUYW5rcycgY29udHJhY3RzLiBGb3IgZXhhbXBsZSwgdGhlIGJhdHRsZS1hcmVhIGNvbnRyYWN0LgogICAgZnVuY3Rpb24gX3RyYW5zZmVyQWN0aW9uICh1aW50MzIgX3RhbmtJRCwgYWRkcmVzcyBfcmVjZWl2ZXIsIHVpbnQ4IF9BY3Rpb25UeXBlKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKF90YW5rSUQgPiAwICYmIF90YW5rSUQgPCBuZXdJZFRhbmspOyAvLyBDaGVja2luZyBpZiB0aGUgdGFuayBleGlzdHMKICAgICAgICByZXF1aXJlICh0YW5rc1tfdGFua0lEXS5vd25lciA9PSBtc2cuc2VuZGVyKTsgLy8gQ2hlY2tpbmcgaWYgc2VuZGVyIG93bnMgdGhpcyB0YW5rCiAgICAgICAgcmVxdWlyZSAobXNnLnNlbmRlciAhPSBfcmVjZWl2ZXIpOyAvLyBDaGVja2luZyB0aGF0IHRoZSBvd25lciBpcyBub3Qgc2VuZGluZyB0aGUgdGFuayB0byBoaW1zZWxmCiAgICAgICAgcmVxdWlyZSAodGFua3NbX3RhbmtJRF0uc2VsbGluZyA9PSBmYWxzZSk7IC8vIE1ha2luZyBzdXJlIHRoYXQgdGhlIHRhbmsgaXMgbm90IG9uIHRoZSBhdWN0aW9uIG5vdwogICAgICAgIHRhbmtzW190YW5rSURdLm93bmVyID0gX3JlY2VpdmVyOyAvLyBDaGFuZ2luZyB0aGUgdGFuaydzIG93bmVyCiAgICAgICAgCiAgICAgICAgLy8gQXMgeW91IGNhbiBzZWUsIHdlIGRvIG5vdCBjaGFuZ2UgdGhlIGVhcm5lciBoZXJlLgogICAgICAgIC8vIEl0IG1lYW5zIHRoYXQgdGVjaG5pY2FsbHkgc3BlYWtpbmcsIHRoZSB0YW5rJ3Mgb3duZXIgaXMgc3RpbGwgZ2V0dGluZyBoaXMgZWFybmluZ3MuCiAgICAgICAgLy8gSXQncyBsb2dpY2FsbHkgdGhhdCB0aGlzIG1ldGhvZCAodHJhbnNmZXJBY3Rpb24pIHdpbGwgYmUgdXNlZCBmb3Igc2VuZGluZyB0YW5rcyB0byB0aGUgYmF0dGxlIGFyZWEgY29udHJhY3Qgb3Igc29tZSBvdGhlciBjb250cmFjdHMgd2hpY2ggd2lsbCBiZSBpbnRlcmFjdGluZyB3aXRoIHRhbmtzCiAgICAgICAgLy8gQmUgY2FyZWZ1bCB3aXRoIHRoaXMgbWV0aG9kISBEbyBub3QgY2FsbCBpdCB0byB0cmFuc2ZlciB0YW5rcyB0byBhbm90aGVyIHBsYXllciEKICAgICAgICAvLyBUaGUgcmVhc29uIHlvdSBzaG91bGQgbm90IGRvIHRoaXMgaXMgdGhhdCB0aGUgbWV0aG9kIGNhbGxlZCAidHJhbnNmZXIiIGNoYW5nZXMgdGhlIG93bmVyIGFuZCBlYXJuZXIsIHNvIGl0IGlzIHBvc3NpYmxlIHRvIGNoYW5nZSB0aGUgZWFybmVyIGFkZHJlc3MgdG8gdGhlIGN1cnJlbnQgb3duZXIgYWRkcmVzcyBhbnkgdGltZS4KICAgICAgICAvLyBIb3dldmVyLCBmb3Igb3VyIHNwZWNpYWwgY29udHJhY3RzIGxpa2UgYmF0dGxlIGFyZWEsIHlvdSBhcmUgYWJsZSB0byByZWFkIHRoaXMgY29udHJhY3QgYW5kIG1ha2Ugc3VyZSB0aGF0IHlvdXIgdGFuayB3aWxsIG5vdCBiZSBzZW50IHRvIGFueW9uZSBlbHNlLCBvbmx5IGJhY2sgdG8geW91LgogICAgICAgIC8vIFNvLCBwbGVhc2UsIGRvIG5vdCB1c2UgdGhpcyBtZXRob2QgdG8gc2VuZCB5b3VyIHRhbmtzIHRvIG90aGVyIHBsYXllcnMuIFVzZSBpdCBqdXN0IGZvciBpbnRlcmFjdGluZyB3aXRoIEV0aGVyVGFua3MnIGNvbnRyYWN0cywgd2hpY2ggd2lsbCBiZSBsaXN0ZWQgb24gRXRoZXJUYW5rcy5jb20KICAgICAgICAKICAgICAgICBFdmVudFRyYW5zZmVyQWN0aW9uIChtc2cuc2VuZGVyLCBfcmVjZWl2ZXIsIF90YW5rSUQsIF9BY3Rpb25UeXBlKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIC8vc2VsbGluZwogICAgZnVuY3Rpb24gc2VsbFRhbmsgKHVpbnQzMiBfdGFua0lELCB1aW50MjU2IF9zdGFydFByaWNlLCB1aW50MjU2IF9maW5pc2hQcmljZSwgdWludDI1NiBfZHVyYXRpb24pIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSAoX3RhbmtJRCA+IDAgJiYgX3RhbmtJRCA8IG5ld0lkVGFuayk7CiAgICAgICAgcmVxdWlyZSAodGFua3NbX3RhbmtJRF0ub3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZSAodGFua3NbX3RhbmtJRF0uc2VsbGluZyA9PSBmYWxzZSk7IC8vIE1ha2luZyBzdXJlIHRoYXQgdGhlIHRhbmsgaXMgbm90IG9uIHRoZSBhdWN0aW9uIGFscmVhZHkKICAgICAgICByZXF1aXJlIChfc3RhcnRQcmljZSA+PSBfZmluaXNoUHJpY2UpOwogICAgICAgIHJlcXVpcmUgKF9zdGFydFByaWNlID4gMCAmJiBfZmluaXNoUHJpY2UgPj0gMCk7CiAgICAgICAgcmVxdWlyZSAoX2R1cmF0aW9uID4gMCk7CiAgICAgICAgcmVxdWlyZSAoX3N0YXJ0UHJpY2UgPT0gdWludDI1Nih1aW50MTI4KF9zdGFydFByaWNlKSkpOyAvLyBKdXN0IHNvbWUgbWFnaWMgc3R1ZmYKICAgICAgICByZXF1aXJlIChfZmluaXNoUHJpY2UgPT0gdWludDI1Nih1aW50MTI4KF9maW5pc2hQcmljZSkpKTsgLy8gSnVzdCBzb21lIG1hZ2ljIHN0dWZmCiAgICAgICAgCiAgICAgICAgYXVjdGlvbnNbbmV3SWRBdWN0aW9uRW50aXR5XSA9IEF1Y3Rpb25FbnRpdHkoX3RhbmtJRCwgX3N0YXJ0UHJpY2UsIF9maW5pc2hQcmljZSwgbm93LCBfZHVyYXRpb24pOwogICAgICAgIHRhbmtzW190YW5rSURdLnNlbGxpbmcgPSB0cnVlOwogICAgICAgIHRhbmtzW190YW5rSURdLmF1Y3Rpb25FbnRpdHkgPSBuZXdJZEF1Y3Rpb25FbnRpdHkrKzsKICAgICAgICAKICAgICAgICBFdmVudEF1Y3Rpb24gKG1zZy5zZW5kZXIsIF90YW5rSUQsIF9zdGFydFByaWNlLCBfZmluaXNoUHJpY2UsIF9kdXJhdGlvbiwgbm93KTsKICAgIH0KICAgIAogICAgLy9iaWRkaW5nIGZ1bmN0aW9uLCBwZW9wbGUgdXNlIHRoaXMgdG8gYnV5IHRhbmtzCiAgICBmdW5jdGlvbiBiaWQgKHVpbnQzMiBfdGFua0lEKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSAoX3RhbmtJRCA+IDAgJiYgX3RhbmtJRCA8IG5ld0lkVGFuayk7IC8vIENoZWNraW5nIGlmIHRoZSB0YW5rIGV4aXN0cwogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLnNlbGxpbmcgPT0gdHJ1ZSk7IC8vIENoZWNraW5nIGlmIHRoaXMgdGFua3MgaXMgb24gdGhlIGF1Y3Rpb24gbm93CiAgICAgICAgQXVjdGlvbkVudGl0eSBtZW1vcnkgY3VycmVudEF1Y3Rpb24gPSBhdWN0aW9uc1t0YW5rc1tfdGFua0lEXS5hdWN0aW9uRW50aXR5XTsgLy8gVGhlIGF1Y3Rpb24gZW50aXR5IGZvciB0aGlzIHRhbmsuIEp1c3QgdG8gbWFrZSB0aGUgbGluZSBiZWxvdyBlYXNpZXIgdG8gcmVhZAogICAgICAgIHVpbnQyNTYgY3VycmVudFByaWNlID0gY3VycmVudEF1Y3Rpb24uc3RhcnRQcmljZS0oKChjdXJyZW50QXVjdGlvbi5zdGFydFByaWNlLWN1cnJlbnRBdWN0aW9uLmZpbmlzaFByaWNlKS8oY3VycmVudEF1Y3Rpb24uZHVyYXRpb24pKSoobm93LWN1cnJlbnRBdWN0aW9uLnN0YXJ0VGltZSkpOwogICAgICAgIC8vIFRoZSBsaW5lIGFib3ZlIGNhbGN1bGF0ZXMgdGhlIGN1cnJlbnQgcHJpY2UgdXNpbmcgdGhlIGZvcm11bGEgU3RhcnRQcmljZS0oKChTdGFydFByaWNlLUZpbmlzaFByaWNlKS9EdXJhdGlvbikqKEN1cnJlbnRUaW1lLVN0YXJ0VGltZSkKICAgICAgICBpZiAoY3VycmVudFByaWNlIDwgY3VycmVudEF1Y3Rpb24uZmluaXNoUHJpY2UpeyAvLyBJZiB0aGUgYXVjdGlvbiBkdXJhdGlvbiB0aW1lIGhhcyBiZWVuIGV4cGlyZWQKICAgICAgICAgICAgY3VycmVudFByaWNlID0gY3VycmVudEF1Y3Rpb24uZmluaXNoUHJpY2U7ICAvLyBTZXR0aW5nIHRoZSBjdXJyZW50IHByaWNlIGFzIGZpbmlzaFByaWNlIAogICAgICAgIH0KICAgICAgICByZXF1aXJlIChjdXJyZW50UHJpY2UgPj0gMCk7IC8vIFdobyBrbm93cyA6KQogICAgICAgIHJlcXVpcmUgKG1zZy52YWx1ZSA+PSBjdXJyZW50UHJpY2UpOyAvLyBDaGVja2luZyBpZiB0aGUgYnV5ZXIgc2VudCB0aGUgYW1vdW50IG9mIG1vbmV5IHdoaWNoIGlzIG1vcmUgb3IgZXF1YWwgdGhlIGN1cnJlbnQgcHJpY2UKICAgICAgICAKICAgICAgICAvLyBBbGwgaXMgZmluZSwgY2hhbmdpbmcgYmFsYW5jZXMgYW5kIGNoYW5naW5nIHRhbmsncyBvd25lcgogICAgICAgIHVpbnQyNTYgbWFya2V0RmVlID0gKGN1cnJlbnRQcmljZS8xMDApKjM7IC8vIENhbGN1bGF0aW5nIDMlIG9mIHRoZSBjdXJyZW50IHByaWNlIGFzIGEgZmVlCiAgICAgICAgYmFsYW5jZXNbdGFua3NbX3RhbmtJRF0ub3duZXJdICs9IGN1cnJlbnRQcmljZS1tYXJrZXRGZWU7IC8vIEdpdmluZyBbY3VycmVudCBwcmljZV0tW2ZlZV0gYW1vdW50IHRvIHNlbGxlcgogICAgICAgIGJhbGFuY2VzW0F1Y3Rpb25NYXN0ZXJdICs9IG1hcmtldEZlZTsgLy8gU2VuZGluZyB0aGUgZmVlIGFtb3VudCB0byB0aGUgY29udHJhY3QgY3JlYXRvcidzIGJhbGFuY2UKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBtc2cudmFsdWUtY3VycmVudFByaWNlOyAvL1JldHVybiB0aGUgcmVzdCBhbW91bnQgdG8gYnV5ZXIKICAgICAgICB0YW5rc1tfdGFua0lEXS5vd25lciA9IG1zZy5zZW5kZXI7IC8vIENoYW5naW5nIHRoZSBvd25lciBvZiB0aGUgdGFuawogICAgICAgIHRhbmtzW190YW5rSURdLnNlbGxpbmcgPSBmYWxzZTsgLy8gQ2hhbmdlIHRoZSB0YW5rIHN0YXR1cyB0byAibm90IHNlbGxpbmcgbm93IgogICAgICAgIGRlbGV0ZSBhdWN0aW9uc1t0YW5rc1tfdGFua0lEXS5hdWN0aW9uRW50aXR5XTsgLy8gRGVsZXRpbmcgdGhlIGF1Y3Rpb24gZW50aXR5IGZyb20gdGhlIHN0b3JhZ2UgZm9yIGF1Y3Rpb25zIC0tIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZQogICAgICAgIHRhbmtzW190YW5rSURdLmF1Y3Rpb25FbnRpdHkgPSAwOyAvLyBOb3QgbmVjZXNzYXJ5LCBidXQgZGVsZXRpbmcgdGhlIElEIG9mIGF1Y3Rpb24gZW50aXR5IHdoaWNoIHdhcyBkZWxldGVkIGluIHRoZSBvcGVyYXRpb24gYWJvdmUKICAgICAgICAKICAgICAgICBFdmVudEJpZCAoX3RhbmtJRCk7CiAgICB9CiAgICAKICAgIC8vY2FuY2VsIGF1Y3Rpb24KICAgIGZ1bmN0aW9uIGNhbmNlbEF1Y3Rpb24gKHVpbnQzMiBfdGFua0lEKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKF90YW5rSUQgPiAwICYmIF90YW5rSUQgPCBuZXdJZFRhbmspOyAvLyBDaGVja2luZyBpZiB0aGUgdGFuayBleGlzdHMKICAgICAgICByZXF1aXJlICh0YW5rc1tfdGFua0lEXS5zZWxsaW5nID09IHRydWUpOyAvLyBDaGVja2luZyBpZiB0aGlzIHRhbmtzIGlzIG9uIHRoZSBhdWN0aW9uIG5vdwogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLm93bmVyID09IG1zZy5zZW5kZXIpOyAvLyBDaGVja2luZyBpZiBzZW5kZXIgb3ducyB0aGlzIHRhbmsKICAgICAgICB0YW5rc1tfdGFua0lEXS5zZWxsaW5nID0gZmFsc2U7IC8vIENoYW5nZSB0aGUgdGFuayBzdGF0dXMgdG8gIm5vdCBzZWxsaW5nIG5vdyIKICAgICAgICBkZWxldGUgYXVjdGlvbnNbdGFua3NbX3RhbmtJRF0uYXVjdGlvbkVudGl0eV07IC8vIERlbGV0aW5nIHRoZSBhdWN0aW9uIGVudGl0eSBmcm9tIHRoZSBzdG9yYWdlIGZvciBhdWN0aW9ucyAtLSB3ZSBkb24ndCBuZWVkIGl0IGFueW1vcmUKICAgICAgICB0YW5rc1tfdGFua0lEXS5hdWN0aW9uRW50aXR5ID0gMDsgLy8gTm90IG5lY2Vzc2FyeSwgYnV0IGRlbGV0aW5nIHRoZSBJRCBvZiBhdWN0aW9uIGVudGl0eSB3aGljaCB3YXMgZGVsZXRlZCBpbiB0aGUgb3BlcmF0aW9uIGFib3ZlCiAgICAgICAgCiAgICAgICAgRXZlbnRDYW5jZWxBdWN0aW9uIChfdGFua0lEKTsKICAgIH0KICAgIAogICAgCiAgICBmdW5jdGlvbiBuZXdUYW5rUHJvZHVjdCAoc3RyaW5nIF9uYW1lLCB1aW50MzIgX2h1bGwsIHVpbnQzMiBfd2VhcG9uLCB1aW50MjU2IF9wcmljZSwgdWludDI1NiBfZWFybmluZywgdWludDI1NiBfcmVsZWFzZVRpbWUpIHByaXZhdGUgewogICAgICAgIHRhbmtQcm9kdWN0c1tuZXdJZFRhbmtQcm9kdWN0KytdID0gVGFua1Byb2R1Y3QoX25hbWUsIF9odWxsLCBfd2VhcG9uLCBfcHJpY2UsIF9wcmljZSwgX2Vhcm5pbmcsIF9yZWxlYXNlVGltZSk7CiAgICAgICAgCiAgICAgICAgRXZlbnRQcm9kdWN0IChuZXdJZFRhbmtQcm9kdWN0LTEsIF9uYW1lLCBfaHVsbCwgX3dlYXBvbiwgX3ByaWNlLCBfZWFybmluZywgX3JlbGVhc2VUaW1lLCBub3cpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBuZXdUYW5rSHVsbCAodWludDMyIF9hcm1vciwgdWludDMyIF9zcGVlZCwgdWludDggX2xlYWd1ZSkgcHJpdmF0ZSB7CiAgICAgICAgdGFua0h1bGxzW25ld0lkVGFua0h1bGwrK10gPSBUYW5rSHVsbChfYXJtb3IsIF9zcGVlZCwgX2xlYWd1ZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIG5ld1RhbmtXZWFwb24gKHVpbnQzMiBfbWluRGFtYWdlLCB1aW50MzIgX21heERhbWFnZSwgdWludDMyIF9hdHRhY2tTcGVlZCwgdWludDggX2xlYWd1ZSkgcHJpdmF0ZSB7CiAgICAgICAgdGFua1dlYXBvbnNbbmV3SWRUYW5rV2VhcG9uKytdID0gVGFua1dlYXBvbihfbWluRGFtYWdlLCBfbWF4RGFtYWdlLCBfYXR0YWNrU3BlZWQsIF9sZWFndWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBidXlUYW5rICh1aW50MzIgX3Rhbmtwcm9kdWN0SUQpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlICh0YW5rUHJvZHVjdHNbX3Rhbmtwcm9kdWN0SURdLmN1cnJlbnRQcmljZSA+IDAgJiYgbXNnLnZhbHVlID4gMCk7IC8vdmFsdWUgaXMgbW9yZSB0aGFuIDAsIHByaWNlIGlzIG1vcmUgdGhhbiAwCiAgICAgICAgcmVxdWlyZSAobXNnLnZhbHVlID49IHRhbmtQcm9kdWN0c1tfdGFua3Byb2R1Y3RJRF0uY3VycmVudFByaWNlKTsgLy92YWx1ZSBpcyBoaWdoZXIgdGhhbiBwcmljZQogICAgICAgIHJlcXVpcmUgKHRhbmtQcm9kdWN0c1tfdGFua3Byb2R1Y3RJRF0ucmVsZWFzZVRpbWUgPD0gbm93KTsgLy9jaGVja2luZyBpZiB0aGlzIHRhbmsgd2FzIHJlbGVhc2VkLgogICAgICAgIC8vIEJhc2ljYWxseSwgdGhlIHJlbGVhc2VUaW1lIHdhcyBpbXBsZW1lbnRlZCBqdXN0IHRvIGdpdmUgYSBjaGFuY2UgdG8gZ2V0IHRoZSBuZXcgdGFuayBmb3IgYXMgbWFueSBwbGF5ZXJzIGFzIHBvc3NpYmxlLgogICAgICAgIC8vIEl0IHByZXZlbnRzIHRoZSB1c2luZyBvZiBib3RzLgogICAgICAgIAogICAgICAgIGlmIChtc2cudmFsdWUgPiB0YW5rUHJvZHVjdHNbX3Rhbmtwcm9kdWN0SURdLmN1cnJlbnRQcmljZSl7CiAgICAgICAgICAgIC8vIElmIHBsYXllciBwYXllZCBtb3JlLCBwdXQgdGhlIHJlc3QgYW1vdW50IG9mIG1vbmV5IG9uIGhpcyBiYWxhbmNlCiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IG1zZy52YWx1ZS10YW5rUHJvZHVjdHNbX3Rhbmtwcm9kdWN0SURdLmN1cnJlbnRQcmljZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdGFua1Byb2R1Y3RzW190YW5rcHJvZHVjdElEXS5jdXJyZW50UHJpY2UgKz0gdGFua1Byb2R1Y3RzW190YW5rcHJvZHVjdElEXS5lYXJuaW5nOwogICAgICAgIAogICAgICAgIGZvciAodWludDMyIGluZGV4ID0gMTsgaW5kZXggPCBuZXdJZFRhbms7IGluZGV4KyspewogICAgICAgICAgICBpZiAodGFua3NbaW5kZXhdLnByb2R1Y3RJRCA9PSBfdGFua3Byb2R1Y3RJRCl7CiAgICAgICAgICAgICAgICBiYWxhbmNlc1t0YW5rc1tpbmRleF0uZWFybmVyXSArPSB0YW5rUHJvZHVjdHNbX3Rhbmtwcm9kdWN0SURdLmVhcm5pbmc7CiAgICAgICAgICAgICAgICB0YW5rc1tpbmRleF0uZWFybmVkICs9IHRhbmtQcm9kdWN0c1tfdGFua3Byb2R1Y3RJRF0uZWFybmluZzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAodGFua3NCZWZvcmVUaGVOZXdUYW5rVHlwZSgpID09IDAgJiYgbmV3SWRUYW5rUHJvZHVjdCA8PSAxMjEpewogICAgICAgICAgICBuZXdUYW5rVHlwZSgpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICB0YW5rc1tuZXdJZFRhbmsrK10gPSBUYW5rRW50aXR5IChfdGFua3Byb2R1Y3RJRCwgWzAsIDAsIDAsIDBdLCBtc2cuc2VuZGVyLCBtc2cuc2VuZGVyLCBmYWxzZSwgMCwgMCwgMCk7CiAgICAgICAgCiAgICAgICAgLy8gQWZ0ZXIgYWxsIG93bmVycyBvZiB0aGUgc2FtZSB0eXBlIG9mIHRhbmsgZ290IHRoZWlyIGVhcm5pbmdzLCBhZG1pbnMgZ2V0IHRoZSBhbW91bnQgd2hpY2ggcmVtYWlucyBhbmQgbm8gb25lIG5lZWQgaXQKICAgICAgICAvLyBCYXNpY2FsbHksIGl0IGlzIHRoZSBzdGFydCBwcmljZSBvZiB0aGUgdGFuay4KICAgICAgICBiYWxhbmNlc1tUYW5rU2VsbE1hc3Rlcl0gKz0gdGFua1Byb2R1Y3RzW190YW5rcHJvZHVjdElEXS5zdGFydFByaWNlOwogICAgICAgIAogICAgICAgIEV2ZW50QnV5VGFuayAobXNnLnNlbmRlciwgX3Rhbmtwcm9kdWN0SUQsIG5ld0lkVGFuay0xKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIC8vIFRoaXMgaXMgdGhlIHRyaWNreSBtZXRob2Qgd2hpY2ggY3JlYXRlcyB0aGUgbmV3IHR5cGUgdGFuay4KICAgIGZ1bmN0aW9uIG5ld1RhbmtUeXBlICgpIHB1YmxpYyB7CiAgICAgICAgaWYgKG5ld0lkVGFua1Byb2R1Y3QgPiAxMjEpewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vY3JlYXRpbmcgbmV3IHRhbmsgdHlwZSEKICAgICAgICBpZiAoY3JlYXRlTmV3VGFua0h1bGwgPCBuZXdJZFRhbmtIdWxsIC0gMSAmJiBjcmVhdGVOZXdUYW5rV2VhcG9uID49IG5ld0lkVGFua1dlYXBvbiAtIDEpIHsKICAgICAgICAgICAgY3JlYXRlTmV3VGFua1dlYXBvbiA9IDE7CiAgICAgICAgICAgIGNyZWF0ZU5ld1RhbmtIdWxsKys7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY3JlYXRlTmV3VGFua1dlYXBvbisrOwogICAgICAgICAgICBpZiAoY3JlYXRlTmV3VGFua0h1bGwgPT0gY3JlYXRlTmV3VGFua1dlYXBvbikgewogICAgICAgICAgICAgICAgY3JlYXRlTmV3VGFua1dlYXBvbisrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIG5ld1RhbmtQcm9kdWN0ICgiVGFuayIsIHVpbnQzMihjcmVhdGVOZXdUYW5rSHVsbCksIHVpbnQzMihjcmVhdGVOZXdUYW5rV2VhcG9uKSwgMjAwMDAwMDAwMDAwMDAwMDAwLCAzMDAwMDAwMDAwMDAwMDAwLCBub3crKDYwKjYwKSk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgCiAgICAvLyBPdXIgc3RvcmFnZSwga2V5cyBhcmUgbGlzdGVkIGZpcnN0LCB0aGVuIG1hcHBpbmdzLgogICAgLy8gT2YgY291cnNlLCBpbnN0ZWFkIG9mIHNvbWUgbWFwcGluZ3Mgd2UgY291bGQgdXNlIGFycmF5cywgYnV0IHdoeSBub3QKICAgIAogICAgdWludDMyIHB1YmxpYyBuZXdJZFRhbmsgPSAxOyAvLyBUaGUgbmV4dCBJRCBmb3IgdGhlIG5ldyB0YW5rCiAgICB1aW50MzIgcHVibGljIG5ld0lkVGFua1Byb2R1Y3QgPSAxOyAvLyBUaGUgbmV4dCBJRCBmb3IgdGhlIG5ldyB0YW5rIHR5cGUKICAgIHVpbnQzMiBwdWJsaWMgbmV3SWRUYW5rSHVsbCA9IDE7IC8vIFRoZSBuZXh0IElEIGZvciB0aGUgbmV3IGh1bGwKICAgIHVpbnQzMiBwdWJsaWMgbmV3SWRUYW5rV2VhcG9uID0gMTsgLy8gVGhlIG5ldyBJRCBmb3IgdGhlIG5ldyB3ZWFwb24KICAgIHVpbnQzMiBwdWJsaWMgY3JlYXRlTmV3VGFua0h1bGwgPSAxOyAvLyBGb3IgbmV3VGFua1R5cGUoKQogICAgdWludDMyIHB1YmxpYyBjcmVhdGVOZXdUYW5rV2VhcG9uID0gMDsgLy8gRm9yIG5ld1RhbmtUeXBlKCkKICAgIHVpbnQyNTYgcHVibGljIG5ld0lkQXVjdGlvbkVudGl0eSA9IDE7IC8vIFRoZSBuZXh0IElEIGZvciB0aGUgbmV3IGF1Y3Rpb24gZW50aXR5CgogICAgbWFwcGluZyAodWludDMyID0+IFRhbmtFbnRpdHkpIHRhbmtzOyAvLyBUaGUgc3RvcmFnZSAKICAgIG1hcHBpbmcgKHVpbnQzMiA9PiBUYW5rUHJvZHVjdCkgdGFua1Byb2R1Y3RzOwogICAgbWFwcGluZyAodWludDMyID0+IFRhbmtIdWxsKSB0YW5rSHVsbHM7CiAgICBtYXBwaW5nICh1aW50MzIgPT4gVGFua1dlYXBvbikgdGFua1dlYXBvbnM7CiAgICBtYXBwaW5nICh1aW50MjU2ID0+IEF1Y3Rpb25FbnRpdHkpIGF1Y3Rpb25zOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB1cGdyYWRlUHJpY2UgPSA1MDAwMDAwMDAwMDAwMDAwMDsgLy8gVGhlIGZlZSB3aGljaCB0aGUgVWdyYWRlTWFzdGVyIGVhcm5zIGZvciB1cGdyYWRpbmcgdGFua3MKCiAgICBmdW5jdGlvbiBnZXRUYW5rTmFtZSAodWludDMyIF9JRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyl7CiAgICAgICAgcmV0dXJuIHRhbmtQcm9kdWN0c1tfSURdLm5hbWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldFRhbmtQcm9kdWN0ICh1aW50MzIgX0lEKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDMyWzZdKXsKICAgICAgICByZXR1cm4gW3RhbmtIdWxsc1t0YW5rUHJvZHVjdHNbX0lEXS5odWxsXS5hcm1vciwgdGFua0h1bGxzW3RhbmtQcm9kdWN0c1tfSURdLmh1bGxdLnNwZWVkLCB0YW5rV2VhcG9uc1t0YW5rUHJvZHVjdHNbX0lEXS53ZWFwb25dLm1pbkRhbWFnZSwgdGFua1dlYXBvbnNbdGFua1Byb2R1Y3RzW19JRF0ud2VhcG9uXS5tYXhEYW1hZ2UsIHRhbmtXZWFwb25zW3RhbmtQcm9kdWN0c1tfSURdLndlYXBvbl0uYXR0YWNrU3BlZWQsIHVpbnQzMih0YW5rUHJvZHVjdHNbX0lEXS5yZWxlYXNlVGltZSldOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRUYW5rRGV0YWlscyAodWludDMyIF9JRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQzMls2XSl7CiAgICAgICAgcmV0dXJuIFt0YW5rc1tfSURdLnByb2R1Y3RJRCwgdWludDMyKHRhbmtzW19JRF0udXBncmFkZXNbMF0pLCB1aW50MzIodGFua3NbX0lEXS51cGdyYWRlc1sxXSksIHVpbnQzMih0YW5rc1tfSURdLnVwZ3JhZGVzWzJdKSwgdWludDMyKHRhbmtzW19JRF0udXBncmFkZXNbM10pLCB1aW50MzIodGFua3NbX0lEXS5leHApXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0VGFua093bmVyKHVpbnQzMiBfSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKXsKICAgICAgICByZXR1cm4gdGFua3NbX0lEXS5vd25lcjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0VGFua1NlbGwodWludDMyIF9JRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpewogICAgICAgIHJldHVybiB0YW5rc1tfSURdLnNlbGxpbmc7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldFRhbmtUb3RhbEVhcm5lZCh1aW50MzIgX0lEKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgcmV0dXJuIHRhbmtzW19JRF0uZWFybmVkOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRUYW5rQXVjdGlvbkVudGl0eSAodWludDMyIF9JRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpewogICAgICAgIHJldHVybiB0YW5rc1tfSURdLmF1Y3Rpb25FbnRpdHk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRQcmljZSAodWludDMyIF9JRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpewogICAgICAgIHJldHVybiB0YW5rUHJvZHVjdHNbX0lEXS5jdXJyZW50UHJpY2U7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldFByb2R1Y3RFYXJuaW5nICh1aW50MzIgX0lEKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgcmV0dXJuIHRhbmtQcm9kdWN0c1tfSURdLmVhcm5pbmc7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldFRhbmtFYXJuaW5nICh1aW50MzIgX0lEKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgcmV0dXJuIHRhbmtzW19JRF0uZWFybmVkOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50UHJpY2VBdWN0aW9uICh1aW50MzIgX0lEKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgcmVxdWlyZSAoZ2V0VGFua1NlbGwoX0lEKSk7CiAgICAgICAgQXVjdGlvbkVudGl0eSBtZW1vcnkgY3VycmVudEF1Y3Rpb24gPSBhdWN0aW9uc1t0YW5rc1tfSURdLmF1Y3Rpb25FbnRpdHldOyAvLyBUaGUgYXVjdGlvbiBlbnRpdHkgZm9yIHRoaXMgdGFuay4gSnVzdCB0byBtYWtlIHRoZSBsaW5lIGJlbG93IGVhc2llciB0byByZWFkCiAgICAgICAgdWludDI1NiBjdXJyZW50UHJpY2UgPSBjdXJyZW50QXVjdGlvbi5zdGFydFByaWNlLSgoKGN1cnJlbnRBdWN0aW9uLnN0YXJ0UHJpY2UtY3VycmVudEF1Y3Rpb24uZmluaXNoUHJpY2UpLyhjdXJyZW50QXVjdGlvbi5kdXJhdGlvbikpKihub3ctY3VycmVudEF1Y3Rpb24uc3RhcnRUaW1lKSk7CiAgICAgICAgaWYgKGN1cnJlbnRQcmljZSA8IGN1cnJlbnRBdWN0aW9uLmZpbmlzaFByaWNlKXsgLy8gSWYgdGhlIGF1Y3Rpb24gZHVyYXRpb24gdGltZSBoYXMgYmVlbiBleHBpcmVkCiAgICAgICAgICAgIGN1cnJlbnRQcmljZSA9IGN1cnJlbnRBdWN0aW9uLmZpbmlzaFByaWNlOyAgLy8gU2V0dGluZyB0aGUgY3VycmVudCBwcmljZSBhcyBmaW5pc2hQcmljZSAKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGN1cnJlbnRQcmljZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0UGxheWVyQmFsYW5jZShhZGRyZXNzIF9wbGF5ZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX3BsYXllcl07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldENvbnRyYWN0QmFsYW5jZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBob3dNYW55VGFua3MoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDMyKXsKICAgICAgICByZXR1cm4gbmV3SWRUYW5rUHJvZHVjdDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdGFua3NCZWZvcmVUaGVOZXdUYW5rVHlwZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICByZXR1cm4gMTAwMCsoKChuZXdJZFRhbmtQcm9kdWN0KSsxMCkqKChuZXdJZFRhbmtQcm9kdWN0KSsxMCkqKG5ld0lkVGFua1Byb2R1Y3QtMTEpKS1uZXdJZFRhbms7CiAgICB9Cn0KCi8qCiAgICBFdGhlclRhbmtzLmNvbQogICAgRXRoZXJlVGFua3MuY29tCiov'.
	

]
