Class {
	#name : #SRT9e88770da20ebea0df87ad874c2f5cf8ab92f605,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9e88770da20ebea0df87ad874c2f5cf8ab92f605 >> base64 [
	^ 'Ly8gQWJzdHJhY3QgY29udHJhY3QgZm9yIHRoZSBmdWxsIEVSQyAyMCBUb2tlbiBzdGFuZGFyZAovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBUb2tlbiB7CiAgICAvKiBUaGlzIGlzIGEgc2xpZ2h0IGNoYW5nZSB0byB0aGUgRVJDMjAgYmFzZSBzdGFuZGFyZC4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgaXMgcmVwbGFjZWQgd2l0aDoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgVGhpcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgYSBnZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSB0b3RhbFN1cHBseS4KICAgIFRoaXMgaXMgbW92ZWQgdG8gdGhlIGJhc2UgY29udHJhY3Qgc2luY2UgcHVibGljIGdldHRlciBmdW5jdGlvbnMgYXJlIG5vdAogICAgY3VycmVudGx5IHJlY29nbmlzZWQgYXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIG1hdGNoaW5nIGFic3RyYWN0CiAgICBmdW5jdGlvbiBieSB0aGUgY29tcGlsZXIuCiAgICAqLwogICAgLy8vIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBgX2Zyb21gCiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4gewoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKfQoKY29udHJhY3QgQ05ZVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgZnVuY3Rpb24gKCkgewogICAgICAgIC8vaWYgZXRoZXIgaXMgc2VudCB0byB0aGlzIGFkZHJlc3MsIHNlbmQgaXQgYmFjay4KICAgICAgICB0aHJvdzsKICAgIH0KCiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGVyOyAgICAgICAgICAgICAgIC8vIFRoZSBhZGRyZXNzIG9mIHRoZSBmb3VuZGVyCiAgICBzdHJpbmcgcHVibGljIG5hbWU7ICAgICAgICAgICAgICAgICAgIC8vIGZhbmN5IG5hbWU6IGVnIFNpbW9uIEJ1Y2tzCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7ICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGRlY2ltYWxzIHRvIHNob3cuIGllLiBUaGVyZSBjb3VsZCAxMDAwIGJhc2UgdW5pdHMgd2l0aCAzIGRlY2ltYWxzLiBNZWFuaW5nIDAuOTgwIFNCWCA9IDk4MCBiYXNlIHVuaXRzLiBJdCdzIGxpa2UgY29tcGFyaW5nIDEgd2VpIHRvIDEgZXRoZXIuCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsgICAgICAgICAgICAgICAgIC8vIEFuIGlkZW50aWZpZXI6IGVnIFNCWAogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gJ0NOWTAuMSc7ICAgICAvLyBDTlkgMC4xIHN0YW5kYXJkLiBKdXN0IGFuIGFyYml0cmFyeSB2ZXJzaW9uaW5nIHNjaGVtZS4KICAgIAoKICAgIC8vIFRoZSBub25jZSBmb3IgYXZvaWQgdHJhbnNmZXIgcmVwbGF5IGF0dGFja3MKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBub25jZXM7CgogICAgLy8gVGhlIGxhc3QgY29tbWVudCBmb3IgYWRkcmVzcwogICAgbWFwcGluZyhhZGRyZXNzID0+IHN0cmluZykgbGFzdENvbW1lbnQ7CgogICAgLy8gVGhlIGNvbW1lbnRzIGZvciB0cmFuc2ZlcnMgcGVyIGFkZHJlc3MKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAodWludDI1NiA9PiBzdHJpbmcpKSBjb21tZW50czsKCiAgICBmdW5jdGlvbiBDTllUb2tlbigKICAgICAgICB1aW50MjU2IF9pbml0aWFsQW1vdW50LAogICAgICAgIHN0cmluZyBfdG9rZW5OYW1lLAogICAgICAgIHVpbnQ4IF9kZWNpbWFsVW5pdHMsCiAgICAgICAgc3RyaW5nIF90b2tlblN5bWJvbCkgewogICAgICAgIGZvdW5kZXIgPSBtc2cuc2VuZGVyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgY3JlYXRvciBhZGRyZXNzCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBfaW5pdGlhbEFtb3VudDsgICAgICAgICAgICAgICAvLyBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucwogICAgICAgIHRvdGFsU3VwcGx5ID0gX2luaXRpYWxBbW91bnQ7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRvdGFsIHN1cHBseQogICAgICAgIG5hbWUgPSBfdG9rZW5OYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBuYW1lIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgZGVjaW1hbHMgPSBfZGVjaW1hbFVuaXRzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbW91bnQgb2YgZGVjaW1hbHMgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgICAgICBzeW1ib2wgPSBfdG9rZW5TeW1ib2w7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgc3ltYm9sIGZvciBkaXNwbGF5IHB1cnBvc2VzICAKICAgIH0KCiAgIGZ1bmN0aW9uIHRyYW5zZmVyV2l0aENvbW1lbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBzdHJpbmcgX2NvbW1lbnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgbGFzdENvbW1lbnRbbXNnLnNlbmRlcl0gPSBfY29tbWVudDsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb21XaXRoQ29tbWVudChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIHN0cmluZyBfY29tbWVudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGxhc3RDb21tZW50W19mcm9tXSA9IF9jb21tZW50OwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qCiAgICAgKiBQcm94eSB0cmFuc2ZlciBDTlkgdG9rZW4uIFdoZW4gc29tZSB1c2VycyBvZiB0aGUgZXRoZXJldW0gYWNjb3VudCBoYXMgbm8gZXRoZXIsCiAgICAgKiBoZSBvciBzaGUgY2FuIGF1dGhvcml6ZSB0aGUgYWdlbnQgZm9yIGJyb2FkY2FzdCB0cmFuc2FjdGlvbnMsIGFuZCBhZ2VudHMgbWF5IGNoYXJnZSBhZ2VuY3kgZmVlcwogICAgICogQHBhcmFtIF9mcm9tCiAgICAgKiBAcGFyYW0gX3RvCiAgICAgKiBAcGFyYW0gX3ZhbHVlCiAgICAgKiBAcGFyYW0gZmVlCiAgICAgKiBAcGFyYW0gX3YKICAgICAqIEBwYXJhbSBfcgogICAgICogQHBhcmFtIF9zCiAgICAgKiBAcGFyYW0gX2NvbW1lbnQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJQcm94eShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIHVpbnQyNTYgX2ZlZSwKICAgICAgICB1aW50OCBfdixieXRlczMyIF9yLCBieXRlczMyIF9zLCBzdHJpbmcgX2NvbW1lbnQpIHJldHVybnMgKGJvb2wpewoKICAgICAgICBpZihiYWxhbmNlc1tfZnJvbV0gPCBfZmVlICsgX3ZhbHVlKSB0aHJvdzsKCiAgICAgICAgdWludDI1NiBub25jZSA9IG5vbmNlc1tfZnJvbV07CiAgICAgICAgYnl0ZXMzMiBoID0gc2hhMyhfZnJvbSxfdG8sX3ZhbHVlLF9mZWUsbm9uY2UpOwogICAgICAgIGlmKF9mcm9tICE9IGVjcmVjb3ZlcihoLF92LF9yLF9zKSkgdGhyb3c7CgogICAgICAgIGlmKGJhbGFuY2VzW190b10gKyBfdmFsdWUgPCBiYWxhbmNlc1tfdG9dCiAgICAgICAgICAgIHx8IGJhbGFuY2VzW21zZy5zZW5kZXJdICsgX2ZlZSA8IGJhbGFuY2VzW21zZy5zZW5kZXJdKSB0aHJvdzsKICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBfZmVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBtc2cuc2VuZGVyLCBfZmVlKTsKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZSArIF9mZWU7CiAgICAgICAgbGFzdENvbW1lbnRbX2Zyb21dID0gX2NvbW1lbnQ7CiAgICAgICAgY29tbWVudHNbX2Zyb21dW25vbmNlXSA9IF9jb21tZW50OwogICAgICAgIG5vbmNlc1tfZnJvbV0gPSBub25jZSArIDE7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoKICAgICAqIFByb3h5IGFwcHJvdmUgdGhhdCBzb21lIG9uZSBjYW4gYXV0aG9yaXplIHRoZSBhZ2VudCBmb3IgYnJvYWRjYXN0IHRyYW5zYWN0aW9uCiAgICAgKiB3aGljaCBjYWxsIGFwcHJvdmUgbWV0aG9kLCBhbmQgYWdlbnRzIG1heSBjaGFyZ2UgYWdlbmN5IGZlZXMKICAgICAqIEBwYXJhbSBfZnJvbSBUaGUgIGFkZHJlc3Mgd2hpY2ggc2hvdWxkIHRyYW5mZXIgQ05ZIHRvIG90aGVycwogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBzcGVuZGVyIHdobyBhbGxvd2VkIGJ5IF9mcm9tCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSB2YWx1ZSB0aGF0IHNob3VsZCBiZSB0cmFuZmVyZWQuCiAgICAgKiBAcGFyYW0gX3YKICAgICAqIEBwYXJhbSBfcgogICAgICogQHBhcmFtIF9zCiAgICAgKiBAcGFyYW0gX2NvbW1lbnQKICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZVByb3h5KGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLAogICAgICAgIHVpbnQ4IF92LGJ5dGVzMzIgX3IsIGJ5dGVzMzIgX3MsIHN0cmluZyBfY29tbWVudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIHVpbnQyNTYgbm9uY2UgPSBub25jZXNbX2Zyb21dOwogICAgICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTMoX2Zyb20sX3NwZW5kZXIsX3ZhbHVlLG5vbmNlKTsKICAgICAgICBpZihfZnJvbSAhPSBlY3JlY292ZXIoaGFzaCxfdixfcixfcykpIHRocm93OwogICAgICAgIGFsbG93ZWRbX2Zyb21dW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChfZnJvbSwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgbGFzdENvbW1lbnRbX2Zyb21dID0gX2NvbW1lbnQ7CiAgICAgICAgY29tbWVudHNbX2Zyb21dW25vbmNlXSA9IF9jb21tZW50OwogICAgICAgIG5vbmNlc1tfZnJvbV0gPSBub25jZSArIDE7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIC8qCiAgICAgKiBHZXQgdGhlIG5vbmNlCiAgICAgKiBAcGFyYW0gX2FkZHIKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0Tm9uY2UoYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgcmV0dXJuIG5vbmNlc1tfYWRkcl07CiAgICB9CgogICAgLyoKICAgICAqIEdldCBsYXN0IGNvbW1lbnQKICAgICAqIEBwYXJhbSBfYWRkcgogICAgICovCiAgICBmdW5jdGlvbiBnZXRMYXN0Q29tbWVudChhZGRyZXNzIF9hZGRyKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcpewogICAgICAgIHJldHVybiBsYXN0Q29tbWVudFtfYWRkcl07CiAgICB9CgogICAgLyoKICAgICAqIEdldCBzcGVjaWZpZWQgY29tbWVudAogICAgICogQHBhcmFtIF9hZGRyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFNwZWNpZmllZENvbW1lbnQoYWRkcmVzcyBfYWRkciwgdWludDI1NiBfbm9uY2UpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyl7CiAgICAgICAgaWYgKG5vbmNlc1tfYWRkcl0gPCBfbm9uY2UpIHRocm93OwogICAgICAgIHJldHVybiBjb21tZW50c1tfYWRkcl1bX25vbmNlXTsKICAgIH0KCiAgICAvKiBBcHByb3ZlcyBhbmQgdGhlbiBjYWxscyB0aGUgcmVjZWl2aW5nIGNvbnRyYWN0ICovCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgogICAgICAgIC8vY2FsbCB0aGUgcmVjZWl2ZUFwcHJvdmFsIGZ1bmN0aW9uIG9uIHRoZSBjb250cmFjdCB5b3Ugd2FudCB0byBiZSBub3RpZmllZC4gVGhpcyBjcmFmdHMgdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBtYW51YWxseSBzbyBvbmUgZG9lc24ndCBoYXZlIHRvIGluY2x1ZGUgYSBjb250cmFjdCBpbiBoZXJlIGp1c3QgZm9yIHRoaXMuCiAgICAgICAgLy9yZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuQ29udHJhY3QsIGJ5dGVzIF9leHRyYURhdGEpCiAgICAgICAgLy9pdCBpcyBhc3N1bWVkIHRoYXQgd2hlbiBkb2VzIHRoaXMgdGhhdCB0aGUgY2FsbCAqc2hvdWxkKiBzdWNjZWVkLCBvdGhlcndpc2Ugb25lIHdvdWxkIHVzZSB2YW5pbGxhIGFwcHJvdmUgaW5zdGVhZC4KICAgICAgICBpZighX3NwZW5kZXIuY2FsbChieXRlczQoYnl0ZXMzMihzaGEzKCJyZWNlaXZlQXBwcm92YWwoYWRkcmVzcyx1aW50MjU2LGFkZHJlc3MsYnl0ZXMpIikpKSwgbXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKSkgeyB0aHJvdzsgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qIEFwcHJvdmVzIGFuZCB0aGVuIGNhbGxzIHRoZSBjb250cmFjdCBjb2RlKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsY29kZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgogICAgICAgIC8vQ2FsbCB0aGUgY29udHJhY3QgY29kZQogICAgICAgIGlmKCFfc3BlbmRlci5jYWxsKF9leHRyYURhdGEpKSB7IHRocm93OyB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyogVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgYnVybnQgKi8KICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQyNTYgdmFsdWUpOwoKICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IF92YWx1ZSkgdGhyb3c7ICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGVzIHRvdGFsU3VwcGx5CiAgICAgICAgQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dIDwgX3ZhbHVlKSB0aHJvdzsgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgaWYgKF92YWx1ZSA+IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKSB0aHJvdzsgICAgLy8gQ2hlY2sgYWxsb3dhbmNlCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIHRvdGFsU3VwcGx5IC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlcyB0b3RhbFN1cHBseQogICAgICAgIEJ1cm4oX2Zyb20sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyogVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgaW5jcmVhbWVudCAqLwogICAgZXZlbnQgSW5jcmVhc2UoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKCiAgICAvLyBBbGxvY2F0ZSB0b2tlbnMgdG8gdGhlIHVzZXJzCiAgICAvLyBAcGFyYW0gX3RvIFRoZSBvd25lciBvZiB0aGUgdG9rZW4KICAgIC8vIEBwYXJhbSBfdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSB0b2tlbgogICAgZnVuY3Rpb24gYWxsb2NhdGVUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB7CiAgICAgICAgaWYobXNnLnNlbmRlciAhPSBmb3VuZGVyKSB0aHJvdzsgICAgICAgICAgICAvLyBvbmx5IHRoZSBmb3VuZGVyIGhhdmUgdGhlIGF1dGhvcml0eQogICAgICAgIGlmKHRvdGFsU3VwcGx5ICsgX3ZhbHVlIDw9IHRvdGFsU3VwcGx5IHx8IGJhbGFuY2VzW190b10gKyBfdmFsdWUgPD0gYmFsYW5jZXNbX3RvXSkgdGhyb3c7CiAgICAgICAgdG90YWxTdXBwbHkgKz0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgIEluY3JlYXNlKF90byxfdmFsdWUpOwogICAgfQp9'.
	

]
