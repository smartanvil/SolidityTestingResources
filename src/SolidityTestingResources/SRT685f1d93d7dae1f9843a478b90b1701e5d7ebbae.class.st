Class {
	#name : #SRT685f1d93d7dae1f9843a478b90b1701e5d7ebbae,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT685f1d93d7dae1f9843a478b90b1701e5d7ebbae >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKgogICAgICAgICAgLC9gLgogICAgICAgICwnLyBfX2AuCiAgICAgICwnXy9fICBfIF9gLgogICAgLCdfXy9fIF9fXyBfICBgLgogICwnXyAgL19fXyBfXyBfIF9fIGAuCiAnLS4uXy9fX18uLi4tIi0uLS4uX19gLgogIEIKCiBTaGFkb3dTcGlrZS4gQSBuby1idWxsc2hpdCwgdHJhbnNwYXJlbnQsIHNlbGYtc3VzdGFpbmluZyBweXJhbWlkIHNjaGVtZS4KIAogSW5zcGlyZWQgYnkgaHR0cHM6Ly90ZXN0LmpvY2hlbi1ob2VuaWNrZS5kZS9ldGgvcG9ueml0b2tlbi8KCiBEZXZlbG9wZXJzOgoJQXJjCglEaXZpbmUKCU5vcnNlZmlyZQoJVG9Dc0ljSwoJCiBGcm9udC1FbmQ6CglDYXJkaW90aAoJdGVubWVpCglUcmVuZGl1bQoJCiBNb3JhbCBTdXBwb3J0OgoJRGVhZENvdy5SYXQKCURvdHMKCUZhdEtyZWFteQoJS2FzZXlsb2wKCVF1YW50dW1EZWF0aDY2NgoJUXVlbnRpbgogCiBTaGl0LVRpZXI6CglIZW50YWlDaHJpc3QKIAoqLwoKY29udHJhY3QgU2hhZG93U3Bpa2UgewoKCS8vIHNjYWxlRmFjdG9yIGlzIHVzZWQgdG8gY29udmVydCBFdGhlciBpbnRvIHRva2VucyBhbmQgdmljZS12ZXJzYTogdGhleSdyZSBvZiBkaWZmZXJlbnQKCS8vIG9yZGVycyBvZiBtYWduaXR1ZGUsIGhlbmNlIHRoZSBuZWVkIHRvIGJyaWRnZSBiZXR3ZWVuIHRoZSB0d28uCgl1aW50MjU2IGNvbnN0YW50IHNjYWxlRmFjdG9yID0gMHgxMDAwMDAwMDAwMDsgIC8vIDJeNjQKCgkvLyBDUlIgPSA1MCUKCS8vIENSUiBpcyBDYXNoIFJlc2VydmUgUmF0aW8gKGluIHRoaXMgY2FzZSBDcnlwdG8gUmVzZXJ2ZSBSYXRpbykuCgkvLyBGb3IgbW9yZSBvbiB0aGlzOiBjaGVjayBvdXQgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmVzZXJ2ZV9yZXF1aXJlbWVudAoJaW50IGNvbnN0YW50IGNycl9uID0gMTsgLy8gQ1JSIG51bWVyYXRvcgoJaW50IGNvbnN0YW50IGNycl9kID0gMTAwMDAwOyAvLyBDUlIgZGVub21pbmF0b3IKCgkvLyBUaGUgcHJpY2UgY29lZmZpY2llbnQuIENob3NlbiBzdWNoIHRoYXQgYXQgMSB0b2tlbiB0b3RhbCBzdXBwbHkKCS8vIHRoZSBhbW91bnQgaW4gcmVzZXJ2ZSBpcyAwLjUgZXRoZXIgYW5kIHRva2VuIHByaWNlIGlzIDEgRXRoZXIuCglpbnQgY29uc3RhbnQgcHJpY2VfY29lZmYgPSAtMHgyOTZBQkY3ODRBMzU4NDY4QzsKCgkvLyBUeXBpY2FsIHZhbHVlcyB0aGF0IHdlIGhhdmUgdG8gZGVjbGFyZS4KCXN0cmluZyBjb25zdGFudCBwdWJsaWMgbmFtZSA9ICJTaGFkb3dTcGlrZSI7CglzdHJpbmcgY29uc3RhbnQgcHVibGljIHN5bWJvbCA9ICJTSFAiOwoJdWludDggY29uc3RhbnQgcHVibGljIGRlY2ltYWxzID0gMTg7CgoJLy8gQXJyYXkgYmV0d2VlbiBlYWNoIGFkZHJlc3MgYW5kIHRoZWlyIG51bWJlciBvZiB0b2tlbnMuCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHRva2VuQmFsYW5jZTsKCQkKCS8vIEFycmF5IGJldHdlZW4gZWFjaCBhZGRyZXNzIGFuZCBob3cgbXVjaCBFdGhlciBoYXMgYmVlbiBwYWlkIG91dCB0byBpdC4KCS8vIE5vdGUgdGhhdCB0aGlzIGlzIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgltYXBwaW5nKGFkZHJlc3MgPT4gaW50MjU2KSBwdWJsaWMgcGF5b3V0czsKCgkvLyBWYXJpYWJsZSB0cmFja2luZyBob3cgbWFueSB0b2tlbnMgYXJlIGluIGV4aXN0ZW5jZSBvdmVyYWxsLgoJdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgoJLy8gQWdncmVnYXRlIHN1bSBvZiBhbGwgcGF5b3V0cy4KCS8vIE5vdGUgdGhhdCB0aGlzIGlzIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCglpbnQyNTYgdG90YWxQYXlvdXRzOwoKCS8vIFZhcmlhYmxlIHRyYWNraW5nIGhvdyBtdWNoIEV0aGVyIGVhY2ggdG9rZW4gaXMgY3VycmVudGx5IHdvcnRoLgoJLy8gTm90ZSB0aGF0IHRoaXMgaXMgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCXVpbnQyNTYgZWFybmluZ3NQZXJUb2tlbjsKCQoJLy8gQ3VycmVudCBjb250cmFjdCBiYWxhbmNlIGluIEV0aGVyCgl1aW50MjU2IHB1YmxpYyBjb250cmFjdEJhbGFuY2U7CgoJZnVuY3Rpb24gU2hhZG93U3Bpa2UoKSBwdWJsaWMge30KCgkvLyBUaGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBhcmUgdXNlZCBieSB0aGUgZnJvbnQtZW5kIGZvciBkaXNwbGF5IHB1cnBvc2VzLgoKCS8vIFJldHVybnMgdGhlIG51bWJlciBvZiB0b2tlbnMgY3VycmVudGx5IGhlbGQgYnkgX293bmVyLgoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CgkJcmV0dXJuIHRva2VuQmFsYW5jZVtfb3duZXJdOwoJfQoKCS8vIFdpdGhkcmF3cyBhbGwgZGl2aWRlbmRzIGhlbGQgYnkgdGhlIGNhbGxlciBzZW5kaW5nIHRoZSB0cmFuc2FjdGlvbiwgdXBkYXRlcwoJLy8gdGhlIHJlcXVpc2l0ZSBnbG9iYWwgdmFyaWFibGVzLCBhbmQgdHJhbnNmZXJzIEV0aGVyIGJhY2sgdG8gdGhlIGNhbGxlci4KCWZ1bmN0aW9uIHdpdGhkcmF3KCkgcHVibGljIHsKCQkvLyBSZXRyaWV2ZSB0aGUgZGl2aWRlbmRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWRkcmVzcyB0aGUgcmVxdWVzdCBjYW1lIGZyb20uCgkJdmFyIGJhbGFuY2UgPSBkaXZpZGVuZHMobXNnLnNlbmRlcik7CgkJCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5LCBpbmNyZW1lbnRpbmcgdGhlIHJlcXVlc3QgYWRkcmVzcyBieSBgYmFsYW5jZWAuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIFNlbmQgdGhlIGRpdmlkZW5kcyB0byB0aGUgYWRkcmVzcyB0aGF0IHJlcXVlc3RlZCB0aGUgd2l0aGRyYXcuCgkJY29udHJhY3RCYWxhbmNlID0gc3ViKGNvbnRyYWN0QmFsYW5jZSwgYmFsYW5jZSk7CgkJbXNnLnNlbmRlci50cmFuc2ZlcihiYWxhbmNlKTsKCX0KCgkvLyBDb252ZXJ0cyB0aGUgRXRoZXIgYWNjcnVlZCBhcyBkaXZpZGVuZHMgYmFjayBpbnRvIEVQWSB0b2tlbnMgd2l0aG91dCBoYXZpbmcgdG8KCS8vIHdpdGhkcmF3IGl0IGZpcnN0LiBTYXZlcyBvbiBnYXMgYW5kIHBvdGVudGlhbCBwcmljZSBzcGlrZSBsb3NzLgoJZnVuY3Rpb24gcmVpbnZlc3REaXZpZGVuZHMoKSBwdWJsaWMgewoJCS8vIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhZGRyZXNzIHRoZSByZXF1ZXN0IGNhbWUgZnJvbS4KCQl2YXIgYmFsYW5jZSA9IGRpdmlkZW5kcyhtc2cuc2VuZGVyKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dHMgYXJyYXksIGluY3JlbWVudGluZyB0aGUgcmVxdWVzdCBhZGRyZXNzIGJ5IGBiYWxhbmNlYC4KCQkvLyBTaW5jZSB0aGlzIGlzIGVzc2VudGlhbGx5IGEgc2hvcnRjdXQgdG8gd2l0aGRyYXdpbmcgYW5kIHJlaW52ZXN0aW5nLCB0aGlzIHN0ZXAgc3RpbGwgaG9sZHMuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEFzc2lnbiBiYWxhbmNlIHRvIGEgbmV3IHZhcmlhYmxlLgoJCXVpbnQgdmFsdWVfID0gKHVpbnQpIChiYWxhbmNlKTsKCQkKCQkvLyBJZiB5b3VyIGRpdmlkZW5kcyBhcmUgd29ydGggbGVzcyB0aGFuIDEgc3phYm8sIG9yIG1vcmUgdGhhbiBhIG1pbGxpb24gRXRoZXIKCQkvLyAoaW4gd2hpY2ggY2FzZSwgd2h5IGFyZSB5b3UgZXZlbiBoZXJlKSwgYWJvcnQuCgkJaWYgKHZhbHVlXyA8IDAuMDAwMDAxIGV0aGVyIHx8IHZhbHVlXyA+IDEwMDAwMDAgZXRoZXIpCgkJCXJldmVydCgpOwoJCQkKCQkvLyBtc2cuc2VuZGVyIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSBjYWxsZXIuCgkJdmFyIHNlbmRlciA9IG1zZy5zZW5kZXI7CgkJCgkJLy8gQSB0ZW1wb3JhcnkgcmVzZXJ2ZSB2YXJpYWJsZSB1c2VkIGZvciBjYWxjdWxhdGluZyB0aGUgcmV3YXJkIHRoZSBob2xkZXIgZ2V0cyBmb3IgYnV5aW5nIHRva2Vucy4KCQkvLyAoWWVzLCB0aGUgYnV5ZXIgcmVjZWl2ZXMgYSBwYXJ0IG9mIHRoZSBkaXN0cmlidXRpb24gYXMgd2VsbCEpCgkJdmFyIHJlcyA9IHJlc2VydmUoKSAtIGJhbGFuY2U7CgoJCS8vIDEwJSBvZiB0aGUgdG90YWwgRXRoZXIgc2VudCBpcyB1c2VkIHRvIHBheSBleGlzdGluZyBob2xkZXJzLgoJCXZhciBmZWUgPSBkaXYodmFsdWVfLCAxMCk7CgkJCgkJLy8gVGhlIGFtb3VudCBvZiBFdGhlciB1c2VkIHRvIHB1cmNoYXNlIG5ldyB0b2tlbnMgZm9yIHRoZSBjYWxsZXIuCgkJdmFyIG51bUV0aGVyID0gdmFsdWVfIC0gZmVlOwoJCQoJCS8vIFRoZSBudW1iZXIgb2YgdG9rZW5zIHdoaWNoIGNhbiBiZSBwdXJjaGFzZWQgZm9yIG51bUV0aGVyLgoJCXZhciBudW1Ub2tlbnMgPSBjYWxjdWxhdGVEaXZpZGVuZFRva2VucyhudW1FdGhlciwgYmFsYW5jZSk7CgkJCgkJLy8gVGhlIGJ1eWVyIGZlZSwgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCQl2YXIgYnV5ZXJGZWUgPSBmZWUgKiBzY2FsZUZhY3RvcjsKCQkKCQkvLyBDaGVjayB0aGF0IHdlIGhhdmUgdG9rZW5zIGluIGV4aXN0ZW5jZSAodGhpcyBzaG91bGQgYWx3YXlzIGJlIHRydWUpLCBvcgoJCS8vIGVsc2UgeW91J3JlIGdvbm5hIGhhdmUgYSBiYWQgdGltZS4KCQlpZiAodG90YWxTdXBwbHkgPiAwKSB7CgkJCS8vIENvbXB1dGUgdGhlIGJvbnVzIGNvLWVmZmljaWVudCBmb3IgYWxsIGV4aXN0aW5nIGhvbGRlcnMgYW5kIHRoZSBidXllci4KCQkJLy8gVGhlIGJ1eWVyIHJlY2VpdmVzIHBhcnQgb2YgdGhlIGRpc3RyaWJ1dGlvbiBmb3IgZWFjaCB0b2tlbiBib3VnaHQgaW4gdGhlCgkJCS8vIHNhbWUgd2F5IHRoZXkgd291bGQgaGF2ZSBpZiB0aGV5IGJvdWdodCBlYWNoIHRva2VuIGluZGl2aWR1YWxseS4KCQkJdmFyIGJvbnVzQ29FZmYgPQoJCQkgICAgKHNjYWxlRmFjdG9yIC0gKHJlcyArIG51bUV0aGVyKSAqIG51bVRva2VucyAqIHNjYWxlRmFjdG9yIC8gKHRvdGFsU3VwcGx5ICsgbnVtVG9rZW5zKSAvIG51bUV0aGVyKQoJCQkgICAgKiAodWludCkoY3JyX2QpIC8gKHVpbnQpKGNycl9kLWNycl9uKTsKCQkJCQoJCQkvLyBUaGUgdG90YWwgcmV3YXJkIHRvIGJlIGRpc3RyaWJ1dGVkIGFtb25nc3QgdGhlIG1hc3NlcyBpcyB0aGUgZmVlIChpbiBFdGhlcikKCQkJLy8gbXVsdGlwbGllZCBieSB0aGUgYm9udXMgY28tZWZmaWNpZW50LgoJCQl2YXIgaG9sZGVyUmV3YXJkID0gZmVlICogYm9udXNDb0VmZjsKCQkJCgkJCWJ1eWVyRmVlIC09IGhvbGRlclJld2FyZDsKCgkJCS8vIEZlZSBpcyBkaXN0cmlidXRlZCB0byBhbGwgZXhpc3RpbmcgdG9rZW4gaG9sZGVycyBiZWZvcmUgdGhlIG5ldyB0b2tlbnMgYXJlIHB1cmNoYXNlZC4KCQkJLy8gcmV3YXJkUGVyU2hhcmUgaXMgdGhlIGFtb3VudCBnYWluZWQgcGVyIHRva2VuIHRoYW5rcyB0byB0aGlzIGJ1eS1pbi4KCQkJdmFyIHJld2FyZFBlclNoYXJlID0gaG9sZGVyUmV3YXJkIC8gdG90YWxTdXBwbHk7CgkJCQoJCQkvLyBUaGUgRXRoZXIgdmFsdWUgcGVyIHRva2VuIGlzIGluY3JlYXNlZCBwcm9wb3J0aW9uYWxseS4KCQkJZWFybmluZ3NQZXJUb2tlbiArPSByZXdhcmRQZXJTaGFyZTsKCQl9CgkJCgkJLy8gQWRkIHRoZSBudW1Ub2tlbnMgd2hpY2ggd2VyZSBqdXN0IGNyZWF0ZWQgdG8gdGhlIHRvdGFsIHN1cHBseS4gV2UncmUgYSBjcnlwdG8gY2VudHJhbCBiYW5rIQoJCXRvdGFsU3VwcGx5ID0gYWRkKHRvdGFsU3VwcGx5LCBudW1Ub2tlbnMpOwoJCQoJCS8vIEFzc2lnbiB0aGUgdG9rZW5zIHRvIHRoZSBiYWxhbmNlIG9mIHRoZSBidXllci4KCQl0b2tlbkJhbGFuY2Vbc2VuZGVyXSA9IGFkZCh0b2tlbkJhbGFuY2Vbc2VuZGVyXSwgbnVtVG9rZW5zKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dCBhcnJheSBzbyB0aGF0IHRoZSBidXllciBjYW5ub3QgY2xhaW0gZGl2aWRlbmRzIG9uIHByZXZpb3VzIHB1cmNoYXNlcy4KCQkvLyBBbHNvIGluY2x1ZGUgdGhlIGZlZSBwYWlkIGZvciBlbnRlcmluZyB0aGUgc2NoZW1lLgoJCS8vIEZpcnN0IHdlIGNvbXB1dGUgaG93IG11Y2ggd2FzIGp1c3QgcGFpZCBvdXQgdG8gdGhlIGJ1eWVyLi4uCgkJdmFyIHBheW91dERpZmYgID0gKGludDI1NikgKChlYXJuaW5nc1BlclRva2VuICogbnVtVG9rZW5zKSAtIGJ1eWVyRmVlKTsKCQkKCQkvLyBUaGVuIHdlIHVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSBmb3IgdGhlIGJ1eWVyIHdpdGggdGhpcyBhbW91bnQuLi4KCQlwYXlvdXRzW3NlbmRlcl0gKz0gcGF5b3V0RGlmZjsKCQkKCQkvLyBBbmQgdGhlbiB3ZSBmaW5hbGx5IGFkZCBpdCB0byB0aGUgdmFyaWFibGUgdHJhY2tpbmcgdGhlIHRvdGFsIGFtb3VudCBzcGVudCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyAgICArPSBwYXlvdXREaWZmOwoJCQoJfQoKCS8vIFNlbGxzIHlvdXIgdG9rZW5zIGZvciBFdGhlci4gVGhpcyBFdGhlciBpcyBhc3NpZ25lZCB0byB0aGUgY2FsbGVycyBlbnRyeQoJLy8gaW4gdGhlIHRva2VuQmFsYW5jZSBhcnJheSwgYW5kIHRoZXJlZm9yZSBpcyBzaG93biBhcyBhIGRpdmlkZW5kLiBBIHNlY29uZAoJLy8gY2FsbCB0byB3aXRoZHJhdygpIG11c3QgYmUgbWFkZSB0byBpbnZva2UgdGhlIHRyYW5zZmVyIG9mIEV0aGVyIGJhY2sgdG8geW91ciBhZGRyZXNzLgoJZnVuY3Rpb24gc2VsbE15VG9rZW5zKCkgcHVibGljIHsKCQl2YXIgYmFsYW5jZSA9IGJhbGFuY2VPZihtc2cuc2VuZGVyKTsKCQlzZWxsKGJhbGFuY2UpOwoJfQoKCS8vIFRoZSBzbGFtLXRoZS1idXR0b24gZXNjYXBlIGhhdGNoLiBTZWxscyB0aGUgY2FsbGVycyB0b2tlbnMgZm9yIEV0aGVyLCB0aGVuIGltbWVkaWF0ZWx5CgkvLyBpbnZva2VzIHRoZSB3aXRoZHJhdygpIGZ1bmN0aW9uLCBzZW5kaW5nIHRoZSByZXN1bHRpbmcgRXRoZXIgdG8gdGhlIGNhbGxlcnMgYWRkcmVzcy4KICAgIGZ1bmN0aW9uIGdldE1lT3V0T2ZIZXJlKCkgcHVibGljIHsKCQlzZWxsTXlUb2tlbnMoKTsKICAgICAgICB3aXRoZHJhdygpOwoJfQoKCS8vIEdhdGVrZWVwZXIgZnVuY3Rpb24gdG8gY2hlY2sgaWYgdGhlIGFtb3VudCBvZiBFdGhlciBiZWluZyBzZW50IGlzbid0IGVpdGhlcgoJLy8gdG9vIHNtYWxsIG9yIHRvbyBsYXJnZS4gSWYgaXQgcGFzc2VzLCBnb2VzIGRpcmVjdCB0byBidXkoKS4KCWZ1bmN0aW9uIGZ1bmQoKSBwYXlhYmxlIHB1YmxpYyB7CgkJLy8gRG9uJ3QgYWxsb3cgZm9yIGZ1bmRpbmcgaWYgdGhlIGFtb3VudCBvZiBFdGhlciBzZW50IGlzIGxlc3MgdGhhbiAxIHN6YWJvLgoJCWlmIChtc2cudmFsdWUgPiAwLjAwMDAwMSBldGhlcikgewoJCSAgICBjb250cmFjdEJhbGFuY2UgPSBhZGQoY29udHJhY3RCYWxhbmNlLCBtc2cudmFsdWUpOwoJCQlidXkoKTsKCQl9IGVsc2UgewoJCQlyZXZlcnQoKTsKCQl9CiAgICB9CgoJLy8gRnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSAoZHluYW1pYykgcHJpY2Ugb2YgYnV5aW5nIGEgZmlubmV5IHdvcnRoIG9mIHRva2Vucy4KCWZ1bmN0aW9uIGJ1eVByaWNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKCQlyZXR1cm4gZ2V0VG9rZW5zRm9yRXRoZXIoMSBmaW5uZXkpOwoJfQoKCS8vIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgKGR5bmFtaWMpIHByaWNlIG9mIHNlbGxpbmcgYSBzaW5nbGUgdG9rZW4uCglmdW5jdGlvbiBzZWxsUHJpY2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHZhciBldGggPSBnZXRFdGhlckZvclRva2VucygxIGZpbm5leSk7CiAgICAgICAgdmFyIGZlZSA9IGRpdihldGgsIDEwKTsKICAgICAgICByZXR1cm4gZXRoIC0gZmVlOwogICAgfQoKCS8vIENhbGN1bGF0ZSB0aGUgY3VycmVudCBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjYWxsZXIgYWRkcmVzcy4gVGhpcyBpcyB0aGUgbmV0IHJlc3VsdAoJLy8gb2YgbXVsdGlwbHlpbmcgdGhlIG51bWJlciBvZiB0b2tlbnMgaGVsZCBieSB0aGVpciBjdXJyZW50IHZhbHVlIGluIEV0aGVyIGFuZCBzdWJ0cmFjdGluZyB0aGUKCS8vIEV0aGVyIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBwYWlkIG91dC4KCWZ1bmN0aW9uIGRpdmlkZW5kcyhhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW1vdW50KSB7CgkJcmV0dXJuICh1aW50MjU2KSAoKGludDI1NikoZWFybmluZ3NQZXJUb2tlbiAqIHRva2VuQmFsYW5jZVtfb3duZXJdKSAtIHBheW91dHNbX293bmVyXSkgLyBzY2FsZUZhY3RvcjsKCX0KCgkvLyBWZXJzaW9uIG9mIHdpdGhkcmF3IHRoYXQgZXh0cmFjdHMgdGhlIGRpdmlkZW5kcyBhbmQgc2VuZHMgdGhlIEV0aGVyIHRvIHRoZSBjYWxsZXIuCgkvLyBUaGlzIGlzIG9ubHkgdXNlZCBpbiB0aGUgY2FzZSB3aGVuIHRoZXJlIGlzIG5vIHRyYW5zYWN0aW9uIGRhdGEsIGFuZCB0aGF0IHNob3VsZCBiZQoJLy8gcXVpdGUgcmFyZSB1bmxlc3MgaW50ZXJhY3RpbmcgZGlyZWN0bHkgd2l0aCB0aGUgc21hcnQgY29udHJhY3QuCglmdW5jdGlvbiB3aXRoZHJhd09sZChhZGRyZXNzIHRvKSBwdWJsaWMgewoJCS8vIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhZGRyZXNzIHRoZSByZXF1ZXN0IGNhbWUgZnJvbS4KCQl2YXIgYmFsYW5jZSA9IGRpdmlkZW5kcyhtc2cuc2VuZGVyKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dHMgYXJyYXksIGluY3JlbWVudGluZyB0aGUgcmVxdWVzdCBhZGRyZXNzIGJ5IGBiYWxhbmNlYC4KCQlwYXlvdXRzW21zZy5zZW5kZXJdICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEluY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gU2VuZCB0aGUgZGl2aWRlbmRzIHRvIHRoZSBhZGRyZXNzIHRoYXQgcmVxdWVzdGVkIHRoZSB3aXRoZHJhdy4KCQljb250cmFjdEJhbGFuY2UgPSBzdWIoY29udHJhY3RCYWxhbmNlLCBiYWxhbmNlKTsKCQl0by50cmFuc2ZlcihiYWxhbmNlKTsJCQoJfQoKCS8vIEludGVybmFsIGJhbGFuY2UgZnVuY3Rpb24sIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBkeW5hbWljIHJlc2VydmUgdmFsdWUuCglmdW5jdGlvbiBiYWxhbmNlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBhbW91bnQpIHsKCQkvLyBtc2cudmFsdWUgaXMgdGhlIGFtb3VudCBvZiBFdGhlciBzZW50IGJ5IHRoZSB0cmFuc2FjdGlvbi4KCQlyZXR1cm4gY29udHJhY3RCYWxhbmNlIC0gbXNnLnZhbHVlOwoJfQoKCWZ1bmN0aW9uIGJ1eSgpIGludGVybmFsIHsKCQkvLyBBbnkgdHJhbnNhY3Rpb24gb2YgbGVzcyB0aGFuIDEgc3phYm8gaXMgbGlrZWx5IHRvIGJlIHdvcnRoIGxlc3MgdGhhbiB0aGUgZ2FzIHVzZWQgdG8gc2VuZCBpdC4KCQlpZiAobXNnLnZhbHVlIDwgMC4wMDAwMDEgZXRoZXIgfHwgbXNnLnZhbHVlID4gMTAwMDAwMCBldGhlcikKCQkJcmV2ZXJ0KCk7CgkJCQkJCQoJCS8vIG1zZy5zZW5kZXIgaXMgdGhlIGFkZHJlc3Mgb2YgdGhlIGNhbGxlci4KCQl2YXIgc2VuZGVyID0gbXNnLnNlbmRlcjsKCQkKCQkvLyAxMCUgb2YgdGhlIHRvdGFsIEV0aGVyIHNlbnQgaXMgdXNlZCB0byBwYXkgZXhpc3RpbmcgaG9sZGVycy4KCQl2YXIgZmVlID0gZGl2KG1zZy52YWx1ZSwgMTApOwoJCQoJCS8vIFRoZSBhbW91bnQgb2YgRXRoZXIgdXNlZCB0byBwdXJjaGFzZSBuZXcgdG9rZW5zIGZvciB0aGUgY2FsbGVyLgoJCXZhciBudW1FdGhlciA9IG1zZy52YWx1ZSAtIGZlZTsKCQkKCQkvLyBUaGUgbnVtYmVyIG9mIHRva2VucyB3aGljaCBjYW4gYmUgcHVyY2hhc2VkIGZvciBudW1FdGhlci4KCQl2YXIgbnVtVG9rZW5zID0gZ2V0VG9rZW5zRm9yRXRoZXIobnVtRXRoZXIpOwoJCQoJCS8vIFRoZSBidXllciBmZWUsIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgkJdmFyIGJ1eWVyRmVlID0gZmVlICogc2NhbGVGYWN0b3I7CgkJCgkJLy8gQ2hlY2sgdGhhdCB3ZSBoYXZlIHRva2VucyBpbiBleGlzdGVuY2UgKHRoaXMgc2hvdWxkIGFsd2F5cyBiZSB0cnVlKSwgb3IKCQkvLyBlbHNlIHlvdSdyZSBnb25uYSBoYXZlIGEgYmFkIHRpbWUuCgkJaWYgKHRvdGFsU3VwcGx5ID4gMCkgewoJCQkvLyBDb21wdXRlIHRoZSBib251cyBjby1lZmZpY2llbnQgZm9yIGFsbCBleGlzdGluZyBob2xkZXJzIGFuZCB0aGUgYnV5ZXIuCgkJCS8vIFRoZSBidXllciByZWNlaXZlcyBwYXJ0IG9mIHRoZSBkaXN0cmlidXRpb24gZm9yIGVhY2ggdG9rZW4gYm91Z2h0IGluIHRoZQoJCQkvLyBzYW1lIHdheSB0aGV5IHdvdWxkIGhhdmUgaWYgdGhleSBib3VnaHQgZWFjaCB0b2tlbiBpbmRpdmlkdWFsbHkuCgkJCXZhciBib251c0NvRWZmID0KCQkJICAgIChzY2FsZUZhY3RvciAtIChyZXNlcnZlKCkgKyBudW1FdGhlcikgKiBudW1Ub2tlbnMgKiBzY2FsZUZhY3RvciAvICh0b3RhbFN1cHBseSArIG51bVRva2VucykgLyBudW1FdGhlcikKCQkJICAgICogKHVpbnQpKGNycl9kKSAvICh1aW50KShjcnJfZC1jcnJfbik7CgkJCQkKCQkJLy8gVGhlIHRvdGFsIHJld2FyZCB0byBiZSBkaXN0cmlidXRlZCBhbW9uZ3N0IHRoZSBtYXNzZXMgaXMgdGhlIGZlZSAoaW4gRXRoZXIpCgkJCS8vIG11bHRpcGxpZWQgYnkgdGhlIGJvbnVzIGNvLWVmZmljaWVudC4KCQkJdmFyIGhvbGRlclJld2FyZCA9IGZlZSAqIGJvbnVzQ29FZmY7CgkJCQoJCQlidXllckZlZSAtPSBob2xkZXJSZXdhcmQ7CgoJCQkvLyBGZWUgaXMgZGlzdHJpYnV0ZWQgdG8gYWxsIGV4aXN0aW5nIHRva2VuIGhvbGRlcnMgYmVmb3JlIHRoZSBuZXcgdG9rZW5zIGFyZSBwdXJjaGFzZWQuCgkJCS8vIHJld2FyZFBlclNoYXJlIGlzIHRoZSBhbW91bnQgZ2FpbmVkIHBlciB0b2tlbiB0aGFua3MgdG8gdGhpcyBidXktaW4uCgkJCXZhciByZXdhcmRQZXJTaGFyZSA9IGhvbGRlclJld2FyZCAvIHRvdGFsU3VwcGx5OwoJCQkKCQkJLy8gVGhlIEV0aGVyIHZhbHVlIHBlciB0b2tlbiBpcyBpbmNyZWFzZWQgcHJvcG9ydGlvbmFsbHkuCgkJCWVhcm5pbmdzUGVyVG9rZW4gKz0gcmV3YXJkUGVyU2hhcmU7CgkJCQoJCX0KCgkJLy8gQWRkIHRoZSBudW1Ub2tlbnMgd2hpY2ggd2VyZSBqdXN0IGNyZWF0ZWQgdG8gdGhlIHRvdGFsIHN1cHBseS4gV2UncmUgYSBjcnlwdG8gY2VudHJhbCBiYW5rIQoJCXRvdGFsU3VwcGx5ID0gYWRkKHRvdGFsU3VwcGx5LCBudW1Ub2tlbnMpOwoKCQkvLyBBc3NpZ24gdGhlIHRva2VucyB0byB0aGUgYmFsYW5jZSBvZiB0aGUgYnV5ZXIuCgkJdG9rZW5CYWxhbmNlW3NlbmRlcl0gPSBhZGQodG9rZW5CYWxhbmNlW3NlbmRlcl0sIG51bVRva2Vucyk7CgoJCS8vIFVwZGF0ZSB0aGUgcGF5b3V0IGFycmF5IHNvIHRoYXQgdGhlIGJ1eWVyIGNhbm5vdCBjbGFpbSBkaXZpZGVuZHMgb24gcHJldmlvdXMgcHVyY2hhc2VzLgoJCS8vIEFsc28gaW5jbHVkZSB0aGUgZmVlIHBhaWQgZm9yIGVudGVyaW5nIHRoZSBzY2hlbWUuCgkJLy8gRmlyc3Qgd2UgY29tcHV0ZSBob3cgbXVjaCB3YXMganVzdCBwYWlkIG91dCB0byB0aGUgYnV5ZXIuLi4KCQl2YXIgcGF5b3V0RGlmZiA9IChpbnQyNTYpICgoZWFybmluZ3NQZXJUb2tlbiAqIG51bVRva2VucykgLSBidXllckZlZSk7CgkJCgkJLy8gVGhlbiB3ZSB1cGRhdGUgdGhlIHBheW91dHMgYXJyYXkgZm9yIHRoZSBidXllciB3aXRoIHRoaXMgYW1vdW50Li4uCgkJcGF5b3V0c1tzZW5kZXJdICs9IHBheW91dERpZmY7CgkJCgkJLy8gQW5kIHRoZW4gd2UgZmluYWxseSBhZGQgaXQgdG8gdGhlIHZhcmlhYmxlIHRyYWNraW5nIHRoZSB0b3RhbCBhbW91bnQgc3BlbnQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgICAgKz0gcGF5b3V0RGlmZjsKCQkKCX0KCgkvLyBTZWxsIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdG9rZW5zIGFuZCBjb252ZXJ0cyB0aGVtIGludG8gRXRoZXIuIEFsc28gY29tZXMgd2l0aCBhIDEwJSBmZWUKCS8vIHRvIGRpc2NvdXJhZ2luZyBkdW1waW5nLCBhbmQgbWVhbnMgdGhhdCBpZiBzb21lb25lIG5lYXIgdGhlIHRvcCBzZWxscywgdGhlIGZlZSBkaXN0cmlidXRlZAoJLy8gd2lsbCBiZSAqc2lnbmlmaWNhbnQqLgoJZnVuY3Rpb24gc2VsbCh1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgewoJICAgIC8vIENhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIEV0aGVyIHRoYXQgdGhlIGhvbGRlcnMgdG9rZW5zIHNlbGwgZm9yIGF0IHRoZSBjdXJyZW50IHNlbGwgcHJpY2UuCgkJdmFyIG51bUV0aGVyc0JlZm9yZUZlZSA9IGdldEV0aGVyRm9yVG9rZW5zKGFtb3VudCk7CgkJCgkJLy8gMTAlIG9mIHRoZSByZXN1bHRpbmcgRXRoZXIgaXMgdXNlZCB0byBwYXkgcmVtYWluaW5nIGhvbGRlcnMuCiAgICAgICAgdmFyIGZlZSA9IGRpdihudW1FdGhlcnNCZWZvcmVGZWUsIDEwKTsKCQkKCQkvLyBOZXQgRXRoZXIgZm9yIHRoZSBzZWxsZXIgYWZ0ZXIgdGhlIGZlZSBoYXMgYmVlbiBzdWJ0cmFjdGVkLgogICAgICAgIHZhciBudW1FdGhlcnMgPSBudW1FdGhlcnNCZWZvcmVGZWUgLSBmZWU7CgkJCgkJLy8gKlJlbW92ZSogdGhlIG51bVRva2VucyB3aGljaCB3ZXJlIGp1c3Qgc29sZCBmcm9tIHRoZSB0b3RhbCBzdXBwbHkuIFdlJ3JlIC9kZWZpbml0ZWx5LyBhIGNyeXB0byBjZW50cmFsIGJhbmsuCgkJdG90YWxTdXBwbHkgPSBzdWIodG90YWxTdXBwbHksIGFtb3VudCk7CgkJCiAgICAgICAgLy8gUmVtb3ZlIHRoZSB0b2tlbnMgZnJvbSB0aGUgYmFsYW5jZSBvZiB0aGUgYnV5ZXIuCgkJdG9rZW5CYWxhbmNlW21zZy5zZW5kZXJdID0gc3ViKHRva2VuQmFsYW5jZVttc2cuc2VuZGVyXSwgYW1vdW50KTsKCiAgICAgICAgLy8gVXBkYXRlIHRoZSBwYXlvdXQgYXJyYXkgc28gdGhhdCB0aGUgc2VsbGVyIGNhbm5vdCBjbGFpbSBmdXR1cmUgZGl2aWRlbmRzIHVubGVzcyB0aGV5IGJ1eSBiYWNrIGluLgoJCS8vIEZpcnN0IHdlIGNvbXB1dGUgaG93IG11Y2ggd2FzIGp1c3QgcGFpZCBvdXQgdG8gdGhlIHNlbGxlci4uLgoJCXZhciBwYXlvdXREaWZmID0gKGludDI1NikgKGVhcm5pbmdzUGVyVG9rZW4gKiBhbW91bnQgKyAobnVtRXRoZXJzICogc2NhbGVGYWN0b3IpKTsKCQkKICAgICAgICAvLyBXZSByZWR1Y2UgdGhlIGFtb3VudCBwYWlkIG91dCB0byB0aGUgc2VsbGVyICh0aGlzIGVmZmVjdGl2ZWx5IHJlc2V0cyB0aGVpciBwYXlvdXRzIHZhbHVlIHRvIHplcm8sCgkJLy8gc2luY2UgdGhleSdyZSBzZWxsaW5nIGFsbCBvZiB0aGVpciB0b2tlbnMpLiBUaGlzIG1ha2VzIHN1cmUgdGhlIHNlbGxlciBpc24ndCBkaXNhZHZhbnRhZ2VkIGlmCgkJLy8gdGhleSBkZWNpZGUgdG8gYnV5IGJhY2sgaW4uCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSAtPSBwYXlvdXREaWZmOwkJCgkJCgkJLy8gRGVjcmVhc2UgdGhlIHRvdGFsIGFtb3VudCB0aGF0J3MgYmVlbiBwYWlkIG91dCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgogICAgICAgIHRvdGFsUGF5b3V0cyAtPSBwYXlvdXREaWZmOwoJCQoJCS8vIENoZWNrIHRoYXQgd2UgaGF2ZSB0b2tlbnMgaW4gZXhpc3RlbmNlICh0aGlzIGlzIGEgYml0IG9mIGFuIGlycmVsZXZhbnQgY2hlY2sgc2luY2Ugd2UncmUKCQkvLyBzZWxsaW5nIHRva2VucywgYnV0IGl0IGd1YXJkcyBhZ2FpbnN0IGRpdmlzaW9uIGJ5IHplcm8pLgoJCWlmICh0b3RhbFN1cHBseSA+IDApIHsKCQkJLy8gU2NhbGUgdGhlIEV0aGVyIHRha2VuIGFzIHRoZSBzZWxsaW5nIGZlZSBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgkJCXZhciBldGhlckZlZSA9IGZlZSAqIHNjYWxlRmFjdG9yOwoJCQkKCQkJLy8gRmVlIGlzIGRpc3RyaWJ1dGVkIHRvIGFsbCByZW1haW5pbmcgdG9rZW4gaG9sZGVycy4KCQkJLy8gcmV3YXJkUGVyU2hhcmUgaXMgdGhlIGFtb3VudCBnYWluZWQgcGVyIHRva2VuIHRoYW5rcyB0byB0aGlzIHNlbGwuCgkJCXZhciByZXdhcmRQZXJTaGFyZSA9IGV0aGVyRmVlIC8gdG90YWxTdXBwbHk7CgkJCQoJCQkvLyBUaGUgRXRoZXIgdmFsdWUgcGVyIHRva2VuIGlzIGluY3JlYXNlZCBwcm9wb3J0aW9uYWxseS4KCQkJZWFybmluZ3NQZXJUb2tlbiA9IGFkZChlYXJuaW5nc1BlclRva2VuLCByZXdhcmRQZXJTaGFyZSk7CgkJfQoJfQoJCgkvLyBEeW5hbWljIHZhbHVlIG9mIEV0aGVyIGluIHJlc2VydmUsIGFjY29yZGluZyB0byB0aGUgQ1JSIHJlcXVpcmVtZW50LgoJZnVuY3Rpb24gcmVzZXJ2ZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW1vdW50KSB7CgkJcmV0dXJuIHN1YihiYWxhbmNlKCksCgkJCSAoKHVpbnQyNTYpICgoaW50MjU2KSAoZWFybmluZ3NQZXJUb2tlbiAqIHRvdGFsU3VwcGx5KSAtIHRvdGFsUGF5b3V0cykgLyBzY2FsZUZhY3RvcikpOwoJfQoKCS8vIENhbGN1bGF0ZXMgdGhlIG51bWJlciBvZiB0b2tlbnMgdGhhdCBjYW4gYmUgYm91Z2h0IGZvciBhIGdpdmVuIGFtb3VudCBvZiBFdGhlciwgYWNjb3JkaW5nIHRvIHRoZQoJLy8gZHluYW1pYyByZXNlcnZlIGFuZCB0b3RhbFN1cHBseSB2YWx1ZXMgKGRlcml2ZWQgZnJvbSB0aGUgYnV5IGFuZCBzZWxsIHByaWNlcykuCglmdW5jdGlvbiBnZXRUb2tlbnNGb3JFdGhlcih1aW50MjU2IGV0aGVydmFsdWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2VucykgewoJCXJldHVybiBzdWIoZml4ZWRFeHAoZml4ZWRMb2cocmVzZXJ2ZSgpICsgZXRoZXJ2YWx1ZSkqY3JyX24vY3JyX2QgKyBwcmljZV9jb2VmZiksIHRvdGFsU3VwcGx5KTsKCX0KCgkvLyBTZW1hbnRpY2FsbHkgc2ltaWxhciB0byBnZXRUb2tlbnNGb3JFdGhlciwgYnV0IHN1YnRyYWN0cyB0aGUgY2FsbGVycyBiYWxhbmNlIGZyb20gdGhlIGFtb3VudCBvZiBFdGhlciByZXR1cm5lZCBmb3IgY29udmVyc2lvbi4KCWZ1bmN0aW9uIGNhbGN1bGF0ZURpdmlkZW5kVG9rZW5zKHVpbnQyNTYgZXRoZXJ2YWx1ZSwgdWludDI1NiBzdWJ2YWx1ZSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG9rZW5zKSB7CgkJcmV0dXJuIHN1YihmaXhlZEV4cChmaXhlZExvZyhyZXNlcnZlKCkgLSBzdWJ2YWx1ZSArIGV0aGVydmFsdWUpKmNycl9uL2Nycl9kICsgcHJpY2VfY29lZmYpLCB0b3RhbFN1cHBseSk7Cgl9CgoJLy8gQ29udmVydHMgYSBudW1iZXIgdG9rZW5zIGludG8gYW4gRXRoZXIgdmFsdWUuCglmdW5jdGlvbiBnZXRFdGhlckZvclRva2Vucyh1aW50MjU2IHRva2VucykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgZXRoZXJ2YWx1ZSkgewoJCS8vIEhvdyBtdWNoIHJlc2VydmUgRXRoZXIgZG8gd2UgaGF2ZSBsZWZ0IGluIHRoZSBjb250cmFjdD8KCQl2YXIgcmVzZXJ2ZUFtb3VudCA9IHJlc2VydmUoKTsKCgkJLy8gSWYgeW91J3JlIHRoZSBIaWdobGFuZGVyIChvciBiYWdob2xkZXIpLCB5b3UgZ2V0IFRoZSBQcml6ZS4gRXZlcnl0aGluZyBsZWZ0IGluIHRoZSB2YXVsdC4KCQlpZiAodG9rZW5zID09IHRvdGFsU3VwcGx5KQoJCQlyZXR1cm4gcmVzZXJ2ZUFtb3VudDsKCgkJLy8gSWYgdGhlcmUgd291bGQgYmUgZXhjZXNzIEV0aGVyIGxlZnQgYWZ0ZXIgdGhlIHRyYW5zYWN0aW9uIHRoaXMgaXMgY2FsbGVkIHdpdGhpbiwgcmV0dXJuIHRoZSBFdGhlcgoJCS8vIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGVxdWF0aW9uIGluIERyIEpvY2hlbiBIb2VuaWNrZSdzIG9yaWdpbmFsIFBvbnppIHBhcGVyLCB3aGljaCBjYW4gYmUgZm91bmQKCQkvLyBhdCBodHRwczovL3Rlc3Quam9jaGVuLWhvZW5pY2tlLmRlL2V0aC9wb256aXRva2VuLyBpbiB0aGUgdGhpcmQgZXF1YXRpb24sIHdpdGggdGhlIENSUiBudW1lcmF0b3IgCgkJLy8gYW5kIGRlbm9taW5hdG9yIGFsdGVyZWQgdG8gMSBhbmQgMiByZXNwZWN0aXZlbHkuCgkJcmV0dXJuIHN1YihyZXNlcnZlQW1vdW50LCBmaXhlZEV4cCgoZml4ZWRMb2codG90YWxTdXBwbHkgLSB0b2tlbnMpIC0gcHJpY2VfY29lZmYpICogY3JyX2QvY3JyX24pKTsKCX0KCgkvLyBZb3UgZG9uJ3QgY2FyZSBhYm91dCB0aGVzZSwgYnV0IGlmIHlvdSByZWFsbHkgZG8gdGhleSdyZSBoZXggdmFsdWVzIGZvciAKCS8vIGNvLWVmZmljaWVudHMgdXNlZCB0byBzaW11bGF0ZSBhcHByb3hpbWF0aW9ucyBvZiB0aGUgbG9nIGFuZCBleHAgZnVuY3Rpb25zLgoJaW50MjU2ICBjb25zdGFudCBvbmUgICAgICAgID0gMHgxMDAwMDAwMDAwMDAwMDAwMDsKCXVpbnQyNTYgY29uc3RhbnQgc3FydDIgICAgICA9IDB4MTZhMDllNjY3ZjNiY2M5MDg7Cgl1aW50MjU2IGNvbnN0YW50IHNxcnRkb3Q1ICAgPSAweDBiNTA0ZjMzM2Y5ZGU2NDg0OwoJaW50MjU2ICBjb25zdGFudCBsbjIgICAgICAgID0gMHgwYjE3MjE3ZjdkMWNmNzlhYzsKCWludDI1NiAgY29uc3RhbnQgbG4yXzY0ZG90NSA9IDB4MmNiNTNmMDlmMDVjYzYyN2M4OwoJaW50MjU2ICBjb25zdGFudCBjMSAgICAgICAgID0gMHgxZmZmZmZmZmZmZjlkYWM5YjsKCWludDI1NiAgY29uc3RhbnQgYzMgICAgICAgICA9IDB4MGFhYWFhYWFjMTY4Nzc5MDg7CglpbnQyNTYgIGNvbnN0YW50IGM1ICAgICAgICAgPSAweDA2NjY2NjRlNWU5ZmEwYzk5OwoJaW50MjU2ICBjb25zdGFudCBjNyAgICAgICAgID0gMHgwNDkyNTQwMjZhNzYzMGFjZjsKCWludDI1NiAgY29uc3RhbnQgYzkgICAgICAgICA9IDB4MDM4YmQ3NWVkMzc3NTNkNjg7CglpbnQyNTYgIGNvbnN0YW50IGMxMSAgICAgICAgPSAweDAzMjg0YTBjMTQ2MTA5MjRmOwoKCS8vIFRoZSBwb2x5bm9taWFsIFIgPSBjMSp4ICsgYzMqeF4zICsgLi4uICsgYzExICogeF4xMQoJLy8gYXBwcm94aW1hdGVzIHRoZSBmdW5jdGlvbiBsb2coMSt4KS1sb2coMS14KQoJLy8gSGVuY2UgUihzKSA9IGxvZygoMStzKS8oMS1zKSkgPSBsb2coYSkKCWZ1bmN0aW9uIGZpeGVkTG9nKHVpbnQyNTYgYSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zIChpbnQyNTYgbG9nKSB7CgkJaW50MzIgc2NhbGUgPSAwOwoJCXdoaWxlIChhID4gc3FydDIpIHsKCQkJYSAvPSAyOwoJCQlzY2FsZSsrOwoJCX0KCQl3aGlsZSAoYSA8PSBzcXJ0ZG90NSkgewoJCQlhICo9IDI7CgkJCXNjYWxlLS07CgkJfQoJCWludDI1NiBzID0gKCgoaW50MjU2KShhKSAtIG9uZSkgKiBvbmUpIC8gKChpbnQyNTYpKGEpICsgb25lKTsKCQl2YXIgeiA9IChzKnMpIC8gb25lOwoJCXJldHVybiBzY2FsZSAqIGxuMiArCgkJCShzKihjMSArICh6KihjMyArICh6KihjNSArICh6KihjNyArICh6KihjOSArICh6KmMxMS9vbmUpKQoJCQkJL29uZSkpL29uZSkpL29uZSkpL29uZSkpL29uZSk7Cgl9CgoJaW50MjU2IGNvbnN0YW50IGMyID0gIDB4MDJhYWFhYWFhYWEwMTVkYjA7CglpbnQyNTYgY29uc3RhbnQgYzQgPSAtMHgwMDBiNjBiNjA4MDgzOTlkMTsKCWludDI1NiBjb25zdGFudCBjNiA9ICAweDAwMDA0NTU5NTZiY2NkZDA2OwoJaW50MjU2IGNvbnN0YW50IGM4ID0gLTB4MDAwMDAxYjg5M2FkMDRiM2E7CgkKCS8vIFRoZSBwb2x5bm9taWFsIFIgPSAyICsgYzIqeF4yICsgYzQqeF40ICsgLi4uCgkvLyBhcHByb3hpbWF0ZXMgdGhlIGZ1bmN0aW9uIHgqKGV4cCh4KSsxKS8oZXhwKHgpLTEpCgkvLyBIZW5jZSBleHAoeCkgPSAoUih4KSt4KS8oUih4KS14KQoJZnVuY3Rpb24gZml4ZWRFeHAoaW50MjU2IGEpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NiBleHApIHsKCQlpbnQyNTYgc2NhbGUgPSAoYSArIChsbjJfNjRkb3Q1KSkgLyBsbjIgLSA2NDsKCQlhIC09IHNjYWxlKmxuMjsKCQlpbnQyNTYgeiA9IChhKmEpIC8gb25lOwoJCWludDI1NiBSID0gKChpbnQyNTYpKDIpICogb25lKSArCgkJCSh6KihjMiArICh6KihjNCArICh6KihjNiArICh6KmM4L29uZSkpL29uZSkpL29uZSkpL29uZSk7CgkJZXhwID0gKHVpbnQyNTYpICgoKFIgKyBhKSAqIG9uZSkgLyAoUiAtIGEpKTsKCQlpZiAoc2NhbGUgPj0gMCkKCQkJZXhwIDw8PSBzY2FsZTsKCQllbHNlCgkJCWV4cCA+Pj0gLXNjYWxlOwoJCXJldHVybiBleHA7Cgl9CgkKCS8vIFRoZSBiZWxvdyBhcmUgc2FmZW1hdGggaW1wbGVtZW50YXRpb25zIG9mIHRoZSBmb3VyIGFyaXRobWV0aWMgb3BlcmF0b3JzCgkvLyBkZXNpZ25lZCB0byBleHBsaWNpdGx5IHByZXZlbnQgb3Zlci0gYW5kIHVuZGVyLWZsb3dzIG9mIGludGVnZXIgdmFsdWVzLgoKCWZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CgkJaWYgKGEgPT0gMCkgewoJCQlyZXR1cm4gMDsKCQl9CgkJdWludDI1NiBjID0gYSAqIGI7CgkJYXNzZXJ0KGMgLyBhID09IGIpOwoJCXJldHVybiBjOwoJfQoKCWZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CgkJLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCgkJdWludDI1NiBjID0gYSAvIGI7CgkJLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKCQlyZXR1cm4gYzsKCX0KCglmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCWFzc2VydChiIDw9IGEpOwoJCXJldHVybiBhIC0gYjsKCX0KCglmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCXVpbnQyNTYgYyA9IGEgKyBiOwoJCWFzc2VydChjID49IGEpOwoJCXJldHVybiBjOwoJfQoKCS8vIFRoaXMgYWxsb3dzIHlvdSB0byBidXkgdG9rZW5zIGJ5IHNlbmRpbmcgRXRoZXIgZGlyZWN0bHkgdG8gdGhlIHNtYXJ0IGNvbnRyYWN0CgkvLyB3aXRob3V0IGluY2x1ZGluZyBhbnkgdHJhbnNhY3Rpb24gZGF0YSAodXNlZnVsIGZvciwgc2F5LCBtb2JpbGUgd2FsbGV0IGFwcHMpLgoJZnVuY3Rpb24gKCkgcGF5YWJsZSBwdWJsaWMgewoJCS8vIG1zZy52YWx1ZSBpcyB0aGUgYW1vdW50IG9mIEV0aGVyIHNlbnQgYnkgdGhlIHRyYW5zYWN0aW9uLgoJCWlmIChtc2cudmFsdWUgPiAwKSB7CgkJCWZ1bmQoKTsKCQl9IGVsc2UgewoJCQl3aXRoZHJhd09sZChtc2cuc2VuZGVyKTsKCQl9Cgl9Cn0='.
	

]
