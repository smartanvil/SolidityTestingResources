Class {
	#name : #SRT26d13bc704eeac5302ee27751d7873562d215a91,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT26d13bc704eeac5302ee27751d7873562d215a91 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7Ci8vCi8qIENPTlRSQUNUICovCgpjb250cmFjdCBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgYykgewogICAgICAgIGMgPSBhICsgYjsKICAgICAgICByZXF1aXJlKGMgPj0gYSk7CiAgICB9CiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgYykgewogICAgICAgIHJlcXVpcmUoYiA8PSBhKTsKICAgICAgICBjID0gYSAtIGI7CiAgICB9CiAgICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgYykgewogICAgICAgIGMgPSBhICogYjsKICAgICAgICByZXF1aXJlKGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIH0KICAgIGZ1bmN0aW9uIHNhZmVEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgcmVxdWlyZShiID4gMCk7CiAgICAgICAgYyA9IGEgLyBiOwogICAgfQp9Ci8vIEVORF9PRl9jb250cmFjdF9TYWZlTWF0aAovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLwovKiBJTlRFUkZBQ0VTICovCi8vCmludGVyZmFjZSB0b2tlblJlY2lwaWVudCB7CgkKCWZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF90b2tlbkFtb3VudEFwcHJvdmVkLCBhZGRyZXNzIHRva2VuTWFjcm9hbnN5LCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpOyAKfSAgIAovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCi8vCiAgICBpbnRlcmZhY2UgSUNPIHsKCiAgICAgICAgZnVuY3Rpb24gYnV5KCB1aW50IHBheW1lbnQsIGFkZHJlc3MgYnV5ZXIsIGJvb2wgaXNQcmV2aWV3KSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MsIHVpbnQgYW1vdW50LCB1aW50IHJldFBheW1lbnQpOwogICAgICAgIGZ1bmN0aW9uIHJlZGVlbUNvaW4odWludDI1NiBhbW91bnQsIGFkZHJlc3MgcmVkZWVtZXIsIGJvb2wgaXNQcmV2aWV3KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzLCB1aW50IHJlZGVlbVBheW1lbnQpOwogICAgICAgIGZ1bmN0aW9uIHNlbGwodWludDI1NiBhbW91bnQsIGFkZHJlc3Mgc2VsbGVyLCBib29sIGlzUHJldmlldykgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcywgdWludCBzZWxsUGF5bWVudCApOwogICAgICAgIGZ1bmN0aW9uIHBheW1lbnRBY3Rpb24odWludCBwYXltZW50VmFsdWUsIGFkZHJlc3MgYmVuZWZpY2lhcnksIHVpbnQgcGF5dHlwZSkgcHVibGljIHJldHVybnMoYm9vbCBzdWNjZXNzKTsKCiAgICAgICAgZnVuY3Rpb24gcmVjdlNocklDTyggYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIHVpbnQgU2hySUQpICBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgICAgICBmdW5jdGlvbiBidXJuKCB1aW50MjU2IHZhbHVlLCBib29sIHVuYnVybiwgdWludCB0b3RhbFN1cHBseVN0YXJ0LCB1aW50IGJhbE9mT3duZXIpICBwdWJsaWMgcmV0dXJucyggYm9vbCBzdWNjZXNzKTsKCiAgICAgICAgZnVuY3Rpb24gZ2V0U0NGKCkgcHVibGljIHJldHVybnModWludCBzZXJpZXNDYXBGYWN0b3JNdWxCeVRlblBvd2VyRWlnaHRlZW4pOwogICAgICAgIGZ1bmN0aW9uIGdldE1pbkJhbCgpIHB1YmxpYyByZXR1cm5zKHVpbnQgbWluQmFsRm9yQWNjbnRzXyApOwogICAgICAgIGZ1bmN0aW9uIGdldEF2bFNoYXJlcyhib29sIHNob3cpIHB1YmxpYyAgcmV0dXJucyh1aW50IHRvdGFsU3VwcGx5T2ZDb2luc0luU2VyaWVzTm93LCB1aW50IGNvaW5zQXZhaWxhYmxlRm9yU2FsZSwgdWludCBpY29GdW5kaW5nKTsKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KICAgIGludGVyZmFjZSBFeGNoZ3sKICAgICAgICAKICAgICAgICBmdW5jdGlvbiBzZWxsX0V4Y2hnX1JlZyggdWludCBhbW50VGtucywgdWludCB0a25QcmljZSwgYWRkcmVzcyBzZWxsZXIpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2Vzcyk7CiAgICAgICAgZnVuY3Rpb24gYnV5X0V4Y2hnX2Jvb2tpbmcoIGFkZHJlc3Mgc2VsbGVyLCB1aW50IGFtbnRUa25zLCB1aW50IHRrblByaWNlLCBhZGRyZXNzIGJ1eWVyLCB1aW50IHBheW1lbnQgKSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpOwogICAgICAgIGZ1bmN0aW9uIGJ1eV9FeGNoZ19Ca2dDaGsoIGFkZHJlc3Mgc2VsbGVyLCB1aW50IGFtbnRUa25zLCB1aW50IHRrblByaWNlLCBhZGRyZXNzIGJ1eWVyLCB1aW50IHBheW1lbnQpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2Vzcyk7CiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsbGVyKCBhZGRyZXNzIHNlbGxlciwgdWludCB0a25zQXByLCBhZGRyZXNzIGJ1eWVyLCB1aW50IHBheW1lbnQpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2Vzcyk7ICAKCiAgICAgICAgZnVuY3Rpb24gZ2V0RXhjaGdDb21pc25NdWxCeVRob3VzYW5kKCkgcHVibGljIHJldHVybnModWludCBleGNoZ0NvbW1pc3Npb25NdWxCeVRob3VzYW5kXyk7ICAKCiAgCSAgICBmdW5jdGlvbiB2aWV3U2VsbE9mZmVyc0F0RXhjaGFuZ2VNYWNyb2Fuc3koYWRkcmVzcyBzZWxsZXIsIGJvb2wgc2hvdykgdmlldyBwdWJsaWMgcmV0dXJucyAodWludCBzZWxsZXJzQ29pbkFtb3VudE9mZmVyLCB1aW50IHNlbGxlcnNQcmljZU9mT25lQ29pbkluV0VJLCB1aW50IHNlbGxlckJvb2tlZFRpbWUsIGFkZHJlc3MgYnV5ZXJXaG9Cb29rZWQsIHVpbnQgYnV5UGF5bWVudEJvb2tlZCwgdWludCBidXllckJvb2tlZFRpbWUsIHVpbnQgZXhjaGdDb21taXNzaW9uTXVsQnlUaG91c2FuZF8pOwoKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KLy8gRVJDIFRva2VuIFN0YW5kYXJkICMyMCBJbnRlcmZhY2UKLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvYmxvYi9tYXN0ZXIvRUlQUy9laXAtMjAtdG9rZW4tc3RhbmRhcmQubWQKCi8qIENPTlRSQUNUICovCi8vCiAgICBjb250cmFjdCBUb2tlbkVSQzIwSW50ZXJmYWNlIHsKCiAgICAgICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBjb2luTGlmZVRpbWVUb3RhbFN1cHBseSk7CiAgICAgICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgdG9rZW5Pd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgY29pbkJhbGFuY2UpOwogICAgICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIHRva2VuT3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgY29pbnNSZW1haW5pbmcpOwogICAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdG9rZW5zKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgICAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB0b2tlbnMpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIHRvLCB1aW50IHRva2VucykgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICAgICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdG9rZW5zKTsKICAgICAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgdG9rZW5Pd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdG9rZW5zKTsKICAgIH0KLy9FTkRfT0ZfY29udHJhY3RfRVJDMjBJbnRlcmZhY2UgCi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLyogQ09OVFJBQ1QgKi8KLyoqCiogQ09QWVJJR0hUIE1hY3JvYW5zeSAKKiBodHRwOi8vd3d3Lm1hY3JvYW5zeS5vcmcKKi8KY29udHJhY3QgVG9rZW5NYWNyb2Fuc3lQb3dlciBpcyBUb2tlbkVSQzIwSW50ZXJmYWNlLCBTYWZlTWF0aCB7IAogICAgCiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDM7CiAgICAvLwogICAgYWRkcmVzcyBpbnRlcm5hbCBvd25lcjsgCiAgICBhZGRyZXNzIHByaXZhdGUgIGJlbmVmaWNpYXJ5RnVuZHM7CiAgICAvLwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICB1aW50MjU2IGludGVybmFsIHRvdGFsU3VwcGx5U3RhcnQ7CiAgICAvLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwogICAgbWFwcGluZyggYWRkcmVzcyA9PiBib29sKSBpbnRlcm5hbCBmcm96ZW5BY2NvdW50OwogICAgLy8KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwcml2YXRlIG1zZ1NuZHI7CiAgICAvLwogICAgYWRkcmVzcyBpbnRlcm5hbCB0a25fYWRkcjsgYWRkcmVzcyBpbnRlcm5hbCBpY29fYWRkcjsgYWRkcmVzcyBpbnRlcm5hbCBleGNoZ19hZGRyOwogICAgYWRkcmVzcyBpbnRlcm5hbCBjc19hZGRyOyAgCiAgICAvLwogICAgdWludDI1NiBpbnRlcm5hbCBhbGxvd2VkSW5kaXZpZHVhbFNoYXJlOwogICAgdWludDI1NiBpbnRlcm5hbCBhbGxvd2VkUHVibGljU2hhcmU7CiAgICAvLwogICAgYm9vbCBwdWJsaWMgY3Jvd2RTYWxlT3BlbjsKLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsgICAgCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgdG9rZW5Pd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdG9rZW5zKTsKICAgIGV2ZW50IEJ1cm5PclVuQnVybihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludCBhbW91bnQsIHVpbnQgYnVybk9yVW5idXJuKTsKICAgIGV2ZW50IEZ1bmRPclBheW1lbnRUcmFuc2ZlcihhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50IGFtb3VudCk7IAogICAgLy8gZXZlbnQgRnJvemVuRnVuZHMoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJvemVuKTsKICAgIC8vZXZlbnQgQnV5QXRNYWNyb2Fuc3lFeGNoZyhhZGRyZXNzIGJ1eWVyLCBhZGRyZXNzIHNlbGxlciwgdWludCB0b2tlbkFtb3VudCwgdWludCBwYXltZW50KTsKLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KLy9DT05TVFJVQ1RPUgogICAgLyogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0IAogICAgKi8KICAgIGZ1bmN0aW9uIFRva2VuTWFjcm9hbnN5UG93ZXIoKSAgcHVibGljIHsKICAgICAgICAKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYmVuZWZpY2lhcnlGdW5kcyA9IG93bmVyOyAKICAgICAgICB0b3RhbFN1cHBseVN0YXJ0ID0gMjcwMDAwMDAwICogMTAqKiB1aW50MjU2KGRlY2ltYWxzKTsgICAgIAogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHlTdGFydDsgCiAgICAgICAgLy8KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSB0b3RhbFN1cHBseVN0YXJ0OyAgICAKICAgICAgICBUcmFuc2ZlcihhZGRyZXNzKDApLCBtc2cuc2VuZGVyLCB0b3RhbFN1cHBseVN0YXJ0KTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgCiAgICAgICAgbmFtZSA9ICJUb2tlbk1hY3JvYW5zeVBvd2VyIjsgIAogICAgICAgIHN5bWJvbCA9ICIkQkVFUG93ZXIiOwogICAgICAgIC8vICAKICAgICAgICBhbGxvd2VkSW5kaXZpZHVhbFNoYXJlID0gdWludCgxKSp0b3RhbFN1cHBseVN0YXJ0LzEwMDsgCiAgICAgICAgYWxsb3dlZFB1YmxpY1NoYXJlID0gdWludCgyMCkqIHRvdGFsU3VwcGx5U3RhcnQvMTAwOyAgICAgCiAgICAgICAgLy8KICAgICAgICBjcm93ZFNhbGVPcGVuID0gZmFsc2U7CiAgICB9IAovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfSAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3IoYWRkcmVzcyBfT3IpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIG93bmVyID0gX09yOwogICAgfSAgICAgICAgICAKLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KICAgLyoqCiAgICAgKiBAbm90aWNlIFNob3cgdGhlIGB0b3RhbFN1cHBseWAgZm9yIHRoaXMgVG9rZW4gY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludCBjb2luTGlmZVRpbWVUb3RhbFN1cHBseSkgewogICAgICAgIHJldHVybiB0b3RhbFN1cHBseSA7ICAgCiAgICB9ICAKLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KICAgLyoqCiAgICAgKiBAbm90aWNlIFNob3cgdGhlIGB0b2tlbk93bmVyYCBiYWxhbmNlcyBmb3IgdGhpcyBjb250cmFjdAogICAgICogQHBhcmFtIHRva2VuT3duZXIgdGhlIHRva2VuIG93bmVycyBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHRva2VuT3duZXIpIGNvbnN0YW50IHB1YmxpYyAgcmV0dXJucyAodWludCBjb2luQmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlT2ZbdG9rZW5Pd25lcl07CiAgICB9IAovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwogICAvKioKICAgICAqIEBub3RpY2UgU2hvdyB0aGUgYWxsb3dhbmNlIGdpdmVuIGJ5IGB0b2tlbk93bmVyYCB0byB0aGUgYHNwZW5kZXJgCiAgICAgKiBAcGFyYW0gdG9rZW5Pd25lciB0aGUgdG9rZW4gb3duZXIgYWRkcmVzcyBhbGxvY2F0aW5nIGFsbG93YW5jZQogICAgICogQHBhcmFtIHNwZW5kZXIgdGhlIGFsbG93YW5jZSBzcGVuZGVycyBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIHRva2VuT3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQgY29pbnNSZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dhbmNlW3Rva2VuT3duZXJdW3NwZW5kZXJdOwogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLwogICAgZnVuY3Rpb24gc2V0Q29udHJBZGRyQW5kQ3J3U2FsZShib29sIHNldEFkZHJlc3MsICBhZGRyZXNzIGljb0FkZHIsIGFkZHJlc3MgZXhjaEFkZHIsIGFkZHJlc3MgY3NBZGRyLCBib29sIHNldENyb3dkU2FsZSwgYm9vbCBjcm93ZFNhbGVPcGVuXyApIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyhib29sIHN1Y2Nlc3MpewoKICAgICAgIGlmKHNldEFkZHJlc3MgPT0gdHJ1ZSl7CiAgICAgICAJCWljb19hZGRyID0gaWNvQWRkcjsgZXhjaGdfYWRkciA9IGV4Y2hBZGRyOyBjc19hZGRyID0gY3NBZGRyOyAgICAgICAJCQogICAgICAgfQogICAgICAgLy8KICAgICAgIGlmKCBzZXRDcm93ZFNhbGUgPT0gdHJ1ZSApY3Jvd2RTYWxlT3BlbiA9IGNyb3dkU2FsZU9wZW5fOwogICAgICAgCiAgICAgICByZXR1cm4gdHJ1ZTsgICAKICAgIH0gICAgICAgICAgCiAgICAvLwogICAgZnVuY3Rpb24gX2dldEljb0FkZHIoKSBpbnRlcm5hbCAgcmV0dXJucyhhZGRyZXNzIGljb19tYV9hZGRyKXsgIHJldHVybihpY29fYWRkcik7IH0gCiAgICBmdW5jdGlvbiBfZ2V0RXhjaGdBZGRyKCkgaW50ZXJuYWwgcmV0dXJucyhhZGRyZXNzIGV4Y2hnX21hX2FkZHIpeyByZXR1cm4oZXhjaGdfYWRkcik7IH0gCiAgICBmdW5jdGlvbiBfZ2V0Q3NBZGRyKCkgaW50ZXJuYWwgcmV0dXJucyhhZGRyZXNzIGNzX21hX2FkZHIpeyByZXR1cm4oY3NfYWRkcik7IH0gCi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCi8vCiAgICAvKiBJbnRlcm5hbCB0cmFuc2Zlciwgb25seSBjYW4gYmUgY2FsbGVkIGJ5IHRoaXMgY29udHJhY3QgKi8KICAgIC8vCiAgICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBpbnRlcm5hbCAgewogICAgICAgIHJlcXVpcmUgKF90byAhPSAweDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHJlcXVpcmUoIWZyb3plbkFjY291bnRbX2Zyb21dKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHJlcXVpcmUoIWZyb3plbkFjY291bnRbX3RvXSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHVpbnQgdmFsdG1wID0gX3ZhbHVlOwogICAgICAgIHVpbnQgX3ZhbHVlQSA9IHZhbHRtcDsKICAgICAgICB2YWx0bXAgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgcmVxdWlyZSAoYmFsYW5jZU9mW19mcm9tXSA+PSBfdmFsdWVBKTsgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHJlcXVpcmUgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlQSA+IGJhbGFuY2VPZltfdG9dKTsgICAgICAgICAgICAgICAgICAgCiAgICAgICAgdWludCBwcmV2aW91c0JhbGFuY2VzID0gYmFsYW5jZU9mW19mcm9tXSArIGJhbGFuY2VPZltfdG9dOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlT2ZbX2Zyb21dLCBfdmFsdWVBKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgYmFsYW5jZU9mW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZltfdG9dLCBfdmFsdWVBKTsgCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlQSk7CiAgICAgICAgX3ZhbHVlQSA9IDA7CiAgICAgICAgYXNzZXJ0KGJhbGFuY2VPZltfZnJvbV0gKyBiYWxhbmNlT2ZbX3RvXSA9PSBwcmV2aW91c0JhbGFuY2VzKTsgICAgICAgCiAgICB9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KICAgIC8qKgogICAgICogVHJhbnNmZXIgdG9rZW5zCiAgICAgKi8KICAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2VzcykgewoKICAgICAgICAvL2NoZWNrIHNlbmRlciBhbmQgcmVjZWl2ZXIgYWxsdyBsaW1pdHMgaW4gYWNjb3JkYW5jZSB3aXRoIGljbyBjb250cmFjdAogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gb3duZXIpewoJICAgICAgICBib29sIHN1Y3NTbHJMbXQgPSBfY2hrU2VsbGVyTG10cyggbXNnLnNlbmRlciwgX3ZhbHVlKTsgICAgCgkgICAgICAgIGJvb2wgc3Vjc0J5ckxtdCA9IF9jaGtCdXllckxtdHMoIF90bywgX3ZhbHVlKTsKCSAgICAgICAgcmVxdWlyZShzdWNzU2xyTG10ID09IHRydWUgJiYgc3Vjc0J5ckxtdCA9PSB0cnVlKTsKICAgICAgICB9CiAgICAgICAgLy8KICAgICAgICB1aW50IHZhbHRtcCA9IF92YWx1ZTsgICAgCiAgICAgICAgdWludCBfdmFsdWVUZW1wID0gdmFsdG1wOyAKICAgICAgICB2YWx0bXAgPSAwOyAgICAgICAgICAgICAgICAgCiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlVGVtcCk7CiAgICAgICAgX3ZhbHVlVGVtcCA9IDA7CiAgICAgICAgcmV0dXJuIHRydWU7ICAgICAgCiAgICB9ICAKLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KICAgIC8qKgogICAgICogVHJhbnNmZXIgdG9rZW5zIGZyb20gb3RoZXIgYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgCiAgICAgICAgdWludCB2YWx0bXAgPSBfdmFsdWU7CiAgICAgICAgdWludCBfdmFsdWVBID0gdmFsdG1wOwogICAgICAgIHZhbHRtcCA9IDA7CiAgICAgICAgcmVxdWlyZShfdmFsdWVBIDw9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pOyAgICAgCiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSwgX3ZhbHVlQSk7CiAgICAgICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZUEpOwogICAgICAgIF92YWx1ZUEgPSAwOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwogICAgLyoqCiAgICAgKiBTZXQgYWxsb3dhbmNlIGZvciBvdGhlciBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAKICAgICAgICAvL2NoZWNrIHNlbmRlciBhbmQgcmVjZWl2ZXIgYWxsdyBsaW1pdHMgaW4gYWNjb3JkYW5jZSB3aXRoIGljbyBjb250cmFjdAogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gb3duZXIpewoJICAgICAgICBib29sIHN1Y3NTbHJMbXQgPSBfY2hrU2VsbGVyTG10cyggbXNnLnNlbmRlciwgX3ZhbHVlKTsgICAgICAgICAgCgkgICAgICAgIGJvb2wgc3Vjc0J5ckxtdCA9IF9jaGtCdXllckxtdHMoIF9zcGVuZGVyLCBfdmFsdWUpOwoJICAgICAgICByZXF1aXJlKHN1Y3NTbHJMbXQgPT0gdHJ1ZSAmJiBzdWNzQnlyTG10ID09IHRydWUpOwogICAgICAgIH0KICAgICAgICAvLwogICAgICAgIHVpbnQgdmFsdG1wID0gX3ZhbHVlOwogICAgICAgIHVpbnQgX3ZhbHVlQSA9IHZhbHRtcDsKICAgICAgICB2YWx0bXAgPSAwOyAgICAgICAgIAogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWVBOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWVBKTsKICAgICAgICAgX3ZhbHVlQSA9MDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KICAgIC8qKgogICAgICogU2V0IGFsbG93YW5jZSBmb3Igb3RoZXIgYWRkcmVzcyBhbmQgbm90aWZ5CiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgCiAgICAgICAgdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsKICAgICAgICB1aW50IHZhbHRtcCA9IF92YWx1ZTsKICAgICAgICB1aW50IF92YWx1ZUEgPSB2YWx0bXA7CiAgICAgICAgdmFsdG1wID0gMDsgICAgICAgICAKICAgICAgICBpZiAoYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlQSkpIHsgICAgICAgICAgIAogICAgICAgICAgICBzcGVuZGVyLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWVBLCB0aGlzLCBfZXh0cmFEYXRhKTsgICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgX3ZhbHVlQSA9IDA7IAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLwogICAgZnVuY3Rpb24gZnJlZXplQWNjb3VudChhZGRyZXNzIHRhcmdldCwgYm9vbCBmcmVlemUpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpIHsKICAgICAgICBmcm96ZW5BY2NvdW50W3RhcmdldF0gPSBmcmVlemU7ICAgICAgCiAgICAgICAgLy9Gcm96ZW5GdW5kcyh0YXJnZXQsIGZyZWV6ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KICAgIGZ1bmN0aW9uIF9zYWZlVHJhbnNmZXJUa24oIGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IGFtb3VudCkgaW50ZXJuYWwgcmV0dXJucyhib29sIHN1Y3NUclRrKXsKICAgICAgICAgIAogICAgICAgICAgdWludCB0a0EgPSBhbW91bnQ7CiAgICAgICAgICB1aW50IHRrQXRlbXAgPSB0a0E7CiAgICAgICAgICB0a0EgPSAwOwogICAgICAgICAgICAgICAgICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIHRrQXRlbXApOyAKICAgICAgICAgIHRrQXRlbXAgPSAwOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9ICAgICAgCi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCi8vCiAgICBmdW5jdGlvbiBfc2FmZVRyYW5zZmVyUGF5bW50KCBhZGRyZXNzIHBheW1lbnRCZW5mY3J5LCB1aW50IHBheW1lbnQpIGludGVybmFsIHJldHVybnMoYm9vbCBzdWNzVHJQYXltbnQpewogICAgICAgICAgICAgIAogICAgICAgICAgdWludCBwQSA9IHBheW1lbnQ7IAogICAgICAgICAgdWludCBwYXltZW50VGVtcCA9IHBBOwogICAgICAgICAgcEEgPSAwOwogICAgICAgICAgICAgICAgICBwYXltZW50QmVuZmNyeS50cmFuc2ZlcihwYXltZW50VGVtcCk7IAogICAgICAgICAgRnVuZE9yUGF5bWVudFRyYW5zZmVyKHBheW1lbnRCZW5mY3J5LCBwYXltZW50VGVtcCk7ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgIHBheW1lbnRUZW1wID0gMDsgCiAgICAgICAgICAKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLwogICAgZnVuY3Rpb24gX3NhZmVQYXltZW50QWN0aW9uQXRJY28oIHVpbnQgcGF5bWVudCwgYWRkcmVzcyBwYXltZW50QmVuZmNyeSwgdWludCBwYXl0eXBlKSBpbnRlcm5hbCByZXR1cm5zKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgICAgICAgCiAgICAvLyBwYXltZW50IHJlcSB0byBpY28KICAgICAgICAgIHVpbnQgUG0gPSBwYXltZW50OwogICAgICAgICAgdWludCBQbVRlbXAgPSBQbTsKICAgICAgICAgIFBtID0gMDsgIAogICAgICAgICAgSUNPIGljbyA9IElDTyhfZ2V0SWNvQWRkcigpKTsgICAgICAgCiAgICAgICAgICAvLyBwYXl0eXBlIDEgZm9yIHJlZGVlbXBheW1lbnQgYW5kIDIgZm9yIHNlbGwgcGF5bWVudAogICAgICAgICAgYm9vbCBweW1BY3RTdWNzID0gaWNvLnBheW1lbnRBY3Rpb24oIFBtVGVtcCwgcGF5bWVudEJlbmZjcnksIHBheXR5cGUpOwogICAgICAgICAgcmVxdWlyZShweW1BY3RTdWNzID09ICB0cnVlKTsKICAgICAgICAgIFBtVGVtcCA9IDA7CiAgICAgICAgICAKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KCglmdW5jdGlvbiBidXlDb2luc0Nyb3dkU2FsZShhZGRyZXNzIGJ1eWVyLCB1aW50IHBheW1lbnQsIGFkZHJlc3MgY3Jvd2RTYWxlQ29udHIpIHB1YmxpYyByZXR1cm5zKGJvb2wgc3VjY2VzcywgdWludCByZXRQYXltZW50KSB7IAoJCQoJCXJlcXVpcmUoY3Jvd2RTYWxlT3BlbiA9PSB0cnVlICYmIGNyb3dkU2FsZUNvbnRyID09IF9nZXRDc0FkZHIoKSk7CgoJCXN1Y2Nlc3MgPSBmYWxzZTsKCQkoc3VjY2VzcyAsIHJldFBheW1lbnQpID0gX2J1eUNvaW5zKCBidXllciwgcGF5bWVudCk7CgkJcmVxdWlyZShzdWNjZXNzID09IHRydWUpOwoJCXJldHVybiAoc3VjY2VzcywgcmV0UGF5bWVudCk7Cgl9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLwogICAgZnVuY3Rpb24gX2J1eUNvaW5zKGFkZHJlc3MgYnV5ZXIsIHVpbnQgcGF5bWVudCkgaW50ZXJuYWwgcmV0dXJucyhib29sIHN1Y2Nlc3MsIHVpbnQgcmV0UGF5bWVudCkgeyAKCiAgICAgICAgbXNnU25kcltidXllcl0gPSBwYXltZW50OwoKICAgICAgICBJQ08gaWNvID0gSUNPKF9nZXRJY29BZGRyKCkgKTsKCiAgICAgICAgcmVxdWlyZSggIHBheW1lbnQgPiAwICk7CiAgICAgICAgCiAgICAgICAgYm9vbCBpY29zdWNjZXNzOyAgdWludCB0a25zQnV5QXBwcjsgIAogICAgICAgIChpY29zdWNjZXNzLCB0a25zQnV5QXBwciwgcmV0UGF5bWVudCApID0gaWNvLmJ1eSggcGF5bWVudCwgYnV5ZXIsIGZhbHNlKTsgICAgICAgICAKICAgICAgICByZXF1aXJlKCBpY29zdWNjZXNzID09IHRydWUgKTsKICAgICAgICAKICAgICAgICBpZihjcm93ZFNhbGVPcGVuID09IGZhbHNlKSB7CiAgICAgICAgLy8gcmV0dXJuIHBheW1lbnQgdG8gYnV5ZXIgCgkgICAgICAgIGlmKCByZXRQYXltZW50ID4gMCApIHsKCSAgICAgICAgICAgICAgICAKCSAgICAgICAgICBib29sIHN1Y3NUclBheW1udDsKCSAgICAgICAgICBzdWNzVHJQYXltbnQgPSBfc2FmZVRyYW5zZmVyUGF5bW50KCBidXllciwgcmV0UGF5bWVudCApOwoJICAgICAgICAgIHJlcXVpcmUoc3Vjc1RyUGF5bW50ID09IHRydWUgKTsKCSAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyB0a24gdHJhbnNmZXIKICAgICAgICBib29sIHN1Y3NUclRrID0gIF9zYWZlVHJhbnNmZXJUa24oIG93bmVyLCBidXllciwgdGtuc0J1eUFwcHIpOwogICAgICAgIHJlcXVpcmUoc3Vjc1RyVGsgPT0gdHJ1ZSk7CgogICAgICAgIG1zZ1NuZHJbYnV5ZXJdID0gMDsKCiAgICAgICAgcmV0dXJuICh0cnVlLCByZXRQYXltZW50KTsKICAgIH0gICAKLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCiAgCiAgICBmdW5jdGlvbiByZWRlZW1PclNlbGxDb2luc1RvSUNPKHVpbnQgZW50ZXIxZm9yUmVkZWVtT1IyZm9yU2VsbCwgdWludDI1NiBhbW91bnRPZkNvaW5QYXJ0c1RvUmVkZWVtT3JTZWxsKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzICkgewoKICAgIHJlcXVpcmUoY3Jvd2RTYWxlT3BlbiA9PSBmYWxzZSk7CgogICAgdWludCBhbW91bnQgPSBhbW91bnRPZkNvaW5QYXJ0c1RvUmVkZWVtT3JTZWxsOwoKICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSBhbW91bnQ7ICAKICAgICAgYm9vbCBpc1ByZXZpZXcgPSBmYWxzZTsKCiAgICAgIElDTyBpY28gPSBJQ08oX2dldEljb0FkZHIoKSk7CgogICAgICAvLyByZWRlZW0gZXhlIGF0IGljbwogICAgICAgIGJvb2wgaWNvc3VjY2VzcyA7IHVpbnQgcmVkZWVtT3JTZWxsUGF5bWVudFZhbHVlOwogICAgICAKCSAgICAgIGlmKGVudGVyMWZvclJlZGVlbU9SMmZvclNlbGwgPT0gMSl7CgoJICAgICAgCShpY29zdWNjZXNzICwgcmVkZWVtT3JTZWxsUGF5bWVudFZhbHVlKSA9IGljby5yZWRlZW1Db2luKCBhbW91bnQsIG1zZy5zZW5kZXIsIGlzUHJldmlldyk7CgkgICAgICB9CgkgICAgICBpZihlbnRlcjFmb3JSZWRlZW1PUjJmb3JTZWxsID09IDIpewoKCSAgICAgIAkoaWNvc3VjY2VzcyAsIHJlZGVlbU9yU2VsbFBheW1lbnRWYWx1ZSkgPSBpY28uc2VsbCggYW1vdW50LCBtc2cuc2VuZGVyLCBpc1ByZXZpZXcpOwoJICAgICAgfQkgICAgICAKCiAgICAgIHJlcXVpcmUoIGljb3N1Y2Nlc3MgPT0gdHJ1ZSk7ICAKCiAgICAgICAgcmVxdWlyZSggX2dldEljb0FkZHIoKS5iYWxhbmNlID49IHNhZmVBZGQoIGljby5nZXRNaW5CYWwoKSAsIHJlZGVlbU9yU2VsbFBheW1lbnRWYWx1ZSkgKTsKCiAgICAgIGJvb2wgc3Vjc1RyVGsgPSBmYWxzZTsgYm9vbCBweW1BY3RTdWNzID0gZmFsc2U7CiAgICAgIGlmKGlzUHJldmlldyA9PSBmYWxzZSkgewoKICAgICAgICAvLyB0cmFuc2ZlciB0a25zCiAgICAgICAgc3Vjc1RyVGsgPSAgX3NhZmVUcmFuc2ZlclRrbiggbXNnLnNlbmRlciwgb3duZXIsIGFtb3VudCk7CiAgICAgICAgcmVxdWlyZShzdWNzVHJUayA9PSB0cnVlKTsgICAgICAgIAoKICAgICAgICAvLyBwYXltZW50IHJlcSB0byBpY28gIDEgZm9yIHJlZGVlbXBheW1lbnQgYW5kIDIgZm9yIHNlbGwgcGF5bWVudCAgICAgICAgIAogICAgICBtc2dTbmRyW21zZy5zZW5kZXJdID0gcmVkZWVtT3JTZWxsUGF5bWVudFZhbHVlOwogICAgICAgIHB5bUFjdFN1Y3MgPSBfc2FmZVBheW1lbnRBY3Rpb25BdEljbyggcmVkZWVtT3JTZWxsUGF5bWVudFZhbHVlLCBtc2cuc2VuZGVyLCBlbnRlcjFmb3JSZWRlZW1PUjJmb3JTZWxsKTsKICAgICAgICByZXF1aXJlKHB5bUFjdFN1Y3MgPT0gIHRydWUpOwogICAgICB9IAogICAgIAogICAgbXNnU25kclttc2cuc2VuZGVyXSA9IDA7ICAKCiAgICAgIHJldHVybiAodHJ1ZSk7ICAgICAgICAKICAgIH0gCi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCiAgICBmdW5jdGlvbiBfY2hrU2VsbGVyTG10cyggYWRkcmVzcyBzZWxsZXIsIHVpbnQgYW1vdW50T2ZDb2luc1NlbGxlckNhblNlbGwpIGludGVybmFsIHJldHVybnMoYm9vbCBzdWNjZXNzKXsgICAKCiAgICAgIHVpbnQgYW1vdW50VGtucyA9IGFtb3VudE9mQ29pbnNTZWxsZXJDYW5TZWxsOyAKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgICBJQ08gaWNvID0gSUNPKCBfZ2V0SWNvQWRkcigpICk7CiAgICAgIHVpbnQgc2VyaWVzQ2FwRmFjdG9yID0gaWNvLmdldFNDRigpOwogICAgICAKCSAgICAgIGlmKCBhbW91bnRUa25zIDw9IGJhbGFuY2VPZltzZWxsZXJdICAmJiAgYmFsYW5jZU9mW3NlbGxlcl0gPD0gIHNhZmVEaXYoYWxsb3dlZEluZGl2aWR1YWxTaGFyZSpzZXJpZXNDYXBGYWN0b3IsMTAqKjE4KSApewoJICAgICAgICBzdWNjZXNzID0gdHJ1ZTsKCSAgICAgIH0KCiAgICAgIHJldHVybiBzdWNjZXNzOwogICAgfQogICAgLy8gYm9vbCBzdWNzU2xyTG10ID0gX2Noa1NlbGxlckxtdHMoIGFkZHJlc3Mgc2VsbGVyLCB1aW50IGFtb3VudFRrbnMpOwovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyAgICAKLy8KICAgIGZ1bmN0aW9uIF9jaGtCdXllckxtdHMoIGFkZHJlc3MgYnV5ZXIsIHVpbnQgYW1vdW50T2ZDb2luc0J1eWVyQ2FuQnV5KSAgaW50ZXJuYWwgIHJldHVybnMoYm9vbCBzdWNjZXNzKXsKCiAgICAJdWludCBhbW91bnRUa25zID0gYW1vdW50T2ZDb2luc0J1eWVyQ2FuQnV5OwogICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICBJQ08gaWNvID0gSUNPKCBfZ2V0SWNvQWRkcigpICk7CiAgICAgICAgdWludCBzZXJpZXNDYXBGYWN0b3IgPSBpY28uZ2V0U0NGKCk7CgoJICAgICAgICBpZiggYW1vdW50VGtucyA8PSBzYWZlU3ViKCBzYWZlRGl2KGFsbG93ZWRJbmRpdmlkdWFsU2hhcmUqc2VyaWVzQ2FwRmFjdG9yLDEwKioxOCksIGJhbGFuY2VPZltidXllcl0gKSkgewoJICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlOwoJICAgICAgICB9IAoKICAgICAgICByZXR1cm4gc3VjY2VzczsgICAgICAgIAogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLwogICAgZnVuY3Rpb24gX2Noa0J1eWVyTG10c0FuZEZpbmwoIGFkZHJlc3MgYnV5ZXIsIHVpbnQgYW1vdW50VGtucywgdWludCBwcmljZU9mcikgaW50ZXJuYWwgcmV0dXJucyhib29sIHN1Y2Nlc3MpewogICAgICAgCiAgICAgICBzdWNjZXNzID0gZmFsc2U7CgogICAgICAvLyBidXllciBsaW1pdHMKICAgICAgIGJvb2wgc3VjczEgPSBmYWxzZTsgCiAgICAgICBzdWNzMSA9IF9jaGtCdXllckxtdHMoIGJ1eWVyLCBhbW91bnRUa25zKTsKCiAgICAgIC8vIGJ1eWVyIGZ1bmRzCiAgICAgICBJQ08gaWNvID0gSUNPKCBfZ2V0SWNvQWRkcigpICk7CiAgICAgICBib29sIHN1Y3MyID0gZmFsc2U7CiAgICAgICBpZiggYnV5ZXIuYmFsYW5jZSA+PSAgc2FmZUFkZCggc2FmZU11bChhbW91bnRUa25zICwgcHJpY2VPZnIpICwgaWNvLmdldE1pbkJhbCgpICkgICkgIHN1Y3MyID0gdHJ1ZTsKICAgICAgIGlmKCBzdWNzMSA9PSB0cnVlICYmIHN1Y3MyID09IHRydWUpICBzdWNjZXNzID0gdHJ1ZTsgICAKCiAgICAgICByZXR1cm4gc3VjY2VzczsKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KICAgICBmdW5jdGlvbiBfc2xyQnlyTG10Q2hrKCBhZGRyZXNzIHNlbGxlciwgdWludCBhbW91bnRUa25zLCB1aW50IHByaWNlT2ZyLCBhZGRyZXNzIGJ1eWVyKSBpbnRlcm5hbCByZXR1cm5zKGJvb2wgc3VjY2Vzcyl7CiAgICAgCiAgICAgIC8vIHNlbGxlciBsaW1pdHMgY2hlY2sKICAgICAgICBib29sIHN1Y2Nlc3NTbHJsOyAKICAgICAgICAoc3VjY2Vzc1NscmwpID0gX2Noa1NlbGxlckxtdHMoIHNlbGxlciwgYW1vdW50VGtucyk7IAoKICAgICAgLy8gYnV5ZXIgbGltaXRzIGNoZWNrCiAgICAgICAgYm9vbCBzdWNjZXNzQnlybEFGaW5sOwogICAgICAgIChzdWNjZXNzQnlybEFGaW5sKSA9IF9jaGtCdXllckxtdHNBbmRGaW5sKCBidXllciwgYW1vdW50VGtucywgcHJpY2VPZnIpOwogICAgICAgIAogICAgICAgIHJlcXVpcmUoIHN1Y2Nlc3NTbHJsID09IHRydWUgJiYgc3VjY2Vzc0J5cmxBRmlubCA9PSB0cnVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAKICAgICAgICBpZihtc2cuc2VuZGVyICE9IG93bmVyKXsKCiAgICAgICAgICAgIHJlcXVpcmUoY3Jvd2RTYWxlT3BlbiA9PSBmYWxzZSk7CiAgICAgICAgICAgIGJvb2wgc3VjY2VzcyA9IGZhbHNlOwogICAgICAgICAgICB1aW50IHJldFBheW1lbnQ7CgkJCShzdWNjZXNzICwgcmV0UGF5bWVudCkgPSBfYnV5Q29pbnMoIG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CgkJCXJlcXVpcmUoc3VjY2VzcyA9PSB0cnVlKTsgICAgCiAgICAgICAgfQogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKCQkgICAgZnVuY3Rpb24gYnVybiggdWludDI1NiB2YWx1ZSwgYm9vbCB1bmJ1cm4pIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyggYm9vbCBzdWNjZXNzICkgeyAKCgkJICAgIAlyZXF1aXJlKGNyb3dkU2FsZU9wZW4gPT0gZmFsc2UpOwoKCQkgICAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSB2YWx1ZTsKCQkgICAgICAgICBJQ08gaWNvID0gSUNPKCBfZ2V0SWNvQWRkcigpICk7CgkJICAgICAgICAgICAgaWYoIHVuYnVybiA9PSBmYWxzZSkgewoKCQkgICAgICAgICAgICAgICAgYmFsYW5jZU9mW293bmVyXSA9IHNhZmVTdWIoIGJhbGFuY2VPZltvd25lcl0gLCB2YWx1ZSk7CgkJICAgICAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZVN1YiggdG90YWxTdXBwbHksIHZhbHVlKTsKCQkgICAgICAgICAgICAgICAgQnVybk9yVW5CdXJuKG93bmVyLCB2YWx1ZSwgMSk7CgoJCSAgICAgICAgICAgIH0KCQkgICAgICAgICAgICBpZiggdW5idXJuID09IHRydWUpIHsKCgkJICAgICAgICAgICAgICAgIGJhbGFuY2VPZltvd25lcl0gPSBzYWZlQWRkKCBiYWxhbmNlT2Zbb3duZXJdICwgdmFsdWUpOwoJCSAgICAgICAgICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQoIHRvdGFsU3VwcGx5ICwgdmFsdWUpOwoJCSAgICAgICAgICAgICAgICBCdXJuT3JVbkJ1cm4ob3duZXIsIHZhbHVlLCAyKTsKCgkJICAgICAgICAgICAgfQoJCSAgICAgICAgCgkJICAgICAgICBib29sIGljb3N1Y2Nlc3MgPSBpY28uYnVybiggdmFsdWUsIHVuYnVybiwgdG90YWxTdXBwbHlTdGFydCwgYmFsYW5jZU9mW293bmVyXSApOwoJCSAgICAgICAgcmVxdWlyZSggaWNvc3VjY2VzcyA9PSB0cnVlKTsgICAgICAgICAgICAgCgkJICAgICAgICAKCQkgICAgICAgIHJldHVybiB0cnVlOyAgIAoJICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICB9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgogICAgZnVuY3Rpb24gd2l0aGRyYXdGdW5kKHVpbnQgd2l0aGRyYXdBbW91bnQpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpIHsKICAgICAgCiAgICAgICAgc3VjY2VzcyA9IF93aXRoZHJhdyh3aXRoZHJhd0Ftb3VudCk7ICAgICAgICAgIAogICAgICAgIHJldHVybiBzdWNjZXNzOyAgICAgIAogICAgfSAgIAovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKICAgIGZ1bmN0aW9uIF93aXRoZHJhdyh1aW50IF93aXRoZHJhd0Ftb3VudCkgaW50ZXJuYWwgcmV0dXJucyhib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgYm9vbCBzdWNzVHJQYXltbnQgPSBfc2FmZVRyYW5zZmVyUGF5bW50KCBiZW5lZmljaWFyeUZ1bmRzLCBfd2l0aGRyYXdBbW91bnQpOyAKICAgICAgICByZXF1aXJlKHN1Y3NUclBheW1udCA9PSB0cnVlKTsgICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsgICAgIAogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKICAgIGZ1bmN0aW9uIHJlY2VpdmVJQ09jb2lucyggdWludDI1NiBhbW91bnRPZkNvaW5zVG9SZWNlaXZlLCB1aW50IFNocklEICkgIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpeyAKCiAgICAgIHJlcXVpcmUoY3Jvd2RTYWxlT3BlbiA9PSBmYWxzZSk7CgogICAgICBtc2dTbmRyW21zZy5zZW5kZXJdID0gYW1vdW50T2ZDb2luc1RvUmVjZWl2ZTsKICAgICAgICBJQ08gaWNvID0gSUNPKCBfZ2V0SWNvQWRkcigpICk7CiAgICAgICAgYm9vbCAgaWNvc3VjY2VzczsgIAogICAgICAgIGljb3N1Y2Nlc3MgPSBpY28ucmVjdlNocklDTyhtc2cuc2VuZGVyLCBhbW91bnRPZkNvaW5zVG9SZWNlaXZlLCBTaHJJRCApOyAKICAgICAgICByZXF1aXJlIChpY29zdWNjZXNzID09IHRydWUpOwoKICAgICAgICBib29sIHN1Y3NUclRrOwogICAgICAgIHN1Y3NUclRrID0gIF9zYWZlVHJhbnNmZXJUa24oIG93bmVyLCBtc2cuc2VuZGVyLCBhbW91bnRPZkNvaW5zVG9SZWNlaXZlKTsKICAgICAgICByZXF1aXJlKHN1Y3NUclRrID09IHRydWUpOwoKICAgICAgbXNnU25kclttc2cuc2VuZGVyXSA9IDA7CgogICAgICAgIHJldHVybiAgdHJ1ZTsKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgogICAgICBmdW5jdGlvbiBzZWxsQmtnQXRFeGNoZyggdWludCBzZWxsZXJDb2luUGFydHNGb3JTYWxlLCB1aW50IHNlbGxlclByaWNlUGVyQ29pblBhcnRJbldFSSkgcHVibGljIHJldHVybnMoYm9vbCBzdWNjZXNzKXsKICAgICAgICAKICAgICAgICByZXF1aXJlKGNyb3dkU2FsZU9wZW4gPT0gZmFsc2UpOwoKICAgICAgICB1aW50IGFtbnRUa25zID0gc2VsbGVyQ29pblBhcnRzRm9yU2FsZTsKICAgICAgICB1aW50IHRrblByaWNlID0gc2VsbGVyUHJpY2VQZXJDb2luUGFydEluV0VJOwogICAgICAKICAgICAgICAvLyBzZWxsZXIgbGltaXRzCiAgICAgICAgYm9vbCBzdWNjZXNzU2xybDsKICAgICAgICAoc3VjY2Vzc1NscmwpID0gX2Noa1NlbGxlckxtdHMoIG1zZy5zZW5kZXIsIGFtbnRUa25zKTsgCiAgICAgICAgcmVxdWlyZShzdWNjZXNzU2xybCA9PSB0cnVlKTsKCiAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSBhbW50VGtuczsgIAoKICAgICAgLy8gYmtnIHJlZ2lzdHJhdGlvbiBhdCBleGNoYW5nZQoKICAgICAgICBFeGNoZyBlbSA9IEV4Y2hnKF9nZXRFeGNoZ0FkZHIoKSk7CgogICAgICAgIGJvb2wgIGVtc3VjY2VzczsgCiAgICAgICAgKGVtc3VjY2VzcykgPSBlbS5zZWxsX0V4Y2hnX1JlZyggYW1udFRrbnMsIHRrblByaWNlLCBtc2cuc2VuZGVyICk7CiAgICAgICAgcmVxdWlyZShlbXN1Y2Nlc3MgPT0gdHJ1ZSApOwogICAgICAgICAgICAKICAgICAgbXNnU25kclttc2cuc2VuZGVyXSA9IDA7CgogICAgICAgIHJldHVybiB0cnVlOyAgICAgICAgIAogICAgfQovL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyAKLy8gICAgIAogICAgICBmdW5jdGlvbiBidXlCa2dBdEV4Y2hnKCBhZGRyZXNzIHNlbGxlciwgdWludCBzZWxsZXJDb2luUGFydHNGb3JTYWxlLCB1aW50IHNlbGxlclByaWNlUGVyQ29pblBhcnRJbldFSSwgdWludCBteVByb3Bvc2VkUGF5bWVudEluV0VJKSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpeyAKCiAgICAgICAgcmVxdWlyZShjcm93ZFNhbGVPcGVuID09IGZhbHNlKTsKCiAgICAgICAgdWludCBhbW91bnRUa25zID0gc2VsbGVyQ29pblBhcnRzRm9yU2FsZTsKICAgICAgICB1aW50IHByaWNlT2ZyID0gc2VsbGVyUHJpY2VQZXJDb2luUGFydEluV0VJOwogICAgICAgIHVpbnQgcGF5bWVudCA9IG15UHJvcG9zZWRQYXltZW50SW5XRUk7ICAgCgoJCS8vIGNhbGMgdG9rZW5zIHRoYXQgY2FuIGJlIGJvdWdodCAgICAgICAgIAogICAgICAgIHVpbnQgdGtuc0J1eUFwcHIgPSAwOyAgICAKICAgICAgICBpZiggYW1vdW50VGtucyA+IDIgJiYgIHBheW1lbnQgPj0gICgyICogcHJpY2VPZnIpICYmICBwYXltZW50IDw9IChhbW91bnRUa25zICogcHJpY2VPZnIpICkgewoKICAgICAgICAJdGtuc0J1eUFwcHIgPSBzYWZlRGl2KCBwYXltZW50ICwgcHJpY2VPZnIgKTsKICAgICAgICB9CiAgICAgICAgcmVxdWlyZSh0a25zQnV5QXBwciA+IDApOwoKICAgICAgbXNnU25kclttc2cuc2VuZGVyXSA9IGFtb3VudFRrbnM7CgogICAgICAgIC8vIHNlbGxlciBidXllciBsaW1pdHMgY2hlY2sKICAgICAgICBib29sIHN1Y3NMbXQgPSBfc2xyQnlyTG10Q2hrKCBzZWxsZXIsIGFtb3VudFRrbnMsIHByaWNlT2ZyLCBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKHN1Y3NMbXQgPT0gdHJ1ZSk7CgogICAgICAgIC8vIGJvb2tpbmcgYXQgZXhjaGFuZ2UKICAgICAKICAgICAgICBFeGNoZyBlbSA9IEV4Y2hnKF9nZXRFeGNoZ0FkZHIoKSk7IAoKICAgICAgICBib29sIGVtQmtnc3VjY2VzczsKICAgICAgICAoZW1Ca2dzdWNjZXNzKT0gZW0uYnV5X0V4Y2hnX2Jvb2tpbmcoIHNlbGxlciwgYW1vdW50VGtucywgcHJpY2VPZnIsIG1zZy5zZW5kZXIsIHBheW1lbnQpOwogICAgICAgICAgICByZXF1aXJlKCBlbUJrZ3N1Y2Nlc3MgPT0gdHJ1ZSApOwoKICAgICAgbXNnU25kclttc2cuc2VuZGVyXSA9IDA7ICAKCiAgICAgICAgcmV0dXJuIHRydWU7ICAgICAgICAKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKICAgIGZ1bmN0aW9uIGJ1eUNvaW5zQXRFeGNoZyggYWRkcmVzcyBzZWxsZXIsIHVpbnQgc2VsbGVyQ29pblBhcnRzRm9yU2FsZSwgdWludCBzZWxsZXJQcmljZVBlckNvaW5QYXJ0SW5XRUkpIHBheWFibGUgcHVibGljIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgCiAgICAgICAgcmVxdWlyZShjcm93ZFNhbGVPcGVuID09IGZhbHNlKTsKCiAgICAgICAgdWludCBhbW91bnRUa25zID0gc2VsbGVyQ29pblBhcnRzRm9yU2FsZTsKICAgICAgICB1aW50IHByaWNlT2ZyID0gc2VsbGVyUHJpY2VQZXJDb2luUGFydEluV0VJOwkgIAoJCQoJCS8vIGNhbGMgdG9rZW5zIHRoYXQgY2FuIGJlIGJvdWdodCAgICAgICAgIAogICAgICAgIHVpbnQgdGtuc0J1eUFwcHIgPSAwOyAgLy8gdGhpcyB2YXIgYXMgdXNlZCBhcyB0aGUgaW5kaWNhdG9yIHRvIHVwZGF0ZSBidXllcmJrZyBhbmQgc2VsbGVyIHVwZGF0ZSBmb3Igb2sgb3Igbm8gdHhuLgoKICAgICAgICBpZiggYW1vdW50VGtucyA+IDIgJiYgIG1zZy52YWx1ZSA+PSAgKDIgKiBwcmljZU9mcikgJiYgIG1zZy52YWx1ZSA8PSAoYW1vdW50VGtucyAqIHByaWNlT2ZyKSApIHsKCiAgICAgICAgCXRrbnNCdXlBcHByID0gc2FmZURpdiggbXNnLnZhbHVlICwgcHJpY2VPZnIgKTsKICAgICAgICB9CiAgICAgICAgLy8gY2FsYyByZXR1cm4gcGF5bWVudCB0byBidXllcgogICAgICAgIHVpbnQgcmV0UGF5bWVudCA9IDA7CiAgICAgICAgaWYoICBtc2cudmFsdWUgPiAwICl7CiAgICAgICAgICAgIHJldFBheW1lbnQgPSBzYWZlU3ViKCBtc2cudmFsdWUgLCB0a25zQnV5QXBwciAqIHByaWNlT2ZyKTsKICAgICAgICB9CgogICAgICBtc2dTbmRyW21zZy5zZW5kZXJdID0gYW1vdW50VGtuczsgICAgICAgICAgICAgICAKICAgICAgICAKICAgICAgICAvLyBjaGVjayBidXllciBib29raW5nIGF0IGV4Y2hhbmdlCiAgICAgICAgRXhjaGcgZW0gPSBFeGNoZyhfZ2V0RXhjaGdBZGRyKCkpOyAKCiAgICAgICAgYm9vbCBzdWNzQmtnQ2hrID0gZmFsc2U7CiAgICAgICAgaWYodGtuc0J1eUFwcHIgPiAwKXsKCSAgICAgICAgc3Vjc0JrZ0NoayA9IGVtLmJ1eV9FeGNoZ19Ca2dDaGsoc2VsbGVyLCBhbW91bnRUa25zLCBwcmljZU9mciwgbXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgCiAgICAgICAgfQogICAgICAgIGlmKHN1Y3NCa2dDaGsgPT0gZmFsc2UpIHRrbnNCdXlBcHByID0gMDsKICAgICAgICAvLwoKCQkJbXNnU25kclttc2cuc2VuZGVyXSA9IHRrbnNCdXlBcHByOyAgCiAKICAgICAgICAJYm9vbCBlbVVwZGF0ZVN1Y2Nlc3M7CiAgICAgICAJCShlbVVwZGF0ZVN1Y2Nlc3MpID0gZW0udXBkYXRlU2VsbGVyKHNlbGxlciwgdGtuc0J1eUFwcHIsIG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7IAogICAgICAgIAlyZXF1aXJlKCBlbVVwZGF0ZVN1Y2Nlc3MgPT0gdHJ1ZSApOwogICAgICAgIAogICAgICAgIC8vCiAgICAgICAgaWYoc3Vjc0JrZ0NoayA9PSB0cnVlICYmIHRrbnNCdXlBcHByID4gMCl7CiAgICAgIAoJICAgICAgIC8vIHRva2VuIHRyYW5zZmVyIGluIHRoaXMgdG9rZW4gY29udHJhY3QKCgkgICAgICAgIGJvb2wgc3Vjc1RyVGtuID0gX3NhZmVUcmFuc2ZlclRrbiggc2VsbGVyLCBtc2cuc2VuZGVyLCB0a25zQnV5QXBwcik7CgkgICAgICAgIHJlcXVpcmUoc3Vjc1RyVGtuID09IHRydWUpOwoKCSAgICAgICAgLy8gcGF5bWVudCB0byBzZWxsZXIgICAgICAgIAoJICAgICAgICBib29sIHN1Y3NUclBheW1udDsKCSAgICAgICAgc3Vjc1RyUGF5bW50ID0gX3NhZmVUcmFuc2ZlclBheW1udCggc2VsbGVyLCAgc2FmZVN1YiggbXNnLnZhbHVlICwgc2FmZURpdihtc2cudmFsdWUqZW0uZ2V0RXhjaGdDb21pc25NdWxCeVRob3VzYW5kKCksMTAwMCkgKSApOwoJICAgICAgICByZXF1aXJlKHN1Y3NUclBheW1udCA9PSB0cnVlICk7ICAgICAgICAKICAgICAgICB9CiAgICAJLy8gcmV0dXJuIHBheW1lbnQgdG8gYnV5ZXIgCiAgICAgICAgaWYoIHJldFBheW1lbnQgPiAwICkgewogICAgICAgICAgICAgICAgCiAgICAgICAgICBib29sIHN1Y3NUclJldFBheW1udDsKICAgICAgICAgIHN1Y3NUclJldFBheW1udCA9IF9zYWZlVHJhbnNmZXJQYXltbnQoIG1zZy5zZW5kZXIsIHJldFBheW1lbnQgKTsKICAgICAgICAgIHJlcXVpcmUoc3Vjc1RyUmV0UGF5bW50ID09IHRydWUgKTsKICAgICAgICB9ICAgICAgICAgCiAgICAgIG1zZ1NuZHJbbXNnLnNlbmRlcl0gPSAwOyAKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gCi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwovLyAgY2FsbGVkIGJ5IG90aGVyIGNvbnRyYWN0cwogICAgZnVuY3Rpb24gc2VuZE1zZ1NuZHIoYWRkcmVzcyBjYWxsZXIsIGFkZHJlc3Mgb3JpZ2luKSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MsIHVpbnQgdmFsdWUpewogICAgICAgIAogICAgICAgIChzdWNjZXNzLCB2YWx1ZSkgPSBfc2VuZE1zZ1NuZHIoY2FsbGVyLCBvcmlnaW4pOyAgICAgICAgCiAgICAgICAgIHJldHVybihzdWNjZXNzLCB2YWx1ZSk7ICAKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCi8vCiAgICBmdW5jdGlvbiBfc2VuZE1zZ1NuZHIoYWRkcmVzcyBjYWxsZXIsICBhZGRyZXNzIG9yaWdpbikgaW50ZXJuYWwgcmV0dXJucyhib29sIHN1Y2Nlc3MsIHVpbnQgdmFsdWUpeyAKICAgICAgIAogICAgICAgIHJlcXVpcmUoIGNhbGxlciA9PSBfZ2V0SWNvQWRkcigpIHx8IGNhbGxlciA9PSBfZ2V0RXhjaGdBZGRyKCkgfHwgY2FsbGVyID09IF9nZXRDc0FkZHIoKSApOyAKICAgICAgICAgIC8vcmVxdWlyZShvcmlnaW4gPT0gdHgub3JpZ2luKTsgICAgICAgICAgCiAgICAgICAgcmV0dXJuKHRydWUsIG1zZ1NuZHJbb3JpZ2luXSk7ICAKICAgIH0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KICAgIGZ1bmN0aW9uIHZpZXdTZWxsT2ZmZXJzQXRFeGNoYW5nZU1hY3JvYW5zeShhZGRyZXNzIHNlbGxlciwgYm9vbCBzaG93KSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50IHNlbGxlcnNDb2luQW1vdW50T2ZmZXIsIHVpbnQgc2VsbGVyc1ByaWNlT2ZPbmVDb2luSW5XRUksIHVpbnQgc2VsbGVyQm9va2VkVGltZSwgYWRkcmVzcyBidXllcldob0Jvb2tlZCwgdWludCBidXlQYXltZW50Qm9va2VkLCB1aW50IGJ1eWVyQm9va2VkVGltZSl7CgogICAgICBpZihzaG93ID09IHRydWUpewoKICAgICAgICBFeGNoZyBlbSA9IEV4Y2hnKF9nZXRFeGNoZ0FkZHIoKSk7IAogICAgICAgCiAgICAgICAgKCBzZWxsZXJzQ29pbkFtb3VudE9mZmVyLCAgc2VsbGVyc1ByaWNlT2ZPbmVDb2luSW5XRUksICBzZWxsZXJCb29rZWRUaW1lLCAgYnV5ZXJXaG9Cb29rZWQsICBidXlQYXltZW50Qm9va2VkLCAgYnV5ZXJCb29rZWRUaW1lLCApID0gZW0udmlld1NlbGxPZmZlcnNBdEV4Y2hhbmdlTWFjcm9hbnN5KCBzZWxsZXIsIHNob3cpIDsgCgogICAgICAgIHJldHVybiAoIHNlbGxlcnNDb2luQW1vdW50T2ZmZXIsICBzZWxsZXJzUHJpY2VPZk9uZUNvaW5JbldFSSwgIHNlbGxlckJvb2tlZFRpbWUsICBidXllcldob0Jvb2tlZCwgIGJ1eVBheW1lbnRCb29rZWQsICBidXllckJvb2tlZFRpbWUpOwogICAgICB9CiAgICB9Ci8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCi8vCgkJZnVuY3Rpb24gdmlld0NvaW5TdXBwbHlBbmRGdW5kaW5nKGJvb2wgc2hvdykgcHVibGljIHZpZXcgcmV0dXJucyh1aW50IHRvdGFsU3VwcGx5T2ZDb2luc0luU2VyaWVzTm93LCB1aW50IGNvaW5zQXZhaWxhYmxlRm9yU2FsZSwgdWludCBpY29GdW5kaW5nKXsKCgkJICAgIGlmKHNob3cgPT0gdHJ1ZSl7CgkJICAgICAgSUNPIGljbyA9IElDTyggX2dldEljb0FkZHIoKSApOwoKCQkgICAgICAoIHRvdGFsU3VwcGx5T2ZDb2luc0luU2VyaWVzTm93LCBjb2luc0F2YWlsYWJsZUZvclNhbGUsIGljb0Z1bmRpbmcpID0gaWNvLmdldEF2bFNoYXJlcyhzaG93KTsKCgkJICAgICAgcmV0dXJuKCB0b3RhbFN1cHBseU9mQ29pbnNJblNlcmllc05vdywgY29pbnNBdmFpbGFibGVGb3JTYWxlLCBpY29GdW5kaW5nKTsKCQkgICAgfQoJCX0KLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KLy8KLyogICAgCQkJCgkJCWJvb2wgcHJpdmF0ZSBpc0VuZE9rOwoJCQkJZnVuY3Rpb24gZW5kT2ZSZXdhcmRzKGJvb2wgaXNFbmROb3cpIHB1YmxpYyBvbmx5T3duZXIgewoKCQkJCQkJaXNFbmRPayA9PSBpc0VuZE5vdzsKCQkJCX0KCQkJCWZ1bmN0aW9uIGVuZE9mUmV3YXJkc0NvbmZpcm1lZChib29sIGlzRW5kTm93KSBwdWJsaWMgb25seU93bmVyewoKCQkJCQlpZihpc0VuZE9rID09IHRydWUgJiYgaXNFbmROb3cgPT0gdHJ1ZSkgc2VsZmRlc3RydWN0KG93bmVyKTsKCQkJCX0KKi8JCQkKLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCn0KLy8gRU5EX09GX0NPTlRSQUNU'.
	

]
