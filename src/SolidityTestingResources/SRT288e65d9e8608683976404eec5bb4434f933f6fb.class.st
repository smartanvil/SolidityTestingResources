Class {
	#name : #SRT288e65d9e8608683976404eec5bb4434f933f6fb,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT288e65d9e8608683976404eec5bb4434f933f6fb >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IDAuNC4yMTsKCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICAvKioKICAgICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAoYSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgICAqLwogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAgICovCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgICAqIGFjY291bnQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgICAqLwogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGVtaXQgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQoKfQoKCmNvbnRyYWN0IENyeXB0b1JvYm90aWNzVG9rZW4gewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiB2YWx1ZSkgcHVibGljOwp9CgoKY29udHJhY3QgUmVmdW5kVmF1bHQgaXMgT3duYWJsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBlbnVtIFN0YXRlIHsgQWN0aXZlLCBSZWZ1bmRpbmcsIENsb3NlZCB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgZGVwb3NpdGVkOwogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwogICAgU3RhdGUgcHVibGljIHN0YXRlOwoKICAgIGV2ZW50IENsb3NlZCgpOwogICAgZXZlbnQgUmVmdW5kc0VuYWJsZWQoKTsKICAgIGV2ZW50IFJlZnVuZGVkKGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB3ZWlBbW91bnQpOwoKICAgIC8qKgogICAgICogQHBhcmFtIF93YWxsZXQgVmF1bHQgYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiBSZWZ1bmRWYXVsdChhZGRyZXNzIF93YWxsZXQpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfd2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5BY3RpdmU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0gaW52ZXN0b3IgSW52ZXN0b3IgYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiBkZXBvc2l0KGFkZHJlc3MgaW52ZXN0b3IpIG9ubHlPd25lciBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5BY3RpdmUpOwogICAgICAgIGRlcG9zaXRlZFtpbnZlc3Rvcl0gPSBkZXBvc2l0ZWRbaW52ZXN0b3JdLmFkZChtc2cudmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsb3NlKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5BY3RpdmUpOwogICAgICAgIHN0YXRlID0gU3RhdGUuQ2xvc2VkOwogICAgICAgIGVtaXQgQ2xvc2VkKCk7CiAgICAgICAgd2FsbGV0LnRyYW5zZmVyKGFkZHJlc3ModGhpcykuYmFsYW5jZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZW5hYmxlUmVmdW5kcygpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsKICAgICAgICBzdGF0ZSA9IFN0YXRlLlJlZnVuZGluZzsKICAgICAgICBlbWl0IFJlZnVuZHNFbmFibGVkKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0gaW52ZXN0b3IgSW52ZXN0b3IgYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiByZWZ1bmQoYWRkcmVzcyBpbnZlc3RvcikgcHVibGljIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlJlZnVuZGluZyk7CiAgICAgICAgdWludDI1NiBkZXBvc2l0ZWRWYWx1ZSA9IGRlcG9zaXRlZFtpbnZlc3Rvcl07CiAgICAgICAgZGVwb3NpdGVkW2ludmVzdG9yXSA9IDA7CiAgICAgICAgaW52ZXN0b3IudHJhbnNmZXIoZGVwb3NpdGVkVmFsdWUpOwogICAgICAgIGVtaXQgUmVmdW5kZWQoaW52ZXN0b3IsIGRlcG9zaXRlZFZhbHVlKTsKICAgIH0KfQoKCmNvbnRyYWN0IENyb3dkc2FsZSBpcyBPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIC8vIFRoZSB0b2tlbiBiZWluZyBzb2xkCiAgICBDcnlwdG9Sb2JvdGljc1Rva2VuIHB1YmxpYyB0b2tlbjsKICAgIC8vTUFLRSBBUFBST1ZBTCBUTyBDcm93ZHNhbGUKICAgIGFkZHJlc3MgcHVibGljIHJlc2VydmVfZnVuZCA9IDB4N0M4OEMyOTZCOTA0Mjk0NmY4MjFGNTQ1NmJkMDBFQTkyYTEzQjNCQjsKICAgIGFkZHJlc3MgcHJlaWNvOwoKICAgIC8vIEFkZHJlc3Mgd2hlcmUgZnVuZHMgYXJlIGNvbGxlY3RlZAogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwoKICAgIC8vIEFtb3VudCBvZiB3ZWkgcmFpc2VkCiAgICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWQ7CgogICAgdWludDI1NiBwdWJsaWMgb3BlbmluZ1RpbWU7CiAgICB1aW50MjU2IHB1YmxpYyBjbG9zaW5nVGltZTsKCiAgICBib29sIHB1YmxpYyBpc0ZpbmFsaXplZCA9IGZhbHNlOwoKICAgIHVpbnQgcHVibGljIGN1cnJlbnRTdGFnZSA9IDA7CgogICAgdWludDI1NiBwdWJsaWMgZ29hbCA9IDEwMDAgZXRoZXI7CiAgICB1aW50MjU2IHB1YmxpYyBjYXAgID0gNjg0MCAgZXRoZXI7CgogICAgUmVmdW5kVmF1bHQgcHVibGljIHZhdWx0OwoKCgogICAgLy9wcmljZSBpbiB3ZWkgZm9yIHN0YWdlCiAgICB1aW50WzRdIHB1YmxpYyBzdGFnZVByaWNlcyA9IFsKICAgIDEyNzUwMDAwMDAwMDAwMCB3ZWksICAgICAvLzAuMDAwMDg1IC0gSUNPIFN0YWdlIDEKICAgIDEzNSBzemFibywgICAgIC8vMC4wMDAwOTAgLSBJQ08gU3RhZ2UgMgogICAgMTQyNTAwMDAwMDAwMDAwIHdlaSwgICAgIC8vMC4wMDAwOTUgLSBJQ08gU3RhZ2UgMwogICAgMTUwIHN6YWJvICAgICAvLzAuMDAwMSAtIElDTyBTdGFnZSA0CiAgICBdOwoKICAgIC8vbGltaXQgaW4gd2VpIGZvciBzdGFnZSA2MTIgKyAxMjk2ICsgMjA1MiArIDI4ODAKICAgIHVpbnRbNF0gaW50ZXJuYWwgc3RhZ2VMaW1pdHMgPSBbCiAgICA2MTIgZXRoZXIsICAgIC8vNDgwMDAwMCB0b2tlbnMgMTAlIG9mIElDTyB0b2tlbnMgKElDTyB0b2tlbiA0MCUgb2YgYWxsICg0OCAwMDAgMDAwKSApCiAgICAxMjk2IGV0aGVyLCAgICAvLzk2MDAwMDAgdG9rZW5zIDIwJSBvZiBJQ08gdG9rZW5zCiAgICAyMDUyIGV0aGVyLCAgIC8vMTQ0MDAwMDAgdG9rZW5zIDMwJSBvZiBJQ08gdG9rZW5zCiAgICAyODgwIGV0aGVyICAgIC8vMTkyMDAwMDAgdG9rZW5zIDQwJSBvZiBJQ08gdG9rZW5zCiAgICBdOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgcmVmZXJyYWxzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyByZXNlcnZlZFRva2VuczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgcmVzZXJ2ZWRSZWZzVG9rZW5zOwogICAgdWludCBwdWJsaWMgYW1vdW50UmVzZXJ2ZWRUb2tlbnM7CiAgICB1aW50IHB1YmxpYyBhbW91bnRSZXNlcnZlZFJlZnNUb2tlbnM7CgogICAgZXZlbnQgRmluYWxpemVkKCk7CiAgICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgVG9rZW5SZXNlcnZlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50LCBhZGRyZXNzIHJlZmVycmFsKTsKCgogICAgbW9kaWZpZXIgb25seVdoaWxlT3BlbiB7CiAgICAgICAgcmVxdWlyZShub3cgPj0gb3BlbmluZ1RpbWUgJiYgbm93IDw9IGNsb3NpbmdUaW1lKTsKICAgICAgICBfOwogICAgfQoKCiAgICBtb2RpZmllciBvbmx5UHJlSWNvIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gcHJlaWNvKTsKICAgICAgICBfOwogICAgfQoKCiAgICBmdW5jdGlvbiBDcm93ZHNhbGUoQ3J5cHRvUm9ib3RpY3NUb2tlbiBfdG9rZW4pIHB1YmxpYwogICAgewogICAgICAgIHJlcXVpcmUoX3Rva2VuICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICB3YWxsZXQgPSAweEI0NkFiYjU5OEE5RjQwYzZiNjMzODgxRUFGZmNmNUY2NzU3NzNkNzc7CiAgICAgICAgdG9rZW4gPSBfdG9rZW47CiAgICAgICAgb3BlbmluZ1RpbWUgPSAxNTI2Nzc0NDAwOwogICAgICAgIGNsb3NpbmdUaW1lID0gMTUzMjA0NDgwMDsKICAgICAgICB2YXVsdCA9IG5ldyBSZWZ1bmRWYXVsdCh3YWxsZXQpOwogICAgfQoKCiAgICBmdW5jdGlvbiAoKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlciwgYWRkcmVzcygwKSk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIF9iZW5lZmljaWFyeSwgYWRkcmVzcyBfcmVmKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICAgICAgX3ByZVZhbGlkYXRlUHVyY2hhc2UoX2JlbmVmaWNpYXJ5LCB3ZWlBbW91bnQpOwogICAgICAgIF9nZXRUb2tlbkFtb3VudCh3ZWlBbW91bnQsdHJ1ZSxfYmVuZWZpY2lhcnksX3JlZik7CiAgICB9CgoKICAgIGZ1bmN0aW9uIHJlc2VydmVUb2tlbnMoYWRkcmVzcyBfcmVmKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICAgICAgX3ByZVZhbGlkYXRlUmVzZXJ2ZShtc2cuc2VuZGVyLCB3ZWlBbW91bnQsIF9yZWYpOwogICAgICAgIF9nZXRUb2tlbkFtb3VudCh3ZWlBbW91bnQsIGZhbHNlLG1zZy5zZW5kZXIsX3JlZik7CiAgICB9CgoKICAgIGZ1bmN0aW9uIF9wcmVWYWxpZGF0ZVB1cmNoYXNlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF93ZWlBbW91bnQpIGludGVybmFsIHZpZXcgb25seVdoaWxlT3BlbiB7CiAgICAgICAgcmVxdWlyZSh3ZWlSYWlzZWQuYWRkKF93ZWlBbW91bnQpIDw9IGNhcCk7CiAgICAgICAgcmVxdWlyZShfd2VpQW1vdW50ID49IHN0YWdlUHJpY2VzW2N1cnJlbnRTdGFnZV0pOwogICAgICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpOwoKICAgIH0KCiAgICBmdW5jdGlvbiBfcHJlVmFsaWRhdGVSZXNlcnZlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF93ZWlBbW91bnQsIGFkZHJlc3MgX3JlZikgaW50ZXJuYWwgdmlldyB7CiAgICAgICAgcmVxdWlyZShub3cgPCBvcGVuaW5nVGltZSk7CiAgICAgICAgcmVxdWlyZShyZWZlcnJhbHNbX3JlZl0pOwogICAgICAgIHJlcXVpcmUod2VpUmFpc2VkLmFkZChfd2VpQW1vdW50KSA8PSBjYXApOwogICAgICAgIHJlcXVpcmUoX3dlaUFtb3VudCA+PSBzdGFnZVByaWNlc1tjdXJyZW50U3RhZ2VdKTsKICAgICAgICByZXF1aXJlKF9iZW5lZmljaWFyeSAhPSBhZGRyZXNzKDApKTsKICAgIH0KCgogICAgZnVuY3Rpb24gX2RlbGl2ZXJUb2tlbnMoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQyNTYgX3Rva2VuQW1vdW50KSBpbnRlcm5hbCB7CiAgICAgICAgdG9rZW4udHJhbnNmZXIoX2JlbmVmaWNpYXJ5LCBfdG9rZW5BbW91bnQpOwogICAgfQoKCiAgICBmdW5jdGlvbiBfcHJvY2Vzc1B1cmNoYXNlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF90b2tlbkFtb3VudCwgYWRkcmVzcyBfcmVmKSBpbnRlcm5hbCB7CiAgICAgICAgX3Rva2VuQW1vdW50ID0gX3Rva2VuQW1vdW50ICogMSBldGhlcjsKICAgICAgICBfZGVsaXZlclRva2VucyhfYmVuZWZpY2lhcnksIF90b2tlbkFtb3VudCk7CiAgICAgICAgaWYgKHJlZmVycmFsc1tfcmVmXSkgewogICAgICAgICAgICB1aW50IF9yZWZUb2tlbnMgPSB2YWx1ZUZyb21QZXJjZW50KF90b2tlbkFtb3VudCwxMCk7CiAgICAgICAgICAgIHRva2VuLnRyYW5zZmVyRnJvbShyZXNlcnZlX2Z1bmQsIF9yZWYsIF9yZWZUb2tlbnMpOwogICAgICAgIH0KICAgIH0KCgogICAgZnVuY3Rpb24gX3Byb2Nlc3NSZXNlcnZlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF90b2tlbkFtb3VudCwgYWRkcmVzcyBfcmVmKSBpbnRlcm5hbCB7CiAgICAgICAgX3Rva2VuQW1vdW50ID0gX3Rva2VuQW1vdW50ICogMSBldGhlcjsKICAgICAgICBfcmVzZXJ2ZVRva2VucyhfYmVuZWZpY2lhcnksIF90b2tlbkFtb3VudCk7CiAgICAgICAgdWludCBfcmVmVG9rZW5zID0gdmFsdWVGcm9tUGVyY2VudChfdG9rZW5BbW91bnQsMTApOwogICAgICAgIF9yZXNlcnZlUmVmVG9rZW5zKF9yZWYsIF9yZWZUb2tlbnMpOwogICAgfQoKCiAgICBmdW5jdGlvbiBfcmVzZXJ2ZVRva2VucyhhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfdG9rZW5BbW91bnQpIGludGVybmFsIHsKICAgICAgICByZXNlcnZlZFRva2Vuc1tfYmVuZWZpY2lhcnldID0gcmVzZXJ2ZWRUb2tlbnNbX2JlbmVmaWNpYXJ5XS5hZGQoX3Rva2VuQW1vdW50KTsKICAgICAgICBhbW91bnRSZXNlcnZlZFRva2VucyA9IGFtb3VudFJlc2VydmVkVG9rZW5zLmFkZChfdG9rZW5BbW91bnQpOwogICAgfQoKCiAgICBmdW5jdGlvbiBfcmVzZXJ2ZVJlZlRva2VucyhhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfdG9rZW5BbW91bnQpIGludGVybmFsIHsKICAgICAgICByZXNlcnZlZFJlZnNUb2tlbnNbX2JlbmVmaWNpYXJ5XSA9IHJlc2VydmVkUmVmc1Rva2Vuc1tfYmVuZWZpY2lhcnldLmFkZChfdG9rZW5BbW91bnQpOwogICAgICAgIGFtb3VudFJlc2VydmVkUmVmc1Rva2VucyA9IGFtb3VudFJlc2VydmVkUmVmc1Rva2Vucy5hZGQoX3Rva2VuQW1vdW50KTsKICAgIH0KCgogICAgZnVuY3Rpb24gZ2V0UmVzZXJ2ZWRUb2tlbnMoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobm93ID49IG9wZW5pbmdUaW1lKTsKICAgICAgICByZXF1aXJlKHJlc2VydmVkVG9rZW5zW21zZy5zZW5kZXJdID4gMCk7CiAgICAgICAgYW1vdW50UmVzZXJ2ZWRUb2tlbnMgPSBhbW91bnRSZXNlcnZlZFRva2Vucy5zdWIocmVzZXJ2ZWRUb2tlbnNbbXNnLnNlbmRlcl0pOwogICAgICAgIHJlc2VydmVkVG9rZW5zW21zZy5zZW5kZXJdID0gMDsKICAgICAgICB0b2tlbi50cmFuc2Zlcihtc2cuc2VuZGVyLCByZXNlcnZlZFRva2Vuc1ttc2cuc2VuZGVyXSk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldFJlZlJlc2VydmVkVG9rZW5zKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG5vdyA+PSBvcGVuaW5nVGltZSk7CiAgICAgICAgcmVxdWlyZShyZXNlcnZlZFJlZnNUb2tlbnNbbXNnLnNlbmRlcl0gPiAwKTsKICAgICAgICBhbW91bnRSZXNlcnZlZFJlZnNUb2tlbnMgPSBhbW91bnRSZXNlcnZlZFJlZnNUb2tlbnMuc3ViKHJlc2VydmVkUmVmc1Rva2Vuc1ttc2cuc2VuZGVyXSk7CiAgICAgICAgcmVzZXJ2ZWRSZWZzVG9rZW5zW21zZy5zZW5kZXJdID0gMDsKICAgICAgICB0b2tlbi50cmFuc2ZlckZyb20ocmVzZXJ2ZV9mdW5kLCBtc2cuc2VuZGVyLCByZXNlcnZlZFJlZnNUb2tlbnNbbXNnLnNlbmRlcl0pOwogICAgfQoKCiAgICBmdW5jdGlvbiB2YWx1ZUZyb21QZXJjZW50KHVpbnQgX3ZhbHVlLCB1aW50IF9wZXJjZW50KSBpbnRlcm5hbCBwdXJlIHJldHVybnModWludCBhbW91bnQpICAgIHsKICAgICAgICB1aW50IF9hbW91bnQgPSBfdmFsdWUubXVsKF9wZXJjZW50KS5kaXYoMTAwKTsKICAgICAgICByZXR1cm4gKF9hbW91bnQpOwogICAgfQoKCiAgICBmdW5jdGlvbiBfZ2V0VG9rZW5BbW91bnQodWludDI1NiBfd2VpQW1vdW50LCBib29sIF9idXksIGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCBhZGRyZXNzIF9yZWYpIGludGVybmFsIHsKICAgICAgICB1aW50MjU2IHdlaUFtb3VudCA9IF93ZWlBbW91bnQ7CiAgICAgICAgdWludCBfdG9rZW5zID0gMDsKICAgICAgICB1aW50IF90b2tlbnNfcHJpY2UgPSAwOwogICAgICAgIHVpbnQgX2N1cnJlbnRfdG9rZW5zID0gMDsKCiAgICAgICAgZm9yICh1aW50IHAgPSBjdXJyZW50U3RhZ2U7IHAgPCA0ICYmIF93ZWlBbW91bnQgPj0gc3RhZ2VQcmljZXNbcF07IHArKykgewogICAgICAgICAgICBpZiAoc3RhZ2VMaW1pdHNbcF0gPiAwICkgewogICAgICAgICAgICAgICAgLy/QtdGB0LvQuCDQu9C40LzQuNGCINCx0L7Qu9GM0YjQtSDRh9C10LwgX3dlaUFtb3VudCwg0YLQvtCz0LTQsCDRgdGH0LjRgtCw0LXQvCDQstGB0LUg0LjQtyDRgNCw0YHRh9C10YLQsCDRh9GC0L4g0LLQv9C40YHRi9Cy0LDQtdC80YHRjyDQsiDQu9C40LzQuNGCCiAgICAgICAgICAgICAgICAvL9C4INCy0YvRhdC+0LTQuNC8INC40Lcg0YbQuNC60LvQsAogICAgICAgICAgICAgICAgaWYgKHN0YWdlTGltaXRzW3BdID4gX3dlaUFtb3VudCkgewogICAgICAgICAgICAgICAgICAgIC8v0LrQvtC70LjRh9C10YHRgtCy0L4g0YLQvtC60LXQvdC+0LIg0L/QviDRgtC10LrRg9GJ0LXQvNGDINC/0YDQsNC50YHRgyAo0L7RgdGC0LDQvdC10YLRgdGPINC+0YHRgtCw0YLQvtC6INC10YHQu9C4INC/0YDQuNGB0LvQsNC70LggINCx0L7Qu9GM0YjQtSDRh9C10Lwg0L3QsCDRgtC+0YfQvdC+0LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0LzQvtC90LXRgikKICAgICAgICAgICAgICAgICAgICBfY3VycmVudF90b2tlbnMgPSBfd2VpQW1vdW50LmRpdihzdGFnZVByaWNlc1twXSk7CiAgICAgICAgICAgICAgICAgICAgLy/RhtC10L3QsCDQstGB0LXRhSDQvNC+0L3QtdGCLCDRh9GC0L7QsdGLINC+0L/RgNC10LTQtdC70LjRgtGMINC+0YHRgtCw0YLQvtC6INC90LXQuNC30YDQsNGB0YXQvtC00L7QstCw0L3QvdGL0YUgd2VpCiAgICAgICAgICAgICAgICAgICAgX3Rva2Vuc19wcmljZSA9IF9jdXJyZW50X3Rva2Vucy5tdWwoc3RhZ2VQcmljZXNbcF0pOwogICAgICAgICAgICAgICAgICAgIC8v0L/QvtC70YPRh9Cw0LXQvCDQvtGB0YLQsNGC0L7QugogICAgICAgICAgICAgICAgICAgIF93ZWlBbW91bnQgPSBfd2VpQW1vdW50LnN1YihfdG9rZW5zX3ByaWNlKTsKICAgICAgICAgICAgICAgICAgICAvL9C00L7QsdCw0LLQu9GP0LXQvCDRgtC+0LrQtdC90Ysg0YLQtdC60YPRidC10LPQviDRgdGC0Y3QudC00LbQsCDQuiDQvtCx0YnQtdC80YMg0LrQvtC70LjRh9C10YHRgtCy0YMKICAgICAgICAgICAgICAgICAgICBfdG9rZW5zID0gX3Rva2Vucy5hZGQoX2N1cnJlbnRfdG9rZW5zKTsKICAgICAgICAgICAgICAgICAgICAvL9C+0LHQvdC+0LLQu9GP0LXQvCDQu9C40LzQuNGC0YsKICAgICAgICAgICAgICAgICAgICBzdGFnZUxpbWl0c1twXSA9IHN0YWdlTGltaXRzW3BdLnN1YihfdG9rZW5zX3ByaWNlKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8v0LvQuNC80LjRgiDQvNC10L3RjNGI0LUg0YfQtdC8INC60L7Qu9C40YfQtdGB0YLQstC+IHdlaQogICAgICAgICAgICAgICAgICAgIC8v0L/QvtC70YPRh9Cw0LXQvCDQstGB0LUg0L7RgdGC0LDQstGI0LjQtdGB0Y8g0YLQvtC60LXQvdGLINCyINGB0YLQtdC50LTQttC1CiAgICAgICAgICAgICAgICAgICAgX2N1cnJlbnRfdG9rZW5zID0gc3RhZ2VMaW1pdHNbcF0uZGl2KHN0YWdlUHJpY2VzW3BdKTsKICAgICAgICAgICAgICAgICAgICBfd2VpQW1vdW50ID0gX3dlaUFtb3VudC5zdWIoc3RhZ2VMaW1pdHNbcF0pOwogICAgICAgICAgICAgICAgICAgIF90b2tlbnMgPSBfdG9rZW5zLmFkZChfY3VycmVudF90b2tlbnMpOwogICAgICAgICAgICAgICAgICAgIHN0YWdlTGltaXRzW3BdID0gMDsKICAgICAgICAgICAgICAgICAgICBfdXBkYXRlU3RhZ2UoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHdlaUFtb3VudCA9IHdlaUFtb3VudC5zdWIoX3dlaUFtb3VudCk7CiAgICAgICAgd2VpUmFpc2VkID0gd2VpUmFpc2VkLmFkZCh3ZWlBbW91bnQpOwoKICAgICAgICBpZiAoX2J1eSkgewogICAgICAgICAgICBfcHJvY2Vzc1B1cmNoYXNlKF9iZW5lZmljaWFyeSwgX3Rva2VucywgX3JlZik7CiAgICAgICAgICAgIGVtaXQgVG9rZW5QdXJjaGFzZShtc2cuc2VuZGVyLCBfYmVuZWZpY2lhcnksIHdlaUFtb3VudCwgX3Rva2Vucyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3Byb2Nlc3NSZXNlcnZlKG1zZy5zZW5kZXIsIF90b2tlbnMsIF9yZWYpOwogICAgICAgICAgICBlbWl0IFRva2VuUmVzZXJ2ZWQobXNnLnNlbmRlciwgd2VpQW1vdW50LCBfdG9rZW5zLCBfcmVmKTsKICAgICAgICB9CgogICAgICAgIC8v0L7RgtC/0YDQsNCy0LvRj9C10Lwg0L7QsdGA0LDRgtC90L4g0L3QtdC40LfRgNCw0YHRhdC+0LTQvtCy0LDQvdC90YvQuSDQvtGB0YLQsNGC0L7QugogICAgICAgIGlmIChfd2VpQW1vdW50ID4gMCkgewogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKF93ZWlBbW91bnQpOwogICAgICAgIH0KCiAgICAgICAgLy8gdXBkYXRlIHN0YXRlCgoKICAgICAgICBfZm9yd2FyZEZ1bmRzKHdlaUFtb3VudCk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIF91cGRhdGVTdGFnZSgpIGludGVybmFsIHsKICAgICAgICBpZiAoKHN0YWdlTGltaXRzW2N1cnJlbnRTdGFnZV0gPT0gMCkgJiYgY3VycmVudFN0YWdlIDwgMykgewogICAgICAgICAgICBjdXJyZW50U3RhZ2UrKzsKICAgICAgICB9CiAgICB9CgoKICAgIGZ1bmN0aW9uIF9mb3J3YXJkRnVuZHModWludCBfd2VpQW1vdW50KSBpbnRlcm5hbCB7CiAgICAgICAgdmF1bHQuZGVwb3NpdC52YWx1ZShfd2VpQW1vdW50KShtc2cuc2VuZGVyKTsKICAgIH0KCgogICAgZnVuY3Rpb24gaGFzQ2xvc2VkKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBub3cgPiBjbG9zaW5nVGltZTsKICAgIH0KCgogICAgZnVuY3Rpb24gY2FwUmVhY2hlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gd2VpUmFpc2VkID49IGNhcDsKICAgIH0KCgogICAgZnVuY3Rpb24gZ29hbFJlYWNoZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHdlaVJhaXNlZCA+PSBnb2FsOwogICAgfQoKCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoIWlzRmluYWxpemVkKTsKICAgICAgICByZXF1aXJlKGhhc0Nsb3NlZCgpIHx8IGNhcFJlYWNoZWQoKSk7CgogICAgICAgIGZpbmFsaXphdGlvbigpOwogICAgICAgIGVtaXQgRmluYWxpemVkKCk7CgogICAgICAgIGlzRmluYWxpemVkID0gdHJ1ZTsKICAgIH0KCgogICAgZnVuY3Rpb24gZmluYWxpemF0aW9uKCkgaW50ZXJuYWwgewogICAgICAgIGlmIChnb2FsUmVhY2hlZCgpKSB7CiAgICAgICAgICAgIHZhdWx0LmNsb3NlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmF1bHQuZW5hYmxlUmVmdW5kcygpOwogICAgICAgIH0KCiAgICAgICAgdWludCB0b2tlbl9iYWxhY2UgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgdG9rZW5fYmFsYWNlID0gdG9rZW5fYmFsYWNlLnN1YihhbW91bnRSZXNlcnZlZFRva2Vucyk7Ly8KICAgICAgICB0b2tlbi5idXJuKHRva2VuX2JhbGFjZSk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGFkZFJlZmVycmFsKGFkZHJlc3MgX3JlZikgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZWZlcnJhbHNbX3JlZl0gPSB0cnVlOwogICAgfQoKCiAgICBmdW5jdGlvbiByZW1vdmVSZWZlcnJhbChhZGRyZXNzIF9yZWYpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcmVmZXJyYWxzW19yZWZdID0gZmFsc2U7CiAgICB9CgoKICAgIGZ1bmN0aW9uIHNldFByZUljbyhhZGRyZXNzIF9wcmVpY28pIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHByZWljbyA9IF9wcmVpY287CiAgICB9CgoKICAgIGZ1bmN0aW9uIHNldFRva2VuQ291bnRGcm9tUHJlSWNvKHVpbnQgX3ZhbHVlKSBvbmx5UHJlSWNvIHB1YmxpY3sKICAgICAgICBfdmFsdWUgPSBfdmFsdWUuZGl2KDEgZXRoZXIpOwogICAgICAgIHVpbnQgd2VpcyA9IF92YWx1ZS5tdWwoc3RhZ2VQcmljZXNbM10pOwogICAgICAgIHN0YWdlTGltaXRzWzNdID0gc3RhZ2VMaW1pdHNbM10uYWRkKHdlaXMpOwogICAgICAgIGNhcCA9IGNhcC5hZGQod2Vpcyk7CgogICAgfQoKCiAgICBmdW5jdGlvbiBjbGFpbVJlZnVuZCgpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShpc0ZpbmFsaXplZCk7CiAgICAgICAgcmVxdWlyZSghZ29hbFJlYWNoZWQoKSk7CgogICAgICAgIHZhdWx0LnJlZnVuZChtc2cuc2VuZGVyKTsKICAgIH0KCn0='.
	

]
