Class {
	#name : #SRT826f6d1242231b70832d009f7d2c99a0ca8b7a12,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT826f6d1242231b70832d009f7d2c99a0ca8b7a12 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7IAoKCgovLy8gQHRpdGxlIEludGVyZmFjZSBmb3IgY29udHJhY3RzIGNvbmZvcm1pbmcgdG8gRVJDLTcyMTogTm9uLUZ1bmdpYmxlIFRva2Vucwpjb250cmFjdCBFUkM3MjEgewogIC8vIFJlcXVpcmVkIG1ldGhvZHMKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgYWRkcik7CiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHRva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIGFwcHJvdmVkLCB1aW50MjU2IHRva2VuSWQpOwoKICAvLyBPcHRpb25hbAogIC8vIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgbmFtZSk7CiAgLy8gZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIHN5bWJvbCk7CiAgLy8gZnVuY3Rpb24gdG9rZW5PZk93bmVyQnlJbmRleChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfaW5kZXgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiB0b2tlbklkKTsKICAvLyBmdW5jdGlvbiB0b2tlbk1ldGFkYXRhKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBpbmZvVXJsKTsKfQoKCmNvbnRyYWN0IENyeXB0b1Bvb3NUb2tlbiBpcyBFUkM3MjEgewoKICAvLyBNb2RpZmllZCBDcnlwdG9DZWxlYnMgY29udHJhY3QKICAvKioqIEVWRU5UUyAqKiovCgogIC8vLyBAZGV2IFRoZSBCaXJ0aCBldmVudCBpcyBmaXJlZCB3aGVuZXZlciBhIG5ldyBwb28gY29tZXMgaW50byBleGlzdGVuY2UuCiAgZXZlbnQgQmlydGgodWludDI1NiB0b2tlbklkLCBzdHJpbmcgbmFtZSwgYWRkcmVzcyBvd25lcik7CgogIC8vLyBAZGV2IFRoZSBUb2tlblNvbGQgZXZlbnQgaXMgZmlyZWQgd2hlbmV2ZXIgYSB0b2tlbiBpcyBzb2xkLgogIGV2ZW50IFRva2VuU29sZCh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgb2xkUHJpY2UsIHVpbnQyNTYgbmV3UHJpY2UsIGFkZHJlc3MgcHJldk93bmVyLCBhZGRyZXNzIHdpbm5lciwgc3RyaW5nIG5hbWUpOwoKICAvLy8gQGRldiBUcmFuc2ZlciBldmVudCBhcyBkZWZpbmVkIGluIGN1cnJlbnQgZHJhZnQgb2YgRVJDNzIxLiAKICAvLy8gIG93bmVyc2hpcCBpcyBhc3NpZ25lZCwgaW5jbHVkaW5nIGJpcnRocy4KICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CgogIC8vIFRyaWdnZXJlZCBvbiB0b2lsZXQgZmx1c2gKICBldmVudCBUb2lsZXRQb3RDaGFuZ2UoKTsKCiAgLyoqKiBDT05TVEFOVFMgKioqLwoKICAvLy8gQG5vdGljZSBOYW1lIGFuZCBzeW1ib2wgb2YgdGhlIG5vbiBmdW5naWJsZSB0b2tlbiwgYXMgZGVmaW5lZCBpbiBFUkM3MjEuCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBOQU1FID0gIkNyeXB0b1Bvb3MiOyAvLyBzb2xoaW50LWRpc2FibGUtbGluZQogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1lNQk9MID0gIkNyeXB0b1Bvb3NUb2tlbiI7IC8vIHNvbGhpbnQtZGlzYWJsZS1saW5lCgogIHVpbnQyNTYgcHJpdmF0ZSBzdGFydGluZ1ByaWNlID0gMC4wMDUgZXRoZXI7CiAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IFBST01PX0NSRUFUSU9OX0xJTUlUID0gNTAwMDsKICAKICAvLyBNaW4gcHJpY2UgdG8gZmx1c2ggdGhlIHRvaWxldAogIHVpbnQyNTYgcHJpdmF0ZSBtaW5GbHVzaFByaWNlID0gMC4wMDIgZXRoZXI7CgoKICAvKioqIFNUT1JBR0UgKioqLwoKICAvLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBwb28gSURzIHRvIHRoZSBhZGRyZXNzIHRoYXQgb3ducyB0aGVtLiBBbGwgcG9vcyBoYXZlCiAgLy8vICBzb21lIHZhbGlkIG93bmVyIGFkZHJlc3MuCiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgcG9vSW5kZXhUb093bmVyOwoKICAvLyBAZGV2IEEgbWFwcGluZyBmcm9tIG93bmVyIGFkZHJlc3MgdG8gY291bnQgb2YgdG9rZW5zIHRoYXQgYWRkcmVzcyBvd25zLgogIC8vICBVc2VkIGludGVybmFsbHkgaW5zaWRlIGJhbGFuY2VPZigpIHRvIHJlc29sdmUgb3duZXJzaGlwIGNvdW50LgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBvd25lcnNoaXBUb2tlbkNvdW50OwoKICAvLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBQb29JRHMgdG8gYW4gYWRkcmVzcyB0aGF0IGhhcyBiZWVuIGFwcHJvdmVkIHRvIGNhbGwKICAvLy8gIHRyYW5zZmVyRnJvbSgpLiBFYWNoIHBvbyBjYW4gb25seSBoYXZlIG9uZSBhcHByb3ZlZCBhZGRyZXNzIGZvciB0cmFuc2ZlcgogIC8vLyAgYXQgYW55IHRpbWUuIEEgemVybyB2YWx1ZSBtZWFucyBubyBhcHByb3ZhbCBpcyBvdXRzdGFuZGluZy4KICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBwb29JbmRleFRvQXBwcm92ZWQ7CgogIC8vIEBkZXYgQSBtYXBwaW5nIGZyb20gUG9vSURzIHRvIHRoZSBwcmljZSBvZiB0aGUgdG9rZW4uCiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIHBvb0luZGV4VG9QcmljZTsKICAKICAvLyBUaGUgYWRkcmVzc2VzIG9mIHRoZSBhY2NvdW50cyAob3IgY29udHJhY3RzKSB0aGF0IGNhbiBleGVjdXRlIGFjdGlvbnMgd2l0aGluIGVhY2ggcm9sZXMuCiAgYWRkcmVzcyBwdWJsaWMgY2VvQWRkcmVzczsKICBhZGRyZXNzIHB1YmxpYyBjb29BZGRyZXNzOwogIAogIHVpbnQyNTYgcm91bmRDb3VudGVyOwogIGFkZHJlc3MgbGFzdEZsdXNoZXI7ICAgLy8gUGVyc29uIHRoYXQgZmx1c2hlZAogIHVpbnQyNTYgZmx1c2hlZFRva2VuSWQ7ICAgLy8gUG9vIHRoYXQgZ290IGZsdXNoZWQKICB1aW50MjU2IGxhc3RQb3RTaXplOyAvL1N0b3JlcyBsYXN0IHBvdCBzaXplIG9idmlvdXNseQogIHVpbnQyNTYgZ29sZGVuUG9vSWQ7IC8vIEN1cnJlbnQgZ29sZGVuIHBvbyBpZAogIHVpbnQgcHVibGljIGxhc3RQdXJjaGFzZVRpbWU7IC8vIFRyYWNrcyB0aW1lIHNpbmNlIGxhc3QgcHVyY2hhc2UKCiAgLyoqKiBEQVRBVFlQRVMgKioqLwogIHN0cnVjdCBQb28gewogICAgc3RyaW5nIG5hbWU7CiAgfQoKICBQb29bXSBwcml2YXRlIHBvb3M7CgogIC8qKiogQUNDRVNTIE1PRElGSUVSUyAqKiovCiAgLy8vIEBkZXYgQWNjZXNzIG1vZGlmaWVyIGZvciBDRU8tb25seSBmdW5jdGlvbmFsaXR5CiAgbW9kaWZpZXIgb25seUNFTygpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjZW9BZGRyZXNzKTsKICAgIF87CiAgfQoKICAvLy8gQGRldiBBY2Nlc3MgbW9kaWZpZXIgZm9yIENPTy1vbmx5IGZ1bmN0aW9uYWxpdHkKICBtb2RpZmllciBvbmx5Q09PKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MpOwogICAgXzsKICB9CgogIC8vLyBBY2Nlc3MgbW9kaWZpZXIgZm9yIGNvbnRyYWN0IG93bmVyIG9ubHkgZnVuY3Rpb25hbGl0eQogIG1vZGlmaWVyIG9ubHlDTGV2ZWwoKSB7CiAgICByZXF1aXJlKAogICAgICBtc2cuc2VuZGVyID09IGNlb0FkZHJlc3MgfHwKICAgICAgbXNnLnNlbmRlciA9PSBjb29BZGRyZXNzCiAgICApOwogICAgXzsKICB9CgogIC8qKiogQ09OU1RSVUNUT1IgKioqLwogIGZ1bmN0aW9uIENyeXB0b1Bvb3NUb2tlbigpIHB1YmxpYyB7CiAgICBjZW9BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgIGNvb0FkZHJlc3MgPSBtc2cuc2VuZGVyOwoJCgljcmVhdGVDb250cmFjdFBvbygiMSIpOwoJY3JlYXRlQ29udHJhY3RQb28oIjIiKTsKCWNyZWF0ZUNvbnRyYWN0UG9vKCIzIik7CgljcmVhdGVDb250cmFjdFBvbygiNCIpOwoJY3JlYXRlQ29udHJhY3RQb28oIjUiKTsKCWNyZWF0ZUNvbnRyYWN0UG9vKCI2Iik7Cglyb3VuZENvdW50ZXIgPSAxOwogIH0KCiAgLyoqKiBQVUJMSUMgRlVOQ1RJT05TICoqKi8KICAvLy8gQG5vdGljZSBHcmFudCBhbm90aGVyIGFkZHJlc3MgdGhlIHJpZ2h0IHRvIHRyYW5zZmVyIHRva2VuIHZpYSB0YWtlT3duZXJzaGlwKCkgYW5kIHRyYW5zZmVyRnJvbSgpLgogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIGJlIGdyYW50ZWQgdHJhbnNmZXIgYXBwcm92YWwuIFBhc3MgYWRkcmVzcygwKSB0bwogIC8vLyAgY2xlYXIgYWxsIGFwcHJvdmFscy4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gYXBwcm92ZSgKICAgIGFkZHJlc3MgX3RvLAogICAgdWludDI1NiBfdG9rZW5JZAogICkgcHVibGljIHsKICAgIC8vIENhbGxlciBtdXN0IG93biB0b2tlbi4KICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKCiAgICBwb29JbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdID0gX3RvOwoKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgLy8vIEZvciBxdWVyeWluZyBiYWxhbmNlIG9mIGEgcGFydGljdWxhciBhY2NvdW50CiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZm9yIGJhbGFuY2UgcXVlcnkKICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gb3duZXJzaGlwVG9rZW5Db3VudFtfb3duZXJdOwogIH0KCiAgLy8vIEBkZXYgQ3JlYXRlcyBhIG5ldyBwb28gd2l0aCB0aGUgZ2l2ZW4gbmFtZS4KICBmdW5jdGlvbiBjcmVhdGVDb250cmFjdFBvbyhzdHJpbmcgX25hbWUpIHB1YmxpYyBvbmx5Q09PIHsKICAgIF9jcmVhdGVQb28oX25hbWUsIGFkZHJlc3ModGhpcyksIHN0YXJ0aW5nUHJpY2UpOwogIH0KCiAgLy8vIEBub3RpY2UgUmV0dXJucyBhbGwgdGhlIHJlbGV2YW50IGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgcG9vLgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIHRva2VuSWQgb2YgdGhlIHBvbyBvZiBpbnRlcmVzdC4KICBmdW5jdGlvbiBnZXRQb28odWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoCiAgICBzdHJpbmcgcG9vTmFtZSwKICAgIHVpbnQyNTYgc2VsbGluZ1ByaWNlLAogICAgYWRkcmVzcyBvd25lcgogICkgewogICAgUG9vIHN0b3JhZ2UgcG9vID0gcG9vc1tfdG9rZW5JZF07CiAgICBwb29OYW1lID0gcG9vLm5hbWU7CiAgICBzZWxsaW5nUHJpY2UgPSBwb29JbmRleFRvUHJpY2VbX3Rva2VuSWRdOwogICAgb3duZXIgPSBwb29JbmRleFRvT3duZXJbX3Rva2VuSWRdOwogIH0KCiAgZnVuY3Rpb24gZ2V0Um91bmREZXRhaWxzKCkgcHVibGljIHZpZXcgcmV0dXJucyAoCiAgICB1aW50MjU2IGN1cnJlbnRSb3VuZCwKCXVpbnQyNTYgY3VycmVudEJhbGFuY2UsCgl1aW50MjU2IGN1cnJlbnRHb2xkZW5Qb28sCgl1aW50MjU2IGxhc3RSb3VuZFJld2FyZCwKICAgIHVpbnQyNTYgbGFzdEZsdXNoZWRUb2tlbklkLAogICAgYWRkcmVzcyBsYXN0Um91bmRGbHVzaGVyLAoJYm9vbCBib251c1dpbkNoYW5jZSwKCXVpbnQyNTYgbG93ZXN0Rmx1c2hQcmljZQogICkgewoJY3VycmVudFJvdW5kID0gcm91bmRDb3VudGVyOwoJY3VycmVudEJhbGFuY2UgPSB0aGlzLmJhbGFuY2U7CgljdXJyZW50R29sZGVuUG9vID0gZ29sZGVuUG9vSWQ7CglsYXN0Um91bmRSZXdhcmQgPSBsYXN0UG90U2l6ZTsKCWxhc3RGbHVzaGVkVG9rZW5JZCA9IGZsdXNoZWRUb2tlbklkOwoJbGFzdFJvdW5kRmx1c2hlciA9IGxhc3RGbHVzaGVyOwoJYm9udXNXaW5DaGFuY2UgPSBfaW5jcmVhc2VXaW5Qb3RDaGFuY2UoKTsKCWxvd2VzdEZsdXNoUHJpY2UgPSBtaW5GbHVzaFByaWNlOwogIH0KCiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICByZXR1cm4gTkFNRTsKICB9CgogIC8vLyBGb3IgcXVlcnlpbmcgb3duZXIgb2YgdG9rZW4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSB0b2tlbklEIGZvciBvd25lciBpbnF1aXJ5CiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpCiAgICBwdWJsaWMKICAgIHZpZXcKICAgIHJldHVybnMgKGFkZHJlc3Mgb3duZXIpCiAgewogICAgb3duZXIgPSBwb29JbmRleFRvT3duZXJbX3Rva2VuSWRdOwogICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApKTsKICB9CgogICBmdW5jdGlvbiBkb25hdGUoKSBwdWJsaWMgcGF5YWJsZSB7CglyZXF1aXJlKG1zZy52YWx1ZSA+PSAwLjAwMSBldGhlcik7CiAgIH0KCgogIC8vIEFsbG93cyBzb21lb25lIHRvIHNlbmQgZXRoZXIgYW5kIG9idGFpbiB0aGUgdG9rZW4KICBmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgcGF5YWJsZSB7CiAgICBhZGRyZXNzIG9sZE93bmVyID0gcG9vSW5kZXhUb093bmVyW190b2tlbklkXTsKICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwoKICAgIHVpbnQyNTYgc2VsbGluZ1ByaWNlID0gcG9vSW5kZXhUb1ByaWNlW190b2tlbklkXTsKCiAgICAvLyBNYWtpbmcgc3VyZSB0b2tlbiBvd25lciBpcyBub3Qgc2VuZGluZyB0byBzZWxmCiAgICByZXF1aXJlKG9sZE93bmVyICE9IG5ld093bmVyKTsKCiAgICAvLyBTYWZldHkgY2hlY2sgdG8gcHJldmVudCBhZ2FpbnN0IGFuIHVuZXhwZWN0ZWQgMHgwIGRlZmF1bHQuCiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChuZXdPd25lcikpOwoKICAgIC8vIE1ha2luZyBzdXJlIHNlbnQgYW1vdW50IGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgc2VsbGluZ1ByaWNlCiAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBzZWxsaW5nUHJpY2UpOwoKICAgIC8vIDYyJSB0byBwcmV2aW91cyBvd25lcgogICAgdWludDI1NiBwYXltZW50ID0gdWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgNjIpLCAxMDApKTsKICAKICAgIC8vIDglIHRvIHRoZSBqZXcKICAgIGNlb0FkZHJlc3MudHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgOCksIDEwMCkpKTsKCgkvLyAzMCUgZ29lcyB0byB0aGUgcG90CgogICAgLy8gTmV4dCB0b2tlbiBwcmljZSBpcyBkb3VibGUKICAgICBwb29JbmRleFRvUHJpY2VbX3Rva2VuSWRdID0gdWludDI1NihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCAyKSk7CgogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwoJCiAgICAvLyBQYXkgcHJldmlvdXMgdG9rZW5Pd25lciBpZiBvd25lciBpcyBub3QgY29udHJhY3QKICAgIGlmIChvbGRPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgIG9sZE93bmVyLnRyYW5zZmVyKHBheW1lbnQpOyAKICAgIH0KCiAgICBfY2hlY2tUb2lsZXRGbHVzaChmYWxzZSwgX3Rva2VuSWQpOyAKCWxhc3RQdXJjaGFzZVRpbWUgPSBub3c7CglUb2lsZXRQb3RDaGFuZ2UoKTsKICB9CiAgCiAgLy8gVXNlciBpcyB0cnlpbmcgdG8gZmx1c2ggdGhlIHRvaWxldC4gU2VlIGlmIHRoZXkgc3VjY2VlZAogIGZ1bmN0aW9uIHRyeUZsdXNoKCkgcHVibGljIHBheWFibGUgewoKICAgICAgICAvLyBNYWtlIHN1cmUgdGhleSBhcmUgc2VuZGluZyBtaW4gZmx1c2ggcHJpY2UKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBtaW5GbHVzaFByaWNlKTsKCgkJLy8gSmV3IHRha2VzIDEwJSBvZiBtYW51YWwgZmx1c2ggYXR0ZW1wdC4gU3RvcHMgZGF0IHNwYW0uLi4uCgkJY2VvQWRkcmVzcy50cmFuc2Zlcih1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwobXNnLnZhbHVlLCAxMCksIDEwMCkpKTsKCiAgICAgICAgX2NoZWNrVG9pbGV0Rmx1c2godHJ1ZSwgMCk7CgkJbGFzdFB1cmNoYXNlVGltZSA9IG5vdzsKCQlUb2lsZXRQb3RDaGFuZ2UoKTsKICB9CiAgCiAgLy8gSWYgbWFudWFsIGZsdXNoIGF0dGVtcHQsIHRoZSB1c2VyIGhhcyBhIGNoYW5jZSB0byBmbHVzaCB0aGVpciBvd24gcG9vCiBmdW5jdGlvbiBfY2hlY2tUb2lsZXRGbHVzaChib29sIF9tYW51YWxGbHVzaCwgdWludDI1NiBfcHVyY2hhc2VkVG9rZW5JZCkgcHJpdmF0ZSB7CiAgICAgCiAgICB1aW50MjU2IHdpbm5pbmdDaGFuY2UgPSAyNTsKCgkvLyBXZSBhcmUgY2FsbGluZyBtYW51YWwgZmx1c2ggb3B0aW9uLCBzbyB0aGUgY2hhbmNlIG9mIHdpbm5pbmcgaXMgbGVzcwoJaWYoX21hbnVhbEZsdXNoKXsKCQl3aW5uaW5nQ2hhbmNlID0gNTA7Cgl9ZWxzZSBpZihfcHVyY2hhc2VkVG9rZW5JZCA9PSBnb2xkZW5Qb29JZCl7CgkJLy8gSWYgYnV5aW5nIGdvbGRlbiBwb28sIGFuZCBpcyBub3QgYSBtYW51YWwgZmx1c2gsIGluY3JlYXNlIGNoYW5jZSBvZiB3aW5uaW5nIQoJCXdpbm5pbmdDaGFuY2UgPSB1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwod2lubmluZ0NoYW5jZSwgOTApLCAxMDApKTsKCX0KCgkvLyBDaGVjayBpZiB3ZSBhcmUgdHJpcHBsaW5nIGNoYW5jZSB0byB3aW4gb24gbmV4dCBmbHVzaCBhdHRlbXB0L3Bvb3AgcHVyY2hhc2UKCWlmKF9pbmNyZWFzZVdpblBvdENoYW5jZSgpKXsKCQl3aW5uaW5nQ2hhbmNlID0gdWludDI1NihTYWZlTWF0aC5kaXYod2lubmluZ0NoYW5jZSwzKSk7Cgl9CiAgICAgCiAgICAvLyBDaGVjayBpZiBvd25lciBvd25zIGEgcG9vLiBJZiBub3QsIHRoZWlyIGNoYW5jZSBvZiB3aW5uaW5nIGlzIGxvd2VyCiAgICBpZihvd25lcnNoaXBUb2tlbkNvdW50W21zZy5zZW5kZXJdID09IDApewogICAgICAgIHdpbm5pbmdDaGFuY2UgPSB1aW50MjU2KFNhZmVNYXRoLm11bCh3aW5uaW5nQ2hhbmNlLDIpKTsKICAgIH0KICAgICAKICAgIHVpbnQyNTYgZmx1c2hQb29JbmRleCA9IHJhbmQod2lubmluZ0NoYW5jZSk7CiAgICAKICAgIGlmKCAoZmx1c2hQb29JbmRleCA8IDYpICYmIChmbHVzaFBvb0luZGV4ICE9IGdvbGRlblBvb0lkKSAmJiAgKG1zZy5zZW5kZXIgIT0gcG9vSW5kZXhUb093bmVyW2ZsdXNoUG9vSW5kZXhdKSAgKXsKICAgICAgbGFzdEZsdXNoZXIgPSBtc2cuc2VuZGVyOwoJICBmbHVzaGVkVG9rZW5JZCA9IGZsdXNoUG9vSW5kZXg7CiAgICAgIAogICAgICBfdHJhbnNmZXIocG9vSW5kZXhUb093bmVyW2ZsdXNoUG9vSW5kZXhdLGFkZHJlc3ModGhpcyksZmx1c2hQb29JbmRleCk7CiAgICAgIHBvb0luZGV4VG9QcmljZVtmbHVzaFBvb0luZGV4XSA9IHN0YXJ0aW5nUHJpY2U7CiAgICAgIAogICAgICAvLyBMZWF2ZSA1JSBiZWhpbmQgZm9yIG5leHQgcG90CgkgIHVpbnQyNTYgcmV3YXJkID0gdWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHRoaXMuYmFsYW5jZSwgOTUpLCAxMDApKTsKCSAgbGFzdFBvdFNpemUgPSByZXdhcmQ7CgogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHJld2FyZCk7IC8vIFNlbmQgcmV3YXJkIHRvIHB1cmNoYXNlcgoJICBnb2xkZW5Qb29JZCA9IHJhbmQoNik7Ly8gVGhlcmUgaXMgYSBuZXcgZ29sZGVuIHBvbyBpbiB0b3duLgoKCSAgcm91bmRDb3VudGVyICs9IDE7IC8vIEtlZXBzIHRyYWNrIG9mIGhvdyBtYW55IGZsdXNoZXMKICAgIH0KICB9CgogIGZ1bmN0aW9uIHByaWNlT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBwcmljZSkgewogICAgcmV0dXJuIHBvb0luZGV4VG9QcmljZVtfdG9rZW5JZF07CiAgfQoKICAvLy8gQGRldiBBc3NpZ25zIGEgbmV3IGFkZHJlc3MgdG8gYWN0IGFzIHRoZSBDRU8uIE9ubHkgYXZhaWxhYmxlIHRvIHRoZSBjdXJyZW50IENFTy4KICAvLy8gQHBhcmFtIF9uZXdDRU8gVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBDRU8KICBmdW5jdGlvbiBzZXRDRU8oYWRkcmVzcyBfbmV3Q0VPKSBwdWJsaWMgb25seUNFTyB7CiAgICByZXF1aXJlKF9uZXdDRU8gIT0gYWRkcmVzcygwKSk7CgogICAgY2VvQWRkcmVzcyA9IF9uZXdDRU87CiAgfQoKICAvLy8gQGRldiBBc3NpZ25zIGEgbmV3IGFkZHJlc3MgdG8gYWN0IGFzIHRoZSBDT08uIE9ubHkgYXZhaWxhYmxlIHRvIHRoZSBjdXJyZW50IENPTy4KICAvLy8gQHBhcmFtIF9uZXdDT08gVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBDT08KICBmdW5jdGlvbiBzZXRDT08oYWRkcmVzcyBfbmV3Q09PKSBwdWJsaWMgb25seUNFTyB7CiAgICByZXF1aXJlKF9uZXdDT08gIT0gYWRkcmVzcygwKSk7CgogICAgY29vQWRkcmVzcyA9IF9uZXdDT087CiAgfQoKICAvLyBJZiAyIGhvdXJzIGVsYXBzZWQgc2luY2UgbGFzdCBwdXJjaGFzZSwgaW5jcmVhc2UgY2hhbmNlIG9mIHdpbm5pbmcgcG90LgogIGZ1bmN0aW9uIF9pbmNyZWFzZVdpblBvdENoYW5jZSgpIGNvbnN0YW50IHByaXZhdGUgcmV0dXJucyAoYm9vbCkgewogICAgaWYgKG5vdyA+PSBsYXN0UHVyY2hhc2VUaW1lICsgMTIwIG1pbnV0ZXMpIHsKICAgICAgICAvLyAxMjAgbWludXRlcyBoYXMgZWxhcHNlZCBmcm9tIGxhc3QgcHVyY2hhc2VkIHRpbWUKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKfQoKICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuIFNZTUJPTDsKICB9CgogIC8vLyBAbm90aWNlIEFsbG93IHByZS1hcHByb3ZlZCB1c2VyIHRvIHRha2Ugb3duZXJzaGlwIG9mIGEgdG9rZW4KICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICBhZGRyZXNzIG9sZE93bmVyID0gcG9vSW5kZXhUb093bmVyW190b2tlbklkXTsKCiAgICAvLyBTYWZldHkgY2hlY2sgdG8gcHJldmVudCBhZ2FpbnN0IGFuIHVuZXhwZWN0ZWQgMHgwIGRlZmF1bHQuCiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChuZXdPd25lcikpOwoKICAgIC8vIE1ha2luZyBzdXJlIHRyYW5zZmVyIGlzIGFwcHJvdmVkCiAgICByZXF1aXJlKF9hcHByb3ZlZChuZXdPd25lciwgX3Rva2VuSWQpKTsKCiAgICBfdHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfdG9rZW5JZCk7CiAgfQoKICAvLy8gQHBhcmFtIF9vd25lciBUaGUgb3duZXIgd2hvc2Ugc29jaWFsIG1lZGlhIHRva2VucyB3ZSBhcmUgaW50ZXJlc3RlZCBpbi4KICAvLy8gQGRldiBUaGlzIG1ldGhvZCBNVVNUIE5FVkVSIGJlIGNhbGxlZCBieSBzbWFydCBjb250cmFjdCBjb2RlLiBGaXJzdCwgaXQncyBmYWlybHkKICAvLy8gIGV4cGVuc2l2ZSAoaXQgd2Fsa3MgdGhlIGVudGlyZSBwb29zIGFycmF5IGxvb2tpbmcgZm9yIHBvb3MgYmVsb25naW5nIHRvIG93bmVyKSwKICAvLy8gIGJ1dCBpdCBhbHNvIHJldHVybnMgYSBkeW5hbWljIGFycmF5LCB3aGljaCBpcyBvbmx5IHN1cHBvcnRlZCBmb3Igd2ViMyBjYWxscywgYW5kCiAgLy8vICBub3QgY29udHJhY3QtdG8tY29udHJhY3QgY2FsbHMuCiAgZnVuY3Rpb24gdG9rZW5zT2ZPd25lcihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2W10gb3duZXJUb2tlbnMpIHsKICAgIHVpbnQyNTYgdG9rZW5Db3VudCA9IGJhbGFuY2VPZihfb3duZXIpOwogICAgaWYgKHRva2VuQ291bnQgPT0gMCkgewogICAgICAgIC8vIFJldHVybiBhbiBlbXB0eSBhcnJheQogICAgICByZXR1cm4gbmV3IHVpbnQyNTZbXSgwKTsKICAgIH0gZWxzZSB7CiAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXSh0b2tlbkNvdW50KTsKICAgICAgdWludDI1NiB0b3RhbFBvb3MgPSB0b3RhbFN1cHBseSgpOwogICAgICB1aW50MjU2IHJlc3VsdEluZGV4ID0gMDsKCiAgICAgIHVpbnQyNTYgcG9vSWQ7CiAgICAgIGZvciAocG9vSWQgPSAwOyBwb29JZCA8PSB0b3RhbFBvb3M7IHBvb0lkKyspIHsKICAgICAgICBpZiAocG9vSW5kZXhUb093bmVyW3Bvb0lkXSA9PSBfb3duZXIpIHsKICAgICAgICAgIHJlc3VsdFtyZXN1bHRJbmRleF0gPSBwb29JZDsKICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfQoKICAvLy8gRm9yIHF1ZXJ5aW5nIHRvdGFsU3VwcGx5IG9mIHRva2VuCiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpIHsKICAgIHJldHVybiBwb29zLmxlbmd0aDsKICB9CgogIC8vLyBPd25lciBpbml0YXRlcyB0aGUgdHJhbnNmZXIgb2YgdGhlIHRva2VuIHRvIGFub3RoZXIgYWNjb3VudAogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgdG8uCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgSUQgb2YgdGhlIFRva2VuIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGlmIHRoaXMgY2FsbCBzdWNjZWVkcy4KICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIGZ1bmN0aW9uIHRyYW5zZmVyKAogICAgYWRkcmVzcyBfdG8sCiAgICB1aW50MjU2IF90b2tlbklkCiAgKSBwdWJsaWMgewogICAgcmVxdWlyZShfb3ducyhtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CgogICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgLy8vIFRoaXJkLXBhcnR5IGluaXRpYXRlcyB0cmFuc2ZlciBvZiB0b2tlbiBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8KICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgZnJvbS4KICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBmb3IgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkIHRvLgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIElEIG9mIHRoZSBUb2tlbiB0aGF0IGNhbiBiZSB0cmFuc2ZlcnJlZCBpZiB0aGlzIGNhbGwgc3VjY2VlZHMuCiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oCiAgICBhZGRyZXNzIF9mcm9tLAogICAgYWRkcmVzcyBfdG8sCiAgICB1aW50MjU2IF90b2tlbklkCiAgKSBwdWJsaWMgewogICAgcmVxdWlyZShfb3ducyhfZnJvbSwgX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUoX2FwcHJvdmVkKF90bywgX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKF90bykpOwoKICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKioqIFBSSVZBVEUgRlVOQ1RJT05TICoqKi8KICAvLy8gU2FmZXR5IGNoZWNrIG9uIF90byBhZGRyZXNzIHRvIHByZXZlbnQgYWdhaW5zdCBhbiB1bmV4cGVjdGVkIDB4MCBkZWZhdWx0LgogIGZ1bmN0aW9uIF9hZGRyZXNzTm90TnVsbChhZGRyZXNzIF90bykgcHJpdmF0ZSBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBfdG8gIT0gYWRkcmVzcygwKTsKICB9CgogIC8vLyBGb3IgY2hlY2tpbmcgYXBwcm92YWwgb2YgdHJhbnNmZXIgZm9yIGFkZHJlc3MgX3RvCiAgZnVuY3Rpb24gX2FwcHJvdmVkKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHBvb0luZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX3RvOwogIH0KCiAgLy8vIEZvciBjcmVhdGluZyBQb28KICBmdW5jdGlvbiBfY3JlYXRlUG9vKHN0cmluZyBfbmFtZSwgYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3ByaWNlKSBwcml2YXRlIHsKICAgIFBvbyBtZW1vcnkgX3BvbyA9IFBvbyh7CiAgICAgIG5hbWU6IF9uYW1lCiAgICB9KTsKICAgIHVpbnQyNTYgbmV3UG9vSWQgPSBwb29zLnB1c2goX3BvbykgLSAxOwoKICAgIC8vIEl0J3MgcHJvYmFibHkgbmV2ZXIgZ29pbmcgdG8gaGFwcGVuLCA0IGJpbGxpb24gdG9rZW5zIGFyZSBBIExPVCwgYnV0CiAgICAvLyBsZXQncyBqdXN0IGJlIDEwMCUgc3VyZSB3ZSBuZXZlciBsZXQgdGhpcyBoYXBwZW4uCiAgICByZXF1aXJlKG5ld1Bvb0lkID09IHVpbnQyNTYodWludDMyKG5ld1Bvb0lkKSkpOwoKICAgIEJpcnRoKG5ld1Bvb0lkLCBfbmFtZSwgX293bmVyKTsKCiAgICBwb29JbmRleFRvUHJpY2VbbmV3UG9vSWRdID0gX3ByaWNlOwoKICAgIC8vIFRoaXMgd2lsbCBhc3NpZ24gb3duZXJzaGlwLCBhbmQgYWxzbyBlbWl0IHRoZSBUcmFuc2ZlciBldmVudCBhcwogICAgLy8gcGVyIEVSQzcyMSBkcmFmdAogICAgX3RyYW5zZmVyKGFkZHJlc3MoMCksIF9vd25lciwgbmV3UG9vSWQpOwogIH0KCiAgLy8vIENoZWNrIGZvciB0b2tlbiBvd25lcnNoaXAKICBmdW5jdGlvbiBfb3ducyhhZGRyZXNzIGNsYWltYW50LCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIGNsYWltYW50ID09IHBvb0luZGV4VG9Pd25lcltfdG9rZW5JZF07CiAgfQoKICAvLy8gQGRldiBBc3NpZ25zIG93bmVyc2hpcCBvZiBhIHNwZWNpZmljIFBvbyB0byBhbiBhZGRyZXNzLgogIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICAvLyBTaW5jZSB0aGUgbnVtYmVyIG9mIHBvb3MgaXMgY2FwcGVkIHRvIDJeMzIgd2UgY2FuJ3Qgb3ZlcmZsb3cgdGhpcwogICAgb3duZXJzaGlwVG9rZW5Db3VudFtfdG9dKys7CiAgICAvL3RyYW5zZmVyIG93bmVyc2hpcAogICAgcG9vSW5kZXhUb093bmVyW190b2tlbklkXSA9IF90bzsKCiAgICAvLyBXaGVuIGNyZWF0aW5nIG5ldyBwb29zIF9mcm9tIGlzIDB4MCwgYnV0IHdlIGNhbid0IGFjY291bnQgdGhhdCBhZGRyZXNzLgogICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXJzaGlwVG9rZW5Db3VudFtfZnJvbV0tLTsKICAgICAgLy8gY2xlYXIgYW55IHByZXZpb3VzbHkgYXBwcm92ZWQgb3duZXJzaGlwIGV4Y2hhbmdlCiAgICAgIGRlbGV0ZSBwb29JbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdOwogICAgfQoKICAgIC8vIEVtaXQgdGhlIHRyYW5zZmVyIGV2ZW50LgogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KICAKICAgIC8vR2VuZXJhdGUgcmFuZG9tIG51bWJlciBiZXR3ZWVuIDAgJiBtYXgKICAgIHVpbnQyNTYgY29uc3RhbnQgcHJpdmF0ZSBGQUNUT1IgPSAgMTE1NzkyMDg5MjM3MzE2MTk1NDIzNTcwOTg1MDA4Njg3OTA3ODUzMjY5OTg0NjY1NjQwNTY0MDM5NDU3NTg0MDA3OTEzMTI5NjM5OTsKICAgIGZ1bmN0aW9uIHJhbmQodWludCBtYXgpIGNvbnN0YW50IHByaXZhdGUgcmV0dXJucyAodWludDI1NiByZXN1bHQpewogICAgICAgIHVpbnQyNTYgZmFjdG9yID0gRkFDVE9SICogMTAwIC8gbWF4OwogICAgICAgIHVpbnQyNTYgbGFzdEJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyIC0gMTsKICAgICAgICB1aW50MjU2IGhhc2hWYWwgPSB1aW50MjU2KGJsb2NrLmJsb2NraGFzaChsYXN0QmxvY2tOdW1iZXIpKTsKICAgIAogICAgICAgIHJldHVybiB1aW50MjU2KCh1aW50MjU2KGhhc2hWYWwpIC8gZmFjdG9yKSkgJSBtYXg7CiAgICB9CiAgCn0KbGlicmFyeSBTYWZlTWF0aCB7CgogIC8qKgogICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgKi8KICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBTdWJzdHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgKi8KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICAvKioKICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0='.
	

]
