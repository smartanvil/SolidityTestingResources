Class {
	#name : #SRT0a43eDfE106D295e7C1e591A4B04B5598AF9474C,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0a43eDfE106D295e7C1e591A4B04B5598AF9474C >> base64 [
	^ 'bGlicmFyeSBUb2tlbkxpYiB7CiAgICBzdHJ1Y3QgVG9rZW4gewogICAgICAgIHN0cmluZyBpZGVudGl0eTsKICAgICAgICBhZGRyZXNzIG93bmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGlkKFRva2VuIHN0b3JhZ2Ugc2VsZikgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgIHJldHVybiBzaGEzKHNlbGYuaWRlbnRpdHkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdlbmVyYXRlSWQoc3RyaW5nIGlkZW50aXR5KSByZXR1cm5zIChieXRlczMyKSB7CiAgICAgICAgcmV0dXJuIHNoYTMoaWRlbnRpdHkpOwogICAgfQoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgYnl0ZXMzMiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCBieXRlczMyIF92YWx1ZSk7CgogICAgZnVuY3Rpb24gbG9nQXBwcm92YWwoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIsIGJ5dGVzMzIgX3ZhbHVlKSB7CiAgICAgICAgQXBwcm92YWwoX293bmVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBsb2dUcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgYnl0ZXMzMiBfdmFsdWUpIHsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQp9Cgpjb250cmFjdCBUb2tlbkludGVyZmFjZSB7CiAgICAvKgogICAgICogIEV2ZW50cwogICAgICovCiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCBfdG8sIGJ5dGVzMzIgX2lkKTsKICAgIGV2ZW50IERlc3Ryb3koYnl0ZXMzMiBfaWQpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IE1pbnRlckFkZGVkKGFkZHJlc3Mgd2hvKTsKICAgIGV2ZW50IE1pbnRlclJlbW92ZWQoYWRkcmVzcyB3aG8pOwoKICAgIC8qCiAgICAgKiAgTWludGluZwogICAgICovCiAgICAvLy8gQGRldiBNaW50cyBhIG5ldyB0b2tlbi4KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuCiAgICAvLy8gQHBhcmFtIF9pZGVudGl0eSBTdHJpbmcgZm9yIG93bmVyIGlkZW50aXR5LgogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgc3RyaW5nIF9pZGVudGl0eSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQGRldiBEZXN0cm95IGEgdG9rZW4KICAgIC8vLyBAcGFyYW0gX2lkIEJ5dGVzMzIgaWQgb2YgdGhlIHRva2VuIHRvIGRlc3Ryb3kuCiAgICBmdW5jdGlvbiBkZXN0cm95KGJ5dGVzMzIgX2lkKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAZGV2IEFkZCBhIG5ldyBtaW50ZXIKICAgIC8vLyBAcGFyYW0gd2hvIEFkZHJlc3MgdGhlIGFkZHJlc3MgdGhhdCBjYW4gbm93IG1pbnQgdG9rZW5zLgogICAgZnVuY3Rpb24gYWRkTWludGVyKGFkZHJlc3Mgd2hvKSByZXR1cm5zIChib29sKTsKCiAgICAvLy8gQGRldiBSZW1vdmUgYSBtaW50ZXIKICAgIC8vLyBAcGFyYW0gd2hvIEFkZHJlc3MgdGhlIGFkZHJlc3MgdGhhdCB3aWxsIG5vIGxvbmdlciBiZSBhIG1pbnRlci4KICAgIGZ1bmN0aW9uIHJlbW92ZU1pbnRlcihhZGRyZXNzIHdobykgcmV0dXJucyAoYm9vbCk7CgogICAgLyoKICAgICAqICBSZWFkIGFuZCB3cml0ZSBzdG9yYWdlIGZ1bmN0aW9ucwogICAgICovCgogICAgLy8vIEBkZXYgUmV0dXJuIHRoZSBudW1iZXIgb2YgdG9rZW5zCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHJldHVybnMgKHVpbnQgc3VwcGx5KTsKCiAgICAvLy8gQGRldiBUcmFuc2ZlcnMgc2VuZGVyIHRva2VuIHRvIGdpdmVuIGFkZHJlc3MuIFJldHVybnMgc3VjY2Vzcy4KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgbmV3IHRva2VuIG93bmVyLgogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0aGUgdG9rZW4gdG8gdHJhbnNmZXIuCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgYnl0ZXMzMiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBkZXYgQWxsb3dzIGFsbG93ZWQgdGhpcmQgcGFydHkgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRoZSB0b2tlbiB0byB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIGJ5dGVzMzIgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAZGV2IFNldHMgYXBwcm92YWwgc3BlbmRlciB0byB0cmFuc2ZlciBvd25lcnNoaXAgb2YgdG9rZW4uIFJldHVybnMgc3VjY2Vzcy4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiBzcGVuZGVyLi4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEJ5dGVzMzIgaWQgb2YgdG9rZW4gdGhhdCBjYW4gYmUgc3BlbmQuCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCBieXRlczMyIF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvKgogICAgICogUmVhZCBzdG9yYWdlIGZ1bmN0aW9ucwogICAgICovCiAgICAvLy8gQGRldiBSZXR1cm5zIGlkIG9mIHRva2VuIG93bmVkIGJ5IGdpdmVuIGFkZHJlc3MgKGVuY29kZWQgYXMgYW4gaW50ZWdlcikuCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIHRva2VuIGlkIHRoYXQgbWF5IHRyYW5zZmVyIGZyb20gX293bmVyIGFjY291bnQgYnkgX3NwZW5kZXIuLgogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiB0b2tlbiBzcGVuZGVyLgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgLyoKICAgICAqICBFeHRyYSBub24gRVJDMjAgZnVuY3Rpb25zCiAgICAgKi8KICAgIC8vLyBAZGV2IFJldHVybnMgd2hldGhlciB0aGUgYWRkcmVzcyBvd25zIGEgdG9rZW4uCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIHRvIGNoZWNrLgogICAgZnVuY3Rpb24gaXNUb2tlbk93bmVyKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zIChib29sKTsKCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSBpZGVudGl0eSBvZiB0aGUgZ2l2ZW4gdG9rZW4gaWQuCiAgICAvLy8gQHBhcmFtIF9pZCBCeXRlczMyIGlkIG9mIHRva2VuIHRvIGxvb2t1cC4KICAgIGZ1bmN0aW9uIGlkZW50aXR5T2YoYnl0ZXMzMiBfaWQpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBpZGVudGl0eSk7CgogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgYWRkcmVzcyBvZiB0aGUgb3duZXIgb2YgdGhlIGdpdmVuIHRva2VuIGlkLgogICAgLy8vIEBwYXJhbSBfaWQgQnl0ZXMzMiBpZCBvZiB0b2tlbiB0byBsb29rdXAuCiAgICBmdW5jdGlvbiBvd25lck9mKGJ5dGVzMzIgX2lkKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzIG93bmVyKTsKfQoKY29udHJhY3QgRGV2Y29uMlRva2VuIGlzIFRva2VuSW50ZXJmYWNlIHsKICAgIHVzaW5nIFRva2VuTGliIGZvciBUb2tlbkxpYi5Ub2tlbjsKCiAgICAvKgogICAgICogICstLS0tLS0tLS0tLS0tLS0tKwogICAgICogIHwgQWRtaW5pc3RyYXRpdmUgfAogICAgICogICstLS0tLS0tLS0tLS0tLS0tKwogICAgICovCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBtaW50ZXJzOwogICAgdWludCBjb25zdGFudCBfRU5EX01JTlRJTkcgPSAxNDc0NTAyNDAwOyAgLy8gVVRDICgyMDE2LzA5LzIyIC0gMDA6MDA6MDApCgogICAgZnVuY3Rpb24gRU5EX01JTlRJTkcoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIF9FTkRfTUlOVElORzsKICAgIH0KCiAgICBmdW5jdGlvbiBEZXZjb24yVG9rZW4oKSB7CiAgICAgICAgbWludGVyc1ttc2cuc2VuZGVyXSA9IHRydWU7CiAgICAgICAgTWludGVyQWRkZWQobXNnLnNlbmRlcik7CiAgICB9CgogICAgLyoKICAgICAqICArLS0tLS0tLS0tLS0tKwogICAgICogIHwgVG9rZW4gRGF0YSB8CiAgICAgKiAgKy0tLS0tLS0tLS0tLSsKICAgICAqLwogICAgdWludCBudW1Ub2tlbnM7CgogICAgLy8gaWQgPT4gVG9rZW4KICAgIG1hcHBpbmcgKGJ5dGVzMzIgPT4gVG9rZW5MaWIuVG9rZW4pIHRva2VuczsKCiAgICAvLyBvd25lciA9PiBvd25lZFRva2VuLmlkCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJ5dGVzMzIpIHB1YmxpYyBvd25lZFRva2VuOwoKICAgIC8vIG93bmVyID0+IHNwZW5kZXIgPT4gb3duZWRUb2tlbi5pZAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IGJ5dGVzMzIpKSBhcHByb3ZhbHM7CgogICAgLyoKICAgICAqICBSZWFkIGFuZCB3cml0ZSBzdG9yYWdlIGZ1bmN0aW9ucwogICAgICovCiAgICAvLy8gQGRldiBNaW50cyBhIG5ldyB0b2tlbgogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiB0b2tlbiBvd25lci4KICAgIC8vLyBAcGFyYW0gX2lkZW50aXR5IFN0cmluZyBmb3Igb3duZXIgaWRlbnRpdHkuCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCBzdHJpbmcgX2lkZW50aXR5KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvLyBvbmx5IG1pbnRhYmxlIHRpbGwgZW5kIG9mIGNvbmZlcmVuY2UKICAgICAgICBpZiAobm93ID49IF9FTkRfTUlOVElORykgdGhyb3c7CgogICAgICAgIC8vIGVuc3VyZSB0aGUgbXNnLnNlbmRlciBpcyBhbGxvd2VkIHRvIG1pbnQuCiAgICAgICAgaWYgKCFtaW50ZXJzW21zZy5zZW5kZXJdKSByZXR1cm4gZmFsc2U7CgogICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZSB0b2tlbiBvd25lciBkb2Vzbid0IGFscmVhZHkgb3duIGEgdG9rZW4uCiAgICAgICAgaWYgKG93bmVkVG9rZW5bX3RvXSAhPSAweDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gZ2VuZXJhdGUgdGhlIHRva2VuIGlkIGFuZCBnZXQgdGhlIHRva2VuLgogICAgICAgIGJ5dGVzMzIgaWQgPSBUb2tlbkxpYi5nZW5lcmF0ZUlkKF9pZGVudGl0eSk7CiAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2lkXTsKCiAgICAgICAgLy8gZG9uJ3QgYWxsb3cgcmUtbWludGluZyBvZiBhIGdpdmVuIGlkZW50aXR5LgogICAgICAgIGlmIChpZCA9PSB0b2tlbi5pZCgpKSByZXR1cm4gZmFsc2U7CgogICAgICAgIC8vIHNldCB0aGUgdG9rZW4gZGF0YQogICAgICAgIHRva2VuLm93bmVyID0gX3RvOwogICAgICAgIHRva2VuLmlkZW50aXR5ID0gX2lkZW50aXR5OwogICAgICAgIG93bmVkVG9rZW5bX3RvXSA9IGlkOwoKICAgICAgICAvLyBsb2cgdGhlIG1pbnRpbmcgb2YgdGhpcyB0b2tlbi4KICAgICAgICBNaW50KF90bywgaWQpOwoKICAgICAgICAvLyBpbmNyZWFzZSB0aGUgc3VwcGx5LgogICAgICAgIG51bVRva2VucyArPSAxOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBEZXN0cm95IGEgdG9rZW4KICAgIC8vLyBAcGFyYW0gX2lkIEJ5dGVzMzIgaWQgb2YgdGhlIHRva2VuIHRvIGJlIGRlc3Ryb3llZAogICAgZnVuY3Rpb24gZGVzdHJveShieXRlczMyIF9pZCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy8gb25seSBtaW50YWJsZSB0aWxsIGVuZCBvZiBjb25mZXJlbmNlCiAgICAgICAgaWYgKG5vdyA+PSBfRU5EX01JTlRJTkcpIHRocm93OwoKICAgICAgICAvLyBlbnN1cmUgdGhlIG1zZy5zZW5kZXIgaXMgYWxsb3dlZCB0byBtaW50LgogICAgICAgIGlmICghbWludGVyc1ttc2cuc2VuZGVyXSkgcmV0dXJuIGZhbHNlOwoKICAgICAgICAvLyBwdWxsIHRoZSB0b2tlbiB0byBkZXN0cm95CiAgICAgICAgdmFyIHRva2VuVG9EZXN0cm95ID0gdG9rZW5zW19pZF07CgogICAgICAgIC8vIFJlbW92ZSBhbnkgb3duZXJzaGlwIGRhdGEKICAgICAgICBvd25lZFRva2VuW3Rva2VuVG9EZXN0cm95Lm93bmVyXSA9IDB4MDsKCiAgICAgICAgLy8gWmVybyBvdXQgdGhlIGFjdHVhbCB0b2tlbiBkYXRhCiAgICAgICAgdG9rZW5Ub0Rlc3Ryb3kuaWRlbnRpdHkgPSAnJzsKICAgICAgICB0b2tlblRvRGVzdHJveS5vd25lciA9IDB4MDsKCiAgICAgICAgLy8gTG9nIHRoZSBkZXN0cnVjdGlvbgogICAgICAgIERlc3Ryb3koX2lkKTsKCiAgICAgICAgLy8gZGVjcmVhc2UgdGhlIHN1cHBseS4KICAgICAgICBudW1Ub2tlbnMgLT0gMTsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBBZGQgYSBuZXcgbWludGVyCiAgICAvLy8gQHBhcmFtIHdobyBBZGRyZXNzIHRoZSBhZGRyZXNzIHRoYXQgY2FuIG5vdyBtaW50IHRva2Vucy4KICAgIGZ1bmN0aW9uIGFkZE1pbnRlcihhZGRyZXNzIHdobykgcmV0dXJucyAoYm9vbCkgewogICAgICAgIC8vIG9ubHkgbWludGFibGUgdGlsbCBlbmQgb2YgY29uZmVyZW5jZQogICAgICAgIGlmIChub3cgPj0gX0VORF9NSU5USU5HKSB0aHJvdzsKCiAgICAgICAgLy8gZW5zdXJlIHRoZSBtc2cuc2VuZGVyIGlzIGFsbG93ZWQKICAgICAgICBpZiAoIW1pbnRlcnNbbXNnLnNlbmRlcl0pIHJldHVybiBmYWxzZTsKCiAgICAgICAgbWludGVyc1t3aG9dID0gdHJ1ZTsKCiAgICAgICAgLy8gTG9nIGl0CiAgICAgICAgTWludGVyQWRkZWQod2hvKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEBkZXYgUmVtb3ZlIGEgbWludGVyCiAgICAvLy8gQHBhcmFtIHdobyBBZGRyZXNzIHRoZSBhZGRyZXNzIHRoYXQgd2lsbCBubyBsb25nZXIgYmUgYSBtaW50ZXIuCiAgICBmdW5jdGlvbiByZW1vdmVNaW50ZXIoYWRkcmVzcyB3aG8pIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvLyBlbnN1cmUgdGhlIG1zZy5zZW5kZXIgaXMgYWxsb3dlZAogICAgICAgIGlmICghbWludGVyc1ttc2cuc2VuZGVyXSkgcmV0dXJuIGZhbHNlOwoKICAgICAgICBtaW50ZXJzW3dob10gPSBmYWxzZTsKCiAgICAgICAgLy8gTG9nIGl0CiAgICAgICAgTWludGVyUmVtb3ZlZCh3aG8pOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBUcmFuc2ZlcnMgc2VuZGVyIHRva2VuIHRvIGdpdmVuIGFkZHJlc3MuIFJldHVybnMgc3VjY2Vzcy4KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgbmV3IHRva2VuIG93bmVyLgogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0aGUgdG9rZW4gdG8gdHJhbnNmZXIuCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiB0cmFuc2ZlcihfdG8sIGJ5dGVzMzIoX3ZhbHVlKSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIGJ5dGVzMzIgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvLyBkb250IGFsbG93IHRoZSBudWxsIHRva2VuLgogICAgICAgIGlmIChfdmFsdWUgPT0gMHgwKSByZXR1cm4gZmFsc2U7CgogICAgICAgIC8vIGVuc3VyZSBpdCBpcyBhY3R1YWxseSBhIHRva2VuCiAgICAgICAgaWYgKHRva2Vuc1tfdmFsdWVdLmlkKCkgIT0gX3ZhbHVlKSByZXR1cm4gZmFsc2U7CgogICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZSBuZXcgb3duZXIgZG9lc24ndCBhbHJlYWR5IG93biBhIHRva2VuLgogICAgICAgIGlmIChvd25lZFRva2VuW190b10gIT0gMHgwKSByZXR1cm4gZmFsc2U7CgogICAgICAgIC8vIGdldCB0aGUgdG9rZW4KICAgICAgICB2YXIgdG9rZW5Ub1RyYW5zZmVyID0gdG9rZW5zW192YWx1ZV07CgogICAgICAgIC8vIGVuc3VyZSBtc2cuc2VuZGVyIGlzIHRoZSB0b2tlbiBvd25lci4KICAgICAgICBpZiAodG9rZW5Ub1RyYW5zZmVyLm93bmVyICE9IG1zZy5zZW5kZXIpIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gc2V0IHRoZSBuZXcgb3duZXIuCiAgICAgICAgdG9rZW5Ub1RyYW5zZmVyLm93bmVyID0gX3RvOwogICAgICAgIG93bmVkVG9rZW5bbXNnLnNlbmRlcl0gPSAweDA7CiAgICAgICAgb3duZWRUb2tlbltfdG9dID0gX3ZhbHVlOwoKICAgICAgICAvLyBsb2cgdGhlIHRyYW5zZmVyCiAgICAgICAgLy9UcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIHVpbnQoX3ZhbHVlKSk7CiAgICAgICAgVG9rZW5MaWIubG9nVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgYWxsb3dlZCB0aGlyZCBwYXJ0eSB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF9mcm9tIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIG5ldyB0b2tlbiBvd25lci4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEJ5dGVzMzIgaWQgb2YgdGhlIHRva2VuIHRvIHRyYW5zZmVyLgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmV0dXJuIHRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBieXRlczMyKF92YWx1ZSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgYnl0ZXMzMiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vIGRvbnQgYWxsb3cgdGhlIG51bGwgdG9rZW4uCiAgICAgICAgaWYgKF92YWx1ZSA9PSAweDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gZW5zdXJlIGl0IGlzIGFjdHVhbGx5IGEgdG9rZW4KICAgICAgICBpZiAodG9rZW5zW192YWx1ZV0uaWQoKSAhPSBfdmFsdWUpIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gZW5zdXJlIHRoYXQgdGhlIG5ldyBvd25lciBkb2Vzbid0IGFscmVhZHkgb3duIGEgdG9rZW4uCiAgICAgICAgaWYgKG93bmVkVG9rZW5bX3RvXSAhPSAweDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gZ2V0IHRoZSB0b2tlbgogICAgICAgIHZhciB0b2tlblRvVHJhbnNmZXIgPSB0b2tlbnNbX3ZhbHVlXTsKCiAgICAgICAgLy8gZW5zdXJlIHRoYXQgX2Zyb20gYWN0dWFsbHkgb3ducyB0aGlzIHRva2VuLgogICAgICAgIGlmICh0b2tlblRvVHJhbnNmZXIub3duZXIgIT0gX2Zyb20pIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAob3duZWRUb2tlbltfZnJvbV0gIT0gX3ZhbHVlKSByZXR1cm4gZmFsc2U7CgogICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZXkgYXJlIGFwcHJvdmVkIHRvIHRyYW5zZmVyIHRoaXMgdG9rZW4uCiAgICAgICAgaWYgKGFwcHJvdmFsc1tfZnJvbV1bbXNnLnNlbmRlcl0gIT0gX3ZhbHVlKSByZXR1cm4gZmFsc2U7CgogICAgICAgIC8vIGRvIHRoZSB0cmFuc2ZlcgogICAgICAgIHRva2VuVG9UcmFuc2Zlci5vd25lciA9IF90bzsKICAgICAgICBvd25lZFRva2VuW19mcm9tXSA9IDB4MDsKICAgICAgICBvd25lZFRva2VuW190b10gPSBfdmFsdWU7CiAgICAgICAgYXBwcm92YWxzW19mcm9tXVttc2cuc2VuZGVyXSA9IDB4MDsKCiAgICAgICAgLy8gbG9nIHRoZSB0cmFuc2ZlcgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIHVpbnQoX3ZhbHVlKSk7CiAgICAgICAgVG9rZW5MaWIubG9nVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEBkZXYgU2V0cyBhcHByb3ZhbCBzcGVuZGVyIHRvIHRyYW5zZmVyIG93bmVyc2hpcCBvZiB0b2tlbi4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHNwZW5kZXIuLgogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0b2tlbiB0aGF0IGNhbiBiZSBzcGVuZC4KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBhcHByb3ZlKF9zcGVuZGVyLCBieXRlczMyKF92YWx1ZSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgYnl0ZXMzMiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vIGRvbnQgYWxsb3cgdGhlIG51bGwgdG9rZW4uCiAgICAgICAgaWYgKF92YWx1ZSA9PSAweDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gZW5zdXJlIGl0IGlzIGFjdHVhbGx5IGEgdG9rZW4KICAgICAgICBpZiAodG9rZW5zW192YWx1ZV0uaWQoKSAhPSBfdmFsdWUpIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gZ2V0IHRoZSB0b2tlbiB0aGF0IGlzIGJlaW5nIGFwcHJvdmVkLgogICAgICAgIHZhciB0b2tlblRvQXBwcm92ZSA9IHRva2Vuc1tfdmFsdWVdOwoKICAgICAgICAvLyBlbnN1cmUgdGhleSBvd24gdGhpcyB0b2tlbi4KICAgICAgICBpZiAodG9rZW5Ub0FwcHJvdmUub3duZXIgIT0gbXNnLnNlbmRlcikgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmIChvd25lZFRva2VuW21zZy5zZW5kZXJdICE9IF92YWx1ZSkgcmV0dXJuIGZhbHNlOwoKICAgICAgICAvLyBzZXQgdGhlIGFwcHJvdmFsCiAgICAgICAgYXBwcm92YWxzW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKCiAgICAgICAgLy8gTG9nIHRoZSBhcHByb3ZhbAogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCB1aW50KF92YWx1ZSkpOwogICAgICAgIFRva2VuTGliLmxvZ0FwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKgogICAgICogUmVhZCBzdG9yYWdlIGZ1bmN0aW9ucwogICAgICovCiAgICAvLy8gQGRldiBSZXR1cm4gdGhlIG51bWJlciBvZiB0b2tlbnMKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcmV0dXJucyAodWludCBzdXBwbHkpIHsKICAgICAgICByZXR1cm4gbnVtVG9rZW5zOwogICAgfQoKICAgIC8vLyBAZGV2IFJldHVybnMgaWQgb2YgdG9rZW4gb3duZWQgYnkgZ2l2ZW4gYWRkcmVzcyAoZW5jb2RlZCBhcyBhbiBpbnRlZ2VyKS4KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiB1aW50KG93bmVkVG9rZW5bX293bmVyXSk7CiAgICB9CgogICAgLy8vIEBkZXYgUmV0dXJucyBudW1iZXIgb2YgYWxsb3dlZCB0b2tlbnMgZm9yIGdpdmVuIGFkZHJlc3MuCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHRva2VuIHNwZW5kZXIuCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIHVpbnQoYXBwcm92YWxzW19vd25lcl1bX3NwZW5kZXJdKTsKICAgIH0KCiAgICAvKgogICAgICogIEV4dHJhIG5vbiBFUkMyMCBmdW5jdGlvbnMKICAgICAqLwogICAgLy8vIEBkZXYgUmV0dXJucyB3aGV0aGVyIHRoZSBhZGRyZXNzIG93bnMgYSB0b2tlbi4KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3MgdG8gY2hlY2suCiAgICBmdW5jdGlvbiBpc1Rva2VuT3duZXIoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gKG93bmVkVG9rZW5bX293bmVyXSAhPSAweDAgJiYgdG9rZW5zW293bmVkVG9rZW5bX293bmVyXV0ub3duZXIgPT0gX293bmVyKTsKICAgIH0KCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSBpZGVudGl0eSBvZiB0aGUgZ2l2ZW4gdG9rZW4gaWQuCiAgICAvLy8gQHBhcmFtIF9pZCBCeXRlczMyIGlkIG9mIHRva2VuIHRvIGxvb2t1cC4KICAgIGZ1bmN0aW9uIGlkZW50aXR5T2YoYnl0ZXMzMiBfaWQpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBpZGVudGl0eSkgewogICAgICAgIHJldHVybiB0b2tlbnNbX2lkXS5pZGVudGl0eTsKICAgIH0KCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSBhZGRyZXNzIG9mIHRoZSBvd25lciBvZiB0aGUgZ2l2ZW4gdG9rZW4gaWQuCiAgICAvLy8gQHBhcmFtIF9pZCBCeXRlczMyIGlkIG9mIHRva2VuIHRvIGxvb2t1cC4KICAgIGZ1bmN0aW9uIG93bmVyT2YoYnl0ZXMzMiBfaWQpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpIHsKICAgICAgICByZXR1cm4gdG9rZW5zW19pZF0ub3duZXI7CiAgICB9Cn0='.
	

]
