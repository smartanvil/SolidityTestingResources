Class {
	#name : #SRT5f742383b6d1298980030d6af943b76cdd902143,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5f742383b6d1298980030d6af943b76cdd902143 >> base64 [
	^ 'LyogQ29weXJpZ2h0IChDKSBFdGhlcnBsYXkgPDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iOWVmZGYxZjBlYWZmZmRlYWRlZmJlYWY2ZmJlY2VlZjJmZmU3YjBmN2YxIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPj4gLSBBbGwgUmlnaHRzIFJlc2VydmVkICovCnByYWdtYSBzb2xpZGl0eSBeMC40LjQ7Cgpjb250cmFjdCBDb21wZXRpdGlvblN0b3JlIHsKCQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIERBVEEgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoJCgkvL3BsYXllcidzIHN1Ym1pc3Npb24gc3RvcmUgdGhlIGluZm8gcmVxdWlyZWQgdG8gdmVyaWZ5IGl0cyBhY2N1cmFjeQoJc3RydWN0IFN1Ym1pc3Npb257CgkJdWludDMyIHNjb3JlOyAKCQl1aW50MzIgZHVyYXRpb25Sb3VuZGVkRG93bjsgLy8gZHVyYXRpb24gaW4gc2Vjb25kIG9mIHRoZSBnYW1lIHNlc3Npb24KCQl1aW50MzIgdmVyc2lvbjsgLy8gdmVyc2lvbiBvZiB0aGUgZ2FtZSB1c2VkCgkJdWludDY0IHNlZWQ7IC8vc2VlZCB1c2VkCgkJdWludDY0IHN1Ym1pdEJsb2NrTnVtYmVyOyAvLyBibG9ja051bWJlciBhdCB3aGljaCB0aGUgc3VibWlzc2lvbiBpcyBwcm9jZXNzZWQKCQlieXRlczMyIHByb29mSGFzaDsvL3NoYTI1NiBvZiBwcm9vZiA6IHRvIHNhdmUgZ2FzLCB0aGUgcHJvb2YgaXMgbm90IHNhdmVkIGRpcmVjdGx5IGluIHRoZSBjb250cmFjdC4gSW5zdGVhZCBpdHMgaGFzaCBpcyBzYXZlZC4gVGhlIGFjdHVhbCBwcm9vZiB3aWxsIGJlIHNhdmVkIG9uIGEgc2VydmVyLiBUaGUgcGxheWVyIGNvdWxkIHBvdGVudGlhbGx5IHNhdmUgaXQgdG9vLiAKCX0KCQoJLy9wbGF5ZXIgc3RhcnQgZ2FtZSBwYXJhbWV0ZXIKCXN0cnVjdCBTdGFydHsKCQl1aW50OCBjb21wZXRpdGlvbkluZGV4OyAvL2NvbXBldGl0aW9uIGluZGV4ICgwIG9yIDEpIHRoZXJlIGlzIG9ubHkgMiBjdXJyZW50IGNvbXBldGl0aW9uIHBlciBnYW1lLCBvbmUgaXMgYWN0aXZlLCB0aGUgb3RoZXIgb25lIGJlaW5nIHRoZSBvbGRlciBvbmUgd2hpY2ggbWlnaHQgaGF2ZSBwZW5kaW5nIHZlcmlmaWNhdGlvbgoJCXVpbnQzMiB2ZXJzaW9uOyAgLy92ZXJzaW9uIG9mIHRoZSBnYW1lIHRoYXQgdGhlIHBsYXllciBzY29yZSBpcyBiYXNlZCBvbgoJCXVpbnQ2NCBzZWVkOyAvLyB0aGUgc2VlZCB1c2VkIGZvciB0aGUgZ2FtZSBzZXNzaW9uCgkJdWludDY0IHRpbWU7IC8vIHN0YXJ0IHRpbWUgLCB1c2VkIHRvIGNoZWNrIGlmIHRoZSBwbGF5ZXIgaXMgbm90IHRha2luZyB0b28gbG9uZyB0byBzdWJtaXQgaXRzIHNjb3JlCgl9CgkKCS8vIHRoZSB2YWx1ZXMgcmVwcmVzZW50aW5nIGVhY2ggY29tcGV0aXRpb24KCXN0cnVjdCBDb21wZXRpdGlvbnsKCQl1aW50OCBudW1QYXN0QmxvY2tzOy8vIG51bWJlciBvZiBwYXN0IGJsb2NrIGFsbG93ZWQsIDEgaXMgdGhlIG1pbmltdW0gc2luY2UgeW91IGNhbiBvbmx5IGdldCB0aGUgaGFzaCBvZiBhIHBhc3QgYmxvY2suIEFsbG93IHBsYXllciB0byBzdGFydCBwbGF5IGluc3RhbnR1bm91c2x5CgkJdWludDggaG91c2VEaXZpZGVyOyAvLyBob3cgbXVjaCB0aGUgaG91c2UgdGFrZXMgOiA0IG1lYW5zIGhvdXNlIHRha2UgMS80ICgyNSUpCgkJdWludDE2IGxhZzsgLy8gZGVmaW5lIGhvdyBtdWNoIGV4dHJhIHRpbWUgaXMgYWxsb3dlZCB0byBzdWJtaXQgYSBzY29yZSAodG8gYWNjb21vZGF0ZSBibG9jayB0aW1lIGFuZCBkZWxheXMpCgkJdWludDMyIHZlcmlmaWNhdGlvbldhaXRUaW1lOy8vIHdhaXQgdGltZSBhbGxvd2VkIGZvciBzdWJtaXNzaW9uIHBhc3QgY29tcGV0aXRpb24ncyBlbmQgdGltZSAKCQl1aW50MzIgbnVtUGxheWVyczsvL2N1cnJlbnQgbnVtYmVyIG9mIHBsYXllciB0aGF0IHN1Ym1pdGVkIGEgc2NvcmUKCQl1aW50MzIgdmVyc2lvbjsgLy90aGUgdmVyc2lvbiBvZiB0aGUgZ2FtZSB1c2VkIGZvciB0aGF0IGNvbXBldGl0aW9uLCBhIGhhc2ggb2YgdGhlIGNvZGUgaXMgcHVibGlzaGVkIGluIHRoZSBsb2cgdXBvbiBjaGFuZ2luZwoJCXVpbnQzMiBwcmV2aW91c1ZlcnNpb247IC8vIHByZXZpb3VzVmVyc2lvbiB0byBhbGxvdyBzbW9vdGggdXBkYXRlIHVwb24gdmVyc2lvbiBjaGFuZ2UKCQl1aW50NjQgdmVyc2lvbkNoYW5nZUJsb2NrTnVtYmVyOyAKCQl1aW50NjQgc3dpdGNoQmxvY2tOdW1iZXI7IC8vIHRoZSBibG9ja051bWJlciBhdCB3aGljaCB0aGUgY29tcGV0aXRpb24gc3RhcnRlZAoJCXVpbnQ2NCBlbmRUaW1lOy8vVGhlIHRpbWUgYXQgd2hpY2ggdGhlIGNvbXBldGl0aW9uIGlzIHNldCB0byBmaW5pc2guIE5vIHN0YXJ0IGNhbiBoYXBwZW4gYWZ0ZXIgdGhhdCBhbmQgdGhlIGNvbXBldGl0aW9uIGNhbm5vdCBiZSBhYm9ydGVkIGJlZm9yZSB0aGF0CgkJdWludDg4IHByaWNlOyAgLy8gdGhlIHByaWNlIGZvciB0aGF0IGNvbXBldGl0aW9uLCBkbyBub3QgY2hhbmdlIAoJCXVpbnQxMjggamFja3BvdDsgLy8gdGhlIGN1cnJlbnQgamFja3BvdCBmb3IgdGhhdCBjb21wZXRpdGlvbiwgdGhpcyBqYWNrcG90IGlzIHRoZW4gc2hhcmVkIGFtb25nIHRoZSBkZXZlbG9wZXIgKGluIHRoZSBkZXBvc2l0IGFjY291bnQgZm9yICBmdW5kaW5nIGRldmVsb3BtZW50KSBhbmQgdGhlIHdpbm5lcnMgKHNlZSBob3VzZURpdmlkZXIpKQoJCXVpbnQzMltdIHJld2FyZHNEaXN0cmlidXRpb247IC8vIHRoZSBsZW5ndGggb2YgaXQgZGVmaW5lIGhvdyBtYW55IHdpbm5lcnMgdGhlcmUgaXMgYW5kIHRoZSBkaXN0cmlidXRpb24gb2YgdGhlIHJld2FyZCBpcyB0aGUgdmFsdWUgZm9yIGVhY2ggaW5kZXggZGl2aWRlZCBieSB0aGUgdG90YWwKCQltYXBwaW5nIChhZGRyZXNzID0+IFN1Ym1pc3Npb24pIHN1Ym1pc3Npb25zOyAgLy9vbmx5IG9uZSBzdWJtaXNzaW9uIHBlciBwbGF5ZXIgcGVyIGNvbXBldGl0aW9uCgkJYWRkcmVzc1tdIHBsYXllcnM7IC8vIGNvbnRhaW4gdGhlIGxpc3Qgb2YgcGxheWVycyB0aGF0IHN1Ym1pdGVkIGEgc2NvcmUgZm9yIHRoYXQgY29tcGV0aXRpb24KCX0KCQkKCXN0cnVjdCBHYW1lewoJCW1hcHBpbmcgKGFkZHJlc3MgPT4gU3RhcnQpIHN0YXJ0czsgLy8gb25seSAxIHN0YXJ0IHBlciBwbGF5ZXIsIGZ1cnRoZXIgb3ZlcnJpZGUgdGhlIGN1cnJlbnQKCQlDb21wZXRpdGlvblsyXSBjb21wZXRpdGlvbnM7IC8vIDIgY29tcGV0aXRpb25zIG9ubHkgdG8gc2F2ZSBnYXMsIG92ZXJyaXRlIGVhY2ggb3RoZXIgdXBvbiBnb2luZyB0byBuZXh0IGNvbXBldGl0aW9uCgkJdWludDggY3VycmVudENvbXBldGl0aW9uSW5kZXg7IC8vY2FuIG9ubHkgYmUgMSBvciAwIChzd2l0Y2ggb3BlcmF0aW9uIDogMSAtIGN1cnJlbnRDb21wZXRpdGlvbkluZGV4KQoJfQoKCW1hcHBpbmcgKHN0cmluZyA9PiBHYW1lKSBnYW1lczsKCQoJYWRkcmVzcyBvcmdhbmlzZXI7IC8vIGFkbWluIGhhdmluZyBjb250cm9sIG9mIHRoZSByZXdhcmQgCglhZGRyZXNzIGRlcG9zaXRBY2NvdW50OwkgLy8gaXMgdGhlIHJlY2VpdmVyIG9mIHRoZSBob3VzZSBwYXJ0IG9mIHRoZSBqYWNrcG90IChzZWUgaG91c2VEaXZpZGVyKSBDYW4gb25seSBiZSBjaGFuZ2VkIGJ5IHRoZSBkZXBvc2l0QWNjb3VudC4KCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRVZFTlRTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgkvL2V2ZW50IGxvZ2dpbmcgdGhlIGhhc2ggb2YgdGhlIGdhbWUgY29kZSBmb3IgYSBwYXJ0aWN1bGFyIHZlcnNpb24KCWV2ZW50IFZlcnNpb25DaGFuZ2UoCgkJc3RyaW5nIGluZGV4ZWQgZ2FtZUlELAoJCXVpbnQzMiBpbmRleGVkIHZlcnNpb24sCgkJYnl0ZXMzMiBjb2RlSGFzaCAvLyB0aGUgc2hhMjU2IG9mIHRoZSBnYW1lIGNvZGUgYXMgdXNlZCBieSB0aGUgcGxheWVyCgkpOwoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoKCgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBQTEFZRVJTIEFDVElPTlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoJCgkvKgoJVGhlIHNlZWQgaXMgY29tcHV0ZWQgZnJvbSB0aGUgYmxvY2sgaGFzaCBhbmQgdGhlIHNlbmRlciBhZGRyZXNzCglXaGlsZSB0aGUgc2VlZCBjYW4gYmUgcHJlZGljdGVkIGZvciBmZXcgYmxvY2sgYXdheSAoc2VlIDogbnVtUGFzdEJsb2NrcykgdGhpcyBpcyBoYXMgbm8gbXVjaCByZWxldmFuY2Ugc2luY2UgYSBnYW1lIHNlc3Npb24gaGF2ZSBhIGJpZ2dlciBkdXJhdGlvbiwKCVJlbWVtYmVyIHRoaXMgaXMgbm90IGdhbWJsaW5nIGdhbWUsIHRoaXMgaXMgYSBza2lsbCBnYW1lLCBzZWVkIGlzIG9ubHkgYSBzbWFsbCBwYXJ0IG9mIHRoZSBnYW1lIG91dGNvbWUKCSovCglmdW5jdGlvbiBjb21wdXRlU2VlZCh1aW50NjQgYmxvY2tOdW1iZXIsIGFkZHJlc3MgcGxheWVyKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQ2NCBzZWVkKXsgCgkJcmV0dXJuIHVpbnQ2NChzaGEzKGJsb2NrLmJsb2NraGFzaChibG9ja051bWJlciksYmxvY2suYmxvY2toYXNoKGJsb2NrTnVtYmVyLTEpLGJsb2NrLmJsb2NraGFzaChibG9ja051bWJlci0yKSxibG9jay5ibG9ja2hhc2goYmxvY2tOdW1iZXItMyksYmxvY2suYmxvY2toYXNoKGJsb2NrTnVtYmVyLTQpLGJsb2NrLmJsb2NraGFzaChibG9ja051bWJlci01KSxwbGF5ZXIpKTsgCgl9CgkKCS8qCgkJcHJvYmUgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGNvbXBldGl0aW9uIHNvIHBsYXllciBjYW4gc3RhcnQgcGxheWluZyByaWdodCBhd2F5IChuZWVkIHRvIGNvbW1pdCBhIHR4IHRvbyB0byBlbnN1cmUgaXRzIHBsYXkgd2lsbCBiZSBjb25zaWRlcmVkIHRob3VnaCkKCSovCglmdW5jdGlvbiBnZXRTZWVkQW5kU3RhdGUoc3RyaW5nIGdhbWVJRCwgYWRkcmVzcyBwbGF5ZXIpIGNvbnN0YW50IHJldHVybnModWludDY0IHNlZWQsIHVpbnQ2NCBibG9ja051bWJlciwgdWludDggY29tcGV0aXRpb25JbmRleCwgdWludDMyIHZlcnNpb24sIHVpbnQ2NCBlbmRUaW1lLCB1aW50ODggcHJpY2UsIHVpbnQzMiBteUJlc3RTY29yZSwgdWludDY0IGNvbXBldGl0aW9uQmxvY2tOdW1iZXIsIHVpbnQ2NCByZWdpc3RlcmVkU2VlZCl7CgkJdmFyIGdhbWUgPSBnYW1lc1tnYW1lSURdOwoKCQljb21wZXRpdGlvbkluZGV4ID0gZ2FtZS5jdXJyZW50Q29tcGV0aXRpb25JbmRleDsKCQl2YXIgY29tcGV0aXRpb24gPSBnYW1lLmNvbXBldGl0aW9uc1tjb21wZXRpdGlvbkluZGV4XTsKCgkJYmxvY2tOdW1iZXIgPSB1aW50NjQoYmxvY2subnVtYmVyLTEpOwoJCXNlZWQgPSBjb21wdXRlU2VlZChibG9ja051bWJlciwgcGxheWVyKTsKCQl2ZXJzaW9uID0gY29tcGV0aXRpb24udmVyc2lvbjsKCQllbmRUaW1lID0gY29tcGV0aXRpb24uZW5kVGltZTsKCQlwcmljZSA9IGNvbXBldGl0aW9uLnByaWNlOwoJCWNvbXBldGl0aW9uQmxvY2tOdW1iZXIgPSBjb21wZXRpdGlvbi5zd2l0Y2hCbG9ja051bWJlcjsKCQkKCQlpZiAoY29tcGV0aXRpb24uc3VibWlzc2lvbnNbcGxheWVyXS5zdWJtaXRCbG9ja051bWJlciA+PSBjb21wZXRpdGlvbi5zd2l0Y2hCbG9ja051bWJlcil7CgkJCW15QmVzdFNjb3JlID0gY29tcGV0aXRpb24uc3VibWlzc2lvbnNbcGxheWVyXS5zY29yZTsKCQl9ZWxzZXsKCQkJbXlCZXN0U2NvcmUgPSAwOwoJCX0KCQkKCQlyZWdpc3RlcmVkU2VlZCA9IGdhbWUuc3RhcnRzW3BsYXllcl0uc2VlZDsKCX0KCQoJCgkJCglmdW5jdGlvbiBzdGFydChzdHJpbmcgZ2FtZUlELCB1aW50NjQgYmxvY2tOdW1iZXIsdWludDggY29tcGV0aXRpb25JbmRleCwgdWludDMyIHZlcnNpb24pIHBheWFibGUgewoJCXZhciBnYW1lID0gZ2FtZXNbZ2FtZUlEXTsKCQl2YXIgY29tcGV0aXRpb24gPSBnYW1lLmNvbXBldGl0aW9uc1tjb21wZXRpdGlvbkluZGV4XTsKCgkJaWYobXNnLnZhbHVlICE9IGNvbXBldGl0aW9uLnByaWNlKXsKCQkJdGhyb3c7CgkJfQoKCQlpZigKCQkJY29tcGV0aXRpb24uZW5kVGltZSA8PSBub3cgfHwgLy9ibG9jayBwbGF5IHdoZW4gdGltZSBpcyB1cCAKCQkJY29tcGV0aXRpb25JbmRleCAhPSBnYW1lLmN1cnJlbnRDb21wZXRpdGlvbkluZGV4IHx8IC8vc3RhcnQgaGFwcGVuIGp1c3QgYWZ0ZXIgYSBzd2l0Y2ggLy8gc2hvdWxkIG5vdCBiZSBwb3NzaWJsZSBzaW5jZSBlbmRUaW1lIGFscmVhZHkgZW5zdXJlIHRoYXQgYSBuZXcgY29tcGV0aXRpb24gY2Fubm90IHN0YXJ0IGJlZm9yZSB0aGUgZW5kIG9mIHRoZSBmaXJzdAoJCQl2ZXJzaW9uICE9IGNvbXBldGl0aW9uLnZlcnNpb24gJiYgKHZlcnNpb24gIT0gY29tcGV0aXRpb24ucHJldmlvdXNWZXJzaW9uIHx8IGJsb2NrLm51bWJlciA+IGNvbXBldGl0aW9uLnZlcnNpb25DaGFuZ2VCbG9ja051bWJlcikgfHwgLy9lbnN1cmUgdmVyc2lvbiBpcyBzYW1lIGFzIGN1cnJlbnQgKG9yIHByZXZpb3VzIGlmIHZlcnNpb25DaGFuZ2VCbG9ja051bWJlciBpcyByZWNlbnQpCgkJCWJsb2NrLm51bWJlciA+PSBjb21wZXRpdGlvbi5udW1QYXN0QmxvY2tzICYmIGJsb2NrLm51bWJlciAtIGNvbXBldGl0aW9uLm51bVBhc3RCbG9ja3MgPiBibG9ja051bWJlciAvL2Vuc3VyZSBzdGFydCBpcyBub3QgdG9vIG9sZCAgIAoJCQkpewoJCQkJLy9pZiBldGhlciB3YXMgc2VudCwgc2VuZCBpdCBiYWNrIGlmIHBvc3NpYmxlLCBlbHNlIHRocm93CgkJCQlpZihtc2cudmFsdWUgIT0gMCAmJiAhbXNnLnNlbmRlci5zZW5kKG1zZy52YWx1ZSkpewoJCQkJCXRocm93OwoJCQkJfQoJCQkJcmV0dXJuOwoJCX0KCQkKCQljb21wZXRpdGlvbi5qYWNrcG90ICs9IHVpbnQxMjgobXNnLnZhbHVlKTsgLy9pbmNyZWFzZSB0aGUgamFja3BvdAoJCQoJCS8vc2F2ZSB0aGUgc3RhcnQgcGFyYW1zCgkJZ2FtZS5zdGFydHNbbXNnLnNlbmRlcl0gPSBTdGFydCh7CgkJCXNlZWQ6IGNvbXB1dGVTZWVkKGJsb2NrTnVtYmVyLG1zZy5zZW5kZXIpCgkJCSwgdGltZSA6IHVpbnQ2NChub3cpCgkJCSwgY29tcGV0aXRpb25JbmRleCA6IGNvbXBldGl0aW9uSW5kZXgKCQkJLCB2ZXJzaW9uIDogdmVyc2lvbgoJCX0pOyAKCX0KCQkKCWZ1bmN0aW9uIHN1Ym1pdChzdHJpbmcgZ2FtZUlELCB1aW50NjQgc2VlZCwgdWludDMyIHNjb3JlLCB1aW50MzIgZHVyYXRpb25Sb3VuZGVkRG93biwgYnl0ZXMzMiBwcm9vZkhhc2gpeyAKCQl2YXIgZ2FtZSA9IGdhbWVzW2dhbWVJRF07CgoJCXZhciBnYW1lU3RhcnQgPSBnYW1lLnN0YXJ0c1ttc2cuc2VuZGVyXTsKCQkJCgkJLy9zZWVkIHNob3VsZCBiZSBzYW1lLCBlbHNlIGl0IG1lYW5zIGRvdWJsZSBzdGFydCBhbmQgdGhpcyBvbmUgZXhlY3V0aW5nIGlzIGZyb20gdGhlIG9sZCBvbmUgCgkJaWYoZ2FtZVN0YXJ0LnNlZWQgIT0gc2VlZCl7CgkJCXJldHVybjsKCQl9CgkJCgkJdmFyIGNvbXBldGl0aW9uID0gZ2FtZS5jb21wZXRpdGlvbnNbZ2FtZVN0YXJ0LmNvbXBldGl0aW9uSW5kZXhdOwoJCQoJCS8vIGdhbWUgc2hvdWxkIG5vdCB0YWtlIHRvbyBsb25nIHRvIGJlIHN1Ym1pdGVkCgkJaWYobm93IC0gZ2FtZVN0YXJ0LnRpbWUgPiBkdXJhdGlvblJvdW5kZWREb3duICsgY29tcGV0aXRpb24ubGFnKXsgCgkJCXJldHVybjsKCQl9CgoJCWlmKG5vdyA+PSBjb21wZXRpdGlvbi5lbmRUaW1lICsgY29tcGV0aXRpb24udmVyaWZpY2F0aW9uV2FpdFRpbWUpewoJCQlyZXR1cm47IC8vdGhpcyBlbnN1cmUgdmVyaWZpZXIgdG8gZ2V0IGFsbCB0aGUgc2NvcmUgYXQgdGhhdCB0aW1lIChzaG91bGQgbmV2ZXIgYmUgdGhlcmUgdGhvdWdoIGFzIGdhbWUgc2hvdWxkIGVuc3VyZSBhIG1heGltdW1UaW1lIDwgdmVyaWZpY2F0aW9uV2FpdFRpbWUpCgkJfQoJCQoJCXZhciBzdWJtaXNzaW9uID0gY29tcGV0aXRpb24uc3VibWlzc2lvbnNbbXNnLnNlbmRlcl07CgkJaWYoc3VibWlzc2lvbi5zdWJtaXRCbG9ja051bWJlciA8IGNvbXBldGl0aW9uLnN3aXRjaEJsb2NrTnVtYmVyKXsKCQkJaWYoY29tcGV0aXRpb24ubnVtUGxheWVycyA+PSA0Mjk0OTY3Mjk1KXsgLy91bmxpa2VseSBidXQgaWYgdGhhdCBoYXBwZW4gdGhpcyBpcyBmb3Igbm93IHRoZSBiZXN0IHBsYWNlIHRvIHN0b3AKCQkJCXJldHVybjsKCQkJfQoJCX1lbHNlIGlmIChzY29yZSA8PSBzdWJtaXNzaW9uLnNjb3JlKXsKCQkJcmV0dXJuOwoJCX0KCQkKCQl2YXIgcGxheWVycyA9IGNvbXBldGl0aW9uLnBsYXllcnM7CgkJLy9pZiBwbGF5ZXIgZGlkIG5vdCBzdWJtaXQgc2NvcmUgeWV0ID0+IGFkZCBwbGF5ZXIgdG8gbGlzdAoJCWlmKHN1Ym1pc3Npb24uc3VibWl0QmxvY2tOdW1iZXIgPCBjb21wZXRpdGlvbi5zd2l0Y2hCbG9ja051bWJlcil7CgkJCXZhciBjdXJyZW50TnVtUGxheWVyID0gY29tcGV0aXRpb24ubnVtUGxheWVyczsKCQkJaWYoY3VycmVudE51bVBsYXllciA+PSBwbGF5ZXJzLmxlbmd0aCl7CgkJCQlwbGF5ZXJzLnB1c2gobXNnLnNlbmRlcik7CgkJCX1lbHNlewoJCQkJcGxheWVyc1tjdXJyZW50TnVtUGxheWVyXSA9IG1zZy5zZW5kZXI7CgkJCX0KCQkJY29tcGV0aXRpb24ubnVtUGxheWVycyA9IGN1cnJlbnROdW1QbGF5ZXIgKyAxOwoJCX0KCQkKCQljb21wZXRpdGlvbi5zdWJtaXNzaW9uc1ttc2cuc2VuZGVyXSA9IFN1Ym1pc3Npb24oewoJCQlwcm9vZkhhc2g6cHJvb2ZIYXNoLAoJCQlzZWVkOmdhbWVTdGFydC5zZWVkLAoJCQlzY29yZTpzY29yZSwKCQkJZHVyYXRpb25Sb3VuZGVkRG93bjpkdXJhdGlvblJvdW5kZWREb3duLAoJCQlzdWJtaXRCbG9ja051bWJlcjp1aW50NjQoYmxvY2subnVtYmVyKSwKCQkJdmVyc2lvbjpnYW1lU3RhcnQudmVyc2lvbgoJCX0pOwoJCQoJfQoJCgkvKgoJCWFjY2VwdCBkb25hdGlvbiBwYXltZW50IDogdGhpcyBpbmNyZWFzZSB0aGUgamFja3BvdCBvZiB0aGUgY3VycmVudENvbXBldGl0aW9uIG9mIHRoZSBzcGVjaWZpZWQgZ2FtZQoJKi8KCWZ1bmN0aW9uIGluY3JlYXNlSmFja3BvdChzdHJpbmcgZ2FtZUlEKSBwYXlhYmxlewoJCXZhciBnYW1lID0gZ2FtZXNbZ2FtZUlEXTsKCQlnYW1lLmNvbXBldGl0aW9uc1tnYW1lLmN1cnJlbnRDb21wZXRpdGlvbkluZGV4XS5qYWNrcG90ICs9IHVpbnQxMjgobXNnLnZhbHVlKTsgLy9leHRyYSBldGhlciBpcyBsb3N0IGJ1dCB0aGlzIGlzIG5vdCBnb2luZyB0byBoYXBwZW4gOikKCX0KCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gUFJJVkFURSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgkJCglmdW5jdGlvbiBDb21wZXRpdGlvblN0b3JlKCl7CgkJb3JnYW5pc2VyID0gbXNnLnNlbmRlcjsKCQlkZXBvc2l0QWNjb3VudCA9IG1zZy5zZW5kZXI7Cgl9CgoJCgkvL2dpdmUgYSBzdGFydGluZyBqYWNrcG90IGJ5IHNlbmRpbmcgZXRoZXIgdG8gdGhlIHRyYW5zYWN0aW9uCglmdW5jdGlvbiBfc3RhcnROZXh0Q29tcGV0aXRpb24oc3RyaW5nIGdhbWVJRCwgdWludDMyIHZlcnNpb24sIHVpbnQ4OCBwcmljZSwgdWludDggbnVtUGFzdEJsb2NrcywgdWludDggaG91c2VEaXZpZGVyLCB1aW50MTYgbGFnLCB1aW50NjQgZHVyYXRpb24sIHVpbnQzMiB2ZXJpZmljYXRpb25XYWl0VGltZSwgYnl0ZXMzMiBjb2RlSGFzaCwgdWludDMyW10gcmV3YXJkc0Rpc3RyaWJ1dGlvbikgcGF5YWJsZXsKCQlpZihtc2cuc2VuZGVyICE9IG9yZ2FuaXNlcil7CgkJCXRocm93OwoJCX0KCQl2YXIgZ2FtZSA9IGdhbWVzW2dhbWVJRF07CgkJdmFyIG5ld0NvbXBldGl0aW9uID0gZ2FtZS5jb21wZXRpdGlvbnNbMSAtIGdhbWUuY3VycmVudENvbXBldGl0aW9uSW5kZXhdOyAKCQl2YXIgY3VycmVudENvbXBldGl0aW9uID0gZ2FtZS5jb21wZXRpdGlvbnNbZ2FtZS5jdXJyZW50Q29tcGV0aXRpb25JbmRleF07CgkJLy9kbyBub3QgYWxsb3cgdG8gc3dpdGNoIGlmIGVuZFRpbWUgaXMgbm90IG92ZXIKCQlpZihjdXJyZW50Q29tcGV0aXRpb24uZW5kVGltZSA+PSBub3cpewoJCQl0aHJvdzsKCQl9CgoJCS8vYmxvY2sgc3dpdGNoIGlmIHJld2FyZCB3YXMgbm90IGNhbGxlZCAobnVtUGxheWVycyA+IDApCgkJaWYobmV3Q29tcGV0aXRpb24ubnVtUGxheWVycyA+IDApewoJCQl0aHJvdzsKCQl9CgkJCgkJaWYoaG91c2VEaXZpZGVyID09IDApeyAKCQkJdGhyb3c7CgkJfQoJCQoJCWlmKG51bVBhc3RCbG9ja3MgPCAxKXsKCQkJdGhyb3c7CgkJfQoJCQoJCWlmKHJld2FyZHNEaXN0cmlidXRpb24ubGVuZ3RoID09IDAgfHwgcmV3YXJkc0Rpc3RyaWJ1dGlvbi5sZW5ndGggPiA2NCl7IC8vIGRvIG5vdCByaXNrIGdhcyBzaG9ydGFnZSBvbiByZXdhcmQKCQkJdGhyb3c7CgkJfQoJCS8vZW5zdXJlIHJld2FyZHNEaXN0cmlidXRpb24gZ2l2ZSBhbHdheXMgc29tZXRoaW5nIGFuZCBkbyBub3QgZ2l2ZSBtb3JlIHRvIGEgbG93ZXIgc2NvcmluZyBwbGF5ZXIKCQl1aW50MzIgcHJldiA9IDA7CgkJZm9yKHVpbnQ4IGkgPSAwOyBpIDwgcmV3YXJkc0Rpc3RyaWJ1dGlvbi5sZW5ndGg7IGkrKyl7CgkJCWlmKHJld2FyZHNEaXN0cmlidXRpb25baV0gPT0gMCB8fCAgKHByZXYgIT0gMCAmJiByZXdhcmRzRGlzdHJpYnV0aW9uW2ldID4gcHJldikpewoJCQkJdGhyb3c7CgkJCX0KCQkJcHJldiA9IHJld2FyZHNEaXN0cmlidXRpb25baV07CgkJfQoKCQlpZih2ZXJzaW9uICE9IGN1cnJlbnRDb21wZXRpdGlvbi52ZXJzaW9uKXsKCQkJVmVyc2lvbkNoYW5nZShnYW1lSUQsdmVyc2lvbixjb2RlSGFzaCk7IAoJCX0KCQkKCQlnYW1lLmN1cnJlbnRDb21wZXRpdGlvbkluZGV4ID0gMSAtIGdhbWUuY3VycmVudENvbXBldGl0aW9uSW5kZXg7CgkJCgkJbmV3Q29tcGV0aXRpb24uc3dpdGNoQmxvY2tOdW1iZXIgPSB1aW50NjQoYmxvY2subnVtYmVyKTsKCQluZXdDb21wZXRpdGlvbi5wcmV2aW91c1ZlcnNpb24gPSAwOwoJCW5ld0NvbXBldGl0aW9uLnZlcnNpb25DaGFuZ2VCbG9ja051bWJlciA9IDA7CgkJbmV3Q29tcGV0aXRpb24udmVyc2lvbiA9IHZlcnNpb247CgkJbmV3Q29tcGV0aXRpb24ucHJpY2UgPSBwcmljZTsgCgkJbmV3Q29tcGV0aXRpb24ubnVtUGFzdEJsb2NrcyA9IG51bVBhc3RCbG9ja3M7CgkJbmV3Q29tcGV0aXRpb24ucmV3YXJkc0Rpc3RyaWJ1dGlvbiA9IHJld2FyZHNEaXN0cmlidXRpb247CgkJbmV3Q29tcGV0aXRpb24uaG91c2VEaXZpZGVyID0gaG91c2VEaXZpZGVyOwoJCW5ld0NvbXBldGl0aW9uLmxhZyA9IGxhZzsKCQluZXdDb21wZXRpdGlvbi5qYWNrcG90ICs9IHVpbnQxMjgobXNnLnZhbHVlKTsgLy9leHRyYSBldGhlciBpcyBsb3N0IGJ1dCB0aGlzIGlzIG5vdCBnb2luZyB0byBoYXBwZW4gOikKCQluZXdDb21wZXRpdGlvbi5lbmRUaW1lID0gdWludDY0KG5vdykgKyBkdXJhdGlvbjsKCQluZXdDb21wZXRpdGlvbi52ZXJpZmljYXRpb25XYWl0VGltZSA9IHZlcmlmaWNhdGlvbldhaXRUaW1lOwoJfQoJCgkKCQoJZnVuY3Rpb24gX3NldEJ1Z0ZpeFZlcnNpb24oc3RyaW5nIGdhbWVJRCwgdWludDMyIHZlcnNpb24sIGJ5dGVzMzIgY29kZUhhc2gsIHVpbnQzMiBudW1CbG9ja0FsbG93ZWRGb3JQYXN0VmVyc2lvbil7CgkJaWYobXNnLnNlbmRlciAhPSBvcmdhbmlzZXIpewoJCQl0aHJvdzsKCQl9CgoJCXZhciBnYW1lID0gZ2FtZXNbZ2FtZUlEXTsKCQl2YXIgY29tcGV0aXRpb24gPSBnYW1lLmNvbXBldGl0aW9uc1tnYW1lLmN1cnJlbnRDb21wZXRpdGlvbkluZGV4XTsKCQkKCQlpZih2ZXJzaW9uIDw9IGNvbXBldGl0aW9uLnZlcnNpb24peyAvLyBhIGJ1ZyBmaXggc2hvdWxkIGJlIGEgbmV3IHZlcnNpb24gKGdyZWF0ZXIgdGhhbiBwcmV2aW91cyB2ZXJzaW9uKQoJCQl0aHJvdzsKCQl9CgkJCgkJaWYoY29tcGV0aXRpb24uZW5kVGltZSA8PSBub3cpeyAvLyBjYW5ub3QgYnVnRml4IGEgY29tcGV0aXRpb24gdGhhdCBhbHJlYWR5IGVuZGVkCgkJCXJldHVybjsKCQl9CgkJCgkJY29tcGV0aXRpb24ucHJldmlvdXNWZXJzaW9uID0gY29tcGV0aXRpb24udmVyc2lvbjsKCQljb21wZXRpdGlvbi52ZXJzaW9uQ2hhbmdlQmxvY2tOdW1iZXIgPSB1aW50NjQoYmxvY2subnVtYmVyICsgbnVtQmxvY2tBbGxvd2VkRm9yUGFzdFZlcnNpb24pOwoJCWNvbXBldGl0aW9uLnZlcnNpb24gPSB2ZXJzaW9uOwoJCVZlcnNpb25DaGFuZ2UoZ2FtZUlELHZlcnNpb24sY29kZUhhc2gpOwoJfQoKCWZ1bmN0aW9uIF9zZXRMYWdQYXJhbXMoc3RyaW5nIGdhbWVJRCwgdWludDE2IGxhZywgdWludDggbnVtUGFzdEJsb2Nrcyl7CgkJaWYobXNnLnNlbmRlciAhPSBvcmdhbmlzZXIpewoJCQl0aHJvdzsKCQl9CgkJCgkJaWYobnVtUGFzdEJsb2NrcyA8IDEpewoJCQl0aHJvdzsKCQl9CgoJCXZhciBnYW1lID0gZ2FtZXNbZ2FtZUlEXTsKCQl2YXIgY29tcGV0aXRpb24gPSBnYW1lLmNvbXBldGl0aW9uc1tnYW1lLmN1cnJlbnRDb21wZXRpdGlvbkluZGV4XTsKCQljb21wZXRpdGlvbi5udW1QYXN0QmxvY2tzID0gbnVtUGFzdEJsb2NrczsKCQljb21wZXRpdGlvbi5sYWcgPSBsYWc7Cgl9CgoJZnVuY3Rpb24gX3Jld2FyZFdpbm5lcnMoc3RyaW5nIGdhbWVJRCwgdWludDggY29tcGV0aXRpb25JbmRleCwgYWRkcmVzc1tdIHdpbm5lcnMpewoJCWlmKG1zZy5zZW5kZXIgIT0gb3JnYW5pc2VyKXsKCQkJdGhyb3c7CgkJfQoJCQoJCXZhciBjb21wZXRpdGlvbiA9IGdhbWVzW2dhbWVJRF0uY29tcGV0aXRpb25zW2NvbXBldGl0aW9uSW5kZXhdOwoKCQkvL2Vuc3VyZSB0aW1lIGhhcyBwYXNzZWQgc28gdGhhdCBwbGF5ZXJzIHdobyBzdGFydGVkIG5lYXIgdGhlIGVuZCBjYW4gZmluaXNoIHRoZWlyIHNlc3Npb24gCgkJLy9nYW1lIHNob3VsZCBiZSBtYWRlIHRvIGVuc3VyZSB0ZXJtaW5hdGlvbiBiZWZvcmUgdmVyaWZpY2F0aW9uV2FpdFRpbWUsIGl0IGlzIHRoZSBnYW1lIHJlc3BvbnNhYmlsaXR5CgkJaWYoaW50KG5vdykgLSBjb21wZXRpdGlvbi5lbmRUaW1lIDwgY29tcGV0aXRpb24udmVyaWZpY2F0aW9uV2FpdFRpbWUpewoJCQl0aHJvdzsKCQl9CgoJCQoJCWlmKCBjb21wZXRpdGlvbi5qYWNrcG90ID4gMCl7IC8vIGlmIHRoZXJlIGlzIG5vIGphY2twb3Qgc2tpcAoKCQkJCgkJCXZhciByZXdhcmRzRGlzdHJpYnV0aW9uID0gY29tcGV0aXRpb24ucmV3YXJkc0Rpc3RyaWJ1dGlvbjsKCgkJCXVpbnQ4IG51bVdpbm5lcnMgPSB1aW50OChyZXdhcmRzRGlzdHJpYnV0aW9uLmxlbmd0aCk7CgoJCQlpZihudW1XaW5uZXJzID4gdWludDgod2lubmVycy5sZW5ndGgpKXsKCQkJCW51bVdpbm5lcnMgPSB1aW50OCh3aW5uZXJzLmxlbmd0aCk7CgkJCX0KCgkJCXVpbnQxMjggZm9ySG91c2UgPSBjb21wZXRpdGlvbi5qYWNrcG90OwoJCQlpZihudW1XaW5uZXJzID4gMCAmJiBjb21wZXRpdGlvbi5ob3VzZURpdmlkZXIgPiAxKXsgLy9pbiBjYXNlIHRoZXJlIGlzIG5vIHdpbm5lcnMgKG5vIHBsYXllcnMgb3Igb25seSBjaGVhdGVycyksIHRoZSBob3VzZSB0YWtlcyBhbGwKCQkJCWZvckhvdXNlID0gZm9ySG91c2UgLyBjb21wZXRpdGlvbi5ob3VzZURpdmlkZXI7CgkJCQl1aW50MTI4IGZvcldpbm5lcnMgPSBjb21wZXRpdGlvbi5qYWNrcG90IC0gZm9ySG91c2U7CgoJCQkJdWludDY0IHRvdGFsID0gMDsKCQkJCWZvcih1aW50OCBpPTA7IGk8bnVtV2lubmVyczsgaSsrKXsgLy8gZGlzdHJpYnV0ZSBhbGwgdGhlIHdpbm5pbmcgZXZlbiBpZiB0aGVyZSBpcyBub3QgYWxsIHRoZSB3aW5uZXJzCgkJCQkJdG90YWwgKz0gcmV3YXJkc0Rpc3RyaWJ1dGlvbltpXTsKCQkJCX0KCQkJCWZvcih1aW50OCBqPTA7IGo8bnVtV2lubmVyczsgaisrKXsKCQkJCQl1aW50MTI4IHZhbHVlID0gKGZvcldpbm5lcnMgKiByZXdhcmRzRGlzdHJpYnV0aW9uW2pdKSAvIHRvdGFsOwoJCQkJCWlmKCF3aW5uZXJzW2pdLnNlbmQodmFsdWUpKXsgLy8gaWYgZmFpbCBnaXZlIHRvIGhvdXNlCgkJCQkJCWZvckhvdXNlID0gZm9ySG91c2UgKyB2YWx1ZTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJCgkJCWlmKCFkZXBvc2l0QWNjb3VudC5zZW5kKGZvckhvdXNlKSl7CgkJCQkvL2luIGNhc2Ugc2VuZGluZyB0byBob3VzZSBmYWlsZWQgCgkJCQl2YXIgbmV4dENvbXBldGl0aW9uID0gZ2FtZXNbZ2FtZUlEXS5jb21wZXRpdGlvbnNbMSAtIGNvbXBldGl0aW9uSW5kZXhdOwoJCQkJbmV4dENvbXBldGl0aW9uLmphY2twb3QgPSBuZXh0Q29tcGV0aXRpb24uamFja3BvdCArIGZvckhvdXNlOwkKCQkJfQoKCQkJCgkJCWNvbXBldGl0aW9uLmphY2twb3QgPSAwOwoJCX0KCQkKCQkKCQljb21wZXRpdGlvbi5udW1QbGF5ZXJzID0gMDsKCX0KCgkKCS8qCgkJYWxsb3cgdG8gY2hhbmdlIHRoZSBkZXBvc2l0QWNjb3VudCBvZiB0aGUgaG91c2Ugc2hhcmUsIG9ubHkgdGhlIGRlcG9zaXRBY2NvdW50IGNhbiBjaGFuZ2UgaXQsIGRlcG9zaXRBY2NvdW50ID09IG9yZ2FuaXplciBhdCBjcmVhdGlvbgoJKi8KCWZ1bmN0aW9uIF9zZXREZXBvc2l0QWNjb3VudChhZGRyZXNzIG5ld0RlcG9zaXRBY2NvdW50KXsKCQlpZihkZXBvc2l0QWNjb3VudCAhPSBtc2cuc2VuZGVyKXsKCQkJdGhyb3c7CgkJfQoJCWRlcG9zaXRBY2NvdW50ID0gbmV3RGVwb3NpdEFjY291bnQ7Cgl9CgkKCS8qCgkJYWxsb3cgdG8gY2hhbmdlIHRoZSBvcmdhbmlzZXIsIGluIGNhc2UgdGhpcyBuZWVkIGJlIAoJKi8KCWZ1bmN0aW9uIF9zZXRPcmdhbmlzZXIoYWRkcmVzcyBuZXdPcmdhbmlzZXIpewoJCWlmKG9yZ2FuaXNlciAhPSBtc2cuc2VuZGVyKXsKCQkJdGhyb3c7CgkJfQoJCW9yZ2FuaXNlciA9IG5ld09yZ2FuaXNlcjsKCX0KCQoJCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBPVEhFUiBDT05TVEFOVCBDQUxMUyBUTyBQUk9CRSBWQUxVRVMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCWZ1bmN0aW9uIGdldFBsYXllclN1Ym1pc3Npb25Gcm9tQ29tcGV0aXRpb24oc3RyaW5nIGdhbWVJRCwgdWludDggY29tcGV0aXRpb25JbmRleCwgYWRkcmVzcyBwbGF5ZXJBZGRyZXNzKSBjb25zdGFudCByZXR1cm5zKHVpbnQzMiBzY29yZSwgdWludDY0IHNlZWQsIHVpbnQzMiBkdXJhdGlvbiwgYnl0ZXMzMiBwcm9vZkhhc2gsIHVpbnQzMiB2ZXJzaW9uLCB1aW50NjQgc3VibWl0QmxvY2tOdW1iZXIpewoJCXZhciBzdWJtaXNzaW9uID0gZ2FtZXNbZ2FtZUlEXS5jb21wZXRpdGlvbnNbY29tcGV0aXRpb25JbmRleF0uc3VibWlzc2lvbnNbcGxheWVyQWRkcmVzc107CgkJc2NvcmUgPSBzdWJtaXNzaW9uLnNjb3JlOwoJCXNlZWQgPSBzdWJtaXNzaW9uLnNlZWQ7CQkKCQlkdXJhdGlvbiA9IHN1Ym1pc3Npb24uZHVyYXRpb25Sb3VuZGVkRG93bjsKCQlwcm9vZkhhc2ggPSBzdWJtaXNzaW9uLnByb29mSGFzaDsKCQl2ZXJzaW9uID0gc3VibWlzc2lvbi52ZXJzaW9uOwoJCXN1Ym1pdEJsb2NrTnVtYmVyID1zdWJtaXNzaW9uLnN1Ym1pdEJsb2NrTnVtYmVyOwoJfQoJCglmdW5jdGlvbiBnZXRQbGF5ZXJzRnJvbUNvbXBldGl0aW9uKHN0cmluZyBnYW1lSUQsIHVpbnQ4IGNvbXBldGl0aW9uSW5kZXgpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzc1tdIHBsYXllckFkZHJlc3NlcywgdWludDMyIG51bSl7CgkJdmFyIGNvbXBldGl0aW9uID0gZ2FtZXNbZ2FtZUlEXS5jb21wZXRpdGlvbnNbY29tcGV0aXRpb25JbmRleF07CgkJcGxheWVyQWRkcmVzc2VzID0gY29tcGV0aXRpb24ucGxheWVyczsKCQludW0gPSBjb21wZXRpdGlvbi5udW1QbGF5ZXJzOwoJfQoKCWZ1bmN0aW9uIGdldENvbXBldGl0aW9uVmFsdWVzKHN0cmluZyBnYW1lSUQsIHVpbnQ4IGNvbXBldGl0aW9uSW5kZXgpIGNvbnN0YW50IHJldHVybnMgKAoJCXVpbnQxMjggamFja3BvdCwKCQl1aW50ODggcHJpY2UsCgkJdWludDMyIHZlcnNpb24sCgkJdWludDggbnVtUGFzdEJsb2NrcywKCQl1aW50NjQgc3dpdGNoQmxvY2tOdW1iZXIsCgkJdWludDMyIG51bVBsYXllcnMsCgkJdWludDMyW10gcmV3YXJkc0Rpc3RyaWJ1dGlvbiwKCQl1aW50OCBob3VzZURpdmlkZXIsCgkJdWludDE2IGxhZywKCQl1aW50NjQgZW5kVGltZSwKCQl1aW50MzIgdmVyaWZpY2F0aW9uV2FpdFRpbWUsCgkJdWludDggX2NvbXBldGl0aW9uSW5kZXgKCSl7CgkJdmFyIGNvbXBldGl0aW9uID0gZ2FtZXNbZ2FtZUlEXS5jb21wZXRpdGlvbnNbY29tcGV0aXRpb25JbmRleF07CgkJamFja3BvdCA9IGNvbXBldGl0aW9uLmphY2twb3Q7CgkJcHJpY2UgPSBjb21wZXRpdGlvbi5wcmljZTsKCQl2ZXJzaW9uID0gY29tcGV0aXRpb24udmVyc2lvbjsKCQludW1QYXN0QmxvY2tzID0gY29tcGV0aXRpb24ubnVtUGFzdEJsb2NrczsKCQlzd2l0Y2hCbG9ja051bWJlciA9IGNvbXBldGl0aW9uLnN3aXRjaEJsb2NrTnVtYmVyOwoJCW51bVBsYXllcnMgPSBjb21wZXRpdGlvbi5udW1QbGF5ZXJzOwoJCXJld2FyZHNEaXN0cmlidXRpb24gPSBjb21wZXRpdGlvbi5yZXdhcmRzRGlzdHJpYnV0aW9uOwoJCWhvdXNlRGl2aWRlciA9IGNvbXBldGl0aW9uLmhvdXNlRGl2aWRlcjsKCQlsYWcgPSBjb21wZXRpdGlvbi5sYWc7CgkJZW5kVGltZSA9IGNvbXBldGl0aW9uLmVuZFRpbWU7CgkJdmVyaWZpY2F0aW9uV2FpdFRpbWUgPSBjb21wZXRpdGlvbi52ZXJpZmljYXRpb25XYWl0VGltZTsKCQlfY29tcGV0aXRpb25JbmRleCA9IGNvbXBldGl0aW9uSW5kZXg7Cgl9CgkKCWZ1bmN0aW9uIGdldEN1cnJlbnRDb21wZXRpdGlvblZhbHVlcyhzdHJpbmcgZ2FtZUlEKSBjb25zdGFudCByZXR1cm5zICgKCQl1aW50MTI4IGphY2twb3QsCgkJdWludDg4IHByaWNlLAoJCXVpbnQzMiB2ZXJzaW9uLAoJCXVpbnQ4IG51bVBhc3RCbG9ja3MsCgkJdWludDY0IHN3aXRjaEJsb2NrTnVtYmVyLAoJCXVpbnQzMiBudW1QbGF5ZXJzLAoJCXVpbnQzMltdIHJld2FyZHNEaXN0cmlidXRpb24sCgkJdWludDggaG91c2VEaXZpZGVyLAoJCXVpbnQxNiBsYWcsCgkJdWludDY0IGVuZFRpbWUsCgkJdWludDMyIHZlcmlmaWNhdGlvbldhaXRUaW1lLAoJCXVpbnQ4IF9jb21wZXRpdGlvbkluZGV4CgkpCgl7CgkJcmV0dXJuIGdldENvbXBldGl0aW9uVmFsdWVzKGdhbWVJRCxnYW1lc1tnYW1lSURdLmN1cnJlbnRDb21wZXRpdGlvbkluZGV4KTsKCX0KfQ=='.
	

]
