Class {
	#name : #SRTEfbdd2ca166B193075Efe8530a612c5daa10012a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTEfbdd2ca166B193075Efe8530a612c5daa10012a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjsKCgpjb250cmFjdCBvd25lZCB7CglhZGRyZXNzIHB1YmxpYyBvd25lcjsKCglmdW5jdGlvbiBvd25lZCgpIHsKCQlvd25lciA9IG1zZy5zZW5kZXI7Cgl9CgoJZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKCQlvd25lciA9IG5ld093bmVyOwoJfQoKCW1vZGlmaWVyIG9ubHlPd25lciB7CgkJcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKCQlfOwoJfQp9CgoKY29udHJhY3QgdG9rZW5SZWNpcGllbnQge2Z1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9leHRyYURhdGEpO30KCgpjb250cmFjdCBVdGlscyB7CgkvKioKCQljb25zdHJ1Y3RvcgoJKi8KCWZ1bmN0aW9uIFV0aWxzKCkgewoJfQoKCS8vIHZhbGlkYXRlcyBhbiBhZGRyZXNzIC0gY3VycmVudGx5IG9ubHkgY2hlY2tzIHRoYXQgaXQgaXNuJ3QgbnVsbAoJbW9kaWZpZXIgdmFsaWRBZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MpIHsKCQlyZXF1aXJlKF9hZGRyZXNzICE9IDB4MCk7CgkJXzsKCX0KCgkvLyB2ZXJpZmllcyB0aGF0IHRoZSBhZGRyZXNzIGlzIGRpZmZlcmVudCB0aGFuIHRoaXMgY29udHJhY3QgYWRkcmVzcwoJbW9kaWZpZXIgbm90VGhpcyhhZGRyZXNzIF9hZGRyZXNzKSB7CgkJcmVxdWlyZShfYWRkcmVzcyAhPSBhZGRyZXNzKHRoaXMpKTsKCQlfOwoJfQoKCS8vIE92ZXJmbG93IHByb3RlY3RlZCBtYXRoIGZ1bmN0aW9ucwoKCS8qKgoJCUBkZXYgcmV0dXJucyB0aGUgc3VtIG9mIF94IGFuZCBfeSwgYXNzZXJ0cyBpZiB0aGUgY2FsY3VsYXRpb24gb3ZlcmZsb3dzCgoJCUBwYXJhbSBfeCAgIHZhbHVlIDEKCQlAcGFyYW0gX3kgICB2YWx1ZSAyCgoJCUByZXR1cm4gc3VtCgkqLwoJZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IF94LCB1aW50MjU2IF95KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CgkJdWludDI1NiB6ID0gX3ggKyBfeTsKCQlhc3NlcnQoeiA+PSBfeCk7CgkJcmV0dXJuIHo7Cgl9CgoJLyoqCgkJQGRldiByZXR1cm5zIHRoZSBkaWZmZXJlbmNlIG9mIF94IG1pbnVzIF95LCBhc3NlcnRzIGlmIHRoZSBzdWJ0cmFjdGlvbiByZXN1bHRzIGluIGEgbmVnYXRpdmUgbnVtYmVyCgoJCUBwYXJhbSBfeCAgIG1pbnVlbmQKCQlAcGFyYW0gX3kgICBzdWJ0cmFoZW5kCgoJCUByZXR1cm4gZGlmZmVyZW5jZQoJKi8KCWZ1bmN0aW9uIHNhZmVTdWIodWludDI1NiBfeCwgdWludDI1NiBfeSkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewoJCWFzc2VydChfeCA+PSBfeSk7CgkJcmV0dXJuIF94IC0gX3k7Cgl9Cn0KCgpjb250cmFjdCBDU1Rva2VuIGlzIG93bmVkLCBVdGlscyB7CglzdHJ1Y3QgRGl2aWRlbmQge3VpbnQyNTYgdGltZTsgdWludDI1NiB0ZW5UaG91c2FuZHRoOyB1aW50MjU2IGNvdW50Q29tcGxldGU7fQoKCS8qIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovCglzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gJ1Rva2VuIDAuMSc7CgoJc3RyaW5nIHB1YmxpYyBuYW1lID0gJ0tpY2tDb2luJzsKCglzdHJpbmcgcHVibGljIHN5bWJvbCA9ICdLQyc7CgoJdWludDggcHVibGljIGRlY2ltYWxzID0gODsKCgl1aW50MjU2IF90b3RhbFN1cHBseSA9IDA7CgoJLyogVGhpcyBjcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGJhbGFuY2VzICovCgltYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKCW1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSkgcHVibGljIGFnaW5nQmFsYW5jZU9mOwoKCXVpbnRbXSBhZ2luZ1RpbWVzOwoKCURpdmlkZW5kW10gZGl2aWRlbmRzOwoKCW1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCS8qIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cyAqLwoJZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CgoJZXZlbnQgQWdpbmdUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFnaW5nVGltZSk7CgoJZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgkvLyB0cmlnZ2VyZWQgd2hlbiB0aGUgdG90YWwgc3VwcGx5IGlzIGluY3JlYXNlZAoJZXZlbnQgSXNzdWFuY2UodWludDI1NiBfYW1vdW50KTsKCS8vIHRyaWdnZXJlZCB3aGVuIHRoZSB0b3RhbCBzdXBwbHkgaXMgZGVjcmVhc2VkCglldmVudCBEZXN0cnVjdGlvbih1aW50MjU2IF9hbW91bnQpOwoKCWFkZHJlc3NbXSBwdWJsaWMgYWRkcmVzc0J5SW5kZXg7CgoJbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBhZGRyZXNzQWRkZWRUb0luZGV4OwoKCW1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgYWdpbmdUaW1lc0ZvclBvb2xzOwoKCXVpbnQxNiBjdXJyZW50RGl2aWRlbmRJbmRleCA9IDE7CgoJbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBjYWxjdWxhdGVkRGl2aWRlbmRzSW5kZXg7CgoJYm9vbCBwdWJsaWMgdHJhbnNmZXJzRW5hYmxlZCA9IHRydWU7CgoJZXZlbnQgTmV3U21hcnRUb2tlbihhZGRyZXNzIF90b2tlbik7CgoJLyogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0ICovCglmdW5jdGlvbiBDU1Rva2VuKCkgewoJCW93bmVyID0gbXNnLnNlbmRlcjsKCQkvLyBTbyB0aGF0IHRoZSBpbmRleCBzdGFydHMgd2l0aCAxCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMCwgMCwgMCkpOwoJCS8vIDMxLjEwLjIwMTcgMDk6MDA6MDAKCQlkaXZpZGVuZHMucHVzaChEaXZpZGVuZCgxNTA5NDQwNDAwLCAzMCwgMCkpOwoJCS8vIDMwLjExLjIwMTcgMDk6MDA6MDAKCQlkaXZpZGVuZHMucHVzaChEaXZpZGVuZCgxNTEyMDMyNDAwLCAyMCwgMCkpOwoJCS8vIDMxLjEyLjIwMTcgMDk6MDA6MDAKCQlkaXZpZGVuZHMucHVzaChEaXZpZGVuZCgxNTE0NzEwODAwLCAxMCwgMCkpOwoJCS8vIDMxLjAxLjIwMTggMDk6MDA6MDAKCQlkaXZpZGVuZHMucHVzaChEaXZpZGVuZCgxNTE3Mzg5MjAwLCA1LCAwKSk7CgkJLy8gMjguMDIuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MTk4MDg0MDAsIDEwLCAwKSk7CgkJLy8gMzEuMDMuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MjI0ODY4MDAsIDIwLCAwKSk7CgkJLy8gMzAuMDQuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MjUwNzg4MDAsIDMwLCAwKSk7CgkJLy8gMzEuMDUuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1Mjc3NTcyMDAsIDUwLCAwKSk7CgkJLy8gMzAuMDYuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MzAzNDkyMDAsIDMwLCAwKSk7CgkJLy8gMzEuMDcuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MzMwMjc2MDAsIDIwLCAwKSk7CgkJLy8gMzEuMDguMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MzU3MDYwMDAsIDEwLCAwKSk7CgkJLy8gMzAuMDkuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MzgyOTgwMDAsIDUsIDApKTsKCQkvLyAzMS4xMC4yMDE4IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU0MDk3NjQwMCwgMTAsIDApKTsKCQkvLyAzMC4xMS4yMDE4IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU0MzU2ODQwMCwgMjAsIDApKTsKCQkvLyAzMS4xMi4yMDE4IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU0NjI0NjgwMCwgMzAsIDApKTsKCQkvLyAzMS4wMS4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU0ODkyNTIwMCwgNjAsIDApKTsKCQkvLyAyOC4wMi4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU1MTM0NDQwMCwgMzAsIDApKTsKCQkvLyAzMS4wMy4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU1NDAyMjgwMCwgMjAsIDApKTsKCQkvLyAzMC4wNC4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU1NjYxNDgwMCwgMTAsIDApKTsKCQkvLyAzMS4wNS4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU1OTMwNzYwMCwgMjAsIDApKTsKCQkvLyAzMC4wNi4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU2MTg4NTIwMCwgMzAsIDApKTsKCQkvLyAzMS4wNy4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU2NDU2MzYwMCwgMjAsIDApKTsKCQkvLyAzMS4wOC4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU2NzI0MjAwMCwgMTAsIDApKTsKCQkvLyAzMC4wOS4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU2OTgzNDAwMCwgNSwgMCkpOwoKCQlOZXdTbWFydFRva2VuKGFkZHJlc3ModGhpcykpOwoJfQoKCW1vZGlmaWVyIHRyYW5zZmVyc0FsbG93ZWQgewoJCWFzc2VydCh0cmFuc2ZlcnNFbmFibGVkKTsKCQlfOwoJfQoKCWZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSkgewoJCXRvdGFsU3VwcGx5ID0gX3RvdGFsU3VwcGx5OwoJfQoKCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CgkJcmV0dXJuIGJhbGFuY2VzW19vd25lcl07Cgl9CgoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewoJCXJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwoJfQoKCWJvb2wgYWxsQWdpbmdUaW1lc0hhc0JlZW5BZGRlZCA9IGZhbHNlOwoJZnVuY3Rpb24gYWRkQWdpbmdUaW1lKHVpbnQyNTYgdGltZSkgb25seU93bmVyIHsKCQlyZXF1aXJlKCFhbGxBZ2luZ1RpbWVzSGFzQmVlbkFkZGVkKTsKCQlhZ2luZ1RpbWVzLnB1c2godGltZSk7Cgl9CgoJZnVuY3Rpb24gYWxsQWdpbmdUaW1lc0FkZGVkKCkgb25seU93bmVyIHsKCQlhbGxBZ2luZ1RpbWVzSGFzQmVlbkFkZGVkID0gdHJ1ZTsKCX0KCglmdW5jdGlvbiBjYWxjdWxhdGVEaXZpZGVuZHModWludDI1NiBsaW1pdCkgewoJCXJlcXVpcmUobm93ID49IGRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0udGltZSk7CgkJcmVxdWlyZShsaW1pdCA+IDApOwoKCQlsaW1pdCA9IGRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0uY291bnRDb21wbGV0ZSArIGxpbWl0OwoKCQlpZiAobGltaXQgPiBhZGRyZXNzQnlJbmRleC5sZW5ndGgpIHsKCQkJbGltaXQgPSBhZGRyZXNzQnlJbmRleC5sZW5ndGg7CgkJfQoKCQlmb3IgKHVpbnQyNTYgaSA9IGRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0uY291bnRDb21wbGV0ZTsgaSA8IGxpbWl0OyBpKyspIHsKCQkJYWRkRGl2aWRlbmRzRm9yQWRkcmVzcyhhZGRyZXNzQnlJbmRleFtpXSk7CgkJfQoJCWlmIChsaW1pdCA9PSBhZGRyZXNzQnlJbmRleC5sZW5ndGgpIHsKCQkJY3VycmVudERpdmlkZW5kSW5kZXgrKzsKCQl9CgkJZWxzZSB7CgkJCWRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0uY291bnRDb21wbGV0ZSA9IGxpbWl0OwoJCX0KCX0KCglmdW5jdGlvbiBhZGREaXZpZGVuZHNGb3JBZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MpIGludGVybmFsIHsKCQkvLyBza2lwIGNhbGN1bGF0aW5nIGRpdmlkZW5kcywgaWYgYWxyZWFkeSBjYWxjdWxhdGVkIGZvciB0aGlzIGFkZHJlc3MKCQlpZiAoY2FsY3VsYXRlZERpdmlkZW5kc0luZGV4W19hZGRyZXNzXSA+PSBjdXJyZW50RGl2aWRlbmRJbmRleCkgcmV0dXJuOwoKCQl1aW50MjU2IGFkZCA9IGJhbGFuY2VzW19hZGRyZXNzXSAqIGRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0udGVuVGhvdXNhbmR0aCAvIDEwMDA7CgkJYmFsYW5jZXNbX2FkZHJlc3NdICs9IGFkZDsKCQlUcmFuc2Zlcih0aGlzLCBfYWRkcmVzcywgYWRkKTsKCQlJc3N1YW5jZShhZGQpOwoJCV90b3RhbFN1cHBseSA9IHNhZmVBZGQoX3RvdGFsU3VwcGx5LCBhZGQpOwoKCQlpZiAoYWdpbmdCYWxhbmNlT2ZbX2FkZHJlc3NdWzBdID4gMCkgewoJCQlhZ2luZ0JhbGFuY2VPZltfYWRkcmVzc11bMF0gKz0gYWdpbmdCYWxhbmNlT2ZbX2FkZHJlc3NdWzBdICogZGl2aWRlbmRzW2N1cnJlbnREaXZpZGVuZEluZGV4XS50ZW5UaG91c2FuZHRoIC8gMTAwMDsKCQkJZm9yICh1aW50MjU2IGsgPSAwOyBrIDwgYWdpbmdUaW1lcy5sZW5ndGg7IGsrKykgewoJCQkJYWdpbmdCYWxhbmNlT2ZbX2FkZHJlc3NdW2FnaW5nVGltZXNba11dICs9IGFnaW5nQmFsYW5jZU9mW19hZGRyZXNzXVthZ2luZ1RpbWVzW2tdXSAqIGRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0udGVuVGhvdXNhbmR0aCAvIDEwMDA7CgkJCX0KCQl9CgkJY2FsY3VsYXRlZERpdmlkZW5kc0luZGV4W19hZGRyZXNzXSA9IGN1cnJlbnREaXZpZGVuZEluZGV4OwoJfQoKCS8qIFNlbmQgY29pbnMgKi8KCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgdHJhbnNmZXJzQWxsb3dlZCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCQljaGVja015QWdpbmcobXNnLnNlbmRlcik7CgkJaWYgKG5vdyA+PSBkaXZpZGVuZHNbY3VycmVudERpdmlkZW5kSW5kZXhdLnRpbWUpIHsKCQkJYWRkRGl2aWRlbmRzRm9yQWRkcmVzcyhtc2cuc2VuZGVyKTsKCQkJYWRkRGl2aWRlbmRzRm9yQWRkcmVzcyhfdG8pOwoJCX0KCgkJcmVxdWlyZShhY2NvdW50QmFsYW5jZShtc2cuc2VuZGVyKSA+PSBfdmFsdWUpOwoKCQkvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKCQliYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CgoJCWlmIChhZ2luZ1RpbWVzRm9yUG9vbHNbbXNnLnNlbmRlcl0gPiAwICYmIGFnaW5nVGltZXNGb3JQb29sc1ttc2cuc2VuZGVyXSA+IG5vdykgewoJCQlhZGRUb0FnaW5nKG1zZy5zZW5kZXIsIF90bywgYWdpbmdUaW1lc0ZvclBvb2xzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwoJCX0KCgkJYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKCgkJYWRkSW5kZXgoX3RvKTsKCQlUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CgkJcmV0dXJuIHRydWU7Cgl9CgoJZnVuY3Rpb24gbWludFRva2VuKGFkZHJlc3MgdGFyZ2V0LCB1aW50MjU2IG1pbnRlZEFtb3VudCwgdWludDI1NiBhZ2luZ1RpbWUpIG9ubHlPd25lciB7CgkJaWYgKGFnaW5nVGltZSA+IG5vdykgewoJCQlhZGRUb0FnaW5nKG93bmVyLCB0YXJnZXQsIGFnaW5nVGltZSwgbWludGVkQW1vdW50KTsKCQl9CgoJCWJhbGFuY2VzW3RhcmdldF0gKz0gbWludGVkQW1vdW50OwoKCQlfdG90YWxTdXBwbHkgKz0gbWludGVkQW1vdW50OwoJCUlzc3VhbmNlKG1pbnRlZEFtb3VudCk7CgkJYWRkSW5kZXgodGFyZ2V0KTsKCQlUcmFuc2Zlcih0aGlzLCB0YXJnZXQsIG1pbnRlZEFtb3VudCk7Cgl9CgoJZnVuY3Rpb24gYWRkSW5kZXgoYWRkcmVzcyBfYWRkcmVzcykgaW50ZXJuYWwgewoJCWlmICghYWRkcmVzc0FkZGVkVG9JbmRleFtfYWRkcmVzc10pIHsKCQkJYWRkcmVzc0FkZGVkVG9JbmRleFtfYWRkcmVzc10gPSB0cnVlOwoJCQlhZGRyZXNzQnlJbmRleC5wdXNoKF9hZGRyZXNzKTsKCQl9Cgl9CgoJZnVuY3Rpb24gYWRkVG9BZ2luZyhhZGRyZXNzIGZyb20sIGFkZHJlc3MgdGFyZ2V0LCB1aW50MjU2IGFnaW5nVGltZSwgdWludDI1NiBhbW91bnQpIGludGVybmFsIHsKCQlhZ2luZ0JhbGFuY2VPZlt0YXJnZXRdWzBdICs9IGFtb3VudDsKCQlhZ2luZ0JhbGFuY2VPZlt0YXJnZXRdW2FnaW5nVGltZV0gKz0gYW1vdW50OwoJCUFnaW5nVHJhbnNmZXIoZnJvbSwgdGFyZ2V0LCBhbW91bnQsIGFnaW5nVGltZSk7Cgl9CgoJLyogQWxsb3cgYW5vdGhlciBjb250cmFjdCB0byBzcGVuZCBzb21lIHRva2VucyBpbiB5b3VyIGJlaGFsZiAqLwoJZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgkJYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CgkJQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyogQXBwcm92ZSBhbmQgdGhlbiBjb21tdW5pY2F0ZSB0aGUgYXBwcm92ZWQgY29udHJhY3QgaW4gYSBzaW5nbGUgdHggKi8KCWZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCQl0b2tlblJlY2lwaWVudCBzcGVuZGVyID0gdG9rZW5SZWNpcGllbnQoX3NwZW5kZXIpOwoJCWlmIChhcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpKSB7CgkJCXNwZW5kZXIucmVjZWl2ZUFwcHJvdmFsKG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSk7CgkJCXJldHVybiB0cnVlOwoJCX0KCX0KCgkvKiBBIGNvbnRyYWN0IGF0dGVtcHRzIHRvIGdldCB0aGUgY29pbnMgKi8KCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHRyYW5zZmVyc0FsbG93ZWQgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgkJY2hlY2tNeUFnaW5nKF9mcm9tKTsKCQlpZiAobm93ID49IGRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0udGltZSkgewoJCQlhZGREaXZpZGVuZHNGb3JBZGRyZXNzKF9mcm9tKTsKCQkJYWRkRGl2aWRlbmRzRm9yQWRkcmVzcyhfdG8pOwoJCX0KCQkvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKCQlyZXF1aXJlKGFjY291bnRCYWxhbmNlKF9mcm9tKSA+PSBfdmFsdWUpOwoKCQkvLyBDaGVjayBhbGxvd2VkCgkJcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKCQkvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKCQliYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwoJCS8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CgkJYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKCgkJYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwoKCQlpZiAoYWdpbmdUaW1lc0ZvclBvb2xzW19mcm9tXSA+IDAgJiYgYWdpbmdUaW1lc0ZvclBvb2xzW19mcm9tXSA+IG5vdykgewoJCQlhZGRUb0FnaW5nKF9mcm9tLCBfdG8sIGFnaW5nVGltZXNGb3JQb29sc1tfZnJvbV0sIF92YWx1ZSk7CgkJfQoKCQlhZGRJbmRleChfdG8pOwoJCVRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyogVGhpcyB1bm5hbWVkIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuZXZlciBzb21lb25lIHRyaWVzIHRvIHNlbmQgZXRoZXIgdG8gaXQgKi8KCWZ1bmN0aW9uKCkgewoJCXJldmVydCgpOwoJCS8vIFByZXZlbnRzIGFjY2lkZW50YWwgc2VuZGluZyBvZiBldGhlcgoJfQoKCWZ1bmN0aW9uIGNoZWNrTXlBZ2luZyhhZGRyZXNzIHNlbmRlcikgaW50ZXJuYWwgewoJCWlmIChhZ2luZ0JhbGFuY2VPZltzZW5kZXJdWzBdID09IDApIHJldHVybjsKCgkJZm9yICh1aW50MjU2IGsgPSAwOyBrIDwgYWdpbmdUaW1lcy5sZW5ndGg7IGsrKykgewoJCQlpZiAoYWdpbmdUaW1lc1trXSA8IG5vdykgewoJCQkJYWdpbmdCYWxhbmNlT2Zbc2VuZGVyXVswXSAtPSBhZ2luZ0JhbGFuY2VPZltzZW5kZXJdW2FnaW5nVGltZXNba11dOwoJCQkJYWdpbmdCYWxhbmNlT2Zbc2VuZGVyXVthZ2luZ1RpbWVzW2tdXSA9IDA7CgkJCX0KCQl9Cgl9CgoJZnVuY3Rpb24gYWRkQWdpbmdUaW1lc0ZvclBvb2woYWRkcmVzcyBwb29sQWRkcmVzcywgdWludDI1NiBhZ2luZ1RpbWUpIG9ubHlPd25lciB7CgkJYWdpbmdUaW1lc0ZvclBvb2xzW3Bvb2xBZGRyZXNzXSA9IGFnaW5nVGltZTsKCX0KCglmdW5jdGlvbiBjb3VudEFkZHJlc3NlcygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgbGVuZ3RoKSB7CgkJcmV0dXJuIGFkZHJlc3NCeUluZGV4Lmxlbmd0aDsKCX0KCglmdW5jdGlvbiBhY2NvdW50QmFsYW5jZShhZGRyZXNzIF9hZGRyZXNzKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKCQlyZXR1cm4gYmFsYW5jZXNbX2FkZHJlc3NdIC0gYWdpbmdCYWxhbmNlT2ZbX2FkZHJlc3NdWzBdOwoJfQoKCWZ1bmN0aW9uIGRpc2FibGVUcmFuc2ZlcnMoYm9vbCBfZGlzYWJsZSkgcHVibGljIG9ubHlPd25lciB7CgkJdHJhbnNmZXJzRW5hYmxlZCA9ICFfZGlzYWJsZTsKCX0KCglmdW5jdGlvbiBpc3N1ZShhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHZhbGlkQWRkcmVzcyhfdG8pIG5vdFRoaXMoX3RvKSB7CgkJX3RvdGFsU3VwcGx5ID0gc2FmZUFkZChfdG90YWxTdXBwbHksIF9hbW91bnQpOwoJCWJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sIF9hbW91bnQpOwoKCQlhZGRJbmRleChfdG8pOwoJCUlzc3VhbmNlKF9hbW91bnQpOwoJCVRyYW5zZmVyKHRoaXMsIF90bywgX2Ftb3VudCk7Cgl9CgoJZnVuY3Rpb24gZGVzdHJveShhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyB7CgkJY2hlY2tNeUFnaW5nKG1zZy5zZW5kZXIpOwoJCS8vIHZhbGlkYXRlIGlucHV0CgkJcmVxdWlyZShtc2cuc2VuZGVyID09IF9mcm9tIHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpOwoJCXJlcXVpcmUoYWNjb3VudEJhbGFuY2UoX2Zyb20pID49IF9hbW91bnQpOwoKCQliYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSwgX2Ftb3VudCk7CgkJX3RvdGFsU3VwcGx5ID0gc2FmZVN1YihfdG90YWxTdXBwbHksIF9hbW91bnQpOwoKCQlUcmFuc2ZlcihfZnJvbSwgdGhpcywgX2Ftb3VudCk7CgkJRGVzdHJ1Y3Rpb24oX2Ftb3VudCk7Cgl9Cn0='.
	

]
