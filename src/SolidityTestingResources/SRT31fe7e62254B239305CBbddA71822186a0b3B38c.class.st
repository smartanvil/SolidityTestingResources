Class {
	#name : #SRT31fe7e62254B239305CBbddA71822186a0b3B38c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT31fe7e62254B239305CBbddA71822186a0b3B38c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgpJTE9UIC0gQW4gSW50ZXJlc3QtcGF5aW5nIEVSQzIwIHRva2VuIGFuZCBFdGhlcmV1bSBsb3R0ZXJ5LgoKVmlzaXQgdXMgYXQgaHR0cHM6Ly9JTE9ULmlvLwoKRVJDMjAgQ29tcGF0aWJsZSBUb2tlbgpEZWNpbWFsIHBsYWNlczogMTgKU3ltYm9sOiBJTE9UCgoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgpDb3B5cmlnaHQgKEMpIDIwMTggSUxPVC5pbwoKVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KClRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLApidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgpNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCkdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgpZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQphbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KCi0tLS0tCgpJZiB5b3UgdXNlIHRoaXMgY29kZSBvbiB5b3VyIG93biBjb250cmFjdHMsIHBsZWFzZSBjcmVkaXQgdGhlIHdlYnNpdGUgaHR0cHM6Ly9JTE9ULmlvLyAtIFRoYW5rIHlvdSEKCi0tLS0tCgovLy8vLy8vLy8vLy8vLy8vCi9CL1MvQi9KL00vQS9GLwovLy8vLy8vLy8vLy8vLwovLy8vUEVBQ0UvLy8vCi8vLy8vLy8vLy8vLwoKKi8KCmludGVyZmFjZSB0b2tlblJlY2lwaWVudCB7IGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9leHRyYURhdGEpIHB1YmxpYzsgfQoKY29udHJhY3QgSUxPVENvbnRyYWN0IHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiSUxPVCBJbnRlcmVzdC1QYXlpbmcgTG90dGVyeSBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJJTE9UIjsKICAgIAogICAgLyoKICAgICAgICBXZSd2ZSBoYXJkY29kZWQgb3VyIG9mZmljaWFsIHdlYnNpdGUgaW50byB0aGUgYmxvY2tjaGFpbiEKICAgICAgICBQbGVhc2UgZG8gbm90IHNlbmQgRVRIIHRvIHNjYW1zL2Nsb25lcy9jb3BpZXMuIAogICAgICAgIFRoZSB3ZWJzaXRlIGluZGljYXRlZCBiZWxvdyBpcyB0aGUgb25seSBvZmZpY2lhbCBJTE9UIHdlYnNpdGUuCiAgICAqLwogICAgc3RyaW5nIHB1YmxpYyBzaXRlX3VybCA9ICJodHRwczovL0lMT1QuaW8vIjsKCiAgICBieXRlczMyIHByaXZhdGUgY3VycmVudF9qYWNrcG90X2hhc2ggPSAiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkYiOwogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gMTg7CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseSA9IDA7IC8vIE5vIHByZS1taW50ZWQgYW1vdW50LgogICAgdWludCBwdWJsaWMgaW50ZXJlc3RSYXRlID0gMTU7IC8vIDEuNSUgZml4ZWQgbW9udGhseSBpbnRlcmVzdCA9IDE1IC8gMTAwMAogICAgdWludCB0b2tlbnNQZXJFdGhlcmV1bSA9IDE0NzAwMDsgLy8gMTQ3ayB0b2tlbnMgcGVyIEVUSAogICAgdWludCBwdWJsaWMgamFja3BvdERpZmZpY3VsdHkgPSA2OwogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgZnVuY3Rpb24gSUxPVENvbnRyYWN0KCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBwdWJsaWMgYWxsb3dhbmNlOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgZGVwb3NpdFRvdGFsOyAvLyB0b3RhbCBFVEggZGVwb3NpdGVkIHBlciBhZGRyZXNzCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBsYXN0QmxvY2tJbnRlcmVzdFBhaWQ7CgogICAgLyoKICAgICAgICBEZWNsYXJlIElMT1QgZXZlbnRzLgogICAgKi8KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgYmh0Y192YWx1ZSk7CiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50IGJodGNfdmFsdWUpOwogICAgZXZlbnQgR2FtZVJlc3VsdChhZGRyZXNzIHBsYXllciwgdWludCB6ZXJvZXMpOwogICAgZXZlbnQgQm9udXNQYWlkKGFkZHJlc3MgdG8sIHVpbnQgYmh0Y192YWx1ZSk7CiAgICBldmVudCBJbnRlcmVzdFBhaWQoYWRkcmVzcyB0bywgdWludCBiaHRjX3ZhbHVlKTsKICAgIGV2ZW50IEphY2twb3QoYWRkcmVzcyB3aW5uZXIsIHVpbnQgZXRoX2Ftb3VudCk7CgogICAgdWludCBtYWludGVuYW5jZURlYnQ7CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLyoKICAgICAgICBSZXR1cm4gYW4gYWRkcmVzc2UncyBjdXJyZW50IHVucGFpZCBpbnRlcmVzdCBhbW91bnQgaW4gSUxPVC4KICAgICovCiAgICBmdW5jdGlvbiBnZXRJbnRlcmVzdChhZGRyZXNzIF90bykgcHVibGljIHZpZXcgcmV0dXJucyAodWludCBpbnRlcmVzdCkgewoKICAgICAgICBpZiAobGFzdEJsb2NrSW50ZXJlc3RQYWlkW190b10gPiAwKSB7CiAgICAgICAgICAgIGludGVyZXN0ID0gKChibG9jay5udW1iZXIgLSBsYXN0QmxvY2tJbnRlcmVzdFBhaWRbX3RvXSkgKiBiYWxhbmNlT2ZbX3RvXSAqIGludGVyZXN0UmF0ZSkgLyAoODY0MDAwMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGludGVyZXN0ID0gMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBpbnRlcmVzdDsKICAgIH0KCiAgICAvKgogICAgICAgIEFsbG93cyB1c2VycyB0byBjaGVjayB0aGVpciBjdXJyZW50IGRlcG9zaXQgYm9udXMgYW1vdW50LgogICAgICAgIEZvcm11bGE6IDElIGJvbnVzIG92ZXIgbGlmZXRpbWUgRVRIIGRlcG9zaXQgaGlzdG9yeQogICAgICAgIGRlcG9zaXRUb3RhbCBpcyBkZW5vbWluYXRlZCBpbiBFVEgKICAgICovCiAgICBmdW5jdGlvbiBnZXRCb251cyhhZGRyZXNzIF90bykgcHVibGljIHZpZXcgcmV0dXJucyAodWludCBpbnRlcmVzdCkgewogICAgICAgIHJldHVybiAoKGRlcG9zaXRUb3RhbFtfdG9dICogdG9rZW5zUGVyRXRoZXJldW0pIC8gMTAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gMHgwKTsKICAgICAgICAvKgogICAgICAgICAgICBPd2VkIGludGVyZXN0IGlzIHBhaWQgYmVmb3JlIHRyYW5zZmVycy93aXRoZHJhd2Fscy4KICAgICAgICAgICAgVXNlcnMgbWF5IGJlIGFibGUgdG8gd2l0aGRyYXcvdHJhbnNmZXIgbW9yZSB0aGFuIHRoZXkgcHVibGljbHkgc2VlLgogICAgICAgICAgICBVc2UgZ2V0SW50ZXJlc3QoRVRIRVJFVU1fQUREUkVTUykgdG8gY2hlY2sgaG93IG11Y2ggaW50ZXJlc3RzCiAgICAgICAgICAgIHdpbGwgYmUgcGFpZCBiZWZvcmUgdHJhbnNmZXJzIG9yIGZ1dHVyZSBkZXBvc2l0cy4KICAgICAgICAqLwogICAgICAgIHBheUludGVyZXN0KF9mcm9tKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlID4gYmFsYW5jZU9mW190b10pOwogICAgICAgIHVpbnQgcHJldmlvdXNCYWxhbmNlcyA9IGJhbGFuY2VPZltfZnJvbV0gKyBiYWxhbmNlT2ZbX3RvXTsKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICBhc3NlcnQoYmFsYW5jZU9mW19mcm9tXSArIGJhbGFuY2VPZltfdG9dID09IHByZXZpb3VzQmFsYW5jZXMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHsKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFVybChzdHJpbmcgdSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgc2l0ZV91cmwgPSB1OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFVybCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZykgewogICAgICAgIHJldHVybiBzaXRlX3VybDsKICAgIH0KCiAgICAvKgogICAgICAgIERpZmZpY3VsdHkgYWRqdXN0bWVudC4KICAgICovCiAgICBmdW5jdGlvbiBzZXREaWZmaWN1bHR5KHVpbnQgeikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgamFja3BvdERpZmZpY3VsdHkgPSB6OwogICAgfQoKICAgIC8qCiAgICAgICAgR2V0IGN1cnJlbnQgZGlmZmljdWx0eS4KICAgICAgICBSZXR1cm5zIG51bWJlciBvZiB6ZXJvZXMgY3VycmVudGx5IHJlcXVpcmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIGdldERpZmZpY3VsdHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGphY2twb3REaWZmaWN1bHR5OwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKTsKICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpCiAgICBwdWJsaWMKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHRva2VuUmVjaXBpZW50IHNwZW5kZXIgPSB0b2tlblJlY2lwaWVudChfc3BlbmRlcik7CiAgICAgICAgaWYgKGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSkpIHsKICAgICAgICAgICAgc3BlbmRlci5yZWNlaXZlQXBwcm92YWwobXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNob3duKGFkZHJlc3MgdG8pIHB1YmxpYyBvbmx5T3duZXIgeyBvd25lciA9IHRvOyB9CgogICAgZnVuY3Rpb24gYnVybih1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW21zZy5zZW5kZXJdID49IF92YWx1ZSk7ICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IF92YWx1ZTsgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZXMgdG90YWxTdXBwbHkKICAgICAgICBCdXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYnVybkZyb20oYWRkcmVzcyBfZnJvbSwgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX3ZhbHVlKTsgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRhcmdldGVkIGJhbGFuY2UgaXMgZW5vdWdoCiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSk7ICAgIC8vIENoZWNrIGFsbG93YW5jZQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSB0YXJnZXRlZCBiYWxhbmNlCiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcidzIGFsbG93YW5jZQogICAgICAgIHRvdGFsU3VwcGx5IC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdG90YWxTdXBwbHkKICAgICAgICBCdXJuKF9mcm9tLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qCiAgICAgICAgUGF5cyBpbnRlcmVzdCBvbiBhdmFpbGFibGUgZnVuZHMuCiAgICAqLwogICAgZnVuY3Rpb24gcGF5SW50ZXJlc3QoYWRkcmVzcyBfdG8pIHByaXZhdGUgewoKICAgICAgICB1aW50IGludGVyZXN0ID0gZ2V0SW50ZXJlc3QoX3RvKTsKCiAgICAgICAgaWYgKGludGVyZXN0ID4gMCkgewogICAgICAgICAgICByZXF1aXJlKCAoYmFsYW5jZU9mW190b10gKyBpbnRlcmVzdCkgPiBiYWxhbmNlT2ZbX3RvXSk7CiAgICAgICAgICAgIC8vIHBheSBpbnRlcmVzdAogICAgICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gKz0gaW50ZXJlc3Q7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5ICs9IGludGVyZXN0OwogICAgICAgICAgICBUcmFuc2Zlcih0aGlzLCBtc2cuc2VuZGVyLCBpbnRlcmVzdCk7CiAgICAgICAgICAgIEludGVyZXN0UGFpZChfdG8sIGludGVyZXN0KTsKICAgICAgICB9CgogICAgICAgIGxhc3RCbG9ja0ludGVyZXN0UGFpZFtfdG9dID0gYmxvY2subnVtYmVyOwoKICAgIH0KCiAgICAvKgogICAgICAgIFBheXMgYSAxJSBib251cyBvdmVyIGxpZmV0aW1lIGRlcG9zaXRzIG1hZGUgdG8gdGhpcyBhZGRyZXNzLgogICAgICAgIERvZXMgbm90IGNhcnJ5IG92ZXIgaWYgeW91IGNoYW5nZSBFdGhlcmV1bSBhZGRyZXNzZXMuCiAgICAqLwogICAgZnVuY3Rpb24gcGF5Qm9udXMoYWRkcmVzcyBfdG8pIHByaXZhdGUgewogICAgICAgIGlmIChkZXBvc2l0VG90YWxbX3RvXSA+IDApIHsKICAgICAgICAgICAgdWludCBib251cyA9IGdldEJvbnVzKF90byk7CiAgICAgICAgICAgIGlmIChib251cyA+IDApIHsKICAgICAgICAgICAgICAgIHJlcXVpcmUoIChiYWxhbmNlT2ZbX3RvXSArIGJvbnVzKSA+IGJhbGFuY2VPZltfdG9dKTsKICAgICAgICAgICAgICAgIGJhbGFuY2VPZltfdG9dICs9ICBib251czsKICAgICAgICAgICAgICAgIHRvdGFsU3VwcGx5ICs9IGJvbnVzOwogICAgICAgICAgICAgICAgVHJhbnNmZXIodGhpcywgX3RvLCBib251cyk7CiAgICAgICAgICAgICAgICBCb251c1BhaWQoX3RvLCBib251cyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaGFzaERpZmZpY3VsdHkoYnl0ZXMzMiBoYXNoKSBwdWJsaWMgcHVyZSByZXR1cm5zKHVpbnQpIHsKICAgICAgICB1aW50IGRpZmYgPSAwOwoKICAgICAgICBmb3IgKHVpbnQgaT0wO2k8MzI7aSsrKSB7CiAgICAgICAgICAgIGlmIChoYXNoW2ldID09IDApIHsKICAgICAgICAgICAgICAgIGRpZmYrKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBkaWZmOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZGlmZjsKICAgIH0KCiAgICAvKgogICAgICAgIENyZWRpdCB0byB1c2VyIEBldGggZnJvbSBTdGFja0V4Y2hhbmdlIGF0OgogICAgICAgIGh0dHBzOi8vZXRoZXJldW0uc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzgzNDYvY29udmVydC1hZGRyZXNzLXRvLXN0cmluZwogICAgICAgIExpY2Vuc2UgZm9yIGFkZHJlc3NUb1N0cmluZygpOiBDQyBCWS1TQSAzLjAKICAgICovCiAgICBmdW5jdGlvbiBhZGRyZXNzVG9TdHJpbmcoYWRkcmVzcyB4KSBwcml2YXRlIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICAgICAgYnl0ZXMgbWVtb3J5IGIgPSBuZXcgYnl0ZXMoMjApOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IDIwOyBpKyspCiAgICAgICAgICAgIGJbaV0gPSBieXRlKHVpbnQ4KHVpbnQoeCkgLyAoMioqKDgqKDE5IC0gaSkpKSkpOwogICAgICAgIHJldHVybiBzdHJpbmcoYik7CiAgICB9CgogICAgLyoKICAgICAgICBQZXJmb3JtcyB0b2tlbiBleGNoYW5nZSBhbmQgcnVucyB0aGUgbG90dGVyeSByb3V0aW5lLgoKICAgICovCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CgogICAgICAgIC8qCiAgICAgICAgICAgIE93bmVyIGNhbm5vdCBwbGF5IGxvdHRlcnkuCiAgICAgICAgKi8KICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBvd25lcikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAobXNnLnZhbHVlID4gMCkgewoKICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgIE1haW50ZW5hbmNlIGZlZSAyJQogICAgICAgICAgICAqLwogICAgICAgICAgICB1aW50IG1mZWUgPSAoMiAqIG1zZy52YWx1ZSkgLyAxMDA7CgogICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgSWYgdGhlIGNvbnRyYWN0IGRvZXMgbm90IGhhdmUgc3VmZmljaWVudCBiYWxhbmNlIHRvIHBheSBtZmVlLAogICAgICAgICAgICAgICAgaXQgd2lsbCBhZGQgbWZlZSB0byBtYWludGVuYW5jZURlYnQgYW5kIHdpbGwgbm90IHRyYW5zZmVyIGl0CiAgICAgICAgICAgICAgICBhdCB0aGlzIHRpbWUuIER1cmluZyBhIGxhdGVyIHRyYW5zYWN0aW9uLCBpZiB0aGUgZmVlIGlzIGVub3VnaCwKICAgICAgICAgICAgICAgIHRoZSBwcmV2aW91cyBkZWJ0IGlzIHRyYW5zZmVycmVkIGFuZCB6ZXJvZWQgb3V0LgogICAgICAgICAgICAqLwogICAgICAgICAgICBpZiAoYWRkcmVzcyh0aGlzKS5iYWxhbmNlID49IG1mZWUpIHsKICAgICAgICAgICAgICAgIGlmIChhZGRyZXNzKHRoaXMpLmJhbGFuY2UgPj0gKG1mZWUgKyBtYWludGVuYW5jZURlYnQpICkgewogICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlJ3MgZW5vdWdoIHRvIGNvdmVyIHByZXZpb3VzIGRlYnQKICAgICAgICAgICAgICAgICAgICBvd25lci50cmFuc2ZlcihtZmVlICsgbWFpbnRlbmFuY2VEZWJ0KTsKICAgICAgICAgICAgICAgICAgICBtYWludGVuYW5jZURlYnQgPSAwOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBlbm91Z2ggdG8gcGF5IGZlZSBidXQgbm90IHByZXZpb3VzIGRlYnRzCiAgICAgICAgICAgICAgICAgICAgb3duZXIudHJhbnNmZXIobWZlZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbWFpbnRlbmFuY2VEZWJ0ICs9IG1mZWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgICBDb252ZXJ0IEVUSCB0byBJTE9UIGF0IHRva2Vuc1BlckV0aGVyZXVtIHJhdGUuCiAgICAgICAgICAgICovCiAgICAgICAgICAgIHVpbnQgdG9rZW5BbW91bnQgPSB0b2tlbnNQZXJFdGhlcmV1bSAqIG1zZy52YWx1ZTsKICAgICAgICAgICAgaWYgKHRva2VuQW1vdW50ID4gMCkgewogICAgICAgICAgICAgICAgcmVxdWlyZSggKGJhbGFuY2VPZlttc2cuc2VuZGVyXSArIHRva2VuQW1vdW50KSA+IGJhbGFuY2VPZlttc2cuc2VuZGVyXSk7CgogICAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgICAgICBQYXkgZmlkZWxpdHkgYm9udXMuCiAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgcGF5Qm9udXMobXNnLnNlbmRlcik7CgogICAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgICAgICBQYXkgaW50ZXJlc3RzIG9uIHByZXZpb3VzIGJhbGFuY2UuCiAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgcGF5SW50ZXJlc3QobXNnLnNlbmRlcik7CgogICAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgICAgICBVcGRhdGUgYmFsYW5jZS4KICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gKz0gdG9rZW5BbW91bnQ7CiAgICAgICAgICAgICAgICB0b3RhbFN1cHBseSArPSB0b2tlbkFtb3VudDsKICAgICAgICAgICAgICAgIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIHRva2VuQW1vdW50KTsKCiAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgICAgIEFkZCB0b3RhbCBhZnRlciBwYXlpbmcgYm9udXMuCiAgICAgICAgICAgICAgICAgICAgVGhpcyBkZXBvc2l0IHdpbGwgY291bnQgdG93YXJkcyB0aGUgbmV4dCBkZXBvc2l0IGJvbnVzLgogICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIGRlcG9zaXRUb3RhbFttc2cuc2VuZGVyXSArPSBtc2cudmFsdWU7CgogICAgICAgICAgICAgICAgc3RyaW5nIG1lbW9yeSBhdHMgPSBhZGRyZXNzVG9TdHJpbmcobXNnLnNlbmRlcik7CgogICAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgICAgICBQZXJmb3JtIGxvdHRlcnkgcm91dGluZS4KICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICBjdXJyZW50X2phY2twb3RfaGFzaCA9IGtlY2NhazI1NihjdXJyZW50X2phY2twb3RfaGFzaCwgYXRzLCBibG9jay5jb2luYmFzZSwgYmxvY2subnVtYmVyLCBibG9jay50aW1lc3RhbXApOwogICAgICAgICAgICAgICAgdWludCBkaWZmeCA9IGhhc2hEaWZmaWN1bHR5KGN1cnJlbnRfamFja3BvdF9oYXNoKTsKCiAgICAgICAgICAgICAgICBpZiAoZGlmZnggPj0gamFja3BvdERpZmZpY3VsdHkpIHsKICAgICAgICAgICAgICAgICAgICAvKgoKICAgICAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgICAgICAgICAgICAgICAgKioqKiAgSkFDS1BPVCEgICoqKioKICAgICAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioKCiAgICAgICAgICAgICAgICAgICAgICAgIFdpbm5lciByZWNlaXZlcyB0aGUgZW50aXJlIGNvbnRyYWN0IGJhbGFuY2UuCiAgICAgICAgICAgICAgICAgICAgICAgIEphY2twb3QgZXZlbnQgbWFrZXMgdGhlIHJlc3VsdCBwdWJsaWMuCgogICAgICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICAgICAgSmFja3BvdChtc2cuc2VuZGVyLCBhZGRyZXNzKHRoaXMpLmJhbGFuY2UpOwogICAgICAgICAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoYWRkcmVzcyh0aGlzKS5iYWxhbmNlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgICAgIE1ha2UgdGhlIGdhbWUgcmVzdWx0IHB1YmxpYyBmb3IgdHJhbnNwYXJlbmN5LgogICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIEdhbWVSZXN1bHQobXNnLnNlbmRlciwgZGlmZngpOwoKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCn0='.
	

]
