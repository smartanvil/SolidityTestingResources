Class {
	#name : #SRT4b864991128799784649c85ccf11bdded3cbb987,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4b864991128799784649c85ccf11bdded3cbb987 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBvd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBmdW5jdGlvbiBvd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQp9Cgpjb250cmFjdCBEU01hdGggewoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgYXNzZXJ0KCh6ID0geCArIHkpID49IHgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgYXNzZXJ0KCh6ID0geCAtIHkpIDw9IHgpOwogICAgfQoKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgYXNzZXJ0KCh6ID0geCAqIHkpID49IHgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgeiA9IHggLyB5OwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbih1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgcmV0dXJuIHggPD0geSA/IHggOiB5OwogICAgfQoKICAgIGZ1bmN0aW9uIG1heCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgcmV0dXJuIHggPj0geSA/IHggOiB5OwogICAgfQp9CgoKY29udHJhY3QgcXVldWUgewogICAgUXVldWUgcHVibGljIHE7CgogICAgc3RydWN0IEJ1eVRpY2tldCB7CiAgICAgICAgYWRkcmVzcyBhY2NvdW50OwogICAgICAgIHVpbnQgYW1vdW50OwogICAgICAgIHVpbnQgdGltZTsKICAgIH0KCiAgICBzdHJ1Y3QgUXVldWUgewogICAgICAgIEJ1eVRpY2tldFtdIGRhdGE7CiAgICAgICAgdWludCBmcm9udDsKICAgICAgICB1aW50IGJhY2s7CiAgICB9CgogICAgZnVuY3Rpb24gcXVldWVTaXplKCkgY29uc3RhbnQgcmV0dXJucyAodWludCByKSB7CiAgICAgICAgciA9IHEuYmFjayAtIHEuZnJvbnQ7CiAgICB9CgogICAgZnVuY3Rpb24gcXVldWUoKSB7CiAgICAgICAgcS5kYXRhLmxlbmd0aCA9IDYwMDAwMDsKICAgIH0KCiAgICBmdW5jdGlvbiBwdXNoUXVldWUoQnV5VGlja2V0IHRpY2tldCkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoKHEuYmFjayArIDEpICUgcS5kYXRhLmxlbmd0aCAhPSBxLmZyb250KTsKCiAgICAgICAgcS5kYXRhW3EuYmFja10gPSB0aWNrZXQ7CiAgICAgICAgcS5iYWNrID0gKHEuYmFjayArIDEpICUgcS5kYXRhLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBwZWVrUXVldWUoKSBpbnRlcm5hbCByZXR1cm5zIChCdXlUaWNrZXQgcikgewogICAgICAgIHJlcXVpcmUocS5iYWNrICE9IHEuZnJvbnQpOwoKICAgICAgICByID0gcS5kYXRhW3EuZnJvbnRdOwogICAgfQoKICAgIGZ1bmN0aW9uIHBvcFF1ZXVlKCkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUocS5iYWNrICE9IHEuZnJvbnQpOwoKICAgICAgICBkZWxldGUgcS5kYXRhW3EuZnJvbnRdOwogICAgICAgIHEuZnJvbnQgPSAocS5mcm9udCArIDEpICUgcS5kYXRhLmxlbmd0aDsKICAgIH0KfQoKY29udHJhY3QgRGVDZW50ZXJUb2tlbiBpcyBvd25lZCwgcXVldWUsIERTTWF0aCB7CiAgICBzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gJ1Rva2VuIDAuMSc7CiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAnRGVDZW50ZXInOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAnREMnOwogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gODsKCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDEwMDAwMDAwMDAwMDAwMDAwOyAvLyAxMDAgbWlsbGlvbgogICAgdWludDI1NiBwdWJsaWMgYXZhaWxhYmxlVG9rZW5zID0gNjAwMDAwMDAwMDAwMDAwMDsgLy8gNjAgbWlsbGlvbgogICAgdWludDI1NiBwdWJsaWMgdGVhbUFuZEV4cGVydHNUb2tlbnMgPSA0MDAwMDAwMDAwMDAwMDAwOyAvLyA0MCBtaWxsaW9uCiAgICB1aW50MjU2IHB1YmxpYyBwcmljZSA9IDAuMDAwMDAwMDAwMSBldGhlcjsgLy8gMC4wMSBldGhlciBwZXIgdG9rZW4KCiAgICB1aW50IHB1YmxpYyBzdGFydFRpbWU7CiAgICB1aW50IHB1YmxpYyByZWZ1bmRTdGFydFRpbWU7CiAgICB1aW50IHB1YmxpYyByZWZ1bmREdXJhdGlvbiA9IDMgZGF5czsgLy8gMyB5ZWFycwogICAgdWludCBwdWJsaWMgZmlyc3RTdGFnZUR1cmF0aW9uID0gMyBkYXlzOyAvLyAzMSBkYXlzCgogICAgdWludCBwdWJsaWMgbWF4RGFpbHlDYXAgPSAzMzMzMzAwMDAwMDAwOyAvLyAzMyAzMzMgREMKICAgIG1hcHBpbmcgKHVpbnQgPT4gdWludCkgcHVibGljIGRhaWx5VG90YWxzOwoKICAgIHVpbnQgcHVibGljIHF1ZXVlZEFtb3VudDsKCiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeTsKICAgIGFkZHJlc3MgcHVibGljIGV4cGVydHNBY2NvdW50OwogICAgYWRkcmVzcyBwdWJsaWMgdGVhbUFjY291bnQ7CgogICAgdWludCBwdWJsaWMgbGFzdFNjaGVkdWxlZFRvcFVwOwogICAgdWludCBwdWJsaWMgbGFzdFByb2Nlc3NlZERheTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlT2Y7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8vIGZvciB0ZXN0aW5nCiAgICB1aW50IHB1YmxpYyBjVGltZSA9IDA7CiAgICBmdW5jdGlvbiBzZXRDVGltZSh1aW50IF9jVGltZSkgb25seU93bmVyIHsKICAgICAgICBjVGltZSA9IF9jVGltZTsKICAgIH0KCiAgICBmdW5jdGlvbiBEZUNlbnRlclRva2VuKAogICAgYWRkcmVzcyBfYmVuZWZpY2lhcnksCiAgICBhZGRyZXNzIF9leHBlcnRzQWNjb3VudCwKICAgIGFkZHJlc3MgX3RlYW1BY2NvdW50LAogICAgdWludCBfc3RhcnRUaW1lLAogICAgdWludCBfcmVmdW5kU3RhcnRUaW1lCiAgICApIHsKICAgICAgICBiZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgICAgICBleHBlcnRzQWNjb3VudCA9IF9leHBlcnRzQWNjb3VudDsKICAgICAgICB0ZWFtQWNjb3VudCA9IF90ZWFtQWNjb3VudDsKCiAgICAgICAgc3RhcnRUaW1lID0gX3N0YXJ0VGltZTsKICAgICAgICByZWZ1bmRTdGFydFRpbWUgPSBfcmVmdW5kU3RhcnRUaW1lOwoKICAgICAgICBiYWxhbmNlT2ZbdGhpc10gPSB0b3RhbFN1cHBseTsKCiAgICAgICAgbGFzdFByb2Nlc3NlZERheSA9IGZpcnN0U3RhZ2VEdXJhdGlvbiAtIDE7CgogICAgICAgIHNjaGVkdWxlZFRvcFVwKCk7CiAgICB9CgogICAgZnVuY3Rpb24gdGltZSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICAvLyBmb3IgdGVzdGluZwogICAgICAgIGlmKGNUaW1lID4gMCkgewogICAgICAgICAgICByZXR1cm4gY1RpbWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYmxvY2sudGltZXN0YW1wOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvZGF5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBkYXlGb3IodGltZSgpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkYXlGb3IodWludCB0aW1lc3RhbXApIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gc3ViKHRpbWVzdGFtcCwgc3RhcnRUaW1lKSAvIDI0IGhvdXJzOwogICAgfQoKICAgIGZ1bmN0aW9uIGxvd2VyTGltaXRGb3JUb2RheSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdG9kYXkoKSAqIDEgZXRoZXI7CiAgICB9CgogICAgZnVuY3Rpb24gc2NoZWR1bGVkVG9wVXAoKSBvbmx5T3duZXIgewogICAgICAgIHVpbnQgcGF5bWVudCA9IDQwMDAwMDAwMDAwMDAwMDsgLy8gNCBtaWxsaW9uIHRva2VucwoKICAgICAgICByZXF1aXJlKHN1Yih0aW1lKCksIGxhc3RTY2hlZHVsZWRUb3BVcCkgPj0gMSB5ZWFycyk7CiAgICAgICAgcmVxdWlyZSh0ZWFtQW5kRXhwZXJ0c1Rva2VucyA+PSBwYXltZW50ICogMik7CgogICAgICAgIGxhc3RTY2hlZHVsZWRUb3BVcCA9IHRpbWUoKTsKCiAgICAgICAgdGVhbUFuZEV4cGVydHNUb2tlbnMgLT0gcGF5bWVudDsKICAgICAgICBiYWxhbmNlT2ZbdGhpc10gPSBzdWIoYmFsYW5jZU9mW3RoaXNdLCBwYXltZW50KTsKICAgICAgICBiYWxhbmNlT2ZbZXhwZXJ0c0FjY291bnRdID0gYWRkKGJhbGFuY2VPZltleHBlcnRzQWNjb3VudF0sIHBheW1lbnQpOwoKICAgICAgICB0ZWFtQW5kRXhwZXJ0c1Rva2VucyAtPSBwYXltZW50OwogICAgICAgIGJhbGFuY2VPZlt0aGlzXSA9IHN1YihiYWxhbmNlT2ZbdGhpc10sIHBheW1lbnQpOwogICAgICAgIGJhbGFuY2VPZlt0ZWFtQWNjb3VudF0gPSBhZGQoYmFsYW5jZU9mW3RlYW1BY2NvdW50XSwgcGF5bWVudCk7CgogICAgICAgIFRyYW5zZmVyKHRoaXMsIGV4cGVydHNBY2NvdW50LCBwYXltZW50KTsgLy8gZXhlY3V0ZSBhbiBldmVudCByZWZsZWN0aW5nIHRoZSBjaGFuZ2UKICAgICAgICBUcmFuc2Zlcih0aGlzLCB0ZWFtQWNjb3VudCwgcGF5bWVudCk7IC8vIGV4ZWN1dGUgYW4gZXZlbnQgcmVmbGVjdGluZyB0aGUgY2hhbmdlCiAgICB9CgogICAgLyogQWxsb3cgYW5vdGhlciBjb250cmFjdCB0byBzcGVuZCBzb21lIHRva2VucyBpbiB5b3VyIGJlaGFsZiAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kKHVpbnQyNTYgX3ZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZSh0aW1lKCkgPiByZWZ1bmRTdGFydFRpbWUpOwogICAgICAgIHJlcXVpcmUodGhpcy5iYWxhbmNlID49IF92YWx1ZSAqIHByaWNlKTsKCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gc3ViKGJhbGFuY2VPZlttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlT2ZbdGhpc10gPSBhZGQoYmFsYW5jZU9mW3RoaXNdLCBfdmFsdWUpOwogICAgICAgIGF2YWlsYWJsZVRva2VucyA9IGFkZChhdmFpbGFibGVUb2tlbnMsIF92YWx1ZSk7CgogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoX3ZhbHVlICogcHJpY2UpOwoKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCB0aGlzLCBfdmFsdWUpOyAvLyBOb3RpZnkgYW55b25lIGxpc3RlbmluZyB0aGF0IHRoaXMgdHJhbnNmZXIgdG9vayBwbGFjZQogICAgfQoKICAgIC8qIFNlbmQgdG9rZW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOyAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKCiAgICAgICAgaWYgKF90byA9PSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgICAgICAgIHJlZnVuZChfdmFsdWUpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBzdWIoYmFsYW5jZU9mW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VPZltfdG9dID0gYWRkKGJhbGFuY2VPZltfdG9dLCBfdmFsdWUpOwoKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7IC8vIE5vdGlmeSBhbnlvbmUgbGlzdGVuaW5nIHRoYXQgdGhpcyB0cmFuc2ZlciB0b29rIHBsYWNlCiAgICB9CgogICAgLyogQSBjb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIHRva2VucyAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7IC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pOyAvLyBDaGVjayBhbGxvd2FuY2UKCiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSA9IHN1YihhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdLCBfdmFsdWUpOyAvLyAgU3VidHJhY3QgZnJvbSB0aGUgYWxsb3dhbmNlCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSA9IHN1YihiYWxhbmNlT2ZbX2Zyb21dLCBfdmFsdWUpOyAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IGFkZChiYWxhbmNlT2ZbX3RvXSwgX3ZhbHVlKTsgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQKCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gY2xvc2VSZWZ1bmQoKSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUodGltZSgpIC0gcmVmdW5kU3RhcnRUaW1lID4gcmVmdW5kRHVyYXRpb24pOwoKICAgICAgICBiZW5lZmljaWFyeS50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfQoKICAgIC8qCiAgICAgKiAgICBUb2tlbiBwdXJjaGFzaW5nIGhhcyAyIHN0YWdlczoKICAgICAqICAgICAgIC0gRmlyc3Qgc3RhZ2UgaG9sZHMgMzEgZGF5cy4gVGhlcmUgaXMgbm8gbGltaXQgb2YgYnV5aW5nLgogICAgICogICAgICAgLSBTZWNvbmQgc3RhZ2UgaG9sZHMgfjUgeWVhcnMgYWZ0ZXIuIFRoZXJlIHdpbGwgYmUgbGltaXQgb2YgMzMzLjMzIGV0aGVyIHBlciBkYXkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1eSgpIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoc3RhcnRUaW1lIDw9IHRpbWUoKSk7IC8vIGNoZWNrIGlmIElDTyBpcyBnb2luZwoKICAgICAgICB1aW50IGFtb3VudCA9IGRpdihtc2cudmFsdWUsIHByaWNlKTsKCiAgICAgICAgaWYgKHRpbWUoKSAtIHN0YXJ0VGltZSA+IGZpcnN0U3RhZ2VEdXJhdGlvbikgeyAvLyBzZWNvbmQgc3RhZ2UKICAgICAgICAgICAgcmVxdWlyZSgxIGV0aGVyIDw9IG1zZy52YWx1ZSk7IC8vIGNoZWNrIG1pbi4gbGltaXQKICAgICAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPD0gMzAwIGV0aGVyKTsgLy8gY2hlY2sgbWF4LiBsaW1pdAoKICAgICAgICAgICAgLy8gc2VuZCA4MCUgdG8gYmVuZWZpY2lhcnkgYWNjb3VudCwgYW5vdGhlciAyMCUgc3RheXMgZm9yIHJlZnVuZGluZwogICAgICAgICAgICBiZW5lZmljaWFyeS50cmFuc2ZlcihtdWwoZGl2KG1zZy52YWx1ZSwgNSksIDQpKTsKCiAgICAgICAgICAgIHVpbnQgY3VycmVudERheSA9IGxhc3RQcm9jZXNzZWREYXkgKyAxOwogICAgICAgICAgICB1aW50IGxpbWl0ID0gbWF4RGFpbHlDYXAgLSBkYWlseVRvdGFsc1tjdXJyZW50RGF5XTsKCiAgICAgICAgICAgIGlmIChsaW1pdCA+PSBhbW91bnQpIHsKICAgICAgICAgICAgICAgIGF2YWlsYWJsZVRva2VucyA9IHN1YihhdmFpbGFibGVUb2tlbnMsIGFtb3VudCk7CiAgICAgICAgICAgICAgICBiYWxhbmNlT2ZbdGhpc10gPSBzdWIoYmFsYW5jZU9mW3RoaXNdLCBhbW91bnQpOyAvLyBzdWJ0cmFjdHMgYW1vdW50IGZyb20gc2VsbGVyJ3MgYmFsYW5jZQogICAgICAgICAgICAgICAgZGFpbHlUb3RhbHNbY3VycmVudERheV0gPSBhZGQoZGFpbHlUb3RhbHNbY3VycmVudERheV0sIGFtb3VudCk7CiAgICAgICAgICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBhZGQoYmFsYW5jZU9mW21zZy5zZW5kZXJdLCBhbW91bnQpOyAvLyBhZGRzIHRoZSBhbW91bnQgdG8gYnV5ZXIncyBiYWxhbmNlCgogICAgICAgICAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgYW1vdW50KTsgLy8gZXhlY3V0ZSBhbiBldmVudCByZWZsZWN0aW5nIHRoZSBjaGFuZ2UKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHF1ZXVlZEFtb3VudCA9IGFkZChxdWV1ZWRBbW91bnQsIGFtb3VudCk7CiAgICAgICAgICAgICAgICByZXF1aXJlKHF1ZXVlZEFtb3VudCA8PSBhdmFpbGFibGVUb2tlbnMpOwogICAgICAgICAgICAgICAgQnV5VGlja2V0IG1lbW9yeSB0aWNrZXQgPSBCdXlUaWNrZXQoe2FjY291bnQ6IG1zZy5zZW5kZXIsIGFtb3VudDogYW1vdW50LCB0aW1lOiB0aW1lKCl9KTsKICAgICAgICAgICAgICAgIHB1c2hRdWV1ZSh0aWNrZXQpOwogICAgICAgICAgICB9CgogICAgICAgIH0gZWxzZSB7IC8vIGZpcnN0IHN0YWdlCiAgICAgICAgICAgIHJlcXVpcmUobG93ZXJMaW1pdEZvclRvZGF5KCkgPD0gbXNnLnZhbHVlKTsgLy8gY2hlY2sgbWluLiBsaW1pdAogICAgICAgICAgICByZXF1aXJlKGFtb3VudCA8PSBhdmFpbGFibGVUb2tlbnMpOwoKICAgICAgICAgICAgLy8gc2VuZCA4MCUgdG8gYmVuZWZpY2lhcnkgYWNjb3VudCwgYW5vdGhlciAyMCUgc3RheXMgZm9yIHJlZnVuZGluZwogICAgICAgICAgICBiZW5lZmljaWFyeS50cmFuc2ZlcihtdWwoZGl2KG1zZy52YWx1ZSwgNSksIDQpKTsKCiAgICAgICAgICAgIGF2YWlsYWJsZVRva2VucyA9IHN1YihhdmFpbGFibGVUb2tlbnMsIGFtb3VudCk7CiAgICAgICAgICAgIGJhbGFuY2VPZlt0aGlzXSA9IHN1YihiYWxhbmNlT2ZbdGhpc10sIGFtb3VudCk7IC8vIHN1YnRyYWN0cyBhbW91bnQgZnJvbSBzZWxsZXIncyBiYWxhbmNlCiAgICAgICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IGFkZChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0sIGFtb3VudCk7IC8vIGFkZHMgdGhlIGFtb3VudCB0byBidXllcidzIGJhbGFuY2UKCiAgICAgICAgICAgIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIGFtb3VudCk7IC8vIGV4ZWN1dGUgYW4gZXZlbnQgcmVmbGVjdGluZyB0aGUgY2hhbmdlCiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHByb2Nlc3NQZW5kaW5nVGlja2V0cygpIG9ubHlPd25lciB7CgogICAgICAgIHVpbnQgc2l6ZSA9IHF1ZXVlU2l6ZSgpOwogICAgICAgIHVpbnQgcHRyID0gMDsKICAgICAgICB1aW50IGN1cnJlbnREYXk7CiAgICAgICAgdWludCBsaW1pdDsKICAgICAgICBCdXlUaWNrZXQgbWVtb3J5IHRpY2tldDsKCiAgICAgICAgd2hpbGUgKHB0ciA8IHNpemUpIHsKICAgICAgICAgICAgY3VycmVudERheSA9IGxhc3RQcm9jZXNzZWREYXkgKyAxOwogICAgICAgICAgICBsaW1pdCA9IG1heERhaWx5Q2FwIC0gZGFpbHlUb3RhbHNbY3VycmVudERheV07CgogICAgICAgICAgICAvLyBzdG9wIHRoZW4gdHJ5aW5nIHRvIHByb2Nlc3MgZnV0dXJlCiAgICAgICAgICAgIGlmIChzdGFydFRpbWUgKyAoY3VycmVudERheSAtIDEpICogMSBkYXlzID4gdGltZSgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIGxpbWl0IHRvIHByZXZlbnQgb3V0IG9mIGdhcyBlcnJvcgogICAgICAgICAgICBpZiAocHRyID4gNTApIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGlja2V0ID0gcGVla1F1ZXVlKCk7CgogICAgICAgICAgICBpZiAobGltaXQgPCB0aWNrZXQuYW1vdW50IHx8IHRpY2tldC50aW1lIC0gMTAwMCBzZWNvbmRzID4gc3RhcnRUaW1lICsgKGN1cnJlbnREYXkgLSAxKSAqIDEgZGF5cykgewogICAgICAgICAgICAgICAgbGFzdFByb2Nlc3NlZERheSArPSAxOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHBvcFF1ZXVlKCk7CiAgICAgICAgICAgIHB0ciArPSAxOwoKICAgICAgICAgICAgYXZhaWxhYmxlVG9rZW5zID0gc3ViKGF2YWlsYWJsZVRva2VucywgdGlja2V0LmFtb3VudCk7CiAgICAgICAgICAgIHF1ZXVlZEFtb3VudCA9IHN1YihxdWV1ZWRBbW91bnQsIHRpY2tldC5hbW91bnQpOwogICAgICAgICAgICBkYWlseVRvdGFsc1tjdXJyZW50RGF5XSA9IGFkZChkYWlseVRvdGFsc1tjdXJyZW50RGF5XSwgdGlja2V0LmFtb3VudCk7CiAgICAgICAgICAgIGJhbGFuY2VPZlt0aGlzXSA9IHN1YihiYWxhbmNlT2ZbdGhpc10sIHRpY2tldC5hbW91bnQpOwogICAgICAgICAgICBiYWxhbmNlT2ZbdGlja2V0LmFjY291bnRdID0gYWRkKGJhbGFuY2VPZlt0aWNrZXQuYWNjb3VudF0sIHRpY2tldC5hbW91bnQpOyAvLyBhZGRzIHRoZSBhbW91bnQgdG8gYnV5ZXIncyBiYWxhbmNlCgogICAgICAgICAgICBUcmFuc2Zlcih0aGlzLCB0aWNrZXQuYWNjb3VudCwgdGlja2V0LmFtb3VudCk7IC8vIGV4ZWN1dGUgYW4gZXZlbnQgcmVmbGVjdGluZyB0aGUgY2hhbmdlCiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICAgICAgYnV5KCk7CiAgICB9Cn0='.
	

]
