Class {
	#name : #SRT262F4BB83B7A1a611d2abeA14C9d336320b538C7,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT262F4BB83B7A1a611d2abeA14C9d336320b538C7 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gQWRkIGEgbnVtYmVyIHRvIGFub3RoZXIgbnVtYmVyLCBjaGVja2luZyBmb3Igb3ZlcmZsb3dzCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSAmJiBjID49IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gU3VidHJhY3QgYSBudW1iZXIgZnJvbSBhbm90aGVyIG51bWJlciwgY2hlY2tpbmcgZm9yIHVuZGVyZmxvd3MKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgkKfQoKY29udHJhY3QgT3duZWQgewoKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIE93bmVkKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRPd25lcihhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgICB9Cn0KCmludGVyZmFjZSB0b2tlbiB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgOwoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKfQoKY29udHJhY3QgQXJ0aXNUdXJiYUNyb3dkc2FsZSBpcyBPd25lZHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgkKCXN0cnVjdCBDb250cmlidXRvckRhdGF7CgkJYm9vbCBpc0FjdGl2ZTsKCQlib29sIGlzVG9rZW5EaXN0cmlidXRlZDsKCQl1aW50IGNvbnRyaWJ1dGlvbkFtb3VudDsJLy8gRVRIIGNvbnRyaWJ1dGlvbgoJCXVpbnQgdG9rZW5zQW1vdW50OwkJCS8vIEV4Y2hhbmdlZCBBTEMgYW1vdW50Cgl9CgkKCW1hcHBpbmcoYWRkcmVzcyA9PiBDb250cmlidXRvckRhdGEpIHB1YmxpYyBjb250cmlidXRvckxpc3Q7CgltYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgY29udHJpYnV0b3JJbmRleGVzOwoJdWludCBuZXh0Q29udHJpYnV0b3JJbmRleDsKCXVpbnQgY29udHJpYnV0b3JDb3VudDsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgYmVuZWZpY2lhcnk7CiAgICB1aW50IHB1YmxpYyBmdW5kaW5nTGltaXQ7CiAgICB1aW50IHB1YmxpYyBhbW91bnRSYWlzZWQ7Cgl1aW50IHB1YmxpYyByZW1haW5BbW91bnQ7CiAgICB1aW50IHB1YmxpYyBkZWFkbGluZTsKICAgIHVpbnQgcHVibGljIGV4Y2hhbmdlVG9rZW5SYXRlOwogICAgdG9rZW4gcHVibGljIHRva2VuUmV3YXJkOwoJdWludDI1NiBwdWJsaWMgdG9rZW5CYWxhbmNlOwogICAgYm9vbCBwdWJsaWMgY3Jvd2RzYWxlQ2xvc2VkID0gZmFsc2U7CiAgICBib29sIHB1YmxpYyBpc0FSVERpc3RyaWJ1dGVkID0gZmFsc2U7CiAgICAKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIFRyYW5jaGUgMSBjcm93ZHNhbGUgc3RhcnQgZGF0ZSBhbmQgZW5kIGRhdGUKICAgIC8vIFN0YXJ0IC0gMjNoMDAKICAgIC8vIFRpZXIxICAtIDIzaDA1CiAgICAvLyBUaWVyMiAgLSAyM2gxMAogICAgLy8gVGllcjMgIC0gMjNoMTUKICAgIC8vIEVuZCAtIDIzaDIwCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFNUQVJUX1RJTUUgPSAxNTExOTU2ODAwOyAgICAgICAgICAgICAgICAgICAvLzI5IE5vdmVtYmVyIDIwMTcgMTI6MDAgVVRDCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBTRUNPTkRfVElFUl9TQUxFX1NUQVJUX1RJTUUgPSAxNTEzMTY2NDAwOyAgLy8xMyBEZWNlbWJlciAyMDE3IDEyOjAwIFVUQwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVEhJUkRfVElFUl9TQUxFX1NUQVJUX1RJTUUgPSAxNTE0Mzc2MDAwOyAgIC8vMjcgRGVjZW1iZXIgMjAxNyAxMjowMCBVVEMKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEZPVVJUSF9USUVSX1NBTEVfU1RBUlRfVElNRSA9IDE1MTQ5ODA4MDA7ICAvLzAzIEphbnVhcnkgMjAxOCAxMjowMCBVVEMKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEVORF9USU1FID0gMTUxNTU4NTYwMDsgICAgICAgICAgICAgICAgICAgICAvLzEwIEphbmF1cnkgMjAxOCAxMjowMCBVVEMKCQoJCiAgICAKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gY3Jvd2RzYWxlIGV4Y2hhbmdlIHJhdGUKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgdWludCBwdWJsaWMgU1RBUlRfUkFURSA9IDYwMDA7ICAgICAgICAgIC8vNTAlIEJvbnVzCiAgICB1aW50IHB1YmxpYyBTRUNPTkRfVElFUl9SQVRFID0gNTIwMDsgICAgLy8zMCUgQm9udXMKICAgIHVpbnQgcHVibGljIFRISVJEX1RJRVJfUkFURSA9IDQ0MDA7ICAgICAvLzEwJSBCb251cwogICAgdWludCBwdWJsaWMgRk9VUlRIX1JBVEUgPSA0MDAwOyAgICAgICAgIC8vMCUgQm9udXMKICAgIAoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gRnVuZGluZyBHb2FsCiAgICAvLyAgICAtIEhBUkQgQ0FQIDogNTAwMDAgRVRICiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEZVTkRJTkdfRVRIX0hBUkRfQ0FQID0gNTAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7IAogICAgCiAgICAvLyBBTEMgdG9rZW4gZGVjaW1hbHMKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBBUlRfREVDSU1BTFMgPSA4OwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQVJUX0RFQ0lNQUxTRkFDVE9SID0gMTAqKnVpbnQoQVJUX0RFQ0lNQUxTKTsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgQVJUX0ZPVU5EQVRJT05fQUREUkVTUyA9IDB4NTVCZUExQTAzMzVBOEVhNTY1NzJiOEU2NmYxNzE5NjI5MENhNjQ2NzsKICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEFSVF9DT05UUkFDVF9BRERSRVNTID0gMHgwODJFMTM0OTRmMTJFQkI3MjA2RkJmNjdFMjJBNkUxOTc1QTFBNjY5OwoKICAgIGV2ZW50IEdvYWxSZWFjaGVkKGFkZHJlc3MgcmFpc2luZ0FkZHJlc3MsIHVpbnQgYW1vdW50UmFpc2VkKTsKCWV2ZW50IExpbWl0UmVhY2hlZChhZGRyZXNzIHJhaXNpbmdBZGRyZXNzLCB1aW50IGFtb3VudFJhaXNlZCk7CiAgICBldmVudCBGdW5kVHJhbnNmZXIoYWRkcmVzcyBiYWNrZXIsIHVpbnQgYW1vdW50LCBib29sIGlzQ29udHJpYnV0aW9uKTsKCWV2ZW50IFdpdGhkcmF3RmFpbGVkKGFkZHJlc3MgcmFpc2luZ0FkZHJlc3MsIHVpbnQgYW1vdW50LCBib29sIGlzQ29udHJpYnV0aW9uKTsKCWV2ZW50IEZ1bmRSZXR1cm4oYWRkcmVzcyBiYWNrZXIsIHVpbnQgYW1vdW50LCBib29sIGlzQ29udHJpYnV0aW9uKTsKCiAgICAvKioKICAgICAqIENvbnN0cmN0b3IgZnVuY3Rpb24KICAgICAqCiAgICAgKiBTZXR1cCB0aGUgb3duZXIKICAgICAqLwogICAgZnVuY3Rpb24gQXJ0aXNUdXJiYUNyb3dkc2FsZSgKICAgICkgcHVibGljIHsKICAgICAgICBiZW5lZmljaWFyeSA9IEFSVF9GT1VOREFUSU9OX0FERFJFU1M7CiAgICAgICAgZnVuZGluZ0xpbWl0ID0gRlVORElOR19FVEhfSEFSRF9DQVA7ICAKCSAgICBkZWFkbGluZSA9IEVORF9USU1FOyAgLy8gMjAxOC0wMS0xMCAxMjowMDowMCBVVEMKICAgICAgICBleGNoYW5nZVRva2VuUmF0ZSA9IEZPVVJUSF9SQVRFICogQVJUX0RFQ0lNQUxTRkFDVE9SOwogICAgICAgIHRva2VuUmV3YXJkID0gdG9rZW4oQVJUX0NPTlRSQUNUX0FERFJFU1MpOwoJCWNvbnRyaWJ1dG9yQ291bnQgPSAwOwogICAgfQoKICAgIC8qKgogICAgICogRmFsbGJhY2sgZnVuY3Rpb24KICAgICAqCiAgICAgKiBUaGUgZnVuY3Rpb24gd2l0aG91dCBuYW1lIGlzIHRoZSBkZWZhdWx0IGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW5ldmVyIGFueW9uZSBzZW5kcyBmdW5kcyB0byBhIGNvbnRyYWN0CiAgICAgKi8KICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKCQkKICAgICAgICByZXF1aXJlKCFjcm93ZHNhbGVDbG9zZWQpOwogICAgICAgIHJlcXVpcmUobm93ID49IFNUQVJUX1RJTUUgJiYgbm93IDwgRU5EX1RJTUUpOwogICAgICAgIAoJCXByb2Nlc3NUcmFuc2FjdGlvbihtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogICAgfQoJCgkvKioKCSAqIFByb2Nlc3MgdHJhbnNhY3Rpb24KCSAqLwoJZnVuY3Rpb24gcHJvY2Vzc1RyYW5zYWN0aW9uKGFkZHJlc3MgX2NvbnRyaWJ1dG9yLCB1aW50IF9hbW91bnQpIGludGVybmFsewkKCQl1aW50IGNvbnRyaWJ1dGlvbkV0aEFtb3VudCA9IF9hbW91bnQ7CgkJCQogICAgICAgIGFtb3VudFJhaXNlZCArPSBjb250cmlidXRpb25FdGhBbW91bnQ7ICAgICAgICAgICAgICAgICAgICAvLyBhZGQgbmV3bHkgcmVjZWl2ZWQgRVRICgkJcmVtYWluQW1vdW50ICs9IGNvbnRyaWJ1dGlvbkV0aEFtb3VudDsKICAgICAgICAKCQkvLyBjYWxjdWFsdGUgZXhjaGFuZ2VkIHRva2VuIGJhc2VkIG9uIGV4Y2hhbmdlIHJhdGUKICAgICAgICBpZiAobm93ID49IFNUQVJUX1RJTUUgJiYgbm93IDwgU0VDT05EX1RJRVJfU0FMRV9TVEFSVF9USU1FKXsKCQkJZXhjaGFuZ2VUb2tlblJhdGUgPSBTVEFSVF9SQVRFICogQVJUX0RFQ0lNQUxTRkFDVE9SOwogICAgICAgIH0KICAgICAgICBpZiAobm93ID49IFNFQ09ORF9USUVSX1NBTEVfU1RBUlRfVElNRSAmJiBub3cgPCBUSElSRF9USUVSX1NBTEVfU1RBUlRfVElNRSl7CiAgICAgICAgICAgIGV4Y2hhbmdlVG9rZW5SYXRlID0gU0VDT05EX1RJRVJfUkFURSAqIEFSVF9ERUNJTUFMU0ZBQ1RPUjsKICAgICAgICB9CiAgICAgICAgaWYgKG5vdyA+PSBUSElSRF9USUVSX1NBTEVfU1RBUlRfVElNRSAmJiBub3cgPCBGT1VSVEhfVElFUl9TQUxFX1NUQVJUX1RJTUUpewogICAgICAgICAgICBleGNoYW5nZVRva2VuUmF0ZSA9IFRISVJEX1RJRVJfUkFURSAqIEFSVF9ERUNJTUFMU0ZBQ1RPUjsKICAgICAgICB9CiAgICAgICAgaWYgKG5vdyA+PSBGT1VSVEhfVElFUl9TQUxFX1NUQVJUX1RJTUUgJiYgbm93IDwgRU5EX1RJTUUpewogICAgICAgICAgICBleGNoYW5nZVRva2VuUmF0ZSA9IEZPVVJUSF9SQVRFICogQVJUX0RFQ0lNQUxTRkFDVE9SOwogICAgICAgIH0KICAgICAgICB1aW50IGFtb3VudEFydFRva2VuID0gX2Ftb3VudCAqIGV4Y2hhbmdlVG9rZW5SYXRlIC8gMSBldGhlcjsKCQkKCQlpZiAoY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0uaXNBY3RpdmUgPT0gZmFsc2UpeyAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNvbnRyaWJ1dG9yIGhhcyBhbHJlYWR5IGNvbnRyaWJ1dGVkCgkJCWNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmlzQWN0aXZlID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGhpcyBhY3Rpdml0eSB0byB0cnVlCgkJCWNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudCA9IGNvbnRyaWJ1dGlvbkV0aEFtb3VudDsgICAgLy8gU2V0IGhpcyBjb250cmlidXRpb24KCQkJY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0udG9rZW5zQW1vdW50ID0gYW1vdW50QXJ0VG9rZW47CgkJCWNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmlzVG9rZW5EaXN0cmlidXRlZCA9IGZhbHNlOwoJCQljb250cmlidXRvckluZGV4ZXNbbmV4dENvbnRyaWJ1dG9ySW5kZXhdID0gX2NvbnRyaWJ1dG9yOyAgICAgICAgICAgICAgICAgIC8vIFNldCBjb250cmlidXRvcnMgaW5kZXgKCQkJbmV4dENvbnRyaWJ1dG9ySW5kZXgrKzsKCQkJY29udHJpYnV0b3JDb3VudCsrOwoJCX0KCQllbHNlewoJCQljb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS5jb250cmlidXRpb25BbW91bnQgKz0gY29udHJpYnV0aW9uRXRoQW1vdW50OyAgIC8vIEFkZCBjb250cmlidXRpb24gYW1vdW50IHRvIGV4aXN0aW5nIGNvbnRyaWJ1dG9yCgkJCWNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLnRva2Vuc0Ftb3VudCArPSBhbW91bnRBcnRUb2tlbjsgICAgICAgICAgICAgLy8gbG9nIHRva2VuIGFtb3VudGAKCQl9CgkJCiAgICAgICAgRnVuZFRyYW5zZmVyKG1zZy5zZW5kZXIsIGNvbnRyaWJ1dGlvbkV0aEFtb3VudCwgdHJ1ZSk7CgkJCgkJaWYgKGFtb3VudFJhaXNlZCA+PSBmdW5kaW5nTGltaXQpewoJCQkvLyBjbG9zZSBjcm93ZHNhbGUgYmVjYXVzZSB0aGUgY3Jvd2RzYWxlIGxpbWl0IGlzIHJlYWNoZWQKCQkJY3Jvd2RzYWxlQ2xvc2VkID0gdHJ1ZTsKCQl9CQkKCQkKCX0KCiAgICBtb2RpZmllciBhZnRlckRlYWRsaW5lKCkgeyBpZiAobm93ID49IGRlYWRsaW5lKSBfOyB9CQoJbW9kaWZpZXIgYWZ0ZXJDcm93ZHNhbGVDbG9zZWQoKSB7IGlmIChjcm93ZHNhbGVDbG9zZWQgPT0gdHJ1ZSB8fCBub3cgPj0gZGVhZGxpbmUpIF87IH0KCQoJCgkvKioKICAgICAqIGNsb3NlIENyb3dkc2FsZQogICAgICoKICAgICAqLwoJZnVuY3Rpb24gY2xvc2VDcm93ZFNhbGUoKSBwdWJsaWMgewoJCXJlcXVpcmUoYmVuZWZpY2lhcnkgPT0gbXNnLnNlbmRlcik7CgkJaWYgKCBiZW5lZmljaWFyeSA9PSBtc2cuc2VuZGVyKSB7CgkJCWNyb3dkc2FsZUNsb3NlZCA9IHRydWU7CgkJfQoJfQoJCiAgICAvKioKICAgICAqIENoZWNrIHRva2VuIGJhbGFuY2UKICAgICAqCiAgICAgKi8KCWZ1bmN0aW9uIGNoZWNrVG9rZW5CYWxhbmNlKCkgcHVibGljIHsKCQlpZiAoIGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpIHsKCQkJLy9jaGVjayBjdXJyZW50IHRva2VuIGJhbGFuY2UKCQkJdG9rZW5CYWxhbmNlID0gdG9rZW5SZXdhcmQuYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOwoJCX0KCX0KCQogICAgLyoqCiAgICAgKiBXaXRoZHJhdyB0aGUgYWxsIGZ1bmRzCiAgICAgKgogICAgICogQ2hlY2tzIHRvIHNlZSBpZiBnb2FsIG9yIHRpbWUgbGltaXQgaGFzIGJlZW4gcmVhY2hlZCwgYW5kIGlmIHNvLCBhbmQgdGhlIGZ1bmRpbmcgZ29hbCB3YXMgcmVhY2hlZCwKICAgICAqIHNlbmRzIHRoZSBlbnRpcmUgYW1vdW50IHRvIHRoZSBiZW5lZmljaWFyeS4gCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNhZmVXaXRoZHJhd2FsQWxsKCkgcHVibGljIHsKICAgICAgICBpZiAoIGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpIHsKICAgICAgICAgICAgaWYgKGJlbmVmaWNpYXJ5LnNlbmQoYW1vdW50UmFpc2VkKSkgewogICAgICAgICAgICAgICAgRnVuZFRyYW5zZmVyKGJlbmVmaWNpYXJ5LCBhbW91bnRSYWlzZWQsIGZhbHNlKTsKCQkJCXJlbWFpbkFtb3VudCA9IHJlbWFpbkFtb3VudCAtIGFtb3VudFJhaXNlZDsKICAgICAgICAgICAgfSBlbHNlIHsKCQkJCVdpdGhkcmF3RmFpbGVkKGJlbmVmaWNpYXJ5LCBhbW91bnRSYWlzZWQsIGZhbHNlKTsKCQkJCS8vSWYgd2UgZmFpbCB0byBzZW5kIHRoZSBmdW5kcyB0byBiZW5lZmljaWFyeQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoJCgkvKioKICAgICAqIFdpdGhkcmF3IHRoZSBmdW5kcwogICAgICoKICAgICAqIENoZWNrcyB0byBzZWUgaWYgZ29hbCBvciB0aW1lIGxpbWl0IGhhcyBiZWVuIHJlYWNoZWQsIGFuZCBpZiBzbywgYW5kIHRoZSBmdW5kaW5nIGdvYWwgd2FzIHJlYWNoZWQsCiAgICAgKiBzZW5kcyB0aGUgZW50aXJlIGFtb3VudCB0byB0aGUgYmVuZWZpY2lhcnkuIAogICAgICovCiAgICBmdW5jdGlvbiBzYWZlV2l0aGRyYXdhbEFtb3VudCh1aW50MjU2IHdpdGhkcmF3QW1vdW50KSBwdWJsaWMgewogICAgICAgIGlmIChiZW5lZmljaWFyeSA9PSBtc2cuc2VuZGVyKSB7CiAgICAgICAgICAgIGlmIChiZW5lZmljaWFyeS5zZW5kKHdpdGhkcmF3QW1vdW50KSkgewogICAgICAgICAgICAgICAgRnVuZFRyYW5zZmVyKGJlbmVmaWNpYXJ5LCB3aXRoZHJhd0Ftb3VudCwgZmFsc2UpOwoJCQkJcmVtYWluQW1vdW50ID0gcmVtYWluQW1vdW50IC0gd2l0aGRyYXdBbW91bnQ7CiAgICAgICAgICAgIH0gZWxzZSB7CgkJCQlXaXRoZHJhd0ZhaWxlZChiZW5lZmljaWFyeSwgd2l0aGRyYXdBbW91bnQsIGZhbHNlKTsKCQkJCS8vSWYgd2UgZmFpbCB0byBzZW5kIHRoZSBmdW5kcyB0byBiZW5lZmljaWFyeQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoJCgkvKioKCSAqIFdpdGhkcmF3IEFSVCAKICAgICAqIAoJICogSWYgdGhlcmUgYXJlIHNvbWUgcmVtYWluaW5nIEFSVCBpbiB0aGUgY29udHJhY3QgCgkgKiBhZnRlciBhbGwgdG9rZW4gYXJlIGRpc3RyaWJ1dGVkIHRoZSBjb250cmlidXRvciwKCSAqIHRoZSBiZW5lZmljaWFyeSBjYW4gd2l0aGRyYXcgdGhlIEFSVCBpbiB0aGUgY29udHJhY3QKICAgICAqCiAgICAgKi8KICAgIGZ1bmN0aW9uIHdpdGhkcmF3QVJUKHVpbnQyNTYgdG9rZW5BbW91bnQpIHB1YmxpYyBhZnRlckNyb3dkc2FsZUNsb3NlZCB7CgkJcmVxdWlyZShiZW5lZmljaWFyeSA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBpZiAoaXNBUlREaXN0cmlidXRlZCAmJiBiZW5lZmljaWFyeSA9PSBtc2cuc2VuZGVyKSB7CiAgICAgICAgICAgIHRva2VuUmV3YXJkLnRyYW5zZmVyKGJlbmVmaWNpYXJ5LCB0b2tlbkFtb3VudCk7CgkJCS8vIHVwZGF0ZSB0b2tlbiBiYWxhbmNlCgkJCXRva2VuQmFsYW5jZSA9IHRva2VuUmV3YXJkLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKICAgICAgICB9CiAgICB9CgkKCgkvKioKICAgICAqIERpc3RyaWJ1dGUgdG9rZW4KICAgICAqCiAgICAgKiBDaGVja3MgdG8gc2VlIGlmIGdvYWwgb3IgdGltZSBsaW1pdCBoYXMgYmVlbiByZWFjaGVkLCBhbmQgaWYgc28sIGFuZCB0aGUgZnVuZGluZyBnb2FsIHdhcyByZWFjaGVkLAogICAgICogZGlzdHJpYnV0ZSB0b2tlbiB0byBjb250cmlidXRvci4gCiAgICAgKi8KCWZ1bmN0aW9uIGRpc3RyaWJ1dGVBUlRUb2tlbigpIHB1YmxpYyB7CgkJaWYgKGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpIHsgIC8vIG9ubHkgQVJUX0ZPVU5EQVRJT05fQUREUkVTUyBjYW4gZGlzdHJpYnV0ZSB0aGUgQVJUCgkJCWFkZHJlc3MgY3VycmVudFBhcnRpY2lwYW50QWRkcmVzczsKCQkJZm9yICh1aW50IGluZGV4ID0gMDsgaW5kZXggPCBjb250cmlidXRvckNvdW50OyBpbmRleCsrKXsKCQkJCWN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MgPSBjb250cmlidXRvckluZGV4ZXNbaW5kZXhdOyAKCQkJCQoJCQkJdWludCBhbW91bnRBcnRUb2tlbiA9IGNvbnRyaWJ1dG9yTGlzdFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXS50b2tlbnNBbW91bnQ7CgkJCQlpZiAoZmFsc2UgPT0gY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLmlzVG9rZW5EaXN0cmlidXRlZCl7CgkJCQkJYm9vbCBpc1N1Y2Nlc3MgPSB0b2tlblJld2FyZC50cmFuc2ZlcihjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzLCBhbW91bnRBcnRUb2tlbik7CgkJCQkJaWYgKGlzU3VjY2Vzcyl7CgkJCQkJCWNvbnRyaWJ1dG9yTGlzdFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXS5pc1Rva2VuRGlzdHJpYnV0ZWQgPSB0cnVlOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJLy8gY2hlY2sgaWYgYWxsIEFSVCBhcmUgZGlzdHJpYnV0ZWQKCQkJY2hlY2tJZkFsbEFSVERpc3RyaWJ1dGVkKCk7CgkJCS8vIGdldCBsYXRlc3QgdG9rZW4gYmFsYW5jZQoJCQl0b2tlbkJhbGFuY2UgPSB0b2tlblJld2FyZC5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7CgkJfQoJfQoJCgkvKioKICAgICAqIERpc3RyaWJ1dGUgdG9rZW4gYnkgYmF0Y2gKICAgICAqCiAgICAgKiBDaGVja3MgdG8gc2VlIGlmIGdvYWwgb3IgdGltZSBsaW1pdCBoYXMgYmVlbiByZWFjaGVkLCBhbmQgaWYgc28sIGFuZCB0aGUgZnVuZGluZyBnb2FsIHdhcyByZWFjaGVkLAogICAgICogZGlzdHJpYnV0ZSB0b2tlbiB0byBjb250cmlidXRvci4gCiAgICAgKi8KCWZ1bmN0aW9uIGRpc3RyaWJ1dGVBUlRUb2tlbkJhdGNoKHVpbnQgYmF0Y2hVc2VyQ291bnQpIHB1YmxpYyB7CgkJaWYgKGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpIHsgIC8vIG9ubHkgQVJUX0ZPVU5EQVRJT05fQUREUkVTUyBjYW4gZGlzdHJpYnV0ZSB0aGUgQVJUCgkJCWFkZHJlc3MgY3VycmVudFBhcnRpY2lwYW50QWRkcmVzczsKCQkJdWludCB0cmFuc2ZlcmVkVXNlckNvdW50ID0gMDsKCQkJZm9yICh1aW50IGluZGV4ID0gMDsgaW5kZXggPCBjb250cmlidXRvckNvdW50ICYmIHRyYW5zZmVyZWRVc2VyQ291bnQ8YmF0Y2hVc2VyQ291bnQ7IGluZGV4KyspewoJCQkJY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcyA9IGNvbnRyaWJ1dG9ySW5kZXhlc1tpbmRleF07IAoJCQkJCgkJCQl1aW50IGFtb3VudEFydFRva2VuID0gY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLnRva2Vuc0Ftb3VudDsKCQkJCWlmIChmYWxzZSA9PSBjb250cmlidXRvckxpc3RbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10uaXNUb2tlbkRpc3RyaWJ1dGVkKXsKCQkJCQlib29sIGlzU3VjY2VzcyA9IHRva2VuUmV3YXJkLnRyYW5zZmVyKGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MsIGFtb3VudEFydFRva2VuKTsKCQkJCQl0cmFuc2ZlcmVkVXNlckNvdW50ID0gdHJhbnNmZXJlZFVzZXJDb3VudCArIDE7CgkJCQkJaWYgKGlzU3VjY2Vzcyl7CgkJCQkJCWNvbnRyaWJ1dG9yTGlzdFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXS5pc1Rva2VuRGlzdHJpYnV0ZWQgPSB0cnVlOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJLy8gY2hlY2sgaWYgYWxsIEFSVCBhcmUgZGlzdHJpYnV0ZWQKCQkJY2hlY2tJZkFsbEFSVERpc3RyaWJ1dGVkKCk7CgkJCS8vIGdldCBsYXRlc3QgdG9rZW4gYmFsYW5jZQoJCQl0b2tlbkJhbGFuY2UgPSB0b2tlblJld2FyZC5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7CgkJfQoJfQoJCgkvKioKCSAqIENoZWNrIGlmIGFsbCBjb250cmlidXRvcidzIHRva2VuIGFyZSBzdWNjZXNzZnVsbHkgZGlzdHJpYnV0ZWQKCSAqLwoJZnVuY3Rpb24gY2hlY2tJZkFsbEFSVERpc3RyaWJ1dGVkKCkgcHVibGljIHsKCSAgICBhZGRyZXNzIGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3M7CgkJaXNBUlREaXN0cmlidXRlZCA9IHRydWU7CgkJZm9yICh1aW50IGluZGV4ID0gMDsgaW5kZXggPCBjb250cmlidXRvckNvdW50OyBpbmRleCsrKXsKCQkJCWN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MgPSBjb250cmlidXRvckluZGV4ZXNbaW5kZXhdOyAKCQkJCQoJCQlpZiAoZmFsc2UgPT0gY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLmlzVG9rZW5EaXN0cmlidXRlZCl7CgkJCQlpc0FSVERpc3RyaWJ1dGVkID0gZmFsc2U7CgkJCQlicmVhazsKCQkJfQoJCX0KCX0KCQp9'.
	

]
