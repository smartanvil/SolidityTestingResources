Class {
	#name : #SRT7f57292bf494a8c9342d37395d1378a65d59c499,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7f57292bf494a8c9342d37395d1378a65d59c499 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBXZWlDYXJkcyB7CgogICAgLy8vIExlYXNlIHJlY29yZCwgc3RvcmUgY2FyZCB0ZW5hbnRzIGRldGFpbHMKICAgIC8vLyBhbmQgbGVhc2UgZGV0YWlscwogICAgc3RydWN0IExlYXNlQ2FyZCB7CiAgICAgIHVpbnQgaWQ7CiAgICAgIGFkZHJlc3MgdGVuYW50OwogICAgICB1aW50IHByaWNlOwogICAgICB1aW50IHVudGlsQmxvY2s7CiAgICAgIHN0cmluZyB0aXRsZTsKICAgICAgc3RyaW5nIHVybDsKICAgICAgc3RyaW5nIGltYWdlOwogICAgfQoKICAgIC8vLyBSZWNvcmQgY2FyZCBkZXRhaWxzCiAgICBzdHJ1Y3QgY2FyZERldGFpbHMgewogICAgICB1aW50OCBpZDsKICAgICAgdWludCBwcmljZTsKICAgICAgdWludCBwcmljZUxlYXNlOyAvLyBwcmljZSBwZXIgYmxvY2sKICAgICAgdWludCBsZWFzZUR1cmF0aW9uOyAvLyBpbiBibG9jawogICAgICBib29sIGF2YWlsYWJsZUJ1eTsKICAgICAgYm9vbCBhdmFpbGFibGVMZWFzZTsKICAgICAgdWludFtdIGxlYXNlTGlzdDsKICAgICAgbWFwcGluZyh1aW50ID0+IExlYXNlQ2FyZCkgbGVhc2VDYXJkU3RydWN0czsKICAgIH0KCiAgICAvLy8gUmVjb3JkIGNhcmQKICAgIHN0cnVjdCBDYXJkIHsKICAgICAgdWludDggaWQ7CiAgICAgIGFkZHJlc3Mgb3duZXI7CiAgICAgIHN0cmluZyB0aXRsZTsKICAgICAgc3RyaW5nIHVybDsKICAgICAgc3RyaW5nIGltYWdlOwogICAgICBib29sIG5zZnc7CiAgICB9CiAgICAKICAgIC8vLyBVc2VycyBwZW5kaW5nIHdpdGhkcmF3YWxzCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcGVuZGluZ1dpdGhkcmF3YWxzOwoKICAgIG1hcHBpbmcodWludDggPT4gQ2FyZCkgY2FyZFN0cnVjdHM7IC8vIHJhbmRvbSBhY2Nlc3MgYnkgY2FyZCBrZXkKICAgIHVpbnQ4W10gY2FyZExpc3Q7IC8vIGxpc3Qgb2YgYW5ub3VuY2Uga2V5cyBzbyB3ZSBjYW4gZW51bWVyYXRlIHRoZW0KCiAgICBtYXBwaW5nKHVpbnQ4ID0+IGNhcmREZXRhaWxzKSBjYXJkRGV0YWlsc1N0cnVjdHM7IC8vIHJhbmRvbSBhY2Nlc3MgYnkgY2FyZCBkZXRhaWxzIGtleQogICAgdWludDhbXSBjYXJkRGV0YWlsc0xpc3Q7IC8vIGxpc3Qgb2YgY2FyZHMgZGV0YWlscyBrZXlzIHNvIHdlIGNhbiBlbnVtZXJhdGUgdGhlbQoKICAgIC8vLyBJbml0aWFsIGNhcmQgcHJpY2UKICAgIHVpbnQgaW5pdGlhbENhcmRQcmljZSA9IDEgZXRoZXI7CgogICAgLy8vIE93bmVyIGN1dCAoMSUpIC4gVGhpcyBjdXQgb25seSBhcHBseSBvbiBhIHVzZXItdG8tdXNlciBjYXJkIHRyYW5zYWN0aW9uCiAgICB1aW50IG93bmVyQnV5Q3V0ID0gMTAwOwogICAgLy8vIEdpdmVFVEggY3V0ICgxMCUpCiAgICB1aW50IGdpdmVFdGhDdXQgPSAxMDAwOwoKICAgIC8vLyBjb250cmFjdE93bmVyIGNhbiB3aXRoZHJhdyB0aGUgZnVuZHMKICAgIGFkZHJlc3MgY29udHJhY3RPd25lcjsKICAgIC8vLyBHaXZldGggYWRkcmVzcwogICAgYWRkcmVzcyBnaXZlRXRoQWRkcmVzcyA9IDB4NUFERjQzREQwMDZjNkMzNjUwNmUyYjJERkEzNTJFNjAwMDJkMjJEYzsKICAgIAogICAgLy8vIENvbnRyYWN0IGNvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBXZWlDYXJkcyhhZGRyZXNzIF9jb250cmFjdE93bmVyKSBwdWJsaWMgewogICAgICByZXF1aXJlKF9jb250cmFjdE93bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICBjb250cmFjdE93bmVyID0gX2NvbnRyYWN0T3duZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seUNvbnRyYWN0T3duZXIoKQogICAgewogICAgICAgLy8gVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBjb250cmFjdCBvd25lcgogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cmFjdE93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlDYXJkT3duZXIodWludDggY2FyZElkKQogICAgewogICAgICAgLy8gVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBjYXJkIG93bmVyCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNhcmRTdHJ1Y3RzW2NhcmRJZF0ub3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVZhbGlkQ2FyZCh1aW50OCBjYXJkSWQpCiAgICB7CiAgICAgICAvLyBUaHJvd3MgaWYgY2FyZCBpcyBub3QgdmFsaWQKICAgICAgICByZXF1aXJlKGNhcmRJZCA+PSAxICYmIGNhcmRJZCA8PSAxMDApOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIC8vLyBSZXR1cm4gY2FyZExpc3QgYXJyYXkKICAgIGZ1bmN0aW9uIGdldENhcmRzKCkgcHVibGljIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQ4W10pCiAgICB7CiAgICAgIHJldHVybiBjYXJkTGlzdDsKICAgIH0KCiAgICAvLy8gUmV0dXJuIGNhcmREZXRhaWxzTGlzdCBhcnJheQogICAgZnVuY3Rpb24gZ2V0Q2FyZHNEZXRhaWxzKCkgcHVibGljIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQ4W10pCiAgICB7CiAgICAgIHJldHVybiBjYXJkRGV0YWlsc0xpc3Q7CiAgICB9CgogICAgLy8vIFJldHVybiBjYXJkIGRldGFpbHMgYnkgaWQKICAgIGZ1bmN0aW9uIGdldENhcmREZXRhaWxzKHVpbnQ4IGNhcmRJZCkgdmlldyBwdWJsaWMKICAgICAgICBvbmx5VmFsaWRDYXJkKGNhcmRJZCkKICAgICAgICByZXR1cm5zICh1aW50OCBpZCwgdWludCBwcmljZSwgdWludCBwcmljZUxlYXNlLCB1aW50IGxlYXNlRHVyYXRpb24sIGJvb2wgYXZhaWxhYmxlQnV5LCBib29sIGF2YWlsYWJsZUxlYXNlKQogICAgewogICAgICAgIGJvb2wgX2J1eUF2YWlsYWJpbGl0eTsKICAgICAgICBpZiAoY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0uaWQgPT0gMCB8fCBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5hdmFpbGFibGVCdXkpIHsKICAgICAgICAgICAgX2J1eUF2YWlsYWJpbGl0eSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4oCiAgICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5pZCwKICAgICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLnByaWNlLAogICAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0ucHJpY2VMZWFzZSwKICAgICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmxlYXNlRHVyYXRpb24sCiAgICAgICAgICBfYnV5QXZhaWxhYmlsaXR5LAogICAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0uYXZhaWxhYmxlTGVhc2UKICAgICAgICApOwogICAgfQoKICAgIC8vLyBSZXR1cm4gY2FyZCBieSBpZAogICAgZnVuY3Rpb24gZ2V0Q2FyZCh1aW50OCBjYXJkSWQpIHZpZXcgcHVibGljCiAgICAgICAgb25seVZhbGlkQ2FyZChjYXJkSWQpCiAgICAgICAgcmV0dXJucyAodWludDggaWQsIGFkZHJlc3Mgb3duZXIsIHN0cmluZyB0aXRsZSwgc3RyaW5nIHVybCwgc3RyaW5nIGltYWdlLCBib29sIG5zZncpCiAgICB7CiAgICAgICAgcmV0dXJuKAogICAgICAgICAgY2FyZFN0cnVjdHNbY2FyZElkXS5pZCwKICAgICAgICAgIGNhcmRTdHJ1Y3RzW2NhcmRJZF0ub3duZXIsCiAgICAgICAgICBjYXJkU3RydWN0c1tjYXJkSWRdLnRpdGxlLAogICAgICAgICAgY2FyZFN0cnVjdHNbY2FyZElkXS51cmwsCiAgICAgICAgICBjYXJkU3RydWN0c1tjYXJkSWRdLmltYWdlLAogICAgICAgICAgY2FyZFN0cnVjdHNbY2FyZElkXS5uc2Z3CiAgICAgICAgKTsKICAgIH0KICAgIAogICAgLy8vIFRoaXMgaXMgY2FsbGVkIG9uIHRoZSBpbml0aWFsIGJ1eSBjYXJkLCB1c2VyIHRvIHVzZXIgYnV5IGlzIGF0IGJ1eUNhcmQoKQogICAgLy8vIEFtb3VudCBpcyBzZW50IHRvIGNvbnRyYWN0T3duZXIgYmFsYW5jZSBhbmQgZ2l2ZXRoIGdldCAxMCUgb2YgdGhpcyBhbW91bnQKICAgIGZ1bmN0aW9uIGluaXRpYWxCdXlDYXJkKHVpbnQ4IGNhcmRJZCwgc3RyaW5nIHRpdGxlLCBzdHJpbmcgdXJsLCBzdHJpbmcgaW1hZ2UpIHB1YmxpYwogICAgICAgIG9ubHlWYWxpZENhcmQoY2FyZElkKQogICAgICAgIHBheWFibGUKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgLy8gQ2hlY2sgc2VudCBhbW91bnQKICAgICAgICB1aW50IHByaWNlID0gY29tcHV0ZUluaXRpYWxQcmljZShjYXJkSWQpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByaWNlKTsKICAgICAgICAvLyBJZiBvd25lciBpcyAweDAsIHRoZW4gd2UgYXJlIHN1cmUgdGhhdAogICAgICAgIC8vIHRoaXMgaXMgdGhlIGluaXRpYWwgYnV5CiAgICAgICAgcmVxdWlyZShjYXJkU3RydWN0c1tjYXJkSWRdLm93bmVyID09IGFkZHJlc3MoMCkpOwoKICAgICAgICAvLyBGaWxsIGNhcmQKICAgICAgICBfZmlsbENhcmRTdHJ1Y3QoY2FyZElkLCBtc2cuc2VuZGVyLCB0aXRsZSwgdXJsLCBpbWFnZSk7CiAgICAgICAgLy8gU2V0IG5zZncgZmxhZyB0byBmYWxzZQogICAgICAgIGNhcmRTdHJ1Y3RzW2NhcmRJZF0ubnNmdyA9IGZhbHNlOwogICAgICAgIC8vIENvbnRyYWN0IGNyZWRpdCAxMCUgb2YgcHJpY2UgdG8gR2l2ZUVUSAogICAgICAgICBfYXBwbHlTaGFyZShjb250cmFjdE93bmVyLCBnaXZlRXRoQWRkcmVzcywgZ2l2ZUV0aEN1dCk7CiAgICAgICAgLy8gSW5pdGlhbGl6ZSBjYXJkIGRldGFpbHMKICAgICAgICBfaW5pdENhcmREZXRhaWxzKGNhcmRJZCwgcHJpY2UpOwogICAgICAgIC8vIEFkZCB0aGUgY2FyZCB0byBjYXJkTGlzdAogICAgICAgIGNhcmRMaXN0LnB1c2goY2FyZElkKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gUGVyZm9ybSBhIHVzZXIgdG8gdXNlciBidXkgdHJhbnNhY3Rpb24KICAgIC8vLyBDb250cmFjdCBvd25lciB0YWtlcyAxJSBjdXQgb24gZWFjaCBvZiB0aGlzIHRyYW5zYWN0aW9uCiAgICBmdW5jdGlvbiBidXlDYXJkKHVpbnQ4IGNhcmRJZCwgc3RyaW5nIHRpdGxlLCBzdHJpbmcgdXJsLCBzdHJpbmcgaW1hZ2UpIHB1YmxpYwogICAgICAgIG9ubHlWYWxpZENhcmQoY2FyZElkKQogICAgICAgIHBheWFibGUKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGlzIGlzIG5vdCBhbiBpbml0aWFsIGJ1eSwgaS5lLiB0aGF0IHRoZQogICAgICAgIC8vIGNhcmQgYmVsb25ncyB0byBzb21lb25lCiAgICAgICAgcmVxdWlyZShjYXJkU3RydWN0c1tjYXJkSWRdLm93bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIC8vIENoZWNrIGlmIGNhcmQgaXMgb24gc2FsZQogICAgICAgIHJlcXVpcmUoY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0uYXZhaWxhYmxlQnV5KTsKICAgICAgICAvLyBDaGVjayBzZW50IGFtb3VudAogICAgICAgIHVpbnQgcHJpY2UgPSBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5wcmljZTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBwcmljZSk7CiAgICAgICAgCiAgICAgICAgYWRkcmVzcyBwcmV2aW91c093bmVyID0gY2FyZFN0cnVjdHNbY2FyZElkXS5vd25lcjsKICAgICAgICAvLyBUYWtlIDElIGN1dCBvbiBidXkKICAgICAgICBfYXBwbHlTaGFyZShwcmV2aW91c093bmVyLCBjb250cmFjdE93bmVyLCBvd25lckJ1eUN1dCk7CiAgICAgICAgLy8gRmlsbCBjYXJkCiAgICAgICAgX2ZpbGxDYXJkU3RydWN0KGNhcmRJZCwgbXNnLnNlbmRlciwgdGl0bGUsIHVybCwgaW1hZ2UpOwogICAgICAgIC8vIFNldCBuc2Z3IGZsYWcgdG8gZmFsc2UKICAgICAgICBjYXJkU3RydWN0c1tjYXJkSWRdLm5zZncgPSBmYWxzZTsKICAgICAgICAvLyBEaXNhYmxlIHNlbGwgc3RhdHVzCiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0uYXZhaWxhYmxlQnV5ID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEFsbG93IGNhcmQgb3duZXIgdG8gZWRpdCBoaXMgY2FyZCBpbmZvcm1hdGlvbnMKICAgIGZ1bmN0aW9uIGVkaXRDYXJkKHVpbnQ4IGNhcmRJZCwgc3RyaW5nIHRpdGxlLCBzdHJpbmcgdXJsLCBzdHJpbmcgaW1hZ2UpIHB1YmxpYwogICAgICAgIG9ubHlWYWxpZENhcmQoY2FyZElkKQogICAgICAgIG9ubHlDYXJkT3duZXIoY2FyZElkKQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICAvLyBGaWxsIGNhcmQKICAgICAgICBfZmlsbENhcmRTdHJ1Y3QoY2FyZElkLCBtc2cuc2VuZGVyLCB0aXRsZSwgdXJsLCBpbWFnZSk7CiAgICAgICAgLy8gRGlzYWJsZSBzZWxsIHN0YXR1cwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBBbGxvdyBjYXJkIG93bmVyIHRvIHNldCBoaXMgY2FyZCBvbiBzYWxlIGF0IHNwZWNpZmljIHByaWNlCiAgICBmdW5jdGlvbiBzZWxsQ2FyZCh1aW50OCBjYXJkSWQsIHVpbnQgcHJpY2UpIHB1YmxpYwogICAgICAgIG9ubHlWYWxpZENhcmQoY2FyZElkKQogICAgICAgIG9ubHlDYXJkT3duZXIoY2FyZElkKQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5wcmljZSA9IHByaWNlOwogICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmF2YWlsYWJsZUJ1eSA9IHRydWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEFsbG93IGNhcmQgb3duZXIgdG8gY2FuY2VsIHNlbGwgb2ZmZXIKICAgIGZ1bmN0aW9uIGNhbmNlbFNlbGxDYXJkKHVpbnQ4IGNhcmRJZCkgcHVibGljCiAgICAgICAgb25seVZhbGlkQ2FyZChjYXJkSWQpCiAgICAgICAgb25seUNhcmRPd25lcihjYXJkSWQpCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmF2YWlsYWJsZUJ1eSA9IGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBBbGxvdyBjYXJkIG93bmVyIHRvIHNldCBoaXMgY2FyZCBvbiBsZWFzZSBhdCBmaXhlZCBwcmljZSBwZXIgYmxvY2sgYW5kIGR1cmF0aW9uCiAgICBmdW5jdGlvbiBzZXRMZWFzZUNhcmQodWludDggY2FyZElkLCB1aW50IHByaWNlTGVhc2UsIHVpbnQgbGVhc2VEdXJhdGlvbikgcHVibGljCiAgICAgICAgb25seVZhbGlkQ2FyZChjYXJkSWQpCiAgICAgICAgb25seUNhcmRPd25lcihjYXJkSWQpCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIC8vIENhcmQgY2Fubm90IGJlIG9uIHNhbGUgd2hlbiBzZXR0aW5nIGxlYXNlCiAgICAgICAgLy8gY2FuY2VsU2VsbENhcmQoKSBmaXJzdAogICAgICAgIHJlcXVpcmUoIWNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmF2YWlsYWJsZUJ1eSk7CiAgICAgICAgLy8gQ2FyZCBjYW5ub3QgYmUgc2V0IG9uIGxlYXNlIHdoaWxlIGN1cnJlbnRseSBsZWFzaW5nCiAgICAgICAgdWludCBfbGFzdExlYXNlSWQgPSBnZXRDYXJkTGVhc2VMZW5ndGgoY2FyZElkKTsKICAgICAgICB1aW50IF91bnRpbCA9IGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmxlYXNlQ2FyZFN0cnVjdHNbX2xhc3RMZWFzZUlkXS51bnRpbEJsb2NrOwogICAgICAgIHJlcXVpcmUoX3VudGlsIDwgYmxvY2subnVtYmVyKTsKCiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0ucHJpY2VMZWFzZSA9IHByaWNlTGVhc2U7CiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0uYXZhaWxhYmxlTGVhc2UgPSB0cnVlOwogICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmxlYXNlRHVyYXRpb24gPSBsZWFzZUR1cmF0aW9uOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBBbGxvdyBjYXJkIG93bmVyIHRvIGNhbmNlbCBsZWFzZSBvZmZlcgogICAgLy8vIE5vdGUgdGhhdCB0aGlzIGRvIG5vdCBpbnRlcnJ1cHQgY3VycmVudCBsZWFzZSBpZiBhbnkKICAgIGZ1bmN0aW9uIGNhbmNlbExlYXNlT2ZmZXIodWludDggY2FyZElkKSBwdWJsaWMKICAgICAgICBvbmx5VmFsaWRDYXJkKGNhcmRJZCkKICAgICAgICBvbmx5Q2FyZE93bmVyKGNhcmRJZCkKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0uYXZhaWxhYmxlTGVhc2UgPSBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQWxsb3cgZnV0dXJlIHRlbmFudCB0byBsZWFzZSBhIGNhcmQKICAgIGZ1bmN0aW9uIGxlYXNlQ2FyZCh1aW50OCBjYXJkSWQsIHN0cmluZyB0aXRsZSwgc3RyaW5nIHVybCwgc3RyaW5nIGltYWdlKSBwdWJsaWMKICAgICAgICBvbmx5VmFsaWRDYXJkKGNhcmRJZCkKICAgICAgICBwYXlhYmxlCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIC8vIENoZWNrIHRoYXQgY2FyZCBpcyBhdmFpYmxlIHRvIGxlYXNlCiAgICAgICAgcmVxdWlyZShjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5hdmFpbGFibGVMZWFzZSk7CiAgICAgICAgLy8gR2V0IHByaWNlIChwZXIgYmxvY2spIGFuZCBsZWFzZUR1cmF0aW9uIChibG9jaykKICAgICAgICB1aW50IHByaWNlID0gY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0ucHJpY2VMZWFzZTsKICAgICAgICB1aW50IGxlYXNlRHVyYXRpb24gPSBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5sZWFzZUR1cmF0aW9uOwogICAgICAgIHVpbnQgdG90YWxBbW91bnQgPSBwcmljZSAqIGxlYXNlRHVyYXRpb247CiAgICAgICAgLy8gQ2hlY2sgdGhhdCBhbW91bnQgc2VudCBpcyBzdWZmaWNpZW50CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gdG90YWxBbW91bnQpOwogICAgICAgIC8vIEdldCBuZXcgbGVhc2UgaWQKICAgICAgICB1aW50IGxlYXNlSWQgPSBnZXRDYXJkTGVhc2VMZW5ndGgoY2FyZElkKSArIDE7CiAgICAgICAgLy8gR2V0IHRoZSBibG9jayBudW1iZXIgb2YgbGVhc2UgZW5kCiAgICAgICAgdWludCB1bnRpbEJsb2NrID0gYmxvY2subnVtYmVyICsgbGVhc2VEdXJhdGlvbjsKICAgICAgICAvLyBUYWtlIDElIGN1dCBvbiBsZWFzZQogICAgICAgIGFkZHJlc3MgX2NhcmRPd25lciA9IGNhcmRTdHJ1Y3RzW2NhcmRJZF0ub3duZXI7CiAgICAgICAgX2FwcGx5U2hhcmUoX2NhcmRPd25lciwgY29udHJhY3RPd25lciwgb3duZXJCdXlDdXQpOwogICAgICAgIC8vIEZpbGwgbGVhc2VDYXJkU3RydWN0cwogICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmxlYXNlQ2FyZFN0cnVjdHNbbGVhc2VJZF0uaWQgPSBsZWFzZUlkOwogICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmxlYXNlQ2FyZFN0cnVjdHNbbGVhc2VJZF0udGVuYW50ID0gbXNnLnNlbmRlcjsKICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5sZWFzZUNhcmRTdHJ1Y3RzW2xlYXNlSWRdLnByaWNlID0gdG90YWxBbW91bnQ7CiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0ubGVhc2VDYXJkU3RydWN0c1tsZWFzZUlkXS51bnRpbEJsb2NrID0gdW50aWxCbG9jazsKICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5sZWFzZUNhcmRTdHJ1Y3RzW2xlYXNlSWRdLnRpdGxlID0gdGl0bGU7CiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0ubGVhc2VDYXJkU3RydWN0c1tsZWFzZUlkXS51cmwgPSB1cmw7CiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0ubGVhc2VDYXJkU3RydWN0c1tsZWFzZUlkXS5pbWFnZSA9IGltYWdlOwogICAgICAgIC8vIExlYXNlcyBhcmUgbm93IHVuYXZhaWxhYmxlIGZvciB0aGlzIGNhcmQKICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5hdmFpbGFibGVMZWFzZSA9IGZhbHNlOwogICAgICAgIC8vIEFkZCBsZWFzZSB0byBsZWFzZXMgbGlzdCBvZiBjb3JyZXNwb25kYW50IGNhcmREZXRhaWxzCiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0ubGVhc2VMaXN0LnB1c2gobGVhc2VJZCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEdldCBsYXN0IGxlYXNlIGZyb20gYSBjYXJkCiAgICBmdW5jdGlvbiBnZXRMYXN0TGVhc2UodWludDggY2FyZElkKSBwdWJsaWMgY29uc3RhbnQKICAgICAgICByZXR1cm5zKHVpbnQgbGVhc2VJbmRleCwgYWRkcmVzcyB0ZW5hbnQsIHVpbnQgdW50aWxCbG9jaywgc3RyaW5nIHRpdGxlLCBzdHJpbmcgdXJsLCBzdHJpbmcgaW1hZ2UpCiAgICB7CiAgICAgICAgdWludCBfbGVhc2VJbmRleCA9IGdldENhcmRMZWFzZUxlbmd0aChjYXJkSWQpOwogICAgICAgIHJldHVybiBnZXRMZWFzZShjYXJkSWQsIF9sZWFzZUluZGV4KTsKICAgIH0KCiAgICAvLy8gR2V0IGxlYXNlIGZyb20gY2FyZAogICAgZnVuY3Rpb24gZ2V0TGVhc2UodWludDggY2FyZElkLCB1aW50IGxlYXNlSWQpIHB1YmxpYyBjb25zdGFudAogICAgICAgIHJldHVybnModWludCBsZWFzZUluZGV4LCBhZGRyZXNzIHRlbmFudCwgdWludCB1bnRpbEJsb2NrLCBzdHJpbmcgdGl0bGUsIHN0cmluZyB1cmwsIHN0cmluZyBpbWFnZSkKICAgIHsKICAgICAgICByZXR1cm4oCiAgICAgICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmxlYXNlQ2FyZFN0cnVjdHNbbGVhc2VJZF0uaWQsCiAgICAgICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmxlYXNlQ2FyZFN0cnVjdHNbbGVhc2VJZF0udGVuYW50LAogICAgICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5sZWFzZUNhcmRTdHJ1Y3RzW2xlYXNlSWRdLnVudGlsQmxvY2ssCiAgICAgICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmxlYXNlQ2FyZFN0cnVjdHNbbGVhc2VJZF0udGl0bGUsCiAgICAgICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmxlYXNlQ2FyZFN0cnVjdHNbbGVhc2VJZF0udXJsLAogICAgICAgICAgICBjYXJkRGV0YWlsc1N0cnVjdHNbY2FyZElkXS5sZWFzZUNhcmRTdHJ1Y3RzW2xlYXNlSWRdLmltYWdlCiAgICAgICAgKTsKICAgIH0KCiAgICAvLy8gR2V0IGxlYXNlIGxpc3QgZnJvbSBhIGNhcmQKICAgIGZ1bmN0aW9uIGdldENhcmRMZWFzZUxlbmd0aCh1aW50OCBjYXJkSWQpIHB1YmxpYyBjb25zdGFudAogICAgICAgIHJldHVybnModWludCBjYXJkTGVhc2VzQ291bnQpCiAgICB7CiAgICAgICAgcmV0dXJuKGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmxlYXNlTGlzdC5sZW5ndGgpOwogICAgfQoKICAgIC8vLyBUcmFuc2ZlciB0aGUgb3duZXJzaGlwIG9mIGEgY2FyZAogICAgZnVuY3Rpb24gdHJhbnNmZXJDYXJkT3duZXJzaGlwKGFkZHJlc3MgdG8sIHVpbnQ4IGNhcmRJZCkgcHVibGljCiAgICAgIG9ubHlDYXJkT3duZXIoY2FyZElkKQogICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgLy8gVHJhbnNmZXIgY2FyZCBvd25lcnNoaXAKICAgICAgICBjYXJkU3RydWN0c1tjYXJkSWRdLm93bmVyID0gdG87CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vLyBSZXR1cm4gYmFsYW5jZSBmcm9tIHNlbmRlcgogICAgZnVuY3Rpb24gZ2V0QmFsYW5jZSgpIHB1YmxpYyB2aWV3CiAgICAgIHJldHVybnMgKHVpbnQgYW1vdW50KQogICAgewogICAgICAgIHJldHVybiBwZW5kaW5nV2l0aGRyYXdhbHNbbXNnLnNlbmRlcl07CiAgICB9CiAgICAKICAgIC8vLyBBbGxvdyBhZGRyZXNzIHRvIHdpdGhkcmF3IHRoZWlyIGJhbGFuY2UKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkgCiAgICB7CiAgICAgICAgdWludCBhbW91bnQgPSBwZW5kaW5nV2l0aGRyYXdhbHNbbXNnLnNlbmRlcl07CiAgICAgICAgLy8gUmVtZW1iZXIgdG8gemVybyB0aGUgcGVuZGluZyByZWZ1bmQgYmVmb3JlCiAgICAgICAgLy8gc2VuZGluZyB0byBwcmV2ZW50IHJlLWVudHJhbmN5IGF0dGFja3MKICAgICAgICBwZW5kaW5nV2l0aGRyYXdhbHNbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8vIENvbXB1dGUgaW5pdGlhbCBjYXJkIHByaWNlIChpbiB3ZWkpCiAgICBmdW5jdGlvbiBjb21wdXRlSW5pdGlhbFByaWNlKHVpbnQ4IGNhcmRJZCkgcHVibGljIHZpZXcKICAgICAgICBvbmx5VmFsaWRDYXJkKGNhcmRJZCkKICAgICAgICByZXR1cm5zICh1aW50IHByaWNlKQogICAgewogICAgICAgIC8vIDEgZXRoZXIgLSAwLjAxIGV0aGVyICogKGNhcmRJZCAtIDEpCiAgICAgICAgcmV0dXJuIGluaXRpYWxDYXJkUHJpY2UgLSAoKGluaXRpYWxDYXJkUHJpY2UgLyAxMDApICogKHVpbnQyNTYoY2FyZElkKSAtIDEpKTsKICAgIH0KCiAgICAvLy8gQWxsb3cgY29udHJhY3Qgb3duZXIgdG8gc2V0IE5TRlcgZmxhZyBvbiBhIGNhcmQKICAgIGZ1bmN0aW9uIHNldE5TRlcodWludDggY2FyZElkLCBib29sIGZsYWcpIHB1YmxpYwogICAgICAgIG9ubHlWYWxpZENhcmQoY2FyZElkKQogICAgICAgIG9ubHlDb250cmFjdE93bmVyKCkKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgY2FyZFN0cnVjdHNbY2FyZElkXS5uc2Z3ID0gZmxhZzsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gRmlsbCBDYXJkIHN0cnVjdAogICAgZnVuY3Rpb24gX2ZpbGxDYXJkU3RydWN0KHVpbnQ4IF9jYXJkSWQsIGFkZHJlc3MgX293bmVyLCBzdHJpbmcgX3RpdGxlLCBzdHJpbmcgX3VybCwgc3RyaW5nIF9pbWFnZSkgaW50ZXJuYWwKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgY2FyZFN0cnVjdHNbX2NhcmRJZF0ub3duZXIgPSBfb3duZXI7CiAgICAgICAgY2FyZFN0cnVjdHNbX2NhcmRJZF0udGl0bGUgPSBfdGl0bGU7CiAgICAgICAgY2FyZFN0cnVjdHNbX2NhcmRJZF0udXJsID0gX3VybDsKICAgICAgICBjYXJkU3RydWN0c1tfY2FyZElkXS5pbWFnZSA9IF9pbWFnZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gSW5pdGlhbGl6ZSBzZWxsIGNhcmQgZm9yIGZ1dHVyZQogICAgZnVuY3Rpb24gX2luaXRDYXJkRGV0YWlscyh1aW50OCBjYXJkSWQsIHVpbnQgcHJpY2UpIGludGVybmFsCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIC8vIHByaWNlTGVhc2UsIGxlYXNlRHVyYXRpb24gc2V0IHRvIGRlZmF1bHQgdmFsdWUoPSAwKQogICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLmlkID0gY2FyZElkOwogICAgICAgIGNhcmREZXRhaWxzU3RydWN0c1tjYXJkSWRdLnByaWNlID0gcHJpY2U7CiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0uYXZhaWxhYmxlQnV5ID0gZmFsc2U7CiAgICAgICAgY2FyZERldGFpbHNTdHJ1Y3RzW2NhcmRJZF0uYXZhaWxhYmxlTGVhc2UgPSBmYWxzZTsKICAgICAgICBjYXJkRGV0YWlsc0xpc3QucHVzaChjYXJkSWQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBTZW5kIHNwbGl0IGFtb3VudHMgdG8gcmVzcGVjdGl2ZSBiYWxhbmNlcwogICAgZnVuY3Rpb24gX2FwcGx5U2hhcmUoYWRkcmVzcyBfc2VsbGVyLCBhZGRyZXNzIF9hdWN0aW9uZWVyLCB1aW50IF9jdXQpIGludGVybmFsCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIC8vIENvbXB1dGUgc2hhcmUKICAgICAgICB1aW50MjU2IGF1Y3Rpb25lZXJDdXQgPSBfY29tcHV0ZUN1dChtc2cudmFsdWUsIF9jdXQpOwogICAgICAgIHVpbnQyNTYgc2VsbGVyUHJvY2VlZHMgPSBtc2cudmFsdWUgLSBhdWN0aW9uZWVyQ3V0OwogICAgICAgIC8vIENyZWRpdCBzZWxsZXIgYmFsYW5jZQogICAgICAgIHBlbmRpbmdXaXRoZHJhd2Fsc1tfc2VsbGVyXSArPSBzZWxsZXJQcm9jZWVkczsKICAgICAgICAvLyBDcmVkaXQgYXVjdGlvbm5lciBiYWxhbmNlCiAgICAgICAgcGVuZGluZ1dpdGhkcmF3YWxzW19hdWN0aW9uZWVyXSArPSBhdWN0aW9uZWVyQ3V0OwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBDb21wdXRlIF9jdXQgZnJvbSBhIF9wcmljZSAKICAgIGZ1bmN0aW9uIF9jb21wdXRlQ3V0KHVpbnQyNTYgX3ByaWNlLCB1aW50MjU2IF9jdXQpIGludGVybmFsIHB1cmUKICAgICAgICByZXR1cm5zICh1aW50MjU2KQogICAgewogICAgICAgIHJldHVybiBfcHJpY2UgKiBfY3V0IC8gMTAwMDA7CiAgICB9Cn0='.
	

]
