Class {
	#name : #SRTff1f9c77a0f1fd8f48cfeee58b714ca03420ddac,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTff1f9c77a0f1fd8f48cfeee58b714ca03420ddac >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8vIHZlcnNpb24gKFpLKQoKCmNvbnRyYWN0IGlFNFJvd0VzY3JvdyB7CglmdW5jdGlvbiBnZXROdW1HYW1lc1N0YXJ0ZWQoKSBjb25zdGFudCByZXR1cm5zIChpbnQgbmdhbWVzKTsKfQoKCmNvbnRyYWN0IEU0Um93RXNjcm93IGlzIGlFNFJvd0VzY3JvdyB7CgpldmVudCBTdGF0RXZlbnQoc3RyaW5nIG1zZyk7CmV2ZW50IFN0YXRFdmVudEkoc3RyaW5nIG1zZywgdWludCB2YWwpOwpldmVudCBTdGF0RXZlbnRBKHN0cmluZyBtc2csIGFkZHJlc3MgYWRkcik7CgoJdWludCBjb25zdGFudCBNQVhfUExBWUVSUyA9IDU7CgoJZW51bSBFbmRSZWFzb24gIHtlcldpbm5lciwgZXJUaW1lT3V0LCBlckNhbmNlbH0KCWVudW0gU2V0dGluZ1N0YXRlVmFsdWUgIHtkZWJ1ZywgcmVsZWFzZSwgbG9ja2VkUmVsZWFzZX0KCglzdHJ1Y3QgZ2FtZUluc3RhbmNlIHsKCQlhZGRyZXNzWzVdIHBsYXllcnM7CgkJdWludFs1XSBwbGF5ZXJQb3RzOwoJCXVpbnQgbnVtUGxheWVyczsKCgkJYm9vbCBhY3RpdmU7IC8vIGFjdGl2ZQoJCWJvb2wgYWxsb2NkOyAvLyAgYWxsb2NhdGVkIGFscmVhZHkuIAoJCXVpbnQgc3RhcnRlZDsgLy8gdGltZSBnYW1lIHN0YXJ0ZWQKCQl1aW50IGxhc3RNb3ZlZDsgLy8gdGltZSBnYW1lIGxhc3QgbW92ZWQKCQl1aW50IHBheW91dDsgLy8gcGF5b3V0IGFtb250CgkJYWRkcmVzcyB3aW5uZXI7IC8vIGFkZHJlc3Mgb2Ygd2lubmVyCgkJCgoJCUVuZFJlYXNvbiByZWFzb25FbmRlZDsgLy8gZW51bSByZWFzb24gb2YgZW5kZWQKCQkKCX0KCQoJc3RydWN0IGFyYml0ZXIgewoJCW1hcHBpbmcgKHVpbnQgPT4gdWludCkgIGdhbWVJbmRleGVzOyAvLyBnYW1lIGhhbmRsZXMKCgkJdWludCBhcmJUb2tlbjsgLy8gMiBieXRlcwoJCXVpbnQgZ2FtZVNsb3RzOyAvLyBhIGNvdW50ZXIgb2YgYWxsb2MnZCBnYW1lIHN0cnVjdHMgKHRoZXkgY2FuIGJlIHJldXNlZCkKCQl1aW50IGdhbWVzU3RhcnRlZDsgLy8gdG90YWwgZ2FtZXMgc3RhcnRlZAoJCXVpbnQgZ2FtZXNDb21wbGV0ZWQ7CgkJdWludCBnYW1lc0NhbmNlbGVkOyAvLyBhbHNvIHRpZWQKCQl1aW50IGdhbWVzVGltZWRvdXQ7CgkJdWludCBudW1QbGF5ZXJzOwoJCWJvb2wgcmVnaXN0ZXJlZDsgCgkJYm9vbCBsb2NrZWQ7Cgl9CgoKCWFkZHJlc3MgcHVibGljICBvd25lcjsgCS8vIG93bmVyIGlzIGFkZHJlc3MgdGhhdCBkZXBsb3llZCBjb250cmFjdAoJYWRkcmVzcyBwdWJsaWMgIHRva2VuUGFydG5lcjsgCS8vIHRoZSBhZGRyZXNzIG9mIHBhcnRuZXIgdGhhdCByZWNlaXZlcyByYWtlIGZlZXMKCXVpbnQgcHVibGljIG51bUFyYml0ZXJzOyAJLy8gbnVtYmVyIG9mIGFyYml0ZXJzCgoJaW50IG51bUdhbWVzU3RhcnRlZDsJLy8gdG90YWwgc3RhdHMgZnJvbSBhbGwgYXJiaXRlcnMKCgl1aW50IHB1YmxpYyBudW1HYW1lc0NvbXBsZXRlZDsgLy8gLi4uCgl1aW50IHB1YmxpYyBudW1HYW1lc0NhbmNlbGVkOyAJLy8gdGllZCBhbmQgY2FuY2VsZWQKCXVpbnQgcHVibGljIG51bUdhbWVzVGltZWRPdXQ7CS8vIC4uLgoKCXVpbnQgcHVibGljIGhvdXNlRmVlSG9sZG92ZXI7IC8vIGhvbGQgZmVlIHRpbGwgdGhyZXNob2xkCgl1aW50IHB1YmxpYyBsYXN0UGF5b3V0VGltZTsgCS8vIHRpbWVzdGFtcCBvZiBsYXN0IHBheW91dCB0aW1lCgoKCS8vIGNvbmZpZ3VyYWJsZXMKCXVpbnQgcHVibGljIGdhbWVUaW1lT3V0OwoJdWludCBwdWJsaWMgcmVnaXN0cmF0aW9uRmVlOwoJdWludCBwdWJsaWMgaG91c2VGZWVUaHJlc2hvbGQ7Cgl1aW50IHB1YmxpYyBwYXlvdXRJbnRlcnZhbDsKCgl1aW50IHJhR2FzOyAvLyBmb3IgcmVnaXN0ZXIgYXJiCgl1aW50IHNnR2FzOy8vIGZvciBzdGFydCBnYW1lCgl1aW50IHdwR2FzOyAvLyBmb3Igd2lubmVyIHBhaWQKCXVpbnQgcmZHYXM7IC8vIGZvciByZWZ1bmQKCXVpbnQgZmVlR2FzOyAvLyBmb3IgcmFrZSBmZWUgcGF5b3V0CgoJU2V0dGluZ1N0YXRlVmFsdWUgcHVibGljIHNldHRpbmdzU3RhdGUgPSBTZXR0aW5nU3RhdGVWYWx1ZS5kZWJ1ZzsgCgkKCgltYXBwaW5nIChhZGRyZXNzID0+IGFyYml0ZXIpICBhcmJpdGVyczsKCW1hcHBpbmcgKHVpbnQgPT4gYWRkcmVzcykgIGFyYml0ZXJUb2tlbnM7CgltYXBwaW5nICh1aW50ID0+IGFkZHJlc3MpICBhcmJpdGVySW5kZXhlczsKCW1hcHBpbmcgKHVpbnQgPT4gZ2FtZUluc3RhbmNlKSAgZ2FtZXM7CgoKCWZ1bmN0aW9uIEU0Um93RXNjcm93KCkgcHVibGljCgl7CgkJb3duZXIgPSBtc2cuc2VuZGVyOwoJfQoKCglmdW5jdGlvbiBhcHBseVNldHRpbmdzKFNldHRpbmdTdGF0ZVZhbHVlIF9zdGF0ZSwgdWludCBfZmVlLCB1aW50IF90aHJlc2hvbGQsIHVpbnQgX3RpbWVvdXQsIHVpbnQgX2ludGVydmFsKQoJewoJCWlmIChtc2cuc2VuZGVyICE9IG93bmVyKSAKCQkJdGhyb3c7CgoJCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQkvLyB0aGVzZSBpdGVtcyBhcmUgdHdlYWthYmxlIGZvciBnYW1lIG9wdGltaXphdGlvbgoJCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlob3VzZUZlZVRocmVzaG9sZCA9IF90aHJlc2hvbGQ7CgkJZ2FtZVRpbWVPdXQgPSBfdGltZW91dDsKCQlwYXlvdXRJbnRlcnZhbCA9IF9pbnRlcnZhbDsKCQoJCWlmIChzZXR0aW5nc1N0YXRlID09IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZFJlbGVhc2UpIHsKCQkJU3RhdEV2ZW50KCJTZXR0aW5ncyBUd2Vha2VkIik7CgkJCXJldHVybjsKCQl9CgogCSAJc2V0dGluZ3NTdGF0ZSA9IF9zdGF0ZTsKCQlyZWdpc3RyYXRpb25GZWUgPSBfZmVlOwoKCQkvLyBzZXQgZGVmYXVsdCBvcCBnYXMgLSAgYW55IGZ1dGhlciBzZXR0aW5ncyBkb25lIGluIHNldCB1cCBnYXMKCQlyYUdhcyA9IDE1MDAwMDsgCgkJc2dHYXMgPSAxMTAwMDA7CgkJd3BHYXMgPSAyMDAwMDsgCgkJcmZHYXMgPSAyMDAwMDsgCgkJZmVlR2FzID0gMzYwMDAwOyAKCgkJU3RhdEV2ZW50KCJTZXR0aW5ncyBDaGFuZ2VkIik7CgoJCgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gcmV0dXJuIGFuIGFyYml0ZXIgdG9rZW4gZnJvbSBhbiBoR2FtZQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gQXJiVG9rRnJvbUhHYW1lKHVpbnQgX2hHYW1lKSByZXR1cm5zICh1aW50IF90b2spCgl7IAoJCV90b2sgPSAgKF9oR2FtZSAvICgyICoqIDQ4KSkgJiAweGZmZmY7Cgl9CgoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIHN1aWNpZGUgdGhlIGNvbnRyYWN0LCBub3QgY2FsbGVkIGZvciByZWxlYXNlCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiBIYXJhS2lyaSgpCgl7CgkJaWYgKChtc2cuc2VuZGVyID09IG93bmVyKSAmJiAoc2V0dGluZ3NTdGF0ZSAhPSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWRSZWxlYXNlKSkKCQkJICBzdWljaWRlKHRva2VuUGFydG5lcik7CgkJZWxzZQoJCQlTdGF0RXZlbnQoIktpbGwgYXR0ZW1wdCBmYWlsZWQiKTsKCX0KCgoKCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBkZWZhdWx0IGZ1bmN0aW9uCgkvLyB3aG8gYXJlIHdlIHRvIGxvb2sgYSBnaWZ0LWhvcnNlIGluIHRoZSBtb3V0aD8KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIAlmdW5jdGlvbigpIHBheWFibGUgIHsKCQlTdGF0RXZlbnQoInRoYW5rcyEiKTsKICAJfQoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBjaGVjayBhY3RpdmUgZ2FtZSBhbmQgdmFsaWQgcGxheWVyLCByZXR1cm4gcGxheWVyIGluZGV4CgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIHZhbGlkUGxheWVyKHVpbnQgX2hHYW1lLCBhZGRyZXNzIF9hZGRyKSAgaW50ZXJuYWwgcmV0dXJucyggYm9vbCBfdmFsaWQsIHVpbnQgX3BpZHgpCgl7CgkJX3ZhbGlkID0gZmFsc2U7CgkJaWYgKGFjdGl2ZUdhbWUoX2hHYW1lKSkgewoJCQlmb3IgKHVpbnQgaSA9IDA7IGkgPCBnYW1lc1tfaEdhbWVdLm51bVBsYXllcnM7IGkrKykgewoJCQkJaWYgKGdhbWVzW19oR2FtZV0ucGxheWVyc1tpXSA9PSBfYWRkcikgewoJCQkJCV92YWxpZD10cnVlOwoJCQkJCV9waWR4ID0gaTsKCQkJCQlicmVhazsKCQkJCX0KCQkJfQoJCX0JCQkKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gY2hlY2sgdmFsaWQgcGxheWVyLCByZXR1cm4gcGxheWVyIGluZGV4CgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIHZhbGlkUGxheWVyMih1aW50IF9oR2FtZSwgYWRkcmVzcyBfYWRkcikgaW50ZXJuYWwgIHJldHVybnMoIGJvb2wgX3ZhbGlkLCB1aW50IF9waWR4KQoJewoJCV92YWxpZCA9IGZhbHNlOwoJCWZvciAodWludCBpID0gMDsgaSA8IGdhbWVzW19oR2FtZV0ubnVtUGxheWVyczsgaSsrKSB7CgkJCWlmIChnYW1lc1tfaEdhbWVdLnBsYXllcnNbaV0gPT0gX2FkZHIpIHsKCQkJCV92YWxpZD10cnVlOwoJCQkJX3BpZHggPSBpOwoJCQkJYnJlYWs7CgkJCX0KCQl9Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIGNoZWNrIHRoZSBhcmJpdGVyIGlzIHZhbGlkIGJ5IGNvbXBhcmluZyB0b2tlbgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIHZhbGlkQXJiKGFkZHJlc3MgX2FkZHIsIHVpbnQgX3RvaykgaW50ZXJuYWwgIHJldHVybnMoIGJvb2wgX3ZhbGlkKQoJewoJCV92YWxpZCA9IGZhbHNlOwoKCQlpZiAoKGFyYml0ZXJzW19hZGRyXS5yZWdpc3RlcmVkKQoJCQkmJiAoYXJiaXRlcnNbX2FkZHJdLmFyYlRva2VuID09IF90b2spKSAKCQkJX3ZhbGlkID0gdHJ1ZTsKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gY2hlY2sgdGhlIGFyYml0ZXIgaXMgdmFsaWQgd2l0aG91dCBjb21wYXJpbmcgdG9rZW4KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiB2YWxpZEFyYjIoYWRkcmVzcyBfYWRkcikgaW50ZXJuYWwgIHJldHVybnMoIGJvb2wgX3ZhbGlkKQoJewoJCV92YWxpZCA9IGZhbHNlOwoJCWlmIChhcmJpdGVyc1tfYWRkcl0ucmVnaXN0ZXJlZCkKCQkJX3ZhbGlkID0gdHJ1ZTsKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gY2hlY2sgaWYgYXJiaXRlciBpcyBsb2NrZWQgb3V0CgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gYXJiTG9ja2VkKGFkZHJlc3MgX2FkZHIpIGludGVybmFsICByZXR1cm5zKCBib29sIF9sb2NrZWQpCgl7CgkJX2xvY2tlZCA9IGZhbHNlOwoJCWlmICh2YWxpZEFyYjIoX2FkZHIpKSAKCQkJX2xvY2tlZCA9IGFyYml0ZXJzW19hZGRyXS5sb2NrZWQ7Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIHJldHVybiBpZiBnYW1lIGlzIGFjdGl2ZQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIGFjdGl2ZUdhbWUodWludCBfaEdhbWUpIGludGVybmFsICByZXR1cm5zKCBib29sIF92YWxpZCkKCXsKCQlfdmFsaWQgPSBmYWxzZTsKCQlpZiAoKF9oR2FtZSA+IDApCgkJCSYmIChnYW1lc1tfaEdhbWVdLmFjdGl2ZSkpCgkJCV92YWxpZCA9IHRydWU7Cgl9CgoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyByZWdpc3RlciBnYW1lIGFyYml0ZXIsIG1heCBwbGF5ZXJzIG9mIDUsIHBhc3MgaW4gZXhhY3QgcmVnaXN0cmF0aW9uIGZlZQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIHJlZ2lzdGVyQXJiaXRlcih1aW50IF9udW1QbGF5ZXJzLCB1aW50IF9hcmJUb2tlbikgcHVibGljIHBheWFibGUgCgl7CgoJCWlmIChtc2cudmFsdWUgIT0gcmVnaXN0cmF0aW9uRmVlKSB7CgkJCXRocm93OyAgLy9JbnN1ZmZpY2llbnQgRmVlCgkJfQoKCQlpZiAoX2FyYlRva2VuID09IDApIHsKCQkJdGhyb3c7IC8vIGludmFsaWQgdG9rZW4KCQl9CgoJCWlmIChhcmJUb2tlbkV4aXN0cyhfYXJiVG9rZW4gJiAweGZmZmYpKSB7CgkJCXRocm93OyAvLyBUb2tlbiBBbHJlYWR5IEV4aXN0cwoJCX0KCgkJaWYgKGFyYml0ZXJzW21zZy5zZW5kZXJdLnJlZ2lzdGVyZWQpIHsKCQkJdGhyb3c7IC8vIEFyYiBBbHJlYWR5IFJlZ2lzdGVyZWQKCQl9CgkJCgkJaWYgKF9udW1QbGF5ZXJzID4gTUFYX1BMQVlFUlMpIHsKCQkJdGhyb3c7IC8vIEV4Y2VlZHMgTWF4IFBsYXllcnMKCQl9CgoJCWFyYml0ZXJzW21zZy5zZW5kZXJdLmdhbWVzU3RhcnRlZCA9IDA7CgkJYXJiaXRlcnNbbXNnLnNlbmRlcl0uZ2FtZXNDb21wbGV0ZWQgPSAwOwoJCWFyYml0ZXJzW21zZy5zZW5kZXJdLmdhbWVzQ2FuY2VsZWQgPSAwOyAKCQlhcmJpdGVyc1ttc2cuc2VuZGVyXS5nYW1lc1RpbWVkb3V0ID0gMDsKCQlhcmJpdGVyc1ttc2cuc2VuZGVyXS5sb2NrZWQgPSBmYWxzZTsKCQlhcmJpdGVyc1ttc2cuc2VuZGVyXS5hcmJUb2tlbiA9IF9hcmJUb2tlbiAmIDB4ZmZmZjsKCQlhcmJpdGVyc1ttc2cuc2VuZGVyXS5udW1QbGF5ZXJzID0gX251bVBsYXllcnM7CgkJYXJiaXRlcnNbbXNnLnNlbmRlcl0ucmVnaXN0ZXJlZCA9IHRydWU7CgoJCWFyYml0ZXJUb2tlbnNbKF9hcmJUb2tlbiAmIDB4ZmZmZildID0gbXNnLnNlbmRlcjsKCQlhcmJpdGVySW5kZXhlc1tudW1BcmJpdGVycysrXSA9IG1zZy5zZW5kZXI7CgkKCgkJaWYgKCF0b2tlblBhcnRuZXIuY2FsbC5nYXMocmFHYXMpLnZhbHVlKG1zZy52YWx1ZSkoKSkgewoJCQkvL1N0YXR2ZW50KCJTZW5kIEVycm9yIik7IC8vIGV2ZW50IG5ldmVyIHJlZ2lzdGVycwoJCSAgICAgICAgdGhyb3c7CgkJfQoJCVN0YXRFdmVudEkoIkFyYiBBZGRlZCIsIF9hcmJUb2tlbik7Cgl9CgoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBzdGFydCBnYW1lLiAgcGFzcyBpbiB2YWxpZCBoR2FtZSBjb250YWluaW5nIHRva2VuIGluIHRvcCB0d28gYnl0ZXMKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiBzdGFydEdhbWUodWludCBfaEdhbWUsIGludCBfaGtNYXgsIGFkZHJlc3NbXSBfcGxheWVycykgcHVibGljIAoKCXsKCQl1aW50IG50b2sgPSBBcmJUb2tGcm9tSEdhbWUoX2hHYW1lKTsKCQlpZiAoIXZhbGlkQXJiKG1zZy5zZW5kZXIsIG50b2sgKSkgewoJCQlTdGF0RXZlbnQoIkludmFsaWQgQXJiIik7CgkJCXJldHVybjsKCQl9CgoKCQlpZiAoYXJiTG9ja2VkKG1zZy5zZW5kZXIpKSB7CgkJCVN0YXRFdmVudCgiQXJiIExvY2tlZCIpOwoJCQlyZXR1cm47IAoJCX0KCgkJYXJiaXRlciB4YXJiID0gYXJiaXRlcnNbbXNnLnNlbmRlcl07CgkJaWYgKF9wbGF5ZXJzLmxlbmd0aCAhPSB4YXJiLm51bVBsYXllcnMpIHsgCgkJCVN0YXRFdmVudCgiSW5jb3JyZWN0IG51bSBwbGF5ZXJzIik7CgkJCXJldHVybjsgCgkJfQoKCQlpZiAoZ2FtZXNbX2hHYW1lXS5hY3RpdmUpIHsKCQkJLy8gZ3VhcmQtcmFpbC4ganVzdCBpbiBjYXNlIHRvIHJldHVybiBmdW5kcwoJCQlhYm9ydEdhbWUobXNnLnNlbmRlciwgX2hHYW1lLCBFbmRSZWFzb24uZXJDYW5jZWwpOwoKCQl9IGVsc2UgaWYgKF9oa01heCA+IDApIHsKCQkJaG91c2VLZWVwKF9oa01heCwgbnRvayk7IAoJCX0KCgkJaWYgKCFnYW1lc1tfaEdhbWVdLmFsbG9jZCkgewoJCQlnYW1lc1tfaEdhbWVdLmFsbG9jZCA9IHRydWU7CgkJCXhhcmIuZ2FtZUluZGV4ZXNbeGFyYi5nYW1lU2xvdHMrK10gPSBfaEdhbWU7CgkJfSAKCQludW1HYW1lc1N0YXJ0ZWQrKzsgLy8gYWx3YXlzIGluYyB0aGlzIG9uZQoJCXhhcmIuZ2FtZXNTdGFydGVkKys7CgoJCWdhbWVzW19oR2FtZV0uYWN0aXZlID0gdHJ1ZTsKCQlnYW1lc1tfaEdhbWVdLnN0YXJ0ZWQgPSBub3c7IAoJCWdhbWVzW19oR2FtZV0ubGFzdE1vdmVkID0gbm93OyAKCQlnYW1lc1tfaEdhbWVdLnBheW91dCA9IDA7IAoJCWdhbWVzW19oR2FtZV0ud2lubmVyID0gYWRkcmVzcygwKTsKCgkJZ2FtZXNbX2hHYW1lXS5udW1QbGF5ZXJzID0gX3BsYXllcnMubGVuZ3RoOyAvLyB3ZSdsbCBiZSB0aGUganVkZ2Ugb2YgaG93IG1hbnkgdW5pcXVlIHBsYXllcnMKCQlmb3IgKHVpbnQgaSA9IDA7IGk8IF9wbGF5ZXJzLmxlbmd0aCAmJiBpIDwgTUFYX1BMQVlFUlM7IGkrKykgewoJICAgICAgICAgICAgZ2FtZXNbX2hHYW1lXS5wbGF5ZXJzW2ldID0gX3BsYXllcnNbaV07CgkJICAgIGdhbWVzW19oR2FtZV0ucGxheWVyUG90c1tpXSA9IDA7CgkJfQoKCQlTdGF0RXZlbnRJKCJHYW1lIEFkZGVkIiwgX2hHYW1lKTsKCQkKCgl9CgkKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBjbGVhbiB1cCBnYW1lLCBzZXQgdG8gaW5hY3RpdmUsIHJlZnVuZCBhbnkgYmFsYW5jZXMKCS8vIGNhbGxlZCBieSBob3VzZWtlZXAgT05MWQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIGFib3J0R2FtZShhZGRyZXNzIF9hcmIsIHVpbnQgIF9oR2FtZSwgRW5kUmVhc29uIF9yZWFzb24pIHByaXZhdGUgcmV0dXJucyhib29sIF9zdWNjZXNzKQoJewoJICAgICBnYW1lSW5zdGFuY2UgbkdhbWUgPSBnYW1lc1tfaEdhbWVdOwoJICAgICAKCQkvLyBmaW5kIGdhbWUgaW4gZ2FtZSBpZCwgCgkJaWYgKG5HYW1lLmFjdGl2ZSkgewoJCQlfc3VjY2VzcyA9IHRydWU7CgkJCWZvciAodWludCBpID0gMDsgaSA8IG5HYW1lLm51bVBsYXllcnM7IGkrKykgewoJCQkJaWYgKG5HYW1lLnBsYXllclBvdHNbaV0gPiAwKSB7CgkJCQkJYWRkcmVzcyBhID0gbkdhbWUucGxheWVyc1tpXTsKCQkJCQl1aW50IG5zZW5kID0gbkdhbWUucGxheWVyUG90c1tpXTsKCQkJCQluR2FtZS5wbGF5ZXJQb3RzW2ldID0gMDsKCQkJCQlpZiAoIWEuY2FsbC5nYXMocmZHYXMpLnZhbHVlKG5zZW5kKSgpKSB7CgkJCQkJCWhvdXNlRmVlSG9sZG92ZXIgKz0gbnNlbmQ7IC8vIGNhbm5vdCByZWZ1bmQgZHVlIHRvIGVycm9yLCBnaXZlIHRvIHRoZSBob3VzZQoJCQkJCSAgICAgICAgU3RhdEV2ZW50QSgiQ2Fubm90IFJlZnVuZCBBZGRyZXNzIiwgYSk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCW5HYW1lLmFjdGl2ZSA9IGZhbHNlOwoJCQluR2FtZS5yZWFzb25FbmRlZCA9IF9yZWFzb247CgkJCWlmIChfcmVhc29uID09IEVuZFJlYXNvbi5lckNhbmNlbCkgewoJCQkJbnVtR2FtZXNDYW5jZWxlZCsrOwoJCQkJYXJiaXRlcnNbX2FyYl0uZ2FtZXNDYW5jZWxlZCsrOwoJCQkJU3RhdEV2ZW50KCJHYW1lIGNhbmNlbGVkIik7CgkJCX0gZWxzZSBpZiAoX3JlYXNvbiA9PSBFbmRSZWFzb24uZXJUaW1lT3V0KSB7CgkJCQludW1HYW1lc1RpbWVkT3V0Kys7CgkJCQlhcmJpdGVyc1tfYXJiXS5nYW1lc1RpbWVkb3V0Kys7CgkJCQlTdGF0RXZlbnQoIkdhbWUgdGltZWQgb3V0Iik7CgkJCX0gZWxzZSAKCQkJCVN0YXRFdmVudCgiR2FtZSBhYm9ydGVkIik7CgkJfQoJfQoKCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gY2FsbGVkIGJ5IGFyYml0ZXIgd2hlbiB3aW5uZXIgaXMgZGVjaWRlZAoJLy8gKnBhc3MgaW4gaGlnaCBudW0gZm9yIHdpbm5lcmJhbCBmb3IgdGllIGdhbWVzCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gd2lubmVyRGVjaWRlZCh1aW50IF9oR2FtZSwgYWRkcmVzcyBfd2lubmVyLCB1aW50IF93aW5uZXJCYWwpIHB1YmxpYwoJewoKCQlpZiAoIXZhbGlkQXJiKG1zZy5zZW5kZXIsIEFyYlRva0Zyb21IR2FtZShfaEdhbWUpKSkgewoJCQlTdGF0RXZlbnQoIkludmFsaWQgQXJiIik7CQoJCQlyZXR1cm47IC8vIG5vIHRocm93IG5vIGNoYW5nZSBtYWRlCgkJfQoKCQl2YXIgKHZhbGlkLCBwaWR4KSA9IHZhbGlkUGxheWVyKF9oR2FtZSwgX3dpbm5lcik7CgkJaWYgKCF2YWxpZCkgewoJCQlTdGF0RXZlbnQoIkludmFsaWQgUGxheWVyIik7CQoJCQlyZXR1cm47CgkJfQoKCQlhcmJpdGVyIHhhcmIgPSBhcmJpdGVyc1ttc2cuc2VuZGVyXTsKCQlnYW1lSW5zdGFuY2UgeGdhbWUgPSBnYW1lc1tfaEdhbWVdOwoKCQl1aW50IHRvdGFsUG90ID0gMDsKCgkJaWYgKHhnYW1lLnBsYXllclBvdHNbcGlkeF0gPCBfd2lubmVyQmFsKSB7CgkJICAgIGFib3J0R2FtZShtc2cuc2VuZGVyLCBfaEdhbWUsIEVuZFJlYXNvbi5lckNhbmNlbCk7CiAgCQkgICAgcmV0dXJuOwoJCX0KCgkJZm9yICh1aW50IGkgPSAwOyBpIDwgeGdhbWUubnVtUGxheWVyczsgaSsrKSB7CgkJCXRvdGFsUG90ICs9IHhnYW1lLnBsYXllclBvdHNbaV07CgkJfQoJCQoJCXVpbnQgbnBvcnRpb247CgkJdWludCBucmVtbmFudDsKCQlpZiAodG90YWxQb3QgPiAwKSB7CgkJIAlucG9ydGlvbiA9IHRvdGFsUG90LzUwOyAvLyAyIHBlcmNlbnQgZml4ZWQKCQkJbnJlbW5hbnQgPSB0b3RhbFBvdC1ucG9ydGlvbjsKCQl9IGVsc2UgewoJCQlucG9ydGlvbiA9IDA7CgkJCW5yZW1uYW50ID0gMDsKCQl9CgkJCgoJCXhnYW1lLmxhc3RNb3ZlZCA9IG5vdzsKCQl4Z2FtZS5hY3RpdmUgPSBmYWxzZTsKCQl4Z2FtZS5yZWFzb25FbmRlZCA9IEVuZFJlYXNvbi5lcldpbm5lcjsKCQl4Z2FtZS53aW5uZXIgPSBfd2lubmVyOwoJCXhnYW1lLnBheW91dCA9IG5yZW1uYW50OwoJCQoJCWlmIChucG9ydGlvbiA+IDApIHsKCQkJaG91c2VGZWVIb2xkb3ZlciArPSBucG9ydGlvbjsKCQkJaWYgKChob3VzZUZlZUhvbGRvdmVyID4gaG91c2VGZWVUaHJlc2hvbGQpCgkJCQkmJiAobm93ID4gKGxhc3RQYXlvdXRUaW1lICsgcGF5b3V0SW50ZXJ2YWwpKSkgewoJCQkJdWludCBudG1waG8gPSBob3VzZUZlZUhvbGRvdmVyOwoJCQkJaG91c2VGZWVIb2xkb3ZlciA9IDA7CgkJCQlsYXN0UGF5b3V0VGltZSA9IG5vdzsgLy8gcmVzZXQgcmVnYXJkbGVzcyBvZiBzdWNjZWVkL2ZhaWwKCQkJCWlmICghdG9rZW5QYXJ0bmVyLmNhbGwuZ2FzKGZlZUdhcykudmFsdWUobnRtcGhvKSgpKSB7CgkJCQkJaG91c2VGZWVIb2xkb3ZlciA9IG50bXBobzsgLy8gcHV0IGl0IGJhY2sKCQkJCQlTdGF0RXZlbnQoIkhvdXNlLUZlZSBFcnJvcjEiKTsKCQkJCX0gCgkJCX0KCQl9CgkKCQlmb3IgKGkgPSAwOyBpIDwgeGdhbWUubnVtUGxheWVyczsgaSsrKSB7CgkJCXhnYW1lLnBsYXllclBvdHNbaV0gPSAwOwoJCX0KCgkJeGFyYi5nYW1lc0NvbXBsZXRlZCsrOwoJCW51bUdhbWVzQ29tcGxldGVkKys7CgkJaWYgKG5yZW1uYW50ID4gMCkgewoJCQlpZiAoIV93aW5uZXIuY2FsbC5nYXMod3BHYXMpLnZhbHVlKHVpbnQobnJlbW5hbnQpKSgpKSB7CgkJCQkvLyBTdGF0RXZlbnQoIlNlbmQgRXJyb3IiKTsKCQkJICAgICAgICB0aHJvdzsgLy8gaWYgeW91IGNhbnQgcGF5IHRoZSB3aW5uZXIgLSB2ZXJ5IGJhZAoJCQl9IGVsc2UgewoJCQkJU3RhdEV2ZW50SSgiV2lubmVyIFBhaWQiLCBfaEdhbWUpOwkJCgkJCX0KCQl9Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIGhhbmRsZSBhIGJldCBtYWRlIGJ5IGEgcGxheWVyLCB2YWxpZGF0ZSB0aGUgcGxheWVyIGFuZCBnYW1lCgkvLyBhZGQgdG8gcGxheWVycyBiYWxhbmNlCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gaGFuZGxlQmV0KHVpbnQgX2hHYW1lKSBwdWJsaWMgcGF5YWJsZSAKCXsKCQlhZGRyZXNzIG5hcmIgPSBhcmJpdGVyVG9rZW5zW0FyYlRva0Zyb21IR2FtZShfaEdhbWUpXTsKCQlpZiAobmFyYiA9PSBhZGRyZXNzKDApKSB7CgkJCXRocm93OyAvLyAiSW52YWxpZCBoR2FtZSIKCQl9CgoJCXZhciAodmFsaWQsIHBpZHgpID0gdmFsaWRQbGF5ZXIoX2hHYW1lLCBtc2cuc2VuZGVyKTsKCQlpZiAoIXZhbGlkKSB7CgkJCXRocm93OyAvLyAiSW52YWxpZCBQbGF5ZXIiCgkJfQoKCQlnYW1lc1tfaEdhbWVdLnBsYXllclBvdHNbcGlkeF0gKz0gbXNnLnZhbHVlOwoJCWdhbWVzW19oR2FtZV0ubGFzdE1vdmVkID0gbm93OwoKCQlTdGF0RXZlbnRJKCJCZXQgQWRkZWQiLCBfaEdhbWUpOwoKCX0KCgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIHJldHVybiBpZiBhcmIgdG9rZW4gZXhpc3RzCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gYXJiVG9rZW5FeGlzdHModWludCBfdG9rKSBjb25zdGFudCByZXR1cm5zIChib29sIF9leGlzdHMpCgl7CgkJX2V4aXN0cyA9IGZhbHNlOwoJCWlmICgoX3RvayA+IDApCgkJCSYmIChhcmJpdGVyVG9rZW5zW190b2tdICE9IGFkZHJlc3MoMCkpCgkJCSYmIGFyYml0ZXJzW2FyYml0ZXJUb2tlbnNbX3Rva11dLnJlZ2lzdGVyZWQpCgkJCV9leGlzdHMgPSB0cnVlOwoKCX0KCgoKCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gY2FsbGVkIGJ5IGljbyB0b2tlbiBjb250cmFjdCAKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiBnZXROdW1HYW1lc1N0YXJ0ZWQoKSBjb25zdGFudCByZXR1cm5zIChpbnQgX2dhbWVzKSAKCXsKCQlfZ2FtZXMgPSBudW1HYW1lc1N0YXJ0ZWQ7Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIHJldHVybiBhcmJpdGVyIGdhbWUgc3RhdHMKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiBnZXRBcmJJbmZvKHVpbnQgX2lkeCkgY29uc3RhbnQgIHJldHVybnMgKGFkZHJlc3MgX2FkZHIsIHVpbnQgX3N0YXJ0ZWQsIHVpbnQgX2NvbXBsZXRlZCwgdWludCBfY2FuY2VsZWQsIHVpbnQgX3RpbWVkT3V0KSAKCXsKCQlpZiAoX2lkeCA+PSBudW1BcmJpdGVycykgewoJCQlTdGF0RXZlbnQoIkludmFsaWQgQXJiIik7CgkJCXJldHVybjsKCQl9CgkJX2FkZHIgPSBhcmJpdGVySW5kZXhlc1tfaWR4XTsKCQlpZiAoKF9hZGRyID09IGFkZHJlc3MoMCkpCgkJCXx8ICghYXJiaXRlcnNbX2FkZHJdLnJlZ2lzdGVyZWQpKSB7CgkJCVN0YXRFdmVudCgiSW52YWxpZCBBcmIiKTsKCQkJcmV0dXJuOwoJCX0KCQlhcmJpdGVyIHhhcmIgPSBhcmJpdGVyc1tfYWRkcl07CgkJX3N0YXJ0ZWQgPSB4YXJiLmdhbWVzU3RhcnRlZDsKCQlfY29tcGxldGVkID0geGFyYi5nYW1lc0NvbXBsZXRlZDsKCQlfdGltZWRPdXQgPSB4YXJiLmdhbWVzVGltZWRvdXQ7CgkJX2NhbmNlbGVkID0geGFyYi5nYW1lc0NhbmNlbGVkOwoJfQoKCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gc2NhbiBmb3IgYSBnYW1lIDEwIG1pbnV0ZXMgb2xkCgkvLyBpZiBmb3VuZCBhYm9ydCB0aGUgZ2FtZSwgY2F1c2luZyBmdW5kcyB0byBiZSByZXR1cm5lZAoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIGhvdXNlS2VlcChpbnQgX21heCwgdWludCBfYXJiVG9rZW4pIHB1YmxpYwoJewkKCQl1aW50IGdpOwoJCWFkZHJlc3MgYTsKCQlpbnQgYWJvcnRlZCA9IDA7CgkJCgkJYXJiaXRlciB4YXJiID0gYXJiaXRlcnNbbXNnLnNlbmRlcl07Ly8gaGF2ZSB0byBzZXQgaXQgdG8gc29tZXRoaW5nCgkgICAgICAgIAogICAgICAgICAKCQlpZiAobXNnLnNlbmRlciA9PSBvd25lcikgewoJCQlmb3IgKHVpbnQgYXIgPSAwOyAoYXIgPCBudW1BcmJpdGVycykgJiYgKGFib3J0ZWQgPCBfbWF4KSA7IGFyKyspIHsKCQkJICAgIGEgPSBhcmJpdGVySW5kZXhlc1thcl07CgkJCSAgICB4YXJiID0gYXJiaXRlcnNbYV07ICAgIAoKCQkJICAgIGZvciAoIGdpID0gMDsgKGdpIDwgeGFyYi5nYW1lU2xvdHMpICYmIChhYm9ydGVkIDwgX21heCk7IGdpKyspIHsKCQkJCWdhbWVJbnN0YW5jZSBuZ2FtZTAgPSBnYW1lc1t4YXJiLmdhbWVJbmRleGVzW2dpXV07CgkJCQlpZiAoKG5nYW1lMC5hY3RpdmUpCgkJCQkgICAgJiYgKChub3cgLSBuZ2FtZTAubGFzdE1vdmVkKSA+IGdhbWVUaW1lT3V0KSkgewoJCQkJCWFib3J0R2FtZShhLCB4YXJiLmdhbWVJbmRleGVzW2dpXSwgRW5kUmVhc29uLmVyVGltZU91dCk7CgkJCQkJKythYm9ydGVkOwoJCQkJfQoJCQkgICAgfQoJCQl9CgoJCX0gZWxzZSB7CgkJCWlmICghdmFsaWRBcmIobXNnLnNlbmRlciwgX2FyYlRva2VuKSkKCQkJCVN0YXRFdmVudCgiSG91c2VrZWVwIGludmFsaWQgYXJiaXRlciIpOwoJCQllbHNlIHsKCQkJICAgIGEgPSBtc2cuc2VuZGVyOwoJCQkgICAgeGFyYiA9IGFyYml0ZXJzW2FdOyAgICAKCQkJICAgIGZvciAoZ2kgPSAwOyAoZ2kgPCB4YXJiLmdhbWVTbG90cykgJiYgKGFib3J0ZWQgPCBfbWF4KTsgZ2krKykgewoJCQkJZ2FtZUluc3RhbmNlIG5nYW1lMSA9IGdhbWVzW3hhcmIuZ2FtZUluZGV4ZXNbZ2ldXTsKCQkJCWlmICgobmdhbWUxLmFjdGl2ZSkKCQkJCSAgICAmJiAoKG5vdyAtIG5nYW1lMS5sYXN0TW92ZWQpID4gZ2FtZVRpbWVPdXQpKSB7CgkJCQkJYWJvcnRHYW1lKGEsIHhhcmIuZ2FtZUluZGV4ZXNbZ2ldLCBFbmRSZWFzb24uZXJUaW1lT3V0KTsKCQkJCQkrK2Fib3J0ZWQ7CgkJCQl9CgkJCSAgICB9CgoJCQl9CQoJCX0KCX0KCgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIHJldHVybiBnYW1lIGluZm8KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiBnZXRHYW1lSW5mbyh1aW50IF9oR2FtZSkgIGNvbnN0YW50ICByZXR1cm5zIChFbmRSZWFzb24gX3JlYXNvbiwgdWludCBfcGxheWVycywgdWludCBfcGF5b3V0LCBib29sIF9hY3RpdmUsIGFkZHJlc3MgX3dpbm5lciApCgl7CgkJZ2FtZUluc3RhbmNlIG5nYW1lID0gZ2FtZXNbX2hHYW1lXTsKCQlfYWN0aXZlID0gbmdhbWUuYWN0aXZlOwoJCV9wbGF5ZXJzID0gbmdhbWUubnVtUGxheWVyczsKCQlfd2lubmVyID0gbmdhbWUud2lubmVyOwoJCV9wYXlvdXQgPSBuZ2FtZS5wYXlvdXQ7CgkJX3JlYXNvbiA9IG5nYW1lLnJlYXNvbkVuZGVkOwoKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gcmV0dXJuIGFyYlRva2VuIGFuZCBsb3cgYnl0ZXMgZnJvbSBhbiBIR2FtZQoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIGNoZWNrSEdhbWUodWludCBfaEdhbWUpIGNvbnN0YW50IHJldHVybnModWludCBfYXJiVG9rLCB1aW50IF9sb3dXb3JkcykKCXsKCQlfYXJiVG9rID0gQXJiVG9rRnJvbUhHYW1lKF9oR2FtZSk7CgkJX2xvd1dvcmRzID0gX2hHYW1lICYgMHhmZmZmZmZmZmZmZmY7CgkJCgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIGdldCBvcGVyYXRpb24gZ2FzIGFtb3VudHMKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiBnZXRPcEdhcygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgX3JhLCB1aW50IF9zZywgdWludCBfd3AsIHVpbnQgX3JmLCB1aW50IF9mZykgCgl7CgkJX3JhID0gcmFHYXM7IC8vIHJlZ2lzdGVyIGFyYgoJCV9zZyA9IHNnR2FzOyAvLyBzdGFydCBnYW1lCgkJX3dwID0gd3BHYXM7IC8vIHdpbm5lciBwYWlkCgkJX3JmID0gcmZHYXM7IC8vIHJlZnVuZAoJCV9mZyA9IGZlZUdhczsgLy8gcmFrZSBmZWUgZ2FzCgl9CgoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBzZXQgb3BlcmF0aW9uIGdhcyBhbW91bnRzIGZvciBmb3J3YWRpbmcgb3BlcmF0aW9ucwoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIHNldE9wR2FzKHVpbnQgX3JhLCB1aW50IF9zZywgdWludCBfd3AsIHVpbnQgX3JmLCB1aW50IF9mZykgCgl7CgkJaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpCgkJCXRocm93OwoKCQlyYUdhcyA9IF9yYTsKCQlzZ0dhcyA9IF9zZzsKCQl3cEdhcyA9IF93cDsKCQlyZkdhcyA9IF9yZjsKCQlmZWVHYXMgPSBfZmc7Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIHNldCBhIG1pY2hlaXZvdXMgYXJiaXRlciB0byBsb2NrZWQKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiBzZXRBcmJpdGVyTG9ja2VkKGFkZHJlc3MgX2FkZHIsIGJvb2wgX2xvY2spICBwdWJsaWMgCgl7CgkJaWYgKG93bmVyICE9IG1zZy5zZW5kZXIpICB7CgkJCXRocm93OyAKCQl9IGVsc2UgaWYgKCF2YWxpZEFyYjIoX2FkZHIpKSB7CgkJCVN0YXRFdmVudCgiaW52YWxpZCBhcmIiKTsKCQl9IGVsc2UgewoJCQlhcmJpdGVyc1tfYWRkcl0ubG9ja2VkID0gX2xvY2s7CgkJfQoJCQoJfQoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBmbHVzaCB0aGUgaG91c2UgZmVlcyB3aGVuZXZlciBjb21tYW5kZWQgdG8uCgkvLyBpZ25vcmUgdGhlIHRocmVzaG9sZCBhbmQgdGhlIGxhc3QgcGF5b3V0IHRpbWUKCS8vIGJ1dCB0aGlzIHRpbWUgb25seSByZXNldCBsYXN0cGF5b3V0dGltZSB1cG9uIHN1Y2Nlc3MKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiBmbHVzaEhvdXNlRmVlcygpCgl7CgkJaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsKCQkJU3RhdEV2ZW50KCJvbmx5IG93bmVyIGNhbGxzIHRoaXMgZnVuY3Rpb24iKTsKCQl9IGVsc2UgaWYgKGhvdXNlRmVlSG9sZG92ZXIgPiAwKSB7CgkJCXVpbnQgbnRtcGhvID0gaG91c2VGZWVIb2xkb3ZlcjsKCQkJaG91c2VGZWVIb2xkb3ZlciA9IDA7CgkJCWlmICghdG9rZW5QYXJ0bmVyLmNhbGwuZ2FzKGZlZUdhcykudmFsdWUobnRtcGhvKSgpKSB7CgkJCQlob3VzZUZlZUhvbGRvdmVyID0gbnRtcGhvOyAvLyBwdXQgaXQgYmFjawoJCQkJU3RhdEV2ZW50KCJIb3VzZS1GZWUgRXJyb3IyIik7IAoJCQl9IGVsc2UgewoJCQkJbGFzdFBheW91dFRpbWUgPSBub3c7CiAJCQkJU3RhdEV2ZW50KCJIb3VzZS1GZWUgUGFpZCIpOwoJIAkJfQoJCX0KCgl9CgoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBzZXQgdGhlIHRva2VuIHBhcnRuZXIKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiBzZXRUb2tlblBhcnRuZXIoYWRkcmVzcyBfYWRkcikgcHVibGljCgl7CgkJaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsKCQkJdGhyb3c7CgkJfSAKCgkJaWYgKChzZXR0aW5nc1N0YXRlID09IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZFJlbGVhc2UpIAoJCQkmJiAodG9rZW5QYXJ0bmVyID09IGFkZHJlc3MoMCkpKSB7CgkJCXRva2VuUGFydG5lciA9IF9hZGRyOwoJCQlTdGF0RXZlbnQoIlRva2VuIFBhcnRuZXIgRmluYWwhIik7CgkJfSBlbHNlIGlmIChzZXR0aW5nc1N0YXRlICE9IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZFJlbGVhc2UpIHsKCQkJdG9rZW5QYXJ0bmVyID0gX2FkZHI7CgkJCVN0YXRFdmVudCgiVG9rZW4gUGFydG5lciBBc3NpZ25lZCEiKTsKCQl9CgkJCQoJfQoKCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIHN3YXAgZXhlY3V0b3IKCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX2FkZHIpIAoJewoJCWlmIChtc2cuc2VuZGVyICE9IG93bmVyCgkJCXx8IHNldHRpbmdzU3RhdGUgPT0gU2V0dGluZ1N0YXRlVmFsdWUubG9ja2VkUmVsZWFzZSkKCQkJIHRocm93OwoKCQlvd25lciA9IF9hZGRyOwoJfQoKCgp9'.
	

]
