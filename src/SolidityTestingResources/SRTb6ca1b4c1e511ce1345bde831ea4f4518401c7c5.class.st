Class {
	#name : #SRTb6ca1b4c1e511ce1345bde831ea4f4518401c7c5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb6ca1b4c1e511ce1345bde831ea4f4518401c7c5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgovKiBOZXcgRVJDMjMgY29udHJhY3QgaW50ZXJmYWNlICovCi8qIFJlY29tbWVuZGVkIGltcGxlbWVudGF0aW9uIHVzZWQgYXQgaHR0cHM6Ly9naXRodWIuY29tL0RleGFyYW4vRVJDMjIzLXRva2VuLXN0YW5kYXJkL3RyZWUvUmVjb21tZW5kZWQgKi8KLyogRnVsbHkgYmFja3dhcmQgY29tcGF0aWJsZSB3aXRoIEVSQzIwICovCmNvbnRyYWN0IEVSQzIyMyB7CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgICBmdW5jdGlvbiBuYW1lKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHN0cmluZyBfbmFtZSk7CiAgICBmdW5jdGlvbiBzeW1ib2woKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAoc3RyaW5nIF9zeW1ib2wpOwogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDggX2RlY2ltYWxzKTsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgX3N1cHBseSk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgb2spOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wgb2spOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSwgc3RyaW5nIGN1c3RvbUZhbGxiYWNrKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlLCBieXRlcyBpbmRleGVkIGRhdGEpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKTsKfQoKLyoqCiAqIEluY2x1ZGUgU2FmZU1hdGggTGliCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CiAgICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBNQVhfVUlOVDI1NiA9CiAgICAweEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY7CgogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgaWYgKHggPiBNQVhfVUlOVDI1NiAtIHkpCiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIHJldHVybiB4ICsgeTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBpZiAoeCA8IHkpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB4IC0geTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBpZiAoeSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICBpZiAoeCA+IE1BWF9VSU5UMjU2IC8geSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHggKiB5OwogICAgfQp9CgoKLyoKICogQ29udHJhY3QgdGhhdCBpcyB3b3JraW5nIHdpdGggRVJDMjIzIHRva2VucwogKi8KIGNvbnRyYWN0IENvbnRyYWN0UmVjZWl2ZXIgewoKICAgIHN0cnVjdCBUS04gewogICAgICAgIGFkZHJlc3Mgc2VuZGVyOwogICAgICAgIHVpbnQgdmFsdWU7CiAgICAgICAgYnl0ZXMgZGF0YTsKICAgICAgICBieXRlczQgc2lnOwogICAgfQoKICAgIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfZnJvbSwgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgewogICAgICBUS04gbWVtb3J5IHRrbjsKICAgICAgdGtuLnNlbmRlciA9IF9mcm9tOwogICAgICB0a24udmFsdWUgPSBfdmFsdWU7CiAgICAgIHRrbi5kYXRhID0gX2RhdGE7CiAgICAgIHVpbnQzMiB1ID0gdWludDMyKF9kYXRhWzNdKSArICh1aW50MzIoX2RhdGFbMl0pIDw8IDgpICsgKHVpbnQzMihfZGF0YVsxXSkgPDwgMTYpICsgKHVpbnQzMihfZGF0YVswXSkgPDwgMjQpOwogICAgICB0a24uc2lnID0gYnl0ZXM0KHUpOwoKICAgICAgLyogdGtuIHZhcmlhYmxlIGlzIGFuYWxvZ3VlIG9mIG1zZyB2YXJpYWJsZSBvZiBFdGhlciB0cmFuc2FjdGlvbgogICAgICAqICB0a24uc2VuZGVyIGlzIHBlcnNvbiB3aG8gaW5pdGlhdGVkIHRoaXMgdG9rZW4gdHJhbnNhY3Rpb24gICAoYW5hbG9ndWUgb2YgbXNnLnNlbmRlcikKICAgICAgKiAgdGtuLnZhbHVlIHRoZSBudW1iZXIgb2YgdG9rZW5zIHRoYXQgd2VyZSBzZW50ICAgKGFuYWxvZ3VlIG9mIG1zZy52YWx1ZSkKICAgICAgKiAgdGtuLmRhdGEgaXMgZGF0YSBvZiB0b2tlbiB0cmFuc2FjdGlvbiAgIChhbmFsb2d1ZSBvZiBtc2cuZGF0YSkKICAgICAgKiAgdGtuLnNpZyBpcyA0IGJ5dGVzIHNpZ25hdHVyZSBvZiBmdW5jdGlvbgogICAgICAqICBpZiBkYXRhIG9mIHRva2VuIHRyYW5zYWN0aW9uIGlzIGEgZnVuY3Rpb24gZXhlY3V0aW9uCiAgICAgICovCiAgICB9Cn0KCmNvbnRyYWN0IEVET0dFIGlzIEVSQzIyMywgU2FmZU1hdGggewoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJlRG9nZWNvaW4iOwoKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkVET0dFIjsKCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSA4OwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5ID0gMTAwMDAwMDAwMDAwICogMTAqKjg7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgYm9vbCBwdWJsaWMgdW5sb2NrZWQgPSBmYWxzZTsKCiAgICBib29sIHB1YmxpYyB0b2tlbkNyZWF0ZWQgPSBmYWxzZTsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgLy8gSW5pdGlhbGl6ZSB0byBoYXZlIG93bmVyIGhhdmUgMTAwLDAwMCwwMDAsMDAwIEVET0dFIG9uIGNvbnRyYWN0IGNyZWF0aW9uCiAgICAvLyBDb25zdHJ1Y3RvciBpcyBjYWxsZWQgb25seSBvbmNlIGFuZCBjYW4gbm90IGJlIGNhbGxlZCBhZ2FpbiAoRXRoZXJldW0gU29saWRpdHkgc3BlY2lmaWNhdGlvbikKICAgIGZ1bmN0aW9uIEVET0dFKCkgcHVibGljIHsKCiAgICAgICAgLy8gU2VjdXJpdHkgY2hlY2sgaW4gY2FzZSBFVk0gaGFzIGZ1dHVyZSBmbGF3IG9yIGV4cGxvaXQgdG8gY2FsbCBjb25zdHJ1Y3RvciBtdWx0aXBsZSB0aW1lcwogICAgICAgIC8vIEVuc3VyZSB0b2tlbiBnZXRzIGNyZWF0ZWQgb25jZSBvbmx5CiAgICAgICAgcmVxdWlyZSh0b2tlbkNyZWF0ZWQgPT0gZmFsc2UpOwogICAgICAgIHRva2VuQ3JlYXRlZCA9IHRydWU7CgogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSB0b3RhbFN1cHBseTsKCiAgICAgICAgLy8gRmluYWwgc2FuaXR5IGNoZWNrIHRvIGVuc3VyZSBvd25lciBiYWxhbmNlIGlzIGdyZWF0ZXIgdGhhbiB6ZXJvCiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tvd25lcl0gPiAwKTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vIEZ1bmN0aW9uIHRvIGRpc3RyaWJ1dGUgdG9rZW5zIHRvIGxpc3Qgb2YgYWRkcmVzc2VzIGJ5IHRoZSBwcm92aWRlZCBhbW91bnQKICAgIC8vIFZlcmlmeSBhbmQgcmVxdWlyZSB0aGF0OgogICAgLy8gLSBCYWxhbmNlIG9mIG93bmVyIGNhbm5vdCBiZSBuZWdhdGl2ZQogICAgLy8gLSBBbGwgdHJhbnNmZXJzIGNhbiBiZSBmdWxmaWxsZWQgd2l0aCByZW1haW5pbmcgb3duZXIgYmFsYW5jZQogICAgLy8gLSBObyBuZXcgdG9rZW5zIGNhbiBldmVyIGJlIG1pbnRlZCBleGNlcHQgb3JpZ2luYWxseSBjcmVhdGVkIDEwMCwwMDAsMDAwLDAwMAogICAgZnVuY3Rpb24gZGlzdHJpYnV0ZUFpcmRyb3AoYWRkcmVzc1tdIGFkZHJlc3NlcywgdWludDI1NiBhbW91bnQpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIC8vIE9ubHkgcHJvY2VlZCBpZiB0aGVyZSBhcmUgZW5vdWdoIHRva2VucyB0byBiZSBkaXN0cmlidXRlZCB0byBhbGwgYWRkcmVzc2VzCiAgICAgICAgLy8gTmV2ZXIgYWxsb3cgYmFsYW5jZSBvZiBvd25lciB0byBiZWNvbWUgbmVnYXRpdmUKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW293bmVyXSA+PSBzYWZlTXVsKGFkZHJlc3Nlcy5sZW5ndGgsIGFtb3VudCkpOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGFkZHJlc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBzYWZlU3ViKGJhbGFuY2VPZihvd25lciksIGFtb3VudCk7CiAgICAgICAgICAgIC8vIEFub3RoZXIgc2FuaXR5IGNoZWNrIHRvIG1ha2Ugc3VyZSBvd25lciBiYWxhbmNlIGNhbiBuZXZlciBiZSBuZWdhdGl2ZQogICAgICAgICAgICByZXF1aXJlKGJhbGFuY2VzW293bmVyXSA+PSAwKTsKICAgICAgICAgICAgYmFsYW5jZXNbYWRkcmVzc2VzW2ldXSA9IHNhZmVBZGQoYmFsYW5jZU9mKGFkZHJlc3Nlc1tpXSksIGFtb3VudCk7CiAgICAgICAgICAgIHRyYW5zZmVyKGFkZHJlc3Nlc1tpXSwgYW1vdW50KTsKICAgICAgICB9CiAgICB9CgogICAgLy8gRnVuY3Rpb24gdG8gYWNjZXNzIG5hbWUgb2YgdG9rZW4gLnNoYQogICAgZnVuY3Rpb24gbmFtZSgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChzdHJpbmcgX25hbWUpIHsKICAgICAgICByZXR1cm4gbmFtZTsKICAgIH0KICAgIC8vIEZ1bmN0aW9uIHRvIGFjY2VzcyBzeW1ib2wgb2YgdG9rZW4gLgogICAgZnVuY3Rpb24gc3ltYm9sKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHN0cmluZyBfc3ltYm9sKSB7CiAgICAgICAgcmV0dXJuIHN5bWJvbDsKICAgIH0KICAgIC8vIEZ1bmN0aW9uIHRvIGFjY2VzcyBkZWNpbWFscyBvZiB0b2tlbiAuCiAgICBmdW5jdGlvbiBkZWNpbWFscygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50OCBfZGVjaW1hbHMpIHsKICAgICAgICByZXR1cm4gZGVjaW1hbHM7CiAgICB9CiAgICAvLyBGdW5jdGlvbiB0byBhY2Nlc3MgdG90YWwgc3VwcGx5IG9mIHRva2VucyAuCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IF90b3RhbFN1cHBseSkgewogICAgICAgIHJldHVybiB0b3RhbFN1cHBseTsKICAgIH0KCiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgdXNlciBvciBhbm90aGVyIGNvbnRyYWN0IHdhbnRzIHRvIHRyYW5zZmVyIGZ1bmRzIC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEsIHN0cmluZyBfY3VzdG9tX2ZhbGxiYWNrKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIC8vIE9ubHkgYWxsb3cgdHJhbnNmZXIgb25jZSB1bmxvY2tlZAogICAgICAgIC8vIE9uY2UgaXQgaXMgdW5sb2NrZWQsIGl0IGlzIHVubG9ja2VkIGZvcmV2ZXIgYW5kIG5vIG9uZSBjYW4gbG9jayBhZ2FpbgogICAgICAgIHJlcXVpcmUodW5sb2NrZWQpOwoKICAgICAgICBpZiAoaXNDb250cmFjdChfdG8pKSB7CiAgICAgICAgICAgIGlmIChiYWxhbmNlT2YobXNnLnNlbmRlcikgPCBfdmFsdWUpIHsKICAgICAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlT2YobXNnLnNlbmRlciksIF92YWx1ZSk7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZihfdG8pLCBfdmFsdWUpOwogICAgICAgICAgICBDb250cmFjdFJlY2VpdmVyIHJlY2VpdmVyID0gQ29udHJhY3RSZWNlaXZlcihfdG8pOwogICAgICAgICAgICByZWNlaXZlci5jYWxsLnZhbHVlKDApKGJ5dGVzNChzaGEzKF9jdXN0b21fZmFsbGJhY2spKSwgbXNnLnNlbmRlciwgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgdXNlciBvciBhbm90aGVyIGNvbnRyYWN0IHdhbnRzIHRvIHRyYW5zZmVyIGZ1bmRzIC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHB1YmxpYyAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIC8vIE9ubHkgYWxsb3cgdHJhbnNmZXIgb25jZSB1bmxvY2tlZAogICAgICAgIC8vIE9uY2UgaXQgaXMgdW5sb2NrZWQsIGl0IGlzIHVubG9ja2VkIGZvcmV2ZXIgYW5kIG5vIG9uZSBjYW4gbG9jayBhZ2FpbgogICAgICAgIHJlcXVpcmUodW5sb2NrZWQpOwoKICAgICAgICBpZiAoaXNDb250cmFjdChfdG8pKSB7CiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlclRvQ29udHJhY3QoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gU3RhbmRhcmQgZnVuY3Rpb24gdHJhbnNmZXIgc2ltaWxhciB0byBFUkMyMCB0cmFuc2ZlciB3aXRoIG5vIF9kYXRhIC4KICAgIC8vIEFkZGVkIGR1ZSB0byBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSByZWFzb25zIC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgICAgICAvLyBPbmx5IGFsbG93IHRyYW5zZmVyIG9uY2UgdW5sb2NrZWQKICAgICAgICAvLyBPbmNlIGl0IGlzIHVubG9ja2VkLCBpdCBpcyB1bmxvY2tlZCBmb3JldmVyIGFuZCBubyBvbmUgY2FuIGxvY2sgYWdhaW4KICAgICAgICByZXF1aXJlKHVubG9ja2VkKTsKCiAgICAgICAgLy9zdGFuZGFyZCBmdW5jdGlvbiB0cmFuc2ZlciBzaW1pbGFyIHRvIEVSQzIwIHRyYW5zZmVyIHdpdGggbm8gX2RhdGEKICAgICAgICAvL2FkZGVkIGR1ZSB0byBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSByZWFzb25zCiAgICAgICAgYnl0ZXMgbWVtb3J5IGVtcHR5OwogICAgICAgIGlmIChpc0NvbnRyYWN0KF90bykpIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9Db250cmFjdChfdG8sIF92YWx1ZSwgZW1wdHkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgZW1wdHkpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBhc3NlbWJsZSB0aGUgZ2l2ZW4gYWRkcmVzcyBieXRlY29kZS4gSWYgYnl0ZWNvZGUgZXhpc3RzIHRoZW4gdGhlIF9hZGRyIGlzIGEgY29udHJhY3QuCiAgICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBpc19jb250cmFjdCkgewogICAgICAgIHVpbnQgbGVuZ3RoOwogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgLy9yZXRyaWV2ZSB0aGUgc2l6ZSBvZiB0aGUgY29kZSBvbiB0YXJnZXQgYWRkcmVzcywgdGhpcyBuZWVkcyBhc3NlbWJseQogICAgICAgICAgICBsZW5ndGggOj0gZXh0Y29kZXNpemUoX2FkZHIpCiAgICAgICAgfQogICAgICAgIHJldHVybiAobGVuZ3RoID4gMCk7CiAgICB9CgogICAgLy8gZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiB0cmFuc2FjdGlvbiB0YXJnZXQgaXMgYW4gYWRkcmVzcwogICAgZnVuY3Rpb24gdHJhbnNmZXJUb0FkZHJlc3MoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHJpdmF0ZSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZU9mKG1zZy5zZW5kZXIpIDwgX3ZhbHVlKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZU9mKG1zZy5zZW5kZXIpLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZihfdG8pLCBfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy9mdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhIGNvbnRyYWN0CiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvQ29udHJhY3QoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHJpdmF0ZSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZU9mKG1zZy5zZW5kZXIpIDwgX3ZhbHVlKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZU9mKG1zZy5zZW5kZXIpLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZihfdG8pLCBfdmFsdWUpOwogICAgICAgIENvbnRyYWN0UmVjZWl2ZXIgcmVjZWl2ZXIgPSBDb250cmFjdFJlY2VpdmVyKF90byk7CiAgICAgICAgcmVjZWl2ZXIudG9rZW5GYWxsYmFjayhtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEdldCBiYWxhbmNlIG9mIHRoZSBhZGRyZXNzIHByb3ZpZGVkCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAgLy8gQ3JlYXRvci9Pd25lciBjYW4gdW5sb2NrZWQgaXQgb25jZSBhbmQgaXQgY2FuIG5ldmVyIGJlIGxvY2tlZCBhZ2FpbgogICAgIC8vIFVzZSBhZnRlciBhaXJkcm9wIGlzIGNvbXBsZXRlCiAgICBmdW5jdGlvbiB1bmxvY2tGb3JldmVyKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgdW5sb2NrZWQgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvLyBPbmx5IGFsbG93IHRyYW5zZmVyIG9uY2UgdW5sb2NrZWQKICAgICAgICAvLyBPbmNlIGl0IGlzIHVubG9ja2VkLCBpdCBpcyB1bmxvY2tlZCBmb3JldmVyIGFuZCBubyBvbmUgY2FuIGxvY2sgYWdhaW4KICAgICAgICByZXF1aXJlKHVubG9ja2VkKTsKICAgICAgICAvL3NhbWUgYXMgYWJvdmUuIFJlcGxhY2UgdGhpcyBsaW5lIHdpdGggdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBwcm90ZWN0IGFnYWluc3Qgd3JhcHBpbmcgdWludHMuCiAgICAgICAgLy9yZXF1aXJlKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKTsKICAgICAgICB1aW50MjU2IGFsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2FuY2UgPj0gX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgIGlmIChhbGxvd2FuY2UgPCBNQVhfVUlOVDI1NikgewogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgfQogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQp9'.
	

]
