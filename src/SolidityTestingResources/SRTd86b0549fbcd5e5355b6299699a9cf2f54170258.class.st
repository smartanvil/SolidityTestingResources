Class {
	#name : #SRTd86b0549fbcd5e5355b6299699a9cf2f54170258,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd86b0549fbcd5e5355b6299699a9cf2f54170258 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8qKgogKiBWZXJ5IGJhc2ljIG93bmVkL21vcnRhbCBib2lsZXJwbGF0ZS4gIFVzZWQgZm9yIGJhc2ljYWxseSBldmVyeXRoaW5nLCBmb3IKICogc2VjdXJpdHkvYWNjZXNzIGNvbnRyb2wgcHVycG9zZXMuCiAqLwpjb250cmFjdCBPd25lZCB7CiAgYWRkcmVzcyBvd25lcjsKCiAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgIHRocm93OwogICAgfQogICAgXzsKICB9CgogIC8qKgogICAqIEJhc2ljIGNvbnN0cnVjdG9yLiAgVGhlIHNlbmRlciBpcyB0aGUgb3duZXIuCiAgICovCiAgZnVuY3Rpb24gT3duZWQoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBUcmFuc2ZlcnMgb3duZXJzaGlwIG9mIHRoZSBjb250cmFjdCB0byBhIG5ldyBvd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgIFdobyBnZXRzIHRvIGluaGVyaXQgdGhpcyB0aGluZy4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgb3duZXIgPSBuZXdPd25lcjsKICB9CgogIC8qKgogICAqIFNodXRzIGRvd24gdGhlIGNvbnRyYWN0IGFuZCByZW1vdmVzIGl0IGZyb20gdGhlIGJsb2NrY2hhaW4gc3RhdGUuCiAgICogT25seSBhdmFpbGFibGUgdG8gdGhlIG93bmVyLgogICAqLwogIGZ1bmN0aW9uIHNodXRkb3duKCkgb25seU93bmVyIHsKICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgfQoKICAvKioKICAgKiBXaXRoZHJhdyBhbGwgdGhlIGZ1bmRzIGZyb20gdGhpcyBjb250cmFjdC4KICAgKiBPbmx5IGF2YWlsYWJsZSB0byB0aGUgb3duZXIuCiAgICovCiAgZnVuY3Rpb24gd2l0aGRyYXcoKSBvbmx5T3duZXIgewogICAgaWYgKCFvd25lci5zZW5kKHRoaXMuYmFsYW5jZSkpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgfQp9Cgpjb250cmFjdCBMb3R0ZXJ5Um91bmRJbnRlcmZhY2UgewogIGJvb2wgcHVibGljIHdpbm5pbmdOdW1iZXJzUGlja2VkOwogIHVpbnQyNTYgcHVibGljIGNsb3NpbmdCbG9jazsKCiAgZnVuY3Rpb24gcGlja1RpY2tldChieXRlczQgcGlja3MpIHBheWFibGU7CiAgZnVuY3Rpb24gcmFuZG9tVGlja2V0KCkgcGF5YWJsZTsKCiAgZnVuY3Rpb24gcHJvb2ZPZlNhbHQoYnl0ZXMzMiBzYWx0LCB1aW50OCBOKSBjb25zdGFudCByZXR1cm5zKGJvb2wpOwogIGZ1bmN0aW9uIGNsb3NlR2FtZShieXRlczMyIHNhbHQsIHVpbnQ4IE4pOwogIGZ1bmN0aW9uIGNsYWltT3duZXJGZWUoYWRkcmVzcyBwYXlvdXQpOwogIGZ1bmN0aW9uIHdpdGhkcmF3KCk7CiAgZnVuY3Rpb24gc2h1dGRvd24oKTsKICBmdW5jdGlvbiBkaXN0cmlidXRlV2lubmluZ3MoKTsKICBmdW5jdGlvbiBjbGFpbVByaXplKCk7CgogIGZ1bmN0aW9uIHBhaWRPdXQoKSBjb25zdGFudCByZXR1cm5zKGJvb2wpOwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpOwp9CgovKioKICogVGhlIG1lYXQgb2YgdGhlIGdhbWUuICBIb2xkcyBhbGwgdGhlIHJ1bGVzIGFyb3VuZCBwaWNraW5nIG51bWJlcnMsCiAqIGF0dGVtcHRpbmcgdG8gZXN0YWJsaXNoIGdvb2Qgc291cmNlcyBvZiBlbnRyb3B5LCBob2xkaW5nIHRoZSBwcmUtc2VsZWN0ZWQKICogZW50cm9weSBzb3VyY2VzIChzYWx0KSBpbiBhIHdheSB0aGF0IGlzIG5vdCBwdWJsaWNseS1yZXZlYWxlZCwgZXRjLgogKiBUaGUgZ2lzdCBpcyB0aGF0IHRoaXMgaXMgYSBiaXQgb2YgYSBQUk5HLCB0aGF0IGFkdmFuY2VzIGl0cyBlbnRyb3B5IGVhY2gKICogdGltZSBhIHRpY2tldCBpcyBwaWNrZWQuCiAqCiAqIFByb3ZpZGVzIHRoZSBtZWFucyB0byBib3RoIHBpY2sgc3BlY2lmaWMgbnVtYmVycyBvciBoYXZlIHRoZSBQUk5HIHNlbGVjdAogKiB0aGVtIGZvciB0aGUgdGlja2V0aG9sZGVyLgogKgogKiBBbHNvIGNvbnRyb2xzIHBheW91dCBvZiB3aW5uZXJzIGZvciBhIHBhcnRpY3VsYXIgcm91bmQuCiAqLwpjb250cmFjdCBMb3R0ZXJ5Um91bmQgaXMgTG90dGVyeVJvdW5kSW50ZXJmYWNlLCBPd25lZCB7CgogIC8qCiAgICBDb25zdGFudHMKICAgKi8KICAvLyBwdWJsaWMgdmVyc2lvbiBzdHJpbmcKICBzdHJpbmcgY29uc3RhbnQgVkVSU0lPTiA9ICcwLjEuMic7CgogIC8vIHJvdW5kIGxlbmd0aAogIHVpbnQyNTYgY29uc3RhbnQgUk9VTkRfTEVOR1RIID0gNDMyMDA7ICAvLyBhcHByb3hpbWF0ZWx5IGEgd2VlawoKICAvLyBwYXlvdXQgZnJhY3Rpb24gKGluIHRob3VzYW5kdGhzKToKICB1aW50MjU2IGNvbnN0YW50IFBBWU9VVF9GUkFDVElPTiA9IDk1MDsKCiAgLy8gQ29zdCBwZXIgdGlja2V0CiAgdWludCBjb25zdGFudCBUSUNLRVRfUFJJQ0UgPSAxIGZpbm5leTsKCiAgLy8gdmFsaWQgcGljayBtYXNrCiAgYnl0ZXMxIGNvbnN0YW50IFBJQ0tfTUFTSyA9IDB4M2Y7IC8vIDAtNjMKCiAgLyoKICAgIFB1YmxpYyB2YXJpYWJsZXMKICAgKi8KICAvLyBQcmUtc2VsZWN0ZWQgc2FsdCwgaGFzaGVkIE4gdGltZXMKICAvLyBzZXJ2ZXMgYXMgcHJvb2Ytb2Ytc2FsdAogIGJ5dGVzMzIgcHVibGljIHNhbHRIYXNoOwoKICAvLyBzaW5nbGUgaGFzaCBvZiBzYWx0Lk4uc2FsdAogIC8vIHNlcnZlcyBhcyBwcm9vZi1vZi1OCiAgLy8gMCA8IE4gPCAyNTYKICBieXRlczMyIHB1YmxpYyBzYWx0Tkhhc2g7CgogIC8vIGNsb3NpbmcgdGltZS4KICB1aW50MjU2IHB1YmxpYyBjbG9zaW5nQmxvY2s7CgogIC8vIHdpbm5pbmcgbnVtYmVycwogIGJ5dGVzNCBwdWJsaWMgd2lubmluZ051bWJlcnM7CgogIC8vIFRoaXMgYmVjb21lcyB0cnVlIHdoZW4gdGhlIG51bWJlcnMgaGF2ZSBiZWVuIHBpY2tlZAogIGJvb2wgcHVibGljIHdpbm5pbmdOdW1iZXJzUGlja2VkID0gZmFsc2U7CgogIC8vIFRoaXMgYmVjb21lcyBwb3B1bGF0ZWQgaWYgYW55b25lIHdpbnMKICBhZGRyZXNzW10gcHVibGljIHdpbm5lcnM7CgogIC8vIFN0b3JlcyBhIGZsYWcgdG8gc2lnbmFsIGlmIHRoZSB3aW5uZXIgaGFzIHdpbm5pbmdzIHRvIGJlIGNsYWltZWQKICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHdpbm5pbmdzQ2xhaW1hYmxlOwoKICAvKioKICAgKiBDdXJyZW50IHBpY2tzIGFyZSBmcm9tIDAgdG8gNjMsIG9yIDJeNiAtIDEuCiAgICogQ3VycmVudCBudW1iZXIgb2YgcGlja3MgaXMgNAogICAqIFJvdWdoIG9kZHMgb2Ygd2lubmluZyB3aWxsIGJlIDEgaW4gKDJeNileNCwgYXNzdW1pbmcgZXZlbiBkaXN0cmlidXRpb25zLCBldGMKICAgKi8KICBtYXBwaW5nKGJ5dGVzNCA9PiBhZGRyZXNzW10pIHB1YmxpYyB0aWNrZXRzOwogIHVpbnQyNTYgcHVibGljIG5UaWNrZXRzID0gMDsKCiAgLy8gU2V0IHdoZW4gd2lubmVycyBhcmUgZHJhd24sIGFuZCByZXByZXNlbnRzIHRoZSBhbW91bnQgb2YgdGhlIGNvbnRyYWN0J3MgY3VycmVudCBiYWxhbmNlIHRoYXQgY2FuIGJlIHBhaWQgb3V0LgogIHVpbnQyNTYgcHVibGljIHByaXplUG9vbDsKCiAgLy8gU2V0IHdoZW4gd2lubmVycyBhcmUgZHJhd24sIGFuZCBzaWduaWZpZXMgdGhlIGFtb3VudCBlYWNoIHdpbm5lciB3aWxsIHJlY2VpdmUuICBJbiB0aGUgZXZlbnQgb2YgbXVsdGlwbGUKICAvLyB3aW5uZXJzLCB0aGlzIHdpbGwgYmUgcHJpemVQb29sIC8gd2lubmVycy5sZW5ndGgKICB1aW50MjU2IHB1YmxpYyBwcml6ZVZhbHVlOwoKICAvLyBUaGUgZmVlIGF0IHRoZSB0aW1lIHdpbm5lcnMgd2VyZSBwaWNrZWQgKGlmIHRoZXJlIHdlcmUgd2lubmVycykuICBUaGlzIGlzIHRoZSBwb3J0aW9uIG9mIHRoZSBjb250cmFjdCdzIGJhbGFuY2UKICAvLyB0aGF0IGdvZXMgdG8gdGhlIGNvbnRyYWN0IG93bmVyLgogIHVpbnQyNTYgcHVibGljIG93bmVyRmVlOwoKICAvLyBUaGlzIHdpbGwgYmUgdGhlIHNoYTMgaGFzaCBvZiB0aGUgcHJldmlvdXMgZW50cm9weSArIHNvbWUgYWRkaXRpb25hbCBpbnB1dHMgKGUuZy4gcmFuZG9tbHktZ2VuZXJhdGVkIGhhc2hlcywgZXRjKQogIGJ5dGVzMzIgcHJpdmF0ZSBhY2N1bXVsYXRlZEVudHJvcHk7CgogIG1vZGlmaWVyIGJlZm9yZUNsb3NlIHsKICAgIGlmIChibG9jay5udW1iZXIgPiBjbG9zaW5nQmxvY2spIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgYmVmb3JlRHJhdyB7CiAgICBpZiAoYmxvY2subnVtYmVyIDw9IGNsb3NpbmdCbG9jayB8fCB3aW5uaW5nTnVtYmVyc1BpY2tlZCkgewogICAgICB0aHJvdzsKICAgIH0KICAgIF87CiAgfQoKICBtb2RpZmllciBhZnRlckRyYXcgewogICAgaWYgKHdpbm5pbmdOdW1iZXJzUGlja2VkID09IGZhbHNlKSB7CiAgICAgIHRocm93OwogICAgfQogICAgXzsKICB9CgogIC8vIEVtaXR0ZWQgd2hlbiB0aGUgcm91bmQgc3RhcnRzLCBicm9hZGNhc3RpbmcgdGhlIGhpZGRlbiBlbnRyb3B5IHBhcmFtcywgY2xvc2luZyBibG9jawogIC8vIGFuZCBnYW1lIHZlcnNpb24uCiAgZXZlbnQgTG90dGVyeVJvdW5kU3RhcnRlZCgKICAgIGJ5dGVzMzIgc2FsdEhhc2gsCiAgICBieXRlczMyIHNhbHROSGFzaCwKICAgIHVpbnQyNTYgY2xvc2luZ0Jsb2NrLAogICAgc3RyaW5nIHZlcnNpb24KICApOwoKICAvLyBCcm9hZGNhc3RlZCBhbnkgdGltZSBhIHVzZXIgcHVyY2hhc2VzIGEgdGlja2V0LgogIGV2ZW50IExvdHRlcnlSb3VuZERyYXcoCiAgICBhZGRyZXNzIGluZGV4ZWQgdGlja2V0SG9sZGVyLAogICAgYnl0ZXM0IGluZGV4ZWQgcGlja3MKICApOwoKICAvLyBCcm9hZGNhc3Qgd2hlbiB0aGUgcm91bmQgaXMgY29tcGxldGVkLCByZXZlYWxpbmcgdGhlIGhpZGRlbiBlbnRyb3B5IHNvdXJjZXMKICAvLyBhbmQgdGhlIHdpbm5pbmcgcGlja3MuCiAgZXZlbnQgTG90dGVyeVJvdW5kQ29tcGxldGVkKAogICAgYnl0ZXMzMiBzYWx0LAogICAgdWludDggTiwKICAgIGJ5dGVzNCBpbmRleGVkIHdpbm5pbmdQaWNrcywKICAgIHVpbnQyNTYgY2xvc2luZ0JhbGFuY2UKICApOwoKICAvLyBCcm9hZGNhc3QgZm9yIGVhY2ggd2lubmVyLgogIGV2ZW50IExvdHRlcnlSb3VuZFdpbm5lcigKICAgIGFkZHJlc3MgaW5kZXhlZCB0aWNrZXRIb2xkZXIsCiAgICBieXRlczQgaW5kZXhlZCBwaWNrcwogICk7CgogIC8qKgogICAqIENyZWF0ZXMgYSBuZXcgTG90dGVyeSByb3VuZCwgYW5kIHNldHMgdGhlIHJvdW5kJ3MgcGFyYW1ldGVycy4KICAgKgogICAqIE5vdGUgdGhhdCB0aGlzIHdpbGwgaW1wbGljaXRseSBzZXQgdGhlIGZhY3RvcnkgdG8gYmUgdGhlIG93bmVyLAogICAqIG1lYW5pbmcgdGhlIGZhY3Rvcnkgd2lsbCBuZWVkIHRvIGJlIGFibGUgdG8gdHJhbnNmZXIgb3duZXJzaGlwLAogICAqIHRvIGl0cyBvd25lciwgdGhlIEMmQyBjb250cmFjdC4KICAgKgogICAqIEBwYXJhbSBfc2FsdEhhc2ggICAgICAgSGFzaGVkIHNhbHQuICBXaWxsIGJlIGhhc2hlZCB3aXRoIHNoYTMgTiB0aW1lcwogICAqIEBwYXJhbSBfc2FsdE5IYXNoICAgICAgSGFzaGVkIHByb29mIG9mIE4sIGluIHRoZSBmb3JtYXQgc2hhMyhzYWx0K04rc2FsdCkKICAgKi8KICBmdW5jdGlvbiBMb3R0ZXJ5Um91bmQoCiAgICBieXRlczMyIF9zYWx0SGFzaCwKICAgIGJ5dGVzMzIgX3NhbHROSGFzaAogICkgcGF5YWJsZSB7CiAgICBzYWx0SGFzaCA9IF9zYWx0SGFzaDsKICAgIHNhbHROSGFzaCA9IF9zYWx0Tkhhc2g7CiAgICBjbG9zaW5nQmxvY2sgPSBibG9jay5udW1iZXIgKyBST1VORF9MRU5HVEg7CiAgICBMb3R0ZXJ5Um91bmRTdGFydGVkKAogICAgICBzYWx0SGFzaCwKICAgICAgc2FsdE5IYXNoLAogICAgICBjbG9zaW5nQmxvY2ssCiAgICAgIFZFUlNJT04KICAgICk7CiAgICAvLyBzdGFydCB0aGlzIG9mZiB3aXRoIHNvbWUgcmVhbGx5IHBvb3IgZW50cm9weS4KICAgIGFjY3VtdWxhdGVkRW50cm9weSA9IGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXIgLSAxKTsKICB9CgogIC8qKgogICAqIEF0dGVtcHQgdG8gZ2VuZXJhdGUgYSBuZXcgcHNldWRvLXJhbmRvbSBudW1iZXIsIHdoaWxlIGFkdmFuY2luZyB0aGUgaW50ZXJuYWwgZW50cm9weQogICAqIG9mIHRoZSBjb250cmFjdC4gIFVzZXMgYSB0d28tcGhhc2UgYXBwcm9hY2g6IGZpcnN0LCBnZW5lcmF0ZXMgYSBzaW1wbGUgb2Zmc2V0IFswLTI1NV0KICAgKiBmcm9tIHNpbXBsZSBlbnRyb3B5IHNvdXJjZXMgKGFjY3VtdWxhdGVkLCBzZW5kZXIsIGJsb2NrIG51bWJlcikuICBVc2VzIHRoaXMgb2Zmc2V0CiAgICogdG8gaW5kZXggaW50byB0aGUgaGlzdG9yeSBvZiBibG9ja2hhc2hlcywgdG8gYXR0ZW1wdCB0byBnZW5lcmF0ZSBzb21lIHN0cm9uZ2VyIGVudHJvcHkKICAgKiBieSBpbmNsdWRpbmcgcHJldmlvdXMgYmxvY2sgaGFzaGVzLgogICAqCiAgICogVGhlbiBhZHZhbmNlcyB0aGUgaW50ZXJhbCBlbnRyb3B5IGJ5IHJlaGFzaGluZyBpdCB3aXRoIHRoZSBjaG9zZW4gbnVtYmVyLgogICAqLwogIGZ1bmN0aW9uIGdlbmVyYXRlUHNldWRvUmFuZChieXRlczMyIHNlZWQpIGludGVybmFsIHJldHVybnMoYnl0ZXMzMikgewogICAgdWludDggcHNldWRvUmFuZG9tT2Zmc2V0ID0gdWludDgodWludDI1NihzaGEyNTYoCiAgICAgIHNlZWQsCiAgICAgIGJsb2NrLmRpZmZpY3VsdHksCiAgICAgIGJsb2NrLmNvaW5iYXNlLAogICAgICBibG9jay50aW1lc3RhbXAsCiAgICAgIGFjY3VtdWxhdGVkRW50cm9weQogICAgKSkgJiAweGZmKTsKICAgIC8vIFdBUk5JTkc6IFRoaXMgYXNzdW1lcyBibG9jay5udW1iZXIgPiAyNTYuLi4gSWYgYmxvY2subnVtYmVyIDwgMjU2LCB0aGUgYmVsb3cgYmxvY2suYmxvY2toYXNoIGNvdWxkIHJldHVybiAwCiAgICAvLyBUaGlzIGlzIHByb2JhYmx5IG9ubHkgYW4gaXNzdWUgaW4gdGVzdGluZywgYnV0IHNob3VsZG4ndCBiZSBhIHByb2JsZW0gdGhlcmUuCiAgICB1aW50MjU2IHBzZXVkb1JhbmRvbUJsb2NrID0gYmxvY2subnVtYmVyIC0gcHNldWRvUmFuZG9tT2Zmc2V0IC0gMTsKICAgIGJ5dGVzMzIgcHNldWRvUmFuZCA9IHNoYTMoCiAgICAgIGJsb2NrLm51bWJlciwKICAgICAgYmxvY2suYmxvY2toYXNoKHBzZXVkb1JhbmRvbUJsb2NrKSwKICAgICAgYmxvY2suZGlmZmljdWx0eSwKICAgICAgYmxvY2sudGltZXN0YW1wLAogICAgICBhY2N1bXVsYXRlZEVudHJvcHkKICAgICk7CiAgICBhY2N1bXVsYXRlZEVudHJvcHkgPSBzaGEzKGFjY3VtdWxhdGVkRW50cm9weSwgcHNldWRvUmFuZCk7CiAgICByZXR1cm4gcHNldWRvUmFuZDsKICB9CgogIC8qKgogICAqIEJ1eSBhIHRpY2tldCB3aXRoIHByZS1zZWxlY3RlZCBwaWNrcwogICAqIEBwYXJhbSBwaWNrcyBVc2VyJ3MgcGlja3MuCiAgICovCiAgZnVuY3Rpb24gcGlja1RpY2tldChieXRlczQgcGlja3MpIHBheWFibGUgYmVmb3JlQ2xvc2UgewogICAgaWYgKG1zZy52YWx1ZSAhPSBUSUNLRVRfUFJJQ0UpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICAvLyBkb24ndCBhbGxvdyBpbnZhbGlkIHBpY2tzLgogICAgZm9yICh1aW50OCBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICBpZiAocGlja3NbaV0gJiBQSUNLX01BU0sgIT0gcGlja3NbaV0pIHsKICAgICAgICB0aHJvdzsKICAgICAgfQogICAgfQogICAgdGlja2V0c1twaWNrc10ucHVzaChtc2cuc2VuZGVyKTsKICAgIG5UaWNrZXRzKys7CiAgICBnZW5lcmF0ZVBzZXVkb1JhbmQoYnl0ZXMzMihwaWNrcykpOyAvLyBhZHZhbmNlIHRoZSBhY2N1bXVsYXRlZCBlbnRyb3B5CiAgICBMb3R0ZXJ5Um91bmREcmF3KG1zZy5zZW5kZXIsIHBpY2tzKTsKICB9CgogIC8qKgogICAqIEludGVyYWwgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgdmFsaWQgcGlja3MuICBVc2VkIGJ5IGJvdGggdGhlIHJhbmRvbQogICAqIHRpY2tldCBmdW5jdGlvbmFsaXR5LCBhcyB3ZWxsIGFzIHdoZW4gZ2VuZXJhdGluZyB3aW5uaW5nIHBpY2tzLgogICAqIEV2ZW4gdGhvdWdoIHRoZSBwaWNrcyBhcmUgYSBmaXhlZC13aWR0aCBieXRlIGFycmF5LCBlYWNoIHBpY2sgaXMKICAgKiBjaG9zZW4gc2VwYXJhdGVseSAoZS5nLiBhIGJ5dGVzNCB3aWxsIHJlc3VsdCBpbiA0IHNlcGFyYXRlIHNoYTMgaGFzaGVzCiAgICogdXNlZCBhcyBzb3VyY2VzKS4KICAgKgogICAqIE1hc2tzIHRoZSBmaXJzdCBieXRlIG9mIHRoZSBzZWVkIHRvIHVzZSBhcyBhbiBvZmZzZXQgaW50byB0aGUgbmV4dCBQUk5HLAogICAqIHRoZW4gcmVwbGFjZXMgdGhlIHNlZWQgd2l0aCB0aGUgbmV3IFBSTkcuICBQdWxscyBhIHNpbmdsZSBieXRlIGZyb20gdGhlCiAgICogcmVzdWx0YW50IG9mZnNldCwgbWFza3MgaXQgdG8gYmUgdmFsaWQsIHRoZW4gYWRkcyBpdCB0byB0aGUgYWNjdW11bGF0b3IuCiAgICoKICAgKiBAcGFyYW0gc2VlZCAgVGhlIFBSTkcgc2VlZCB1c2VkIHRvIHBpY2sgdGhlIG51bWJlcnMuCiAgICovCiAgZnVuY3Rpb24gcGlja1ZhbHVlcyhieXRlczMyIHNlZWQpIGludGVybmFsIHJldHVybnMgKGJ5dGVzNCkgewogICAgYnl0ZXM0IHBpY2tzOwogICAgdWludDggb2Zmc2V0OwogICAgZm9yICh1aW50OCBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICBvZmZzZXQgPSB1aW50OChzZWVkWzBdKSAmIDB4MWY7CiAgICAgIHNlZWQgPSBzaGEzKHNlZWQsIG1zZy5zZW5kZXIpOwogICAgICBwaWNrcyA9IChwaWNrcyA+PiA4KSB8IGJ5dGVzMShzZWVkW29mZnNldF0gJiBQSUNLX01BU0spOwogICAgfQogICAgcmV0dXJuIHBpY2tzOwogIH0KCiAgLyoqCiAgICogUGlja3MgYSByYW5kb20gdGlja2V0LCB1c2luZyB0aGUgaW50ZXJuYWwgUFJORyBhbmQgYWNjdW11bGF0ZWQgZW50cm9weQogICAqLwogIGZ1bmN0aW9uIHJhbmRvbVRpY2tldCgpIHBheWFibGUgYmVmb3JlQ2xvc2UgewogICAgaWYgKG1zZy52YWx1ZSAhPSBUSUNLRVRfUFJJQ0UpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICBieXRlczMyIHBzZXVkb1JhbmQgPSBnZW5lcmF0ZVBzZXVkb1JhbmQoYnl0ZXMzMihtc2cuc2VuZGVyKSk7CiAgICBieXRlczQgcGlja3MgPSBwaWNrVmFsdWVzKHBzZXVkb1JhbmQpOwogICAgdGlja2V0c1twaWNrc10ucHVzaChtc2cuc2VuZGVyKTsKICAgIG5UaWNrZXRzKys7CiAgICBMb3R0ZXJ5Um91bmREcmF3KG1zZy5zZW5kZXIsIHBpY2tzKTsKICB9CgogIC8qKgogICAqIFB1YmxpYyBtZWFucyB0byBwcm92ZSB0aGUgc2FsdCBhZnRlciBudW1iZXJzIGFyZSBwaWNrZWQuICBOb3QgdGVjaG5pY2FsbHkgbmVjZXNzYXJ5CiAgICogZm9yIHRoaXMgdG8gYmUgZXh0ZXJuYWwsIGJlY2F1c2UgaXQgd2lsbCBiZSBjYWxsZWQgZHVyaW5nIHRoZSByb3VuZCBjbG9zZSBwcm9jZXNzLgogICAqIElmIHRoZSBoaWRkZW4gZW50cm9weSBwYXJhbWV0ZXJzIGRvbid0IG1hdGNoLCB0aGUgY29udHJhY3Qgd2lsbCByZWZ1c2UgdG8gcGljawogICAqIG51bWJlcnMgb3IgY2xvc2UuCiAgICoKICAgKiBAcGFyYW0gc2FsdCAgICAgICAgICBIaWRkZW4gZW50cm9weSBzb3VyY2UKICAgKiBAcGFyYW0gTiAgICAgICAgICAgICBTZWNyZXQgdmFsdWUgcHJvdmluZyBob3cgdG8gb2J0YWluIHRoZSBoYXNoZWQgZW50cm9weSBmcm9tIHRoZSBzb3VyY2UuCiAgICovCiAgZnVuY3Rpb24gcHJvb2ZPZlNhbHQoYnl0ZXMzMiBzYWx0LCB1aW50OCBOKSBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsKICAgIC8vIFByb29mLW9mLU46CiAgICBieXRlczMyIF9zYWx0Tkhhc2ggPSBzaGEzKHNhbHQsIE4sIHNhbHQpOwogICAgaWYgKF9zYWx0Tkhhc2ggIT0gc2FsdE5IYXNoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvLyBQcm9vZi1vZi1zYWx0OgogICAgYnl0ZXMzMiBfc2FsdEhhc2ggPSBzaGEzKHNhbHQpOwogICAgZm9yICh2YXIgaSA9IDE7IGkgPCBOOyBpKyspIHsKICAgICAgX3NhbHRIYXNoID0gc2hhMyhfc2FsdEhhc2gpOwogICAgfQogICAgaWYgKF9zYWx0SGFzaCAhPSBzYWx0SGFzaCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEludGVybmFsIGZ1bmN0aW9uIHRvIGhhbmRsZSB0YWJ1bGF0aW5nIHRoZSB3aW5uZXJzLCBpbmNsdWRpbmcgZWRnZSBjYXNlcyBhcm91bmQKICAgKiBkdXBsaWNhdGUgd2lubmVycy4gIFNwbGl0IG91dCBpbnRvIGl0cyBvd24gbWV0aG9kIHBhcnRpYWxseSB0byBlbmFibGUgcHJvcGVyCiAgICogdGVzdGluZy4KICAgKgogICAqIEBwYXJhbSBzYWx0ICAgICAgICAgIEhpZGRlbiBlbnRyb3B5IHNvdXJjZS4gIEVtaXR0ZWQgaGVyZQogICAqIEBwYXJhbSBOICAgICAgICAgICAgIEtleSB0byB0aGUgaGlkZGVuIGVudHJvcHkgc291cmNlLgogICAqIEBwYXJhbSB3aW5uaW5nUGlja3MgIFRoZSB3aW5uaW5nIHBpY2tzLgogICAqLwogIGZ1bmN0aW9uIGZpbmFsaXplUm91bmQoYnl0ZXMzMiBzYWx0LCB1aW50OCBOLCBieXRlczQgd2lubmluZ1BpY2tzKSBpbnRlcm5hbCB7CiAgICB3aW5uaW5nTnVtYmVycyA9IHdpbm5pbmdQaWNrczsKICAgIHdpbm5pbmdOdW1iZXJzUGlja2VkID0gdHJ1ZTsKICAgIExvdHRlcnlSb3VuZENvbXBsZXRlZChzYWx0LCBOLCB3aW5uaW5nTnVtYmVycywgdGhpcy5iYWxhbmNlKTsKCiAgICB2YXIgX3dpbm5lcnMgPSB0aWNrZXRzW3dpbm5pbmdOdW1iZXJzXTsKICAgIC8vIGlmIHdlIGhhdmUgd2lubmVyczoKICAgIGlmIChfd2lubmVycy5sZW5ndGggPiAwKSB7CiAgICAgIC8vIGxldCdzIGRlZHVwZSBhbmQgYnJvYWRjYXN0IHRoZSB3aW5uZXJzIGJlZm9yZSBmaWd1cmluZyBvdXQgdGhlIHByaXplIHBvb2wgc2l0dWF0aW9uLgogICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfd2lubmVycy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB3aW5uZXIgPSBfd2lubmVyc1tpXTsKICAgICAgICBpZiAoIXdpbm5pbmdzQ2xhaW1hYmxlW3dpbm5lcl0pIHsKICAgICAgICAgIHdpbm5lcnMucHVzaCh3aW5uZXIpOwogICAgICAgICAgd2lubmluZ3NDbGFpbWFibGVbd2lubmVyXSA9IHRydWU7CiAgICAgICAgICBMb3R0ZXJ5Um91bmRXaW5uZXIod2lubmVyLCB3aW5uaW5nTnVtYmVycyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIG5vdyBsZXQncyB3cmFwIHRoaXMgdXAgYnkgZmluYWxpemluZyB0aGUgcHJpemUgcG9vbCB2YWx1ZToKICAgICAgLy8gVGhlcmUgbWF5IGJlIHNvbWUgcm91bmRpbmcgZXJyb3JzIGluIGhlcmUsIGJ1dCBpdCBzaG91bGQgb25seSBhbW91bnQgdG8gYSBjb3VwbGUgd2VpLgogICAgICBwcml6ZVBvb2wgPSB0aGlzLmJhbGFuY2UgKiBQQVlPVVRfRlJBQ1RJT04gLyAxMDAwOwogICAgICBwcml6ZVZhbHVlID0gcHJpemVQb29sIC8gd2lubmVycy5sZW5ndGg7CgogICAgICAvLyBOb3RlIHRoYXQgdGhlIG93bmVyIGRvZXNuJ3QgZ2V0IHRvIGNsYWltIGEgZmVlIHVudGlsIHRoZSBnYW1lIGlzIHdvbi4KICAgICAgb3duZXJGZWUgPSB0aGlzLmJhbGFuY2UgLSBwcml6ZVBvb2w7CiAgICB9CiAgICAvLyB3ZSBkb25lLgogIH0KCiAgLyoqCiAgICogUmV2ZWFsIHRoZSBzZWNyZXQgc291cmNlcyBvZiBlbnRyb3B5LCB0aGVuIHVzZSB0aGVtIHRvIHBpY2sgd2lubmluZyBudW1iZXJzLgogICAqCiAgICogTm90ZSB0aGF0IGJ5IHVzaW5nIG5vIGR5bmFtaWMgKGUuZy4gYmxvY2toYXNoLWJhc2VkKSBzb3VyY2VzIG9mIGVudHJvcHksCiAgICogY2Vuc29yaW5nIHRoaXMgdHJhbnNhY3Rpb24gd2lsbCBub3QgY2hhbmdlIHRoZSBmaW5hbCBvdXRjb21lIG9mIHRoZSBwaWNrcy4KICAgKgogICAqIEBwYXJhbSBzYWx0ICAgICAgICAgIEhpZGRlbiBlbnRyb3B5LgogICAqIEBwYXJhbSBOICAgICAgICAgICAgIE51bWJlciBvZiB0aW1lcyB0byBoYXNoIHRoZSBoaWRkZW4gZW50cm9weSB0byBwcm9kdWNlIHRoZSB2YWx1ZSBwcm92aWRlZCBhdCBjcmVhdGlvbi4KICAgKi8KICBmdW5jdGlvbiBjbG9zZUdhbWUoYnl0ZXMzMiBzYWx0LCB1aW50OCBOKSBvbmx5T3duZXIgYmVmb3JlRHJhdyB7CiAgICAvLyBEb24ndCBhbGxvdyBwaWNraW5nIG51bWJlcnMgbXVsdGlwbGUgdGltZXMuCiAgICBpZiAod2lubmluZ051bWJlcnNQaWNrZWQgPT0gdHJ1ZSkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICAvLyBwcm92ZSB0aGUgcHJlLXNlbGVjdGVkIHNhbHQgaXMgYWN0dWFsbHkgbGVnaXQuCiAgICBpZiAocHJvb2ZPZlNhbHQoc2FsdCwgTikgIT0gdHJ1ZSkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICBieXRlczMyIHBzZXVkb1JhbmQgPSBzaGEzKAogICAgICBzYWx0LAogICAgICBuVGlja2V0cywKICAgICAgYWNjdW11bGF0ZWRFbnRyb3B5CiAgICApOwogICAgZmluYWxpemVSb3VuZChzYWx0LCBOLCBwaWNrVmFsdWVzKHBzZXVkb1JhbmQpKTsKICB9CgogIC8qKgogICAqIFNlbmRzIHRoZSBvd25lcidzIGZlZSB0byB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuICBOb3RlIHRoYXQgdGhlCiAgICogb3duZXIgY2FuIG9ubHkgYmUgcGFpZCBpZiB0aGVyZSBhY3R1YWxseSB3YXMgYSB3aW5uZXIuIEluIHRoZQogICAqIGV2ZW50IG5vIG9uZSB3aW5zLCB0aGUgZW50aXJlIGJhbGFuY2UgaXMgY2FycmllZCBvdmVyIGludG8gdGhlCiAgICogbmV4dCByb3VuZC4gIE5vIGRvdWJsZS1kaXBwaW5nIGhlcmUuCiAgICogQHBhcmFtIHBheW91dCAgICAgICAgQWRkcmVzcyB0byBzZW5kIHRoZSBvd25lciBmZWUgdG8uCiAgICovCiAgZnVuY3Rpb24gY2xhaW1Pd25lckZlZShhZGRyZXNzIHBheW91dCkgb25seU93bmVyIGFmdGVyRHJhdyB7CiAgICBpZiAob3duZXJGZWUgPiAwKSB7CiAgICAgIHVpbnQyNTYgdmFsdWUgPSBvd25lckZlZTsKICAgICAgb3duZXJGZWUgPSAwOwogICAgICBpZiAoIXBheW91dC5zZW5kKHZhbHVlKSkgewogICAgICAgIHRocm93OwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBVc2VkIHRvIHdpdGhkcmF3IHRoZSBiYWxhbmNlIHdoZW4gdGhlIHJvdW5kIGlzIGNvbXBsZXRlZC4gIFRoaXMKICAgKiBvbmx5IHdvcmtzIGlmIHRoZXJlIGFyZSBlaXRoZXIgbm8gd2lubmVycywgb3IgYWxsIHdpbm5lcnMgKyB0aGUKICAgKiBvd25lciBoYXZlIGJlZW4gcGFpZC4KICAgKi8KICBmdW5jdGlvbiB3aXRoZHJhdygpIG9ubHlPd25lciBhZnRlckRyYXcgewogICAgaWYgKHBhaWRPdXQoKSAmJiBvd25lckZlZSA9PSAwKSB7CiAgICAgIGlmICghb3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpKSB7CiAgICAgICAgdGhyb3c7CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIFNhbWUgYXMgYWJvdmUuICBUaGlzIGlzIG1vc3RseSBoZXJlIGJlY2F1c2UgaXQncyBvdmVycmlkaW5nIHRoZSBtZXRob2QKICAgKiBpbmhlcml0ZWQgZnJvbSBgT3duZWRgCiAgICovCiAgZnVuY3Rpb24gc2h1dGRvd24oKSBvbmx5T3duZXIgYWZ0ZXJEcmF3IHsKICAgIGlmIChwYWlkT3V0KCkgJiYgb3duZXJGZWUgPT0gMCkgewogICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgfQogIH0KCiAgLyoqCiAgICogQXR0ZW1wdCB0byBwYXkgdGhlIHdpbm5lcnMsIGlmIGFueS4gIElmIGFueSBgc2VuZGBzIGZhaWwsIHRoZSB3aW5uZXIKICAgKiB3aWxsIGhhdmUgdG8gY29sbGVjdCB0aGVpciB3aW5uaW5ncyBvbiB0aGVpciBvd24uCiAgICovCiAgZnVuY3Rpb24gZGlzdHJpYnV0ZVdpbm5pbmdzKCkgb25seU93bmVyIGFmdGVyRHJhdyB7CiAgICBpZiAod2lubmVycy5sZW5ndGggPiAwKSB7CiAgICAgIGZvciAodWludCBpID0gMDsgaSA8IHdpbm5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBhZGRyZXNzIHdpbm5lciA9IHdpbm5lcnNbaV07CiAgICAgICAgYm9vbCB1bmNsYWltZWQgPSB3aW5uaW5nc0NsYWltYWJsZVt3aW5uZXJdOwogICAgICAgIGlmICh1bmNsYWltZWQpIHsKICAgICAgICAgIHdpbm5pbmdzQ2xhaW1hYmxlW3dpbm5lcl0gPSBmYWxzZTsKICAgICAgICAgIGlmICghd2lubmVyLnNlbmQocHJpemVWYWx1ZSkpIHsKICAgICAgICAgICAgLy8gSWYgSSBjYW4ndCBzZW5kIHlvdSBtb25leSwgZHVtYnNoaXQsIHlvdSBnZXQgdG8gY2xhaW0gaXQgb24geW91ciBvd24uCiAgICAgICAgICAgIC8vIG1heWJlIG5leHQgdGltZSBkb24ndCB1c2UgYSBjb250cmFjdCBvciB0cnkgdG8gZXhwbG9pdCB0aGUgZ2FtZS4KICAgICAgICAgICAgLy8gUmVnYXJkbGVzcywgeW91J3JlIG9uIHlvdXIgb3duLiAgSGFwcHkgYmlydGhkYXkgdG8gdGhlIGdyb3VuZC4KICAgICAgICAgICAgd2lubmluZ3NDbGFpbWFibGVbd2lubmVyXSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRydWUgaWYgaXQncyBhZnRlciB0aGUgZHJhdywgYW5kIGVpdGhlciB0aGVyZSBhcmUgbm8gd2lubmVycywgb3IgYWxsIHRoZSB3aW5uZXJzIGhhdmUgYmVlbiBwYWlkLgogICAqIEByZXR1cm4ge2Jvb2x9CiAgICovCiAgZnVuY3Rpb24gcGFpZE91dCgpIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgLy8gbm8gbmVlZCB0byB1c2UgdGhlIG1vZGlmaWVyIG9uIHRoaXMgZnVuY3Rpb24sIGp1c3QgZG8gdGhlIHNhbWUgY2hlY2sKICAgIC8vIGFuZCByZXR1cm4gZmFsc2UgaW5zdGVhZC4KICAgIGlmICh3aW5uaW5nTnVtYmVyc1BpY2tlZCA9PSBmYWxzZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAod2lubmVycy5sZW5ndGggPiAwKSB7CiAgICAgIGJvb2wgY2xhaW1lZCA9IHRydWU7CiAgICAgIC8vIGlmIGFueW9uZSBoYXNuJ3QgYmVlbiBzZW50IG9yIGNsYWltZWQgdGhlaXIgZWFybmluZ3MsCiAgICAgIC8vIHdlIHN0aWxsIGhhdmUgbW9uZXkgdG8gcGF5IG91dC4KICAgICAgZm9yICh1aW50IGkgPSAwOyBjbGFpbWVkICYmIGkgPCB3aW5uZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY2xhaW1lZCA9IGNsYWltZWQgJiYgIXdpbm5pbmdzQ2xhaW1hYmxlW3dpbm5lcnNbaV1dOwogICAgICB9CiAgICAgIHJldHVybiBjbGFpbWVkOwogICAgfSBlbHNlIHsKICAgICAgLy8gbm8gd2lubmVycywgbm90aGluZyB0byBwYXkuCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KCiAgLyoqCiAgICogV2lubmVycyBjYW4gY2xhaW0gdGhlaXIgb3duIHByaXplcyB1c2luZyB0aGlzLiAgSWYgdGhleSBkbwogICAqIHNvbWV0aGluZyBzdHVwaWQgbGlrZSB1c2UgYSBjb250cmFjdCwgdGhpcyBnaXZlcyB0aGVtIGEKICAgKiBhIHNlY29uZCBjaGFuY2UgYXQgd2l0aGRyYXdpbmcgdGhlaXIgZnVuZHMuICBOb3RlIHRoYXQKICAgKiB0aGlzIHNoYXJlcyBhbiBpbnRlcmxvY2sgd2l0aCBgZGlzdHJpYnV0ZVdpbm5pbmdzYC4KICAgKi8KICBmdW5jdGlvbiBjbGFpbVByaXplKCkgYWZ0ZXJEcmF3IHsKICAgIGlmICh3aW5uaW5nc0NsYWltYWJsZVttc2cuc2VuZGVyXSA9PSBmYWxzZSkgewogICAgICAvLyBnZXQuIG91dCEKICAgICAgdGhyb3c7CiAgICB9CiAgICB3aW5uaW5nc0NsYWltYWJsZVttc2cuc2VuZGVyXSA9IGZhbHNlOwogICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQocHJpemVWYWx1ZSkpIHsKICAgICAgLy8geW91IHJlYWxseSBhcmUgYSBkdW1ic2hpdCwgYXJlbid0IHlvdS4KICAgICAgdGhyb3c7CiAgICB9CiAgfQoKICAvLyBNYW4hIFdoYXQgZG8gSSBsb29rIGxpa2U/IEEgY2hhcml0eSBjYXNlPwogIC8vIFBsZWFzZS4KICAvLyBZb3UgY2FuJ3QgYnV5IG1lLCBob3QgZG9nIG1hbiEKICBmdW5jdGlvbiAoKSB7CiAgICB0aHJvdzsKICB9Cn0='.
	

]
