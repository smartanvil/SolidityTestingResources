Class {
	#name : #SRT06adba5ad6c494e536cad8afa1129ab9f7cb99bf,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT06adba5ad6c494e536cad8afa1129ab9f7cb99bf >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnRyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBFT1NCZXRHYW1lSW50ZXJmYWNlIHsKCXVpbnQyNTYgcHVibGljIERFVkVMT1BFUlNGVU5EOwoJdWludDI1NiBwdWJsaWMgTElBQklMSVRJRVM7CglmdW5jdGlvbiBwYXlEZXZlbG9wZXJzRnVuZChhZGRyZXNzIGRldmVsb3BlcikgcHVibGljOwoJZnVuY3Rpb24gcmVjZWl2ZVBheW1lbnRGb3JPcmFjbGl6ZSgpIHBheWFibGUgcHVibGljOwoJZnVuY3Rpb24gZ2V0TWF4V2luKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2KTsKfQoKY29udHJhY3QgRU9TQmV0QmFua3JvbGxJbnRlcmZhY2UgewoJZnVuY3Rpb24gcGF5RXRoZXJUb1dpbm5lcih1aW50MjU2IGFtdEV0aGVyLCBhZGRyZXNzIHdpbm5lcikgcHVibGljOwoJZnVuY3Rpb24gcmVjZWl2ZUV0aGVyRnJvbUdhbWVBZGRyZXNzKCkgcGF5YWJsZSBwdWJsaWM7CglmdW5jdGlvbiBwYXlPcmFjbGl6ZSh1aW50MjU2IGFtb3VudFRvUGF5KSBwdWJsaWM7CglmdW5jdGlvbiBnZXRCYW5rcm9sbCgpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1Nik7Cn0KCmNvbnRyYWN0IEVSQzIwIHsKCWZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQgc3VwcGx5KTsKCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQgYmFsYW5jZSk7CglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CglmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCWZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKCWV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludCBfdmFsdWUpOwoJZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IEVPU0JldEJhbmtyb2xsIGlzIEVSQzIwLCBFT1NCZXRCYW5rcm9sbEludGVyZmFjZSB7CgoJdXNpbmcgU2FmZU1hdGggZm9yICo7CgoJLy8gY29uc3RhbnRzIGZvciBFT1NCZXQgQmFua3JvbGwKCglhZGRyZXNzIHB1YmxpYyBPV05FUjsKCXVpbnQyNTYgcHVibGljIE1BWElNVU1JTlZFU1RNRU5UU0FMTE9XRUQ7Cgl1aW50MjU2IHB1YmxpYyBXQUlUVElNRVVOVElMV0lUSERSQVdPUlRSQU5TRkVSOwoJdWludDI1NiBwdWJsaWMgREVWRUxPUEVSU0ZVTkQ7CgoJLy8gdGhpcyB3aWxsIGJlIGluaXRpYWxpemVkIGFzIHRoZSB0cnVzdGVkIGdhbWUgYWRkcmVzc2VzIHdoaWNoIHdpbGwgZm9yd2FyZCB0aGVpciBldGhlcgoJLy8gdG8gdGhlIGJhbmtyb2xsIGNvbnRyYWN0LCBhbmQgd2hlbiBwbGF5ZXJzIHdpbiwgdGhleSB3aWxsIHJlcXVlc3QgdGhlIGJhbmtyb2xsIGNvbnRyYWN0IAoJLy8gdG8gc2VuZCB0aGVzZSBwbGF5ZXJzIHRoZWlyIHdpbm5pbmdzLgoJLy8gRmVlbCBmcmVlIHRvIGF1ZGl0IHRoZXNlIGNvbnRyYWN0cyBvbiBldGhlcnNjYW4uLi4KCW1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgVFJVU1RFREFERFJFU1NFUzsKCglhZGRyZXNzIHB1YmxpYyBESUNFOwoJYWRkcmVzcyBwdWJsaWMgU0xPVFM7CgoJLy8gbWFwcGluZyB0byBsb2cgdGhlIGxhc3QgdGltZSBhIHVzZXIgY29udHJpYnV0ZWQgdG8gdGhlIGJhbmtyb2xsIAoJbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGNvbnRyaWJ1dGlvblRpbWU7CgoJLy8gY29uc3RhbnRzIGZvciBFUkMyMCBzdGFuZGFyZAoJc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkVPU0JldCBTdGFrZSBUb2tlbnMiOwoJc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiRU9TQkVUU1QiOwoJdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgkvLyB2YXJpYWJsZSB0b3RhbCBzdXBwbHkKCXVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKCS8vIG1hcHBpbmcgdG8gc3RvcmUgdG9rZW5zCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VzOwoJbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93ZWQ7CgoJLy8gZXZlbnRzCglldmVudCBGdW5kQmFua3JvbGwoYWRkcmVzcyBjb250cmlidXRvciwgdWludDI1NiBldGhlckNvbnRyaWJ1dGVkLCB1aW50MjU2IHRva2Vuc1JlY2VpdmVkKTsKCWV2ZW50IENhc2hPdXQoYWRkcmVzcyBjb250cmlidXRvciwgdWludDI1NiBldGhlcldpdGhkcmF3biwgdWludDI1NiB0b2tlbnNDYXNoZWRJbik7CglldmVudCBGYWlsZWRTZW5kKGFkZHJlc3Mgc2VuZFRvLCB1aW50MjU2IGFtdCk7CgoJLy8gY2hlY2tzIHRoYXQgYW4gYWRkcmVzcyBpcyBhICJ0cnVzdGVkIGFkZHJlc3Mgb2YgYSBsZWdpdGltYXRlIEVPU0JldCBnYW1lIgoJbW9kaWZpZXIgYWRkcmVzc0luVHJ1c3RlZEFkZHJlc3NlcyhhZGRyZXNzIHRoaXNBZGRyZXNzKXsKCgkJcmVxdWlyZShUUlVTVEVEQUREUkVTU0VTW3RoaXNBZGRyZXNzXSk7CgkJXzsKCX0KCgkvLyBpbml0aWFsaXphdGlvbiBmdW5jdGlvbiAKCWZ1bmN0aW9uIEVPU0JldEJhbmtyb2xsKGFkZHJlc3MgZGljZSwgYWRkcmVzcyBzbG90cykgcHVibGljIHBheWFibGUgewoJCS8vIGZ1bmN0aW9uIGlzIHBheWFibGUsIG93bmVyIG9mIGNvbnRyYWN0IE1VU1QgInNlZWQiIGNvbnRyYWN0IHdpdGggc29tZSBldGhlciwgCgkJLy8gc28gdGhhdCB0aGUgcmF0aW9zIGFyZSBjb3JyZWN0IHdoZW4gdG9rZW5zIGFyZSBiZWluZyBtaW50ZWQKCQlyZXF1aXJlIChtc2cudmFsdWUgPiAwKTsKCgkJT1dORVIgPSBtc2cuc2VuZGVyOwoKCQkvLyAxMDAgdG9rZW5zL2V0aGVyIGlzIHRoZSBpbml0YWwgc2VlZCBhbW91bnQsIHNvOgoJCXVpbnQyNTYgaW5pdGlhbFRva2VucyA9IG1zZy52YWx1ZSAqIDEwMDsKCQliYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGluaXRpYWxUb2tlbnM7CgkJdG90YWxTdXBwbHkgPSBpbml0aWFsVG9rZW5zOwoKCQkvLyBsb2cgYSBtaW50IHRva2VucyBldmVudAoJCWVtaXQgVHJhbnNmZXIoMHgwLCBtc2cuc2VuZGVyLCBpbml0aWFsVG9rZW5zKTsKCgkJLy8gaW5zZXJ0IGdpdmVuIGdhbWUgYWRkcmVzc2VzIGludG8gdGhlIFRSVVNURURBRERSRVNTRVMgbWFwcGluZywgYW5kIHNhdmUgdGhlIGFkZHJlc3NlcyBhcyBnbG9iYWwgdmFyaWFibGVzCgkJVFJVU1RFREFERFJFU1NFU1tkaWNlXSA9IHRydWU7CgkJVFJVU1RFREFERFJFU1NFU1tzbG90c10gPSB0cnVlOwoKCQlESUNFID0gZGljZTsKCQlTTE9UUyA9IHNsb3RzOwoKCQlXQUlUVElNRVVOVElMV0lUSERSQVdPUlRSQU5TRkVSID0gNiBob3VyczsKCQlNQVhJTVVNSU5WRVNUTUVOVFNBTExPV0VEID0gNTAwIGV0aGVyOwoJfQoKCS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgkvLyBWSUVXIEZVTkNUSU9OUwoJLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gCgoJZnVuY3Rpb24gY2hlY2tXaGVuQ29udHJpYnV0b3JDYW5UcmFuc2Zlck9yV2l0aGRyYXcoYWRkcmVzcyBiYW5rcm9sbGVyQWRkcmVzcykgdmlldyBwdWJsaWMgcmV0dXJucyh1aW50MjU2KXsKCQlyZXR1cm4gY29udHJpYnV0aW9uVGltZVtiYW5rcm9sbGVyQWRkcmVzc107Cgl9CgoJZnVuY3Rpb24gZ2V0QmFua3JvbGwoKSB2aWV3IHB1YmxpYyByZXR1cm5zKHVpbnQyNTYpewoJCS8vIHJldHVybnMgdGhlIHRvdGFsIGJhbGFuY2UgbWludXMgdGhlIGRldmVsb3BlcnMgZnVuZCwgYXMgdGhlIGFtb3VudCBvZiBhY3RpdmUgYmFua3JvbGwKCQlyZXR1cm4gU2FmZU1hdGguc3ViKGFkZHJlc3ModGhpcykuYmFsYW5jZSwgREVWRUxPUEVSU0ZVTkQpOwoJfQoKCS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgkvLyBCQU5LUk9MTCBDT05UUkFDVCA8LT4gR0FNRSBDT05UUkFDVFMgZnVuY3Rpb25zCgkvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAKCglmdW5jdGlvbiBwYXlFdGhlclRvV2lubmVyKHVpbnQyNTYgYW10RXRoZXIsIGFkZHJlc3Mgd2lubmVyKSBwdWJsaWMgYWRkcmVzc0luVHJ1c3RlZEFkZHJlc3Nlcyhtc2cuc2VuZGVyKXsKCQkvLyB0aGlzIGZ1bmN0aW9uIHdpbGwgZ2V0IGNhbGxlZCBieSBhIGdhbWUgY29udHJhY3Qgd2hlbiBzb21lb25lIHdpbnMgYSBnYW1lCgkJLy8gdHJ5IHRvIHNlbmQsIGlmIGl0IGZhaWxzLCB0aGVuIHNlbmQgdGhlIGFtb3VudCB0byB0aGUgb3duZXIKCQkvLyBub3RlLCB0aGlzIHdpbGwgb25seSBoYXBwZW4gaWYgc29tZW9uZSBpcyBjYWxsaW5nIHRoZSBiZXR0aW5nIGZ1bmN0aW9ucyB3aXRoCgkJLy8gYSBjb250cmFjdC4gVGhleSBhcmUgY2xlYXJseSB1cCB0byBubyBnb29kLCBzbyB0aGV5IGNhbiBjb250YWN0IHVzIHRvIHJldHJlaXZlIAoJCS8vIHRoZWlyIGV0aGVyCgkJLy8gaWYgdGhlIGV0aGVyIGNhbm5vdCBiZSBzZW50IHRvIHVzLCB0aGUgT1dORVIsIHRoYXQgbWVhbnMgd2UgYXJlIHVwIHRvIG5vIGdvb2QsIAoJCS8vIGFuZCB0aGUgZXRoZXIgd2lsbCBqdXN0IGJlIGdpdmVuIHRvIHRoZSBiYW5rcm9sbGVycyBhcyBpZiB0aGUgcGxheWVyL293bmVyIGxvc3QgCgoJCWlmICghIHdpbm5lci5zZW5kKGFtdEV0aGVyKSl7CgoJCQllbWl0IEZhaWxlZFNlbmQod2lubmVyLCBhbXRFdGhlcik7CgoJCQlpZiAoISBPV05FUi5zZW5kKGFtdEV0aGVyKSl7CgoJCQkJZW1pdCBGYWlsZWRTZW5kKE9XTkVSLCBhbXRFdGhlcik7CgkJCX0KCQl9Cgl9CgoJZnVuY3Rpb24gcmVjZWl2ZUV0aGVyRnJvbUdhbWVBZGRyZXNzKCkgcGF5YWJsZSBwdWJsaWMgYWRkcmVzc0luVHJ1c3RlZEFkZHJlc3Nlcyhtc2cuc2VuZGVyKXsKCQkvLyB0aGlzIGZ1bmN0aW9uIHdpbGwgZ2V0IGNhbGxlZCBmcm9tIHRoZSBnYW1lIGNvbnRyYWN0cyB3aGVuIHNvbWVvbmUgc3RhcnRzIGEgZ2FtZS4KCX0KCglmdW5jdGlvbiBwYXlPcmFjbGl6ZSh1aW50MjU2IGFtb3VudFRvUGF5KSBwdWJsaWMgYWRkcmVzc0luVHJ1c3RlZEFkZHJlc3Nlcyhtc2cuc2VuZGVyKXsKCQkvLyB0aGlzIGZ1bmN0aW9uIHdpbGwgZ2V0IGNhbGxlZCB3aGVuIGEgZ2FtZSBjb250cmFjdCBtdXN0IHBheSBwYXlPcmFjbGl6ZQoJCUVPU0JldEdhbWVJbnRlcmZhY2UobXNnLnNlbmRlcikucmVjZWl2ZVBheW1lbnRGb3JPcmFjbGl6ZS52YWx1ZShhbW91bnRUb1BheSkoKTsKCX0KCgkvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoJLy8gQkFOS1JPTEwgQ09OVFJBQ1QgTUFJTiBGVU5DVElPTlMKCS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoKCS8vIHRoaXMgZnVuY3Rpb24gQUREUyB0byB0aGUgYmFua3JvbGwgb2YgRU9TQmV0LCBhbmQgY3JlZGl0cyB0aGUgYmFua3JvbGxlciBhIHByb3BvcnRpb25hbAoJLy8gYW1vdW50IG9mIHRva2VucyBzbyB0aGV5IG1heSB3aXRoZHJhdyB0aGVpciB0b2tlbnMgbGF0ZXIKCS8vIGFsc28gaWYgdGhlcmUgaXMgb25seSBhIGxpbWl0ZWQgYW1vdW50IG9mIHNwYWNlIGxlZnQgaW4gdGhlIGJhbmtyb2xsLCBhIHVzZXIgY2FuIGp1c3Qgc2VuZCBhcyBtdWNoIAoJLy8gZXRoZXIgYXMgdGhleSB3YW50LCBiZWNhdXNlIHRoZXkgd2lsbCBiZSBhYmxlIHRvIGNvbnRyaWJ1dGUgdXAgdG8gdGhlIG1heGltdW0sIGFuZCB0aGVuIGdldCByZWZ1bmRlZCB0aGUgcmVzdC4KCWZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKCgkJLy8gc2F2ZSBpbiBtZW1vcnkgZm9yIGNoZWFwIGFjY2Vzcy4KCQkvLyB0aGlzIHJlcHJlc2VudHMgdGhlIHRvdGFsIGJhbmtyb2xsIGJhbGFuY2UgYmVmb3JlIHRoZSBmdW5jdGlvbiB3YXMgY2FsbGVkLgoJCXVpbnQyNTYgY3VycmVudFRvdGFsQmFua3JvbGwgPSBTYWZlTWF0aC5zdWIoZ2V0QmFua3JvbGwoKSwgbXNnLnZhbHVlKTsKCQl1aW50MjU2IG1heEludmVzdG1lbnRzQWxsb3dlZCA9IE1BWElNVU1JTlZFU1RNRU5UU0FMTE9XRUQ7CgoJCXJlcXVpcmUoY3VycmVudFRvdGFsQmFua3JvbGwgPCBtYXhJbnZlc3RtZW50c0FsbG93ZWQgJiYgbXNnLnZhbHVlICE9IDApOwoKCQl1aW50MjU2IGN1cnJlbnRTdXBwbHlPZlRva2VucyA9IHRvdGFsU3VwcGx5OwoJCXVpbnQyNTYgY29udHJpYnV0ZWRFdGhlcjsKCgkJYm9vbCBjb250cmlidXRpb25UYWtlc0Jhbmtyb2xsT3ZlckxpbWl0OwoJCXVpbnQyNTYgaWZDb250cmlidXRpb25UYWtlc0Jhbmtyb2xsT3ZlckxpbWl0X1JlZnVuZDsKCgkJdWludDI1NiBjcmVkaXRlZFRva2VuczsKCgkJaWYgKFNhZmVNYXRoLmFkZChjdXJyZW50VG90YWxCYW5rcm9sbCwgbXNnLnZhbHVlKSA+IG1heEludmVzdG1lbnRzQWxsb3dlZCl7CgkJCS8vIGFsbG93IHRoZSBiYW5rcm9sbGVyIHRvIGNvbnRyaWJ1dGUgdXAgdG8gdGhlIGFsbG93ZWQgYW1vdW50IG9mIGV0aGVyLCBhbmQgcmVmdW5kIHRoZSByZXN0LgoJCQljb250cmlidXRpb25UYWtlc0Jhbmtyb2xsT3ZlckxpbWl0ID0gdHJ1ZTsKCQkJLy8gc2V0IGNvbnRyaWJ1dGVkIGV0aGVyIGFzIChNQVhJTVVNSU5WRVNUTUVOVFNBTExPV0VEIC0gQkFOS1JPTEwpCgkJCWNvbnRyaWJ1dGVkRXRoZXIgPSBTYWZlTWF0aC5zdWIobWF4SW52ZXN0bWVudHNBbGxvd2VkLCBjdXJyZW50VG90YWxCYW5rcm9sbCk7CgkJCS8vIHJlZnVuZCB0aGUgcmVzdCBvZiB0aGUgZXRoZXIsIHdoaWNoIGlzIChvcmlnaW5hbCBhbW91bnQgc2VudCAtIChtYXhpbXVtIGFtb3VudCBhbGxvd2VkIC0gYmFua3JvbGwpKQoJCQlpZkNvbnRyaWJ1dGlvblRha2VzQmFua3JvbGxPdmVyTGltaXRfUmVmdW5kID0gU2FmZU1hdGguc3ViKG1zZy52YWx1ZSwgY29udHJpYnV0ZWRFdGhlcik7CgkJfQoJCWVsc2UgewoJCQljb250cmlidXRlZEV0aGVyID0gbXNnLnZhbHVlOwoJCX0KICAgICAgICAKCQlpZiAoY3VycmVudFN1cHBseU9mVG9rZW5zICE9IDApewoJCQkvLyBkZXRlcm1pbmUgdGhlIHJhdGlvIG9mIGNvbnRyaWJ1dGlvbiB2ZXJzdXMgdG90YWwgQkFOS1JPTEwuCgkJCWNyZWRpdGVkVG9rZW5zID0gU2FmZU1hdGgubXVsKGNvbnRyaWJ1dGVkRXRoZXIsIGN1cnJlbnRTdXBwbHlPZlRva2VucykgLyBjdXJyZW50VG90YWxCYW5rcm9sbDsKCQl9CgkJZWxzZSB7CgkJCS8vIGVkZ2UgY2FzZSB3aGVyZSBBTEwgbW9uZXkgd2FzIGNhc2hlZCBvdXQgZnJvbSBiYW5rcm9sbAoJCQkvLyBzbyBjdXJyZW50U3VwcGx5T2ZUb2tlbnMgPT0gMAoJCQkvLyBjdXJyZW50VG90YWxCYW5rcm9sbCBjYW4gPT0gMCBvciBub3QsIGlmIHNvbWVvbmUgbWluZXMvc2VsZmRlc3RydWN0J3MgdG8gdGhlIGNvbnRyYWN0CgkJCS8vIGJ1dCBlaXRoZXIgd2F5LCBnaXZlIGFsbCB0aGUgYmFua3JvbGwgdG8gcGVyc29uIHdobyBkZXBvc2l0cyBldGhlcgoJCQljcmVkaXRlZFRva2VucyA9IFNhZmVNYXRoLm11bChjb250cmlidXRlZEV0aGVyLCAxMDApOwoJCX0KCQkKCQkvLyBub3cgdXBkYXRlIHRoZSB0b3RhbCBzdXBwbHkgb2YgdG9rZW5zIGFuZCBiYW5rcm9sbCBhbW91bnQKCQl0b3RhbFN1cHBseSA9IFNhZmVNYXRoLmFkZChjdXJyZW50U3VwcGx5T2ZUb2tlbnMsIGNyZWRpdGVkVG9rZW5zKTsKCgkJLy8gbm93IGNyZWRpdCB0aGUgdXNlciB3aXRoIGhpcyBhbW91bnQgb2YgY29udHJpYnV0ZWQgdG9rZW5zIAoJCWJhbGFuY2VzW21zZy5zZW5kZXJdID0gU2FmZU1hdGguYWRkKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBjcmVkaXRlZFRva2Vucyk7CgoJCS8vIHVwZGF0ZSBoaXMgY29udHJpYnV0aW9uIHRpbWUgZm9yIHN0YWtlIHRpbWUgbG9ja2luZwoJCWNvbnRyaWJ1dGlvblRpbWVbbXNnLnNlbmRlcl0gPSBibG9jay50aW1lc3RhbXA7CgoJCS8vIG5vdyBsb29rIGlmIHRoZSBhdHRlbXB0ZWQgY29udHJpYnV0aW9uIHdvdWxkIGhhdmUgdGFrZW4gdGhlIEJBTktST0xMIG92ZXIgdGhlIGxpbWl0LCAKCQkvLyBhbmQgaWYgdHJ1ZSwgcmVmdW5kIHRoZSBleGNlc3MgZXRoZXIuCgkJaWYgKGNvbnRyaWJ1dGlvblRha2VzQmFua3JvbGxPdmVyTGltaXQpewoJCQltc2cuc2VuZGVyLnRyYW5zZmVyKGlmQ29udHJpYnV0aW9uVGFrZXNCYW5rcm9sbE92ZXJMaW1pdF9SZWZ1bmQpOwoJCX0KCgkJLy8gbG9nIGFuIGV2ZW50IGFib3V0IGZ1bmRpbmcgYmFua3JvbGwKCQllbWl0IEZ1bmRCYW5rcm9sbChtc2cuc2VuZGVyLCBjb250cmlidXRlZEV0aGVyLCBjcmVkaXRlZFRva2Vucyk7CgoJCS8vIGxvZyBhIG1pbnQgdG9rZW5zIGV2ZW50CgkJZW1pdCBUcmFuc2ZlcigweDAsIG1zZy5zZW5kZXIsIGNyZWRpdGVkVG9rZW5zKTsKCX0KCglmdW5jdGlvbiBjYXNob3V0RU9TQmV0U3Rha2VUb2tlbnModWludDI1NiBfYW1vdW50VG9rZW5zKSBwdWJsaWMgewoJCS8vIEluIGVmZmVjdCwgdGhpcyBmdW5jdGlvbiBpcyB0aGUgT1BQT1NJVEUgb2YgdGhlIHVuLW5hbWVkIHBheWFibGUgZnVuY3Rpb24gYWJvdmVeXl4KCQkvLyB0aGlzIGFsbG93cyBiYW5rcm9sbGVycyB0byAiY2FzaCBvdXQiIGF0IGFueSB0aW1lLCBhbmQgcmVjZWl2ZSB0aGUgZXRoZXIgdGhhdCB0aGV5IGNvbnRyaWJ1dGVkLCBQTFVTCgkJLy8gYSBwcm9wb3J0aW9uIG9mIGFueSBldGhlciB0aGF0IHdhcyBlYXJuZWQgYnkgdGhlIHNtYXJ0IGNvbnRhY3Qgd2hlbiB0aGVpciBldGhlciB3YXMgInN0YWtpbmciLCBIb3dldmVyCgkJLy8gdGhpcyB3b3JrcyBpbiByZXZlcnNlIGFzIHdlbGwuIEFueSBuZXQgbG9zc2VzIG9mIHRoZSBzbWFydCBjb250cmFjdCB3aWxsIGJlIGFic29yYmVkIGJ5IHRoZSBwbGF5ZXIgaW4gbGlrZSBtYW5uZXIuCgkJLy8gT2YgY291cnNlLCBkdWUgdG8gdGhlIGNvbnN0YW50IGhvdXNlIGVkZ2UsIGEgYmFua3JvbGxlciB0aGF0IGxlYXZlcyB0aGVpciBldGhlciBpbiB0aGUgY29udHJhY3QgbG9uZyBlbm91Z2gKCQkvLyBpcyBlZmZlY3RpdmVseSBndWFyYW50ZWVkIHRvIHdpdGhkcmF3IG1vcmUgZXRoZXIgdGhhbiB0aGV5IG9yaWdpbmFsbHkgInN0YWtlZCIKCgkJLy8gc2F2ZSBpbiBtZW1vcnkgZm9yIGNoZWFwIGFjY2Vzcy4KCQl1aW50MjU2IHRva2VuQmFsYW5jZSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwoJCS8vIHZlcmlmeSB0aGF0IHRoZSBjb250cmlidXRvciBoYXMgZW5vdWdoIHRva2VucyB0byBjYXNoIG91dCB0aGlzIG1hbnksIGFuZCBoYXMgd2FpdGVkIHRoZSByZXF1aXJlZCB0aW1lLgoJCXJlcXVpcmUoX2Ftb3VudFRva2VucyA8PSB0b2tlbkJhbGFuY2UgCgkJCSYmIGNvbnRyaWJ1dGlvblRpbWVbbXNnLnNlbmRlcl0gKyBXQUlUVElNRVVOVElMV0lUSERSQVdPUlRSQU5TRkVSIDw9IGJsb2NrLnRpbWVzdGFtcAoJCQkmJiBfYW1vdW50VG9rZW5zID4gMCk7CgoJCS8vIHNhdmUgaW4gbWVtb3J5IGZvciBjaGVhcCBhY2Nlc3MuCgkJLy8gYWdhaW4sIHJlcHJlc2VudHMgdGhlIHRvdGFsIGJhbGFuY2Ugb2YgdGhlIGNvbnRyYWN0IGJlZm9yZSB0aGUgZnVuY3Rpb24gd2FzIGNhbGxlZC4KCQl1aW50MjU2IGN1cnJlbnRUb3RhbEJhbmtyb2xsID0gZ2V0QmFua3JvbGwoKTsKCQl1aW50MjU2IGN1cnJlbnRTdXBwbHlPZlRva2VucyA9IHRvdGFsU3VwcGx5OwoKCQkvLyBjYWxjdWxhdGUgdGhlIHRva2VuIHdpdGhkcmF3IHJhdGlvIGJhc2VkIG9uIGN1cnJlbnQgc3VwcGx5IAoJCXVpbnQyNTYgd2l0aGRyYXdFdGhlciA9IFNhZmVNYXRoLm11bChfYW1vdW50VG9rZW5zLCBjdXJyZW50VG90YWxCYW5rcm9sbCkgLyBjdXJyZW50U3VwcGx5T2ZUb2tlbnM7CgoJCS8vIGRldmVsb3BlcnMgdGFrZSAxJSBvZiB3aXRoZHJhd2xzIAoJCXVpbnQyNTYgZGV2ZWxvcGVyc0N1dCA9IHdpdGhkcmF3RXRoZXIgLyAxMDA7CgkJdWludDI1NiBjb250cmlidXRvckFtb3VudCA9IFNhZmVNYXRoLnN1Yih3aXRoZHJhd0V0aGVyLCBkZXZlbG9wZXJzQ3V0KTsKCgkJLy8gbm93IHVwZGF0ZSB0aGUgdG90YWwgc3VwcGx5IG9mIHRva2VucyBieSBzdWJ0cmFjdGluZyB0aGUgdG9rZW5zIHRoYXQgYXJlIGJlaW5nICJjYXNoZWQgaW4iCgkJdG90YWxTdXBwbHkgPSBTYWZlTWF0aC5zdWIoY3VycmVudFN1cHBseU9mVG9rZW5zLCBfYW1vdW50VG9rZW5zKTsKCgkJLy8gYW5kIHVwZGF0ZSB0aGUgdXNlcnMgc3VwcGx5IG9mIHRva2VucyAKCQliYWxhbmNlc1ttc2cuc2VuZGVyXSA9IFNhZmVNYXRoLnN1Yih0b2tlbkJhbGFuY2UsIF9hbW91bnRUb2tlbnMpOwoKCQkvLyB1cGRhdGUgdGhlIGRldmVsb3BlcnMgZnVuZCBiYXNlZCBvbiB0aGlzIGNhbGN1bGF0ZWQgYW1vdW50IAoJCURFVkVMT1BFUlNGVU5EID0gU2FmZU1hdGguYWRkKERFVkVMT1BFUlNGVU5ELCBkZXZlbG9wZXJzQ3V0KTsKCgkJLy8gbGFzdGx5LCB0cmFuc2ZlciB0aGUgZXRoZXIgYmFjayB0byB0aGUgYmFua3JvbGxlci4gVGhhbmtzIGZvciB5b3VyIGNvbnRyaWJ1dGlvbiEKCQltc2cuc2VuZGVyLnRyYW5zZmVyKGNvbnRyaWJ1dG9yQW1vdW50KTsKCgkJLy8gbG9nIGFuIGV2ZW50IGFib3V0IGNhc2hvdXQKCQllbWl0IENhc2hPdXQobXNnLnNlbmRlciwgY29udHJpYnV0b3JBbW91bnQsIF9hbW91bnRUb2tlbnMpOwoKCQkvLyBsb2cgYSBkZXN0cm95IHRva2VucyBldmVudAoJCWVtaXQgVHJhbnNmZXIobXNnLnNlbmRlciwgMHgwLCBfYW1vdW50VG9rZW5zKTsKCX0KCgkvLyBUTyBDQUxMIFRISVMgRlVOQ1RJT04gRUFTSUxZLCBTRU5EIEEgMCBFVEhFUiBUUkFOU0FDVElPTiBUTyBUSElTIENPTlRSQUNUIFdJVEggRVhUUkEgREFUQTogMHg3YTA5NTg4YgoJZnVuY3Rpb24gY2FzaG91dEVPU0JldFN0YWtlVG9rZW5zX0FMTCgpIHB1YmxpYyB7CgoJCS8vIGp1c3QgZm9yd2FyZCB0byBjYXNob3V0RU9TQmV0U3Rha2VUb2tlbnMgd2l0aCBpbnB1dCBhcyB0aGUgc2VuZGVycyBlbnRpcmUgYmFsYW5jZQoJCWNhc2hvdXRFT1NCZXRTdGFrZVRva2VucyhiYWxhbmNlc1ttc2cuc2VuZGVyXSk7Cgl9CgoJLy8vLy8vLy8vLy8vLy8vLy8vLy8KCS8vIE9XTkVSIEZVTkNUSU9OUzoKCS8vLy8vLy8vLy8vLy8vLy8vLy8vCgkvLyBQbGVhc2UsIGJlIGF3YXJlIHRoYXQgdGhlIG93bmVyIE9OTFkgY2FuIGNoYW5nZToKCQkvLyAxLiBUaGUgb3duZXIgY2FuIGluY3JlYXNlIG9yIGRlY3JlYXNlIHRoZSB0YXJnZXQgYW1vdW50IGZvciBhIGdhbWUuIFRoZXkgY2FuIHRoZW4gY2FsbCB0aGUgdXBkYXRlciBmdW5jdGlvbiB0byBnaXZlL3JlY2VpdmUgdGhlIGV0aGVyIGZyb20gdGhlIGdhbWUuCgkJLy8gMS4gVGhlIHdhaXQgdGltZSB1bnRpbCBhIHVzZXIgY2FuIHdpdGhkcmF3IG9yIHRyYW5zZmVyIHRoZWlyIHRva2VucyBhZnRlciBwdXJjaGFzZSB0aHJvdWdoIHRoZSBkZWZhdWx0IGZ1bmN0aW9uIGFib3ZlIF5eXgoJCS8vIDIuIFRoZSBvd25lciBjYW4gY2hhbmdlIHRoZSBtYXhpbXVtIGFtb3VudCBvZiBpbnZlc3RtZW50cyBhbGxvd2VkLiBUaGlzIGFsbG93cyBmb3IgZWFybHkgY29udHJpYnV0b3JzIHRvIGd1YXJhbnRlZQoJCS8vIAkJYSBjZXJ0YWluIHBlcmNlbnRhZ2Ugb2YgdGhlIGJhbmtyb2xsIHNvIHRoYXQgdGhlaXIgc3Rha2UgY2Fubm90IGJlIGRpbHV0ZWQgaW1tZWRpYXRlbHkuIEhvd2V2ZXIsIGJlIGF3YXJlIHRoYXQgdGhlIAoJCS8vCQltYXhpbXVtIGFtb3VudCBvZiBpbnZlc3RtZW50cyBhbGxvd2VkIHdpbGwgYmUgcmFpc2VkIG92ZXIgdGltZS4gVGhpcyB3aWxsIGFsbG93IGZvciBoaWdoZXIgYmV0cyBieSBnYW1ibGVycywgcmVzdWx0aW5nCgkJLy8gCQlpbiBoaWdoZXIgZGl2aWRlbmRzIGZvciB0aGUgYmFua3JvbGxlcnMKCQkvLyAzLiBUaGUgb3duZXIgY2FuIGZyZWV6ZSBwYXlvdXRzIHRvIGJldHRvcnMuIFRoaXMgd2lsbCBiZSB1c2VkIGluIGNhc2Ugb2YgYW4gZW1lcmdlbmN5LCBhbmQgdGhlIGNvbnRyYWN0IHdpbGwgcmVqZWN0IGFsbAoJCS8vCQluZXcgYmV0cyBhcyB3ZWxsLiBUaGlzIGRvZXMgbm90IG1lYW4gdGhhdCBiZXR0b3JzIHdpbGwgbG9zZSB0aGVpciBtb25leSB3aXRob3V0IHJlY29tcGVuc2UuIFRoZXkgd2lsbCBiZSBhbGxvd2VkIHRvIGNhbGwgdGhlIAoJCS8vIAkJInJlZnVuZCIgZnVuY3Rpb24gaW4gdGhlIHJlc3BlY3RpdmUgZ2FtZSBzbWFydCBjb250cmFjdCBvbmNlIHBheW91dHMgYXJlIHVuLWZyb3plbi4KCQkvLyA0LiBGaW5hbGx5LCB0aGUgb3duZXIgY2FuIG1vZGlmeSBhbmQgd2l0aGRyYXcgdGhlIGRldmVsb3BlcnMgcmV3YXJkLCB3aGljaCB3aWxsIGZ1bmQgZnV0dXJlIGRldmVsb3BtZW50LCBpbmNsdWRpbmcgbmV3IGdhbWVzLCBhIHNleGllciBmcm9udGVuZCwKCQkvLyAJCWFuZCBUUlVFIERBTyBnb3Zlcm5hbmNlIHNvIHRoYXQgb25seU93bmVyIGZ1bmN0aW9ucyBkb24ndCBoYXZlIHRvIGV4aXN0IGFueW1vcmUgOykgYW5kIGluIG9yZGVyIHRvIGVmZmVjdGl2ZWx5IHJlYWN0IHRvIGNoYW5nZXMgCgkJLy8gCQlpbiB0aGUgbWFya2V0IChsb3dlciB0aGUgcGVyY2VudGFnZSBiZWNhdXNlIG9mIGluY3JlYXNlZCBjb21wZXRpdGlvbiBpbiB0aGUgYmxvY2tjaGFpbiBjYXNpbm8gc3BhY2UsIGV0Yy4pCgoJZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIHsKCQlyZXF1aXJlKG1zZy5zZW5kZXIgPT0gT1dORVIpOwoKCQlPV05FUiA9IG5ld093bmVyOwoJfQoKCWZ1bmN0aW9uIGNoYW5nZVdhaXRUaW1lVW50aWxXaXRoZHJhd09yVHJhbnNmZXIodWludDI1NiB3YWl0VGltZSkgcHVibGljIHsKCQkvLyB3YWl0VGltZSBNVVNUIGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byAxMCB3ZWVrcwoJCXJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gT1dORVIgJiYgd2FpdFRpbWUgPD0gNjA0ODAwMCk7CgoJCVdBSVRUSU1FVU5USUxXSVRIRFJBV09SVFJBTlNGRVIgPSB3YWl0VGltZTsKCX0KCglmdW5jdGlvbiBjaGFuZ2VNYXhpbXVtSW52ZXN0bWVudHNBbGxvd2VkKHVpbnQyNTYgbWF4QW1vdW50KSBwdWJsaWMgewoJCXJlcXVpcmUobXNnLnNlbmRlciA9PSBPV05FUik7CgoJCU1BWElNVU1JTlZFU1RNRU5UU0FMTE9XRUQgPSBtYXhBbW91bnQ7Cgl9CgoKCWZ1bmN0aW9uIHdpdGhkcmF3RGV2ZWxvcGVyc0Z1bmQoYWRkcmVzcyByZWNlaXZlcikgcHVibGljIHsKCQlyZXF1aXJlKG1zZy5zZW5kZXIgPT0gT1dORVIpOwoKCQkvLyBmaXJzdCBnZXQgZGV2ZWxvcGVycyBmdW5kIGZyb20gZWFjaCBnYW1lIAogICAgICAgIEVPU0JldEdhbWVJbnRlcmZhY2UoRElDRSkucGF5RGV2ZWxvcGVyc0Z1bmQocmVjZWl2ZXIpOwoJCUVPU0JldEdhbWVJbnRlcmZhY2UoU0xPVFMpLnBheURldmVsb3BlcnNGdW5kKHJlY2VpdmVyKTsKCgkJLy8gbm93IHNlbmQgdGhlIGRldmVsb3BlcnMgZnVuZCBmcm9tIHRoZSBtYWluIGNvbnRyYWN0LgoJCXVpbnQyNTYgZGV2ZWxvcGVyc0Z1bmQgPSBERVZFTE9QRVJTRlVORDsKCgkJLy8gc2V0IGRldmVsb3BlcnMgZnVuZCB0byB6ZXJvCgkJREVWRUxPUEVSU0ZVTkQgPSAwOwoKCQkvLyB0cmFuc2ZlciB0aGlzIGFtb3VudCB0byB0aGUgb3duZXIhCgkJcmVjZWl2ZXIudHJhbnNmZXIoZGV2ZWxvcGVyc0Z1bmQpOwoJfQoKCS8vIHJlc2N1ZSB0b2tlbnMgaW5hZHZlcnRlbnRseSBzZW50IHRvIHRoZSBjb250cmFjdCBhZGRyZXNzIAoJZnVuY3Rpb24gRVJDMjBSZXNjdWUoYWRkcmVzcyB0b2tlbkFkZHJlc3MsIHVpbnQyNTYgYW10VG9rZW5zKSBwdWJsaWMgewoJCXJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gT1dORVIpOwoKCQlFUkMyMCh0b2tlbkFkZHJlc3MpLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGFtdFRva2Vucyk7Cgl9CgoJLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoJLy8gQkFTSUMgRVJDMjAgVE9LRU4gT1BFUkFUSU9OUwoJLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCWZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCl7CgkJcmV0dXJuIHRvdGFsU3VwcGx5OwoJfQoKCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCl7CgkJcmV0dXJuIGJhbGFuY2VzW19vd25lcl07Cgl9CgoJLy8gZG9uJ3QgYWxsb3cgdHJhbnNmZXJzIGJlZm9yZSB0aGUgcmVxdWlyZWQgd2FpdC10aW1lCgkvLyBhbmQgZG9uJ3QgYWxsb3cgdHJhbnNmZXJzIHRvIHRoaXMgY29udHJhY3QgYWRkciwgaXQnbGwganVzdCBraWxsIHRva2VucwoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKXsKCQlyZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAKCQkJJiYgY29udHJpYnV0aW9uVGltZVttc2cuc2VuZGVyXSArIFdBSVRUSU1FVU5USUxXSVRIRFJBV09SVFJBTlNGRVIgPD0gYmxvY2sudGltZXN0YW1wCgkJCSYmIF90byAhPSBhZGRyZXNzKHRoaXMpCgkJCSYmIF90byAhPSBhZGRyZXNzKDApKTsKCgkJLy8gc2FmZWx5IHN1YnRyYWN0CgkJYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBTYWZlTWF0aC5zdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIF92YWx1ZSk7CgkJYmFsYW5jZXNbX3RvXSA9IFNhZmVNYXRoLmFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwoKCQkvLyBsb2cgZXZlbnQgCgkJZW1pdCBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLy8gZG9uJ3QgYWxsb3cgdHJhbnNmZXJzIGJlZm9yZSB0aGUgcmVxdWlyZWQgd2FpdC10aW1lCgkvLyBhbmQgZG9uJ3QgYWxsb3cgdHJhbnNmZXJzIHRvIHRoZSBjb250cmFjdCBhZGRyLCBpdCdsbCBqdXN0IGtpbGwgdG9rZW5zCglmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyhib29sKXsKCQlyZXF1aXJlKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAKCQkJJiYgYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAKCQkJJiYgY29udHJpYnV0aW9uVGltZVtfZnJvbV0gKyBXQUlUVElNRVVOVElMV0lUSERSQVdPUlRSQU5TRkVSIDw9IGJsb2NrLnRpbWVzdGFtcAoJCQkmJiBfdG8gIT0gYWRkcmVzcyh0aGlzKQoJCQkmJiBfdG8gIT0gYWRkcmVzcygwKSk7CgoJCS8vIHNhZmVseSBhZGQgdG8gX3RvIGFuZCBzdWJ0cmFjdCBmcm9tIF9mcm9tLCBhbmQgc3VidHJhY3QgZnJvbSBhbGxvd2VkIGJhbGFuY2VzLgoJCWJhbGFuY2VzW190b10gPSBTYWZlTWF0aC5hZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgCQliYWxhbmNlc1tfZnJvbV0gPSBTYWZlTWF0aC5zdWIoYmFsYW5jZXNbX2Zyb21dLCBfdmFsdWUpOwogIAkJYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBTYWZlTWF0aC5zdWIoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0sIF92YWx1ZSk7CgogIAkJLy8gbG9nIGV2ZW50CgkJZW1pdCBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwoJCXJldHVybiB0cnVlOwogICAJCQoJfQoJCglmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyhib29sKXsKCgkJYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CgkJZW1pdCBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKCQkvLyBsb2cgZXZlbnQKCQlyZXR1cm4gdHJ1ZTsKCX0KCQoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50KXsKCQlyZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKCX0KfQ=='.
	

]
