Class {
	#name : #SRTe50365f5d679cb98a1dd62d6f6e58e59321bcddf,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe50365f5d679cb98a1dd62d6f6e58e59321bcddf >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTI7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8vIEFic3RyYWN0IGNvbnRyYWN0IGZvciB0aGUgZnVsbCBFUkMgMjAgVG9rZW4gc3RhbmRhcmQKLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCgpjb250cmFjdCBUb2tlbiB7CiAgICAvKiBUaGlzIGlzIGEgc2xpZ2h0IGNoYW5nZSB0byB0aGUgRVJDMjAgYmFzZSBzdGFuZGFyZC4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgaXMgcmVwbGFjZWQgd2l0aDoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgVGhpcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgYSBnZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSB0b3RhbFN1cHBseS4KICAgIFRoaXMgaXMgbW92ZWQgdG8gdGhlIGJhc2UgY29udHJhY3Qgc2luY2UgcHVibGljIGdldHRlciBmdW5jdGlvbnMgYXJlIG5vdAogICAgY3VycmVudGx5IHJlY29nbmlzZWQgYXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIG1hdGNoaW5nIGFic3RyYWN0CiAgICBmdW5jdGlvbiBieSB0aGUgY29tcGlsZXIuCiAgICAqLwogICAgLy8vIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBgX2Zyb21gCiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMsIGFmdGVyIHRoYXQgZnVuY3Rpb24gYHJlY2VpdmVBcHByb3ZhbGAKICAgIC8vLyBAbm90aWNlIHdpbGwgYmUgY2FsbGVkIG9uIGBfc3BlbmRlcmAgYWRkcmVzcwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlcgogICAgLy8vIEBwYXJhbSBfZXh0cmFEYXRhIFNvbWUgZGF0YSB0byBwYXNzIGluIGNhbGxiYWNrIGZ1bmN0aW9uCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgSXNzdWFuY2UoYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKTsKfQoKLyoKSW1wbGVtZW50cyBFUkMgMjAgVG9rZW4gc3RhbmRhcmQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAouKi8KCgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy9EZWZhdWx0IGFzc3VtZXMgdG90YWxTdXBwbHkgY2FuJ3QgYmUgb3ZlciBtYXggKDJeMjU2IC0gMSkuCiAgICAgICAgLy9JZiB5b3VyIHRva2VuIGxlYXZlcyBvdXQgdG90YWxTdXBwbHkgYW5kIGNhbiBpc3N1ZSBtb3JlIHRva2VucyBhcyB0aW1lIGdvZXMgb24sIHlvdSBuZWVkIHRvIGNoZWNrIGlmIGl0IGRvZXNuJ3Qgd3JhcC4KICAgICAgICAvL1JlcGxhY2UgdGhlIGlmIHdpdGggdGhpcyBvbmUgaW5zdGVhZC4KICAgICAgICAvL2lmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvL3NhbWUgYXMgYWJvdmUuIFJlcGxhY2UgdGhpcyBsaW5lIHdpdGggdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBwcm90ZWN0IGFnYWluc3Qgd3JhcHBpbmcgdWludHMuCiAgICAgICAgLy9pZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKCiAgICAgICAgc3RyaW5nIG1lbW9yeSBzaWduYXR1cmUgPSAicmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MsdWludDI1NixhZGRyZXNzLGJ5dGVzKSI7CgogICAgICAgIGlmICghX3NwZW5kZXIuY2FsbChieXRlczQoYnl0ZXMzMihzaGEzKHNpZ25hdHVyZSkpKSwgbXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cn0KCgoKY29udHJhY3QgTEFUVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIC8qIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovCgogICAgYWRkcmVzcyAgICAgcHVibGljIGZvdW5kZXI7CiAgICBhZGRyZXNzICAgICBwdWJsaWMgbWludGVyID0gMDsKICAgIGFkZHJlc3MgICAgIHB1YmxpYyBleGNoYW5nZXIgPSAwOwoKICAgIHN0cmluZyAgICAgIHB1YmxpYyBuYW1lICAgICAgICAgICAgID0gICAgICAgIkxBVG9rZW4iOwogICAgdWludDggICAgICAgcHVibGljIGRlY2ltYWxzICAgICAgICAgPSAgICAgICAxODsKICAgIHN0cmluZyAgICAgIHB1YmxpYyBzeW1ib2wgICAgICAgICAgID0gICAgICAgIkxBVG9rZW4iOwogICAgc3RyaW5nICAgICAgcHVibGljIHZlcnNpb24gICAgICAgICAgPSAgICAgICAiMC43LjIiOwoKCiAgICBtb2RpZmllciBvbmx5Rm91bmRlcigpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBmb3VuZGVyKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlNaW50ZXJBbmRFeGNoYW5nZXIoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gbWludGVyICYmIG1zZy5zZW5kZXIgIT0gZXhjaGFuZ2VyKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIGlmIChleGNoYW5nZXIgIT0gMHgwICYmIF90byA9PSBleGNoYW5nZXIpIHsKICAgICAgICAgICAgYXNzZXJ0KEV4Y2hhbmdlQ29udHJhY3QoZXhjaGFuZ2VyKS5leGNoYW5nZShtc2cuc2VuZGVyLCBfdmFsdWUpKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7CgogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKCiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaXNzdWVUb2tlbnMoYWRkcmVzcyBfZm9yLCB1aW50IHRva2VuQ291bnQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBvbmx5TWludGVyQW5kRXhjaGFuZ2VyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBpZiAodG9rZW5Db3VudCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKHRva2VuQ291bnQpOwogICAgICAgIGJhbGFuY2VzW19mb3JdID0gYmFsYW5jZXNbX2Zvcl0uYWRkKHRva2VuQ291bnQpOwogICAgICAgIElzc3VhbmNlKF9mb3IsIHRva2VuQ291bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1cm5Ub2tlbnMoYWRkcmVzcyBfZm9yLCB1aW50IHRva2VuQ291bnQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBvbmx5TWludGVyQW5kRXhjaGFuZ2VyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBpZiAodG9rZW5Db3VudCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmICh0b3RhbFN1cHBseS5zdWIodG9rZW5Db3VudCkgPiB0b3RhbFN1cHBseSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CgogICAgICAgIGlmIChiYWxhbmNlc1tfZm9yXS5zdWIodG9rZW5Db3VudCkgPiBiYWxhbmNlc1tfZm9yXSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CgogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKHRva2VuQ291bnQpOwogICAgICAgIGJhbGFuY2VzW19mb3JdID0gYmFsYW5jZXNbX2Zvcl0uc3ViKHRva2VuQ291bnQpOwogICAgICAgIEJ1cm4oX2ZvciwgdG9rZW5Db3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlTWludGVyKGFkZHJlc3MgbmV3QWRkcmVzcykKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5Rm91bmRlcgogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgbWludGVyID0gbmV3QWRkcmVzczsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VGb3VuZGVyKGFkZHJlc3MgbmV3QWRkcmVzcykKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5Rm91bmRlcgogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgZm91bmRlciA9IG5ld0FkZHJlc3M7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlRXhjaGFuZ2VyKGFkZHJlc3MgbmV3QWRkcmVzcykKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5Rm91bmRlcgogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgZXhjaGFuZ2VyID0gbmV3QWRkcmVzczsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKGZhbHNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBMQVRUb2tlbigpIHsKICAgICAgICBmb3VuZGVyID0gbXNnLnNlbmRlcjsKICAgICAgICB0b3RhbFN1cHBseSA9IDA7CiAgICB9Cn0KCgoKY29udHJhY3QgRXhjaGFuZ2VDb250cmFjdCB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCglhZGRyZXNzIHB1YmxpYyBmb3VuZGVyOwoJdWludDI1NiBwdWJsaWMgcHJldkNvdXJzZTsKCXVpbnQyNTYgcHVibGljIG5leHRDb3Vyc2U7CgoJYWRkcmVzcyBwdWJsaWMgcHJldlRva2VuQWRkcmVzczsKCWFkZHJlc3MgcHVibGljIG5leHRUb2tlbkFkZHJlc3M7CgoJbW9kaWZpZXIgb25seUZvdW5kZXIoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gZm91bmRlcikgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5UHJldmlvdXNUb2tlbigpIHsKICAgIAlpZiAobXNnLnNlbmRlciAhPSBwcmV2VG9rZW5BZGRyZXNzKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIC8vIHNldHMgbmV3IGNvbnZlcnNpb24gcmF0ZQoJZnVuY3Rpb24gY2hhbmdlQ291cnNlKHVpbnQyNTYgX3ByZXZDb3Vyc2UsIHVpbnQyNTYgX25leHRDb3Vyc2UpCgkJcHVibGljCgkJb25seUZvdW5kZXIKCXsKCQlwcmV2Q291cnNlID0gX3ByZXZDb3Vyc2U7CgkJbmV4dENvdXJzZSA9IF9uZXh0Q291cnNlOwoJfQoKCWZ1bmN0aW9uIGV4Y2hhbmdlKGFkZHJlc3MgX2ZvciwgdWludDI1NiBwcmV2VG9rZW5zQW1vdW50KQoJCXB1YmxpYwoJCW9ubHlQcmV2aW91c1Rva2VuCgkJcmV0dXJucyAoYm9vbCkKCXsKCgkJTEFUVG9rZW4gcHJldlRva2VuID0gTEFUVG9rZW4ocHJldlRva2VuQWRkcmVzcyk7CiAgICAgCUxBVFRva2VuIG5leHRUb2tlbiA9IExBVFRva2VuKG5leHRUb2tlbkFkZHJlc3MpOwoKCQkvLyBjaGVjayBpZiBiYWxhbmNlIGlzIGNvcnJlY3QKCQlpZiAocHJldlRva2VuLmJhbGFuY2VPZihfZm9yKSA+PSBwcmV2VG9rZW5zQW1vdW50KSB7CgkJCXVpbnQyNTYgYW1vdW50ID0gcHJldlRva2Vuc0Ftb3VudC5kaXYocHJldkNvdXJzZSk7CgoJCQlhc3NlcnQocHJldlRva2VuLmJ1cm5Ub2tlbnMoX2ZvciwgYW1vdW50Lm11bChwcmV2Q291cnNlKSkpOyAvLyByZW1vdmUgcHJldmlvdXMgdG9rZW5zCgkJCWFzc2VydChuZXh0VG9rZW4uaXNzdWVUb2tlbnMoX2ZvciwgYW1vdW50Lm11bChuZXh0Q291cnNlKSkpOyAvLyBnaXZlIG5ldyBvbmVzCgoJCQlyZXR1cm4gdHJ1ZTsKCQl9IGVsc2UgewoJCQlyZXZlcnQoKTsKCQl9Cgl9CgoJZnVuY3Rpb24gY2hhbmdlRm91bmRlcihhZGRyZXNzIG5ld0FkZHJlc3MpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBvbmx5Rm91bmRlcgogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgZm91bmRlciA9IG5ld0FkZHJlc3M7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoJZnVuY3Rpb24gRXhjaGFuZ2VDb250cmFjdChhZGRyZXNzIF9wcmV2VG9rZW5BZGRyZXNzLCBhZGRyZXNzIF9uZXh0VG9rZW5BZGRyZXNzLCB1aW50MjU2IF9wcmV2Q291cnNlLCB1aW50MjU2IF9uZXh0Q291cnNlKSB7CgkJZm91bmRlciA9IG1zZy5zZW5kZXI7CgoJCXByZXZUb2tlbkFkZHJlc3MgPSBfcHJldlRva2VuQWRkcmVzczsKCQluZXh0VG9rZW5BZGRyZXNzID0gX25leHRUb2tlbkFkZHJlc3M7CgoJCWNoYW5nZUNvdXJzZShfcHJldkNvdXJzZSwgX25leHRDb3Vyc2UpOwoJfQp9CgoKCmNvbnRyYWN0IExBVG9rZW5NaW50ZXIgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgTEFUVG9rZW4gcHVibGljIHRva2VuOyAvLyBUb2tlbiBjb250cmFjdAoKICAgIGFkZHJlc3MgcHVibGljIGZvdW5kZXI7IC8vIEFkZHJlc3Mgb2YgZm91bmRlcgogICAgYWRkcmVzcyBwdWJsaWMgaGVscGVyOyAgLy8gQWRkcmVzcyBvZiBoZWxwZXIKCiAgICBhZGRyZXNzIHB1YmxpYyB0ZWFtUG9vbEluc3RhbnQ7IC8vIEFkZHJlc3Mgb2YgdGVhbSBwb29sIGZvciBpbnN0YW50IGlzc3VhbmNlIGFmdGVyIHRva2VuIHNhbGUgZW5kCiAgICBhZGRyZXNzIHB1YmxpYyB0ZWFtUG9vbEZvckZyb3plblRva2VuczsgLy8gQWRkcmVzcyBvZiB0ZWFtIHBvb2wgZm9yIHNtb290aCB1bmZyb3plIGR1cmluZyA1IHllYXJzIGFmdGVyIDUgeWVhcnMgZnJvbSB0b2tlbiBzYWxlIHN0YXJ0CgogICAgYm9vbCBwdWJsaWMgdGVhbUluc3RhbnRTZW50ID0gZmFsc2U7IC8vIEZsYWcgdG8gcHJldmVudCBtdWx0aXBsZSBpc3N1YW5jZSBmb3IgdGVhbSBwb29sIGFmdGVyIHRva2VuIHNhbGUKCiAgICB1aW50IHB1YmxpYyBzdGFydFRpbWU7ICAgICAgICAgICAgICAgLy8gVW5peCB0aW1lc3RhbXAgb2Ygc3RhcnQKICAgIHVpbnQgcHVibGljIGVuZFRpbWU7ICAgICAgICAgICAgICAgICAvLyBVbml4IHRpbWVzdGFtcCBvZiBlbmQKICAgIHVpbnQgcHVibGljIG51bWJlck9mRGF5czsgICAgICAgICAgICAvLyBOdW1iZXIgb2Ygd2luZG93cyBhZnRlciAwCiAgICB1aW50IHB1YmxpYyB1bmZyb3plUGVyRGF5OyAgICAgICAgICAgLy8gVG9rZW5zIHNvbGQgaW4gZWFjaCB3aW5kb3cKICAgIHVpbnQgcHVibGljIGFscmVhZHlIYXJ2ZXN0ZWRUb2tlbnM7ICAvLyBUb2tlbnMgd2VyZSBhbHJlYWR5IGhhcnZlc3RlZCBhbmQgc2VudCB0byB0ZWFtIHBvb2wKCiAgICAvKgogICAgICogIE1vZGlmaWVycwogICAgICovCiAgICBtb2RpZmllciBvbmx5Rm91bmRlcigpIHsKICAgICAgICAvLyBPbmx5IGZvdW5kZXIgaXMgYWxsb3dlZCB0byBkbyB0aGlzIGFjdGlvbi4KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBmb3VuZGVyKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlIZWxwZXIoKSB7CiAgICAgICAgLy8gT25seSBoZWxwZXIgaXMgYWxsb3dlZCB0byBkbyB0aGlzIGFjdGlvbi4KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBoZWxwZXIpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgLy8gc2VuZHMgNDAwIG1pbGxpb25zIG9mIHRva2VucyB0byB0ZWFtUG9vbCBhdCB0aGUgdG9rZW4gc2FsZSBlbmRpbmcgKDIwMG0gZm9yIGRpc3RyaWJ1dGlvbiArIDIwMG0gZm9yIGNvbXBhbnkpCiAgICBmdW5jdGlvbiBmdW5kVGVhbUluc3RhbnQoKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgb25seUZvdW5kZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoIXRlYW1JbnN0YW50U2VudCk7CgogICAgICAgIHVpbnQgYmFzZVZhbHVlID0gNDAwMDAwMDAwOwogICAgICAgIHVpbnQgdG90YWxJbnN0YW50QW1vdW50ID0gYmFzZVZhbHVlLm11bCgxMDAwMDAwMDAwMDAwMDAwMDAwKTsgLy8gNDAwIG1pbGxpb25zIHdpdGggMTggZGVjaW1hbCBwb2ludHMKCiAgICAgICAgcmVxdWlyZSh0b2tlbi5pc3N1ZVRva2Vucyh0ZWFtUG9vbEluc3RhbnQsIHRvdGFsSW5zdGFudEFtb3VudCkpOwoKICAgICAgICB0ZWFtSW5zdGFudFNlbnQgPSB0cnVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVRva2VuQWRkcmVzcyhhZGRyZXNzIG5ld0FkZHJlc3MpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBvbmx5Rm91bmRlcgogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgdG9rZW4gPSBMQVRUb2tlbihuZXdBZGRyZXNzKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VGb3VuZGVyKGFkZHJlc3MgbmV3QWRkcmVzcykKICAgICAgICBleHRlcm5hbAogICAgICAgIG9ubHlGb3VuZGVyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBmb3VuZGVyID0gbmV3QWRkcmVzczsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VIZWxwZXIoYWRkcmVzcyBuZXdBZGRyZXNzKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgb25seUZvdW5kZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIGhlbHBlciA9IG5ld0FkZHJlc3M7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlVGVhbVBvb2xJbnN0YW50KGFkZHJlc3MgbmV3QWRkcmVzcykKICAgICAgICBleHRlcm5hbAogICAgICAgIG9ubHlGb3VuZGVyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICB0ZWFtUG9vbEluc3RhbnQgPSBuZXdBZGRyZXNzOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVRlYW1Qb29sRm9yRnJvemVuVG9rZW5zKGFkZHJlc3MgbmV3QWRkcmVzcykKICAgICAgICBleHRlcm5hbAogICAgICAgIG9ubHlGb3VuZGVyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICB0ZWFtUG9vbEZvckZyb3plblRva2VucyA9IG5ld0FkZHJlc3M7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gbWV0aG9kIHdoaWNoIHdpbGwgYmUgY2FsbGVkIGVhY2ggZGF5IGFmdGVyIDUgeWVhcnMgdG8gZ2V0IHVuZnJvemVuIHRva2VucwogICAgZnVuY3Rpb24gaGFydmVzdCgpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBvbmx5SGVscGVyCiAgICAgICAgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICByZXF1aXJlKHRlYW1Qb29sRm9yRnJvemVuVG9rZW5zICE9IDB4MCk7CgogICAgICAgIHVpbnQgY3VycmVudFRpbWVEaWZmID0gZ2V0QmxvY2tUaW1lc3RhbXAoKS5zdWIoc3RhcnRUaW1lKTsKICAgICAgICB1aW50IHNlY29uZHNQZXJEYXkgPSAyNCAqIDM2MDA7CiAgICAgICAgdWludCBkYXlzRnJvbVN0YXJ0ID0gY3VycmVudFRpbWVEaWZmLmRpdihzZWNvbmRzUGVyRGF5KTsKICAgICAgICB1aW50IGN1cnJlbnREYXkgPSBkYXlzRnJvbVN0YXJ0LmFkZCgxKTsKCiAgICAgICAgaWYgKGdldEJsb2NrVGltZXN0YW1wKCkgPj0gZW5kVGltZSkgewogICAgICAgICAgICBjdXJyZW50VGltZURpZmYgPSBlbmRUaW1lLnN1YihzdGFydFRpbWUpLmFkZCgxKTsKICAgICAgICAgICAgY3VycmVudERheSA9IDUgKiAzNjU7CiAgICAgICAgfQoKICAgICAgICB1aW50IG1heEN1cnJlbnRIYXJ2ZXN0ID0gY3VycmVudERheS5tdWwodW5mcm96ZVBlckRheSk7CiAgICAgICAgdWludCB3YXNOb3RIYXJ2ZXN0ZWQgPSBtYXhDdXJyZW50SGFydmVzdC5zdWIoYWxyZWFkeUhhcnZlc3RlZFRva2Vucyk7CgogICAgICAgIHJlcXVpcmUod2FzTm90SGFydmVzdGVkID4gMCk7CiAgICAgICAgcmVxdWlyZSh0b2tlbi5pc3N1ZVRva2Vucyh0ZWFtUG9vbEZvckZyb3plblRva2Vucywgd2FzTm90SGFydmVzdGVkKSk7CiAgICAgICAgYWxyZWFkeUhhcnZlc3RlZFRva2VucyA9IGFscmVhZHlIYXJ2ZXN0ZWRUb2tlbnMuYWRkKHdhc05vdEhhcnZlc3RlZCk7CgogICAgICAgIHJldHVybiB3YXNOb3RIYXJ2ZXN0ZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gTEFUb2tlbk1pbnRlcihhZGRyZXNzIF9MQVRUb2tlbkFkZHJlc3MsIGFkZHJlc3MgX2hlbHBlckFkZHJlc3MpIHsKICAgICAgICBmb3VuZGVyID0gbXNnLnNlbmRlcjsKICAgICAgICBoZWxwZXIgPSBfaGVscGVyQWRkcmVzczsKICAgICAgICB0b2tlbiA9IExBVFRva2VuKF9MQVRUb2tlbkFkZHJlc3MpOwoKICAgICAgICBudW1iZXJPZkRheXMgPSA1ICogMzY1OyAvLyA1IHllYXJzCiAgICAgICAgc3RhcnRUaW1lID0gMTY2MTE2NjAwMDsgLy8gMjIgYXVndXN0IDIwMjIgMTE6MDAgR01UKzA7CiAgICAgICAgZW5kVGltZSA9IG51bWJlck9mRGF5cy5tdWwoMSBkYXlzKS5hZGQoc3RhcnRUaW1lKTsKCiAgICAgICAgdWludCBiYXNlVmFsdWUgPSA2MDAwMDAwMDA7CiAgICAgICAgdWludCBmcm96ZW5Ub2tlbnMgPSBiYXNlVmFsdWUubXVsKDEwMDAwMDAwMDAwMDAwMDAwMDApOyAvLyA2MDAgbWlsbGlvbnMgd2l0aCAxOCBkZWNpbWFsIHBvaW50cwogICAgICAgIGFscmVhZHlIYXJ2ZXN0ZWRUb2tlbnMgPSAwOwoKICAgICAgICB1bmZyb3plUGVyRGF5ID0gZnJvemVuVG9rZW5zLmRpdihudW1iZXJPZkRheXMpOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoZmFsc2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJsb2NrVGltZXN0YW1wKCkgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBibG9jay50aW1lc3RhbXA7CiAgICB9Cn0='.
	

]
