Class {
	#name : #SRT78faea8994efe7fc448e743b7b342e1a96ba3807,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT78faea8994efe7fc448e743b7b342e1a96ba3807 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBFUkMyMFRva2VuIHsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpOwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSk7Cn0KY29udHJhY3QgR3JvdmVBUEkgewogIGZ1bmN0aW9uIGluc2VydChieXRlczMyIGluZGV4TmFtZSwgYnl0ZXMzMiBpZCwgaW50IHZhbHVlKSBwdWJsaWM7Cn0KCi8qKgogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9Cn0KCmNvbnRyYWN0IFVuaWNvcm5SYW5jaCB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogIGVudW0gVmlzaXRUeXBlIHsgU3BhLCBBZnRlcm5vb24sIERheSwgT3Zlcm5pZ2h0LCBXZWVrLCBFeHRlbmRlZCB9CiAgZW51bSBWaXNpdFN0YXRlIHsgSW5Qcm9ncmVzcywgQ29tcGxldGVkLCBSZXBvc3Nlc3NlZCB9CiAgCiAgc3RydWN0IFZpc2l0IHsKICAgIHVpbnQgdW5pY29ybkNvdW50OwogICAgVmlzaXRUeXBlIHQ7CiAgICB1aW50IHN0YXJ0QmxvY2s7CiAgICB1aW50IGV4cGlyZXNCbG9jazsKICAgIFZpc2l0U3RhdGUgc3RhdGU7CiAgICB1aW50IGNvbXBsZXRlZEJsb2NrOwogICAgdWludCBjb21wbGV0ZWRDb3VudDsKICB9CiAgc3RydWN0IFZpc2l0TWV0YSB7CiAgICBhZGRyZXNzIG93bmVyOwogICAgdWludCBpbmRleDsKICB9CiAgCiAgYWRkcmVzcyBwdWJsaWMgY2FyZGJvYXJkVW5pY29yblRva2VuQWRkcmVzczsKICBhZGRyZXNzIHB1YmxpYyBncm92ZUFkZHJlc3M7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXIgPSBtc2cuc2VuZGVyOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gVmlzaXRbXSkgYm9va2luZ3M7CiAgbWFwcGluZyAoYnl0ZXMzMiA9PiBWaXNpdE1ldGEpIHB1YmxpYyBib29raW5nTWV0YWRhdGFGb3JLZXk7CiAgbWFwcGluZyAodWludDggPT4gdWludCkgcHVibGljIHZpc2l0TGVuZ3RoOwogIG1hcHBpbmcgKHVpbnQ4ID0+IHVpbnQpIHB1YmxpYyB2aXNpdENvc3Q7CiAgdWludCBwdWJsaWMgdmlzaXRpbmdVbmljb3JucyA9IDA7CiAgdWludCBwdWJsaWMgcmVwb3NzZXNzaW9uQmxvY2tzID0gNDMyMDA7CiAgdWludDggcHVibGljIHJlcG9zc2Vzc2lvbkJvdW50eVBlclRlbiA9IDI7CiAgdWludDggcHVibGljIHJlcG9zc2Vzc2lvbkJvdW50eVBlckh1bmRyZWQgPSAyNTsKICB1aW50IHB1YmxpYyBiaXJ0aEJsb2NrVGhyZXNob2xkID0gNDM4NjA7CiAgdWludDggcHVibGljIGJpcnRoUGVyVGVuID0gMTsKICB1aW50OCBwdWJsaWMgYmlydGhQZXJIdW5kcmVkID0gMTU7CgogIGV2ZW50IE5ld0Jvb2tpbmcoYWRkcmVzcyBpbmRleGVkIF93aG8sIHVpbnQgaW5kZXhlZCBfaW5kZXgsIFZpc2l0VHlwZSBpbmRleGVkIF90eXBlLCB1aW50IF91bmljb3JuQ291bnQpOwogIGV2ZW50IEJvb2tpbmdVcGRhdGUoYWRkcmVzcyBpbmRleGVkIF93aG8sIHVpbnQgaW5kZXhlZCBfaW5kZXgsIFZpc2l0U3RhdGUgaW5kZXhlZCBfbmV3U3RhdGUsIHVpbnQgX3VuaWNvcm5Db3VudCk7CiAgZXZlbnQgUmVwb3NzZXNzaW9uQm91bnR5KGFkZHJlc3MgaW5kZXhlZCBfd2hvLCB1aW50IF91bmljb3JuQ291bnQpOwogIGV2ZW50IERvbmF0aW9uUmVjZWl2ZWQoYWRkcmVzcyBpbmRleGVkIF93aG8sIHVpbnQgX3VuaWNvcm5Db3VudCk7CgogIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CiAgCiAgZnVuY3Rpb24gVW5pY29yblJhbmNoKCkgewogICAgdmlzaXRMZW5ndGhbdWludDgoVmlzaXRUeXBlLlNwYSldID0gNzIwOwogICAgdmlzaXRMZW5ndGhbdWludDgoVmlzaXRUeXBlLkFmdGVybm9vbildID0gMTQ0MDsKICAgIHZpc2l0TGVuZ3RoW3VpbnQ4KFZpc2l0VHlwZS5EYXkpXSA9IDI4ODA7CiAgICB2aXNpdExlbmd0aFt1aW50OChWaXNpdFR5cGUuT3Zlcm5pZ2h0KV0gPSA4NjQwOwogICAgdmlzaXRMZW5ndGhbdWludDgoVmlzaXRUeXBlLldlZWspXSA9IDYwNDgwOwogICAgdmlzaXRMZW5ndGhbdWludDgoVmlzaXRUeXBlLkV4dGVuZGVkKV0gPSAxMjA5NjA7CiAgICAKICAgIHZpc2l0Q29zdFt1aW50OChWaXNpdFR5cGUuU3BhKV0gPSAwOwogICAgdmlzaXRDb3N0W3VpbnQ4KFZpc2l0VHlwZS5BZnRlcm5vb24pXSA9IDA7CiAgICB2aXNpdENvc3RbdWludDgoVmlzaXRUeXBlLkRheSldID0gMTAgc3phYm87CiAgICB2aXNpdENvc3RbdWludDgoVmlzaXRUeXBlLk92ZXJuaWdodCldID0gMzAgc3phYm87CiAgICB2aXNpdENvc3RbdWludDgoVmlzaXRUeXBlLldlZWspXSA9IDUwIHN6YWJvOwogICAgdmlzaXRDb3N0W3VpbnQ4KFZpc2l0VHlwZS5FeHRlbmRlZCldID0gNzAgc3phYm87CiAgfQoKCiAgZnVuY3Rpb24gZ2V0Qm9va2luZ0NvdW50KGFkZHJlc3MgX3dobykgY29uc3RhbnQgcmV0dXJucyAodWludCBjb3VudCkgewogICAgcmV0dXJuIGJvb2tpbmdzW193aG9dLmxlbmd0aDsKICB9CiAgZnVuY3Rpb24gZ2V0Qm9va2luZyhhZGRyZXNzIF93aG8sIHVpbnQgX2luZGV4KSBjb25zdGFudCByZXR1cm5zICh1aW50IF91bmljb3JuQ291bnQsIFZpc2l0VHlwZSBfdHlwZSwgdWludCBfc3RhcnRCbG9jaywgdWludCBfZXhwaXJlc0Jsb2NrLCBWaXNpdFN0YXRlIF9zdGF0ZSwgdWludCBfY29tcGxldGVkQmxvY2ssIHVpbnQgX2NvbXBsZXRlZENvdW50KSB7CiAgICBWaXNpdCBzdG9yYWdlIHYgPSBib29raW5nc1tfd2hvXVtfaW5kZXhdOwogICAgcmV0dXJuICh2LnVuaWNvcm5Db3VudCwgdi50LCB2LnN0YXJ0QmxvY2ssIHYuZXhwaXJlc0Jsb2NrLCB2LnN0YXRlLCB2LmNvbXBsZXRlZEJsb2NrLCB2LmNvbXBsZXRlZENvdW50KTsKICB9CgogIGZ1bmN0aW9uIGJvb2tTcGFWaXNpdCh1aW50IF91bmljb3JuQ291bnQpIHBheWFibGUgewogICAgcmV0dXJuIGFkZEJvb2tpbmcoVmlzaXRUeXBlLlNwYSwgX3VuaWNvcm5Db3VudCk7CiAgfQogIGZ1bmN0aW9uIGJvb2tBZnRlcm5vb25WaXNpdCh1aW50IF91bmljb3JuQ291bnQpIHBheWFibGUgewogICAgcmV0dXJuIGFkZEJvb2tpbmcoVmlzaXRUeXBlLkFmdGVybm9vbiwgX3VuaWNvcm5Db3VudCk7CiAgfQogIGZ1bmN0aW9uIGJvb2tEYXlWaXNpdCh1aW50IF91bmljb3JuQ291bnQpIHBheWFibGUgewogICAgcmV0dXJuIGFkZEJvb2tpbmcoVmlzaXRUeXBlLkRheSwgX3VuaWNvcm5Db3VudCk7CiAgfQogIGZ1bmN0aW9uIGJvb2tPdmVybmlnaHRWaXNpdCh1aW50IF91bmljb3JuQ291bnQpIHBheWFibGUgewogICAgcmV0dXJuIGFkZEJvb2tpbmcoVmlzaXRUeXBlLk92ZXJuaWdodCwgX3VuaWNvcm5Db3VudCk7CiAgfQogIGZ1bmN0aW9uIGJvb2tXZWVrVmlzaXQodWludCBfdW5pY29ybkNvdW50KSBwYXlhYmxlIHsKICAgIHJldHVybiBhZGRCb29raW5nKFZpc2l0VHlwZS5XZWVrLCBfdW5pY29ybkNvdW50KTsKICB9CiAgZnVuY3Rpb24gYm9va0V4dGVuZGVkVmlzaXQodWludCBfdW5pY29ybkNvdW50KSBwYXlhYmxlIHsKICAgIHJldHVybiBhZGRCb29raW5nKFZpc2l0VHlwZS5FeHRlbmRlZCwgX3VuaWNvcm5Db3VudCk7CiAgfQogIAogIGZ1bmN0aW9uIGFkZEJvb2tpbmcoVmlzaXRUeXBlIF90eXBlLCB1aW50IF91bmljb3JuQ291bnQpIHBheWFibGUgewogICAgaWYgKF90eXBlID09IFZpc2l0VHlwZS5BZnRlcm5vb24pIHsKICAgICAgcmV0dXJuIGRvbmF0ZVVuaWNvcm5zKGF2YWlsYWJsZUJhbGFuY2UobXNnLnNlbmRlcikpOwogICAgfQogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gdmlzaXRDb3N0W3VpbnQ4KF90eXBlKV0ubXVsKF91bmljb3JuQ291bnQpKTsgLy8gTXVzdCBiZSBwYXlpbmcgcHJvcGVyIGFtb3VudAoKICAgIEVSQzIwVG9rZW4gY2FyZGJvYXJkVW5pY29ybnMgPSBFUkMyMFRva2VuKGNhcmRib2FyZFVuaWNvcm5Ub2tlbkFkZHJlc3MpOwogICAgY2FyZGJvYXJkVW5pY29ybnMudHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIGFkZHJlc3ModGhpcyksIF91bmljb3JuQ291bnQpOyAvLyBUcmFuc2ZlciB0aGUgYWN0dWFsIGFzc2V0CiAgICB2aXNpdGluZ1VuaWNvcm5zID0gdmlzaXRpbmdVbmljb3Jucy5hZGQoX3VuaWNvcm5Db3VudCk7CiAgICB1aW50IGV4cGlyZXNCbG9jayA9IGJsb2NrLm51bWJlci5hZGQodmlzaXRMZW5ndGhbdWludDgoX3R5cGUpXSk7IC8vIENhbGN1bGF0ZSB3aGVuIHRoaXMgYm9va2luZyB3aWxsIGJlIGRvbmUKICAgIAogICAgLy8gQWRkIHRoZSBib29raW5nIHRvIHRoZSBsZWRnZXIKICAgIGJvb2tpbmdzW21zZy5zZW5kZXJdLnB1c2goVmlzaXQoCiAgICAgIF91bmljb3JuQ291bnQsCiAgICAgIF90eXBlLAogICAgICBibG9jay5udW1iZXIsCiAgICAgIGV4cGlyZXNCbG9jaywKICAgICAgVmlzaXRTdGF0ZS5JblByb2dyZXNzLAogICAgICAwLAogICAgICAwCiAgICApKTsKICAgIHVpbnQgbmV3SW5kZXggPSBib29raW5nc1ttc2cuc2VuZGVyXS5sZW5ndGggLSAxOwogICAgYnl0ZXMzMiB1bmlxdWVLZXkgPSBrZWNjYWsyNTYobXNnLnNlbmRlciwgbmV3SW5kZXgpOyAvLyBDcmVhdGUgYSB1bmlxdWUga2V5IGZvciB0aGlzIGJvb2tpbmcKICAgIAogICAgLy8gQWRkIGEgcmVmZXJlbmNlIGZvciB0aGF0IGtleSwgdG8gZmluZCB0aGUgbWV0YWRhdGEgYWJvdXQgaXQgbGF0ZXIKICAgIGJvb2tpbmdNZXRhZGF0YUZvcktleVt1bmlxdWVLZXldID0gVmlzaXRNZXRhKAogICAgICBtc2cuc2VuZGVyLAogICAgICBuZXdJbmRleAogICAgKTsKICAgIAogICAgaWYgKGdyb3ZlQWRkcmVzcyA+IDApIHsKICAgICAgLy8gSW5zZXJ0IGludG8gR3JvdmUgaW5kZXggZm9yIGFwcGxpY2F0aW9ucyB0byBxdWVyeQogICAgICBHcm92ZUFQSSBnID0gR3JvdmVBUEkoZ3JvdmVBZGRyZXNzKTsKICAgICAgZy5pbnNlcnQoImJvb2tpbmdFeHBpcmF0aW9uIiwgdW5pcXVlS2V5LCBpbnQoZXhwaXJlc0Jsb2NrKSk7CiAgICB9CiAgICAKICAgIC8vIFNlbmQgZXZlbnQgYWJvdXQgdGhpcyBuZXcgYm9va2luZwogICAgTmV3Qm9va2luZyhtc2cuc2VuZGVyLCBuZXdJbmRleCwgX3R5cGUsIF91bmljb3JuQ291bnQpOwogIH0KICAKICBmdW5jdGlvbiBjb21wbGV0ZUJvb2tpbmcodWludCBfaW5kZXgpIHsKICAgIHJlcXVpcmUoYm9va2luZ3NbbXNnLnNlbmRlcl0ubGVuZ3RoID4gX2luZGV4KTsgLy8gU2VuZGVyIG11c3QgaGF2ZSBhdCBsZWFzdCB0aGlzIG1hbnkgYm9va2luZ3MKICAgIFZpc2l0IHN0b3JhZ2UgdiA9IGJvb2tpbmdzW21zZy5zZW5kZXJdW19pbmRleF07CiAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+PSB2LmV4cGlyZXNCbG9jayk7IC8vIEV4cGlyZWQgdGltZSBtdXN0IGJlIHBhc3QKICAgIHJlcXVpcmUodi5zdGF0ZSA9PSBWaXNpdFN0YXRlLkluUHJvZ3Jlc3MpOyAvLyBWaXNpdCBtdXN0IG5vdCBiZSBjb21wbGV0ZSBvciByZXBvc3Nlc3NlZAogICAgCiAgICB1aW50IHVuaWNvcm5zVG9SZXR1cm4gPSB2LnVuaWNvcm5Db3VudDsKICAgIEVSQzIwVG9rZW4gY2FyZGJvYXJkVW5pY29ybnMgPSBFUkMyMFRva2VuKGNhcmRib2FyZFVuaWNvcm5Ub2tlbkFkZHJlc3MpOwoKICAgIC8vIERldGVybWluZSBpZiBhbnkgYmlydGhzIG9jY3VycmVkCiAgICB1aW50IGJpcnRoQ291bnQgPSAwOwogICAgaWYgKFNhZmVNYXRoLnN1YihibG9jay5udW1iZXIsIHYuc3RhcnRCbG9jaykgPj0gYmlydGhCbG9ja1RocmVzaG9sZCkgewogICAgICBpZiAodi51bmljb3JuQ291bnQgPj0gMTAwKSB7CiAgICAgICAgYmlydGhDb3VudCA9IHVpbnQoYmlydGhQZXJIdW5kcmVkKS5tdWwodi51bmljb3JuQ291bnQgLyAxMDApOwogICAgICB9IGVsc2UgaWYgKHYudW5pY29ybkNvdW50ID49IDEwKSB7CiAgICAgICAgYmlydGhDb3VudCA9IHVpbnQoYmlydGhQZXJUZW4pLm11bCh2LnVuaWNvcm5Db3VudCAvIDEwKTsKICAgICAgfQogICAgfQogICAgaWYgKGJpcnRoQ291bnQgPiAwKSB7CiAgICAgIHVpbnQgYXZhaWxhYmxlVW5pY29ybnMgPSBjYXJkYm9hcmRVbmljb3Jucy5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSkgLSB2aXNpdGluZ1VuaWNvcm5zOwogICAgICBpZiAoYXZhaWxhYmxlVW5pY29ybnMgPCBiaXJ0aENvdW50KSB7CiAgICAgICAgYmlydGhDb3VudCA9IGF2YWlsYWJsZVVuaWNvcm5zOwogICAgICB9CiAgICAgIHVuaWNvcm5zVG9SZXR1cm4gPSB1bmljb3Juc1RvUmV0dXJuLmFkZChiaXJ0aENvdW50KTsKICAgIH0KICAgICAgICAKICAgIC8vIFVwZGF0ZSB0aGUgc3RhdHVzIG9mIHRoZSBWaXNpdAogICAgdi5zdGF0ZSA9IFZpc2l0U3RhdGUuQ29tcGxldGVkOwogICAgdi5jb21wbGV0ZWRCbG9jayA9IGJsb2NrLm51bWJlcjsKICAgIHYuY29tcGxldGVkQ291bnQgPSB1bmljb3Juc1RvUmV0dXJuOwogICAgYm9va2luZ3NbbXNnLnNlbmRlcl1bX2luZGV4XSA9IHY7CiAgICAKICAgIC8vIFRyYW5zZmVyIHRoZSBhc3NldCBiYWNrIHRvIHRoZSBvd25lcgogICAgdmlzaXRpbmdVbmljb3JucyA9IHZpc2l0aW5nVW5pY29ybnMuc3ViKHVuaWNvcm5zVG9SZXR1cm4pOwogICAgY2FyZGJvYXJkVW5pY29ybnMudHJhbnNmZXIobXNnLnNlbmRlciwgdW5pY29ybnNUb1JldHVybik7CiAgICAKICAgIC8vIFNlbmQgZXZlbnQgYWJvdXQgdGhpcyB1cGRhdGUKICAgIEJvb2tpbmdVcGRhdGUobXNnLnNlbmRlciwgX2luZGV4LCBWaXNpdFN0YXRlLkNvbXBsZXRlZCwgdW5pY29ybnNUb1JldHVybik7CiAgfQogIAogIGZ1bmN0aW9uIHJlcG9zc2Vzc0Jvb2tpbmcoYWRkcmVzcyBfd2hvLCB1aW50IF9pbmRleCkgewogICAgcmVxdWlyZShib29raW5nc1tfd2hvXS5sZW5ndGggPiBfaW5kZXgpOyAvLyBBZGRyZXNzIGluIHF1ZXN0aW9uIG11c3QgaGF2ZSBhdCBsZWFzdCB0aGlzIG1hbnkgYm9va2luZ3MKICAgIFZpc2l0IHN0b3JhZ2UgdiA9IGJvb2tpbmdzW193aG9dW19pbmRleF07CiAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+IHYuZXhwaXJlc0Jsb2NrLmFkZChyZXBvc3Nlc3Npb25CbG9ja3MpKTsgLy8gUmVwb3NzZXNzaW9uIHRpbWUgbXVzdCBiZSBwYXN0CiAgICByZXF1aXJlKHYuc3RhdGUgPT0gVmlzaXRTdGF0ZS5JblByb2dyZXNzKTsgLy8gVmlzaXQgbXVzdCBub3QgYmUgY29tcGxldGUgb3IgcmVwb3NzZXNzZWQKICAgIAogICAgdmlzaXRpbmdVbmljb3JucyA9IHZpc2l0aW5nVW5pY29ybnMuc3ViKHYudW5pY29ybkNvdW50KTsKICAgIAogICAgLy8gU2VuZCBldmVudCBhYm91dCB0aGlzIHVwZGF0ZQogICAgQm9va2luZ1VwZGF0ZShfd2hvLCBfaW5kZXgsIFZpc2l0U3RhdGUuUmVwb3NzZXNzZWQsIHYudW5pY29ybkNvdW50KTsKICAgIAogICAgLy8gQ2FsY3VsYXRlIEJvdW50eSBhbW91bnQKICAgIHVpbnQgYm91bnR5Q291bnQgPSAxOwogICAgaWYgKHYudW5pY29ybkNvdW50ID49IDEwMCkgewogICAgICAgIGJvdW50eUNvdW50ID0gdWludChyZXBvc3Nlc3Npb25Cb3VudHlQZXJIdW5kcmVkKS5tdWwodi51bmljb3JuQ291bnQgLyAxMDApOwogICAgfSBlbHNlIGlmICh2LnVuaWNvcm5Db3VudCA+PSAxMCkgewogICAgICBib3VudHlDb3VudCA9IHVpbnQocmVwb3NzZXNzaW9uQm91bnR5UGVyVGVuKS5tdWwodi51bmljb3JuQ291bnQgLyAxMCk7CiAgICB9CiAgICAKICAgIC8vIFNlbmQgYm91bnR5IHRvIGJvdW50eSBodW50ZXIKICAgIEVSQzIwVG9rZW4gY2FyZGJvYXJkVW5pY29ybnMgPSBFUkMyMFRva2VuKGNhcmRib2FyZFVuaWNvcm5Ub2tlbkFkZHJlc3MpOwogICAgY2FyZGJvYXJkVW5pY29ybnMudHJhbnNmZXIobXNnLnNlbmRlciwgYm91bnR5Q291bnQpOwogICAgCiAgICAvLyBTZW5kIGV2ZW50IGFib3V0IHRoZSBib3VudHkgcGF5b3V0CiAgICBSZXBvc3Nlc3Npb25Cb3VudHkobXNnLnNlbmRlciwgYm91bnR5Q291bnQpOwoKICAgIC8vIFVwZGF0ZSB0aGUgc3RhdHVzIG9mIHRoZSBWaXNpdAogICAgdi5zdGF0ZSA9IFZpc2l0U3RhdGUuUmVwb3NzZXNzZWQ7CiAgICB2LmNvbXBsZXRlZEJsb2NrID0gYmxvY2subnVtYmVyOwogICAgdi5jb21wbGV0ZWRDb3VudCA9IHYudW5pY29ybkNvdW50IC0gYm91bnR5Q291bnQ7CiAgICBib29raW5nc1tfd2hvXVtfaW5kZXhdID0gdjsKICB9CiAgCiAgZnVuY3Rpb24gYXZhaWxhYmxlQmFsYW5jZShhZGRyZXNzIF93aG8pIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIEVSQzIwVG9rZW4gY2FyZGJvYXJkVW5pY29ybnMgPSBFUkMyMFRva2VuKGNhcmRib2FyZFVuaWNvcm5Ub2tlbkFkZHJlc3MpOwogICAgdWludCBjb3VudCA9IGNhcmRib2FyZFVuaWNvcm5zLmFsbG93YW5jZShfd2hvLCBhZGRyZXNzKHRoaXMpKTsKICAgIGlmIChjb3VudCA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludCBiYWxhbmNlID0gY2FyZGJvYXJkVW5pY29ybnMuYmFsYW5jZU9mKF93aG8pOwogICAgaWYgKGJhbGFuY2UgPCBjb3VudCkgewogICAgICByZXR1cm4gYmFsYW5jZTsKICAgIH0KICAgIHJldHVybiBjb3VudDsKICB9CiAgCiAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgIGlmIChjYXJkYm9hcmRVbmljb3JuVG9rZW5BZGRyZXNzID09IDApIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgcmV0dXJuIGRvbmF0ZVVuaWNvcm5zKGF2YWlsYWJsZUJhbGFuY2UobXNnLnNlbmRlcikpOwogIH0KICAKICBmdW5jdGlvbiBkb25hdGVVbmljb3Jucyh1aW50IF91bmljb3JuQ291bnQpIHBheWFibGUgewogICAgaWYgKF91bmljb3JuQ291bnQgPT0gMCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBFUkMyMFRva2VuIGNhcmRib2FyZFVuaWNvcm5zID0gRVJDMjBUb2tlbihjYXJkYm9hcmRVbmljb3JuVG9rZW5BZGRyZXNzKTsKICAgIGNhcmRib2FyZFVuaWNvcm5zLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBhZGRyZXNzKHRoaXMpLCBfdW5pY29ybkNvdW50KTsKICAgIERvbmF0aW9uUmVjZWl2ZWQobXNnLnNlbmRlciwgX3VuaWNvcm5Db3VudCk7CiAgfQogIAogIC8qKgogICAqIENoYW5nZSBvd25lcnNoaXAgb2YgdGhlIFJhbmNoCiAgICovCiAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBvd25lciA9IF9uZXdPd25lcjsKICB9CgogIC8qKgogICAqIENoYW5nZSB0aGUgb3V0c2lkZSBjb250cmFjdHMgdXNlZCBieSB0aGlzIGNvbnRyYWN0CiAgICovCiAgZnVuY3Rpb24gY2hhbmdlQ2FyZGJvYXJkVW5pY29yblRva2VuQWRkcmVzcyhhZGRyZXNzIF9uZXdUb2tlbkFkZHJlc3MpIG9ubHlPd25lciB7CiAgICBjYXJkYm9hcmRVbmljb3JuVG9rZW5BZGRyZXNzID0gX25ld1Rva2VuQWRkcmVzczsKICB9CiAgZnVuY3Rpb24gY2hhbmdlR3JvdmVBZGRyZXNzKGFkZHJlc3MgX25ld0FkZHJlc3MpIG9ubHlPd25lciB7CiAgICBncm92ZUFkZHJlc3MgPSBfbmV3QWRkcmVzczsKICB9CiAgCiAgLyoqCiAgICogVXBkYXRlIGJsb2NrIGR1cmF0aW9ucyBmb3IgdmFyaW91cyB0eXBlcyBvZiB2aXNpdHMKICAgKi8KICBmdW5jdGlvbiBjaGFuZ2VWaXNpdExlbmd0aHModWludCBfc3BhLCB1aW50IF9hZnRlcm5vb24sIHVpbnQgX2RheSwgdWludCBfb3Zlcm5pZ2h0LCB1aW50IF93ZWVrLCB1aW50IF9leHRlbmRlZCkgb25seU93bmVyIHsKICAgIHZpc2l0TGVuZ3RoW3VpbnQ4KFZpc2l0VHlwZS5TcGEpXSA9IF9zcGE7CiAgICB2aXNpdExlbmd0aFt1aW50OChWaXNpdFR5cGUuQWZ0ZXJub29uKV0gPSBfYWZ0ZXJub29uOwogICAgdmlzaXRMZW5ndGhbdWludDgoVmlzaXRUeXBlLkRheSldID0gX2RheTsKICAgIHZpc2l0TGVuZ3RoW3VpbnQ4KFZpc2l0VHlwZS5PdmVybmlnaHQpXSA9IF9vdmVybmlnaHQ7CiAgICB2aXNpdExlbmd0aFt1aW50OChWaXNpdFR5cGUuV2VlayldID0gX3dlZWs7CiAgICB2aXNpdExlbmd0aFt1aW50OChWaXNpdFR5cGUuRXh0ZW5kZWQpXSA9IF9leHRlbmRlZDsKICB9CiAgCiAgLyoqCiAgICogVXBkYXRlIGV0aGVyIGNvc3RzIGZvciB2YXJpb3VzIHR5cGVzIG9mIHZpc2l0cwogICAqLwogIGZ1bmN0aW9uIGNoYW5nZVZpc2l0Q29zdHModWludCBfc3BhLCB1aW50IF9hZnRlcm5vb24sIHVpbnQgX2RheSwgdWludCBfb3Zlcm5pZ2h0LCB1aW50IF93ZWVrLCB1aW50IF9leHRlbmRlZCkgb25seU93bmVyIHsKICAgIHZpc2l0Q29zdFt1aW50OChWaXNpdFR5cGUuU3BhKV0gPSBfc3BhOwogICAgdmlzaXRDb3N0W3VpbnQ4KFZpc2l0VHlwZS5BZnRlcm5vb24pXSA9IF9hZnRlcm5vb247CiAgICB2aXNpdENvc3RbdWludDgoVmlzaXRUeXBlLkRheSldID0gX2RheTsKICAgIHZpc2l0Q29zdFt1aW50OChWaXNpdFR5cGUuT3Zlcm5pZ2h0KV0gPSBfb3Zlcm5pZ2h0OwogICAgdmlzaXRDb3N0W3VpbnQ4KFZpc2l0VHlwZS5XZWVrKV0gPSBfd2VlazsKICAgIHZpc2l0Q29zdFt1aW50OChWaXNpdFR5cGUuRXh0ZW5kZWQpXSA9IF9leHRlbmRlZDsKICB9CiAgCiAgLyoqCiAgICogVXBkYXRlIGJvdW50eSByZXdhcmQgc2V0dGluZ3MKICAgKi8KICBmdW5jdGlvbiBjaGFuZ2VSZXBvU2V0dGluZ3ModWludCBfcmVwb0Jsb2NrcywgdWludDggX3JlcG9QZXJUZW4sIHVpbnQ4IF9yZXBvUGVySHVuZHJlZCkgb25seU93bmVyIHsKICAgIHJlcG9zc2Vzc2lvbkJsb2NrcyA9IF9yZXBvQmxvY2tzOwogICAgcmVwb3NzZXNzaW9uQm91bnR5UGVyVGVuID0gX3JlcG9QZXJUZW47CiAgICByZXBvc3Nlc3Npb25Cb3VudHlQZXJIdW5kcmVkID0gX3JlcG9QZXJIdW5kcmVkOwogIH0KICAKICAvKioKICAgKiBVcGRhdGUgYmlydGggZXZlbnQgc2V0dGluZ3MKICAgKi8KICBmdW5jdGlvbiBjaGFuZ2VCaXJ0aFNldHRpbmdzKHVpbnQgX2JpcnRoQmxvY2tzLCB1aW50OCBfYmlydGhQZXJUZW4sIHVpbnQ4IF9iaXJ0aFBlckh1bmRyZWQpIG9ubHlPd25lciB7CiAgICBiaXJ0aEJsb2NrVGhyZXNob2xkID0gX2JpcnRoQmxvY2tzOwogICAgYmlydGhQZXJUZW4gPSBfYmlydGhQZXJUZW47CiAgICBiaXJ0aFBlckh1bmRyZWQgPSBfYmlydGhQZXJIdW5kcmVkOwogIH0KCiAgZnVuY3Rpb24gd2l0aGRyYXcoKSBvbmx5T3duZXIgewogICAgb3duZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsgLy8gU2VuZCBhbGwgZXRoZXIgaW4gdGhpcyBjb250cmFjdCB0byB0aGlzIGNvbnRyYWN0J3Mgb3duZXIKICB9CiAgZnVuY3Rpb24gd2l0aGRyYXdGb3JlaWduVG9rZW5zKGFkZHJlc3MgX3Rva2VuQ29udHJhY3QpIG9ubHlPd25lciB7CiAgICBFUkMyMFRva2VuIHRva2VuID0gRVJDMjBUb2tlbihfdG9rZW5Db250cmFjdCk7CiAgICB0b2tlbi50cmFuc2Zlcihvd25lciwgdG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpKTsgLy8gU2VuZCBhbGwgb3duZWQgdG9rZW5zIHRvIHRoaXMgY29udHJhY3QncyBvd25lcgogIH0KICAKfQ=='.
	

]
