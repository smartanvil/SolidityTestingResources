Class {
	#name : #SRT5956e9888791e86baca2df137eb697156a2aa605,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5956e9888791e86baca2df137eb697156a2aa605 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMDsKLyoKVGhpcyB2U2xpY2UgdG9rZW4gY29udHJhY3QgaXMgYmFzZWQgb24gdGhlIEVSQzIwIHRva2VuIGNvbnRyYWN0LiBBZGRpdGlvbmFsCmZ1bmN0aW9uYWxpdHkgaGFzIGJlZW4gaW50ZWdyYXRlZDoKKiB0aGUgY29udHJhY3QgTG9ja2FibGUsIHdoaWNoIGlzIHVzZWQgYXMgYSBwYXJlbnQgb2YgdGhlIFRva2VuIGNvbnRyYWN0CiogdGhlIGZ1bmN0aW9uIG1pbnRUb2tlbnMoKSwgd2hpY2ggbWFrZXMgdXNlIG9mIHRoZSBjdXJyZW50U3dhcFJhdGUoKSBhbmQgc2FmZVRvQWRkKCkgaGVscGVycwoqIHRoZSBmdW5jdGlvbiBkaXNhYmxlVG9rZW5Td2FwTG9jaygpCiovCgpjb250cmFjdCBMb2NrYWJsZSB7CiAgICB1aW50IHB1YmxpYyBudW1PZkN1cnJlbnRFcG9jaDsKICAgIHVpbnQgcHVibGljIGNyZWF0aW9uVGltZTsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFVOTE9DS0VEX1RJTUUgPSAyNSBkYXlzOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTE9DS0VEX1RJTUUgPSA1IGRheXM7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBFUE9DSF9MRU5HVEggPSAzMCBkYXlzOwogICAgYm9vbCBwdWJsaWMgbG9jazsKICAgIGJvb2wgcHVibGljIHRva2VuU3dhcExvY2s7CgogICAgZXZlbnQgTG9ja2VkKCk7CiAgICBldmVudCBVbmxvY2tlZCgpOwoKICAgIC8vIFRoaXMgbW9kaWZpZXIgc2hvdWxkIHByZXZlbnQgdG9rZW5zIHRyYW5zZmVycyB3aGlsZSB0aGUgdG9rZW5zd2FwCiAgICAvLyBpcyBzdGlsbCBvbmdvaW5nCiAgICBtb2RpZmllciBpc1Rva2VuU3dhcE9uIHsKICAgICAgICBpZiAodG9rZW5Td2FwTG9jaykgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBUaGlzIG1vZGlmaWVyIGNoZWNrcyBhbmQsIGlmIG5lZWRlZCwgdXBkYXRlcyB0aGUgdmFsdWUgb2YgY3VycmVudAogICAgLy8gdG9rZW4gY29udHJhY3QgZXBvY2gsIGJlZm9yZSBleGVjdXRpbmcgYSB0b2tlbiB0cmFuc2ZlciBvZiBhbnkKICAgIC8vIGtpbmQKICAgIG1vZGlmaWVyIGlzTmV3RXBvY2ggewogICAgICAgIGlmIChudW1PZkN1cnJlbnRFcG9jaCAqIEVQT0NIX0xFTkdUSCArIGNyZWF0aW9uVGltZSA8IG5vdyApIHsKICAgICAgICAgICAgbnVtT2ZDdXJyZW50RXBvY2ggPSAobm93IC0gY3JlYXRpb25UaW1lKSAvIEVQT0NIX0xFTkdUSCArIDE7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgLy8gVGhpcyBtb2RpZmllciBjaGVjayB3aGV0aGVyIHRoZSBjb250cmFjdCBzaG91bGQgYmUgaW4gYSBsb2NrZWQKICAgIC8vIG9yIHVubG9ja2VkIHN0YXRlLCB0aGVuIGFjdHMgYW5kIHVwZGF0ZXMgYWNjb3JkaW5nbHkgaWYKICAgIC8vIG5lY2Vzc2FyeQogICAgbW9kaWZpZXIgY2hlY2tMb2NrIHsKICAgICAgICBpZiAoKGNyZWF0aW9uVGltZSArIG51bU9mQ3VycmVudEVwb2NoICogVU5MT0NLRURfVElNRSkgKwogICAgICAgIChudW1PZkN1cnJlbnRFcG9jaCAtIDEpICogTE9DS0VEX1RJTUUgPCBub3cpIHsKICAgICAgICAgICAgLy8gYXZvaWRzIG5lZWRsZXNzIGxvY2sgc3RhdGUgY2hhbmdlIGFuZCBldmVudCBzcGFtbWluZwogICAgICAgICAgICBpZiAobG9jaykgdGhyb3c7CgogICAgICAgICAgICBsb2NrID0gdHJ1ZTsKICAgICAgICAgICAgTG9ja2VkKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIC8vIG9ubHkgc2V0IHRvIGZhbHNlIGlmIGluIGEgbG9ja2VkIHN0YXRlLCB0byBhdm9pZAogICAgICAgICAgICAvLyBuZWVkbGVzcyBzdGF0ZSBjaGFuZ2UgYW5kIGV2ZW50IHNwYW0KICAgICAgICAgICAgaWYgKGxvY2spIHsKICAgICAgICAgICAgICAgIGxvY2sgPSBmYWxzZTsKICAgICAgICAgICAgICAgIFVubG9ja2VkKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBMb2NrYWJsZSgpIHsKICAgICAgICBjcmVhdGlvblRpbWUgPSBub3c7CiAgICAgICAgbnVtT2ZDdXJyZW50RXBvY2ggPSAxOwogICAgICAgIHRva2VuU3dhcExvY2sgPSB0cnVlOwogICAgfQp9CgoKY29udHJhY3QgRVJDMjAgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCmNvbnRyYWN0IFRva2VuIGlzIEVSQzIwLCBMb2NrYWJsZSB7CgogIG1hcHBpbmcoIGFkZHJlc3MgPT4gdWludCApIF9iYWxhbmNlczsKICBtYXBwaW5nKCBhZGRyZXNzID0+IG1hcHBpbmcoIGFkZHJlc3MgPT4gdWludCApICkgX2FwcHJvdmFsczsKICB1aW50IF9zdXBwbHk7CiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0QWRkcmVzczsKCiAgZXZlbnQgVG9rZW5NaW50KGFkZHJlc3MgbmV3VG9rZW5Ib2xkZXIsIHVpbnQgYW1vdW50T2ZUb2tlbnMpOwogIGV2ZW50IFRva2VuU3dhcE92ZXIoKTsKCiAgbW9kaWZpZXIgb25seUZyb21XYWxsZXQgewogICAgICBpZiAobXNnLnNlbmRlciAhPSB3YWxsZXRBZGRyZXNzKSB0aHJvdzsKICAgICAgXzsKICB9CgogIGZ1bmN0aW9uIFRva2VuKCB1aW50IGluaXRpYWxfYmFsYW5jZSwgYWRkcmVzcyB3YWxsZXQpIHsKICAgIF9iYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGluaXRpYWxfYmFsYW5jZTsKICAgIF9zdXBwbHkgPSBpbml0aWFsX2JhbGFuY2U7CiAgICB3YWxsZXRBZGRyZXNzID0gd2FsbGV0OwogIH0KCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50IHN1cHBseSkgewogICAgcmV0dXJuIF9zdXBwbHk7CiAgfQoKICBmdW5jdGlvbiBiYWxhbmNlT2YoIGFkZHJlc3Mgd2hvICkgY29uc3RhbnQgcmV0dXJucyAodWludCB2YWx1ZSkgewogICAgcmV0dXJuIF9iYWxhbmNlc1t3aG9dOwogIH0KCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCBfYWxsb3dhbmNlKSB7CiAgICByZXR1cm4gX2FwcHJvdmFsc1tvd25lcl1bc3BlbmRlcl07CiAgfQoKICAvLyBBIGhlbHBlciB0byBub3RpZnkgaWYgb3ZlcmZsb3cgb2NjdXJzCiAgZnVuY3Rpb24gc2FmZVRvQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gKGEgKyBiID49IGEgJiYgYSArIGIgPj0gYik7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlciggYWRkcmVzcyB0bywgdWludCB2YWx1ZSkKICAgIGlzVG9rZW5Td2FwT24KICAgIGlzTmV3RXBvY2gKICAgIGNoZWNrTG9jawogICAgcmV0dXJucyAoYm9vbCBvaykgewoKICAgIGlmKCBfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCB2YWx1ZSApIHsKICAgICAgICB0aHJvdzsKICAgIH0KICAgIGlmKCAhc2FmZVRvQWRkKF9iYWxhbmNlc1t0b10sIHZhbHVlKSApIHsKICAgICAgICB0aHJvdzsKICAgIH0KCiAgICBfYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gdmFsdWU7CiAgICBfYmFsYW5jZXNbdG9dICs9IHZhbHVlOwogICAgVHJhbnNmZXIoIG1zZy5zZW5kZXIsIHRvLCB2YWx1ZSApOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkKICAgIGlzVG9rZW5Td2FwT24KICAgIGlzTmV3RXBvY2gKICAgIGNoZWNrTG9jawogICAgcmV0dXJucyAoYm9vbCBvaykgewogICAgLy8gaWYgeW91IGRvbid0IGhhdmUgZW5vdWdoIGJhbGFuY2UsIHRocm93CiAgICBpZiggX2JhbGFuY2VzW2Zyb21dIDwgdmFsdWUgKSB7CiAgICAgICAgdGhyb3c7CiAgICB9CiAgICAvLyBpZiB5b3UgZG9uJ3QgaGF2ZSBhcHByb3ZhbCwgdGhyb3cKICAgIGlmKCBfYXBwcm92YWxzW2Zyb21dW21zZy5zZW5kZXJdIDwgdmFsdWUgKSB7CiAgICAgICAgdGhyb3c7CiAgICB9CiAgICBpZiggIXNhZmVUb0FkZChfYmFsYW5jZXNbdG9dLCB2YWx1ZSkgKSB7CiAgICAgICAgdGhyb3c7CiAgICB9CiAgICAvLyB0cmFuc2ZlciBhbmQgcmV0dXJuIHRydWUKICAgIF9hcHByb3ZhbHNbZnJvbV1bbXNnLnNlbmRlcl0gLT0gdmFsdWU7CiAgICBfYmFsYW5jZXNbZnJvbV0gLT0gdmFsdWU7CiAgICBfYmFsYW5jZXNbdG9dICs9IHZhbHVlOwogICAgVHJhbnNmZXIoIGZyb20sIHRvLCB2YWx1ZSApOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSkKICAgIGlzVG9rZW5Td2FwT24KICAgIGlzTmV3RXBvY2gKICAgIGNoZWNrTG9jawogICAgcmV0dXJucyAoYm9vbCBvaykgewogICAgX2FwcHJvdmFsc1ttc2cuc2VuZGVyXVtzcGVuZGVyXSA9IHZhbHVlOwogICAgQXBwcm92YWwoIG1zZy5zZW5kZXIsIHNwZW5kZXIsIHZhbHVlICk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vIFRoZSBmdW5jdGlvbiBjdXJyZW50U3dhcFJhdGUoKSByZXR1cm5zIHRoZSBjdXJyZW50IGV4Y2hhbmdlIHJhdGUKICAvLyBiZXR3ZWVuIHZTbGljZSB0b2tlbnMgYW5kIEV0aGVyIGR1cmluZyB0aGUgdG9rZW4gc3dhcCBwZXJpb2QKICBmdW5jdGlvbiBjdXJyZW50U3dhcFJhdGUoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgaWYgKGNyZWF0aW9uVGltZSArIDEgd2Vla3MgPiBub3cpIHsKICAgICAgICAgIHJldHVybiAxMzA7CiAgICAgIH0KICAgICAgZWxzZSBpZiAoY3JlYXRpb25UaW1lICsgMiB3ZWVrcyA+IG5vdykgewogICAgICAgICAgcmV0dXJuIDEyMDsKICAgICAgfQogICAgICBlbHNlIGlmIChjcmVhdGlvblRpbWUgKyA0IHdlZWtzID4gbm93KSB7CiAgICAgICAgICByZXR1cm4gMTAwOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KICB9CgogIC8vIFRoZSBmdW5jdGlvbiBtaW50VG9rZW5zIGlzIG9ubHkgdXNhYmxlIGJ5IHRoZSBjaG9zZW4gd2FsbGV0CiAgLy8gY29udHJhY3QgdG8gbWludCBhIG51bWJlciBvZiB0b2tlbnMgcHJvcG9ydGlvbmFsIHRvIHRoZQogIC8vIGFtb3VudCBvZiBldGhlciBzZW50IHRvIHRoZSB3YWxsZXQgY29udHJhY3QuIFRoZSBmdW5jdGlvbgogIC8vIGNhbiBvbmx5IGJlIGNhbGxlZCBkdXJpbmcgdGhlIHRva2Vuc3dhcCBwZXJpb2QKICBmdW5jdGlvbiBtaW50VG9rZW5zKGFkZHJlc3MgbmV3VG9rZW5Ib2xkZXIsIHVpbnQgZXRoZXJBbW91bnQpCiAgICBleHRlcm5hbAogICAgb25seUZyb21XYWxsZXQgewoKICAgICAgICB1aW50IHRva2Vuc0Ftb3VudCA9IGN1cnJlbnRTd2FwUmF0ZSgpICogZXRoZXJBbW91bnQ7CiAgICAgICAgaWYoIXNhZmVUb0FkZChfYmFsYW5jZXNbbmV3VG9rZW5Ib2xkZXJdLHRva2Vuc0Ftb3VudCApKSB0aHJvdzsKICAgICAgICBpZighc2FmZVRvQWRkKF9zdXBwbHksdG9rZW5zQW1vdW50KSkgdGhyb3c7CgogICAgICAgIF9iYWxhbmNlc1tuZXdUb2tlbkhvbGRlcl0gKz0gdG9rZW5zQW1vdW50OwogICAgICAgIF9zdXBwbHkgKz0gdG9rZW5zQW1vdW50OwoKICAgICAgICBUb2tlbk1pbnQobmV3VG9rZW5Ib2xkZXIsIHRva2Vuc0Ftb3VudCk7CiAgfQoKICAvLyBUaGUgZnVuY3Rpb24gZGlzYWJsZVRva2VuU3dhcExvY2soKSBpcyBjYWxsZWQgYnkgdGhlIHdhbGxldAogIC8vIGNvbnRyYWN0IG9uY2UgdGhlIHRva2VuIHN3YXAgaGFzIHJlYWNoZWQgaXRzIGVuZCBjb25kaXRpb25zCiAgZnVuY3Rpb24gZGlzYWJsZVRva2VuU3dhcExvY2soKQogICAgZXh0ZXJuYWwKICAgIG9ubHlGcm9tV2FsbGV0IHsKICAgICAgICB0b2tlblN3YXBMb2NrID0gZmFsc2U7CiAgICAgICAgVG9rZW5Td2FwT3ZlcigpOwogIH0KfQoKCnByYWdtYSBzb2xpZGl0eSBeMC40LjA7Ci8qClRoZSBQcm9maXRDb250YWluZXIgY29udHJhY3QgcmVjZWl2ZXMgcHJvZml0cyBmcm9tIHRoZSB2RGljZSBnYW1lcyBhbmQgYWxsb3dzIGEKYSBmYWlyIGRpc3RyaWJ1dGlvbiBiZXR3ZWVuIHRva2VuIGhvbGRlcnMuCiovCgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIGlmIChtc2cuc2VuZGVyID09IG93bmVyKQogICAgICBfOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpCiAgICAgIGV4dGVybmFsCiAgICAgIG9ubHlPd25lciB7CiAgICAgIGlmIChfbmV3T3duZXIgPT0gYWRkcmVzcygweDApKSB0aHJvdzsKICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgfQoKfQoKY29udHJhY3QgUHJvZml0Q29udGFpbmVyIGlzIE93bmFibGUgewogICAgdWludCBwdWJsaWMgY3VycmVudEVwb2NoOwogICAgLy9UaGlzIGlzIHRvIG1pdGlnYXRlIHN1cGVyc2VuZCBhbmQgdGhlIHBvc3NpYmlsaXR5IG9mCiAgICAvL2RpZmZlcmVudCBwYXlvdXRzIGZvciBzYW1lIHRva2VuIG93bmVyc2hpcCBkdXJpbmcgcGF5b3V0IHBoYXNlCiAgICB1aW50IHB1YmxpYyBpbml0RXBvY2hCYWxhbmNlOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBsYXN0UGFpZE91dEVwb2NoOwogICAgVG9rZW4gcHVibGljIHRva2VuQ3RyOwoKICAgIGV2ZW50IFdpdGhkcmF3YWxFbmFibGVkKCk7CiAgICBldmVudCBQcm9maXRXaXRoZHJhd24oYWRkcmVzcyB0b2tlbkhvbGRlciwgdWludCBhbW91bnRQYWlkT3V0KTsKICAgIGV2ZW50IFRva2VuQ29udHJhY3RDaGFuZ2VkKGFkZHJlc3MgbmV3VG9rZW5Db250cmFjdEFkZHIpOwoKICAgIC8vIFRoZSBtb2RpZmllciBvbmx5Tm90UGFpZE91dCBwcmV2ZW50cyB0b2tlbiBob2xkZXJzIHdobyBoYXZlCiAgICAvLyBhbHJlYWR5IHdpdGhkcmF3biB0aGVpciBzaGFyZSBvZiBwcm9maXRzIGluIHRoZSBlcG9jaCwgdG8gY2FzaAogICAgLy8gb3V0IGFkZGl0aW9uYWwgc2hhcmVzLgogICAgbW9kaWZpZXIgb25seU5vdFBhaWRPdXQgewogICAgICAgIGlmIChsYXN0UGFpZE91dEVwb2NoW21zZy5zZW5kZXJdID09IGN1cnJlbnRFcG9jaCkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBUaGUgbW9kaWZpZXIgb25seUxvY2tlZCBwcmV2ZW50cyB0b2tlbiBob2xkZXJzIGZyb20gY29sbGVjdGluZwogICAgLy8gdGhlaXIgcHJvZml0cyB3aGVuIHRoZSB0b2tlbiBjb250cmFjdCBpcyBpbiBhbiB1bmxvY2tlZCBzdGF0ZQogICAgbW9kaWZpZXIgb25seUxvY2tlZCB7CiAgICAgICAgaWYgKCF0b2tlbkN0ci5sb2NrKCkpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgLy8gVGhlIG1vZGlmaWVyIHJlc2V0UGFpZE91dCB1cGRhdGVzIHRoZSBjdXJyZW5jdCBlcG9jaCwgYW5kCiAgICAvLyBlbmFibGVzIHRoZSBzbWFydCBjb250cmFjdCB0byB0cmFjayB3aGVuIGEgdG9rZW4gaG9sZGVyCiAgICAvLyBoYXMgYWxyZWFkeSByZWNlaXZlZCB0aGVpciBmYWlyIHNoYXJlIG9mIHByb2ZpdHMgb3Igbm90CiAgICAvLyBhbmQgc2V0cyB0aGUgYmFsYW5jZSBmb3IgdGhlIGVwb2NoIHVzaW5nIGN1cnJlbnQgYmFsYW5jZQogICAgbW9kaWZpZXIgcmVzZXRQYWlkT3V0IHsKICAgICAgICBpZihjdXJyZW50RXBvY2ggPCB0b2tlbkN0ci5udW1PZkN1cnJlbnRFcG9jaCgpKSB7CiAgICAgICAgICAgIGN1cnJlbnRFcG9jaCA9IHRva2VuQ3RyLm51bU9mQ3VycmVudEVwb2NoKCk7CiAgICAgICAgICAgIGluaXRFcG9jaEJhbGFuY2UgPSB0aGlzLmJhbGFuY2U7CiAgICAgICAgICAgIFdpdGhkcmF3YWxFbmFibGVkKCk7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gUHJvZml0Q29udGFpbmVyKGFkZHJlc3MgX3Rva2VuKSB7CiAgICAgICAgdG9rZW5DdHIgPSBUb2tlbihfdG9rZW4pOwogICAgfQoKICAgIGZ1bmN0aW9uICgpCiAgICAgICAgcGF5YWJsZSB7CgogICAgfQoKICAgIC8vIFRoZSBmdW5jdGlvbiB3aXRoZHJhd2FsUHJvZml0KCkgZW5hYmxlcyB0b2tlbiBob2xkZXJzCiAgICAvLyB0byBjb2xsZWN0IGEgZmFpciBzaGFyZSBvZiBwcm9maXRzIGZyb20gdGhlIFByb2ZpdENvbnRhaW5lciwKICAgIC8vIHByb3BvcnRpb25hbCB0byB0aGUgYW1vdW50IG9mIHRva2VucyB0aGV5IG93bi4gVG9rZW4gaG9sZGVycwogICAgLy8gd2lsbCBiZSBhYmxlIHRvIGNvbGxlY3QgdGhlaXIgcHJvZml0cyBvbmx5IG9uY2UKICAgIGZ1bmN0aW9uIHdpdGhkcmF3YWxQcm9maXQoKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgcmVzZXRQYWlkT3V0CiAgICAgICAgb25seUxvY2tlZAogICAgICAgIG9ubHlOb3RQYWlkT3V0IHsKICAgICAgICB1aW50IGN1cnJlbnRFcG9jaCA9IHRva2VuQ3RyLm51bU9mQ3VycmVudEVwb2NoKCk7CiAgICAgICAgdWludCB0b2tlbkJhbGFuY2UgPSB0b2tlbkN0ci5iYWxhbmNlT2YobXNnLnNlbmRlcik7CiAgICAgICAgdWludCB0b3RhbFN1cHBseSA9IHRva2VuQ3RyLnRvdGFsU3VwcGx5KCk7CgogICAgICAgIGlmICh0b2tlbkJhbGFuY2UgPT0gMCkgdGhyb3c7CgogICAgICAgIGxhc3RQYWlkT3V0RXBvY2hbbXNnLnNlbmRlcl0gPSBjdXJyZW50RXBvY2g7CgogICAgICAgIC8vIE92ZXJmbG93IHJpc2sgb25seSBleGlzdHMgaWYgYmFsYW5jZSBpcyBncmVhdGVyIHRoYW4KICAgICAgICAvLyAxZSszMyBldGhlciwgYXNzdW1pbmcgbWF4IG9mIDk2TSB0b2tlbnMgbWludGVkLgogICAgICAgIC8vIEZ1bmN0aW9ucyB0aHJvd3MsIGFzIHN1Y2ggYSBzdGF0ZSBzaG91bGQgbmV2ZXIgYmUgcmVhY2hlZAogICAgICAgIC8vIFVubGVzcyBzaWduaWZpY2FudGx5IG1vcmUgdG9rZW5zIGFyZSBtaW50ZWQKICAgICAgICBpZiAoIXNhZmVUb011bHRpcGx5KHRva2VuQmFsYW5jZSwgaW5pdEVwb2NoQmFsYW5jZSkpIHRocm93OwogICAgICAgIHVpbnQgc2VuZGVyUG9ydGlvbiA9ICh0b2tlbkJhbGFuY2UgKiBpbml0RXBvY2hCYWxhbmNlKTsKCiAgICAgICAgdWludCBhbW91bnRUb1BheU91dCA9IHNlbmRlclBvcnRpb24gLyB0b3RhbFN1cHBseTsKCiAgICAgICAgaWYoIW1zZy5zZW5kZXIuc2VuZChhbW91bnRUb1BheU91dCkpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQoKICAgICAgICBQcm9maXRXaXRoZHJhd24obXNnLnNlbmRlciwgYW1vdW50VG9QYXlPdXQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVRva2VuQ29udHJhY3QoYWRkcmVzcyBfbmV3VG9rZW4pCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBvbmx5T3duZXIgewoKICAgICAgICBpZiAoX25ld1Rva2VuID09IGFkZHJlc3MoMHgwKSkgdGhyb3c7CgogICAgICAgIHRva2VuQ3RyID0gVG9rZW4oX25ld1Rva2VuKTsKICAgICAgICBUb2tlbkNvbnRyYWN0Q2hhbmdlZChfbmV3VG9rZW4pOwogICAgfQoKICAgIC8vIHJldHVybnMgZXhwZWN0ZWQgcGF5b3V0IGZvciB0b2tlbmhvbGRlciBkdXJpbmcgbG9jayBwaGFzZQogICAgZnVuY3Rpb24gZXhwZWN0ZWRQYXlvdXQoYWRkcmVzcyBfdG9rZW5Ib2xkZXIpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CgogICAgICAgIGlmICghdG9rZW5DdHIubG9jaygpKQogICAgICAgICAgICByZXR1cm4gMDsKCiAgICAgICAgcmV0dXJuICh0b2tlbkN0ci5iYWxhbmNlT2YoX3Rva2VuSG9sZGVyKSAqIGluaXRFcG9jaEJhbGFuY2UpIC8gdG9rZW5DdHIudG90YWxTdXBwbHkoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlVG9NdWx0aXBseSh1aW50IF9hLCB1aW50IF9iKQogICAgICAgIHByaXZhdGUKICAgICAgICBjb25zdGFudCByZXR1cm5zIChib29sKSB7CgogICAgICAgIHJldHVybiAoX2IgPT0gMCB8fCAoKF9hICogX2IpIC8gX2IpID09IF9hKTsKICAgIH0KfQ=='.
	

]
