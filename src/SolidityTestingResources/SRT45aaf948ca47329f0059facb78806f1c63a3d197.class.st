Class {
	#name : #SRT45aaf948ca47329f0059facb78806f1c63a3d197,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT45aaf948ca47329f0059facb78806f1c63a3d197 >> base64 [
	^ 'Ly8gQXV0aG9yIDogc2hpZnQKCnByYWdtYSBzb2xpZGl0eSBeMC40LjE4OwoKLy8tLS0tLS0tLS0gT3BlblplcHBlbGluJ3MgU2FmZSBNYXRoCi8vU291cmNlIDogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBFUkMyMCBJbnRlcmZhY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMApjb250cmFjdCBFUkMyMCB7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwp9CgovKgogIFRoaXMgY29udHJhY3Qgc3RvcmVzIHR3aWNlIGV2ZXJ5IGtleSB2YWx1ZSBpbiBvcmRlciB0byBiZSBhYmxlIHRvIHJlZGlzdHJpYnV0ZSBmdW5kcwogIHdoZW4gdGhlIGJvbnVzIHRva2VucyBhcmUgcmVjZWl2ZWQgKHdoaWNoIGlzIHR5cGljYWxseSBYIG1vbnRocyBhZnRlciB0aGUgaW5pdGlhbCBidXkpLgoqLwoKY29udHJhY3QgTW9vbmdhbmcgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIG1pbkFtb3VudFJlYWNoZWQgewogICAgLy9JbiByZWFsaXR5LCB0aGUgY29ycmVjdCBhbW91bnQgaXMgdGhlIGFtb3VudCArIDElCiAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSA+PSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKG1pbl9hbW91bnQsIDEwMCksIDk5KSk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgdW5kZXJNYXhBbW91bnQgewogICAgcmVxdWlyZShtYXhfYW1vdW50ID09IDAgfHwgdGhpcy5iYWxhbmNlIDw9IG1heF9hbW91bnQpOwogICAgXzsKICB9CgogIC8vQ29uc3RhbnRzIG9mIHRoZSBjb250cmFjdAogIHVpbnQyNTYgY29uc3RhbnQgRkVFID0gMTAwOyAgICAvLzElIGZlZQogIC8vU2FmZU1hdGguZGl2KDIwLCAzKSA9IDYKICB1aW50MjU2IGNvbnN0YW50IEZFRV9ERVYgPSA2OyAvLzE1JSBvbiB0aGUgMSUgZmVlCiAgdWludDI1NiBjb25zdGFudCBGRUVfQVVESVQgPSAxMjsgLy83LjUlIG9uIHRoZSAxJSBmZWUKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICBhZGRyZXNzIGNvbnN0YW50IHB1YmxpYyBkZXZlbG9wZXIgPSAweEVFMDZCZERhZkZBNTZhMzAzNzE4REU1M0E1YmMzNDdFZmJFNEM2OGY7CiAgYWRkcmVzcyBjb25zdGFudCBwdWJsaWMgYXVkaXRvciA9IDB4NjNGNzU0N0FjMjc3ZWEwQjUyQTBCMDYwQmU2YWY4QzU5MDQ5NTNhYTsKICB1aW50MjU2IHB1YmxpYyBpbmRpdmlkdWFsX2NhcDsKCiAgLy9WYXJpYWJsZXMgc3ViamVjdCB0byBjaGFuZ2VzCiAgdWludDI1NiBwdWJsaWMgbWF4X2Ftb3VudDsgIC8vMCBtZWFucyB0aGVyZSBpcyBubyBsaW1pdAogIHVpbnQyNTYgcHVibGljIG1pbl9hbW91bnQ7CgogIC8vU3RvcmUgdGhlIGFtb3VudCBvZiBFVEggZGVwb3NpdGVkIGJ5IGVhY2ggYWNjb3VudC4KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlczsKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlc19ib251czsKICAvLyBUcmFjayB3aGV0aGVyIHRoZSBjb250cmFjdCBoYXMgYm91Z2h0IHRoZSB0b2tlbnMgeWV0LgogIGJvb2wgcHVibGljIGJvdWdodF90b2tlbnM7CiAgLy8gUmVjb3JkIEVUSCB2YWx1ZSBvZiB0b2tlbnMgY3VycmVudGx5IGhlbGQgYnkgY29udHJhY3QuCiAgdWludDI1NiBwdWJsaWMgY29udHJhY3RfZXRoX3ZhbHVlOwogIHVpbnQyNTYgcHVibGljIGNvbnRyYWN0X2V0aF92YWx1ZV9ib251czsKICAvL1NldCBieSB0aGUgb3duZXIgaW4gb3JkZXIgdG8gYWxsb3cgdGhlIHdpdGhkcmF3YWwgb2YgYm9udXMgdG9rZW5zLgogIGJvb2wgcHVibGljIGJvbnVzX3JlY2VpdmVkOwogIC8vVGhlIGFkZHJlc3Mgb2YgdGhlIGNvbnRhY3QuCiAgYWRkcmVzcyBwdWJsaWMgc2FsZTsKICAvL1Rva2VuIGFkZHJlc3MKICBFUkMyMCBwdWJsaWMgdG9rZW47CiAgLy9SZWNvcmRzIHRoZSBmZWVzIHRoYXQgaGF2ZSB0byBiZSBzZW50CiAgdWludDI1NiBmZWVzOwogIC8vU2V0IGJ5IHRoZSBvd25lci4gQWxsb3dzIHBlb3BsZSB0byByZWZ1bmQgdG90YWxseSBvciBwYXJ0aWFsbHkuCiAgYm9vbCBwdWJsaWMgYWxsb3dfcmVmdW5kczsKICAvL1RoZSByZWR1Y3Rpb24gb2YgdGhlIGFsbG9jYXRpb24gaW4gJSB8IGV4YW1wbGUgOiA0MCAtPiA0MCUgcmVkdWN0aW9uCiAgdWludDI1NiBwdWJsaWMgcGVyY2VudF9yZWR1Y3Rpb247CiAgYm9vbCBwdWJsaWMgb3duZXJfc3VwcGxpZWRfZXRoOwoKICAvL0ludGVybmFsIGZ1bmN0aW9ucwogIGZ1bmN0aW9uIE1vb25nYW5nKHVpbnQyNTYgbWF4LCB1aW50MjU2IG1pbiwgdWludDI1NiBjYXApIHsKICAgIC8qCiAgICBDb25zdHJ1Y3RvcgogICAgKi8KICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIG1heF9hbW91bnQgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKG1heCwgMTAwKSwgOTkpOwogICAgbWluX2Ftb3VudCA9IG1pbjsKICAgIGluZGl2aWR1YWxfY2FwID0gY2FwOwogIH0KCiAgLy9GdW5jdGlvbnMgZm9yIHRoZSBvd25lcgoKICAvLyBCdXkgdGhlIHRva2Vucy4gU2VuZHMgRVRIIHRvIHRoZSBwcmVzYWxlIHdhbGxldCBhbmQgcmVjb3JkcyB0aGUgRVRIIGFtb3VudCBoZWxkIGluIHRoZSBjb250cmFjdC4KICBmdW5jdGlvbiBidXlfdGhlX3Rva2VucygpIG9ubHlPd25lciBtaW5BbW91bnRSZWFjaGVkIHVuZGVyTWF4QW1vdW50IHsKICAgIC8vQXZvaWRzIGJ1cm5pbmcgdGhlIGZ1bmRzCiAgICByZXF1aXJlKCFib3VnaHRfdG9rZW5zICYmIHNhbGUgIT0gMHgwKTsKICAgIC8vUmVjb3JkIHRoYXQgdGhlIGNvbnRyYWN0IGhhcyBib3VnaHQgdGhlIHRva2Vucy4KICAgIGJvdWdodF90b2tlbnMgPSB0cnVlOwogICAgLy9TZW5kcyB0aGUgZmVlIGJlZm9yZSBzbyB0aGUgY29udHJhY3RfZXRoX3ZhbHVlIGNvbnRhaW5zIHRoZSBjb3JyZWN0IGJhbGFuY2UKICAgIHVpbnQyNTYgZGV2X2ZlZSA9IFNhZmVNYXRoLmRpdihmZWVzLCBGRUVfREVWKTsKICAgIHVpbnQyNTYgYXVkaXRfZmVlID0gU2FmZU1hdGguZGl2KGZlZXMsIEZFRV9BVURJVCk7CiAgICBvd25lci50cmFuc2ZlcihTYWZlTWF0aC5zdWIoU2FmZU1hdGguc3ViKGZlZXMsIGRldl9mZWUpLCBhdWRpdF9mZWUpKTsKICAgIGRldmVsb3Blci50cmFuc2ZlcihkZXZfZmVlKTsKICAgIGF1ZGl0b3IudHJhbnNmZXIoYXVkaXRfZmVlKTsKICAgIC8vUmVjb3JkIHRoZSBhbW91bnQgb2YgRVRIIHNlbnQgYXMgdGhlIGNvbnRyYWN0J3MgY3VycmVudCB2YWx1ZS4KICAgIGNvbnRyYWN0X2V0aF92YWx1ZSA9IHRoaXMuYmFsYW5jZTsKICAgIGNvbnRyYWN0X2V0aF92YWx1ZV9ib251cyA9IHRoaXMuYmFsYW5jZTsKICAgIC8vIFRyYW5zZmVyIGFsbCB0aGUgZnVuZHMgdG8gdGhlIGNyb3dkc2FsZSBhZGRyZXNzLgogICAgc2FsZS50cmFuc2Zlcihjb250cmFjdF9ldGhfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gZm9yY2VfcmVmdW5kKGFkZHJlc3MgX3RvX3JlZnVuZCkgb25seU93bmVyIHsKICAgIHJlcXVpcmUoIWJvdWdodF90b2tlbnMpOwogICAgdWludDI1NiBldGhfdG9fd2l0aGRyYXcgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGJhbGFuY2VzW190b19yZWZ1bmRdLCAxMDApLCA5OSk7CiAgICBiYWxhbmNlc1tfdG9fcmVmdW5kXSA9IDA7CiAgICBiYWxhbmNlc19ib251c1tfdG9fcmVmdW5kXSA9IDA7CiAgICBmZWVzID0gU2FmZU1hdGguc3ViKGZlZXMsIFNhZmVNYXRoLmRpdihldGhfdG9fd2l0aGRyYXcsIEZFRSkpOwogICAgX3RvX3JlZnVuZC50cmFuc2ZlcihldGhfdG9fd2l0aGRyYXcpOwogIH0KCiAgZnVuY3Rpb24gZm9yY2VfcGFydGlhbF9yZWZ1bmQoYWRkcmVzcyBfdG9fcmVmdW5kKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShib3VnaHRfdG9rZW5zICYmIHBlcmNlbnRfcmVkdWN0aW9uID4gMCk7CiAgICAvL0Ftb3VudCB0byByZWZ1bmQgaXMgdGhlIGFtb3VudCBtaW51cyB0aGUgWCUgb2YgdGhlIHJlZHVjdGlvbgogICAgLy9hbW91bnRfdG9fcmVmdW5kID0gYmFsYW5jZSpYCiAgICB1aW50MjU2IGFtb3VudCA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoYmFsYW5jZXNbX3RvX3JlZnVuZF0sIHBlcmNlbnRfcmVkdWN0aW9uKSwgMTAwKTsKICAgIGJhbGFuY2VzW190b19yZWZ1bmRdID0gU2FmZU1hdGguc3ViKGJhbGFuY2VzW190b19yZWZ1bmRdLCBhbW91bnQpOwogICAgYmFsYW5jZXNfYm9udXNbX3RvX3JlZnVuZF0gPSBiYWxhbmNlc1tfdG9fcmVmdW5kXTsKICAgIGlmIChvd25lcl9zdXBwbGllZF9ldGgpIHsKICAgICAgLy9kZXYgZmVlcyBhcmVuJ3QgcmVmdW5kZWQsIG9ubHkgb3duZXIgZmVlcwogICAgICB1aW50MjU2IGZlZSA9IGFtb3VudC5kaXYoRkVFKS5tdWwocGVyY2VudF9yZWR1Y3Rpb24pLmRpdigxMDApOwogICAgICBhbW91bnQgPSBhbW91bnQuYWRkKGZlZSk7CiAgICB9CiAgICBfdG9fcmVmdW5kLnRyYW5zZmVyKGFtb3VudCk7CiAgfQoKICBmdW5jdGlvbiBzZXRfc2FsZV9hZGRyZXNzKGFkZHJlc3MgX3NhbGUpIG9ubHlPd25lciB7CiAgICAvL0F2b2lkIG1pc3Rha2Ugb2YgcHV0dGluZyAweDAgYW5kIGNhbid0IGNoYW5nZSB0d2ljZSB0aGUgc2FsZSBhZGRyZXNzCiAgICByZXF1aXJlKF9zYWxlICE9IDB4MCk7CiAgICBzYWxlID0gX3NhbGU7CiAgfQoKICBmdW5jdGlvbiBzZXRfdG9rZW5fYWRkcmVzcyhhZGRyZXNzIF90b2tlbikgb25seU93bmVyIHsKICAgIHJlcXVpcmUoX3Rva2VuICE9IDB4MCk7CiAgICB0b2tlbiA9IEVSQzIwKF90b2tlbik7CiAgfQoKICBmdW5jdGlvbiBzZXRfYm9udXNfcmVjZWl2ZWQoYm9vbCBfYm9vbGVhbikgb25seU93bmVyIHsKICAgIGJvbnVzX3JlY2VpdmVkID0gX2Jvb2xlYW47CiAgfQoKICBmdW5jdGlvbiBzZXRfYWxsb3dfcmVmdW5kcyhib29sIF9ib29sZWFuKSBvbmx5T3duZXIgewogICAgLyoKICAgIEluIGNhc2UsIGZvciBzb21lIHJlYXNvbnMsIHRoZSBwcm9qZWN0IHJlZnVuZHMgdGhlIG1vbmV5CiAgICAqLwogICAgYWxsb3dfcmVmdW5kcyA9IF9ib29sZWFuOwogIH0KCiAgZnVuY3Rpb24gc2V0X3BlcmNlbnRfcmVkdWN0aW9uKHVpbnQyNTYgX3JlZHVjdGlvbikgb25seU93bmVyIHBheWFibGUgewogICAgcmVxdWlyZShib3VnaHRfdG9rZW5zICYmIF9yZWR1Y3Rpb24gPD0gMTAwKTsKICAgIHBlcmNlbnRfcmVkdWN0aW9uID0gX3JlZHVjdGlvbjsKICAgIGlmIChtc2cudmFsdWUgPiAwKSB7CiAgICAgIG93bmVyX3N1cHBsaWVkX2V0aCA9IHRydWU7CiAgICB9CiAgICAvL3dlIHN1YnN0cmFjdCBieSBjb250cmFjdF9ldGhfdmFsdWUqX3JlZHVjdGlvbiBiYXNpY2FsbHkKICAgIGNvbnRyYWN0X2V0aF92YWx1ZSA9IGNvbnRyYWN0X2V0aF92YWx1ZS5zdWIoKGNvbnRyYWN0X2V0aF92YWx1ZS5tdWwoX3JlZHVjdGlvbikpLmRpdigxMDApKTsKICAgIGNvbnRyYWN0X2V0aF92YWx1ZV9ib251cyA9IGNvbnRyYWN0X2V0aF92YWx1ZTsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZV9pbmRpdmlkdWFsX2NhcCh1aW50MjU2IF9jYXApIG9ubHlPd25lciB7CiAgICBpbmRpdmlkdWFsX2NhcCA9IF9jYXA7CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2Vfb3duZXIoYWRkcmVzcyBuZXdfb3duZXIpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld19vd25lciAhPSAweDApOwogICAgb3duZXIgPSBuZXdfb3duZXI7CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VfbWF4X2Ftb3VudCh1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciB7CiAgICAgIC8vQVRURU5USU9OISBUaGUgbmV3IGFtb3VudCBzaG91bGQgYmUgaW4gd2VpCiAgICAgIC8vVXNlIGh0dHBzOi8vZXRoZXJjb252ZXJ0ZXIub25saW5lLwogICAgICBtYXhfYW1vdW50ID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChfYW1vdW50LCAxMDApLCA5OSk7CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VfbWluX2Ftb3VudCh1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciB7CiAgICAgIC8vQVRURU5USU9OISBUaGUgbmV3IGFtb3VudCBzaG91bGQgYmUgaW4gd2VpCiAgICAgIC8vVXNlIGh0dHBzOi8vZXRoZXJjb252ZXJ0ZXIub25saW5lLwogICAgICBtaW5fYW1vdW50ID0gX2Ftb3VudDsKICB9CgogIC8vUHVibGljIGZ1bmN0aW9ucwoKICAvLyBBbGxvd3MgYW55IHVzZXIgdG8gd2l0aGRyYXcgaGlzIHRva2Vucy4KICBmdW5jdGlvbiB3aXRoZHJhdygpIHsKICAgIC8vIERpc2FsbG93IHdpdGhkcmF3IGlmIHRva2VucyBoYXZlbid0IGJlZW4gYm91Z2h0IHlldC4KICAgIHJlcXVpcmUoYm91Z2h0X3Rva2Vucyk7CiAgICB1aW50MjU2IGNvbnRyYWN0X3Rva2VuX2JhbGFuY2UgPSB0b2tlbi5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7CiAgICAvLyBEaXNhbGxvdyB0b2tlbiB3aXRoZHJhd2FscyBpZiB0aGVyZSBhcmUgbm8gdG9rZW5zIHRvIHdpdGhkcmF3LgogICAgcmVxdWlyZShjb250cmFjdF90b2tlbl9iYWxhbmNlICE9IDApOwogICAgdWludDI1NiB0b2tlbnNfdG9fd2l0aGRyYXcgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBjb250cmFjdF90b2tlbl9iYWxhbmNlKSwgY29udHJhY3RfZXRoX3ZhbHVlKTsKICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWUgb2YgdG9rZW5zIGN1cnJlbnRseSBoZWxkIGJ5IHRoZSBjb250cmFjdC4KICAgIGNvbnRyYWN0X2V0aF92YWx1ZSA9IFNhZmVNYXRoLnN1Yihjb250cmFjdF9ldGhfdmFsdWUsIGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKICAgIC8vIFVwZGF0ZSB0aGUgdXNlcidzIGJhbGFuY2UgcHJpb3IgdG8gc2VuZGluZyB0byBwcmV2ZW50IHJlY3Vyc2l2ZSBjYWxsLgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAwOwogICAgLy8gU2VuZCB0aGUgZnVuZHMuICBUaHJvd3Mgb24gZmFpbHVyZSB0byBwcmV2ZW50IGxvc3Mgb2YgZnVuZHMuCiAgICByZXF1aXJlKHRva2VuLnRyYW5zZmVyKG1zZy5zZW5kZXIsIHRva2Vuc190b193aXRoZHJhdykpOwogIH0KCiAgZnVuY3Rpb24gd2l0aGRyYXdfYm9udXMoKSB7CiAgLyoKICAgIFNwZWNpYWwgZnVuY3Rpb24gdG8gd2l0aGRyYXcgdGhlIGJvbnVzIHRva2VucyBhZnRlciB0aGUgNiBtb250aHMgbG9ja3VwLgogICAgYm9udXNfcmVjZWl2ZWQgaGFzIHRvIGJlIHNldCB0byB0cnVlLgogICovCiAgICByZXF1aXJlKGJvdWdodF90b2tlbnMgJiYgYm9udXNfcmVjZWl2ZWQpOwogICAgdWludDI1NiBjb250cmFjdF90b2tlbl9iYWxhbmNlID0gdG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOwogICAgcmVxdWlyZShjb250cmFjdF90b2tlbl9iYWxhbmNlICE9IDApOwogICAgdWludDI1NiB0b2tlbnNfdG9fd2l0aGRyYXcgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGJhbGFuY2VzX2JvbnVzW21zZy5zZW5kZXJdLCBjb250cmFjdF90b2tlbl9iYWxhbmNlKSwgY29udHJhY3RfZXRoX3ZhbHVlX2JvbnVzKTsKICAgIGNvbnRyYWN0X2V0aF92YWx1ZV9ib251cyA9IFNhZmVNYXRoLnN1Yihjb250cmFjdF9ldGhfdmFsdWVfYm9udXMsIGJhbGFuY2VzX2JvbnVzW21zZy5zZW5kZXJdKTsKICAgIGJhbGFuY2VzX2JvbnVzW21zZy5zZW5kZXJdID0gMDsKICAgIHJlcXVpcmUodG9rZW4udHJhbnNmZXIobXNnLnNlbmRlciwgdG9rZW5zX3RvX3dpdGhkcmF3KSk7CiAgfQoKICAvLyBBbGxvd3MgYW55IHVzZXIgdG8gZ2V0IGhpcyBldGggcmVmdW5kZWQgYmVmb3JlIHRoZSBwdXJjaGFzZSBpcyBtYWRlLgogIGZ1bmN0aW9uIHJlZnVuZCgpIHsKICAgIHJlcXVpcmUoIWJvdWdodF90b2tlbnMgJiYgYWxsb3dfcmVmdW5kcyAmJiBwZXJjZW50X3JlZHVjdGlvbiA9PSAwKTsKICAgIC8vYmFsYW5jZSBvZiBjb250cmlidXRvciA9IGNvbnRyaWJ1dGlvbiAqIDAuOTkKICAgIC8vc28gY29udHJpYnV0aW9uID0gYmFsYW5jZS8wLjk5CiAgICB1aW50MjU2IGV0aF90b193aXRoZHJhdyA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIDEwMCksIDk5KTsKICAgIC8vIFVwZGF0ZSB0aGUgdXNlcidzIGJhbGFuY2UgcHJpb3IgdG8gc2VuZGluZyBFVEggdG8gcHJldmVudCByZWN1cnNpdmUgY2FsbC4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgIC8vVXBkYXRlcyB0aGUgYmFsYW5jZXNfYm9udXMgdG9vCiAgICBiYWxhbmNlc19ib251c1ttc2cuc2VuZGVyXSA9IDA7CiAgICAvL1VwZGF0ZXMgdGhlIGZlZXMgdmFyaWFibGUgYnkgc3Vic3RyYWN0aW5nIHRoZSByZWZ1bmRlZCBmZWUKICAgIGZlZXMgPSBTYWZlTWF0aC5zdWIoZmVlcywgU2FmZU1hdGguZGl2KGV0aF90b193aXRoZHJhdywgRkVFKSk7CiAgICAvLyBSZXR1cm4gdGhlIHVzZXIncyBmdW5kcy4gIFRocm93cyBvbiBmYWlsdXJlIHRvIHByZXZlbnQgbG9zcyBvZiBmdW5kcy4KICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZXRoX3RvX3dpdGhkcmF3KTsKICB9CgogIC8vQWxsb3dzIGFueSB1c2VyIHRvIGdldCBhIHBhcnQgb2YgaGlzIEVUSCByZWZ1bmRlZCwgaW4gcHJvcG9ydGlvbgogIC8vdG8gdGhlICUgcmVkdWNlZCBvZiB0aGUgYWxsb2NhdGlvbgogIGZ1bmN0aW9uIHBhcnRpYWxfcmVmdW5kKCkgewogICAgcmVxdWlyZShib3VnaHRfdG9rZW5zICYmIHBlcmNlbnRfcmVkdWN0aW9uID4gMCk7CiAgICAvL0Ftb3VudCB0byByZWZ1bmQgaXMgdGhlIGFtb3VudCBtaW51cyB0aGUgWCUgb2YgdGhlIHJlZHVjdGlvbgogICAgLy9hbW91bnRfdG9fcmVmdW5kID0gYmFsYW5jZSpYCiAgICB1aW50MjU2IGFtb3VudCA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIHBlcmNlbnRfcmVkdWN0aW9uKSwgMTAwKTsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gU2FmZU1hdGguc3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBhbW91bnQpOwogICAgYmFsYW5jZXNfYm9udXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXTsKICAgIGlmIChvd25lcl9zdXBwbGllZF9ldGgpIHsKICAgICAgLy9kZXYgZmVlcyBhcmVuJ3QgcmVmdW5kZWQsIG9ubHkgb3duZXIgZmVlcwogICAgICB1aW50MjU2IGZlZSA9IGFtb3VudC5kaXYoRkVFKS5tdWwocGVyY2VudF9yZWR1Y3Rpb24pLmRpdigxMDApOwogICAgICBhbW91bnQgPSBhbW91bnQuYWRkKGZlZSk7CiAgICB9CiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudCk7CiAgfQoKICAvLyBEZWZhdWx0IGZ1bmN0aW9uLiAgQ2FsbGVkIHdoZW4gYSB1c2VyIHNlbmRzIEVUSCB0byB0aGUgY29udHJhY3QuCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSB1bmRlck1heEFtb3VudCB7CiAgICByZXF1aXJlKCFib3VnaHRfdG9rZW5zKTsKICAgIC8vMSUgZmVlIGlzIHRha2VuIG9uIHRoZSBFVEgKICAgIHVpbnQyNTYgZmVlID0gU2FmZU1hdGguZGl2KG1zZy52YWx1ZSwgRkVFKTsKICAgIGZlZXMgPSBTYWZlTWF0aC5hZGQoZmVlcywgZmVlKTsKICAgIC8vVXBkYXRlcyBib3RoIG9mIHRoZSBiYWxhbmNlcwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBTYWZlTWF0aC5hZGQoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIFNhZmVNYXRoLnN1Yihtc2cudmFsdWUsIGZlZSkpOwogICAgLy9DaGVja3MgaWYgdGhlIGluZGl2aWR1YWwgY2FwIGlzIHJlc3BlY3RlZAogICAgLy9JZiBpdCdzIG5vdCwgY2hhbmdlcyBhcmUgcmV2ZXJ0ZWQKICAgIHJlcXVpcmUoaW5kaXZpZHVhbF9jYXAgPT0gMCB8fCBiYWxhbmNlc1ttc2cuc2VuZGVyXSA8PSBpbmRpdmlkdWFsX2NhcCk7CiAgICBiYWxhbmNlc19ib251c1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwogIH0KfQ=='.
	

]
