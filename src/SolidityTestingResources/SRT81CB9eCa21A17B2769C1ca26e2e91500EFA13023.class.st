Class {
	#name : #SRT81CB9eCa21A17B2769C1ca26e2e91500EFA13023,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT81CB9eCa21A17B2769C1ca26e2e91500EFA13023 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Ci8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Ci8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KfQovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICB9CiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9Cn0KLyoqCiAqIFRoZSBRdWFudHN0YW1wU2FsZSBzbWFydCBjb250cmFjdCBpcyB1c2VkIGZvciBzZWxsaW5nIFF1YW50c3RhbXBUb2tlbgogKiB0b2tlbnMgKFFTUCkuIEl0IGRvZXMgc28gYnkgY29udmVydGluZyBFVEggcmVjZWl2ZWQgaW50byBhIHF1YW50aXR5IG9mCiAqIHRva2VucyB0aGF0IGFyZSB0cmFuc2ZlcnJlZCB0byB0aGUgY29udHJpYnV0b3IgdmlhIHRoZSBFUkMyMC1jb21wYXRpYmxlCiAqIHRyYW5zZmVyRnJvbSgpIGZ1bmN0aW9uLgogKi8KY29udHJhY3QgUXVhbnRzdGFtcFNhbGUgaXMgUGF1c2FibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICAvLyBUaGUgYmVuZWZpY2lhcnkgaXMgdGhlIGZ1dHVyZSByZWNpcGllbnQgb2YgdGhlIGZ1bmRzCiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeTsKICAgIC8vIFRoZSBjcm93ZHNhbGUgaGFzIGEgZnVuZGluZyBnb2FsLCBjYXAsIGRlYWRsaW5lLCBhbmQgbWluaW11bSBjb250cmlidXRpb24KICAgIHVpbnQgcHVibGljIGZ1bmRpbmdDYXA7CiAgICB1aW50IHB1YmxpYyBtaW5Db250cmlidXRpb247CiAgICBib29sIHB1YmxpYyBmdW5kaW5nQ2FwUmVhY2hlZCA9IGZhbHNlOwogICAgYm9vbCBwdWJsaWMgc2FsZUNsb3NlZCA9IGZhbHNlOwogICAgLy8gV2hpdGVsaXN0IGRhdGEKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgcmVnaXN0cnk7CiAgICAvLyBGb3IgZWFjaCB1c2VyLCBzcGVjaWZpZXMgdGhlIGNhcCAoaW4gd2VpKSB0aGF0IGNhbiBiZSBjb250cmlidXRlZCBmb3IgZWFjaCB0aWVyCiAgICAvLyBUaWVycyBhcmUgZmlsbGVkIGluIHRoZSBvcmRlciAzLCAyLCAxLCA0CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGNhcDE7ICAgICAgICAvLyAxMDAlIGJvbnVzCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGNhcDI7ICAgICAgICAvLyA0MCUgYm9udXMKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgY2FwMzsgICAgICAgIC8vIDIwJSBib251cwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBjYXA0OyAgICAgICAgLy8gMCUgYm9udXMKICAgIC8vIFN0b3JlcyB0aGUgYW1vdW50IGNvbnRyaWJ1dGVkIGZvciBlYWNoIHRpZXIgZm9yIGEgZ2l2ZW4gYWRkcmVzcwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBjb250cmlidXRlZDE7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGNvbnRyaWJ1dGVkMjsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgY29udHJpYnV0ZWQzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBjb250cmlidXRlZDQ7CiAgICAvLyBDb252ZXJzaW9uIHJhdGUgYnkgdGllciAoUVNQIDogRVRIRVIpCiAgICB1aW50IHB1YmxpYyByYXRlMSA9IDEwMDAwOwogICAgdWludCBwdWJsaWMgcmF0ZTIgPSA3MDAwOwogICAgdWludCBwdWJsaWMgcmF0ZTMgPSA2MDAwOwogICAgdWludCBwdWJsaWMgcmF0ZTQgPSA1MDAwOwogICAgLy8gVGltZSBwZXJpb2Qgb2Ygc2FsZSAoVU5JWCB0aW1lc3RhbXBzKQogICAgdWludCBwdWJsaWMgc3RhcnRUaW1lOwogICAgdWludCBwdWJsaWMgZW5kVGltZTsKICAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBhbW91bnQgb2Ygd2VpIHJhaXNlZAogICAgdWludCBwdWJsaWMgYW1vdW50UmFpc2VkOwogICAgLy8gcHJldmVudCBjZXJ0YWluIGZ1bmN0aW9ucyBmcm9tIGJlaW5nIHJlY3Vyc2l2ZWx5IGNhbGxlZAogICAgYm9vbCBwcml2YXRlIHJlbnRyYW5jeV9sb2NrID0gZmFsc2U7CiAgICAvLyBUaGUgdG9rZW4gYmVpbmcgc29sZAogICAgLy8gUXVhbnRzdGFtcFRva2VuIHB1YmxpYyB0b2tlblJld2FyZDsKICAgIC8vIEEgbWFwIHRoYXQgdHJhY2tzIHRoZSBhbW91bnQgb2Ygd2VpIGNvbnRyaWJ1dGVkIGJ5IGFkZHJlc3MKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgLy8gQSBtYXAgdGhhdCB0cmFja3MgdGhlIGFtb3VudCBvZiBRU1AgdG9rZW5zIHRoYXQgc2hvdWxkIGJlIGFsbG9jYXRlZCB0byBlYWNoIGFkZHJlc3MKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgdG9rZW5CYWxhbmNlT2Y7CiAgICAvLyBFdmVudHMKICAgIGV2ZW50IENhcFJlYWNoZWQoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQgX2Ftb3VudFJhaXNlZCk7CiAgICBldmVudCBGdW5kVHJhbnNmZXIoYWRkcmVzcyBfYmFja2VyLCB1aW50IF9hbW91bnQsIGJvb2wgX2lzQ29udHJpYnV0aW9uKTsKICAgIGV2ZW50IFJlZ2lzdHJhdGlvblN0YXR1c0NoYW5nZWQoYWRkcmVzcyB0YXJnZXQsIGJvb2wgaXNSZWdpc3RlcmVkLCB1aW50IGMxLCB1aW50IGMyLCB1aW50IGMzLCB1aW50IGM0KTsKICAgIC8vIE1vZGlmaWVycwogICAgbW9kaWZpZXIgYmVmb3JlRGVhZGxpbmUoKSAgIHsgcmVxdWlyZSAoY3VycmVudFRpbWUoKSA8IGVuZFRpbWUpOyBfOyB9CiAgICAvLyBtb2RpZmllciBhZnRlckRlYWRsaW5lKCkgICAgeyByZXF1aXJlIChjdXJyZW50VGltZSgpID49IGVuZFRpbWUpOyBfOyB9IG5vIGxvbmdlciB1c2VkIHdpdGhvdXQgZnVuZGluZ0dvYWwKICAgIG1vZGlmaWVyIGFmdGVyU3RhcnRUaW1lKCkgICAgeyByZXF1aXJlIChjdXJyZW50VGltZSgpID49IHN0YXJ0VGltZSk7IF87IH0KICAgIG1vZGlmaWVyIHNhbGVOb3RDbG9zZWQoKSAgICB7IHJlcXVpcmUgKCFzYWxlQ2xvc2VkKTsgXzsgfQogICAgbW9kaWZpZXIgbm9uUmVlbnRyYW50KCkgewogICAgICAgIHJlcXVpcmUoIXJlbnRyYW5jeV9sb2NrKTsKICAgICAgICByZW50cmFuY3lfbG9jayA9IHRydWU7CiAgICAgICAgXzsKICAgICAgICByZW50cmFuY3lfbG9jayA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgYSBjcm93ZHNhbGUgb2YgUXVhbnRzdGFtcFRva2VuIHRva2Vucy4KICAgICAqCiAgICAgKiBAcGFyYW0gaWZTdWNjZXNzZnVsU2VuZFRvICAgICAgICAgICAgdGhlIGJlbmVmaWNpYXJ5IG9mIHRoZSBmdW5kCiAgICAgKiBAcGFyYW0gZnVuZGluZ0NhcEluRXRoZXJzICAgICAgICAgICAgdGhlIGNhcCAobWF4aW11bSkgc2l6ZSBvZiB0aGUgZnVuZAogICAgICogQHBhcmFtIG1pbmltdW1Db250cmlidXRpb25JbldlaSAgICAgIG1pbmltdW0gY29udHJpYnV0aW9uIChpbiB3ZWkpCiAgICAgKiBAcGFyYW0gc3RhcnQgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHN0YXJ0IHRpbWUgKFVOSVggdGltZXN0YW1wKQogICAgICogQHBhcmFtIGR1cmF0aW9uSW5NaW51dGVzICAgICAgICAgICAgIHRoZSBkdXJhdGlvbiBvZiB0aGUgY3Jvd2RzYWxlIGluIG1pbnV0ZXMKICAgICAqLwogICAgZnVuY3Rpb24gUXVhbnRzdGFtcFNhbGUoCiAgICAgICAgYWRkcmVzcyBpZlN1Y2Nlc3NmdWxTZW5kVG8sCiAgICAgICAgdWludCBmdW5kaW5nQ2FwSW5FdGhlcnMsCiAgICAgICAgdWludCBtaW5pbXVtQ29udHJpYnV0aW9uSW5XZWksCiAgICAgICAgdWludCBzdGFydCwKICAgICAgICB1aW50IGR1cmF0aW9uSW5NaW51dGVzCiAgICAgICAgLy8gYWRkcmVzcyBhZGRyZXNzT2ZUb2tlblVzZWRBc1Jld2FyZAogICAgKSB7CiAgICAgICAgcmVxdWlyZShpZlN1Y2Nlc3NmdWxTZW5kVG8gIT0gYWRkcmVzcygwKSAmJiBpZlN1Y2Nlc3NmdWxTZW5kVG8gIT0gYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgLy9yZXF1aXJlKGFkZHJlc3NPZlRva2VuVXNlZEFzUmV3YXJkICE9IGFkZHJlc3MoMCkgJiYgYWRkcmVzc09mVG9rZW5Vc2VkQXNSZXdhcmQgIT0gYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgcmVxdWlyZShkdXJhdGlvbkluTWludXRlcyA+IDApOwogICAgICAgIGJlbmVmaWNpYXJ5ID0gaWZTdWNjZXNzZnVsU2VuZFRvOwogICAgICAgIGZ1bmRpbmdDYXAgPSBmdW5kaW5nQ2FwSW5FdGhlcnMgKiAxIGV0aGVyOwogICAgICAgIG1pbkNvbnRyaWJ1dGlvbiA9IG1pbmltdW1Db250cmlidXRpb25JbldlaTsKICAgICAgICBzdGFydFRpbWUgPSBzdGFydDsKICAgICAgICBlbmRUaW1lID0gc3RhcnQgKyAoZHVyYXRpb25Jbk1pbnV0ZXMgKiAxIG1pbnV0ZXMpOwogICAgICAgIC8vIHRva2VuUmV3YXJkID0gUXVhbnRzdGFtcFRva2VuKGFkZHJlc3NPZlRva2VuVXNlZEFzUmV3YXJkKTsKICAgIH0KICAgIC8qKgogICAgICogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbmV2ZXIgRXRoZXIgaXMgc2VudCB0byB0aGUKICAgICAqIHNtYXJ0IGNvbnRyYWN0LiBJdCBjYW4gb25seSBiZSBleGVjdXRlZCB3aGVuIHRoZSBjcm93ZHNhbGUgaXMKICAgICAqIG5vdCBwYXVzZWQsIG5vdCBjbG9zZWQsIGFuZCBiZWZvcmUgdGhlIGRlYWRsaW5lIGhhcyBiZWVuIHJlYWNoZWQuCiAgICAgKgogICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHVwZGF0ZSBzdGF0ZSB2YXJpYWJsZXMgZm9yIHdoZXRoZXIgb3Igbm90IHRoZQogICAgICogZnVuZGluZyBnb2FsIG9yIGNhcCBoYXZlIGJlZW4gcmVhY2hlZC4gSXQgYWxzbyBlbnN1cmVzIHRoYXQgdGhlCiAgICAgKiB0b2tlbnMgYXJlIHRyYW5zZmVycmVkIHRvIHRoZSBzZW5kZXIsIGFuZCB0aGF0IHRoZSBjb3JyZWN0CiAgICAgKiBudW1iZXIgb2YgdG9rZW5zIGFyZSBzZW50IGFjY29yZGluZyB0byB0aGUgY3VycmVudCByYXRlLgogICAgICovCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICBidXkoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGJ1eSAoKQogICAgICAgIHBheWFibGUgcHVibGljCiAgICAgICAgd2hlbk5vdFBhdXNlZAogICAgICAgIGJlZm9yZURlYWRsaW5lCiAgICAgICAgYWZ0ZXJTdGFydFRpbWUKICAgICAgICBzYWxlTm90Q2xvc2VkCiAgICAgICAgbm9uUmVlbnRyYW50CiAgICB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gbWluQ29udHJpYnV0aW9uKTsKICAgICAgICB1aW50IGFtb3VudCA9IG1zZy52YWx1ZTsKICAgICAgICAvLyBlbnN1cmUgdGhhdCB0aGUgdXNlciBhZGhlcmVzIHRvIHdoaXRlbGlzdCByZXN0cmljdGlvbnMKICAgICAgICByZXF1aXJlKHJlZ2lzdHJ5W21zZy5zZW5kZXJdKTsKICAgICAgICB1aW50IG51bVRva2VucyA9IGNvbXB1dGVUb2tlbkFtb3VudChtc2cuc2VuZGVyLCBhbW91bnQpOwogICAgICAgIGFzc2VydChudW1Ub2tlbnMgPiAwKTsKICAgICAgICAvLyB1cGRhdGUgdGhlIHRvdGFsIGFtb3VudCByYWlzZWQKICAgICAgICBhbW91bnRSYWlzZWQgPSBhbW91bnRSYWlzZWQuYWRkKGFtb3VudCk7CiAgICAgICAgcmVxdWlyZShhbW91bnRSYWlzZWQgPD0gZnVuZGluZ0NhcCk7CiAgICAgICAgLy8gdXBkYXRlIHRoZSBzZW5kZXIncyBiYWxhbmNlIG9mIHdlaSBjb250cmlidXRlZAogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IGJhbGFuY2VPZlttc2cuc2VuZGVyXS5hZGQoYW1vdW50KTsKICAgICAgICAvLyBhZGQgdG8gdGhlIHRva2VuIGJhbGFuY2Ugb2YgdGhlIHNlbmRlcgogICAgICAgIHRva2VuQmFsYW5jZU9mW21zZy5zZW5kZXJdID0gdG9rZW5CYWxhbmNlT2ZbbXNnLnNlbmRlcl0uYWRkKG51bVRva2Vucyk7CiAgICAgICAgRnVuZFRyYW5zZmVyKG1zZy5zZW5kZXIsIGFtb3VudCwgdHJ1ZSk7CiAgICAgICAgdXBkYXRlRnVuZGluZ0NhcCgpOwogICAgfQogICAgLyoqCiAgICAqIENvbXB1dGVzIHRoZSBhbW91bnQgb2YgUVNQIHRoYXQgc2hvdWxkIGJlIGlzc3VlZCBmb3IgdGhlIGdpdmVuIHRyYW5zYWN0aW9uLgogICAgKiBDb250cmlidXRpb24gdGllcnMgYXJlIGZpbGxlZCB1cCBpbiB0aGUgb3JkZXIgMywgMiwgMSwgNC4KICAgICogQHBhcmFtIGFkZHIgICAgICBUaGUgd2FsbGV0IGFkZHJlc3Mgb2YgdGhlIGNvbnRyaWJ1dG9yCiAgICAqIEBwYXJhbSBhbW91bnQgICAgQW1vdW50IG9mIHdlaSBmb3IgcGF5bWVudAogICAgKi8KICAgIGZ1bmN0aW9uIGNvbXB1dGVUb2tlbkFtb3VudChhZGRyZXNzIGFkZHIsIHVpbnQgYW1vdW50KSBpbnRlcm5hbAogICAgICAgIHJldHVybnMgKHVpbnQpewogICAgICAgIHJlcXVpcmUoYW1vdW50ID4gMCk7CiAgICAgICAgdWludCByMyA9IGNhcDNbYWRkcl0uc3ViKGNvbnRyaWJ1dGVkM1thZGRyXSk7CiAgICAgICAgdWludCByMiA9IGNhcDJbYWRkcl0uc3ViKGNvbnRyaWJ1dGVkMlthZGRyXSk7CiAgICAgICAgdWludCByMSA9IGNhcDFbYWRkcl0uc3ViKGNvbnRyaWJ1dGVkMVthZGRyXSk7CiAgICAgICAgdWludCByNCA9IGNhcDRbYWRkcl0uc3ViKGNvbnRyaWJ1dGVkNFthZGRyXSk7CiAgICAgICAgdWludCBudW1Ub2tlbnMgPSAwOwogICAgICAgIC8vIGNhbm5vdCBjb250cmlidXRlIG1vcmUgdGhhbiB0aGUgcmVtYWluaW5nIHN1bQogICAgICAgIGFzc2VydChhbW91bnQgPD0gcjMuYWRkKHIyKS5hZGQocjEpLmFkZChyNCkpOwogICAgICAgIC8vIENvbXB1dGUgdG9rZW5zIGZvciB0aWVyIDMKICAgICAgICBpZihyMyA+IDApewogICAgICAgICAgICBpZihhbW91bnQgPD0gcjMpewogICAgICAgICAgICAgICAgY29udHJpYnV0ZWQzW2FkZHJdID0gY29udHJpYnV0ZWQzW2FkZHJdLmFkZChhbW91bnQpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJhdGUzLm11bChhbW91bnQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICBudW1Ub2tlbnMgPSByYXRlMy5tdWwocjMpOwogICAgICAgICAgICAgICAgYW1vdW50ID0gYW1vdW50LnN1YihyMyk7CiAgICAgICAgICAgICAgICBjb250cmlidXRlZDNbYWRkcl0gPSBjYXAzW2FkZHJdOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIENvbXB1dGUgdG9rZW5zIGZvciB0aWVyIDIKICAgICAgICBpZihyMiA+IDApewogICAgICAgICAgICBpZihhbW91bnQgPD0gcjIpewogICAgICAgICAgICAgICAgY29udHJpYnV0ZWQyW2FkZHJdID0gY29udHJpYnV0ZWQyW2FkZHJdLmFkZChhbW91bnQpOwogICAgICAgICAgICAgICAgcmV0dXJuIG51bVRva2Vucy5hZGQocmF0ZTIubXVsKGFtb3VudCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICBudW1Ub2tlbnMgPSBudW1Ub2tlbnMuYWRkKHJhdGUyLm11bChyMikpOwogICAgICAgICAgICAgICAgYW1vdW50ID0gYW1vdW50LnN1YihyMik7CiAgICAgICAgICAgICAgICBjb250cmlidXRlZDJbYWRkcl0gPSBjYXAyW2FkZHJdOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIENvbXB1dGUgdG9rZW5zIGZvciB0aWVyIDEKICAgICAgICBpZihyMSA+IDApewogICAgICAgICAgICBpZihhbW91bnQgPD0gcjEpewogICAgICAgICAgICAgICAgY29udHJpYnV0ZWQxW2FkZHJdID0gY29udHJpYnV0ZWQxW2FkZHJdLmFkZChhbW91bnQpOwogICAgICAgICAgICAgICAgcmV0dXJuIG51bVRva2Vucy5hZGQocmF0ZTEubXVsKGFtb3VudCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICBudW1Ub2tlbnMgPSBudW1Ub2tlbnMuYWRkKHJhdGUxLm11bChyMSkpOwogICAgICAgICAgICAgICAgYW1vdW50ID0gYW1vdW50LnN1YihyMSk7CiAgICAgICAgICAgICAgICBjb250cmlidXRlZDFbYWRkcl0gPSBjYXAxW2FkZHJdOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIENvbXB1dGUgdG9rZW5zIGZvciB0aWVyIDQgKG92ZXJmbG93KQogICAgICAgIGNvbnRyaWJ1dGVkNFthZGRyXSA9IGNvbnRyaWJ1dGVkNFthZGRyXS5hZGQoYW1vdW50KTsKICAgICAgICByZXR1cm4gbnVtVG9rZW5zLmFkZChyYXRlNC5tdWwoYW1vdW50KSk7CiAgICB9CiAgICAvKioKICAgICAqIEBkZXYgQ2hlY2sgaWYgYSBjb250cmlidXRvciB3YXMgYXQgYW55IHBvaW50IHJlZ2lzdGVyZWQuCiAgICAgKgogICAgICogQHBhcmFtIGNvbnRyaWJ1dG9yIEFkZHJlc3MgdGhhdCB3aWxsIGJlIGNoZWNrZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGhhc1ByZXZpb3VzbHlSZWdpc3RlcmVkKGFkZHJlc3MgY29udHJpYnV0b3IpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICBjb25zdGFudAogICAgICAgIG9ubHlPd25lciByZXR1cm5zIChib29sKQogICAgewogICAgICAgIC8vIGlmIGNhcHMgZm9yIHRoaXMgY3VzdG9tZXIgZXhpc3QsIHRoZW4gdGhlIGN1c3RvbWVyIGhhcyBwcmV2aW91c2x5IGJlZW4gcmVnaXN0ZXJlZAogICAgICAgIHJldHVybiAoY2FwMVtjb250cmlidXRvcl0uYWRkKGNhcDJbY29udHJpYnV0b3JdKS5hZGQoY2FwM1tjb250cmlidXRvcl0pLmFkZChjYXA0W2NvbnRyaWJ1dG9yXSkpID4gMDsKICAgIH0KICAgIC8qCiAgICAqIElmIHRoZSB1c2VyIHdhcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIGVuc3VyZSB0aGF0IHRoZSBuZXcgY2FwcyBkbyBub3QgY29uZmxpY3QgcHJldmlvdXMgY29udHJpYnV0aW9ucwogICAgKgogICAgKiBOT1RFOiBjYW5ub3QgdXNlIFNhZmVNYXRoIGhlcmUsIGJlY2F1c2UgaXQgZXhjZWVkcyB0aGUgbG9jYWwgdmFyaWFibGUgc3RhY2sgbGltaXQuCiAgICAqIFNob3VsZCBiZSBvayBzaW5jZSBpdCBpcyBvbmx5T3duZXIsIGFuZCBjb25kaXRpb25hbHMgc2hvdWxkIGd1YXJkIHRoZSBzdWJ0cmFjdGlvbnMgZnJvbSB1bmRlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gdmFsaWRhdGVVcGRhdGVkUmVnaXN0cmF0aW9uKGFkZHJlc3MgYWRkciwgdWludCBjMSwgdWludCBjMiwgdWludCBjMywgdWludCBjNCkKICAgICAgICBpbnRlcm5hbAogICAgICAgIGNvbnN0YW50CiAgICAgICAgb25seU93bmVyIHJldHVybnMoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gKGNvbnRyaWJ1dGVkM1thZGRyXSA8PSBjMykgJiYgKGNvbnRyaWJ1dGVkMlthZGRyXSA8PSBjMikKICAgICAgICAgICAgJiYgKGNvbnRyaWJ1dGVkMVthZGRyXSA8PSBjMSkgJiYgKGNvbnRyaWJ1dGVkNFthZGRyXSA8PSBjNCk7CiAgICB9CiAgICAvKioKICAgICAqIEBkZXYgU2V0cyByZWdpc3RyYXRpb24gc3RhdHVzIG9mIGFuIGFkZHJlc3MgZm9yIHBhcnRpY2lwYXRpb24uCiAgICAgKgogICAgICogQHBhcmFtIGNvbnRyaWJ1dG9yIEFkZHJlc3MgdGhhdCB3aWxsIGJlIHJlZ2lzdGVyZWQvZGVyZWdpc3RlcmVkLgogICAgICogQHBhcmFtIGMxIFRoZSBtYXhpbXVtIGFtb3VudCBvZiB3ZWkgdGhhdCB0aGUgdXNlciBjYW4gY29udHJpYnV0ZSBpbiB0aWVyIDEuCiAgICAgKiBAcGFyYW0gYzIgVGhlIG1heGltdW0gYW1vdW50IG9mIHdlaSB0aGF0IHRoZSB1c2VyIGNhbiBjb250cmlidXRlIGluIHRpZXIgMi4KICAgICAqIEBwYXJhbSBjMyBUaGUgbWF4aW11bSBhbW91bnQgb2Ygd2VpIHRoYXQgdGhlIHVzZXIgY2FuIGNvbnRyaWJ1dGUgaW4gdGllciAzLgogICAgICogQHBhcmFtIGM0IFRoZSBtYXhpbXVtIGFtb3VudCBvZiB3ZWkgdGhhdCB0aGUgdXNlciBjYW4gY29udHJpYnV0ZSBpbiB0aWVyIDQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlZ2lzdGVyVXNlcihhZGRyZXNzIGNvbnRyaWJ1dG9yLCB1aW50IGMxLCB1aW50IGMyLCB1aW50IGMzLCB1aW50IGM0KQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgewogICAgICAgIHJlcXVpcmUoY29udHJpYnV0b3IgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgLy8gaWYgdGhlIHVzZXIgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZCBlbnN1cmUgdGhhdCB0aGUgbmV3IGNhcHMgZG8gbm90IGNvbnRyYWRpY3QgdGhlaXIgY3VycmVudCBjb250cmlidXRpb25zCiAgICAgICAgaWYoaGFzUHJldmlvdXNseVJlZ2lzdGVyZWQoY29udHJpYnV0b3IpKXsKICAgICAgICAgICAgcmVxdWlyZSh2YWxpZGF0ZVVwZGF0ZWRSZWdpc3RyYXRpb24oY29udHJpYnV0b3IsIGMxLCBjMiwgYzMsIGM0KSk7CiAgICAgICAgfQogICAgICAgIHJlcXVpcmUoYzEuYWRkKGMyKS5hZGQoYzMpLmFkZChjNCkgPj0gbWluQ29udHJpYnV0aW9uKTsKICAgICAgICByZWdpc3RyeVtjb250cmlidXRvcl0gPSB0cnVlOwogICAgICAgIGNhcDFbY29udHJpYnV0b3JdID0gYzE7CiAgICAgICAgY2FwMltjb250cmlidXRvcl0gPSBjMjsKICAgICAgICBjYXAzW2NvbnRyaWJ1dG9yXSA9IGMzOwogICAgICAgIGNhcDRbY29udHJpYnV0b3JdID0gYzQ7CiAgICAgICAgUmVnaXN0cmF0aW9uU3RhdHVzQ2hhbmdlZChjb250cmlidXRvciwgdHJ1ZSwgYzEsIGMyLCBjMywgYzQpOwogICAgfQogICAgIC8qKgogICAgICogQGRldiBSZW1vdmUgcmVnaXN0cmF0aW9uIHN0YXR1cyBvZiBhbiBhZGRyZXNzIGZvciBwYXJ0aWNpcGF0aW9uLgogICAgICoKICAgICAqIE5PVEU6IGlmIHRoZSB1c2VyIG1hZGUgaW5pdGlhbCBjb250cmlidXRpb25zIHRvIHRoZSBjcm93ZHNhbGUsCiAgICAgKiAgICAgICB0aGlzIHdpbGwgbm90IHJldHVybiB0aGUgcHJldmlvdXNseSBhbGxvdHRlZCB0b2tlbnMuCiAgICAgKgogICAgICogQHBhcmFtIGNvbnRyaWJ1dG9yIEFkZHJlc3MgdG8gYmUgdW5yZWdpc3RlcmVkLgogICAgICovCiAgICBmdW5jdGlvbiBkZWFjdGl2YXRlKGFkZHJlc3MgY29udHJpYnV0b3IpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICB7CiAgICAgICAgcmVxdWlyZShyZWdpc3RyeVtjb250cmlidXRvcl0pOwogICAgICAgIHJlZ2lzdHJ5W2NvbnRyaWJ1dG9yXSA9IGZhbHNlOwogICAgICAgIFJlZ2lzdHJhdGlvblN0YXR1c0NoYW5nZWQoY29udHJpYnV0b3IsIGZhbHNlLCBjYXAxW2NvbnRyaWJ1dG9yXSwgY2FwMltjb250cmlidXRvcl0sIGNhcDNbY29udHJpYnV0b3JdLCBjYXA0W2NvbnRyaWJ1dG9yXSk7CiAgICB9CiAgICAvKioKICAgICAqIEBkZXYgUmUtcmVnaXN0ZXJzIGFuIGFscmVhZHkgZXhpc3RpbmcgY29udHJpYnV0b3IKICAgICAqCiAgICAgKiBAcGFyYW0gY29udHJpYnV0b3IgQWRkcmVzcyB0byBiZSB1bnJlZ2lzdGVyZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlYWN0aXZhdGUoYWRkcmVzcyBjb250cmlidXRvcikKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICByZXF1aXJlKGhhc1ByZXZpb3VzbHlSZWdpc3RlcmVkKGNvbnRyaWJ1dG9yKSk7CiAgICAgICAgcmVnaXN0cnlbY29udHJpYnV0b3JdID0gdHJ1ZTsKICAgICAgICBSZWdpc3RyYXRpb25TdGF0dXNDaGFuZ2VkKGNvbnRyaWJ1dG9yLCB0cnVlLCBjYXAxW2NvbnRyaWJ1dG9yXSwgY2FwMltjb250cmlidXRvcl0sIGNhcDNbY29udHJpYnV0b3JdLCBjYXA0W2NvbnRyaWJ1dG9yXSk7CiAgICB9CiAgICAvKioKICAgICAqIEBkZXYgU2V0cyByZWdpc3RyYXRpb24gc3RhdHVzZXMgb2YgYWRkcmVzc2VzIGZvciBwYXJ0aWNpcGF0aW9uLgogICAgICogQHBhcmFtIGNvbnRyaWJ1dG9ycyBBZGRyZXNzZXMgdGhhdCB3aWxsIGJlIHJlZ2lzdGVyZWQvZGVyZWdpc3RlcmVkLgogICAgICogQHBhcmFtIGNhcHMxIFRoZSBtYXhpbXVtIGFtb3VudCBvZiB3ZWkgdGhhdCBlYWNoIHVzZXIgY2FuIGNvbnRyaWJ1dGUgdG8gY2FwMSwgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlIGFkZHJlc3Nlcy4KICAgICAqIEBwYXJhbSBjYXBzMiBUaGUgbWF4aW11bSBhbW91bnQgb2Ygd2VpIHRoYXQgZWFjaCB1c2VyIGNhbiBjb250cmlidXRlIHRvIGNhcDIsIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZSBhZGRyZXNzZXMuCiAgICAgKiBAcGFyYW0gY2FwczMgVGhlIG1heGltdW0gYW1vdW50IG9mIHdlaSB0aGF0IGVhY2ggdXNlciBjYW4gY29udHJpYnV0ZSB0byBjYXAzLCBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGUgYWRkcmVzc2VzLgogICAgICogQHBhcmFtIGNhcHM0IFRoZSBtYXhpbXVtIGFtb3VudCBvZiB3ZWkgdGhhdCBlYWNoIHVzZXIgY2FuIGNvbnRyaWJ1dGUgdG8gY2FwNCwgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlIGFkZHJlc3Nlcy4KICAgICAqLwogICAgZnVuY3Rpb24gcmVnaXN0ZXJVc2VycyhhZGRyZXNzW10gY29udHJpYnV0b3JzLAogICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50W10gY2FwczEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnRbXSBjYXBzMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludFtdIGNhcHMzLAogICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50W10gY2FwczQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICAvLyBjaGVjayB0aGF0IGFsbCBhcnJheXMgaGF2ZSB0aGUgc2FtZSBsZW5ndGgKICAgICAgICByZXF1aXJlKGNvbnRyaWJ1dG9ycy5sZW5ndGggPT0gY2FwczEubGVuZ3RoKTsKICAgICAgICByZXF1aXJlKGNvbnRyaWJ1dG9ycy5sZW5ndGggPT0gY2FwczIubGVuZ3RoKTsKICAgICAgICByZXF1aXJlKGNvbnRyaWJ1dG9ycy5sZW5ndGggPT0gY2FwczMubGVuZ3RoKTsKICAgICAgICByZXF1aXJlKGNvbnRyaWJ1dG9ycy5sZW5ndGggPT0gY2FwczQubGVuZ3RoKTsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBjb250cmlidXRvcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcmVnaXN0ZXJVc2VyKGNvbnRyaWJ1dG9yc1tpXSwgY2FwczFbaV0sIGNhcHMyW2ldLCBjYXBzM1tpXSwgY2FwczRbaV0pOwogICAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVGhlIG93bmVyIGNhbiB0ZXJtaW5hdGUgdGhlIGNyb3dkc2FsZSBhdCBhbnkgdGltZS4KICAgICAqLwogICAgZnVuY3Rpb24gdGVybWluYXRlKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBzYWxlQ2xvc2VkID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogVGhlIG93bmVyIGNhbiBhbGxvY2F0ZSB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgZnJvbSB0aGUKICAgICAqIGNyb3dkc2FsZSBhbGxvd2FuY2UgdG8gdGhlIHJlY2lwaWVudCBhZGRyZXNzZXMuCiAgICAgKgogICAgICogTk9URTogYmUgZXh0cmVtZWx5IGNhcmVmdWwgdG8gZ2V0IHRoZSBhbW91bnRzIGNvcnJlY3QsIHdoaWNoCiAgICAgKiBhcmUgaW4gdW5pdHMgb2Ygd2VpIGFuZCBtaW5pLVFTUC4gRXZlcnkgZGlnaXQgY291bnRzLgogICAgICoKICAgICAqIEBwYXJhbSBhZGRycyAgICAgICAgICB0aGUgcmVjaXBpZW50IGFkZHJlc3NlcwogICAgICogQHBhcmFtIHdlaUFtb3VudHMgICAgIHRoZSBhbW91bnRzIGNvbnRyaWJ1dGVkIGluIHdlaQogICAgICogQHBhcmFtIG1pbmlRc3BBbW91bnRzIHRoZSBhbW91bnRzIG9mIHRva2VucyB0cmFuc2ZlcnJlZCBpbiBtaW5pLVFTUAogICAgICovCiAgICBmdW5jdGlvbiBvd25lckFsbG9jYXRlVG9rZW5zRm9yTGlzdChhZGRyZXNzW10gYWRkcnMsIHVpbnRbXSB3ZWlBbW91bnRzLCB1aW50W10gbWluaVFzcEFtb3VudHMpCiAgICAgICAgICAgIGV4dGVybmFsIG9ubHlPd25lcgogICAgewogICAgICAgIHJlcXVpcmUoYWRkcnMubGVuZ3RoID09IHdlaUFtb3VudHMubGVuZ3RoKTsKICAgICAgICByZXF1aXJlKGFkZHJzLmxlbmd0aCA9PSBtaW5pUXNwQW1vdW50cy5sZW5ndGgpOwogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgYWRkcnMubGVuZ3RoOyBpKyspewogICAgICAgICAgICBvd25lckFsbG9jYXRlVG9rZW5zKGFkZHJzW2ldLCB3ZWlBbW91bnRzW2ldLCBtaW5pUXNwQW1vdW50c1tpXSk7CiAgICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKgogICAgICogVGhlIG93bmVyIGNhbiBhbGxvY2F0ZSB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgZnJvbSB0aGUKICAgICAqIGNyb3dkc2FsZSBhbGxvd2FuY2UgdG8gdGhlIHJlY2lwaWVudCAoX3RvKS4KICAgICAqCiAgICAgKgogICAgICoKICAgICAqIE5PVEU6IGJlIGV4dHJlbWVseSBjYXJlZnVsIHRvIGdldCB0aGUgYW1vdW50cyBjb3JyZWN0LCB3aGljaAogICAgICogYXJlIGluIHVuaXRzIG9mIHdlaSBhbmQgbWluaS1RU1AuIEV2ZXJ5IGRpZ2l0IGNvdW50cy4KICAgICAqCiAgICAgKiBAcGFyYW0gX3RvICAgICAgICAgICAgdGhlIHJlY2lwaWVudCBvZiB0aGUgdG9rZW5zCiAgICAgKiBAcGFyYW0gYW1vdW50V2VpICAgICB0aGUgYW1vdW50IGNvbnRyaWJ1dGVkIGluIHdlaQogICAgICogQHBhcmFtIGFtb3VudE1pbmlRc3AgdGhlIGFtb3VudCBvZiB0b2tlbnMgdHJhbnNmZXJyZWQgaW4gbWluaS1RU1AKICAgICAqLwogICAgZnVuY3Rpb24gb3duZXJBbGxvY2F0ZVRva2VucyhhZGRyZXNzIF90bywgdWludCBhbW91bnRXZWksIHVpbnQgYW1vdW50TWluaVFzcCkKICAgICAgICAgICAgb25seU93bmVyIG5vblJlZW50cmFudAogICAgewogICAgICAgIC8vIGRvbid0IGFsbG9jYXRlIHRva2VucyBmb3IgdGhlIGFkbWluCiAgICAgICAgLy8gcmVxdWlyZSh0b2tlblJld2FyZC5hZG1pbkFkZHIoKSAhPSBfdG8pOwogICAgICAgIGFtb3VudFJhaXNlZCA9IGFtb3VudFJhaXNlZC5hZGQoYW1vdW50V2VpKTsKICAgICAgICByZXF1aXJlKGFtb3VudFJhaXNlZCA8PSBmdW5kaW5nQ2FwKTsKICAgICAgICB0b2tlbkJhbGFuY2VPZltfdG9dID0gdG9rZW5CYWxhbmNlT2ZbX3RvXS5hZGQoYW1vdW50TWluaVFzcCk7CiAgICAgICAgYmFsYW5jZU9mW190b10gPSBiYWxhbmNlT2ZbX3RvXS5hZGQoYW1vdW50V2VpKTsKICAgICAgICBGdW5kVHJhbnNmZXIoX3RvLCBhbW91bnRXZWksIHRydWUpOwogICAgICAgIHVwZGF0ZUZ1bmRpbmdDYXAoKTsKICAgIH0KICAgIC8qKgogICAgICogVGhlIG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24gdG8gd2l0aGRyYXcgdGhlIGZ1bmRzIHRoYXQKICAgICAqIGhhdmUgYmVlbiBzZW50IHRvIHRoaXMgY29udHJhY3QgZm9yIHRoZSBjcm93ZHNhbGUgc3ViamVjdCB0bwogICAgICogdGhlIGZ1bmRpbmcgZ29hbCBoYXZpbmcgYmVlbiByZWFjaGVkLiBUaGUgZnVuZHMgd2lsbCBiZSBzZW50CiAgICAgKiB0byB0aGUgYmVuZWZpY2lhcnkgc3BlY2lmaWVkIHdoZW4gdGhlIGNyb3dkc2FsZSB3YXMgY3JlYXRlZC4KICAgICAqLwogICAgZnVuY3Rpb24gb3duZXJTYWZlV2l0aGRyYXdhbCgpIGV4dGVybmFsIG9ubHlPd25lciBub25SZWVudHJhbnQgewogICAgICAgIHVpbnQgYmFsYW5jZVRvU2VuZCA9IHRoaXMuYmFsYW5jZTsKICAgICAgICBiZW5lZmljaWFyeS50cmFuc2ZlcihiYWxhbmNlVG9TZW5kKTsKICAgICAgICBGdW5kVHJhbnNmZXIoYmVuZWZpY2lhcnksIGJhbGFuY2VUb1NlbmQsIGZhbHNlKTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIGlmIHRoZSBmdW5kaW5nIGNhcCBoYXMgYmVlbiByZWFjaGVkLiBJZiBpdCBoYXMsIHRoZW4KICAgICAqIHRoZSBDYXBSZWFjaGVkIGV2ZW50IGlzIHRyaWdnZXJlZC4KICAgICAqLwogICAgZnVuY3Rpb24gdXBkYXRlRnVuZGluZ0NhcCgpIGludGVybmFsIHsKICAgICAgICBhc3NlcnQgKGFtb3VudFJhaXNlZCA8PSBmdW5kaW5nQ2FwKTsKICAgICAgICBpZiAoYW1vdW50UmFpc2VkID09IGZ1bmRpbmdDYXApIHsKICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZ1bmRpbmcgY2FwIGhhcyBiZWVuIHJlYWNoZWQKICAgICAgICAgICAgZnVuZGluZ0NhcFJlYWNoZWQgPSB0cnVlOwogICAgICAgICAgICBzYWxlQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgICAgQ2FwUmVhY2hlZChiZW5lZmljaWFyeSwgYW1vdW50UmFpc2VkKTsKICAgICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZS4KICAgICAqIFVzZWZ1bCB0byBhYnN0cmFjdCBjYWxscyB0byAibm93IiBmb3IgdGVzdHMuCiAgICAqLwogICAgZnVuY3Rpb24gY3VycmVudFRpbWUoKSBjb25zdGFudCByZXR1cm5zICh1aW50IF9jdXJyZW50VGltZSkgewogICAgICAgIHJldHVybiBub3c7CiAgICB9Cn0='.
	

]
