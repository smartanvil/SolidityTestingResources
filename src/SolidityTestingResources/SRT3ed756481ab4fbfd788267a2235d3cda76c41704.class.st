Class {
	#name : #SRT3ed756481ab4fbfd788267a2235d3cda76c41704,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3ed756481ab4fbfd788267a2235d3cda76c41704 >> base64 [
	^ 'LyoKICogRVJDMjAgaW50ZXJmYWNlCiAqIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIHsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCgoKLyoqCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MKICovCmNvbnRyYWN0IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiID4gMCk7CiAgICB1aW50IGMgPSBhIC8gYjsKICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSB7CiAgICAgIHRocm93OwogICAgfQogIH0KfQoKCgovKioKICogU3RhbmRhcmQgRVJDMjAgdG9rZW4gd2l0aCBTaG9ydCBIYW5kIEF0dGFjayBhbmQgYXBwcm92ZSgpIHJhY2UgY29uZGl0aW9uIG1pdGlnYXRpb24uCiAqCiAqIEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDoKICogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBTYWZlTWF0aCB7CgogIC8qIFRva2VuIHN1cHBseSBnb3QgaW5jcmVhc2VkIGFuZCBhIG5ldyBvd25lciByZWNlaXZlZCB0aGVzZSB0b2tlbnMgKi8KICBldmVudCBNaW50ZWQoYWRkcmVzcyByZWNlaXZlciwgdWludCBhbW91bnQpOwoKICAvKiBBY3R1YWwgYmFsYW5jZXMgb2YgdG9rZW4gaG9sZGVycyAqLwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKCiAgLyogYXBwcm92ZSgpIGFsbG93YW5jZXMgKi8KICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgogIC8qIEludGVyZmFjZSBkZWNsYXJhdGlvbiAqLwogIGZ1bmN0aW9uIGlzVG9rZW4oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCB3ZUFyZSkgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICB1aW50IF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlc1tfZnJvbV0sIF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoX2FsbG93YW5jZSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKCgovKgogKiBPd25hYmxlCiAqCiAqIEJhc2UgY29udHJhY3Qgd2l0aCBhbiBvd25lci4KICogUHJvdmlkZXMgb25seU93bmVyIG1vZGlmaWVyLCB3aGljaCBwcmV2ZW50cyBmdW5jdGlvbiBmcm9tIHJ1bm5pbmcgaWYgaXQgaXMgY2FsbGVkIGJ5IGFueW9uZSBvdGhlciB0aGFuIHRoZSBvd25lci4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgfQoKfQoKCi8qKgogKiBIb2xkIHRva2VucyBmb3IgYSBncm91cCBpbnZlc3RvciBvZiBpbnZlc3RvcnMgdW50aWwgdGhlIHVubG9jayBkYXRlLgogKgogKiBBZnRlciB0aGUgdW5sb2NrIGRhdGUgdGhlIGludmVzdG9yIGNhbiBjbGFpbSB0aGVpciB0b2tlbnMuCiAqCiAqIFN0ZXBzCiAqCiAqIC0gUHJlcGFyZSBhIHNwcmVhZHNoZWV0IGZvciB0b2tlbiBhbGxvY2F0aW9uCiAqIC0gRGVwbG95IHRoaXMgY29udHJhY3QsIHdpdGggdGhlIHN1bSB0byB0b2tlbnMgdG8gYmUgZGlzdHJpYnV0ZWQsIGZyb20gdGhlIG93bmVyIGFjY291bnQKICogLSBDYWxsIHNldEludmVzdG9yIGZvciBhbGwgaW52ZXN0b3JzIGZyb20gdGhlIG93bmVyIGFjY291bnQgdXNpbmcgYSBsb2NhbCBzY3JpcHQgYW5kIENTViBpbnB1dAogKiAtIE1vdmUgdG9rZW5zVG9CZUFsbG9jYXRlZCBpbiB0aGlzIGNvbnRyYWN0IHVzaW5nIFN0YW5kYXJkVG9rZW4udHJhbnNmZXIoKQogKiAtIENhbGwgbG9jayBmcm9tIHRoZSBvd25lciBhY2NvdW50CiAqIC0gV2FpdCB1bnRpbCB0aGUgZnJlZXplIHBlcmlvZCBpcyBvdmVyCiAqIC0gQWZ0ZXIgdGhlIGZyZWV6ZSB0aW1lIGlzIG92ZXIgaW52ZXN0b3JzIGNhbiBjYWxsIGNsYWltKCkgZnJvbSB0aGVpciBhZGRyZXNzIHRvIGdldCB0aGVpciB0b2tlbnMKICoKICovCmNvbnRyYWN0IFRva2VuVmF1bHQgaXMgT3duYWJsZSB7CgogIC8qKiBIb3cgbWFueSBpbnZlc3RvcnMgd2UgaGF2ZSBub3cgKi8KICB1aW50IHB1YmxpYyBpbnZlc3RvckNvdW50OwoKICAvKiogU3VtIGZyb20gdGhlIHNwcmVhZHNoZWV0IGhvdyBtdWNoIHRva2VucyB3ZSBzaG91bGQgZ2V0IG9uIHRoZSBjb250cmFjdC4gSWYgdGhlIHN1bSBkb2VzIG5vdCBtYXRjaCBhdCB0aGUgdGltZSBvZiB0aGUgbG9jayB0aGUgdmF1bHQgaXMgZmF1bHR5IGFuZCBtdXN0IGJlIHJlY3JlYXRlZC4qLwogIHVpbnQgcHVibGljIHRva2Vuc1RvQmVBbGxvY2F0ZWQ7CgogIC8qKiBIb3cgbWFueSB0b2tlbnMgaW52ZXN0b3JzIGhhdmUgY2xhaW1lZCBzbyBmYXIgKi8KICB1aW50IHB1YmxpYyB0b3RhbENsYWltZWQ7CgogIC8qKiBIb3cgbWFueSB0b2tlbnMgb3VyIGludGVybmFsIGJvb2sga2VlcGluZyB0ZWxscyB1cyB0byBoYXZlIGF0IHRoZSB0aW1lIG9mIGxvY2soKSB3aGVuIGFsbCBpbnZlc3RvciBkYXRhIGhhcyBiZWVuIGxvYWRlZCAqLwogIHVpbnQgcHVibGljIHRva2Vuc0FsbG9jYXRlZFRvdGFsOwoKICAvKiogSG93IG11Y2ggd2UgaGF2ZSBhbGxvY2F0ZWQgdG8gdGhlIGludmVzdG9ycyBpbnZlc3RlZCAqLwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYmFsYW5jZXM7CgogIC8qKiBIb3cgbWFueSB0b2tlbnMgaW52ZXN0b3JzIGhhdmUgY2xhaW1lZCAqLwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgY2xhaW1lZDsKCiAgLyoqIFdoZW4gb3VyIGNsYWltIGZyZWV6ZSBpcyBvdmVyIChVTklYIHRpbWVzdGFtcCkgKi8KICB1aW50IHB1YmxpYyBmcmVlemVFbmRzQXQ7CgogIC8qKiBXaGVuIHRoaXMgdmF1bHQgd2FzIGxvY2tlZCAoVU5JWCB0aW1lc3RhbXApICovCiAgdWludCBwdWJsaWMgbG9ja2VkQXQ7CgogIC8qKiBXZSBjYW4gYWxzbyBkZWZpbmUgb3VyIG93biB0b2tlbiwgd2hpY2ggd2lsbCBvdmVycmlkZSB0aGUgSUNPIG9uZSAqKiovCiAgU3RhbmRhcmRUb2tlbiBwdWJsaWMgdG9rZW47CgogIC8qKiBXaGF0IGlzIG91ciBjdXJyZW50IHN0YXRlLgogICAqCiAgICogTG9hZGluZzogSW52ZXN0b3IgZGF0YSBpcyBiZWluZyBsb2FkZWQgYW5kIGNvbnRyYWN0IG5vdCB5ZXQgbG9ja2VkCiAgICogSG9sZGluZzogSG9sZGluZyB0b2tlbnMgZm9yIGludmVzdG9ycwogICAqIERpc3RyaWJ1dGluZzogRnJlZXplIHRpbWUgaXMgb3ZlciwgaW52ZXN0b3JzIGNhbiBjbGFpbSB0aGVpciB0b2tlbnMKICAgKi8KICBlbnVtIFN0YXRle1Vua25vd24sIExvYWRpbmcsIEhvbGRpbmcsIERpc3RyaWJ1dGluZ30KCiAgLyoqIFdlIGFsbG9jYXRlZCB0b2tlbnMgZm9yIGludmVzdG9yICovCiAgZXZlbnQgQWxsb2NhdGVkKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQgdmFsdWUpOwoKICAvKiogV2UgZGlzdHJpYnV0ZWQgdG9rZW5zIHRvIGFuIGludmVzdG9yICovCiAgZXZlbnQgRGlzdHJpYnV0ZWQoYWRkcmVzcyBpbnZlc3RvcnMsIHVpbnQgY291bnQpOwoKICBldmVudCBMb2NrZWQoKTsKCiAgLyoqCiAgICogQ3JlYXRlIHByZXNhbGUgY29udHJhY3Qgd2hlcmUgbG9jayB1cCBwZXJpb2QgaXMgZ2l2ZW4gZGF5cwogICAqCiAgICogQHBhcmFtIF9vd25lciBXaG8gY2FuIGxvYWQgaW52ZXN0b3IgZGF0YSBhbmQgbG9jawogICAqIEBwYXJhbSBfZnJlZXplRW5kc0F0IFVOSVggdGltZXN0YW1wIHdoZW4gdGhlIHZhdWx0IHVubG9ja3MKICAgKiBAcGFyYW0gX3Rva2VuIFRva2VuIGNvbnRyYWN0IGFkZHJlc3Mgd2UgYXJlIGRpc3RyaWJ1dGluZwogICAqIEBwYXJhbSBfdG9rZW5zVG9CZUFsbG9jYXRlZCBUb3RhbCBudW1iZXIgb2YgdG9rZW5zIHRoaXMgdmF1bHQgd2lsbCBob2xkIC0gaW5jbHVkaW5nIGRlY2ltYWwgbXVsdGlwbGNhdGlvbgogICAqCiAgICovCiAgZnVuY3Rpb24gVG9rZW5WYXVsdChhZGRyZXNzIF9vd25lciwgdWludCBfZnJlZXplRW5kc0F0LCBTdGFuZGFyZFRva2VuIF90b2tlbiwgdWludCBfdG9rZW5zVG9CZUFsbG9jYXRlZCkgewoKICAgIG93bmVyID0gX293bmVyOwoKICAgIC8vIEludmFsaWQgb3dlbnIKICAgIGlmKG93bmVyID09IDApIHsKICAgICAgdGhyb3c7CiAgICB9CgogICAgdG9rZW4gPSBfdG9rZW47CgogICAgLy8gQ2hlY2sgdGhlIGFkZHJlc3MgbG9va3MgbGlrZSBhIHRva2VuIGNvbnRyYWN0CiAgICBpZighdG9rZW4uaXNUb2tlbigpKSB7CiAgICAgIHRocm93OwogICAgfQoKICAgIC8vIEdpdmUgYXJndW1lbnQKICAgIGlmKF9mcmVlemVFbmRzQXQgPT0gMCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICAvLyBTYW5pdHkgY2hlY2sgb24gX3Rva2Vuc1RvQmVBbGxvY2F0ZWQKICAgIGlmKF90b2tlbnNUb0JlQWxsb2NhdGVkID09IDApIHsKICAgICAgdGhyb3c7CiAgICB9CgogICAgZnJlZXplRW5kc0F0ID0gX2ZyZWV6ZUVuZHNBdDsKICAgIHRva2Vuc1RvQmVBbGxvY2F0ZWQgPSBfdG9rZW5zVG9CZUFsbG9jYXRlZDsKICB9CgogIC8vLyBAZGV2IEFkZCBhIHByZXNhbGUgcGFydGljaXBhdGluZyBhbGxvY2F0aW9uCiAgZnVuY3Rpb24gc2V0SW52ZXN0b3IoYWRkcmVzcyBpbnZlc3RvciwgdWludCBhbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgewoKICAgIGlmKGxvY2tlZEF0ID4gMCkgewogICAgICAvLyBDYW5ub3QgYWRkIG5ldyBpbnZlc3RvcnMgYWZ0ZXIgdGhlIHZhdWx0IGlzIGxvY2tlZAogICAgICB0aHJvdzsKICAgIH0KCiAgICBpZihhbW91bnQgPT0gMCkgdGhyb3c7IC8vIE5vIGVtcHR5IGJ1eXMKCiAgICAvLyBEb24ndCBhbGxvdyByZXNldAogICAgaWYoYmFsYW5jZXNbaW52ZXN0b3JdID4gMCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICBiYWxhbmNlc1tpbnZlc3Rvcl0gPSBhbW91bnQ7CgogICAgaW52ZXN0b3JDb3VudCsrOwoKICAgIHRva2Vuc0FsbG9jYXRlZFRvdGFsICs9IGFtb3VudDsKCiAgICBBbGxvY2F0ZWQoaW52ZXN0b3IsIGFtb3VudCk7CiAgfQoKICAvLy8gQGRldiBMb2NrIHRoZSB2YXVsdAogIC8vLyAgICAgIC0gQWxsIGJhbGFuY2VzIGhhdmUgYmVlbiBsb2FkZWQgaW4gY29ycmVjdGx5CiAgLy8vICAgICAgLSBUb2tlbnMgYXJlIHRyYW5zZmVycmVkIG9uIHRoaXMgdmF1bHQgY29ycmVjdGx5CiAgLy8vICAgICAgLSBDaGVja3MgYXJlIGluIHBsYWNlIHRvIHByZXZlbnQgY3JlYXRpbmcgYSB2YXVsdCB0aGF0IGlzIGxvY2tlZCB3aXRoIGluY29ycmVjdCB0b2tlbiBiYWxhbmNlcy4KICBmdW5jdGlvbiBsb2NrKCkgb25seU93bmVyIHsKCiAgICBpZihsb2NrZWRBdCA+IDApIHsKICAgICAgdGhyb3c7IC8vIEFscmVhZHkgbG9ja2VkCiAgICB9CgogICAgLy8gU3ByZWFkc2hlZXQgc3VtIGRvZXMgbm90IG1hdGNoIHRvIHdoYXQgd2UgaGF2ZSBsb2FkZWQgdG8gdGhlIGludmVzdG9yIGRhdGEKICAgIGlmKHRva2Vuc0FsbG9jYXRlZFRvdGFsICE9IHRva2Vuc1RvQmVBbGxvY2F0ZWQpIHsKICAgICAgdGhyb3c7CiAgICB9CgogICAgLy8gRG8gbm90IGxvY2sgdGhlIHZhdWx0IGlmIHRoZSBnaXZlbiB0b2tlbnMgYXJlIG5vdCBvbiB0aGlzIGNvbnRyYWN0CiAgICBpZih0b2tlbi5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSkgIT0gdG9rZW5zQWxsb2NhdGVkVG90YWwpIHsKICAgICAgdGhyb3c7CiAgICB9CgogICAgbG9ja2VkQXQgPSBub3c7CgogICAgTG9ja2VkKCk7CiAgfQoKICAvLy8gQGRldiBJbiB0aGUgY2FzZSBsb2NraW5nIGZhaWxlZCwgdGhlbiBhbGxvdyB0aGUgb3duZXIgdG8gcmVjbGFpbSB0aGUgdG9rZW5zIG9uIHRoZSBjb250cmFjdC4KICBmdW5jdGlvbiByZWNvdmVyRmFpbGVkTG9jaygpIG9ubHlPd25lciB7CiAgICBpZihsb2NrZWRBdCA+IDApIHsKICAgICAgdGhyb3c7CiAgICB9CgogICAgLy8gVHJhbnNmZXIgYWxsIHRva2VucyBvbiB0aGlzIGNvbnRyYWN0IGJhY2sgdG8gdGhlIG93bmVyCiAgICB0b2tlbi50cmFuc2Zlcihvd25lciwgdG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpKTsKICB9CgogIC8vLyBAZGV2IEdldCB0aGUgY3VycmVudCBiYWxhbmNlIG9mIHRva2VucyBpbiB0aGUgdmF1bHQKICAvLy8gQHJldHVybiB1aW50IEhvdyBtYW55IHRva2VucyB0aGVyZSBhcmUgY3VycmVudGx5IGluIHZhdWx0CiAgZnVuY3Rpb24gZ2V0QmFsYW5jZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IGhvd01hbnlUb2tlbnNDdXJyZW50bHlJblZhdWx0KSB7CiAgICByZXR1cm4gdG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOwogIH0KCiAgLy8vIEBkZXYgQ2xhaW0gTiBib3VnaHQgdG9rZW5zIHRvIHRoZSBpbnZlc3RvciBhcyB0aGUgbXNnIHNlbmRlcgogIGZ1bmN0aW9uIGNsYWltKCkgewoKICAgIGFkZHJlc3MgaW52ZXN0b3IgPSBtc2cuc2VuZGVyOwoKICAgIGlmKGxvY2tlZEF0ID09IDApIHsKICAgICAgdGhyb3c7IC8vIFdlIHdlcmUgbmV2ZXIgbG9ja2VkCiAgICB9CgogICAgaWYobm93IDwgZnJlZXplRW5kc0F0KSB7CiAgICAgIHRocm93OyAvLyBUcnlpbmcgdG8gY2xhaW0gZWFybHkKICAgIH0KCiAgICBpZihiYWxhbmNlc1tpbnZlc3Rvcl0gPT0gMCkgewogICAgICAvLyBOb3Qgb3VyIGludmVzdG9yCiAgICAgIHRocm93OwogICAgfQoKICAgIGlmKGNsYWltZWRbaW52ZXN0b3JdID4gMCkgewogICAgICB0aHJvdzsgLy8gQWxyZWFkeSBjbGFpbWVkCiAgICB9CgogICAgdWludCBhbW91bnQgPSBiYWxhbmNlc1tpbnZlc3Rvcl07CgogICAgY2xhaW1lZFtpbnZlc3Rvcl0gPSBhbW91bnQ7CgogICAgdG90YWxDbGFpbWVkICs9IGFtb3VudDsKCiAgICB0b2tlbi50cmFuc2ZlcihpbnZlc3RvciwgYW1vdW50KTsKCiAgICBEaXN0cmlidXRlZChpbnZlc3RvciwgYW1vdW50KTsKICB9CgogIC8vLyBAZGV2IFJlc29sdmUgdGhlIGNvbnRyYWN0IHVtYW1iaWdpb3VzIHN0YXRlCiAgZnVuY3Rpb24gZ2V0U3RhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhTdGF0ZSkgewogICAgaWYobG9ja2VkQXQgPT0gMCkgewogICAgICByZXR1cm4gU3RhdGUuTG9hZGluZzsKICAgIH0gZWxzZSBpZihub3cgPiBmcmVlemVFbmRzQXQpIHsKICAgICAgcmV0dXJuIFN0YXRlLkRpc3RyaWJ1dGluZzsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBTdGF0ZS5Ib2xkaW5nOwogICAgfQogIH0KCn0='.
	

]
