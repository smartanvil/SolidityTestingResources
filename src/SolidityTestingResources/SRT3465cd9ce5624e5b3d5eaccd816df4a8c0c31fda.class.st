Class {
	#name : #SRT3465cd9ce5624e5b3d5eaccd816df4a8c0c31fda,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3465cd9ce5624e5b3d5eaccd816df4a8c0c31fda >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9Cn0KCmNvbnRyYWN0IFNraW5CYXNlIGlzIFBhdXNhYmxlIHsKCiAgICBzdHJ1Y3QgU2tpbiB7CiAgICAgICAgdWludDEyOCBhcHBlYXJhbmNlOwogICAgICAgIHVpbnQ2NCBjb29sZG93bkVuZFRpbWU7CiAgICAgICAgdWludDY0IG1peGluZ1dpdGhJZDsKICAgIH0KCiAgICAvLyBBbGwgc2tpbnMsIG1hcHBpbmcgZnJvbSBza2luIGlkIHRvIHNraW4gYXBwcmFuY2UKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gU2tpbikgc2tpbnM7CgogICAgLy8gTWFwcGluZyBmcm9tIHNraW4gaWQgdG8gb3duZXIKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIHNraW5JZFRvT3duZXI7CgogICAgLy8gV2hldGhlciBhIHNraW4gaXMgb24gc2FsZQogICAgbWFwcGluZyAodWludDI1NiA9PiBib29sKSBwdWJsaWMgaXNPblNhbGU7CgogICAgLy8gTnVtYmVyIG9mIGFsbCB0b3RhbCB2YWxpZCBza2lucwogICAgLy8gc2tpbklkIDAgc2hvdWxkIG5vdCBjb3JyZXNwb25kIHRvIGFueSBza2luLCBiZWNhdXNlIHNraW4ubWl4aW5nV2l0aElkPT0wIGluZGljYXRlcyBub3QgbWl4aW5nCiAgICB1aW50MjU2IHB1YmxpYyBuZXh0U2tpbklkID0gMTsgIAoKICAgIC8vIE51bWJlciBvZiBza2lucyBhbiBhY2NvdW50IG93bnMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIG51bVNraW5PZkFjY291bnRzOwoKICAgIC8vIC8vIEdpdmUgc29tZSBza2lucyB0byBpbml0IGFjY291bnQgZm9yIHVuaXQgdGVzdHMKICAgIC8vIGZ1bmN0aW9uIFNraW5CYXNlKCkgcHVibGljIHsKICAgIC8vICAgICBhZGRyZXNzIGFjY291bnQwID0gMHg2MjczMDYwOTBhYmFCM0E2ZTE0MDBlOTM0NWJDNjBjNzhhOEJFZjU3OwogICAgLy8gICAgIGFkZHJlc3MgYWNjb3VudDEgPSAweGYxN2Y1MjE1MUViRUY2QzczMzRGQUQwODBjNTcwNEQ3NzIxNmI3MzI7CgogICAgLy8gICAgIC8vIENyZWF0ZSBzaW1wbGUgc2tpbnMKICAgIC8vICAgICBTa2luIG1lbW9yeSBza2luID0gU2tpbih7YXBwZWFyYW5jZTogMCwgY29vbGRvd25FbmRUaW1lOjAsIG1peGluZ1dpdGhJZDogMH0pOwogICAgLy8gICAgIGZvciAodWludDI1NiBpID0gMTsgaSA8PSAxNTsgaSsrKSB7CiAgICAvLyAgICAgICAgIGlmIChpIDwgMTApIHsKICAgIC8vICAgICAgICAgICAgIHNraW4uYXBwZWFyYW5jZSA9IHVpbnQxMjgoaSk7CiAgICAvLyAgICAgICAgICAgICBpZiAoaSA8IDcpIHsgCiAgICAvLyAgICAgICAgICAgICAgICAgc2tpbklkVG9Pd25lcltpXSA9IGFjY291bnQwOwogICAgLy8gICAgICAgICAgICAgICAgIG51bVNraW5PZkFjY291bnRzW2FjY291bnQwXSArPSAxOwogICAgLy8gICAgICAgICAgICAgfSBlbHNlIHsgIAogICAgLy8gICAgICAgICAgICAgICAgIHNraW5JZFRvT3duZXJbaV0gPSBhY2NvdW50MTsKICAgIC8vICAgICAgICAgICAgICAgICBudW1Ta2luT2ZBY2NvdW50c1thY2NvdW50MV0gKz0gMTsKICAgIC8vICAgICAgICAgICAgIH0KICAgIC8vICAgICAgICAgfSBlbHNlIHsgIAogICAgLy8gICAgICAgICAgICAgc2tpbi5hcHBlYXJhbmNlID0gdWludDEyOChibG9jay5ibG9ja2hhc2goYmxvY2subnVtYmVyIC0gaSArIDkpKTsKICAgIC8vICAgICAgICAgICAgIHNraW5JZFRvT3duZXJbaV0gPSBhY2NvdW50MTsKICAgIC8vICAgICAgICAgICAgIG51bVNraW5PZkFjY291bnRzW2FjY291bnQxXSArPSAxOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICAgIHNraW5zW2ldID0gc2tpbjsKICAgIC8vICAgICAgICAgaXNPblNhbGVbaV0gPSBmYWxzZTsKICAgIC8vICAgICAgICAgbmV4dFNraW5JZCArPSAxOwogICAgLy8gICAgIH0KICAgIC8vIH0gCgogICAgLy8gR2V0IHRoZSBpLXRoIHNraW4gYW4gYWNjb3VudCBvd25zLCBmb3Igb2ZmLWNoYWluIHVzYWdlIG9ubHkKICAgIGZ1bmN0aW9uIHNraW5PZkFjY291bnRCeUlkKGFkZHJlc3MgYWNjb3VudCwgdWludDI1NiBpZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICB1aW50MjU2IGNvdW50ID0gMDsKICAgICAgIHVpbnQyNTYgbnVtU2tpbk9mQWNjb3VudCA9IG51bVNraW5PZkFjY291bnRzW2FjY291bnRdOwogICAgICAgcmVxdWlyZShudW1Ta2luT2ZBY2NvdW50ID4gMCk7CiAgICAgICByZXF1aXJlKGlkIDwgbnVtU2tpbk9mQWNjb3VudCk7CiAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDE7IGkgPCBuZXh0U2tpbklkOyBpKyspIHsKICAgICAgICAgICBpZiAoc2tpbklkVG9Pd25lcltpXSA9PSBhY2NvdW50KSB7CiAgICAgICAgICAgICAgIC8vIFRoaXMgc2tpbiBiZWxvbmdzIHRvIGN1cnJlbnQgYWNjb3VudAogICAgICAgICAgICAgICBpZiAoY291bnQgPT0gaWQpIHsKICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGlkLXRoIHNraW4gb2YgY3VycmVudCBhY2NvdW50LCBhLmsuYSwgd2hhdCB3ZSBuZWVkCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7CiAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXZlcnQoKTsKICAgIH0KCiAgICAvLyBHZXQgc2tpbiBieSBpZAogICAgZnVuY3Rpb24gZ2V0U2tpbih1aW50MjU2IGlkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MTI4LCB1aW50NjQsIHVpbnQ2NCkgewogICAgICAgIHJlcXVpcmUoaWQgPiAwKTsKICAgICAgICByZXF1aXJlKGlkIDwgbmV4dFNraW5JZCk7CiAgICAgICAgU2tpbiBzdG9yYWdlIHNraW4gPSBza2luc1tpZF07CiAgICAgICAgcmV0dXJuIChza2luLmFwcGVhcmFuY2UsIHNraW4uY29vbGRvd25FbmRUaW1lLCBza2luLm1peGluZ1dpdGhJZCk7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdFVEgoKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9Cn0KY29udHJhY3QgTWl4Rm9ybXVsYUludGVyZmFjZSB7CiAgICBmdW5jdGlvbiBjYWxjTmV3U2tpbkFwcGVhcmFuY2UodWludDEyOCB4LCB1aW50MTI4IHkpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQxMjgpOwoKICAgIC8vIGNyZWF0ZSByYW5kb20gYXBwZWFyYW5jZQogICAgZnVuY3Rpb24gcmFuZG9tU2tpbkFwcGVhcmFuY2UoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MTI4KTsKCiAgICAvLyBibGVhY2gKICAgIGZ1bmN0aW9uIGJsZWFjaEFwcGVhcmFuY2UodWludDEyOCBhcHBlYXJhbmNlLCB1aW50MTI4IGF0dHJpYnV0ZXMpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQxMjgpOwp9CmNvbnRyYWN0IFNraW5NaXggaXMgU2tpbkJhc2UgewoKICAgIC8vIE1peCBmb3JtdWxhCiAgICBNaXhGb3JtdWxhSW50ZXJmYWNlIHB1YmxpYyBtaXhGb3JtdWxhOwoKCiAgICAvLyBQcmUtcGFpZCBldGhlciBmb3Igc3ludGhlc2l6YXRpb24sIHdpbGwgYmUgcmV0dXJuZWQgdG8gdXNlciBpZiB0aGUgc3ludGhlc2l6YXRpb24gZmFpbGVkIChtaW51cyBnYXMpLgogICAgdWludDI1NiBwdWJsaWMgcHJlUGFpZEZlZSA9IDEwMDAwMDAgKiAzMDAwMDAwMDAwOyAvLyAoMW1pbGxpb24gZ2FzICogMyBnd2VpKQoKICAgIC8vIEV2ZW50cwogICAgZXZlbnQgTWl4U3RhcnQoYWRkcmVzcyBhY2NvdW50LCB1aW50MjU2IHNraW5BSWQsIHVpbnQyNTYgc2tpbkJJZCk7CiAgICBldmVudCBBdXRvTWl4KGFkZHJlc3MgYWNjb3VudCwgdWludDI1NiBza2luQUlkLCB1aW50MjU2IHNraW5CSWQsIHVpbnQ2NCBjb29sZG93bkVuZFRpbWUpOwogICAgZXZlbnQgTWl4U3VjY2VzcyhhZGRyZXNzIGFjY291bnQsIHVpbnQyNTYgc2tpbklkLCB1aW50MjU2IHNraW5BSWQsIHVpbnQyNTYgc2tpbkJJZCk7CgogICAgLy8gU2V0IG1peCBmb3JtdWxhIGNvbnRyYWN0IGFkZHJlc3MgCiAgICBmdW5jdGlvbiBzZXRNaXhGb3JtdWxhQWRkcmVzcyhhZGRyZXNzIG1peEZvcm11bGFBZGRyZXNzKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIG1peEZvcm11bGEgPSBNaXhGb3JtdWxhSW50ZXJmYWNlKG1peEZvcm11bGFBZGRyZXNzKTsKICAgIH0KCiAgICAvLyBzZXRQcmVQYWlkRmVlOiBzZXQgYWR2YW5jZSBhbW91bnQsIG9ubHkgb3duZXIgY2FuIGNhbGwgdGhpcwogICAgZnVuY3Rpb24gc2V0UHJlUGFpZEZlZSh1aW50MjU2IG5ld1ByZVBhaWRGZWUpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcHJlUGFpZEZlZSA9IG5ld1ByZVBhaWRGZWU7CiAgICB9CgogICAgLy8gX2lzQ29vbGRvd25SZWFkeTogY2hlY2sgd2hldGhlciBjb29sZG93biBwZXJpb2QgaGFzIGJlZW4gcGFzc2VkCiAgICBmdW5jdGlvbiBfaXNDb29sZG93blJlYWR5KHVpbnQyNTYgc2tpbkFJZCwgdWludDI1NiBza2luQklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAoc2tpbnNbc2tpbkFJZF0uY29vbGRvd25FbmRUaW1lIDw9IHVpbnQ2NChub3cpKSAmJiAoc2tpbnNbc2tpbkJJZF0uY29vbGRvd25FbmRUaW1lIDw9IHVpbnQ2NChub3cpKTsKICAgIH0KCiAgICAvLyBfaXNOb3RNaXhpbmc6IGNoZWNrIHdoZXRoZXIgdHdvIHNraW5zIGFyZSBpbiBhbm90aGVyIG1peGluZyBwcm9jZXNzCiAgICBmdW5jdGlvbiBfaXNOb3RNaXhpbmcodWludDI1NiBza2luQUlkLCB1aW50MjU2IHNraW5CSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIChza2luc1tza2luQUlkXS5taXhpbmdXaXRoSWQgPT0gMCkgJiYgKHNraW5zW3NraW5CSWRdLm1peGluZ1dpdGhJZCA9PSAwKTsKICAgIH0KCiAgICAvLyBfc2V0Q29vbGRvd25UaW1lOiBzZXQgbmV3IGNvb2xkb3duIHRpbWUKICAgIGZ1bmN0aW9uIF9zZXRDb29sZG93bkVuZFRpbWUodWludDI1NiBza2luQUlkLCB1aW50MjU2IHNraW5CSWQpIHByaXZhdGUgewogICAgICAgIHVpbnQyNTYgZW5kID0gbm93ICsgNSBtaW51dGVzOwogICAgICAgIC8vIHVpbnQyNTYgZW5kID0gbm93OwogICAgICAgIHNraW5zW3NraW5BSWRdLmNvb2xkb3duRW5kVGltZSA9IHVpbnQ2NChlbmQpOwogICAgICAgIHNraW5zW3NraW5CSWRdLmNvb2xkb3duRW5kVGltZSA9IHVpbnQ2NChlbmQpOwogICAgfQoKICAgIC8vIF9pc1ZhbGlkU2tpbjogd2hldGhlciBhbiBhY2NvdW50IGNhbiBtaXggdXNpbmcgdGhlc2Ugc2tpbnMKICAgIC8vIE1ha2Ugc3VyZSB0d28gdGhpbmdzOgogICAgLy8gMS4gdGhlc2UgdHdvIHNraW5zIGRvIGV4aXN0CiAgICAvLyAyLiB0aGlzIGFjY291bnQgb3ducyB0aGVzZSBza2lucwogICAgZnVuY3Rpb24gX2lzVmFsaWRTa2luKGFkZHJlc3MgYWNjb3VudCwgdWludDI1NiBza2luQUlkLCB1aW50MjU2IHNraW5CSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgLy8gTWFrZSBzdXJlIHRob3NlIHR3byBza2lucyBiZWxvbmdzIHRvIHRoaXMgYWNjb3VudAogICAgICAgIGlmIChza2luQUlkID09IHNraW5CSWQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoKHNraW5BSWQgPT0gMCkgfHwgKHNraW5CSWQgPT0gMCkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoKHNraW5BSWQgPj0gbmV4dFNraW5JZCkgfHwgKHNraW5CSWQgPj0gbmV4dFNraW5JZCkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKHNraW5JZFRvT3duZXJbc2tpbkFJZF0gPT0gYWNjb3VudCkgJiYgKHNraW5JZFRvT3duZXJbc2tpbkJJZF0gPT0gYWNjb3VudCk7CiAgICB9CgogICAgLy8gX2lzTm90T25TYWxlOiB3aGV0aGVyIGEgc2tpbiBpcyBub3Qgb24gc2FsZQogICAgZnVuY3Rpb24gX2lzTm90T25TYWxlKHVpbnQyNTYgc2tpbklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAoaXNPblNhbGVbc2tpbklkXSA9PSBmYWxzZSk7CiAgICB9CgogICAgLy8gbWl4ICAKICAgIGZ1bmN0aW9uIG1peCh1aW50MjU2IHNraW5BSWQsIHVpbnQyNTYgc2tpbkJJZCkgcHVibGljIHdoZW5Ob3RQYXVzZWQgewoKICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHNraW5zIGFyZSB2YWxpZAogICAgICAgIHJlcXVpcmUoX2lzVmFsaWRTa2luKG1zZy5zZW5kZXIsIHNraW5BSWQsIHNraW5CSWQpKTsKCiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciBza2lucyBhcmUgbmVpdGhlciBvbiBzYWxlCiAgICAgICAgcmVxdWlyZShfaXNOb3RPblNhbGUoc2tpbkFJZCkgJiYgX2lzTm90T25TYWxlKHNraW5CSWQpKTsKCiAgICAgICAgLy8gQ2hlY2sgY29vbGRvd24KICAgICAgICByZXF1aXJlKF9pc0Nvb2xkb3duUmVhZHkoc2tpbkFJZCwgc2tpbkJJZCkpOwoKICAgICAgICAvLyBDaGVjayB0aGVzZSBza2lucyBhcmUgbm90IGluIGFub3RoZXIgcHJvY2VzcwogICAgICAgIHJlcXVpcmUoX2lzTm90TWl4aW5nKHNraW5BSWQsIHNraW5CSWQpKTsKCiAgICAgICAgLy8gU2V0IG5ldyBjb29sZG93biB0aW1lCiAgICAgICAgX3NldENvb2xkb3duRW5kVGltZShza2luQUlkLCBza2luQklkKTsKCiAgICAgICAgLy8gTWFyayBza2lucyBhcyBpbiBtaXhpbmcKICAgICAgICBza2luc1tza2luQUlkXS5taXhpbmdXaXRoSWQgPSB1aW50NjQoc2tpbkJJZCk7CiAgICAgICAgc2tpbnNbc2tpbkJJZF0ubWl4aW5nV2l0aElkID0gdWludDY0KHNraW5BSWQpOwoKICAgICAgICAvLyBFbWl0IE1peFN0YXJ0IGV2ZW50CiAgICAgICAgTWl4U3RhcnQobXNnLnNlbmRlciwgc2tpbkFJZCwgc2tpbkJJZCk7CiAgICB9CgogICAgLy8gTWl4aW5nIGF1dG8KICAgIGZ1bmN0aW9uIG1peEF1dG8odWludDI1NiBza2luQUlkLCB1aW50MjU2IHNraW5CSWQpIHB1YmxpYyBwYXlhYmxlIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByZVBhaWRGZWUpOwoKICAgICAgICBtaXgoc2tpbkFJZCwgc2tpbkJJZCk7CgogICAgICAgIFNraW4gc3RvcmFnZSBza2luID0gc2tpbnNbc2tpbkFJZF07CgogICAgICAgIEF1dG9NaXgobXNnLnNlbmRlciwgc2tpbkFJZCwgc2tpbkJJZCwgc2tpbi5jb29sZG93bkVuZFRpbWUpOwogICAgfQoKICAgIC8vIEdldCBtaXhpbmcgcmVzdWx0LCByZXR1cm4gdGhlIHJlc3VsdGVkIHNraW4gaWQKICAgIGZ1bmN0aW9uIGdldE1peGluZ1Jlc3VsdCh1aW50MjU2IHNraW5BSWQsIHVpbnQyNTYgc2tpbkJJZCkgcHVibGljIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIC8vIENoZWNrIHRoZXNlIHR3byBza2lucyBiZWxvbmdzIHRvIHRoZSBzYW1lIGFjY291bnQKICAgICAgICBhZGRyZXNzIGFjY291bnQgPSBza2luSWRUb093bmVyW3NraW5BSWRdOwogICAgICAgIHJlcXVpcmUoYWNjb3VudCA9PSBza2luSWRUb093bmVyW3NraW5CSWRdKTsKCiAgICAgICAgLy8gQ2hlY2sgdGhlc2UgdHdvIHNraW5zIGFyZSBpbiB0aGUgc2FtZSBtaXhpbmcgcHJvY2VzcwogICAgICAgIFNraW4gc3RvcmFnZSBza2luQSA9IHNraW5zW3NraW5BSWRdOwogICAgICAgIFNraW4gc3RvcmFnZSBza2luQiA9IHNraW5zW3NraW5CSWRdOwogICAgICAgIHJlcXVpcmUoc2tpbkEubWl4aW5nV2l0aElkID09IHVpbnQ2NChza2luQklkKSk7CiAgICAgICAgcmVxdWlyZShza2luQi5taXhpbmdXaXRoSWQgPT0gdWludDY0KHNraW5BSWQpKTsKCiAgICAgICAgLy8gQ2hlY2sgY29vbGRvd24KICAgICAgICByZXF1aXJlKF9pc0Nvb2xkb3duUmVhZHkoc2tpbkFJZCwgc2tpbkJJZCkpOwoKICAgICAgICAvLyBDcmVhdGUgbmV3IHNraW4KICAgICAgICB1aW50MTI4IG5ld1NraW5BcHBlYXJhbmNlID0gbWl4Rm9ybXVsYS5jYWxjTmV3U2tpbkFwcGVhcmFuY2Uoc2tpbkEuYXBwZWFyYW5jZSwgc2tpbkIuYXBwZWFyYW5jZSk7CiAgICAgICAgU2tpbiBtZW1vcnkgbmV3U2tpbiA9IFNraW4oe2FwcGVhcmFuY2U6IG5ld1NraW5BcHBlYXJhbmNlLCBjb29sZG93bkVuZFRpbWU6IHVpbnQ2NChub3cpLCBtaXhpbmdXaXRoSWQ6IDB9KTsKICAgICAgICBza2luc1tuZXh0U2tpbklkXSA9IG5ld1NraW47CiAgICAgICAgc2tpbklkVG9Pd25lcltuZXh0U2tpbklkXSA9IGFjY291bnQ7CiAgICAgICAgaXNPblNhbGVbbmV4dFNraW5JZF0gPSBmYWxzZTsKICAgICAgICBuZXh0U2tpbklkKys7CgogICAgICAgIC8vIENsZWFyIG9sZCBza2lucwogICAgICAgIHNraW5BLm1peGluZ1dpdGhJZCA9IDA7CiAgICAgICAgc2tpbkIubWl4aW5nV2l0aElkID0gMDsKCiAgICAgICAgLy8gSW4gb3JkZXIgdG8gZGlzdGluZ3Vpc2ggY3JlYXRlZCBza2lucyBpbiBtaW50aW5nIHdpdGggZGVzdHJveWVkIHNraW5zCiAgICAgICAgLy8gc2tpbklkVG9Pd25lcltza2luQUlkXSA9IG93bmVyOwogICAgICAgIC8vIHNraW5JZFRvT3duZXJbc2tpbkJJZF0gPSBvd25lcjsKICAgICAgICBkZWxldGUgc2tpbklkVG9Pd25lcltza2luQUlkXTsKICAgICAgICBkZWxldGUgc2tpbklkVG9Pd25lcltza2luQklkXTsKICAgICAgICAvLyByZXF1aXJlKG51bVNraW5PZkFjY291bnRzW2FjY291bnRdID49IDIpOwogICAgICAgIG51bVNraW5PZkFjY291bnRzW2FjY291bnRdIC09IDE7CgogICAgICAgIE1peFN1Y2Nlc3MoYWNjb3VudCwgbmV4dFNraW5JZCAtIDEsIHNraW5BSWQsIHNraW5CSWQpOwogICAgfQp9CmNvbnRyYWN0IFNraW5NYXJrZXQgaXMgU2tpbk1peCB7CgogICAgLy8gQ3V0IHJhdGlvIGZvciBhIHRyYW5zYWN0aW9uCiAgICAvLyBWYWx1ZXMgMC0xMCwwMDAgbWFwIHRvIDAlLTEwMCUKICAgIHVpbnQxMjggcHVibGljIHRyQ3V0ID0gNDAwOwoKICAgIC8vIFNhbGUgb3JkZXJzIGxpc3QgCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHB1YmxpYyBkZXNpcmVkUHJpY2U7CgogICAgLy8gZXZlbnRzCiAgICBldmVudCBQdXRPblNhbGUoYWRkcmVzcyBhY2NvdW50LCB1aW50MjU2IHNraW5JZCk7CiAgICBldmVudCBXaXRoZHJhd1NhbGUoYWRkcmVzcyBhY2NvdW50LCB1aW50MjU2IHNraW5JZCk7CiAgICBldmVudCBCdXlJbk1hcmtldChhZGRyZXNzIGJ1eWVyLCB1aW50MjU2IHNraW5JZCk7CgogICAgLy8gZnVuY3Rpb25zCgogICAgLy8gUHV0IGFzc2V0IG9uIHNhbGUKICAgIGZ1bmN0aW9uIHB1dE9uU2FsZSh1aW50MjU2IHNraW5JZCwgdWludDI1NiBwcmljZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIC8vIE9ubHkgb3duZXIgb2Ygc2tpbiBwYXNzCiAgICAgICAgcmVxdWlyZShza2luSWRUb093bmVyW3NraW5JZF0gPT0gbXNnLnNlbmRlcik7CgogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgc2tpbiBpcyBtaXhpbmcgCiAgICAgICAgcmVxdWlyZShza2luc1tza2luSWRdLm1peGluZ1dpdGhJZCA9PSAwKTsKCiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciBza2luIGlzIGFscmVhZHkgb24gc2FsZQogICAgICAgIHJlcXVpcmUoaXNPblNhbGVbc2tpbklkXSA9PSBmYWxzZSk7CgogICAgICAgIHJlcXVpcmUocHJpY2UgPiAwKTsgCgogICAgICAgIC8vIFB1dCBvbiBzYWxlCiAgICAgICAgZGVzaXJlZFByaWNlW3NraW5JZF0gPSBwcmljZTsKICAgICAgICBpc09uU2FsZVtza2luSWRdID0gdHJ1ZTsKCiAgICAgICAgLy8gRW1pdCB0aGUgQXBwcm92YWwgZXZlbnQKICAgICAgICBQdXRPblNhbGUobXNnLnNlbmRlciwgc2tpbklkKTsKICAgIH0KICAKICAgIC8vIFdpdGhkcmF3IGFuIHNhbGUgb3JkZXIKICAgIGZ1bmN0aW9uIHdpdGhkcmF3U2FsZSh1aW50MjU2IHNraW5JZCkgZXh0ZXJuYWwgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciB0aGlzIHNraW4gaXMgb24gc2FsZQogICAgICAgIHJlcXVpcmUoaXNPblNhbGVbc2tpbklkXSA9PSB0cnVlKTsKICAgICAgICAKICAgICAgICAvLyBDYW4gb25seSB3aXRoZHJhdyBzZWxmJ3Mgc2FsZQogICAgICAgIHJlcXVpcmUoc2tpbklkVG9Pd25lcltza2luSWRdID09IG1zZy5zZW5kZXIpOwoKICAgICAgICAvLyBXaXRoZHJhdwogICAgICAgIGlzT25TYWxlW3NraW5JZF0gPSBmYWxzZTsKICAgICAgICBkZXNpcmVkUHJpY2Vbc2tpbklkXSA9IDA7CgogICAgICAgIC8vIEVtaXQgdGhlIGNhbmNlbCBldmVudAogICAgICAgIFdpdGhkcmF3U2FsZShtc2cuc2VuZGVyLCBza2luSWQpOwogICAgfQogCiAgICAvLyBCdXkgc2tpbiBpbiBtYXJrZXQKICAgIGZ1bmN0aW9uIGJ1eUluTWFya2V0KHVpbnQyNTYgc2tpbklkKSBleHRlcm5hbCBwYXlhYmxlIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBza2luIGlzIG9uIHNhbGUKICAgICAgICByZXF1aXJlKGlzT25TYWxlW3NraW5JZF0gPT0gdHJ1ZSk7CgogICAgICAgIGFkZHJlc3Mgc2VsbGVyID0gc2tpbklkVG9Pd25lcltza2luSWRdOwoKICAgICAgICAvLyBDaGVjayB0aGUgc2VuZGVyIGlzbid0IHRoZSBzZWxsZXIKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gc2VsbGVyKTsKCiAgICAgICAgdWludDI1NiBfcHJpY2UgPSBkZXNpcmVkUHJpY2Vbc2tpbklkXTsKICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHBheSB2YWx1ZSBpcyBlbm91Z2gKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBfcHJpY2UpOwoKICAgICAgICAvLyBDdXQgYW5kIHRoZW4gc2VuZCB0aGUgcHJvY2VlZHMgdG8gc2VsbGVyCiAgICAgICAgdWludDI1NiBzZWxsZXJQcm9jZWVkcyA9IF9wcmljZSAtIF9jb21wdXRlQ3V0KF9wcmljZSk7CgogICAgICAgIHNlbGxlci50cmFuc2ZlcihzZWxsZXJQcm9jZWVkcyk7CgogICAgICAgIC8vIFRyYW5zZmVyIHNraW4gZnJvbSBzZWxsZXIgdG8gYnV5ZXIKICAgICAgICBudW1Ta2luT2ZBY2NvdW50c1tzZWxsZXJdIC09IDE7CiAgICAgICAgc2tpbklkVG9Pd25lcltza2luSWRdID0gbXNnLnNlbmRlcjsKICAgICAgICBudW1Ta2luT2ZBY2NvdW50c1ttc2cuc2VuZGVyXSArPSAxOwogICAgICAgIGlzT25TYWxlW3NraW5JZF0gPSBmYWxzZTsKICAgICAgICBkZXNpcmVkUHJpY2Vbc2tpbklkXSA9IDA7CgogICAgICAgIC8vIEVtaXQgdGhlIGJ1eSBldmVudAogICAgICAgIEJ1eUluTWFya2V0KG1zZy5zZW5kZXIsIHNraW5JZCk7CiAgICB9CgogICAgLy8gQ29tcHV0ZSB0aGUgbWFya2V0Q3V0CiAgICBmdW5jdGlvbiBfY29tcHV0ZUN1dCh1aW50MjU2IF9wcmljZSkgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIF9wcmljZSAqIHRyQ3V0IC8gMTAwMDA7CiAgICB9Cn0KY29udHJhY3QgU2tpbk1pbnRpbmcgaXMgU2tpbk1hcmtldCB7CgogICAgLy8gTGltaXRzIHRoZSBudW1iZXIgb2Ygc2tpbnMgdGhlIGNvbnRyYWN0IG93bmVyIGNhbiBldmVyIGNyZWF0ZS4KICAgIHVpbnQyNTYgcHVibGljIHNraW5DcmVhdGVkTGltaXQgPSA1MDAwMDsKCiAgICAvLyBUaGUgc3VtbW9uIG51bWJlcnMgb2YgZWFjaCBhY2NvdXRzOiB3aWxsIGJlIGNsZWFyZWQgZXZlcnkgZGF5CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBhY2NvdXRUb1N1bW1vbk51bTsKCiAgICAvLyBQYXkgbGV2ZWwgb2YgZWFjaCBhY2NvdXRzCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBhY2NvdXRUb1BheUxldmVsOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYWNjb3VudHNMYXN0Q2xlYXJUaW1lOwoKICAgIHVpbnQyNTYgcHVibGljIGxldmVsQ2xlYXJUaW1lID0gbm93OwoKICAgIC8vIHByaWNlCiAgICB1aW50MjU2IHB1YmxpYyBiYXNlU3VtbW9uUHJpY2UgPSAzIGZpbm5leTsKICAgIHVpbnQyNTYgcHVibGljIGJsZWFjaFByaWNlID0gMzAgZmlubmV5OwoKICAgIC8vIFBheSBsZXZlbAogICAgdWludDI1Nls1XSBwdWJsaWMgbGV2ZWxTcGxpdHMgPSBbMTAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMjAwXTsKICAgIAogICAgdWludDI1Nls2XSBwdWJsaWMgcGF5TXVsdGlwbGUgPSBbMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwXTsKCgogICAgLy8gZXZlbnRzCiAgICBldmVudCBDcmVhdGVOZXdTa2luKHVpbnQyNTYgc2tpbklkLCBhZGRyZXNzIGFjY291bnQpOwogICAgZXZlbnQgQmxlYWNoKHVpbnQyNTYgc2tpbklkLCB1aW50MTI4IG5ld0FwcGVhcmFuY2UpOwoKICAgIC8vIGZ1bmN0aW9ucwoKICAgIC8vIFNldCBwcmljZSAKICAgIGZ1bmN0aW9uIHNldEJhc2VTdW1tb25QcmljZSh1aW50MjU2IG5ld1ByaWNlKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIGJhc2VTdW1tb25QcmljZSA9IG5ld1ByaWNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJsZWFjaFByaWNlKHVpbnQyNTYgbmV3UHJpY2UpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgYmxlYWNoUHJpY2UgPSBuZXdQcmljZTsKICAgIH0KCiAgICAvLyBDcmVhdGUgYmFzZSBza2luIGZvciBzZWxsLiBPbmx5IG93bmVyIGNhbiBjcmVhdGUKICAgIGZ1bmN0aW9uIGNyZWF0ZVNraW4odWludDEyOCBzcGVjaWZpZWRBcHBlYXJhbmNlLCB1aW50MjU2IHNhbGVQcmljZSkgZXh0ZXJuYWwgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIHJlcXVpcmUobnVtU2tpbk9mQWNjb3VudHNbb3duZXJdIDwgc2tpbkNyZWF0ZWRMaW1pdCk7CgogICAgICAgIC8vIENyZWF0ZSBzcGVjaWZpZWQgc2tpbgogICAgICAgIC8vIHVpbnQxMjggcmFuZG9tQXBwZWFyYW5jZSA9IG1peEZvcm11bGEucmFuZG9tU2tpbkFwcGVhcmFuY2UoKTsKICAgICAgICBTa2luIG1lbW9yeSBuZXdTa2luID0gU2tpbih7YXBwZWFyYW5jZTogc3BlY2lmaWVkQXBwZWFyYW5jZSwgY29vbGRvd25FbmRUaW1lOiB1aW50NjQobm93KSwgbWl4aW5nV2l0aElkOiAwfSk7CiAgICAgICAgc2tpbnNbbmV4dFNraW5JZF0gPSBuZXdTa2luOwogICAgICAgIHNraW5JZFRvT3duZXJbbmV4dFNraW5JZF0gPSBvd25lcjsKICAgICAgICBpc09uU2FsZVtuZXh0U2tpbklkXSA9IGZhbHNlOwoKICAgICAgICAvLyBFbWl0IHRoZSBjcmVhdGUgZXZlbnQKICAgICAgICBDcmVhdGVOZXdTa2luKG5leHRTa2luSWQsIG93bmVyKTsKCiAgICAgICAgLy8gUHV0IHRoaXMgc2tpbiBvbiBzYWxlCiAgICAgICAgcHV0T25TYWxlKG5leHRTa2luSWQsIHNhbGVQcmljZSk7CgogICAgICAgIG5leHRTa2luSWQrKzsKICAgICAgICBudW1Ta2luT2ZBY2NvdW50c1tvd25lcl0gKz0gMTsgICAKICAgIH0KCiAgICAvLyBTdW1tb24KICAgIGZ1bmN0aW9uIHN1bW1vbigpIGV4dGVybmFsIHBheWFibGUgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgLy8gQ2xlYXIgZGFpbHkgc3VtbW9uIG51bWJlcnMKICAgICAgICBpZiAoYWNjb3VudHNMYXN0Q2xlYXJUaW1lW21zZy5zZW5kZXJdID09IHVpbnQyNTYoMCkpIHsKICAgICAgICAgICAgLy8gVGhpcyBhY2NvdW50J3MgZmlyc3QgdGltZSB0byBzdW1tb24sIHdlIGRvIG5vdCBuZWVkIHRvIGNsZWFyIHN1bW1vbiBudW1iZXJzCiAgICAgICAgICAgIGFjY291bnRzTGFzdENsZWFyVGltZVttc2cuc2VuZGVyXSA9IG5vdzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoYWNjb3VudHNMYXN0Q2xlYXJUaW1lW21zZy5zZW5kZXJdIDwgbGV2ZWxDbGVhclRpbWUgJiYgbm93ID4gbGV2ZWxDbGVhclRpbWUpIHsKICAgICAgICAgICAgICAgIGFjY291dFRvU3VtbW9uTnVtW21zZy5zZW5kZXJdID0gMDsKICAgICAgICAgICAgICAgIGFjY291dFRvUGF5TGV2ZWxbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgICAgICAgICAgYWNjb3VudHNMYXN0Q2xlYXJUaW1lW21zZy5zZW5kZXJdID0gbm93OwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB1aW50MjU2IHBheUxldmVsID0gYWNjb3V0VG9QYXlMZXZlbFttc2cuc2VuZGVyXTsKICAgICAgICB1aW50MjU2IHByaWNlID0gcGF5TXVsdGlwbGVbcGF5TGV2ZWxdICogYmFzZVN1bW1vblByaWNlOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByaWNlKTsKCiAgICAgICAgLy8gQ3JlYXRlIHJhbmRvbSBza2luCiAgICAgICAgdWludDEyOCByYW5kb21BcHBlYXJhbmNlID0gbWl4Rm9ybXVsYS5yYW5kb21Ta2luQXBwZWFyYW5jZSgpOwogICAgICAgIC8vIHVpbnQxMjggcmFuZG9tQXBwZWFyYW5jZSA9IDA7CiAgICAgICAgU2tpbiBtZW1vcnkgbmV3U2tpbiA9IFNraW4oe2FwcGVhcmFuY2U6IHJhbmRvbUFwcGVhcmFuY2UsIGNvb2xkb3duRW5kVGltZTogdWludDY0KG5vdyksIG1peGluZ1dpdGhJZDogMH0pOwogICAgICAgIHNraW5zW25leHRTa2luSWRdID0gbmV3U2tpbjsKICAgICAgICBza2luSWRUb093bmVyW25leHRTa2luSWRdID0gbXNnLnNlbmRlcjsKICAgICAgICBpc09uU2FsZVtuZXh0U2tpbklkXSA9IGZhbHNlOwoKICAgICAgICAvLyBFbWl0IHRoZSBjcmVhdGUgZXZlbnQKICAgICAgICBDcmVhdGVOZXdTa2luKG5leHRTa2luSWQsIG1zZy5zZW5kZXIpOwoKICAgICAgICBuZXh0U2tpbklkKys7CiAgICAgICAgbnVtU2tpbk9mQWNjb3VudHNbbXNnLnNlbmRlcl0gKz0gMTsKICAgICAgICAKICAgICAgICBhY2NvdXRUb1N1bW1vbk51bVttc2cuc2VuZGVyXSArPSAxOwogICAgICAgIAogICAgICAgIC8vIEhhbmRsZSB0aGUgcGF5bGV2ZWwgICAgICAgIAogICAgICAgIGlmIChwYXlMZXZlbCA8IDUpIHsKICAgICAgICAgICAgaWYgKGFjY291dFRvU3VtbW9uTnVtW21zZy5zZW5kZXJdID49IGxldmVsU3BsaXRzW3BheUxldmVsXSkgewogICAgICAgICAgICAgICAgYWNjb3V0VG9QYXlMZXZlbFttc2cuc2VuZGVyXSA9IHBheUxldmVsICsgMTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvLyBCbGVhY2ggc29tZSBhdHRyaWJ1dGVzCiAgICBmdW5jdGlvbiBibGVhY2godWludDEyOCBza2luSWQsIHVpbnQxMjggYXR0cmlidXRlcykgZXh0ZXJuYWwgcGF5YWJsZSB3aGVuTm90UGF1c2VkIHsKICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG1zZy5zZW5kZXIgaXMgb3duZXIgb2YgdGhlIHNraW4gCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHNraW5JZFRvT3duZXJbc2tpbklkXSk7CgogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBza2luIGlzIG9uIHNhbGUgCiAgICAgICAgcmVxdWlyZShpc09uU2FsZVtza2luSWRdID09IGZhbHNlKTsKCiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciB0aGVyZSBpcyBlbm91Z2ggbW9uZXkKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBibGVhY2hQcmljZSk7CgogICAgICAgIFNraW4gc3RvcmFnZSBvcmlnaW5Ta2luID0gc2tpbnNbc2tpbklkXTsKICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoaXMgc2tpbiBpcyBpbiBtaXhpbmcgCiAgICAgICAgcmVxdWlyZShvcmlnaW5Ta2luLm1peGluZ1dpdGhJZCA9PSAwKTsKCiAgICAgICAgdWludDEyOCBuZXdBcHBlYXJhbmNlID0gbWl4Rm9ybXVsYS5ibGVhY2hBcHBlYXJhbmNlKG9yaWdpblNraW4uYXBwZWFyYW5jZSwgYXR0cmlidXRlcyk7CiAgICAgICAgb3JpZ2luU2tpbi5hcHBlYXJhbmNlID0gbmV3QXBwZWFyYW5jZTsKCiAgICAgICAgLy8gRW1pdCBibGVhY2ggZXZlbnQKICAgICAgICBCbGVhY2goc2tpbklkLCBuZXdBcHBlYXJhbmNlKTsKICAgIH0KCiAgICAvLyBPdXIgZGFlbW9uIHdpbGwgY2xlYXIgZGFpbHkgc3VtbW9uIG51bWJlcnMKICAgIGZ1bmN0aW9uIGNsZWFyU3VtbW9uTnVtKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICB1aW50MjU2IG5leHREYXkgPSBsZXZlbENsZWFyVGltZSArIDEgZGF5czsKICAgICAgICBpZiAobm93ID4gbmV4dERheSkgewogICAgICAgICAgICBsZXZlbENsZWFyVGltZSA9IG5leHREYXk7CiAgICAgICAgfQogICAgfQp9'.
	

]
