Class {
	#name : #SRT8fc489fb4999c57c4ffb31b8df2388666797239b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8fc489fb4999c57c4ffb31b8df2388666797239b >> base64 [
	^ 'Ly9zb2wgV2FsbGV0Ci8vIE11bHRpLXNpZywgZGFpbHktbGltaXRlZCBhY2NvdW50IHByb3h5L3dhbGxldC4KLy8gQGF1dGhvcnM6Ci8vIEdhdiBXb29kIDw8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iZDRiMzk0YjFhMGJjYjBiMWEyZmFiN2JiYjkiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgovLyBpbmhlcml0YWJsZSAicHJvcGVydHkiIGNvbnRyYWN0IHRoYXQgZW5hYmxlcyBtZXRob2RzIHRvIGJlIHByb3RlY3RlZCBieSByZXF1aXJpbmcgdGhlIGFjcXVpZXNjZW5jZSBvZiBlaXRoZXIgYQovLyBzaW5nbGUsIG9yLCBjcnVjaWFsbHksIGVhY2ggb2YgYSBudW1iZXIgb2YsIGRlc2lnbmF0ZWQgb3duZXJzLgovLyB1c2FnZToKLy8gdXNlIG1vZGlmaWVycyBvbmx5b3duZXIgKGp1c3Qgb3duIG93bmVkKSBvciBvbmx5bWFueW93bmVycyhoYXNoKSwgd2hlcmVieSB0aGUgc2FtZSBoYXNoIG11c3QgYmUgcHJvdmlkZWQgYnkKLy8gc29tZSBudW1iZXIgKHNwZWNpZmllZCBpbiBjb25zdHJ1Y3Rvcikgb2YgdGhlIHNldCBvZiBvd25lcnMgKHNwZWNpZmllZCBpbiB0aGUgY29uc3RydWN0b3IsIG1vZGlmaWFibGUpIGJlZm9yZSB0aGUKLy8gaW50ZXJpb3IgaXMgZXhlY3V0ZWQuCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMDsKCmNvbnRyYWN0IG11bHRpb3duZWQgewoKCS8vIFRZUEVTCgogICAgLy8gc3RydWN0IGZvciB0aGUgc3RhdHVzIG9mIGEgcGVuZGluZyBvcGVyYXRpb24uCiAgICBzdHJ1Y3QgUGVuZGluZ1N0YXRlIHsKICAgICAgICB1aW50IHlldE5lZWRlZDsKICAgICAgICB1aW50IG93bmVyc0RvbmU7CiAgICAgICAgdWludCBpbmRleDsKICAgIH0KCgkvLyBFVkVOVFMKCiAgICAvLyB0aGlzIGNvbnRyYWN0IG9ubHkgaGFzIHNpeCB0eXBlcyBvZiBldmVudHM6IGl0IGNhbiBhY2NlcHQgYSBjb25maXJtYXRpb24sIGluIHdoaWNoIGNhc2UKICAgIC8vIHdlIHJlY29yZCBvd25lciBhbmQgb3BlcmF0aW9uIChoYXNoKSBhbG9uZ3NpZGUgaXQuCiAgICBldmVudCBDb25maXJtYXRpb24oYWRkcmVzcyBvd25lciwgYnl0ZXMzMiBvcGVyYXRpb24pOwogICAgZXZlbnQgUmV2b2tlKGFkZHJlc3Mgb3duZXIsIGJ5dGVzMzIgb3BlcmF0aW9uKTsKICAgIC8vIHNvbWUgb3RoZXJzIGFyZSBpbiB0aGUgY2FzZSBvZiBhbiBvd25lciBjaGFuZ2luZy4KICAgIGV2ZW50IE93bmVyQ2hhbmdlZChhZGRyZXNzIG9sZE93bmVyLCBhZGRyZXNzIG5ld093bmVyKTsKICAgIGV2ZW50IE93bmVyQWRkZWQoYWRkcmVzcyBuZXdPd25lcik7CiAgICBldmVudCBPd25lclJlbW92ZWQoYWRkcmVzcyBvbGRPd25lcik7CiAgICAvLyB0aGUgbGFzdCBvbmUgaXMgZW1pdHRlZCBpZiB0aGUgcmVxdWlyZWQgc2lnbmF0dXJlcyBjaGFuZ2UKICAgIGV2ZW50IFJlcXVpcmVtZW50Q2hhbmdlZCh1aW50IG5ld1JlcXVpcmVtZW50KTsKCgkvLyBNT0RJRklFUlMKCiAgICAvLyBzaW1wbGUgc2luZ2xlLXNpZyBmdW5jdGlvbiBtb2RpZmllci4KICAgIG1vZGlmaWVyIG9ubHlvd25lciB7CiAgICAgICAgcmVxdWlyZShpc093bmVyKG1zZy5zZW5kZXIpKTsKICAgICAgICBfOwogICAgfQogICAgLy8gbXVsdGktc2lnIGZ1bmN0aW9uIG1vZGlmaWVyOiB0aGUgb3BlcmF0aW9uIG11c3QgaGF2ZSBhbiBpbnRyaW5zaWMgaGFzaCBpbiBvcmRlcgogICAgLy8gdGhhdCBsYXRlciBhdHRlbXB0cyBjYW4gYmUgcmVhbGlzZWQgYXMgdGhlIHNhbWUgdW5kZXJseWluZyBvcGVyYXRpb24gYW5kCiAgICAvLyB0aHVzIGNvdW50IGFzIGNvbmZpcm1hdGlvbnMuCiAgICBtb2RpZmllciBvbmx5bWFueW93bmVycyhieXRlczMyIF9vcGVyYXRpb24pIHsKICAgICAgICByZXF1aXJlKGNvbmZpcm1BbmRDaGVjayhfb3BlcmF0aW9uKSk7CiAgICAgICAgXzsKICAgIH0KCgkvLyBNRVRIT0RTCgogICAgLy8gY29uc3RydWN0b3IgaXMgZ2l2ZW4gbnVtYmVyIG9mIHNpZ3MgcmVxdWlyZWQgdG8gZG8gcHJvdGVjdGVkICJvbmx5bWFueW93bmVycyIgdHJhbnNhY3Rpb25zCiAgICAvLyBhcyB3ZWxsIGFzIHRoZSBzZWxlY3Rpb24gb2YgYWRkcmVzc2VzIGNhcGFibGUgb2YgY29uZmlybWluZyB0aGVtLgogICAgZnVuY3Rpb24gbXVsdGlvd25lZChhZGRyZXNzW10gX293bmVycywgdWludCBfcmVxdWlyZWQpIHsKICAgICAgICBtX251bU93bmVycyA9IF9vd25lcnMubGVuZ3RoICsgMTsKICAgICAgICBtX293bmVyc1sxXSA9IHVpbnQobXNnLnNlbmRlcik7CiAgICAgICAgbV9vd25lckluZGV4W3VpbnQobXNnLnNlbmRlcildID0gMTsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfb3duZXJzLmxlbmd0aDsgKytpKQogICAgICAgIHsKICAgICAgICAgICAgbV9vd25lcnNbMiArIGldID0gdWludChfb3duZXJzW2ldKTsKICAgICAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX293bmVyc1tpXSldID0gMiArIGk7CiAgICAgICAgfQogICAgICAgIG1fcmVxdWlyZWQgPSBfcmVxdWlyZWQ7CiAgICB9CiAgICAKICAgIC8vIFJldm9rZXMgYSBwcmlvciBjb25maXJtYXRpb24gb2YgdGhlIGdpdmVuIG9wZXJhdGlvbgogICAgZnVuY3Rpb24gcmV2b2tlKGJ5dGVzMzIgX29wZXJhdGlvbikgZXh0ZXJuYWwgewogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KG1zZy5zZW5kZXIpXTsKICAgICAgICAvLyBtYWtlIHN1cmUgdGhleSdyZSBhbiBvd25lcgogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybjsKICAgICAgICB1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4OwogICAgICAgIHZhciBwZW5kaW5nID0gbV9wZW5kaW5nW19vcGVyYXRpb25dOwogICAgICAgIGlmIChwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID4gMCkgewogICAgICAgICAgICBwZW5kaW5nLnlldE5lZWRlZCsrOwogICAgICAgICAgICBwZW5kaW5nLm93bmVyc0RvbmUgLT0gb3duZXJJbmRleEJpdDsKICAgICAgICAgICAgUmV2b2tlKG1zZy5zZW5kZXIsIF9vcGVyYXRpb24pOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy8gUmVwbGFjZXMgYW4gb3duZXIgYF9mcm9tYCB3aXRoIGFub3RoZXIgYF90b2AuCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsKICAgICAgICBpZiAoaXNPd25lcihfdG8pKSByZXR1cm47CiAgICAgICAgdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQoX2Zyb20pXTsKICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm47CgogICAgICAgIGNsZWFyUGVuZGluZygpOwogICAgICAgIG1fb3duZXJzW293bmVySW5kZXhdID0gdWludChfdG8pOwogICAgICAgIG1fb3duZXJJbmRleFt1aW50KF9mcm9tKV0gPSAwOwogICAgICAgIG1fb3duZXJJbmRleFt1aW50KF90byldID0gb3duZXJJbmRleDsKICAgICAgICBPd25lckNoYW5nZWQoX2Zyb20sIF90byk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkZE93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgewogICAgICAgIGlmIChpc093bmVyKF9vd25lcikpIHJldHVybjsKCiAgICAgICAgY2xlYXJQZW5kaW5nKCk7CiAgICAgICAgaWYgKG1fbnVtT3duZXJzID49IGNfbWF4T3duZXJzKQogICAgICAgICAgICByZW9yZ2FuaXplT3duZXJzKCk7CiAgICAgICAgaWYgKG1fbnVtT3duZXJzID49IGNfbWF4T3duZXJzKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgbV9udW1Pd25lcnMrKzsKICAgICAgICBtX293bmVyc1ttX251bU93bmVyc10gPSB1aW50KF9vd25lcik7CiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX293bmVyKV0gPSBtX251bU93bmVyczsKICAgICAgICBPd25lckFkZGVkKF9vd25lcik7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlbW92ZU93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgewogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KF9vd25lcildOwogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybjsKICAgICAgICBpZiAobV9yZXF1aXJlZCA+IG1fbnVtT3duZXJzIC0gMSkgcmV0dXJuOwoKICAgICAgICBtX293bmVyc1tvd25lckluZGV4XSA9IDA7CiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX293bmVyKV0gPSAwOwogICAgICAgIGNsZWFyUGVuZGluZygpOwogICAgICAgIHJlb3JnYW5pemVPd25lcnMoKTsgLy9tYWtlIHN1cmUgbV9udW1Pd25lciBpcyBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG93bmVycyBhbmQgYWx3YXlzIHBvaW50cyB0byB0aGUgb3B0aW1hbCBmcmVlIHNsb3QKICAgICAgICBPd25lclJlbW92ZWQoX293bmVyKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2hhbmdlUmVxdWlyZW1lbnQodWludCBfbmV3UmVxdWlyZWQpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7CiAgICAgICAgaWYgKF9uZXdSZXF1aXJlZCA+IG1fbnVtT3duZXJzKSByZXR1cm47CiAgICAgICAgbV9yZXF1aXJlZCA9IF9uZXdSZXF1aXJlZDsKICAgICAgICBjbGVhclBlbmRpbmcoKTsKICAgICAgICBSZXF1aXJlbWVudENoYW5nZWQoX25ld1JlcXVpcmVkKTsKICAgIH0KCiAgICAvLyBHZXRzIGFuIG93bmVyIGJ5IDAtaW5kZXhlZCBwb3NpdGlvbiAodXNpbmcgbnVtT3duZXJzIGFzIHRoZSBjb3VudCkKICAgIGZ1bmN0aW9uIGdldE93bmVyKHVpbnQgb3duZXJJbmRleCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBhZGRyZXNzKG1fb3duZXJzW293bmVySW5kZXggKyAxXSk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNPd25lcihhZGRyZXNzIF9hZGRyKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIG1fb3duZXJJbmRleFt1aW50KF9hZGRyKV0gPiAwOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBoYXNDb25maXJtZWQoYnl0ZXMzMiBfb3BlcmF0aW9uLCBhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHZhciBwZW5kaW5nID0gbV9wZW5kaW5nW19vcGVyYXRpb25dOwogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KF9vd25lcildOwoKICAgICAgICAvLyBtYWtlIHN1cmUgdGhleSdyZSBhbiBvd25lcgogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBiaXQgdG8gc2V0IGZvciB0aGlzIG93bmVyLgogICAgICAgIHVpbnQgb3duZXJJbmRleEJpdCA9IDIqKm93bmVySW5kZXg7CiAgICAgICAgcmV0dXJuICEocGVuZGluZy5vd25lcnNEb25lICYgb3duZXJJbmRleEJpdCA9PSAwKTsKICAgIH0KICAgIAogICAgLy8gSU5URVJOQUwgTUVUSE9EUwoKICAgIGZ1bmN0aW9uIGNvbmZpcm1BbmRDaGVjayhieXRlczMyIF9vcGVyYXRpb24pIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvLyBkZXRlcm1pbmUgd2hhdCBpbmRleCB0aGUgcHJlc2VudCBzZW5kZXIgaXM6CiAgICAgICAgdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQobXNnLnNlbmRlcildOwogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG93bmVyCiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOwoKICAgICAgICB2YXIgcGVuZGluZyA9IG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsKICAgICAgICAvLyBpZiB3ZSdyZSBub3QgeWV0IHdvcmtpbmcgb24gdGhpcyBvcGVyYXRpb24sIHN3aXRjaCBvdmVyIGFuZCByZXNldCB0aGUgY29uZmlybWF0aW9uIHN0YXR1cy4KICAgICAgICBpZiAocGVuZGluZy55ZXROZWVkZWQgPT0gMCkgewogICAgICAgICAgICAvLyByZXNldCBjb3VudCBvZiBjb25maXJtYXRpb25zIG5lZWRlZC4KICAgICAgICAgICAgcGVuZGluZy55ZXROZWVkZWQgPSBtX3JlcXVpcmVkOwogICAgICAgICAgICAvLyByZXNldCB3aGljaCBvd25lcnMgaGF2ZSBjb25maXJtZWQgKG5vbmUpIC0gc2V0IG91ciBiaXRtYXAgdG8gMC4KICAgICAgICAgICAgcGVuZGluZy5vd25lcnNEb25lID0gMDsKICAgICAgICAgICAgcGVuZGluZy5pbmRleCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aCsrOwogICAgICAgICAgICBtX3BlbmRpbmdJbmRleFtwZW5kaW5nLmluZGV4XSA9IF9vcGVyYXRpb247CiAgICAgICAgfQogICAgICAgIC8vIGRldGVybWluZSB0aGUgYml0IHRvIHNldCBmb3IgdGhpcyBvd25lci4KICAgICAgICB1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4OwogICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSAodGhlIG1lc3NhZ2Ugc2VuZGVyKSBoYXZlbid0IGNvbmZpcm1lZCB0aGlzIG9wZXJhdGlvbiBwcmV2aW91c2x5LgogICAgICAgIGlmIChwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID09IDApIHsKICAgICAgICAgICAgQ29uZmlybWF0aW9uKG1zZy5zZW5kZXIsIF9vcGVyYXRpb24pOwogICAgICAgICAgICAvLyBvayAtIGNoZWNrIGlmIGNvdW50IGlzIGVub3VnaCB0byBnbyBhaGVhZC4KICAgICAgICAgICAgaWYgKHBlbmRpbmcueWV0TmVlZGVkIDw9IDEpIHsKICAgICAgICAgICAgICAgIC8vIGVub3VnaCBjb25maXJtYXRpb25zOiByZXNldCBhbmQgcnVuIGludGVyaW9yLgogICAgICAgICAgICAgICAgZGVsZXRlIG1fcGVuZGluZ0luZGV4W21fcGVuZGluZ1tfb3BlcmF0aW9uXS5pbmRleF07CiAgICAgICAgICAgICAgICBkZWxldGUgbV9wZW5kaW5nW19vcGVyYXRpb25dOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAvLyBub3QgZW5vdWdoOiByZWNvcmQgdGhhdCB0aGlzIG93bmVyIGluIHBhcnRpY3VsYXIgY29uZmlybWVkLgogICAgICAgICAgICAgICAgcGVuZGluZy55ZXROZWVkZWQtLTsKICAgICAgICAgICAgICAgIHBlbmRpbmcub3duZXJzRG9uZSB8PSBvd25lckluZGV4Qml0OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlb3JnYW5pemVPd25lcnMoKSBwcml2YXRlIHsKICAgICAgICB1aW50IGZyZWUgPSAxOwogICAgICAgIHdoaWxlIChmcmVlIDwgbV9udW1Pd25lcnMpCiAgICAgICAgewogICAgICAgICAgICB3aGlsZSAoZnJlZSA8IG1fbnVtT3duZXJzICYmIG1fb3duZXJzW2ZyZWVdICE9IDApIGZyZWUrKzsKICAgICAgICAgICAgd2hpbGUgKG1fbnVtT3duZXJzID4gMSAmJiBtX293bmVyc1ttX251bU93bmVyc10gPT0gMCkgbV9udW1Pd25lcnMtLTsKICAgICAgICAgICAgaWYgKGZyZWUgPCBtX251bU93bmVycyAmJiBtX293bmVyc1ttX251bU93bmVyc10gIT0gMCAmJiBtX293bmVyc1tmcmVlXSA9PSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBtX293bmVyc1tmcmVlXSA9IG1fb3duZXJzW21fbnVtT3duZXJzXTsKICAgICAgICAgICAgICAgIG1fb3duZXJJbmRleFttX293bmVyc1tmcmVlXV0gPSBmcmVlOwogICAgICAgICAgICAgICAgbV9vd25lcnNbbV9udW1Pd25lcnNdID0gMDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2xlYXJQZW5kaW5nKCkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgbGVuZ3RoID0gbV9wZW5kaW5nSW5kZXgubGVuZ3RoOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKQogICAgICAgICAgICBpZiAobV9wZW5kaW5nSW5kZXhbaV0gIT0gMCkKICAgICAgICAgICAgICAgIGRlbGV0ZSBtX3BlbmRpbmdbbV9wZW5kaW5nSW5kZXhbaV1dOwogICAgICAgIGRlbGV0ZSBtX3BlbmRpbmdJbmRleDsKICAgIH0KICAgICAgICAKICAgCS8vIEZJRUxEUwoKICAgIC8vIHRoZSBudW1iZXIgb2Ygb3duZXJzIHRoYXQgbXVzdCBjb25maXJtIHRoZSBzYW1lIG9wZXJhdGlvbiBiZWZvcmUgaXQgaXMgcnVuLgogICAgdWludCBwdWJsaWMgbV9yZXF1aXJlZDsKICAgIC8vIHBvaW50ZXIgdXNlZCB0byBmaW5kIGEgZnJlZSBzbG90IGluIG1fb3duZXJzCiAgICB1aW50IHB1YmxpYyBtX251bU93bmVyczsKICAgIAogICAgLy8gbGlzdCBvZiBvd25lcnMKICAgIHVpbnRbMjU2XSBtX293bmVyczsKICAgIHVpbnQgY29uc3RhbnQgY19tYXhPd25lcnMgPSAyNTA7CiAgICAvLyBpbmRleCBvbiB0aGUgbGlzdCBvZiBvd25lcnMgdG8gYWxsb3cgcmV2ZXJzZSBsb29rdXAKICAgIG1hcHBpbmcodWludCA9PiB1aW50KSBtX293bmVySW5kZXg7CiAgICAvLyB0aGUgb25nb2luZyBvcGVyYXRpb25zLgogICAgbWFwcGluZyhieXRlczMyID0+IFBlbmRpbmdTdGF0ZSkgbV9wZW5kaW5nOwogICAgYnl0ZXMzMltdIG1fcGVuZGluZ0luZGV4Owp9CgovLyBpbmhlcml0YWJsZSAicHJvcGVydHkiIGNvbnRyYWN0IHRoYXQgZW5hYmxlcyBtZXRob2RzIHRvIGJlIHByb3RlY3RlZCBieSBwbGFjaW5nIGEgbGluZWFyIGxpbWl0IChzcGVjaWZpYWJsZSkKLy8gb24gYSBwYXJ0aWN1bGFyIHJlc291cmNlIHBlciBjYWxlbmRhciBkYXkuIGlzIG11bHRpb3duZWQgdG8gYWxsb3cgdGhlIGxpbWl0IHRvIGJlIGFsdGVyZWQuIHJlc291cmNlIHRoYXQgbWV0aG9kCi8vIHVzZXMgaXMgc3BlY2lmaWVkIGluIHRoZSBtb2RpZmllci4KY29udHJhY3QgZGF5bGltaXQgaXMgbXVsdGlvd25lZCB7CgoJLy8gTU9ESUZJRVJTCgogICAgLy8gc2ltcGxlIG1vZGlmaWVyIGZvciBkYWlseSBsaW1pdC4KICAgIG1vZGlmaWVyIGxpbWl0ZWREYWlseSh1aW50IF92YWx1ZSkgewogICAgICAgIHJlcXVpcmUodW5kZXJMaW1pdChfdmFsdWUpKTsKICAgICAgICBfOwogICAgfQoKCS8vIE1FVEhPRFMKCiAgICAvLyBjb25zdHJ1Y3RvciAtIHN0b3JlcyBpbml0aWFsIGRhaWx5IGxpbWl0IGFuZCByZWNvcmRzIHRoZSBwcmVzZW50IGRheSdzIGluZGV4LgogICAgZnVuY3Rpb24gZGF5bGltaXQodWludCBfbGltaXQpIHsKICAgICAgICBtX2RhaWx5TGltaXQgPSBfbGltaXQ7CiAgICAgICAgbV9sYXN0RGF5ID0gdG9kYXkoKTsKICAgIH0KICAgIC8vIChyZSlzZXRzIHRoZSBkYWlseSBsaW1pdC4gbmVlZHMgbWFueSBvZiB0aGUgb3duZXJzIHRvIGNvbmZpcm0uIGRvZXNuJ3QgYWx0ZXIgdGhlIGFtb3VudCBhbHJlYWR5IHNwZW50IHRvZGF5LgogICAgZnVuY3Rpb24gc2V0RGFpbHlMaW1pdCh1aW50IF9uZXdMaW1pdCkgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsKICAgICAgICBtX2RhaWx5TGltaXQgPSBfbmV3TGltaXQ7CiAgICB9CiAgICAvLyByZXNldHMgdGhlIGFtb3VudCBhbHJlYWR5IHNwZW50IHRvZGF5LiBuZWVkcyBtYW55IG9mIHRoZSBvd25lcnMgdG8gY29uZmlybS4gCiAgICBmdW5jdGlvbiByZXNldFNwZW50VG9kYXkoKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgewogICAgICAgIG1fc3BlbnRUb2RheSA9IDA7CiAgICB9CiAgICAKICAgIC8vIElOVEVSTkFMIE1FVEhPRFMKICAgIAogICAgLy8gY2hlY2tzIHRvIHNlZSBpZiB0aGVyZSBpcyBhdCBsZWFzdCBgX3ZhbHVlYCBsZWZ0IGZyb20gdGhlIGRhaWx5IGxpbWl0IHRvZGF5LiBpZiB0aGVyZSBpcywgc3VidHJhY3RzIGl0IGFuZAogICAgLy8gcmV0dXJucyB0cnVlLiBvdGhlcndpc2UganVzdCByZXR1cm5zIGZhbHNlLgogICAgZnVuY3Rpb24gdW5kZXJMaW1pdCh1aW50IF92YWx1ZSkgaW50ZXJuYWwgb25seW93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvLyByZXNldCB0aGUgc3BlbmQgbGltaXQgaWYgd2UncmUgb24gYSBkaWZmZXJlbnQgZGF5IHRvIGxhc3QgdGltZS4KICAgICAgICBpZiAodG9kYXkoKSA+IG1fbGFzdERheSkgewogICAgICAgICAgICBtX3NwZW50VG9kYXkgPSAwOwogICAgICAgICAgICBtX2xhc3REYXkgPSB0b2RheSgpOwogICAgICAgIH0KICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgdGhlcmUncyBlbm91Z2ggbGVmdCAtIGlmIHNvLCBzdWJ0cmFjdCBhbmQgcmV0dXJuIHRydWUuCiAgICAgICAgLy8gb3ZlcmZsb3cgcHJvdGVjdGlvbiAgICAgICAgICAgICAgICAgICAgLy8gZGFpbHlMaW1pdCBjaGVjayAgCiAgICAgICAgaWYgKG1fc3BlbnRUb2RheSArIF92YWx1ZSA+PSBtX3NwZW50VG9kYXkgJiYgbV9zcGVudFRvZGF5ICsgX3ZhbHVlIDw9IG1fZGFpbHlMaW1pdCkgewogICAgICAgICAgICBtX3NwZW50VG9kYXkgKz0gX3ZhbHVlOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgLy8gZGV0ZXJtaW5lcyB0b2RheSdzIGluZGV4LgogICAgZnVuY3Rpb24gdG9kYXkoKSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsgcmV0dXJuIG5vdyAvIDEgZGF5czsgfQoKCS8vIEZJRUxEUwoKICAgIHVpbnQgcHVibGljIG1fZGFpbHlMaW1pdDsKICAgIHVpbnQgcHVibGljIG1fc3BlbnRUb2RheTsKICAgIHVpbnQgcHVibGljIG1fbGFzdERheTsKfQoKLy8gaW50ZXJmYWNlIGNvbnRyYWN0IGZvciBtdWx0aXNpZyBwcm94eSBjb250cmFjdHM7IHNlZSBiZWxvdyBmb3IgZG9jcy4KY29udHJhY3QgbXVsdGlzaWcgewoKCS8vIEVWRU5UUwoKICAgIC8vIGxvZ2dlZCBldmVudHM6CiAgICAvLyBGdW5kcyBoYXMgYXJyaXZlZCBpbnRvIHRoZSB3YWxsZXQgKHJlY29yZCBob3cgbXVjaCkuCiAgICBldmVudCBEZXBvc2l0KGFkZHJlc3MgX2Zyb20sIHVpbnQgdmFsdWUpOwogICAgLy8gU2luZ2xlIHRyYW5zYWN0aW9uIGdvaW5nIG91dCBvZiB0aGUgd2FsbGV0IChyZWNvcmQgd2hvIHNpZ25lZCBmb3IgaXQsIGhvdyBtdWNoLCBhbmQgdG8gd2hvbSBpdCdzIGdvaW5nKS4KICAgIGV2ZW50IFNpbmdsZVRyYW5zYWN0KGFkZHJlc3Mgb3duZXIsIHVpbnQgdmFsdWUsIGFkZHJlc3MgdG8sIGJ5dGVzIGRhdGEpOwogICAgLy8gTXVsdGktc2lnIHRyYW5zYWN0aW9uIGdvaW5nIG91dCBvZiB0aGUgd2FsbGV0IChyZWNvcmQgd2hvIHNpZ25lZCBmb3IgaXQgbGFzdCwgdGhlIG9wZXJhdGlvbiBoYXNoLCBob3cgbXVjaCwgYW5kIHRvIHdob20gaXQncyBnb2luZykuCiAgICBldmVudCBNdWx0aVRyYW5zYWN0KGFkZHJlc3Mgb3duZXIsIGJ5dGVzMzIgb3BlcmF0aW9uLCB1aW50IHZhbHVlLCBhZGRyZXNzIHRvLCBieXRlcyBkYXRhKTsKICAgIC8vIENvbmZpcm1hdGlvbiBzdGlsbCBuZWVkZWQgZm9yIGEgdHJhbnNhY3Rpb24uCiAgICBldmVudCBDb25maXJtYXRpb25OZWVkZWQoYnl0ZXMzMiBvcGVyYXRpb24sIGFkZHJlc3MgaW5pdGlhdG9yLCB1aW50IHZhbHVlLCBhZGRyZXNzIHRvLCBieXRlcyBkYXRhKTsKICAgIAogICAgLy8gRlVOQ1RJT05TCiAgICAKICAgIC8vIFRPRE86IGRvY3VtZW50CiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBleGVjdXRlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGV4dGVybmFsIHJldHVybnMgKGJ5dGVzMzIpOwogICAgZnVuY3Rpb24gY29uZmlybShieXRlczMyIF9oKSByZXR1cm5zIChib29sKTsKfQoKLy8gdXNhZ2U6Ci8vIGJ5dGVzMzIgaCA9IFdhbGxldCh3KS5mcm9tKG9uZU93bmVyKS5leGVjdXRlKHRvLCB2YWx1ZSwgZGF0YSk7Ci8vIFdhbGxldCh3KS5mcm9tKGFub3RoZXJPd25lcikuY29uZmlybShoKTsKY29udHJhY3QgV2FsbGV0IGlzIG11bHRpc2lnLCBtdWx0aW93bmVkLCBkYXlsaW1pdCB7CgoJLy8gVFlQRVMKCiAgICAvLyBUcmFuc2FjdGlvbiBzdHJ1Y3R1cmUgdG8gcmVtZW1iZXIgZGV0YWlscyBvZiB0cmFuc2FjdGlvbiBsZXN0IGl0IG5lZWQgYmUgc2F2ZWQgZm9yIGEgbGF0ZXIgY2FsbC4KICAgIHN0cnVjdCBUcmFuc2FjdGlvbiB7CiAgICAgICAgYWRkcmVzcyB0bzsKICAgICAgICB1aW50IHZhbHVlOwogICAgICAgIGJ5dGVzIGRhdGE7CiAgICB9CgogICAgLy8gTUVUSE9EUwoKICAgIC8vIGNvbnN0cnVjdG9yIC0ganVzdCBwYXNzIG9uIHRoZSBvd25lciBhcnJheSB0byB0aGUgbXVsdGlvd25lZCBhbmQKICAgIC8vIHRoZSBsaW1pdCB0byBkYXlsaW1pdAogICAgZnVuY3Rpb24gV2FsbGV0KGFkZHJlc3NbXSBfb3duZXJzLCB1aW50IF9yZXF1aXJlZCwgdWludCBfZGF5bGltaXQpCiAgICAgICAgICAgIG11bHRpb3duZWQoX293bmVycywgX3JlcXVpcmVkKSBkYXlsaW1pdChfZGF5bGltaXQpIHsKICAgIH0KICAgIAogICAgLy8ga2lsbHMgdGhlIGNvbnRyYWN0IHNlbmRpbmcgZXZlcnl0aGluZyB0byBgX3RvYC4KICAgIGZ1bmN0aW9uIGtpbGwoYWRkcmVzcyBfdG8pIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7CiAgICAgICAgc2VsZmRlc3RydWN0KF90byk7CiAgICB9CiAgICAKICAgIC8vIGdldHMgY2FsbGVkIHdoZW4gbm8gb3RoZXIgZnVuY3Rpb24gbWF0Y2hlcwogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICAvLyBqdXN0IGJlaW5nIHNlbnQgc29tZSBjYXNoPwogICAgICAgIGlmIChtc2cudmFsdWUgPiAwKQogICAgICAgICAgICBEZXBvc2l0KG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9CiAgICAKICAgIC8vIE91dHNpZGUtdmlzaWJsZSB0cmFuc2FjdCBlbnRyeSBwb2ludC4gRXhlY3V0ZXMgdHJhbnNhY3Rpb24gaW1tZWRpYXRlbHkgaWYgYmVsb3cgZGFpbHkgc3BlbmQgbGltaXQuCiAgICAvLyBJZiBub3QsIGdvZXMgaW50byBtdWx0aXNpZyBwcm9jZXNzLiBXZSBwcm92aWRlIGEgaGFzaCBvbiByZXR1cm4gdG8gYWxsb3cgdGhlIHNlbmRlciB0byBwcm92aWRlCiAgICAvLyBzaG9ydGN1dHMgZm9yIHRoZSBvdGhlciBjb25maXJtYXRpb25zIChhbGxvd2luZyB0aGVtIHRvIGF2b2lkIHJlcGxpY2F0aW5nIHRoZSBfdG8sIF92YWx1ZQogICAgLy8gYW5kIF9kYXRhIGFyZ3VtZW50cykuIFRoZXkgc3RpbGwgZ2V0IHRoZSBvcHRpb24gb2YgdXNpbmcgdGhlbSBpZiB0aGV5IHdhbnQsIGFueXdheXMuCiAgICBmdW5jdGlvbiBleGVjdXRlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGV4dGVybmFsIG9ubHlvd25lciByZXR1cm5zIChieXRlczMyIF9yKSB7CiAgICAgICAgLy8gZmlyc3QsIHRha2UgdGhlIG9wcG9ydHVuaXR5IHRvIGNoZWNrIHRoYXQgd2UncmUgdW5kZXIgdGhlIGRhaWx5IGxpbWl0LgogICAgICAgIGlmICh1bmRlckxpbWl0KF92YWx1ZSkpIHsKICAgICAgICAgICAgU2luZ2xlVHJhbnNhY3QobXNnLnNlbmRlciwgX3ZhbHVlLCBfdG8sIF9kYXRhKTsKICAgICAgICAgICAgLy8geWVzIC0ganVzdCBleGVjdXRlIHRoZSBjYWxsLgogICAgICAgICAgICByZXF1aXJlKF90by5jYWxsLnZhbHVlKF92YWx1ZSkoX2RhdGEpKTsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIC8vIGRldGVybWluZSBvdXIgb3BlcmF0aW9uIGhhc2guCiAgICAgICAgX3IgPSBzaGEzKG1zZy5kYXRhLCBibG9jay5udW1iZXIpOwogICAgICAgIGlmICghY29uZmlybShfcikgJiYgbV90eHNbX3JdLnRvID09IDApIHsKICAgICAgICAgICAgbV90eHNbX3JdLnRvID0gX3RvOwogICAgICAgICAgICBtX3R4c1tfcl0udmFsdWUgPSBfdmFsdWU7CiAgICAgICAgICAgIG1fdHhzW19yXS5kYXRhID0gX2RhdGE7CiAgICAgICAgICAgIENvbmZpcm1hdGlvbk5lZWRlZChfciwgbXNnLnNlbmRlciwgX3ZhbHVlLCBfdG8sIF9kYXRhKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vIGNvbmZpcm0gYSB0cmFuc2FjdGlvbiB0aHJvdWdoIGp1c3QgdGhlIGhhc2guIHdlIHVzZSB0aGUgcHJldmlvdXMgdHJhbnNhY3Rpb25zIG1hcCwgbV90eHMsIGluIG9yZGVyCiAgICAvLyB0byBkZXRlcm1pbmUgdGhlIGJvZHkgb2YgdGhlIHRyYW5zYWN0aW9uIGZyb20gdGhlIGhhc2ggcHJvdmlkZWQuCiAgICBmdW5jdGlvbiBjb25maXJtKGJ5dGVzMzIgX2gpIG9ubHltYW55b3duZXJzKF9oKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKG1fdHhzW19oXS50byAhPSAwKSB7CiAgICAgICAgICAgIHJlcXVpcmUobV90eHNbX2hdLnRvLmNhbGwudmFsdWUobV90eHNbX2hdLnZhbHVlKShtX3R4c1tfaF0uZGF0YSkpOwogICAgICAgICAgICBNdWx0aVRyYW5zYWN0KG1zZy5zZW5kZXIsIF9oLCBtX3R4c1tfaF0udmFsdWUsIG1fdHhzW19oXS50bywgbV90eHNbX2hdLmRhdGEpOwogICAgICAgICAgICBkZWxldGUgbV90eHNbX2hdOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vIElOVEVSTkFMIE1FVEhPRFMKICAgIAogICAgZnVuY3Rpb24gY2xlYXJQZW5kaW5nKCkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgbGVuZ3RoID0gbV9wZW5kaW5nSW5kZXgubGVuZ3RoOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKQogICAgICAgICAgICBkZWxldGUgbV90eHNbbV9wZW5kaW5nSW5kZXhbaV1dOwogICAgICAgIHN1cGVyLmNsZWFyUGVuZGluZygpOwogICAgfQoKCS8vIEZJRUxEUwoKICAgIC8vIHBlbmRpbmcgdHJhbnNhY3Rpb25zIHdlIGhhdmUgYXQgcHJlc2VudC4KICAgIG1hcHBpbmcgKGJ5dGVzMzIgPT4gVHJhbnNhY3Rpb24pIG1fdHhzOwp9'.
	

]
