Class {
	#name : #SRT29c4bf3b662b1a57e841f27c161e27f61da63d69,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT29c4bf3b662b1a57e841f27c161e27f61da63d69 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovLyBXb2xmIENyeXB0byBwb29saW5nIGNvbnRyYWN0IGZvciBIeWJyaWRCbG9jawovLyB3cml0dGVuIGJ5IEBpYW1kZWZpbml0ZWx5YWh1bWFuCgoKbGlicmFyeSBTYWZlTWF0aCB7CiAgICAKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgRVJDMjAgewogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7fQogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQp9Cgpjb250cmFjdCBQcmVzYWxlUG9vbCB7CgogIC8vIFNhZmVNYXRoIGlzIGEgbGlicmFyeSB0byBlbnN1cmUgdGhhdCBtYXRoIG9wZXJhdGlvbnMgZG8gbm90IGhhdmUgb3ZlcmZsb3cgZXJyb3JzCiAgLy8gaHR0cHM6Ly96ZXBwZWxpbi1zb2xpZGl0eS5yZWFkdGhlZG9jcy5pby9lbi9sYXRlc3Qvc2FmZW1hdGguaHRtbAogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogIAogIC8vIFRoZSBjb250cmFjdCBoYXMgMyBzdGFnZXM6CiAgLy8gMSAtIFRoZSBpbml0aWFsIHN0YXRlLiBDb250cmlidXRvcnMgY2FuIGRlcG9zaXQgb3Igd2l0aGRyYXcgZXRoIHRvIHRoZSBjb250cmFjdC4KICAvLyAyIC0gVGhlIG93bmVyIGhhcyBjbG9zZWQgdGhlIGNvbnRyYWN0IGZvciBmdXJ0aGVyIGRlcG9zaXRzLiBDb250cmlidXRpbmcgYWRkcmVzc2VzIGNhbiBzdGlsbCB3aXRoZHJhdyBldGggZnJvbSB0aGUgY29udHJhY3QuCiAgLy8gMyAtIFRoZSBldGggaXMgc2VudCBmcm9tIHRoZSBjb250cmFjdCB0byB0aGUgcmVjZWl2ZXIuIFVudXNlZCBldGggY2FuIGJlIGNsYWltZWQgYnkgY29udHJpYnV0b3JzIGltbWVkaWF0ZWx5LgogIC8vICAgICBPbmNlIHRva2VucyBhcmUgc2VudCB0byB0aGUgY29udHJhY3QsIHRoZSBvd25lciBlbmFibGVzIHdpdGhkcmF3YWxzIGFuZCBjb250cmlidXRvcnMgY2FuIHdpdGhkcmF3IHRoZWlyIHRva2Vucy4KICB1aW50OCBwdWJsaWMgY29udHJhY3RTdGFnZSA9IDE7CiAgCiAgLy8gVGhlc2UgdmFyaWFibGVzIGFyZSBzZXQgYXQgdGhlIHRpbWUgb2YgY29udHJhY3QgY3JlYXRpb24KICAvLyB0aGUgYWRkcmVzcyB0aGF0IGNyZWF0ZXMgdGhlIGNvbnRyYWN0CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgLy8gdGhlIG1pbmltdW0gZXRoIGFtb3VudCAoaW4gd2VpKSB0aGF0IGNhbiBiZSBzZW50IGJ5IGEgY29udHJpYnV0aW5nIGFkZHJlc3MKICB1aW50IGNvbnN0YW50IHB1YmxpYyBjb250cmlidXRpb25NaW4gPSAxMDAwMDAwMDAwMDAwMDAwMDA7CiAgLy8gdGhlIG1heGltdW0gZXRoIGFtb3VudCAoaW4gd2VpKSB0aGF0IGNhbiBiZSBoZWxkIGJ5IHRoZSBjb250cmFjdAogIHVpbnQgcHVibGljIG1heENvbnRyYWN0QmFsYW5jZTsKICAvLyB0aGUgJSBvZiB0b2tlbnMga2VwdCBieSB0aGUgY29udHJhY3Qgb3duZXIKICB1aW50IHB1YmxpYyBmZWVQY3Q7CiAgLy8gdGhlIGFkZHJlc3MgdGhhdCB0aGUgcG9vbCB3aWxsIGJlIHBhaWQgb3V0IHRvCiAgYWRkcmVzcyBwdWJsaWMgcmVjZWl2ZXJBZGRyZXNzOwogIAogIC8vIFRoZXNlIHZhcmlhYmxlcyBhcmUgYWxsIGluaXRpYWxseSBibGFuayBhbmQgYXJlIHNldCBhdCBzb21lIHBvaW50IGR1cmluZyB0aGUgY29udHJhY3QKICAvLyB0aGUgYW1vdW50IG9mIGV0aCAoaW4gd2VpKSBwcmVzZW50IGluIHRoZSBjb250cmFjdCB3aGVuIGl0IHdhcyBzdWJtaXR0ZWQKICB1aW50IHB1YmxpYyBmaW5hbEJhbGFuY2U7CiAgLy8gYW4gYXJyYXkgY29udGFpbmluZyBldGggYW1vdW50cyB0byBiZSByZWZ1bmRlZCBpbiBzdGFnZSAzCiAgdWludFtdIHB1YmxpYyBldGhSZWZ1bmRBbW91bnQ7CiAgLy8gdGhlIGRlZmF1bHQgdG9rZW4gY29udHJhY3QgdG8gYmUgdXNlZCBmb3Igd2l0aGRyYXdpbmcgdG9rZW5zIGluIHN0YWdlIDMKICBhZGRyZXNzIHB1YmxpYyBhY3RpdmVUb2tlbjsKICAKICAvLyBhIGRhdGEgc3RydWN0dXJlIGZvciBob2xkaW5nIHRoZSBjb250cmlidXRpb24gYW1vdW50LCBldGggcmVmdW5kIHN0YXR1cywgYW5kIHRva2VuIHdpdGhkcmF3YWwgc3RhdHVzIGZvciBlYWNoIGFkZHJlc3MKICBzdHJ1Y3QgQ29udHJpYnV0b3IgewogICAgdWludCBldGhSZWZ1bmQ7CiAgICB1aW50IGJhbGFuY2U7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHRva2Vuc0NsYWltZWQ7CiAgfQogIC8vIGEgbWFwcGluZyB0aGF0IGhvbGRzIHRoZSBjb250cmlidXRvciBzdHJ1Y3QgZm9yIGVhY2ggYWRkcmVzcwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gQ29udHJpYnV0b3IpIGNvbnRyaWJ1dG9yTWFwOwogIAogIC8vIGEgZGF0YSBzdHJ1Y3R1cmUgZm9yIGhvbGRpbmcgaW5mb3JtYXRpb24gcmVsYXRlZCB0byB0b2tlbiB3aXRoZHJhd2Fscy4KICBzdHJ1Y3QgVG9rZW5BbGxvY2F0aW9uIHsKICAgIEVSQzIwIHRva2VuOwogICAgdWludFtdIHBjdDsKICAgIHVpbnQgYmFsYW5jZVJlbWFpbmluZzsKICB9CiAgLy8gYSBtYXBwaW5nIHRoYXQgaG9sZHMgdGhlIHRva2VuIGFsbG9jYXRpb24gc3RydWN0IGZvciBlYWNoIHRva2VuIGFkZHJlc3MKICBtYXBwaW5nIChhZGRyZXNzID0+IFRva2VuQWxsb2NhdGlvbikgZGlzdHJpYnV0aW9uTWFwOwogIAogIAogIC8vIHRoaXMgbW9kaWZpZXIgaXMgdXNlZCBmb3IgZnVuY3Rpb25zIHRoYXQgY2FuIG9ubHkgYmUgYWNjZXNzZWQgYnkgdGhlIGNvbnRyYWN0IGNyZWF0b3IKICBtb2RpZmllciBvbmx5T3duZXIgKCkgewogICAgcmVxdWlyZSAobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KICAKICAvLyB0aGlzIG1vZGlmaWVyIGlzIHVzZWQgdG8gcHJldmVudCByZS1lbnRyYW5jeSBleHBsb2l0cyBkdXJpbmcgY29udHJhY3QgPiBjb250cmFjdCBpbnRlcmFjdGlvbgogIGJvb2wgbG9ja2VkOwogIG1vZGlmaWVyIG5vUmVlbnRyYW5jeSgpIHsKICAgIHJlcXVpcmUgKCFsb2NrZWQpOwogICAgbG9ja2VkID0gdHJ1ZTsKICAgIF87CiAgICBsb2NrZWQgPSBmYWxzZTsKICB9CiAgCiAgLy8gRXZlbnRzIHRyaWdnZXJlZCB0aHJvdWdob3V0IGNvbnRyYWN0IGV4ZWN1dGlvbgogIC8vIFRoZXNlIGNhbiBiZSB3YXRjaGVkIHZpYSBnZXRoIGZpbHRlcnMgdG8ga2VlcCB1cC10by1kYXRlIHdpdGggdGhlIGNvbnRyYWN0CiAgZXZlbnQgQ29udHJpYnV0b3JCYWxhbmNlQ2hhbmdlZCAoYWRkcmVzcyBjb250cmlidXRvciwgdWludCB0b3RhbEJhbGFuY2UpOwogIGV2ZW50IFBvb2xTdWJtaXR0ZWQgKGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgYW1vdW50KTsKICBldmVudCBXaXRoZHJhd2Fsc09wZW4gKGFkZHJlc3MgdG9rZW5BZGRyKTsKICBldmVudCBUb2tlbnNXaXRoZHJhd24gKGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgYW1vdW50KTsKICBldmVudCBFdGhSZWZ1bmRSZWNlaXZlZCAoYWRkcmVzcyBzZW5kZXIsIHVpbnQgYW1vdW50KTsKICBldmVudCBFdGhSZWZ1bmRlZCAoYWRkcmVzcyByZWNlaXZlciwgdWludCBhbW91bnQpOwogIGV2ZW50IEVSQzIyM1JlY2VpdmVkIChhZGRyZXNzIHRva2VuLCB1aW50IHZhbHVlKTsKICAgCiAgLy8gVGhlc2UgYXJlIGludGVybmFsIGZ1bmN0aW9ucyB1c2VkIGZvciBjYWxjdWxhdGluZyBmZWVzLCBldGggYW5kIHRva2VuIGFsbG9jYXRpb25zIGFzICUKICAvLyByZXR1cm5zIGEgdmFsdWUgYXMgYSAlIGFjY3VyYXRlIHRvIDIwIGRlY2ltYWwgcG9pbnRzCiAgZnVuY3Rpb24gX3RvUGN0ICh1aW50IG51bWVyYXRvciwgdWludCBkZW5vbWluYXRvciApIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIG51bWVyYXRvci5tdWwoMTAgKiogMjApIC8gZGVub21pbmF0b3I7CiAgfQogIAogIC8vIHJldHVybnMgJSBvZiBhbnkgbnVtYmVyLCB3aGVyZSAlIGdpdmVuIHdhcyBnZW5lcmF0ZWQgd2l0aCB0b1BjdAogIGZ1bmN0aW9uIF9hcHBseVBjdCAodWludCBudW1lcmF0b3IsIHVpbnQgcGN0KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiBudW1lcmF0b3IubXVsKHBjdCkgLyAoMTAgKiogMjApOwogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhdCB0aGUgdGltZSBvZiBjb250cmFjdCBjcmVhdGlvbiwKICAvLyBpdCBzZXRzIHRoZSBpbml0aWFsIHZhcmlhYmxlcyBhbmQgdGhlIGNvbnRyYWN0IG93bmVyLgogIGZ1bmN0aW9uIFByZXNhbGVQb29sKGFkZHJlc3MgcmVjZWl2ZXJBZGRyLCB1aW50IGNvbnRyYWN0TWF4SW5XZWksIHVpbnQgZmVlKSBwdWJsaWMgewogICAgcmVxdWlyZSAoZmVlIDwgMTAwKTsKICAgIHJlcXVpcmUgKHJlY2VpdmVyQWRkciAhPSAweDAwKTsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIHJlY2VpdmVyQWRkcmVzcyA9IHJlY2VpdmVyQWRkcjsKICAgIG1heENvbnRyYWN0QmFsYW5jZSA9IGNvbnRyYWN0TWF4SW5XZWk7CiAgICBmZWVQY3QgPSBfdG9QY3QoZmVlLDEwMCk7CiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW5ldmVyIGV0aCBpcyBzZW50IGludG8gdGhlIGNvbnRyYWN0LgogIC8vIFRoZSBhbW91bnQgc2VudCBpcyBhZGRlZCB0byB0aGUgYmFsYW5jZSBpbiB0aGUgQ29udHJpYnV0b3Igc3RydWN0IGFzc29jaWF0ZWQgd2l0aCB0aGUgc2VuZGluZyBhZGRyZXNzLgogIGZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKICAgIGlmIChjb250cmFjdFN0YWdlID09IDEpIHsKICAgICAgX2V0aERlcG9zaXQoKTsKICAgIH0gZWxzZSBpZiAoY29udHJhY3RTdGFnZSA9PSAzKSB7CiAgICAgIF9ldGhSZWZ1bmQoKTsKICAgIH0gZWxzZSByZXZlcnQoKTsKICB9CiAgCiAgLy8gSW50ZXJuYWwgZnVuY3Rpb24gZm9yIGhhbmRsaW5nIGV0aCBkZXBvc2l0cyBkdXJpbmcgY29udHJhY3Qgc3RhZ2Ugb25lLgogIGZ1bmN0aW9uIF9ldGhEZXBvc2l0ICgpIGludGVybmFsIHsKICAgIGFzc2VydCAoY29udHJhY3RTdGFnZSA9PSAxKTsgIAogICAgdWludCBzaXplOwogICAgYWRkcmVzcyBhZGRyID0gbXNnLnNlbmRlcjsKICAgIGFzc2VtYmx5IHsgc2l6ZSA6PSBleHRjb2Rlc2l6ZShhZGRyKSB9CiAgICByZXF1aXJlIChzaXplID09IDApOwogICAgcmVxdWlyZSAodGhpcy5iYWxhbmNlIDw9IG1heENvbnRyYWN0QmFsYW5jZSk7CiAgICB2YXIgYyA9IGNvbnRyaWJ1dG9yTWFwW21zZy5zZW5kZXJdOwogICAgdWludCBuZXdCYWxhbmNlID0gYy5iYWxhbmNlLmFkZChtc2cudmFsdWUpOwogICAgcmVxdWlyZSAobmV3QmFsYW5jZSA+PSBjb250cmlidXRpb25NaW4pOwogICAgYy5iYWxhbmNlID0gbmV3QmFsYW5jZTsKICAgIENvbnRyaWJ1dG9yQmFsYW5jZUNoYW5nZWQobXNnLnNlbmRlciwgbmV3QmFsYW5jZSk7CiAgfQogIAogIC8vIEludGVybmFsIGZ1bmN0aW9uIGZvciBoYW5kbGluZyBldGggcmVmdW5kcyBkdXJpbmcgc3RhZ2UgdGhyZWUuCiAgZnVuY3Rpb24gX2V0aFJlZnVuZCAoKSBpbnRlcm5hbCB7CiAgICBhc3NlcnQgKGNvbnRyYWN0U3RhZ2UgPT0gMyk7CiAgICByZXF1aXJlIChtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gcmVjZWl2ZXJBZGRyZXNzKTsKICAgIHJlcXVpcmUgKG1zZy52YWx1ZSA+PSBjb250cmlidXRpb25NaW4pOwogICAgZXRoUmVmdW5kQW1vdW50LnB1c2gobXNnLnZhbHVlKTsKICAgIEV0aFJlZnVuZFJlY2VpdmVkKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIHRvIHdpdGhkcmF3IGV0aCBvciB0b2tlbnMgZnJvbSB0aGUgY29udHJhY3QuIEl0IGNhbiBvbmx5IGJlIGNhbGxlZCBieSBhZGRyZXNzZXMgdGhhdCBzaG93IGEgYmFsYW5jZSBncmVhdGVyIHRoYW4gMC4KICAvLyBJZiBjYWxsZWQgZHVyaW5nIHN0YWdlcyBvbmUgb3IgdHdvLCB0aGUgZnVsbCBldGggYmFsYW5jZSBkZXBvc2l0ZWQgaW50byB0aGUgY29udHJhY3QgaXMgcmV0dXJuZWQgYW5kIHRoZSBjb250cmlidXRvcidzIGJhbGFuY2UgcmVzZXQgdG8gMC4KICAvLyBJZiBjYWxsZWQgZHVyaW5nIHN0YWdlIHRocmVlLCB0aGUgY29udHJpYnV0b3IncyB1bnVzZWQgZXRoIHdpbGwgYmUgcmV0dXJuZWQsIGFzIHdlbGwgYXMgYW55IGF2YWlsYWJsZSB0b2tlbnMuCiAgLy8gVGhlIHRva2VuIGFkZHJlc3MgbWF5IGJlIHByb3ZpZGVkIG9wdGlvbmFsbHkgdG8gd2l0aGRyYXcgdG9rZW5zIHRoYXQgYXJlIG5vdCBjdXJyZW50bHkgdGhlIGRlZmF1bHQgdG9rZW4gKGFpcmRyb3BzKS4KICBmdW5jdGlvbiB3aXRoZHJhdyAoYWRkcmVzcyB0b2tlbkFkZHIpIHB1YmxpYyB7CiAgICB2YXIgYyA9IGNvbnRyaWJ1dG9yTWFwW21zZy5zZW5kZXJdOwogICAgcmVxdWlyZSAoYy5iYWxhbmNlID4gMCk7CiAgICBpZiAoY29udHJhY3RTdGFnZSA8IDMpIHsKICAgICAgdWludCBhbW91bnRUb1RyYW5zZmVyID0gYy5iYWxhbmNlOwogICAgICBjLmJhbGFuY2UgPSAwOwogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudFRvVHJhbnNmZXIpOwogICAgICBDb250cmlidXRvckJhbGFuY2VDaGFuZ2VkKG1zZy5zZW5kZXIsIDApOwogICAgfSBlbHNlIHsKICAgICAgX3dpdGhkcmF3KG1zZy5zZW5kZXIsIHRva2VuQWRkcik7CiAgICB9ICAKICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiBhbGxvd3MgdGhlIGNvbnRyYWN0IG93bmVyIHRvIGZvcmNlIGEgd2l0aGRyYXdhbCB0byBhbnkgY29udHJpYnV0b3IuCiAgZnVuY3Rpb24gd2l0aGRyYXdGb3IgKGFkZHJlc3MgY29udHJpYnV0b3IsIGFkZHJlc3MgdG9rZW5BZGRyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUgKGNvbnRyYWN0U3RhZ2UgPT0gMyk7CiAgICByZXF1aXJlIChjb250cmlidXRvck1hcFtjb250cmlidXRvcl0uYmFsYW5jZSA+IDApOwogICAgX3dpdGhkcmF3KGNvbnRyaWJ1dG9yLCB0b2tlbkFkZHIpOwogIH0KICAKICAvLyBUaGlzIGludGVybmFsIGZ1bmN0aW9uIGhhbmRsZXMgd2l0aGRyYXdhbHMgZHVyaW5nIHN0YWdlIHRocmVlLgogIC8vIFRoZSBhc3NvY2lhdGVkIGV2ZW50cyB3aWxsIGZpcmUgdG8gbm90aWZ5IHdoZW4gYSByZWZ1bmQgb3IgdG9rZW4gYWxsb2NhdGlvbiBpcyBjbGFpbWVkLgogIGZ1bmN0aW9uIF93aXRoZHJhdyAoYWRkcmVzcyByZWNlaXZlciwgYWRkcmVzcyB0b2tlbkFkZHIpIGludGVybmFsIHsKICAgIGFzc2VydCAoY29udHJhY3RTdGFnZSA9PSAzKTsKICAgIHZhciBjID0gY29udHJpYnV0b3JNYXBbcmVjZWl2ZXJdOwogICAgaWYgKHRva2VuQWRkciA9PSAweDAwKSB7CiAgICAgIHRva2VuQWRkciA9IGFjdGl2ZVRva2VuOwogICAgfQogICAgdmFyIGQgPSBkaXN0cmlidXRpb25NYXBbdG9rZW5BZGRyXTsKICAgIHJlcXVpcmUgKCBldGhSZWZ1bmRBbW91bnQubGVuZ3RoID4gYy5ldGhSZWZ1bmQgfHwgZC5wY3QubGVuZ3RoID4gYy50b2tlbnNDbGFpbWVkW3Rva2VuQWRkcl0gKTsKICAgIGlmIChldGhSZWZ1bmRBbW91bnQubGVuZ3RoID4gYy5ldGhSZWZ1bmQpIHsKICAgICAgdWludCBwY3QgPSBfdG9QY3QoYy5iYWxhbmNlLCBmaW5hbEJhbGFuY2UpOwogICAgICB1aW50IGV0aEFtb3VudCA9IDA7CiAgICAgIGZvciAodWludCBpID0gYy5ldGhSZWZ1bmQ7IGkgPCBldGhSZWZ1bmRBbW91bnQubGVuZ3RoOyBpKyspIHsKICAgICAgICBldGhBbW91bnQgPSBldGhBbW91bnQuYWRkKF9hcHBseVBjdChldGhSZWZ1bmRBbW91bnRbaV0sIHBjdCkpOwogICAgICB9CiAgICAgIGMuZXRoUmVmdW5kID0gZXRoUmVmdW5kQW1vdW50Lmxlbmd0aDsKICAgICAgaWYgKGV0aEFtb3VudCA+IDApIHsKICAgICAgICByZWNlaXZlci50cmFuc2ZlcihldGhBbW91bnQpOwogICAgICAgIEV0aFJlZnVuZGVkKHJlY2VpdmVyLCBldGhBbW91bnQpOwogICAgICB9CiAgICB9CiAgICBpZiAoZC5wY3QubGVuZ3RoID4gYy50b2tlbnNDbGFpbWVkW3Rva2VuQWRkcl0pIHsKICAgICAgdWludCB0b2tlbkFtb3VudCA9IDA7CiAgICAgIGZvciAoaSA9IGMudG9rZW5zQ2xhaW1lZFt0b2tlbkFkZHJdOyBpIDwgZC5wY3QubGVuZ3RoOyBpKyspIHsKICAgICAgICB0b2tlbkFtb3VudCA9IHRva2VuQW1vdW50LmFkZChfYXBwbHlQY3QoYy5iYWxhbmNlLCBkLnBjdFtpXSkpOwogICAgICB9CiAgICAgIGMudG9rZW5zQ2xhaW1lZFt0b2tlbkFkZHJdID0gZC5wY3QubGVuZ3RoOwogICAgICBpZiAodG9rZW5BbW91bnQgPiAwKSB7CiAgICAgICAgcmVxdWlyZSAoZC50b2tlbi50cmFuc2ZlcihyZWNlaXZlciwgdG9rZW5BbW91bnQpKTsKICAgICAgICBkLmJhbGFuY2VSZW1haW5pbmcgPSBkLmJhbGFuY2VSZW1haW5pbmcuc3ViKHRva2VuQW1vdW50KTsKICAgICAgICBUb2tlbnNXaXRoZHJhd24ocmVjZWl2ZXIsIHRva2VuQW1vdW50KTsKICAgICAgfSAgCiAgICB9CiAgICAKICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIGR1cmluZyBzdGFnZXMgb25lIG9yIHR3byB0byBtb2RpZnkgdGhlIG1heGltdW0gYmFsYW5jZSBvZiB0aGUgY29udHJhY3QuCiAgLy8gSXQgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBvd25lci4gVGhlIGFtb3VudCBjYW5ub3QgYmUgc2V0IHRvIGxvd2VyIHRoYW4gdGhlIGN1cnJlbnQgYmFsYW5jZSBvZiB0aGUgY29udHJhY3QuCiAgZnVuY3Rpb24gbW9kaWZ5TWF4Q29udHJhY3RCYWxhbmNlICh1aW50IGFtb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlIDwgMyk7CiAgICByZXF1aXJlIChhbW91bnQgPj0gY29udHJpYnV0aW9uTWluKTsKICAgIHJlcXVpcmUgKGFtb3VudCA+PSB0aGlzLmJhbGFuY2UpOwogICAgbWF4Q29udHJhY3RCYWxhbmNlID0gYW1vdW50OwogIH0KICAKICAvLyBUaGlzIGNhbGxhYmxlIGZ1bmN0aW9uIHJldHVybnMgdGhlIHRvdGFsIHBvb2wgY2FwLCBjdXJyZW50IGJhbGFuY2UgYW5kIHJlbWFpbmluZyBiYWxhbmNlIHRvIGJlIGZpbGxlZC4KICBmdW5jdGlvbiBjaGVja1Bvb2xCYWxhbmNlICgpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQgcG9vbENhcCwgdWludCBiYWxhbmNlLCB1aW50IHJlbWFpbmluZykgewogICAgaWYgKGNvbnRyYWN0U3RhZ2UgPT0gMSkgewogICAgICByZW1haW5pbmcgPSBtYXhDb250cmFjdEJhbGFuY2Uuc3ViKHRoaXMuYmFsYW5jZSk7CiAgICB9IGVsc2UgewogICAgICByZW1haW5pbmcgPSAwOwogICAgfQogICAgcmV0dXJuIChtYXhDb250cmFjdEJhbGFuY2UsdGhpcy5iYWxhbmNlLHJlbWFpbmluZyk7CiAgfQogIAogIC8vIFRoaXMgY2FsbGFibGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgYmFsYW5jZSwgY29udHJpYnV0aW9uIGNhcCwgYW5kIHJlbWFpbmluZyBhdmFpbGFibGUgYmFsYW5jZSBvZiBhbnkgY29udHJpYnV0b3IuCiAgZnVuY3Rpb24gY2hlY2tDb250cmlidXRvckJhbGFuY2UgKGFkZHJlc3MgYWRkcikgdmlldyBwdWJsaWMgcmV0dXJucyAodWludCBiYWxhbmNlLCB1aW50IGNhcCwgdWludCByZW1haW5pbmcpIHsKICAgIHZhciBjID0gY29udHJpYnV0b3JNYXBbYWRkcl07CiAgICBpZiAoY29udHJhY3RTdGFnZSA9PSAxKSB7CiAgICAgIHJlbWFpbmluZyA9IG1heENvbnRyYWN0QmFsYW5jZS5zdWIodGhpcy5iYWxhbmNlKTsKICAgIH0gZWxzZSB7CiAgICAgIHJlbWFpbmluZyA9IDA7CiAgICB9CiAgICByZXR1cm4gKGMuYmFsYW5jZSwgbWF4Q29udHJhY3RCYWxhbmNlLCByZW1haW5pbmcpOwogIH0KICAKICAvLyBUaGlzIGNhbGxhYmxlIGZ1bmN0aW9uIHJldHVybnMgdGhlIHRva2VuIGJhbGFuY2UgdGhhdCBhIGNvbnRyaWJ1dG9yIGNhbiBjdXJyZW50bHkgY2xhaW0uCiAgZnVuY3Rpb24gY2hlY2tBdmFpbGFibGVUb2tlbnMgKGFkZHJlc3MgYWRkciwgYWRkcmVzcyB0b2tlbkFkZHIpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQgdG9rZW5BbW91bnQpIHsKICAgIHZhciBjID0gY29udHJpYnV0b3JNYXBbYWRkcl07CiAgICB2YXIgZCA9IGRpc3RyaWJ1dGlvbk1hcFt0b2tlbkFkZHJdOwogICAgZm9yICh1aW50IGkgPSBjLnRva2Vuc0NsYWltZWRbdG9rZW5BZGRyXTsgaSA8IGQucGN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgIHRva2VuQW1vdW50ID0gdG9rZW5BbW91bnQuYWRkKF9hcHBseVBjdChjLmJhbGFuY2UsIGQucGN0W2ldKSk7CiAgICB9CiAgICByZXR1cm4gdG9rZW5BbW91bnQ7CiAgfQogIAogIC8vIFRoaXMgZnVuY3Rpb24gY2xvc2VzIGZ1cnRoZXIgY29udHJpYnV0aW9ucyB0byB0aGUgY29udHJhY3QsIGFkdmFuY2luZyBpdCB0byBzdGFnZSB0d28uCiAgLy8gSXQgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBvd25lci4gIEFmdGVyIHRoaXMgY2FsbCBoYXMgYmVlbiBtYWRlLCBjb250cmlidXRpbmcgYWRkcmVzc2VzCiAgLy8gY2FuIHN0aWxsIHJlbW92ZSB0aGVpciBldGggZnJvbSB0aGUgY29udHJhY3QgYnV0IGNhbm5vdCBjb250cmlidXRlIGFueSBtb3JlLgogIGZ1bmN0aW9uIGNsb3NlQ29udHJpYnV0aW9ucyAoKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUgKGNvbnRyYWN0U3RhZ2UgPT0gMSk7CiAgICBjb250cmFjdFN0YWdlID0gMjsKICB9CiAgCiAgLy8gVGhpcyBmdW5jdGlvbiByZW9wZW5zIHRoZSBjb250cmFjdCB0byBjb250cmlidXRpb25zLCByZXR1cm5pbmcgaXQgdG8gc3RhZ2Ugb25lLgogIC8vIEl0IGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXIgZHVyaW5nIHN0YWdlIHR3by4KICBmdW5jdGlvbiByZW9wZW5Db250cmlidXRpb25zICgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZSAoY29udHJhY3RTdGFnZSA9PSAyKTsKICAgIGNvbnRyYWN0U3RhZ2UgPSAxOwogIH0KCiAgLy8gVGhpcyBmdW5jdGlvbiBzZW5kcyB0aGUgcG9vbGVkIGV0aCB0byB0aGUgcmVjZWl2aW5nIGFkZHJlc3MsIGNhbGN1bGF0ZXMgdGhlICUgb2YgdW51c2VkIGV0aCB0byBiZSByZXR1cm5lZCwKICAvLyBhbmQgYWR2YW5jZXMgdGhlIGNvbnRyYWN0IHRvIHN0YWdlIHRocmVlLiBJdCBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIGNvbnRyYWN0IG93bmVyIGR1cmluZyBzdGFnZXMgb25lIG9yIHR3by4KICAvLyBUaGUgYW1vdW50IHRvIHNlbmQgKGdpdmVuIGluIHdlaSkgbXVzdCBiZSBzcGVjaWZpZWQgZHVyaW5nIHRoZSBjYWxsLiBBcyB0aGlzIGZ1bmN0aW9uIGNhbiBvbmx5IGJlIGV4ZWN1dGVkIG9uY2UsCiAgLy8gaXQgaXMgVkVSWSBJTVBPUlRBTlQgbm90IHRvIGdldCB0aGUgYW1vdW50IHdyb25nLgogIGZ1bmN0aW9uIHN1Ym1pdFBvb2wgKHVpbnQgYW1vdW50SW5XZWkpIHB1YmxpYyBvbmx5T3duZXIgbm9SZWVudHJhbmN5IHsKICAgIHJlcXVpcmUgKGNvbnRyYWN0U3RhZ2UgPCAzKTsKICAgIHJlcXVpcmUgKGNvbnRyaWJ1dGlvbk1pbiA8PSBhbW91bnRJbldlaSAmJiBhbW91bnRJbldlaSA8PSB0aGlzLmJhbGFuY2UpOwogICAgZmluYWxCYWxhbmNlID0gdGhpcy5iYWxhbmNlOwogICAgcmVxdWlyZSAocmVjZWl2ZXJBZGRyZXNzLmNhbGwudmFsdWUoYW1vdW50SW5XZWkpLmdhcyhtc2cuZ2FzLnN1Yig1MDAwKSkoKSk7CiAgICBldGhSZWZ1bmRBbW91bnQucHVzaCh0aGlzLmJhbGFuY2UpOwogICAgY29udHJhY3RTdGFnZSA9IDM7CiAgICBQb29sU3VibWl0dGVkKHJlY2VpdmVyQWRkcmVzcywgYW1vdW50SW5XZWkpOwogIH0KICAKICAvLyBUaGlzIGZ1bmN0aW9uIG9wZW5zIHRoZSBjb250cmFjdCB1cCBmb3IgdG9rZW4gd2l0aGRyYXdhbHMuCiAgLy8gSXQgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBvd25lciBkdXJpbmcgc3RhZ2UgMy4gIFRoZSBvd25lciBzcGVjaWZpZXMgdGhlIGFkZHJlc3Mgb2YgYW4gRVJDMjAgdG9rZW4KICAvLyBjb250cmFjdCB0aGF0IHRoaXMgY29udHJhY3QgaGFzIGEgYmFsYW5jZSBpbiwgYW5kIG9wdGlvbmFsbHkgYSBib29sIHRvIHByZXZlbnQgdGhpcyB0b2tlbiBmcm9tIGJlaW5nCiAgLy8gdGhlIGRlZmF1bHQgd2l0aGRyYXdhbCAoaW4gdGhlIGV2ZW50IG9mIGFuIGFpcmRyb3AsIGZvciBleGFtcGxlKS4KICBmdW5jdGlvbiBlbmFibGVUb2tlbldpdGhkcmF3YWxzIChhZGRyZXNzIHRva2VuQWRkciwgYm9vbCBub3REZWZhdWx0KSBwdWJsaWMgb25seU93bmVyIG5vUmVlbnRyYW5jeSB7CiAgICByZXF1aXJlIChjb250cmFjdFN0YWdlID09IDMpOwogICAgaWYgKG5vdERlZmF1bHQpIHsKICAgICAgcmVxdWlyZSAoYWN0aXZlVG9rZW4gIT0gMHgwMCk7CiAgICB9IGVsc2UgewogICAgICBhY3RpdmVUb2tlbiA9IHRva2VuQWRkcjsKICAgIH0KICAgIHZhciBkID0gZGlzdHJpYnV0aW9uTWFwW3Rva2VuQWRkcl07ICAgIAogICAgaWYgKGQucGN0Lmxlbmd0aCA9PSAwKSBkLnRva2VuID0gRVJDMjAodG9rZW5BZGRyKTsKICAgIHVpbnQgYW1vdW50ID0gZC50b2tlbi5iYWxhbmNlT2YodGhpcykuc3ViKGQuYmFsYW5jZVJlbWFpbmluZyk7CiAgICByZXF1aXJlIChhbW91bnQgPiAwKTsKICAgIGlmIChmZWVQY3QgPiAwKSB7CiAgICAgIHJlcXVpcmUgKGQudG9rZW4udHJhbnNmZXIob3duZXIsX2FwcGx5UGN0KGFtb3VudCwgZmVlUGN0KSkpOwogICAgfQogICAgYW1vdW50ID0gZC50b2tlbi5iYWxhbmNlT2YodGhpcykuc3ViKGQuYmFsYW5jZVJlbWFpbmluZyk7CiAgICBkLmJhbGFuY2VSZW1haW5pbmcgPSBkLnRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgIGQucGN0LnB1c2goX3RvUGN0KGFtb3VudCwgZmluYWxCYWxhbmNlKSk7CiAgICBXaXRoZHJhd2Fsc09wZW4odG9rZW5BZGRyKTsKICB9CiAgCiAgLy8gVGhpcyBpcyBhIHN0YW5kYXJkIGZ1bmN0aW9uIHJlcXVpcmVkIGZvciBFUkMyMjMgY29tcGF0aWJpbGl0eS4KICBmdW5jdGlvbiB0b2tlbkZhbGxiYWNrIChhZGRyZXNzIGZyb20sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEpIHB1YmxpYyB7CiAgICBFUkMyMjNSZWNlaXZlZChmcm9tLCB2YWx1ZSk7CiAgfQogIAp9'.
	

]
