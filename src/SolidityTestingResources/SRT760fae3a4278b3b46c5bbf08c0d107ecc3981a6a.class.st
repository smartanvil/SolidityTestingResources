Class {
	#name : #SRT760fae3a4278b3b46c5bbf08c0d107ecc3981a6a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT760fae3a4278b3b46c5bbf08c0d107ecc3981a6a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gQWRkIGEgbnVtYmVyIHRvIGFub3RoZXIgbnVtYmVyLCBjaGVja2luZyBmb3Igb3ZlcmZsb3dzCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSAmJiBjID49IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gU3VidHJhY3QgYSBudW1iZXIgZnJvbSBhbm90aGVyIG51bWJlciwgY2hlY2tpbmcgZm9yIHVuZGVyZmxvd3MKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgkKfQoKY29udHJhY3QgT3duZWQgewoKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIE93bmVkKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRPd25lcihhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgICB9Cn0KCmludGVyZmFjZSB0b2tlbiB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgOwoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKfQoKY29udHJhY3QgQUxDQ3Jvd2RzYWxlIGlzIE93bmVkewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCQoJc3RydWN0IENvbnRyaWJ1dG9yRGF0YXsKCQlib29sIGlzQWN0aXZlOwoJCWJvb2wgaXNUb2tlbkRpc3RyaWJ1dGVkOwoJCXVpbnQgY29udHJpYnV0aW9uQW1vdW50OwkvLyBFVEggY29udHJpYnV0aW9uCgkJdWludCB0b2tlbnNBbW91bnQ7CQkJLy8gRXhjaGFuZ2VkIEFMQyBhbW91bnQKCX0KCQoJbWFwcGluZyhhZGRyZXNzID0+IENvbnRyaWJ1dG9yRGF0YSkgcHVibGljIGNvbnRyaWJ1dG9yTGlzdDsKCW1hcHBpbmcodWludCA9PiBhZGRyZXNzKSBjb250cmlidXRvckluZGV4ZXM7Cgl1aW50IG5leHRDb250cmlidXRvckluZGV4OwoJdWludCBjb250cmlidXRvckNvdW50OwogICAgCiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeTsKICAgIHVpbnQgcHVibGljIGZ1bmRpbmdMaW1pdDsKICAgIHVpbnQgcHVibGljIGFtb3VudFJhaXNlZDsKCXVpbnQgcHVibGljIHJlbWFpbkFtb3VudDsKICAgIHVpbnQgcHVibGljIGRlYWRsaW5lOwogICAgdWludCBwdWJsaWMgZXhjaGFuZ2VUb2tlblJhdGU7CiAgICB0b2tlbiBwdWJsaWMgdG9rZW5SZXdhcmQ7Cgl1aW50MjU2IHB1YmxpYyB0b2tlbkJhbGFuY2U7CiAgICBib29sIHB1YmxpYyBjcm93ZHNhbGVDbG9zZWQgPSBmYWxzZTsKICAgIGJvb2wgcHVibGljIGlzQUxDRGlzdHJpYnV0ZWQgPSBmYWxzZTsKICAgIAoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gVHJhbmNoZSAxIGNyb3dkc2FsZSBzdGFydCBkYXRlIGFuZCBlbmQgZGF0ZQogICAgLy8gU3RhcnQgLSAyM2gwMAogICAgLy8gVGllcjEgIC0gMjNoMDUKICAgIC8vIFRpZXIyICAtIDIzaDEwCiAgICAvLyBUaWVyMyAgLSAyM2gxNQogICAgLy8gRW5kIC0gMjNoMjAKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgU1RBUlRfVElNRSA9IDE1MTE1NjQ0MDA7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBTRUNPTkRfVElFUl9TQUxFX1NUQVJUX1RJTUUgPSAxNTExNTY0NzAwOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVEhJUkRfVElFUl9TQUxFX1NUQVJUX1RJTUUgPSAxNTExNTY1MDAwOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgRk9VUlRIX1RJRVJfU0FMRV9TVEFSVF9USU1FID0gMTUxMTU2NTMwMDsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEVORF9USU1FID0gMTUxMTU2NTYwMDsKCQoJCiAgICAKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gY3Jvd2RzYWxlIGV4Y2hhbmdlIHJhdGUKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgdWludCBwdWJsaWMgU1RBUlRfUkFURSA9IDE1MDAwOwogICAgdWludCBwdWJsaWMgU0VDT05EX1RJRVJfUkFURSA9IDE0MDAwOwogICAgdWludCBwdWJsaWMgVEhJUkRfVElFUl9SQVRFID0gMTI1MDA7CiAgICB1aW50IHB1YmxpYyBGT1VSVEhfUkFURSA9IDEwMDAwOwogICAgCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBGdW5kaW5nIEdvYWwKICAgIC8vICAgIC0gSEFSRCBDQVAgOiAzMzAwMCBFVEgKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgRlVORElOR19FVEhfSEFSRF9DQVAgPSAxMDAwMDAwMDAwMDAwMDAwMDsgLy8wLjAxRVRICiAgICAKICAgIC8vIElRVCB0b2tlbiBkZWNpbWFscwogICAgdWludDggcHVibGljIGNvbnN0YW50IEFMQ19ERUNJTUFMUyA9IDg7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBBTENfREVDSU1BTFNGQUNUT1IgPSAxMCoqdWludChBTENfREVDSU1BTFMpOwogICAgCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBBTENfRlVOREFUSU9OX0FERFJFU1MgPSAweDU1QmVBMUEwMzM1QThFYTU2NTcyYjhFNjZmMTcxOTYyOTBDYTY0Njc7CiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBBTENfQ09OVFJBQ1RfQUREUkVTUyA9IDB4QjE1RUY0MTliQTBEZDFmNTc0OGM3YzYwZTE3RmU4OGU2ZTc5NDk1MDsKCiAgICBldmVudCBHb2FsUmVhY2hlZChhZGRyZXNzIHJhaXNpbmdBZGRyZXNzLCB1aW50IGFtb3VudFJhaXNlZCk7CglldmVudCBMaW1pdFJlYWNoZWQoYWRkcmVzcyByYWlzaW5nQWRkcmVzcywgdWludCBhbW91bnRSYWlzZWQpOwogICAgZXZlbnQgRnVuZFRyYW5zZmVyKGFkZHJlc3MgYmFja2VyLCB1aW50IGFtb3VudCwgYm9vbCBpc0NvbnRyaWJ1dGlvbik7CglldmVudCBXaXRoZHJhd0ZhaWxlZChhZGRyZXNzIHJhaXNpbmdBZGRyZXNzLCB1aW50IGFtb3VudCwgYm9vbCBpc0NvbnRyaWJ1dGlvbik7CglldmVudCBGdW5kUmV0dXJuKGFkZHJlc3MgYmFja2VyLCB1aW50IGFtb3VudCwgYm9vbCBpc0NvbnRyaWJ1dGlvbik7CgogICAgLyoqCiAgICAgKiBDb25zdHJjdG9yIGZ1bmN0aW9uCiAgICAgKgogICAgICogU2V0dXAgdGhlIG93bmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIEFMQ0Nyb3dkc2FsZSgKICAgICkgcHVibGljIHsKICAgICAgICBiZW5lZmljaWFyeSA9IEFMQ19GVU5EQVRJT05fQUREUkVTUzsKICAgICAgICBmdW5kaW5nTGltaXQgPSBGVU5ESU5HX0VUSF9IQVJEX0NBUDsgIC8vIEZ1bmRpbmcgbGltaXQgMC4wMUVUSAoJCQogICAgICAgIGRlYWRsaW5lID0gRU5EX1RJTUU7ICAvLyAyMDE3LTExLTI1IDEyOjAwOjAwIFVUQwogICAgICAgIGV4Y2hhbmdlVG9rZW5SYXRlID0gRk9VUlRIX1JBVEUgKiBBTENfREVDSU1BTFNGQUNUT1I7CiAgICAgICAgdG9rZW5SZXdhcmQgPSB0b2tlbihBTENfQ09OVFJBQ1RfQUREUkVTUyk7CgkJY29udHJpYnV0b3JDb3VudCA9IDA7CiAgICB9CgogICAgLyoqCiAgICAgKiBGYWxsYmFjayBmdW5jdGlvbgogICAgICoKICAgICAqIFRoZSBmdW5jdGlvbiB3aXRob3V0IG5hbWUgaXMgdGhlIGRlZmF1bHQgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbmV2ZXIgYW55b25lIHNlbmRzIGZ1bmRzIHRvIGEgY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewoJCQogICAgICAgIHJlcXVpcmUoIWNyb3dkc2FsZUNsb3NlZCk7CiAgICAgICAgcmVxdWlyZShub3cgPj0gU1RBUlRfVElNRSAmJiBub3cgPCBFTkRfVElNRSk7CiAgICAgICAgCgkJcHJvY2Vzc1RyYW5zYWN0aW9uKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9CgkKCS8qKgoJICogUHJvY2VzcyB0cmFuc2FjdGlvbgoJICovCglmdW5jdGlvbiBwcm9jZXNzVHJhbnNhY3Rpb24oYWRkcmVzcyBfY29udHJpYnV0b3IsIHVpbnQgX2Ftb3VudCkgaW50ZXJuYWx7CQoJCXVpbnQgY29udHJpYnV0aW9uRXRoQW1vdW50ID0gX2Ftb3VudDsKCQkJCiAgICAgICAgYW1vdW50UmFpc2VkICs9IGNvbnRyaWJ1dGlvbkV0aEFtb3VudDsgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBuZXdseSByZWNlaXZlZCBFVEgKCQlyZW1haW5BbW91bnQgKz0gY29udHJpYnV0aW9uRXRoQW1vdW50OwogICAgICAgIAoJCS8vIGNhbGN1YWx0ZSBleGNoYW5nZWQgdG9rZW4gYmFzZWQgb24gZXhjaGFuZ2UgcmF0ZQogICAgICAgIGlmIChub3cgPj0gU1RBUlRfVElNRSAmJiBub3cgPCBTRUNPTkRfVElFUl9TQUxFX1NUQVJUX1RJTUUpewoJCQlleGNoYW5nZVRva2VuUmF0ZSA9IFNUQVJUX1JBVEUgKiBBTENfREVDSU1BTFNGQUNUT1I7CiAgICAgICAgfQogICAgICAgIGlmIChub3cgPj0gU0VDT05EX1RJRVJfU0FMRV9TVEFSVF9USU1FICYmIG5vdyA8IFRISVJEX1RJRVJfU0FMRV9TVEFSVF9USU1FKXsKICAgICAgICAgICAgZXhjaGFuZ2VUb2tlblJhdGUgPSBTRUNPTkRfVElFUl9SQVRFICogQUxDX0RFQ0lNQUxTRkFDVE9SOwogICAgICAgIH0KICAgICAgICBpZiAobm93ID49IFRISVJEX1RJRVJfU0FMRV9TVEFSVF9USU1FICYmIG5vdyA8IEZPVVJUSF9USUVSX1NBTEVfU1RBUlRfVElNRSl7CiAgICAgICAgICAgIGV4Y2hhbmdlVG9rZW5SYXRlID0gVEhJUkRfVElFUl9SQVRFICogQUxDX0RFQ0lNQUxTRkFDVE9SOwogICAgICAgIH0KICAgICAgICBpZiAobm93ID49IEZPVVJUSF9USUVSX1NBTEVfU1RBUlRfVElNRSAmJiBub3cgPCBFTkRfVElNRSl7CiAgICAgICAgICAgIGV4Y2hhbmdlVG9rZW5SYXRlID0gRk9VUlRIX1JBVEUgKiBBTENfREVDSU1BTFNGQUNUT1I7CiAgICAgICAgfQogICAgICAgIHVpbnQgYW1vdW50SXF0VG9rZW4gPSBfYW1vdW50ICogZXhjaGFuZ2VUb2tlblJhdGUgLyAxIGV0aGVyOwoJCQoJCWlmIChjb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS5pc0FjdGl2ZSA9PSBmYWxzZSl7ICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY29udHJpYnV0b3IgaGFzIGFscmVhZHkgY29udHJpYnV0ZWQKCQkJY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0uaXNBY3RpdmUgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgaGlzIGFjdGl2aXR5IHRvIHRydWUKCQkJY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0uY29udHJpYnV0aW9uQW1vdW50ID0gY29udHJpYnV0aW9uRXRoQW1vdW50OyAgICAvLyBTZXQgaGlzIGNvbnRyaWJ1dGlvbgoJCQljb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS50b2tlbnNBbW91bnQgPSBhbW91bnRJcXRUb2tlbjsKCQkJY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0uaXNUb2tlbkRpc3RyaWJ1dGVkID0gZmFsc2U7CgkJCWNvbnRyaWJ1dG9ySW5kZXhlc1tuZXh0Q29udHJpYnV0b3JJbmRleF0gPSBfY29udHJpYnV0b3I7ICAgICAgICAgICAgICAgICAgLy8gU2V0IGNvbnRyaWJ1dG9ycyBpbmRleAoJCQluZXh0Q29udHJpYnV0b3JJbmRleCsrOwoJCQljb250cmlidXRvckNvdW50Kys7CgkJfQoJCWVsc2V7CgkJCWNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudCArPSBjb250cmlidXRpb25FdGhBbW91bnQ7ICAgLy8gQWRkIGNvbnRyaWJ1dGlvbiBhbW91bnQgdG8gZXhpc3RpbmcgY29udHJpYnV0b3IKCQkJY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0udG9rZW5zQW1vdW50ICs9IGFtb3VudElxdFRva2VuOyAgICAgICAgICAgICAvLyBsb2cgdG9rZW4gYW1vdW50YAoJCX0KCQkKICAgICAgICBGdW5kVHJhbnNmZXIobXNnLnNlbmRlciwgY29udHJpYnV0aW9uRXRoQW1vdW50LCB0cnVlKTsKCQkKCQlpZiAoYW1vdW50UmFpc2VkID49IGZ1bmRpbmdMaW1pdCl7CgkJCS8vIGNsb3NlIGNyb3dkc2FsZSBiZWNhdXNlIHRoZSBjcm93ZHNhbGUgbGltaXQgaXMgcmVhY2hlZAoJCQljcm93ZHNhbGVDbG9zZWQgPSB0cnVlOwoJCX0JCQoJCQoJfQoKICAgIG1vZGlmaWVyIGFmdGVyRGVhZGxpbmUoKSB7IGlmIChub3cgPj0gZGVhZGxpbmUpIF87IH0JCgltb2RpZmllciBhZnRlckNyb3dkc2FsZUNsb3NlZCgpIHsgaWYgKGNyb3dkc2FsZUNsb3NlZCA9PSB0cnVlIHx8IG5vdyA+PSBkZWFkbGluZSkgXzsgfQoJCgkKCS8qKgogICAgICogY2xvc2UgQ3Jvd2RzYWxlCiAgICAgKgogICAgICovCglmdW5jdGlvbiBjbG9zZUNyb3dkU2FsZSgpIHB1YmxpYyB7CgkJcmVxdWlyZShiZW5lZmljaWFyeSA9PSBtc2cuc2VuZGVyKTsKCQlpZiAoIGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpIHsKCQkJY3Jvd2RzYWxlQ2xvc2VkID0gdHJ1ZTsKCQl9Cgl9CgkKICAgIC8qKgogICAgICogQ2hlY2sgdG9rZW4gYmFsYW5jZQogICAgICoKICAgICAqLwoJZnVuY3Rpb24gY2hlY2tUb2tlbkJhbGFuY2UoKSBwdWJsaWMgewoJCWlmICggYmVuZWZpY2lhcnkgPT0gbXNnLnNlbmRlcikgewoJCQkvL2NoZWNrIGN1cnJlbnQgdG9rZW4gYmFsYW5jZQoJCQl0b2tlbkJhbGFuY2UgPSB0b2tlblJld2FyZC5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7CgkJfQoJfQoJCiAgICAvKioKICAgICAqIFdpdGhkcmF3IHRoZSBhbGwgZnVuZHMKICAgICAqCiAgICAgKiBDaGVja3MgdG8gc2VlIGlmIGdvYWwgb3IgdGltZSBsaW1pdCBoYXMgYmVlbiByZWFjaGVkLCBhbmQgaWYgc28sIGFuZCB0aGUgZnVuZGluZyBnb2FsIHdhcyByZWFjaGVkLAogICAgICogc2VuZHMgdGhlIGVudGlyZSBhbW91bnQgdG8gdGhlIGJlbmVmaWNpYXJ5LiAKICAgICAqLwogICAgZnVuY3Rpb24gc2FmZVdpdGhkcmF3YWxBbGwoKSBwdWJsaWMgewogICAgICAgIGlmICggYmVuZWZpY2lhcnkgPT0gbXNnLnNlbmRlcikgewogICAgICAgICAgICBpZiAoYmVuZWZpY2lhcnkuc2VuZChhbW91bnRSYWlzZWQpKSB7CiAgICAgICAgICAgICAgICBGdW5kVHJhbnNmZXIoYmVuZWZpY2lhcnksIGFtb3VudFJhaXNlZCwgZmFsc2UpOwoJCQkJcmVtYWluQW1vdW50ID0gcmVtYWluQW1vdW50IC0gYW1vdW50UmFpc2VkOwogICAgICAgICAgICB9IGVsc2UgewoJCQkJV2l0aGRyYXdGYWlsZWQoYmVuZWZpY2lhcnksIGFtb3VudFJhaXNlZCwgZmFsc2UpOwoJCQkJLy9JZiB3ZSBmYWlsIHRvIHNlbmQgdGhlIGZ1bmRzIHRvIGJlbmVmaWNpYXJ5CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgkKCS8qKgogICAgICogV2l0aGRyYXcgdGhlIGZ1bmRzCiAgICAgKgogICAgICogQ2hlY2tzIHRvIHNlZSBpZiBnb2FsIG9yIHRpbWUgbGltaXQgaGFzIGJlZW4gcmVhY2hlZCwgYW5kIGlmIHNvLCBhbmQgdGhlIGZ1bmRpbmcgZ29hbCB3YXMgcmVhY2hlZCwKICAgICAqIHNlbmRzIHRoZSBlbnRpcmUgYW1vdW50IHRvIHRoZSBiZW5lZmljaWFyeS4gCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNhZmVXaXRoZHJhd2FsQW1vdW50KHVpbnQyNTYgd2l0aGRyYXdBbW91bnQpIHB1YmxpYyB7CiAgICAgICAgaWYgKGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpIHsKICAgICAgICAgICAgaWYgKGJlbmVmaWNpYXJ5LnNlbmQod2l0aGRyYXdBbW91bnQpKSB7CiAgICAgICAgICAgICAgICBGdW5kVHJhbnNmZXIoYmVuZWZpY2lhcnksIHdpdGhkcmF3QW1vdW50LCBmYWxzZSk7CgkJCQlyZW1haW5BbW91bnQgPSByZW1haW5BbW91bnQgLSB3aXRoZHJhd0Ftb3VudDsKICAgICAgICAgICAgfSBlbHNlIHsKCQkJCVdpdGhkcmF3RmFpbGVkKGJlbmVmaWNpYXJ5LCB3aXRoZHJhd0Ftb3VudCwgZmFsc2UpOwoJCQkJLy9JZiB3ZSBmYWlsIHRvIHNlbmQgdGhlIGZ1bmRzIHRvIGJlbmVmaWNpYXJ5CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgkKCS8qKgoJICogV2l0aGRyYXcgQUxDIAogICAgICogCgkgKiBJZiB0aGVyZSBhcmUgc29tZSByZW1haW5pbmcgQUxDIGluIHRoZSBjb250cmFjdCAKCSAqIGFmdGVyIGFsbCB0b2tlbiBhcmUgZGlzdHJpYnV0ZWQgdGhlIGNvbnRyaWJ1dG9yLAoJICogdGhlIGJlbmVmaWNpYXJ5IGNhbiB3aXRoZHJhdyB0aGUgQUxDIGluIHRoZSBjb250cmFjdAogICAgICoKICAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXdBTEModWludDI1NiB0b2tlbkFtb3VudCkgcHVibGljIGFmdGVyQ3Jvd2RzYWxlQ2xvc2VkIHsKCQlyZXF1aXJlKGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpOwogICAgICAgIGlmIChpc0FMQ0Rpc3RyaWJ1dGVkICYmIGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpIHsKICAgICAgICAgICAgdG9rZW5SZXdhcmQudHJhbnNmZXIoYmVuZWZpY2lhcnksIHRva2VuQW1vdW50KTsKCQkJLy8gdXBkYXRlIHRva2VuIGJhbGFuY2UKCQkJdG9rZW5CYWxhbmNlID0gdG9rZW5SZXdhcmQuYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOwogICAgICAgIH0KICAgIH0KCQoKCS8qKgogICAgICogRGlzdHJpYnV0ZSB0b2tlbgogICAgICoKICAgICAqIENoZWNrcyB0byBzZWUgaWYgZ29hbCBvciB0aW1lIGxpbWl0IGhhcyBiZWVuIHJlYWNoZWQsIGFuZCBpZiBzbywgYW5kIHRoZSBmdW5kaW5nIGdvYWwgd2FzIHJlYWNoZWQsCiAgICAgKiBkaXN0cmlidXRlIHRva2VuIHRvIGNvbnRyaWJ1dG9yLiAKICAgICAqLwoJZnVuY3Rpb24gZGlzdHJpYnV0ZUFMQ1Rva2VuKCkgcHVibGljIHsKCQlpZiAoYmVuZWZpY2lhcnkgPT0gbXNnLnNlbmRlcikgeyAgLy8gb25seSBBTENfRlVOREFUSU9OX0FERFJFU1MgY2FuIGRpc3RyaWJ1dGUgdGhlIEFMQwoJCQlhZGRyZXNzIGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3M7CgkJCWZvciAodWludCBpbmRleCA9IDA7IGluZGV4IDwgY29udHJpYnV0b3JDb3VudDsgaW5kZXgrKyl7CgkJCQljdXJyZW50UGFydGljaXBhbnRBZGRyZXNzID0gY29udHJpYnV0b3JJbmRleGVzW2luZGV4XTsgCgkJCQkKCQkJCXVpbnQgYW1vdW50QWxjVG9rZW4gPSBjb250cmlidXRvckxpc3RbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10udG9rZW5zQW1vdW50OwoJCQkJaWYgKGZhbHNlID09IGNvbnRyaWJ1dG9yTGlzdFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXS5pc1Rva2VuRGlzdHJpYnV0ZWQpewoJCQkJCWJvb2wgaXNTdWNjZXNzID0gdG9rZW5SZXdhcmQudHJhbnNmZXIoY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcywgYW1vdW50QWxjVG9rZW4pOwoJCQkJCWlmIChpc1N1Y2Nlc3MpewoJCQkJCQljb250cmlidXRvckxpc3RbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10uaXNUb2tlbkRpc3RyaWJ1dGVkID0gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJCgkJCS8vIGNoZWNrIGlmIGFsbCBBTEMgYXJlIGRpc3RyaWJ1dGVkCgkJCWNoZWNrSWZBbGxBTENEaXN0cmlidXRlZCgpOwoJCQkvLyBnZXQgbGF0ZXN0IHRva2VuIGJhbGFuY2UKCQkJdG9rZW5CYWxhbmNlID0gdG9rZW5SZXdhcmQuYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOwoJCX0KCX0KCQoJLyoqCiAgICAgKiBEaXN0cmlidXRlIHRva2VuIGJ5IGJhdGNoCiAgICAgKgogICAgICogQ2hlY2tzIHRvIHNlZSBpZiBnb2FsIG9yIHRpbWUgbGltaXQgaGFzIGJlZW4gcmVhY2hlZCwgYW5kIGlmIHNvLCBhbmQgdGhlIGZ1bmRpbmcgZ29hbCB3YXMgcmVhY2hlZCwKICAgICAqIGRpc3RyaWJ1dGUgdG9rZW4gdG8gY29udHJpYnV0b3IuIAogICAgICovCglmdW5jdGlvbiBkaXN0cmlidXRlQUxDVG9rZW5CYXRjaCh1aW50IGJhdGNoVXNlckNvdW50KSBwdWJsaWMgewoJCWlmIChiZW5lZmljaWFyeSA9PSBtc2cuc2VuZGVyKSB7ICAvLyBvbmx5IEFMQ19GVU5EQVRJT05fQUREUkVTUyBjYW4gZGlzdHJpYnV0ZSB0aGUgQUxDCgkJCWFkZHJlc3MgY3VycmVudFBhcnRpY2lwYW50QWRkcmVzczsKCQkJdWludCB0cmFuc2ZlcmVkVXNlckNvdW50ID0gMDsKCQkJZm9yICh1aW50IGluZGV4ID0gMDsgaW5kZXggPCBjb250cmlidXRvckNvdW50ICYmIHRyYW5zZmVyZWRVc2VyQ291bnQ8YmF0Y2hVc2VyQ291bnQ7IGluZGV4KyspewoJCQkJY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcyA9IGNvbnRyaWJ1dG9ySW5kZXhlc1tpbmRleF07IAoJCQkJCgkJCQl1aW50IGFtb3VudEFsY1Rva2VuID0gY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLnRva2Vuc0Ftb3VudDsKCQkJCWlmIChmYWxzZSA9PSBjb250cmlidXRvckxpc3RbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10uaXNUb2tlbkRpc3RyaWJ1dGVkKXsKCQkJCQlib29sIGlzU3VjY2VzcyA9IHRva2VuUmV3YXJkLnRyYW5zZmVyKGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MsIGFtb3VudEFsY1Rva2VuKTsKCQkJCQl0cmFuc2ZlcmVkVXNlckNvdW50ID0gdHJhbnNmZXJlZFVzZXJDb3VudCArIDE7CgkJCQkJaWYgKGlzU3VjY2Vzcyl7CgkJCQkJCWNvbnRyaWJ1dG9yTGlzdFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXS5pc1Rva2VuRGlzdHJpYnV0ZWQgPSB0cnVlOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJLy8gY2hlY2sgaWYgYWxsIEFMQyBhcmUgZGlzdHJpYnV0ZWQKCQkJY2hlY2tJZkFsbEFMQ0Rpc3RyaWJ1dGVkKCk7CgkJCS8vIGdldCBsYXRlc3QgdG9rZW4gYmFsYW5jZQoJCQl0b2tlbkJhbGFuY2UgPSB0b2tlblJld2FyZC5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7CgkJfQoJfQoJCgkvKioKCSAqIENoZWNrIGlmIGFsbCBjb250cmlidXRvcidzIHRva2VuIGFyZSBzdWNjZXNzZnVsbHkgZGlzdHJpYnV0ZWQKCSAqLwoJZnVuY3Rpb24gY2hlY2tJZkFsbEFMQ0Rpc3RyaWJ1dGVkKCkgcHVibGljIHsKCSAgICBhZGRyZXNzIGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3M7CgkJaXNBTENEaXN0cmlidXRlZCA9IHRydWU7CgkJZm9yICh1aW50IGluZGV4ID0gMDsgaW5kZXggPCBjb250cmlidXRvckNvdW50OyBpbmRleCsrKXsKCQkJCWN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MgPSBjb250cmlidXRvckluZGV4ZXNbaW5kZXhdOyAKCQkJCQoJCQlpZiAoZmFsc2UgPT0gY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLmlzVG9rZW5EaXN0cmlidXRlZCl7CgkJCQlpc0FMQ0Rpc3RyaWJ1dGVkID0gZmFsc2U7CgkJCQlicmVhazsKCQkJfQoJCX0KCX0KCQp9'.
	

]
