Class {
	#name : #SRTe3818504c1b32bf1557b16c238b2e01fd3149c17,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe3818504c1b32bf1557b16c238b2e01fd3149c17 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludCBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7CiAgICBpZiAoIWFzc2VydGlvbikgewogICAgICB0aHJvdzsKICAgIH0KICB9Cn0KCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sIAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLiAKICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqIAogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuIAogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgIHRocm93OwogICAgfQogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uIAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogIH0KCn0KCmNvbnRyYWN0IFRlYW1BbGxvY2F0aW9uIGlzIE93bmFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogIC8vdWludCBwdWJsaWMgY29uc3RhbnQgbG9ja2VkVGVhbUFsbG9jYXRpb25Ub2tlbnMgPSAxNjAwMDAwMDsKICB1aW50IHB1YmxpYyB1bmxvY2tlZEF0OwogIFBpbGxhclRva2VuIHBscjsKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGFsbG9jYXRpb25zOwogIHVpbnQgdG9rZW5zQ3JlYXRlZCA9IDA7CiAgdWludCBjb25zdGFudCBwdWJsaWMgbG9ja2VkVGVhbUFsbG9jYXRpb25Ub2tlbnMgPSAxNjAwMDAwMGUxODsKICAvL2FkZHJlc3Mgb2YgdGhlIHRlYW0gc3RvcmFnZSB2YXVsdAogIGFkZHJlc3MgcHVibGljIHRlYW1TdG9yYWdlVmF1bHQgPSAweDNmNUQ5MEQ1Q2MwNjUyQUFhNDA1MTkxMTREMDA3QmYxMTlBZmUxQ2Y7CgogIGZ1bmN0aW9uIFRlYW1BbGxvY2F0aW9uKCkgewogICAgcGxyID0gUGlsbGFyVG9rZW4obXNnLnNlbmRlcik7CiAgICAvLyBMb2NrZWQgdGltZSBvZiBhcHByb3hpbWF0ZWx5IDkgbW9udGhzIGJlZm9yZSB0ZWFtIG1lbWJlcnMgYXJlIGFibGUgdG8gcmVkZWVlbSB0b2tlbnMuCiAgICB1aW50IG5pbmVNb250aHMgPSA5ICogMzAgZGF5czsKICAgIHVubG9ja2VkQXQgPSBub3cuYWRkKG5pbmVNb250aHMpOwogICAgLy8yJSB0b2tlbnMgZnJvbSB0aGUgTWFya2V0aW5nIGJ1Y2tldCB3aGljaCBhcmUgbG9ja2VkIGZvciA5IG1vbnRocwogICAgYWxsb2NhdGlvbnNbdGVhbVN0b3JhZ2VWYXVsdF0gPSBsb2NrZWRUZWFtQWxsb2NhdGlvblRva2VuczsKICB9CgogIGZ1bmN0aW9uIGdldFRvdGFsQWxsb2NhdGlvbigpIHJldHVybnMgKHVpbnQpewogICAgICByZXR1cm4gbG9ja2VkVGVhbUFsbG9jYXRpb25Ub2tlbnM7CiAgfQoKICBmdW5jdGlvbiB1bmxvY2soKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgIGlmIChub3cgPCB1bmxvY2tlZEF0KSB0aHJvdzsKCiAgICBpZiAodG9rZW5zQ3JlYXRlZCA9PSAwKSB7CiAgICAgIHRva2Vuc0NyZWF0ZWQgPSBwbHIuYmFsYW5jZU9mKHRoaXMpOwogICAgfQogICAgLy90cmFuc2ZlciB0aGUgbG9ja2VkIHRva2VucyB0byB0aGUgdGVhbVN0b3JhZ2VBZGRyZXNzCiAgICBwbHIudHJhbnNmZXIodGVhbVN0b3JhZ2VWYXVsdCwgdG9rZW5zQ3JlYXRlZCk7CiAgfQp9Cgpjb250cmFjdCBVbnNvbGRBbGxvY2F0aW9uIGlzIE93bmFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogIHVpbnQgdW5sb2NrZWRBdDsKICB1aW50IGFsbG9jYXRlZFRva2VuczsKICBQaWxsYXJUb2tlbiBwbHI7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBhbGxvY2F0aW9uczsKCiAgdWludCB0b2tlbnNDcmVhdGVkID0gMDsKCiAgLyoKICAgIFNwbGl0IGFtb25nIHRlYW0gbWVtYmVycwogICAgVG9rZW5zIHJlc2VydmVkIGZvciBUZWFtOiAxLDAwMCwwMDAKICAgIFRva2VucyByZXNlcnZlZCBmb3IgMjB8MzAgcHJvamVjdHM6IDEsMDAwLDAwMAogICAgVG9rZW5zIHJlc2VydmVkIGZvciBmdXR1cmUgc2FsZTogMSwwMDAsMDAwCiAgKi8KCiAgZnVuY3Rpb24gVW5zb2xkQWxsb2NhdGlvbih1aW50IF9sb2NrVGltZSwgYWRkcmVzcyBfb3duZXIsIHVpbnQgX3Rva2VucykgewogICAgaWYoX2xvY2tUaW1lID09IDApIHRocm93OwoKICAgIGlmKF9vd25lciA9PSBhZGRyZXNzKDApKSB0aHJvdzsKCiAgICBwbHIgPSBQaWxsYXJUb2tlbihtc2cuc2VuZGVyKTsKICAgIHVpbnQgbG9ja1RpbWUgPSBfbG9ja1RpbWUgKiAxIHllYXJzOwogICAgdW5sb2NrZWRBdCA9IG5vdy5hZGQobG9ja1RpbWUpOwogICAgYWxsb2NhdGVkVG9rZW5zID0gX3Rva2VuczsKICAgIGFsbG9jYXRpb25zW19vd25lcl0gPSBfdG9rZW5zOwogIH0KCiAgZnVuY3Rpb24gZ2V0VG90YWxBbGxvY2F0aW9uKClyZXR1cm5zKHVpbnQpewogICAgICByZXR1cm4gYWxsb2NhdGVkVG9rZW5zOwogIH0KCiAgZnVuY3Rpb24gdW5sb2NrKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICBpZiAobm93IDwgdW5sb2NrZWRBdCkgdGhyb3c7CgogICAgaWYgKHRva2Vuc0NyZWF0ZWQgPT0gMCkgewogICAgICB0b2tlbnNDcmVhdGVkID0gcGxyLmJhbGFuY2VPZih0aGlzKTsKICAgIH0KCiAgICB2YXIgYWxsb2NhdGlvbiA9IGFsbG9jYXRpb25zW21zZy5zZW5kZXJdOwogICAgYWxsb2NhdGlvbnNbbXNnLnNlbmRlcl0gPSAwOwogICAgdmFyIHRvVHJhbnNmZXIgPSAodG9rZW5zQ3JlYXRlZC5tdWwoYWxsb2NhdGlvbikpLmRpdihhbGxvY2F0ZWRUb2tlbnMpOwogICAgcGxyLnRyYW5zZmVyKG1zZy5zZW5kZXIsIHRvVHJhbnNmZXIpOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgaWYgKHBhdXNlZCkgdGhyb3c7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgSVMgTk9UIHBhdXNlZAogICAqLwogIG1vZGlmaWVyIHdoZW5QYXVzZWQgewogICAgaWYgKCFwYXVzZWQpIHRocm93OwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcGF1c2VkID0gdHJ1ZTsKICAgIFBhdXNlKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgd2hlblBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuIAogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAvKioKICAgKiBAZGV2IEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrLgogICAqLwogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICBpZihtc2cuZGF0YS5sZW5ndGggPCBzaXplICsgNCkgewogICAgICAgdGhyb3c7CiAgICAgfQogICAgIF87CiAgfQoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLiAKICAqIEByZXR1cm4gQW4gdWludCByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1hbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcnQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7CgogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWFobGYgb2YgbXNnLnNlbmRlci4KICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgaWYgKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9IDApKSB0aHJvdzsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGFuIGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludCBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKLy8vIEB0aXRsZSBQaWxsYXJUb2tlbiAtIENyb3dkZnVuZGluZyBjb2RlIGZvciB0aGUgUGlsbGFyIFByb2plY3QKLy8vIEBhdXRob3IgUGFydGhhc2FyYXRoeSBSYW1hbnVqYW0sIEd1c3Rhdm8gR3VpbWFyYWVzLCBSb25hayBUaGFja2VyCmNvbnRyYWN0IFBpbGxhclRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlBJTExBUiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJQTFIiOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICBUZWFtQWxsb2NhdGlvbiBwdWJsaWMgdGVhbUFsbG9jYXRpb247CiAgICBVbnNvbGRBbGxvY2F0aW9uIHB1YmxpYyB1bnNvbGRUb2tlbnM7CiAgICBVbnNvbGRBbGxvY2F0aW9uIHB1YmxpYyB0d2VudHlUaGlydHlBbGxvY2F0aW9uOwogICAgVW5zb2xkQWxsb2NhdGlvbiBwdWJsaWMgZnV0dXJlU2FsZUFsbG9jYXRpb247CgogICAgdWludCBjb25zdGFudCBwdWJsaWMgbWluVG9rZW5zRm9yU2FsZSAgPSAzMjAwMDAwMGUxODsKCiAgICB1aW50IGNvbnN0YW50IHB1YmxpYyBtYXhQcmVzYWxlVG9rZW5zICAgICAgICAgICAgID0gIDQ4MDAwMDAwZTE4OwogICAgdWludCBjb25zdGFudCBwdWJsaWMgdG90YWxBdmFpbGFibGVGb3JTYWxlICAgICAgICA9IDUyODAwMDAwMGUxODsKICAgIHVpbnQgY29uc3RhbnQgcHVibGljIGZ1dHVyZVRva2VucyAgICAgICAgICAgICAgICAgPSAxMjAwMDAwMDBlMTg7CiAgICB1aW50IGNvbnN0YW50IHB1YmxpYyB0d2VudHlUaGlydHlUb2tlbnMgICAgICAgICAgID0gIDgwMDAwMDAwZTE4OwogICAgdWludCBjb25zdGFudCBwdWJsaWMgbG9ja2VkVGVhbUFsbG9jYXRpb25Ub2tlbnMgICA9ICAxNjAwMDAwMGUxODsKICAgIHVpbnQgY29uc3RhbnQgcHVibGljIHVubG9ja2VkVGVhbUFsbG9jYXRpb25Ub2tlbnMgPSAgIDgwMDAwMDBlMTg7CgogICAgYWRkcmVzcyBwdWJsaWMgdW5sb2NrZWRUZWFtU3RvcmFnZVZhdWx0ID0gMHg0MTYyQWQ2RUVjMzQxZTQzOGVBYmU4NWY1MmE5NDFCMDc4MjEwODE5OwogICAgYWRkcmVzcyBwdWJsaWMgdHdlbnR5VGhpcnR5VmF1bHQgPSAweGU3MmJBNWM2RjYzRGRkMzk1REY5NTgyODAwRTI4MjFjRTVhMDVENzU7CiAgICBhZGRyZXNzIHB1YmxpYyBmdXR1cmVTYWxlVmF1bHQgPSAweGYwMjMxMTYwQmQxYTJhMkQyNWFlZDJGMTFCODM2MEViRjU2RjYxNTM7CiAgICBhZGRyZXNzIHVuc29sZFZhdWx0OwoKICAgIC8vU3RvcmFnZSB5ZWFycwogICAgdWludCBjb25zdGFudCBjb2xkU3RvcmFnZVllYXJzID0gMTA7CiAgICB1aW50IGNvbnN0YW50IGZ1dHVyZVN0b3JhZ2VZZWFycyA9IDM7CgogICAgdWludCB0b3RhbFByZXNhbGUgPSAwOwoKICAgIC8vIEZ1bmRpbmcgYW1vdW50IGluIGV0aGVyCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCB0b2tlblByaWNlICA9IDAuMDAwNSBldGhlcjsKCiAgICAvLyBNdWx0aXNpZ3dhbGxldCB3aGVyZSB0aGUgcHJvY2VlZHMgd2lsbCBiZSBzdG9yZWQuCiAgICBhZGRyZXNzIHB1YmxpYyBwaWxsYXJUb2tlbkZhY3Rvcnk7CgogICAgdWludCBmdW5kaW5nU3RhcnRCbG9jazsKICAgIHVpbnQgZnVuZGluZ1N0b3BCbG9jazsKCiAgICAvLyBmbGFncyB3aGV0aGVyIElDTyBpcyBhZm9vdC4KICAgIGJvb2wgZnVuZGluZ01vZGU7CgogICAgLy90b3RhbCB1c2VkIHRva2VucwogICAgdWludCB0b3RhbFVzZWRUb2tlbnM7CgogICAgZXZlbnQgUmVmdW5kKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSx1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBNaWdyYXRlKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgTW9uZXlBZGRlZEZvclJlZnVuZChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSx1aW50MjU2IF90b3RhbCk7CgogICAgbW9kaWZpZXIgaXNOb3RGdW5kYWJsZSgpIHsKICAgICAgICBpZiAoZnVuZGluZ01vZGUpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaXNGdW5kYWJsZSgpIHsKICAgICAgICBpZiAoIWZ1bmRpbmdNb2RlKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIC8vQG5vdGljZSAgQ29uc3RydWN0b3Igb2YgUGlsbGFyVG9rZW4KICAgIC8vQHBhcmFtIGBfcGlsbGFyVG9rZW5GYWN0b3J5YCAtIG11bHRpc2lnd2FsbGV0IGFkZHJlc3MgdG8gc3RvcmUgcHJvY2VlZHMuCiAgICAvL0BwYXJhbSBgX2ljZWRXYWxsZXRgIC0gTXVsdGlzaWd3YWxsZXQgYWRkcmVzcyB0byB3aGljaCB1bnNvbGQgdG9rZW5zIGFyZSBhc3NpZ25lZAogICAgZnVuY3Rpb24gUGlsbGFyVG9rZW4oYWRkcmVzcyBfcGlsbGFyVG9rZW5GYWN0b3J5LCBhZGRyZXNzIF9pY2VkV2FsbGV0KSB7CiAgICAgIGlmKF9waWxsYXJUb2tlbkZhY3RvcnkgPT0gYWRkcmVzcygwKSkgdGhyb3c7CiAgICAgIGlmKF9pY2VkV2FsbGV0ID09IGFkZHJlc3MoMCkpIHRocm93OwoKICAgICAgcGlsbGFyVG9rZW5GYWN0b3J5ID0gX3BpbGxhclRva2VuRmFjdG9yeTsKICAgICAgdG90YWxVc2VkVG9rZW5zID0gMDsKICAgICAgdG90YWxTdXBwbHkgPSA4MDAwMDAwMDBlMTg7CiAgICAgIHVuc29sZFZhdWx0ID0gX2ljZWRXYWxsZXQ7CgogICAgICAvL2FsbG90IDggbWlsbGlvbiBvZiB0aGUgMjQgbWlsbGlvbiBtYXJrZXRpbmcgdG9rZW5zIHRvIGFuIGFkZHJlc3MKICAgICAgYmFsYW5jZXNbdW5sb2NrZWRUZWFtU3RvcmFnZVZhdWx0XSA9IHVubG9ja2VkVGVhbUFsbG9jYXRpb25Ub2tlbnM7CgogICAgICAvL2FsbG9jYXRlIHRva2VucyBmb3IgMjAzMCB3YWxsZXQgbG9ja2VkIGluIGZvciAzIHllYXJzCiAgICAgIGZ1dHVyZVNhbGVBbGxvY2F0aW9uID0gbmV3IFVuc29sZEFsbG9jYXRpb24oZnV0dXJlU3RvcmFnZVllYXJzLGZ1dHVyZVNhbGVWYXVsdCxmdXR1cmVUb2tlbnMpOwogICAgICBiYWxhbmNlc1thZGRyZXNzKGZ1dHVyZVNhbGVBbGxvY2F0aW9uKV0gPSBmdXR1cmVUb2tlbnM7CgogICAgICAvL2FsbG9jYXRlIHRva2VucyBmb3IgZnV0dXJlIHdhbGxldCBsb2NrZWQgaW4gZm9yIDMgeWVhcnMKICAgICAgdHdlbnR5VGhpcnR5QWxsb2NhdGlvbiA9IG5ldyBVbnNvbGRBbGxvY2F0aW9uKGZ1dHVyZVN0b3JhZ2VZZWFycyx0d2VudHlUaGlydHlWYXVsdCx0d2VudHlUaGlydHlUb2tlbnMpOwogICAgICBiYWxhbmNlc1thZGRyZXNzKHR3ZW50eVRoaXJ0eUFsbG9jYXRpb24pXSA9IHR3ZW50eVRoaXJ0eVRva2VuczsKCiAgICAgIGZ1bmRpbmdNb2RlID0gZmFsc2U7CiAgICB9CgogICAgLy9Abm90aWNlIEZhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyB0aGUgZXRoZXIgYW5kIGFsbG9jYXRlcyB0b2tlbnMgdG8KICAgIC8vdGhlIG1zZy5zZW5kZXIgY29ycmVzcG9uZGluZyB0byBtc2cudmFsdWUKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSBpc0Z1bmRhYmxlIGV4dGVybmFsIHsKICAgICAgcHVyY2hhc2UoKTsKICAgIH0KCiAgICAvL0Bub3RpY2UgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIHRoZSBldGhlciBhbmQgYWxsb2NhdGVzIHRva2VucyB0bwogICAgLy90aGUgbXNnLnNlbmRlciBjb3JyZXNwb25kaW5nIHRvIG1zZy52YWx1ZQogICAgZnVuY3Rpb24gcHVyY2hhc2UoKSBwYXlhYmxlIGlzRnVuZGFibGUgewogICAgICBpZihibG9jay5udW1iZXIgPCBmdW5kaW5nU3RhcnRCbG9jaykgdGhyb3c7CiAgICAgIGlmKGJsb2NrLm51bWJlciA+IGZ1bmRpbmdTdG9wQmxvY2spIHRocm93OwogICAgICBpZih0b3RhbFVzZWRUb2tlbnMgPj0gdG90YWxBdmFpbGFibGVGb3JTYWxlKSB0aHJvdzsKCiAgICAgIGlmIChtc2cudmFsdWUgPCB0b2tlblByaWNlKSB0aHJvdzsKCiAgICAgIHVpbnQgbnVtVG9rZW5zID0gbXNnLnZhbHVlLmRpdih0b2tlblByaWNlKTsKICAgICAgaWYobnVtVG9rZW5zIDwgMSkgdGhyb3c7CiAgICAgIC8vdHJhbnNmZXIgbW9uZXkgdG8gUGlsbGFyVG9rZW5GYWN0b3J5IE11bHRpc2lnV2FsbGV0CiAgICAgIHBpbGxhclRva2VuRmFjdG9yeS50cmFuc2Zlcihtc2cudmFsdWUpOwoKICAgICAgdWludCB0b2tlbnMgPSBudW1Ub2tlbnMubXVsKDFlMTgpOwogICAgICB0b3RhbFVzZWRUb2tlbnMgPSB0b3RhbFVzZWRUb2tlbnMuYWRkKHRva2Vucyk7CiAgICAgIGlmICh0b3RhbFVzZWRUb2tlbnMgPiB0b3RhbEF2YWlsYWJsZUZvclNhbGUpIHRocm93OwoKICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQodG9rZW5zKTsKCiAgICAgIC8vZmlyZSB0aGUgZXZlbnQgbm90aWZ5aW5nIHRoZSB0cmFuc2ZlciBvZiB0b2tlbnMKICAgICAgVHJhbnNmZXIoMCwgbXNnLnNlbmRlciwgdG9rZW5zKTsKICAgIH0KCiAgICAvL0Bub3RpY2UgRnVuY3Rpb24gcmVwb3J0cyB0aGUgbnVtYmVyIG9mIHRva2VucyBhdmFpbGFibGUgZm9yIHNhbGUKICAgIGZ1bmN0aW9uIG51bWJlck9mVG9rZW5zTGVmdCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgdWludCB0b2tlbnNBdmFpbGFibGVGb3JTYWxlID0gdG90YWxBdmFpbGFibGVGb3JTYWxlLnN1Yih0b3RhbFVzZWRUb2tlbnMpOwogICAgICByZXR1cm4gdG9rZW5zQXZhaWxhYmxlRm9yU2FsZTsKICAgIH0KCiAgICAvL0Bub3RpY2UgRmluYWxpemUgdGhlIElDTywgc2VuZCB0ZWFtIGFsbG9jYXRpb24gdG9rZW5zCiAgICAvL0Bub3RpY2Ugc2VuZCBhbnkgcmVtYWluaW5nIGJhbGFuY2UgdG8gdGhlIE11bHRpc2lnV2FsbGV0CiAgICAvL0Bub3RpY2UgdW5zb2xkIHRva2VucyB3aWxsIGJlIHNlbnQgdG8gaWNlZHdhbGxldAogICAgZnVuY3Rpb24gZmluYWxpemUoKSBpc0Z1bmRhYmxlIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgIGlmIChibG9jay5udW1iZXIgPD0gZnVuZGluZ1N0b3BCbG9jaykgdGhyb3c7CgogICAgICBpZiAodG90YWxVc2VkVG9rZW5zIDwgbWluVG9rZW5zRm9yU2FsZSkgdGhyb3c7CgogICAgICBpZih1bnNvbGRWYXVsdCA9PSBhZGRyZXNzKDApKSB0aHJvdzsKCiAgICAgIC8vIHN3aXRjaCBmdW5kaW5nIG1vZGUgb2ZmCiAgICAgIGZ1bmRpbmdNb2RlID0gZmFsc2U7CgogICAgICAvL0FsbG90IHRlYW0gdG9rZW5zIHRvIGEgc21hcnQgY29udHJhY3Qgd2hpY2ggd2lsbCBmcm96ZW4gZm9yIDkgbW9udGhzCiAgICAgIHRlYW1BbGxvY2F0aW9uID0gbmV3IFRlYW1BbGxvY2F0aW9uKCk7CiAgICAgIGJhbGFuY2VzW2FkZHJlc3ModGVhbUFsbG9jYXRpb24pXSA9IGxvY2tlZFRlYW1BbGxvY2F0aW9uVG9rZW5zOwoKICAgICAgLy9hbGxvY2F0ZSB1bnNvbGQgdG9rZW5zIHRvIGljZWQgc3RvcmFnZQogICAgICB1aW50IHRvdGFsVW5Tb2xkID0gbnVtYmVyT2ZUb2tlbnNMZWZ0KCk7CiAgICAgIGlmKHRvdGFsVW5Tb2xkID4gMCkgewogICAgICAgIHVuc29sZFRva2VucyA9IG5ldyBVbnNvbGRBbGxvY2F0aW9uKGNvbGRTdG9yYWdlWWVhcnMsdW5zb2xkVmF1bHQsdG90YWxVblNvbGQpOwogICAgICAgIGJhbGFuY2VzW2FkZHJlc3ModW5zb2xkVG9rZW5zKV0gPSB0b3RhbFVuU29sZDsKICAgICAgfQoKICAgICAgLy90cmFuc2ZlciBhbnkgYmFsYW5jZSBhdmFpbGFibGUgdG8gUGlsbGFyIE11bHRpc2lnIFdhbGxldAogICAgICBwaWxsYXJUb2tlbkZhY3RvcnkudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KCiAgICAvL0Bub3RpY2UgRnVuY3Rpb24gdGhhdCBjYW4gYmUgY2FsbGVkIGJ5IHB1cmNoYXNlcnMgdG8gcmVmdW5kCiAgICAvL0Bub3RpY2UgVXNlZCBvbmx5IGluIGNhc2UgdGhlIElDTyBpc24ndCBzdWNjZXNzZnVsLgogICAgZnVuY3Rpb24gcmVmdW5kKCkgaXNGdW5kYWJsZSBleHRlcm5hbCB7CiAgICAgIGlmKGJsb2NrLm51bWJlciA8PSBmdW5kaW5nU3RvcEJsb2NrKSB0aHJvdzsKICAgICAgaWYodG90YWxVc2VkVG9rZW5zID49IG1pblRva2Vuc0ZvclNhbGUpIHRocm93OwoKICAgICAgdWludCBwbHJWYWx1ZSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwogICAgICBpZihwbHJWYWx1ZSA9PSAwKSB0aHJvdzsKCiAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKCiAgICAgIHVpbnQgZXRoVmFsdWUgPSBwbHJWYWx1ZS5tdWwodG9rZW5QcmljZSkuZGl2KDFlMTgpOwogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV0aFZhbHVlKTsKICAgICAgUmVmdW5kKG1zZy5zZW5kZXIsIGV0aFZhbHVlKTsKICAgIH0KCiAgICAvL0Bub3RpY2UgRnVuY3Rpb24gdXNlZCBmb3IgZnVuZGluZyBpbiBjYXNlIG9mIHJlZnVuZC4KICAgIC8vQG5vdGljZSBDYW4gYmUgY2FsbGVkIG9ubHkgYnkgdGhlIE93bmVyCiAgICBmdW5jdGlvbiBhbGxvY2F0ZUZvclJlZnVuZCgpIGV4dGVybmFsIHBheWFibGUgb25seU93bmVyIHJldHVybnMgKHVpbnQpewogICAgICAvL2RvZXMgbm90aGluZyBqdXN0IGFjY2VwdHMgYW5kIHN0b3JlcyB0aGUgZXRoZXIKICAgICAgTW9uZXlBZGRlZEZvclJlZnVuZChtc2cuc2VuZGVyLG1zZy52YWx1ZSx0aGlzLmJhbGFuY2UpOwogICAgICByZXR1cm4gdGhpcy5iYWxhbmNlOwogICAgfQoKICAgIC8vQG5vdGljZSBGdW5jdGlvbiB0byBhbGxvY2F0ZSB0b2tlbnMgdG8gYW4gdXNlci4KICAgIC8vQHBhcmFtIGBfdG9gIHRoZSBhZGRyZXNzIG9mIGFuIHVzZXIKICAgIC8vQHBhcmFtIGBfdG9rZW5zYCBudW1iZXIgb2YgdG9rZW5zIHRvIGJlIGFsbG9jYXRlZC4KICAgIC8vQG5vdGljZSBDYW4gYmUgY2FsbGVkIG9ubHkgd2hlbiBmdW5kaW5nIGlzIG5vdCBhY3RpdmUgYW5kIG9ubHkgYnkgdGhlIG93bmVyCiAgICBmdW5jdGlvbiBhbGxvY2F0ZVRva2VucyhhZGRyZXNzIF90byx1aW50IF90b2tlbnMpIGlzTm90RnVuZGFibGUgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgdWludCBudW1PZlRva2VucyA9IF90b2tlbnMubXVsKDFlMTgpOwogICAgICB0b3RhbFByZXNhbGUgPSB0b3RhbFByZXNhbGUuYWRkKG51bU9mVG9rZW5zKTsKCiAgICAgIGlmKHRvdGFsUHJlc2FsZSA+IG1heFByZXNhbGVUb2tlbnMpIHRocm93OwoKICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKG51bU9mVG9rZW5zKTsKICAgIH0KCiAgICAvL0Bub3RpY2UgRnVuY3Rpb24gdG8gdW5QYXVzZSB0aGUgY29udHJhY3QuCiAgICAvL0Bub3RpY2UgQ2FuIGJlIGNhbGxlZCBvbmx5IHdoZW4gZnVuZGluZyBpcyBhY3RpdmUgYW5kIG9ubHkgYnkgdGhlIG93bmVyCiAgICBmdW5jdGlvbiB1blBhdXNlVG9rZW5TYWxlKCkgb25seU93bmVyIGlzTm90RnVuZGFibGUgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCl7CiAgICAgIGZ1bmRpbmdNb2RlID0gdHJ1ZTsKICAgICAgcmV0dXJuIGZ1bmRpbmdNb2RlOwogICAgfQoKICAgIC8vQG5vdGljZSBGdW5jdGlvbiB0byBwYXVzZSB0aGUgY29udHJhY3QuCiAgICAvL0Bub3RpY2UgQ2FuIGJlIGNhbGxlZCBvbmx5IHdoZW4gZnVuZGluZyBpcyBhY3RpdmUgYW5kIG9ubHkgYnkgdGhlIG93bmVyCiAgICBmdW5jdGlvbiBwYXVzZVRva2VuU2FsZSgpIG9ubHlPd25lciBpc0Z1bmRhYmxlIGV4dGVybmFsIHJldHVybnMgKGJvb2wpewogICAgICBmdW5kaW5nTW9kZSA9IGZhbHNlOwogICAgICByZXR1cm4gIWZ1bmRpbmdNb2RlOwogICAgfQoKICAgIC8vQG5vdGljZSBGdW5jdGlvbiB0byBzdGFydCB0aGUgY29udHJhY3QuCiAgICAvL0BwYXJhbSBgX2Z1bmRpbmdTdGFydEJsb2NrYCAtIGJsb2NrIGZyb20gd2hlbiBJQ08gY29tbWVuY2VzCiAgICAvL0BwYXJhbSBgX2Z1bmRpbmdTdG9wQmxvY2tgIC0gYmxvY2sgZnJvbSB3aGVuIElDTyBlbmRzLgogICAgLy9Abm90aWNlIENhbiBiZSBjYWxsZWQgb25seSB3aGVuIGZ1bmRpbmcgaXMgbm90IGFjdGl2ZSBhbmQgb25seSBieSB0aGUgb3duZXIKICAgIGZ1bmN0aW9uIHN0YXJ0VG9rZW5TYWxlKHVpbnQgX2Z1bmRpbmdTdGFydEJsb2NrLCB1aW50IF9mdW5kaW5nU3RvcEJsb2NrKSBvbmx5T3duZXIgaXNOb3RGdW5kYWJsZSBleHRlcm5hbCByZXR1cm5zIChib29sKXsKICAgICAgaWYoX2Z1bmRpbmdTdG9wQmxvY2sgPD0gX2Z1bmRpbmdTdGFydEJsb2NrKSB0aHJvdzsKCiAgICAgIGZ1bmRpbmdTdGFydEJsb2NrID0gX2Z1bmRpbmdTdGFydEJsb2NrOwogICAgICBmdW5kaW5nU3RvcEJsb2NrID0gX2Z1bmRpbmdTdG9wQmxvY2s7CiAgICAgIGZ1bmRpbmdNb2RlID0gdHJ1ZTsKICAgICAgcmV0dXJuIGZ1bmRpbmdNb2RlOwogICAgfQoKICAgIC8vQG5vdGljZSBGdW5jdGlvbiB0byBnZXQgdGhlIGN1cnJlbnQgZnVuZGluZyBzdGF0dXMuCiAgICBmdW5jdGlvbiBmdW5kaW5nU3RhdHVzKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCl7CiAgICAgIHJldHVybiBmdW5kaW5nTW9kZTsKICAgIH0KfQ=='.
	

]
