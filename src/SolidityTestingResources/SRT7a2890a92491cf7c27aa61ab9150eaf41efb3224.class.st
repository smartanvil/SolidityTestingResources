Class {
	#name : #SRT7a2890a92491cf7c27aa61ab9150eaf41efb3224,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7a2890a92491cf7c27aa61ab9150eaf41efb3224 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMDsKCmNvbnRyYWN0IEVaVGFua3N7CiAgICAKICAgIC8vIFNUUlVDVFMgSEVSRQogICAgc3RydWN0IFRhbmtPYmplY3R7CiAgICAgICAgLy8gdHlwZSBvZiB0YW5rIAogICAgICAgIHVpbnQyNTYgdHlwZUlEOyAKCiAgICAgICAgLy8gdGFuayBxdWFsaXR5CiAgICAgICAgdWludDhbNF0gdXBncmFkZXM7CiAgICAgICAgdWludDggZXhwOwogICAgICAgIHVpbnQ4IG5leHQ7CiAgICAgICAgYm9vbCBpbkJhdHRsZTsKICAgICAgICAKICAgICAgICAvLyBzdGF0cwogICAgICAgIGFkZHJlc3MgdGFua093bmVyOwogICAgICAgIHVpbnQyNTYgZWFybmluZ3NJbmRleDsgCiAgICAgICAgCiAgICAgICAgLy8gYnV5aW5nICYgc2VsbGluZyAKICAgICAgICBib29sIGluQXVjdGlvbjsKICAgICAgICB1aW50MjU2IGN1cnJBdWN0aW9uOwogICAgfQoKICAgIHN0cnVjdCBUYW5rVHlwZXsKICAgICAgICB1aW50MjU2IHN0YXJ0UHJpY2U7CiAgICAgICAgdWludDI1NiBjdXJyUHJpY2U7CiAgICAgICAgdWludDI1NiBlYXJuaW5nczsKCiAgICAgICAgLy8gYmF0dGxlIHN0YXRzCiAgICAgICAgdWludDMyIGJhc2VIZWFsdGg7CiAgICAgICAgdWludDMyIGJhc2VBdHRhY2s7CiAgICAgICAgdWludDMyIGJhc2VBcm1vcjsKICAgICAgICB1aW50MzIgYmFzZVNwZWVkOwoKICAgICAgICB1aW50MzIgbnVtVGFua3M7CiAgICB9CiAgICAKICAgIHN0cnVjdCBBdWN0aW9uT2JqZWN0ewogICAgICAgIHVpbnQgdGFuazsgLy8gdGFuayBpZAogICAgICAgIHVpbnQgc3RhcnRQcmljZTsKICAgICAgICB1aW50IGVuZFByaWNlOwogICAgICAgIHVpbnQgc3RhcnRUaW1lOwogICAgICAgIHVpbnQgZHVyYXRpb247CiAgICAgICAgYm9vbCBhbGl2ZTsKICAgIH0KICAgIAogICAgLy8gRVZFTlRTIEhFUkUKICAgIGV2ZW50IEV2ZW50V2l0aGRyYXcgKAogICAgICAgYWRkcmVzcyBpbmRleGVkIHBsYXllciwKICAgICAgIHVpbnQyNTYgYW1vdW50CiAgICApOyAKCiAgICBldmVudCBFdmVudFVwZ3JhZGVUYW5rICgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgcGxheWVyLAogICAgICAgIHVpbnQyNTYgdGFua0lELAogICAgICAgIHVpbnQ4IHVwZ3JhZGVDaG9pY2UKICAgICk7IAogICAgCiAgICBldmVudCBFdmVudEF1Y3Rpb24gKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIsCiAgICAgICAgdWludDI1NiB0YW5rSUQsCiAgICAgICAgdWludDI1NiBzdGFydFByaWNlLAogICAgICAgIHVpbnQyNTYgZW5kUHJpY2UsCiAgICAgICAgdWludDI1NiBkdXJhdGlvbiwKICAgICAgICB1aW50MjU2IGN1cnJlbnRUaW1lCiAgICApOwogICAgICAgIAogICAgZXZlbnQgRXZlbnRDYW5jZWxBdWN0aW9uICgKICAgICAgICB1aW50MjU2IGluZGV4ZWQgdGFua0lELAogICAgICAgIGFkZHJlc3Mgb3duZXIKICAgICk7IAogICAgCiAgICBldmVudCBFdmVudEJpZCAoCiAgICAgICAgdWludDI1NiBpbmRleGVkIHRhbmtJRCwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgYnV5ZXIKICAgICk7IAogICAgCiAgICBldmVudCBFdmVudEJ1eVRhbmsgKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIsCiAgICAgICAgdWludDI1NiBwcm9kdWN0SUQsCiAgICAgICAgdWludDI1NiB0YW5rSUQsCiAgICAgICAgdWludDI1NiBuZXdQcmljZQogICAgKTsgCgogICAgZXZlbnQgRXZlbnRDYXNoT3V0VGFuaygKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgcGxheWVyLAogICAgICAgIHVpbnQyNTYgYW1vdW50CiAgICApOwoKICAgIGV2ZW50IEV2ZW50Sm9pbmVkQmF0dGxlKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIsCiAgICAgICAgdWludDI1NiBpbmRleGVkIHRhbmtJRAogICAgKTsKCiAgICBldmVudCBFdmVudFF1aXRCYXR0bGUoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHBsYXllciwKICAgICAgICB1aW50MjU2IGluZGV4ZWQgdGFua0lECiAgICApOwogICAgCiAgICBldmVudCBFdmVudEJhdHRsZU92ZXIoKTsKICAgIAogICAgLy8gRklFTERTIEhFUkUKICAgIAogICAgLy8gY29udHJhY3QgZmllbGRzIAogICAgdWludDggZmVlQW10ID0gMzsKICAgIHVpbnQ4IHRvdXJuYW1lbnRUYXhSYXRlID0gNTsKICAgIGFkZHJlc3Mgb3duZXI7CgoKICAgIC8vIGJhdHRsZSEKICAgIHVpbnQyNTYgdG91cm5hbWVudEFtdCA9IDA7CiAgICB1aW50OCB0ZWFtU2l6ZSA9IDU7CiAgICB1aW50MjU2IGJhdHRsZUZlZSA9IDEgZXRoZXIgLyAxMDAwOwogICAgdWludDI1NltdIGJhdHRsZVRlYW1zOwoKICAgIC8vIHRhbmsgZmllbGRzCiAgICB1aW50MjU2IG5ld1R5cGVJRCA9IDE7CiAgICB1aW50MjU2IG5ld1RhbmtJRCA9IDE7CiAgICB1aW50MjU2IG5ld0F1Y3Rpb25JRCA9IDE7CiAgICAKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gVGFua1R5cGUpIGJhc2VUYW5rczsKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gVGFua09iamVjdCkgdGFua3M7IC8vbWFwcyB0YW5rSUQgdG8gdGFua3MKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NltdKSB1c2VyVGFua3M7CiAgICBtYXBwaW5nICh1aW50ID0+IEF1Y3Rpb25PYmplY3QpIGF1Y3Rpb25zOyAvL21hcHMgYXVjdGlvbklEIHRvIGF1Y3Rpb24KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7IAoKICAgIC8vIE1PRElGSUVSUyBIRVJFCiAgICBtb2RpZmllciBpc093bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIC8vIENUT1IKICAgIGZ1bmN0aW9uIEVaVGFua3MoKSBwdWJsaWMgcGF5YWJsZXsKICAgICAgICAvLyBpbml0IG93bmVyCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGJhbGFuY2VzW293bmVyXSArPSBtc2cudmFsdWU7CgogICAgICAgIC8vIGJhc2ljIHRhbmsKICAgICAgICBuZXdUYW5rVHlwZSgxIGV0aGVyIC8gODAsIDEgZXRoZXIgLyAxMDAwLCAyNTAwLCA1MCwgNDAsIDMpOwoKICAgICAgICAvLyBidWxreSB0YW5rCiAgICAgICAgbmV3VGFua1R5cGUoMSBldGhlciAvIDUwLCAxIGV0aGVyIC8gMTAwMCwgNTUwMCwgNTAsIDQxLCAzKTsKCiAgICAgICAgLy8gc3BlZWRlciB0YW5rCiAgICAgICAgbmV3VGFua1R5cGUoMSBldGhlciAvIDUwLCAxIGV0aGVyIC8gMTAwMCwgMjAwMCwgNTAsIDQwLCA1KTsKCiAgICAgICAgLy8gcG93ZXJmdWwgdGFuawogICAgICAgIG5ld1RhbmtUeXBlKDEgZXRoZXIgLyA1MCwgMSBldGhlciAvIDEwMDAsIDMwMDAsIDUzLCAzOSwgMyk7CgogICAgICAgIC8vIGFybW9yIHRhbmsKICAgICAgICBuZXdUYW5rVHlwZSgxIGV0aGVyIC8gNTAsIDEgZXRoZXIgLyAxMDAwLCA0MDAwLCA1MSwgNDMsIDIpOwoKICAgICAgICAvLyBiZXR0ZXIgdGhhbiBiYXNpYyB0YW5rCiAgICAgICAgbmV3VGFua1R5cGUoMSBldGhlciAvIDQwLCAxIGV0aGVyIC8gMjAwLCAzMDAwLCA1MiwgNDEsIDQpOwogICAgfQoKICAgIC8vIEFETUlOSVNUUkFUSVZFIEZVTkNUSU9OUwoKICAgIGZ1bmN0aW9uIHNldE5ld093bmVyKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBpc093bmVyewogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CgogICAgLy8gY3JlYXRlIGEgbmV3IHRhbmsgdHlwZSAKICAgIGZ1bmN0aW9uIG5ld1RhbmtUeXBlICggCiAgICAgICAgdWludDI1NiBfc3RhcnRQcmljZSwKICAgICAgICB1aW50MjU2IF9lYXJuaW5ncywKICAgICAgICB1aW50MzIgX2Jhc2VIZWFsdGgsCiAgICAgICAgdWludDMyIF9iYXNlQXR0YWNrLAogICAgICAgIHVpbnQzMiBfYmFzZUFybW9yLAogICAgICAgIHVpbnQzMiBfYmFzZVNwZWVkCiAgICApIHB1YmxpYyBpc093bmVyIHsKICAgICAgICBiYXNlVGFua3NbbmV3VHlwZUlEKytdID0gVGFua1R5cGUoewogICAgICAgICAgICBzdGFydFByaWNlIDogX3N0YXJ0UHJpY2UsCiAgICAgICAgICAgIGN1cnJQcmljZSA6IF9zdGFydFByaWNlLAogICAgICAgICAgICBlYXJuaW5ncyA6IF9lYXJuaW5ncywKICAgICAgICAgICAgYmFzZUF0dGFjayA6IF9iYXNlQXR0YWNrLAogICAgICAgICAgICBiYXNlQXJtb3IgOiBfYmFzZUFybW9yLAogICAgICAgICAgICBiYXNlU3BlZWQgOiBfYmFzZVNwZWVkLAogICAgICAgICAgICBiYXNlSGVhbHRoIDogX2Jhc2VIZWFsdGgsCiAgICAgICAgICAgIG51bVRhbmtzIDogMAogICAgICAgIH0pOwoKICAgIH0KICAgIAogICAgLy8gZmVlIGZyb20gYXVjdGlvbmluZwogICAgZnVuY3Rpb24gY2hhbmdlRmVlQW10ICh1aW50OCBfYW10KSBwdWJsaWMgaXNPd25lciB7CiAgICAgICAgcmVxdWlyZShfYW10ID4gMCAmJiBfYW10IDwgMTAwKTsKICAgICAgICBmZWVBbXQgPSBfYW10OwogICAgfQoKICAgIC8vIHJhdGUgdG8gZnVuZCB0b3VybmFtZW50CiAgICBmdW5jdGlvbiBjaGFuZ2VUb3VybmFtZW50VGF4QW10ICh1aW50OCBfcmF0ZSkgcHVibGljIGlzT3duZXIgewogICAgICAgIHJlcXVpcmUoX3JhdGUgPiAwICYmIF9yYXRlIDwgMTAwKTsKICAgICAgICB0b3VybmFtZW50VGF4UmF0ZSA9IF9yYXRlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVRlYW1TaXplKHVpbnQ4IF9zaXplKSBwdWJsaWMgaXNPd25lciB7CiAgICAgICAgcmVxdWlyZShfc2l6ZSA+IDApOwogICAgICAgIHRlYW1TaXplID0gX3NpemU7CiAgICB9CgogICAgLy8gY29zdCB0byBlbnRlciBiYXR0bGUKICAgIGZ1bmN0aW9uIGNoYW5nZUJhdHRsZUZlZSh1aW50MjU2IF9mZWUpIHB1YmxpYyBpc093bmVyIHsKICAgICAgICByZXF1aXJlKF9mZWUgPiAwKTsKICAgICAgICBiYXR0bGVGZWUgPSBfZmVlOwogICAgfQogICAgCiAgICAvLyBJTlRFUk5BTCBGVU5DVElPTlMKCiAgICBmdW5jdGlvbiBkZWxUYW5rRnJvbVVzZXIoYWRkcmVzcyB1c2VyLCB1aW50MjU2IHZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgdWludCBsID0gdXNlclRhbmtzW3VzZXJdLmxlbmd0aDsKCiAgICAgICAgZm9yKHVpbnQgaT0wOyBpPGw7IGkrKyl7CiAgICAgICAgICAgIGlmKHVzZXJUYW5rc1t1c2VyXVtpXSA9PSB2YWx1ZSl7CiAgICAgICAgICAgICAgICBkZWxldGUgdXNlclRhbmtzW3VzZXJdW2ldOwogICAgICAgICAgICAgICAgdXNlclRhbmtzW3VzZXJdW2ldID0gdXNlclRhbmtzW3VzZXJdW2wtMV07CiAgICAgICAgICAgICAgICB1c2VyVGFua3NbdXNlcl0ubGVuZ3RoID0gbC0xOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8vIFVTRVIgRlVOQ1RJT05TCgogICAgZnVuY3Rpb24gd2l0aGRyYXcgKHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHBheWFibGUgewogICAgICAgIC8vIHZhbGlkaXR5IGNoZWNrcwogICAgICAgIHJlcXVpcmUgKF9hbW91bnQgPj0gMCk7IAogICAgICAgIHJlcXVpcmUgKHRoaXMuYmFsYW5jZSA+PSBfYW1vdW50KTsgCiAgICAgICAgcmVxdWlyZSAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCk7IAogICAgICAgIAogICAgICAgIC8vIHJldHVybiBldmVyeXRoaW5nIGlzIHdpdGhkcmF3aW5nIDAKICAgICAgICBpZiAoX2Ftb3VudCA9PSAwKXsKICAgICAgICAgICAgX2Ftb3VudCA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIuc2VuZChfYW1vdW50KSk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX2Ftb3VudDsgCiAgICAgICAgCiAgICAgICAgRXZlbnRXaXRoZHJhdyAobXNnLnNlbmRlciwgX2Ftb3VudCk7CiAgICB9CiAgICAKICAgIAogICAgZnVuY3Rpb24gYXVjdGlvblRhbmsgKHVpbnQgX3RhbmtJRCwgdWludCBfc3RhcnRQcmljZSwgdWludCBfZW5kUHJpY2UsIHVpbnQyNTYgX2R1cmF0aW9uKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKF90YW5rSUQgPiAwICYmIF90YW5rSUQgPCBuZXdUYW5rSUQpOwogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLnRhbmtPd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlICghdGFua3NbX3RhbmtJRF0uaW5CYXR0bGUpOwogICAgICAgIHJlcXVpcmUgKCF0YW5rc1tfdGFua0lEXS5pbkF1Y3Rpb24pOwogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLmN1cnJBdWN0aW9uID09IDApOwogICAgICAgIHJlcXVpcmUgKF9zdGFydFByaWNlID49IF9lbmRQcmljZSk7CiAgICAgICAgcmVxdWlyZSAoX3N0YXJ0UHJpY2UgPiAwICYmIF9lbmRQcmljZSA+PSAwKTsKICAgICAgICByZXF1aXJlIChfZHVyYXRpb24gPiAwKTsKICAgICAgICAKICAgICAgICBhdWN0aW9uc1tuZXdBdWN0aW9uSURdID0gQXVjdGlvbk9iamVjdChfdGFua0lELCBfc3RhcnRQcmljZSwgX2VuZFByaWNlLCBub3csIF9kdXJhdGlvbiwgdHJ1ZSk7CiAgICAgICAgdGFua3NbX3RhbmtJRF0uaW5BdWN0aW9uID0gdHJ1ZTsKICAgICAgICB0YW5rc1tfdGFua0lEXS5jdXJyQXVjdGlvbiA9IG5ld0F1Y3Rpb25JRDsKICAgICAgICAKICAgICAgICBuZXdBdWN0aW9uSUQrKzsKCiAgICAgICAgRXZlbnRBdWN0aW9uIChtc2cuc2VuZGVyLCBfdGFua0lELCBfc3RhcnRQcmljZSwgX2VuZFByaWNlLCBfZHVyYXRpb24sIG5vdyk7CiAgICB9CiAgICAKICAgIC8vIGJ1eSB0YW5rIGZyb20gYXVjdGlvbgogICAgZnVuY3Rpb24gYmlkICh1aW50MjU2IF90YW5rSUQpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICAvLyB2YWxpZGl0eSBjaGVja3MKICAgICAgICByZXF1aXJlIChfdGFua0lEID4gMCAmJiBfdGFua0lEIDwgbmV3VGFua0lEKTsgLy8gY2hlY2sgaWYgdGFuayBpcyB2YWxpZAogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLmluQXVjdGlvbiA9PSB0cnVlKTsgLy8gY2hlY2sgaWYgdGFuayBpcyBjdXJyZW50bHkgaW4gYXVjdGlvbgogICAgICAgIAogICAgICAgIAogICAgICAgIHVpbnQyNTYgYXVjdGlvbklEID0gdGFua3NbX3RhbmtJRF0uY3VyckF1Y3Rpb247CiAgICAgICAgdWludDI1NiBjdXJyUHJpY2UgPSBnZXRDdXJyQXVjdGlvblByaWNlQXVjdGlvbklEKGF1Y3Rpb25JRCk7CiAgICAgICAgCiAgICAgICAgcmVxdWlyZSAoY3VyclByaWNlID49IDApOyAKICAgICAgICByZXF1aXJlIChtc2cudmFsdWUgPj0gY3VyclByaWNlKTsgCiAgICAgICAgCiAgICAgICAgaWYobXNnLnZhbHVlID4gY3VyclByaWNlKXsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gKG1zZy52YWx1ZSAtIGN1cnJQcmljZSk7CiAgICAgICAgfQoKCiAgICAgICAgLy8gY2FsY3VsYXRlIG5ldyBiYWxhbmNlcwogICAgICAgIHVpbnQyNTYgZmVlID0gKGN1cnJQcmljZSpmZWVBbXQpIC8gMTAwOyAKCiAgICAgICAgLy91cGRhdGUgdG91cm5hbWVudEFtdAogICAgICAgIHVpbnQyNTYgdG91cm5hbWVudFRheCA9IChmZWUqdG91cm5hbWVudFRheFJhdGUpIC8gMTAwOwogICAgICAgIHRvdXJuYW1lbnRBbXQgKz0gdG91cm5hbWVudFRheDsKICAgIAogICAgICAgIGJhbGFuY2VzW3RhbmtzW190YW5rSURdLnRhbmtPd25lcl0gKz0gY3VyclByaWNlIC0gZmVlOwogICAgICAgIGJhbGFuY2VzW293bmVyXSArPSAoZmVlIC0gdG91cm5hbWVudFRheCk7IAoKICAgICAgICAvLyB1cGRhdGUgb2JqZWN0IGZpZWxkcwogICAgICAgIGFkZHJlc3MgZm9ybWVyT3duZXIgPSB0YW5rc1tfdGFua0lEXS50YW5rT3duZXI7CgogICAgICAgIHRhbmtzW190YW5rSURdLnRhbmtPd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgdGFua3NbX3RhbmtJRF0uaW5BdWN0aW9uID0gZmFsc2U7IAogICAgICAgIGF1Y3Rpb25zW3RhbmtzW190YW5rSURdLmN1cnJBdWN0aW9uXS5hbGl2ZSA9IGZhbHNlOyAKICAgICAgICB0YW5rc1tfdGFua0lEXS5jdXJyQXVjdGlvbiA9IDA7IAoKICAgICAgICAvLyB1cGRhdGUgdXNlclRhbmtzCiAgICAgICAgdXNlclRhbmtzW21zZy5zZW5kZXJdLnB1c2goX3RhbmtJRCk7CiAgICAgICAgZGVsVGFua0Zyb21Vc2VyKGZvcm1lck93bmVyLCBfdGFua0lEKTsKCiAgICAgICAgRXZlbnRCaWQgKF90YW5rSUQsIG1zZy5zZW5kZXIpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjYW5jZWxBdWN0aW9uICh1aW50MjU2IF90YW5rSUQpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSAoX3RhbmtJRCA+IDAgJiYgX3RhbmtJRCA8IG5ld1RhbmtJRCk7IAogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLmluQXVjdGlvbik7IAogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLnRhbmtPd25lciA9PSBtc2cuc2VuZGVyKTsgCiAgICAgICAgCiAgICAgICAgLy8gdXBkYXRlIHRhbmsgb2JqZWN0CiAgICAgICAgdGFua3NbX3RhbmtJRF0uaW5BdWN0aW9uID0gZmFsc2U7IAogICAgICAgIGF1Y3Rpb25zW3RhbmtzW190YW5rSURdLmN1cnJBdWN0aW9uXS5hbGl2ZSA9IGZhbHNlOyAKICAgICAgICB0YW5rc1tfdGFua0lEXS5jdXJyQXVjdGlvbiA9IDA7IAoKICAgICAgICBFdmVudENhbmNlbEF1Y3Rpb24gKF90YW5rSUQsIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVRhbmsgKHVpbnQzMiBfdHlwZUlEKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShfdHlwZUlEID4gMCAmJiBfdHlwZUlEIDwgbmV3VHlwZUlEKTsKICAgICAgICByZXF1aXJlIChiYXNlVGFua3NbX3R5cGVJRF0uY3VyclByaWNlID4gMCAmJiBtc2cudmFsdWUgPiAwKTsgCiAgICAgICAgcmVxdWlyZSAobXNnLnZhbHVlID49IGJhc2VUYW5rc1tfdHlwZUlEXS5jdXJyUHJpY2UpOyAKICAgICAgICAKICAgICAgICBpZiAobXNnLnZhbHVlID4gYmFzZVRhbmtzW190eXBlSURdLmN1cnJQcmljZSl7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IG1zZy52YWx1ZSAtIGJhc2VUYW5rc1tfdHlwZUlEXS5jdXJyUHJpY2U7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGJhc2VUYW5rc1tfdHlwZUlEXS5jdXJyUHJpY2UgKz0gYmFzZVRhbmtzW190eXBlSURdLmVhcm5pbmdzOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgZWFybmluZ3NJbmRleCA9IGJhc2VUYW5rc1tfdHlwZUlEXS5udW1UYW5rcyArIDE7CiAgICAgICAgYmFzZVRhbmtzW190eXBlSURdLm51bVRhbmtzICs9IDE7CgogICAgICAgIHRhbmtzW25ld1RhbmtJRCsrXSA9IFRhbmtPYmplY3QgKHsKICAgICAgICAgICAgdHlwZUlEIDogX3R5cGVJRCwKICAgICAgICAgICAgdXBncmFkZXMgOiBbMCwwLDAsMF0sCiAgICAgICAgICAgIGV4cDogMCwKICAgICAgICAgICAgbmV4dDogMCwKICAgICAgICAgICAgaW5CYXR0bGUgOiBmYWxzZSwKICAgICAgICAgICAgdGFua093bmVyIDogbXNnLnNlbmRlciwKICAgICAgICAgICAgZWFybmluZ3NJbmRleCA6IGVhcm5pbmdzSW5kZXgsCiAgICAgICAgICAgIGluQXVjdGlvbiA6IGZhbHNlLAogICAgICAgICAgICBjdXJyQXVjdGlvbiA6IDAKICAgICAgICB9KTsKCiAgICAgICAgdWludDI1NiBwcmljZSA9IGJhc2VUYW5rc1tfdHlwZUlEXS5zdGFydFByaWNlOwogICAgICAgIHVpbnQyNTYgdG91cm5hbWVudFByb2NlZWRzID0gKHByaWNlICogdG91cm5hbWVudFRheFJhdGUpIC8gMTAwOwoKICAgICAgICBiYWxhbmNlc1tvd25lcl0gKz0gYmFzZVRhbmtzW190eXBlSURdLnN0YXJ0UHJpY2UgLSB0b3VybmFtZW50UHJvY2VlZHM7CiAgICAgICAgdG91cm5hbWVudEFtdCArPSB0b3VybmFtZW50UHJvY2VlZHM7CgogICAgICAgIHVzZXJUYW5rc1ttc2cuc2VuZGVyXS5wdXNoKG5ld1RhbmtJRC0xKTsKICAgICAgICAKICAgICAgICBFdmVudEJ1eVRhbmsgKG1zZy5zZW5kZXIsIF90eXBlSUQsIG5ld1RhbmtJRC0xLCBiYXNlVGFua3NbX3R5cGVJRF0uY3VyclByaWNlKTsKICAgIH0KCiAgICAvL2Nhc2hpbmcgb3V0IHRoZSBtb25leSB0aGF0IGEgdGFuayBoYXMgZWFybmVkCiAgICBmdW5jdGlvbiBjYXNoT3V0VGFuayAodWludDI1NiBfdGFua0lEKSBwdWJsaWMgewogICAgICAgIC8vIHZhbGlkaXR5IGNoZWNrcwogICAgICAgIHJlcXVpcmUgKF90YW5rSUQgPiAwICYmIF90YW5rSUQgPCBuZXdUYW5rSUQpOyAKICAgICAgICByZXF1aXJlICh0YW5rc1tfdGFua0lEXS50YW5rT3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZSAoIXRhbmtzW190YW5rSURdLmluQXVjdGlvbiAmJiB0YW5rc1tfdGFua0lEXS5jdXJyQXVjdGlvbiA9PSAwKTsKICAgICAgICByZXF1aXJlICghdGFua3NbX3RhbmtJRF0uaW5CYXR0bGUpOwoKICAgICAgICAKICAgICAgICB1aW50MjU2IHRhbmtUeXBlID0gdGFua3NbX3RhbmtJRF0udHlwZUlEOwogICAgICAgIHVpbnQyNTYgbnVtVGFua3MgPSBiYXNlVGFua3NbdGFua1R5cGVdLm51bVRhbmtzOwoKICAgICAgICB1aW50MjU2IGFtb3VudCA9IGdldENhc2hPdXRBbW91bnQoX3RhbmtJRCk7CgogICAgICAgIHJlcXVpcmUgKHRoaXMuYmFsYW5jZSA+PSBhbW91bnQpOyAKICAgICAgICByZXF1aXJlIChhbW91bnQgPiAwKTsKICAgICAgICAKICAgICAgICByZXF1aXJlKHRhbmtzW190YW5rSURdLnRhbmtPd25lci5zZW5kKGFtb3VudCkpOwogICAgICAgIHRhbmtzW190YW5rSURdLmVhcm5pbmdzSW5kZXggPSBudW1UYW5rczsKICAgICAgICAKICAgICAgICBFdmVudENhc2hPdXRUYW5rIChtc2cuc2VuZGVyLCBhbW91bnQpOwogICAgfQogICAgCiAgICAvLyAwIC0+IGhlYWx0aCwgMSAtPiBhdHRhY2ssIDIgLT4gYXJtb3IsIDMgLT4gc3BlZWQKICAgIGZ1bmN0aW9uIHVwZ3JhZGVUYW5rICh1aW50MjU2IF90YW5rSUQsIHVpbnQ4IF91cGdyYWRlQ2hvaWNlKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgLy8gdmFsaWRpdHkgY2hlY2tzCiAgICAgICAgcmVxdWlyZSAoX3RhbmtJRCA+IDAgJiYgX3RhbmtJRCA8IG5ld1RhbmtJRCk7IAogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLnRhbmtPd25lciA9PSBtc2cuc2VuZGVyKTsgCiAgICAgICAgcmVxdWlyZSAoIXRhbmtzW190YW5rSURdLmluQXVjdGlvbik7CiAgICAgICAgcmVxdWlyZSAoIXRhbmtzW190YW5rSURdLmluQmF0dGxlKTsKICAgICAgICByZXF1aXJlIChfdXBncmFkZUNob2ljZSA+PSAwICYmIF91cGdyYWRlQ2hvaWNlIDwgNCk7IAogICAgICAgIAogICAgICAgIC8vIG5vIG92ZXJmbG93IQogICAgICAgIHJlcXVpcmUodGFua3NbX3RhbmtJRF0udXBncmFkZXNbX3VwZ3JhZGVDaG9pY2VdICsgMSA+IHRhbmtzW190YW5rSURdLnVwZ3JhZGVzW191cGdyYWRlQ2hvaWNlXSk7CgogICAgICAgIHVpbnQyNTYgdXBncmFkZVByaWNlID0gYmFzZVRhbmtzW3RhbmtzW190YW5rSURdLnR5cGVJRF0uc3RhcnRQcmljZSAvIDQ7CiAgICAgICAgcmVxdWlyZSAobXNnLnZhbHVlID49IHVwZ3JhZGVQcmljZSk7IAoKICAgICAgICB0YW5rc1tfdGFua0lEXS51cGdyYWRlc1tfdXBncmFkZUNob2ljZV0rKzsgCgogICAgICAgIGlmKG1zZy52YWx1ZSA+IHVwZ3JhZGVQcmljZSl7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IG1zZy52YWx1ZS11cGdyYWRlUHJpY2U7IAogICAgICAgIH0KCiAgICAgICAgdWludDI1NiB0b3VybmFtZW50UHJvY2VlZHMgPSAodXBncmFkZVByaWNlICogdG91cm5hbWVudFRheFJhdGUpIC8gMTAwOwoKICAgICAgICBiYWxhbmNlc1tvd25lcl0gKz0gKHVwZ3JhZGVQcmljZSAtIHRvdXJuYW1lbnRQcm9jZWVkcyk7IAogICAgICAgIHRvdXJuYW1lbnRBbXQgKz0gdG91cm5hbWVudFByb2NlZWRzOwogICAgICAgIAogICAgICAgIEV2ZW50VXBncmFkZVRhbmsgKG1zZy5zZW5kZXIsIF90YW5rSUQsIF91cGdyYWRlQ2hvaWNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBiYXR0bGUodWludDI1NiBfdGFua0lEKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShfdGFua0lEID4wICYmIF90YW5rSUQgPCBuZXdUYW5rSUQpOwogICAgICAgIHJlcXVpcmUodGFua3NbX3RhbmtJRF0udGFua093bmVyID09IG1zZy5zZW5kZXIpOwogICAgICAgIHJlcXVpcmUoIXRhbmtzW190YW5rSURdLmluQXVjdGlvbik7CiAgICAgICAgcmVxdWlyZSghdGFua3NbX3RhbmtJRF0uaW5CYXR0bGUpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IGJhdHRsZUZlZSk7CgogICAgICAgIGlmKG1zZy52YWx1ZSA+IGJhdHRsZUZlZSl7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IChtc2cudmFsdWUgLSBiYXR0bGVGZWUpOwogICAgICAgIH0KCiAgICAgICAgdG91cm5hbWVudEFtdCArPSBiYXR0bGVGZWU7CiAgICAgICAgCiAgICAgICAgRXZlbnRKb2luZWRCYXR0bGUobXNnLnNlbmRlciwgX3RhbmtJRCk7CgogICAgICAgIC8vIHVwZ3JhZGUgZnJvbSBleHAKICAgICAgICBpZih0YW5rc1tfdGFua0lEXS5leHAgPT0gNSl7CiAgICAgICAgICAgIHRhbmtzW190YW5rSURdLnVwZ3JhZGVzW3RhbmtzW190YW5rSURdLm5leHQrK10rKzsKICAgICAgICAgICAgdGFua3NbX3RhbmtJRF0uZXhwID0gMDsKICAgICAgICAgICAgaWYodGFua3NbX3RhbmtJRF0ubmV4dCA9PSA0KXsKICAgICAgICAgICAgICAgIHRhbmtzW190YW5rSURdLm5leHQgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBhZGQgdG8gdGVhbXMKICAgICAgICBpZihiYXR0bGVUZWFtcy5sZW5ndGggPCAyKnRlYW1TaXplIC0gMSl7CiAgICAgICAgICAgIGJhdHRsZVRlYW1zLnB1c2goX3RhbmtJRCk7CiAgICAgICAgICAgIHRhbmtzW190YW5rSURdLmluQmF0dGxlID0gdHJ1ZTsKCiAgICAgICAgLy8gdGltZSB0byBiYXR0bGUhCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYmF0dGxlVGVhbXMucHVzaChfdGFua0lEKTsKCiAgICAgICAgICAgIHVpbnQyNTZbNF0gbWVtb3J5IHRlYW1BOwogICAgICAgICAgICB1aW50MjU2WzRdIG1lbW9yeSB0ZWFtQjsKICAgICAgICAgICAgdWludDI1Nls0XSBtZW1vcnkgdGVtcDsKCiAgICAgICAgICAgIGZvcih1aW50IGk9MDsgaTx0ZWFtU2l6ZTsgaSsrKXsKICAgICAgICAgICAgICAgIHRlbXAgPSBnZXRDdXJyZW50U3RhdHMoYmF0dGxlVGVhbXNbaV0pOwogICAgICAgICAgICAgICAgdGVhbUFbMF0gKz0gdGVtcFswXTsKICAgICAgICAgICAgICAgIHRlYW1BWzFdICs9IHRlbXBbMV07CiAgICAgICAgICAgICAgICB0ZWFtQVsyXSArPSB0ZW1wWzJdOwogICAgICAgICAgICAgICAgdGVhbUFbM10gKz0gdGVtcFszXTsKCiAgICAgICAgICAgICAgICB0ZW1wID0gZ2V0Q3VycmVudFN0YXRzKGJhdHRsZVRlYW1zW3RlYW1TaXplK2ldKTsKICAgICAgICAgICAgICAgIHRlYW1CWzBdICs9IHRlbXBbMF07CiAgICAgICAgICAgICAgICB0ZWFtQlsxXSArPSB0ZW1wWzFdOwogICAgICAgICAgICAgICAgdGVhbUJbMl0gKz0gdGVtcFsyXTsKICAgICAgICAgICAgICAgIHRlYW1CWzNdICs9IHRlbXBbM107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIGxvd2VyIHNjb3JlIGlzIGJldHRlcgogICAgICAgICAgICB1aW50MjU2IGRpZmZBID0gdGVhbUFbMV0gLSB0ZWFtQlsyXTsKICAgICAgICAgICAgdWludDI1NiBkaWZmQiA9IHRlYW1CWzFdIC0gdGVhbUFbMl07CiAgICAgICAgICAgIAogICAgICAgICAgICBkaWZmQSA9IGRpZmZBID4gMCA/IGRpZmZBIDogMTsKICAgICAgICAgICAgZGlmZkIgPSBkaWZmQiA+IDAgPyBkaWZmQiA6IDE7CgogICAgICAgICAgICB1aW50MjU2IHRlYW1BU2NvcmUgPSB0ZWFtQlswXSAvIChkaWZmQSAqIHRlYW1BWzNdKTsKICAgICAgICAgICAgdWludDI1NiB0ZWFtQlNjb3JlID0gdGVhbUFbMF0gLyAoZGlmZkIgKiB0ZWFtQlszXSk7CgogICAgICAgICAgICBpZigodGVhbUJbMF0gJSAoZGlmZkEgKiB0ZWFtQVszXSkpICE9IDApIHsKICAgICAgICAgICAgICAgIHRlYW1BU2NvcmUgKz0gMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoKHRlYW1BWzBdICUgKGRpZmZCICogdGVhbUJbM10pKSAhPSAwKSB7CiAgICAgICAgICAgICAgICB0ZWFtQlNjb3JlICs9IDE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHVpbnQyNTYgdG9EaXN0cmlidXRlID0gdG91cm5hbWVudEFtdCAvIHRlYW1TaXplOwogICAgICAgICAgICB0b3VybmFtZW50QW10IC09IHRlYW1TaXplKnRvRGlzdHJpYnV0ZTsKCiAgICAgICAgICAgIGlmKHRlYW1BU2NvcmUgPD0gdGVhbUJTY29yZSl7CiAgICAgICAgICAgICAgICBmb3IoaT0wOyBpPHRlYW1TaXplOyBpKyspewogICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzW3RhbmtzW2JhdHRsZVRlYW1zW2ldXS50YW5rT3duZXJdICs9IHRvRGlzdHJpYnV0ZTsgICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZvcihpPTA7IGk8dGVhbVNpemU7IGkrKyl7CiAgICAgICAgICAgICAgICAgICAgYmFsYW5jZXNbdGFua3NbYmF0dGxlVGVhbXNbdGVhbVNpemUraV1dLnRhbmtPd25lcl0gKz0gdG9EaXN0cmlidXRlOyAgIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvcihpPTA7IGk8Mip0ZWFtU2l6ZTsgaSsrKXsKICAgICAgICAgICAgICAgIHRhbmtzW2JhdHRsZVRlYW1zW2ldXS5pbkJhdHRsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGFua3NbYmF0dGxlVGVhbXNbaV1dLmV4cCsrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBFdmVudEJhdHRsZU92ZXIoKTsKCiAgICAgICAgICAgIGJhdHRsZVRlYW1zLmxlbmd0aCA9IDA7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHF1aXRCYXR0bGUodWludDI1NiBfdGFua0lEKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3RhbmtJRCA+MCAmJiBfdGFua0lEIDwgbmV3VGFua0lEKTsKICAgICAgICByZXF1aXJlKHRhbmtzW190YW5rSURdLnRhbmtPd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKHRhbmtzW190YW5rSURdLmluQmF0dGxlKTsKICAgICAgICAKICAgICAgICB1aW50IGwgPSBiYXR0bGVUZWFtcy5sZW5ndGg7CgogICAgICAgIGZvcih1aW50IGk9MDsgaTxsOyBpKyspewogICAgICAgICAgICBpZihiYXR0bGVUZWFtc1tpXSA9PSBfdGFua0lEKXsKICAgICAgICAgICAgICAgIEV2ZW50UXVpdEJhdHRsZShtc2cuc2VuZGVyLCBfdGFua0lEKTsKCiAgICAgICAgICAgICAgICBkZWxldGUgYmF0dGxlVGVhbXNbaV07CiAgICAgICAgICAgICAgICBiYXR0bGVUZWFtc1tpXSA9IGJhdHRsZVRlYW1zW2wtMV07CiAgICAgICAgICAgICAgICBiYXR0bGVUZWFtcy5sZW5ndGggPSBsLTE7CiAgICAgICAgICAgICAgICB0YW5rc1tfdGFua0lEXS5pbkJhdHRsZSA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvLyBDT05WRU5JRU5DRSBHRVRURVIgTUVUSE9EUwogICAgCiAgICBmdW5jdGlvbiBnZXRDdXJyQXVjdGlvblByaWNlVGFua0lEICh1aW50MjU2IF90YW5rSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHByaWNlKXsKICAgICAgICByZXF1aXJlICh0YW5rc1tfdGFua0lEXS5pbkF1Y3Rpb24pOwogICAgICAgIHVpbnQyNTYgYXVjdGlvbklEID0gdGFua3NbX3RhbmtJRF0uY3VyckF1Y3Rpb247CgogICAgICAgIHJldHVybiBnZXRDdXJyQXVjdGlvblByaWNlQXVjdGlvbklEKGF1Y3Rpb25JRCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldFBsYXllckJhbGFuY2UoYWRkcmVzcyBfcGxheWVySUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfcGxheWVySURdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRDb250cmFjdEJhbGFuY2UoKSBwdWJsaWMgY29uc3RhbnQgaXNPd25lciByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRhbmtPd25lcih1aW50MjU2IF90YW5rSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmVxdWlyZShfdGFua0lEID4gMCAmJiBfdGFua0lEIDwgbmV3VGFua0lEKTsKICAgICAgICByZXR1cm4gdGFua3NbX3RhbmtJRF0udGFua093bmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE93bmVkVGFua3MoYWRkcmVzcyBfYWRkKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NltdKXsKICAgICAgICByZXR1cm4gdXNlclRhbmtzW19hZGRdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRhbmtUeXBlKHVpbnQyNTYgX3RhbmtJRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXF1aXJlKF90YW5rSUQgPiAwICYmIF90YW5rSUQgPCBuZXdUYW5rSUQpOwogICAgICAgIHJldHVybiB0YW5rc1tfdGFua0lEXS50eXBlSUQ7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Q3VyclR5cGVQcmljZSh1aW50MjU2IF90eXBlSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmVxdWlyZShfdHlwZUlEID4gMCAmJiBfdHlwZUlEIDwgbmV3VHlwZUlEKTsKICAgICAgICByZXR1cm4gYmFzZVRhbmtzW190eXBlSURdLmN1cnJQcmljZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXROdW1UYW5rc1R5cGUodWludDI1NiBfdHlwZUlEKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJlcXVpcmUoX3R5cGVJRCA+IDAgJiYgX3R5cGVJRCA8IG5ld1R5cGVJRCk7CiAgICAgICAgcmV0dXJuIGJhc2VUYW5rc1tfdHlwZUlEXS5udW1UYW5rczsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0TnVtVGFua3MoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KXsKICAgICAgICByZXR1cm4gbmV3VGFua0lELTE7CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tUYW5rQXVjdGlvbih1aW50MjU2IF90YW5rSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZSgwIDwgX3RhbmtJRCAmJiBfdGFua0lEIDwgbmV3VGFua0lEKTsKICAgICAgICByZXR1cm4gdGFua3NbX3RhbmtJRF0uaW5BdWN0aW9uOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEN1cnJBdWN0aW9uUHJpY2VBdWN0aW9uSUQodWludDI1NiBfYXVjdGlvbklEKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgcmVxdWlyZShfYXVjdGlvbklEID4gMCAmJiBfYXVjdGlvbklEIDwgbmV3QXVjdGlvbklEKTsKCiAgICAgICAgQXVjdGlvbk9iamVjdCBtZW1vcnkgY3VyckF1Y3Rpb24gPSBhdWN0aW9uc1tfYXVjdGlvbklEXTsKCiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBjdXJyZW50IGF1Y3Rpb24gcHJpY2UgICAgICAgCiAgICAgICAgdWludDI1NiBjdXJyUHJpY2UgPSBjdXJyQXVjdGlvbi5zdGFydFByaWNlOwogICAgICAgIHVpbnQyNTYgZGlmZiA9ICgoY3VyckF1Y3Rpb24uc3RhcnRQcmljZS1jdXJyQXVjdGlvbi5lbmRQcmljZSkgLyAoY3VyckF1Y3Rpb24uZHVyYXRpb24pKSAqIChub3ctY3VyckF1Y3Rpb24uc3RhcnRUaW1lKTsKCgogICAgICAgIGlmIChjdXJyUHJpY2UtZGlmZiA8IGN1cnJBdWN0aW9uLmVuZFByaWNlIHx8IGRpZmYgPiBjdXJyUHJpY2UpeyAKICAgICAgICAgICAgY3VyclByaWNlID0gY3VyckF1Y3Rpb24uZW5kUHJpY2U7ICAKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjdXJyUHJpY2UgLT0gZGlmZjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBjdXJyUHJpY2U7CiAgICB9CgogICAgLy8gcmV0dXJucyBbdGFua0lELCBjdXJyUHJpY2UsIGFsaXZlXQogICAgZnVuY3Rpb24gZ2V0QXVjdGlvbih1aW50MjU2IF9hdWN0aW9uSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2WzNdKXsKICAgICAgICByZXF1aXJlKF9hdWN0aW9uSUQgPiAwICYmIF9hdWN0aW9uSUQgPCBuZXdBdWN0aW9uSUQpOwoKICAgICAgICB1aW50MjU2IHRhbmtJRCA9IGF1Y3Rpb25zW19hdWN0aW9uSURdLnRhbms7CiAgICAgICAgdWludDI1NiBjdXJyUHJpY2UgPSBnZXRDdXJyQXVjdGlvblByaWNlQXVjdGlvbklEKF9hdWN0aW9uSUQpOwogICAgICAgIGJvb2wgYWxpdmUgPSBhdWN0aW9uc1tfYXVjdGlvbklEXS5hbGl2ZTsKCiAgICAgICAgdWludDI1NlszXSBtZW1vcnkgb3V0OwogICAgICAgIG91dFswXSA9IHRhbmtJRDsKICAgICAgICBvdXRbMV0gPSBjdXJyUHJpY2U7CiAgICAgICAgb3V0WzJdID0gYWxpdmUgPyAxIDogMDsKCiAgICAgICAgcmV0dXJuIG91dDsKICAgIH0KIAogICAgZnVuY3Rpb24gZ2V0VXBncmFkZVByaWNlKHVpbnQyNTYgX3RhbmtJRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXF1aXJlKF90YW5rSUQgPjAgJiYgX3RhbmtJRCA8IG5ld1RhbmtJRCk7CiAgICAgICAgcmV0dXJuIGJhc2VUYW5rc1t0YW5rc1tfdGFua0lEXS50eXBlSURdLnN0YXJ0UHJpY2UgLyA0OwogICAgfQoKICAgIC8vIFtoZWFsdGgsIGF0dGFjaywgYXJtb3IsIHNwZWVkXQogICAgZnVuY3Rpb24gZ2V0VXBncmFkZUFtdCh1aW50MjU2IF90YW5rSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50OFs0XSkgewogICAgICAgIHJlcXVpcmUoX3RhbmtJRCA+IDAgJiYgX3RhbmtJRCA8IG5ld1RhbmtJRCk7CgogICAgICAgIHJldHVybiB0YW5rc1tfdGFua0lEXS51cGdyYWRlczsKICAgIH0KCiAgICAvLyBbaGVhbHRoLCBhdHRhY2ssIGFybW9yLCBzcGVlZF0KICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRTdGF0cyh1aW50MjU2IF90YW5rSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2WzRdKSB7CiAgICAgICAgcmVxdWlyZShfdGFua0lEID4gMCAmJiBfdGFua0lEIDwgbmV3VGFua0lEKTsKCiAgICAgICAgVGFua1R5cGUgbWVtb3J5IGJhc2VUeXBlID0gYmFzZVRhbmtzW3RhbmtzW190YW5rSURdLnR5cGVJRF07CiAgICAgICAgdWludDhbNF0gbWVtb3J5IHVwZ3JhZGVzID0gdGFua3NbX3RhbmtJRF0udXBncmFkZXM7CiAgICAgICAgdWludDI1Nls0XSBtZW1vcnkgb3V0OwoKICAgICAgICBvdXRbMF0gPSBiYXNlVHlwZS5iYXNlSGVhbHRoICsgKHVwZ3JhZGVzWzBdICogYmFzZVR5cGUuYmFzZUhlYWx0aCAvIDQpOwogICAgICAgIG91dFsxXSA9IGJhc2VUeXBlLmJhc2VBdHRhY2sgKyB1cGdyYWRlc1sxXTsgCiAgICAgICAgb3V0WzJdID0gYmFzZVR5cGUuYmFzZUFybW9yICsgdXBncmFkZXNbMl07CiAgICAgICAgb3V0WzNdID0gYmFzZVR5cGUuYmFzZVNwZWVkICsgdXBncmFkZXNbM107CiAgICAgICAgCiAgICAgICAgcmV0dXJuIG91dDsKICAgIH0KCiAgICBmdW5jdGlvbiBpbkJhdHRsZSh1aW50MjU2IF90YW5rSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdGFua0lEID4gMCAmJiBfdGFua0lEIDwgbmV3VGFua0lEKTsKICAgICAgICByZXR1cm4gdGFua3NbX3RhbmtJRF0uaW5CYXR0bGU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Q3VyclRlYW1TaXplcygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGJhdHRsZVRlYW1zLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRCYXR0bGVUZWFtU2l6ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50OCkgewogICAgICAgIHJldHVybiB0ZWFtU2l6ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkb25hdGUoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgICAgICB0b3VybmFtZW50QW10ICs9IG1zZy52YWx1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb3VybmFtZW50QW10KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gdG91cm5hbWVudEFtdDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRCYXR0bGVGZWUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgcmV0dXJuIGJhdHRsZUZlZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb3VybmFtZW50UmF0ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50OCl7CiAgICAgICAgcmV0dXJuIHRvdXJuYW1lbnRUYXhSYXRlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEN1cnJGZWVSYXRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgcmV0dXJuIGZlZUFtdDsKICAgIH0KICAgIAogICAgLy8gW3N0YXJ0UHJpY2UsIGN1cnJQcmljZSwgZWFybmluZ3MsIGJhc2VIZWFsdGgsIGJhc2VBdHRhY2ssIGJhc2VBcm1vciwgYmFzZVNwZWVkLCBudW1UYW5rc10gCiAgICBmdW5jdGlvbiBnZXRCYXNlVHlwZVN0YXRzKHVpbnQyNTYgX3R5cGVJRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTZbOF0pewogICAgICAgIHJlcXVpcmUoMCA8IF90eXBlSUQgJiYgX3R5cGVJRCA8IG5ld1R5cGVJRCk7CiAgICAgICAgdWludDI1Nls4XSBtZW1vcnkgb3V0OwoKICAgICAgICBvdXRbMF0gPSBiYXNlVGFua3NbX3R5cGVJRF0uc3RhcnRQcmljZTsKICAgICAgICBvdXRbMV0gPSBiYXNlVGFua3NbX3R5cGVJRF0uY3VyclByaWNlOwogICAgICAgIG91dFsyXSA9IGJhc2VUYW5rc1tfdHlwZUlEXS5lYXJuaW5nczsKICAgICAgICBvdXRbM10gPSBiYXNlVGFua3NbX3R5cGVJRF0uYmFzZUhlYWx0aDsKICAgICAgICBvdXRbNF0gPSBiYXNlVGFua3NbX3R5cGVJRF0uYmFzZUF0dGFjazsKICAgICAgICBvdXRbNV0gPSBiYXNlVGFua3NbX3R5cGVJRF0uYmFzZUFybW9yOwogICAgICAgIG91dFs2XSA9IGJhc2VUYW5rc1tfdHlwZUlEXS5iYXNlU3BlZWQ7CiAgICAgICAgb3V0WzddID0gYmFzZVRhbmtzW190eXBlSURdLm51bVRhbmtzOwoKICAgICAgICByZXR1cm4gb3V0OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldENhc2hPdXRBbW91bnQodWludDI1NiBfdGFua0lEKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJlcXVpcmUoMCA8IF90YW5rSUQgJiYgX3RhbmtJRCA8IG5ld1RhbmtJRCk7CgogICAgICAgIHVpbnQyNTYgdGFua1R5cGUgPSB0YW5rc1tfdGFua0lEXS50eXBlSUQ7CiAgICAgICAgdWludDI1NiBlYXJuaW5ncyA9IGJhc2VUYW5rc1t0YW5rVHlwZV0uZWFybmluZ3M7CiAgICAgICAgdWludDI1NiBlYXJuaW5nc0luZGV4ID0gdGFua3NbX3RhbmtJRF0uZWFybmluZ3NJbmRleDsKICAgICAgICB1aW50MjU2IG51bVRhbmtzID0gYmFzZVRhbmtzW3RhbmtUeXBlXS5udW1UYW5rczsKCiAgICAgICAgcmV0dXJuIGVhcm5pbmdzICogKG51bVRhbmtzIC0gZWFybmluZ3NJbmRleCk7CiAgICB9CgogICAgLy8gcmV0dXJucyBbZXhwLCBuZXh0XQogICAgZnVuY3Rpb24gZ2V0RXhwKHVpbnQyNTYgX3RhbmtJRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4WzJdKXsKICAgICAgICByZXF1aXJlKDA8X3RhbmtJRCAmJiBfdGFua0lEIDwgbmV3VGFua0lEKTsKCiAgICAgICAgdWludDhbMl0gbWVtb3J5IG91dDsKICAgICAgICBvdXRbMF0gPSB0YW5rc1tfdGFua0lEXS5leHA7CiAgICAgICAgb3V0WzFdID0gdGFua3NbX3RhbmtJRF0ubmV4dDsKCiAgICAgICAgcmV0dXJuIG91dDsKICAgIH0KfQ=='.
	

]
