Class {
	#name : #SRTbd18a4335aef9c1bff9ca2f7166ae8b9c5420a7b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbd18a4335aef9c1bff9ca2f7166ae8b9c5420a7b >> base64 [
	^ 'LyoqCiAqIEVkZ2VsZXNzIENhc2lubyBQcm94eSBDb250cmFjdC4gU2VydmVzIGFzIGEgcHJveHkgZm9yIGdhbWUgZnVuY3Rpb25hbGl0eS4KICogQWxsb3dzIHRoZSBwbGF5ZXJzIHRvIGRlcG9zaXQgYW5kIHdpdGhkcmF3IGZ1bmRzLgogKiBBbGxvd3MgYXV0aG9yaXplZCBhZGRyZXNzZXMgdG8gbWFrZSBnYW1lIHRyYW5zYWN0aW9ucy4KICogYXV0aG9yOiBKdWxpYSBBbHRlbnJpZWQKICoqLwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgoKY29udHJhY3QgdG9rZW4gewoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3Mgc2VuZGVyLCBhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCkgcHVibGljIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7fQoJCglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCkgcHVibGljIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7fQoJCglmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBob2xkZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpIHt9Cn0KCmNvbnRyYWN0IG93bmVkIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICBtb2RpZmllciBvbmx5T3duZXIgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBvd25lZCgpIHB1YmxpY3sKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWN7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KfQoKY29udHJhY3Qgc2FmZU1hdGggewoJLy9pbnRlcm5hbHMKCWZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnModWludCkgewoJCWFzc2VydChiIDw9IGEpOwoJCXJldHVybiBhIC0gYjsKCX0KCglmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zKHVpbnQpIHsKCQl1aW50IGMgPSBhICsgYjsKCQlhc3NlcnQoYyA+PSBhICYmIGMgPj0gYik7CgkJcmV0dXJuIGM7Cgl9CgkKCWZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgY2FzaW5vQmFuayBpcyBvd25lZCwgc2FmZU1hdGh7CgkvKiogdGhlIHRvdGFsIGJhbGFuY2Ugb2YgYWxsIHBsYXllcnMgd2l0aCA0IHZpcnR1YWwgZGVjaW1hbHMgKiovCgl1aW50IHB1YmxpYyBwbGF5ZXJCYWxhbmNlOwoJLyoqIHRoZSBiYWxhbmNlIHBlciBwbGF5ZXIgaW4gZWRnZWxlc3MgdG9rZW5zIHdpdGggNCB2aXJ0dWFsIGRlY2ltYWxzICovCiAgbWFwcGluZyhhZGRyZXNzPT51aW50KSBwdWJsaWMgYmFsYW5jZU9mOwoJLyoqIGluIGNhc2UgdGhlIHVzZXIgd2FudHMvbmVlZHMgdG8gY2FsbCB0aGUgd2l0aGRyYXcgZnVuY3Rpb24gZnJvbSBoaXMgb3duIHdhbGxldCwgaGUgZmlyc3QgbmVlZHMgdG8gcmVxdWVzdCBhIHdpdGhkcmF3YWwgKi8KCW1hcHBpbmcoYWRkcmVzcz0+dWludCkgcHVibGljIHdpdGhkcmF3QWZ0ZXI7CgkvKiogdGhlIHByaWNlIHBlciBrZ2FzIGluIHRva2VucyAoNCBkZWNpbWFscykgKi8KCXVpbnQgcHVibGljIGdhc1ByaWNlID0gNDsKCS8qKiB0aGUgYXZlcmFnZSBhbW91bnQgb2YgZ2FzIGNvbnN1bWVuZCBwZXIgZ2FtZSAqKi8KCW1hcHBpbmcoYWRkcmVzcz0+dWludCkgcHVibGljIGF2Z0dhczsKCS8qKiB0aGUgZWRnZWxlc3MgdG9rZW4gY29udHJhY3QgKi8KCXRva2VuIGVkZzsKCS8qKiBvd25lciBzaG91bGQgYmUgYWJsZSB0byBjbG9zZSB0aGUgY29udHJhY3QgaXMgbm9ib2R5IGhhcyBiZWVuIHVzaW5nIGl0IGZvciBhdCBsZWFzdCAzMCBkYXlzICovCgl1aW50IHB1YmxpYyBjbG9zZUF0OwoJLyoqIGluZm9ybXMgbGlzdGVuZXJzIGhvdyBtYW55IHRva2VucyB3ZXJlIGRlcG9zaXRlZCBmb3IgYSBwbGF5ZXIgKi8KCWV2ZW50IERlcG9zaXQoYWRkcmVzcyBfcGxheWVyLCB1aW50IF9udW1Ub2tlbnMsIGJvb2wgX2NoYXJnZUdhcyk7CgkvKiogaW5mb3JtcyBsaXN0ZW5lcnMgaG93IG1hbnkgdG9rZW5zIHdlcmUgd2l0aGRyYXduIGZyb20gdGhlIHBsYXllciB0byB0aGUgcmVjZWl2ZXIgYWRkcmVzcyAqLwoJZXZlbnQgV2l0aGRyYXdhbChhZGRyZXNzIF9wbGF5ZXIsIGFkZHJlc3MgX3JlY2VpdmVyLCB1aW50IF9udW1Ub2tlbnMpOwoJCglmdW5jdGlvbiBjYXNpbm9CYW5rKGFkZHJlc3MgdG9rZW5Db250cmFjdCkgcHVibGljewoJCWVkZyA9IHRva2VuKHRva2VuQ29udHJhY3QpOwoJfQoJCgkvKioKCSogYWNjZXB0cyBkZXBvc2l0cyBmb3IgYW4gYXJiaXRyYXJ5IGFkZHJlc3MuCgkqIHJldHJpZXZlcyB0b2tlbnMgZnJvbSB0aGUgbWVzc2FnZSBzZW5kZXIgYW5kIGFkZHMgdGhlbSB0byB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCgkqIGVkZ2VsZXNzIHRva2VucyBkbyBub3QgaGF2ZSBhbnkgZGVjaW1hbHMsIGJ1dCBhcmUgcmVwcmVzZW50ZWQgb24gdGhpcyBjb250cmFjdCB3aXRoIDQgZGVjaW1hbHMuCgkqIEBwYXJhbSByZWNlaXZlciAgYWRkcmVzcyBvZiB0aGUgcmVjZWl2ZXIKCSogICAgICAgIG51bVRva2VucyBudW1iZXIgb2YgdG9rZW5zIHRvIGRlcG9zaXQgKDAgZGVjaW1hbHMpCgkqCQkJCSBjaGFyZ2VHYXMgaW5kaWNhdGVzIGlmIHRoZSBnYXMgY29zdCBpcyBzdWJ0cmFjdGVkIGZyb20gdGhlIHVzZXIncyBlZGdlbGVzcyB0b2tlbiBiYWxhbmNlCgkqKi8KCWZ1bmN0aW9uIGRlcG9zaXQoYWRkcmVzcyByZWNlaXZlciwgdWludCBudW1Ub2tlbnMsIGJvb2wgY2hhcmdlR2FzKSBwdWJsaWMgaXNBbGl2ZXsKCQlyZXF1aXJlKG51bVRva2VucyA+IDApOwoJCXVpbnQgdmFsdWUgPSBzYWZlTXVsKG51bVRva2VucywxMDAwMCk7IAoJCWlmKGNoYXJnZUdhcykgdmFsdWUgPSBzYWZlU3ViKHZhbHVlLCBtc2cuZ2FzLzEwMDAgKiBnYXNQcmljZSk7CgkJYXNzZXJ0KGVkZy50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgYWRkcmVzcyh0aGlzKSwgbnVtVG9rZW5zKSk7CgkJYmFsYW5jZU9mW3JlY2VpdmVyXSA9IHNhZmVBZGQoYmFsYW5jZU9mW3JlY2VpdmVyXSwgdmFsdWUpOwoJCXBsYXllckJhbGFuY2UgPSBzYWZlQWRkKHBsYXllckJhbGFuY2UsIHZhbHVlKTsKCQlEZXBvc2l0KHJlY2VpdmVyLCBudW1Ub2tlbnMsIGNoYXJnZUdhcyk7CiAgfQoJCgkvKioKCSogSWYgdGhlIHVzZXIgd2FudHMvbmVlZHMgdG8gd2l0aGRyYXcgaGlzIGZ1bmRzIGhpbXNlbGYsIGhlIG5lZWRzIHRvIHJlcXVlc3QgdGhlIHdpdGhkcmF3YWwgZmlyc3QuCgkqIFRoaXMgbWV0aG9kIHNldHMgdGhlIGVhcmxpZXN0IHBvc3NpYmxlIHdpdGhkcmF3YWwgZGF0ZSB0byA3IG1pbnV0ZXMgZnJvbSBub3cuIAoJKiBSZWFzb246IFRoZSB1c2VyIHNob3VsZCBub3QgYmUgYWJsZSB0byB3aXRoZHJhdyBoaXMgZnVuZHMsIHdoaWxlIHRoZSB0aGUgbGFzdCBnYW1lIG1ldGhvZHMgaGF2ZSBub3QgeWV0IGJlZW4gbWluZWQuCgkqKi8KCWZ1bmN0aW9uIHJlcXVlc3RXaXRoZHJhd2FsKCkgcHVibGljewoJCXdpdGhkcmF3QWZ0ZXJbbXNnLnNlbmRlcl0gPSBub3cgKyA3IG1pbnV0ZXM7Cgl9CgkKCS8qKgoJKiBJbiBjYXNlIHRoZSB1c2VyIHJlcXVlc3RlZCBhIHdpdGhkcmF3YWwgYW5kIGNoYW5nZXMgaGlzIG1pbmQuCgkqIE5lY2Vzc2FyeSB0byBiZSBhYmxlIHRvIGNvbnRpbnVlIHBsYXlpbmcuCgkqKi8KCWZ1bmN0aW9uIGNhbmNlbFdpdGhkcmF3YWxSZXF1ZXN0KCkgcHVibGljewoJCXdpdGhkcmF3QWZ0ZXJbbXNnLnNlbmRlcl0gPSAwOwoJfQoJCgkvKioKCSogd2l0aGRyYXdzIGFuIGFtb3VudCBmcm9tIHRoZSB1c2VyIGJhbGFuY2UgaWYgNyBtaW51dGVzIHBhc3NlZCBzaW5jZSB0aGUgcmVxdWVzdC4KCSogQHBhcmFtIGFtb3VudCB0aGUgYW1vdW50IG9mIHRva2VucyB0byB3aXRoZHJhdwoJKiovCglmdW5jdGlvbiB3aXRoZHJhdyh1aW50IGFtb3VudCkgcHVibGljIGtlZXBBbGl2ZXsKCQlyZXF1aXJlKHdpdGhkcmF3QWZ0ZXJbbXNnLnNlbmRlcl0+MCAmJiBub3c+d2l0aGRyYXdBZnRlclttc2cuc2VuZGVyXSk7CgkJd2l0aGRyYXdBZnRlclttc2cuc2VuZGVyXSA9IDA7CgkJdWludCB2YWx1ZSA9IHNhZmVNdWwoYW1vdW50LDEwMDAwKTsKCQliYWxhbmNlT2ZbbXNnLnNlbmRlcl09c2FmZVN1YihiYWxhbmNlT2ZbbXNnLnNlbmRlcl0sdmFsdWUpOwoJCXBsYXllckJhbGFuY2UgPSBzYWZlU3ViKHBsYXllckJhbGFuY2UsIHZhbHVlKTsKCQlhc3NlcnQoZWRnLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGFtb3VudCkpOwoJCVdpdGhkcmF3YWwobXNnLnNlbmRlciwgbXNnLnNlbmRlciwgYW1vdW50KTsKCX0KCQoJLyoqCgkqIGxldHMgdGhlIG93bmVyIHdpdGhkcmF3IGZyb20gdGhlIGJhbmtyb2xsCgkqIEBwYXJhbSBudW1Ub2tlbnMgdGhlIG51bWJlciBvZiB0b2tlbnMgdG8gd2l0aGRyYXcgKDAgZGVjaW1hbHMpCgkqKi8KCWZ1bmN0aW9uIHdpdGhkcmF3QmFua3JvbGwodWludCBudW1Ub2tlbnMpIHB1YmxpYyBvbmx5T3duZXIgewoJCXJlcXVpcmUobnVtVG9rZW5zIDw9IGJhbmtyb2xsKCkpOwoJCWFzc2VydChlZGcudHJhbnNmZXIob3duZXIsIG51bVRva2VucykpOwoJfQoJCgkvKioKCSogcmV0dXJucyB0aGUgY3VycmVudCBiYW5rcm9sbCBpbiB0b2tlbnMgd2l0aCAwIGRlY2ltYWxzCgkqKi8KCWZ1bmN0aW9uIGJhbmtyb2xsKCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCl7CgkJcmV0dXJuIHNhZmVTdWIoZWRnLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKSwgcGxheWVyQmFsYW5jZS8xMDAwMCk7Cgl9CgkKCS8qKiAKCSogbGV0cyB0aGUgb3duZXIgY2xvc2UgdGhlIGNvbnRyYWN0IGlmIHRoZXJlIGFyZSBubyBwbGF5ZXIgZnVuZHMgb24gaXQgb3IgaWYgbm9ib2R5IGhhcyBiZWVuIHVzaW5nIGl0IGZvciBhdCBsZWFzdCAzMCBkYXlzIAoJKi8KICBmdW5jdGlvbiBjbG9zZSgpIG9ubHlPd25lciBwdWJsaWN7CgkJaWYocGxheWVyQmFsYW5jZSA9PSAwKSBzZWxmZGVzdHJ1Y3Qob3duZXIpOwoJCWlmKGNsb3NlQXQgPT0gMCkgY2xvc2VBdCA9IG5vdyArIDMwIGRheXM7CgkJZWxzZSBpZihjbG9zZUF0IDwgbm93KSBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogIH0KCQoJLyoqCgkqIGluIGNhc2UgY2xvc2UgaGFzIGJlZW4gY2FsbGVkIGFjY2lkZW50YWxseS4KCSoqLwoJZnVuY3Rpb24gb3BlbigpIG9ubHlPd25lciBwdWJsaWN7CgkJY2xvc2VBdCA9IDA7Cgl9CgkKCS8qKgoJKiBtYWtlIHN1cmUgdGhlIGNvbnRyYWN0IGlzIG5vdCBpbiBwcm9jZXNzIG9mIGJlaW5nIGNsb3NlZC4KCSoqLwoJbW9kaWZpZXIgaXNBbGl2ZSB7CgkJcmVxdWlyZShjbG9zZUF0ID09IDApOwoJCV87Cgl9CgkKCS8qKgoJKiBkZWxheXMgdGhlIHRpbWUgb2YgY2xvc2luZy4KCSoqLwoJbW9kaWZpZXIga2VlcEFsaXZlIHsKCQlpZihjbG9zZUF0ID4gMCkgY2xvc2VBdCA9IG5vdyArIDMwIGRheXM7CgkJXzsKCX0KfQoKY29udHJhY3QgY2FzaW5vUHJveHkgaXMgY2FzaW5vQmFua3sKCS8qKiBpbmRpY2F0ZXMgaWYgYW4gYWRkcmVzcyBpcyBhdXRob3JpemVkIHRvIGNhbGwgZ2FtZSBmdW5jdGlvbnMgICovCiAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBhdXRob3JpemVkOwogIC8qKiBpbmRpY2F0ZXMgaWYgdGhlIHVzZXIgYWxsb3dlZCBhIGNhc2lubyBnYW1lIGFkZHJlc3MgdG8gbW92ZSBoaXMvaGVyIGZ1bmRzICoqLwogIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkpIHB1YmxpYyBhdXRob3JpemVkQnlVc2VyOwogIC8qKiBjb3VudHMgaG93IG9mdGVuIGFuIGFkZHJlc3MgaGFzIGJlZW4gZGVhdXRob3JpemVkIGJ5IHRoZSB1c2VyID0+IG1ha2Ugc3VyZSBzaWduYXR6dXJlcyBjYW4ndCBiZSByZXVzZWQqKi8KICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQ4KSkgcHVibGljIGxvY2tlZEJ5VXNlcjsKCS8qKiBsaXN0IG9mIGNhc2lubyBnYW1lIGNvbnRyYWN0IGFkZHJlc3NlcyAqLwogIGFkZHJlc3NbXSBwdWJsaWMgY2FzaW5vR2FtZXM7CgkvKiogYSBudW1iZXIgdG8gY291bnQgd2l0aGRyYXdhbCBzaWduYXR1cmVzIHRvIGVuc3VyZSBlYWNoIHNpZ25hdHVyZSBpcyBkaWZmZXJlbnQgZXZlbiBpZiB3aXRoZHJhd2luZyB0aGUgc2FtZSBhbW91bnQgdG8gdGhlIHNhbWUgYWRkcmVzcyAqLwoJbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBjb3VudDsKCgltb2RpZmllciBvbmx5QXV0aG9yaXplZCB7CiAgICByZXF1aXJlKGF1dGhvcml6ZWRbbXNnLnNlbmRlcl0pOwogICAgXzsKICB9CgkKCW1vZGlmaWVyIG9ubHlDYXNpbm9HYW1lcyB7CgkJYm9vbCBpc0Nhc2lubzsKCQlmb3IgKHVpbnQgaSA9IDA7IGkgPCBjYXNpbm9HYW1lcy5sZW5ndGg7IGkrKyl7CgkJCWlmKG1zZy5zZW5kZXIgPT0gY2FzaW5vR2FtZXNbaV0pewoJCQkJaXNDYXNpbm8gPSB0cnVlOwoJCQkJYnJlYWs7CgkJCX0KCQl9CgkJcmVxdWlyZShpc0Nhc2lubyk7CgkJXzsKCX0KICAKICAvKioKICAqIGNyZWF0ZXMgYSBuZXcgY2FzaW5vIHdhbGxldC4KICAqIEBwYXJhbSBhdXRob3JpemVkQWRkcmVzcyB0aGUgYWRkcmVzcyB3aGljaCBtYXkgc2VuZCB0cmFuc2FjdGlvbnMgdG8gdGhlIEVkZ2VsZXNzIENhc2lubwogICogICAgICAgIGJsYWNramFja0FkZHJlc3MgIHRoZSBhZGRyZXNzIG9mIHRoZSBFZGdlbGVzcyBibGFja2phY2sgY29udHJhY3QKCSoJCQkJIHRva2VuQ29udHJhY3QgICAgIHRoZSBhZGRyZXNzIG9mIHRoZSBFZGdlbGVzcyB0b2tlbiBjb250cmFjdAogICoqLwogIGZ1bmN0aW9uIGNhc2lub1Byb3h5KGFkZHJlc3MgYXV0aG9yaXplZEFkZHJlc3MsIGFkZHJlc3MgYmxhY2tqYWNrQWRkcmVzcywgYWRkcmVzcyB0b2tlbkNvbnRyYWN0KSBjYXNpbm9CYW5rKHRva2VuQ29udHJhY3QpIHB1YmxpY3sKICAgIGF1dGhvcml6ZWRbYXV0aG9yaXplZEFkZHJlc3NdID0gdHJ1ZTsKICAgIGNhc2lub0dhbWVzLnB1c2goYmxhY2tqYWNrQWRkcmVzcyk7CiAgfQoKCS8qKgoJKiBzaGlmdHMgdG9rZW5zIGZyb20gdGhlIGNvbnRyYWN0IGJhbGFuY2UgdG8gdGhlIHBsYXllciBvciB0aGUgb3RoZXIgd2F5IHJvdW5kLgoJKiBvbmx5IGNhbGxhYmxlIGZyb20gYW4gZWRnZWxlc3MgY2FzaW5vIGNvbnRyYWN0LiBzZW5kZXIgbXVzdCBoYXZlIGJlZW4gYXBwcm92ZWQgYnkgdGhlIHVzZXIuCgkqIEBwYXJhbSBwbGF5ZXIgdGhlIGFkZHJlc3Mgb2YgdGhlIHBsYXllcgoJKiAgICAgICAgbnVtVG9rZW5zIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIHNoaWZ0IHdpdGggNCBkZWNpbWFscwoJKgkJCQkgaXNSZWNlaXZlciB0ZWxscyBpZiB0aGUgcGxheWVyIGlzIHJlY2VpdmluZyB0b2tlbiBvciB0aGUgb3RoZXIgd2F5IHJvdW5kCgkqKi8KCWZ1bmN0aW9uIHNoaWZ0KGFkZHJlc3MgcGxheWVyLCB1aW50IG51bVRva2VucywgYm9vbCBpc1JlY2VpdmVyKSBwdWJsaWMgb25seUNhc2lub0dhbWVzewoJCXJlcXVpcmUoYXV0aG9yaXplZEJ5VXNlcltwbGF5ZXJdW21zZy5zZW5kZXJdKTsKCQl2YXIgZ2FzQ29zdCA9IGF2Z0dhc1ttc2cuc2VuZGVyXSAqIGdhc1ByaWNlOwoJCWlmKGlzUmVjZWl2ZXIpewoJCQludW1Ub2tlbnMgPSBzYWZlU3ViKG51bVRva2VucywgZ2FzQ29zdCk7CgkJCWJhbGFuY2VPZltwbGF5ZXJdID0gc2FmZUFkZChiYWxhbmNlT2ZbcGxheWVyXSwgbnVtVG9rZW5zKTsKCQkJcGxheWVyQmFsYW5jZSA9IHNhZmVBZGQocGxheWVyQmFsYW5jZSwgbnVtVG9rZW5zKTsKCQl9CgkJZWxzZXsKCQkJbnVtVG9rZW5zID0gc2FmZUFkZChudW1Ub2tlbnMsIGdhc0Nvc3QpOwoJCQliYWxhbmNlT2ZbcGxheWVyXSA9IHNhZmVTdWIoYmFsYW5jZU9mW3BsYXllcl0sIG51bVRva2Vucyk7CgkJCXBsYXllckJhbGFuY2UgPSBzYWZlU3ViKHBsYXllckJhbGFuY2UsIG51bVRva2Vucyk7CgkJfQoJfQogIAogIC8qKgogICogdHJhbnNmZXJzIGFuIGFtb3VudCBmcm9tIHRoZSBjb250cmFjdCBiYWxhbmNlIHRvIHRoZSBvd25lcidzIHdhbGxldC4KICAqIEBwYXJhbSByZWNlaXZlciB0aGUgcmVjZWl2ZXIgYWRkcmVzcwoJKgkJCQkgYW1vdW50ICAgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gd2l0aGRyYXcgKDAgZGVjaW1hbHMpCgkqCQkJCSB2LHIscyAJCXRoZSBzaWduYXR1cmUgb2YgdGhlIHBsYXllcgogICoqLwogIGZ1bmN0aW9uIHdpdGhkcmF3Rm9yKGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgYW1vdW50LCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgcHVibGljIG9ubHlBdXRob3JpemVkIGtlZXBBbGl2ZXsKCQl1aW50IGdhc0Nvc3QgPSAgbXNnLmdhcy8xMDAwICogZ2FzUHJpY2U7CgkJdmFyIHBsYXllciA9IGVjcmVjb3ZlcihrZWNjYWsyNTYocmVjZWl2ZXIsIGFtb3VudCwgY291bnRbcmVjZWl2ZXJdKSwgdiwgciwgcyk7CgkJY291bnRbcmVjZWl2ZXJdKys7CgkJdWludCB2YWx1ZSA9IHNhZmVBZGQoc2FmZU11bChhbW91bnQsMTAwMDApLCBnYXNDb3N0KTsKICAgIGJhbGFuY2VPZltwbGF5ZXJdID0gc2FmZVN1YihiYWxhbmNlT2ZbcGxheWVyXSwgdmFsdWUpOwoJCXBsYXllckJhbGFuY2UgPSBzYWZlU3ViKHBsYXllckJhbGFuY2UsIHZhbHVlKTsKICAgIGFzc2VydChlZGcudHJhbnNmZXIocmVjZWl2ZXIsIGFtb3VudCkpOwoJCVdpdGhkcmF3YWwocGxheWVyLCByZWNlaXZlciwgYW1vdW50KTsKICB9CiAgCiAgLyoqCiAgKiB1cGRhdGUgYSBjYXNpbm8gZ2FtZSBhZGRyZXNzIGluIGNhc2Ugb2YgYSBuZXcgY29udHJhY3Qgb3IgYSBuZXcgY2FzaW5vIGdhbWUKICAqIEBwYXJhbSBnYW1lICAgICAgIHRoZSBpbmRleCBvZiB0aGUgZ2FtZSAKICAqICAgICAgICBuZXdBZGRyZXNzIHRoZSBuZXcgYWRkcmVzcyBvZiB0aGUgZ2FtZQogICoqLwogIGZ1bmN0aW9uIHNldEdhbWVBZGRyZXNzKHVpbnQ4IGdhbWUsIGFkZHJlc3MgbmV3QWRkcmVzcykgcHVibGljIG9ubHlPd25lcnsKICAgIGlmKGdhbWU8Y2FzaW5vR2FtZXMubGVuZ3RoKSBjYXNpbm9HYW1lc1tnYW1lXSA9IG5ld0FkZHJlc3M7CiAgICBlbHNlIGNhc2lub0dhbWVzLnB1c2gobmV3QWRkcmVzcyk7CiAgfQogIAogIC8qKgogICogYXV0aG9yaXplIGEgYWRkcmVzcyB0byBjYWxsIGdhbWUgZnVuY3Rpb25zLgogICogQHBhcmFtIGFkZHIgdGhlIGFkZHJlc3MgdG8gYmUgYXV0aG9yaXplZAogICoqLwogIGZ1bmN0aW9uIGF1dGhvcml6ZShhZGRyZXNzIGFkZHIpIHB1YmxpYyBvbmx5T3duZXJ7CiAgICBhdXRob3JpemVkW2FkZHJdID0gdHJ1ZTsKICB9CiAgCiAgLyoqCiAgKiBkZWF1dGhvcml6ZSBhIGFkZHJlc3MgdG8gY2FsbCBnYW1lIGZ1bmN0aW9ucy4KICAqIEBwYXJhbSBhZGRyIHRoZSBhZGRyZXNzIHRvIGJlIGRlYXV0aG9yaXplZAogICoqLwogIGZ1bmN0aW9uIGRlYXV0aG9yaXplKGFkZHJlc3MgYWRkcikgcHVibGljIG9ubHlPd25lcnsKICAgIGF1dGhvcml6ZWRbYWRkcl0gPSBmYWxzZTsKICB9CiAgCiAgLyoqCiAgICogYXV0aG9yaXplIGEgY2FzaW5vIGNvbnRyYWN0IGFkZHJlc3MgdG8gYWNjZXNzIHRoZSBmdW5kcwogICAqIEBwYXJhbSBjYXNpbm9BZGRyZXNzIHRoZSBhZGRyZXNzIG9mIHRoZSBjYXNpbm8gY29udHJhY3QKICAgKgkJCQl2LCByLCBzIHRoZSBwbGF5ZXIncyBzaWduYXR1cmUgb2YgdGhlIGNhc2lubyBhZGRyZXNzLCB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBhZGRyZXNzIGhhcyBhbHJlYWR5IGJlZW4gbG9ja2VkIAogICAqCQkJCQkJCQlhbmQgYSBib29sIHN0YXRpbmcgaWYgdGhlIHNpZ25hdHVyZSBpcyBtZWFudCBmb3IgYXV0aG91cml6YXRpb24gKHRydWUpIG9yIGRlYXV0aG9yaXphdGlvbiAoZmFsc2UpCiAgICogKi8KICBmdW5jdGlvbiBhdXRob3JpemVDYXNpbm8oYWRkcmVzcyBwbGF5ZXJBZGRyZXNzLCBhZGRyZXNzIGNhc2lub0FkZHJlc3MsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKSBwdWJsaWN7CiAgCWFkZHJlc3MgcGxheWVyID0gZWNyZWNvdmVyKGtlY2NhazI1NihjYXNpbm9BZGRyZXNzLGxvY2tlZEJ5VXNlcltwbGF5ZXJBZGRyZXNzXVtjYXNpbm9BZGRyZXNzXSx0cnVlKSwgdiwgciwgcyk7CiAgCXJlcXVpcmUocGxheWVyID09IHBsYXllckFkZHJlc3MpOwogIAlhdXRob3JpemVkQnlVc2VyW3BsYXllcl1bY2FzaW5vQWRkcmVzc10gPSB0cnVlOwogIH0KIAogIC8qKgogICAqIGRlYXV0aG9yaXplIGEgY2FzaW5vIGNvbnRyYWN0IGFkZHJlc3MgdG8gYWNjZXNzIHRoZSBmdW5kcwogICAqIEBwYXJhbSBjYXNpbm9BZGRyZXNzIHRoZSBhZGRyZXNzIG9mIHRoZSBjYXNpbm8gY29udHJhY3QKICAgKiAgICAJCXYsIHIsIHMgdGhlIHBsYXllcidzIHNpZ25hdHVyZSBvZiB0aGUgY2FzaW5vIGFkZHJlc3MsIHRoZSBudW1iZXIgb2YgdGltZXMgdGhlIGFkZHJlc3MgaGFzIGFscmVhZHkgYmVlbiBsb2NrZWQgCiAgICoJCQkJCQkJCWFuZCBhIGJvb2wgc3RhdGluZyBpZiB0aGUgc2lnbmF0dXJlIGlzIG1lYW50IGZvciBhdXRob3VyaXphdGlvbiAodHJ1ZSkgb3IgZGVhdXRob3JpemF0aW9uIChmYWxzZSkKICAgKiAqLwogIGZ1bmN0aW9uIGRlYXV0aG9yaXplQ2FzaW5vKGFkZHJlc3MgcGxheWVyQWRkcmVzcywgYWRkcmVzcyBjYXNpbm9BZGRyZXNzLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgcHVibGljewogIAlhZGRyZXNzIHBsYXllciA9IGVjcmVjb3ZlcihrZWNjYWsyNTYoY2FzaW5vQWRkcmVzcyxsb2NrZWRCeVVzZXJbcGxheWVyQWRkcmVzc11bY2FzaW5vQWRkcmVzc10sZmFsc2UpLCB2LCByLCBzKTsKICAJcmVxdWlyZShwbGF5ZXIgPT0gcGxheWVyQWRkcmVzcyk7CiAgCWF1dGhvcml6ZWRCeVVzZXJbcGxheWVyXVtjYXNpbm9BZGRyZXNzXSA9IGZhbHNlOwogIAlsb2NrZWRCeVVzZXJbcGxheWVyXVtjYXNpbm9BZGRyZXNzXSsrOy8vbWFrZSBpdCBpbXBvc3NpYmxlIHRvIHJldXNlIG9sZCBzaWduYXR1cmUgdG8gYXV0aG9yaXplIHRoZSBhZGRyZXNzIGFnYWluCiAgfQoJCgkvKioKCSogdXBkYXRlcyB0aGUgcHJpY2UgcGVyIDEwMDAgZ2FzIGluIEVERy4KCSogQHBhcmFtIHByaWNlIHRoZSBuZXcgZ2FzIHByaWNlICg0IGRlY2ltYWxzLCBtYXggMC4wMjU2IEVERykKCSoqLwoJZnVuY3Rpb24gc2V0R2FzUHJpY2UodWludDggcHJpY2UpIHB1YmxpYyBvbmx5T3duZXJ7CgkJZ2FzUHJpY2UgPSBwcmljZTsKCX0KCQoJLyoqCgkqIHVwZGF0ZXMgdGhlIGF2ZXJhZ2UgYW1vdW50IG9mIGdhcyBjb25zdW1lZCBieSBhIGdhbWUKCSogQHBhcmFtIGdhbWUgdGhlIGluZGV4IG9mIHRoZSBnYW1lIGNvbnRyYWN0CgkqIAkJCSBnYXMJdGhlIG5ldyBhdmcgZ2FzCgkqKi8KCWZ1bmN0aW9uIHNldEF2Z0dhcyh1aW50OCBnYW1lLCB1aW50MTYgZ2FzKSBwdWJsaWMgb25seU93bmVyewoJCWF2Z0dhc1tjYXNpbm9HYW1lc1tnYW1lXV0gPSBnYXM7Cgl9CiAgCiAgLyoqCiAgKiBGb3J3YXJkcyBhIG1vdmUgdG8gdGhlIGNvcnJlc3BvbmRpbmcgZ2FtZSBjb250cmFjdCBpZiB0aGUgZGF0YSBoYXMgYmVlbiBzaWduZWQgYnkgdGhlIGNsaWVudC4KICAqIFRoZSBjYXNpbm8gY29udHJhY3QgZW5zdXJlcyBpdCBpcyBubyBkdXBsaWNhdGUgbW92ZS4KICAqIEBwYXJhbSBnYW1lICBzcGVjaWZpZXMgd2hpY2ggZ2FtZSBjb250cmFjdCB0byBjYWxsCiAgKiAgICAgICAgZGF0YSAgdGhlIGZ1bmN0aW9uIGNhbGwKICAqICAgICAgICB2LHIscyB0aGUgcGxheWVyJ3Mgc2lnbmF0dXJlIG9mIHRoZSBkYXRhCiAgKiovCiAgZnVuY3Rpb24gbW92ZSh1aW50OCBnYW1lLCBieXRlcyBkYXRhLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgcHVibGljIG9ubHlBdXRob3JpemVkIGlzQWxpdmV7CiAgICByZXF1aXJlKGdhbWUgPCBjYXNpbm9HYW1lcy5sZW5ndGgpOwogICAgdmFyIHBsYXllciA9IGVjcmVjb3ZlcihrZWNjYWsyNTYoZGF0YSksIHYsIHIsIHMpOwoJCXJlcXVpcmUod2l0aGRyYXdBZnRlcltwbGF5ZXJdID09IDAgfHwgbm93PHdpdGhkcmF3QWZ0ZXJbcGxheWVyXSk7CgkJYXNzZXJ0KGNoZWNrQWRkcmVzcyhwbGF5ZXIsIGRhdGEpKTsKICAgIGFzc2VydChjYXNpbm9HYW1lc1tnYW1lXS5jYWxsKGRhdGEpKTsKICB9CgogIC8qKgogICAqIGNoZWNrcyBpZiB0aGUgZ2l2ZW4gYWRkcmVzcyBpcyBwYXNzZWQgYXMgZmlyc3QgcGFyYW1ldGVycyBpbiB0aGUgYnl0ZXMgZmllbGQKICAgKiBAcGFyYW0gcGxheWVyIHRoZSBwbGF5ZXIgYWRkcmVzcwogICAqCQkJCWRhdGEgdGhlIGZ1bmN0aW9uIGNhbGwKICAgKiAqLwogIGZ1bmN0aW9uIGNoZWNrQWRkcmVzcyhhZGRyZXNzIHBsYXllciwgYnl0ZXMgZGF0YSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyhib29sKXsKICAJYnl0ZXMgbWVtb3J5IGJhOwogIAlhc3NlbWJseSB7CiAgICAgIGxldCBtIDo9IG1sb2FkKDB4NDApCiAgICAgIG1zdG9yZShhZGQobSwgMjApLCB4b3IoMHgxNDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsIHBsYXllcikpCiAgICAgIG1zdG9yZSgweDQwLCBhZGQobSwgNTIpKQogICAgICBiYSA6PSBtCiAgIH0KICAgZm9yKHVpbnQ4IGkgPSAwOyBpIDwgMjA7IGkrKyl7CiAgIAlpZihkYXRhWzE2K2ldIT1iYVtpXSkgcmV0dXJuIGZhbHNlOwogICB9CiAgIHJldHVybiB0cnVlOwogIH0KCQoJCn0='.
	

]
