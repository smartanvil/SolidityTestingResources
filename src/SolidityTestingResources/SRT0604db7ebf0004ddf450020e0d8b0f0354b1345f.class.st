Class {
	#name : #SRT0604db7ebf0004ddf450020e0d8b0f0354b1345f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0604db7ebf0004ddf450020e0d8b0f0354b1345f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIEVSQzcyMSBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL2VpcHMvaXNzdWVzLzcyMQogKi8KY29udHJhY3QgRVJDNzIxIHsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfYXBwcm92ZWQsIHVpbnQyNTYgX3Rva2VuSWQpOwoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2JhbGFuY2UpOwogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljOwp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9Cn0KCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KICAKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8qKgogKiBAdGl0bGUgRVJDNzIxVG9rZW4KICogR2VuZXJpYyBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIHJlcXVpcmVkIGZ1bmN0aW9uYWxpdHkgb2YgdGhlIEVSQzcyMSBzdGFuZGFyZAogKi8KY29udHJhY3QgQnVycml0b1Rva2VuIGlzIEVSQzcyMSwgT3duYWJsZSwgUGF1c2FibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAvLyBUb3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgdWludDI1NiBwcml2YXRlIHRvdGFsVG9rZW5zOwogIHVpbnQyNTZbXSBwcml2YXRlIGxpc3RlZDsKICB1aW50MjU2IHB1YmxpYyBkZXZPd2VkOwogIHVpbnQyNTYgcHVibGljIGJ1cnJpdG9Qb29sVG90YWw7CiAgdWludDI1NiBwdWJsaWMgdGFjb1Bvb2xUb3RhbDsKICB1aW50MjU2IHB1YmxpYyBzYXVjZVBvb2xUb3RhbDsKICB1aW50MjU2IHB1YmxpYyBsYXN0UHVyY2hhc2U7CgogIC8vIEJ1cnJpdG8gRGF0YQogIG1hcHBpbmcgKHVpbnQyNTYgPT4gVG9rZW4pIHByaXZhdGUgdG9rZW5zOwoKICAvLyBNYXBwaW5nIGZyb20gdG9rZW4gSUQgdG8gb3duZXIKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgdG9rZW5Pd25lcjsKCiAgLy8gTWFwcGluZyBmcm9tIHRva2VuIElEIHRvIGFwcHJvdmVkIGFkZHJlc3MKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgdG9rZW5BcHByb3ZhbHM7CgogIC8vIE1hcHBpbmcgZnJvbSBvd25lciB0byBsaXN0IG9mIG93bmVkIHRva2VuIElEcwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NltdKSBwcml2YXRlIG93bmVkVG9rZW5zOwoKICAvLyBNYXBwaW5nIGZyb20gdG9rZW4gSUQgdG8gaW5kZXggb2YgdGhlIG93bmVyIHRva2VucyBsaXN0CiAgbWFwcGluZyh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgb3duZWRUb2tlbnNJbmRleDsKCiAgLy8gQmFsYW5jZXMgZnJvbSAlIHBheW91dHMuCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIHBheW91dEJhbGFuY2VzOyAKCiAgLy8gRXZlbnRzCiAgZXZlbnQgUHVyY2hhc2VkKHVpbnQyNTYgaW5kZXhlZCBfdG9rZW5JZCwgYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludDI1NiBfcHVyY2hhc2VQcmljZSk7CgogIC8vIFB1cmNoYXNpbmcgQ2FwcyBmb3IgRGV0ZXJtaW5pbmcgTmV4dCBQb29sIEN1dAogIHVpbnQyNTYgcHJpdmF0ZSBmaXJzdENhcCAgPSAwLjUgZXRoZXI7CiAgdWludDI1NiBwcml2YXRlIHNlY29uZENhcCA9IDEuMCBldGhlcjsKICB1aW50MjU2IHByaXZhdGUgdGhpcmRDYXAgID0gMy4wIGV0aGVyOwogIHVpbnQyNTYgcHJpdmF0ZSBmaW5hbENhcCAgPSA1LjAgZXRoZXI7CgogIC8vIFBlcmNlbnRhZ2VzCiAgdWludDI1NiBwdWJsaWMgZmVlUGVyY2VudGFnZSA9IDU7CiAgdWludDI1NiBwdWJsaWMgZGl2aWRlbmRDdXRQZXJjZW50YWdlID0gMTAwOyAvLyAxMDAgLyAxMDAwMAogIHVpbnQyNTYgcHVibGljIGRpdmlkZW5kRGVjcmVhc2VGYWN0b3IgPSAyOwogIHVpbnQyNTYgcHVibGljIG1lZ2Fib3NzQ3V0UGVyY2VudGFnZSA9IDE7CiAgdWludDI1NiBwdWJsaWMgYm9zc0N1dFBlcmNlbnRhZ2UgPSAxOwogIHVpbnQyNTYgcHVibGljIG1haW5Qb29sQ3V0UGVyY2VudGFnZSA9IDE1OwoKICAvLyBCb3NzZXMKICB1aW50MjU2IHByaXZhdGUgbWVnYWJvc3NUb2tlbklkID0gMTAwMDAwMDA7CgogIHVpbnQyNTYgcHJpdmF0ZSBCVVJSSVRPX0tJTkQgPSAxOwogIHVpbnQyNTYgcHJpdmF0ZSBUQUNPX0tJTkQgPSAyOwogIHVpbnQyNTYgcHJpdmF0ZSBTQVVDRV9LSU5EID0gMzsKCiAgLy8gU3RydWN0IHRvIHN0b3JlIEJ1cnJpdG8gRGF0YQogIHN0cnVjdCBUb2tlbiB7CiAgICAgIHVpbnQyNTYgcHJpY2U7ICAgICAgICAgLy8gQ3VycmVudCBwcmljZSBvZiB0aGUgaXRlbS4KICAgICAgdWludDI1NiBsYXN0UHJpY2U7ICAgICAvLyBsYXN0UHJpY2UgdGhpcyB3YXMgc29sZCBmb3IsIHVzZWQgZm9yIGFkZGluZyB0byBwb29sLgogICAgICB1aW50MjU2IHBheW91dDsgICAgICAgIC8vIFRoZSBwZXJjZW50IG9mIHRoZSBwb29sIHJld2FyZGVkLgogICAgICB1aW50MjU2IHdpdGhkcmF3bjsgICAgIC8vIFRoZSBhbW91bnQgb2YgRXRoIHRoaXMgdG9rZW4gaGFzIHdpdGhkcmF3biBmcm9tIHRoZSBwb29sLgogICAgICBhZGRyZXNzIG93bmVyOyAgICAgICAgIC8vIEN1cnJlbnQgb3duZXIgb2YgdGhlIGl0ZW0uCiAgICAgIHVpbnQyNTYgYm9zc1Rva2VuSWQ7ICAgLy8gQ3VycmVudCBib3NzIG9mIHRoZSB0b2tlbiAtIDElIGJvc3NDdXQKICAgICAgdWludDggICBraW5kOyAgICAgICAgICAvLyAxIC0gYnVycml0bywgMiAtIHRhY28sIDMgLSBzYXVjZQogICAgICBhZGRyZXNzWzVdIHByZXZpb3VzT3duZXJzOwogIH0KCiAgLyoqCiAgKiBAZGV2IGNyZWF0ZUxpc3RpbmcgQWRkcyBuZXcgRVJDNzIxIFRva2VuCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiBuZXcgdG9rZW4KICAqIEBwYXJhbSBfcHJpY2UgdWludDI1NiBzdGFydGluZyBwcmljZSBpbiB3ZWkKICAqIEBwYXJhbSBfcGF5b3V0UGVyY2VudGFnZSB1aW50MjU2IHBheW91dCBwZXJjZW50YWdlIChkaXZpc2libGUgYnkgMTApCiAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3Mgb2YgbmV3IG93bmVyCiAgKi8KICBmdW5jdGlvbiBjcmVhdGVUb2tlbih1aW50MjU2IF90b2tlbklkLCB1aW50MjU2IF9wcmljZSwgdWludDI1NiBfbGFzdFByaWNlLCB1aW50MjU2IF9wYXlvdXRQZXJjZW50YWdlLCB1aW50OCBfa2luZCwgdWludDI1NiBfYm9zc1Rva2VuSWQsIGFkZHJlc3MgX293bmVyKSBvbmx5T3duZXIoKSBwdWJsaWMgewogICAgcmVxdWlyZShfcHJpY2UgPiAwKTsKICAgIHJlcXVpcmUoX2xhc3RQcmljZSA8IF9wcmljZSk7CiAgICAvLyBtYWtlIHN1cmUgdG9rZW4gaGFzbid0IGJlZW4gdXNlZCB5ZXQKICAgIHJlcXVpcmUodG9rZW5zW190b2tlbklkXS5wcmljZSA9PSAwKTsKICAgIC8vIGNoZWNrIGZvciBraW5kcwogICAgcmVxdWlyZShfa2luZCA+IDAgJiYgX2tpbmQgPD0gMyk7CiAgICAKICAgIC8vIGNyZWF0ZSBuZXcgdG9rZW4KICAgIFRva2VuIHN0b3JhZ2UgbmV3VG9rZW4gPSB0b2tlbnNbX3Rva2VuSWRdOwoKICAgIG5ld1Rva2VuLm93bmVyID0gX293bmVyOwogICAgbmV3VG9rZW4ucHJpY2UgPSBfcHJpY2U7CiAgICBuZXdUb2tlbi5sYXN0UHJpY2UgPSBfbGFzdFByaWNlOwogICAgbmV3VG9rZW4ucGF5b3V0ID0gX3BheW91dFBlcmNlbnRhZ2U7CiAgICBuZXdUb2tlbi5raW5kID0gX2tpbmQ7CiAgICBuZXdUb2tlbi5ib3NzVG9rZW5JZCA9IF9ib3NzVG9rZW5JZDsKICAgIG5ld1Rva2VuLnByZXZpb3VzT3duZXJzID0gW2FkZHJlc3ModGhpcyksIGFkZHJlc3ModGhpcyksIGFkZHJlc3ModGhpcyksIGFkZHJlc3ModGhpcyksIGFkZHJlc3ModGhpcyldOwoKICAgIC8vIHN0b3JlIGJ1cnJpdG8gaW4gc3RvcmFnZQogICAgbGlzdGVkLnB1c2goX3Rva2VuSWQpOwogICAgCiAgICAvLyBtaW50IG5ldyB0b2tlbgogICAgX21pbnQoX293bmVyLCBfdG9rZW5JZCk7CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVNdWx0aXBsZSAodWludDI1NltdIF9pdGVtSWRzLCB1aW50MjU2W10gX3ByaWNlcywgdWludDI1NltdIF9sYXN0UHJpY2VzLCB1aW50MjU2W10gX3BheW91dHMsIHVpbnQ4W10gX2tpbmRzLCB1aW50MjU2W10gX2Jvc3NUb2tlbklkcywgYWRkcmVzc1tdIF9vd25lcnMpIG9ubHlPd25lcigpIGV4dGVybmFsIHsKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IF9pdGVtSWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGNyZWF0ZVRva2VuKF9pdGVtSWRzW2ldLCBfcHJpY2VzW2ldLCBfbGFzdFByaWNlc1tpXSwgX3BheW91dHNbaV0sIF9raW5kc1tpXSwgX2Jvc3NUb2tlbklkc1tpXSwgX293bmVyc1tpXSk7CiAgICB9CiAgfQoKICAvKioKICAqIEBkZXYgRGV0ZXJtaW5lcyBuZXh0IHByaWNlIG9mIHRva2VuCiAgKiBAcGFyYW0gX3ByaWNlIHVpbnQyNTYgSUQgb2YgY3VycmVudCBwcmljZQogICovCiAgZnVuY3Rpb24gZ2V0TmV4dFByaWNlICh1aW50MjU2IF9wcmljZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfbmV4dFByaWNlKSB7CiAgICBpZiAoX3ByaWNlIDwgZmlyc3RDYXApIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMjAwKS5kaXYoMTAwIC0gZmVlUGVyY2VudGFnZSk7CiAgICB9IGVsc2UgaWYgKF9wcmljZSA8IHNlY29uZENhcCkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgxMzUpLmRpdigxMDAgLSBmZWVQZXJjZW50YWdlKTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgdGhpcmRDYXApIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTI1KS5kaXYoMTAwIC0gZmVlUGVyY2VudGFnZSk7CiAgICB9IGVsc2UgaWYgKF9wcmljZSA8IGZpbmFsQ2FwKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDExNykuZGl2KDEwMCAtIGZlZVBlcmNlbnRhZ2UpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTE1KS5kaXYoMTAwIC0gZmVlUGVyY2VudGFnZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjYWxjdWxhdGVQb29sQ3V0ICh1aW50MjU2IF9wcmljZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfcG9vbEN1dCkgewogICAgaWYgKF9wcmljZSA8IGZpcnN0Q2FwKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDEwKS5kaXYoMTAwKTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgc2Vjb25kQ2FwKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDkpLmRpdigxMDApOwogICAgfSBlbHNlIGlmIChfcHJpY2UgPCB0aGlyZENhcCkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCg4KS5kaXYoMTAwKTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgZmluYWxDYXApIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoNykuZGl2KDEwMCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX3ByaWNlLm11bCg1KS5kaXYoMTAwKTsKICAgIH0KICB9CgogIC8qKgogICogQGRldiBQdXJjaGFzZSBidXJyaXRvIGZyb20gcHJldmlvdXMgb3duZXIKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IG9mIHRva2VuCiAgKi8KICBmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgCiAgICBwYXlhYmxlCiAgICBpc05vdENvbnRyYWN0KG1zZy5zZW5kZXIpCiAgewogICAgcmVxdWlyZSghcGF1c2VkKTsKCiAgICAvLyBnZXQgZGF0YSBmcm9tIHN0b3JhZ2UKICAgIFRva2VuIHN0b3JhZ2UgdG9rZW4gPSB0b2tlbnNbX3Rva2VuSWRdOwogICAgdWludDI1NiBwcmljZSA9IHRva2VuLnByaWNlOwogICAgYWRkcmVzcyBvbGRPd25lciA9IHRva2VuLm93bmVyOwoKICAgIC8vIHJldmVydCBjaGVja3MKICAgIHJlcXVpcmUocHJpY2UgPiAwKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByaWNlKTsKICAgIHJlcXVpcmUob2xkT3duZXIgIT0gbXNnLnNlbmRlcik7CgogICAgLy8gQ2FsY3VsYXRlIHBvb2wgY3V0IGZvciB0YXhlcy4KICAgIHVpbnQyNTYgcHJpY2VEZWx0YSA9IHByaWNlLnN1Yih0b2tlbi5sYXN0UHJpY2UpOwogICAgdWludDI1NiBwb29sQ3V0ID0gY2FsY3VsYXRlUG9vbEN1dChwcmljZURlbHRhKTsKICAgIAogICAgX3VwZGF0ZVBvb2xzKHRva2VuLmtpbmQsIHBvb2xDdXQpOwogICAgCiAgICB1aW50MjU2IGZlZSA9IHByaWNlLm11bChmZWVQZXJjZW50YWdlKS5kaXYoMTAwKTsKICAgIGRldk93ZWQgPSBkZXZPd2VkLmFkZChmZWUpOwoKICAgIC8vIERpdmlkZW5kcwogICAgdWludDI1NiB0YXhlc1BhaWQgPSBfcGF5RGl2aWRlbmRzQW5kQm9zc2VzKHRva2VuLCBwcmljZSk7CgogICAgX3NoaWZ0UHJldmlvdXNPd25lcnModG9rZW4sIG1zZy5zZW5kZXIpOwoKICAgIHRyYW5zZmVyVG9rZW4ob2xkT3duZXIsIG1zZy5zZW5kZXIsIF90b2tlbklkKTsKCiAgICAvLyBUcmFuc2ZlciBwYXltZW50IHRvIG9sZCBvd25lciBtaW51cyB0aGUgZGV2ZWxvcGVyJ3MgYW5kIHBvb2wncyBjdXQuCiAgICAvLyBDYWxjdWxhdGUgdGhlIHdpbm5pbmdzIGZvciB0aGUgcHJldmlvdXMgb3duZXIuCiAgICB1aW50MjU2IGZpbmFsUGF5b3V0ID0gcHJpY2Uuc3ViKGZlZSkuc3ViKHBvb2xDdXQpLnN1Yih0YXhlc1BhaWQpOwoKICAgIC8vIHNldCBuZXcgcHJpY2VzCiAgICB0b2tlbi5sYXN0UHJpY2UgPSBwcmljZTsKICAgIHRva2VuLnByaWNlID0gZ2V0TmV4dFByaWNlKHByaWNlKTsKCiAgICAvLyByYWlzZSBldmVudAogICAgUHVyY2hhc2VkKF90b2tlbklkLCBtc2cuc2VuZGVyLCBwcmljZSk7CgogICAgaWYgKG9sZE93bmVyICE9IGFkZHJlc3ModGhpcykpIHsKICAgICAgb2xkT3duZXIudHJhbnNmZXIoZmluYWxQYXlvdXQpOwogICAgfQoKICAgIC8vIENhbGN1bGF0ZSBvdmVyc3BlbmRpbmcKICAgIHVpbnQyNTYgZXhjZXNzID0gbXNnLnZhbHVlIC0gcHJpY2U7CiAgICAKICAgIGlmIChleGNlc3MgPiAwKSB7CiAgICAgICAgLy8gUmVmdW5kIG92ZXJzcGVuZGluZwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZXhjZXNzKTsKICAgIH0KICAgIAogICAgLy8gc2V0IGxhc3QgcHVyY2hhc2UgcHJpY2UgdG8gc3RvcmFnZQogICAgbGFzdFB1cmNoYXNlID0gbm93OwogIH0KCiAgICAvLy8gQGRldiBTaGlmdCB0aGUgNiBtb3N0IHJlY2VudCBidXllcnMsIGFuZCBhZGQgdGhlIG5ldyBidXllcgogIC8vLyB0byB0aGUgZnJvbnQuCiAgLy8vIEBwYXJhbSBfbmV3T3duZXIgVGhlIGJ1eWVyIHRvIGFkZCB0byB0aGUgZnJvbnQgb2YgdGhlIHJlY2VudAogIC8vLyBidXllcnMgbGlzdC4KICBmdW5jdGlvbiBfc2hpZnRQcmV2aW91c093bmVycyhUb2tlbiBzdG9yYWdlIF90b2tlbiwgYWRkcmVzcyBfbmV3T3duZXIpIHByaXZhdGUgewogICAgICBfdG9rZW4ucHJldmlvdXNPd25lcnNbNF0gPSBfdG9rZW4ucHJldmlvdXNPd25lcnNbM107CiAgICAgIF90b2tlbi5wcmV2aW91c093bmVyc1szXSA9IF90b2tlbi5wcmV2aW91c093bmVyc1syXTsKICAgICAgX3Rva2VuLnByZXZpb3VzT3duZXJzWzJdID0gX3Rva2VuLnByZXZpb3VzT3duZXJzWzFdOwogICAgICBfdG9rZW4ucHJldmlvdXNPd25lcnNbMV0gPSBfdG9rZW4ucHJldmlvdXNPd25lcnNbMF07CiAgICAgIF90b2tlbi5wcmV2aW91c093bmVyc1swXSA9IF9uZXdPd25lcjsKICB9CgogIGZ1bmN0aW9uIF91cGRhdGVQb29scyh1aW50OCBfa2luZCwgdWludDI1NiBfcG9vbEN1dCkgaW50ZXJuYWwgewogICAgdWludDI1NiBwb29sQ3V0VG9NYWluID0gX3Bvb2xDdXQubXVsKG1haW5Qb29sQ3V0UGVyY2VudGFnZSkuZGl2KDEwMCk7CgogICAgaWYgKF9raW5kID09IEJVUlJJVE9fS0lORCkgewogICAgICBidXJyaXRvUG9vbFRvdGFsICs9IF9wb29sQ3V0OwogICAgfSBlbHNlIGlmIChfa2luZCA9PSBUQUNPX0tJTkQpIHsKICAgICAgYnVycml0b1Bvb2xUb3RhbCArPSBwb29sQ3V0VG9NYWluOwoKICAgICAgdGFjb1Bvb2xUb3RhbCArPSBfcG9vbEN1dC5zdWIocG9vbEN1dFRvTWFpbik7CiAgICB9IGVsc2UgaWYgKF9raW5kID09IFNBVUNFX0tJTkQpIHsKICAgICAgYnVycml0b1Bvb2xUb3RhbCArPSBwb29sQ3V0VG9NYWluOwoKICAgICAgc2F1Y2VQb29sVG90YWwgKz0gX3Bvb2xDdXQuc3ViKHBvb2xDdXRUb01haW4pOwogICAgfQogIH0KCiAgLy8gMSUsIDAuNSUsIDAuMjUlLCAwLjEyNSUsIDAuMDYyNSUKICBmdW5jdGlvbiBfcGF5RGl2aWRlbmRzQW5kQm9zc2VzKFRva2VuIF90b2tlbiwgdWludDI1NiBfcHJpY2UpIHByaXZhdGUgcmV0dXJucyAodWludDI1NiBwYWlkKSB7CiAgICB1aW50MjU2IGRpdmlkZW5kMCA9IF9wcmljZS5tdWwoZGl2aWRlbmRDdXRQZXJjZW50YWdlKS5kaXYoMTAwMDApOwogICAgdWludDI1NiBkaXZpZGVuZDEgPSBkaXZpZGVuZDAuZGl2KGRpdmlkZW5kRGVjcmVhc2VGYWN0b3IpOwogICAgdWludDI1NiBkaXZpZGVuZDIgPSBkaXZpZGVuZDEuZGl2KGRpdmlkZW5kRGVjcmVhc2VGYWN0b3IpOwogICAgdWludDI1NiBkaXZpZGVuZDMgPSBkaXZpZGVuZDIuZGl2KGRpdmlkZW5kRGVjcmVhc2VGYWN0b3IpOwogICAgdWludDI1NiBkaXZpZGVuZDQgPSBkaXZpZGVuZDMuZGl2KGRpdmlkZW5kRGVjcmVhc2VGYWN0b3IpOwoKICAgIC8vIFBheSBmaXJzdCBkaXZpZGVuZC4KICAgIGlmIChfdG9rZW4ucHJldmlvdXNPd25lcnNbMF0gIT0gYWRkcmVzcyh0aGlzKSkge190b2tlbi5wcmV2aW91c093bmVyc1swXS50cmFuc2ZlcihkaXZpZGVuZDApOyBwYWlkID0gcGFpZC5hZGQoZGl2aWRlbmQwKTt9CiAgICBpZiAoX3Rva2VuLnByZXZpb3VzT3duZXJzWzFdICE9IGFkZHJlc3ModGhpcykpIHtfdG9rZW4ucHJldmlvdXNPd25lcnNbMV0udHJhbnNmZXIoZGl2aWRlbmQxKTsgcGFpZCA9IHBhaWQuYWRkKGRpdmlkZW5kMSk7fQogICAgaWYgKF90b2tlbi5wcmV2aW91c093bmVyc1syXSAhPSBhZGRyZXNzKHRoaXMpKSB7X3Rva2VuLnByZXZpb3VzT3duZXJzWzJdLnRyYW5zZmVyKGRpdmlkZW5kMik7IHBhaWQgPSBwYWlkLmFkZChkaXZpZGVuZDIpO30KICAgIGlmIChfdG9rZW4ucHJldmlvdXNPd25lcnNbM10gIT0gYWRkcmVzcyh0aGlzKSkge190b2tlbi5wcmV2aW91c093bmVyc1szXS50cmFuc2ZlcihkaXZpZGVuZDMpOyBwYWlkID0gcGFpZC5hZGQoZGl2aWRlbmQzKTt9CiAgICBpZiAoX3Rva2VuLnByZXZpb3VzT3duZXJzWzRdICE9IGFkZHJlc3ModGhpcykpIHtfdG9rZW4ucHJldmlvdXNPd25lcnNbNF0udHJhbnNmZXIoZGl2aWRlbmQ0KTsgcGFpZCA9IHBhaWQuYWRkKGRpdmlkZW5kNCk7fQoKICAgIHVpbnQyNTYgdGF4ID0gX3ByaWNlLm11bCgxKS5kaXYoMTAwKTsKCiAgICBpZiAodG9rZW5zW21lZ2Fib3NzVG9rZW5JZF0ub3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICB0b2tlbnNbbWVnYWJvc3NUb2tlbklkXS5vd25lci50cmFuc2Zlcih0YXgpOwogICAgICBwYWlkID0gcGFpZC5hZGQodGF4KTsKICAgIH0KCiAgICBpZiAodG9rZW5zW190b2tlbi5ib3NzVG9rZW5JZF0ub3duZXIgIT0gYWRkcmVzcygwKSkgeyAKICAgICAgdG9rZW5zW190b2tlbi5ib3NzVG9rZW5JZF0ub3duZXIudHJhbnNmZXIodGF4KTsKICAgICAgcGFpZCA9IHBhaWQuYWRkKHRheCk7CiAgICB9CiAgfQoKICAvKioKICAqIEBkZXYgVHJhbnNmZXIgVG9rZW4gZnJvbSBQcmV2aW91cyBPd25lciB0byBOZXcgT3duZXIKICAqIEBwYXJhbSBfZnJvbSBwcmV2aW91cyBvd25lciBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIG5ldyBvd25lciBhZGRyZXNzCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0b2tlbgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXJUb2tlbihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewoKICAgIC8vIGNoZWNrIHRva2VuIGV4aXN0cwogICAgcmVxdWlyZSh0b2tlbkV4aXN0cyhfdG9rZW5JZCkpOwoKICAgIC8vIG1ha2Ugc3VyZSBwcmV2aW91cyBvd25lciBpcyBjb3JyZWN0CiAgICByZXF1aXJlKHRva2Vuc1tfdG9rZW5JZF0ub3duZXIgPT0gX2Zyb20pOwoKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcyh0aGlzKSk7CgogICAgLy8gcGF5IGFueSB1bnBhaWQgcGF5b3V0cyB0byBwcmV2aW91cyBvd25lciBvZiBidXJyaXRvCiAgICB1cGRhdGVTaW5nbGVQYXlvdXQoX2Zyb20sIF90b2tlbklkKTsKCiAgICAvLyBjbGVhciBhcHByb3ZhbHMgbGlua2VkIHRvIHRoaXMgdG9rZW4KICAgIGNsZWFyQXBwcm92YWwoX2Zyb20sIF90b2tlbklkKTsKCiAgICAvLyByZW1vdmUgdG9rZW4gZnJvbSBwcmV2aW91cyBvd25lcgogICAgcmVtb3ZlVG9rZW4oX2Zyb20sIF90b2tlbklkKTsKCiAgICAvLyB1cGRhdGUgb3duZXIgYW5kIGFkZCB0b2tlbiB0byBuZXcgb3duZXIKICAgIHRva2Vuc1tfdG9rZW5JZF0ub3duZXIgPSBfdG87CiAgICBhZGRUb2tlbihfdG8sIF90b2tlbklkKTsKCiAgIC8vcmFpc2UgZXZlbnQKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICB9CgogIC8qKgogICogQGRldiBXaXRoZHJhdyBkZXYncyBjdXQKICAqLwogIGZ1bmN0aW9uIHdpdGhkcmF3KCkgb25seU93bmVyIHB1YmxpYyB7CiAgICBvd25lci50cmFuc2ZlcihkZXZPd2VkKTsKICAgIGRldk93ZWQgPSAwOwogIH0KCiAgLyoqCiAgKiBAZGV2IFVwZGF0ZXMgdGhlIHBheW91dCBmb3IgdGhlIGJ1cnJpdG9zIHRoZSBvd25lciBoYXMKICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBvZiB0b2tlbiBvd25lcgogICovCiAgLy8gZnVuY3Rpb24gdXBkYXRlUGF5b3V0KGFkZHJlc3MgX293bmVyKSBwdWJsaWMgewogIC8vICAgdWludDI1NltdIG1lbW9yeSBvd25lclRva2VucyA9IG93bmVkVG9rZW5zW19vd25lcl07CiAgLy8gICB1aW50MjU2IG93ZWQ7CiAgLy8gICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBvd25lclRva2Vucy5sZW5ndGg7IGkrKykgewogIC8vICAgICBvd2VkICs9IF9jYWxjdWxhdGVPbmVQYXlvdXQob3duZXJUb2tlbnNbaV0pOwogIC8vICAgfQoKICAvLyAgIHBheW91dEJhbGFuY2VzW19vd25lcl0gKz0gb3dlZDsKICAvLyB9CgogIGZ1bmN0aW9uIHVwZGF0ZVBheW91dChhZGRyZXNzIF9vd25lcikgcHVibGljIHsKICAgIHVpbnQyNTZbXSBtZW1vcnkgb3duZXJUb2tlbnMgPSBvd25lZFRva2Vuc1tfb3duZXJdOwogICAgdWludDI1NiBvd2VkOwogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgb3duZXJUb2tlbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICB1aW50MjU2IHRvdGFsT3dlZDsKICAgICAgICAKICAgICAgICBpZiAodG9rZW5zW293bmVyVG9rZW5zW2ldXS5raW5kID09IEJVUlJJVE9fS0lORCkgewogICAgICAgICAgdG90YWxPd2VkID0gYnVycml0b1Bvb2xUb3RhbCAqIHRva2Vuc1tvd25lclRva2Vuc1tpXV0ucGF5b3V0IC8gMTAwMDA7CiAgICAgICAgfSBlbHNlIGlmICh0b2tlbnNbb3duZXJUb2tlbnNbaV1dLmtpbmQgPT0gVEFDT19LSU5EKSB7CiAgICAgICAgICB0b3RhbE93ZWQgPSB0YWNvUG9vbFRvdGFsICogdG9rZW5zW293bmVyVG9rZW5zW2ldXS5wYXlvdXQgLyAxMDAwMDsKICAgICAgICB9IGVsc2UgaWYgKHRva2Vuc1tvd25lclRva2Vuc1tpXV0ua2luZCA9PSBTQVVDRV9LSU5EKSB7CiAgICAgICAgICB0b3RhbE93ZWQgPSBzYXVjZVBvb2xUb3RhbCAqIHRva2Vuc1tvd25lclRva2Vuc1tpXV0ucGF5b3V0IC8gMTAwMDA7CiAgICAgICAgfQoKICAgICAgICB1aW50MjU2IHRvdGFsVG9rZW5Pd2VkID0gdG90YWxPd2VkLnN1Yih0b2tlbnNbb3duZXJUb2tlbnNbaV1dLndpdGhkcmF3bik7CiAgICAgICAgb3dlZCArPSB0b3RhbFRva2VuT3dlZDsKICAgICAgICAKICAgICAgICB0b2tlbnNbb3duZXJUb2tlbnNbaV1dLndpdGhkcmF3biArPSB0b3RhbFRva2VuT3dlZDsKICAgIH0KICAgIHBheW91dEJhbGFuY2VzW19vd25lcl0gKz0gb3dlZDsKICB9CgogIGZ1bmN0aW9uIHByaWNlT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHRva2Vuc1tfdG9rZW5JZF0ucHJpY2U7CiAgfQoKICAvKioKICAgKiBAZGV2IFVwZGF0ZSBhIHNpbmdsZSBidXJyaXRvIHBheW91dCBmb3IgdHJhbnNmZXJzLgogICAqIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0aGUgb3duZXIgb2YgdGhlIGJ1cnJpdG8uCiAgICogQHBhcmFtIF90b2tlbklkIFVuaXF1ZSBJZCBvZiB0aGUgdG9rZW4uCiAgKiovCiAgZnVuY3Rpb24gdXBkYXRlU2luZ2xlUGF5b3V0KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB7CiAgICB1aW50MjU2IHRvdGFsT3dlZDsKICAgICAgICAKICAgIGlmICh0b2tlbnNbX3Rva2VuSWRdLmtpbmQgPT0gQlVSUklUT19LSU5EKSB7CiAgICAgIHRvdGFsT3dlZCA9IGJ1cnJpdG9Qb29sVG90YWwgKiB0b2tlbnNbX3Rva2VuSWRdLnBheW91dCAvIDEwMDAwOwogICAgfSBlbHNlIGlmICh0b2tlbnNbX3Rva2VuSWRdLmtpbmQgPT0gVEFDT19LSU5EKSB7CiAgICAgIHRvdGFsT3dlZCA9IHRhY29Qb29sVG90YWwgKiB0b2tlbnNbX3Rva2VuSWRdLnBheW91dCAvIDEwMDAwOwogICAgfSBlbHNlIGlmICh0b2tlbnNbX3Rva2VuSWRdLmtpbmQgPT0gU0FVQ0VfS0lORCkgewogICAgICB0b3RhbE93ZWQgPSBzYXVjZVBvb2xUb3RhbCAqIHRva2Vuc1tfdG9rZW5JZF0ucGF5b3V0IC8gMTAwMDA7CiAgICB9CgogICAgdWludDI1NiB0b3RhbFRva2VuT3dlZCA9IHRvdGFsT3dlZC5zdWIodG9rZW5zW190b2tlbklkXS53aXRoZHJhd24pOwogICAgICAgIAogICAgdG9rZW5zW190b2tlbklkXS53aXRoZHJhd24gKz0gdG90YWxUb2tlbk93ZWQ7CiAgICBwYXlvdXRCYWxhbmNlc1tfb3duZXJdICs9IHRvdGFsVG9rZW5Pd2VkOwogIH0KCiAgLyoqCiAgKiBAZGV2IE93bmVyIGNhbiB3aXRoZHJhdyB0aGVpciBhY2N1bXVsYXRlZCBwYXlvdXRzCiAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3Mgb2YgdG9rZW4gb3duZXIKICAqLwogIGZ1bmN0aW9uIHdpdGhkcmF3UmVudChhZGRyZXNzIF9vd25lcikgcHVibGljIHsKICAgIHJlcXVpcmUoX293bmVyICE9IGFkZHJlc3MoMCkpOwogICAgdXBkYXRlUGF5b3V0KF9vd25lcik7CiAgICB1aW50MjU2IHBheW91dCA9IHBheW91dEJhbGFuY2VzW19vd25lcl07CiAgICBwYXlvdXRCYWxhbmNlc1tfb3duZXJdID0gMDsKICAgIF9vd25lci50cmFuc2ZlcihwYXlvdXQpOwogIH0KCiAgZnVuY3Rpb24gZ2V0UmVudE93ZWQoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgb3dlZCkgewogICAgcmVxdWlyZShfb3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICB1cGRhdGVQYXlvdXQoX293bmVyKTsKICAgIHJldHVybiBwYXlvdXRCYWxhbmNlc1tfb3duZXJdOwogIH0KCiAgLyoqCiAgKiBAZGV2IFJldHVybiBhbGwgYnVycml0byBkYXRhCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBvZiB0b2tlbgogICovCiAgZnVuY3Rpb24gZ2V0VG9rZW4gKHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsIHZpZXcgCiAgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3ByaWNlLCB1aW50MjU2IF9sYXN0UHJpY2UsIHVpbnQyNTYgX25leHRQcmljZSwgdWludDI1NiBfcGF5b3V0LCB1aW50OCBfa2luZCwgdWludDI1NiBfYm9zc1Rva2VuSWQsIGFkZHJlc3NbNV0gX3ByZXZpb3NPd25lcnMpIAogIHsKICAgIFRva2VuIG1lbW9yeSB0b2tlbiA9IHRva2Vuc1tfdG9rZW5JZF07CiAgICByZXR1cm4gKHRva2VuLm93bmVyLCB0b2tlbi5wcmljZSwgdG9rZW4ubGFzdFByaWNlLCBnZXROZXh0UHJpY2UodG9rZW4ucHJpY2UpLCB0b2tlbi5wYXlvdXQsIHRva2VuLmtpbmQsIHRva2VuLmJvc3NUb2tlbklkLCB0b2tlbi5wcmV2aW91c093bmVycyk7CiAgfQoKICAvKioKICAqIEBkZXYgRGV0ZXJtaW5lcyBpZiB0b2tlbiBleGlzdHMgYnkgY2hlY2tpbmcgaXQncyBwcmljZQogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdG9rZW4KICAqLwogIGZ1bmN0aW9uIHRva2VuRXhpc3RzICh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sIF9leGlzdHMpIHsKICAgIHJldHVybiB0b2tlbnNbX3Rva2VuSWRdLnByaWNlID4gMDsKICB9CgogIC8qKgogICogQGRldiBHdWFyYW50ZWVzIG1zZy5zZW5kZXIgaXMgb3duZXIgb2YgdGhlIGdpdmVuIHRva2VuCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gdmFsaWRhdGUgaXRzIG93bmVyc2hpcCBiZWxvbmdzIHRvIG1zZy5zZW5kZXIKICAqLwogIG1vZGlmaWVyIG9ubHlPd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHsKICAgIHJlcXVpcmUob3duZXJPZihfdG9rZW5JZCkgPT0gbXNnLnNlbmRlcik7CiAgICBfOwogIH0KCiAgLyoqCiAgKiBAZGV2IEd1YXJhbnRlZXMgbXNnLnNlbmRlciBpcyBub3QgYSBjb250cmFjdAogICogQHBhcmFtIF9idXllciBhZGRyZXNzIG9mIHBlcnNvbiBidXlpbmcgYnVycml0bwogICovCiAgbW9kaWZpZXIgaXNOb3RDb250cmFjdChhZGRyZXNzIF9idXllcikgewogICAgdWludCBzaXplOwogICAgYXNzZW1ibHkgeyBzaXplIDo9IGV4dGNvZGVzaXplKF9idXllcikgfQogICAgcmVxdWlyZShzaXplID09IDApOwogICAgXzsKICB9CgoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgdG90YWwgYW1vdW50IG9mIHRva2VucyBzdG9yZWQgYnkgdGhlIGNvbnRyYWN0CiAgKiBAcmV0dXJuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgKi8KICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiB0b3RhbFRva2VuczsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF9vd25lciBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSBiYWxhbmNlIG9mCiAgKiBAcmV0dXJuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBvd25lZFRva2Vuc1tfb3duZXJdLmxlbmd0aDsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBsaXN0IG9mIHRva2VucyBvd25lZCBieSBhIGdpdmVuIGFkZHJlc3MKICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyB0byBxdWVyeSB0aGUgdG9rZW5zIG9mCiAgKiBAcmV0dXJuIHVpbnQyNTZbXSByZXByZXNlbnRpbmcgdGhlIGxpc3Qgb2YgdG9rZW5zIG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcwogICovCiAgZnVuY3Rpb24gdG9rZW5zT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTZbXSkgewogICAgcmV0dXJuIG93bmVkVG9rZW5zW19vd25lcl07CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgb3duZXIgb2YgdGhlIHNwZWNpZmllZCB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIHF1ZXJ5IHRoZSBvd25lciBvZgogICogQHJldHVybiBvd25lciBhZGRyZXNzIGN1cnJlbnRseSBtYXJrZWQgYXMgdGhlIG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICovCiAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzKSB7CiAgICBhZGRyZXNzIG93bmVyID0gdG9rZW5Pd25lcltfdG9rZW5JZF07CiAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCkpOwogICAgcmV0dXJuIG93bmVyOwogIH0KCiAgLyoqCiAgICogQGRldiBHZXRzIHRoZSBhcHByb3ZlZCBhZGRyZXNzIHRvIHRha2Ugb3duZXJzaGlwIG9mIGEgZ2l2ZW4gdG9rZW4gSUQKICAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gcXVlcnkgdGhlIGFwcHJvdmFsIG9mCiAgICogQHJldHVybiBhZGRyZXNzIGN1cnJlbnRseSBhcHByb3ZlZCB0byB0YWtlIG93bmVyc2hpcCBvZiB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlZEZvcih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzKSB7CiAgICByZXR1cm4gdG9rZW5BcHByb3ZhbHNbX3Rva2VuSWRdOwogIH0KCiAgLyoqCiAgKiBAZGV2IFRyYW5zZmVycyB0aGUgb3duZXJzaGlwIG9mIGEgZ2l2ZW4gdG9rZW4gSUQgdG8gYW5vdGhlciBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gcmVjZWl2ZSB0aGUgb3duZXJzaGlwIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIG9ubHlPd25lck9mKF90b2tlbklkKSB7CiAgICBjbGVhckFwcHJvdmFsQW5kVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAqIEBkZXYgQXBwcm92ZXMgYW5vdGhlciBhZGRyZXNzIHRvIGNsYWltIGZvciB0aGUgb3duZXJzaGlwIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90byBhZGRyZXNzIHRvIGJlIGFwcHJvdmVkIGZvciB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBiZSBhcHByb3ZlZAogICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIG9ubHlPd25lck9mKF90b2tlbklkKSB7CiAgICBhZGRyZXNzIG93bmVyID0gb3duZXJPZihfdG9rZW5JZCk7CiAgICByZXF1aXJlKF90byAhPSBvd25lcik7CiAgICBpZiAoYXBwcm92ZWRGb3IoX3Rva2VuSWQpICE9IDAgfHwgX3RvICE9IDApIHsKICAgICAgdG9rZW5BcHByb3ZhbHNbX3Rva2VuSWRdID0gX3RvOwogICAgICBBcHByb3ZhbChvd25lciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CiAgfQoKICAvKioKICAqIEBkZXYgQ2xhaW1zIHRoZSBvd25lcnNoaXAgb2YgYSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIGJlaW5nIGNsYWltZWQgYnkgdGhlIG1zZy5zZW5kZXIKICAqLwogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsKICAgIHJlcXVpcmUoaXNBcHByb3ZlZEZvcihtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgY2xlYXJBcHByb3ZhbEFuZFRyYW5zZmVyKG93bmVyT2YoX3Rva2VuSWQpLCBtc2cuc2VuZGVyLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAgKiBAZGV2IFRlbGxzIHdoZXRoZXIgdGhlIG1zZy5zZW5kZXIgaXMgYXBwcm92ZWQgZm9yIHRoZSBnaXZlbiB0b2tlbiBJRCBvciBub3QKICAgKiBUaGlzIGZ1bmN0aW9uIGlzIG5vdCBwcml2YXRlIHNvIGl0IGNhbiBiZSBleHRlbmRlZCBpbiBmdXJ0aGVyIGltcGxlbWVudGF0aW9ucyBsaWtlIHRoZSBvcGVyYXRhYmxlIEVSQzcyMQogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBvZiB0aGUgb3duZXIgdG8gcXVlcnkgdGhlIGFwcHJvdmFsIG9mCiAgICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIHF1ZXJ5IHRoZSBhcHByb3ZhbCBvZgogICAqIEByZXR1cm4gYm9vbCB3aGV0aGVyIHRoZSBtc2cuc2VuZGVyIGlzIGFwcHJvdmVkIGZvciB0aGUgZ2l2ZW4gdG9rZW4gSUQgb3Igbm90CiAgICovCiAgZnVuY3Rpb24gaXNBcHByb3ZlZEZvcihhZGRyZXNzIF9vd25lciwgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gYXBwcm92ZWRGb3IoX3Rva2VuSWQpID09IF9vd25lcjsKICB9CiAgCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGNsZWFyIGN1cnJlbnQgYXBwcm92YWwgYW5kIHRyYW5zZmVyIHRoZSBvd25lcnNoaXAgb2YgYSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF9mcm9tIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICogQHBhcmFtIF90byBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRoZSB0b2tlbiB0bwogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgKi8KICBmdW5jdGlvbiBjbGVhckFwcHJvdmFsQW5kVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGludGVybmFsIGlzTm90Q29udHJhY3QoX3RvKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3RvICE9IG93bmVyT2YoX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUob3duZXJPZihfdG9rZW5JZCkgPT0gX2Zyb20pOwoKICAgIGNsZWFyQXBwcm92YWwoX2Zyb20sIF90b2tlbklkKTsKICAgIHVwZGF0ZVNpbmdsZVBheW91dChfZnJvbSwgX3Rva2VuSWQpOwogICAgcmVtb3ZlVG9rZW4oX2Zyb20sIF90b2tlbklkKTsKICAgIGFkZFRva2VuKF90bywgX3Rva2VuSWQpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGNsZWFyIGN1cnJlbnQgYXBwcm92YWwgb2YgYSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgKi8KICBmdW5jdGlvbiBjbGVhckFwcHJvdmFsKGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHsKICAgIHJlcXVpcmUob3duZXJPZihfdG9rZW5JZCkgPT0gX293bmVyKTsKICAgIHRva2VuQXBwcm92YWxzW190b2tlbklkXSA9IDA7CiAgICBBcHByb3ZhbChfb3duZXIsIDAsIF90b2tlbklkKTsKICB9CgoKICAgIC8qKgogICogQGRldiBNaW50IHRva2VuIGZ1bmN0aW9uCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCBvd24gdGhlIG1pbnRlZCB0b2tlbgogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIG1pbnRlZCBieSB0aGUgbXNnLnNlbmRlcgogICovCiAgZnVuY3Rpb24gX21pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGludGVybmFsIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgYWRkVG9rZW4oX3RvLCBfdG9rZW5JZCk7CiAgICBUcmFuc2ZlcigweDAsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGFkZCBhIHRva2VuIElEIHRvIHRoZSBsaXN0IG9mIGEgZ2l2ZW4gYWRkcmVzcwogICogQHBhcmFtIF90byBhZGRyZXNzIHJlcHJlc2VudGluZyB0aGUgbmV3IG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIGFkZGVkIHRvIHRoZSB0b2tlbnMgbGlzdCBvZiB0aGUgZ2l2ZW4gYWRkcmVzcwogICovCiAgZnVuY3Rpb24gYWRkVG9rZW4oYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgewogICAgcmVxdWlyZSh0b2tlbk93bmVyW190b2tlbklkXSA9PSBhZGRyZXNzKDApKTsKICAgIHRva2VuT3duZXJbX3Rva2VuSWRdID0gX3RvOwogICAgdG9rZW5zW190b2tlbklkXS5vd25lciA9IF90bzsKICAgIHVpbnQyNTYgbGVuZ3RoID0gYmFsYW5jZU9mKF90byk7CiAgICBvd25lZFRva2Vuc1tfdG9dLnB1c2goX3Rva2VuSWQpOwogICAgb3duZWRUb2tlbnNJbmRleFtfdG9rZW5JZF0gPSBsZW5ndGg7CiAgICB0b3RhbFRva2VucyA9IHRvdGFsVG9rZW5zLmFkZCgxKTsKICB9CgogIC8qKgogICogQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0byByZW1vdmUgYSB0b2tlbiBJRCBmcm9tIHRoZSBsaXN0IG9mIGEgZ2l2ZW4gYWRkcmVzcwogICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgcmVwcmVzZW50aW5nIHRoZSBwcmV2aW91cyBvd25lciBvZiB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBiZSByZW1vdmVkIGZyb20gdGhlIHRva2VucyBsaXN0IG9mIHRoZSBnaXZlbiBhZGRyZXNzCiAgKi8KICBmdW5jdGlvbiByZW1vdmVUb2tlbihhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHsKICAgIHJlcXVpcmUob3duZXJPZihfdG9rZW5JZCkgPT0gX2Zyb20pOwoKICAgIHVpbnQyNTYgdG9rZW5JbmRleCA9IG93bmVkVG9rZW5zSW5kZXhbX3Rva2VuSWRdOwogICAgdWludDI1NiBsYXN0VG9rZW5JbmRleCA9IGJhbGFuY2VPZihfZnJvbSkuc3ViKDEpOwogICAgdWludDI1NiBsYXN0VG9rZW4gPSBvd25lZFRva2Vuc1tfZnJvbV1bbGFzdFRva2VuSW5kZXhdOwoKICAgIHRva2VuT3duZXJbX3Rva2VuSWRdID0gMDsKICAgIG93bmVkVG9rZW5zW19mcm9tXVt0b2tlbkluZGV4XSA9IGxhc3RUb2tlbjsKICAgIG93bmVkVG9rZW5zW19mcm9tXVtsYXN0VG9rZW5JbmRleF0gPSAwOwogICAgLy8gTm90ZSB0aGF0IHRoaXMgd2lsbCBoYW5kbGUgc2luZ2xlLWVsZW1lbnQgYXJyYXlzLiBJbiB0aGF0IGNhc2UsIGJvdGggdG9rZW5JbmRleCBhbmQgbGFzdFRva2VuSW5kZXggYXJlIGdvaW5nIHRvCiAgICAvLyBiZSB6ZXJvLiBUaGVuIHdlIGNhbiBtYWtlIHN1cmUgdGhhdCB3ZSB3aWxsIHJlbW92ZSBfdG9rZW5JZCBmcm9tIHRoZSBvd25lZFRva2VucyBsaXN0IHNpbmNlIHdlIGFyZSBmaXJzdCBzd2FwcGluZwogICAgLy8gdGhlIGxhc3RUb2tlbiB0byB0aGUgZmlyc3QgcG9zaXRpb24sIGFuZCB0aGVuIGRyb3BwaW5nIHRoZSBlbGVtZW50IHBsYWNlZCBpbiB0aGUgbGFzdCBwb3NpdGlvbiBvZiB0aGUgbGlzdAoKICAgIG93bmVkVG9rZW5zW19mcm9tXS5sZW5ndGgtLTsKICAgIG93bmVkVG9rZW5zSW5kZXhbX3Rva2VuSWRdID0gMDsKICAgIG93bmVkVG9rZW5zSW5kZXhbbGFzdFRva2VuXSA9IHRva2VuSW5kZXg7CiAgICB0b3RhbFRva2VucyA9IHRvdGFsVG9rZW5zLnN1YigxKTsKICB9CgogIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcgX25hbWUpIHsKICAgIHJldHVybiAiQ3J5cHRvQnVycml0by5jbyI7CiAgfQoKICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcgX3N5bWJvbCkgewogICAgcmV0dXJuICJNQlQiOwogIH0KCiAgZnVuY3Rpb24gc2V0RmVlUGVyY2VudGFnZSh1aW50MjU2IF9uZXdGZWUpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShfbmV3RmVlIDw9IDUpOwogICAgcmVxdWlyZShfbmV3RmVlID49IDMpOwoKICAgIGZlZVBlcmNlbnRhZ2UgPSBfbmV3RmVlOwogIH0KICAKICBmdW5jdGlvbiBzZXRNYWluUG9vbEN1dFBlcmNlbnRhZ2UodWludDI1NiBfbmV3RmVlKSBvbmx5T3duZXIgcHVibGljIHsKICAgIHJlcXVpcmUoX25ld0ZlZSA8PSAzMCk7CiAgICByZXF1aXJlKF9uZXdGZWUgPj0gNSk7CgogICAgbWFpblBvb2xDdXRQZXJjZW50YWdlID0gX25ld0ZlZTsKICB9CgogIGZ1bmN0aW9uIHNldERpdmlkZW5kQ3V0UGVyY2VudGFnZSh1aW50MjU2IF9uZXdGZWUpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShfbmV3RmVlIDw9IDIwMCk7CiAgICByZXF1aXJlKF9uZXdGZWUgPj0gNTApOwoKICAgIGRpdmlkZW5kQ3V0UGVyY2VudGFnZSA9IF9uZXdGZWU7CiAgfQoKICAvLyBNaWdyYXRpb24KICBPbGRDb250cmFjdCBvbGRDb250cmFjdDsKCiAgZnVuY3Rpb24gc2V0T2xkQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgb25seU93bmVyIHB1YmxpYyB7CiAgICBvbGRDb250cmFjdCA9IE9sZENvbnRyYWN0KF9hZGRyKTsKICB9CgogIGZ1bmN0aW9uIHBvcHVsYXRlRnJvbU9sZENvbnRyYWN0KHVpbnQyNTZbXSBfaWRzKSBvbmx5T3duZXIgcHVibGljIHsKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IF9pZHMubGVuZ3RoOyBpKyspIHsKICAgICAgLy8gQ2FuJ3QgcmV3cml0ZSB0b2tlbnMKICAgICAgaWYgKHRva2Vuc1tfaWRzW2ldXS5wcmljZSA9PSAwKSB7CiAgICAgICAgYWRkcmVzcyBfb3duZXI7CiAgICAgICAgdWludDI1NiBfcHJpY2U7CiAgICAgICAgdWludDI1NiBfbGFzdFByaWNlOwogICAgICAgIHVpbnQyNTYgX25leHRQcmljZTsKICAgICAgICB1aW50MjU2IF9wYXlvdXQ7CiAgICAgICAgdWludDggX2tpbmQ7CiAgICAgICAgdWludDI1NiBfYm9zc1Rva2VuSWQ7CgogICAgICAgIChfb3duZXIsIF9wcmljZSwgX2xhc3RQcmljZSwgX25leHRQcmljZSwgX3BheW91dCwgX2tpbmQsIF9ib3NzVG9rZW5JZCkgPSBvbGRDb250cmFjdC5nZXRUb2tlbihfaWRzW2ldKTsKCiAgICAgICAgY3JlYXRlVG9rZW4oX2lkc1tpXSwgX3ByaWNlLCBfbGFzdFByaWNlLCBfcGF5b3V0LCBfa2luZCwgX2Jvc3NUb2tlbklkLCBfb3duZXIpOwogICAgICB9CiAgICB9CiAgfQp9CgppbnRlcmZhY2UgT2xkQ29udHJhY3QgewogIGZ1bmN0aW9uIGdldFRva2VuICh1aW50MjU2IF90b2tlbklkKSBleHRlcm5hbCB2aWV3IAogIHJldHVybnMgKGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSwgdWludDI1NiBfbGFzdFByaWNlLCB1aW50MjU2IF9uZXh0UHJpY2UsIHVpbnQyNTYgX3BheW91dCwgdWludDggX2tpbmQsIHVpbnQyNTYgX2Jvc3NUb2tlbklkKTsKfQ=='.
	

]
