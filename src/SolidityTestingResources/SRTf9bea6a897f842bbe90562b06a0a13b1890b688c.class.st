Class {
	#name : #SRTf9bea6a897f842bbe90562b06a0a13b1890b688c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf9bea6a897f842bbe90562b06a0a13b1890b688c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBEZXN0cnVjdGlibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHRoYXQgY2FuIGJlIGRlc3Ryb3llZCBieSBvd25lci4gQWxsIGZ1bmRzIGluIGNvbnRyYWN0IHdpbGwgYmUgc2VudCB0byB0aGUgb3duZXIuCiAqLwpjb250cmFjdCBEZXN0cnVjdGlibGUgaXMgT3duYWJsZSB7CgogIGZ1bmN0aW9uIERlc3RydWN0aWJsZSgpIHB1YmxpYyBwYXlhYmxlIHsgfQoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVycyB0aGUgY3VycmVudCBiYWxhbmNlIHRvIHRoZSBvd25lciBhbmQgdGVybWluYXRlcyB0aGUgY29udHJhY3QuCiAgICovCiAgZnVuY3Rpb24gZGVzdHJveSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICB9CgogIGZ1bmN0aW9uIGRlc3Ryb3lBbmRTZW5kKGFkZHJlc3MgX3JlY2lwaWVudCkgb25seU93bmVyIHB1YmxpYyB7CiAgICBzZWxmZGVzdHJ1Y3QoX3JlY2lwaWVudCk7CiAgfQp9CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnRyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBCYWxsZXJUb2tlbiBpcyBPd25hYmxlLCBEZXN0cnVjdGlibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgICAvKioqIEVWRU5UUyAqKiovCgogICAgLy8gQGRldiBGaXJlZCB3aGVuZXZlciBhIG5ldyBCYWxsZXIgdG9rZW4gaXMgY3JlYXRlZCBmb3IgdGhlIGZpcnN0IHRpbWUuCiAgICBldmVudCBCYWxsZXJDcmVhdGVkKHVpbnQyNTYgdG9rZW5JZCwgc3RyaW5nIG5hbWUsIGFkZHJlc3Mgb3duZXIpOwoKICAgIC8vIEBkZXYgRmlyZWQgd2hlbmV2ZXIgYSBCYWxsZXIgdG9rZW4gaXMgc29sZC4KICAgIGV2ZW50IFRva2VuU29sZCh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgb2xkUHJpY2UsIHVpbnQyNTYgbmV3UHJpY2UsIGFkZHJlc3MgcHJldk93bmVyLCBhZGRyZXNzIG5ld093bmVyLCBzdHJpbmcgbmFtZSk7CgogICAgLy8gQGRldiBGaXJlZCB3aGVuZXZlciBhIHRlYW0gaXMgdHJhbnNmZXJlZCBmcm9tIG9uZSBvd25lciB0byBhbm90aGVyCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CgogICAgLyoqKiBDT05TVEFOVFMgKioqLwoKICAgIHVpbnQgY29uc3RhbnQgcHJpdmF0ZSBERUZBVUxUX1NUQVJUX1BSSUNFID0gMC4wMSBldGhlcjsKICAgIHVpbnQgY29uc3RhbnQgcHJpdmF0ZSBGSVJTVF9QUklDRV9MSU1JVCA9ICAwLjUgZXRoZXI7CiAgICB1aW50IGNvbnN0YW50IHByaXZhdGUgU0VDT05EX1BSSUNFX0xJTUlUID0gIDIgZXRoZXI7CiAgICB1aW50IGNvbnN0YW50IHByaXZhdGUgVEhJUkRfUFJJQ0VfTElNSVQgPSAgNSBldGhlcjsKICAgIHVpbnQgY29uc3RhbnQgcHJpdmF0ZSBGSVJTVF9DT01NSVNTSU9OX0xFVkVMID0gNTsKICAgIHVpbnQgY29uc3RhbnQgcHJpdmF0ZSBTRUNPTkRfQ09NTUlTU0lPTl9MRVZFTCA9IDQ7CiAgICB1aW50IGNvbnN0YW50IHByaXZhdGUgVEhJUkRfQ09NTUlTU0lPTl9MRVZFTCA9IDM7CiAgICB1aW50IGNvbnN0YW50IHByaXZhdGUgRk9VUlRIX0NPTU1JU1NJT05fTEVWRUwgPSAyOwogICAgdWludCBjb25zdGFudCBwcml2YXRlIEZJUlNUX0xFVkVMX0lOQ1JFQVNFID0gMjAwOwogICAgdWludCBjb25zdGFudCBwcml2YXRlIFNFQ09ORF9MRVZFTF9JTkNSRUFTRSA9IDEzNTsKICAgIHVpbnQgY29uc3RhbnQgcHJpdmF0ZSBUSElSRF9MRVZFTF9JTkNSRUFTRSA9IDEyNTsKICAgIHVpbnQgY29uc3RhbnQgcHJpdmF0ZSBGT1VSVEhfTEVWRUxfSU5DUkVBU0UgPSAxMTU7CgogICAgLyoqKiBTVE9SQUdFICoqKi8KCiAgICAvLyBAZGV2IG1hcHMgdGVhbSBpZCB0byBhZGRyZXNzIG9mIHdobyBvd25zIGl0CiAgICBtYXBwaW5nICh1aW50ID0+IGFkZHJlc3MpIHB1YmxpYyB0ZWFtSW5kZXhUb093bmVyOwoKICAgIC8vIEBkZXYgbWFwcyB0ZWFtIGlkIHRvIGEgcHJpY2UKICAgIG1hcHBpbmcgKHVpbnQgPT4gdWludCkgcHJpdmF0ZSB0ZWFtSW5kZXhUb1ByaWNlOwoKICAgIC8vIEBkZXYgbWFwcyBhZGRyZXNzIHRvIGhvdyBtYW55IHRva2VucyB0aGV5IG93bgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwcml2YXRlIG93bmVyc2hpcFRva2VuQ291bnQ7CgoKICAgIC8qKiogREFUQVRZUEVTICoqKi8KICAgIC8vQGRldiBzdHJ1Y3QgZm9yIGEgYmFsbGVyIHRlYW0KICAgIHN0cnVjdCBUZWFtIHsKICAgICAgc3RyaW5nIG5hbWU7CiAgICB9CgogICAgLy9AZGV2IGFycmF5IHdoaWNoIGhvbGRzIGVhY2ggdGVhbQogICAgVGVhbVtdIHByaXZhdGUgYmFsbGVyVGVhbXM7CgogICAgLyoqKiBQVUJMSUMgRlVOQ1RJT05TICoqKi8KCiAgICAvKioKICAgICogQGRldiBwdWJsaWMgZnVuY3Rpb24gdG8gY3JlYXRlIHRlYW0sIGNhbiBvbmx5IGJlIGNhbGxlZCBieSBvd25lciBvZiBzbWFydCBjb250cmFjdAogICAgKiBAcGFyYW0gX25hbWUgdGhlIG5hbWUgb2YgdGhlIHRlYW0KICAgICovCgogICAgZnVuY3Rpb24gY3JlYXRlVGVhbShzdHJpbmcgX25hbWUsIHVpbnQgX3ByaWNlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgX2NyZWF0ZVRlYW0oX25hbWUsIHRoaXMsIF9wcmljZSk7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgUmV0dXJucyBhbGwgdGhlIHJlbGV2YW50IGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgdGVhbS4KICAgICogQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgdGVhbS4KICAgICogQHJldHVybiB0ZWFtTmFtZSB0aGUgbmFtZSBvZiB0aGUgdGVhbS4KICAgICogQHJldHVybiBjdXJyUHJpY2Ugd2hhdCB0aGUgdGVhbSBpcyBjdXJyZW50bHkgd29ydGguCiAgICAqIEByZXR1cm4gb3duZXIgYWRkcmVzcyBvZiB3aG9ldmVyIG93bnMgdGhlIHRlYW0KICAgICovCiAgICBmdW5jdGlvbiBnZXRUZWFtKHVpbnQgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMoc3RyaW5nIHRlYW1OYW1lLCB1aW50IGN1cnJQcmljZSwgYWRkcmVzcyBvd25lcikgewogICAgICAgIFRlYW0gc3RvcmFnZSBjdXJyVGVhbSA9IGJhbGxlclRlYW1zW190b2tlbklkXTsKICAgICAgICB0ZWFtTmFtZSA9IGN1cnJUZWFtLm5hbWU7CiAgICAgICAgY3VyclByaWNlID0gdGVhbUluZGV4VG9QcmljZVtfdG9rZW5JZF07CiAgICAgICAgb3duZXIgPSBvd25lck9mKF90b2tlbklkKTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBjaGFuZ2VzIHRoZSBuYW1lIG9mIGEgc3BlY2lmaWMgdGVhbS4KICAgICogQHBhcmFtIF90b2tlbklkIFRoZSBpZCBvZiB0aGUgdGVhbSB3aGljaCB5b3Ugd2FudCB0byBjaGFuZ2UuCiAgICAqIEBwYXJhbSBfbmV3TmFtZSBUaGUgbmFtZSB5b3Ugd2FudCB0byBzZXQgdGhlIHRlYW0gdG8gYmUuCiAgICAqLwogICAgZnVuY3Rpb24gY2hhbmdlVGVhbU5hbWUodWludCBfdG9rZW5JZCwgc3RyaW5nIF9uZXdOYW1lKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgcmVxdWlyZShfdG9rZW5JZCA8IGJhbGxlclRlYW1zLmxlbmd0aCk7CiAgICAgIGJhbGxlclRlYW1zW190b2tlbklkXS5uYW1lID0gX25ld05hbWU7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgc2VuZHMgYWxsIGV0aGVyZXVtIGluIHRoaXMgY29udHJhY3QgdG8gdGhlIGFkZHJlc3Mgc3BlY2lmaWVkCiAgICAqIEBwYXJhbSBfdG8gYWRkcmVzcyB5b3Ugd2FudCB0aGUgZXRoIHRvIGJlIHNlbnQgdG8KICAgICovCgogICAgZnVuY3Rpb24gcGF5b3V0KGFkZHJlc3MgX3RvKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgX3dpdGhkcmF3QW1vdW50KF90bywgdGhpcy5iYWxhbmNlKTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBGdW5jdGlvbiB0byBzZW5kIHNvbWUgYW1vdW50IG9mIGV0aGVyZXVtIG91dCBvZiB0aGUgY29udHJhY3QgdG8gYW4gYWRkcmVzcwogICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdGhlIGV0aCB3aWxsIGJlIHNlbnQgdG8KICAgICogQHBhcmFtIF9hbW91bnQgYW1vdW50IHlvdSB3YW50IHRvIHdpdGhkcmF3CiAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXdBbW91bnQoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgIF93aXRoZHJhd0Ftb3VudChfdG8sIF9hbW91bnQpOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGdldCBwcmljZSBvZiBhIHRlYW0KICAgICogQHBhcmFtIF90ZWFtSWQgb2YgdGVhbQogICAgKiBAcmV0dXJuIHByaWNlIHByaWNlIG9mIHRlYW0KICAgICovCiAgICBmdW5jdGlvbiBwcmljZU9mVGVhbSh1aW50IF90ZWFtSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQgcHJpY2UsIHVpbnQgdGVhbUlkKSB7CiAgICAgIHByaWNlID0gdGVhbUluZGV4VG9QcmljZVtfdGVhbUlkXTsKICAgICAgdGVhbUlkID0gX3RlYW1JZDsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBHZXRzIGxpc3Qgb2YgdGVhbXMgb3duZWQgYnkgYSBwZXJzb24uCiAgICAqIEBkZXYgbm90ZTogZG9uJ3Qgd2FudCB0byBjYWxsIHRoaXMgaW4gdGhlIHNtYXJ0IGNvbnRyYWN0LCBleHBlbnNpdmUgb3AuCiAgICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBvZiB0aGUgb3duZXIKICAgICogQHJldHVybiBvd25lZFRlYW1zIGxpc3Qgb2YgdGhlIHRlYW1zIG93bmVkIGJ5IHRoZSBvd25lcgogICAgKi8KICAgIGZ1bmN0aW9uIGdldFRlYW1zT2ZPd25lcihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludFtdIG93bmVkVGVhbXMpIHsKICAgICAgdWludCB0b2tlbkNvdW50ID0gYmFsYW5jZU9mKF9vd25lcik7CiAgICAgIG93bmVkVGVhbXMgPSBuZXcgdWludFtdKHRva2VuQ291bnQpOwogICAgICB1aW50IHRvdGFsVGVhbXMgPSB0b3RhbFN1cHBseSgpOwogICAgICB1aW50IHJlc3VsdEluZGV4ID0gMDsKICAgICAgaWYgKHRva2VuQ291bnQgIT0gMCkgewogICAgICAgIGZvciAodWludCBwb3MgPSAwOyBwb3MgPCB0b3RhbFRlYW1zOyBwb3MrKykgewogICAgICAgICAgYWRkcmVzcyBjdXJyT3duZXIgPSBvd25lck9mKHBvcyk7CiAgICAgICAgICBpZiAoY3Vyck93bmVyID09IF9vd25lcikgewogICAgICAgICAgICBvd25lZFRlYW1zW3Jlc3VsdEluZGV4XSA9IHBvczsKICAgICAgICAgICAgcmVzdWx0SW5kZXgrKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICAvKgogICAgICogQGRldiBnZXRzIHRoZSBhZGRyZXNzIG9mIG93bmVyIG9mIHRoZSB0ZWFtCiAgICAgKiBAcGFyYW0gX3Rva2VuSWQgaXMgaWQgb2YgdGhlIHRlYW0KICAgICAqIEByZXR1cm4gb3duZXIgdGhlIG93bmVyIG9mIHRoZSB0ZWFtJ3MgYWRkcmVzcwogICAgKi8KICAgIGZ1bmN0aW9uIG93bmVyT2YodWludCBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBvd25lcikgewogICAgICBvd25lciA9IHRlYW1JbmRleFRvT3duZXJbX3Rva2VuSWRdOwogICAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCkpOwogICAgfQoKICAgIC8qCiAgICAgKiBAZGV2IGdldHMgaG93IG1hbnkgdG9rZW5zIGFuIGFkZHJlc3Mgb3duZXJzCiAgICAgKiBAcGFyYW0gX293bmVyIGlzIGFkZHJlc3Mgb2Ygb3duZXIKICAgICAqIEByZXR1cm4gbnVtVGVhbXNPd25lZCBob3cgbXVjaCB0ZWFtcyBoZSBoYXMKICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQgbnVtVGVhbXNPd25lZCkgewogICAgICBudW1UZWFtc093bmVkID0gb3duZXJzaGlwVG9rZW5Db3VudFtfb3duZXJdOwogICAgfQoKICAgIC8qCiAgICAgKiBAZGV2IGdldHMgdG90YWwgbnVtYmVyIG9mIHRlYW1zCiAgICAgKiBAcmV0dXJuIHRvdGFsTnVtVGVhbXMgd2hpY2ggaXMgdGhlIG51bWJlciBvZiB0ZWFtcwogICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCB0b3RhbE51bVRlYW1zKSB7CiAgICAgIHRvdGFsTnVtVGVhbXMgPSBiYWxsZXJUZWFtcy5sZW5ndGg7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgQWxsb3dzIHVzZXIgdG8gYnV5IGEgdGVhbSBmcm9tIHRoZSBvbGQgb3duZXIuCiAgICAqIEBkZXYgUGF5cyBvbGQgb3duZXIgbWludXMgY29tbWlzc2lvbiwgdXBkYXRlcyBwcmljZS4KICAgICogQHBhcmFtIF90ZWFtSWQgaWQgb2YgdGhlIHRlYW0gdGhleSdyZSB0cnlpbmcgdG8gYnV5CiAgICAqLwogICAgZnVuY3Rpb24gcHVyY2hhc2UodWludCBfdGVhbUlkKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBvd25lck9mKF90ZWFtSWQpOwogICAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKCiAgICAgIHVpbnQgc2VsbGluZ1ByaWNlID0gdGVhbUluZGV4VG9QcmljZVtfdGVhbUlkXTsKCiAgICAgIC8vIE1ha2luZyBzdXJlIHRva2VuIG93bmVyIGlzIG5vdCBzZW5kaW5nIHRvIHNlbGYKICAgICAgcmVxdWlyZShvbGRPd25lciAhPSBuZXdPd25lcik7CgogICAgICAvLyBTYWZldHkgY2hlY2sgdG8gcHJldmVudCBhZ2FpbnN0IGFuIHVuZXhwZWN0ZWQgMHgwIGRlZmF1bHQuCiAgICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKG5ld093bmVyKSk7CgogICAgICAvLyBNYWtpbmcgc3VyZSBzZW50IGFtb3VudCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNlbGxpbmdQcmljZQogICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBzZWxsaW5nUHJpY2UpOwoKICAgICAgdWludCBwYXltZW50ID0gIF9jYWxjdWxhdGVQYXltZW50VG9Pd25lcihzZWxsaW5nUHJpY2UpOwogICAgICB1aW50IGV4Y2Vzc1BheW1lbnQgPSBtc2cudmFsdWUuc3ViKHNlbGxpbmdQcmljZSk7CiAgICAgIHVpbnQgbmV3UHJpY2UgPSBfY2FsY3VsYXRlTmV3UHJpY2Uoc2VsbGluZ1ByaWNlKTsKICAgICAgdGVhbUluZGV4VG9QcmljZVtfdGVhbUlkXSA9IG5ld1ByaWNlOwoKICAgICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3RlYW1JZCk7CiAgICAgIC8vIFBheSBvbGQgdG9rZW5Pd25lciwgdW5sZXNzIGl0J3MgdGhlIHNtYXJ0IGNvbnRyYWN0CiAgICAgIGlmIChvbGRPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgICAgb2xkT3duZXIudHJhbnNmZXIocGF5bWVudCk7CiAgICAgIH0KCiAgICAgIG5ld093bmVyLnRyYW5zZmVyKGV4Y2Vzc1BheW1lbnQpOwogICAgICBzdHJpbmcgbWVtb3J5IHRlYW1OYW1lID0gYmFsbGVyVGVhbXNbX3RlYW1JZF0ubmFtZTsKICAgICAgVG9rZW5Tb2xkKF90ZWFtSWQsIHNlbGxpbmdQcmljZSwgbmV3UHJpY2UsIG9sZE93bmVyLCBuZXdPd25lciwgdGVhbU5hbWUpOwogICAgfQoKCiAgICAvLy8gU2FmZXR5IGNoZWNrIG9uIF90byBhZGRyZXNzIHRvIHByZXZlbnQgYWdhaW5zdCBhbiB1bmV4cGVjdGVkIDB4MCBkZWZhdWx0LgogICAgZnVuY3Rpb24gX2FkZHJlc3NOb3ROdWxsKGFkZHJlc3MgX3RvKSBwcml2YXRlIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgICByZXR1cm4gX3RvICE9IGFkZHJlc3MoMCk7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgSW50ZXJuYWwgZnVuY3Rpb24gdG8gc2VuZCBzb21lIGFtb3VudCBvZiBldGhlcmV1bSBvdXQgb2YgdGhlIGNvbnRyYWN0IHRvIGFuIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBhZGRyZXNzIHRoZSBldGggd2lsbCBiZSBzZW50IHRvCiAgICAqIEBwYXJhbSBfYW1vdW50IGFtb3VudCB5b3Ugd2FudCB0byB3aXRoZHJhdwogICAgKi8KICAgIGZ1bmN0aW9uIF93aXRoZHJhd0Ftb3VudChhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwcml2YXRlIHsKICAgICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgPj0gX2Ftb3VudCk7CiAgICAgIGlmIChfdG8gPT0gYWRkcmVzcygwKSkgewogICAgICAgIG93bmVyLnRyYW5zZmVyKF9hbW91bnQpOwogICAgICB9IGVsc2UgewogICAgICAgIF90by50cmFuc2ZlcihfYW1vdW50KTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IGludGVybmFsIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0ZWFtCiAgICAqIEBwYXJhbSBfbmFtZSB0aGUgbmFtZSBvZiB0aGUgdGVhbQogICAgKiBAcGFyYW0gX293bmVyIHRoZSBvd25lciBvZiB0aGUgdGVhbQogICAgKiBAcGFyYW0gX3N0YXJ0aW5nUHJpY2UgdGhlIHByaWNlIG9mIHRoZSB0ZWFtIGF0IHRoZSBiZWdpbm5pbmcKICAgICovCiAgICBmdW5jdGlvbiBfY3JlYXRlVGVhbShzdHJpbmcgX25hbWUsIGFkZHJlc3MgX293bmVyLCB1aW50IF9zdGFydGluZ1ByaWNlKSBwcml2YXRlIHsKICAgICAgVGVhbSBtZW1vcnkgY3VyclRlYW0gPSBUZWFtKF9uYW1lKTsKICAgICAgdWludCBuZXdUZWFtSWQgPSBiYWxsZXJUZWFtcy5wdXNoKGN1cnJUZWFtKSAtIDE7CgogICAgICAvLyBtYWtlIHN1cmUgd2UgbmV2ZXIgb3ZlcmZsb3cgYW1vdW50IG9mIHRva2VucyBwb3NzaWJsZSB0byBiZSBjcmVhdGVkCiAgICAgIC8vIDQgYmlsbGlvbiB0b2tlbnMuLi5zaG91bGRuJ3QgaGFwcGVuLgogICAgICByZXF1aXJlKG5ld1RlYW1JZCA9PSB1aW50MjU2KHVpbnQzMihuZXdUZWFtSWQpKSk7CgogICAgICBCYWxsZXJDcmVhdGVkKG5ld1RlYW1JZCwgX25hbWUsIF9vd25lcik7CiAgICAgIHRlYW1JbmRleFRvUHJpY2VbbmV3VGVhbUlkXSA9IF9zdGFydGluZ1ByaWNlOwogICAgICBfdHJhbnNmZXIoYWRkcmVzcygwKSwgX293bmVyLCBuZXdUZWFtSWQpOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IGludGVybmFsIGZ1bmN0aW9uIHRvIHRyYW5zZmVyIG93bmVyc2hpcCBvZiB0ZWFtCiAgICAqIEBwYXJhbSBfZnJvbSBvcmlnaW5hbCBvd25lciBvZiB0b2tlbgogICAgKiBAcGFyYW0gX3RvIHRoZSBuZXcgb3duZXIKICAgICogQHBhcmFtIF90ZWFtSWQgaWQgb2YgdGhlIHRlYW0KICAgICovCiAgICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3RlYW1JZCkgcHJpdmF0ZSB7CiAgICAgIG93bmVyc2hpcFRva2VuQ291bnRbX3RvXSsrOwogICAgICB0ZWFtSW5kZXhUb093bmVyW190ZWFtSWRdID0gX3RvOwoKICAgICAgLy8gQ3JlYXRpb24gb2YgbmV3IHRlYW0gY2F1c2VzIF9mcm9tIHRvIGJlIDAKICAgICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICBvd25lcnNoaXBUb2tlbkNvdW50W19mcm9tXS0tOwogICAgICB9CgogICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdGVhbUlkKTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBpbnRlcm5hbCBmdW5jdGlvbiB0byBjYWxjdWxhdGUgaG93IG11Y2ggdG8gZ2l2ZSB0byBvd25lciBvZiBjb250cmFjdAogICAgKiBAcGFyYW0gX3NlbGxpbmdQcmljZSB0aGUgY3VycmVudCBwcmljZSBvZiB0aGUgdGVhbQogICAgKiBAcmV0dXJuIHBheW1lbnQgYW1vdW50IHRoZSBvd25lciBnZXRzIGFmdGVyIGNvbW1pc3Npb24uCiAgICAqLwogICAgZnVuY3Rpb24gX2NhbGN1bGF0ZVBheW1lbnRUb093bmVyKHVpbnQgX3NlbGxpbmdQcmljZSkgcHJpdmF0ZSBwdXJlIHJldHVybnMgKHVpbnQgcGF5bWVudCkgewogICAgICBpZiAoX3NlbGxpbmdQcmljZSA8IEZJUlNUX1BSSUNFX0xJTUlUKSB7CiAgICAgICAgcGF5bWVudCA9IHVpbnQyNTYoX3NlbGxpbmdQcmljZS5tdWwoMTAwLUZJUlNUX0NPTU1JU1NJT05fTEVWRUwpLmRpdigxMDApKTsKICAgICAgfQogICAgICBlbHNlIGlmIChfc2VsbGluZ1ByaWNlIDwgU0VDT05EX1BSSUNFX0xJTUlUKSB7CiAgICAgICAgcGF5bWVudCA9IHVpbnQyNTYoX3NlbGxpbmdQcmljZS5tdWwoMTAwLVNFQ09ORF9DT01NSVNTSU9OX0xFVkVMKS5kaXYoMTAwKSk7CiAgICAgIH0KICAgICAgZWxzZSBpZiAoX3NlbGxpbmdQcmljZSA8IFRISVJEX1BSSUNFX0xJTUlUKSB7CiAgICAgICAgcGF5bWVudCA9IHVpbnQyNTYoX3NlbGxpbmdQcmljZS5tdWwoMTAwLVRISVJEX0NPTU1JU1NJT05fTEVWRUwpLmRpdigxMDApKTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBwYXltZW50ID0gdWludDI1Nihfc2VsbGluZ1ByaWNlLm11bCgxMDAtRk9VUlRIX0NPTU1JU1NJT05fTEVWRUwpLmRpdigxMDApKTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IGludGVybmFsIGZ1bmN0aW9uIHRvIGNhbGN1bGF0ZSBob3cgbXVjaCB0aGUgbmV3IHByaWNlIGlzCiAgICAqIEBwYXJhbSBfc2VsbGluZ1ByaWNlIHRoZSBjdXJyZW50IHByaWNlIG9mIHRoZSB0ZWFtLgogICAgKiBAcmV0dXJuIG5ld1ByaWNlIHByaWNlIHRoZSB0ZWFtIHdpbGwgYmUgd29ydGggYWZ0ZXIgYmVpbmcgYm91Z2h0LgogICAgKi8KICAgIGZ1bmN0aW9uIF9jYWxjdWxhdGVOZXdQcmljZSh1aW50IF9zZWxsaW5nUHJpY2UpIHByaXZhdGUgcHVyZSByZXR1cm5zICh1aW50IG5ld1ByaWNlKSB7CiAgICAgIGlmIChfc2VsbGluZ1ByaWNlIDwgRklSU1RfUFJJQ0VfTElNSVQpIHsKICAgICAgICBuZXdQcmljZSA9IHVpbnQyNTYoX3NlbGxpbmdQcmljZS5tdWwoRklSU1RfTEVWRUxfSU5DUkVBU0UpLmRpdigxMDApKTsKICAgICAgfQogICAgICBlbHNlIGlmIChfc2VsbGluZ1ByaWNlIDwgU0VDT05EX1BSSUNFX0xJTUlUKSB7CiAgICAgICAgbmV3UHJpY2UgPSB1aW50MjU2KF9zZWxsaW5nUHJpY2UubXVsKFNFQ09ORF9MRVZFTF9JTkNSRUFTRSkuZGl2KDEwMCkpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKF9zZWxsaW5nUHJpY2UgPCBUSElSRF9QUklDRV9MSU1JVCkgewogICAgICAgIG5ld1ByaWNlID0gdWludDI1Nihfc2VsbGluZ1ByaWNlLm11bChUSElSRF9MRVZFTF9JTkNSRUFTRSkuZGl2KDEwMCkpOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIG5ld1ByaWNlID0gdWludDI1Nihfc2VsbGluZ1ByaWNlLm11bChGT1VSVEhfTEVWRUxfSU5DUkVBU0UpLmRpdigxMDApKTsKICAgICAgfQogICAgfQp9'.
	

]
