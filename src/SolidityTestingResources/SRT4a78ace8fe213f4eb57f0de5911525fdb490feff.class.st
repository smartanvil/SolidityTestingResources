Class {
	#name : #SRT4a78ace8fe213f4eb57f0de5911525fdb490feff,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4a78ace8fe213f4eb57f0de5911525fdb490feff >> base64 [
	^ 'LyoqCiAqIE92ZXJmbG93IGF3YXJlIHVpbnQgbWF0aCBmdW5jdGlvbnMuCiAqCiAqIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9NYWtlckRBTy9tYWtlci1vdGMvYmxvYi9tYXN0ZXIvY29udHJhY3RzL3NpbXBsZV9tYXJrZXQuc29sCiAqLwpwcmFnbWEgc29saWRpdHkgXjAuNC44Owpjb250cmFjdCBTYWZlTWF0aCB7CiAgLy9pbnRlcm5hbHMKCiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgaWYgKCFhc3NlcnRpb24pIHRocm93OwogIH0KfQoKLyoqCiAqIEVSQyAyMCB0b2tlbgogKgogKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IFRva2VuIHsKCiAgICAvLy8gQHJldHVybiB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KSB7fQoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkge30KCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9hZGRyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHdlaSB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fQoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cgp9CgovKioKICogRVJDIDIwIHRva2VuCiAqCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBUb2tlbiB7CgogICAgLyoqCiAgICAgKiBSZXZpZXdlZDoKICAgICAqIC0gSW50ZXJnZXIgb3ZlcmZsb3cgPSBPSywgY2hlY2tlZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vRGVmYXVsdCBhc3N1bWVzIHRvdGFsU3VwcGx5IGNhbid0IGJlIG92ZXIgbWF4ICgyXjI1NiAtIDEpLgogICAgICAgIC8vSWYgeW91ciB0b2tlbiBsZWF2ZXMgb3V0IHRvdGFsU3VwcGx5IGFuZCBjYW4gaXNzdWUgbW9yZSB0b2tlbnMgYXMgdGltZSBnb2VzIG9uLCB5b3UgbmVlZCB0byBjaGVjayBpZiBpdCBkb2Vzbid0IHdyYXAuCiAgICAgICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIC8vaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy9zYW1lIGFzIGFib3ZlLiBSZXBsYWNlIHRoaXMgbGluZSB3aXRoIHRoZSBmb2xsb3dpbmcgaWYgeW91IHdhbnQgdG8gcHJvdGVjdCBhZ2FpbnN0IHdyYXBwaW5nIHVpbnRzLgogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIC8vaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7Cgp9CgoKLyoqCiAqIENvbnRpbmdlbmN5IGNyb3dkc2FsZSBjcm93ZHNhbGUgY29udHJhY3QuIE1vZGlmaWVkIGZyb20gRmlyc3RCbG9vZCBjcm93ZHNhbGUgY29udHJhY3QuCiAqCiAqIFNlY3VyaXR5IGNyaXRlcmlhIGV2YWx1YXRlZCBhZ2FpbnN0IGh0dHA6Ly9ldGhlcmV1bS5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvODU1MS9tZXRob2RvbG9naWNhbC1zZWN1cml0eS1yZXZpZXctb2YtYS1zbWFydC1jb250cmFjdAogKgogKgogKi8KY29udHJhY3QgQ29udGluZ2VuY3lUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBTYWZlTWF0aCB7CiAgICAvKgogICAgICAgIE1vZGlmaWVkIHZlcnNpb24gb2YgdGhlIEZpcnN0Qmxvb2QuaW8gdG9rZW4gYW5kIHRva2VuIHNhbGUKICAgICovCiAgICAKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJDb250aW5nZW5jeSBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJDVFkiOwogICAgdWludCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQgcHVibGljIHN0YXJ0QmxvY2sgPSAzMTAwMDAwOyAvL2Nyb3dkc2FsZSBzdGFydCBibG9jawogICAgdWludCBwdWJsaWMgZW5kQmxvY2sgPSAzMjcyODAwOyAvL2Nyb3dkc2FsZSBlbmQgYmxvY2sKCiAgICAvLyBJbml0aWFsIGZvdW5kZXIgYWRkcmVzcwogICAgLy8gQWxsIGRlcG9zaXRlZCBFVEggd2lsbCBiZSBmb3J3YXJkZWQgdG8gdGhpcyBhZGRyZXNzLgogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlciA9IDB4NDQ4NWY0NGFhMWY5OWI0M0JENjQwMDU4NkMxQjJBMDJlYzI2M0VjMDsKCiAgICB1aW50IHB1YmxpYyBldGhlckNhcCA9IDg1MDAwMCAqIDEwKioxODsgLy9tYXggYW1vdW50IHJhaXNlZCBkdXJpbmcgY3Jvd2RzYWxlICg4LjVNIFVTRCB3b3J0aCBvZiBldGhlciB3aWxsIGJlIG1lYXN1cmVkIHdpdGggYSBtb3ZpbmcgYXZlcmFnZSBtYXJrZXQgcHJpY2UgYXQgYmVnaW5uaW5nIG9mIHRoZSBjcm93ZHNhbGUpCiAgICB1aW50IHB1YmxpYyB0cmFuc2ZlckxvY2t1cCA9IDM3MDI4NDsgLy90cmFuc2ZlcnMgYXJlIGxvY2tlZCBmb3IgdGhpcyBtYW55IGJsb2NrcyBhZnRlciBlbmRCbG9jayAoYXNzdW1pbmcgMTQgc2Vjb25kIGJsb2NrcywgdGhpcyBpcyAyIG1vbnRocykKICAgIHVpbnQgcHVibGljIGZvdW5kZXJMb2NrdXAgPSAxMTI2Mjg1OyAvL2ZvdW5kZXIgYWxsb2NhdGlvbiBjYW5ub3QgYmUgY3JlYXRlZCB1bnRpbCB0aGlzIG1hbnkgYmxvY2tzIGFmdGVyIGVuZEJsb2NrIChhc3N1bWluZyAxNCBzZWNvbmQgYmxvY2tzLCB0aGlzIGlzIDYgbW9udGhzKQoKICAgIHVpbnQgcHVibGljIGZvdW5kZXJBbGxvY2F0aW9uID0gMTAgKiAxMCoqMTY7IC8vMTAlIG9mIHRva2VuIHN1cHBseSBhbGxvY2F0ZWQgcG9zdC1jcm93ZHNhbGUgZm9yIHRoZSBmb3VuZGVyIGFsbG9jYXRpb24KICAgIGJvb2wgcHVibGljIGZvdW5kZXJBbGxvY2F0ZWQgPSBmYWxzZTsgLy90aGlzIHdpbGwgY2hhbmdlIHRvIHRydWUgd2hlbiB0aGUgZm91bmRlciBmdW5kIGlzIGFsbG9jYXRlZAogICAgdWludCBwdWJsaWMgcHJlc2FsZVRva2VuU3VwcGx5ID0gMDsgLy90aGlzIHdpbGwga2VlcCB0cmFjayBvZiB0aGUgdG9rZW4gc3VwcGx5IGNyZWF0ZWQgZHVyaW5nIHRoZSBjcm93ZHNhbGUKICAgIHVpbnQgcHVibGljIHByZXNhbGVFdGhlclJhaXNlZCA9IDA7IC8vdGhpcyB3aWxsIGtlZXAgdHJhY2sgb2YgdGhlIEV0aGVyIHJhaXNlZCBkdXJpbmcgdGhlIGNyb3dkc2FsZQogICAgYm9vbCBwdWJsaWMgaGFsdGVkID0gZmFsc2U7IC8vdGhlIGZvdW5kZXIgYWRkcmVzcyBjYW4gc2V0IHRoaXMgdG8gdHJ1ZSB0byBoYWx0IHRoZSBjcm93ZHNhbGUgZHVlIHRvIGVtZXJnZW5jeQogICAgZXZlbnQgQnV5KGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsIHVpbnQgZXRoLCB1aW50IGZidCk7CiAgICBldmVudCBXaXRoZHJhdyhhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLCBhZGRyZXNzIHRvLCB1aW50IGV0aCk7CiAgICBldmVudCBBbGxvY2F0ZUZvdW5kZXJUb2tlbnMoYWRkcmVzcyBpbmRleGVkIHNlbmRlcik7CiAgICBldmVudCBBbGxvY2F0ZUJvdW50eUFuZEVjb3N5c3RlbVRva2VucyhhZGRyZXNzIGluZGV4ZWQgc2VuZGVyKTsKCiAgICAvKioKICAgICAqIFNlY3VyaXR5IHJldmlldwogICAgICoKICAgICAqIC0gSW50ZWdlciBvdmVyZmxvdzogZG9lcyBub3QgYXBwbHksIGJsb2NrbnVtYmVyIGNhbid0IGdyb3cgdGhhdCBoaWdoCiAgICAgKiAtIERpdmlzaW9uIGlzIHRoZSBsYXN0IG9wZXJhdGlvbiBhbmQgY29uc3RhbnQsIHNob3VsZCBub3QgY2F1c2UgaXNzdWVzCiAgICAgKiAtIFByaWNlIGZ1bmN0aW9uIHBsb3R0ZWQgaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9pc3N1ZXMvMgogICAgICovCiAgICBmdW5jdGlvbiBwcmljZSgpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIGlmIChibG9jay5udW1iZXI+PXN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyPHN0YXJ0QmxvY2srMjUwKSByZXR1cm4gMTcwOyAvL2Z1bmN0aW9uKCkgewogICAgICAgIGlmIChibG9jay5udW1iZXI8c3RhcnRCbG9jayB8fCBibG9jay5udW1iZXI+ZW5kQmxvY2spIHJldHVybiAxMDA7IC8vZGVmYXVsdCBwcmljZQogICAgICAgIHJldHVybiAxMDAgKyA0KihlbmRCbG9jayAtIGJsb2NrLm51bWJlcikvKGVuZEJsb2NrIC0gc3RhcnRCbG9jayArIDEpKjY3LzQ7IC8vY3Jvd2RzYWxlIHByaWNlCiAgICB9CgogICAgLy8gcHJpY2UoKSBleHBvc2VkIGZvciB1bml0IHRlc3RzCiAgICBmdW5jdGlvbiB0ZXN0UHJpY2UodWludCBibG9ja051bWJlcikgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgaWYgKGJsb2NrTnVtYmVyPj1zdGFydEJsb2NrICYmIGJsb2NrTnVtYmVyPHN0YXJ0QmxvY2srMjUwKSByZXR1cm4gMTcwOyAvL2hvdXIgb25lCiAgICAgICAgaWYgKGJsb2NrTnVtYmVyPHN0YXJ0QmxvY2sgfHwgYmxvY2tOdW1iZXI+ZW5kQmxvY2spIHJldHVybiAxMDA7IC8vZGVmYXVsdCBwcmljZQogICAgICAgIHJldHVybiAxMDAgKyA0KihlbmRCbG9jayAtIGJsb2NrTnVtYmVyKS8oZW5kQmxvY2sgLSBzdGFydEJsb2NrICsgMSkqNjcvNDsgLy9jcm93ZHNhbGUgcHJpY2UKICAgIH0KCiAgICAvLyBCdXkgZW50cnkgcG9pbnQKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICAgICAgYnV5UmVjaXBpZW50KG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogTWFpbiB0b2tlbiBidXkgZnVuY3Rpb24uCiAgICAgKgogICAgICogU2VjdXJpdHkgcmV2aWV3CiAgICAgKgogICAgICogLSBJbnRlZ2VyIG1hdGg6IG9rIC0gdXNpbmcgU2FmZU1hdGgKICAgICAqCiAgICAgKiAtIGhhbHQgZmxhZyBhZGRlZCAtIG9rCiAgICAgKgogICAgICogQXBwbGljYWJsZSB0ZXN0czoKICAgICAqCiAgICAgKiAtIFRlc3QgaGFsdGluZywgYnV5aW5nLCBhbmQgZmFpbGluZwogICAgICogLSBUZXN0IGJ1eWluZyBvbiBiZWhhbGYgb2YgYSByZWNpcGllbnQKICAgICAqIC0gVGVzdCBidXkKICAgICAqIC0gVGVzdCB1bmhhbHRpbmcsIGJ1eWluZywgYW5kIHN1Y2NlZWRpbmcKICAgICAqIC0gVGVzdCBidXlpbmcgYWZ0ZXIgdGhlIHNhbGUgZW5kcwogICAgICoKICAgICAqLwogICAgZnVuY3Rpb24gYnV5UmVjaXBpZW50KGFkZHJlc3MgcmVjaXBpZW50KSBwYXlhYmxlIHsKICAgICAgICBpZiAoYmxvY2subnVtYmVyPHN0YXJ0QmxvY2sgfHwgYmxvY2subnVtYmVyPmVuZEJsb2NrIHx8IHNhZmVBZGQocHJlc2FsZUV0aGVyUmFpc2VkLG1zZy52YWx1ZSk+ZXRoZXJDYXAgfHwgaGFsdGVkKSB0aHJvdzsKICAgICAgICB1aW50IHRva2VucyA9IHNhZmVNdWwobXNnLnZhbHVlLCBwcmljZSgpKTsKICAgICAgICBiYWxhbmNlc1tyZWNpcGllbnRdID0gc2FmZUFkZChiYWxhbmNlc1tyZWNpcGllbnRdLCB0b2tlbnMpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSwgdG9rZW5zKTsKICAgICAgICBwcmVzYWxlRXRoZXJSYWlzZWQgPSBzYWZlQWRkKHByZXNhbGVFdGhlclJhaXNlZCwgbXNnLnZhbHVlKTsKCiAgICAgICAgLy9pZiAoIWZvdW5kZXIuc2VuZChtc2cudmFsdWUpKSB0aHJvdzsgLy9pbW1lZGlhdGVseSBzZW5kIEV0aGVyIHRvIGZvdW5kZXIgYWRkcmVzcwogICAgICAgIC8vRHVlIHRvIE1ldGFtYXNrIG5vdCBzZW5kaW5nIGVub3VnaCBnYXMgd2l0aCB0aGlzIG1ldGhvZCwgd2Ugc2VuZCBldGhlciBsYXRlciB3aXRoIHRoZSBmdW5jdGlvbiAiZm91bmRlcldpdGhkcmF3IiBiZWxvdwoKICAgICAgICBCdXkocmVjaXBpZW50LCBtc2cudmFsdWUsIHRva2Vucyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGZvdW5kZXJXaXRoZHJhdyh1aW50IGFtb3VudCkgewogICAgICAgIC8vIEZvdW5kZXIgdG8gcmVjZWl2ZSBwcmVzYWxlIGV0aGVyCiAgICAgICAgaWYgKG1zZy5zZW5kZXIhPWZvdW5kZXIpIHRocm93OwogICAgICAgIGlmICghZm91bmRlci5zZW5kKGFtb3VudCkpIHRocm93OwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHVwIGZvdW5kZXIgYWRkcmVzcyB0b2tlbiBiYWxhbmNlLgogICAgICoKICAgICAqIFNlY3VyaXR5IHJldmlldwogICAgICoKICAgICAqIC0gSW50ZWdlciBtYXRoOiBvayAtIG9ubHkgY2FsbGVkIG9uY2Ugd2l0aCBmaXhlZCBwYXJhbWV0ZXJzCiAgICAgKgogICAgICogQXBwbGljYWJsZSB0ZXN0czoKICAgICAqCiAgICAgKiAtIFRlc3QgYm91bnR5IGFuZCBlY29zeXN0ZW0gYWxsb2NhdGlvbgogICAgICogLSBUZXN0IGJvdW50eSBhbmQgZWNvc3lzdGVtIGFsbG9jYXRpb24gdHdpY2UKICAgICAqCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG9jYXRlRm91bmRlclRva2VucygpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciE9Zm91bmRlcikgdGhyb3c7CiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8PSBlbmRCbG9jayArIGZvdW5kZXJMb2NrdXApIHRocm93OwogICAgICAgIGlmIChmb3VuZGVyQWxsb2NhdGVkKSB0aHJvdzsKICAgICAgICAvL2lmICghYm91bnR5QWxsb2NhdGVkIHx8ICFlY29zeXN0ZW1BbGxvY2F0ZWQpIHRocm93OyAvLyBFeHRyYSBib3VudHkgb3IgZWNvc3lzdGVtIGFsbG9jYXRpb24gZm9yIGZvdW5kZXJzIGRpc2FibGVkIGZvciBjb250aW5nZW5jeQogICAgICAgIGJhbGFuY2VzW2ZvdW5kZXJdID0gc2FmZUFkZChiYWxhbmNlc1tmb3VuZGVyXSwgcHJlc2FsZVRva2VuU3VwcGx5ICogZm91bmRlckFsbG9jYXRpb24gLyAoMSBldGhlcikpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSwgcHJlc2FsZVRva2VuU3VwcGx5ICogZm91bmRlckFsbG9jYXRpb24gLyAoMSBldGhlcikpOwogICAgICAgIGZvdW5kZXJBbGxvY2F0ZWQgPSB0cnVlOwogICAgICAgIEFsbG9jYXRlRm91bmRlclRva2Vucyhtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEVtZXJnZW5jeSBTdG9wIGNyb3dkc2FsZS4KICAgICAqCiAgICAgKiAgQXBwbGljYWJsZSB0ZXN0czoKICAgICAqCiAgICAgKiAtIFRlc3QgdW5oYWx0aW5nLCBidXlpbmcsIGFuZCBzdWNjZWVkaW5nCiAgICAgKi8KICAgIGZ1bmN0aW9uIGhhbHQoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIhPWZvdW5kZXIpIHRocm93OwogICAgICAgIGhhbHRlZCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdW5oYWx0KCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyIT1mb3VuZGVyKSB0aHJvdzsKICAgICAgICBoYWx0ZWQgPSBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIENoYW5nZSBmb3VuZGVyIGFkZHJlc3MgKHdoZXJlIGNyb3dkc2FsZSBFVEggaXMgYmVpbmcgZm9yd2FyZGVkKS4KICAgICAqCiAgICAgKiBBcHBsaWNhYmxlIHRlc3RzOgogICAgICoKICAgICAqIC0gVGVzdCBmb3VuZGVyIGNoYW5nZSBieSBoYWNrZXIKICAgICAqIC0gVGVzdCBmb3VuZGVyIGNoYW5nZQogICAgICogLSBUZXN0IGZvdW5kZXIgdG9rZW4gYWxsb2NhdGlvbiB0d2ljZQogICAgICoKICAgICAqLwoKICAgIGZ1bmN0aW9uIGNoYW5nZUZvdW5kZXIoYWRkcmVzcyBuZXdGb3VuZGVyKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIhPWZvdW5kZXIpIHRocm93OwogICAgICAgIGZvdW5kZXIgPSBuZXdGb3VuZGVyOwogICAgfQoKICAgIC8qKgogICAgICogRVJDIDIwIFN0YW5kYXJkIFRva2VuIGludGVyZmFjZSB0cmFuc2ZlciBmdW5jdGlvbgogICAgICoKICAgICAqIFByZXZlbnQgdHJhbnNmZXJzIHVudGlsIGZyZWV6ZSBwZXJpb2QgaXMgb3Zlci4KICAgICAqCiAgICAgKiBBcHBsaWNhYmxlIHRlc3RzOgogICAgICoKICAgICAqIC0gVGVzdCByZXN0cmljdGVkIGVhcmx5IHRyYW5zZmVyCiAgICAgKiAtIFRlc3QgdHJhbnNmZXIgYWZ0ZXIgcmVzdHJpY3RlZCBwZXJpb2QKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmxvY2subnVtYmVyIDw9IGVuZEJsb2NrICsgdHJhbnNmZXJMb2NrdXAgJiYgbXNnLnNlbmRlciE9Zm91bmRlcikgdGhyb3c7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KICAgIC8qKgogICAgICogRVJDIDIwIFN0YW5kYXJkIFRva2VuIGludGVyZmFjZSB0cmFuc2ZlciBmdW5jdGlvbgogICAgICoKICAgICAqIFByZXZlbnQgdHJhbnNmZXJzIHVudGlsIGZyZWV6ZSBwZXJpb2QgaXMgb3Zlci4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8PSBlbmRCbG9jayArIHRyYW5zZmVyTG9ja3VwICYmIG1zZy5zZW5kZXIhPWZvdW5kZXIpIHRocm93OwogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCn0='.
	

]
