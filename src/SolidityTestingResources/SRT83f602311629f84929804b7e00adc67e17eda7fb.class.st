Class {
	#name : #SRT83f602311629f84929804b7e00adc67e17eda7fb,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT83f602311629f84929804b7e00adc67e17eda7fb >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4gMC40LjE1OwoKLyoqCipsaWJyYXJ5IG5hbWUgOiBTYWZlTWF0aAoqcHVycG9zZSA6IGJlIHRoZSBsaWJyYXJ5IGZvciB0aGUgc21hcnQgY29udHJhY3QgZm9yIHRoZSBzd2FwIGJldHdlZW4gdGhlIGdvZHogYW5kIGV0aGVyCipnb2FsIDogdG8gYWNoaWV2ZSB0aGUgc2VjdXJlIGJhc2ljIG1hdGggb3BlcmF0aW9ucwoqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLypmdW5jdGlvbiBuYW1lIDogbXVsKi8KICAvKnB1cnBvc2UgOiBiZSB0aGUgZnVuY2lvbiBmb3Igc2FmZSBtdWx0aXBsaWNhdGUqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAvKmFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7Ki8KICAgIHJldHVybiBjOwogIH0KCiAgLypmdW5jdGlvbiBuYW1lIDogZGl2Ki8KICAvKnB1cnBvc2UgOiBiZSB0aGUgZnVuY2lvbiBmb3Igc2FmZSBkaXZpc2lvbiovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIHJldHVybiBjOwogIH0KCiAgLypmdW5jdGlvbiBuYW1lIDogc3ViKi8KICAvKnB1cnBvc2UgOiBiZSB0aGUgZnVuY2lvbiBmb3Igc2FmZSBzdWJzdHJhY3QqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLyphc3NlcnQoYiA8PSBhKTsqLwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLypmdW5jdGlvbiBuYW1lIDogYWRkKi8KICAvKnB1cnBvc2UgOiBiZSB0aGUgZnVuY2lvbiBmb3Igc2FmZSBzdW0qLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICAvKmFzc2VydChjID49IGEpOyovCiAgICByZXR1cm4gYzsKICB9Cn0KCi8qKgoqY29udHJhY3QgbmFtZSA6IFJlZW50cnlQcm90ZWN0ZWQKKi8KY29udHJhY3QgUmVlbnRyeVByb3RlY3RlZHsKICAgIC8qVGhlIHJlZW50cnkgcHJvdGVjdGlvbiBzdGF0ZSBtdXRleC4qLwogICAgYm9vbCBfX3JlTXV0ZXg7CgogICAgLyoqCiAgICAqVGhpcyBtb2RpZmllciBjYW4gYmUgdXNlZCBvbiBmdW5jdGlvbnMgd2l0aCBleHRlcm5hbCBjYWxscyB0bwogICAgKnByZXZlbnQgcmVlbnRyeSBhdHRhY2tzLgogICAgKkNvbnN0cmFpbnRzOgogICAgKlByb3RlY3RlZCBmdW5jdGlvbnMgbXVzdCBoYXZlIG9ubHkgb25lIHBvaW50IG9mIGV4aXQuCiAgICAqUHJvdGVjdGVkIGZ1bmN0aW9ucyBjYW5ub3QgdXNlIHRoZSBgcmV0dXJuYCBrZXl3b3JkCiAgICAqUHJvdGVjdGVkIGZ1bmN0aW9ucyByZXR1cm4gdmFsdWVzIG11c3QgYmUgdGhyb3VnaCByZXR1cm4gcGFyYW1ldGVycy4KICAgICovCiAgICBtb2RpZmllciBwcmV2ZW50UmVlbnRyeSgpIHsKICAgICAgICByZXF1aXJlKCFfX3JlTXV0ZXgpOwogICAgICAgIF9fcmVNdXRleCA9IHRydWU7CiAgICAgICAgXzsKICAgICAgICBkZWxldGUgX19yZU11dGV4OwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICAvKioKICAgICpUaGlzIG1vZGlmaWVyIGNhbiBiZSBhcHBsaWVkIHRvIHB1YmxpYyBhY2Nlc3Mgc3RhdGUgbXV0YXRpb24gZnVuY3Rpb25zCiAgICAqdG8gcHJvdGVjdCBhZ2FpbnN0IHJlZW50cnkgaWYgYSBgcHJldmVudFJlZW50cnlgIGZ1bmN0aW9uIGhhcyBhbHJlYWR5CiAgICAqc2V0IHRoZSBtdXRleC4gVGhpcyBwcmV2ZW50cyB0aGUgY29udHJhY3QgZnJvbSBiZWluZyByZWVudGVyIHVuZGVyIGEKICAgICpkaWZmZXJlbnQgbWVtb3J5IGNvbnRleHQgd2hpY2ggY2FuIGJyZWFrIHN0YXRlIHZhcmlhYmxlIGludGVncml0eS4KICAgICovCiAgICBtb2RpZmllciBub1JlZW50cnkoKSB7CiAgICAgICAgcmVxdWlyZSghX19yZU11dGV4KTsKICAgICAgICBfOwogICAgfQp9CgovKioKKmNvbnRyYWN0IG5hbWUgOiBHb2R6U3dhcEdvZHpFdGhlckNvbXBsaWFuY2UKKnB1cnBvc2UgOiBiZSB0aGUgc21hcnQgY29udHJhY3QgZm9yIGNvbXBsaWFuY2Ugb2YgdGhlIGdyZWF0ZXIgdGhhbiB1c2Q1MDAwCiovCmNvbnRyYWN0IEdvZHpTd2FwR29kekV0aGVyQ29tcGxpYW5jZXsKICAgIC8vYWRkcmVzcyBvZiB0aGUgb3duZXIgb2YgdGhlIGNvbnRyYWN0CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIAogICAgLypzdHJ1Y3R1cmUgZm9yIHN0b3JlIHRoZSBzYWxlKi8KICAgIHN0cnVjdCBHb2R6QnV5QWNjb3VudHMKICAgIHsKICAgICAgICB1aW50MjU2IGFtb3VudDsvKmFtb3VudCBzZW50Ki8KICAgICAgICBhZGRyZXNzIGFjY291bnQ7LyphY2NvdW50IHRoYXQgc2VudCovCiAgICAgICAgdWludCBzZW5kR29kejsvKmlmIHNlbmQgdGhlIGdvZHogYmFjayovCiAgICB9CgogICAgLyptYXBwaW5nIG9mIHRoZSBhY291bnRzIHRoYXQgc2VuZCBtb3JlIHRoYW4gdXNkNTAwMCovCiAgICBtYXBwaW5nKHVpbnQ9PkdvZHpCdXlBY2NvdW50cykgcHVibGljIGFjY291bnRzSG9sZGluZzsKICAgIAogICAgLyppbmRleCBvZiB0aGUgYWNjb3VudCBpbmZvcm1hdGlvbiovCiAgICB1aW50IHB1YmxpYyBpbmRleEFjY291bnQgPSAwOwoKICAgIC8qYWNjb3VudCBpbmZvcm1hdGlvbiovCiAgICBhZGRyZXNzIHB1YmxpYyBzd2FwQ29udHJhY3Q7LyphZGRyZXNzIG9mIHRoZSBzd2FwIGNvbnRyYWN0Ki8KCgogICAgLypmdW5jdGlvbiBuYW1lIDogR29kelN3YXBHb2R6RXRoZXJDb21wbGlhbmNlKi8KICAgIC8qcHVycG9zZSA6IGJlIHRoZSBjb25zdHJ1Y3RvciBhbmQgdGhlIHNldHRlciBvZiB0aGUgb3duZXIqLwogICAgLypnb2FsIDogdG8gc2V0IHRoZSBvd25lciBvZiB0aGUgY29udHJhY3QqLyAgICAKICAgIGZ1bmN0aW9uIEdvZHpTd2FwR29kekV0aGVyQ29tcGxpYW5jZSgpCiAgICB7CiAgICAgICAgLypzZXRzIHRoZSBvd25lciBvZiB0aGUgY29udHJhY3QgdGhhbiBjb21wbGlhbmNlIHdpdGggdGhlIGdyZWF0ZXIgdGhhbiB1c2Q1MDAwIG1heGltaXVuKi8KICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLypmdW5jdGlvbiBuYW1lIDogc2V0SG9sZGVySW5mb3JtYXRpb24qLwogICAgLypwdXJwb3NlIDogYmUgdGhlIHNldHRlciBvZiB0aGUgc3dhcCBjb250cmFjdCBhbmQgd2FsbGV0IGhvbGRlciovCiAgICAvKmdvYWwgOiB0byBzZXQgZGUgc3dhcCBjb250cmFjdCBhZGRyZXNzIGFuZCB0aGUgd2FsbGV0IGhvbGRlciBhZGRyZXNzKi8gICAgCiAgICBmdW5jdGlvbiBzZXRIb2xkZXJJbmZvcm1hdGlvbihhZGRyZXNzIF9zd2FwQ29udHJhY3QpCiAgICB7ICAgIAogICAgICAgIC8qaWYgdGhlIG93bmVyIGlzIHNldHRpbmcgdGhlIGluZm9ybWF0aW9uIG9mIHRoZSBob2xkZXIgYW5kIHRoZSBzd2FwKi8KICAgICAgICBpZiAobXNnLnNlbmRlcj09b3duZXIpCiAgICAgICAgewogICAgICAgICAgICAvKmFkZHJlc3Mgb2YgdGhlIHN3YXAgY29udHJhY3QqLwogICAgICAgICAgICBzd2FwQ29udHJhY3QgPSBfc3dhcENvbnRyYWN0OwogICAgICAgIH0KICAgIH0KCiAgICAvKmZ1bmN0aW9uIG5hbWUgOiBTYXZlQWNjb3VudEJ1eWluZ0dvZHoqLwogICAgLypwdXJwb3NlIDogYmUgdGhlIHNhZmUgZnVuY3Rpb24gdGhhdCBtYXAgdGhlIGFjY291bnQgdGhhdCBzZW5kIGl0Ki8KICAgIC8qZ29hbCA6IHRvIHN0b3JlIHRoZSBhY2NvdW50IGluZm9ybWF0aW9uKi8KICAgIGZ1bmN0aW9uIFNhdmVBY2NvdW50QnV5aW5nR29keihhZGRyZXNzIGFjY291bnQsIHVpbnQyNTYgYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSAKICAgIHsKICAgICAgICAvKmlmIHRoZSBzZW5kZXIgaXMgdGhlIHN3YXBDb250cmFjdCovCiAgICAgICAgaWYgKG1zZy5zZW5kZXI9PXN3YXBDb250cmFjdCkKICAgICAgICB7CiAgICAgICAgICAgIC8qaW5jcmVtZW50IHRoZSBpbmRleCovCiAgICAgICAgICAgIGluZGV4QWNjb3VudCArPSAxOwogICAgICAgICAgICAvKnN0b3JlIHRoZSBhY2NvdW50IGluZm9ybWFjaW9uKi8KICAgICAgICAgICAgYWNjb3VudHNIb2xkaW5nW2luZGV4QWNjb3VudF0uYWNjb3VudCA9IGFjY291bnQ7CiAgICAgICAgICAgIGFjY291bnRzSG9sZGluZ1tpbmRleEFjY291bnRdLmFtb3VudCA9IGFtb3VudDsKICAgICAgICAgICAgYWNjb3VudHNIb2xkaW5nW2luZGV4QWNjb3VudF0uc2VuZEdvZHogPSAwOwogICAgICAgICAgICAvKnRyYW5zZmVyIHRoZSBldGhlciB0byB0aGUgd2FsbGV0IGhvbGRlciovCiAgICAgICAgICAgIC8qYWNjb3VudCBzYXZlIHdhcyBjb21wbGV0ZWQqLwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvKmZ1bmN0aW9uIG5hbWUgOiBzZXRTZW5kR29keiovCiAgICAvKnB1cnBvc2UgOiBiZSB0aGUgZmxhZyB1cGRhdGUgZm9yIHRoZSBjb21wbGlhbmNlIGFjY291bnQqLwogICAgLypnb2FsIDogdG8gZ2V0IHRoZSBmbGFnIG9uIHRoZSBhY2NvdW50Ki8KICAgIGZ1bmN0aW9uIHNldFNlbmRHb2R6KHVpbnQgaW5kZXgpIHB1YmxpYyAKICAgIHsKICAgICAgICBpZiAob3duZXIgPT0gbXNnLnNlbmRlcikKICAgICAgICB7CiAgICAgICAgICAgIGFjY291bnRzSG9sZGluZ1tpbmRleF0uc2VuZEdvZHogPSAxOwogICAgICAgIH0KICAgIH0KCiAgICAvKmZ1bmN0aW9uIG5hbWUgOiBnZXRBY2NvdW50SW5mb3JtYXRpb24qLwogICAgLypwdXJwb3NlIDogYmUgdGhlIGdldHRlciBvZiB0aGUgaW5mb3JtYXRpb24gb2YgdGhlIGFjY291bnQqLwogICAgLypnb2FsIDogdG8gZ2V0IHRoZSBhbW91bnQgYW5kIHRoZSBhY291bnQgb2YgYSBjb21wbGlhbmNlIGFjY291bnQqLwogICAgZnVuY3Rpb24gZ2V0QWNjb3VudEluZm9ybWF0aW9uKHVpbnQgaW5kZXgpIHB1YmxpYyByZXR1cm5zIChhZGRyZXNzIGFjY291bnQsIHVpbnQyNTYgYW1vdW50LCB1aW50IHNlbmRHb2R6KQogICAgewogICAgICAgIC8qcmV0dXJuIHRoZSBhY2NvdW50IG9mIGEgY29tcGxpYW5jZSovCiAgICAgICAgcmV0dXJuIChhY2NvdW50c0hvbGRpbmdbaW5kZXhdLmFjY291bnQsIGFjY291bnRzSG9sZGluZ1tpbmRleF0uYW1vdW50LCBhY2NvdW50c0hvbGRpbmdbaW5kZXhdLnNlbmRHb2R6KTsKICAgIH0KfQoKLyoqCipjb250cmFjdCBuYW1lIDogR29kelN3YXBHb2R6RXRoZXIKKnB1cnBvc2UgOiBiZSB0aGUgc21hcnQgY29udHJhY3QgZm9yIHRoZSBzd2FwIGJldHdlZW4gdGhlIGdvZHogYW5kIGV0aGVyCipnb2FsIDogdG8gYWNoaWV2ZSB0aGUgc3dhcCB0cmFuc2ZlcnMKKi8KY29udHJhY3QgR29kelN3YXBHb2R6RXRoZXIgIGlzIFJlZW50cnlQcm90ZWN0ZWR7CiAgICBhZGRyZXNzIHB1YmxpYyBzZWxsZXI7LyphZGRyZXNzIG9mIHRoZSBvd25lciBvZiB0aGUgY29udHJhY3QgY3JlYXRpb24qLwogICAgYWRkcmVzcyBwdWJsaWMgdG9rZW5Db250cmFjdDsvKmFkZHJlc3Mgb2YgdGhlIGVyYzIwIHRva2VuIHNtYXJ0IGNvbnRyYWN0IGZvciB0aGUgc3dhcCovCiAgICBhZGRyZXNzIHB1YmxpYyBjb21wbGlhbmNlQ29udHJhY3Q7Lypjb21wbGlhbmNlIGNvbnRyYWN0Ki8KICAgIGFkZHJlc3MgcHVibGljIGNvbXBsaWFuY2VXYWxsZXQ7Lypjb21wbGlhbmNlIHdhbGxldCBhZGRyZXNzKi8KICAgIHVpbnQyNTYgcHVibGljIHNlbGxQcmljZTsvKnZhbHVlIHByaWNlIG9mIHRoZSBzd2FwKi8KICAgIHVpbnQyNTYgcHVibGljIHNlbGxRdWFudGl0eTsvKnF1YW50aXR5IHZhbHVlIG9mIHRoZSBzd2FwKi8KCiAgICAvKmZ1bmN0aW9uIG5hbWUgOiBHb2R6U3dhcEdvZHpFdGhlciovCiAgICAvKnB1cnBvc2UgOiBiZSB0aGUgY29uc3RydWN0b3Igb2YgdGhlIHN3YXAgc21hcnQgY29udHJhY3QqLwogICAgLypnb2FsIDogcmVnaXN0ZXIgdGhlIGJhc2ljIGluZm9ybWF0aW9uIG9mIHRoZSBzd2FwIHNtYXJ0IGNvbnRyYWN0Ki8KICAgIGZ1bmN0aW9uIEdvZHpTd2FwR29kekV0aGVyKAogICAgYWRkcmVzcyB0b2tlbiwKICAgIGFkZHJlc3MgY29tcGxpYW5jZUMsCiAgICBhZGRyZXNzIGNvbXBsaWFuY2VXCiAgICApewogICAgICAgIHRva2VuQ29udHJhY3QgPSB0b2tlbjsKICAgICAgICAvKm93bmVyIG9mIHRoZSBxdWFudGl0eSBvZiBzdXBwbHkgb2YgdGhlIGVyYzIwIHRva2VuKi8KICAgICAgICBzZWxsZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIC8qc3dhcCBwcmljZSBvZiB0aGUgdG9rZW4gc3VwcGx5Ki8KICAgICAgICBzZWxsUHJpY2UgPSAwLjAwNjI1ICogMSBldGhlcjsKICAgICAgICAvKnRvdGFsIHF1YW50aXR5IHRvIHN3YXAqLwogICAgICAgIHNlbGxRdWFudGl0eSA9IFNhZmVNYXRoLm11bCgyMTAwMDAwMDAsIDEgZXRoZXIpOwogICAgICAgIC8qY29tcGxpYW5jZSBjb250cmFjdCBzdG9yZSBhY2NvdW50cyovCiAgICAgICAgY29tcGxpYW5jZUNvbnRyYWN0ID0gY29tcGxpYW5jZUM7CiAgICAgICAgLypjb21wbGlhbmNlIHdhbGxldCBob2xkZXIqLwogICAgICAgIGNvbXBsaWFuY2VXYWxsZXQgPSBjb21wbGlhbmNlVzsKICAgIH0KCiAgICAvKmZ1bmN0aW9uIG5hbWUgOiAoKSBwYXlhYmxlKi8KICAgIC8qcHVycG9zZSA6IGJlIHRoZSBzd2FwIGV4ZWN1dG9yKi8KICAgIC8qZ29hbCA6IHRvIHRyYW5zZmVyIHRoZSBnb2R6IHRvIHRoZSBpbnZlc3RvciBhbmQgdGhlIGV0aGVyIHRvIHRoZSBvd25lciBvZiB0aGUgZ29keiovCiAgICBmdW5jdGlvbigpIHBheWFibGUgcHJldmVudFJlZW50cnkKICAgIHsKICAgICAgICAvKmFkZHJlc3Mgb2YgdGhlIGJ1eWVyKi8KICAgICAgICBhZGRyZXNzIGJ1eWVyID0gbXNnLnNlbmRlcjsKCiAgICAgICAgLyp2YWx1ZSBwYWlkIGFuZCByZWNlaXZlIG9uIHRoZSBzd2FwIGNhbGwqLwogICAgICAgIHVpbnQyNTYgdmFsdWVQYWlkID0gbXNnLnZhbHVlOwoKICAgICAgICAvKnNldCB0aGUgcXVhbnRpdHkgb2YgZ29keiBvbiBiZWhhbGYgb2YgdGhlIGV0aGVyIHRoYXQgaXMgc2VuZCB0byB0aGlzIGZ1bmN0aW9uKi8KICAJCSAgdWludDI1NiBidXlRdWFudGl0eSA9IFNhZmVNYXRoLm11bCgoU2FmZU1hdGguZGl2KHZhbHVlUGFpZCwgc2VsbFByaWNlKSksIDEgZXRoZXIpOwoKICAgICAgICAvKmdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIG93bmVyIG9mIHRoZSBnb2R6Ki8KICAgICAgICB1aW50MjU2IGJhbGFuY2VTZWxsZXIgPSBUb2tlbih0b2tlbkNvbnRyYWN0KS5iYWxhbmNlT2Yoc2VsbGVyKTsKCiAgICAgICAgLypnZXQgdGhlIGFsbG93YW5jZSBvZiB0aGUgb3duZXIgb2YgdGhlIGdvZHoqLwogIAkJdWludDI1NiBiYWxhbmNlQWxsb3dlZCA9IFRva2VuKHRva2VuQ29udHJhY3QpLmFsbG93YW5jZShzZWxsZXIsdGhpcyk7CgogICAgICAgIGlmIChzZWxsZXIhPWJ1eWVyKSAvKmlmIHRoZSBzZWxsZXIgb2YgZ29keiBvbiBzd2FwIGlzIGRpZmZlcmVudCB0aGFuIHRoZSBpbnZlc3RvciBidXlpbmcqLwogICAgICAgIHsKICAgICAgICAgICAgLyppZiB0aGUgYmFsYW5jZSBhbmQgdGhlIGFsbG93YW5jZSBtYXRjaCBhIHZhbGlkIHF1YW50aXR5IHN3YXAqLwogICAgICAJCWlmICgoYmFsYW5jZUFsbG93ZWQgPj0gYnV5UXVhbnRpdHkpICYmIChiYWxhbmNlU2VsbGVyID49IGJ1eVF1YW50aXR5KSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLyppZiB0aGUgbXNnLnZhbHVlKGV0aGVyIHNlbnQpIGlzIGdyZWF0ZXIgdGhhbiBjb21wbGlhbmNlLCBzdG9yZSBpdCBhbmQgc2VudCB0byB0aGUgd2FsbGV0IGhvbGRlciovCiAgICAgICAgICAgICAgICBpZiAodmFsdWVQYWlkPigyMCAqIDEgZXRoZXIpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIC8qdHJhbnNmZXIgdGhlIHZhbHVlKGV0aGVyKSB0byB0aGUgY29tcGxpYW5jZSBob2xkZXIgd2FsbGV0Ki8KICAgICAgICAgICAgICAgICAgICBjb21wbGlhbmNlV2FsbGV0LnRyYW5zZmVyKHZhbHVlUGFpZCk7CiAgICAgICAgICAgICAgICAgICAgLypzYXZlIHRoZSBhY2NvdW50IGluZm9ybWF0aW9uKi8KICAgICAgICAgICAgICAgICAgICByZXF1aXJlKEdvZHpTd2FwR29kekV0aGVyQ29tcGxpYW5jZShjb21wbGlhbmNlQ29udHJhY3QpLlNhdmVBY2NvdW50QnV5aW5nR29keihidXllciwgdmFsdWVQYWlkKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgLyp0cmFuc2ZlciB0aGUgZXRoZXIgaW5zaWRlIHRvIHRoZSBzZWxsZXIgb2YgdGhlIGdvZHoqLwogICAgICAgICAgICAgICAgICAgIHNlbGxlci50cmFuc2Zlcih2YWx1ZVBhaWQpOwogICAgICAgICAgICAgICAgICAgIC8qY2FsbCB0aGUgdHJhbnNmZXJmcm9tIGZ1bmN0aW9uIG9mIHRoZSBlcmMyMCB0b2tlbiBzbWFydCBjb250cmFjdCovCiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZShUb2tlbih0b2tlbkNvbnRyYWN0KS50cmFuc2ZlckZyb20oc2VsbGVyLCBidXllciwgYnV5UXVhbnRpdHkpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlLyppZiBub3QgYSB2YWxpZCBtYXRjaCBiZXR3ZWVuIGFsbG93YW5jZSBhbmQgYmFsYW5jZSBvZiB0aGUgb3duZXIgb2YgZ29keiwgcmV0dXJuIHRoZSBldGhlciovCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIC8qc2VuZCBiYWNrIHRoZSBldGhlciByZWNlaXZlZCovCiAgICAgICAgICAgICAgICBidXllci50cmFuc2Zlcih2YWx1ZVBhaWQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qZnVuY3Rpb24gbmFtZSA6IHNhZmVXaXRoZHJhd2FsKi8KICAgIC8qcHVycG9zZSA6IGJlIHRoZSBzYWZlIHdpdGhyb3cgZnVuY3Rpb24gaW4gY2FzZSBvZiB0aGUgY29udHJhY3Qga2VlcCBldGhlciBpbnNpZGUqLwogICAgLypnb2FsIDogdG8gdHJhbnNmZXIgdGhlIGV0aGVyIHRvIHRoZSBvd25lciBvZiB0aGUgc3dhcCBjb250cmFjdCovCiAgICBmdW5jdGlvbiBzYWZlV2l0aGRyYXdhbCgpCiAgICB7CiAgICAgICAgLypyZXF1aXJlcyB0aGF0IHRoZSBjb250cmFjdCBjYWxsIGlzIHRoZSBvd25lciBvZiB0aGUgc3dhcCBjb250cmFjdCovCiAgICAgICAgLypyZXF1aXJlKHNlbGxlciA9PSBtc2cuc2VuZGVyKTsqLwogICAgICAgIC8qaWYgdGhlIHNlbGxlciBvZiB0aGUgZ29keiBpcyB0aGUgY2FsbCBjb250cmFjdCBhZGRyZXNzKi8KICAgICAgICBpZiAoc2VsbGVyID09IG1zZy5zZW5kZXIpCiAgICAgICAgewogICAgICAgICAgICAvKnRyYW5zZmVyIHRoZSBldGhlciBpbnNpZGUgdG8gdGhlIHNlbGxlciBvZiB0aGUgZ29keiovCiAgICAgICAgICAgIHNlbGxlci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgIH0KICAgIH0KfQoKLyoqCipjb250cmFjdCBuYW1lIDogdG9rZW5SZWNpcGllbnQKKi8KY29udHJhY3QgdG9rZW5SZWNpcGllbnQgeyBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKTsgfQoKLyoqCipjb250cmFjdCBuYW1lIDogVG9rZW4KKi8KY29udHJhY3QgVG9rZW4gewogICAgLyp1c2luZyB0aGUgc2VjdXJlIG1hdGggbGlicmFyeSBmb3IgYmFzaWMgbWF0aCBvcGVyYXRpb25zKi8KICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIC8qIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovCiAgICBzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gJ0RTQ1MuR09EWi5UT0tFTic7CiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8qIFRoaXMgY3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBiYWxhbmNlcyAqLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIC8qIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cyAqLwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CgogICAgLyogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0ICovCiAgICBmdW5jdGlvbiBUb2tlbigKICAgICAgICB1aW50MjU2IGluaXRpYWxTdXBwbHksCiAgICAgICAgc3RyaW5nIHRva2VuTmFtZSwKICAgICAgICB1aW50OCBkZWNpbWFsVW5pdHMsCiAgICAgICAgc3RyaW5nIHRva2VuU3ltYm9sCiAgICAgICAgKSB7CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgICAgICAvKiBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucyovCiAgICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBVcGRhdGUgdG90YWwgc3VwcGx5Ki8KICAgICAgICBuYW1lID0gdG9rZW5OYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNldCB0aGUgbmFtZSBmb3IgZGlzcGxheSBwdXJwb3NlcyovCiAgICAgICAgc3ltYm9sID0gdG9rZW5TeW1ib2w7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlcyovCiAgICAgICAgZGVjaW1hbHMgPSBkZWNpbWFsVW5pdHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBbW91bnQgb2YgZGVjaW1hbHMgZm9yIGRpc3BsYXkgcHVycG9zZXMqLwogICAgfQoKICAgIC8qIFNlbmQgY29pbnMgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgewogICAgICAgIGlmIChfdG8gPT0gMHgwKSByZXZlcnQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUHJldmVudCB0cmFuc2ZlciB0byAweDAgYWRkcmVzcy4gVXNlIGJ1cm4oKSBpbnN0ZWFkKi8KICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSByZXZlcnQoKTsgICAgICAgICAgIC8qIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaCovCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHJldmVydCgpOyAvKiBDaGVjayBmb3Igb3ZlcmZsb3dzKi8KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgLyogU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyKi8KICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IGJhbGFuY2VPZltfdG9dLmFkZChfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudCovCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RpZnkgYW55b25lIGxpc3RlbmluZyB0aGF0IHRoaXMgdHJhbnNmZXIgdG9vayBwbGFjZSovCiAgICB9CgogICAgLyogQWxsb3cgYW5vdGhlciBjb250cmFjdCB0byBzcGVuZCBzb21lIHRva2VucyBpbiB5b3VyIGJlaGFsZiAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qIEFwcHJvdmUgYW5kIHRoZW4gY29tbXVuaWNhdGUgdGhlIGFwcHJvdmVkIGNvbnRyYWN0IGluIGEgc2luZ2xlIHR4ICovCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICB0b2tlblJlY2lwaWVudCBzcGVuZGVyID0gdG9rZW5SZWNpcGllbnQoX3NwZW5kZXIpOwogICAgICAgIGlmIChhcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpKSB7CiAgICAgICAgICAgIHNwZW5kZXIucmVjZWl2ZUFwcHJvdmFsKG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICAvKiBBIGNvbnRyYWN0IGF0dGVtcHRzIHRvIGdldCB0aGUgY29pbnMgYnV0IHRyYW5zZmVyIGZyb20gdGhlIG9yaWdpbiovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb21PcmlnaW4oYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWRkcmVzcyBvcmlnaW4gPSB0eC5vcmlnaW47CiAgICAgICAgaWYgKG9yaWdpbiA9PSAweDApIHJldmVydCgpOwogICAgICAgIGlmIChfdG8gPT0gMHgwKSByZXZlcnQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFByZXZlbnQgdHJhbnNmZXIgdG8gMHgwIGFkZHJlc3MuKi8KICAgICAgICBpZiAoYmFsYW5jZU9mW29yaWdpbl0gPCBfdmFsdWUpIHJldmVydCgpOyAgICAgICAgICAgICAgICAvKiBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gqLwogICAgICAgIGlmIChiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA8IGJhbGFuY2VPZltfdG9dKSByZXZlcnQoKTsgIC8qIENoZWNrIGZvciBvdmVyZmxvd3MqLwogICAgICAgIGJhbGFuY2VPZltvcmlnaW5dID0gYmFsYW5jZU9mW29yaWdpbl0uc3ViKF92YWx1ZSk7ICAgICAgIC8qIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlciovCiAgICAgICAgYmFsYW5jZU9mW190b10gPSBiYWxhbmNlT2ZbX3RvXS5hZGQoX3ZhbHVlKTsgICAgICAgICAgICAgLyogQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQqLwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qIEEgY29udHJhY3QgYXR0ZW1wdHMgdG8gZ2V0IHRoZSBjb2lucyAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKF90byA9PSAweDApIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUHJldmVudCB0cmFuc2ZlciB0byAweDAgYWRkcmVzcy4qLwogICAgICAgIGlmIChiYWxhbmNlT2ZbX2Zyb21dIDwgX3ZhbHVlKSByZXZlcnQoKTsgICAgICAgICAgICAgICAgIC8qIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaCovCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHJldmVydCgpOyAgLyogQ2hlY2sgZm9yIG92ZXJmbG93cyovCiAgICAgICAgaWYgKF92YWx1ZSA+IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pIHJldmVydCgpOyAgICAgLyogQ2hlY2sgYWxsb3dhbmNlKi8KICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dID0gYmFsYW5jZU9mW19mcm9tXS5zdWIoX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIqLwogICAgICAgIGJhbGFuY2VPZltfdG9dID0gYmFsYW5jZU9mW190b10uYWRkKF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudCovCiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCn0='.
	

]
