Class {
	#name : #SRT07222fc4cdacedfbcfc03cbed6e72fb329e8d0b6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT07222fc4cdacedfbcfc03cbed6e72fb329e8d0b6 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CgogIGFkZHJlc3MgcHVibGljIGNvT3duZXI7CgogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgY29Pd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBtb2RpZmllciBvbmx5Q29Pd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb093bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckNvT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWMgb25seUNvT3duZXIgewogICAgcmVxdWlyZShfbmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CgogICAgY29Pd25lciA9IF9uZXdPd25lcjsKCiAgICBDb093bmVyc2hpcFRyYW5zZmVycmVkKGNvT3duZXIsIF9uZXdPd25lcik7CiAgfQogIAogIGZ1bmN0aW9uIENvV2l0aGRyYXcoKSBwdWJsaWMgb25seUNvT3duZXIgewogICAgICBjb093bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfSAgCiAgCiAgZXZlbnQgQ29Pd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKfQoKLy8vIEB0aXRsZSBJbnRlcmZhY2UgZm9yIGNvbnRyYWN0cyBjb25mb3JtaW5nIHRvIEVSQy03MjE6IE5vbi1GdW5naWJsZSBUb2tlbnMKLy8vIEBhdXRob3IgRGlldGVyIFNoaXJsZXkgPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI5MWY1ZjRlNWY0ZDFmMGU5ZjhmZWZjZWJmNGZmYmZmMmZlIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPj4gKGh0dHBzOi8vZ2l0aHViLmNvbS9kZXRlKQpjb250cmFjdCBFUkM3MjEgewogIC8vIFJlcXVpcmVkIG1ldGhvZHMKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgYWRkcik7CiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHRva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIGFwcHJvdmVkLCB1aW50MjU2IHRva2VuSWQpOwoKICAvLyBPcHRpb25hbAogIC8vIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgbmFtZSk7CiAgLy8gZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIHN5bWJvbCk7CiAgLy8gZnVuY3Rpb24gdG9rZW5PZk93bmVyQnlJbmRleChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfaW5kZXgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiB0b2tlbklkKTsKICAvLyBmdW5jdGlvbiB0b2tlbk1ldGFkYXRhKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBpbmZvVXJsKTsKfQoKY29udHJhY3QgQ3J5cHRvQ2Fyc1JlbnQgaXMgRVJDNzIxLCBPd25hYmxlIHsKCiAgZXZlbnQgQ2FyQ3JlYXRlZCh1aW50MjU2IHRva2VuSWQsIHN0cmluZyBuYW1lLCBhZGRyZXNzIG93bmVyKTsKICBldmVudCBUb2tlblNvbGQodWludDI1NiB0b2tlbklkLCB1aW50MjU2IG9sZFByaWNlLCB1aW50MjU2IG5ld1ByaWNlLCBhZGRyZXNzIHByZXZPd25lciwgYWRkcmVzcyB3aW5uZXIsIHN0cmluZyBuYW1lKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CgogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgTkFNRSA9ICJDcnlwdG9DYXJzIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IFNZTUJPTCA9ICJDYXJzVG9rZW4iOwoKICB1aW50MjU2IHByaXZhdGUgc3RhcnRpbmdTZWxsUHJpY2UgPSAwLjAxMiBldGhlcjsKCiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgY2FySWRUb093bmVyOwoKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBjYXJJZFRvUmVudGVyOwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHVibGljIGNhcklkUmVudFN0YXJ0VGltZTsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIG93bmVyc2hpcFRva2VuQ291bnQ7CgogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGNhcklkVG9BcHByb3ZlZDsKCiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIGNhcklkVG9QcmljZTsKICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgY2FySWRUb1Byb2ZpdDsKCiAgLyoqKiBEQVRBVFlQRVMgKioqLwogIHN0cnVjdCBDYXIgewogICAgc3RyaW5nIG5hbWU7CiAgfQoKICBDYXJbXSBwcml2YXRlIGNhcnM7CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7IC8vRVJDNzIxCiAgICAvLyBDYWxsZXIgbXVzdCBvd24gdG9rZW4uCiAgICByZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICBjYXJJZFRvQXBwcm92ZWRbX3Rva2VuSWRdID0gX3RvOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgeyAvL0VSQzcyMQogICAgcmV0dXJuIG93bmVyc2hpcFRva2VuQ291bnRbX293bmVyXTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZUNhclRva2VuKHN0cmluZyBfbmFtZSkgcHVibGljIG9ubHlDb093bmVyIHsKICAgIF9jcmVhdGVDYXIoX25hbWUsIGFkZHJlc3ModGhpcyksIHN0YXJ0aW5nU2VsbFByaWNlKTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZUNhcnNUb2tlbnMoKSBwdWJsaWMgb25seUNvT3duZXIgewoKCWZvciAodWludDggY2FyPTA7IGNhcjwyMTsgY2FyKyspIHsKCSAgIF9jcmVhdGVDYXIoIkNyeXB0byBDYXIiLCBhZGRyZXNzKHRoaXMpLCBzdGFydGluZ1NlbGxQcmljZSk7CgkgfQoKICB9CiAgCiAgZnVuY3Rpb24gZ2V0Q2FyKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBjYXJOYW1lLCB1aW50MjU2IHNlbGxpbmdQcmljZSwgYWRkcmVzcyBvd25lcikgewogICAgQ2FyIHN0b3JhZ2UgY2FyID0gY2Fyc1tfdG9rZW5JZF07CiAgICBjYXJOYW1lID0gY2FyLm5hbWU7CiAgICBzZWxsaW5nUHJpY2UgPSBjYXJJZFRvUHJpY2VbX3Rva2VuSWRdOwogICAgb3duZXIgPSBjYXJJZFRvT3duZXJbX3Rva2VuSWRdOwogIH0KCiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgeyAvL0VSQzcyMQogICAgcmV0dXJuIE5BTUU7CiAgfQoKICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpIHsgLy9FUkM3MjEKICAgIG93bmVyID0gY2FySWRUb093bmVyW190b2tlbklkXTsKICAgIHJlcXVpcmUob3duZXIgIT0gYWRkcmVzcygwKSk7CiAgfQoKICAvLyBBbGxvd3Mgc29tZW9uZSB0byBzZW5kIGV0aGVyIGFuZCBvYnRhaW4gdGhlIHRva2VuCiAgZnVuY3Rpb24gcHVyY2hhc2UodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHBheWFibGUgewogICAgYWRkcmVzcyBvbGRPd25lciA9IGNhcklkVG9Pd25lcltfdG9rZW5JZF07CiAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKCXVpbnQyNTYgcmVudGVyX3BheW1lbnQ7Cgl1aW50MjU2IHBheW1lbnQ7CgkKCWlmIChub3cgLSBjYXJJZFJlbnRTdGFydFRpbWVbX3Rva2VuSWRdID4gNzIwMCkgLy8gMiBob3VycyBvZiByZW50IGZpbmlzaGVkCgkJY2FySWRUb1JlbnRlcltfdG9rZW5JZF0gPSBhZGRyZXNzKDApOwoJCQoJYWRkcmVzcyByZW50ZXIgPSBjYXJJZFRvUmVudGVyW190b2tlbklkXTsKCiAgICB1aW50MjU2IHNlbGxpbmdQcmljZSA9IGNhcklkVG9QcmljZVtfdG9rZW5JZF07Cgl1aW50MjU2IHByb2ZpdCA9IGNhcklkVG9Qcm9maXRbX3Rva2VuSWRdOwoKICAgIHJlcXVpcmUob2xkT3duZXIgIT0gbmV3T3duZXIpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwobmV3T3duZXIpKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHNlbGxpbmdQcmljZSk7CgkKCQoKICAgIGlmIChyZW50ZXIgIT0gYWRkcmVzcygwKSkgewoJCXJlbnRlcl9wYXltZW50ID0gdWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHByb2ZpdCwgNDUpLCAxMDApKTsgLy80NSUgZnJvbSBwcm9maXQgdG8gY2FyJ3MgcmVudGVyCgkJcGF5bWVudCA9IHVpbnQyNTYoU2FmZU1hdGguc3ViKFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCA5NyksIDEwMCksIHJlbnRlcl9wYXltZW50KSk7IC8vJzk3JSAtIHJlbnRlcl9wYXltZW50JyB0byBwcmV2aW91cyBvd25lcgoJfSBlbHNlIHsKCQlyZW50ZXJfcGF5bWVudCA9IDA7CgkJcGF5bWVudCA9IHVpbnQyNTYoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsaW5nUHJpY2UsIDk0KSwgMTAwKSk7IC8vOTQlIHRvIHByZXZpb3VzIG93bmVyCgl9CgoJCiAgICAvLyBOZXh0IHByaWNlIHdpbGwgaW4gMiB0aW1lcyBtb3JlLgoJaWYgKHNlbGxpbmdQcmljZSA8IDUwMCBmaW5uZXkpIHsKCQljYXJJZFRvUHJpY2VbX3Rva2VuSWRdID0gU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgMik7IC8vcmljZSBieSAxMDAlCgl9CgllbHNlIHsKCQljYXJJZFRvUHJpY2VbX3Rva2VuSWRdID0gdWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgMTUpLCAxMCkpOyAvL3JpY2UgYnkgNTAlCgl9CgkKICAgIC8vcGxhbm5pZyBwcm9maXQgZnJvbSBuZXh0IHNlbGxpbmcKICAJY2FySWRUb1Byb2ZpdFtfdG9rZW5JZF0gPSB1aW50MjU2KFNhZmVNYXRoLnN1YihjYXJJZFRvUHJpY2VbX3Rva2VuSWRdLCBzZWxsaW5nUHJpY2UpKTsKICAgIGNhcklkVG9SZW50ZXJbX3Rva2VuSWRdID0gYWRkcmVzcygwKTsKCWNhcklkUmVudFN0YXJ0VGltZVtfdG9rZW5JZF0gPSAgMDsKCQogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwoKICAgIC8vIFBheSBwcmV2aW91cyB0b2tlbk93bmVyIGlmIG93bmVyIGlzIG5vdCBjb250cmFjdAogICAgaWYgKG9sZE93bmVyICE9IGFkZHJlc3ModGhpcykpIHsKICAgICAgb2xkT3duZXIudHJhbnNmZXIocGF5bWVudCk7IC8vCiAgICB9CgogICAgLy8gUGF5IHRvIHRva2VuIHJlbnRlciAKICAgIGlmIChyZW50ZXIgIT0gYWRkcmVzcygwKSkgewogICAgICByZW50ZXIudHJhbnNmZXIocmVudGVyX3BheW1lbnQpOyAvLwogICAgfQoKICAgIFRva2VuU29sZChfdG9rZW5JZCwgc2VsbGluZ1ByaWNlLCBjYXJJZFRvUHJpY2VbX3Rva2VuSWRdLCBvbGRPd25lciwgbmV3T3duZXIsIGNhcnNbX3Rva2VuSWRdLm5hbWUpOwoJCiAgICBpZiAobXNnLnZhbHVlID4gc2VsbGluZ1ByaWNlKSB7IC8vaWYgZXhjZXNzIHBheQoJICAgIHVpbnQyNTYgcHVyY2hhc2VFeGNlc3MgPSBTYWZlTWF0aC5zdWIobXNnLnZhbHVlLCBzZWxsaW5nUHJpY2UpOwoJCW1zZy5zZW5kZXIudHJhbnNmZXIocHVyY2hhc2VFeGNlc3MpOwoJfQogIH0KCiAgZnVuY3Rpb24gcmVudCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgcGF5YWJsZSB7CglyZXF1aXJlKG5vdyAtIGNhcklkUmVudFN0YXJ0VGltZVtfdG9rZW5JZF0gPiA3MjAwKTsgLy8gMiBob3VycyBvZiBwcmV2aW91cyByZW50IGZpbmlzaGVkCglyZXF1aXJlKG1zZy5zZW5kZXIgIT0gY2FySWRUb093bmVyW190b2tlbklkXSk7CgkKCXVpbnQyNTYgcHJvZml0ID0gY2FySWRUb1Byb2ZpdFtfdG9rZW5JZF07IC8vcGxhbm5pZyBwcm9maXQgZnJvbSBzZWxsaW5nIAoJdWludDI1NiByZW50UHJpY2UgPSB1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwocHJvZml0LCAxMCksIDEwMCkpOyAvLzEwJSBmcm9tIHByb2ZpdCBpcyBhIHJlbnQgcHJpY2UKICAgICAKICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKG1zZy5zZW5kZXIpKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHJlbnRQcmljZSk7CSAKCQoJY2FySWRSZW50U3RhcnRUaW1lW190b2tlbklkXSA9IG5vdzsKCWNhcklkVG9SZW50ZXJbX3Rva2VuSWRdID0gbXNnLnNlbmRlcjsKCQoJYWRkcmVzcyBjYXJPd25lciA9IGNhcklkVG9Pd25lcltfdG9rZW5JZF07CglyZXF1aXJlKGNhck93bmVyICE9IGFkZHJlc3ModGhpcykpOwoJCgkKICAgIGlmIChjYXJPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgIGNhck93bmVyLnRyYW5zZmVyKHJlbnRQcmljZSk7IC8vCiAgICB9CgkKICAgIGlmIChtc2cudmFsdWUgPiByZW50UHJpY2UpIHsgLy9pZiBleGNlc3MgcGF5CgkgICAgdWludDI1NiBwdXJjaGFzZUV4Y2VzcyA9IFNhZmVNYXRoLnN1Yihtc2cudmFsdWUsIHJlbnRQcmljZSk7CgkJbXNnLnNlbmRlci50cmFuc2ZlcihwdXJjaGFzZUV4Y2Vzcyk7Cgl9CQogIH0KICAKICAKICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsgLy9FUkM3MjEKICAgIHJldHVybiBTWU1CT0w7CiAgfQoKCiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgeyAvL0VSQzcyMQogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICBhZGRyZXNzIG9sZE93bmVyID0gY2FySWRUb093bmVyW190b2tlbklkXTsKCiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChuZXdPd25lcikpOwogICAgcmVxdWlyZShfYXBwcm92ZWQobmV3T3duZXIsIF90b2tlbklkKSk7CgogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwogIH0KICAKICBmdW5jdGlvbiBhbGxDYXJzSW5mbygpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3NbXSBvd25lcnMsIGFkZHJlc3NbXSByZW50ZXJzLCB1aW50MjU2W10gcHJpY2VzLCB1aW50MjU2W10gcHJvZml0cykgeyAvL2ZvciB3ZWIgc2l0ZSB2aWV3CgkKCXVpbnQyNTYgdG90YWxSZXN1bHRDYXJzID0gdG90YWxTdXBwbHkoKTsKCQogICAgaWYgKHRvdGFsUmVzdWx0Q2FycyA9PSAwKSB7CiAgICAgICAgLy8gUmV0dXJuIGFuIGVtcHR5IGFycmF5CiAgICAgIHJldHVybiAobmV3IGFkZHJlc3NbXSgwKSxuZXcgYWRkcmVzc1tdKDApLG5ldyB1aW50MjU2W10oMCksbmV3IHVpbnQyNTZbXSgwKSk7CiAgICB9CgkKCWFkZHJlc3NbXSBtZW1vcnkgb3duZXJzX3JlcyA9IG5ldyBhZGRyZXNzW10odG90YWxSZXN1bHRDYXJzKTsKCWFkZHJlc3NbXSBtZW1vcnkgcmVudGVyc19yZXMgPSBuZXcgYWRkcmVzc1tdKHRvdGFsUmVzdWx0Q2Fycyk7Cgl1aW50MjU2W10gbWVtb3J5IHByaWNlc19yZXMgPSBuZXcgdWludDI1NltdKHRvdGFsUmVzdWx0Q2Fycyk7Cgl1aW50MjU2W10gbWVtb3J5IHByb2ZpdHNfcmVzID0gbmV3IHVpbnQyNTZbXSh0b3RhbFJlc3VsdENhcnMpOwoJCglmb3IgKHVpbnQyNTYgY2FySWQgPSAwOyBjYXJJZCA8IHRvdGFsUmVzdWx0Q2FyczsgY2FySWQrKykgewoJICBvd25lcnNfcmVzW2NhcklkXSA9IGNhcklkVG9Pd25lcltjYXJJZF07CgkgIGlmIChub3cgLSBjYXJJZFJlbnRTdGFydFRpbWVbY2FySWRdIDw9IDcyMDApIC8vIDIgaG91cnMgb2YgcmVudCBmaW5pc2hlZAoJCXJlbnRlcnNfcmVzW2NhcklkXSA9IGNhcklkVG9SZW50ZXJbY2FySWRdOwoJICBlbHNlIAoJCXJlbnRlcnNfcmVzW2NhcklkXSA9IGFkZHJlc3MoMCk7CgkJCgkgIHByaWNlc19yZXNbY2FySWRdID0gY2FySWRUb1ByaWNlW2NhcklkXTsKCSAgcHJvZml0c19yZXNbY2FySWRdID0gY2FySWRUb1Byb2ZpdFtjYXJJZF07Cgl9CgkKCXJldHVybiAob3duZXJzX3JlcywgcmVudGVyc19yZXMsIHByaWNlc19yZXMsIHByb2ZpdHNfcmVzKTsKICB9ICAKCiAgZnVuY3Rpb24gcHJpY2VPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHByaWNlKSB7IC8vZm9yIHdlYiBzaXRlIHZpZXcKICAgIHJldHVybiBjYXJJZFRvUHJpY2VbX3Rva2VuSWRdOwogIH0KICAKICBmdW5jdGlvbiB0b2tlbnNPZk93bmVyKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTZbXSBvd25lclRva2VucykgeyAvL2ZvciB3ZWIgc2l0ZSB2aWV3CiAgICB1aW50MjU2IHRva2VuQ291bnQgPSBiYWxhbmNlT2YoX293bmVyKTsKICAgIGlmICh0b2tlbkNvdW50ID09IDApIHsKICAgICAgICAvLyBSZXR1cm4gYW4gZW1wdHkgYXJyYXkKICAgICAgcmV0dXJuIG5ldyB1aW50MjU2W10oMCk7CiAgICB9IGVsc2UgewogICAgICB1aW50MjU2W10gbWVtb3J5IHJlc3VsdCA9IG5ldyB1aW50MjU2W10odG9rZW5Db3VudCk7CiAgICAgIHVpbnQyNTYgdG90YWxDYXJzID0gdG90YWxTdXBwbHkoKTsKICAgICAgdWludDI1NiByZXN1bHRJbmRleCA9IDA7CgogICAgICB1aW50MjU2IGNhcklkOwogICAgICBmb3IgKGNhcklkID0gMDsgY2FySWQgPD0gdG90YWxDYXJzOyBjYXJJZCsrKSB7CiAgICAgICAgaWYgKGNhcklkVG9Pd25lcltjYXJJZF0gPT0gX293bmVyKSB7CiAgICAgICAgICByZXN1bHRbcmVzdWx0SW5kZXhdID0gY2FySWQ7CiAgICAgICAgICByZXN1bHRJbmRleCsrOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0KCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKSB7IC8vRVJDNzIxCiAgICByZXR1cm4gY2Fycy5sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsgLy9FUkM3MjEKICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKF90bykpOwoKCV90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsgLy9FUkM3MjEKICAgIHJlcXVpcmUoX293bnMoX2Zyb20sIF90b2tlbklkKSk7CiAgICByZXF1aXJlKF9hcHByb3ZlZChfdG8sIF90b2tlbklkKSk7CiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChfdG8pKTsKCiAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KCgogIC8qIFBSSVZBVEUgRlVOQ1RJT05TICovCiAgZnVuY3Rpb24gX2FkZHJlc3NOb3ROdWxsKGFkZHJlc3MgX3RvKSBwcml2YXRlIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIF90byAhPSBhZGRyZXNzKDApOwogIH0KCiAgZnVuY3Rpb24gX2FwcHJvdmVkKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIGNhcklkVG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX3RvOwogIH0KCiAgZnVuY3Rpb24gX2NyZWF0ZUNhcihzdHJpbmcgX25hbWUsIGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSkgcHJpdmF0ZSB7CiAgICBDYXIgbWVtb3J5IF9jYXIgPSBDYXIoewogICAgICBuYW1lOiBfbmFtZQogICAgfSk7CiAgICB1aW50MjU2IG5ld0NhcklkID0gY2Fycy5wdXNoKF9jYXIpIC0gMTsKCiAgICByZXF1aXJlKG5ld0NhcklkID09IHVpbnQyNTYodWludDMyKG5ld0NhcklkKSkpOyAvL2NoZWNrIG1heGltdW0gbGltaXQgb2YgdG9rZW5zCgogICAgQ2FyQ3JlYXRlZChuZXdDYXJJZCwgX25hbWUsIF9vd25lcik7CgogICAgY2FySWRUb1ByaWNlW25ld0NhcklkXSA9IF9wcmljZTsKCiAgICBfdHJhbnNmZXIoYWRkcmVzcygwKSwgX293bmVyLCBuZXdDYXJJZCk7CiAgfQoKICBmdW5jdGlvbiBfb3ducyhhZGRyZXNzIF9jaGVja2VkQWRkciwgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBfY2hlY2tlZEFkZHIgPT0gY2FySWRUb093bmVyW190b2tlbklkXTsKICB9CgpmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgewogICAgb3duZXJzaGlwVG9rZW5Db3VudFtfdG9dKys7CiAgICBjYXJJZFRvT3duZXJbX3Rva2VuSWRdID0gX3RvOwoKICAgIC8vIFdoZW4gY3JlYXRpbmcgbmV3IGNhcnMgX2Zyb20gaXMgMHgwLCBidXQgd2UgY2FuJ3QgYWNjb3VudCB0aGF0IGFkZHJlc3MuCiAgICBpZiAoX2Zyb20gIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lcnNoaXBUb2tlbkNvdW50W19mcm9tXS0tOwogICAgICAvLyBjbGVhciBhbnkgcHJldmlvdXNseSBhcHByb3ZlZCBvd25lcnNoaXAgZXhjaGFuZ2UKICAgICAgZGVsZXRlIGNhcklkVG9BcHByb3ZlZFtfdG9rZW5JZF07CiAgICB9CgogICAgLy8gRW1pdCB0aGUgdHJhbnNmZXIgZXZlbnQuCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQp9'.
	

]
