Class {
	#name : #SRT7fce2856899a6806eeef70807985fc7554c66340,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7fce2856899a6806eeef70807985fc7554c66340 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogKgogKi8KY29udHJhY3QgU2FmZU1hdGggewogICAgLy9pbnRlcm5hbHMKCiAgICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSAqIGI7CiAgICAgICAgcmVxdWlyZShhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJlcXVpcmUoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYyA9IGEgKyBiOwogICAgICAgIHJlcXVpcmUoYz49YSAmJiBjPj1iKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmVxdWlyZShiID4gMCk7CiAgICAgICAgdWludCBjID0gYSAvIGI7CiAgICAgICAgcmVxdWlyZShhID09IGIgKiBjICsgYSAlIGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgoKLyoqCiAqIEVSQyAyMCB0b2tlbgogKgogKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmludGVyZmFjZSBUb2tlbiB7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogICAgLy8vIEByZXR1cm4gVGhlIGJhbGFuY2UKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX2FkZHJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2Ygd2VpIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlcgogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwoKfQoKLyoqCiAqIEVSQyAyMCB0b2tlbgogKgogKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4gewoKICAgIC8qKgogICAgICogUmV2aWV3ZWQ6CiAgICAgKiAtIEludGVnZXIgb3ZlcmZsb3cgPSBPSywgY2hlY2tlZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vRGVmYXVsdCBhc3N1bWVzIHRvdGFsU3VwcGx5IGNhbid0IGJlIG92ZXIgbWF4ICgyXjI1NiAtIDEpLgogICAgICAgIC8vSWYgeW91ciB0b2tlbiBsZWF2ZXMgb3V0IHRvdGFsU3VwcGx5IGFuZCBjYW4gaXNzdWUgbW9yZSB0b2tlbnMgYXMgdGltZSBnb2VzIG9uLCB5b3UgbmVlZCB0byBjaGVjayBpZiBpdCBkb2Vzbid0IHdyYXAuCiAgICAgICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuCiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICAvL2lmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgLy9pZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5Owp9CgoKLyoqCiAqIENMUCBjcm93ZHNhbGUgSUNPIGNvbnRyYWN0LgogKgogKi8KY29udHJhY3QgQ0xQVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgU2FmZU1hdGggewoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJDTFAgVG9rZW4iOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiQ0xQIjsKCXVpbnQgcHVibGljIGRlY2ltYWxzID0gOTsKCiAgICAvLyBJbml0aWFsIGZvdW5kZXIgYWRkcmVzcyAoc2V0IGluIGNvbnN0cnVjdG9yKQogICAgLy8gVGhpcyBhZGRyZXNzIGhhbmRsZSBhZG1pbmlzdHJhdGlvbiBvZiB0aGUgdG9rZW4uCiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGVyID0gMHgwOwoJCiAgICAvLyBCbG9jayB0aW1pbmcvY29udHJhY3QgdW5sb2NraW5nIGluZm9ybWF0aW9uCgl1aW50IHB1YmxpYyBtb250aDZjb21wYW55VW5sb2NrID0gMTUyNTEzMjgwMTsgLy8gTWF5IDAxLCAyMDE4IFVUQwoJdWludCBwdWJsaWMgbW9udGgxMmNvbXBhbnlVbmxvY2sgPSAxNTQxMDMwNDAxOyAvLyBOb3YgMDEsIDIwMTggVVRDCgl1aW50IHB1YmxpYyBtb250aDE4Y29tcGFueVVubG9jayA9IDE1NTY2Njg4MDE7IC8vIE1heSAwMSwgMjAxOSBVVEMKCXVpbnQgcHVibGljIG1vbnRoMjRjb21wYW55VW5sb2NrID0gMTU3MjU2NjQwMTsgLy8gTm92IDAxLCAyMDE5IFVUQwogICAgdWludCBwdWJsaWMgeWVhcjFVbmxvY2sgPSAxNTQxMDMwNDAxOyAvLyBOb3YgMDEsIDIwMTggVVRDCiAgICB1aW50IHB1YmxpYyB5ZWFyMlVubG9jayA9IDE1NzI1NjY0MDE7IC8vIE5vdiAwMSwgMjAxOSBVVEMKICAgIHVpbnQgcHVibGljIHllYXIzVW5sb2NrID0gMTYwNDE4ODgwMTsgLy8gTm92IDAxLCAyMDIwIFVUQwogICAgdWludCBwdWJsaWMgeWVhcjRVbmxvY2sgPSAxNjM1NzI0ODAxOyAvLyBOb3YgMDEsIDIwMjEgVVRDCgogICAgLy8gSGF2ZSB0aGUgcG9zdC1yZXdhcmQgYWxsb2NhdGlvbnMgYmVlbiBjb21wbGV0ZWQKICAgIGJvb2wgcHVibGljIGFsbG9jYXRlZDFZZWFyID0gZmFsc2U7CiAgICBib29sIHB1YmxpYyBhbGxvY2F0ZWQyWWVhciA9IGZhbHNlOwogICAgYm9vbCBwdWJsaWMgYWxsb2NhdGVkM1llYXIgPSBmYWxzZTsKICAgIGJvb2wgcHVibGljIGFsbG9jYXRlZDRZZWFyID0gZmFsc2U7CgkKCWJvb2wgcHVibGljIGFsbG9jYXRlZDZNb250aHMgPSBmYWxzZTsKICAgIGJvb2wgcHVibGljIGFsbG9jYXRlZDEyTW9udGhzID0gZmFsc2U7CiAgICBib29sIHB1YmxpYyBhbGxvY2F0ZWQxOE1vbnRocyA9IGZhbHNlOwogICAgYm9vbCBwdWJsaWMgYWxsb2NhdGVkMjRNb250aHMgPSBmYWxzZTsKCiAgICAvLyBUb2tlbiBjb3VudCBpbmZvcm1hdGlvbgoJdWludCBjdXJyZW50VG9rZW5TYWxlZCA9IDA7CiAgICB1aW50IHB1YmxpYyB0b3RhbFRva2Vuc1NhbGUgPSA4NzAwMDAwMCAqIDEwKipkZWNpbWFsczsKICAgIHVpbnQgcHVibGljIHRvdGFsVG9rZW5zUmVzZXJ2ZSA9IDM5MDAwMDAwICogMTAqKmRlY2ltYWxzOyAKICAgIHVpbnQgcHVibGljIHRvdGFsVG9rZW5zQ29tcGFueSA9IDI0MDAwMDAwICogMTAqKmRlY2ltYWxzOwoKICAgIGV2ZW50IEJ1eShhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLCB1aW50IGV0aCwgdWludCBmYnQpOwogICAgZXZlbnQgV2l0aGRyYXcoYWRkcmVzcyBpbmRleGVkIHNlbmRlciwgYWRkcmVzcyB0bywgdWludCBldGgpOwogICAgZXZlbnQgQWxsb2NhdGVUb2tlbnMoYWRkcmVzcyBpbmRleGVkIHNlbmRlcik7CgogICAgZnVuY3Rpb24gQ0xQVG9rZW4oKSB7CiAgICAgICAgLyoKICAgICAgICAgICAgSW5pdGlhbGl6ZSB0aGUgY29udHJhY3Qgd2l0aCBhIHNhbmUgc2V0IG9mIG93bmVycwogICAgICAgICovCiAgICAgICAgZm91bmRlciA9IG1zZy5zZW5kZXI7CiAgICB9CgoJLyoKICAgICAgICBBbGxvY2F0ZSByZXNlcnZlZCB0b2tlbnMgYmFzZWQgb24gdGhlIHJ1bm5pbmcgdGltZSBhbmQgc3RhdGUgb2YgdGhlIGNvbnRyYWN0LgogICAgICovCiAgICBmdW5jdGlvbiBhbGxvY2F0ZVJlc2VydmVDb21wYW55VG9rZW5zKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlcj09Zm91bmRlcik7CiAgICAgICAgdWludCB0b2tlbnMgPSAwOwoKICAgICAgICBpZihibG9jay50aW1lc3RhbXAgPiBtb250aDZjb21wYW55VW5sb2NrICYmICFhbGxvY2F0ZWQ2TW9udGhzKQogICAgICAgIHsKICAgICAgICAgICAgYWxsb2NhdGVkNk1vbnRocyA9IHRydWU7CiAgICAgICAgICAgIHRva2VucyA9IHNhZmVEaXYodG90YWxUb2tlbnNDb21wYW55LCA0KTsKICAgICAgICAgICAgYmFsYW5jZXNbZm91bmRlcl0gPSBzYWZlQWRkKGJhbGFuY2VzW2ZvdW5kZXJdLCB0b2tlbnMpOwogICAgICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIHRva2Vucyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYoYmxvY2sudGltZXN0YW1wID4gbW9udGgxMmNvbXBhbnlVbmxvY2sgJiYgIWFsbG9jYXRlZDEyTW9udGhzKQogICAgICAgIHsKICAgICAgICAgICAgYWxsb2NhdGVkMTJNb250aHMgPSB0cnVlOwogICAgICAgICAgICB0b2tlbnMgPSBzYWZlRGl2KHRvdGFsVG9rZW5zQ29tcGFueSwgNCk7CiAgICAgICAgICAgIGJhbGFuY2VzW2ZvdW5kZXJdID0gc2FmZUFkZChiYWxhbmNlc1tmb3VuZGVyXSwgdG9rZW5zKTsKICAgICAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCB0b2tlbnMpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmKGJsb2NrLnRpbWVzdGFtcCA+IG1vbnRoMThjb21wYW55VW5sb2NrICYmICFhbGxvY2F0ZWQxOE1vbnRocykKICAgICAgICB7CiAgICAgICAgICAgIGFsbG9jYXRlZDE4TW9udGhzID0gdHJ1ZTsKICAgICAgICAgICAgdG9rZW5zID0gc2FmZURpdih0b3RhbFRva2Vuc0NvbXBhbnksIDQpOwogICAgICAgICAgICBiYWxhbmNlc1tmb3VuZGVyXSA9IHNhZmVBZGQoYmFsYW5jZXNbZm91bmRlcl0sIHRva2Vucyk7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSwgdG9rZW5zKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZihibG9jay50aW1lc3RhbXAgPiBtb250aDI0Y29tcGFueVVubG9jayAmJiAhYWxsb2NhdGVkMjRNb250aHMpCiAgICAgICAgewogICAgICAgICAgICBhbGxvY2F0ZWQyNE1vbnRocyA9IHRydWU7CiAgICAgICAgICAgIHRva2VucyA9IHNhZmVEaXYodG90YWxUb2tlbnNDb21wYW55LCA0KTsKICAgICAgICAgICAgYmFsYW5jZXNbZm91bmRlcl0gPSBzYWZlQWRkKGJhbGFuY2VzW2ZvdW5kZXJdLCB0b2tlbnMpOwogICAgICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIHRva2Vucyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgcmV2ZXJ0KCk7CgogICAgICAgIEFsbG9jYXRlVG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qCiAgICAgICAgQWxsb2NhdGUgcmVzZXJ2ZWQgdG9rZW5zIGJhc2VkIG9uIHRoZSBydW5uaW5nIHRpbWUgYW5kIHN0YXRlIG9mIHRoZSBjb250cmFjdC4KICAgICAqLwogICAgZnVuY3Rpb24gYWxsb2NhdGVSZXNlcnZlVG9rZW5zKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlcj09Zm91bmRlcik7CiAgICAgICAgdWludCB0b2tlbnMgPSAwOwoKICAgICAgICBpZihibG9jay50aW1lc3RhbXAgPiB5ZWFyMVVubG9jayAmJiAhYWxsb2NhdGVkMVllYXIpCiAgICAgICAgewogICAgICAgICAgICBhbGxvY2F0ZWQxWWVhciA9IHRydWU7CiAgICAgICAgICAgIHRva2VucyA9IHNhZmVEaXYodG90YWxUb2tlbnNSZXNlcnZlLCA0KTsKICAgICAgICAgICAgYmFsYW5jZXNbZm91bmRlcl0gPSBzYWZlQWRkKGJhbGFuY2VzW2ZvdW5kZXJdLCB0b2tlbnMpOwogICAgICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIHRva2Vucyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYoYmxvY2sudGltZXN0YW1wID4geWVhcjJVbmxvY2sgJiYgIWFsbG9jYXRlZDJZZWFyKQogICAgICAgIHsKICAgICAgICAgICAgYWxsb2NhdGVkMlllYXIgPSB0cnVlOwogICAgICAgICAgICB0b2tlbnMgPSBzYWZlRGl2KHRvdGFsVG9rZW5zUmVzZXJ2ZSwgNCk7CiAgICAgICAgICAgIGJhbGFuY2VzW2ZvdW5kZXJdID0gc2FmZUFkZChiYWxhbmNlc1tmb3VuZGVyXSwgdG9rZW5zKTsKICAgICAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCB0b2tlbnMpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmKGJsb2NrLnRpbWVzdGFtcCA+IHllYXIzVW5sb2NrICYmICFhbGxvY2F0ZWQzWWVhcikKICAgICAgICB7CiAgICAgICAgICAgIGFsbG9jYXRlZDNZZWFyID0gdHJ1ZTsKICAgICAgICAgICAgdG9rZW5zID0gc2FmZURpdih0b3RhbFRva2Vuc1Jlc2VydmUsIDQpOwogICAgICAgICAgICBiYWxhbmNlc1tmb3VuZGVyXSA9IHNhZmVBZGQoYmFsYW5jZXNbZm91bmRlcl0sIHRva2Vucyk7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSwgdG9rZW5zKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZihibG9jay50aW1lc3RhbXAgPiB5ZWFyNFVubG9jayAmJiAhYWxsb2NhdGVkNFllYXIpCiAgICAgICAgewogICAgICAgICAgICBhbGxvY2F0ZWQ0WWVhciA9IHRydWU7CiAgICAgICAgICAgIHRva2VucyA9IHNhZmVEaXYodG90YWxUb2tlbnNSZXNlcnZlLCA0KTsKICAgICAgICAgICAgYmFsYW5jZXNbZm91bmRlcl0gPSBzYWZlQWRkKGJhbGFuY2VzW2ZvdW5kZXJdLCB0b2tlbnMpOwogICAgICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIHRva2Vucyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgcmV2ZXJ0KCk7CgogICAgICAgIEFsbG9jYXRlVG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKCiAgIC8qKgogICAgKiAgIENoYW5nZSBmb3VuZGVyIGFkZHJlc3MgKENvbnRyb2xsaW5nIGFkZHJlc3MgZm9yIGNvbnRyYWN0KQogICAgKi8KICAgIGZ1bmN0aW9uIGNoYW5nZUZvdW5kZXIoYWRkcmVzcyBuZXdGb3VuZGVyKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyPT1mb3VuZGVyKTsKICAgICAgICBmb3VuZGVyID0gbmV3Rm91bmRlcjsKICAgIH0KCgkvKioKICAgICogICBHZXQgY3VycmVudCB0b3RhbCB0b2tlbiBzYWxlCiAgICAqLwogICAgZnVuY3Rpb24gZ2V0VG90YWxDdXJyZW50U2FsZWQoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGN1cnJlbnRUb2tlblNhbGVkKSAgewoJCXJlcXVpcmUobXNnLnNlbmRlcj09Zm91bmRlcik7CgkJCgkJcmV0dXJuIGN1cnJlbnRUb2tlblNhbGVkOwogICAgfQoKICAgLyoqCiAgICAqICAgU2VuZCB0b2tlbiB0byBpbnZlc3RvcgogICAgKi8KICAgIGZ1bmN0aW9uIGFkZEludmVzdG9yTGlzdChhZGRyZXNzIGludmVzdG9yLCB1aW50MjU2IGFtb3VudFRva2VuKSAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgkJcmVxdWlyZShtc2cuc2VuZGVyPT1mb3VuZGVyKTsKCQkKCQlpZihjdXJyZW50VG9rZW5TYWxlZCArIGFtb3VudFRva2VuIDw9IHRvdGFsVG9rZW5zU2FsZSkKCQl7CgkJCWJhbGFuY2VzW2ludmVzdG9yXSA9IHNhZmVBZGQoYmFsYW5jZXNbaW52ZXN0b3JdLCBhbW91bnRUb2tlbik7CgkJCWN1cnJlbnRUb2tlblNhbGVkID0gc2FmZUFkZChjdXJyZW50VG9rZW5TYWxlZCwgYW1vdW50VG9rZW4pOwoJCQl0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIGFtb3VudFRva2VuKTsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCWVsc2UKCQl7CgkJICAgIHJldHVybiBmYWxzZTsKCQl9CiAgICB9Cn0='.
	

]
