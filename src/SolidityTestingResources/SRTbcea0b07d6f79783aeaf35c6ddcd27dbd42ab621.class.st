Class {
	#name : #SRTbcea0b07d6f79783aeaf35c6ddcd27dbd42ab621,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbcea0b07d6f79783aeaf35c6ddcd27dbd42ab621 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTA7Cgpjb250cmFjdCBUb2tlbiB7CiAgICAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGFkZHJlc3NlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFkZHJlc3NFeGlzdHM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBhZGRyZXNzSW5kZXg7CiAgICB1aW50MjU2IHB1YmxpYyBudW1iZXJPZkFkZHJlc3MgPSAwOwogICAgCiAgICBzdHJpbmcgcHVibGljIHBoeXNpY2FsU3RyaW5nOwogICAgc3RyaW5nIHB1YmxpYyBjcnlwdG9TdHJpbmc7CiAgICAKICAgIGJvb2wgcHVibGljIGlzU2VjdXJlZDsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBib29sIHB1YmxpYyBjYW5NaW50QnVybjsKICAgIHVpbnQyNTYgcHVibGljIHR4blRheDsKICAgIHVpbnQyNTYgcHVibGljIGhvbGRpbmdUYXg7CiAgICAvL0luIFdlZWtzLCBvbiBGcmlkYXlzCiAgICB1aW50MjU2IHB1YmxpYyBob2xkaW5nVGF4SW50ZXJ2YWw7CiAgICB1aW50MjU2IHB1YmxpYyBsYXN0SG9sZGluZ1RheDsKICAgIHVpbnQyNTYgcHVibGljIGhvbGRpbmdUYXhEZWNpbWFscyA9IDI7CiAgICBib29sIHB1YmxpYyBpc1ByaXZhdGU7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgCiAgICBmdW5jdGlvbiBUb2tlbihzdHJpbmcgbiwgc3RyaW5nIGEsIHVpbnQyNTYgdG90YWxTdXBwbHlUb1VzZSwgYm9vbCBpc1NlY3VyZWQsIGJvb2wgY01CLCBzdHJpbmcgcGh5c2ljYWwsIHN0cmluZyBjcnlwdG8sIHVpbnQyNTYgdHhuVGF4VG9Vc2UsIHVpbnQyNTYgaG9sZGluZ1RheFRvVXNlLCB1aW50MjU2IGhvbGRpbmdUYXhJbnRlcnZhbFRvVXNlLCBib29sIGlzUHJpdmF0ZVRvVXNlKSB7CiAgICAgICAgbmFtZSA9IG47CiAgICAgICAgc3ltYm9sID0gYTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5VG9Vc2U7CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHlUb1VzZTsKICAgICAgICBpc1NlY3VyZWQgPSBpc1NlY3VyZWQ7CiAgICAgICAgcGh5c2ljYWxTdHJpbmcgPSBwaHlzaWNhbDsKICAgICAgICBjcnlwdG9TdHJpbmcgPSBjcnlwdG87CiAgICAgICAgY2FuTWludEJ1cm4gPSBjTUI7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHR4blRheCA9IHR4blRheFRvVXNlOwogICAgICAgIGhvbGRpbmdUYXggPSBob2xkaW5nVGF4VG9Vc2U7CiAgICAgICAgaG9sZGluZ1RheEludGVydmFsID0gaG9sZGluZ1RheEludGVydmFsVG9Vc2U7CiAgICAgICAgaWYoaG9sZGluZ1RheEludGVydmFsIT0wKSB7CiAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4ID0gbm93OwogICAgICAgICAgICB3aGlsZShnZXRIb3VyKGxhc3RIb2xkaW5nVGF4KSE9MjEpIHsKICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IDEgaG91cnM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2hpbGUoZ2V0V2Vla2RheShsYXN0SG9sZGluZ1RheCkhPTUpIHsKICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IDEgZGF5czsKICAgICAgICAgICAgfQogICAgICAgICAgICBsYXN0SG9sZGluZ1RheCAtPSBnZXRNaW51dGUobGFzdEhvbGRpbmdUYXgpICogKDEgbWludXRlcykgKyBnZXRTZWNvbmQobGFzdEhvbGRpbmdUYXgpICogKDEgc2Vjb25kcyk7CiAgICAgICAgfQogICAgICAgIGlzUHJpdmF0ZSA9IGlzUHJpdmF0ZVRvVXNlOwogICAgICAgIAogICAgICAgIGFkZEFkZHJlc3Mob3duZXIpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHBheWFibGUgewogICAgICAgIGNoYXJnZUhvbGRpbmdUYXgoKTsKICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSB0aHJvdzsKICAgICAgICBpZiAoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZbX3RvXSkgdGhyb3c7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIgJiYgX3RvICE9IG93bmVyICYmIHR4blRheCAhPSAwKSB7CiAgICAgICAgICAgIGlmKCFvd25lci5zZW5kKHR4blRheCkpIHsKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmKGlzUHJpdmF0ZSAmJiBtc2cuc2VuZGVyICE9IG93bmVyICYmICFhZGRyZXNzRXhpc3RzW190b10pIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOwogICAgICAgIGFkZEFkZHJlc3MoX3RvKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZVR4blRheCh1aW50MjU2IF9uZXdWYWx1ZSkgewogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIHR4blRheCA9IF9uZXdWYWx1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gbWludCh1aW50MjU2IF92YWx1ZSkgewogICAgICAgIGlmKGNhbk1pbnRCdXJuICYmIG1zZy5zZW5kZXIgPT0gb3duZXIpIHsKICAgICAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSArIF92YWx1ZSA8IGJhbGFuY2VPZlttc2cuc2VuZGVyXSkgdGhyb3c7CiAgICAgICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSArPSBfdmFsdWU7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5ICs9IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIoMCwgbXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHsKICAgICAgICBpZihjYW5NaW50QnVybiAmJiBtc2cuc2VuZGVyID09IG93bmVyKSB7CiAgICAgICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHRocm93OwogICAgICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDAsIF92YWx1ZSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBjaGFyZ2VIb2xkaW5nVGF4KCkgewogICAgICAgIGlmKGhvbGRpbmdUYXhJbnRlcnZhbCE9MCkgewogICAgICAgICAgICB1aW50MjU2IGRhdGVEaWYgPSBub3cgLSBsYXN0SG9sZGluZ1RheDsKICAgICAgICAgICAgYm9vbCBjaGFuZ2VkID0gZmFsc2U7CiAgICAgICAgICAgIHdoaWxlKGRhdGVEaWYgPj0gaG9sZGluZ1RheEludGVydmFsICogKDEgd2Vla3MpKSB7CiAgICAgICAgICAgICAgICBjaGFuZ2VkPXRydWU7CiAgICAgICAgICAgICAgICBkYXRlRGlmIC09IGhvbGRpbmdUYXhJbnRlcnZhbCAqICgxIHdlZWtzKTsKICAgICAgICAgICAgICAgIGZvcih1aW50MjU2IGkgPSAwO2k8bnVtYmVyT2ZBZGRyZXNzO2krKykgewogICAgICAgICAgICAgICAgICAgIGlmKGFkZHJlc3Nlc1tpXSE9b3duZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBhbXRPZlRheFRvUGF5ID0gKChiYWxhbmNlT2ZbYWRkcmVzc2VzW2ldXSkgKiBob2xkaW5nVGF4KSAgLyAoMTAqKmhvbGRpbmdUYXhEZWNpbWFscykvICgxMCoqaG9sZGluZ1RheERlY2ltYWxzKTsKICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZU9mW2FkZHJlc3Nlc1tpXV0gLT0gYW10T2ZUYXhUb1BheTsKICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZU9mW293bmVyXSArPSBhbXRPZlRheFRvUGF5OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZihjaGFuZ2VkKSB7CiAgICAgICAgICAgICAgICBsYXN0SG9sZGluZ1RheCA9IG5vdzsKICAgICAgICAgICAgICAgIHdoaWxlKGdldEhvdXIobGFzdEhvbGRpbmdUYXgpIT0yMSkgewogICAgICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IDEgaG91cnM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB3aGlsZShnZXRXZWVrZGF5KGxhc3RIb2xkaW5nVGF4KSE9NSkgewogICAgICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IDEgZGF5czsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxhc3RIb2xkaW5nVGF4IC09IGdldE1pbnV0ZShsYXN0SG9sZGluZ1RheCkgKiAoMSBtaW51dGVzKSArIGdldFNlY29uZChsYXN0SG9sZGluZ1RheCkgKiAoMSBzZWNvbmRzKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2hhbmdlSG9sZGluZ1RheCh1aW50MjU2IF9uZXdWYWx1ZSkgewogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIGhvbGRpbmdUYXggPSBfbmV3VmFsdWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZUhvbGRpbmdUYXhJbnRlcnZhbCh1aW50MjU2IF9uZXdWYWx1ZSkgewogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIGhvbGRpbmdUYXhJbnRlcnZhbCA9IF9uZXdWYWx1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRkQWRkcmVzcyAoYWRkcmVzcyBhZGRyKSBwcml2YXRlIHsKICAgICAgICBpZighYWRkcmVzc0V4aXN0c1thZGRyXSkgewogICAgICAgICAgICBhZGRyZXNzSW5kZXhbYWRkcl0gPSBudW1iZXJPZkFkZHJlc3M7CiAgICAgICAgICAgIGFkZHJlc3Nlc1tudW1iZXJPZkFkZHJlc3MrK10gPSBhZGRyOwogICAgICAgICAgICBhZGRyZXNzRXhpc3RzW2FkZHJdID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkZEFkZHJlc3NNYW51YWwgKGFkZHJlc3MgYWRkcikgewogICAgICAgIGlmKG1zZy5zZW5kZXIgPT0gb3duZXIgJiYgaXNQcml2YXRlKSB7CiAgICAgICAgICAgIGFkZEFkZHJlc3MoYWRkcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiByZW1vdmVBZGRyZXNzIChhZGRyZXNzIGFkZHIpIHByaXZhdGUgewogICAgICAgIGlmKGFkZHJlc3NFeGlzdHNbYWRkcl0pIHsKICAgICAgICAgICAgbnVtYmVyT2ZBZGRyZXNzLS07CiAgICAgICAgICAgIGFkZHJlc3Nlc1thZGRyZXNzSW5kZXhbYWRkcl1dID0gMHgwOwogICAgICAgICAgICBhZGRyZXNzRXhpc3RzW2FkZHJdID0gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiByZW1vdmVBZGRyZXNzTWFudWFsIChhZGRyZXNzIGFkZHIpIHsKICAgICAgICBpZihtc2cuc2VuZGVyID09IG93bmVyICYmIGlzUHJpdmF0ZSkgewogICAgICAgICAgICByZW1vdmVBZGRyZXNzKGFkZHIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0V2Vla2RheSh1aW50IHRpbWVzdGFtcCkgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgICAgcmV0dXJuIHVpbnQ4KCh0aW1lc3RhbXAgLyA4NjQwMCArIDQpICUgNyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldEhvdXIodWludCB0aW1lc3RhbXApIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgICAgIHJldHVybiB1aW50OCgodGltZXN0YW1wIC8gNjAgLyA2MCkgJSAyNCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TWludXRlKHVpbnQgdGltZXN0YW1wKSByZXR1cm5zICh1aW50OCkgewogICAgICAgICAgICByZXR1cm4gdWludDgoKHRpbWVzdGFtcCAvIDYwKSAlIDYwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTZWNvbmQodWludCB0aW1lc3RhbXApIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgICAgIHJldHVybiB1aW50OCh0aW1lc3RhbXAgJSA2MCk7CiAgICB9CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IHByZXNhbGUgewogICAgCiAgICBUb2tlbiBwdWJsaWMgdG9rZW47CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIHVpbnQyNTYgcHVibGljIG51bWJlck9mVG9rZW5zOwogICAgdWludDI1NiBwdWJsaWMgbnVtYmVyT2ZUb2tlbnNMZWZ0OwogICAgdWludDI1NiBwdWJsaWMgcHJpY2VQZXJUb2tlbjsKICAgIHVpbnQyNTYgcHVibGljIHRva2Vuc0Zyb21QcmVzYWxlID0gMDsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgZmluYWxBZGRyZXNzID0gMHg1OTA0OTU3ZDI1RDBjNjIxMzQ5MTg4MmE2NDc2NTk2N0Y4OEJDQ0M3OwogICAgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlT2Y7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBhZGRyZXNzRXhpc3RzOwogICAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgYWRkcmVzc2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYWRkcmVzc0luZGV4OwogICAgdWludDI1NiBwdWJsaWMgbnVtYmVyT2ZBZGRyZXNzID0gMDsKICAgIAogICAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwdWJsaWMgZGF0ZXM7CiAgICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHB1YmxpYyBwZXJjZW50czsKICAgIHVpbnQyNTYgcHVibGljIG51bWJlck9mRGF0ZXMgPSA4OwogICAgCiAgICBwcmVzYWxlIHBzID0gcHJlc2FsZSgweGE2N2Q5N2Q3NWVFMTc1ZTA1QkIxRkIxNzUyOUZENzcyZUU4RTkwMzApOwogICAgCiAgICBmdW5jdGlvbiBwcmVzYWxlKGFkZHJlc3MgdG9rZW5BZGRyZXNzLCB1aW50MjU2IG5vT2ZUb2tlbnMsIHVpbnQyNTYgcHJQZXJUb2tlbikgewogICAgICAgIGRhdGVzWzBdID0gMTUwNTUyMDAwMDsKICAgICAgICBkYXRlc1sxXSA9IDE1MDYwMzg0MDA7CiAgICAgICAgZGF0ZXNbMl0gPSAxNTA2MTI0ODAwOwogICAgICAgIGRhdGVzWzNdID0gMTUwNjgxNjAwMDsKICAgICAgICBkYXRlc1s0XSA9IDE1MDc0MjA4MDA7CiAgICAgICAgZGF0ZXNbNV0gPSAxNTA4MTEyMDAwOwogICAgICAgIGRhdGVzWzZdID0gMTUwODYzMDQwMDsKICAgICAgICBkYXRlc1s3XSA9IDE1MDg4MDMyMDA7CiAgICAgICAgcGVyY2VudHNbMF0gPSAzNTA7CiAgICAgICAgcGVyY2VudHNbMV0gPSAyMDA7CiAgICAgICAgcGVyY2VudHNbMl0gPSAxMDA7CiAgICAgICAgcGVyY2VudHNbM10gPSA1MDsKICAgICAgICBwZXJjZW50c1s0XSA9IDI1OwogICAgICAgIHBlcmNlbnRzWzVdID0gMDsKICAgICAgICBwZXJjZW50c1s2XSA9IDkwMDE7CiAgICAgICAgcGVyY2VudHNbN10gPSA5MDAxOwogICAgICAgIHRva2VuID0gVG9rZW4odG9rZW5BZGRyZXNzKTsKICAgICAgICBudW1iZXJPZlRva2VucyA9IG5vT2ZUb2tlbnM7CiAgICAgICAgdG90YWxTdXBwbHkgPSBub09mVG9rZW5zOwogICAgICAgIG51bWJlck9mVG9rZW5zTGVmdCA9IG5vT2ZUb2tlbnM7CiAgICAgICAgcHJpY2VQZXJUb2tlbiA9IHByUGVyVG9rZW47CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIG5hbWUgPSAiQXV0b25pbyBJQ08iOwogICAgICAgIHN5bWJvbCA9ICJOSU8iOwogICAgICAgIHVwZGF0ZVByZXNhbGVOdW1iZXJzKCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkZEFkZHJlc3MgKGFkZHJlc3MgYWRkcikgcHJpdmF0ZSB7CiAgICAgICAgaWYoIWFkZHJlc3NFeGlzdHNbYWRkcl0pIHsKICAgICAgICAgICAgYWRkcmVzc0luZGV4W2FkZHJdID0gbnVtYmVyT2ZBZGRyZXNzOwogICAgICAgICAgICBhZGRyZXNzZXNbbnVtYmVyT2ZBZGRyZXNzKytdID0gYWRkcjsKICAgICAgICAgICAgYWRkcmVzc0V4aXN0c1thZGRyXSA9IHRydWU7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBlbmRQcmVzYWxlKCkgewogICAgICAgIGlmKG1zZy5zZW5kZXIgPT0gb3duZXIpIHsKICAgICAgICAgICAgaWYobm93ID4gZGF0ZXNbbnVtYmVyT2ZEYXRlcy0xXSkgewogICAgICAgICAgICAgICAgZmluaXNoKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZihudW1iZXJPZlRva2Vuc0xlZnQgPT0gMCkgewogICAgICAgICAgICAgICAgZmluaXNoKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aHJvdzsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gZmluaXNoKCkgcHJpdmF0ZSB7CiAgICAgICAgaWYoIWZpbmFsQWRkcmVzcy5zZW5kKHRoaXMuYmFsYW5jZSkpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiB1cGRhdGVQcmVzYWxlTnVtYmVycygpIHsKICAgICAgICBpZihtc2cuc2VuZGVyID09IG93bmVyKSB7CiAgICAgICAgICAgIHVpbnQyNTYgcHJldlRva2Vuc0Zyb21QcmVzYWxlID0gdG9rZW5zRnJvbVByZXNhbGU7CiAgICAgICAgICAgIHRva2Vuc0Zyb21QcmVzYWxlID0gcHMubnVtYmVyT2ZUb2tlbnMoKSAtIHBzLm51bWJlck9mVG9rZW5zTGVmdCgpOwogICAgICAgICAgICB1aW50MjU2IGRpZiA9IHRva2Vuc0Zyb21QcmVzYWxlIC0gcHJldlRva2Vuc0Zyb21QcmVzYWxlOwogICAgICAgICAgICBudW1iZXJPZlRva2Vuc0xlZnQgLT0gZGlmOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgdWludDI1NiBwcmV2VG9rZW5zRnJvbVByZXNhbGUgPSB0b2tlbnNGcm9tUHJlc2FsZTsKICAgICAgICB0b2tlbnNGcm9tUHJlc2FsZSA9IHBzLm51bWJlck9mVG9rZW5zKCkgLSBwcy5udW1iZXJPZlRva2Vuc0xlZnQoKTsKICAgICAgICB1aW50MjU2IGRpZiA9IHRva2Vuc0Zyb21QcmVzYWxlIC0gcHJldlRva2Vuc0Zyb21QcmVzYWxlOwogICAgICAgIG51bWJlck9mVG9rZW5zTGVmdCAtPSBkaWY7CiAgICAgICAgdWludDI1NiB3ZWlTZW50ID0gbXNnLnZhbHVlOwogICAgICAgIGlmKHdlaVNlbnQ9PTApIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgd2VpTGVmdE92ZXIgPSAwOwogICAgICAgIGlmKG51bWJlck9mVG9rZW5zTGVmdDw9MCB8fCBub3c8ZGF0ZXNbMF0gfHwgbm93PmRhdGVzW251bWJlck9mRGF0ZXMtMV0pIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgcGVyY2VudCA9IDkwMDE7CiAgICAgICAgZm9yKHVpbnQyNTYgaT0wO2k8bnVtYmVyT2ZEYXRlcy0xO2krKykgewogICAgICAgICAgICBpZihub3c+PWRhdGVzW2ldICYmIG5vdzw9ZGF0ZXNbaSsxXSApIHsKICAgICAgICAgICAgICAgIHBlcmNlbnQgPSBwZXJjZW50c1tpXTsKICAgICAgICAgICAgICAgIGk9bnVtYmVyT2ZEYXRlcy0xOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmKHBlcmNlbnQ9PTkwMDEpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgdG9rZW5zVG9HaXZlID0gd2VpU2VudCAvIHByaWNlUGVyVG9rZW47CiAgICAgICAgaWYodG9rZW5zVG9HaXZlICogcHJpY2VQZXJUb2tlbiA+IHdlaVNlbnQpIHRva2Vuc1RvR2l2ZS0tOwogICAgICAgIHRva2Vuc1RvR2l2ZT0odG9rZW5zVG9HaXZlKigxMDAwK3BlcmNlbnQpKS8xMDAwOwogICAgICAgIGlmKHRva2Vuc1RvR2l2ZT5udW1iZXJPZlRva2Vuc0xlZnQpIHsKICAgICAgICAgICAgd2VpTGVmdE92ZXIgPSAodG9rZW5zVG9HaXZlIC0gbnVtYmVyT2ZUb2tlbnNMZWZ0KSAqIHByaWNlUGVyVG9rZW47CiAgICAgICAgICAgIHRva2Vuc1RvR2l2ZSA9IG51bWJlck9mVG9rZW5zTGVmdDsKICAgICAgICB9CiAgICAgICAgbnVtYmVyT2ZUb2tlbnNMZWZ0IC09IHRva2Vuc1RvR2l2ZTsKICAgICAgICBpZihhZGRyZXNzRXhpc3RzW21zZy5zZW5kZXJdKSB7CiAgICAgICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSArPSB0b2tlbnNUb0dpdmU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWRkQWRkcmVzcyhtc2cuc2VuZGVyKTsKICAgICAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gdG9rZW5zVG9HaXZlOwogICAgICAgIH0KICAgICAgICBUcmFuc2ZlcigweDAsbXNnLnNlbmRlcix0b2tlbnNUb0dpdmUpOwogICAgICAgIGlmKHdlaUxlZnRPdmVyPjApbXNnLnNlbmRlci5zZW5kKHdlaUxlZnRPdmVyKTsKICAgIH0KICAgIAogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7Cn0='.
	

]
