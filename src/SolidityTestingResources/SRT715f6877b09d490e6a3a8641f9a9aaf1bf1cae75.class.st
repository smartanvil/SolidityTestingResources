Class {
	#name : #SRT715f6877b09d490e6a3a8641f9a9aaf1bf1cae75,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT715f6877b09d490e6a3a8641f9a9aaf1bf1cae75 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLy8gaW5zcGlyZWQgYnkKLy8gaHR0cHM6Ly9naXRodWIuY29tL2F4aW9temVuL2NyeXB0b2tpdHRpZXMtYm91bnR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9LaXR0eUFjY2Vzc0NvbnRyb2wuc29sCmNvbnRyYWN0IEFjY2Vzc0NvbnRyb2wgewogICAgLy8vIEBkZXYgVGhlIGFkZHJlc3NlcyBvZiB0aGUgYWNjb3VudHMgKG9yIGNvbnRyYWN0cykgdGhhdCBjYW4gZXhlY3V0ZSBhY3Rpb25zIHdpdGhpbiBlYWNoIHJvbGVzCiAgICBhZGRyZXNzIHB1YmxpYyBjZW9BZGRyZXNzOwogICAgYWRkcmVzcyBwdWJsaWMgY29vQWRkcmVzczsKCiAgICAvLy8gQGRldiBLZWVwcyB0cmFjayB3aGV0aGVyIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuIFdoZW4gdGhhdCBpcyB0cnVlLCBtb3N0IGFjdGlvbnMgYXJlIGJsb2NrZWQKICAgIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKICAgIC8vLyBAZGV2IFRoZSBBY2Nlc3NDb250cm9sIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIEMgcm9sZXMgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIgYWNjb3VudAogICAgZnVuY3Rpb24gQWNjZXNzQ29udHJvbCgpIHB1YmxpYyB7CiAgICAgICAgY2VvQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgY29vQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLy8vIEBkZXYgQWNjZXNzIG1vZGlmaWVyIGZvciBDRU8tb25seSBmdW5jdGlvbmFsaXR5CiAgICBtb2RpZmllciBvbmx5Q0VPKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjZW9BZGRyZXNzKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLyBAZGV2IEFjY2VzcyBtb2RpZmllciBmb3IgQ09PLW9ubHkgZnVuY3Rpb25hbGl0eQogICAgbW9kaWZpZXIgb25seUNPTygpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY29vQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBBY2Nlc3MgbW9kaWZpZXIgZm9yIGFueSBDTGV2ZWwgZnVuY3Rpb25hbGl0eQogICAgbW9kaWZpZXIgb25seUNMZXZlbCgpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyB8fCBtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MpOwogICAgICAgIF87CiAgICB9CgogICAgLy8vIEBkZXYgQXNzaWducyBhIG5ldyBhZGRyZXNzIHRvIGFjdCBhcyB0aGUgQ0VPLiBPbmx5IGF2YWlsYWJsZSB0byB0aGUgY3VycmVudCBDRU8KICAgIC8vLyBAcGFyYW0gX25ld0NFTyBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IENFTwogICAgZnVuY3Rpb24gc2V0Q0VPKGFkZHJlc3MgX25ld0NFTykgcHVibGljIG9ubHlDRU8gewogICAgICAgIHJlcXVpcmUoX25ld0NFTyAhPSBhZGRyZXNzKDApKTsKICAgICAgICBjZW9BZGRyZXNzID0gX25ld0NFTzsKICAgIH0KCiAgICAvLy8gQGRldiBBc3NpZ25zIGEgbmV3IGFkZHJlc3MgdG8gYWN0IGFzIHRoZSBDT08uIE9ubHkgYXZhaWxhYmxlIHRvIHRoZSBjdXJyZW50IENFTwogICAgLy8vIEBwYXJhbSBfbmV3Q09PIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgQ09PCiAgICBmdW5jdGlvbiBzZXRDT08oYWRkcmVzcyBfbmV3Q09PKSBwdWJsaWMgb25seUNFTyB7CiAgICAgICAgcmVxdWlyZShfbmV3Q09PICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGNvb0FkZHJlc3MgPSBfbmV3Q09POwogICAgfQoKICAgIC8vLyBAZGV2IE1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgcGF1c2VkCiAgICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBNb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgSVMgcGF1c2VkCiAgICBtb2RpZmllciB3aGVuUGF1c2VkIHsKICAgICAgICByZXF1aXJlKHBhdXNlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBQYXVzZSB0aGUgc21hcnQgY29udHJhY3QuIE9ubHkgY2FuIGJlIGNhbGxlZCBieSB0aGUgQ0VPCiAgICBmdW5jdGlvbiBwYXVzZSgpIHB1YmxpYyBvbmx5Q0VPIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIHBhdXNlZCA9IHRydWU7CiAgICB9CgogICAgLy8vIEBkZXYgVW5wYXVzZXMgdGhlIHNtYXJ0IGNvbnRyYWN0LiBPbmx5IGNhbiBiZSBjYWxsZWQgYnkgdGhlIENFTwogICAgZnVuY3Rpb24gdW5wYXVzZSgpIHB1YmxpYyBvbmx5Q0VPIHdoZW5QYXVzZWQgewogICAgICAgIHBhdXNlZCA9IGZhbHNlOwogICAgfQp9CgoKLy8gaHR0cHM6Ly9naXRodWIuY29tL2RoYXJtYXByb3RvY29sL05vbkZ1bmdpYmxlVG9rZW4vYmxvYi9tYXN0ZXIvY29udHJhY3RzL0VSQzcyMS5zb2wKLy8gaHR0cHM6Ly9naXRodWIuY29tL2RoYXJtYXByb3RvY29sL05vbkZ1bmdpYmxlVG9rZW4vYmxvYi9tYXN0ZXIvY29udHJhY3RzL0RldGFpbGVkRVJDNzIxLnNvbAoKLyoqCiAqIEludGVyZmFjZSBmb3IgcmVxdWlyZWQgZnVuY3Rpb25hbGl0eSBpbiB0aGUgRVJDNzIxIHN0YW5kYXJkCiAqIGZvciBub24tZnVuZ2libGUgdG9rZW5zLgogKgogKiBBdXRob3I6IE5hZGF2IEhvbGxhbmRlciAobmFkYXYgYXQgZGhhcm1hLmlvKQogKi8KY29udHJhY3QgRVJDNzIxIHsKICAgIC8vIEV2ZW50cwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF90b2tlbklkKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfYXBwcm92ZWQsIHVpbnQyNTYgX3Rva2VuSWQpOwoKICAgIC8vLyBGb3IgcXVlcnlpbmcgdG90YWxTdXBwbHkgb2YgdG9rZW4uCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KTsKCiAgICAvLy8gRm9yIHF1ZXJ5aW5nIGJhbGFuY2Ugb2YgYSBwYXJ0aWN1bGFyIGFjY291bnQuCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmb3IgYmFsYW5jZSBxdWVyeS4KICAgIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2JhbGFuY2UpOwoKICAgIC8vLyBGb3IgcXVlcnlpbmcgb3duZXIgb2YgdG9rZW4uCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSB0b2tlbklEIGZvciBvd25lciBpbnF1aXJ5LgogICAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIpOwoKICAgIC8vLyBAbm90aWNlIEdyYW50IGFub3RoZXIgYWRkcmVzcyB0aGUgcmlnaHQgdG8gdHJhbnNmZXIgdG9rZW4gdmlhIHRha2VPd25lcnNoaXAoKSBhbmQgdHJhbnNmZXJGcm9tKCkKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIGJlIGdyYW50ZWQgdHJhbnNmZXIgYXBwcm92YWwuIFBhc3MgYWRkcmVzcygwKSB0bwogICAgLy8vICBjbGVhciBhbGwgYXBwcm92YWxzLgogICAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgSUQgb2YgdGhlIFRva2VuIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGlmIHRoaXMgY2FsbCBzdWNjZWVkcy4KICAgIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CgogICAgLy8gTk9UIElNUExFTUVOVEVECiAgICAvLyBmdW5jdGlvbiBnZXRBcHByb3ZlZCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIF9hcHByb3ZlZCk7CgogICAgLy8vIFRoaXJkLXBhcnR5IGluaXRpYXRlcyB0cmFuc2ZlciBvZiB0b2tlbiBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8uCiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgZnJvbS4KICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgdG8uCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgVG9rZW4gdGhhdCBjYW4gYmUgdHJhbnNmZXJyZWQgaWYgdGhpcyBjYWxsIHN1Y2NlZWRzLgogICAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwoKICAgIC8vLyBPd25lciBpbml0YXRlcyB0aGUgdHJhbnNmZXIgb2YgdGhlIHRva2VuIHRvIGFub3RoZXIgYWNjb3VudC4KICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQsIGNhbiBiZSBhIHVzZXIgb3IgY29udHJhY3QuCiAgICAvLy8gQHBhcmFtIF90b2tlbklkIFRoZSBJRCBvZiB0aGUgdG9rZW4gdG8gdHJhbnNmZXIuCiAgICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKCiAgICAvLy8KICAgIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sIF9pbXBsZW1lbnRzRVJDNzIxKTsKCiAgICAvLyBFWFRSQQogICAgLy8vIEBub3RpY2UgQWxsb3cgcHJlLWFwcHJvdmVkIHVzZXIgdG8gdGFrZSBvd25lcnNoaXAgb2YgYSB0b2tlbi4KICAgIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIElEIG9mIHRoZSB0b2tlbiB0aGF0IGNhbiBiZSB0cmFuc2ZlcnJlZCBpZiB0aGlzIGNhbGwgc3VjY2VlZHMuCiAgICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogICAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7Cn0KCgovKioKICogSW50ZXJmYWNlIGZvciBvcHRpb25hbCBmdW5jdGlvbmFsaXR5IGluIHRoZSBFUkM3MjEgc3RhbmRhcmQKICogZm9yIG5vbi1mdW5naWJsZSB0b2tlbnMuCiAqCiAqIEF1dGhvcjogTmFkYXYgSG9sbGFuZGVyIChuYWRhdiBhdCBkaGFybWEuaW8pCiAqLwpjb250cmFjdCBEZXRhaWxlZEVSQzcyMSBpcyBFUkM3MjEgewogICAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBfbmFtZSk7CiAgICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgX3N5bWJvbCk7CiAgICAvLyBmdW5jdGlvbiB0b2tlbk1ldGFkYXRhKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBfaW5mb1VybCk7CiAgICAvLyBmdW5jdGlvbiB0b2tlbk9mT3duZXJCeUluZGV4KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9pbmRleCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfdG9rZW5JZCk7Cn0KCgpjb250cmFjdCBDcnlwdG9BZHJpYW4gaXMgQWNjZXNzQ29udHJvbCwgRGV0YWlsZWRFUkM3MjEgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgLy8vIEBkZXYgVGhlIFRva2VuQ3JlYXRlZCBldmVudCBpcyBmaXJlZCB3aGVuZXZlciBhIG5ldyB0b2tlbiBpcyBjcmVhdGVkLgogICAgZXZlbnQgVG9rZW5DcmVhdGVkKHVpbnQyNTYgdG9rZW5JZCwgc3RyaW5nIG5hbWUsIHVpbnQzMiBidWZmbmVzcywgdWludDI1NiBwcmljZSwgYWRkcmVzcyBvd25lcik7CgogICAgLy8vIEBkZXYgVGhlIFRva2VuU29sZCBldmVudCBpcyBmaXJlZCB3aGVuZXZlciBhIHRva2VuIGlzIHNvbGQuCiAgICBldmVudCBUb2tlblNvbGQodWludDI1NiBpbmRleGVkIHRva2VuSWQsIHN0cmluZyBuYW1lLCB1aW50MzIgYnVmZm5lc3MsIHVpbnQyNTYgc2VsbGluZ1ByaWNlLAogICAgdWludDI1NiBuZXdQcmljZSwgYWRkcmVzcyBpbmRleGVkIG9sZE93bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKICAgIC8vLyBAZGV2IEEgbWFwcGluZyBmcm9tIHRva2VuSWRzIHRvIHRoZSBhZGRyZXNzIHRoYXQgb3ducyB0aGVtLiBBbGwgdG9rZW5zIGhhdmUKICAgIC8vLyAgc29tZSB2YWxpZCBvd25lciBhZGRyZXNzLgogICAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwcml2YXRlIHRva2VuSWRUb093bmVyOwoKICAgIC8vLyBAZGV2IEEgbWFwcGluZyBmcm9tIFRva2VuSWRzIHRvIHRoZSBwcmljZSBvZiB0aGUgdG9rZW4uCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgdG9rZW5JZFRvUHJpY2U7CgogICAgLy8vIEBkZXYgQSBtYXBwaW5nIGZyb20gb3duZXIgYWRkcmVzcyB0byBjb3VudCBvZiB0b2tlbnMgdGhhdCBhZGRyZXNzIG93bnMuCiAgICAvLy8gIFVzZWQgaW50ZXJuYWxseSBpbnNpZGUgYmFsYW5jZU9mKCkgdG8gcmVzb2x2ZSBvd25lcnNoaXAgY291bnQuCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgb3duZXJzaGlwVG9rZW5Db3VudDsKCiAgICAvLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBUb2tlbklkcyB0byBhbiBhZGRyZXNzIHRoYXQgaGFzIGJlZW4gYXBwcm92ZWQgdG8gY2FsbAogICAgLy8vICB0cmFuc2ZlckZyb20oKS4gRWFjaCBUb2tlbiBjYW4gb25seSBoYXZlIG9uZSBhcHByb3ZlZCBhZGRyZXNzIGZvciB0cmFuc2ZlcgogICAgLy8vICBhdCBhbnkgdGltZS4gQSB6ZXJvIHZhbHVlIG1lYW5zIG5vIGFwcHJvdmFsIGlzIG91dHN0YW5kaW5nCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyB0b2tlbklkVG9BcHByb3ZlZDsKCiAgICBzdHJ1Y3QgQWRyaWFuIHsKICAgICAgICBzdHJpbmcgbmFtZTsKICAgICAgICB1aW50MzIgYnVmZm5lc3M7CiAgICB9CgogICAgQWRyaWFuW10gcHJpdmF0ZSBhZHJpYW5zOwoKICAgIHVpbnQyNTYgcHJpdmF0ZSBzdGFydGluZ1ByaWNlID0gMC4wMDEgZXRoZXI7CiAgICBib29sIHByaXZhdGUgZXJjNzIxRW5hYmxlZCA9IGZhbHNlOwoKICAgIG1vZGlmaWVyIG9ubHlFUkM3MjEoKSB7CiAgICAgICAgcmVxdWlyZShlcmM3MjFFbmFibGVkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLyBAZGV2IENyZWF0ZXMgYSBuZXcgdG9rZW4gd2l0aCB0aGUgZ2l2ZW4gbmFtZSBhbmQgX3ByaWNlIGFuZCBhc3NpZ25lcyBpdCB0byBhbiBfb3duZXIuCiAgICBmdW5jdGlvbiBjcmVhdGVUb2tlbihzdHJpbmcgX25hbWUsIHVpbnQzMiBfYnVmZm5lc3MsIGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSkgcHVibGljIG9ubHlDTGV2ZWwgewogICAgICAgIHJlcXVpcmUoX293bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3ByaWNlID49IHN0YXJ0aW5nUHJpY2UpOwoKICAgICAgICBfY3JlYXRlVG9rZW4oX25hbWUsIF9idWZmbmVzcywgX293bmVyLCBfcHJpY2UpOwogICAgfQoKICAgIC8vLyBAZGV2IENyZWF0ZXMgYSBuZXcgdG9rZW4gd2l0aCB0aGUgZ2l2ZW4gbmFtZS4KICAgIGZ1bmN0aW9uIGNyZWF0ZVRva2VuKHN0cmluZyBfbmFtZSwgdWludDMyIF9idWZmbmVzcykgcHVibGljIG9ubHlDTGV2ZWwgewogICAgICAgIF9jcmVhdGVUb2tlbihfbmFtZSwgX2J1ZmZuZXNzLCBhZGRyZXNzKHRoaXMpLCBzdGFydGluZ1ByaWNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfY3JlYXRlVG9rZW4oc3RyaW5nIF9uYW1lLCB1aW50MzIgX2J1ZmZuZXNzLCBhZGRyZXNzIF9vd25lciwgdWludDI1NiBfcHJpY2UpIHByaXZhdGUgewogICAgICAgIEFkcmlhbiBtZW1vcnkgX2FkcmlhbiA9IEFkcmlhbih7CiAgICAgICAgICAgIG5hbWU6IF9uYW1lLAogICAgICAgICAgICBidWZmbmVzczogX2J1ZmZuZXNzCiAgICAgICAgfSk7CiAgICAgICAgdWludDI1NiBuZXdUb2tlbklkID0gYWRyaWFucy5wdXNoKF9hZHJpYW4pIC0gMTsKICAgICAgICB0b2tlbklkVG9QcmljZVtuZXdUb2tlbklkXSA9IF9wcmljZTsKCiAgICAgICAgVG9rZW5DcmVhdGVkKG5ld1Rva2VuSWQsIF9uYW1lLCBfYnVmZm5lc3MsIF9wcmljZSwgX293bmVyKTsKCiAgICAgICAgLy8gVGhpcyB3aWxsIGFzc2lnbiBvd25lcnNoaXAsIGFuZCBhbHNvIGVtaXQgdGhlIFRyYW5zZmVyIGV2ZW50IGFzIHBlciBFUkM3MjEgZHJhZnQKICAgICAgICBfdHJhbnNmZXIoYWRkcmVzcygwKSwgX293bmVyLCBuZXdUb2tlbklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb2tlbih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICgKICAgICAgICBzdHJpbmcgX3Rva2VuTmFtZSwKICAgICAgICB1aW50MzIgX2J1ZmZuZXNzLAogICAgICAgIHVpbnQyNTYgX3ByaWNlLAogICAgICAgIHVpbnQyNTYgX25leHRQcmljZSwKICAgICAgICBhZGRyZXNzIF9vd25lcgogICAgKSB7CiAgICAgICAgX3Rva2VuTmFtZSA9IGFkcmlhbnNbX3Rva2VuSWRdLm5hbWU7CiAgICAgICAgX2J1ZmZuZXNzID0gYWRyaWFuc1tfdG9rZW5JZF0uYnVmZm5lc3M7CiAgICAgICAgX3ByaWNlID0gdG9rZW5JZFRvUHJpY2VbX3Rva2VuSWRdOwogICAgICAgIF9uZXh0UHJpY2UgPSBuZXh0UHJpY2VPZihfdG9rZW5JZCk7CiAgICAgICAgX293bmVyID0gdG9rZW5JZFRvT3duZXJbX3Rva2VuSWRdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEFsbFRva2VucygpIHB1YmxpYyB2aWV3IHJldHVybnMgKAogICAgICAgIHVpbnQyNTZbXSwKICAgICAgICB1aW50MjU2W10sCiAgICAgICAgYWRkcmVzc1tdCiAgICApIHsKICAgICAgICB1aW50MjU2IHRvdGFsID0gdG90YWxTdXBwbHkoKTsKICAgICAgICB1aW50MjU2W10gbWVtb3J5IHByaWNlcyA9IG5ldyB1aW50MjU2W10odG90YWwpOwogICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgbmV4dFByaWNlcyA9IG5ldyB1aW50MjU2W10odG90YWwpOwogICAgICAgIGFkZHJlc3NbXSBtZW1vcnkgb3duZXJzID0gbmV3IGFkZHJlc3NbXSh0b3RhbCk7CgogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHsKICAgICAgICAgICAgcHJpY2VzW2ldID0gdG9rZW5JZFRvUHJpY2VbaV07CiAgICAgICAgICAgIG5leHRQcmljZXNbaV0gPSBuZXh0UHJpY2VPZihpKTsKICAgICAgICAgICAgb3duZXJzW2ldID0gdG9rZW5JZFRvT3duZXJbaV07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gKHByaWNlcywgbmV4dFByaWNlcywgb3duZXJzKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b2tlbnNPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2W10pIHsKICAgICAgICB1aW50MjU2IHRva2VuQ291bnQgPSBiYWxhbmNlT2YoX293bmVyKTsKICAgICAgICBpZiAodG9rZW5Db3VudCA9PSAwKSB7CiAgICAgICAgICAgIC8vIFJldHVybiBhbiBlbXB0eSBhcnJheQogICAgICAgICAgICByZXR1cm4gbmV3IHVpbnQyNTZbXSgwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1aW50MjU2W10gbWVtb3J5IHJlc3VsdCA9IG5ldyB1aW50MjU2W10odG9rZW5Db3VudCk7CiAgICAgICAgICAgIHVpbnQyNTYgdG90YWwgPSB0b3RhbFN1cHBseSgpOwogICAgICAgICAgICB1aW50MjU2IHJlc3VsdEluZGV4ID0gMDsKCiAgICAgICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmICh0b2tlbklkVG9Pd25lcltpXSA9PSBfb3duZXIpIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0SW5kZXhdID0gaTsKICAgICAgICAgICAgICAgICAgICByZXN1bHRJbmRleCsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBAZGV2IFRoaXMgZnVuY3Rpb24gd2l0aGRyYXdzIHRoZSBjb250cmFjdCBvd25lcidzIGN1dC4KICAgIC8vLyBBbnkgYW1vdW50IG1heSBiZSB3aXRoZHJhd24gYXMgdGhlcmUgaXMgbm8gdXNlciBmdW5kcy4KICAgIC8vLyBVc2VyIGZ1bmRzIGFyZSBpbW1lZGlhdGVseSBzZW50IHRvIHRoZSBvbGQgb3duZXIgaW4gYHB1cmNoYXNlYAogICAgZnVuY3Rpb24gd2l0aGRyYXdCYWxhbmNlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyBvbmx5Q0VPIHsKICAgICAgICByZXF1aXJlKF9hbW91bnQgPD0gdGhpcy5iYWxhbmNlKTsKCiAgICAgICAgaWYgKF9hbW91bnQgPT0gMCkgewogICAgICAgICAgICBfYW1vdW50ID0gdGhpcy5iYWxhbmNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKF90byA9PSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIGNlb0FkZHJlc3MudHJhbnNmZXIoX2Ftb3VudCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RvLnRyYW5zZmVyKF9hbW91bnQpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBTZW5kIGV0aGVyIGFuZCBvYnRhaW4gdGhlIHRva2VuCiAgICBmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgcGF5YWJsZSB3aGVuTm90UGF1c2VkIHsKICAgICAgICBhZGRyZXNzIG9sZE93bmVyID0gb3duZXJPZihfdG9rZW5JZCk7CiAgICAgICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludDI1NiBzZWxsaW5nUHJpY2UgPSBwcmljZU9mKF90b2tlbklkKTsKCiAgICAgICAgLy8gYWN0aXZlIHRva2VucwogICAgICAgIHJlcXVpcmUob2xkT3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgLy8gbWF5YmUgb25lIGRheSBuZXdPd25lcidzIGxvZ2ljIGFsbG93cyB0aGlzIHRvIGhhcHBlbgogICAgICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgLy8gZG9uJ3QgYnV5IGZyb20geW91cnNlbGYKICAgICAgICByZXF1aXJlKG9sZE93bmVyICE9IG5ld093bmVyKTsKICAgICAgICAvLyBkb24ndCBzZWxsIHRvIGNvbnRyYWN0cwogICAgICAgIC8vIGJ1dCBldmVuIHRoaXMgZG9lc24ndCBwcmV2ZW50IGJhZCBjb250cmFjdHMgdG8gYmVjb21lIGFuIG93bmVyIG9mIGEgdG9rZW4KICAgICAgICByZXF1aXJlKCFfaXNDb250cmFjdChuZXdPd25lcikpOwogICAgICAgIC8vIGFub3RoZXIgY2hlY2sgdG8gYmUgc3VyZSB0aGF0IHRva2VuIGlzIGFjdGl2ZQogICAgICAgIHJlcXVpcmUoc2VsbGluZ1ByaWNlID4gMCk7CiAgICAgICAgLy8gbWluIHJlcXVpcmVkIGFtb3VudCBjaGVjawogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHNlbGxpbmdQcmljZSk7CgogICAgICAgIC8vIHRyYW5zZmVyIHRvIHRoZSBuZXcgb3duZXIKICAgICAgICBfdHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfdG9rZW5JZCk7CiAgICAgICAgLy8gdXBkYXRlIGZpZWxkcyBiZWZvcmUgZW1pdHRpbmcgYW4gZXZlbnQKICAgICAgICB0b2tlbklkVG9QcmljZVtfdG9rZW5JZF0gPSBuZXh0UHJpY2VPZihfdG9rZW5JZCk7CiAgICAgICAgLy8gZW1pdCBldmVudAogICAgICAgIFRva2VuU29sZChfdG9rZW5JZCwgYWRyaWFuc1tfdG9rZW5JZF0ubmFtZSwgYWRyaWFuc1tfdG9rZW5JZF0uYnVmZm5lc3MsIHNlbGxpbmdQcmljZSwgcHJpY2VPZihfdG9rZW5JZCksIG9sZE93bmVyLCBuZXdPd25lcik7CgogICAgICAgIC8vIGV4dHJhIGV0aGVyIHdoaWNoIHNob3VsZCBiZSByZXR1cm5lZCBiYWNrIHRvIGJ1eWVyCiAgICAgICAgdWludDI1NiBleGNlc3MgPSBtc2cudmFsdWUuc3ViKHNlbGxpbmdQcmljZSk7CiAgICAgICAgLy8gY29udHJhY3Qgb3duZXIncyBjdXQgd2hpY2ggaXMgbGVmdCBpbiBjb250cmFjdCBhbmQgYWNjZXNlZCBieSB3aXRoZHJhd0JhbGFuY2UKICAgICAgICB1aW50MjU2IGNvbnRyYWN0Q3V0ID0gc2VsbGluZ1ByaWNlLm11bCg2KS5kaXYoMTAwKTsgLy8gNiUKCiAgICAgICAgLy8gbm8gbmVlZCB0byB0cmFuc2ZlciBpZiBpdCdzIGluaXRpYWwgc2VsbAogICAgICAgIGlmIChvbGRPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgICAgICAgIC8vIHRyYW5zZmVyIHBheW1lbnQgdG8gc2VsbGVyIG1pbnVzIHRoZSBjb250cmFjdCdzIGN1dAogICAgICAgICAgICBvbGRPd25lci50cmFuc2ZlcihzZWxsaW5nUHJpY2Uuc3ViKGNvbnRyYWN0Q3V0KSk7CiAgICAgICAgfQoKICAgICAgICAvLyByZXR1cm4gZXh0cmEgZXRoZXIKICAgICAgICBpZiAoZXhjZXNzID4gMCkgewogICAgICAgICAgICBuZXdPd25lci50cmFuc2ZlcihleGNlc3MpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBwcmljZU9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3ByaWNlKSB7CiAgICAgICAgcmV0dXJuIHRva2VuSWRUb1ByaWNlW190b2tlbklkXTsKICAgIH0KCiAgICB1aW50MjU2IHByaXZhdGUgaW5jcmVhc2VMaW1pdDEgPSAwLjAwMSBldGhlcjsKICAgIHVpbnQyNTYgcHJpdmF0ZSBpbmNyZWFzZUxpbWl0MiA9IDAuMDUgZXRoZXI7CiAgICB1aW50MjU2IHByaXZhdGUgaW5jcmVhc2VMaW1pdDMgPSAwLjEgZXRoZXI7CiAgICB1aW50MjU2IHByaXZhdGUgaW5jcmVhc2VMaW1pdDQgPSAxLjAgZXRoZXI7CgogICAgZnVuY3Rpb24gbmV4dFByaWNlT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfbmV4dFByaWNlKSB7CiAgICAgICAgdWludDI1NiBfcHJpY2UgPSBwcmljZU9mKF90b2tlbklkKTsKICAgICAgICBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDEpIHsKICAgICAgICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMjAwKS5kaXYoOTUpOwogICAgICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDIpIHsKICAgICAgICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTM1KS5kaXYoOTYpOwogICAgICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDMpIHsKICAgICAgICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTI1KS5kaXYoOTcpOwogICAgICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDQpIHsKICAgICAgICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTE3KS5kaXYoOTcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBfcHJpY2UubXVsKDExNSkuZGl2KDk4KTsKICAgICAgICB9CiAgICB9CgoKICAgIC8qKiogRVJDLTcyMSAqKiovCiAgICAvLyBVbmxvY2tzIEVSQzcyMSBiZWhhdmlvdXIsIGFsbG93aW5nIGZvciB0cmFkaW5nIG9uIHRoaXJkIHBhcnR5IHBsYXRmb3Jtcy4KICAgIGZ1bmN0aW9uIGVuYWJsZUVSQzcyMSgpIG9ubHlDRU8gcHVibGljIHsKICAgICAgICBlcmM3MjFFbmFibGVkID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KSB7CiAgICAgICAgX3RvdGFsU3VwcGx5ID0gYWRyaWFucy5sZW5ndGg7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9iYWxhbmNlKSB7CiAgICAgICAgX2JhbGFuY2UgPSBvd25lcnNoaXBUb2tlbkNvdW50W19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIF9vd25lcikgewogICAgICAgIF9vd25lciA9IHRva2VuSWRUb093bmVyW190b2tlbklkXTsKICAgICAgICAvLyByZXF1aXJlKF9vd25lciAhPSBhZGRyZXNzKDApKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCBvbmx5RVJDNzIxIHsKICAgICAgICByZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CgogICAgICAgIHRva2VuSWRUb0FwcHJvdmVkW190b2tlbklkXSA9IF90bzsKCiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCBvbmx5RVJDNzIxIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF9vd25zKF9mcm9tLCBfdG9rZW5JZCkpOwogICAgICAgIHJlcXVpcmUoX2FwcHJvdmVkKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CgogICAgICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB3aGVuTm90UGF1c2VkIG9ubHlFUkM3MjEgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKCiAgICAgICAgLy8gUmVhc3NpZ24gb3duZXJzaGlwLCBjbGVhciBwZW5kaW5nIGFwcHJvdmFscywgZW1pdCBUcmFuc2ZlciBldmVudC4KICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CgogICAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyB2aWV3IHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBlcmM3MjFFbmFibGVkOwogICAgfQoKICAgIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHdoZW5Ob3RQYXVzZWQgb25seUVSQzcyMSB7CiAgICAgICAgcmVxdWlyZShfYXBwcm92ZWQobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKCiAgICAgICAgX3RyYW5zZmVyKHRva2VuSWRUb093bmVyW190b2tlbklkXSwgbXNnLnNlbmRlciwgX3Rva2VuSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgX25hbWUpIHsKICAgICAgICBfbmFtZSA9ICJDcnlwdG9BZHJpYW4iOwogICAgfQoKICAgIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBfc3ltYm9sKSB7CiAgICAgICAgX3N5bWJvbCA9ICJDUlBBIjsKICAgIH0KCiAgICAvKioqIFBSSVZBVEVTICoqKi8KICAgIC8vLyBAZGV2IENoZWNrIGZvciB0b2tlbiBvd25lcnNoaXAuCiAgICBmdW5jdGlvbiBfb3ducyhhZGRyZXNzIF9jbGFpbWFudCwgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdG9rZW5JZFRvT3duZXJbX3Rva2VuSWRdID09IF9jbGFpbWFudDsKICAgIH0KCiAgICAvLy8gQGRldiBGb3IgY2hlY2tpbmcgYXBwcm92YWwgb2YgdHJhbnNmZXIgZm9yIGFkZHJlc3MgX3RvLgogICAgZnVuY3Rpb24gX2FwcHJvdmVkKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB0b2tlbklkVG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX3RvOwogICAgfQoKICAgIC8vLyBAZGV2IEFzc2lnbnMgb3duZXJzaGlwIG9mIGEgc3BlY2lmaWMgdG9rZW4gdG8gYW4gYWRkcmVzcy4KICAgIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICAgICAgLy8gU2luY2UgdGhlIG51bWJlciBvZiB0b2tlbnMgaXMgY2FwcGVkIHRvIDJeMzIgd2UgY2FuJ3Qgb3ZlcmZsb3cgdGhpcwogICAgICAgIG93bmVyc2hpcFRva2VuQ291bnRbX3RvXSsrOwogICAgICAgIC8vIFRyYW5zZmVyIG93bmVyc2hpcAogICAgICAgIHRva2VuSWRUb093bmVyW190b2tlbklkXSA9IF90bzsKCiAgICAgICAgLy8gV2hlbiBjcmVhdGluZyBuZXcgdG9rZW4gX2Zyb20gaXMgMHgwLCBidXQgd2UgY2FuJ3QgYWNjb3VudCB0aGF0IGFkZHJlc3MuCiAgICAgICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXJzaGlwVG9rZW5Db3VudFtfZnJvbV0tLTsKICAgICAgICAgICAgLy8gY2xlYXIgYW55IHByZXZpb3VzbHkgYXBwcm92ZWQgb3duZXJzaGlwIGV4Y2hhbmdlCiAgICAgICAgICAgIGRlbGV0ZSB0b2tlbklkVG9BcHByb3ZlZFtfdG9rZW5JZF07CiAgICAgICAgfQoKICAgICAgICAvLyBFbWl0IHRoZSB0cmFuc2ZlciBldmVudC4KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CgogICAgLy8vIEBkZXYgQ2hlY2tzIGlmIHRoZSBhZGRyZXNzIGlhIGEgY29udHJhY3Qgb3Igbm90CiAgICBmdW5jdGlvbiBfaXNDb250cmFjdChhZGRyZXNzIGFkZHIpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgdWludDI1NiBzaXplOwogICAgICAgIGFzc2VtYmx5IHsgc2l6ZSA6PSBleHRjb2Rlc2l6ZShhZGRyKSB9CiAgICAgICAgcmV0dXJuIHNpemUgPiAwOwogICAgfQp9CgoKLy8gaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKLy8gdjEuNi4wCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICAvKioKICAgICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAoYSA9PSAwKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAgICovCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICAgKi8KICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAgICovCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9'.
	

]
