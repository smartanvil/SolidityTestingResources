Class {
	#name : #SRT6f0d792b540afa2c8772b9ba4805e7436ad8413e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6f0d792b540afa2c8772b9ba4805e7436ad8413e >> base64 [
	^ 'bGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KY29udHJhY3QgSUVSQzIwVG9rZW4gewogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHt9CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fQoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQpjb250cmFjdCBJdG9rZW5SZWNpcGllbnQgewogIGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9leHRyYURhdGEpOwp9CmNvbnRyYWN0IElUb2tlbiB7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRvdGFsU3VwcGx5KTsKICBmdW5jdGlvbiBtaW50VG9rZW5zKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHt9Cn0KY29udHJhY3QgSU1pbnRhYmxlVG9rZW4gewogIGZ1bmN0aW9uIG1pbnRUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCl7fQp9CmNvbnRyYWN0IFJlZW50cm5hY3lIYW5kbGluZ0NvbnRyYWN0ewoKICAgIGJvb2wgbG9ja2VkOwoKICAgIG1vZGlmaWVyIG5vUmVlbnRyYW5jeSgpIHsKICAgICAgICByZXF1aXJlKCFsb2NrZWQpOwogICAgICAgIGxvY2tlZCA9IHRydWU7CiAgICAgICAgXzsKICAgICAgICBsb2NrZWQgPSBmYWxzZTsKICAgIH0KfQoKY29udHJhY3QgT3duZWQgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKCiAgICBmdW5jdGlvbiBPd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfbmV3T3duZXIgIT0gb3duZXIpOwogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG5ld093bmVyKTsKICAgICAgICBPd25lclVwZGF0ZShvd25lciwgbmV3T3duZXIpOwogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgbmV3T3duZXIgPSAweDA7CiAgICB9CgogICAgZXZlbnQgT3duZXJVcGRhdGUoYWRkcmVzcyBfcHJldk93bmVyLCBhZGRyZXNzIF9uZXdPd25lcik7Cn0KY29udHJhY3QgTG9ja2FibGUgaXMgT3duZWR7CgogIHVpbnQyNTYgcHVibGljIGxvY2tlZFVudGlsQmxvY2s7CgogIGV2ZW50IENvbnRyYWN0TG9ja2VkKHVpbnQyNTYgX3VudGlsQmxvY2ssIHN0cmluZyBfcmVhc29uKTsKCiAgbW9kaWZpZXIgbG9ja0FmZmVjdGVkIHsKICAgICAgcmVxdWlyZShibG9jay5udW1iZXIgPiBsb2NrZWRVbnRpbEJsb2NrKTsKICAgICAgXzsKICB9CgogIGZ1bmN0aW9uIGxvY2tGcm9tU2VsZih1aW50MjU2IF91bnRpbEJsb2NrLCBzdHJpbmcgX3JlYXNvbikgaW50ZXJuYWwgewogICAgbG9ja2VkVW50aWxCbG9jayA9IF91bnRpbEJsb2NrOwogICAgQ29udHJhY3RMb2NrZWQoX3VudGlsQmxvY2ssIF9yZWFzb24pOwogIH0KCgogIGZ1bmN0aW9uIGxvY2tVbnRpbCh1aW50MjU2IF91bnRpbEJsb2NrLCBzdHJpbmcgX3JlYXNvbikgb25seU93bmVyIHsKICAgIGxvY2tlZFVudGlsQmxvY2sgPSBfdW50aWxCbG9jazsKICAgIENvbnRyYWN0TG9ja2VkKF91bnRpbEJsb2NrLCBfcmVhc29uKTsKICB9Cn0KCmNvbnRyYWN0IENyb3dkc2FsZSBpcyBSZWVudHJuYWN5SGFuZGxpbmdDb250cmFjdCwgT3duZWR7CgogIHN0cnVjdCBDb250cmlidXRvckRhdGF7CiAgICB1aW50IHByaW9yaXR5UGFzc0FsbG93YW5jZTsKICAgIGJvb2wgaXNBY3RpdmU7CiAgICB1aW50IGNvbnRyaWJ1dGlvbkFtb3VudDsKICAgIHVpbnQgdG9rZW5zSXNzdWVkOwogIH0KCiAgbWFwcGluZyhhZGRyZXNzID0+IENvbnRyaWJ1dG9yRGF0YSkgcHVibGljIGNvbnRyaWJ1dG9yTGlzdDsKICB1aW50IG5leHRDb250cmlidXRvckluZGV4OwogIG1hcHBpbmcodWludCA9PiBhZGRyZXNzKSBjb250cmlidXRvckluZGV4ZXM7CgogIHN0YXRlIHB1YmxpYyBjcm93ZHNhbGVTdGF0ZSA9IHN0YXRlLnBlbmRpbmdTdGFydDsKICBlbnVtIHN0YXRlIHsgcGVuZGluZ1N0YXJ0LCBwcmlvcml0eVBhc3MsIG9wZW5lZFByaW9yaXR5UGFzcywgY3Jvd2RzYWxlLCBjcm93ZHNhbGVFbmRlZCB9CgogIHVpbnQgcHVibGljIHByZXNhbGVTdGFydEJsb2NrOwogIHVpbnQgcHVibGljIHByZXNhbGVVbmxpbWl0ZWRTdGFydEJsb2NrOwogIHVpbnQgcHVibGljIGNyb3dkc2FsZVN0YXJ0QmxvY2s7CiAgdWludCBwdWJsaWMgY3Jvd2RzYWxlRW5kZWRCbG9jazsKCiAgZXZlbnQgUHJlc2FsZVN0YXJ0ZWQodWludCBibG9ja051bWJlcik7CiAgZXZlbnQgUHJlc2FsZVVubGltaXRlZFN0YXJ0ZWQodWludCBibG9ja051bWJlcik7CiAgZXZlbnQgQ3Jvd2RzYWxlU3RhcnRlZCh1aW50IGJsb2NrTnVtYmVyKTsKICBldmVudCBDcm93ZHNhbGVFbmRlZCh1aW50IGJsb2NrTnVtYmVyKTsKICBldmVudCBFcnJvclNlbmRpbmdFVEgoYWRkcmVzcyB0bywgdWludCBhbW91bnQpOwogIGV2ZW50IE1pbkNhcFJlYWNoZWQodWludCBibG9ja051bWJlcik7CiAgZXZlbnQgTWF4Q2FwUmVhY2hlZCh1aW50IGJsb2NrTnVtYmVyKTsKCiAgSVRva2VuIHRva2VuID0gSVRva2VuKDB4MCk7CiAgdWludCBldGhUb1Rva2VuQ29udmVyc2lvbjsKCiAgdWludCBwdWJsaWMgbWluQ2FwOwogIHVpbnQgcHVibGljIG1heFAxQ2FwOwogIHVpbnQgcHVibGljIG1heENhcDsKICB1aW50IHB1YmxpYyBldGhSYWlzZWQ7CgogIGFkZHJlc3MgcHVibGljIG11bHRpc2lnQWRkcmVzczsKCiAgdWludCBuZXh0Q29udHJpYnV0b3JUb0NsYWltOwogIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBoYXNDbGFpbWVkRXRoV2hlbkZhaWw7CgogIHVpbnQgbWF4VG9rZW5TdXBwbHk7CiAgYm9vbCBvd25lckhhc0NsYWltZWRUb2tlbnM7CiAgdWludCBjb2ZvdW5kaXRSZXdhcmQ7CiAgYWRkcmVzcyBjb2ZvdW5kaXRBZGRyZXNzOwogIGFkZHJlc3MgY29mb3VuZGl0Q29sZFN0b3JhZ2U7CiAgYm9vbCBjb2ZvdW5kaXRIYXNDbGFpbWVkVG9rZW5zOwoKICAvLwogIC8vIFVubmFtZWQgZnVuY3Rpb24gdGhhdCBydW5zIHdoZW4gZXRoIGlzIHNlbnQgdG8gdGhlIGNvbnRyYWN0CiAgLy8KICBmdW5jdGlvbigpIG5vUmVlbnRyYW5jeSBwYXlhYmxlewogICAgcmVxdWlyZShtc2cudmFsdWUgIT0gMCk7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhyb3cgaWYgdmFsdWUgaXMgMAogICAgcmVxdWlyZShjcm93ZHNhbGVTdGF0ZSAhPSBzdGF0ZS5jcm93ZHNhbGVFbmRlZCk7Ly8gQ2hlY2sgaWYgY3Jvd2RzYWxlIGhhcyBlbmRlZAoKICAgIGJvb2wgc3RhdGVDaGFuZ2VkID0gY2hlY2tDcm93ZHNhbGVTdGF0ZSgpOyAgICAgIC8vIENoZWNrIGJsb2NrcyBhbmQgY2FsaWJyYXRlIGNyb3dkc2FsZSBzdGF0ZQoKICAgIGlmIChjcm93ZHNhbGVTdGF0ZSA9PSBzdGF0ZS5wcmlvcml0eVBhc3MpewogICAgICBpZiAoY29udHJpYnV0b3JMaXN0W21zZy5zZW5kZXJdLmlzQWN0aXZlKXsgICAgLy8gQ2hlY2sgaWYgY29udHJpYnV0b3IgaXMgaW4gcHJpb3JpdHlQYXNzCiAgICAgICAgcHJvY2Vzc1RyYW5zYWN0aW9uKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7ICAvLyBQcm9jZXNzIHRyYW5zYWN0aW9uIGFuZCBpc3N1ZSB0b2tlbnMKICAgICAgfWVsc2V7CiAgICAgICAgcmVmdW5kVHJhbnNhY3Rpb24oc3RhdGVDaGFuZ2VkKTsgICAgICAgICAgICAvLyBTZXQgc3RhdGUgYW5kIHJldHVybiBmdW5kcyBvciB0aHJvdwogICAgICB9CiAgICB9CiAgICBlbHNlIGlmKGNyb3dkc2FsZVN0YXRlID09IHN0YXRlLm9wZW5lZFByaW9yaXR5UGFzcyl7CiAgICAgIGlmIChjb250cmlidXRvckxpc3RbbXNnLnNlbmRlcl0uaXNBY3RpdmUpeyAgICAvLyBDaGVjayBpZiBjb250cmlidXRvciBpcyBpbiBwcmlvcml0eVBhc3MKICAgICAgICBwcm9jZXNzVHJhbnNhY3Rpb24obXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgIC8vIFByb2Nlc3MgdHJhbnNhY3Rpb24gYW5kIGlzc3VlIHRva2VucwogICAgICB9ZWxzZXsKICAgICAgICByZWZ1bmRUcmFuc2FjdGlvbihzdGF0ZUNoYW5nZWQpOyAgICAgICAgICAgIC8vIFNldCBzdGF0ZSBhbmQgcmV0dXJuIGZ1bmRzIG9yIHRocm93CiAgICAgIH0KICAgIH0KICAgIGVsc2UgaWYoY3Jvd2RzYWxlU3RhdGUgPT0gc3RhdGUuY3Jvd2RzYWxlKXsKICAgICAgcHJvY2Vzc1RyYW5zYWN0aW9uKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7ICAgIC8vIFByb2Nlc3MgdHJhbnNhY3Rpb24gYW5kIGlzc3VlIHRva2VucwogICAgfQogICAgZWxzZXsKICAgICAgcmVmdW5kVHJhbnNhY3Rpb24oc3RhdGVDaGFuZ2VkKTsgICAgICAgICAgICAgIC8vIFNldCBzdGF0ZSBhbmQgcmV0dXJuIGZ1bmRzIG9yIHRocm93CiAgICB9CiAgfQoKICAvLwogIC8vIENoZWNrIGNyb3dkc2FsZSBzdGF0ZSBhbmQgY2FsaWJyYXRlIGl0CiAgLy8KICBmdW5jdGlvbiBjaGVja0Nyb3dkc2FsZVN0YXRlKCkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCl7CiAgICBpZiAoZXRoUmFpc2VkID09IG1heENhcCAmJiBjcm93ZHNhbGVTdGF0ZSAhPSBzdGF0ZS5jcm93ZHNhbGVFbmRlZCl7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIG1heCBjYXAgaXMgcmVhY2hlZAogICAgICBjcm93ZHNhbGVTdGF0ZSA9IHN0YXRlLmNyb3dkc2FsZUVuZGVkOwogICAgICBNYXhDYXBSZWFjaGVkKGJsb2NrLm51bWJlcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDbG9zZSB0aGUgY3Jvd2RzYWxlCiAgICAgIENyb3dkc2FsZUVuZGVkKGJsb2NrLm51bWJlcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJhaXNlIGV2ZW50CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGlmIChibG9jay5udW1iZXIgPiBwcmVzYWxlU3RhcnRCbG9jayAmJiBibG9jay5udW1iZXIgPD0gcHJlc2FsZVVubGltaXRlZFN0YXJ0QmxvY2speyAgLy8gQ2hlY2sgaWYgd2UgYXJlIGluIHByZXNhbGUgcGhhc2UKICAgICAgaWYgKGNyb3dkc2FsZVN0YXRlICE9IHN0YXRlLnByaW9yaXR5UGFzcyl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3RhdGUgbmVlZHMgdG8gYmUgY2hhbmdlZAogICAgICAgIGNyb3dkc2FsZVN0YXRlID0gc3RhdGUucHJpb3JpdHlQYXNzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgbmV3IHN0YXRlCiAgICAgICAgUHJlc2FsZVN0YXJ0ZWQoYmxvY2subnVtYmVyKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJhaXNlIGV2ZW50CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH1lbHNlIGlmKGJsb2NrLm51bWJlciA+IHByZXNhbGVVbmxpbWl0ZWRTdGFydEJsb2NrICYmIGJsb2NrLm51bWJlciA8PSBjcm93ZHNhbGVTdGFydEJsb2NrKXsgLy8gQ2hlY2sgaWYgd2UgYXJlIGluIHByZXNhbGUgdW5saW1pdGVkIHBoYXNlCiAgICAgIGlmIChjcm93ZHNhbGVTdGF0ZSAhPSBzdGF0ZS5vcGVuZWRQcmlvcml0eVBhc3MpeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHN0YXRlIG5lZWRzIHRvIGJlIGNoYW5nZWQKICAgICAgICBjcm93ZHNhbGVTdGF0ZSA9IHN0YXRlLm9wZW5lZFByaW9yaXR5UGFzczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IG5ldyBzdGF0ZQogICAgICAgIFByZXNhbGVVbmxpbWl0ZWRTdGFydGVkKGJsb2NrLm51bWJlcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSYWlzZSBldmVudAogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9ZWxzZSBpZihibG9jay5udW1iZXIgPiBjcm93ZHNhbGVTdGFydEJsb2NrICYmIGJsb2NrLm51bWJlciA8PSBjcm93ZHNhbGVFbmRlZEJsb2NrKXsgICAgICAgIC8vIENoZWNrIGlmIHdlIGFyZSBpbiBjcm93ZHNhbGUgc3RhdGUKICAgICAgaWYgKGNyb3dkc2FsZVN0YXRlICE9IHN0YXRlLmNyb3dkc2FsZSl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3RhdGUgbmVlZHMgdG8gYmUgY2hhbmdlZAogICAgICAgIGNyb3dkc2FsZVN0YXRlID0gc3RhdGUuY3Jvd2RzYWxlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgbmV3IHN0YXRlCiAgICAgICAgQ3Jvd2RzYWxlU3RhcnRlZChibG9jay5udW1iZXIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJhaXNlIGV2ZW50CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH1lbHNlewogICAgICBpZiAoY3Jvd2RzYWxlU3RhdGUgIT0gc3RhdGUuY3Jvd2RzYWxlRW5kZWQgJiYgYmxvY2subnVtYmVyID4gY3Jvd2RzYWxlRW5kZWRCbG9jayl7ICAgICAgICAvLyBDaGVjayBpZiBjcm93ZHNhbGUgaXMgb3ZlcgogICAgICAgIGNyb3dkc2FsZVN0YXRlID0gc3RhdGUuY3Jvd2RzYWxlRW5kZWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgbmV3IHN0YXRlCiAgICAgICAgQ3Jvd2RzYWxlRW5kZWQoYmxvY2subnVtYmVyKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJhaXNlIGV2ZW50CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9CgogIC8vCiAgLy8gRGVjaWRlIGlmIHRocm93IG9yIG9ubHkgcmV0dXJuIGV0aGVyCiAgLy8KICBmdW5jdGlvbiByZWZ1bmRUcmFuc2FjdGlvbihib29sIF9zdGF0ZUNoYW5nZWQpIGludGVybmFsewogICAgaWYgKF9zdGF0ZUNoYW5nZWQpewogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICB9ZWxzZXsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CiAgfQoKICAvLwogIC8vIENhbGN1bGF0ZSBob3cgbXVjaCB1c2VyIGNhbiBjb250cmlidXRlCiAgLy8KICBmdW5jdGlvbiBjYWxjdWxhdGVNYXhDb250cmlidXRpb24oYWRkcmVzcyBfY29udHJpYnV0b3IpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgbWF4Q29udHJpYnV0aW9uKXsKICAgIHVpbnQgbWF4Q29udHJpYjsKICAgIGlmIChjcm93ZHNhbGVTdGF0ZSA9PSBzdGF0ZS5wcmlvcml0eVBhc3MpeyAgICAvLyBDaGVjayBpZiB3ZSBhcmUgaW4gcHJpb3JpdHkgcGFzcwogICAgICBtYXhDb250cmliID0gY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0ucHJpb3JpdHlQYXNzQWxsb3dhbmNlIC0gY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0uY29udHJpYnV0aW9uQW1vdW50OwogICAgICBpZiAobWF4Q29udHJpYiA+IChtYXhQMUNhcCAtIGV0aFJhaXNlZCkpeyAgIC8vIENoZWNrIGlmIG1heCBjb250cmlidXRpb24gaXMgbW9yZSB0aGF0IG1heCBjYXAKICAgICAgICBtYXhDb250cmliID0gbWF4UDFDYXAgLSBldGhSYWlzZWQ7ICAgICAgICAvLyBBbHRlciBtYXggY2FwCiAgICAgIH0KICAgIH0KICAgIGVsc2V7CiAgICAgIG1heENvbnRyaWIgPSBtYXhDYXAgLSBldGhSYWlzZWQ7ICAgICAgICAgICAgLy8gQWx0ZXIgbWF4IGNhcAogICAgfQogICAgcmV0dXJuIG1heENvbnRyaWI7CiAgfQoKICAvLwogIC8vIElzc3VlIHRva2VucyBhbmQgcmV0dXJuIGlmIHRoZXJlIGlzIG92ZXJmbG93CiAgLy8KICBmdW5jdGlvbiBwcm9jZXNzVHJhbnNhY3Rpb24oYWRkcmVzcyBfY29udHJpYnV0b3IsIHVpbnQgX2Ftb3VudCkgaW50ZXJuYWx7CiAgICB1aW50IG1heENvbnRyaWJ1dGlvbiA9IGNhbGN1bGF0ZU1heENvbnRyaWJ1dGlvbihfY29udHJpYnV0b3IpOyAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIG1heCB1c2VycyBjb250cmlidXRpb24KICAgIHVpbnQgY29udHJpYnV0aW9uQW1vdW50ID0gX2Ftb3VudDsKICAgIHVpbnQgcmV0dXJuQW1vdW50ID0gMDsKICAgIGlmIChtYXhDb250cmlidXRpb24gPCBfYW1vdW50KXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBtYXggY29udHJpYnV0aW9uIGlzIGxvd2VyIHRoYW4gX2Ftb3VudCBzZW50CiAgICAgIGNvbnRyaWJ1dGlvbkFtb3VudCA9IG1heENvbnRyaWJ1dGlvbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoYXQgdXNlciBjb250aWJ1dGVzIGhpcyBtYXhpbXVtIGFsb3dlZCBjb250cmlidXRpb24KICAgICAgcmV0dXJuQW1vdW50ID0gX2Ftb3VudCAtIG1heENvbnRyaWJ1dGlvbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgaG93bXVjaCBoZSBtdXN0IGdldCBiYWNrCiAgICB9CgogICAgaWYgKGV0aFJhaXNlZCArIGNvbnRyaWJ1dGlvbkFtb3VudCA+IG1pbkNhcCAmJiBtaW5DYXAgPiBldGhSYWlzZWQpIE1pbkNhcFJlYWNoZWQoYmxvY2subnVtYmVyKTsKCiAgICBpZiAoY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0uaXNBY3RpdmUgPT0gZmFsc2UpeyAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY29udHJpYnV0b3IgaGFzIGFscmVhZHkgY29udHJpYnV0ZWQKICAgICAgY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0uaXNBY3RpdmUgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgaGlzIGFjdGl2aXR5IHRvIHRydWUKICAgICAgY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0uY29udHJpYnV0aW9uQW1vdW50ID0gY29udHJpYnV0aW9uQW1vdW50OyAgICAvLyBTZXQgaGlzIGNvbnRyaWJ1dGlvbgogICAgICBjb250cmlidXRvckluZGV4ZXNbbmV4dENvbnRyaWJ1dG9ySW5kZXhdID0gX2NvbnRyaWJ1dG9yOyAgICAgICAgICAgICAgICAgIC8vIFNldCBjb250cmlidXRvcnMgaW5kZXgKICAgICAgbmV4dENvbnRyaWJ1dG9ySW5kZXgrKzsKICAgIH0KICAgIGVsc2V7CiAgICAgIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudCArPSBjb250cmlidXRpb25BbW91bnQ7ICAgLy8gQWRkIGNvbnRyaWJ1dGlvbiBhbW91bnQgdG8gZXhpc3RpbmcgY29udHJpYnV0b3IKICAgIH0KICAgIGV0aFJhaXNlZCArPSBjb250cmlidXRpb25BbW91bnQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdG8gZXRoIHJhaXNlZAoKICAgIHVpbnQgdG9rZW5BbW91bnQgPSBjb250cmlidXRpb25BbW91bnQgKiBldGhUb1Rva2VuQ29udmVyc2lvbjsgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgaG93IG11Y2ggdG9rZW5zIG11c3QgY29udHJpYnV0b3IgZ2V0CiAgICBpZiAodG9rZW5BbW91bnQgPiAwKXsKICAgICAgdG9rZW4ubWludFRva2VucyhfY29udHJpYnV0b3IsIHRva2VuQW1vdW50KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElzc3VlIG5ldyB0b2tlbnMKICAgICAgY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0udG9rZW5zSXNzdWVkICs9IHRva2VuQW1vdW50OyAgICAgICAgICAgICAgICAgIC8vIGxvZyB0b2tlbiBpc3N1YW5jZQogICAgfQogICAgaWYgKHJldHVybkFtb3VudCAhPSAwKSBfY29udHJpYnV0b3IudHJhbnNmZXIocmV0dXJuQW1vdW50KTsgICAgICAgICAgICAgICAgIC8vIFJldHVybiBvdmVyZmxvdyBvZiBldGhlcgogIH0KCiAgLy8KICAvLyBQdXNoIGNvbnRyaWJ1dG9yIGRhdGEgdG8gdGhlIGNvbnRyYWN0IGJlZm9yZSB0aGUgY3Jvd2RzYWxlIHNvIHRoYXQgdGhleSBhcmUgZWxpZ2libGUgZm9yIHByaW9yaXQgcGFzcwogIC8vCiAgZnVuY3Rpb24gZWRpdENvbnRyaWJ1dG9ycyhhZGRyZXNzW10gX2NvbnRyaWJ1dG9yQWRkcmVzc2VzLCB1aW50W10gX2NvbnRyaWJ1dG9yUFBBbGxvd2FuY2VzKSBvbmx5T3duZXJ7CiAgICByZXF1aXJlKF9jb250cmlidXRvckFkZHJlc3Nlcy5sZW5ndGggPT0gX2NvbnRyaWJ1dG9yUFBBbGxvd2FuY2VzLmxlbmd0aCk7IC8vIENoZWNrIGlmIGlucHV0IGRhdGEgaXMgY29ycmVjdAoKICAgIGZvcih1aW50IGNudCA9IDA7IGNudCA8IF9jb250cmlidXRvckFkZHJlc3Nlcy5sZW5ndGg7IGNudCsrKXsKICAgICAgaWYgKGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JBZGRyZXNzZXNbY250XV0uaXNBY3RpdmUpewogICAgICAgIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JBZGRyZXNzZXNbY250XV0ucHJpb3JpdHlQYXNzQWxsb3dhbmNlID0gX2NvbnRyaWJ1dG9yUFBBbGxvd2FuY2VzW2NudF07CiAgICAgIH0KICAgICAgZWxzZXsKICAgICAgICBjb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yQWRkcmVzc2VzW2NudF1dLmlzQWN0aXZlID0gdHJ1ZTsKICAgICAgICBjb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yQWRkcmVzc2VzW2NudF1dLnByaW9yaXR5UGFzc0FsbG93YW5jZSA9IF9jb250cmlidXRvclBQQWxsb3dhbmNlc1tjbnRdOwogICAgICAgIGNvbnRyaWJ1dG9ySW5kZXhlc1tuZXh0Q29udHJpYnV0b3JJbmRleF0gPSBfY29udHJpYnV0b3JBZGRyZXNzZXNbY250XTsKICAgICAgICBuZXh0Q29udHJpYnV0b3JJbmRleCsrOwogICAgICB9CiAgICB9CiAgfQoKICAvLwogIC8vIE1ldGhvZCBpcyBuZWVkZWQgZm9yIHJlY292ZXJpbmcgdG9rZW5zIGFjY2VkZW50YWx5IHNlbnQgdG8gdG9rZW4gYWRkcmVzcwogIC8vCiAgZnVuY3Rpb24gc2FsdmFnZVRva2Vuc0Zyb21Db250cmFjdChhZGRyZXNzIF90b2tlbkFkZHJlc3MsIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIG9ubHlPd25lcnsKICAgIElFUkMyMFRva2VuKF90b2tlbkFkZHJlc3MpLnRyYW5zZmVyKF90bywgX2Ftb3VudCk7CiAgfQoKICAvLwogIC8vIHdpdGhkcmF3RXRoIHdoZW4gbWluaW11bSBjYXAgaXMgcmVhY2hlZAogIC8vCiAgZnVuY3Rpb24gd2l0aGRyYXdFdGgoKSBvbmx5T3duZXJ7CiAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSAhPSAwKTsKICAgIHJlcXVpcmUoZXRoUmFpc2VkID49IG1pbkNhcCk7CgogICAgcGVuZGluZ0V0aFdpdGhkcmF3YWwgPSB0aGlzLmJhbGFuY2U7CiAgfQogIHVpbnQgcGVuZGluZ0V0aFdpdGhkcmF3YWw7CiAgZnVuY3Rpb24gcHVsbEJhbGFuY2UoKXsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBtdWx0aXNpZ0FkZHJlc3MpOwogICAgcmVxdWlyZShwZW5kaW5nRXRoV2l0aGRyYXdhbCA+IDApOwoKICAgIG11bHRpc2lnQWRkcmVzcy50cmFuc2ZlcihwZW5kaW5nRXRoV2l0aGRyYXdhbCk7CiAgICBwZW5kaW5nRXRoV2l0aGRyYXdhbCA9IDA7CiAgfQoKICAvLwogIC8vIFVzZXJzIGNhbiBjbGFpbSB0aGVpciBjb250cmlidXRpb24gaWYgbWluIGNhcCBpcyBub3QgcmFpc2VkCiAgLy8KICBmdW5jdGlvbiBjbGFpbUV0aElmRmFpbGVkKCl7CiAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+IGNyb3dkc2FsZUVuZGVkQmxvY2sgJiYgZXRoUmFpc2VkIDwgbWluQ2FwKTsgICAgLy8gQ2hlY2sgaWYgY3Jvd2RzYWxlIGhhcyBmYWlsZWQKICAgIHJlcXVpcmUoY29udHJpYnV0b3JMaXN0W21zZy5zZW5kZXJdLmNvbnRyaWJ1dGlvbkFtb3VudCA+IDApOyAgICAgICAgICAvLyBDaGVjayBpZiBjb250cmlidXRvciBoYXMgY29udHJpYnV0ZWQgdG8gY3Jvd2RzYWxlRW5kZWRCbG9jawogICAgcmVxdWlyZSghaGFzQ2xhaW1lZEV0aFdoZW5GYWlsW21zZy5zZW5kZXJdKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNvbnRyaWJ1dG9yIGhhcyBhbHJlYWR5IGNsYWltZWQgaGlzIGV0aAoKICAgIHVpbnQgZXRoQ29udHJpYnV0ZWQgPSBjb250cmlidXRvckxpc3RbbXNnLnNlbmRlcl0uY29udHJpYnV0aW9uQW1vdW50OyAvLyBHZXQgY29udHJpYnV0b3JzIGNvbnRyaWJ1dGlvbgogICAgaGFzQ2xhaW1lZEV0aFdoZW5GYWlsW21zZy5zZW5kZXJdID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGF0IGhlIGhhcyBjbGFpbWVkCiAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChldGhDb250cmlidXRlZCkpeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVmdW5kIGV0aAogICAgICBFcnJvclNlbmRpbmdFVEgobXNnLnNlbmRlciwgZXRoQ29udHJpYnV0ZWQpOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGlzc3VlIHJhaXNlIGV2ZW50IGZvciBtYW51YWwgcmVjb3ZlcnkKICAgIH0KICB9CgogIC8vCiAgLy8gT3duZXIgY2FuIGJhdGNoIHJldHVybiBjb250cmlidXRvcnMgY29udHJpYnV0aW9ucyhldGgpCiAgLy8KICBmdW5jdGlvbiBiYXRjaFJldHVybkV0aElmRmFpbGVkKHVpbnQgX251bWJlck9mUmV0dXJucykgb25seU93bmVyewogICAgcmVxdWlyZShibG9jay5udW1iZXIgPiBjcm93ZHNhbGVFbmRlZEJsb2NrICYmIGV0aFJhaXNlZCA8IG1pbkNhcCk7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNyb3dkc2FsZSBoYXMgZmFpbGVkCiAgICBhZGRyZXNzIGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3M7CiAgICB1aW50IGNvbnRyaWJ1dGlvbjsKICAgIGZvciAodWludCBjbnQgPSAwOyBjbnQgPCBfbnVtYmVyT2ZSZXR1cm5zOyBjbnQrKyl7CiAgICAgIGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MgPSBjb250cmlidXRvckluZGV4ZXNbbmV4dENvbnRyaWJ1dG9yVG9DbGFpbV07ICAgICAgICAgLy8gR2V0IG5leHQgdW5jbGFpbWVkIHBhcnRpY2lwYW50CiAgICAgIGlmIChjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzID09IDB4MCkgcmV0dXJuOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYWxsIHRoZSBwYXJ0aWNpcGFudHMgd2VyZSBjb21wZW5zYXRlZAogICAgICBpZiAoIWhhc0NsYWltZWRFdGhXaGVuRmFpbFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXSkgeyAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHBhcnRpY2lwYW50IGhhcyBhbHJlYWR5IGNsYWltZWQKICAgICAgICBjb250cmlidXRpb24gPSBjb250cmlidXRvckxpc3RbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10uY29udHJpYnV0aW9uQW1vdW50OyAvLyBHZXQgY29udHJpYnV0aW9uIG9mIHBhcnRpY2lwYW50CiAgICAgICAgaGFzQ2xhaW1lZEV0aFdoZW5GYWlsW2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoYXQgaGUgaGFzIGNsYWltZWQKICAgICAgICBpZiAoIWN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3Muc2VuZChjb250cmlidXRpb24pKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWZ1bmQgZXRoCiAgICAgICAgICBFcnJvclNlbmRpbmdFVEgoY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcywgY29udHJpYnV0aW9uKTsgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gaXNzdWUgcmFpc2UgZXZlbnQgZm9yIG1hbnVhbCByZWNvdmVyeQogICAgICAgIH0KICAgICAgfQogICAgICBuZXh0Q29udHJpYnV0b3JUb0NsYWltICs9IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcGVhdAogICAgfQogIH0KCiAgLy8KICAvLyBJZiB0aGVyZSB3ZXJlIGFueSBpc3N1ZS9hdHRhY2ggd2l0aCByZWZ1bmQgb3duZXIgY2FuIHdpdGhyYXcgZXRoIGF0IHRoZSBlbmQgZm9yIG1hbnVhbCByZWNvdmVyeQogIC8vCiAgZnVuY3Rpb24gd2l0aGRyYXdSZW1haW5pbmdCYWxhbmNlRm9yTWFudWFsUmVjb3ZlcnkoKSBvbmx5T3duZXJ7CiAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSAhPSAwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSBldGggdG8gY2xhaW0KICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID4gY3Jvd2RzYWxlRW5kZWRCbG9jayk7ICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjcm93ZHNhbGUgaXMgb3ZlcgogICAgcmVxdWlyZShjb250cmlidXRvckluZGV4ZXNbbmV4dENvbnRyaWJ1dG9yVG9DbGFpbV0gPT0gMHgwKTsgIC8vIENoZWNrIGlmIGFsbCB0aGUgdXNlcnMgd2VyZSByZWZ1bmRlZAogICAgbXVsdGlzaWdBZGRyZXNzLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7ICAgICAgICAgICAgICAgICAgICAgIC8vIFdpdGhkcmF3IHRvIG11bHRpc2lnCiAgfQoKICAvLwogIC8vIE93bmVyIGNhbiBzZXQgbXVsdGlzaWcgYWRkcmVzcyBmb3IgY3Jvd2RzYWxlCiAgLy8KICBmdW5jdGlvbiBzZXRNdWx0aXNpZ0FkZHJlc3MoYWRkcmVzcyBfbmV3QWRkcmVzcykgb25seU93bmVyewogICAgbXVsdGlzaWdBZGRyZXNzID0gX25ld0FkZHJlc3M7CiAgfQoKICAvLwogIC8vIE93bmVyIGNhbiBzZXQgdG9rZW4gYWRkcmVzcyB3aGVyZSBtaW50cyB3aWxsIGhhcHBlbgogIC8vCiAgZnVuY3Rpb24gc2V0VG9rZW4oYWRkcmVzcyBfbmV3QWRkcmVzcykgb25seU93bmVyewogICAgdG9rZW4gPSBJVG9rZW4oX25ld0FkZHJlc3MpOwogIH0KCiAgLy8KICAvLyBPd25lciBjYW4gY2xhaW0gdGVhbXMgdG9rZW5zIHdoZW4gY3Jvd2RzYWxlIGhhcyBzdWNjZXNzZnVsbHkgZW5kZWQKICAvLwogIGZ1bmN0aW9uIGNsYWltQ29yZVRlYW1zVG9rZW5zKGFkZHJlc3MgX3RvKSBvbmx5T3duZXJ7CiAgICByZXF1aXJlKGNyb3dkc2FsZVN0YXRlID09IHN0YXRlLmNyb3dkc2FsZUVuZGVkKTsgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNyb3dkc2FsZSBoYXMgZW5kZWQKICAgIHJlcXVpcmUoIW93bmVySGFzQ2xhaW1lZFRva2Vucyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgb3duZXIgaGFzIGFsbHJlYWR5IGNsYWltZWQgdG9rZW5zCgogICAgdWludCBkZXZSZXdhcmQgPSBtYXhUb2tlblN1cHBseSAtIHRva2VuLnRvdGFsU3VwcGx5KCk7CiAgICBpZiAoIWNvZm91bmRpdEhhc0NsYWltZWRUb2tlbnMpIGRldlJld2FyZCAtPSBjb2ZvdW5kaXRSZXdhcmQ7IC8vIElmIGNvZm91bmRpdCBoYXMgY2xhaW1lZCB0b2tlbnMgaXRzIG9rIGlmIG5vdCBzZXQgYXNpZGUgY29mb3VuZGl0UmV3YXJkCiAgICB0b2tlbi5taW50VG9rZW5zKF90bywgZGV2UmV3YXJkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElzc3VlIFRlYW1zIHRva2VucwogICAgb3duZXJIYXNDbGFpbWVkVG9rZW5zID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbG9jayBmdXJ0aGVyIG1pbnRzIGZyb20gdGhpcyBtZXRob2QKICB9CgogIC8vCiAgLy8gQ29mb3VuZGl0IGNhbiBjbGFpbSB0aGVpciB0b2tlbnMKICAvLwogIGZ1bmN0aW9uIGNsYWltQ29mb3VuZGl0VG9rZW5zKCl7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY29mb3VuZGl0QWRkcmVzcyk7ICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc2VuZGVyIGlzIGNvZm91bmRpdAogICAgcmVxdWlyZShjcm93ZHNhbGVTdGF0ZSA9PSBzdGF0ZS5jcm93ZHNhbGVFbmRlZCk7ICAgIC8vIENoZWNrIGlmIGNyb3dkc2FsZSBoYXMgZW5kZWQKICAgIHJlcXVpcmUoIWNvZm91bmRpdEhhc0NsYWltZWRUb2tlbnMpOyAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjb2ZvdW5kaXQgaGFzIGFsbHJlYWR5IGNsYWltZWQgdG9rZW5zCgogICAgdG9rZW4ubWludFRva2Vucyhjb2ZvdW5kaXRDb2xkU3RvcmFnZSwgY29mb3VuZGl0UmV3YXJkKTsgICAgICAgICAgICAgLy8gSXNzdWUgY29mb3VuZGl0IHRva2VucwogICAgY29mb3VuZGl0SGFzQ2xhaW1lZFRva2VucyA9IHRydWU7ICAgICAgICAgICAgICAgICAgIC8vIEJsb2NrIGZ1cnRoZXIgbWludHMgZnJvbSB0aGlzIG1ldGhvZAogIH0KCiAgZnVuY3Rpb24gZ2V0VG9rZW5BZGRyZXNzKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKXsKICAgIHJldHVybiBhZGRyZXNzKHRva2VuKTsKICB9CgogIC8vCiAgLy8gIEJlZm9yZSBjcm93ZHNhbGUgc3RhcnRzIG93bmVyIGNhbiBjYWxpYnJhdGUgYmxvY2tzIG9mIGNyb3dkc2FsZSBzdGFnZXMKICAvLwogIGZ1bmN0aW9uIHNldENyb3dkc2FsZUJsb2Nrcyh1aW50IF9wcmVzYWxlU3RhcnRCbG9jaywgdWludCBfcHJlc2FsZVVubGltaXRlZFN0YXJ0QmxvY2ssIHVpbnQgX2Nyb3dkc2FsZVN0YXJ0QmxvY2ssIHVpbnQgX2Nyb3dkc2FsZUVuZGVkQmxvY2spIG9ubHlPd25lcnsKICAgIHJlcXVpcmUoY3Jvd2RzYWxlU3RhdGUgPT0gc3RhdGUucGVuZGluZ1N0YXJ0KTsgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY3Jvd2RzYWxlIGhhcyBzdGFydGVkCiAgICByZXF1aXJlKF9wcmVzYWxlU3RhcnRCbG9jayAhPSAwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGFueSB2YWx1ZSBpcyAwCiAgICByZXF1aXJlKF9wcmVzYWxlU3RhcnRCbG9jayA8IF9wcmVzYWxlVW5saW1pdGVkU3RhcnRCbG9jayk7ICAgIC8vIENoZWNrIGlmIHByZXNhbGVVbmxpbWl0ZWRTdGFydEJsb2NrIGlzIHNldCBwcm9wZXJseQogICAgcmVxdWlyZShfcHJlc2FsZVVubGltaXRlZFN0YXJ0QmxvY2sgIT0gMCk7ICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhbnkgdmFsdWUgaXMgMAogICAgcmVxdWlyZShfcHJlc2FsZVVubGltaXRlZFN0YXJ0QmxvY2sgPCBfY3Jvd2RzYWxlU3RhcnRCbG9jayk7ICAvLyBDaGVjayBpZiBjcm93ZHNhbGVTdGFydEJsb2NrIGlzIHNldCBwcm9wZXJseQogICAgcmVxdWlyZShfY3Jvd2RzYWxlU3RhcnRCbG9jayAhPSAwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhbnkgdmFsdWUgaXMgMAogICAgcmVxdWlyZShfY3Jvd2RzYWxlU3RhcnRCbG9jayA8IF9jcm93ZHNhbGVFbmRlZEJsb2NrKTsgICAgICAgICAvLyBDaGVjayBpZiBjcm93ZHNhbGVFbmRlZEJsb2NrIGlzIHNldCBwcm9wZXJseQogICAgcmVxdWlyZShfY3Jvd2RzYWxlRW5kZWRCbG9jayAhPSAwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhbnkgdmFsdWUgaXMgMAogICAgcHJlc2FsZVN0YXJ0QmxvY2sgPSBfcHJlc2FsZVN0YXJ0QmxvY2s7CiAgICBwcmVzYWxlVW5saW1pdGVkU3RhcnRCbG9jayA9IF9wcmVzYWxlVW5saW1pdGVkU3RhcnRCbG9jazsKICAgIGNyb3dkc2FsZVN0YXJ0QmxvY2sgPSBfY3Jvd2RzYWxlU3RhcnRCbG9jazsKICAgIGNyb3dkc2FsZUVuZGVkQmxvY2sgPSBfY3Jvd2RzYWxlRW5kZWRCbG9jazsKICB9Cn0KCgoKY29udHJhY3QgRFBQQ3Jvd2RzYWxlIGlzIENyb3dkc2FsZSB7CiAgZnVuY3Rpb24gRFBQQ3Jvd2RzYWxlKCl7CiAgICBwcmVzYWxlU3RhcnRCbG9jayA9IDQyOTE1MTg7CiAgICBwcmVzYWxlVW5saW1pdGVkU3RhcnRCbG9jayA9IDQyOTUxNDY7CiAgICBjcm93ZHNhbGVTdGFydEJsb2NrID0gNDI5ODc3NTsKICAgIGNyb3dkc2FsZUVuZGVkQmxvY2sgPSA0MzEzMjkwOwoKICAgIG1pbkNhcCA9IDgyMzYgKiAxMCoqMTg7CiAgICBtYXhQMUNhcCA9IDEyMDAwICogMTAqKjE4OwogICAgbWF4Q2FwID0gMjAwMDAgKiAxMCoqMTg7CgogICAgZXRoVG9Ub2tlbkNvbnZlcnNpb24gPSAxMjUwOwoKICAgIG1heFRva2VuU3VwcGx5ID0gMTAwMDAwMDAwICogMTAqKjE4OwogICAgY29mb3VuZGl0UmV3YXJkID0gODAwMDAwMCAqIDEwKioxODsKICAgIGNvZm91bmRpdEFkZHJlc3MgPSAweDk4OGMzZUE1NTU0ZjNEMmZCNUVDQjRkQzVjMzUxMjZlRWYzQjhhNUQ7CiAgICBjb2ZvdW5kaXRDb2xkU3RvcmFnZSA9IDB4OEMwREI2OTVkZTg3NmE0MmNFMmUxMzNjYTAwZmRGNTlBOTE2NjcwODsKICB9Cn0='.
	

]
