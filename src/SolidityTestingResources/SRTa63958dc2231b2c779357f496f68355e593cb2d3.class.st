Class {
	#name : #SRTa63958dc2231b2c779357f496f68355e593cb2d3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa63958dc2231b2c779357f496f68355e593cb2d3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCgpjb250cmFjdCBQcmVTYWxlVG9rZW4gewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CiAgICBldmVudCBBbGxvd0V4Y2hhbmdlcihhZGRyZXNzIGluZGV4ZWQgZXhjaGFuZ2VyKTsKICAgIGV2ZW50IFJldm9rZUV4Y2hhbmdlcihhZGRyZXNzIGluZGV4ZWQgZXhjaGFuZ2VyKTsKICAgIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CiAgICBldmVudCBNaW50RmluaXNoZWQoKTsKICAgIGV2ZW50IEV4Y2hhbmdlKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50MjU2IGV4Y2hhbmdlZFZhbHVlLCBzdHJpbmcgc3ltYm9sLCB1aW50MjU2IGdyYW50ZWRWYWx1ZSk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKCiAgICAvLy8gVGhlIG93bmVyIG9mIHRoZSBjb250cmFjdC4KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIC8vLyBUaGUgdG90YWwgbnVtYmVyIG9mIG1pbnRlZCB0b2tlbnMsIGV4Y2x1ZGluZyBkZXN0cm95ZWQgdG9rZW5zLgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLy8vIFRoZSB0b2tlbiBiYWxhbmNlIG9mIGVhY2ggYWRkcmVzcy4KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgICAvLy8gVGhlIGZ1bGwgbGlzdCBvZiBhZGRyZXNzZXMgd2UgaGF2ZSBtaW50ZWQgdG9rZW5zIGZvciwgc3RvcmVkIGZvcgogICAgLy8vIGV4Y2hhbmdlIHB1cnBvc2VzLgogICAgYWRkcmVzc1tdIHB1YmxpYyBob2xkZXJzOwoKICAgIC8vLyBXaGV0aGVyIHRoZSB0b2tlbiBpcyBzdGlsbCBtaW50YWJsZS4KICAgIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKICAgIC8vLyBBZGRyZXNzZXMgYWxsb3dlZCB0byBleGNoYW5nZSB0aGUgcHJlc2FsZSB0b2tlbnMgZm9yIHRoZSBmaW5hbAogICAgLy8vIGFuZC9vciBpbnRlcm1lZGlhcnkgdG9rZW5zLgogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBleGNoYW5nZXJzOwoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUV4Y2hhbmdlcigpIHsKICAgICAgICByZXF1aXJlKGV4Y2hhbmdlcnNbbXNnLnNlbmRlcl0pOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gUHJlU2FsZVRva2VuKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dFeGNoYW5nZXIoYWRkcmVzcyBfZXhjaGFuZ2VyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1pbnRpbmdGaW5pc2hlZCk7CiAgICAgICAgcmVxdWlyZShfZXhjaGFuZ2VyICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZSghZXhjaGFuZ2Vyc1tfZXhjaGFuZ2VyXSk7CgogICAgICAgIGV4Y2hhbmdlcnNbX2V4Y2hhbmdlcl0gPSB0cnVlOwogICAgICAgIEFsbG93RXhjaGFuZ2VyKF9leGNoYW5nZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGV4Y2hhbmdlKAogICAgICAgIGFkZHJlc3MgX2Zyb20sCiAgICAgICAgdWludDI1NiBfYW1vdW50LAogICAgICAgIHN0cmluZyBfc3ltYm9sLAogICAgICAgIHVpbnQyNTYgX2dyYW50ZWRWYWx1ZQogICAgKQogICAgICAgIG9ubHlFeGNoYW5nZXIKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUobWludGluZ0ZpbmlzaGVkKTsgLy8gQWx3YXlzIHRydWUgZHVlIHRvIGV4Y2hhbmdlcnMgcmVxdWlyaW5nIHRoZSBzYW1lIGNvbmRpdGlvbgogICAgICAgIHJlcXVpcmUoX2Zyb20gIT0gMHgwKTsKICAgICAgICByZXF1aXJlKCFleGNoYW5nZXJzW19mcm9tXSk7CiAgICAgICAgcmVxdWlyZShfYW1vdW50ID4gMCk7CiAgICAgICAgcmVxdWlyZShfYW1vdW50IDw9IGJhbGFuY2VzW19mcm9tXSk7CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQoX2Ftb3VudCk7CiAgICAgICAgRXhjaGFuZ2UoCiAgICAgICAgICAgIF9mcm9tLAogICAgICAgICAgICBfYW1vdW50LAogICAgICAgICAgICBfc3ltYm9sLAogICAgICAgICAgICBfZ3JhbnRlZFZhbHVlCiAgICAgICAgKTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgbXNnLnNlbmRlciwgX2Ftb3VudCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwoKICAgICAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgICAgIE1pbnRGaW5pc2hlZCgpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKICAgICAgICByZXF1aXJlKF9hbW91bnQgPiAwKTsKCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgICAgIGhvbGRlcnMucHVzaChfdG8pOwogICAgICAgIE1pbnQoX3RvLCBfYW1vdW50KTsKICAgICAgICBUcmFuc2ZlcigweDAsIF90bywgX2Ftb3VudCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHJldm9rZUV4Y2hhbmdlcihhZGRyZXNzIF9leGNoYW5nZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobWludGluZ0ZpbmlzaGVkKTsKICAgICAgICByZXF1aXJlKF9leGNoYW5nZXIgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKGV4Y2hhbmdlcnNbX2V4Y2hhbmdlcl0pOwoKICAgICAgICBkZWxldGUgZXhjaGFuZ2Vyc1tfZXhjaGFuZ2VyXTsKICAgICAgICBSZXZva2VFeGNoYW5nZXIoX2V4Y2hhbmdlcik7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfdG8pIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBfdG8pOwogICAgICAgIG93bmVyID0gX3RvOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KfQoKCmNvbnRyYWN0IFByZVNhbGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CiAgICBldmVudCBXYWxsZXRDaGFuZ2VkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c1dhbGxldCwgYWRkcmVzcyBpbmRleGVkIG5ld1dhbGxldCk7CiAgICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgUGF1c2UoKTsKICAgIGV2ZW50IFVucGF1c2UoKTsKICAgIGV2ZW50IFdpdGhkcmF3YWwoYWRkcmVzcyBpbmRleGVkIHdhbGxldCwgdWludDI1NiB3ZWlBbW91bnQpOwogICAgZXZlbnQgRXh0ZW5kZWQodWludDI1NiB1bnRpbCk7CiAgICBldmVudCBGaW5hbGl6ZWQoKTsKICAgIGV2ZW50IFJlZnVuZGluZygpOwogICAgZXZlbnQgUmVmdW5kZWQoYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHdlaUFtb3VudCk7CiAgICBldmVudCBXaGl0ZWxpc3RlZChhZGRyZXNzIGluZGV4ZWQgcGFydGljaXBhbnQsIHVpbnQyNTYgd2VpQW1vdW50LCB1aW50MzIgYm9udXNSYXRlKTsKCiAgICAvLy8gVGhlIG93bmVyIG9mIHRoZSBjb250cmFjdC4KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIC8vLyBUaGUgdG9rZW4gd2UncmUgc2VsbGluZy4KICAgIFByZVNhbGVUb2tlbiBwdWJsaWMgdG9rZW47CgogICAgLy8vIFRoZSBtaW5pbXVtIGdvYWwgdG8gcmVhY2guIElmIHRoZSBnb2FsIGlzIG5vdCByZWFjaGVkLCBmaW5pc2hpbmcKICAgIC8vLyB0aGUgc2FsZSB3aWxsIGVuYWJsZSByZWZ1bmRzLgogICAgdWludDI1NiBwdWJsaWMgZ29hbDsKCiAgICAvLy8gVGhlIHNhbGUgcGVyaW9kLgogICAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lOwogICAgdWludDI1NiBwdWJsaWMgZW5kVGltZTsKICAgIHVpbnQyNTYgcHVibGljIHRpbWVFeHRlbnNpb247CgogICAgLy8vIFRoZSBudW1uYmVyIG9mIHRva2VucyB0byBtaW50IHBlciB3ZWkuCiAgICB1aW50MjU2IHB1YmxpYyByYXRlOwoKICAgIC8vLyBUaGUgdG90YWwgbnVtYmVyIG9mIHdlaSByYWlzZWQuIE5vdGUgdGhhdCB0aGUgY29udHJhY3QncyBiYWxhbmNlIG1heQogICAgLy8vIGRpZmZlciBmcm9tIHRoaXMgdmFsdWUgaWYgc29tZW9uZSBoYXMgZGVjaWRlZCB0byBmb3JjZWZ1bGx5IHNlbmQgdXMKICAgIC8vLyBldGhlci4KICAgIHVpbnQyNTYgcHVibGljIHdlaVJhaXNlZDsKCiAgICAvLy8gVGhlIHdhbGxldCB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgY29udHJhY3QncyBiYWxhbmNlIG9uY2UgdGhlIHNhbGUKICAgIC8vLyBmaW5pc2hlcyBhbmQgdGhlIG1pbmltdW0gZ29hbCBpcyBtZXQuCiAgICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CgogICAgLy8vIFRoZSBsaXN0IG9mIGFkZHJlc3NlcyB0aGF0IGFyZSBhbGxvd2VkIHRvIHBhcnRpY2lwYXRlIGluIHRoZSBzYWxlLAogICAgLy8vIHVwIHRvIHdoYXQgYW1vdW50LCBhbmQgYW55IHNwZWNpYWwgcmF0ZSB0aGV5IG1heSBoYXZlLgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyB3aGl0ZWxpc3RlZDsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MzIpIHB1YmxpYyBib251c1JhdGVzOwoKICAgIC8vLyBUaGUgYW1vdW50IG9mIHdlaSBpbnZlc3RlZCBieSBlYWNoIGludmVzdG9yLgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkZXBvc2l0ZWQ7CgogICAgLy8vIEFuIGVudW1lcmFibGUgbGlzdCBvZiBpbnZlc3RvcnMuCiAgICBhZGRyZXNzW10gcHVibGljIGludmVzdG9yczsKCiAgICAvLy8gV2hldGhlciB0aGUgc2FsZSBpcyBwYXVzZWQuCiAgICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCiAgICAvLy8gV2hldGhlciB0aGUgc2FsZSBoYXMgZmluaXNoZWQsIGFuZCB3aGVuLgogICAgYm9vbCBwdWJsaWMgZmluaXNoZWQgPSBmYWxzZTsKICAgIHVpbnQyNTYgcHVibGljIGZpbmlzaGVkQXQ7CgogICAgLy8vIFdoZXRoZXIgd2UncmUgYWNjZXB0aW5nIHJlZnVuZHMuCiAgICBib29sIHB1YmxpYyByZWZ1bmRpbmcgPSBmYWxzZTsKCiAgICAvLy8gVGhlIHRvdGFsIG51bWJlciBvZiB3ZWkgcmVmdW5kZWQuCiAgICB1aW50MjU2IHB1YmxpYyB3ZWlSZWZ1bmRlZDsKCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHNhbGVPcGVuKCkgewogICAgICAgIHJlcXVpcmUoIWZpbmlzaGVkKTsKICAgICAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgICAgIHJlcXVpcmUobm93ID49IHN0YXJ0VGltZSk7CiAgICAgICAgcmVxdWlyZShub3cgPD0gZW5kVGltZSArIHRpbWVFeHRlbnNpb24pOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gUHJlU2FsZSgKICAgICAgICB1aW50MjU2IF9nb2FsLAogICAgICAgIHVpbnQyNTYgX3N0YXJ0VGltZSwKICAgICAgICB1aW50MjU2IF9lbmRUaW1lLAogICAgICAgIHVpbnQyNTYgX3JhdGUsCiAgICAgICAgYWRkcmVzcyBfd2FsbGV0CiAgICApCiAgICAgICAgcHVibGljCiAgICAgICAgcGF5YWJsZQogICAgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CiAgICAgICAgcmVxdWlyZShfZ29hbCA+IDApOwogICAgICAgIHJlcXVpcmUoX3N0YXJ0VGltZSA+PSBub3cpOwogICAgICAgIHJlcXVpcmUoX2VuZFRpbWUgPj0gX3N0YXJ0VGltZSk7CiAgICAgICAgcmVxdWlyZShfcmF0ZSA+IDApOwogICAgICAgIHJlcXVpcmUoX3dhbGxldCAhPSAweDApOwoKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgZ29hbCA9IF9nb2FsOwogICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICAgICAgZW5kVGltZSA9IF9lbmRUaW1lOwogICAgICAgIHJhdGUgPSBfcmF0ZTsKICAgICAgICB3YWxsZXQgPSBfd2FsbGV0OwogICAgICAgIHRva2VuID0gbmV3IFByZVNhbGVUb2tlbigpOwoKICAgICAgICB3YWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIF9iZW5lZmljaWFyeSkgc2FsZU9wZW4gcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CgogICAgICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwogICAgICAgIHVpbnQyNTYgbmV3RGVwb3NpdGVkID0gZGVwb3NpdGVkW19iZW5lZmljaWFyeV0uYWRkKHdlaUFtb3VudCk7CgogICAgICAgIHJlcXVpcmUobmV3RGVwb3NpdGVkIDw9IHdoaXRlbGlzdGVkW19iZW5lZmljaWFyeV0pOwoKICAgICAgICB1aW50MzIgYm9udXNSYXRlID0gYm9udXNSYXRlc1tfYmVuZWZpY2lhcnldOwogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gd2VpQW1vdW50Lm11bChyYXRlKS5tdWwoMTAwMCArIGJvbnVzUmF0ZSkuZGl2KDEwMDApOwoKICAgICAgICBkZXBvc2l0ZWRbX2JlbmVmaWNpYXJ5XSA9IG5ld0RlcG9zaXRlZDsKICAgICAgICBpbnZlc3RvcnMucHVzaChfYmVuZWZpY2lhcnkpOwoKICAgICAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgICAgIHRva2VuLm1pbnQoX2JlbmVmaWNpYXJ5LCB0b2tlbnMpOwogICAgICAgIFRva2VuUHVyY2hhc2UoCiAgICAgICAgICAgIG1zZy5zZW5kZXIsCiAgICAgICAgICAgIF9iZW5lZmljaWFyeSwKICAgICAgICAgICAgd2VpQW1vdW50LAogICAgICAgICAgICB0b2tlbnMKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVdhbGxldChhZGRyZXNzIF93YWxsZXQpIG9ubHlPd25lciBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShfd2FsbGV0ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKCiAgICAgICAgV2FsbGV0Q2hhbmdlZCh3YWxsZXQsIF93YWxsZXQpOwogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7CgogICAgICAgIHdhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGV4dGVuZFRpbWUodWludDI1NiBfdGltZUV4dGVuc2lvbikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSghZmluaXNoZWQpOwogICAgICAgIHJlcXVpcmUobm93IDwgZW5kVGltZSArIHRpbWVFeHRlbnNpb24pOwogICAgICAgIHJlcXVpcmUoX3RpbWVFeHRlbnNpb24gPiAwKTsKCiAgICAgICAgdGltZUV4dGVuc2lvbiA9IHRpbWVFeHRlbnNpb24uYWRkKF90aW1lRXh0ZW5zaW9uKTsKICAgICAgICByZXF1aXJlKHRpbWVFeHRlbnNpb24gPD0gNyBkYXlzKTsKCiAgICAgICAgRXh0ZW5kZWQoZW5kVGltZS5hZGQodGltZUV4dGVuc2lvbikpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmlzaCgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoIWZpbmlzaGVkKTsKICAgICAgICByZXF1aXJlKG5vdyA+IGVuZFRpbWUgKyB0aW1lRXh0ZW5zaW9uKTsKCiAgICAgICAgZmluaXNoZWQgPSB0cnVlOwogICAgICAgIGZpbmlzaGVkQXQgPSBub3c7CiAgICAgICAgdG9rZW4uZmluaXNoTWludGluZygpOwoKICAgICAgICBpZiAoZ29hbFJlYWNoZWQoKSkgewogICAgICAgICAgICB0b2tlbi50cmFuc2Zlck93bmVyc2hpcChvd25lcik7CiAgICAgICAgICAgIHdpdGhkcmF3KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVmdW5kaW5nID0gdHJ1ZTsKICAgICAgICAgICAgUmVmdW5kaW5nKCk7CiAgICAgICAgfQoKICAgICAgICBGaW5hbGl6ZWQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICAgICAgcGF1c2VkID0gdHJ1ZTsKICAgICAgICBQYXVzZSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlZnVuZChhZGRyZXNzIF9pbnZlc3RvcikgcHVibGljIHsKICAgICAgICByZXF1aXJlKGZpbmlzaGVkKTsKICAgICAgICByZXF1aXJlKHJlZnVuZGluZyk7CiAgICAgICAgcmVxdWlyZShkZXBvc2l0ZWRbX2ludmVzdG9yXSA+IDApOwoKICAgICAgICB1aW50MjU2IHdlaUFtb3VudCA9IGRlcG9zaXRlZFtfaW52ZXN0b3JdOwogICAgICAgIGRlcG9zaXRlZFtfaW52ZXN0b3JdID0gMDsKICAgICAgICB3ZWlSZWZ1bmRlZCA9IHdlaVJlZnVuZGVkLmFkZCh3ZWlBbW91bnQpOwogICAgICAgIFJlZnVuZGVkKF9pbnZlc3Rvciwgd2VpQW1vdW50KTsKCiAgICAgICAgX2ludmVzdG9yLnRyYW5zZmVyKHdlaUFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfdG8pIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBfdG8pOwogICAgICAgIG93bmVyID0gX3RvOwogICAgfQoKICAgIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKHBhdXNlZCk7CiAgICAgICAgcGF1c2VkID0gZmFsc2U7CiAgICAgICAgVW5wYXVzZSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdoaXRlbGlzdCgKICAgICAgICBhZGRyZXNzIF9wYXJ0aWNpcGFudCwKICAgICAgICB1aW50MjU2IF93ZWlBbW91bnQsCiAgICAgICAgdWludDMyIF9ib251c1JhdGUKICAgICkKICAgICAgICBvbmx5T3duZXIKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICByZXF1aXJlKF9wYXJ0aWNpcGFudCAhPSAweDApOwogICAgICAgIHJlcXVpcmUoX2JvbnVzUmF0ZSA8PSAxMDAwKTsKCiAgICAgICAgd2hpdGVsaXN0ZWRbX3BhcnRpY2lwYW50XSA9IF93ZWlBbW91bnQ7CiAgICAgICAgYm9udXNSYXRlc1tfcGFydGljaXBhbnRdID0gX2JvbnVzUmF0ZTsKICAgICAgICBXaGl0ZWxpc3RlZChfcGFydGljaXBhbnQsIF93ZWlBbW91bnQsIF9ib251c1JhdGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShnb2FsUmVhY2hlZCgpIHx8IChmaW5pc2hlZCAmJiBub3cgPiBmaW5pc2hlZEF0ICsgMTQgZGF5cykpOwoKICAgICAgICB1aW50MjU2IHdlaUFtb3VudCA9IHRoaXMuYmFsYW5jZTsKCiAgICAgICAgaWYgKHdlaUFtb3VudCA+IDApIHsKICAgICAgICAgICAgd2FsbGV0LnRyYW5zZmVyKHdlaUFtb3VudCk7CiAgICAgICAgICAgIFdpdGhkcmF3YWwod2FsbGV0LCB3ZWlBbW91bnQpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnb2FsUmVhY2hlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHdlaVJhaXNlZCA+PSBnb2FsOwogICAgfQp9'.
	

]
