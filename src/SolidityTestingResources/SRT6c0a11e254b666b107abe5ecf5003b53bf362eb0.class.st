Class {
	#name : #SRT6c0a11e254b666b107abe5ecf5003b53bf362eb0,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6c0a11e254b666b107abe5ecf5003b53bf362eb0 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7Cgpjb250cmFjdCBCZHBCYXNlRGF0YSB7CgoJYWRkcmVzcyBwdWJsaWMgb3duZXJBZGRyZXNzOwoKCWFkZHJlc3MgcHVibGljIG1hbmFnZXJBZGRyZXNzOwoKCWFkZHJlc3NbMTZdIHB1YmxpYyBjb250cmFjdHM7CgoJYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoJYm9vbCBwdWJsaWMgc2V0dXBDb21wbGV0ZSA9IGZhbHNlOwoKCWJ5dGVzOCBwdWJsaWMgdmVyc2lvbjsKCn0KbGlicmFyeSBCZHBDb250cmFjdHMgewoKCWZ1bmN0aW9uIGdldEJkcEVudHJ5UG9pbnQoYWRkcmVzc1sxNl0gX2NvbnRyYWN0cykgcHVyZSBpbnRlcm5hbCByZXR1cm5zIChhZGRyZXNzKSB7CgkJcmV0dXJuIF9jb250cmFjdHNbMF07Cgl9CgoJZnVuY3Rpb24gZ2V0QmRwQ29udHJvbGxlcihhZGRyZXNzWzE2XSBfY29udHJhY3RzKSBwdXJlIGludGVybmFsIHJldHVybnMgKGFkZHJlc3MpIHsKCQlyZXR1cm4gX2NvbnRyYWN0c1sxXTsKCX0KCglmdW5jdGlvbiBnZXRCZHBDb250cm9sbGVySGVscGVyKGFkZHJlc3NbMTZdIF9jb250cmFjdHMpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAoYWRkcmVzcykgewoJCXJldHVybiBfY29udHJhY3RzWzNdOwoJfQoKCWZ1bmN0aW9uIGdldEJkcERhdGFTdG9yYWdlKGFkZHJlc3NbMTZdIF9jb250cmFjdHMpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAoYWRkcmVzcykgewoJCXJldHVybiBfY29udHJhY3RzWzRdOwoJfQoKCWZ1bmN0aW9uIGdldEJkcEltYWdlU3RvcmFnZShhZGRyZXNzWzE2XSBfY29udHJhY3RzKSBwdXJlIGludGVybmFsIHJldHVybnMgKGFkZHJlc3MpIHsKCQlyZXR1cm4gX2NvbnRyYWN0c1s1XTsKCX0KCglmdW5jdGlvbiBnZXRCZHBPd25lcnNoaXBTdG9yYWdlKGFkZHJlc3NbMTZdIF9jb250cmFjdHMpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAoYWRkcmVzcykgewoJCXJldHVybiBfY29udHJhY3RzWzZdOwoJfQoKCWZ1bmN0aW9uIGdldEJkcFByaWNlU3RvcmFnZShhZGRyZXNzWzE2XSBfY29udHJhY3RzKSBwdXJlIGludGVybmFsIHJldHVybnMgKGFkZHJlc3MpIHsKCQlyZXR1cm4gX2NvbnRyYWN0c1s3XTsKCX0KCn0KCmNvbnRyYWN0IEJkcEJhc2UgaXMgQmRwQmFzZURhdGEgewoKCW1vZGlmaWVyIG9ubHlPd25lcigpIHsKCQlyZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXJBZGRyZXNzKTsKCQlfOwoJfQoKCW1vZGlmaWVyIG9ubHlBdXRob3JpemVkKCkgewoJCXJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lckFkZHJlc3MgfHwgbXNnLnNlbmRlciA9PSBtYW5hZ2VyQWRkcmVzcyk7CgkJXzsKCX0KCgltb2RpZmllciB3aGVuQ29udHJhY3RBY3RpdmUoKSB7CgkJcmVxdWlyZSghcGF1c2VkICYmIHNldHVwQ29tcGxldGUpOwoJCV87Cgl9CgoJbW9kaWZpZXIgc3RvcmFnZUFjY2Vzc0NvbnRyb2woKSB7CgkJcmVxdWlyZSgKCQkJKCEgc2V0dXBDb21wbGV0ZSAmJiAobXNnLnNlbmRlciA9PSBvd25lckFkZHJlc3MgfHwgbXNnLnNlbmRlciA9PSBtYW5hZ2VyQWRkcmVzcykpCgkJCXx8IChzZXR1cENvbXBsZXRlICYmICFwYXVzZWQgJiYgKG1zZy5zZW5kZXIgPT0gQmRwQ29udHJhY3RzLmdldEJkcEVudHJ5UG9pbnQoY29udHJhY3RzKSkpCgkJKTsKCQlfOwoJfQoKCWZ1bmN0aW9uIHNldE93bmVyKGFkZHJlc3MgX25ld093bmVyKSBleHRlcm5hbCBvbmx5T3duZXIgewoJCXJlcXVpcmUoX25ld093bmVyICE9IGFkZHJlc3MoMCkpOwoJCW93bmVyQWRkcmVzcyA9IF9uZXdPd25lcjsKCX0KCglmdW5jdGlvbiBzZXRNYW5hZ2VyKGFkZHJlc3MgX25ld01hbmFnZXIpIGV4dGVybmFsIG9ubHlPd25lciB7CgkJcmVxdWlyZShfbmV3TWFuYWdlciAhPSBhZGRyZXNzKDApKTsKCQltYW5hZ2VyQWRkcmVzcyA9IF9uZXdNYW5hZ2VyOwoJfQoKCWZ1bmN0aW9uIHNldENvbnRyYWN0cyhhZGRyZXNzWzE2XSBfY29udHJhY3RzKSBleHRlcm5hbCBvbmx5T3duZXIgewoJCWNvbnRyYWN0cyA9IF9jb250cmFjdHM7Cgl9CgoJZnVuY3Rpb24gcGF1c2UoKSBleHRlcm5hbCBvbmx5QXV0aG9yaXplZCB7CgkJcGF1c2VkID0gdHJ1ZTsKCX0KCglmdW5jdGlvbiB1bnBhdXNlKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKCQlwYXVzZWQgPSBmYWxzZTsKCX0KCglmdW5jdGlvbiBzZXRTZXR1cENvbXBsZXRlKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKCQlzZXR1cENvbXBsZXRlID0gdHJ1ZTsKCX0KCglmdW5jdGlvbiBraWxsKCkgcHVibGljIG9ubHlPd25lciB7CgkJc2VsZmRlc3RydWN0KG93bmVyQWRkcmVzcyk7Cgl9Cgp9CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgQmRwRGF0YVN0b3JhZ2UgaXMgQmRwQmFzZSB7CgoJdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgoJc3RydWN0IFJlZ2lvbiB7CgkJdWludDI1NiB4MTsKCQl1aW50MjU2IHkxOwoJCXVpbnQyNTYgeDI7CgkJdWludDI1NiB5MjsKCQl1aW50MjU2IGN1cnJlbnRJbWFnZUlkOwoJCXVpbnQyNTYgbmV4dEltYWdlSWQ7CgkJdWludDhbMTI4XSB1cmw7CgkJdWludDI1NiBjdXJyZW50UGl4ZWxQcmljZTsKCQl1aW50MjU2IGJsb2NrVXBkYXRlZEF0OwoJCXVpbnQyNTYgdXBkYXRlZEF0OwoJCXVpbnQyNTYgcHVyY2hhc2VkQXQ7CgkJdWludDI1NiBwdXJjaGFzZWRQaXhlbFByaWNlOwoJfQoKCXVpbnQyNTYgcHVibGljIGxhc3RSZWdpb25JZCA9IDA7CgoJbWFwcGluZyAodWludDI1NiA9PiBSZWdpb24pIHB1YmxpYyBkYXRhOwoKCglmdW5jdGlvbiBnZXRMYXN0UmVnaW9uSWQoKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CgkJcmV0dXJuIGxhc3RSZWdpb25JZDsKCX0KCglmdW5jdGlvbiBnZXROZXh0UmVnaW9uSWQoKSBwdWJsaWMgc3RvcmFnZUFjY2Vzc0NvbnRyb2wgcmV0dXJucyAodWludDI1NikgewoJCWxhc3RSZWdpb25JZCA9IGxhc3RSZWdpb25JZC5hZGQoMSk7CgkJcmV0dXJuIGxhc3RSZWdpb25JZDsKCX0KCglmdW5jdGlvbiBkZWxldGVSZWdpb25EYXRhKHVpbnQyNTYgX2lkKSBwdWJsaWMgc3RvcmFnZUFjY2Vzc0NvbnRyb2wgewoJCWRlbGV0ZSBkYXRhW19pZF07Cgl9CgoJZnVuY3Rpb24gZ2V0UmVnaW9uQ29vcmRpbmF0ZXModWludDI1NiBfaWQpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQyNTYsIHVpbnQyNTYsIHVpbnQyNTYsIHVpbnQyNTYpIHsKCQlyZXR1cm4gKGRhdGFbX2lkXS54MSwgZGF0YVtfaWRdLnkxLCBkYXRhW19pZF0ueDIsIGRhdGFbX2lkXS55Mik7Cgl9CgoJZnVuY3Rpb24gc2V0UmVnaW9uQ29vcmRpbmF0ZXModWludDI1NiBfaWQsIHVpbnQyNTYgX3gxLCB1aW50MjU2IF95MSwgdWludDI1NiBfeDIsIHVpbnQyNTYgX3kyKSBwdWJsaWMgc3RvcmFnZUFjY2Vzc0NvbnRyb2wgewoJCWRhdGFbX2lkXS54MSA9IF94MTsKCQlkYXRhW19pZF0ueTEgPSBfeTE7CgkJZGF0YVtfaWRdLngyID0gX3gyOwoJCWRhdGFbX2lkXS55MiA9IF95MjsKCX0KCglmdW5jdGlvbiBnZXRSZWdpb25DdXJyZW50SW1hZ2VJZCh1aW50MjU2IF9pZCkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewoJCXJldHVybiBkYXRhW19pZF0uY3VycmVudEltYWdlSWQ7Cgl9CgoJZnVuY3Rpb24gc2V0UmVnaW9uQ3VycmVudEltYWdlSWQodWludDI1NiBfaWQsIHVpbnQyNTYgX2N1cnJlbnRJbWFnZUlkKSBwdWJsaWMgc3RvcmFnZUFjY2Vzc0NvbnRyb2wgewoJCWRhdGFbX2lkXS5jdXJyZW50SW1hZ2VJZCA9IF9jdXJyZW50SW1hZ2VJZDsKCX0KCglmdW5jdGlvbiBnZXRSZWdpb25OZXh0SW1hZ2VJZCh1aW50MjU2IF9pZCkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewoJCXJldHVybiBkYXRhW19pZF0ubmV4dEltYWdlSWQ7Cgl9CgoJZnVuY3Rpb24gc2V0UmVnaW9uTmV4dEltYWdlSWQodWludDI1NiBfaWQsIHVpbnQyNTYgX25leHRJbWFnZUlkKSBwdWJsaWMgc3RvcmFnZUFjY2Vzc0NvbnRyb2wgewoJCWRhdGFbX2lkXS5uZXh0SW1hZ2VJZCA9IF9uZXh0SW1hZ2VJZDsKCX0KCglmdW5jdGlvbiBnZXRSZWdpb25VcmwodWludDI1NiBfaWQpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQ4WzEyOF0pIHsKCQlyZXR1cm4gZGF0YVtfaWRdLnVybDsKCX0KCglmdW5jdGlvbiBzZXRSZWdpb25VcmwodWludDI1NiBfaWQsIHVpbnQ4WzEyOF0gX3VybCkgcHVibGljIHN0b3JhZ2VBY2Nlc3NDb250cm9sIHsKCQlkYXRhW19pZF0udXJsID0gX3VybDsKCX0KCglmdW5jdGlvbiBnZXRSZWdpb25DdXJyZW50UGl4ZWxQcmljZSh1aW50MjU2IF9pZCkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewoJCXJldHVybiBkYXRhW19pZF0uY3VycmVudFBpeGVsUHJpY2U7Cgl9CgoJZnVuY3Rpb24gc2V0UmVnaW9uQ3VycmVudFBpeGVsUHJpY2UodWludDI1NiBfaWQsIHVpbnQyNTYgX2N1cnJlbnRQaXhlbFByaWNlKSBwdWJsaWMgc3RvcmFnZUFjY2Vzc0NvbnRyb2wgewoJCWRhdGFbX2lkXS5jdXJyZW50UGl4ZWxQcmljZSA9IF9jdXJyZW50UGl4ZWxQcmljZTsKCX0KCglmdW5jdGlvbiBnZXRSZWdpb25CbG9ja1VwZGF0ZWRBdCh1aW50MjU2IF9pZCkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewoJCXJldHVybiBkYXRhW19pZF0uYmxvY2tVcGRhdGVkQXQ7Cgl9CgoJZnVuY3Rpb24gc2V0UmVnaW9uQmxvY2tVcGRhdGVkQXQodWludDI1NiBfaWQsIHVpbnQyNTYgX2Jsb2NrVXBkYXRlZEF0KSBwdWJsaWMgc3RvcmFnZUFjY2Vzc0NvbnRyb2wgewoJCWRhdGFbX2lkXS5ibG9ja1VwZGF0ZWRBdCA9IF9ibG9ja1VwZGF0ZWRBdDsKCX0KCglmdW5jdGlvbiBnZXRSZWdpb25VcGRhdGVkQXQodWludDI1NiBfaWQpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKCQlyZXR1cm4gZGF0YVtfaWRdLnVwZGF0ZWRBdDsKCX0KCglmdW5jdGlvbiBzZXRSZWdpb25VcGRhdGVkQXQodWludDI1NiBfaWQsIHVpbnQyNTYgX3VwZGF0ZWRBdCkgcHVibGljIHN0b3JhZ2VBY2Nlc3NDb250cm9sIHsKCQlkYXRhW19pZF0udXBkYXRlZEF0ID0gX3VwZGF0ZWRBdDsKCX0KCglmdW5jdGlvbiBnZXRSZWdpb25QdXJjaGFzZWRBdCh1aW50MjU2IF9pZCkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewoJCXJldHVybiBkYXRhW19pZF0ucHVyY2hhc2VkQXQ7Cgl9CgoJZnVuY3Rpb24gc2V0UmVnaW9uUHVyY2hhc2VkQXQodWludDI1NiBfaWQsIHVpbnQyNTYgX3B1cmNoYXNlZEF0KSBwdWJsaWMgc3RvcmFnZUFjY2Vzc0NvbnRyb2wgewoJCWRhdGFbX2lkXS5wdXJjaGFzZWRBdCA9IF9wdXJjaGFzZWRBdDsKCX0KCglmdW5jdGlvbiBnZXRSZWdpb25VcGRhdGVkQXRQdXJjaGFzZWRBdCh1aW50MjU2IF9pZCkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludDI1NiBfdXBkYXRlZEF0LCB1aW50MjU2IF9wdXJjaGFzZWRBdCkgewoJCXJldHVybiAoZGF0YVtfaWRdLnVwZGF0ZWRBdCwgZGF0YVtfaWRdLnB1cmNoYXNlZEF0KTsKCX0KCglmdW5jdGlvbiBnZXRSZWdpb25QdXJjaGFzZVBpeGVsUHJpY2UodWludDI1NiBfaWQpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKCQlyZXR1cm4gZGF0YVtfaWRdLnB1cmNoYXNlZFBpeGVsUHJpY2U7Cgl9CgoJZnVuY3Rpb24gc2V0UmVnaW9uUHVyY2hhc2VkUGl4ZWxQcmljZSh1aW50MjU2IF9pZCwgdWludDI1NiBfcHVyY2hhc2VkUGl4ZWxQcmljZSkgcHVibGljIHN0b3JhZ2VBY2Nlc3NDb250cm9sIHsKCQlkYXRhW19pZF0ucHVyY2hhc2VkUGl4ZWxQcmljZSA9IF9wdXJjaGFzZWRQaXhlbFByaWNlOwoJfQoKCWZ1bmN0aW9uIEJkcERhdGFTdG9yYWdlKGJ5dGVzOCBfdmVyc2lvbikgcHVibGljIHsKCQlvd25lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwoJCW1hbmFnZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKCQl2ZXJzaW9uID0gX3ZlcnNpb247Cgl9Cgp9Cgpjb250cmFjdCBCZHBQcmljZVN0b3JhZ2UgaXMgQmRwQmFzZSB7CgoJdWludDY0WzEwMDFdIHB1YmxpYyBwcmljZVBvaW50czsKCgl1aW50MjU2IHB1YmxpYyBwcmljZVBvaW50c0xlbmd0aCA9IDA7CgoJYWRkcmVzcyBwdWJsaWMgZm9yd2FyZFB1cmNoYXNlRmVlc1RvID0gYWRkcmVzcygwKTsKCglhZGRyZXNzIHB1YmxpYyBmb3J3YXJkVXBkYXRlRmVlc1RvID0gYWRkcmVzcygwKTsKCgoJZnVuY3Rpb24gZ2V0UHJpY2VQb2ludHNMZW5ndGgoKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CgkJcmV0dXJuIHByaWNlUG9pbnRzTGVuZ3RoOwoJfQoKCWZ1bmN0aW9uIGdldFByaWNlUG9pbnQodWludDI1NiBfaSkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewoJCXJldHVybiBwcmljZVBvaW50c1tfaV07Cgl9CgoJZnVuY3Rpb24gc2V0UHJpY2VQb2ludHModWludDY0W10gX3ByaWNlUG9pbnRzKSBwdWJsaWMgc3RvcmFnZUFjY2Vzc0NvbnRyb2wgewoJCXByaWNlUG9pbnRzTGVuZ3RoID0gMDsKCQlhcHBlbmRQcmljZVBvaW50cyhfcHJpY2VQb2ludHMpOwoJfQoKCWZ1bmN0aW9uIGFwcGVuZFByaWNlUG9pbnRzKHVpbnQ2NFtdIF9wcmljZVBvaW50cykgcHVibGljIHN0b3JhZ2VBY2Nlc3NDb250cm9sIHsKCQlmb3IgKHVpbnQgaSA9IDA7IGkgPCBfcHJpY2VQb2ludHMubGVuZ3RoOyBpKyspIHsKCQkJcHJpY2VQb2ludHNbcHJpY2VQb2ludHNMZW5ndGgrK10gPSBfcHJpY2VQb2ludHNbaV07CgkJfQoJfQoKCWZ1bmN0aW9uIGdldEZvcndhcmRQdXJjaGFzZUZlZXNUbygpIHZpZXcgcHVibGljIHJldHVybnMgKGFkZHJlc3MpIHsKCQlyZXR1cm4gZm9yd2FyZFB1cmNoYXNlRmVlc1RvOwoJfQoKCWZ1bmN0aW9uIHNldEZvcndhcmRQdXJjaGFzZUZlZXNUbyhhZGRyZXNzIF9mb3J3YXJkUHVyY2hhc2VGZWVzVG8pIHB1YmxpYyBzdG9yYWdlQWNjZXNzQ29udHJvbCB7CgkJZm9yd2FyZFB1cmNoYXNlRmVlc1RvID0gX2ZvcndhcmRQdXJjaGFzZUZlZXNUbzsKCX0KCglmdW5jdGlvbiBnZXRGb3J3YXJkVXBkYXRlRmVlc1RvKCkgdmlldyBwdWJsaWMgcmV0dXJucyAoYWRkcmVzcykgewoJCXJldHVybiBmb3J3YXJkVXBkYXRlRmVlc1RvOwoJfQoKCWZ1bmN0aW9uIHNldEZvcndhcmRVcGRhdGVGZWVzVG8oYWRkcmVzcyBfZm9yd2FyZFVwZGF0ZUZlZXNUbykgcHVibGljIHN0b3JhZ2VBY2Nlc3NDb250cm9sIHsKCQlmb3J3YXJkVXBkYXRlRmVlc1RvID0gX2ZvcndhcmRVcGRhdGVGZWVzVG87Cgl9CgoJZnVuY3Rpb24gQmRwUHJpY2VTdG9yYWdlKGJ5dGVzOCBfdmVyc2lvbikgcHVibGljIHsKCQlvd25lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwoJCW1hbmFnZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKCQl2ZXJzaW9uID0gX3ZlcnNpb247Cgl9Cgp9CgpsaWJyYXJ5IEJkcENhbGN1bGF0b3IgewoKCXVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKCWZ1bmN0aW9uIGNhbGN1bGF0ZUFyZWEoYWRkcmVzc1sxNl0gX2NvbnRyYWN0cywgdWludDI1NiBfcmVnaW9uSWQpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQyNTYgX2FyZWEsIHVpbnQyNTYgX3dpZHRoLCB1aW50MjU2IF9oZWlnaHQpIHsKCQl2YXIgKHgxLCB5MSwgeDIsIHkyKSA9IEJkcERhdGFTdG9yYWdlKEJkcENvbnRyYWN0cy5nZXRCZHBEYXRhU3RvcmFnZShfY29udHJhY3RzKSkuZ2V0UmVnaW9uQ29vcmRpbmF0ZXMoX3JlZ2lvbklkKTsKCQlfd2lkdGggPSB4MiAtIHgxICsgMTsKCQlfaGVpZ2h0ID0geTIgLSB5MSArIDE7CgkJX2FyZWEgPSBfd2lkdGggKiBfaGVpZ2h0OwoJfQoKCWZ1bmN0aW9uIGNvdW50UHVyY2hhc2VkUGl4ZWxzKGFkZHJlc3NbMTZdIF9jb250cmFjdHMpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQyNTYgX2NvdW50KSB7CgkJdmFyIGxhc3RSZWdpb25JZCA9IEJkcERhdGFTdG9yYWdlKEJkcENvbnRyYWN0cy5nZXRCZHBEYXRhU3RvcmFnZShfY29udHJhY3RzKSkuZ2V0TGFzdFJlZ2lvbklkKCk7CgkJZm9yICh1aW50MjU2IGkgPSAwOyBpIDw9IGxhc3RSZWdpb25JZDsgaSsrKSB7CgkJCWlmKEJkcERhdGFTdG9yYWdlKEJkcENvbnRyYWN0cy5nZXRCZHBEYXRhU3RvcmFnZShfY29udHJhY3RzKSkuZ2V0UmVnaW9uUHVyY2hhc2VkQXQoaSkgPiAwKSB7IC8vIHJlZ2lvbiBpcyBwdXJjaGFzZWQKCQkJCXZhciAoYXJlYSwsKSA9IGNhbGN1bGF0ZUFyZWEoX2NvbnRyYWN0cywgaSk7CgkJCQlfY291bnQgKz0gYXJlYTsKCQkJfQoJCX0KCX0KCglmdW5jdGlvbiBjYWxjdWxhdGVDdXJyZW50TWFya2V0UGl4ZWxQcmljZShhZGRyZXNzWzE2XSBfY29udHJhY3RzKSB2aWV3IHB1YmxpYyByZXR1cm5zKHVpbnQpIHsKCQlyZXR1cm4gY2FsY3VsYXRlTWFya2V0UGl4ZWxQcmljZShfY29udHJhY3RzLCBjb3VudFB1cmNoYXNlZFBpeGVscyhfY29udHJhY3RzKSk7Cgl9CgoJZnVuY3Rpb24gY2FsY3VsYXRlTWFya2V0UGl4ZWxQcmljZShhZGRyZXNzWzE2XSBfY29udHJhY3RzLCB1aW50IF9waXhlbHNTb2xkKSB2aWV3IHB1YmxpYyByZXR1cm5zKHVpbnQpIHsKCQl2YXIgcHJpY2VQb2ludHNMZW5ndGggPSBCZHBQcmljZVN0b3JhZ2UoQmRwQ29udHJhY3RzLmdldEJkcFByaWNlU3RvcmFnZShfY29udHJhY3RzKSkuZ2V0UHJpY2VQb2ludHNMZW5ndGgoKTsKCQl1aW50IG1vZCA9IF9waXhlbHNTb2xkICUgKDEwMDAwMDAgLyAocHJpY2VQb2ludHNMZW5ndGggLSAxKSk7CgkJdWludCBkaXYgPSBfcGl4ZWxzU29sZCAqIChwcmljZVBvaW50c0xlbmd0aCAtIDEpIC8gMTAwMDAwMDsKCQl2YXIgZGl2UG9pbnQgPSBCZHBQcmljZVN0b3JhZ2UoQmRwQ29udHJhY3RzLmdldEJkcFByaWNlU3RvcmFnZShfY29udHJhY3RzKSkuZ2V0UHJpY2VQb2ludChkaXYpOwoJCWlmKG1vZCA9PSAwKSByZXR1cm4gZGl2UG9pbnQ7CgkJcmV0dXJuIGRpdlBvaW50ICsgbW9kICogKEJkcFByaWNlU3RvcmFnZShCZHBDb250cmFjdHMuZ2V0QmRwUHJpY2VTdG9yYWdlKF9jb250cmFjdHMpKS5nZXRQcmljZVBvaW50KGRpdisxKSAtIGRpdlBvaW50KSAqIChwcmljZVBvaW50c0xlbmd0aCAtIDEpIC8gMTAwMDAwMDsKCX0KCglmdW5jdGlvbiBjYWxjdWxhdGVBdmVyYWdlUGl4ZWxQcmljZShhZGRyZXNzWzE2XSBfY29udHJhY3RzLCB1aW50IF9hLCB1aW50IF9iKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50IF9wcmljZSkgewoJCV9wcmljZSA9IChjYWxjdWxhdGVNYXJrZXRQaXhlbFByaWNlKF9jb250cmFjdHMsIF9hKSArIGNhbGN1bGF0ZU1hcmtldFBpeGVsUHJpY2UoX2NvbnRyYWN0cywgX2IpKSAvIDI7Cgl9CgoJLyoqIEN1cnJlbnQgbWFya2V0IHByaWNlIHBlciBwaXhlbCBmb3IgdGhpcyByZWdpb24gaWYgaXQgaXMgdGhlIGZpcnN0IHNhbGUgb2YgdGhpcyByZWdpb24KCSAgKi8KCWZ1bmN0aW9uIGNhbGN1bGF0ZVJlZ2lvbkluaXRpYWxTYWxlUGl4ZWxQcmljZShhZGRyZXNzWzE2XSBfY29udHJhY3RzLCB1aW50MjU2IF9yZWdpb25JZCkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewoJCXJlcXVpcmUoQmRwRGF0YVN0b3JhZ2UoQmRwQ29udHJhY3RzLmdldEJkcERhdGFTdG9yYWdlKF9jb250cmFjdHMpKS5nZXRSZWdpb25VcGRhdGVkQXQoX3JlZ2lvbklkKSA+IDApOyAvLyByZWdpb24gZXhpc3RzCgkJdmFyIHB1cmNoYXNlZFBpeGVscyA9IGNvdW50UHVyY2hhc2VkUGl4ZWxzKF9jb250cmFjdHMpOwoJCXZhciAoYXJlYSwsKSA9IGNhbGN1bGF0ZUFyZWEoX2NvbnRyYWN0cywgX3JlZ2lvbklkKTsKCQlyZXR1cm4gY2FsY3VsYXRlQXZlcmFnZVBpeGVsUHJpY2UoX2NvbnRyYWN0cywgcHVyY2hhc2VkUGl4ZWxzLCBwdXJjaGFzZWRQaXhlbHMgKyBhcmVhKTsKCX0KCgkvKiogQ3VycmVudCBtYXJrZXQgcHJpY2Ugb3IgKEN1cnJlbnQgbWFya2V0IHByaWNlKSozIGlmIHRoZSByZWdpb24gd2FzIHNvbGQKCSAgKi8KCWZ1bmN0aW9uIGNhbGN1bGF0ZVJlZ2lvblNhbGVQaXhlbFByaWNlKGFkZHJlc3NbMTZdIF9jb250cmFjdHMsIHVpbnQyNTYgX3JlZ2lvbklkKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CgkJdmFyIHBpeGVsUHJpY2UgPSBCZHBEYXRhU3RvcmFnZShCZHBDb250cmFjdHMuZ2V0QmRwRGF0YVN0b3JhZ2UoX2NvbnRyYWN0cykpLmdldFJlZ2lvbkN1cnJlbnRQaXhlbFByaWNlKF9yZWdpb25JZCk7CgkJaWYocGl4ZWxQcmljZSA+IDApIHsKCQkJcmV0dXJuIHBpeGVsUHJpY2UgKiAzOwoJCX0gZWxzZSB7CgkJCXJldHVybiBjYWxjdWxhdGVSZWdpb25Jbml0aWFsU2FsZVBpeGVsUHJpY2UoX2NvbnRyYWN0cywgX3JlZ2lvbklkKTsKCQl9Cgl9CgoJLyoqIFNldHVwIGlzIGFsbG93ZWQgb25lIHdoaXRoaW4gb25lIGRheSBhZnRlciBwdXJjaGFzZQoJICAqLwoJZnVuY3Rpb24gY2FsY3VsYXRlU2V0dXBBbGxvd2VkVW50aWwoYWRkcmVzc1sxNl0gX2NvbnRyYWN0cywgdWludDI1NiBfcmVnaW9uSWQpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKCQl2YXIgKHVwZGF0ZWRBdCwgcHVyY2hhc2VkQXQpID0gQmRwRGF0YVN0b3JhZ2UoQmRwQ29udHJhY3RzLmdldEJkcERhdGFTdG9yYWdlKF9jb250cmFjdHMpKS5nZXRSZWdpb25VcGRhdGVkQXRQdXJjaGFzZWRBdChfcmVnaW9uSWQpOwoJCWlmKHVwZGF0ZWRBdCAhPSBwdXJjaGFzZWRBdCkgewoJCQlyZXR1cm4gMDsKCQl9IGVsc2UgewoJCQlyZXR1cm4gcHVyY2hhc2VkQXQgKyAxIGRheXM7CgkJfQoJfQoKfQ=='.
	

]
