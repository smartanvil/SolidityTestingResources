Class {
	#name : #SRTd3a6967214a24de0a230c66afe0a47fb2ee1bd83,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd3a6967214a24de0a230c66afe0a47fb2ee1bd83 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLy8+WyBDcnlwdG8gQnJhbmRzIF0+Pj4+CgovLy8gQHRpdGxlIEludGVyZmFjZSBmb3IgY29udHJhY3RzIGNvbmZvcm1pbmcgdG8gRVJDLTcyMTogTm9uLUZ1bmdpYmxlIFRva2VucwovLy8gQGF1dGhvciBEaWV0ZXIgU2hpcmxleSA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjAyNjY2Nzc2Njc0MjYzN2E2YjZkNmY3ODY3NmMyYzYxNmQiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PiAoaHR0cHM6Ly9naXRodWIuY29tL2RldGUpCmNvbnRyYWN0IEVSQzcyMSB7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiBpbXBsZW1lbnRzRVJDNzIxKCkgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgYWRkcik7CiAgICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiB0b3RhbCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB0b2tlbklkKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIGFwcHJvdmVkLCB1aW50MjU2IHRva2VuSWQpOwp9Cgpjb250cmFjdCBFdGhlckJyYW5kIGlzIEVSQzcyMSB7CgogIC8qKiogRVZFTlRTICoqKi8KICBldmVudCBCaXJ0aCh1aW50MjU2IHRva2VuSWQsIGJ5dGVzMzIgbmFtZSwgYWRkcmVzcyBvd25lcik7CiAgZXZlbnQgVG9rZW5Tb2xkKHVpbnQyNTYgdG9rZW5JZCwgdWludDI1NiBvbGRQcmljZSwgdWludDI1NiBuZXdQcmljZSwgYWRkcmVzcyBwcmV2T3duZXIsIGFkZHJlc3Mgd2lubmVyLCBieXRlczMyIG5hbWUpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB0b2tlbklkKTsKCiAgLyoqKiBTVFJVQ1RTICoqKi8KICBzdHJ1Y3QgQnJhbmQgewogICAgYnl0ZXMzMiBuYW1lOwogICAgYWRkcmVzcyBvd25lcjsKICAgIHVpbnQyNTYgcHJpY2U7CiAgICB1aW50MjU2IGxhc3RfcHJpY2U7CiAgICBhZGRyZXNzIGFwcHJvdmVfdHJhbnNmZXJfdG87CiAgfQogIAogIHN0cnVjdCBUb3BPd25lciB7CiAgICBhZGRyZXNzIGFkZHI7CiAgICB1aW50MjU2IHByaWNlOwogIH0KCiAgLyoqKiBDT05TVEFOVFMgKioqLwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgTkFNRSA9ICJFdGhlckJyYW5kcyI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBTWU1CT0wgPSAiRXRoZXJCcmFuZCI7CiAgCiAgYm9vbCBwdWJsaWMgZ2FtZU9wZW4gPSBmYWxzZTsKCiAgLyoqKiBTVE9SQUdFICoqKi8KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgb3duZXJDb3VudDsKICBtYXBwaW5nICh1aW50MjU2ID0+IFRvcE93bmVyKSBwcml2YXRlIHRvcE93bmVyOwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGxhc3RCdXllcjsKCiAgYWRkcmVzcyBwdWJsaWMgY2VvQWRkcmVzczsKICBhZGRyZXNzIHB1YmxpYyBjb29BZGRyZXNzOwogIGFkZHJlc3MgcHVibGljIGNmb0FkZHJlc3M7CiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgZXh0cmE7CiAgCiAgdWludDI1NiBicmFuZF9jb3VudDsKICB1aW50MjU2IGxvd2VzdF90b3BfYnJhbmQ7CiAKICBtYXBwaW5nICh1aW50MjU2ID0+IEJyYW5kKSBwcml2YXRlIGJyYW5kczsKCiAgLyoqKiBBQ0NFU1MgTU9ESUZJRVJTICoqKi8KICBtb2RpZmllciBvbmx5Q0VPKCkgeyByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyk7IF87IH0KICBtb2RpZmllciBvbmx5Q09PKCkgeyByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY29vQWRkcmVzcyk7IF87IH0KICBtb2RpZmllciBvbmx5Q1hYKCkgeyByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyB8fCBtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MpOyBfOyB9CgogIC8qKiogQUNDRVNTIE1PRElGSUVTICoqKi8KICBmdW5jdGlvbiBzZXRDRU8oYWRkcmVzcyBfbmV3Q0VPKSBwdWJsaWMgb25seUNFTyB7CiAgICByZXF1aXJlKF9uZXdDRU8gIT0gYWRkcmVzcygwKSk7CiAgICBjZW9BZGRyZXNzID0gX25ld0NFTzsKICB9CiAgZnVuY3Rpb24gc2V0Q09PKGFkZHJlc3MgX25ld0NPTykgcHVibGljIG9ubHlDRU8gewogICAgcmVxdWlyZShfbmV3Q09PICE9IGFkZHJlc3MoMCkpOwogICAgY29vQWRkcmVzcyA9IF9uZXdDT087CiAgfQogIGZ1bmN0aW9uIHNldENGTyhhZGRyZXNzIF9uZXdDRk8pIHB1YmxpYyBvbmx5Q0VPIHsKICAgIHJlcXVpcmUoX25ld0NGTyAhPSBhZGRyZXNzKDApKTsKICAgIGNmb0FkZHJlc3MgPSBfbmV3Q0ZPOwogIH0KICBmdW5jdGlvbiBzZXRFeHRyYSh1aW50MjU2IF9pZCwgYWRkcmVzcyBfbmV3RXh0cmEpIHB1YmxpYyBvbmx5Q1hYIHsKICAgIHJlcXVpcmUoX25ld0V4dHJhICE9IGFkZHJlc3MoMCkpOwogICAgLy8gZmFpbHNhdmUgOjMgcmVxdWlyZShfaWQgPD0gMik7IC8vIDMgPSAxIEVUSCwgNCA9IDIuNSBFVEgsIDUgPSA1IEVUSAogICAgZXh0cmFbX2lkXSA9IF9uZXdFeHRyYTsKICB9CiAgZnVuY3Rpb24gc2V0VG9wKHVpbnQyNTYgX2lkLCBhZGRyZXNzIF9uZXdFeHRyYSwgdWludDI1NiBfcHJpY2UpIHB1YmxpYyBvbmx5Q1hYIHsKICAgIHJlcXVpcmUoX25ld0V4dHJhICE9IGFkZHJlc3MoMCkpOwogICAgdG9wT3duZXJbX2lkXSA9IFRvcE93bmVyKF9uZXdFeHRyYSwgX3ByaWNlKTsKICB9CiAgZnVuY3Rpb24gc2V0TGFzdCh1aW50MjU2IF9pZCwgYWRkcmVzcyBfbmV3RXh0cmEpIHB1YmxpYyBvbmx5Q1hYIHsKICAgIHJlcXVpcmUoX25ld0V4dHJhICE9IGFkZHJlc3MoMCkpOwogICAgbGFzdEJ1eWVyW19pZF0gPSBfbmV3RXh0cmE7CiAgfQoKICAvKioqIERFRkFVTFQgTUVUSE9EUyAqKiovCiAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7IHJldHVybiBTWU1CT0w7IH0KICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7IHJldHVybiBOQU1FOyB9CiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsgcmV0dXJuIHRydWU7IH0KCiAgLyoqKiBDT05TVFJVQ1RPUiAqKiovCiAgZnVuY3Rpb24gRXRoZXJCcmFuZCgpIHB1YmxpYyB7CiAgICBjZW9BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgIGNvb0FkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgY2ZvQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICB0b3BPd25lclsxXSA9IFRvcE93bmVyKG1zZy5zZW5kZXIsIDApOyAvLyAwLjUKICAgIHRvcE93bmVyWzJdID0gVG9wT3duZXIobXNnLnNlbmRlciwgMCk7IC8vIDAuMQogICAgdG9wT3duZXJbM10gPSBUb3BPd25lcihtc2cuc2VuZGVyLCAwKTsgLy8gMC4wNQogICAgdG9wT3duZXJbNF0gPSBUb3BPd25lcihtc2cuc2VuZGVyLCAwKTsKICAgIHRvcE93bmVyWzVdID0gVG9wT3duZXIobXNnLnNlbmRlciwgMCk7CiAgICBsYXN0QnV5ZXJbMV0gPSBtc2cuc2VuZGVyOwogICAgbGFzdEJ1eWVyWzJdID0gbXNnLnNlbmRlcjsKICAgIGxhc3RCdXllclszXSA9IG1zZy5zZW5kZXI7CiAgICBleHRyYVsxXSA9IG1zZy5zZW5kZXI7CiAgICBleHRyYVsyXSA9IG1zZy5zZW5kZXI7CiAgICBleHRyYVszXSA9IG1zZy5zZW5kZXI7CiAgICBleHRyYVs0XSA9IG1zZy5zZW5kZXI7CiAgICBleHRyYVs1XSA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioqIElOVEVSRkFDRSBNRVRIT0RTICoqKi8KCiAgZnVuY3Rpb24gY3JlYXRlQnJhbmQoYnl0ZXMzMiBfbmFtZSwgdWludDI1NiBfcHJpY2UpIHB1YmxpYyBvbmx5Q1hYIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBhZGRyZXNzKDApKTsKICAgIF9jcmVhdGVfYnJhbmQoX25hbWUsIGFkZHJlc3ModGhpcyksIF9wcmljZSwgMCk7CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVQcm9tb0JyYW5kKGJ5dGVzMzIgX25hbWUsIGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSwgdWludDI1NiBfbGFzdF9wcmljZSkgcHVibGljIG9ubHlDWFggewogICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfb3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBfY3JlYXRlX2JyYW5kKF9uYW1lLCBfb3duZXIsIF9wcmljZSwgX2xhc3RfcHJpY2UpOwogIH0KCiAgZnVuY3Rpb24gb3BlbkdhbWUoKSBwdWJsaWMgb25seUNYWCB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gYWRkcmVzcygwKSk7CiAgICBnYW1lT3BlbiA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpIHsKICAgIHJldHVybiBicmFuZF9jb3VudDsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gb3duZXJDb3VudFtfb3duZXJdOwogIH0KICBmdW5jdGlvbiBwcmljZU9mKHVpbnQyNTYgX2JyYW5kX2lkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHByaWNlKSB7CiAgICByZXR1cm4gYnJhbmRzW19icmFuZF9pZF0ucHJpY2U7CiAgfQoKICBmdW5jdGlvbiBnZXRCcmFuZCh1aW50MjU2IF9icmFuZF9pZCkgcHVibGljIHZpZXcgcmV0dXJucyAoCiAgICB1aW50MjU2IGlkLAogICAgYnl0ZXMzMiBicmFuZF9uYW1lLAogICAgYWRkcmVzcyBvd25lciwKICAgIHVpbnQyNTYgcHJpY2UsCiAgICB1aW50MjU2IGxhc3RfcHJpY2UKICApIHsKICAgIGlkID0gX2JyYW5kX2lkOwogICAgYnJhbmRfbmFtZSA9IGJyYW5kc1tfYnJhbmRfaWRdLm5hbWU7CiAgICBvd25lciA9IGJyYW5kc1tfYnJhbmRfaWRdLm93bmVyOwogICAgcHJpY2UgPSBicmFuZHNbX2JyYW5kX2lkXS5wcmljZTsKICAgIGxhc3RfcHJpY2UgPSBicmFuZHNbX2JyYW5kX2lkXS5sYXN0X3ByaWNlOwogIH0KICAKICBmdW5jdGlvbiBnZXRCcmFuZHMoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2W10sIGJ5dGVzMzJbXSwgYWRkcmVzc1tdLCB1aW50MjU2W10pIHsKICAgIHVpbnQyNTZbXSBtZW1vcnkgaWRzID0gbmV3IHVpbnQyNTZbXShicmFuZF9jb3VudCk7CiAgICBieXRlczMyW10gbWVtb3J5IG5hbWVzID0gbmV3IGJ5dGVzMzJbXShicmFuZF9jb3VudCk7CiAgICBhZGRyZXNzW10gbWVtb3J5IG93bmVycyA9IG5ldyBhZGRyZXNzW10oYnJhbmRfY291bnQpOwogICAgdWludDI1NltdIG1lbW9yeSBwcmljZXMgPSBuZXcgdWludDI1NltdKGJyYW5kX2NvdW50KTsKICAgIGZvcih1aW50MjU2IF9pZCA9IDA7IF9pZCA8IGJyYW5kX2NvdW50OyBfaWQrKyl7CiAgICAgIGlkc1tfaWRdID0gX2lkOwogICAgICBuYW1lc1tfaWRdID0gYnJhbmRzW19pZF0ubmFtZTsKICAgICAgb3duZXJzW19pZF0gPSBicmFuZHNbX2lkXS5vd25lcjsKICAgICAgcHJpY2VzW19pZF0gPSBicmFuZHNbX2lkXS5wcmljZTsKICAgIH0KICAgIHJldHVybiAoaWRzLCBuYW1lcywgb3duZXJzLCBwcmljZXMpOwogIH0KICAKICBmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IF9icmFuZF9pZCkgcHVibGljIHBheWFibGUgewogICAgcmVxdWlyZShnYW1lT3BlbiA9PSB0cnVlKTsKICAgIEJyYW5kIHN0b3JhZ2UgYnJhbmQgPSBicmFuZHNbX2JyYW5kX2lkXTsKCiAgICByZXF1aXJlKGJyYW5kLm93bmVyICE9IG1zZy5zZW5kZXIpOwogICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gYnJhbmQucHJpY2UpOwoKICAgIHVpbnQyNTYgZXhjZXNzID0gU2FmZU1hdGguc3ViKG1zZy52YWx1ZSwgYnJhbmQucHJpY2UpOwogICAgdWludDI1NiBoYWxmX2RpZmYgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGguc3ViKGJyYW5kLnByaWNlLCBicmFuZC5sYXN0X3ByaWNlKSwgMik7CiAgICB1aW50MjU2IHJld2FyZCA9IFNhZmVNYXRoLmFkZChoYWxmX2RpZmYsIGJyYW5kLmxhc3RfcHJpY2UpOwoKICAgIHRvcE93bmVyWzFdLmFkZHIudHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGhhbGZfZGlmZiwgMTAwKSwgMTUpKSk7ICAvLyAxNSUKICAgIHRvcE93bmVyWzJdLmFkZHIudHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGhhbGZfZGlmZiwgMTAwKSwgMTIpKSk7ICAvLyAxMiUKICAgIHRvcE93bmVyWzNdLmFkZHIudHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGhhbGZfZGlmZiwgMTAwKSwgOSkpKTsgICAvLyA5JQogICAgdG9wT3duZXJbNF0uYWRkci50cmFuc2Zlcih1aW50MjU2KFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYoaGFsZl9kaWZmLCAxMDApLCA1KSkpOyAgIC8vIDUlCiAgICB0b3BPd25lcls1XS5hZGRyLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDIpKSk7ICAgLy8gMiUgPT0gNDMlCiAgCiAgICBsYXN0QnV5ZXJbMV0udHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGhhbGZfZGlmZiwgMTAwKSwgMjApKSk7IC8vIDIwJQogICAgbGFzdEJ1eWVyWzJdLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDE1KSkpOyAvLyAxNSUKICAgIGxhc3RCdXllclszXS50cmFuc2Zlcih1aW50MjU2KFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYoaGFsZl9kaWZmLCAxMDApLCAxMCkpKTsgLy8gMTAlID09IDQ1JQogIAogICAgZXh0cmFbMV0udHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGhhbGZfZGlmZiwgMTAwKSwgMSkpKTsgICAgICAvLyAxJQogICAgZXh0cmFbMl0udHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGhhbGZfZGlmZiwgMTAwKSwgMSkpKTsgICAgICAvLyAxJQogICAgZXh0cmFbM10udHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGhhbGZfZGlmZiwgMTAwKSwgMSkpKTsgICAgICAvLyAxJQogICAgZXh0cmFbNF0udHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGhhbGZfZGlmZiwgMTAwKSwgMSkpKTsgICAgICAvLyAxJQogICAgZXh0cmFbNV0udHJhbnNmZXIodWludDI1NihTYWZlTWF0aC5tdWwoU2FmZU1hdGguZGl2KGhhbGZfZGlmZiwgMTAwKSwgMSkpKTsgICAgICAvLyAxJQogICAgCiAgICBjZm9BZGRyZXNzLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDYpKSk7ICAgIC8vIDYlCiAgICBjb29BZGRyZXNzLnRyYW5zZmVyKHVpbnQyNTYoU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihoYWxmX2RpZmYsIDEwMCksIDEpKSk7ICAgIC8vIDElCgogICAgaWYoYnJhbmQub3duZXIgPT0gYWRkcmVzcyh0aGlzKSl7CiAgICAgIGNmb0FkZHJlc3MudHJhbnNmZXIocmV3YXJkKTsKICAgIH0gZWxzZSB7CiAgICAgIGJyYW5kLm93bmVyLnRyYW5zZmVyKHJld2FyZCk7CiAgICB9CiAgICAKICAgIGlmKGJyYW5kLnByaWNlID4gdG9wT3duZXJbNV0ucHJpY2UpewogICAgICAgIGZvcih1aW50OCBpID0gNTsgaSA+PSAxOyBpLS0pewogICAgICAgICAgICBpZihicmFuZC5wcmljZSA+IHRvcE93bmVyW2ldLnByaWNlKXsKICAgICAgICAgICAgICAgIGlmKGkgPD0gNCl7IHRvcE93bmVyWzVdID0gdG9wT3duZXJbNF07IH0KICAgICAgICAgICAgICAgIGlmKGkgPD0gMyl7IHRvcE93bmVyWzRdID0gdG9wT3duZXJbM107IH0KICAgICAgICAgICAgICAgIGlmKGkgPD0gMil7IHRvcE93bmVyWzNdID0gdG9wT3duZXJbMl07IH0KICAgICAgICAgICAgICAgIGlmKGkgPD0gMSl7IHRvcE93bmVyWzJdID0gdG9wT3duZXJbMV07IH0KICAgICAgICAgICAgICAgIHRvcE93bmVyW2ldID0gVG9wT3duZXIobXNnLnNlbmRlciwgYnJhbmQucHJpY2UpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAKICAgIGlmKGV4dHJhWzNdID09IGNlb0FkZHJlc3MgJiYgYnJhbmQucHJpY2UgPj0gMTAwMDAwMDAwMDAwMDAwMDAwMCl7IGV4dHJhWzNdID09IG1zZy5zZW5kZXI7IH0gLy8gMSBFVEgKICAgIGlmKGV4dHJhWzRdID09IGNlb0FkZHJlc3MgJiYgYnJhbmQucHJpY2UgPj0gMjUwMDAwMDAwMDAwMDAwMDAwMCl7IGV4dHJhWzRdID09IG1zZy5zZW5kZXI7IH0gLy8gMi41IEVUSAogICAgaWYoZXh0cmFbNV0gPT0gY2VvQWRkcmVzcyAmJiBicmFuZC5wcmljZSA+PSA1MDAwMDAwMDAwMDAwMDAwMDAwKXsgZXh0cmFbNV0gPT0gbXNnLnNlbmRlcjsgfSAvLyA1IEVUSAogICAgCiAgICBicmFuZC5sYXN0X3ByaWNlID0gYnJhbmQucHJpY2U7CiAgICBhZGRyZXNzIF9vbGRfb3duZXIgPSBicmFuZC5vd25lcjsKICAgIAogICAgaWYoYnJhbmQucHJpY2UgPCA1MDAwMDAwMDAwMDAwMDAwMCl7IC8vIDAuMDUKICAgICAgICBicmFuZC5wcmljZSA9IFNhZmVNYXRoLm11bChTYWZlTWF0aC5kaXYoYnJhbmQucHJpY2UsIDEwMCksIDE1MCk7CiAgICB9IGVsc2UgewogICAgICAgIGJyYW5kLnByaWNlID0gU2FmZU1hdGgubXVsKFNhZmVNYXRoLmRpdihicmFuZC5wcmljZSwgMTAwKSwgMTI1KTsKICAgIH0KICAgIGJyYW5kLm93bmVyID0gbXNnLnNlbmRlcjsKCiAgICBsYXN0QnV5ZXJbM10gPSBsYXN0QnV5ZXJbMl07CiAgICBsYXN0QnV5ZXJbMl0gPSBsYXN0QnV5ZXJbMV07CiAgICBsYXN0QnV5ZXJbMV0gPSBtc2cuc2VuZGVyOwoKICAgIFRyYW5zZmVyKF9vbGRfb3duZXIsIGJyYW5kLm93bmVyLCBfYnJhbmRfaWQpOwogICAgVG9rZW5Tb2xkKF9icmFuZF9pZCwgYnJhbmQubGFzdF9wcmljZSwgYnJhbmQucHJpY2UsIF9vbGRfb3duZXIsIGJyYW5kLm93bmVyLCBicmFuZC5uYW1lKTsKCiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV4Y2Vzcyk7CiAgfQoKICBmdW5jdGlvbiBwYXlvdXQoKSBwdWJsaWMgb25seUNFTyB7CiAgICBjZm9BZGRyZXNzLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQoKICBmdW5jdGlvbiB0b2tlbnNPZk93bmVyKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTZbXSBvd25lclRva2VucykgewogICAgdWludDI1NiB0b2tlbkNvdW50ID0gYmFsYW5jZU9mKF9vd25lcik7CiAgICBpZiAodG9rZW5Db3VudCA9PSAwKSB7CiAgICAgIHJldHVybiBuZXcgdWludDI1NltdKDApOwogICAgfSBlbHNlIHsKICAgICAgdWludDI1NltdIG1lbW9yeSByZXN1bHQgPSBuZXcgdWludDI1NltdKHRva2VuQ291bnQpOwogICAgICB1aW50MjU2IHJlc3VsdEluZGV4ID0gMDsKICAgICAgZm9yICh1aW50MjU2IGJyYW5kSWQgPSAwOyBicmFuZElkIDw9IHRvdGFsU3VwcGx5KCk7IGJyYW5kSWQrKykgewogICAgICAgIGlmIChicmFuZHNbYnJhbmRJZF0ub3duZXIgPT0gX293bmVyKSB7CiAgICAgICAgICByZXN1bHRbcmVzdWx0SW5kZXhdID0gYnJhbmRJZDsKICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfQoKICAvKioqIEVSQy03MjEgY29tcGxpYW5jZS4gKioqLwoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9icmFuZF9pZCkgcHVibGljIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBicmFuZHNbX2JyYW5kX2lkXS5vd25lcik7CiAgICBicmFuZHNbX2JyYW5kX2lkXS5hcHByb3ZlX3RyYW5zZmVyX3RvID0gX3RvOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfYnJhbmRfaWQpOwogIH0KICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX2JyYW5kX2lkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIG93bmVyKXsKICAgIG93bmVyID0gYnJhbmRzW19icmFuZF9pZF0ub3duZXI7CiAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCkpOwogIH0KICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX2JyYW5kX2lkKSBwdWJsaWMgewogICAgYWRkcmVzcyBvbGRPd25lciA9IGJyYW5kc1tfYnJhbmRfaWRdLm93bmVyOwogICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShicmFuZHNbX2JyYW5kX2lkXS5hcHByb3ZlX3RyYW5zZmVyX3RvID09IG1zZy5zZW5kZXIpOwogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBtc2cuc2VuZGVyLCBfYnJhbmRfaWQpOwogIH0KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYnJhbmRfaWQpIHB1YmxpYyB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYnJhbmRzW19icmFuZF9pZF0ub3duZXIpOwogICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2JyYW5kX2lkKTsKICB9CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9icmFuZF9pZCkgcHVibGljIHsKICAgIHJlcXVpcmUoX2Zyb20gPT0gYnJhbmRzW19icmFuZF9pZF0ub3duZXIpOwogICAgcmVxdWlyZShicmFuZHNbX2JyYW5kX2lkXS5hcHByb3ZlX3RyYW5zZmVyX3RvID09IF90byk7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfYnJhbmRfaWQpOwogIH0KCiAgLyoqKiBQUklWQVRFIE1FVEhPRFMgKioqLwoKICBmdW5jdGlvbiBfY3JlYXRlX2JyYW5kKGJ5dGVzMzIgX25hbWUsIGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSwgdWludDI1NiBfbGFzdF9wcmljZSkgcHJpdmF0ZSB7CiAgICAvLyBQYXJhbXM6IG5hbWUsIG93bmVyLCBwcmljZSwgaXNfZm9yX3NhbGUsIGlzX3B1YmxpYywgc2hhcmVfcHJpY2UsIGluY3JlYXNlLCBmZWUsIHNoYXJlX2NvdW50LAogICAgYnJhbmRzW2JyYW5kX2NvdW50XSA9IEJyYW5kKHsKICAgICAgbmFtZTogX25hbWUsCiAgICAgIG93bmVyOiBfb3duZXIsCiAgICAgIHByaWNlOiBfcHJpY2UsCiAgICAgIGxhc3RfcHJpY2U6IF9sYXN0X3ByaWNlLAogICAgICBhcHByb3ZlX3RyYW5zZmVyX3RvOiBhZGRyZXNzKDApCiAgICB9KTsKICAgIAogICAgQnJhbmQgc3RvcmFnZSBicmFuZCA9IGJyYW5kc1ticmFuZF9jb3VudF07CiAgICAKICAgIGlmKGJyYW5kLnByaWNlID4gdG9wT3duZXJbNV0ucHJpY2UpewogICAgICAgIGZvcih1aW50OCBpID0gNTsgaSA+PSAxOyBpLS0pewogICAgICAgICAgICBpZihicmFuZC5wcmljZSA+IHRvcE93bmVyW2ldLnByaWNlKXsKICAgICAgICAgICAgICAgIGlmKGkgPD0gNCl7IHRvcE93bmVyWzVdID0gdG9wT3duZXJbNF07IH0KICAgICAgICAgICAgICAgIGlmKGkgPD0gMyl7IHRvcE93bmVyWzRdID0gdG9wT3duZXJbM107IH0KICAgICAgICAgICAgICAgIGlmKGkgPD0gMil7IHRvcE93bmVyWzNdID0gdG9wT3duZXJbMl07IH0KICAgICAgICAgICAgICAgIGlmKGkgPD0gMSl7IHRvcE93bmVyWzJdID0gdG9wT3duZXJbMV07IH0KICAgICAgICAgICAgICAgIHRvcE93bmVyW2ldID0gVG9wT3duZXIobXNnLnNlbmRlciwgYnJhbmQucHJpY2UpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAKICAgIEJpcnRoKGJyYW5kX2NvdW50LCBfbmFtZSwgX293bmVyKTsKICAgIFRyYW5zZmVyKGFkZHJlc3ModGhpcyksIF9vd25lciwgYnJhbmRfY291bnQpOwogICAgYnJhbmRfY291bnQrKzsKICB9CgogIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYnJhbmRfaWQpIHByaXZhdGUgewogICAgYnJhbmRzW19icmFuZF9pZF0ub3duZXIgPSBfdG87CiAgICBicmFuZHNbX2JyYW5kX2lkXS5hcHByb3ZlX3RyYW5zZmVyX3RvID0gYWRkcmVzcygwKTsKICAgIG93bmVyQ291bnRbX2Zyb21dIC09IDE7CiAgICBvd25lckNvdW50W190b10gKz0gMTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9icmFuZF9pZCk7CiAgfQp9CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIHJldHVybiBjOwogIH0KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9'.
	

]
