Class {
	#name : #SRT0BeA4f7Ee7DbD9CCcFBa4b2E7A178dfC1e877723,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0BeA4f7Ee7DbD9CCcFBa4b2E7A178dfC1e877723 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8qClRoaXMgZmlsZSBpcyBwYXJ0IG9mIFBhc3MgREFPLgoKUGFzcyBEQU8gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQppdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBsZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KClBhc3MgREFPIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCmJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCk1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUKR05VIGxlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgpZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgbGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKYWxvbmcgd2l0aCBQYXNzIERBTy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KKi8KCi8qClNtYXJ0IGNvbnRyYWN0IGZvciBhIERlY2VudHJhbGl6ZWQgQXV0b25vbW91cyBPcmdhbml6YXRpb24gKERBTykKdG8gYXV0b21hdGUgb3JnYW5pemF0aW9uYWwgZ292ZXJuYW5jZSBhbmQgZGVjaXNpb24tbWFraW5nLgoqLwoKLy8vIEB0aXRsZSBQYXNzIERhbyBzbWFydCBjb250cmFjdApjb250cmFjdCBQYXNzRGFvIHsKICAgIAogICAgc3RydWN0IHJldmlzaW9uIHsKICAgICAgICAvLyBBZGRyZXNzIG9mIHRoZSBDb21taXR0ZWUgUm9vbSBzbWFydCBjb250cmFjdAogICAgICAgIGFkZHJlc3MgY29tbWl0dGVlUm9vbTsKICAgICAgICAvLyBBZGRyZXNzIG9mIHRoZSBzaGFyZSBtYW5hZ2VyIHNtYXJ0IGNvbnRyYWN0CiAgICAgICAgYWRkcmVzcyBzaGFyZU1hbmFnZXI7CiAgICAgICAgLy8gQWRkcmVzcyBvZiB0aGUgdG9rZW4gbWFuYWdlciBzbWFydCBjb250cmFjdAogICAgICAgIGFkZHJlc3MgdG9rZW5NYW5hZ2VyOwogICAgICAgIC8vIEFkZHJlc3Mgb2YgdGhlIHByb2plY3QgY3JlYXRvciBzbWFydCBjb250cmFjdAogICAgICAgIHVpbnQgc3RhcnREYXRlOwogICAgfQogICAgLy8gVGhlIHJldmlzaW9ucyBvZiB0aGUgYXBwbGljYXRpb24gdW50aWwgdG9kYXkKICAgIHJldmlzaW9uW10gcHVibGljIHJldmlzaW9uczsKCiAgICBzdHJ1Y3QgcHJvamVjdCB7CiAgICAgICAgLy8gVGhlIGFkZHJlc3Mgb2YgdGhlIHNtYXJ0IGNvbnRyYWN0CiAgICAgICAgYWRkcmVzcyBjb250cmFjdEFkZHJlc3M7CiAgICAgICAgLy8gVGhlIHVuaXggZWZmZWN0aXZlIHN0YXJ0IGRhdGUgb2YgdGhlIGNvbnRyYWN0CiAgICAgICAgdWludCBzdGFydERhdGU7CiAgICB9CiAgICAvLyBUaGUgcHJvamVjdHMgb2YgdGhlIERhbwogICAgcHJvamVjdFtdIHB1YmxpYyBwcm9qZWN0czsKCiAgICAvLyBNYXAgd2l0aCB0aGUgaW5kZXhlcyBvZiB0aGUgcHJvamVjdHMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHJvamVjdElEOwogICAgCiAgICAvLyBUaGUgYWRkcmVzcyBvZiB0aGUgbWV0YSBwcm9qZWN0CiAgICBhZGRyZXNzIG1ldGFQcm9qZWN0OwoKICAgIAovLyBFdmVudHMKCiAgICBldmVudCBVcGdyYWRlKHVpbnQgaW5kZXhlZCBSZXZpc2lvbklELCBhZGRyZXNzIENvbW1pdHRlZVJvb20sIGFkZHJlc3MgU2hhcmVNYW5hZ2VyLCBhZGRyZXNzIFRva2VuTWFuYWdlcik7CiAgICBldmVudCBOZXdQcm9qZWN0KGFkZHJlc3MgUHJvamVjdCk7CgovLyBDb25zdGFudCBmdW5jdGlvbnMgIAogICAgCiAgICAvLy8gQHJldHVybiBUaGUgZWZmZWN0aXZlIGNvbW1pdHRlZSByb29tCiAgICBmdW5jdGlvbiBBY3R1YWxDb21taXR0ZWVSb29tKCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiByZXZpc2lvbnNbMF0uY29tbWl0dGVlUm9vbTsKICAgIH0KICAgIAogICAgLy8vIEByZXR1cm4gVGhlIG1ldGEgcHJvamVjdAogICAgZnVuY3Rpb24gTWV0YVByb2plY3QoKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIG1ldGFQcm9qZWN0OwogICAgfQoKICAgIC8vLyBAcmV0dXJuIFRoZSBlZmZlY3RpdmUgc2hhcmUgbWFuYWdlcgogICAgZnVuY3Rpb24gQWN0dWFsU2hhcmVNYW5hZ2VyKCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiByZXZpc2lvbnNbMF0uc2hhcmVNYW5hZ2VyOwogICAgfQoKICAgIC8vLyBAcmV0dXJuIFRoZSBlZmZlY3RpdmUgdG9rZW4gbWFuYWdlcgogICAgZnVuY3Rpb24gQWN0dWFsVG9rZW5NYW5hZ2VyKCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiByZXZpc2lvbnNbMF0udG9rZW5NYW5hZ2VyOwogICAgfQoKLy8gbW9kaWZpZXJzCgogICAgbW9kaWZpZXIgb25seVBhc3NDb21taXR0ZWVSb29tIHtpZiAobXNnLnNlbmRlciAhPSByZXZpc2lvbnNbMF0uY29tbWl0dGVlUm9vbSAgCiAgICAgICAgJiYgcmV2aXNpb25zWzBdLmNvbW1pdHRlZVJvb20gIT0gMCkgdGhyb3c7IF87fQogICAgCi8vIENvbnN0cnVjdG9yIGZ1bmN0aW9uCgogICAgZnVuY3Rpb24gUGFzc0RhbygpIHsKICAgICAgICBwcm9qZWN0cy5sZW5ndGggPSAxOwogICAgICAgIHJldmlzaW9ucy5sZW5ndGggPSAxOwogICAgfQogICAgCi8vIFJlZ2lzdGVyIGZ1bmN0aW9ucwoKICAgIC8vLyBAZGV2IEZ1bmN0aW9uIHRvIGFsbG93IHRoZSBhY3R1YWwgQ29tbWl0dGVlIFJvb20gdXBncmFkaW5nIHRoZSBhcHBsaWNhdGlvbgogICAgLy8vIEBwYXJhbSBfbmV3Q29tbWl0dGVlUm9vbSBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IGNvbW1pdHRlZSByb29tCiAgICAvLy8gQHBhcmFtIF9uZXdTaGFyZU1hbmFnZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBzaGFyZSBtYW5hZ2VyCiAgICAvLy8gQHBhcmFtIF9uZXdUb2tlbk1hbmFnZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyB0b2tlbiBtYW5hZ2VyCiAgICAvLy8gQHJldHVybiBUaGUgaW5kZXggb2YgdGhlIHJldmlzaW9uCiAgICBmdW5jdGlvbiB1cGdyYWRlKAogICAgICAgIGFkZHJlc3MgX25ld0NvbW1pdHRlZVJvb20sIAogICAgICAgIGFkZHJlc3MgX25ld1NoYXJlTWFuYWdlciwgCiAgICAgICAgYWRkcmVzcyBfbmV3VG9rZW5NYW5hZ2VyKSBvbmx5UGFzc0NvbW1pdHRlZVJvb20gcmV0dXJucyAodWludCkgewogICAgICAgIAogICAgICAgIHVpbnQgX3JldmlzaW9uSUQgPSByZXZpc2lvbnMubGVuZ3RoKys7CiAgICAgICAgcmV2aXNpb24gciA9IHJldmlzaW9uc1tfcmV2aXNpb25JRF07CgogICAgICAgIGlmIChfbmV3Q29tbWl0dGVlUm9vbSAhPSAwKSByLmNvbW1pdHRlZVJvb20gPSBfbmV3Q29tbWl0dGVlUm9vbTsgZWxzZSByLmNvbW1pdHRlZVJvb20gPSByZXZpc2lvbnNbMF0uY29tbWl0dGVlUm9vbTsKICAgICAgICBpZiAoX25ld1NoYXJlTWFuYWdlciAhPSAwKSByLnNoYXJlTWFuYWdlciA9IF9uZXdTaGFyZU1hbmFnZXI7IGVsc2Ugci5zaGFyZU1hbmFnZXIgPSByZXZpc2lvbnNbMF0uc2hhcmVNYW5hZ2VyOwogICAgICAgIGlmIChfbmV3VG9rZW5NYW5hZ2VyICE9IDApIHIudG9rZW5NYW5hZ2VyID0gX25ld1Rva2VuTWFuYWdlcjsgZWxzZSByLnRva2VuTWFuYWdlciA9IHJldmlzaW9uc1swXS50b2tlbk1hbmFnZXI7CgogICAgICAgIHIuc3RhcnREYXRlID0gbm93OwogICAgICAgIAogICAgICAgIHJldmlzaW9uc1swXSA9IHI7CiAgICAgICAgCiAgICAgICAgVXBncmFkZShfcmV2aXNpb25JRCwgX25ld0NvbW1pdHRlZVJvb20sIF9uZXdTaGFyZU1hbmFnZXIsIF9uZXdUb2tlbk1hbmFnZXIpOwogICAgICAgICAgICAKICAgICAgICByZXR1cm4gX3JldmlzaW9uSUQ7CiAgICB9CgogICAgLy8vIEBkZXYgRnVuY3Rpb24gdG8gc2V0IHRoZSBtZXRhIHByb2plY3QKICAgIC8vLyBAcGFyYW0gX3Byb2plY3RBZGRyZXNzIFRoZSBhZGRyZXNzIG9mIHRoZSBtZXRhIHByb2plY3QKICAgIGZ1bmN0aW9uIGFkZE1ldGFQcm9qZWN0KGFkZHJlc3MgX3Byb2plY3RBZGRyZXNzKSBvbmx5UGFzc0NvbW1pdHRlZVJvb20gewoKICAgICAgICBtZXRhUHJvamVjdCA9IF9wcm9qZWN0QWRkcmVzczsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgRnVuY3Rpb24gdG8gYWxsb3cgdGhlIGNvbW1pdHRlZSByb29tIHRvIGFkZCBhIHByb2plY3Qgd2hlbiBvcmRlcmluZwogICAgLy8vIEBwYXJhbSBfcHJvamVjdEFkZHJlc3MgVGhlIGFkZHJlc3Mgb2YgdGhlIHByb2plY3QKICAgIGZ1bmN0aW9uIGFkZFByb2plY3QoYWRkcmVzcyBfcHJvamVjdEFkZHJlc3MpIG9ubHlQYXNzQ29tbWl0dGVlUm9vbSB7CgogICAgICAgIGlmIChwcm9qZWN0SURbX3Byb2plY3RBZGRyZXNzXSA9PSAwKSB7CgogICAgICAgICAgICB1aW50IF9wcm9qZWN0SUQgPSBwcm9qZWN0cy5sZW5ndGgrKzsKICAgICAgICAgICAgcHJvamVjdCBwID0gcHJvamVjdHNbX3Byb2plY3RJRF07CiAgICAgICAgCiAgICAgICAgICAgIHByb2plY3RJRFtfcHJvamVjdEFkZHJlc3NdID0gX3Byb2plY3RJRDsKICAgICAgICAgICAgcC5jb250cmFjdEFkZHJlc3MgPSBfcHJvamVjdEFkZHJlc3M7IAogICAgICAgICAgICBwLnN0YXJ0RGF0ZSA9IG5vdzsKICAgICAgICAgICAgCiAgICAgICAgICAgIE5ld1Byb2plY3QoX3Byb2plY3RBZGRyZXNzKTsKICAgICAgICB9CiAgICB9CiAgICAKfQoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8qCiAqCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIFBhc3MgREFPLgogKgogKiBUaGUgUHJvamVjdCBzbWFydCBjb250cmFjdCBpcyB1c2VkIGZvciB0aGUgbWFuYWdlbWVudCBvZiB0aGUgUGFzcyBEYW8gcHJvamVjdHMuCiAqCiovCgovLy8gQHRpdGxlIFByb2plY3Qgc21hcnQgY29udHJhY3Qgb2YgdGhlIFBhc3MgRGVjZW50cmFsaXplZCBBdXRvbm9tb3VzIE9yZ2FuaXNhdGlvbgpjb250cmFjdCBQYXNzUHJvamVjdCB7CgogICAgLy8gVGhlIFBhc3MgRGFvIHNtYXJ0IGNvbnRyYWN0CiAgICBQYXNzRGFvIHB1YmxpYyBwYXNzRGFvOwogICAgCiAgICAvLyBUaGUgcHJvamVjdCBuYW1lCiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICAvLyBUaGUgcHJvamVjdCBkZXNjcmlwdGlvbgogICAgc3RyaW5nIHB1YmxpYyBkZXNjcmlwdGlvbjsKICAgIC8vIFRoZSBIYXNoIE9mIHRoZSBwcm9qZWN0IERvY3VtZW50CiAgICBieXRlczMyIHB1YmxpYyBoYXNoT2ZUaGVEb2N1bWVudDsKICAgIC8vIFRoZSBwcm9qZWN0IG1hbmFnZXIgc21hcnQgY29udHJhY3QKICAgIGFkZHJlc3MgcHJvamVjdE1hbmFnZXI7CgogICAgc3RydWN0IG9yZGVyIHsKICAgICAgICAvLyBUaGUgYWRkcmVzcyBvZiB0aGUgY29udHJhY3RvciBzbWFydCBjb250cmFjdAogICAgICAgIGFkZHJlc3MgY29udHJhY3RvckFkZHJlc3M7CiAgICAgICAgLy8gVGhlIGluZGV4IG9mIHRoZSBjb250cmFjdG9yIHByb3Bvc2FsCiAgICAgICAgdWludCBjb250cmFjdG9yUHJvcG9zYWxJRDsKICAgICAgICAvLyBUaGUgYW1vdW50IG9mIHRoZSBvcmRlcgogICAgICAgIHVpbnQgYW1vdW50OwogICAgICAgIC8vIFRoZSBkYXRlIG9mIHRoZSBvcmRlcgogICAgICAgIHVpbnQgb3JkZXJEYXRlOwogICAgfQogICAgLy8gVGhlIG9yZGVycyBvZiB0aGUgRGFvIGZvciB0aGlzIHByb2plY3QKICAgIG9yZGVyW10gcHVibGljIG9yZGVyczsKICAgIAogICAgLy8gVGhlIHRvdGFsIGFtb3VudCBvZiBvcmRlcnMgaW4gd2VpIGZvciB0aGlzIHByb2plY3QKICAgIHVpbnQgcHVibGljIHRvdGFsQW1vdW50T2ZPcmRlcnM7CgogICAgc3RydWN0IHJlc29sdXRpb24gewogICAgICAgIC8vIFRoZSBuYW1lIG9mIHRoZSByZXNvbHV0aW9uCiAgICAgICAgc3RyaW5nIG5hbWU7CiAgICAgICAgLy8gQSBkZXNjcmlwdGlvbiBvZiB0aGUgcmVzb2x1dGlvbgogICAgICAgIHN0cmluZyBkZXNjcmlwdGlvbjsKICAgICAgICAvLyBUaGUgZGF0ZSBvZiB0aGUgcmVzb2x1dGlvbgogICAgICAgIHVpbnQgY3JlYXRpb25EYXRlOwogICAgfQogICAgLy8gUmVzb2x1dGlvbnMgb2YgdGhlIERhbyBmb3IgdGhpcyBwcm9qZWN0CiAgICByZXNvbHV0aW9uW10gcHVibGljIHJlc29sdXRpb25zOwogICAgCi8vIEV2ZW50cwoKICAgIGV2ZW50IE9yZGVyQWRkZWQoYWRkcmVzcyBpbmRleGVkIENsaWVudCwgYWRkcmVzcyBpbmRleGVkIENvbnRyYWN0b3JBZGRyZXNzLCB1aW50IGluZGV4ZWQgQ29udHJhY3RvclByb3Bvc2FsSUQsIHVpbnQgQW1vdW50LCB1aW50IE9yZGVyRGF0ZSk7CiAgICBldmVudCBQcm9qZWN0RGVzY3JpcHRpb25VcGRhdGVkKGFkZHJlc3MgaW5kZXhlZCBCeSwgc3RyaW5nIE5ld0Rlc2NyaXB0aW9uLCBieXRlczMyIE5ld0hhc2hPZlRoZURvY3VtZW50KTsKICAgIGV2ZW50IFJlc29sdXRpb25BZGRlZChhZGRyZXNzIGluZGV4ZWQgQ2xpZW50LCB1aW50IGluZGV4ZWQgUmVzb2x1dGlvbklELCBzdHJpbmcgTmFtZSwgc3RyaW5nIERlc2NyaXB0aW9uKTsKCi8vIENvbnN0YW50IGZ1bmN0aW9ucyAgCgogICAgLy8vIEByZXR1cm4gdGhlIGFjdHVhbCBjb21taXR0ZWUgcm9vbSBvZiB0aGUgRGFvICAgCiAgICBmdW5jdGlvbiBDbGllbnQoKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIHBhc3NEYW8uQWN0dWFsQ29tbWl0dGVlUm9vbSgpOwogICAgfQogICAgCiAgICAvLy8gQHJldHVybiBUaGUgbnVtYmVyIG9mIG9yZGVycyAKICAgIGZ1bmN0aW9uIG51bWJlck9mT3JkZXJzKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBvcmRlcnMubGVuZ3RoIC0gMTsKICAgIH0KICAgIAogICAgLy8vIEByZXR1cm4gVGhlIHByb2plY3QgTWFuYWdlciBhZGRyZXNzCiAgICBmdW5jdGlvbiBQcm9qZWN0TWFuYWdlcigpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gcHJvamVjdE1hbmFnZXI7CiAgICB9CgogICAgLy8vIEByZXR1cm4gVGhlIG51bWJlciBvZiByZXNvbHV0aW9ucyAKICAgIGZ1bmN0aW9uIG51bWJlck9mUmVzb2x1dGlvbnMoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHJlc29sdXRpb25zLmxlbmd0aCAtIDE7CiAgICB9CiAgICAKLy8gbW9kaWZpZXJzCgogICAgLy8gTW9kaWZpZXIgZm9yIHByb2plY3QgbWFuYWdlciBmdW5jdGlvbnMgCiAgICBtb2RpZmllciBvbmx5UHJvamVjdE1hbmFnZXIge2lmIChtc2cuc2VuZGVyICE9IHByb2plY3RNYW5hZ2VyKSB0aHJvdzsgXzt9CgogICAgLy8gTW9kaWZpZXIgZm9yIHRoZSBEYW8gZnVuY3Rpb25zIAogICAgbW9kaWZpZXIgb25seUNsaWVudCB7aWYgKG1zZy5zZW5kZXIgIT0gQ2xpZW50KCkpIHRocm93OyBfO30KCi8vIENvbnN0cnVjdG9yIGZ1bmN0aW9uCgogICAgZnVuY3Rpb24gUGFzc1Byb2plY3QoCiAgICAgICAgUGFzc0RhbyBfcGFzc0RhbywgCiAgICAgICAgc3RyaW5nIF9uYW1lLAogICAgICAgIHN0cmluZyBfZGVzY3JpcHRpb24sCiAgICAgICAgYnl0ZXMzMiBfaGFzaE9mVGhlRG9jdW1lbnQpIHsKCiAgICAgICAgcGFzc0RhbyA9IF9wYXNzRGFvOwogICAgICAgIG5hbWUgPSBfbmFtZTsKICAgICAgICBkZXNjcmlwdGlvbiA9IF9kZXNjcmlwdGlvbjsKICAgICAgICBoYXNoT2ZUaGVEb2N1bWVudCA9IF9oYXNoT2ZUaGVEb2N1bWVudDsKICAgICAgICAKICAgICAgICBvcmRlcnMubGVuZ3RoID0gMTsKICAgICAgICByZXNvbHV0aW9ucy5sZW5ndGggPSAxOwogICAgfQogICAgCi8vIEludGVybmFsIGZ1bmN0aW9ucwoKICAgIC8vLyBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIHJlZ2lzdGVyIGEgbmV3IG9yZGVyCiAgICAvLy8gQHBhcmFtIF9jb250cmFjdG9yQWRkcmVzcyBUaGUgYWRkcmVzcyBvZiB0aGUgY29udHJhY3RvciBzbWFydCBjb250cmFjdAogICAgLy8vIEBwYXJhbSBfY29udHJhY3RvclByb3Bvc2FsSUQgVGhlIGluZGV4IG9mIHRoZSBjb250cmFjdG9yIHByb3Bvc2FsCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBpbiB3ZWkgb2YgdGhlIG9yZGVyCiAgICAvLy8gQHBhcmFtIF9vcmRlckRhdGUgVGhlIGRhdGUgb2YgdGhlIG9yZGVyIAogICAgZnVuY3Rpb24gYWRkT3JkZXIoCgogICAgICAgIGFkZHJlc3MgX2NvbnRyYWN0b3JBZGRyZXNzLCAKICAgICAgICB1aW50IF9jb250cmFjdG9yUHJvcG9zYWxJRCwgCiAgICAgICAgdWludCBfYW1vdW50LCAKICAgICAgICB1aW50IF9vcmRlckRhdGUpIGludGVybmFsIHsKCiAgICAgICAgdWludCBfb3JkZXJJRCA9IG9yZGVycy5sZW5ndGgrKzsKICAgICAgICBvcmRlciBkID0gb3JkZXJzW19vcmRlcklEXTsKICAgICAgICBkLmNvbnRyYWN0b3JBZGRyZXNzID0gX2NvbnRyYWN0b3JBZGRyZXNzOwogICAgICAgIGQuY29udHJhY3RvclByb3Bvc2FsSUQgPSBfY29udHJhY3RvclByb3Bvc2FsSUQ7CiAgICAgICAgZC5hbW91bnQgPSBfYW1vdW50OwogICAgICAgIGQub3JkZXJEYXRlID0gX29yZGVyRGF0ZTsKICAgICAgICAKICAgICAgICB0b3RhbEFtb3VudE9mT3JkZXJzICs9IF9hbW91bnQ7CiAgICAgICAgCiAgICAgICAgT3JkZXJBZGRlZChtc2cuc2VuZGVyLCBfY29udHJhY3RvckFkZHJlc3MsIF9jb250cmFjdG9yUHJvcG9zYWxJRCwgX2Ftb3VudCwgX29yZGVyRGF0ZSk7CiAgICB9CiAgICAKLy8gU2V0dGluZyBmdW5jdGlvbnMKCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0byBhbGxvdyBjbG9uaW5nIG9yZGVycyBpbiBjYXNlIG9mIHVwZ3JhZGUKICAgIC8vLyBAcGFyYW0gX2NvbnRyYWN0b3JBZGRyZXNzIFRoZSBhZGRyZXNzIG9mIHRoZSBjb250cmFjdG9yIHNtYXJ0IGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9jb250cmFjdG9yUHJvcG9zYWxJRCBUaGUgaW5kZXggb2YgdGhlIGNvbnRyYWN0b3IgcHJvcG9zYWwKICAgIC8vLyBAcGFyYW0gX29yZGVyQW1vdW50IFRoZSBhbW91bnQgaW4gd2VpIG9mIHRoZSBvcmRlcgogICAgLy8vIEBwYXJhbSBfbGFzdE9yZGVyRGF0ZSBUaGUgdW5peCBkYXRlIG9mIHRoZSBsYXN0IG9yZGVyIAogICAgZnVuY3Rpb24gY2xvbmVPcmRlcigKICAgICAgICBhZGRyZXNzIF9jb250cmFjdG9yQWRkcmVzcywgCiAgICAgICAgdWludCBfY29udHJhY3RvclByb3Bvc2FsSUQsIAogICAgICAgIHVpbnQgX29yZGVyQW1vdW50LCAKICAgICAgICB1aW50IF9sYXN0T3JkZXJEYXRlKSB7CiAgICAgICAgCiAgICAgICAgaWYgKHByb2plY3RNYW5hZ2VyICE9IDApIHRocm93OwogICAgICAgIAogICAgICAgIGFkZE9yZGVyKF9jb250cmFjdG9yQWRkcmVzcywgX2NvbnRyYWN0b3JQcm9wb3NhbElELCBfb3JkZXJBbW91bnQsIF9sYXN0T3JkZXJEYXRlKTsKICAgIH0KICAgIAogICAgLy8vIEBub3RpY2UgRnVuY3Rpb24gdG8gc2V0IHRoZSBwcm9qZWN0IG1hbmFnZXIKICAgIC8vLyBAcGFyYW0gX3Byb2plY3RNYW5hZ2VyIFRoZSBhZGRyZXNzIG9mIHRoZSBwcm9qZWN0IG1hbmFnZXIgc21hcnQgY29udHJhY3QKICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgc3VjY2Vzc2Z1bAogICAgZnVuY3Rpb24gc2V0UHJvamVjdE1hbmFnZXIoYWRkcmVzcyBfcHJvamVjdE1hbmFnZXIpIHJldHVybnMgKGJvb2wpIHsKCiAgICAgICAgaWYgKF9wcm9qZWN0TWFuYWdlciA9PSAwIHx8IHByb2plY3RNYW5hZ2VyICE9IDApIHJldHVybjsKICAgICAgICAKICAgICAgICBwcm9qZWN0TWFuYWdlciA9IF9wcm9qZWN0TWFuYWdlcjsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCi8vIFByb2plY3QgbWFuYWdlciBmdW5jdGlvbnMKCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0byBhbGxvdyB0aGUgcHJvamVjdCBtYW5hZ2VyIHVwZGF0aW5nIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgcHJvamVjdAogICAgLy8vIEBwYXJhbSBfcHJvamVjdERlc2NyaXB0aW9uIEEgZGVzY3JpcHRpb24gb2YgdGhlIHByb2plY3QKICAgIC8vLyBAcGFyYW0gX2hhc2hPZlRoZURvY3VtZW50IFRoZSBoYXNoIG9mIHRoZSBsYXN0IGRvY3VtZW50CiAgICBmdW5jdGlvbiB1cGRhdGVEZXNjcmlwdGlvbihzdHJpbmcgX3Byb2plY3REZXNjcmlwdGlvbiwgYnl0ZXMzMiBfaGFzaE9mVGhlRG9jdW1lbnQpIG9ubHlQcm9qZWN0TWFuYWdlciB7CiAgICAgICAgZGVzY3JpcHRpb24gPSBfcHJvamVjdERlc2NyaXB0aW9uOwogICAgICAgIGhhc2hPZlRoZURvY3VtZW50ID0gX2hhc2hPZlRoZURvY3VtZW50OwogICAgICAgIFByb2plY3REZXNjcmlwdGlvblVwZGF0ZWQobXNnLnNlbmRlciwgX3Byb2plY3REZXNjcmlwdGlvbiwgX2hhc2hPZlRoZURvY3VtZW50KTsKICAgIH0KCi8vIENsaWVudCBmdW5jdGlvbnMKCiAgICAvLy8gQGRldiBGdW5jdGlvbiB0byBhbGxvdyB0aGUgRGFvIHRvIHJlZ2lzdGVyIGEgbmV3IG9yZGVyCiAgICAvLy8gQHBhcmFtIF9jb250cmFjdG9yQWRkcmVzcyBUaGUgYWRkcmVzcyBvZiB0aGUgY29udHJhY3RvciBzbWFydCBjb250cmFjdAogICAgLy8vIEBwYXJhbSBfY29udHJhY3RvclByb3Bvc2FsSUQgVGhlIGluZGV4IG9mIHRoZSBjb250cmFjdG9yIHByb3Bvc2FsCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBpbiB3ZWkgb2YgdGhlIG9yZGVyCiAgICBmdW5jdGlvbiBuZXdPcmRlcigKICAgICAgICBhZGRyZXNzIF9jb250cmFjdG9yQWRkcmVzcywgCiAgICAgICAgdWludCBfY29udHJhY3RvclByb3Bvc2FsSUQsIAogICAgICAgIHVpbnQgX2Ftb3VudCkgb25seUNsaWVudCB7CiAgICAgICAgICAgIAogICAgICAgIGFkZE9yZGVyKF9jb250cmFjdG9yQWRkcmVzcywgX2NvbnRyYWN0b3JQcm9wb3NhbElELCBfYW1vdW50LCBub3cpOwogICAgfQogICAgCiAgICAvLy8gQGRldiBGdW5jdGlvbiB0byBhbGxvdyB0aGUgRGFvIHRvIHJlZ2lzdGVyIGEgbmV3IHJlc29sdXRpb24KICAgIC8vLyBAcGFyYW0gX25hbWUgVGhlIG5hbWUgb2YgdGhlIHJlc29sdXRpb24KICAgIC8vLyBAcGFyYW0gX2Rlc2NyaXB0aW9uIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgcmVzb2x1dGlvbgogICAgZnVuY3Rpb24gbmV3UmVzb2x1dGlvbigKICAgICAgICBzdHJpbmcgX25hbWUsIAogICAgICAgIHN0cmluZyBfZGVzY3JpcHRpb24pIG9ubHlDbGllbnQgewoKICAgICAgICB1aW50IF9yZXNvbHV0aW9uSUQgPSByZXNvbHV0aW9ucy5sZW5ndGgrKzsKICAgICAgICByZXNvbHV0aW9uIGQgPSByZXNvbHV0aW9uc1tfcmVzb2x1dGlvbklEXTsKICAgICAgICAKICAgICAgICBkLm5hbWUgPSBfbmFtZTsKICAgICAgICBkLmRlc2NyaXB0aW9uID0gX2Rlc2NyaXB0aW9uOwogICAgICAgIGQuY3JlYXRpb25EYXRlID0gbm93OwoKICAgICAgICBSZXNvbHV0aW9uQWRkZWQobXNnLnNlbmRlciwgX3Jlc29sdXRpb25JRCwgZC5uYW1lLCBkLmRlc2NyaXB0aW9uKTsKICAgIH0KfQoKY29udHJhY3QgUGFzc1Byb2plY3RDcmVhdG9yIHsKICAgIAogICAgZXZlbnQgTmV3UGFzc1Byb2plY3QoUGFzc0RhbyBpbmRleGVkIERhbywgUGFzc1Byb2plY3QgaW5kZXhlZCBQcm9qZWN0LCBzdHJpbmcgTmFtZSwgc3RyaW5nIERlc2NyaXB0aW9uLCBieXRlczMyIEhhc2hPZlRoZURvY3VtZW50KTsKCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0byBjcmVhdGUgYSBuZXcgUGFzcyBwcm9qZWN0CiAgICAvLy8gQHBhcmFtIF9wYXNzRGFvIFRoZSBQYXNzIERhbyBzbWFydCBjb250cmFjdAogICAgLy8vIEBwYXJhbSBfbmFtZSBUaGUgcHJvamVjdCBuYW1lCiAgICAvLy8gQHBhcmFtIF9kZXNjcmlwdGlvbiBUaGUgcHJvamVjdCBkZXNjcmlwdGlvbiAobm90IG1hbmRhdG9yeSwgY2FuIGJlIHVwZGF0ZWQgYWZ0ZXIgYnkgdGhlIGNyZWF0b3IpCiAgICAvLy8gQHBhcmFtIF9oYXNoT2ZUaGVEb2N1bWVudCBUaGUgSGFzaCBPZiB0aGUgcHJvamVjdCBEb2N1bWVudCAobm90IG1hbmRhdG9yeSwgY2FuIGJlIHVwZGF0ZWQgYWZ0ZXIgYnkgdGhlIGNyZWF0b3IpCiAgICBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0KAogICAgICAgIFBhc3NEYW8gX3Bhc3NEYW8sCiAgICAgICAgc3RyaW5nIF9uYW1lLCAKICAgICAgICBzdHJpbmcgX2Rlc2NyaXB0aW9uLCAKICAgICAgICBieXRlczMyIF9oYXNoT2ZUaGVEb2N1bWVudAogICAgICAgICkgcmV0dXJucyAoUGFzc1Byb2plY3QpIHsKCiAgICAgICAgUGFzc1Byb2plY3QgX3Bhc3NQcm9qZWN0ID0gbmV3IFBhc3NQcm9qZWN0KF9wYXNzRGFvLCBfbmFtZSwgX2Rlc2NyaXB0aW9uLCBfaGFzaE9mVGhlRG9jdW1lbnQpOwoKICAgICAgICBOZXdQYXNzUHJvamVjdChfcGFzc0RhbywgX3Bhc3NQcm9qZWN0LCBfbmFtZSwgX2Rlc2NyaXB0aW9uLCBfaGFzaE9mVGhlRG9jdW1lbnQpOwoKICAgICAgICByZXR1cm4gX3Bhc3NQcm9qZWN0OwogICAgfQp9CiAgICAKCnByYWdtYSBzb2xpZGl0eSBeMC40Ljg7CgovKgogKgogKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBQYXNzIERBTy4KICoKICogVGhlIFByb2plY3Qgc21hcnQgY29udHJhY3QgaXMgdXNlZCBmb3IgdGhlIG1hbmFnZW1lbnQgb2YgdGhlIFBhc3MgRGFvIHByb2plY3RzLgogKgoqLwoKLy8vIEB0aXRsZSBDb250cmFjdG9yIHNtYXJ0IGNvbnRyYWN0IG9mIHRoZSBQYXNzIERlY2VudHJhbGl6ZWQgQXV0b25vbW91cyBPcmdhbmlzYXRpb24KY29udHJhY3QgUGFzc0NvbnRyYWN0b3IgewogICAgCiAgICAvLyBUaGUgcHJvamVjdCBzbWFydCBjb250cmFjdAogICAgUGFzc1Byb2plY3QgcGFzc1Byb2plY3Q7CiAgICAKICAgIC8vIFRoZSBhZGRyZXNzIG9mIHRoZSBjcmVhdG9yIG9mIHRoaXMgc21hcnQgY29udHJhY3QKICAgIGFkZHJlc3MgcHVibGljIGNyZWF0b3I7CiAgICAvLyBBZGRyZXNzIG9mIHRoZSByZWNpcGllbnQ7CiAgICBhZGRyZXNzIHB1YmxpYyByZWNpcGllbnQ7CgogICAgLy8gRW5kIGRhdGUgb2YgdGhlIHNldHVwIHByb2NlZHVyZQogICAgdWludCBwdWJsaWMgc21hcnRDb250cmFjdFN0YXJ0RGF0ZTsKCiAgICBzdHJ1Y3QgcHJvcG9zYWwgewogICAgICAgIC8vIEFtb3VudCAoaW4gd2VpKSBvZiB0aGUgcHJvcG9zYWwKICAgICAgICB1aW50IGFtb3VudDsKICAgICAgICAvLyBBIGRlc2NyaXB0aW9uIG9mIHRoZSBwcm9wb3NhbAogICAgICAgIHN0cmluZyBkZXNjcmlwdGlvbjsKICAgICAgICAvLyBUaGUgaGFzaCBvZiB0aGUgcHJvcG9zYWwncyBkb2N1bWVudAogICAgICAgIGJ5dGVzMzIgaGFzaE9mVGhlRG9jdW1lbnQ7CiAgICAgICAgLy8gQSB1bml4IHRpbWVzdGFtcCwgZGVub3RpbmcgdGhlIGRhdGUgd2hlbiB0aGUgcHJvcG9zYWwgd2FzIGNyZWF0ZWQKICAgICAgICB1aW50IGRhdGVPZlByb3Bvc2FsOwogICAgICAgIC8vIFRoZSBhbW91bnQgc3VibWl0dGVkIHRvIGEgdm90ZQogICAgICAgIHVpbnQgc3VibWl0dGVkQW1vdW50OwogICAgICAgIC8vIFRoZSBzdW0gYW1vdW50IChpbiB3ZWkpIG9yZGVyZWQgZm9yIHRoaXMgcHJvcG9zYWwgCiAgICAgICAgdWludCBvcmRlckFtb3VudDsKICAgICAgICAvLyBBIHVuaXggdGltZXN0YW1wLCBkZW5vdGluZyB0aGUgZGF0ZSBvZiB0aGUgbGFzdCBvcmRlciBmb3IgdGhlIGFwcHJvdmVkIHByb3Bvc2FsCiAgICAgICAgdWludCBkYXRlT2ZMYXN0T3JkZXI7CiAgICB9CiAgICAvLyBQcm9wb3NhbHMgdG8gd29yayBmb3IgUGFzcyBEYW8KICAgIHByb3Bvc2FsW10gcHVibGljIHByb3Bvc2FsczsKCi8vIEV2ZW50cwoKICAgIGV2ZW50IFJlY2lwaWVudFVwZGF0ZWQoYWRkcmVzcyBpbmRleGVkIEJ5LCBhZGRyZXNzIExhc3RSZWNpcGllbnQsIGFkZHJlc3MgTmV3UmVjaXBpZW50KTsKICAgIGV2ZW50IFdpdGhkcmF3YWwoYWRkcmVzcyBpbmRleGVkIEJ5LCBhZGRyZXNzIGluZGV4ZWQgUmVjaXBpZW50LCB1aW50IEFtb3VudCk7CiAgICBldmVudCBQcm9wb3NhbEFkZGVkKGFkZHJlc3MgQ3JlYXRvciwgdWludCBpbmRleGVkIFByb3Bvc2FsSUQsIHVpbnQgQW1vdW50LCBzdHJpbmcgRGVzY3JpcHRpb24sIGJ5dGVzMzIgSGFzaE9mVGhlRG9jdW1lbnQpOwogICAgZXZlbnQgUHJvcG9zYWxTdWJtaXR0ZWQoYWRkcmVzcyBpbmRleGVkIENsaWVudCwgdWludCBBbW91bnQpOwogICAgZXZlbnQgT3JkZXIoYWRkcmVzcyBpbmRleGVkIENsaWVudCwgdWludCBpbmRleGVkIFByb3Bvc2FsSUQsIHVpbnQgQW1vdW50KTsKCi8vIENvbnN0YW50IGZ1bmN0aW9ucwoKICAgIC8vLyBAcmV0dXJuIHRoZSBhY3R1YWwgY29tbWl0dGVlIHJvb20gb2YgdGhlIERhbwogICAgZnVuY3Rpb24gQ2xpZW50KCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBwYXNzUHJvamVjdC5DbGllbnQoKTsKICAgIH0KCiAgICAvLy8gQHJldHVybiB0aGUgcHJvamVjdCBzbWFydCBjb250cmFjdAogICAgZnVuY3Rpb24gUHJvamVjdCgpIGNvbnN0YW50IHJldHVybnMgKFBhc3NQcm9qZWN0KSB7CiAgICAgICAgcmV0dXJuIHBhc3NQcm9qZWN0OwogICAgfQogICAgCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB1c2VkIGJ5IHRoZSBjbGllbnQgdG8gY2hlY2sgdGhlIHByb3Bvc2FsIGJlZm9yZSBzdWJtaXR0aW5nCiAgICAvLy8gQHBhcmFtIF9zZW5kZXIgVGhlIGNyZWF0b3Igb2YgdGhlIERhbyBwcm9wb3NhbAogICAgLy8vIEBwYXJhbSBfcHJvcG9zYWxJRCBUaGUgaW5kZXggb2YgdGhlIHByb3Bvc2FsCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiB0aGUgcHJvcG9zYWwKICAgIC8vLyBAcmV0dXJuIHRydWUgaWYgdGhlIHByb3Bvc2FsIGNhbiBiZSBzdWJtaXR0ZWQKICAgIGZ1bmN0aW9uIHByb3Bvc2FsQ2hlY2tlZCgKICAgICAgICBhZGRyZXNzIF9zZW5kZXIsCiAgICAgICAgdWludCBfcHJvcG9zYWxJRCwgCiAgICAgICAgdWludCBfYW1vdW50KSBjb25zdGFudCBleHRlcm5hbCBvbmx5Q2xpZW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoX3NlbmRlciAhPSByZWNpcGllbnQgJiYgX3NlbmRlciAhPSBjcmVhdG9yKSByZXR1cm47CiAgICAgICAgaWYgKF9hbW91bnQgPD0gcHJvcG9zYWxzW19wcm9wb3NhbElEXS5hbW91bnQgLSBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdLnN1Ym1pdHRlZEFtb3VudCkgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEByZXR1cm4gVGhlIG51bWJlciBvZiBwcm9wb3NhbHMgICAgIAogICAgZnVuY3Rpb24gbnVtYmVyT2ZQcm9wb3NhbHMoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHByb3Bvc2Fscy5sZW5ndGggLSAxOwogICAgfQoKCi8vIE1vZGlmaWVycwoKICAgIC8vIE1vZGlmaWVyIGZvciBjb250cmFjdG9yIGZ1bmN0aW9ucwogICAgbW9kaWZpZXIgb25seUNvbnRyYWN0b3Ige2lmIChtc2cuc2VuZGVyICE9IHJlY2lwaWVudCkgdGhyb3c7IF87fQogICAgCiAgICAvLyBNb2RpZmllciBmb3IgY2xpZW50IGZ1bmN0aW9ucwogICAgbW9kaWZpZXIgb25seUNsaWVudCB7aWYgKG1zZy5zZW5kZXIgIT0gQ2xpZW50KCkpIHRocm93OyBfO30KCi8vIENvbnN0cnVjdG9yIGZ1bmN0aW9uCgogICAgZnVuY3Rpb24gUGFzc0NvbnRyYWN0b3IoCiAgICAgICAgYWRkcmVzcyBfY3JlYXRvciwgCiAgICAgICAgUGFzc1Byb2plY3QgX3Bhc3NQcm9qZWN0LCAKICAgICAgICBhZGRyZXNzIF9yZWNpcGllbnQsCiAgICAgICAgYm9vbCBfcmVzdG9yZSkgeyAKCiAgICAgICAgaWYgKGFkZHJlc3MoX3Bhc3NQcm9qZWN0KSA9PSAwKSB0aHJvdzsKICAgICAgICAKICAgICAgICBjcmVhdG9yID0gX2NyZWF0b3I7CiAgICAgICAgaWYgKF9yZWNpcGllbnQgPT0gMCkgX3JlY2lwaWVudCA9IF9jcmVhdG9yOwogICAgICAgIHJlY2lwaWVudCA9IF9yZWNpcGllbnQ7CiAgICAgICAgCiAgICAgICAgcGFzc1Byb2plY3QgPSBfcGFzc1Byb2plY3Q7CiAgICAgICAgCiAgICAgICAgaWYgKCFfcmVzdG9yZSkgc21hcnRDb250cmFjdFN0YXJ0RGF0ZSA9IG5vdzsKCiAgICAgICAgcHJvcG9zYWxzLmxlbmd0aCA9IDE7CiAgICB9CgovLyBTZXR0aW5nIGZ1bmN0aW9ucwoKICAgIC8vLyBAbm90aWNlIEZ1bmN0aW9uIHRvIGNsb25lIGEgcHJvcG9zYWwgZnJvbSB0aGUgbGFzdCBjb250cmFjdG9yCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgQW1vdW50IChpbiB3ZWkpIG9mIHRoZSBwcm9wb3NhbAogICAgLy8vIEBwYXJhbSBfZGVzY3JpcHRpb24gQSBkZXNjcmlwdGlvbiBvZiB0aGUgcHJvcG9zYWwKICAgIC8vLyBAcGFyYW0gX2hhc2hPZlRoZURvY3VtZW50IFRoZSBoYXNoIG9mIHRoZSBwcm9wb3NhbCdzIGRvY3VtZW50CiAgICAvLy8gQHBhcmFtIF9kYXRlT2ZQcm9wb3NhbCBBIHVuaXggdGltZXN0YW1wLCBkZW5vdGluZyB0aGUgZGF0ZSB3aGVuIHRoZSBwcm9wb3NhbCB3YXMgY3JlYXRlZAogICAgLy8vIEBwYXJhbSBfb3JkZXJBbW91bnQgVGhlIHN1bSBhbW91bnQgKGluIHdlaSkgb3JkZXJlZCBmb3IgdGhpcyBwcm9wb3NhbCAKICAgIC8vLyBAcGFyYW0gX2RhdGVPZk9yZGVyIEEgdW5peCB0aW1lc3RhbXAsIGRlbm90aW5nIHRoZSBkYXRlIG9mIHRoZSBsYXN0IG9yZGVyIGZvciB0aGUgYXBwcm92ZWQgcHJvcG9zYWwKICAgIC8vLyBAcGFyYW0gX2Nsb25lT3JkZXIgVHJ1ZSBpZiB0aGUgb3JkZXIgaGFzIHRvIGJlIGNsb25lZCBpbiB0aGUgcHJvamVjdCBzbWFydCBjb250cmFjdAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgZnVuY3Rpb24gd2FzIHN1Y2Nlc3NmdWwgb3Igbm90IAogICAgZnVuY3Rpb24gY2xvbmVQcm9wb3NhbCgKICAgICAgICB1aW50IF9hbW91bnQsCiAgICAgICAgc3RyaW5nIF9kZXNjcmlwdGlvbiwKICAgICAgICBieXRlczMyIF9oYXNoT2ZUaGVEb2N1bWVudCwKICAgICAgICB1aW50IF9kYXRlT2ZQcm9wb3NhbCwKICAgICAgICB1aW50IF9vcmRlckFtb3VudCwKICAgICAgICB1aW50IF9kYXRlT2ZPcmRlciwKICAgICAgICBib29sIF9jbG9uZU9yZGVyCiAgICApIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgICAgICAKICAgICAgICBpZiAoc21hcnRDb250cmFjdFN0YXJ0RGF0ZSAhPSAwIHx8IHJlY2lwaWVudCA9PSAwCiAgICAgICAgfHwgbXNnLnNlbmRlciAhPSBjcmVhdG9yKSB0aHJvdzsKICAgICAgICAKICAgICAgICB1aW50IF9wcm9wb3NhbElEID0gcHJvcG9zYWxzLmxlbmd0aCsrOwogICAgICAgIHByb3Bvc2FsIGMgPSBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdOwoKICAgICAgICBjLmFtb3VudCA9IF9hbW91bnQ7CiAgICAgICAgYy5kZXNjcmlwdGlvbiA9IF9kZXNjcmlwdGlvbjsKICAgICAgICBjLmhhc2hPZlRoZURvY3VtZW50ID0gX2hhc2hPZlRoZURvY3VtZW50OyAKICAgICAgICBjLmRhdGVPZlByb3Bvc2FsID0gX2RhdGVPZlByb3Bvc2FsOwogICAgICAgIGMub3JkZXJBbW91bnQgPSBfb3JkZXJBbW91bnQ7CiAgICAgICAgYy5kYXRlT2ZMYXN0T3JkZXIgPSBfZGF0ZU9mT3JkZXI7CgogICAgICAgIFByb3Bvc2FsQWRkZWQobXNnLnNlbmRlciwgX3Byb3Bvc2FsSUQsIF9hbW91bnQsIF9kZXNjcmlwdGlvbiwgX2hhc2hPZlRoZURvY3VtZW50KTsKICAgICAgICAKICAgICAgICBpZiAoX2Nsb25lT3JkZXIpIHBhc3NQcm9qZWN0LmNsb25lT3JkZXIoYWRkcmVzcyh0aGlzKSwgX3Byb3Bvc2FsSUQsIF9vcmRlckFtb3VudCwgX2RhdGVPZk9yZGVyKTsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0byBjbG9zZSB0aGUgc2V0dGluZyBwcm9jZWR1cmUgYW5kIHN0YXJ0IHRvIHVzZSB0aGlzIHNtYXJ0IGNvbnRyYWN0CiAgICAvLy8gQHJldHVybiBUcnVlIGlmIHN1Y2Nlc3NmdWwKICAgIGZ1bmN0aW9uIGNsb3NlU2V0dXAoKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgCiAgICAgICAgaWYgKHNtYXJ0Q29udHJhY3RTdGFydERhdGUgIT0gMCAKICAgICAgICAgICAgfHwgKG1zZy5zZW5kZXIgIT0gY3JlYXRvciAmJiBtc2cuc2VuZGVyICE9IENsaWVudCgpKSkgcmV0dXJuOwoKICAgICAgICBzbWFydENvbnRyYWN0U3RhcnREYXRlID0gbm93OwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAovLyBBY2NvdW50IE1hbmFnZW1lbnQKCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0byB1cGRhdGUgdGhlIHJlY2lwZW50IGFkZHJlc3MKICAgIC8vLyBAcGFyYW0gX25ld1JlY2lwaWVudCBUaGUgYWRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIGZ1bmN0aW9uIHVwZGF0ZVJlY2lwaWVudChhZGRyZXNzIF9uZXdSZWNpcGllbnQpIG9ubHlDb250cmFjdG9yIHsKCiAgICAgICAgaWYgKF9uZXdSZWNpcGllbnQgPT0gMCkgdGhyb3c7CgogICAgICAgIFJlY2lwaWVudFVwZGF0ZWQobXNnLnNlbmRlciwgcmVjaXBpZW50LCBfbmV3UmVjaXBpZW50KTsKICAgICAgICByZWNpcGllbnQgPSBfbmV3UmVjaXBpZW50OwogICAgfSAKCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0byByZWNlaXZlIHBheW1lbnRzCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsgfQogICAgCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0byBhbGxvdyBjb250cmFjdG9ycyB0byB3aXRoZHJhdyBldGhlcnMKICAgIC8vLyBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IChpbiB3ZWkpIHRvIHdpdGhkcmF3CiAgICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50IF9hbW91bnQpIG9ubHlDb250cmFjdG9yIHsKICAgICAgICBpZiAoIXJlY2lwaWVudC5zZW5kKF9hbW91bnQpKSB0aHJvdzsKICAgICAgICBXaXRoZHJhd2FsKG1zZy5zZW5kZXIsIHJlY2lwaWVudCwgX2Ftb3VudCk7CiAgICB9CiAgICAKLy8gUHJvamVjdCBNYW5hZ2VyIEZ1bmN0aW9ucyAgICAKCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0byBhbGxvdyB0aGUgcHJvamVjdCBtYW5hZ2VyIHVwZGF0aW5nIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgcHJvamVjdAogICAgLy8vIEBwYXJhbSBfcHJvamVjdERlc2NyaXB0aW9uIEEgZGVzY3JpcHRpb24gb2YgdGhlIHByb2plY3QKICAgIC8vLyBAcGFyYW0gX2hhc2hPZlRoZURvY3VtZW50IFRoZSBoYXNoIG9mIHRoZSBsYXN0IGRvY3VtZW50CiAgICBmdW5jdGlvbiB1cGRhdGVQcm9qZWN0RGVzY3JpcHRpb24oc3RyaW5nIF9wcm9qZWN0RGVzY3JpcHRpb24sIGJ5dGVzMzIgX2hhc2hPZlRoZURvY3VtZW50KSBvbmx5Q29udHJhY3RvciB7CiAgICAgICAgcGFzc1Byb2plY3QudXBkYXRlRGVzY3JpcHRpb24oX3Byb2plY3REZXNjcmlwdGlvbiwgX2hhc2hPZlRoZURvY3VtZW50KTsKICAgIH0KICAgIAovLyBNYW5hZ2VtZW50IG9mIHByb3Bvc2FscwoKICAgIC8vLyBAbm90aWNlIEZ1bmN0aW9uIHRvIG1ha2UgYSBwcm9wb3NhbCB0byB3b3JrIGZvciB0aGUgY2xpZW50CiAgICAvLy8gQHBhcmFtIF9jcmVhdG9yIFRoZSBhZGRyZXNzIG9mIHRoZSBjcmVhdG9yIG9mIHRoZSBwcm9wb3NhbAogICAgLy8vIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgKGluIHdlaSkgb2YgdGhlIHByb3Bvc2FsCiAgICAvLy8gQHBhcmFtIF9kZXNjcmlwdGlvbiBTdHJpbmcgZGVzY3JpYmluZyB0aGUgcHJvcG9zYWwKICAgIC8vLyBAcGFyYW0gX2hhc2hPZlRoZURvY3VtZW50IFRoZSBoYXNoIG9mIHRoZSBwcm9wb3NhbCBkb2N1bWVudAogICAgLy8vIEByZXR1cm4gVGhlIGluZGV4IG9mIHRoZSBjb250cmFjdG9yIHByb3Bvc2FsCiAgICBmdW5jdGlvbiBuZXdQcm9wb3NhbCgKICAgICAgICBhZGRyZXNzIF9jcmVhdG9yLAogICAgICAgIHVpbnQgX2Ftb3VudCwKICAgICAgICBzdHJpbmcgX2Rlc2NyaXB0aW9uLCAKICAgICAgICBieXRlczMyIF9oYXNoT2ZUaGVEb2N1bWVudAogICAgKSBleHRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gQ2xpZW50KCkgJiYgX2NyZWF0b3IgIT0gcmVjaXBpZW50ICYmIF9jcmVhdG9yICE9IGNyZWF0b3IpIHRocm93OwogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IENsaWVudCgpICYmIG1zZy5zZW5kZXIgIT0gcmVjaXBpZW50ICYmIG1zZy5zZW5kZXIgIT0gY3JlYXRvcikgdGhyb3c7CgogICAgICAgIGlmIChfYW1vdW50ID09IDApIHRocm93OwogICAgICAgIAogICAgICAgIHVpbnQgX3Byb3Bvc2FsSUQgPSBwcm9wb3NhbHMubGVuZ3RoKys7CiAgICAgICAgcHJvcG9zYWwgYyA9IHByb3Bvc2Fsc1tfcHJvcG9zYWxJRF07CgogICAgICAgIGMuYW1vdW50ID0gX2Ftb3VudDsKICAgICAgICBjLmRlc2NyaXB0aW9uID0gX2Rlc2NyaXB0aW9uOwogICAgICAgIGMuaGFzaE9mVGhlRG9jdW1lbnQgPSBfaGFzaE9mVGhlRG9jdW1lbnQ7IAogICAgICAgIGMuZGF0ZU9mUHJvcG9zYWwgPSBub3c7CiAgICAgICAgCiAgICAgICAgUHJvcG9zYWxBZGRlZChtc2cuc2VuZGVyLCBfcHJvcG9zYWxJRCwgYy5hbW91bnQsIGMuZGVzY3JpcHRpb24sIGMuaGFzaE9mVGhlRG9jdW1lbnQpOwogICAgICAgIAogICAgICAgIHJldHVybiBfcHJvcG9zYWxJRDsKICAgIH0KICAgIAogICAgLy8vIEBub3RpY2UgRnVuY3Rpb24gdXNlZCBieSB0aGUgY2xpZW50IHRvIGluZm9yIGFib3V0IHRoZSBzdWJtaXR0ZWQgYW1vdW50CiAgICAvLy8gQHBhcmFtIF9zZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlciB3aG8gc3VibWl0cyB0aGUgcHJvcG9zYWwKICAgIC8vLyBAcGFyYW0gX3Byb3Bvc2FsSUQgVGhlIGluZGV4IG9mIHRoZSBjb250cmFjdG9yIHByb3Bvc2FsCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCAoaW4gd2VpKSBzdWJtaXR0ZWQKICAgIGZ1bmN0aW9uIHN1Ym1pdFByb3Bvc2FsKAogICAgICAgIGFkZHJlc3MgX3NlbmRlciwgCiAgICAgICAgdWludCBfcHJvcG9zYWxJRCwgCiAgICAgICAgdWludCBfYW1vdW50KSBvbmx5Q2xpZW50IHsKCiAgICAgICAgaWYgKF9zZW5kZXIgIT0gcmVjaXBpZW50ICYmIF9zZW5kZXIgIT0gY3JlYXRvcikgdGhyb3c7ICAgIAogICAgICAgIHByb3Bvc2Fsc1tfcHJvcG9zYWxJRF0uc3VibWl0dGVkQW1vdW50ICs9IF9hbW91bnQ7CiAgICAgICAgUHJvcG9zYWxTdWJtaXR0ZWQobXNnLnNlbmRlciwgX2Ftb3VudCk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgRnVuY3Rpb24gdXNlZCBieSB0aGUgY2xpZW50IHRvIG9yZGVyIGFjY29yZGluZyB0byB0aGUgY29udHJhY3RvciBwcm9wb3NhbAogICAgLy8vIEBwYXJhbSBfcHJvcG9zYWxJRCBUaGUgaW5kZXggb2YgdGhlIGNvbnRyYWN0b3IgcHJvcG9zYWwKICAgIC8vLyBAcGFyYW0gX29yZGVyQW1vdW50IFRoZSBhbW91bnQgKGluIHdlaSkgb2YgdGhlIG9yZGVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBvcmRlciB3YXMgbWFkZSBvciBub3QKICAgIGZ1bmN0aW9uIG9yZGVyKAogICAgICAgIHVpbnQgX3Byb3Bvc2FsSUQsCiAgICAgICAgdWludCBfb3JkZXJBbW91bnQKICAgICkgZXh0ZXJuYWwgb25seUNsaWVudCByZXR1cm5zIChib29sKSB7CiAgICAKICAgICAgICBwcm9wb3NhbCBjID0gcHJvcG9zYWxzW19wcm9wb3NhbElEXTsKICAgICAgICAKICAgICAgICB1aW50IF9zdW0gPSBjLm9yZGVyQW1vdW50ICsgX29yZGVyQW1vdW50OwogICAgICAgIGlmIChfc3VtID4gYy5hbW91bnQKICAgICAgICAgICAgfHwgX3N1bSA8IGMub3JkZXJBbW91bnQKICAgICAgICAgICAgfHwgX3N1bSA8IF9vcmRlckFtb3VudCkgcmV0dXJuOyAKCiAgICAgICAgYy5vcmRlckFtb3VudCA9IF9zdW07CiAgICAgICAgYy5kYXRlT2ZMYXN0T3JkZXIgPSBub3c7CiAgICAgICAgCiAgICAgICAgT3JkZXIobXNnLnNlbmRlciwgX3Byb3Bvc2FsSUQsIF9vcmRlckFtb3VudCk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKfQoKY29udHJhY3QgUGFzc0NvbnRyYWN0b3JDcmVhdG9yIHsKICAgIAogICAgLy8gQWRkcmVzcyBvZiB0aGUgcGFzcyBEYW8gc21hcnQgY29udHJhY3QKICAgIFBhc3NEYW8gcHVibGljIHBhc3NEYW87CiAgICAvLyBBZGRyZXNzIG9mIHRoZSBQYXNzIFByb2plY3QgY3JlYXRvcgogICAgUGFzc1Byb2plY3RDcmVhdG9yIHB1YmxpYyBwcm9qZWN0Q3JlYXRvcjsKICAgIAogICAgc3RydWN0IGNvbnRyYWN0b3IgewogICAgICAgIC8vIFRoZSBhZGRyZXNzIG9mIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdG9yCiAgICAgICAgYWRkcmVzcyBjcmVhdG9yOwogICAgICAgIC8vIFRoZSBjb250cmFjdG9yIHNtYXJ0IGNvbnRyYWN0CiAgICAgICAgUGFzc0NvbnRyYWN0b3IgY29udHJhY3RvcjsKICAgICAgICAvLyBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50IGZvciB3aXRoZHJhd2FscwogICAgICAgIGFkZHJlc3MgcmVjaXBpZW50OwogICAgICAgIC8vIFRydWUgaWYgbWV0YSBwcm9qZWN0CiAgICAgICAgYm9vbCBtZXRhUHJvamVjdDsKICAgICAgICAvLyBUaGUgYWRkcmVzcyBvZiB0aGUgZXhpc3RpbmcgcHJvamVjdCBzbWFydCBjb250cmFjdAogICAgICAgIFBhc3NQcm9qZWN0IHBhc3NQcm9qZWN0OwogICAgICAgIC8vIFRoZSBuYW1lIG9mIHRoZSBwcm9qZWN0IChpZiB0aGUgcHJvamVjdCBzbWFydCBjb250cmFjdCBkb2Vzbid0IGV4aXN0KQogICAgICAgIHN0cmluZyBwcm9qZWN0TmFtZTsKICAgICAgICAvLyBBIGRlc2NyaXB0aW9uIG9mIHRoZSBwcm9qZWN0IChjYW4gYmUgdXBkYXRlZCBhZnRlcikKICAgICAgICBzdHJpbmcgcHJvamVjdERlc2NyaXB0aW9uOwogICAgICAgIC8vIFRoZSB1bml4IGNyZWF0aW9uIGRhdGUgb2YgdGhlIGNvbnRyYWN0b3IKICAgICAgICB1aW50IGNyZWF0aW9uRGF0ZTsKICAgIH0KICAgIC8vIGNvbnRyYWN0b3JzIGNyZWF0ZWQgdG8gd29yayBmb3IgUGFzcyBEYW8KICAgIGNvbnRyYWN0b3JbXSBwdWJsaWMgY29udHJhY3RvcnM7CiAgICAKICAgIGV2ZW50IE5ld1Bhc3NDb250cmFjdG9yKGFkZHJlc3MgaW5kZXhlZCBDcmVhdG9yLCBhZGRyZXNzIGluZGV4ZWQgUmVjaXBpZW50LCBQYXNzUHJvamVjdCBpbmRleGVkIFByb2plY3QsIFBhc3NDb250cmFjdG9yIENvbnRyYWN0b3IpOwoKICAgIGZ1bmN0aW9uIFBhc3NDb250cmFjdG9yQ3JlYXRvcihQYXNzRGFvIF9wYXNzRGFvLCBQYXNzUHJvamVjdENyZWF0b3IgX3Byb2plY3RDcmVhdG9yKSB7CiAgICAgICAgcGFzc0RhbyA9IF9wYXNzRGFvOwogICAgICAgIHByb2plY3RDcmVhdG9yID0gX3Byb2plY3RDcmVhdG9yOwogICAgICAgIGNvbnRyYWN0b3JzLmxlbmd0aCA9IDA7CiAgICB9CgogICAgLy8vIEByZXR1cm4gVGhlIG51bWJlciBvZiBjcmVhdGVkIGNvbnRyYWN0b3JzIAogICAgZnVuY3Rpb24gbnVtYmVyT2ZDb250cmFjdG9ycygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gY29udHJhY3RvcnMubGVuZ3RoOwogICAgfQogICAgCiAgICAvLy8gQG5vdGljZSBGdW5jdGlvbiB0byBjcmVhdGUgYSBjb250cmFjdG9yIHNtYXJ0IGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9jcmVhdG9yIFRoZSBhZGRyZXNzIG9mIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdG9yCiAgICAvLy8gQHBhcmFtIF9yZWNpcGllbnQgVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudCBmb3Igd2l0aGRyYXdhbHMKICAgIC8vLyBAcGFyYW0gX21ldGFQcm9qZWN0IFRydWUgaWYgbWV0YSBwcm9qZWN0CiAgICAvLy8gQHBhcmFtIF9wYXNzUHJvamVjdCBUaGUgYWRkcmVzcyBvZiB0aGUgZXhpc3RpbmcgcHJvamVjdCBzbWFydCBjb250cmFjdAogICAgLy8vIEBwYXJhbSBfcHJvamVjdE5hbWUgVGhlIG5hbWUgb2YgdGhlIHByb2plY3QgKGlmIHRoZSBwcm9qZWN0IHNtYXJ0IGNvbnRyYWN0IGRvZXNuJ3QgZXhpc3QpCiAgICAvLy8gQHBhcmFtIF9wcm9qZWN0RGVzY3JpcHRpb24gQSBkZXNjcmlwdGlvbiBvZiB0aGUgcHJvamVjdCAoY2FuIGJlIHVwZGF0ZWQgYWZ0ZXIpCiAgICAvLy8gQHBhcmFtIF9yZXN0b3JlIFRydWUgaWYgb3JkZXJzIG9yIHByb3Bvc2FscyBhcmUgdG8gYmUgY2xvbmVkIGZyb20gb3RoZXIgY29udHJhY3RzCiAgICAvLy8gQHJldHVybiBUaGUgYWRkcmVzcyBvZiB0aGUgY3JlYXRlZCBjb250cmFjdG9yIHNtYXJ0IGNvbnRyYWN0CiAgICBmdW5jdGlvbiBjcmVhdGVDb250cmFjdG9yKAogICAgICAgIGFkZHJlc3MgX2NyZWF0b3IsCiAgICAgICAgYWRkcmVzcyBfcmVjaXBpZW50LCAKICAgICAgICBib29sIF9tZXRhUHJvamVjdCwKICAgICAgICBQYXNzUHJvamVjdCBfcGFzc1Byb2plY3QsCiAgICAgICAgc3RyaW5nIF9wcm9qZWN0TmFtZSwgCiAgICAgICAgc3RyaW5nIF9wcm9qZWN0RGVzY3JpcHRpb24sCiAgICAgICAgYm9vbCBfcmVzdG9yZSkgcmV0dXJucyAoUGFzc0NvbnRyYWN0b3IpIHsKIAogICAgICAgIFBhc3NQcm9qZWN0IF9wcm9qZWN0OwoKICAgICAgICBpZiAoX2NyZWF0b3IgPT0gMCkgX2NyZWF0b3IgPSBtc2cuc2VuZGVyOwogICAgICAgIAogICAgICAgIGlmIChfbWV0YVByb2plY3QpIF9wcm9qZWN0ID0gUGFzc1Byb2plY3QocGFzc0Rhby5NZXRhUHJvamVjdCgpKTsKICAgICAgICBlbHNlIGlmIChhZGRyZXNzKF9wYXNzUHJvamVjdCkgPT0gMCkgCiAgICAgICAgICAgIF9wcm9qZWN0ID0gcHJvamVjdENyZWF0b3IuY3JlYXRlUHJvamVjdChwYXNzRGFvLCBfcHJvamVjdE5hbWUsIF9wcm9qZWN0RGVzY3JpcHRpb24sIDApOwogICAgICAgIGVsc2UgX3Byb2plY3QgPSBfcGFzc1Byb2plY3Q7CgogICAgICAgIFBhc3NDb250cmFjdG9yIF9jb250cmFjdG9yID0gbmV3IFBhc3NDb250cmFjdG9yKF9jcmVhdG9yLCBfcHJvamVjdCwgX3JlY2lwaWVudCwgX3Jlc3RvcmUpOwogICAgICAgIGlmICghX21ldGFQcm9qZWN0ICYmIGFkZHJlc3MoX3Bhc3NQcm9qZWN0KSA9PSAwICYmICFfcmVzdG9yZSkgX3Byb2plY3Quc2V0UHJvamVjdE1hbmFnZXIoYWRkcmVzcyhfY29udHJhY3RvcikpOwogICAgICAgIAogICAgICAgIHVpbnQgX2NvbnRyYWN0b3JJRCA9IGNvbnRyYWN0b3JzLmxlbmd0aCsrOwogICAgICAgIGNvbnRyYWN0b3IgYyA9IGNvbnRyYWN0b3JzW19jb250cmFjdG9ySURdOwogICAgICAgIGMuY3JlYXRvciA9IF9jcmVhdG9yOwogICAgICAgIGMuY29udHJhY3RvciA9IF9jb250cmFjdG9yOwogICAgICAgIGMucmVjaXBpZW50ID0gX3JlY2lwaWVudDsKICAgICAgICBjLm1ldGFQcm9qZWN0ID0gX21ldGFQcm9qZWN0OwogICAgICAgIGMucGFzc1Byb2plY3QgPSBfcGFzc1Byb2plY3Q7CiAgICAgICAgYy5wcm9qZWN0TmFtZSA9IF9wcm9qZWN0TmFtZTsKICAgICAgICBjLnByb2plY3REZXNjcmlwdGlvbiA9IF9wcm9qZWN0RGVzY3JpcHRpb247CiAgICAgICAgYy5jcmVhdGlvbkRhdGUgPSBub3c7CgogICAgICAgIE5ld1Bhc3NDb250cmFjdG9yKF9jcmVhdG9yLCBfcmVjaXBpZW50LCBfcHJvamVjdCwgX2NvbnRyYWN0b3IpOwogCiAgICAgICAgcmV0dXJuIF9jb250cmFjdG9yOwogICAgfQogICAgCn0='.
	

]
