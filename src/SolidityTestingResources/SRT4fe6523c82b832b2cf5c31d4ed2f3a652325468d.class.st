Class {
	#name : #SRT4fe6523c82b832b2cf5c31d4ed2f3a652325468d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4fe6523c82b832b2cf5c31d4ed2f3a652325468d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCgpjb250cmFjdCBEZWJ0VG9rZW4gewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogIC8qKgogIFJlY29nbml0aW9uIGRhdGEKICAqLwogIHN0cmluZyBwdWJsaWMgbmFtZTsKICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAnRFQwLjEnOwogIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzID0gMTg7CgogIC8qKgogIEVSQzIwIHByb3BlcnRpZXMKICAqLwogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZXM7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CgogIC8qKgogIE1pbnRhYmxlIFRva2VuIHByb3BlcnRpZXMKICAqLwogIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBNaW50RmluaXNoZWQoKTsKCiAgLyoqCiAgQWN0dWFsIGxvZ2ljIGRhdGEKICAqLwogIHVpbnQyNTYgcHVibGljIGRheUxlbmd0aDsvL051bWJlciBvZiBzZWNvbmRzIGluIGEgZGF5CiAgdWludDI1NiBwdWJsaWMgbG9hblRlcm07Ly9Mb2FuIHRlcm0gaW4gZGF5cwogIHVpbnQyNTYgcHVibGljIGV4Y2hhbmdlUmF0ZTsgLy9FeGNoYW5nZSByYXRlIGZvciBFdGhlciB0byBsb2FuIGNvaW5zCiAgdWludDI1NiBwdWJsaWMgaW5pdGlhbFN1cHBseTsgLy9LZWVwIHJlY29yZCBvZiBJbml0aWFsIHZhbHVlIG9mIExvYW4KICB1aW50MjU2IHB1YmxpYyBsb2FuQWN0aXZhdGlvbjsgLy9UaW1lc3RhbXAgdGhlIGxvYW4gd2FzIGZ1bmRlZAoKICB1aW50MjU2IHB1YmxpYyBpbnRlcmVzdFJhdGVQZXJDeWNsZTsgLy9JbnRlcmVzdCByYXRlIHBlciBpbnRlcmVzdCBjeWNsZQogIHVpbnQyNTYgcHVibGljIGludGVyZXN0Q3ljbGVMZW5ndGg7IC8vVG90YWwgbnVtYmVyIG9mIGRheXMgcGVyIGludGVyZXN0IGN5Y2xlCgogIHVpbnQyNTYgcHVibGljIHRvdGFsSW50ZXJlc3RDeWNsZXM7IC8vVG90YWwgbnVtYmVyIG9mIGludGVyZXN0IGN5Y2xlcyBjb21wbGV0ZWQKICB1aW50MjU2IHB1YmxpYyBsYXN0SW50ZXJlc3RDeWNsZTsgLy9LZWVwIHJlY29yZCBvZiBJbml0aWFsIHZhbHVlIG9mIExvYW4KCiAgYWRkcmVzcyBwdWJsaWMgbGVuZGVyOyAvL1RoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGxvYW4gd2lsbCBiZSBmdW5kZWQsIGFuZCB0byB3aGljaCB0aGUgcmVmdW5kIHdpbGwgYmUgZGlyZWN0ZWQKICBhZGRyZXNzIHB1YmxpYyBib3Jyb3dlcjsKCiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUEVSQ0VOVF9ESVZJU09SID0gMTAwOwoKICBmdW5jdGlvbiBEZWJ0VG9rZW4oCiAgICAgIHN0cmluZyBfdG9rZW5OYW1lLAogICAgICBzdHJpbmcgX3Rva2VuU3ltYm9sLAogICAgICB1aW50MjU2IF9pbml0aWFsQW1vdW50LAogICAgICB1aW50MjU2IF9leGNoYW5nZVJhdGUsCiAgICAgIHVpbnQyNTYgX2RheUxlbmd0aCwKICAgICAgdWludDI1NiBfbG9hblRlcm0sCiAgICAgIHVpbnQyNTYgX2xvYW5DeWNsZSwKICAgICAgdWludDI1NiBfaW50ZXJlc3RSYXRlUGVyQ3ljbGUsCiAgICAgIGFkZHJlc3MgX2xlbmRlciwKICAgICAgYWRkcmVzcyBfYm9ycm93ZXIKICAgICAgKSB7CgogICAgICByZXF1aXJlKF9leGNoYW5nZVJhdGUgPiAwKTsKICAgICAgcmVxdWlyZShfaW5pdGlhbEFtb3VudCA+IDApOwogICAgICByZXF1aXJlKF9kYXlMZW5ndGggPiAwKTsKICAgICAgcmVxdWlyZShfbG9hbkN5Y2xlID4gMCk7CgogICAgICByZXF1aXJlKF9sZW5kZXIgIT0gMHgwKTsKICAgICAgcmVxdWlyZShfYm9ycm93ZXIgIT0gMHgwKTsKCiAgICAgIGV4Y2hhbmdlUmF0ZSA9IF9leGNoYW5nZVJhdGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhjaGFuZ2UgcmF0ZSBmb3IgdGhlIGNvaW5zCiAgICAgIGluaXRpYWxTdXBwbHkgPSBfaW5pdGlhbEFtb3VudC5tdWwoZXhjaGFuZ2VSYXRlKTsgICAgICAgICAgICAvLyBVcGRhdGUgaW5pdGlhbCBzdXBwbHkKICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVXBkYXRlIHRvdGFsIHN1cHBseQogICAgICBiYWxhbmNlc1tfYm9ycm93ZXJdID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgICAgIC8vIEdpdmUgdGhlIGNyZWF0b3IgYWxsIGluaXRpYWwgdG9rZW5zCgogICAgICBuYW1lID0gX3Rva2VuTmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbW91bnQgb2YgZGVjaW1hbHMgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgICAgc3ltYm9sID0gX3Rva2VuU3ltYm9sOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgc3ltYm9sIGZvciBkaXNwbGF5IHB1cnBvc2VzCgogICAgICBkYXlMZW5ndGggPSBfZGF5TGVuZ3RoOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9TZXQgdGhlIGxlbmd0aCBvZiBlYWNoIGRheSBpbiBzZWNvbmRzLi4uRm9yIGRldiBwdXJwb3NlcwogICAgICBsb2FuVGVybSA9IF9sb2FuVGVybTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9TZXQgdGhlIG51bWJlciBvZiBkYXlzLCBmb3IgbG9hbiBtYXR1cml0eQogICAgICBpbnRlcmVzdEN5Y2xlTGVuZ3RoID0gX2xvYW5DeWNsZTsgICAgICAgICAgICAgICAgICAgLy9zZXQgdGhlIEludGVyZXN0IGN5Y2xlIHBlcmlvZAogICAgICBpbnRlcmVzdFJhdGVQZXJDeWNsZSA9IF9pbnRlcmVzdFJhdGVQZXJDeWNsZTsgICAgICAgICAgICAgICAgICAgICAgLy9TZXQgdGhlIEludGVyZXN0IHJhdGUgcGVyIGN5Y2xlCiAgICAgIGxlbmRlciA9IF9sZW5kZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NldCBsZW5kZXIgYWRkcmVzcwogICAgICBib3Jyb3dlciA9IF9ib3Jyb3dlcjsKCiAgICAgIFRyYW5zZmVyKDAsX2JvcnJvd2VyLHRvdGFsU3VwcGx5KTsvL0FsbG93IGZ1bmRpbmcgYmUgdHJhY2tlZAogIH0KCiAgLyoqCiAgRGVidCB0b2tlbiBmdW5jdGlvbmFsaXR5CiAgICovCiAgZnVuY3Rpb24gYWN0dWFsVG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICB1aW50MjU2IGNvaW5zOwogICAgdWludDI1NiBjeWNsZTsKICAgIChjb2lucyxjeWNsZSkgPSBjYWxjdWxhdGVJbnRlcmVzdER1ZSgpOwogICAgcmV0dXJuIHRvdGFsU3VwcGx5LmFkZChjb2lucyk7CiAgfQoKICAvKioKICBGZXRjaCB0b3RhbCB2YWx1ZSBvZiBsb2FuIGluIHdlaSAoSW5pdGlhbCAraW50ZXJlc3QpCiAgKi8KICBmdW5jdGlvbiBnZXRMb2FuVmFsdWUoYm9vbCBpbml0aWFsKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50KXsKICAgIC8vVE9ETyBnZXQgYSBtb3JlIGR5bmFtaWMgd2F5IHRvIGNhbGN1bGF0ZQogICAgaWYoaW5pdGlhbCA9PSB0cnVlKQogICAgICByZXR1cm4gaW5pdGlhbFN1cHBseS5kaXYoZXhjaGFuZ2VSYXRlKTsKICAgIGVsc2V7CiAgICAgIHVpbnQgdG90YWxUb2tlbnMgPSBhY3R1YWxUb3RhbFN1cHBseSgpLnN1YihiYWxhbmNlc1tib3Jyb3dlcl0pOwogICAgICByZXR1cm4gdG90YWxUb2tlbnMuZGl2KGV4Y2hhbmdlUmF0ZSk7CiAgICB9CiAgfQoKICAvKioKICBGZXRjaCB0b3RhbCBjb2lucyBnYWluZWQgZnJvbSBpbnRlcmVzdAogICovCiAgZnVuY3Rpb24gZ2V0SW50ZXJlc3QoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCl7CiAgICByZXR1cm4gYWN0dWFsVG90YWxTdXBwbHkoKS5zdWIoaW5pdGlhbFN1cHBseSk7CiAgfQoKICAvKioKICBDaGVja3MgdGhhdCBjYWxsZXIncyBhZGRyZXNzIGlzIHRoZSBsZW5kZXIKICAqLwogIGZ1bmN0aW9uIGlzTGVuZGVyKCkgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zKGJvb2wpewogICAgcmV0dXJuIG1zZy5zZW5kZXIgPT0gbGVuZGVyOwogIH0KCiAgLyoqCiAgQ2hlY2sgdGhhdCBjYWxsZXIncyBhZGRyZXNzIGlzIHRoZSBib3Jyb3dlcgogICovCiAgZnVuY3Rpb24gaXNCb3Jyb3dlcigpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyAoYm9vbCl7CiAgICByZXR1cm4gbXNnLnNlbmRlciA9PSBib3Jyb3dlcjsKICB9CgogIGZ1bmN0aW9uIGlzTG9hbkZ1bmRlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsKICAgIHJldHVybiBiYWxhbmNlc1tsZW5kZXJdID4gMCAmJiBiYWxhbmNlc1tib3Jyb3dlcl0gPT0gMDsKICB9CgogIC8qKgogIENoZWNrIGlmIHRoZSBsb2FuIGlzIG1hdHVyZSBmb3IgaW50ZXJlc3QKICAqLwogIGZ1bmN0aW9uIGlzVGVybU92ZXIoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCl7CiAgICBpZihsb2FuQWN0aXZhdGlvbiA9PSAwKQogICAgICByZXR1cm4gZmFsc2U7CiAgICBlbHNlCiAgICAgIHJldHVybiBub3cgPj0gbG9hbkFjdGl2YXRpb24uYWRkKCBkYXlMZW5ndGgubXVsKGxvYW5UZXJtKSApOwogIH0KCiAgLyoqCiAgQ2hlY2sgaWYgdXBkYXRlSW50ZXJlc3QoKSBuZWVkcyB0byBiZSBjYWxsZWQgYmVmb3JlIHJlZnVuZExvYW4oKQogICovCiAgZnVuY3Rpb24gaXNJbnRlcmVzdFN0YXR1c1VwZGF0ZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhib29sKXsKICAgIGlmKCFpc1Rlcm1PdmVyKCkpCiAgICAgIHJldHVybiB0cnVlOwogICAgZWxzZQogICAgICByZXR1cm4gISggbm93ID49IGxhc3RJbnRlcmVzdEN5Y2xlLmFkZCggaW50ZXJlc3RDeWNsZUxlbmd0aC5tdWwoZGF5TGVuZ3RoKSApICk7CiAgfQoKICAvKioKICBjYWxjdWxhdGUgdGhlIHRvdGFsIG51bWJlciBvZiBwYXNzZWQgaW50ZXJlc3QgY3ljbGVzIGFuZCBjb2luIHZhbHVlCiAgKi8KICBmdW5jdGlvbiBjYWxjdWxhdGVJbnRlcmVzdER1ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgX2NvaW5zLHVpbnQyNTYgX2N5Y2xlKXsKICAgIGlmKCFpc1Rlcm1PdmVyKCkgfHwgIWlzTG9hbkZ1bmRlZCgpKQogICAgICByZXR1cm4gKDAsMCk7CiAgICBlbHNlewogICAgICB1aW50IHRpbWVEaWZmID0gbm93LnN1YihsYXN0SW50ZXJlc3RDeWNsZSk7CiAgICAgIF9jeWNsZSA9IHRpbWVEaWZmLmRpdihkYXlMZW5ndGgubXVsKGludGVyZXN0Q3ljbGVMZW5ndGgpICk7CiAgICAgIF9jb2lucyA9IF9jeWNsZS5tdWwoIGludGVyZXN0UmF0ZVBlckN5Y2xlLm11bChpbml0aWFsU3VwcGx5KSApLmRpdihQRVJDRU5UX0RJVklTT1IpOy8vRGVsYXllZCBkaXZpc2lvbiB0byBhdm9pZCB0b28gZWFybHkgZmxvb3IKICAgIH0KICB9CgogIC8qKgogIFVwZGF0ZSB0aGUgaW50ZXJlc3Qgb2YgdGhlIGNvbnRyYWN0CiAgKi8KICBmdW5jdGlvbiB1cGRhdGVJbnRlcmVzdCgpIHB1YmxpYyB7CiAgICByZXF1aXJlKCBpc1Rlcm1PdmVyKCkgKTsKICAgIHVpbnQgaW50ZXJlc3RfY29pbnM7CiAgICB1aW50MjU2IGludGVyZXN0X2N5Y2xlOwogICAgKGludGVyZXN0X2NvaW5zLGludGVyZXN0X2N5Y2xlKSA9IGNhbGN1bGF0ZUludGVyZXN0RHVlKCk7CiAgICBhc3NlcnQoaW50ZXJlc3RfY29pbnMgPiAwICYmIGludGVyZXN0X2N5Y2xlID4gMCk7CiAgICB0b3RhbEludGVyZXN0Q3ljbGVzID0gIHRvdGFsSW50ZXJlc3RDeWNsZXMuYWRkKGludGVyZXN0X2N5Y2xlKTsKICAgIGxhc3RJbnRlcmVzdEN5Y2xlID0gbGFzdEludGVyZXN0Q3ljbGUuYWRkKCBpbnRlcmVzdF9jeWNsZS5tdWwoIGludGVyZXN0Q3ljbGVMZW5ndGgubXVsKGRheUxlbmd0aCkgKSApOwogICAgbWludChsZW5kZXIgLCBpbnRlcmVzdF9jb2lucyk7CiAgfQoKICAvKioKICBNYWtlIHBheW1lbnQgdG8gaW5pdGl0YXRlIGxvYW4KICAqLwogIGZ1bmN0aW9uIGZ1bmRMb2FuKCkgcHVibGljIHBheWFibGV7CiAgICByZXF1aXJlKGlzTGVuZGVyKCkpOwogICAgcmVxdWlyZShtc2cudmFsdWUgPT0gZ2V0TG9hblZhbHVlKHRydWUpKTsgLy9FbnN1cmUgaW5wdXQgYXZhaWxhYmxlCiAgICByZXF1aXJlKCFpc0xvYW5GdW5kZWQoKSk7IC8vQXZvaWQgZG91YmxlIHBheW1lbnQKCiAgICBsb2FuQWN0aXZhdGlvbiA9IG5vdzsgIC8vc3RvcmUgdGhlIHRpbWUgbG9hbiB3YXMgYWN0aXZhdGVkCiAgICBsYXN0SW50ZXJlc3RDeWNsZSA9IG5vdy5hZGQoZGF5TGVuZ3RoLm11bChsb2FuVGVybSkgKSA7IC8vc3RvcmUgdGhlIGRhdGUgaW50ZXJlc3QgbWF0dXJlcwogICAgbWludGluZ0ZpbmlzaGVkID0gZmFsc2U7ICAgICAgICAgICAgICAgICAvL0VuYWJsZSBtaW50aW5nCiAgICB0cmFuc2ZlckZyb20oYm9ycm93ZXIsbGVuZGVyLHRvdGFsU3VwcGx5KTsKCiAgICBib3Jyb3dlci50cmFuc2Zlcihtc2cudmFsdWUpOwogIH0KCiAgLyoqCiAgTWFrZSBwYXltZW50IHRvIHJlZnVuZCBsb2FuCiAgKi8KICBmdW5jdGlvbiByZWZ1bmRMb2FuKCkgb25seUJvcnJvd2VyIHB1YmxpYyBwYXlhYmxlewogICAgaWYoISBpc0ludGVyZXN0U3RhdHVzVXBkYXRlZCgpICkKICAgICAgICB1cGRhdGVJbnRlcmVzdCgpOyAvL0Vuc3VyZSBJbnRlcmVzdCBpcyB1cGRhdGVkCgogICAgcmVxdWlyZShtc2cudmFsdWUgPT0gZ2V0TG9hblZhbHVlKGZhbHNlKSk7CiAgICByZXF1aXJlKGlzTG9hbkZ1bmRlZCgpKTsKCiAgICBmaW5pc2hNaW50aW5nKCkgOy8vUHJldmVudCBmdXJ0aGVyIE1pbnRpbmcKICAgIHRyYW5zZmVyRnJvbShsZW5kZXIsYm9ycm93ZXIsdG90YWxTdXBwbHkpOwoKICAgIGxlbmRlci50cmFuc2Zlcihtc2cudmFsdWUpOwogIH0KCiAgLyoqCiAgUGFydGlhbCBFUkMyMCBmdW5jdGlvbmFsaXR5CiAgICovCgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpbnRlcm5hbCB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICAvKioKICBNaW50YWJsZVRva2VuIGZ1bmN0aW9uYWxpdHkKICAgKi8KCiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBtaW50IHRva2VucwogICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIG1pbnRlZCB0b2tlbnMuCiAgICogQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gbWludC4KICAgKiBAcmV0dXJuIEEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgY2FuTWludCBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgIE1pbnQoX3RvLCBfYW1vdW50KTsKICAgIFRyYW5zZmVyKDB4MCwgX3RvLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBzdG9wIG1pbnRpbmcgbmV3IHRva2Vucy4KICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgb25seUJvcnJvd2VyIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICBNaW50RmluaXNoZWQoKTsKICAgIHJldHVybiB0cnVlOwogIH0KCgogIC8qKgogIEZhbGxiYWNrIGZ1bmN0aW9uCiAgKi8KICBmdW5jdGlvbigpIHB1YmxpYyBwYXlhYmxlewogICAgcmVxdWlyZShpbml0aWFsU3VwcGx5ID4gMCk7Ly9TdG9wIHRoZSB3aG9sZSBwcm9jZXNzIGlmIGluaXRpYWxTdXBwbHkgbm90IHNldAogICAgaWYoaXNCb3Jyb3dlcigpKQogICAgICByZWZ1bmRMb2FuKCk7CiAgICBlbHNlIGlmKGlzTGVuZGVyKCkpCiAgICAgIGZ1bmRMb2FuKCk7CiAgICBlbHNlIHJldmVydCgpOyAvL1Rocm93IGlmIG5laXRoZXIgb2YgY2FzZXMgYXBwbHksIGVuc3VyZSBubyBmcmVlIG1vbmV5CiAgfQoKICAvKioKICBNb2RpZmllcnMKICAqLwogIG1vZGlmaWVyIG9ubHlCb3Jyb3dlcigpIHsKICAgIHJlcXVpcmUoaXNCb3Jyb3dlcigpKTsKICAgIF87CiAgfQp9Cgpjb250cmFjdCBEZWJ0VG9rZW5EZXBsb3llciBpcyBPd25hYmxlewoKICAgIGFkZHJlc3MgcHVibGljIGRheVRva2VuQWRkcmVzczsKICAgIHVpbnQgcHVibGljIGRheVRva2VuRmVlczsgLy9EQVkgdG9rZW5zIHRvIGJlIHBhaWQgZm9yIGRlcGxveWluZyBjdXN0b20gREFZIGNvbnRyYWN0CiAgICBFUkMyMCBkYXlUb2tlbjsKCiAgICBldmVudCBGZWVVcGRhdGVkKHVpbnQgX2ZlZSwgdWludCBfdGltZSk7CiAgICBldmVudCBEZWJ0VG9rZW5DcmVhdGVkKGFkZHJlc3MgIF9jcmVhdG9yLCBhZGRyZXNzIF9kZWJ0VG9rZW5BZGRyZXNzLCB1aW50MjU2IF90aW1lKTsKCiAgICBmdW5jdGlvbiBEZWJ0VG9rZW5EZXBsb3llcihhZGRyZXNzIF9kYXlUb2tlbkFkZHJlc3MsIHVpbnQgX2RheVRva2VuRmVlcyl7CiAgICAgICAgZGF5VG9rZW5BZGRyZXNzID0gX2RheVRva2VuQWRkcmVzczsKICAgICAgICBkYXlUb2tlbkZlZXMgPSBfZGF5VG9rZW5GZWVzOwogICAgICAgIGRheVRva2VuID0gRVJDMjAoZGF5VG9rZW5BZGRyZXNzKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVEYXlUb2tlbkZlZXModWludCBfZGF5VG9rZW5GZWVzKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBkYXlUb2tlbkZlZXMgPSBfZGF5VG9rZW5GZWVzOwogICAgICAgIEZlZVVwZGF0ZWQoZGF5VG9rZW5GZWVzLCBub3cpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZURlYnRUb2tlbihzdHJpbmcgX3Rva2VuTmFtZSwKICAgICAgICBzdHJpbmcgX3Rva2VuU3ltYm9sLAogICAgICAgIHVpbnQyNTYgX2luaXRpYWxBbW91bnQsCiAgICAgICAgdWludDI1NiBfZXhjaGFuZ2VSYXRlLAogICAgICAgIHVpbnQyNTYgX2RheUxlbmd0aCwKICAgICAgICB1aW50MjU2IF9sb2FuVGVybSwKICAgICAgICB1aW50MjU2IF9sb2FuQ3ljbGUsCiAgICAgICAgdWludDI1NiBfaW50cmVzdFJhdGVQZXJDeWNsZSwKICAgICAgICBhZGRyZXNzIF9sZW5kZXIpCiAgICBwdWJsaWMKICAgIHsKICAgICAgICBpZihkYXlUb2tlbi50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgZGF5VG9rZW5GZWVzKSl7CiAgICAgICAgICAgIERlYnRUb2tlbiBuZXdEZWJ0VG9rZW4gPSBuZXcgRGVidFRva2VuKF90b2tlbk5hbWUsIF90b2tlblN5bWJvbCwgX2luaXRpYWxBbW91bnQsIF9leGNoYW5nZVJhdGUsCiAgICAgICAgICAgICAgICAgX2RheUxlbmd0aCwgX2xvYW5UZXJtLCBfbG9hbkN5Y2xlLAogICAgICAgICAgICAgICAgX2ludHJlc3RSYXRlUGVyQ3ljbGUsIF9sZW5kZXIsIG1zZy5zZW5kZXIpOwogICAgICAgICAgICBEZWJ0VG9rZW5DcmVhdGVkKG1zZy5zZW5kZXIsIGFkZHJlc3MobmV3RGVidFRva2VuKSwgbm93KTsKICAgICAgICB9CiAgICB9CgogICAgLy8gdG8gY29sbGVjdCBhbGwgZmVlcyBwYWlkIHRpbGwgbm93CiAgICBmdW5jdGlvbiBmZXRjaERheVRva2VucygpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGRheVRva2VuLnRyYW5zZmVyKG93bmVyLCBkYXlUb2tlbi5iYWxhbmNlT2YodGhpcykpOwogICAgfQp9'.
	

]
