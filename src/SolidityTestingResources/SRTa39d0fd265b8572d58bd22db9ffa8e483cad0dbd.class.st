Class {
	#name : #SRTa39d0fd265b8572d58bd22db9ffa8e483cad0dbd,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa39d0fd265b8572d58bd22db9ffa8e483cad0dbd >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CiAKLy9JbnNwaXJlZCBieSBodHRwczovL3Rlc3Quam9jaGVuLWhvZW5pY2tlLmRlL2V0aC9wb256aXRva2VuLwoKY29udHJhY3QgRXRoUHlyYW1pZCB7CiAgICBhZGRyZXNzIGZhY3Rvcnk7CgoJLy8gc2NhbGVGYWN0b3IgaXMgdXNlZCB0byBjb252ZXJ0IEV0aGVyIGludG8gdG9rZW5zIGFuZCB2aWNlLXZlcnNhOiB0aGV5J3JlIG9mIGRpZmZlcmVudAoJLy8gb3JkZXJzIG9mIG1hZ25pdHVkZSwgaGVuY2UgdGhlIG5lZWQgdG8gYnJpZGdlIGJldHdlZW4gdGhlIHR3by4KCXVpbnQyNTYgY29uc3RhbnQgc2NhbGVGYWN0b3IgPSAweDEwMDAwMDAwMDAwMDAwMDAwOyAgLy8gMl42NAoKCS8vIENSUiA9IDUwJQoJLy8gQ1JSIGlzIENhc2ggUmVzZXJ2ZSBSYXRpbyAoaW4gdGhpcyBjYXNlIENyeXB0byBSZXNlcnZlIFJhdGlvKS4KCS8vIEZvciBtb3JlIG9uIHRoaXM6IGNoZWNrIG91dCBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SZXNlcnZlX3JlcXVpcmVtZW50CglpbnQgY29uc3RhbnQgY3JyX24gPSAxOyAvLyBDUlIgbnVtZXJhdG9yCglpbnQgY29uc3RhbnQgY3JyX2QgPSAyOyAvLyBDUlIgZGVub21pbmF0b3IKCgkvLyBUaGUgcHJpY2UgY29lZmZpY2llbnQuIENob3NlbiBzdWNoIHRoYXQgYXQgMSB0b2tlbiB0b3RhbCBzdXBwbHkKCS8vIHRoZSBhbW91bnQgaW4gcmVzZXJ2ZSBpcyAwLjUgZXRoZXIgYW5kIHRva2VuIHByaWNlIGlzIDEgRXRoZXIuCglpbnQgY29uc3RhbnQgcHJpY2VfY29lZmYgPSAtMHgyOTZBQkY3ODRBMzU4NDY4QzsKCgkvLyBUeXBpY2FsIHZhbHVlcyB0aGF0IHdlIGhhdmUgdG8gZGVjbGFyZS4KCXN0cmluZyBjb25zdGFudCBwdWJsaWMgbmFtZSA9ICJFdGhQeXJhbWlkIjsKCXN0cmluZyBjb25zdGFudCBwdWJsaWMgc3ltYm9sID0gIkVQWSI7Cgl1aW50OCBjb25zdGFudCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKCgkvLyBBcnJheSBiZXR3ZWVuIGVhY2ggYWRkcmVzcyBhbmQgdGhlaXIgbnVtYmVyIG9mIHRva2Vucy4KCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgdG9rZW5CYWxhbmNlOwoJCQoJLy8gQXJyYXkgYmV0d2VlbiBlYWNoIGFkZHJlc3MgYW5kIGhvdyBtdWNoIEV0aGVyIGhhcyBiZWVuIHBhaWQgb3V0IHRvIGl0LgoJLy8gTm90ZSB0aGF0IHRoaXMgaXMgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCW1hcHBpbmcoYWRkcmVzcyA9PiBpbnQyNTYpIHB1YmxpYyBwYXlvdXRzOwoKCS8vIFZhcmlhYmxlIHRyYWNraW5nIGhvdyBtYW55IHRva2VucyBhcmUgaW4gZXhpc3RlbmNlIG92ZXJhbGwuCgl1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCgkvLyBBZ2dyZWdhdGUgc3VtIG9mIGFsbCBwYXlvdXRzLgoJLy8gTm90ZSB0aGF0IHRoaXMgaXMgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCWludDI1NiB0b3RhbFBheW91dHM7CgoJLy8gVmFyaWFibGUgdHJhY2tpbmcgaG93IG11Y2ggRXRoZXIgZWFjaCB0b2tlbiBpcyBjdXJyZW50bHkgd29ydGguCgkvLyBOb3RlIHRoYXQgdGhpcyBpcyBzY2FsZWQgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJdWludDI1NiBlYXJuaW5nc1BlclRva2VuOwoJCgkvLyBDdXJyZW50IGNvbnRyYWN0IGJhbGFuY2UgaW4gRXRoZXIKCXVpbnQyNTYgcHVibGljIGNvbnRyYWN0QmFsYW5jZTsKCglmdW5jdGlvbiBFdGhQeXJhbWlkKGFkZHJlc3MgX2ZhY3RvcnkpIHB1YmxpYyB7CiAgICAgICAgICBmYWN0b3J5ID0gX2ZhY3Rvcnk7CiAgICAgICAgfQoKCS8vIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIGFyZSB1c2VkIGJ5IHRoZSBmcm9udC1lbmQgZm9yIGRpc3BsYXkgcHVycG9zZXMuCgoJLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRva2VucyBjdXJyZW50bHkgaGVsZCBieSBfb3duZXIuCglmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKCQlyZXR1cm4gdG9rZW5CYWxhbmNlW19vd25lcl07Cgl9CgoJLy8gV2l0aGRyYXdzIGFsbCBkaXZpZGVuZHMgaGVsZCBieSB0aGUgY2FsbGVyIHNlbmRpbmcgdGhlIHRyYW5zYWN0aW9uLCB1cGRhdGVzCgkvLyB0aGUgcmVxdWlzaXRlIGdsb2JhbCB2YXJpYWJsZXMsIGFuZCB0cmFuc2ZlcnMgRXRoZXIgYmFjayB0byB0aGUgY2FsbGVyLgoJZnVuY3Rpb24gd2l0aGRyYXcoKSBwdWJsaWMgewoJCS8vIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhZGRyZXNzIHRoZSByZXF1ZXN0IGNhbWUgZnJvbS4KCQl2YXIgYmFsYW5jZSA9IGRpdmlkZW5kcyhtc2cuc2VuZGVyKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dHMgYXJyYXksIGluY3JlbWVudGluZyB0aGUgcmVxdWVzdCBhZGRyZXNzIGJ5IGBiYWxhbmNlYC4KCQlwYXlvdXRzW21zZy5zZW5kZXJdICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEluY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gU2VuZCB0aGUgZGl2aWRlbmRzIHRvIHRoZSBhZGRyZXNzIHRoYXQgcmVxdWVzdGVkIHRoZSB3aXRoZHJhdy4KCQljb250cmFjdEJhbGFuY2UgPSBzdWIoY29udHJhY3RCYWxhbmNlLCBiYWxhbmNlKTsKICAgICAgICB2YXIgd2l0aGRyYXdhbEZlZSA9IGRpdihiYWxhbmNlLDUpOwogICAgICAgIGZhY3RvcnkudHJhbnNmZXIod2l0aGRyYXdhbEZlZSk7CiAgICAgICAgdmFyIGJhbGFuY2VNaW51c1dpdGhkcmF3YWxGZWUgPSBzdWIoYmFsYW5jZSx3aXRoZHJhd2FsRmVlKTsKCQltc2cuc2VuZGVyLnRyYW5zZmVyKGJhbGFuY2VNaW51c1dpdGhkcmF3YWxGZWUpOwoJfQoKCS8vIENvbnZlcnRzIHRoZSBFdGhlciBhY2NydWVkIGFzIGRpdmlkZW5kcyBiYWNrIGludG8gRVBZIHRva2VucyB3aXRob3V0IGhhdmluZyB0bwoJLy8gd2l0aGRyYXcgaXQgZmlyc3QuIFNhdmVzIG9uIGdhcyBhbmQgcG90ZW50aWFsIHByaWNlIHNwaWtlIGxvc3MuCglmdW5jdGlvbiByZWludmVzdERpdmlkZW5kcygpIHB1YmxpYyB7CgkJLy8gUmV0cmlldmUgdGhlIGRpdmlkZW5kcyBhc3NvY2lhdGVkIHdpdGggdGhlIGFkZHJlc3MgdGhlIHJlcXVlc3QgY2FtZSBmcm9tLgoJCXZhciBiYWxhbmNlID0gZGl2aWRlbmRzKG1zZy5zZW5kZXIpOwoJCQoJCS8vIFVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSwgaW5jcmVtZW50aW5nIHRoZSByZXF1ZXN0IGFkZHJlc3MgYnkgYGJhbGFuY2VgLgoJCS8vIFNpbmNlIHRoaXMgaXMgZXNzZW50aWFsbHkgYSBzaG9ydGN1dCB0byB3aXRoZHJhd2luZyBhbmQgcmVpbnZlc3RpbmcsIHRoaXMgc3RlcCBzdGlsbCBob2xkcy4KCQlwYXlvdXRzW21zZy5zZW5kZXJdICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEluY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gQXNzaWduIGJhbGFuY2UgdG8gYSBuZXcgdmFyaWFibGUuCgkJdWludCB2YWx1ZV8gPSAodWludCkgKGJhbGFuY2UpOwoJCQoJCS8vIElmIHlvdXIgZGl2aWRlbmRzIGFyZSB3b3J0aCBsZXNzIHRoYW4gMSBzemFibywgb3IgbW9yZSB0aGFuIGEgbWlsbGlvbiBFdGhlcgoJCS8vIChpbiB3aGljaCBjYXNlLCB3aHkgYXJlIHlvdSBldmVuIGhlcmUpLCBhYm9ydC4KCQlpZiAodmFsdWVfIDwgMC4wMDAwMDEgZXRoZXIgfHwgdmFsdWVfID4gMTAwMDAwMCBldGhlcikKCQkJcmV2ZXJ0KCk7CgkJCQoJCS8vIG1zZy5zZW5kZXIgaXMgdGhlIGFkZHJlc3Mgb2YgdGhlIGNhbGxlci4KCQl2YXIgc2VuZGVyID0gbXNnLnNlbmRlcjsKCQkKCQkvLyBBIHRlbXBvcmFyeSByZXNlcnZlIHZhcmlhYmxlIHVzZWQgZm9yIGNhbGN1bGF0aW5nIHRoZSByZXdhcmQgdGhlIGhvbGRlciBnZXRzIGZvciBidXlpbmcgdG9rZW5zLgoJCS8vIChZZXMsIHRoZSBidXllciByZWNlaXZlcyBhIHBhcnQgb2YgdGhlIGRpc3RyaWJ1dGlvbiBhcyB3ZWxsISkKCQl2YXIgcmVzID0gcmVzZXJ2ZSgpIC0gYmFsYW5jZTsKCgkJLy8gMTAlIG9mIHRoZSB0b3RhbCBFdGhlciBzZW50IGlzIHVzZWQgdG8gcGF5IGV4aXN0aW5nIGhvbGRlcnMuCgkJdmFyIGZlZSA9IGRpdih2YWx1ZV8sIDEwKTsKCQkKCQkvLyBUaGUgYW1vdW50IG9mIEV0aGVyIHVzZWQgdG8gcHVyY2hhc2UgbmV3IHRva2VucyBmb3IgdGhlIGNhbGxlci4KCQl2YXIgbnVtRXRoZXIgPSB2YWx1ZV8gLSBmZWU7CgkJCgkJLy8gVGhlIG51bWJlciBvZiB0b2tlbnMgd2hpY2ggY2FuIGJlIHB1cmNoYXNlZCBmb3IgbnVtRXRoZXIuCgkJdmFyIG51bVRva2VucyA9IGNhbGN1bGF0ZURpdmlkZW5kVG9rZW5zKG51bUV0aGVyLCBiYWxhbmNlKTsKCQkKCQkvLyBUaGUgYnV5ZXIgZmVlLCBzY2FsZWQgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJCXZhciBidXllckZlZSA9IGZlZSAqIHNjYWxlRmFjdG9yOwoJCQoJCS8vIENoZWNrIHRoYXQgd2UgaGF2ZSB0b2tlbnMgaW4gZXhpc3RlbmNlICh0aGlzIHNob3VsZCBhbHdheXMgYmUgdHJ1ZSksIG9yCgkJLy8gZWxzZSB5b3UncmUgZ29ubmEgaGF2ZSBhIGJhZCB0aW1lLgoJCWlmICh0b3RhbFN1cHBseSA+IDApIHsKCQkJLy8gQ29tcHV0ZSB0aGUgYm9udXMgY28tZWZmaWNpZW50IGZvciBhbGwgZXhpc3RpbmcgaG9sZGVycyBhbmQgdGhlIGJ1eWVyLgoJCQkvLyBUaGUgYnV5ZXIgcmVjZWl2ZXMgcGFydCBvZiB0aGUgZGlzdHJpYnV0aW9uIGZvciBlYWNoIHRva2VuIGJvdWdodCBpbiB0aGUKCQkJLy8gc2FtZSB3YXkgdGhleSB3b3VsZCBoYXZlIGlmIHRoZXkgYm91Z2h0IGVhY2ggdG9rZW4gaW5kaXZpZHVhbGx5LgoJCQl2YXIgYm9udXNDb0VmZiA9CgkJCSAgICAoc2NhbGVGYWN0b3IgLSAocmVzICsgbnVtRXRoZXIpICogbnVtVG9rZW5zICogc2NhbGVGYWN0b3IgLyAodG90YWxTdXBwbHkgKyBudW1Ub2tlbnMpIC8gbnVtRXRoZXIpCgkJCSAgICAqICh1aW50KShjcnJfZCkgLyAodWludCkoY3JyX2QtY3JyX24pOwoJCQkJCgkJCS8vIFRoZSB0b3RhbCByZXdhcmQgdG8gYmUgZGlzdHJpYnV0ZWQgYW1vbmdzdCB0aGUgbWFzc2VzIGlzIHRoZSBmZWUgKGluIEV0aGVyKQoJCQkvLyBtdWx0aXBsaWVkIGJ5IHRoZSBib251cyBjby1lZmZpY2llbnQuCgkJCXZhciBob2xkZXJSZXdhcmQgPSBmZWUgKiBib251c0NvRWZmOwoJCQkKCQkJYnV5ZXJGZWUgLT0gaG9sZGVyUmV3YXJkOwoKCQkJLy8gRmVlIGlzIGRpc3RyaWJ1dGVkIHRvIGFsbCBleGlzdGluZyB0b2tlbiBob2xkZXJzIGJlZm9yZSB0aGUgbmV3IHRva2VucyBhcmUgcHVyY2hhc2VkLgoJCQkvLyByZXdhcmRQZXJTaGFyZSBpcyB0aGUgYW1vdW50IGdhaW5lZCBwZXIgdG9rZW4gdGhhbmtzIHRvIHRoaXMgYnV5LWluLgoJCQl2YXIgcmV3YXJkUGVyU2hhcmUgPSBob2xkZXJSZXdhcmQgLyB0b3RhbFN1cHBseTsKCQkJCgkJCS8vIFRoZSBFdGhlciB2YWx1ZSBwZXIgdG9rZW4gaXMgaW5jcmVhc2VkIHByb3BvcnRpb25hbGx5LgoJCQllYXJuaW5nc1BlclRva2VuICs9IHJld2FyZFBlclNoYXJlOwoJCX0KCQkKCQkvLyBBZGQgdGhlIG51bVRva2VucyB3aGljaCB3ZXJlIGp1c3QgY3JlYXRlZCB0byB0aGUgdG90YWwgc3VwcGx5LiBXZSdyZSBhIGNyeXB0byBjZW50cmFsIGJhbmshCgkJdG90YWxTdXBwbHkgPSBhZGQodG90YWxTdXBwbHksIG51bVRva2Vucyk7CgkJCgkJLy8gQXNzaWduIHRoZSB0b2tlbnMgdG8gdGhlIGJhbGFuY2Ugb2YgdGhlIGJ1eWVyLgoJCXRva2VuQmFsYW5jZVtzZW5kZXJdID0gYWRkKHRva2VuQmFsYW5jZVtzZW5kZXJdLCBudW1Ub2tlbnMpOwoJCQoJCS8vIFVwZGF0ZSB0aGUgcGF5b3V0IGFycmF5IHNvIHRoYXQgdGhlIGJ1eWVyIGNhbm5vdCBjbGFpbSBkaXZpZGVuZHMgb24gcHJldmlvdXMgcHVyY2hhc2VzLgoJCS8vIEFsc28gaW5jbHVkZSB0aGUgZmVlIHBhaWQgZm9yIGVudGVyaW5nIHRoZSBzY2hlbWUuCgkJLy8gRmlyc3Qgd2UgY29tcHV0ZSBob3cgbXVjaCB3YXMganVzdCBwYWlkIG91dCB0byB0aGUgYnV5ZXIuLi4KCQl2YXIgcGF5b3V0RGlmZiAgPSAoaW50MjU2KSAoKGVhcm5pbmdzUGVyVG9rZW4gKiBudW1Ub2tlbnMpIC0gYnV5ZXJGZWUpOwoJCQoJCS8vIFRoZW4gd2UgdXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5IGZvciB0aGUgYnV5ZXIgd2l0aCB0aGlzIGFtb3VudC4uLgoJCXBheW91dHNbc2VuZGVyXSArPSBwYXlvdXREaWZmOwoJCQoJCS8vIEFuZCB0aGVuIHdlIGZpbmFsbHkgYWRkIGl0IHRvIHRoZSB2YXJpYWJsZSB0cmFja2luZyB0aGUgdG90YWwgYW1vdW50IHNwZW50IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICAgICs9IHBheW91dERpZmY7CgkJCgl9CgoJLy8gU2VsbHMgeW91ciB0b2tlbnMgZm9yIEV0aGVyLiBUaGlzIEV0aGVyIGlzIGFzc2lnbmVkIHRvIHRoZSBjYWxsZXJzIGVudHJ5CgkvLyBpbiB0aGUgdG9rZW5CYWxhbmNlIGFycmF5LCBhbmQgdGhlcmVmb3JlIGlzIHNob3duIGFzIGEgZGl2aWRlbmQuIEEgc2Vjb25kCgkvLyBjYWxsIHRvIHdpdGhkcmF3KCkgbXVzdCBiZSBtYWRlIHRvIGludm9rZSB0aGUgdHJhbnNmZXIgb2YgRXRoZXIgYmFjayB0byB5b3VyIGFkZHJlc3MuCglmdW5jdGlvbiBzZWxsTXlUb2tlbnMoKSBwdWJsaWMgewoJCXZhciBiYWxhbmNlID0gYmFsYW5jZU9mKG1zZy5zZW5kZXIpOwoJCXNlbGwoYmFsYW5jZSk7Cgl9CgoJLy8gVGhlIHNsYW0tdGhlLWJ1dHRvbiBlc2NhcGUgaGF0Y2guIFNlbGxzIHRoZSBjYWxsZXJzIHRva2VucyBmb3IgRXRoZXIsIHRoZW4gaW1tZWRpYXRlbHkKCS8vIGludm9rZXMgdGhlIHdpdGhkcmF3KCkgZnVuY3Rpb24sIHNlbmRpbmcgdGhlIHJlc3VsdGluZyBFdGhlciB0byB0aGUgY2FsbGVycyBhZGRyZXNzLgogICAgZnVuY3Rpb24gZ2V0TWVPdXRPZkhlcmUoKSBwdWJsaWMgewoJCXNlbGxNeVRva2VucygpOwogICAgICAgIHdpdGhkcmF3KCk7Cgl9CgoJLy8gR2F0ZWtlZXBlciBmdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgYW1vdW50IG9mIEV0aGVyIGJlaW5nIHNlbnQgaXNuJ3QgZWl0aGVyCgkvLyB0b28gc21hbGwgb3IgdG9vIGxhcmdlLiBJZiBpdCBwYXNzZXMsIGdvZXMgZGlyZWN0IHRvIGJ1eSgpLgoJZnVuY3Rpb24gZnVuZCgpIHBheWFibGUgcHVibGljIHsKCQkvLyBEb24ndCBhbGxvdyBmb3IgZnVuZGluZyBpZiB0aGUgYW1vdW50IG9mIEV0aGVyIHNlbnQgaXMgbGVzcyB0aGFuIDEgc3phYm8uCgkJaWYgKG1zZy52YWx1ZSA+IDAuMDAwMDAxIGV0aGVyKSB7CiAgICAgICAgICAgIHZhciBmYWN0b3J5RmVlID0gZGl2KG1zZy52YWx1ZSw1KTsKICAgICAgICAgICAgZmFjdG9yeS50cmFuc2ZlcihmYWN0b3J5RmVlKTsKICAgICAgICAgICAgdmFyIGZ1bmRlZEFtb3VudCA9IHN1Yihtc2cudmFsdWUsZmFjdG9yeUZlZSk7CgkJICAgIGNvbnRyYWN0QmFsYW5jZSA9IGFkZChjb250cmFjdEJhbGFuY2UsIGZ1bmRlZEFtb3VudCk7CgkJCWJ1eSgpOwoJCX0gZWxzZSB7CgkJCXJldmVydCgpOwoJCX0KICAgIH0KCgkvLyBGdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIChkeW5hbWljKSBwcmljZSBvZiBidXlpbmcgYSBmaW5uZXkgd29ydGggb2YgdG9rZW5zLgoJZnVuY3Rpb24gYnV5UHJpY2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewoJCXJldHVybiBnZXRUb2tlbnNGb3JFdGhlcigxIGZpbm5leSk7Cgl9CgoJLy8gRnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSAoZHluYW1pYykgcHJpY2Ugb2Ygc2VsbGluZyBhIHNpbmdsZSB0b2tlbi4KCWZ1bmN0aW9uIHNlbGxQcmljZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdmFyIGV0aCA9IGdldEV0aGVyRm9yVG9rZW5zKDEgZmlubmV5KTsKICAgICAgICB2YXIgZmVlID0gZGl2KGV0aCwgMTApOwogICAgICAgIHJldHVybiBldGggLSBmZWU7CiAgICB9CgoJLy8gQ2FsY3VsYXRlIHRoZSBjdXJyZW50IGRpdmlkZW5kcyBhc3NvY2lhdGVkIHdpdGggdGhlIGNhbGxlciBhZGRyZXNzLiBUaGlzIGlzIHRoZSBuZXQgcmVzdWx0CgkvLyBvZiBtdWx0aXBseWluZyB0aGUgbnVtYmVyIG9mIHRva2VucyBoZWxkIGJ5IHRoZWlyIGN1cnJlbnQgdmFsdWUgaW4gRXRoZXIgYW5kIHN1YnRyYWN0aW5nIHRoZQoJLy8gRXRoZXIgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIHBhaWQgb3V0LgoJZnVuY3Rpb24gZGl2aWRlbmRzKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBhbW91bnQpIHsKCQlyZXR1cm4gKHVpbnQyNTYpICgoaW50MjU2KShlYXJuaW5nc1BlclRva2VuICogdG9rZW5CYWxhbmNlW19vd25lcl0pIC0gcGF5b3V0c1tfb3duZXJdKSAvIHNjYWxlRmFjdG9yOwoJfQoKCS8vIFZlcnNpb24gb2Ygd2l0aGRyYXcgdGhhdCBleHRyYWN0cyB0aGUgZGl2aWRlbmRzIGFuZCBzZW5kcyB0aGUgRXRoZXIgdG8gdGhlIGNhbGxlci4KCS8vIFRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBjYXNlIHdoZW4gdGhlcmUgaXMgbm8gdHJhbnNhY3Rpb24gZGF0YSwgYW5kIHRoYXQgc2hvdWxkIGJlCgkvLyBxdWl0ZSByYXJlIHVubGVzcyBpbnRlcmFjdGluZyBkaXJlY3RseSB3aXRoIHRoZSBzbWFydCBjb250cmFjdC4KCWZ1bmN0aW9uIHdpdGhkcmF3T2xkKGFkZHJlc3MgdG8pIHB1YmxpYyB7CgkJLy8gUmV0cmlldmUgdGhlIGRpdmlkZW5kcyBhc3NvY2lhdGVkIHdpdGggdGhlIGFkZHJlc3MgdGhlIHJlcXVlc3QgY2FtZSBmcm9tLgoJCXZhciBiYWxhbmNlID0gZGl2aWRlbmRzKG1zZy5zZW5kZXIpOwoJCQoJCS8vIFVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSwgaW5jcmVtZW50aW5nIHRoZSByZXF1ZXN0IGFkZHJlc3MgYnkgYGJhbGFuY2VgLgoJCXBheW91dHNbbXNnLnNlbmRlcl0gKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gSW5jcmVhc2UgdGhlIHRvdGFsIGFtb3VudCB0aGF0J3MgYmVlbiBwYWlkIG91dCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBTZW5kIHRoZSBkaXZpZGVuZHMgdG8gdGhlIGFkZHJlc3MgdGhhdCByZXF1ZXN0ZWQgdGhlIHdpdGhkcmF3LgoJCWNvbnRyYWN0QmFsYW5jZSA9IHN1Yihjb250cmFjdEJhbGFuY2UsIGJhbGFuY2UpOwogICAgICAgIHZhciB3aXRoZHJhd2FsRmVlID0gZGl2KGJhbGFuY2UsNSk7CiAgICAgICAgZmFjdG9yeS50cmFuc2Zlcih3aXRoZHJhd2FsRmVlKTsKICAgICAgICB2YXIgYmFsYW5jZU1pbnVzV2l0aGRyYXdhbEZlZSA9IHN1YihiYWxhbmNlLHdpdGhkcmF3YWxGZWUpOwoJCXRvLnRyYW5zZmVyKGJhbGFuY2VNaW51c1dpdGhkcmF3YWxGZWUpOwoJfQoKCS8vIEludGVybmFsIGJhbGFuY2UgZnVuY3Rpb24sIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBkeW5hbWljIHJlc2VydmUgdmFsdWUuCglmdW5jdGlvbiBiYWxhbmNlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBhbW91bnQpIHsKCQkvLyBtc2cudmFsdWUgaXMgdGhlIGFtb3VudCBvZiBFdGhlciBzZW50IGJ5IHRoZSB0cmFuc2FjdGlvbi4KCQlyZXR1cm4gY29udHJhY3RCYWxhbmNlIC0gbXNnLnZhbHVlOwoJfQoKCWZ1bmN0aW9uIGJ1eSgpIGludGVybmFsIHsKCQkvLyBBbnkgdHJhbnNhY3Rpb24gb2YgbGVzcyB0aGFuIDEgc3phYm8gaXMgbGlrZWx5IHRvIGJlIHdvcnRoIGxlc3MgdGhhbiB0aGUgZ2FzIHVzZWQgdG8gc2VuZCBpdC4KCQlpZiAobXNnLnZhbHVlIDwgMC4wMDAwMDEgZXRoZXIgfHwgbXNnLnZhbHVlID4gMTAwMDAwMCBldGhlcikKCQkJcmV2ZXJ0KCk7CgkJCQkJCQoJCS8vIG1zZy5zZW5kZXIgaXMgdGhlIGFkZHJlc3Mgb2YgdGhlIGNhbGxlci4KCQl2YXIgc2VuZGVyID0gbXNnLnNlbmRlcjsKCQkKCQkvLyAxMCUgb2YgdGhlIHRvdGFsIEV0aGVyIHNlbnQgaXMgdXNlZCB0byBwYXkgZXhpc3RpbmcgaG9sZGVycy4KCQl2YXIgZmVlID0gZGl2KG1zZy52YWx1ZSwgMTApOwoJCQoJCS8vIFRoZSBhbW91bnQgb2YgRXRoZXIgdXNlZCB0byBwdXJjaGFzZSBuZXcgdG9rZW5zIGZvciB0aGUgY2FsbGVyLgoJCXZhciBudW1FdGhlciA9IG1zZy52YWx1ZSAtIGZlZTsKCQkKCQkvLyBUaGUgbnVtYmVyIG9mIHRva2VucyB3aGljaCBjYW4gYmUgcHVyY2hhc2VkIGZvciBudW1FdGhlci4KCQl2YXIgbnVtVG9rZW5zID0gZ2V0VG9rZW5zRm9yRXRoZXIobnVtRXRoZXIpOwoJCQoJCS8vIFRoZSBidXllciBmZWUsIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgkJdmFyIGJ1eWVyRmVlID0gZmVlICogc2NhbGVGYWN0b3I7CgkJCgkJLy8gQ2hlY2sgdGhhdCB3ZSBoYXZlIHRva2VucyBpbiBleGlzdGVuY2UgKHRoaXMgc2hvdWxkIGFsd2F5cyBiZSB0cnVlKSwgb3IKCQkvLyBlbHNlIHlvdSdyZSBnb25uYSBoYXZlIGEgYmFkIHRpbWUuCgkJaWYgKHRvdGFsU3VwcGx5ID4gMCkgewoJCQkvLyBDb21wdXRlIHRoZSBib251cyBjby1lZmZpY2llbnQgZm9yIGFsbCBleGlzdGluZyBob2xkZXJzIGFuZCB0aGUgYnV5ZXIuCgkJCS8vIFRoZSBidXllciByZWNlaXZlcyBwYXJ0IG9mIHRoZSBkaXN0cmlidXRpb24gZm9yIGVhY2ggdG9rZW4gYm91Z2h0IGluIHRoZQoJCQkvLyBzYW1lIHdheSB0aGV5IHdvdWxkIGhhdmUgaWYgdGhleSBib3VnaHQgZWFjaCB0b2tlbiBpbmRpdmlkdWFsbHkuCgkJCXZhciBib251c0NvRWZmID0KCQkJICAgIChzY2FsZUZhY3RvciAtIChyZXNlcnZlKCkgKyBudW1FdGhlcikgKiBudW1Ub2tlbnMgKiBzY2FsZUZhY3RvciAvICh0b3RhbFN1cHBseSArIG51bVRva2VucykgLyBudW1FdGhlcikKCQkJICAgICogKHVpbnQpKGNycl9kKSAvICh1aW50KShjcnJfZC1jcnJfbik7CgkJCQkKCQkJLy8gVGhlIHRvdGFsIHJld2FyZCB0byBiZSBkaXN0cmlidXRlZCBhbW9uZ3N0IHRoZSBtYXNzZXMgaXMgdGhlIGZlZSAoaW4gRXRoZXIpCgkJCS8vIG11bHRpcGxpZWQgYnkgdGhlIGJvbnVzIGNvLWVmZmljaWVudC4KCQkJdmFyIGhvbGRlclJld2FyZCA9IGZlZSAqIGJvbnVzQ29FZmY7CgkJCQoJCQlidXllckZlZSAtPSBob2xkZXJSZXdhcmQ7CgoJCQkvLyBGZWUgaXMgZGlzdHJpYnV0ZWQgdG8gYWxsIGV4aXN0aW5nIHRva2VuIGhvbGRlcnMgYmVmb3JlIHRoZSBuZXcgdG9rZW5zIGFyZSBwdXJjaGFzZWQuCgkJCS8vIHJld2FyZFBlclNoYXJlIGlzIHRoZSBhbW91bnQgZ2FpbmVkIHBlciB0b2tlbiB0aGFua3MgdG8gdGhpcyBidXktaW4uCgkJCXZhciByZXdhcmRQZXJTaGFyZSA9IGhvbGRlclJld2FyZCAvIHRvdGFsU3VwcGx5OwoJCQkKCQkJLy8gVGhlIEV0aGVyIHZhbHVlIHBlciB0b2tlbiBpcyBpbmNyZWFzZWQgcHJvcG9ydGlvbmFsbHkuCgkJCWVhcm5pbmdzUGVyVG9rZW4gKz0gcmV3YXJkUGVyU2hhcmU7CgkJCQoJCX0KCgkJLy8gQWRkIHRoZSBudW1Ub2tlbnMgd2hpY2ggd2VyZSBqdXN0IGNyZWF0ZWQgdG8gdGhlIHRvdGFsIHN1cHBseS4gV2UncmUgYSBjcnlwdG8gY2VudHJhbCBiYW5rIQoJCXRvdGFsU3VwcGx5ID0gYWRkKHRvdGFsU3VwcGx5LCBudW1Ub2tlbnMpOwoKCQkvLyBBc3NpZ24gdGhlIHRva2VucyB0byB0aGUgYmFsYW5jZSBvZiB0aGUgYnV5ZXIuCgkJdG9rZW5CYWxhbmNlW3NlbmRlcl0gPSBhZGQodG9rZW5CYWxhbmNlW3NlbmRlcl0sIG51bVRva2Vucyk7CgoJCS8vIFVwZGF0ZSB0aGUgcGF5b3V0IGFycmF5IHNvIHRoYXQgdGhlIGJ1eWVyIGNhbm5vdCBjbGFpbSBkaXZpZGVuZHMgb24gcHJldmlvdXMgcHVyY2hhc2VzLgoJCS8vIEFsc28gaW5jbHVkZSB0aGUgZmVlIHBhaWQgZm9yIGVudGVyaW5nIHRoZSBzY2hlbWUuCgkJLy8gRmlyc3Qgd2UgY29tcHV0ZSBob3cgbXVjaCB3YXMganVzdCBwYWlkIG91dCB0byB0aGUgYnV5ZXIuLi4KCQl2YXIgcGF5b3V0RGlmZiA9IChpbnQyNTYpICgoZWFybmluZ3NQZXJUb2tlbiAqIG51bVRva2VucykgLSBidXllckZlZSk7CgkJCgkJLy8gVGhlbiB3ZSB1cGRhdGUgdGhlIHBheW91dHMgYXJyYXkgZm9yIHRoZSBidXllciB3aXRoIHRoaXMgYW1vdW50Li4uCgkJcGF5b3V0c1tzZW5kZXJdICs9IHBheW91dERpZmY7CgkJCgkJLy8gQW5kIHRoZW4gd2UgZmluYWxseSBhZGQgaXQgdG8gdGhlIHZhcmlhYmxlIHRyYWNraW5nIHRoZSB0b3RhbCBhbW91bnQgc3BlbnQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgICAgKz0gcGF5b3V0RGlmZjsKCQkKCX0KCgkvLyBTZWxsIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdG9rZW5zIGFuZCBjb252ZXJ0cyB0aGVtIGludG8gRXRoZXIuIEFsc28gY29tZXMgd2l0aCBhIDEwJSBmZWUKCS8vIHRvIGRpc2NvdXJhZ2luZyBkdW1waW5nLCBhbmQgbWVhbnMgdGhhdCBpZiBzb21lb25lIG5lYXIgdGhlIHRvcCBzZWxscywgdGhlIGZlZSBkaXN0cmlidXRlZAoJLy8gd2lsbCBiZSAqc2lnbmlmaWNhbnQqLgoJZnVuY3Rpb24gc2VsbCh1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgewoJICAgIC8vIENhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIEV0aGVyIHRoYXQgdGhlIGhvbGRlcnMgdG9rZW5zIHNlbGwgZm9yIGF0IHRoZSBjdXJyZW50IHNlbGwgcHJpY2UuCgkJdmFyIG51bUV0aGVyc0JlZm9yZUZlZSA9IGdldEV0aGVyRm9yVG9rZW5zKGFtb3VudCk7CgkJCgkJLy8gMTAlIG9mIHRoZSByZXN1bHRpbmcgRXRoZXIgaXMgdXNlZCB0byBwYXkgcmVtYWluaW5nIGhvbGRlcnMuCiAgICAgICAgdmFyIGZlZSA9IGRpdihudW1FdGhlcnNCZWZvcmVGZWUsIDEwKTsKCQkKCQkvLyBOZXQgRXRoZXIgZm9yIHRoZSBzZWxsZXIgYWZ0ZXIgdGhlIGZlZSBoYXMgYmVlbiBzdWJ0cmFjdGVkLgogICAgICAgIHZhciBudW1FdGhlcnMgPSBudW1FdGhlcnNCZWZvcmVGZWUgLSBmZWU7CgkJCgkJLy8gKlJlbW92ZSogdGhlIG51bVRva2VucyB3aGljaCB3ZXJlIGp1c3Qgc29sZCBmcm9tIHRoZSB0b3RhbCBzdXBwbHkuIFdlJ3JlIC9kZWZpbml0ZWx5LyBhIGNyeXB0byBjZW50cmFsIGJhbmsuCgkJdG90YWxTdXBwbHkgPSBzdWIodG90YWxTdXBwbHksIGFtb3VudCk7CgkJCiAgICAgICAgLy8gUmVtb3ZlIHRoZSB0b2tlbnMgZnJvbSB0aGUgYmFsYW5jZSBvZiB0aGUgYnV5ZXIuCgkJdG9rZW5CYWxhbmNlW21zZy5zZW5kZXJdID0gc3ViKHRva2VuQmFsYW5jZVttc2cuc2VuZGVyXSwgYW1vdW50KTsKCiAgICAgICAgLy8gVXBkYXRlIHRoZSBwYXlvdXQgYXJyYXkgc28gdGhhdCB0aGUgc2VsbGVyIGNhbm5vdCBjbGFpbSBmdXR1cmUgZGl2aWRlbmRzIHVubGVzcyB0aGV5IGJ1eSBiYWNrIGluLgoJCS8vIEZpcnN0IHdlIGNvbXB1dGUgaG93IG11Y2ggd2FzIGp1c3QgcGFpZCBvdXQgdG8gdGhlIHNlbGxlci4uLgoJCXZhciBwYXlvdXREaWZmID0gKGludDI1NikgKGVhcm5pbmdzUGVyVG9rZW4gKiBhbW91bnQgKyAobnVtRXRoZXJzICogc2NhbGVGYWN0b3IpKTsKCQkKICAgICAgICAvLyBXZSByZWR1Y2UgdGhlIGFtb3VudCBwYWlkIG91dCB0byB0aGUgc2VsbGVyICh0aGlzIGVmZmVjdGl2ZWx5IHJlc2V0cyB0aGVpciBwYXlvdXRzIHZhbHVlIHRvIHplcm8sCgkJLy8gc2luY2UgdGhleSdyZSBzZWxsaW5nIGFsbCBvZiB0aGVpciB0b2tlbnMpLiBUaGlzIG1ha2VzIHN1cmUgdGhlIHNlbGxlciBpc24ndCBkaXNhZHZhbnRhZ2VkIGlmCgkJLy8gdGhleSBkZWNpZGUgdG8gYnV5IGJhY2sgaW4uCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSAtPSBwYXlvdXREaWZmOwkJCgkJCgkJLy8gRGVjcmVhc2UgdGhlIHRvdGFsIGFtb3VudCB0aGF0J3MgYmVlbiBwYWlkIG91dCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgogICAgICAgIHRvdGFsUGF5b3V0cyAtPSBwYXlvdXREaWZmOwoJCQoJCS8vIENoZWNrIHRoYXQgd2UgaGF2ZSB0b2tlbnMgaW4gZXhpc3RlbmNlICh0aGlzIGlzIGEgYml0IG9mIGFuIGlycmVsZXZhbnQgY2hlY2sgc2luY2Ugd2UncmUKCQkvLyBzZWxsaW5nIHRva2VucywgYnV0IGl0IGd1YXJkcyBhZ2FpbnN0IGRpdmlzaW9uIGJ5IHplcm8pLgoJCWlmICh0b3RhbFN1cHBseSA+IDApIHsKCQkJLy8gU2NhbGUgdGhlIEV0aGVyIHRha2VuIGFzIHRoZSBzZWxsaW5nIGZlZSBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgkJCXZhciBldGhlckZlZSA9IGZlZSAqIHNjYWxlRmFjdG9yOwoJCQkKCQkJLy8gRmVlIGlzIGRpc3RyaWJ1dGVkIHRvIGFsbCByZW1haW5pbmcgdG9rZW4gaG9sZGVycy4KCQkJLy8gcmV3YXJkUGVyU2hhcmUgaXMgdGhlIGFtb3VudCBnYWluZWQgcGVyIHRva2VuIHRoYW5rcyB0byB0aGlzIHNlbGwuCgkJCXZhciByZXdhcmRQZXJTaGFyZSA9IGV0aGVyRmVlIC8gdG90YWxTdXBwbHk7CgkJCQoJCQkvLyBUaGUgRXRoZXIgdmFsdWUgcGVyIHRva2VuIGlzIGluY3JlYXNlZCBwcm9wb3J0aW9uYWxseS4KCQkJZWFybmluZ3NQZXJUb2tlbiA9IGFkZChlYXJuaW5nc1BlclRva2VuLCByZXdhcmRQZXJTaGFyZSk7CgkJfQoJfQoJCgkvLyBEeW5hbWljIHZhbHVlIG9mIEV0aGVyIGluIHJlc2VydmUsIGFjY29yZGluZyB0byB0aGUgQ1JSIHJlcXVpcmVtZW50LgoJZnVuY3Rpb24gcmVzZXJ2ZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW1vdW50KSB7CgkJcmV0dXJuIHN1YihiYWxhbmNlKCksCgkJCSAoKHVpbnQyNTYpICgoaW50MjU2KSAoZWFybmluZ3NQZXJUb2tlbiAqIHRvdGFsU3VwcGx5KSAtIHRvdGFsUGF5b3V0cykgLyBzY2FsZUZhY3RvcikpOwoJfQoKCS8vIENhbGN1bGF0ZXMgdGhlIG51bWJlciBvZiB0b2tlbnMgdGhhdCBjYW4gYmUgYm91Z2h0IGZvciBhIGdpdmVuIGFtb3VudCBvZiBFdGhlciwgYWNjb3JkaW5nIHRvIHRoZQoJLy8gZHluYW1pYyByZXNlcnZlIGFuZCB0b3RhbFN1cHBseSB2YWx1ZXMgKGRlcml2ZWQgZnJvbSB0aGUgYnV5IGFuZCBzZWxsIHByaWNlcykuCglmdW5jdGlvbiBnZXRUb2tlbnNGb3JFdGhlcih1aW50MjU2IGV0aGVydmFsdWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2VucykgewoJCXJldHVybiBzdWIoZml4ZWRFeHAoZml4ZWRMb2cocmVzZXJ2ZSgpICsgZXRoZXJ2YWx1ZSkqY3JyX24vY3JyX2QgKyBwcmljZV9jb2VmZiksIHRvdGFsU3VwcGx5KTsKCX0KCgkvLyBTZW1hbnRpY2FsbHkgc2ltaWxhciB0byBnZXRUb2tlbnNGb3JFdGhlciwgYnV0IHN1YnRyYWN0cyB0aGUgY2FsbGVycyBiYWxhbmNlIGZyb20gdGhlIGFtb3VudCBvZiBFdGhlciByZXR1cm5lZCBmb3IgY29udmVyc2lvbi4KCWZ1bmN0aW9uIGNhbGN1bGF0ZURpdmlkZW5kVG9rZW5zKHVpbnQyNTYgZXRoZXJ2YWx1ZSwgdWludDI1NiBzdWJ2YWx1ZSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG9rZW5zKSB7CgkJcmV0dXJuIHN1YihmaXhlZEV4cChmaXhlZExvZyhyZXNlcnZlKCkgLSBzdWJ2YWx1ZSArIGV0aGVydmFsdWUpKmNycl9uL2Nycl9kICsgcHJpY2VfY29lZmYpLCB0b3RhbFN1cHBseSk7Cgl9CgoJLy8gQ29udmVydHMgYSBudW1iZXIgdG9rZW5zIGludG8gYW4gRXRoZXIgdmFsdWUuCglmdW5jdGlvbiBnZXRFdGhlckZvclRva2Vucyh1aW50MjU2IHRva2VucykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgZXRoZXJ2YWx1ZSkgewoJCS8vIEhvdyBtdWNoIHJlc2VydmUgRXRoZXIgZG8gd2UgaGF2ZSBsZWZ0IGluIHRoZSBjb250cmFjdD8KCQl2YXIgcmVzZXJ2ZUFtb3VudCA9IHJlc2VydmUoKTsKCgkJLy8gSWYgeW91J3JlIHRoZSBIaWdobGFuZGVyIChvciBiYWdob2xkZXIpLCB5b3UgZ2V0IFRoZSBQcml6ZS4gRXZlcnl0aGluZyBsZWZ0IGluIHRoZSB2YXVsdC4KCQlpZiAodG9rZW5zID09IHRvdGFsU3VwcGx5KQoJCQlyZXR1cm4gcmVzZXJ2ZUFtb3VudDsKCgkJLy8gSWYgdGhlcmUgd291bGQgYmUgZXhjZXNzIEV0aGVyIGxlZnQgYWZ0ZXIgdGhlIHRyYW5zYWN0aW9uIHRoaXMgaXMgY2FsbGVkIHdpdGhpbiwgcmV0dXJuIHRoZSBFdGhlcgoJCS8vIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGVxdWF0aW9uIGluIERyIEpvY2hlbiBIb2VuaWNrZSdzIG9yaWdpbmFsIFBvbnppIHBhcGVyLCB3aGljaCBjYW4gYmUgZm91bmQKCQkvLyBhdCBodHRwczovL3Rlc3Quam9jaGVuLWhvZW5pY2tlLmRlL2V0aC9wb256aXRva2VuLyBpbiB0aGUgdGhpcmQgZXF1YXRpb24sIHdpdGggdGhlIENSUiBudW1lcmF0b3IgCgkJLy8gYW5kIGRlbm9taW5hdG9yIGFsdGVyZWQgdG8gMSBhbmQgMiByZXNwZWN0aXZlbHkuCgkJcmV0dXJuIHN1YihyZXNlcnZlQW1vdW50LCBmaXhlZEV4cCgoZml4ZWRMb2codG90YWxTdXBwbHkgLSB0b2tlbnMpIC0gcHJpY2VfY29lZmYpICogY3JyX2QvY3JyX24pKTsKCX0KCgkvLyBZb3UgZG9uJ3QgY2FyZSBhYm91dCB0aGVzZSwgYnV0IGlmIHlvdSByZWFsbHkgZG8gdGhleSdyZSBoZXggdmFsdWVzIGZvciAKCS8vIGNvLWVmZmljaWVudHMgdXNlZCB0byBzaW11bGF0ZSBhcHByb3hpbWF0aW9ucyBvZiB0aGUgbG9nIGFuZCBleHAgZnVuY3Rpb25zLgoJaW50MjU2ICBjb25zdGFudCBvbmUgICAgICAgID0gMHgxMDAwMDAwMDAwMDAwMDAwMDsKCXVpbnQyNTYgY29uc3RhbnQgc3FydDIgICAgICA9IDB4MTZhMDllNjY3ZjNiY2M5MDg7Cgl1aW50MjU2IGNvbnN0YW50IHNxcnRkb3Q1ICAgPSAweDBiNTA0ZjMzM2Y5ZGU2NDg0OwoJaW50MjU2ICBjb25zdGFudCBsbjIgICAgICAgID0gMHgwYjE3MjE3ZjdkMWNmNzlhYzsKCWludDI1NiAgY29uc3RhbnQgbG4yXzY0ZG90NSA9IDB4MmNiNTNmMDlmMDVjYzYyN2M4OwoJaW50MjU2ICBjb25zdGFudCBjMSAgICAgICAgID0gMHgxZmZmZmZmZmZmZjlkYWM5YjsKCWludDI1NiAgY29uc3RhbnQgYzMgICAgICAgICA9IDB4MGFhYWFhYWFjMTY4Nzc5MDg7CglpbnQyNTYgIGNvbnN0YW50IGM1ICAgICAgICAgPSAweDA2NjY2NjRlNWU5ZmEwYzk5OwoJaW50MjU2ICBjb25zdGFudCBjNyAgICAgICAgID0gMHgwNDkyNTQwMjZhNzYzMGFjZjsKCWludDI1NiAgY29uc3RhbnQgYzkgICAgICAgICA9IDB4MDM4YmQ3NWVkMzc3NTNkNjg7CglpbnQyNTYgIGNvbnN0YW50IGMxMSAgICAgICAgPSAweDAzMjg0YTBjMTQ2MTA5MjRmOwoKCS8vIFRoZSBwb2x5bm9taWFsIFIgPSBjMSp4ICsgYzMqeF4zICsgLi4uICsgYzExICogeF4xMQoJLy8gYXBwcm94aW1hdGVzIHRoZSBmdW5jdGlvbiBsb2coMSt4KS1sb2coMS14KQoJLy8gSGVuY2UgUihzKSA9IGxvZygoMStzKS8oMS1zKSkgPSBsb2coYSkKCWZ1bmN0aW9uIGZpeGVkTG9nKHVpbnQyNTYgYSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zIChpbnQyNTYgbG9nKSB7CgkJaW50MzIgc2NhbGUgPSAwOwoJCXdoaWxlIChhID4gc3FydDIpIHsKCQkJYSAvPSAyOwoJCQlzY2FsZSsrOwoJCX0KCQl3aGlsZSAoYSA8PSBzcXJ0ZG90NSkgewoJCQlhICo9IDI7CgkJCXNjYWxlLS07CgkJfQoJCWludDI1NiBzID0gKCgoaW50MjU2KShhKSAtIG9uZSkgKiBvbmUpIC8gKChpbnQyNTYpKGEpICsgb25lKTsKCQl2YXIgeiA9IChzKnMpIC8gb25lOwoJCXJldHVybiBzY2FsZSAqIGxuMiArCgkJCShzKihjMSArICh6KihjMyArICh6KihjNSArICh6KihjNyArICh6KihjOSArICh6KmMxMS9vbmUpKQoJCQkJL29uZSkpL29uZSkpL29uZSkpL29uZSkpL29uZSk7Cgl9CgoJaW50MjU2IGNvbnN0YW50IGMyID0gIDB4MDJhYWFhYWFhYWEwMTVkYjA7CglpbnQyNTYgY29uc3RhbnQgYzQgPSAtMHgwMDBiNjBiNjA4MDgzOTlkMTsKCWludDI1NiBjb25zdGFudCBjNiA9ICAweDAwMDA0NTU5NTZiY2NkZDA2OwoJaW50MjU2IGNvbnN0YW50IGM4ID0gLTB4MDAwMDAxYjg5M2FkMDRiM2E7CgkKCS8vIFRoZSBwb2x5bm9taWFsIFIgPSAyICsgYzIqeF4yICsgYzQqeF40ICsgLi4uCgkvLyBhcHByb3hpbWF0ZXMgdGhlIGZ1bmN0aW9uIHgqKGV4cCh4KSsxKS8oZXhwKHgpLTEpCgkvLyBIZW5jZSBleHAoeCkgPSAoUih4KSt4KS8oUih4KS14KQoJZnVuY3Rpb24gZml4ZWRFeHAoaW50MjU2IGEpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NiBleHApIHsKCQlpbnQyNTYgc2NhbGUgPSAoYSArIChsbjJfNjRkb3Q1KSkgLyBsbjIgLSA2NDsKCQlhIC09IHNjYWxlKmxuMjsKCQlpbnQyNTYgeiA9IChhKmEpIC8gb25lOwoJCWludDI1NiBSID0gKChpbnQyNTYpKDIpICogb25lKSArCgkJCSh6KihjMiArICh6KihjNCArICh6KihjNiArICh6KmM4L29uZSkpL29uZSkpL29uZSkpL29uZSk7CgkJZXhwID0gKHVpbnQyNTYpICgoKFIgKyBhKSAqIG9uZSkgLyAoUiAtIGEpKTsKCQlpZiAoc2NhbGUgPj0gMCkKCQkJZXhwIDw8PSBzY2FsZTsKCQllbHNlCgkJCWV4cCA+Pj0gLXNjYWxlOwoJCXJldHVybiBleHA7Cgl9CgkKCS8vIFRoZSBiZWxvdyBhcmUgc2FmZW1hdGggaW1wbGVtZW50YXRpb25zIG9mIHRoZSBmb3VyIGFyaXRobWV0aWMgb3BlcmF0b3JzCgkvLyBkZXNpZ25lZCB0byBleHBsaWNpdGx5IHByZXZlbnQgb3Zlci0gYW5kIHVuZGVyLWZsb3dzIG9mIGludGVnZXIgdmFsdWVzLgoKCWZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CgkJaWYgKGEgPT0gMCkgewoJCQlyZXR1cm4gMDsKCQl9CgkJdWludDI1NiBjID0gYSAqIGI7CgkJYXNzZXJ0KGMgLyBhID09IGIpOwoJCXJldHVybiBjOwoJfQoKCWZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CgkJLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCgkJdWludDI1NiBjID0gYSAvIGI7CgkJLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKCQlyZXR1cm4gYzsKCX0KCglmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCWFzc2VydChiIDw9IGEpOwoJCXJldHVybiBhIC0gYjsKCX0KCglmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCXVpbnQyNTYgYyA9IGEgKyBiOwoJCWFzc2VydChjID49IGEpOwoJCXJldHVybiBjOwoJfQoKCS8vIFRoaXMgYWxsb3dzIHlvdSB0byBidXkgdG9rZW5zIGJ5IHNlbmRpbmcgRXRoZXIgZGlyZWN0bHkgdG8gdGhlIHNtYXJ0IGNvbnRyYWN0CgkvLyB3aXRob3V0IGluY2x1ZGluZyBhbnkgdHJhbnNhY3Rpb24gZGF0YSAodXNlZnVsIGZvciwgc2F5LCBtb2JpbGUgd2FsbGV0IGFwcHMpLgoJZnVuY3Rpb24gKCkgcGF5YWJsZSBwdWJsaWMgewoJCS8vIG1zZy52YWx1ZSBpcyB0aGUgYW1vdW50IG9mIEV0aGVyIHNlbnQgYnkgdGhlIHRyYW5zYWN0aW9uLgoJCWlmIChtc2cudmFsdWUgPiAwKSB7CgkJCWZ1bmQoKTsKCQl9IGVsc2UgewoJCQl3aXRoZHJhd09sZChtc2cuc2VuZGVyKTsKCQl9Cgl9Cn0='.
	

]
