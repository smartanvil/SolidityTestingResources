Class {
	#name : #SRTd7bc93f391e94557fa621711699d1a5fd38d5ad5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd7bc93f391e94557fa621711699d1a5fd38d5ad5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovL2ltcG9ydCAiLi9TaW5nbGVUb2tlbkNvaW4uc29sIjsKLy9pbXBvcnQgIi4vU2FmZU1hdGguc29sIjsKLy9pbXBvcnQgIi4vQXV0aEFkbWluLnNvbCI7Ci8vIGltcG9ydCAiLi9Pd25hYmxlLnNvbCI7CgoKY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQogIGZ1bmN0aW9uIG1vZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhICUgYjsKICAgIC8vdWludDI1NiB6ID0gYSAvIGI7CiAgICBhc3NlcnQoYSA9PSAoYSAvIGIpICogYiArIGMpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGhvbGRlcnM7CiAgICBhZGRyZXNzW10gcHVibGljIHRva2VuX2hvbGRlcnNfYXJyYXk7CiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgICAgIGlmICghaG9sZGVyc1tfdG9dKSB7CiAgICAgICAgICAgIGhvbGRlcnNbX3RvXSA9IHRydWU7CiAgICAgICAgICAgIHRva2VuX2hvbGRlcnNfYXJyYXkucHVzaChfdG8pOwogICAgICAgIH0KCiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKCgogICAgICAgIC8qaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID09IDApIHsKICAgICAgICAgICAgdWludCBpZCA9IGdldF9pbmRleChtc2cuc2VuZGVyKTsKICAgICAgICAgICAgZGVsZXRlIHRva2VuX2hvbGRlcnNfYXJyYXlbaWRdOwogICAgICAgICAgICB0b2tlbl9ob2xkZXJzX2FycmF5W2lkXSA9IHRva2VuX2hvbGRlcnNfYXJyYXlbdG9rZW5faG9sZGVyc19hcnJheS5sZW5ndGggLSAxXTsKICAgICAgICAgICAgZGVsZXRlIHRva2VuX2hvbGRlcnNfYXJyYXlbdG9rZW5faG9sZGVyc19hcnJheS5sZW5ndGgtMV07CiAgICAgICAgICAgIHRva2VuX2hvbGRlcnNfYXJyYXkubGVuZ3RoLS07CiAgICAgICAgfSovCgogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0X2luZGV4IChhZGRyZXNzIF93aG9tKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpPHRva2VuX2hvbGRlcnNfYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRva2VuX2hvbGRlcnNfYXJyYXlbaV0gPT0gX3dob20pIHsKICAgICAgICAgICAgICAgIHJldHVybiBpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vcmVxdWlyZSAodG9rZW5faG9sZGVyc19hcnJheVtpXSA9PSBfd2hvbSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY291bnRfdG9rZW5faG9sZGVycyAoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiB0b2tlbl9ob2xkZXJzX2FycmF5Lmxlbmd0aDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdG9rZW5Ib2xkZXIodWludDI1NiBfaW5kZXgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIHRva2VuX2hvbGRlcnNfYXJyYXlbX2luZGV4XTsKICAgIH0KICAgICAgCn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBpZiAoIWhvbGRlcnNbX3RvXSkgewogICAgICAgIGhvbGRlcnNbX3RvXSA9IHRydWU7CiAgICAgICAgdG9rZW5faG9sZGVyc19hcnJheS5wdXNoKF90byk7CiAgICB9CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KICAKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgdWludDI1NiBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KIAogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQp9Cgpjb250cmFjdCBNaW50YWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CiAgZXZlbnQgTWludEZpbmlzaGVkKCk7CiAgYm9vbCBwdWJsaWMgbWludGluZ0ZpbmlzaGVkID0gZmFsc2U7CiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgY2FuTWludCBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICBpZiAoIWhvbGRlcnNbX3RvXSkgewogICAgICAgIGhvbGRlcnNbX3RvXSA9IHRydWU7CiAgICAgICAgdG9rZW5faG9sZGVyc19hcnJheS5wdXNoKF90byk7CiAgICB9IAogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgVHJhbnNmZXIoMHgwLCBfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgTWludEZpbmlzaGVkKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KCmNvbnRyYWN0IFNpbmdsZVRva2VuQ29pbiBpcyBNaW50YWJsZVRva2VuIHsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiU3ltbWV0cnkgRnVuZCBUb2tlbiI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiU1lNTSI7CiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSA2OwogfQpjb250cmFjdCBBdXRoQWRtaW4gewogICAgCiAgICBhZGRyZXNzW10gYWRtaW5zX2FycmF5OwogICAgYWRkcmVzc1tdIHVzZXJzX2FycmF5OwogICAgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIGFkbWluX2FkZHJlc3NlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgdXNlcl9hZGRyZXNzZXM7CgogICAgZXZlbnQgTmV3QWRtaW4oYWRkcmVzcyBhZGRlZEJ5LCBhZGRyZXNzIGFkbWluKTsKICAgIGV2ZW50IFJlbW92ZUFkbWluKGFkZHJlc3MgcmVtb3ZlZEJ5LCBhZGRyZXNzIGFkbWluKTsKICAgIGV2ZW50IE5ld1VzZXJBZGRlZChhZGRyZXNzIGFkZGVkQnksIGFkZHJlc3MgYWNjb3VudCk7CiAgICBldmVudCBSZW1vdmVVc2VyKGFkZHJlc3MgcmVtb3ZlZEJ5LCBhZGRyZXNzIGFjY291bnQpOwoKICAgIGZ1bmN0aW9uIEF1dGhBZG1pbigpIHB1YmxpYyB7CiAgICAgICAgYWRtaW5fYWRkcmVzc2VzW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgICBOZXdBZG1pbigwLCBtc2cuc2VuZGVyKTsKICAgICAgICBhZG1pbnNfYXJyYXkucHVzaChtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRBZG1pbihhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKGlzQ3VycmVudEFkbWluKG1zZy5zZW5kZXIpKTsKICAgICAgICByZXF1aXJlICghYWRtaW5fYWRkcmVzc2VzW19hZGRyZXNzXSk7CiAgICAgICAgYWRtaW5fYWRkcmVzc2VzW19hZGRyZXNzXSA9IHRydWU7CiAgICAgICAgTmV3QWRtaW4obXNnLnNlbmRlciwgX2FkZHJlc3MpOwogICAgICAgIGFkbWluc19hcnJheS5wdXNoKF9hZGRyZXNzKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVBZG1pbihhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoaXNDdXJyZW50QWRtaW4obXNnLnNlbmRlcikpOwogICAgICAgIHJlcXVpcmUgKF9hZGRyZXNzICE9IG1zZy5zZW5kZXIpOwogICAgICAgIHJlcXVpcmUgKGFkbWluX2FkZHJlc3Nlc1tfYWRkcmVzc10pOwogICAgICAgIGFkbWluX2FkZHJlc3Nlc1tfYWRkcmVzc10gPSBmYWxzZTsKICAgICAgICBSZW1vdmVBZG1pbihtc2cuc2VuZGVyLCBfYWRkcmVzcyk7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkX3VzZXIoYWRkcmVzcyBfYWRkcmVzcykgcHVibGljIHsKICAgICAgICByZXF1aXJlIChpc0N1cnJlbnRBZG1pbihtc2cuc2VuZGVyKSk7CiAgICAgICAgcmVxdWlyZSAoIXVzZXJfYWRkcmVzc2VzW19hZGRyZXNzXSk7CiAgICAgICAgdXNlcl9hZGRyZXNzZXNbX2FkZHJlc3NdID0gdHJ1ZTsKICAgICAgICBOZXdVc2VyQWRkZWQobXNnLnNlbmRlciwgX2FkZHJlc3MpOwogICAgICAgIHVzZXJzX2FycmF5LnB1c2goX2FkZHJlc3MpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZV91c2VyKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSAoaXNDdXJyZW50QWRtaW4obXNnLnNlbmRlcikpOwogICAgICAgIHJlcXVpcmUgKHVzZXJfYWRkcmVzc2VzW19hZGRyZXNzXSk7CiAgICAgICAgdXNlcl9hZGRyZXNzZXNbX2FkZHJlc3NdID0gZmFsc2U7CiAgICAgICAgUmVtb3ZlVXNlcihtc2cuc2VuZGVyLCBfYWRkcmVzcyk7CiAgICB9CiAgICAgICAgICAgICAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2V0dGVycwogICAgICAgICAgICAgICAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwogICAgCiAgICBmdW5jdGlvbiBpc0N1cnJlbnRBZG1pbihhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBhZG1pbl9hZGRyZXNzZXNbX2FkZHJlc3NdOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzQ3VycmVudE9yUGFzdEFkbWluKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgYWRtaW5zX2FycmF5Lmxlbmd0aDsgaSsrKQogICAgICAgICAgICByZXF1aXJlIChhZG1pbnNfYXJyYXlbaV0gPT0gX2FkZHJlc3MpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzQ3VycmVudFVzZXIoYWRkcmVzcyBfYWRkcmVzcykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdXNlcl9hZGRyZXNzZXNbX2FkZHJlc3NdOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzQ3VycmVudE9yUGFzdFVzZXIoYWRkcmVzcyBfYWRkcmVzcykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCB1c2Vyc19hcnJheS5sZW5ndGg7IGkrKykKICAgICAgICAgICAgcmVxdWlyZSAodXNlcnNfYXJyYXlbaV0gPT0gX2FkZHJlc3MpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQp9Cgpjb250cmFjdCBEaXZpZGVuZE1hbmFnZXIgaXMgT3duYWJsZSB7CiAgICAKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgCiAgICB1aW50MjU2IHB1YmxpYyBkaXZpZGVuZHNfc2hhcmU7CiAgICB1aW50MjU2IHB1YmxpYyByZWludmVzdG1lbnRfc2hhcmU7CiAgICAKICAgIFNpbmdsZVRva2VuQ29pbiB0b2tlbjsKICAgIEF1dGhBZG1pbiBhdXRoQWRtaW47CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgZGl2aWRlbmRzOwoKICAgIGV2ZW50IFBheW1lbnRBdmFpbGFibGUoYWRkcmVzcyBhZGRyLCB1aW50MjU2IGFtb3VudCk7CiAgICBldmVudCBEaXZpZGVuZFBheW1lbnQodWludDI1NiBkaXZpZGVuZF9wZXJfdG9rZW4sIHVpbnQyNTYgdGltZXN0YW1wKTsKICAgIGV2ZW50IERldmlkZW5kc1NuYXBzaG90KGFkZHJlc3MgX2FkZHIsIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IFJlaW52ZXN0bWVudFdpdGhkcmF3YWwoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3ZhbHVlKTsKICAgIAogICAgbW9kaWZpZXIgYWRtaW5Pbmx5IHsKICAgICAgICByZXF1aXJlIChhdXRoQWRtaW4uaXNDdXJyZW50QWRtaW4obXNnLnNlbmRlcikpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIERpdmlkZW5kTWFuYWdlcihhZGRyZXNzIHRva2VuX2FkZHJlc3MsIGFkZHJlc3MgYXV0aF9hZGRyZXNzKSBwdWJsaWMgewogICAgICAgIHRva2VuID0gU2luZ2xlVG9rZW5Db2luKHRva2VuX2FkZHJlc3MpOwogICAgICAgIHNldF9uZXdfYWRtaW4oYXV0aF9hZGRyZXNzKTsKICAgICAgICBkaXZpZGVuZHNfc2hhcmUgPSA1MDsKICAgICAgICByZWludmVzdG1lbnRfc2hhcmUgPSA1MDsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZXsKICAgICAgICAvLyByZXF1aXJlICghdG9rZW4uaXNfZW5kKCkpOwogICAgICAgIHVpbnQyNTYgZnVuZHNfZm9yX2RpdmlkZW5kcyA9IG1zZy52YWx1ZS5tdWwoZGl2aWRlbmRzX3NoYXJlKS5kaXYoMTAwKTsKICAgICAgICB1aW50MjU2IGRpdmlkZW5kX3Blcl90b2tlbiA9IGZ1bmRzX2Zvcl9kaXZpZGVuZHMuZGl2KHRva2VuLnRvdGFsU3VwcGx5KCkpOwogICAgICAgIHJlcXVpcmUgKGRpdmlkZW5kX3Blcl90b2tlbiAhPSAwKTsKICAgICAgICB1aW50MjU2IHRvdGFsUGFpZE91dCA9IDA7CiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgdG9rZW4uY291bnRfdG9rZW5faG9sZGVycygpOyBpKyspIHsKICAgICAgICAgICAgYWRkcmVzcyBhZGRyID0gdG9rZW4udG9rZW5Ib2xkZXIoaSk7CiAgICAgICAgICAgIGlmICh0b2tlbi5iYWxhbmNlT2YoYWRkcikgPCAxMDAwRTYpIHsKICAgICAgICAgICAgICAgIHVpbnQyNTYgZGl2aWRlbmRzX2JlZm9yZV9jb21taXNpb24gPSBkaXZpZGVuZF9wZXJfdG9rZW4ubXVsKHRva2VuLmJhbGFuY2VPZihhZGRyKSk7ICAgIAogICAgICAgICAgICAgICAgdWludDI1NiBkaXZpZGVuZHNfYWZ0ZXJfY29tbWlzaW9uID0gZGl2aWRlbmRzX2JlZm9yZV9jb21taXNpb24ubXVsKDg1KS5kaXYoMTAwKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0b2tlbi5iYWxhbmNlT2YoYWRkcikgPiAxMDAwRTYpIHsKICAgICAgICAgICAgICAgIGRpdmlkZW5kc19iZWZvcmVfY29tbWlzaW9uID0gZGl2aWRlbmRfcGVyX3Rva2VuLm11bCh0b2tlbi5iYWxhbmNlT2YoYWRkcikpOwogICAgICAgICAgICAgICAgZGl2aWRlbmRzX2FmdGVyX2NvbW1pc2lvbiA9IGRpdmlkZW5kc19iZWZvcmVfY29tbWlzaW9uLm11bCg5MjUpLmRpdigxMDAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkaXZpZGVuZHNbYWRkcl0gPSBkaXZpZGVuZHNbYWRkcl0uYWRkKGRpdmlkZW5kc19hZnRlcl9jb21taXNpb24pOwogICAgICAgICAgICBQYXltZW50QXZhaWxhYmxlKGFkZHIsIGRpdmlkZW5kc19hZnRlcl9jb21taXNpb24pOwogICAgICAgICAgICB0b3RhbFBhaWRPdXQgPSB0b3RhbFBhaWRPdXQuYWRkKGRpdmlkZW5kc19hZnRlcl9jb21taXNpb24pOwogICAgICAgIH0KICAgICAgICBEaXZpZGVuZFBheW1lbnQoZGl2aWRlbmRfcGVyX3Rva2VuLCBub3cpOwogICAgICAgIC8vIHVpbnQyNTYgcmVtYWluZGVyID0gbXNnLnZhbHVlLnN1Yih0b3RhbFBhaWRPdXQpOwogICAgICAgIC8vIHJlcXVpcmUgKHJlbWFpbmRlciA+IDAgJiYgIW1zZy5zZW5kZXIuc2VuZChyZW1haW5kZXIpKTsKICAgICAgICAvLyBkaXZpZGVuZHNbbXNnLnNlbmRlcl0gPSBkaXZpZGVuZHNbbXNnLnNlbmRlcl0uYWRkKHJlbWFpbmRlcik7CiAgICAgICAgLy8gUGF5bWVudEF2YWlsYWJsZShtc2cuc2VuZGVyLCByZW1haW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldF9uZXdfYWRtaW4gKGFkZHJlc3MgYWRtaW5fYWRkcmVzcykgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgYXV0aEFkbWluID0gQXV0aEFkbWluKGFkbWluX2FkZHJlc3MpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldF9uZXdfZGl2aWRlbmRfc2hhcmUgKHVpbnQyNTYgbmV3X2RpdmlkZW5kc19zaGFyZSkgcHVibGljIGFkbWluT25seSB7CiAgICAgICAgcmVxdWlyZSAobmV3X2RpdmlkZW5kc19zaGFyZSA+IDAgJiYgbmV3X2RpdmlkZW5kc19zaGFyZSA8PSAxMDApOwogICAgICAgIGRpdmlkZW5kc19zaGFyZSA9IG5ld19kaXZpZGVuZHNfc2hhcmU7CiAgICAgICAgcmVpbnZlc3RtZW50X3NoYXJlID0gMTAwIC0gZGl2aWRlbmRzX3NoYXJlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RGl2aWRlbmQoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKGRpdmlkZW5kc1ttc2cuc2VuZGVyXSAhPSAwKTsKCiAgICAgICAgdWludDI1NiBhbW91bnQgPSBkaXZpZGVuZHNbbXNnLnNlbmRlcl07CiAgICAgICAgZGl2aWRlbmRzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudCk7CiAgICAgICAgRGV2aWRlbmRzU25hcHNob3QobXNnLnNlbmRlciwgYW1vdW50KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0X2Z1bmRzX2xlZnRfZm9yX3JlaW52ZXN0bWVudCAoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBSZWludmVzdG1lbnRXaXRoZHJhd2FsKG93bmVyLCB0aGlzLmJhbGFuY2UpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KfQ=='.
	

]
