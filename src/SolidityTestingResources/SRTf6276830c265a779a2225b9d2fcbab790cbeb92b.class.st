Class {
	#name : #SRTf6276830c265a779a2225b9d2fcbab790cbeb92b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf6276830c265a779a2225b9d2fcbab790cbeb92b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvdG9rZW4vRVJDMjAvRVJDMjBCYXNpYy5zb2wKCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL3Rva2VuL0VSQzIwL0Jhc2ljVG9rZW4uc29sCgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIHVpbnQyNTYgdG90YWxTdXBwbHlfOwoKICAvKioKICAqIEBkZXYgdG90YWwgbnVtYmVyIG9mIHRva2VucyBpbiBleGlzdGVuY2UKICAqLwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHRvdGFsU3VwcGx5XzsKICB9CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCi8vIEZpbGU6IHplcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy90b2tlbi9FUkMyMC9CdXJuYWJsZVRva2VuLnNvbAoKLyoqCiAqIEB0aXRsZSBCdXJuYWJsZSBUb2tlbgogKiBAZGV2IFRva2VuIHRoYXQgY2FuIGJlIGlycmV2ZXJzaWJseSBidXJuZWQgKGRlc3Ryb3llZCkuCiAqLwpjb250cmFjdCBCdXJuYWJsZVRva2VuIGlzIEJhc2ljVG9rZW4gewoKICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAvKioKICAgKiBAZGV2IEJ1cm5zIGEgc3BlY2lmaWMgYW1vdW50IG9mIHRva2Vucy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgYnVybmVkLgogICAqLwogIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHB1YmxpYyB7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CiAgICAvLyBubyBuZWVkIHRvIHJlcXVpcmUgdmFsdWUgPD0gdG90YWxTdXBwbHksIHNpbmNlIHRoYXQgd291bGQgaW1wbHkgdGhlCiAgICAvLyBzZW5kZXIncyBiYWxhbmNlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgdG90YWxTdXBwbHksIHdoaWNoICpzaG91bGQqIGJlIGFuIGFzc2VydGlvbiBmYWlsdXJlCgogICAgYWRkcmVzcyBidXJuZXIgPSBtc2cuc2VuZGVyOwogICAgYmFsYW5jZXNbYnVybmVyXSA9IGJhbGFuY2VzW2J1cm5lcl0uc3ViKF92YWx1ZSk7CiAgICB0b3RhbFN1cHBseV8gPSB0b3RhbFN1cHBseV8uc3ViKF92YWx1ZSk7CiAgICBCdXJuKGJ1cm5lciwgX3ZhbHVlKTsKICB9Cn0KCi8vIEZpbGU6IHplcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy9vd25lcnNoaXAvT3duYWJsZS5zb2wKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvbGlmZWN5Y2xlL1BhdXNhYmxlLnNvbAoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIG5vdCBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCgpIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgd2hlblBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgfQp9CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvdG9rZW4vRVJDMjAvRVJDMjAuc29sCgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvdG9rZW4vRVJDMjAvU3RhbmRhcmRUb2tlbi5zb2wKCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBAZGV2IEluY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICoKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX2FkZGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gaW5jcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KICAgKi8KICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IERlY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICoKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBkZWNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3N1YnRyYWN0ZWRWYWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBkZWNyZWFzZSB0aGUgYWxsb3dhbmNlIGJ5LgogICAqLwogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvdG9rZW4vRVJDMjAvUGF1c2FibGVUb2tlbi5zb2wKCi8qKgogKiBAdGl0bGUgUGF1c2FibGUgdG9rZW4KICogQGRldiBTdGFuZGFyZFRva2VuIG1vZGlmaWVkIHdpdGggcGF1c2FibGUgdHJhbnNmZXJzLgogKiovCmNvbnRyYWN0IFBhdXNhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgUGF1c2FibGUgewoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gc3VwZXIuYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXR1cm4gc3VwZXIuaW5jcmVhc2VBcHByb3ZhbChfc3BlbmRlciwgX2FkZGVkVmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmV0dXJuIHN1cGVyLmRlY3JlYXNlQXBwcm92YWwoX3NwZW5kZXIsIF9zdWJ0cmFjdGVkVmFsdWUpOwogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL1hjZWxUb2tlbi5zb2wKCi8qCiAgICBQcmVyZXEgZm9yIGRlcGxveWluZyB0aGlzIGNvbnRyYWN0cwogICAgMSkgVG9rZW5CdXllciBhZGRyZXNzIGlzIGNyZWF0ZWQKCiAgICBUbyBzdGFydCB0ZWFtIHZlc3RpbmcKICAgIDEpIENyZWF0ZSBUZWFtVmVzdGluZyBiZW5lZmljaWFyeSBhZGRyZXNzCiAgICAyKSBEZXBsb3kgdGVhbSBhbGxvY2F0aW9uIFZlc3RpbmcgY29udHJhY3QgKFN0ZXBWZXN0aW5nKQogICAgMykgQ2FsbCBYY2VsVG9rZW4uaW5pdGlhdGVUZWFtVmVzdGluZyB1c2luZyB0aGUgY29udGFjdCBvd25lciBhY2NvdW50CiAgICA0KSBDYWxsIGFzc2lnbkZvdW5kYXRpb25TdXBwbHkgdG8gbWFuYWdlIGZvdW5jYXRpb24gYWxsb2NhdGlvbiB2aWEgY29udHJhY3QKICAgIDUpIENhbGwgYXNzaWduUmVzZXJ2ZVN1cHBseSB0byBtYW5hZ2UgcmVzZXJ2ZUZ1bmRTdXBwbHkgdmlhIGNvbnRyYWN0cwogICAgNikgU2V0IExveWFsdHkgd2FsbGV0IGFkZHJlc3MgLgogICAgNykgQ2FsbCBhbGxvY2F0ZUxveWFsdHlTcGVuZCB0byBtb3ZlIHNvbWUgdG9rZW5zIGZyb20gbG95YWx0eSBwb29sIHRvIExveWFsdHkgd2FsbGV0IGFzIG5lZWRlZAoKKi8KCmNvbnRyYWN0IFhjZWxUb2tlbiBpcyBQYXVzYWJsZVRva2VuLCBCdXJuYWJsZVRva2VuICB7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlhDRUxUT0tFTiI7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiWENFTCI7CgogICAgLyogc2VlIGlzc3VlIDcyNCB3aGVyZSBWaXRhbGlrIGlzIHByb3Bvc2luZyBtYW5kYXRvcnkgMTggZGVjaW1hbCBwbGFjZXMgZm9yIGVyYzIwIHRva2VucwogICAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzcyNAogICAgKi8KICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIC8vIDUwIEJpbGxpb24gdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBJTklUSUFMX1NVUFBMWSA9IDUwICogKDEwKio5KSAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CgogICAgLy8gZnVuZGF0aW9uIHN1cHBseSAxMCUKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGZvdW5kYXRpb25TdXBwbHkgPSA1ICogKDEwKio5KSAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CgogICAgLy8gZm91bmRlcnMgc3VwcGx5IDE1JQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdGVhbVN1cHBseSA9IDcuNSAqICgxMCoqOSkgKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwoKICAgIC8vIHB1YmxpYyBzYWxlIHN1cHBseSA2MCUKICAgIHVpbnQyNTYgcHVibGljIHB1YmxpY1NhbGVTdXBwbHkgPSAzMCAqICgxMCoqOSkgKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwoKICAgIC8vaW1wL2NtcCBzdXBwbHkgNSUKICAgIHVpbnQyNTYgcHVibGljIGxveWFsdHlTdXBwbHkgPSAyLjUgKiAoMTAqKjkpICogKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsKCiAgICAvL3Jlc2VydmUgZnVuZCBzdXBwbHkgMTAlCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCByZXNlcnZlRnVuZFN1cHBseSA9IDUgKiAoMTAqKjkpICogKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsKCiAgICAvLyBPbmx5IEFkZHJlc3MgdGhhdCBjYW4gYnV5IHB1YmxpYyBzYWxlIHN1cHBseQogICAgYWRkcmVzcyBwdWJsaWMgdG9rZW5CdXllcldhbGxldCA9MHgwOwoKICAgIC8vd2FsbGV0IHRvIGRpc3BlcnNlIGxveWFsdHkgcG9pbnRzIGFzIG5lZWRlZC4KICAgIGFkZHJlc3MgcHVibGljIGxveWFsdHlXYWxsZXQgPSAweDA7CgogICAgLy9hZGRyZXNzIHdoZXJlIHRlYW0gdmVzdGluZyBjb250cmFjdCB3aWxsIHJlbGFzZSB0aGUgdGVhbSB2ZXN0ZWQgdG9rZW5zCiAgICBhZGRyZXNzIHB1YmxpYyB0ZWFtVmVzdGluZ0NvbnRyYWN0QWRkcmVzczsKCiAgICBib29sIHB1YmxpYyBpc1RlYW1WZXN0aW5nSW5pdGlhdGVkID0gZmFsc2U7CgogICAgYm9vbCBwdWJsaWMgaXNGb3VuZGF0aW9uU3VwcGx5QXNzaWduZWQgPSBmYWxzZTsKCiAgICBib29sIHB1YmxpYyBpc1Jlc2VydmVTdXBwbHlBc3NpZ25lZCA9IGZhbHNlOwoKICAgIC8vU2FsZSBmcm9tIHB1YmxpYyBhbGxvY2F0aW9uIHZpYSB0b2tlbkJ1eWVyV2FsbGV0CiAgICBldmVudCBUb2tlbnNCb3VnaHQoYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdG90YWxBbW91bnQsIGJ5dGVzNCBfY3VycmVuY3ksIGJ5dGVzMzIgX3R4SGFzaCk7CiAgICBldmVudCBMb3lhbHR5U3VwcGx5QWxsb2NhdGVkKGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3RvdGFsQW1vdW50KTsKICAgIGV2ZW50IExveWFsdHlXYWxsZXRBZGRyZXNzQ2hhbmdlZChhZGRyZXNzIGluZGV4ZWQgX29sZEFkZHJlc3MsIGFkZHJlc3MgaW5kZXhlZCBfbmV3QWRkcmVzcyk7CgogICAgLy8gVG9rZW4gQnV5ZXIgaGFzIHNwZWNpYWwgdG8gdHJhbnNmZXIgZnJvbSBwdWJsaWMgc2FsZSBzdXBwbHkKICAgIG1vZGlmaWVyIG9ubHlUb2tlbkJ1eWVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB0b2tlbkJ1eWVyV2FsbGV0KTsKICAgICAgICBfOwogICAgfQoKICAgIC8vIE5vIHplcm8gYWRkcmVzcyB0cmFuc2FjdGlvbgogICAgbW9kaWZpZXIgbm9uWmVyb0FkZHJlc3MoYWRkcmVzcyBfdG8pIHsKICAgICAgICByZXF1aXJlKF90byAhPSAweDApOwogICAgICAgIF87CiAgICB9CgoKICAgIGZ1bmN0aW9uIFhjZWxUb2tlbihhZGRyZXNzIF90b2tlbkJ1eWVyV2FsbGV0KQogICAgICAgIHB1YmxpYwogICAgICAgIG5vblplcm9BZGRyZXNzKF90b2tlbkJ1eWVyV2FsbGV0KXsKCiAgICAgICAgdG9rZW5CdXllcldhbGxldCA9IF90b2tlbkJ1eWVyV2FsbGV0OwogICAgICAgIHRvdGFsU3VwcGx5XyA9IElOSVRJQUxfU1VQUExZOwoKICAgICAgICAvL21pbnQgYWxsIHRva2VucwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHlfOwogICAgICAgIFRyYW5zZmVyKGFkZHJlc3MoMHgwKSwgbXNnLnNlbmRlciwgdG90YWxTdXBwbHlfKTsKCiAgICAgICAgLy9BbGxvdyAgdG9rZW4gYnV5ZXIgdG8gdHJhbnNmZXIgcHVibGljIHNhbGUgYWxsb2NhdGlvbgogICAgICAgIC8vbmVlZCB0byByZXZpc2l0IHRvIHNlZSBpZiB0aGlzIG5lZWRzIHRvIGJlIGJyb2tlbiBpbnRvIDMgcGFydHMgc28gdGhhdAogICAgICAgIC8vb25lIGFkZHJlc3MgZG9lcyBub3QgY29tcHJvbWlzZSA2MCUgb2YgdG9rZW4KICAgICAgICByZXF1aXJlKGFwcHJvdmUodG9rZW5CdXllcldhbGxldCwgMCkpOwogICAgICAgIHJlcXVpcmUoYXBwcm92ZSh0b2tlbkJ1eWVyV2FsbGV0LCBwdWJsaWNTYWxlU3VwcGx5KSk7CgogICAgfQoKICAgIC8qKgogICAgICAgIEFsbG93IGNvbnRyYWN0IG93bmVyIHRvIGJ1cm4gdG9rZW4KICAgICoqLwogICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkKICAgICAgcHVibGljCiAgICAgIG9ubHlPd25lciB7CiAgICAgICAgc3VwZXIuYnVybihfdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgQGRldiBJbml0aWF0ZSB0aGUgdGVhbSB2ZXN0aW5nIGJ5IHRyYW5zZmVycmluZyB0aGUgdGVhbVN1cHBseSB0MCBfdGVhbVZlc3RpbmdDb250cmFjdEFkZHJlc3MKICAgIEBwYXJhbSBfdGVhbVZlc3RpbmdDb250cmFjdEFkZHJlc3MgIGFkZHJlc3Mgb2YgdGhlIHRlYW0gdmVzdGluZyBjb250cmFjdCBhbHJlYWR0IGRlcGxveWVkIHdpdGggdGhlCiAgICAgICAgYmVuZWZpY2lhcnkgYWRkcmVzcwogICAgKi8KICAgIGZ1bmN0aW9uIGluaXRpYXRlVGVhbVZlc3RpbmcoYWRkcmVzcyBfdGVhbVZlc3RpbmdDb250cmFjdEFkZHJlc3MpCiAgICBleHRlcm5hbAogICAgb25seU93bmVyCiAgICBub25aZXJvQWRkcmVzcyhfdGVhbVZlc3RpbmdDb250cmFjdEFkZHJlc3MpIHsKICAgICAgICByZXF1aXJlKCFpc1RlYW1WZXN0aW5nSW5pdGlhdGVkKTsKICAgICAgICB0ZWFtVmVzdGluZ0NvbnRyYWN0QWRkcmVzcyA9IF90ZWFtVmVzdGluZ0NvbnRyYWN0QWRkcmVzczsKCiAgICAgICAgaXNUZWFtVmVzdGluZ0luaXRpYXRlZCA9IHRydWU7CiAgICAgICAgLy90cmFuc2ZlciB0ZWFtIHN1cHBseSB0byB0ZWFtIHZlc3RpbmcgY29udHJhY3QKICAgICAgICByZXF1aXJlKHRyYW5zZmVyKF90ZWFtVmVzdGluZ0NvbnRyYWN0QWRkcmVzcywgdGVhbVN1cHBseSkpOwoKCiAgICB9CgogICAgLyoqCiAgICBAZGV2IGFsbG93IGNoYW5naW5nIG9mIGxveWFsdHkgd2FsbGV0IGFzIHRoZXNlIHdhbGxldHMgbWlnaHQgYmUgdXNlZAogICAgZXh0ZXJuYWxseSBieSB3ZWIgYXBwcyB0byBkaXNwZW5zZSBsb3lhbHR5IHJld2FyZHMgYW5kIG1heSBnZXQgY29tcHJvbWlzZWQKICAgIEBwYXJhbSBfbG95YWx0eVdhbGxldCBuZXcgbG95YWx0eSB3YWxsZXQgYWRkcmVzcwogICAgKiovCgogICAgZnVuY3Rpb24gc2V0TG95YWx0eVdhbGxldChhZGRyZXNzIF9sb3lhbHR5V2FsbGV0KQogICAgZXh0ZXJuYWwKICAgIG9ubHlPd25lcgogICAgbm9uWmVyb0FkZHJlc3MoX2xveWFsdHlXYWxsZXQpewogICAgICAgIHJlcXVpcmUobG95YWx0eVdhbGxldCAhPSBfbG95YWx0eVdhbGxldCk7CiAgICAgICAgbG95YWx0eVdhbGxldCA9IF9sb3lhbHR5V2FsbGV0OwogICAgICAgIExveWFsdHlXYWxsZXRBZGRyZXNzQ2hhbmdlZChsb3lhbHR5V2FsbGV0LCBfbG95YWx0eVdhbGxldCk7CiAgICB9CgogICAgLyoqCiAgICBAZGV2IGFsbG9jYXRlIGxveWFsdHkgYXMgbmVlZGVkIGZyb20gbG95YWx0eSBwb29sIGludG8gdGhlIGN1cnJlbnQKICAgIGxveWFsdHkgd2FsbGV0IHRvIGJlIGRpc2J1cnNlZC4gTm90ZSBvbmx5IHRoZSBhbGxvY2F0aW9uIG5lZWRlZCBmb3IgYSBkaXNidXJzbWVudAogICAgaXMgdG8gYmUgbW92ZWQgdG8gdGhlIGxveWFsdHkgd2FsbGV0IGFzIG5lZWRlZC4KICAgIEBwYXJhbSBfdG90YWxXZWlBbW91bnQgIGFtb3VudCB0byBtb3ZlIHRvIHRoZSB3YWxsZXQgaW4gd2VpCiAgICAqKi8KICAgIGZ1bmN0aW9uIGFsbG9jYXRlTG95YWx0eVNwZW5kKHVpbnQyNTYgX3RvdGFsV2VpQW1vdW50KQogICAgZXh0ZXJuYWwKICAgIG9ubHlPd25lcgogICAgbm9uWmVyb0FkZHJlc3MobG95YWx0eVdhbGxldCkKICAgIHJldHVybnMoYm9vbCl7CiAgICAgICAgcmVxdWlyZShfdG90YWxXZWlBbW91bnQgPiAwICYmIGxveWFsdHlTdXBwbHkgPj0gX3RvdGFsV2VpQW1vdW50KTsKICAgICAgICBsb3lhbHR5U3VwcGx5ID0gbG95YWx0eVN1cHBseS5zdWIoX3RvdGFsV2VpQW1vdW50KTsKICAgICAgICByZXF1aXJlKHRyYW5zZmVyKGxveWFsdHlXYWxsZXQsIF90b3RhbFdlaUFtb3VudCkpOwogICAgICAgIExveWFsdHlTdXBwbHlBbGxvY2F0ZWQobG95YWx0eVdhbGxldCwgX3RvdGFsV2VpQW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgIEBkZXYgYXNzaWduIGZvdW5kYXRpb24gc3VwcGx5IHRvIGEgY29udHJhY3QgYWRkcmVzcwogICAgQHBhcmFtIF9mb3VuZGF0aW9uQ29udHJhY3RBZGRyZXNzICBjb250cmFjdCBhZGRyZXNzIHRvIGRpc3BlbnNlIHRoZQogICAgICAgICAgICBmb3VuZGF0aW9uIGFsbG9jdGlvbgogICAgKiovCiAgICBmdW5jdGlvbiBhc3NpZ25Gb3VuZGF0aW9uU3VwcGx5KGFkZHJlc3MgX2ZvdW5kYXRpb25Db250cmFjdEFkZHJlc3MpCiAgICBleHRlcm5hbAogICAgb25seU93bmVyCiAgICBub25aZXJvQWRkcmVzcyhfZm91bmRhdGlvbkNvbnRyYWN0QWRkcmVzcyl7CiAgICAgICAgcmVxdWlyZSghaXNGb3VuZGF0aW9uU3VwcGx5QXNzaWduZWQpOwogICAgICAgIGlzRm91bmRhdGlvblN1cHBseUFzc2lnbmVkID0gdHJ1ZTsKICAgICAgICByZXF1aXJlKHRyYW5zZmVyKF9mb3VuZGF0aW9uQ29udHJhY3RBZGRyZXNzLCBmb3VuZGF0aW9uU3VwcGx5KSk7CiAgICB9CgogICAgLyoqCiAgICBAZGV2IGFzc2lnbiByZXNlcnZlIHN1cHBseSB0byBhIGNvbnRyYWN0IGFkZHJlc3MKICAgIEBwYXJhbSBfcmVzZXJ2ZUNvbnRyYWN0QWRkcmVzcyAgY29udHJhY3QgYWRkcmVzcyB0byBkaXNwZW5zZSB0aGUKICAgICAgICAgICAgcmVzZXJ2ZSBhbGxvY3Rpb24KICAgICoqLwogICAgZnVuY3Rpb24gYXNzaWduUmVzZXJ2ZVN1cHBseShhZGRyZXNzIF9yZXNlcnZlQ29udHJhY3RBZGRyZXNzKQogICAgZXh0ZXJuYWwKICAgIG9ubHlPd25lcgogICAgbm9uWmVyb0FkZHJlc3MoX3Jlc2VydmVDb250cmFjdEFkZHJlc3MpewogICAgICAgIHJlcXVpcmUoIWlzUmVzZXJ2ZVN1cHBseUFzc2lnbmVkKTsKICAgICAgICBpc1Jlc2VydmVTdXBwbHlBc3NpZ25lZCA9IHRydWU7CiAgICAgICAgcmVxdWlyZSh0cmFuc2ZlcihfcmVzZXJ2ZUNvbnRyYWN0QWRkcmVzcywgcmVzZXJ2ZUZ1bmRTdXBwbHkpKTsKICAgIH0KCi8qKiBXZSBkb24ndCB3YW50IHRvIHN1cHBvcnQgYSBwYXlhYmxlIGZ1bmN0aW9uIGFzIHdlIGFyZSBub3QgZG9pbmcgSUNPIGFuZCBpbnN0ZWFkIGRvaW5nIHByaXZhdGUKc2FsZS4gVGhlcmVmb3JlIHdlIHdhbnQgdG8gbWFpbnRhaW4gZXhjaGFuZ2UgcmF0ZSB0aGF0IGlzIHBlZ2dlZCB0byBVU0QuCioqLwoKICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIF90bywgdWludDI1NiBfdG90YWxXZWlBbW91bnQsIGJ5dGVzNCBfY3VycmVuY3ksIGJ5dGVzMzIgX3R4SGFzaCkKICAgIGV4dGVybmFsCiAgICBvbmx5VG9rZW5CdXllcgogICAgbm9uWmVyb0FkZHJlc3MoX3RvKQogICAgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG90YWxXZWlBbW91bnQgPiAwICYmIHB1YmxpY1NhbGVTdXBwbHkgPj0gX3RvdGFsV2VpQW1vdW50KTsKICAgICAgICBwdWJsaWNTYWxlU3VwcGx5ID0gcHVibGljU2FsZVN1cHBseS5zdWIoX3RvdGFsV2VpQW1vdW50KTsKICAgICAgICByZXF1aXJlKHRyYW5zZmVyRnJvbShvd25lcixfdG8sIF90b3RhbFdlaUFtb3VudCkpOwogICAgICAgIFRva2Vuc0JvdWdodChfdG8sIF90b3RhbFdlaUFtb3VudCwgX2N1cnJlbmN5LCBfdHhIYXNoKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgIEBkZXYgVGhpcyB1bm5hbWVkIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuZXZlciBzb21lb25lIHRyaWVzIHRvIHNlbmQgZXRoZXIgdG8gaXQgIGFuZCB3ZSBkb24ndCB3YW50IHBheW1lbnQKICAgIGNvbWluZyBkaXJlY3RseSB0byB0aGUgY29udHJhY3RzCiAgICAqLwogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJldmVydCgpOwogICAgfQoKfQ=='.
	

]
