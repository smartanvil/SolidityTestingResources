Class {
	#name : #SRT2178456786133c163dff480feffa7da3dc251bff,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2178456786133c163dff480feffa7da3dc251bff >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IDAuNC4yMTsKCi8qKgogKiBAdGl0bGUgQ3J5cHRvbmlhIFBva2VyIENoaXBzIHRva2VuIGFuZCBjcm93ZHNhbGUgY29udHJhY3RzCiAqIEBhdXRob3IgS2lyaWxsIFZhcmxhbW92IChAb25ncmlkKSwgT25HcmlkU3lzdGVtcwogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9PbkdyaWRTeXN0ZW1zL0NyeXB0b25pYVBva2VyQ29udHJhY3RzCiAqLwovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnRyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBSb2xlcwogKiBAYXV0aG9yIEZyYW5jaXNjbyBHaW9yZGFubyAoQGZyYW5naW8pCiAqIEBkZXYgTGlicmFyeSBmb3IgbWFuYWdpbmcgYWRkcmVzc2VzIGFzc2lnbmVkIHRvIGEgUm9sZS4KICogICAgICBTZWUgUkJBQy5zb2wgZm9yIGV4YW1wbGUgdXNhZ2UuCiAqLwpsaWJyYXJ5IFJvbGVzIHsKICBzdHJ1Y3QgUm9sZSB7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIGJlYXJlcjsKICB9CgogIC8qKgogICAqIEBkZXYgZ2l2ZSBhbiBhZGRyZXNzIGFjY2VzcyB0byB0aGlzIHJvbGUKICAgKi8KICBmdW5jdGlvbiBhZGQoUm9sZSBzdG9yYWdlIHJvbGUsIGFkZHJlc3MgYWRkcikKICAgIGludGVybmFsCiAgewogICAgcm9sZS5iZWFyZXJbYWRkcl0gPSB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiByZW1vdmUgYW4gYWRkcmVzcycgYWNjZXNzIHRvIHRoaXMgcm9sZQogICAqLwogIGZ1bmN0aW9uIHJlbW92ZShSb2xlIHN0b3JhZ2Ugcm9sZSwgYWRkcmVzcyBhZGRyKQogICAgaW50ZXJuYWwKICB7CiAgICByb2xlLmJlYXJlclthZGRyXSA9IGZhbHNlOwogIH0KCiAgLyoqCiAgICogQGRldiBjaGVjayBpZiBhbiBhZGRyZXNzIGhhcyB0aGlzIHJvbGUKICAgKiAvLyByZXZlcnRzCiAgICovCiAgZnVuY3Rpb24gY2hlY2soUm9sZSBzdG9yYWdlIHJvbGUsIGFkZHJlc3MgYWRkcikKICAgIHZpZXcKICAgIGludGVybmFsCiAgewogICAgcmVxdWlyZShoYXMocm9sZSwgYWRkcikpOwogIH0KCiAgLyoqCiAgICogQGRldiBjaGVjayBpZiBhbiBhZGRyZXNzIGhhcyB0aGlzIHJvbGUKICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBoYXMoUm9sZSBzdG9yYWdlIHJvbGUsIGFkZHJlc3MgYWRkcikKICAgIHZpZXcKICAgIGludGVybmFsCiAgICByZXR1cm5zIChib29sKQogIHsKICAgIHJldHVybiByb2xlLmJlYXJlclthZGRyXTsKICB9Cn0KCgovKioKICogQHRpdGxlIFJCQUMgKFJvbGUtQmFzZWQgQWNjZXNzIENvbnRyb2wpCiAqIEBhdXRob3IgTWF0dCBDb25kb24gKEBTaHJ1Z3MpCiAqIEBkZXYgU3RvcmVzIGFuZCBwcm92aWRlcyBzZXR0ZXJzIGFuZCBnZXR0ZXJzIGZvciByb2xlcyBhbmQgYWRkcmVzc2VzLgogKiAgICAgIFN1cHBvcnRzIHVubGltaXRlZCBudW1iZXJzIG9mIHJvbGVzIGFuZCBhZGRyZXNzZXMuCiAqICAgICAgU2VlIC8vY29udHJhY3RzL21vY2tzL1JCQUNNb2NrLnNvbCBmb3IgYW4gZXhhbXBsZSBvZiB1c2FnZS4KICogVGhpcyBSQkFDIG1ldGhvZCB1c2VzIHN0cmluZ3MgdG8ga2V5IHJvbGVzLiBJdCBtYXkgYmUgYmVuZWZpY2lhbAogKiAgZm9yIHlvdSB0byB3cml0ZSB5b3VyIG93biBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIGludGVyZmFjZSB1c2luZyBFbnVtcyBvciBzaW1pbGFyLgogKiBJdCdzIGFsc28gcmVjb21tZW5kZWQgdGhhdCB5b3UgZGVmaW5lIGNvbnN0YW50cyBpbiB0aGUgY29udHJhY3QsIGxpa2UgUk9MRV9BRE1JTiBiZWxvdywKICogIHRvIGF2b2lkIHR5cG9zLgogKi8KY29udHJhY3QgUkJBQyB7CiAgdXNpbmcgUm9sZXMgZm9yIFJvbGVzLlJvbGU7CgogIG1hcHBpbmcgKHN0cmluZyA9PiBSb2xlcy5Sb2xlKSBwcml2YXRlIHJvbGVzOwoKICBldmVudCBSb2xlQWRkZWQoYWRkcmVzcyBhZGRyLCBzdHJpbmcgcm9sZU5hbWUpOwogIGV2ZW50IFJvbGVSZW1vdmVkKGFkZHJlc3MgYWRkciwgc3RyaW5nIHJvbGVOYW1lKTsKCiAgLyoqCiAgICogQSBjb25zdGFudCByb2xlIG5hbWUgZm9yIGluZGljYXRpbmcgYWRtaW5zLgogICAqLwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgUk9MRV9BRE1JTiA9ICJhZG1pbiI7CgogIC8qKgogICAqIEBkZXYgY29uc3RydWN0b3IuIFNldHMgbXNnLnNlbmRlciBhcyBhZG1pbiBieSBkZWZhdWx0CiAgICovCiAgZnVuY3Rpb24gUkJBQygpCiAgICBwdWJsaWMKICB7CiAgICBhZGRSb2xlKG1zZy5zZW5kZXIsIFJPTEVfQURNSU4pOwogIH0KCiAgLyoqCiAgICogQGRldiByZXZlcnRzIGlmIGFkZHIgZG9lcyBub3QgaGF2ZSByb2xlCiAgICogQHBhcmFtIGFkZHIgYWRkcmVzcwogICAqIEBwYXJhbSByb2xlTmFtZSB0aGUgbmFtZSBvZiB0aGUgcm9sZQogICAqIC8vIHJldmVydHMKICAgKi8KICBmdW5jdGlvbiBjaGVja1JvbGUoYWRkcmVzcyBhZGRyLCBzdHJpbmcgcm9sZU5hbWUpCiAgICB2aWV3CiAgICBwdWJsaWMKICB7CiAgICByb2xlc1tyb2xlTmFtZV0uY2hlY2soYWRkcik7CiAgfQoKICAvKioKICAgKiBAZGV2IGRldGVybWluZSBpZiBhZGRyIGhhcyByb2xlCiAgICogQHBhcmFtIGFkZHIgYWRkcmVzcwogICAqIEBwYXJhbSByb2xlTmFtZSB0aGUgbmFtZSBvZiB0aGUgcm9sZQogICAqIEByZXR1cm4gYm9vbAogICAqLwogIGZ1bmN0aW9uIGhhc1JvbGUoYWRkcmVzcyBhZGRyLCBzdHJpbmcgcm9sZU5hbWUpCiAgICB2aWV3CiAgICBwdWJsaWMKICAgIHJldHVybnMgKGJvb2wpCiAgewogICAgcmV0dXJuIHJvbGVzW3JvbGVOYW1lXS5oYXMoYWRkcik7CiAgfQoKICAvKioKICAgKiBAZGV2IGFkZCBhIHJvbGUgdG8gYW4gYWRkcmVzcwogICAqIEBwYXJhbSBhZGRyIGFkZHJlc3MKICAgKiBAcGFyYW0gcm9sZU5hbWUgdGhlIG5hbWUgb2YgdGhlIHJvbGUKICAgKi8KICBmdW5jdGlvbiBhZG1pbkFkZFJvbGUoYWRkcmVzcyBhZGRyLCBzdHJpbmcgcm9sZU5hbWUpCiAgICBvbmx5QWRtaW4KICAgIHB1YmxpYwogIHsKICAgIGFkZFJvbGUoYWRkciwgcm9sZU5hbWUpOwogIH0KCiAgLyoqCiAgICogQGRldiByZW1vdmUgYSByb2xlIGZyb20gYW4gYWRkcmVzcwogICAqIEBwYXJhbSBhZGRyIGFkZHJlc3MKICAgKiBAcGFyYW0gcm9sZU5hbWUgdGhlIG5hbWUgb2YgdGhlIHJvbGUKICAgKi8KICBmdW5jdGlvbiBhZG1pblJlbW92ZVJvbGUoYWRkcmVzcyBhZGRyLCBzdHJpbmcgcm9sZU5hbWUpCiAgICBvbmx5QWRtaW4KICAgIHB1YmxpYwogIHsKICAgIHJlbW92ZVJvbGUoYWRkciwgcm9sZU5hbWUpOwogIH0KCiAgLyoqCiAgICogQGRldiBhZGQgYSByb2xlIHRvIGFuIGFkZHJlc3MKICAgKiBAcGFyYW0gYWRkciBhZGRyZXNzCiAgICogQHBhcmFtIHJvbGVOYW1lIHRoZSBuYW1lIG9mIHRoZSByb2xlCiAgICovCiAgZnVuY3Rpb24gYWRkUm9sZShhZGRyZXNzIGFkZHIsIHN0cmluZyByb2xlTmFtZSkKICAgIGludGVybmFsCiAgewogICAgcm9sZXNbcm9sZU5hbWVdLmFkZChhZGRyKTsKICAgIGVtaXQgUm9sZUFkZGVkKGFkZHIsIHJvbGVOYW1lKTsKICB9CgogIC8qKgogICAqIEBkZXYgcmVtb3ZlIGEgcm9sZSBmcm9tIGFuIGFkZHJlc3MKICAgKiBAcGFyYW0gYWRkciBhZGRyZXNzCiAgICogQHBhcmFtIHJvbGVOYW1lIHRoZSBuYW1lIG9mIHRoZSByb2xlCiAgICovCiAgZnVuY3Rpb24gcmVtb3ZlUm9sZShhZGRyZXNzIGFkZHIsIHN0cmluZyByb2xlTmFtZSkKICAgIGludGVybmFsCiAgewogICAgcm9sZXNbcm9sZU5hbWVdLnJlbW92ZShhZGRyKTsKICAgIGVtaXQgUm9sZVJlbW92ZWQoYWRkciwgcm9sZU5hbWUpOwogIH0KCiAgLyoqCiAgICogQGRldiBtb2RpZmllciB0byBzY29wZSBhY2Nlc3MgdG8gYSBzaW5nbGUgcm9sZSAodXNlcyBtc2cuc2VuZGVyIGFzIGFkZHIpCiAgICogQHBhcmFtIHJvbGVOYW1lIHRoZSBuYW1lIG9mIHRoZSByb2xlCiAgICogLy8gcmV2ZXJ0cwogICAqLwogIG1vZGlmaWVyIG9ubHlSb2xlKHN0cmluZyByb2xlTmFtZSkKICB7CiAgICBjaGVja1JvbGUobXNnLnNlbmRlciwgcm9sZU5hbWUpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgbW9kaWZpZXIgdG8gc2NvcGUgYWNjZXNzIHRvIGFkbWlucwogICAqIC8vIHJldmVydHMKICAgKi8KICBtb2RpZmllciBvbmx5QWRtaW4oKQogIHsKICAgIGNoZWNrUm9sZShtc2cuc2VuZGVyLCBST0xFX0FETUlOKTsKICAgIF87CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgdWludDI1NiB0b3RhbFN1cHBseV87CgogIC8qKgogICogQGRldiB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGluIGV4aXN0ZW5jZQogICovCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gdG90YWxTdXBwbHlfOwogIH0KCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgZW1pdCBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGVtaXQgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICoKICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIGVtaXQgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBAZGV2IEluY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICoKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX2FkZGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gaW5jcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KICAgKi8KICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICBlbWl0IEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRGVjcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGRlY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3VidHJhY3RlZFZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGRlY3JlYXNlIHRoZSBhbGxvd2FuY2UgYnkuCiAgICovCiAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgfQogICAgZW1pdCBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKfQoKCi8qKgogKiBAdGl0bGUgQ3J5cHRvbmlhIFBva2VyIENoaXBzIENvbnRyYWN0CiAqIEBhdXRob3IgS2lyaWxsIFZhcmxhbW92IChAb25ncmlkKSwgT25HcmlkIHN5c3RlbXMKICogQGRldiBFUkMtMjAgY29tcGF0aWJsZSB0b2tlbiB3aXRoIHplcHBlbGluJ3MgUkJBQwogKi8KY29udHJhY3QgQ3J5cHRvbmlhVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgUkJBQyB7CiAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIkNyeXB0b25pYSBQb2tlciBDaGlwcyI7CiAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiQ1BDIjsKICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAyOwogIHVpbnQyNTYgcHVibGljIGNhcCA9IDEwMDAwMDAwMDAwMDsKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKICBzdHJpbmcgY29uc3RhbnQgUk9MRV9NSU5URVIgPSAibWludGVyIjsKCiAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBNaW50RmluaXNoZWQoKTsKICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIG1pbnQgdG9rZW5zCiAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgbWludGVkIHRva2Vucy4KICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAqIEByZXR1cm4gQSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBvbmx5Um9sZShST0xFX01JTlRFUikgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICByZXF1aXJlKHRvdGFsU3VwcGx5Xy5hZGQoX2Ftb3VudCkgPD0gY2FwKTsKICAgIHRvdGFsU3VwcGx5XyA9IHRvdGFsU3VwcGx5Xy5hZGQoX2Ftb3VudCk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CiAgICBlbWl0IE1pbnQoX3RvLCBfYW1vdW50KTsKICAgIGVtaXQgVHJhbnNmZXIoYWRkcmVzcygwKSwgX3RvLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBzdG9wIG1pbnRpbmcgbmV3IHRva2Vucy4KICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgb25seUFkbWluIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgIGVtaXQgTWludEZpbmlzaGVkKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQnVybnMgYSBzcGVjaWZpYyBhbW91bnQgb2YgdG9rZW5zLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSBidXJuZWQuCiAgICovCiAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgcHVibGljIHsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKICAgIC8vIG5vIG5lZWQgdG8gcmVxdWlyZSB2YWx1ZSA8PSB0b3RhbFN1cHBseSwgc2luY2UgdGhhdCB3b3VsZCBpbXBseSB0aGUKICAgIC8vIHNlbmRlcidzIGJhbGFuY2UgaXMgZ3JlYXRlciB0aGFuIHRoZSB0b3RhbFN1cHBseSwgd2hpY2ggKnNob3VsZCogYmUgYW4gYXNzZXJ0aW9uIGZhaWx1cmUKCiAgICBhZGRyZXNzIGJ1cm5lciA9IG1zZy5zZW5kZXI7CiAgICBiYWxhbmNlc1tidXJuZXJdID0gYmFsYW5jZXNbYnVybmVyXS5zdWIoX3ZhbHVlKTsKICAgIHRvdGFsU3VwcGx5XyA9IHRvdGFsU3VwcGx5Xy5zdWIoX3ZhbHVlKTsKICAgIGVtaXQgQnVybihidXJuZXIsIF92YWx1ZSk7CiAgICBlbWl0IFRyYW5zZmVyKGJ1cm5lciwgYWRkcmVzcygwKSwgX3ZhbHVlKTsKICB9Cn0KCgovKioKICogQHRpdGxlIENyb3dkc2FsZSBDb250cmFjdAogKiBAYXV0aG9yIEtpcmlsbCBWYXJsYW1vdiAoQG9uZ3JpZCksIE9uR3JpZCBzeXN0ZW1zCiAqIEBkZXYgQ3Jvd2RzYWxlIGlzIGEgY29udHJhY3QgZm9yIG1hbmFnaW5nIGEgdG9rZW4gY3Jvd2RzYWxlLAogKiBhbGxvd2luZyBpbnZlc3RvcnMgdG8gcHVyY2hhc2UgdG9rZW5zIHdpdGggZXRoZXIuCiAqLwpjb250cmFjdCBDcnlwdG9uaWFDcm93ZHNhbGUgaXMgUkJBQyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIHN0cnVjdCBQaGFzZSB7CiAgICB1aW50MjU2IHN0YXJ0RGF0ZTsKICAgIHVpbnQyNTYgZW5kRGF0ZTsKICAgIHVpbnQyNTYgdG9rZW5zUGVyRVRIOwogICAgdWludDI1NiB0b2tlbnNJc3N1ZWQ7CiAgfQoKICBQaGFzZVtdIHB1YmxpYyBwaGFzZXM7CgogIC8vIFRoZSB0b2tlbiBiZWluZyBzb2xkCiAgQ3J5cHRvbmlhVG9rZW4gcHVibGljIHRva2VuOwoKICAvLyBBZGRyZXNzIHdoZXJlIGZ1bmRzIGdldCBjb2xsZWN0ZWQKICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CgogIC8vIE1pbmltYWwgYWxsb3dlZCBwdXJjaGFzZSBpcyAwLjEgRVRICiAgdWludDI1NiBwdWJsaWMgbWluUHVyY2hhc2UgPSAxMDAwMDAwMDAwMDAwMDAwMDA7CgogIC8vIEFtb3VudCBvZiBFVEggcmFpc2VkIGluIHdlaS4gMSB3ZWkgaXMgMTBlLTE4IEVUSAogIHVpbnQyNTYgcHVibGljIHdlaVJhaXNlZDsKCiAgLy8gQW1vdW50IG9mIHRva2VucyBpc3N1ZWQgYnkgdGhpcyBjb250cmFjdAogIHVpbnQyNTYgcHVibGljIHRva2Vuc0lzc3VlZDsKCiAgLyoqCiAgICogRXZlbnQgZm9yIHRva2VuIHB1cmNoYXNlIGxvZ2dpbmcKICAgKiBAcGFyYW0gcHVyY2hhc2VyIHdobyBwYWlkIGZvciB0aGUgdG9rZW5zCiAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IHdobyBnb3QgdGhlIHRva2VucwogICAqIEBwYXJhbSB2YWx1ZSB3ZWlzIHBhaWQgZm9yIHB1cmNoYXNlCiAgICogQHBhcmFtIGFtb3VudCBhbW91bnQgb2YgdG9rZW5zIHB1cmNoYXNlZAogICAqLwogIGV2ZW50IFRva2VuUHVyY2hhc2UoYWRkcmVzcyBpbmRleGVkIHB1cmNoYXNlciwgYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFtb3VudCk7CgogIC8qKgogICAqIEBkZXYgRXZlbnRzIGZvciBjb250cmFjdCBzdGF0ZXMgY2hhbmdlcwogICAqLwogIGV2ZW50IFBoYXNlQWRkZWQoYWRkcmVzcyBpbmRleGVkIHNlbmRlciwgdWludDI1NiBpbmRleCwgdWludDI1NiBzdGFydERhdGUsIHVpbnQyNTYgZW5kRGF0ZSwgdWludDI1NiB0b2tlbnNQZXJFVEgpOwogIGV2ZW50IFBoYXNlRGVsZXRlZChhZGRyZXNzIGluZGV4ZWQgc2VuZGVyLCB1aW50MjU2IGluZGV4KTsKICBldmVudCBXYWxsZXRDaGFuZ2VkKGFkZHJlc3MgbmV3V2FsbGV0KTsKICBldmVudCBPcmFjbGVDaGFuZ2VkKGFkZHJlc3MgbmV3T3JhY2xlKTsKCiAgLyoqCiAgICogQHBhcmFtIF93YWxsZXQgQWRkcmVzcyB3aGVyZSBjb2xsZWN0ZWQgZnVuZHMgd2lsbCBiZSBmb3J3YXJkZWQgdG8KICAgKiBAcGFyYW0gX3Rva2VuICBBZGRyZXNzIG9mIHRoZSB0b2tlbiBiZWluZyBzb2xkCiAgICovCiAgZnVuY3Rpb24gQ3J5cHRvbmlhQ3Jvd2RzYWxlKGFkZHJlc3MgX3dhbGxldCwgQ3J5cHRvbmlhVG9rZW4gX3Rva2VuKSBwdWJsaWMgewogICAgcmVxdWlyZShfd2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdG9rZW4gIT0gYWRkcmVzcygwKSk7CiAgICB3YWxsZXQgPSBfd2FsbGV0OwogICAgdG9rZW4gPSBfdG9rZW47CiAgfQoKICAvKioKICAgKiBAZGV2IGZhbGxiYWNrIGZ1bmN0aW9uIHJlY2VpdmluZyBpbnZlc3RvcidzIGV0aGVycwogICAqICAgICAgSXQgY2FsY3VsYXRlcyBkZXBvc2l0IFVTRCB2YWx1ZSBhbmQgY29ycmVzcG9uZGluZyB0b2tlbiBhbW91bnQsCiAgICogICAgICBydW5zIHNvbWUgY2hlY2tzIChpZiBwaGFzZSBjYXAgbm90IGV4Y2VlZGVkLCB2YWx1ZSBhbmQgYWRkcmVzc2VzIGFyZSBub3QgbnVsbCksCiAgICogICAgICB0aGVuIG1pbnRzIGNvcnJlc3BvbmRpbmcgYW1vdW50IG9mIHRva2VucywgaW5jcmVtZW50cyBzdGF0ZSB2YXJpYWJsZXMuCiAgICogICAgICBBZnRlciB0b2tlbnMgaXNzdWVkIEV0aGVycyBnZXQgdHJhbnNmZXJyZWQgdG8gdGhlIHdhbGxldC4KICAgKi8KICBmdW5jdGlvbigpIGV4dGVybmFsIHBheWFibGUgewogICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICBhZGRyZXNzIGJlbmVmaWNpYXJ5ID0gbXNnLnNlbmRlcjsKICAgIHVpbnQyNTYgY3VycmVudFBoYXNlSW5kZXggPSBnZXRDdXJyZW50UGhhc2VJbmRleCgpOwogICAgdWludDI1NiB0b2tlbnMgPSB3ZWlBbW91bnQubXVsKHBoYXNlc1tjdXJyZW50UGhhc2VJbmRleF0udG9rZW5zUGVyRVRIKS5kaXYoMSBldGhlcik7CiAgICByZXF1aXJlKGJlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZSh3ZWlBbW91bnQgPj0gbWluUHVyY2hhc2UpOwogICAgd2VpUmFpc2VkID0gd2VpUmFpc2VkLmFkZCh3ZWlBbW91bnQpOwogICAgcGhhc2VzW2N1cnJlbnRQaGFzZUluZGV4XS50b2tlbnNJc3N1ZWQgPSBwaGFzZXNbY3VycmVudFBoYXNlSW5kZXhdLnRva2Vuc0lzc3VlZC5hZGQodG9rZW5zKTsKICAgIHRva2Vuc0lzc3VlZCA9IHRva2Vuc0lzc3VlZC5hZGQodG9rZW5zKTsKICAgIHRva2VuLm1pbnQoYmVuZWZpY2lhcnksIHRva2Vucyk7CiAgICB3YWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIGVtaXQgVG9rZW5QdXJjaGFzZShtc2cuc2VuZGVyLCBiZW5lZmljaWFyeSwgd2VpQW1vdW50LCB0b2tlbnMpOwogIH0KCiAgLyoqCiAgICogQGRldiBDaGVja3MgaWYgZGF0ZXMgb3ZlcmxhcCB3aXRoIGV4aXN0aW5nIHBoYXNlcyBvZiB0aGUgY29udHJhY3QuCiAgICogQHBhcmFtIF9zdGFydERhdGUgIFN0YXJ0IGRhdGUgb2YgdGhlIHBoYXNlCiAgICogQHBhcmFtIF9lbmREYXRlICAgIEVuZCBkYXRlIG9mIHRoZSBwaGFzZQogICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm92aWRlZCBkYXRlcyB2YWxpZAogICAqLwogIGZ1bmN0aW9uIHZhbGlkYXRlUGhhc2VEYXRlcyh1aW50MjU2IF9zdGFydERhdGUsIHVpbnQyNTYgX2VuZERhdGUpIHZpZXcgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGlmIChfZW5kRGF0ZSA8PSBfc3RhcnREYXRlKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGZvciAodWludCBpID0gMDsgaSA8IHBoYXNlcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoX3N0YXJ0RGF0ZSA+PSBwaGFzZXNbaV0uc3RhcnREYXRlICYmIF9zdGFydERhdGUgPD0gcGhhc2VzW2ldLmVuZERhdGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKF9lbmREYXRlID49IHBoYXNlc1tpXS5zdGFydERhdGUgJiYgX2VuZERhdGUgPD0gcGhhc2VzW2ldLmVuZERhdGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBZGRzIGEgbmV3IHBoYXNlCiAgICogQHBhcmFtIF9zdGFydERhdGUgIFN0YXJ0IGRhdGUgb2YgdGhlIHBoYXNlCiAgICogQHBhcmFtIF9lbmREYXRlICAgIEVuZCBkYXRlIG9mIHRoZSBwaGFzZQogICAqIEBwYXJhbSBfdG9rZW5zUGVyRVRIICBhbW91bnQgb2YgdG9rZW5zIHBlciBFVEgKICAgKi8KICBmdW5jdGlvbiBhZGRQaGFzZSh1aW50MjU2IF9zdGFydERhdGUsIHVpbnQyNTYgX2VuZERhdGUsIHVpbnQyNTYgX3Rva2Vuc1BlckVUSCkgcHVibGljIG9ubHlBZG1pbiB7CiAgICByZXF1aXJlKHZhbGlkYXRlUGhhc2VEYXRlcyhfc3RhcnREYXRlLCBfZW5kRGF0ZSkpOwogICAgcmVxdWlyZShfdG9rZW5zUGVyRVRIID4gMCk7CiAgICBwaGFzZXMucHVzaChQaGFzZShfc3RhcnREYXRlLCBfZW5kRGF0ZSwgX3Rva2Vuc1BlckVUSCwgMCkpOwogICAgdWludDI1NiBpbmRleCA9IHBoYXNlcy5sZW5ndGggLSAxOwogICAgZW1pdCBQaGFzZUFkZGVkKG1zZy5zZW5kZXIsIGluZGV4LCBfc3RhcnREYXRlLCBfZW5kRGF0ZSwgX3Rva2Vuc1BlckVUSCk7CiAgfQoKICAvKioKICAgKiBAZGV2IERlbGV0ZSBwaGFzZSBieSBpdHMgaW5kZXgKICAgKiBAcGFyYW0gaW5kZXggSW5kZXggb2YgdGhlIHBoYXNlCiAgICovCiAgZnVuY3Rpb24gZGVsUGhhc2UodWludDI1NiBpbmRleCkgcHVibGljIG9ubHlBZG1pbiB7CiAgICByZXF1aXJlIChpbmRleCA8IHBoYXNlcy5sZW5ndGgpOwoKICAgIGZvciAodWludCBpID0gaW5kZXg7IGkgPCBwaGFzZXMubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgIHBoYXNlc1tpXSA9IHBoYXNlc1tpICsgMV07CiAgICB9CiAgICBwaGFzZXMubGVuZ3RoLS07CiAgICBlbWl0IFBoYXNlRGVsZXRlZChtc2cuc2VuZGVyLCBpbmRleCk7CiAgfQoKICAvKioKICAgKiBAZGV2IFJldHVybiBjdXJyZW50IHBoYXNlIGluZGV4CiAgICogQHJldHVybiBjdXJyZW50IHBoYXNlIGlkCiAgICovCiAgZnVuY3Rpb24gZ2V0Q3VycmVudFBoYXNlSW5kZXgoKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBwaGFzZXMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKHBoYXNlc1tpXS5zdGFydERhdGUgPD0gbm93ICYmIG5vdyA8PSBwaGFzZXNbaV0uZW5kRGF0ZSkgewogICAgICAgIHJldHVybiBpOwogICAgICB9CiAgICB9CiAgICByZXZlcnQoKTsKICB9CgogIC8qKgogICAqIEBkZXYgU2V0IG5ldyB3YWxsZXQgdG8gY29sbGVjdCBldGhlcnMKICAgKiBAcGFyYW0gX25ld1dhbGxldCBFT0Egb3IgdGhlIGNvbnRyYWN0IGFkZGVyZXNzIG9mIHRoZSBuZXcgcmVjZWl2ZXIKICAgKi8KICBmdW5jdGlvbiBzZXRXYWxsZXQoYWRkcmVzcyBfbmV3V2FsbGV0KSBvbmx5QWRtaW4gcHVibGljIHsKICAgIHJlcXVpcmUoX25ld1dhbGxldCAhPSBhZGRyZXNzKDApKTsKICAgIHdhbGxldCA9IF9uZXdXYWxsZXQ7CiAgICBlbWl0IFdhbGxldENoYW5nZWQoX25ld1dhbGxldCk7CiAgfQp9'.
	

]
