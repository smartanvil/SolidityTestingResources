Class {
	#name : #SRTc7413ae0e8e3ac3bf186f47850a05bb5603294de,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc7413ae0e8e3ac3bf186f47850a05bb5603294de >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5ID49MC40LjEwOwoKY29udHJhY3QgVG9rZW4gewogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCBhbW91bnQpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IGFtb3VudCkgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIGFkZHIpIGNvbnN0YW50IHJldHVybnModWludCk7Cn0KCmNvbnRyYWN0IE93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogICAgLyoqCiAgICAgKiBFdmVudHMKICAgICAqLwogICAgZXZlbnQgQ2hhbmdlZE93bmVyKGFkZHJlc3MgaW5kZXhlZCBuZXdfb3duZXIpOwoKICAgIC8qKgogICAgICogRnVuY3Rpb25hbGl0eQogICAgICovCgogICAgZnVuY3Rpb24gT3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgbmV3T3duZXIgPSBfbmV3T3duZXI7CiAgICB9CgogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgZXh0ZXJuYWwgewogICAgICAgIGlmIChtc2cuc2VuZGVyID09IG5ld093bmVyKSB7CiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgICAgIG5ld093bmVyID0gMHgwOwogICAgICAgICAgICBDaGFuZ2VkT3duZXIob3duZXIpOwogICAgICAgIH0KICAgIH0KfQoKLyoqCiAqIFNhdmluZ3MgaXMgYSBjb250cmFjdCB0aGF0IHJlbGVhc2VzIFRva2VucyBvbiBhIHByZWRlZmluZWQKICogc2NoZWR1bGUsIGFuZCBhbGxvY2F0ZXMgYm9udXMgdG9rZW5zIHVwb24gd2l0aGRyYXdhbCBvbiBhCiAqIHByb3BvcnRpb25hbCBiYXNpcywgZGV0ZXJtaW5lZCBieSB0aGUgcmF0aW8gb2YgZGVwb3NpdGVkIHRva2VucwogKiB0byB0b3RhbCBvd25lZCB0b2tlbnMuCiAqCiAqIFRoZSBkaXN0cmlidXRpb24gc2NoZWR1bGUgY29uc2lzdHMgb2YgYSBtb250aGx5IHdpdGhkcmF3YWwgc2NoZWR1bGUKICogcmVzcG9uc2libGUgZm9yIGRpc3RyaWJ1dGlvbiA3NSUgb2YgdGhlIHRvdGFsIHNhdmluZ3MsIGFuZCBhCiAqIG9uZS1vZmYgd2l0aGRyYXdhbCBldmVudCBhdmFpbGFibGUgYmVmb3JlIG9yIGF0IHRoZSBzdGFydCBvZiB0aGUKICogd2l0aGRyYXdhbCBzY2hlZHVsZSwgZGlzdHJpYnV0aW5nIDI1JSBvZiB0aGUgdG90YWwgc2F2aW5ncy4KICoKICogVG8gYmUgZXhhY3QsIHVwb24gY29udHJhY3QgZGVwbG95bWVudCB0aGVyZSBtYXkgYmUgYSBwZXJpb2Qgb2YgdGltZSBpbiB3aGljaAogKiBvbmx5IHRoZSBvbmUtb2ZmIHdpdGhkcmF3YWwgZXZlbnQgaXMgYXZhaWxhYmxlLCBkZWZpbmUgdGhpcyBwZXJpb2Qgb2YgdGltZSBhczoKICogW3RpbWVzdGFtcChzdGFydCksIHRpbWVzdGFtcChzdGFydEJsb2NrVGltZXN0YW1wKSksCiAqCiAqIFRoZW4gdGhlIHBlcmlvZGljIHdpdGhkcmF3YWwgcmFuZ2UgaXMgZGVmaW5lZCBhczoKICogW3RpbWVzdGFtcChzdGFydEJsb2NrVGltZXN0YW1wKSwgK2luZikKICoKICogRE8gTk9UIFNFTkQgVE9LRU5TIFRPIFRISVMgQ09OVFJBQ1QuIFVzZSB0aGUgZGVwb3NpdCgpIG9yIGRlcG9zaXRUbygpIG1ldGhvZC4KICogQXMgYW4gZXhjZXB0aW9uLCB0b2tlbnMgdHJhbnNmZXJyZWQgdG8gdGhpcyBjb250cmFjdCBiZWZvcmUgbG9ja2luZyBhcmUgdGhlCiAqIGJvbnVzIHRva2VucyB0aGF0IGFyZSBkaXN0cmlidXRlZC4KICovCmNvbnRyYWN0IFNhdmluZ3MgaXMgT3duZWQgewogICAgLyoqCiAgICAgKiBQZXJpb2RzIGlzIHRoZSB0b3RhbCBtb250aGx5IHdpdGhkcmF3YWJsZSBhbW91bnQsIG5vdCBjb3VudGluZyB0aGUKICAgICAqIHNwZWNpYWwgd2l0aGRyYXdhbC4KICAgICAqLwogICAgdWludCBwdWJsaWMgcGVyaW9kczsKCiAgICAvKioKICAgICAqIHQwc3BlY2lhbCBpcyBhbiBhZGRpdGlvbmFsIG11bHRpcGxpZXIgdGhhdCBkZXRlcm1pbmVzIHdoYXQKICAgICAqIGZyYWN0aW9uIG9mIHRoZSB0b3RhbCBkaXN0cmlidXRpb24gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlCiAgICAgKiBvbmUtb2ZmIHdpdGhkcmF3YWwgZXZlbnQuIEl0IGlzIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aAogICAgICogYSBwZXJpb2RpYyBtdWx0aXBsaWVyIChwKSB0byBkZXRlcm1pbmUgdGhlIHRvdGFsIHNhdmluZ3Mgd2l0aGRyYXdhYmxlCiAgICAgKiB0byB0aGUgdXNlciBhdCB0aGF0IHBvaW50IGluIHRpbWUuCiAgICAgKgogICAgICogVGhlIHZhbHVlIGlzIG5vdCBzZXQsIGl0IGlzIGNhbGN1bGF0ZWQgYmFzZWQgb24gcGVyaW9kcwogICAgICovCiAgICB1aW50IHB1YmxpYyB0MHNwZWNpYWw7CgogICAgdWludCBjb25zdGFudCBwdWJsaWMgaW50ZXJ2YWxTZWNzID0gMzAgZGF5czsKICAgIHVpbnQgY29uc3RhbnQgcHVibGljIHByZWNpc2lvbiA9IDEwICoqIDE4OwoKCiAgICAvKioKICAgICAqIEV2ZW50cwogICAgICovCiAgICBldmVudCBXaXRoZHJhd3MoYWRkcmVzcyBpbmRleGVkIHdobywgdWludCBhbW91bnQpOwogICAgZXZlbnQgRGVwb3NpdChhZGRyZXNzIGluZGV4ZWQgd2hvLCB1aW50IGFtb3VudCk7CgogICAgYm9vbCBwdWJsaWMgaW5pdGVkOwogICAgYm9vbCBwdWJsaWMgbG9ja2VkOwogICAgdWludCBwdWJsaWMgc3RhcnRCbG9ja1RpbWVzdGFtcCA9IDA7CgogICAgVG9rZW4gcHVibGljIHRva2VuOwoKICAgIC8vIGZhY2UgdmFsdWUgZGVwb3NpdGVkIGJ5IGFuIGFkZHJlc3MgYmVmb3JlIGxvY2tpbmcKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGRlcG9zaXRlZDsKCiAgICAvLyB0b3RhbCBmYWNlIHZhbHVlIGRlcG9zaXRlZDsgc3VtIG9mIGRlcG9zaXRlZAogICAgdWludCBwdWJsaWMgdG90YWxmdjsKCiAgICAvLyB0aGUgdG90YWwgcmVtYWluaW5nIHZhbHVlCiAgICB1aW50IHB1YmxpYyByZW1haW5kZXI7CgogICAgLyoqCiAgICAgKiBUb3RhbCB0b2tlbnMgb3duZWQgYnkgdGhlIGNvbnRyYWN0IGFmdGVyIGxvY2tpbmcsIGFuZCBwb3NzaWJseQogICAgICogdXBkYXRlZCBieSB0aGUgZm91bmRhdGlvbiBhZnRlciBzdWJzZXF1ZW50IHNhbGVzLgogICAgICovCiAgICB1aW50IHB1YmxpYyB0b3RhbDsKCiAgICAvLyB0aGUgdG90YWwgdmFsdWUgd2l0aGRyYXduCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyB3aXRoZHJhd247CgogICAgYm9vbCBwdWJsaWMgbnVsbGlmaWVkOwoKICAgIG1vZGlmaWVyIG5vdE51bGxpZmllZCgpIHsgcmVxdWlyZSghbnVsbGlmaWVkKTsgXzsgfQoKICAgIG1vZGlmaWVyIHByZUxvY2soKSB7IHJlcXVpcmUoIWxvY2tlZCAmJiBzdGFydEJsb2NrVGltZXN0YW1wID09IDApOyBfOyB9CgogICAgLyoqCiAgICAgKiBMb2NrIGNhbGxlZCwgZGVwb3NpdHMgbm8gbG9uZ2VyIGF2YWlsYWJsZS4KICAgICAqLwogICAgbW9kaWZpZXIgcG9zdExvY2soKSB7IHJlcXVpcmUobG9ja2VkKTsgXzsgfQoKICAgIC8qKgogICAgICogUHJlc3RhcnQsIHN0YXRlIGlzIGFmdGVyIGxvY2ssIGJlZm9yZSBzdGFydAogICAgICovCiAgICBtb2RpZmllciBwcmVTdGFydCgpIHsgcmVxdWlyZShsb2NrZWQgJiYgc3RhcnRCbG9ja1RpbWVzdGFtcCA9PSAwKTsgXzsgfQoKICAgIC8qKgogICAgICogU3RhcnQgY2FsbGVkLCB0aGUgc2F2aW5ncyBjb250cmFjdCBpcyBub3cgZmluYWxpemVkLCBhbmQgd2l0aGRyYXdhbHMKICAgICAqIGFyZSBub3cgcGVybWl0dGVkLgogICAgICovCiAgICBtb2RpZmllciBwb3N0U3RhcnQoKSB7IHJlcXVpcmUobG9ja2VkICYmIHN0YXJ0QmxvY2tUaW1lc3RhbXAgIT0gMCk7IF87IH0KCiAgICAvKioKICAgICAqIFVuaW5pdGlhbGl6ZWQgc3RhdGUsIGJlZm9yZSBpbml0IGlzIGNhbGxlZC4gTWFpbmx5IHVzZWQgYXMgYSBndWFyZCB0bwogICAgICogZmluYWxpemUgcGVyaW9kcyBhbmQgdDBzcGVjaWFsLgogICAgICovCiAgICBtb2RpZmllciBub3RJbml0aWFsaXplZCgpIHsgcmVxdWlyZSghaW5pdGVkKTsgXzsgfQoKICAgIC8qKgogICAgICogUG9zdCBpbml0aWFsaXphdGlvbiBzdGF0ZSwgbWFpbmx5IHVzZWQgdG8gZ3VhcmFudGVlIHRoYXQKICAgICAqIHBlcmlvZHMgYW5kIHQwc3BlY2lhbCBoYXZlIGJlZW4gc2V0IHByb3Blcmx5IGJlZm9yZSBzdGFydGluZwogICAgICogdGhlIHdpdGhkcmF3YWwgcHJvY2Vzcy4KICAgICAqLwogICAgbW9kaWZpZXIgaW5pdGlhbGl6ZWQoKSB7IHJlcXVpcmUoaW5pdGVkKTsgXzsgfQoKICAgIC8qKgogICAgICogUmV2ZXJ0IHVuZGVyIGFsbCBjb25kaXRpb25zIGZvciBmYWxsYmFjaywgY2hlYXBlciBtaXN0YWtlcwogICAgICogaW4gdGhlIGZ1dHVyZT8KICAgICAqLwogICAgZnVuY3Rpb24oKSB7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBOdWxsaWZ5IGZ1bmN0aW9uYWxpdHkgaXMgaW50ZW5kZWQgdG8gZGlzYWJsZSB0aGUgY29udHJhY3QuCiAgICAgKi8KICAgIGZ1bmN0aW9uIG51bGxpZnkoKSBvbmx5T3duZXIgewogICAgICAgIG51bGxpZmllZCA9IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbml0aWFsaXphdGlvbiBmdW5jdGlvbiwgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBjb250cmFjdCBkZXBsb3ltZW50LiBUaGUKICAgICAqIGFkZGl0aW9uIG9mIHRoaXMgZnVuY3Rpb24gYWxsb3dzIGNvbnRyYWN0IGNvbXBpbGF0aW9uIHRvIGJlIHNpbXBsaWZpZWQKICAgICAqIHRvIG9uZSBjb250cmFjdCwgaW5zdGVhZCBvZiB0d28uCiAgICAgKgogICAgICogcGVyaW9kcyBhbmQgdDBzcGVjaWFsIGFyZSBmaW5hbGl6ZWQsIGFuZCBlZmZlY3RpdmVseSBpbnZhcmlhbnQsIGFmdGVyCiAgICAgKiBpbml0IGlzIGNhbGxlZCBmb3IgdGhlIGZpcnN0IHRpbWUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGluaXQodWludCBfcGVyaW9kcywgdWludCBfdDBzcGVjaWFsKSBvbmx5T3duZXIgbm90SW5pdGlhbGl6ZWQgewogICAgICAgIHJlcXVpcmUoX3BlcmlvZHMgIT0gMCk7CiAgICAgICAgcGVyaW9kcyA9IF9wZXJpb2RzOwogICAgICAgIHQwc3BlY2lhbCA9IF90MHNwZWNpYWw7CiAgICB9CgogICAgZnVuY3Rpb24gZmluYWxpemVJbml0KCkgb25seU93bmVyIG5vdEluaXRpYWxpemVkIHsKICAgICAgICBpbml0ZWQgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFRva2VuKGFkZHJlc3MgdG9rKSBvbmx5T3duZXIgewogICAgICAgIHRva2VuID0gVG9rZW4odG9rKTsKICAgIH0KCiAgICAvKioKICAgICAqIExvY2sgaXMgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBsb2NrIHRoZSBzYXZpbmdzIGNvbnRyYWN0CiAgICAgKiBzbyB0aGF0IG5vIG1vcmUgZGVwb3NpdHMgbWF5IGJlIG1hZGUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGxvY2soKSBvbmx5T3duZXIgewogICAgICAgIGxvY2tlZCA9IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdGFydHMgdGhlIGRpc3RyaWJ1dGlvbiBvZiBzYXZpbmdzLCBpdCBzaG91bGQgYmUgY2FsbGVkCiAgICAgKiBhZnRlciBsb2NrKCksIG9uY2UgYWxsIG9mIHRoZSBib251cyB0b2tlbnMgYXJlIHNlbmQgdG8gdGhpcyBjb250cmFjdCwKICAgICAqIGFuZCBtdWx0aU1pbnQgaGFzIGJlZW4gY2FsbGVkLgogICAgICovCiAgICBmdW5jdGlvbiBzdGFydCh1aW50IF9zdGFydEJsb2NrVGltZXN0YW1wKSBvbmx5T3duZXIgaW5pdGlhbGl6ZWQgcHJlU3RhcnQgewogICAgICAgIHN0YXJ0QmxvY2tUaW1lc3RhbXAgPSBfc3RhcnRCbG9ja1RpbWVzdGFtcDsKICAgICAgICB1aW50MjU2IHRva2VuQmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICB0b3RhbCA9IHRva2VuQmFsYW5jZTsKICAgICAgICByZW1haW5kZXIgPSB0b2tlbkJhbGFuY2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayB3aXRoZHJhd2FsIGlzIGxpdmUsIHVzZWZ1bCBmb3IgY2hlY2tpbmcgd2hldGhlcgogICAgICogdGhlIHNhdmluZ3MgY29udHJhY3QgaXMgImxpdmUiLCB3aXRoZHJhd2FsIGVuYWJsZWQsIHN0YXJ0ZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzU3RhcnRlZCgpIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBsb2NrZWQgJiYgc3RhcnRCbG9ja1RpbWVzdGFtcCAhPSAwOwogICAgfQoKICAgIC8vIGlmIHNvbWVvbmUgYWNjaWRlbnRhbGx5IHRyYW5zZmVycyB0b2tlbnMgdG8gdGhpcyBjb250cmFjdCwKICAgIC8vIHRoZSBvd25lciBjYW4gcmV0dXJuIHRoZW0gYXMgbG9uZyBhcyBkaXN0cmlidXRpb24gaGFzbid0IHN0YXJ0ZWQKCiAgICAvKioKICAgICAqIFVzZWQgdG8gcmVmdW5kIHVzZXJzIHdobyBhY2NpZGVudGFseSB0cmFuc2ZlcnJlZCB0b2tlbnMgdG8gdGhpcwogICAgICogY29udHJhY3QsIG9ubHkgYXZhaWxhYmxlIGJlZm9yZSBjb250cmFjdCBpcyBsb2NrZWQKICAgICAqLwogICAgZnVuY3Rpb24gcmVmdW5kVG9rZW5zKGFkZHJlc3MgYWRkciwgdWludCBhbW91bnQpIG9ubHlPd25lciBwcmVMb2NrIHsKICAgICAgICB0b2tlbi50cmFuc2ZlcihhZGRyLCBhbW91bnQpOwogICAgfQoKCiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgdG90YWwgYmFsYW5jZSwgdG8gYmUgY2FsbGVkIGluIGNhc2Ugb2Ygc3Vic2VxdWVudCBzYWxlcy4gVXBkYXRlcwogICAgICogdGhlIHRvdGFsIHJlY29yZGVkIGJhbGFuY2Ugb2YgdGhlIGNvbnRyYWN0IGJ5IHRoZSBkaWZmZXJlbmNlIGluIGV4cGVjdGVkCiAgICAgKiByZW1haW5kZXIgYW5kIHRoZSBjdXJyZW50IGJhbGFuY2UuIFRoaXMgbWVhbnMgYW55IHBvc2l0aXZlIGRpZmZlcmVuY2Ugd2lsbAogICAgICogYmUgInJlY29yZGVkIiBpbnRvIHRoZSBjb250cmFjdCwgYW5kIGRpc3RyaWJ1dGVkIHdpdGhpbiB0aGUgcmVtYWluaW5nCiAgICAgKiBtb250aHMgb2YgdGhlIFRSUy4KICAgICAqLwogICAgZnVuY3Rpb24gdXBkYXRlVG90YWwoKSBvbmx5T3duZXIgcG9zdExvY2sgewogICAgICAgIHVpbnQgY3VycmVudCA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICByZXF1aXJlKGN1cnJlbnQgPj0gcmVtYWluZGVyKTsgLy8gZm9yIHNhbml0eQoKICAgICAgICB1aW50IGRpZmZlcmVuY2UgPSAoY3VycmVudCAtIHJlbWFpbmRlcik7CiAgICAgICAgdG90YWwgKz0gZGlmZmVyZW5jZTsKICAgICAgICByZW1haW5kZXIgPSBjdXJyZW50OwogICAgfQoKICAgIC8qKgogICAgICogQ2FsY3VsYXRlcyB0aGUgbW9udGhseSBwZXJpb2QsIHN0YXJ0aW5nIGFmdGVyIHRoZSBzdGFydEJsb2NrVGltZXN0YW1wLAogICAgICogcGVyaW9kQXQgd2lsbCByZXR1cm4gMCBmb3IgYWxsIHRpbWVzdGFtcHMgYmVmb3JlIHN0YXJ0QmxvY2tUaW1lc3RhbXAuCiAgICAgKgogICAgICogVGhlcmVmb3JlIHBlcmlvZCAwIGlzIHRoZSByYW5nZSBvZiB0aW1lIGluIHdoaWNoIHdlIGhhdmUgY2FsbGVkIHN0YXJ0KCksCiAgICAgKiBidXQgaGF2ZSBub3QgeWV0IHBhc3NlZCBzdGFydEJsb2NrVGltZXN0YW1wLiBQZXJpb2QgMSBpcyB0aGUKICAgICAqIGZpcnN0IG1vbnRobHkgcGVyaW9kLCBhbmQgc28tZm9ydGggYWxsIHRoZSB3YXkgdW50aWwgdGhlIGxhc3QKICAgICAqIHBlcmlvZCA9PSBwZXJpb2RzLgogICAgICoKICAgICAqIE5PVEU6IG5vdCBndWFyZGVkIHNpbmNlIG5vIHN0YXRlIG1vZGlmaWNhdGlvbnMgYXJlIG1hZGUuIEhvd2V2ZXIsCiAgICAgKiBpdCB3aWxsIHJldHVybiBpbnZhbGlkIGRhdGEgYmVmb3JlIHRoZSBwb3N0U3RhcnQgc3RhdGUuIEl0IGlzCiAgICAgKiB1cCB0byB0aGUgdXNlciB0byBtYW51YWxseSBjaGVjayB0aGF0IHRoZSBjb250cmFjdCBpcyBpbgogICAgICogcG9zdFN0YXJ0IHN0YXRlLgogICAgICovCiAgICBmdW5jdGlvbiBwZXJpb2RBdCh1aW50IF9ibG9ja1RpbWVzdGFtcCkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgLyoqCiAgICAgICAgICogTG93ZXIgYm91bmQsIGNvbnNpZGVyIHBlcmlvZCAwIHRvIGJlIHRoZSB0aW1lIGJldHdlZW4KICAgICAgICAgKiBzdGFydCgpIGFuZCBzdGFydEJsb2NrVGltZXN0YW1wCiAgICAgICAgICovCiAgICAgICAgaWYgKHN0YXJ0QmxvY2tUaW1lc3RhbXAgPiBfYmxvY2tUaW1lc3RhbXApCiAgICAgICAgICAgIHJldHVybiAwOwoKICAgICAgICAvKioKICAgICAgICAgKiBDYWxjdWxhdGUgdGhlIGFwcHJvcHJpYXRlIHBlcmlvZCwgYW5kIHNldCBhbiB1cHBlciBib3VuZCBvZgogICAgICAgICAqIHBlcmlvZHMgLSAxLgogICAgICAgICAqLwogICAgICAgIHVpbnQgcCA9ICgoX2Jsb2NrVGltZXN0YW1wIC0gc3RhcnRCbG9ja1RpbWVzdGFtcCkgLyBpbnRlcnZhbFNlY3MpICsgMTsKICAgICAgICBpZiAocCA+IHBlcmlvZHMpCiAgICAgICAgICAgIHAgPSBwZXJpb2RzOwogICAgICAgIHJldHVybiBwOwogICAgfQoKICAgIC8vIHdoYXQgd2l0aGRyYXdhbCBwZXJpb2QgYXJlIHdlIGluPwogICAgLy8gcmV0dXJucyB0aGUgcGVyaW9kIG51bWJlciBmcm9tIFswLCBwZXJpb2RzKQogICAgZnVuY3Rpb24gcGVyaW9kKCkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIHBlcmlvZEF0KGJsb2NrLnRpbWVzdGFtcCk7CiAgICB9CgogICAgLy8gZGVwb3NpdCB5b3VyIHRva2VucyB0byBiZSBzYXZlZAogICAgLy8KICAgIC8vIHRoZSBkZXNwb3NpdG9yIG11c3QgaGF2ZSBhcHByb3ZlKCknZCB0aGUgdG9rZW5zCiAgICAvLyB0byBiZSB0cmFuc2ZlcnJlZCBieSB0aGlzIGNvbnRyYWN0CiAgICBmdW5jdGlvbiBkZXBvc2l0KHVpbnQgdG9rZW5zKSBub3ROdWxsaWZpZWQgewogICAgICAgIGRlcG9zaXRUbyhtc2cuc2VuZGVyLCB0b2tlbnMpOwogICAgfQoKCiAgICBmdW5jdGlvbiBkZXBvc2l0VG8oYWRkcmVzcyBiZW5lZmljaWFyeSwgdWludCB0b2tlbnMpIHByZUxvY2sgbm90TnVsbGlmaWVkIHsKICAgICAgICByZXF1aXJlKHRva2VuLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCB0aGlzLCB0b2tlbnMpKTsKICAgICAgICBkZXBvc2l0ZWRbYmVuZWZpY2lhcnldICs9IHRva2VuczsKICAgICAgICB0b3RhbGZ2ICs9IHRva2VuczsKICAgICAgICBEZXBvc2l0KGJlbmVmaWNpYXJ5LCB0b2tlbnMpOwogICAgfQoKICAgIC8vIGNvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBvd25lcjogZGVwb3NpdCBvbiBiZWhhbGYgb2YgbWFueQogICAgZnVuY3Rpb24gYnVsa0RlcG9zaXRUbyh1aW50MjU2W10gYml0cykgb25seU93bmVyIHsKICAgICAgICB1aW50MjU2IGxvbWFzayA9ICgxIDw8IDk2KSAtIDE7CiAgICAgICAgZm9yICh1aW50IGk9MDsgaTxiaXRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGFkZHJlc3MgYSA9IGFkZHJlc3MoYml0c1tpXT4+OTYpOwogICAgICAgICAgICB1aW50IHZhbCA9IGJpdHNbaV0mbG9tYXNrOwogICAgICAgICAgICBkZXBvc2l0VG8oYSwgdmFsKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gd2l0aGRyYXcgd2l0aGRyYXdzIHRva2VucyB0byB0aGUgc2VuZGVyCiAgICAvLyB3aXRoZHJhdyBjYW4gYmUgY2FsbGVkIGF0IG1vc3Qgb25jZSBwZXIgcmVkZW1wdGlvbiBwZXJpb2QKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgbm90TnVsbGlmaWVkIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiB3aXRoZHJhd1RvKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsY3VsYXRlcyB0aGUgZnJhY3Rpb24gb2YgdG90YWwgKG9uZS1vZmYgKyBtb250aGx5KSB3aXRoZHJhd2FibGUKICAgICAqIGdpdmVuIHRoZSBjdXJyZW50IHRpbWVzdGFtcC4gTm8gZ3VhcmRzIGR1ZSB0byBmdW5jdGlvbiBiZWluZyBjb25zdGFudC4KICAgICAqIFdpbGwgb3V0cHV0IGludmFsaWQgZGF0YSB1bnRpbCB0aGUgcG9zdFN0YXJ0IHN0YXRlLiBJdCBpcyB1cCB0byB0aGUgdXNlcgogICAgICogdG8gbWFudWFsbHkgY29uZmlybSBjb250cmFjdCBpcyBpbiBwb3N0U3RhcnQgc3RhdGUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGF2YWlsYWJsZUZvcldpdGhkcmF3YWxBdCh1aW50MjU2IGJsb2NrVGltZXN0YW1wKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlIHRoZSB0b3RhbCB3aXRoZHJhd2FibGUsIGdpdmluZyBhIG51bWVyYXRvciB3aXRoIHJhbmdlOgogICAgICAgICAqIFswLjI1ICogMTAgKiogMTgsIDEgKiAxMCAqKiAxOF0KICAgICAgICAgKi8KICAgICAgICByZXR1cm4gKCh0MHNwZWNpYWwgKyBwZXJpb2RBdChibG9ja1RpbWVzdGFtcCkpICogcHJlY2lzaW9uKSAvICh0MHNwZWNpYWwgKyBwZXJpb2RzKTsKICAgIH0KCiAgICAvKioKICAgICAqIEJ1c2luZXNzIGxvZ2ljIG9mIF93aXRoZHJhd1RvLCB0aGUgY29kZSBpcyBzZXBhcmF0ZWQgdGhpcyB3YXkgbWFpbmx5IGZvcgogICAgICogdGVzdGluZy4gV2UgY2FuIGluamVjdCBhbmQgdGVzdCBwYXJhbWV0ZXJzIGZyZWVseSB3aXRob3V0IHdvcnJ5aW5nIGFib3V0IHRoZQogICAgICogYmxvY2tjaGFpbiBtb2RlbC4KICAgICAqCiAgICAgKiBOT1RFOiBTaW5jZSBmdW5jdGlvbiBpcyBjb25zdGFudCwgbm8gZ3VhcmRzIGFyZSBhcHBsaWVkLiBUaGlzIGZ1bmN0aW9uIHdpbGwgZ2l2ZQogICAgICogaW52YWxpZCBvdXRwdXRzIHVubGVzcyBpbiBwb3N0U3RhcnQgc3RhdGUuIEl0IGlzIHVwIHRvIHVzZXIgdG8gbWFudWFsbHkgY2hlY2sKICAgICAqIHRoYXQgdGhlIGNvcnJlY3Qgc3RhdGUgaXMgZ2l2ZW4gKGlzU3RhcnQoKSA9PSB0cnVlKQogICAgICovCiAgICBmdW5jdGlvbiBfd2l0aGRyYXdUbyh1aW50IF9kZXBvc2l0LCB1aW50IF93aXRoZHJhd24sIHVpbnQgX2Jsb2NrVGltZXN0YW1wLCB1aW50IF90b3RhbCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQyNTYgZnJhY3Rpb24gPSBhdmFpbGFibGVGb3JXaXRoZHJhd2FsQXQoX2Jsb2NrVGltZXN0YW1wKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogVGhlcmUgYXJlIGNvbmNlcm5zIHRoYXQgdGhlIG11bHRpcGxpY2F0aW9uIGNvdWxkIHBvc3NpYmx5CiAgICAgICAgICogb3ZlcmZsb3csIGhvd2V2ZXIgdGhpcyBzaG91bGQgbm90IGJlIHRoZSBjYXNlIGlmIHdlIGNhbGN1bGF0ZQogICAgICAgICAqIHRoZSB1cHBlciBib3VuZCBiYXNlZCBvbiBvdXIga25vd24gcGFyYW1ldGVyczoKICAgICAgICAgKgogICAgICAgICAqIExldHMgYXNzdW1lIHRoZSBtaW50ZWQgdG9rZW4gYW1vdW50IHRvIGJlIDUwMCBtaWxsaW9uIChyZWFzb25hYmxlKSwKICAgICAgICAgKiBnaXZlbiBhIHByZWNpc2lvbiBvZiA4IGRlY2ltYWwgcGxhY2VzLCB3ZSBnZXQ6CiAgICAgICAgICogZGVwb3NpdGVkW2FkZHJdID0gNSAqICgxMCAqKiA4KSAqICgxMCAqKiA4KSA9IDUgKiAoMTAgKiogMTYpCiAgICAgICAgICoKICAgICAgICAgKiBUaGUgbWF4IGZvciBmcmFjdGlvbiA9IDEwICoqIDE4LCBhbmQgdGhlIG1heCBmb3IgdG90YWwgaXMKICAgICAgICAgKiBhbHNvIDUgKiAoMTAgKiogMTYpLgogICAgICAgICAqCiAgICAgICAgICogVGhlcmVmb3JlOgogICAgICAgICAqIGRlcG9zaXRlZFthZGRyXSAqIGZyYWN0aW9uICogdG90YWwgPSAyLjUgKiAoMTAgKiogNTEpCiAgICAgICAgICoKICAgICAgICAgKiBUaGUgbWF4aW11bSBmb3IgYSB1aW50MjU2IGlzID0gMS4xNSAqICgxMCAqKiA3NykKICAgICAgICAgKi8KICAgICAgICB1aW50MjU2IHdpdGhkcmF3YWJsZSA9ICgoX2RlcG9zaXQgKiBmcmFjdGlvbiAqIF90b3RhbCkgLyB0b3RhbGZ2KSAvIHByZWNpc2lvbjsKCiAgICAgICAgLy8gY2hlY2sgdGhhdCB3ZSBjYW4gd2l0aGRyYXcgc29tZXRoaW5nCiAgICAgICAgaWYgKHdpdGhkcmF3YWJsZSA+IF93aXRoZHJhd24pIHsKICAgICAgICAgICAgcmV0dXJuIHdpdGhkcmF3YWJsZSAtIF93aXRoZHJhd247CiAgICAgICAgfQogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIC8qKgogICAgICogUHVibGljIGZhY2luZyB3aXRoZHJhd1RvLCBpbmplY3RzIGJ1c2luZXNzIGxvZ2ljIHdpdGgKICAgICAqIHRoZSBjb3JyZWN0IG1vZGVsLgogICAgICovCiAgICBmdW5jdGlvbiB3aXRoZHJhd1RvKGFkZHJlc3MgYWRkcikgcG9zdFN0YXJ0IG5vdE51bGxpZmllZCByZXR1cm5zIChib29sKSB7CiAgICAgICAgdWludCBfZCA9IGRlcG9zaXRlZFthZGRyXTsKICAgICAgICB1aW50IF93ID0gd2l0aGRyYXduW2FkZHJdOwoKICAgICAgICB1aW50IGRpZmYgPSBfd2l0aGRyYXdUbyhfZCwgX3csIGJsb2NrLnRpbWVzdGFtcCwgdG90YWwpOwoKICAgICAgICAvLyBubyB3aXRoZHJhd2FsIGNvdWxkIGJlIG1hZGUKICAgICAgICBpZiAoZGlmZiA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIC8vIGNoZWNrIHRoYXQgd2UgY2Fubm90IHdpdGhkcmF3IG1vcmUgdGhhbiBtYXgKICAgICAgICByZXF1aXJlKChkaWZmICsgX3cpIDw9ICgoX2QgKiB0b3RhbCkgLyB0b3RhbGZ2KSk7CgogICAgICAgIC8vIHRyYW5zZmVyIGFuZCBpbmNyZW1lbnQKICAgICAgICByZXF1aXJlKHRva2VuLnRyYW5zZmVyKGFkZHIsIGRpZmYpKTsKCiAgICAgICAgd2l0aGRyYXduW2FkZHJdICs9IGRpZmY7CiAgICAgICAgcmVtYWluZGVyIC09IGRpZmY7CiAgICAgICAgV2l0aGRyYXdzKGFkZHIsIGRpZmYpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIGZvcmNlIHdpdGhkcmF3YWwgdG8gbWFueSBhZGRyZXNzZXMKICAgIGZ1bmN0aW9uIGJ1bGtXaXRoZHJhdyhhZGRyZXNzW10gYWRkcnMpIG5vdE51bGxpZmllZCB7CiAgICAgICAgZm9yICh1aW50IGk9MDsgaTxhZGRycy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgd2l0aGRyYXdUbyhhZGRyc1tpXSk7CiAgICB9CgogICAgLy8gQ29kZSBvZmYgdGhlIGNoYWluIGluZm9ybXMgdGhpcyBjb250cmFjdCBhYm91dAogICAgLy8gdG9rZW5zIHRoYXQgd2VyZSBtaW50ZWQgdG8gaXQgb24gYmVoYWxmIG9mIGEgZGVwb3NpdG9yLgogICAgLy8KICAgIC8vIE5vdGU6IHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgaGVyZSBpcyBrbm93biB0byBOZXcgQWxjaGVteSdzCiAgICAvLyB0b29saW5nLCB3aGljaCBpcyB3aHkgaXQgaXMgYXJndWFibHkgbWlzbmFtZWQuCiAgICB1aW50IHB1YmxpYyBtaW50aW5nTm9uY2U7CiAgICBmdW5jdGlvbiBtdWx0aU1pbnQodWludCBub25jZSwgdWludDI1NltdIGJpdHMpIG9ubHlPd25lciBwcmVMb2NrIHsKCiAgICAgICAgaWYgKG5vbmNlICE9IG1pbnRpbmdOb25jZSkgcmV0dXJuOwogICAgICAgIG1pbnRpbmdOb25jZSArPSAxOwogICAgICAgIHVpbnQyNTYgbG9tYXNrID0gKDEgPDwgOTYpIC0gMTsKICAgICAgICB1aW50IHN1bSA9IDA7CiAgICAgICAgZm9yICh1aW50IGk9MDsgaTxiaXRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGFkZHJlc3MgYSA9IGFkZHJlc3MoYml0c1tpXT4+OTYpOwogICAgICAgICAgICB1aW50IHZhbHVlID0gYml0c1tpXSZsb21hc2s7CiAgICAgICAgICAgIGRlcG9zaXRlZFthXSArPSB2YWx1ZTsKICAgICAgICAgICAgc3VtICs9IHZhbHVlOwogICAgICAgICAgICBEZXBvc2l0KGEsIHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgdG90YWxmdiArPSBzdW07CiAgICB9Cn0='.
	

]
