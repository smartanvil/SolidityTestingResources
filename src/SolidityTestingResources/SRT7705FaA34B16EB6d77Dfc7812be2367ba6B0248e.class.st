Class {
	#name : #SRT7705FaA34B16EB6d77Dfc7812be2367ba6B0248e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7705FaA34B16EB6d77Dfc7812be2367ba6B0248e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4gMC40LjEzOwoKY29udHJhY3QgTWlncmF0aW9uQWdlbnQgewogICAgZnVuY3Rpb24gbWlncmF0ZUZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBQcmVBcnRleFRva2VuIHsKICAgIHN0cnVjdCBJbnZlc3RvciB7CiAgICAgICAgdWludCBhbW91bnRUb2tlbnM7CiAgICAgICAgdWludCBhbW91bnRXZWk7CiAgICB9CgogICAgdWludCBwdWJsaWMgZXRoZXJQcmljZVVTRFdFSTsKICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwogICAgdWludCBwdWJsaWMgdG90YWxMaW1pdFVTRFdFSTsKICAgIHVpbnQgcHVibGljIG1pbmltYWxTdWNjZXNzVVNEV0VJOwogICAgdWludCBwdWJsaWMgY29sbGVjdGVkVVNEV0VJOwoKICAgIHVpbnQgcHVibGljIHN0YXRlOwoKICAgIHVpbnQgcHVibGljIGNyb3dkc2FsZVN0YXJ0VGltZTsKICAgIHVpbnQgcHVibGljIGNyb3dkc2FsZUZpbmlzaFRpbWU7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IEludmVzdG9yKSBwdWJsaWMgaW52ZXN0b3JzOwogICAgbWFwcGluZyh1aW50ID0+IGFkZHJlc3MpIHB1YmxpYyBpbnZlc3RvcnNJdGVyOwogICAgdWludCBwdWJsaWMgbnVtYmVyT2ZJbnZlc3RvcnM7Cn0KCmNvbnRyYWN0IE93bmVkIHsKCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgb3JhY2xlOwogICAgYWRkcmVzcyBwdWJsaWMgYnRjT3JhY2xlOwoKICAgIGZ1bmN0aW9uIE93bmVkKCkgcGF5YWJsZSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShvd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lck9yT3JhY2xlIHsKICAgICAgICByZXF1aXJlKG93bmVyID09IG1zZy5zZW5kZXIgfHwgb3JhY2xlID09IG1zZy5zZW5kZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyT3JCdGNPcmFjbGUgewogICAgICAgIHJlcXVpcmUob3duZXIgPT0gbXNnLnNlbmRlciB8fCBidGNPcmFjbGUgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9vd25lcikgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKF9vd25lciAhPSAwKTsKICAgICAgICBuZXdPd25lciA9IF9vd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBjb25maXJtT3duZXIoKSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIGRlbGV0ZSBuZXdPd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VPcmFjbGUoYWRkcmVzcyBfb3JhY2xlKSBvbmx5T3duZXIgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUoX29yYWNsZSAhPSAwKTsKICAgICAgICBvcmFjbGUgPSBfb3JhY2xlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUJ0Y09yYWNsZShhZGRyZXNzIF9idGNPcmFjbGUpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfYnRjT3JhY2xlICE9IDApOwogICAgICAgIGJ0Y09yYWNsZSA9IF9idGNPcmFjbGU7CiAgICB9Cn0KCmNvbnRyYWN0IEtub3duQ29udHJhY3QgewogICAgZnVuY3Rpb24gdHJhbnNmZXJlZChhZGRyZXNzIF9zZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlczMyW10gX2RhdGEpIGV4dGVybmFsOwp9Cgpjb250cmFjdCBFUkMyMCB7CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnModWludCk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyh1aW50KTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSk7CgogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KCmNvbnRyYWN0IFN0YXRlZnVsIHsKICAgIGVudW0gU3RhdGUgewogICAgICAgIEluaXRpYWwsCiAgICAgICAgUHJlU2FsZSwKICAgICAgICBXYWl0aW5nRm9yU2FsZSwKICAgICAgICBTYWxlLAogICAgICAgIENyb3dkc2FsZUNvbXBsZXRlZCwKICAgICAgICBTYWxlRmFpbGVkCiAgICB9CgogICAgU3RhdGUgcHVibGljIHN0YXRlID0gU3RhdGUuSW5pdGlhbDsKCiAgICBldmVudCBTdGF0ZUNoYW5nZWQoU3RhdGUgb2xkU3RhdGUsIFN0YXRlIG5ld1N0YXRlKTsKCiAgICBmdW5jdGlvbiBzZXRTdGF0ZShTdGF0ZSBuZXdTdGF0ZSkgaW50ZXJuYWwgewogICAgICAgIFN0YXRlIG9sZFN0YXRlID0gc3RhdGU7CiAgICAgICAgc3RhdGUgPSBuZXdTdGF0ZTsKICAgICAgICBTdGF0ZUNoYW5nZWQob2xkU3RhdGUsIG5ld1N0YXRlKTsKICAgIH0KfQoKY29udHJhY3QgQ3Jvd2RzYWxlIGlzIE93bmVkLCBTdGF0ZWZ1bCB7CgogICAgdWludCBwdWJsaWMgZXRoZXJQcmljZVVTRFdFSTsKICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwogICAgdWludCBwdWJsaWMgdG90YWxMaW1pdFVTRFdFSTsKICAgIHVpbnQgcHVibGljIG1pbmltYWxTdWNjZXNzVVNEV0VJOwogICAgdWludCBwdWJsaWMgY29sbGVjdGVkVVNEV0VJOwoKICAgIHVpbnQgcHVibGljIGNyb3dkc2FsZVN0YXJ0VGltZTsKICAgIHVpbnQgcHVibGljIGNyb3dkc2FsZUZpbmlzaFRpbWU7CgogICAgdWludCBwdWJsaWMgdG9rZW5QcmljZVVTRFdFSSA9IDEwMDAwMDAwMDAwMDAwMDAwMDsKCiAgICBzdHJ1Y3QgSW52ZXN0b3IgewogICAgICAgIHVpbnQgYW1vdW50VG9rZW5zOwogICAgICAgIHVpbnQgYW1vdW50V2VpOwogICAgfQoKICAgIHN0cnVjdCBCdGNEZXBvc2l0IHsKICAgICAgICB1aW50IGFtb3VudEJUQ1dFSTsKICAgICAgICB1aW50IGJ0Y1ByaWNlVVNEV0VJOwogICAgICAgIGFkZHJlc3MgaW52ZXN0b3I7CiAgICB9CgogICAgbWFwcGluZyhieXRlczMyID0+IEJ0Y0RlcG9zaXQpIHB1YmxpYyBidGNEZXBvc2l0czsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gSW52ZXN0b3IpIHB1YmxpYyBpbnZlc3RvcnM7CiAgICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgcHVibGljIGludmVzdG9yc0l0ZXI7CiAgICB1aW50IHB1YmxpYyBudW1iZXJPZkludmVzdG9yczsKCiAgICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgcHVibGljIGludmVzdG9yc1RvV2l0aGRyYXdJdGVyOwogICAgdWludCBwdWJsaWMgbnVtYmVyT2ZJbnZlc3RvcnNUb1dpdGhkcmF3OwoKICAgIGZ1bmN0aW9uIENyb3dkc2FsZSgpIHBheWFibGUgT3duZWQoKSB7fQoKICAgIC8vYWJzdHJhY3QgbWV0aG9kcwogICAgZnVuY3Rpb24gZW1pdFRva2VucyhhZGRyZXNzIF9pbnZlc3RvciwgdWludCBfdXNkd2VpKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQgdG9rZW5zVG9FbWl0KTsKCiAgICBmdW5jdGlvbiBlbWl0QWRkaXRpb25hbFRva2VucygpIGludGVybmFsOwoKICAgIGZ1bmN0aW9uIGJ1cm5Ub2tlbnMoYWRkcmVzcyBfYWRkcmVzcywgdWludCBfYW1vdW50KSBpbnRlcm5hbDsKCiAgICBmdW5jdGlvbigpIHBheWFibGUgY3Jvd2RzYWxlU3RhdGUgbGltaXROb3RFeGNlZWRlZCBjcm93ZHNhbGVOb3RGaW5pc2hlZCB7CiAgICAgICAgdWludCB2YWx1ZVdFSSA9IG1zZy52YWx1ZTsKICAgICAgICB1aW50IHZhbHVlVVNEV0VJID0gdmFsdWVXRUkgKiBldGhlclByaWNlVVNEV0VJIC8gMSBldGhlcjsKICAgICAgICBpZiAoY29sbGVjdGVkVVNEV0VJICsgdmFsdWVVU0RXRUkgPiB0b3RhbExpbWl0VVNEV0VJKSB7IC8vIGRvbid0IG5lZWQgc28gbXVjaCBldGhlcgogICAgICAgICAgICB2YWx1ZVVTRFdFSSA9IHRvdGFsTGltaXRVU0RXRUkgLSBjb2xsZWN0ZWRVU0RXRUk7CiAgICAgICAgICAgIHZhbHVlV0VJID0gdmFsdWVVU0RXRUkgKiAxIGV0aGVyIC8gZXRoZXJQcmljZVVTRFdFSTsKICAgICAgICAgICAgdWludCB3ZWlUb1JldHVybiA9IG1zZy52YWx1ZSAtIHZhbHVlV0VJOwogICAgICAgICAgICBib29sIGlzU2VudCA9IG1zZy5zZW5kZXIuY2FsbC5nYXMoMzAwMDAwMCkudmFsdWUod2VpVG9SZXR1cm4pKCk7CiAgICAgICAgICAgIHJlcXVpcmUoaXNTZW50KTsKICAgICAgICAgICAgY29sbGVjdGVkVVNEV0VJID0gdG90YWxMaW1pdFVTRFdFSTsgLy8gdG8gYmUgc3VyZSEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29sbGVjdGVkVVNEV0VJICs9IHZhbHVlVVNEV0VJOwogICAgICAgIH0KICAgICAgICBlbWl0VG9rZW5zRm9yKG1zZy5zZW5kZXIsIHZhbHVlVVNEV0VJLCB2YWx1ZVdFSSk7CiAgICB9CgogICAgZnVuY3Rpb24gZGVwb3NpdFVTRChhZGRyZXNzIF90bywgdWludCBfYW1vdW50VVNEV0VJKSBleHRlcm5hbCBvbmx5T3duZXIgY3Jvd2RzYWxlU3RhdGUgbGltaXROb3RFeGNlZWRlZCBjcm93ZHNhbGVOb3RGaW5pc2hlZCB7CiAgICAgICAgY29sbGVjdGVkVVNEV0VJICs9IF9hbW91bnRVU0RXRUk7CiAgICAgICAgZW1pdFRva2Vuc0ZvcihfdG8sIF9hbW91bnRVU0RXRUksIDApOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlcG9zaXRCVEMoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudEJUQ1dFSSwgdWludCBfYnRjUHJpY2VVU0RXRUksIGJ5dGVzMzIgX2J0Y1R4SWQpIGV4dGVybmFsIG9ubHlPd25lck9yQnRjT3JhY2xlIGNyb3dkc2FsZVN0YXRlIGxpbWl0Tm90RXhjZWVkZWQgY3Jvd2RzYWxlTm90RmluaXNoZWQgewogICAgICAgIHVpbnQgdmFsdWVVU0RXRUkgPSBfYW1vdW50QlRDV0VJICogX2J0Y1ByaWNlVVNEV0VJIC8gMSBldGhlcjsKICAgICAgICBCdGNEZXBvc2l0IHN0b3JhZ2UgYnRjRGVwID0gYnRjRGVwb3NpdHNbX2J0Y1R4SWRdOwogICAgICAgIHJlcXVpcmUoYnRjRGVwLmFtb3VudEJUQ1dFSSA9PSAwKTsKICAgICAgICBidGNEZXAuYW1vdW50QlRDV0VJID0gX2Ftb3VudEJUQ1dFSTsKICAgICAgICBidGNEZXAuYnRjUHJpY2VVU0RXRUkgPSBfYnRjUHJpY2VVU0RXRUk7CiAgICAgICAgYnRjRGVwLmludmVzdG9yID0gX3RvOwogICAgICAgIGNvbGxlY3RlZFVTRFdFSSArPSB2YWx1ZVVTRFdFSTsKICAgICAgICBlbWl0VG9rZW5zRm9yKF90bywgdmFsdWVVU0RXRUksIDApOwogICAgfQoKICAgIGZ1bmN0aW9uIGVtaXRUb2tlbnNGb3IoYWRkcmVzcyBfaW52ZXN0b3IsIHVpbnQgX3ZhbHVlVVNEV0VJLCB1aW50IF92YWx1ZVdFSSkgaW50ZXJuYWwgewogICAgICAgIHZhciBlbWl0dGVkVG9rZW5zID0gZW1pdFRva2VucyhfaW52ZXN0b3IsIF92YWx1ZVVTRFdFSSk7CiAgICAgICAgSW52ZXN0b3Igc3RvcmFnZSBpbnYgPSBpbnZlc3RvcnNbX2ludmVzdG9yXTsKICAgICAgICBpZiAoaW52LmFtb3VudFRva2VucyA9PSAwKSB7IC8vIG5ldyBpbnZlc3RvcgogICAgICAgICAgICBpbnZlc3RvcnNJdGVyW251bWJlck9mSW52ZXN0b3JzKytdID0gX2ludmVzdG9yOwogICAgICAgIH0KICAgICAgICBpbnYuYW1vdW50VG9rZW5zICs9IGVtaXR0ZWRUb2tlbnM7CiAgICAgICAgaWYgKHN0YXRlID09IFN0YXRlLlNhbGUpIHsKICAgICAgICAgICAgaW52LmFtb3VudFdlaSArPSBfdmFsdWVXRUk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0UHJlU2FsZSgKICAgICAgICBhZGRyZXNzIF9iZW5lZmljaWFyeSwKICAgICAgICB1aW50IF9ldGhlclByaWNlVVNEV0VJLAogICAgICAgIHVpbnQgX3RvdGFsTGltaXRVU0RXRUksCiAgICAgICAgdWludCBfY3Jvd2RzYWxlRHVyYXRpb25EYXlzKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuSW5pdGlhbCk7CiAgICAgICAgY3Jvd2RzYWxlU3RhcnRUaW1lID0gbm93OwogICAgICAgIGJlbmVmaWNpYXJ5ID0gX2JlbmVmaWNpYXJ5OwogICAgICAgIGV0aGVyUHJpY2VVU0RXRUkgPSBfZXRoZXJQcmljZVVTRFdFSTsKICAgICAgICB0b3RhbExpbWl0VVNEV0VJID0gX3RvdGFsTGltaXRVU0RXRUk7CiAgICAgICAgY3Jvd2RzYWxlRmluaXNoVGltZSA9IG5vdyArIF9jcm93ZHNhbGVEdXJhdGlvbkRheXMgKiAxIGRheXM7CiAgICAgICAgY29sbGVjdGVkVVNEV0VJID0gMDsKICAgICAgICBzZXRTdGF0ZShTdGF0ZS5QcmVTYWxlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5pc2hQcmVTYWxlKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5QcmVTYWxlKTsKICAgICAgICBib29sIGlzU2VudCA9IGJlbmVmaWNpYXJ5LmNhbGwuZ2FzKDMwMDAwMDApLnZhbHVlKHRoaXMuYmFsYW5jZSkoKTsKICAgICAgICByZXF1aXJlKGlzU2VudCk7CiAgICAgICAgc2V0U3RhdGUoU3RhdGUuV2FpdGluZ0ZvclNhbGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0U2FsZSgKICAgICAgICBhZGRyZXNzIF9iZW5lZmljaWFyeSwKICAgICAgICB1aW50IF9ldGhlclByaWNlVVNEV0VJLAogICAgICAgIHVpbnQgX3RvdGFsTGltaXRVU0RXRUksCiAgICAgICAgdWludCBfY3Jvd2RzYWxlRHVyYXRpb25EYXlzLAogICAgICAgIHVpbnQgX21pbmltYWxTdWNjZXNzVVNEV0VJKSBleHRlcm5hbCBvbmx5T3duZXIgewoKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLldhaXRpbmdGb3JTYWxlKTsKICAgICAgICBjcm93ZHNhbGVTdGFydFRpbWUgPSBub3c7CiAgICAgICAgYmVuZWZpY2lhcnkgPSBfYmVuZWZpY2lhcnk7CiAgICAgICAgZXRoZXJQcmljZVVTRFdFSSA9IF9ldGhlclByaWNlVVNEV0VJOwogICAgICAgIHRvdGFsTGltaXRVU0RXRUkgPSBfdG90YWxMaW1pdFVTRFdFSTsKICAgICAgICBjcm93ZHNhbGVGaW5pc2hUaW1lID0gbm93ICsgX2Nyb3dkc2FsZUR1cmF0aW9uRGF5cyAqIDEgZGF5czsKICAgICAgICBtaW5pbWFsU3VjY2Vzc1VTRFdFSSA9IF9taW5pbWFsU3VjY2Vzc1VTRFdFSTsKICAgICAgICBjb2xsZWN0ZWRVU0RXRUkgPSAwOwogICAgICAgIHNldFN0YXRlKFN0YXRlLlNhbGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZhaWxTYWxlKHVpbnQgX2ludmVzdG9yc1RvUHJvY2VzcykgcHVibGljIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlNhbGUpOwogICAgICAgIHJlcXVpcmUobm93ID49IGNyb3dkc2FsZUZpbmlzaFRpbWUgJiYgY29sbGVjdGVkVVNEV0VJIDwgbWluaW1hbFN1Y2Nlc3NVU0RXRUkpOwogICAgICAgIHdoaWxlIChfaW52ZXN0b3JzVG9Qcm9jZXNzID4gMCAmJiBudW1iZXJPZkludmVzdG9ycyA+IDApIHsKICAgICAgICAgICAgYWRkcmVzcyBhZGRyID0gaW52ZXN0b3JzSXRlclstLW51bWJlck9mSW52ZXN0b3JzXTsKICAgICAgICAgICAgSW52ZXN0b3IgbWVtb3J5IGludiA9IGludmVzdG9yc1thZGRyXTsKICAgICAgICAgICAgYnVyblRva2VucyhhZGRyLCBpbnYuYW1vdW50VG9rZW5zKTsKICAgICAgICAgICAgLS1faW52ZXN0b3JzVG9Qcm9jZXNzOwogICAgICAgICAgICBkZWxldGUgaW52ZXN0b3JzSXRlcltudW1iZXJPZkludmVzdG9yc107CgogICAgICAgICAgICBpbnZlc3RvcnNUb1dpdGhkcmF3SXRlcltudW1iZXJPZkludmVzdG9yc1RvV2l0aGRyYXddID0gYWRkcjsKICAgICAgICAgICAgbnVtYmVyT2ZJbnZlc3RvcnNUb1dpdGhkcmF3Kys7CiAgICAgICAgfQogICAgICAgIGlmIChudW1iZXJPZkludmVzdG9ycyA+IDApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBzZXRTdGF0ZShTdGF0ZS5TYWxlRmFpbGVkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb21wbGV0ZVNhbGUodWludCBfaW52ZXN0b3JzVG9Qcm9jZXNzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlNhbGUpOwogICAgICAgIHJlcXVpcmUoY29sbGVjdGVkVVNEV0VJID49IG1pbmltYWxTdWNjZXNzVVNEV0VJKTsKCiAgICAgICAgd2hpbGUgKF9pbnZlc3RvcnNUb1Byb2Nlc3MgPiAwICYmIG51bWJlck9mSW52ZXN0b3JzID4gMCkgewogICAgICAgICAgICAtLW51bWJlck9mSW52ZXN0b3JzOwogICAgICAgICAgICAtLV9pbnZlc3RvcnNUb1Byb2Nlc3M7CiAgICAgICAgICAgIGRlbGV0ZSBpbnZlc3RvcnNbaW52ZXN0b3JzSXRlcltudW1iZXJPZkludmVzdG9yc11dOwogICAgICAgICAgICBkZWxldGUgaW52ZXN0b3JzSXRlcltudW1iZXJPZkludmVzdG9yc107CiAgICAgICAgfQoKICAgICAgICBpZiAobnVtYmVyT2ZJbnZlc3RvcnMgPiAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGVtaXRBZGRpdGlvbmFsVG9rZW5zKCk7CgogICAgICAgIGJvb2wgaXNTZW50ID0gYmVuZWZpY2lhcnkuY2FsbC5nYXMoMzAwMDAwMCkudmFsdWUodGhpcy5iYWxhbmNlKSgpOwogICAgICAgIHJlcXVpcmUoaXNTZW50KTsKICAgICAgICBzZXRTdGF0ZShTdGF0ZS5Dcm93ZHNhbGVDb21wbGV0ZWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEV0aGVyUHJpY2VVU0RXRUkodWludCBfZXRoZXJQcmljZVVTRFdFSSkgZXh0ZXJuYWwgb25seU93bmVyT3JPcmFjbGUgewogICAgICAgIGV0aGVyUHJpY2VVU0RXRUkgPSBfZXRoZXJQcmljZVVTRFdFSTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRCZW5lZmljaWFyeShhZGRyZXNzIF9iZW5lZmljaWFyeSkgZXh0ZXJuYWwgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IDApOwogICAgICAgIGJlbmVmaWNpYXJ5ID0gX2JlbmVmaWNpYXJ5OwogICAgfQoKICAgIC8vIFRoaXMgZnVuY3Rpb24gbXVzdCBiZSBjYWxsZWQgYnkgdG9rZW4gaG9sZGVyIGluIGNhc2Ugb2YgY3Jvd2RzYWxlIGZhaWxlZAogICAgZnVuY3Rpb24gd2l0aGRyYXdCYWNrKCkgZXh0ZXJuYWwgc2FsZUZhaWxlZFN0YXRlIHsKICAgICAgICByZXR1cm5JbnZlc3RtZW50c1RvSW50ZXJuYWwobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gcmV0dXJuSW52ZXN0bWVudHModWludCBfaW52ZXN0b3JzVG9Qcm9jZXNzKSBwdWJsaWMgc2FsZUZhaWxlZFN0YXRlIHsKICAgICAgICB3aGlsZSAoX2ludmVzdG9yc1RvUHJvY2VzcyA+IDAgJiYgbnVtYmVyT2ZJbnZlc3RvcnNUb1dpdGhkcmF3ID4gMCkgewogICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBpbnZlc3RvcnNUb1dpdGhkcmF3SXRlclstLW51bWJlck9mSW52ZXN0b3JzVG9XaXRoZHJhd107CiAgICAgICAgICAgIGRlbGV0ZSBpbnZlc3RvcnNUb1dpdGhkcmF3SXRlcltudW1iZXJPZkludmVzdG9yc1RvV2l0aGRyYXddOwogICAgICAgICAgICAtLV9pbnZlc3RvcnNUb1Byb2Nlc3M7CiAgICAgICAgICAgIHJldHVybkludmVzdG1lbnRzVG9JbnRlcm5hbChhZGRyKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmV0dXJuSW52ZXN0bWVudHNUbyhhZGRyZXNzIF90bykgcHVibGljIHNhbGVGYWlsZWRTdGF0ZSB7CiAgICAgICAgcmV0dXJuSW52ZXN0bWVudHNUb0ludGVybmFsKF90byk7CiAgICB9CgogICAgZnVuY3Rpb24gcmV0dXJuSW52ZXN0bWVudHNUb0ludGVybmFsKGFkZHJlc3MgX3RvKSBpbnRlcm5hbCB7CiAgICAgICAgSW52ZXN0b3IgbWVtb3J5IGludiA9IGludmVzdG9yc1tfdG9dOwogICAgICAgIHVpbnQgdmFsdWUgPSBpbnYuYW1vdW50V2VpOwogICAgICAgIGlmICh2YWx1ZSA+IDApIHsKICAgICAgICAgICAgZGVsZXRlIGludmVzdG9yc1tfdG9dOwogICAgICAgICAgICByZXF1aXJlKF90by5jYWxsLmdhcygzMDAwMDAwKS52YWx1ZSh2YWx1ZSkoKSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RnVuZHModWludCBfdmFsdWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUHJlU2FsZSB8fCAoc3RhdGUgPT0gU3RhdGUuU2FsZSAmJiBjb2xsZWN0ZWRVU0RXRUkgPiBtaW5pbWFsU3VjY2Vzc1VTRFdFSSkpOwogICAgICAgIGlmIChfdmFsdWUgPT0gMCkgewogICAgICAgICAgICBfdmFsdWUgPSB0aGlzLmJhbGFuY2U7CiAgICAgICAgfQogICAgICAgIGJvb2wgaXNTZW50ID0gYmVuZWZpY2lhcnkuY2FsbC5nYXMoMzAwMDAwMCkudmFsdWUoX3ZhbHVlKSgpOwogICAgICAgIHJlcXVpcmUoaXNTZW50KTsKICAgIH0KCiAgICBtb2RpZmllciBjcm93ZHNhbGVOb3RGaW5pc2hlZCB7CiAgICAgICAgcmVxdWlyZShub3cgPCBjcm93ZHNhbGVGaW5pc2hUaW1lKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGxpbWl0Tm90RXhjZWVkZWQgewogICAgICAgIHJlcXVpcmUoY29sbGVjdGVkVVNEV0VJIDwgdG90YWxMaW1pdFVTRFdFSSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBjcm93ZHNhbGVTdGF0ZSB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5QcmVTYWxlIHx8IHN0YXRlID09IFN0YXRlLlNhbGUpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgc2FsZUZhaWxlZFN0YXRlIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlNhbGVGYWlsZWQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgY29tcGxldGVkU2FsZVN0YXRlIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkNyb3dkc2FsZUNvbXBsZXRlZCk7CiAgICAgICAgXzsKICAgIH0KfQoKY29udHJhY3QgVG9rZW4gaXMgQ3Jvd2RzYWxlLCBFUkMyMCB7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGludGVybmFsIGJhbGFuY2VzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSkgcHVibGljIGFsbG93ZWQ7CiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSA4OwoKICAgIGZ1bmN0aW9uIFRva2VuKCkgcGF5YWJsZSBDcm93ZHNhbGUoKSB7fQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW3dob107CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgY29tcGxldGVkU2FsZVN0YXRlIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID49IGJhbGFuY2VzW190b10pOyAvLyBvdmVyZmxvdwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIGNvbXBsZXRlZFNhbGVTdGF0ZSBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW190b10gKyBfdmFsdWUgPj0gYmFsYW5jZXNbX3RvXSk7IC8vIG92ZXJmbG93CiAgICAgICAgcmVxdWlyZShhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcHVibGljIGNvbXBsZXRlZFNhbGVTdGF0ZSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgY29tcGxldGVkU2FsZVN0YXRlIHJldHVybnModWludCByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgICAgcmVxdWlyZShtc2cuZGF0YS5sZW5ndGggPj0gc2l6ZSArIDQpOwogICAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IE1pZ3JhdGFibGVUb2tlbiBpcyBUb2tlbiB7CgogICAgZnVuY3Rpb24gTWlncmF0YWJsZVRva2VuKCkgcGF5YWJsZSBUb2tlbigpIHt9CgogICAgYm9vbCBzdGF0ZU1pZ3JhdGVkID0gZmFsc2U7CiAgICBhZGRyZXNzIHB1YmxpYyBtaWdyYXRpb25BZ2VudDsKICAgIHVpbnQgcHVibGljIHRvdGFsTWlncmF0ZWQ7CiAgICBhZGRyZXNzIHB1YmxpYyBtaWdyYXRpb25Ib3N0OwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIG1pZ3JhdGVkSW52ZXN0b3JzOwoKICAgIGV2ZW50IE1pZ3JhdGVkKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwoKICAgIGZ1bmN0aW9uIHNldE1pZ3JhdGlvbkhvc3QoYWRkcmVzcyBfYWRkcmVzcykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9hZGRyZXNzICE9IDApOwogICAgICAgIG1pZ3JhdGlvbkhvc3QgPSBfYWRkcmVzczsKICAgIH0KCiAgICBmdW5jdGlvbiBtaWdyYXRlU3RhdGVGcm9tSG9zdCgpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShzdGF0ZU1pZ3JhdGVkID09IGZhbHNlICYmIG1pZ3JhdGlvbkhvc3QgIT0gMCk7CgogICAgICAgIFByZUFydGV4VG9rZW4gcHJlQXJ0ZXggPSBQcmVBcnRleFRva2VuKG1pZ3JhdGlvbkhvc3QpOwoKICAgICAgICBzdGF0ZSA9IFN0YXRlZnVsLlN0YXRlLlByZVNhbGU7CgogICAgICAgIGV0aGVyUHJpY2VVU0RXRUkgPSBwcmVBcnRleC5ldGhlclByaWNlVVNEV0VJKCk7CiAgICAgICAgYmVuZWZpY2lhcnkgPSBwcmVBcnRleC5iZW5lZmljaWFyeSgpOwogICAgICAgIHRvdGFsTGltaXRVU0RXRUkgPSBwcmVBcnRleC50b3RhbExpbWl0VVNEV0VJKCk7CiAgICAgICAgbWluaW1hbFN1Y2Nlc3NVU0RXRUkgPSBwcmVBcnRleC5taW5pbWFsU3VjY2Vzc1VTRFdFSSgpOwogICAgICAgIGNvbGxlY3RlZFVTRFdFSSA9IHByZUFydGV4LmNvbGxlY3RlZFVTRFdFSSgpOwoKICAgICAgICBjcm93ZHNhbGVTdGFydFRpbWUgPSBwcmVBcnRleC5jcm93ZHNhbGVTdGFydFRpbWUoKTsKICAgICAgICBjcm93ZHNhbGVGaW5pc2hUaW1lID0gcHJlQXJ0ZXguY3Jvd2RzYWxlRmluaXNoVGltZSgpOwoKICAgICAgICBzdGF0ZU1pZ3JhdGVkID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBtaWdyYXRlSW52ZXN0b3JzRnJvbUhvc3QodWludCBiYXRjaFNpemUpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtaWdyYXRpb25Ib3N0ICE9IDApOwoKICAgICAgICBQcmVBcnRleFRva2VuIHByZUFydGV4ID0gUHJlQXJ0ZXhUb2tlbihtaWdyYXRpb25Ib3N0KTsKCiAgICAgICAgdWludCBudW1iZXJPZkludmVzdG9yc1RvTWlncmF0ZSA9IHByZUFydGV4Lm51bWJlck9mSW52ZXN0b3JzKCk7CiAgICAgICAgdWludCBjdXJyZW50TnVtYmVyT2ZJbnZlc3RvcnMgPSBudW1iZXJPZkludmVzdG9yczsKCiAgICAgICAgcmVxdWlyZShjdXJyZW50TnVtYmVyT2ZJbnZlc3RvcnMgPCBudW1iZXJPZkludmVzdG9yc1RvTWlncmF0ZSk7CgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGJhdGNoU2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIHVpbnQgaW5kZXggPSBjdXJyZW50TnVtYmVyT2ZJbnZlc3RvcnMgKyBpOwogICAgICAgICAgICBpZiAoaW5kZXggPCBudW1iZXJPZkludmVzdG9yc1RvTWlncmF0ZSkgewogICAgICAgICAgICAgICAgYWRkcmVzcyBpbnZlc3RvciA9IHByZUFydGV4LmludmVzdG9yc0l0ZXIoaW5kZXgpOwogICAgICAgICAgICAgICAgbWlncmF0ZUludmVzdG9yc0Zyb21Ib3N0SW50ZXJuYWwoaW52ZXN0b3IsIHByZUFydGV4KTsgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIG1pZ3JhdGVJbnZlc3RvckZyb21Ib3N0KGFkZHJlc3MgX2FkZHJlc3MpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtaWdyYXRpb25Ib3N0ICE9IDApOwoKICAgICAgICBQcmVBcnRleFRva2VuIHByZUFydGV4ID0gUHJlQXJ0ZXhUb2tlbihtaWdyYXRpb25Ib3N0KTsKCiAgICAgICAgbWlncmF0ZUludmVzdG9yc0Zyb21Ib3N0SW50ZXJuYWwoX2FkZHJlc3MsIHByZUFydGV4KTsKICAgIH0KCiAgICBmdW5jdGlvbiBtaWdyYXRlSW52ZXN0b3JzRnJvbUhvc3RJbnRlcm5hbChhZGRyZXNzIF9hZGRyZXNzLCBQcmVBcnRleFRva2VuIHByZUFydGV4KSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSAhPSBTdGF0ZS5TYWxlRmFpbGVkICYmIG1pZ3JhdGVkSW52ZXN0b3JzW19hZGRyZXNzXSA9PSBmYWxzZSk7CgogICAgICAgIHZhciAodG9rZW5zVG9UcmFuc2Zlciwgd2VpVG9UcmFuc2ZlcikgPSBwcmVBcnRleC5pbnZlc3RvcnMoX2FkZHJlc3MpOwoKICAgICAgICByZXF1aXJlKHRva2Vuc1RvVHJhbnNmZXIgPiAwKTsKCiAgICAgICAgYmFsYW5jZXNbX2FkZHJlc3NdID0gdG9rZW5zVG9UcmFuc2ZlcjsKICAgICAgICB0b3RhbFN1cHBseSArPSB0b2tlbnNUb1RyYW5zZmVyOwogICAgICAgIG1pZ3JhdGVkSW52ZXN0b3JzW19hZGRyZXNzXSA9IHRydWU7CgogICAgICAgIGlmIChzdGF0ZSAhPSBTdGF0ZS5Dcm93ZHNhbGVDb21wbGV0ZWQpIHsKICAgICAgICAgICAgSW52ZXN0b3Igc3RvcmFnZSBpbnZlc3RvciA9IGludmVzdG9yc1tfYWRkcmVzc107CiAgICAgICAgICAgIGludmVzdG9yc0l0ZXJbbnVtYmVyT2ZJbnZlc3RvcnNdID0gX2FkZHJlc3M7CiAgICAgICAgICAgIAogICAgICAgICAgICBudW1iZXJPZkludmVzdG9ycysrOwoKICAgICAgICAgICAgaW52ZXN0b3IuYW1vdW50VG9rZW5zICs9IHRva2Vuc1RvVHJhbnNmZXI7CiAgICAgICAgICAgIGludmVzdG9yLmFtb3VudFdlaSArPSB3ZWlUb1RyYW5zZmVyOwogICAgICAgIH0KCiAgICAgICAgVHJhbnNmZXIodGhpcywgX2FkZHJlc3MsIHRva2Vuc1RvVHJhbnNmZXIpOwogICAgfQoKICAgIC8vbWlncmF0aW9uIGJ5IGludmVzdG9yCiAgICBmdW5jdGlvbiBtaWdyYXRlKCkgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUobWlncmF0aW9uQWdlbnQgIT0gMCk7CiAgICAgICAgdWludCB2YWx1ZSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IHZhbHVlOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIHRoaXMsIHZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSAtPSB2YWx1ZTsKICAgICAgICB0b3RhbE1pZ3JhdGVkICs9IHZhbHVlOwogICAgICAgIE1pZ3JhdGlvbkFnZW50KG1pZ3JhdGlvbkFnZW50KS5taWdyYXRlRnJvbShtc2cuc2VuZGVyLCB2YWx1ZSk7CiAgICAgICAgTWlncmF0ZWQobXNnLnNlbmRlciwgbWlncmF0aW9uQWdlbnQsIHZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRNaWdyYXRpb25BZ2VudChhZGRyZXNzIF9hZ2VudCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1pZ3JhdGlvbkFnZW50ID09IDApOwogICAgICAgIG1pZ3JhdGlvbkFnZW50ID0gX2FnZW50OwogICAgfQp9Cgpjb250cmFjdCBBcnRleFRva2VuIGlzIE1pZ3JhdGFibGVUb2tlbiB7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiQVJYIjsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiQXJ0ZXggVG9rZW4iOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgYWxsb3dlZENvbnRyYWN0czsKCiAgICBmdW5jdGlvbiBBcnRleFRva2VuKCkgcGF5YWJsZSBNaWdyYXRhYmxlVG9rZW4oKSB7fQoKICAgIGZ1bmN0aW9uIGVtaXRUb2tlbnMoYWRkcmVzcyBfaW52ZXN0b3IsIHVpbnQgX3ZhbHVlVVNEV0VJKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQgdG9rZW5zVG9FbWl0KSB7CiAgICAgICAgdG9rZW5zVG9FbWl0ID0gZ2V0VG9rZW5zVG9FbWl0KF92YWx1ZVVTRFdFSSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfaW52ZXN0b3JdICsgdG9rZW5zVG9FbWl0ID4gYmFsYW5jZXNbX2ludmVzdG9yXSk7IC8vIG92ZXJmbG93CiAgICAgICAgcmVxdWlyZSh0b2tlbnNUb0VtaXQgPiAwKTsKICAgICAgICBiYWxhbmNlc1tfaW52ZXN0b3JdICs9IHRva2Vuc1RvRW1pdDsKICAgICAgICB0b3RhbFN1cHBseSArPSB0b2tlbnNUb0VtaXQ7CiAgICAgICAgVHJhbnNmZXIodGhpcywgX2ludmVzdG9yLCB0b2tlbnNUb0VtaXQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRva2Vuc1RvRW1pdCh1aW50IF92YWx1ZVVTRFdFSSkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgcGVyY2VudFdpdGhCb251czsKICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuUHJlU2FsZSkgewogICAgICAgICAgICBwZXJjZW50V2l0aEJvbnVzID0gMTMwOwogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gU3RhdGUuU2FsZSkgewogICAgICAgICAgICBpZiAoX3ZhbHVlVVNEV0VJIDwgMTAwMCAqIDEgZXRoZXIpCiAgICAgICAgICAgICAgICBwZXJjZW50V2l0aEJvbnVzID0gMTAwOwogICAgICAgICAgICBlbHNlIGlmIChfdmFsdWVVU0RXRUkgPCA1MDAwICogMSBldGhlcikKICAgICAgICAgICAgICAgIHBlcmNlbnRXaXRoQm9udXMgPSAxMDM7CiAgICAgICAgICAgIGVsc2UgaWYgKF92YWx1ZVVTRFdFSSA8IDEwMDAwICogMSBldGhlcikKICAgICAgICAgICAgICAgIHBlcmNlbnRXaXRoQm9udXMgPSAxMDU7CiAgICAgICAgICAgIGVsc2UgaWYgKF92YWx1ZVVTRFdFSSA8IDUwMDAwICogMSBldGhlcikKICAgICAgICAgICAgICAgIHBlcmNlbnRXaXRoQm9udXMgPSAxMTA7CiAgICAgICAgICAgIGVsc2UgaWYgKF92YWx1ZVVTRFdFSSA8IDEwMDAwMCAqIDEgZXRoZXIpCiAgICAgICAgICAgICAgICBwZXJjZW50V2l0aEJvbnVzID0gMTE1OwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBwZXJjZW50V2l0aEJvbnVzID0gMTIwOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIChfdmFsdWVVU0RXRUkgKiBwZXJjZW50V2l0aEJvbnVzICogKDEwICoqIHVpbnQoZGVjaW1hbHMpKSkgLyAodG9rZW5QcmljZVVTRFdFSSAqIDEwMCk7CiAgICB9CgogICAgZnVuY3Rpb24gZW1pdEFkZGl0aW9uYWxUb2tlbnMoKSBpbnRlcm5hbCB7CiAgICAgICAgdWludCB0b2tlbnNUb0VtaXQgPSB0b3RhbFN1cHBseSAqIDEwMCAvIDc0IC0gdG90YWxTdXBwbHk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tiZW5lZmljaWFyeV0gKyB0b2tlbnNUb0VtaXQgPiBiYWxhbmNlc1tiZW5lZmljaWFyeV0pOyAvLyBvdmVyZmxvdwogICAgICAgIHJlcXVpcmUodG9rZW5zVG9FbWl0ID4gMCk7CiAgICAgICAgYmFsYW5jZXNbYmVuZWZpY2lhcnldICs9IHRva2Vuc1RvRW1pdDsKICAgICAgICB0b3RhbFN1cHBseSArPSB0b2tlbnNUb0VtaXQ7CiAgICAgICAgVHJhbnNmZXIodGhpcywgYmVuZWZpY2lhcnksIHRva2Vuc1RvRW1pdCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnVyblRva2VucyhhZGRyZXNzIF9hZGRyZXNzLCB1aW50IF9hbW91bnQpIGludGVybmFsIHsKICAgICAgICBiYWxhbmNlc1tfYWRkcmVzc10gLT0gX2Ftb3VudDsKICAgICAgICB0b3RhbFN1cHBseSAtPSBfYW1vdW50OwogICAgICAgIFRyYW5zZmVyKF9hZGRyZXNzLCB0aGlzLCBfYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRBbGxvd2VkQ29udHJhY3QoYWRkcmVzcyBfYWRkcmVzcykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9hZGRyZXNzICE9IDApOwogICAgICAgIGFsbG93ZWRDb250cmFjdHNbX2FkZHJlc3NdID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVBbGxvd2VkQ29udHJhY3QoYWRkcmVzcyBfYWRkcmVzcykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9hZGRyZXNzICE9IDApOwogICAgICAgIGRlbGV0ZSBhbGxvd2VkQ29udHJhY3RzW19hZGRyZXNzXTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvS25vd25Db250cmFjdChhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzMzJbXSBfZGF0YSkgZXh0ZXJuYWwgb25seUFsbG93ZWRDb250cmFjdHMoX3RvKSB7CiAgICAgICAgdmFyIGtub3duQ29udHJhY3QgPSBLbm93bkNvbnRyYWN0KF90byk7CiAgICAgICAgdHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgICAgIGtub3duQ29udHJhY3QudHJhbnNmZXJlZChtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5QWxsb3dlZENvbnRyYWN0cyhhZGRyZXNzIF9hZGRyZXNzKSB7CiAgICAgICAgcmVxdWlyZShhbGxvd2VkQ29udHJhY3RzW19hZGRyZXNzXSA9PSB0cnVlKTsKICAgICAgICBfOwogICAgfQp9'.
	

]
