Class {
	#name : #SRTdbdb79ad0a2243c947cc413798e8b90caba0b9df,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdbdb79ad0a2243c947cc413798e8b90caba0b9df >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBEU01hdGggewogICAgZnVuY3Rpb24gYWRkKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHJlcXVpcmUoKHogPSB4ICsgeSkgPj0geCk7CiAgICB9CiAgICBmdW5jdGlvbiBzdWIodWludCB4LCB1aW50IHkpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCB6KSB7CiAgICAgICAgcmVxdWlyZSgoeiA9IHggLSB5KSA8PSB4KTsKICAgIH0KICAgIGZ1bmN0aW9uIG11bCh1aW50IHgsIHVpbnQgeSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IHopIHsKICAgICAgICByZXF1aXJlKHkgPT0gMCB8fCAoeiA9IHggKiB5KSAvIHkgPT0geCk7CiAgICB9CgogICAgZnVuY3Rpb24gbWluKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHJldHVybiB4IDw9IHkgPyB4IDogeTsKICAgIH0KICAgIGZ1bmN0aW9uIG1heCh1aW50IHgsIHVpbnQgeSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IHopIHsKICAgICAgICByZXR1cm4geCA+PSB5ID8geCA6IHk7CiAgICB9CiAgICBmdW5jdGlvbiBpbWluKGludCB4LCBpbnQgeSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zIChpbnQgeikgewogICAgICAgIHJldHVybiB4IDw9IHkgPyB4IDogeTsKICAgIH0KICAgIGZ1bmN0aW9uIGltYXgoaW50IHgsIGludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKGludCB6KSB7CiAgICAgICAgcmV0dXJuIHggPj0geSA/IHggOiB5OwogICAgfQoKICAgIHVpbnQgY29uc3RhbnQgV0FEID0gMTAgKiogMTg7CiAgICB1aW50IGNvbnN0YW50IFJBWSA9IDEwICoqIDI3OwoKICAgIGZ1bmN0aW9uIHdtdWwodWludCB4LCB1aW50IHkpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCB6KSB7CiAgICAgICAgeiA9IGFkZChtdWwoeCwgeSksIFdBRCAvIDIpIC8gV0FEOwogICAgfQogICAgZnVuY3Rpb24gcm11bCh1aW50IHgsIHVpbnQgeSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IHopIHsKICAgICAgICB6ID0gYWRkKG11bCh4LCB5KSwgUkFZIC8gMikgLyBSQVk7CiAgICB9CiAgICBmdW5jdGlvbiB3ZGl2KHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHogPSBhZGQobXVsKHgsIFdBRCksIHkgLyAyKSAvIHk7CiAgICB9CiAgICBmdW5jdGlvbiByZGl2KHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHogPSBhZGQobXVsKHgsIFJBWSksIHkgLyAyKSAvIHk7CiAgICB9CgogICAgLy8gVGhpcyBmYW1vdXMgYWxnb3JpdGhtIGlzIGNhbGxlZCAiZXhwb25lbnRpYXRpb24gYnkgc3F1YXJpbmciCiAgICAvLyBhbmQgY2FsY3VsYXRlcyB4Xm4gd2l0aCB4IGFzIGZpeGVkLXBvaW50IGFuZCBuIGFzIHJlZ3VsYXIgdW5zaWduZWQuCiAgICAvLwogICAgLy8gSXQncyBPKGxvZyBuKSwgaW5zdGVhZCBvZiBPKG4pIGZvciBuYWl2ZSByZXBlYXRlZCBtdWx0aXBsaWNhdGlvbi4KICAgIC8vCiAgICAvLyBUaGVzZSBmYWN0cyBhcmUgd2h5IGl0IHdvcmtzOgogICAgLy8KICAgIC8vICBJZiBuIGlzIGV2ZW4sIHRoZW4geF5uID0gKHheMileKG4vMikuCiAgICAvLyAgSWYgbiBpcyBvZGQsICB0aGVuIHhebiA9IHggKiB4XihuLTEpLAogICAgLy8gICBhbmQgYXBwbHlpbmcgdGhlIGVxdWF0aW9uIGZvciBldmVuIHggZ2l2ZXMKICAgIC8vICAgIHhebiA9IHggKiAoeF4yKV4oKG4tMSkgLyAyKS4KICAgIC8vCiAgICAvLyAgQWxzbywgRVZNIGRpdmlzaW9uIGlzIGZsb29yaW5nIGFuZAogICAgLy8gICAgZmxvb3JbKG4tMSkgLyAyXSA9IGZsb29yW24gLyAyXS4KICAgIC8vCiAgICBmdW5jdGlvbiBycG93KHVpbnQgeCwgdWludCBuKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQgeikgewogICAgICAgIHogPSBuICUgMiAhPSAwID8geCA6IFJBWTsKCiAgICAgICAgZm9yIChuIC89IDI7IG4gIT0gMDsgbiAvPSAyKSB7CiAgICAgICAgICAgIHggPSBybXVsKHgsIHgpOwoKICAgICAgICAgICAgaWYgKG4gJSAyICE9IDApIHsKICAgICAgICAgICAgICAgIHogPSBybXVsKHosIHgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cgpjb250cmFjdCBEU0F1dGhvcml0eSB7CiAgICBmdW5jdGlvbiBjYW5DYWxsKAogICAgICAgIGFkZHJlc3Mgc3JjLCBhZGRyZXNzIGRzdCwgYnl0ZXM0IHNpZwogICAgKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKTsKfQoKY29udHJhY3QgRFNBdXRoRXZlbnRzIHsKICAgIGV2ZW50IExvZ1NldEF1dGhvcml0eSAoYWRkcmVzcyBpbmRleGVkIGF1dGhvcml0eSk7CiAgICBldmVudCBMb2dTZXRPd25lciAgICAgKGFkZHJlc3MgaW5kZXhlZCBvd25lcik7Cn0KCmNvbnRyYWN0IERTQXV0aCBpcyBEU0F1dGhFdmVudHMgewogICAgRFNBdXRob3JpdHkgIHB1YmxpYyAgYXV0aG9yaXR5OwogICAgYWRkcmVzcyAgICAgIHB1YmxpYyAgb3duZXI7CgogICAgZnVuY3Rpb24gRFNBdXRoKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgTG9nU2V0T3duZXIobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0T3duZXIoYWRkcmVzcyBvd25lcl8pCiAgICAgICAgcHVibGljCiAgICAgICAgYXV0aAogICAgewogICAgICAgIG93bmVyID0gb3duZXJfOwogICAgICAgIExvZ1NldE93bmVyKG93bmVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRBdXRob3JpdHkoRFNBdXRob3JpdHkgYXV0aG9yaXR5XykKICAgICAgICBwdWJsaWMKICAgICAgICBhdXRoCiAgICB7CiAgICAgICAgYXV0aG9yaXR5ID0gYXV0aG9yaXR5XzsKICAgICAgICBMb2dTZXRBdXRob3JpdHkoYXV0aG9yaXR5KTsKICAgIH0KCiAgICBtb2RpZmllciBhdXRoIHsKICAgICAgICByZXF1aXJlKGlzQXV0aG9yaXplZChtc2cuc2VuZGVyLCBtc2cuc2lnKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0F1dGhvcml6ZWQoYWRkcmVzcyBzcmMsIGJ5dGVzNCBzaWcpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChzcmMgPT0gYWRkcmVzcyh0aGlzKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKHNyYyA9PSBvd25lcikgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGF1dGhvcml0eSA9PSBEU0F1dGhvcml0eSgwKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGF1dGhvcml0eS5jYW5DYWxsKHNyYywgdGhpcywgc2lnKTsKICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IERTTm90ZSB7CiAgICBldmVudCBMb2dOb3RlKAogICAgICAgIGJ5dGVzNCAgIGluZGV4ZWQgIHNpZywKICAgICAgICBhZGRyZXNzICBpbmRleGVkICBndXksCiAgICAgICAgYnl0ZXMzMiAgaW5kZXhlZCAgZm9vLAogICAgICAgIGJ5dGVzMzIgIGluZGV4ZWQgIGJhciwKICAgICAgICB1aW50ICAgICAgICAgICAgICB3YWQsCiAgICAgICAgYnl0ZXMgICAgICAgICAgICAgZmF4CiAgICApIGFub255bW91czsKCiAgICBtb2RpZmllciBub3RlIHsKICAgICAgICBieXRlczMyIGZvbzsKICAgICAgICBieXRlczMyIGJhcjsKCiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBmb28gOj0gY2FsbGRhdGFsb2FkKDQpCiAgICAgICAgICAgIGJhciA6PSBjYWxsZGF0YWxvYWQoMzYpCiAgICAgICAgfQoKICAgICAgICBMb2dOb3RlKG1zZy5zaWcsIG1zZy5zZW5kZXIsIGZvbywgYmFyLCBtc2cudmFsdWUsIG1zZy5kYXRhKTsKCiAgICAgICAgXzsKICAgIH0KfQoKY29udHJhY3QgRFNTdG9wIGlzIERTTm90ZSwgRFNBdXRoIHsKCiAgICBib29sIHB1YmxpYyBzdG9wcGVkOwoKICAgIG1vZGlmaWVyIHN0b3BwYWJsZSB7CiAgICAgICAgcmVxdWlyZSghc3RvcHBlZCk7CiAgICAgICAgXzsKICAgIH0KICAgIGZ1bmN0aW9uIHN0b3AoKSBwdWJsaWMgYXV0aCBub3RlIHsKICAgICAgICBzdG9wcGVkID0gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIHN0YXJ0KCkgcHVibGljIGF1dGggbm90ZSB7CiAgICAgICAgc3RvcHBlZCA9IGZhbHNlOwogICAgfQoKfQoKY29udHJhY3QgRVJDMjAgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50IHN1cHBseSk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoIGFkZHJlc3Mgd2hvICkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCB2YWx1ZSk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoIGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlciApIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQgX2FsbG93YW5jZSk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIG9rKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSggYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUgKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CgogICAgZXZlbnQgVHJhbnNmZXIoIGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoIGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9Cgpjb250cmFjdCBEU1Rva2VuQmFzZSBpcyBFUkMyMCwgRFNNYXRoIHsKICAgIHVpbnQyNTYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdXBwbHk7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpICAgICAgICAgICAgICAgICAgICAgICBfYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpICBfYXBwcm92YWxzOwoKICAgIGZ1bmN0aW9uIERTVG9rZW5CYXNlKHVpbnQgc3VwcGx5KSBwdWJsaWMgewogICAgICAgIF9iYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHN1cHBseTsKICAgICAgICBfc3VwcGx5ID0gc3VwcGx5OwogICAgfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBfc3VwcGx5OwogICAgfQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgc3JjKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIF9iYWxhbmNlc1tzcmNdOwogICAgfQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgc3JjLCBhZGRyZXNzIGd1eSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBfYXBwcm92YWxzW3NyY11bZ3V5XTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIGRzdCwgdWludCB3YWQpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBkc3QsIHdhZCk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3Mgc3JjLCBhZGRyZXNzIGRzdCwgdWludCB3YWQpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBpZiAoc3JjICE9IG1zZy5zZW5kZXIpIHsKICAgICAgICAgICAgX2FwcHJvdmFsc1tzcmNdW21zZy5zZW5kZXJdID0gc3ViKF9hcHByb3ZhbHNbc3JjXVttc2cuc2VuZGVyXSwgd2FkKTsKICAgICAgICB9CgogICAgICAgIF9iYWxhbmNlc1tzcmNdID0gc3ViKF9iYWxhbmNlc1tzcmNdLCB3YWQpOwogICAgICAgIF9iYWxhbmNlc1tkc3RdID0gYWRkKF9iYWxhbmNlc1tkc3RdLCB3YWQpOwoKICAgICAgICBUcmFuc2ZlcihzcmMsIGRzdCwgd2FkKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIGd1eSwgdWludCB3YWQpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgX2FwcHJvdmFsc1ttc2cuc2VuZGVyXVtndXldID0gd2FkOwoKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBndXksIHdhZCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9Cgpjb250cmFjdCBEU1Rva2VuIGlzIERTVG9rZW5CYXNlKDApLCBEU1N0b3AgewoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSkgX3RydXN0ZWQ7CgogICAgYnl0ZXMzMiAgcHVibGljICBzeW1ib2w7CiAgICB1aW50MjU2ICBwdWJsaWMgIGRlY2ltYWxzID0gMTg7IC8vIHN0YW5kYXJkIHRva2VuIHByZWNpc2lvbi4gb3ZlcnJpZGUgdG8gY3VzdG9taXplCgogICAgZnVuY3Rpb24gRFNUb2tlbihieXRlczMyIHN5bWJvbF8pIHB1YmxpYyB7CiAgICAgICAgc3ltYm9sID0gc3ltYm9sXzsKICAgIH0KCiAgICBldmVudCBUcnVzdChhZGRyZXNzIGluZGV4ZWQgc3JjLCBhZGRyZXNzIGluZGV4ZWQgZ3V5LCBib29sIHdhdCk7CiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCBndXksIHVpbnQgd2FkKTsKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGd1eSwgdWludCB3YWQpOwoKICAgIGZ1bmN0aW9uIHRydXN0ZWQoYWRkcmVzcyBzcmMsIGFkZHJlc3MgZ3V5KSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIF90cnVzdGVkW3NyY11bZ3V5XTsKICAgIH0KICAgIGZ1bmN0aW9uIHRydXN0KGFkZHJlc3MgZ3V5LCBib29sIHdhdCkgcHVibGljIHN0b3BwYWJsZSB7CiAgICAgICAgX3RydXN0ZWRbbXNnLnNlbmRlcl1bZ3V5XSA9IHdhdDsKICAgICAgICBUcnVzdChtc2cuc2VuZGVyLCBndXksIHdhdCk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIGd1eSwgdWludCB3YWQpIHB1YmxpYyBzdG9wcGFibGUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdXBlci5hcHByb3ZlKGd1eSwgd2FkKTsKICAgIH0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIHNyYywgYWRkcmVzcyBkc3QsIHVpbnQgd2FkKQogICAgICAgIHB1YmxpYwogICAgICAgIHN0b3BwYWJsZQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgaWYgKHNyYyAhPSBtc2cuc2VuZGVyICYmICFfdHJ1c3RlZFtzcmNdW21zZy5zZW5kZXJdKSB7CiAgICAgICAgICAgIF9hcHByb3ZhbHNbc3JjXVttc2cuc2VuZGVyXSA9IHN1YihfYXBwcm92YWxzW3NyY11bbXNnLnNlbmRlcl0sIHdhZCk7CiAgICAgICAgfQoKICAgICAgICBfYmFsYW5jZXNbc3JjXSA9IHN1YihfYmFsYW5jZXNbc3JjXSwgd2FkKTsKICAgICAgICBfYmFsYW5jZXNbZHN0XSA9IGFkZChfYmFsYW5jZXNbZHN0XSwgd2FkKTsKCiAgICAgICAgVHJhbnNmZXIoc3JjLCBkc3QsIHdhZCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHB1c2goYWRkcmVzcyBkc3QsIHVpbnQgd2FkKSBwdWJsaWMgewogICAgICAgIHRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBkc3QsIHdhZCk7CiAgICB9CiAgICBmdW5jdGlvbiBwdWxsKGFkZHJlc3Mgc3JjLCB1aW50IHdhZCkgcHVibGljIHsKICAgICAgICB0cmFuc2ZlckZyb20oc3JjLCBtc2cuc2VuZGVyLCB3YWQpOwogICAgfQogICAgZnVuY3Rpb24gbW92ZShhZGRyZXNzIHNyYywgYWRkcmVzcyBkc3QsIHVpbnQgd2FkKSBwdWJsaWMgewogICAgICAgIHRyYW5zZmVyRnJvbShzcmMsIGRzdCwgd2FkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50KHVpbnQgd2FkKSBwdWJsaWMgewogICAgICAgIG1pbnQobXNnLnNlbmRlciwgd2FkKTsKICAgIH0KICAgIGZ1bmN0aW9uIGJ1cm4odWludCB3YWQpIHB1YmxpYyB7CiAgICAgICAgYnVybihtc2cuc2VuZGVyLCB3YWQpOwogICAgfQogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIGd1eSwgdWludCB3YWQpIHB1YmxpYyBhdXRoIHN0b3BwYWJsZSB7CiAgICAgICAgX2JhbGFuY2VzW2d1eV0gPSBhZGQoX2JhbGFuY2VzW2d1eV0sIHdhZCk7CiAgICAgICAgX3N1cHBseSA9IGFkZChfc3VwcGx5LCB3YWQpOwogICAgICAgIE1pbnQoZ3V5LCB3YWQpOwogICAgfQogICAgZnVuY3Rpb24gYnVybihhZGRyZXNzIGd1eSwgdWludCB3YWQpIHB1YmxpYyBhdXRoIHN0b3BwYWJsZSB7CiAgICAgICAgaWYgKGd1eSAhPSBtc2cuc2VuZGVyICYmICFfdHJ1c3RlZFtndXldW21zZy5zZW5kZXJdKSB7CiAgICAgICAgICAgIF9hcHByb3ZhbHNbZ3V5XVttc2cuc2VuZGVyXSA9IHN1YihfYXBwcm92YWxzW2d1eV1bbXNnLnNlbmRlcl0sIHdhZCk7CiAgICAgICAgfQoKICAgICAgICBfYmFsYW5jZXNbZ3V5XSA9IHN1YihfYmFsYW5jZXNbZ3V5XSwgd2FkKTsKICAgICAgICBfc3VwcGx5ID0gc3ViKF9zdXBwbHksIHdhZCk7CiAgICAgICAgQnVybihndXksIHdhZCk7CiAgICB9CgogICAgLy8gT3B0aW9uYWwgdG9rZW4gbmFtZQogICAgYnl0ZXMzMiAgIHB1YmxpYyAgbmFtZSA9ICIiOwoKICAgIGZ1bmN0aW9uIHNldE5hbWUoYnl0ZXMzMiBuYW1lXykgcHVibGljIGF1dGggewogICAgICAgIG5hbWUgPSBuYW1lXzsKICAgIH0KfQoKY29udHJhY3QgVmlld2x5U2VlZFNhbGUgaXMgRFNBdXRoLCBEU01hdGggewoKICAgIHVpbnQgY29uc3RhbnQgcHVibGljIE1BWF9GVU5ESU5HID0gICAgICAgIDQwMDAgZXRoZXI7ICAvLyBtYXggZnVuZGluZyBoYXJkLWNhcAogICAgdWludCBjb25zdGFudCBwdWJsaWMgTUlOX0ZVTkRJTkcgPSAgICAgICAgMTAwMCBldGhlcjsgIC8vIG1pbiBmdW5kaW5nIHJlcXVpcmVtZW50CiAgICB1aW50IGNvbnN0YW50IHB1YmxpYyBNQVhfVE9LRU5TID0gMTAgKiAxMDAwMDAwIGV0aGVyOyAgLy8gdG9rZW4gaGFyZC1jYXAKICAgIHVpbnQgY29uc3RhbnQgcHVibGljIEJPTlVTID0gICAgICAgICAgICAgIDAuMTUgZXRoZXI7ICAvLyBib251cyBvZiB0b2tlbnMgZWFybHkgYnV5ZXJzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IG92ZXIgbGFzdCBidXllcnMKCiAgICBEU1Rva2VuIHB1YmxpYyB2aWV3VG9rZW47ICAgICAgICAgLy8gVklFVyB0b2tlbiBjb250cmFjdAogICAgYWRkcmVzcyBwdWJsaWMgYmVuZWZpY2lhcnk7ICAgICAgIC8vIGRlc3RpbmF0aW9uIHRvIGNvbGxlY3QgZXRoIGRlcG9zaXRzCiAgICB1aW50IHB1YmxpYyBzdGFydEJsb2NrOyAgICAgICAgICAgLy8gc3RhcnQgYmxvY2sgb2Ygc2FsZQogICAgdWludCBwdWJsaWMgZW5kQmxvY2s7ICAgICAgICAgICAgIC8vIGVuZCBibG9jayBvZiBzYWxlCgogICAgdWludCBwdWJsaWMgdG90YWxFdGhEZXBvc2l0ZWQ7ICAgIC8vIHN1bXMgb2YgZXRoZXIgcmFpc2VkCiAgICB1aW50IHB1YmxpYyB0b3RhbFRva2Vuc0JvdWdodDsgICAgLy8gdG90YWwgdG9rZW5zIGlzc3VlZCBvbiBzYWxlCiAgICB1aW50IHB1YmxpYyB0b3RhbEV0aENvbGxlY3RlZDsgICAgLy8gdG90YWwgZXRoIGNvbGxlY3RlZCBmcm9tIHNhbGUKICAgIHVpbnQgcHVibGljIHRvdGFsRXRoUmVmdW5kZWQ7ICAgICAvLyB0b3RhbCBldGggcmVmdW5kZWQgYWZ0ZXIgYSBmYWlsZWQgc2FsZQoKICAgIC8vIGJ1eWVycyBldGhlciBkZXBvc2l0cwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgZXRoRGVwb3NpdHM7CiAgICAvLyBldGhlciByZWZ1bmRzIGFmdGVyIGEgZmFpbGVkIHNhbGUKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGV0aFJlZnVuZHM7CgogICAgZW51bSBTdGF0ZSB7CiAgICAgICAgUGVuZGluZywKICAgICAgICBSdW5uaW5nLAogICAgICAgIFN1Y2NlZWRlZCwKICAgICAgICBGYWlsZWQKICAgIH0KICAgIFN0YXRlIHB1YmxpYyBzdGF0ZSA9IFN0YXRlLlBlbmRpbmc7CgogICAgZXZlbnQgTG9nQnV5KAogICAgICAgIGFkZHJlc3MgYnV5ZXIsCiAgICAgICAgdWludCBldGhEZXBvc2l0LAogICAgICAgIHVpbnQgdG9rZW5zQm91Z2h0CiAgICApOwoKICAgIGV2ZW50IExvZ1JlZnVuZCgKICAgICAgICBhZGRyZXNzIGJ1eWVyLAogICAgICAgIHVpbnQgZXRoUmVmdW5kCiAgICApOwoKICAgIGV2ZW50IExvZ1N0YXJ0U2FsZSgKICAgICAgICB1aW50IHN0YXJ0QmxvY2ssCiAgICAgICAgdWludCBlbmRCbG9jawogICAgKTsKCiAgICBldmVudCBMb2dFbmRTYWxlKAogICAgICAgIGJvb2wgc3VjY2VzcywKICAgICAgICB1aW50IHRvdGFsRXRoRGVwb3NpdGVkLAogICAgICAgIHVpbnQgdG90YWxUb2tlbnNCb3VnaHQKICAgICk7CgogICAgZXZlbnQgTG9nRXh0ZW5kU2FsZSgKICAgICAgICB1aW50IGJsb2NrcwogICAgKTsKCiAgICBldmVudCBMb2dDb2xsZWN0RXRoKAogICAgICAgIHVpbnQgZXRoQ29sbGVjdGVkLAogICAgICAgIHVpbnQgdG90YWxFdGhEZXBvc2l0ZWQKICAgICk7CgogICAgLy8gcmVxdWlyZSBnaXZlbiBzdGF0ZSBvZiBzYWxlCiAgICBtb2RpZmllciBzYWxlSW4oU3RhdGUgc3RhdGVfKSB7IHJlcXVpcmUoc3RhdGVfID09IHN0YXRlKTsgXzsgfQoKICAgIC8vIGNoZWNrIGN1cnJlbnQgYmxvY2sgaXMgaW5zaWRlIGNsb3NlZCBpbnRlcnZhbCBbc3RhcnRCbG9jaywgZW5kQmxvY2tdCiAgICBtb2RpZmllciBpblJ1bm5pbmdCbG9jaygpIHsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+PSBzdGFydEJsb2NrKTsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA8IGVuZEJsb2NrKTsKICAgICAgICBfOwogICAgfQogICAgLy8gY2hlY2sgc2VuZGVyIGhhcyBzZW50IHNvbWUgZXRoZXJzCiAgICBtb2RpZmllciBldGhTZW50KCkgeyByZXF1aXJlKG1zZy52YWx1ZSA+IDApOyBfOyB9CgoKICAgIC8vIFBVQkxJQyAvLwoKICAgIGZ1bmN0aW9uIFZpZXdseVNlZWRTYWxlKERTVG9rZW4gdmlld1Rva2VuXywgYWRkcmVzcyBiZW5lZmljaWFyeV8pIHsKICAgICAgICB2aWV3VG9rZW4gPSB2aWV3VG9rZW5fOwogICAgICAgIGJlbmVmaWNpYXJ5ID0gYmVuZWZpY2lhcnlfOwogICAgfQoKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICAgICAgYnV5VG9rZW5zKCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKCkgc2FsZUluKFN0YXRlLlJ1bm5pbmcpIGluUnVubmluZ0Jsb2NrIGV0aFNlbnQgcGF5YWJsZSB7CiAgICAgICAgdWludCB0b2tlbnNCb3VnaHQgPSBjYWxjVG9rZW5zRm9yUHVyY2hhc2UobXNnLnZhbHVlLCB0b3RhbEV0aERlcG9zaXRlZCk7CiAgICAgICAgZXRoRGVwb3NpdHNbbXNnLnNlbmRlcl0gPSBhZGQobXNnLnZhbHVlLCBldGhEZXBvc2l0c1ttc2cuc2VuZGVyXSk7CiAgICAgICAgdG90YWxFdGhEZXBvc2l0ZWQgPSBhZGQobXNnLnZhbHVlLCB0b3RhbEV0aERlcG9zaXRlZCk7CiAgICAgICAgdG90YWxUb2tlbnNCb3VnaHQgPSBhZGQodG9rZW5zQm91Z2h0LCB0b3RhbFRva2Vuc0JvdWdodCk7CgogICAgICAgIHJlcXVpcmUodG90YWxFdGhEZXBvc2l0ZWQgPD0gTUFYX0ZVTkRJTkcpOwogICAgICAgIHJlcXVpcmUodG90YWxUb2tlbnNCb3VnaHQgPD0gTUFYX1RPS0VOUyk7CgogICAgICAgIHZpZXdUb2tlbi5taW50KG1zZy5zZW5kZXIsIHRva2Vuc0JvdWdodCk7CgogICAgICAgIExvZ0J1eShtc2cuc2VuZGVyLCBtc2cudmFsdWUsIHRva2Vuc0JvdWdodCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2xhaW1SZWZ1bmQoKSBzYWxlSW4oU3RhdGUuRmFpbGVkKSB7CiAgICAgIHJlcXVpcmUoZXRoRGVwb3NpdHNbbXNnLnNlbmRlcl0gPiAwKTsKICAgICAgcmVxdWlyZShldGhSZWZ1bmRzW21zZy5zZW5kZXJdID09IDApOwoKICAgICAgdWludCBldGhSZWZ1bmQgPSBldGhEZXBvc2l0c1ttc2cuc2VuZGVyXTsKICAgICAgZXRoUmVmdW5kc1ttc2cuc2VuZGVyXSA9IGV0aFJlZnVuZDsKICAgICAgdG90YWxFdGhSZWZ1bmRlZCA9IGFkZChldGhSZWZ1bmQsIHRvdGFsRXRoUmVmdW5kZWQpOwogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV0aFJlZnVuZCk7CgogICAgICBMb2dSZWZ1bmQobXNnLnNlbmRlciwgZXRoUmVmdW5kKTsKICAgIH0KCgogICAgLy8gQVVUSCBSRVFVSVJFRCAvLwoKICAgIGZ1bmN0aW9uIHN0YXJ0U2FsZSh1aW50IGR1cmF0aW9uLCB1aW50IGJsb2NrT2Zmc2V0KSBhdXRoIHNhbGVJbihTdGF0ZS5QZW5kaW5nKSB7CiAgICAgICAgcmVxdWlyZShkdXJhdGlvbiA+IDApOwogICAgICAgIHJlcXVpcmUoYmxvY2tPZmZzZXQgPj0gMCk7CgogICAgICAgIHN0YXJ0QmxvY2sgPSBhZGQoYmxvY2subnVtYmVyLCBibG9ja09mZnNldCk7CiAgICAgICAgZW5kQmxvY2sgICA9IGFkZChzdGFydEJsb2NrLCBkdXJhdGlvbik7CiAgICAgICAgc3RhdGUgICAgICA9IFN0YXRlLlJ1bm5pbmc7CgogICAgICAgIExvZ1N0YXJ0U2FsZShzdGFydEJsb2NrLCBlbmRCbG9jayk7CiAgICB9CgogICAgZnVuY3Rpb24gZW5kU2FsZSgpIGF1dGggc2FsZUluKFN0YXRlLlJ1bm5pbmcpIHsKICAgICAgICBpZiAodG90YWxFdGhEZXBvc2l0ZWQgPj0gTUlOX0ZVTkRJTkcpCiAgICAgICAgICBzdGF0ZSA9IFN0YXRlLlN1Y2NlZWRlZDsKICAgICAgICBlbHNlCiAgICAgICAgICBzdGF0ZSA9IFN0YXRlLkZhaWxlZDsKCiAgICAgICAgdmlld1Rva2VuLnN0b3AoKTsKICAgICAgICBMb2dFbmRTYWxlKHN0YXRlID09IFN0YXRlLlN1Y2NlZWRlZCwgdG90YWxFdGhEZXBvc2l0ZWQsIHRvdGFsVG9rZW5zQm91Z2h0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBleHRlbmRTYWxlKHVpbnQgYmxvY2tzKSBhdXRoIHNhbGVJbihTdGF0ZS5SdW5uaW5nKSB7CiAgICAgICAgcmVxdWlyZShibG9ja3MgPiAwKTsKCiAgICAgICAgZW5kQmxvY2sgPSBhZGQoZW5kQmxvY2ssIGJsb2Nrcyk7CiAgICAgICAgTG9nRXh0ZW5kU2FsZShibG9ja3MpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbGxlY3RFdGgoKSBhdXRoIHsKICAgICAgICByZXF1aXJlKHRvdGFsRXRoRGVwb3NpdGVkID49IE1JTl9GVU5ESU5HKTsKICAgICAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSA+IDApOwoKICAgICAgICB1aW50IGV0aFRvQ29sbGVjdCA9IHRoaXMuYmFsYW5jZTsKICAgICAgICB0b3RhbEV0aENvbGxlY3RlZCA9IGFkZCh0b3RhbEV0aENvbGxlY3RlZCwgZXRoVG9Db2xsZWN0KTsKICAgICAgICBiZW5lZmljaWFyeS50cmFuc2ZlcihldGhUb0NvbGxlY3QpOwogICAgICAgIExvZ0NvbGxlY3RFdGgoZXRoVG9Db2xsZWN0LCB0b3RhbEV0aERlcG9zaXRlZCk7CiAgICB9CgoKICAgIC8vIFBSSVZBVEUgLy8KCiAgICB1aW50IGNvbnN0YW50IGF2ZXJhZ2VUb2tlbnNQZXJFdGggPSB3ZGl2KE1BWF9UT0tFTlMsIE1BWF9GVU5ESU5HKTsKICAgIHVpbnQgY29uc3RhbnQgZW5kaW5nVG9rZW5zUGVyRXRoID0gd2RpdigyICogYXZlcmFnZVRva2Vuc1BlckV0aCwgMiBldGhlciArIEJPTlVTKTsKCiAgICAvLyBjYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucyBidXllciBnZXQgd2hlbiBzZW5kaW5nICdldGhTZW50JyBldGhlcnMKICAgIC8vIGFmdGVyICdldGhEZXBvc3RpZWRTb0ZhcmAgYWxyZWFkeSByZWVpdmVkIGluIHRoZSBzYWxlCiAgICBmdW5jdGlvbiBjYWxjVG9rZW5zRm9yUHVyY2hhc2UodWludCBldGhTZW50LCB1aW50IGV0aERlcG9zaXRlZFNvRmFyKQogICAgICAgIHByaXZhdGUgdmlldwogICAgICAgIHJldHVybnMgKHVpbnQgdG9rZW5zKQogICAgewogICAgICAgIHVpbnQgdG9rZW5zUGVyRXRoQXRTdGFydCA9IGNhbGNUb2tlbnNQZXJFdGgoZXRoRGVwb3NpdGVkU29GYXIpOwogICAgICAgIHVpbnQgdG9rZW5zUGVyRXRoQXRFbmQgPSBjYWxjVG9rZW5zUGVyRXRoKGFkZChldGhEZXBvc2l0ZWRTb0ZhciwgZXRoU2VudCkpOwogICAgICAgIHVpbnQgYXZlcmFnZVRva2Vuc1BlckV0aCA9IGFkZCh0b2tlbnNQZXJFdGhBdFN0YXJ0LCB0b2tlbnNQZXJFdGhBdEVuZCkgLyAyOwoKICAgICAgICAvLyA9IGV0aFNlbnQgKiBhdmVyYWdlVG9rZW5zUGVyRXRoSW5UaGlzUHVyY2hhc2UKICAgICAgICByZXR1cm4gd211bChldGhTZW50LCBhdmVyYWdlVG9rZW5zUGVyRXRoKTsKICAgIH0KCiAgICAvLyByZXR1cm4gdG9rZW5zUGVyRXRoIGZvciAnbnRoRXRoZXInIG9mIHRvdGFsIGNvbnRyaWJ1dGlvbiAoTUFYX0ZVTkRJTkcpCiAgICBmdW5jdGlvbiBjYWxjVG9rZW5zUGVyRXRoKHVpbnQgbnRoRXRoZXIpCiAgICAgICAgcHJpdmF0ZSB2aWV3CiAgICAgICAgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICB1aW50IHNoYXJlT2ZTYWxlID0gd2RpdihudGhFdGhlciwgTUFYX0ZVTkRJTkcpOwogICAgICAgIHVpbnQgc2hhcmVPZkJvbnVzID0gc3ViKDEgZXRoZXIsIHNoYXJlT2ZTYWxlKTsKICAgICAgICB1aW50IGFjdHVhbEJvbnVzID0gd211bChzaGFyZU9mQm9udXMsIEJPTlVTKTsKCiAgICAgICAgLy8gPSBlbmRpbmdUb2tlbnNQZXJFdGggKiAoMSArIHNoYXJlT2ZCb251cyAqIEJPTlVTKQogICAgICAgIHJldHVybiB3bXVsKGVuZGluZ1Rva2Vuc1BlckV0aCwgYWRkKDEgZXRoZXIsIGFjdHVhbEJvbnVzKSk7CiAgICB9Cn0='.
	

]
