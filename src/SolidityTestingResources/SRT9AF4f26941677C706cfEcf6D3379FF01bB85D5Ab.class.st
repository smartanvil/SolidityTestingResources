Class {
	#name : #SRT9AF4f26941677C706cfEcf6D3379FF01bB85D5Ab,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9AF4f26941677C706cfEcf6D3379FF01bB85D5Ab >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtaW5pbXVtKCB1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAoIHVpbnQgcmVzdWx0KSB7CiAgICBpZiAoIGEgPD0gYiApIHsKICAgICAgcmVzdWx0ID0gYTsKICAgIH0KICAgIGVsc2UgewogICAgICByZXN1bHQgPSBiOwogICAgfQogIH0KCn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwoKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9Cgpjb250cmFjdCBEUlRDb2luIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogICAgLyogT3ZlcnJpZGluZyBzb21lIEVSQzIwIHZhcmlhYmxlcyAqLwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkRvbVJhaWRlclRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkRSVCI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDg7CgogICAgLyogRFJUIHNwZWNpZmljIHZhcmlhYmxlcyAqLwogICAgLy8gTWF4IGFtb3VudCBvZiB0b2tlbnMgbWludGVkIC0gRXhhY3QgdmFsdWUgaW5wdXQgd2l0aCBzdHJldGNoIGdvYWxzIGFuZCBiZWZvcmUgZGVwbG95aW5nIGNvbnRyYWN0CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBNQVhfU1VQUExZX09GX1RPS0VOID0gMTMwMDAwMDAwMCAqIDEwICoqIGRlY2ltYWxzOwoKICAgIC8vIEZyZWV6ZSBkdXJhdGlvbiBmb3IgYWR2aXNvcnMgYWNjb3VudHMKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFNUQVJUX0lDT19USU1FU1RBTVAgPSAxNTA3NjIyNDAwOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgREVGUk9TVF9QRVJJT0QgPSA0MzIwMDsgLy8gbW9udGggaW4gbWludXRlcyAgKDEgbW9udGggPSA0MzIwMCBtaW4pCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBERUZST1NUX01PTlRITFlfUEVSQ0VOVF9PV05FUiA9IDU7IC8vIDUlIHBlciBtb250aCBpcyBhdXRvbWF0aWNhbGx5IGRlZnJvc3RlZAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgREVGUk9TVF9JTklUSUFMX1BFUkNFTlRfT1dORVIgPSAxMDsgLy8gOTAlIGxvY2tlZAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgREVGUk9TVF9NT05USExZX1BFUkNFTlQgPSAxMDsgLy8gMTAlIHBlciBtb250aCBpcyBhdXRvbWF0aWNhbGx5IGRlZnJvc3RlZAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgREVGUk9TVF9JTklUSUFMX1BFUkNFTlQgPSAyMDsgLy8gODAlIGxvY2tlZAoKICAgIC8vIEZpZWxkcyB0aGF0IGNhbiBiZSBjaGFuZ2VkIGJ5IGZ1bmN0aW9ucwogICAgYWRkcmVzc1tdIGljZWRCYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgaWNlZEJhbGFuY2VzX2Zyb3N0ZWQ7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGljZWRCYWxhbmNlc19kZWZyb3N0ZWQ7CgogICAgdWludDI1NiBvd25lckZyb3N0ZWQ7CiAgICB1aW50MjU2IG93bmVyRGVmcm9zdGVkOwoKICAgIC8vIFZhcmlhYmxlIHVzZWZ1bCBmb3IgdmVyaWZ5aW5nIHRoYXQgdGhlIGFzc2lnbmVkU3VwcGx5IG1hdGNoZXMgdGhhdCB0b3RhbFN1cHBseQogICAgdWludDI1NiBwdWJsaWMgYXNzaWduZWRTdXBwbHk7CiAgICAvL0Jvb2xlYW4gdG8gYWxsb3cgb3Igbm90IHRoZSBpbml0aWFsIGFzc2lnbm1lbnQgb2YgdG9rZW4gKGJhdGNoKQogICAgYm9vbCBwdWJsaWMgYmF0Y2hBc3NpZ25TdG9wcGVkID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiBAZGV2IENvbnN0cnVjdG9yIHRoYXQgZ2l2ZXMgbXNnLnNlbmRlciBhbGwgb2YgZXhpc3RpbmcgdG9rZW5zLgogICAgICovCiAgICBmdW5jdGlvbiBEUlRDb2luKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICB1aW50MjU2IGFtb3VudCA9IDU0NTAwMDAwMCAqIDEwICoqIGRlY2ltYWxzOwogICAgICAgIHVpbnQyNTYgYW1vdW50MmFzc2lnbiA9IGFtb3VudCAqIERFRlJPU1RfSU5JVElBTF9QRVJDRU5UX09XTkVSIC8gMTAwOwogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGFtb3VudDJhc3NpZ247CiAgICAgICAgb3duZXJEZWZyb3N0ZWQgPSBhbW91bnQyYXNzaWduOwogICAgICAgIG93bmVyRnJvc3RlZCA9IGFtb3VudCAtIGFtb3VudDJhc3NpZ247CiAgICAgICAgdG90YWxTdXBwbHkgPSBNQVhfU1VQUExZX09GX1RPS0VOOwogICAgICAgIGFzc2lnbmVkU3VwcGx5ID0gYW1vdW50OwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgaW4gYmF0Y2hlcyAob2YgYWRkcmVzc2VzKQogICAgICogQHBhcmFtIF92YWRkciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgICAqIEBwYXJhbSBfdmFtb3VudHMgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAgICovCiAgICBmdW5jdGlvbiBiYXRjaEFzc2lnblRva2VucyhhZGRyZXNzW10gX3ZhZGRyLCB1aW50W10gX3ZhbW91bnRzLCBib29sW10gX3ZJY2VkQmFsYW5jZSkgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGJhdGNoQXNzaWduU3RvcHBlZCA9PSBmYWxzZSk7CiAgICAgICAgcmVxdWlyZShfdmFkZHIubGVuZ3RoID09IF92YW1vdW50cy5sZW5ndGgpOwogICAgICAgIC8vTG9vcGluZyBpbnRvIGlucHV0IGFycmF5cyB0byBhc3NpZ24gdGFyZ2V0IGFtb3VudCB0byBlYWNoIGdpdmVuIGFkZHJlc3MKICAgICAgICBmb3IgKHVpbnQgaW5kZXggPSAwOyBpbmRleCA8IF92YWRkci5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgYWRkcmVzcyB0b0FkZHJlc3MgPSBfdmFkZHJbaW5kZXhdOwogICAgICAgICAgICB1aW50IGFtb3VudCA9IF92YW1vdW50c1tpbmRleF0gKiAxMCAqKiBkZWNpbWFsczsKICAgICAgICAgICAgYm9vbCBpc0ljZWQgPSBfdkljZWRCYWxhbmNlW2luZGV4XTsKICAgICAgICAgICAgaWYgKGJhbGFuY2VzW3RvQWRkcmVzc10gPT0gMCkgewogICAgICAgICAgICAgICAgLy8gSW4gY2FzZSBpdCdzIGZpbGxlZCB0d28gdGltZXMsIGl0IG9ubHkgaW5jcmVtZW50cyBvbmNlCiAgICAgICAgICAgICAgICAvLyBBc3NpZ25zIHRoZSBiYWxhbmNlCiAgICAgICAgICAgICAgICBhc3NpZ25lZFN1cHBseSArPSBhbW91bnQ7CiAgICAgICAgICAgICAgICBpZiAoaXNJY2VkID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gTm9ybWFsIGFjY291bnQKICAgICAgICAgICAgICAgICAgICBiYWxhbmNlc1t0b0FkZHJlc3NdID0gYW1vdW50OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gSWNlZCBhY2NvdW50LiBUaGUgYmFsYW5jZSBpcyBub3QgYWZmZWN0ZWQgaGVyZQogICAgICAgICAgICAgICAgICAgIGljZWRCYWxhbmNlcy5wdXNoKHRvQWRkcmVzcyk7CiAgICAgICAgICAgICAgICAgICAgdWludDI1NiBhbW91bnQyYXNzaWduID0gYW1vdW50ICogREVGUk9TVF9JTklUSUFMX1BFUkNFTlQgLyAxMDA7CiAgICAgICAgICAgICAgICAgICAgYmFsYW5jZXNbdG9BZGRyZXNzXSA9IGFtb3VudDJhc3NpZ247CiAgICAgICAgICAgICAgICAgICAgaWNlZEJhbGFuY2VzX2RlZnJvc3RlZFt0b0FkZHJlc3NdID0gYW1vdW50MmFzc2lnbjsKICAgICAgICAgICAgICAgICAgICBpY2VkQmFsYW5jZXNfZnJvc3RlZFt0b0FkZHJlc3NdID0gYW1vdW50IC0gYW1vdW50MmFzc2lnbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjYW5EZWZyb3N0KCkgb25seU93bmVyIGNvbnN0YW50IHJldHVybnMgKGJvb2wgYkNhbkRlZnJvc3QpewogICAgICAgIGJDYW5EZWZyb3N0ID0gbm93ID4gU1RBUlRfSUNPX1RJTUVTVEFNUDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRCbG9ja1RpbWVzdGFtcCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpewogICAgICAgIHJldHVybiBub3c7CiAgICB9CgoKICAgIC8qKgogICAgICogQGRldiBEZWZyb3N0IHRva2VuIChmb3IgYWR2aXNvcnMpCiAgICAgKiBNZXRob2QgY2FsbGVkIGJ5IHRoZSBvd25lciBvbmNlIHBlciBkZWZyb3N0IHBlcmlvZCAoMSBtb250aCkKICAgICAqLwogICAgZnVuY3Rpb24gZGVmcm9zdFRva2VuKCkgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5vdyA+IFNUQVJUX0lDT19USU1FU1RBTVApOwogICAgICAgIC8vIExvb3BpbmcgaW50byB0aGUgaWNlZCBhY2NvdW50cwogICAgICAgIGZvciAodWludCBpbmRleCA9IDA7IGluZGV4IDwgaWNlZEJhbGFuY2VzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICBhZGRyZXNzIGN1cnJlbnRBZGRyZXNzID0gaWNlZEJhbGFuY2VzW2luZGV4XTsKICAgICAgICAgICAgdWludDI1NiBhbW91bnRUb3RhbCA9IGljZWRCYWxhbmNlc19mcm9zdGVkW2N1cnJlbnRBZGRyZXNzXSArIGljZWRCYWxhbmNlc19kZWZyb3N0ZWRbY3VycmVudEFkZHJlc3NdOwogICAgICAgICAgICB1aW50MjU2IHRhcmdldERlRnJvc3RlZCA9IChTYWZlTWF0aC5taW5pbXVtKDEwMCwgREVGUk9TVF9JTklUSUFMX1BFUkNFTlQgKyBlbGFwc2VkTW9udGhzRnJvbUlDT1N0YXJ0KCkgKiBERUZST1NUX01PTlRITFlfUEVSQ0VOVCkpICogYW1vdW50VG90YWwgLyAxMDA7CiAgICAgICAgICAgIHVpbnQyNTYgYW1vdW50VG9SZWxlYXNlID0gdGFyZ2V0RGVGcm9zdGVkIC0gaWNlZEJhbGFuY2VzX2RlZnJvc3RlZFtjdXJyZW50QWRkcmVzc107CiAgICAgICAgICAgIGlmIChhbW91bnRUb1JlbGVhc2UgPiAwKSB7CiAgICAgICAgICAgICAgICBpY2VkQmFsYW5jZXNfZnJvc3RlZFtjdXJyZW50QWRkcmVzc10gPSBpY2VkQmFsYW5jZXNfZnJvc3RlZFtjdXJyZW50QWRkcmVzc10gLSBhbW91bnRUb1JlbGVhc2U7CiAgICAgICAgICAgICAgICBpY2VkQmFsYW5jZXNfZGVmcm9zdGVkW2N1cnJlbnRBZGRyZXNzXSA9IGljZWRCYWxhbmNlc19kZWZyb3N0ZWRbY3VycmVudEFkZHJlc3NdICsgYW1vdW50VG9SZWxlYXNlOwogICAgICAgICAgICAgICAgYmFsYW5jZXNbY3VycmVudEFkZHJlc3NdID0gYmFsYW5jZXNbY3VycmVudEFkZHJlc3NdICsgYW1vdW50VG9SZWxlYXNlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgIH0KICAgIC8qKgogICAgICogRGVmcm9zdCBmb3IgdGhlIG93bmVyIG9mIHRoZSBjb250cmFjdAogICAgICovCiAgICBmdW5jdGlvbiBkZWZyb3N0T3duZXIoKSBvbmx5T3duZXIgewogICAgICAgIGlmIChub3cgPCBTVEFSVF9JQ09fVElNRVNUQU1QKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBhbW91bnRUb3RhbCA9IG93bmVyRnJvc3RlZCArIG93bmVyRGVmcm9zdGVkOwogICAgICAgIHVpbnQyNTYgdGFyZ2V0RGVGcm9zdGVkID0gKFNhZmVNYXRoLm1pbmltdW0oMTAwLCBERUZST1NUX0lOSVRJQUxfUEVSQ0VOVF9PV05FUiArIGVsYXBzZWRNb250aHNGcm9tSUNPU3RhcnQoKSAqIERFRlJPU1RfTU9OVEhMWV9QRVJDRU5UX09XTkVSKSkgKiBhbW91bnRUb3RhbCAvIDEwMDsKICAgICAgICB1aW50MjU2IGFtb3VudFRvUmVsZWFzZSA9IHRhcmdldERlRnJvc3RlZCAtIG93bmVyRGVmcm9zdGVkOwogICAgICAgIGlmIChhbW91bnRUb1JlbGVhc2UgPiAwKSB7CiAgICAgICAgICAgIG93bmVyRnJvc3RlZCA9IG93bmVyRnJvc3RlZCAtIGFtb3VudFRvUmVsZWFzZTsKICAgICAgICAgICAgb3duZXJEZWZyb3N0ZWQgPSBvd25lckRlZnJvc3RlZCArIGFtb3VudFRvUmVsZWFzZTsKICAgICAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdICsgYW1vdW50VG9SZWxlYXNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBlbGFwc2VkTW9udGhzRnJvbUlDT1N0YXJ0KCkgY29uc3RhbnQgcmV0dXJucyAodWludCBlbGFwc2VkKSB7CiAgICAgICAgZWxhcHNlZCA9ICgobm93IC0gU1RBUlRfSUNPX1RJTUVTVEFNUCkgLyA2MCkgLyBERUZST1NUX1BFUklPRDsKICAgIH0KCiAgICBmdW5jdGlvbiBzdG9wQmF0Y2hBc3NpZ24oKSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoYmF0Y2hBc3NpZ25TdG9wcGVkID09IGZhbHNlKTsKICAgICAgICBiYXRjaEFzc2lnblN0b3BwZWQgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEFkZHJlc3NCYWxhbmNlKGFkZHJlc3MgYWRkcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSAgewogICAgICAgIGJhbGFuY2UgPSBiYWxhbmNlc1thZGRyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRBZGRyZXNzQW5kQmFsYW5jZShhZGRyZXNzIGFkZHIpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgX2Ftb3VudCkgIHsKICAgICAgICBfYWRkcmVzcyA9IGFkZHI7CiAgICAgICAgX2Ftb3VudCA9IGJhbGFuY2VzW2FkZHJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEljZWRBZGRyZXNzZXMoKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzW10gdmFkZHIpICB7CiAgICAgICAgdmFkZHIgPSBpY2VkQmFsYW5jZXM7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SWNlZEluZm9zKGFkZHJlc3MgYWRkcikgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyBpY2VkYWRkciwgdWludDI1NiBiYWxhbmNlLCB1aW50MjU2IGZyb3N0ZWQsIHVpbnQyNTYgZGVmcm9zdGVkKSAgewogICAgICAgIGljZWRhZGRyID0gYWRkcjsKICAgICAgICBiYWxhbmNlID0gYmFsYW5jZXNbYWRkcl07CiAgICAgICAgZnJvc3RlZCA9IGljZWRCYWxhbmNlc19mcm9zdGVkW2FkZHJdOwogICAgICAgIGRlZnJvc3RlZCA9IGljZWRCYWxhbmNlc19kZWZyb3N0ZWRbYWRkcl07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0T3duZXJJbmZvcygpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3Mgb3duZXJhZGRyLCB1aW50MjU2IGJhbGFuY2UsIHVpbnQyNTYgZnJvc3RlZCwgdWludDI1NiBkZWZyb3N0ZWQpICB7CiAgICAgICAgb3duZXJhZGRyID0gb3duZXI7CiAgICAgICAgYmFsYW5jZSA9IGJhbGFuY2VzW293bmVyYWRkcl07CiAgICAgICAgZnJvc3RlZCA9IG93bmVyRnJvc3RlZDsKICAgICAgICBkZWZyb3N0ZWQgPSBvd25lckRlZnJvc3RlZDsKICAgIH0KCn0='.
	

]
