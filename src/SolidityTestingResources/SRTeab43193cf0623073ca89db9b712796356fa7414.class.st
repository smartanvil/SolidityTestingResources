Class {
	#name : #SRTeab43193cf0623073ca89db9b712796356fa7414,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTeab43193cf0623073ca89db9b712796356fa7414 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIG5vdCBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCgpIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgd2hlblBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgfQp9CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICAvL3VpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBHb2xkRmVlcyBpcyBPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgCiAgICAvLyBlLmcuIGlmIHJhdGUgPSAwLjAwNTQKICAgIC8vdWludCByYXRlTiA9IDk5OTk0NTIwNTU7CiAgICB1aW50IHJhdGVOID0gOTk5OTQ1MjA1NDc5NDUyMDU0ODsKICAgIHVpbnQgcmF0ZUQgPSAxOTsKICAgIHVpbnQgcHVibGljIG1heERheXM7CiAgICB1aW50IHB1YmxpYyBtYXhSYXRlOwoKICAgIAogICAgZnVuY3Rpb24gR29sZEZlZXMoKSBwdWJsaWMgewogICAgICAgIGNhbGNNYXgoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjTWF4KCkgaW50ZXJuYWwgewogICAgICAgIG1heERheXMgPSAxOwogICAgICAgIG1heFJhdGUgPSByYXRlTjsKICAgICAgICAKICAgICAgICAKICAgICAgICB1aW50IHBvdyA9IDI7CiAgICAgICAgZG8gewogICAgICAgICAgICB1aW50IG5ld04gPSByYXRlTiAqKiBwb3c7CiAgICAgICAgICAgIGlmIChuZXdOIC8gbWF4UmF0ZSAhPSBtYXhSYXRlKSB7CiAgICAgICAgICAgICAgICBtYXhEYXlzID0gcG93IC8gMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG1heFJhdGUgPSBuZXdOOwogICAgICAgICAgICBwb3cgKj0gMjsKICAgICAgICB9IHdoaWxlIChwb3cgPCAyMDAwKTsKICAgICAgICAKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVSYXRlKHVpbnQyNTYgX24sIHVpbnQyNTYgX2QpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJhdGVOID0gX247CiAgICAgICAgcmF0ZUQgPSBfZDsKICAgICAgICBjYWxjTWF4KCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJhdGVGb3JEYXlzKHVpbnQyNTYgbnVtRGF5cykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiByYXRlKSB7CiAgICAgICAgaWYgKG51bURheXMgPD0gbWF4RGF5cykgewogICAgICAgICAgICB1aW50IHIgPSByYXRlTiAqKiBudW1EYXlzOwogICAgICAgICAgICB1aW50IGQgPSByYXRlRCAqIG51bURheXM7CiAgICAgICAgICAgIGlmIChkID4gMTgpIHsKICAgICAgICAgICAgICAgIHVpbnQgZGl2ID0gMTAgKiogKGQtMTgpOwogICAgICAgICAgICAgICAgcmF0ZSA9IHIgLyBkaXY7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkaXYgPSAxMCAqKiAoMTggLSBkKTsKICAgICAgICAgICAgICAgIHJhdGUgPSByICogZGl2OwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdWludDI1NiBtZDEgPSBudW1EYXlzIC8gMjsKICAgICAgICAgICAgdWludDI1NiBtZDIgPSBudW1EYXlzIC0gbWQxOwogICAgICAgICAgICAgdWludDI1NiByMjsKCiAgICAgICAgICAgIHVpbnQyNTYgcjEgPSByYXRlRm9yRGF5cyhtZDEpOwogICAgICAgICAgICBpZiAobWQxID09IG1kMikgewogICAgICAgICAgICAgICAgcjIgPSByMTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHIyID0gcmF0ZUZvckRheXMobWQyKTsKICAgICAgICAgICAgfQogICAgICAgICAgIAoKICAgICAgICAgICAgLy91aW50MjU2IHIxID0gcmF0ZUZvckRheXMobWF4RGF5cyk7CiAgICAgICAgICAgIC8vdWludDI1NiByMiA9IHJhdGVGb3JEYXlzKG51bURheXMtbWF4RGF5cyk7CiAgICAgICAgICAgIHJhdGUgPSByMS5tdWwocjIpLygxMCoqMTgpOwogICAgICAgIH0KICAgICAgICByZXR1cm47IAogICAgICAgIAogICAgfQoKICAgIHVpbnQyNTYgY29uc3RhbnQgcHVibGljIFVUQzJNWVQgPSAxNDgzMjAwMDAwOwoKICAgIGZ1bmN0aW9uIHdvdERheSh1aW50MjU2IHRpbWUpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gKHRpbWUgLSBVVEMyTVlUKSAvICgxIGRheXMpOwogICAgfQoKICAgIC8vIG1pbmltdW0gZmVlIGlzIDEgdW5sZXNzIHNhbWUgZGF5CiAgICBmdW5jdGlvbiBjYWxjRmVlcyh1aW50MjU2IHN0YXJ0LCB1aW50MjU2IGVuZCwgdWludDI1NiBzdGFydEFtb3VudCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBhbW91bnQsIHVpbnQyNTYgZmVlKSB7CiAgICAgICAgaWYgKHN0YXJ0QW1vdW50ID09IDApIAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgdWludDI1NiBudW1iZXJPZkRheXMgPSB3b3REYXkoZW5kKSAtIHdvdERheShzdGFydCk7CiAgICAgICAgaWYgKG51bWJlck9mRGF5cyA9PSAwKSB7CiAgICAgICAgICAgIGFtb3VudCA9IHN0YXJ0QW1vdW50OwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGFtb3VudCA9IChyYXRlRm9yRGF5cyhudW1iZXJPZkRheXMpICogc3RhcnRBbW91bnQpIC8gKDEgZXRoZXIpOwogICAgICAgIGlmICgoZmVlID09IDApICYmIChhbW91bnQgIT0gMCkpIAogICAgICAgICAgICBhbW91bnQtLTsKICAgICAgICBmZWUgPSBzdGFydEFtb3VudC5zdWIoYW1vdW50KTsKICAgIH0KfQoKCmNvbnRyYWN0IFJlY2xhaW1hYmxlIGlzIE93bmFibGUgewoJRVJDMjBCYXNpYyBjb25zdGFudCBpbnRlcm5hbCBSRUNMQUlNX0VUSEVSID0gRVJDMjBCYXNpYygweDApOwoKCWZ1bmN0aW9uIHJlY2xhaW0oRVJDMjBCYXNpYyB0b2tlbikKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICBhZGRyZXNzIHJlY2xhaW1lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgaWYgKHRva2VuID09IFJFQ0xBSU1fRVRIRVIpIHsKICAgICAgICAgICAgcmVjbGFpbWVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdWludDI1NiBiYWxhbmNlID0gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgICAgICAgICByZXF1aXJlKHRva2VuLnRyYW5zZmVyKHJlY2xhaW1lciwgYmFsYW5jZSkpOwogICAgICAgIH0KICAgIH0KfQoKCi8vIFRoaXMgaXMgcHJpbWFyaXR5IHVzZWQgZm9yIHRoZSBtaWdyYXRpb24uIFVzZSBpbiB0aGUgR0JUIGNvbnRyYWN0IGlzIGZvciBjb252ZW5pZW5jZQpjb250cmFjdCBHQlRCYXNpYyB7CgogICAgc3RydWN0IEJhbGFuY2UgewogICAgICAgIHVpbnQyNTYgYW1vdW50OyAgICAgICAgICAgICAgICAgLy8gYW1vdW50IHRocm91Z2ggdXBkYXRlIG9yIHRyYW5zZmVyCiAgICAgICAgdWludDI1NiBsYXN0VXBkYXRlZDsgICAgICAgICAgICAvLyBEQVRFIGxhc3QgdXBkYXRlZAogICAgICAgIHVpbnQyNTYgbmV4dEFsbG9jYXRpb25JbmRleDsgICAgLy8gd2hpY2ggYWxsb2NhdGlvbnNPdmVyVGltZSByZWNvcmQgY29udGFpbnMgbmV4dCB1cGRhdGUKICAgICAgICB1aW50MjU2IGFsbG9jYXRpb25TaGFyZTsgICAgICAgIC8vIHRoZSBzaGFyZSBvZiBhbGxvY2F0aW9uUG9vbCB0aGF0IHRoaXMgaG9sZGVyIGdldHMgKG1lYW5zIHRoZXkgaG9sZCBIR1QpCgl9CgoJLypDcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGJhbGFuY2VzKi8KCW1hcHBpbmcgKGFkZHJlc3MgPT4gQmFsYW5jZSkgcHVibGljIGJhbGFuY2VzOwoJCiAgICBzdHJ1Y3QgQWxsb2NhdGlvbiB7IAogICAgICAgIHVpbnQyNTYgICAgIGFtb3VudDsKICAgICAgICB1aW50MjU2ICAgICBkYXRlOwogICAgfQoJCglBbGxvY2F0aW9uW10gICBwdWJsaWMgYWxsb2NhdGlvbnNPdmVyVGltZTsKCUFsbG9jYXRpb25bXSAgIHB1YmxpYyBjdXJyZW50QWxsb2NhdGlvbnM7CgoJZnVuY3Rpb24gY3VycmVudEFsbG9jYXRpb25MZW5ndGgoKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CgkJcmV0dXJuIGN1cnJlbnRBbGxvY2F0aW9ucy5sZW5ndGg7Cgl9CgoJZnVuY3Rpb24gYW90TGVuZ3RoKCkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewoJCXJldHVybiBhbGxvY2F0aW9uc092ZXJUaW1lLmxlbmd0aDsKCX0KfQoKCmNvbnRyYWN0IEdvbGRCYWNrZWRUb2tlbiBpcyBPd25hYmxlLCBFUkMyMCwgUGF1c2FibGUsIEdCVEJhc2ljLCBSZWNsYWltYWJsZSB7Cgl1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCglmdW5jdGlvbiBHb2xkQmFja2VkVG9rZW4oR29sZEZlZXMgZmVlQ2FsYywgR0JUQmFzaWMgX29sZFRva2VuKSBwdWJsaWMgewoJCXVpbnQgZGVsdGEgPSAzNzk5OTk3MjAxMjAwMTc4NTAwODE0NzUzOwoJCWZlZUNhbGN1bGF0b3IgPSBmZWVDYWxjOwogICAgICAgIG9sZFRva2VuID0gX29sZFRva2VuOwoJCS8vIG5vdyBtaWdyYXRlIHRoZSBub24gYmFsYW5jZSBzdHVmZgoJCXVpbnQgeDsKCQlmb3IgKHggPSAwOyB4IDwgb2xkVG9rZW4uYW90TGVuZ3RoKCk7IHgrKykgewoJCQlBbGxvY2F0aW9uIG1lbW9yeSBhbDsKCQkJKGFsLmFtb3VudCwgYWwuZGF0ZSkgPSBvbGRUb2tlbi5hbGxvY2F0aW9uc092ZXJUaW1lKHgpOwoJCQlhbGxvY2F0aW9uc092ZXJUaW1lLnB1c2goYWwpOwoJCX0KCQlhbGxvY2F0aW9uc092ZXJUaW1lWzNdLmFtb3VudCA9IGFsbG9jYXRpb25zT3ZlclRpbWVbM10uYW1vdW50LnN1YihkZWx0YSk7CgkJZm9yICh4ID0gMDsgeCA8IG9sZFRva2VuLmN1cnJlbnRBbGxvY2F0aW9uTGVuZ3RoKCk7IHgrKykgewoJCQkoYWwuYW1vdW50LCBhbC5kYXRlKSA9IG9sZFRva2VuLmN1cnJlbnRBbGxvY2F0aW9ucyh4KTsKCQkJYWwuYW1vdW50ID0gYWwuYW1vdW50LnN1YihkZWx0YSk7CgkJCWN1cnJlbnRBbGxvY2F0aW9ucy5wdXNoKGFsKTsKCQl9CgoJCS8vIDFzdCBNaW50aW5nIDogVHhIYXNoIDB4OGJhOTE3NWQ3N2VkNWQzYmJmMGRkYjM2NjZkZjQ5NmQzNzg5ZGE1YWE0MWU0NjIyOGRmOTEzNTdkOWVhZThiZAoJCS8vIGFtb3VudCA9IDUyODM1OTgwMDAwMDAwMDAwMDAwMDsKCQkvLyBkYXRlID0gMTUxMjY0Njg0NTsKCQkKCQkvLyAybmQgTWludGluZyA6IFR4SGFzaCAweGIzZWM0ODNkYzhjZjdkYmJlMjlmNGI4NmJkMzcxNzAyZGQwZmRhY2NkOTFkMWIyZDU3ZDVlOWExOGIyM2QwMjIKCQkvLyBkYXRlID0gMTUxMzg1NTM0NTsKCQkvLyBhbW91bnQgPSAxMDAzMjAzNTgxODMxODY4NjIzMDg4OwoKCQkvLyBHZXQgdmFsdWVzIG9mIGZpcnN0IG1pbnRpbmcgYXQgc2Vjb25kIG1pbnRpbmcgZGF0ZQoJCS8vIGZlZUNhbGMoMTUxMjY0Njg0NSwxNTEzODU1MzQ1LDUyODM1OTgwMDAwMDAwMDAwMDAwMCkgPT4gKDUyNzk1NDYyNzIyMTAzMjUxNjAzMSw0MDUxNzI3Nzg5Njc0ODM5NjkpCgoJCW1pbnRlZEdCVC5kYXRlID0gMTUxNTcwMDI0NzsKCQltaW50ZWRHQlQuYW1vdW50ID0gMTUyOTMxMzQ5MDg2MTY5MjU0MTY0NDsKCX0KCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CgkgIHVpbnQyNTYgbWludGVkOwoJICB1aW50MjU2IG1GZWVzOwoJICB1aW50MjU2IHVtaW50ZWQ7CgkgIHVpbnQyNTYgdW1GZWVzOwoJICB1aW50MjU2IGFsbG9jYXRlZDsKCSAgdWludDI1NiBhRmVlczsKCSAgKG1pbnRlZCxtRmVlcykgPSBjYWxjRmVlcyhtaW50ZWRHQlQuZGF0ZSxub3csbWludGVkR0JULmFtb3VudCk7CgkgICh1bWludGVkLHVtRmVlcykgPSBjYWxjRmVlcyh1bm1pbnRlZEdCVC5kYXRlLG5vdyx1bm1pbnRlZEdCVC5hbW91bnQpOwoJICAoYWxsb2NhdGVkLGFGZWVzKSA9IGNhbGNGZWVzKGN1cnJlbnRBbGxvY2F0aW9uc1swXS5kYXRlLG5vdyxjdXJyZW50QWxsb2NhdGlvbnNbMF0uYW1vdW50KTsKCSAgaWYgKG1pbnRlZCthbGxvY2F0ZWQ+dW1pbnRlZCkgewoJICAJcmV0dXJuIG1pbnRlZC5hZGQoYWxsb2NhdGVkKS5zdWIodW1pbnRlZCk7CgkgIH0gZWxzZSB7CgkJcmV0dXJuIDA7CgkgIH0KICB9CgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwogIGV2ZW50IERlZHVjdEZlZXMoYWRkcmVzcyBpbmRleGVkIG93bmVyLHVpbnQyNTYgYW1vdW50KTsKCiAgZXZlbnQgVG9rZW5NaW50ZWQoYWRkcmVzcyBkZXN0aW5hdGlvbiwgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IFRva2VuQnVybmVkKGFkZHJlc3Mgc291cmNlLCB1aW50MjU2IGFtb3VudCk7CiAgCglzdHJpbmcgcHVibGljIG5hbWUgPSAiR09MRFgiOwoJc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiR09MRFgiOwoJdWludDI1NiBjb25zdGFudCBwdWJsaWMgIGRlY2ltYWxzID0gMTg7ICAvLyBzYW1lIGFzIEVUSAoJdWludDI1NiBjb25zdGFudCBwdWJsaWMgIGhndERlY2ltYWxzID0gODsKCQkKCXVpbnQyNTYgY29uc3RhbnQgcHVibGljIGFsbG9jYXRpb25Qb29sID0gMSAqIDEwKio5ICogMTAqKmhndERlY2ltYWxzOyAgICAgIC8vIHRvdGFsIEhHVCBob2xkaW5ncwoJdWludDI1NgkgICAgICAgICBwdWJsaWMJbWF4QWxsb2NhdGlvbiAgPSAzOCAqIDEwKio1ICogMTAqKmRlY2ltYWxzOwkJCS8vIG1heCBHQlQgdGhhdCBjYW4gZXZlciBldmVyIGJlIGdpdmVuIG91dAoJdWludDI1NgkgICAgICAgICBwdWJsaWMJdG90QWxsb2NhdGlvbjsJCQkvLyBhbW91bnQgb2YgR0JUIHNvIGZhcgoJCglHb2xkRmVlcwkJIHB1YmxpYyBmZWVDYWxjdWxhdG9yOwoJYWRkcmVzcwkJICAgICBwdWJsaWMgSEdUOwkJCQkJLy8gSEdUIGNvbnRyYWN0IGFkZHJlc3MKCglmdW5jdGlvbiB1cGRhdGVNYXhBbGxvY2F0aW9uKHVpbnQyNTYgbmV3TWF4KSBwdWJsaWMgb25seU93bmVyIHsKCQlyZXF1aXJlKG5ld01heCA+IDM4ICogMTAqKjUgKiAxMCoqZGVjaW1hbHMpOwoJCW1heEFsbG9jYXRpb24gPSBuZXdNYXg7Cgl9CgoJZnVuY3Rpb24gc2V0RmVlQ2FsY3VsYXRvcihHb2xkRmVlcyBuZXdGQykgcHVibGljIG9ubHlPd25lciB7CgkJZmVlQ2FsY3VsYXRvciA9IG5ld0ZDOwoJfQoKCQoJLy8gR29sZEZlZXMgbmVlZHMgdG8gdGFrZSBjYXJlIG9mIERvbWFpbiBPZmZzZXQgLSBkbyBub3QgZG8gaGVyZQoKCWZ1bmN0aW9uIGNhbGNGZWVzKHVpbnQyNTYgZnJvbSwgdWludDI1NiB0bywgdWludDI1NiBhbW91bnQpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQyNTYgdmFsLCB1aW50MjU2IGZlZSkgewoJCXJldHVybiBmZWVDYWxjdWxhdG9yLmNhbGNGZWVzKGZyb20sdG8sYW1vdW50KTsKCX0KCgkKCW1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgcHVibGljIGFsbG93YW5jZTsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgdXBkYXRlZDsKCiAgICBHQlRCYXNpYyBvbGRUb2tlbjsKCglmdW5jdGlvbiBtaWdyYXRlQmFsYW5jZShhZGRyZXNzIHdoZXJlKSBwdWJsaWMgewoJCWlmICghdXBkYXRlZFt3aGVyZV0pIHsKICAgICAgICAgICAgdWludDI1NiBhbTsKICAgICAgICAgICAgdWludDI1NiBsdTsKICAgICAgICAgICAgdWludDI1NiBuZTsKICAgICAgICAgICAgdWludDI1NiBhbDsKICAgICAgICAgICAgKGFtLGx1LG5lLGFsKSA9IG9sZFRva2VuLmJhbGFuY2VzKHdoZXJlKTsKICAgICAgICAgICAgYmFsYW5jZXNbd2hlcmVdID0gQmFsYW5jZShhbSxsdSxuZSxhbCk7CiAgICAgICAgICAgIHVwZGF0ZWRbd2hlcmVdID0gdHJ1ZTsKICAgICAgICB9CgoJfQoJCglmdW5jdGlvbiB1cGRhdGUoYWRkcmVzcyB3aGVyZSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQyNTYgcG9zOwoJCXVpbnQyNTYgZmVlczsKCQl1aW50MjU2IHZhbDsKCQltaWdyYXRlQmFsYW5jZSh3aGVyZSk7CiAgICAgICAgKHZhbCxmZWVzLHBvcykgPSB1cGRhdGVkQmFsYW5jZSh3aGVyZSk7CgkgICAgYmFsYW5jZXNbd2hlcmVdLm5leHRBbGxvY2F0aW9uSW5kZXggPSBwb3M7CgkgICAgYmFsYW5jZXNbd2hlcmVdLmFtb3VudCA9IHZhbDsKICAgICAgICBiYWxhbmNlc1t3aGVyZV0ubGFzdFVwZGF0ZWQgPSBub3c7Cgl9CgkKCWZ1bmN0aW9uIHVwZGF0ZWRCYWxhbmNlKGFkZHJlc3Mgd2hlcmUpIHZpZXcgcHVibGljIHJldHVybnMgKHVpbnQgdmFsLCB1aW50IGZlZXMsIHVpbnQgcG9zKSB7CgkJdWludDI1NiBjVmFsOwoJCXVpbnQyNTYgY0ZlZXM7CgkJdWludDI1NiBjQW1vdW50OwoKICAgICAgICB1aW50MjU2IGFtOwogICAgICAgIHVpbnQyNTYgbHU7CiAgICAgICAgdWludDI1NiBuZTsKICAgICAgICB1aW50MjU2IGFsOwoJCUJhbGFuY2UgbWVtb3J5IGJiOwoKCQkvLyBjYWxjdWxhdGUgdXBkYXRlIG9mIGJhbGFuY2UgaW4gYWNjb3VudAogICAgICAgIGlmICh1cGRhdGVkW3doZXJlXSkgewogICAgICAgICAgICBiYiA9IGJhbGFuY2VzW3doZXJlXTsKICAgICAgICAgICAgYW0gPSBiYi5hbW91bnQ7CiAgICAgICAgICAgIGx1ID0gYmIubGFzdFVwZGF0ZWQ7CiAgICAgICAgICAgIG5lID0gYmIubmV4dEFsbG9jYXRpb25JbmRleDsKICAgICAgICAgICAgYWwgPSBiYi5hbGxvY2F0aW9uU2hhcmU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgKGFtLGx1LG5lLGFsKSA9IG9sZFRva2VuLmJhbGFuY2VzKHdoZXJlKTsKICAgICAgICB9CgkJKHZhbCxmZWVzKSA9IGNhbGNGZWVzKGx1LG5vdyxhbSk7CgkJLy8gY2FsY3VsYXRlIHVwZGF0ZSBiYXNlZCBvbiBhY2NydWVkIGRpc2J1cnNhbHMKCSAgICBwb3MgPSBuZTsKCQlpZiAoKHBvcyA8IGN1cnJlbnRBbGxvY2F0aW9ucy5sZW5ndGgpICYmIChhbCAhPSAwKSkgewoJCQljQW1vdW50ID0gY3VycmVudEFsbG9jYXRpb25zW25lXS5hbW91bnQubXVsKGFsKS5kaXYoIGFsbG9jYXRpb25Qb29sKTsKCQkJKGNWYWwsY0ZlZXMpID0gY2FsY0ZlZXMoY3VycmVudEFsbG9jYXRpb25zW25lXS5kYXRlLG5vdyxjQW1vdW50KTsKCQl9IAoJICAgIHZhbCA9IHZhbC5hZGQoY1ZhbCk7CgkJZmVlcyA9IGZlZXMuYWRkKGNGZWVzKTsKCQlwb3MgPSBjdXJyZW50QWxsb2NhdGlvbnMubGVuZ3RoOwoJfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdoZXJlKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IHZhbCkgewogICAgICAgIHVpbnQyNTYgZmVlczsKCQl1aW50MjU2IHBvczsKICAgICAgICAodmFsLGZlZXMscG9zKSA9IHVwZGF0ZWRCYWxhbmNlKHdoZXJlKTsKICAgICAgICByZXR1cm4gOwogICAgfQoKCWV2ZW50IEdvbGRBbGxvY2F0aW9uKHVpbnQyNTYgYW1vdW50LCB1aW50MjU2IGRhdGUpOwoJZXZlbnQgRmVlT25BbGxvY2F0aW9uKHVpbnQyNTYgZmVlcywgdWludDI1NiBkYXRlKTsKCglldmVudCBQYXJ0Q29tcGxldGUoKTsKCWV2ZW50IFN0aWxsVG9Hbyh1aW50IG51bUxlZnQpOwoJdWludDI1NiBwdWJsaWMgcGFydFBvczsKCXVpbnQyNTYgcHVibGljIHBhcnRGZWVzOwoJdWludDI1NiBwYXJ0TDsKCUFsbG9jYXRpb25bXSAgIHB1YmxpYyBwYXJ0QWxsb2NhdGlvbnM7CgoJZnVuY3Rpb24gcGFydEFsbG9jYXRpb25MZW5ndGgoKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50KSB7CgkJcmV0dXJuIHBhcnRBbGxvY2F0aW9ucy5sZW5ndGg7Cgl9CgoJZnVuY3Rpb24gYWRkQWxsb2NhdGlvblBhcnRPbmUodWludCBuZXdBbGxvY2F0aW9uLHVpbnQgbnVtU3RlcHMpIAoJCXB1YmxpYyAKCQlvbmx5TWludGVyIAoJewoJCXJlcXVpcmUocGFydFBvcyA9PSAwKTsKCQl1aW50MjU2IHRoaXNBbGxvY2F0aW9uID0gbmV3QWxsb2NhdGlvbjsKCgkJcmVxdWlyZSh0b3RBbGxvY2F0aW9uIDwgbWF4QWxsb2NhdGlvbik7CQkvLyBjYW5ub3QgYWxsb2NhdGUgbW9yZSB0aGFuIHRoaXM7CgoJCWlmIChjdXJyZW50QWxsb2NhdGlvbnMubGVuZ3RoID4gcGFydEFsbG9jYXRpb25zLmxlbmd0aCkgewoJCQlwYXJ0QWxsb2NhdGlvbnMgPSBjdXJyZW50QWxsb2NhdGlvbnM7CgkJfQoKCQlpZiAodG90QWxsb2NhdGlvbiArIHRoaXNBbGxvY2F0aW9uID4gbWF4QWxsb2NhdGlvbikgewoJCQl0aGlzQWxsb2NhdGlvbiA9IG1heEFsbG9jYXRpb24uc3ViKHRvdEFsbG9jYXRpb24pOwoJCQlsb2cwKCJtYXggYWxsb2MgcmVhY2hlZCIpOwoJCX0KCQl0b3RBbGxvY2F0aW9uID0gdG90QWxsb2NhdGlvbi5hZGQodGhpc0FsbG9jYXRpb24pOwoKCQlHb2xkQWxsb2NhdGlvbih0aGlzQWxsb2NhdGlvbixub3cpOwoKICAgICAgICBBbGxvY2F0aW9uIG1lbW9yeSBuZXdEaXY7CiAgICAgICAgbmV3RGl2LmFtb3VudCA9IHRoaXNBbGxvY2F0aW9uOwogICAgICAgIG5ld0Rpdi5kYXRlID0gbm93OwoJCS8vIHN0b3JlIGludG8gaGlzdG9yeQoJICAgIGFsbG9jYXRpb25zT3ZlclRpbWUucHVzaChuZXdEaXYpOwoJCS8vIGFkZCB0aGlzIHJlY29yZCB0byB0aGUgZW5kIG9mIGN1cnJlbnRBbGxvY2F0aW9ucwoJCXBhcnRMID0gcGFydEFsbG9jYXRpb25zLnB1c2gobmV3RGl2KTsKCQkvLyB1cGRhdGUgYWxsIG90aGVyIHJlY29yZHMgd2l0aCBjYWxjcyBmcm9tIGxhc3QgcmVjb3JkCgkJaWYgKHBhcnRBbGxvY2F0aW9ucy5sZW5ndGggPCAyKSB7IC8vIG5vIGZlZXMgdG8gY29uc2lkZXIKCQkJUGFydENvbXBsZXRlKCk7CgkJCWN1cnJlbnRBbGxvY2F0aW9ucyA9IHBhcnRBbGxvY2F0aW9uczsKCQkJRmVlT25BbGxvY2F0aW9uKDAsbm93KTsKCQkJcmV0dXJuOwoJCX0KCQkvLwoJCS8vIFRoZSBvbmx5IGZlZXMgdGhhdCBuZWVkIHRvIGJlIGNvbGxlY3RlZCBhcmUgdGhlIGZlZXMgb24gbG9jYXRpb24gemVyby4KCQkvLyBTaW5jZSB0aGV5IGFyZSB0aGUgbGFzdCBjYWxjdWxhdGVkID0gdGhleSBjb21lIG91dCB3aXRoIHRoZSBicmVhawoJCS8vCgkJZm9yIChwYXJ0UG9zID0gcGFydEFsbG9jYXRpb25zLmxlbmd0aCAtIDI7IHBhcnRQb3MgPj0gMDsgcGFydFBvcy0tICkgewoJCQkocGFydEFsbG9jYXRpb25zW3BhcnRQb3NdLmFtb3VudCxwYXJ0RmVlcykgPSBjYWxjRmVlcyhwYXJ0QWxsb2NhdGlvbnNbcGFydFBvc10uZGF0ZSxub3cscGFydEFsbG9jYXRpb25zW3BhcnRQb3NdLmFtb3VudCk7CgoJCQlwYXJ0QWxsb2NhdGlvbnNbcGFydFBvc10uYW1vdW50ID0gcGFydEFsbG9jYXRpb25zW3BhcnRQb3NdLmFtb3VudC5hZGQocGFydEFsbG9jYXRpb25zW3BhcnRMIC0gMV0uYW1vdW50KTsKCQkJcGFydEFsbG9jYXRpb25zW3BhcnRQb3NdLmRhdGUgPSBub3c7CgkJCWlmICgocGFydFBvcyA9PSAwKSB8fCAocGFydFBvcyA9PSBwYXJ0QWxsb2NhdGlvbnMubGVuZ3RoLW51bVN0ZXBzKSkgewoJCQkJYnJlYWs7IAoJCQl9CgkJfQoJCWlmIChwYXJ0UG9zICE9IDApIHsKCQkJU3RpbGxUb0dvKHBhcnRQb3MpOwoJCQlyZXR1cm47IC8vIG5vdCBkb25lIHlldAoJCX0KCQlQYXJ0Q29tcGxldGUoKTsKCQlGZWVPbkFsbG9jYXRpb24ocGFydEZlZXMsbm93KTsKCQljdXJyZW50QWxsb2NhdGlvbnMgPSBwYXJ0QWxsb2NhdGlvbnM7Cgl9CgoJZnVuY3Rpb24gYWRkQWxsb2NhdGlvblBhcnRUd28odWludCBudW1TdGVwcykgCgkJcHVibGljIAoJCW9ubHlNaW50ZXIgCgl7CgkJcmVxdWlyZShudW1TdGVwcyA+IDApOwoJCXJlcXVpcmUocGFydFBvcyA+IDApOwoJCWZvciAodWludCBpID0gMDsgaSA8IG51bVN0ZXBzOyBpKysgKSB7CgkJCXBhcnRQb3MtLTsKCQkJKHBhcnRBbGxvY2F0aW9uc1twYXJ0UG9zXS5hbW91bnQscGFydEZlZXMpID0gY2FsY0ZlZXMocGFydEFsbG9jYXRpb25zW3BhcnRQb3NdLmRhdGUsbm93LHBhcnRBbGxvY2F0aW9uc1twYXJ0UG9zXS5hbW91bnQpOwoJCQlwYXJ0QWxsb2NhdGlvbnNbcGFydFBvc10uYW1vdW50ID0gcGFydEFsbG9jYXRpb25zW3BhcnRQb3NdLmFtb3VudC5hZGQocGFydEFsbG9jYXRpb25zW3BhcnRMIC0gMV0uYW1vdW50KTsKCQkJcGFydEFsbG9jYXRpb25zW3BhcnRQb3NdLmRhdGUgPSBub3c7CgkJCWlmIChwYXJ0UG9zID09IDApIHsKCQkJCWJyZWFrOyAKCQkJfQoJCX0KCQlpZiAocGFydFBvcyAhPSAwKSB7CgkJCVN0aWxsVG9HbyhwYXJ0UG9zKTsKCQkJcmV0dXJuOyAvLyBub3QgZG9uZSB5ZXQKCQl9CgkJUGFydENvbXBsZXRlKCk7CgkJRmVlT25BbGxvY2F0aW9uKHBhcnRGZWVzLG5vdyk7CgkJY3VycmVudEFsbG9jYXRpb25zID0gcGFydEFsbG9jYXRpb25zOwoJfQoKCWZ1bmN0aW9uIHNldEhHVChhZGRyZXNzIF9oZ3QpIHB1YmxpYyBvbmx5T3duZXIgewoJCUhHVCA9IF9oZ3Q7Cgl9CgoJZnVuY3Rpb24gcGFyZW50RmVlcyhhZGRyZXNzIHdoZXJlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCB7CgkJcmVxdWlyZShtc2cuc2VuZGVyID09IEhHVCk7CgkgICAgdXBkYXRlKHdoZXJlKTsJCQoJfQoJCglmdW5jdGlvbiBwYXJlbnRDaGFuZ2UoYWRkcmVzcyB3aGVyZSwgdWludCBuZXdWYWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgeyAvLyBjYWxsZWQgd2hlbiBIR1QgYmFsYW5jZSBjaGFuZ2VzCgkJcmVxdWlyZShtc2cuc2VuZGVyID09IEhHVCk7CgkgICAgYmFsYW5jZXNbd2hlcmVdLmFsbG9jYXRpb25TaGFyZSA9IG5ld1ZhbHVlOwoJfQoJCgkvKiBzZW5kIEdCVCAqLwoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sIG9rKSB7CgkJcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgkgICAgdXBkYXRlKG1zZy5zZW5kZXIpOyAgICAgICAgICAgICAgLy8gRG8gdGhpcyB0byBlbnN1cmUgc2VuZGVyIGhhcyBlbm91Z2ggZnVuZHMuCgkJdXBkYXRlKF90byk7IAoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hbW91bnQgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hbW91bnQuc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXS5hbW91bnQgPSBiYWxhbmNlc1tfdG9dLmFtb3VudC5hZGQoX3ZhbHVlKTsKCQlUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7IC8vTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UKICAgICAgICByZXR1cm4gdHJ1ZTsKCX0KCglmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCQlyZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCQl2YXIgX2FsbG93YW5jZSA9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl07CgoJICAgIHVwZGF0ZShfZnJvbSk7ICAgICAgICAgICAgICAvLyBEbyB0aGlzIHRvIGVuc3VyZSBzZW5kZXIgaGFzIGVub3VnaCBmdW5kcy4KCQl1cGRhdGUoX3RvKTsgCgoJCWJhbGFuY2VzW190b10uYW1vdW50ID0gYmFsYW5jZXNbX3RvXS5hbW91bnQuYWRkKF92YWx1ZSk7CgkJYmFsYW5jZXNbX2Zyb21dLmFtb3VudCA9IGJhbGFuY2VzW19mcm9tXS5hbW91bnQuc3ViKF92YWx1ZSk7CgkJYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CgkJVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKCQlyZXR1cm4gdHJ1ZTsKCX0KCiAgCWZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoJCXJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CiAgICAJYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIAlBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIAlyZXR1cm4gdHJ1ZTsKICAJfQoKICAvKioKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgfSBlbHNlIHsKICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgCWZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgIAlyZXR1cm4gYWxsb3dhbmNlW19vd25lcl1bX3NwZW5kZXJdOwogIAl9CgoJLy8gTWludGluZyBGdW5jdGlvbnMgCglhZGRyZXNzIHB1YmxpYyBhdXRob3Jpc2VkTWludGVyOwoKCWZ1bmN0aW9uIHNldE1pbnRlcihhZGRyZXNzIG1pbnRlcikgcHVibGljIG9ubHlPd25lciB7CgkJYXV0aG9yaXNlZE1pbnRlciA9IG1pbnRlcjsKCX0KCgltb2RpZmllciBvbmx5TWludGVyKCkgewoJCXJlcXVpcmUobXNnLnNlbmRlciA9PSBhdXRob3Jpc2VkTWludGVyKTsKCQlfOwoJfQoKCUFsbG9jYXRpb24gcHVibGljIG1pbnRlZEdCVDsJCS8vIG1pbnRpbmcgYWRkcyB0byB0aGlzIG9uZQoJQWxsb2NhdGlvbiBwdWJsaWMgdW5taW50ZWRHQlQ7CQkvLyBhbGxvY2F0aW5nIGFkZHMgaGVyZSwgYnVybmluZyB0YWtlcyBmcm9tIGhlcmUgaWYgbWludGVkIGlzIGVtcHR5CgkKCWZ1bmN0aW9uIG1pbnRUb2tlbnMoYWRkcmVzcyBkZXN0aW5hdGlvbiwgdWludDI1NiBhbW91bnQpIAoJCW9ubHlNaW50ZXIKCQlwdWJsaWMgCgl7CgkJcmVxdWlyZShtc2cuc2VuZGVyID09IGF1dGhvcmlzZWRNaW50ZXIpOwoJCXVwZGF0ZShkZXN0aW5hdGlvbik7CgkJYmFsYW5jZXNbZGVzdGluYXRpb25dLmFtb3VudCA9IGJhbGFuY2VzW2Rlc3RpbmF0aW9uXS5hbW91bnQuYWRkKGFtb3VudCk7CgkJVG9rZW5NaW50ZWQoZGVzdGluYXRpb24sYW1vdW50KTsKCQlUcmFuc2ZlcigweDAsZGVzdGluYXRpb24sYW1vdW50KTsgLy8gRVJDMjAgY29tcGxpYW5jZQoJCS8vCgkJLy8gVG90YWxBbGxvY2F0aW9uIHN0dWZmCgkJLy8KCQl1aW50MjU2IGZlZXM7CgkJKG1pbnRlZEdCVC5hbW91bnQsZmVlcykgPSBjYWxjRmVlcyhtaW50ZWRHQlQuZGF0ZSxub3csbWludGVkR0JULmFtb3VudCk7CgkJbWludGVkR0JULmFtb3VudCA9IG1pbnRlZEdCVC5hbW91bnQuYWRkKGFtb3VudCk7CgkJbWludGVkR0JULmRhdGUgPSBub3c7Cgl9CgoJZnVuY3Rpb24gYnVyblRva2VucyhhZGRyZXNzIHNvdXJjZSwgdWludDI1NiBhbW91bnQpIAoJCW9ubHlNaW50ZXIKCQlwdWJsaWMgCgl7CgkJdXBkYXRlKHNvdXJjZSk7CgkJYmFsYW5jZXNbc291cmNlXS5hbW91bnQgPSBiYWxhbmNlc1tzb3VyY2VdLmFtb3VudC5zdWIoYW1vdW50KTsKCQlUb2tlbkJ1cm5lZChzb3VyY2UsYW1vdW50KTsKCQlUcmFuc2Zlcihzb3VyY2UsMHgwLGFtb3VudCk7IC8vIEVSQzIwIGNvbXBsaWFuY2UKCQkvLwoJCS8vIFRvdGFsQWxsb2NhdGlvbiBzdHVmZgoJCS8vCgkJdWludDI1NiBmZWVzOwoJCSh1bm1pbnRlZEdCVC5hbW91bnQsZmVlcykgPSBjYWxjRmVlcyh1bm1pbnRlZEdCVC5kYXRlLG5vdyx1bm1pbnRlZEdCVC5hbW91bnQpOwoJCXVubWludGVkR0JULmRhdGUgPSBub3c7CgkJdW5taW50ZWRHQlQuYW1vdW50ID0gdW5taW50ZWRHQlQuYW1vdW50LmFkZChhbW91bnQpOwoJfQoKfQ=='.
	

]
