Class {
	#name : #SRT521ed218348577fa2915b9454b72712024d350d2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT521ed218348577fa2915b9454b72712024d350d2 >> base64 [
	^ 'LyoKICogTllYIFRva2VuIHNtYXJ0IGNvbnRyYWN0CiAqCiAqIFN1cHBvcnRzIEVSQzIwLCBFUkMyMjMgc3RhZGFyZHMKICoKICogVGhlIE5ZWCB0b2tlbiBpcyBtaW50YWJsZSBkdXJpbmcgVG9rZW4gU2FsZS4gT24gVG9rZW4gU2FsZSBmaW5hbGl6YXRpb24gaXQKICogd2lsbCBiZSBtaW50ZWQgdXAgdG8gdGhlIGNhcCBhbmQgbWludGluZyB3aWxsIGJlIGZpbmlzaGVkIGZvcmV2ZXIKICovCgoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL2luY2x1ZGUvTWludGFibGVUb2tlbi5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgInplcHBlbGluL2NvbnRyYWN0cy90b2tlbi9TdGFuZGFyZFRva2VuLnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCgovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vQmFzaWNUb2tlbi5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0VSQzIwQmFzaWMuc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vRVJDMjBCYXNpYy5zb2wiIDogZW5kCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4uL21hdGgvU2FmZU1hdGguc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Ci8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi4vbWF0aC9TYWZlTWF0aC5zb2wiIDogZW5kCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4gCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0Jhc2ljVG9rZW4uc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0VSQzIwLnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCgoKCgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vRVJDMjAuc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgInplcHBlbGluL2NvbnRyYWN0cy90b2tlbi9TdGFuZGFyZFRva2VuLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiemVwcGVsaW4vY29udHJhY3RzL293bmVyc2hpcC9Pd25hYmxlLnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KICB9Cgp9Ci8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiemVwcGVsaW4vY29udHJhY3RzL293bmVyc2hpcC9Pd25hYmxlLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKioKICogTWludGFibGUgdG9rZW4KICovCgpjb250cmFjdCBNaW50YWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHkgPSAwOwogICAgYWRkcmVzcyBtaW50ZXI7CgogICAgbW9kaWZpZXIgb25seU1pbnRlcigpewogICAgICAgIHJlcXVpcmUobWludGVyID09IG1zZy5zZW5kZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TWludGVyKGFkZHJlc3MgX21pbnRlcikgb25seU93bmVyIHsKICAgICAgICBtaW50ZXIgPSBfbWludGVyOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgb25seU1pbnRlciB7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgICAgIFRyYW5zZmVyKGFkZHJlc3MoMHgwKSwgX3RvLCBfYW1vdW50KTsKICAgIH0KfQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vaW5jbHVkZS9NaW50YWJsZVRva2VuLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9pbmNsdWRlL0VSQzIzUGF5YWJsZVRva2VuLnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCgoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0VSQzIzLnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCgoKCi8qCiAqIEVSQzIzCiAqIEVSQzIzIGludGVyZmFjZQogKiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIyMwogKi8KY29udHJhY3QgRVJDMjMgaXMgRVJDMjBCYXNpYyB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKTsKCiAgICBldmVudCBUcmFuc2ZlckRhdGEoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSk7Cn0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0VSQzIzLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9FUkMyM1BheWFibGVSZWNlaXZlci5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKgoqIENvbnRyYWN0IHRoYXQgaXMgd29ya2luZyB3aXRoIEVSQzIyMyB0b2tlbnMKKi8KCmNvbnRyYWN0IEVSQzIzUGF5YWJsZVJlY2VpdmVyIHsKICAgIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfZnJvbSwgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwYXlhYmxlOwp9CgovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vRVJDMjNQYXlhYmxlUmVjZWl2ZXIuc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8qKiAgaHR0cHM6Ly9naXRodWIuY29tL0RleGFyYW4vRVJDMjMtdG9rZW5zL2Jsb2IvbWFzdGVyL3Rva2VuL0VSQzIyMy9FUkMyMjNCYXNpY1Rva2VuLnNvbAogKgogKi8KY29udHJhY3QgRVJDMjNQYXlhYmxlVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjN7CiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgdXNlciBvciBhbm90aGVyIGNvbnRyYWN0IHdhbnRzIHRvIHRyYW5zZmVyIGZ1bmRzIC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEpewogICAgICAgIHRyYW5zZmVyQW5kUGF5KHRvLCB2YWx1ZSwgZGF0YSk7CiAgICB9CgogICAgLy8gU3RhbmRhcmQgZnVuY3Rpb24gdHJhbnNmZXIgc2ltaWxhciB0byBFUkMyMCB0cmFuc2ZlciB3aXRoIG5vIF9kYXRhIC4KICAgIC8vIEFkZGVkIGR1ZSB0byBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSByZWFzb25zIC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wpewogICAgICAgIGJ5dGVzIG1lbW9yeSBlbXB0eTsKICAgICAgICB0cmFuc2Zlcih0bywgdmFsdWUsIGVtcHR5KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckFuZFBheShhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSBwYXlhYmxlIHsKCiAgICAgICAgdWludCBjb2RlTGVuZ3RoOwoKICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgIC8vIFJldHJpZXZlIHRoZSBzaXplIG9mIHRoZSBjb2RlIG9uIHRhcmdldCBhZGRyZXNzLCB0aGlzIG5lZWRzIGFzc2VtYmx5IC4KICAgICAgICAgICAgY29kZUxlbmd0aCA6PSBleHRjb2Rlc2l6ZSh0bykKICAgICAgICB9CgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKHZhbHVlKTsKICAgICAgICBiYWxhbmNlc1t0b10gPSBiYWxhbmNlc1t0b10uYWRkKHZhbHVlKTsKCiAgICAgICAgaWYoY29kZUxlbmd0aD4wKSB7CiAgICAgICAgICAgIEVSQzIzUGF5YWJsZVJlY2VpdmVyIHJlY2VpdmVyID0gRVJDMjNQYXlhYmxlUmVjZWl2ZXIodG8pOwogICAgICAgICAgICByZWNlaXZlci50b2tlbkZhbGxiYWNrLnZhbHVlKG1zZy52YWx1ZSkobXNnLnNlbmRlciwgdmFsdWUsIGRhdGEpOwogICAgICAgIH1lbHNlIGlmKG1zZy52YWx1ZSA+IDApewogICAgICAgICAgICB0by50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgdG8sIHZhbHVlKTsKICAgICAgICBpZihkYXRhLmxlbmd0aCA+IDApCiAgICAgICAgICAgIFRyYW5zZmVyRGF0YShtc2cuc2VuZGVyLCB0bywgdmFsdWUsIGRhdGEpOwogICAgfQp9Ci8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9pbmNsdWRlL0VSQzIzUGF5YWJsZVRva2VuLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgoKY29udHJhY3QgTllYVG9rZW4gaXMgTWludGFibGVUb2tlbiwgRVJDMjNQYXlhYmxlVG9rZW4gewogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIk5ZWCBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJOWVgiOwogICAgdWludCBjb25zdGFudCBkZWNpbWFscyA9IDA7CgogICAgYm9vbCBwdWJsaWMgdHJhbnNmZXJFbmFibGVkID0gdHJ1ZTsKCiAgICAvL1RoZSBjYXAgaXMgMTUgbWxuIE5ZWAogICAgdWludCBwcml2YXRlIGNvbnN0YW50IENBUCA9IDE1KigxMCoqNik7CgogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludCBfYW1vdW50KXsKICAgICAgICByZXF1aXJlKHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KSA8PSBDQVApOwogICAgICAgIHN1cGVyLm1pbnQoX3RvLCBfYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBOWVhUb2tlbihhZGRyZXNzIHRlYW0pIHsKICAgICAgICAvL1RyYW5zZmVyIG93bmVyc2hpcCBvbiB0aGUgdG9rZW4gdG8gdGVhbSBvbiBjcmVhdGlvbgogICAgICAgIHRyYW5zZmVyT3duZXJzaGlwKHRlYW0pOwogICAgICAgIC8vIG1pbnRlciBpcyB0aGUgVG9rZW5TYWxlIGNvbnRyYWN0CiAgICAgICAgbWludGVyID0gbXNnLnNlbmRlcjsgCiAgICAgICAgLy8vIFByZXNlcnZlIDMgMDAwIDAwMCB0b2tlbnMgZm9yIHRoZSB0ZWFtCiAgICAgICAgbWludCh0ZWFtLCAzMDAwMDAwKTsKICAgIH0KCiAgICAvKioKICAgICogT3ZlcnJpZGluZyBhbGwgdHJhbnNmZXJzIHRvIGNoZWNrIGlmIHRyYW5zZmVycyBhcmUgZW5hYmxlZAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyQW5kUGF5KGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEpIHBheWFibGV7CiAgICAgICAgcmVxdWlyZSh0cmFuc2ZlckVuYWJsZWQpOwogICAgICAgIHN1cGVyLnRyYW5zZmVyQW5kUGF5KHRvLCB2YWx1ZSwgZGF0YSk7CiAgICB9CgogICAgZnVuY3Rpb24gZW5hYmxlVHJhbnNmZXIoYm9vbCBlbmFibGVkKSBvbmx5T3duZXJ7CiAgICAgICAgdHJhbnNmZXJFbmFibGVkID0gZW5hYmxlZDsKICAgIH0KCn0KCmNvbnRyYWN0IFRva2VuU2FsZSBpcyBPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAgIC8vIENvbnN0YW50cwogICAgLy8gPT09PT09PT09CiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgbWlsbGlvbnMgPSAxZTY7CgogICAgdWludCBwcml2YXRlIGNvbnN0YW50IENBUCA9IDE1Km1pbGxpb25zOwogICAgdWludCBwcml2YXRlIGNvbnN0YW50IFNBTEVfQ0FQID0gMTIqbWlsbGlvbnM7CiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgU09GVF9DQVAgPSAxNDAwMDAwOwogICAgCiAgICAvLyBBbGxvY2F0ZWQgZm9yIHRoZSB0ZWFtIHVwb24gY29udHJhY3QgY3JlYXRpb24KICAgIC8vID09PT09PT09PQogICAgdWludCBwcml2YXRlIGNvbnN0YW50IFRFQU1fQ0FQID0gMzAwMDAwMDsKCiAgICB1aW50IHB1YmxpYyBwcmljZSA9IDAuMDAxIGV0aGVyOwogICAgCiAgICAvLyBIb2xkIGludmVzdG9yJ3MgZXRoZXIgYW1vdW50cyB0byByZWZ1bmQKICAgIGFkZHJlc3NbXSBjb250cmlidXRvcnM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgY29udHJpYnV0aW9uczsKCiAgICAvLyBFdmVudHMKICAgIC8vID09PT09PQoKICAgIGV2ZW50IEFsdEJ1eShhZGRyZXNzIGhvbGRlciwgdWludCB0b2tlbnMsIHN0cmluZyB0eEhhc2gpOwogICAgZXZlbnQgQnV5KGFkZHJlc3MgaG9sZGVyLCB1aW50IHRva2Vucyk7CiAgICBldmVudCBSdW5TYWxlKCk7CiAgICBldmVudCBQYXVzZVNhbGUoKTsKICAgIGV2ZW50IEZpbmlzaFNhbGUoKTsKICAgIGV2ZW50IFByaWNlU2V0KHVpbnQgd2VpUGVyTllYKTsKCiAgICAvLyBTdGF0ZSB2YXJpYWJsZXMKICAgIC8vID09PT09PT09PT09PT09PQogICAgYm9vbCBwdWJsaWMgcHJlc2FsZTsKICAgIE5ZWFRva2VuIHB1YmxpYyB0b2tlbjsKICAgIGFkZHJlc3MgYXV0aG9yaXR5OyAvL0FuIGFjY291bnQgdG8gY29udHJvbCB0aGUgY29udHJhY3Qgb24gYmVoYWxmIG9mIHRoZSBvd25lcgogICAgYWRkcmVzcyByb2JvdDsgLy9BbiBhY2NvdW50IHRvIHB1cmNoYXNlIHRva2VucyBmb3IgYWx0Y29pbnMKICAgIGJvb2wgcHVibGljIGlzT3BlbiA9IHRydWU7CgogICAgLy8gQ29uc3RydWN0b3IKICAgIC8vID09PT09PT09PT09CgogICAgZnVuY3Rpb24gVG9rZW5TYWxlKCl7CiAgICAgICAgdG9rZW4gPSBuZXcgTllYVG9rZW4obXNnLnNlbmRlcik7CgogICAgICAgIGF1dGhvcml0eSA9IG1zZy5zZW5kZXI7CiAgICAgICAgcm9ib3QgPSBtc2cuc2VuZGVyOwogICAgICAgIHRyYW5zZmVyT3duZXJzaGlwKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vIFB1YmxpYyBmdW5jdGlvbnMKICAgIC8vID09PT09PT09PT09PT09PT0KICAgIGZ1bmN0aW9uIHRvZ2dsZVByZXNhbGUoYm9vbCBhY3RpdmF0ZSkgb25seU93bmVyIHsKICAgICAgICBwcmVzYWxlID0gYWN0aXZhdGU7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRQcmljZSgpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIGlmKHByZXNhbGUpIHsKICAgICAgICAgICAgcmV0dXJuIHByaWNlIC0gKHByaWNlKjIwLzEwMCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBwcmljZTsKICAgIH0KICAgIC8qKgogICAgKiBDb21wdXRlcyBudW1iZXIgb2YgdG9rZW5zIHdpdGggYm9udXMgZm9yIHRoZSBzcGVjaWZpZWQgZXRoZXIuIENvcnJlY3RseQogICAgKiBhZGRzIGJvbnVzZXMgaWYgdGhlIHN1bSBpcyBsYXJnZSBlbm91Z2ggdG8gYmVsb25nIHRvIHNldmVyYWwgYm9udXMgaW50ZXJ2YWxzCiAgICAqLwogICAgZnVuY3Rpb24gZ2V0VG9rZW5zQW1vdW50KHVpbnQgZXRoZXJWYWwpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IHRva2VucyA9IDA7CiAgICAgICAgdG9rZW5zICs9IGV0aGVyVmFsL2dldEN1cnJlbnRQcmljZSgpOwogICAgICAgIHJldHVybiB0b2tlbnM7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgdG8pIG9ubHlPcGVuIHBheWFibGV7CiAgICAgICAgdWludCBhbW91bnQgPSBtc2cudmFsdWU7CiAgICAgICAgdWludCB0b2tlbnMgPSBnZXRUb2tlbnNBbW91bnRVbmRlckNhcChhbW91bnQpOwogICAgICAgIAogICAgICAgIC8vIG93bmVyLnRyYW5zZmVyKGFtb3VudCk7CgoJCXRva2VuLm1pbnQodG8sIHRva2Vucyk7CgkJCgkJdWludCBhbHJlYWR5Q29udHJpYnV0ZWQgPSBjb250cmlidXRpb25zW3RvXTsKCQlpZihhbHJlYWR5Q29udHJpYnV0ZWQgPT0gMCkgLy8gbmV3IGNvbnRyaWJ1dG9yCgkJICAgIGNvbnRyaWJ1dG9ycy5wdXNoKHRvKTsKCQkgICAgCgkJY29udHJpYnV0aW9uc1t0b10gPSBjb250cmlidXRpb25zW3RvXS5hZGQobXNnLnZhbHVlKTsKCiAgICAgICAgQnV5KHRvLCB0b2tlbnMpOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHBheWFibGV7CiAgICAgICAgYnV5KG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vIE1vZGlmaWVycwogICAgLy8gPT09PT09PT09PT09PT09PT0KCiAgICBtb2RpZmllciBvbmx5QXV0aG9yaXR5KCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhdXRob3JpdHkgfHwgbXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Um9ib3QoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHJvYm90KTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPcGVuKCkgewogICAgICAgIHJlcXVpcmUoaXNPcGVuKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vIFByaXZlbGVnZWQgZnVuY3Rpb25zCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PQoKICAgIC8qKgogICAgKiBVc2VkIHRvIGJ1eSB0b2tlbnMgZm9yIGFsdGNvaW5zLgogICAgKiBSb2JvdCBtYXkgY2FsbCBpdCBiZWZvcmUgVG9rZW5TYWxlIG9mZmljaWFsbHkgc3RhcnRzIHRvIG1pZ3JhdGUgZWFybHkgaW52ZXN0b3JzCiAgICAqLwogICAgZnVuY3Rpb24gYnV5QWx0KGFkZHJlc3MgdG8sIHVpbnQgZXRoZXJBbW91bnQsIHN0cmluZyBfdHhIYXNoKSBvbmx5Um9ib3QgewogICAgICAgIHVpbnQgdG9rZW5zID0gZ2V0VG9rZW5zQW1vdW50VW5kZXJDYXAoZXRoZXJBbW91bnQpOwogICAgICAgIHRva2VuLm1pbnQodG8sIHRva2Vucyk7CiAgICAgICAgQWx0QnV5KHRvLCB0b2tlbnMsIF90eEhhc2gpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEF1dGhvcml0eShhZGRyZXNzIF9hdXRob3JpdHkpIG9ubHlPd25lciB7CiAgICAgICAgYXV0aG9yaXR5ID0gX2F1dGhvcml0eTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRSb2JvdChhZGRyZXNzIF9yb2JvdCkgb25seUF1dGhvcml0eSB7CiAgICAgICAgcm9ib3QgPSBfcm9ib3Q7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UHJpY2UodWludCBldGhlclBlck5ZWCkgb25seUF1dGhvcml0eSB7CiAgICAgICAgcHJpY2UgPSBldGhlclBlck5ZWDsKICAgICAgICBQcmljZVNldChwcmljZSk7CiAgICB9CgogICAgLy8gU0FMRSBzdGF0ZSBtYW5hZ2VtZW50OiBzdGFydCAvIHBhdXNlIC8gZmluYWxpemUKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBvcGVuKGJvb2wgb3BuKSBvbmx5QXV0aG9yaXR5IHsKICAgICAgICBpc09wZW4gPSBvcG47CiAgICAgICAgb3BuID8gUnVuU2FsZSgpIDogUGF1c2VTYWxlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gZmluYWxpemUoKSBvbmx5QXV0aG9yaXR5IHsKICAgICAgICAvLyBDaGVjayBmb3IgU09GVF9DQVAKICAgICAgICBpZih0b2tlbi50b3RhbFN1cHBseSgpIDwgU09GVF9DQVAgKyBURUFNX0NBUCkgeyAvLyBTb2Z0IGNhcCBpcyBub3QgcmVhY2hlZCwgcmV0dXJuIGFsbCBjb250cmlidXRpb25zIHRvIGludmVzdG9ycwogICAgICAgICAgICB1aW50IHggPSAwOwogICAgICAgICAgICB3aGlsZSh4IDwgY29udHJpYnV0b3JzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgdWludCBhbW91bnRUb1JldHVybiA9IGNvbnRyaWJ1dGlvbnNbY29udHJpYnV0b3JzW3hdXTsKICAgICAgICAgICAgICAgIGNvbnRyaWJ1dG9yc1t4XS50cmFuc2ZlcihhbW91bnRUb1JldHVybik7CiAgICAgICAgICAgICAgICB4Kys7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdWludCBkaWZmID0gQ0FQLnN1Yih0b2tlbi50b3RhbFN1cHBseSgpKTsKICAgICAgICBpZihkaWZmID4gMCkgLy9UaGUgdW5zb2xkIGNhcGFjaXR5IG1vdmVzIHRvIHRlYW0KICAgICAgICAgICAgdG9rZW4ubWludChvd25lciwgZGlmZik7CiAgICAgICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICAgICAgICBGaW5pc2hTYWxlKCk7CiAgICB9CgogICAgLy8gUHJpdmF0ZSBmdW5jdGlvbnMKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgICAvKioKICAgICogR2V0cyB0b2tlbnMgZm9yIHNwZWNpZmllZCBldGhlciBwcm92aWRlZCB0aGF0IHRoZXkgYXJlIHN0aWxsIHVuZGVyIHRoZSBjYXAKICAgICovCiAgICBmdW5jdGlvbiBnZXRUb2tlbnNBbW91bnRVbmRlckNhcCh1aW50IGV0aGVyQW1vdW50KSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKHVpbnQpewogICAgICAgIHVpbnQgdG9rZW5zID0gZ2V0VG9rZW5zQW1vdW50KGV0aGVyQW1vdW50KTsKICAgICAgICByZXF1aXJlKHRva2VucyA+IDApOwogICAgICAgIHJlcXVpcmUodG9rZW5zLmFkZCh0b2tlbi50b3RhbFN1cHBseSgpKSA8PSBTQUxFX0NBUCk7CiAgICAgICAgcmV0dXJuIHRva2VuczsKICAgIH0KCn0='.
	

]
