Class {
	#name : #SRTa8a8509a17a5872d01e489fc85b152eb2a0c092e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa8a8509a17a5872d01e489fc85b152eb2a0c092e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgoKLy8KLy8gU1ZMaWdodEJhbGxvdEJveAovLyBTaW5nbGUgdXNlIGNvbnRyYWN0IHRvIG1hbmFnZSBhIGJhbGxvdAovLyBBdXRob3I6IE1heCBLYXllIDw8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iMGI2NjZhNzM0Yjc4NmU2ODdlNzk2ZTI1N2Q2NDdmNmUiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgovLyBMaWNlbnNlOiBNSVQKLy8KLy8gQXJjaGl0ZWN0dXJlOgovLyAqIEJhbGxvdCBhdXRob3JpdHkgZGVjbGFyZXMgcHVibGljIGtleSB3aXRoIHdoaWNoIHRvIGVuY3J5cHQgYmFsbG90cyAob3B0aW9uYWwgLSBzdG9yZWQgaW4gYmFsbG90IHNwZWMpCi8vICogVXNlcnMgc3VibWl0IGVuY3J5cHRlZCBvciBwbGFpbnRleHQgYmFsbG90cyBhcyBibG9icyAoZGVwZW5kZW50IG9uIGFib3ZlKQovLyAqIFRoZXNlIGJhbGxvdHMgYXJlIHRyYWNrZWQgYnkgdGhlIEVUSCBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKLy8gKiBGb2xsb3dpbmcgdGhlIGNvbmNsdXNpb24gb2YgdGhlIGJhbGxvdCwgdGhlIHNlY3JldCBrZXkgaXMgcHJvdmlkZWQKLy8gICBieSB0aGUgYmFsbG90IGF1dGhvcml0eSwgYW5kIGFsbCB1c2VycyBtYXkgdHJhbnNwYXJlbnRseSBhbmQKLy8gICBpbmRlcGVuZGVudGx5IHZhbGlkYXRlIHRoZSByZXN1bHRzCi8vCi8vIE5vdGVzOgovLyAqIFNpbmNlIGJhbGxvdHMgYXJlIGVuY3J5cHRlZCB0aGUgb25seSB2YWxpZGF0aW9uIHdlIGNhbiBkbyBpcyBsZW5ndGgsIGJ1dCBVSSB0YWtlcyBjYXJlIG9mIG1vc3Qgb2YgdGhlIHJlc3QKLy8KCgpjb250cmFjdCBTVkxpZ2h0QmFsbG90Qm94IHsKICAgIC8vLy8gKiogU3RvcmFnZSBWYXJpYWJsZXMKCiAgICAvLyBTdGQgb3duZXIgcGF0dGVybgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgLy8gdGVzdCBtb2RlIC0gb3BlcmF0aW9ucyBsaWtlIGNoYW5naW5nIHN0YXJ0L2VuZCB0aW1lcwogICAgYm9vbCBwdWJsaWMgdGVzdE1vZGUgPSBmYWxzZTsKCiAgICAvLyBzdHJ1Y3QgZm9yIGJhbGxvdAogICAgc3RydWN0IEJhbGxvdCB7CiAgICAgICAgYnl0ZXMzMiBiYWxsb3REYXRhOwogICAgICAgIGFkZHJlc3Mgc2VuZGVyOwogICAgICAgIC8vIHdlIHVzZSBhIHVpbnQzMiBoZXJlIGJlY2F1c2UgYWRkcmVzc2VzIGFyZSAyMCBieXRlcyBhbmQgdGhpcyBtaWdodCBoZWxwCiAgICAgICAgLy8gc29saWRpdHkgcGFjayB0aGUgYmxvY2sgbnVtYmVyIHdlbGwuIGdpdmVzIHVzIGEgbGl0dGxlIHJvb20gdG8gZXhwYW5kIHRvbyBpZiBuZWVkZWQuCiAgICAgICAgdWludDMyIGJsb2NrTjsKICAgIH0KCiAgICAvLyBNYXBzIHRvIHN0b3JlIGJhbGxvdHMsIGFsb25nIHdpdGggY29ycmVzcG9uZGluZyBsb2cgb2Ygdm90ZXJzLgogICAgLy8gU2hvdWxkIG9ubHkgYmUgbW9kaWZpZWQgdGhyb3VnaCBgYWRkQmFsbG90QW5kVm90ZXJgIGludGVybmFsIGZ1bmN0aW9uCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IEJhbGxvdCkgcHVibGljIGJhbGxvdE1hcDsKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gYnl0ZXMzMikgcHVibGljIGFzc29jaWF0ZWRQdWJrZXlzOwogICAgdWludDI1NiBwdWJsaWMgblZvdGVzQ2FzdCA9IDA7CgogICAgLy8gVXNlIGEgbWFwIGZvciB2b3RlcnMgdG8gbG9vayB1cCB0aGVpciBiYWxsb3QKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHZvdGVyVG9CYWxsb3RJRDsKCiAgICAvLyBOT1RFIC0gV2UgZG9uJ3QgYWN0dWFsbHkgd2FudCB0byBpbmNsdWRlIHRoZSBQdWJsaWNLZXkgYmVjYXVzZSBfaXQncyBpbmNsdWRlZCBpbiB0aGUgYmFsbG90U3BlY18uCiAgICAvLyBJdCdzIGJldHRlciB0byBlbnN1cmUgcHBsIGFjdHVhbGx5IGhhdmUgdGhlIGJhbGxvdCBzcGVjIGJ5IG5vdCBpbmNsdWRpbmcgaXQgaW4gdGhlIGNvbnRyYWN0LgogICAgLy8gUGx1cyB3ZSdyZSBhbHJlYWR5IHN0b3JpbmcgdGhlIGhhc2ggb2YgdGhlIGJhbGxvdFNwZWMgYW55d2F5Li4uCgogICAgLy8gUHJpdmF0ZSBrZXkgdG8gYmUgc2V0IGFmdGVyIGJhbGxvdCBjb25jbHVzaW9uIC0gY3VydmUyNTUxOQogICAgYnl0ZXMzMiBwdWJsaWMgYmFsbG90RW5jcnlwdGlvblNlY2tleTsKICAgIGJvb2wgc2Vja2V5UmV2ZWFsZWQgPSBmYWxzZTsKCiAgICAvLyBUaW1lc3RhbXBzIGZvciBzdGFydCBhbmQgZW5kIG9mIGJhbGxvdCAoVVRDKQogICAgdWludDY0IHB1YmxpYyBzdGFydFRpbWU7CiAgICB1aW50NjQgcHVibGljIGVuZFRpbWU7CiAgICB1aW50NjQgcHVibGljIGNyZWF0aW9uQmxvY2s7CiAgICB1aW50NjQgcHVibGljIHN0YXJ0aW5nQmxvY2tBcm91bmQ7CgogICAgLy8gc3BlY0hhc2ggYnkgd2hpY2ggdG8gdmFsaWRhdGUgdGhlIGJhbGxvdHMgaW50ZWdyaXR5CiAgICBieXRlczMyIHB1YmxpYyBzcGVjSGFzaDsKICAgIGJvb2wgcHVibGljIHVzZUVuY3J5cHRpb247CgogICAgLy8gZGVwcmVjYXRpb24gZmxhZyAtIGRvZXNuJ3QgYWN0dWFsbHkgZG8gYW55dGhpbmcgYmVzaWRlcyBzaWduYWwgdGhhdCB0aGlzIGNvbnRyYWN0IGlzIGRlcHJlY2F0ZWQ7CiAgICBib29sIHB1YmxpYyBkZXByZWNhdGVkID0gZmFsc2U7CgogICAgLy8vLyAqKiBFdmVudHMKICAgIGV2ZW50IENyZWF0ZWRCYWxsb3QoYWRkcmVzcyBfY3JlYXRvciwgdWludDY0WzJdIF9vcGVuUGVyaW9kLCBib29sIF91c2VFbmNyeXB0aW9uLCBieXRlczMyIF9zcGVjSGFzaCk7CiAgICBldmVudCBTdWNjZXNzZnVsUGtWb3RlKGFkZHJlc3Mgdm90ZXIsIGJ5dGVzMzIgYmFsbG90LCBieXRlczMyIHB1YmtleSk7CiAgICBldmVudCBTdWNjZXNzZnVsVm90ZShhZGRyZXNzIHZvdGVyLCBieXRlczMyIGJhbGxvdCk7CiAgICBldmVudCBTZWNrZXlSZXZlYWxlZChieXRlczMyIHNlY3JldEtleSk7CiAgICBldmVudCBUZXN0aW5nRW5hYmxlZCgpOwogICAgZXZlbnQgRXJyb3Ioc3RyaW5nIGVycm9yKTsKICAgIGV2ZW50IERlcHJlY2F0ZWRDb250cmFjdCgpOwogICAgZXZlbnQgU2V0T3duZXIoYWRkcmVzcyBfb3duZXIpOwoKCiAgICAvLy8vICoqIE1vZGlmaWVycwoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGJhbGxvdE9wZW4gewogICAgICAgIHJlcXVpcmUodWludDY0KGJsb2NrLnRpbWVzdGFtcCkgPj0gc3RhcnRUaW1lICYmIHVpbnQ2NChibG9jay50aW1lc3RhbXApIDwgZW5kVGltZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5VGVzdGluZyB7CiAgICAgICAgcmVxdWlyZSh0ZXN0TW9kZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpc1RydWUoYm9vbCBfYikgewogICAgICAgIHJlcXVpcmUoX2IgPT0gdHJ1ZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpc0ZhbHNlKGJvb2wgX2IpIHsKICAgICAgICByZXF1aXJlKF9iID09IGZhbHNlKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLy8gKiogRnVuY3Rpb25zCgogICAgdWludDE2IGNvbnN0YW50IEZfVVNFX0VOQyA9IDA7CiAgICB1aW50MTYgY29uc3RhbnQgRl9URVNUSU5HID0gMTsKICAgIC8vIENvbnN0cnVjdG9yIGZ1bmN0aW9uIC0gaW5pdCBjb3JlIHBhcmFtcyBvbiBkZXBsb3kKICAgIC8vIHRpbWVzdGFtcHRzIGFyZSB1aW50NjRzIHRvIGdpdmUgdXMgcGxlbnR5IG9mIHJvb20gZm9yIG1pbGxlbm5pYQogICAgLy8gZmxhZ3MgYXJlIFtfdXNlRW5jcnlwdGlvbiwgZW5hYmxlVGVzdGluZ10KICAgIGZ1bmN0aW9uIFNWTGlnaHRCYWxsb3RCb3goYnl0ZXMzMiBfc3BlY0hhc2gsIHVpbnQ2NFsyXSBvcGVuUGVyaW9kLCBib29sWzJdIGZsYWdzKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKCiAgICAgICAgLy8gdGFrZSB0aGUgbWF4IG9mIHRoZSBzdGFydCB0aW1lIHByb3ZpZGVkIGFuZCB0aGUgYmxvY2tzIHRpbWVzdGFtcCB0byBhdm9pZCBhIERvUyBhZ2FpbnN0IHJlY2VudCB0b2tlbiBob2xkZXJzCiAgICAgICAgLy8gKHdoaWNoIHNvbWVvbmUgbWlnaHQgYmUgYWJsZSB0byBkbyBpZiB0aGV5IGNvdWxkIHNldCB0aGUgdGltZXN0YW1wIGluIHRoZSBwYXN0KQogICAgICAgIHN0YXJ0VGltZSA9IG1heChvcGVuUGVyaW9kWzBdLCB1aW50NjQoYmxvY2sudGltZXN0YW1wKSk7CiAgICAgICAgZW5kVGltZSA9IG9wZW5QZXJpb2RbMV07CiAgICAgICAgdXNlRW5jcnlwdGlvbiA9IGZsYWdzW0ZfVVNFX0VOQ107CiAgICAgICAgc3BlY0hhc2ggPSBfc3BlY0hhc2g7CiAgICAgICAgY3JlYXRpb25CbG9jayA9IHVpbnQ2NChibG9jay5udW1iZXIpOwogICAgICAgIC8vIGFkZCBhIHJvdWdoIHByZWRpY3Rpb24gb2Ygd2hhdCBibG9jayBpcyB0aGUgc3RhcnRpbmcgYmxvY2sKICAgICAgICBzdGFydGluZ0Jsb2NrQXJvdW5kID0gdWludDY0KChzdGFydFRpbWUgLSBibG9jay50aW1lc3RhbXApIC8gMTUgKyBibG9jay5udW1iZXIpOwoKICAgICAgICBpZiAoZmxhZ3NbRl9URVNUSU5HXSkgewogICAgICAgICAgICB0ZXN0TW9kZSA9IHRydWU7CiAgICAgICAgICAgIFRlc3RpbmdFbmFibGVkKCk7CiAgICAgICAgfQoKICAgICAgICBDcmVhdGVkQmFsbG90KG1zZy5zZW5kZXIsIFtzdGFydFRpbWUsIGVuZFRpbWVdLCB1c2VFbmNyeXB0aW9uLCBzcGVjSGFzaCk7CiAgICB9CgogICAgLy8gQmFsbG90IHN1Ym1pc3Npb24KICAgIGZ1bmN0aW9uIHN1Ym1pdEJhbGxvdFdpdGhQayhieXRlczMyIGVuY3J5cHRlZEJhbGxvdCwgYnl0ZXMzMiBzZW5kZXJQdWJrZXkpIGlzVHJ1ZSh1c2VFbmNyeXB0aW9uKSBiYWxsb3RPcGVuIHB1YmxpYyB7CiAgICAgICAgYWRkQmFsbG90QW5kVm90ZXJXaXRoUGsoZW5jcnlwdGVkQmFsbG90LCBzZW5kZXJQdWJrZXkpOwogICAgICAgIFN1Y2Nlc3NmdWxQa1ZvdGUobXNnLnNlbmRlciwgZW5jcnlwdGVkQmFsbG90LCBzZW5kZXJQdWJrZXkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Ym1pdEJhbGxvdE5vUGsoYnl0ZXMzMiBiYWxsb3QpIGlzRmFsc2UodXNlRW5jcnlwdGlvbikgYmFsbG90T3BlbiBwdWJsaWMgewogICAgICAgIGFkZEJhbGxvdEFuZFZvdGVyTm9QayhiYWxsb3QpOwogICAgICAgIFN1Y2Nlc3NmdWxWb3RlKG1zZy5zZW5kZXIsIGJhbGxvdCk7CiAgICB9CgogICAgLy8gSW50ZXJuYWwgZnVuY3Rpb24gdG8gZW5zdXJlIGF0b21pY2l0eSBvZiB2b3RlciBsb2cKICAgIGZ1bmN0aW9uIGFkZEJhbGxvdEFuZFZvdGVyV2l0aFBrKGJ5dGVzMzIgZW5jcnlwdGVkQmFsbG90LCBieXRlczMyIHNlbmRlclB1YmtleSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQyNTYgYmFsbG90TnVtYmVyID0gYWRkQmFsbG90QW5kVm90ZXJOb1BrKGVuY3J5cHRlZEJhbGxvdCk7CiAgICAgICAgYXNzb2NpYXRlZFB1YmtleXNbYmFsbG90TnVtYmVyXSA9IHNlbmRlclB1YmtleTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRCYWxsb3RBbmRWb3Rlck5vUGsoYnl0ZXMzMiBlbmNyeXB0ZWRCYWxsb3QpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGJhbGxvdE51bWJlciA9IG5Wb3Rlc0Nhc3Q7CiAgICAgICAgYmFsbG90TWFwW2JhbGxvdE51bWJlcl0gPSBCYWxsb3QoZW5jcnlwdGVkQmFsbG90LCBtc2cuc2VuZGVyLCB1aW50MzIoYmxvY2subnVtYmVyKSk7CiAgICAgICAgdm90ZXJUb0JhbGxvdElEW21zZy5zZW5kZXJdID0gYmFsbG90TnVtYmVyOwogICAgICAgIG5Wb3Rlc0Nhc3QgKz0gMTsKICAgICAgICByZXR1cm4gYmFsbG90TnVtYmVyOwogICAgfQoKICAgIC8vIEFsbG93IHRoZSBvd25lciB0byByZXZlYWwgdGhlIHNlY3JldCBrZXkgYWZ0ZXIgYmFsbG90IGNvbmNsdXNpb24KICAgIGZ1bmN0aW9uIHJldmVhbFNlY2tleShieXRlczMyIF9zZWNLZXkpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoYmxvY2sudGltZXN0YW1wID4gZW5kVGltZSk7CgogICAgICAgIGJhbGxvdEVuY3J5cHRpb25TZWNrZXkgPSBfc2VjS2V5OwogICAgICAgIHNlY2tleVJldmVhbGVkID0gdHJ1ZTsgLy8gdGhpcyBmbGFnIGFsbG93cyB0aGUgY29udHJhY3QgdG8gYmUgbG9ja2VkCiAgICAgICAgU2Vja2V5UmV2ZWFsZWQoX3NlY0tleSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RW5jU2Vja2V5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzMzIpIHsKICAgICAgICByZXR1cm4gYmFsbG90RW5jcnlwdGlvblNlY2tleTsKICAgIH0KCiAgICAvLyBUZXN0IGZ1bmN0aW9ucwogICAgZnVuY3Rpb24gc2V0RW5kVGltZSh1aW50NjQgbmV3RW5kVGltZSkgb25seVRlc3Rpbmcgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgZW5kVGltZSA9IG5ld0VuZFRpbWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0RGVwcmVjYXRlZCgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGRlcHJlY2F0ZWQgPSB0cnVlOwogICAgICAgIERlcHJlY2F0ZWRDb250cmFjdCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldE93bmVyKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgU2V0T3duZXIobmV3T3duZXIpOwogICAgfQoKICAgIC8vIHV0aWxzCiAgICBmdW5jdGlvbiBtYXgodWludDY0IGEsIHVpbnQ2NCBiKSBwdXJlIGludGVybmFsIHJldHVybnModWludDY0KSB7CiAgICAgICAgaWYgKGEgPiBiKSB7CiAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYjsKICAgIH0KfQoKCi8vCi8vIFRoZSBJbmRleCBieSB3aGljaCBkZW1vY3JhY2llcyBhbmQgYmFsbG90cyBhcmUgdHJhY2tlZCAoYW5kIG9wdGlvbmFsbHkgZGVwbG95ZWQpLgovLyBBdXRob3I6IE1heCBLYXllIDw8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iZDRiOWI1YWM5NGE3YjFiN2ExYTZiMWZhYTJiYmEwYjEiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgovLyBMaWNlbnNlOiBNSVQKLy8KCmNvbnRyYWN0IFNWTGlnaHRJbmRleCB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgc3RydWN0IEJhbGxvdCB7CiAgICAgICAgYnl0ZXMzMiBzcGVjSGFzaDsKICAgICAgICBieXRlczMyIGV4dHJhRGF0YTsKICAgICAgICBhZGRyZXNzIHZvdGluZ0NvbnRyYWN0OwogICAgICAgIHVpbnQ2NCBzdGFydFRzOwogICAgfQoKICAgIHN0cnVjdCBEZW1vYyB7CiAgICAgICAgc3RyaW5nIG5hbWU7CiAgICAgICAgYWRkcmVzcyBhZG1pbjsKICAgICAgICBCYWxsb3RbXSBiYWxsb3RzOwogICAgfQoKICAgIG1hcHBpbmcgKGJ5dGVzMzIgPT4gRGVtb2MpIHB1YmxpYyBkZW1vY3M7CiAgICBieXRlczMyW10gcHVibGljIGRlbW9jTGlzdDsKCiAgICAvLyBhZGRyZXNzZXMgdGhhdCBkbyBub3QgaGF2ZSB0byBwYXkgZm9yIGRlbW9jcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgZGVtb2NXaGl0ZWxpc3Q7CiAgICAvLyBkZW1vY3MgdGhhdCBkbyBub3QgaGF2ZSB0byBwYXkgZm9yIGlzc3VlcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgYmFsbG90V2hpdGVsaXN0OwoKICAgIC8vIHBheW1lbnQgZGV0YWlscwogICAgYWRkcmVzcyBwdWJsaWMgcGF5VG87CiAgICAvLyB1aW50MTI4J3MgdXNlZCBiZWNhdXNlIHRoZXkgYWNjb3VudCBmb3IgYW1vdW50cyB1cCB0byAzLjRlMzggd2VpIG9yIDMuNGUyMCBldGhlcgogICAgdWludDEyOCBwdWJsaWMgZGVtb2NGZWUgPSAwLjA1IGV0aGVyOyAvLyAwLjA1IGV0aGVyOyBhYm91dCAkNTAgYXQgMyBNYXJjaCAyMDE4CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQxMjgpIGRlbW9jRmVlRm9yOwogICAgdWludDEyOCBwdWJsaWMgYmFsbG90RmVlID0gMC4wMSBldGhlcjsgLy8gMC4wMSBldGhlcjsgYWJvdXQgJDEwIGF0IDMgTWFyY2ggMjAxOAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MTI4KSBiYWxsb3RGZWVGb3I7CiAgICBib29sIHB1YmxpYyBwYXltZW50RW5hYmxlZCA9IHRydWU7CgogICAgdWludDggY29uc3RhbnQgUEFZX0RFTU9DID0gMDsKICAgIHVpbnQ4IGNvbnN0YW50IFBBWV9CQUxMT1QgPSAxOwoKICAgIGZ1bmN0aW9uIGdldFBheW1lbnRQYXJhbXModWludDggcGF5bWVudFR5cGUpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wsIHVpbnQxMjgsIHVpbnQxMjgpIHsKICAgICAgICBpZiAocGF5bWVudFR5cGUgPT0gUEFZX0RFTU9DKSB7CiAgICAgICAgICAgIHJldHVybiAoZGVtb2NXaGl0ZWxpc3RbbXNnLnNlbmRlcl0sIGRlbW9jRmVlLCBkZW1vY0ZlZUZvclttc2cuc2VuZGVyXSk7CiAgICAgICAgfSBlbHNlIGlmIChwYXltZW50VHlwZSA9PSBQQVlfQkFMTE9UKSB7CiAgICAgICAgICAgIHJldHVybiAoYmFsbG90V2hpdGVsaXN0W21zZy5zZW5kZXJdLCBiYWxsb3RGZWUsIGJhbGxvdEZlZUZvclttc2cuc2VuZGVyXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYXNzZXJ0KGZhbHNlKTsKICAgICAgICB9CiAgICB9CgogICAgLy8qIEVWRU5UUyAvCgogICAgZXZlbnQgUGF5bWVudE1hZGUodWludDEyOFsyXSB2YWxBbmRSZW1haW5kZXIpOwogICAgZXZlbnQgRGVtb2NJbml0KHN0cmluZyBuYW1lLCBieXRlczMyIGRlbW9jSGFzaCwgYWRkcmVzcyBhZG1pbik7CiAgICBldmVudCBCYWxsb3RJbml0KGJ5dGVzMzIgc3BlY0hhc2gsIHVpbnQ2NFsyXSBvcGVuUGVyaW9kLCBib29sWzJdIGZsYWdzKTsKICAgIGV2ZW50IEJhbGxvdEFkZGVkKGJ5dGVzMzIgZGVtb2NIYXNoLCBieXRlczMyIHNwZWNIYXNoLCBieXRlczMyIGV4dHJhRGF0YSwgYWRkcmVzcyB2b3RpbmdDb250cmFjdCk7CiAgICBldmVudCBTZXRGZWVzKHVpbnQxMjhbMl0gX25ld0ZlZXMpOwogICAgZXZlbnQgUGF5bWVudEVuYWJsZWQoYm9vbCBfZmVlRW5hYmxlZCk7CgogICAgLy8qIE1PRElGSUVSUyAvCgogICAgbW9kaWZpZXIgb25seUJ5KGFkZHJlc3MgX2FjY291bnQpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gX2FjY291bnQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgcGF5UmVxKHVpbnQ4IHBheW1lbnRUeXBlKSB7CiAgICAgICAgLy8gZ2V0IG91ciB3aGl0ZWxpc3QsIGdlbmVyYWxGZWUsIGFuZCBmZWUncyBmb3IgcGFydGljdWxhciBhZGRyZXNzZXMKICAgICAgICBib29sIHdsOwogICAgICAgIHVpbnQxMjggZ2VuRmVlOwogICAgICAgIHVpbnQxMjggZmVlRm9yOwogICAgICAgICh3bCwgZ2VuRmVlLCBmZWVGb3IpID0gZ2V0UGF5bWVudFBhcmFtcyhwYXltZW50VHlwZSk7CiAgICAgICAgLy8gaW5pdCB2IHRvIHNvbWV0aGluZyBsYXJnZSBpbiBjYXNlIG9mIGV4cGxvaXQgb3Igc29tZXRoaW5nCiAgICAgICAgdWludDEyOCB2ID0gMTAwMCBldGhlcjsKICAgICAgICAvLyBjaGVjayB3aGl0ZWxpc3RzIC0gZG8gbm90IHJlcXVpcmUgcGF5bWVudCBpbiBzb21lIGNhc2VzCiAgICAgICAgaWYgKHBheW1lbnRFbmFibGVkICYmICF3bCkgewogICAgICAgICAgICB2ID0gZmVlRm9yOwogICAgICAgICAgICBpZiAodiA9PSAwKXsKICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm8gZmVlIGZvciB0aGUgaW5kaXZpZHVhbCB1c2VyIHRoZW4gc2V0IGl0IHRvIHRoZSBnZW5lcmFsIGZlZQogICAgICAgICAgICAgICAgdiA9IGdlbkZlZTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSB2KTsKCiAgICAgICAgICAgIC8vIGhhbmRsZSBwYXltZW50cwogICAgICAgICAgICB1aW50MTI4IHJlbWFpbmRlciA9IHVpbnQxMjgobXNnLnZhbHVlKSAtIHY7CiAgICAgICAgICAgIHBheVRvLnRyYW5zZmVyKHYpOyAvLyAudHJhbnNmZXIgc28gaXQgdGhyb3dzIG9uIGZhaWx1cmUKICAgICAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQocmVtYWluZGVyKSl7CiAgICAgICAgICAgICAgICBwYXlUby50cmFuc2ZlcihyZW1haW5kZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIFBheW1lbnRNYWRlKFt2LCByZW1haW5kZXJdKTsKICAgICAgICB9CgogICAgICAgIC8vIGRvIG1haW4KICAgICAgICBfOwogICAgfQoKCiAgICAvLyogRlVOQ1RJT05TIC8KCgogICAgLy8gY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIFNWTGlnaHRJbmRleCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHBheVRvID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvLyogR0xPQkFMIElORk8gKi8KCiAgICBmdW5jdGlvbiBuRGVtb2NzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gZGVtb2NMaXN0Lmxlbmd0aDsKICAgIH0KCiAgICAvLyogUEFZTUVOVCBBTkQgT1dORVIgRlVOQ1RJT05TICovCgogICAgZnVuY3Rpb24gc2V0UGF5VG8oYWRkcmVzcyBuZXdQYXlUbykgb25seUJ5KG93bmVyKSBwdWJsaWMgewogICAgICAgIHBheVRvID0gbmV3UGF5VG87CiAgICB9CgogICAgZnVuY3Rpb24gc2V0RXRoKHVpbnQxMjhbMl0gbmV3RmVlcykgb25seUJ5KG93bmVyKSBwdWJsaWMgewogICAgICAgIGRlbW9jRmVlID0gbmV3RmVlc1tQQVlfREVNT0NdOwogICAgICAgIGJhbGxvdEZlZSA9IG5ld0ZlZXNbUEFZX0JBTExPVF07CiAgICAgICAgU2V0RmVlcyhbZGVtb2NGZWUsIGJhbGxvdEZlZV0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldE93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5Qnkob3duZXIpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBfb3duZXI7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UGF5bWVudEVuYWJsZWQoYm9vbCBfZW5hYmxlZCkgb25seUJ5KG93bmVyKSBwdWJsaWMgewogICAgICAgIHBheW1lbnRFbmFibGVkID0gX2VuYWJsZWQ7CiAgICAgICAgUGF5bWVudEVuYWJsZWQoX2VuYWJsZWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFdoaXRlbGlzdERlbW9jKGFkZHJlc3MgYWRkciwgYm9vbCBfZnJlZSkgb25seUJ5KG93bmVyKSBwdWJsaWMgewogICAgICAgIGRlbW9jV2hpdGVsaXN0W2FkZHJdID0gX2ZyZWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0V2hpdGVsaXN0QmFsbG90KGFkZHJlc3MgYWRkciwgYm9vbCBfZnJlZSkgb25seUJ5KG93bmVyKSBwdWJsaWMgewogICAgICAgIGJhbGxvdFdoaXRlbGlzdFthZGRyXSA9IF9mcmVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEZlZUZvcihhZGRyZXNzIGFkZHIsIHVpbnQxMjhbMl0gZmVlcykgb25seUJ5KG93bmVyKSBwdWJsaWMgewogICAgICAgIGRlbW9jRmVlRm9yW2FkZHJdID0gZmVlc1tQQVlfREVNT0NdOwogICAgICAgIGJhbGxvdEZlZUZvclthZGRyXSA9IGZlZXNbUEFZX0JBTExPVF07CiAgICB9CgogICAgLy8qIERFTU9DUkFDWSBGVU5DVElPTlMgLSBJTkRJVklEVUFMICovCgogICAgZnVuY3Rpb24gaW5pdERlbW9jKHN0cmluZyBkZW1vY05hbWUpIHBheVJlcShQQVlfREVNT0MpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKGJ5dGVzMzIpIHsKICAgICAgICBieXRlczMyIGRlbW9jSGFzaCA9IGtlY2NhazI1NihkZW1vY05hbWUsIG1zZy5zZW5kZXIsIGRlbW9jTGlzdC5sZW5ndGgsIHRoaXMpOwogICAgICAgIGRlbW9jTGlzdC5wdXNoKGRlbW9jSGFzaCk7CiAgICAgICAgZGVtb2NzW2RlbW9jSGFzaF0ubmFtZSA9IGRlbW9jTmFtZTsKICAgICAgICBkZW1vY3NbZGVtb2NIYXNoXS5hZG1pbiA9IG1zZy5zZW5kZXI7CiAgICAgICAgRGVtb2NJbml0KGRlbW9jTmFtZSwgZGVtb2NIYXNoLCBtc2cuc2VuZGVyKTsKICAgICAgICByZXR1cm4gZGVtb2NIYXNoOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldERlbW9jSW5mbyhieXRlczMyIGRlbW9jSGFzaCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBuYW1lLCBhZGRyZXNzIGFkbWluLCB1aW50MjU2IG5CYWxsb3RzKSB7CiAgICAgICAgcmV0dXJuIChkZW1vY3NbZGVtb2NIYXNoXS5uYW1lLCBkZW1vY3NbZGVtb2NIYXNoXS5hZG1pbiwgZGVtb2NzW2RlbW9jSGFzaF0uYmFsbG90cy5sZW5ndGgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEFkbWluKGJ5dGVzMzIgZGVtb2NIYXNoLCBhZGRyZXNzIG5ld0FkbWluKSBvbmx5QnkoZGVtb2NzW2RlbW9jSGFzaF0uYWRtaW4pIHB1YmxpYyB7CiAgICAgICAgZGVtb2NzW2RlbW9jSGFzaF0uYWRtaW4gPSBuZXdBZG1pbjsKICAgIH0KCiAgICBmdW5jdGlvbiBuQmFsbG90cyhieXRlczMyIGRlbW9jSGFzaCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gZGVtb2NzW2RlbW9jSGFzaF0uYmFsbG90cy5sZW5ndGg7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TnRoQmFsbG90KGJ5dGVzMzIgZGVtb2NIYXNoLCB1aW50MjU2IG4pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChieXRlczMyIHNwZWNIYXNoLCBieXRlczMyIGV4dHJhRGF0YSwgYWRkcmVzcyB2b3RpbmdDb250cmFjdCwgdWludDY0IHN0YXJ0VGltZSkgewogICAgICAgIHJldHVybiAoZGVtb2NzW2RlbW9jSGFzaF0uYmFsbG90c1tuXS5zcGVjSGFzaCwgZGVtb2NzW2RlbW9jSGFzaF0uYmFsbG90c1tuXS5leHRyYURhdGEsIGRlbW9jc1tkZW1vY0hhc2hdLmJhbGxvdHNbbl0udm90aW5nQ29udHJhY3QsIGRlbW9jc1tkZW1vY0hhc2hdLmJhbGxvdHNbbl0uc3RhcnRUcyk7CiAgICB9CgogICAgLy8qIEFERCBCQUxMT1QgVE8gUkVDT1JEICovCgogICAgZnVuY3Rpb24gX2NvbW1pdEJhbGxvdChieXRlczMyIGRlbW9jSGFzaCwgYnl0ZXMzMiBzcGVjSGFzaCwgYnl0ZXMzMiBleHRyYURhdGEsIGFkZHJlc3Mgdm90aW5nQ29udHJhY3QsIHVpbnQ2NCBzdGFydFRzKSBpbnRlcm5hbCB7CiAgICAgICAgZGVtb2NzW2RlbW9jSGFzaF0uYmFsbG90cy5wdXNoKEJhbGxvdChzcGVjSGFzaCwgZXh0cmFEYXRhLCB2b3RpbmdDb250cmFjdCwgc3RhcnRUcykpOwogICAgICAgIEJhbGxvdEFkZGVkKGRlbW9jSGFzaCwgc3BlY0hhc2gsIGV4dHJhRGF0YSwgdm90aW5nQ29udHJhY3QpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZEJhbGxvdChieXRlczMyIGRlbW9jSGFzaCwgYnl0ZXMzMiBleHRyYURhdGEsIGFkZHJlc3Mgdm90aW5nQ29udHJhY3QpCiAgICAgICAgICAgICAgICAgICAgICBvbmx5QnkoZGVtb2NzW2RlbW9jSGFzaF0uYWRtaW4pCiAgICAgICAgICAgICAgICAgICAgICBwYXlSZXEoUEFZX0JBTExPVCkKICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYwogICAgICAgICAgICAgICAgICAgICAgcGF5YWJsZQogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgIFNWTGlnaHRCYWxsb3RCb3ggYmIgPSBTVkxpZ2h0QmFsbG90Qm94KHZvdGluZ0NvbnRyYWN0KTsKICAgICAgICBieXRlczMyIHNwZWNIYXNoID0gYmIuc3BlY0hhc2goKTsKICAgICAgICB1aW50NjQgc3RhcnRUcyA9IGJiLnN0YXJ0VGltZSgpOwogICAgICAgIF9jb21taXRCYWxsb3QoZGVtb2NIYXNoLCBzcGVjSGFzaCwgZXh0cmFEYXRhLCB2b3RpbmdDb250cmFjdCwgc3RhcnRUcyk7CiAgICB9CgogICAgZnVuY3Rpb24gZGVwbG95QmFsbG90KGJ5dGVzMzIgZGVtb2NIYXNoLCBieXRlczMyIHNwZWNIYXNoLCBieXRlczMyIGV4dHJhRGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50NjRbMl0gb3BlblBlcmlvZCwgYm9vbFsyXSBmbGFncykKICAgICAgICAgICAgICAgICAgICAgICAgICBvbmx5QnkoZGVtb2NzW2RlbW9jSGFzaF0uYWRtaW4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5UmVxKFBBWV9CQUxMT1QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHBheWFibGUgewogICAgICAgIC8vIHRoZSBzdGFydCB0aW1lIGlzIG1heChzdGFydFRpbWUsIGJsb2NrLnRpbWVzdGFtcCkgdG8gYXZvaWQgYSBEb1Mgd2hlcmVieSBhIG1hbGljaW91cyBlbGVjdGlvbmVlciBjb3VsZCBkaXNlbmZyYW5jaGlzZQogICAgICAgIC8vIHRva2VuIGhvbGRlcnMgd2hvIGhhdmUgcmVjZW50bHkgYWNxdWlyZWQgdG9rZW5zLgogICAgICAgIHVpbnQ2NCBzdGFydFRzID0gbWF4KG9wZW5QZXJpb2RbMF0sIHVpbnQ2NChibG9jay50aW1lc3RhbXApKTsKICAgICAgICBTVkxpZ2h0QmFsbG90Qm94IHZvdGluZ0NvbnRyYWN0ID0gbmV3IFNWTGlnaHRCYWxsb3RCb3goc3BlY0hhc2gsIFtzdGFydFRzLCBvcGVuUGVyaW9kWzFdXSwgZmxhZ3MpOwogICAgICAgIHZvdGluZ0NvbnRyYWN0LnNldE93bmVyKG1zZy5zZW5kZXIpOwogICAgICAgIF9jb21taXRCYWxsb3QoZGVtb2NIYXNoLCBzcGVjSGFzaCwgZXh0cmFEYXRhLCBhZGRyZXNzKHZvdGluZ0NvbnRyYWN0KSwgc3RhcnRUcyk7CiAgICAgICAgQmFsbG90SW5pdChzcGVjSGFzaCwgW3N0YXJ0VHMsIG9wZW5QZXJpb2RbMV1dLCBmbGFncyk7CiAgICB9CgogICAgLy8gdXRpbHMKICAgIGZ1bmN0aW9uIG1heCh1aW50NjQgYSwgdWludDY0IGIpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyh1aW50NjQpIHsKICAgICAgICBpZiAoYSA+IGIpIHsKICAgICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgfQogICAgICAgIHJldHVybiBiOwogICAgfQp9'.
	

]
