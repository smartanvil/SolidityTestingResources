Class {
	#name : #SRT44cba3a62a15ac8f66ff75bf7abd058dcca7d7ed,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT44cba3a62a15ac8f66ff75bf7abd058dcca7d7ed >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgovKiBFUkMyMCBjb250cmFjdCBpbnRlcmZhY2UgKi8KLyogV2l0aCBFUkMyMy9FUkMyMjMgRXh0ZW5zaW9ucyAqLwovKiBGdWxseSBiYWNrd2FyZCBjb21wYXRpYmxlIHdpdGggRVJDMjAgKi8KLyogUmVjb21tZW5kZWQgaW1wbGVtZW50YXRpb24gdXNlZCBhdCBodHRwczovL2dpdGh1Yi5jb20vRGV4YXJhbi9FUkMyMjMtdG9rZW4tc3RhbmRhcmQvdHJlZS9SZWNvbW1lbmRlZCAqLwpjb250cmFjdCBFUkMyMCB7CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICAvLyBFUkMyMjMgYW5kIEVSQzIwIGZ1bmN0aW9ucyBhbmQgZXZlbnRzCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgX3N1cHBseSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhLCBzdHJpbmcgY3VzdG9tRmFsbGJhY2spIHB1YmxpYyByZXR1cm5zIChib29sIG9rKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUsIGJ5dGVzIGluZGV4ZWQgZGF0YSk7CgogICAgLy8gRVJDMjIzIGZ1bmN0aW9ucwogICAgZnVuY3Rpb24gbmFtZSgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChzdHJpbmcgX25hbWUpOwogICAgZnVuY3Rpb24gc3ltYm9sKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHN0cmluZyBfc3ltYm9sKTsKICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscyk7CgogICAgLy8gRVJDMjAgZnVuY3Rpb25zIGFuZCBldmVudHMKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOwp9CgovKioKICogSW5jbHVkZSBTYWZlTWF0aCBMaWIKICovCmNvbnRyYWN0IFNhZmVNYXRoIHsKICAgIHVpbnQyNTYgY29uc3RhbnQgcHVibGljIE1BWF9VSU5UMjU2ID0KICAgIDB4RkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRjsKCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBpZiAoeCA+IE1BWF9VSU5UMjU2IC0geSkKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgcmV0dXJuIHggKyB5OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVTdWIodWludDI1NiB4LCB1aW50MjU2IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgICAgIGlmICh4IDwgeSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHggLSB5OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVNdWwodWludDI1NiB4LCB1aW50MjU2IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgICAgIGlmICh5ID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIGlmICh4ID4gTUFYX1VJTlQyNTYgLyB5KSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4geCAqIHk7CiAgICB9Cn0KCi8qCiAqIENvbnRyYWN0IHRoYXQgaXMgd29ya2luZyB3aXRoIEVSQzIyMyB0b2tlbnMKICovCiBjb250cmFjdCBDb250cmFjdFJlY2VpdmVyIHsKCiAgICBzdHJ1Y3QgVEtOIHsKICAgICAgICBhZGRyZXNzIHNlbmRlcjsKICAgICAgICB1aW50IHZhbHVlOwogICAgICAgIGJ5dGVzIGRhdGE7CiAgICAgICAgYnl0ZXM0IHNpZzsKICAgIH0KCiAgICBmdW5jdGlvbiB0b2tlbkZhbGxiYWNrKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljIHsKICAgICAgVEtOIG1lbW9yeSB0a247CiAgICAgIHRrbi5zZW5kZXIgPSBfZnJvbTsKICAgICAgdGtuLnZhbHVlID0gX3ZhbHVlOwogICAgICB0a24uZGF0YSA9IF9kYXRhOwogICAgICB1aW50MzIgdSA9IHVpbnQzMihfZGF0YVszXSkgKyAodWludDMyKF9kYXRhWzJdKSA8PCA4KSArICh1aW50MzIoX2RhdGFbMV0pIDw8IDE2KSArICh1aW50MzIoX2RhdGFbMF0pIDw8IDI0KTsKICAgICAgdGtuLnNpZyA9IGJ5dGVzNCh1KTsKCiAgICAgIC8qIHRrbiB2YXJpYWJsZSBpcyBhbmFsb2d1ZSBvZiBtc2cgdmFyaWFibGUgb2YgRXRoZXIgdHJhbnNhY3Rpb24KICAgICAgKiAgdGtuLnNlbmRlciBpcyBwZXJzb24gd2hvIGluaXRpYXRlZCB0aGlzIHRva2VuIHRyYW5zYWN0aW9uICAgKGFuYWxvZ3VlIG9mIG1zZy5zZW5kZXIpCiAgICAgICogIHRrbi52YWx1ZSB0aGUgbnVtYmVyIG9mIHRva2VucyB0aGF0IHdlcmUgc2VudCAgIChhbmFsb2d1ZSBvZiBtc2cudmFsdWUpCiAgICAgICogIHRrbi5kYXRhIGlzIGRhdGEgb2YgdG9rZW4gdHJhbnNhY3Rpb24gICAoYW5hbG9ndWUgb2YgbXNnLmRhdGEpCiAgICAgICogIHRrbi5zaWcgaXMgNCBieXRlcyBzaWduYXR1cmUgb2YgZnVuY3Rpb24KICAgICAgKiAgaWYgZGF0YSBvZiB0b2tlbiB0cmFuc2FjdGlvbiBpcyBhIGZ1bmN0aW9uIGV4ZWN1dGlvbgogICAgICAqLwogICAgfQp9CgovKgogKiBFRE9HRSBpcyBhbiBFUkMyMCB0b2tlbiB3aXRoIEVSQzIyMyBFeHRlbnNpb25zCiAqLwpjb250cmFjdCBFRE9HRSBpcyBFUkMyMCwgU2FmZU1hdGggewoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJlRG9nZWNvaW4iOwoKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkVET0dFIjsKCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSA4OwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5ID0gMTAwMDAwMDAwMDAwICogMTAqKjg7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgYm9vbCBwdWJsaWMgdW5sb2NrZWQgPSBmYWxzZTsKCiAgICBib29sIHB1YmxpYyB0b2tlbkNyZWF0ZWQgPSBmYWxzZTsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgLy8gSW5pdGlhbGl6ZSB0byBoYXZlIG93bmVyIGhhdmUgMTAwLDAwMCwwMDAsMDAwIEVET0dFIG9uIGNvbnRyYWN0IGNyZWF0aW9uCiAgICAvLyBDb25zdHJ1Y3RvciBpcyBjYWxsZWQgb25seSBvbmNlIGFuZCBjYW4gbm90IGJlIGNhbGxlZCBhZ2FpbiAoRXRoZXJldW0gU29saWRpdHkgc3BlY2lmaWNhdGlvbikKICAgIGZ1bmN0aW9uIEVET0dFKCkgcHVibGljIHsKCiAgICAgICAgLy8gU2VjdXJpdHkgY2hlY2sgaW4gY2FzZSBFVk0gaGFzIGZ1dHVyZSBmbGF3IG9yIGV4cGxvaXQgdG8gY2FsbCBjb25zdHJ1Y3RvciBtdWx0aXBsZSB0aW1lcwogICAgICAgIC8vIEVuc3VyZSB0b2tlbiBnZXRzIGNyZWF0ZWQgb25jZSBvbmx5CiAgICAgICAgcmVxdWlyZSh0b2tlbkNyZWF0ZWQgPT0gZmFsc2UpOwogICAgICAgIHRva2VuQ3JlYXRlZCA9IHRydWU7CgogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSB0b3RhbFN1cHBseTsKCiAgICAgICAgLy8gRmluYWwgc2FuaXR5IGNoZWNrIHRvIGVuc3VyZSBvd25lciBiYWxhbmNlIGlzIGdyZWF0ZXIgdGhhbiB6ZXJvCiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tvd25lcl0gPiAwKTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vIEZ1bmN0aW9uIHRvIGRpc3RyaWJ1dGUgdG9rZW5zIHRvIGxpc3Qgb2YgYWRkcmVzc2VzIGJ5IHRoZSBwcm92aWRlZCBhbW91bnQKICAgIC8vIFZlcmlmeSBhbmQgcmVxdWlyZSB0aGF0OgogICAgLy8gLSBCYWxhbmNlIG9mIG93bmVyIGNhbm5vdCBiZSBuZWdhdGl2ZQogICAgLy8gLSBBbGwgdHJhbnNmZXJzIGNhbiBiZSBmdWxmaWxsZWQgd2l0aCByZW1haW5pbmcgb3duZXIgYmFsYW5jZQogICAgLy8gLSBObyBuZXcgdG9rZW5zIGNhbiBldmVyIGJlIG1pbnRlZCBleGNlcHQgb3JpZ2luYWxseSBjcmVhdGVkIDEwMCwwMDAsMDAwLDAwMAogICAgZnVuY3Rpb24gZGlzdHJpYnV0ZUFpcmRyb3AoYWRkcmVzc1tdIGFkZHJlc3NlcywgdWludDI1NiBhbW91bnQpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIC8vIE9ubHkgYWxsb3cgdW5kcm9wIHdoaWxlIHRva2VuIGlzIGxvY2tlZAogICAgICAgIC8vIEFmdGVyIHRva2VuIGlzIHVubG9ja2VkLCB0aGlzIG1ldGhvZCBiZWNvbWVzIHBlcm1hbmVudGx5IGRpc2FibGVkCiAgICAgICAgcmVxdWlyZSghdW5sb2NrZWQpOwoKICAgICAgICAvLyBBbW91bnQgaXMgaW4gV2VpLCBjb252ZXJ0IHRvIEVET0dFIGFtb3VudCBpbiA4IGRlY2ltYWwgcGxhY2VzCiAgICAgICAgdWludDI1NiBub3JtYWxpemVkQW1vdW50ID0gYW1vdW50ICogMTAqKjg7CiAgICAgICAgLy8gT25seSBwcm9jZWVkIGlmIHRoZXJlIGFyZSBlbm91Z2ggdG9rZW5zIHRvIGJlIGRpc3RyaWJ1dGVkIHRvIGFsbCBhZGRyZXNzZXMKICAgICAgICAvLyBOZXZlciBhbGxvdyBiYWxhbmNlIG9mIG93bmVyIHRvIGJlY29tZSBuZWdhdGl2ZQogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbb3duZXJdID49IHNhZmVNdWwoYWRkcmVzc2VzLmxlbmd0aCwgbm9ybWFsaXplZEFtb3VudCkpOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGFkZHJlc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBzYWZlU3ViKGJhbGFuY2VPZihvd25lciksIG5vcm1hbGl6ZWRBbW91bnQpOwogICAgICAgICAgICBiYWxhbmNlc1thZGRyZXNzZXNbaV1dID0gc2FmZUFkZChiYWxhbmNlT2YoYWRkcmVzc2VzW2ldKSwgbm9ybWFsaXplZEFtb3VudCk7CiAgICAgICAgICAgIFRyYW5zZmVyKG93bmVyLCBhZGRyZXNzZXNbaV0sIG5vcm1hbGl6ZWRBbW91bnQpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBGdW5jdGlvbiB0byBhY2Nlc3MgbmFtZSBvZiB0b2tlbiAuc2hhCiAgICBmdW5jdGlvbiBuYW1lKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHN0cmluZyBfbmFtZSkgewogICAgICAgIHJldHVybiBuYW1lOwogICAgfQogICAgLy8gRnVuY3Rpb24gdG8gYWNjZXNzIHN5bWJvbCBvZiB0b2tlbiAuCiAgICBmdW5jdGlvbiBzeW1ib2woKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAoc3RyaW5nIF9zeW1ib2wpIHsKICAgICAgICByZXR1cm4gc3ltYm9sOwogICAgfQogICAgLy8gRnVuY3Rpb24gdG8gYWNjZXNzIGRlY2ltYWxzIG9mIHRva2VuIC4KICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscykgewogICAgICAgIHJldHVybiBkZWNpbWFsczsKICAgIH0KICAgIC8vIEZ1bmN0aW9uIHRvIGFjY2VzcyB0b3RhbCBzdXBwbHkgb2YgdG9rZW5zIC4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KSB7CiAgICAgICAgcmV0dXJuIHRvdGFsU3VwcGx5OwogICAgfQoKICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSB1c2VyIG9yIGFub3RoZXIgY29udHJhY3Qgd2FudHMgdG8gdHJhbnNmZXIgZnVuZHMgLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSwgc3RyaW5nIF9jdXN0b21fZmFsbGJhY2spIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgLy8gT25seSBhbGxvdyB0cmFuc2ZlciBvbmNlIHVubG9ja2VkCiAgICAgICAgLy8gT25jZSBpdCBpcyB1bmxvY2tlZCwgaXQgaXMgdW5sb2NrZWQgZm9yZXZlciBhbmQgbm8gb25lIGNhbiBsb2NrIGFnYWluCiAgICAgICAgcmVxdWlyZSh1bmxvY2tlZCk7CgogICAgICAgIGlmIChpc0NvbnRyYWN0KF90bykpIHsKICAgICAgICAgICAgaWYgKGJhbGFuY2VPZihtc2cuc2VuZGVyKSA8IF92YWx1ZSkgewogICAgICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VPZihtc2cuc2VuZGVyKSwgX3ZhbHVlKTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZU9mKF90byksIF92YWx1ZSk7CiAgICAgICAgICAgIENvbnRyYWN0UmVjZWl2ZXIgcmVjZWl2ZXIgPSBDb250cmFjdFJlY2VpdmVyKF90byk7CiAgICAgICAgICAgIHJlY2VpdmVyLmNhbGwudmFsdWUoMCkoYnl0ZXM0KHNoYTMoX2N1c3RvbV9mYWxsYmFjaykpLCBtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9BZGRyZXNzKF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSB1c2VyIG9yIGFub3RoZXIgY29udHJhY3Qgd2FudHMgdG8gdHJhbnNmZXIgZnVuZHMgLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgLy8gT25seSBhbGxvdyB0cmFuc2ZlciBvbmNlIHVubG9ja2VkCiAgICAgICAgLy8gT25jZSBpdCBpcyB1bmxvY2tlZCwgaXQgaXMgdW5sb2NrZWQgZm9yZXZlciBhbmQgbm8gb25lIGNhbiBsb2NrIGFnYWluCiAgICAgICAgcmVxdWlyZSh1bmxvY2tlZCk7CgogICAgICAgIGlmIChpc0NvbnRyYWN0KF90bykpIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9Db250cmFjdChfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBTdGFuZGFyZCBmdW5jdGlvbiB0cmFuc2ZlciBzaW1pbGFyIHRvIEVSQzIwIHRyYW5zZmVyIHdpdGggbm8gX2RhdGEgLgogICAgLy8gQWRkZWQgZHVlIHRvIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHJlYXNvbnMgLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgICAgIC8vIE9ubHkgYWxsb3cgdHJhbnNmZXIgb25jZSB1bmxvY2tlZAogICAgICAgIC8vIE9uY2UgaXQgaXMgdW5sb2NrZWQsIGl0IGlzIHVubG9ja2VkIGZvcmV2ZXIgYW5kIG5vIG9uZSBjYW4gbG9jayBhZ2FpbgogICAgICAgIHJlcXVpcmUodW5sb2NrZWQpOwoKICAgICAgICAvL3N0YW5kYXJkIGZ1bmN0aW9uIHRyYW5zZmVyIHNpbWlsYXIgdG8gRVJDMjAgdHJhbnNmZXIgd2l0aCBubyBfZGF0YQogICAgICAgIC8vYWRkZWQgZHVlIHRvIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHJlYXNvbnMKICAgICAgICBieXRlcyBtZW1vcnkgZW1wdHk7CiAgICAgICAgaWYgKGlzQ29udHJhY3QoX3RvKSkgewogICAgICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0NvbnRyYWN0KF90bywgX3ZhbHVlLCBlbXB0eSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9BZGRyZXNzKF90bywgX3ZhbHVlLCBlbXB0eSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIGFzc2VtYmxlIHRoZSBnaXZlbiBhZGRyZXNzIGJ5dGVjb2RlLiBJZiBieXRlY29kZSBleGlzdHMgdGhlbiB0aGUgX2FkZHIgaXMgYSBjb250cmFjdC4KICAgIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgcHJpdmF0ZSByZXR1cm5zIChib29sIGlzX2NvbnRyYWN0KSB7CiAgICAgICAgdWludCBsZW5ndGg7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICAvL3JldHJpZXZlIHRoZSBzaXplIG9mIHRoZSBjb2RlIG9uIHRhcmdldCBhZGRyZXNzLCB0aGlzIG5lZWRzIGFzc2VtYmx5CiAgICAgICAgICAgIGxlbmd0aCA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChsZW5ndGggPiAwKTsKICAgIH0KCiAgICAvLyBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhbiBhZGRyZXNzCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvQWRkcmVzcyhhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwcml2YXRlIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlT2YobXNnLnNlbmRlcikgPCBfdmFsdWUpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlT2YobXNnLnNlbmRlciksIF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZU9mKF90byksIF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhIGNvbnRyYWN0CiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvQ29udHJhY3QoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHJpdmF0ZSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZU9mKG1zZy5zZW5kZXIpIDwgX3ZhbHVlKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZU9mKG1zZy5zZW5kZXIpLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZihfdG8pLCBfdmFsdWUpOwogICAgICAgIENvbnRyYWN0UmVjZWl2ZXIgcmVjZWl2ZXIgPSBDb250cmFjdFJlY2VpdmVyKF90byk7CiAgICAgICAgcmVjZWl2ZXIudG9rZW5GYWxsYmFjayhtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEdldCBiYWxhbmNlIG9mIHRoZSBhZGRyZXNzIHByb3ZpZGVkCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAgLy8gQ3JlYXRvci9Pd25lciBjYW4gdW5sb2NrZWQgaXQgb25jZSBhbmQgaXQgY2FuIG5ldmVyIGJlIGxvY2tlZCBhZ2FpbgogICAgIC8vIFVzZSBhZnRlciBhaXJkcm9wIGlzIGNvbXBsZXRlCiAgICBmdW5jdGlvbiB1bmxvY2tGb3JldmVyKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgdW5sb2NrZWQgPSB0cnVlOwogICAgfQoKICAgIC8vIEFsbG93IHRyYW5zZmVycyBpZiB0aGUgb3duZXIgcHJvdmlkZWQgYW4gYWxsb3dhbmNlCiAgICAvLyBQcmV2ZW50IGZyb20gYW55IHRyYW5zZmVycyBpZiB0b2tlbiBpcyBub3QgeWV0IHVubG9ja2VkCiAgICAvLyBVc2UgU2FmZU1hdGggZm9yIHRoZSBtYWluIGxvZ2ljCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy8gT25seSBhbGxvdyB0cmFuc2ZlciBvbmNlIHVubG9ja2VkCiAgICAgICAgLy8gT25jZSBpdCBpcyB1bmxvY2tlZCwgaXQgaXMgdW5sb2NrZWQgZm9yZXZlciBhbmQgbm8gb25lIGNhbiBsb2NrIGFnYWluCiAgICAgICAgcmVxdWlyZSh1bmxvY2tlZCk7CiAgICAgICAgLy8gUHJvdGVjdCBhZ2FpbnN0IHdyYXBwaW5nIHVpbnRzLgogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pOwogICAgICAgIHVpbnQyNTYgYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93YW5jZSA+PSBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZihfdG8pLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZU9mKF9mcm9tKSwgX3ZhbHVlKTsKICAgICAgICBpZiAoYWxsb3dhbmNlIDwgTUFYX1VJTlQyNTYpIHsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgICAgIH0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvLyBPbmx5IGFsbG93IHRyYW5zZmVyIG9uY2UgdW5sb2NrZWQKICAgICAgICAvLyBPbmNlIGl0IGlzIHVubG9ja2VkLCBpdCBpcyB1bmxvY2tlZCBmb3JldmVyIGFuZCBubyBvbmUgY2FuIGxvY2sgYWdhaW4KICAgICAgICByZXF1aXJlKHVubG9ja2VkKTsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KfQ=='.
	

]
