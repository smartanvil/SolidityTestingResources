Class {
	#name : #SRTb23fecec4202b868c228ac0a59cc12a9f93bd605,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb23fecec4202b868c228ac0a59cc12a9f93bd605 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CmNvbnRyYWN0IEVSQzIwVG9rZW4gewogICAgLyogVGhpcyBpcyBhIHNsaWdodCBjaGFuZ2UgdG8gdGhlIEVSQzIwIGJhc2Ugc3RhbmRhcmQuCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKICAgIGlzIHJlcGxhY2VkIHdpdGg6CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIFRoaXMgYXV0b21hdGljYWxseSBjcmVhdGVzIGEgZ2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgdG90YWxTdXBwbHkuCiAgICBUaGlzIGlzIG1vdmVkIHRvIHRoZSBiYXNlIGNvbnRyYWN0IHNpbmNlIHB1YmxpYyBnZXR0ZXIgZnVuY3Rpb25zIGFyZSBub3QKICAgIGN1cnJlbnRseSByZWNvZ25pc2VkIGFzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBtYXRjaGluZyBhYnN0cmFjdAogICAgZnVuY3Rpb24gYnkgdGhlIGNvbXBpbGVyLgogICAgKi8KICAgIC8vLyB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KY29udHJhY3QgU2FmZU1hdGggewogICAgCiAgICAvKgogICAgc3RhbmRhcmQgdWludDI1NiBmdW5jdGlvbnMKICAgICAqLwogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB4ICsgeSkgPj0geCk7CiAgICB9CiAgICBmdW5jdGlvbiBzdWIodWludDI1NiB4LCB1aW50MjU2IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgICAgIGFzc2VydCgoeiA9IHggLSB5KSA8PSB4KTsKICAgIH0KICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgYXNzZXJ0KCh6ID0geCAqIHkpID49IHgpOwogICAgfQogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICB6ID0geCAvIHk7CiAgICB9CiAgICBmdW5jdGlvbiBtaW4odWludDI1NiB4LCB1aW50MjU2IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgICAgIHJldHVybiB4IDw9IHkgPyB4IDogeTsKICAgIH0KICAgIGZ1bmN0aW9uIG1heCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgcmV0dXJuIHggPj0geSA/IHggOiB5OwogICAgfQogICAgLyoKICAgIHVpbnQxMjggZnVuY3Rpb25zIChoIGlzIGZvciBoYWxmKQogICAgICovCiAgICBmdW5jdGlvbiBoYWRkKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB4ICsgeSkgPj0geCk7CiAgICB9CiAgICBmdW5jdGlvbiBoc3ViKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB4IC0geSkgPD0geCk7CiAgICB9CiAgICBmdW5jdGlvbiBobXVsKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB4ICogeSkgPj0geCk7CiAgICB9CiAgICBmdW5jdGlvbiBoZGl2KHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICB6ID0geCAvIHk7CiAgICB9CiAgICBmdW5jdGlvbiBobWluKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICByZXR1cm4geCA8PSB5ID8geCA6IHk7CiAgICB9CiAgICBmdW5jdGlvbiBobWF4KHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICByZXR1cm4geCA+PSB5ID8geCA6IHk7CiAgICB9CiAgICAvKgogICAgaW50MjU2IGZ1bmN0aW9ucwogICAgICovCiAgICBmdW5jdGlvbiBpbWluKGludDI1NiB4LCBpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAoaW50MjU2IHopIHsKICAgICAgICByZXR1cm4geCA8PSB5ID8geCA6IHk7CiAgICB9CiAgICBmdW5jdGlvbiBpbWF4KGludDI1NiB4LCBpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAoaW50MjU2IHopIHsKICAgICAgICByZXR1cm4geCA+PSB5ID8geCA6IHk7CiAgICB9CiAgICAvKgogICAgV0FEIG1hdGgKICAgICAqLwogICAgdWludDEyOCBjb25zdGFudCBXQUQgPSAxMCAqKiAxODsKICAgIGZ1bmN0aW9uIHdhZGQodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjgpIHsKICAgICAgICByZXR1cm4gaGFkZCh4LCB5KTsKICAgIH0KICAgIGZ1bmN0aW9uIHdzdWIodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjgpIHsKICAgICAgICByZXR1cm4gaHN1Yih4LCB5KTsKICAgIH0KICAgIGZ1bmN0aW9uIHdtdWwodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIHogPSBjYXN0KCh1aW50MjU2KHgpICogeSArIFdBRCAvIDIpIC8gV0FEKTsKICAgIH0KICAgIGZ1bmN0aW9uIHdkaXYodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIHogPSBjYXN0KCh1aW50MjU2KHgpICogV0FEICsgeSAvIDIpIC8geSk7CiAgICB9CiAgICBmdW5jdGlvbiB3bWluKHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4KSB7CiAgICAgICAgcmV0dXJuIGhtaW4oeCwgeSk7CiAgICB9CiAgICBmdW5jdGlvbiB3bWF4KHVpbnQxMjggeCwgdWludDEyOCB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4KSB7CiAgICAgICAgcmV0dXJuIGhtYXgoeCwgeSk7CiAgICB9CiAgICAvKgogICAgUkFZIG1hdGgKICAgICAqLwogICAgdWludDEyOCBjb25zdGFudCBSQVkgPSAxMCAqKiAyNzsKICAgIGZ1bmN0aW9uIHJhZGQodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjgpIHsKICAgICAgICByZXR1cm4gaGFkZCh4LCB5KTsKICAgIH0KICAgIGZ1bmN0aW9uIHJzdWIodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjgpIHsKICAgICAgICByZXR1cm4gaHN1Yih4LCB5KTsKICAgIH0KICAgIGZ1bmN0aW9uIHJtdWwodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIHogPSBjYXN0KCh1aW50MjU2KHgpICogeSArIFJBWSAvIDIpIC8gUkFZKTsKICAgIH0KICAgIGZ1bmN0aW9uIHJkaXYodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIHogPSBjYXN0KCh1aW50MjU2KHgpICogUkFZICsgeSAvIDIpIC8geSk7CiAgICB9CiAgICBmdW5jdGlvbiBycG93KHVpbnQxMjggeCwgdWludDY0IG4pIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIC8vIFRoaXMgZmFtb3VzIGFsZ29yaXRobSBpcyBjYWxsZWQgImV4cG9uZW50aWF0aW9uIGJ5IHNxdWFyaW5nIgogICAgICAgIC8vIGFuZCBjYWxjdWxhdGVzIHhebiB3aXRoIHggYXMgZml4ZWQtcG9pbnQgYW5kIG4gYXMgcmVndWxhciB1bnNpZ25lZC4KICAgICAgICAvLwogICAgICAgIC8vIEl0J3MgTyhsb2cgbiksIGluc3RlYWQgb2YgTyhuKSBmb3IgbmFpdmUgcmVwZWF0ZWQgbXVsdGlwbGljYXRpb24uCiAgICAgICAgLy8KICAgICAgICAvLyBUaGVzZSBmYWN0cyBhcmUgd2h5IGl0IHdvcmtzOgogICAgICAgIC8vCiAgICAgICAgLy8gIElmIG4gaXMgZXZlbiwgdGhlbiB4Xm4gPSAoeF4yKV4obi8yKS4KICAgICAgICAvLyAgSWYgbiBpcyBvZGQsICB0aGVuIHhebiA9IHggKiB4XihuLTEpLAogICAgICAgIC8vICAgYW5kIGFwcGx5aW5nIHRoZSBlcXVhdGlvbiBmb3IgZXZlbiB4IGdpdmVzCiAgICAgICAgLy8gICAgeF5uID0geCAqICh4XjIpXigobi0xKSAvIDIpLgogICAgICAgIC8vCiAgICAgICAgLy8gIEFsc28sIEVWTSBkaXZpc2lvbiBpcyBmbG9vcmluZyBhbmQKICAgICAgICAvLyAgICBmbG9vclsobi0xKSAvIDJdID0gZmxvb3JbbiAvIDJdLgogICAgICAgIHogPSBuICUgMiAhPSAwID8geCA6IFJBWTsKICAgICAgICBmb3IgKG4gLz0gMjsgbiAhPSAwOyBuIC89IDIpIHsKICAgICAgICAgICAgeCA9IHJtdWwoeCwgeCk7CiAgICAgICAgICAgIGlmIChuICUgMiAhPSAwKSB7CiAgICAgICAgICAgICAgICB6ID0gcm11bCh6LCB4KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHJtaW4odWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjgpIHsKICAgICAgICByZXR1cm4gaG1pbih4LCB5KTsKICAgIH0KICAgIGZ1bmN0aW9uIHJtYXgodWludDEyOCB4LCB1aW50MTI4IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjgpIHsKICAgICAgICByZXR1cm4gaG1heCh4LCB5KTsKICAgIH0KICAgIGZ1bmN0aW9uIGNhc3QodWludDI1NiB4KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MTI4IHopIHsKICAgICAgICBhc3NlcnQoKHogPSB1aW50MTI4KHgpKSA9PSB4KTsKICAgIH0KfQpjb250cmFjdCBPd25lZCB7CiAgICAvLy8gQGRldiBgb3duZXJgIGlzIHRoZSBvbmx5IGFkZHJlc3MgdGhhdCBjYW4gY2FsbCBhIGZ1bmN0aW9uIHdpdGggdGhpcwogICAgLy8vIG1vZGlmaWVyCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKSA7CiAgICAgICAgXzsKICAgIH0KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgLy8vIEBub3RpY2UgVGhlIENvbnN0cnVjdG9yIGFzc2lnbnMgdGhlIG1lc3NhZ2Ugc2VuZGVyIHRvIGJlIGBvd25lcmAKICAgIGZ1bmN0aW9uIE93bmVkKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwogICAgLy8vIEBub3RpY2UgYG93bmVyYCBjYW4gc3RlcCBkb3duIGFuZCBhc3NpZ24gc29tZSBvdGhlciBhZGRyZXNzIHRvIHRoaXMgcm9sZQogICAgLy8vIEBwYXJhbSBfbmV3T3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBvd25lci4gMHgwIGNhbiBiZSB1c2VkIHRvIGNyZWF0ZQogICAgLy8vICBhbiB1bm93bmVkIG5ldXRyYWwgdmF1bHQsIGhvd2V2ZXIgdGhhdCBjYW5ub3QgYmUgdW5kb25lCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9uZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBuZXdPd25lcikgewogICAgICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIH0KICAgIH0KfQpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwVG9rZW4gewogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLDApYCBpZiBpdCBpcyBub3QKICAgICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICBpZiAoKF92YWx1ZSE9MCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9MCkpIHRocm93OwoKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7Cn0KY29udHJhY3QgQVRNVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duZWQgewogICAgLy8gbWV0YWRhdGEKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJBdHRlbnRpb24gVG9rZW4gb2YgTWVkaWEiOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiQVRNIjsKICAgIHN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICIxLjAiOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSA4OwogICAgYm9vbCBwdWJsaWMgZGlzYWJsZWQ7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGlzQVRNSG9sZGVyOwogICAgYWRkcmVzc1tdIHB1YmxpYyBBVE1Ib2xkZXJzOwogICAgLy8gY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIEFUTVRva2VuKHVpbnQyNTYgX2Ftb3VudCkgewogICAgICAgIHRvdGFsU3VwcGx5ID0gX2Ftb3VudDsgLy/orr7nva7lvZPliY1BVE3lj5HooYzmgLvph48KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IF9hbW91bnQ7CiAgICB9CiAgICBmdW5jdGlvbiBnZXRBVE1Ub3RhbFN1cHBseSgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICAgIHJldHVybiB0b3RhbFN1cHBseTsKICAgIH0KICAgIGZ1bmN0aW9uIGdldEFUTUhvbGRlcnNOdW1iZXIoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gQVRNSG9sZGVycy5sZW5ndGg7CiAgICB9CiAgICAvL+WcqOaVsOaNrui/geenu+aXtizpnIDopoHlhYjlgZzmraJBVE3kuqTmmJMKICAgIGZ1bmN0aW9uIHNldERpc2FibGVkKGJvb2wgZmxhZykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBkaXNhYmxlZCA9IGZsYWc7CiAgICB9CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoIWRpc2FibGVkKTsKICAgICAgICBpZihpc0FUTUhvbGRlcltfdG9dID09IGZhbHNlKXsKICAgICAgICAgICAgaXNBVE1Ib2xkZXJbX3RvXSA9IHRydWU7CiAgICAgICAgICAgIEFUTUhvbGRlcnMucHVzaChfdG8pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSghZGlzYWJsZWQpOwogICAgICAgIGlmKGlzQVRNSG9sZGVyW190b10gPT0gZmFsc2UpewogICAgICAgICAgICBpc0FUTUhvbGRlcltfdG9dID0gdHJ1ZTsKICAgICAgICAgICAgQVRNSG9sZGVycy5wdXNoKF90byk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KICAgIGZ1bmN0aW9uIGtpbGwoKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgICB9Cn0KY29udHJhY3QgQ29udHJpYnV0aW9uIGlzIFNhZmVNYXRoLCBPd25lZCB7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBNSU5fRlVORCA9ICgwLjAxIGV0aGVyKTsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IENSQVdEU0FMRV9TVEFSVF9EQVkgPSAxOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgQ1JBV0RTQUxFX0VORF9EQVkgPSA3OwogICAgdWludDI1NiBwdWJsaWMgZGF5Q3ljbGUgPSAyNCBob3VyczsKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdTdGFydFRpbWUgPSAwOwogICAgYWRkcmVzcyBwdWJsaWMgZXRoRnVuZERlcG9zaXQgPSAwOwogICAgYWRkcmVzcyBwdWJsaWMgaW52ZXN0b3JEZXBvc2l0ID0gMDsKICAgIGJvb2wgcHVibGljIGlzRmluYWxpemUgPSBmYWxzZTsKICAgIGJvb2wgcHVibGljIGlzUGF1c2UgPSBmYWxzZTsKICAgIG1hcHBpbmcgKHVpbnQgPT4gdWludCkgcHVibGljIGRhaWx5VG90YWxzOyAvL3RvdGFsIGV0aCBwZXIgZGF5CiAgICBtYXBwaW5nICh1aW50ID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIHB1YmxpYyB1c2VyQnV5czsgLy8gb3RhbCBldGggcGVyIGRheSBwZXIgdXNlcgogICAgdWludDI1NiBwdWJsaWMgdG90YWxDb250cmlidXRlZEVUSCA9IDA7IC8vdG90YWwgZXRoIG9mIDcgZGF5cwogICAgLy8gZXZlbnRzCiAgICBldmVudCBMb2dCdXkgKHVpbnQgd2luZG93LCBhZGRyZXNzIHVzZXIsIHVpbnQgYW1vdW50KTsKICAgIGV2ZW50IExvZ0NyZWF0ZSAoYWRkcmVzcyBldGhGdW5kRGVwb3NpdCwgYWRkcmVzcyBpbnZlc3RvckRlcG9zaXQsIHVpbnQgZnVuZGluZ1N0YXJ0VGltZSwgdWludCBkYXlDeWNsZSk7CiAgICBldmVudCBMb2dGaW5hbGl6ZSAodWludCBmaW5hbGl6ZVRpbWUpOwogICAgZXZlbnQgTG9nUGF1c2UgKHVpbnQgZmluYWxpemVUaW1lLCBib29sIHBhdXNlKTsKICAgIGZ1bmN0aW9uIENvbnRyaWJ1dGlvbiAoYWRkcmVzcyBfZXRoRnVuZERlcG9zaXQsIGFkZHJlc3MgX2ludmVzdG9yRGVwb3NpdCwgdWludDI1NiBfZnVuZGluZ1N0YXJ0VGltZSwgdWludDI1NiBfZGF5Q3ljbGUpICB7CiAgICAgICAgcmVxdWlyZSggbm93IDwgX2Z1bmRpbmdTdGFydFRpbWUgKTsKICAgICAgICByZXF1aXJlKCBfZXRoRnVuZERlcG9zaXQgIT0gYWRkcmVzcygwKSApOwogICAgICAgIGZ1bmRpbmdTdGFydFRpbWUgPSBfZnVuZGluZ1N0YXJ0VGltZTsKICAgICAgICBkYXlDeWNsZSA9IF9kYXlDeWNsZTsKICAgICAgICBldGhGdW5kRGVwb3NpdCA9IF9ldGhGdW5kRGVwb3NpdDsKICAgICAgICBpbnZlc3RvckRlcG9zaXQgPSBfaW52ZXN0b3JEZXBvc2l0OwogICAgICAgIExvZ0NyZWF0ZShfZXRoRnVuZERlcG9zaXQsIF9pbnZlc3RvckRlcG9zaXQsIF9mdW5kaW5nU3RhcnRUaW1lLF9kYXlDeWNsZSk7CiAgICB9CiAgICAvL2NyYXdkc2FsZSBlbnRyeQogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7ICAKICAgICAgICByZXF1aXJlKCFpc1BhdXNlKTsKICAgICAgICByZXF1aXJlKCFpc0ZpbmFsaXplKTsKICAgICAgICByZXF1aXJlKCBtc2cudmFsdWUgPj0gTUlOX0ZVTkQgKTsgLy9ldGggPj0gMC4wMSBhdCBsZWFzdAogICAgICAgIGV0aEZ1bmREZXBvc2l0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgICAgYnV5KHRvZGF5KCksIG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9CiAgICBmdW5jdGlvbiBpbXBvcnRFeGNoYW5nZVNhbGUodWludDI1NiBkYXksIGFkZHJlc3MgX2V4Y2hhbmdlQWRkciwgdWludCBfYW1vdW50KSBvbmx5T3duZXIgewogICAgICAgIGJ1eShkYXksIF9leGNoYW5nZUFkZHIsIF9hbW91bnQpOwogICAgfQogICAgZnVuY3Rpb24gYnV5KHVpbnQyNTYgZGF5LCBhZGRyZXNzIF9hZGRyLCB1aW50MjU2IF9hbW91bnQpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKCBkYXkgPj0gQ1JBV0RTQUxFX1NUQVJUX0RBWSAmJiBkYXkgPD0gQ1JBV0RTQUxFX0VORF9EQVkgKTsgCiAgICAgICAgLy9yZWNvcmQgdXNlcidzIGJ1eSBhbW91bnQKICAgICAgICB1c2VyQnV5c1tkYXldW19hZGRyXSArPSBfYW1vdW50OwogICAgICAgIGRhaWx5VG90YWxzW2RheV0gKz0gX2Ftb3VudDsKICAgICAgICB0b3RhbENvbnRyaWJ1dGVkRVRIICs9IF9hbW91bnQ7CiAgICAgICAgTG9nQnV5KGRheSwgX2FkZHIsIF9hbW91bnQpOwogICAgfQogICAgZnVuY3Rpb24ga2lsbCgpIG9ubHlPd25lciB7CiAgICAgICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBhdXNlKGJvb2wgX2lzUGF1c2UpIG9ubHlPd25lciB7CiAgICAgICAgaXNQYXVzZSA9IF9pc1BhdXNlOwogICAgICAgIExvZ1BhdXNlKG5vdyxfaXNQYXVzZSk7CiAgICB9CiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIG9ubHlPd25lciB7CiAgICAgICAgaXNGaW5hbGl6ZSA9IHRydWU7CiAgICAgICAgTG9nRmluYWxpemUobm93KTsKICAgIH0KICAgIGZ1bmN0aW9uIHRvZGF5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBzdWIobm93LCBmdW5kaW5nU3RhcnRUaW1lKSAvIGRheUN5Y2xlICsgMTsKICAgIH0KfQpjb250cmFjdCBBVE1pbnQgaXMgU2FmZU1hdGgsIE93bmVkIHsKICAgIEFUTVRva2VuIHB1YmxpYyBhdG1Ub2tlbjsgLy9BVE0gY29udHJhY3QgYWRkcmVzcwogICAgQ29udHJpYnV0aW9uIHB1YmxpYyBjb250cmlidXRpb247IC8vY3Jhd2RTYWxlIGNvbnRyYWN0IGFkZHJlc3MKICAgIHVpbnQxMjggcHVibGljIGZ1bmRpbmdTdGFydFRpbWUgPSAwOwogICAgdWludDI1NiBwdWJsaWMgbG9ja1N0YXJ0VGltZSA9IDA7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IE1JTl9GVU5EID0gKDAuMDEgZXRoZXIpOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgQ1JBV0RTQUxFX1NUQVJUX0RBWSA9IDE7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBDUkFXRFNBTEVfRUFSTFlCSVJEX0VORF9EQVkgPSAzOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgQ1JBV0RTQUxFX0VORF9EQVkgPSA3OwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgVEhBV19DWUNMRV9VU0VSID0gNi8qNiovOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgVEhBV19DWUNMRV9GVU5ERVIgPSA2Lyo2MCovOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgVEhBV19DWUNMRV9MRU5HVEggPSAzMDsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gODsgLy9BVE0gdG9rZW4gZGVjaW1hbHMKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IE1JTExJT04gPSAoMTAqKjYgKiAxMCoqZGVjaW1hbHMpOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5Ub3RhbCA9IDEwMDAwICogTUlMTElPTjsgIC8vIDEwMCBiaWxsaW9uCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlblRvRm91bmRlciA9IDgwMCAqIE1JTExJT047ICAvLyA4IGJpbGxpb24KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuVG9SZXNlcnZlID0gNTAwMCAqIE1JTExJT047ICAvLyA1MCBiaWxsaW9uCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlblRvQ29udHJpYnV0b3IgPSA0MDAwICogTUlMTElPTjsgLy8gNDAgYmlsbGlvbgogICAgdWludDI1NltdIHB1YmxpYyB0b2tlblRvUmV3YXJkID0gWzAsICgxMjAgKiBNSUxMSU9OKSwgKDUwICogTUlMTElPTiksICgzMCAqIE1JTExJT04pLCAwLCAwLCAwLCAwXTsgLy8gMS4yIGJpbGxpb24sIDAuNSBiaWxsaW9uLCAwLjMgYmlsbGlvbgogICAgYm9vbCBkb09uY2UgPSBmYWxzZTsKICAgIAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgY29sbGVjdGVkOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgY29udHJpYnV0ZWRUb2tlbjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIHVuQ2xhaW1lZFRva2VuOwogICAgLy8gZXZlbnRzCiAgICBldmVudCBMb2dSZWdpc3RlciAoYWRkcmVzcyBjb250cmlidXRpb25BZGRyLCBhZGRyZXNzIEFUTVRva2VuQWRkcik7CiAgICBldmVudCBMb2dDb2xsZWN0IChhZGRyZXNzIHVzZXIsIHVpbnQgc3BlbmRFVEhBbW91bnQsIHVpbnQgZ2V0QVRNQW1vdW50KTsKICAgIGV2ZW50IExvZ01pZ3JhdGUgKGFkZHJlc3MgdXNlciwgdWludCBiYWxhbmNlKTsKICAgIGV2ZW50IExvZ0NsYWltIChhZGRyZXNzIHVzZXIsIHVpbnQgY2xhaW1OdW1iZXJOb3csIHVpbnQgdW5jbGFpbWVkVG90YWwsIHVpbnQgdG90YWxDb250cmlidXRlZCk7CiAgICBldmVudCBMb2dDbGFpbVJld2FyZCAoYWRkcmVzcyB1c2VyLCB1aW50IGNsYWltTnVtYmVyKTsKICAgIC8qCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioKICAgIGRlcGxveSBBVE0gYW5kIHN0YXJ0IEZyZWV6ZSBjeWNsZQogICAgKioqKioqKioqKioqKioqKioqKioqKioqCiAgICAqLwogICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSAoYWRkcmVzcyBfY29udHJpYnV0aW9uKSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoIF9jb250cmlidXRpb24gIT0gYWRkcmVzcygwKSApOwogICAgICAgIGNvbnRyaWJ1dGlvbiA9IENvbnRyaWJ1dGlvbihfY29udHJpYnV0aW9uKTsKICAgICAgICBhdG1Ub2tlbiA9IG5ldyBBVE1Ub2tlbih0b2tlblRvdGFsKTsKICAgICAgICAvL1N0YXJ0IHRoYXdpbmcgcHJvY2VzcwogICAgICAgIHNldExvY2tTdGFydFRpbWUobm93KTsKICAgICAgICAvLyBhbGxvYyByZXNlcnZlIHRva2VuIHRvIGZ1bmQgYWNjb3VudCAoNTAgYmlsbGlvbikKICAgICAgICBsb2NrVG9rZW4oY29udHJpYnV0aW9uLmV0aEZ1bmREZXBvc2l0KCksIHRva2VuVG9SZXNlcnZlKTsKICAgICAgICBsb2NrVG9rZW4oY29udHJpYnV0aW9uLmludmVzdG9yRGVwb3NpdCgpLCB0b2tlblRvRm91bmRlcik7CiAgICAgICAgLy9oZWxwIGZvdW5kZXImZnVuZCB0byBjbGFpbSBmaXJzdCAxLzYgQVRNcwogICAgICAgIGNsYWltVXNlclRva2VuKGNvbnRyaWJ1dGlvbi5pbnZlc3RvckRlcG9zaXQoKSk7CiAgICAgICAgY2xhaW1Gb3VuZGF0aW9uVG9rZW4oKTsKICAgICAgICAKICAgICAgICBMb2dSZWdpc3RlcihfY29udHJpYnV0aW9uLCBhdG1Ub2tlbik7CiAgICB9CiAgICAvKgogICAgKioqKioqKioqKioqKioqKioqKioqKioqCiAgICBjYWxjIEFUTSBieSBldGggcGVyIHVzZXIKICAgICoqKioqKioqKioqKioqKioqKioqKioqKgogICAgKi8KICAgIGZ1bmN0aW9uIGNvbGxlY3QoYWRkcmVzcyBfdXNlcikgewogICAgICAgIHJlcXVpcmUoIWNvbGxlY3RlZFtfdXNlcl0pOwogICAgICAgIAogICAgICAgIHVpbnQxMjggZGFpbHlDb250cmlidXRlZEVUSCA9IDA7CiAgICAgICAgdWludDEyOCB1c2VyQ29udHJpYnV0ZWRFVEggPSAwOwogICAgICAgIHVpbnQxMjggdXNlclRvdGFsQ29udHJpYnV0ZWRFVEggPSAwOwogICAgICAgIHVpbnQxMjggcmV3YXJkID0gMDsKICAgICAgICB1aW50MTI4IHJhdGUgPSAwOwogICAgICAgIHVpbnQxMjggdG90YWxBVE1Ub2tlbiA9IDA7CiAgICAgICAgdWludDEyOCByZXdhcmRSYXRlID0gMDsKICAgICAgICBjb2xsZWN0ZWRbX3VzZXJdID0gdHJ1ZTsKICAgICAgICBmb3IgKHVpbnQgZGF5ID0gQ1JBV0RTQUxFX1NUQVJUX0RBWTsgZGF5IDw9IENSQVdEU0FMRV9FTkRfREFZOyBkYXkrKykgewogICAgICAgICAgICBkYWlseUNvbnRyaWJ1dGVkRVRIID0gY2FzdCggY29udHJpYnV0aW9uLmRhaWx5VG90YWxzKGRheSkgKTsKICAgICAgICAgICAgdXNlckNvbnRyaWJ1dGVkRVRIID0gY2FzdCggY29udHJpYnV0aW9uLnVzZXJCdXlzKGRheSxfdXNlcikgKTsKICAgICAgICAgICAgaWYgKGRhaWx5Q29udHJpYnV0ZWRFVEggPiAwICYmIHVzZXJDb250cmlidXRlZEVUSCA+IDApIHsKICAgICAgICAgICAgICAgIC8vQ2FsY3VsYXRlIHVzZXIgcmV3YXJkcwogICAgICAgICAgICAgICAgcmV3YXJkUmF0ZSA9IHdkaXYoY2FzdCh0b2tlblRvUmV3YXJkW2RheV0pLCBkYWlseUNvbnRyaWJ1dGVkRVRIKTsKICAgICAgICAgICAgICAgIHJld2FyZCArPSB3bXVsKHVzZXJDb250cmlidXRlZEVUSCwgcmV3YXJkUmF0ZSk7CiAgICAgICAgICAgICAgICAvL0N1bXVsYXRpdmUgdXNlciBwdXJjaGFzZSB0b3RhbAogICAgICAgICAgICAgICAgdXNlclRvdGFsQ29udHJpYnV0ZWRFVEggKz0gdXNlckNvbnRyaWJ1dGVkRVRIOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJhdGUgPSB3ZGl2KGNhc3QodG9rZW5Ub0NvbnRyaWJ1dG9yKSwgY2FzdChjb250cmlidXRpb24udG90YWxDb250cmlidXRlZEVUSCgpKSk7CiAgICAgICAgdG90YWxBVE1Ub2tlbiA9IHdtdWwocmF0ZSwgdXNlclRvdGFsQ29udHJpYnV0ZWRFVEgpOwogICAgICAgIHRvdGFsQVRNVG9rZW4gKz0gcmV3YXJkOwogICAgICAgIC8vRnJlZXplIGFsbCBBVE1zIHB1cmNoYXNlZAogICAgICAgIGxvY2tUb2tlbihfdXNlciwgdG90YWxBVE1Ub2tlbik7CiAgICAgICAgLy9oZWxwIHVzZXIgdG8gY2xhaW0gZmlyc3QgMS82IEFUTXMKICAgICAgICBjbGFpbVVzZXJUb2tlbihfdXNlcik7CiAgICAgICAgTG9nQ29sbGVjdChfdXNlciwgdXNlclRvdGFsQ29udHJpYnV0ZWRFVEgsIHRvdGFsQVRNVG9rZW4pOwogICAgfQogICAgZnVuY3Rpb24gbG9ja1Rva2VuKAogICAgICAgIGFkZHJlc3MgX3VzZXIsCiAgICAgICAgdWludDI1NiBfYW1vdW50CiAgICApIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKF91c2VyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGNvbnRyaWJ1dGVkVG9rZW5bX3VzZXJdICs9IF9hbW91bnQ7CiAgICAgICAgdW5DbGFpbWVkVG9rZW5bX3VzZXJdICs9IF9hbW91bnQ7CiAgICB9CiAgICBmdW5jdGlvbiBzZXRMb2NrU3RhcnRUaW1lKHVpbnQyNTYgX3RpbWUpIGludGVybmFsIHsKICAgICAgICBsb2NrU3RhcnRUaW1lID0gX3RpbWU7CiAgICB9CiAgICBmdW5jdGlvbiBjYXN0KHVpbnQyNTYgX3gpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQxMjggeikgewogICAgICAgIHJlcXVpcmUoKHogPSB1aW50MTI4KF94KSkgPT0gX3gpOwogICAgfQogICAgLyoKICAgICoqKioqKioqKioqKioqKioqKioqKioqKgogICAgQ2xhaW0gQVRNCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioKICAgICovCiAgICBmdW5jdGlvbiBjbGFpbVJld2FyZChhZGRyZXNzIF9mb3VuZGVyKSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX2ZvdW5kZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShsb2NrU3RhcnRUaW1lICE9IDApOwogICAgICAgIHJlcXVpcmUoZG9PbmNlID09IGZhbHNlKTsKICAgICAgICB1aW50MjU2IHJld2FyZHMgPSAwOwogICAgICAgIGZvciAodWludCBkYXkgPSBDUkFXRFNBTEVfU1RBUlRfREFZOyBkYXkgPD0gQ1JBV0RTQUxFX0VBUkxZQklSRF9FTkRfREFZOyBkYXkrKykgewogICAgICAgICAgICBpZihjb250cmlidXRpb24uZGFpbHlUb3RhbHMoZGF5KSA9PSAwKXsKICAgICAgICAgICAgICAgIHJld2FyZHMgKz0gdG9rZW5Ub1Jld2FyZFtkYXldOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGF0bVRva2VuLnRyYW5zZmVyKF9mb3VuZGVyLCByZXdhcmRzKTsKICAgICAgICBkb09uY2UgPSB0cnVlOwogICAgICAgIExvZ0NsYWltUmV3YXJkKF9mb3VuZGVyLCByZXdhcmRzKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2xhaW1Gb3VuZGF0aW9uVG9rZW4oKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gY29udHJpYnV0aW9uLmV0aEZ1bmREZXBvc2l0KCkpOwogICAgICAgIGNsYWltVG9rZW4oY29udHJpYnV0aW9uLmV0aEZ1bmREZXBvc2l0KCksVEhBV19DWUNMRV9GVU5ERVIpOwogICAgfQogICAgZnVuY3Rpb24gY2xhaW1Vc2VyVG9rZW4oYWRkcmVzcyBfdXNlcikgewogICAgICAgIGNsYWltVG9rZW4oX3VzZXIsVEhBV19DWUNMRV9VU0VSKTsKICAgIH0KICAgIGZ1bmN0aW9uIGNsYWltVG9rZW4oYWRkcmVzcyBfdXNlciwgdWludDI1NiBfc3RhZ2VzKSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKHVuQ2xhaW1lZFRva2VuW191c2VyXSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjdXJyZW50U3RhZ2UgPSBzdWIobm93LCBsb2NrU3RhcnRUaW1lKSAvICg2MCo2MCAvKmNvbnRyaWJ1dGlvbi5kYXlDeWNsZSgpICogVEhBV19DWUNMRV9MRU5HVEgqLykgKzE7CiAgICAgICAgaWYgKGN1cnJlbnRTdGFnZSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTdGFnZSA+IF9zdGFnZXMpIHsKICAgICAgICAgICAgY3VycmVudFN0YWdlID0gX3N0YWdlczsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBsb2NrU3RhZ2VzID0gX3N0YWdlcyAtIGN1cnJlbnRTdGFnZTsKICAgICAgICB1aW50MjU2IHVuQ2xhaW1lZCA9IChjb250cmlidXRlZFRva2VuW191c2VyXSAqIGxvY2tTdGFnZXMpIC8gX3N0YWdlczsKICAgICAgICBpZiAodW5DbGFpbWVkVG9rZW5bX3VzZXJdIDw9IHVuQ2xhaW1lZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgdG1wID0gdW5DbGFpbWVkVG9rZW5bX3VzZXJdIC0gdW5DbGFpbWVkOwogICAgICAgIHVuQ2xhaW1lZFRva2VuW191c2VyXSA9IHVuQ2xhaW1lZDsKICAgICAgICBhdG1Ub2tlbi50cmFuc2ZlcihfdXNlciwgdG1wKTsKICAgICAgICBMb2dDbGFpbShfdXNlciwgdG1wLCB1bkNsYWltZWQsY29udHJpYnV0ZWRUb2tlbltfdXNlcl0pOwogICAgfQogICAgLyoKICAgICoqKioqKioqKioqKioqKioqKioqKioqKgogICAgbWlncmF0ZSB1c2VyIGRhdGEgYW5kIHN1aXNpZGUKICAgICoqKioqKioqKioqKioqKioqKioqKioqKgogICAgKi8KICAgIGZ1bmN0aW9uIGRpc2FibGVBVE1FeGNoYW5nZSgpIG9ubHlPd25lciB7CiAgICAgICAgYXRtVG9rZW4uc2V0RGlzYWJsZWQodHJ1ZSk7CiAgICB9CiAgICBmdW5jdGlvbiBlbmFibGVBVE1FeGNoYW5nZSgpIG9ubHlPd25lciB7CiAgICAgICAgYXRtVG9rZW4uc2V0RGlzYWJsZWQoZmFsc2UpOwogICAgfQogICAgZnVuY3Rpb24gbWlncmF0ZVVzZXJEYXRhKCkgb25seU93bmVyIHsKICAgICAgICBmb3IgKHZhciBpPTA7IGk8IGF0bVRva2VuLmdldEFUTUhvbGRlcnNOdW1iZXIoKTsgaSsrKXsKICAgICAgICAgICAgTG9nTWlncmF0ZShhdG1Ub2tlbi5BVE1Ib2xkZXJzKGkpLCBhdG1Ub2tlbi5iYWxhbmNlcyhhdG1Ub2tlbi5BVE1Ib2xkZXJzKGkpKSk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24ga2lsbCgpIG9ubHlPd25lciB7CiAgICAgICAgYXRtVG9rZW4ua2lsbCgpOwogICAgICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgICB9Cn0='.
	

]
