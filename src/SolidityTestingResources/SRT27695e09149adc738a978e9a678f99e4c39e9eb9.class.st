Class {
	#name : #SRT27695e09149adc738a978e9a678f99e4c39e9eb9,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT27695e09149adc738a978e9a678f99e4c39e9eb9 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjsKCgpjb250cmFjdCBvd25lZCB7CglhZGRyZXNzIHB1YmxpYyBvd25lcjsKCglmdW5jdGlvbiBvd25lZCgpIHsKCQlvd25lciA9IG1zZy5zZW5kZXI7Cgl9CgoJZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKCQlvd25lciA9IG5ld093bmVyOwoJfQoKCW1vZGlmaWVyIG9ubHlPd25lciB7CgkJcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKCQlfOwoJfQp9CgoKY29udHJhY3QgdG9rZW5SZWNpcGllbnQge2Z1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9leHRyYURhdGEpO30KCgpjb250cmFjdCBVdGlscyB7CgkvKioKCQljb25zdHJ1Y3RvcgoJKi8KCWZ1bmN0aW9uIFV0aWxzKCkgewoJfQoKCS8vIHZhbGlkYXRlcyBhbiBhZGRyZXNzIC0gY3VycmVudGx5IG9ubHkgY2hlY2tzIHRoYXQgaXQgaXNuJ3QgbnVsbAoJbW9kaWZpZXIgdmFsaWRBZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MpIHsKCQlyZXF1aXJlKF9hZGRyZXNzICE9IDB4MCk7CgkJXzsKCX0KCgkvLyB2ZXJpZmllcyB0aGF0IHRoZSBhZGRyZXNzIGlzIGRpZmZlcmVudCB0aGFuIHRoaXMgY29udHJhY3QgYWRkcmVzcwoJbW9kaWZpZXIgbm90VGhpcyhhZGRyZXNzIF9hZGRyZXNzKSB7CgkJcmVxdWlyZShfYWRkcmVzcyAhPSBhZGRyZXNzKHRoaXMpKTsKCQlfOwoJfQoKCS8vIE92ZXJmbG93IHByb3RlY3RlZCBtYXRoIGZ1bmN0aW9ucwoKCS8qKgoJCUBkZXYgcmV0dXJucyB0aGUgc3VtIG9mIF94IGFuZCBfeSwgYXNzZXJ0cyBpZiB0aGUgY2FsY3VsYXRpb24gb3ZlcmZsb3dzCgoJCUBwYXJhbSBfeCAgIHZhbHVlIDEKCQlAcGFyYW0gX3kgICB2YWx1ZSAyCgoJCUByZXR1cm4gc3VtCgkqLwoJZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IF94LCB1aW50MjU2IF95KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CgkJdWludDI1NiB6ID0gX3ggKyBfeTsKCQlhc3NlcnQoeiA+PSBfeCk7CgkJcmV0dXJuIHo7Cgl9CgoJLyoqCgkJQGRldiByZXR1cm5zIHRoZSBkaWZmZXJlbmNlIG9mIF94IG1pbnVzIF95LCBhc3NlcnRzIGlmIHRoZSBzdWJ0cmFjdGlvbiByZXN1bHRzIGluIGEgbmVnYXRpdmUgbnVtYmVyCgoJCUBwYXJhbSBfeCAgIG1pbnVlbmQKCQlAcGFyYW0gX3kgICBzdWJ0cmFoZW5kCgoJCUByZXR1cm4gZGlmZmVyZW5jZQoJKi8KCWZ1bmN0aW9uIHNhZmVTdWIodWludDI1NiBfeCwgdWludDI1NiBfeSkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewoJCWFzc2VydChfeCA+PSBfeSk7CgkJcmV0dXJuIF94IC0gX3k7Cgl9Cn0KCgpjb250cmFjdCBDU1Rva2VuIGlzIG93bmVkLCBVdGlscyB7CglzdHJ1Y3QgRGl2aWRlbmQge3VpbnQyNTYgdGltZTsgdWludDI1NiB0ZW5UaG91c2FuZHRoOyB1aW50MjU2IGNvdW50Q29tcGxldGU7fQoKCS8qIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovCglzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gJ1Rva2VuIDAuMSc7CgoJc3RyaW5nIHB1YmxpYyBuYW1lID0gJ0tpY2tDb2luJzsKCglzdHJpbmcgcHVibGljIHN5bWJvbCA9ICdLSUNLJzsKCgl1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSA4OwoKCXVpbnQyNTYgX3RvdGFsU3VwcGx5ID0gMDsKCgkvKiBJcyBhbGxvd2VkIHRvIGJ1cm4gdG9rZW5zICovCglib29sIHB1YmxpYyBhbGxvd01hbnVhbGx5QnVyblRva2VucyA9IHRydWU7CgoJLyogVGhpcyBjcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGJhbGFuY2VzICovCgltYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKCW1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSkgcHVibGljIGFnaW5nQmFsYW5jZU9mOwoKCXVpbnRbXSBhZ2luZ1RpbWVzOwoKCURpdmlkZW5kW10gZGl2aWRlbmRzOwoKCW1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCS8qIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cyAqLwoJZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CgoJZXZlbnQgQWdpbmdUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFnaW5nVGltZSk7CgoJZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgkvLyB0cmlnZ2VyZWQgd2hlbiB0aGUgdG90YWwgc3VwcGx5IGlzIGluY3JlYXNlZAoJZXZlbnQgSXNzdWFuY2UodWludDI1NiBfYW1vdW50KTsKCS8vIHRyaWdnZXJlZCB3aGVuIHRoZSB0b3RhbCBzdXBwbHkgaXMgZGVjcmVhc2VkCglldmVudCBEZXN0cnVjdGlvbih1aW50MjU2IF9hbW91bnQpOwoJLy8gVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgYnVybnQKCWV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQyNTYgdmFsdWUpOwoKCWFkZHJlc3NbXSBwdWJsaWMgYWRkcmVzc0J5SW5kZXg7CgoJbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBhZGRyZXNzQWRkZWRUb0luZGV4OwoKCW1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgYWdpbmdUaW1lc0ZvclBvb2xzOwoKCXVpbnQxNiBjdXJyZW50RGl2aWRlbmRJbmRleCA9IDE7CgoJbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBjYWxjdWxhdGVkRGl2aWRlbmRzSW5kZXg7CgoJYm9vbCBwdWJsaWMgdHJhbnNmZXJzRW5hYmxlZCA9IHRydWU7CgoJZXZlbnQgTmV3U21hcnRUb2tlbihhZGRyZXNzIF90b2tlbik7CgoJLyogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0ICovCglmdW5jdGlvbiBDU1Rva2VuKCkgewoJCW93bmVyID0gbXNnLnNlbmRlcjsKCQkvLyBTbyB0aGF0IHRoZSBpbmRleCBzdGFydHMgd2l0aCAxCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMCwgMCwgMCkpOwoJCS8vIDMxLjEwLjIwMTcgMDk6MDA6MDAKCQlkaXZpZGVuZHMucHVzaChEaXZpZGVuZCgxNTA5NDQwNDAwLCAzMCwgMCkpOwoJCS8vIDMwLjExLjIwMTcgMDk6MDA6MDAKCQlkaXZpZGVuZHMucHVzaChEaXZpZGVuZCgxNTEyMDMyNDAwLCAyMCwgMCkpOwoJCS8vIDMxLjEyLjIwMTcgMDk6MDA6MDAKCQlkaXZpZGVuZHMucHVzaChEaXZpZGVuZCgxNTE0NzEwODAwLCAxMCwgMCkpOwoJCS8vIDMxLjAxLjIwMTggMDk6MDA6MDAKCQlkaXZpZGVuZHMucHVzaChEaXZpZGVuZCgxNTE3Mzg5MjAwLCA1LCAwKSk7CgkJLy8gMjguMDIuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MTk4MDg0MDAsIDEwLCAwKSk7CgkJLy8gMzEuMDMuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MjI0ODY4MDAsIDIwLCAwKSk7CgkJLy8gMzAuMDQuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MjUwNzg4MDAsIDMwLCAwKSk7CgkJLy8gMzEuMDUuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1Mjc3NTcyMDAsIDUwLCAwKSk7CgkJLy8gMzAuMDYuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MzAzNDkyMDAsIDMwLCAwKSk7CgkJLy8gMzEuMDcuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MzMwMjc2MDAsIDIwLCAwKSk7CgkJLy8gMzEuMDguMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MzU3MDYwMDAsIDEwLCAwKSk7CgkJLy8gMzAuMDkuMjAxOCAwOTowMDowMAoJCWRpdmlkZW5kcy5wdXNoKERpdmlkZW5kKDE1MzgyOTgwMDAsIDUsIDApKTsKCQkvLyAzMS4xMC4yMDE4IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU0MDk3NjQwMCwgMTAsIDApKTsKCQkvLyAzMC4xMS4yMDE4IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU0MzU2ODQwMCwgMjAsIDApKTsKCQkvLyAzMS4xMi4yMDE4IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU0NjI0NjgwMCwgMzAsIDApKTsKCQkvLyAzMS4wMS4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU0ODkyNTIwMCwgNjAsIDApKTsKCQkvLyAyOC4wMi4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU1MTM0NDQwMCwgMzAsIDApKTsKCQkvLyAzMS4wMy4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU1NDAyMjgwMCwgMjAsIDApKTsKCQkvLyAzMC4wNC4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU1NjYxNDgwMCwgMTAsIDApKTsKCQkvLyAzMS4wNS4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU1OTMwNzYwMCwgMjAsIDApKTsKCQkvLyAzMC4wNi4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU2MTg4NTIwMCwgMzAsIDApKTsKCQkvLyAzMS4wNy4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU2NDU2MzYwMCwgMjAsIDApKTsKCQkvLyAzMS4wOC4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU2NzI0MjAwMCwgMTAsIDApKTsKCQkvLyAzMC4wOS4yMDE5IDA5OjAwOjAwCgkJZGl2aWRlbmRzLnB1c2goRGl2aWRlbmQoMTU2OTgzNDAwMCwgNSwgMCkpOwoKCQlOZXdTbWFydFRva2VuKGFkZHJlc3ModGhpcykpOwoJfQoKCW1vZGlmaWVyIHRyYW5zZmVyc0FsbG93ZWQgewoJCWFzc2VydCh0cmFuc2ZlcnNFbmFibGVkKTsKCQlfOwoJfQoKCWZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSkgewoJCXRvdGFsU3VwcGx5ID0gX3RvdGFsU3VwcGx5OwoJfQoKCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CgkJcmV0dXJuIGJhbGFuY2VzW19vd25lcl07Cgl9CgoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewoJCXJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwoJfQoKCWJvb2wgYWxsQWdpbmdUaW1lc0hhc0JlZW5BZGRlZCA9IGZhbHNlOwoJZnVuY3Rpb24gYWRkQWdpbmdUaW1lKHVpbnQyNTYgdGltZSkgb25seU93bmVyIHsKCQlyZXF1aXJlKCFhbGxBZ2luZ1RpbWVzSGFzQmVlbkFkZGVkKTsKCQlhZ2luZ1RpbWVzLnB1c2godGltZSk7Cgl9CgoJZnVuY3Rpb24gYWxsQWdpbmdUaW1lc0FkZGVkKCkgb25seU93bmVyIHsKCQlhbGxBZ2luZ1RpbWVzSGFzQmVlbkFkZGVkID0gdHJ1ZTsKCX0KCglmdW5jdGlvbiBjYWxjdWxhdGVEaXZpZGVuZHModWludDI1NiBsaW1pdCkgewoJCXJlcXVpcmUobm93ID49IGRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0udGltZSk7CgkJcmVxdWlyZShsaW1pdCA+IDApOwoKCQlsaW1pdCA9IHNhZmVBZGQoZGl2aWRlbmRzW2N1cnJlbnREaXZpZGVuZEluZGV4XS5jb3VudENvbXBsZXRlLCBsaW1pdCk7CgoJCWlmIChsaW1pdCA+IGFkZHJlc3NCeUluZGV4Lmxlbmd0aCkgewoJCQlsaW1pdCA9IGFkZHJlc3NCeUluZGV4Lmxlbmd0aDsKCQl9CgoJCWZvciAodWludDI1NiBpID0gZGl2aWRlbmRzW2N1cnJlbnREaXZpZGVuZEluZGV4XS5jb3VudENvbXBsZXRlOyBpIDwgbGltaXQ7IGkrKykgewoJCQlfYWRkRGl2aWRlbmRzRm9yQWRkcmVzcyhhZGRyZXNzQnlJbmRleFtpXSk7CgkJfQoJCWlmIChsaW1pdCA9PSBhZGRyZXNzQnlJbmRleC5sZW5ndGgpIHsKCQkJY3VycmVudERpdmlkZW5kSW5kZXgrKzsKCQl9CgkJZWxzZSB7CgkJCWRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0uY291bnRDb21wbGV0ZSA9IGxpbWl0OwoJCX0KCX0KCgkvKiBVc2VyIGNhbiBoaW1zZWxmIHJlY2VpdmUgZGl2aWRlbmRzIHdpdGhvdXQgd2FpdGluZyBmb3IgYSBnbG9iYWwgYWNjcnVhbHMgKi8KCWZ1bmN0aW9uIHJlY2VpdmVEaXZpZGVuZHMoKSBwdWJsaWMgewoJCXJlcXVpcmUobm93ID49IGRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0udGltZSk7CgkJYXNzZXJ0KF9hZGREaXZpZGVuZHNGb3JBZGRyZXNzKG1zZy5zZW5kZXIpKTsKCX0KCglmdW5jdGlvbiBfYWRkRGl2aWRlbmRzRm9yQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSBpbnRlcm5hbCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCQkvLyBza2lwIGNhbGN1bGF0aW5nIGRpdmlkZW5kcywgaWYgYWxyZWFkeSBjYWxjdWxhdGVkIGZvciB0aGlzIGFkZHJlc3MKCQlpZiAoY2FsY3VsYXRlZERpdmlkZW5kc0luZGV4W19hZGRyZXNzXSA+PSBjdXJyZW50RGl2aWRlbmRJbmRleCkgcmV0dXJuIGZhbHNlOwoKCQl1aW50MjU2IGFkZCA9IGJhbGFuY2VzW19hZGRyZXNzXSAqIGRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0udGVuVGhvdXNhbmR0aCAvIDEwMDA7CgkJYmFsYW5jZXNbX2FkZHJlc3NdID0gc2FmZUFkZChiYWxhbmNlc1tfYWRkcmVzc10sIGFkZCk7CgkJVHJhbnNmZXIodGhpcywgX2FkZHJlc3MsIGFkZCk7CgkJSXNzdWFuY2UoYWRkKTsKCQlfdG90YWxTdXBwbHkgPSBzYWZlQWRkKF90b3RhbFN1cHBseSwgYWRkKTsKCgkJaWYgKGFnaW5nQmFsYW5jZU9mW19hZGRyZXNzXVswXSA+IDApIHsKCQkJYWdpbmdCYWxhbmNlT2ZbX2FkZHJlc3NdWzBdID0gc2FmZUFkZChhZ2luZ0JhbGFuY2VPZltfYWRkcmVzc11bMF0sIGFnaW5nQmFsYW5jZU9mW19hZGRyZXNzXVswXSAqIGRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0udGVuVGhvdXNhbmR0aCAvIDEwMDApOwoJCQlmb3IgKHVpbnQyNTYgayA9IDA7IGsgPCBhZ2luZ1RpbWVzLmxlbmd0aDsgaysrKSB7CgkJCQlhZ2luZ0JhbGFuY2VPZltfYWRkcmVzc11bYWdpbmdUaW1lc1trXV0gPSBzYWZlQWRkKGFnaW5nQmFsYW5jZU9mW19hZGRyZXNzXVthZ2luZ1RpbWVzW2tdXSwgYWdpbmdCYWxhbmNlT2ZbX2FkZHJlc3NdW2FnaW5nVGltZXNba11dICogZGl2aWRlbmRzW2N1cnJlbnREaXZpZGVuZEluZGV4XS50ZW5UaG91c2FuZHRoIC8gMTAwMCk7CgkJCX0KCQl9CgkJY2FsY3VsYXRlZERpdmlkZW5kc0luZGV4W19hZGRyZXNzXSA9IGN1cnJlbnREaXZpZGVuZEluZGV4OwoJCXJldHVybiB0cnVlOwoJfQoKCS8qIFNlbmQgY29pbnMgKi8KCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgdHJhbnNmZXJzQWxsb3dlZCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCQlfY2hlY2tNeUFnaW5nKG1zZy5zZW5kZXIpOwoJCWlmIChjdXJyZW50RGl2aWRlbmRJbmRleCA8IGRpdmlkZW5kcy5sZW5ndGggJiYgbm93ID49IGRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0udGltZSkgewoJCQlfYWRkRGl2aWRlbmRzRm9yQWRkcmVzcyhtc2cuc2VuZGVyKTsKCQkJX2FkZERpdmlkZW5kc0ZvckFkZHJlc3MoX3RvKTsKCQl9CgoJCXJlcXVpcmUoYWNjb3VudEJhbGFuY2UobXNnLnNlbmRlcikgPj0gX3ZhbHVlKTsKCgkJLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCgkJYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwoKCQlpZiAoYWdpbmdUaW1lc0ZvclBvb2xzW21zZy5zZW5kZXJdID4gMCAmJiBhZ2luZ1RpbWVzRm9yUG9vbHNbbXNnLnNlbmRlcl0gPiBub3cpIHsKCQkJX2FkZFRvQWdpbmcobXNnLnNlbmRlciwgX3RvLCBhZ2luZ1RpbWVzRm9yUG9vbHNbbXNnLnNlbmRlcl0sIF92YWx1ZSk7CgkJfQoKCQliYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwoKCQlfYWRkSW5kZXgoX3RvKTsKCQlUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CgkJcmV0dXJuIHRydWU7Cgl9CgoJZnVuY3Rpb24gbWludFRva2VuKGFkZHJlc3MgdGFyZ2V0LCB1aW50MjU2IG1pbnRlZEFtb3VudCwgdWludDI1NiBhZ2luZ1RpbWUpIG9ubHlPd25lciB7CgkJaWYgKGFnaW5nVGltZSA+IG5vdykgewoJCQlfYWRkVG9BZ2luZyhvd25lciwgdGFyZ2V0LCBhZ2luZ1RpbWUsIG1pbnRlZEFtb3VudCk7CgkJfQoKCQliYWxhbmNlc1t0YXJnZXRdID0gc2FmZUFkZChiYWxhbmNlc1t0YXJnZXRdLCBtaW50ZWRBbW91bnQpOwoKCQlfdG90YWxTdXBwbHkgPSBzYWZlQWRkKF90b3RhbFN1cHBseSwgbWludGVkQW1vdW50KTsKCQlJc3N1YW5jZShtaW50ZWRBbW91bnQpOwoJCV9hZGRJbmRleCh0YXJnZXQpOwoJCVRyYW5zZmVyKHRoaXMsIHRhcmdldCwgbWludGVkQW1vdW50KTsKCX0KCglmdW5jdGlvbiBfYWRkSW5kZXgoYWRkcmVzcyBfYWRkcmVzcykgaW50ZXJuYWwgewoJCWlmICghYWRkcmVzc0FkZGVkVG9JbmRleFtfYWRkcmVzc10pIHsKCQkJYWRkcmVzc0FkZGVkVG9JbmRleFtfYWRkcmVzc10gPSB0cnVlOwoJCQlhZGRyZXNzQnlJbmRleC5wdXNoKF9hZGRyZXNzKTsKCQl9Cgl9CgoJZnVuY3Rpb24gX2FkZFRvQWdpbmcoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRhcmdldCwgdWludDI1NiBhZ2luZ1RpbWUsIHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB7CgkJYWdpbmdCYWxhbmNlT2ZbdGFyZ2V0XVswXSA9IHNhZmVBZGQoYWdpbmdCYWxhbmNlT2ZbdGFyZ2V0XVswXSwgYW1vdW50KTsKCQlhZ2luZ0JhbGFuY2VPZlt0YXJnZXRdW2FnaW5nVGltZV0gPSBzYWZlQWRkKGFnaW5nQmFsYW5jZU9mW3RhcmdldF1bYWdpbmdUaW1lXSwgYW1vdW50KTsKCQlBZ2luZ1RyYW5zZmVyKGZyb20sIHRhcmdldCwgYW1vdW50LCBhZ2luZ1RpbWUpOwoJfQoKCS8qIEFsbG93IGFub3RoZXIgY29udHJhY3QgdG8gc3BlbmQgc29tZSB0b2tlbnMgaW4geW91ciBiZWhhbGYgKi8KCWZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoJCWFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwoJCUFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwoJCXJldHVybiB0cnVlOwoJfQoKCS8qIEFwcHJvdmUgYW5kIHRoZW4gY29tbXVuaWNhdGUgdGhlIGFwcHJvdmVkIGNvbnRyYWN0IGluIGEgc2luZ2xlIHR4ICovCglmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgkJdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsKCQlpZiAoYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgewoJCQlzcGVuZGVyLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9Cgl9CgoJLyogQSBjb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIGNvaW5zICovCglmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB0cmFuc2ZlcnNBbGxvd2VkIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoJCV9jaGVja015QWdpbmcoX2Zyb20pOwoJCWlmIChjdXJyZW50RGl2aWRlbmRJbmRleCA8IGRpdmlkZW5kcy5sZW5ndGggJiYgbm93ID49IGRpdmlkZW5kc1tjdXJyZW50RGl2aWRlbmRJbmRleF0udGltZSkgewoJCQlfYWRkRGl2aWRlbmRzRm9yQWRkcmVzcyhfZnJvbSk7CgkJCV9hZGREaXZpZGVuZHNGb3JBZGRyZXNzKF90byk7CgkJfQoJCS8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAoJCXJlcXVpcmUoYWNjb3VudEJhbGFuY2UoX2Zyb20pID49IF92YWx1ZSk7CgoJCS8vIENoZWNrIGFsbG93ZWQKCQlyZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CgoJCS8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgoJCWJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZXNbX2Zyb21dLCBfdmFsdWUpOwoJCS8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CgkJYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKCgkJYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLCBfdmFsdWUpOwoKCQlpZiAoYWdpbmdUaW1lc0ZvclBvb2xzW19mcm9tXSA+IDAgJiYgYWdpbmdUaW1lc0ZvclBvb2xzW19mcm9tXSA+IG5vdykgewoJCQlfYWRkVG9BZ2luZyhfZnJvbSwgX3RvLCBhZ2luZ1RpbWVzRm9yUG9vbHNbX2Zyb21dLCBfdmFsdWUpOwoJCX0KCgkJX2FkZEluZGV4KF90byk7CgkJVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvKiBUaGlzIHVubmFtZWQgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW5ldmVyIHNvbWVvbmUgdHJpZXMgdG8gc2VuZCBldGhlciB0byBpdCAqLwoJZnVuY3Rpb24oKSB7CgkJcmV2ZXJ0KCk7CgkJLy8gUHJldmVudHMgYWNjaWRlbnRhbCBzZW5kaW5nIG9mIGV0aGVyCgl9CgoJZnVuY3Rpb24gX2NoZWNrTXlBZ2luZyhhZGRyZXNzIHNlbmRlcikgaW50ZXJuYWwgewoJCWlmIChhZ2luZ0JhbGFuY2VPZltzZW5kZXJdWzBdID09IDApIHJldHVybjsKCgkJZm9yICh1aW50MjU2IGsgPSAwOyBrIDwgYWdpbmdUaW1lcy5sZW5ndGg7IGsrKykgewoJCQlpZiAoYWdpbmdUaW1lc1trXSA8IG5vdykgewoJCQkJYWdpbmdCYWxhbmNlT2Zbc2VuZGVyXVswXSA9IHNhZmVTdWIoYWdpbmdCYWxhbmNlT2Zbc2VuZGVyXVswXSwgYWdpbmdCYWxhbmNlT2Zbc2VuZGVyXVthZ2luZ1RpbWVzW2tdXSk7CgkJCQlhZ2luZ0JhbGFuY2VPZltzZW5kZXJdW2FnaW5nVGltZXNba11dID0gMDsKCQkJfQoJCX0KCX0KCglmdW5jdGlvbiBhZGRBZ2luZ1RpbWVzRm9yUG9vbChhZGRyZXNzIHBvb2xBZGRyZXNzLCB1aW50MjU2IGFnaW5nVGltZSkgb25seU93bmVyIHsKCQlhZ2luZ1RpbWVzRm9yUG9vbHNbcG9vbEFkZHJlc3NdID0gYWdpbmdUaW1lOwoJfQoKCWZ1bmN0aW9uIGNvdW50QWRkcmVzc2VzKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBsZW5ndGgpIHsKCQlyZXR1cm4gYWRkcmVzc0J5SW5kZXgubGVuZ3RoOwoJfQoKCWZ1bmN0aW9uIGFjY291bnRCYWxhbmNlKGFkZHJlc3MgX2FkZHJlc3MpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewoJCXJldHVybiBzYWZlU3ViKGJhbGFuY2VzW19hZGRyZXNzXSwgYWdpbmdCYWxhbmNlT2ZbX2FkZHJlc3NdWzBdKTsKCX0KCglmdW5jdGlvbiBkaXNhYmxlVHJhbnNmZXJzKGJvb2wgX2Rpc2FibGUpIHB1YmxpYyBvbmx5T3duZXIgewoJCXRyYW5zZmVyc0VuYWJsZWQgPSAhX2Rpc2FibGU7Cgl9CgoJZnVuY3Rpb24gaXNzdWUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIG9ubHlPd25lciB2YWxpZEFkZHJlc3MoX3RvKSBub3RUaGlzKF90bykgewoJCV90b3RhbFN1cHBseSA9IHNhZmVBZGQoX3RvdGFsU3VwcGx5LCBfYW1vdW50KTsKCQliYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfYW1vdW50KTsKCgkJX2FkZEluZGV4KF90byk7CgkJSXNzdWFuY2UoX2Ftb3VudCk7CgkJVHJhbnNmZXIodGhpcywgX3RvLCBfYW1vdW50KTsKCX0KCgkvKioKCSAqIERlc3Ryb3kgdG9rZW5zCgkgKiBSZW1vdmUgYF92YWx1ZWAgdG9rZW5zIGZyb20gdGhlIHN5c3RlbSBpcnJldmVyc2libHkKCSAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiBtb25leSB0byBidXJuCgkgKi8KCWZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoJCWRlc3Ryb3kobXNnLnNlbmRlciwgX3ZhbHVlKTsKCQlCdXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLyoqCgkgKiBEZXN0cm95IHRva2VucwoJICogUmVtb3ZlIGBfYW1vdW50YCB0b2tlbnMgZnJvbSB0aGUgc3lzdGVtIGlycmV2ZXJzaWJseQoJICogQHBhcmFtIF9mcm9tIHRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdG9rZW5zIHdpbGwgYmUgYnVybnQKCSAqIEBwYXJhbSBfYW1vdW50IHRoZSBhbW91bnQgb2YgbW9uZXkgdG8gYnVybgoJICovCglmdW5jdGlvbiBkZXN0cm95KGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHsKCQlfY2hlY2tNeUFnaW5nKF9mcm9tKTsKCQkvLyB2YWxpZGF0ZSBpbnB1dAoJCXJlcXVpcmUoKG1zZy5zZW5kZXIgPT0gX2Zyb20gJiYgYWxsb3dNYW51YWxseUJ1cm5Ub2tlbnMpIHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpOwoJCXJlcXVpcmUoYWNjb3VudEJhbGFuY2UoX2Zyb20pID49IF9hbW91bnQpOwoKCQliYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSwgX2Ftb3VudCk7CgkJX3RvdGFsU3VwcGx5ID0gc2FmZVN1YihfdG90YWxTdXBwbHksIF9hbW91bnQpOwoKCQlUcmFuc2ZlcihfZnJvbSwgdGhpcywgX2Ftb3VudCk7CgkJRGVzdHJ1Y3Rpb24oX2Ftb3VudCk7Cgl9CgoJZnVuY3Rpb24gZGlzYWJsZU1hbnVhbGx5QnVyblRva2Vucyhib29sIF9kaXNhYmxlKSBwdWJsaWMgb25seU93bmVyIHsKCQlhbGxvd01hbnVhbGx5QnVyblRva2VucyA9ICFfZGlzYWJsZTsKCX0KfQ=='.
	

]
