Class {
	#name : #SRT7b533e19de8c1a2594e0d170c4131aba2d7ba39d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7b533e19de8c1a2594e0d170c4131aba2d7ba39d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKgogICAgICAgICAgLC9gLgogICAgICAgICwnLyBfX2AuCiAgICAgICwnXy9fICBfIF9gLgogICAgLCdfXy9fIF9fXyBfICBgLgogICwnXyAgL19fXyBfXyBfIF9fIGAuCiAnLS4uXy9fX18uLi4tIi0uLS4uX19gLgogIEIKCiBFdGhQeXJhbWlkLiBBIGJ1bGxzaGl0IHB5cmFtaWQgc2NoZW1lLgogCiBJbnNwaXJlZCBieSBodHRwczovL3Rlc3Quam9jaGVuLWhvZW5pY2tlLmRlL2V0aC9wb256aXRva2VuLyAoVGhhbmtzIGZvciB0aGUgZXhwbG9pdCkKCiBEZXZlbG9wZXJzOgoJQSBidW5jaCBvZiAxMiB5ZWFyIG9sZHMgb24gZGlzY29yZAoqLwoKLyoKIEJpelB5cmFtaWQ6ICh0bDtkciBiZWxvdykKIEVkaXRlZCBieSBhbiBhbm9uIHRvIGltcGxlbWVudCBhIHN0YXJ0aW5nIHRpbWVyLCBzbyB0aGF0IGRpc2NvcmQgd29uJ3QgaGF2ZSAKIHRoZSB1cHBlciBoYW5kLiBMYXVuY2ggc2hvdWxkIGJlIDI0IGhvdXJzIGFmdGVyIGNvbnRyYWN0IGNyZWF0aW9uIHNvIHRoYXQKIGV2ZXJ5b25lIGdldHMgYSBmYWlyIGNoYW5jZSB0byBnZXQgb24gdGhlID5ncm91bmQgZmxvb3IsIGFuZCBub3Qgb25seSBkaXNjb3JkCiBzaGlsbHMuIFN0aWxsIGJlYXRzIG1lIHdoeSB5b3UnZCBzdWZmZXIgdGhlaXIgYnVsbHNoaXQgaW5zdGVhZCBvZiBtYWtpbmcgeW91cgogb3duIGNvbnRyYWN0ICYgd2Vic2l0ZSwgaXQncyBsaWtlIDIgaG91ciBvZiB3b3JrIHlvdSBsYXp5IGJhc3RhcmRzLgogCiBOT1RFIFRPIERJU0NPUkQ6CiBZb3UncmUgd2VsY29tZSB0byBGVUQgdGhpcyBhbGwgeW91IHdhbnQsIHdlIGFsbCBrbm93IHlvdSdyZSBqdXN0IHRyeWluZyB0bwogc2NhbSAvYml6LyBhbmQgZXZlbiB5b3Vyc2VsdmVzLiBJZiB5b3UgYWN0dWFsbHkgYmVsaWV2ZSB0aGlzIGlzIGEgc2NhbSAoIG9yCiBtb3JlIG9mIGEgc2NhbSB0aGFuIEV0aFB5cmFtaWQgKSB5b3UncmUgd2VsY29tZSB0byBjb21wYXJlIHRoZSBjb250cmFjdHMuCiAKIEZVVFVSRSBDT05UUkFDVFM6CiAtV2hlbmV2ZXIgZGlzY29yZCBjb21lcyB1cCB3aXRoIHNvbWUgY29udHJhY3QsIGl0J3MgdmVyeSBlYXN5IHRvIGNyZWF0ZSBvbmUKICB3aXRoIGEgdGltZXIsIGl0IHdvdWxkIGdlbmVyYWxseSBiZSBpbXBvcnRpbmcgdGhlIHN1cGVyIGNvbnRyYWN0IGZyb20gaGVyZSwKICBhZGp1c3RpbmcgdGhlIHN0YXJ0aW5nIHRpbWUsIGFuZCBhcHBseWluZyB0byBtb2RpZmllciB0byBldmVyeSBub24gcmVhZAogIGV4dGVybmFsL3B1YmxpYyBmdW5jdGlvbi4KIC1XZWJzaXRlcyBhcmUgYSBkaWZmZXJlbnQgbWF0dGVyLCB0aG9zZSBtaWdodCBiZSBzb21lIG1vcmUgd29yaywgYnV0IHdlYmRldgogIGlzIGFsc28gYSBtdWNoIG1vcmUgY29tbW9uIHNraWxsIGFuZCB3ZWIzIGltcGxlbWVudGF0aW9uIGlzIGEgbG90IGVhc2llciB0aGFuCiAgaXQgbWlnaHQgc2VlbSBhdCBmaXJzdC4KIC1JIGNhbid0IHByb21pc2UgSSdsbCBtYWtlIGEgbGVzcyBidWxsc2hpdCB2ZXJzaW9uIG9mIGZ1dHVyZSBvbmVzIGJ1dCBJIGhvcGUgCiAgdGhpcyBzcGFya3Mgc29tZXRoaW5nLgogCiBXQVJOSU5HUzoKIC1UaGlzIGlzIHN0aWxsIHRoZSBzYW1lIHBvbnppL3B5cmFtaWQgc2NoZW1lIHdpdGggZXhhY3RseSAxIGZlYXR1cmUgYWRkZWQKIC1JZiBldGhweXJhbWlkIGF0CiAgaHR0cHM6Ly9ldGhlcnNjYW4uaW8vYWRkcmVzcy8weDJGYTBhYzQ5OEQwMTYzMmY5NTlEM0MxOEUzOGY0MzkwQjAwNWUyMDAKICBicmVha3Mgb3IgZW5jb3VudGVycyBhIGNyaXRpY2FsIGJ1ZyBieSB0aGUgdGltZSB0aGlzIHJlYWNoZXMgdGhlIG9wZW5pbmcKICBibG9jaywgcGxlYXNlIERPIE5PVCBpbnZlc3QgaW50byB0aGlzIG9uZS4KIC1JZiBldGhweXJhbWlkIGF0IHRoYXQgYWRkcmVzcyBicmVha3MgcG9zdCBsYXVuY2gsIEkgZ3VhcmFudGVlIHlvdSB0aGF0IHRoZQogIGJ1ZyBvciBleHBsb2l0IGlzIGFwcGxpY2FibGUgaGVyZSwgeW91IHNob3VsZCBpbW1lZGlhdGVseSBleGl0IHlvdXIgcG9zaXRpb24uCiAtSSBhbSBub3QgbGlhYmxlIGZvciB5b3UgbG9zaW5nIHlvdXIgaW50ZXJuZXQgbW9ub3BvbHkgbW9uZXkKIAogRElTQ0xPU1VSRToKIEkndmUgbWFkZSBQTEVOVFkgb2YgZXRoZXIgZnJvbSB0aGUgcHlyYW1pZCBzY2hlbWVzIHNvIGZhciwgYWxsIHRoZSB3YXkgZnJvbQogdGhlIDFzdCBwb256aUNvaW4gdG8gdGhlIGxhdGVzdCBTaGFkb3csIEknbSBkb2luZyB0aGlzIGZvciBmdW4gYW5kIGFzIGEgbWlkZGxlCiBmaW5nZXIgdG8gZGlzY29yZCBwYWplZXRzLiBJIHBsYW4gb24gImludmVzdGluZyIgaW50byB0aGlzIG15c2VsZi4KIAogVGhhbmsgeW91IGZvciByZWFkaW5nLCBJIHdpc2ggeW91IG1hbnkgZ2FpbnMuCiovCgovKgogdGw7ZHIKIFRoaXMgaXMgZXRoUHlyYW1pZCB3aXRoIGEgc3RhcnQgdGltZXIgdG8gcGlzcyBvZmYgZGlzY29yZAogImludmVzdCIgb3Igbm90IGlkZ2FmIGRvbid0IGJsYW1lIG1lIGlmIGl0IGJyZWFrcyBvciB5b3UgZ2V0IEpVU1RlZAoqLwoKY29udHJhY3QgTGF1bmNoRGVsYXlNZWNoYW5pc20gewoJCgl1aW50MjU2IHB1YmxpYyBsYXVuY2hUaW1lID0gMDsgLy8gVGhpcyBpcyBzZXQgaW4gQml6UHlyYW1pZCdzIGN0b3IKCQoJbW9kaWZpZXIgaXNPcGVuKCkKICAgIHsKCQkvLyBUaGlzIG1ha2VzIHN1cmUgdGhhdCB0aGUgbGFzdCBtaW5lZCBibG9jayBpcyBhZnRlciB0aGUgbGF1bmNoIHRpbWUKCQkvLyBUaW1lIGlzIGEgVVRDIFVOSVggdGltZXN0YW1wLCBnb29nbGUgYSBjb252ZXJ0ZXIKICAgICAgICByZXF1aXJlKG5vdyA+IGxhdW5jaFRpbWUpOwogICAgICAgIC8vIF87IG1lYW5zIHJ1bm5pbmcgdGhlIHJlc3Qgb2YgdGhlIGNvZGUgZnJvbSB0aGUgY2FsbGluZyBmdW5jdGlvbgogICAgICAgIF87CiAgICB9CgkKfQoKY29udHJhY3QgQml6UHlyYW1pZCBpcyBMYXVuY2hEZWxheU1lY2hhbmlzbSB7CgoJLy8gc2NhbGVGYWN0b3IgaXMgdXNlZCB0byBjb252ZXJ0IEV0aGVyIGludG8gdG9rZW5zIGFuZCB2aWNlLXZlcnNhOiB0aGV5J3JlIG9mIGRpZmZlcmVudAoJLy8gb3JkZXJzIG9mIG1hZ25pdHVkZSwgaGVuY2UgdGhlIG5lZWQgdG8gYnJpZGdlIGJldHdlZW4gdGhlIHR3by4KCXVpbnQyNTYgY29uc3RhbnQgc2NhbGVGYWN0b3IgPSAweDEwMDAwMDAwMDAwMDAwMDAwOyAgLy8gMl42NAoKCS8vIENSUiA9IDUwJQoJLy8gQ1JSIGlzIENhc2ggUmVzZXJ2ZSBSYXRpbyAoaW4gdGhpcyBjYXNlIENyeXB0byBSZXNlcnZlIFJhdGlvKS4KCS8vIEZvciBtb3JlIG9uIHRoaXM6IGNoZWNrIG91dCBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SZXNlcnZlX3JlcXVpcmVtZW50CglpbnQgY29uc3RhbnQgY3JyX24gPSAxOyAvLyBDUlIgbnVtZXJhdG9yCglpbnQgY29uc3RhbnQgY3JyX2QgPSAyOyAvLyBDUlIgZGVub21pbmF0b3IKCgkvLyBUaGUgcHJpY2UgY29lZmZpY2llbnQuIENob3NlbiBzdWNoIHRoYXQgYXQgMSB0b2tlbiB0b3RhbCBzdXBwbHkKCS8vIHRoZSBhbW91bnQgaW4gcmVzZXJ2ZSBpcyAwLjUgZXRoZXIgYW5kIHRva2VuIHByaWNlIGlzIDEgRXRoZXIuCglpbnQgY29uc3RhbnQgcHJpY2VfY29lZmYgPSAtMHgyOTZBQkY3ODRBMzU4NDY4QzsKCgkvLyBUeXBpY2FsIHZhbHVlcyB0aGF0IHdlIGhhdmUgdG8gZGVjbGFyZS4KCXN0cmluZyBjb25zdGFudCBwdWJsaWMgbmFtZSA9ICJCaXpQeXJhbWlkIjsgLy8gVGhpcyBpc24ndCBhbiBFUkMyMCB0b2tlbiBhbnltb3JlIHNvIHRoaXMgaXMganVzdCBmbHVmZgoJc3RyaW5nIGNvbnN0YW50IHB1YmxpYyBzeW1ib2wgPSAiQlpQWSI7IC8vIE1lYW5zIGxpdGVyYWxseSBub3RoaW5nIG5vdwoJdWludDggY29uc3RhbnQgcHVibGljIGRlY2ltYWxzID0gMTg7CgoJLy8gQXJyYXkgYmV0d2VlbiBlYWNoIGFkZHJlc3MgYW5kIHRoZWlyIG51bWJlciBvZiB0b2tlbnMuCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHRva2VuQmFsYW5jZTsKCQkKCS8vIEFycmF5IGJldHdlZW4gZWFjaCBhZGRyZXNzIGFuZCBob3cgbXVjaCBFdGhlciBoYXMgYmVlbiBwYWlkIG91dCB0byBpdC4KCS8vIE5vdGUgdGhhdCB0aGlzIGlzIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgltYXBwaW5nKGFkZHJlc3MgPT4gaW50MjU2KSBwdWJsaWMgcGF5b3V0czsKCgkvLyBWYXJpYWJsZSB0cmFja2luZyBob3cgbWFueSB0b2tlbnMgYXJlIGluIGV4aXN0ZW5jZSBvdmVyYWxsLgoJdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgoJLy8gQWdncmVnYXRlIHN1bSBvZiBhbGwgcGF5b3V0cy4KCS8vIE5vdGUgdGhhdCB0aGlzIGlzIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCglpbnQyNTYgdG90YWxQYXlvdXRzOwoKCS8vIFZhcmlhYmxlIHRyYWNraW5nIGhvdyBtdWNoIEV0aGVyIGVhY2ggdG9rZW4gaXMgY3VycmVudGx5IHdvcnRoLgoJLy8gTm90ZSB0aGF0IHRoaXMgaXMgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCXVpbnQyNTYgZWFybmluZ3NQZXJUb2tlbjsKCQoJLy8gQ3VycmVudCBjb250cmFjdCBiYWxhbmNlIGluIEV0aGVyCgl1aW50MjU2IHB1YmxpYyBjb250cmFjdEJhbGFuY2U7CgoJZnVuY3Rpb24gQml6UHlyYW1pZCgpIHB1YmxpYyB7CgkJCgkJLy8gVGhpcyBtYWtlcyBzdXJlIHRoZSBjb250cmFjdCBiZWdpbnMgb3BlcmF0aW5nIDI0IGhvdXJzIGFmdGVyCgkJLy8gY3JlYXRpb24sIGdpdmUgb3IgdGFrZSBhIGZldyBtaW51dGVzIGJlY2F1c2UgdmFyeWluZyBibG9jayB0aW1lcwoJCWxhdW5jaFRpbWUgPSBub3cgKyAxIGRheXM7CgkJCgl9CgoJLy8gVGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgYXJlIHVzZWQgYnkgdGhlIGZyb250LWVuZCBmb3IgZGlzcGxheSBwdXJwb3Nlcy4KCgkvLyBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdG9rZW5zIGN1cnJlbnRseSBoZWxkIGJ5IF9vd25lci4KCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewoJCXJldHVybiB0b2tlbkJhbGFuY2VbX293bmVyXTsKCX0KCgkvLyBXaXRoZHJhd3MgYWxsIGRpdmlkZW5kcyBoZWxkIGJ5IHRoZSBjYWxsZXIgc2VuZGluZyB0aGUgdHJhbnNhY3Rpb24sIHVwZGF0ZXMKCS8vIHRoZSByZXF1aXNpdGUgZ2xvYmFsIHZhcmlhYmxlcywgYW5kIHRyYW5zZmVycyBFdGhlciBiYWNrIHRvIHRoZSBjYWxsZXIuCglmdW5jdGlvbiB3aXRoZHJhdygpIGlzT3BlbiBwdWJsaWMgewoJCS8vIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhZGRyZXNzIHRoZSByZXF1ZXN0IGNhbWUgZnJvbS4KCQl2YXIgYmFsYW5jZSA9IGRpdmlkZW5kcyhtc2cuc2VuZGVyKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dHMgYXJyYXksIGluY3JlbWVudGluZyB0aGUgcmVxdWVzdCBhZGRyZXNzIGJ5IGBiYWxhbmNlYC4KCQlwYXlvdXRzW21zZy5zZW5kZXJdICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEluY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gU2VuZCB0aGUgZGl2aWRlbmRzIHRvIHRoZSBhZGRyZXNzIHRoYXQgcmVxdWVzdGVkIHRoZSB3aXRoZHJhdy4KCQljb250cmFjdEJhbGFuY2UgPSBzdWIoY29udHJhY3RCYWxhbmNlLCBiYWxhbmNlKTsKCQltc2cuc2VuZGVyLnRyYW5zZmVyKGJhbGFuY2UpOwoJfQoKCS8vIENvbnZlcnRzIHRoZSBFdGhlciBhY2NydWVkIGFzIGRpdmlkZW5kcyBiYWNrIGludG8gRVBZIHRva2VucyB3aXRob3V0IGhhdmluZyB0bwoJLy8gd2l0aGRyYXcgaXQgZmlyc3QuIFNhdmVzIG9uIGdhcyBhbmQgcG90ZW50aWFsIHByaWNlIHNwaWtlIGxvc3MuCglmdW5jdGlvbiByZWludmVzdERpdmlkZW5kcygpIGlzT3BlbiBwdWJsaWMgewoJCS8vIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhZGRyZXNzIHRoZSByZXF1ZXN0IGNhbWUgZnJvbS4KCQl2YXIgYmFsYW5jZSA9IGRpdmlkZW5kcyhtc2cuc2VuZGVyKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dHMgYXJyYXksIGluY3JlbWVudGluZyB0aGUgcmVxdWVzdCBhZGRyZXNzIGJ5IGBiYWxhbmNlYC4KCQkvLyBTaW5jZSB0aGlzIGlzIGVzc2VudGlhbGx5IGEgc2hvcnRjdXQgdG8gd2l0aGRyYXdpbmcgYW5kIHJlaW52ZXN0aW5nLCB0aGlzIHN0ZXAgc3RpbGwgaG9sZHMuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEFzc2lnbiBiYWxhbmNlIHRvIGEgbmV3IHZhcmlhYmxlLgoJCXVpbnQgdmFsdWVfID0gKHVpbnQpIChiYWxhbmNlKTsKCQkKCQkvLyBJZiB5b3VyIGRpdmlkZW5kcyBhcmUgd29ydGggbGVzcyB0aGFuIDEgc3phYm8sIG9yIG1vcmUgdGhhbiBhIG1pbGxpb24gRXRoZXIKCQkvLyAoaW4gd2hpY2ggY2FzZSwgd2h5IGFyZSB5b3UgZXZlbiBoZXJlKSwgYWJvcnQuCgkJaWYgKHZhbHVlXyA8IDAuMDAwMDAxIGV0aGVyIHx8IHZhbHVlXyA+IDEwMDAwMDAgZXRoZXIpCgkJCXJldmVydCgpOwoJCQkKCQkvLyBtc2cuc2VuZGVyIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSBjYWxsZXIuCgkJdmFyIHNlbmRlciA9IG1zZy5zZW5kZXI7CgkJCgkJLy8gQSB0ZW1wb3JhcnkgcmVzZXJ2ZSB2YXJpYWJsZSB1c2VkIGZvciBjYWxjdWxhdGluZyB0aGUgcmV3YXJkIHRoZSBob2xkZXIgZ2V0cyBmb3IgYnV5aW5nIHRva2Vucy4KCQkvLyAoWWVzLCB0aGUgYnV5ZXIgcmVjZWl2ZXMgYSBwYXJ0IG9mIHRoZSBkaXN0cmlidXRpb24gYXMgd2VsbCEpCgkJdmFyIHJlcyA9IHJlc2VydmUoKSAtIGJhbGFuY2U7CgoJCS8vIDEwJSBvZiB0aGUgdG90YWwgRXRoZXIgc2VudCBpcyB1c2VkIHRvIHBheSBleGlzdGluZyBob2xkZXJzLgoJCXZhciBmZWUgPSBkaXYodmFsdWVfLCAxMCk7CgkJCgkJLy8gVGhlIGFtb3VudCBvZiBFdGhlciB1c2VkIHRvIHB1cmNoYXNlIG5ldyB0b2tlbnMgZm9yIHRoZSBjYWxsZXIuCgkJdmFyIG51bUV0aGVyID0gdmFsdWVfIC0gZmVlOwoJCQoJCS8vIFRoZSBudW1iZXIgb2YgdG9rZW5zIHdoaWNoIGNhbiBiZSBwdXJjaGFzZWQgZm9yIG51bUV0aGVyLgoJCXZhciBudW1Ub2tlbnMgPSBjYWxjdWxhdGVEaXZpZGVuZFRva2VucyhudW1FdGhlciwgYmFsYW5jZSk7CgkJCgkJLy8gVGhlIGJ1eWVyIGZlZSwgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCQl2YXIgYnV5ZXJGZWUgPSBmZWUgKiBzY2FsZUZhY3RvcjsKCQkKCQkvLyBDaGVjayB0aGF0IHdlIGhhdmUgdG9rZW5zIGluIGV4aXN0ZW5jZSAodGhpcyBzaG91bGQgYWx3YXlzIGJlIHRydWUpLCBvcgoJCS8vIGVsc2UgeW91J3JlIGdvbm5hIGhhdmUgYSBiYWQgdGltZS4KCQlpZiAodG90YWxTdXBwbHkgPiAwKSB7CgkJCS8vIENvbXB1dGUgdGhlIGJvbnVzIGNvLWVmZmljaWVudCBmb3IgYWxsIGV4aXN0aW5nIGhvbGRlcnMgYW5kIHRoZSBidXllci4KCQkJLy8gVGhlIGJ1eWVyIHJlY2VpdmVzIHBhcnQgb2YgdGhlIGRpc3RyaWJ1dGlvbiBmb3IgZWFjaCB0b2tlbiBib3VnaHQgaW4gdGhlCgkJCS8vIHNhbWUgd2F5IHRoZXkgd291bGQgaGF2ZSBpZiB0aGV5IGJvdWdodCBlYWNoIHRva2VuIGluZGl2aWR1YWxseS4KCQkJdmFyIGJvbnVzQ29FZmYgPQoJCQkgICAgKHNjYWxlRmFjdG9yIC0gKHJlcyArIG51bUV0aGVyKSAqIG51bVRva2VucyAqIHNjYWxlRmFjdG9yIC8gKHRvdGFsU3VwcGx5ICsgbnVtVG9rZW5zKSAvIG51bUV0aGVyKQoJCQkgICAgKiAodWludCkoY3JyX2QpIC8gKHVpbnQpKGNycl9kLWNycl9uKTsKCQkJCQoJCQkvLyBUaGUgdG90YWwgcmV3YXJkIHRvIGJlIGRpc3RyaWJ1dGVkIGFtb25nc3QgdGhlIG1hc3NlcyBpcyB0aGUgZmVlIChpbiBFdGhlcikKCQkJLy8gbXVsdGlwbGllZCBieSB0aGUgYm9udXMgY28tZWZmaWNpZW50LgoJCQl2YXIgaG9sZGVyUmV3YXJkID0gZmVlICogYm9udXNDb0VmZjsKCQkJCgkJCWJ1eWVyRmVlIC09IGhvbGRlclJld2FyZDsKCgkJCS8vIEZlZSBpcyBkaXN0cmlidXRlZCB0byBhbGwgZXhpc3RpbmcgdG9rZW4gaG9sZGVycyBiZWZvcmUgdGhlIG5ldyB0b2tlbnMgYXJlIHB1cmNoYXNlZC4KCQkJLy8gcmV3YXJkUGVyU2hhcmUgaXMgdGhlIGFtb3VudCBnYWluZWQgcGVyIHRva2VuIHRoYW5rcyB0byB0aGlzIGJ1eS1pbi4KCQkJdmFyIHJld2FyZFBlclNoYXJlID0gaG9sZGVyUmV3YXJkIC8gdG90YWxTdXBwbHk7CgkJCQoJCQkvLyBUaGUgRXRoZXIgdmFsdWUgcGVyIHRva2VuIGlzIGluY3JlYXNlZCBwcm9wb3J0aW9uYWxseS4KCQkJZWFybmluZ3NQZXJUb2tlbiArPSByZXdhcmRQZXJTaGFyZTsKCQl9CgkJCgkJLy8gQWRkIHRoZSBudW1Ub2tlbnMgd2hpY2ggd2VyZSBqdXN0IGNyZWF0ZWQgdG8gdGhlIHRvdGFsIHN1cHBseS4gV2UncmUgYSBjcnlwdG8gY2VudHJhbCBiYW5rIQoJCXRvdGFsU3VwcGx5ID0gYWRkKHRvdGFsU3VwcGx5LCBudW1Ub2tlbnMpOwoJCQoJCS8vIEFzc2lnbiB0aGUgdG9rZW5zIHRvIHRoZSBiYWxhbmNlIG9mIHRoZSBidXllci4KCQl0b2tlbkJhbGFuY2Vbc2VuZGVyXSA9IGFkZCh0b2tlbkJhbGFuY2Vbc2VuZGVyXSwgbnVtVG9rZW5zKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dCBhcnJheSBzbyB0aGF0IHRoZSBidXllciBjYW5ub3QgY2xhaW0gZGl2aWRlbmRzIG9uIHByZXZpb3VzIHB1cmNoYXNlcy4KCQkvLyBBbHNvIGluY2x1ZGUgdGhlIGZlZSBwYWlkIGZvciBlbnRlcmluZyB0aGUgc2NoZW1lLgoJCS8vIEZpcnN0IHdlIGNvbXB1dGUgaG93IG11Y2ggd2FzIGp1c3QgcGFpZCBvdXQgdG8gdGhlIGJ1eWVyLi4uCgkJdmFyIHBheW91dERpZmYgID0gKGludDI1NikgKChlYXJuaW5nc1BlclRva2VuICogbnVtVG9rZW5zKSAtIGJ1eWVyRmVlKTsKCQkKCQkvLyBUaGVuIHdlIHVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSBmb3IgdGhlIGJ1eWVyIHdpdGggdGhpcyBhbW91bnQuLi4KCQlwYXlvdXRzW3NlbmRlcl0gKz0gcGF5b3V0RGlmZjsKCQkKCQkvLyBBbmQgdGhlbiB3ZSBmaW5hbGx5IGFkZCBpdCB0byB0aGUgdmFyaWFibGUgdHJhY2tpbmcgdGhlIHRvdGFsIGFtb3VudCBzcGVudCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyAgICArPSBwYXlvdXREaWZmOwoJCQoJfQoKCS8vIFNlbGxzIHlvdXIgdG9rZW5zIGZvciBFdGhlci4gVGhpcyBFdGhlciBpcyBhc3NpZ25lZCB0byB0aGUgY2FsbGVycyBlbnRyeQoJLy8gaW4gdGhlIHRva2VuQmFsYW5jZSBhcnJheSwgYW5kIHRoZXJlZm9yZSBpcyBzaG93biBhcyBhIGRpdmlkZW5kLiBBIHNlY29uZAoJLy8gY2FsbCB0byB3aXRoZHJhdygpIG11c3QgYmUgbWFkZSB0byBpbnZva2UgdGhlIHRyYW5zZmVyIG9mIEV0aGVyIGJhY2sgdG8geW91ciBhZGRyZXNzLgoJZnVuY3Rpb24gc2VsbE15VG9rZW5zKCkgaXNPcGVuIHB1YmxpYyB7CgkJdmFyIGJhbGFuY2UgPSBiYWxhbmNlT2YobXNnLnNlbmRlcik7CgkJc2VsbChiYWxhbmNlKTsKCX0KCgkvLyBUaGUgc2xhbS10aGUtYnV0dG9uIGVzY2FwZSBoYXRjaC4gU2VsbHMgdGhlIGNhbGxlcnMgdG9rZW5zIGZvciBFdGhlciwgdGhlbiBpbW1lZGlhdGVseQoJLy8gaW52b2tlcyB0aGUgd2l0aGRyYXcoKSBmdW5jdGlvbiwgc2VuZGluZyB0aGUgcmVzdWx0aW5nIEV0aGVyIHRvIHRoZSBjYWxsZXJzIGFkZHJlc3MuCiAgICBmdW5jdGlvbiBnZXRNZU91dE9mSGVyZSgpIGlzT3BlbiBwdWJsaWMgewoJCXNlbGxNeVRva2VucygpOwogICAgICAgIHdpdGhkcmF3KCk7Cgl9CgoJLy8gR2F0ZWtlZXBlciBmdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgYW1vdW50IG9mIEV0aGVyIGJlaW5nIHNlbnQgaXNuJ3QgZWl0aGVyCgkvLyB0b28gc21hbGwgb3IgdG9vIGxhcmdlLiBJZiBpdCBwYXNzZXMsIGdvZXMgZGlyZWN0IHRvIGJ1eSgpLgoJZnVuY3Rpb24gZnVuZCgpIGlzT3BlbiBwYXlhYmxlIHB1YmxpYyB7CgkJLy8gRG9uJ3QgYWxsb3cgZm9yIGZ1bmRpbmcgaWYgdGhlIGFtb3VudCBvZiBFdGhlciBzZW50IGlzIGxlc3MgdGhhbiAxIHN6YWJvLgoJCWlmIChtc2cudmFsdWUgPiAwLjAwMDAwMSBldGhlcikgewoJCSAgICBjb250cmFjdEJhbGFuY2UgPSBhZGQoY29udHJhY3RCYWxhbmNlLCBtc2cudmFsdWUpOwoJCQlidXkoKTsKCQl9IGVsc2UgewoJCQlyZXZlcnQoKTsKCQl9CiAgICB9CgoJLy8gRnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSAoZHluYW1pYykgcHJpY2Ugb2YgYnV5aW5nIGEgZmlubmV5IHdvcnRoIG9mIHRva2Vucy4KCWZ1bmN0aW9uIGJ1eVByaWNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKCQlyZXR1cm4gZ2V0VG9rZW5zRm9yRXRoZXIoMSBmaW5uZXkpOwoJfQoKCS8vIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgKGR5bmFtaWMpIHByaWNlIG9mIHNlbGxpbmcgYSBzaW5nbGUgdG9rZW4uCglmdW5jdGlvbiBzZWxsUHJpY2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHZhciBldGggPSBnZXRFdGhlckZvclRva2VucygxIGZpbm5leSk7CiAgICAgICAgdmFyIGZlZSA9IGRpdihldGgsIDEwKTsKICAgICAgICByZXR1cm4gZXRoIC0gZmVlOwogICAgfQoKCS8vIENhbGN1bGF0ZSB0aGUgY3VycmVudCBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjYWxsZXIgYWRkcmVzcy4gVGhpcyBpcyB0aGUgbmV0IHJlc3VsdAoJLy8gb2YgbXVsdGlwbHlpbmcgdGhlIG51bWJlciBvZiB0b2tlbnMgaGVsZCBieSB0aGVpciBjdXJyZW50IHZhbHVlIGluIEV0aGVyIGFuZCBzdWJ0cmFjdGluZyB0aGUKCS8vIEV0aGVyIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBwYWlkIG91dC4KCWZ1bmN0aW9uIGRpdmlkZW5kcyhhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW1vdW50KSB7CgkJcmV0dXJuICh1aW50MjU2KSAoKGludDI1NikoZWFybmluZ3NQZXJUb2tlbiAqIHRva2VuQmFsYW5jZVtfb3duZXJdKSAtIHBheW91dHNbX293bmVyXSkgLyBzY2FsZUZhY3RvcjsKCX0KCgkvLyBWZXJzaW9uIG9mIHdpdGhkcmF3IHRoYXQgZXh0cmFjdHMgdGhlIGRpdmlkZW5kcyBhbmQgc2VuZHMgdGhlIEV0aGVyIHRvIHRoZSBjYWxsZXIuCgkvLyBUaGlzIGlzIG9ubHkgdXNlZCBpbiB0aGUgY2FzZSB3aGVuIHRoZXJlIGlzIG5vIHRyYW5zYWN0aW9uIGRhdGEsIGFuZCB0aGF0IHNob3VsZCBiZQoJLy8gcXVpdGUgcmFyZSB1bmxlc3MgaW50ZXJhY3RpbmcgZGlyZWN0bHkgd2l0aCB0aGUgc21hcnQgY29udHJhY3QuCglmdW5jdGlvbiB3aXRoZHJhd09sZChhZGRyZXNzIHRvKSBpc09wZW4gcHVibGljIHsKCQkvLyBSZXRyaWV2ZSB0aGUgZGl2aWRlbmRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWRkcmVzcyB0aGUgcmVxdWVzdCBjYW1lIGZyb20uCgkJdmFyIGJhbGFuY2UgPSBkaXZpZGVuZHMobXNnLnNlbmRlcik7CgkJCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5LCBpbmNyZW1lbnRpbmcgdGhlIHJlcXVlc3QgYWRkcmVzcyBieSBgYmFsYW5jZWAuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIFNlbmQgdGhlIGRpdmlkZW5kcyB0byB0aGUgYWRkcmVzcyB0aGF0IHJlcXVlc3RlZCB0aGUgd2l0aGRyYXcuCgkJY29udHJhY3RCYWxhbmNlID0gc3ViKGNvbnRyYWN0QmFsYW5jZSwgYmFsYW5jZSk7CgkJdG8udHJhbnNmZXIoYmFsYW5jZSk7CQkKCX0KCgkvLyBJbnRlcm5hbCBiYWxhbmNlIGZ1bmN0aW9uLCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgZHluYW1pYyByZXNlcnZlIHZhbHVlLgoJZnVuY3Rpb24gYmFsYW5jZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW1vdW50KSB7CgkJLy8gbXNnLnZhbHVlIGlzIHRoZSBhbW91bnQgb2YgRXRoZXIgc2VudCBieSB0aGUgdHJhbnNhY3Rpb24uCgkJcmV0dXJuIGNvbnRyYWN0QmFsYW5jZSAtIG1zZy52YWx1ZTsKCX0KCglmdW5jdGlvbiBidXkoKSBpbnRlcm5hbCB7CgkJLy8gQW55IHRyYW5zYWN0aW9uIG9mIGxlc3MgdGhhbiAxIHN6YWJvIGlzIGxpa2VseSB0byBiZSB3b3J0aCBsZXNzIHRoYW4gdGhlIGdhcyB1c2VkIHRvIHNlbmQgaXQuCgkJaWYgKG1zZy52YWx1ZSA8IDAuMDAwMDAxIGV0aGVyIHx8IG1zZy52YWx1ZSA+IDEwMDAwMDAgZXRoZXIpCgkJCXJldmVydCgpOwoJCQkJCQkKCQkvLyBtc2cuc2VuZGVyIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSBjYWxsZXIuCgkJdmFyIHNlbmRlciA9IG1zZy5zZW5kZXI7CgkJCgkJLy8gMTAlIG9mIHRoZSB0b3RhbCBFdGhlciBzZW50IGlzIHVzZWQgdG8gcGF5IGV4aXN0aW5nIGhvbGRlcnMuCgkJdmFyIGZlZSA9IGRpdihtc2cudmFsdWUsIDEwKTsKCQkKCQkvLyBUaGUgYW1vdW50IG9mIEV0aGVyIHVzZWQgdG8gcHVyY2hhc2UgbmV3IHRva2VucyBmb3IgdGhlIGNhbGxlci4KCQl2YXIgbnVtRXRoZXIgPSBtc2cudmFsdWUgLSBmZWU7CgkJCgkJLy8gVGhlIG51bWJlciBvZiB0b2tlbnMgd2hpY2ggY2FuIGJlIHB1cmNoYXNlZCBmb3IgbnVtRXRoZXIuCgkJdmFyIG51bVRva2VucyA9IGdldFRva2Vuc0ZvckV0aGVyKG51bUV0aGVyKTsKCQkKCQkvLyBUaGUgYnV5ZXIgZmVlLCBzY2FsZWQgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJCXZhciBidXllckZlZSA9IGZlZSAqIHNjYWxlRmFjdG9yOwoJCQoJCS8vIENoZWNrIHRoYXQgd2UgaGF2ZSB0b2tlbnMgaW4gZXhpc3RlbmNlICh0aGlzIHNob3VsZCBhbHdheXMgYmUgdHJ1ZSksIG9yCgkJLy8gZWxzZSB5b3UncmUgZ29ubmEgaGF2ZSBhIGJhZCB0aW1lLgoJCWlmICh0b3RhbFN1cHBseSA+IDApIHsKCQkJLy8gQ29tcHV0ZSB0aGUgYm9udXMgY28tZWZmaWNpZW50IGZvciBhbGwgZXhpc3RpbmcgaG9sZGVycyBhbmQgdGhlIGJ1eWVyLgoJCQkvLyBUaGUgYnV5ZXIgcmVjZWl2ZXMgcGFydCBvZiB0aGUgZGlzdHJpYnV0aW9uIGZvciBlYWNoIHRva2VuIGJvdWdodCBpbiB0aGUKCQkJLy8gc2FtZSB3YXkgdGhleSB3b3VsZCBoYXZlIGlmIHRoZXkgYm91Z2h0IGVhY2ggdG9rZW4gaW5kaXZpZHVhbGx5LgoJCQl2YXIgYm9udXNDb0VmZiA9CgkJCSAgICAoc2NhbGVGYWN0b3IgLSAocmVzZXJ2ZSgpICsgbnVtRXRoZXIpICogbnVtVG9rZW5zICogc2NhbGVGYWN0b3IgLyAodG90YWxTdXBwbHkgKyBudW1Ub2tlbnMpIC8gbnVtRXRoZXIpCgkJCSAgICAqICh1aW50KShjcnJfZCkgLyAodWludCkoY3JyX2QtY3JyX24pOwoJCQkJCgkJCS8vIFRoZSB0b3RhbCByZXdhcmQgdG8gYmUgZGlzdHJpYnV0ZWQgYW1vbmdzdCB0aGUgbWFzc2VzIGlzIHRoZSBmZWUgKGluIEV0aGVyKQoJCQkvLyBtdWx0aXBsaWVkIGJ5IHRoZSBib251cyBjby1lZmZpY2llbnQuCgkJCXZhciBob2xkZXJSZXdhcmQgPSBmZWUgKiBib251c0NvRWZmOwoJCQkKCQkJYnV5ZXJGZWUgLT0gaG9sZGVyUmV3YXJkOwoKCQkJLy8gRmVlIGlzIGRpc3RyaWJ1dGVkIHRvIGFsbCBleGlzdGluZyB0b2tlbiBob2xkZXJzIGJlZm9yZSB0aGUgbmV3IHRva2VucyBhcmUgcHVyY2hhc2VkLgoJCQkvLyByZXdhcmRQZXJTaGFyZSBpcyB0aGUgYW1vdW50IGdhaW5lZCBwZXIgdG9rZW4gdGhhbmtzIHRvIHRoaXMgYnV5LWluLgoJCQl2YXIgcmV3YXJkUGVyU2hhcmUgPSBob2xkZXJSZXdhcmQgLyB0b3RhbFN1cHBseTsKCQkJCgkJCS8vIFRoZSBFdGhlciB2YWx1ZSBwZXIgdG9rZW4gaXMgaW5jcmVhc2VkIHByb3BvcnRpb25hbGx5LgoJCQllYXJuaW5nc1BlclRva2VuICs9IHJld2FyZFBlclNoYXJlOwoJCQkKCQl9CgoJCS8vIEFkZCB0aGUgbnVtVG9rZW5zIHdoaWNoIHdlcmUganVzdCBjcmVhdGVkIHRvIHRoZSB0b3RhbCBzdXBwbHkuIFdlJ3JlIGEgY3J5cHRvIGNlbnRyYWwgYmFuayEKCQl0b3RhbFN1cHBseSA9IGFkZCh0b3RhbFN1cHBseSwgbnVtVG9rZW5zKTsKCgkJLy8gQXNzaWduIHRoZSB0b2tlbnMgdG8gdGhlIGJhbGFuY2Ugb2YgdGhlIGJ1eWVyLgoJCXRva2VuQmFsYW5jZVtzZW5kZXJdID0gYWRkKHRva2VuQmFsYW5jZVtzZW5kZXJdLCBudW1Ub2tlbnMpOwoKCQkvLyBVcGRhdGUgdGhlIHBheW91dCBhcnJheSBzbyB0aGF0IHRoZSBidXllciBjYW5ub3QgY2xhaW0gZGl2aWRlbmRzIG9uIHByZXZpb3VzIHB1cmNoYXNlcy4KCQkvLyBBbHNvIGluY2x1ZGUgdGhlIGZlZSBwYWlkIGZvciBlbnRlcmluZyB0aGUgc2NoZW1lLgoJCS8vIEZpcnN0IHdlIGNvbXB1dGUgaG93IG11Y2ggd2FzIGp1c3QgcGFpZCBvdXQgdG8gdGhlIGJ1eWVyLi4uCgkJdmFyIHBheW91dERpZmYgPSAoaW50MjU2KSAoKGVhcm5pbmdzUGVyVG9rZW4gKiBudW1Ub2tlbnMpIC0gYnV5ZXJGZWUpOwoJCQoJCS8vIFRoZW4gd2UgdXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5IGZvciB0aGUgYnV5ZXIgd2l0aCB0aGlzIGFtb3VudC4uLgoJCXBheW91dHNbc2VuZGVyXSArPSBwYXlvdXREaWZmOwoJCQoJCS8vIEFuZCB0aGVuIHdlIGZpbmFsbHkgYWRkIGl0IHRvIHRoZSB2YXJpYWJsZSB0cmFja2luZyB0aGUgdG90YWwgYW1vdW50IHNwZW50IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICAgICs9IHBheW91dERpZmY7CgkJCgl9CgoJLy8gU2VsbCBmdW5jdGlvbiB0aGF0IHRha2VzIHRva2VucyBhbmQgY29udmVydHMgdGhlbSBpbnRvIEV0aGVyLiBBbHNvIGNvbWVzIHdpdGggYSAxMCUgZmVlCgkvLyB0byBkaXNjb3VyYWdpbmcgZHVtcGluZywgYW5kIG1lYW5zIHRoYXQgaWYgc29tZW9uZSBuZWFyIHRoZSB0b3Agc2VsbHMsIHRoZSBmZWUgZGlzdHJpYnV0ZWQKCS8vIHdpbGwgYmUgKnNpZ25pZmljYW50Ki4KCWZ1bmN0aW9uIHNlbGwodWludDI1NiBhbW91bnQpIGludGVybmFsIHsKCSAgICAvLyBDYWxjdWxhdGUgdGhlIGFtb3VudCBvZiBFdGhlciB0aGF0IHRoZSBob2xkZXJzIHRva2VucyBzZWxsIGZvciBhdCB0aGUgY3VycmVudCBzZWxsIHByaWNlLgoJCXZhciBudW1FdGhlcnNCZWZvcmVGZWUgPSBnZXRFdGhlckZvclRva2VucyhhbW91bnQpOwoJCQoJCS8vIDEwJSBvZiB0aGUgcmVzdWx0aW5nIEV0aGVyIGlzIHVzZWQgdG8gcGF5IHJlbWFpbmluZyBob2xkZXJzLgogICAgICAgIHZhciBmZWUgPSBkaXYobnVtRXRoZXJzQmVmb3JlRmVlLCAxMCk7CgkJCgkJLy8gTmV0IEV0aGVyIGZvciB0aGUgc2VsbGVyIGFmdGVyIHRoZSBmZWUgaGFzIGJlZW4gc3VidHJhY3RlZC4KICAgICAgICB2YXIgbnVtRXRoZXJzID0gbnVtRXRoZXJzQmVmb3JlRmVlIC0gZmVlOwoJCQoJCS8vICpSZW1vdmUqIHRoZSBudW1Ub2tlbnMgd2hpY2ggd2VyZSBqdXN0IHNvbGQgZnJvbSB0aGUgdG90YWwgc3VwcGx5LiBXZSdyZSAvZGVmaW5pdGVseS8gYSBjcnlwdG8gY2VudHJhbCBiYW5rLgoJCXRvdGFsU3VwcGx5ID0gc3ViKHRvdGFsU3VwcGx5LCBhbW91bnQpOwoJCQogICAgICAgIC8vIFJlbW92ZSB0aGUgdG9rZW5zIGZyb20gdGhlIGJhbGFuY2Ugb2YgdGhlIGJ1eWVyLgoJCXRva2VuQmFsYW5jZVttc2cuc2VuZGVyXSA9IHN1Yih0b2tlbkJhbGFuY2VbbXNnLnNlbmRlcl0sIGFtb3VudCk7CgogICAgICAgIC8vIFVwZGF0ZSB0aGUgcGF5b3V0IGFycmF5IHNvIHRoYXQgdGhlIHNlbGxlciBjYW5ub3QgY2xhaW0gZnV0dXJlIGRpdmlkZW5kcyB1bmxlc3MgdGhleSBidXkgYmFjayBpbi4KCQkvLyBGaXJzdCB3ZSBjb21wdXRlIGhvdyBtdWNoIHdhcyBqdXN0IHBhaWQgb3V0IHRvIHRoZSBzZWxsZXIuLi4KCQl2YXIgcGF5b3V0RGlmZiA9IChpbnQyNTYpIChlYXJuaW5nc1BlclRva2VuICogYW1vdW50ICsgKG51bUV0aGVycyAqIHNjYWxlRmFjdG9yKSk7CgkJCiAgICAgICAgLy8gV2UgcmVkdWNlIHRoZSBhbW91bnQgcGFpZCBvdXQgdG8gdGhlIHNlbGxlciAodGhpcyBlZmZlY3RpdmVseSByZXNldHMgdGhlaXIgcGF5b3V0cyB2YWx1ZSB0byB6ZXJvLAoJCS8vIHNpbmNlIHRoZXkncmUgc2VsbGluZyBhbGwgb2YgdGhlaXIgdG9rZW5zKS4gVGhpcyBtYWtlcyBzdXJlIHRoZSBzZWxsZXIgaXNuJ3QgZGlzYWR2YW50YWdlZCBpZgoJCS8vIHRoZXkgZGVjaWRlIHRvIGJ1eSBiYWNrIGluLgoJCXBheW91dHNbbXNnLnNlbmRlcl0gLT0gcGF5b3V0RGlmZjsJCQoJCQoJCS8vIERlY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KICAgICAgICB0b3RhbFBheW91dHMgLT0gcGF5b3V0RGlmZjsKCQkKCQkvLyBDaGVjayB0aGF0IHdlIGhhdmUgdG9rZW5zIGluIGV4aXN0ZW5jZSAodGhpcyBpcyBhIGJpdCBvZiBhbiBpcnJlbGV2YW50IGNoZWNrIHNpbmNlIHdlJ3JlCgkJLy8gc2VsbGluZyB0b2tlbnMsIGJ1dCBpdCBndWFyZHMgYWdhaW5zdCBkaXZpc2lvbiBieSB6ZXJvKS4KCQlpZiAodG90YWxTdXBwbHkgPiAwKSB7CgkJCS8vIFNjYWxlIHRoZSBFdGhlciB0YWtlbiBhcyB0aGUgc2VsbGluZyBmZWUgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJCQl2YXIgZXRoZXJGZWUgPSBmZWUgKiBzY2FsZUZhY3RvcjsKCQkJCgkJCS8vIEZlZSBpcyBkaXN0cmlidXRlZCB0byBhbGwgcmVtYWluaW5nIHRva2VuIGhvbGRlcnMuCgkJCS8vIHJld2FyZFBlclNoYXJlIGlzIHRoZSBhbW91bnQgZ2FpbmVkIHBlciB0b2tlbiB0aGFua3MgdG8gdGhpcyBzZWxsLgoJCQl2YXIgcmV3YXJkUGVyU2hhcmUgPSBldGhlckZlZSAvIHRvdGFsU3VwcGx5OwoJCQkKCQkJLy8gVGhlIEV0aGVyIHZhbHVlIHBlciB0b2tlbiBpcyBpbmNyZWFzZWQgcHJvcG9ydGlvbmFsbHkuCgkJCWVhcm5pbmdzUGVyVG9rZW4gPSBhZGQoZWFybmluZ3NQZXJUb2tlbiwgcmV3YXJkUGVyU2hhcmUpOwoJCX0KCX0KCQoJLy8gRHluYW1pYyB2YWx1ZSBvZiBFdGhlciBpbiByZXNlcnZlLCBhY2NvcmRpbmcgdG8gdGhlIENSUiByZXF1aXJlbWVudC4KCWZ1bmN0aW9uIHJlc2VydmUoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGFtb3VudCkgewoJCXJldHVybiBzdWIoYmFsYW5jZSgpLAoJCQkgKCh1aW50MjU2KSAoKGludDI1NikgKGVhcm5pbmdzUGVyVG9rZW4gKiB0b3RhbFN1cHBseSkgLSB0b3RhbFBheW91dHMpIC8gc2NhbGVGYWN0b3IpKTsKCX0KCgkvLyBDYWxjdWxhdGVzIHRoZSBudW1iZXIgb2YgdG9rZW5zIHRoYXQgY2FuIGJlIGJvdWdodCBmb3IgYSBnaXZlbiBhbW91bnQgb2YgRXRoZXIsIGFjY29yZGluZyB0byB0aGUKCS8vIGR5bmFtaWMgcmVzZXJ2ZSBhbmQgdG90YWxTdXBwbHkgdmFsdWVzIChkZXJpdmVkIGZyb20gdGhlIGJ1eSBhbmQgc2VsbCBwcmljZXMpLgoJZnVuY3Rpb24gZ2V0VG9rZW5zRm9yRXRoZXIodWludDI1NiBldGhlcnZhbHVlKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b2tlbnMpIHsKCQlyZXR1cm4gc3ViKGZpeGVkRXhwKGZpeGVkTG9nKHJlc2VydmUoKSArIGV0aGVydmFsdWUpKmNycl9uL2Nycl9kICsgcHJpY2VfY29lZmYpLCB0b3RhbFN1cHBseSk7Cgl9CgoJLy8gU2VtYW50aWNhbGx5IHNpbWlsYXIgdG8gZ2V0VG9rZW5zRm9yRXRoZXIsIGJ1dCBzdWJ0cmFjdHMgdGhlIGNhbGxlcnMgYmFsYW5jZSBmcm9tIHRoZSBhbW91bnQgb2YgRXRoZXIgcmV0dXJuZWQgZm9yIGNvbnZlcnNpb24uCglmdW5jdGlvbiBjYWxjdWxhdGVEaXZpZGVuZFRva2Vucyh1aW50MjU2IGV0aGVydmFsdWUsIHVpbnQyNTYgc3VidmFsdWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2VucykgewoJCXJldHVybiBzdWIoZml4ZWRFeHAoZml4ZWRMb2cocmVzZXJ2ZSgpIC0gc3VidmFsdWUgKyBldGhlcnZhbHVlKSpjcnJfbi9jcnJfZCArIHByaWNlX2NvZWZmKSwgdG90YWxTdXBwbHkpOwoJfQoKCS8vIENvbnZlcnRzIGEgbnVtYmVyIHRva2VucyBpbnRvIGFuIEV0aGVyIHZhbHVlLgoJZnVuY3Rpb24gZ2V0RXRoZXJGb3JUb2tlbnModWludDI1NiB0b2tlbnMpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGV0aGVydmFsdWUpIHsKCQkvLyBIb3cgbXVjaCByZXNlcnZlIEV0aGVyIGRvIHdlIGhhdmUgbGVmdCBpbiB0aGUgY29udHJhY3Q/CgkJdmFyIHJlc2VydmVBbW91bnQgPSByZXNlcnZlKCk7CgoJCS8vIElmIHlvdSdyZSB0aGUgSGlnaGxhbmRlciAob3IgYmFnaG9sZGVyKSwgeW91IGdldCBUaGUgUHJpemUuIEV2ZXJ5dGhpbmcgbGVmdCBpbiB0aGUgdmF1bHQuCgkJaWYgKHRva2VucyA9PSB0b3RhbFN1cHBseSkKCQkJcmV0dXJuIHJlc2VydmVBbW91bnQ7CgoJCS8vIElmIHRoZXJlIHdvdWxkIGJlIGV4Y2VzcyBFdGhlciBsZWZ0IGFmdGVyIHRoZSB0cmFuc2FjdGlvbiB0aGlzIGlzIGNhbGxlZCB3aXRoaW4sIHJldHVybiB0aGUgRXRoZXIKCQkvLyBjb3JyZXNwb25kaW5nIHRvIHRoZSBlcXVhdGlvbiBpbiBEciBKb2NoZW4gSG9lbmlja2UncyBvcmlnaW5hbCBQb256aSBwYXBlciwgd2hpY2ggY2FuIGJlIGZvdW5kCgkJLy8gYXQgaHR0cHM6Ly90ZXN0LmpvY2hlbi1ob2VuaWNrZS5kZS9ldGgvcG9ueml0b2tlbi8gaW4gdGhlIHRoaXJkIGVxdWF0aW9uLCB3aXRoIHRoZSBDUlIgbnVtZXJhdG9yIAoJCS8vIGFuZCBkZW5vbWluYXRvciBhbHRlcmVkIHRvIDEgYW5kIDIgcmVzcGVjdGl2ZWx5LgoJCXJldHVybiBzdWIocmVzZXJ2ZUFtb3VudCwgZml4ZWRFeHAoKGZpeGVkTG9nKHRvdGFsU3VwcGx5IC0gdG9rZW5zKSAtIHByaWNlX2NvZWZmKSAqIGNycl9kL2Nycl9uKSk7Cgl9CgoJLy8gWW91IGRvbid0IGNhcmUgYWJvdXQgdGhlc2UsIGJ1dCBpZiB5b3UgcmVhbGx5IGRvIHRoZXkncmUgaGV4IHZhbHVlcyBmb3IgCgkvLyBjby1lZmZpY2llbnRzIHVzZWQgdG8gc2ltdWxhdGUgYXBwcm94aW1hdGlvbnMgb2YgdGhlIGxvZyBhbmQgZXhwIGZ1bmN0aW9ucy4KCWludDI1NiAgY29uc3RhbnQgb25lICAgICAgICA9IDB4MTAwMDAwMDAwMDAwMDAwMDA7Cgl1aW50MjU2IGNvbnN0YW50IHNxcnQyICAgICAgPSAweDE2YTA5ZTY2N2YzYmNjOTA4OwoJdWludDI1NiBjb25zdGFudCBzcXJ0ZG90NSAgID0gMHgwYjUwNGYzMzNmOWRlNjQ4NDsKCWludDI1NiAgY29uc3RhbnQgbG4yICAgICAgICA9IDB4MGIxNzIxN2Y3ZDFjZjc5YWM7CglpbnQyNTYgIGNvbnN0YW50IGxuMl82NGRvdDUgPSAweDJjYjUzZjA5ZjA1Y2M2MjdjODsKCWludDI1NiAgY29uc3RhbnQgYzEgICAgICAgICA9IDB4MWZmZmZmZmZmZmY5ZGFjOWI7CglpbnQyNTYgIGNvbnN0YW50IGMzICAgICAgICAgPSAweDBhYWFhYWFhYzE2ODc3OTA4OwoJaW50MjU2ICBjb25zdGFudCBjNSAgICAgICAgID0gMHgwNjY2NjY0ZTVlOWZhMGM5OTsKCWludDI1NiAgY29uc3RhbnQgYzcgICAgICAgICA9IDB4MDQ5MjU0MDI2YTc2MzBhY2Y7CglpbnQyNTYgIGNvbnN0YW50IGM5ICAgICAgICAgPSAweDAzOGJkNzVlZDM3NzUzZDY4OwoJaW50MjU2ICBjb25zdGFudCBjMTEgICAgICAgID0gMHgwMzI4NGEwYzE0NjEwOTI0ZjsKCgkvLyBUaGUgcG9seW5vbWlhbCBSID0gYzEqeCArIGMzKnheMyArIC4uLiArIGMxMSAqIHheMTEKCS8vIGFwcHJveGltYXRlcyB0aGUgZnVuY3Rpb24gbG9nKDEreCktbG9nKDEteCkKCS8vIEhlbmNlIFIocykgPSBsb2coKDErcykvKDEtcykpID0gbG9nKGEpCglmdW5jdGlvbiBmaXhlZExvZyh1aW50MjU2IGEpIGludGVybmFsIHB1cmUgcmV0dXJucyAoaW50MjU2IGxvZykgewoJCWludDMyIHNjYWxlID0gMDsKCQl3aGlsZSAoYSA+IHNxcnQyKSB7CgkJCWEgLz0gMjsKCQkJc2NhbGUrKzsKCQl9CgkJd2hpbGUgKGEgPD0gc3FydGRvdDUpIHsKCQkJYSAqPSAyOwoJCQlzY2FsZS0tOwoJCX0KCQlpbnQyNTYgcyA9ICgoKGludDI1NikoYSkgLSBvbmUpICogb25lKSAvICgoaW50MjU2KShhKSArIG9uZSk7CgkJdmFyIHogPSAocypzKSAvIG9uZTsKCQlyZXR1cm4gc2NhbGUgKiBsbjIgKwoJCQkocyooYzEgKyAoeiooYzMgKyAoeiooYzUgKyAoeiooYzcgKyAoeiooYzkgKyAoeipjMTEvb25lKSkKCQkJCS9vbmUpKS9vbmUpKS9vbmUpKS9vbmUpKS9vbmUpOwoJfQoKCWludDI1NiBjb25zdGFudCBjMiA9ICAweDAyYWFhYWFhYWFhMDE1ZGIwOwoJaW50MjU2IGNvbnN0YW50IGM0ID0gLTB4MDAwYjYwYjYwODA4Mzk5ZDE7CglpbnQyNTYgY29uc3RhbnQgYzYgPSAgMHgwMDAwNDU1OTU2YmNjZGQwNjsKCWludDI1NiBjb25zdGFudCBjOCA9IC0weDAwMDAwMWI4OTNhZDA0YjNhOwoJCgkvLyBUaGUgcG9seW5vbWlhbCBSID0gMiArIGMyKnheMiArIGM0KnheNCArIC4uLgoJLy8gYXBwcm94aW1hdGVzIHRoZSBmdW5jdGlvbiB4KihleHAoeCkrMSkvKGV4cCh4KS0xKQoJLy8gSGVuY2UgZXhwKHgpID0gKFIoeCkreCkvKFIoeCkteCkKCWZ1bmN0aW9uIGZpeGVkRXhwKGludDI1NiBhKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYgZXhwKSB7CgkJaW50MjU2IHNjYWxlID0gKGEgKyAobG4yXzY0ZG90NSkpIC8gbG4yIC0gNjQ7CgkJYSAtPSBzY2FsZSpsbjI7CgkJaW50MjU2IHogPSAoYSphKSAvIG9uZTsKCQlpbnQyNTYgUiA9ICgoaW50MjU2KSgyKSAqIG9uZSkgKwoJCQkoeiooYzIgKyAoeiooYzQgKyAoeiooYzYgKyAoeipjOC9vbmUpKS9vbmUpKS9vbmUpKS9vbmUpOwoJCWV4cCA9ICh1aW50MjU2KSAoKChSICsgYSkgKiBvbmUpIC8gKFIgLSBhKSk7CgkJaWYgKHNjYWxlID49IDApCgkJCWV4cCA8PD0gc2NhbGU7CgkJZWxzZQoJCQlleHAgPj49IC1zY2FsZTsKCQlyZXR1cm4gZXhwOwoJfQoJCgkvLyBUaGUgYmVsb3cgYXJlIHNhZmVtYXRoIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgZm91ciBhcml0aG1ldGljIG9wZXJhdG9ycwoJLy8gZGVzaWduZWQgdG8gZXhwbGljaXRseSBwcmV2ZW50IG92ZXItIGFuZCB1bmRlci1mbG93cyBvZiBpbnRlZ2VyIHZhbHVlcy4KCglmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCWlmIChhID09IDApIHsKCQkJcmV0dXJuIDA7CgkJfQoJCXVpbnQyNTYgYyA9IGEgKiBiOwoJCWFzc2VydChjIC8gYSA9PSBiKTsKCQlyZXR1cm4gYzsKCX0KCglmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCS8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAoJCXVpbnQyNTYgYyA9IGEgLyBiOwoJCS8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCgkJcmV0dXJuIGM7Cgl9CgoJZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCQlhc3NlcnQoYiA8PSBhKTsKCQlyZXR1cm4gYSAtIGI7Cgl9CgoJZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCQl1aW50MjU2IGMgPSBhICsgYjsKCQlhc3NlcnQoYyA+PSBhKTsKCQlyZXR1cm4gYzsKCX0KCgkvLyBUaGlzIGFsbG93cyB5b3UgdG8gYnV5IHRva2VucyBieSBzZW5kaW5nIEV0aGVyIGRpcmVjdGx5IHRvIHRoZSBzbWFydCBjb250cmFjdAoJLy8gd2l0aG91dCBpbmNsdWRpbmcgYW55IHRyYW5zYWN0aW9uIGRhdGEgKHVzZWZ1bCBmb3IsIHNheSwgbW9iaWxlIHdhbGxldCBhcHBzKS4KCWZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKCQkvLyBtc2cudmFsdWUgaXMgdGhlIGFtb3VudCBvZiBFdGhlciBzZW50IGJ5IHRoZSB0cmFuc2FjdGlvbi4KCQlpZiAobXNnLnZhbHVlID4gMCkgewoJCQlmdW5kKCk7CgkJfSBlbHNlIHsKCQkJd2l0aGRyYXdPbGQobXNnLnNlbmRlcik7CgkJfQoJfQp9'.
	

]
