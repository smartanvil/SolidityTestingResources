Class {
	#name : #SRTe75178c6fa2b0f1903145277413c32a00eb8c201,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe75178c6fa2b0f1903145277413c32a00eb8c201 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Ci8vICoqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gMC40LjEzK2NvbW1pdC4wZmI0Y2IxYQovLyBbQXNzaXN0aXZlIFJlYWxpdHkgQVJYIEVSQzIwIHRva2VuICYgY3Jvd2RzYWxlIGNvbnRyYWN0IHcvMTAlIGRldiBhbGxvY10KLy8gW2h0dHBzOi8vYXJvbmxpbmUuaW8vaWNvaW5mb10KLy8gW3YzLjIgZmluYWwgcmVsZWFzZWQgMTAvMDkvMTcgZmluYWwgbWFzdGVyQVJYc2FsZTMybWFpbm5ldC5zb2xdCi8vIFtBZGFwdGVkIGZyb20gRXRoZXJldW0gc3RhbmRhcmQgY3Jvd2RzYWxlIGNvbnRyYWN0XQovLyBbQ29udGFjdCA8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iNDIzMTM2MjMyNDI0MDIyMzMwMmQyYzJlMmIyYzI3NmMyYjJkIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPiBmb3IgYW55IHF1ZXJpZXNdCi8vIFtKb2luIHVzIGluIGNoYW5naW5nIHRoZSB3b3JsZF0KLy8gW2Fyb25saW5lLmlvXQovLyAqKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIEVSQyBUb2tlbiBTdGFuZGFyZCAjMjAgSW50ZXJmYWNlCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIFNlY3VyaXR5IHJldmlld3MgY29tcGxldGVkIDEwLzA5LzE3IFtwYXNzZWQgT0tdCi8vIEZ1bmN0aW9uYWwgcmV2aWV3cyBjb21wbGV0ZWQgMTAvMDkvMTcgW3Bhc3NlZCBPS10KLy8gRmluYWwgY29kZSByZXZpc2lvbiBhbmQgcmVncmVzc2lvbiB0ZXN0IGN5Y2xlIGNvbXBsZXRlIDEwLzA5LzE3IFtwYXNzZWRdCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hc3Npc3RpdmVyZWFsaXR5L2ljby9ibG9iL21hc3Rlci8zLjJjcm93ZHNhbGV0ZXN0c0FSWG1haW5uZXQudHh0Ci8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KY29udHJhY3Qgb3duZWQgeyAvLyBzZWN1cml0eSByZXZpZXdlZCAxMC8wOS8xNwogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgZnVuY3Rpb24gb3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9Cn0KCmNvbnRyYWN0IFNhZmVNYXRoIHsgLy8gc2VjdXJpdHkgcmV2aWV3ZWQgMTAvMDkvMTcKICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIHNhZmVBc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBzYWZlQXNzZXJ0KGIgPiAwKTsKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgc2FmZUFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBzYWZlQXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIHNhZmVBc3NlcnQoYz49YSAmJiBjPj1iKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgaWYgKCFhc3NlcnRpb24pIHJldmVydCgpOwogIH0KfQoKY29udHJhY3QgRVJDMjBJbnRlcmZhY2UgaXMgb3duZWQsIFNhZmVNYXRoIHsgLy8gc2VjdXJpdHkgcmV2aWV3ZWQgMTAvMDkvMTcKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b2tlblRvdGFsU3VwcGx5KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CiAgICBldmVudCBCdXkoYWRkcmVzcyBpbmRleGVkIF9zZW5kZXIsIHVpbnQyNTYgX2V0aCwgdWludDI1NiBfQVJYKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQnVybihhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IFJlZnVuZChhZGRyZXNzIGluZGV4ZWQgX3JlZnVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IEFSWENyb3dkc2FsZSBpcyBFUkMyMEludGVyZmFjZSB7IC8vIHNlY3VyaXR5IHJldmlld2VkIDEwLzA5LzE3CiAgICAvLyBkZXBsb3ltZW50IHZhcmlhYmxlcyBmb3IgZHluYW1pYyBzdXBwbHkgdG9rZW4KICAgIHN0cmluZyAgcHVibGljIGNvbnN0YW50IHN0YW5kYXJkICAgICAgICAgICAgICA9ICJBUlgiOwogICAgc3RyaW5nICBwdWJsaWMgY29uc3RhbnQgbmFtZSAgICAgICAgICAgICAgICAgID0gIkFzc2lzdGl2ZSBSZWFsaXR5IjsKICAgIHN0cmluZyAgcHVibGljIGNvbnN0YW50IHN5bWJvbCAgICAgICAgICAgICAgICA9ICJBUlgiOwogICAgdWludDggICBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgICAgICAgICAgICAgID0gMTg7CiAgICB1aW50MjU2IF90b3RhbFN1cHBseSAgICAgICAgICAgICAgICAgICAgICAgICAgPSAwOwoKICAgIC8vIG11bHRpLXNpZyBhZGRyZXNzZXMgYW5kIHByaWNlIHZhcmlhYmxlCiAgICBhZGRyZXNzIHB1YmxpYyBhZG1pbiA9IG93bmVyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZG1pbiBhZGRyZXNzCiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeU11bHRpU2lnOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiZW5lZmljaWFyeU11bHRpU2lnIChmb3VuZGVyIGdyb3VwKSBtdWx0aS1zaWcgd2FsbGV0IGFjY291bnQKICAgIGFkZHJlc3MgcHVibGljIGZvdW5kYXRpb25GdW5kTXVsdGlzaWc7ICAgICAgICAgICAgICAgICAgICAgIC8vIGZvdW5kYXRpb25GdW5kTXVsdGlzaWcgbXVsdGktc2lnIHdhbGxldCBhZGRyZXNzIC0gQXNzaXN0aXZlIFJlYWxpdHkgZm91bmRhdGlvbiBmdW5kCiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNQZXJFdGhQcmljZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmljZVZhciBlLmcuIDIsMDAwIHRva2VucyBwZXIgRXRoCgogICAgLy8gdWludDI1NiB2YWx1ZXMgZm9yIG1pbixtYXgsY2Fwcyx0cmFja2luZwogICAgdWludDI1NiBwdWJsaWMgYW1vdW50UmFpc2VkSW5XZWk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG90YWwgYW1vdW50IHJhaXNlZCBpbiBXZWkgZS5nLiAyMSAwMDAgMDAwIDAwMCAwMDAgMDAwIDAwMCA9IDIxIEV0aAogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ01heEluV2VpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnVuZGluZyBtYXggaW4gV2VpIGUuZy4gMjEgMDAwIDAwMCAwMDAgMDAwIDAwMCAwMDAgPSAyMSBFdGgKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdNaW5JbldlaTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZ1bmRpbmcgbWluIGluIFdlaSBlLmcuIDExIDAwMCAwMDAgMDAwIDAwMCAwMDAgMDAwID0gMTEgRXRoCiAgICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nTWF4SW5FdGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmdW5kaW5nIG1heCBpbiBFdGggKGFwcHJveCkgZS5nLiAyMSBFdGgKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdNaW5JbkV0aDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZ1bmRpbmcgbWluIGluIEV0aCAoYXBwcm94KSBlLmcuIDExIEV0aAogICAgdWludDI1NiBwdWJsaWMgcmVtYWluaW5nQ2FwSW5XZWk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW1vdW50IG9mIGNhcCByZW1haW5pbmcgdG8gcmFpc2UgaW4gV2VpIGUuZy4gMSAyMDAgMDAwIDAwMCAwMDAgMDAwIDAwMCA9IDEuMiBFdGggcmVtYWluaW5nCiAgICB1aW50MjU2IHB1YmxpYyByZW1haW5pbmdDYXBJbkV0aDsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbW91bnQgb2YgY2FwIHJlbWFpbmluZyB0byByYWlzZSBpbiBFdGggKGFwcHJveCkgZS5nLiAxCiAgICB1aW50MjU2IHB1YmxpYyBmb3VuZGF0aW9uRnVuZFRva2VuQ291bnRJbldlaTsgICAgICAgICAgICAgICAvLyAxMCUgYWRkaXRpb25hbCB0b2tlbnMgZ2VuZXJhdGVkIGFuZCBzZW50IHRvIGZvdW5kYXRpb25GdW5kTXVsdGlzaWcvQXNzaXN0aXZlIFJlYWxpdHkgZm91bmRhdGlvbiwgMTggZGVjaW1hbHMKCiAgICAvLyBsb29wIGNvbnRyb2wsIElDTyBzdGFydHVwIGFuZCBsaW1pdGVycwogICAgc3RyaW5nICBwdWJsaWMgQ3VycmVudFN0YXR1cyAgICAgICAgICAgICAgICAgID0gIiI7ICAgICAgICAgLy8gY3VycmVudCBjcm93ZHNhbGUgc3RhdHVzCiAgICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nU3RhcnRCbG9jazsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjcm93ZHNhbGUgc3RhcnQgYmxvY2sjCiAgICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nRW5kQmxvY2s7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjcm93ZHNhbGUgZW5kIGJsb2NrIwogICAgYm9vbCAgICBwdWJsaWMgaXNDcm93ZFNhbGVGaW5pc2hlZCAgICAgICAgICAgID0gZmFsc2U7ICAgICAgLy8gYm9vbGVhbiBmb3IgY3Jvd2RzYWxlIGNvbXBsZXRlZCBvciBub3QKICAgIGJvb2wgICAgcHVibGljIGlzQ3Jvd2RTYWxlU2V0dXAgICAgICAgICAgICAgICA9IGZhbHNlOyAgICAgIC8vIGJvb2xlYW4gZm9yIGNyb3dkc2FsZSBzZXR1cAogICAgYm9vbCAgICBwdWJsaWMgaGFsdGVkICAgICAgICAgICAgICAgICAgICAgICAgID0gZmFsc2U7ICAgICAgLy8gYm9vbGVhbiBmb3IgaGFsdGVkIG9yIG5vdAogICAgYm9vbCAgICBwdWJsaWMgZm91bmRlclRva2Vuc0F2YWlsYWJsZSAgICAgICAgID0gZmFsc2U7ICAgICAgLy8gdmFyaWFibGUgdG8gc2V0IGZhbHNlIGFmdGVyIGdlbmVyYXRpbmcgZm91bmRlclRva2VucwoKICAgIC8vIGJhbGFuY2UgbWFwcGluZyBhbmQgdHJhbnNmZXIgYWxsb3dhbmNlIGFycmF5CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIGV2ZW50IEJ1eShhZGRyZXNzIGluZGV4ZWQgX3NlbmRlciwgdWludDI1NiBfZXRoLCB1aW50MjU2IF9BUlgpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBCdXJuKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgUmVmdW5kKGFkZHJlc3MgaW5kZXhlZCBfcmVmdW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKCiAgICAvLyBkZWZhdWx0IGZ1bmN0aW9uLCBtYXAgYWRtaW4KICAgIGZ1bmN0aW9uIEFSWENyb3dkc2FsZSgpIG9ubHlPd25lciB7CiAgICAgIGFkbWluID0gbXNnLnNlbmRlcjsKICAgICAgQ3VycmVudFN0YXR1cyA9ICJDcm93ZHNhbGUgZGVwbG95ZWQgdG8gY2hhaW4iOwogICAgfQoKICAgIC8vIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgaXNzdWVkIHNvIGZhciwgbm9ybWFsaXNlZAogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2VuVG90YWxTdXBwbHkpIHsKICAgICAgICB0b2tlblRvdGFsU3VwcGx5ID0gc2FmZURpdihfdG90YWxTdXBwbHksMSBldGhlcik7CiAgICB9CgogICAgLy8gZ2V0IHRoZSBhY2NvdW50IGJhbGFuY2UKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLy8gcmV0dXJucyBjcm93ZHNhbGUgbWF4IGZ1bmRpbmcgaW4gRXRoLCBsb3cgcmVzCiAgICBmdW5jdGlvbiBmdW5kaW5nTWF4SW5FdGgoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGZ1bmRpbmdNYXhpbXVtSW5FdGgpIHsKICAgICAgZnVuZGluZ01heGltdW1JbkV0aCA9IHNhZmVEaXYoZnVuZGluZ01heEluV2VpLDEgZXRoZXIpOwogICAgfQoKICAgIC8vIHJldHVybnMgY3Jvd2RzYWxlIG1pbiBmdW5kaW5nIGluIEV0aCwgbG93IHJlcwogICAgZnVuY3Rpb24gZnVuZGluZ01pbkluRXRoKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBmdW5kaW5nTWluaW11bUluRXRoKSB7CiAgICAgIGZ1bmRpbmdNaW5pbXVtSW5FdGggPSBzYWZlRGl2KGZ1bmRpbmdNaW5JbldlaSwxIGV0aGVyKTsKICAgIH0KCiAgICAvLyByZXR1cm5zIGNyb3dkc2FsZSBwcm9ncmVzcyAoZnVuZHMgcmFpc2VkKSBpbiBFdGgsIGxvdyByZXMKICAgIGZ1bmN0aW9uIGFtb3VudFJhaXNlZEluRXRoKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBhbW91bnRSYWlzZWRTb0ZhckluRXRoKSB7CiAgICAgIGFtb3VudFJhaXNlZFNvRmFySW5FdGggPSBzYWZlRGl2KGFtb3VudFJhaXNlZEluV2VpLDEgZXRoZXIpOwogICAgfQoKICAgIC8vIHJldHVybnMgY3Jvd2RzYWxlIHJlbWFpbmluZyBjYXAgKGhhcmRjYXApIGluIEV0aCwgbG93IHJlcwogICAgZnVuY3Rpb24gcmVtYWluaW5nQ2FwSW5FdGgoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZ0hhcmRDYXBJbkV0aCkgewogICAgICByZW1haW5pbmdIYXJkQ2FwSW5FdGggPSBzYWZlRGl2KHJlbWFpbmluZ0NhcEluV2VpLDEgZXRoZXIpOwogICAgfQoKICAgIC8vIEVSQzIwIHRva2VuIHRyYW5zZmVyIGZ1bmN0aW9uCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKCEoX3RvID09IDB4MCkpOwogICAgICAgIGlmICgoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCkKICAgICAgICAmJiAoX2Ftb3VudCA+IDApCiAgICAgICAgJiYgKChzYWZlQWRkKGJhbGFuY2VzW190b10sX2Ftb3VudCkgPiBiYWxhbmNlc1tfdG9dKSkpIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfYW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX2Ftb3VudCk7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8gRVJDMjAgdG9rZW4gdHJhbnNmZXJGcm9tIGZ1bmN0aW9uCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oCiAgICAgICAgYWRkcmVzcyBfZnJvbSwKICAgICAgICBhZGRyZXNzIF90bywKICAgICAgICB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoIShfdG8gPT0gMHgwKSk7CiAgICAgICAgaWYgKChiYWxhbmNlc1tfZnJvbV0gPj0gX2Ftb3VudCkKICAgICAgICAmJiAoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCkKICAgICAgICAmJiAoX2Ftb3VudCA+IDApCiAgICAgICAgJiYgKHNhZmVBZGQoYmFsYW5jZXNbX3RvXSxfYW1vdW50KSA+IGJhbGFuY2VzW190b10pKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZXNbX2Zyb21dLCBfYW1vdW50KTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKChhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSksX2Ftb3VudCk7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sIF9hbW91bnQpOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBFUkMyMCBhbGxvdyBfc3BlbmRlciB0byB3aXRoZHJhdywgbXVsdGlwbGUgdGltZXMsIHVwIHRvIHRoZSBfdmFsdWUgYW1vdW50CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy9GaXggZm9yIGtub3duIGRvdWJsZS1zcGVuZCBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFZTFB0UXhadTFVQXZPOWNaMU8yUlBYQmJUMG1vb2g0RFlLakFfanAtUkxNL2VkaXQjCiAgICAgICAgLy9JbnB1dCBtdXN0IGVpdGhlciBzZXQgYWxsb3cgYW1vdW50IHRvIDAsIG9yIGhhdmUgMCBhbHJlYWR5IHNldCwgdG8gd29ya2Fyb3VuZCBpc3N1ZQogICAgICAgIHJlcXVpcmUoKF9hbW91bnQgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEVSQzIwIHJldHVybiBhbGxvd2FuY2UgZm9yIGdpdmVuIG93bmVyIHNwZW5kZXIgcGFpcgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIC8vIHNldHVwIHRoZSBDcm93ZFNhbGUgcGFyYW1ldGVycwogICAgZnVuY3Rpb24gU2V0dXBDcm93ZHNhbGUodWludDI1NiBfZnVuZGluZ1N0YXJ0QmxvY2ssIHVpbnQyNTYgX2Z1bmRpbmdFbmRCbG9jaykgb25seU93bmVyIHJldHVybnMgKGJ5dGVzMzIgcmVzcG9uc2UpIHsKICAgICAgICBpZiAoKG1zZy5zZW5kZXIgPT0gYWRtaW4pCiAgICAgICAgJiYgKCEoaXNDcm93ZFNhbGVTZXR1cCkpCiAgICAgICAgJiYgKCEoYmVuZWZpY2lhcnlNdWx0aVNpZyA+IDApKQogICAgICAgICYmICghKGZ1bmRpbmdNYXhJbldlaSA+IDApKSkgewogICAgICAgICAgICAvLyBtYWlubmV0IHZhbHVlcwogICAgICAgICAgICBiZW5lZmljaWFyeU11bHRpU2lnID0gMHhkOTMzMzNmOGNiNzY1Mzk3QTVEMGQwZTBiYTUzQTI4OTlCNDg1MTFmOwogICAgICAgICAgICBmb3VuZGF0aW9uRnVuZE11bHRpc2lnID0gMHg3MEEwYkUxYTVkOEE5RjM5YWZFRDUzNkVjN2I1NWQ4NzA2NzM3MWFBOwoKICAgICAgICAgICAgLy8gbWFpbm5ldCBmdW5kaW5nIHRhcmdldHMgd2l0aCAxOCBkZWNpbWFscwogICAgICAgICAgICBmdW5kaW5nTWF4SW5XZWkgPSA3MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsgLy83MCAwMDAgMDAwIDAwMCAwMDAgMDAwIDAwMCAwMDAgPSA3MCwwMDAgRXRoIChoYXJkIGNhcCkgLSBjcm93ZHNhbGUgbm8gbG9uZ2VyIGFjY2VwdHMgRXRoIGFmdGVyIHRoaXMgdmFsdWUKICAgICAgICAgICAgZnVuZGluZ01pbkluV2VpID0gMzUwMDAwMDAwMDAwMDAwMDAwMDAwMDsgICAvLzMgNTAwIDAwMCAwMDAgMDAwIDAwMCAwMDAgMDAwID0gIDMsNTAwIEV0aCAoc29mdCBjYXApIC0gY3Jvd2RzYWxlIGlzIGNvbnNpZGVyZWQgc3VjY2VzcyBhZnRlciB0aGlzIHZhbHVlCgogICAgICAgICAgICAvLyB2YWx1ZSBvZiBBUlggdG9rZW4gZm9yIG1haW5uZXQuIGlmIGhhcmRjYXAgaXMgcmVhY2hlZCwgdGhpcyByZXN1bHRzIGluIDI4MCwwMDAsMDAwIEFSWCB0b2tlbnMgaW4gZ2VuZXJhbCBzdXBwbHkgKCsyOCwwMDAsMDAwIGluIHRoZSBmb3VuZGF0aW9uRnVuZE11bHRpc2lnIGZvciBhIHRvdGFsIHN1cHBseSBvZiAzMDgsMDAwLDAwMCkKICAgICAgICAgICAgdG9rZW5zUGVyRXRoUHJpY2UgPSA0MDAwOyAvLyA0LDAwMCB0b2tlbnMgcGVyIEV0aAoKICAgICAgICAgICAgLy8gdXBkYXRlIHZhbHVlcwogICAgICAgICAgICBmdW5kaW5nTWF4SW5FdGggPSBzYWZlRGl2KGZ1bmRpbmdNYXhJbldlaSwxIGV0aGVyKTsgLy9hcHByb3hpbWF0ZSB0byAxIEV0aCBkdWUgdG8gcmVzb2x1dGlvbiwgcHJvdmlkZWQgZm9yIGVhc2Uvdmlld2luZyBvbmx5CiAgICAgICAgICAgIGZ1bmRpbmdNaW5JbkV0aCA9IHNhZmVEaXYoZnVuZGluZ01pbkluV2VpLDEgZXRoZXIpOyAvL2FwcHJveGltYXRlIHRvIDEgRXRoIGR1ZSB0byByZXNvbHV0aW9uLCBwcm92aWRlZCBmb3IgZWFzZS92aWV3aW5nIG9ubHkKICAgICAgICAgICAgcmVtYWluaW5nQ2FwSW5XZWkgPSBmdW5kaW5nTWF4SW5XZWk7CiAgICAgICAgICAgIHJlbWFpbmluZ0NhcEluRXRoID0gc2FmZURpdihyZW1haW5pbmdDYXBJbldlaSwxIGV0aGVyKTsgLy9hcHByb3hpbWF0ZSB0byAxIEV0aCBkdWUgdG8gcmVzb2x1dGlvbiwgcHJvdmlkZWQgZm9yIGVhc2Uvdmlld2luZyBvbmx5CiAgICAgICAgICAgIGZ1bmRpbmdTdGFydEJsb2NrID0gX2Z1bmRpbmdTdGFydEJsb2NrOwogICAgICAgICAgICBmdW5kaW5nRW5kQmxvY2sgPSBfZnVuZGluZ0VuZEJsb2NrOwoKICAgICAgICAgICAgLy8gY29uZmlndXJlIGNyb3dkc2FsZQogICAgICAgICAgICBpc0Nyb3dkU2FsZVNldHVwID0gdHJ1ZTsKICAgICAgICAgICAgQ3VycmVudFN0YXR1cyA9ICJDcm93ZHNhbGUgaXMgc2V0dXAiOwogICAgICAgICAgICByZXR1cm4gIkNyb3dkc2FsZSBpcyBzZXR1cCI7CiAgICAgICAgfSBlbHNlIGlmIChtc2cuc2VuZGVyICE9IGFkbWluKSB7CiAgICAgICAgICAgIHJldHVybiAibm90IGF1dGhvcml6ZWQiOwogICAgICAgIH0gZWxzZSAgewogICAgICAgICAgICByZXR1cm4gImNhbXBhaWduIGNhbm5vdCBiZSBjaGFuZ2VkIjsKICAgICAgICB9CiAgICB9CgogICAgLy8gZGVmYXVsdCBwYXlhYmxlIGZ1bmN0aW9uIHdoZW4gc2VuZGluZyBldGhlciB0byB0aGlzIGNvbnRyYWN0CiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgcmVxdWlyZShtc2cuZGF0YS5sZW5ndGggPT0gMCk7CiAgICAgIEJ1eVRva2VucygpOwogICAgfQoKICAgIGZ1bmN0aW9uIEJ1eVRva2VucygpIHBheWFibGUgewogICAgICAvLyAwLiBjb25kaXRpb25zIChsZW5ndGgsIGNyb3dkc2FsZSBzZXR1cCwgemVybyBjaGVjaywgZXhjZWVkIGZ1bmRpbmcgY29udHJpYiBjaGVjaywgY29udHJhY3QgdmFsaWQgY2hlY2ssIHdpdGhpbiBmdW5kaW5nIGJsb2NrIHJhbmdlIGNoZWNrLCBiYWxhbmNlIG92ZXJmbG93IGNoZWNrIGV0YykKICAgICAgcmVxdWlyZSgoIShtc2cudmFsdWUgPT0gMCkpCiAgICAgICYmICghKGhhbHRlZCkpCiAgICAgICYmIChpc0Nyb3dkU2FsZVNldHVwKQogICAgICAmJiAoISgoc2FmZUFkZChhbW91bnRSYWlzZWRJbldlaSxtc2cudmFsdWUpKSA+IGZ1bmRpbmdNYXhJbldlaSkpCiAgICAgICYmIChibG9jay5udW1iZXIgPj0gZnVuZGluZ1N0YXJ0QmxvY2spCiAgICAgICYmIChibG9jay5udW1iZXIgPD0gZnVuZGluZ0VuZEJsb2NrKQogICAgICAmJiAoIShpc0Nyb3dkU2FsZUZpbmlzaGVkKSkpOwoKICAgICAgLy8gMS4gdmFycwogICAgICBhZGRyZXNzIHJlY2lwaWVudCA9IG1zZy5zZW5kZXI7IC8vIHRvIHNpbXBsaWZ5IHJlZnVuZGluZwogICAgICB1aW50MjU2IGFtb3VudCA9IG1zZy52YWx1ZTsKICAgICAgdWludDI1NiByZXdhcmRUcmFuc2ZlckFtb3VudCA9IDA7CgogICAgICAvLyAyLiBlZmZlY3RzCiAgICAgIGFtb3VudFJhaXNlZEluV2VpID0gc2FmZUFkZChhbW91bnRSYWlzZWRJbldlaSxhbW91bnQpOwogICAgICByZW1haW5pbmdDYXBJbldlaSA9IHNhZmVTdWIoZnVuZGluZ01heEluV2VpLGFtb3VudFJhaXNlZEluV2VpKTsKICAgICAgcmV3YXJkVHJhbnNmZXJBbW91bnQgPSBzYWZlTXVsKGFtb3VudCx0b2tlbnNQZXJFdGhQcmljZSk7CgogICAgICAvLyAzLiBpbnRlcmFjdGlvbgogICAgICBiYWxhbmNlc1tyZWNpcGllbnRdID0gc2FmZUFkZChiYWxhbmNlc1tyZWNpcGllbnRdLCByZXdhcmRUcmFuc2ZlckFtb3VudCk7CiAgICAgIF90b3RhbFN1cHBseSA9IHNhZmVBZGQoX3RvdGFsU3VwcGx5LCByZXdhcmRUcmFuc2ZlckFtb3VudCk7CiAgICAgIFRyYW5zZmVyKHRoaXMsIHJlY2lwaWVudCwgcmV3YXJkVHJhbnNmZXJBbW91bnQpOwogICAgICBCdXkocmVjaXBpZW50LCBhbW91bnQsIHJld2FyZFRyYW5zZmVyQW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBBbGxvY2F0ZUZvdW5kZXJUb2tlbnMoKSBvbmx5T3duZXIgewogICAgICByZXF1aXJlKGlzQ3Jvd2RTYWxlRmluaXNoZWQgJiYgZm91bmRlclRva2Vuc0F2YWlsYWJsZSAmJiAoZm91bmRhdGlvbkZ1bmRUb2tlbkNvdW50SW5XZWkgPT0gMCkpOwoKICAgICAgLy8gY2FsY3VsYXRlIGFkZGl0aW9uYWwgMTAlIHRva2VucyB0byBhbGxvY2F0ZSBmb3IgZm91bmRhdGlvbiBkZXZlbG9wZXIgZGlzdHJpYnV0aW9ucwogICAgICBmb3VuZGF0aW9uRnVuZFRva2VuQ291bnRJbldlaSA9IHNhZmVNdWwoKHNhZmVEaXYoYW1vdW50UmFpc2VkSW5XZWksMTApKSwgdG9rZW5zUGVyRXRoUHJpY2UpOwoKICAgICAgLy8gZ2VuZXJhdGUgYW5kIHNlbmQgZm91bmRhdGlvbiBkZXZlbG9wZXIgdG9rZW4gZGlzdHJpYnV0aW9ucwogICAgICBiYWxhbmNlc1tmb3VuZGF0aW9uRnVuZE11bHRpc2lnXSA9IHNhZmVBZGQoYmFsYW5jZXNbZm91bmRhdGlvbkZ1bmRNdWx0aXNpZ10sIGZvdW5kYXRpb25GdW5kVG9rZW5Db3VudEluV2VpKTsKCiAgICAgIF90b3RhbFN1cHBseSA9IHNhZmVBZGQoX3RvdGFsU3VwcGx5LCBmb3VuZGF0aW9uRnVuZFRva2VuQ291bnRJbldlaSk7CiAgICAgIFRyYW5zZmVyKHRoaXMsIGZvdW5kYXRpb25GdW5kTXVsdGlzaWcsIGZvdW5kYXRpb25GdW5kVG9rZW5Db3VudEluV2VpKTsKICAgICAgQnV5KGZvdW5kYXRpb25GdW5kTXVsdGlzaWcsIDAsIGZvdW5kYXRpb25GdW5kVG9rZW5Db3VudEluV2VpKTsKICAgICAgZm91bmRlclRva2Vuc0F2YWlsYWJsZSA9IGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJlbmVmaWNpYXJ5TXVsdGlTaWdXaXRoZHJhdyh1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciB7CiAgICAgIHJlcXVpcmUoaXNDcm93ZFNhbGVGaW5pc2hlZCAmJiAoYW1vdW50UmFpc2VkSW5XZWkgPj0gZnVuZGluZ01pbkluV2VpKSk7CiAgICAgIGJlbmVmaWNpYXJ5TXVsdGlTaWcudHJhbnNmZXIoX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tHb2FsUmVhY2hlZCgpIG9ubHlPd25lciByZXR1cm5zIChieXRlczMyIHJlc3BvbnNlKSB7IC8vIHJldHVybiBjcm93ZGZ1bmQgc3RhdHVzIHRvIG93bmVyIGZvciBlYWNoIHJlc3VsdCBjYXNlLCB1cGRhdGUgcHVibGljIGNvbnN0YW50CiAgICAgIHJlcXVpcmUgKCEoaGFsdGVkKSAmJiBpc0Nyb3dkU2FsZVNldHVwKTsKCiAgICAgIGlmICgoYW1vdW50UmFpc2VkSW5XZWkgPCBmdW5kaW5nTWluSW5XZWkpICYmIChibG9jay5udW1iZXIgPD0gZnVuZGluZ0VuZEJsb2NrICYmIGJsb2NrLm51bWJlciA+PSBmdW5kaW5nU3RhcnRCbG9jaykpIHsgLy8gSUNPIGluIHByb2dyZXNzLCB1bmRlciBzb2Z0Y2FwCiAgICAgICAgZm91bmRlclRva2Vuc0F2YWlsYWJsZSA9IGZhbHNlOwogICAgICAgIGlzQ3Jvd2RTYWxlRmluaXNoZWQgPSBmYWxzZTsKICAgICAgICBDdXJyZW50U3RhdHVzID0gIkluIHByb2dyZXNzIChFdGggPCBTb2Z0Y2FwKSI7CiAgICAgICAgcmV0dXJuICJJbiBwcm9ncmVzcyAoRXRoIDwgU29mdGNhcCkiOwogICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWRJbldlaSA8IGZ1bmRpbmdNaW5JbldlaSkgJiYgKGJsb2NrLm51bWJlciA8IGZ1bmRpbmdTdGFydEJsb2NrKSkgeyAvLyBJQ08gaGFzIG5vdCBzdGFydGVkCiAgICAgICAgZm91bmRlclRva2Vuc0F2YWlsYWJsZSA9IGZhbHNlOwogICAgICAgIGlzQ3Jvd2RTYWxlRmluaXNoZWQgPSBmYWxzZTsKICAgICAgICBDdXJyZW50U3RhdHVzID0gIkNyb3dkc2FsZSBpcyBzZXR1cCI7CiAgICAgICAgcmV0dXJuICJDcm93ZHNhbGUgaXMgc2V0dXAiOwogICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWRJbldlaSA8IGZ1bmRpbmdNaW5JbldlaSkgJiYgKGJsb2NrLm51bWJlciA+IGZ1bmRpbmdFbmRCbG9jaykpIHsgLy8gSUNPIGVuZGVkLCB1bmRlciBzb2Z0Y2FwCiAgICAgICAgZm91bmRlclRva2Vuc0F2YWlsYWJsZSA9IGZhbHNlOwogICAgICAgIGlzQ3Jvd2RTYWxlRmluaXNoZWQgPSB0cnVlOwogICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiVW5zdWNjZXNzZnVsIChFdGggPCBTb2Z0Y2FwKSI7CiAgICAgICAgcmV0dXJuICJVbnN1Y2Nlc3NmdWwgKEV0aCA8IFNvZnRjYXApIjsKICAgICAgfSBlbHNlIGlmICgoYW1vdW50UmFpc2VkSW5XZWkgPj0gZnVuZGluZ01pbkluV2VpKSAmJiAoYW1vdW50UmFpc2VkSW5XZWkgPj0gZnVuZGluZ01heEluV2VpKSkgeyAvLyBJQ08gZW5kZWQsIGF0IGhhcmRjYXAhCiAgICAgICAgaWYgKGZvdW5kYXRpb25GdW5kVG9rZW5Db3VudEluV2VpID09IDApIHsKICAgICAgICAgIGZvdW5kZXJUb2tlbnNBdmFpbGFibGUgPSB0cnVlOwogICAgICAgICAgaXNDcm93ZFNhbGVGaW5pc2hlZCA9IHRydWU7CiAgICAgICAgICBDdXJyZW50U3RhdHVzID0gIlN1Y2Nlc3NmdWwgKEV0aCA+PSBIYXJkY2FwKSEiOwogICAgICAgICAgcmV0dXJuICJTdWNjZXNzZnVsIChFdGggPj0gSGFyZGNhcCkhIjsKICAgICAgICB9IGVsc2UgaWYgKGZvdW5kYXRpb25GdW5kVG9rZW5Db3VudEluV2VpID4gMCkgewogICAgICAgICAgZm91bmRlclRva2Vuc0F2YWlsYWJsZSA9IGZhbHNlOwogICAgICAgICAgaXNDcm93ZFNhbGVGaW5pc2hlZCA9IHRydWU7CiAgICAgICAgICBDdXJyZW50U3RhdHVzID0gIlN1Y2Nlc3NmdWwgKEV0aCA+PSBIYXJkY2FwKSEiOwogICAgICAgICAgcmV0dXJuICJTdWNjZXNzZnVsIChFdGggPj0gSGFyZGNhcCkhIjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoKGFtb3VudFJhaXNlZEluV2VpID49IGZ1bmRpbmdNaW5JbldlaSkgJiYgKGFtb3VudFJhaXNlZEluV2VpIDwgZnVuZGluZ01heEluV2VpKSAmJiAoYmxvY2subnVtYmVyID4gZnVuZGluZ0VuZEJsb2NrKSkgeyAvLyBJQ08gZW5kZWQsIG92ZXIgc29mdGNhcCEKICAgICAgICBpZiAoZm91bmRhdGlvbkZ1bmRUb2tlbkNvdW50SW5XZWkgPT0gMCkgewogICAgICAgICAgZm91bmRlclRva2Vuc0F2YWlsYWJsZSA9IHRydWU7CiAgICAgICAgICBpc0Nyb3dkU2FsZUZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiU3VjY2Vzc2Z1bCAoRXRoID49IFNvZnRjYXApISI7CiAgICAgICAgICByZXR1cm4gIlN1Y2Nlc3NmdWwgKEV0aCA+PSBTb2Z0Y2FwKSEiOwogICAgICAgIH0gZWxzZSBpZiAoZm91bmRhdGlvbkZ1bmRUb2tlbkNvdW50SW5XZWkgPiAwKSB7CiAgICAgICAgICBmb3VuZGVyVG9rZW5zQXZhaWxhYmxlID0gZmFsc2U7CiAgICAgICAgICBpc0Nyb3dkU2FsZUZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiU3VjY2Vzc2Z1bCAoRXRoID49IFNvZnRjYXApISI7CiAgICAgICAgICByZXR1cm4gIlN1Y2Nlc3NmdWwgKEV0aCA+PSBTb2Z0Y2FwKSEiOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICgoYW1vdW50UmFpc2VkSW5XZWkgPj0gZnVuZGluZ01pbkluV2VpKSAmJiAoYW1vdW50UmFpc2VkSW5XZWkgPCBmdW5kaW5nTWF4SW5XZWkpICYmIChibG9jay5udW1iZXIgPD0gZnVuZGluZ0VuZEJsb2NrKSkgeyAvLyBJQ08gaW4gcHJvZ3Jlc3MsIG92ZXIgc29mdGNhcCEKICAgICAgICBmb3VuZGVyVG9rZW5zQXZhaWxhYmxlID0gZmFsc2U7CiAgICAgICAgaXNDcm93ZFNhbGVGaW5pc2hlZCA9IGZhbHNlOwogICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiSW4gcHJvZ3Jlc3MgKEV0aCA+PSBTb2Z0Y2FwKSEiOwogICAgICAgIHJldHVybiAiSW4gcHJvZ3Jlc3MgKEV0aCA+PSBTb2Z0Y2FwKSEiOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kKCkgeyAvLyBhbnkgY29udHJpYnV0b3IgY2FuIGNhbGwgdGhpcyB0byBoYXZlIHRoZWlyIEV0aCByZXR1cm5lZCwgaWYgbm90IGhhbHRlZCwgc29mdCBjYXAgbm90IHJlYWNoZWQgYW5kIGRlYWRsaW5lIGV4cGlyZXMKICAgICAgcmVxdWlyZSAoIShoYWx0ZWQpCiAgICAgICYmIChhbW91bnRSYWlzZWRJbldlaSA8IGZ1bmRpbmdNaW5JbldlaSkKICAgICAgJiYgKGJsb2NrLm51bWJlciA+IGZ1bmRpbmdFbmRCbG9jaykKICAgICAgJiYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID4gMCkpOwogICAgICAvL1Byb2NlZWQgd2l0aCByZWZ1bmQKICAgICAgdWludDI1NiBBUlhiYWxhbmNlID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgICAgX3RvdGFsU3VwcGx5ID0gc2FmZVN1YihfdG90YWxTdXBwbHksIEFSWGJhbGFuY2UpOwogICAgICB1aW50MjU2IGV0aFZhbHVlID0gc2FmZURpdihBUlhiYWxhbmNlLCB0b2tlbnNQZXJFdGhQcmljZSk7CiAgICAgIGFtb3VudFJhaXNlZEluV2VpID0gc2FmZVN1YihhbW91bnRSYWlzZWRJbldlaSwgZXRoVmFsdWUpOwogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV0aFZhbHVlKTsKICAgICAgQnVybihtc2cuc2VuZGVyLCBBUlhiYWxhbmNlKTsKICAgICAgUmVmdW5kKG1zZy5zZW5kZXIsIGV0aFZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBoYWx0KCkgb25seU93bmVyIHsgLy8gaGFsdCB0aGUgY3Jvd2RzYWxlCiAgICAgICAgaGFsdGVkID0gdHJ1ZTsKICAgICAgICBDdXJyZW50U3RhdHVzID0gIkhhbHRlZCI7CiAgICB9CgogICAgZnVuY3Rpb24gdW5oYWx0KCkgb25seU93bmVyIHsgLy8gcmVzdW1lIHRoZSBjcm93ZHNhbGUKICAgICAgICBoYWx0ZWQgPSBmYWxzZTsKICAgICAgICBDdXJyZW50U3RhdHVzID0gIlVuaGFsdGVkIjsKICAgICAgICBjaGVja0dvYWxSZWFjaGVkKCk7CiAgICB9Cn0='.
	

]
