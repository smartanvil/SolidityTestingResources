Class {
	#name : #SRT7ce1cef50c3c72952e851af7e6787d7d19a740e9,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7ce1cef50c3c72952e851af7e6787d7d19a740e9 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Ci8vQHByb29mc3VpdGUgdGVzdGluZyBvbiBtYWlubmV0CgppbnRlcmZhY2UgVG9rZW4gewoKICAgIC8vLyBAcmV0dXJuIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBgX2Zyb21gCiAgICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHdlaSB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKbGlicmFyeSBOZXR0aW5nQ2hhbm5lbExpYnJhcnkgewogICAgc3RyaW5nIGNvbnN0YW50IHB1YmxpYyBjb250cmFjdF92ZXJzaW9uID0gIjAuMS5fIjsKCiAgICBzdHJ1Y3QgUGFydGljaXBhbnQKICAgIHsKICAgICAgICBhZGRyZXNzIG5vZGVfYWRkcmVzczsKCiAgICAgICAgLy8gVG90YWwgYW1vdW50IG9mIHRva2VuIHRyYW5zZmVycmVkIHRvIHRoaXMgc21hcnQgY29udHJhY3QgdGhyb3VnaCB0aGUKICAgICAgICAvLyBgZGVwb3NpdGAgZnVuY3Rpb24sIG5vdGUgdGhhdCBkaXJlY3QgdG9rZW4gdHJhbnNmZXIgY2Fubm90IGJlCiAgICAgICAgLy8gdHJhY2tlZCBhbmQgd2lsbCBiZSBidXJuZWQuCiAgICAgICAgdWludDI1NiBiYWxhbmNlOwoKICAgICAgICAvLyBUaGUgbGF0ZXN0IGtub3duIG1lcmtsZSByb290IG9mIHRoZSBwZW5kaW5nIGhhc2gtdGltZSBsb2NrcywgdXNlZCB0bwogICAgICAgIC8vIHZhbGlkYXRlIHRoZSB3aXRoZHJhd24gcHJvb2ZzLgogICAgICAgIGJ5dGVzMzIgbG9ja3Nyb290OwoKICAgICAgICAvLyBUaGUgbGF0ZXN0IGtub3duIHRyYW5zZmVycmVkX2Ftb3VudCBmcm9tIHRoaXMgbm9kZSB0byB0aGUgb3RoZXIKICAgICAgICAvLyBwYXJ0aWNpcGFudCwgdXNlZCB0byBjb21wdXRlIHRoZSBuZXQgYmFsYW5jZSBvbiBzZXR0bGVtZW50LgogICAgICAgIHVpbnQyNTYgdHJhbnNmZXJyZWRfYW1vdW50OwoKICAgICAgICAvLyBWYWx1ZSB1c2VkIHRvIG9yZGVyIHRyYW5zZmVycyBhbmQgb25seSBhY2NlcHQgdGhlIGxhdGVzdCBvbiBjYWxscyB0bwogICAgICAgIC8vIHVwZGF0ZSwgdGhpcyB3aWxsIG9ubHkgYmUgcmVsZXZhbnQgYWZ0ZXIgZWl0aGVyICMxODIgb3IgIzI5MyBpcwogICAgICAgIC8vIGltcGxlbWVudGVkLgogICAgICAgIHVpbnQ2NCBub25jZTsKCiAgICAgICAgLy8gQSBtYXBwaW5nIHRvIGtlZXAgdHJhY2sgb2YgbG9ja3MgdGhhdCBoYXZlIGJlZW4gd2l0aGRyYXduLgogICAgICAgIG1hcHBpbmcoYnl0ZXMzMiA9PiBib29sKSB3aXRoZHJhd25fbG9ja3M7CiAgICB9CgogICAgc3RydWN0IERhdGEgewogICAgICAgIHVpbnQgc2V0dGxlX3RpbWVvdXQ7CiAgICAgICAgdWludCBvcGVuZWQ7CiAgICAgICAgdWludCBjbG9zZWQ7CiAgICAgICAgdWludCBzZXR0bGVkOwogICAgICAgIGFkZHJlc3MgY2xvc2luZ19hZGRyZXNzOwogICAgICAgIFRva2VuIHRva2VuOwogICAgICAgIFBhcnRpY2lwYW50WzJdIHBhcnRpY2lwYW50czsKICAgICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDgpIHBhcnRpY2lwYW50X2luZGV4OwogICAgICAgIGJvb2wgdXBkYXRlZDsKICAgIH0KCgogICAgbW9kaWZpZXIgbm90U2V0dGxlZEJ1dENsb3NlZChEYXRhIHN0b3JhZ2Ugc2VsZikgewogICAgICAgIHJlcXVpcmUoc2VsZi5zZXR0bGVkIDw9IDAgJiYgc2VsZi5jbG9zZWQgPiAwKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHN0aWxsVGltZW91dChEYXRhIHN0b3JhZ2Ugc2VsZikgewogICAgICAgIHJlcXVpcmUoc2VsZi5jbG9zZWQgKyBzZWxmLnNldHRsZV90aW1lb3V0ID49IGJsb2NrLm51bWJlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciB0aW1lb3V0T3ZlcihEYXRhIHN0b3JhZ2Ugc2VsZikgewogICAgICAgIHJlcXVpcmUoc2VsZi5jbG9zZWQgKyBzZWxmLnNldHRsZV90aW1lb3V0IDw9IGJsb2NrLm51bWJlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBjaGFubmVsU2V0dGxlZChEYXRhIHN0b3JhZ2Ugc2VsZikgewogICAgICAgIHJlcXVpcmUoc2VsZi5zZXR0bGVkICE9IDApOwogICAgICAgIF87CiAgICB9CgogICAgLy8vIEBub3RpY2UgRGVwb3NpdCBhbW91bnQgdG8gY2hhbm5lbC4KICAgIC8vLyBAZGV2IERlcG9zaXQgYW4gYW1vdW50IHRvIHRoZSBjaGFubmVsLiBBdCBsZWFzdCBvbmUgb2YgdGhlIHBhcnRpY2lwYW50cwogICAgLy8vIG11c3QgZGVwb3NpdCBiZWZvcmUgdGhlIGNoYW5uZWwgaXMgb3BlbmVkLgogICAgLy8vIEBwYXJhbSBhbW91bnQgVGhlIGFtb3VudCB0byBiZSBkZXBvc2l0ZWQgdG8gdGhlIGFkZHJlc3MKICAgIC8vLyBAcmV0dXJuIFN1Y2Nlc3MgaWYgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsCiAgICAvLy8gQHJldHVybiBUaGUgbmV3IGJhbGFuY2Ugb2YgdGhlIGludm9rZXIKICAgIGZ1bmN0aW9uIGRlcG9zaXQoRGF0YSBzdG9yYWdlIHNlbGYsIHVpbnQyNTYgYW1vdW50KQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcywgdWludDI1NiBiYWxhbmNlKQogICAgewogICAgICAgIHVpbnQ4IGluZGV4OwoKICAgICAgICByZXF1aXJlKHNlbGYub3BlbmVkID4gMCk7CiAgICAgICAgcmVxdWlyZShzZWxmLmNsb3NlZCA9PSAwKTsKICAgICAgICByZXF1aXJlKHNlbGYudG9rZW4uYmFsYW5jZU9mKG1zZy5zZW5kZXIpID49IGFtb3VudCk7CgogICAgICAgIGluZGV4ID0gaW5kZXhfb3JfdGhyb3coc2VsZiwgbXNnLnNlbmRlcik7CiAgICAgICAgUGFydGljaXBhbnQgc3RvcmFnZSBwYXJ0aWNpcGFudCA9IHNlbGYucGFydGljaXBhbnRzW2luZGV4XTsKCiAgICAgICAgc3VjY2VzcyA9IHNlbGYudG9rZW4udHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIHRoaXMsIGFtb3VudCk7CiAgICAgICAgaWYgKHN1Y2Nlc3MgPT0gdHJ1ZSkgewogICAgICAgICAgICBiYWxhbmNlID0gcGFydGljaXBhbnQuYmFsYW5jZTsKICAgICAgICAgICAgYmFsYW5jZSArPSBhbW91bnQ7CiAgICAgICAgICAgIHBhcnRpY2lwYW50LmJhbGFuY2UgPSBiYWxhbmNlOwoKICAgICAgICAgICAgcmV0dXJuICh0cnVlLCBiYWxhbmNlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAoZmFsc2UsIDApOwogICAgfQoKICAgIC8vLyBAbm90aWNlIENsb3NlIGEgY2hhbm5lbCBiZXR3ZWVuIHR3byBwYXJ0aWVzIHRoYXQgd2FzIHVzZWQgYmlkaXJlY3Rpb25hbGx5CiAgICBmdW5jdGlvbiBjbG9zZSgKICAgICAgICBEYXRhIHN0b3JhZ2Ugc2VsZiwKICAgICAgICB1aW50NjQgbm9uY2UsCiAgICAgICAgdWludDI1NiB0cmFuc2ZlcnJlZF9hbW91bnQsCiAgICAgICAgYnl0ZXMzMiBsb2Nrc3Jvb3QsCiAgICAgICAgYnl0ZXMzMiBleHRyYV9oYXNoLAogICAgICAgIGJ5dGVzIHNpZ25hdHVyZQogICAgKSB7CiAgICAgICAgYWRkcmVzcyB0cmFuc2Zlcl9hZGRyZXNzOwogICAgICAgIHVpbnQgY2xvc2VyX2luZGV4OwogICAgICAgIHVpbnQgY291bnRlcnBhcnR5X2luZGV4OwoKICAgICAgICAvLyBjbG9zZSBjYW4gYmUgY2FsbGVkIG9ubHkgb25jZQogICAgICAgIHJlcXVpcmUoc2VsZi5jbG9zZWQgPT0gMCk7CiAgICAgICAgc2VsZi5jbG9zZWQgPSBibG9jay5udW1iZXI7CgogICAgICAgIC8vIE9ubHkgYSBwYXJ0aWNpcGFudCBjYW4gY2FsbCBjbG9zZQogICAgICAgIGNsb3Nlcl9pbmRleCA9IGluZGV4X29yX3Rocm93KHNlbGYsIG1zZy5zZW5kZXIpOwogICAgICAgIHNlbGYuY2xvc2luZ19hZGRyZXNzID0gbXNnLnNlbmRlcjsKCiAgICAgICAgLy8gT25seSB0aGUgY2xvc2luZyBwYXJ0eSBjYW4gcHJvdmlkZSBhIHRyYW5zZmVyIGZyb20gdGhlIGNvdW50ZXJwYXJ0eSwKICAgICAgICAvLyBhbmQgb25seSB3aGVuIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkLCBpLmUuIHRoaXMgdmFsdWUgY2FuIG5vdCBiZQogICAgICAgIC8vIHVwZGF0ZWQgYWZ0ZXJ3YXJkcy4KCiAgICAgICAgLy8gQW4gZW1wdHkgdmFsdWUgbWVhbnMgdGhhdCB0aGUgY2xvc2VyIG5ldmVyIHJlY2VpdmVkIGEgdHJhbnNmZXIsIG9yCiAgICAgICAgLy8gaGUgaXMgaW50ZW50aW9uYWxseSBub3QgcHJvdmlkaW5nIHRoZSBsYXRlc3QgdHJhbnNmZXIsIGluIHdoaWNoIGNhc2UKICAgICAgICAvLyB0aGUgY2xvc2luZyBwYXJ0eSBpcyBnb2luZyB0byBsb3NlIHRoZSB0b2tlbnMgdGhhdCB3ZXJlIHRyYW5zZmVycmVkCiAgICAgICAgLy8gdG8gaGltLgogICAgICAgIGlmIChzaWduYXR1cmUubGVuZ3RoID09IDY1KSB7CiAgICAgICAgICAgIHRyYW5zZmVyX2FkZHJlc3MgPSByZWNvdmVyQWRkcmVzc0Zyb21TaWduYXR1cmUoCiAgICAgICAgICAgICAgICBub25jZSwKICAgICAgICAgICAgICAgIHRyYW5zZmVycmVkX2Ftb3VudCwKICAgICAgICAgICAgICAgIGxvY2tzcm9vdCwKICAgICAgICAgICAgICAgIGV4dHJhX2hhc2gsCiAgICAgICAgICAgICAgICBzaWduYXR1cmUgCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBjb3VudGVycGFydHlfaW5kZXggPSBpbmRleF9vcl90aHJvdyhzZWxmLCB0cmFuc2Zlcl9hZGRyZXNzKTsKICAgICAgICAgICAgcmVxdWlyZShjbG9zZXJfaW5kZXggIT0gY291bnRlcnBhcnR5X2luZGV4KTsKCiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgc3RydWN0dXJlIG9mIHRoZSBjb3VudGVycGFydHkgd2l0aCBpdHMgZGF0YSBwcm92aWRlZAogICAgICAgICAgICAvLyBieSB0aGUgY2xvc2luZyBub2RlCiAgICAgICAgICAgIFBhcnRpY2lwYW50IHN0b3JhZ2UgY291bnRlcnBhcnR5ID0gc2VsZi5wYXJ0aWNpcGFudHNbY291bnRlcnBhcnR5X2luZGV4XTsKICAgICAgICAgICAgY291bnRlcnBhcnR5Lm5vbmNlID0gdWludDY0KG5vbmNlKTsKICAgICAgICAgICAgY291bnRlcnBhcnR5LmxvY2tzcm9vdCA9IGxvY2tzcm9vdDsKICAgICAgICAgICAgY291bnRlcnBhcnR5LnRyYW5zZmVycmVkX2Ftb3VudCA9IHRyYW5zZmVycmVkX2Ftb3VudDsKICAgICAgICB9CiAgICB9CgogICAgLy8vIEBub3RpY2UgVXBkYXRlcyBjb3VudGVyIHBhcnR5IHRyYW5zZmVyIGFmdGVyIGNsb3NpbmcuCiAgICBmdW5jdGlvbiB1cGRhdGVUcmFuc2ZlcigKICAgICAgICBEYXRhIHN0b3JhZ2Ugc2VsZiwKICAgICAgICB1aW50NjQgbm9uY2UsCiAgICAgICAgdWludDI1NiB0cmFuc2ZlcnJlZF9hbW91bnQsCiAgICAgICAgYnl0ZXMzMiBsb2Nrc3Jvb3QsCiAgICAgICAgYnl0ZXMzMiBleHRyYV9oYXNoLAogICAgICAgIGJ5dGVzIHNpZ25hdHVyZQogICAgKQogICAgICAgIG5vdFNldHRsZWRCdXRDbG9zZWQoc2VsZikKICAgICAgICBzdGlsbFRpbWVvdXQoc2VsZikKICAgIHsKICAgICAgICBhZGRyZXNzIHRyYW5zZmVyX2FkZHJlc3M7CiAgICAgICAgdWludDggY2FsbGVyX2luZGV4OwogICAgICAgIHVpbnQ4IGNsb3Nlcl9pbmRleDsKCiAgICAgICAgLy8gdXBkYXRlVHJhbnNmZXIgY2FuIGJlIGNhbGxlZCBieSB0aGUgY291bnRlciBwYXJ0eSBvbmx5IG9uY2UKICAgICAgICByZXF1aXJlKCFzZWxmLnVwZGF0ZWQpOwogICAgICAgIHNlbGYudXBkYXRlZCA9IHRydWU7CgogICAgICAgIC8vIE9ubHkgYSBwYXJ0aWNpcGFudCBjYW4gY2FsbCB1cGRhdGVUcmFuc2ZlciAoIzI5MyBmb3IgdGhpcmQgcGFydGllcykKICAgICAgICBjYWxsZXJfaW5kZXggPSBpbmRleF9vcl90aHJvdyhzZWxmLCBtc2cuc2VuZGVyKTsKCiAgICAgICAgLy8gVGhlIGNsb3NlciBpcyBub3QgYWxsb3dlZCB0byBjYWxsIHVwZGF0ZVRyYW5zZmVyCiAgICAgICAgcmVxdWlyZShzZWxmLmNsb3NpbmdfYWRkcmVzcyAhPSBtc2cuc2VuZGVyKTsKCiAgICAgICAgLy8gQ291bnRlciBwYXJ0eSBjYW4gb25seSB1cGRhdGUgdGhlIGNsb3NlciB0cmFuc2ZlcgogICAgICAgIHRyYW5zZmVyX2FkZHJlc3MgPSByZWNvdmVyQWRkcmVzc0Zyb21TaWduYXR1cmUoCiAgICAgICAgICAgIG5vbmNlLAogICAgICAgICAgICB0cmFuc2ZlcnJlZF9hbW91bnQsCiAgICAgICAgICAgIGxvY2tzcm9vdCwKICAgICAgICAgICAgZXh0cmFfaGFzaCwKICAgICAgICAgICAgc2lnbmF0dXJlIAogICAgICAgICk7CiAgICAgICAgcmVxdWlyZSh0cmFuc2Zlcl9hZGRyZXNzID09IHNlbGYuY2xvc2luZ19hZGRyZXNzKTsKCiAgICAgICAgLy8gVXBkYXRlIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIGNsb3NlciB3aXRoIGl0cyBkYXRhIHByb3ZpZGVkIGJ5IHRoZQogICAgICAgIC8vIGNvdW50ZXJwYXJ0eQogICAgICAgIGNsb3Nlcl9pbmRleCA9IDEgLSBjYWxsZXJfaW5kZXg7CgogICAgICAgIHNlbGYucGFydGljaXBhbnRzW2Nsb3Nlcl9pbmRleF0ubm9uY2UgPSBub25jZTsKICAgICAgICBzZWxmLnBhcnRpY2lwYW50c1tjbG9zZXJfaW5kZXhdLmxvY2tzcm9vdCA9IGxvY2tzcm9vdDsKICAgICAgICBzZWxmLnBhcnRpY2lwYW50c1tjbG9zZXJfaW5kZXhdLnRyYW5zZmVycmVkX2Ftb3VudCA9IHRyYW5zZmVycmVkX2Ftb3VudDsKICAgIH0KCiAgICBmdW5jdGlvbiByZWNvdmVyQWRkcmVzc0Zyb21TaWduYXR1cmUoCiAgICAgICAgdWludDY0IG5vbmNlLAogICAgICAgIHVpbnQyNTYgdHJhbnNmZXJyZWRfYW1vdW50LAogICAgICAgIGJ5dGVzMzIgbG9ja3Nyb290LAogICAgICAgIGJ5dGVzMzIgZXh0cmFfaGFzaCwKICAgICAgICBieXRlcyBzaWduYXR1cmUKICAgICkKICAgICAgICBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChhZGRyZXNzKQogICAgewogICAgICAgIGJ5dGVzMzIgc2lnbmVkX2hhc2g7CgogICAgICAgIHJlcXVpcmUoc2lnbmF0dXJlLmxlbmd0aCA9PSA2NSk7CgogICAgICAgIHNpZ25lZF9oYXNoID0gc2hhMygKICAgICAgICAgICAgbm9uY2UsCiAgICAgICAgICAgIHRyYW5zZmVycmVkX2Ftb3VudCwKICAgICAgICAgICAgbG9ja3Nyb290LAogICAgICAgICAgICB0aGlzLAogICAgICAgICAgICBleHRyYV9oYXNoCiAgICAgICAgKTsKCiAgICAgICAgdmFyIChyLCBzLCB2KSA9IHNpZ25hdHVyZVNwbGl0KHNpZ25hdHVyZSk7CiAgICAgICAgcmV0dXJuIGVjcmVjb3ZlcihzaWduZWRfaGFzaCwgdiwgciwgcyk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgVW5sb2NrIGEgbG9ja2VkIHRyYW5zZmVyCiAgICAvLy8gQGRldiBVbmxvY2sgYSBsb2NrZWQgdHJhbnNmZXIKICAgIC8vLyBAcGFyYW0gbG9ja2VkX2VuY29kZWQgVGhlIGxvY2sKICAgIC8vLyBAcGFyYW0gbWVya2xlX3Byb29mIFRoZSBtZXJrbGUgcHJvb2YKICAgIC8vLyBAcGFyYW0gc2VjcmV0IFRoZSBzZWNyZXQKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KERhdGEgc3RvcmFnZSBzZWxmLCBieXRlcyBsb2NrZWRfZW5jb2RlZCwgYnl0ZXMgbWVya2xlX3Byb29mLCBieXRlczMyIHNlY3JldCkKICAgICAgICBub3RTZXR0bGVkQnV0Q2xvc2VkKHNlbGYpCiAgICB7CiAgICAgICAgdWludCBhbW91bnQ7CiAgICAgICAgdWludDggaW5kZXg7CiAgICAgICAgdWludDY0IGV4cGlyYXRpb247CiAgICAgICAgYnl0ZXMzMiBoOwogICAgICAgIGJ5dGVzMzIgaGFzaGxvY2s7CgogICAgICAgIC8vIENoZWNrIGlmIG1zZy5zZW5kZXIgaXMgYSBwYXJ0aWNpcGFudCBhbmQgc2VsZWN0IHRoZSBwYXJ0bmVyIChmb3IKICAgICAgICAvLyB0aGlyZCBwYXJ0eSB1bmxvY2sgc2VlICM1NDEpCiAgICAgICAgaW5kZXggPSAxIC0gaW5kZXhfb3JfdGhyb3coc2VsZiwgbXNnLnNlbmRlcik7CiAgICAgICAgUGFydGljaXBhbnQgc3RvcmFnZSBjb3VudGVycGFydHkgPSBzZWxmLnBhcnRpY2lwYW50c1tpbmRleF07CgogICAgICAgIC8vIEFuIGVtcHR5IGxvY2tzcm9vdCBtZWFucyB0aGVyZSBhcmUgbm8gcGVuZGluZyBsb2NrcwogICAgICAgIHJlcXVpcmUoY291bnRlcnBhcnR5LmxvY2tzcm9vdCAhPSAwKTsKCiAgICAgICAgKGV4cGlyYXRpb24sIGFtb3VudCwgaGFzaGxvY2spID0gZGVjb2RlTG9jayhsb2NrZWRfZW5jb2RlZCk7CgogICAgICAgIC8vIEEgbG9jayBjYW4gYmUgd2l0aGRyYXduIG9ubHkgb25jZSBwZXIgcGFydGljaXBhbnQKICAgICAgICByZXF1aXJlKCFjb3VudGVycGFydHkud2l0aGRyYXduX2xvY2tzW2hhc2hsb2NrXSk7CgogICAgICAgIGNvdW50ZXJwYXJ0eS53aXRoZHJhd25fbG9ja3NbaGFzaGxvY2tdID0gdHJ1ZTsKCiAgICAgICAgLy8gVGhlIGxvY2sgbXVzdCBub3QgaGF2ZSBleHBpcmVkLCBpdCBkb2VzIG5vdCBtYXR0ZXIgaG93IGZhciBpbiB0aGUKICAgICAgICAvLyBmdXR1cmUgaXQgd291bGQgaGF2ZSBleHBpcmVkCiAgICAgICAgcmVxdWlyZShleHBpcmF0aW9uID49IGJsb2NrLm51bWJlcik7CiAgICAgICAgcmVxdWlyZShoYXNobG9jayA9PSBzaGEzKHNlY3JldCkpOwoKICAgICAgICBoID0gY29tcHV0ZU1lcmtsZVJvb3QobG9ja2VkX2VuY29kZWQsIG1lcmtsZV9wcm9vZik7CgogICAgICAgIHJlcXVpcmUoY291bnRlcnBhcnR5LmxvY2tzcm9vdCA9PSBoKTsKCiAgICAgICAgLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiBhbGxvd3MgZm9yIGVhY2ggdHJhbnNmZXIgdG8gYmUgc2V0IG9ubHkgb25jZSwgc28KICAgICAgICAvLyBpdCdzIHNhZmUgdG8gdXBkYXRlIHRoZSB0cmFuc2ZlcnJlZF9hbW91bnQgaW4gcGxhY2UuCiAgICAgICAgLy8KICAgICAgICAvLyBPbmNlIHRoaXJkIHBhcnRpZXMgYXJlIGFsbG93ZWQgdG8gdXBkYXRlIHRoZSBjb3VudGVyIHBhcnR5IHRyYW5zZmVyCiAgICAgICAgLy8gKCMyOTMsICMxODIpIHRoZSBsb2Nrc3Jvb3QgbWF5IGNoYW5nZSwgaWYgdGhlIGxvY2tzcm9vdCBjaGFuZ2UgdGhlCiAgICAgICAgLy8gdHJhbnNmZXJyZWRfYW1vdW50IG11c3QgYmUgcmVzZXQgYW5kIGxvY2tzIG11c3QgYmUgcmUtd2l0aGRyYXduLCBzbwogICAgICAgIC8vIHRoaXMgaXMgYWxzbyBzYWZlLgogICAgICAgIC8vCiAgICAgICAgLy8gVGhpcyBtYXkgYmUgcHJvYmxlbWF0aWMgaWYgYW4gdXBkYXRlIGNoYW5nZXMgdGhlIHRyYW5zZmVycmVkX2Ftb3VudAogICAgICAgIC8vIGJ1dCBub3QgdGhlIGxvY2tzcm9vdCwgc2luY2UgdGhlIGxvY2tzIGRvbid0IG5lZWQgdG8gYmUKICAgICAgICAvLyByZS13aXRoZHJhd24sIHRoZSBkaWZmZXJlbmNlIGluIHRoZSB0cmFuc2ZlcnJlZF9hbW91bnQgbXVzdCBiZQogICAgICAgIC8vIGFjY291bnRlZCBmb3IuCiAgICAgICAgY291bnRlcnBhcnR5LnRyYW5zZmVycmVkX2Ftb3VudCArPSBhbW91bnQ7CiAgICB9CgogICAgZnVuY3Rpb24gY29tcHV0ZU1lcmtsZVJvb3QoYnl0ZXMgbG9jaywgYnl0ZXMgbWVya2xlX3Byb29mKQogICAgICAgIGludGVybmFsCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zIChieXRlczMyKQogICAgewogICAgICAgIHJlcXVpcmUobWVya2xlX3Byb29mLmxlbmd0aCAlIDMyID09IDApOwoKICAgICAgICB1aW50IGk7CiAgICAgICAgYnl0ZXMzMiBoOwogICAgICAgIGJ5dGVzMzIgZWw7CgogICAgICAgIGggPSBzaGEzKGxvY2spOwogICAgICAgIGZvciAoaSA9IDMyOyBpIDw9IG1lcmtsZV9wcm9vZi5sZW5ndGg7IGkgKz0gMzIpIHsKICAgICAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICAgICAgZWwgOj0gbWxvYWQoYWRkKG1lcmtsZV9wcm9vZiwgaSkpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChoIDwgZWwpIHsKICAgICAgICAgICAgICAgIGggPSBzaGEzKGgsIGVsKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGggPSBzaGEzKGVsLCBoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGg7CiAgICB9CgogICAgLy8vIEBub3RpY2UgU2V0dGxlcyB0aGUgYmFsYW5jZSBiZXR3ZWVuIHRoZSB0d28gcGFydGllcwogICAgLy8vIEBkZXYgU2V0dGxlcyB0aGUgYmFsYW5jZXMgb2YgdGhlIHR3byBwYXJ0aWVzIGZvIHRoZSBjaGFubmVsCiAgICAvLy8gQHJldHVybiBUaGUgcGFydGljaXBhbnRzIHdpdGggbmV0dGVkIGJhbGFuY2VzCiAgICBmdW5jdGlvbiBzZXR0bGUoRGF0YSBzdG9yYWdlIHNlbGYpCiAgICAgICAgbm90U2V0dGxlZEJ1dENsb3NlZChzZWxmKQogICAgICAgIHRpbWVvdXRPdmVyKHNlbGYpCiAgICB7CiAgICAgICAgdWludDggY2xvc2luZ19pbmRleDsKICAgICAgICB1aW50OCBjb3VudGVyX2luZGV4OwogICAgICAgIHVpbnQyNTYgdG90YWxfZGVwb3NpdDsKICAgICAgICB1aW50MjU2IGNvdW50ZXJfbmV0OwogICAgICAgIHVpbnQyNTYgY2xvc2VyX2Ftb3VudDsKICAgICAgICB1aW50MjU2IGNvdW50ZXJfYW1vdW50OwoKICAgICAgICBzZWxmLnNldHRsZWQgPSBibG9jay5udW1iZXI7CgogICAgICAgIGNsb3NpbmdfaW5kZXggPSBpbmRleF9vcl90aHJvdyhzZWxmLCBzZWxmLmNsb3NpbmdfYWRkcmVzcyk7CiAgICAgICAgY291bnRlcl9pbmRleCA9IDEgLSBjbG9zaW5nX2luZGV4OwoKICAgICAgICBQYXJ0aWNpcGFudCBzdG9yYWdlIGNsb3NpbmdfcGFydHkgPSBzZWxmLnBhcnRpY2lwYW50c1tjbG9zaW5nX2luZGV4XTsKICAgICAgICBQYXJ0aWNpcGFudCBzdG9yYWdlIGNvdW50ZXJfcGFydHkgPSBzZWxmLnBhcnRpY2lwYW50c1tjb3VudGVyX2luZGV4XTsKCiAgICAgICAgY291bnRlcl9uZXQgPSAoCiAgICAgICAgICAgIGNvdW50ZXJfcGFydHkuYmFsYW5jZQogICAgICAgICAgICArIGNsb3NpbmdfcGFydHkudHJhbnNmZXJyZWRfYW1vdW50CiAgICAgICAgICAgIC0gY291bnRlcl9wYXJ0eS50cmFuc2ZlcnJlZF9hbW91bnQKICAgICAgICApOwoKICAgICAgICAvLyBEaXJlY3QgdG9rZW4gdHJhbnNmZXJzIGRvbmUgdGhyb3VnaCB0aGUgdG9rZW4gYHRyYW5zZmVyYCBmdW5jdGlvbgogICAgICAgIC8vIGNhbm5vdCBiZSBhY2NvdW50ZWQgZm9yLCB0aGVzZSBzdXBlcmZsdW91cyB0b2tlbnMgd2lsbCBiZSBidXJuZWQsCiAgICAgICAgLy8gdGhpcyBpcyBiZWNhdXNlIHRoZXJlIGlzIG5vIHdheSB0byB0ZWxsIHdoaWNoIHBhcnRpY2lwYW50IChpZiBhbnkpCiAgICAgICAgLy8gaGFkIG93bmVyc2hpcCBvdmVyIHRoZSB0b2tlbi4KICAgICAgICB0b3RhbF9kZXBvc2l0ID0gY2xvc2luZ19wYXJ0eS5iYWxhbmNlICsgY291bnRlcl9wYXJ0eS5iYWxhbmNlOwoKICAgICAgICAvLyBXaGVuIHRoZSBjbG9zaW5nIHBhcnR5IGRvZXMgbm90IHByb3ZpZGUgdGhlIGNvdW50ZXIgcGFydHkgdHJhbnNmZXIsCiAgICAgICAgLy8gdGhlIGBjb3VudGVyX25ldGAgbWF5IGJlIGxhcmdlciB0aGFuIHRoZSBgdG90YWxfZGVwb3NpdGAsIHdpdGhvdXQKICAgICAgICAvLyB0aGUgbWluIHRoZSB0b2tlbiB0cmFuc2ZlciBmYWlsIGFuZCB0aGUgdG9rZW4gaXMgbG9ja2VkLgogICAgICAgIGNvdW50ZXJfYW1vdW50ID0gbWluKGNvdW50ZXJfbmV0LCB0b3RhbF9kZXBvc2l0KTsKCiAgICAgICAgLy8gV2hlbiB0aGUgY291bnRlciBwYXJ0eSBkb2VzIG5vdCBwcm92aWRlIHRoZSBjbG9zaW5nIHBhcnR5IHRyYW5zZmVyLAogICAgICAgIC8vIHRoZW4gYGNvdW50ZXJfYW1vdW50YCBtYXkgYmUgbmVnYXRpdmUgYW5kIHRoZSB0cmFuc2ZlciBmYWlscywgZm9yY2UKICAgICAgICAvLyB0aGUgdmFsdWUgdG8gMC4KICAgICAgICBjb3VudGVyX2Ftb3VudCA9IG1heChjb3VudGVyX2Ftb3VudCwgMCk7CgogICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgYGNvdW50ZXJfYW1vdW50YCBpcyBiZXR3ZWVuIFswLHRvdGFsX2RlcG9zaXRdLCBzbyB0aGlzCiAgICAgICAgLy8gaXMgc2FmZS4KICAgICAgICBjbG9zZXJfYW1vdW50ID0gdG90YWxfZGVwb3NpdCAtIGNvdW50ZXJfYW1vdW50OwoKICAgICAgICBpZiAoY291bnRlcl9hbW91bnQgPiAwKSB7CiAgICAgICAgICAgIHJlcXVpcmUoc2VsZi50b2tlbi50cmFuc2Zlcihjb3VudGVyX3BhcnR5Lm5vZGVfYWRkcmVzcywgY291bnRlcl9hbW91bnQpKTsKICAgICAgICB9CgogICAgICAgIGlmIChjbG9zZXJfYW1vdW50ID4gMCkgewogICAgICAgICAgICByZXF1aXJlKHNlbGYudG9rZW4udHJhbnNmZXIoY2xvc2luZ19wYXJ0eS5ub2RlX2FkZHJlc3MsIGNsb3Nlcl9hbW91bnQpKTsKICAgICAgICB9CgogICAgICAgIGtpbGwoc2VsZik7CiAgICB9CgogICAgLy8gTk9URVM6CiAgICAvLwogICAgLy8gLSBUaGUgRVZNIGlzIGEgYmlnLWVuZGlhbiwgYnl0ZSBhZGRyZXNzaW5nIG1hY2hpbmUsIHdpdGggMzJieXRlcy8yNTZiaXRzCiAgICAvLyAgIHdvcmRzLgogICAgLy8gLSBUaGUgRXRoZXJldW0gQ29udHJhY3QgQUJJIHNwZWNpZmllcyB0aGF0IHZhcmlhYmxlIGxlbmd0aCB0eXBlcyBoYXZlIGEKICAgIC8vICAgMzJieXRlcyBwcmVmaXggdG8gZGVmaW5lIHRoZSB2YXJpYWJsZSBzaXplLgogICAgLy8gLSBTb2xpZGl0eSBoYXMgYWRkaXRpb25hbCBkYXRhIHR5cGVzIHRoYXQgYXJlIG5hcnJvd2VyIHRoYW4gMzJieXRlcwogICAgLy8gICAoZS5nLiB1aW50MTI4IHVzZXMgYSBoYWxmIHdvcmQpLgogICAgLy8gLSBTb2xpZGl0eSB1c2VzIHRoZSAqbGVhc3Qtc2lnbmlmaWNhbnQqIGJpdHMgb2YgdGhlIHdvcmQgdG8gc3RvcmUgdGhlCiAgICAvLyAgIHZhbHVlcyBvZiBhIG5hcnJvd2VyIHR5cGUuCiAgICAvLwogICAgLy8gR0VORVJBTCBBUFBST0FDSDoKICAgIC8vCiAgICAvLyBBZGQgdG8gdGhlIG1lc3NhZ2UgcG9pbnRlciB0aGUgbnVtYmVyIG9mIGJ5dGVzIHJlcXVpcmVkIHRvIG1vdmUgdGhlCiAgICAvLyBhZGRyZXNzIHNvIHRoYXQgdGhlIHRhcmdldCBkYXRhIGlzIGF0IHRoZSBlbmQgb2YgdGhlIDMyYnl0ZXMgd29yZC4KICAgIC8vCiAgICAvLyBFWEFNUExFOgogICAgLy8KICAgIC8vIFRvIGRlY29kZSB0aGUgY21kaWQsIGNvbnNpZGVyIHRoaXMgaW5pdGlhbCBzdGF0ZToKICAgIC8vCiAgICAvLwogICAgLy8gICAgIHYtIHBvaW50ZXIgd29yZCBzdGFydAogICAgLy8gICAgIFsgMzIgYnl0ZXMgbGVuZ3RoIHByZWZpeCBdWyBjbWRpZCBdIC0tLS0KICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXi0gcG9pbnRlciB3b3JkIGVuZAogICAgLy8KICAgIC8vCiAgICAvLyBCZWNhdXNlIHRoZSBjbWRpZCBoYXMgMSBieXRlIGxlbmd0aCB0aGUgdHlwZSB1aW50OCBpcyB1c2VkLCB0aGUgZGVjb2RlcgogICAgLy8gbmVlZHMgdG8gbW92ZSB0aGUgcG9pbnRlciBzbyB0aGUgY21kaWQgaXMgYXQgdGhlIGVuZCBvZiB0aGUgcG9pbnRlcgogICAgLy8gd29yZC4KICAgIC8vCiAgICAvLwogICAgLy8gICAgICAgICAgICAgdi0gcG9pbnRlciB3b3JkIHN0YXJ0IFttb3ZlZCAxYnl0ZSBhaGVhZF0KICAgIC8vICAgICBbIDMyIGJ5dGVzIGxlbmd0aCBwcmVmaXggXVsgY21kaWQgXSAtLS0tCiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF4tIHBvaW50ZXIgd29yZCBlbmQKICAgIC8vCiAgICAvLwogICAgLy8gTm93IHRoZSBkYXRhIG9mIHRoZSBjbWRpZCBjYW4gYmUgbG9hZGVkIHRvIHRoZSB1aW50OCB2YXJpYWJsZS4KICAgIC8vCiAgICAvLyBSRUZFUkVOQ0VTOgogICAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vd2lraS93aWtpL0V0aGVyZXVtLUNvbnRyYWN0LUFCSQogICAgLy8gLSBodHRwOi8vc29saWRpdHkucmVhZHRoZWRvY3MuaW8vZW4vZGV2ZWxvcC9hc3NlbWJseS5odG1sCgogICAgZnVuY3Rpb24gZGVjb2RlTG9jayhieXRlcyBsb2NrKSBpbnRlcm5hbCByZXR1cm5zICh1aW50NjQgZXhwaXJhdGlvbiwgdWludCBhbW91bnQsIGJ5dGVzMzIgaGFzaGxvY2spIHsKICAgICAgICByZXF1aXJlKGxvY2subGVuZ3RoID09IDcyKTsKCiAgICAgICAgLy8gTG9jayBmb3JtYXQ6CiAgICAgICAgLy8gWzA6OF0gZXhwaXJhdGlvbgogICAgICAgIC8vIFs4OjQwXSBhbW91bnQKICAgICAgICAvLyBbNDA6NzJdIGhhc2hsb2NrCiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBleHBpcmF0aW9uIDo9IG1sb2FkKGFkZChsb2NrLCA4KSkKICAgICAgICAgICAgYW1vdW50IDo9IG1sb2FkKGFkZChsb2NrLCA0MCkpCiAgICAgICAgICAgIGhhc2hsb2NrIDo9IG1sb2FkKGFkZChsb2NrLCA3MikpCiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNpZ25hdHVyZVNwbGl0KGJ5dGVzIHNpZ25hdHVyZSkgaW50ZXJuYWwgcmV0dXJucyAoYnl0ZXMzMiByLCBieXRlczMyIHMsIHVpbnQ4IHYpIHsKICAgICAgICAvLyBUaGUgc2lnbmF0dXJlIGZvcm1hdCBpcyBhIGNvbXBhY3QgZm9ybSBvZjoKICAgICAgICAvLyAgIHtieXRlczMyIHJ9e2J5dGVzMzIgc317dWludDggdn0KICAgICAgICAvLyBDb21wYWN0IG1lYW5zLCB1aW50OCBpcyBub3QgcGFkZGVkIHRvIDMyIGJ5dGVzLgogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgciA6PSBtbG9hZChhZGQoc2lnbmF0dXJlLCAzMikpCiAgICAgICAgICAgIHMgOj0gbWxvYWQoYWRkKHNpZ25hdHVyZSwgNjQpKQogICAgICAgICAgICAvLyBIZXJlIHdlIGFyZSBsb2FkaW5nIHRoZSBsYXN0IDMyIGJ5dGVzLCBpbmNsdWRpbmcgMzEgYnl0ZXMKICAgICAgICAgICAgLy8gb2YgJ3MnLiBUaGVyZSBpcyBubyAnbWxvYWQ4JyB0byBkbyB0aGlzLgogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyAnYnl0ZScgaXMgbm90IHdvcmtpbmcgZHVlIHRvIHRoZSBTb2xpZGl0eSBwYXJzZXIsIHNvIGxldHMKICAgICAgICAgICAgLy8gdXNlIHRoZSBzZWNvbmQgYmVzdCBvcHRpb24sICdhbmQnCiAgICAgICAgICAgIHYgOj0gYW5kKG1sb2FkKGFkZChzaWduYXR1cmUsIDY1KSksIDB4ZmYpCiAgICAgICAgfQoKICAgICAgICByZXF1aXJlKHYgPT0gMjcgfHwgdiA9PSAyOCk7CiAgICB9CgogICAgZnVuY3Rpb24gaW5kZXhfb3JfdGhyb3coRGF0YSBzdG9yYWdlIHNlbGYsIGFkZHJlc3MgcGFydGljaXBhbnRfYWRkcmVzcykgcHJpdmF0ZSByZXR1cm5zICh1aW50OCkgewogICAgICAgIHVpbnQ4IG47CiAgICAgICAgLy8gUmV0dXJuIGluZGV4IG9mIHBhcnRpY2lwYW50LCBvciB0aHJvdwogICAgICAgIG4gPSBzZWxmLnBhcnRpY2lwYW50X2luZGV4W3BhcnRpY2lwYW50X2FkZHJlc3NdOwogICAgICAgIGFzc2VydChuICE9IDApOwogICAgICAgIHJldHVybiBuIC0gMTsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW4odWludCBhLCB1aW50IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gYSA+IGIgPyBiIDogYTsKICAgIH0KCiAgICBmdW5jdGlvbiBtYXgodWludCBhLCB1aW50IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gYSA+IGIgPyBhIDogYjsKICAgIH0KCiAgICBmdW5jdGlvbiBraWxsKERhdGEgc3RvcmFnZSBzZWxmKSBjaGFubmVsU2V0dGxlZChzZWxmKSB7CiAgICAgICAgc2VsZmRlc3RydWN0KDB4MDAwMDAwMDAwMDAwMDAwMDAwMDApOwogICAgfQp9'.
	

]
