Class {
	#name : #SRT2dc2e581f1dca93b618937aa313c8920153af960,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2dc2e581f1dca93b618937aa313c8920153af960 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgQ29udHJpYnV0b3JBcHByb3ZlciB7CiAgICBLeWJlckNvbnRyaWJ1dG9yV2hpdGVsaXN0IHB1YmxpYyBsaXN0OwogICAgbWFwcGluZyhhZGRyZXNzPT51aW50KSAgICBwdWJsaWMgcGFydGljaXBhdGVkOwoKICAgIHVpbnQgICAgICAgICAgICAgICAgICAgICAgcHVibGljIGNhcHBlZFNhbGVTdGFydFRpbWU7CiAgICB1aW50ICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBvcGVuU2FsZVN0YXJ0VGltZTsKICAgIHVpbnQgICAgICAgICAgICAgICAgICAgICAgcHVibGljIG9wZW5TYWxlRW5kVGltZTsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCgogICAgZnVuY3Rpb24gQ29udHJpYnV0b3JBcHByb3ZlciggS3liZXJDb250cmlidXRvcldoaXRlbGlzdCBfd2hpdGVsaXN0Q29udHJhY3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50ICAgICAgICAgICAgICAgICAgICAgIF9jYXBwZWRTYWxlU3RhcnRUaW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCAgICAgICAgICAgICAgICAgICAgICBfb3BlblNhbGVTdGFydFRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50ICAgICAgICAgICAgICAgICAgICAgIF9vcGVuU2FsZUVuZFRpbWUgKSB7CiAgICAgICAgbGlzdCA9IF93aGl0ZWxpc3RDb250cmFjdDsKICAgICAgICBjYXBwZWRTYWxlU3RhcnRUaW1lID0gX2NhcHBlZFNhbGVTdGFydFRpbWU7CiAgICAgICAgb3BlblNhbGVTdGFydFRpbWUgPSBfb3BlblNhbGVTdGFydFRpbWU7CiAgICAgICAgb3BlblNhbGVFbmRUaW1lID0gX29wZW5TYWxlRW5kVGltZTsKCiAgICAgICAgcmVxdWlyZSggbGlzdCAhPSBLeWJlckNvbnRyaWJ1dG9yV2hpdGVsaXN0KDB4MCkgKTsKICAgICAgICByZXF1aXJlKCBjYXBwZWRTYWxlU3RhcnRUaW1lIDwgb3BlblNhbGVTdGFydFRpbWUgKTsKICAgICAgICByZXF1aXJlKCAgb3BlblNhbGVTdGFydFRpbWUgPCBvcGVuU2FsZUVuZFRpbWUgKTsKICAgIH0KCiAgICAvLyB0aGlzIGlzIGEgc2VwZXJhdGUgZnVuY3Rpb24gc28gdXNlciBjb3VsZCBxdWVyeSBpdCBiZWZvcmUgY3Jvd2RzYWxlIHN0YXJ0cwogICAgZnVuY3Rpb24gY29udHJpYnV0b3JDYXAoIGFkZHJlc3MgY29udHJpYnV0b3IgKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gbGlzdC5nZXRDYXAoIGNvbnRyaWJ1dG9yICk7CiAgICB9CgogICAgZnVuY3Rpb24gZWxpZ2libGUoIGFkZHJlc3MgY29udHJpYnV0b3IsIHVpbnQgYW1vdW50SW5XZWkgKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICBpZiggbm93IDwgY2FwcGVkU2FsZVN0YXJ0VGltZSApIHJldHVybiAwOwogICAgICAgIGlmKCBub3cgPj0gb3BlblNhbGVFbmRUaW1lICkgcmV0dXJuIDA7CgogICAgICAgIHVpbnQgY2FwID0gY29udHJpYnV0b3JDYXAoIGNvbnRyaWJ1dG9yICk7CgogICAgICAgIGlmKCBjYXAgPT0gMCApIHJldHVybiAwOwogICAgICAgIGlmKCBub3cgPCBvcGVuU2FsZVN0YXJ0VGltZSApIHsKICAgICAgICAgICAgdWludCByZW1haW5lZENhcCA9IGNhcC5zdWIoIHBhcnRpY2lwYXRlZFsgY29udHJpYnV0b3IgXSApOwoKICAgICAgICAgICAgaWYoIHJlbWFpbmVkQ2FwID4gYW1vdW50SW5XZWkgKSByZXR1cm4gYW1vdW50SW5XZWk7CiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHJlbWFpbmVkQ2FwOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGFtb3VudEluV2VpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBlbGlnaWJsZVRlc3RBbmRJbmNyZW1lbnQoIGFkZHJlc3MgY29udHJpYnV0b3IsIHVpbnQgYW1vdW50SW5XZWkgKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQpIHsKICAgICAgICB1aW50IHJlc3VsdCA9IGVsaWdpYmxlKCBjb250cmlidXRvciwgYW1vdW50SW5XZWkgKTsKICAgICAgICBwYXJ0aWNpcGF0ZWRbY29udHJpYnV0b3JdID0gcGFydGljaXBhdGVkW2NvbnRyaWJ1dG9yXS5hZGQoIHJlc3VsdCApOwoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhbGVFbmRlZCgpIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBub3cgPiBvcGVuU2FsZUVuZFRpbWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2FsZVN0YXJ0ZWQoKSBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gbm93ID49IGNhcHBlZFNhbGVTdGFydFRpbWU7CiAgICB9Cn0KCmNvbnRyYWN0IEt5YmVyTmV0d29ya1Rva2VuU2FsZSBpcyBDb250cmlidXRvckFwcHJvdmVyIHsKICAgIGFkZHJlc3MgICAgICAgICAgICAgcHVibGljIGFkbWluOwogICAgYWRkcmVzcyAgICAgICAgICAgICBwdWJsaWMga3liZXJNdWx0aVNpZ1dhbGxldDsKICAgIEt5YmVyTmV0d29ya0NyeXN0YWwgcHVibGljIHRva2VuOwogICAgdWludCAgICAgICAgICAgICAgICBwdWJsaWMgcmFpc2VkV2VpOwogICAgYm9vbCAgICAgICAgICAgICAgICBwdWJsaWMgaGFsdFNhbGU7CgogICAgbWFwcGluZyhieXRlczMyPT51aW50KSBwdWJsaWMgcHJveHlQdXJjaGFzZXM7CgogICAgZnVuY3Rpb24gS3liZXJOZXR3b3JrVG9rZW5TYWxlKCBhZGRyZXNzIF9hZG1pbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBfa3liZXJNdWx0aVNpZ1dhbGxldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgS3liZXJDb250cmlidXRvcldoaXRlbGlzdCBfd2hpbHRlTGlzdENvbnRyYWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50IF90b3RhbFRva2VuU3VwcGx5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50IF9wcmVtaW50ZWRUb2tlblN1cHBseSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBfY2FwcGVkU2FsZVN0YXJ0VGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBfcHVibGljU2FsZVN0YXJ0VGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBfcHVibGljU2FsZUVuZFRpbWUgKQoKICAgICAgICBDb250cmlidXRvckFwcHJvdmVyKCBfd2hpbHRlTGlzdENvbnRyYWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXBwZWRTYWxlU3RhcnRUaW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wdWJsaWNTYWxlU3RhcnRUaW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wdWJsaWNTYWxlRW5kVGltZSApCiAgICB7CiAgICAgICAgYWRtaW4gPSBfYWRtaW47CiAgICAgICAga3liZXJNdWx0aVNpZ1dhbGxldCA9IF9reWJlck11bHRpU2lnV2FsbGV0OwoKICAgICAgICB0b2tlbiA9IG5ldyBLeWJlck5ldHdvcmtDcnlzdGFsKCBfdG90YWxUb2tlblN1cHBseSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FwcGVkU2FsZVN0YXJ0VGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcHVibGljU2FsZUVuZFRpbWUgKyA3IGRheXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FkbWluICk7CgogICAgICAgIC8vIHRyYW5zZmVyIHByZW1pbnRlZCB0b2tlbnMgdG8gY29tcGFueSB3YWxsZXQKICAgICAgICB0b2tlbi50cmFuc2Zlcigga3liZXJNdWx0aVNpZ1dhbGxldCwgX3ByZW1pbnRlZFRva2VuU3VwcGx5ICk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0SGFsdFNhbGUoIGJvb2wgaGFsdCApIHsKICAgICAgICByZXF1aXJlKCBtc2cuc2VuZGVyID09IGFkbWluICk7CiAgICAgICAgaGFsdFNhbGUgPSBoYWx0OwogICAgfQoKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICAgICAgYnV5KCBtc2cuc2VuZGVyICk7CiAgICB9CgogICAgZXZlbnQgUHJveHlCdXkoIGJ5dGVzMzIgaW5kZXhlZCBfcHJveHksIGFkZHJlc3MgX3JlY2lwaWVudCwgdWludCBfYW1vdW50SW5XZWkgKTsKICAgIGZ1bmN0aW9uIHByb3h5QnV5KCBieXRlczMyIHByb3h5LCBhZGRyZXNzIHJlY2lwaWVudCApIHBheWFibGUgcmV0dXJucyh1aW50KXsKICAgICAgICB1aW50IGFtb3VudCA9IGJ1eSggcmVjaXBpZW50ICk7CiAgICAgICAgcHJveHlQdXJjaGFzZXNbcHJveHldID0gcHJveHlQdXJjaGFzZXNbcHJveHldLmFkZChhbW91bnQpOwogICAgICAgIFByb3h5QnV5KCBwcm94eSwgcmVjaXBpZW50LCBhbW91bnQgKTsKCiAgICAgICAgcmV0dXJuIGFtb3VudDsKICAgIH0KCiAgICBldmVudCBCdXkoIGFkZHJlc3MgX2J1eWVyLCB1aW50IF90b2tlbnMsIHVpbnQgX3BheWVkV2VpICk7CiAgICBmdW5jdGlvbiBidXkoIGFkZHJlc3MgcmVjaXBpZW50ICkgcGF5YWJsZSByZXR1cm5zKHVpbnQpewogICAgICAgIHJlcXVpcmUoIHR4Lmdhc3ByaWNlIDw9IDUwMDAwMDAwMDAwIHdlaSApOwoKICAgICAgICByZXF1aXJlKCAhIGhhbHRTYWxlICk7CiAgICAgICAgcmVxdWlyZSggc2FsZVN0YXJ0ZWQoKSApOwogICAgICAgIHJlcXVpcmUoICEgc2FsZUVuZGVkKCkgKTsKCiAgICAgICAgdWludCB3ZWlQYXltZW50ID0gZWxpZ2libGVUZXN0QW5kSW5jcmVtZW50KCByZWNpcGllbnQsIG1zZy52YWx1ZSApOwoKICAgICAgICByZXF1aXJlKCB3ZWlQYXltZW50ID4gMCApOwoKICAgICAgICAvLyBzZW5kIHRvIG1zZy5zZW5kZXIsIG5vdCB0byByZWNpcGllbnQKICAgICAgICBpZiggbXNnLnZhbHVlID4gd2VpUGF5bWVudCApIHsKICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlciggbXNnLnZhbHVlLnN1Yiggd2VpUGF5bWVudCApICk7CiAgICAgICAgfQoKICAgICAgICAvLyBzZW5kIHBheW1lbnQgdG8gd2FsbGV0CiAgICAgICAgc2VuZEVUSFRvTXVsdGlTaWcoIHdlaVBheW1lbnQgKTsKICAgICAgICByYWlzZWRXZWkgPSByYWlzZWRXZWkuYWRkKCB3ZWlQYXltZW50ICk7CiAgICAgICAgdWludCByZWNpZXZlZFRva2VucyA9IHdlaVBheW1lbnQubXVsKCA2MDAgKTsKCiAgICAgICAgYXNzZXJ0KCB0b2tlbi50cmFuc2ZlciggcmVjaXBpZW50LCByZWNpZXZlZFRva2VucyApICk7CgoKICAgICAgICBCdXkoIHJlY2lwaWVudCwgcmVjaWV2ZWRUb2tlbnMsIHdlaVBheW1lbnQgKTsKCiAgICAgICAgcmV0dXJuIHdlaVBheW1lbnQ7CiAgICB9CgogICAgZnVuY3Rpb24gc2VuZEVUSFRvTXVsdGlTaWcoIHVpbnQgdmFsdWUgKSBpbnRlcm5hbCB7CiAgICAgICAga3liZXJNdWx0aVNpZ1dhbGxldC50cmFuc2ZlciggdmFsdWUgKTsKICAgIH0KCiAgICBldmVudCBGaW5hbGl6ZVNhbGUoKTsKICAgIC8vIGZ1bmN0aW9uIGlzIGNhbGxhYmxlIGJ5IGV2ZXJ5b25lCiAgICBmdW5jdGlvbiBmaW5hbGl6ZVNhbGUoKSB7CiAgICAgICAgcmVxdWlyZSggc2FsZUVuZGVkKCkgKTsKICAgICAgICByZXF1aXJlKCBtc2cuc2VuZGVyID09IGFkbWluICk7CgogICAgICAgIC8vIGJ1cm4gcmVtYWluaW5nIHRva2VucwogICAgICAgIHRva2VuLmJ1cm4odG9rZW4uYmFsYW5jZU9mKHRoaXMpKTsKCiAgICAgICAgRmluYWxpemVTYWxlKCk7CiAgICB9CgogICAgLy8gRVRIIGJhbGFuY2UgaXMgYWx3YXlzIGV4cGVjdGVkIHRvIGJlIDAuCiAgICAvLyBidXQgaW4gY2FzZSBzb21ldGhpbmcgd2VudCB3cm9uZywgd2UgdXNlIHRoaXMgZnVuY3Rpb24gdG8gZXh0cmFjdCB0aGUgZXRoLgogICAgZnVuY3Rpb24gZW1lcmdlbmN5RHJhaW4oRVJDMjAgYW55VG9rZW4pIHJldHVybnMoYm9vbCl7CiAgICAgICAgcmVxdWlyZSggbXNnLnNlbmRlciA9PSBhZG1pbiApOwogICAgICAgIHJlcXVpcmUoIHNhbGVFbmRlZCgpICk7CgogICAgICAgIGlmKCB0aGlzLmJhbGFuY2UgPiAwICkgewogICAgICAgICAgICBzZW5kRVRIVG9NdWx0aVNpZyggdGhpcy5iYWxhbmNlICk7CiAgICAgICAgfQoKICAgICAgICBpZiggYW55VG9rZW4gIT0gYWRkcmVzcygweDApICkgewogICAgICAgICAgICBhc3NlcnQoIGFueVRva2VuLnRyYW5zZmVyKGt5YmVyTXVsdGlTaWdXYWxsZXQsIGFueVRva2VuLmJhbGFuY2VPZih0aGlzKSkgKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIGp1c3QgdG8gY2hlY2sgdGhhdCBmdW5kcyBnb2VzIHRvIHRoZSByaWdodCBwbGFjZQogICAgLy8gdG9rZW5zIGFyZSBub3QgZ2l2ZW4gaW4gcmV0dXJuCiAgICBmdW5jdGlvbiBkZWJ1Z0J1eSgpIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoIG1zZy52YWx1ZSA9PSAxMjMgKTsKICAgICAgICBzZW5kRVRIVG9NdWx0aVNpZyggbXNnLnZhbHVlICk7CiAgICB9Cn0KCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgfQoKfQoKY29udHJhY3QgS3liZXJDb250cmlidXRvcldoaXRlbGlzdCBpcyBPd25hYmxlIHsKICAgIC8vIGNhcCBpcyBpbiB3ZWkuIFRoZSB2YWx1ZSBvZiA3IGlzIGp1c3QgYSBzdHViLgogICAgLy8gYWZ0ZXIga3ljIHJlZ2lzdHJhdGlvbiBlbmRzLCB3ZSBjaGFuZ2UgaXQgdG8gdGhlIGFjdHVhbCB2YWx1ZSB3aXRoIHNldFNsYWNrVXNlcnNDYXAKICAgIHVpbnQgcHVibGljIHNsYWNrVXNlcnNDYXAgPSA3OwogICAgbWFwcGluZyhhZGRyZXNzPT51aW50KSBwdWJsaWMgYWRkcmVzc0NhcDsKCiAgICBmdW5jdGlvbiBLeWJlckNvbnRyaWJ1dG9yV2hpdGVsaXN0KCkge30KCiAgICBldmVudCBMaXN0QWRkcmVzcyggYWRkcmVzcyBfdXNlciwgdWludCBfY2FwLCB1aW50IF90aW1lICk7CgogICAgLy8gT3duZXIgY2FuIGRlbGlzdCBieSBzZXR0aW5nIGNhcCA9IDAuCiAgICAvLyBPbndlciBjYW4gYWxzbyBjaGFuZ2UgaXQgYXQgYW55IHRpbWUKICAgIGZ1bmN0aW9uIGxpc3RBZGRyZXNzKCBhZGRyZXNzIF91c2VyLCB1aW50IF9jYXAgKSBvbmx5T3duZXIgewogICAgICAgIGFkZHJlc3NDYXBbX3VzZXJdID0gX2NhcDsKICAgICAgICBMaXN0QWRkcmVzcyggX3VzZXIsIF9jYXAsIG5vdyApOwogICAgfQoKICAgIC8vIGFuIG9wdGltaXphdGlvbiBpbiBjYXNlIG9mIG5ldHdvcmsgY29uZ2VzdGlvbgogICAgZnVuY3Rpb24gbGlzdEFkZHJlc3NlcyggYWRkcmVzc1tdIF91c2VycywgdWludFtdIF9jYXAgKSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX3VzZXJzLmxlbmd0aCA9PSBfY2FwLmxlbmd0aCApOwogICAgICAgIGZvciggdWludCBpID0gMCA7IGkgPCBfdXNlcnMubGVuZ3RoIDsgaSsrICkgewogICAgICAgICAgICBsaXN0QWRkcmVzcyggX3VzZXJzW2ldLCBfY2FwW2ldICk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldFNsYWNrVXNlcnNDYXAoIHVpbnQgX2NhcCApIG9ubHlPd25lciB7CiAgICAgICAgc2xhY2tVc2Vyc0NhcCA9IF9jYXA7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Q2FwKCBhZGRyZXNzIF91c2VyICkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgdWludCBjYXAgPSBhZGRyZXNzQ2FwW191c2VyXTsKCiAgICAgICAgaWYoIGNhcCA9PSAxICkgcmV0dXJuIHNsYWNrVXNlcnNDYXA7CiAgICAgICAgZWxzZSByZXR1cm4gY2FwOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSBvbmx5T3duZXIgewogICAgICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgICB9Cn0KCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgCiAgLy8gS1lCRVItTk9URSEgY29kZSBjaGFuZ2VkIHRvIGNvbXBseSB3aXRoIEVSQzIwIHN0YW5kYXJkCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgLy9ldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgCiAgLy8gS1lCRVItTk9URSEgY29kZSBjaGFuZ2VkIHRvIGNvbXBseSB3aXRoIEVSQzIwIHN0YW5kYXJkCiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7CiAgLy9ldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICAvLyBLWUJFUi1OT1RFISBjb2RlIGNoYW5nZWQgdG8gY29tcGx5IHdpdGggRVJDMjAgc3RhbmRhcmQKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgLy9iYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7IC8vIHRoaXMgd2FzIHJlbW92ZWQKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCmNvbnRyYWN0IEt5YmVyTmV0d29ya0NyeXN0YWwgaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CiAgICBzdHJpbmcgIHB1YmxpYyAgY29uc3RhbnQgbmFtZSA9ICJLeWJlciBOZXR3b3JrIENyeXN0YWwiOwogICAgc3RyaW5nICBwdWJsaWMgIGNvbnN0YW50IHN5bWJvbCA9ICJLTkMiOwogICAgdWludCAgICBwdWJsaWMgIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogICAgdWludCAgICBwdWJsaWMgIHNhbGVTdGFydFRpbWU7CiAgICB1aW50ICAgIHB1YmxpYyAgc2FsZUVuZFRpbWU7CgogICAgYWRkcmVzcyBwdWJsaWMgIHRva2VuU2FsZUNvbnRyYWN0OwoKICAgIG1vZGlmaWVyIG9ubHlXaGVuVHJhbnNmZXJFbmFibGVkKCkgewogICAgICAgIGlmKCBub3cgPD0gc2FsZUVuZFRpbWUgJiYgbm93ID49IHNhbGVTdGFydFRpbWUgKSB7CiAgICAgICAgICAgIHJlcXVpcmUoIG1zZy5zZW5kZXIgPT0gdG9rZW5TYWxlQ29udHJhY3QgKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciB2YWxpZERlc3RpbmF0aW9uKCBhZGRyZXNzIHRvICkgewogICAgICAgIHJlcXVpcmUodG8gIT0gYWRkcmVzcygweDApKTsKICAgICAgICByZXF1aXJlKHRvICE9IGFkZHJlc3ModGhpcykgKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIEt5YmVyTmV0d29ya0NyeXN0YWwoIHVpbnQgdG9rZW5Ub3RhbEFtb3VudCwgdWludCBzdGFydFRpbWUsIHVpbnQgZW5kVGltZSwgYWRkcmVzcyBhZG1pbiApIHsKICAgICAgICAvLyBNaW50IGFsbCB0b2tlbnMuIFRoZW4gZGlzYWJsZSBtaW50aW5nIGZvcmV2ZXIuCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSB0b2tlblRvdGFsQW1vdW50OwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG9rZW5Ub3RhbEFtb3VudDsKICAgICAgICBUcmFuc2ZlcihhZGRyZXNzKDB4MCksIG1zZy5zZW5kZXIsIHRva2VuVG90YWxBbW91bnQpOwoKICAgICAgICBzYWxlU3RhcnRUaW1lID0gc3RhcnRUaW1lOwogICAgICAgIHNhbGVFbmRUaW1lID0gZW5kVGltZTsKCiAgICAgICAgdG9rZW5TYWxlQ29udHJhY3QgPSBtc2cuc2VuZGVyOwogICAgICAgIHRyYW5zZmVyT3duZXJzaGlwKGFkbWluKTsgLy8gYWRtaW4gY291bGQgZHJhaW4gdG9rZW5zIHRoYXQgd2VyZSBzZW50IGhlcmUgYnkgbWlzdGFrZQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkKICAgICAgICBvbmx5V2hlblRyYW5zZmVyRW5hYmxlZAogICAgICAgIHZhbGlkRGVzdGluYXRpb24oX3RvKQogICAgICAgIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpCiAgICAgICAgb25seVdoZW5UcmFuc2ZlckVuYWJsZWQKICAgICAgICB2YWxpZERlc3RpbmF0aW9uKF90bykKICAgICAgICByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIF9idXJuZXIsIHVpbnQgX3ZhbHVlKTsKCiAgICBmdW5jdGlvbiBidXJuKHVpbnQgX3ZhbHVlKSBvbmx5V2hlblRyYW5zZmVyRW5hYmxlZAogICAgICAgIHJldHVybnMgKGJvb2wpewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgICAgICBCdXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgYWRkcmVzcygweDApLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIHNhdmUgc29tZSBnYXMgYnkgbWFraW5nIG9ubHkgb25lIGNvbnRyYWN0IGNhbGwKICAgIGZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5V2hlblRyYW5zZmVyRW5hYmxlZAogICAgICAgIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhc3NlcnQoIHRyYW5zZmVyRnJvbSggX2Zyb20sIG1zZy5zZW5kZXIsIF92YWx1ZSApICk7CiAgICAgICAgcmV0dXJuIGJ1cm4oX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBlbWVyZ2VuY3lFUkMyMERyYWluKCBFUkMyMCB0b2tlbiwgdWludCBhbW91bnQgKSBvbmx5T3duZXIgewogICAgICAgIHRva2VuLnRyYW5zZmVyKCBvd25lciwgYW1vdW50ICk7CiAgICB9Cn0='.
	

]
