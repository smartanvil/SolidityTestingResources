Class {
	#name : #SRT27d4cb2f6be658a6223fce994d55093c4b7250ce,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT27d4cb2f6be658a6223fce994d55093c4b7250ce >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgQXBwcm92ZUFuZENhbGxSZWNlaXZlciB7CiAgICBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBmcm9tLCB1aW50MjU2IF9hbW91bnQsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZGF0YSkgcHVibGljOwp9Cgpjb250cmFjdCBUb2tlbkZhY3RvcnlJbnRlcmZhY2UgewoKICAgIGZ1bmN0aW9uIGNyZWF0ZUNsb25lVG9rZW4oCiAgICAgICAgYWRkcmVzcyBfcGFyZW50VG9rZW4sCiAgICAgICAgdWludCBfc25hcHNob3RCbG9jaywKICAgICAgICBzdHJpbmcgX3Rva2VuTmFtZSwKICAgICAgICBzdHJpbmcgX3Rva2VuU3ltYm9sCiAgICAgICkgcHVibGljIHJldHVybnMgKFNlcnZ1c1Rva2VuIG5ld1Rva2VuKTsKfQoKLyoqCiAqIEB0aXRsZSBDb250cm9sbGFibGUKICogQGRldiBUaGUgQ29udHJvbGxhYmxlIGNvbnRyYWN0IGhhcyBhbiBjb250cm9sbGVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IENvbnRyb2xsYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgY29udHJvbGxlcjsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlciBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIENvbnRyb2xsYWJsZSgpIHB1YmxpYyB7CiAgICBjb250cm9sbGVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5Q29udHJvbGxlcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cm9sbGVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdDb250cm9sbGVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckNvbnRyb2woYWRkcmVzcyBuZXdDb250cm9sbGVyKSBwdWJsaWMgb25seUNvbnRyb2xsZXIgewogICAgaWYgKG5ld0NvbnRyb2xsZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBjb250cm9sbGVyID0gbmV3Q29udHJvbGxlcjsKICAgIH0KICB9Cgp9CgovKioKICogQHRpdGxlIFNlcnZ1c1Rva2VuIChTUlYpCiAqIFN0YW5kYXJkIE1pbnRhYmxlIEVSQzIwIFRva2VuCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6CiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU2VydnVzVG9rZW5JbnRlcmZhY2UgaXMgQ29udHJvbGxhYmxlIHsKCiAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBNaW50RmluaXNoZWQoKTsKICBldmVudCBDbGFpbWVkVG9rZW5zKGFkZHJlc3MgaW5kZXhlZCBfdG9rZW4sIGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIHVpbnQgX2Ftb3VudCk7CiAgZXZlbnQgTmV3Q2xvbmVUb2tlbihhZGRyZXNzIGluZGV4ZWQgX2Nsb25lVG9rZW4sIHVpbnQgX3NuYXBzaG90QmxvY2spOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHlBdCh1aW50IF9ibG9ja051bWJlcikgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICBmdW5jdGlvbiBiYWxhbmNlT2ZBdChhZGRyZXNzIF9vd25lciwgdWludCBfYmxvY2tOdW1iZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCwgYnl0ZXMgX2V4dHJhRGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwogIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGltcG9ydFByZXNhbGVCYWxhbmNlcyhhZGRyZXNzW10gX2FkZHJlc3NlcywgdWludDI1NltdIF9iYWxhbmNlcywgYWRkcmVzcyBfcHJlc2FsZUFkZHJlc3MpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBsb2NrUHJlc2FsZUJhbGFuY2VzKCkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gZW5hYmxlVHJhbnNmZXJzKGJvb2wgX3ZhbHVlKSBwdWJsaWM7CiAgZnVuY3Rpb24gZW5hYmxlTWFzdGVyVHJhbnNmZXJzKGJvb2wgX3ZhbHVlKSBwdWJsaWM7CiAgZnVuY3Rpb24gY3JlYXRlQ2xvbmVUb2tlbih1aW50IF9zbmFwc2hvdEJsb2NrLCBzdHJpbmcgX2Nsb25lVG9rZW5OYW1lLCBzdHJpbmcgX2Nsb25lVG9rZW5TeW1ib2wpIHB1YmxpYyByZXR1cm5zIChhZGRyZXNzKTsKCn0KCgpjb250cmFjdCBTZXJ2dXNUb2tlbiBpcyBDb250cm9sbGFibGUgewoKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICBTZXJ2dXNUb2tlbkludGVyZmFjZSBwdWJsaWMgcGFyZW50VG9rZW47CiAgVG9rZW5GYWN0b3J5SW50ZXJmYWNlIHB1YmxpYyB0b2tlbkZhY3Rvcnk7CgogIHN0cmluZyBwdWJsaWMgbmFtZTsKICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICBzdHJpbmcgcHVibGljIHZlcnNpb247CiAgdWludDggcHVibGljIGRlY2ltYWxzOwoKICB1aW50MjU2IHB1YmxpYyBwYXJlbnRTbmFwU2hvdEJsb2NrOwogIHVpbnQyNTYgcHVibGljIGNyZWF0aW9uQmxvY2s7CiAgYm9vbCBwdWJsaWMgdHJhbnNmZXJzRW5hYmxlZDsKCiAgYm9vbCBwdWJsaWMgbWFzdGVyVHJhbnNmZXJzRW5hYmxlZDsKICBhZGRyZXNzIHB1YmxpYyBtYXN0ZXJXYWxsZXQgPSAweDlkMjNjYzRlZmEzNjZiNzBmMzRmMTg3OWJjNjE3OGU2ZjMzNDI0NDE7CgoKICBzdHJ1Y3QgQ2hlY2twb2ludCB7CiAgICB1aW50MTI4IGZyb21CbG9jazsKICAgIHVpbnQxMjggdmFsdWU7CiAgfQoKICBDaGVja3BvaW50W10gdG90YWxTdXBwbHlIaXN0b3J5OwogIG1hcHBpbmcoYWRkcmVzcyA9PiBDaGVja3BvaW50W10pIGJhbGFuY2VzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgYm9vbCBwdWJsaWMgbWludGluZ0ZpbmlzaGVkID0gZmFsc2U7CiAgYm9vbCBwdWJsaWMgcHJlc2FsZUJhbGFuY2VzTG9ja2VkID0gZmFsc2U7CgogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPVEFMX1BSRVNBTEVfVE9LRU5TID0gMjg5NjAwMDAwMDAwMDAwMDAwMDAwMDsKCiAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBNaW50RmluaXNoZWQoKTsKICBldmVudCBDbGFpbWVkVG9rZW5zKGFkZHJlc3MgaW5kZXhlZCBfdG9rZW4sIGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIHVpbnQgX2Ftb3VudCk7CiAgZXZlbnQgTmV3Q2xvbmVUb2tlbihhZGRyZXNzIGluZGV4ZWQgY2xvbmVUb2tlbik7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKCgoKICBmdW5jdGlvbiBTZXJ2dXNUb2tlbigKICAgIGFkZHJlc3MgX3Rva2VuRmFjdG9yeSwKICAgIGFkZHJlc3MgX3BhcmVudFRva2VuLAogICAgdWludDI1NiBfcGFyZW50U25hcFNob3RCbG9jaywKICAgIHN0cmluZyBfdG9rZW5OYW1lLAogICAgc3RyaW5nIF90b2tlblN5bWJvbAogICAgKSBwdWJsaWMgewogICAgICB0b2tlbkZhY3RvcnkgPSBUb2tlbkZhY3RvcnlJbnRlcmZhY2UoX3Rva2VuRmFjdG9yeSk7CiAgICAgIHBhcmVudFRva2VuID0gU2VydnVzVG9rZW5JbnRlcmZhY2UoX3BhcmVudFRva2VuKTsKICAgICAgcGFyZW50U25hcFNob3RCbG9jayA9IF9wYXJlbnRTbmFwU2hvdEJsb2NrOwogICAgICBuYW1lID0gX3Rva2VuTmFtZTsKICAgICAgc3ltYm9sID0gX3Rva2VuU3ltYm9sOwogICAgICBkZWNpbWFscyA9IDY7CiAgICAgIHRyYW5zZmVyc0VuYWJsZWQgPSBmYWxzZTsKICAgICAgbWFzdGVyVHJhbnNmZXJzRW5hYmxlZCA9IGZhbHNlOwogICAgICBjcmVhdGlvbkJsb2NrID0gYmxvY2subnVtYmVyOwogICAgICB2ZXJzaW9uID0gJzAuMSc7CiAgfQoKICBmdW5jdGlvbigpIHB1YmxpYyBwYXlhYmxlIHsKICAgIHJldmVydCgpOwogIH0KCgogIC8qKgogICogUmV0dXJucyB0aGUgdG90YWwgU2VydnVzIHRva2VuIHN1cHBseSBhdCB0aGUgY3VycmVudCBibG9jawogICogQHJldHVybiB0b3RhbCBzdXBwbHkge3VpbnQyNTZ9CiAgKi8KICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gdG90YWxTdXBwbHlBdChibG9jay5udW1iZXIpOwogIH0KCiAgLyoqCiAgKiBSZXR1cm5zIHRoZSB0b3RhbCBTZXJ2dXMgdG9rZW4gc3VwcGx5IGF0IHRoZSBnaXZlbiBibG9jayBudW1iZXIKICAqIEBwYXJhbSBfYmxvY2tOdW1iZXIge3VpbnQyNTZ9CiAgKiBAcmV0dXJuIHRvdGFsIHN1cHBseSB7dWludDI1Nn0KICAqLwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5QXQodWludDI1NiBfYmxvY2tOdW1iZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgIC8vIFRoZXNlIG5leHQgZmV3IGxpbmVzIGFyZSB1c2VkIHdoZW4gdGhlIHRvdGFsU3VwcGx5IG9mIHRoZSB0b2tlbiBpcwogICAgLy8gIHJlcXVlc3RlZCBiZWZvcmUgYSBjaGVjayBwb2ludCB3YXMgZXZlciBjcmVhdGVkIGZvciB0aGlzIHRva2VuLCBpdAogICAgLy8gIHJlcXVpcmVzIHRoYXQgdGhlIGBwYXJlbnRUb2tlbi50b3RhbFN1cHBseUF0YCBiZSBxdWVyaWVkIGF0IHRoZQogICAgLy8gIGdlbmVzaXMgYmxvY2sgZm9yIHRoaXMgdG9rZW4gYXMgdGhhdCBjb250YWlucyB0b3RhbFN1cHBseSBvZiB0aGlzCiAgICAvLyAgdG9rZW4gYXQgdGhpcyBibG9jayBudW1iZXIuCiAgICBpZiAoKHRvdGFsU3VwcGx5SGlzdG9yeS5sZW5ndGggPT0gMCkgfHwgKHRvdGFsU3VwcGx5SGlzdG9yeVswXS5mcm9tQmxvY2sgPiBfYmxvY2tOdW1iZXIpKSB7CiAgICAgICAgaWYgKGFkZHJlc3MocGFyZW50VG9rZW4pICE9IDApIHsKICAgICAgICAgICAgcmV0dXJuIHBhcmVudFRva2VuLnRvdGFsU3VwcGx5QXQobWluKF9ibG9ja051bWJlciwgcGFyZW50U25hcFNob3RCbG9jaykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KCiAgICAvLyBUaGlzIHdpbGwgcmV0dXJuIHRoZSBleHBlY3RlZCB0b3RhbFN1cHBseSBkdXJpbmcgbm9ybWFsIHNpdHVhdGlvbnMKICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGdldFZhbHVlQXQodG90YWxTdXBwbHlIaXN0b3J5LCBfYmxvY2tOdW1iZXIpOwogICAgfQogIH0KCiAgLyoqCiAgKiBSZXR1cm5zIHRoZSB0b2tlbiBob2xkZXIgYmFsYW5jZSBhdCB0aGUgY3VycmVudCBibG9jawogICogQHBhcmFtIF9vd25lciB7YWRkcmVzc30KICAqIEByZXR1cm4gYmFsYW5jZSB7dWludDI1Nn0KICAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlT2ZBdChfb3duZXIsIGJsb2NrLm51bWJlcik7CiAgfQoKICAvKioKICAqIFJldHVybnMgdGhlIHRva2VuIGhvbGRlciBiYWxhbmNlIHRoZSB0aGUgZ2l2ZW4gYmxvY2sgbnVtYmVyCiAgKiBAcGFyYW0gX293bmVyIHthZGRyZXNzfQogICogQHBhcmFtIF9ibG9ja051bWJlciB7dWludDI1Nn0KICAqIEByZXR1cm4gYmFsYW5jZSB7dWludDI1Nn0KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZkF0KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9ibG9ja051bWJlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIFRoZXNlIG5leHQgZmV3IGxpbmVzIGFyZSB1c2VkIHdoZW4gdGhlIGJhbGFuY2Ugb2YgdGhlIHRva2VuIGlzCiAgICAvLyAgcmVxdWVzdGVkIGJlZm9yZSBhIGNoZWNrIHBvaW50IHdhcyBldmVyIGNyZWF0ZWQgZm9yIHRoaXMgdG9rZW4sIGl0CiAgICAvLyAgcmVxdWlyZXMgdGhhdCB0aGUgYHBhcmVudFRva2VuLmJhbGFuY2VPZkF0YCBiZSBxdWVyaWVkIGF0IHRoZQogICAgLy8gIGdlbmVzaXMgYmxvY2sgZm9yIHRoYXQgdG9rZW4gYXMgdGhpcyBjb250YWlucyBpbml0aWFsIGJhbGFuY2Ugb2YKICAgIC8vICB0aGlzIHRva2VuCiAgICBpZiAoKGJhbGFuY2VzW19vd25lcl0ubGVuZ3RoID09IDApIHx8IChiYWxhbmNlc1tfb3duZXJdWzBdLmZyb21CbG9jayA+IF9ibG9ja051bWJlcikpIHsKICAgICAgICBpZiAoYWRkcmVzcyhwYXJlbnRUb2tlbikgIT0gMCkgewogICAgICAgICAgICByZXR1cm4gcGFyZW50VG9rZW4uYmFsYW5jZU9mQXQoX293bmVyLCBtaW4oX2Jsb2NrTnVtYmVyLCBwYXJlbnRTbmFwU2hvdEJsb2NrKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gSGFzIG5vIHBhcmVudAogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgLy8gVGhpcyB3aWxsIHJldHVybiB0aGUgZXhwZWN0ZWQgYmFsYW5jZSBkdXJpbmcgbm9ybWFsIHNpdHVhdGlvbnMKICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGdldFZhbHVlQXQoYmFsYW5jZXNbX293bmVyXSwgX2Jsb2NrTnVtYmVyKTsKICAgIH0KICB9CgogIC8qKgogICogU3RhbmRhcmQgRVJDMjAgdHJhbnNmZXIgdG9rZW5zIGZ1bmN0aW9uCiAgKiBAcGFyYW0gX3RvIHthZGRyZXNzfQogICogQHBhcmFtIF9hbW91bnQge3VpbnR9CiAgKiBAcmV0dXJuIHN1Y2Nlc3Mge2Jvb2x9CiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXR1cm4gZG9UcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOwogIH0KCiAgLyoqCiAgKiBTdGFuZGFyZCBFUkMyMCB0cmFuc2ZlckZyb20gZnVuY3Rpb24KICAqIEBwYXJhbSBfZnJvbSB7YWRkcmVzc30KICAqIEBwYXJhbSBfdG8ge2FkZHJlc3N9CiAgKiBAcGFyYW0gX2Ftb3VudCB7dWludDI1Nn0KICAqIEByZXR1cm4gc3VjY2VzcyB7Ym9vbH0KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXF1aXJlKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF9hbW91bnQpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX2Ftb3VudDsKICAgIHJldHVybiBkb1RyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogIH0KCiAgLyoqCiAgKiBTdGFuZGFyZCBFUkMyMCBhcHByb3ZlIGZ1bmN0aW9uCiAgKiBAcGFyYW0gX3NwZW5kZXIge2FkZHJlc3N9CiAgKiBAcGFyYW0gX2Ftb3VudCB7dWludDI1Nn0KICAqIEByZXR1cm4gc3VjY2VzcyB7Ym9vbH0KICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXF1aXJlKHRyYW5zZmVyc0VuYWJsZWQpOwoKICAgIC8vaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoKF9hbW91bnQgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX2Ftb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogU3RhbmRhcmQgRVJDMjAgYXBwcm92ZSBmdW5jdGlvbgogICogQHBhcmFtIF9zcGVuZGVyIHthZGRyZXNzfQogICogQHBhcmFtIF9hbW91bnQge3VpbnQyNTZ9CiAgKiBAcmV0dXJuIHN1Y2Nlc3Mge2Jvb2x9CiAgKi8KICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQsIGJ5dGVzIF9leHRyYURhdGEpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGFwcHJvdmUoX3NwZW5kZXIsIF9hbW91bnQpOwoKICAgIEFwcHJvdmVBbmRDYWxsUmVjZWl2ZXIoX3NwZW5kZXIpLnJlY2VpdmVBcHByb3ZhbCgKICAgICAgICBtc2cuc2VuZGVyLAogICAgICAgIF9hbW91bnQsCiAgICAgICAgdGhpcywKICAgICAgICBfZXh0cmFEYXRhCiAgICApOwoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBTdGFuZGFyZCBFUkMyMCBhbGxvd2FuY2UgZnVuY3Rpb24KICAqIEBwYXJhbSBfb3duZXIge2FkZHJlc3N9CiAgKiBAcGFyYW0gX3NwZW5kZXIge2FkZHJlc3N9CiAgKiBAcmV0dXJuIHJlbWFpbmluZyB7dWludDI1Nn0KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAqIEludGVybmFsIFRyYW5zZmVyIGZ1bmN0aW9uIC0gVXBkYXRlcyB0aGUgY2hlY2twb2ludCBsZWRnZXIKICAqIEBwYXJhbSBfZnJvbSB7YWRkcmVzc30KICAqIEBwYXJhbSBfdG8ge2FkZHJlc3N9CiAgKiBAcGFyYW0gX2Ftb3VudCB7dWludDI1Nn0KICAqIEByZXR1cm4gc3VjY2VzcyB7Ym9vbH0KICAqLwogIGZ1bmN0aW9uIGRvVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgaW50ZXJuYWwgcmV0dXJucyhib29sKSB7CgogICAgaWYgKG1zZy5zZW5kZXIgIT0gbWFzdGVyV2FsbGV0KSB7CiAgICAgIHJlcXVpcmUodHJhbnNmZXJzRW5hYmxlZCk7CiAgICB9IGVsc2UgewogICAgICByZXF1aXJlKG1hc3RlclRyYW5zZmVyc0VuYWJsZWQpOwogICAgfQoKICAgIHJlcXVpcmUoX2Ftb3VudCA+IDApOwogICAgcmVxdWlyZShwYXJlbnRTbmFwU2hvdEJsb2NrIDwgYmxvY2subnVtYmVyKTsKICAgIHJlcXVpcmUoKF90byAhPSAwKSAmJiAoX3RvICE9IGFkZHJlc3ModGhpcykpKTsKCiAgICAvLyBJZiB0aGUgYW1vdW50IGJlaW5nIHRyYW5zZmVyZWQgaXMgbW9yZSB0aGFuIHRoZSBiYWxhbmNlIG9mIHRoZQogICAgLy8gYWNjb3VudCB0aGUgdHJhbnNmZXIgcmV0dXJucyBmYWxzZQogICAgdWludDI1NiBwcmV2aW91c0JhbGFuY2VGcm9tID0gYmFsYW5jZU9mQXQoX2Zyb20sIGJsb2NrLm51bWJlcik7CiAgICByZXF1aXJlKHByZXZpb3VzQmFsYW5jZUZyb20gPj0gX2Ftb3VudCk7CgogICAgLy8gRmlyc3QgdXBkYXRlIHRoZSBiYWxhbmNlIGFycmF5IHdpdGggdGhlIG5ldyB2YWx1ZSBmb3IgdGhlIGFkZHJlc3MKICAgIC8vICBzZW5kaW5nIHRoZSB0b2tlbnMKICAgIHVwZGF0ZVZhbHVlQXROb3coYmFsYW5jZXNbX2Zyb21dLCBwcmV2aW91c0JhbGFuY2VGcm9tIC0gX2Ftb3VudCk7CgogICAgLy8gVGhlbiB1cGRhdGUgdGhlIGJhbGFuY2UgYXJyYXkgd2l0aCB0aGUgbmV3IHZhbHVlIGZvciB0aGUgYWRkcmVzcwogICAgLy8gIHJlY2VpdmluZyB0aGUgdG9rZW5zCiAgICB1aW50MjU2IHByZXZpb3VzQmFsYW5jZVRvID0gYmFsYW5jZU9mQXQoX3RvLCBibG9jay5udW1iZXIpOwogICAgcmVxdWlyZShwcmV2aW91c0JhbGFuY2VUbyArIF9hbW91bnQgPj0gcHJldmlvdXNCYWxhbmNlVG8pOyAvLyBDaGVjayBmb3Igb3ZlcmZsb3cKICAgIHVwZGF0ZVZhbHVlQXROb3coYmFsYW5jZXNbX3RvXSwgcHJldmlvdXNCYWxhbmNlVG8gKyBfYW1vdW50KTsKCiAgICAvLyBBbiBldmVudCB0byBtYWtlIHRoZSB0cmFuc2ZlciBlYXN5IHRvIGZpbmQgb24gdGhlIGJsb2NrY2hhaW4KICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKCiAgLyoqCiAgKiBUb2tlbiBjcmVhdGlvbiBmdW5jdGlvbnMgLSBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIHRva2Vuc2FsZSBjb250cm9sbGVyIGR1cmluZyB0aGUgdG9rZW5zYWxlIHBlcmlvZAogICogQHBhcmFtIF9vd25lciB7YWRkcmVzc30KICAqIEBwYXJhbSBfYW1vdW50IHt1aW50MjU2fQogICogQHJldHVybiBzdWNjZXNzIHtib29sfQogICovCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgb25seUNvbnRyb2xsZXIgY2FuTWludCByZXR1cm5zIChib29sKSB7CiAgICB1aW50MjU2IGN1clRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkoKTsKICAgIHVpbnQyNTYgcHJldmlvdXNCYWxhbmNlVG8gPSBiYWxhbmNlT2YoX293bmVyKTsKCiAgICByZXF1aXJlKGN1clRvdGFsU3VwcGx5ICsgX2Ftb3VudCA+PSBjdXJUb3RhbFN1cHBseSk7IC8vIENoZWNrIGZvciBvdmVyZmxvdwogICAgcmVxdWlyZShwcmV2aW91c0JhbGFuY2VUbyArIF9hbW91bnQgPj0gcHJldmlvdXNCYWxhbmNlVG8pOyAvLyBDaGVjayBmb3Igb3ZlcmZsb3cKCiAgICB1cGRhdGVWYWx1ZUF0Tm93KHRvdGFsU3VwcGx5SGlzdG9yeSwgY3VyVG90YWxTdXBwbHkgKyBfYW1vdW50KTsKICAgIHVwZGF0ZVZhbHVlQXROb3coYmFsYW5jZXNbX293bmVyXSwgcHJldmlvdXNCYWxhbmNlVG8gKyBfYW1vdW50KTsKICAgIFRyYW5zZmVyKDAsIF9vd25lciwgX2Ftb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBJbXBvcnQgcHJlc2FsZSBiYWxhbmNlcyBiZWZvcmUgdGhlIHN0YXJ0IG9mIHRoZSB0b2tlbiBzYWxlLiBBZnRlciBpbXBvcnRpbmcKICAgKiBiYWxhbmNlcywgbG9ja1ByZXNhbGVCYWxhbmNlcygpIGhhcyB0byBiZSBjYWxsZWQgdG8gcHJldmVudCBmdXJ0aGVyIG1vZGlmaWNhdGlvbgogICAqIG9mIHByZXNhbGUgYmFsYW5jZXMuCiAgICogQHBhcmFtIF9hZGRyZXNzZXMge2FkZHJlc3NbXX0gQXJyYXkgb2YgcHJlc2FsZSBhZGRyZXNzZXMKICAgKiBAcGFyYW0gX2JhbGFuY2VzIHt1aW50MjU2W119IEFycmF5IG9mIGJhbGFuY2VzIGNvcnJlc3BvbmRpbmcgdG8gcHJlc2FsZSBhZGRyZXNzZXMuCiAgICogQHJldHVybiBzdWNjZXNzIHtib29sfQogICAqLwogIGZ1bmN0aW9uIGltcG9ydFByZXNhbGVCYWxhbmNlcyhhZGRyZXNzW10gX2FkZHJlc3NlcywgdWludDI1NltdIF9iYWxhbmNlcykgcHVibGljIG9ubHlDb250cm9sbGVyIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUocHJlc2FsZUJhbGFuY2VzTG9ja2VkID09IGZhbHNlKTsKCiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfYWRkcmVzc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHVwZGF0ZVZhbHVlQXROb3coYmFsYW5jZXNbX2FkZHJlc3Nlc1tpXV0sIF9iYWxhbmNlc1tpXSk7CiAgICAgIFRyYW5zZmVyKDAsIF9hZGRyZXNzZXNbaV0sIF9iYWxhbmNlc1tpXSk7CiAgICB9CgogICAgdXBkYXRlVmFsdWVBdE5vdyh0b3RhbFN1cHBseUhpc3RvcnksIFRPVEFMX1BSRVNBTEVfVE9LRU5TKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogTG9jayBwcmVzYWxlIGJhbGFuY2VzIGFmdGVyIHN1Y2Nlc3NmdWwgcHJlc2FsZSBiYWxhbmNlIGltcG9ydAogICAqIEByZXR1cm4gQSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gbG9ja1ByZXNhbGVCYWxhbmNlcygpIHB1YmxpYyBvbmx5Q29udHJvbGxlciByZXR1cm5zIChib29sKSB7CiAgICBwcmVzYWxlQmFsYW5jZXNMb2NrZWQgPSB0cnVlOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBMb2NrIHRoZSBtaW50aW5nIG9mIFNlcnZ1cyBUb2tlbnMgLSB0byBiZSBjYWxsZWQgYWZ0ZXIgdGhlIHByZXNhbGUKICAgKiBAcmV0dXJuIHtib29sfSBzdWNjZXNzCiAgKi8KICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgcHVibGljIG9ubHlDb250cm9sbGVyIHJldHVybnMgKGJvb2wpIHsKICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICBNaW50RmluaXNoZWQoKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogRW5hYmxlIG9yIGJsb2NrIHRyYW5zZmVycyAtIHRvIGJlIGNhbGxlZCBpbiBjYXNlIG9mIGVtZXJnZW5jeQogICAqIEBwYXJhbSBfdmFsdWUge2Jvb2x9CiAgKi8KICBmdW5jdGlvbiBlbmFibGVUcmFuc2ZlcnMoYm9vbCBfdmFsdWUpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICB0cmFuc2ZlcnNFbmFibGVkID0gX3ZhbHVlOwogIH0KCiAgLyoqCiAgICogRW5hYmxlIG9yIGJsb2NrIHRyYW5zZmVycyAtIHRvIGJlIGNhbGxlZCBpbiBjYXNlIG9mIGVtZXJnZW5jeQogICAqIEBwYXJhbSBfdmFsdWUge2Jvb2x9CiAgKi8KICBmdW5jdGlvbiBlbmFibGVNYXN0ZXJUcmFuc2ZlcnMoYm9vbCBfdmFsdWUpIHB1YmxpYyBvbmx5Q29udHJvbGxlciB7CiAgICBtYXN0ZXJUcmFuc2ZlcnNFbmFibGVkID0gX3ZhbHVlOwogIH0KCiAgLyoqCiAgICogSW50ZXJuYWwgYmFsYW5jZSBtZXRob2QgLSBnZXRzIGEgY2VydGFpbiBjaGVja3BvaW50IHZhbHVlIGEgYSBjZXJ0YWluIF9ibG9jawogICAqIEBwYXJhbSBfY2hlY2twb2ludHMge0NoZWNrcG9pbnRbXX0gTGlzdCBvZiBjaGVja3BvaW50cyAtIHN1cHBseSBoaXN0b3J5IG9yIGJhbGFuY2UgaGlzdG9yeQogICAqIEByZXR1cm4gdmFsdWUge3VpbnQyNTZ9IFZhbHVlIG9mIF9jaGVja3BvaW50cyBhdCBfYmxvY2sKICAqLwogIGZ1bmN0aW9uIGdldFZhbHVlQXQoQ2hlY2twb2ludFtdIHN0b3JhZ2UgX2NoZWNrcG9pbnRzLCB1aW50MjU2IF9ibG9jaykgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewoKICAgICAgaWYgKF9jaGVja3BvaW50cy5sZW5ndGggPT0gMCkKICAgICAgICByZXR1cm4gMDsKICAgICAgLy8gU2hvcnRjdXQgZm9yIHRoZSBhY3R1YWwgdmFsdWUKICAgICAgaWYgKF9ibG9jayA+PSBfY2hlY2twb2ludHNbX2NoZWNrcG9pbnRzLmxlbmd0aC0xXS5mcm9tQmxvY2spCiAgICAgICAgcmV0dXJuIF9jaGVja3BvaW50c1tfY2hlY2twb2ludHMubGVuZ3RoLTFdLnZhbHVlOwogICAgICBpZiAoX2Jsb2NrIDwgX2NoZWNrcG9pbnRzWzBdLmZyb21CbG9jaykKICAgICAgICByZXR1cm4gMDsKCiAgICAgIC8vIEJpbmFyeSBzZWFyY2ggb2YgdGhlIHZhbHVlIGluIHRoZSBhcnJheQogICAgICB1aW50MjU2IG1pbiA9IDA7CiAgICAgIHVpbnQyNTYgbWF4ID0gX2NoZWNrcG9pbnRzLmxlbmd0aC0xOwogICAgICB3aGlsZSAobWF4ID4gbWluKSB7CiAgICAgICAgICB1aW50MjU2IG1pZCA9IChtYXggKyBtaW4gKyAxKSAvIDI7CiAgICAgICAgICBpZiAoX2NoZWNrcG9pbnRzW21pZF0uZnJvbUJsb2NrPD1fYmxvY2spIHsKICAgICAgICAgICAgICBtaW4gPSBtaWQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1heCA9IG1pZC0xOwogICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBfY2hlY2twb2ludHNbbWluXS52YWx1ZTsKICB9CgoKICAvKioKICAqIEludGVybmFsIHVwZGF0ZSBtZXRob2QgLSB1cGRhdGVzIHRoZSBjaGVja3BvaW50IGxlZGdlciBhdCB0aGUgY3VycmVudCBibG9jawogICogQHBhcmFtIF9jaGVja3BvaW50cyB7Q2hlY2twb2ludFtdfSAgTGlzdCBvZiBjaGVja3BvaW50cyAtIHN1cHBseSBoaXN0b3J5IG9yIGJhbGFuY2UgaGlzdG9yeQogICogQHJldHVybiB2YWx1ZSB7dWludDI1Nn0gVmFsdWUgdG8gYWRkIHRvIHRoZSBjaGVja3BvaW50cyBsZWRnZXIKICAgKi8KICBmdW5jdGlvbiB1cGRhdGVWYWx1ZUF0Tm93KENoZWNrcG9pbnRbXSBzdG9yYWdlIF9jaGVja3BvaW50cywgdWludDI1NiBfdmFsdWUpIGludGVybmFsIHsKICAgICAgaWYgKChfY2hlY2twb2ludHMubGVuZ3RoID09IDApIHx8IChfY2hlY2twb2ludHNbX2NoZWNrcG9pbnRzLmxlbmd0aC0xXS5mcm9tQmxvY2sgPCBibG9jay5udW1iZXIpKSB7CiAgICAgICAgICAgICAgQ2hlY2twb2ludCBzdG9yYWdlIG5ld0NoZWNrUG9pbnQgPSBfY2hlY2twb2ludHNbX2NoZWNrcG9pbnRzLmxlbmd0aCsrXTsKICAgICAgICAgICAgICBuZXdDaGVja1BvaW50LmZyb21CbG9jayA9IHVpbnQxMjgoYmxvY2subnVtYmVyKTsKICAgICAgICAgICAgICBuZXdDaGVja1BvaW50LnZhbHVlID0gdWludDEyOChfdmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBDaGVja3BvaW50IHN0b3JhZ2Ugb2xkQ2hlY2tQb2ludCA9IF9jaGVja3BvaW50c1tfY2hlY2twb2ludHMubGVuZ3RoLTFdOwogICAgICAgICAgICAgIG9sZENoZWNrUG9pbnQudmFsdWUgPSB1aW50MTI4KF92YWx1ZSk7CiAgICAgICAgICB9CiAgfQoKCiAgZnVuY3Rpb24gbWluKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgLyoqCiAgKiBDbG9uZXMgU2VydnVzIFRva2VuIGF0IHRoZSBnaXZlbiBzbmFwc2hvdCBibG9jawogICogQHBhcmFtIF9zbmFwc2hvdEJsb2NrIHt1aW50MjU2fQogICogQHBhcmFtIF9uYW1lIHtzdHJpbmd9IC0gVGhlIGNsb25lZCB0b2tlbiBuYW1lCiAgKiBAcGFyYW0gX3N5bWJvbCB7c3RyaW5nfSAtIFRoZSBjbG9uZWQgdG9rZW4gc3ltYm9sCiAgKiBAcmV0dXJuIGNsb25lZFRva2VuQWRkcmVzcyB7YWRkcmVzc30KICAgKi8KICBmdW5jdGlvbiBjcmVhdGVDbG9uZVRva2VuKHVpbnQyNTYgX3NuYXBzaG90QmxvY2ssIHN0cmluZyBfbmFtZSwgc3RyaW5nIF9zeW1ib2wpIHB1YmxpYyByZXR1cm5zKGFkZHJlc3MpIHsKCiAgICAgIGlmIChfc25hcHNob3RCbG9jayA9PSAwKSB7CiAgICAgICAgX3NuYXBzaG90QmxvY2sgPSBibG9jay5udW1iZXI7CiAgICAgIH0KCiAgICAgIGlmIChfc25hcHNob3RCbG9jayA+IGJsb2NrLm51bWJlcikgewogICAgICAgIF9zbmFwc2hvdEJsb2NrID0gYmxvY2subnVtYmVyOwogICAgICB9CgogICAgICBTZXJ2dXNUb2tlbiBjbG9uZVRva2VuID0gdG9rZW5GYWN0b3J5LmNyZWF0ZUNsb25lVG9rZW4oCiAgICAgICAgICB0aGlzLAogICAgICAgICAgX3NuYXBzaG90QmxvY2ssCiAgICAgICAgICBfbmFtZSwKICAgICAgICAgIF9zeW1ib2wKICAgICAgICApOwoKCiAgICAgIGNsb25lVG9rZW4udHJhbnNmZXJDb250cm9sKG1zZy5zZW5kZXIpOwoKICAgICAgLy8gQW4gZXZlbnQgdG8gbWFrZSB0aGUgdG9rZW4gZWFzeSB0byBmaW5kIG9uIHRoZSBibG9ja2NoYWluCiAgICAgIE5ld0Nsb25lVG9rZW4oYWRkcmVzcyhjbG9uZVRva2VuKSk7CiAgICAgIHJldHVybiBhZGRyZXNzKGNsb25lVG9rZW4pOwogICAgfQoKfQ=='.
	

]
