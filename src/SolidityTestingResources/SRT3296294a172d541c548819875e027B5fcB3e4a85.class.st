Class {
	#name : #SRT3296294a172d541c548819875e027B5fcB3e4a85,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3296294a172d541c548819875e027B5fcB3e4a85 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCgogICAgLyoqCiAgICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICB9CiAgICB9Cgp9CgoKCi8qKgogKiBAdGl0bGUgQXV0aG9yaXphYmxlCiAqIEBkZXYgQWxsb3dzIHRvIGF1dGhvcml6ZSBhY2Nlc3MgdG8gY2VydGFpbiBmdW5jdGlvbiBjYWxscwogKgogKiBBQkkKICogW3siY29uc3RhbnQiOnRydWUsImlucHV0cyI6W3sibmFtZSI6ImF1dGhvcml6ZXJJbmRleCIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoiZ2V0QXV0aG9yaXplciIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYWRkciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiYWRkQXV0aG9yaXplZCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2FkZHIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwibmFtZSI6ImlzQXV0aG9yaXplZCIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYm9vbCJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiaW5wdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJjb25zdHJ1Y3RvciJ9XQogKi8KY29udHJhY3QgQXV0aG9yaXphYmxlIHsKCiAgICBhZGRyZXNzW10gYXV0aG9yaXplcnM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYXV0aG9yaXplckluZGV4OwoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IHRhdCBpcyBub3QgYXV0aG9yaXplZC4KICAgICAqLwogICAgbW9kaWZpZXIgb25seUF1dGhvcml6ZWQgewogICAgICAgIHJlcXVpcmUoaXNBdXRob3JpemVkKG1zZy5zZW5kZXIpKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBDb250cnVjdG9yIHRoYXQgYXV0aG9yaXplcyB0aGUgbXNnLnNlbmRlci4KICAgICAqLwogICAgZnVuY3Rpb24gQXV0aG9yaXphYmxlKCkgewogICAgICAgIGF1dGhvcml6ZXJzLmxlbmd0aCA9IDI7CiAgICAgICAgYXV0aG9yaXplcnNbMV0gPSBtc2cuc2VuZGVyOwogICAgICAgIGF1dGhvcml6ZXJJbmRleFttc2cuc2VuZGVyXSA9IDE7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGdldCBhIHNwZWNpZmljIGF1dGhvcml6ZXIKICAgICAqIEBwYXJhbSBhdXRob3JpemVySW5kZXggaW5kZXggb2YgdGhlIGF1dGhvcml6ZXIgdG8gYmUgcmV0cmlldmVkLgogICAgICogQHJldHVybiBUaGUgYWRkcmVzcyBvZiB0aGUgYXV0aG9yaXplci4KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0QXV0aG9yaXplcih1aW50IGF1dGhvcml6ZXJJbmRleCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIGFkZHJlc3MoYXV0aG9yaXplcnNbYXV0aG9yaXplckluZGV4ICsgMV0pOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayBpZiBhbiBhZGRyZXNzIGlzIGF1dGhvcml6ZWQKICAgICAqIEBwYXJhbSBfYWRkciB0aGUgYWRkcmVzcyB0byBjaGVjayBpZiBpdCBpcyBhdXRob3JpemVkLgogICAgICogQHJldHVybiBib29sZWFuIGZsYWcgaWYgYWRkcmVzcyBpcyBhdXRob3JpemVkLgogICAgICovCiAgICBmdW5jdGlvbiBpc0F1dGhvcml6ZWQoYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIGF1dGhvcml6ZXJJbmRleFtfYWRkcl0gPiAwOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBhZGQgYSBuZXcgYXV0aG9yaXplcgogICAgICogQHBhcmFtIF9hZGRyIHRoZSBhZGRyZXNzIHRvIGFkZCBhcyBhIG5ldyBhdXRob3JpemVyLgogICAgICovCiAgICBmdW5jdGlvbiBhZGRBdXRob3JpemVkKGFkZHJlc3MgX2FkZHIpIGV4dGVybmFsIG9ubHlBdXRob3JpemVkIHsKICAgICAgICBhdXRob3JpemVySW5kZXhbX2FkZHJdID0gYXV0aG9yaXplcnMubGVuZ3RoOwogICAgICAgIGF1dGhvcml6ZXJzLmxlbmd0aCsrOwogICAgICAgIGF1dGhvcml6ZXJzW2F1dGhvcml6ZXJzLmxlbmd0aCAtIDFdID0gX2FkZHI7CiAgICB9Cgp9CgovKioKICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICAgICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICAgICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgICB9CgogICAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoYXNzZXJ0aW9uKTsKICAgIH0KfQoKCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KCgoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCgoKCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CgogICAgLyoqCiAgICAgKiBAZGV2IEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrLgogICAgICovCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgICAgcmVxdWlyZShtc2cuZGF0YS5sZW5ndGggPj0gc2l6ZSArIDQpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAgICogQHJldHVybiBBbiB1aW50IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKfQoKCgoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWFudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFydCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBCYXNpY1Rva2VuLCBFUkMyMCB7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwoKCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsKICAgICAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgICAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgICAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7CgogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVhaGxmIG9mIG1zZy5zZW5kZXIuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSB7CgogICAgICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAgICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICByZXF1aXJlKCAhICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgKTsKCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYW4gYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEByZXR1cm4gQSB1aW50IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KICAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKfQoKCgoKCgovKioKICogQHRpdGxlIE1pbnRhYmxlIHRva2VuCiAqIEBkZXYgU2ltcGxlIEVSQzIwIFRva2VuIGV4YW1wbGUsIHdpdGggbWludGFibGUgdG9rZW4gY3JlYXRpb24KICogQGRldiBJc3N1ZTogKiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2lzc3Vlcy8xMjAKICogQmFzZWQgb24gY29kZSBieSBUb2tlbk1hcmtldE5ldDogaHR0cHM6Ly9naXRodWIuY29tL1Rva2VuTWFya2V0TmV0L2ljby9ibG9iL21hc3Rlci9jb250cmFjdHMvTWludGFibGVUb2tlbi5zb2wKICovCgpjb250cmFjdCBNaW50YWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogICAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgTWludEZpbmlzaGVkKCk7CgogICAgYm9vbCBwdWJsaWMgbWludGluZ0ZpbmlzaGVkID0gZmFsc2U7CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseSA9IDA7CgoKICAgIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICAgICAgcmVxdWlyZSghIG1pbnRpbmdGaW5pc2hlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2lldmUgdGhlIG1pbnRlZCB0b2tlbnMuCiAgICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqLwogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBvbmx5T3duZXIgY2FuTWludCByZXR1cm5zIChib29sKSB7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgICAgIE1pbnQoX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gc3RvcCBtaW50aW5nIG5ldyB0b2tlbnMuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqLwogICAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICAgICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICBNaW50RmluaXNoZWQoKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKCgoKCgovKioKICogQHRpdGxlIFRvcENoYWluVG9rZW4KICogQGRldiBUaGUgbWFpbiBUUEMgdG9rZW4gY29udHJhY3QKICoKICogQUJJCiAqIFt7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoibWludGluZ0ZpbmlzaGVkIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6Im5hbWUiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InN0cmluZyJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfc3BlbmRlciIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX3ZhbHVlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJhcHByb3ZlIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoidG90YWxTdXBwbHkiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2Zyb20iLCJ0eXBlIjoiYWRkcmVzcyJ9LHsibmFtZSI6Il90byIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX3ZhbHVlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJ0cmFuc2ZlckZyb20iLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoic3RhcnRUcmFkaW5nIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoiZGVjaW1hbHMiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX3RvIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfYW1vdW50IiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJtaW50Iiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6InRyYWRpbmdTdGFydGVkIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbeyJuYW1lIjoiX293bmVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJiYWxhbmNlT2YiLCJvdXRwdXRzIjpbeyJuYW1lIjoiYmFsYW5jZSIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W10sIm5hbWUiOiJmaW5pc2hNaW50aW5nIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6Im93bmVyIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6InN5bWJvbCIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoic3RyaW5nIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il90byIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX3ZhbHVlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJ0cmFuc2ZlciIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbeyJuYW1lIjoiX293bmVyIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfc3BlbmRlciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiYWxsb3dhbmNlIiwib3V0cHV0cyI6W3sibmFtZSI6InJlbWFpbmluZyIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Im5ld093bmVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJ0cmFuc2Zlck93bmVyc2hpcCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJ0byIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InZhbHVlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJNaW50IiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoiTWludEZpbmlzaGVkIiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJvd25lciIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjp0cnVlLCJuYW1lIjoic3BlbmRlciIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InZhbHVlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJBcHByb3ZhbCIsInR5cGUiOiJldmVudCJ9LHsiYW5vbnltb3VzIjpmYWxzZSwiaW5wdXRzIjpbeyJpbmRleGVkIjp0cnVlLCJuYW1lIjoiZnJvbSIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjp0cnVlLCJuYW1lIjoidG8iLCJ0eXBlIjoiYWRkcmVzcyJ9LHsiaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJ2YWx1ZSIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoiVHJhbnNmZXIiLCJ0eXBlIjoiZXZlbnQifV0KICovCmNvbnRyYWN0IFRvcENvaW4gaXMgTWludGFibGVUb2tlbiB7CgogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIlRvcENvaW4iOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiVFBDIjsKICAgIHVpbnQgcHVibGljIGRlY2ltYWxzID0gNjsKCiAgICBib29sIHB1YmxpYyB0cmFkaW5nU3RhcnRlZCA9IGZhbHNlOwoKICAgIC8qKgogICAgICogQGRldiBtb2RpZmllciB0aGF0IHRocm93cyBpZiB0cmFkaW5nIGhhcyBub3Qgc3RhcnRlZCB5ZXQKICAgICAqLwogICAgbW9kaWZpZXIgaGFzU3RhcnRlZFRyYWRpbmcoKSB7CiAgICAgICAgcmVxdWlyZSh0cmFkaW5nU3RhcnRlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byBlbmFibGUgdGhlIHRyYWRpbmcuIFRoaXMgY2FuIG5vdCBiZSB1bmRvbmUKICAgICAqLwogICAgZnVuY3Rpb24gc3RhcnRUcmFkaW5nKCkgb25seU93bmVyIHsKICAgICAgICB0cmFkaW5nU3RhcnRlZCA9IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyBhbnlvbmUgdG8gdHJhbnNmZXIgdGhlIFBBWSB0b2tlbnMgb25jZSB0cmFkaW5nIGhhcyBzdGFydGVkCiAgICAgKiBAcGFyYW0gX3RvIHRoZSByZWNpcGllbnQgYWRkcmVzcyBvZiB0aGUgdG9rZW5zLgogICAgICogQHBhcmFtIF92YWx1ZSBudW1iZXIgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaGFzU3RhcnRlZFRyYWRpbmcgewogICAgICAgIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBBbGxvd3MgYW55b25lIHRvIHRyYW5zZmVyIHRoZSBQQVkgdG9rZW5zIG9uY2UgdHJhZGluZyBoYXMgc3RhcnRlZAogICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaGFzU3RhcnRlZFRyYWRpbmcgewogICAgICAgIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKfQoKCi8qKgogKiBAdGl0bGUgVG9wQ29pbkRpc3RyaWJ1dGlvbgogKiBAZGV2IFRoZSBtYWluIFRQQyB0b2tlbiBzYWxlIGNvbnRyYWN0CiAqCiAqIEFCSQogKi8KY29udHJhY3QgVG9wQ29pbkRpc3RyaWJ1dGlvbiBpcyBPd25hYmxlLCBBdXRob3JpemFibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgICBldmVudCBUb2tlblNvbGQoYWRkcmVzcyByZWNpcGllbnQsIHVpbnQgZXRoZXJfYW1vdW50LCB1aW50IHBheV9hbW91bnQsIHVpbnQgZXhjaGFuZ2VyYXRlKTsKICAgIGV2ZW50IEF1dGhvcml6ZWRDcmVhdGUoYWRkcmVzcyByZWNpcGllbnQsIHVpbnQgcGF5X2Ftb3VudCk7CiAgICBldmVudCBUb3BDb2luU2FsZUNsb3NlZCgpOwoKICAgIFRvcENvaW4gcHVibGljIHRva2VuID0gbmV3IFRvcENvaW4oKTsKCiAgICBhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZ1ZhdWx0OwoKICAgIHVpbnQgcHVibGljIGhhcmRjYXAgPSA4NzUwMCBldGhlcjsKCiAgICB1aW50IHB1YmxpYyByYXRlID0gMzYwMCooMTAgKiogNik7IC8vMSBldGhlciA6IDM2MDAgdHBjCgogICAgdWludCB0b3RhbFRva2VuID0gMjEwMDAwMDAwMCAqICgxMCAqKiA2KTsgLy90cGMKCiAgICB1aW50IHB1YmxpYyBhdXRob3JpemVNaW50VG9rZW4gPSAyMTAwMDAwMDAgKiAoMTAgKiogNik7IC8vdHBjCgogICAgdWludCBwdWJsaWMgYWx0RGVwb3NpdHMgPSAwOyAvL2V0aGVyCgogICAgdWludCBwdWJsaWMgc3RhcnQgPSAxNTA0MDA4MDAwOyAvL25ldyBEYXRlKCJBdWcgMjkgMjAxNyAyMDowMDowMCBHTVQrOCIpLmdldFRpbWUoKSAvIDEwMDA7CgogICAgYWRkcmVzcyBwYXJ0ZW5lcnNBZGRyZXNzID0gMHg2RjNjMDFFMzUwNTA5Yjk4NjY1YkNjRjdjN0Q4OEMxMjBDMTc2MmVmOyAvL3RvdGFsVG9rZW4gKiAyMCUKICAgIGFkZHJlc3Mgb3BlcmF0aW9uQWRkcmVzcyA9IDB4YjVCODAyRjc1M2JFZTkwQzk2OWFEMjdhOTREYTVDMTc5RWFhMzMzNDsgLy90b3RhbFRva2VuICogMjAlCiAgICBhZGRyZXNzIHRlY2huaWNhbEFkZHJlc3MgPSAweDYyQzFlQzI1NkI3YmIxMEFBNTNGRDQyMDg0NTRFMUJGRDUzM2I3ZjA7IC8vdG90YWxUb2tlbiAqIDMwJQoKICAgIC8qKgogICAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyB0b2tlbiBjcmVhdGlvbiBvbmx5IHdoZW4gdGhlIHNhbGUgSVMgT04KICAgICAqLwogICAgbW9kaWZpZXIgc2FsZUlzT24oKSB7CiAgICAgICAgcmVxdWlyZShub3cgPiBzdGFydCAmJiBub3cgPCBzdGFydCArIDI4IGRheXMpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IHRva2VuIGNyZWF0aW9uIG9ubHkgd2hlbiB0aGUgaGFyZGNhcCBoYXMgbm90IGJlZW4gcmVhY2hlZAogICAgICovCiAgICBtb2RpZmllciBpc1VuZGVySGFyZENhcCgpIHsKICAgICAgICByZXF1aXJlKG11bHRpc2lnVmF1bHQuYmFsYW5jZSArIG1zZy52YWx1ZSArIGFsdERlcG9zaXRzIDw9IGhhcmRjYXApOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zKGJvb2wpIHsKICAgICAgICB1aW50IHNpemU7CiAgICAgICAgaWYgKF9hZGRyID09IDApIHJldHVybiBmYWxzZTsKICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNpemUgPiAwOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgYW55b25lIHRvIGNyZWF0ZSB0b2tlbnMgYnkgZGVwb3NpdGluZyBldGhlci4KICAgICAqIEBwYXJhbSByZWNpcGllbnQgdGhlIHJlY2lwaWVudCB0byByZWNlaXZlIHRva2Vucy4KICAgICAqLwogICAgZnVuY3Rpb24gY3JlYXRlVG9rZW5zKGFkZHJlc3MgcmVjaXBpZW50KSBwdWJsaWMgaXNVbmRlckhhcmRDYXAgc2FsZUlzT24gcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSghaXNDb250cmFjdChyZWNpcGllbnQpKTsKICAgICAgICB1aW50IHRva2VucyA9IHJhdGUubXVsKG1zZy52YWx1ZSkuZGl2KDEgZXRoZXIpOwogICAgICAgIHRva2VuLm1pbnQocmVjaXBpZW50LCB0b2tlbnMpOwogICAgICAgIHJlcXVpcmUobXVsdGlzaWdWYXVsdC5zZW5kKG1zZy52YWx1ZSkpOwogICAgICAgIFRva2VuU29sZChyZWNpcGllbnQsIG1zZy52YWx1ZSwgdG9rZW5zLCByYXRlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRvIHNldCB0aGUgYXV0aG9yaXplIG1pbnQgdG9rZW4KICAgICAqIEBwYXJhbSBfYXV0aG9yaXplTWludFRva2VuIHRvdGFsIGFtb3VudCBFVEggZXF1aXZhbGVudAogICAgICovCiAgICBmdW5jdGlvbiBzZXRBdXRob3JpemVNaW50VG9rZW4odWludCBfYXV0aG9yaXplTWludFRva2VuKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBhdXRob3JpemVNaW50VG9rZW4gPSBfYXV0aG9yaXplTWludFRva2VuOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgdG8gc2V0IHRoZSB0b3RhbCBhbHQgZGVwb3NpdCBtZWFzdXJlZCBpbiBFVEggdG8gbWFrZSBzdXJlIHRoZSBoYXJkY2FwIGluY2x1ZGVzIG90aGVyIGRlcG9zaXRzCiAgICAgKiBAcGFyYW0gdG90YWxBbHREZXBvc2l0cyB0b3RhbCBhbW91bnQgRVRIIGVxdWl2YWxlbnQKICAgICAqLwogICAgZnVuY3Rpb24gc2V0QWx0RGVwb3NpdCh1aW50IHRvdGFsQWx0RGVwb3NpdHMpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGFsdERlcG9zaXRzID0gdG90YWxBbHREZXBvc2l0czsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgc2V0IGV0aCA6IHRwYyByYXRlCiAgICAgKiBAcGFyYW0gX3JhdGUgZXRoOnRwYyByYXRlCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFJhdGUodWludCBfcmF0ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmF0ZSA9IF9yYXRlOwogICAgfQoKCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIGF1dGhvcml6ZWQgYWNjZXNzIHRvIGNyZWF0ZSB0b2tlbnMuIFRoaXMgaXMgdXNlZCBmb3IgQml0Y29pbiBhbmQgRVJDMjAgZGVwb3NpdHMKICAgICAqIEBwYXJhbSByZWNpcGllbnQgdGhlIHJlY2lwaWVudCB0byByZWNlaXZlIHRva2Vucy4KICAgICAqIEBwYXJhbSBfdG9rZW5zIG51bWJlciBvZiB0b2tlbnMgdG8gYmUgY3JlYXRlZC4KICAgICAqLwogICAgZnVuY3Rpb24gYXV0aG9yaXplZENyZWF0ZVRva2VucyhhZGRyZXNzIHJlY2lwaWVudCwgdWludCBfdG9rZW5zKSBwdWJsaWMgb25seUF1dGhvcml6ZWQgewogICAgICAgIHVpbnQgdG9rZW5zID0gX3Rva2VucyAqICgxMCAqKiA2KTsKICAgICAgICB1aW50IHRvdGFsU3VwcGx5ID0gdG9rZW4udG90YWxTdXBwbHkoKTsKICAgICAgICByZXF1aXJlKHRvdGFsU3VwcGx5ICsgdG9rZW5zIDw9IGF1dGhvcml6ZU1pbnRUb2tlbik7CiAgICAgICAgdG9rZW4ubWludChyZWNpcGllbnQsIHRva2Vucyk7CiAgICAgICAgQXV0aG9yaXplZENyZWF0ZShyZWNpcGllbnQsIHRva2Vucyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyB0aGUgb3duZXIgdG8gc2V0IHRoZSBoYXJkY2FwLgogICAgICogQHBhcmFtIF9oYXJkY2FwIHRoZSBuZXcgaGFyZGNhcAogICAgICovCiAgICBmdW5jdGlvbiBzZXRIYXJkQ2FwKHVpbnQgX2hhcmRjYXApIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGhhcmRjYXAgPSBfaGFyZGNhcDsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byBzZXQgdGhlIHN0YXJ0aW5nIHRpbWUuCiAgICAgKiBAcGFyYW0gX3N0YXJ0IHRoZSBuZXcgX3N0YXJ0CiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFN0YXJ0KHVpbnQgX3N0YXJ0KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBzdGFydCA9IF9zdGFydDsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byBzZXQgdGhlIG11bHRpc2lnIGNvbnRyYWN0LgogICAgICogQHBhcmFtIF9tdWx0aXNpZ1ZhdWx0IHRoZSBtdWx0aXNpZyBjb250cmFjdCBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldE11bHRpc2lnVmF1bHQoYWRkcmVzcyBfbXVsdGlzaWdWYXVsdCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaWYgKF9tdWx0aXNpZ1ZhdWx0ICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgbXVsdGlzaWdWYXVsdCA9IF9tdWx0aXNpZ1ZhdWx0OwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byBmaW5pc2ggdGhlIG1pbnRpbmcuIFRoaXMgd2lsbCBjcmVhdGUgdGhlCiAgICAgKiByZXN0cmljdGVkIHRva2VucyBhbmQgdGhlbiBjbG9zZSB0aGUgbWludGluZy4KICAgICAqIFRoZW4gdGhlIG93bmVyc2hpcCBvZiB0aGUgWUVTIHRva2VuIGNvbnRyYWN0IGlzIHRyYW5zZmVyZWQKICAgICAqIHRvIHRoaXMgb3duZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB1aW50IGlzc3VlZFRva2VuU3VwcGx5ID0gdG9rZW4udG90YWxTdXBwbHkoKTsKICAgICAgICB1aW50IHBhcnRlbmVyc1Rva2VucyA9IHRvdGFsVG9rZW4ubXVsKDIwKS5kaXYoMTAwKTsKICAgICAgICB1aW50IHRlY2huaWNhbFRva2VucyA9IHRvdGFsVG9rZW4ubXVsKDMwKS5kaXYoMTAwKTsKICAgICAgICB1aW50IG9wZXJhdGlvblRva2VucyA9IHRvdGFsVG9rZW4ubXVsKDIwKS5kaXYoMTAwKTsKCiAgICAgICAgdG9rZW4ubWludChwYXJ0ZW5lcnNBZGRyZXNzLCBwYXJ0ZW5lcnNUb2tlbnMpOwogICAgICAgIHRva2VuLm1pbnQodGVjaG5pY2FsQWRkcmVzcywgdGVjaG5pY2FsVG9rZW5zKTsKICAgICAgICB0b2tlbi5taW50KG9wZXJhdGlvbkFkZHJlc3MsIG9wZXJhdGlvblRva2Vucyk7CgogICAgICAgIHVpbnQgcmVzdHJpY3RlZFRva2VucyA9IHRvdGFsVG9rZW4uc3ViKGlzc3VlZFRva2VuU3VwcGx5KS5zdWIocGFydGVuZXJzVG9rZW5zKS5zdWIodGVjaG5pY2FsVG9rZW5zKS5zdWIob3BlcmF0aW9uVG9rZW5zKTsKICAgICAgICB0b2tlbi5taW50KG11bHRpc2lnVmF1bHQsIHJlc3RyaWN0ZWRUb2tlbnMpOwogICAgICAgIHRva2VuLmZpbmlzaE1pbnRpbmcoKTsKICAgICAgICB0b2tlbi50cmFuc2Zlck93bmVyc2hpcChvd25lcik7CiAgICAgICAgVG9wQ29pblNhbGVDbG9zZWQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byB0cmFuc2ZlciBFUkMyMCB0b2tlbnMgdG8gdGhlIG11bHRpIHNpZyB2YXVsdAogICAgICogQHBhcmFtIF90b2tlbiB0aGUgY29udHJhY3QgYWRkcmVzcyBvZiB0aGUgRVJDMjAgY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gcmV0cmlldmVUb2tlbnMoYWRkcmVzcyBfdG9rZW4pIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIEVSQzIwIHRva2VuID0gRVJDMjAoX3Rva2VuKTsKICAgICAgICB0b2tlbi50cmFuc2ZlcihtdWx0aXNpZ1ZhdWx0LCB0b2tlbi5iYWxhbmNlT2YodGhpcykpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGYWxsYmFjayBmdW5jdGlvbiB3aGljaCByZWNlaXZlcyBldGhlciBhbmQgY3JlYXRlZCB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIHRva2VucyBmb3IgdGhlCiAgICAgKiBtc2cuc2VuZGVyLgogICAgICovCiAgICBmdW5jdGlvbigpIGV4dGVybmFsIHBheWFibGUgewogICAgICAgIGNyZWF0ZVRva2Vucyhtc2cuc2VuZGVyKTsKICAgIH0KCn0='.
	

]
