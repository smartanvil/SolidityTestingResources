Class {
	#name : #SRT6cBc1A135d3C9a835d523aaE9E4723B9b776fC49,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6cBc1A135d3C9a835d523aaE9E4723B9b776fC49 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKKiBAYXV0aG9yIEplZmZlcnNvbiBEYXZpcwoqIFN0YWtlUG9vbF9JQ08uc29sIGNyZWF0ZXMgdGhlIGNsaWVudCdzIHRva2VuIGZvciBjcm93ZHNhbGUgYW5kIGFsbG93cyBmb3Igc3Vic2VxdWVudCB0b2tlbiBzYWxlcyBhbmQgbWludGluZyBvZiB0b2tlbnMKKiAgIEluIGFkZGl0aW9uLCB0aGVyZSBpcyBhIHF1YXJ0ZXJseSBkaXZpZGVuZCBwYXlvdXQgdHJpZ2dlcmVkIGJ5IHRoZSBvd25lciwgcGx1cyBjcmVhdGVzIGEgdHJhbnNhY3Rpb24gcmVjb3JkIHByaW9yIHRvIHBheW91dAoqICAgQ3Jvd2RzYWxlIGNvbnRyYWN0cyBlZGl0ZWQgZnJvbSBvcmlnaW5hbCBjb250cmFjdCBjb2RlIGF0IGh0dHBzOi8vd3d3LmV0aGVyZXVtLm9yZy9jcm93ZHNhbGUjY3Jvd2RmdW5kLXlvdXItaWRlYQoqICAgQWRkaXRpb25hbCBjcm93ZHNhbGUgY29udHJhY3RzLCBmdW5jdGlvbnMsIGxpYnJhcmllcyBmcm9tIE9wZW5aZXBwZWxpbgoqICAgICAgIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvdHJlZS9tYXN0ZXIvY29udHJhY3RzL3Rva2VuCiogICBUb2tlbiBjb250cmFjdCBlZGl0ZWQgZnJvbSBvcmlnaW5hbCBjb250cmFjdCBjb2RlIGF0IGh0dHBzOi8vd3d3LmV0aGVyZXVtLm9yZy90b2tlbgoqICAgRVJDMjAgaW50ZXJmYWNlIGFuZCBjZXJ0YWluIHRva2VuIGZ1bmN0aW9ucyBhZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0NvbnNlblN5cy9Ub2tlbnMKKiovCgpjb250cmFjdCBFUkMyMCB7CgkvL1NldHMgZXZlbnRzIGFuZCBmdW5jdGlvbnMgZm9yIEVSQzIwIHRva2VuCglldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKTsKCWV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludCBfdmFsdWUpOwoJCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKCWZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwp9CgoKY29udHJhY3QgT3duZWQgewoJLy9QdWJsaWMgdmFyaWFibGUKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCS8vU2V0cyBjb250cmFjdCBjcmVhdG9yIGFzIHRoZSBvd25lcgogICAgZnVuY3Rpb24gT3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoJCgkvL1NldHMgb25seU93bmVyIG1vZGlmaWVyIGZvciBzcGVjaWZpZWQgZnVuY3Rpb25zCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCgkvL0FsbG93cyBmb3IgdHJhbnNmZXIgb2YgY29udHJhY3Qgb3duZXJzaGlwCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9Cn0KCgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfSAgCgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICAgIH0KCiAgICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgICB9CgogICAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgICAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICAgIH0KICAKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQp9CgoKY29udHJhY3QgU3Rha2VQb29sIGlzIEVSQzIwLCBPd25lZCB7CiAgICAgLy9BcHBsaWVzIFNhZmVNYXRoIGxpYnJhcnkgdG8gdWludDI1NiBvcGVyYXRpb25zIAogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgoJLy9QdWJsaWMgdmFyaWFibGVzCglzdHJpbmcgcHVibGljIG5hbWU7IAoJc3RyaW5nIHB1YmxpYyBzeW1ib2w7IAoJdWludDI1NiBwdWJsaWMgZGVjaW1hbHM7ICAKICAgIHVpbnQyNTYgcHVibGljIGluaXRpYWxTdXBwbHk7IAoJdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7IAoKICAgIC8vVmFyaWFibGVzCiAgICB1aW50MjU2IG11bHRpcGxpZXI7IAoJCgkvL0NyZWF0ZXMgYXJyYXlzIGZvciBiYWxhbmNlcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgIC8vQ3JlYXRlcyBtb2RpZmllciB0byBwcmV2ZW50IHNob3J0IGFkZHJlc3MgYXR0YWNrCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgoJLy9Db25zdHJ1Y3RvcgoJZnVuY3Rpb24gU3Rha2VQb29sKHN0cmluZyB0b2tlbk5hbWUsIHN0cmluZyB0b2tlblN5bWJvbCwgdWludDggZGVjaW1hbFVuaXRzLCB1aW50MjU2IGRlY2ltYWxNdWx0aXBsaWVyLCB1aW50MjU2IGluaXRpYWxBbW91bnQpIHsKCQluYW1lID0gdG9rZW5OYW1lOyAKCQlzeW1ib2wgPSB0b2tlblN5bWJvbDsgCgkJZGVjaW1hbHMgPSBkZWNpbWFsVW5pdHM7IAogICAgICAgIG11bHRpcGxpZXIgPSBkZWNpbWFsTXVsdGlwbGllcjsgCiAgICAgICAgaW5pdGlhbFN1cHBseSA9IGluaXRpYWxBbW91bnQ7IAoJCXRvdGFsU3VwcGx5ID0gaW5pdGlhbFN1cHBseTsgIAoJfQoJCgkvL1Byb3ZpZGVzIHRoZSByZW1haW5pbmcgYmFsYW5jZSBvZiBhcHByb3ZlZCB0b2tlbnMgZnJvbSBmdW5jdGlvbiBhcHByb3ZlIAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCgkvL0FsbG93cyBmb3IgYSBjZXJ0YWluIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQgb24gYmVoYWxmIG9mIHRoZSBhY2NvdW50IG93bmVyCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICB1aW50MjU2IGFtb3VudCA9IF92YWx1ZS5tdWwobXVsdGlwbGllcik7IAogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYW1vdW50OwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCS8vUmV0dXJucyB0aGUgYWNjb3VudCBiYWxhbmNlIAogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZ0JhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZVtfb3duZXJdOwogICAgfQoKICAgIC8vQWxsb3dzIGNvbnRyYWN0IG93bmVyIHRvIG1pbnQgbmV3IHRva2VucywgcHJldmVudHMgbnVtZXJpY2FsIG92ZXJmbG93CglmdW5jdGlvbiBtaW50VG9rZW4oYWRkcmVzcyB0YXJnZXQsIHVpbnQyNTYgbWludGVkQW1vdW50KSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdWludDI1NiBhZGRUb2tlbnMgPSBtaW50ZWRBbW91bnQubXVsKG11bHRpcGxpZXIpOyAKCQlpZiAoKHRvdGFsU3VwcGx5ICsgYWRkVG9rZW5zKSA8IHRvdGFsU3VwcGx5KSB7CgkJCXJldmVydCgpOyAKCQl9IGVsc2UgewoJCQliYWxhbmNlW3RhcmdldF0gKz0gYWRkVG9rZW5zOwoJCQl0b3RhbFN1cHBseSArPSBhZGRUb2tlbnM7CgkJCVRyYW5zZmVyKDAsIHRhcmdldCwgYWRkVG9rZW5zKTsKCQkJcmV0dXJuIHRydWU7IAoJCX0KCX0KCgkvL1NlbmRzIHRva2VucyBmcm9tIHNlbmRlcidzIGFjY291bnQKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdWludDI1NiBhbW91bnQgPSBfdmFsdWUubXVsKG11bHRpcGxpZXIpOyAKICAgICAgICBpZiAoYmFsYW5jZVttc2cuc2VuZGVyXSA+PSBhbW91bnQgJiYgYmFsYW5jZVtfdG9dICsgYW1vdW50ID4gYmFsYW5jZVtfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VbbXNnLnNlbmRlcl0gLT0gYW1vdW50OwogICAgICAgICAgICBiYWxhbmNlW190b10gKz0gYW1vdW50OwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIGFtb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IAoJCQlyZXR1cm4gZmFsc2U7IAoJCX0KICAgIH0KCQoJLy9UcmFuc2ZlcnMgdG9rZW5zIGZyb20gYW4gYXBwcm92ZWQgYWNjb3VudCAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gX3ZhbHVlLm11bChtdWx0aXBsaWVyKTsgCiAgICAgICAgaWYgKGJhbGFuY2VbX2Zyb21dID49IGFtb3VudCAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBhbW91bnQgJiYgYmFsYW5jZVtfdG9dICsgYW1vdW50ID4gYmFsYW5jZVtfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VbX3RvXSArPSBhbW91bnQ7CiAgICAgICAgICAgIGJhbGFuY2VbX2Zyb21dIC09IGFtb3VudDsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gYW1vdW50OwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBhbW91bnQpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyAKCQkJcmV0dXJuIGZhbHNlOyAKCQl9CiAgICB9Cn0KCgpjb250cmFjdCBTdGFrZVBvb2xJQ08gaXMgT3duZWQsIFN0YWtlUG9vbCB7CiAgICAvL0FwcGxpZXMgU2FmZU1hdGggbGlicmFyeSB0byB1aW50MjU2IG9wZXJhdGlvbnMgCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICAvL1B1YmxpYyBWYXJpYWJsZXMKICAgIGFkZHJlc3MgcHVibGljIG11bHRpU2lnV2FsbGV0OyAgICAgICAgICAgICAgICAgIAogICAgdWludDI1NiBwdWJsaWMgYW1vdW50UmFpc2VkOyAKICAgIHVpbnQyNTYgcHVibGljIGRpdmlkZW5kUGF5bWVudDsKICAgIHVpbnQyNTYgcHVibGljIG51bWJlck9mUmVjb3JkRW50cmllczsgCiAgICB1aW50MjU2IHB1YmxpYyBudW1iZXJPZlRva2VuSG9sZGVyczsgCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWU7IAogICAgdWludDI1NiBwdWJsaWMgc3RvcFRpbWU7IAogICAgdWludDI1NiBwdWJsaWMgaGFyZGNhcDsgCiAgICB1aW50MjU2IHB1YmxpYyBwcmljZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgLy9WYXJpYWJsZXMKICAgIGFkZHJlc3NbXSByZWNvcmRUb2tlbkhvbGRlcnM7IAogICAgYWRkcmVzc1tdIHRva2VuSG9sZGVyczsgCiAgICBib29sIGNyb3dkc2FsZUNsb3NlZCA9IHRydWU7IAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSByZWNvcmRCYWxhbmNlOyAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcmVjb3JkVG9rZW5Ib2xkZXJJRDsgICAgICAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgdG9rZW5Ib2xkZXJJRDsgICAgICAgICAgICAgICAKICAgIHN0cmluZyB0b2tlbk5hbWUgPSAiU3Rha2VQb29sIjsgCiAgICBzdHJpbmcgdG9rZW5TeW1ib2wgPSAiUE9PTCI7IAogICAgdWludDI1NiBpbml0aWFsVG9rZW5zID0gMjAwMDAwMDAwMDAwMDAwMDA7IAogICAgdWludDI1NiBtdWx0aXBsaWVyID0gMTAwMDAwMDAwMDA7IAogICAgdWludDggZGVjaW1hbFVuaXRzID0gODsgIAoKICAgCS8vSW5pdGlhbGl6ZXMgdGhlIHRva2VuCglmdW5jdGlvbiBTdGFrZVBvb2xJQ08oKSAKICAgIAlTdGFrZVBvb2wodG9rZW5OYW1lLCB0b2tlblN5bWJvbCwgZGVjaW1hbFVuaXRzLCBtdWx0aXBsaWVyLCBpbml0aWFsVG9rZW5zKSB7CiAgICAgICAgICAgIGJhbGFuY2VbbXNnLnNlbmRlcl0gPSBpbml0aWFsVG9rZW5zOyAgICAgCiAgICAgICAgICAgIFRyYW5zZmVyKDAsIG1zZy5zZW5kZXIsIGluaXRpYWxUb2tlbnMpOyAgICAKICAgICAgICAgICAgbXVsdGlTaWdXYWxsZXQgPSBtc2cuc2VuZGVyOyAgICAgICAgCiAgICAgICAgICAgIGhhcmRjYXAgPSAyMDEwMDAwMDAwMDAwMDAwMDsgICAgCiAgICAgICAgICAgIHNldFByaWNlKDIwKTsgCiAgICAgICAgICAgIGRpdmlkZW5kUGF5bWVudCA9IDUwMDAwMDAwMDAwMDAwOyAKICAgICAgICAgICAgcmVjb3JkVG9rZW5Ib2xkZXJzLmxlbmd0aCA9IDI7IAogICAgICAgICAgICB0b2tlbkhvbGRlcnMubGVuZ3RoID0gMjsgCiAgICAgICAgICAgIHRva2VuSG9sZGVyc1sxXSA9IG1zZy5zZW5kZXI7IAogICAgICAgICAgICBudW1iZXJPZlRva2VuSG9sZGVycysrOyAKICAgIH0KCiAgICAvL0ZhbGxiYWNrIGZ1bmN0aW9uIGNyZWF0ZXMgdG9rZW5zIGFuZCBzZW5kcyB0byBpbnZlc3RvciB3aGVuIGNyb3dkc2FsZSBpcyBvcGVuCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKCghY3Jvd2RzYWxlQ2xvc2VkKSAKICAgICAgICAgICAgJiYgKG5vdyA8IHN0b3BUaW1lKSAKICAgICAgICAgICAgJiYgKHRvdGFsU3VwcGx5LmFkZChtc2cudmFsdWUubXVsKGdldFByaWNlKCkpLm11bChtdWx0aXBsaWVyKS5kaXYoMSBldGhlcikpIDw9IGhhcmRjYXApKTsgCiAgICAgICAgYWRkcmVzcyByZWNpcGllbnQgPSBtc2cuc2VuZGVyOyAKICAgICAgICBhbW91bnRSYWlzZWQgPSBhbW91bnRSYWlzZWQuYWRkKG1zZy52YWx1ZS5kaXYoMSBldGhlcikpOyAKICAgICAgICB1aW50MjU2IHRva2VucyA9IG1zZy52YWx1ZS5tdWwoZ2V0UHJpY2UoKSkubXVsKG11bHRpcGxpZXIpLmRpdigxIGV0aGVyKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZCh0b2tlbnMpOwogICAgICAgIGJhbGFuY2VbcmVjaXBpZW50XSA9IGJhbGFuY2VbcmVjaXBpZW50XS5hZGQodG9rZW5zKTsKICAgICAgICByZXF1aXJlKG11bHRpU2lnV2FsbGV0LnNlbmQobXNnLnZhbHVlKSk7IAogICAgICAgIFRyYW5zZmVyKDAsIHJlY2lwaWVudCwgdG9rZW5zKTsKICAgICAgICBpZiAodG9rZW5Ib2xkZXJJRFtyZWNpcGllbnRdID09IDApIHsKICAgICAgICAgICAgYWRkVG9rZW5Ib2xkZXIocmVjaXBpZW50KTsgCiAgICAgICAgfQogICAgfSAgIAoKICAgIC8vQWRkcyBhbiBhZGRyZXNzIHRvIHRoZSByZWNvcnJkRW50cnkgbGlzdAogICAgZnVuY3Rpb24gYWRkUmVjb3JkRW50cnkoYWRkcmVzcyBhY2NvdW50KSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKHJlY29yZFRva2VuSG9sZGVySURbYWNjb3VudF0gPT0gMCkgewogICAgICAgICAgICByZWNvcmRUb2tlbkhvbGRlcklEW2FjY291bnRdID0gcmVjb3JkVG9rZW5Ib2xkZXJzLmxlbmd0aDsgCiAgICAgICAgICAgIHJlY29yZFRva2VuSG9sZGVycy5sZW5ndGgrKzsgCiAgICAgICAgICAgIHJlY29yZFRva2VuSG9sZGVyc1tyZWNvcmRUb2tlbkhvbGRlcnMubGVuZ3RoLnN1YigxKV0gPSBhY2NvdW50OyAKICAgICAgICAgICAgbnVtYmVyT2ZSZWNvcmRFbnRyaWVzKys7CiAgICAgICAgfQogICAgfQoKICAgIC8vQWRkcyBhbiBhZGRyZXNzIHRvIHRoZSB0b2tlbkhvbGRlcnMgbGlzdCAKICAgIGZ1bmN0aW9uIGFkZFRva2VuSG9sZGVyKGFkZHJlc3MgYWNjb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYm9vbCBzdGF0dXMgPSBmYWxzZTsgCiAgICAgICAgaWYgKGJhbGFuY2VbYWNjb3VudF0gIT0gMCkgewogICAgICAgICAgICB0b2tlbkhvbGRlcklEW2FjY291bnRdID0gdG9rZW5Ib2xkZXJzLmxlbmd0aDsKICAgICAgICAgICAgdG9rZW5Ib2xkZXJzLmxlbmd0aCsrOwogICAgICAgICAgICB0b2tlbkhvbGRlcnNbdG9rZW5Ib2xkZXJzLmxlbmd0aC5zdWIoMSldID0gYWNjb3VudDsgCiAgICAgICAgICAgIG51bWJlck9mVG9rZW5Ib2xkZXJzKys7CiAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7IAogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RhdHVzOyAKICAgIH0gIAoKICAgIC8vQWxsb3dzIHRoZSBvd25lciB0byBjcmVhdGUgYW4gcmVjb3JkIG9mIHRva2VuIG93bmVycyBhbmQgdGhlaXIgYmFsYW5jZXMKICAgIGZ1bmN0aW9uIGNyZWF0ZVJlY29yZCgpIGludGVybmFsIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCAodG9rZW5Ib2xkZXJzLmxlbmd0aC5zdWIoMSkpOyBpKysgKSB7CiAgICAgICAgICAgIGFkZHJlc3MgaG9sZGVyID0gZ2V0VG9rZW5Ib2xkZXIoaSk7CiAgICAgICAgICAgIHVpbnQyNTYgaG9sZGVyQmFsID0gYmFsYW5jZU9mKGhvbGRlcik7IAogICAgICAgICAgICBhZGRSZWNvcmRFbnRyeShob2xkZXIpOyAKICAgICAgICAgICAgcmVjb3JkQmFsYW5jZVtob2xkZXJdID0gaG9sZGVyQmFsOyAKICAgICAgICB9CiAgICB9CgogICAgLy9SZXR1cm5zIHRoZSBjdXJyZW50IHByaWNlIG9mIHRoZSB0b2tlbiBmb3IgdGhlIGNyb3dkc2FsZQogICAgZnVuY3Rpb24gZ2V0UHJpY2UoKSByZXR1cm5zICh1aW50MjU2IHJlc3VsdCkgewogICAgICAgIHJldHVybiBwcmljZTsKICAgIH0KCiAgICAvL1JldHVybnMgcmVjb3JkIGNvbnRlbnRzCiAgICBmdW5jdGlvbiBnZXRSZWNvcmRCYWxhbmNlKGFkZHJlc3MgcmVjb3JkKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHJlY29yZEJhbGFuY2VbcmVjb3JkXTsgCiAgICB9CgogICAgLy9SZXR1cm5zIHRoZSBhZGRyZXNzIG9mIGEgc3BlY2lmaWMgaW5kZXggdmFsdWUKICAgIGZ1bmN0aW9uIGdldFJlY29yZEhvbGRlcih1aW50MjU2IGluZGV4KSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIGFkZHJlc3MocmVjb3JkVG9rZW5Ib2xkZXJzW2luZGV4LmFkZCgxKV0pOyAKICAgIH0KCiAgICAvL1JldHVybnMgdGltZSByZW1haW5pbmcgb24gY3Jvd2RzYWxlCiAgICBmdW5jdGlvbiBnZXRSZW1haW5pbmdUaW1lKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBzdG9wVGltZTsgCiAgICB9CgogICAgLy9SZXR1cm5zIHRoZSBhZGRyZXNzIG9mIGEgc3BlY2lmaWMgaW5kZXggdmFsdWUKCWZ1bmN0aW9uIGdldFRva2VuSG9sZGVyKHVpbnQyNTYgaW5kZXgpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsKCQlyZXR1cm4gYWRkcmVzcyh0b2tlbkhvbGRlcnNbaW5kZXguYWRkKDEpXSk7Cgl9CgogICAgLy9QYXlzIG91dCBkaXZpZGVuZHMgdG8gdG9rZW5zIGhvbGRlcnMgb2YgcmVjb3JkLCBiYXNlZCBvbiA1MDAsMDAwIHRva2VuIHBheW1lbnQKICAgIGZ1bmN0aW9uIHBheU91dERpdmlkZW5kKCkgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgeyAKICAgICAgICBjcmVhdGVSZWNvcmQoKTsgCiAgICAgICAgdWludDI1NiB2b2x1bWUgPSB0b3RhbFN1cHBseTsgCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgKHRva2VuSG9sZGVycy5sZW5ndGguc3ViKDEpKTsgaSsrKSB7CiAgICAgICAgICAgIGFkZHJlc3MgcGF5ZWUgPSBnZXRUb2tlbkhvbGRlcihpKTsgCiAgICAgICAgICAgIHVpbnQyNTYgc3Rha2UgPSB2b2x1bWUuZGl2KGRpdmlkZW5kUGF5bWVudC5kaXYobXVsdGlwbGllcikpOyAgICAKICAgICAgICAgICAgdWludDI1NiBkaXZpZGVuZFBheW91dCA9IGJhbGFuY2VPZihwYXllZSkuZGl2KHN0YWtlKS5tdWwobXVsdGlwbGllcik7IAogICAgICAgICAgICBiYWxhbmNlW3BheWVlXSA9IGJhbGFuY2VbcGF5ZWVdLmFkZChkaXZpZGVuZFBheW91dCk7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKGRpdmlkZW5kUGF5b3V0KTsgCiAgICAgICAgICAgIFRyYW5zZmVyKDAsIHBheWVlLCBkaXZpZGVuZFBheW91dCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOyAKICAgIH0KCiAgICAvL1NldHMgdGhlIG11bHRpc2lnIHdhbGxldCBmb3IgYSBjcm93ZHNhbGUKICAgIGZ1bmN0aW9uIHNldE11bHRpU2lnV2FsbGV0KGFkZHJlc3Mgd2FsbGV0KSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgbXVsdGlTaWdXYWxsZXQgPSB3YWxsZXQ7IAogICAgICAgIHJldHVybiB0cnVlOyAKICAgIH0KCiAgICAvL1NldHMgdGhlIHRva2VuIHByaWNlIAogICAgZnVuY3Rpb24gc2V0UHJpY2UodWludDI1NiBuZXdQcmljZXBlckV0aGVyKSBvbmx5T3duZXIgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJlcXVpcmUobmV3UHJpY2VwZXJFdGhlciA+IDApOyAKICAgICAgICBwcmljZSA9IG5ld1ByaWNlcGVyRXRoZXI7IAogICAgICAgIHJldHVybiBwcmljZTsgCiAgICB9CgogICAgLy9BbGxvd3Mgb3duZXIgdG8gc3RhcnQgdGhlIGNyb3dkc2FsZSBmcm9tIHRoZSB0aW1lIG9mIGV4ZWN1dGlvbiB1bnRpbCBhIHNwZWNpZmllZCBzdG9wVGltZQogICAgZnVuY3Rpb24gc3RhcnRTYWxlKHVpbnQyNTYgc2FsZVN0YXJ0LCB1aW50MjU2IHNhbGVTdG9wKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShzYWxlU3RvcCA+IG5vdyk7ICAgICAKICAgICAgICBzdGFydFRpbWUgPSBzYWxlU3RhcnQ7IAogICAgICAgIHN0b3BUaW1lID0gc2FsZVN0b3A7IAogICAgICAgIGNyb3dkc2FsZUNsb3NlZCA9IGZhbHNlOyAKICAgICAgICByZXR1cm4gdHJ1ZTsgCiAgICB9CgogICAgLy9BbGxvd3Mgb3duZXIgdG8gc3RvcCB0aGUgY3Jvd2RzYWxlIGltbWVkaWF0ZWx5CiAgICBmdW5jdGlvbiBzdG9wU2FsZSgpIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBzdG9wVGltZSA9IG5vdzsgCiAgICAgICAgY3Jvd2RzYWxlQ2xvc2VkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsgCiAgICB9Cgp9'.
	

]
