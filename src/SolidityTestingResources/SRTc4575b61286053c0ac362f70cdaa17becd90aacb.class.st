Class {
	#name : #SRTc4575b61286053c0ac362f70cdaa17becd90aacb,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc4575b61286053c0ac362f70cdaa17becd90aacb >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoIGZvciBwZXJmb3JtaW5nIHZhbGlkIG1hdGhlbWF0aWNzLgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gTXVsICh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIERpdiAodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy9hc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gU3ViICh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIEFkZCAodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIENvbnRyYWN0ICJPd25hYmxlIgogKiBQdXJwb3NlOiBEZWZpbmVzIE93bmVyIGZvciBjb250cmFjdAogKiBTdGF0dXMgOiBDb21wbGV0ZQogKiAKICovCmNvbnRyYWN0IE93bmFibGUgewoKCS8vb3duZXIgdmFyaWFibGUgdG8gc3RvcmUgY29udHJhY3Qgb3duZXIgYWNjb3VudAogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAvL0NvbnN0cnVjdG9yIGZvciB0aGUgY29udHJhY3QgdG8gc3RvcmUgb3duZXIncyBhY2NvdW50IG9uIGRlcGxveWVtZW50CiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvL21vZGlmaWVyIHRvIGNoZWNrIHRyYW5zYWN0aW9uIGluaXRpYXRvciBpcyBvbmx5IG93bmVyCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKfQoKLy8gRVJDMjAgSW50ZXJmYWNlCmNvbnRyYWN0IEVSQzIwIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBHSVpBIHRvIGltcGxlbWVudCB0b2tlbgogKi8KY29udHJhY3QgR0laQVRva2VuIGlzIEVSQzIwLCBPd25hYmxlIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIC8vVGhlIG5hbWUgb2YgdGhlICB0b2tlbgogICAgYnl0ZXMzMiBwdWJsaWMgbmFtZTsKICAgIC8vVGhlIHRva2VuIHN5bWJvbAogICAgYnl0ZXMzMiBwdWJsaWMgc3ltYm9sOwogICAgLy9UaGUgcHJlY2lzaW9uIHVzZWQgaW4gdGhlIGNhbGN1bGF0aW9ucyBpbiBjb250cmFjdAogICAgdWludDggcHVibGljIGRlY2ltYWxzOyAgIAogICAgLy9UbyBkZW5vdGUgdGhlIGxvY2tpbmcgb24gdHJhbnNmZXIgb2YgdG9rZW5zIGFtb25nIHRva2VuIGhvbGRlcnMKICAgIGJvb2wgcHVibGljIGxvY2tlZDsKCS8vIEZvdW5kZXIgYWRkcmVzcy4gTmVlZCB0byBmcm96ZSBmb3IgOCBtb3RocwoJYWRkcmVzcyBwdWJsaWMgZm91bmRlcjsKCS8vIFRlYW0gYWRkcmVzcy4gTmVlZCB0byBmcm96ZSBmb3IgOCBtb3RocwoJYWRkcmVzcyBwdWJsaWMgdGVhbTsKCS8vIFN0YXJ0IG9mIFByZS1JQ08gZGF0ZQoJdWludDI1NiBwdWJsaWMgc3RhcnQ7CgkKICAgIC8vTWFwcGluZyB0byByZWxhdGUgbnVtYmVyIG9mICB0b2tlbiB0byB0aGUgYWNjb3VudAogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYgKSBiYWxhbmNlczsKICAgIC8vTWFwcGluZyB0byByZWxhdGUgb3duZXIgYW5kIHNwZW5kZXIgdG8gdGhlIHRva2VucyBhbGxvd2VkIHRvIHRyYW5zZmVyIGZyb20gb3duZXIKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgYnVybmVyLCB1aW50IGluZGV4ZWQgdmFsdWUpOyAgCgogICAgLyoqCiAgICAqIEBkZXYgQ29uc3RydWN0b3Igb2YgR0laQQogICAgKi8KICAgIGZ1bmN0aW9uIEdJWkFUb2tlbihhZGRyZXNzIF9mb3VuZGVyLCBhZGRyZXNzIF90ZWFtKSBwdWJsaWMgewoJCXJlcXVpcmUoIF9mb3VuZGVyICE9IGFkZHJlc3MoMCkgJiYgX3RlYW0gIT0gYWRkcmVzcygwKSApOwogICAgICAgIC8qIFB1YmxpYyB2YXJpYWJsZXMgb2YgdGhlIHRva2VuICovCiAgICAgICAgLy9UaGUgbmFtZSBvZiB0aGUgIHRva2VuCiAgICAgICAgbmFtZSA9ICJHSVpBIFRva2VuIjsKICAgICAgICAvL1RoZSB0b2tlbiBzeW1ib2wKICAgICAgICBzeW1ib2wgPSAiR0laQSI7CiAgICAgICAgLy9OdW1iZXIgb2YgemVyb2VzIHRvIGJlIHRyZWF0ZWQgYXMgZGVjaW1hbHMKICAgICAgICBkZWNpbWFscyA9IDE4OyAgICAgICAKICAgICAgICAvL2luaXRpYWwgdG9rZW4gc3VwcGx5IDAKICAgICAgICB0b3RhbFN1cHBseSA9IDM2OGUyMzsgLy8gMzYgODAwIDAwMCB0b2tlbnMgdG90YWwKICAgICAgICAvL1RyYW5zZmVyIG9mIHRva2VucyBpcyBsb2NrZWQgKG5vdCBhbGxvd2VkKSB3aGVuIGNvbnRyYWN0IGlzIGRlcGxveWVkCiAgICAgICAgbG9ja2VkID0gdHJ1ZTsKCQkvLyBTYXZlIGZvdW5kZXIgYW5kIHRlYW0gYWRkcmVzcwoJCWZvdW5kZXIgPSBfZm91bmRlcjsKCQl0ZWFtID0gX3RlYW07CgkJYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSB0b3RhbFN1cHBseTsKCQlzdGFydCA9IDA7CiAgICB9CiAgICAgIAoJZnVuY3Rpb24gc3RhcnROb3coKSBleHRlcm5hbCBvbmx5T3duZXIgewoJCXN0YXJ0ID0gbm93OwoJfQoJICAKICAgIC8vVG8gaGFuZGxlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludDI1NiBzaXplKSB7CiAgICAgICByZXF1aXJlKG1zZy5kYXRhLmxlbmd0aCA+PSBzaXplICsgNCk7CiAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlVbmxvY2tlZCgpIHsgCiAgICAgIHJlcXVpcmUgKCFsb2NrZWQpOyAKICAgICAgXzsgCiAgICB9CgkKICAgIG1vZGlmaWVyIGlmTm90RnJvemUoKSB7IAoJCWlmICggCgkJICAobXNnLnNlbmRlciA9PSBmb3VuZGVyIHx8IG1zZy5zZW5kZXIgPT0gdGVhbSkgJiYgCgkJICAoc3RhcnQgPT0gMCB8fCBub3cgPCAoc3RhcnQgKyA4MCBkYXlzKSApICkgcmV2ZXJ0KCk7CgkJXzsKICAgIH0KICAgIAogICAgLy9UbyBlbmFibGUgdHJhbnNmZXIgb2YgdG9rZW5zCiAgICBmdW5jdGlvbiB1bmxvY2tUcmFuc2ZlcigpIGV4dGVybmFsIG9ubHlPd25lcnsKICAgICAgbG9ja2VkID0gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgQ2hlY2sgYmFsYW5jZSBvZiBnaXZlbiBhY2NvdW50IGFkZHJlc3MKICAgICoKICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBhY2NvdW50IHdob3NlIGJhbGFuY2UgeW91IHdhbnQgdG8ga25vdwogICAgKiBAcmV0dXJuIGJhbGFuY2Ugb2YgdGhlIGFjY291bnQKICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3ZhbHVlKXsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgdG8gYW4gYWRkcmVzcyBnaXZlbiBieSBzZW5kZXIKICAgICoKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAgKiBAcGFyYW0gX3ZhbHVlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICAqIEByZXR1cm4gQSBib29sIGlmIHRoZSB0cmFuc2ZlciB3YXMgYSBzdWNjZXNzIG9yIG5vdAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgb25seVVubG9ja2VkIGlmTm90RnJvemUgcHVibGljIHJldHVybnMoYm9vbCBfc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoIF90byAhPSBhZGRyZXNzKDApICk7CiAgICAgICAgaWYoKGJhbGFuY2VzW21zZy5zZW5kZXJdID4gX3ZhbHVlKSAmJiBfdmFsdWUgPiAwKXsKCQkJYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5TdWIoX3ZhbHVlKTsKCQkJYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uQWRkKF92YWx1ZSk7CgkJCVRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKCQkJcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGVsc2V7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlciwgZm9yIEVSQzIwLgogICAgKgogICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICogQHJldHVybiBBIGJvb2wgaWYgdGhlIHRyYW5zZmVyIHdhcyBhIHN1Y2Nlc3Mgb3Igbm90CiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgb25seVVubG9ja2VkIGlmTm90RnJvemUgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyl7CiAgICAgICAgcmVxdWlyZSggX3RvICE9IGFkZHJlc3MoMCkgJiYgKF9mcm9tICE9IGFkZHJlc3MoMCkpKTsKICAgICAgICBpZigoX3ZhbHVlID4gMCkKICAgICAgICAgICAmJiAoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPiBfdmFsdWUgKSl7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5TdWIoX3ZhbHVlKTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uQWRkKF92YWx1ZSk7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uU3ViKF92YWx1ZSk7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgaGFzIGFsbG93ZWQgYSBzcGVuZGVyIHRvIHJlY2lldmUgZnJvbSBvd25lci4KICAgICoKICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyIHRvIHNwZW5kLgogICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAgKgogICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpewogICAgICAgIGlmKCAoX3ZhbHVlID4gMCkgJiYgKF9zcGVuZGVyICE9IGFkZHJlc3MoMCkpICYmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUpKXsKICAgICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZWxzZXsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy8gT25seSBvd25lciBjYW4gYnVybiBvd24gdG9rZW5zCiAgICBmdW5jdGlvbiBidXJuKHVpbnQgX3ZhbHVlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIGFkZHJlc3MgYnVybmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tidXJuZXJdID0gYmFsYW5jZXNbYnVybmVyXS5TdWIoX3ZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LlN1YihfdmFsdWUpOwogICAgICAgIEJ1cm4oYnVybmVyLCBfdmFsdWUpOwogICAgfQoKfQoKY29udHJhY3QgQ3Jvd2RzYWxlIGlzIE93bmFibGUgewogICAgCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIEdJWkFUb2tlbiB0b2tlbjsKICAgIGFkZHJlc3MgcHVibGljIHRva2VuX2FkZHJlc3M7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgZm91bmRlcjsKICAgIGFkZHJlc3MgdGVhbTsKICAgIGFkZHJlc3MgbXVsdGlzaWc7CiAgICBib29sIHN0YXJ0ZWQgPSBmYWxzZTsKICAgIC8vcHJpY2Ugb2YgdG9rZW4gYWdhaW5zdCAxIGV0aGVyCiAgICB1aW50MjU2IHB1YmxpYyBkb2xsYXJzRm9yRXRoZXI7CiAgICAvL05vIG9mIGRheXMgZm9yIHdoaWNoIHByZSBpY28gd2lsbCBiZSBvcGVuCiAgICB1aW50MjU2IGNvbnN0YW50IERVUkFUSU9OX1BSRV9JQ08gPSAzMDsKICAgIHVpbnQyNTYgc3RhcnRCbG9jayA9IDA7IC8vIFN0YXJ0IHRpbWVzdGFtcAogICAgdWludDI1NiB0b2tlbnNCb3VnaHQgPSAwOyAvLyBBbW91bnQgb2YgYm91Z2h0IHRva2VucwogICAgdWludDI1NiB0b3RhbFJhaXNlZEV0aCA9IDA7IC8vIFRvdGFsIHJhaXNlZCBFVEgKCiAgICB1aW50MjU2IGNvbnN0YW50IE1BWF9UT0tFTlNfRklSU1RfN19EQVlTX1BSRV9JQ08gID0gMTEwMDAwMDAgKiAxIGV0aGVyOyAvLyAxMCAwMDAgMDAwICsgMTAlCgl1aW50MjU2IGNvbnN0YW50IE1BWF9UT0tFTlNfUFJFX0lDTyAgICAJCQkJICAgID0gMTQ4NTAwMDAgKiAxIGV0aGVyOyAvLyBtYXggMTQgODUwIDAwMCB0b2tlbnMKICAgIHVpbnQyNTYgY29uc3RhbnQgTUFYX1RPS0VOU19GSVJTVF81X0RBWVNfSUNPICAgICAgICA9IDM4NTAwMDAgKiAxIGV0aGVyOyAgIC8vIDMgNTAwIDAwMCArIDEwJQogICAgdWludDI1NiBjb25zdGFudCBNQVhfVE9LRU5TX0ZJUlNUXzEwX0RBWVNfSUNPICAgICAgCT0gMTA3MjUwMDAgKiAxIGV0aGVyOyAvLyA5IDc1MCAwMDAgKyAxMCUKICAgIHVpbnQyNTYgY29uc3RhbnQgTUFYX0JPVU5UWSAgICAgIAkgICAgICAgICAgICAgICAgCQkJPSAxMzkwMDAwICogMSBldGhlcjsKICAgIHVpbnQyNTYgYm91bnR5U2VudCA9IDA7CiAgICBlbnVtIENyb3dkc2FsZVR5cGUgeyBQcmVJQ08sIElDTyB9CiAgICBDcm93ZHNhbGVUeXBlIGV0eXBlID0gQ3Jvd2RzYWxlVHlwZS5QcmVJQ087CiAgICAKICAgIAogICAgZnVuY3Rpb24gQ3Jvd2RzYWxlKGFkZHJlc3MgX2ZvdW5kZXIsIGFkZHJlc3MgX3RlYW0sIGFkZHJlc3MgX211bHRpc2lnKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX2ZvdW5kZXIgIT0gYWRkcmVzcygwKSAmJiBfdGVhbSAhPSBhZGRyZXNzKDApICYmIF9tdWx0aXNpZyAhPSBhZGRyZXNzKDApKTsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgdGVhbSA9IF90ZWFtOwogICAgICAgIG11bHRpc2lnID0gX211bHRpc2lnOwogICAgICAgIGZvdW5kZXIgPSBfZm91bmRlcjsKICAgICAgICB0b2tlbiA9IG5ldyBHSVpBVG9rZW4oX2ZvdW5kZXIsIF90ZWFtKTsKICAgICAgICB0b2tlbl9hZGRyZXNzID0gYWRkcmVzcyh0b2tlbik7CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIGlzU3RhcnRlZCgpIHsKICAgICAgICByZXF1aXJlIChzdGFydGVkID09IHRydWUpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIC8vIFNldCBjdXJyZW50IHByaWNlIG9mIG9uZSBFdGhlciBpbiBkb2xsYXJzCiAgICBmdW5jdGlvbiBzZXREb2xsYXJGb3JPbmVFdGhlclJhdGUodWludDI1NiBfZG9sbGFycykgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgZG9sbGFyc0ZvckV0aGVyID0gX2RvbGxhcnM7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNlbmRCb3VudHkoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIG9ubHlPd25lciByZXR1cm5zKGJvb2wpewogICAgICAgIHJlcXVpcmUoX2Ftb3VudCAhPSAwICYmIF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICB0b2tlbi51bmxvY2tUcmFuc2ZlcigpOwogICAgICAgIHVpbnQyNTYgdG90YWxUb1NlbmQgPSBfYW1vdW50Lk11bCgxIGV0aGVyKTsKICAgICAgICByZXF1aXJlKGJvdW50eVNlbnQuQWRkKHRvdGFsVG9TZW5kKSA8IE1BWF9CT1VOVFkpOwogICAgICAgIGlmICggdHJhbnNmZXJUb2tlbnMoX3RvLCB0b3RhbFRvU2VuZCkgKXsKICAgICAgICAgICAgICAgIGJvdW50eVNlbnQgPSBib3VudHlTZW50LkFkZCh0b3RhbFRvU2VuZCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9ZWxzZQogICAgICAgICAgICByZXR1cm4gZmFsc2U7ICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2VuZFRva2VucyhhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHJldHVybnMoYm9vbCl7CiAgICAgICAgcmVxdWlyZShfYW1vdW50ICE9IDAgJiYgX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHRva2VuLnVubG9ja1RyYW5zZmVyKCk7CiAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9rZW5zKF90bywgX2Ftb3VudC5NdWwoMSBldGhlcikpOwogICAgfSAKICAKICAgIC8vVG8gc3RhcnQgUHJlIElDTwogICAgZnVuY3Rpb24gc3RhcnRQcmVJQ08odWludDI1NiBfZG9sbGFyRm9yT25lRXRoZXJSYXRlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKHN0YXJ0QmxvY2sgPT0gMCAmJiBfZG9sbGFyRm9yT25lRXRoZXJSYXRlID4gMCk7CiAgICAgICAgLy9TZXQgYmxvY2sgbnVtYmVyIHRvIGN1cnJlbnQgYmxvY2sgbnVtYmVyCiAgICAgICAgc3RhcnRCbG9jayA9IG5vdzsKICAgICAgICAvL3RvIHNob3cgcHJlIEljbyBpcyBydW5uaW5nCiAgICAgICAgZXR5cGUgPSBDcm93ZHNhbGVUeXBlLlByZUlDTzsKICAgICAgICBzdGFydGVkID0gdHJ1ZTsKICAgICAgICBkb2xsYXJzRm9yRXRoZXIgPSBfZG9sbGFyRm9yT25lRXRoZXJSYXRlOwogICAgICAgIHRva2VuLnN0YXJ0Tm93KCk7CiAgICAgICAgdG9rZW4udW5sb2NrVHJhbnNmZXIoKTsKICAgIH0KCQoJLy8gRmluaXNoIHByZSBJQ08uCglmdW5jdGlvbiBlbmRQcmVJQ08oKSBwdWJsaWMgb25seU93bmVyIHsKCQlzdGFydGVkID0gZmFsc2U7Cgl9CiAgCiAgICAvL3RvIHN0YXJ0IElDTwogICAgZnVuY3Rpb24gc3RhcnRJQ08odWludDI1NiBfZG9sbGFyRm9yT25lRXRoZXJSYXRlKSBwdWJsaWMgb25seU93bmVyewogICAgICAgIC8vaWNvIGNhbiBiZSBzdGFydGVkIG9ubHkgYWZ0ZXIgdGhlIGVuZCBvZiBwcmUgaWNvCiAgICAgICAgcmVxdWlyZSggc3RhcnRCbG9jayAhPSAwICYmIG5vdyA+IHN0YXJ0QmxvY2suQWRkKERVUkFUSU9OX1BSRV9JQ08pICk7CiAgICAgICAgc3RhcnRCbG9jayA9IG5vdzsKICAgICAgICAvL3RvIHNob3cgaUNPIElTIHJ1bm5pbmcKICAgICAgICBldHlwZSA9IENyb3dkc2FsZVR5cGUuSUNPOwogICAgICAgIHN0YXJ0ZWQgPSB0cnVlOwogICAgICAgIGRvbGxhcnNGb3JFdGhlciA9IF9kb2xsYXJGb3JPbmVFdGhlclJhdGU7CiAgICB9CiAgICAKICAgIC8vIEdldCBjdXJyZW50IHByaWNlIG9mIHRva2VuIG9uIGN1cnJlbnQgdGltZSBpbnRlcnZhbAogICAgZnVuY3Rpb24gZ2V0Q3VycmVudFRva2VuUHJpY2VJbkNlbnRzKCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2KXsKICAgICAgICByZXF1aXJlKHN0YXJ0QmxvY2sgIT0gMCk7CiAgICAgICAgdWludDI1NiBfZGF5ID0gKG5vdyAtIHN0YXJ0QmxvY2spLkRpdigxIGRheXMpOwogICAgICAgIC8vIFByZS1JQ08KICAgICAgICBpZiAoZXR5cGUgPT0gQ3Jvd2RzYWxlVHlwZS5QcmVJQ08pewogICAgICAgICAgICByZXF1aXJlKF9kYXkgPD0gRFVSQVRJT05fUFJFX0lDTyAmJiB0b2tlbnNCb3VnaHQgPCBNQVhfVE9LRU5TX1BSRV9JQ08pOwogICAgICAgICAgICBpZiAoX2RheSA+PSAwICYmIF9kYXkgPD0gNyAmJiB0b2tlbnNCb3VnaHQgPCBNQVhfVE9LRU5TX0ZJUlNUXzdfREFZU19QUkVfSUNPKQogICAgICAgICAgICAgICAgcmV0dXJuIDIwOyAvLyAkMC4yCgkJCWVsc2UKICAgICAgICAgICAgICAgIHJldHVybiAzMDsgLy8gJDAuMwogICAgICAgIC8vIElDTwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChfZGF5ID49IDAgJiYgX2RheSA8PSA1ICYmIHRva2Vuc0JvdWdodCA8IE1BWF9UT0tFTlNfRklSU1RfNV9EQVlTX0lDTykKICAgICAgICAgICAgICAgIHJldHVybiA2MDsgLy8gJDAuNiAKICAgICAgICAgICAgZWxzZSBpZiAoX2RheSA+IDUgJiYgX2RheSA8PSAxMCAmJiB0b2tlbnNCb3VnaHQgPCBNQVhfVE9LRU5TX0ZJUlNUXzEwX0RBWVNfSUNPKQogICAgICAgICAgICAgICAgcmV0dXJuIDgwOyAvLyAkMC44IAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICByZXR1cm4gMTAwOyAvLyAkMSAKICAgICAgICB9ICAgICAgICAKICAgIH0KICAgIAogICAgLy8gQ2FsY3VsYXRlIHRva2VucyB0byBzZW5kCiAgICBmdW5jdGlvbiBjYWxjVG9rZW5zVG9TZW5kKHVpbnQyNTYgX3ZhbHVlKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpewogICAgICAgIHJlcXVpcmUgKF92YWx1ZSA+IDApOwogICAgICAgIAogICAgICAgIC8vIEN1cnJlbnQgdG9rZW4gcHJpY2UgaW4gY2VudHMKICAgICAgICB1aW50MjU2IGN1cnJlbnRUb2tlblByaWNlID0gZ2V0Q3VycmVudFRva2VuUHJpY2VJbkNlbnRzKCk7CiAgICAgICAgCiAgICAgICAgLy8gQ2FsY3VsYXRlIHZhbHVlIGluIGRvbGxhcnMqMTAwCiAgICAgICAgLy8gX3ZhbHVlIGluIGRvbGxhcnMgKiAxMDAgCiAgICAgICAgLy8gRXhhbXBsZTogZm9yICQ1NC4zOCB2YWx1ZUluRG9sbGFycyA9IDU0MzggICAgICAgIAogICAgICAgIHVpbnQyNTYgdmFsdWVJbkRvbGxhcnMgPSBfdmFsdWUuTXVsKGRvbGxhcnNGb3JFdGhlcikuRGl2KDEwKioxNik7CiAgICAgICAgdWludDI1NiB0b2tlbnNUb1NlbmQgPSB2YWx1ZUluRG9sbGFycy5EaXYoY3VycmVudFRva2VuUHJpY2UpOwogICAgICAgIAogICAgICAgIC8vIENhbGN1bGF0ZSBib251cyBieSBwdXJzaGFzZQogICAgICAgIHVpbnQ4IGJvbnVzUGVyY2VudCA9IDA7CiAgICAgICAgX3ZhbHVlID0gX3ZhbHVlLkRpdigxIGV0aGVyKS5NdWwoZG9sbGFyc0ZvckV0aGVyKTsKICAgICAgICBpZiAoIF92YWx1ZSA+PSAzNTAwMCApewogICAgICAgICAgICBib251c1BlcmNlbnQgPSAxMDsKICAgICAgICB9ZWxzZSBpZiAoIF92YWx1ZSA+PSAyMDAwMCApewogICAgICAgICAgICBib251c1BlcmNlbnQgPSA3OwogICAgICAgIH1lbHNlIGlmICggX3ZhbHVlID49IDEwMDAwICl7CiAgICAgICAgICAgIGJvbnVzUGVyY2VudCA9IDU7CiAgICAgICAgfQogICAgICAgIC8vIEFkZCBib251cyB0b2tlbnMKICAgICAgICBpZiAoYm9udXNQZXJjZW50ID4gMCkgdG9rZW5zVG9TZW5kID0gdG9rZW5zVG9TZW5kLkFkZCh0b2tlbnNUb1NlbmQuRGl2KDEwMCkuTXVsKGJvbnVzUGVyY2VudCkpOwogICAgICAgIAogICAgICAgIHJldHVybiB0b2tlbnNUb1NlbmQ7CiAgICB9ICAgIAoKICAgIC8vIFRyYW5zZmVyIGZ1bmRzIHRvIG93bmVyCiAgICBmdW5jdGlvbiBmb3J3YXJkRnVuZHModWludDI1NiBfdmFsdWUpIGludGVybmFsIHsKICAgICAgICBtdWx0aXNpZy50cmFuc2ZlcihfdmFsdWUpOwogICAgfQoKICAgIC8vIHRyYW5zZmVyIHRva2VucwogICAgZnVuY3Rpb24gdHJhbnNmZXJUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2Vuc1RvU2VuZCkgaW50ZXJuYWwgcmV0dXJucyhib29sKXsKICAgICAgICB1aW50MjU2IHRvdCA9IF90b2tlbnNUb1NlbmQuTXVsKDEyMjIpLkRpdig4Nzc4KTsgLy8gNS40MyArIDYuNzkgPSAxMi4yMiwgMTAwMDAgLSAxMjIyID0gODc3OCAKICAgICAgICB1aW50MjU2IHRva2Vuc0ZvclRlYW0gPSB0b3QuTXVsKDQ0NDMpLkRpdigxZTQpOy8vIDUuNDMlIGZvciBUZWFtICg0NCw0MyUgb2YgKDUuNDMgKyA2Ljc5KSApCiAgICAgICAgdWludDI1NiB0b2tlbnNGb3JGb3VuZGVyID0gdG90LlN1Yih0b2tlbnNGb3JUZWFtKTsvLyA2Ljc5JSBmb3IgRm91bmRlcnMKICAgICAgICB1aW50MjU2IHRvdGFsVG9TZW5kID0gX3Rva2Vuc1RvU2VuZC5BZGQodG9rZW5zRm9yRm91bmRlcikuQWRkKHRva2Vuc0ZvclRlYW0pOwogICAgICAgIGlmICh0b2tlbi5iYWxhbmNlT2YodGhpcykgPj0gdG90YWxUb1NlbmQgJiYgCiAgICAgICAgICAgIHRva2VuLnRyYW5zZmVyKF90bywgX3Rva2Vuc1RvU2VuZCkgPT0gdHJ1ZSl7CiAgICAgICAgICAgICAgICB0b2tlbi50cmFuc2Zlcihmb3VuZGVyLCB0b2tlbnNGb3JGb3VuZGVyKTsKICAgICAgICAgICAgICAgIHRva2VuLnRyYW5zZmVyKHRlYW0sIHRva2Vuc0ZvclRlYW0pOwogICAgICAgICAgICAgICAgdG9rZW5zQm91Z2h0ID0gdG9rZW5zQm91Z2h0LkFkZCh0b3RhbFRvU2VuZCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9ZWxzZQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBwdWJsaWMgaXNTdGFydGVkIHBheWFibGUgewogICAgICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkgJiYgIG1zZy52YWx1ZSAhPSAwICk7CiAgICAgICAgdWludDI1NiB0b2tlbnNUb1NlbmQgPSBjYWxjVG9rZW5zVG9TZW5kKG1zZy52YWx1ZSk7CiAgICAgICAgdG9rZW5zVG9TZW5kID0gdG9rZW5zVG9TZW5kLk11bCgxIGV0aGVyKTsKICAgICAgICAKICAgICAgICAvLyBQcmUtSUNPCiAgICAgICAgaWYgKGV0eXBlID09IENyb3dkc2FsZVR5cGUuUHJlSUNPKXsKICAgICAgICAgICAgcmVxdWlyZSh0b2tlbnNCb3VnaHQuQWRkKHRva2Vuc1RvU2VuZCkgPCBNQVhfVE9LRU5TX1BSRV9JQ08pOwogICAgICAgIH0gICAgICAKICAgICAgICAKICAgICAgICBpZiAoIXRyYW5zZmVyVG9rZW5zKF9iZW5lZmljaWFyeSwgdG9rZW5zVG9TZW5kKSkgcmV2ZXJ0KCk7CiAgICAgICAgdG90YWxSYWlzZWRFdGggPSB0b3RhbFJhaXNlZEV0aC5BZGQoIChtc2cudmFsdWUpLkRpdigxIGV0aGVyKSApOwogICAgICAgIGZvcndhcmRGdW5kcyhtc2cudmFsdWUpOwogICAgfQoKICAgIC8vIEZhbGxiYWNrIGZ1bmN0aW9uCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQogICAgCiAgICAvLyBCdXJuIHVuc29sZCB0b2tlbnMKICAgIGZ1bmN0aW9uIGJ1cm5Ub2tlbnMoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB0b2tlbi5idXJuKCB0b2tlbi5iYWxhbmNlT2YodGhpcykgKTsKICAgICAgICBzdGFydGVkID0gZmFsc2U7CiAgICB9CiAgICAKICAgIC8vIGRlc3Ryb3kgdGhpcyBjb250cmFjdAogICAgZnVuY3Rpb24ga2lsbCgpIHB1YmxpYyBvbmx5T3duZXJ7CiAgICAgICAgc2VsZmRlc3RydWN0KG11bHRpc2lnKTsgICAKICAgIH0KfQ=='.
	

]
