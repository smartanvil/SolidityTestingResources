Class {
	#name : #SRT10e886bacd4a12c21bb39646751374eae495b776,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT10e886bacd4a12c21bb39646751374eae495b776 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CmNvbnRyYWN0IG93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIGNlbnRyYWxBdXRob3JpdHk7CiAgICBhZGRyZXNzIHB1YmxpYyBwbHV0b2NyYXQ7CgogICAgZnVuY3Rpb24gb3duZWQoKSB7CiAgICAgICAgY2VudHJhbEF1dGhvcml0eSA9IG1zZy5zZW5kZXI7CglwbHV0b2NyYXQgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gY2VudHJhbEF1dGhvcml0eSkgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KCQogICAgbW9kaWZpZXIgb25seVBsdXRvY3JhdCB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gcGx1dG9jcmF0KSByZXZlcnQoKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVrYm9sT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlQbHV0b2NyYXQgewogICAgICAgIGNlbnRyYWxBdXRob3JpdHkgPSBuZXdPd25lcjsKICAgIH0KCQogICAgZnVuY3Rpb24gdHJhbnNmZWtib2xQbHV0b2NyYXQoYWRkcmVzcyBuZXdQbHV0b2NyYXQpIG9ubHlQbHV0b2NyYXQgewogICAgICAgIHBsdXRvY3JhdCA9IG5ld1BsdXRvY3JhdDsKICAgIH0KfQoKY29udHJhY3QgdG9rZW5SZWNpcGllbnQgeyBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKTsgfQoKY29udHJhY3QgdG9rZW4gewogICAgLyogUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gKi8KICAgIHN0cmluZyBwdWJsaWMgZGVjZW50cmFsaXplZEVjb25vbXkgPSAnUExVVE9DUkFDWSc7CiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8qIFRoaXMgY3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBiYWxhbmNlcyAqLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIC8qIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cyAqLwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEludGVyZXN0RnJlZUxlbmRpbmcoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgdWludDI1NiBkdXJhdGlvbl9pbl9kYXlzKTsKICAgIGV2ZW50IFNldHRsZW1lbnQoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgc3RyaW5nIG5vdGVzLCBzdHJpbmcgcmVmZXJlbmNlKTsKICAgIGV2ZW50IEF1dGhvcml0eU5vdGlmaWVkKHN0cmluZyBub3Rlcywgc3RyaW5nIHJlZmVyZW5jZSk7CiAgICBldmVudCBDbGllbnRzTm90aWZpZWQoc3RyaW5nIG5vdGVzLCBzdHJpbmcgcmVmZXJlbmNlKTsKICAgIGV2ZW50IExvYW5SZXBhaWQoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgc3RyaW5nIHJlZmVyZW5jZSk7CiAgICBldmVudCBUb2tlbkJ1cm50KGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEVjb25vbXlUYXhlZChzdHJpbmcgYmFzZV92YWx1ZSwgc3RyaW5nIHRhcmdldF92YWx1ZSwgc3RyaW5nIHRheF9yYXRlLCBzdHJpbmcgdGF4ZWRfdmFsdWUsIHN0cmluZyBub3Rlcyk7CiAgICBldmVudCBFY29ub215UmViYXRlZChzdHJpbmcgYmFzZV92YWx1ZSwgc3RyaW5nIHRhcmdldF92YWx1ZSwgc3RyaW5nIHJlYmF0ZV9yYXRlLCBzdHJpbmcgcmViYXRlZF92YWx1ZSwgc3RyaW5nIG5vdGVzKTsKICAgIGV2ZW50IFBsdXRvY3JhY3lBY2hpZXZlZChzdHJpbmcgdmFsdWUsIHN0cmluZyBub3Rlcyk7CgkKICAgIC8qIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdCAqLwogICAgZnVuY3Rpb24gdG9rZW4oCiAgICAgICAgdWludDI1NiBpbml0aWFsU3VwcGx5LAogICAgICAgIHN0cmluZyB0b2tlbk5hbWUsCiAgICAgICAgdWludDggZGVjaW1hbFVuaXRzLAogICAgICAgIHN0cmluZyB0b2tlblN5bWJvbAogICAgICAgICkgewogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IGluaXRpYWxTdXBwbHk7ICAgICAgICAgICAgICAvLyBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucwogICAgICAgIHRvdGFsU3VwcGx5ID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdG90YWwgc3VwcGx5CiAgICAgICAgbmFtZSA9IHRva2VuTmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgbmFtZSBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIHN5bWJvbCA9IHRva2VuU3ltYm9sOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIGRlY2ltYWxzID0gZGVjaW1hbFVuaXRzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbW91bnQgb2YgZGVjaW1hbHMgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgIH0KCiAgICAvKiBTZW5kIGNvaW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHsKICAgICAgICBpZiAoX3RvID09IDB4MCkgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgdHJhbnNmZXIgdG8gMHgwIGFkZHJlc3MuIFVzZSBidXJuKCkgaW5zdGVhZAogICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHJldmVydCgpOyAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHJldmVydCgpOyAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RpZnkgYW55b25lIGxpc3RlbmluZyB0aGF0IHRoaXMgdHJhbnNmZXIgdG9vayBwbGFjZQogICAgfQogIAogICAgLyogQWxsb3cgYW5vdGhlciBjb250cmFjdCB0byBzcGVuZCBzb21lIHRva2VucyBpbiB5b3VyIGJlaGFsZiAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsIChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKiBBcHByb3ZlIGFuZCB0aGVuIGNvbXVuaWNhdGUgdGhlIGFwcHJvdmVkIGNvbnRyYWN0IGluIGEgc2luZ2xlIHR4ICovCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSkKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsgICAgCiAgICAgICAgdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsKICAgICAgICBpZiAoYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgewogICAgICAgICAgICBzcGVuZGVyLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgLyogQSBjb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIGNvaW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoX3RvID09IDB4MCkgcmV2ZXJ0KCk7CiAgICAgICAgaWYgKGJhbGFuY2VPZltfZnJvbV0gPCBfdmFsdWUpIHJldmVydCgpOyAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHJldmVydCgpOyAgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIGlmIChfdmFsdWUgPiBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKSByZXZlcnQoKTsgICAgIC8vIENoZWNrIGFsbG93YW5jZQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKiBUaGlzIHVubmFtZWQgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW5ldmVyIHNvbWVvbmUgdHJpZXMgdG8gc2VuZCBldGhlciB0byBpdCAqLwogICAgZnVuY3Rpb24gKCkgewogICAgICAgIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnRzIGFjY2lkZW50YWwgc2VuZGluZyBvZiBldGhlcgogICAgfQp9Cgpjb250cmFjdCBLcm93biBpcyBvd25lZCwgdG9rZW4gewoKICAgIHN0cmluZyBwdWJsaWMgbm9taW5hbFZhbHVlOwogICAgc3RyaW5nIHB1YmxpYyB1cGRhdGU7CiAgICBzdHJpbmcgcHVibGljIHNpZ247CiAgICBzdHJpbmcgcHVibGljIHdlYnNpdGU7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIHVpbnQyNTYgcHVibGljIG5vdGlmaWNhdGlvbkZlZTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBmcm96ZW5BY2NvdW50OwoKICAgIC8qIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cyAqLwogICAgZXZlbnQgRnJvemVuRnVuZHMoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJvemVuKTsKCiAgICAvKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QgKi8KICAgIGZ1bmN0aW9uIEtyb3duKAogICAgICAgIHVpbnQyNTYgaW5pdGlhbFN1cHBseSwKICAgICAgICBzdHJpbmcgdG9rZW5OYW1lLAogICAgICAgIHVpbnQ4IGRlY2ltYWxVbml0cywKICAgICAgICBzdHJpbmcgdG9rZW5TeW1ib2wsCiAgICAgICAgYWRkcmVzcyBjZW50cmFsTWludGVyCiAgICApIHRva2VuIChpbml0aWFsU3VwcGx5LCB0b2tlbk5hbWUsIGRlY2ltYWxVbml0cywgdG9rZW5TeW1ib2wpIHsKICAgICAgICBpZihjZW50cmFsTWludGVyICE9IDAgKSBjZW50cmFsQXV0aG9yaXR5ID0gY2VudHJhbE1pbnRlcjsgICAgICAvLyBTZXRzIHRoZSBvd25lciBhcyBzcGVjaWZpZWQgKGlmIGNlbnRyYWxNaW50ZXIgaXMgbm90IHNwZWNpZmllZCB0aGUgb3duZXIgaXMgbXNnLnNlbmRlcikKICAgICAgICBiYWxhbmNlT2ZbY2VudHJhbEF1dGhvcml0eV0gPSBpbml0aWFsU3VwcGx5OyAgICAgICAgICAgICAgICAgICAvLyBHaXZlIHRoZSBvd25lciBhbGwgaW5pdGlhbCB0b2tlbnMKICAgIH0KCiAgICAvKiBTZW5kIGNvaW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHsKICAgICAgICBpZiAoX3RvID09IDB4MCkgcmV2ZXJ0KCk7CiAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA8IF92YWx1ZSkgcmV2ZXJ0KCk7ICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBpZiAoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZbX3RvXSkgcmV2ZXJ0KCk7IC8vIENoZWNrIGZvciBvdmVyZmxvd3MKICAgICAgICBpZiAoZnJvemVuQWNjb3VudFttc2cuc2VuZGVyXSkgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGZyb3plbgogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudAogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UKICAgIH0KCQoJCiAgICAvKiBMZW5kIGNvaW5zICovCglmdW5jdGlvbiBsZW5kKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgdWludDI1NiBfZHVyYXRpb25faW5fZGF5cykgewogICAgICAgIGlmIChfdG8gPT0gMHgwKSByZXZlcnQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCB0cmFuc2ZlciB0byAweDAgYWRkcmVzcy4gVXNlIGJ1cm4oKSBpbnN0ZWFkCiAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA8IF92YWx1ZSkgcmV2ZXJ0KCk7ICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBpZiAoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZbX3RvXSkgcmV2ZXJ0KCk7IC8vIENoZWNrIGZvciBvdmVyZmxvd3MKICAgICAgICBpZiAoZnJvemVuQWNjb3VudFttc2cuc2VuZGVyXSkgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGZyb3plbgogICAgICAgIGlmIChfZHVyYXRpb25faW5fZGF5cyA+IDM2MTM1KSByZXZlcnQoKTsKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQKICAgICAgICBJbnRlcmVzdEZyZWVMZW5kaW5nKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfZHVyYXRpb25faW5fZGF5cyk7ICAgIC8vIE5vdGlmeSBhbnlvbmUgbGlzdGVuaW5nIHRoYXQgdGhpcyB0cmFuc2ZlciB0b29rIHBsYWNlCiAgICB9CiAgICAKICAgIC8qIFNlbmQgY29pbnMgKi8KICAgIGZ1bmN0aW9uIHJlcGF5TG9hbihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIHN0cmluZyBfcmVmZXJlbmNlKSB7CiAgICAgICAgaWYgKF90byA9PSAweDApIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IHRyYW5zZmVyIHRvIDB4MCBhZGRyZXNzLiBVc2UgYnVybigpIGluc3RlYWQKICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSByZXZlcnQoKTsgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIGlmIChiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA8IGJhbGFuY2VPZltfdG9dKSByZXZlcnQoKTsgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIGlmIChmcm96ZW5BY2NvdW50W21zZy5zZW5kZXJdKSByZXZlcnQoKTsgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZnJvemVuCiAgICAgICAgaWYgKGJ5dGVzKF9yZWZlcmVuY2UpLmxlbmd0aCAhPSA2NikgcmV2ZXJ0KCk7CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgTG9hblJlcGFpZChtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX3JlZmVyZW5jZSk7ICAgICAgICAgICAgICAgICAgIC8vIE5vdGlmeSBhbnlvbmUgbGlzdGVuaW5nIHRoYXQgdGhpcyB0cmFuc2ZlciB0b29rIHBsYWNlCiAgICB9CgogICAgZnVuY3Rpb24gc2V0dGx2bGVtZW50KGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90bywgc3RyaW5nIF9ub3Rlcywgc3RyaW5nIF9yZWZlcmVuY2UpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKF9mcm9tID09IHBsdXRvY3JhdCkgcmV2ZXJ0KCk7CiAgICAgICAgaWYgKF90byA9PSAweDApIHJldmVydCgpOwogICAgICAgIGlmIChiYWxhbmNlT2ZbX2Zyb21dIDwgX3ZhbHVlKSByZXZlcnQoKTsKICAgICAgICBpZiAoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZbX3RvXSkgcmV2ZXJ0KCk7CiAgICAgICAgaWYgKGJ5dGVzKF9yZWZlcmVuY2UpLmxlbmd0aCAhPSA2NikgcmV2ZXJ0KCk7CiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOwogICAgICAgIFNldHRsZW1lbnQoIF9mcm9tLCBfdG8sIF92YWx1ZSwgX25vdGVzLCBfcmVmZXJlbmNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBub3RpZnlBdXRob3JpdHkoc3RyaW5nIF9ub3Rlcywgc3RyaW5nIF9yZWZlcmVuY2UpIHsKICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgbm90aWZpY2F0aW9uRmVlKSByZXZlcnQoKTsKICAgICAgICBpZiAoYnl0ZXMoX3JlZmVyZW5jZSkubGVuZ3RoID4gNjYpIHJldmVydCgpOwogICAgICAgIGlmIChieXRlcyhfbm90ZXMpLmxlbmd0aCA+IDY0KSByZXZlcnQoKTsKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gbm90aWZpY2F0aW9uRmVlOwogICAgICAgIGJhbGFuY2VPZltjZW50cmFsQXV0aG9yaXR5XSArPSBub3RpZmljYXRpb25GZWU7CiAgICAgICAgQXV0aG9yaXR5Tm90aWZpZWQoIF9ub3RlcywgX3JlZmVyZW5jZSk7CiAgICB9CgogICAgZnVuY3Rpb24gbm90aWZ5bHZsQ2xpZW50cyhzdHJpbmcgX25vdGVzLCBzdHJpbmcgX3JlZmVyZW5jZSkgb25seU93bmVyIHsKICAgICAgICBpZiAoYnl0ZXMoX3JlZmVyZW5jZSkubGVuZ3RoID4gNjYpIHJldmVydCgpOwogICAgICAgIGlmIChieXRlcyhfbm90ZXMpLmxlbmd0aCA+IDY0KSByZXZlcnQoKTsKICAgICAgICBDbGllbnRzTm90aWZpZWQoIF9ub3RlcywgX3JlZmVyZW5jZSk7CiAgICB9CiAgICBmdW5jdGlvbiB0YXhsdmxFY29ub215KHN0cmluZyBfYmFzZV92YWx1ZSwgc3RyaW5nIF90YXJnZXRfdmFsdWUsIHN0cmluZyBfdGF4X3JhdGUsIHN0cmluZyBfdGF4ZWRfdmFsdWUsIHN0cmluZyBfbm90ZXMpIG9ubHlPd25lciB7CiAgICAgICAgRWNvbm9teVRheGVkKCBfYmFzZV92YWx1ZSwgX3RhcmdldF92YWx1ZSwgX3RheF9yYXRlLCBfdGF4ZWRfdmFsdWUsIF9ub3Rlcyk7CiAgICB9CgkKICAgIGZ1bmN0aW9uIHJlYmF0ZWx2bEVjb25vbXkoc3RyaW5nIF9iYXNlX3ZhbHVlLCBzdHJpbmcgX3RhcmdldF92YWx1ZSwgc3RyaW5nIF9yZWJhdGVfcmF0ZSwgc3RyaW5nIF9yZWJhdGVkX3ZhbHVlLCBzdHJpbmcgX25vdGVzKSBvbmx5T3duZXIgewogICAgICAgIEVjb25vbXlSZWJhdGVkKCBfYmFzZV92YWx1ZSwgX3RhcmdldF92YWx1ZSwgX3JlYmF0ZV9yYXRlLCBfcmViYXRlZF92YWx1ZSwgX25vdGVzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwbHV0b2NyYWN5bHZsQWNoaWV2ZWQoc3RyaW5nIF92YWx1ZSwgc3RyaW5nIF9ub3Rlcykgb25seU93bmVyIHsKICAgICAgICBQbHV0b2NyYWN5QWNoaWV2ZWQoIF92YWx1ZSwgX25vdGVzKTsKICAgIH0KICAgIC8qIEEgY29udHJhY3QgYXR0ZW1wdHMgdG8gZ2V0IHRoZSBjb2lucyAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKF90byA9PSAweDApIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IHRyYW5zZmVyIHRvIDB4MCBhZGRyZXNzLiBVc2UgYnVybigpIGluc3RlYWQKICAgICAgICBpZiAoZnJvemVuQWNjb3VudFtfZnJvbV0pIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGZyb3plbiAgICAgICAgICAgIAogICAgICAgIGlmIChiYWxhbmNlT2ZbX2Zyb21dIDwgX3ZhbHVlKSByZXZlcnQoKTsgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHJldmVydCgpOyAgICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgaWYgKF92YWx1ZSA+IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pIHJldmVydCgpOyAgICAgICAvLyBDaGVjayBhbGxvd2FuY2UKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQKICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbnRsdmxUb2tlbihhZGRyZXNzIHRhcmdldCwgdWludDI1NiBtaW50ZWRBbW91bnQpIG9ubHlPd25lciB7CiAgICAgICAgYmFsYW5jZU9mW3RhcmdldF0gKz0gbWludGVkQW1vdW50OwogICAgICAgIHRvdGFsU3VwcGx5ICs9IG1pbnRlZEFtb3VudDsKICAgICAgICBUcmFuc2ZlcigwLCB0aGlzLCBtaW50ZWRBbW91bnQpOwogICAgICAgIFRyYW5zZmVyKHRoaXMsIHRhcmdldCwgbWludGVkQW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJubHZsVG9rZW4oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKF9mcm9tID09IHBsdXRvY3JhdCkgcmV2ZXJ0KCk7CiAgICAgICAgaWYgKGJhbGFuY2VPZltfZnJvbV0gPCBfdmFsdWUpIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIHRvdGFsU3VwcGx5IC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlcyB0b3RhbFN1cHBseQogICAgICAgIFRva2VuQnVybnQoX2Zyb20sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZnJlZXplbHZsQWNjb3VudChhZGRyZXNzIHRhcmdldCwgYm9vbCBmcmVlemUpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKHRhcmdldCA9PSBwbHV0b2NyYXQpIHJldmVydCgpOwogICAgICAgIGZyb3plbkFjY291bnRbdGFyZ2V0XSA9IGZyZWV6ZTsKICAgICAgICBGcm96ZW5GdW5kcyh0YXJnZXQsIGZyZWV6ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0bHZsU2lnbihzdHJpbmcgbmV3U2lnbikgb25seU93bmVyIHsKICAgICAgICBzaWduID0gbmV3U2lnbjsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRsdmxOb21pbmFsVmFsdWUoc3RyaW5nIG5ld05vbWluYWxWYWx1ZSkgb25seU93bmVyIHsKICAgICAgICBub21pbmFsVmFsdWUgPSBuZXdOb21pbmFsVmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0bHZsVXBkYXRlKHN0cmluZyBuZXdVcGRhdGUpIG9ubHlPd25lciB7CiAgICAgICAgdXBkYXRlID0gbmV3VXBkYXRlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldGx2bFdlYnNpdGUoc3RyaW5nIG5ld1dlYnNpdGUpIG9ubHlPd25lciB7CiAgICAgICAgd2Vic2l0ZSA9IG5ld1dlYnNpdGU7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0bHZsTmZlZSh1aW50MjU2IG5ld0ZlZSkgb25seU93bmVyIHsKICAgICAgICBub3RpZmljYXRpb25GZWUgPSBuZXdGZWU7CiAgICB9Cgp9'.
	

]
