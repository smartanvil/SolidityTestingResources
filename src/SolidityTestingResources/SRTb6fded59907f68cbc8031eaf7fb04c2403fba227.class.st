Class {
	#name : #SRTb6fded59907f68cbc8031eaf7fb04c2403fba227,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb6fded59907f68cbc8031eaf7fb04c2403fba227 >> base64 [
	^ 'LyoKICogRVJDMjAgaW50ZXJmYWNlCiAqIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIHsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCgoKLyoqCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MKICovCmNvbnRyYWN0IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiID4gMCk7CiAgICB1aW50IGMgPSBhIC8gYjsKICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSB7CiAgICAgIHRocm93OwogICAgfQogIH0KfQoKCgovKioKICogU3RhbmRhcmQgRVJDMjAgdG9rZW4gd2l0aCBTaG9ydCBIYW5kIEF0dGFjayBhbmQgYXBwcm92ZSgpIHJhY2UgY29uZGl0aW9uIG1pdGlnYXRpb24uCiAqCiAqIEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDoKICogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBTYWZlTWF0aCB7CgogIC8qIFRva2VuIHN1cHBseSBnb3QgaW5jcmVhc2VkIGFuZCBhIG5ldyBvd25lciByZWNlaXZlZCB0aGVzZSB0b2tlbnMgKi8KICBldmVudCBNaW50ZWQoYWRkcmVzcyByZWNlaXZlciwgdWludCBhbW91bnQpOwoKICAvKiBBY3R1YWwgYmFsYW5jZXMgb2YgdG9rZW4gaG9sZGVycyAqLwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKCiAgLyogYXBwcm92ZSgpIGFsbG93YW5jZXMgKi8KICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgogIC8qIEludGVyZmFjZSBkZWNsYXJhdGlvbiAqLwogIGZ1bmN0aW9uIGlzVG9rZW4oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCB3ZUFyZSkgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKgogICAqIEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrCiAgICoKICAgKiBodHRwOi8vdmVzc2VuZXMuY29tL3RoZS1lcmMyMC1zaG9ydC1hZGRyZXNzLWF0dGFjay1leHBsYWluZWQvCiAgICovCiAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7CiAgICAgICB0aHJvdzsKICAgICB9CiAgICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHVpbnQgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sIF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSwgX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gc2FmZVN1YihfYWxsb3dhbmNlLCBfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgaWYgKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9IDApKSB0aHJvdzsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9Cgp9CgoKCi8qCiAqIE93bmFibGUKICoKICogQmFzZSBjb250cmFjdCB3aXRoIGFuIG93bmVyLgogKiBQcm92aWRlcyBvbmx5T3duZXIgbW9kaWZpZXIsIHdoaWNoIHByZXZlbnRzIGZ1bmN0aW9uIGZyb20gcnVubmluZyBpZiBpdCBpcyBjYWxsZWQgYnkgYW55b25lIG90aGVyIHRoYW4gdGhlIG93bmVyLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICB0aHJvdzsKICAgIH0KICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KICB9Cgp9CgoKLyoqCiAqIEhvbGQgdG9rZW5zIGZvciBhIGdyb3VwIGludmVzdG9yIG9mIGludmVzdG9ycyB1bnRpbCB0aGUgdW5sb2NrIGRhdGUuCiAqCiAqIEFmdGVyIHRoZSB1bmxvY2sgZGF0ZSB0aGUgaW52ZXN0b3IgY2FuIGNsYWltIHRoZWlyIHRva2Vucy4KICoKICogU3RlcHMKICoKICogLSBQcmVwYXJlIGEgc3ByZWFkc2hlZXQgZm9yIHRva2VuIGFsbG9jYXRpb24KICogLSBEZXBsb3kgdGhpcyBjb250cmFjdCwgd2l0aCB0aGUgc3VtIHRvIHRva2VucyB0byBiZSBkaXN0cmlidXRlZCwgZnJvbSB0aGUgb3duZXIgYWNjb3VudAogKiAtIENhbGwgc2V0SW52ZXN0b3IgZm9yIGFsbCBpbnZlc3RvcnMgZnJvbSB0aGUgb3duZXIgYWNjb3VudCB1c2luZyBhIGxvY2FsIHNjcmlwdCBhbmQgQ1NWIGlucHV0CiAqIC0gTW92ZSB0b2tlbnNUb0JlQWxsb2NhdGVkIGluIHRoaXMgY29udHJhY3QgdXNpbmcgU3RhbmRhcmRUb2tlbi50cmFuc2ZlcigpCiAqIC0gQ2FsbCBsb2NrIGZyb20gdGhlIG93bmVyIGFjY291bnQKICogLSBXYWl0IHVudGlsIHRoZSBmcmVlemUgcGVyaW9kIGlzIG92ZXIKICogLSBBZnRlciB0aGUgZnJlZXplIHRpbWUgaXMgb3ZlciBpbnZlc3RvcnMgY2FuIGNhbGwgY2xhaW0oKSBmcm9tIHRoZWlyIGFkZHJlc3MgdG8gZ2V0IHRoZWlyIHRva2VucwogKgogKi8KY29udHJhY3QgVG9rZW5WYXVsdCBpcyBPd25hYmxlIHsKCiAgLyoqIEhvdyBtYW55IGludmVzdG9ycyB3ZSBoYXZlIG5vdyAqLwogIHVpbnQgcHVibGljIGludmVzdG9yQ291bnQ7CgogIC8qKiBTdW0gZnJvbSB0aGUgc3ByZWFkc2hlZXQgaG93IG11Y2ggdG9rZW5zIHdlIHNob3VsZCBnZXQgb24gdGhlIGNvbnRyYWN0LiBJZiB0aGUgc3VtIGRvZXMgbm90IG1hdGNoIGF0IHRoZSB0aW1lIG9mIHRoZSBsb2NrIHRoZSB2YXVsdCBpcyBmYXVsdHkgYW5kIG11c3QgYmUgcmVjcmVhdGVkLiovCiAgdWludCBwdWJsaWMgdG9rZW5zVG9CZUFsbG9jYXRlZDsKCiAgLyoqIEhvdyBtYW55IHRva2VucyBpbnZlc3RvcnMgaGF2ZSBjbGFpbWVkIHNvIGZhciAqLwogIHVpbnQgcHVibGljIHRvdGFsQ2xhaW1lZDsKCiAgLyoqIEhvdyBtYW55IHRva2VucyBvdXIgaW50ZXJuYWwgYm9vayBrZWVwaW5nIHRlbGxzIHVzIHRvIGhhdmUgYXQgdGhlIHRpbWUgb2YgbG9jaygpIHdoZW4gYWxsIGludmVzdG9yIGRhdGEgaGFzIGJlZW4gbG9hZGVkICovCiAgdWludCBwdWJsaWMgdG9rZW5zQWxsb2NhdGVkVG90YWw7CgogIC8qKiBIb3cgbXVjaCB3ZSBoYXZlIGFsbG9jYXRlZCB0byB0aGUgaW52ZXN0b3JzIGludmVzdGVkICovCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBiYWxhbmNlczsKCiAgLyoqIEhvdyBtYW55IHRva2VucyBpbnZlc3RvcnMgaGF2ZSBjbGFpbWVkICovCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBjbGFpbWVkOwoKICAvKiogV2hlbiBvdXIgY2xhaW0gZnJlZXplIGlzIG92ZXIgKFVOSVggdGltZXN0YW1wKSAqLwogIHVpbnQgcHVibGljIGZyZWV6ZUVuZHNBdDsKCiAgLyoqIFdoZW4gdGhpcyB2YXVsdCB3YXMgbG9ja2VkIChVTklYIHRpbWVzdGFtcCkgKi8KICB1aW50IHB1YmxpYyBsb2NrZWRBdDsKCiAgLyoqIFdlIGNhbiBhbHNvIGRlZmluZSBvdXIgb3duIHRva2VuLCB3aGljaCB3aWxsIG92ZXJyaWRlIHRoZSBJQ08gb25lICoqKi8KICBTdGFuZGFyZFRva2VuIHB1YmxpYyB0b2tlbjsKCiAgLyoqIFdoYXQgaXMgb3VyIGN1cnJlbnQgc3RhdGUuCiAgICoKICAgKiBMb2FkaW5nOiBJbnZlc3RvciBkYXRhIGlzIGJlaW5nIGxvYWRlZCBhbmQgY29udHJhY3Qgbm90IHlldCBsb2NrZWQKICAgKiBIb2xkaW5nOiBIb2xkaW5nIHRva2VucyBmb3IgaW52ZXN0b3JzCiAgICogRGlzdHJpYnV0aW5nOiBGcmVlemUgdGltZSBpcyBvdmVyLCBpbnZlc3RvcnMgY2FuIGNsYWltIHRoZWlyIHRva2VucwogICAqLwogIGVudW0gU3RhdGV7VW5rbm93biwgTG9hZGluZywgSG9sZGluZywgRGlzdHJpYnV0aW5nfQoKICAvKiogV2UgYWxsb2NhdGVkIHRva2VucyBmb3IgaW52ZXN0b3IgKi8KICBldmVudCBBbGxvY2F0ZWQoYWRkcmVzcyBpbnZlc3RvciwgdWludCB2YWx1ZSk7CgogIC8qKiBXZSBkaXN0cmlidXRlZCB0b2tlbnMgdG8gYW4gaW52ZXN0b3IgKi8KICBldmVudCBEaXN0cmlidXRlZChhZGRyZXNzIGludmVzdG9ycywgdWludCBjb3VudCk7CgogIGV2ZW50IExvY2tlZCgpOwoKICAvKioKICAgKiBDcmVhdGUgcHJlc2FsZSBjb250cmFjdCB3aGVyZSBsb2NrIHVwIHBlcmlvZCBpcyBnaXZlbiBkYXlzCiAgICoKICAgKiBAcGFyYW0gX293bmVyIFdobyBjYW4gbG9hZCBpbnZlc3RvciBkYXRhIGFuZCBsb2NrCiAgICogQHBhcmFtIF9mcmVlemVFbmRzQXQgVU5JWCB0aW1lc3RhbXAgd2hlbiB0aGUgdmF1bHQgdW5sb2NrcwogICAqIEBwYXJhbSBfdG9rZW4gVG9rZW4gY29udHJhY3QgYWRkcmVzcyB3ZSBhcmUgZGlzdHJpYnV0aW5nCiAgICogQHBhcmFtIF90b2tlbnNUb0JlQWxsb2NhdGVkIFRvdGFsIG51bWJlciBvZiB0b2tlbnMgdGhpcyB2YXVsdCB3aWxsIGhvbGQgLSBpbmNsdWRpbmcgZGVjaW1hbCBtdWx0aXBsY2F0aW9uCiAgICoKICAgKi8KICBmdW5jdGlvbiBUb2tlblZhdWx0KGFkZHJlc3MgX293bmVyLCB1aW50IF9mcmVlemVFbmRzQXQsIFN0YW5kYXJkVG9rZW4gX3Rva2VuLCB1aW50IF90b2tlbnNUb0JlQWxsb2NhdGVkKSB7CgogICAgb3duZXIgPSBfb3duZXI7CgogICAgLy8gSW52YWxpZCBvd2VucgogICAgaWYob3duZXIgPT0gMCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICB0b2tlbiA9IF90b2tlbjsKCiAgICAvLyBDaGVjayB0aGUgYWRkcmVzcyBsb29rcyBsaWtlIGEgdG9rZW4gY29udHJhY3QKICAgIGlmKCF0b2tlbi5pc1Rva2VuKCkpIHsKICAgICAgdGhyb3c7CiAgICB9CgogICAgLy8gR2l2ZSBhcmd1bWVudAogICAgaWYoX2ZyZWV6ZUVuZHNBdCA9PSAwKSB7CiAgICAgIHRocm93OwogICAgfQoKICAgIC8vIFNhbml0eSBjaGVjayBvbiBfdG9rZW5zVG9CZUFsbG9jYXRlZAogICAgaWYoX3Rva2Vuc1RvQmVBbGxvY2F0ZWQgPT0gMCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICBmcmVlemVFbmRzQXQgPSBfZnJlZXplRW5kc0F0OwogICAgdG9rZW5zVG9CZUFsbG9jYXRlZCA9IF90b2tlbnNUb0JlQWxsb2NhdGVkOwogIH0KCiAgLy8vIEBkZXYgQWRkIGEgcHJlc2FsZSBwYXJ0aWNpcGF0aW5nIGFsbG9jYXRpb24KICBmdW5jdGlvbiBzZXRJbnZlc3RvcihhZGRyZXNzIGludmVzdG9yLCB1aW50IGFtb3VudCkgcHVibGljIG9ubHlPd25lciB7CgogICAgaWYobG9ja2VkQXQgPiAwKSB7CiAgICAgIC8vIENhbm5vdCBhZGQgbmV3IGludmVzdG9ycyBhZnRlciB0aGUgdmF1bHQgaXMgbG9ja2VkCiAgICAgIHRocm93OwogICAgfQoKICAgIGlmKGFtb3VudCA9PSAwKSB0aHJvdzsgLy8gTm8gZW1wdHkgYnV5cwoKICAgIC8vIERvbid0IGFsbG93IHJlc2V0CiAgICBpZihiYWxhbmNlc1tpbnZlc3Rvcl0gPiAwKSB7CiAgICAgIHRocm93OwogICAgfQoKICAgIGJhbGFuY2VzW2ludmVzdG9yXSA9IGFtb3VudDsKCiAgICBpbnZlc3RvckNvdW50Kys7CgogICAgdG9rZW5zQWxsb2NhdGVkVG90YWwgKz0gYW1vdW50OwoKICAgIEFsbG9jYXRlZChpbnZlc3RvciwgYW1vdW50KTsKICB9CgogIC8vLyBAZGV2IExvY2sgdGhlIHZhdWx0CiAgLy8vICAgICAgLSBBbGwgYmFsYW5jZXMgaGF2ZSBiZWVuIGxvYWRlZCBpbiBjb3JyZWN0bHkKICAvLy8gICAgICAtIFRva2VucyBhcmUgdHJhbnNmZXJyZWQgb24gdGhpcyB2YXVsdCBjb3JyZWN0bHkKICAvLy8gICAgICAtIENoZWNrcyBhcmUgaW4gcGxhY2UgdG8gcHJldmVudCBjcmVhdGluZyBhIHZhdWx0IHRoYXQgaXMgbG9ja2VkIHdpdGggaW5jb3JyZWN0IHRva2VuIGJhbGFuY2VzLgogIGZ1bmN0aW9uIGxvY2soKSBvbmx5T3duZXIgewoKICAgIGlmKGxvY2tlZEF0ID4gMCkgewogICAgICB0aHJvdzsgLy8gQWxyZWFkeSBsb2NrZWQKICAgIH0KCiAgICAvLyBTcHJlYWRzaGVldCBzdW0gZG9lcyBub3QgbWF0Y2ggdG8gd2hhdCB3ZSBoYXZlIGxvYWRlZCB0byB0aGUgaW52ZXN0b3IgZGF0YQogICAgaWYodG9rZW5zQWxsb2NhdGVkVG90YWwgIT0gdG9rZW5zVG9CZUFsbG9jYXRlZCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICAvLyBEbyBub3QgbG9jayB0aGUgdmF1bHQgaWYgdGhlIGdpdmVuIHRva2VucyBhcmUgbm90IG9uIHRoaXMgY29udHJhY3QKICAgIGlmKHRva2VuLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKSAhPSB0b2tlbnNBbGxvY2F0ZWRUb3RhbCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICBsb2NrZWRBdCA9IG5vdzsKCiAgICBMb2NrZWQoKTsKICB9CgogIC8vLyBAZGV2IEluIHRoZSBjYXNlIGxvY2tpbmcgZmFpbGVkLCB0aGVuIGFsbG93IHRoZSBvd25lciB0byByZWNsYWltIHRoZSB0b2tlbnMgb24gdGhlIGNvbnRyYWN0LgogIGZ1bmN0aW9uIHJlY292ZXJGYWlsZWRMb2NrKCkgb25seU93bmVyIHsKICAgIGlmKGxvY2tlZEF0ID4gMCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICAvLyBUcmFuc2ZlciBhbGwgdG9rZW5zIG9uIHRoaXMgY29udHJhY3QgYmFjayB0byB0aGUgb3duZXIKICAgIHRva2VuLnRyYW5zZmVyKG93bmVyLCB0b2tlbi5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSkpOwogIH0KCiAgLy8vIEBkZXYgR2V0IHRoZSBjdXJyZW50IGJhbGFuY2Ugb2YgdG9rZW5zIGluIHRoZSB2YXVsdAogIC8vLyBAcmV0dXJuIHVpbnQgSG93IG1hbnkgdG9rZW5zIHRoZXJlIGFyZSBjdXJyZW50bHkgaW4gdmF1bHQKICBmdW5jdGlvbiBnZXRCYWxhbmNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgaG93TWFueVRva2Vuc0N1cnJlbnRseUluVmF1bHQpIHsKICAgIHJldHVybiB0b2tlbi5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7CiAgfQoKICAvLy8gQGRldiBDbGFpbSBOIGJvdWdodCB0b2tlbnMgdG8gdGhlIGludmVzdG9yIGFzIHRoZSBtc2cgc2VuZGVyCiAgZnVuY3Rpb24gY2xhaW0oKSB7CgogICAgYWRkcmVzcyBpbnZlc3RvciA9IG1zZy5zZW5kZXI7CgogICAgaWYobG9ja2VkQXQgPT0gMCkgewogICAgICB0aHJvdzsgLy8gV2Ugd2VyZSBuZXZlciBsb2NrZWQKICAgIH0KCiAgICBpZihub3cgPCBmcmVlemVFbmRzQXQpIHsKICAgICAgdGhyb3c7IC8vIFRyeWluZyB0byBjbGFpbSBlYXJseQogICAgfQoKICAgIGlmKGJhbGFuY2VzW2ludmVzdG9yXSA9PSAwKSB7CiAgICAgIC8vIE5vdCBvdXIgaW52ZXN0b3IKICAgICAgdGhyb3c7CiAgICB9CgogICAgaWYoY2xhaW1lZFtpbnZlc3Rvcl0gPiAwKSB7CiAgICAgIHRocm93OyAvLyBBbHJlYWR5IGNsYWltZWQKICAgIH0KCiAgICB1aW50IGFtb3VudCA9IGJhbGFuY2VzW2ludmVzdG9yXTsKCiAgICBjbGFpbWVkW2ludmVzdG9yXSA9IGFtb3VudDsKCiAgICB0b3RhbENsYWltZWQgKz0gYW1vdW50OwoKICAgIHRva2VuLnRyYW5zZmVyKGludmVzdG9yLCBhbW91bnQpOwoKICAgIERpc3RyaWJ1dGVkKGludmVzdG9yLCBhbW91bnQpOwogIH0KCiAgLy8vIEBkZXYgUmVzb2x2ZSB0aGUgY29udHJhY3QgdW1hbWJpZ2lvdXMgc3RhdGUKICBmdW5jdGlvbiBnZXRTdGF0ZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKFN0YXRlKSB7CiAgICBpZihsb2NrZWRBdCA9PSAwKSB7CiAgICAgIHJldHVybiBTdGF0ZS5Mb2FkaW5nOwogICAgfSBlbHNlIGlmKG5vdyA+IGZyZWV6ZUVuZHNBdCkgewogICAgICByZXR1cm4gU3RhdGUuRGlzdHJpYnV0aW5nOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIFN0YXRlLkhvbGRpbmc7CiAgICB9CiAgfQoKfQ=='.
	

]
