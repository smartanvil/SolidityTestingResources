Class {
	#name : #SRT6fa8cd6a1a35542ba289437fe69e8f21ca1fa614,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6fa8cd6a1a35542ba289437fe69e8f21ca1fa614 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovLyA9PT09IERJU0NMQUlNRVIgPT09PQovLwovLyBFVEhFUkVVTSBJUyBTVElMTCBBTiBFWFBFUkVNRU5UQUwgVEVDSE5PTE9HWS4KLy8gQUxUSE9VR0ggVEhJUyBTTUFSVCBDT05UUkFDVCBXQVMgQ1JFQVRFRCBXSVRIIEdSRUFUIENBUkUgQU5EIElOIFRIRSBIT1BFIE9GIEJFSU5HIFVTRUZVTCwgTk8gR1VBUkFOVEVFUyBPRiBGTEFXTEVTUyBPUEVSQVRJT04gQ0FOIEJFIEdJVkVOLgovLyBJTiBQQVJUSUNVTEFSIC0gU1VCVElMRSBCVUdTLCBIQUNLRVIgQVRUQUNLUyBPUiBNQUxGVU5DVElPTiBPRiBVTkRFUkxZSU5HIFRFQ0hOT0xPR1kgQ0FOIENBVVNFIFVOSU5URU5USU9OQUwgQkVIQVZJT1VSLgovLyBZT1UgQVJFIFNUUk9OR0xZIEVOQ09VUkFHRUQgVE8gU1RVRFkgVEhJUyBTTUFSVCBDT05UUkFDVCBDQVJFRlVMTFkgSU4gT1JERVIgVE8gVU5ERVJTVEFORCBQT1NTSUJMRSBFREdFIENBU0VTIEFORCBSSVNLUy4KLy8gRE9OJ1QgVVNFIFRISVMgU01BUlQgQ09OVFJBQ1QgSUYgWU9VIEhBVkUgU1VCU1RBTlRJQUwgRE9VQlRTIE9SIElGIFlPVSBET04nVCBLTk9XIFdIQVQgWU9VIEFSRSBET0lORy4KLy8KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQovLyBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsCi8vIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsCi8vIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLAovLyBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgovLyA9PT09Ci8vCgovLy8gQGF1dGhvciBTYW50aW1lbnQgTExDCi8vLyBAdGl0bGUgIFNBTiAtIHNhbnRpbWVudCB0b2tlbgoKY29udHJhY3QgQmFzZSB7CgogICAgZnVuY3Rpb24gbWF4KHVpbnQgYSwgdWludCBiKSByZXR1cm5zICh1aW50KSB7IHJldHVybiBhID49IGIgPyBhIDogYjsgfQogICAgZnVuY3Rpb24gbWluKHVpbnQgYSwgdWludCBiKSByZXR1cm5zICh1aW50KSB7IHJldHVybiBhIDw9IGIgPyBhIDogYjsgfQoKICAgIG1vZGlmaWVyIG9ubHkoYWRkcmVzcyBhbGxvd2VkKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gYWxsb3dlZCkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCgogICAgLy8vQHJldHVybiBUcnVlIGlmIGBfYWRkcmAgaXMgYSBjb250cmFjdAogICAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKF9hZGRyID09IDApIHJldHVybiBmYWxzZTsKICAgICAgICB1aW50IHNpemU7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBzaXplIDo9IGV4dGNvZGVzaXplKF9hZGRyKQogICAgICAgIH0KICAgICAgICByZXR1cm4gKHNpemUgPiAwKTsKICAgIH0KCiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICAvLyAqICAgICAgICAgIHJlZW50cmFuY3kgaGFuZGxpbmcgICAgICAgICAgICAgICAgICAqCiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgogICAgLy9AZGV2IHByZWRlZmluZWQgbG9ja3MgKHVwIHRvIHVpbnQgYml0IGxlbmd0aCwgaS5lLiAyNTYgcG9zc2libGUpCiAgICB1aW50IGNvbnN0YW50IGludGVybmFsIEwwMCA9IDIgKiogMDsKICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAxID0gMiAqKiAxOwogICAgdWludCBjb25zdGFudCBpbnRlcm5hbCBMMDIgPSAyICoqIDI7CiAgICB1aW50IGNvbnN0YW50IGludGVybmFsIEwwMyA9IDIgKiogMzsKICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA0ID0gMiAqKiA0OwogICAgdWludCBjb25zdGFudCBpbnRlcm5hbCBMMDUgPSAyICoqIDU7CgogICAgLy9wcmV2ZW50cyByZWVudHJhbmN5IGF0dGFjczogc3BlY2lmaWMgbG9ja3MKICAgIHVpbnQgcHJpdmF0ZSBiaXRsb2NrcyA9IDA7CiAgICBtb2RpZmllciBub1JlZW50cmFuY3kodWludCBtKSB7CiAgICAgICAgdmFyIF9sb2NrcyA9IGJpdGxvY2tzOwogICAgICAgIGlmIChfbG9ja3MgJiBtID4gMCkgdGhyb3c7CiAgICAgICAgYml0bG9ja3MgfD0gbTsKICAgICAgICBfOwogICAgICAgIGJpdGxvY2tzID0gX2xvY2tzOwogICAgfQoKICAgIG1vZGlmaWVyIG5vQW55UmVlbnRyYW5jeSB7CiAgICAgICAgdmFyIF9sb2NrcyA9IGJpdGxvY2tzOwogICAgICAgIGlmIChfbG9ja3MgPiAwKSB0aHJvdzsKICAgICAgICBiaXRsb2NrcyA9IHVpbnQoLTEpOwogICAgICAgIF87CiAgICAgICAgYml0bG9ja3MgPSBfbG9ja3M7CiAgICB9CgogICAgLy8vQGRldiBlbXB0eSBtYXJraW5nIG1vZGlmaWVyIHNpZ25hbGluZyB0byB1c2VyIG9mIHRoZSBtYXJrZWQgZnVuY3Rpb24gLCB0aGF0IGl0IGNhbiBjYXVzZSBhbiByZWVudHJhbnQgY2FsbC4KICAgIC8vLyAgICAgZGV2ZWxvcGVyIHNob3VsZCBtYWtlIHRoZSBjYWxsZXIgZnVuY3Rpb24gcmVlbnRyYW50LXNhZmUgaWYgaXQgdXNlIGEgcmVlbnRyYW50IGZ1bmN0aW9uLgogICAgbW9kaWZpZXIgcmVlbnRyYW50IHsgXzsgfQoKfQoKY29udHJhY3QgT3duZWQgaXMgQmFzZSB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKCiAgICBmdW5jdGlvbiBPd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHkob3duZXIpIHsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSBvbmx5KG5ld093bmVyKSB7CiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQoKICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7Cgp9CgoKY29udHJhY3QgRVJDMjAgaXMgT3duZWQgewoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpc1N0YXJ0ZWRPbmx5IHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpc1N0YXJ0ZWRPbmx5IHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIGlzU3RhcnRlZE9ubHkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBib29sICAgIHB1YmxpYyBpc1N0YXJ0ZWQgPSBmYWxzZTsKCiAgICBtb2RpZmllciBvbmx5SG9sZGVyKGFkZHJlc3MgaG9sZGVyKSB7CiAgICAgICAgaWYgKGJhbGFuY2VPZihob2xkZXIpID09IDApIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaXNTdGFydGVkT25seSgpIHsKICAgICAgICBpZiAoIWlzU3RhcnRlZCkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCn0KCgpjb250cmFjdCBTdWJzY3JpcHRpb25Nb2R1bGUgewogICAgZnVuY3Rpb24gYXR0YWNoVG9rZW4oYWRkcmVzcyBhZGRyKSBwdWJsaWMgOwp9Cgpjb250cmFjdCBTQU4gaXMgT3duZWQsIEVSQzIwIHsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgICAgID0gIlNBTnRpbWVudCBuZXR3b3JrIHRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sICAgPSAiU0FOIjsKICAgIHVpbnQ4ICBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxNTsKCiAgICBhZGRyZXNzIENST1dEU0FMRV9NSU5URVIgPSAweERhMkNmODEwYzU3MTgxMzUyNDc2Mjg2ODlEODRGOTRjNjFCNDFkNkE7CiAgICBhZGRyZXNzIHB1YmxpYyBTVUJTQ1JJUFRJT05fTU9EVUxFID0gMHgwMDAwMDAwMDsKICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwoKICAgIHVpbnQgcHVibGljIFBMQVRGT1JNX0ZFRV9QRVJfMTAwMDAgPSAxOyAvLzAuMDElCiAgICB1aW50IHB1YmxpYyB0b3RhbE9uRGVwb3NpdDsKICAgIHVpbnQgcHVibGljIHRvdGFsSW5DaXJjdWxhdGlvbjsKCiAgICAvLy9AZGV2IGNvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBTQU4oKSB7CiAgICAgICAgYmVuZWZpY2lhcnkgPSBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBEb24ndCBhY2NlcHQgZXRoZXJzCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdzsKICAgIH0KCiAgICAvLz09PT09PT09IFNFQ1RJT04gQ29uZmlndXJhdGlvbjogT3duZXIgb25seSA9PT09PT09PQogICAgLy8KICAgIC8vL0Bub3RpY2Ugc2V0IGJlbmVmaWNpYXJ5IC0gdGhlIGFjY291bnQgcmVjZWl2aW5nIHBsYXRmb3JtIGZlZXMuCiAgICBmdW5jdGlvbiBzZXRCZW5lZmljaWFyeShhZGRyZXNzIG5ld0JlbmVmaWNpYXJ5KQogICAgZXh0ZXJuYWwKICAgIG9ubHkob3duZXIpIHsKICAgICAgICBiZW5lZmljaWFyeSA9IG5ld0JlbmVmaWNpYXJ5OwogICAgfQoKCiAgICAvLy9Abm90aWNlIGF0dGFjaCBtb2R1bGUgbWFuYWdpbmcgc3Vic2NyaXB0aW9ucy4gaWYgc3ViTW9kdWxlPT0weDAsIHRoZW4gZGlzYWJsZXMgc3Vic2NyaXB0aW9uIGZ1bmN0aW9uYWxpdHkgZm9yIHRoaXMgdG9rZW4uCiAgICAvLy8gZGV0YWNoZWQgbW9kdWxlIGNhbiB1c3VhbGx5IG1hbmFnZSBzdWJzY3JpcHRpb25zLCBidXQgYWxsIG9wZXJhdGlvbnMgY2hhbmdpbmcgdG9rZW4gYmFsYW5jZXMgYXJlIGRpc2FibGVkLgogICAgZnVuY3Rpb24gYXR0YWNoU3Vic2NyaXB0aW9uTW9kdWxlKFN1YnNjcmlwdGlvbk1vZHVsZSBzdWJNb2R1bGUpCiAgICBub0FueVJlZW50cmFuY3kKICAgIGV4dGVybmFsCiAgICBvbmx5KG93bmVyKSB7CiAgICAgICAgU1VCU0NSSVBUSU9OX01PRFVMRSA9IHN1Yk1vZHVsZTsKICAgICAgICBpZiAoYWRkcmVzcyhzdWJNb2R1bGUpID4gMCkgc3ViTW9kdWxlLmF0dGFjaFRva2VuKHRoaXMpOwogICAgfQoKICAgIC8vL0Bub3RpY2Ugc2V0IHBsYXRmb3JtIGZlZSBkZW5vbWluYXRlZCBpbiAxLzEwMDAwIG9mIFNBTiB0b2tlbi4gVGh1cyAiMSIgbWVhbnMgMC4wMSUgb2YgU0FOIHRva2VuLgogICAgZnVuY3Rpb24gc2V0UGxhdGZvcm1GZWVQZXIxMDAwMCh1aW50IG5ld0ZlZSkKICAgIGV4dGVybmFsCiAgICBvbmx5KG93bmVyKSB7CiAgICAgICAgcmVxdWlyZSAobmV3RmVlIDw9IDEwMDAwKTsgLy9mb3JtYWxseSBtYXhpbXVtIGZlZSBpcyAxMDAlIChjb21wbGV0ZWx5IGluc2FuZSBidXQgdGVjaG5pY2FsbHkgcG9zc2libGUpCiAgICAgICAgUExBVEZPUk1fRkVFX1BFUl8xMDAwMCA9IG5ld0ZlZTsKICAgIH0KCgogICAgLy89PT09PT09PSBJbnRlcmZhY2UgWFJhdGVQcm92aWRlcjogYSB0cml2aWFsIGV4Y2hhbmdlIHJhdGUgcHJvdmlkZXIuIFJhdGUgaXMgMToxIGFuZCBTQU4gc3ltYm9sIGFzIHRoZSBjb2RlCiAgICAvLwogICAgLy8vQGRldiB1c2VkIGFzIGEgZGVmYXVsdCBYUmF0ZVByb3ZpZGVyIChpZD09MCkgYnkgc3Vic2NyaXB0aW9uIG1vZHVsZS4KICAgIC8vL0Bub3RpY2UgcmV0dXJucyBhbHdheXMgMSBiZWNhdXNlIGV4Y2hhbmdlIHJhdGUgb2YgdGhlIHRva2VuIHRvIGl0c2VsZiBpcyBhbHdheXMgMS4KICAgIGZ1bmN0aW9uIGdldFJhdGUoKSByZXR1cm5zKHVpbnQzMiAsdWludDMyKSB7IHJldHVybiAoMSwxKTsgIH0KICAgIGZ1bmN0aW9uIGdldENvZGUoKSBwdWJsaWMgcmV0dXJucyhzdHJpbmcpICB7IHJldHVybiBzeW1ib2w7IH0KCgogICAgLy89PT09IEludGVyZmFjZSBFUkMyME1vZHVsZVN1cHBvcnQ6IFN1YnNjcmlwdGlvbiwgRGVwb3NpdCBhbmQgUGF5bWVudCBTdXBwb3J0ID09PT09CiAgICAvLy8KICAgIC8vL0BkZXYgdXNlZCBieSBzdWJzY3JpcHRpb24gbW9kdWxlIHRvIG9wZXJhdGUgb24gdG9rZW4gYmFsYW5jZXMuCiAgICAvLy9AcGFyYW0gbXNnX3NlbmRlciBzaG91bGQgYmUgYW4gb3JpZ2luYWwgbXNnLnNlbmRlciBwcm92aWRlZCB0byBzdWJzY3JpcHRpb24gbW9kdWxlLgogICAgZnVuY3Rpb24gX2Z1bGZpbGxQcmVhcHByb3ZlZFBheW1lbnQoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBhZGRyZXNzIG1zZ19zZW5kZXIpCiAgICBwdWJsaWMKICAgIG9ubHlUcnVzdGVkCiAgICByZXR1cm5zKGJvb2wgc3VjY2VzcykgewogICAgICAgIHN1Y2Nlc3MgPSBfZnJvbSAhPSBtc2dfc2VuZGVyICYmIGFsbG93ZWRbX2Zyb21dW21zZ19zZW5kZXJdID49IF92YWx1ZTsKICAgICAgICBpZiAoIXN1Y2Nlc3MpIHsKICAgICAgICAgICAgUGF5bWVudChfZnJvbSwgX3RvLCBfdmFsdWUsIF9mZWUoX3ZhbHVlKSwgbXNnX3NlbmRlciwgUGF5bWVudFN0YXR1cy5BUFBST1ZBTF9FUlJPUiwgMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3VjY2VzcyA9IF9mdWxmaWxsUGF5bWVudChfZnJvbSwgX3RvLCBfdmFsdWUsIDAsIG1zZ19zZW5kZXIpOwogICAgICAgICAgICBpZiAoc3VjY2VzcykgewogICAgICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnX3NlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdWNjZXNzOwogICAgfQoKICAgIC8vL0BkZXYgdXNlZCBieSBzdWJzY3JpcHRpb24gbW9kdWxlIHRvIG9wZXJhdGUgb24gdG9rZW4gYmFsYW5jZXMuCiAgICAvLy9AcGFyYW0gbXNnX3NlbmRlciBzaG91bGQgYmUgYW4gb3JpZ2luYWwgbXNnLnNlbmRlciBwcm92aWRlZCB0byBzdWJzY3JpcHRpb24gbW9kdWxlLgogICAgZnVuY3Rpb24gX2Z1bGZpbGxQYXltZW50KGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgdWludCBzdWJJZCwgYWRkcmVzcyBtc2dfc2VuZGVyKQogICAgcHVibGljCiAgICBvbmx5VHJ1c3RlZAogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdmFyIGZlZSA9IF9mZWUoX3ZhbHVlKTsKICAgICAgICBhc3NlcnQgKGZlZSA8PSBfdmFsdWUpOyAvL2ludGVybmFsIHNhbml0eSBjaGVjawogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlIC0gZmVlOwogICAgICAgICAgICBiYWxhbmNlc1tiZW5lZmljaWFyeV0gKz0gZmVlOwogICAgICAgICAgICBQYXltZW50KF9mcm9tLCBfdG8sIF92YWx1ZSwgZmVlLCBtc2dfc2VuZGVyLCBQYXltZW50U3RhdHVzLk9LLCBzdWJJZCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFBheW1lbnQoX2Zyb20sIF90bywgX3ZhbHVlLCBmZWUsIG1zZ19zZW5kZXIsIFBheW1lbnRTdGF0dXMuQkFMQU5DRV9FUlJPUiwgc3ViSWQpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIF9mZWUodWludCBfdmFsdWUpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgZmVlKSB7CiAgICAgICAgcmV0dXJuIF92YWx1ZSAqIFBMQVRGT1JNX0ZFRV9QRVJfMTAwMDAgLyAxMDAwMDsKICAgIH0KCiAgICAvLy9Abm90aWNlIHVzZWQgYnkgc3Vic2NyaXB0aW9uIG1vZHVsZSB0byByZS1jcmVhdGUgdG9rZW4gZnJvbSByZXR1cm5pbmcgZGVwb3NpdC4KICAgIC8vL0BkZXYgYSBzdWJzY3JpcHRpb24gbW9kdWxlIGlzIHJlc3BvbnNpYmxlIHRvIGNvcnJlY3QgZGVwb3NpdCBtYW5hZ2VtZW50LgogICAgZnVuY3Rpb24gX21pbnRGcm9tRGVwb3NpdChhZGRyZXNzIG93bmVyLCB1aW50IGFtb3VudCkKICAgIHB1YmxpYwogICAgb25seVRydXN0ZWQgewogICAgICAgIGJhbGFuY2VzW293bmVyXSArPSBhbW91bnQ7CiAgICAgICAgdG90YWxPbkRlcG9zaXQgLT0gYW1vdW50OwogICAgICAgIHRvdGFsSW5DaXJjdWxhdGlvbiArPSBhbW91bnQ7CiAgICB9CgogICAgLy8vQG5vdGljZSB1c2VkIGJ5IHN1YnNjcmlwdGlvbiBtb2R1bGUgdG8gYnVybiB0b2tlbiB3aGlsZSBjcmVhdGluZyBhIG5ldyBkZXBvc2l0LgogICAgLy8vQGRldiBhIHN1YnNjcmlwdGlvbiBtb2R1bGUgaXMgcmVzcG9uc2libGUgdG8gY3JlYXRlIGFuZCBtYWludGFpbiB0aGUgZGVwb3NpdCByZWNvcmQuCiAgICBmdW5jdGlvbiBfYnVybkZvckRlcG9zaXQoYWRkcmVzcyBvd25lciwgdWludCBhbW91bnQpCiAgICBwdWJsaWMKICAgIG9ubHlUcnVzdGVkCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbb3duZXJdID49IGFtb3VudCkgewogICAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gLT0gYW1vdW50OwogICAgICAgICAgICB0b3RhbE9uRGVwb3NpdCArPSBhbW91bnQ7CiAgICAgICAgICAgIHRvdGFsSW5DaXJjdWxhdGlvbiAtPSBhbW91bnQ7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIC8vPT09PT09PT09IENyb3dkc2FsZSBPbmx5ID09PT09PT09PT09PT09PQogICAgLy8vQG5vdGljZSBtaW50IG5ldyB0b2tlbiBmb3IgZ2l2ZW4gYWNjb3VudCBpbiBjcm93ZHNhbGUgc3RhZ2UKICAgIC8vL0BkZXYgYWxsb3dlZCBvbmx5IGlmIHRva2VuIG5vdCBzdGFydGVkIHlldCBhbmQgb25seSBmb3IgcmVnaXN0ZXJlZCBtaW50ZXIuCiAgICAvLy9AZGV2IHRva2VucyBhcmUgYmVjb21lIGluIGNpcmN1bGF0aW9uIGFmdGVyIHRva2VuIHN0YXJ0LgogICAgZnVuY3Rpb24gbWludCh1aW50IGFtb3VudCwgYWRkcmVzcyBhY2NvdW50KQogICAgb25seUNyb3dkc2FsZU1pbnRlcgogICAgaXNOb3RTdGFydGVkT25seQogICAgewogICAgICAgIHRvdGFsU3VwcGx5ICs9IGFtb3VudDsKICAgICAgICBiYWxhbmNlc1thY2NvdW50XSs9YW1vdW50OwogICAgfQoKICAgIC8vL0Bub3RpY2Ugc3RhcnQgbm9ybWFsIG9wZXJhdGlvbiBvZiB0aGUgdG9rZW4uIE5vIG1pbnRpbmcgaXMgcG9zc2libGUgYWZ0ZXIgdGhpcyBwb2ludC4KICAgIGZ1bmN0aW9uIHN0YXJ0KCkKICAgIGlzTm90U3RhcnRlZE9ubHkKICAgIG9ubHkob3duZXIpIHsKICAgICAgICB0b3RhbEluQ2lyY3VsYXRpb24gPSB0b3RhbFN1cHBseTsKICAgICAgICBpc1N0YXJ0ZWQgPSB0cnVlOwogICAgfQoKICAgIC8vPT09PT09PT09IFNFQ1RJT046IE1vZGlmaWVyID09PT09PT09PT09PT09PQoKICAgIG1vZGlmaWVyIG9ubHlDcm93ZHNhbGVNaW50ZXIoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gQ1JPV0RTQUxFX01JTlRFUikgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5VHJ1c3RlZCgpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBTVUJTQ1JJUFRJT05fTU9EVUxFKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIC8vL0BkZXYgdG9rZW4gbm90IHN0YXJ0ZWQgbWVhbnMgbWludGluZyBpcyBwb3NzaWJsZSwgYnV0IHVzdWFsIHRva2VuIG9wZXJhdGlvbnMgYXJlIG5vdC4KICAgIG1vZGlmaWVyIGlzTm90U3RhcnRlZE9ubHkoKSB7CiAgICAgICAgaWYgKGlzU3RhcnRlZCkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICBlbnVtIFBheW1lbnRTdGF0dXMge09LLCBCQUxBTkNFX0VSUk9SLCBBUFBST1ZBTF9FUlJPUn0KICAgIC8vL0Bub3RpY2UgZXZlbnQgaXNzdWVkIG9uIGFueSBmZWUgYmFzZWQgcGF5bWVudCAobWFkZSBvZiBmYWlsZWQpLgogICAgLy8vQHBhcmFtIHN1YklkIC0gcmVsYXRlZCBzdWJzY3JpcHRpb24gSWQgaWYgYW55LCBvciB6ZXJvIG90aGVyd2lzZS4KICAgIGV2ZW50IFBheW1lbnQoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCB1aW50IF9mZWUsIGFkZHJlc3MgY2FsbGVyLCBQYXltZW50U3RhdHVzIHN0YXR1cywgdWludCBzdWJJZCk7Cgp9Ly9jb250cmFjdCBTQU4='.
	

]
