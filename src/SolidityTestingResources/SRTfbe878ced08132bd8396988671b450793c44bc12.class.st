Class {
	#name : #SRTfbe878ced08132bd8396988671b450793c44bc12,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfbe878ced08132bd8396988671b450793c44bc12 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmIChhID09IDApIHsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuIAogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBNb2RpZmllciBhdm9pZHMgc2hvcnQgYWRkcmVzcyBhdHRhY2tzLgogICogRm9yIG1vcmUgaW5mbyBjaGVjazogaHR0cHM6Ly9lcmljcmFmYWxvZmYuY29tL2FuYWx5emluZy10aGUtZXJjMjAtc2hvcnQtYWRkcmVzcy1hdHRhY2svCiAgKi8KICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgIGlmIChtc2cuZGF0YS5sZW5ndGggPCBzaXplICsgNCkgewogICAgICByZXZlcnQoKTsKICAgICAgfQogICAgICBfOwogIH0KCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgb25seVBheWxvYWRTaXplKDIgKiAzMikgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CiAgICAKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGVtaXQgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgb25seVBheWxvYWRTaXplKDMgKiAzMikgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICByZXF1aXJlKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgZW1pdCBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIGVtaXQgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CiAgCiAgLyoqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwgCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICovCiAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgZW1pdCBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgfSBlbHNlIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICB9CiAgICBlbWl0IEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBpbnRlcm5hbCB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBlbWl0IE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgUGF1c2FibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgogKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSAgewogICAgZXZlbnQgUGF1c2UoKTsKICAgIGV2ZW50IFVucGF1c2UoKTsKICAgIGV2ZW50IEZyZWV6ZSAoKTsKICAgIGV2ZW50IExvZ0ZyZWV6ZSgpOwoKICAgIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKICAgIGFkZHJlc3MgcHVibGljIGZvdW5kZXI7CiAgICAKICAgIC8qKgogICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBwYXVzZWQKICAgICovCiAgICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgICAgIHJlcXVpcmUoIXBhdXNlZCB8fCBtc2cuc2VuZGVyID09IGZvdW5kZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgbW9kaWZpZXIgdG8gYWxsb3cgYWN0aW9ucyBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IElTIE5PVCBwYXVzZWQKICAgICovCiAgICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgICAgIHJlcXVpcmUocGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgICovCiAgICBmdW5jdGlvbiBwYXVzZSgpIHB1YmxpYyBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCB7CiAgICAgICAgcGF1c2VkID0gdHJ1ZTsKICAgICAgICBlbWl0IFBhdXNlKCk7CiAgICB9CiAgICAKCiAgICAvKioKICAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICAqLwogICAgZnVuY3Rpb24gdW5wYXVzZSgpIHB1YmxpYyBvbmx5T3duZXIgd2hlblBhdXNlZCB7CiAgICAgICAgcGF1c2VkID0gZmFsc2U7CiAgICAgICAgZW1pdCBVbnBhdXNlKCk7CiAgICB9Cn0KCmNvbnRyYWN0IFBhdXNhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgUGF1c2FibGUgewoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICAvL1RoZSBmdW5jdGlvbnMgYmVsb3cgc3VydmUgbm8gcmVhbCBwdXJwb3NlLiBFdmVuIGlmIG9uZSB3ZXJlIHRvIGFwcHJvdmUgYW5vdGhlciB0byBzcGVuZAogIC8vdG9rZW5zIG9uIHRoZWlyIGJlaGFsZiwgdGhvc2UgdG9rZW5zIHdpbGwgc3RpbGwgb25seSBiZSB0cmFuc2ZlcmFibGUgd2hlbiB0aGUgdG9rZW4gY29udHJhY3QKICAvL2lzIG5vdCBwYXVzZWQuCgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBzdXBlci5hcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHJldHVybiBzdXBlci5pbmNyZWFzZUFwcHJvdmFsKF9zcGVuZGVyLCBfYWRkZWRWYWx1ZSk7CiAgfQoKICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXR1cm4gc3VwZXIuZGVjcmVhc2VBcHByb3ZhbChfc3BlbmRlciwgX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgfQp9Cgpjb250cmFjdCBNaW50YWJsZVRva2VuIGlzIFBhdXNhYmxlVG9rZW4gewogIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CiAgZXZlbnQgTWludEZpbmlzaGVkKCk7CgogIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKCiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIGNhbk1pbnQgcmV0dXJucyAoYm9vbCkgewogICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CiAgICBlbWl0IE1pbnQoX3RvLCBfYW1vdW50KTsKICAgIGVtaXQgVHJhbnNmZXIoYWRkcmVzcygwKSwgX3RvLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIHB1YmxpYyBvbmx5T3duZXIgY2FuTWludCByZXR1cm5zIChib29sKSB7CiAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgZW1pdCBNaW50RmluaXNoZWQoKTsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKY29udHJhY3QgRm94VHJhZGluZ1Rva2VuIGlzIE1pbnRhYmxlVG9rZW4gewoKICBzdHJpbmcgcHVibGljIG5hbWU7CiAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgdWludDggcHVibGljIGRlY2ltYWxzOwoKICBldmVudCBUb2tlbnNCdXJuZWQoYWRkcmVzcyBpbml0aWF0aW9yLCBhZGRyZXNzIGluZGV4ZWQgX3BhcnRuZXIsIHVpbnQyNTYgX3Rva2Vucyk7CiAKCiAgLyoqCiAgICogQGRldiBDb25zdHJ1Y3RvciB0aGF0IGdpdmVzIHRoZSBmb3VuZGVyIGFsbCBvZiB0aGUgZXhpc3RpbmcgdG9rZW5zLgogICAqLwogICAgZnVuY3Rpb24gRm94VHJhZGluZ1Rva2VuKCkgcHVibGljIHsKICAgICAgICBuYW1lID0gIkZveCBUcmFkaW5nIjsKICAgICAgICBzeW1ib2wgPSAiRk9YVCI7CiAgICAgICAgZGVjaW1hbHMgPSAxODsKICAgICAgICB0b3RhbFN1cHBseSA9IDMwMDAwMDBlMTg7CiAgICAgICAgZm91bmRlciA9IDB4Njk4ODI1ZDBDZmVlRDZGNjVFOTgxRkZCNTQzZWY1MTk2QTVDMkE1QTsKICAgICAgICBiYWxhbmNlc1tmb3VuZGVyXSA9IHRvdGFsU3VwcGx5OwogICAgICAgIGVtaXQgVHJhbnNmZXIoMHgwLCBmb3VuZGVyLCB0b3RhbFN1cHBseSk7CiAgICAgICAgcGF1c2UoKTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Rm91bmRlciB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBmb3VuZGVyKTsKICAgICAgXzsKICAgIH0KCiAgICBldmVudCBOZXdGb3VuZGVyQWRkcmVzcyhhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvKTsKCiAgICBmdW5jdGlvbiBjaGFuZ2VGb3VuZGVyQWRkcmVzcyhhZGRyZXNzIF9uZXdGb3VuZGVyKSBwdWJsaWMgb25seUZvdW5kZXIgewogICAgICAgIHJlcXVpcmUoX25ld0ZvdW5kZXIgIT0gMHgwKTsKICAgICAgICBlbWl0IE5ld0ZvdW5kZXJBZGRyZXNzKGZvdW5kZXIsIF9uZXdGb3VuZGVyKTsKICAgICAgICBmb3VuZGVyID0gX25ld0ZvdW5kZXI7CiAgICB9CgogICAgLyoKICAgICogQGRldiBUb2tlbiBidXJuIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBhdCB0aGUgdGltZSBvZiB0b2tlbiBzd2FwCiAgICAqIEBwYXJhbSBfcGFydG5lciBhZGRyZXNzIHRvIHVzZSBmb3IgdG9rZW4gYmFsYW5jZSBidXJpbmcKICAgICogQHBhcmFtIF90b2tlbnMgdWludDI1NiBhbW91bnQgb2YgdG9rZW5zIHRvIGJ1cm4KICAgICovCiAgICBmdW5jdGlvbiBidXJuVG9rZW5zKGFkZHJlc3MgX3BhcnRuZXIsIHVpbnQyNTYgX3Rva2VucykgcHVibGljIG9ubHlGb3VuZGVyIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW19wYXJ0bmVyXSA+PSBfdG9rZW5zKTsKICAgICAgICBiYWxhbmNlc1tfcGFydG5lcl0gPSBiYWxhbmNlc1tfcGFydG5lcl0uc3ViKF90b2tlbnMpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF90b2tlbnMpOwogICAgICAgIGVtaXQgVG9rZW5zQnVybmVkKG1zZy5zZW5kZXIsIF9wYXJ0bmVyLCBfdG9rZW5zKTsKICAgIH0KfQoKCmNvbnRyYWN0IENyb3dkc2FsZSBpcyBPd25hYmxlIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBGb3hUcmFkaW5nVG9rZW4gcHVibGljIHRva2VuOwoKICAgIHVpbnQyNTYgcHVibGljIHRva2VuQ2FwRm9yRmlyc3RNYWluU3RhZ2U7CiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbkNhcEZvclNlY29uZE1haW5TdGFnZTsKICAgIHVpbnQyNTYgcHVibGljIHRva2VuQ2FwRm9yVGhpcmRNYWluU3RhZ2U7CiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbkNhcEZvckZvdXJ0aE1haW5TdGFnZTsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsVG9rZW5zRm9yU2FsZTsKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZTsKICAgIHVpbnQyNTYgcHVibGljIGVuZFRpbWU7CiAgICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CiAgICB1aW50MjU2IHB1YmxpYyByYXRlOwogICAgdWludDI1NiBwdWJsaWMgd2VpUmFpc2VkOwogICAgYm9vbCBwdWJsaWMgSUNPcGF1c2VkOwoKICAgIHVpbnQyNTZbNF0gcHVibGljIElDT2JvbnVzU3RhZ2VzOwoKICAgIHVpbnQyNTYgcHVibGljIHRva2Vuc1NvbGQ7CgogICAgLyoqCiAgICAqIGV2ZW50IGZvciB0b2tlbiBwdXJjaGFzZSBsb2dnaW5nCiAgICAqIEBwYXJhbSBwdXJjaGFzZXIgd2hvIHBhaWQgZm9yIHRoZSB0b2tlbnMKICAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IHdobyBnb3QgdGhlIHRva2VucwogICAgKiBAcGFyYW0gdmFsdWUgd2VpcyBwYWlkIGZvciBwdXJjaGFzZQogICAgKiBAcGFyYW0gYW1vdW50IGFtb3VudCBvZiB0b2tlbnMgcHVyY2hhc2VkCiAgICAqLwogICAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKICAgIGV2ZW50IElDT1NhbGVFeHRlbmRlZCh1aW50MjU2IG5ld0VuZFRpbWUpOwoKICAgIGZ1bmN0aW9uIENyb3dkc2FsZSgpIHB1YmxpYyB7CiAgICAgICAgdG9rZW4gPSBuZXcgRm94VHJhZGluZ1Rva2VuKCk7ICAKICAgICAgICBzdGFydFRpbWUgPSBub3c7IAogICAgICAgIHJhdGUgPSAxMjAwOwogICAgICAgIHdhbGxldCA9IDB4Njk4ODI1ZDBDZmVlRDZGNjVFOTgxRkZCNTQzZWY1MTk2QTVDMkE1QTsKICAgICAgICB0b3RhbFRva2Vuc0ZvclNhbGUgPSA2MjAwMDAwZTE4OwogICAgICAgIHRva2Vuc1NvbGQgPSAwOwoKICAgICAgICB0b2tlbkNhcEZvckZpcnN0TWFpblN0YWdlID0gMTAwMDAwMGUxODsKICAgICAgICB0b2tlbkNhcEZvclNlY29uZE1haW5TdGFnZSA9IDIwMDAwMDBlMTg7ICAKICAgICAgICB0b2tlbkNhcEZvclRoaXJkTWFpblN0YWdlID0gMzAwMDAwMGUxODsgIAogICAgICAgIHRva2VuQ2FwRm9yRm91cnRoTWFpblN0YWdlID0gNjIwMDAwMGUxODsgCiAgICAKICAgICAgICBJQ09ib251c1N0YWdlc1swXSA9IG5vdy5hZGQoNyBkYXlzKTsKICAgICAgICBmb3IgKHVpbnQgeSA9IDE7IHkgPCBJQ09ib251c1N0YWdlcy5sZW5ndGg7IHkrKykgewogICAgICAgICAgICBJQ09ib251c1N0YWdlc1t5XSA9IElDT2JvbnVzU3RhZ2VzW3kgLSAxXS5hZGQoNyBkYXlzKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZW5kVGltZSA9IElDT2JvbnVzU3RhZ2VzWzNdOwogICAgICAgIAogICAgICAgIElDT3BhdXNlZCA9IGZhbHNlOwogICAgfQogICAgCiAgICBtb2RpZmllciB3aGVuTm90UGF1c2VkIHsKICAgICAgICByZXF1aXJlKCFJQ09wYXVzZWQpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24oKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBwYXlhYmxlIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIHJlcXVpcmUodmFsaWRQdXJjaGFzZSgpICYmIHRva2Vuc1NvbGQgPCB0b3RhbFRva2Vuc0ZvclNhbGUpOwogICAgICAgIHJlcXVpcmUoX2FkZHIgIT0gMHgwICYmIG1zZy52YWx1ZSA+PSAxMDAgZmlubmV5KTsgIAogICAgICAgIHVpbnQyNTYgdG9NaW50OwogICAgICAgIHRvTWludCA9IG1zZy52YWx1ZS5tdWwoZ2V0UmF0ZVdpdGhCb251cygpKTsKICAgICAgICB0b2tlbnNTb2xkID0gdG9rZW5zU29sZC5hZGQodG9NaW50KTsKICAgICAgICB0b2tlbi5taW50KF9hZGRyLCB0b01pbnQpOwogICAgICAgIGZvcndhcmRGdW5kcygpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZvcndhcmRGdW5kcygpIGludGVybmFsIHsKICAgICAgICB3YWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcm9jZXNzT2ZmbGluZVB1cmNoYXNlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b01pbnQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUodG9rZW5zU29sZC5hZGQoX3RvTWludCkgPD0gdG90YWxUb2tlbnNGb3JTYWxlKTsKICAgICAgICByZXF1aXJlKF90b01pbnQgPiAwICYmIF90byAhPSAweDApOwogICAgICAgIHRva2Vuc1NvbGQgPSB0b2tlbnNTb2xkLmFkZChfdG9NaW50KTsKICAgICAgICB0b2tlbi5taW50KF90bywgX3RvTWludCk7CiAgICB9CiAgICAKICAgIAogICAgLyoqCiAgICAgKiBAcGFyYW0gX2FkZHJzIFRoZSBhcnJheSBvZiBFVEggYWRkcmVzc2VzCiAgICAgKiBAcGFyYW0gX3ZhbHVlcyBUaGUgYW1vdW50IG9mIHRva2VucyB0byBzZW5kIHRvIGVhY2ggYWRkcmVzcwogICAgICogKi8KICAgIGZ1bmN0aW9uIGFpckRyb3AoYWRkcmVzc1tdIF9hZGRycywgdWludDI1NltdIF92YWx1ZXMpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIC8vcmVxdWlyZShfYWRkcnMubGVuZ3RoID4gMCk7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX2FkZHJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChfYWRkcnNbaV0gIT0gMHgwICYmIF92YWx1ZXNbaV0gPiAwKSB7CiAgICAgICAgICAgICAgICB0b2tlbi5taW50KF9hZGRyc1tpXSwgX3ZhbHVlc1tpXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgoKICAgIGZ1bmN0aW9uIHZhbGlkUHVyY2hhc2UoKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBib29sIHdpdGhpblBlcmlvZCA9IG5vdyA+PSBzdGFydFRpbWUgJiYgbm93IDw9IGVuZFRpbWU7IAogICAgICAgIGJvb2wgbm9uWmVyb1B1cmNoYXNlID0gbXNnLnZhbHVlICE9IDA7IAogICAgICAgIHJldHVybiB3aXRoaW5QZXJpb2QgJiYgbm9uWmVyb1B1cmNoYXNlOwogICAgfQoKICAgIAogICAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHRva2VuLmZpbmlzaE1pbnRpbmcoKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0UmF0ZVdpdGhCb251cygpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiByYXRlV2l0aERpc2NvdW50KSB7CiAgICAgICAgaWYgKHRva2Vuc1NvbGQgPCB0b3RhbFRva2Vuc0ZvclNhbGUpIHsKICAgICAgICAgICAgcmV0dXJuIHJhdGUubXVsKGdldEN1cnJlbnRCb251cygpKS5kaXYoMTAwKS5hZGQocmF0ZSk7CiAgICAgICAgICAgIHJldHVybiByYXRlV2l0aERpc2NvdW50OwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmF0ZTsKICAgIH0KCiAgICAvKioKICAgICogRnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gdGhlIGJ1eSBmdW5jdGlvbiBpcyBpbnZva2VkICBvbmx5IGFmdGVyIHRoZSBwcmUgc2FsZSBkdXJhdGlvbiBhbmQgcmV0dXJucyAKICAgICogdGhlIGN1cnJlbnQgZGlzY291bnQgaW4gcGVyY2VudGFnZS4KICAgICoKICAgICogZGF5IDMxIC0gMzcgICAvIHdlZWsgMTogMjAlCiAgICAqIGRheSAzOCAtIDQ0ICAgLyB3ZWVrIDI6IDE1JQogICAgKiBkYXkgNDUgLSA1MSAgIC8gd2VlayAzOiAxMCUKICAgICogZGF5IDUyIC0gNTggICAvIHdlZWsgNDogIDAlCiAgICAqLwogICAgZnVuY3Rpb24gZ2V0Q3VycmVudEJvbnVzKCkgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2IGRpc2NvdW50KSB7CiAgICAgICAgcmVxdWlyZSh0b2tlbnNTb2xkIDwgdG9rZW5DYXBGb3JGb3VydGhNYWluU3RhZ2UpOwogICAgICAgIHVpbnQyNTYgdGltZVN0YW1wID0gbm93OwogICAgICAgIHVpbnQyNTYgc3RhZ2U7CgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IElDT2JvbnVzU3RhZ2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICh0aW1lU3RhbXAgPD0gSUNPYm9udXNTdGFnZXNbaV0pIHsKICAgICAgICAgICAgICAgIHN0YWdlID0gaSArIDE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfSAKICAgICAgICB9IAoKICAgICAgICBpZihzdGFnZSA9PSAxICYmIHRva2Vuc1NvbGQgPCB0b2tlbkNhcEZvckZpcnN0TWFpblN0YWdlKSB7IGRpc2NvdW50ID0gMjA7IH0KICAgICAgICBpZihzdGFnZSA9PSAxICYmIHRva2Vuc1NvbGQgPj0gdG9rZW5DYXBGb3JGaXJzdE1haW5TdGFnZSkgeyBkaXNjb3VudCA9IDE1OyB9CiAgICAgICAgaWYoc3RhZ2UgPT0gMSAmJiB0b2tlbnNTb2xkID49IHRva2VuQ2FwRm9yU2Vjb25kTWFpblN0YWdlKSB7IGRpc2NvdW50ID0gMTA7IH0KICAgICAgICBpZihzdGFnZSA9PSAxICYmIHRva2Vuc1NvbGQgPj0gdG9rZW5DYXBGb3JUaGlyZE1haW5TdGFnZSkgeyBkaXNjb3VudCA9IDA7IH0KCiAgICAgICAgaWYoc3RhZ2UgPT0gMiAmJiB0b2tlbnNTb2xkIDwgdG9rZW5DYXBGb3JTZWNvbmRNYWluU3RhZ2UpIHsgZGlzY291bnQgPSAxNTsgfQogICAgICAgIGlmKHN0YWdlID09IDIgJiYgdG9rZW5zU29sZCA+PSB0b2tlbkNhcEZvclNlY29uZE1haW5TdGFnZSkgeyBkaXNjb3VudCA9IDEwOyB9CiAgICAgICAgaWYoc3RhZ2UgPT0gMiAmJiB0b2tlbnNTb2xkID49IHRva2VuQ2FwRm9yVGhpcmRNYWluU3RhZ2UpIHsgZGlzY291bnQgPSAwOyB9CgogICAgICAgIGlmKHN0YWdlID09IDMgJiYgdG9rZW5zU29sZCA8IHRva2VuQ2FwRm9yVGhpcmRNYWluU3RhZ2UpIHsgZGlzY291bnQgPSAxMDsgfQogICAgICAgIGlmKHN0YWdlID09IDMgJiYgdG9rZW5zU29sZCA+PSB0b2tlbkNhcEZvclRoaXJkTWFpblN0YWdlKSB7IGRpc2NvdW50ID0gMDsgfQoKICAgICAgICBpZihzdGFnZSA9PSA0KSB7IGRpc2NvdW50ID0gMDsgfQoKICAgICAgICByZXR1cm4gZGlzY291bnQ7CiAgICB9CgoKCiAgICBmdW5jdGlvbiBleHRlbmREdXJhdGlvbih1aW50MjU2IF9uZXdFbmRUaW1lKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGVuZFRpbWUgPCBfbmV3RW5kVGltZSk7CiAgICAgICAgZW5kVGltZSA9IF9uZXdFbmRUaW1lOwogICAgICAgIGVtaXQgSUNPU2FsZUV4dGVuZGVkKF9uZXdFbmRUaW1lKTsKICAgIH0KCgogICAgZnVuY3Rpb24gaGFzRW5kZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7IAogICAgICAgIHJldHVybiBub3cgPiBlbmRUaW1lOwogICAgfQoKICAgIC8qKgogICAgKiBBbGxvd3MgdGhlIG93bmVyIG9mIHRoZSBJQ08gY29udHJhY3QgdG8gdW5wYXVzZSB0aGUgdG9rZW4gY29udHJhY3QuIFRoaXMgZnVuY3Rpb24gaXMgbmVlZGVkCiAgICAqIGJlY2F1c2UgdGhlIElDTyBjb250cmFjdCBkZXBsb3lzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSB0b2tlbiBjb250cmFjdCwgYW5kIGJ5IGRlZmF1bHQgdGhlIAogICAgKiBFVEggYWRkcmVzcyB3aGljaCBkZXBsb3lzIGEgY29udHJhY3Qgd2hpY2ggaXMgT3duYWJsZSBpcyBhc3NpZ25lZCBvd25lcnNoaXAgb2YgdGhlIGNvbnRyYWN0LAogICAgKiBzbyB0aGUgSUNPIGNvbnRyYWN0IGlzIHRoZSBvd25lciBvZiB0aGUgdG9rZW4gY29udHJhY3QuIFNpbmNlIHVucGF1c2UgaXMgYSBmdW5jdGlvbiB3aGljaCBjYW4KICAgICogb25seSBiZSBleGVjdXRlZCBieSB0aGUgb3duZXIsIGJ5IGFkZGluZyB0aGlzIGZ1bmN0aW9uIGhlcmUsIHRoZW4gdGhlIG93bmVyIG9mIHRoZSBJQ08gY29udHJhY3QKICAgICogY2FuIGNhbGwgdGhpcyBhbmQgdGhlbiB0aGUgSUNPIGNvbnRyYWN0IHdpbGwgaW52b2tlIHRoZSB1bnBhdXNlIGZ1bmN0aW9uIG9mIHRoZSB0b2tlbiBjb250cmFjdAogICAgKiBhbmQgdGh1cyB0aGUgdG9rZW4gY29udHJhY3Qgd2lsbCBzdWNjZXNzZnVsbHkgdW5wYXVzZSBhcyBpdHMgb3duZXIgdGhlIElDTyBjb250cmFjdCBpbnZva2VuZAogICAgKiB0aGUgdGhlIGZ1bmN0aW9uLiAKICAgICovCiAgICBmdW5jdGlvbiB1bnBhdXNlVG9rZW4oKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB0b2tlbi51bnBhdXNlKCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHBhdXNlVW5wYXVzZUlDTygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGlmIChJQ09wYXVzZWQpIHsKICAgICAgICAgICAgSUNPcGF1c2VkID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgSUNPcGF1c2VkID0gdHJ1ZTsKICAgICAgICB9CiAgICB9Cn0='.
	

]
