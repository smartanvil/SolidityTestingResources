Class {
	#name : #SRT1c02ce498dc6d0d6ef05a253e021258b07eeba91,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1c02ce498dc6d0d6ef05a253e021258b07eeba91 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CiAgICBjb250cmFjdCBFc2Nyb3dNeUV0aGVyICB7CiAgICAgICAgCiAgICAgICAgLy9BdXRob3I6IENoZXVuZyBLYSBZaW4KICAgICAgICAvL0RhdGU6IDI3IFNlcHRlbWJlciAyMDE3CiAgICAgICAgLy9WZXJzaW9uOiBFc2Nyb3dNeUV0aGVyIHYxLjAgTWFpbk5ldAogICAgICAgIAogICAgICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgICAgIAogICAgICAgIC8vRWFjaCBidXllciBhZGRyZXNzIGNvbnNpc3Qgb2YgYW4gYXJyYXkgb2YgRXNjcm93U3RydWN0CiAgICAgICAgLy9Vc2VkIHRvIHN0b3JlIGJ1eWVyJ3MgdHJhbnNhY3Rpb25zIGFuZCBmb3IgYnV5ZXJzIHRvIGludGVyYWN0IHdpdGggaGlzIHRyYW5zYWN0aW9ucy4gKFN1Y2ggYXMgcmVsZWFzaW5nIGZ1bmRzIHRvIHNlbGxlcikKICAgICAgICBzdHJ1Y3QgRXNjcm93U3RydWN0CiAgICAgICAgeyAgICAKICAgICAgICAgICAgYWRkcmVzcyBidXllcjsgICAgICAgICAgLy9QZXJzb24gd2hvIGlzIG1ha2luZyBwYXltZW50CiAgICAgICAgICAgIGFkZHJlc3Mgc2VsbGVyOyAgICAgICAgIC8vUGVyc29uIHdobyB3aWxsIHJlY2VpdmUgZnVuZHMKICAgICAgICAgICAgYWRkcmVzcyBlc2Nyb3dfYWdlbnQ7ICAgLy9Fc2Nyb3cgYWdlbnQgdG8gcmVzb2x2ZSBkaXNwdXRlcywgaWYgYW55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICB1aW50IGVzY3Jvd19mZWU7ICAgICAgICAvL0ZlZSBjaGFyZ2VkIGJ5IGVzY3JvdwogICAgICAgICAgICB1aW50IGFtb3VudDsgICAgICAgICAgICAvL0Ftb3VudCBvZiBFdGhlciAoaW4gV2VpKSBzZWxsZXIgd2lsbCByZWNlaXZlIGFmdGVyIGZlZXMKCiAgICAgICAgICAgIGJvb2wgZXNjcm93X2ludGVydmVudGlvbjsgLy9CdXllciBvciBTZWxsZXIgY2FuIGNhbGwgZm9yIEVzY3JvdyBpbnRlcnZlbnRpb24KICAgICAgICAgICAgYm9vbCByZWxlYXNlX2FwcHJvdmFsOyAgIC8vQnV5ZXIgb3IgRXNjcm93KGlmIGVzY3Jvd19pbnRlcnZlbnRpb24gaXMgdHJ1ZSkgY2FuIGFwcHJvdmUgcmVsZWFzZSBvZiBmdW5kcyB0byBzZWxsZXIKICAgICAgICAgICAgYm9vbCByZWZ1bmRfYXBwcm92YWw7ICAgIC8vU2VsbGVyIG9yIEVzY3JvdyhpZiBlc2Nyb3dfaW50ZXJ2ZW50aW9uIGlzIHRydWUpIGNhbiBhcHByb3ZlIHJlZnVuZCBvZiBmdW5kcyB0byBidXllciAKCiAgICAgICAgICAgIGJ5dGVzMzIgbm90ZXM7ICAgICAgICAgICAgIC8vTm90ZXMgZm9yIFNlbGxlcgogICAgICAgICAgICAKICAgICAgICB9CgogICAgICAgIHN0cnVjdCBUcmFuc2FjdGlvblN0cnVjdAogICAgICAgIHsgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgLy9MaW5rcyB0byB0cmFuc2FjdGlvbiBmcm9tIGJ1eWVyCiAgICAgICAgICAgIGFkZHJlc3MgYnV5ZXI7ICAgICAgICAgIC8vUGVyc29uIHdobyBpcyBtYWtpbmcgcGF5bWVudAogICAgICAgICAgICB1aW50IGJ1eWVyX25vdW5jZTsgICAgICAgICAvL05vdW5jZSBvZiBidXllciB0cmFuc2FjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICB9CgoKICAgICAgICAKICAgICAgICAvL0RhdGFiYXNlIG9mIEJ1eWVycy4gRWFjaCBidXllciB0aGVuIGNvbnRhaW4gYW4gYXJyYXkgb2YgaGlzIHRyYW5zYWN0aW9ucwogICAgICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBFc2Nyb3dTdHJ1Y3RbXSkgcHVibGljIGJ1eWVyRGF0YWJhc2U7CgogICAgICAgIC8vRGF0YWJhc2Ugb2YgU2VsbGVyIGFuZCBFc2Nyb3cgQWdlbnQKICAgICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gVHJhbnNhY3Rpb25TdHJ1Y3RbXSkgcHVibGljIHNlbGxlckRhdGFiYXNlOyAgICAgICAgCiAgICAgICAgbWFwcGluZyhhZGRyZXNzID0+IFRyYW5zYWN0aW9uU3RydWN0W10pIHB1YmxpYyBlc2Nyb3dEYXRhYmFzZTsKICAgICAgICAgICAgICAgCiAgICAgICAgLy9FdmVyeSBhZGRyZXNzIGhhdmUgYSBGdW5kcyBiYW5rLiBBbGwgcmVmdW5kcywgc2FsZXMgYW5kIGVzY3JvdyBjb21pc3Npb25zIGFyZSBzZW50IHRvIHRoaXMgYmFuay4gQWRkcmVzcyBvd25lciBjYW4gd2l0aGRyYXcgdGhlbSBhdCBhbnkgdGltZS4KICAgICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIEZ1bmRzOwoKICAgICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGVzY3Jvd0ZlZTsKCgoKICAgICAgICAvL1J1biBvbmNlIHRoZSBtb21lbnQgY29udHJhY3QgaXMgY3JlYXRlZC4gU2V0IGNvbnRyYWN0IGNyZWF0b3IKICAgICAgICBmdW5jdGlvbiBFc2Nyb3dNeUV0aGVyKCkgewogICAgICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbigpIHBheWFibGUKICAgICAgICB7CiAgICAgICAgICAgIC8vTG9nRnVuZHNSZWNlaXZlZChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2V0RXNjcm93RmVlKHVpbnQgZmVlKSB7CgogICAgICAgICAgICAvL0FsbG93ZWQgZmVlIHJhbmdlOiAwLjElIHRvIDEwJSwgaW4gaW5jcmVtZW50cyBvZiAwLjElCiAgICAgICAgICAgIHJlcXVpcmUgKGZlZSA+PSAxICYmIGZlZSA8PSAxMDApOwogICAgICAgICAgICBlc2Nyb3dGZWVbbXNnLnNlbmRlcl0gPSBmZWU7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRFc2Nyb3dGZWUoYWRkcmVzcyBlc2Nyb3dBZGRyZXNzKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgICAgIHJldHVybiAoZXNjcm93RmVlW2VzY3Jvd0FkZHJlc3NdKTsKICAgICAgICB9CgogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIG5ld0VzY3JvdyhhZGRyZXNzIHNlbGxlckFkZHJlc3MsIGFkZHJlc3MgZXNjcm93QWRkcmVzcywgYnl0ZXMzMiBub3RlcykgcGF5YWJsZSByZXR1cm5zIChib29sKSB7CgogICAgICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDAgJiYgbXNnLnNlbmRlciAhPSBlc2Nyb3dBZGRyZXNzKTsKICAgICAgICAKICAgICAgICAgICAgLy9TdG9yZSBlc2Nyb3cgZGV0YWlscyBpbiBtZW1vcnkKICAgICAgICAgICAgRXNjcm93U3RydWN0IG1lbW9yeSBjdXJyZW50RXNjcm93OwogICAgICAgICAgICBUcmFuc2FjdGlvblN0cnVjdCBtZW1vcnkgY3VycmVudFRyYW5zYWN0aW9uOwogICAgICAgICAgICAKICAgICAgICAgICAgY3VycmVudEVzY3Jvdy5idXllciA9IG1zZy5zZW5kZXI7CiAgICAgICAgICAgIGN1cnJlbnRFc2Nyb3cuc2VsbGVyID0gc2VsbGVyQWRkcmVzczsKICAgICAgICAgICAgY3VycmVudEVzY3Jvdy5lc2Nyb3dfYWdlbnQgPSBlc2Nyb3dBZGRyZXNzOwoKICAgICAgICAgICAgLy9DYWxjdWxhdGVzIGFuZCBzdG9yZXMgRXNjcm93IEZlZS4KICAgICAgICAgICAgY3VycmVudEVzY3Jvdy5lc2Nyb3dfZmVlID0gZ2V0RXNjcm93RmVlKGVzY3Jvd0FkZHJlc3MpKm1zZy52YWx1ZS8xMDAwOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8wLjI1JSBkZXYgZmVlCiAgICAgICAgICAgIHVpbnQgZGV2X2ZlZSA9IG1zZy52YWx1ZS80MDA7CiAgICAgICAgICAgIEZ1bmRzW293bmVyXSArPSBkZXZfZmVlOyAgIAoKICAgICAgICAgICAgLy9BbW91bnQgc2VsbGVyIHJlY2VpdmVzID0gVG90YWwgYW1vdW50IC0gMC4yNSUgZGV2IGZlZSAtIEVzY3JvdyBGZWUKICAgICAgICAgICAgY3VycmVudEVzY3Jvdy5hbW91bnQgPSBtc2cudmFsdWUgLSBkZXZfZmVlIC0gY3VycmVudEVzY3Jvdy5lc2Nyb3dfZmVlOwoKICAgICAgICAgICAgLy9UaGVzZSBkZWZhdWx0IHRvIGZhbHNlLCBubyBuZWVkIHRvIHNldCB0aGVtIGFnYWluCiAgICAgICAgICAgIC8qY3VycmVudEVzY3Jvdy5lc2Nyb3dfaW50ZXJ2ZW50aW9uID0gZmFsc2U7CiAgICAgICAgICAgIGN1cnJlbnRFc2Nyb3cucmVsZWFzZV9hcHByb3ZhbCA9IGZhbHNlOwogICAgICAgICAgICBjdXJyZW50RXNjcm93LnJlZnVuZF9hcHByb3ZhbCA9IGZhbHNlOyAgKi8gCiAgICAgICAgICAgIAogICAgICAgICAgICBjdXJyZW50RXNjcm93Lm5vdGVzID0gbm90ZXM7CiAKICAgICAgICAgICAgLy9MaW5rcyB0aGlzIHRyYW5zYWN0aW9uIHRvIFNlbGxlciBhbmQgRXNjcm93J3MgbGlzdCBvZiB0cmFuc2FjdGlvbnMuCiAgICAgICAgICAgIGN1cnJlbnRUcmFuc2FjdGlvbi5idXllciA9IG1zZy5zZW5kZXI7CiAgICAgICAgICAgIGN1cnJlbnRUcmFuc2FjdGlvbi5idXllcl9ub3VuY2UgPSBidXllckRhdGFiYXNlW21zZy5zZW5kZXJdLmxlbmd0aDsKCiAgICAgICAgICAgIHNlbGxlckRhdGFiYXNlW3NlbGxlckFkZHJlc3NdLnB1c2goY3VycmVudFRyYW5zYWN0aW9uKTsKICAgICAgICAgICAgZXNjcm93RGF0YWJhc2VbZXNjcm93QWRkcmVzc10ucHVzaChjdXJyZW50VHJhbnNhY3Rpb24pOwogICAgICAgICAgICBidXllckRhdGFiYXNlW21zZy5zZW5kZXJdLnB1c2goY3VycmVudEVzY3Jvdyk7CiAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgfQoKICAgICAgICAvL3N3aXRjaGVyIDAgZm9yIEJ1eWVyLCAxIGZvciBTZWxsZXIsIDIgZm9yIEVzY3JvdwogICAgICAgIGZ1bmN0aW9uIGdldE51bVRyYW5zYWN0aW9ucyhhZGRyZXNzIGlucHV0QWRkcmVzcywgdWludCBzd2l0Y2hlcikgY29uc3RhbnQgcmV0dXJucyAodWludCkKICAgICAgICB7CgogICAgICAgICAgICBpZiAoc3dpdGNoZXIgPT0gMCkgcmV0dXJuIChidXllckRhdGFiYXNlW2lucHV0QWRkcmVzc10ubGVuZ3RoKTsKCiAgICAgICAgICAgIGVsc2UgaWYgKHN3aXRjaGVyID09IDEpIHJldHVybiAoc2VsbGVyRGF0YWJhc2VbaW5wdXRBZGRyZXNzXS5sZW5ndGgpOwoKICAgICAgICAgICAgZWxzZSByZXR1cm4gKGVzY3Jvd0RhdGFiYXNlW2lucHV0QWRkcmVzc10ubGVuZ3RoKTsKICAgICAgICB9CgogICAgICAgIC8vc3dpdGNoZXIgMCBmb3IgQnV5ZXIsIDEgZm9yIFNlbGxlciwgMiBmb3IgRXNjcm93CiAgICAgICAgZnVuY3Rpb24gZ2V0U3BlY2lmaWNUcmFuc2FjdGlvbihhZGRyZXNzIGlucHV0QWRkcmVzcywgdWludCBzd2l0Y2hlciwgdWludCBJRCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcywgYWRkcmVzcywgYWRkcmVzcywgdWludCwgYnl0ZXMzMiwgdWludCwgYnl0ZXMzMikKCiAgICAgICAgewogICAgICAgICAgICBieXRlczMyIHN0YXR1czsKICAgICAgICAgICAgRXNjcm93U3RydWN0IG1lbW9yeSBjdXJyZW50RXNjcm93OwogICAgICAgICAgICBpZiAoc3dpdGNoZXIgPT0gMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY3VycmVudEVzY3JvdyA9IGJ1eWVyRGF0YWJhc2VbaW5wdXRBZGRyZXNzXVtJRF07CiAgICAgICAgICAgICAgICBzdGF0dXMgPSBjaGVja1N0YXR1cyhpbnB1dEFkZHJlc3MsIElEKTsKICAgICAgICAgICAgfSAKICAgICAgICAgICAgCiAgICAgICAgICAgIGVsc2UgaWYgKHN3aXRjaGVyID09IDEpCgogICAgICAgICAgICB7ICAKICAgICAgICAgICAgICAgIGN1cnJlbnRFc2Nyb3cgPSBidXllckRhdGFiYXNlW3NlbGxlckRhdGFiYXNlW2lucHV0QWRkcmVzc11bSURdLmJ1eWVyXVtzZWxsZXJEYXRhYmFzZVtpbnB1dEFkZHJlc3NdW0lEXS5idXllcl9ub3VuY2VdOwogICAgICAgICAgICAgICAgc3RhdHVzID0gY2hlY2tTdGF0dXMoY3VycmVudEVzY3Jvdy5idXllciwgc2VsbGVyRGF0YWJhc2VbaW5wdXRBZGRyZXNzXVtJRF0uYnV5ZXJfbm91bmNlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGVsc2UgaWYgKHN3aXRjaGVyID09IDIpCiAgICAgICAgICAgIAogICAgICAgICAgICB7ICAgICAgICAKICAgICAgICAgICAgICAgIGN1cnJlbnRFc2Nyb3cgPSBidXllckRhdGFiYXNlW2VzY3Jvd0RhdGFiYXNlW2lucHV0QWRkcmVzc11bSURdLmJ1eWVyXVtlc2Nyb3dEYXRhYmFzZVtpbnB1dEFkZHJlc3NdW0lEXS5idXllcl9ub3VuY2VdOwogICAgICAgICAgICAgICAgc3RhdHVzID0gY2hlY2tTdGF0dXMoY3VycmVudEVzY3Jvdy5idXllciwgZXNjcm93RGF0YWJhc2VbaW5wdXRBZGRyZXNzXVtJRF0uYnV5ZXJfbm91bmNlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIChjdXJyZW50RXNjcm93LmJ1eWVyLCBjdXJyZW50RXNjcm93LnNlbGxlciwgY3VycmVudEVzY3Jvdy5lc2Nyb3dfYWdlbnQsIGN1cnJlbnRFc2Nyb3cuYW1vdW50LCBzdGF0dXMsIGN1cnJlbnRFc2Nyb3cuZXNjcm93X2ZlZSwgY3VycmVudEVzY3Jvdy5ub3Rlcyk7CiAgICAgICAgfSAgIAoKCiAgICAgICAgZnVuY3Rpb24gYnV5ZXJIaXN0b3J5KGFkZHJlc3MgYnV5ZXJBZGRyZXNzLCB1aW50IHN0YXJ0SUQsIHVpbnQgbnVtVG9Mb2FkKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzW10sIGFkZHJlc3NbXSx1aW50W10sIGJ5dGVzMzJbXSl7CgoKICAgICAgICAgICAgdWludCBsZW5ndGg7CiAgICAgICAgICAgIGlmIChidXllckRhdGFiYXNlW2J1eWVyQWRkcmVzc10ubGVuZ3RoIDwgbnVtVG9Mb2FkKQogICAgICAgICAgICAgICAgbGVuZ3RoID0gYnV5ZXJEYXRhYmFzZVtidXllckFkZHJlc3NdLmxlbmd0aDsKICAgICAgICAgICAgCiAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICBsZW5ndGggPSBudW1Ub0xvYWQ7CiAgICAgICAgICAgIAogICAgICAgICAgICBhZGRyZXNzW10gbWVtb3J5IHNlbGxlcnMgPSBuZXcgYWRkcmVzc1tdKGxlbmd0aCk7CiAgICAgICAgICAgIGFkZHJlc3NbXSBtZW1vcnkgZXNjcm93X2FnZW50cyA9IG5ldyBhZGRyZXNzW10obGVuZ3RoKTsKICAgICAgICAgICAgdWludFtdIG1lbW9yeSBhbW91bnRzID0gbmV3IHVpbnRbXShsZW5ndGgpOwogICAgICAgICAgICBieXRlczMyW10gbWVtb3J5IHN0YXR1c2VzID0gbmV3IGJ5dGVzMzJbXShsZW5ndGgpOwogICAgICAgICAgIAogICAgICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykKICAgICAgICAgICAgewogIAogICAgICAgICAgICAgICAgc2VsbGVyc1tpXSA9IChidXllckRhdGFiYXNlW2J1eWVyQWRkcmVzc11bc3RhcnRJRCArIGldLnNlbGxlcik7CiAgICAgICAgICAgICAgICBlc2Nyb3dfYWdlbnRzW2ldID0gKGJ1eWVyRGF0YWJhc2VbYnV5ZXJBZGRyZXNzXVtzdGFydElEICsgaV0uZXNjcm93X2FnZW50KTsKICAgICAgICAgICAgICAgIGFtb3VudHNbaV0gPSAoYnV5ZXJEYXRhYmFzZVtidXllckFkZHJlc3NdW3N0YXJ0SUQgKyBpXS5hbW91bnQpOwogICAgICAgICAgICAgICAgc3RhdHVzZXNbaV0gPSBjaGVja1N0YXR1cyhidXllckFkZHJlc3MsIHN0YXJ0SUQgKyBpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIChzZWxsZXJzLCBlc2Nyb3dfYWdlbnRzLCBhbW91bnRzLCBzdGF0dXNlcyk7CiAgICAgICAgfQoKCiAgICAgICAgICAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gU2VsbGVySGlzdG9yeShhZGRyZXNzIGlucHV0QWRkcmVzcywgdWludCBzdGFydElEICwgdWludCBudW1Ub0xvYWQpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3NbXSwgYWRkcmVzc1tdLCB1aW50W10sIGJ5dGVzMzJbXSl7CgogICAgICAgICAgICBhZGRyZXNzW10gbWVtb3J5IGJ1eWVycyA9IG5ldyBhZGRyZXNzW10obnVtVG9Mb2FkKTsKICAgICAgICAgICAgYWRkcmVzc1tdIG1lbW9yeSBlc2Nyb3dzID0gbmV3IGFkZHJlc3NbXShudW1Ub0xvYWQpOwogICAgICAgICAgICB1aW50W10gbWVtb3J5IGFtb3VudHMgPSBuZXcgdWludFtdKG51bVRvTG9hZCk7CiAgICAgICAgICAgIGJ5dGVzMzJbXSBtZW1vcnkgc3RhdHVzZXMgPSBuZXcgYnl0ZXMzMltdKG51bVRvTG9hZCk7CgogICAgICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBudW1Ub0xvYWQ7IGkrKykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKGkgPj0gc2VsbGVyRGF0YWJhc2VbaW5wdXRBZGRyZXNzXS5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBidXllcnNbaV0gPSBzZWxsZXJEYXRhYmFzZVtpbnB1dEFkZHJlc3NdW3N0YXJ0SUQgKyBpXS5idXllcjsKICAgICAgICAgICAgICAgIGVzY3Jvd3NbaV0gPSBidXllckRhdGFiYXNlW2J1eWVyc1tpXV1bc2VsbGVyRGF0YWJhc2VbaW5wdXRBZGRyZXNzXVtzdGFydElEICtpXS5idXllcl9ub3VuY2VdLmVzY3Jvd19hZ2VudDsKICAgICAgICAgICAgICAgIGFtb3VudHNbaV0gPSBidXllckRhdGFiYXNlW2J1eWVyc1tpXV1bc2VsbGVyRGF0YWJhc2VbaW5wdXRBZGRyZXNzXVtzdGFydElEICsgaV0uYnV5ZXJfbm91bmNlXS5hbW91bnQ7CiAgICAgICAgICAgICAgICBzdGF0dXNlc1tpXSA9IGNoZWNrU3RhdHVzKGJ1eWVyc1tpXSwgc2VsbGVyRGF0YWJhc2VbaW5wdXRBZGRyZXNzXVtzdGFydElEICsgaV0uYnV5ZXJfbm91bmNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKGJ1eWVycywgZXNjcm93cywgYW1vdW50cywgc3RhdHVzZXMpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZXNjcm93SGlzdG9yeShhZGRyZXNzIGlucHV0QWRkcmVzcywgdWludCBzdGFydElELCB1aW50IG51bVRvTG9hZCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzc1tdLCBhZGRyZXNzW10sIHVpbnRbXSwgYnl0ZXMzMltdKXsKICAgICAgICAKICAgICAgICAgICAgYWRkcmVzc1tdIG1lbW9yeSBidXllcnMgPSBuZXcgYWRkcmVzc1tdKG51bVRvTG9hZCk7CiAgICAgICAgICAgIGFkZHJlc3NbXSBtZW1vcnkgc2VsbGVycyA9IG5ldyBhZGRyZXNzW10obnVtVG9Mb2FkKTsKICAgICAgICAgICAgdWludFtdIG1lbW9yeSBhbW91bnRzID0gbmV3IHVpbnRbXShudW1Ub0xvYWQpOwogICAgICAgICAgICBieXRlczMyW10gbWVtb3J5IHN0YXR1c2VzID0gbmV3IGJ5dGVzMzJbXShudW1Ub0xvYWQpOwoKICAgICAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbnVtVG9Mb2FkOyBpKyspCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChpID49IGVzY3Jvd0RhdGFiYXNlW2lucHV0QWRkcmVzc10ubGVuZ3RoKQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgYnV5ZXJzW2ldID0gZXNjcm93RGF0YWJhc2VbaW5wdXRBZGRyZXNzXVtzdGFydElEICsgaV0uYnV5ZXI7CiAgICAgICAgICAgICAgICBzZWxsZXJzW2ldID0gYnV5ZXJEYXRhYmFzZVtidXllcnNbaV1dW2VzY3Jvd0RhdGFiYXNlW2lucHV0QWRkcmVzc11bc3RhcnRJRCAraV0uYnV5ZXJfbm91bmNlXS5zZWxsZXI7CiAgICAgICAgICAgICAgICBhbW91bnRzW2ldID0gYnV5ZXJEYXRhYmFzZVtidXllcnNbaV1dW2VzY3Jvd0RhdGFiYXNlW2lucHV0QWRkcmVzc11bc3RhcnRJRCArIGldLmJ1eWVyX25vdW5jZV0uYW1vdW50OwogICAgICAgICAgICAgICAgc3RhdHVzZXNbaV0gPSBjaGVja1N0YXR1cyhidXllcnNbaV0sIGVzY3Jvd0RhdGFiYXNlW2lucHV0QWRkcmVzc11bc3RhcnRJRCArIGldLmJ1eWVyX25vdW5jZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIChidXllcnMsIHNlbGxlcnMsIGFtb3VudHMsIHN0YXR1c2VzKTsKICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2hlY2tTdGF0dXMoYWRkcmVzcyBidXllckFkZHJlc3MsIHVpbnQgbm91bmNlKSBjb25zdGFudCByZXR1cm5zIChieXRlczMyKXsKCiAgICAgICAgICAgIGJ5dGVzMzIgc3RhdHVzID0gIiI7CgogICAgICAgICAgICBpZiAoYnV5ZXJEYXRhYmFzZVtidXllckFkZHJlc3NdW25vdW5jZV0ucmVsZWFzZV9hcHByb3ZhbCl7CiAgICAgICAgICAgICAgICBzdGF0dXMgPSAiQ29tcGxldGUiOwogICAgICAgICAgICB9IGVsc2UgaWYgKGJ1eWVyRGF0YWJhc2VbYnV5ZXJBZGRyZXNzXVtub3VuY2VdLnJlZnVuZF9hcHByb3ZhbCl7CiAgICAgICAgICAgICAgICBzdGF0dXMgPSAiUmVmdW5kZWQiOwogICAgICAgICAgICB9IGVsc2UgaWYgKGJ1eWVyRGF0YWJhc2VbYnV5ZXJBZGRyZXNzXVtub3VuY2VdLmVzY3Jvd19pbnRlcnZlbnRpb24pewogICAgICAgICAgICAgICAgc3RhdHVzID0gIlBlbmRpbmcgRXNjcm93IERlY2lzaW9uIjsKICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHN0YXR1cyA9ICJJbiBQcm9ncmVzcyI7CiAgICAgICAgICAgIH0KICAgICAgIAogICAgICAgICAgICByZXR1cm4gKHN0YXR1cyk7CiAgICAgICAgfQoKICAgICAgICAKICAgICAgICAvL1doZW4gdHJhbnNhY3Rpb24gaXMgY29tcGxldGUsIGJ1eWVyIHdpbGwgcmVsZWFzZSBmdW5kcyB0byBzZWxsZXIKICAgICAgICAvL0V2ZW4gaWYgRXNjcm93RXNjYWxhdGlvbiBpcyByYWlzZWQsIGJ1eWVyIGNhbiBzdGlsbCBhcHByb3ZlIGZ1bmQgcmVsZWFzZSBhdCBhbnkgdGltZQogICAgICAgIGZ1bmN0aW9uIGJ1eWVyRnVuZFJlbGVhc2UodWludCBJRCkKICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmUoSUQgPCBidXllckRhdGFiYXNlW21zZy5zZW5kZXJdLmxlbmd0aCAmJiAKICAgICAgICAgICAgYnV5ZXJEYXRhYmFzZVttc2cuc2VuZGVyXVtJRF0ucmVsZWFzZV9hcHByb3ZhbCA9PSBmYWxzZSAmJgogICAgICAgICAgICBidXllckRhdGFiYXNlW21zZy5zZW5kZXJdW0lEXS5yZWZ1bmRfYXBwcm92YWwgPT0gZmFsc2UpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy9TZXQgcmVsZWFzZSBhcHByb3ZhbCB0byB0cnVlLiBFbnN1cmUgYXBwcm92YWwgZm9yIGVhY2ggdHJhbnNhY3Rpb24gY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UuCiAgICAgICAgICAgIGJ1eWVyRGF0YWJhc2VbbXNnLnNlbmRlcl1bSURdLnJlbGVhc2VfYXBwcm92YWwgPSB0cnVlOwoKICAgICAgICAgICAgYWRkcmVzcyBzZWxsZXIgPSBidXllckRhdGFiYXNlW21zZy5zZW5kZXJdW0lEXS5zZWxsZXI7CiAgICAgICAgICAgIGFkZHJlc3MgZXNjcm93X2FnZW50ID0gYnV5ZXJEYXRhYmFzZVttc2cuc2VuZGVyXVtJRF0uZXNjcm93X2FnZW50OwoKICAgICAgICAgICAgdWludCBhbW91bnQgPSBidXllckRhdGFiYXNlW21zZy5zZW5kZXJdW0lEXS5hbW91bnQ7CiAgICAgICAgICAgIHVpbnQgZXNjcm93X2ZlZSA9IGJ1eWVyRGF0YWJhc2VbbXNnLnNlbmRlcl1bSURdLmVzY3Jvd19mZWU7CgogICAgICAgICAgICAvL01vdmUgZnVuZHMgdW5kZXIgc2VsbGVyJ3Mgb3dlcnNoaXAKICAgICAgICAgICAgRnVuZHNbc2VsbGVyXSArPSBhbW91bnQ7CiAgICAgICAgICAgIEZ1bmRzW2VzY3Jvd19hZ2VudF0gKz0gZXNjcm93X2ZlZTsKCgogICAgICAgIH0KCiAgICAgICAgLy9TZWxsZXIgY2FuIHJlZnVuZCB0aGUgYnV5ZXIgYXQgYW55IHRpbWUKICAgICAgICBmdW5jdGlvbiBzZWxsZXJSZWZ1bmQodWludCBJRCkKICAgICAgICB7CiAgICAgICAgICAgIGFkZHJlc3MgYnV5ZXJBZGRyZXNzID0gc2VsbGVyRGF0YWJhc2VbbXNnLnNlbmRlcl1bSURdLmJ1eWVyOwogICAgICAgICAgICB1aW50IGJ1eWVySUQgPSBzZWxsZXJEYXRhYmFzZVttc2cuc2VuZGVyXVtJRF0uYnV5ZXJfbm91bmNlOwoKICAgICAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgYnV5ZXJEYXRhYmFzZVtidXllckFkZHJlc3NdW2J1eWVySURdLnJlbGVhc2VfYXBwcm92YWwgPT0gZmFsc2UgJiYKICAgICAgICAgICAgYnV5ZXJEYXRhYmFzZVtidXllckFkZHJlc3NdW2J1eWVySURdLnJlZnVuZF9hcHByb3ZhbCA9PSBmYWxzZSk7IAoKICAgICAgICAgICAgYWRkcmVzcyBlc2Nyb3dfYWdlbnQgPSBidXllckRhdGFiYXNlW2J1eWVyQWRkcmVzc11bYnV5ZXJJRF0uZXNjcm93X2FnZW50OwogICAgICAgICAgICB1aW50IGVzY3Jvd19mZWUgPSBidXllckRhdGFiYXNlW2J1eWVyQWRkcmVzc11bYnV5ZXJJRF0uZXNjcm93X2ZlZTsKICAgICAgICAgICAgdWludCBhbW91bnQgPSBidXllckRhdGFiYXNlW2J1eWVyQWRkcmVzc11bYnV5ZXJJRF0uYW1vdW50OwogICAgICAgIAogICAgICAgICAgICAvL09uY2UgYXBwcm92ZWQsIGJ1eWVyIGNhbiBpbnZva2UgV2l0aGRyYXdGdW5kcyB0byBjbGFpbSBoaXMgcmVmdW5kCiAgICAgICAgICAgIGJ1eWVyRGF0YWJhc2VbYnV5ZXJBZGRyZXNzXVtidXllcklEXS5yZWZ1bmRfYXBwcm92YWwgPSB0cnVlOwoKICAgICAgICAgICAgRnVuZHNbYnV5ZXJBZGRyZXNzXSArPSBhbW91bnQ7CiAgICAgICAgICAgIEZ1bmRzW2VzY3Jvd19hZ2VudF0gKz0gZXNjcm93X2ZlZTsKICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIAoKICAgICAgICAvL0VpdGhlciBidXllciBvciBzZWxsZXIgY2FuIHJhaXNlIGVzY2FsYXRpb24gd2l0aCBlc2Nyb3cgYWdlbnQuIAogICAgICAgIC8vT25jZSBlc2NhbGF0aW9uIGlzIGFjdGl2YXRlZCwgZXNjcm93IGFnZW50IGNhbiByZWxlYXNlIGZ1bmRzIHRvIHNlbGxlciBPUiBtYWtlIGEgZnVsbCByZWZ1bmQgdG8gYnV5ZXIKCiAgICAgICAgLy9Td2l0Y2hlciA9IDAgZm9yIEJ1eWVyLCBTd2l0Y2hlciA9IDEgZm9yIFNlbGxlcgogICAgICAgIGZ1bmN0aW9uIEVzY3Jvd0VzY2FsYXRpb24odWludCBzd2l0Y2hlciwgdWludCBJRCkKICAgICAgICB7CiAgICAgICAgICAgIC8vVG8gYWN0aXZhdGUgRXNjcm93RXNjYWxhdGlvbgogICAgICAgICAgICAvLzEpIEJ1eWVyIG11c3Qgbm90IGhhdmUgYXBwcm92ZWQgZnVuZCByZWxlYXNlLgogICAgICAgICAgICAvLzIpIFNlbGxlciBtdXN0IG5vdCBoYXZlIGFwcHJvdmVkIGEgcmVmdW5kLgogICAgICAgICAgICAvLzMpIEVzY3Jvd0VzY2FsYXRpb24gaXMgYmVpbmcgYWN0aXZhdGVkIGZvciB0aGUgZmlyc3QgdGltZQoKICAgICAgICAgICAgLy9UaGVyZSBpcyBubyBkaWZmZXJlbmNlIHdoZXRoZXIgdGhlIGJ1eWVyIG9yIHNlbGxlciBhY3RpdmF0ZXMgRXNjcm93RXNjYWxhdGlvbi4KICAgICAgICAgICAgYWRkcmVzcyBidXllckFkZHJlc3M7CiAgICAgICAgICAgIHVpbnQgYnV5ZXJJRDsgLy90cmFuc2FjdGlvbiBJRCBvZiBpbiBidXllcidzIGhpc3RvcnkKICAgICAgICAgICAgaWYgKHN3aXRjaGVyID09IDApIC8vIEJ1eWVyCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJ1eWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgICAgICAgICBidXllcklEID0gSUQ7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3dpdGNoZXIgPT0gMSkgLy9TZWxsZXIKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYnV5ZXJBZGRyZXNzID0gc2VsbGVyRGF0YWJhc2VbbXNnLnNlbmRlcl1bSURdLmJ1eWVyOwogICAgICAgICAgICAgICAgYnV5ZXJJRCA9IHNlbGxlckRhdGFiYXNlW21zZy5zZW5kZXJdW0lEXS5idXllcl9ub3VuY2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlcXVpcmUoYnV5ZXJEYXRhYmFzZVtidXllckFkZHJlc3NdW2J1eWVySURdLmVzY3Jvd19pbnRlcnZlbnRpb24gPT0gZmFsc2UgICYmCiAgICAgICAgICAgIGJ1eWVyRGF0YWJhc2VbYnV5ZXJBZGRyZXNzXVtidXllcklEXS5yZWxlYXNlX2FwcHJvdmFsID09IGZhbHNlICYmCiAgICAgICAgICAgIGJ1eWVyRGF0YWJhc2VbYnV5ZXJBZGRyZXNzXVtidXllcklEXS5yZWZ1bmRfYXBwcm92YWwgPT0gZmFsc2UpOwoKICAgICAgICAgICAgLy9BY3RpdmF0ZSB0aGUgYWJpbGl0eSBmb3IgRXNjcm93IEFnZW50IHRvIGludGVydmVudCBpbiB0aGlzIHRyYW5zYWN0aW9uCiAgICAgICAgICAgIGJ1eWVyRGF0YWJhc2VbYnV5ZXJBZGRyZXNzXVtidXllcklEXS5lc2Nyb3dfaW50ZXJ2ZW50aW9uID0gdHJ1ZTsKCiAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICAKICAgICAgICAvL0lEIGlzIHRoZSB0cmFuc2FjdGlvbiBJRCBmcm9tIEVzY3JvdydzIGhpc3RvcnkuIAogICAgICAgIC8vRGVjaXNpb24gPSAwIGlzIGZvciByZWZ1bmRpbmcgQnV5ZXIuIERlY2lzaW9uID0gMSBpcyBmb3IgcmVsZWFzaW5nIGZ1bmRzIHRvIFNlbGxlcgogICAgICAgIGZ1bmN0aW9uIGVzY3Jvd0RlY2lzaW9uKHVpbnQgSUQsIHVpbnQgRGVjaXNpb24pCiAgICAgICAgewogICAgICAgICAgICAvL0VzY3JvdyBjYW4gb25seSBtYWtlIHRoZSBkZWNpc2lvbiBJRgogICAgICAgICAgICAvLzEpIEJ1eWVyIGhhcyBub3QgeWV0IGFwcHJvdmVkIGZ1bmQgcmVsZWFzZSB0byBzZWxsZXIKICAgICAgICAgICAgLy8yKSBTZWxsZXIgaGFzIG5vdCB5ZXQgYXBwcm92ZWQgYSByZWZ1bmQgdG8gYnV5ZXIKICAgICAgICAgICAgLy8zKSBFc2Nyb3cgQWdlbnQgaGFzIG5vdCB5ZXQgYXBwcm92ZWQgZnVuZCByZWxlYXNlIHRvIHNlbGxlciBBTkQgbm90IGFwcHJvdmVkIHJlZnVuZCB0byBidXllcgogICAgICAgICAgICAvLzQpIEVzY2FsYXRpb24gRXNjYWxhdGlvbiBpcyBhY3RpdmF0ZWQKCiAgICAgICAgICAgIGFkZHJlc3MgYnV5ZXJBZGRyZXNzID0gZXNjcm93RGF0YWJhc2VbbXNnLnNlbmRlcl1bSURdLmJ1eWVyOwogICAgICAgICAgICB1aW50IGJ1eWVySUQgPSBlc2Nyb3dEYXRhYmFzZVttc2cuc2VuZGVyXVtJRF0uYnV5ZXJfbm91bmNlOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIGJ1eWVyRGF0YWJhc2VbYnV5ZXJBZGRyZXNzXVtidXllcklEXS5yZWxlYXNlX2FwcHJvdmFsID09IGZhbHNlICYmCiAgICAgICAgICAgIGJ1eWVyRGF0YWJhc2VbYnV5ZXJBZGRyZXNzXVtidXllcklEXS5lc2Nyb3dfaW50ZXJ2ZW50aW9uID09IHRydWUgJiYKICAgICAgICAgICAgYnV5ZXJEYXRhYmFzZVtidXllckFkZHJlc3NdW2J1eWVySURdLnJlZnVuZF9hcHByb3ZhbCA9PSBmYWxzZSk7CiAgICAgICAgICAgIAogICAgICAgICAgICB1aW50IGVzY3Jvd19mZWUgPSBidXllckRhdGFiYXNlW2J1eWVyQWRkcmVzc11bYnV5ZXJJRF0uZXNjcm93X2ZlZTsKICAgICAgICAgICAgdWludCBhbW91bnQgPSBidXllckRhdGFiYXNlW2J1eWVyQWRkcmVzc11bYnV5ZXJJRF0uYW1vdW50OwoKICAgICAgICAgICAgaWYgKERlY2lzaW9uID09IDApIC8vUmVmdW5kIEJ1eWVyCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJ1eWVyRGF0YWJhc2VbYnV5ZXJBZGRyZXNzXVtidXllcklEXS5yZWZ1bmRfYXBwcm92YWwgPSB0cnVlOyAgICAKICAgICAgICAgICAgICAgIEZ1bmRzW2J1eWVyQWRkcmVzc10gKz0gYW1vdW50OwogICAgICAgICAgICAgICAgRnVuZHNbbXNnLnNlbmRlcl0gKz0gZXNjcm93X2ZlZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9IGVsc2UgaWYgKERlY2lzaW9uID09IDEpIC8vUmVsZWFzZSBmdW5kcyB0byBTZWxsZXIKICAgICAgICAgICAgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGJ1eWVyRGF0YWJhc2VbYnV5ZXJBZGRyZXNzXVtidXllcklEXS5yZWxlYXNlX2FwcHJvdmFsID0gdHJ1ZTsKICAgICAgICAgICAgICAgIEZ1bmRzW2J1eWVyRGF0YWJhc2VbYnV5ZXJBZGRyZXNzXVtidXllcklEXS5zZWxsZXJdICs9IGFtb3VudDsKICAgICAgICAgICAgICAgIEZ1bmRzW21zZy5zZW5kZXJdICs9IGVzY3Jvd19mZWU7CiAgICAgICAgICAgIH0gIAogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBXaXRoZHJhd0Z1bmRzKCkKICAgICAgICB7CiAgICAgICAgICAgIHVpbnQgYW1vdW50ID0gRnVuZHNbbXNnLnNlbmRlcl07CiAgICAgICAgICAgIEZ1bmRzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoYW1vdW50KSkKICAgICAgICAgICAgICAgIEZ1bmRzW21zZy5zZW5kZXJdID0gYW1vdW50OwogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIENoZWNrQmFsYW5jZShhZGRyZXNzIGZyb21BZGRyZXNzKSBjb25zdGFudCByZXR1cm5zICh1aW50KXsKICAgICAgICAgICAgcmV0dXJuIChGdW5kc1tmcm9tQWRkcmVzc10pOwogICAgICAgIH0KICAgICAKICAgIH0='.
	

]
