Class {
	#name : #SRTB340686da996b8B3d486b4D27E38E38500A9E926,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTB340686da996b8B3d486b4D27E38E38500A9E926 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CmNvbnRyYWN0IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCB4LCB1aW50IHkpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyh1aW50KSB7CiAgICAgIHVpbnQgeiA9IHggKyB5OwogICAgICBhc3NlcnQoKHogPj0geCkgJiYgKHogPj0geSkpOwogICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU3VidHJhY3QodWludCB4LCB1aW50IHkpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyh1aW50KSB7CiAgICAgIGFzc2VydCh4ID49IHkpOwogICAgICB1aW50IHogPSB4IC0geTsKICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZU11bHQodWludCB4LCB1aW50IHkpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyh1aW50KSB7CiAgICAgIHVpbnQgeiA9IHggKiB5OwogICAgICBhc3NlcnQoKHggPT0gMCl8fCh6L3ggPT0geSkpOwogICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRSYW5kb21OdW1iZXIodWludDE2IG1heFJhbmRvbSwgdWludDggbWluLCBhZGRyZXNzIHByaXZhdGVBZGRyZXNzKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50OCkgewogICAgICAgIHVpbnQyNTYgZ2VuTnVtID0gdWludDI1NihibG9jay5ibG9ja2hhc2goYmxvY2subnVtYmVyLTEpKSArIHVpbnQyNTYocHJpdmF0ZUFkZHJlc3MpOwogICAgICAgIHJldHVybiB1aW50OChnZW5OdW0gJSAobWF4UmFuZG9tIC0gbWluICsgMSkrbWluKTsKICAgIH0KfQoKY29udHJhY3QgRW51bXMgewogICAgZW51bSBSZXN1bHRDb2RlIHsKICAgICAgICBTVUNDRVNTLAogICAgICAgIEVSUk9SX0NMQVNTX05PVF9GT1VORCwKICAgICAgICBFUlJPUl9MT1dfQkFMQU5DRSwKICAgICAgICBFUlJPUl9TRU5EX0ZBSUwsCiAgICAgICAgRVJST1JfTk9UX09XTkVSLAogICAgICAgIEVSUk9SX05PVF9FTk9VR0hfTU9ORVksCiAgICAgICAgRVJST1JfSU5WQUxJRF9BTU9VTlQKICAgIH0KCiAgICBlbnVtIEFuZ2VsQXVyYSB7IAogICAgICAgIEJsdWUsIAogICAgICAgIFllbGxvdywgCiAgICAgICAgUHVycGxlLCAKICAgICAgICBPcmFuZ2UsIAogICAgICAgIFJlZCwgCiAgICAgICAgR3JlZW4gCiAgICB9Cn0KCmNvbnRyYWN0IEFjY2Vzc0NvbnRyb2wgewogICAgYWRkcmVzcyBwdWJsaWMgY3JlYXRvckFkZHJlc3M7CiAgICB1aW50MTYgcHVibGljIHRvdGFsU2VyYXBoaW1zID0gMDsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHNlcmFwaGltczsKCiAgICBib29sIHB1YmxpYyBpc01haW50ZW5hbmNlTW9kZSA9IHRydWU7CiAKICAgIG1vZGlmaWVyIG9ubHlDUkVBVE9SKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjcmVhdG9yQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5U0VSQVBISU0oKSB7CiAgICAgICAgcmVxdWlyZShzZXJhcGhpbXNbbXNnLnNlbmRlcl0gPT0gdHJ1ZSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgaXNDb250cmFjdEFjdGl2ZSB7CiAgICAgICAgcmVxdWlyZSghaXNNYWludGVuYW5jZU1vZGUpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIC8vIENvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBBY2Nlc3NDb250cm9sKCkgcHVibGljIHsKICAgICAgICBjcmVhdG9yQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICB9CiAgICAKCiAgICBmdW5jdGlvbiBhZGRTRVJBUEhJTShhZGRyZXNzIF9uZXdTZXJhcGhpbSkgb25seUNSRUFUT1IgcHVibGljIHsKICAgICAgICBpZiAoc2VyYXBoaW1zW19uZXdTZXJhcGhpbV0gPT0gZmFsc2UpIHsKICAgICAgICAgICAgc2VyYXBoaW1zW19uZXdTZXJhcGhpbV0gPSB0cnVlOwogICAgICAgICAgICB0b3RhbFNlcmFwaGltcyArPSAxOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gcmVtb3ZlU0VSQVBISU0oYWRkcmVzcyBfb2xkU2VyYXBoaW0pIG9ubHlDUkVBVE9SIHB1YmxpYyB7CiAgICAgICAgaWYgKHNlcmFwaGltc1tfb2xkU2VyYXBoaW1dID09IHRydWUpIHsKICAgICAgICAgICAgc2VyYXBoaW1zW19vbGRTZXJhcGhpbV0gPSBmYWxzZTsKICAgICAgICAgICAgdG90YWxTZXJhcGhpbXMgLT0gMTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlTWFpbnRlbmFuY2VNb2RlKGJvb2wgX2lzTWFpbnRhaW5pbmcpIG9ubHlDUkVBVE9SIHB1YmxpYyB7CiAgICAgICAgaXNNYWludGVuYW5jZU1vZGUgPSBfaXNNYWludGFpbmluZzsKICAgIH0KCiAgCn0gCgoKCgpjb250cmFjdCBJUGV0Q2FyZERhdGEgaXMgQWNjZXNzQ29udHJvbCwgRW51bXMgewogICAgdWludDggcHVibGljIHRvdGFsUGV0Q2FyZFNlcmllczsgICAgCiAgICB1aW50NjQgcHVibGljIHRvdGFsUGV0czsKICAgIAogICAgLy8gd3JpdGUKICAgIGZ1bmN0aW9uIGNyZWF0ZVBldENhcmRTZXJpZXModWludDggX3BldENhcmRTZXJpZXNJZCwgdWludDMyIF9tYXhUb3RhbCkgb25seUNSRUFUT1IgcHVibGljIHJldHVybnModWludDgpOwogICAgZnVuY3Rpb24gc2V0UGV0KHVpbnQ4IF9wZXRDYXJkU2VyaWVzSWQsIGFkZHJlc3MgX293bmVyLCBzdHJpbmcgX25hbWUsIHVpbnQ4IF9sdWNrLCB1aW50MTYgX2F1cmFSZWQsIHVpbnQxNiBfYXVyYVllbGxvdywgdWludDE2IF9hdXJhQmx1ZSkgb25seVNFUkFQSElNIGV4dGVybmFsIHJldHVybnModWludDY0KTsKICAgIGZ1bmN0aW9uIHNldFBldEF1cmFzKHVpbnQ2NCBfcGV0SWQsIHVpbnQ4IF9hdXJhUmVkLCB1aW50OCBfYXVyYUJsdWUsIHVpbnQ4IF9hdXJhWWVsbG93KSBvbmx5U0VSQVBISU0gZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBzZXRQZXRMYXN0VHJhaW5pbmdUaW1lKHVpbnQ2NCBfcGV0SWQpIG9ubHlTRVJBUEhJTSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIHNldFBldExhc3RCcmVlZGluZ1RpbWUodWludDY0IF9wZXRJZCkgb25seVNFUkFQSElNIGV4dGVybmFsOwogICAgZnVuY3Rpb24gYWRkUGV0SWRNYXBwaW5nKGFkZHJlc3MgX293bmVyLCB1aW50NjQgX3BldElkKSBwcml2YXRlOwogICAgZnVuY3Rpb24gdHJhbnNmZXJQZXQoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQ2NCBfcGV0SWQpIG9ubHlTRVJBUEhJTSBwdWJsaWMgcmV0dXJucyhSZXN1bHRDb2RlKTsKICAgIGZ1bmN0aW9uIG93bmVyUGV0VHJhbnNmZXIgKGFkZHJlc3MgX3RvLCB1aW50NjQgX3BldElkKSAgcHVibGljOwogICAgZnVuY3Rpb24gc2V0UGV0TmFtZShzdHJpbmcgX25hbWUsIHVpbnQ2NCBfcGV0SWQpIHB1YmxpYzsKCiAgICAvLyByZWFkCiAgICBmdW5jdGlvbiBnZXRQZXRDYXJkU2VyaWVzKHVpbnQ4IF9wZXRDYXJkU2VyaWVzSWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQ4IHBldENhcmRTZXJpZXNJZCwgdWludDMyIGN1cnJlbnRQZXRUb3RhbCwgdWludDMyIG1heFBldFRvdGFsKTsKICAgIGZ1bmN0aW9uIGdldFBldCh1aW50IF9wZXRJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCBwZXRJZCwgdWludDggcGV0Q2FyZFNlcmllc0lkLCBzdHJpbmcgbmFtZSwgdWludDggbHVjaywgdWludDE2IGF1cmFSZWQsIHVpbnQxNiBhdXJhQmx1ZSwgdWludDE2IGF1cmFZZWxsb3csIHVpbnQ2NCBsYXN0VHJhaW5pbmdUaW1lLCB1aW50NjQgbGFzdEJyZWVkaW5nVGltZSwgYWRkcmVzcyBvd25lcik7CiAgICBmdW5jdGlvbiBnZXRPd25lclBldENvdW50KGFkZHJlc3MgX293bmVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50KTsKICAgIGZ1bmN0aW9uIGdldFBldEJ5SW5kZXgoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2luZGV4KSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50KTsKICAgIGZ1bmN0aW9uIGdldFRvdGFsUGV0Q2FyZFNlcmllcygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50OCk7CiAgICBmdW5jdGlvbiBnZXRUb3RhbFBldHMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludCk7Cn0KCgoKY29udHJhY3QgUGV0Q2FyZERhdGEgaXMgSVBldENhcmREYXRhLCBTYWZlTWF0aCB7CiAgICAvKioqIEVWRU5UUyAqKiovCiAgICBldmVudCBDcmVhdGVkUGV0KHVpbnQ2NCBwZXRJZCk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGluZGV4ZWQgdG9rZW5JZCk7CgogICAgLyoqKiBEQVRBIFRZUEVTICoqKi8KICAgIHN0cnVjdCBQZXRDYXJkU2VyaWVzIHsKICAgICAgICB1aW50OCBwZXRDYXJkU2VyaWVzSWQ7CiAgICAgICAgdWludDMyIGN1cnJlbnRQZXRUb3RhbDsKICAgICAgICB1aW50MzIgbWF4UGV0VG90YWw7CiAgICB9CgogICAgc3RydWN0IFBldCB7CiAgICAgICAgdWludDY0IHBldElkOwogICAgICAgIHVpbnQ4IHBldENhcmRTZXJpZXNJZDsKICAgICAgICBhZGRyZXNzIG93bmVyOwogICAgICAgIHN0cmluZyBuYW1lOwogICAgICAgIHVpbnQ4IGx1Y2s7CiAgICAgICAgdWludDE2IGF1cmFSZWQ7CiAgICAgICAgdWludDE2IGF1cmFZZWxsb3c7CiAgICAgICAgdWludDE2IGF1cmFCbHVlOwogICAgICAgIHVpbnQ2NCBsYXN0VHJhaW5pbmdUaW1lOwogICAgICAgIHVpbnQ2NCBsYXN0QnJlZWRpbmdUaW1lOwogICAgICAgIHVpbnQgcHJpY2U7IAogICAgfQoKCiAgICAvKioqIFNUT1JBR0UgKioqLwogIAogICAgbWFwcGluZyh1aW50OCA9PiBQZXRDYXJkU2VyaWVzKSBwdWJsaWMgcGV0Q2FyZFNlcmllc0NvbGxlY3Rpb247CiAgICBtYXBwaW5nKHVpbnQgPT4gUGV0KSBwdWJsaWMgcGV0Q29sbGVjdGlvbjsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50NjRbXSkgcHVibGljIG93bmVyUGV0Q29sbGVjdGlvbjsKICAgIAogICAgLyoqKiBGVU5DVElPTlMgKioqLwogICAgLy8qKiogV3JpdGUgQWNjZXNzICoqKi8vCiAgICBmdW5jdGlvbiBQZXRDYXJkRGF0YSgpIHB1YmxpYyB7CiAgICAgICAgCiAgICB9CgogICAgLy8qKiogUGV0cyAqKiovCiAgICBmdW5jdGlvbiBjcmVhdGVQZXRDYXJkU2VyaWVzKHVpbnQ4IF9wZXRDYXJkU2VyaWVzSWQsIHVpbnQzMiBfbWF4VG90YWwpIG9ubHlDUkVBVE9SIHB1YmxpYyByZXR1cm5zKHVpbnQ4KSB7CiAgICAgaWYgKChub3cgPiAxNTE2NjQyMjAwKSB8fCAodG90YWxQZXRDYXJkU2VyaWVzID49IDE5KSkge3JldmVydCgpO30KICAgICAgICAvL1RoaXMgY29uZmlybXMgdGhhdCBubyBvbmUsIGV2ZW4gdGhlIGRldmVsb29wZXJzLCBjYW4gY3JlYXRlIGFueSBhbmdlbCBzZXJpZXMgYWZ0ZXIgSkFOLzIyLzIwMTggQCAwNTMwcG0gKFVUQykgb3IgbW9yZSB0aGFuIHRoZSBvcmlnaW5hbCAyNCBzZXJpZXMuCiAgICAgIAogICAgICAgUGV0Q2FyZFNlcmllcyBzdG9yYWdlIHBldENhcmRTZXJpZXMgPSBwZXRDYXJkU2VyaWVzQ29sbGVjdGlvbltfcGV0Q2FyZFNlcmllc0lkXTsKICAgICAgICBwZXRDYXJkU2VyaWVzLnBldENhcmRTZXJpZXNJZCA9IF9wZXRDYXJkU2VyaWVzSWQ7CiAgICAgICAgcGV0Q2FyZFNlcmllcy5tYXhQZXRUb3RhbCA9IF9tYXhUb3RhbDsKICAgICAgICB0b3RhbFBldENhcmRTZXJpZXMgKz0gMTsKICAgICAgICByZXR1cm4gdG90YWxQZXRDYXJkU2VyaWVzOwogICAgfQoJCglmdW5jdGlvbiBzZXRQZXQodWludDggX3BldENhcmRTZXJpZXNJZCwgYWRkcmVzcyBfb3duZXIsIHN0cmluZyBfbmFtZSwgdWludDggX2x1Y2ssIHVpbnQxNiBfYXVyYVJlZCwgdWludDE2IF9hdXJhWWVsbG93LCB1aW50MTYgX2F1cmFCbHVlKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgcmV0dXJucyh1aW50NjQpIHsgCiAgICAgICAgUGV0Q2FyZFNlcmllcyBzdG9yYWdlIHNlcmllcyA9IHBldENhcmRTZXJpZXNDb2xsZWN0aW9uW19wZXRDYXJkU2VyaWVzSWRdOwoKICAgICAgICBpZiAoc2VyaWVzLmN1cnJlbnRQZXRUb3RhbCA+PSBzZXJpZXMubWF4UGV0VG90YWwpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgIHRvdGFsUGV0cyArPSAxOwogICAgICAgIHNlcmllcy5jdXJyZW50UGV0VG90YWwgKz0xOwogICAgICAgIFBldCBzdG9yYWdlIHBldCA9IHBldENvbGxlY3Rpb25bdG90YWxQZXRzXTsKICAgICAgICBwZXQucGV0SWQgPSB0b3RhbFBldHM7CiAgICAgICAgcGV0LnBldENhcmRTZXJpZXNJZCA9IF9wZXRDYXJkU2VyaWVzSWQ7CiAgICAgICAgcGV0Lm93bmVyID0gX293bmVyOwogICAgICAgIHBldC5uYW1lID0gX25hbWU7CiAgICAgICAgcGV0Lmx1Y2sgPSBfbHVjazsKICAgICAgICBwZXQuYXVyYVJlZCA9IF9hdXJhUmVkOwogICAgICAgIHBldC5hdXJhWWVsbG93ID0gX2F1cmFZZWxsb3c7CiAgICAgICAgcGV0LmF1cmFCbHVlID0gX2F1cmFCbHVlOwogICAgICAgIHBldC5sYXN0VHJhaW5pbmdUaW1lID0gMDsKICAgICAgICBwZXQubGFzdEJyZWVkaW5nVGltZSA9IDA7CiAgICAgICAgYWRkUGV0SWRNYXBwaW5nKF9vd25lciwgcGV0LnBldElkKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UGV0QXVyYXModWludDY0IF9wZXRJZCwgdWludDggX2F1cmFSZWQsIHVpbnQ4IF9hdXJhQmx1ZSwgdWludDggX2F1cmFZZWxsb3cpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCB7CiAgICAgICAgUGV0IHN0b3JhZ2UgcGV0ID0gcGV0Q29sbGVjdGlvbltfcGV0SWRdOwogICAgICAgIGlmIChwZXQucGV0SWQgPT0gX3BldElkKSB7CiAgICAgICAgICAgIHBldC5hdXJhUmVkID0gX2F1cmFSZWQ7CiAgICAgICAgICAgIHBldC5hdXJhQmx1ZSA9IF9hdXJhQmx1ZTsKICAgICAgICAgICAgcGV0LmF1cmFZZWxsb3cgPSBfYXVyYVllbGxvdzsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UGV0TmFtZShzdHJpbmcgX25hbWUsIHVpbnQ2NCBfcGV0SWQpIHB1YmxpYyB7CiAgICAgICAgUGV0IHN0b3JhZ2UgcGV0ID0gcGV0Q29sbGVjdGlvbltfcGV0SWRdOwogICAgICAgIGlmICgocGV0LnBldElkID09IF9wZXRJZCkgJiYgKG1zZy5zZW5kZXIgPT0gcGV0Lm93bmVyKSkgewogICAgICAgICAgICBwZXQubmFtZSA9IF9uYW1lOwogICAgICAgIH0KICAgIH0KCgogICAgZnVuY3Rpb24gc2V0UGV0TGFzdFRyYWluaW5nVGltZSh1aW50NjQgX3BldElkKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgewogICAgICAgIFBldCBzdG9yYWdlIHBldCA9IHBldENvbGxlY3Rpb25bX3BldElkXTsKICAgICAgICBpZiAocGV0LnBldElkID09IF9wZXRJZCkgewogICAgICAgICAgICBwZXQubGFzdFRyYWluaW5nVGltZSA9IHVpbnQ2NChub3cpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRQZXRMYXN0QnJlZWRpbmdUaW1lKHVpbnQ2NCBfcGV0SWQpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCB7CiAgICAgICAgUGV0IHN0b3JhZ2UgcGV0ID0gcGV0Q29sbGVjdGlvbltfcGV0SWRdOwogICAgICAgIGlmIChwZXQucGV0SWQgPT0gX3BldElkKSB7CiAgICAgICAgICAgIHBldC5sYXN0QnJlZWRpbmdUaW1lID0gdWludDY0KG5vdyk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZGRQZXRJZE1hcHBpbmcoYWRkcmVzcyBfb3duZXIsIHVpbnQ2NCBfcGV0SWQpIHByaXZhdGUgewogICAgICAgICAgICB1aW50NjRbXSBzdG9yYWdlIG93bmVycyA9IG93bmVyUGV0Q29sbGVjdGlvbltfb3duZXJdOwogICAgICAgICAgICBvd25lcnMucHVzaChfcGV0SWQpOwogICAgICAgICAgICBQZXQgc3RvcmFnZSBwZXQgPSBwZXRDb2xsZWN0aW9uW19wZXRJZF07CiAgICAgICAgICAgIHBldC5vd25lciA9IF9vd25lcjsKICAgICAgICAgICAgLy90aGlzIGlzIGEgbWFwIG9mIEFMTCB0aGUgcGV0cyBhbiBhZGRyZXNzIGhhcyBFVkVSIG93bmVkLiAKICAgICAgICAgICAgLy9XZSBjaGVjayB0aGF0IHRoZXkgYXJlIHN0aWxsIHRoZSBjdXJyZW50IG93bmVyIGluIGphdmFzY3JwaXQgYW5kIG90aGVyIHBsYWNlcyBvbiBjaGFpbi4gCiAgICAgICAgCiAgICB9CgkKCWZ1bmN0aW9uIHRyYW5zZmVyUGV0KGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50NjQgX3BldElkKSBvbmx5U0VSQVBISU0gcHVibGljIHJldHVybnMoUmVzdWx0Q29kZSkgewogICAgICAgIFBldCBzdG9yYWdlIHBldCA9IHBldENvbGxlY3Rpb25bX3BldElkXTsKICAgICAgICBpZiAocGV0Lm93bmVyICE9IF9mcm9tKSB7CiAgICAgICAgICAgIHJldHVybiBSZXN1bHRDb2RlLkVSUk9SX05PVF9PV05FUjsKICAgICAgICB9CiAgICAgICAgaWYgKF9mcm9tID09IF90bykge3JldmVydCgpO30KICAgICAgICBhZGRQZXRJZE1hcHBpbmcoX3RvLCBfcGV0SWQpOwogICAgICAgIHBldC5vd25lciA9IF90bzsKICAgICAgICByZXR1cm4gUmVzdWx0Q29kZS5TVUNDRVNTOwogICAgfQogICAgCiAgICAvL0FueW9uZSBjYW4gdHJhbnNmZXIgYSBwZXQgdGhleSBvd24gYnkgY2FsbGluZyB0aGlzIGZ1bmN0aW9uLiAKICAgIAogIGZ1bmN0aW9uIG93bmVyUGV0VHJhbnNmZXIgKGFkZHJlc3MgX3RvLCB1aW50NjQgX3BldElkKSAgcHVibGljICB7CiAgICAgCiAgICAgICAgaWYgKChfcGV0SWQgPiB0b3RhbFBldHMpIHx8IChfcGV0SWQgPT0gMCkpIHtyZXZlcnQoKTt9CiAgICAgICBpZiAobXNnLnNlbmRlciA9PSBfdG8pIHtyZXZlcnQoKTt9IC8vY2FuJ3Qgc2VuZCB0byB5b3Vyc2VsZi4gCiAgICAgICAgaWYgKHBldC5vd25lciAhPSBtc2cuc2VuZGVyKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgUGV0IHN0b3JhZ2UgcGV0ID0gcGV0Q29sbGVjdGlvbltfcGV0SWRdOwogICAgICAgIHBldC5vd25lciA9IF90bzsKICAgICAgICBhZGRQZXRJZE1hcHBpbmcoX3RvLCBfcGV0SWQpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyoqKiBSZWFkIEFjY2VzcyAqKiovLwogICAgZnVuY3Rpb24gZ2V0UGV0Q2FyZFNlcmllcyh1aW50OCBfcGV0Q2FyZFNlcmllc0lkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50OCBwZXRDYXJkU2VyaWVzSWQsIHVpbnQzMiBjdXJyZW50UGV0VG90YWwsIHVpbnQzMiBtYXhQZXRUb3RhbCkgewogICAgICAgIFBldENhcmRTZXJpZXMgbWVtb3J5IHNlcmllcyA9IHBldENhcmRTZXJpZXNDb2xsZWN0aW9uW19wZXRDYXJkU2VyaWVzSWRdOwogICAgICAgIHBldENhcmRTZXJpZXNJZCA9IHNlcmllcy5wZXRDYXJkU2VyaWVzSWQ7CiAgICAgICAgY3VycmVudFBldFRvdGFsID0gc2VyaWVzLmN1cnJlbnRQZXRUb3RhbDsKICAgICAgICBtYXhQZXRUb3RhbCA9IHNlcmllcy5tYXhQZXRUb3RhbDsKICAgIH0KCQoJZnVuY3Rpb24gZ2V0UGV0KHVpbnQgX3BldElkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50IHBldElkLCB1aW50OCBwZXRDYXJkU2VyaWVzSWQsIHN0cmluZyBuYW1lLCB1aW50OCBsdWNrLCB1aW50MTYgYXVyYVJlZCwgdWludDE2IGF1cmFCbHVlLCB1aW50MTYgYXVyYVllbGxvdywgdWludDY0IGxhc3RUcmFpbmluZ1RpbWUsIHVpbnQ2NCBsYXN0QnJlZWRpbmdUaW1lLCBhZGRyZXNzIG93bmVyKSB7CiAgICAgICAgUGV0IG1lbW9yeSBwZXQgPSBwZXRDb2xsZWN0aW9uW19wZXRJZF07CiAgICAgICAgcGV0SWQgPSBwZXQucGV0SWQ7CiAgICAgICAgcGV0Q2FyZFNlcmllc0lkID0gcGV0LnBldENhcmRTZXJpZXNJZDsKICAgICAgICBuYW1lID0gcGV0Lm5hbWU7CiAgICAgICAgbHVjayA9IHBldC5sdWNrOwogICAgICAgIGF1cmFSZWQgPSBwZXQuYXVyYVJlZDsKICAgICAgICBhdXJhQmx1ZSA9IHBldC5hdXJhQmx1ZTsKICAgICAgICBhdXJhWWVsbG93ID0gcGV0LmF1cmFZZWxsb3c7CiAgICAgICAgbGFzdFRyYWluaW5nVGltZSA9IHBldC5sYXN0VHJhaW5pbmdUaW1lOwogICAgICAgIGxhc3RCcmVlZGluZ1RpbWUgPSBwZXQubGFzdEJyZWVkaW5nVGltZTsKICAgICAgICBvd25lciA9IHBldC5vd25lcjsKICAgIH0KCQoJZnVuY3Rpb24gZ2V0T3duZXJQZXRDb3VudChhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBvd25lclBldENvbGxlY3Rpb25bX293bmVyXS5sZW5ndGg7CiAgICB9CgkKCWZ1bmN0aW9uIGdldFBldEJ5SW5kZXgoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2luZGV4KSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50KSB7CiAgICAgICAgaWYgKF9pbmRleCA+PSBvd25lclBldENvbGxlY3Rpb25bX293bmVyXS5sZW5ndGgpCiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIHJldHVybiBvd25lclBldENvbGxlY3Rpb25bX293bmVyXVtfaW5kZXhdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRvdGFsUGV0Q2FyZFNlcmllcygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50OCkgewogICAgICAgIHJldHVybiB0b3RhbFBldENhcmRTZXJpZXM7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VG90YWxQZXRzKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdG90YWxQZXRzOwogICAgfQp9'.
	

]
