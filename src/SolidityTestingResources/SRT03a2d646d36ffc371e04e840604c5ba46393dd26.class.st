Class {
	#name : #SRT03a2d646d36ffc371e04e840604c5ba46393dd26,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT03a2d646d36ffc371e04e840604c5ba46393dd26 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5ID49MC40LjEwOwoKY29udHJhY3QgVG9rZW4gewoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCBhbW91bnQpIHJldHVybnMoYm9vbCk7CglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IGFtb3VudCkgcmV0dXJucyhib29sKTsKCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIGFkZHIpIGNvbnN0YW50IHJldHVybnModWludCk7Cn0KCmNvbnRyYWN0IE93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogICAgLyoqCiAgICAgKiBFdmVudHMKICAgICAqLwogICAgZXZlbnQgQ2hhbmdlZE93bmVyKGFkZHJlc3MgaW5kZXhlZCBuZXdfb3duZXIpOwoKICAgIC8qKgogICAgICogRnVuY3Rpb25hbGl0eQogICAgICovCgogICAgZnVuY3Rpb24gT3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgbmV3T3duZXIgPSBfbmV3T3duZXI7CiAgICB9CgogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgZXh0ZXJuYWwgewogICAgICAgIGlmIChtc2cuc2VuZGVyID09IG5ld093bmVyKSB7CiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgICAgIG5ld093bmVyID0gMHgwOwogICAgICAgICAgICBDaGFuZ2VkT3duZXIob3duZXIpOwogICAgICAgIH0KICAgIH0KfQoKY29udHJhY3QgSU93bmVkIHsKICAgIGZ1bmN0aW9uIG93bmVyKCkgcmV0dXJucyAoYWRkcmVzcyk7CiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpOwp9CgovKioKICogU2F2aW5ncyBpcyBhIGNvbnRyYWN0IHRoYXQgcmVsZWFzZXMgVG9rZW5zIG9uIGEgcHJlZGVmaW5lZAogKiBzY2hlZHVsZSwgYW5kIGFsbG9jYXRlcyBib251cyB0b2tlbnMgdXBvbiB3aXRoZHJhd2FsIG9uIGEKICogcHJvcG9ydGlvbmFsIGJhc2lzLCBkZXRlcm1pbmVkIGJ5IHRoZSByYXRpbyBvZiBkZXBvc2l0ZWQgdG9rZW5zCiAqIHRvIHRvdGFsIG93bmVkIHRva2Vucy4KICoKICogVGhlIGRpc3RyaWJ1dGlvbiBzY2hlZHVsZSBjb25zaXN0cyBvZiBhIG1vbnRobHkgd2l0aGRyYXdhbCBzY2hlZHVsZQogKiByZXNwb25zaWJsZSBmb3IgZGlzdHJpYnV0aW9uIDc1JSBvZiB0aGUgdG90YWwgc2F2aW5ncywgYW5kIGEKICogb25lLW9mZiB3aXRoZHJhd2FsIGV2ZW50IGF2YWlsYWJsZSBiZWZvcmUgb3IgYXQgdGhlIHN0YXJ0IG9mIHRoZQogKiB3aXRoZHJhd2FsIHNjaGVkdWxlLCBkaXN0cmlidXRpbmcgMjUlIG9mIHRoZSB0b3RhbCBzYXZpbmdzLgogKgogKiBUbyBiZSBleGFjdCwgdXBvbiBjb250cmFjdCBkZXBsb3ltZW50IHRoZXJlIG1heSBiZSBhIHBlcmlvZCBvZiB0aW1lIGluIHdoaWNoCiAqIG9ubHkgdGhlIG9uZS1vZmYgd2l0aGRyYXdhbCBldmVudCBpcyBhdmFpbGFibGUsIGRlZmluZSB0aGlzIHBlcmlvZCBvZiB0aW1lIGFzOgogKiBbdGltZXN0YW1wKHN0YXJ0KSwgdGltZXN0YW1wKHN0YXJ0QmxvY2tUaW1lc3RhbXApKSwKICoKICogVGhlbiB0aGUgcGVyaW9kaWMgd2l0aGRyYXdhbCByYW5nZSBpcyBkZWZpbmVkIGFzOgogKiBbdGltZXN0YW1wKHN0YXJ0QmxvY2tUaW1lc3RhbXApLCAraW5mKQogKgogKiBETyBOT1QgU0VORCBUT0tFTlMgVE8gVEhJUyBDT05UUkFDVC4gVXNlIHRoZSBkZXBvc2l0KCkgb3IgZGVwb3NpdFRvKCkgbWV0aG9kLgogKiBBcyBhbiBleGNlcHRpb24sIHRva2VucyB0cmFuc2ZlcnJlZCB0byB0aGlzIGNvbnRyYWN0IGJlZm9yZSBsb2NraW5nIGFyZSB0aGUKICogYm9udXMgdG9rZW5zIHRoYXQgYXJlIGRpc3RyaWJ1dGVkLgogKi8KY29udHJhY3QgU2F2aW5ncyBpcyBPd25lZCB7CgkvKioKCSAqIFBlcmlvZHMgaXMgdGhlIHRvdGFsIG1vbnRobHkgd2l0aGRyYXdhYmxlIGFtb3VudCwgbm90IGNvdW50aW5nIHRoZQoJICogc3BlY2lhbCB3aXRoZHJhd2FsLgoJICovCgl1aW50IHB1YmxpYyBwZXJpb2RzOwoKCS8qKgoJICogdDBzcGVjaWFsIGlzIGFuIGFkZGl0aW9uYWwgbXVsdGlwbGllciB0aGF0IGRldGVybWluZXMgd2hhdAoJICogZnJhY3Rpb24gb2YgdGhlIHRvdGFsIGRpc3RyaWJ1dGlvbiBpcyBkaXN0cmlidXRlZCBpbiB0aGUKCSAqIG9uZS1vZmYgd2l0aGRyYXdhbCBldmVudC4gSXQgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoCgkgKiBhIHBlcmlvZGljIG11bHRpcGxpZXIgKHApIHRvIGRldGVybWluZSB0aGUgdG90YWwgc2F2aW5ncyB3aXRoZHJhd2FibGUKCSAqIHRvIHRoZSB1c2VyIGF0IHRoYXQgcG9pbnQgaW4gdGltZS4KCSAqCgkgKiBUaGUgdmFsdWUgaXMgbm90IHNldCwgaXQgaXMgY2FsY3VsYXRlZCBiYXNlZCBvbiBwZXJpb2RzCgkgKi8KCXVpbnQgcHVibGljIHQwc3BlY2lhbDsKCgl1aW50IGNvbnN0YW50IHB1YmxpYyBpbnRlcnZhbFNlY3MgPSAzMCBkYXlzOwoJdWludCBjb25zdGFudCBwdWJsaWMgcHJlY2lzaW9uID0gMTAgKiogMTg7CgoKCS8qKgoJICogRXZlbnRzCgkgKi8KCWV2ZW50IFdpdGhkcmF3cyhhZGRyZXNzIGluZGV4ZWQgd2hvLCB1aW50IGFtb3VudCk7CglldmVudCBEZXBvc2l0KGFkZHJlc3MgaW5kZXhlZCB3aG8sIHVpbnQgYW1vdW50KTsKCglib29sIHB1YmxpYyBpbml0ZWQ7Cglib29sIHB1YmxpYyBsb2NrZWQ7Cgl1aW50IHB1YmxpYyBzdGFydEJsb2NrVGltZXN0YW1wID0gMDsKCglUb2tlbiBwdWJsaWMgdG9rZW47CgoJLy8gZmFjZSB2YWx1ZSBkZXBvc2l0ZWQgYnkgYW4gYWRkcmVzcyBiZWZvcmUgbG9ja2luZwoJbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgZGVwb3NpdGVkOwoKCS8vIHRvdGFsIGZhY2UgdmFsdWUgZGVwb3NpdGVkOyBzdW0gb2YgZGVwb3NpdGVkCgl1aW50IHB1YmxpYyB0b3RhbGZ2OwoKCS8vIHRoZSB0b3RhbCByZW1haW5pbmcgdmFsdWUKCXVpbnQgcHVibGljIHJlbWFpbmRlcjsKCgkvKioKCSAqIFRvdGFsIHRva2VucyBvd25lZCBieSB0aGUgY29udHJhY3QgYWZ0ZXIgbG9ja2luZywgYW5kIHBvc3NpYmx5CgkgKiB1cGRhdGVkIGJ5IHRoZSBmb3VuZGF0aW9uIGFmdGVyIHN1YnNlcXVlbnQgc2FsZXMuCgkgKi8KCXVpbnQgcHVibGljIHRvdGFsOwoKCS8vIHRoZSB0b3RhbCB2YWx1ZSB3aXRoZHJhd24KCW1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHdpdGhkcmF3bjsKCglib29sIHB1YmxpYyBudWxsaWZpZWQ7CgoJbW9kaWZpZXIgbm90TnVsbGlmaWVkKCkgeyByZXF1aXJlKCFudWxsaWZpZWQpOyBfOyB9CgoJbW9kaWZpZXIgcHJlTG9jaygpIHsgcmVxdWlyZSghbG9ja2VkICYmIHN0YXJ0QmxvY2tUaW1lc3RhbXAgPT0gMCk7IF87IH0KCgkvKioKCSAqIExvY2sgY2FsbGVkLCBkZXBvc2l0cyBubyBsb25nZXIgYXZhaWxhYmxlLgoJICovCgltb2RpZmllciBwb3N0TG9jaygpIHsgcmVxdWlyZShsb2NrZWQpOyBfOyB9CgoJLyoqCgkgKiBQcmVzdGFydCwgc3RhdGUgaXMgYWZ0ZXIgbG9jaywgYmVmb3JlIHN0YXJ0CgkgKi8KCW1vZGlmaWVyIHByZVN0YXJ0KCkgeyByZXF1aXJlKGxvY2tlZCAmJiBzdGFydEJsb2NrVGltZXN0YW1wID09IDApOyBfOyB9CgoJLyoqCgkgKiBTdGFydCBjYWxsZWQsIHRoZSBzYXZpbmdzIGNvbnRyYWN0IGlzIG5vdyBmaW5hbGl6ZWQsIGFuZCB3aXRoZHJhd2FscwoJICogYXJlIG5vdyBwZXJtaXR0ZWQuCgkgKi8KCW1vZGlmaWVyIHBvc3RTdGFydCgpIHsgcmVxdWlyZShsb2NrZWQgJiYgc3RhcnRCbG9ja1RpbWVzdGFtcCAhPSAwKTsgXzsgfQoKCS8qKgoJICogVW5pbml0aWFsaXplZCBzdGF0ZSwgYmVmb3JlIGluaXQgaXMgY2FsbGVkLiBNYWlubHkgdXNlZCBhcyBhIGd1YXJkIHRvCgkgKiBmaW5hbGl6ZSBwZXJpb2RzIGFuZCB0MHNwZWNpYWwuCgkgKi8KCW1vZGlmaWVyIG5vdEluaXRpYWxpemVkKCkgeyByZXF1aXJlKCFpbml0ZWQpOyBfOyB9CgoJLyoqCgkgKiBQb3N0IGluaXRpYWxpemF0aW9uIHN0YXRlLCBtYWlubHkgdXNlZCB0byBndWFyYW50ZWUgdGhhdAoJICogcGVyaW9kcyBhbmQgdDBzcGVjaWFsIGhhdmUgYmVlbiBzZXQgcHJvcGVybHkgYmVmb3JlIHN0YXJ0aW5nCgkgKiB0aGUgd2l0aGRyYXdhbCBwcm9jZXNzLgoJICovCgltb2RpZmllciBpbml0aWFsaXplZCgpIHsgcmVxdWlyZShpbml0ZWQpOyBfOyB9CgoJLyoqCgkgKiBSZXZlcnQgdW5kZXIgYWxsIGNvbmRpdGlvbnMgZm9yIGZhbGxiYWNrLCBjaGVhcGVyIG1pc3Rha2VzCgkgKiBpbiB0aGUgZnV0dXJlPwoJICovCglmdW5jdGlvbigpIHsKCQlyZXZlcnQoKTsKCX0KCgkvKioKCSAqIE51bGxpZnkgZnVuY3Rpb25hbGl0eSBpcyBpbnRlbmRlZCB0byBkaXNhYmxlIHRoZSBjb250cmFjdC4KCSAqLwoJZnVuY3Rpb24gbnVsbGlmeSgpIG9ubHlPd25lciB7CgkJbnVsbGlmaWVkID0gdHJ1ZTsKCX0KCgkvKioKCSAqIEluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLCBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGNvbnRyYWN0IGRlcGxveW1lbnQuIFRoZQoJICogYWRkaXRpb24gb2YgdGhpcyBmdW5jdGlvbiBhbGxvd3MgY29udHJhY3QgY29tcGlsYXRpb24gdG8gYmUgc2ltcGxpZmllZAoJICogdG8gb25lIGNvbnRyYWN0LCBpbnN0ZWFkIG9mIHR3by4KCSAqCgkgKiBwZXJpb2RzIGFuZCB0MHNwZWNpYWwgYXJlIGZpbmFsaXplZCwgYW5kIGVmZmVjdGl2ZWx5IGludmFyaWFudCwgYWZ0ZXIKCSAqIGluaXQgaXMgY2FsbGVkIGZvciB0aGUgZmlyc3QgdGltZS4KCSAqLwoJZnVuY3Rpb24gaW5pdCh1aW50IF9wZXJpb2RzLCB1aW50IF90MHNwZWNpYWwpIG9ubHlPd25lciBub3RJbml0aWFsaXplZCB7CgkJcmVxdWlyZShfcGVyaW9kcyAhPSAwKTsKCQlwZXJpb2RzID0gX3BlcmlvZHM7CgkJdDBzcGVjaWFsID0gX3Qwc3BlY2lhbDsKCX0KCglmdW5jdGlvbiBmaW5hbGl6ZUluaXQoKSBvbmx5T3duZXIgbm90SW5pdGlhbGl6ZWQgewoJCWluaXRlZCA9IHRydWU7Cgl9CgoJZnVuY3Rpb24gc2V0VG9rZW4oYWRkcmVzcyB0b2spIG9ubHlPd25lciB7CgkJdG9rZW4gPSBUb2tlbih0b2spOwoJfQoKCS8qKgoJICogTG9jayBpcyBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIGxvY2sgdGhlIHNhdmluZ3MgY29udHJhY3QKCSAqIHNvIHRoYXQgbm8gbW9yZSBkZXBvc2l0cyBtYXkgYmUgbWFkZS4KCSAqLwoJZnVuY3Rpb24gbG9jaygpIG9ubHlPd25lciB7CgkJbG9ja2VkID0gdHJ1ZTsKCX0KCgkvKioKCSAqIFN0YXJ0cyB0aGUgZGlzdHJpYnV0aW9uIG9mIHNhdmluZ3MsIGl0IHNob3VsZCBiZSBjYWxsZWQKCSAqIGFmdGVyIGxvY2soKSwgb25jZSBhbGwgb2YgdGhlIGJvbnVzIHRva2VucyBhcmUgc2VuZCB0byB0aGlzIGNvbnRyYWN0LAoJICogYW5kIG11bHRpTWludCBoYXMgYmVlbiBjYWxsZWQuCgkgKi8KCWZ1bmN0aW9uIHN0YXJ0KHVpbnQgX3N0YXJ0QmxvY2tUaW1lc3RhbXApIG9ubHlPd25lciBpbml0aWFsaXplZCBwcmVTdGFydCB7CgkJc3RhcnRCbG9ja1RpbWVzdGFtcCA9IF9zdGFydEJsb2NrVGltZXN0YW1wOwoJCXVpbnQyNTYgdG9rZW5CYWxhbmNlID0gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwoJCXRvdGFsID0gdG9rZW5CYWxhbmNlOwoJCXJlbWFpbmRlciA9IHRva2VuQmFsYW5jZTsKCX0KCgkvKioKCSAqIENoZWNrIHdpdGhkcmF3YWwgaXMgbGl2ZSwgdXNlZnVsIGZvciBjaGVja2luZyB3aGV0aGVyCgkgKiB0aGUgc2F2aW5ncyBjb250cmFjdCBpcyAibGl2ZSIsIHdpdGhkcmF3YWwgZW5hYmxlZCwgc3RhcnRlZC4KCSAqLwoJZnVuY3Rpb24gaXNTdGFydGVkKCkgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CgkJcmV0dXJuIGxvY2tlZCAmJiBzdGFydEJsb2NrVGltZXN0YW1wICE9IDA7Cgl9CgoJLy8gaWYgc29tZW9uZSBhY2NpZGVudGFsbHkgdHJhbnNmZXJzIHRva2VucyB0byB0aGlzIGNvbnRyYWN0LAoJLy8gdGhlIG93bmVyIGNhbiByZXR1cm4gdGhlbSBhcyBsb25nIGFzIGRpc3RyaWJ1dGlvbiBoYXNuJ3Qgc3RhcnRlZAoKCS8qKgoJICogVXNlZCB0byByZWZ1bmQgdXNlcnMgd2hvIGFjY2lkZW50YWx5IHRyYW5zZmVycmVkIHRva2VucyB0byB0aGlzCgkgKiBjb250cmFjdCwgb25seSBhdmFpbGFibGUgYmVmb3JlIGNvbnRyYWN0IGlzIGxvY2tlZAoJICovCglmdW5jdGlvbiByZWZ1bmRUb2tlbnMoYWRkcmVzcyBhZGRyLCB1aW50IGFtb3VudCkgb25seU93bmVyIHByZUxvY2sgewoJCXRva2VuLnRyYW5zZmVyKGFkZHIsIGFtb3VudCk7Cgl9CgoKCS8qKgoJICogVXBkYXRlIHRoZSB0b3RhbCBiYWxhbmNlLCB0byBiZSBjYWxsZWQgaW4gY2FzZSBvZiBzdWJzZXF1ZW50IHNhbGVzLiBVcGRhdGVzCgkgKiB0aGUgdG90YWwgcmVjb3JkZWQgYmFsYW5jZSBvZiB0aGUgY29udHJhY3QgYnkgdGhlIGRpZmZlcmVuY2UgaW4gZXhwZWN0ZWQKCSAqIHJlbWFpbmRlciBhbmQgdGhlIGN1cnJlbnQgYmFsYW5jZS4gVGhpcyBtZWFucyBhbnkgcG9zaXRpdmUgZGlmZmVyZW5jZSB3aWxsCgkgKiBiZSAicmVjb3JkZWQiIGludG8gdGhlIGNvbnRyYWN0LCBhbmQgZGlzdHJpYnV0ZWQgd2l0aGluIHRoZSByZW1haW5pbmcKCSAqIG1vbnRocyBvZiB0aGUgVFJTLgoJICovCglmdW5jdGlvbiB1cGRhdGVUb3RhbCgpIG9ubHlPd25lciBwb3N0TG9jayB7CgkJdWludCBjdXJyZW50ID0gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwoJCXJlcXVpcmUoY3VycmVudCA+PSByZW1haW5kZXIpOyAvLyBmb3Igc2FuaXR5CgoJCXVpbnQgZGlmZmVyZW5jZSA9IChjdXJyZW50IC0gcmVtYWluZGVyKTsKCQl0b3RhbCArPSBkaWZmZXJlbmNlOwoJCXJlbWFpbmRlciA9IGN1cnJlbnQ7Cgl9CgoJLyoqCgkgKiBDYWxjdWxhdGVzIHRoZSBtb250aGx5IHBlcmlvZCwgc3RhcnRpbmcgYWZ0ZXIgdGhlIHN0YXJ0QmxvY2tUaW1lc3RhbXAsCgkgKiBwZXJpb2RBdCB3aWxsIHJldHVybiAwIGZvciBhbGwgdGltZXN0YW1wcyBiZWZvcmUgc3RhcnRCbG9ja1RpbWVzdGFtcC4KCSAqCgkgKiBUaGVyZWZvcmUgcGVyaW9kIDAgaXMgdGhlIHJhbmdlIG9mIHRpbWUgaW4gd2hpY2ggd2UgaGF2ZSBjYWxsZWQgc3RhcnQoKSwKCSAqIGJ1dCBoYXZlIG5vdCB5ZXQgcGFzc2VkIHN0YXJ0QmxvY2tUaW1lc3RhbXAuIFBlcmlvZCAxIGlzIHRoZQoJICogZmlyc3QgbW9udGhseSBwZXJpb2QsIGFuZCBzby1mb3J0aCBhbGwgdGhlIHdheSB1bnRpbCB0aGUgbGFzdAoJICogcGVyaW9kID09IHBlcmlvZHMuCgkgKgoJICogTk9URTogbm90IGd1YXJkZWQgc2luY2Ugbm8gc3RhdGUgbW9kaWZpY2F0aW9ucyBhcmUgbWFkZS4gSG93ZXZlciwKCSAqIGl0IHdpbGwgcmV0dXJuIGludmFsaWQgZGF0YSBiZWZvcmUgdGhlIHBvc3RTdGFydCBzdGF0ZS4gSXQgaXMKCSAqIHVwIHRvIHRoZSB1c2VyIHRvIG1hbnVhbGx5IGNoZWNrIHRoYXQgdGhlIGNvbnRyYWN0IGlzIGluCgkgKiBwb3N0U3RhcnQgc3RhdGUuCgkgKi8KCWZ1bmN0aW9uIHBlcmlvZEF0KHVpbnQgX2Jsb2NrVGltZXN0YW1wKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKCQkvKioKCQkgKiBMb3dlciBib3VuZCwgY29uc2lkZXIgcGVyaW9kIDAgdG8gYmUgdGhlIHRpbWUgYmV0d2VlbgoJCSAqIHN0YXJ0KCkgYW5kIHN0YXJ0QmxvY2tUaW1lc3RhbXAKCQkgKi8KCQlpZiAoc3RhcnRCbG9ja1RpbWVzdGFtcCA+IF9ibG9ja1RpbWVzdGFtcCkKCQkJcmV0dXJuIDA7CgoJCS8qKgoJCSAqIENhbGN1bGF0ZSB0aGUgYXBwcm9wcmlhdGUgcGVyaW9kLCBhbmQgc2V0IGFuIHVwcGVyIGJvdW5kIG9mCgkJICogcGVyaW9kcyAtIDEuCgkJICovCgkJdWludCBwID0gKChfYmxvY2tUaW1lc3RhbXAgLSBzdGFydEJsb2NrVGltZXN0YW1wKSAvIGludGVydmFsU2VjcykgKyAxOwoJCWlmIChwID4gcGVyaW9kcykKCQkJcCA9IHBlcmlvZHM7CgkJcmV0dXJuIHA7Cgl9CgoJLy8gd2hhdCB3aXRoZHJhd2FsIHBlcmlvZCBhcmUgd2UgaW4/CgkvLyByZXR1cm5zIHRoZSBwZXJpb2QgbnVtYmVyIGZyb20gWzAsIHBlcmlvZHMpCglmdW5jdGlvbiBwZXJpb2QoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKCQlyZXR1cm4gcGVyaW9kQXQoYmxvY2sudGltZXN0YW1wKTsKCX0KCgkvLyBkZXBvc2l0IHlvdXIgdG9rZW5zIHRvIGJlIHNhdmVkCgkvLwoJLy8gdGhlIGRlc3Bvc2l0b3IgbXVzdCBoYXZlIGFwcHJvdmUoKSdkIHRoZSB0b2tlbnMKCS8vIHRvIGJlIHRyYW5zZmVycmVkIGJ5IHRoaXMgY29udHJhY3QKCWZ1bmN0aW9uIGRlcG9zaXQodWludCB0b2tlbnMpIG9ubHlPd25lciBub3ROdWxsaWZpZWQgewoJCWRlcG9zaXRUbyhtc2cuc2VuZGVyLCB0b2tlbnMpOwoJfQoKCglmdW5jdGlvbiBkZXBvc2l0VG8oYWRkcmVzcyBiZW5lZmljaWFyeSwgdWludCB0b2tlbnMpIG9ubHlPd25lciBwcmVMb2NrIG5vdE51bGxpZmllZCB7CgkJcmVxdWlyZSh0b2tlbi50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgdG9rZW5zKSk7CgkgICAgZGVwb3NpdGVkW2JlbmVmaWNpYXJ5XSArPSB0b2tlbnM7CgkJdG90YWxmdiArPSB0b2tlbnM7CgkJRGVwb3NpdChiZW5lZmljaWFyeSwgdG9rZW5zKTsKCX0KCgkvLyBjb252ZW5pZW5jZSBmdW5jdGlvbiBmb3Igb3duZXI6IGRlcG9zaXQgb24gYmVoYWxmIG9mIG1hbnkKCWZ1bmN0aW9uIGJ1bGtEZXBvc2l0VG8odWludDI1NltdIGJpdHMpIG9ubHlPd25lciB7CgkJdWludDI1NiBsb21hc2sgPSAoMSA8PCA5NikgLSAxOwoJCWZvciAodWludCBpPTA7IGk8Yml0cy5sZW5ndGg7IGkrKykgewoJCQlhZGRyZXNzIGEgPSBhZGRyZXNzKGJpdHNbaV0+Pjk2KTsKCQkJdWludCB2YWwgPSBiaXRzW2ldJmxvbWFzazsKCQkJZGVwb3NpdFRvKGEsIHZhbCk7CgkJfQoJfQoKCS8vIHdpdGhkcmF3IHdpdGhkcmF3cyB0b2tlbnMgdG8gdGhlIHNlbmRlcgoJLy8gd2l0aGRyYXcgY2FuIGJlIGNhbGxlZCBhdCBtb3N0IG9uY2UgcGVyIHJlZGVtcHRpb24gcGVyaW9kCglmdW5jdGlvbiB3aXRoZHJhdygpIG5vdE51bGxpZmllZCByZXR1cm5zKGJvb2wpIHsKCQlyZXR1cm4gd2l0aGRyYXdUbyhtc2cuc2VuZGVyKTsKCX0KCgkvKioKCSAqIENhbGN1bGF0ZXMgdGhlIGZyYWN0aW9uIG9mIHRvdGFsIChvbmUtb2ZmICsgbW9udGhseSkgd2l0aGRyYXdhYmxlCgkgKiBnaXZlbiB0aGUgY3VycmVudCB0aW1lc3RhbXAuIE5vIGd1YXJkcyBkdWUgdG8gZnVuY3Rpb24gYmVpbmcgY29uc3RhbnQuCgkgKiBXaWxsIG91dHB1dCBpbnZhbGlkIGRhdGEgdW50aWwgdGhlIHBvc3RTdGFydCBzdGF0ZS4gSXQgaXMgdXAgdG8gdGhlIHVzZXIKCSAqIHRvIG1hbnVhbGx5IGNvbmZpcm0gY29udHJhY3QgaXMgaW4gcG9zdFN0YXJ0IHN0YXRlLgoJICovCglmdW5jdGlvbiBhdmFpbGFibGVGb3JXaXRoZHJhd2FsQXQodWludDI1NiBibG9ja1RpbWVzdGFtcCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewoJCS8qKgoJCSAqIENhbGN1bGF0ZSB0aGUgdG90YWwgd2l0aGRyYXdhYmxlLCBnaXZpbmcgYSBudW1lcmF0b3Igd2l0aCByYW5nZToKCQkgKiBbMC4yNSAqIDEwICoqIDE4LCAxICogMTAgKiogMThdCgkJICovCgkJcmV0dXJuICgodDBzcGVjaWFsICsgcGVyaW9kQXQoYmxvY2tUaW1lc3RhbXApKSAqIHByZWNpc2lvbikgLyAodDBzcGVjaWFsICsgcGVyaW9kcyk7Cgl9CgoJLyoqCgkgKiBCdXNpbmVzcyBsb2dpYyBvZiBfd2l0aGRyYXdUbywgdGhlIGNvZGUgaXMgc2VwYXJhdGVkIHRoaXMgd2F5IG1haW5seSBmb3IKCSAqIHRlc3RpbmcuIFdlIGNhbiBpbmplY3QgYW5kIHRlc3QgcGFyYW1ldGVycyBmcmVlbHkgd2l0aG91dCB3b3JyeWluZyBhYm91dCB0aGUKCSAqIGJsb2NrY2hhaW4gbW9kZWwuCgkgKgoJICogTk9URTogU2luY2UgZnVuY3Rpb24gaXMgY29uc3RhbnQsIG5vIGd1YXJkcyBhcmUgYXBwbGllZC4gVGhpcyBmdW5jdGlvbiB3aWxsIGdpdmUKCSAqIGludmFsaWQgb3V0cHV0cyB1bmxlc3MgaW4gcG9zdFN0YXJ0IHN0YXRlLiBJdCBpcyB1cCB0byB1c2VyIHRvIG1hbnVhbGx5IGNoZWNrCgkgKiB0aGF0IHRoZSBjb3JyZWN0IHN0YXRlIGlzIGdpdmVuIChpc1N0YXJ0KCkgPT0gdHJ1ZSkKCSAqLwoJZnVuY3Rpb24gX3dpdGhkcmF3VG8odWludCBfZGVwb3NpdCwgdWludCBfd2l0aGRyYXduLCB1aW50IF9ibG9ja1RpbWVzdGFtcCwgdWludCBfdG90YWwpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKCQl1aW50MjU2IGZyYWN0aW9uID0gYXZhaWxhYmxlRm9yV2l0aGRyYXdhbEF0KF9ibG9ja1RpbWVzdGFtcCk7CgoJCS8qKgoJCSAqIFRoZXJlIGFyZSBjb25jZXJucyB0aGF0IHRoZSBtdWx0aXBsaWNhdGlvbiBjb3VsZCBwb3NzaWJseQoJCSAqIG92ZXJmbG93LCBob3dldmVyIHRoaXMgc2hvdWxkIG5vdCBiZSB0aGUgY2FzZSBpZiB3ZSBjYWxjdWxhdGUKCQkgKiB0aGUgdXBwZXIgYm91bmQgYmFzZWQgb24gb3VyIGtub3duIHBhcmFtZXRlcnM6CgkJICoKCQkgKiBMZXRzIGFzc3VtZSB0aGUgbWludGVkIHRva2VuIGFtb3VudCB0byBiZSA1MDAgbWlsbGlvbiAocmVhc29uYWJsZSksCgkJICogZ2l2ZW4gYSBwcmVjaXNpb24gb2YgOCBkZWNpbWFsIHBsYWNlcywgd2UgZ2V0OgoJCSAqIGRlcG9zaXRlZFthZGRyXSA9IDUgKiAoMTAgKiogOCkgKiAoMTAgKiogOCkgPSA1ICogKDEwICoqIDE2KQoJCSAqCgkJICogVGhlIG1heCBmb3IgZnJhY3Rpb24gPSAxMCAqKiAxOCwgYW5kIHRoZSBtYXggZm9yIHRvdGFsIGlzCgkJICogYWxzbyA1ICogKDEwICoqIDE2KS4KCQkgKgoJCSAqIFRoZXJlZm9yZToKCQkgKiBkZXBvc2l0ZWRbYWRkcl0gKiBmcmFjdGlvbiAqIHRvdGFsID0gMi41ICogKDEwICoqIDUxKQoJCSAqCgkJICogVGhlIG1heGltdW0gZm9yIGEgdWludDI1NiBpcyA9IDEuMTUgKiAoMTAgKiogNzcpCgkJICovCgkJdWludDI1NiB3aXRoZHJhd2FibGUgPSAoKF9kZXBvc2l0ICogZnJhY3Rpb24gKiBfdG90YWwpIC8gdG90YWxmdikgLyBwcmVjaXNpb247CgoJCS8vIGNoZWNrIHRoYXQgd2UgY2FuIHdpdGhkcmF3IHNvbWV0aGluZwoJCWlmICh3aXRoZHJhd2FibGUgPiBfd2l0aGRyYXduKSB7CgkJCXJldHVybiB3aXRoZHJhd2FibGUgLSBfd2l0aGRyYXduOwoJCX0KCQlyZXR1cm4gMDsKCX0KCgkvKioKCSAqIFB1YmxpYyBmYWNpbmcgd2l0aGRyYXdUbywgaW5qZWN0cyBidXNpbmVzcyBsb2dpYyB3aXRoCgkgKiB0aGUgY29ycmVjdCBtb2RlbC4KCSAqLwoJZnVuY3Rpb24gd2l0aGRyYXdUbyhhZGRyZXNzIGFkZHIpIHBvc3RTdGFydCBub3ROdWxsaWZpZWQgcmV0dXJucyAoYm9vbCkgewoJCXVpbnQgX2QgPSBkZXBvc2l0ZWRbYWRkcl07CgkJdWludCBfdyA9IHdpdGhkcmF3blthZGRyXTsKCgkJdWludCBkaWZmID0gX3dpdGhkcmF3VG8oX2QsIF93LCBibG9jay50aW1lc3RhbXAsIHRvdGFsKTsKCgkJLy8gbm8gd2l0aGRyYXdhbCBjb3VsZCBiZSBtYWRlCgkJaWYgKGRpZmYgPT0gMCkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQkvLyBjaGVjayB0aGF0IHdlIGNhbm5vdCB3aXRoZHJhdyBtb3JlIHRoYW4gbWF4CgkJcmVxdWlyZSgoZGlmZiArIF93KSA8PSAoKF9kICogdG90YWwpIC8gdG90YWxmdikpOwoKCQkvLyB0cmFuc2ZlciBhbmQgaW5jcmVtZW50CgkJcmVxdWlyZSh0b2tlbi50cmFuc2ZlcihhZGRyLCBkaWZmKSk7CgoJCXdpdGhkcmF3blthZGRyXSArPSBkaWZmOwoJCXJlbWFpbmRlciAtPSBkaWZmOwoJCVdpdGhkcmF3cyhhZGRyLCBkaWZmKTsKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvLyBmb3JjZSB3aXRoZHJhd2FsIHRvIG1hbnkgYWRkcmVzc2VzCglmdW5jdGlvbiBidWxrV2l0aGRyYXcoYWRkcmVzc1tdIGFkZHJzKSBub3ROdWxsaWZpZWQgewoJCWZvciAodWludCBpPTA7IGk8YWRkcnMubGVuZ3RoOyBpKyspCgkJCXdpdGhkcmF3VG8oYWRkcnNbaV0pOwoJfQoKCS8vIENvZGUgb2ZmIHRoZSBjaGFpbiBpbmZvcm1zIHRoaXMgY29udHJhY3QgYWJvdXQKCS8vIHRva2VucyB0aGF0IHdlcmUgbWludGVkIHRvIGl0IG9uIGJlaGFsZiBvZiBhIGRlcG9zaXRvci4KCS8vCgkvLyBOb3RlOiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGhlcmUgaXMga25vd24gdG8gTmV3IEFsY2hlbXkncwoJLy8gdG9vbGluZywgd2hpY2ggaXMgd2h5IGl0IGlzIGFyZ3VhYmx5IG1pc25hbWVkLgoJdWludCBwdWJsaWMgbWludGluZ05vbmNlOwoJZnVuY3Rpb24gbXVsdGlNaW50KHVpbnQgbm9uY2UsIHVpbnQyNTZbXSBiaXRzKSBvbmx5T3duZXIgcHJlTG9jayB7CgoJCWlmIChub25jZSAhPSBtaW50aW5nTm9uY2UpIHJldHVybjsKCQltaW50aW5nTm9uY2UgKz0gMTsKCQl1aW50MjU2IGxvbWFzayA9ICgxIDw8IDk2KSAtIDE7CgkJdWludCBzdW0gPSAwOwoJCWZvciAodWludCBpPTA7IGk8Yml0cy5sZW5ndGg7IGkrKykgewoJCQlhZGRyZXNzIGEgPSBhZGRyZXNzKGJpdHNbaV0+Pjk2KTsKCQkJdWludCB2YWx1ZSA9IGJpdHNbaV0mbG9tYXNrOwoJCQlkZXBvc2l0ZWRbYV0gKz0gdmFsdWU7CgkJCXN1bSArPSB2YWx1ZTsKCQkJRGVwb3NpdChhLCB2YWx1ZSk7CgkJfQoJCXRvdGFsZnYgKz0gc3VtOwoJfQp9'.
	

]
