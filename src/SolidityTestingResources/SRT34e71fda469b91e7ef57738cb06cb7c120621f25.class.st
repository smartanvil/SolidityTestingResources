Class {
	#name : #SRT34e71fda469b91e7ef57738cb06cb7c120621f25,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT34e71fda469b91e7ef57738cb06cb7c120621f25 >> base64 [
	^ 'LyoKICogU2FmZSBNYXRoIFNtYXJ0IENvbnRyYWN0LiAgQ29weXJpZ2h0ICYjMTY5OyAyMDE24oCTMjAxNyBieSBBQkRLIENvbnN1bHRpbmcuCiAqIEF1dGhvcjogTWlraGFpbCBWbGFkaW1pcm92IDw8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9ImUwOGQ4OThiODg4MTg5OGNjZTk2OGM4MTg0ODk4ZDg5OTI4Zjk2YTA4NzhkODE4OThjY2U4MzhmOGQiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L3NwYW4+PgogKi8KcHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgovKioKICogUHJvdmlkZXMgbWV0aG9kcyB0byBzYWZlbHkgYWRkLCBzdWJ0cmFjdCBhbmQgbXVsdGlwbHkgdWludDI1NiBudW1iZXJzLgogKi8KY29udHJhY3QgU2FmZU1hdGggewogIHVpbnQyNTYgY29uc3RhbnQgcHJpdmF0ZSBNQVhfVUlOVDI1NiA9CiAgICAweEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY7CgogIC8qKgogICAqIEFkZCB0d28gdWludDI1NiB2YWx1ZXMsIHRocm93IGluIGNhc2Ugb2Ygb3ZlcmZsb3cuCiAgICoKICAgKiBAcGFyYW0geCBmaXJzdCB2YWx1ZSB0byBhZGQKICAgKiBAcGFyYW0geSBzZWNvbmQgdmFsdWUgdG8gYWRkCiAgICogQHJldHVybiB4ICsgeQogICAqLwogIGZ1bmN0aW9uIHNhZmVBZGQgKHVpbnQyNTYgeCwgdWludDI1NiB5KQogIHB1cmUgaW50ZXJuYWwKICByZXR1cm5zICh1aW50MjU2IHopIHsKICAgIGFzc2VydCAoeCA8PSBNQVhfVUlOVDI1NiAtIHkpOwogICAgcmV0dXJuIHggKyB5OwogIH0KCiAgLyoqCiAgICogU3VidHJhY3Qgb25lIHVpbnQyNTYgdmFsdWUgZnJvbSBhbm90aGVyLCB0aHJvdyBpbiBjYXNlIG9mIHVuZGVyZmxvdy4KICAgKgogICAqIEBwYXJhbSB4IHZhbHVlIHRvIHN1YnRyYWN0IGZyb20KICAgKiBAcGFyYW0geSB2YWx1ZSB0byBzdWJ0cmFjdAogICAqIEByZXR1cm4geCAtIHkKICAgKi8KICBmdW5jdGlvbiBzYWZlU3ViICh1aW50MjU2IHgsIHVpbnQyNTYgeSkKICBwdXJlIGludGVybmFsCiAgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICBhc3NlcnQgKHggPj0geSk7CiAgICByZXR1cm4geCAtIHk7CiAgfQoKICAvKioKICAgKiBNdWx0aXBseSB0d28gdWludDI1NiB2YWx1ZXMsIHRocm93IGluIGNhc2Ugb2Ygb3ZlcmZsb3cuCiAgICoKICAgKiBAcGFyYW0geCBmaXJzdCB2YWx1ZSB0byBtdWx0aXBseQogICAqIEBwYXJhbSB5IHNlY29uZCB2YWx1ZSB0byBtdWx0aXBseQogICAqIEByZXR1cm4geCAqIHkKICAgKi8KICBmdW5jdGlvbiBzYWZlTXVsICh1aW50MjU2IHgsIHVpbnQyNTYgeSkKICBwdXJlIGludGVybmFsCiAgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICBpZiAoeSA9PSAwKSByZXR1cm4gMDsgLy8gUHJldmVudCBkaXZpc2lvbiBieSB6ZXJvIGF0IHRoZSBuZXh0IGxpbmUKICAgIGFzc2VydCAoeCA8PSBNQVhfVUlOVDI1NiAvIHkpOwogICAgcmV0dXJuIHggKiB5OwogIH0KfQovKgogKiBFSVAtMjAgU3RhbmRhcmQgVG9rZW4gU21hcnQgQ29udHJhY3QgSW50ZXJmYWNlLgogKiBDb3B5cmlnaHQgJiMxNjk7IDIwMTbigJMyMDE4IGJ5IEFCREsgQ29uc3VsdGluZy4KICogQXV0aG9yOiBNaWtoYWlsIFZsYWRpbWlyb3YgPDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iMmY0MjQ2NDQ0NzRlNDY0MzAxNTk0MzRlNGI0NjQyNDY1ZDQwNTk2ZjQ4NDI0ZTQ2NDMwMTRjNDA0MiI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+CiAqLwoKLyoqCiAqIEVSQy0yMCBzdGFuZGFyZCB0b2tlbiBpbnRlcmZhY2UsIGFzIGRlZmluZWQKICogPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvYmxvYi9tYXN0ZXIvRUlQUy9laXAtMjAubWQiPmhlcmU8L2E+LgogKi8KY29udHJhY3QgVG9rZW4gewogIC8qKgogICAqIEdldCB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGluIGNpcmN1bGF0aW9uLgogICAqCiAgICogQHJldHVybiB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGluIGNpcmN1bGF0aW9uCiAgICovCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkgKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwoKICAvKioKICAgKiBHZXQgbnVtYmVyIG9mIHRva2VucyBjdXJyZW50bHkgYmVsb25naW5nIHRvIGdpdmVuIG93bmVyLgogICAqCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIHRvIGdldCBudW1iZXIgb2YgdG9rZW5zIGN1cnJlbnRseSBiZWxvbmdpbmcgdG8gdGhlCiAgICogICAgICAgIG93bmVyIG9mCiAgICogQHJldHVybiBudW1iZXIgb2YgdG9rZW5zIGN1cnJlbnRseSBiZWxvbmdpbmcgdG8gdGhlIG93bmVyIG9mIGdpdmVuIGFkZHJlc3MKICAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YgKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAvKioKICAgKiBUcmFuc2ZlciBnaXZlbiBudW1iZXIgb2YgdG9rZW5zIGZyb20gbWVzc2FnZSBzZW5kZXIgdG8gZ2l2ZW4gcmVjaXBpZW50LgogICAqCiAgICogQHBhcmFtIF90byBhZGRyZXNzIHRvIHRyYW5zZmVyIHRva2VucyB0byB0aGUgb3duZXIgb2YKICAgKiBAcGFyYW0gX3ZhbHVlIG51bWJlciBvZiB0b2tlbnMgdG8gdHJhbnNmZXIgdG8gdGhlIG93bmVyIG9mIGdpdmVuIGFkZHJlc3MKICAgKiBAcmV0dXJuIHRydWUgaWYgdG9rZW5zIHdlcmUgdHJhbnNmZXJyZWQgc3VjY2Vzc2Z1bGx5LCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlciAoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAvKioKICAgKiBUcmFuc2ZlciBnaXZlbiBudW1iZXIgb2YgdG9rZW5zIGZyb20gZ2l2ZW4gb3duZXIgdG8gZ2l2ZW4gcmVjaXBpZW50LgogICAqCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gdGhlIG93bmVyIG9mCiAgICogQHBhcmFtIF90byBhZGRyZXNzIHRvIHRyYW5zZmVyIHRva2VucyB0byB0aGUgb3duZXIgb2YKICAgKiBAcGFyYW0gX3ZhbHVlIG51bWJlciBvZiB0b2tlbnMgdG8gdHJhbnNmZXIgZnJvbSBnaXZlbiBvd25lciB0byBnaXZlbgogICAqICAgICAgICByZWNpcGllbnQKICAgKiBAcmV0dXJuIHRydWUgaWYgdG9rZW5zIHdlcmUgdHJhbnNmZXJyZWQgc3VjY2Vzc2Z1bGx5LCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20gKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkKICBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgLyoqCiAgICogQWxsb3cgZ2l2ZW4gc3BlbmRlciB0byB0cmFuc2ZlciBnaXZlbiBudW1iZXIgb2YgdG9rZW5zIGZyb20gbWVzc2FnZSBzZW5kZXIuCiAgICoKICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyB0byBhbGxvdyB0aGUgb3duZXIgb2YgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20KICAgKiAgICAgICAgbWVzc2FnZSBzZW5kZXIKICAgKiBAcGFyYW0gX3ZhbHVlIG51bWJlciBvZiB0b2tlbnMgdG8gYWxsb3cgdG8gdHJhbnNmZXIKICAgKiBAcmV0dXJuIHRydWUgaWYgdG9rZW4gdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWxseSBhcHByb3ZlZCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZSAoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpCiAgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogIC8qKgogICAqIFRlbGwgaG93IG1hbnkgdG9rZW5zIGdpdmVuIHNwZW5kZXIgaXMgY3VycmVudGx5IGFsbG93ZWQgdG8gdHJhbnNmZXIgZnJvbQogICAqIGdpdmVuIG93bmVyLgogICAqCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIHRvIGdldCBudW1iZXIgb2YgdG9rZW5zIGFsbG93ZWQgdG8gYmUgdHJhbnNmZXJyZWQKICAgKiAgICAgICAgZnJvbSB0aGUgb3duZXIgb2YKICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyB0byBnZXQgbnVtYmVyIG9mIHRva2VucyBhbGxvd2VkIHRvIGJlIHRyYW5zZmVycmVkCiAgICogICAgICAgIGJ5IHRoZSBvd25lciBvZgogICAqIEByZXR1cm4gbnVtYmVyIG9mIHRva2VucyBnaXZlbiBzcGVuZGVyIGlzIGN1cnJlbnRseSBhbGxvd2VkIHRvIHRyYW5zZmVyCiAgICogICAgICAgICBmcm9tIGdpdmVuIG93bmVyCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlIChhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikKICBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogIC8qKgogICAqIExvZ2dlZCB3aGVuIHRva2VucyB3ZXJlIHRyYW5zZmVycmVkIGZyb20gb25lIG93bmVyIHRvIGFub3RoZXIuCiAgICoKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBvZiB0aGUgb3duZXIsIHRva2VucyB3ZXJlIHRyYW5zZmVycmVkIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3Mgb2YgdGhlIG93bmVyLCB0b2tlbnMgd2VyZSB0cmFuc2ZlcnJlZCB0bwogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0cmFuc2ZlcnJlZAogICAqLwogIGV2ZW50IFRyYW5zZmVyIChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKCiAgLyoqCiAgICogTG9nZ2VkIHdoZW4gb3duZXIgYXBwcm92ZWQgaGlzIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZCBieSBzb21lIHNwZW5kZXIuCiAgICoKICAgKiBAcGFyYW0gX293bmVyIG93bmVyIHdobyBhcHByb3ZlZCBoaXMgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICogQHBhcmFtIF9zcGVuZGVyIHNwZW5kZXIgd2hvIHdlcmUgYWxsb3dlZCB0byB0cmFuc2ZlciB0aGUgdG9rZW5zIGJlbG9uZ2luZwogICAqICAgICAgICB0byB0aGUgb3duZXIKICAgKiBAcGFyYW0gX3ZhbHVlIG51bWJlciBvZiB0b2tlbnMgYmVsb25naW5nIHRvIHRoZSBvd25lciwgYXBwcm92ZWQgdG8gYmUKICAgKiAgICAgICAgdHJhbnNmZXJyZWQgYnkgdGhlIHNwZW5kZXIKICAgKi8KICBldmVudCBBcHByb3ZhbCAoCiAgICBhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfS8qCiAqIEFkZHJlc3MgU2V0IFNtYXJ0IENvbnRyYWN0IEludGVyZmFjZS4KICogQ29weXJpZ2h0ICYjMTY5OyAyMDE34oCTMjAxOCBieSBBQkRLIENvbnN1bHRpbmcuCiAqIEF1dGhvcjogTWlraGFpbCBWbGFkaW1pcm92IDw8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjQ4MjUyMTIzMjAyOTIxMjQ2NjNlMjQyOTJjMjEyNTIxM2EyNzNlMDgyZjI1MjkyMTI0NjYyYjI3MjUiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L3NwYW4+PgogKi8KCi8qKgogKiBBZGRyZXNzIFNldCBzbWFydCBjb250cmFjdCBpbnRlcmZhY2UuCiAqLwpjb250cmFjdCBBZGRyZXNzU2V0IHsKICAvKioKICAgKiBDaGVjayB3aGV0aGVyIGFkZHJlc3Mgc2V0IGNvbnRhaW5zIGdpdmVuIGFkZHJlc3MuCiAgICoKICAgKiBAcGFyYW0gX2FkZHJlc3MgYWRkcmVzcyB0byBjaGVjawogICAqIEByZXR1cm4gdHJ1ZSBpZiBhZGRyZXNzIHNldCBjb250YWlucyBnaXZlbiBhZGRyZXNzLCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBmdW5jdGlvbiBjb250YWlucyAoYWRkcmVzcyBfYWRkcmVzcykgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCk7Cn0KLyoKICogQWJzdHJhY3QgVG9rZW4gU21hcnQgQ29udHJhY3QuICBDb3B5cmlnaHQgJiMxNjk7IDIwMTcgYnkgQUJESyBDb25zdWx0aW5nLgogKiBBdXRob3I6IE1pa2hhaWwgVmxhZGltaXJvdiA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJhMmNmY2JjOWNhYzNjYmNlOGNkNGNlYzNjNmNiY2ZjYmQwY2RkNGUyYzVjZmMzY2JjZThjYzFjZGNmIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPj4KICovCgovKioKICogQWJzdHJhY3QgVG9rZW4gU21hcnQgQ29udHJhY3QgdGhhdCBjb3VsZCBiZSB1c2VkIGFzIGEgYmFzZSBjb250cmFjdCBmb3IKICogRVJDLTIwIHRva2VuIGNvbnRyYWN0cy4KICovCmNvbnRyYWN0IEFic3RyYWN0VG9rZW4gaXMgVG9rZW4sIFNhZmVNYXRoIHsKICAvKioKICAgKiBDcmVhdGUgbmV3IEFic3RyYWN0IFRva2VuIGNvbnRyYWN0LgogICAqLwogIGZ1bmN0aW9uIEFic3RyYWN0VG9rZW4gKCkgcHVibGljIHsKICAgIC8vIERvIG5vdGhpbmcKICB9CgogIC8qKgogICAqIEdldCBudW1iZXIgb2YgdG9rZW5zIGN1cnJlbnRseSBiZWxvbmdpbmcgdG8gZ2l2ZW4gb3duZXIuCiAgICoKICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgdG8gZ2V0IG51bWJlciBvZiB0b2tlbnMgY3VycmVudGx5IGJlbG9uZ2luZyB0byB0aGUKICAgKiAgICAgICAgb3duZXIgb2YKICAgKiBAcmV0dXJuIG51bWJlciBvZiB0b2tlbnMgY3VycmVudGx5IGJlbG9uZ2luZyB0byB0aGUgb3duZXIgb2YgZ2l2ZW4gYWRkcmVzcwogICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZiAoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGFjY291bnRzIFtfb3duZXJdOwogIH0KCiAgLyoqCiAgICogVHJhbnNmZXIgZ2l2ZW4gbnVtYmVyIG9mIHRva2VucyBmcm9tIG1lc3NhZ2Ugc2VuZGVyIHRvIGdpdmVuIHJlY2lwaWVudC4KICAgKgogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyB0byB0cmFuc2ZlciB0b2tlbnMgdG8gdGhlIG93bmVyIG9mCiAgICogQHBhcmFtIF92YWx1ZSBudW1iZXIgb2YgdG9rZW5zIHRvIHRyYW5zZmVyIHRvIHRoZSBvd25lciBvZiBnaXZlbiBhZGRyZXNzCiAgICogQHJldHVybiB0cnVlIGlmIHRva2VucyB3ZXJlIHRyYW5zZmVycmVkIHN1Y2Nlc3NmdWxseSwgZmFsc2Ugb3RoZXJ3aXNlCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXIgKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkKICBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICB1aW50MjU2IGZyb21CYWxhbmNlID0gYWNjb3VudHMgW21zZy5zZW5kZXJdOwogICAgaWYgKGZyb21CYWxhbmNlIDwgX3ZhbHVlKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoX3ZhbHVlID4gMCAmJiBtc2cuc2VuZGVyICE9IF90bykgewogICAgICBhY2NvdW50cyBbbXNnLnNlbmRlcl0gPSBzYWZlU3ViIChmcm9tQmFsYW5jZSwgX3ZhbHVlKTsKICAgICAgYWNjb3VudHMgW190b10gPSBzYWZlQWRkIChhY2NvdW50cyBbX3RvXSwgX3ZhbHVlKTsKICAgIH0KICAgIFRyYW5zZmVyIChtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIFRyYW5zZmVyIGdpdmVuIG51bWJlciBvZiB0b2tlbnMgZnJvbSBnaXZlbiBvd25lciB0byBnaXZlbiByZWNpcGllbnQuCiAgICoKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbSB0aGUgb3duZXIgb2YKICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW5zIHRvIHRoZSBvd25lciBvZgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2ZlciBmcm9tIGdpdmVuIG93bmVyIHRvIGdpdmVuCiAgICogICAgICAgIHJlY2lwaWVudAogICAqIEByZXR1cm4gdHJ1ZSBpZiB0b2tlbnMgd2VyZSB0cmFuc2ZlcnJlZCBzdWNjZXNzZnVsbHksIGZhbHNlIG90aGVyd2lzZQogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSAoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHVpbnQyNTYgc3BlbmRlckFsbG93YW5jZSA9IGFsbG93YW5jZXMgW19mcm9tXVttc2cuc2VuZGVyXTsKICAgIGlmIChzcGVuZGVyQWxsb3dhbmNlIDwgX3ZhbHVlKSByZXR1cm4gZmFsc2U7CiAgICB1aW50MjU2IGZyb21CYWxhbmNlID0gYWNjb3VudHMgW19mcm9tXTsKICAgIGlmIChmcm9tQmFsYW5jZSA8IF92YWx1ZSkgcmV0dXJuIGZhbHNlOwoKICAgIGFsbG93YW5jZXMgW19mcm9tXVttc2cuc2VuZGVyXSA9CiAgICAgIHNhZmVTdWIgKHNwZW5kZXJBbGxvd2FuY2UsIF92YWx1ZSk7CgogICAgaWYgKF92YWx1ZSA+IDAgJiYgX2Zyb20gIT0gX3RvKSB7CiAgICAgIGFjY291bnRzIFtfZnJvbV0gPSBzYWZlU3ViIChmcm9tQmFsYW5jZSwgX3ZhbHVlKTsKICAgICAgYWNjb3VudHMgW190b10gPSBzYWZlQWRkIChhY2NvdW50cyBbX3RvXSwgX3ZhbHVlKTsKICAgIH0KICAgIFRyYW5zZmVyIChfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBBbGxvdyBnaXZlbiBzcGVuZGVyIHRvIHRyYW5zZmVyIGdpdmVuIG51bWJlciBvZiB0b2tlbnMgZnJvbSBtZXNzYWdlIHNlbmRlci4KICAgKgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIHRvIGFsbG93IHRoZSBvd25lciBvZiB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbQogICAqICAgICAgICBtZXNzYWdlIHNlbmRlcgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byBhbGxvdyB0byB0cmFuc2ZlcgogICAqIEByZXR1cm4gdHJ1ZSBpZiB0b2tlbiB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bGx5IGFwcHJvdmVkLCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkKICBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBhbGxvd2FuY2VzIFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbCAobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBUZWxsIGhvdyBtYW55IHRva2VucyBnaXZlbiBzcGVuZGVyIGlzIGN1cnJlbnRseSBhbGxvd2VkIHRvIHRyYW5zZmVyIGZyb20KICAgKiBnaXZlbiBvd25lci4KICAgKgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyB0byBnZXQgbnVtYmVyIG9mIHRva2VucyBhbGxvd2VkIHRvIGJlIHRyYW5zZmVycmVkCiAgICogICAgICAgIGZyb20gdGhlIG93bmVyIG9mCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgdG8gZ2V0IG51bWJlciBvZiB0b2tlbnMgYWxsb3dlZCB0byBiZSB0cmFuc2ZlcnJlZAogICAqICAgICAgICBieSB0aGUgb3duZXIgb2YKICAgKiBAcmV0dXJuIG51bWJlciBvZiB0b2tlbnMgZ2l2ZW4gc3BlbmRlciBpcyBjdXJyZW50bHkgYWxsb3dlZCB0byB0cmFuc2ZlcgogICAqICAgICAgICAgZnJvbSBnaXZlbiBvd25lcgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZSAoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpCiAgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2FuY2VzIFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIC8qKgogICAqIE1hcHBpbmcgZnJvbSBhZGRyZXNzZXMgb2YgdG9rZW4gaG9sZGVycyB0byB0aGUgbnVtYmVycyBvZiB0b2tlbnMgYmVsb25naW5nCiAgICogdG8gdGhlc2UgdG9rZW4gaG9sZGVycy4KICAgKi8KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIGFjY291bnRzOwoKICAvKioKICAgKiBNYXBwaW5nIGZyb20gYWRkcmVzc2VzIG9mIHRva2VuIGhvbGRlcnMgdG8gdGhlIG1hcHBpbmcgb2YgYWRkcmVzc2VzIG9mCiAgICogc3BlbmRlcnMgdG8gdGhlIGFsbG93YW5jZXMgc2V0IGJ5IHRoZXNlIHRva2VuIGhvbGRlcnMgdG8gdGhlc2Ugc3BlbmRlcnMuCiAgICovCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2FuY2VzOwp9Ci8qCiAqIEFic3RyYWN0IFZpcnR1YWwgVG9rZW4gU21hcnQgQ29udHJhY3QuCiAqIENvcHlyaWdodCAmIzE2OTsgMjAxN+KAkzIwMTggYnkgQUJESyBDb25zdWx0aW5nLgogKiBBdXRob3I6IE1pa2hhaWwgVmxhZGltaXJvdiA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJhNGM5Y2RjZmNjYzVjZGM4OGFkMmM4YzVjMGNkYzljZGQ2Y2JkMmU0YzNjOWM1Y2RjODhhYzdjYmM5Ij5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPj4KICovCgoKLyoqCiAqIEFic3RyYWN0IFRva2VuIFNtYXJ0IENvbnRyYWN0IHRoYXQgY291bGQgYmUgdXNlZCBhcyBhIGJhc2UgY29udHJhY3QgZm9yCiAqIEVSQy0yMCB0b2tlbiBjb250cmFjdHMgc3VwcG9ydGluZyB2aXJ0dWFsIGJhbGFuY2UuCiAqLwpjb250cmFjdCBBYnN0cmFjdFZpcnR1YWxUb2tlbiBpcyBBYnN0cmFjdFRva2VuIHsKICAvKioKICAgKiBNYXhpbXVtIG51bWJlciBvZiByZWFsIChpLmUuIG5vbi12aXJ0dWFsKSB0b2tlbnMgaW4gY2lyY3VsYXRpb24gKDJeMjU1LTEpLgogICAqLwogIHVpbnQyNTYgY29uc3RhbnQgTUFYSU1VTV9UT0tFTlNfQ09VTlQgPQogICAgMHg3RkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGOwoKICAvKioKICAgKiBNYXNrIHVzZWQgdG8gZXh0cmFjdCByZWFsIGJhbGFuY2Ugb2YgYW4gYWNjb3VudCAoMl4yNTUtMSkuCiAgICovCiAgdWludDI1NiBjb25zdGFudCBCQUxBTkNFX01BU0sgPQogICAgMHg3RkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGOwoKICAvKioKICAgKiBNYXNrIHVzZWQgdG8gZXh0cmFjdCAibWF0ZXJpYWxpemVkIiBmbGFnIG9mIGFuIGFjY291bnQgKDJeMjU1KS4KICAgKi8KICB1aW50MjU2IGNvbnN0YW50IE1BVEVSSUFMSVpFRF9GTEFHX01BU0sgPQogICAgMHg4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwoKICAvKioKICAgKiBDcmVhdGUgbmV3IEFic3RyYWN0IFZpcnR1YWwgVG9rZW4gY29udHJhY3QuCiAgICovCiAgZnVuY3Rpb24gQWJzdHJhY3RWaXJ0dWFsVG9rZW4gKCkgcHVibGljIEFic3RyYWN0VG9rZW4gKCkgewogICAgLy8gRG8gbm90aGluZwogIH0KCiAgLyoqCiAgICogR2V0IHRvdGFsIG51bWJlciBvZiB0b2tlbnMgaW4gY2lyY3VsYXRpb24uCiAgICoKICAgKiBAcmV0dXJuIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgaW4gY2lyY3VsYXRpb24KICAgKi8KICBmdW5jdGlvbiB0b3RhbFN1cHBseSAoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHN1cHBseSkgewogICAgcmV0dXJuIHRva2Vuc0NvdW50OwogIH0KCiAgLyoqCiAgICogR2V0IG51bWJlciBvZiB0b2tlbnMgY3VycmVudGx5IGJlbG9uZ2luZyB0byBnaXZlbiBvd25lci4KICAgKgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyB0byBnZXQgbnVtYmVyIG9mIHRva2VucyBjdXJyZW50bHkgYmVsb25naW5nIHRvIHRoZQogICAqICAgICAgICBvd25lciBvZgogICAqIEByZXR1cm4gbnVtYmVyIG9mIHRva2VucyBjdXJyZW50bHkgYmVsb25naW5nIHRvIHRoZSBvd25lciBvZiBnaXZlbiBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mIChhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gc2FmZUFkZCAoCiAgICAgIGFjY291bnRzIFtfb3duZXJdICYgQkFMQU5DRV9NQVNLLCBnZXRWaXJ0dWFsQmFsYW5jZSAoX293bmVyKSk7CiAgfQoKICAvKioKICAgKiBUcmFuc2ZlciBnaXZlbiBudW1iZXIgb2YgdG9rZW5zIGZyb20gbWVzc2FnZSBzZW5kZXIgdG8gZ2l2ZW4gcmVjaXBpZW50LgogICAqCiAgICogQHBhcmFtIF90byBhZGRyZXNzIHRvIHRyYW5zZmVyIHRva2VucyB0byB0aGUgb3duZXIgb2YKICAgKiBAcGFyYW0gX3ZhbHVlIG51bWJlciBvZiB0b2tlbnMgdG8gdHJhbnNmZXIgdG8gdGhlIG93bmVyIG9mIGdpdmVuIGFkZHJlc3MKICAgKiBAcmV0dXJuIHRydWUgaWYgdG9rZW5zIHdlcmUgdHJhbnNmZXJyZWQgc3VjY2Vzc2Z1bGx5LCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlciAoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGlmIChfdmFsdWUgPiBiYWxhbmNlT2YgKG1zZy5zZW5kZXIpKSByZXR1cm4gZmFsc2U7CiAgICBlbHNlIHsKICAgICAgbWF0ZXJpYWxpemVCYWxhbmNlSWZOZWVkZWQgKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICAgIHJldHVybiBBYnN0cmFjdFRva2VuLnRyYW5zZmVyIChfdG8sIF92YWx1ZSk7CiAgICB9CiAgfQoKICAvKioKICAgKiBUcmFuc2ZlciBnaXZlbiBudW1iZXIgb2YgdG9rZW5zIGZyb20gZ2l2ZW4gb3duZXIgdG8gZ2l2ZW4gcmVjaXBpZW50LgogICAqCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gdGhlIG93bmVyIG9mCiAgICogQHBhcmFtIF90byBhZGRyZXNzIHRvIHRyYW5zZmVyIHRva2VucyB0byB0aGUgb3duZXIgb2YKICAgKiBAcGFyYW0gX3ZhbHVlIG51bWJlciBvZiB0b2tlbnMgdG8gdHJhbnNmZXIgZnJvbSBnaXZlbiBvd25lciB0byBnaXZlbgogICAqICAgICAgICByZWNpcGllbnQKICAgKiBAcmV0dXJuIHRydWUgaWYgdG9rZW5zIHdlcmUgdHJhbnNmZXJyZWQgc3VjY2Vzc2Z1bGx5LCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20gKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkKICBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoX3ZhbHVlID4gYWxsb3dhbmNlIChfZnJvbSwgbXNnLnNlbmRlcikpIHJldHVybiBmYWxzZTsKICAgIGlmIChfdmFsdWUgPiBiYWxhbmNlT2YgKF9mcm9tKSkgcmV0dXJuIGZhbHNlOwogICAgZWxzZSB7CiAgICAgIG1hdGVyaWFsaXplQmFsYW5jZUlmTmVlZGVkIChfZnJvbSwgX3ZhbHVlKTsKICAgICAgcmV0dXJuIEFic3RyYWN0VG9rZW4udHJhbnNmZXJGcm9tIChfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQogIH0KCiAgLyoqCiAgICogR2V0IHZpcnR1YWwgYmFsYW5jZSBvZiB0aGUgb3duZXIgb2YgZ2l2ZW4gYWRkcmVzcy4KICAgKgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyB0byBnZXQgdmlydHVhbCBiYWxhbmNlIGZvciB0aGUgb3duZXIgb2YKICAgKiBAcmV0dXJuIHZpcnR1YWwgYmFsYW5jZSBvZiB0aGUgb3duZXIgb2YgZ2l2ZW4gYWRkcmVzcwogICAqLwogIGZ1bmN0aW9uIHZpcnR1YWxCYWxhbmNlT2YgKGFkZHJlc3MgX293bmVyKQogIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiBfdmlydHVhbEJhbGFuY2UpOwoKICAvKioKICAgKiBDYWxjdWxhdGUgdmlydHVhbCBiYWxhbmNlIG9mIHRoZSBvd25lciBvZiBnaXZlbiBhZGRyZXNzIHRha2luZyBpbnRvIGFjY291bnQKICAgKiBtYXRlcmlhbGl6ZWQgZmxhZyBhbmQgdG90YWwgbnVtYmVyIG9mIHJlYWwgdG9rZW5zIGFscmVhZHkgaW4gY2lyY3VsYXRpb24uCiAgICovCiAgZnVuY3Rpb24gZ2V0VmlydHVhbEJhbGFuY2UgKGFkZHJlc3MgX293bmVyKQogIHByaXZhdGUgdmlldyByZXR1cm5zICh1aW50MjU2IF92aXJ0dWFsQmFsYW5jZSkgewogICAgaWYgKGFjY291bnRzIFtfb3duZXJdICYgTUFURVJJQUxJWkVEX0ZMQUdfTUFTSyAhPSAwKSByZXR1cm4gMDsKICAgIGVsc2UgewogICAgICBfdmlydHVhbEJhbGFuY2UgPSB2aXJ0dWFsQmFsYW5jZU9mIChfb3duZXIpOwogICAgICB1aW50MjU2IG1heFZpcnR1YWxCYWxhbmNlID0gc2FmZVN1YiAoTUFYSU1VTV9UT0tFTlNfQ09VTlQsIHRva2Vuc0NvdW50KTsKICAgICAgaWYgKF92aXJ0dWFsQmFsYW5jZSA+IG1heFZpcnR1YWxCYWxhbmNlKQogICAgICAgIF92aXJ0dWFsQmFsYW5jZSA9IG1heFZpcnR1YWxCYWxhbmNlOwogICAgfQogIH0KCiAgLyoqCiAgICogTWF0ZXJpYWxpemUgdmlydHVhbCBiYWxhbmNlIG9mIHRoZSBvd25lciBvZiBnaXZlbiBhZGRyZXNzIGlmIHRoaXMgd2lsbCBoZWxwCiAgICogdG8gdHJhbnNmZXIgZ2l2ZW4gbnVtYmVyIG9mIHRva2VucyBmcm9tIGl0LgogICAqCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIHRvIG1hdGVyaWFsaXplIHZpcnR1YWwgYmFsYW5jZSBvZgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAqLwogIGZ1bmN0aW9uIG1hdGVyaWFsaXplQmFsYW5jZUlmTmVlZGVkIChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfdmFsdWUpIHByaXZhdGUgewogICAgdWludDI1NiBzdG9yZWRCYWxhbmNlID0gYWNjb3VudHMgW19vd25lcl07CiAgICBpZiAoc3RvcmVkQmFsYW5jZSAmIE1BVEVSSUFMSVpFRF9GTEFHX01BU0sgPT0gMCkgewogICAgICAvLyBWaXJ0dWFsIGJhbGFuY2UgaXMgbm90IG1hdGVyaWFsaXplZCB5ZXQKICAgICAgaWYgKF92YWx1ZSA+IHN0b3JlZEJhbGFuY2UpIHsKICAgICAgICAvLyBSZWFsIGJhbGFuY2UgaXMgbm90IGVub3VnaAogICAgICAgIHVpbnQyNTYgdmlydHVhbEJhbGFuY2UgPSBnZXRWaXJ0dWFsQmFsYW5jZSAoX293bmVyKTsKICAgICAgICByZXF1aXJlIChzYWZlU3ViIChfdmFsdWUsIHN0b3JlZEJhbGFuY2UpIDw9IHZpcnR1YWxCYWxhbmNlKTsKICAgICAgICBhY2NvdW50cyBbX293bmVyXSA9IE1BVEVSSUFMSVpFRF9GTEFHX01BU0sgfAogICAgICAgICAgc2FmZUFkZCAoc3RvcmVkQmFsYW5jZSwgdmlydHVhbEJhbGFuY2UpOwogICAgICAgIHRva2Vuc0NvdW50ID0gc2FmZUFkZCAodG9rZW5zQ291bnQsIHZpcnR1YWxCYWxhbmNlKTsKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogTnVtYmVyIG9mIHJlYWwgKGkuZS4gbm9uLXZpcnR1YWwpIHRva2VucyBpbiBjaXJjdWxhdGlvbi4KICAgKi8KICB1aW50MjU2IGludGVybmFsIHRva2Vuc0NvdW50Owp9Ci8qCiAqIE1lZGlDaGFpbiBQcm9tbyBUb2tlbiBTbWFydCBDb250cmFjdC4gIENvcHlyaWdodCAmIzE2OTsgMjAxOCBieSBBQkRLIENvbnN1bHRpbmcuCiAqIEF1dGhvcjogTWlraGFpbCBWbGFkaW1pcm92IDw8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9ImQxYmNiOGJhYjliMGI4YmRmZmE3YmRiMGI1YjhiY2I4YTNiZWE3OTFiNmJjYjBiOGJkZmZiMmJlYmMiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L3NwYW4+PgogKi8KCi8qKgogKiBNZWRpQ2hhaW4gUHJvbW8gVG9rZW0gU21hcnQgQ29udHJhY3QuCiAqLwpjb250cmFjdCBNQ1VYUHJvbW9Ub2tlbiBpcyBBYnN0cmFjdFZpcnR1YWxUb2tlbiB7CiAgLyoqCiAgICogTnVtYmVyIG9mIHZpcnR1YWwgdG9rZW5zIHRvIGFzc2lnbiB0byB0aGUgb3duZXJzIG9mIGFkZHJlc3NlcyBmcm9tIGdpdmVuCiAgICogYWRkcmVzcyBzZXQuCiAgICovCiAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IFZJUlRVQUxfQ09VTlQgPSAxMGU4OwoKICAvKioKICAgKiBDcmVhdGUgTWVkaUNoYWluUHJvbW9Ub2tlbiBzbWFydCBjb250cmFjdCB3aXRoIGdpdmVuIGFkZHJlc3Mgc2V0LgogICAqCiAgICogQHBhcmFtIF9hZGRyZXNzU2V0IGFkZHJlc3Mgc2V0IHRvIHVzZQogICAqLwogIGZ1bmN0aW9uIE1DVVhQcm9tb1Rva2VuIChBZGRyZXNzU2V0IF9hZGRyZXNzU2V0KQogIHB1YmxpYyBBYnN0cmFjdFZpcnR1YWxUb2tlbiAoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICBhZGRyZXNzU2V0ID0gX2FkZHJlc3NTZXQ7CiAgfQoKICAvKioKICAgKiBHZXQgbmFtZSBvZiB0aGlzIHRva2VuLgogICAqCiAgICogQHJldHVybiBuYW1lIG9mIHRoaXMgdG9rZW4KICAgKi8KICBmdW5jdGlvbiBuYW1lICgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuICJNZWRpQ2hhaW4gUHJvbW8gVG9rZW4gIjsKICB9CgogIC8qKgogICAqIEdldCBzeW1ib2wgb2YgdGhpcyB0b2tlbi4KICAgKgogICAqIEByZXR1cm4gc3ltYm9sIG9mIHRoaXMgdG9rZW4KICAgKi8KICBmdW5jdGlvbiBzeW1ib2wgKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICByZXR1cm4gIk1DVVgiOwogIH0KCiAgLyoqCiAgICogR2V0IG51bWJlciBvZiBkZWNpbWFscyBmb3IgdGhpcyB0b2tlbi4KICAgKgogICAqIEByZXR1cm4gbnVtYmVyIG9mIGRlY2ltYWxzIGZvciB0aGlzIHRva2VuCiAgICovCiAgZnVuY3Rpb24gZGVjaW1hbHMgKCkgcHVibGljIHB1cmUgcmV0dXJucyAodWludDgpIHsKICAgIHJldHVybiA4OwogIH0KCiAgLyoqCiAgICogTm90aWZ5IG93bmVycyBhYm91dCB0aGVpciB2aXJ0dWFsIGJhbGFuY2VzLgogICAqCiAgICogQHBhcmFtIF9vd25lcnMgYWRkcmVzc2VzIG9mIHRoZSBvd25lcnMgdG8gYmUgbm90aWZpZWQKICAgKi8KICBmdW5jdGlvbiBtYXNzTm90aWZ5IChhZGRyZXNzIFtdIF9vd25lcnMpIHB1YmxpYyB7CiAgICByZXF1aXJlIChtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIHVpbnQyNTYgY291bnQgPSBfb3duZXJzLmxlbmd0aDsKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IGNvdW50OyBpKyspCiAgICAgIFRyYW5zZmVyIChhZGRyZXNzICgwKSwgX293bmVycyBbaV0sIFZJUlRVQUxfQ09VTlQpOwogIH0KCiAgLyoqCiAgICogS2lsbCB0aGlzIHNtYXJ0IGNvbnRyYWN0LgogICAqLwogIGZ1bmN0aW9uIGtpbGwgKCkgcHVibGljIHsKICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgc2VsZmRlc3RydWN0IChvd25lcik7CiAgfQoKICAvKioKICAgKiBDaGFuZ2Ugb3duZXIgb2YgdGhlIHNtYXJ0IGNvbnRyYWN0LgogICAqCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIG9mIGEgbmV3IG93bmVyIG9mIHRoZSBzbWFydCBjb250cmFjdAogICAqLwogIGZ1bmN0aW9uIGNoYW5nZU93bmVyIChhZGRyZXNzIF9vd25lcikgcHVibGljIHsKICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gb3duZXIpOwoKICAgIG93bmVyID0gX293bmVyOwogIH0KCiAgLyoqCiAgICogR2V0IHZpcnR1YWwgYmFsYW5jZSBvZiB0aGUgb3duZXIgb2YgZ2l2ZW4gYWRkcmVzcy4KICAgKgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyB0byBnZXQgdmlydHVhbCBiYWxhbmNlIGZvciB0aGUgb3duZXIgb2YKICAgKiBAcmV0dXJuIHZpcnR1YWwgYmFsYW5jZSBvZiB0aGUgb3duZXIgb2YgZ2l2ZW4gYWRkcmVzcwogICAqLwogIGZ1bmN0aW9uIHZpcnR1YWxCYWxhbmNlT2YgKGFkZHJlc3MgX293bmVyKQogIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NiBfdmlydHVhbEJhbGFuY2UpIHsKICAgIHJldHVybiBhZGRyZXNzU2V0LmNvbnRhaW5zIChfb3duZXIpID8gVklSVFVBTF9DT1VOVCA6IDA7CiAgfQoKICAvKioKICAgKiBBZGRyZXNzIG9mIHRoZSBvd25lciBvZiB0aGlzIHNtYXJ0IGNvbnRyYWN0LgogICAqLwogIGFkZHJlc3MgaW50ZXJuYWwgb3duZXI7CgogIC8qKgogICAqIEFkZHJlc3Mgc2V0IG9mIGFkZHJlc3NlcyB0aGF0IGFyZSBlbGlnaWJsZSBmb3IgaW5pdGlhbCBiYWxhbmNlLgogICAqLwogIEFkZHJlc3NTZXQgaW50ZXJuYWwgYWRkcmVzc1NldDsKfQ=='.
	

]
