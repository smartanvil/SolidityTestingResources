Class {
	#name : #SRT78a73B6CBc5D183CE56e786f6e905CaDEC63547B,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT78a73B6CBc5D183CE56e786f6e905CaDEC63547B >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBGaWxlOiBjb250cmFjdHNcY29uZmlnc1xGYWJyaWNUb2tlbkNvbmZpZy5zb2wKCi8qKgogKiBAdGl0bGUgRmFicmljVG9rZW5Db25maWcKICoKICogQGRldiBUaGUgc3RhdGljIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBGYWJyaWMgVG9rZW4uCiAqLwpjb250cmFjdCBGYWJyaWNUb2tlbkNvbmZpZyB7CiAgICAvLyBUaGUgbmFtZSBvZiB0aGUgdG9rZW4uCiAgICBzdHJpbmcgY29uc3RhbnQgTkFNRSA9ICJGYWJyaWMgVG9rZW4iOwoKICAgIC8vIFRoZSBzeW1ib2wgb2YgdGhlIHRva2VuLgogICAgc3RyaW5nIGNvbnN0YW50IFNZTUJPTCA9ICJGVCI7CgogICAgLy8gVGhlIG51bWJlciBvZiBkZWNpbWFscyBmb3IgdGhlIHRva2VuLgogICAgdWludDggY29uc3RhbnQgREVDSU1BTFMgPSAxODsgIC8vIFNhbWUgYXMgZXRoZXJzLgoKICAgIC8vIERlY2ltYWwgZmFjdG9yIGZvciBtdWx0aXBsaWNhdGlvbiBwdXJwb3Nlcy4KICAgIHVpbnQgY29uc3RhbnQgREVDSU1BTFNfRkFDVE9SID0gMTAgKiogdWludChERUNJTUFMUyk7Cn0KCi8vIEZpbGU6IGNvbnRyYWN0c1xpbnRlcmZhY2VzXEVSQzIwVG9rZW5JbnRlcmZhY2Uuc29sCgovKioKICogQGRldiBUaGUgc3RhbmRhcmQgRVJDMjAgVG9rZW4gaW50ZXJmYWNlLgogKi8KY29udHJhY3QgRVJDMjBUb2tlbkludGVyZmFjZSB7CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsgIC8qIHNob3J0aGFuZCBmb3IgcHVibGljIGZ1bmN0aW9uIGFuZCBhIHByb3BlcnR5ICovCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpOwp9CgovLyBGaWxlOiBjb250cmFjdHNcbGlicmFyaWVzXFNhZmVNYXRoLnNvbAoKLyoqCiAqIEBkZXYgTGlicmFyeSB0aGF0IGhlbHBzIHByZXZlbnQgaW50ZWdlciBvdmVyZmxvd3MgYW5kIHVuZGVyZmxvd3MsCiAqIGluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkKICovCmxpYnJhcnkgU2FmZU1hdGggewogICAgZnVuY3Rpb24gcGx1cyh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CgogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbnVzKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKCiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICAKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYyA9IGEgLyBiOwoKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQoKLy8gRmlsZTogY29udHJhY3RzXHRyYWl0c1xFUkMyMFRva2VuLnNvbAoKLyoqCiAqIEB0aXRsZSBFUkMyMFRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50cyB0aGUgb3BlcmF0aW9ucyBkZWNsYXJlZCBpbiB0aGUgYEVSQzIwVG9rZW5JbnRlcmZhY2VgLgogKi8KY29udHJhY3QgRVJDMjBUb2tlbiBpcyBFUkMyMFRva2VuSW50ZXJmYWNlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAgIC8vIFRva2VuIGFjY291bnQgYmFsYW5jZXMuCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAgIC8vIERlbGVnYXRlZCBudW1iZXIgb2YgdG9rZW5zIHRvIHRyYW5zZmVyLgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwoKICAgIC8qKgogICAgICogQGRldiBDaGVja3MgdGhlIGJhbGFuY2Ugb2YgYSBjZXJ0YWluIGFkZHJlc3MuCiAgICAgKgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhZGRyZXNzIHdoaWNoJ3MgYmFsYW5jZSB3aWxsIGJlIGNoZWNrZWQuCiAgICAgKgogICAgICogQHJldHVybiBSZXR1cm5zIHRoZSBiYWxhbmNlIG9mIHRoZSBgX2FjY291bnRgIGFkZHJlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9hY2NvdW50KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19hY2NvdW50XTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVHJhbnNmZXJzIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIuCiAgICAgKgogICAgICogQHBhcmFtIF90byBUaGUgdGFyZ2V0IGFkZHJlc3MgdG8gd2hpY2ggdGhlIGBfdmFsdWVgIG51bWJlciBvZiB0b2tlbnMgd2lsbCBiZSBzZW50LgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgbnVtYmVyIG9mIHRva2VucyB0byBzZW5kLgogICAgICoKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90LgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCBfdmFsdWUgfHwgX3ZhbHVlID09IDApIHsKCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5wbHVzKF92YWx1ZSk7CgogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFNlbmQgYF92YWx1ZWAgdG9rZW5zIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBpZiBgX2Zyb21gIGhhcyBhcHByb3ZlZCB0aGUgcHJvY2Vzcy4KICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlci4KICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudC4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIG51bWJlciBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQuCiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dIDwgX3ZhbHVlIHx8IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIDwgX3ZhbHVlIHx8IF92YWx1ZSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLnBsdXMoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyBhbm90aGVyIGNvbnRyYWN0IHRvIHNwZW5kIHNvbWUgdG9rZW5zIG9uIHlvdXIgYmVoYWxmLgogICAgICoKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCB3aGljaCB3aWxsIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlciBvZiB0b2tlbnMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBudW1iZXIgb2YgdG9rZW5zIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2Zlci4KICAgICAqCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdC4KICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwoKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFNob3dzIHRoZSBudW1iZXIgb2YgdG9rZW5zIGFwcHJvdmVkIGJ5IGBfb3duZXJgIHRoYXQgYXJlIGFsbG93ZWQgdG8gYmUgdHJhbnNmZXJyZWQgYnkgYF9zcGVuZGVyYC4KICAgICAqCiAgICAgKiBAcGFyYW0gX293bmVyIFRoZSBhY2NvdW50IHdoaWNoIGFsbG93ZWQgdGhlIHRyYW5zZmVyLgogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhY2NvdW50IHdoaWNoIHdpbGwgc3BlbmQgdGhlIHRva2Vucy4KICAgICAqCiAgICAgKiBAcmV0dXJuIFRoZSBudW1iZXIgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkLgogICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfSAgICAKfQoKLy8gRmlsZTogY29udHJhY3RzXHRyYWl0c1xIYXNPd25lci5zb2wKCi8qKgogKiBAdGl0bGUgSGFzT3duZXIKICoKICogQGRldiBBbGxvd3MgZm9yIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gY2VydGFpbiBmdW5jdGlvbmFsaXR5LgogKi8KY29udHJhY3QgSGFzT3duZXIgewogICAgLy8gQ3VycmVudCBvd25lci4KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIC8vIENvbmRpdGlvbmFsbHkgdGhlIG5ldyBvd25lci4KICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgY29uc3RydWN0b3IuCiAgICAgKgogICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgb3duZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIEhhc093bmVyKGFkZHJlc3MgX293bmVyKSBpbnRlcm5hbCB7CiAgICAgICAgb3duZXIgPSBfb3duZXI7CiAgICB9CgogICAgLyoqIAogICAgICogQGRldiBBY2Nlc3MgY29udHJvbCBtb2RpZmllciB0aGF0IGFsbG93cyBvbmx5IHRoZSBjdXJyZW50IG93bmVyIHRvIGNhbGwgdGhlIGZ1bmN0aW9uLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVGhlIGV2ZW50IGlzIGZpcmVkIHdoZW4gdGhlIGN1cnJlbnQgb3duZXIgaXMgY2hhbmdlZC4KICAgICAqCiAgICAgKiBAcGFyYW0gX29sZE93bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBwcmV2aW91cyBvd25lci4KICAgICAqIEBwYXJhbSBfbmV3T3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBvd25lci4KICAgICAqLwogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9vbGRPd25lciwgYWRkcmVzcyBpbmRleGVkIF9uZXdPd25lcik7CgogICAgLyoqCiAgICAgKiBAZGV2IFRyYW5zZmVyaW5nIHRoZSBvd25lcnNoaXAgaXMgYSB0d28tc3RlcCBwcm9jZXNzLCBhcyB3ZSBwcmVwYXJlCiAgICAgKiBmb3IgdGhlIHRyYW5zZmVyIGJ5IHNldHRpbmcgYG5ld093bmVyYCBhbmQgcmVxdWlyaW5nIGBuZXdPd25lcmAgdG8gYWNjZXB0CiAgICAgKiB0aGUgdHJhbnNmZXIuIFRoaXMgcHJldmVudHMgYWNjaWRlbnRhbCBsb2NrLW91dCBpZiBzb21ldGhpbmcgZ29lcyB3cm9uZwogICAgICogd2hlbiBwYXNzaW5nIHRoZSBgbmV3T3duZXJgIGFkZHJlc3MuCiAgICAgKgogICAgICogQHBhcmFtIF9uZXdPd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgcHJvcG9zZWQgbmV3IG93bmVyLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgbmV3T3duZXIgPSBfbmV3T3duZXI7CiAgICB9CiAKICAgIC8qKgogICAgICogQGRldiBUaGUgYG5ld093bmVyYCBmaW5pc2hlcyB0aGUgb3duZXJzaGlwIHRyYW5zZmVyIHByb2Nlc3MgYnkgYWNjZXB0aW5nIHRoZQogICAgICogb3duZXJzaGlwLgogICAgICovCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lcik7CgogICAgICAgIE93bmVyc2hpcFRyYW5zZmVyKG93bmVyLCBuZXdPd25lcik7CgogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0c1x0cmFpdHNcRnJlZXphYmxlLnNvbAoKLyoqCiAqIEB0aXRsZSBGcmVlemFibGUKICogQGRldiBUaGlzIHRyYWl0IGFsbG93cyB0byBmcmVlemUgdGhlIHRyYW5zYWN0aW9ucyBpbiBhIFRva2VuCiAqLwpjb250cmFjdCBGcmVlemFibGUgaXMgSGFzT3duZXIgewogIGJvb2wgcHVibGljIGZyb3plbiA9IGZhbHNlOwoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIG1ha2VzIG1ldGhvZHMgY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBub3QgZnJvemVuLgogICAqLwogIG1vZGlmaWVyIHJlcXVpcmVOb3RGcm96ZW4oKSB7CiAgICByZXF1aXJlKCFmcm96ZW4pOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byAiZnJlZXplIiB0aGUgY29udHJhY3QuCiAgICovCiAgZnVuY3Rpb24gZnJlZXplKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICBmcm96ZW4gPSB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvICJ1bmZyZWV6ZSIgdGhlIGNvbnRyYWN0LgogICAqLwogIGZ1bmN0aW9uIHVuZnJlZXplKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICBmcm96ZW4gPSBmYWxzZTsKICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0c1x0cmFpdHNcRnJlZXphYmxlRVJDMjBUb2tlbi5zb2wKCi8qKgogKiBAdGl0bGUgRnJlZXphYmxlRVJDMjBUb2tlbgogKgogKiBAZGV2IEV4dGVuZHMgRVJDMjBUb2tlbiBhbmQgYWRkcyBhYmlsaXR5IHRvIGZyZWV6ZSBhbGwgdHJhbnNmZXJzIG9mIHRva2Vucy4KICovCmNvbnRyYWN0IEZyZWV6YWJsZUVSQzIwVG9rZW4gaXMgRVJDMjBUb2tlbiwgRnJlZXphYmxlIHsKICAgIC8qKgogICAgICogQGRldiBPdmVycmlkZXMgdGhlIG9yaWdpbmFsIEVSQzIwVG9rZW4gaW1wbGVtZW50YXRpb24gYnkgYWRkaW5nIHdoZW5Ob3RGcm96ZW4gbW9kaWZpZXIuCiAgICAgKgogICAgICogQHBhcmFtIF90byBUaGUgdGFyZ2V0IGFkZHJlc3MgdG8gd2hpY2ggdGhlIGBfdmFsdWVgIG51bWJlciBvZiB0b2tlbnMgd2lsbCBiZSBzZW50LgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgbnVtYmVyIG9mIHRva2VucyB0byBzZW5kLgogICAgICoKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90LgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXF1aXJlTm90RnJvemVuIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFNlbmQgYF92YWx1ZWAgdG9rZW5zIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBpZiBgX2Zyb21gIGhhcyBhcHByb3ZlZCB0aGUgcHJvY2Vzcy4KICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlci4KICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudC4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIG51bWJlciBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQuCiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXF1aXJlTm90RnJvemVuIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIGFub3RoZXIgY29udHJhY3QgdG8gc3BlbmQgc29tZSB0b2tlbnMgb24geW91ciBiZWhhbGYuCiAgICAgKgogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IHdoaWNoIHdpbGwgYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyIG9mIHRva2Vucy4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIG51bWJlciBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyLgogICAgICoKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90LgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmVxdWlyZU5vdEZyb3plbiByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gc3VwZXIuYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKTsKICAgIH0KCn0KCi8vIEZpbGU6IGNvbnRyYWN0c1xGYWJyaWNUb2tlbi5zb2wKCi8qKgogKiBAdGl0bGUgRmFicmljIFRva2VuCiAqCiAqIEBkZXYgQSBzdGFuZGFyZCB0b2tlbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgRVJDMjAgdG9rZW4gc3RhbmRhcmQgd2l0aCBhZGRlZAogKiAgICAgIEhhc093bmVyIHRyYWl0IGFuZCBpbml0aWFsaXplZCB1c2luZyB0aGUgY29uZmlndXJhdGlvbiBjb25zdGFudHMuCiAqLwpjb250cmFjdCBGYWJyaWNUb2tlbiBpcyBGYWJyaWNUb2tlbkNvbmZpZywgSGFzT3duZXIsIEZyZWV6YWJsZUVSQzIwVG9rZW4gewogICAgLy8gVGhlIG5hbWUgb2YgdGhlIHRva2VuLgogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwoKICAgIC8vIFRoZSBzeW1ib2wgZm9yIHRoZSB0b2tlbi4KICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwoKICAgIC8vIFRoZSBkZWNpbWFscyBvZiB0aGUgdG9rZW4uCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBjb25zdHJ1Y3Rvci4gSW5pdGlhbGx5IHNldHMgYHRvdGFsU3VwcGx5YCBhbmQgdGhlIGJhbGFuY2Ugb2YgdGhlCiAgICAgKiAgICAgIGBvd25lcmAgYWRkcmVzcyBhY2NvcmRpbmcgdG8gdGhlIGluaXRpYWxpemF0aW9uIHBhcmFtZXRlci4KICAgICAqLwogICAgZnVuY3Rpb24gRmFicmljVG9rZW4odWludCBfdG90YWxTdXBwbHkpIHB1YmxpYwogICAgICAgIEhhc093bmVyKG1zZy5zZW5kZXIpCiAgICB7CiAgICAgICAgbmFtZSA9IE5BTUU7CiAgICAgICAgc3ltYm9sID0gU1lNQk9MOwogICAgICAgIGRlY2ltYWxzID0gREVDSU1BTFM7CiAgICAgICAgdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHk7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gX3RvdGFsU3VwcGx5OwogICAgfQp9CgovLyBGaWxlOiBjb250cmFjdHNcY29uZmlnc1xGYWJyaWNUb2tlbkZ1bmRyYWlzZXJDb25maWcuc29sCgovKioKICogQHRpdGxlIEZhYnJpY1Rva2VuRnVuZHJhaXNlckNvbmZpZwogKgogKiBAZGV2IFRoZSBzdGF0aWMgY29uZmlndXJhdGlvbiBmb3IgdGhlIEZhYnJpYyBUb2tlbiBmdW5kcmFpc2VyLgogKi8KY29udHJhY3QgRmFicmljVG9rZW5GdW5kcmFpc2VyQ29uZmlnIGlzIEZhYnJpY1Rva2VuQ29uZmlnIHsKICAgIC8vIFRoZSBudW1iZXIgb2YgRlQgcGVyIDEgRVRILgogICAgdWludCBjb25zdGFudCBDT05WRVJTSU9OX1JBVEUgPSA5MDAwOwoKICAgIC8vIFRoZSBwdWJsaWMgc2FsZSBoYXJkIGNhcCBvZiB0aGUgZnVuZHJhaXNlci4KICAgIHVpbnQgY29uc3RhbnQgVE9LRU5TX0hBUkRfQ0FQID0gNzEyNTAgKiAoMTAqKjMpICogREVDSU1BTFNfRkFDVE9SOwoKICAgIC8vIFRoZSBzdGFydCBkYXRlIG9mIHRoZSBmdW5kcmFpc2VyOiBUaHVyc2RheSwgMjAxOC0wMi0xNSAxMDowMDowMCBVVEMuCiAgICB1aW50IGNvbnN0YW50IFNUQVJUX0RBVEUgPSAxNTE4Njg4ODAwOwoKICAgIC8vIFRoZSBlbmQgZGF0ZSBvZiB0aGUgZnVuZHJhaXNlcjogU3VuZGF5LCAyMDE4LTA0LTAxIDEwOjAwOjAwIFVUQyAoNDUgZGF5cyBhZnRlciBgU1RBUlRfREFURWApLgogICAgdWludCBjb25zdGFudCBFTkRfREFURSA9IDE1MjI1NzY4MDA7CiAgICAKICAgIC8vIFRvdGFsIG51bWJlciBvZiB0b2tlbnMgbG9ja2VkIGZvciB0aGUgRlQgY29yZSB0ZWFtLgogICAgdWludCBjb25zdGFudCBUT0tFTlNfTE9DS0VEX0NPUkVfVEVBTSA9IDEyICogKDEwKio2KSAqIERFQ0lNQUxTX0ZBQ1RPUjsKCiAgICAvLyBUb3RhbCBudW1iZXIgb2YgdG9rZW5zIGxvY2tlZCBmb3IgRlQgYWR2aXNvcnMuCiAgICB1aW50IGNvbnN0YW50IFRPS0VOU19MT0NLRURfQURWSVNPUlMgPSA3ICogKDEwKio2KSAqIERFQ0lNQUxTX0ZBQ1RPUjsKCiAgICAvLyBUaGUgcmVsZWFzZSBkYXRlIGZvciB0b2tlbnMgbG9ja2VkIGZvciB0aGUgRlQgY29yZSB0ZWFtLgogICAgdWludCBjb25zdGFudCBUT0tFTlNfTE9DS0VEX0NPUkVfVEVBTV9SRUxFQVNFX0RBVEUgPSBTVEFSVF9EQVRFICsgMSB5ZWFyczsKCiAgICAvLyBUaGUgcmVsZWFzZSBkYXRlIGZvciB0b2tlbnMgbG9ja2VkIGZvciBGVCBhZHZpc29ycy4KICAgIHVpbnQgY29uc3RhbnQgVE9LRU5TX0xPQ0tFRF9BRFZJU09SU19SRUxFQVNFX0RBVEUgPSBTVEFSVF9EQVRFICsgMTgwIGRheXM7CgogICAgLy8gVG90YWwgbnVtYmVyIG9mIHRva2VucyBsb2NrZWQgZm9yIGJvdW50eSBwcm9ncmFtLgogICAgdWludCBjb25zdGFudCBUT0tFTlNfQk9VTlRZX1BST0dSQU0gPSAxICogKDEwKio2KSAqIERFQ0lNQUxTX0ZBQ1RPUjsKCiAgICAvLyBNYXhpbXVtIGdhcyBwcmljZSBsaW1pdAogICAgdWludCBjb25zdGFudCBNQVhfR0FTX1BSSUNFID0gNTAwMDAwMDAwMDAgd2VpOyAvLyA1MCBnd2VpL3NoYW5vbgoKICAgIC8vIE1pbmltdW0gaW5kaXZpZHVhbCBjb250cmlidXRpb24KICAgIHVpbnQgY29uc3RhbnQgTUlOX0NPTlRSSUJVVElPTiA9ICAwLjEgZXRoZXI7CgogICAgLy8gSW5kaXZpZHVhbCBsaW1pdCBpbiBldGhlcgogICAgdWludCBjb25zdGFudCBJTkRJVklEVUFMX0VUSEVSX0xJTUlUID0gIDkgZXRoZXI7Cn0KCi8vIEZpbGU6IGNvbnRyYWN0c1x0cmFpdHNcVG9rZW5TYWZlLnNvbAoKLyoqCiAqIEB0aXRsZSBUb2tlblNhZmUKICoKICogQGRldiBBIG11bHRpLWJ1bmRsZSB0b2tlbiBzYWZlIGNvbnRyYWN0IHRoYXQgY29udGFpbnMgbG9ja2VkIHRva2VucyByZWxlYXNlZCBhZnRlciBhIGRhdGUgZm9yIHRoZSBzcGVjaWZpYyBidW5kbGUgdHlwZS4KICovCmNvbnRyYWN0IFRva2VuU2FmZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICBzdHJ1Y3QgQWNjb3VudHNCdW5kbGUgewogICAgICAgIC8vIFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGxvY2tlZC4KICAgICAgICB1aW50IGxvY2tlZFRva2VuczsKICAgICAgICAvLyBUaGUgcmVsZWFzZSBkYXRlIGZvciB0aGUgbG9ja2VkIHRva2VucwogICAgICAgIC8vIE5vdGU6IFVuaXggdGltZXN0YW1wIGZpdHMgdWludDMyLCBob3dldmVyIGJsb2NrLnRpbWVzdGFtcCBpcyB1aW50CiAgICAgICAgdWludCByZWxlYXNlRGF0ZTsKICAgICAgICAvLyBUaGUgYmFsYW5jZXMgZm9yIHRoZSBGVCBsb2NrZWQgdG9rZW4gYWNjb3VudHMuCiAgICAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKICAgIH0KCiAgICAvLyBUaGUgYWNjb3VudCBidW5kbGVzIG9mIGxvY2tlZCB0b2tlbnMgZ3JvdXBlZCBieSByZWxlYXNlIGRhdGUKICAgIG1hcHBpbmcgKHVpbnQ4ID0+IEFjY291bnRzQnVuZGxlKSBwdWJsaWMgYnVuZGxlczsKCiAgICAvLyBUaGUgYEVSQzIwVG9rZW5JbnRlcmZhY2VgIGNvbnRyYWN0LgogICAgRVJDMjBUb2tlbkludGVyZmFjZSB0b2tlbjsKCiAgICAvKioKICAgICAqIEBkZXYgVGhlIGNvbnN0cnVjdG9yLgogICAgICoKICAgICAqIEBwYXJhbSBfdG9rZW4gVGhlIGFkZHJlc3Mgb2YgdGhlIEZhYnJpYyBUb2tlbiAoZnVuZHJhaXNlcikgY29udHJhY3QuCiAgICAgKi8KICAgIGZ1bmN0aW9uIFRva2VuU2FmZShhZGRyZXNzIF90b2tlbikgcHVibGljIHsKICAgICAgICB0b2tlbiA9IEVSQzIwVG9rZW5JbnRlcmZhY2UoX3Rva2VuKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVGhlIGZ1bmN0aW9uIGluaXRpYWxpemVzIHRoZSBidW5kbGUgb2YgYWNjb3VudHMgd2l0aCBhIHJlbGVhc2UgZGF0ZS4KICAgICAqCiAgICAgKiBAcGFyYW0gX3R5cGUgQnVuZGxlIHR5cGUuCiAgICAgKiBAcGFyYW0gX3JlbGVhc2VEYXRlIFVuaXggdGltZXN0YW1wIG9mIHRoZSB0aW1lIGFmdGVyIHdoaWNoIHRoZSB0b2tlbnMgY2FuIGJlIHJlbGVhc2VkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGluaXRCdW5kbGUodWludDggX3R5cGUsIHVpbnQgX3JlbGVhc2VEYXRlKSBpbnRlcm5hbCB7CiAgICAgICAgYnVuZGxlc1tfdHlwZV0ucmVsZWFzZURhdGUgPSBfcmVsZWFzZURhdGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFkZCBuZXcgYWNjb3VudCB3aXRoIGxvY2tlZCB0b2tlbiBiYWxhbmNlIHRvIHRoZSBzcGVjaWZpZWQgYnVuZGxlIHR5cGUuCiAgICAgKgogICAgICogQHBhcmFtIF90eXBlIEJ1bmRsZSB0eXBlLgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IHRvIGJlIGFkZGVkLgogICAgICogQHBhcmFtIF9iYWxhbmNlIFRoZSBudW1iZXIgb2YgdG9rZW5zIHRvIGJlIGxvY2tlZC4KICAgICAqLwogICAgZnVuY3Rpb24gYWRkTG9ja2VkQWNjb3VudCh1aW50OCBfdHlwZSwgYWRkcmVzcyBfYWNjb3VudCwgdWludCBfYmFsYW5jZSkgaW50ZXJuYWwgewogICAgICAgIHZhciBidW5kbGUgPSBidW5kbGVzW190eXBlXTsKICAgICAgICBidW5kbGUuYmFsYW5jZXNbX2FjY291bnRdID0gYnVuZGxlLmJhbGFuY2VzW19hY2NvdW50XS5wbHVzKF9iYWxhbmNlKTsKICAgICAgICBidW5kbGUubG9ja2VkVG9rZW5zID0gYnVuZGxlLmxvY2tlZFRva2Vucy5wbHVzKF9iYWxhbmNlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIGFuIGFjY291bnQgdG8gYmUgcmVsZWFzZWQgaWYgaXQgbWVldHMgdGhlIHRpbWUgY29uc3RyYWludHMuCiAgICAgKgogICAgICogQHBhcmFtIF90eXBlIEJ1bmRsZSB0eXBlLgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IHRvIGJlIHJlbGVhc2VkLgogICAgICovCiAgICBmdW5jdGlvbiByZWxlYXNlQWNjb3VudCh1aW50OCBfdHlwZSwgYWRkcmVzcyBfYWNjb3VudCkgaW50ZXJuYWwgewogICAgICAgIHZhciBidW5kbGUgPSBidW5kbGVzW190eXBlXTsKICAgICAgICByZXF1aXJlKG5vdyA+PSBidW5kbGUucmVsZWFzZURhdGUpOwogICAgICAgIHVpbnQgdG9rZW5zID0gYnVuZGxlLmJhbGFuY2VzW19hY2NvdW50XTsKICAgICAgICByZXF1aXJlKHRva2VucyA+IDApOwogICAgICAgIGJ1bmRsZS5iYWxhbmNlc1tfYWNjb3VudF0gPSAwOwogICAgICAgIGJ1bmRsZS5sb2NrZWRUb2tlbnMgPSBidW5kbGUubG9ja2VkVG9rZW5zLm1pbnVzKHRva2Vucyk7CiAgICAgICAgaWYgKCF0b2tlbi50cmFuc2ZlcihfYWNjb3VudCwgdG9rZW5zKSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0c1xGYWJyaWNUb2tlblNhZmUuc29sCgovKioKICogQHRpdGxlIEZhYnJpY1Rva2VuU2FmZQogKgogKiBAZGV2IFRoZSBGYWJyaWMgVG9rZW4gc2FmZSBjb250YWluaW5nIGFsbCBkZXRhaWxzIGFib3V0IGxvY2tlZCB0b2tlbnMuCiAqLwpjb250cmFjdCBGYWJyaWNUb2tlblNhZmUgaXMgVG9rZW5TYWZlLCBGYWJyaWNUb2tlbkZ1bmRyYWlzZXJDb25maWcgewogICAgLy8gQnVuZGxlIHR5cGUgY29uc3RhbnRzCiAgICB1aW50OCBjb25zdGFudCBDT1JFX1RFQU0gPSAwOwogICAgdWludDggY29uc3RhbnQgQURWSVNPUlMgPSAxOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgY29uc3RydWN0b3IuCiAgICAgKgogICAgICogQHBhcmFtIF90b2tlbiBUaGUgYWRkcmVzcyBvZiB0aGUgRmFicmljIFRva2VuIChmdW5kcmFpc2VyKSBjb250cmFjdC4KICAgICAqLwogICAgZnVuY3Rpb24gRmFicmljVG9rZW5TYWZlKGFkZHJlc3MgX3Rva2VuKSBwdWJsaWMKICAgICAgICBUb2tlblNhZmUoX3Rva2VuKQogICAgewogICAgICAgIHRva2VuID0gRVJDMjBUb2tlbkludGVyZmFjZShfdG9rZW4pOwoKICAgICAgICAvLy8gQ29yZSB0ZWFtLgogICAgICAgIGluaXRCdW5kbGUoQ09SRV9URUFNLAogICAgICAgICAgICBUT0tFTlNfTE9DS0VEX0NPUkVfVEVBTV9SRUxFQVNFX0RBVEUKICAgICAgICApOwoKICAgICAgICAvLyBBY2NvdW50cyB3aXRoIHRva2VucyBsb2NrZWQgZm9yIHRoZSBGVCBjb3JlIHRlYW0uCiAgICAgICAgYWRkTG9ja2VkQWNjb3VudChDT1JFX1RFQU0sIDB4QjQ5NDA5NjU0OGFBMDQ5QzA2NjI4OUEwODMyMDRFOTIzY0JmNDQxMywgNCAqICgxMCoqNikgKiBERUNJTUFMU19GQUNUT1IpOwogICAgICAgIGFkZExvY2tlZEFjY291bnQoQ09SRV9URUFNLCAweEUzNTA2QjAxQmVlMzc3ODI5ZWUzQ2ZmRDhiYWU2NTBlOTkwYzVkNjgsIDQgKiAoMTAqKjYpICogREVDSU1BTFNfRkFDVE9SKTsKICAgICAgICBhZGRMb2NrZWRBY2NvdW50KENPUkVfVEVBTSwgMHgzZDEzMjE5ZGMxQjg5MTNFMDE5QmVDZjA3NzJDMmE1NDMxOGU1NzE4LCA0ICogKDEwKio2KSAqIERFQ0lNQUxTX0ZBQ1RPUik7CgogICAgICAgIC8vIFZlcmlmeSB0aGF0IHRoZSB0b2tlbnMgYWRkIHVwIHRvIHRoZSBjb25zdGFudCBpbiB0aGUgY29uZmlndXJhdGlvbi4KICAgICAgICBhc3NlcnQoYnVuZGxlc1tDT1JFX1RFQU1dLmxvY2tlZFRva2VucyA9PSBUT0tFTlNfTE9DS0VEX0NPUkVfVEVBTSk7CgogICAgICAgIC8vLyBBZHZpc29ycy4KICAgICAgICBpbml0QnVuZGxlKEFEVklTT1JTLAogICAgICAgICAgICBUT0tFTlNfTE9DS0VEX0FEVklTT1JTX1JFTEVBU0VfREFURQogICAgICAgICk7CgogICAgICAgIC8vIEFjY291bnRzIHdpdGggRlQgdG9rZW5zIGxvY2tlZCBmb3IgYWR2aXNvcnMuCiAgICAgICAgYWRkTG9ja2VkQWNjb3VudChBRFZJU09SUywgMHg0NjQ3RGEwN2RBQWIxNzQ2NDI3OEI5ODhDREU1OUE0YjkxMUVCZTQ0LCAyICogKDEwKio2KSAqIERFQ0lNQUxTX0ZBQ1RPUik7CiAgICAgICAgYWRkTG9ja2VkQWNjb3VudChBRFZJU09SUywgMHgzZUEyY2FhYzVBMEE0YTU1ZjllMzA0QWNEMDliM0NFZTZjRDRCYzM5LCAxICogKDEwKio2KSAqIERFQ0lNQUxTX0ZBQ1RPUik7CiAgICAgICAgYWRkTG9ja2VkQWNjb3VudChBRFZJU09SUywgMHhkNWY3OTFFQzNFRDc5Zjc5YTQwMWIxMmY3NjI1RTFhOTcyMzgyNDM3LCAxICogKDEwKio2KSAqIERFQ0lNQUxTX0ZBQ1RPUik7CiAgICAgICAgYWRkTG9ja2VkQWNjb3VudChBRFZJU09SUywgMHhjYWVhZTNDRDFhNWQzRTZFOTUwNDI0Qzk5NGUxNDM0OGFjM0VjNWRBLCAxICogKDEwKio2KSAqIERFQ0lNQUxTX0ZBQ1RPUik7CiAgICAgICAgYWRkTG9ja2VkQWNjb3VudChBRFZJU09SUywgMHhiNkVBNjE5MzA1OEYzYzhBNEE0MTNkMTc2ODkxZDE3M0Q2MkUwMGJFLCAxICogKDEwKio2KSAqIERFQ0lNQUxTX0ZBQ1RPUik7CiAgICAgICAgYWRkTG9ja2VkQWNjb3VudChBRFZJU09SUywgMHg4YjNFMTg0Q2Y1QzNiRkRhQjFDNEQwRjMwNzEzRDMwMzE0RmNmRjdjLCAxICogKDEwKio2KSAqIERFQ0lNQUxTX0ZBQ1RPUik7CgogICAgICAgIC8vIFZlcmlmeSB0aGF0IHRoZSB0b2tlbnMgYWRkIHVwIHRvIHRoZSBjb25zdGFudCBpbiB0aGUgY29uZmlndXJhdGlvbi4KICAgICAgICBhc3NlcnQoYnVuZGxlc1tBRFZJU09SU10ubG9ja2VkVG9rZW5zID09IFRPS0VOU19MT0NLRURfQURWSVNPUlMpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBSZXR1cm5zIHRoZSB0b3RhbCBsb2NrZWQgdG9rZW5zLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBieSB0aGUgZnVuZHJhaXNlciB0byBkZXRlcm1pbmUgbnVtYmVyIG9mIHRva2VucyB0byBjcmVhdGUgdXBvbiBmaW5hbGl6YXRpb24uCiAgICAgKgogICAgICogQHJldHVybiBUaGUgY3VycmVudCB0b3RhbCBudW1iZXIgb2YgbG9ja2VkIEZhYnJpYyBUb2tlbnMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsVG9rZW5zTG9ja2VkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gYnVuZGxlc1tDT1JFX1RFQU1dLmxvY2tlZFRva2Vucy5wbHVzKGJ1bmRsZXNbQURWSVNPUlNdLmxvY2tlZFRva2Vucyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyBjb3JlIHRlYW0gYWNjb3VudCBGVCB0b2tlbnMgdG8gYmUgcmVsZWFzZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlbGVhc2VDb3JlVGVhbUFjY291bnQoKSBwdWJsaWMgewogICAgICAgIHJlbGVhc2VBY2NvdW50KENPUkVfVEVBTSwgbXNnLnNlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEFsbG93cyBhZHZpc29ycyBhY2NvdW50IEZUIHRva2VucyB0byBiZSByZWxlYXNlZC4KICAgICAqLwogICAgZnVuY3Rpb24gcmVsZWFzZUFkdmlzb3JzQWNjb3VudCgpIHB1YmxpYyB7CiAgICAgICAgcmVsZWFzZUFjY291bnQoQURWSVNPUlMsIG1zZy5zZW5kZXIpOwogICAgfQp9CgovLyBGaWxlOiBjb250cmFjdHNcdHJhaXRzXFdoaXRlbGlzdC5zb2wKCmNvbnRyYWN0IFdoaXRlbGlzdCBpcyBIYXNPd25lcgp7CiAgICAvLyBXaGl0ZWxpc3QgbWFwcGluZwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyB3aGl0ZWxpc3Q7CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBjb25zdHJ1Y3Rvci4KICAgICAqLwogICAgZnVuY3Rpb24gV2hpdGVsaXN0KGFkZHJlc3MgX293bmVyKSBwdWJsaWMKICAgICAgICBIYXNPd25lcihfb3duZXIpCiAgICB7CgogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBY2Nlc3MgY29udHJvbCBtb2RpZmllciB0aGF0IGFsbG93cyBvbmx5IHdoaXRlbGlzdGVkIGFkZHJlc3MgdG8gY2FsbCB0aGUgbWV0aG9kLgogICAgICovCiAgICBtb2RpZmllciBvbmx5V2hpdGVsaXN0ZWQgewogICAgICAgIHJlcXVpcmUod2hpdGVsaXN0W21zZy5zZW5kZXJdKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0aGF0IHNldHMgd2hpdGVsaXN0IHN0YXR1cyBpbiBiYXRjaC4KICAgICAqCiAgICAgKiBAcGFyYW0gX2VudHJpZXMgQW4gYXJyYXkgd2l0aCB0aGUgZW50cmllcyB0byBiZSB1cGRhdGVkCiAgICAgKiBAcGFyYW0gX3N0YXR1cyBUaGUgbmV3IHN0YXR1cyB0byBhcHBseQogICAgICovCiAgICBmdW5jdGlvbiBzZXRXaGl0ZWxpc3RFbnRyaWVzKGFkZHJlc3NbXSBfZW50cmllcywgYm9vbCBfc3RhdHVzKSBpbnRlcm5hbCB7CiAgICAgICAgZm9yICh1aW50MzIgaSA9IDA7IGkgPCBfZW50cmllcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB3aGl0ZWxpc3RbX2VudHJpZXNbaV1dID0gX3N0YXR1czsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFB1YmxpYyBmdW5jdGlvbiB0aGF0IGFsbG93cyB0aGUgb3duZXIgdG8gd2hpdGVsaXN0IG11bHRpcGxlIGVudHJpZXMKICAgICAqCiAgICAgKiBAcGFyYW0gX2VudHJpZXMgQW4gYXJyYXkgd2l0aCB0aGUgZW50cmllcyB0byBiZSB3aGl0ZWxpc3RlZAogICAgICovCiAgICBmdW5jdGlvbiB3aGl0ZWxpc3RBZGRyZXNzZXMoYWRkcmVzc1tdIF9lbnRyaWVzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBzZXRXaGl0ZWxpc3RFbnRyaWVzKF9lbnRyaWVzLCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgUHVibGljIGZ1bmN0aW9uIHRoYXQgYWxsb3dzIHRoZSBvd25lciB0byBibGFja2xpc3QgbXVsdGlwbGUgZW50cmllcwogICAgICoKICAgICAqIEBwYXJhbSBfZW50cmllcyBBbiBhcnJheSB3aXRoIHRoZSBlbnRyaWVzIHRvIGJlIGJsYWNrbGlzdAogICAgICovCiAgICBmdW5jdGlvbiBibGFja2xpc3RBZGRyZXNzZXMoYWRkcmVzc1tdIF9lbnRyaWVzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBzZXRXaGl0ZWxpc3RFbnRyaWVzKF9lbnRyaWVzLCBmYWxzZSk7CiAgICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0c1xGYWJyaWNUb2tlbkZ1bmRyYWlzZXIuc29sCgovKioKICogQHRpdGxlIEZhYnJpY1Rva2VuRnVuZHJhaXNlcgogKgogKiBAZGV2IFRoZSBGYWJyaWMgVG9rZW4gZnVuZHJhaXNlciBjb250cmFjdC4KICovCmNvbnRyYWN0IEZhYnJpY1Rva2VuRnVuZHJhaXNlciBpcyBGYWJyaWNUb2tlbiwgRmFicmljVG9rZW5GdW5kcmFpc2VyQ29uZmlnLCBXaGl0ZWxpc3QgewogICAgLy8gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGZ1bmRyYWlzZXIgaGFzIGVuZGVkIG9yIG5vdC4KICAgIGJvb2wgcHVibGljIGZpbmFsaXplZCA9IGZhbHNlOwoKICAgIC8vIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IHdoaWNoIHdpbGwgcmVjZWl2ZSB0aGUgZnVuZHMgZ2F0aGVyZWQgYnkgdGhlIGZ1bmRyYWlzZXIuCiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeTsKCiAgICAvLyBUaGUgbnVtYmVyIG9mIEZUIHBhcnRpY2lwYW50cyB3aWxsIHJlY2VpdmUgcGVyIDEgRVRILgogICAgdWludCBwdWJsaWMgY29udmVyc2lvblJhdGU7CgogICAgLy8gRnVuZHJhaXNlciBzdGFydCBkYXRlLgogICAgdWludCBwdWJsaWMgc3RhcnREYXRlOwoKICAgIC8vIEZ1bmRyYWlzZXIgZW5kIGRhdGUuCiAgICB1aW50IHB1YmxpYyBlbmREYXRlOwoKICAgIC8vIEZ1bmRyYWlzZXIgdG9rZW5zIGhhcmQgY2FwLgogICAgdWludCBwdWJsaWMgaGFyZENhcDsKCiAgICAvLyBUaGUgYEZhYnJpY1Rva2VuU2FmZWAgY29udHJhY3QuCiAgICBGYWJyaWNUb2tlblNhZmUgcHVibGljIGZhYnJpY1Rva2VuU2FmZTsKCiAgICAvLyBUaGUgbWluaW11bSBhbW91bnQgb2YgZXRoZXIgYWxsb3dlZCBpbiB0aGUgcHVibGljIHNhbGUKICAgIHVpbnQgaW50ZXJuYWwgbWluaW11bUNvbnRyaWJ1dGlvbjsKCiAgICAvLyBUaGUgbWF4aW11bSBhbW91bnQgb2YgZXRoZXIgYWxsb3dlZCBwZXIgYWRkcmVzcwogICAgdWludCBpbnRlcm5hbCBpbmRpdmlkdWFsTGltaXQ7CgogICAgLy8gTnVtYmVyIG9mIHRva2VucyBzb2xkIGR1cmluZyB0aGUgZnVuZHJhaXNlci4KICAgIHVpbnQgcHJpdmF0ZSB0b2tlbnNTb2xkOwoKICAgIC8vIEluZGljYXRlcyB3aGV0aGVyIHRoZSB0b2tlbnMgYXJlIGNsYWltZWQgYnkgdGhlIHBhcnRuZXJzCiAgICBib29sIHByaXZhdGUgcGFydG5lclRva2Vuc0NsYWltZWQgPSBmYWxzZTsKCiAgICAvKioKICAgICAqIEBkZXYgVGhlIGV2ZW50IGZpcmVzIGV2ZXJ5IHRpbWUgYSBuZXcgYnV5ZXIgZW50ZXJzIHRoZSBmdW5kcmFpc2VyLgogICAgICoKICAgICAqIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyBvZiB0aGUgYnV5ZXIuCiAgICAgKiBAcGFyYW0gX2V0aGVycyBUaGUgbnVtYmVyIG9mIGV0aGVycyBzZW50LgogICAgICogQHBhcmFtIF90b2tlbnMgVGhlIG51bWJlciBvZiB0b2tlbnMgcmVjZWl2ZWQgYnkgdGhlIGJ1eWVyLgogICAgICogQHBhcmFtIF9uZXdUb3RhbFN1cHBseSBUaGUgdXBkYXRlZCB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGN1cnJlbnRseSBpbiBjaXJjdWxhdGlvbi4KICAgICAqIEBwYXJhbSBfY29udmVyc2lvblJhdGUgVGhlIGNvbnZlcnNpb24gcmF0ZSBhdCB3aGljaCB0aGUgdG9rZW5zIHdlcmUgYm91Z2h0LgogICAgICovCiAgICBldmVudCBGdW5kc1JlY2VpdmVkKGFkZHJlc3MgaW5kZXhlZCBfYWRkcmVzcywgdWludCBfZXRoZXJzLCB1aW50IF90b2tlbnMsIHVpbnQgX25ld1RvdGFsU3VwcGx5LCB1aW50IF9jb252ZXJzaW9uUmF0ZSk7CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBldmVudCBmaXJlcyB3aGVuIHRoZSBiZW5lZmljaWFyeSBvZiB0aGUgZnVuZHJhaXNlciBpcyBjaGFuZ2VkLgogICAgICoKICAgICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBiZW5lZmljaWFyeS4KICAgICAqLwogICAgZXZlbnQgQmVuZWZpY2lhcnlDaGFuZ2UoYWRkcmVzcyBfYmVuZWZpY2lhcnkpOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgZXZlbnQgZmlyZXMgd2hlbiB0aGUgbnVtYmVyIG9mIEZUIHBlciAxIEVUSCBpcyBjaGFuZ2VkLgogICAgICoKICAgICAqIEBwYXJhbSBfY29udmVyc2lvblJhdGUgVGhlIG5ldyBudW1iZXIgb2YgRlQgcGVyIDEgRVRILgogICAgICovCiAgICBldmVudCBDb252ZXJzaW9uUmF0ZUNoYW5nZSh1aW50IF9jb252ZXJzaW9uUmF0ZSk7CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBldmVudCBmaXJlcyB3aGVuIHRoZSBmdW5kcmFpc2VyIGlzIHN1Y2Nlc3NmdWxseSBmaW5hbGl6ZWQuCiAgICAgKgogICAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBUaGUgYWRkcmVzcyBvZiB0aGUgYmVuZWZpY2lhcnkuCiAgICAgKiBAcGFyYW0gX2V0aGVycyBUaGUgbnVtYmVyIG9mIGV0aGVycyB0cmFuc2ZlcmVkIHRvIHRoZSBiZW5lZmljaWFyeS4KICAgICAqIEBwYXJhbSBfdG90YWxTdXBwbHkgVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgaW4gY2lyY3VsYXRpb24uCiAgICAgKi8KICAgIGV2ZW50IEZpbmFsaXplZChhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludCBfZXRoZXJzLCB1aW50IF90b3RhbFN1cHBseSk7CgogICAgLyoqCiAgICAgKiBAZGV2IFRoZSBjb25zdHJ1Y3Rvci4KICAgICAqCiAgICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgcmVjZWl2ZSB0aGUgZnVuZHMgZ2F0aGVyZWQgYnkgdGhlIGZ1bmRyYWlzZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIEZhYnJpY1Rva2VuRnVuZHJhaXNlcihhZGRyZXNzIF9iZW5lZmljaWFyeSkgcHVibGljCiAgICAgICAgRmFicmljVG9rZW4oMCkKICAgICAgICBXaGl0ZWxpc3QobXNnLnNlbmRlcikKICAgIHsKICAgICAgICByZXF1aXJlKF9iZW5lZmljaWFyeSAhPSAwKTsKCiAgICAgICAgYmVuZWZpY2lhcnkgPSBfYmVuZWZpY2lhcnk7CiAgICAgICAgY29udmVyc2lvblJhdGUgPSBDT05WRVJTSU9OX1JBVEU7CiAgICAgICAgc3RhcnREYXRlID0gU1RBUlRfREFURTsKICAgICAgICBlbmREYXRlID0gRU5EX0RBVEU7CiAgICAgICAgaGFyZENhcCA9IFRPS0VOU19IQVJEX0NBUDsKICAgICAgICB0b2tlbnNTb2xkID0gMDsKICAgICAgICBtaW5pbXVtQ29udHJpYnV0aW9uID0gTUlOX0NPTlRSSUJVVElPTjsKICAgICAgICBpbmRpdmlkdWFsTGltaXQgPSBJTkRJVklEVUFMX0VUSEVSX0xJTUlUICogQ09OVkVSU0lPTl9SQVRFOwoKICAgICAgICBmYWJyaWNUb2tlblNhZmUgPSBuZXcgRmFicmljVG9rZW5TYWZlKHRoaXMpOwoKICAgICAgICAvLyBGcmVlemUgdGhlIHRyYW5zZmVycyBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBmdW5kcmFpc2VyLgogICAgICAgIGZyZWV6ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBDaGFuZ2VzIHRoZSBiZW5lZmljaWFyeSBvZiB0aGUgZnVuZHJhaXNlci4KICAgICAqCiAgICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgYmVuZWZpY2lhcnkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldEJlbmVmaWNpYXJ5KGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9iZW5lZmljaWFyeSAhPSAwKTsKCiAgICAgICAgYmVuZWZpY2lhcnkgPSBfYmVuZWZpY2lhcnk7CgogICAgICAgIEJlbmVmaWNpYXJ5Q2hhbmdlKF9iZW5lZmljaWFyeSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFNldHMgY29udmVyc3Rpb24gcmF0ZSBvZiAxIEVUSCB0byBGVC4gQ2FuIG9ubHkgYmUgY2hhbmdlZCBiZWZvcmUgdGhlIGZ1bmRyYWlzZXIgc3RhcnRzLgogICAgICoKICAgICAqIEBwYXJhbSBfY29udmVyc2lvblJhdGUgVGhlIG5ldyBudW1iZXIgb2YgRmFicmljIFRva2VucyBwZXIgMSBFVEguCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldENvbnZlcnNpb25SYXRlKHVpbnQgX2NvbnZlcnNpb25SYXRlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5vdyA8IHN0YXJ0RGF0ZSk7CiAgICAgICAgcmVxdWlyZShfY29udmVyc2lvblJhdGUgPiAwKTsKCiAgICAgICAgY29udmVyc2lvblJhdGUgPSBfY29udmVyc2lvblJhdGU7CiAgICAgICAgaW5kaXZpZHVhbExpbWl0ID0gSU5ESVZJRFVBTF9FVEhFUl9MSU1JVCAqIF9jb252ZXJzaW9uUmF0ZTsKCiAgICAgICAgQ29udmVyc2lvblJhdGVDaGFuZ2UoX2NvbnZlcnNpb25SYXRlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVGhlIGRlZmF1bHQgZnVuY3Rpb24gd2hpY2ggd2lsbCBmaXJlIGV2ZXJ5IHRpbWUgc29tZW9uZSBzZW5kcyBldGhlcnMgdG8gdGhpcyBjb250cmFjdCdzIGFkZHJlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUgewogICAgICAgIGJ1eVRva2VucygpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBDcmVhdGVzIG5ldyB0b2tlbnMgYmFzZWQgb24gdGhlIG51bWJlciBvZiBldGhlcnMgc2VudCBhbmQgdGhlIGNvbnZlcnNpb24gcmF0ZS4KICAgICAqLwogICAgZnVuY3Rpb24gYnV5VG9rZW5zKCkgcHVibGljIHBheWFibGUgb25seVdoaXRlbGlzdGVkIHsKICAgICAgICByZXF1aXJlKCFmaW5hbGl6ZWQpOwogICAgICAgIHJlcXVpcmUobm93ID49IHN0YXJ0RGF0ZSk7CiAgICAgICAgcmVxdWlyZShub3cgPD0gZW5kRGF0ZSk7CiAgICAgICAgcmVxdWlyZSh0eC5nYXNwcmljZSA8PSBNQVhfR0FTX1BSSUNFKTsgIC8vIGdhcyBwcmljZSBsaW1pdAogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IG1pbmltdW1Db250cmlidXRpb24pOyAgLy8gcmVxdWlyZWQgbWluaW11bSBjb250cmlidXRpb24KICAgICAgICByZXF1aXJlKHRva2Vuc1NvbGQgPD0gaGFyZENhcCk7CgogICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIHRva2VucyB0aGUgYnV5ZXIgd2lsbCByZWNlaXZlLgogICAgICAgIHVpbnQgdG9rZW5zID0gbXNnLnZhbHVlLm11bChjb252ZXJzaW9uUmF0ZSk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5wbHVzKHRva2Vucyk7CgogICAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBpbmRpdmlkdWFsIGNvbnRyaWJ1dGlvbiBsaW1pdCBoYXMgbm90IGJlZW4gcmVhY2hlZAogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPD0gaW5kaXZpZHVhbExpbWl0KTsKCiAgICAgICAgdG9rZW5zU29sZCA9IHRva2Vuc1NvbGQucGx1cyh0b2tlbnMpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkucGx1cyh0b2tlbnMpOwoKICAgICAgICBUcmFuc2ZlcigweDAsIG1zZy5zZW5kZXIsIHRva2Vucyk7CgogICAgICAgIEZ1bmRzUmVjZWl2ZWQoCiAgICAgICAgICAgIG1zZy5zZW5kZXIsCiAgICAgICAgICAgIG1zZy52YWx1ZSwgCiAgICAgICAgICAgIHRva2VucywgCiAgICAgICAgICAgIHRvdGFsU3VwcGx5LCAKICAgICAgICAgICAgY29udmVyc2lvblJhdGUKICAgICAgICApOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBEaXN0cmlidXRlcyB0aGUgdG9rZW5zIGFsbG9jYXRlZCBmb3IgdGhlIHN0cmF0ZWdpYyBwYXJ0bmVycy4KICAgICAqLwogICAgZnVuY3Rpb24gY2xhaW1QYXJ0bmVyVG9rZW5zKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKCFwYXJ0bmVyVG9rZW5zQ2xhaW1lZCk7CiAgICAgICAgcmVxdWlyZShub3cgPj0gc3RhcnREYXRlKTsKCiAgICAgICAgcGFydG5lclRva2Vuc0NsYWltZWQgPSB0cnVlOwoKICAgICAgICBhZGRyZXNzIHBhcnRuZXIxID0gMHhBNjU1NkI5QkQwQUFiZjBkODgyNDM3NEEzQzQyNWQzMTViMDliODMyOwogICAgICAgIGJhbGFuY2VzW3BhcnRuZXIxXSA9IGJhbGFuY2VzW3BhcnRuZXIxXS5wbHVzKDEyNSAqICgxMCoqNCkgKiBERUNJTUFMU19GQUNUT1IpOwoKICAgICAgICBhZGRyZXNzIHBhcnRuZXIyID0gMHg3ODNBMWNCYzM3YThlZjJGMzY4OTA4NDkwYjcyQmZFODAxREExODc3OwogICAgICAgIGJhbGFuY2VzW3BhcnRuZXIyXSA9IGJhbGFuY2VzW3BhcnRuZXIyXS5wbHVzKDc1MCAqICgxMCoqNCkgKiBERUNJTUFMU19GQUNUT1IpOwoKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnBsdXMoODc1ICogKDEwKio0KSAqIERFQ0lNQUxTX0ZBQ1RPUik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZpbmFsaXplIHRoZSBmdW5kcmFpc2VyIGlmIGBlbmREYXRlYCBoYXMgcGFzc2VkIG9yIGlmIGBoYXJkQ2FwYCBpcyByZWFjaGVkLgogICAgICovCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoKHRvdGFsU3VwcGx5ID49IGhhcmRDYXApIHx8IChub3cgPj0gZW5kRGF0ZSkpOwogICAgICAgIHJlcXVpcmUoIWZpbmFsaXplZCk7CgogICAgICAgIEZpbmFsaXplZChiZW5lZmljaWFyeSwgdGhpcy5iYWxhbmNlLCB0b3RhbFN1cHBseSk7CgogICAgICAgIC8vLyBTZW5kIHRoZSB0b3RhbCBudW1iZXIgb2YgRVRIIGdhdGhlcmVkIHRvIHRoZSBiZW5lZmljaWFyeS4KICAgICAgICBiZW5lZmljaWFyeS50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwoKICAgICAgICAvLy8gQWxsb2NhdGUgbG9ja2VkIHRva2VucyB0byB0aGUgYEZhYnJpY1Rva2VuU2FmZWAgY29udHJhY3QuCiAgICAgICAgdWludCB0b3RhbFRva2Vuc0xvY2tlZCA9IGZhYnJpY1Rva2VuU2FmZS50b3RhbFRva2Vuc0xvY2tlZCgpOwogICAgICAgIGJhbGFuY2VzW2FkZHJlc3MoZmFicmljVG9rZW5TYWZlKV0gPSBiYWxhbmNlc1thZGRyZXNzKGZhYnJpY1Rva2VuU2FmZSldLnBsdXModG90YWxUb2tlbnNMb2NrZWQpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkucGx1cyh0b3RhbFRva2Vuc0xvY2tlZCk7CgogICAgICAgIC8vIFRyYW5zZmVyIHRoZSBmdW5kcyBmb3IgdGhlIGJvdW50eSBwcm9ncmFtLgogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5wbHVzKFRPS0VOU19CT1VOVFlfUFJPR1JBTSk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5wbHVzKFRPS0VOU19CT1VOVFlfUFJPR1JBTSk7CgogICAgICAgIC8vLyBGaW5hbGl6ZSB0aGUgZnVuZHJhaXNlci4gS2VlcCBpbiBtaW5kIHRoYXQgdGhpcyBjYW5ub3QgYmUgdW5kb25lLgogICAgICAgIGZpbmFsaXplZCA9IHRydWU7CgogICAgICAgIC8vIFVuZnJlZXplIHRyYW5zZmVycwogICAgICAgIHVuZnJlZXplKCk7CiAgICB9Cn0='.
	

]
