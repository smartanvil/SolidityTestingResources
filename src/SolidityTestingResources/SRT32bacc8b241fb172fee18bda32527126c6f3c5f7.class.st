Class {
	#name : #SRT32bacc8b241fb172fee18bda32527126c6f3c5f7,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT32bacc8b241fb172fee18bda32527126c6f3c5f7 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuNDsKCi8vc29sIFdhbGxldAovLyBNdWx0aS1zaWcsIGRhaWx5LWxpbWl0ZWQgYWNjb3VudCBwcm94eS93YWxsZXQuCi8vIEBhdXRob3JzOgovLyBHYXYgV29vZCA8PHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI5Y2ZiZGNmOWU4ZjRmOGY5ZWFiMmZmZjNmMSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+Ci8vIGluaGVyaXRhYmxlICJwcm9wZXJ0eSIgY29udHJhY3QgdGhhdCBlbmFibGVzIG1ldGhvZHMgdG8gYmUgcHJvdGVjdGVkIGJ5IHJlcXVpcmluZyB0aGUgYWNxdWllc2NlbmNlIG9mIGVpdGhlciBhCi8vIHNpbmdsZSwgb3IsIGNydWNpYWxseSwgZWFjaCBvZiBhIG51bWJlciBvZiwgZGVzaWduYXRlZCBvd25lcnMuCi8vIHVzYWdlOgovLyB1c2UgbW9kaWZpZXJzIG9ubHlvd25lciAoanVzdCBvd24gb3duZWQpIG9yIG9ubHltYW55b3duZXJzKGhhc2gpLCB3aGVyZWJ5IHRoZSBzYW1lIGhhc2ggbXVzdCBiZSBwcm92aWRlZCBieQovLyBzb21lIG51bWJlciAoc3BlY2lmaWVkIGluIGNvbnN0cnVjdG9yKSBvZiB0aGUgc2V0IG9mIG93bmVycyAoc3BlY2lmaWVkIGluIHRoZSBjb25zdHJ1Y3RvciwgbW9kaWZpYWJsZSkgYmVmb3JlIHRoZQovLyBpbnRlcmlvciBpcyBleGVjdXRlZC4KY29udHJhY3QgbXVsdGlvd25lZCB7CgoJLy8gVFlQRVMKCiAgICAvLyBzdHJ1Y3QgZm9yIHRoZSBzdGF0dXMgb2YgYSBwZW5kaW5nIG9wZXJhdGlvbi4KICAgIHN0cnVjdCBQZW5kaW5nU3RhdGUgewogICAgICAgIHVpbnQgeWV0TmVlZGVkOwogICAgICAgIHVpbnQgb3duZXJzRG9uZTsKICAgICAgICB1aW50IGluZGV4OwogICAgfQoKCS8vIEVWRU5UUwoKICAgIC8vIHRoaXMgY29udHJhY3Qgb25seSBoYXMgc2l4IHR5cGVzIG9mIGV2ZW50czogaXQgY2FuIGFjY2VwdCBhIGNvbmZpcm1hdGlvbiwgaW4gd2hpY2ggY2FzZQogICAgLy8gd2UgcmVjb3JkIG93bmVyIGFuZCBvcGVyYXRpb24gKGhhc2gpIGFsb25nc2lkZSBpdC4KICAgIGV2ZW50IENvbmZpcm1hdGlvbihhZGRyZXNzIG93bmVyLCBieXRlczMyIG9wZXJhdGlvbik7CiAgICBldmVudCBSZXZva2UoYWRkcmVzcyBvd25lciwgYnl0ZXMzMiBvcGVyYXRpb24pOwogICAgLy8gc29tZSBvdGhlcnMgYXJlIGluIHRoZSBjYXNlIG9mIGFuIG93bmVyIGNoYW5naW5nLgogICAgZXZlbnQgT3duZXJDaGFuZ2VkKGFkZHJlc3Mgb2xkT3duZXIsIGFkZHJlc3MgbmV3T3duZXIpOwogICAgZXZlbnQgT3duZXJBZGRlZChhZGRyZXNzIG5ld093bmVyKTsKICAgIGV2ZW50IE93bmVyUmVtb3ZlZChhZGRyZXNzIG9sZE93bmVyKTsKICAgIC8vIHRoZSBsYXN0IG9uZSBpcyBlbWl0dGVkIGlmIHRoZSByZXF1aXJlZCBzaWduYXR1cmVzIGNoYW5nZQogICAgZXZlbnQgUmVxdWlyZW1lbnRDaGFuZ2VkKHVpbnQgbmV3UmVxdWlyZW1lbnQpOwoKCS8vIE1PRElGSUVSUwoKICAgIC8vIHNpbXBsZSBzaW5nbGUtc2lnIGZ1bmN0aW9uIG1vZGlmaWVyLgogICAgbW9kaWZpZXIgb25seW93bmVyIHsKICAgICAgICBpZiAoaXNPd25lcihtc2cuc2VuZGVyKSkKICAgICAgICAgICAgXzsKICAgIH0KICAgIC8vIG11bHRpLXNpZyBmdW5jdGlvbiBtb2RpZmllcjogdGhlIG9wZXJhdGlvbiBtdXN0IGhhdmUgYW4gaW50cmluc2ljIGhhc2ggaW4gb3JkZXIKICAgIC8vIHRoYXQgbGF0ZXIgYXR0ZW1wdHMgY2FuIGJlIHJlYWxpc2VkIGFzIHRoZSBzYW1lIHVuZGVybHlpbmcgb3BlcmF0aW9uIGFuZAogICAgLy8gdGh1cyBjb3VudCBhcyBjb25maXJtYXRpb25zLgogICAgbW9kaWZpZXIgb25seW1hbnlvd25lcnMoYnl0ZXMzMiBfb3BlcmF0aW9uKSB7CiAgICAgICAgaWYgKGNvbmZpcm1BbmRDaGVjayhfb3BlcmF0aW9uKSkKICAgICAgICAgICAgXzsKICAgIH0KCgkvLyBNRVRIT0RTCgogICAgLy8gY29uc3RydWN0b3IgaXMgZ2l2ZW4gbnVtYmVyIG9mIHNpZ3MgcmVxdWlyZWQgdG8gZG8gcHJvdGVjdGVkICJvbmx5bWFueW93bmVycyIgdHJhbnNhY3Rpb25zCiAgICAvLyBhcyB3ZWxsIGFzIHRoZSBzZWxlY3Rpb24gb2YgYWRkcmVzc2VzIGNhcGFibGUgb2YgY29uZmlybWluZyB0aGVtLgogICAgZnVuY3Rpb24gbXVsdGlvd25lZChhZGRyZXNzW10gX293bmVycywgdWludCBfcmVxdWlyZWQpIHsKICAgICAgICBtX251bU93bmVycyA9IF9vd25lcnMubGVuZ3RoICsgMTsKICAgICAgICBtX293bmVyc1sxXSA9IHVpbnQobXNnLnNlbmRlcik7CiAgICAgICAgbV9vd25lckluZGV4W3VpbnQobXNnLnNlbmRlcildID0gMTsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfb3duZXJzLmxlbmd0aDsgKytpKQogICAgICAgIHsKICAgICAgICAgICAgbV9vd25lcnNbMiArIGldID0gdWludChfb3duZXJzW2ldKTsKICAgICAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX293bmVyc1tpXSldID0gMiArIGk7CiAgICAgICAgfQogICAgICAgIG1fcmVxdWlyZWQgPSBfcmVxdWlyZWQ7CiAgICB9CgogICAgLy8gUmV2b2tlcyBhIHByaW9yIGNvbmZpcm1hdGlvbiBvZiB0aGUgZ2l2ZW4gb3BlcmF0aW9uCiAgICBmdW5jdGlvbiByZXZva2UoYnl0ZXMzMiBfb3BlcmF0aW9uKSBleHRlcm5hbCB7CiAgICAgICAgdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQobXNnLnNlbmRlcildOwogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG93bmVyCiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOwogICAgICAgIHVpbnQgb3duZXJJbmRleEJpdCA9IDIqKm93bmVySW5kZXg7CiAgICAgICAgdmFyIHBlbmRpbmcgPSBtX3BlbmRpbmdbX29wZXJhdGlvbl07CiAgICAgICAgaWYgKHBlbmRpbmcub3duZXJzRG9uZSAmIG93bmVySW5kZXhCaXQgPiAwKSB7CiAgICAgICAgICAgIHBlbmRpbmcueWV0TmVlZGVkKys7CiAgICAgICAgICAgIHBlbmRpbmcub3duZXJzRG9uZSAtPSBvd25lckluZGV4Qml0OwogICAgICAgICAgICBSZXZva2UobXNnLnNlbmRlciwgX29wZXJhdGlvbik7CiAgICAgICAgfQogICAgfQoKICAgIC8vIFJlcGxhY2VzIGFuIG93bmVyIGBfZnJvbWAgd2l0aCBhbm90aGVyIGBfdG9gLgogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7CiAgICAgICAgaWYgKGlzT3duZXIoX3RvKSkgcmV0dXJuOwogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KF9mcm9tKV07CiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOwoKICAgICAgICBjbGVhclBlbmRpbmcoKTsKICAgICAgICBtX293bmVyc1tvd25lckluZGV4XSA9IHVpbnQoX3RvKTsKICAgICAgICBtX293bmVySW5kZXhbdWludChfZnJvbSldID0gMDsKICAgICAgICBtX293bmVySW5kZXhbdWludChfdG8pXSA9IG93bmVySW5kZXg7CiAgICAgICAgT3duZXJDaGFuZ2VkKF9mcm9tLCBfdG8pOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZE93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgewogICAgICAgIGlmIChpc093bmVyKF9vd25lcikpIHJldHVybjsKCiAgICAgICAgY2xlYXJQZW5kaW5nKCk7CiAgICAgICAgaWYgKG1fbnVtT3duZXJzID49IGNfbWF4T3duZXJzKQogICAgICAgICAgICByZW9yZ2FuaXplT3duZXJzKCk7CiAgICAgICAgaWYgKG1fbnVtT3duZXJzID49IGNfbWF4T3duZXJzKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgbV9udW1Pd25lcnMrKzsKICAgICAgICBtX293bmVyc1ttX251bU93bmVyc10gPSB1aW50KF9vd25lcik7CiAgICAgICAgbV9vd25lckluZGV4W3VpbnQoX293bmVyKV0gPSBtX251bU93bmVyczsKICAgICAgICBPd25lckFkZGVkKF9vd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlT3duZXIoYWRkcmVzcyBfb3duZXIpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7CiAgICAgICAgdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQoX293bmVyKV07CiAgICAgICAgaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOwogICAgICAgIGlmIChtX3JlcXVpcmVkID4gbV9udW1Pd25lcnMgLSAxKSByZXR1cm47CgogICAgICAgIG1fb3duZXJzW293bmVySW5kZXhdID0gMDsKICAgICAgICBtX293bmVySW5kZXhbdWludChfb3duZXIpXSA9IDA7CiAgICAgICAgY2xlYXJQZW5kaW5nKCk7CiAgICAgICAgcmVvcmdhbml6ZU93bmVycygpOyAvL21ha2Ugc3VyZSBtX251bU93bmVyIGlzIGVxdWFsIHRvIHRoZSBudW1iZXIgb2Ygb3duZXJzIGFuZCBhbHdheXMgcG9pbnRzIHRvIHRoZSBvcHRpbWFsIGZyZWUgc2xvdAogICAgICAgIE93bmVyUmVtb3ZlZChfb3duZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVJlcXVpcmVtZW50KHVpbnQgX25ld1JlcXVpcmVkKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgewogICAgICAgIGlmIChfbmV3UmVxdWlyZWQgPiBtX251bU93bmVycykgcmV0dXJuOwogICAgICAgIG1fcmVxdWlyZWQgPSBfbmV3UmVxdWlyZWQ7CiAgICAgICAgY2xlYXJQZW5kaW5nKCk7CiAgICAgICAgUmVxdWlyZW1lbnRDaGFuZ2VkKF9uZXdSZXF1aXJlZCk7CiAgICB9CgogICAgLy8gR2V0cyBhbiBvd25lciBieSAwLWluZGV4ZWQgcG9zaXRpb24gKHVzaW5nIG51bU93bmVycyBhcyB0aGUgY291bnQpCiAgICBmdW5jdGlvbiBnZXRPd25lcih1aW50IG93bmVySW5kZXgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gYWRkcmVzcyhtX293bmVyc1tvd25lckluZGV4ICsgMV0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBfYWRkcikgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBtX293bmVySW5kZXhbdWludChfYWRkcildID4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBoYXNDb25maXJtZWQoYnl0ZXMzMiBfb3BlcmF0aW9uLCBhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHZhciBwZW5kaW5nID0gbV9wZW5kaW5nW19vcGVyYXRpb25dOwogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KF9vd25lcildOwoKICAgICAgICAvLyBtYWtlIHN1cmUgdGhleSdyZSBhbiBvd25lcgogICAgICAgIGlmIChvd25lckluZGV4ID09IDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBiaXQgdG8gc2V0IGZvciB0aGlzIG93bmVyLgogICAgICAgIHVpbnQgb3duZXJJbmRleEJpdCA9IDIqKm93bmVySW5kZXg7CiAgICAgICAgcmV0dXJuICEocGVuZGluZy5vd25lcnNEb25lICYgb3duZXJJbmRleEJpdCA9PSAwKTsKICAgIH0KCiAgICAvLyBJTlRFUk5BTCBNRVRIT0RTCgogICAgZnVuY3Rpb24gY29uZmlybUFuZENoZWNrKGJ5dGVzMzIgX29wZXJhdGlvbikgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIC8vIGRldGVybWluZSB3aGF0IGluZGV4IHRoZSBwcmVzZW50IHNlbmRlciBpczoKICAgICAgICB1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChtc2cuc2VuZGVyKV07CiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXkncmUgYW4gb3duZXIKICAgICAgICBpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm47CgogICAgICAgIHZhciBwZW5kaW5nID0gbV9wZW5kaW5nW19vcGVyYXRpb25dOwogICAgICAgIC8vIGlmIHdlJ3JlIG5vdCB5ZXQgd29ya2luZyBvbiB0aGlzIG9wZXJhdGlvbiwgc3dpdGNoIG92ZXIgYW5kIHJlc2V0IHRoZSBjb25maXJtYXRpb24gc3RhdHVzLgogICAgICAgIGlmIChwZW5kaW5nLnlldE5lZWRlZCA9PSAwKSB7CiAgICAgICAgICAgIC8vIHJlc2V0IGNvdW50IG9mIGNvbmZpcm1hdGlvbnMgbmVlZGVkLgogICAgICAgICAgICBwZW5kaW5nLnlldE5lZWRlZCA9IG1fcmVxdWlyZWQ7CiAgICAgICAgICAgIC8vIHJlc2V0IHdoaWNoIG93bmVycyBoYXZlIGNvbmZpcm1lZCAobm9uZSkgLSBzZXQgb3VyIGJpdG1hcCB0byAwLgogICAgICAgICAgICBwZW5kaW5nLm93bmVyc0RvbmUgPSAwOwogICAgICAgICAgICBwZW5kaW5nLmluZGV4ID0gbV9wZW5kaW5nSW5kZXgubGVuZ3RoKys7CiAgICAgICAgICAgIG1fcGVuZGluZ0luZGV4W3BlbmRpbmcuaW5kZXhdID0gX29wZXJhdGlvbjsKICAgICAgICB9CiAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBiaXQgdG8gc2V0IGZvciB0aGlzIG93bmVyLgogICAgICAgIHVpbnQgb3duZXJJbmRleEJpdCA9IDIqKm93bmVySW5kZXg7CiAgICAgICAgLy8gbWFrZSBzdXJlIHdlICh0aGUgbWVzc2FnZSBzZW5kZXIpIGhhdmVuJ3QgY29uZmlybWVkIHRoaXMgb3BlcmF0aW9uIHByZXZpb3VzbHkuCiAgICAgICAgaWYgKHBlbmRpbmcub3duZXJzRG9uZSAmIG93bmVySW5kZXhCaXQgPT0gMCkgewogICAgICAgICAgICBDb25maXJtYXRpb24obXNnLnNlbmRlciwgX29wZXJhdGlvbik7CiAgICAgICAgICAgIC8vIG9rIC0gY2hlY2sgaWYgY291bnQgaXMgZW5vdWdoIHRvIGdvIGFoZWFkLgogICAgICAgICAgICBpZiAocGVuZGluZy55ZXROZWVkZWQgPD0gMSkgewogICAgICAgICAgICAgICAgLy8gZW5vdWdoIGNvbmZpcm1hdGlvbnM6IHJlc2V0IGFuZCBydW4gaW50ZXJpb3IuCiAgICAgICAgICAgICAgICBkZWxldGUgbV9wZW5kaW5nSW5kZXhbbV9wZW5kaW5nW19vcGVyYXRpb25dLmluZGV4XTsKICAgICAgICAgICAgICAgIGRlbGV0ZSBtX3BlbmRpbmdbX29wZXJhdGlvbl07CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIC8vIG5vdCBlbm91Z2g6IHJlY29yZCB0aGF0IHRoaXMgb3duZXIgaW4gcGFydGljdWxhciBjb25maXJtZWQuCiAgICAgICAgICAgICAgICBwZW5kaW5nLnlldE5lZWRlZC0tOwogICAgICAgICAgICAgICAgcGVuZGluZy5vd25lcnNEb25lIHw9IG93bmVySW5kZXhCaXQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVvcmdhbml6ZU93bmVycygpIHByaXZhdGUgewogICAgICAgIHVpbnQgZnJlZSA9IDE7CiAgICAgICAgd2hpbGUgKGZyZWUgPCBtX251bU93bmVycykKICAgICAgICB7CiAgICAgICAgICAgIHdoaWxlIChmcmVlIDwgbV9udW1Pd25lcnMgJiYgbV9vd25lcnNbZnJlZV0gIT0gMCkgZnJlZSsrOwogICAgICAgICAgICB3aGlsZSAobV9udW1Pd25lcnMgPiAxICYmIG1fb3duZXJzW21fbnVtT3duZXJzXSA9PSAwKSBtX251bU93bmVycy0tOwogICAgICAgICAgICBpZiAoZnJlZSA8IG1fbnVtT3duZXJzICYmIG1fb3duZXJzW21fbnVtT3duZXJzXSAhPSAwICYmIG1fb3duZXJzW2ZyZWVdID09IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1fb3duZXJzW2ZyZWVdID0gbV9vd25lcnNbbV9udW1Pd25lcnNdOwogICAgICAgICAgICAgICAgbV9vd25lckluZGV4W21fb3duZXJzW2ZyZWVdXSA9IGZyZWU7CiAgICAgICAgICAgICAgICBtX293bmVyc1ttX251bU93bmVyc10gPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNsZWFyUGVuZGluZygpIGludGVybmFsIHsKICAgICAgICB1aW50IGxlbmd0aCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aDsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkKICAgICAgICAgICAgaWYgKG1fcGVuZGluZ0luZGV4W2ldICE9IDApCiAgICAgICAgICAgICAgICBkZWxldGUgbV9wZW5kaW5nW21fcGVuZGluZ0luZGV4W2ldXTsKICAgICAgICBkZWxldGUgbV9wZW5kaW5nSW5kZXg7CiAgICB9CgogICAJLy8gRklFTERTCgogICAgLy8gdGhlIG51bWJlciBvZiBvd25lcnMgdGhhdCBtdXN0IGNvbmZpcm0gdGhlIHNhbWUgb3BlcmF0aW9uIGJlZm9yZSBpdCBpcyBydW4uCiAgICB1aW50IHB1YmxpYyBtX3JlcXVpcmVkOwogICAgLy8gcG9pbnRlciB1c2VkIHRvIGZpbmQgYSBmcmVlIHNsb3QgaW4gbV9vd25lcnMKICAgIHVpbnQgcHVibGljIG1fbnVtT3duZXJzOwoKICAgIC8vIGxpc3Qgb2Ygb3duZXJzCiAgICB1aW50WzI1Nl0gbV9vd25lcnM7CiAgICB1aW50IGNvbnN0YW50IGNfbWF4T3duZXJzID0gMjUwOwogICAgLy8gaW5kZXggb24gdGhlIGxpc3Qgb2Ygb3duZXJzIHRvIGFsbG93IHJldmVyc2UgbG9va3VwCiAgICBtYXBwaW5nKHVpbnQgPT4gdWludCkgbV9vd25lckluZGV4OwogICAgLy8gdGhlIG9uZ29pbmcgb3BlcmF0aW9ucy4KICAgIG1hcHBpbmcoYnl0ZXMzMiA9PiBQZW5kaW5nU3RhdGUpIG1fcGVuZGluZzsKICAgIGJ5dGVzMzJbXSBtX3BlbmRpbmdJbmRleDsKfQoKLy8gaW5oZXJpdGFibGUgInByb3BlcnR5IiBjb250cmFjdCB0aGF0IGVuYWJsZXMgbWV0aG9kcyB0byBiZSBwcm90ZWN0ZWQgYnkgcGxhY2luZyBhIGxpbmVhciBsaW1pdCAoc3BlY2lmaWFibGUpCi8vIG9uIGEgcGFydGljdWxhciByZXNvdXJjZSBwZXIgY2FsZW5kYXIgZGF5LiBpcyBtdWx0aW93bmVkIHRvIGFsbG93IHRoZSBsaW1pdCB0byBiZSBhbHRlcmVkLiByZXNvdXJjZSB0aGF0IG1ldGhvZAovLyB1c2VzIGlzIHNwZWNpZmllZCBpbiB0aGUgbW9kaWZpZXIuCmNvbnRyYWN0IGRheWxpbWl0IGlzIG11bHRpb3duZWQgewoKCS8vIE1PRElGSUVSUwoKICAgIC8vIHNpbXBsZSBtb2RpZmllciBmb3IgZGFpbHkgbGltaXQuCiAgICBtb2RpZmllciBsaW1pdGVkRGFpbHkodWludCBfdmFsdWUpIHsKICAgICAgICBpZiAodW5kZXJMaW1pdChfdmFsdWUpKQogICAgICAgICAgICBfOwogICAgfQoKCS8vIE1FVEhPRFMKCiAgICAvLyBjb25zdHJ1Y3RvciAtIHN0b3JlcyBpbml0aWFsIGRhaWx5IGxpbWl0IGFuZCByZWNvcmRzIHRoZSBwcmVzZW50IGRheSdzIGluZGV4LgogICAgZnVuY3Rpb24gZGF5bGltaXQodWludCBfbGltaXQpIHsKICAgICAgICBtX2RhaWx5TGltaXQgPSBfbGltaXQ7CiAgICAgICAgbV9sYXN0RGF5ID0gdG9kYXkoKTsKICAgIH0KICAgIC8vIChyZSlzZXRzIHRoZSBkYWlseSBsaW1pdC4gbmVlZHMgbWFueSBvZiB0aGUgb3duZXJzIHRvIGNvbmZpcm0uIGRvZXNuJ3QgYWx0ZXIgdGhlIGFtb3VudCBhbHJlYWR5IHNwZW50IHRvZGF5LgogICAgZnVuY3Rpb24gc2V0RGFpbHlMaW1pdCh1aW50IF9uZXdMaW1pdCkgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsKICAgICAgICBtX2RhaWx5TGltaXQgPSBfbmV3TGltaXQ7CiAgICB9CiAgICAvLyByZXNldHMgdGhlIGFtb3VudCBhbHJlYWR5IHNwZW50IHRvZGF5LiBuZWVkcyBtYW55IG9mIHRoZSBvd25lcnMgdG8gY29uZmlybS4KICAgIGZ1bmN0aW9uIHJlc2V0U3BlbnRUb2RheSgpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7CiAgICAgICAgbV9zcGVudFRvZGF5ID0gMDsKICAgIH0KCiAgICAvLyBJTlRFUk5BTCBNRVRIT0RTCgogICAgLy8gY2hlY2tzIHRvIHNlZSBpZiB0aGVyZSBpcyBhdCBsZWFzdCBgX3ZhbHVlYCBsZWZ0IGZyb20gdGhlIGRhaWx5IGxpbWl0IHRvZGF5LiBpZiB0aGVyZSBpcywgc3VidHJhY3RzIGl0IGFuZAogICAgLy8gcmV0dXJucyB0cnVlLiBvdGhlcndpc2UganVzdCByZXR1cm5zIGZhbHNlLgogICAgZnVuY3Rpb24gdW5kZXJMaW1pdCh1aW50IF92YWx1ZSkgaW50ZXJuYWwgb25seW93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvLyByZXNldCB0aGUgc3BlbmQgbGltaXQgaWYgd2UncmUgb24gYSBkaWZmZXJlbnQgZGF5IHRvIGxhc3QgdGltZS4KICAgICAgICBpZiAodG9kYXkoKSA+IG1fbGFzdERheSkgewogICAgICAgICAgICBtX3NwZW50VG9kYXkgPSAwOwogICAgICAgICAgICBtX2xhc3REYXkgPSB0b2RheSgpOwogICAgICAgIH0KICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgdGhlcmUncyBlbm91Z2ggbGVmdCAtIGlmIHNvLCBzdWJ0cmFjdCBhbmQgcmV0dXJuIHRydWUuCiAgICAgICAgLy8gb3ZlcmZsb3cgcHJvdGVjdGlvbiAgICAgICAgICAgICAgICAgICAgLy8gZGFpbHlMaW1pdCBjaGVjawogICAgICAgIGlmIChtX3NwZW50VG9kYXkgKyBfdmFsdWUgPj0gbV9zcGVudFRvZGF5ICYmIG1fc3BlbnRUb2RheSArIF92YWx1ZSA8IG1fZGFpbHlMaW1pdCkgewogICAgICAgICAgICBtX3NwZW50VG9kYXkgKz0gX3ZhbHVlOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgLy8gZGV0ZXJtaW5lcyB0b2RheSdzIGluZGV4LgogICAgZnVuY3Rpb24gdG9kYXkoKSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsgcmV0dXJuIG5vdyAvIDEgZGF5czsgfQoKCS8vIEZJRUxEUwoKICAgIHVpbnQgcHVibGljIG1fZGFpbHlMaW1pdDsKICAgIHVpbnQgcHVibGljIG1fc3BlbnRUb2RheTsKICAgIHVpbnQgcHVibGljIG1fbGFzdERheTsKfQoKLy8gaW50ZXJmYWNlIGNvbnRyYWN0IGZvciBtdWx0aXNpZyBwcm94eSBjb250cmFjdHM7IHNlZSBiZWxvdyBmb3IgZG9jcy4KY29udHJhY3QgbXVsdGlzaWcgewoKCS8vIEVWRU5UUwoKICAgIC8vIGxvZ2dlZCBldmVudHM6CiAgICAvLyBGdW5kcyBoYXMgYXJyaXZlZCBpbnRvIHRoZSB3YWxsZXQgKHJlY29yZCBob3cgbXVjaCkuCiAgICBldmVudCBEZXBvc2l0KGFkZHJlc3MgX2Zyb20sIHVpbnQgdmFsdWUpOwogICAgLy8gU2luZ2xlIHRyYW5zYWN0aW9uIGdvaW5nIG91dCBvZiB0aGUgd2FsbGV0IChyZWNvcmQgd2hvIHNpZ25lZCBmb3IgaXQsIGhvdyBtdWNoLCBhbmQgdG8gd2hvbSBpdCdzIGdvaW5nKS4KICAgIGV2ZW50IFNpbmdsZVRyYW5zYWN0KGFkZHJlc3Mgb3duZXIsIHVpbnQgdmFsdWUsIGFkZHJlc3MgdG8sIGJ5dGVzIGRhdGEpOwogICAgLy8gTXVsdGktc2lnIHRyYW5zYWN0aW9uIGdvaW5nIG91dCBvZiB0aGUgd2FsbGV0IChyZWNvcmQgd2hvIHNpZ25lZCBmb3IgaXQgbGFzdCwgdGhlIG9wZXJhdGlvbiBoYXNoLCBob3cgbXVjaCwgYW5kIHRvIHdob20gaXQncyBnb2luZykuCiAgICBldmVudCBNdWx0aVRyYW5zYWN0KGFkZHJlc3Mgb3duZXIsIGJ5dGVzMzIgb3BlcmF0aW9uLCB1aW50IHZhbHVlLCBhZGRyZXNzIHRvLCBieXRlcyBkYXRhKTsKICAgIC8vIENvbmZpcm1hdGlvbiBzdGlsbCBuZWVkZWQgZm9yIGEgdHJhbnNhY3Rpb24uCiAgICBldmVudCBDb25maXJtYXRpb25OZWVkZWQoYnl0ZXMzMiBvcGVyYXRpb24sIGFkZHJlc3MgaW5pdGlhdG9yLCB1aW50IHZhbHVlLCBhZGRyZXNzIHRvLCBieXRlcyBkYXRhKTsKCiAgICAvLyBGVU5DVElPTlMKCiAgICAvLyBUT0RPOiBkb2N1bWVudAogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIGV4dGVybmFsOwogICAgZnVuY3Rpb24gZXhlY3V0ZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBleHRlcm5hbCByZXR1cm5zIChieXRlczMyKTsKICAgIGZ1bmN0aW9uIGNvbmZpcm0oYnl0ZXMzMiBfaCkgcmV0dXJucyAoYm9vbCk7Cn0KCi8vIHVzYWdlOgovLyBieXRlczMyIGggPSBXYWxsZXQodykuZnJvbShvbmVPd25lcikuZXhlY3V0ZSh0bywgdmFsdWUsIGRhdGEpOwovLyBXYWxsZXQodykuZnJvbShhbm90aGVyT3duZXIpLmNvbmZpcm0oaCk7CmNvbnRyYWN0IFdhbGxldCBpcyBtdWx0aXNpZywgbXVsdGlvd25lZCwgZGF5bGltaXQgewoKCS8vIFRZUEVTCgogICAgLy8gVHJhbnNhY3Rpb24gc3RydWN0dXJlIHRvIHJlbWVtYmVyIGRldGFpbHMgb2YgdHJhbnNhY3Rpb24gbGVzdCBpdCBuZWVkIGJlIHNhdmVkIGZvciBhIGxhdGVyIGNhbGwuCiAgICBzdHJ1Y3QgVHJhbnNhY3Rpb24gewogICAgICAgIGFkZHJlc3MgdG87CiAgICAgICAgdWludCB2YWx1ZTsKICAgICAgICBieXRlcyBkYXRhOwogICAgfQoKICAgIC8vIE1FVEhPRFMKCiAgICAvLyBjb25zdHJ1Y3RvciAtIGp1c3QgcGFzcyBvbiB0aGUgb3duZXIgYXJyYXkgdG8gdGhlIG11bHRpb3duZWQgYW5kCiAgICAvLyB0aGUgbGltaXQgdG8gZGF5bGltaXQKICAgIGZ1bmN0aW9uIFdhbGxldChhZGRyZXNzW10gX293bmVycywgdWludCBfcmVxdWlyZWQsIHVpbnQgX2RheWxpbWl0KQogICAgICAgICAgICBtdWx0aW93bmVkKF9vd25lcnMsIF9yZXF1aXJlZCkgZGF5bGltaXQoX2RheWxpbWl0KSB7CiAgICB9CgogICAgLy8ga2lsbHMgdGhlIGNvbnRyYWN0IHNlbmRpbmcgZXZlcnl0aGluZyB0byBgX3RvYC4KICAgIGZ1bmN0aW9uIGtpbGwoYWRkcmVzcyBfdG8pIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7CiAgICAgICAgc3VpY2lkZShfdG8pOwogICAgfQoKICAgIC8vIGdldHMgY2FsbGVkIHdoZW4gbm8gb3RoZXIgZnVuY3Rpb24gbWF0Y2hlcwogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICAvLyBqdXN0IGJlaW5nIHNlbnQgc29tZSBjYXNoPwogICAgICAgIGlmIChtc2cudmFsdWUgPiAwKQogICAgICAgICAgICBEZXBvc2l0KG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9CgogICAgLy8gT3V0c2lkZS12aXNpYmxlIHRyYW5zYWN0IGVudHJ5IHBvaW50LiBFeGVjdXRlcyB0cmFuc2FjdGlvbiBpbW1lZGlhdGVseSBpZiBiZWxvdyBkYWlseSBzcGVuZCBsaW1pdC4KICAgIC8vIElmIG5vdCwgZ29lcyBpbnRvIG11bHRpc2lnIHByb2Nlc3MuIFdlIHByb3ZpZGUgYSBoYXNoIG9uIHJldHVybiB0byBhbGxvdyB0aGUgc2VuZGVyIHRvIHByb3ZpZGUKICAgIC8vIHNob3J0Y3V0cyBmb3IgdGhlIG90aGVyIGNvbmZpcm1hdGlvbnMgKGFsbG93aW5nIHRoZW0gdG8gYXZvaWQgcmVwbGljYXRpbmcgdGhlIF90bywgX3ZhbHVlCiAgICAvLyBhbmQgX2RhdGEgYXJndW1lbnRzKS4gVGhleSBzdGlsbCBnZXQgdGhlIG9wdGlvbiBvZiB1c2luZyB0aGVtIGlmIHRoZXkgd2FudCwgYW55d2F5cy4KICAgIGZ1bmN0aW9uIGV4ZWN1dGUoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgZXh0ZXJuYWwgb25seW93bmVyIHJldHVybnMgKGJ5dGVzMzIgX3IpIHsKICAgICAgICAvLyBmaXJzdCwgdGFrZSB0aGUgb3Bwb3J0dW5pdHkgdG8gY2hlY2sgdGhhdCB3ZSdyZSB1bmRlciB0aGUgZGFpbHkgbGltaXQuCiAgICAgICAgaWYgKHVuZGVyTGltaXQoX3ZhbHVlKSkgewogICAgICAgICAgICBTaW5nbGVUcmFuc2FjdChtc2cuc2VuZGVyLCBfdmFsdWUsIF90bywgX2RhdGEpOwogICAgICAgICAgICAvLyB5ZXMgLSBqdXN0IGV4ZWN1dGUgdGhlIGNhbGwuCiAgICAgICAgICAgIF90by5jYWxsLnZhbHVlKF92YWx1ZSkoX2RhdGEpOwogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgLy8gZGV0ZXJtaW5lIG91ciBvcGVyYXRpb24gaGFzaC4KICAgICAgICBfciA9IHNoYTMobXNnLmRhdGEsIGJsb2NrLm51bWJlcik7CiAgICAgICAgaWYgKCFjb25maXJtKF9yKSAmJiBtX3R4c1tfcl0udG8gPT0gMCkgewogICAgICAgICAgICBtX3R4c1tfcl0udG8gPSBfdG87CiAgICAgICAgICAgIG1fdHhzW19yXS52YWx1ZSA9IF92YWx1ZTsKICAgICAgICAgICAgbV90eHNbX3JdLmRhdGEgPSBfZGF0YTsKICAgICAgICAgICAgQ29uZmlybWF0aW9uTmVlZGVkKF9yLCBtc2cuc2VuZGVyLCBfdmFsdWUsIF90bywgX2RhdGEpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBjb25maXJtIGEgdHJhbnNhY3Rpb24gdGhyb3VnaCBqdXN0IHRoZSBoYXNoLiB3ZSB1c2UgdGhlIHByZXZpb3VzIHRyYW5zYWN0aW9ucyBtYXAsIG1fdHhzLCBpbiBvcmRlcgogICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBib2R5IG9mIHRoZSB0cmFuc2FjdGlvbiBmcm9tIHRoZSBoYXNoIHByb3ZpZGVkLgogICAgZnVuY3Rpb24gY29uZmlybShieXRlczMyIF9oKSBvbmx5bWFueW93bmVycyhfaCkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChtX3R4c1tfaF0udG8gIT0gMCkgewogICAgICAgICAgICBtX3R4c1tfaF0udG8uY2FsbC52YWx1ZShtX3R4c1tfaF0udmFsdWUpKG1fdHhzW19oXS5kYXRhKTsKICAgICAgICAgICAgTXVsdGlUcmFuc2FjdChtc2cuc2VuZGVyLCBfaCwgbV90eHNbX2hdLnZhbHVlLCBtX3R4c1tfaF0udG8sIG1fdHhzW19oXS5kYXRhKTsKICAgICAgICAgICAgZGVsZXRlIG1fdHhzW19oXTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIC8vIElOVEVSTkFMIE1FVEhPRFMKCiAgICBmdW5jdGlvbiBjbGVhclBlbmRpbmcoKSBpbnRlcm5hbCB7CiAgICAgICAgdWludCBsZW5ndGggPSBtX3BlbmRpbmdJbmRleC5sZW5ndGg7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpCiAgICAgICAgICAgIGRlbGV0ZSBtX3R4c1ttX3BlbmRpbmdJbmRleFtpXV07CiAgICAgICAgc3VwZXIuY2xlYXJQZW5kaW5nKCk7CiAgICB9CgoJLy8gRklFTERTCgogICAgLy8gcGVuZGluZyB0cmFuc2FjdGlvbnMgd2UgaGF2ZSBhdCBwcmVzZW50LgogICAgbWFwcGluZyAoYnl0ZXMzMiA9PiBUcmFuc2FjdGlvbikgbV90eHM7Cn0='.
	

]
