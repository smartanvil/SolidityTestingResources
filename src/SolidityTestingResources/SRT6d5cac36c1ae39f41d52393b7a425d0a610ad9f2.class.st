Class {
	#name : #SRT6d5cac36c1ae39f41d52393b7a425d0a610ad9f2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6d5cac36c1ae39f41d52393b7a425d0a610ad9f2 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IFJlZW50cmFuY3lHdWFyZCB7CgogIC8qKgogICAqIEBkZXYgV2UgdXNlIGEgc2luZ2xlIGxvY2sgZm9yIHRoZSB3aG9sZSBjb250cmFjdC4KICAgKi8KICBib29sIHByaXZhdGUgcmVudHJhbmN5X2xvY2sgPSBmYWxzZTsKCiAgLyoqCiAgICogQGRldiBQcmV2ZW50cyBhIGNvbnRyYWN0IGZyb20gY2FsbGluZyBpdHNlbGYsIGRpcmVjdGx5IG9yIGluZGlyZWN0bHkuCiAgICogQG5vdGljZSBJZiB5b3UgbWFyayBhIGZ1bmN0aW9uIGBub25SZWVudHJhbnRgLCB5b3Ugc2hvdWxkIGFsc28KICAgKiBtYXJrIGl0IGBleHRlcm5hbGAuIENhbGxpbmcgb25lIG5vblJlZW50cmFudCBmdW5jdGlvbiBmcm9tCiAgICogYW5vdGhlciBpcyBub3Qgc3VwcG9ydGVkLiBJbnN0ZWFkLCB5b3UgY2FuIGltcGxlbWVudCBhCiAgICogYHByaXZhdGVgIGZ1bmN0aW9uIGRvaW5nIHRoZSBhY3R1YWwgd29yaywgYW5kIGEgYGV4dGVybmFsYAogICAqIHdyYXBwZXIgbWFya2VkIGFzIGBub25SZWVudHJhbnRgLgogICAqLwogIG1vZGlmaWVyIG5vblJlZW50cmFudCgpIHsKICAgIHJlcXVpcmUoIXJlbnRyYW5jeV9sb2NrKTsKICAgIHJlbnRyYW5jeV9sb2NrID0gdHJ1ZTsKICAgIF87CiAgICByZW50cmFuY3lfbG9jayA9IGZhbHNlOwogIH0KCn0KCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCmNvbnRyYWN0IENsYWltYWJsZSBpcyBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBwZW5kaW5nT3duZXI7CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBwZW5kaW5nT3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seVBlbmRpbmdPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBwZW5kaW5nT3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHNldCB0aGUgcGVuZGluZ093bmVyIGFkZHJlc3MuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgcGVuZGluZ093bmVyID0gbmV3T3duZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgcGVuZGluZ093bmVyIGFkZHJlc3MgdG8gZmluYWxpemUgdGhlIHRyYW5zZmVyLgogICAqLwogIGZ1bmN0aW9uIGNsYWltT3duZXJzaGlwKCkgb25seVBlbmRpbmdPd25lciB7CiAgICBvd25lciA9IHBlbmRpbmdPd25lcjsKICAgIHBlbmRpbmdPd25lciA9IDB4MDsKICB9Cn0KCmNvbnRyYWN0IE9wZXJhdGlvbmFsIGlzIENsYWltYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvcGVyYXRvcjsKCiAgICBmdW5jdGlvbiBPcGVyYXRpb25hbChhZGRyZXNzIF9vcGVyYXRvcikgewogICAgICBvcGVyYXRvciA9IF9vcGVyYXRvcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3BlcmF0b3IoKSB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvcGVyYXRvcik7CiAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPcGVyYXRvcihhZGRyZXNzIG5ld09wZXJhdG9yKSBvbmx5T3duZXIgewogICAgICByZXF1aXJlKG5ld09wZXJhdG9yICE9IGFkZHJlc3MoMCkpOwogICAgICBvcGVyYXRvciA9IG5ld09wZXJhdG9yOwogICAgfQoKfQoKbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9Cgp9Cgpjb250cmFjdCBMb2NrYWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIFJlZW50cmFuY3lHdWFyZCB7CgogICAgc3RydWN0IExvY2tlZEJhbGFuY2UgewogICAgICAgIGFkZHJlc3Mgb3duZXI7CiAgICAgICAgdWludDI1NiB2YWx1ZTsKICAgICAgICB1aW50MjU2IHJlbGVhc2VUaW1lOwogICAgfQoKICAgIG1hcHBpbmcgKHVpbnQgPT4gTG9ja2VkQmFsYW5jZSkgcHVibGljIGxvY2tlZEJhbGFuY2VzOwogICAgdWludCBwdWJsaWMgbG9ja2VkQmFsYW5jZUNvdW50OwoKICAgIGV2ZW50IFRyYW5zZmVyTG9ja2VkVG9rZW4oYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgdWludDI1NiByZWxlYXNlVGltZSk7CiAgICBldmVudCBSZWxlYXNlTG9ja2VkQmFsYW5jZShhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgcmVsZWFzZVRpbWUpOwoKICAgIC8vICYjMjMxOyYjMTg3O8KZIF90byAmIzIzMjsmIzE4OTsmIzE3MjsmIzIzMTsmIzE2NzsmIzE4NzsgX3ZhbHVlICYjMjI4OyYjMTg0OyYjMTcwOyYjMjMzO8KUwoEmIzIyOTsmIzE3NDvCmiYjMjI5O8KIJiMxNzY7IF9yZWxlYXNlVGltZSAmIzIzMTvCmsKEIHRva2VuCiAgICBmdW5jdGlvbiB0cmFuc2ZlckxvY2tlZFRva2VuKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgdWludDI1NiBfcmVsZWFzZVRpbWUpIG5vblJlZW50cmFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfcmVsZWFzZVRpbWUgPiBub3cpOwogICAgICAgIHJlcXVpcmUoX3JlbGVhc2VUaW1lLnN1YigxIHllYXJzKSA8IG5vdyk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBsb2NrZWRCYWxhbmNlc1tsb2NrZWRCYWxhbmNlQ291bnRdID0gTG9ja2VkQmFsYW5jZSh7b3duZXI6IF90bywgdmFsdWU6IF92YWx1ZSwgcmVsZWFzZVRpbWU6IF9yZWxlYXNlVGltZX0pOwogICAgICAgIGxvY2tlZEJhbGFuY2VDb3VudCsrOwogICAgICAgIFRyYW5zZmVyTG9ja2VkVG9rZW4obXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIF9yZWxlYXNlVGltZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gJiMyMzA7wp8mIzE2NTsgYWRkcmVzcyAmIzIzMTvCmsKEJiMyMzM7wpTCgSYjMjI5OyYjMTc0O8KaJiMyMjg7JiMxODk7wpkmIzIzMzsmIzE2MjvCnQogICAgZnVuY3Rpb24gbG9ja2VkQmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHZhbHVlKSB7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbG9ja2VkQmFsYW5jZUNvdW50OyBpKyspIHsKICAgICAgICAgICAgTG9ja2VkQmFsYW5jZSBsb2NrZWRCYWxhbmNlID0gbG9ja2VkQmFsYW5jZXNbaV07CiAgICAgICAgICAgIGlmIChfb3duZXIgPT0gbG9ja2VkQmFsYW5jZS5vd25lcikgewogICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5hZGQobG9ja2VkQmFsYW5jZS52YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQoKICAgIC8vICYjMjMyOyYjMTY3OyYjMTYzOyYjMjMzO8KUwoEmIzIzMDvCicKAJiMyMzA7wpzCiSYjMjI5OyYjMTgzOyYjMTc4OyYjMjI5O8KIJiMxNzY7JiMyMzM7wpTCgSYjMjI5OyYjMTc0O8KaJiMyMzA7wpcmIzE4MjsmIzIzMzvClyYjMTgwOyYjMjMxO8KawoQgdG9rZW4KICAgIGZ1bmN0aW9uIHJlbGVhc2VMb2NrZWRCYWxhbmNlICgpIHJldHVybnMgKHVpbnQyNTYgcmVsZWFzZUFtb3VudCkgewogICAgICAgIHVpbnQgaW5kZXggPSAwOwogICAgICAgIHdoaWxlIChpbmRleCA8IGxvY2tlZEJhbGFuY2VDb3VudCkgewogICAgICAgICAgICBpZiAobm93ID49IGxvY2tlZEJhbGFuY2VzW2luZGV4XS5yZWxlYXNlVGltZSkgewogICAgICAgICAgICAgICAgcmVsZWFzZUFtb3VudCArPSBsb2NrZWRCYWxhbmNlc1tpbmRleF0udmFsdWU7CiAgICAgICAgICAgICAgICB1bmxvY2tCYWxhbmNlQnlJbmRleChpbmRleCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpbmRleCsrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiByZWxlYXNlQW1vdW50OwogICAgfQoKICAgIGZ1bmN0aW9uIHVubG9ja0JhbGFuY2VCeUluZGV4ICh1aW50IGluZGV4KSBpbnRlcm5hbCB7CiAgICAgICAgTG9ja2VkQmFsYW5jZSBsb2NrZWRCYWxhbmNlID0gbG9ja2VkQmFsYW5jZXNbaW5kZXhdOwogICAgICAgIGJhbGFuY2VzW2xvY2tlZEJhbGFuY2Uub3duZXJdID0gYmFsYW5jZXNbbG9ja2VkQmFsYW5jZS5vd25lcl0uYWRkKGxvY2tlZEJhbGFuY2UudmFsdWUpOwogICAgICAgIFJlbGVhc2VMb2NrZWRCYWxhbmNlKGxvY2tlZEJhbGFuY2Uub3duZXIsIGxvY2tlZEJhbGFuY2UudmFsdWUsIGxvY2tlZEJhbGFuY2UucmVsZWFzZVRpbWUpOwogICAgICAgIGxvY2tlZEJhbGFuY2VzW2luZGV4XSA9IGxvY2tlZEJhbGFuY2VzW2xvY2tlZEJhbGFuY2VDb3VudCAtIDFdOwogICAgICAgIGRlbGV0ZSBsb2NrZWRCYWxhbmNlc1tsb2NrZWRCYWxhbmNlQ291bnQgLSAxXTsKICAgICAgICBsb2NrZWRCYWxhbmNlQ291bnQtLTsKICAgIH0KCn0KCmxpYnJhcnkgRGF0ZVRpbWUgewogICAgICAgIC8qCiAgICAgICAgICogIERhdGUgYW5kIFRpbWUgdXRpbGl0aWVzIGZvciBldGhlcmV1bSBjb250cmFjdHMKICAgICAgICAgKgogICAgICAgICAqLwogICAgICAgIHN0cnVjdCBEYXRlVGltZSB7CiAgICAgICAgICAgICAgICB1aW50MTYgeWVhcjsKICAgICAgICAgICAgICAgIHVpbnQ4IG1vbnRoOwogICAgICAgICAgICAgICAgdWludDggZGF5OwogICAgICAgICAgICAgICAgdWludDggaG91cjsKICAgICAgICAgICAgICAgIHVpbnQ4IG1pbnV0ZTsKICAgICAgICAgICAgICAgIHVpbnQ4IHNlY29uZDsKICAgICAgICAgICAgICAgIHVpbnQ4IHdlZWtkYXk7CiAgICAgICAgfQoKICAgICAgICB1aW50IGNvbnN0YW50IERBWV9JTl9TRUNPTkRTID0gODY0MDA7CiAgICAgICAgdWludCBjb25zdGFudCBZRUFSX0lOX1NFQ09ORFMgPSAzMTUzNjAwMDsKICAgICAgICB1aW50IGNvbnN0YW50IExFQVBfWUVBUl9JTl9TRUNPTkRTID0gMzE2MjI0MDA7CgogICAgICAgIHVpbnQgY29uc3RhbnQgSE9VUl9JTl9TRUNPTkRTID0gMzYwMDsKICAgICAgICB1aW50IGNvbnN0YW50IE1JTlVURV9JTl9TRUNPTkRTID0gNjA7CgogICAgICAgIHVpbnQxNiBjb25zdGFudCBPUklHSU5fWUVBUiA9IDE5NzA7CgogICAgICAgIGZ1bmN0aW9uIGlzTGVhcFllYXIodWludDE2IHllYXIpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICAgICAgICAgIGlmICh5ZWFyICUgNCAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh5ZWFyICUgMTAwICE9IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoeWVhciAlIDQwMCAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbGVhcFllYXJzQmVmb3JlKHVpbnQgeWVhcikgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgICAgICAgICAgeWVhciAtPSAxOwogICAgICAgICAgICAgICAgcmV0dXJuIHllYXIgLyA0IC0geWVhciAvIDEwMCArIHllYXIgLyA0MDA7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXREYXlzSW5Nb250aCh1aW50OCBtb250aCwgdWludDE2IHllYXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgICAgICAgICBpZiAobW9udGggPT0gMSB8fCBtb250aCA9PSAzIHx8IG1vbnRoID09IDUgfHwgbW9udGggPT0gNyB8fCBtb250aCA9PSA4IHx8IG1vbnRoID09IDEwIHx8IG1vbnRoID09IDEyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAzMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vbnRoID09IDQgfHwgbW9udGggPT0gNiB8fCBtb250aCA9PSA5IHx8IG1vbnRoID09IDExKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAzMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzTGVhcFllYXIoeWVhcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI5OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAyODsKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHBhcnNlVGltZXN0YW1wKHVpbnQgdGltZXN0YW1wKSBpbnRlcm5hbCByZXR1cm5zIChEYXRlVGltZSBkdCkgewogICAgICAgICAgICAgICAgdWludCBzZWNvbmRzQWNjb3VudGVkRm9yID0gMDsKICAgICAgICAgICAgICAgIHVpbnQgYnVmOwogICAgICAgICAgICAgICAgdWludDggaTsKCiAgICAgICAgICAgICAgICAvLyBZZWFyCiAgICAgICAgICAgICAgICBkdC55ZWFyID0gZ2V0WWVhcih0aW1lc3RhbXApOwogICAgICAgICAgICAgICAgYnVmID0gbGVhcFllYXJzQmVmb3JlKGR0LnllYXIpIC0gbGVhcFllYXJzQmVmb3JlKE9SSUdJTl9ZRUFSKTsKCiAgICAgICAgICAgICAgICBzZWNvbmRzQWNjb3VudGVkRm9yICs9IExFQVBfWUVBUl9JTl9TRUNPTkRTICogYnVmOwogICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciArPSBZRUFSX0lOX1NFQ09ORFMgKiAoZHQueWVhciAtIE9SSUdJTl9ZRUFSIC0gYnVmKTsKCiAgICAgICAgICAgICAgICAvLyBNb250aAogICAgICAgICAgICAgICAgdWludCBzZWNvbmRzSW5Nb250aDsKICAgICAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPD0gMTI7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzSW5Nb250aCA9IERBWV9JTl9TRUNPTkRTICogZ2V0RGF5c0luTW9udGgoaSwgZHQueWVhcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWNvbmRzSW5Nb250aCArIHNlY29uZHNBY2NvdW50ZWRGb3IgPiB0aW1lc3RhbXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdC5tb250aCA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciArPSBzZWNvbmRzSW5Nb250aDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBEYXkKICAgICAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPD0gZ2V0RGF5c0luTW9udGgoZHQubW9udGgsIGR0LnllYXIpOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERBWV9JTl9TRUNPTkRTICsgc2Vjb25kc0FjY291bnRlZEZvciA+IHRpbWVzdGFtcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR0LmRheSA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciArPSBEQVlfSU5fU0VDT05EUzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBIb3VyCiAgICAgICAgICAgICAgICBkdC5ob3VyID0gMDsvL2dldEhvdXIodGltZXN0YW1wKTsKCiAgICAgICAgICAgICAgICAvLyBNaW51dGUKICAgICAgICAgICAgICAgIGR0Lm1pbnV0ZSA9IDA7Ly9nZXRNaW51dGUodGltZXN0YW1wKTsKCiAgICAgICAgICAgICAgICAvLyBTZWNvbmQKICAgICAgICAgICAgICAgIGR0LnNlY29uZCA9IDA7Ly9nZXRTZWNvbmQodGltZXN0YW1wKTsKCiAgICAgICAgICAgICAgICAvLyBEYXkgb2Ygd2Vlay4KICAgICAgICAgICAgICAgIGR0LndlZWtkYXkgPSAwOy8vZ2V0V2Vla2RheSh0aW1lc3RhbXApOwoKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldFllYXIodWludCB0aW1lc3RhbXApIGNvbnN0YW50IHJldHVybnMgKHVpbnQxNikgewogICAgICAgICAgICAgICAgdWludCBzZWNvbmRzQWNjb3VudGVkRm9yID0gMDsKICAgICAgICAgICAgICAgIHVpbnQxNiB5ZWFyOwogICAgICAgICAgICAgICAgdWludCBudW1MZWFwWWVhcnM7CgogICAgICAgICAgICAgICAgLy8gWWVhcgogICAgICAgICAgICAgICAgeWVhciA9IHVpbnQxNihPUklHSU5fWUVBUiArIHRpbWVzdGFtcCAvIFlFQVJfSU5fU0VDT05EUyk7CiAgICAgICAgICAgICAgICBudW1MZWFwWWVhcnMgPSBsZWFwWWVhcnNCZWZvcmUoeWVhcikgLSBsZWFwWWVhcnNCZWZvcmUoT1JJR0lOX1lFQVIpOwoKICAgICAgICAgICAgICAgIHNlY29uZHNBY2NvdW50ZWRGb3IgKz0gTEVBUF9ZRUFSX0lOX1NFQ09ORFMgKiBudW1MZWFwWWVhcnM7CiAgICAgICAgICAgICAgICBzZWNvbmRzQWNjb3VudGVkRm9yICs9IFlFQVJfSU5fU0VDT05EUyAqICh5ZWFyIC0gT1JJR0lOX1lFQVIgLSBudW1MZWFwWWVhcnMpOwoKICAgICAgICAgICAgICAgIHdoaWxlIChzZWNvbmRzQWNjb3VudGVkRm9yID4gdGltZXN0YW1wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0xlYXBZZWFyKHVpbnQxNih5ZWFyIC0gMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kc0FjY291bnRlZEZvciAtPSBMRUFQX1lFQVJfSU5fU0VDT05EUzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzQWNjb3VudGVkRm9yIC09IFlFQVJfSU5fU0VDT05EUzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB5ZWFyIC09IDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4geWVhcjsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldE1vbnRoKHVpbnQgdGltZXN0YW1wKSBjb25zdGFudCByZXR1cm5zICh1aW50OCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlVGltZXN0YW1wKHRpbWVzdGFtcCkubW9udGg7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXREYXkodWludCB0aW1lc3RhbXApIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VUaW1lc3RhbXAodGltZXN0YW1wKS5kYXk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRIb3VyKHVpbnQgdGltZXN0YW1wKSBjb25zdGFudCByZXR1cm5zICh1aW50OCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHVpbnQ4KCh0aW1lc3RhbXAgLyA2MCAvIDYwKSAlIDI0KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldE1pbnV0ZSh1aW50IHRpbWVzdGFtcCkgY29uc3RhbnQgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB1aW50OCgodGltZXN0YW1wIC8gNjApICUgNjApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0U2Vjb25kKHVpbnQgdGltZXN0YW1wKSBjb25zdGFudCByZXR1cm5zICh1aW50OCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHVpbnQ4KHRpbWVzdGFtcCAlIDYwKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHRvVGltZXN0YW1wKHVpbnQxNiB5ZWFyLCB1aW50OCBtb250aCwgdWludDggZGF5KSBjb25zdGFudCByZXR1cm5zICh1aW50IHRpbWVzdGFtcCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRvVGltZXN0YW1wKHllYXIsIG1vbnRoLCBkYXksIDAsIDAsIDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdG9UaW1lc3RhbXAodWludDE2IHllYXIsIHVpbnQ4IG1vbnRoLCB1aW50OCBkYXksIHVpbnQ4IGhvdXIsIHVpbnQ4IG1pbnV0ZSwgdWludDggc2Vjb25kKSBjb25zdGFudCByZXR1cm5zICh1aW50IHRpbWVzdGFtcCkgewogICAgICAgICAgICAgICAgdWludDE2IGk7CgogICAgICAgICAgICAgICAgLy8gWWVhcgogICAgICAgICAgICAgICAgZm9yIChpID0gT1JJR0lOX1lFQVI7IGkgPCB5ZWFyOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGVhcFllYXIoaSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXAgKz0gTEVBUF9ZRUFSX0lOX1NFQ09ORFM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wICs9IFlFQVJfSU5fU0VDT05EUzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIE1vbnRoCiAgICAgICAgICAgICAgICB1aW50OFsxMl0gbWVtb3J5IG1vbnRoRGF5Q291bnRzOwogICAgICAgICAgICAgICAgbW9udGhEYXlDb3VudHNbMF0gPSAzMTsKICAgICAgICAgICAgICAgIGlmIChpc0xlYXBZZWFyKHllYXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoRGF5Q291bnRzWzFdID0gMjk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhEYXlDb3VudHNbMV0gPSAyODsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG1vbnRoRGF5Q291bnRzWzJdID0gMzE7CiAgICAgICAgICAgICAgICBtb250aERheUNvdW50c1szXSA9IDMwOwogICAgICAgICAgICAgICAgbW9udGhEYXlDb3VudHNbNF0gPSAzMTsKICAgICAgICAgICAgICAgIG1vbnRoRGF5Q291bnRzWzVdID0gMzA7CiAgICAgICAgICAgICAgICBtb250aERheUNvdW50c1s2XSA9IDMxOwogICAgICAgICAgICAgICAgbW9udGhEYXlDb3VudHNbN10gPSAzMTsKICAgICAgICAgICAgICAgIG1vbnRoRGF5Q291bnRzWzhdID0gMzA7CiAgICAgICAgICAgICAgICBtb250aERheUNvdW50c1s5XSA9IDMxOwogICAgICAgICAgICAgICAgbW9udGhEYXlDb3VudHNbMTBdID0gMzA7CiAgICAgICAgICAgICAgICBtb250aERheUNvdW50c1sxMV0gPSAzMTsKCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAxOyBpIDwgbW9udGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXAgKz0gREFZX0lOX1NFQ09ORFMgKiBtb250aERheUNvdW50c1tpIC0gMV07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gRGF5CiAgICAgICAgICAgICAgICB0aW1lc3RhbXAgKz0gREFZX0lOX1NFQ09ORFMgKiAoZGF5IC0gMSk7CgogICAgICAgICAgICAgICAgLy8gSG91cgogICAgICAgICAgICAgICAgdGltZXN0YW1wICs9IEhPVVJfSU5fU0VDT05EUyAqIChob3VyKTsKCiAgICAgICAgICAgICAgICAvLyBNaW51dGUKICAgICAgICAgICAgICAgIHRpbWVzdGFtcCArPSBNSU5VVEVfSU5fU0VDT05EUyAqIChtaW51dGUpOwoKICAgICAgICAgICAgICAgIC8vIFNlY29uZAogICAgICAgICAgICAgICAgdGltZXN0YW1wICs9IHNlY29uZDsKCiAgICAgICAgICAgICAgICByZXR1cm4gdGltZXN0YW1wOwogICAgICAgIH0KfQoKY29udHJhY3QgUmVsZWFzZWFibGVUb2tlbiBpcyBPcGVyYXRpb25hbCwgTG9ja2FibGVUb2tlbiB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKICAgIHVzaW5nIERhdGVUaW1lIGZvciB1aW50MjU2OwogICAgYm9vbCBzZWNvbmRZZWFyVXBkYXRlID0gZmFsc2U7IC8vIExpbWl0ICYjMjMwO8KbJiMxODA7JiMyMzA7wpYmIzE3NjsmIzIyOTvCiCYjMTc2OyYjMjMxOyYjMTcyOyYjMTcyOyYjMjI4OyYjMTg2O8KMJiMyMjk7JiMxODU7JiMxODA7CiAgICB1aW50MjU2IHB1YmxpYyByZWxlYXNlZFN1cHBseTsgLy8gJiMyMjk7JiMxODM7JiMxNzg7JiMyMzM7wofCiiYjMjMwO8KUJiMxOTA7JiMyMzE7wprChCYjMjMwO8KVJiMxNzY7JiMyMzM7wofCjwogICAgdWludDI1NiBwdWJsaWMgY3JlYXRlVGltZTsgLy8gJiMyMjk7wpDCiCYjMjMxOyYjMTg2OyYjMTY2OyYjMjI5O8KIwpsmIzIyOTsmIzE4NzsmIzE4NjsmIzIzMDvClyYjMTgyOyYjMjMzO8KXJiMxODA7CiAgICB1aW50MjU2IHN0YW5kYXJkRGVjaW1hbHMgPSAxMDAwMDAwMDA7IC8vICYjMjMxO8KUJiMxNzc7JiMyMjg7JiMxODY7wo4mIzIzMDvCnMKJOCYjMjI4OyYjMTg5O8KNJiMyMjk7JiMxNzY7wo8mIzIzMDvClSYjMTc2OyYjMjM5OyYjMTg4O8KMJiMyMjg7JiMxODg7JiMxNjA7JiMyMzI7JiMxOTE7wpsmIzIzMDvCnSYjMTY1OyYjMjMxO8KawoQmIzIyOTvCj8KCJiMyMzA7wpUmIzE3NjsmIzIzMzvCgyYjMTg5OyYjMjMwO8KYJiMxNzU7JiMyMjg7JiMxODQ7wo0mIzIyOTsmIzE4NDsmIzE2NjsmIzIyOTvCkMKOJiMyMzM7wp0mIzE2MjsmIzIzMTvCmsKEJiMyMjk7JiMxNzY7wo8mIzIzMDvClSYjMTc2OyYjMjM5OyYjMTg4O8KMJiMyMzI7JiMxNjY7woEmIzIzMDvCnMKJJiMyMjg7JiMxODU7wpgxMDAwMDAwMDAmIzIzMTvCmsKEJiMyMzA7wpPCjSYjMjI4OyYjMTg5O8KcJiMyMzA7wonCjSYjMjMyO8KDJiMxODk7JiMyMjg7JiMxOTE7wp0mIzIzMjsmIzE3NTvCgSYjMjMwO8KVJiMxNzY7JiMyMzM7wofCjyYjMjMxOyYjMTg2OyYjMTY3OyYjMjI4OyYjMTg0O8KAJiMyMzI7wocmIzE4MDsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5ID0gc3RhbmRhcmREZWNpbWFscy5tdWwoMTAwMDAwMDAwMCk7IC8vICYjMjMwO8KAJiMxODc7JiMyMzM7wofCjzEwJiMyMjg7JiMxODY7JiMxOTE7CiAgICB1aW50MjU2IHB1YmxpYyBsaW1pdFN1cHBseVBlclllYXIgPSBzdGFuZGFyZERlY2ltYWxzLm11bCg2MDAwMDAwMCk7IC8vICYjMjMwOyYjMTc1O8KPJiMyMjk7JiMxODU7JiMxODA7JiMyMzM7wofCiiYjMjMwO8KUJiMxOTA7JiMyMzE7wprChExMVCYjMjMxO8KawoQmIzIzMzvCmcKQJiMyMzM7JiMxNjI7wp0mIzIzOTsmIzE4ODvCjCYjMjMxOyYjMTcyOyYjMTcyOyYjMjI4OyYjMTg0O8KAJiMyMjk7JiMxODU7JiMxODA7NjAwMCYjMjI4OyYjMTg0O8KHCiAgICB1aW50MjU2IHB1YmxpYyBkYWlseUxpbWl0ID0gc3RhbmRhcmREZWNpbWFscy5tdWwoMTAwMDAwMCk7IC8vICYjMjMwOyYjMTc1O8KPJiMyMjk7JiMxNjQ7JiMxNjk7JiMyMzM7wofCiiYjMjMwO8KUJiMxOTA7JiMyMzE7wprChCYjMjMzO8KZwpAmIzIzMzsmIzE2MjvCnQoKICAgIGV2ZW50IFJlbGVhc2VTdXBwbHkoYWRkcmVzcyByZWNlaXZlciwgdWludDI1NiB2YWx1ZSwgdWludDI1NiByZWxlYXNlVGltZSk7CiAgICBldmVudCBVbmZyZWV6ZUFtb3VudChhZGRyZXNzIHJlY2VpdmVyLCB1aW50MjU2IGFtb3VudCwgdWludDI1NiB1bmZyZWV6ZVRpbWUpOwoKICAgIHN0cnVjdCBGcm96ZW5SZWNvcmQgewogICAgICAgIHVpbnQyNTYgYW1vdW50OyAvLyAmIzIyOTvChiYjMTg3OyYjMjMxOyYjMTg3O8KTJiMyMzE7wprChCYjMjMwO8KVJiMxNzY7JiMyMzM7wofCjwogICAgICAgIHVpbnQyNTYgdW5mcmVlemVUaW1lOyAvLyAmIzIzMjsmIzE2NzsmIzE2MzsmIzIyOTvChiYjMTg3OyYjMjMxO8KawoQmIzIzMDvClyYjMTgyOyYjMjMzO8KXJiMxODA7CiAgICB9CgogICAgbWFwcGluZyAodWludCA9PiBGcm96ZW5SZWNvcmQpIHB1YmxpYyBmcm96ZW5SZWNvcmRzOwogICAgdWludCBwdWJsaWMgZnJvemVuUmVjb3Jkc0NvdW50ID0gMDsKCiAgICBmdW5jdGlvbiBSZWxlYXNlYWJsZVRva2VuKAogICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgaW5pdGlhbFN1cHBseSwKICAgICAgICAgICAgICAgICAgICB1aW50MjU2IGluaXRSZWxlYXNlZFN1cHBseSwKICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIG9wZXJhdG9yCiAgICAgICAgICAgICAgICApIE9wZXJhdGlvbmFsKG9wZXJhdG9yKSB7CiAgICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5OwogICAgICAgIHJlbGVhc2VkU3VwcGx5ID0gaW5pdFJlbGVhc2VkU3VwcGx5OwogICAgICAgIGNyZWF0ZVRpbWUgPSBub3c7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBpbml0UmVsZWFzZWRTdXBwbHk7CiAgICB9CgogICAgLy8gJiMyMjk7wpwmIzE2ODsgdGltZXN0YW1wICYjMjMwO8KXJiMxODI7JiMyMzM7wpcmIzE4MDsmIzIzMTvCgiYjMTg1OyYjMjMzO8KHwoomIzIzMDvClCYjMTkwOyByZWxlYXNlQW1vdW50ICYjMjMxO8KawoQgdG9rZW4KICAgIGZ1bmN0aW9uIHJlbGVhc2VTdXBwbHkodWludDI1NiByZWxlYXNlQW1vdW50LCB1aW50MjU2IHRpbWVzdGFtcCkgb25seU9wZXJhdG9yIHJldHVybnModWludDI1NiBfYWN0dWFsUmVsZWFzZSkgewogICAgICAgIHJlcXVpcmUodGltZXN0YW1wID49IGNyZWF0ZVRpbWUgJiYgdGltZXN0YW1wIDw9IG5vdyk7CiAgICAgICAgcmVxdWlyZSghanVkZ2VSZWxlYXNlUmVjb3JkRXhpc3QodGltZXN0YW1wKSk7CiAgICAgICAgcmVxdWlyZShyZWxlYXNlQW1vdW50IDw9IGRhaWx5TGltaXQpOwogICAgICAgIHVwZGF0ZUxpbWl0KCk7CiAgICAgICAgcmVxdWlyZShsaW1pdFN1cHBseVBlclllYXIgPiAwKTsKICAgICAgICBpZiAocmVsZWFzZUFtb3VudCA+IGxpbWl0U3VwcGx5UGVyWWVhcikgewogICAgICAgICAgICBpZiAocmVsZWFzZWRTdXBwbHkuYWRkKGxpbWl0U3VwcGx5UGVyWWVhcikgPiB0b3RhbFN1cHBseSkgewogICAgICAgICAgICAgICAgcmVsZWFzZWRTdXBwbHkgPSB0b3RhbFN1cHBseTsKICAgICAgICAgICAgICAgIHJlbGVhc2VBbW91bnQgPSB0b3RhbFN1cHBseS5zdWIocmVsZWFzZWRTdXBwbHkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVsZWFzZWRTdXBwbHkgPSByZWxlYXNlZFN1cHBseS5hZGQobGltaXRTdXBwbHlQZXJZZWFyKTsKICAgICAgICAgICAgICAgIHJlbGVhc2VBbW91bnQgPSBsaW1pdFN1cHBseVBlclllYXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGltaXRTdXBwbHlQZXJZZWFyID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAocmVsZWFzZWRTdXBwbHkuYWRkKHJlbGVhc2VBbW91bnQpID4gdG90YWxTdXBwbHkpIHsKICAgICAgICAgICAgICAgIHJlbGVhc2VkU3VwcGx5ID0gdG90YWxTdXBwbHk7CiAgICAgICAgICAgICAgICByZWxlYXNlQW1vdW50ID0gdG90YWxTdXBwbHkuc3ViKHJlbGVhc2VkU3VwcGx5KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlbGVhc2VkU3VwcGx5ID0gcmVsZWFzZWRTdXBwbHkuYWRkKHJlbGVhc2VBbW91bnQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxpbWl0U3VwcGx5UGVyWWVhciA9IGxpbWl0U3VwcGx5UGVyWWVhci5zdWIocmVsZWFzZUFtb3VudCk7CiAgICAgICAgfQogICAgICAgIGZyb3plblJlY29yZHNbZnJvemVuUmVjb3Jkc0NvdW50XSA9IEZyb3plblJlY29yZChyZWxlYXNlQW1vdW50LCB0aW1lc3RhbXAuYWRkKDI2ICogMSB3ZWVrcykpOwogICAgICAgIGZyb3plblJlY29yZHNDb3VudCsrOwogICAgICAgIFJlbGVhc2VTdXBwbHkobXNnLnNlbmRlciwgcmVsZWFzZUFtb3VudCwgdGltZXN0YW1wKTsKICAgICAgICByZXR1cm4gcmVsZWFzZUFtb3VudDsKICAgIH0KCiAgICAvLyAmIzIyOTvCiCYjMTY0OyYjMjMwO8KWJiMxNzM7IHRpbWVzdGFtcCAmIzIzMjsmIzE5MTvCmSYjMjI4OyYjMTg0O8KAJiMyMjk7JiMxNjQ7JiMxNjk7JiMyMzA7wpzCiSYjMjMwOyYjMTc4OyYjMTYxOyYjMjMwO8KcwokmIzIyOTsmIzE4MzsmIzE3ODsmIzIzMTsmIzE4NzvCjyYjMjMzO8KHwoomIzIzMDvClCYjMTkwOyYjMjMxO8KawoQmIzIzMjsmIzE3NDsmIzE3NjsmIzIyOTsmIzE4OTvClQogICAgZnVuY3Rpb24ganVkZ2VSZWxlYXNlUmVjb3JkRXhpc3QodWludDI1NiB0aW1lc3RhbXApIGludGVybmFsIHJldHVybnMoYm9vbCBfZXhpc3QpIHsKICAgICAgICBib29sIGV4aXN0ID0gZmFsc2U7CiAgICAgICAgaWYgKGZyb3plblJlY29yZHNDb3VudCA+IDApIHsKICAgICAgICAgICAgZm9yICh1aW50IGluZGV4ID0gMDsgaW5kZXggPCBmcm96ZW5SZWNvcmRzQ291bnQ7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgIGlmICgoZnJvemVuUmVjb3Jkc1tpbmRleF0udW5mcmVlemVUaW1lLnBhcnNlVGltZXN0YW1wKCkueWVhciA9PSAodGltZXN0YW1wLmFkZCgyNiAqIDEgd2Vla3MpKS5wYXJzZVRpbWVzdGFtcCgpLnllYXIpCiAgICAgICAgICAgICAgICAgICAgJiYgKGZyb3plblJlY29yZHNbaW5kZXhdLnVuZnJlZXplVGltZS5wYXJzZVRpbWVzdGFtcCgpLm1vbnRoID09ICh0aW1lc3RhbXAuYWRkKDI2ICogMSB3ZWVrcykpLnBhcnNlVGltZXN0YW1wKCkubW9udGgpCiAgICAgICAgICAgICAgICAgICAgJiYgKGZyb3plblJlY29yZHNbaW5kZXhdLnVuZnJlZXplVGltZS5wYXJzZVRpbWVzdGFtcCgpLmRheSA9PSAodGltZXN0YW1wLmFkZCgyNiAqIDEgd2Vla3MpKS5wYXJzZVRpbWVzdGFtcCgpLmRheSkpIHsKICAgICAgICAgICAgICAgICAgICBleGlzdCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGV4aXN0OwogICAgfQoKICAgIC8vICYjMjMwO8KbJiMxODA7JiMyMzA7wpYmIzE3NjsmIzIzMDsmIzE3NTvCjyYjMjI5OyYjMTg1OyYjMTgwOyYjMjMzO8KHwoomIzIzMDvClCYjMTkwO3Rva2VuJiMyMzE7wprChCYjMjMzO8KZwpAmIzIyOTvCiCYjMTgyOyYjMjMwO8KVJiMxNzY7JiMyMzM7wofCjwogICAgZnVuY3Rpb24gdXBkYXRlTGltaXQoKSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKGNyZWF0ZVRpbWUuYWRkKDEgeWVhcnMpIDwgbm93ICYmICFzZWNvbmRZZWFyVXBkYXRlKSB7CiAgICAgICAgICAgIGxpbWl0U3VwcGx5UGVyWWVhciA9IHN0YW5kYXJkRGVjaW1hbHMubXVsKDEyMDAwMDAwMCk7CiAgICAgICAgICAgIHNlY29uZFllYXJVcGRhdGUgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoY3JlYXRlVGltZS5hZGQoMiAqIDEgeWVhcnMpIDwgbm93KSB7CiAgICAgICAgICAgIGlmIChyZWxlYXNlZFN1cHBseSA8IHRvdGFsU3VwcGx5KSB7CiAgICAgICAgICAgICAgICBsaW1pdFN1cHBseVBlclllYXIgPSB0b3RhbFN1cHBseS5zdWIocmVsZWFzZWRTdXBwbHkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8vICYjMjMyOyYjMTY3OyYjMTYzOyYjMjI5O8KGJiMxODc7IHJlbGVhc2VTdXBwbHkgJiMyMjg7JiMxODQ7JiMxNzM7JiMyMzM7wofCiiYjMjMwO8KUJiMxOTA7JiMyMzE7wprChCB0b2tlbgogICAgZnVuY3Rpb24gdW5mcmVlemUoKSBvbmx5T3BlcmF0b3IgcmV0dXJucyh1aW50MjU2IF91bmZyZWV6ZUFtb3VudCkgewogICAgICAgIHVpbnQyNTYgdW5mcmVlemVBbW91bnQgPSAwOwogICAgICAgIHVpbnQgaW5kZXggPSAwOwogICAgICAgIHdoaWxlIChpbmRleCA8IGZyb3plblJlY29yZHNDb3VudCkgewogICAgICAgICAgICBpZiAoZnJvemVuUmVjb3Jkc1tpbmRleF0udW5mcmVlemVUaW1lIDwgbm93KSB7CiAgICAgICAgICAgICAgICB1bmZyZWV6ZUFtb3VudCArPSBmcm96ZW5SZWNvcmRzW2luZGV4XS5hbW91bnQ7CiAgICAgICAgICAgICAgICB1bmZyZWV6ZUJ5SW5kZXgoaW5kZXgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdW5mcmVlemVBbW91bnQ7CiAgICB9CgogICAgZnVuY3Rpb24gdW5mcmVlemVCeUluZGV4ICh1aW50IGluZGV4KSBpbnRlcm5hbCB7CiAgICAgICAgRnJvemVuUmVjb3JkIHVuZnJlZXplUmVjb3JkID0gZnJvemVuUmVjb3Jkc1tpbmRleF07CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLmFkZCh1bmZyZWV6ZVJlY29yZC5hbW91bnQpOwogICAgICAgIFVuZnJlZXplQW1vdW50KG93bmVyLCB1bmZyZWV6ZVJlY29yZC5hbW91bnQsIHVuZnJlZXplUmVjb3JkLnVuZnJlZXplVGltZSk7CiAgICAgICAgZnJvemVuUmVjb3Jkc1tpbmRleF0gPSBmcm96ZW5SZWNvcmRzW2Zyb3plblJlY29yZHNDb3VudCAtIDFdOwogICAgICAgIGRlbGV0ZSBmcm96ZW5SZWNvcmRzW2Zyb3plblJlY29yZHNDb3VudCAtIDFdOwogICAgICAgIGZyb3plblJlY29yZHNDb3VudC0tOwogICAgfQoKICAgIC8vICYjMjMyOyYjMTc0OyYjMTkwOyYjMjMxOyYjMTg5OyYjMTc0OyYjMjMwOyYjMTc1O8KPJiMyMjk7JiMxNjQ7JiMxNjk7JiMyMzM7wofCiiYjMjMwO8KUJiMxOTA7IHRva2VuICYjMjMxO8KawoQmIzIzMzvCmcKQJiMyMzM7JiMxNjI7wp0KICAgIGZ1bmN0aW9uIHNldERhaWx5TGltaXQodWludDI1NiBfZGFpbHlMaW1pdCkgb25seU93bmVyIHsKICAgICAgICBkYWlseUxpbWl0ID0gX2RhaWx5TGltaXQ7CiAgICB9Cn0KCmNvbnRyYWN0IExMVG9rZW4gaXMgUmVsZWFzZWFibGVUb2tlbiB7CiAgICBzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gJzIwMTcwODI2MDInOwogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gJ0xMVG9rZW4nOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAnTExUJzsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDg7CgogICAgZnVuY3Rpb24gTExUb2tlbigKICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBpbml0aWFsU3VwcGx5LAogICAgICAgICAgICAgICAgICAgICB1aW50MjU2IGluaXRSZWxlYXNlZFN1cHBseSwKICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBvcGVyYXRvcgogICAgICAgICAgICAgICAgICAgICApIFJlbGVhc2VhYmxlVG9rZW4oaW5pdGlhbFN1cHBseSwgaW5pdFJlbGVhc2VkU3VwcGx5LCBvcGVyYXRvcikge30KfQ=='.
	

]
