Class {
	#name : #SRT1098aa6de456713e11f8a3abff02a21830350c24,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1098aa6de456713e11f8a3abff02a21830350c24 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCmNvbnRyYWN0IE93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX2FkZHIpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKF9hZGRyID09IDB4MCkgdGhyb3c7CiAgICAgICAgb3duZXIgPSBfYWRkcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB0aHJvdzsKICAgICAgICBfOwogICAgfQp9Cgpjb250cmFjdCBNdXRleCBpcyBPd25lZCB7CiAgICBib29sIGxvY2tlZCA9IGZhbHNlOwogICAgbW9kaWZpZXIgbXV0ZXhlZCB7CiAgICAgICAgaWYgKGxvY2tlZCkgdGhyb3c7CiAgICAgICAgbG9ja2VkID0gdHJ1ZTsKICAgICAgICBfOwogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHVuTXV0ZXgoKSBvbmx5T3duZXIgewogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgfQp9CgoKY29udHJhY3QgUmVudGFsIGlzIE93bmVkIHsKICAgIGZ1bmN0aW9uIFJlbnRhbChhZGRyZXNzIF9vd25lcikgewogICAgICAgIGlmIChfb3duZXIgPT0gMHgwKSB0aHJvdzsKICAgICAgICBvd25lciA9IF9vd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBvZmZlcihhZGRyZXNzIGZyb20sIHVpbnQgbnVtKSB7CgogICAgfQoKICAgIGZ1bmN0aW9uIGNsYWltQmFsYW5jZShhZGRyZXNzKSByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBleGVjKGFkZHJlc3MgZGVzdCkgb25seU93bmVyIHsKICAgICAgICBpZiAoIWRlc3QuY2FsbChtc2cuZGF0YSkpIHRocm93OwogICAgfQp9Cgpjb250cmFjdCBUb2tlbiBpcyBPd25lZCwgTXV0ZXggewogICAgdWludCBPTkUgPSAxMCoqODsKICAgIHVpbnQgcHJpY2UgPSA1MDAwOwogICAgTGVkZ2VyIGxlZGdlcjsKICAgIFJlbnRhbCByZW50YWxDb250cmFjdDsKICAgIHVpbnQ4IHJvbGxPdmVyVGltZSA9IDQ7CiAgICB1aW50OCBzdGFydFRpbWUgPSA4OwogICAgYm9vbCBsaXZlID0gZmFsc2U7CiAgICBhZGRyZXNzIGNsdWI7CiAgICB1aW50IGxvY2tlZFN1cHBseSA9IDA7CiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiTGVnZW5kcyI7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSA4OwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiTEdEIjsKICAgIHN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICcxLjEnOwogICAgYm9vbCB0cmFuc2ZlcnNPbiA9IGZhbHNlOwoKICAgIG1vZGlmaWVyIG9ubHlJbnB1dFdvcmRzKHVpbnQgbikgewogICAgICAgIGlmIChtc2cuZGF0YS5sZW5ndGggIT0gKDMyICogbikgKyA0KSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIFRva2VuKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvKgogICAgKglCb29ra2VlcGluZyBhbmQgQWRtaW4gRnVuY3Rpb25zCiAgICAqLwoKICAgIGV2ZW50IExlZGdlclVwZGF0ZWQoYWRkcmVzcyxhZGRyZXNzKTsKCiAgICBmdW5jdGlvbiBjaGFuZ2VDbHViKGFkZHJlc3MgX2FkZHIpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKF9hZGRyID09IDB4MCkgdGhyb3c7CgogICAgICAgIGNsdWIgPSBfYWRkcjsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VQcmljZSh1aW50IF9udW0pIG9ubHlPd25lciB7CiAgICAgICAgcHJpY2UgPSBfbnVtOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBpZiAoKGEgKyBiKSA8IGEpIHRocm93OwogICAgICAgIHJldHVybiAoYSArIGIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUxlZGdlcihhZGRyZXNzIF9hZGRyKSBvbmx5T3duZXIgewogICAgICAgIGlmIChfYWRkciA9PSAweDApIHRocm93OwoKICAgICAgICBMZWRnZXJVcGRhdGVkKG1zZy5zZW5kZXIsIF9hZGRyKTsKICAgICAgICBsZWRnZXIgPSBMZWRnZXIoX2FkZHIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVJlbnRhbChhZGRyZXNzIF9hZGRyKSBvbmx5T3duZXIgewogICAgICAgIGlmIChfYWRkciA9PSAweDApIHRocm93OwogICAgICAgIHJlbnRhbENvbnRyYWN0ID0gUmVudGFsKF9hZGRyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VUaW1lcyh1aW50OCBfcm9sbE92ZXIsIHVpbnQ4IF9zdGFydCkgb25seU93bmVyIHsKICAgICAgICByb2xsT3ZlclRpbWUgPSBfcm9sbE92ZXI7CiAgICAgICAgc3RhcnRUaW1lID0gX3N0YXJ0OwogICAgfQoKICAgIC8qCiAgICAqIExvY2tpbmcgaXMgYSBmZWF0dXJlIHRoYXQgdHVybnMgYSB1c2VyJ3MgYmFsYW5jZXMgaW50bwogICAgKiB1bi1pc3N1ZWQgdG9rZW5zLCB0YWtpbmcgdGhlbSBvdXQgb2YgYW4gYWNjb3VudCBhbmQgcmVkdWNpbmcgdGhlIHN1cHBseS4KICAgICogRGlsdXRpbmcgaXMgc28gbmFtZWQgdG8gcmVtaW5kIHRoZSBjYWxsZXIgdGhhdCB0aGV5IGFyZSBjaGFuZ2luZyB0aGUgbW9uZXkgc3VwcGx5LgogICAgICAgICovCgogICAgZnVuY3Rpb24gbG9jayhhZGRyZXNzIF9zZWl6ZUFkZHIpIG9ubHlPd25lciBtdXRleGVkIHsKICAgICAgICB1aW50IG15QmFsYW5jZSA9IGxlZGdlci5iYWxhbmNlT2YoX3NlaXplQWRkcik7CgogICAgICAgIGxvY2tlZFN1cHBseSArPSBteUJhbGFuY2U7CiAgICAgICAgbGVkZ2VyLnNldEJhbGFuY2UoX3NlaXplQWRkciwgMCk7CiAgICB9CgogICAgZXZlbnQgRGlsdXRpb24oYWRkcmVzcywgdWludCk7CgogICAgZnVuY3Rpb24gZGlsdXRlKGFkZHJlc3MgX2Rlc3RBZGRyLCB1aW50IGFtb3VudCkgb25seU93bmVyIHsKICAgICAgICBpZiAoYW1vdW50ID4gbG9ja2VkU3VwcGx5KSB0aHJvdzsKCiAgICAgICAgRGlsdXRpb24oX2Rlc3RBZGRyLCBhbW91bnQpOwoKICAgICAgICBsb2NrZWRTdXBwbHkgLT0gYW1vdW50OwoKICAgICAgICB1aW50IGN1ckJhbGFuY2UgPSBsZWRnZXIuYmFsYW5jZU9mKF9kZXN0QWRkcik7CiAgICAgICAgY3VyQmFsYW5jZSA9IHNhZmVBZGQoYW1vdW50LCBjdXJCYWxhbmNlKTsKICAgICAgICBsZWRnZXIuc2V0QmFsYW5jZShfZGVzdEFkZHIsIGN1ckJhbGFuY2UpOwogICAgfQoKICAgIC8qCiAgICAgKiBDcm93ZHNhbGUgLS0KICAgICAqCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbXBsZXRlQ3Jvd2RzYWxlKCkgb25seU93bmVyIHsKICAgICAgICAvLyBMb2NrIHVuc29sZCB0b2tlbnMKICAgICAgICAvLyBhbGxvdyB0cmFuc2ZlcnMgZm9yIGFyYml0cmFyeSBvd25lcnMKICAgICAgICB0cmFuc2ZlcnNPbiA9IHRydWU7CiAgICAgICAgbG9jayhvd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gcGF1c2VUcmFuc2ZlcnMoKSBvbmx5T3duZXIgewogICAgICAgIHRyYW5zZmVyc09uID0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gcmVzdW1lVHJhbnNmZXJzKCkgb25seU93bmVyIHsKICAgICAgICB0cmFuc2ZlcnNPbiA9IHRydWU7CiAgICB9CgogICAgLyoKICAgICogUmVudGluZyAtLSBMb2dpYyBUQkQgbGF0ZXIuIEZvciBub3csIHdlIHRydXN0IHRoZSByZW50YWwgY29udHJhY3QKICAgICogdG8gbWFuYWdlIGV2ZXJ5dGhpbmcgYWJvdXQgdGhlIHJlbnRhbHMsIGluY2x1ZGluZyBib29ra2VlcGluZyBvbiBlYXJuaW5ncwogICAgKiBhbmQgcmV0dXJuaW5nIHRva2Vucy4KICAgICovCgogICAgZnVuY3Rpb24gcmVudE91dCh1aW50IG51bSkgewogICAgICAgIGlmIChsZWRnZXIuYmFsYW5jZU9mKG1zZy5zZW5kZXIpIDwgbnVtKSB0aHJvdzsKICAgICAgICByZW50YWxDb250cmFjdC5vZmZlcihtc2cuc2VuZGVyLCBudW0pOwogICAgICAgIGxlZGdlci50b2tlblRyYW5zZmVyKG1zZy5zZW5kZXIsIHJlbnRhbENvbnRyYWN0LCBudW0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsYWltVW5yZW50ZWQoKSB7CiAgICAgICAgdWludCBhbW91bnQgPSByZW50YWxDb250cmFjdC5jbGFpbUJhbGFuY2UobXNnLnNlbmRlcik7IC8vIHRoaXMgc2hvdWxkIHJlZHVjZSBzZW5kZXIncyBjbGFpbWFibGVCYWxhbmNlIHRvIDAKCiAgICAgICAgbGVkZ2VyLnRva2VuVHJhbnNmZXIocmVudGFsQ29udHJhY3QsIG1zZy5zZW5kZXIsIGFtb3VudCk7CiAgICB9CgogICAgLyoKICAgICogQnVybmluZyAtLSBXZSBhbGxvdyBhbnkgdXNlciB0byBidXJuIHRva2Vucy4KICAgICoKICAgICAqLwoKICAgIGZ1bmN0aW9uIGJ1cm4odWludCBfYW1vdW50KSB7CiAgICAgICAgdWludCBiYWxhbmNlID0gbGVkZ2VyLmJhbGFuY2VPZihtc2cuc2VuZGVyKTsKICAgICAgICBpZiAoX2Ftb3VudCA+IGJhbGFuY2UpIHRocm93OwoKICAgICAgICBsZWRnZXIuc2V0QmFsYW5jZShtc2cuc2VuZGVyLCBiYWxhbmNlIC0gX2Ftb3VudCk7CiAgICB9CgogICAgLyoKICAgIEVudHJ5CiAgICAqLwogICAgZnVuY3Rpb24gY2hlY2tJbih1aW50IF9udW1DaGVja2lucykgcmV0dXJucyhib29sKSB7CiAgICAgICAgaW50IG5lZWRlZCA9IGludChwcmljZSAqIE9ORSogX251bUNoZWNraW5zKTsKICAgICAgICBpZiAoaW50KGxlZGdlci5iYWxhbmNlT2YobXNnLnNlbmRlcikpID4gbmVlZGVkKSB7CiAgICAgICAgICAgIGxlZGdlci5jaGFuZ2VVc2VkKG1zZy5zZW5kZXIsIG5lZWRlZCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gRVJDMjAgU3VwcG9ydC4gVGhpcyBjb3VsZCBhbHNvIHVzZSB0aGUgZmFsbGJhY2sgYnV0CiAgICAvLyBJIHByZWZlciB0aGUgY29udHJvbCBmb3Igbm93LgoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludCBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gbGVkZ2VyLnRvdGFsU3VwcGx5KCk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgb25seUlucHV0V29yZHMoMikgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKCF0cmFuc2ZlcnNPbiAmJiBtc2cuc2VuZGVyICE9IG93bmVyKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKCFsZWRnZXIudG9rZW5UcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpKSB7IHJldHVybiBmYWxzZTsgfQoKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBvbmx5SW5wdXRXb3JkcygzKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKCF0cmFuc2ZlcnNPbiAmJiBtc2cuc2VuZGVyICE9IG93bmVyKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKCEgbGVkZ2VyLnRva2VuVHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIF9mcm9tLCBfdG8sIF9hbW91bnQpICkgeyByZXR1cm4gZmFsc2U7fQoKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIGxlZGdlci5hbGxvd2FuY2UoX2Zyb20sIF90byk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmICggbGVkZ2VyLnRva2VuQXBwcm92ZShtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKSApIHsKICAgICAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBsZWRnZXIuYmFsYW5jZU9mKF9hZGRyKTsKICAgIH0KfQoKY29udHJhY3QgTGVkZ2VyIGlzIE93bmVkIHsKICAgIHVpbnQgT05FID0gMTAqKjg7CiAgICB1aW50IHByZU1pbmVkID0gMzAwMDAwMDA7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSB1c2VkVG9kYXk7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBzZWVuSGVyZTsKICAgIGFkZHJlc3NbXSBwdWJsaWMgc2VlbkhlcmVBOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIGFkZHJlc3MgdG9rZW47CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseSA9IDA7CgogICAgZnVuY3Rpb24gTGVkZ2VyKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBzZWVuSGVyZVtvd25lcl0gPSB0cnVlOwogICAgICAgIHNlZW5IZXJlQS5wdXNoKG93bmVyKTsKCiAgICAgICAgdG90YWxTdXBwbHkgPSBwcmVNaW5lZCAqT05FOwogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IHRvdGFsU3VwcGx5OwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlUb2tlbiB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gdG9rZW4pIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVRva2VuT3JPd25lciB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gdG9rZW4gJiYgbXNnLnNlbmRlciAhPSBvd25lcikgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiB0b2tlblRyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IGFtb3VudCkgb25seVRva2VuIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChhbW91bnQgPiBiYWxhbmNlc1tfZnJvbV0pIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoKGJhbGFuY2VzW190b10gKyBhbW91bnQpIDwgYmFsYW5jZXNbX3RvXSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmIChhbW91bnQgPT0gMCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IGFtb3VudDsKICAgICAgICBiYWxhbmNlc1tfdG9dICs9IGFtb3VudDsKCiAgICAgICAgaWYgKHNlZW5IZXJlW190b10gPT0gZmFsc2UpIHsKICAgICAgICAgICAgc2VlbkhlcmVBLnB1c2goX3RvKTsKICAgICAgICAgICAgc2VlbkhlcmVbX3RvXSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b2tlblRyYW5zZmVyRnJvbShhZGRyZXNzIF9zZW5kZXIsIGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IGFtb3VudCkgb25seVRva2VuIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChhbGxvd2VkW19mcm9tXVtfc2VuZGVyXSA8PSBhbW91bnQpIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoYW1vdW50ID4gYmFsYW5jZU9mKF9mcm9tKSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmIChhbW91bnQgPT0gMCkgcmV0dXJuIGZhbHNlOwoKICAgICAgICBpZiAoKGJhbGFuY2VzW190b10gKyBhbW91bnQpIDwgYW1vdW50KSByZXR1cm4gZmFsc2U7CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBhbW91bnQ7CiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBhbW91bnQ7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bX3NlbmRlcl0gLT0gYW1vdW50OwoKICAgICAgICBpZiAoc2VlbkhlcmVbX3RvXSA9PSBmYWxzZSkgewogICAgICAgICAgICBzZWVuSGVyZUEucHVzaChfdG8pOwogICAgICAgICAgICBzZWVuSGVyZVtfdG9dID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICBmdW5jdGlvbiBjaGFuZ2VVc2VkKGFkZHJlc3MgX2FkZHIsIGludCBhbW91bnQpIG9ubHlUb2tlbiB7CiAgICAgICAgaW50IG15VG9kYXkgPSBpbnQodXNlZFRvZGF5W19hZGRyXSkgKyBhbW91bnQ7CiAgICAgICAgdXNlZFRvZGF5W19hZGRyXSA9IHVpbnQobXlUb2RheSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVzZXRVc2VkVG9kYXkodWludDggc3RhcnRJLCB1aW50OCBudW1UaW1lcykgb25seVRva2VuT3JPd25lciByZXR1cm5zKHVpbnQ4KSB7CiAgICAgICAgdWludDggbnVtRGVsZXRlZDsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBudW1UaW1lcyAmJiBpICsgc3RhcnRJIDwgc2VlbkhlcmVBLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICh1c2VkVG9kYXlbc2VlbkhlcmVBW2krc3RhcnRJXV0gIT0gMCkgewogICAgICAgICAgICAgICAgZGVsZXRlIHVzZWRUb2RheVtzZWVuSGVyZUFbaStzdGFydEldXTsKICAgICAgICAgICAgICAgIG51bURlbGV0ZWQrKzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVtRGVsZXRlZDsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIC8vIGRvbid0IGZvcmdldCB0byBzdWJ0cmFjdCB1c2VkVG9kYXkKICAgICAgICBpZiAodXNlZFRvZGF5W19hZGRyXSA+PSBiYWxhbmNlc1tfYWRkcl0pIHsgcmV0dXJuIDA7fQogICAgICAgIHJldHVybiBiYWxhbmNlc1tfYWRkcl0gLSB1c2VkVG9kYXlbX2FkZHJdOwogICAgfQoKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MsIGFkZHJlc3MsIHVpbnQpOwoKICAgIGZ1bmN0aW9uIHRva2VuQXBwcm92ZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgb25seVRva2VuIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhbGxvd2VkW19mcm9tXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwoX2Zyb20sIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VUb2tlbihhZGRyZXNzIF90b2tlbikgb25seU93bmVyIHsKICAgICAgICB0b2tlbiA9IFRva2VuKF90b2tlbik7CiAgICB9CgogICAgZnVuY3Rpb24gcmVkdWNlVG90YWxTdXBwbHkodWludCBhbW91bnQpIG9ubHlUb2tlbiB7CiAgICAgICAgaWYgKGFtb3VudCA+IHRvdGFsU3VwcGx5KSB0aHJvdzsKCiAgICAgICAgdG90YWxTdXBwbHkgLT0gYW1vdW50OwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJhbGFuY2UoYWRkcmVzcyBfYWRkciwgdWludCBhbW91bnQpIG9ubHlUb2tlbk9yT3duZXIgewogICAgICAgIGlmIChiYWxhbmNlc1tfYWRkcl0gPT0gYW1vdW50KSB7IHJldHVybjsgfQogICAgICAgIGlmIChiYWxhbmNlc1tfYWRkcl0gPCBhbW91bnQpIHsKICAgICAgICAgICAgLy8gaW5jcmVhc2luZyB0b3RhbFN1cHBseQogICAgICAgICAgICB1aW50IGluY3JlYXNlID0gYW1vdW50IC0gYmFsYW5jZXNbX2FkZHJdOwogICAgICAgICAgICB0b3RhbFN1cHBseSArPSBpbmNyZWFzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBkZWNyZWFzaW5nIHRvdGFsU3VwcGx5CiAgICAgICAgICAgIHVpbnQgZGVjcmVhc2UgPSBiYWxhbmNlc1tfYWRkcl0gLSBhbW91bnQ7CiAgICAgICAgICAgIC8vVE9ETzogc2FmZVN1YgogICAgICAgICAgICB0b3RhbFN1cHBseSAtPSBkZWNyZWFzZTsKICAgICAgICB9CiAgICAgICAgYmFsYW5jZXNbX2FkZHJdID0gYW1vdW50OwogICAgfQoKfQ=='.
	

]
