Class {
	#name : #SRTd0cef0a3d1c4df82623feaf81baca80f0194e9cc,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd0cef0a3d1c4df82623feaf81baca80f0194e9cc >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioKICogQHRpdGxlIENvbnRyYWN0UmVjZWl2ZXIKICogQGRldiBSZWNlaXZlciBmb3IgRVJDMjIzIHRva2VucwogKi8KY29udHJhY3QgQ29udHJhY3RSZWNlaXZlciB7CgogIHN0cnVjdCBUS04gewogICAgYWRkcmVzcyBzZW5kZXI7CiAgICB1aW50IHZhbHVlOwogICAgYnl0ZXMgZGF0YTsKICAgIGJ5dGVzNCBzaWc7CiAgfQoKICBmdW5jdGlvbiB0b2tlbkZhbGxiYWNrKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljIHB1cmUgewogICAgVEtOIG1lbW9yeSB0a247CiAgICB0a24uc2VuZGVyID0gX2Zyb207CiAgICB0a24udmFsdWUgPSBfdmFsdWU7CiAgICB0a24uZGF0YSA9IF9kYXRhOwogICAgdWludDMyIHUgPSB1aW50MzIoX2RhdGFbM10pICsgKHVpbnQzMihfZGF0YVsyXSkgPDwgOCkgKyAodWludDMyKF9kYXRhWzFdKSA8PCAxNikgKyAodWludDMyKF9kYXRhWzBdKSA8PCAyNCk7CiAgICB0a24uc2lnID0gYnl0ZXM0KHUpOwoKICAgIC8qIHRrbiB2YXJpYWJsZSBpcyBhbmFsb2d1ZSBvZiBtc2cgdmFyaWFibGUgb2YgRXRoZXIgdHJhbnNhY3Rpb24KICAgICogIHRrbi5zZW5kZXIgaXMgcGVyc29uIHdobyBpbml0aWF0ZWQgdGhpcyB0b2tlbiB0cmFuc2FjdGlvbiAgIChhbmFsb2d1ZSBvZiBtc2cuc2VuZGVyKQogICAgKiAgdGtuLnZhbHVlIHRoZSBudW1iZXIgb2YgdG9rZW5zIHRoYXQgd2VyZSBzZW50ICAgKGFuYWxvZ3VlIG9mIG1zZy52YWx1ZSkKICAgICogIHRrbi5kYXRhIGlzIGRhdGEgb2YgdG9rZW4gdHJhbnNhY3Rpb24gICAoYW5hbG9ndWUgb2YgbXNnLmRhdGEpCiAgICAqICB0a24uc2lnIGlzIDQgYnl0ZXMgc2lnbmF0dXJlIG9mIGZ1bmN0aW9uCiAgICAqICBpZiBkYXRhIG9mIHRva2VuIHRyYW5zYWN0aW9uIGlzIGEgZnVuY3Rpb24gZXhlY3V0aW9uCiAgICAqLwogIH0KfQoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cn0KCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBFUkMyMjMgewogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwoKICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIF9uYW1lKTsKICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgX3N5bWJvbCk7CiAgZnVuY3Rpb24gZGVjaW1hbHMoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50OCBfZGVjaW1hbHMpOwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfc3VwcGx5KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpOwoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wgb2spOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEsIHN0cmluZyBjdXN0b21fZmFsbGJhY2spIHB1YmxpYyByZXR1cm5zIChib29sIG9rKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlLCBieXRlcyBpbmRleGVkIGRhdGEpOwp9Cgpjb250cmFjdCBFeGNhbGlidXIgaXMgRVJDMjIzLCBPd25hYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIkV4Y2FsaWJ1ckNvaW4iOwogIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkVYQyI7CiAgdWludDggcHVibGljIGRlY2ltYWxzID0gODsKICB1aW50MjU2IHB1YmxpYyBpbml0aWFsU3VwcGx5ID0gMTBlMTEgKiAxZTg7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgdWludDI1NiBwdWJsaWMgZGlzdHJpYnV0ZUFtb3VudCA9IDA7CiAgYm9vbCBwdWJsaWMgbWludGluZ0ZpbmlzaGVkID0gZmFsc2U7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgZnJvemVuQWNjb3VudDsKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyB1bmxvY2tVbml4VGltZTsKCiAgZXZlbnQgRnJvemVuRnVuZHMoYWRkcmVzcyBpbmRleGVkIHRhcmdldCwgYm9vbCBmcm96ZW4pOwogIGV2ZW50IExvY2tlZEZ1bmRzKGFkZHJlc3MgaW5kZXhlZCB0YXJnZXQsIHVpbnQyNTYgbG9ja2VkKTsKICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwogIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CiAgZXZlbnQgTWludEZpbmlzaGVkKCk7CgogIGZ1bmN0aW9uIEV4Y2FsaWJ1cigpIHB1YmxpYyB7CiAgICB0b3RhbFN1cHBseSA9IGluaXRpYWxTdXBwbHk7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHRvdGFsU3VwcGx5OwogIH0KCiAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBfbmFtZSkgewogICAgcmV0dXJuIG5hbWU7CiAgfQoKICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgX3N5bWJvbCkgewogICAgcmV0dXJuIHN5bWJvbDsKICB9CgogIGZ1bmN0aW9uIGRlY2ltYWxzKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDggX2RlY2ltYWxzKSB7CiAgICByZXR1cm4gZGVjaW1hbHM7CiAgfQoKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KSB7CiAgICByZXR1cm4gdG90YWxTdXBwbHk7CiAgfQoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludDI1NiBzaXplKXsKICAgIGFzc2VydChtc2cuZGF0YS5sZW5ndGggPj0gc2l6ZSArIDQpOwogICAgXzsKICB9CgogIC8vIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSB1c2VyIG9yIGFub3RoZXIgY29udHJhY3Qgd2FudHMgdG8gdHJhbnNmZXIgZnVuZHMgLgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEsIHN0cmluZyBfY3VzdG9tX2ZhbGxiYWNrKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXF1aXJlKAogICAgICBfdmFsdWUgPiAwCiAgICAgICYmIGZyb3plbkFjY291bnRbbXNnLnNlbmRlcl0gPT0gZmFsc2UKICAgICAgJiYgZnJvemVuQWNjb3VudFtfdG9dID09IGZhbHNlCiAgICAgICYmIG5vdyA+IHVubG9ja1VuaXhUaW1lW21zZy5zZW5kZXJdCiAgICAgICYmIG5vdyA+IHVubG9ja1VuaXhUaW1lW190b10KICAgICk7CgogICAgaWYoaXNDb250cmFjdChfdG8pKSB7CiAgICAgIGlmIChiYWxhbmNlT2YobXNnLnNlbmRlcikgPCBfdmFsdWUpIHJldmVydCgpOwogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IFNhZmVNYXRoLnN1YihiYWxhbmNlT2YobXNnLnNlbmRlciksIF92YWx1ZSk7CiAgICAgIGJhbGFuY2VzW190b10gPSBTYWZlTWF0aC5hZGQoYmFsYW5jZU9mKF90byksIF92YWx1ZSk7CiAgICAgIGFzc2VydChfdG8uY2FsbC52YWx1ZSgwKShieXRlczQoa2VjY2FrMjU2KF9jdXN0b21fZmFsbGJhY2spKSwgbXNnLnNlbmRlciwgX3ZhbHVlLCBfZGF0YSkpOwogICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGVsc2UgewogICAgICByZXR1cm4gdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgIH0KICB9CgoKICAvLyBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgdXNlciBvciBhbm90aGVyIGNvbnRyYWN0IHdhbnRzIHRvIHRyYW5zZmVyIGZ1bmRzIC4KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXF1aXJlKAogICAgICBfdmFsdWUgPiAwCiAgICAgICYmIGZyb3plbkFjY291bnRbbXNnLnNlbmRlcl0gPT0gZmFsc2UKICAgICAgJiYgZnJvemVuQWNjb3VudFtfdG9dID09IGZhbHNlCiAgICAgICYmIG5vdyA+IHVubG9ja1VuaXhUaW1lW21zZy5zZW5kZXJdCiAgICAgICYmIG5vdyA+IHVubG9ja1VuaXhUaW1lW190b10KICAgICk7CgogICAgaWYoaXNDb250cmFjdChfdG8pKSB7CiAgICAgIHJldHVybiB0cmFuc2ZlclRvQ29udHJhY3QoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgIH0KICAgIGVsc2UgewogICAgICByZXR1cm4gdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgIH0KICB9CgogIC8vIFN0YW5kYXJkIGZ1bmN0aW9uIHRyYW5zZmVyIHNpbWlsYXIgdG8gRVJDMjAgdHJhbnNmZXIgd2l0aCBubyBfZGF0YSAuCiAgLy8gQWRkZWQgZHVlIHRvIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHJlYXNvbnMgLgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmVxdWlyZSgKICAgICAgX3ZhbHVlID4gMAogICAgICAmJiBmcm96ZW5BY2NvdW50W21zZy5zZW5kZXJdID09IGZhbHNlCiAgICAgICYmIGZyb3plbkFjY291bnRbX3RvXSA9PSBmYWxzZQogICAgICAmJiBub3cgPiB1bmxvY2tVbml4VGltZVttc2cuc2VuZGVyXQogICAgICAmJiBub3cgPiB1bmxvY2tVbml4VGltZVtfdG9dCiAgICApOwoKICAgIC8vc3RhbmRhcmQgZnVuY3Rpb24gdHJhbnNmZXIgc2ltaWxhciB0byBFUkMyMCB0cmFuc2ZlciB3aXRoIG5vIF9kYXRhCiAgICAvL2FkZGVkIGR1ZSB0byBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSByZWFzb25zCiAgICBieXRlcyBtZW1vcnkgZW1wdHk7CiAgICBpZiAoaXNDb250cmFjdChfdG8pKSB7CiAgICAgIHJldHVybiB0cmFuc2ZlclRvQ29udHJhY3QoX3RvLCBfdmFsdWUsIGVtcHR5KTsKICAgIH0KICAgIGVsc2UgewogICAgICByZXR1cm4gdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIGVtcHR5KTsKICAgIH0KICB9CgogIC8vIGFzc2VtYmxlIHRoZSBnaXZlbiBhZGRyZXNzIGJ5dGVjb2RlLiBJZiBieXRlY29kZSBleGlzdHMgdGhlbiB0aGUgX2FkZHIgaXMgYSBjb250cmFjdC4KICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sIGlzX2NvbnRyYWN0KSB7CiAgICB1aW50IGxlbmd0aDsKICAgIGFzc2VtYmx5IHsKICAgICAgLy8gcmV0cmlldmUgdGhlIHNpemUgb2YgdGhlIGNvZGUgb24gdGFyZ2V0IGFkZHJlc3MsIHRoaXMgbmVlZHMgYXNzZW1ibHkKICAgICAgbGVuZ3RoIDo9IGV4dGNvZGVzaXplKF9hZGRyKQogICAgfQogICAgcmV0dXJuIChsZW5ndGg+MCk7CiAgfQoKICAvLyBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhbiBhZGRyZXNzCiAgZnVuY3Rpb24gdHJhbnNmZXJUb0FkZHJlc3MoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHJpdmF0ZSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGlmIChiYWxhbmNlT2YobXNnLnNlbmRlcikgPCBfdmFsdWUpIHJldmVydCgpOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBTYWZlTWF0aC5zdWIoYmFsYW5jZU9mKG1zZy5zZW5kZXIpLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IFNhZmVNYXRoLmFkZChiYWxhbmNlT2YoX3RvKSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiB0cmFuc2FjdGlvbiB0YXJnZXQgaXMgYSBjb250cmFjdAogIGZ1bmN0aW9uIHRyYW5zZmVyVG9Db250cmFjdChhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwcml2YXRlIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgaWYgKGJhbGFuY2VPZihtc2cuc2VuZGVyKSA8IF92YWx1ZSkgcmV2ZXJ0KCk7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IFNhZmVNYXRoLnN1YihiYWxhbmNlT2YobXNnLnNlbmRlciksIF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gU2FmZU1hdGguYWRkKGJhbGFuY2VPZihfdG8pLCBfdmFsdWUpOwogICAgQ29udHJhY3RSZWNlaXZlciByZWNlaXZlciA9IENvbnRyYWN0UmVjZWl2ZXIoX3RvKTsKICAgIHJlY2VpdmVyLnRva2VuRmFsbGJhY2sobXNnLnNlbmRlciwgX3ZhbHVlLCBfZGF0YSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IFByZXZlbnQgdGFyZ2V0cyBmcm9tIHNlbmRpbmcgb3IgcmVjZWl2aW5nIHRva2VucwogICAqIEBwYXJhbSB0YXJnZXRzIEFkZHJlc3NlcyB0byBiZSBmcm96ZW4KICAgKiBAcGFyYW0gaXNGcm96ZW4gZWl0aGVyIHRvIGZyZWV6ZSBpdCBvciBub3QKICAgKi8KICBmdW5jdGlvbiBmcmVlemVBY2NvdW50cyhhZGRyZXNzW10gdGFyZ2V0cywgYm9vbCBpc0Zyb3plbikgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKHRhcmdldHMubGVuZ3RoID4gMCk7CgogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykgewogICAgICByZXF1aXJlKHRhcmdldHNbaV0gIT0gMHgwKTsKICAgICAgZnJvemVuQWNjb3VudFt0YXJnZXRzW2ldXSA9IGlzRnJvemVuOwogICAgICBGcm96ZW5GdW5kcyh0YXJnZXRzW2ldLCBpc0Zyb3plbik7CiAgICB9CiAgfQoKICAvKioKICAgKiBAZGV2IFByZXZlbnQgdGFyZ2V0cyBmcm9tIHNlbmRpbmcgb3IgcmVjZWl2aW5nIHRva2VucyBieSBzZXR0aW5nIFVuaXggdGltZXMKICAgKiBAcGFyYW0gdGFyZ2V0cyBBZGRyZXNzZXMgdG8gYmUgbG9ja2VkIGZ1bmRzCiAgICogQHBhcmFtIHVuaXhUaW1lcyBVbml4IHRpbWVzIHdoZW4gbG9ja2luZyB1cCB3aWxsIGJlIGZpbmlzaGVkCiAgICovCiAgZnVuY3Rpb24gbG9ja3VwQWNjb3VudHMoYWRkcmVzc1tdIHRhcmdldHMsIHVpbnRbXSB1bml4VGltZXMpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZSh0YXJnZXRzLmxlbmd0aCA+IDAgJiYgdGFyZ2V0cy5sZW5ndGggPT0gdW5peFRpbWVzLmxlbmd0aCk7CgogICAgZm9yKHVpbnQgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKXsKICAgICAgcmVxdWlyZSh1bmxvY2tVbml4VGltZVt0YXJnZXRzW2ldXSA8IHVuaXhUaW1lc1tpXSk7CiAgICAgIHVubG9ja1VuaXhUaW1lW3RhcmdldHNbaV1dID0gdW5peFRpbWVzW2ldOwogICAgICBMb2NrZWRGdW5kcyh0YXJnZXRzW2ldLCB1bml4VGltZXNbaV0pOwogICAgfQogIH0KCiAgLyoqCiAgICogQGRldiBCdXJucyBhIHNwZWNpZmljIGFtb3VudCBvZiB0b2tlbnMuCiAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCBidXJuIHRoZSB0b2tlbnMuCiAgICogQHBhcmFtIF91bml0QW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgYnVybmVkLgogICAqLwogIGZ1bmN0aW9uIGJ1cm4oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdW5pdEFtb3VudCkgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKF91bml0QW1vdW50ID4gMCAmJiBiYWxhbmNlT2YoX2Zyb20pID49IF91bml0QW1vdW50KTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBTYWZlTWF0aC5zdWIoYmFsYW5jZXNbX2Zyb21dLCBfdW5pdEFtb3VudCk7CiAgICB0b3RhbFN1cHBseSA9IFNhZmVNYXRoLnN1Yih0b3RhbFN1cHBseSwgX3VuaXRBbW91bnQpOwogICAgQnVybihfZnJvbSwgX3VuaXRBbW91bnQpOwogIH0KCiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBtaW50IHRva2VucwogICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIG1pbnRlZCB0b2tlbnMuCiAgICogQHBhcmFtIF91bml0QW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIG1pbnQuCiAgICovCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfdW5pdEFtb3VudCkgb25seU93bmVyIGNhbk1pbnQgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3VuaXRBbW91bnQgPiAwKTsKCiAgICB0b3RhbFN1cHBseSA9IFNhZmVNYXRoLmFkZCh0b3RhbFN1cHBseSwgX3VuaXRBbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IFNhZmVNYXRoLmFkZChiYWxhbmNlc1tfdG9dLCBfdW5pdEFtb3VudCk7CiAgICBNaW50KF90bywgX3VuaXRBbW91bnQpOwogICAgYnl0ZXMgbWVtb3J5IGVtcHR5OwogICAgVHJhbnNmZXIoYWRkcmVzcygwKSwgX3RvLCBfdW5pdEFtb3VudCwgZW1wdHkpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIHN0b3AgbWludGluZyBuZXcgdG9rZW5zLgogICAqLwogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBvbmx5T3duZXIgY2FuTWludCBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgIE1pbnRGaW5pc2hlZCgpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGRpc3RyaWJ1dGUgdG9rZW5zIHRvIHRoZSBsaXN0IG9mIGFkZHJlc3NlcyBieSB0aGUgcHJvdmlkZWQgYW1vdW50CiAgICovCiAgZnVuY3Rpb24gZGlzdHJpYnV0ZVRva2VucyhhZGRyZXNzW10gYWRkcmVzc2VzLCB1aW50MjU2IGFtb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoCiAgICAgIGFtb3VudCA+IDAKICAgICAgJiYgYWRkcmVzc2VzLmxlbmd0aCA+IDAKICAgICAgJiYgZnJvemVuQWNjb3VudFttc2cuc2VuZGVyXSA9PSBmYWxzZQogICAgICAmJiBub3cgPiB1bmxvY2tVbml4VGltZVttc2cuc2VuZGVyXQogICAgKTsKCiAgICBhbW91bnQgPSBTYWZlTWF0aC5tdWwoYW1vdW50LCAxZTgpOwogICAgdWludDI1NiB0b3RhbEFtb3VudCA9IFNhZmVNYXRoLm11bChhbW91bnQsIGFkZHJlc3Nlcy5sZW5ndGgpOwogICAgcmVxdWlyZShiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSB0b3RhbEFtb3VudCk7CgogICAgYnl0ZXMgbWVtb3J5IGVtcHR5OwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgYWRkcmVzc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHJlcXVpcmUoCiAgICAgICAgYWRkcmVzc2VzW2ldICE9IDB4MAogICAgICAgICYmIGZyb3plbkFjY291bnRbYWRkcmVzc2VzW2ldXSA9PSBmYWxzZQogICAgICAgICYmIG5vdyA+IHVubG9ja1VuaXhUaW1lW2FkZHJlc3Nlc1tpXV0KICAgICAgKTsKCiAgICAgIGJhbGFuY2VzW2FkZHJlc3Nlc1tpXV0gPSBTYWZlTWF0aC5hZGQoYmFsYW5jZXNbYWRkcmVzc2VzW2ldXSwgYW1vdW50KTsKICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgYWRkcmVzc2VzW2ldLCBhbW91bnQsIGVtcHR5KTsKICAgIH0KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gU2FmZU1hdGguc3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCB0b3RhbEFtb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY29sbGVjdCB0b2tlbnMgZnJvbSB0aGUgbGlzdCBvZiBhZGRyZXNzZXMKICAgKi8KICBmdW5jdGlvbiBjb2xsZWN0VG9rZW5zKGFkZHJlc3NbXSBhZGRyZXNzZXMsIHVpbnRbXSBhbW91bnRzKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoYWRkcmVzc2VzLmxlbmd0aCA+IDAgJiYgYWRkcmVzc2VzLmxlbmd0aCA9PSBhbW91bnRzLmxlbmd0aCk7CgogICAgdWludDI1NiB0b3RhbEFtb3VudCA9IDA7CgogICAgYnl0ZXMgbWVtb3J5IGVtcHR5OwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgYWRkcmVzc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHJlcXVpcmUoCiAgICAgICAgYW1vdW50c1tpXSA+IDAKICAgICAgICAmJiBhZGRyZXNzZXNbaV0gIT0gMHgwCiAgICAgICAgJiYgZnJvemVuQWNjb3VudFthZGRyZXNzZXNbaV1dID09IGZhbHNlCiAgICAgICAgJiYgbm93ID4gdW5sb2NrVW5peFRpbWVbYWRkcmVzc2VzW2ldXQogICAgICApOwoKICAgICAgYW1vdW50c1tpXSA9IFNhZmVNYXRoLm11bChhbW91bnRzW2ldLCAxZTgpOwogICAgICByZXF1aXJlKGJhbGFuY2VzW2FkZHJlc3Nlc1tpXV0gPj0gYW1vdW50c1tpXSk7CiAgICAgIGJhbGFuY2VzW2FkZHJlc3Nlc1tpXV0gPSBTYWZlTWF0aC5zdWIoYmFsYW5jZXNbYWRkcmVzc2VzW2ldXSwgYW1vdW50c1tpXSk7CiAgICAgIHRvdGFsQW1vdW50ID0gU2FmZU1hdGguYWRkKHRvdGFsQW1vdW50LCBhbW91bnRzW2ldKTsKICAgICAgVHJhbnNmZXIoYWRkcmVzc2VzW2ldLCBtc2cuc2VuZGVyLCBhbW91bnRzW2ldLCBlbXB0eSk7CiAgICB9CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IFNhZmVNYXRoLmFkZChiYWxhbmNlc1ttc2cuc2VuZGVyXSwgdG90YWxBbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBzZXREaXN0cmlidXRlQW1vdW50KHVpbnQyNTYgX3VuaXRBbW91bnQpIG9ubHlPd25lciBwdWJsaWMgewogICAgZGlzdHJpYnV0ZUFtb3VudCA9IF91bml0QW1vdW50OwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBkaXN0cmlidXRlIHRva2VucyB0byB0aGUgbXNnLnNlbmRlciBhdXRvbWF0aWNhbGx5CiAgICogICAgICBJZiBkaXN0cmlidXRlQW1vdW50IGlzIDAsIHRoaXMgZnVuY3Rpb24gZG9lc24ndCB3b3JrCiAgICovCiAgZnVuY3Rpb24gYXV0b0Rpc3RyaWJ1dGUoKSBwYXlhYmxlIHB1YmxpYyB7CiAgICByZXF1aXJlKAogICAgICBkaXN0cmlidXRlQW1vdW50ID4gMAogICAgICAmJiBiYWxhbmNlT2Yob3duZXIpID49IGRpc3RyaWJ1dGVBbW91bnQKICAgICAgJiYgZnJvemVuQWNjb3VudFttc2cuc2VuZGVyXSA9PSBmYWxzZQogICAgICAmJiBub3cgPiB1bmxvY2tVbml4VGltZVttc2cuc2VuZGVyXQogICAgKTsKICAgIGlmIChtc2cudmFsdWUgPiAwKSBvd25lci50cmFuc2Zlcihtc2cudmFsdWUpOwoKICAgIGJ5dGVzIG1lbW9yeSBlbXB0eTsKICAgIGJhbGFuY2VzW293bmVyXSA9IFNhZmVNYXRoLnN1YihiYWxhbmNlc1tvd25lcl0sIGRpc3RyaWJ1dGVBbW91bnQpOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBTYWZlTWF0aC5hZGQoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIGRpc3RyaWJ1dGVBbW91bnQpOwogICAgVHJhbnNmZXIob3duZXIsIG1zZy5zZW5kZXIsIGRpc3RyaWJ1dGVBbW91bnQsIGVtcHR5KTsKICB9CgogIC8qKgogICAqIEBkZXYgdG9rZW4gZmFsbGJhY2sgZnVuY3Rpb24KICAgKi8KICBmdW5jdGlvbigpIHBheWFibGUgcHVibGljIHsKICAgIGF1dG9EaXN0cmlidXRlKCk7CiAgfQp9'.
	

]
