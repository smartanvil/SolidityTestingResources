Class {
	#name : #SRT105d97ef2e723f1cfb24519bc6ff15a6d091a3f1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT105d97ef2e723f1cfb24519bc6ff15a6d091a3f1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmIChhID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBhIC8gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9Cgpjb250cmFjdCBFUkMyMCB7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGV4dGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX29sZCwgdWludDI1NiBfbmV3KSBleHRlcm5hbCByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwoKICAgIGZ1bmN0aW9uIEVSQzIwKCkgaW50ZXJuYWwgewogICAgfQp9CgoKbGlicmFyeSBSaW5nTGlzdCB7CgogICAgYWRkcmVzcyBjb25zdGFudCBOVUxMID0gMHgwOwogICAgYWRkcmVzcyBjb25zdGFudCBIRUFEID0gMHgwOwogICAgYm9vbCBjb25zdGFudCBQUkVWID0gZmFsc2U7CiAgICBib29sIGNvbnN0YW50IE5FWFQgPSB0cnVlOwoKICAgIHN0cnVjdCBMaW5rZWRMaXN0ewogICAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYm9vbCA9PiBhZGRyZXNzKSkgbGlzdDsKICAgIH0KCiAgICAvLy8gQGRldiByZXR1cm5zIHRydWUgaWYgdGhlIGxpc3QgZXhpc3RzCiAgICAvLy8gQHBhcmFtIHNlbGYgc3RvcmVkIGxpbmtlZCBsaXN0IGZyb20gY29udHJhY3QKICAgIGZ1bmN0aW9uIGxpc3RFeGlzdHMoTGlua2VkTGlzdCBzdG9yYWdlIHNlbGYpCiAgICBpbnRlcm5hbAogICAgdmlldyByZXR1cm5zIChib29sKQogICAgewogICAgICAgIC8vIGlmIHRoZSBoZWFkIG5vZGVzIHByZXZpb3VzIG9yIG5leHQgcG9pbnRlcnMgYm90aCBwb2ludCB0byBpdHNlbGYsIHRoZW4gdGhlcmUgYXJlIG5vIGl0ZW1zIGluIHRoZSBsaXN0CiAgICAgICAgaWYgKHNlbGYubGlzdFtIRUFEXVtQUkVWXSAhPSBIRUFEIHx8IHNlbGYubGlzdFtIRUFEXVtORVhUXSAhPSBIRUFEKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIEBkZXYgcmV0dXJucyB0cnVlIGlmIHRoZSBub2RlIGV4aXN0cwogICAgLy8vIEBwYXJhbSBzZWxmIHN0b3JlZCBsaW5rZWQgbGlzdCBmcm9tIGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9ub2RlIGEgbm9kZSB0byBzZWFyY2ggZm9yCiAgICBmdW5jdGlvbiBub2RlRXhpc3RzKExpbmtlZExpc3Qgc3RvcmFnZSBzZWxmLCBhZGRyZXNzIF9ub2RlKQogICAgaW50ZXJuYWwKICAgIHZpZXcgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBpZiAoc2VsZi5saXN0W19ub2RlXVtQUkVWXSA9PSBIRUFEICYmIHNlbGYubGlzdFtfbm9kZV1bTkVYVF0gPT0gSEVBRCkgewogICAgICAgICAgICBpZiAoc2VsZi5saXN0W0hFQURdW05FWFRdID09IF9ub2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gdGhlIGxpc3QKICAgIC8vLyBAcGFyYW0gc2VsZiBzdG9yZWQgbGlua2VkIGxpc3QgZnJvbSBjb250cmFjdAogICAgZnVuY3Rpb24gc2l6ZU9mKExpbmtlZExpc3Qgc3RvcmFnZSBzZWxmKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYgbnVtRWxlbWVudHMpIHsKICAgICAgICBib29sIGV4aXN0czsKICAgICAgICBhZGRyZXNzIGk7CiAgICAgICAgKGV4aXN0cyxpKSA9IGdldEFkamFjZW50KHNlbGYsIEhFQUQsIE5FWFQpOwogICAgICAgIHdoaWxlIChpICE9IEhFQUQpIHsKICAgICAgICAgICAgKGV4aXN0cyxpKSA9IGdldEFkamFjZW50KHNlbGYsIGksIE5FWFQpOwogICAgICAgICAgICBudW1FbGVtZW50cysrOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICB9CgogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgbGlua3Mgb2YgYSBub2RlIGFzIGEgdHVwbGUKICAgIC8vLyBAcGFyYW0gc2VsZiBzdG9yZWQgbGlua2VkIGxpc3QgZnJvbSBjb250cmFjdAogICAgLy8vIEBwYXJhbSBfbm9kZSBpZCBvZiB0aGUgbm9kZSB0byBnZXQKICAgIGZ1bmN0aW9uIGdldE5vZGUoTGlua2VkTGlzdCBzdG9yYWdlIHNlbGYsIGFkZHJlc3MgX25vZGUpCiAgICBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wsIGFkZHJlc3MsIGFkZHJlc3MpCiAgICB7CiAgICAgICAgaWYgKCFub2RlRXhpc3RzKHNlbGYsX25vZGUpKSB7CiAgICAgICAgICAgIHJldHVybiAoZmFsc2UsMHgwLDB4MCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuICh0cnVlLHNlbGYubGlzdFtfbm9kZV1bUFJFVl0sIHNlbGYubGlzdFtfbm9kZV1bTkVYVF0pOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSBsaW5rIG9mIGEgbm9kZSBgX25vZGVgIGluIGRpcmVjdGlvbiBgX2RpcmVjdGlvbmAuCiAgICAvLy8gQHBhcmFtIHNlbGYgc3RvcmVkIGxpbmtlZCBsaXN0IGZyb20gY29udHJhY3QKICAgIC8vLyBAcGFyYW0gX25vZGUgaWQgb2YgdGhlIG5vZGUgdG8gc3RlcCBmcm9tCiAgICAvLy8gQHBhcmFtIF9kaXJlY3Rpb24gZGlyZWN0aW9uIHRvIHN0ZXAgaW4KICAgIGZ1bmN0aW9uIGdldEFkamFjZW50KExpbmtlZExpc3Qgc3RvcmFnZSBzZWxmLCBhZGRyZXNzIF9ub2RlLCBib29sIF9kaXJlY3Rpb24pCiAgICBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wsIGFkZHJlc3MpCiAgICB7CiAgICAgICAgaWYgKCFub2RlRXhpc3RzKHNlbGYsX25vZGUpKSB7CiAgICAgICAgICAgIHJldHVybiAoZmFsc2UsMHgwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gKHRydWUsc2VsZi5saXN0W19ub2RlXVtfZGlyZWN0aW9uXSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBAZGV2IENhbiBiZSB1c2VkIGJlZm9yZSBgaW5zZXJ0YCB0byBidWlsZCBhbiBvcmRlcmVkIGxpc3QKICAgIC8vLyBAcGFyYW0gc2VsZiBzdG9yZWQgbGlua2VkIGxpc3QgZnJvbSBjb250cmFjdAogICAgLy8vIEBwYXJhbSBfbm9kZSBhbiBleGlzdGluZyBub2RlIHRvIHNlYXJjaCBmcm9tLCBlLmcuIEhFQUQuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSB2YWx1ZSB0byBzZWVrCiAgICAvLy8gQHBhcmFtIF9kaXJlY3Rpb24gZGlyZWN0aW9uIHRvIHNlZWsgaW4KICAgIC8vICBAcmV0dXJuIG5leHQgZmlyc3Qgbm9kZSBiZXlvbmQgJ19ub2RlJyBpbiBkaXJlY3Rpb24gYF9kaXJlY3Rpb25gCiAgICBmdW5jdGlvbiBnZXRTb3J0ZWRTcG90KExpbmtlZExpc3Qgc3RvcmFnZSBzZWxmLCBhZGRyZXNzIF9ub2RlLCBhZGRyZXNzIF92YWx1ZSwgYm9vbCBfZGlyZWN0aW9uKQogICAgaW50ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzKQogICAgewogICAgICAgIGlmIChzaXplT2Yoc2VsZikgPT0gMCkgeyByZXR1cm4gMHgwOyB9CiAgICAgICAgcmVxdWlyZSgoX25vZGUgPT0gMHgwKSB8fCBub2RlRXhpc3RzKHNlbGYsX25vZGUpKTsKICAgICAgICBib29sIGV4aXN0czsKICAgICAgICBhZGRyZXNzIG5leHQ7CiAgICAgICAgKGV4aXN0cyxuZXh0KSA9IGdldEFkamFjZW50KHNlbGYsIF9ub2RlLCBfZGlyZWN0aW9uKTsKICAgICAgICB3aGlsZSAgKChuZXh0ICE9IDB4MCkgJiYgKF92YWx1ZSAhPSBuZXh0KSAmJiAoKF92YWx1ZSA8IG5leHQpICE9IF9kaXJlY3Rpb24pKSBuZXh0ID0gc2VsZi5saXN0W25leHRdW19kaXJlY3Rpb25dOwogICAgICAgIHJldHVybiBuZXh0OwogICAgfQoKICAgIC8vLyBAZGV2IENyZWF0ZXMgYSBiaWRpcmVjdGlvbmFsIGxpbmsgYmV0d2VlbiB0d28gbm9kZXMgb24gZGlyZWN0aW9uIGBfZGlyZWN0aW9uYAogICAgLy8vIEBwYXJhbSBzZWxmIHN0b3JlZCBsaW5rZWQgbGlzdCBmcm9tIGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9ub2RlIGZpcnN0IG5vZGUgZm9yIGxpbmtpbmcKICAgIC8vLyBAcGFyYW0gX2xpbmsgIG5vZGUgdG8gbGluayB0byBpbiB0aGUgX2RpcmVjdGlvbgogICAgZnVuY3Rpb24gY3JlYXRlTGluayhMaW5rZWRMaXN0IHN0b3JhZ2Ugc2VsZiwgYWRkcmVzcyBfbm9kZSwgYWRkcmVzcyBfbGluaywgYm9vbCBfZGlyZWN0aW9uKSBpbnRlcm5hbCAgewogICAgICAgIHNlbGYubGlzdFtfbGlua11bIV9kaXJlY3Rpb25dID0gX25vZGU7CiAgICAgICAgc2VsZi5saXN0W19ub2RlXVtfZGlyZWN0aW9uXSA9IF9saW5rOwogICAgfQoKICAgIC8vLyBAZGV2IEluc2VydCBub2RlIGBfbmV3YCBiZXNpZGUgZXhpc3Rpbmcgbm9kZSBgX25vZGVgIGluIGRpcmVjdGlvbiBgX2RpcmVjdGlvbmAuCiAgICAvLy8gQHBhcmFtIHNlbGYgc3RvcmVkIGxpbmtlZCBsaXN0IGZyb20gY29udHJhY3QKICAgIC8vLyBAcGFyYW0gX25vZGUgZXhpc3Rpbmcgbm9kZQogICAgLy8vIEBwYXJhbSBfbmV3ICBuZXcgbm9kZSB0byBpbnNlcnQKICAgIC8vLyBAcGFyYW0gX2RpcmVjdGlvbiBkaXJlY3Rpb24gdG8gaW5zZXJ0IG5vZGUgaW4KICAgIGZ1bmN0aW9uIGluc2VydChMaW5rZWRMaXN0IHN0b3JhZ2Ugc2VsZiwgYWRkcmVzcyBfbm9kZSwgYWRkcmVzcyBfbmV3LCBib29sIF9kaXJlY3Rpb24pIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZighbm9kZUV4aXN0cyhzZWxmLF9uZXcpICYmIG5vZGVFeGlzdHMoc2VsZixfbm9kZSkpIHsKICAgICAgICAgICAgYWRkcmVzcyBjID0gc2VsZi5saXN0W19ub2RlXVtfZGlyZWN0aW9uXTsKICAgICAgICAgICAgY3JlYXRlTGluayhzZWxmLCBfbm9kZSwgX25ldywgX2RpcmVjdGlvbik7CiAgICAgICAgICAgIGNyZWF0ZUxpbmsoc2VsZiwgX25ldywgYywgX2RpcmVjdGlvbik7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIEBkZXYgcmVtb3ZlcyBhbiBlbnRyeSBmcm9tIHRoZSBsaW5rZWQgbGlzdAogICAgLy8vIEBwYXJhbSBzZWxmIHN0b3JlZCBsaW5rZWQgbGlzdCBmcm9tIGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9ub2RlIG5vZGUgdG8gcmVtb3ZlIGZyb20gdGhlIGxpc3QKICAgIGZ1bmN0aW9uIHJlbW92ZShMaW5rZWRMaXN0IHN0b3JhZ2Ugc2VsZiwgYWRkcmVzcyBfbm9kZSkgaW50ZXJuYWwgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIGlmICgoX25vZGUgPT0gTlVMTCkgfHwgKCFub2RlRXhpc3RzKHNlbGYsX25vZGUpKSkgeyByZXR1cm4gMHgwOyB9CiAgICAgICAgY3JlYXRlTGluayhzZWxmLCBzZWxmLmxpc3RbX25vZGVdW1BSRVZdLCBzZWxmLmxpc3RbX25vZGVdW05FWFRdLCBORVhUKTsKICAgICAgICBkZWxldGUgc2VsZi5saXN0W19ub2RlXVtQUkVWXTsKICAgICAgICBkZWxldGUgc2VsZi5saXN0W19ub2RlXVtORVhUXTsKICAgICAgICByZXR1cm4gX25vZGU7CiAgICB9CgogICAgLy8vIEBkZXYgcHVzaGVzIGFuIGVucnR5IHRvIHRoZSBoZWFkIG9mIHRoZSBsaW5rZWQgbGlzdAogICAgLy8vIEBwYXJhbSBzZWxmIHN0b3JlZCBsaW5rZWQgbGlzdCBmcm9tIGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9ub2RlIG5ldyBlbnRyeSB0byBwdXNoIHRvIHRoZSBoZWFkCiAgICAvLy8gQHBhcmFtIF9kaXJlY3Rpb24gcHVzaCB0byB0aGUgaGVhZCAoTkVYVCkgb3IgdGFpbCAoUFJFVikKICAgIGZ1bmN0aW9uIHB1c2goTGlua2VkTGlzdCBzdG9yYWdlIHNlbGYsIGFkZHJlc3MgX25vZGUsIGJvb2wgX2RpcmVjdGlvbikgaW50ZXJuYWwgIHsKICAgICAgICBpbnNlcnQoc2VsZiwgSEVBRCwgX25vZGUsIF9kaXJlY3Rpb24pOwogICAgfQoKICAgIC8vLyBAZGV2IHBvcHMgdGhlIGZpcnN0IGVudHJ5IGZyb20gdGhlIGxpbmtlZCBsaXN0CiAgICAvLy8gQHBhcmFtIHNlbGYgc3RvcmVkIGxpbmtlZCBsaXN0IGZyb20gY29udHJhY3QKICAgIC8vLyBAcGFyYW0gX2RpcmVjdGlvbiBwb3AgZnJvbSB0aGUgaGVhZCAoTkVYVCkgb3IgdGhlIHRhaWwgKFBSRVYpCiAgICBmdW5jdGlvbiBwb3AoTGlua2VkTGlzdCBzdG9yYWdlIHNlbGYsIGJvb2wgX2RpcmVjdGlvbikgaW50ZXJuYWwgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIGJvb2wgZXhpc3RzOwogICAgICAgIGFkZHJlc3MgYWRqOwoKICAgICAgICAoZXhpc3RzLGFkaikgPSBnZXRBZGphY2VudChzZWxmLCBIRUFELCBfZGlyZWN0aW9uKTsKCiAgICAgICAgcmV0dXJuIHJlbW92ZShzZWxmLCBhZGopOwogICAgfQp9Cgpjb250cmFjdCBVbWthVG9rZW4gaXMgRVJDMjAgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICB1c2luZyBSaW5nTGlzdCBmb3IgUmluZ0xpc3QuTGlua2VkTGlzdDsKCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBib29sICAgIHB1YmxpYyAgICAgICAgICAgICAgcGF1c2VkICAgICAgICAgPSBmYWxzZTsKICAgIGJvb2wgICAgcHVibGljICAgICAgICAgICAgICBjb250cmFjdEVuYWJsZSA9IHRydWU7CgogICAgdWludDI1NiBwcml2YXRlICAgICAgICAgICAgIHN1bW1hcnlTdXBwbHk7CgogICAgc3RyaW5nICBwdWJsaWMgICAgICAgICAgICAgIG5hbWUgPSAiIjsKICAgIHN0cmluZyAgcHVibGljICAgICAgICAgICAgICBzeW1ib2wgPSAiIjsKICAgIHVpbnQ4ICAgcHVibGljICAgICAgICAgICAgICBkZWNpbWFscyA9IDA7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpICAgICAgICAgICAgICAgICAgICAgIHByaXZhdGUgICBhY2NvdW50czsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBzdHJpbmcpICAgICAgICAgICAgICAgICAgICAgICBwcml2YXRlICAgdW1rYUFkZHJlc3NlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwcml2YXRlICAgYWxsb3dlZDsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50OCkgICAgICAgICAgICAgICAgICAgICAgICBwcml2YXRlICAgZ3JvdXA7CiAgICBtYXBwaW5nKGJ5dGVzMzIgPT4gdWludDI1NikgICAgICAgICAgICAgICAgICAgICAgcHJpdmF0ZSAgIGRpc3RyaWJ1dGlvbjsKCiAgICBSaW5nTGlzdC5MaW5rZWRMaXN0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpdmF0ZSAgIGhvbGRlcnM7CgogICAgc3RydWN0IGdyb3VwUG9saWN5IHsKICAgICAgICB1aW50OCBfZGVmYXVsdDsKICAgICAgICB1aW50OCBfYmFja2VuZDsKICAgICAgICB1aW50OCBfYWRtaW47CiAgICAgICAgdWludDggX21pZ3JhdGlvbjsKICAgICAgICB1aW50OCBfc3Vib3duZXI7CiAgICAgICAgdWludDggX293bmVyOwogICAgfQoKICAgIGdyb3VwUG9saWN5IHB1YmxpYyBjdXJyZW50U3RhdGUgPSBncm91cFBvbGljeSgwLCAzLCA0LCA5LCAyLCA5KTsKCiAgICBldmVudCBFdlRva2VuQWRkKHVpbnQyNTYgX3ZhbHVlLCB1aW50MjU2IF9sYXN0U3VwcGx5KTsKICAgIGV2ZW50IEV2VG9rZW5SbSh1aW50MjU2IF9kZWx0YSwgdWludDI1NiBfdmFsdWUsIHVpbnQyNTYgX2xhc3RTdXBwbHkpOwogICAgZXZlbnQgRXZHcm91cENoYW5nZWQoYWRkcmVzcyBfYWRkcmVzcywgdWludDggX29sZGdyb3VwLCB1aW50OCBfbmV3Z3JvdXApOwogICAgZXZlbnQgRXZNaWdyYXRpb24oYWRkcmVzcyBfYWRkcmVzcywgdWludDI1NiBfYmFsYW5jZSwgdWludDI1NiBfc2VjcmV0KTsKICAgIGV2ZW50IFBhdXNlKCk7CiAgICBldmVudCBVbnBhdXNlKCk7CgogICAgZnVuY3Rpb24gVW1rYVRva2VuKHN0cmluZyBfbmFtZSwgc3RyaW5nIF9zeW1ib2wsIHVpbnQ4IF9kZWNpbWFscywgdWludDI1NiBfc3RhcnRUb2tlbnMpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwoKICAgICAgICBncm91cFtvd25lcl0gPSBjdXJyZW50U3RhdGUuX293bmVyOwoKICAgICAgICBhY2NvdW50c1ttc2cuc2VuZGVyXSAgPSBfc3RhcnRUb2tlbnM7CgogICAgICAgIGhvbGRlcnMucHVzaChtc2cuc2VuZGVyLCB0cnVlKTsKICAgICAgICBzdW1tYXJ5U3VwcGx5ICAgID0gX3N0YXJ0VG9rZW5zOwogICAgICAgIG5hbWUgPSBfbmFtZTsKICAgICAgICBzeW1ib2wgPSBfc3ltYm9sOwogICAgICAgIGRlY2ltYWxzID0gX2RlY2ltYWxzOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICAgICBhc3NlcnQobXNnLmRhdGEubGVuZ3RoID49IHNpemUgKyA0KTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG1pbkdyb3VwKGludCBfcmVxdWlyZSkgewogICAgICAgIHJlcXVpcmUoZ3JvdXBbbXNnLnNlbmRlcl0gPj0gX3JlcXVpcmUpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUdyb3VwKGludCBfcmVxdWlyZSkgewogICAgICAgIHJlcXVpcmUoZ3JvdXBbbXNnLnNlbmRlcl0gPT0gX3JlcXVpcmUpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgICAgICByZXF1aXJlKCFwYXVzZWQgfHwgZ3JvdXBbbXNnLnNlbmRlcl0gPj0gY3VycmVudFN0YXRlLl9iYWNrZW5kKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CiAgICAgICAgcmVxdWlyZShwYXVzZWQpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gc2VydmljZVBhdXNlKCkgbWluR3JvdXAoY3VycmVudFN0YXRlLl9hZG1pbikgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgICAgIHBhdXNlZCA9IHRydWU7CiAgICAgICAgUGF1c2UoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXJ2aWNlVW5wYXVzZSgpIG1pbkdyb3VwKGN1cnJlbnRTdGF0ZS5fYWRtaW4pIHdoZW5QYXVzZWQgcHVibGljIHsKICAgICAgICBwYXVzZWQgPSBmYWxzZTsKICAgICAgICBVbnBhdXNlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2VydmljZUdyb3VwQ2hhbmdlKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQ4IF9ncm91cCkgbWluR3JvdXAoY3VycmVudFN0YXRlLl9hZG1pbikgZXh0ZXJuYWwgcmV0dXJucyh1aW50OCkgewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3MgIT0gYWRkcmVzcygwKSk7CgogICAgICAgIHVpbnQ4IG9sZCA9IGdyb3VwW19hZGRyZXNzXTsKICAgICAgICBpZihvbGQgPD0gY3VycmVudFN0YXRlLl9hZG1pbikgewogICAgICAgICAgICBncm91cFtfYWRkcmVzc10gPSBfZ3JvdXA7CiAgICAgICAgICAgIEV2R3JvdXBDaGFuZ2VkKF9hZGRyZXNzLCBvbGQsIF9ncm91cCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBncm91cFtfYWRkcmVzc107CiAgICB9CgogICAgZnVuY3Rpb24gc2VydmljZVRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG1pbkdyb3VwKGN1cnJlbnRTdGF0ZS5fb3duZXIpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICBncm91cFtuZXdPd25lcl0gPSBjdXJyZW50U3RhdGUuX3N1Ym93bmVyOwogICAgICAgIGdyb3VwW21zZy5zZW5kZXJdID0gY3VycmVudFN0YXRlLl9zdWJvd25lcjsKICAgICAgICBFdkdyb3VwQ2hhbmdlZChuZXdPd25lciwgY3VycmVudFN0YXRlLl9vd25lciwgY3VycmVudFN0YXRlLl9zdWJvd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2VydmljZUNsYWltT3duZXJzaGlwKCkgb25seUdyb3VwKGN1cnJlbnRTdGF0ZS5fc3Vib3duZXIpIGV4dGVybmFsIHsKICAgICAgICBhZGRyZXNzIHRlbXAgPSBvd25lcjsKICAgICAgICB1aW50MjU2IHZhbHVlID0gYWNjb3VudHNbb3duZXJdOwoKICAgICAgICBhY2NvdW50c1tvd25lcl0gPSBhY2NvdW50c1tvd25lcl0uc3ViKHZhbHVlKTsKICAgICAgICBob2xkZXJzLnJlbW92ZShvd25lcik7CiAgICAgICAgYWNjb3VudHNbbXNnLnNlbmRlcl0gPSBhY2NvdW50c1ttc2cuc2VuZGVyXS5hZGQodmFsdWUpOwogICAgICAgIGhvbGRlcnMucHVzaChtc2cuc2VuZGVyLCB0cnVlKTsKCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwoKICAgICAgICBkZWxldGUgZ3JvdXBbdGVtcF07CiAgICAgICAgZ3JvdXBbbXNnLnNlbmRlcl0gPSBjdXJyZW50U3RhdGUuX293bmVyOwoKICAgICAgICBFdkdyb3VwQ2hhbmdlZChtc2cuc2VuZGVyLCBjdXJyZW50U3RhdGUuX3N1Ym93bmVyLCBjdXJyZW50U3RhdGUuX293bmVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXJ2aWNlSW5jcmVhc2VCYWxhbmNlKGFkZHJlc3MgX3dobywgdWludDI1NiBfdmFsdWUpIG1pbkdyb3VwKGN1cnJlbnRTdGF0ZS5fYWRtaW4pIGV4dGVybmFsIHJldHVybnMoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3dobyAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwoKICAgICAgICBhY2NvdW50c1tfd2hvXSA9IGFjY291bnRzW193aG9dLmFkZChfdmFsdWUpOwogICAgICAgIHN1bW1hcnlTdXBwbHkgPSBzdW1tYXJ5U3VwcGx5LmFkZChfdmFsdWUpOwogICAgICAgIGhvbGRlcnMucHVzaChfd2hvLCB0cnVlKTsKICAgICAgICBFdlRva2VuQWRkKF92YWx1ZSwgc3VtbWFyeVN1cHBseSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2VydmljZURlY3JlYXNlQmFsYW5jZShhZGRyZXNzIF93aG8sIHVpbnQyNTYgX3ZhbHVlKSBtaW5Hcm91cChjdXJyZW50U3RhdGUuX2FkbWluKSBleHRlcm5hbCByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF93aG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKICAgICAgICByZXF1aXJlKGFjY291bnRzW193aG9dID49IF92YWx1ZSk7CgogICAgICAgIGFjY291bnRzW193aG9dID0gYWNjb3VudHNbX3dob10uc3ViKF92YWx1ZSk7CiAgICAgICAgc3VtbWFyeVN1cHBseSA9IHN1bW1hcnlTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICAgICAgaWYoYWNjb3VudHNbX3dob10gPT0gMCl7CiAgICAgICAgICAgIGhvbGRlcnMucmVtb3ZlKF93aG8pOwogICAgICAgIH0KICAgICAgICBFdlRva2VuUm0oYWNjb3VudHNbX3dob10sIF92YWx1ZSwgc3VtbWFyeVN1cHBseSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2VydmljZVJlZGlyZWN0KGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgbWluR3JvdXAoY3VycmVudFN0YXRlLl9hZG1pbikgZXh0ZXJuYWwgcmV0dXJucyhib29sKXsKICAgICAgICByZXF1aXJlKF9mcm9tICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CiAgICAgICAgcmVxdWlyZShhY2NvdW50c1tfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKF9mcm9tICE9IF90byk7CgogICAgICAgIGFjY291bnRzW19mcm9tXSA9IGFjY291bnRzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBpZihhY2NvdW50c1tfZnJvbV0gPT0gMCl7CiAgICAgICAgICAgIGhvbGRlcnMucmVtb3ZlKF9mcm9tKTsKICAgICAgICB9CiAgICAgICAgYWNjb3VudHNbX3RvXSA9IGFjY291bnRzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgaG9sZGVycy5wdXNoKF90bywgdHJ1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlcnZpY2VUb2tlbnNCdXJuKGFkZHJlc3MgX2FkZHJlc3MpIGV4dGVybmFsIG1pbkdyb3VwKGN1cnJlbnRTdGF0ZS5fYWRtaW4pIHJldHVybnModWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmVxdWlyZShfYWRkcmVzcyAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKGFjY291bnRzW19hZGRyZXNzXSA+IDApOwoKICAgICAgICB1aW50MjU2IHN1bSA9IGFjY291bnRzW19hZGRyZXNzXTsKICAgICAgICBhY2NvdW50c1tfYWRkcmVzc10gPSAwOwogICAgICAgIHN1bW1hcnlTdXBwbHkgPSBzdW1tYXJ5U3VwcGx5LnN1YihzdW0pOwogICAgICAgIGhvbGRlcnMucmVtb3ZlKF9hZGRyZXNzKTsKICAgICAgICByZXR1cm4gYWNjb3VudHNbX2FkZHJlc3NdOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlcnZpY2VUcmFzZmVyVG9EaXN0KGJ5dGVzMzIgX3RvLCB1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWwgbWluR3JvdXAoY3VycmVudFN0YXRlLl9hZG1pbikgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CiAgICAgICAgcmVxdWlyZShhY2NvdW50c1tvd25lcl0gPj0gX3ZhbHVlKTsKCiAgICAgICAgZGlzdHJpYnV0aW9uW190b10gPSBkaXN0cmlidXRpb25bX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBhY2NvdW50c1tvd25lcl0gPSBhY2NvdW50c1tvd25lcl0uc3ViKF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2VydmljZVRyYXNmZXJGcm9tRGlzdChieXRlczMyIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGV4dGVybmFsIG1pbkdyb3VwKGN1cnJlbnRTdGF0ZS5fYmFja2VuZCkgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CiAgICAgICAgcmVxdWlyZShkaXN0cmlidXRpb25bX2Zyb21dID49IF92YWx1ZSk7CgogICAgICAgIGFjY291bnRzW190b10gPSBhY2NvdW50c1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGhvbGRlcnMucHVzaChfdG8sIHRydWUpOwogICAgICAgIGRpc3RyaWJ1dGlvbltfZnJvbV0gPSBkaXN0cmlidXRpb25bX2Zyb21dLnN1YihfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEdyb3VwKGFkZHJlc3MgX2NoZWNrKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQ4IF9ncm91cCkgewogICAgICAgIHJldHVybiBncm91cFtfY2hlY2tdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJhbGFuY2VPZkRpc3QoYnl0ZXMzMiBfb2YpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnModWludDI1Nil7CiAgICAgICAgcmV0dXJuIGRpc3RyaWJ1dGlvbltfb2ZdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEhvbGRlcnNMZW5ndGgoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpewogICAgICAgIHJldHVybiBob2xkZXJzLnNpemVPZigpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEhvbGRlckxpbmsoYWRkcmVzcyBfaG9sZGVyKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKGJvb2wsIGFkZHJlc3MsIGFkZHJlc3MpewogICAgICAgIHJldHVybiBob2xkZXJzLmdldE5vZGUoX2hvbGRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VW1rYUFkZHJlc3MoYWRkcmVzcyBfd2hvKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKHN0cmluZyB1bWthQWRkcmVzcyl7CiAgICAgICAgcmV0dXJuIHVta2FBZGRyZXNzZXNbX3dob107CiAgICB9CgogICAgZnVuY3Rpb24gc2V0VW1rYUFkZHJlc3Moc3RyaW5nIF91bWthKSBtaW5Hcm91cChjdXJyZW50U3RhdGUuX2RlZmF1bHQpIHdoZW5Ob3RQYXVzZWQgZXh0ZXJuYWx7CiAgICAgICAgdW1rYUFkZHJlc3Nlc1ttc2cuc2VuZGVyXSA9IF91bWthOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDY0KSBtaW5Hcm91cChjdXJyZW50U3RhdGUuX2RlZmF1bHQpIHdoZW5Ob3RQYXVzZWQgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZSAoYWNjb3VudHNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKCiAgICAgICAgYWNjb3VudHNbbXNnLnNlbmRlcl0gPSBhY2NvdW50c1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBpZihhY2NvdW50c1ttc2cuc2VuZGVyXSA9PSAwKXsKICAgICAgICAgICAgaG9sZGVycy5yZW1vdmUobXNnLnNlbmRlcik7CiAgICAgICAgfQogICAgICAgIGFjY291bnRzW190b10gPSBhY2NvdW50c1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGhvbGRlcnMucHVzaChfdG8sIHRydWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDY0KSBtaW5Hcm91cChjdXJyZW50U3RhdGUuX2RlZmF1bHQpIHdoZW5Ob3RQYXVzZWQgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfZnJvbSAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBhY2NvdW50c1tfZnJvbV0pOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICAgICAgYWNjb3VudHNbX2Zyb21dID0gYWNjb3VudHNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIGlmKGFjY291bnRzW19mcm9tXSA9PSAwKXsKICAgICAgICAgICAgaG9sZGVycy5yZW1vdmUoX2Zyb20pOwogICAgICAgIH0KICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGFjY291bnRzW190b10gPSBhY2NvdW50c1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGhvbGRlcnMucHVzaChfdG8sIHRydWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9vbGQsIHVpbnQyNTYgX25ldykgb25seVBheWxvYWRTaXplKDY0KSBtaW5Hcm91cChjdXJyZW50U3RhdGUuX2RlZmF1bHQpIHdoZW5Ob3RQYXVzZWQgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSAoX29sZCA9PSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmVxdWlyZShfc3BlbmRlciAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfbmV3OwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfbmV3KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICBpZiAoX293bmVyID09IGFkZHJlc3MoMCkpCiAgICAgICAgICAgIHJldHVybiBhY2NvdW50c1ttc2cuc2VuZGVyXTsKICAgICAgICByZXR1cm4gYWNjb3VudHNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KSB7CiAgICAgICAgX3RvdGFsU3VwcGx5ID0gc3VtbWFyeVN1cHBseTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZXN0cm95KCkgbWluR3JvdXAoY3VycmVudFN0YXRlLl9vd25lcikgZXh0ZXJuYWwgewogICAgICAgIHNlbGZkZXN0cnVjdChtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXR0aW5nc1N3aXRjaFN0YXRlKCkgZXh0ZXJuYWwgbWluR3JvdXAoY3VycmVudFN0YXRlLl9vd25lcikgcmV0dXJucyAoYm9vbCBzdGF0ZSkgewoKICAgICAgICBpZihjb250cmFjdEVuYWJsZSkgewogICAgICAgICAgICBjdXJyZW50U3RhdGUuX2RlZmF1bHQgPSA5OwogICAgICAgICAgICBjdXJyZW50U3RhdGUuX21pZ3JhdGlvbiA9IDA7CiAgICAgICAgICAgIGNvbnRyYWN0RW5hYmxlID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY3VycmVudFN0YXRlLl9kZWZhdWx0ID0gMDsKICAgICAgICAgICAgY3VycmVudFN0YXRlLl9taWdyYXRpb24gPSA5OwogICAgICAgICAgICBjb250cmFjdEVuYWJsZSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gY29udHJhY3RFbmFibGU7CiAgICB9CgogICAgZnVuY3Rpb24gdXNlck1pZ3JhdGlvbih1aW50MjU2IF9zZWNyZWN0KSBleHRlcm5hbCBtaW5Hcm91cChjdXJyZW50U3RhdGUuX21pZ3JhdGlvbikgcmV0dXJucyAoYm9vbCBzdWNjZXNzZnVsKSB7CiAgICAgICAgdWludDI1NiBiYWxhbmNlID0gYWNjb3VudHNbbXNnLnNlbmRlcl07CgogICAgICAgIHJlcXVpcmUgKGJhbGFuY2UgPiAwKTsKCiAgICAgICAgYWNjb3VudHNbbXNnLnNlbmRlcl0gPSBhY2NvdW50c1ttc2cuc2VuZGVyXS5zdWIoYmFsYW5jZSk7CiAgICAgICAgaG9sZGVycy5yZW1vdmUobXNnLnNlbmRlcik7CiAgICAgICAgYWNjb3VudHNbb3duZXJdID0gYWNjb3VudHNbb3duZXJdLmFkZChiYWxhbmNlKTsKICAgICAgICBob2xkZXJzLnB1c2gob3duZXIsIHRydWUpOwogICAgICAgIEV2TWlncmF0aW9uKG1zZy5zZW5kZXIsIGJhbGFuY2UsIF9zZWNyZWN0KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ=='.
	

]
