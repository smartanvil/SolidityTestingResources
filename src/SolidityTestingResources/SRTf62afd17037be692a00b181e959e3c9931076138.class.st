Class {
	#name : #SRTf62afd17037be692a00b181e959e3c9931076138,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf62afd17037be692a00b181e959e3c9931076138 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIAogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBpbnRlcm5hbCB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQp9Cgpjb250cmFjdCB0b2tlbkludGVyZmFjZSB7CglmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IHJhdGVJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gcmVhZFJhdGUoc3RyaW5nIF9jdXJyZW5jeSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBvbmVFdGhlclZhbHVlKTsKfQoKY29udHJhY3QgUkMgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICBUb2tlblNhbGUgdG9rZW5TYWxlQ29udHJhY3Q7CiAgICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWU7CiAgICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOwogICAgCiAgICB1aW50MjU2IHB1YmxpYyBzb2xkVG9rZW5zOwogICAgdWludDI1NiBwdWJsaWMgcmVtYWluaW5nVG9rZW5zOwogICAgCiAgICB1aW50MjU2IHB1YmxpYyBvbmVUb2tlbkluVXNkV2VpOwoKICAgIGZ1bmN0aW9uIFJDKGFkZHJlc3MgX3Rva2VuU2FsZUNvbnRyYWN0LCB1aW50MjU2IF9vbmVUb2tlbkluVXNkV2VpLCB1aW50MjU2IF9yZW1haW5pbmdUb2tlbnMsICB1aW50MjU2IF9zdGFydFRpbWUgLCB1aW50MjU2IF9lbmRUaW1lICkgcHVibGljIHsKICAgICAgICByZXF1aXJlICggX3Rva2VuU2FsZUNvbnRyYWN0ICE9IDAgKTsKICAgICAgICByZXF1aXJlICggX29uZVRva2VuSW5Vc2RXZWkgIT0gMCApOwogICAgICAgIHJlcXVpcmUoIF9yZW1haW5pbmdUb2tlbnMgIT0gMCApOwogICAgICAgIAogICAgICAgIHRva2VuU2FsZUNvbnRyYWN0ID0gVG9rZW5TYWxlKF90b2tlblNhbGVDb250cmFjdCk7CiAgICAgICAgCiAgICAgICAgdG9rZW5TYWxlQ29udHJhY3QuYWRkTWVCeVJDKCk7CiAgICAgICAgCiAgICAgICAgc29sZFRva2VucyA9IDA7CiAgICAgICAgcmVtYWluaW5nVG9rZW5zID0gX3JlbWFpbmluZ1Rva2VuczsKICAgICAgICBvbmVUb2tlbkluVXNkV2VpID0gX29uZVRva2VuSW5Vc2RXZWk7CiAgICAgICAgCiAgICAgICAgc2V0VGltZVJDKCBfc3RhcnRUaW1lLCBfZW5kVGltZSApOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRUaW1lUkModWludDI1NiBfc3RhcnRUaW1lLCB1aW50MjU2IF9lbmRUaW1lICkgaW50ZXJuYWwgewogICAgICAgIGlmKCBfc3RhcnRUaW1lID09IDAgKSB7CiAgICAgICAgICAgIHN0YXJ0VGltZSA9IHRva2VuU2FsZUNvbnRyYWN0LnN0YXJ0VGltZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICAgICAgfQogICAgICAgIGlmKCBfZW5kVGltZSA9PSAwICkgewogICAgICAgICAgICBlbmRUaW1lID0gdG9rZW5TYWxlQ29udHJhY3QuZW5kVGltZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVuZFRpbWUgPSBfZW5kVGltZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlUb2tlblNhbGVPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gdG9rZW5TYWxlQ29udHJhY3Qub3duZXIoKSApOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFRpbWUodWludDI1NiBfbmV3U3RhcnQsIHVpbnQyNTYgX25ld0VuZCkgcHVibGljIG9ubHlUb2tlblNhbGVPd25lciB7CiAgICAgICAgaWYgKCBfbmV3U3RhcnQgIT0gMCApIHN0YXJ0VGltZSA9IF9uZXdTdGFydDsKICAgICAgICBpZiAoIF9uZXdFbmQgIT0gMCApIGVuZFRpbWUgPSBfbmV3RW5kOwogICAgfQogICAgCiAgICBldmVudCBCdXlSQyhhZGRyZXNzIGluZGV4ZWQgYnV5ZXIsIGJ5dGVzIHRyYWNrSUQsIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgc29sZFRva2VuLCB1aW50MjU2IHZhbHVlVG9rZW5JblVzZFdlaSApOwogICAgCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSggbm93ID4gc3RhcnRUaW1lICk7CiAgICAgICAgcmVxdWlyZSggbm93IDwgZW5kVGltZSApOwogICAgICAgIHJlcXVpcmUoIG1zZy52YWx1ZSA+PSAxKjEwKioxOCk7IC8vMSBFdGhlcgogICAgICAgIHJlcXVpcmUoIHJlbWFpbmluZ1Rva2VucyA+IDAgKTsKICAgICAgICAKICAgICAgICB1aW50MjU2IHRva2VuQW1vdW50ID0gdG9rZW5TYWxlQ29udHJhY3QuYnV5RnJvbVJDLnZhbHVlKG1zZy52YWx1ZSkobXNnLnNlbmRlciwgb25lVG9rZW5JblVzZFdlaSwgcmVtYWluaW5nVG9rZW5zKTsKICAgICAgICAKICAgICAgICByZW1haW5pbmdUb2tlbnMgPSByZW1haW5pbmdUb2tlbnMuc3ViKHRva2VuQW1vdW50KTsKICAgICAgICBzb2xkVG9rZW5zID0gc29sZFRva2Vucy5hZGQodG9rZW5BbW91bnQpOwogICAgICAgIAogICAgICAgIEJ1eVJDKCBtc2cuc2VuZGVyLCBtc2cuZGF0YSwgbXNnLnZhbHVlLCB0b2tlbkFtb3VudCwgb25lVG9rZW5JblVzZFdlaSApOwogICAgfQp9Cgpjb250cmFjdCBDYXJkU2FsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIFRva2VuU2FsZSB0b2tlblNhbGVDb250cmFjdDsKICAgIAogICAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lOwogICAgdWludDI1NiBwdWJsaWMgZW5kVGltZTsKICAgIAogICAgdWludDI1NiBwdWJsaWMgc29sZFRva2VuczsKICAgIHVpbnQyNTYgcHVibGljIHJlbWFpbmluZ1Rva2VuczsgICAgCiAgICAKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgcmM7CiAgICAKICAgIGZ1bmN0aW9uIENhcmRTYWxlKGFkZHJlc3MgX3Rva2VuU2FsZUNvbnRyYWN0LCB1aW50MjU2IF9yZW1haW5pbmdUb2tlbnMsICB1aW50MjU2IF9zdGFydFRpbWUgLCB1aW50MjU2IF9lbmRUaW1lICkgcHVibGljIHsKICAgICAgICByZXF1aXJlICggX3Rva2VuU2FsZUNvbnRyYWN0ICE9IDAgKTsKICAgICAgICByZXF1aXJlKCBfcmVtYWluaW5nVG9rZW5zICE9IDAgKTsKICAgICAgICAKICAgICAgICB0b2tlblNhbGVDb250cmFjdCA9IFRva2VuU2FsZShfdG9rZW5TYWxlQ29udHJhY3QpOwogICAgICAgIAogICAgICAgIHRva2VuU2FsZUNvbnRyYWN0LmFkZE1lQnlSQygpOwogICAgICAgIAogICAgICAgIHNvbGRUb2tlbnMgPSAwOwogICAgICAgIHJlbWFpbmluZ1Rva2VucyA9IF9yZW1haW5pbmdUb2tlbnM7CiAgICAgICAgCiAgICAgICAgc2V0VGltZVJDKCBfc3RhcnRUaW1lLCBfZW5kVGltZSApOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRUaW1lUkModWludDI1NiBfc3RhcnRUaW1lLCB1aW50MjU2IF9lbmRUaW1lICkgaW50ZXJuYWwgewogICAgICAgIGlmKCBfc3RhcnRUaW1lID09IDAgKSB7CiAgICAgICAgICAgIHN0YXJ0VGltZSA9IHRva2VuU2FsZUNvbnRyYWN0LnN0YXJ0VGltZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICAgICAgfQogICAgICAgIGlmKCBfZW5kVGltZSA9PSAwICkgewogICAgICAgICAgICBlbmRUaW1lID0gdG9rZW5TYWxlQ29udHJhY3QuZW5kVGltZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVuZFRpbWUgPSBfZW5kVGltZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb3duZXIoKSB2aWV3IHB1YmxpYyByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIHRva2VuU2FsZUNvbnRyYWN0Lm93bmVyKCk7CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlUb2tlblNhbGVPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIoKSApOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFRpbWUodWludDI1NiBfbmV3U3RhcnQsIHVpbnQyNTYgX25ld0VuZCkgcHVibGljIG9ubHlUb2tlblNhbGVPd25lciB7CiAgICAgICAgaWYgKCBfbmV3U3RhcnQgIT0gMCApIHN0YXJ0VGltZSA9IF9uZXdTdGFydDsKICAgICAgICBpZiAoIF9uZXdFbmQgIT0gMCApIGVuZFRpbWUgPSBfbmV3RW5kOwogICAgfQogICAgCiAgICBldmVudCBOZXdSQyhhZGRyZXNzIGNvbnRyKTsKICAgIAogICAgZnVuY3Rpb24gYWRkTWVCeVJDKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKHR4Lm9yaWdpbiA9PSBvd25lcigpICk7CiAgICAgICAgCiAgICAgICAgcmNbIG1zZy5zZW5kZXIgXSAgPSB0cnVlOwogICAgICAgIAogICAgICAgIE5ld1JDKG1zZy5zZW5kZXIpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBuZXdDYXJkKHVpbnQyNTYgX29uZVRva2VuSW5Vc2RXZWkpIG9ubHlUb2tlblNhbGVPd25lciBwdWJsaWMgewogICAgICAgIG5ldyBSQyh0aGlzLCBfb25lVG9rZW5JblVzZFdlaSwgcmVtYWluaW5nVG9rZW5zLCAwLCAwICk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXZlcnQoKTsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgb25seVJDKCkgewogICAgICAgIHJlcXVpcmUoIHJjW21zZy5zZW5kZXJdICk7IC8vY2hlY2sgaWYgaXMgYW4gYXV0aG9yaXplZCByY0NvbnRyYWN0CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYnV5RnJvbVJDKGFkZHJlc3MgX2J1eWVyLCB1aW50MjU2IF9yY1Rva2VuVmFsdWUsIHVpbnQyNTYgKSBvbmx5UkMgcHVibGljIHBheWFibGUgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB0b2tlbkFtb3VudCA9IHRva2VuU2FsZUNvbnRyYWN0LmJ1eUZyb21SQy52YWx1ZShtc2cudmFsdWUpKF9idXllciwgX3JjVG9rZW5WYWx1ZSwgcmVtYWluaW5nVG9rZW5zKTsKICAgICAgICByZW1haW5pbmdUb2tlbnMgPSByZW1haW5pbmdUb2tlbnMuc3ViKHRva2VuQW1vdW50KTsKICAgICAgICBzb2xkVG9rZW5zID0gc29sZFRva2Vucy5hZGQodG9rZW5BbW91bnQpOwogICAgICAgIHJldHVybiB0b2tlbkFtb3VudDsKICAgIH0KfQoKY29udHJhY3QgVG9rZW5TYWxlIGlzIE93bmFibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICB0b2tlbkludGVyZmFjZSBwdWJsaWMgdG9rZW5Db250cmFjdDsKICAgIHJhdGVJbnRlcmZhY2UgcHVibGljIHJhdGVDb250cmFjdDsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwogICAgYWRkcmVzcyBwdWJsaWMgYWR2aXNvcjsKICAgIHVpbnQyNTYgcHVibGljIGFkdmlzb3JGZWU7IC8vIDEgPSAwLDElCiAgICAKCXVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIGVuZFRpbWU7ICAvLyBzZWNvbmRzIGZyb20gMTk3MC0wMS0wMVQwMDowMDowMFoKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZTsgIC8vIHNlY29uZHMgZnJvbSAxOTcwLTAxLTAxVDAwOjAwOjAwWgoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgcmM7CgoKICAgIGZ1bmN0aW9uIFRva2VuU2FsZShhZGRyZXNzIF90b2tlbkFkZHJlc3MsIGFkZHJlc3MgX3JhdGVBZGRyZXNzLCB1aW50MjU2IF9zdGFydFRpbWUsIHVpbnQyNTYgX2VuZFRpbWUpIHB1YmxpYyB7CiAgICAgICAgdG9rZW5Db250cmFjdCA9IHRva2VuSW50ZXJmYWNlKF90b2tlbkFkZHJlc3MpOwogICAgICAgIHJhdGVDb250cmFjdCA9IHJhdGVJbnRlcmZhY2UoX3JhdGVBZGRyZXNzKTsKICAgICAgICBzZXRUaW1lKF9zdGFydFRpbWUsIF9lbmRUaW1lKTsgCiAgICAgICAgd2FsbGV0ID0gbXNnLnNlbmRlcjsKICAgICAgICBhZHZpc29yID0gbXNnLnNlbmRlcjsKICAgICAgICBhZHZpc29yRmVlID0gMCAqIDEwKiozOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0b2tlblZhbHVlSW5FdGhlcih1aW50MjU2IF9vbmVUb2tlbkluVXNkV2VpKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQyNTYgdGtuVmFsdWUpIHsKICAgICAgICB1aW50MjU2IG9uZUV0aGVySW5Vc2QgPSByYXRlQ29udHJhY3QucmVhZFJhdGUoInVzZCIpOwogICAgICAgIHRrblZhbHVlID0gX29uZVRva2VuSW5Vc2RXZWkubXVsKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKS5kaXYob25lRXRoZXJJblVzZCk7CiAgICAgICAgcmV0dXJuIHRrblZhbHVlOwogICAgfSAKICAgIAogICAgbW9kaWZpZXIgaXNCdXlhYmxlKCkgewogICAgICAgIHJlcXVpcmUoIG5vdyA+IHN0YXJ0VGltZSApOyAvLyBjaGVjayBpZiBzdGFydGVkCiAgICAgICAgcmVxdWlyZSggbm93IDwgZW5kVGltZSApOyAvLyBjaGVjayBpZiBlbmRlZAogICAgICAgIHJlcXVpcmUoIG1zZy52YWx1ZSA+IDAgKTsKCQkKCQl1aW50MjU2IHJlbWFpbmluZ1Rva2VucyA9IHRva2VuQ29udHJhY3QuYmFsYW5jZU9mKHRoaXMpOwogICAgICAgIHJlcXVpcmUoIHJlbWFpbmluZ1Rva2VucyA+IDAgKTsgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSByZW1haW5pbmcgdG9rZW5zIAogICAgICAgIF87CiAgICB9CiAgICAKICAgIGV2ZW50IEJ1eShhZGRyZXNzIGJ1eWVyLCB1aW50MjU2IHZhbHVlLCBhZGRyZXNzIGluZGV4ZWQgYW1iYXNzYWRvcik7CiAgICAKICAgIG1vZGlmaWVyIG9ubHlSQygpIHsKICAgICAgICByZXF1aXJlKCByY1ttc2cuc2VuZGVyXSApOyAvL2NoZWNrIGlmIGlzIGFuIGF1dGhvcml6ZWQgcmNDb250cmFjdAogICAgICAgIF87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJ1eUZyb21SQyhhZGRyZXNzIF9idXllciwgdWludDI1NiBfcmNUb2tlblZhbHVlLCB1aW50MjU2IF9yZW1haW5pbmdUb2tlbnMpIG9ubHlSQyBpc0J1eWFibGUgcHVibGljIHBheWFibGUgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBvbmVUb2tlbiA9IDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpOwogICAgICAgIHVpbnQyNTYgdG9rZW5WYWx1ZSA9IHRva2VuVmFsdWVJbkV0aGVyKF9yY1Rva2VuVmFsdWUpOwogICAgICAgIHVpbnQyNTYgdG9rZW5BbW91bnQgPSBtc2cudmFsdWUubXVsKG9uZVRva2VuKS5kaXYodG9rZW5WYWx1ZSk7CiAgICAgICAgYWRkcmVzcyBfYW1iYXNzYWRvciA9IG1zZy5zZW5kZXI7CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgdWludDI1NiByZW1haW5pbmdUb2tlbnMgPSB0b2tlbkNvbnRyYWN0LmJhbGFuY2VPZih0aGlzKTsKICAgICAgICBpZiAoIF9yZW1haW5pbmdUb2tlbnMgPCByZW1haW5pbmdUb2tlbnMgKSB7CiAgICAgICAgICAgIHJlbWFpbmluZ1Rva2VucyA9IF9yZW1haW5pbmdUb2tlbnM7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmICggcmVtYWluaW5nVG9rZW5zIDwgdG9rZW5BbW91bnQgKSB7CiAgICAgICAgICAgIHVpbnQyNTYgcmVmdW5kID0gKHRva2VuQW1vdW50IC0gcmVtYWluaW5nVG9rZW5zKS5tdWwodG9rZW5WYWx1ZSkuZGl2KG9uZVRva2VuKTsKICAgICAgICAgICAgdG9rZW5BbW91bnQgPSByZW1haW5pbmdUb2tlbnM7CiAgICAgICAgICAgIGZvcndhcmQobXNnLnZhbHVlLXJlZnVuZCk7CgkJCXJlbWFpbmluZ1Rva2VucyA9IDA7IC8vIHNldCByZW1haW5pbmcgdG9rZW4gdG8gMAogICAgICAgICAgICAgX2J1eWVyLnRyYW5zZmVyKHJlZnVuZCk7CiAgICAgICAgfSBlbHNlIHsKCQkJcmVtYWluaW5nVG9rZW5zID0gcmVtYWluaW5nVG9rZW5zLnN1Yih0b2tlbkFtb3VudCk7IC8vIHVwZGF0ZSByZW1haW5pbmcgdG9rZW4gd2l0aG91dCBib251cwogICAgICAgICAgICBmb3J3YXJkKG1zZy52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHRva2VuQ29udHJhY3QudHJhbnNmZXIoX2J1eWVyLCB0b2tlbkFtb3VudCk7CiAgICAgICAgQnV5KF9idXllciwgdG9rZW5BbW91bnQsIF9hbWJhc3NhZG9yKTsKCQkKICAgICAgICByZXR1cm4gdG9rZW5BbW91bnQ7IAogICAgfQogICAgCiAgICBmdW5jdGlvbiBmb3J3YXJkKHVpbnQyNTYgX2Ftb3VudCkgaW50ZXJuYWwgewogICAgICAgIHVpbnQyNTYgYWR2aXNvckFtb3VudCA9IF9hbW91bnQubXVsKGFkdmlzb3JGZWUpLmRpdigxMCoqMyk7CiAgICAgICAgdWludDI1NiB3YWxsZXRBbW91bnQgPSBfYW1vdW50IC0gYWR2aXNvckFtb3VudDsKICAgICAgICBhZHZpc29yLnRyYW5zZmVyKGFkdmlzb3JBbW91bnQpOwogICAgICAgIHdhbGxldC50cmFuc2Zlcih3YWxsZXRBbW91bnQpOwogICAgfQoKICAgIGV2ZW50IE5ld1JDKGFkZHJlc3MgY29udHIpOwogICAgCiAgICBmdW5jdGlvbiBhZGRNZUJ5UkMoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUodHgub3JpZ2luID09IG93bmVyKTsKICAgICAgICAKICAgICAgICByY1sgbXNnLnNlbmRlciBdICA9IHRydWU7CiAgICAgICAgCiAgICAgICAgTmV3UkMobXNnLnNlbmRlcik7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFRpbWUodWludDI1NiBfbmV3U3RhcnQsIHVpbnQyNTYgX25ld0VuZCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaWYgKCBfbmV3U3RhcnQgIT0gMCApIHN0YXJ0VGltZSA9IF9uZXdTdGFydDsKICAgICAgICBpZiAoIF9uZXdFbmQgIT0gMCApIGVuZFRpbWUgPSBfbmV3RW5kOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHRvLnRyYW5zZmVyKHZhbHVlKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gd2l0aGRyYXdUb2tlbnMoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRva2VuQ29udHJhY3QudHJhbnNmZXIodG8sIHZhbHVlKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0VG9rZW5Db250cmFjdChhZGRyZXNzIF90b2tlbkNvbnRyYWN0KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB0b2tlbkNvbnRyYWN0ID0gdG9rZW5JbnRlcmZhY2UoX3Rva2VuQ29udHJhY3QpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFdhbGxldEFkZHJlc3MoYWRkcmVzcyBfd2FsbGV0KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB3YWxsZXQgPSBfd2FsbGV0OwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRBZHZpc29yQWRkcmVzcyhhZGRyZXNzIF9hZHZpc29yKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICAgICAgYWR2aXNvciA9IF9hZHZpc29yOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRBZHZpc29yRmVlKHVpbnQyNTYgX2Fkdmlzb3JGZWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgICAgICBhZHZpc29yRmVlID0gX2Fkdmlzb3JGZWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFJhdGVDb250cmFjdChhZGRyZXNzIF9yYXRlQWRkcmVzcykgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmF0ZUNvbnRyYWN0ID0gcmF0ZUludGVyZmFjZShfcmF0ZUFkZHJlc3MpOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXZlcnQoKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gbmV3UkModWludDI1NiBfb25lVG9rZW5JblVzZFdlaSwgdWludDI1NiBfcmVtYWluaW5nVG9rZW5zKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBuZXcgUkModGhpcywgX29uZVRva2VuSW5Vc2RXZWksIF9yZW1haW5pbmdUb2tlbnMsIDAsIDAgKTsKICAgIH0KfQ=='.
	

]
