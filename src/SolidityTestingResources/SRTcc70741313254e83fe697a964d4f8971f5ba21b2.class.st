Class {
	#name : #SRTcc70741313254e83fe697a964d4f8971f5ba21b2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTcc70741313254e83fe697a964d4f8971f5ba21b2 >> base64 [
	^ 'LyoKICogRVJDMjAgaW50ZXJmYWNlCiAqIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIHsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCgoKLyoqCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MKICovCmNvbnRyYWN0IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiID4gMCk7CiAgICB1aW50IGMgPSBhIC8gYjsKICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSB7CiAgICAgIHRocm93OwogICAgfQogIH0KfQoKCgovKioKICogU3RhbmRhcmQgRVJDMjAgdG9rZW4gd2l0aCBTaG9ydCBIYW5kIEF0dGFjayBhbmQgYXBwcm92ZSgpIHJhY2UgY29uZGl0aW9uIG1pdGlnYXRpb24uCiAqCiAqIEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDoKICogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBTYWZlTWF0aCB7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgogIC8vIEludGVyZmFjZSBtYXJrZXIKICBib29sIHB1YmxpYyBjb25zdGFudCBpc1Rva2VuID0gdHJ1ZTsKCiAgLyoqCiAgICoKICAgKiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjawogICAqCiAgICogaHR0cDovL3Zlc3NlbmVzLmNvbS90aGUtZXJjMjAtc2hvcnQtYWRkcmVzcy1hdHRhY2stZXhwbGFpbmVkLwogICAqLwogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICBpZihtc2cuZGF0YS5sZW5ndGggPCBzaXplICsgNCkgewogICAgICAgdGhyb3c7CiAgICAgfQogICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc2FmZVN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7CgogICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZXNbX2Zyb21dLCBfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKF9hbGxvd2FuY2UsIF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93OwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCgoKLyoKICogT3duYWJsZQogKgogKiBCYXNlIGNvbnRyYWN0IHdpdGggYW4gb3duZXIuCiAqIFByb3ZpZGVzIG9ubHlPd25lciBtb2RpZmllciwgd2hpY2ggcHJldmVudHMgZnVuY3Rpb24gZnJvbSBydW5uaW5nIGlmIGl0IGlzIGNhbGxlZCBieSBhbnlvbmUgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgIHRocm93OwogICAgfQogICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogIH0KCn0KCgovKioKICogSG9sZCB0b2tlbnMgZm9yIGEgZ3JvdXAgaW52ZXN0b3Igb2YgaW52ZXN0b3JzIHVudGlsIHRoZSB1bmxvY2sgZGF0ZS4KICoKICogQWZ0ZXIgdGhlIHVubG9jayBkYXRlIHRoZSBpbnZlc3RvciBjYW4gY2xhaW0gdGhlaXIgdG9rZW5zLgogKgogKiBTdGVwcwogKgogKiAtIFByZXBhcmUgYSBzcHJlYWRzaGVldCBmb3IgdG9rZW4gYWxsb2NhdGlvbgogKiAtIERlcGxveSB0aGlzIGNvbnRyYWN0LCB3aXRoIHRoZSBzdW0gdG8gdG9rZW5zIHRvIGJlIGRpc3RyaWJ1dGVkLCBmcm9tIHRoZSBvd25lciBhY2NvdW50CiAqIC0gQ2FsbCBzZXRJbnZlc3RvciBmb3IgYWxsIGludmVzdG9ycyBmcm9tIHRoZSBvd25lciBhY2NvdW50IHVzaW5nIGEgbG9jYWwgc2NyaXB0IGFuZCBDU1YgaW5wdXQKICogLSBNb3ZlIHRva2Vuc1RvQmVBbGxvY2F0ZWQgaW4gdGhpcyBjb250cmFjdCB1c2lnbiBTdGFuZGFyZFRva2VuLnRyYW5zZmVyKCkKICogLSBDYWxsIGxvY2sgZnJvbSB0aGUgb3duZXIgYWNjb3VudAogKiAtIFdhaXQgdW50aWwgdGhlIGZyZWV6ZSBwZXJpb2QgaXMgb3ZlcgogKiAtIEFmdGVyIHRoZSBmcmVlemUgdGltZSBpcyBvdmVyIGludmVzdG9ycyBjYW4gY2FsbCBjbGFpbSgpIGZyb20gdGhlaXIgYWRkcmVzcyB0byBnZXQgdGhlaXIgdG9rZW5zCiAqCiAqLwpjb250cmFjdCBUb2tlblZhdWx0IGlzIE93bmFibGUgewoKICAvKiogSG93IG1hbnkgaW52ZXN0b3JzIHdlIGhhdmUgbm93ICovCiAgdWludCBwdWJsaWMgaW52ZXN0b3JDb3VudDsKCiAgLyoqIFN1bSBmcm9tIHRoZSBzcHJlYWRzaGVldCBob3cgbXVjaCB0b2tlbnMgd2Ugc2hvdWxkIGdldCBvbiB0aGUgY29udHJhY3QuIElmIHRoZSBzdW0gZG9lcyBub3QgbWF0Y2ggYXQgdGhlIHRpbWUgb2YgdGhlIGxvY2sgdGhlIHZhdWx0IGlzIGZhdWx0eSBhbmQgbXVzdCBiZSByZWNyZWF0ZWQuKi8KICB1aW50IHB1YmxpYyB0b2tlbnNUb0JlQWxsb2NhdGVkOwoKICAvKiogSG93IG1hbnkgdG9rZW5zIGludmVzdG9ycyBoYXZlIGNsYWltZWQgc28gZmFyICovCiAgdWludCBwdWJsaWMgdG90YWxDbGFpbWVkOwoKICAvKiogSG93IG1hbnkgdG9rZW5zIG91ciBpbnRlcm5hbCBib29rIGtlZXBpbmcgdGVsbHMgdXMgdG8gaGF2ZSBhdCB0aGUgdGltZSBvZiBsb2NrKCkgd2hlbiBhbGwgaW52ZXN0b3IgZGF0YSBoYXMgYmVlbiBsb2FkZWQgKi8KICB1aW50IHB1YmxpYyB0b2tlbnNBbGxvY2F0ZWRUb3RhbDsKCiAgLyoqIEhvdyBtdWNoIHdlIGhhdmUgYWxsb2NhdGVkIHRvIHRoZSBpbnZlc3RvcnMgaW52ZXN0ZWQgKi8KICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGJhbGFuY2VzOwoKICAvKiogSG93IG1hbnkgdG9rZW5zIGludmVzdG9ycyBoYXZlIGNsYWltZWQgKi8KICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGNsYWltZWQ7CgogIC8qKiBXaGVuIG91ciBjbGFpbSBmcmVlemUgaXMgb3ZlciAoVU5JWCB0aW1lc3RhbXApICovCiAgdWludCBwdWJsaWMgZnJlZXplRW5kc0F0OwoKICAvKiogV2hlbiB0aGlzIHZhdWx0IHdhcyBsb2NrZWQgKFVOSVggdGltZXN0YW1wKSAqLwogIHVpbnQgcHVibGljIGxvY2tlZEF0OwoKICAvKiogV2UgY2FuIGFsc28gZGVmaW5lIG91ciBvd24gdG9rZW4sIHdoaWNoIHdpbGwgb3ZlcnJpZGUgdGhlIElDTyBvbmUgKioqLwogIFN0YW5kYXJkVG9rZW4gcHVibGljIHRva2VuOwoKICAvKiogV2hhdCBpcyBvdXIgY3VycmVudCBzdGF0ZS4KICAgKgogICAqIExvYWRpbmc6IEludmVzdG9yIGRhdGEgaXMgYmVpbmcgbG9hZGVkIGFuZCBjb250cmFjdCBub3QgeWV0IGxvY2tlZAogICAqIEhvbGRpbmc6IEhvbGRpbmcgdG9rZW5zIGZvciBpbnZlc3RvcnMKICAgKiBEaXN0cmlidXRpbmc6IEZyZWV6ZSB0aW1lIGlzIG92ZXIsIGludmVzdG9ycyBjYW4gY2xhaW0gdGhlaXIgdG9rZW5zCiAgICovCiAgZW51bSBTdGF0ZXtVbmtub3duLCBMb2FkaW5nLCBIb2xkaW5nLCBEaXN0cmlidXRpbmd9CgogIC8qKiBXZSBhbGxvY2F0ZWQgdG9rZW5zIGZvciBpbnZlc3RvciAqLwogIGV2ZW50IEFsbG9jYXRlZChhZGRyZXNzIGludmVzdG9yLCB1aW50IHZhbHVlKTsKCiAgLyoqIFdlIGRpc3RyaWJ1dGVkIHRva2VucyB0byBhbiBpbnZlc3RvciAqLwogIGV2ZW50IERpc3RyaWJ1dGVkKGFkZHJlc3MgaW52ZXN0b3JzLCB1aW50IGNvdW50KTsKCiAgZXZlbnQgTG9ja2VkKCk7CgogIC8qKgogICAqIENyZWF0ZSBwcmVzYWxlIGNvbnRyYWN0IHdoZXJlIGxvY2sgdXAgcGVyaW9kIGlzIGdpdmVuIGRheXMKICAgKgogICAqIEBwYXJhbSBfb3duZXIgV2hvIGNhbiBsb2FkIGludmVzdG9yIGRhdGEgYW5kIGxvY2sKICAgKiBAcGFyYW0gX2ZyZWV6ZUVuZHNBdCBVTklYIHRpbWVzdGFtcCB3aGVuIHRoZSB2YXVsdCB1bmxvY2tzCiAgICogQHBhcmFtIF90b2tlbiBUb2tlbiBjb250cmFjdCBhZGRyZXNzIHdlIGFyZSBkaXN0cmlidXRpbmcKICAgKiBAcGFyYW0gX3Rva2Vuc1RvQmVBbGxvY2F0ZWQgVG90YWwgbnVtYmVyIG9mIHRva2VucyB0aGlzIHZhdWx0IHdpbGwgaG9sZCAtIGluY2x1ZGluZyBkZWNpbWFsIG11bHRpcGxjYXRpb24KICAgKgogICAqLwogIGZ1bmN0aW9uIFRva2VuVmF1bHQoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2ZyZWV6ZUVuZHNBdCwgU3RhbmRhcmRUb2tlbiBfdG9rZW4sIHVpbnQgX3Rva2Vuc1RvQmVBbGxvY2F0ZWQpIHsKCiAgICBvd25lciA9IF9vd25lcjsKCiAgICAvLyBJbnZhbGlkIG93ZW5yCiAgICBpZihvd25lciA9PSAwKSB7CiAgICAgIHRocm93OwogICAgfQoKICAgIHRva2VuID0gX3Rva2VuOwoKICAgIC8vIENoZWNrIHRoZSBhZGRyZXNzIGxvb2tzIGxpa2UgYSB0b2tlbiBjb250cmFjdAogICAgaWYoIXRva2VuLmlzVG9rZW4oKSkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICAvLyBHaXZlIGFyZ3VtZW50CiAgICBpZihfZnJlZXplRW5kc0F0ID09IDApIHsKICAgICAgdGhyb3c7CiAgICB9CgogICAgZnJlZXplRW5kc0F0ID0gX2ZyZWV6ZUVuZHNBdDsKICAgIHRva2Vuc1RvQmVBbGxvY2F0ZWQgPSBfdG9rZW5zVG9CZUFsbG9jYXRlZDsKICB9CgogIC8qKgogICAqIEFkZCBhIHByZXNhbGUgcGFydGljaXBhdGluIGFsbG9jYXRpb24uCiAgICovCiAgZnVuY3Rpb24gc2V0SW52ZXN0b3IoYWRkcmVzcyBpbnZlc3RvciwgdWludCBhbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgewoKICAgIGlmKGxvY2tlZEF0ID4gMCkgewogICAgICAvLyBDYW5ub3QgYWRkIG5ldyBpbnZlc3RvcnMgYWZ0ZXIgdGhlIHZhdWx0IGlzIGxvY2tlZAogICAgICB0aHJvdzsKICAgIH0KCiAgICBpZihhbW91bnQgPT0gMCkgdGhyb3c7IC8vIE5vIGVtcHR5IGJ1eXMKCiAgICAvLyBEb24ndCBhbGxvdyByZXNldAogICAgYm9vbCBleGlzdGluZyA9IGJhbGFuY2VzW2ludmVzdG9yXSA+IDA7CiAgICBpZihleGlzdGluZykgewogICAgICB0aHJvdzsKICAgIH0KCiAgICBiYWxhbmNlc1tpbnZlc3Rvcl0gPSBhbW91bnQ7CgogICAgaW52ZXN0b3JDb3VudCsrOwoKICAgIHRva2Vuc0FsbG9jYXRlZFRvdGFsICs9IGFtb3VudDsKCiAgICBBbGxvY2F0ZWQoaW52ZXN0b3IsIGFtb3VudCk7CiAgfQoKICAvKioKICAgKiBMb2NrIHRoZSB2YXVsdC4KICAgKgogICAqCiAgICogLSBBbGwgYmFsYW5jZXMgaGF2ZSBiZWVuIGxvYWRlZCBpbiBjb3JyZWN0bHkKICAgKiAtIFRva2VucyBhcmUgdHJhbnNmZXJyZWQgb24gdGhpcyB2YXVsdCBjb3JyZWN0bHkKICAgKgogICAqIENoZWNrcyBhcmUgaW4gcGxhY2UgdG8gcHJldmVudCBjcmVhdGluZyBhIHZhdWx0IHRoYXQgaXMgbG9ja2VkIHdpdGggaW5jb3JyZWN0IHRva2VuIGJhbGFuY2VzLgogICAqCiAgICovCiAgZnVuY3Rpb24gbG9jaygpIG9ubHlPd25lciB7CgogICAgaWYobG9ja2VkQXQgPiAwKSB7CiAgICAgIHRocm93OyAvLyBBbHJlYWR5IGxvY2tlZAogICAgfQoKICAgIC8vIFNwcmVhZHNoZWV0IHN1bSBkb2VzIG5vdCBtYXRjaCB0byB3aGF0IHdlIGhhdmUgbG9hZGVkIHRvIHRoZSBpbnZlc3RvciBkYXRhCiAgICBpZih0b2tlbnNBbGxvY2F0ZWRUb3RhbCAhPSB0b2tlbnNUb0JlQWxsb2NhdGVkKSB7CiAgICAgIHRocm93OwogICAgfQoKICAgIC8vIERvIG5vdCBsb2NrIHRoZSB2YXVsdCBpZiB0aGUgZ2l2ZW4gdG9rZW5zIG9uIHRoaXMgY29udHJhY3QKICAgIC8vIE5vdGUgdGhhdCB3ZSBkbyBub3QgY2hlY2sgIT0gc28gdGhhdCB3ZSBjYW4gdG9wIHVwIGxpdHRsZSBiaXQgZXh0cmEKICAgIC8vIGR1ZSB0byBkZWNpbWFsIHJvdW5kaW5nIGFuZCBoYXZpbmcgaXNzdWVzIHdpdGggaXQuCiAgICAvLyBUaGlzIGV4dHJhcyB3aWxsIGJlIGxvc3QgZm9yZXZlciB3aGVuIHRoZSB2YXVsdCBpcyBsb2NrZWQuCiAgICBpZih0b2tlbi5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSkgPCB0b2tlbnNBbGxvY2F0ZWRUb3RhbCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICBsb2NrZWRBdCA9IG5vdzsKCiAgICBMb2NrZWQoKTsKICB9CgogIC8qKgogICAqIEluIHRoZSBjYXNlIGxvY2tpbmcgZmFpbGVkLCB0aGVuIGFsbG93IHRoZSBvd25lciB0byByZWNsYWltIHRoZSB0b2tlbnMgb24gdGhlIGNvbnRyYWN0LgogICAqLwogIGZ1bmN0aW9uIHJlY292ZXJGYWlsZWRMb2NrKCkgb25seU93bmVyIHsKICAgIGlmKGxvY2tlZEF0ID4gMCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICAvLyBUcmFuc2ZlciBhbGwgdG9rZW5zIG9uIHRoaXMgY29udHJhY3QgYmFjayB0byB0aGUgb3duZXIKICAgIHRva2VuLnRyYW5zZmVyKG93bmVyLCB0b2tlbi5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSkpOwogIH0KCiAgLyoqCiAgICogR2V0IHRoZSBjdXJyZW50IGJhbGFuY2Ugb2YgdG9rZW5zIGluIHRoZSB2YXVsdC4KICAgKi8KICBmdW5jdGlvbiBnZXRCYWxhbmNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgaG93TWFueVRva2Vuc0N1cnJlbnRseUluVmF1bHQpIHsKICAgIHJldHVybiB0b2tlbi5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7CiAgfQoKICAvKioKICAgKiBDbGFpbSBOIGJvdWdodCB0b2tlbnMgdG8gdGhlIGludmVzdG9yIGFzIHRoZSBtc2cgc2VuZGVyLgogICAqCiAgICovCiAgZnVuY3Rpb24gY2xhaW0oKSB7CgogICAgYWRkcmVzcyBpbnZlc3RvciA9IG1zZy5zZW5kZXI7CgogICAgaWYobG9ja2VkQXQgPT0gMCkgewogICAgICB0aHJvdzsgLy8gV2Ugd2VyZSBuZXZlciBsb2NrZWQKICAgIH0KCiAgICBpZihub3cgPCBmcmVlemVFbmRzQXQpIHsKICAgICAgdGhyb3c7IC8vIFRyeWluZyB0byBjbGFpbSBlYXJseQogICAgfQoKICAgIGlmKGJhbGFuY2VzW2ludmVzdG9yXSA9PSAwKSB7CiAgICAgIC8vIE5vdCBvdXIgaW52ZXN0b3IKICAgICAgdGhyb3c7CiAgICB9CgogICAgaWYoY2xhaW1lZFtpbnZlc3Rvcl0gPiAwKSB7CiAgICAgIHRocm93OyAvLyBBbHJlYWR5IGNsYWltZWQKICAgIH0KCiAgICB1aW50IGFtb3VudCA9IGJhbGFuY2VzW2ludmVzdG9yXTsKCiAgICBjbGFpbWVkW2ludmVzdG9yXSA9IGFtb3VudDsKCiAgICB0b3RhbENsYWltZWQgKz0gYW1vdW50OwoKICAgIHRva2VuLnRyYW5zZmVyKGludmVzdG9yLCBhbW91bnQpOwoKICAgIERpc3RyaWJ1dGVkKGludmVzdG9yLCBhbW91bnQpOwogIH0KCiAgLyoqCiAgICogUmVzb2x2ZSB0aGUgY29udHJhY3QgdW1hbWJpZ2lvdXMgc3RhdGUuCiAgICovCiAgZnVuY3Rpb24gZ2V0U3RhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhTdGF0ZSkgewogICAgaWYobG9ja2VkQXQgPT0gMCkgewogICAgICByZXR1cm4gU3RhdGUuTG9hZGluZzsKICAgIH0gZWxzZSBpZihub3cgPiBmcmVlemVFbmRzQXQpIHsKICAgICAgcmV0dXJuIFN0YXRlLkRpc3RyaWJ1dGluZzsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBTdGF0ZS5Ib2xkaW5nOwogICAgfQogIH0KCn0='.
	

]
