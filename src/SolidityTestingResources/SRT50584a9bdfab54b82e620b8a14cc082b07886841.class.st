Class {
	#name : #SRT50584a9bdfab54b82e620b8a14cc082b07886841,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT50584a9bdfab54b82e620b8a14cc082b07886841 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CmNvbnRyYWN0IG93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIG93bmVkKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KfQoKY29udHJhY3QgdG9rZW5SZWNpcGllbnQgeyBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKTsgfQoKY29udHJhY3QgdG9rZW4gewogICAgLyogUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gKi8KICAgIHN0cmluZyBwdWJsaWMgc3RhbmRhcmQgPSAiUFZFIDEuMCI7CiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8qIFRoaXMgY3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBiYWxhbmNlcyAqLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dhbmNlOwoKICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogICAgbWFwcGluZyhhZGRyZXNzPT51aW50MjU2KSBwdWJsaWMgaW5kZXhlczsKICAgIG1hcHBpbmcodWludDI1Nj0+YWRkcmVzcykgcHVibGljIGFkZHJlc3NlczsKICAgIHVpbnQyNTYgcHVibGljIGxhc3RJbmRleCA9IDA7CiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgICAvKiBUaGlzIGdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMgKi8KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8qIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdCAqLwogICAgZnVuY3Rpb24gdG9rZW4oCiAgICAgICAgdWludDI1NiBpbml0aWFsU3VwcGx5LAogICAgICAgIHN0cmluZyB0b2tlbk5hbWUsCiAgICAgICAgdWludDggZGVjaW1hbFVuaXRzLAogICAgICAgIHN0cmluZyB0b2tlblN5bWJvbAogICAgICAgICkgewogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IGluaXRpYWxTdXBwbHk7ICAgICAgICAgICAgICAvLyBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucwogICAgICAgIHRvdGFsU3VwcGx5ID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdG90YWwgc3VwcGx5CiAgICAgICAgbmFtZSA9IHRva2VuTmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgbmFtZSBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIHN5bWJvbCA9IHRva2VuU3ltYm9sOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAgIGRlY2ltYWxzID0gZGVjaW1hbFVuaXRzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbW91bnQgb2YgZGVjaW1hbHMgZm9yIGRpc3BsYXkgcHVycG9zZXMKICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiAgICAgICAgYWRkcmVzc2VzWzFdID0gbXNnLnNlbmRlcjsKICAgICAgICBpbmRleGVzW21zZy5zZW5kZXJdID0gMTsKICAgICAgICBsYXN0SW5kZXggPSAxOwogICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KICAgIH0KCiAgICAvKiBTZW5kIGNvaW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHsKICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSB0aHJvdzsgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIGlmIChiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA8IGJhbGFuY2VPZltfdG9dKSB0aHJvdzsgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudAogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UKICAgIH0KCiAgICAvKiBBbGxvdyBhbm90aGVyIGNvbnRyYWN0IHRvIHNwZW5kIHNvbWUgdG9rZW5zIGluIHlvdXIgYmVoYWxmICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyogQXBwcm92ZSBhbmQgdGhlbiBjb21tdW5pY2F0ZSB0aGUgYXBwcm92ZWQgY29udHJhY3QgaW4gYSBzaW5nbGUgdHggKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHRva2VuUmVjaXBpZW50IHNwZW5kZXIgPSB0b2tlblJlY2lwaWVudChfc3BlbmRlcik7CiAgICAgICAgaWYgKGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSkpIHsKICAgICAgICAgICAgc3BlbmRlci5yZWNlaXZlQXBwcm92YWwobXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIC8qIEEgY29udHJhY3QgYXR0ZW1wdHMgXyB0byBnZXQgdGhlIGNvaW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZU9mW19mcm9tXSA8IF92YWx1ZSkgdGhyb3c7ICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBpZiAoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZbX3RvXSkgdGhyb3c7ICAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgaWYgKF92YWx1ZSA+IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pIHRocm93OyAgIC8vIENoZWNrIGFsbG93YW5jZQogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudAogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyogVGhpcyB1bm5hbWVkIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuZXZlciBzb21lb25lIHRyaWVzIHRvIHNlbmQgZXRoZXIgdG8gaXQgKi8KICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdzsgICAgIC8vIFByZXZlbnRzIGFjY2lkZW50YWwgc2VuZGluZyBvZiBldGhlcgogICAgfQp9Cgpjb250cmFjdCBQcm92aWRlbmNlQ2FzaW5vVG9rZW4gaXMgb3duZWQsIHRva2VuIHsKCiAgICB1aW50MjU2IHB1YmxpYyBzZWxsUHJpY2U7CiAgICB1aW50MjU2IHB1YmxpYyBidXlQcmljZTsKCiAgICBtYXBwaW5nKGFkZHJlc3M9PmJvb2wpIHB1YmxpYyBmcm96ZW5BY2NvdW50OwoKICAgIC8qIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cyAqLwogICAgZXZlbnQgRnJvemVuRnVuZHMoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJvemVuKTsKCiAgICAvKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QgKi8KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGluaXRpYWxTdXBwbHkgPSAyMDAwMDAwMDAgKiAxMCoqMTg7CiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbFVuaXRzID0gMTg7CiAgICBzdHJpbmcgcHVibGljIHRva2VuTmFtZSA9ICJQcm92aWRlbmNlIENyeXB0byBDYXNpbm8iOwogICAgc3RyaW5nIHB1YmxpYyB0b2tlblN5bWJvbCA9ICJQVkUiOwogICAgZnVuY3Rpb24gUHJvdmlkZW5jZUNhc2lub1Rva2VuKCkgdG9rZW4gKGluaXRpYWxTdXBwbHksIHRva2VuTmFtZSwgZGVjaW1hbFVuaXRzLCB0b2tlblN5bWJvbCkge30KICAgICAvKiBTZW5kIGNvaW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHsKICAgICAgICBpZighY2FuSG9sZGVyVHJhbnNmZXIoKSkgdGhyb3c7CiAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA8IF92YWx1ZSkgdGhyb3c7ICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBpZiAoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPCBiYWxhbmNlT2ZbX3RvXSkgdGhyb3c7IC8vIENoZWNrIGZvciBvdmVyZmxvd3MKICAgICAgICBpZiAoZnJvemVuQWNjb3VudFttc2cuc2VuZGVyXSkgdGhyb3c7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGZyb3plbgogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudAogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UKICAgICAgICBpZihfdmFsdWUgPiAwKXsKICAgICAgICAgICAgaWYoYmFsYW5jZU9mW21zZy5zZW5kZXJdID09IDApewogICAgICAgICAgICAgICAgYWRkcmVzc2VzW2luZGV4ZXNbbXNnLnNlbmRlcl1dID0gYWRkcmVzc2VzW2xhc3RJbmRleF07CiAgICAgICAgICAgICAgICBpbmRleGVzW2FkZHJlc3Nlc1tsYXN0SW5kZXhdXSA9IGluZGV4ZXNbbXNnLnNlbmRlcl07CiAgICAgICAgICAgICAgICBpbmRleGVzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICAgICAgICAgIGRlbGV0ZSBhZGRyZXNzZXNbbGFzdEluZGV4XTsKICAgICAgICAgICAgICAgIGxhc3RJbmRleC0tOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKGluZGV4ZXNbX3RvXT09MCl7CiAgICAgICAgICAgICAgICBsYXN0SW5kZXgrKzsKICAgICAgICAgICAgICAgIGFkZHJlc3Nlc1tsYXN0SW5kZXhdID0gX3RvOwogICAgICAgICAgICAgICAgaW5kZXhlc1tfdG9dID0gbGFzdEluZGV4OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldEFkZHJlc3NlcygpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3NbXSl7CiAgICAgICAgYWRkcmVzc1tdIG1lbW9yeSBhZGRycyA9IG5ldyBhZGRyZXNzW10obGFzdEluZGV4KTsKICAgICAgICBmb3IodWludCBpID0gMDsgaSA8IGxhc3RJbmRleDsgaSsrKXsKICAgICAgICAgICAgYWRkcnNbaV0gPSBhZGRyZXNzZXNbaSsxXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFkZHJzOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGVUb2tlbnModWludCBfYW1vdW50KSBvbmx5T3duZXIgcmV0dXJucyAodWludCkgewogICAgICAgIGlmKGJhbGFuY2VPZltvd25lcl0gPCBfYW1vdW50KSB0aHJvdzsKICAgICAgICB1aW50IGRpc3RyaWJ1dGVkID0gMDsKCiAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGkgPCBsYXN0SW5kZXg7IGkrKyl7CiAgICAgICAgICAgIGFkZHJlc3MgaG9sZGVyID0gYWRkcmVzc2VzW2krMV07CiAgICAgICAgICAgIHVpbnQgcmV3YXJkID0gKF9hbW91bnQgKiBiYWxhbmNlT2ZbaG9sZGVyXSAvIHRvdGFsU3VwcGx5KTsKICAgICAgICAgICAgYmFsYW5jZU9mW2hvbGRlcl0gKz0gcmV3YXJkOwogICAgICAgICAgICBkaXN0cmlidXRlZCArPSByZXdhcmQ7CiAgICAgICAgICAgIFRyYW5zZmVyKG93bmVyLCBob2xkZXIsIHJld2FyZCk7CiAgICAgICAgfQoKICAgICAgICBiYWxhbmNlT2Zbb3duZXJdIC09IGRpc3RyaWJ1dGVkOwogICAgICAgIHJldHVybiBkaXN0cmlidXRlZDsKICAgIH0KCiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogICAgYm9vbCBwdWJsaWMgbG9ja2VkID0gdHJ1ZTsKICAgIGFkZHJlc3MgcHVibGljIGljb0FkZHJlc3M7CiAgICBmdW5jdGlvbiB1bmxvY2tUcmFuc2ZlcigpIG9ubHlPd25lciB7CiAgICAgICAgbG9ja2VkID0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gbG9ja1RyYW5zZmVyKCkgb25seU93bmVyIHsKICAgICAgICBsb2NrZWQgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbkhvbGRlclRyYW5zZmVyKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCl7CiAgICAgICAgcmV0dXJuICFsb2NrZWQgfHwgbXNnLnNlbmRlciA9PSBvd25lciB8fCBtc2cuc2VuZGVyID09IGljb0FkZHJlc3M7CiAgICB9CiAgICBmdW5jdGlvbiBzZXRJY29BZGRyZXNzKGFkZHJlc3MgX2ljb0FkZHJlc3MpIG9ubHlPd25lciB7CiAgICAgICAgaWNvQWRkcmVzcyA9IF9pY29BZGRyZXNzOwogICAgfQoKICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogICAgLyogQSBjb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIGNvaW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoZnJvemVuQWNjb3VudFtfZnJvbV0pIHRocm93OyAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGZyb3plbgogICAgICAgIGlmIChiYWxhbmNlT2ZbX2Zyb21dIDwgX3ZhbHVlKSB0aHJvdzsgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIGlmIChiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA8IGJhbGFuY2VPZltfdG9dKSB0aHJvdzsgIC8vIENoZWNrIGZvciBvdmVyZmxvd3MKICAgICAgICBpZiAoX3ZhbHVlID4gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSkgdGhyb3c7ICAgLy8gQ2hlY2sgYWxsb3dhbmNlCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gbWludFRva2VuKGFkZHJlc3MgdGFyZ2V0LCB1aW50MjU2IG1pbnRlZEFtb3VudCkgb25seU93bmVyIHsKICAgICAgICBiYWxhbmNlT2ZbdGFyZ2V0XSArPSBtaW50ZWRBbW91bnQ7CiAgICAgICAgdG90YWxTdXBwbHkgKz0gbWludGVkQW1vdW50OwogICAgICAgIFRyYW5zZmVyKDAsIHRoaXMsIG1pbnRlZEFtb3VudCk7CiAgICAgICAgVHJhbnNmZXIodGhpcywgdGFyZ2V0LCBtaW50ZWRBbW91bnQpOwogICAgfQoKCiAgICBmdW5jdGlvbiBmcmVlemUoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJlZXplKSBvbmx5T3duZXIgewogICAgICAgIGZyb3plbkFjY291bnRbdGFyZ2V0XSA9IGZyZWV6ZTsKICAgICAgICBGcm96ZW5GdW5kcyh0YXJnZXQsIGZyZWV6ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UHJpY2VzKHVpbnQyNTYgbmV3U2VsbFByaWNlLCB1aW50MjU2IG5ld0J1eVByaWNlKSBvbmx5T3duZXIgewogICAgICAgIHNlbGxQcmljZSA9IG5ld1NlbGxQcmljZTsKICAgICAgICBidXlQcmljZSA9IG5ld0J1eVByaWNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eSgpIHBheWFibGUgewogICAgICAgIHVpbnQgYW1vdW50ID0gbXNnLnZhbHVlIC8gYnV5UHJpY2U7ICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZXMgdGhlIGFtb3VudAogICAgICAgIGlmIChiYWxhbmNlT2ZbdGhpc10gPCBhbW91bnQpIHRocm93OyAgICAgICAgICAgICAgIC8vIGNoZWNrcyBpZiBpdCBoYXMgZW5vdWdoIHRvIHNlbGwKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gKz0gYW1vdW50OyAgICAgICAgICAgICAgICAgICAvLyBhZGRzIHRoZSBhbW91bnQgdG8gYnV5ZXIncyBiYWxhbmNlCiAgICAgICAgYmFsYW5jZU9mW3RoaXNdIC09IGFtb3VudDsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VidHJhY3RzIGFtb3VudCBmcm9tIHNlbGxlcidzIGJhbGFuY2UKICAgICAgICBUcmFuc2Zlcih0aGlzLCBtc2cuc2VuZGVyLCBhbW91bnQpOyAgICAgICAgICAgICAgICAvLyBleGVjdXRlIGFuIGV2ZW50IHJlZmxlY3RpbmcgdGhlIGNoYW5nZQogICAgfQoKICAgIGZ1bmN0aW9uIHNlbGwodWludDI1NiBhbW91bnQpIHsKICAgICAgICBpZiAoYmFsYW5jZU9mW21zZy5zZW5kZXJdIDwgYW1vdW50ICkgdGhyb3c7ICAgICAgICAvLyBjaGVja3MgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoIHRvIHNlbGwKICAgICAgICBiYWxhbmNlT2ZbdGhpc10gKz0gYW1vdW50OyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGRzIHRoZSBhbW91bnQgdG8gb3duZXIncyBiYWxhbmNlCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IGFtb3VudDsgICAgICAgICAgICAgICAgICAgLy8gc3VidHJhY3RzIHRoZSBhbW91bnQgZnJvbSBzZWxsZXIncyBiYWxhbmNlCiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoYW1vdW50ICogc2VsbFByaWNlKSkgeyAgICAgICAgLy8gc2VuZHMgZXRoZXIgdG8gdGhlIHNlbGxlci4gSXQncyBpbXBvcnRhbnQKICAgICAgICAgICAgdGhyb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBkbyB0aGlzIGxhc3QgdG8gYXZvaWQgcmVjdXJzaW9uIGF0dGFja3MKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCB0aGlzLCBhbW91bnQpOyAgICAgICAgICAgIC8vIGV4ZWN1dGVzIGFuIGV2ZW50IHJlZmxlY3Rpbmcgb24gdGhlIGNoYW5nZQogICAgICAgIH0KICAgIH0KfQ=='.
	

]
