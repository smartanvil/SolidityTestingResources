Class {
	#name : #SRTde870a1069082fc59d3df858918b08ff677a6a85,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTde870a1069082fc59d3df858918b08ff677a6a85 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBTYWZlTWF0aCB7CgogICAgZnVuY3Rpb24gc2FmZU11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiApIHsKICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVEaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgKSB7CiAgICAgICAgYXNzZXJ0KGIgPiAwKTsKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2ICkgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2ICkgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9Cgpjb250cmFjdCBFUkMyMCB7CgogICAgLyogVGhpcyBpcyBhIHNsaWdodCBjaGFuZ2UgdG8gdGhlIEVSQzIwIGJhc2Ugc3RhbmRhcmQuCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKICAgIGlzIHJlcGxhY2VkIHdpdGg6CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIFRoaXMgYXV0b21hdGljYWxseSBjcmVhdGVzIGEgZ2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgdG90YWxTdXBwbHkuCiAgICBUaGlzIGlzIG1vdmVkIHRvIHRoZSBiYXNlIGNvbnRyYWN0IHNpbmNlIHB1YmxpYyBnZXR0ZXIgZnVuY3Rpb25zIGFyZSBub3QKICAgIGN1cnJlbnRseSByZWNvZ25pc2VkIGFzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBtYXRjaGluZyBhYnN0cmFjdAogICAgZnVuY3Rpb24gYnkgdGhlIGNvbXBpbGVyLgogICAgKi8KICAgIC8vLyB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIFNhZmVNYXRoIHsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgIC8vLyBAZGV2IFJldHVybnMgbnVtYmVyIG9mIHRva2VucyBvd25lZCBieSBnaXZlbiBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLy8vIEBkZXYgVHJhbnNmZXJzIHNlbmRlcidzIHRva2VucyB0byBhIGdpdmVuIGFkZHJlc3MuIFJldHVybnMgc3VjY2Vzcy4KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgdG9rZW4gcmVjZWl2ZXIuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBOdW1iZXIgb2YgdG9rZW5zIHRvIHRyYW5zZmVyLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vLyBAZGV2IEFsbG93cyBhbGxvd2VkIHRoaXJkIHBhcnR5IHRvIHRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIuIFJldHVybnMgc3VjY2Vzcy4KICAgIC8vLyBAcGFyYW0gX2Zyb20gQWRkcmVzcyBmcm9tIHdoZXJlIHRva2VucyBhcmUgd2l0aGRyYXduLgogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyB0byB3aGVyZSB0b2tlbnMgYXJlIHNlbnQuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBOdW1iZXIgb2YgdG9rZW5zIHRvIHRyYW5zZmVyLgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sIF92YWx1ZSk7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZXNbX2Zyb21dLCBfdmFsdWUpOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8vIEBkZXYgU2V0cyBhcHByb3ZlZCBhbW91bnQgb2YgdG9rZW5zIGZvciBzcGVuZGVyLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgYWxsb3dlZCBhY2NvdW50LgogICAgLy8vIEBwYXJhbSBfdmFsdWUgTnVtYmVyIG9mIGFwcHJvdmVkIHRva2Vucy4KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBSZXR1cm5zIG51bWJlciBvZiBhbGxvd2VkIHRva2VucyBmb3IgZ2l2ZW4gYWRkcmVzcy4KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgdG9rZW4gc3BlbmRlci4KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBwZW5kaW5nT3duZXI7CgogICAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBTYWZlIHRyYW5zZmVyIG9mIG93bmVyc2hpcCBpbiAyIHN0ZXBzLiBPbmNlIGNhbGxlZCwgYSBuZXdPd25lciBuZWVkcyB0byBjYWxsIGNsYWltT3duZXJzaGlwKCkgdG8gcHJvdmUgb3duZXJzaGlwLgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBwZW5kaW5nT3duZXIgPSBuZXdPd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBjbGFpbU93bmVyc2hpcCgpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBwZW5kaW5nT3duZXIpIHsKICAgICAgICAgICAgb3duZXIgPSBwZW5kaW5nT3duZXI7CiAgICAgICAgICAgIHBlbmRpbmdPd25lciA9IDA7CiAgICAgICAgfQogICAgfQp9Cgpjb250cmFjdCBNdWx0aU93bmFibGUgewoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgb3duZXJNYXA7CiAgICBhZGRyZXNzW10gcHVibGljIG93bmVyczsKCiAgICBldmVudCBPd25lckFkZGVkKGFkZHJlc3MgaW5kZXhlZCBfbmV3T3duZXIpOwogICAgZXZlbnQgT3duZXJSZW1vdmVkKGFkZHJlc3MgaW5kZXhlZCBfb2xkT3duZXIpOwoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKGlzT3duZXIobXNnLnNlbmRlcikpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gTXVsdGlPd25hYmxlKCkgewogICAgICAgIC8vIEFkZCBkZWZhdWx0IG93bmVyCiAgICAgICAgYWRkcmVzcyBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgb3duZXJNYXBbb3duZXJdID0gdHJ1ZTsKICAgICAgICBvd25lcnMucHVzaChvd25lcik7CiAgICB9CgogICAgZnVuY3Rpb24gb3duZXJDb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIG93bmVycy5sZW5ndGg7CiAgICB9CgogICAgZnVuY3Rpb24gaXNPd25lcihhZGRyZXNzIG93bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBvd25lck1hcFtvd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYWRkT3duZXIoYWRkcmVzcyBvd25lcikgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoIWlzT3duZXIob3duZXIpICYmIG93bmVyICE9IDApIHsKICAgICAgICAgICAgb3duZXJNYXBbb3duZXJdID0gdHJ1ZTsKICAgICAgICAgICAgb3duZXJzLnB1c2gob3duZXIpOwoKICAgICAgICAgICAgT3duZXJBZGRlZChvd25lcik7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlT3duZXIoYWRkcmVzcyBvd25lcikgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoaXNPd25lcihvd25lcikpIHsKICAgICAgICAgICAgb3duZXJNYXBbb3duZXJdID0gZmFsc2U7CiAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG93bmVycy5sZW5ndGggLSAxOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmIChvd25lcnNbaV0gPT0gb3duZXIpIHsKICAgICAgICAgICAgICAgICAgICBvd25lcnNbaV0gPSBvd25lcnNbb3duZXJzLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIG93bmVycy5sZW5ndGggLT0gMTsKCiAgICAgICAgICAgIE93bmVyUmVtb3ZlZChvd25lcik7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2U7CiAgICB9Cn0KCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewoKICAgIGJvb2wgcHVibGljIHBhdXNlZDsKCiAgICBtb2RpZmllciBpZk5vdFBhdXNlZCB7CiAgICAgICAgcmVxdWlyZSghcGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGlmUGF1c2VkIHsKICAgICAgICByZXF1aXJlKHBhdXNlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBDYWxsZWQgYnkgdGhlIG93bmVyIG9uIGVtZXJnZW5jeSwgdHJpZ2dlcnMgcGF1c2VkIHN0YXRlCiAgICBmdW5jdGlvbiBwYXVzZSgpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgcGF1c2VkID0gdHJ1ZTsKICAgIH0KCiAgICAvLyBDYWxsZWQgYnkgdGhlIG93bmVyIG9uIGVuZCBvZiBlbWVyZ2VuY3ksIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICBmdW5jdGlvbiByZXN1bWUoKSBleHRlcm5hbCBvbmx5T3duZXIgaWZQYXVzZWQgewogICAgICAgIHBhdXNlZCA9IGZhbHNlOwogICAgfQp9Cgpjb250cmFjdCBUb2tlblNwZW5kZXIgewogICAgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKTsKfQoKCmNvbnRyYWN0IENvbW1vbkJzVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgTXVsdGlPd25hYmxlIHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gMTg7CiAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAndjAuMSc7CgogICAgYWRkcmVzcyBwdWJsaWMgY3JlYXRvcjsKICAgIGFkZHJlc3MgcHVibGljIHNlbGxlcjsgICAgIC8vIFRoZSBtYWluIGFjY291bnQgdGhhdCBob2xkcyBhbGwgdG9rZW5zIGF0IHRoZSBiZWdpbm5pbmcuCgogICAgdWludDI1NiBwdWJsaWMgc2FsZUxpbWl0OyAgLy8gKGUxOCkgSG93IG1hbnkgdG9rZW5zIGNhbiBiZSBzb2xkIGluIHRvdGFsIHRocm91Z2ggYWxsIHRpZXJzIG9yIHRva2Vuc2FsZXMuCiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNTb2xkOyAvLyAoZTE4KSBOdW1iZXIgb2YgdG9rZW5zIHNvbGQgdGhyb3VnaCBhbGwgdGllcnMgb3IgdG9rZW5zYWxlcy4KICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU2FsZXM7IC8vIFRvdGFsIG51bWJlciBvZiBzYWxlIChpbmNsdWRpbmcgZXh0ZXJuYWwgc2FsZXMpIG1hZGUgdGhyb3VnaCBhbGwgdGllcnMgb3IgdG9rZW5zYWxlcy4KCiAgICBib29sIHB1YmxpYyBsb2NrZWQ7CgogICAgZXZlbnQgU2VsbChhZGRyZXNzIGluZGV4ZWQgX3NlbGxlciwgYWRkcmVzcyBpbmRleGVkIF9idXllciwgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgU2VsbGVyQ2hhbmdlZChhZGRyZXNzIGluZGV4ZWQgX29sZFNlbGxlciwgYWRkcmVzcyBpbmRleGVkIF9uZXdTZWxsZXIpOwoKICAgIGV2ZW50IExvY2soKTsKICAgIGV2ZW50IFVubG9jaygpOwoKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIF9idXJuZXIsIHVpbnQyNTYgX3ZhbHVlKTsKCiAgICBtb2RpZmllciBvbmx5VW5sb2NrZWQoKSB7CiAgICAgICAgcmVxdWlyZShpc093bmVyKG1zZy5zZW5kZXIpIHx8ICFsb2NrZWQpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gQ29tbW9uQnNUb2tlbigKICAgICAgICBhZGRyZXNzIF9zZWxsZXIsCiAgICAgICAgc3RyaW5nIF9uYW1lLAogICAgICAgIHN0cmluZyBfc3ltYm9sLAogICAgICAgIHVpbnQyNTYgX3RvdGFsU3VwcGx5Tm9EZWNpbWFscywKICAgICAgICB1aW50MjU2IF9zYWxlTGltaXROb0RlY2ltYWxzCiAgICApIHB1YmxpYyBNdWx0aU93bmFibGUoKSB7CgogICAgICAgIC8vIExvY2sgdGhlIHRyYW5zZmVyIGZ1bmN0aW9uIGR1cmluZyB0aGUgcHJlc2FsZS9jcm93ZHNhbGUgdG8gcHJldmVudCBzcGVjdWxhdGlvbnMuCiAgICAgICAgbG9ja2VkID0gdHJ1ZTsKCiAgICAgICAgY3JlYXRvciA9IG1zZy5zZW5kZXI7CiAgICAgICAgc2VsbGVyID0gX3NlbGxlcjsKCiAgICAgICAgbmFtZSA9IF9uYW1lOwogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICAgICAgdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHlOb0RlY2ltYWxzICogMWUxODsKICAgICAgICBzYWxlTGltaXQgPSBfc2FsZUxpbWl0Tm9EZWNpbWFscyAqIDFlMTg7CgogICAgICAgIGJhbGFuY2VzW3NlbGxlcl0gPSB0b3RhbFN1cHBseTsKICAgICAgICBUcmFuc2ZlcigweDAsIHNlbGxlciwgdG90YWxTdXBwbHkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVNlbGxlcihhZGRyZXNzIG5ld1NlbGxlcikgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShuZXdTZWxsZXIgIT0gMHgwICYmIHNlbGxlciAhPSBuZXdTZWxsZXIpOwoKICAgICAgICBhZGRyZXNzIG9sZFNlbGxlciA9IHNlbGxlcjsKICAgICAgICB1aW50MjU2IHVuc29sZFRva2VucyA9IGJhbGFuY2VzW29sZFNlbGxlcl07CiAgICAgICAgYmFsYW5jZXNbb2xkU2VsbGVyXSA9IDA7CiAgICAgICAgYmFsYW5jZXNbbmV3U2VsbGVyXSA9IHNhZmVBZGQoYmFsYW5jZXNbbmV3U2VsbGVyXSwgdW5zb2xkVG9rZW5zKTsKICAgICAgICBUcmFuc2ZlcihvbGRTZWxsZXIsIG5ld1NlbGxlciwgdW5zb2xkVG9rZW5zKTsKCiAgICAgICAgc2VsbGVyID0gbmV3U2VsbGVyOwogICAgICAgIFNlbGxlckNoYW5nZWQob2xkU2VsbGVyLCBuZXdTZWxsZXIpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbGxOb0RlY2ltYWxzKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc2VsbChfdG8sIF92YWx1ZSAqIDFlMTgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbGwoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKCiAgICAgICAgLy8gQ2hlY2sgdGhhdCB3ZSBhcmUgbm90IG91dCBvZiBsaW1pdCBhbmQgc3RpbGwgY2FuIHNlbGwgdG9rZW5zOgogICAgICAgIGlmIChzYWxlTGltaXQgPiAwKSByZXF1aXJlKHNhZmVTdWIoc2FsZUxpbWl0LCBzYWZlQWRkKHRva2Vuc1NvbGQsIF92YWx1ZSkpID49IDApOwoKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW3NlbGxlcl0pOwoKICAgICAgICBiYWxhbmNlc1tzZWxsZXJdID0gc2FmZVN1YihiYWxhbmNlc1tzZWxsZXJdLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sIF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoc2VsbGVyLCBfdG8sIF92YWx1ZSk7CgogICAgICAgIHRva2Vuc1NvbGQgPSBzYWZlQWRkKHRva2Vuc1NvbGQsIF92YWx1ZSk7CiAgICAgICAgdG90YWxTYWxlcyA9IHNhZmVBZGQodG90YWxTYWxlcywgMSk7CiAgICAgICAgU2VsbChzZWxsZXIsIF90bywgX3ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5VW5sb2NrZWQgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlVbmxvY2tlZCBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBsb2NrKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgbG9ja2VkID0gdHJ1ZTsKICAgICAgICBMb2NrKCk7CiAgICB9CgogICAgZnVuY3Rpb24gdW5sb2NrKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgbG9ja2VkID0gZmFsc2U7CiAgICAgICAgVW5sb2NrKCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpIDsKICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVTdWIodG90YWxTdXBwbHksIF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgMHgwLCBfdmFsdWUpOwogICAgICAgIEJ1cm4obXNnLnNlbmRlciwgX3ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyogQXBwcm92ZSBhbmQgdGhlbiBjb21tdW5pY2F0ZSB0aGUgYXBwcm92ZWQgY29udHJhY3QgaW4gYSBzaW5nbGUgdHggKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIFRva2VuU3BlbmRlciBzcGVuZGVyID0gVG9rZW5TcGVuZGVyKF9zcGVuZGVyKTsKICAgICAgICBpZiAoYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgewogICAgICAgICAgICBzcGVuZGVyLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICByZXZlcnQoKTsKICAgIH0KfQoKY29udHJhY3QgQ29tbW9uQnNDcm93ZHNhbGUgaXMgU2FmZU1hdGgsIE93bmFibGUsIFBhdXNhYmxlIHsKCiAgICBzdHJ1Y3QgQmFja2VyIHsKICAgICAgICB1aW50MjU2IHdlaVJlY2VpdmVkOyAvLyBBbW91bnQgb2Ygd2VpIGdpdmVuIGJ5IGJhY2tlcgogICAgICAgIHVpbnQyNTYgdG9rZW5zU2VudDsgIC8vIEFtb3VudCBvZiB0b2tlbnMgcmVjZWl2ZWQgaW4gcmV0dXJuIHRvIHRoZSBnaXZlbiBhbW91bnQgb2YgRVRILgogICAgfQoKICAgIC8vIChidXllcl9ldGhfYWRkcmVzcyAtPiBzdHJ1Y3QpCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gQmFja2VyKSBwdWJsaWMgYmFja2VyczsKCiAgICBDb21tb25Cc1Rva2VuIHB1YmxpYyB0b2tlbjsgLy8gVG9rZW4gY29udHJhY3QgcmVmZXJlbmNlLgogICAgYWRkcmVzcyBwdWJsaWMgYmVuZWZpY2lhcnk7IC8vIEFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgRVRIIHJhaXNlZCBkdXJpbmcgdGhpcyBjcm93ZHNhbGUuCgogICAgdWludDI1NiBwdWJsaWMgbWluQ29udHJpYnV0aW9uV2VpID0gMC4wMDAxIGV0aGVyOyAvLyA1MCB0b2tlbnMgLyAxIEVUSCA9IDAuMDIKICAgIHVpbnQyNTYgcHVibGljIG1heENhcFdlaSA9IDEyMDAwMCBldGhlcjsgLy8gNm0gLyA1MCB0b2tlbnMvRVRIIHRva2VucyB0aGF0IGNhbiBiZSBzb2xkCgoKICAgIHVpbnQyNTYgcHVibGljIHRva2Vuc1BlcldlaSA9IDUwOwogICAgCiAgICAvLyBUT0RPIEFsbCBib251cyB0b2tlbnMgc2hvdWxkIGJlIGxlZnQgdG8gb3duZXIvc2VsbGVyIG9uY2UgSUNPIGlzIG92ZXIuCiAgICB1aW50MjU2IHB1YmxpYyBib251c1Rva2Vuc0xlZnQgPSAxMjAwMDAwIGV0aGVyOwoKICAgIC8vIEVhY2ggc3RhZ2UgaXMgdXAgdG8gMU0gdG9rZW5zLCB0aGVuIHN0YWdlIGNoYW5nZXMuCiAgICBzdHJ1Y3QgU3RhZ2UgewogICAgICAgIHVpbnQyNTYgZnJvbVRva2VuczsKICAgICAgICB1aW50MjU2IHRvVG9rZW5zOwogICAgICAgIHVpbnQyNTYgcHJpY2U7CiAgICB9CgogICAgU3RhZ2VbXSBwdWJsaWMgc3RhZ2VzOwoKICAgIHVpbnQgcHVibGljIHN0YXJ0VGltZSA9IG5vdzsgICAgICAgIC8vIDE1MTIzODg4MDAgPSAyMDE3LTEyLTA0VDEyOjAwOjAwWgogICAgdWludCBwdWJsaWMgZW5kVGltZSAgID0gMTUxNjg4MTYwMDsgLy8gMTUxNjg4MTYwMCA9IDIwMTgtMDEtMjVUMTI6MDA6MDBaCgogICAgLy8gU3RhdHMgZm9yIGN1cnJlbnQgY3Jvd2RzYWxlCgogICAgdWludDI1NiBwdWJsaWMgdG90YWxJbldlaSAgICAgICAgID0gMDsgLy8gR3JhbmQgdG90YWwgaW4gd2VpCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFRva2Vuc1NvbGQgICAgPSAwOyAvLyBUb3RhbCBhbW91bnQgb2YgdG9rZW5zIHNvbGQgZHVyaW5nIHRoaXMgY3Jvd2RzYWxlLgogICAgdWludDI1NiBwdWJsaWMgdG90YWxFdGhTYWxlcyAgICAgID0gMDsgLy8gVG90YWwgYW1vdW50IG9mIEVUSCBjb250cmlidXRpb25zIGR1cmluZyB0aGlzIGNyb3dkc2FsZS4KICAgIHVpbnQyNTYgcHVibGljIHdlaVJlY2VpdmVkICAgICAgICA9IDA7IC8vIFRvdGFsIGFtb3VudCBvZiB3ZWkgcmVjZWl2ZWQgZHVyaW5nIHRoaXMgY3Jvd2RzYWxlIHNtYXJ0IGNvbnRyYWN0LgoKICAgIHVpbnQgcHVibGljIGZpbmFsaXplZFRpbWUgPSAwOyAvLyBVbml4IHRpbWVzdGFtcCB3aGVuIGZpbmFsaXplKCkgd2FzIGNhbGxlZC4KCiAgICBib29sIHB1YmxpYyBzYWxlRW5hYmxlZCA9IHRydWU7ICAgLy8gaWYgZmFsc2UsIHRoZW4gY29udHJhY3Qgd2lsbCBub3Qgc2VsbCB0b2tlbnMgb24gcGF5bWVudCByZWNlaXZlZAoKICAgIGV2ZW50IEJlbmVmaWNpYXJ5Q2hhbmdlZChhZGRyZXNzIGluZGV4ZWQgX29sZEFkZHJlc3MsIGFkZHJlc3MgaW5kZXhlZCBfbmV3QWRkcmVzcyk7CiAgICBldmVudCBFdGhSZWNlaXZlZChhZGRyZXNzIGluZGV4ZWQgX2J1eWVyLCB1aW50MjU2IF9hbW91bnRXZWkpOwoKICAgIG1vZGlmaWVyIGlmVW5kZXJNYXhDYXAoKSB7CiAgICAgICAgcmVxdWlyZSghaXNNYXhDYXBSZWFjaGVkKCkpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIENvbW1vbkJzQ3Jvd2RzYWxlKGFkZHJlc3MgX3Rva2VuLCBhZGRyZXNzIF9iZW5lZmljaWFyeSwgYWRkcmVzcyBfb3duZXIpIHsKICAgICAgICB0b2tlbiA9IENvbW1vbkJzVG9rZW4oX3Rva2VuKTsKICAgICAgICBiZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgICAgICBvd25lciA9IF9vd25lciAhPSAwID8gX293bmVyIDogbXNnLnNlbmRlcjsKICAgICAgICAKICAgICAgICBhZGROZXh0U3RhZ2UoMSwgNzUpOyAvLyAxbSwgNTAlIGJvbnVzCiAgICAgICAgYWRkTmV4dFN0YWdlKDIsIDY3KTsgLy8gMm0sIH4zNSUgKDY3LjUpCiAgICAgICAgYWRkTmV4dFN0YWdlKDMsIDYwKTsgLy8gM20sIDIwJQogICAgICAgIGFkZE5leHRTdGFnZSg0LCA1NSk7IC8vIDRtLCAxMCUKICAgICAgICBhZGROZXh0U3RhZ2UoNSwgNTIpOyAvLyA1bSwgfjUlICg1Mi41KQogICAgICAgIGFkZE5leHRTdGFnZSg2LCA1MCk7IC8vIDZtLCAwJSBib251cwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZGROZXh0U3RhZ2UodWludCBfbWF4TWlsVG9rZW5zLCB1aW50MjU2IF9zdGFnZVByaWNlKSBpbnRlcm5hbCB7CiAgICAgICAgc3RhZ2VzLnB1c2goU3RhZ2UoCiAgICAgICAgICAgIHRvTWlsVG9rZW5zKF9tYXhNaWxUb2tlbnMgLSAxKSwgCiAgICAgICAgICAgIHRvTWlsVG9rZW5zKF9tYXhNaWxUb2tlbnMpLCAKICAgICAgICAgICAgX3N0YWdlUHJpY2UKICAgICAgICApKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdG9NaWxUb2tlbnModWludCBfbnVtKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gc2FmZU11bChfbnVtLCAxMDAwMDAwIGV0aGVyKTsKICAgIH0KCiAgICAvLyBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBtb2NrIGN1cnJlbnQgdGltZS4KICAgIGZ1bmN0aW9uIGdldE5vdygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIG5vdzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRTYWxlRW5hYmxlZChib29sIF9lbmFibGVkKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBzYWxlRW5hYmxlZCA9IF9lbmFibGVkOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJlbmVmaWNpYXJ5KGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBCZW5lZmljaWFyeUNoYW5nZWQoYmVuZWZpY2lhcnksIF9iZW5lZmljaWFyeSk7CiAgICAgICAgYmVuZWZpY2lhcnkgPSBfYmVuZWZpY2lhcnk7CiAgICB9CgogICAgLyoKICAgICAqIFRoZSBmYWxsYmFjayBmdW5jdGlvbiBjb3JyZXNwb25kcyB0byBhIGRvbmF0aW9uIGluIEVUSAogICAgICovCiAgICBmdW5jdGlvbigpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBpZiAoc2FsZUVuYWJsZWQpIHNlbGxUb2tlbnNGb3JFdGgobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZWxsVG9rZW5zRm9yRXRoKGFkZHJlc3MgX2J1eWVyLCB1aW50MjU2IF9hbW91bnRXZWkpIGludGVybmFsIGlmTm90UGF1c2VkIGlmVW5kZXJNYXhDYXAgewoKICAgICAgICByZXF1aXJlKF9hbW91bnRXZWkgPj0gbWluQ29udHJpYnV0aW9uV2VpKTsKCiAgICAgICAgdG90YWxJbldlaSA9IHNhZmVBZGQodG90YWxJbldlaSwgX2Ftb3VudFdlaSk7CiAgICAgICAgd2VpUmVjZWl2ZWQgPSBzYWZlQWRkKHdlaVJlY2VpdmVkLCBfYW1vdW50V2VpKTsKICAgICAgICByZXF1aXJlKHRvdGFsSW5XZWkgPD0gbWF4Q2FwV2VpKTsgLy8gSWYgbWF4IGNhcCByZWFjaGVkLgoKICAgICAgICB1aW50MjU2IHRva2Vuc0UxOCA9IHdlaVRvVG9rZW5zKF9hbW91bnRXZWkpOwogICAgICAgIHJlcXVpcmUodG9rZW4uc2VsbChfYnV5ZXIsIHRva2Vuc0UxOCkpOyAvLyBUcmFuc2ZlciB0b2tlbnMgdG8gYnV5ZXIuCgogICAgICAgIHRvdGFsVG9rZW5zU29sZCA9IHNhZmVBZGQodG90YWxUb2tlbnNTb2xkLCB0b2tlbnNFMTgpOwogICAgICAgIHRvdGFsRXRoU2FsZXMrKzsKCiAgICAgICAgQmFja2VyIGJhY2tlciA9IGJhY2tlcnNbX2J1eWVyXTsKICAgICAgICBiYWNrZXIudG9rZW5zU2VudCA9IHNhZmVBZGQoYmFja2VyLnRva2Vuc1NlbnQsIHRva2Vuc0UxOCk7CiAgICAgICAgYmFja2VyLndlaVJlY2VpdmVkID0gc2FmZUFkZChiYWNrZXIud2VpUmVjZWl2ZWQsIF9hbW91bnRXZWkpOyAgLy8gVXBkYXRlIHRoZSB0b3RhbCB3ZWkgY29sbGVjdGVkIGR1cmluZyB0aGUgY3Jvd2RmdW5kaW5nIGZvciB0aGlzIGJhY2tlcgoKICAgICAgICBFdGhSZWNlaXZlZChfYnV5ZXIsIF9hbW91bnRXZWkpOwogICAgfQoKICAgIC8vIENhbGMgaG93IG11Y2ggdG9rZW5zIHlvdSBjYW4gYnV5IGF0IGN1cnJlbnQgdGltZS4KICAgIGZ1bmN0aW9uIHdlaVRvVG9rZW5zKHVpbnQyNTYgX2Ftb3VudFdlaSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHByaWNlID0gdG9rZW5zUGVyV2VpOwoKICAgICAgICAvLyBHZXQgYm9udXMgcmF0ZSBiYXNlZCBvbiBjdXJyZW50IHN0YWdlICg2IHN0YWdlcyBieSAxbSB0b2tlbnMgZWFjaCkKICAgICAgICAvLyBCb251cyBydWxlcyBhcHBsaWVzIG9ubHkgdW50aWwgY3Jvd2RzYWxlIGVuZCB0aW1lLiBObyBib251cyBhZnRlci4KICAgICAgICBpZiAoaXNTYWxlT24oKSkgewogICAgICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBzdGFnZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBzID0gc3RhZ2VzW2ldOwogICAgICAgICAgICAgICAgaWYgKHMuZnJvbVRva2VucyA8PSB0b3RhbFRva2Vuc1NvbGQgJiYgdG90YWxUb2tlbnNTb2xkIDw9IHMudG9Ub2tlbnMpIHsKICAgICAgICAgICAgICAgICAgICBwcmljZSA9IHMucHJpY2U7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBzYWZlTXVsKF9hbW91bnRXZWksIHByaWNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdGFnZUNvdW50KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gc3RhZ2VzLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBpc01heENhcFJlYWNoZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB0b3RhbEluV2VpID49IG1heENhcFdlaTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc1NhbGVPbigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgdWludCBfbm93ID0gZ2V0Tm93KCk7CiAgICAgICAgcmV0dXJuIHN0YXJ0VGltZSA8PSBfbm93ICYmIF9ub3cgPD0gZW5kVGltZTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc1NhbGVPdmVyKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gZ2V0Tm93KCkgPiBlbmRUaW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzRmluYWxpemVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gZmluYWxpemVkVGltZSA+IDA7CiAgICB9CgogICAgLyoKICAgICAqIEZpbmFsaXplIHRoZSBjcm93ZHNhbGUuIFJhaXNlZCBtb25leSBjYW4gYmUgc2VudCB0byBiZW5lZmljaWFyeSBvbmx5IGlmIGNyb3dkc2FsZSBoaXQgZW5kIHRpbWUgb3IgbWF4IGNhcCAoMTVtIFVTRCkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGZpbmFsaXplKCkgcHVibGljIG9ubHlPd25lciB7CgogICAgICAgIC8vIENhbm5vdCBmaW5hbGlzZSBiZWZvcmUgZW5kIGRheSBvZiBjcm93ZHNhbGUgdW50aWwgbWF4IGNhcCBpcyByZWFjaGVkLgogICAgICAgIHJlcXVpcmUoaXNNYXhDYXBSZWFjaGVkKCkgfHwgaXNTYWxlT3ZlcigpKTsKCiAgICAgICAgYmVuZWZpY2lhcnkudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKCiAgICAgICAgZmluYWxpemVkVGltZSA9IGdldE5vdygpOwogICAgfQp9Cgpjb250cmFjdCBDcm93ZHNhbGVEZXBsb3llciB7CgogICAgQ29tbW9uQnNUb2tlbiBwdWJsaWMgdG9rZW47CiAgICBDb21tb25Cc0Nyb3dkc2FsZSBwdWJsaWMgY3Jvd2RzYWxlOwoKICAgIGZ1bmN0aW9uIENyb3dkc2FsZURlcGxveWVyKCkgcHVibGljIHsKICAgICAgICB0b2tlbiA9IG5ldyBDb21tb25Cc1Rva2VuKAogICAgICAgICAgICAweDQ4ZUY4ODA4OWU1QTdDNmY1MzhFOTBFMGQ1RmZmYTM4Mjc3ZkQ5OEEsIC8vIF9zZWxsZXIgYWRkcmVzcwogICAgICAgICAgICAnWCBmdWxsJywKICAgICAgICAgICAgJ1gnLAogICAgICAgICAgICAxMDAwMDAwMCwKICAgICAgICAgICAgNzIwMDAwMAogICAgICAgICk7CiAgICAgICAgY3Jvd2RzYWxlID0gbmV3IENvbW1vbkJzQ3Jvd2RzYWxlKAogICAgICAgICAgICB0b2tlbiwgLy8gYWRkcmVzcyBfdG9rZW4KICAgICAgICAgICAgMHgzZGZhMGJERGI4MGY3NzFmNzE1REVBMUE3NTkyQ2UzRmM5YkYyRTY5LCAgLy8gYWRkcmVzcyBfYmVuZWZpY2lhcnkKICAgICAgICAgICAgbXNnLnNlbmRlcgogICAgICAgICk7CiAgICAgICAgdG9rZW4uYWRkT3duZXIobXNnLnNlbmRlcik7CiAgICAgICAgdG9rZW4uYWRkT3duZXIoY3Jvd2RzYWxlKTsKICAgIH0KfQ=='.
	

]
