Class {
	#name : #SRT5a8ffa5f2ce95b3a397bda16ad84781b6fde4f8b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5a8ffa5f2ce95b3a397bda16ad84781b6fde4f8b >> base64 [
	^ 'Ly8gRGF0YXJpdXMgdG9rZW5zYWxlIHNtYXJ0IGNvbnRyYWN0LgovLyBEZXZlbG9wZWQgYnkgUGhlbm9tLlRlYW0gPDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iODNlYWVkZTVlY2MzZjNlYmU2ZWRlY2VlYWRmN2U2ZTJlZSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+CnByYWdtYSBzb2xpZGl0eSBeMC40LjE1OwoKLyoqCiAqICAgQHRpdGxlIFNhZmVNYXRoCiAqICAgQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICBhc3NlcnQoYiA+IDApOwogICAgdWludCBjID0gYSAvIGI7CiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8qKgogKiAgIEB0aXRsZSBFUkMyMAogKiAgIEBkZXYgU3RhbmRhcnQgRVJDMjAgdG9rZW4gaW50ZXJmYWNlCiAqLwoKY29udHJhY3QgRVJDMjAgewogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHkgPSAwOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKTsKCn0gCgovKioKICogICBAdGl0bGUgRGF0YXJpdXNJQ08gY29udHJhY3QgIC0gdGFrZXMgZnVuZHMgZnJvbSB1c2VycyBhbmQgaXNzdWVzIHRva2VucwogKi8KY29udHJhY3QgRGF0YXJpdXNJQ08gewogICAgLy8gRFRSQyAtIERhdGFyaXVzIHRva2VuIGNvbnRyYWN0CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKICAgIERhdGFyaXVzVG9rZW4gcHVibGljIERUUkMgPSBuZXcgRGF0YXJpdXNUb2tlbih0aGlzKTsKICAgIEVSQzIwIHB1YmxpYyBwcmVTYWxlVG9rZW47CgogICAgLy8gVG9rZW4gcHJpY2UgcGFyYW1ldGVycwogICAgLy8gVGhlc2UgcGFyYW1ldGVzIGNhbiBiZSBjaGFuZ2VkIG9ubHkgYnkgbWFuYWdlciBvZiBjb250cmFjdAogICAgdWludCBwdWJsaWMgdG9rZW5zUGVyRG9sbGFyID0gMTAwOwogICAgdWludCBwdWJsaWMgcmF0ZUV0aCA9IDExNzY7IC8vIFJhdGUgVVNEIHBlciBFVEgKICAgIHVpbnQgcHVibGljIHRva2VuUHJpY2UgPSB0b2tlbnNQZXJEb2xsYXIgKiByYXRlRXRoOyAvLyBEVFJDIHBlciBFVEgKICAgIHVpbnQgcHVibGljIERhdFRvRHRyY051bWVyYXRvciA9IDQ1ODkwNTk1ODk7CiAgICB1aW50IHB1YmxpYyBEYXRUb0R0cmNEZW5vbWluYXRvciA9IDEwMDAwMDAwMDsKCiAgICAvL0Nyb3dkc2FsZSBwYXJhbWV0ZXJzCiAgICB1aW50IGNvbnN0YW50IHNvZnRDYXAgPSAxMDAwMDAwICogdG9rZW5zUGVyRG9sbGFyICogMWUxODsgCiAgICB1aW50IGNvbnN0YW50IGhhcmRDYXAgPSA1MTAwMDAwMCAqIHRva2Vuc1BlckRvbGxhciAqIDFlMTg7CiAgICB1aW50IGNvbnN0YW50IGJvdW50eVBhcnQgPSAyOyAvLyAyJSBvZiBUb3RhbFN1cHBseSBmb3IgQm91bnR5RnVuZAogICAgdWludCBjb25zdGFudCBwYXJ0bmVyc1BhcnQgPSA1OyAvLyA1JSBvZiBUb3RhbFN1cHBseSBmb3IgUGFybmVyc0Z1bmQKICAgIHVpbnQgY29uc3RhbnQgdGVhbVBhcnQgPSA1OyAvLyA1JSBvZiBUb3RhbFN1cHBseSBmb3IgVGVhbUZ1bmQKICAgIHVpbnQgY29uc3RhbnQgcmVzZXJ2ZVBhcnQgPSAxNTsgLy8gMTUlIG9mIFRvdGFsU3VwcGx5IGZvciBSZXNydmVGdW5kCiAgICB1aW50IGNvbnN0YW50IHB1YmxpY0ljb1BhcnQgPSA3MzsgLy8gNzMlIG9mIFRvdGFsU3VwcGx5IGZvciBwdWJsaWNJQ08KICAgIHVpbnQgcHVibGljIHNvbGRBbW91bnQgPSAwOwogICAgdWludCBzdGFydFRpbWUgPSAwOwogICAgLy8gT3V0cHV0IGV0aGVyZXVtIGFkZHJlc3NlcwogICAgYWRkcmVzcyBwdWJsaWMgQ29tcGFueTsKICAgIGFkZHJlc3MgcHVibGljIEJvdW50eUZ1bmQ7CiAgICBhZGRyZXNzIHB1YmxpYyBQYXJ0bmVyc0Z1bmQ7CiAgICBhZGRyZXNzIHB1YmxpYyBUZWFtRnVuZDsKICAgIGFkZHJlc3MgcHVibGljIFJlc2VydmVGdW5kOwogICAgYWRkcmVzcyBwdWJsaWMgTWFuYWdlcjsgLy8gTWFuYWdlciBjb250cm9scyBjb250cmFjdAogICAgYWRkcmVzcyBwdWJsaWMgUmVzZXJ2ZU1hbmFnZXI7IC8vIC8vIE1hbmFnZXIgY29udHJvbHMgY29udHJhY3QKICAgIGFkZHJlc3MgcHVibGljIENvbnRyb2xsZXJfQWRkcmVzczE7IC8vIEZpcnN0IGFkZHJlc3MgdGhhdCBpcyB1c2VkIHRvIGJ1eSB0b2tlbnMgZm9yIG90aGVyIGNyeXB0b3MKICAgIGFkZHJlc3MgcHVibGljIENvbnRyb2xsZXJfQWRkcmVzczI7IC8vIFNlY29uZCBhZGRyZXNzIHRoYXQgaXMgdXNlZCB0byBidXkgdG9rZW5zIGZvciBvdGhlciBjcnlwdG9zCiAgICBhZGRyZXNzIHB1YmxpYyBDb250cm9sbGVyX0FkZHJlc3MzOyAvLyBUaGlyZCBhZGRyZXNzIHRoYXQgaXMgdXNlZCB0byBidXkgdG9rZW5zIGZvciBvdGhlciBjcnlwdG9zCiAgICBhZGRyZXNzIHB1YmxpYyBSZWZ1bmRNYW5hZ2VyOyAvLyBSZWZ1bmQgbWFuYWdlciBhZGRyZXNzCiAgICBhZGRyZXNzIHB1YmxpYyBPcmFjbGU7IC8vIE9yYWNsZSBhZGRyZXNzCgogICAgLy8gUG9zc2libGUgSUNPIHN0YXR1c2VzCiAgICBlbnVtIFN0YXR1c0lDTyB7CiAgICAgICAgQ3JlYXRlZCwKICAgICAgICBTdGFydGVkLAogICAgICAgIFBhdXNlZCwKICAgICAgICBGaW5pc2hlZAogICAgfQogICAgU3RhdHVzSUNPIHN0YXR1c0lDTyA9IFN0YXR1c0lDTy5DcmVhdGVkOwogICAgCiAgICAvLyBNYXBwaW5ncwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBpbnZlc3RtZW50c0luRXRoOyAvLyBNYXBwaW5nIGZvciByZW1lbWJlcmluZyBldGhlciBvZiBpbnZlc3RvcnMKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgdG9rZW5zRXRoOyAvLyBNYXBwaW5nIGZvciByZW1lbWJlcmluZyB0b2tlbnMgb2YgaW52ZXN0b3JzIHdobyBpbnZlc3QgaW4gRVRICiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIHRva2Vuc090aGVyQ3J5cHRvOyAvLyBNYXBwaW5nIGZvciByZW1lbWJlcmluZyB0b2tlbnMgb2YgaW52ZXN0b3JzIHdobyBpbnZlc3QgaW4gb3RoZXIgY3J5cHRvIGN1cnJlbmNpZXMKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgc3dhcGVkOwogICAgLy8gRXZlbnRzIExvZwogICAgZXZlbnQgTG9nU3RhcnRJQ08oKTsKICAgIGV2ZW50IExvZ1BhdXNlKCk7CiAgICBldmVudCBMb2dGaW5pc2hJQ08oKTsKICAgIGV2ZW50IExvZ0J1eUZvckludmVzdG9yKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQgRFRSQ1ZhbHVlLCBzdHJpbmcgdHhIYXNoKTsKICAgIGV2ZW50IExvZ1N3YXBUb2tlbnMoYWRkcmVzcyBpbnZlc3RvciwgdWludCB0b2tlbnNBbW91bnQpOwogICAgZXZlbnQgTG9nUmV0dXJuRXRoKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQgZXRoKTsKICAgIGV2ZW50IExvZ1JldHVybk90aGVyQ3J5cHRvKGFkZHJlc3MgaW52ZXN0b3IsIHN0cmluZyBsb2dTdHJpbmcpOwoKICAgIC8vIE1vZGlmaWVycwogICAgLy8gQWxsb3dzIGV4ZWN1dGlvbiBieSB0aGUgbWFuYWdlcnMgb25seQogICAgbW9kaWZpZXIgbWFuYWdlcnNPbmx5IHsgCiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgKG1zZy5zZW5kZXIgPT0gTWFuYWdlcikgfHwKICAgICAgICAgICAgKG1zZy5zZW5kZXIgPT0gUmVzZXJ2ZU1hbmFnZXIpCiAgICAgICAgKTsKICAgICAgICBfOyAKICAgICB9CiAgICAvLyBBbGxvd3MgZXhlY3V0aW9uIGJ5IHRoZSBjb250cmFjdCBtYW5hZ2VyIG9ubHkKICAgIG1vZGlmaWVyIHJlZnVuZE1hbmFnZXJzT25seSB7IAogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBSZWZ1bmRNYW5hZ2VyKTsKICAgICAgICBfOyAKICAgICB9CiAgICAvLyBBbGxvd3MgZXhlY3V0aW9uIGJ5IHRoZSBvcmFjbGUgb25seQogICAgbW9kaWZpZXIgb3JhY2xlT25seSB7IAogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBPcmFjbGUpOwogICAgICAgIF87IAogICAgIH0KICAgIC8vIEFsbG93cyBleGVjdXRpb24gYnkgdGhlIG9uZSBvZiBjb250cm9sbGVycyBvbmx5CiAgICBtb2RpZmllciBjb250cm9sbGVyc09ubHkgewogICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIChtc2cuc2VuZGVyID09IENvbnRyb2xsZXJfQWRkcmVzczEpfHwKICAgICAgICAgICAgKG1zZy5zZW5kZXIgPT0gQ29udHJvbGxlcl9BZGRyZXNzMil8fAogICAgICAgICAgICAobXNnLnNlbmRlciA9PSBDb250cm9sbGVyX0FkZHJlc3MzKQogICAgICAgICk7CiAgICAgICAgXzsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgQ29udHJhY3QgY29uc3RydWN0b3IgZnVuY3Rpb24KICAgICovCiAgICBmdW5jdGlvbiBEYXRhcml1c0lDTygKICAgICAgICBhZGRyZXNzIF9wcmVTYWxlVG9rZW4sCiAgICAgICAgYWRkcmVzcyBfQ29tcGFueSwKICAgICAgICBhZGRyZXNzIF9Cb3VudHlGdW5kLAogICAgICAgIGFkZHJlc3MgX1BhcnRuZXJzRnVuZCwKICAgICAgICBhZGRyZXNzIF9SZXNlcnZlRnVuZCwKICAgICAgICBhZGRyZXNzIF9UZWFtRnVuZCwKICAgICAgICBhZGRyZXNzIF9NYW5hZ2VyLAogICAgICAgIGFkZHJlc3MgX1Jlc2VydmVNYW5hZ2VyLAogICAgICAgIGFkZHJlc3MgX0NvbnRyb2xsZXJfQWRkcmVzczEsCiAgICAgICAgYWRkcmVzcyBfQ29udHJvbGxlcl9BZGRyZXNzMiwKICAgICAgICBhZGRyZXNzIF9Db250cm9sbGVyX0FkZHJlc3MzLAogICAgICAgIGFkZHJlc3MgX1JlZnVuZE1hbmFnZXIsCiAgICAgICAgYWRkcmVzcyBfT3JhY2xlCiAgICAgICAgKSBwdWJsaWMgewogICAgICAgIHByZVNhbGVUb2tlbiA9IEVSQzIwKF9wcmVTYWxlVG9rZW4pOwogICAgICAgIENvbXBhbnkgPSBfQ29tcGFueTsKICAgICAgICBCb3VudHlGdW5kID0gX0JvdW50eUZ1bmQ7CiAgICAgICAgUGFydG5lcnNGdW5kID0gX1BhcnRuZXJzRnVuZDsKICAgICAgICBSZXNlcnZlRnVuZCA9IF9SZXNlcnZlRnVuZDsKICAgICAgICBUZWFtRnVuZCA9IF9UZWFtRnVuZDsKICAgICAgICBNYW5hZ2VyID0gX01hbmFnZXI7CiAgICAgICAgUmVzZXJ2ZU1hbmFnZXIgPSBfUmVzZXJ2ZU1hbmFnZXI7CiAgICAgICAgQ29udHJvbGxlcl9BZGRyZXNzMSA9IF9Db250cm9sbGVyX0FkZHJlc3MxOwogICAgICAgIENvbnRyb2xsZXJfQWRkcmVzczIgPSBfQ29udHJvbGxlcl9BZGRyZXNzMjsKICAgICAgICBDb250cm9sbGVyX0FkZHJlc3MzID0gX0NvbnRyb2xsZXJfQWRkcmVzczM7CiAgICAgICAgUmVmdW5kTWFuYWdlciA9IF9SZWZ1bmRNYW5hZ2VyOwogICAgICAgIE9yYWNsZSA9IF9PcmFjbGU7CiAgICB9CgogICAvKioKICAgICogICBAZGV2IEZ1bmN0aW9uIHRvIHNldCByYXRlIG9mIEVUSCBhbmQgdXBkYXRlIHRva2VuIHByaWNlCiAgICAqICAgQHBhcmFtIF9yYXRlRXRoICAgICAgIGN1cnJlbnQgRVRIIHJhdGUKICAgICovCiAgICBmdW5jdGlvbiBzZXRSYXRlKHVpbnQgX3JhdGVFdGgpIGV4dGVybmFsIG9yYWNsZU9ubHkgewogICAgICAgIHJhdGVFdGggPSBfcmF0ZUV0aDsKICAgICAgICB0b2tlblByaWNlID0gdG9rZW5zUGVyRG9sbGFyLm11bChyYXRlRXRoKTsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgRnVuY3Rpb24gdG8gc3RhcnQgSUNPCiAgICAqICAgU2V0cyBJQ08gc3RhdHVzIHRvIFN0YXJ0ZWQsIGluaXRzIHN0YXJ0VGltZQogICAgKi8KICAgIGZ1bmN0aW9uIHN0YXJ0SWNvKCkgZXh0ZXJuYWwgbWFuYWdlcnNPbmx5IHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uQ3JlYXRlZCB8fCBzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlBhdXNlZCk7CiAgICAgICAgaWYoc3RhdHVzSUNPID09IFN0YXR1c0lDTy5DcmVhdGVkKSB7CiAgICAgICAgICBzdGFydFRpbWUgPSBub3c7CiAgICAgICAgfQogICAgICAgIHN0YXR1c0lDTyA9IFN0YXR1c0lDTy5TdGFydGVkOwogICAgICAgIExvZ1N0YXJ0SUNPKCk7CiAgICB9CgogICAvKioKICAgICogICBAZGV2IEZ1bmN0aW9uIHRvIHBhdXNlIElDTwogICAgKiAgIFNldHMgSUNPIHN0YXR1cyB0byBQYXVzZWQKICAgICovCiAgICBmdW5jdGlvbiBwYXVzZUljbygpIGV4dGVybmFsIG1hbmFnZXJzT25seSB7CiAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uU3RhcnRlZCk7CiAgICAgICBzdGF0dXNJQ08gPSBTdGF0dXNJQ08uUGF1c2VkOwogICAgICAgTG9nUGF1c2UoKTsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgRnVuY3Rpb24gdG8gZmluaXNoIElDTwogICAgKiAgIEVtaXRzIHRva2VucyBmb3IgYm91bnR5IGNvbXBhbnksIHBhcnRuZXJzIGFuZCB0ZWFtCiAgICAqLwogICAgZnVuY3Rpb24gZmluaXNoSWNvKCkgZXh0ZXJuYWwgbWFuYWdlcnNPbmx5IHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uU3RhcnRlZCB8fCBzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlBhdXNlZCk7CiAgICAgICAgdWludCBhbHJlYWR5TWludGVkID0gRFRSQy50b3RhbFN1cHBseSgpOwogICAgICAgIHVpbnQgdG90YWxBbW91bnQgPSBhbHJlYWR5TWludGVkLm11bCgxMDApLmRpdihwdWJsaWNJY29QYXJ0KTsKICAgICAgICBEVFJDLm1pbnRUb2tlbnMoQm91bnR5RnVuZCwgYm91bnR5UGFydC5tdWwodG90YWxBbW91bnQpLmRpdigxMDApKTsKICAgICAgICBEVFJDLm1pbnRUb2tlbnMoUGFydG5lcnNGdW5kLCBwYXJ0bmVyc1BhcnQubXVsKHRvdGFsQW1vdW50KS5kaXYoMTAwKSk7CiAgICAgICAgRFRSQy5taW50VG9rZW5zKFRlYW1GdW5kLCB0ZWFtUGFydC5tdWwodG90YWxBbW91bnQpLmRpdigxMDApKTsKICAgICAgICBEVFJDLm1pbnRUb2tlbnMoUmVzZXJ2ZUZ1bmQsIHJlc2VydmVQYXJ0Lm11bCh0b3RhbEFtb3VudCkuZGl2KDEwMCkpOwogICAgICAgIGlmIChzb2xkQW1vdW50ID49IHNvZnRDYXApIHsKICAgICAgICAgICAgRFRSQy5kZWZyb3N0KCk7CiAgICAgICAgfQogICAgICAgIHN0YXR1c0lDTyA9IFN0YXR1c0lDTy5GaW5pc2hlZDsKICAgICAgICBMb2dGaW5pc2hJQ08oKTsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgRnVuY3Rpb24gdG8gc3dhcCB0b2tlbnMgZnJvbSBwcmUtc2FsZQogICAgKiAgIEBwYXJhbSBfaW52ZXN0b3IgICAgIHByZS1zYWxlIHRva2VucyBob2xkZXIgYWRkcmVzcwogICAgKi8KICAgIGZ1bmN0aW9uIHN3YXBUb2tlbnMoYWRkcmVzcyBfaW52ZXN0b3IpIGV4dGVybmFsIG1hbmFnZXJzT25seSB7CiAgICAgICAgIHJlcXVpcmUoIXN3YXBlZFtfaW52ZXN0b3JdICYmIHN0YXR1c0lDTyAhPSBTdGF0dXNJQ08uRmluaXNoZWQpOwogICAgICAgICBzd2FwZWRbX2ludmVzdG9yXSA9IHRydWU7CiAgICAgICAgIHVpbnQgdG9rZW5zVG9Td2FwID0gcHJlU2FsZVRva2VuLmJhbGFuY2VPZihfaW52ZXN0b3IpOwogICAgICAgICB1aW50IERUUkNUb2tlbnMgPSB0b2tlbnNUb1N3YXAubXVsKERhdFRvRHRyY051bWVyYXRvcikuZGl2KERhdFRvRHRyY0Rlbm9taW5hdG9yKTsKICAgICAgICAgRFRSQy5taW50VG9rZW5zKF9pbnZlc3RvciwgRFRSQ1Rva2Vucyk7CiAgICAgICAgIExvZ1N3YXBUb2tlbnMoX2ludmVzdG9yLCB0b2tlbnNUb1N3YXApOwogICAgfQogICAvKioKICAgICogICBAZGV2IEZhbGxiYWNrIGZ1bmN0aW9uIGNhbGxzIGJ1eShhZGRyZXNzIF9pbnZlc3RvciwgdWludCBfRFRSQ1ZhbHVlKSBmdW5jdGlvbiB0byBpc3N1ZSB0b2tlbnMKICAgICogICAgICAgIHdoZW4gaW52ZXN0b3Igc2VuZHMgRVRIIHRvIGFkZHJlc3Mgb2YgSUNPIGNvbnRyYWN0IGFuZCB0aGVuIHN0b3JlcyBpbnZlc3RtZW50IGFtb3VudCAKICAgICovCiAgICBmdW5jdGlvbigpIGV4dGVybmFsIHBheWFibGUgewogICAgICAgIGJ1eShtc2cuc2VuZGVyLCBtc2cudmFsdWUubXVsKHRva2VuUHJpY2UpKTsKICAgICAgICBpbnZlc3RtZW50c0luRXRoW21zZy5zZW5kZXJdID0gaW52ZXN0bWVudHNJbkV0aFttc2cuc2VuZGVyXS5hZGQobXNnLnZhbHVlKTsgCiAgICB9CgogICAvKioKICAgICogICBAZGV2IEZ1bmN0aW9uIHRvIGlzc3VlcyB0b2tlbnMgZm9yIGludmVzdG9ycyB3aG8gbWFkZSBwdXJjaGFzZXMgaW4gb3RoZXIgY3J5cHRvY3VycmVuY2llcwogICAgKiAgIEBwYXJhbSBfaW52ZXN0b3IgICAgIGFkZHJlc3MgdGhlIHRva2VucyB3aWxsIGJlIGlzc3VlZCB0bwogICAgKiAgIEBwYXJhbSBfdHhIYXNoICAgICAgIHRyYW5zYWN0aW9uIGhhc2ggb2YgaW52ZXN0b3IncyBwYXltZW50CiAgICAqICAgQHBhcmFtIF9EVFJDVmFsdWUgICAgbnVtYmVyIG9mIERUUkMgdG9rZW5zCiAgICAqLwoKICAgIGZ1bmN0aW9uIGJ1eUZvckludmVzdG9yKAogICAgICAgIGFkZHJlc3MgX2ludmVzdG9yLCAKICAgICAgICB1aW50IF9EVFJDVmFsdWUsIAogICAgICAgIHN0cmluZyBfdHhIYXNoCiAgICApIAogICAgICAgIGV4dGVybmFsIAogICAgICAgIGNvbnRyb2xsZXJzT25seSB7CiAgICAgICAgcmVxdWlyZShzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLlN0YXJ0ZWQpOwogICAgICAgIHJlcXVpcmUoc29sZEFtb3VudCArIF9EVFJDVmFsdWUgPD0gaGFyZENhcCk7CiAgICAgICAgdWludCBib251cyA9IGdldEJvbnVzKF9EVFJDVmFsdWUpOwogICAgICAgIHVpbnQgdG90YWwgPSBfRFRSQ1ZhbHVlLmFkZChib251cyk7CiAgICAgICAgRFRSQy5taW50VG9rZW5zKF9pbnZlc3RvciwgdG90YWwpOwogICAgICAgIHNvbGRBbW91bnQgPSBzb2xkQW1vdW50LmFkZChfRFRSQ1ZhbHVlKTsKICAgICAgICB0b2tlbnNPdGhlckNyeXB0b1tfaW52ZXN0b3JdID0gdG9rZW5zT3RoZXJDcnlwdG9bX2ludmVzdG9yXS5hZGQodG90YWwpOyAKICAgICAgICBMb2dCdXlGb3JJbnZlc3RvcihfaW52ZXN0b3IsIHRvdGFsLCBfdHhIYXNoKTsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgRnVuY3Rpb24gdG8gaXNzdWUgdG9rZW5zIGZvciBpbnZlc3RvcnMgd2hvIHBhaWQgaW4gZXRoZXIKICAgICogICBAcGFyYW0gX2ludmVzdG9yICAgICBhZGRyZXNzIHdoaWNoIHRoZSB0b2tlbnMgd2lsbCBiZSBpc3N1ZWQgdG9rZW5zCiAgICAqICAgQHBhcmFtIF9EVFJDVmFsdWUgICAgbnVtYmVyIG9mIERUUkMgdG9rZW5zCiAgICAqLwogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgX2ludmVzdG9yLCB1aW50IF9EVFJDVmFsdWUpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uU3RhcnRlZCk7CiAgICAgICAgcmVxdWlyZShzb2xkQW1vdW50ICsgX0RUUkNWYWx1ZSA8PSBoYXJkQ2FwKTsKICAgICAgICB1aW50IGJvbnVzID0gZ2V0Qm9udXMoX0RUUkNWYWx1ZSk7CiAgICAgICAgdWludCB0b3RhbCA9IF9EVFJDVmFsdWUuYWRkKGJvbnVzKTsKICAgICAgICBEVFJDLm1pbnRUb2tlbnMoX2ludmVzdG9yLCB0b3RhbCk7CiAgICAgICAgc29sZEFtb3VudCA9IHNvbGRBbW91bnQuYWRkKF9EVFJDVmFsdWUpOwogICAgICAgIHRva2Vuc0V0aFttc2cuc2VuZGVyXSA9IHRva2Vuc0V0aFttc2cuc2VuZGVyXS5hZGQodG90YWwpOyAKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgQ2FsY3VsYXRlcyBib251cyAKICAgICogICBAcGFyYW0gX3ZhbHVlICAgICAgICBhbW91bnQgb2YgdG9rZW5zCiAgICAqICAgQHJldHVybiAgICAgICAgICAgICAgYm9udXMgdmFsdWUKICAgICovCiAgICBmdW5jdGlvbiBnZXRCb251cyh1aW50IF92YWx1ZSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGJvbnVzID0gMDsKICAgICAgICBpZihub3cgPD0gc3RhcnRUaW1lICsgNiBob3VycykgewogICAgICAgICAgICBib251cyA9IF92YWx1ZS5tdWwoMzApLmRpdigxMDApOwogICAgICAgICAgICByZXR1cm4gYm9udXM7CiAgICAgICAgfQogICAgICAgIGlmKG5vdyA8PSBzdGFydFRpbWUgKyAxMiBob3VycykgewogICAgICAgICAgICBib251cyA9IF92YWx1ZS5tdWwoMjUpLmRpdigxMDApOwogICAgICAgICAgICByZXR1cm4gYm9udXM7CiAgICAgICAgfQogICAgICAgIGlmKG5vdyA8PSBzdGFydFRpbWUgKyAyNCBob3VycykgewogICAgICAgICAgICBib251cyA9IF92YWx1ZS5tdWwoMjApLmRpdigxMDApOwogICAgICAgICAgICByZXR1cm4gYm9udXM7CiAgICAgICAgfQogICAgICAgIGlmKG5vdyA8PSBzdGFydFRpbWUgKyA0OCBob3VycykgewogICAgICAgICAgICBib251cyA9IF92YWx1ZS5tdWwoMTUpLmRpdigxMDApOwogICAgICAgICAgICByZXR1cm4gYm9udXM7CiAgICAgICAgfQogICAgICAgIGlmKG5vdyA8PSBzdGFydFRpbWUgKyAxNSBkYXlzKSB7CiAgICAgICAgICAgIGJvbnVzID0gX3ZhbHVlLm11bCgxMCkuZGl2KDEwMCk7CiAgICAgICAgICAgIHJldHVybiBib251czsKICAgICAgICB9CiAgICByZXR1cm4gYm9udXM7CiAgICB9CgogICAvKioKICAgICogICBAZGV2IEFsbG93cyBpbnZlc3RvcnMgdG8gcmV0dXJuIHRoZWlyIGludmVzdG1lbnQgYWZ0ZXIgdGhlIElDTyBpcyBvdmVyCiAgICAqICAgaW4gdGhlIGNhc2Ugd2hlbiB0aGUgU29mdENhcCB3YXMgbm90IGFjaGlldmVkCiAgICAqLwogICAgZnVuY3Rpb24gcmVmdW5kRXRoZXIoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uRmluaXNoZWQgJiYgCiAgICAgICAgICAgIHNvbGRBbW91bnQgPCBzb2Z0Q2FwICYmIAogICAgICAgICAgICBpbnZlc3RtZW50c0luRXRoW21zZy5zZW5kZXJdID4gMAogICAgICAgICk7CiAgICAgICAgdWludCBldGhUb1JlZnVuZCA9IGludmVzdG1lbnRzSW5FdGhbbXNnLnNlbmRlcl07CiAgICAgICAgaW52ZXN0bWVudHNJbkV0aFttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgdWludCB0b2tlbnNUb0J1cm4gPSB0b2tlbnNFdGhbbXNnLnNlbmRlcl07CiAgICAgICAgdG9rZW5zRXRoW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBEVFJDLmJ1cm5Ub2tlbnMobXNnLnNlbmRlciwgdG9rZW5zVG9CdXJuKTsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV0aFRvUmVmdW5kKTsKICAgICAgICBMb2dSZXR1cm5FdGgobXNnLnNlbmRlciwgZXRoVG9SZWZ1bmQpOwogICAgfQoKICAgLyoqCiAgICAqICAgQGRldiBCdXJuIHRva2VucyBvZiBpbnZlc3RvcnMgd2hvIHBhaWQgaW4gb3RoZXIgY3J5cHRvY3VycmVuY2llcyBhZnRlciB0aGUgSUNPIGlzIG92ZXIKICAgICogICBpbiB0aGUgY2FzZSB3aGVuIHRoZSBTb2Z0Q2FwIHdhcyBub3QgYWNoaWV2ZWQKICAgICogICBAcGFyYW0gX2ludmVzdG9yICAgICBhZGRyZXNzIHdoaWNoIHRoZSB0b2tlbnMgd2lsbCBiZSBidXJudAogICAgKiAgIEBwYXJhbSBfbG9nU3RyaW5nICAgIHN0cmluZyB3aGljaCBjb250YWluIHBheW1lbnQgaW5mb3JtYXRpb24KICAgICovCiAgICBmdW5jdGlvbiByZWZ1bmRPdGhlckNyeXB0bygKICAgICAgICBhZGRyZXNzIF9pbnZlc3RvciwgCiAgICAgICAgc3RyaW5nIF9sb2dTdHJpbmcKICAgICkgCiAgICAgICAgcHVibGljCiAgICAgICAgcmVmdW5kTWFuYWdlcnNPbmx5IHsKICAgICAgICByZXF1aXJlKAogICAgICAgICAgICBzdGF0dXNJQ08gPT0gU3RhdHVzSUNPLkZpbmlzaGVkICYmIAogICAgICAgICAgICBzb2xkQW1vdW50IDwgc29mdENhcAogICAgICAgICk7CiAgICAgICAgdWludCB0b2tlbnNUb0J1cm4gPSB0b2tlbnNPdGhlckNyeXB0b1tfaW52ZXN0b3JdOwogICAgICAgIHRva2Vuc090aGVyQ3J5cHRvW19pbnZlc3Rvcl0gPSAwOwogICAgICAgIERUUkMuYnVyblRva2VucyhfaW52ZXN0b3IsIHRva2Vuc1RvQnVybik7CiAgICAgICAgTG9nUmV0dXJuT3RoZXJDcnlwdG8oX2ludmVzdG9yLCBfbG9nU3RyaW5nKTsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgQWxsb3dzIENvbXBhbnkgd2l0aGRyYXcgaW52ZXN0bWVudHMgd2hlbiBJQ08gaXMgb3ZlciBhbmQgc29mdCBjYXAgYWNoaWV2ZWQKICAgICovCiAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aGVyKCkgZXh0ZXJuYWwgbWFuYWdlcnNPbmx5IHsKICAgICAgICByZXF1aXJlKHN0YXR1c0lDTyA9PSBTdGF0dXNJQ08uRmluaXNoZWQgJiYgc29sZEFtb3VudCA+PSBzb2Z0Q2FwKTsKICAgICAgICBDb21wYW55LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9Cgp9CgovKioKICogICBAdGl0bGUgRGF0YXJpdXNUb2tlbgogKiAgIEBkZXYgRGF0YXJpdXMgdG9rZW4gY29udHJhY3QKICovCmNvbnRyYWN0IERhdGFyaXVzVG9rZW4gaXMgRVJDMjAgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiRGF0YXJpdXMgQ3JlZGl0IjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkRUUkMiOwogICAgdWludCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKCiAgICAvLyBJY28gY29udHJhY3QgYWRkcmVzcwogICAgYWRkcmVzcyBwdWJsaWMgaWNvOwogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludCB2YWx1ZSk7CiAgICAKICAgIC8vIFRva2VucyB0cmFuc2ZlciBhYmlsaXR5IHN0YXR1cwogICAgYm9vbCBwdWJsaWMgdG9rZW5zQXJlRnJvemVuID0gdHJ1ZTsKCiAgICAvLyBBbGxvd3MgZXhlY3V0aW9uIGJ5IHRoZSBvd25lciBvbmx5CiAgICBtb2RpZmllciBpY29Pbmx5IHsgCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGljbyk7IAogICAgICAgIF87IAogICAgfQoKICAgLyoqCiAgICAqICAgQGRldiBDb250cmFjdCBjb25zdHJ1Y3RvciBmdW5jdGlvbiBzZXRzIEljbyBhZGRyZXNzCiAgICAqICAgQHBhcmFtIF9pY28gICAgICAgICAgaWNvIGFkZHJlc3MKICAgICovCiAgICBmdW5jdGlvbiBEYXRhcml1c1Rva2VuKGFkZHJlc3MgX2ljbykgcHVibGljIHsKICAgICAgIGljbyA9IF9pY287CiAgICB9CgogICAvKioKICAgICogICBAZGV2IEZ1bmN0aW9uIHRvIG1pbnQgdG9rZW5zCiAgICAqICAgQHBhcmFtIF9ob2xkZXIgICAgICAgYmVuZWZpY2lhcnkgYWRkcmVzcyB0aGUgdG9rZW5zIHdpbGwgYmUgaXNzdWVkIHRvCiAgICAqICAgQHBhcmFtIF92YWx1ZSAgICAgICAgbnVtYmVyIG9mIHRva2VucyB0byBpc3N1ZQogICAgKi8KICAgIGZ1bmN0aW9uIG1pbnRUb2tlbnMoYWRkcmVzcyBfaG9sZGVyLCB1aW50IF92YWx1ZSkgZXh0ZXJuYWwgaWNvT25seSB7CiAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgYmFsYW5jZXNbX2hvbGRlcl0gPSBiYWxhbmNlc1tfaG9sZGVyXS5hZGQoX3ZhbHVlKTsKICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF92YWx1ZSk7CiAgICAgICBUcmFuc2ZlcigweDAsIF9ob2xkZXIsIF92YWx1ZSk7CiAgICB9CgoKICAgLyoqCiAgICAqICAgQGRldiBGdW5jdGlvbiB0byBlbmFibGUgdG9rZW4gdHJhbnNmZXJzCiAgICAqLwogICAgZnVuY3Rpb24gZGVmcm9zdCgpIGV4dGVybmFsIGljb09ubHkgewogICAgICAgdG9rZW5zQXJlRnJvemVuID0gZmFsc2U7CiAgICB9CgoKICAgLyoqCiAgICAqICAgQGRldiBCdXJuIFRva2VucwogICAgKiAgIEBwYXJhbSBfaG9sZGVyICAgICAgIHRva2VuIGhvbGRlciBhZGRyZXNzIHdoaWNoIHRoZSB0b2tlbnMgd2lsbCBiZSBidXJudAogICAgKiAgIEBwYXJhbSBfdmFsdWUgICAgICAgIG51bWJlciBvZiB0b2tlbnMgdG8gYnVybgogICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm5Ub2tlbnMoYWRkcmVzcyBfaG9sZGVyLCB1aW50IF92YWx1ZSkgZXh0ZXJuYWwgaWNvT25seSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfaG9sZGVyXSA+IDApOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX2hvbGRlcl0gPSBiYWxhbmNlc1tfaG9sZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBCdXJuKF9ob2xkZXIsIF92YWx1ZSk7CiAgICB9CgogICAvKioKICAgICogICBAZGV2IEdldCBiYWxhbmNlIG9mIHRva2VucyBob2xkZXIKICAgICogICBAcGFyYW0gX2hvbGRlciAgICAgICAgaG9sZGVyJ3MgYWRkcmVzcwogICAgKiAgIEByZXR1cm4gICAgICAgICAgICAgICBiYWxhbmNlIG9mIGludmVzdG9yCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX2hvbGRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgICByZXR1cm4gYmFsYW5jZXNbX2hvbGRlcl07CiAgICB9CgogICAvKioKICAgICogICBAZGV2IFNlbmQgY29pbnMKICAgICogICB0aHJvd3Mgb24gYW55IGVycm9yIHJhdGhlciB0aGVuIHJldHVybiBhIGZhbHNlIGZsYWcgdG8gbWluaW1pemUKICAgICogICB1c2VyIGVycm9ycwogICAgKiAgIEBwYXJhbSBfdG8gICAgICAgICAgIHRhcmdldCBhZGRyZXNzCiAgICAqICAgQHBhcmFtIF9hbW91bnQgICAgICAgdHJhbnNmZXIgYW1vdW50CiAgICAqCiAgICAqICAgQHJldHVybiB0cnVlIGlmIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZSghdG9rZW5zQXJlRnJvemVuKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgIC8qKgogICAgKiAgIEBkZXYgQW4gYWNjb3VudC9jb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIGNvaW5zCiAgICAqICAgdGhyb3dzIG9uIGFueSBlcnJvciByYXRoZXIgdGhlbiByZXR1cm4gYSBmYWxzZSBmbGFnIHRvIG1pbmltaXplIHVzZXIgZXJyb3JzCiAgICAqCiAgICAqICAgQHBhcmFtIF9mcm9tICAgICAgICAgc291cmNlIGFkZHJlc3MKICAgICogICBAcGFyYW0gX3RvICAgICAgICAgICB0YXJnZXQgYWRkcmVzcwogICAgKiAgIEBwYXJhbSBfYW1vdW50ICAgICAgIHRyYW5zZmVyIGFtb3VudAogICAgKgogICAgKiAgIEByZXR1cm4gdHJ1ZSBpZiB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKCF0b2tlbnNBcmVGcm96ZW4pOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX2Ftb3VudCk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KCgogICAvKioKICAgICogICBAZGV2IEFsbG93cyBhbm90aGVyIGFjY291bnQvY29udHJhY3QgdG8gc3BlbmQgc29tZSB0b2tlbnMgb24gaXRzIGJlaGFsZgogICAgKiAgIHRocm93cyBvbiBhbnkgZXJyb3IgcmF0aGVyIHRoZW4gcmV0dXJuIGEgZmFsc2UgZmxhZyB0byBtaW5pbWl6ZSB1c2VyIGVycm9ycwogICAgKgogICAgKiAgIGFsc28sIHRvIG1pbmltaXplIHRoZSByaXNrIG9mIHRoZSBhcHByb3ZlL3RyYW5zZmVyRnJvbSBhdHRhY2sgdmVjdG9yCiAgICAqICAgYXBwcm92ZSBoYXMgdG8gYmUgY2FsbGVkIHR3aWNlIGluIDIgc2VwYXJhdGUgdHJhbnNhY3Rpb25zIC0gb25jZSB0bwogICAgKiAgIGNoYW5nZSB0aGUgYWxsb3dhbmNlIHRvIDAgYW5kIHNlY29uZGx5IHRvIGNoYW5nZSBpdCB0byB0aGUgbmV3IGFsbG93YW5jZQogICAgKiAgIHZhbHVlCiAgICAqCiAgICAqICAgQHBhcmFtIF9zcGVuZGVyICAgICAgYXBwcm92ZWQgYWRkcmVzcwogICAgKiAgIEBwYXJhbSBfYW1vdW50ICAgICAgIGFsbG93YW5jZSBhbW91bnQKICAgICoKICAgICogICBAcmV0dXJuIHRydWUgaWYgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsCiAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZSgoX2Ftb3VudCA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX2Ftb3VudDsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAvKioKICAgICogICBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAqCiAgICAqICAgQHBhcmFtIF9vd25lciAgICAgICAgdGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMKICAgICogICBAcGFyYW0gX3NwZW5kZXIgICAgICB0aGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcwogICAgKgogICAgKiAgIEByZXR1cm4gICAgICAgICAgICAgIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyCiAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cn0='.
	

]
