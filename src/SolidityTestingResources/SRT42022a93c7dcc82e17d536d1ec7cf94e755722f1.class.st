Class {
	#name : #SRT42022a93c7dcc82e17d536d1ec7cf94e755722f1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT42022a93c7dcc82e17d536d1ec7cf94e755722f1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCgpjb250cmFjdCBEZWJ0VG9rZW4gewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogIC8qKgogIFJlY29nbml0aW9uIGRhdGEKICAqLwogIHN0cmluZyBwdWJsaWMgbmFtZTsKICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAnRFQwLjEnOwogIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzID0gMTg7CgogIC8qKgogIEVSQzIwIHByb3BlcnRpZXMKICAqLwogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZXM7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CgogIC8qKgogIE1pbnRhYmxlIFRva2VuIHByb3BlcnRpZXMKICAqLwogIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBNaW50RmluaXNoZWQoKTsKCiAgLyoqCiAgQWN0dWFsIGxvZ2ljIGRhdGEKICAqLwogIHVpbnQyNTYgcHVibGljIGRheUxlbmd0aDsvL051bWJlciBvZiBzZWNvbmRzIGluIGEgZGF5CiAgdWludDI1NiBwdWJsaWMgbG9hblRlcm07Ly9Mb2FuIHRlcm0gaW4gZGF5cwogIHVpbnQyNTYgcHVibGljIGV4Y2hhbmdlUmF0ZTsgLy9FeGNoYW5nZSByYXRlIGZvciBFdGhlciB0byBsb2FuIGNvaW5zCiAgdWludDI1NiBwdWJsaWMgaW5pdGlhbFN1cHBseTsgLy9LZWVwIHJlY29yZCBvZiBJbml0aWFsIHZhbHVlIG9mIExvYW4KICB1aW50MjU2IHB1YmxpYyBsb2FuQWN0aXZhdGlvbjsgLy9UaW1lc3RhbXAgdGhlIGxvYW4gd2FzIGZ1bmRlZAogIAogIHVpbnQyNTYgcHVibGljIGludGVyZXN0UmF0ZVBlckN5Y2xlOyAvL0ludGVyZXN0IHJhdGUgcGVyIGludGVyZXN0IGN5Y2xlCiAgdWludDI1NiBwdWJsaWMgaW50ZXJlc3RDeWNsZUxlbmd0aDsgLy9Ub3RhbCBudW1iZXIgb2YgZGF5cyBwZXIgaW50ZXJlc3QgY3ljbGUKICAKICB1aW50MjU2IHB1YmxpYyB0b3RhbEludGVyZXN0Q3ljbGVzOyAvL1RvdGFsIG51bWJlciBvZiBpbnRlcmVzdCBjeWNsZXMgY29tcGxldGVkCiAgdWludDI1NiBwdWJsaWMgbGFzdEludGVyZXN0Q3ljbGU7IC8vS2VlcCByZWNvcmQgb2YgSW5pdGlhbCB2YWx1ZSBvZiBMb2FuCiAgCiAgYWRkcmVzcyBwdWJsaWMgbGVuZGVyOyAvL1RoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGxvYW4gd2lsbCBiZSBmdW5kZWQsIGFuZCB0byB3aGljaCB0aGUgcmVmdW5kIHdpbGwgYmUgZGlyZWN0ZWQKICBhZGRyZXNzIHB1YmxpYyBib3Jyb3dlcjsKICAKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBQRVJDRU5UX0RJVklTT1IgPSAxMDA7CiAgCiAgZnVuY3Rpb24gRGVidFRva2VuKAogICAgICBzdHJpbmcgX3Rva2VuTmFtZSwKICAgICAgc3RyaW5nIF90b2tlblN5bWJvbCwKICAgICAgdWludDI1NiBfaW5pdGlhbEFtb3VudCwKICAgICAgdWludDI1NiBfZXhjaGFuZ2VSYXRlLAogICAgICB1aW50MjU2IF9kYXlMZW5ndGgsCiAgICAgIHVpbnQyNTYgX2xvYW5UZXJtLAogICAgICB1aW50MjU2IF9sb2FuQ3ljbGUsCiAgICAgIHVpbnQyNTYgX2ludGVyZXN0UmF0ZVBlckN5Y2xlLAogICAgICBhZGRyZXNzIF9sZW5kZXIsCiAgICAgIGFkZHJlc3MgX2JvcnJvd2VyCiAgICAgICkgewoKICAgICAgcmVxdWlyZShfZXhjaGFuZ2VSYXRlID4gMCk7CiAgICAgIHJlcXVpcmUoX2luaXRpYWxBbW91bnQgPiAwKTsKICAgICAgcmVxdWlyZShfZGF5TGVuZ3RoID4gMCk7CiAgICAgIHJlcXVpcmUoX2xvYW5DeWNsZSA+IDApOwoKICAgICAgcmVxdWlyZShfbGVuZGVyICE9IDB4MCk7CiAgICAgIHJlcXVpcmUoX2JvcnJvd2VyICE9IDB4MCk7CiAgICAgIAogICAgICBleGNoYW5nZVJhdGUgPSBfZXhjaGFuZ2VSYXRlOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4Y2hhbmdlIHJhdGUgZm9yIHRoZSBjb2lucwogICAgICBpbml0aWFsU3VwcGx5ID0gX2luaXRpYWxBbW91bnQubXVsKGV4Y2hhbmdlUmF0ZSk7ICAgICAgICAgICAgLy8gVXBkYXRlIGluaXRpYWwgc3VwcGx5CiAgICAgIHRvdGFsU3VwcGx5ID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1VwZGF0ZSB0b3RhbCBzdXBwbHkKICAgICAgYmFsYW5jZXNbX2JvcnJvd2VyXSA9IGluaXRpYWxTdXBwbHk7ICAgICAgICAgICAgICAgICAvLyBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucwoKICAgICAgbmFtZSA9IF90b2tlbk5hbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW1vdW50IG9mIGRlY2ltYWxzIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgIHN5bWJvbCA9IF90b2tlblN5bWJvbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHN5bWJvbCBmb3IgZGlzcGxheSBwdXJwb3NlcwogICAgICAKICAgICAgZGF5TGVuZ3RoID0gX2RheUxlbmd0aDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU2V0IHRoZSBsZW5ndGggb2YgZWFjaCBkYXkgaW4gc2Vjb25kcy4uLkZvciBkZXYgcHVycG9zZXMKICAgICAgbG9hblRlcm0gPSBfbG9hblRlcm07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU2V0IHRoZSBudW1iZXIgb2YgZGF5cywgZm9yIGxvYW4gbWF0dXJpdHkKICAgICAgaW50ZXJlc3RDeWNsZUxlbmd0aCA9IF9sb2FuQ3ljbGU7ICAgICAgICAgICAgICAgICAgIC8vc2V0IHRoZSBJbnRlcmVzdCBjeWNsZSBwZXJpb2QKICAgICAgaW50ZXJlc3RSYXRlUGVyQ3ljbGUgPSBfaW50ZXJlc3RSYXRlUGVyQ3ljbGU7ICAgICAgICAgICAgICAgICAgICAgIC8vU2V0IHRoZSBJbnRlcmVzdCByYXRlIHBlciBjeWNsZQogICAgICBsZW5kZXIgPSBfbGVuZGVyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zZXQgbGVuZGVyIGFkZHJlc3MKICAgICAgYm9ycm93ZXIgPSBfYm9ycm93ZXI7CgogICAgICBUcmFuc2ZlcigwLF9ib3Jyb3dlcix0b3RhbFN1cHBseSk7Ly9BbGxvdyBmdW5kaW5nIGJlIHRyYWNrZWQKICB9CgogIC8qKgogIERlYnQgdG9rZW4gZnVuY3Rpb25hbGl0eQogICAqLwogIGZ1bmN0aW9uIGFjdHVhbFRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgdWludDI1NiBjb2luczsKICAgIHVpbnQyNTYgY3ljbGU7CiAgICAoY29pbnMsY3ljbGUpID0gY2FsY3VsYXRlSW50ZXJlc3REdWUoKTsKICAgIHJldHVybiB0b3RhbFN1cHBseS5hZGQoY29pbnMpOwogIH0KCiAgLyoqCiAgRmV0Y2ggdG90YWwgdmFsdWUgb2YgbG9hbiBpbiB3ZWkgKEluaXRpYWwgK2ludGVyZXN0KQogICovCiAgZnVuY3Rpb24gZ2V0TG9hblZhbHVlKGJvb2wgaW5pdGlhbCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCl7CiAgICAvL1RPRE8gZ2V0IGEgbW9yZSBkeW5hbWljIHdheSB0byBjYWxjdWxhdGUKICAgIGlmKGluaXRpYWwgPT0gdHJ1ZSkKICAgICAgcmV0dXJuIGluaXRpYWxTdXBwbHkuZGl2KGV4Y2hhbmdlUmF0ZSk7CiAgICBlbHNlewogICAgICB1aW50IHRvdGFsVG9rZW5zID0gYWN0dWFsVG90YWxTdXBwbHkoKS5zdWIoYmFsYW5jZXNbYm9ycm93ZXJdKTsKICAgICAgcmV0dXJuIHRvdGFsVG9rZW5zLmRpdihleGNoYW5nZVJhdGUpOwogICAgfQogIH0KCiAgLyoqCiAgRmV0Y2ggdG90YWwgY29pbnMgZ2FpbmVkIGZyb20gaW50ZXJlc3QKICAqLwogIGZ1bmN0aW9uIGdldEludGVyZXN0KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpewogICAgcmV0dXJuIGFjdHVhbFRvdGFsU3VwcGx5KCkuc3ViKGluaXRpYWxTdXBwbHkpOwogIH0KCiAgLyoqCiAgQ2hlY2tzIHRoYXQgY2FsbGVyJ3MgYWRkcmVzcyBpcyB0aGUgbGVuZGVyCiAgKi8KICBmdW5jdGlvbiBpc0xlbmRlcigpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyhib29sKXsKICAgIHJldHVybiBtc2cuc2VuZGVyID09IGxlbmRlcjsKICB9CgogIC8qKgogIENoZWNrIHRoYXQgY2FsbGVyJ3MgYWRkcmVzcyBpcyB0aGUgYm9ycm93ZXIKICAqLwogIGZ1bmN0aW9uIGlzQm9ycm93ZXIoKSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKGJvb2wpewogICAgcmV0dXJuIG1zZy5zZW5kZXIgPT0gYm9ycm93ZXI7CiAgfQoKICBmdW5jdGlvbiBpc0xvYW5GdW5kZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbbGVuZGVyXSA+IDAgJiYgYmFsYW5jZXNbYm9ycm93ZXJdID09IDA7CiAgfQoKICAvKioKICBDaGVjayBpZiB0aGUgbG9hbiBpcyBtYXR1cmUgZm9yIGludGVyZXN0CiAgKi8KICBmdW5jdGlvbiBpc1Rlcm1PdmVyKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpewogICAgaWYobG9hbkFjdGl2YXRpb24gPT0gMCkKICAgICAgcmV0dXJuIGZhbHNlOwogICAgZWxzZQogICAgICByZXR1cm4gbm93ID49IGxvYW5BY3RpdmF0aW9uLmFkZCggZGF5TGVuZ3RoLm11bChsb2FuVGVybSkgKTsKICB9CgogIC8qKgogIENoZWNrIGlmIHVwZGF0ZUludGVyZXN0KCkgbmVlZHMgdG8gYmUgY2FsbGVkIGJlZm9yZSByZWZ1bmRMb2FuKCkKICAqLwogIGZ1bmN0aW9uIGlzSW50ZXJlc3RTdGF0dXNVcGRhdGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCl7CiAgICBpZighaXNUZXJtT3ZlcigpKQogICAgICByZXR1cm4gdHJ1ZTsKICAgIGVsc2UKICAgICAgcmV0dXJuICEoIG5vdyA+PSBsYXN0SW50ZXJlc3RDeWNsZS5hZGQoIGludGVyZXN0Q3ljbGVMZW5ndGgubXVsKGRheUxlbmd0aCkgKSApOwogIH0KCiAgLyoqCiAgY2FsY3VsYXRlIHRoZSB0b3RhbCBudW1iZXIgb2YgcGFzc2VkIGludGVyZXN0IGN5Y2xlcyBhbmQgY29pbiB2YWx1ZQogICovCiAgZnVuY3Rpb24gY2FsY3VsYXRlSW50ZXJlc3REdWUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2IF9jb2lucyx1aW50MjU2IF9jeWNsZSl7CiAgICBpZighaXNUZXJtT3ZlcigpIHx8ICFpc0xvYW5GdW5kZWQoKSkKICAgICAgcmV0dXJuICgwLDApOwogICAgZWxzZXsKICAgICAgdWludCB0aW1lRGlmZiA9IG5vdy5zdWIobGFzdEludGVyZXN0Q3ljbGUpOwogICAgICBfY3ljbGUgPSB0aW1lRGlmZi5kaXYoZGF5TGVuZ3RoLm11bChpbnRlcmVzdEN5Y2xlTGVuZ3RoKSApOwogICAgICBfY29pbnMgPSBfY3ljbGUubXVsKCBpbnRlcmVzdFJhdGVQZXJDeWNsZS5tdWwoaW5pdGlhbFN1cHBseSkgKS5kaXYoUEVSQ0VOVF9ESVZJU09SKTsvL0RlbGF5ZWQgZGl2aXNpb24gdG8gYXZvaWQgdG9vIGVhcmx5IGZsb29yCiAgICB9CiAgfQoKICAvKioKICBVcGRhdGUgdGhlIGludGVyZXN0IG9mIHRoZSBjb250cmFjdAogICovCiAgZnVuY3Rpb24gdXBkYXRlSW50ZXJlc3QoKSBwdWJsaWMgewogICAgcmVxdWlyZSggaXNUZXJtT3ZlcigpICk7CiAgICB1aW50IGludGVyZXN0X2NvaW5zOwogICAgdWludDI1NiBpbnRlcmVzdF9jeWNsZTsKICAgIChpbnRlcmVzdF9jb2lucyxpbnRlcmVzdF9jeWNsZSkgPSBjYWxjdWxhdGVJbnRlcmVzdER1ZSgpOwogICAgYXNzZXJ0KGludGVyZXN0X2NvaW5zID4gMCAmJiBpbnRlcmVzdF9jeWNsZSA+IDApOwogICAgdG90YWxJbnRlcmVzdEN5Y2xlcyA9ICB0b3RhbEludGVyZXN0Q3ljbGVzLmFkZChpbnRlcmVzdF9jeWNsZSk7CiAgICBsYXN0SW50ZXJlc3RDeWNsZSA9IGxhc3RJbnRlcmVzdEN5Y2xlLmFkZCggaW50ZXJlc3RfY3ljbGUubXVsKCBpbnRlcmVzdEN5Y2xlTGVuZ3RoLm11bChkYXlMZW5ndGgpICkgKTsKICAgIG1pbnQobGVuZGVyICwgaW50ZXJlc3RfY29pbnMpOwogIH0KCiAgLyoqCiAgTWFrZSBwYXltZW50IHRvIGluaXRpdGF0ZSBsb2FuCiAgKi8KICBmdW5jdGlvbiBmdW5kTG9hbigpIHB1YmxpYyBwYXlhYmxlewogICAgcmVxdWlyZShpc0xlbmRlcigpKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID09IGdldExvYW5WYWx1ZSh0cnVlKSk7IC8vRW5zdXJlIGlucHV0IGF2YWlsYWJsZQogICAgcmVxdWlyZSghaXNMb2FuRnVuZGVkKCkpOyAvL0F2b2lkIGRvdWJsZSBwYXltZW50CgogICAgbG9hbkFjdGl2YXRpb24gPSBub3c7ICAvL3N0b3JlIHRoZSB0aW1lIGxvYW4gd2FzIGFjdGl2YXRlZAogICAgbGFzdEludGVyZXN0Q3ljbGUgPSBub3cuYWRkKGRheUxlbmd0aC5tdWwobG9hblRlcm0pICkgOyAvL3N0b3JlIHRoZSBkYXRlIGludGVyZXN0IG1hdHVyZXMKICAgIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgLy9FbmFibGUgbWludGluZwogICAgdHJhbnNmZXJGcm9tKGJvcnJvd2VyLGxlbmRlcix0b3RhbFN1cHBseSk7CgogICAgYm9ycm93ZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKICB9CgogIC8qKgogIE1ha2UgcGF5bWVudCB0byByZWZ1bmQgbG9hbgogICovCiAgZnVuY3Rpb24gcmVmdW5kTG9hbigpIG9ubHlCb3Jyb3dlciBwdWJsaWMgcGF5YWJsZXsKICAgIGlmKCEgaXNJbnRlcmVzdFN0YXR1c1VwZGF0ZWQoKSApCiAgICAgICAgdXBkYXRlSW50ZXJlc3QoKTsgLy9FbnN1cmUgSW50ZXJlc3QgaXMgdXBkYXRlZAoKICAgIHJlcXVpcmUobXNnLnZhbHVlID09IGdldExvYW5WYWx1ZShmYWxzZSkpOwogICAgcmVxdWlyZShpc0xvYW5GdW5kZWQoKSk7CgogICAgZmluaXNoTWludGluZygpIDsvL1ByZXZlbnQgZnVydGhlciBNaW50aW5nCiAgICB0cmFuc2ZlckZyb20obGVuZGVyLGJvcnJvd2VyLHRvdGFsU3VwcGx5KTsKCiAgICBsZW5kZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKICB9CgogIC8qKgogIFBhcnRpYWwgRVJDMjAgZnVuY3Rpb25hbGl0eQogICAqLwoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgaW50ZXJuYWwgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgTWludGFibGVUb2tlbiBmdW5jdGlvbmFsaXR5CiAgICovCgogIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNlaXZlIHRoZSBtaW50ZWQgdG9rZW5zLgogICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIG1pbnQuCiAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIGNhbk1pbnQgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CiAgICBNaW50KF90bywgX2Ftb3VudCk7CiAgICBUcmFuc2ZlcigweDAsIF90bywgX2Ftb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gc3RvcCBtaW50aW5nIG5ldyB0b2tlbnMuCiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIG9ubHlCb3Jyb3dlciBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgTWludEZpbmlzaGVkKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgoKICAvKioKICBGYWxsYmFjayBmdW5jdGlvbgogICovCiAgZnVuY3Rpb24oKSBwdWJsaWMgcGF5YWJsZXsKICAgIHJlcXVpcmUoaW5pdGlhbFN1cHBseSA+IDApOy8vU3RvcCB0aGUgd2hvbGUgcHJvY2VzcyBpZiBpbml0aWFsU3VwcGx5IG5vdCBzZXQKICAgIGlmKGlzQm9ycm93ZXIoKSkKICAgICAgcmVmdW5kTG9hbigpOwogICAgZWxzZSBpZihpc0xlbmRlcigpKQogICAgICBmdW5kTG9hbigpOwogICAgZWxzZSByZXZlcnQoKTsgLy9UaHJvdyBpZiBuZWl0aGVyIG9mIGNhc2VzIGFwcGx5LCBlbnN1cmUgbm8gZnJlZSBtb25leQogIH0KCiAgLyoqCiAgTW9kaWZpZXJzCiAgKi8KICBtb2RpZmllciBvbmx5Qm9ycm93ZXIoKSB7CiAgICByZXF1aXJlKGlzQm9ycm93ZXIoKSk7CiAgICBfOwogIH0KfQoKY29udHJhY3QgRGVidFRva2VuRGVwbG95ZXIgaXMgT3duYWJsZXsKCiAgICBhZGRyZXNzIHB1YmxpYyBkYXlUb2tlbkFkZHJlc3M7CiAgICB1aW50IHB1YmxpYyBkYXlUb2tlbkZlZXM7IC8vREFZIHRva2VucyB0byBiZSBwYWlkIGZvciBkZXBsb3lpbmcgY3VzdG9tIERBWSBjb250cmFjdAogICAgRVJDMjAgZGF5VG9rZW47CgogICAgZXZlbnQgRmVlVXBkYXRlZCh1aW50IF9mZWUsIHVpbnQgX3RpbWUpOwogICAgZXZlbnQgRGVidFRva2VuQ3JlYXRlZChhZGRyZXNzICBfY3JlYXRvciwgYWRkcmVzcyBfZGVidFRva2VuQWRkcmVzcywgdWludDI1NiBfdGltZSk7CgogICAgZnVuY3Rpb24gRGVidFRva2VuRGVwbG95ZXIoYWRkcmVzcyBfZGF5VG9rZW5BZGRyZXNzLCB1aW50IF9kYXlUb2tlbkZlZXMpewogICAgICAgIGRheVRva2VuQWRkcmVzcyA9IF9kYXlUb2tlbkFkZHJlc3M7CiAgICAgICAgZGF5VG9rZW5GZWVzID0gX2RheVRva2VuRmVlczsKICAgICAgICBkYXlUb2tlbiA9IEVSQzIwKGRheVRva2VuQWRkcmVzcyk7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlRGF5VG9rZW5GZWVzKHVpbnQgX2RheVRva2VuRmVlcykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgZGF5VG9rZW5GZWVzID0gX2RheVRva2VuRmVlczsKICAgICAgICBGZWVVcGRhdGVkKGRheVRva2VuRmVlcywgbm93KTsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVEZWJ0VG9rZW4oc3RyaW5nIF90b2tlbk5hbWUsCiAgICAgICAgc3RyaW5nIF90b2tlblN5bWJvbCwKICAgICAgICB1aW50MjU2IF9pbml0aWFsQW1vdW50LAogICAgICAgIHVpbnQyNTYgX2V4Y2hhbmdlUmF0ZSwKICAgICAgICB1aW50MjU2IF9kYXlMZW5ndGgsCiAgICAgICAgdWludDI1NiBfbG9hblRlcm0sCiAgICAgICAgdWludDI1NiBfbG9hbkN5Y2xlLAogICAgICAgIHVpbnQyNTYgX2ludHJlc3RSYXRlUGVyQ3ljbGUsCiAgICAgICAgYWRkcmVzcyBfbGVuZGVyKQogICAgcHVibGljCiAgICB7CiAgICAgICAgaWYoZGF5VG9rZW4udHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIHRoaXMsIGRheVRva2VuRmVlcykpewogICAgICAgICAgICBEZWJ0VG9rZW4gbmV3RGVidFRva2VuID0gbmV3IERlYnRUb2tlbihfdG9rZW5OYW1lLCBfdG9rZW5TeW1ib2wsIF9pbml0aWFsQW1vdW50LCBfZXhjaGFuZ2VSYXRlLAogICAgICAgICAgICAgICAgIF9kYXlMZW5ndGgsIF9sb2FuVGVybSwgX2xvYW5DeWNsZSwKICAgICAgICAgICAgICAgIF9pbnRyZXN0UmF0ZVBlckN5Y2xlLCBfbGVuZGVyLCBtc2cuc2VuZGVyKTsKICAgICAgICAgICAgRGVidFRva2VuQ3JlYXRlZChtc2cuc2VuZGVyLCBhZGRyZXNzKG5ld0RlYnRUb2tlbiksIG5vdyk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIHRvIGNvbGxlY3QgYWxsIGZlZXMgcGFpZCB0aWxsIG5vdwogICAgZnVuY3Rpb24gZmV0Y2hEYXlUb2tlbnMoKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBkYXlUb2tlbi50cmFuc2Zlcihvd25lciwgZGF5VG9rZW4uYmFsYW5jZU9mKHRoaXMpKTsKICAgIH0KfQ=='.
	

]
