Class {
	#name : #SRT27500ae27b6b6ad7de7d64b1def90f3e6e7ced47,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT27500ae27b6b6ad7de7d64b1def90f3e6e7ced47 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgoKY29udHJhY3QgT3duZWQgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShpc093bmVyKG1zZy5zZW5kZXIpKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIE93bmVkKCkgeyBvd25lciA9IG1zZy5zZW5kZXI7IH0KCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgYWRkcikgcHVibGljIHJldHVybnMoYm9vbCkgeyByZXR1cm4gYWRkciA9PSBvd25lcjsgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgfQogICAgfQp9Cgpjb250cmFjdCBQcm94eSBpcyBPd25lZCB7CiAgICBldmVudCBGb3J3YXJkZWQgKGFkZHJlc3MgaW5kZXhlZCBkZXN0aW5hdGlvbiwgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSk7CiAgICBldmVudCBSZWNlaXZlZCAoYWRkcmVzcyBpbmRleGVkIHNlbmRlciwgdWludCB2YWx1ZSk7CgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7IFJlY2VpdmVkKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7IH0KCiAgICBmdW5jdGlvbiBmb3J3YXJkKGFkZHJlc3MgZGVzdGluYXRpb24sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoZGVzdGluYXRpb24uY2FsbC52YWx1ZSh2YWx1ZSkoZGF0YSkpOwogICAgICAgIEZvcndhcmRlZChkZXN0aW5hdGlvbiwgdmFsdWUsIGRhdGEpOwogICAgfQp9CgoKY29udHJhY3QgTWV0YUlkZW50aXR5TWFuYWdlciB7CiAgICB1aW50IGFkbWluVGltZUxvY2s7CiAgICB1aW50IHVzZXJUaW1lTG9jazsKICAgIHVpbnQgYWRtaW5SYXRlOwogICAgYWRkcmVzcyByZWxheTsKCiAgICBldmVudCBMb2dJZGVudGl0eUNyZWF0ZWQoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGlkZW50aXR5LAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBjcmVhdG9yLAogICAgICAgIGFkZHJlc3Mgb3duZXIsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHJlY292ZXJ5S2V5KTsKCiAgICBldmVudCBMb2dPd25lckFkZGVkKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBpZGVudGl0eSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgb3duZXIsCiAgICAgICAgYWRkcmVzcyBpbnN0aWdhdG9yKTsKCiAgICBldmVudCBMb2dPd25lclJlbW92ZWQoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGlkZW50aXR5LAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBvd25lciwKICAgICAgICBhZGRyZXNzIGluc3RpZ2F0b3IpOwoKICAgIGV2ZW50IExvZ1JlY292ZXJ5Q2hhbmdlZCgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgaWRlbnRpdHksCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHJlY292ZXJ5S2V5LAogICAgICAgIGFkZHJlc3MgaW5zdGlnYXRvcik7CgogICAgZXZlbnQgTG9nTWlncmF0aW9uSW5pdGlhdGVkKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBpZGVudGl0eSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgbmV3SWRNYW5hZ2VyLAogICAgICAgIGFkZHJlc3MgaW5zdGlnYXRvcik7CgogICAgZXZlbnQgTG9nTWlncmF0aW9uQ2FuY2VsZWQoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGlkZW50aXR5LAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBuZXdJZE1hbmFnZXIsCiAgICAgICAgYWRkcmVzcyBpbnN0aWdhdG9yKTsKCiAgICBldmVudCBMb2dNaWdyYXRpb25GaW5hbGl6ZWQoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGlkZW50aXR5LAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBuZXdJZE1hbmFnZXIsCiAgICAgICAgYWRkcmVzcyBpbnN0aWdhdG9yKTsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpKSBvd25lcnM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYWRkcmVzcykgcmVjb3ZlcnlLZXlzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSkgbGltaXRlcjsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgbWlncmF0aW9uSW5pdGlhdGVkOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGFkZHJlc3MpIHB1YmxpYyBtaWdyYXRpb25OZXdBZGRyZXNzOwoKICAgIG1vZGlmaWVyIG9ubHlBdXRob3JpemVkKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSByZWxheSB8fCBjaGVja01lc3NhZ2VEYXRhKG1zZy5zZW5kZXIpKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lcihhZGRyZXNzIGlkZW50aXR5LCBhZGRyZXNzIHNlbmRlcikgewogICAgICAgIHJlcXVpcmUoaXNPd25lcihpZGVudGl0eSwgc2VuZGVyKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T2xkZXJPd25lcihhZGRyZXNzIGlkZW50aXR5LCBhZGRyZXNzIHNlbmRlcikgewogICAgICAgIHJlcXVpcmUoaXNPbGRlck93bmVyKGlkZW50aXR5LCBzZW5kZXIpKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlSZWNvdmVyeShhZGRyZXNzIGlkZW50aXR5LCBhZGRyZXNzIHNlbmRlcikgewogICAgICAgIHJlcXVpcmUocmVjb3ZlcnlLZXlzW2lkZW50aXR5XSA9PSBzZW5kZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgcmF0ZUxpbWl0ZWQoUHJveHkgaWRlbnRpdHksIGFkZHJlc3Mgc2VuZGVyKSB7CiAgICAgICAgcmVxdWlyZShsaW1pdGVyW2lkZW50aXR5XVtzZW5kZXJdIDwgKG5vdyAtIGFkbWluUmF0ZSkpOwogICAgICAgIGxpbWl0ZXJbaWRlbnRpdHldW3NlbmRlcl0gPSBub3c7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciB2YWxpZEFkZHJlc3MoYWRkcmVzcyBhZGRyKSB7IC8vcHJvdGVjdHMgYWdhaW5zdCBzb21lIHdlaXJkIGF0dGFja3MKICAgICAgICByZXF1aXJlKGFkZHIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBDb250cmFjdCBjb25zdHJ1Y3RvciBzZXRzIGluaXRpYWwgdGltZWxvY2tzIGFuZCBtZXRhLXR4IHJlbGF5IGFkZHJlc3MKICAgIC8vLyBAcGFyYW0gX3VzZXJUaW1lTG9jayBUaW1lIGJlZm9yZSBuZXcgb3duZXIgYWRkZWQgYnkgcmVjb3ZlcnkgY2FuIGNvbnRyb2wgcHJveHkKICAgIC8vLyBAcGFyYW0gX2FkbWluVGltZUxvY2sgVGltZSBiZWZvcmUgbmV3IG93bmVyIGNhbiBhZGQvcmVtb3ZlIG93bmVycwogICAgLy8vIEBwYXJhbSBfYWRtaW5SYXRlIFRpbWUgcGVyaW9kIHVzZWQgZm9yIHJhdGUgbGltaXRpbmcgYSBnaXZlbiBrZXkgZm9yIGFkbWluIGZ1bmN0aW9uYWxpdHkKICAgIC8vLyBAcGFyYW0gX3JlbGF5QWRkcmVzcyBBZGRyZXNzIG9mIG1ldGEgdHJhbnNhY3Rpb24gcmVsYXkgY29udHJhY3QKICAgIGZ1bmN0aW9uIE1ldGFJZGVudGl0eU1hbmFnZXIodWludCBfdXNlclRpbWVMb2NrLCB1aW50IF9hZG1pblRpbWVMb2NrLCB1aW50IF9hZG1pblJhdGUsIGFkZHJlc3MgX3JlbGF5QWRkcmVzcykgewogICAgICAgIHJlcXVpcmUoX2FkbWluVGltZUxvY2sgPj0gX3VzZXJUaW1lTG9jayk7CiAgICAgICAgYWRtaW5UaW1lTG9jayA9IF9hZG1pblRpbWVMb2NrOwogICAgICAgIHVzZXJUaW1lTG9jayA9IF91c2VyVGltZUxvY2s7CiAgICAgICAgYWRtaW5SYXRlID0gX2FkbWluUmF0ZTsKICAgICAgICByZWxheSA9IF9yZWxheUFkZHJlc3M7CiAgICB9CgogICAgLy8vIEBkZXYgQ3JlYXRlcyBhIG5ldyBwcm94eSBjb250cmFjdCBmb3IgYW4gb3duZXIgYW5kIHJlY292ZXJ5CiAgICAvLy8gQHBhcmFtIG93bmVyIEtleSB3aG8gY2FuIHVzZSB0aGlzIGNvbnRyYWN0IHRvIGNvbnRyb2wgcHJveHkuIEdpdmVuIGZ1bGwgcG93ZXIKICAgIC8vLyBAcGFyYW0gcmVjb3ZlcnlLZXkgS2V5IG9mIHJlY292ZXJ5IG5ldHdvcmsgb3IgYWRkcmVzcyBmcm9tIHNlZWQgdG8gcmVjb3ZlcnkgcHJveHkKICAgIC8vLyBHYXMgY29zdCBvZiB+MzAwLDAwMAogICAgZnVuY3Rpb24gY3JlYXRlSWRlbnRpdHkoYWRkcmVzcyBvd25lciwgYWRkcmVzcyByZWNvdmVyeUtleSkgcHVibGljIHZhbGlkQWRkcmVzcyhyZWNvdmVyeUtleSkgewogICAgICAgIFByb3h5IGlkZW50aXR5ID0gbmV3IFByb3h5KCk7CiAgICAgICAgb3duZXJzW2lkZW50aXR5XVtvd25lcl0gPSBub3cgLSBhZG1pblRpbWVMb2NrOyAvLyBUaGlzIGlzIHRvIGVuc3VyZSBvcmlnaW5hbCBvd25lciBoYXMgZnVsbCBwb3dlciBmcm9tIGRheSBvbmUKICAgICAgICByZWNvdmVyeUtleXNbaWRlbnRpdHldID0gcmVjb3ZlcnlLZXk7CiAgICAgICAgTG9nSWRlbnRpdHlDcmVhdGVkKGlkZW50aXR5LCBtc2cuc2VuZGVyLCBvd25lciwgIHJlY292ZXJ5S2V5KTsKICAgIH0KCiAgICAvLy8gQGRldiBDcmVhdGVzIGEgbmV3IHByb3h5IGNvbnRyYWN0IGZvciBhbiBvd25lciBhbmQgcmVjb3ZlcnkgYW5kIGFsbG93cyBhbiBpbml0aWFsIGZvcndhcmQgY2FsbCB3aGljaCB3b3VsZCBiZSB0byBzZXQgdGhlIHJlZ2lzdHJ5IGluIG91ciBjYXNlCiAgICAvLy8gQHBhcmFtIG93bmVyIEtleSB3aG8gY2FuIHVzZSB0aGlzIGNvbnRyYWN0IHRvIGNvbnRyb2wgcHJveHkuIEdpdmVuIGZ1bGwgcG93ZXIKICAgIC8vLyBAcGFyYW0gcmVjb3ZlcnlLZXkgS2V5IG9mIHJlY292ZXJ5IG5ldHdvcmsgb3IgYWRkcmVzcyBmcm9tIHNlZWQgdG8gcmVjb3ZlcnkgcHJveHkKICAgIC8vLyBAcGFyYW0gZGVzdGluYXRpb24gQWRkcmVzcyBvZiBjb250cmFjdCB0byBiZSBjYWxsZWQgYWZ0ZXIgcHJveHkgaXMgY3JlYXRlZAogICAgLy8vIEBwYXJhbSBkYXRhIG9mIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBhdCB0aGUgZGVzdGluYXRpb24gY29udHJhY3QKICAgIGZ1bmN0aW9uIGNyZWF0ZUlkZW50aXR5V2l0aENhbGwoYWRkcmVzcyBvd25lciwgYWRkcmVzcyByZWNvdmVyeUtleSwgYWRkcmVzcyBkZXN0aW5hdGlvbiwgYnl0ZXMgZGF0YSkgcHVibGljIHZhbGlkQWRkcmVzcyhyZWNvdmVyeUtleSkgewogICAgICAgIFByb3h5IGlkZW50aXR5ID0gbmV3IFByb3h5KCk7CiAgICAgICAgb3duZXJzW2lkZW50aXR5XVtvd25lcl0gPSBub3cgLSBhZG1pblRpbWVMb2NrOyAvLyBUaGlzIGlzIHRvIGVuc3VyZSBvcmlnaW5hbCBvd25lciBoYXMgZnVsbCBwb3dlciBmcm9tIGRheSBvbmUKICAgICAgICByZWNvdmVyeUtleXNbaWRlbnRpdHldID0gcmVjb3ZlcnlLZXk7CiAgICAgICAgTG9nSWRlbnRpdHlDcmVhdGVkKGlkZW50aXR5LCBtc2cuc2VuZGVyLCBvd25lciwgIHJlY292ZXJ5S2V5KTsKICAgICAgICBpZGVudGl0eS5mb3J3YXJkKGRlc3RpbmF0aW9uLCAwLCBkYXRhKTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgYSB1c2VyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgZXhpc3RpbmcgcHJveHkgdG8gdGhpcyBjb250cmFjdC4gTXVzdCBjb21lIHRocm91Z2ggcHJveHkKICAgIC8vLyBAcGFyYW0gb3duZXIgS2V5IHdobyBjYW4gdXNlIHRoaXMgY29udHJhY3QgdG8gY29udHJvbCBwcm94eS4gR2l2ZW4gZnVsbCBwb3dlcgogICAgLy8vIEBwYXJhbSByZWNvdmVyeUtleSBLZXkgb2YgcmVjb3ZlcnkgbmV0d29yayBvciBhZGRyZXNzIGZyb20gc2VlZCB0byByZWNvdmVyeSBwcm94eQogICAgLy8vIE5vdGU6IFVzZXIgbXVzdCBjaGFuZ2Ugb3duZXIgb2YgcHJveHkgdG8gdGhpcyBjb250cmFjdCBhZnRlciBjYWxsaW5nIHRoaXMKICAgIGZ1bmN0aW9uIHJlZ2lzdGVySWRlbnRpdHkoYWRkcmVzcyBvd25lciwgYWRkcmVzcyByZWNvdmVyeUtleSkgcHVibGljIHZhbGlkQWRkcmVzcyhyZWNvdmVyeUtleSkgewogICAgICAgIHJlcXVpcmUocmVjb3ZlcnlLZXlzW21zZy5zZW5kZXJdID09IDApOyAvLyBEZW55IGFueSBmdW5ueSBidXNpbmVzcwogICAgICAgIG93bmVyc1ttc2cuc2VuZGVyXVtvd25lcl0gPSBub3cgLSBhZG1pblRpbWVMb2NrOyAvLyBPd25lciBoYXMgZnVsbCBwb3dlciBmcm9tIGRheSBvbmUKICAgICAgICByZWNvdmVyeUtleXNbbXNnLnNlbmRlcl0gPSByZWNvdmVyeUtleTsKICAgICAgICBMb2dJZGVudGl0eUNyZWF0ZWQobXNnLnNlbmRlciwgbXNnLnNlbmRlciwgb3duZXIsIHJlY292ZXJ5S2V5KTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgYSB1c2VyIHRvIGZvcndhcmQgYSBjYWxsIHRocm91Z2ggdGhlaXIgcHJveHkuCiAgICBmdW5jdGlvbiBmb3J3YXJkVG8oYWRkcmVzcyBzZW5kZXIsIFByb3h5IGlkZW50aXR5LCBhZGRyZXNzIGRlc3RpbmF0aW9uLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSBwdWJsaWMKICAgICAgICBvbmx5QXV0aG9yaXplZAogICAgICAgIG9ubHlPd25lcihpZGVudGl0eSwgc2VuZGVyKQogICAgewogICAgICAgIGlkZW50aXR5LmZvcndhcmQoZGVzdGluYXRpb24sIHZhbHVlLCBkYXRhKTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgYW4gb2xkZXJPd25lciB0byBhZGQgYSBuZXcgb3duZXIgaW5zdGFudGx5CiAgICBmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIHNlbmRlciwgUHJveHkgaWRlbnRpdHksIGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYwogICAgICAgIG9ubHlBdXRob3JpemVkCiAgICAgICAgb25seU9sZGVyT3duZXIoaWRlbnRpdHksIHNlbmRlcikKICAgICAgICByYXRlTGltaXRlZChpZGVudGl0eSwgc2VuZGVyKQogICAgewogICAgICAgIHJlcXVpcmUoIWlzT3duZXIoaWRlbnRpdHksIG5ld093bmVyKSk7CiAgICAgICAgb3duZXJzW2lkZW50aXR5XVtuZXdPd25lcl0gPSBub3cgLSB1c2VyVGltZUxvY2s7CiAgICAgICAgTG9nT3duZXJBZGRlZChpZGVudGl0eSwgbmV3T3duZXIsIHNlbmRlcik7CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIGEgcmVjb3ZlcnlLZXkgdG8gYWRkIGEgbmV3IG93bmVyIHdpdGggdXNlclRpbWVMb2NrIHdhaXRpbmcgdGltZQogICAgZnVuY3Rpb24gYWRkT3duZXJGcm9tUmVjb3ZlcnkoYWRkcmVzcyBzZW5kZXIsIFByb3h5IGlkZW50aXR5LCBhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMKICAgICAgICBvbmx5QXV0aG9yaXplZAogICAgICAgIG9ubHlSZWNvdmVyeShpZGVudGl0eSwgc2VuZGVyKQogICAgICAgIHJhdGVMaW1pdGVkKGlkZW50aXR5LCBzZW5kZXIpCiAgICB7CiAgICAgICAgcmVxdWlyZSghaXNPd25lcihpZGVudGl0eSwgbmV3T3duZXIpKTsKICAgICAgICBvd25lcnNbaWRlbnRpdHldW25ld093bmVyXSA9IG5vdzsKICAgICAgICBMb2dPd25lckFkZGVkKGlkZW50aXR5LCBuZXdPd25lciwgc2VuZGVyKTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgYW4gb3duZXIgdG8gcmVtb3ZlIGFub3RoZXIgb3duZXIgaW5zdGFudGx5CiAgICBmdW5jdGlvbiByZW1vdmVPd25lcihhZGRyZXNzIHNlbmRlciwgUHJveHkgaWRlbnRpdHksIGFkZHJlc3Mgb3duZXIpIHB1YmxpYwogICAgICAgIG9ubHlBdXRob3JpemVkCiAgICAgICAgb25seU9sZGVyT3duZXIoaWRlbnRpdHksIHNlbmRlcikKICAgICAgICByYXRlTGltaXRlZChpZGVudGl0eSwgc2VuZGVyKQogICAgewogICAgICAgIC8vIGFuIG93bmVyIHNob3VsZCBub3QgYmUgYWxsb3dlZCB0byByZW1vdmUgaXRzZWxmCiAgICAgICAgcmVxdWlyZShzZW5kZXIgIT0gb3duZXIpOwogICAgICAgIGRlbGV0ZSBvd25lcnNbaWRlbnRpdHldW293bmVyXTsKICAgICAgICBMb2dPd25lclJlbW92ZWQoaWRlbnRpdHksIG93bmVyLCBzZW5kZXIpOwogICAgfQoKICAgIC8vLyBAZGV2IEFsbG93cyBhbiBvd25lciB0byBjaGFuZ2UgdGhlIHJlY292ZXJ5S2V5IGluc3RhbnRseQogICAgZnVuY3Rpb24gY2hhbmdlUmVjb3ZlcnkoYWRkcmVzcyBzZW5kZXIsIFByb3h5IGlkZW50aXR5LCBhZGRyZXNzIHJlY292ZXJ5S2V5KSBwdWJsaWMKICAgICAgICBvbmx5QXV0aG9yaXplZAogICAgICAgIG9ubHlPbGRlck93bmVyKGlkZW50aXR5LCBzZW5kZXIpCiAgICAgICAgcmF0ZUxpbWl0ZWQoaWRlbnRpdHksIHNlbmRlcikKICAgICAgICB2YWxpZEFkZHJlc3MocmVjb3ZlcnlLZXkpCiAgICB7CiAgICAgICAgcmVjb3ZlcnlLZXlzW2lkZW50aXR5XSA9IHJlY292ZXJ5S2V5OwogICAgICAgIExvZ1JlY292ZXJ5Q2hhbmdlZChpZGVudGl0eSwgcmVjb3ZlcnlLZXksIHNlbmRlcik7CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIGFuIG93bmVyIHRvIGJlZ2luIHByb2Nlc3Mgb2YgdHJhbnNmZXJpbmcgcHJveHkgdG8gbmV3IElkZW50aXR5TWFuYWdlcgogICAgZnVuY3Rpb24gaW5pdGlhdGVNaWdyYXRpb24oYWRkcmVzcyBzZW5kZXIsIFByb3h5IGlkZW50aXR5LCBhZGRyZXNzIG5ld0lkTWFuYWdlcikgcHVibGljCiAgICAgICAgb25seUF1dGhvcml6ZWQKICAgICAgICBvbmx5T2xkZXJPd25lcihpZGVudGl0eSwgc2VuZGVyKQogICAgewogICAgICAgIG1pZ3JhdGlvbkluaXRpYXRlZFtpZGVudGl0eV0gPSBub3c7CiAgICAgICAgbWlncmF0aW9uTmV3QWRkcmVzc1tpZGVudGl0eV0gPSBuZXdJZE1hbmFnZXI7CiAgICAgICAgTG9nTWlncmF0aW9uSW5pdGlhdGVkKGlkZW50aXR5LCBuZXdJZE1hbmFnZXIsIHNlbmRlcik7CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIGFuIG93bmVyIHRvIGNhbmNlbCB0aGUgcHJvY2VzcyBvZiB0cmFuc2ZlcmluZyBwcm94eSB0byBuZXcgSWRlbnRpdHlNYW5hZ2VyCiAgICBmdW5jdGlvbiBjYW5jZWxNaWdyYXRpb24oYWRkcmVzcyBzZW5kZXIsIFByb3h5IGlkZW50aXR5KSBwdWJsaWMKICAgICAgICBvbmx5QXV0aG9yaXplZAogICAgICAgIG9ubHlPd25lcihpZGVudGl0eSwgc2VuZGVyKQogICAgewogICAgICAgIGFkZHJlc3MgY2FuY2VsZWRNYW5hZ2VyID0gbWlncmF0aW9uTmV3QWRkcmVzc1tpZGVudGl0eV07CiAgICAgICAgZGVsZXRlIG1pZ3JhdGlvbkluaXRpYXRlZFtpZGVudGl0eV07CiAgICAgICAgZGVsZXRlIG1pZ3JhdGlvbk5ld0FkZHJlc3NbaWRlbnRpdHldOwogICAgICAgIExvZ01pZ3JhdGlvbkNhbmNlbGVkKGlkZW50aXR5LCBjYW5jZWxlZE1hbmFnZXIsIHNlbmRlcik7CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIGFuIG93bmVyIHRvIGZpbmFsaXplIGFuZCBjb21wbGV0bHkgdHJhbnNmZXIgcHJveHkgdG8gbmV3IElkZW50aXR5TWFuYWdlcgogICAgLy8vIE5vdGU6IGJlZm9yZSB0cmFuc2ZlcmluZyB0byBhIG5ldyBhZGRyZXNzLCBtYWtlIHN1cmUgdGhpcyBhZGRyZXNzIGlzICJyZWFkeSB0byByZWNpZXZlIiB0aGUgcHJveHkuCiAgICAvLy8gTm90IGRvaW5nIHNvIHJpc2tzIHRoZSBwcm94eSBiZWNvbWluZyBzdHVjay4KICAgIGZ1bmN0aW9uIGZpbmFsaXplTWlncmF0aW9uKGFkZHJlc3Mgc2VuZGVyLCBQcm94eSBpZGVudGl0eSkgb25seUF1dGhvcml6ZWQgb25seU9sZGVyT3duZXIoaWRlbnRpdHksIHNlbmRlcikgewogICAgICAgIHJlcXVpcmUobWlncmF0aW9uSW5pdGlhdGVkW2lkZW50aXR5XSAhPSAwICYmIG1pZ3JhdGlvbkluaXRpYXRlZFtpZGVudGl0eV0gKyBhZG1pblRpbWVMb2NrIDwgbm93KTsKICAgICAgICBhZGRyZXNzIG5ld0lkTWFuYWdlciA9IG1pZ3JhdGlvbk5ld0FkZHJlc3NbaWRlbnRpdHldOwogICAgICAgIGRlbGV0ZSBtaWdyYXRpb25Jbml0aWF0ZWRbaWRlbnRpdHldOwogICAgICAgIGRlbGV0ZSBtaWdyYXRpb25OZXdBZGRyZXNzW2lkZW50aXR5XTsKICAgICAgICBpZGVudGl0eS50cmFuc2ZlcihuZXdJZE1hbmFnZXIpOwogICAgICAgIGRlbGV0ZSByZWNvdmVyeUtleXNbaWRlbnRpdHldOwogICAgICAgIC8vIFdlIGNhbiBvbmx5IGRlbGV0ZSB0aGUgb3duZXIgdGhhdCB3ZSBrbm93IG9mLiBBbGwgb3RoZXIgb3duZXJzCiAgICAgICAgLy8gbmVlZHMgdG8gYmUgcmVtb3ZlZCBiZWZvcmUgYSBjYWxsIHRvIHRoaXMgbWV0aG9kLgogICAgICAgIGRlbGV0ZSBvd25lcnNbaWRlbnRpdHldW3NlbmRlcl07CiAgICAgICAgTG9nTWlncmF0aW9uRmluYWxpemVkKGlkZW50aXR5LCBuZXdJZE1hbmFnZXIsIHNlbmRlcik7CiAgICB9CgogICAgLy9DaGVja3MgdGhhdCBhZGRyZXNzIGEgaXMgdGhlIGZpcnN0IGlucHV0IGluIG1zZy5kYXRhLgogICAgLy9IYXMgdmVyeSBtaW5pbWFsIGdhcyBvdmVyaGVhZC4KICAgIGZ1bmN0aW9uIGNoZWNrTWVzc2FnZURhdGEoYWRkcmVzcyBhKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sIHQpIHsKICAgICAgICBpZiAobXNnLmRhdGEubGVuZ3RoIDwgMzYpIHJldHVybiBmYWxzZTsKICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgIGxldCBtYXNrIDo9IDB4RkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRgogICAgICAgICAgICB0IDo9IGVxKGEsIGFuZChtYXNrLCBjYWxsZGF0YWxvYWQoNCkpKQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgaWRlbnRpdHksIGFkZHJlc3Mgb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIChvd25lcnNbaWRlbnRpdHldW293bmVyXSA+IDAgJiYgKG93bmVyc1tpZGVudGl0eV1bb3duZXJdICsgdXNlclRpbWVMb2NrKSA8PSBub3cpOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzT2xkZXJPd25lcihhZGRyZXNzIGlkZW50aXR5LCBhZGRyZXNzIG93bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAob3duZXJzW2lkZW50aXR5XVtvd25lcl0gPiAwICYmIChvd25lcnNbaWRlbnRpdHldW293bmVyXSArIGFkbWluVGltZUxvY2spIDw9IG5vdyk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNSZWNvdmVyeShhZGRyZXNzIGlkZW50aXR5LCBhZGRyZXNzIHJlY292ZXJ5S2V5KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiByZWNvdmVyeUtleXNbaWRlbnRpdHldID09IHJlY292ZXJ5S2V5OwogICAgfQp9'.
	

]
