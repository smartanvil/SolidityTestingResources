Class {
	#name : #SRT18dfd8c468ed83397C0E1caDAe01E1e65E86d275,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT18dfd8c468ed83397C0E1caDAe01E1e65E86d275 >> base64 [
	^ 'LyogT3duZWQuc29sCgpQYWNpbyBDb3JlIEx0ZCBodHRwczovL3d3dy5wYWNpby5pbwoKMjAxNy4wMy4wNCBkamggT3JpZ2luYWxseSBjcmVhdGVkCjIwMTcuMDguMTYgQnJvdWdodCBpbnRvIHVzZSBmb3IgUGFjaW8gdG9rZW4gc2FsZSB1c2UKMjAxNy4wOC4yMiBMb2dnaW5nIHJldmlzZWQKCk93bmVkIGlzIGEgQmFzZSBDb250cmFjdCBmb3IgY29udHJhY3RzIHRoYXQgYXJlOgrigKIgIm93bmVkIgrigKIgY2FuIGhhdmUgdGhlaXIgb3duZXIgY2hhbmdlZCBieSBhIGNhbGwgdG8gQ2hhbmdlT3duZXIoKSBieSB0aGUgb3duZXIK4oCiIGNhbiBiZSBwYXVzZWQgIGZyb20gYW4gYWN0aXZlIHN0YXRlIGJ5IGEgY2FsbCB0byBQYXVzZSgpIGJ5IHRoZSBvd25lcgrigKIgY2FuIGJlIHJlc3VtZWQgZnJvbSBhIHBhdXNlZCBzdGF0ZSBieSBhIGNhbGwgdG8gUmVzdW1lKCkgYnkgdGhlIG93bmVyCgpNb2RpZmllciBmdW5jdGlvbnMgYXZhaWxhYmxlIGZvciB1c2UgaGVyZSBhbmQgaW4gY2hpbGQgY29udHJhY3RzIGFyZToK4oCiIElzT3duZXIoKSAgd2hpY2ggdGhyb3dzIGlmIGNhbGxlZCBieSBvdGhlciB0aGFuIHRoZSBjdXJyZW50IG93bmVyCuKAoiBJc0FjdGl2ZSgpIHdoaWNoIHRocm93cyBpZiBjYWxsZWQgd2hlbiB0aGUgY29udHJhY3QgaXMgcGF1c2VkCgpDaGFuZ2VzIG9mIG93bmVyIGFyZSBsb2dnZWQgdmlhIGV2ZW50IExvZ093bmVyQ2hhbmdlKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIG5ld093bmVyKQoKKi8KCnByYWdtYSBzb2xpZGl0eSBeMC40LjE1OwoKY29udHJhY3QgT3duZWQgewogIGFkZHJlc3MgcHVibGljIG93bmVyQTsgLy8gQ29udHJhY3Qgb3duZXIKICBib29sICAgIHB1YmxpYyBwYXVzZWRCOwoKICAvLyBDb25zdHJ1Y3RvciBOT1QgcGF5YWJsZQogIC8vIC0tLS0tLS0tLS0tCiAgZnVuY3Rpb24gT3duZWQoKSB7CiAgICBvd25lckEgPSBtc2cuc2VuZGVyOwogIH0KCiAgLy8gTW9kaWZpZXIgZnVuY3Rpb25zCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tCiAgbW9kaWZpZXIgSXNPd25lciB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXJBKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBJc0FjdGl2ZSB7CiAgICByZXF1aXJlKCFwYXVzZWRCKTsKICAgIF87CiAgfQoKICAvLyBFdmVudHMKICAvLyAtLS0tLS0KICBldmVudCBMb2dPd25lckNoYW5nZShhZGRyZXNzIGluZGV4ZWQgUHJldmlvdXNPd25lciwgYWRkcmVzcyBOZXdPd25lcik7CiAgZXZlbnQgTG9nUGF1c2VkKCk7CiAgZXZlbnQgTG9nUmVzdW1lZCgpOwoKICAvLyBTdGF0ZSBjaGFuZ2luZyBwdWJsaWMgbWV0aG9kcwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gQ2hhbmdlIG93bmVyCiAgZnVuY3Rpb24gQ2hhbmdlT3duZXIoYWRkcmVzcyB2TmV3T3duZXJBKSBJc093bmVyIHsKICAgIHJlcXVpcmUodk5ld093bmVyQSAhPSBhZGRyZXNzKDApCiAgICAgICAgICYmIHZOZXdPd25lckEgIT0gb3duZXJBKTsKICAgIExvZ093bmVyQ2hhbmdlKG93bmVyQSwgdk5ld093bmVyQSk7CiAgICBvd25lckEgPSB2TmV3T3duZXJBOwogIH0KCiAgLy8gUGF1c2UKICBmdW5jdGlvbiBQYXVzZSgpIElzT3duZXIgewogICAgcGF1c2VkQiA9IHRydWU7IC8vIGNvbnRyYWN0IGhhcyBiZWVuIHBhdXNlZAogICAgTG9nUGF1c2VkKCk7CiAgfQoKICAvLyBSZXN1bWUKICBmdW5jdGlvbiBSZXN1bWUoKSBJc093bmVyIHsKICAgIHBhdXNlZEIgPSBmYWxzZTsgLy8gY29udHJhY3QgaGFzIGJlZW4gcmVzdW1lZAogICAgTG9nUmVzdW1lZCgpOwogIH0KfSAvLyBFbmQgT3duZWQgY29udHJhY3QKCgovLyBEU01hdGguc29sCi8vIEZyb20gaHR0cHM6Ly9kYXBwc3lzLnJlYWR0aGVkb2NzLmlvL2VuL2xhdGVzdC9kc19tYXRoLmh0bWwKCi8vIFJlZHVjZWQgdmVyc2lvbiAtIGp1c3QgdGhlIGZucyB1c2VkIGJ5IFBhY2lvCgovLyBDb3B5cmlnaHQgKEMpIDIwMTUsIDIwMTYsIDIwMTcgIERhcHBIdWIsIExMQwoKLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIikuCi8vIFlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQgKGV4cHJlc3Mgb3IgaW1wbGllZCkuCgpjb250cmFjdCBEU01hdGggewogIC8qCiAgc3RhbmRhcmQgdWludDI1NiBmdW5jdGlvbnMKICAqLwoKICBmdW5jdGlvbiBhZGQodWludDI1NiB4LCB1aW50MjU2IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgYXNzZXJ0KCh6ID0geCArIHkpID49IHgpOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgIGFzc2VydCgoeiA9IHggLSB5KSA8PSB4KTsKICB9CgogIGZ1bmN0aW9uIG11bCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICB6ID0geCAqIHk7CiAgICBhc3NlcnQoeCA9PSAwIHx8IHogLyB4ID09IHkpOwogIH0KCiAgLy8gZGl2IGlzbid0IG5lZWRlZC4gT25seSBlcnJvciBjYXNlIGlzIGRpdiBieSB6ZXJvIGFuZCBTb2xpZGl0eSB0aHJvd3Mgb24gdGhhdAogIC8vIGZ1bmN0aW9uIGRpdih1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgLy8gICB6ID0geCAvIHk7CiAgLy8gfQoKICAvLyBzdWJNYXhaZXJvKHgsIHkpCiAgLy8gUGFjaW8gYWRkaXRpb24gdG8gYXZvaWQgdGhyb3dpbmcgaWYgYSBzdWJ0cmFjdGlvbiBnb2VzIGJlbG93IHplcm8gYW5kIHJldHVybiAwIGluIHRoYXQgY2FzZS4KICBmdW5jdGlvbiBzdWJNYXhaZXJvKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgIGlmICh5ID4geCkKICAgICAgeiA9IDA7CiAgICBlbHNlCiAgICAgIHogPSB4IC0geTsKICB9Cn0KCi8vIEVSQzIwVG9rZW4uc29sIDIwMTcuMDguMTYgc3RhcnRlZAoKLy8gMjAxNy4xMC4wNyBpc0VSQzIwVG9rZW4gY2hhbmdlZCB0byBpc0VJUDIwVG9rZW4KCi8qCkVSQyBUb2tlbiBTdGFuZGFyZCAjMjAgSW50ZXJmYWNlCmh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMApodHRwczovL2dpdGh1Yi5jb20vZnJvemVtYW4vRUlQcy9ibG9iLzk0YmM0MzExZTg4OWMyYzU4YzU2MWMwNzRiZTE0ODNmNDhhYzkzNzQvRUlQUy9laXAtMjAtdG9rZW4tc3RhbmRhcmQubWQKVXNpbmcgRGFwcHN5cyBuYW1pbmcgc3R5bGUgb2YgMyBsZXR0ZXIgbmFtZXM6IHNyYywgZHN0LCBndXksIHdhZAoqLwoKY29udHJhY3QgRVJDMjBUb2tlbiBpcyBPd25lZCwgRFNNYXRoIHsKICAvLyBEYXRhCiAgYm9vbCBwdWJsaWMgY29uc3RhbnQgaXNFSVAyMFRva2VuID0gdHJ1ZTsgLy8gSW50ZXJmYWNlIGRlY2xhcmF0aW9uCiAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7ICAgICAvLyBUb3RhbCB0b2tlbnMgbWludGVkCiAgYm9vbCBwdWJsaWMgc2FsZUluUHJvZ3Jlc3NCOyAvLyB3aGVuIHRydWUgc3RvcHMgdHJhbnNmZXJzCgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBpbnRlcm5hbCBpVG9rZW5zT3duZWRNOyAgICAgICAgICAgICAgICAgLy8gVG9rZW5zIG93bmVkIGJ5IGFuIGFjY291bnQKICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgcHJpdmF0ZSBwQWxsb3dlZE07IC8vIE93bmVyIG9mIGFjY291bnQgYXBwcm92ZXMgdGhlIHRyYW5zZmVyIG9mIGFuIGFtb3VudCB0byBhbm90aGVyIGFjY291bnQKCiAgLy8gRVJDMjAgRXZlbnRzCiAgLy8gPT09PT09PT09PT09CiAgLy8gVHJhbnNmZXIKICAvLyBUcmlnZ2VyZWQgd2hlbiB0b2tlbnMgYXJlIHRyYW5zZmVycmVkLgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBzcmMsIGFkZHJlc3MgaW5kZXhlZCBkc3QsIHVpbnQgd2FkKTsKCiAgLy8gQXBwcm92YWwKICAvLyBUcmlnZ2VyZWQgd2hlbmV2ZXIgYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgd2FkKSBpcyBjYWxsZWQuCiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIFNlbmRlciwgYWRkcmVzcyBpbmRleGVkIFNwZW5kZXIsIHVpbnQgV2FkKTsKCiAgLy8gRVJDMjAgTWV0aG9kcwogIC8vID09PT09PT09PT09PT0KICAvLyBQdWJsaWMgQ29uc3RhbnQgTWV0aG9kcwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gYmFsYW5jZU9mKCkKICAvLyBSZXR1cm5zIHRoZSB0b2tlbiBiYWxhbmNlIG9mIGFjY291bnQgd2l0aCBhZGRyZXNzIGd1eQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIGd1eSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiBpVG9rZW5zT3duZWRNW2d1eV07CiAgfQoKICAvLyBhbGxvd2FuY2UoKQogIC8vIFJldHVybnMgdGhlIG51bWJlciBvZiB0b2tlbnMgYXBwcm92ZWQgYnkgZ3V5IHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkICgic3BlbnQiKSBieSBzcGVuZGVyCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgZ3V5LCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gcEFsbG93ZWRNW2d1eV1bc3BlbmRlcl07CiAgfQoKICAvLyBNb2RpZmllciBmdW5jdGlvbnMKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0KICBtb2RpZmllciBJc1RyYW5zZmVyT0soYWRkcmVzcyBzcmMsIGFkZHJlc3MgZHN0LCB1aW50IHdhZCkgewogICAgcmVxdWlyZSghc2FsZUluUHJvZ3Jlc3NCICAgICAgICAgIC8vIFNhbGUgbm90IGluIHByb2dyZXNzCiAgICAgICAgICYmICFwYXVzZWRCICAgICAgICAgICAgICAgICAgLy8gSXNBY3RpdmUKICAgICAgICAgJiYgaVRva2Vuc093bmVkTVtzcmNdID49IHdhZCAvLyBTb3VyY2UgaGFzIHRoZSB0b2tlbnMgYXZhaWxhYmxlCiAgICAgIC8vICYmIHdhZCA+IDAgICAgICAgICAgICAgICAgICAgLy8gTm9uLXplcm8gdHJhbnNmZXIgTm8hIFRoZSBzdGQgc2F5czogTm90ZSBUcmFuc2ZlcnMgb2YgMCB2YWx1ZXMgTVVTVCBiZSB0cmVhdGVkIGFzIG5vcm1hbCB0cmFuc2ZlcnMgYW5kIGZpcmUgdGhlIFRyYW5zZmVyIGV2ZW50CiAgICAgICAgICYmIGRzdCAhPSBzcmMgICAgICAgICAgICAgICAgLy8gRGVzdGluYXRpb24gaXMgZGlmZmVyZW50IGZyb20gc291cmNlCiAgICAgICAgICYmIGRzdCAhPSBhZGRyZXNzKHRoaXMpICAgICAgLy8gTm90IHRyYW5zZmVycmluZyB0byB0aGlzIHRva2VuIGNvbnRyYWN0CiAgICAgICAgICYmIGRzdCAhPSBvd25lckEpOyAgICAgICAgICAgLy8gTm90IHRyYW5zZmVycmluZyB0byB0aGUgb3duZXIgb2YgdGhpcyBjb250cmFjdCAtIHRoZSB0b2tlbiBzYWxlIGNvbnRyYWN0CiAgICBfOwogIH0KCiAgLy8gU3RhdGUgY2hhbmdpbmcgcHVibGljIG1ldGhvZHMgbWFkZSBwYXVzZS1hYmxlIGFuZCB3aXRoIGNhbGwgbG9nZ2luZwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gdHJhbnNmZXIoKQogIC8vIFRyYW5zZmVycyB3YWQgb2Ygc2VuZGVyJ3MgdG9rZW5zIHRvIGFub3RoZXIgYWNjb3VudCwgYWRkcmVzcyBkc3QKICAvLyBObyBuZWVkIGZvciBvdmVyZmxvdyBjaGVjayBnaXZlbiB0aGF0IHRvdGFsU3VwcGx5IGlzIGFsd2F5cyBmYXIgc21hbGxlciB0aGFuIG1heCB1aW50CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBkc3QsIHVpbnQgd2FkKSBJc1RyYW5zZmVyT0sobXNnLnNlbmRlciwgZHN0LCB3YWQpIHJldHVybnMgKGJvb2wpIHsKICAgIGlUb2tlbnNPd25lZE1bbXNnLnNlbmRlcl0gLT0gd2FkOyAvLyBUaGVyZSBpcyBubyBuZWVkIHRvIGNoZWNrIHRoaXMgZm9yIHVuZGVyZmxvdyB2aWEgYSBzdWIoKSBjYWxsIGdpdmVuIHRoZSBJc1RyYW5zZmVyT0sgaVRva2Vuc093bmVkTVtzcmNdID49IHdhZCBjaGVjawogICAgaVRva2Vuc093bmVkTVtkc3RdID0gYWRkKGlUb2tlbnNPd25lZE1bZHN0XSwgd2FkKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIGRzdCwgd2FkKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLy8gdHJhbnNmZXJGcm9tKCkKICAvLyBTZW5kZXIgdHJhbnNmZXJzIHdhZCB0b2tlbnMgZnJvbSBzcmMgYWNjb3VudCBzcmMgdG8gZHN0IGFjY291bnQsIGlmCiAgLy8gc2VuZGVyIGhhZCBiZWVuIGFwcHJvdmVkIGJ5IHNyYyBmb3IgYSB0cmFuc2ZlciBvZiA+PSB3YWQgdG9rZW5zIGZyb20gc3JjJ3MgYWNjb3VudAogIC8vIGJ5IGEgcHJpb3IgY2FsbCB0byBhcHByb3ZlKCkgd2l0aCB0aGF0IGNhbGwncyBzZW5kZXIgYmVpbmcgdGhpcyBjYWxscyBzcmMsCiAgLy8gIGFuZCBpdHMgc3BlbmRlciBiZWluZyB0aGlzIGNhbGwncyBzZW5kZXIuCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3Mgc3JjLCBhZGRyZXNzIGRzdCwgdWludCB3YWQpIElzVHJhbnNmZXJPSyhzcmMsIGRzdCwgd2FkKSByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKHBBbGxvd2VkTVtzcmNdW21zZy5zZW5kZXJdID49IHdhZCk7IC8vIFRyYW5zZmVyIGlzIGFwcHJvdmVkCiAgICBpVG9rZW5zT3duZWRNW3NyY10gICAgICAgICAtPSB3YWQ7IC8vIFRoZXJlIGlzIG5vIG5lZWQgdG8gY2hlY2sgdGhpcyBmb3IgdW5kZXJmbG93IGdpdmVuIHRoZSByZXF1aXJlIGFib3ZlCiAgICBwQWxsb3dlZE1bc3JjXVttc2cuc2VuZGVyXSAtPSB3YWQ7IC8vIFRoZXJlIGlzIG5vIG5lZWQgdG8gY2hlY2sgdGhpcyBmb3IgdW5kZXJmbG93IGdpdmVuIHRoZSByZXF1aXJlIGFib3ZlCiAgICBpVG9rZW5zT3duZWRNW2RzdF0gPSBhZGQoaVRva2Vuc093bmVkTVtkc3RdLCB3YWQpOwogICAgVHJhbnNmZXIoc3JjLCBkc3QsIHdhZCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vIGFwcHJvdmUoKQogIC8vIEFwcHJvdmVzIHRoZSBwYXNzZWQgYWRkcmVzcyAob2Ygc3BlbmRlcikgdG8gc3BlbmQgdXAgdG8gd2FkIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlciwKICAvLyAgaW4gb25lIG9yIG1vcmUgdHJhbnNmZXJGcm9tKCkgY2FsbHMKICAvLyBJZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhZ2FpbiBpdCBvdmVyd3JpdGVzIHRoZSBjdXJyZW50IGFsbG93YW5jZSB3aXRoIHdhZC4KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB3YWQpIElzQWN0aXZlIHJldHVybnMgKGJvb2wpIHsKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShzcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgLy8gZGpoOiBUaGlzIGFwcGVhcnMgdG8gYmUgb2YgZG91YnRmdWwgdmFsdWUsIGFuZCBpcyBub3QgdXNlZCBpbiB0aGUgRGFwcHN5cyBsaWJyYXJ5IHRob3VnaCBpdCBpcyBpbiB0aGUgWmVwcGVsaW4gb25lLiBSZW1vdmVkLgogICAgLy8gcmVxdWlyZSgod2FkID09IDApIHx8IChwQWxsb3dlZE1bbXNnLnNlbmRlcl1bc3BlbmRlcl0gPT0gMCkpOwogICAgcEFsbG93ZWRNW21zZy5zZW5kZXJdW3NwZW5kZXJdID0gd2FkOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgc3BlbmRlciwgd2FkKTsKICAgIHJldHVybiB0cnVlOwogIH0KfSAvLyBFbmQgRVJDMjBUb2tlbiBjb250cmFjdHMKCi8vIFBhY2lvVG9rZW4uc29sIDIwMTcuMDguMjIgc3RhcnRlZAoKLyogVGhlIFBhY2lvIFRva2VuIG5hbWVkIFBJT0UgZm9yIHRoZSBFdGhlcmV1bSB2ZXJzaW9uCgpGb2xsb3dzIHRoZSBFSVAyMCBzdGFuZGFyZDogaHR0cHM6Ly9naXRodWIuY29tL2Zyb3plbWFuL0VJUHMvYmxvYi85NGJjNDMxMWU4ODljMmM1OGM1NjFjMDc0YmUxNDgzZjQ4YWM5Mzc0L0VJUFMvZWlwLTIwLXRva2VuLXN0YW5kYXJkLm1kCgoyMDE3LjEwLjA4IENoYW5nZWQgdG8gc3VpdCBkaXJlY3QgZGVwbG95bWVudCByYXRoZXIgdGhhbiBiZWluZyBjcmVhdGVkIHZpYSB0aGUgUGFjaW9JQ08gY29uc3RydWN0b3IsIHNvIHRoYXQgRXRoZXJzY2FuIGNhbiByZWNvZ25pc2UgaXQuCgoqLwoKY29udHJhY3QgUGFjaW9Ub2tlbiBpcyBFUkMyMFRva2VuIHsKICAvLyBlbnVtIE5GRiB7ICAvLyBGb3VuZGVycy9Gb3VuZGF0aW9uIGVudW0KICAvLyAgIEZvdW5kZXJzLCAvLyAwIFBhY2lvIEZvdW5kZXJzCiAgLy8gICBGb3VuZGF0bn0gLy8gMSBQYWNpbyBGb3VuZGF0aW9uCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lICAgPSAiUGFjaW8gVG9rZW4iOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlBJT0UiOwogIHVpbnQ4ICBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxMjsKICB1aW50ICAgcHVibGljIHRva2Vuc0lzc3VlZDsgICAgICAgICAgIC8vIFRva2VucyBpc3N1ZWQgLSB0b2tlbnMgaW4gY2lyY3VsYXRpb24KICB1aW50ICAgcHVibGljIHRva2Vuc0F2YWlsYWJsZTsgICAgICAgIC8vIFRva2VucyBhdmFpbGFibGUgPSB0b3RhbCBzdXBwbHkgbGVzcyBhbGxvY2F0ZWQgYW5kIGlzc3VlZCB0b2tlbnMKICB1aW50ICAgcHVibGljIGNvbnRyaWJ1dG9yczsgICAgICAgICAgIC8vIE51bWJlciBvZiBjb250cmlidXRvcnMKICB1aW50ICAgcHVibGljIGZvdW5kZXJUb2tlbnNBbGxvY2F0ZWQ7IC8vIEZvdW5kZXIgdG9rZW5zIGFsbG9jYXRlZAogIHVpbnQgICBwdWJsaWMgZm91bmRlclRva2Vuc1Zlc3RlZDsgICAgLy8gRm91bmRlciB0b2tlbnMgdmVzdGVkLiBTYW1lIGFzIGlUb2tlbnNPd25lZE1bcEZvdW5kZXJUb2tzQV0gdW50aWwgdG9rZW5zIHRyYW5zZmVycmVkLiBVbnZlc3RlZCB0b2tlbnMgPSBmb3VuZGVyVG9rZW5zQWxsb2NhdGVkIC0gZm91bmRlclRva2Vuc1Zlc3RlZAogIHVpbnQgICBwdWJsaWMgZm91bmRhdGlvblRva2Vuc0FsbG9jYXRlZDsgLy8gRm91bmRhdGlvbiB0b2tlbnMgYWxsb2NhdGVkCiAgdWludCAgIHB1YmxpYyBmb3VuZGF0aW9uVG9rZW5zVmVzdGVkOyAgICAvLyBGb3VuZGF0aW9uIHRva2VucyB2ZXN0ZWQuIFNhbWUgYXMgaVRva2Vuc093bmVkTVtwRm91bmRhdGlvblRva3NBXSB1bnRpbCB0b2tlbnMgdHJhbnNmZXJyZWQuIFVudmVzdGVkIHRva2VucyA9IGZvdW5kYXRpb25Ub2tlbnNBbGxvY2F0ZWQgLSBmb3VuZGF0aW9uVG9rZW5zVmVzdGVkCiAgYm9vbCAgIHB1YmxpYyBpY29Db21wbGV0ZUI7ICAgICAgICAgICAvLyBJcyBzZXQgdG8gdHJ1ZSB3aGVuIGJvdGggcHJlc2FsZSBhbmQgZnVsbCBJQ08gYXJlIGNvbXBsZXRlLiBSZXF1aXJlZCBmb3IgdmVzdGluZyBvZiBmb3VuZGVyIGFuZCBmb3VuZGF0aW9uIHRva2VucyBhbmQgdHJhbnNmZXJzIG9mIFBJT0VzIHRvIFBJT3MKICBhZGRyZXNzIHByaXZhdGUgcEZvdW5kZXJUb2tzQTsgICAgICAgIC8vIEFkZHJlc3MgZm9yIEZvdW5kZXIgdG9rZW5zIGlzc3VlZAogIGFkZHJlc3MgcHJpdmF0ZSBwRm91bmRhdGlvblRva3NBOyAgICAgLy8gQWRkcmVzcyBmb3IgRm91bmRhdGlvbiB0b2tlbnMgaXNzdWVkCgogIC8vIEV2ZW50cwogIC8vIC0tLS0tLQogIGV2ZW50IExvZ0lzc3VlKGFkZHJlc3MgaW5kZXhlZCBEc3QsIHVpbnQgUGljb3MpOwogIGV2ZW50IExvZ1NhbGVDYXBSZWFjaGVkKHVpbnQgVG9rZW5zSXNzdWVkKTsgLy8gbm90IHRva2Vuc0lzc3VlZCBqdXN0IHRvIGF2b2lkIGNvbXBpbGVyIFdhcm5pbmc6IFRoaXMgZGVjbGFyYXRpb24gc2hhZG93cyBhbiBleGlzdGluZyBkZWNsYXJhdGlvbgogIGV2ZW50IExvZ0ljb0NvbXBsZXRlZCgpOwogIGV2ZW50IExvZ0J1cm4oYWRkcmVzcyBTcmMsIHVpbnQgUGljb3MpOwogIGV2ZW50IExvZ0Rlc3Ryb3kodWludCBQaWNvcyk7CgogIC8vIE5vIENvbnN0cnVjdG9yCiAgLy8gLS0tLS0tLS0tLS0tLS0KCiAgLy8gSW5pdGlhbGlzYXRpb24vU2V0dGluZ3MgTWV0aG9kcyBJc093bmVyIGJ1dCBub3QgSXNBY3RpdmUKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8vIEluaXRpYWxpc2UoKQogIC8vIFRvIGJlIGNhbGxlZCBieSBkZXBsb3ltZW50IG93bmVyIHRvIGNoYW5nZSBvd25lcnNoaXAgdG8gdGhlIHNhbGUgY29udHJhY3QsIGFuZCBkbyB0aGUgaW5pdGlhbCBhbGxvY2F0aW9ucyBhbmQgbWludGluZy4KICAvLyBDYW4gb25seSBiZSBjYWxsZWQgb25jZS4gSWYgdGhlIHNhbGUgY29udHJhY3QgY2hhbmdlcyBidXQgdGhlIHRva2VuIGNvbnRyYWN0IHN0YXlzIHRoZSBzYW1lIHRoZW4gQ2hhbmdlT3duZXIoKSBjYW4gYmUgY2FsbGVkIHZpYSBQYWNpb0lDTy5DaGFuZ2VUb2tlbkNvbnRyYWN0T3duZXIoKSB0byBjaGFuZ2UgdGhlIG93bmVyIHRvIHRoZSBuZXcgY29udHJhY3QKICBmdW5jdGlvbiBJbml0aWFsaXNlKGFkZHJlc3Mgdk5ld093bmVyQSkgeyAvLyBJc093bmVyIGMvbyB0aGUgc3VwZXIuQ2hhbmdlT3duZXIoKSBjYWxsCiAgICByZXF1aXJlKHRvdGFsU3VwcGx5ID09IDApOyAgICAgICAgICAvLyBjYW4gb25seSBiZSBjYWxsZWQgb25jZQogICAgc3VwZXIuQ2hhbmdlT3duZXIodk5ld093bmVyQSk7ICAgICAgLy8gaW5jbHVkZXMgYW4gSXNPd25lciBjaGVjayBzbyBkb24ndCBuZWVkIHRvIHJlcGVhdCBpdCBoZXJlCiAgICBmb3VuZGVyVG9rZW5zQWxsb2NhdGVkICAgID0gMTAqKjIwOyAvLyAxMCUgb3IgMTAwIG1pbGxpb24gPSAxZTIwIFBpY29zCiAgICBmb3VuZGF0aW9uVG9rZW5zQWxsb2NhdGVkID0gMTAqKjIwOyAvLyAxMCUgb3IgMTAwIG1pbGxpb24gPSAxZTIwIFBpY29zIFRoaXMgY2FsbCBzZXRzIHRva2Vuc0F2YWlsYWJsZQogICAgLy8gRXF1aXZhbGVudCBvZiBNaW50KDEwKioyMSkgd2hpY2ggY2FuJ3QgYmUgdXNlZCBoZXJlIGFzIG1zZy5zZW5kZXIgaXMgdGhlIG9sZCAoZGVwbG95bWVudCkgb3duZXIgLy8gMSBCaWxsaW9uIFBJT0VzICAgID0gMWUyMSBQaWNvcywgYWxsIG1pbnRlZCkKICAgIHRvdGFsU3VwcGx5ICAgICAgICAgICA9IDEwKioyMTsgLy8gMSBCaWxsaW9uIFBJT0VzICAgID0gMWUyMSBQaWNvcywgYWxsIG1pbnRlZCkKICAgIGlUb2tlbnNPd25lZE1bb3duZXJBXSA9IDEwKioyMTsKICAgIHRva2Vuc0F2YWlsYWJsZSAgICAgICA9IDgqKDEwKioyMCk7IC8vIDgwMCBtaWxsaW9uIFtTdHJpbmc6ICc4MDAwMDAwMDAwMDAwMDAwMDAwMDAnXSBzOiAxLCBlOiAyMCwgYzogWyA4MDAwMDAwIF0gfQogICAgLy8gRnJvbSB0aGUgRUlQMjAgU3RhbmRhcmQ6IEEgdG9rZW4gY29udHJhY3Qgd2hpY2ggY3JlYXRlcyBuZXcgdG9rZW5zIFNIT1VMRCB0cmlnZ2VyIGEgVHJhbnNmZXIgZXZlbnQgd2l0aCB0aGUgX2Zyb20gYWRkcmVzcyBzZXQgdG8gMHgwIHdoZW4gdG9rZW5zIGFyZSBjcmVhdGVkLgogICAgVHJhbnNmZXIoMHgwLCBvd25lckEsIDEwKioyMSk7IC8vIGxvZyBldmVudCAweDAgZnJvbSA9PSBtaW50aW5nCiAgfQoKICAvLyBNaW50KCkKICAvLyBQYWNpb0lDTygpIGluY2x1ZGVzIGEgTWludCgpIGZuIHRvIGFsbG93IG1hbnVhbCBjYWxsaW5nIG9mIHRoaXMgaWYgbmVjZXNzYXJ5IGUuZy4gcmUgZnVsbCBJQ08gZ29pbmcgb3ZlciB0aGUgY2FwCiAgZnVuY3Rpb24gTWludCh1aW50IHBpY29zKSBJc093bmVyIHsKICAgIHRvdGFsU3VwcGx5ICAgICAgICAgICA9IGFkZCh0b3RhbFN1cHBseSwgICAgICAgICAgIHBpY29zKTsKICAgIGlUb2tlbnNPd25lZE1bb3duZXJBXSA9IGFkZChpVG9rZW5zT3duZWRNW293bmVyQV0sIHBpY29zKTsKICAgIHRva2Vuc0F2YWlsYWJsZSA9IHN1Yk1heFplcm8odG90YWxTdXBwbHksIHRva2Vuc0lzc3VlZCArIGZvdW5kZXJUb2tlbnNBbGxvY2F0ZWQgKyBmb3VuZGF0aW9uVG9rZW5zQWxsb2NhdGVkKTsKICAgIC8vIEZyb20gdGhlIEVJUDIwIFN0YW5kYXJkOiBBIHRva2VuIGNvbnRyYWN0IHdoaWNoIGNyZWF0ZXMgbmV3IHRva2VucyBTSE9VTEQgdHJpZ2dlciBhIFRyYW5zZmVyIGV2ZW50IHdpdGggdGhlIF9mcm9tIGFkZHJlc3Mgc2V0IHRvIDB4MCB3aGVuIHRva2VucyBhcmUgY3JlYXRlZC4KICAgIFRyYW5zZmVyKDB4MCwgb3duZXJBLCBwaWNvcyk7IC8vIGxvZyBldmVudCAweDAgZnJvbSA9PSBtaW50aW5nCiAgfQoKICAvLyBQcmVwYXJlRm9yU2FsZSgpCiAgLy8gc3RvcHMgdHJhbnNmZXJzIGFuZCBhbGxvd3MgcHVyY2hhc2VzCiAgZnVuY3Rpb24gUHJlcGFyZUZvclNhbGUoKSBJc093bmVyIHsKICAgIHJlcXVpcmUoIWljb0NvbXBsZXRlQik7IC8vIENhbm5vdCBzdGFydCBzZWxsaW5nIGFnYWluIG9uY2UgSUNPIGhhcyBiZWVuIHNldCB0byBjb21wbGV0ZWQKICAgIHNhbGVJblByb2dyZXNzQiA9IHRydWU7IC8vIHN0b3BzIHRyYW5zZmVycwogIH0KCiAgLy8gQ2hhbmdlT3duZXIoKQogIC8vIFRvIGJlIGNhbGxlZCBieSBvd25lciB0byBjaGFuZ2UgdGhlIHRva2VuIGNvbnRyYWN0IG93bmVyLCBleHBlY3RlZCB0byBiZSB0byBhIHNhbGUgY29udHJhY3QKICAvLyBUcmFuc2ZlcnMgYW55IG1pbnRlZCB0b2tlbnMgZnJvbSBvbGQgdG8gbmV3IHNhbGUgY29udHJhY3QKICBmdW5jdGlvbiBDaGFuZ2VPd25lcihhZGRyZXNzIHZOZXdPd25lckEpIHsgLy8gSXNPd25lciBjL28gdGhlIHN1cGVyLkNoYW5nZU93bmVyKCkgY2FsbAogICAgdHJhbnNmZXIodk5ld093bmVyQSwgaVRva2Vuc093bmVkTVtvd25lckFdKTsgLy8gaW5jbHVkZXMgY2hlY2tzCiAgICBzdXBlci5DaGFuZ2VPd25lcih2TmV3T3duZXJBKTsgLy8gaW5jbHVkZXMgYW4gSXNPd25lciBjaGVjayBzbyBkb24ndCBuZWVkIHRvIHJlcGVhdCBpdCBoZXJlCiAgfQoKICAvLyBQdWJsaWMgQ29uc3RhbnQgTWV0aG9kcwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gTm9uZS4gVXNlZCBwdWJsaWMgdmFyaWFibGVzIGluc3RlYWQgd2hpY2ggcmVzdWx0IGluIGdldHRlciBmdW5jdGlvbnMKCiAgLy8gU3RhdGUgY2hhbmdpbmcgcHVibGljIG1ldGhvZHMgbWFkZSBwYXVzZS1hYmxlIGFuZCB3aXRoIGNhbGwgbG9nZ2luZwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gSXNzdWUoKQogIC8vIFRyYW5zZmVycyBwaWNvcyB0b2tlbnMgdG8gZHN0IHRvIGlzc3VlIHRoZW0uIElzT3duZXIgYmVjYXVzZSB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGNhbGxlZCBmcm9tIHRoZSB0b2tlbiBzYWxlIGNvbnRyYWN0CiAgZnVuY3Rpb24gSXNzdWUoYWRkcmVzcyBkc3QsIHVpbnQgcGljb3MpIElzT3duZXIgSXNBY3RpdmUgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShzYWxlSW5Qcm9ncmVzc0IgICAgICAvLyBTYWxlIGlzIGluIHByb2dyZXNzCiAgICAgICAgICYmIGlUb2tlbnNPd25lZE1bb3duZXJBXSA+PSBwaWNvcyAvLyBPd25lciBoYXMgdGhlIHRva2VucyBhdmFpbGFibGUKICAgICAgLy8gJiYgcGljb3MgPiAwICAgICAgICAgICAgLy8gTm9uLXplcm8gaXNzdWUgTm8gbmVlZCB0byBjaGVjayBmb3IgdGhpcwogICAgICAgICAmJiBkc3QgIT0gYWRkcmVzcyh0aGlzKSAvLyBOb3QgaXNzdWluZyB0byB0aGlzIHRva2VuIGNvbnRyYWN0CiAgICAgICAgICYmIGRzdCAhPSBvd25lckEpOyAgICAgIC8vIE5vdCBpc3N1aW5nIHRvIHRoZSBvd25lciBvZiB0aGlzIGNvbnRyYWN0IC0gdGhlIHRva2VuIHNhbGUgY29udHJhY3QKICAgIGlmIChpVG9rZW5zT3duZWRNW2RzdF0gPT0gMCkKICAgICAgY29udHJpYnV0b3JzKys7CiAgICBpVG9rZW5zT3duZWRNW293bmVyQV0gLT0gcGljb3M7IC8vIFRoZXJlIGlzIG5vIG5lZWQgdG8gY2hlY2sgdGhpcyBmb3IgdW5kZXJmbG93IHZpYSBhIHN1YigpIGNhbGwgZ2l2ZW4gdGhlIGlUb2tlbnNPd25lZE1bb3duZXJBXSA+PSBwaWNvcyBjaGVjawogICAgaVRva2Vuc093bmVkTVtkc3RdICAgICA9IGFkZChpVG9rZW5zT3duZWRNW2RzdF0sIHBpY29zKTsKICAgIHRva2Vuc0lzc3VlZCAgICAgICAgICAgPSBhZGQodG9rZW5zSXNzdWVkLCAgICAgICBwaWNvcyk7CiAgICB0b2tlbnNBdmFpbGFibGUgICAgPSBzdWJNYXhaZXJvKHRva2Vuc0F2YWlsYWJsZSwgcGljb3MpOyAvLyBzdWJNYXhaZXJvKCkgaW4gY2FzZSBhIHNhbGUgZ29lcyBvdmVyLCBvbmx5IHBvc3NpYmxlIGZvciBmdWxsIElDTywgd2hlbiBjYXAgaXMgZm9yIGFsbCBhdmFpbGFibGUgdG9rZW5zLgogICAgTG9nSXNzdWUoZHN0LCBwaWNvcyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhhdCBzaG91bGQgaGFwcGVuLG1heSBuZWVkIHRvIG1pbnQgc29tZSBtb3JlIFBJT0VzIHRvIGFsbG93IGZvdW5kZXIgYW5kIGZvdW5kYXRpb24gdmVzdGluZyB0byBjb21wbGV0ZS4KICAgIHJldHVybiB0cnVlOwogIH0KCiAgLy8gU2FsZUNhcFJlYWNoZWQoKQogIC8vIFRvIGJlIGJlIGNhbGxlZCBmcm9tIHRoZSB0b2tlbiBzYWxlIGNvbnRyYWN0IHdoZW4gYSBjYXAgKHByZSBvciBmdWxsKSBpcyByZWFjaGVkCiAgLy8gQWxsb3dzIHRyYW5zZmVycwogIGZ1bmN0aW9uIFNhbGVDYXBSZWFjaGVkKCkgSXNPd25lciBJc0FjdGl2ZSB7CiAgICBzYWxlSW5Qcm9ncmVzc0IgPSBmYWxzZTsgLy8gYWxsb3dzIHRyYW5zZmVycwogICAgTG9nU2FsZUNhcFJlYWNoZWQodG9rZW5zSXNzdWVkKTsKICB9CgogIC8vIEZ1bmN0aW9ucyBmb3IgbWFudWFsIGNhbGxpbmcgdmlhIHNhbWUgbmFtZSBmdW5jdGlvbiBpbiBQYWNpb0lDTygpCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAvLyBJY29Db21wbGV0ZWQoKQogIC8vIFRvIGJlIGJlIGNhbGxlZCBtYW51YWxseSB2aWEgUGFjaW9JQ08gYWZ0ZXIgZnVsbCBJQ08gZW5kcy4gQ291bGQgYmUgY2FsbGVkIGJlZm9yZSBjYXAgaXMgcmVhY2hlZCBpZiAuLi4uCiAgZnVuY3Rpb24gSWNvQ29tcGxldGVkKCkgSXNPd25lciBJc0FjdGl2ZSB7CiAgICByZXF1aXJlKCFpY29Db21wbGV0ZUIpOwogICAgc2FsZUluUHJvZ3Jlc3NCID0gZmFsc2U7IC8vIGFsbG93cyB0cmFuc2ZlcnMKICAgIGljb0NvbXBsZXRlQiAgICA9IHRydWU7CiAgICBMb2dJY29Db21wbGV0ZWQoKTsKICB9CgogIC8vIFNldEZGU2V0dGluZ3MoYWRkcmVzcyB2Rm91bmRlclRva2Vuc0EsIGFkZHJlc3MgdkZvdW5kYXRpb25Ub2tlbnNBLCB1aW50IHZGb3VuZGVyVG9rZW5zQWxsb2NhdGlvbiwgdWludCB2Rm91bmRhdGlvblRva2Vuc0FsbG9jYXRpb24pCiAgLy8gQWxsb3dzIHNldHRpbmcgRm91bmRlciBhbmQgRm91bmRhdGlvbiBhZGRyZXNzZXMgKG9yIGNoYW5naW5nIHRoZW0gaWYgYW4gYXBwcm9wcmlhdGUgdHJhbnNmZXIgaGFzIGJlZW4gZG9uZSkKICAvLyAgcGx1cyBvcHRpb25hbGx5IGNoYW5naW5nIHRoZSBhbGxvY2F0aW9ucyB3aGljaCBhcmUgc2V0IGJ5IHRoZSBjb25zdHJ1Y3Rvciwgc28gdGhhdCB0aGV5IGNhbiBiZSB2YXJpZWQgcG9zdCBkZXBsb3ltZW50IGlmIHJlcXVpcmVkIHJlIGEgY2hhbmdlIG9mIHBsYW4KICAvLyBBbGwgdmFsdWVzIGFyZSBvcHRpb25hbCAtIHplcm9zIGNhbiBiZSBwYXNzZWQKICAvLyBNdXN0IGhhdmUgYmVlbiBjYWxsZWQgd2l0aCBub24temVybyBGb3VuZGVyIGFuZCBGb3VuZGF0aW9uIGFkZHJlc3NlcyBiZWZvcmUgRm91bmRlciBhbmQgRm91bmRhdGlvbiB2ZXN0aW5nIGNhbiBiZSBkb25lCiAgZnVuY3Rpb24gU2V0RkZTZXR0aW5ncyhhZGRyZXNzIHZGb3VuZGVyVG9rZW5zQSwgYWRkcmVzcyB2Rm91bmRhdGlvblRva2Vuc0EsIHVpbnQgdkZvdW5kZXJUb2tlbnNBbGxvY2F0aW9uLCB1aW50IHZGb3VuZGF0aW9uVG9rZW5zQWxsb2NhdGlvbikgSXNPd25lciB7CiAgICBpZiAodkZvdW5kZXJUb2tlbnNBICAgICE9IGFkZHJlc3MoMCkpIHBGb3VuZGVyVG9rc0EgICAgPSB2Rm91bmRlclRva2Vuc0E7CiAgICBpZiAodkZvdW5kYXRpb25Ub2tlbnNBICE9IGFkZHJlc3MoMCkpIHBGb3VuZGF0aW9uVG9rc0EgPSB2Rm91bmRhdGlvblRva2Vuc0E7CiAgICBpZiAodkZvdW5kZXJUb2tlbnNBbGxvY2F0aW9uID4gMCkgICAgYXNzZXJ0KChmb3VuZGVyVG9rZW5zQWxsb2NhdGVkICAgID0gdkZvdW5kZXJUb2tlbnNBbGxvY2F0aW9uKSAgICA+PSBmb3VuZGVyVG9rZW5zVmVzdGVkKTsKICAgIGlmICh2Rm91bmRhdGlvblRva2Vuc0FsbG9jYXRpb24gPiAwKSBhc3NlcnQoKGZvdW5kYXRpb25Ub2tlbnNBbGxvY2F0ZWQgPSB2Rm91bmRhdGlvblRva2Vuc0FsbG9jYXRpb24pID49IGZvdW5kYXRpb25Ub2tlbnNWZXN0ZWQpOwogICAgdG9rZW5zQXZhaWxhYmxlID0gdG90YWxTdXBwbHkgLSBmb3VuZGVyVG9rZW5zQWxsb2NhdGVkIC0gZm91bmRhdGlvblRva2Vuc0FsbG9jYXRlZCAtIHRva2Vuc0lzc3VlZDsKICB9CgogIC8vIFZlc3RGRlRva2VucygpCiAgLy8gVG8gdmVzdCBGb3VuZGVyIGFuZC9vciBGb3VuZGF0aW9uIHRva2VucwogIC8vIDAgY2FuIGJlIHBhc3NlZCBtZWFuaW5nIHNraXAgdGhhdCBvbmUKICAvLyBObyBzZXBhcmF0ZSBldmVudCBhcyB0aGUgTG9nSXNzdWUgZXZlbnQgY2FuIGJlIHVzZWQgdG8gdHJhY2UgdmVzdGluZyB0cmFuc2ZlcnMKICAvLyBUbyBiZSBiZSBjYWxsZWQgbWFudWFsbHkgdmlhIFBhY2lvSUNPCiAgZnVuY3Rpb24gVmVzdEZGVG9rZW5zKHVpbnQgdkZvdW5kZXJUb2tlbnNWZXN0aW5nLCB1aW50IHZGb3VuZGF0aW9uVG9rZW5zVmVzdGluZykgSXNPd25lciBJc0FjdGl2ZSB7CiAgICByZXF1aXJlKGljb0NvbXBsZXRlQik7IC8vIElDTyBtdXN0IGJlIGNvbXBsZXRlZCBiZWZvcmUgdmVzdGluZyBjYW4gb2NjdXIuIGRqaD8/IEFkZCBvdGhlciB0aW1lIHJlc3RyaWN0aW9uPwogICAgaWYgKHZGb3VuZGVyVG9rZW5zVmVzdGluZyA+IDApIHsKICAgICAgYXNzZXJ0KHBGb3VuZGVyVG9rc0EgIT0gYWRkcmVzcygwKSk7IC8vIEZvdW5kZXJzIHRva2VuIGFkZHJlc3MgbXVzdCBoYXZlIGJlZW4gc2V0CiAgICAgIGFzc2VydCgoZm91bmRlclRva2Vuc1Zlc3RlZCAgPSBhZGQoZm91bmRlclRva2Vuc1Zlc3RlZCwgICAgICAgICAgdkZvdW5kZXJUb2tlbnNWZXN0aW5nKSkgPD0gZm91bmRlclRva2Vuc0FsbG9jYXRlZCk7CiAgICAgIGlUb2tlbnNPd25lZE1bb3duZXJBXSAgICAgICAgPSBzdWIoaVRva2Vuc093bmVkTVtvd25lckFdLCAgICAgICAgdkZvdW5kZXJUb2tlbnNWZXN0aW5nKTsKICAgICAgaVRva2Vuc093bmVkTVtwRm91bmRlclRva3NBXSA9IGFkZChpVG9rZW5zT3duZWRNW3BGb3VuZGVyVG9rc0FdLCB2Rm91bmRlclRva2Vuc1Zlc3RpbmcpOwogICAgICBMb2dJc3N1ZShwRm91bmRlclRva3NBLCAgICAgICAgICB2Rm91bmRlclRva2Vuc1Zlc3RpbmcpOwogICAgICB0b2tlbnNJc3N1ZWQgPSBhZGQodG9rZW5zSXNzdWVkLCB2Rm91bmRlclRva2Vuc1Zlc3RpbmcpOwogICAgfQogICAgaWYgKHZGb3VuZGF0aW9uVG9rZW5zVmVzdGluZyA+IDApIHsKICAgICAgYXNzZXJ0KHBGb3VuZGF0aW9uVG9rc0EgIT0gYWRkcmVzcygwKSk7IC8vIEZvdW5kYXRpb24gdG9rZW4gYWRkcmVzcyBtdXN0IGhhdmUgYmVlbiBzZXQKICAgICAgYXNzZXJ0KChmb3VuZGF0aW9uVG9rZW5zVmVzdGVkICA9IGFkZChmb3VuZGF0aW9uVG9rZW5zVmVzdGVkLCAgICAgICAgICB2Rm91bmRhdGlvblRva2Vuc1Zlc3RpbmcpKSA8PSBmb3VuZGF0aW9uVG9rZW5zQWxsb2NhdGVkKTsKICAgICAgaVRva2Vuc093bmVkTVtvd25lckFdICAgICAgICAgICA9IHN1YihpVG9rZW5zT3duZWRNW293bmVyQV0sICAgICAgICAgICB2Rm91bmRhdGlvblRva2Vuc1Zlc3RpbmcpOwogICAgICBpVG9rZW5zT3duZWRNW3BGb3VuZGF0aW9uVG9rc0FdID0gYWRkKGlUb2tlbnNPd25lZE1bcEZvdW5kYXRpb25Ub2tzQV0sIHZGb3VuZGF0aW9uVG9rZW5zVmVzdGluZyk7CiAgICAgIExvZ0lzc3VlKHBGb3VuZGF0aW9uVG9rc0EsICAgICAgIHZGb3VuZGF0aW9uVG9rZW5zVmVzdGluZyk7CiAgICAgIHRva2Vuc0lzc3VlZCA9IGFkZCh0b2tlbnNJc3N1ZWQsIHZGb3VuZGF0aW9uVG9rZW5zVmVzdGluZyk7CiAgICB9CiAgICAvLyBEb2VzIG5vdCBhZmZlY3QgdG9rZW5zQXZhaWxhYmxlIGFzIHRoZXNlIHRva2VucyBoYWQgYWxyZWFkeSBiZWVuIGFsbG93ZWQgZm9yIGluIHRva2Vuc0F2YWlsYWJsZSB3aGVuIGFsbG9jYXRlZAogIH0KCiAgLy8gQnVybigpCiAgLy8gRm9yIHVzZSB3aGVuIHRyYW5zZmVycmluZyBpc3N1ZWQgUElPRXMgdG8gUElPcwogIC8vIFRvIGJlIGJlIGNhbGxlZCBtYW51YWxseSB2aWEgUGFjaW9JQ08gb3IgZnJvbSBhIG5ldyB0cmFuc2ZlciBjb250cmFjdCB0byBiZSB3cml0dGVuIHdoaWNoIGlzIHNldCB0byBvd24gdGhpcyBvbmUKICBmdW5jdGlvbiBCdXJuKGFkZHJlc3Mgc3JjLCB1aW50IHBpY29zKSBJc093bmVyIElzQWN0aXZlIHsKICAgIHJlcXVpcmUoaWNvQ29tcGxldGVCKTsKICAgIGlUb2tlbnNPd25lZE1bc3JjXSA9IHN1Yk1heFplcm8oaVRva2Vuc093bmVkTVtzcmNdLCBwaWNvcyk7CiAgICB0b2tlbnNJc3N1ZWQgICAgICAgPSBzdWJNYXhaZXJvKHRva2Vuc0lzc3VlZCwgcGljb3MpOwogICAgdG90YWxTdXBwbHkgICAgICAgID0gc3ViTWF4WmVybyh0b3RhbFN1cHBseSwgIHBpY29zKTsKICAgIExvZ0J1cm4oc3JjLCBwaWNvcyk7CiAgICAvLyBEb2VzIG5vdCBhZmZlY3QgdG9rZW5zQXZhaWxhYmxlIGFzIHRoZXNlIGFyZSBpc3N1ZWQgdG9rZW5zIHRoYXQgYXJlIGJlaW5nIGJ1cm50CiAgfQoKICAvLyBEZXN0cm95KCkKICAvLyBGb3IgdXNlIHdoZW4gdHJhbnNmZXJyaW5nIHVuaXNzdWVkIFBJT0VzIHRvIFBJT3MKICAvLyBUbyBiZSBiZSBjYWxsZWQgbWFudWFsbHkgdmlhIFBhY2lvSUNPIG9yIGZyb20gYSBuZXcgdHJhbnNmZXIgY29udHJhY3QgdG8gYmUgd3JpdHRlbiB3aGljaCBpcyBzZXQgdG8gb3duIHRoaXMgb25lCiAgZnVuY3Rpb24gRGVzdHJveSh1aW50IHBpY29zKSBJc093bmVyIElzQWN0aXZlIHsKICAgIHJlcXVpcmUoaWNvQ29tcGxldGVCKTsKICAgIHRvdGFsU3VwcGx5ICAgICA9IHN1Yk1heFplcm8odG90YWxTdXBwbHksICAgICBwaWNvcyk7CiAgICB0b2tlbnNBdmFpbGFibGUgPSBzdWJNYXhaZXJvKHRva2Vuc0F2YWlsYWJsZSwgcGljb3MpOwogICAgTG9nRGVzdHJveShwaWNvcyk7CiAgfQoKICAvLyBGYWxsYmFjayBmdW5jdGlvbgogIC8vID09PT09PT09PT09PT09PT09CiAgLy8gTm8gc2VuZGluZyBldGhlciB0byB0aGlzIGNvbnRyYWN0IQogIC8vIE5vdCBwYXlhYmxlIHNvIHRyeWluZyB0byBzZW5kIGV0aGVyIHdpbGwgdGhyb3cKICBmdW5jdGlvbigpIHsKICAgIHJldmVydCgpOyAvLyByZWplY3QgYW55IGF0dGVtcHQgdG8gYWNjZXNzIHRoZSB0b2tlbiBjb250cmFjdCBvdGhlciB0aGFuIHZpYSB0aGUgZGVmaW5lZCBtZXRob2RzIHdpdGggdGhlaXIgdGVzdGluZyBmb3IgdmFsaWQgYWNjZXNzCiAgfQp9IC8vIEVuZCBQYWNpb1Rva2VuIGNvbnRyYWN0'.
	

]
