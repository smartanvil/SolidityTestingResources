Class {
	#name : #SRT9f4ab8545b15ddac78ddd81ca1e35063178cc775,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9f4ab8545b15ddac78ddd81ca1e35063178cc775 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgovKgoqIFRlYW0gQ29weUNhdCBwcmVzZW50cy4uCiogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KgoqIF9fX19fICAgICBfX19fXyAgX19fX18gICAgICAgICoKKnwgIF8gIHxfX198ICBfXyB8IHwgX19ffCAgICAgICAqCip8ICAgX198IC4gfCB8X19fICB8X19fIHwgICAgICAgKgoqfF9ffCAgfF9fX3xfX19fX3wgfF9fX198ICAgICAgICoKKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KgoqIFBvQ1MgPSBQcm9vZiBvZiBDb250cmFjdCBTbmlwaW5nCiogWW91IHNhdyB0aGlzIG9uIFZlcmlmaWVkIENvbnRyYWN0cyBhbmQgZmlndXJlZCBpdCB3aWxsIGhhdmUgYSBmcm9udCBlbmQgc29tZSBkYXksIHNvIHlvdSBwdXQgbW9uZXkgaW4gdG8gZ2V0IGluIGVhcmx5LiBIb3cgaGlnaCB3aWxsIGl0IGdvPz8KKgoqIAoqIC0+IFdobyB3b3JrZWQgb24gdGhpcyBwcm9qZWN0PwoqIC0gVml0YWxpayAobWF0aC9tZW1lcy9tYWluIHNpdGUvbWFzdGVyKQoqIC0gU2F0b3NoaSAobGVhZCBzb2xpZGl0eSBkZXYvbGVhZCB3ZWIzIGRldikKKiAtIEJpbGwgR2F0ZXMgKGNvbmNlcHQgZGVzaWduL2ZlZWRiYWNrL21hbmFnZW1lbnQpCiogLSBTdGVwaGVuIEhhd2tpbmcgKG1haW4gc2l0ZS93ZWIzL3Rlc3QgY2FzZXMpCiogLSBTdGV2ZSBKb2JzIChtYXRoIGZvcm11bGFlL3doaXRlcGFwZXIpCioKKiAtPiBXaG8gaGFzIGF1ZGl0ZWQgJiBhcHByb3ZlZCB0aGUgcHJvamVjdGVkOgoqIC0gSmVzdXMKKiAtIEthbnllCiogLSBUcnVtcAoqLwoKY29udHJhY3QgUG9DUyB7CiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgPSAgICAgICAgICAgIE1PRElGSUVSUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCiAgICAvLyBvbmx5IHBlb3BsZSB3aXRoIHRva2VucwogICAgbW9kaWZpZXIgb25seUJhZ2hvbGRlcnMoKSB7CiAgICAgICAgcmVxdWlyZShteVRva2VucygpID4gMCk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgLy8gb25seSBwZW9wbGUgd2l0aCBwcm9maXRzCiAgICBtb2RpZmllciBvbmx5U3Ryb25naGFuZHMoKSB7CiAgICAgICAgcmVxdWlyZShteURpdmlkZW5kcyh0cnVlKSA+IDApOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIC8vIGFkbWluaXN0cmF0b3JzIGNhbjoKICAgIC8vIC0+IGNoYW5nZSB0aGUgbmFtZSBvZiB0aGUgY29udHJhY3QKICAgIC8vIC0+IGNoYW5nZSB0aGUgbmFtZSBvZiB0aGUgdG9rZW4KICAgIC8vIC0+IGNoYW5nZSB0aGUgUG9TIGRpZmZpY3VsdHkgKEhvdyBtYW55IHRva2VucyBpdCBjb3N0cyB0byBob2xkIGEgbWFzdGVybm9kZSwgaW4gY2FzZSBpdCBnZXRzIGNyYXp5IGhpZ2ggbGF0ZXIpCiAgICAvLyB0aGV5IENBTk5PVDoKICAgIC8vIC0+IHRha2UgZnVuZHMKICAgIC8vIC0+IGRpc2FibGUgd2l0aGRyYXdhbHMKICAgIC8vIC0+IGtpbGwgdGhlIGNvbnRyYWN0CiAgICAvLyAtPiBjaGFuZ2UgdGhlIHByaWNlIG9mIHRva2VucwogICAgbW9kaWZpZXIgb25seUFkbWluaXN0cmF0b3IoKXsKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIHJlcXVpcmUoYWRtaW5pc3RyYXRvcnNba2VjY2FrMjU2KF9jdXN0b21lckFkZHJlc3MpXSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgCiAgICAvLyBlbnN1cmVzIHRoYXQgdGhlIGZpcnN0IHRva2VucyBpbiB0aGUgY29udHJhY3Qgd2lsbCBiZSBlcXVhbGx5IGRpc3RyaWJ1dGVkCiAgICAvLyBtZWFuaW5nLCBubyBkaXZpbmUgZHVtcCB3aWxsIGJlIGV2ZXIgcG9zc2libGUKICAgIC8vIHJlc3VsdDogaGVhbHRoeSBsb25nZXZpdHkuCiAgICBtb2RpZmllciBhbnRpRWFybHlXaGFsZSh1aW50MjU2IF9hbW91bnRPZkV0aGVyZXVtKXsKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIAogICAgICAgIC8vIGFyZSB3ZSBzdGlsbCBpbiB0aGUgdnVsbmVyYWJsZSBwaGFzZT8KICAgICAgICAvLyBpZiBzbywgZW5hY3QgYW50aSBlYXJseSB3aGFsZSBwcm90b2NvbCAKICAgICAgICBpZiggb25seUFtYmFzc2Fkb3JzICYmICgodG90YWxFdGhlcmV1bUJhbGFuY2UoKSAtIF9hbW91bnRPZkV0aGVyZXVtKSA8PSBhbWJhc3NhZG9yUXVvdGFfICkpewogICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgLy8gaXMgdGhlIGN1c3RvbWVyIGluIHRoZSBhbWJhc3NhZG9yIGxpc3Q/CiAgICAgICAgICAgICAgICBhbWJhc3NhZG9yc19bX2N1c3RvbWVyQWRkcmVzc10gPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBkb2VzIHRoZSBjdXN0b21lciBwdXJjaGFzZSBleGNlZWQgdGhlIG1heCBhbWJhc3NhZG9yIHF1b3RhPwogICAgICAgICAgICAgICAgKGFtYmFzc2Fkb3JBY2N1bXVsYXRlZFF1b3RhX1tfY3VzdG9tZXJBZGRyZXNzXSArIF9hbW91bnRPZkV0aGVyZXVtKSA8PSBhbWJhc3NhZG9yTWF4UHVyY2hhc2VfCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHVwZGF0ZWQgdGhlIGFjY3VtdWxhdGVkIHF1b3RhICAgIAogICAgICAgICAgICBhbWJhc3NhZG9yQWNjdW11bGF0ZWRRdW90YV9bX2N1c3RvbWVyQWRkcmVzc10gPSBTYWZlTWF0aC5hZGQoYW1iYXNzYWRvckFjY3VtdWxhdGVkUXVvdGFfW19jdXN0b21lckFkZHJlc3NdLCBfYW1vdW50T2ZFdGhlcmV1bSk7CiAgICAgICAgCiAgICAgICAgICAgIC8vIGV4ZWN1dGUKICAgICAgICAgICAgXzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBpbiBjYXNlIHRoZSBldGhlciBjb3VudCBkcm9wcyBsb3csIHRoZSBhbWJhc3NhZG9yIHBoYXNlIHdvbid0IHJlaW5pdGlhdGUKICAgICAgICAgICAgb25seUFtYmFzc2Fkb3JzID0gZmFsc2U7CiAgICAgICAgICAgIF87ICAgIAogICAgICAgIH0KICAgICAgICAKICAgIH0KICAgIAogICAgCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgPSAgICAgICAgICAgIEVWRU5UUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCiAgICBldmVudCBvblRva2VuUHVyY2hhc2UoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGN1c3RvbWVyQWRkcmVzcywKICAgICAgICB1aW50MjU2IGluY29taW5nRXRoZXJldW0sCiAgICAgICAgdWludDI1NiB0b2tlbnNNaW50ZWQsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHJlZmVycmVkQnkKICAgICk7CiAgICAKICAgIGV2ZW50IG9uVG9rZW5TZWxsKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBjdXN0b21lckFkZHJlc3MsCiAgICAgICAgdWludDI1NiB0b2tlbnNCdXJuZWQsCiAgICAgICAgdWludDI1NiBldGhlcmV1bUVhcm5lZAogICAgKTsKICAgIAogICAgZXZlbnQgb25SZWludmVzdG1lbnQoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGN1c3RvbWVyQWRkcmVzcywKICAgICAgICB1aW50MjU2IGV0aGVyZXVtUmVpbnZlc3RlZCwKICAgICAgICB1aW50MjU2IHRva2Vuc01pbnRlZAogICAgKTsKICAgIAogICAgZXZlbnQgb25XaXRoZHJhdygKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgY3VzdG9tZXJBZGRyZXNzLAogICAgICAgIHVpbnQyNTYgZXRoZXJldW1XaXRoZHJhd24KICAgICk7CiAgICAKICAgIC8vIEVSQzIwCiAgICBldmVudCBUcmFuc2ZlcigKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgZnJvbSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgdG8sCiAgICAgICAgdWludDI1NiB0b2tlbnMKICAgICk7CiAgICAKICAgIAogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICA9ICAgICAgICAgICAgQ09ORklHVVJBQkxFUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIlBPQ1MiOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiUE9DUyI7CiAgICB1aW50OCBjb25zdGFudCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQ4IGNvbnN0YW50IGludGVybmFsIGRpdmlkZW5kRmVlXyA9IDEwMDsKICAgIHVpbnQyNTYgY29uc3RhbnQgaW50ZXJuYWwgdG9rZW5QcmljZUluaXRpYWxfID0gMC4wMDAwMDAxIGV0aGVyOwogICAgdWludDI1NiBjb25zdGFudCBpbnRlcm5hbCB0b2tlblByaWNlSW5jcmVtZW50YWxfID0gMC4wMDAwMDAwMSBldGhlcjsKICAgIHVpbnQyNTYgY29uc3RhbnQgaW50ZXJuYWwgbWFnbml0dWRlID0gMioqNjQ7CiAgICAKICAgIC8vIHByb29mIG9mIHN0YWtlIChkZWZhdWx0cyBhdCAxMDAgdG9rZW5zKQogICAgdWludDI1NiBwdWJsaWMgc3Rha2luZ1JlcXVpcmVtZW50ID0gNWUxODsKICAgIAogICAgLy8gYW1iYXNzYWRvciBwcm9ncmFtCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgaW50ZXJuYWwgYW1iYXNzYWRvcnNfOwogICAgdWludDI1NiBjb25zdGFudCBpbnRlcm5hbCBhbWJhc3NhZG9yTWF4UHVyY2hhc2VfID0gMTAgZXRoZXI7CiAgICB1aW50MjU2IGNvbnN0YW50IGludGVybmFsIGFtYmFzc2Fkb3JRdW90YV8gPSAxMCBldGhlcjsKICAgIAogICAgCiAgICAKICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgPSAgICAgICAgICAgIERBVEFTRVRTICAgICAgICAgICAgPQogICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogICAgLy8gYW1vdW50IG9mIHNoYXJlcyBmb3IgZWFjaCBhZGRyZXNzIChzY2FsZWQgbnVtYmVyKQogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIHRva2VuQmFsYW5jZUxlZGdlcl87CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgaW50ZXJuYWwgcmVmZXJyYWxCYWxhbmNlXzsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBpbnQyNTYpIGludGVybmFsIHBheW91dHNUb187CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgaW50ZXJuYWwgYW1iYXNzYWRvckFjY3VtdWxhdGVkUXVvdGFfOwogICAgdWludDI1NiBpbnRlcm5hbCB0b2tlblN1cHBseV8gPSAwOwogICAgdWludDI1NiBpbnRlcm5hbCBwcm9maXRQZXJTaGFyZV87CiAgICAKICAgIC8vIGFkbWluaXN0cmF0b3IgbGlzdCAoc2VlIGFib3ZlIG9uIHdoYXQgdGhleSBjYW4gZG8pCiAgICBtYXBwaW5nKGJ5dGVzMzIgPT4gYm9vbCkgcHVibGljIGFkbWluaXN0cmF0b3JzOwogICAgCiAgICAvLyB3aGVuIHRoaXMgaXMgc2V0IHRvIHRydWUsIG9ubHkgYW1iYXNzYWRvcnMgY2FuIHB1cmNoYXNlIHRva2VucyAodGhpcyBwcmV2ZW50cyBhIHdoYWxlIHByZW1pbmUsIGl0IGVuc3VyZXMgYSBmYWlybHkgZGlzdHJpYnV0ZWQgdXBwZXIgcHlyYW1pZCkKICAgIGJvb2wgcHVibGljIG9ubHlBbWJhc3NhZG9ycyA9IGZhbHNlOwogICAgCgoKICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICA9ICAgICAgICAgICAgUFVCTElDIEZVTkNUSU9OUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCiAgICAvKgogICAgKiAtLSBBUFBMSUNBVElPTiBFTlRSWSBQT0lOVFMgLS0gIAogICAgKi8KICAgIGZ1bmN0aW9uIEhvdXJnbGFzcygpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgLy8gYWRkIGFkbWluaXN0cmF0b3JzIGhlcmUKICAgICAgICBhZG1pbmlzdHJhdG9yc1sweDVlMmUyODhlMDQ1NjdlY2Y3NGNhNmU1Y2JlNmU1NDA1MmMzZTU2M2YwNTVlOWRmMjllNzc3ZDU3YjQ3OWJlOTFdID0gdHJ1ZTsKICAgICAgICAKICAgICAgICAvLyBhZGQgdGhlIGFtYmFzc2Fkb3JzIGhlcmUuCiAgICAgICAgLy8gT25lIGxvbmVseSBkZXZlbG9wZXIgCiAgICAgICAgYW1iYXNzYWRvcnNfWzB4NTBjZjRhYUI1ZjI3RjU0MTMyRDU1Zjk2QmEyMUM2QWU4QjcxNmQyN10gPSB0cnVlOwogICAgICAgIAogICAgICAgIAogICAgIAoKICAgIH0KICAgIAogICAgIAogICAgLyoqCiAgICAgKiBDb252ZXJ0cyBhbGwgaW5jb21pbmcgZXRoZXJldW0gdG8gdG9rZW5zIGZvciB0aGUgY2FsbGVyLCBhbmQgcGFzc2VzIGRvd24gdGhlIHJlZmVycmFsIGFkZHkgKGlmIGFueSkKICAgICAqLwogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgX3JlZmVycmVkQnkpCiAgICAgICAgcHVibGljCiAgICAgICAgcGF5YWJsZQogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICBwdXJjaGFzZVRva2Vucyhtc2cudmFsdWUsIF9yZWZlcnJlZEJ5KTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBGYWxsYmFjayBmdW5jdGlvbiB0byBoYW5kbGUgZXRoZXJldW0gdGhhdCB3YXMgc2VuZCBzdHJhaWdodCB0byB0aGUgY29udHJhY3QKICAgICAqIFVuZm9ydHVuYXRlbHkgd2UgY2Fubm90IHVzZSBhIHJlZmVycmFsIGFkZHJlc3MgdGhpcyB3YXkuCiAgICAgKi8KICAgIGZ1bmN0aW9uKCkKICAgICAgICBwYXlhYmxlCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgcHVyY2hhc2VUb2tlbnMobXNnLnZhbHVlLCAweDApOwogICAgfQogICAgCiAgICAvKioKICAgICAqIENvbnZlcnRzIGFsbCBvZiBjYWxsZXIncyBkaXZpZGVuZHMgdG8gdG9rZW5zLgogICAgICovCiAgICBmdW5jdGlvbiByZWludmVzdCgpCiAgICAgICAgb25seVN0cm9uZ2hhbmRzKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICAvLyBmZXRjaCBkaXZpZGVuZHMKICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBteURpdmlkZW5kcyhmYWxzZSk7IC8vIHJldHJpZXZlIHJlZi4gYm9udXMgbGF0ZXIgaW4gdGhlIGNvZGUKICAgICAgICAKICAgICAgICAvLyBwYXkgb3V0IHRoZSBkaXZpZGVuZHMgdmlydHVhbGx5CiAgICAgICAgYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICBwYXlvdXRzVG9fW19jdXN0b21lckFkZHJlc3NdICs9ICAoaW50MjU2KSAoX2RpdmlkZW5kcyAqIG1hZ25pdHVkZSk7CiAgICAgICAgCiAgICAgICAgLy8gcmV0cmlldmUgcmVmLiBib251cwogICAgICAgIF9kaXZpZGVuZHMgKz0gcmVmZXJyYWxCYWxhbmNlX1tfY3VzdG9tZXJBZGRyZXNzXTsKICAgICAgICByZWZlcnJhbEJhbGFuY2VfW19jdXN0b21lckFkZHJlc3NdID0gMDsKICAgICAgICAKICAgICAgICAvLyBkaXNwYXRjaCBhIGJ1eSBvcmRlciB3aXRoIHRoZSB2aXJ0dWFsaXplZCAid2l0aGRyYXduIGRpdmlkZW5kcyIKICAgICAgICB1aW50MjU2IF90b2tlbnMgPSBwdXJjaGFzZVRva2VucyhfZGl2aWRlbmRzLCAweDApOwogICAgICAgIAogICAgICAgIC8vIGZpcmUgZXZlbnQKICAgICAgICBvblJlaW52ZXN0bWVudChfY3VzdG9tZXJBZGRyZXNzLCBfZGl2aWRlbmRzLCBfdG9rZW5zKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBBbGlhcyBvZiBzZWxsKCkgYW5kIHdpdGhkcmF3KCkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGV4aXQoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIC8vIGdldCB0b2tlbiBjb3VudCBmb3IgY2FsbGVyICYgc2VsbCB0aGVtIGFsbAogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludDI1NiBfdG9rZW5zID0gdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXTsKICAgICAgICBpZihfdG9rZW5zID4gMCkgc2VsbChfdG9rZW5zKTsKICAgICAgICAKICAgICAgICAvLyBsYW1ibyBkZWxpdmVyeSBzZXJ2aWNlCiAgICAgICAgd2l0aGRyYXcoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdpdGhkcmF3cyBhbGwgb2YgdGhlIGNhbGxlcnMgZWFybmluZ3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkKICAgICAgICBvbmx5U3Ryb25naGFuZHMoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIC8vIHNldHVwIGRhdGEKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IG15RGl2aWRlbmRzKGZhbHNlKTsgLy8gZ2V0IHJlZi4gYm9udXMgbGF0ZXIgaW4gdGhlIGNvZGUKICAgICAgICAKICAgICAgICAvLyB1cGRhdGUgZGl2aWRlbmQgdHJhY2tlcgogICAgICAgIHBheW91dHNUb19bX2N1c3RvbWVyQWRkcmVzc10gKz0gIChpbnQyNTYpIChfZGl2aWRlbmRzICogbWFnbml0dWRlKTsKICAgICAgICAKICAgICAgICAvLyBhZGQgcmVmLiBib251cwogICAgICAgIF9kaXZpZGVuZHMgKz0gcmVmZXJyYWxCYWxhbmNlX1tfY3VzdG9tZXJBZGRyZXNzXTsKICAgICAgICByZWZlcnJhbEJhbGFuY2VfW19jdXN0b21lckFkZHJlc3NdID0gMDsKICAgICAgICAKICAgICAgICAvLyBsYW1ibyBkZWxpdmVyeSBzZXJ2aWNlCiAgICAgICAgX2N1c3RvbWVyQWRkcmVzcy50cmFuc2ZlcihfZGl2aWRlbmRzKTsKICAgICAgICAKICAgICAgICAvLyBmaXJlIGV2ZW50CiAgICAgICAgb25XaXRoZHJhdyhfY3VzdG9tZXJBZGRyZXNzLCBfZGl2aWRlbmRzKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBMaXF1aWZpZXMgdG9rZW5zIHRvIGV0aGVyZXVtLgogICAgICovCiAgICBmdW5jdGlvbiBzZWxsKHVpbnQyNTYgX2Ftb3VudE9mVG9rZW5zKQogICAgICAgIG9ubHlCYWdob2xkZXJzKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICAvLyBzZXR1cCBkYXRhCiAgICAgICAgYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICAvLyBydXNzaWFuIGhhY2tlcnMgQlRGTwogICAgICAgIHJlcXVpcmUoX2Ftb3VudE9mVG9rZW5zIDw9IHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc10pOwogICAgICAgIHVpbnQyNTYgX3Rva2VucyA9IF9hbW91bnRPZlRva2VuczsKICAgICAgICB1aW50MjU2IF9ldGhlcmV1bSA9IHRva2Vuc1RvRXRoZXJldW1fKF90b2tlbnMpOwogICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IFNhZmVNYXRoLmRpdihfZXRoZXJldW0sIGRpdmlkZW5kRmVlXyk7CiAgICAgICAgdWludDI1NiBfdGF4ZWRFdGhlcmV1bSA9IFNhZmVNYXRoLnN1YihfZXRoZXJldW0sIF9kaXZpZGVuZHMpOwogICAgICAgIAogICAgICAgIC8vIGJ1cm4gdGhlIHNvbGQgdG9rZW5zCiAgICAgICAgdG9rZW5TdXBwbHlfID0gU2FmZU1hdGguc3ViKHRva2VuU3VwcGx5XywgX3Rva2Vucyk7CiAgICAgICAgdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSA9IFNhZmVNYXRoLnN1Yih0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdLCBfdG9rZW5zKTsKICAgICAgICAKICAgICAgICAvLyB1cGRhdGUgZGl2aWRlbmRzIHRyYWNrZXIKICAgICAgICBpbnQyNTYgX3VwZGF0ZWRQYXlvdXRzID0gKGludDI1NikgKHByb2ZpdFBlclNoYXJlXyAqIF90b2tlbnMgKyAoX3RheGVkRXRoZXJldW0gKiBtYWduaXR1ZGUpKTsKICAgICAgICBwYXlvdXRzVG9fW19jdXN0b21lckFkZHJlc3NdIC09IF91cGRhdGVkUGF5b3V0czsgICAgICAgCiAgICAgICAgCiAgICAgICAgLy8gZGl2aWRpbmcgYnkgemVybyBpcyBhIGJhZCBpZGVhCiAgICAgICAgaWYgKHRva2VuU3VwcGx5XyA+IDApIHsKICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBhbW91bnQgb2YgZGl2aWRlbmRzIHBlciB0b2tlbgogICAgICAgICAgICBwcm9maXRQZXJTaGFyZV8gPSBTYWZlTWF0aC5hZGQocHJvZml0UGVyU2hhcmVfLCAoX2RpdmlkZW5kcyAqIG1hZ25pdHVkZSkgLyB0b2tlblN1cHBseV8pOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBmaXJlIGV2ZW50CiAgICAgICAgb25Ub2tlblNlbGwoX2N1c3RvbWVyQWRkcmVzcywgX3Rva2VucywgX3RheGVkRXRoZXJldW0pOwogICAgfQogICAgCiAgICAKICAgIC8qKgogICAgICogVHJhbnNmZXIgdG9rZW5zIGZyb20gdGhlIGNhbGxlciB0byBhIG5ldyBob2xkZXIuCiAgICAgKiBSZW1lbWJlciwgdGhlcmUncyBhIDEwJSBmZWUgaGVyZSBhcyB3ZWxsLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90b0FkZHJlc3MsIHVpbnQyNTYgX2Ftb3VudE9mVG9rZW5zKQogICAgICAgIG9ubHlCYWdob2xkZXJzKCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zKGJvb2wpCiAgICB7CiAgICAgICAgLy8gc2V0dXAKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIAogICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBoYXZlIHRoZSByZXF1ZXN0ZWQgdG9rZW5zCiAgICAgICAgLy8gYWxzbyBkaXNhYmxlcyB0cmFuc2ZlcnMgdW50aWwgYW1iYXNzYWRvciBwaGFzZSBpcyBvdmVyCiAgICAgICAgLy8gKCB3ZSBkb250IHdhbnQgd2hhbGUgcHJlbWluZXMgKQogICAgICAgIHJlcXVpcmUoIW9ubHlBbWJhc3NhZG9ycyAmJiBfYW1vdW50T2ZUb2tlbnMgPD0gdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSk7CiAgICAgICAgCiAgICAgICAgLy8gd2l0aGRyYXcgYWxsIG91dHN0YW5kaW5nIGRpdmlkZW5kcyBmaXJzdAogICAgICAgIGlmKG15RGl2aWRlbmRzKHRydWUpID4gMCkgd2l0aGRyYXcoKTsKICAgICAgICAKICAgICAgICAvLyBsaXF1aWZ5IDEwJSBvZiB0aGUgdG9rZW5zIHRoYXQgYXJlIHRyYW5zZmVyZWQKICAgICAgICAvLyB0aGVzZSBhcmUgZGlzcGVyc2VkIHRvIHNoYXJlaG9sZGVycwogICAgICAgIHVpbnQyNTYgX3Rva2VuRmVlID0gU2FmZU1hdGguZGl2KF9hbW91bnRPZlRva2VucywgZGl2aWRlbmRGZWVfKTsKICAgICAgICB1aW50MjU2IF90YXhlZFRva2VucyA9IFNhZmVNYXRoLnN1YihfYW1vdW50T2ZUb2tlbnMsIF90b2tlbkZlZSk7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gdG9rZW5zVG9FdGhlcmV1bV8oX3Rva2VuRmVlKTsKICAKICAgICAgICAvLyBidXJuIHRoZSBmZWUgdG9rZW5zCiAgICAgICAgdG9rZW5TdXBwbHlfID0gU2FmZU1hdGguc3ViKHRva2VuU3VwcGx5XywgX3Rva2VuRmVlKTsKCiAgICAgICAgLy8gZXhjaGFuZ2UgdG9rZW5zCiAgICAgICAgdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSA9IFNhZmVNYXRoLnN1Yih0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdLCBfYW1vdW50T2ZUb2tlbnMpOwogICAgICAgIHRva2VuQmFsYW5jZUxlZGdlcl9bX3RvQWRkcmVzc10gPSBTYWZlTWF0aC5hZGQodG9rZW5CYWxhbmNlTGVkZ2VyX1tfdG9BZGRyZXNzXSwgX3RheGVkVG9rZW5zKTsKICAgICAgICAKICAgICAgICAvLyB1cGRhdGUgZGl2aWRlbmQgdHJhY2tlcnMKICAgICAgICBwYXlvdXRzVG9fW19jdXN0b21lckFkZHJlc3NdIC09IChpbnQyNTYpIChwcm9maXRQZXJTaGFyZV8gKiBfYW1vdW50T2ZUb2tlbnMpOwogICAgICAgIHBheW91dHNUb19bX3RvQWRkcmVzc10gKz0gKGludDI1NikgKHByb2ZpdFBlclNoYXJlXyAqIF90YXhlZFRva2Vucyk7CiAgICAgICAgCiAgICAgICAgLy8gZGlzcGVyc2UgZGl2aWRlbmRzIGFtb25nIGhvbGRlcnMKICAgICAgICBwcm9maXRQZXJTaGFyZV8gPSBTYWZlTWF0aC5hZGQocHJvZml0UGVyU2hhcmVfLCAoX2RpdmlkZW5kcyAqIG1hZ25pdHVkZSkgLyB0b2tlblN1cHBseV8pOwogICAgICAgIAogICAgICAgIC8vIGZpcmUgZXZlbnQKICAgICAgICBUcmFuc2ZlcihfY3VzdG9tZXJBZGRyZXNzLCBfdG9BZGRyZXNzLCBfdGF4ZWRUb2tlbnMpOwogICAgICAgIAogICAgICAgIC8vIEVSQzIwCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAKICAgIH0KICAgIAogICAgLyotLS0tLS0tLS0tICBBRE1JTklTVFJBVE9SIE9OTFkgRlVOQ1RJT05TICAtLS0tLS0tLS0tKi8KICAgIC8qKgogICAgICogSW4gY2FzZSB0aGUgYW1hc3NhZG9yIHF1b3RhIGlzIG5vdCBtZXQsIHRoZSBhZG1pbmlzdHJhdG9yIGNhbiBtYW51YWxseSBkaXNhYmxlIHRoZSBhbWJhc3NhZG9yIHBoYXNlLgogICAgICovCiAgICBmdW5jdGlvbiBkaXNhYmxlSW5pdGlhbFN0YWdlKCkKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgb25seUFtYmFzc2Fkb3JzID0gZmFsc2U7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogSW4gY2FzZSBvbmUgb2YgdXMgZGllcywgd2UgbmVlZCB0byByZXBsYWNlIG91cnNlbHZlcy4KICAgICAqLwogICAgZnVuY3Rpb24gc2V0QWRtaW5pc3RyYXRvcihieXRlczMyIF9pZGVudGlmaWVyLCBib29sIF9zdGF0dXMpCiAgICAgICAgb25seUFkbWluaXN0cmF0b3IoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIGFkbWluaXN0cmF0b3JzW19pZGVudGlmaWVyXSA9IF9zdGF0dXM7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUHJlY2F1dGlvbmFyeSBtZWFzdXJlcyBpbiBjYXNlIHdlIG5lZWQgdG8gYWRqdXN0IHRoZSBtYXN0ZXJub2RlIHJhdGUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFN0YWtpbmdSZXF1aXJlbWVudCh1aW50MjU2IF9hbW91bnRPZlRva2VucykKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgc3Rha2luZ1JlcXVpcmVtZW50ID0gX2Ftb3VudE9mVG9rZW5zOwogICAgfQogICAgCiAgICAvKioKICAgICAqIElmIHdlIHdhbnQgdG8gcmVicmFuZCwgd2UgY2FuLgogICAgICovCiAgICBmdW5jdGlvbiBzZXROYW1lKHN0cmluZyBfbmFtZSkKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgbmFtZSA9IF9uYW1lOwogICAgfQogICAgCiAgICAvKioKICAgICAqIElmIHdlIHdhbnQgdG8gcmVicmFuZCwgd2UgY2FuLgogICAgICovCiAgICBmdW5jdGlvbiBzZXRTeW1ib2woc3RyaW5nIF9zeW1ib2wpCiAgICAgICAgb25seUFkbWluaXN0cmF0b3IoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICB9CgogICAgCiAgICAvKi0tLS0tLS0tLS0gIEhFTFBFUlMgQU5EIENBTENVTEFUT1JTICAtLS0tLS0tLS0tKi8KICAgIC8qKgogICAgICogTWV0aG9kIHRvIHZpZXcgdGhlIGN1cnJlbnQgRXRoZXJldW0gc3RvcmVkIGluIHRoZSBjb250cmFjdAogICAgICogRXhhbXBsZTogdG90YWxFdGhlcmV1bUJhbGFuY2UoKQogICAgICovCiAgICBmdW5jdGlvbiB0b3RhbEV0aGVyZXVtQmFsYW5jZSgpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnModWludCkKICAgIHsKICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSB0b3RhbCB0b2tlbiBzdXBwbHkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHJldHVybiB0b2tlblN1cHBseV87CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIHRva2VucyBvd25lZCBieSB0aGUgY2FsbGVyLgogICAgICovCiAgICBmdW5jdGlvbiBteVRva2VucygpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIHJldHVybiBiYWxhbmNlT2YoX2N1c3RvbWVyQWRkcmVzcyk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIGRpdmlkZW5kcyBvd25lZCBieSB0aGUgY2FsbGVyLgogICAgICogSWYgYF9pbmNsdWRlUmVmZXJyYWxCb251c2AgaXMgdG8gdG8gMS90cnVlLCB0aGUgcmVmZXJyYWwgYm9udXMgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgY2FsY3VsYXRpb25zLgogICAgICogVGhlIHJlYXNvbiBmb3IgdGhpcywgaXMgdGhhdCBpbiB0aGUgZnJvbnRlbmQsIHdlIHdpbGwgd2FudCB0byBnZXQgdGhlIHRvdGFsIGRpdnMgKGdsb2JhbCArIHJlZikKICAgICAqIEJ1dCBpbiB0aGUgaW50ZXJuYWwgY2FsY3VsYXRpb25zLCB3ZSB3YW50IHRoZW0gc2VwYXJhdGUuIAogICAgICovIAogICAgZnVuY3Rpb24gbXlEaXZpZGVuZHMoYm9vbCBfaW5jbHVkZVJlZmVycmFsQm9udXMpIAogICAgICAgIHB1YmxpYyAKICAgICAgICB2aWV3IAogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIHJldHVybiBfaW5jbHVkZVJlZmVycmFsQm9udXMgPyBkaXZpZGVuZHNPZihfY3VzdG9tZXJBZGRyZXNzKSArIHJlZmVycmFsQmFsYW5jZV9bX2N1c3RvbWVyQWRkcmVzc10gOiBkaXZpZGVuZHNPZihfY3VzdG9tZXJBZGRyZXNzKSA7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIHRva2VuIGJhbGFuY2Ugb2YgYW55IHNpbmdsZSBhZGRyZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzKQogICAgICAgIHZpZXcKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcmV0dXJuIHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc107CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIGRpdmlkZW5kIGJhbGFuY2Ugb2YgYW55IHNpbmdsZSBhZGRyZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBkaXZpZGVuZHNPZihhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MpCiAgICAgICAgdmlldwogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICByZXR1cm4gKHVpbnQyNTYpICgoaW50MjU2KShwcm9maXRQZXJTaGFyZV8gKiB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdKSAtIHBheW91dHNUb19bX2N1c3RvbWVyQWRkcmVzc10pIC8gbWFnbml0dWRlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgYnV5IHByaWNlIG9mIDEgaW5kaXZpZHVhbCB0b2tlbi4KICAgICAqLwogICAgZnVuY3Rpb24gc2VsbFByaWNlKCkgCiAgICAgICAgcHVibGljIAogICAgICAgIHZpZXcgCiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIC8vIG91ciBjYWxjdWxhdGlvbiByZWxpZXMgb24gdGhlIHRva2VuIHN1cHBseSwgc28gd2UgbmVlZCBzdXBwbHkuIERvaC4KICAgICAgICBpZih0b2tlblN1cHBseV8gPT0gMCl7CiAgICAgICAgICAgIHJldHVybiB0b2tlblByaWNlSW5pdGlhbF8gLSB0b2tlblByaWNlSW5jcmVtZW50YWxfOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVpbnQyNTYgX2V0aGVyZXVtID0gdG9rZW5zVG9FdGhlcmV1bV8oMWUxOCk7CiAgICAgICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IFNhZmVNYXRoLmRpdihfZXRoZXJldW0sIGRpdmlkZW5kRmVlXyAgKTsKICAgICAgICAgICAgdWludDI1NiBfdGF4ZWRFdGhlcmV1bSA9IFNhZmVNYXRoLnN1YihfZXRoZXJldW0sIF9kaXZpZGVuZHMpOwogICAgICAgICAgICByZXR1cm4gX3RheGVkRXRoZXJldW07CiAgICAgICAgfQogICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgc2VsbCBwcmljZSBvZiAxIGluZGl2aWR1YWwgdG9rZW4uCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1eVByaWNlKCkgCiAgICAgICAgcHVibGljIAogICAgICAgIHZpZXcgCiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIC8vIG91ciBjYWxjdWxhdGlvbiByZWxpZXMgb24gdGhlIHRva2VuIHN1cHBseSwgc28gd2UgbmVlZCBzdXBwbHkuIERvaC4KICAgICAgICBpZih0b2tlblN1cHBseV8gPT0gMCl7CiAgICAgICAgICAgIHJldHVybiB0b2tlblByaWNlSW5pdGlhbF8gKyB0b2tlblByaWNlSW5jcmVtZW50YWxfOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVpbnQyNTYgX2V0aGVyZXVtID0gdG9rZW5zVG9FdGhlcmV1bV8oMWUxOCk7CiAgICAgICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IFNhZmVNYXRoLmRpdihfZXRoZXJldW0sIGRpdmlkZW5kRmVlXyAgKTsKICAgICAgICAgICAgdWludDI1NiBfdGF4ZWRFdGhlcmV1bSA9IFNhZmVNYXRoLmFkZChfZXRoZXJldW0sIF9kaXZpZGVuZHMpOwogICAgICAgICAgICByZXR1cm4gX3RheGVkRXRoZXJldW07CiAgICAgICAgfQogICAgfQogICAgCiAgICAvKioKICAgICAqIEZ1bmN0aW9uIGZvciB0aGUgZnJvbnRlbmQgdG8gZHluYW1pY2FsbHkgcmV0cmlldmUgdGhlIHByaWNlIHNjYWxpbmcgb2YgYnV5IG9yZGVycy4KICAgICAqLwogICAgZnVuY3Rpb24gY2FsY3VsYXRlVG9rZW5zUmVjZWl2ZWQodWludDI1NiBfZXRoZXJldW1Ub1NwZW5kKSAKICAgICAgICBwdWJsaWMgCiAgICAgICAgdmlldyAKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gU2FmZU1hdGguZGl2KF9ldGhlcmV1bVRvU3BlbmQsIGRpdmlkZW5kRmVlXyk7CiAgICAgICAgdWludDI1NiBfdGF4ZWRFdGhlcmV1bSA9IFNhZmVNYXRoLnN1YihfZXRoZXJldW1Ub1NwZW5kLCBfZGl2aWRlbmRzKTsKICAgICAgICB1aW50MjU2IF9hbW91bnRPZlRva2VucyA9IGV0aGVyZXVtVG9Ub2tlbnNfKF90YXhlZEV0aGVyZXVtKTsKICAgICAgICAKICAgICAgICByZXR1cm4gX2Ftb3VudE9mVG9rZW5zOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEZ1bmN0aW9uIGZvciB0aGUgZnJvbnRlbmQgdG8gZHluYW1pY2FsbHkgcmV0cmlldmUgdGhlIHByaWNlIHNjYWxpbmcgb2Ygc2VsbCBvcmRlcnMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUV0aGVyZXVtUmVjZWl2ZWQodWludDI1NiBfdG9rZW5zVG9TZWxsKSAKICAgICAgICBwdWJsaWMgCiAgICAgICAgdmlldyAKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcmVxdWlyZShfdG9rZW5zVG9TZWxsIDw9IHRva2VuU3VwcGx5Xyk7CiAgICAgICAgdWludDI1NiBfZXRoZXJldW0gPSB0b2tlbnNUb0V0aGVyZXVtXyhfdG9rZW5zVG9TZWxsKTsKICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBTYWZlTWF0aC5kaXYoX2V0aGVyZXVtLCBkaXZpZGVuZEZlZV8pOwogICAgICAgIHVpbnQyNTYgX3RheGVkRXRoZXJldW0gPSBTYWZlTWF0aC5zdWIoX2V0aGVyZXVtLCBfZGl2aWRlbmRzKTsKICAgICAgICByZXR1cm4gX3RheGVkRXRoZXJldW07CiAgICB9CiAgICAKICAgIAogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgID0gICAgICAgICAgICBJTlRFUk5BTCBGVU5DVElPTlMgICAgICAgICAgICA9CiAgICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogICAgZnVuY3Rpb24gcHVyY2hhc2VUb2tlbnModWludDI1NiBfaW5jb21pbmdFdGhlcmV1bSwgYWRkcmVzcyBfcmVmZXJyZWRCeSkKICAgICAgICBhbnRpRWFybHlXaGFsZShfaW5jb21pbmdFdGhlcmV1bSkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICAvLyBkYXRhIHNldHVwCiAgICAgICAgYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICB1aW50MjU2IF91bmRpdmlkZWREaXZpZGVuZHMgPSBTYWZlTWF0aC5kaXYoX2luY29taW5nRXRoZXJldW0sIGRpdmlkZW5kRmVlXyk7CiAgICAgICAgdWludDI1NiBfcmVmZXJyYWxCb251cyA9IFNhZmVNYXRoLmRpdihfdW5kaXZpZGVkRGl2aWRlbmRzLCAzKTsKICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBTYWZlTWF0aC5zdWIoX3VuZGl2aWRlZERpdmlkZW5kcywgX3JlZmVycmFsQm9udXMpOwogICAgICAgIHVpbnQyNTYgX3RheGVkRXRoZXJldW0gPSBTYWZlTWF0aC5zdWIoX2luY29taW5nRXRoZXJldW0sIF91bmRpdmlkZWREaXZpZGVuZHMpOwogICAgICAgIHVpbnQyNTYgX2Ftb3VudE9mVG9rZW5zID0gZXRoZXJldW1Ub1Rva2Vuc18oX3RheGVkRXRoZXJldW0pOwogICAgICAgIHVpbnQyNTYgX2ZlZSA9IF9kaXZpZGVuZHMgKiBtYWduaXR1ZGU7CiAKICAgICAgICAvLyBubyBwb2ludCBpbiBjb250aW51aW5nIGV4ZWN1dGlvbiBpZiBPUCBpcyBhIHBvb3JmYWcgcnVzc2lhbiBoYWNrZXIKICAgICAgICAvLyBwcmV2ZW50cyBvdmVyZmxvdyBpbiB0aGUgY2FzZSB0aGF0IHRoZSBweXJhbWlkIHNvbWVob3cgbWFnaWNhbGx5IHN0YXJ0cyBiZWluZyB1c2VkIGJ5IGV2ZXJ5b25lIGluIHRoZSB3b3JsZAogICAgICAgIC8vIChvciBoYWNrZXJzKQogICAgICAgIC8vIGFuZCB5ZXMgd2Uga25vdyB0aGF0IHRoZSBzYWZlbWF0aCBmdW5jdGlvbiBhdXRvbWF0aWNhbGx5IHJ1bGVzIG91dCB0aGUgImdyZWF0ZXIgdGhlbiIgZXF1YXNpb24uCiAgICAgICAgcmVxdWlyZShfYW1vdW50T2ZUb2tlbnMgPiAwICYmIChTYWZlTWF0aC5hZGQoX2Ftb3VudE9mVG9rZW5zLHRva2VuU3VwcGx5XykgPiB0b2tlblN1cHBseV8pKTsKICAgICAgICAKICAgICAgICAvLyBpcyB0aGUgdXNlciByZWZlcnJlZCBieSBhIG1hc3Rlcm5vZGU/CiAgICAgICAgaWYoCiAgICAgICAgICAgIC8vIGlzIHRoaXMgYSByZWZlcnJlZCBwdXJjaGFzZT8KICAgICAgICAgICAgX3JlZmVycmVkQnkgIT0gMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwICYmCgogICAgICAgICAgICAvLyBubyBjaGVhdGluZyEKICAgICAgICAgICAgX3JlZmVycmVkQnkgIT0gX2N1c3RvbWVyQWRkcmVzcyAmJgogICAgICAgICAgICAKICAgICAgICAgICAgLy8gZG9lcyB0aGUgcmVmZXJyZXIgaGF2ZSBhdCBsZWFzdCBYIHdob2xlIHRva2Vucz8KICAgICAgICAgICAgLy8gaS5lIGlzIHRoZSByZWZlcnJlciBhIGdvZGx5IGNoYWQgbWFzdGVybm9kZQogICAgICAgICAgICB0b2tlbkJhbGFuY2VMZWRnZXJfW19yZWZlcnJlZEJ5XSA+PSBzdGFraW5nUmVxdWlyZW1lbnQKICAgICAgICApewogICAgICAgICAgICAvLyB3ZWFsdGggcmVkaXN0cmlidXRpb24KICAgICAgICAgICAgcmVmZXJyYWxCYWxhbmNlX1tfcmVmZXJyZWRCeV0gPSBTYWZlTWF0aC5hZGQocmVmZXJyYWxCYWxhbmNlX1tfcmVmZXJyZWRCeV0sIF9yZWZlcnJhbEJvbnVzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBubyByZWYgcHVyY2hhc2UKICAgICAgICAgICAgLy8gYWRkIHRoZSByZWZlcnJhbCBib251cyBiYWNrIHRvIHRoZSBnbG9iYWwgZGl2aWRlbmRzIGNha2UKICAgICAgICAgICAgX2RpdmlkZW5kcyA9IFNhZmVNYXRoLmFkZChfZGl2aWRlbmRzLCBfcmVmZXJyYWxCb251cyk7CiAgICAgICAgICAgIF9mZWUgPSBfZGl2aWRlbmRzICogbWFnbml0dWRlOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyB3ZSBjYW4ndCBnaXZlIHBlb3BsZSBpbmZpbml0ZSBldGhlcmV1bQogICAgICAgIGlmKHRva2VuU3VwcGx5XyA+IDApewogICAgICAgICAgICAKICAgICAgICAgICAgLy8gYWRkIHRva2VucyB0byB0aGUgcG9vbAogICAgICAgICAgICB0b2tlblN1cHBseV8gPSBTYWZlTWF0aC5hZGQodG9rZW5TdXBwbHlfLCBfYW1vdW50T2ZUb2tlbnMpOwogCiAgICAgICAgICAgIC8vIHRha2UgdGhlIGFtb3VudCBvZiBkaXZpZGVuZHMgZ2FpbmVkIHRocm91Z2ggdGhpcyB0cmFuc2FjdGlvbiwgYW5kIGFsbG9jYXRlcyB0aGVtIGV2ZW5seSB0byBlYWNoIHNoYXJlaG9sZGVyCiAgICAgICAgICAgIHByb2ZpdFBlclNoYXJlXyArPSAoX2RpdmlkZW5kcyAqIG1hZ25pdHVkZSAvICh0b2tlblN1cHBseV8pKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIHRva2VucyB0aGUgY3VzdG9tZXIgcmVjZWl2ZXMgb3ZlciBoaXMgcHVyY2hhc2UgCiAgICAgICAgICAgIF9mZWUgPSBfZmVlIC0gKF9mZWUtKF9hbW91bnRPZlRva2VucyAqIChfZGl2aWRlbmRzICogbWFnbml0dWRlIC8gKHRva2VuU3VwcGx5XykpKSk7CiAgICAgICAgCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gYWRkIHRva2VucyB0byB0aGUgcG9vbAogICAgICAgICAgICB0b2tlblN1cHBseV8gPSBfYW1vdW50T2ZUb2tlbnM7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIHVwZGF0ZSBjaXJjdWxhdGluZyBzdXBwbHkgJiB0aGUgbGVkZ2VyIGFkZHJlc3MgZm9yIHRoZSBjdXN0b21lcgogICAgICAgIHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc10gPSBTYWZlTWF0aC5hZGQodG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSwgX2Ftb3VudE9mVG9rZW5zKTsKICAgICAgICAKICAgICAgICAvLyBUZWxscyB0aGUgY29udHJhY3QgdGhhdCB0aGUgYnV5ZXIgZG9lc24ndCBkZXNlcnZlIGRpdmlkZW5kcyBmb3IgdGhlIHRva2VucyBiZWZvcmUgdGhleSBvd25lZCB0aGVtOwogICAgICAgIC8vcmVhbGx5IGkga25vdyB5b3UgdGhpbmsgeW91IGRvIGJ1dCB5b3UgZG9uJ3QKICAgICAgICBpbnQyNTYgX3VwZGF0ZWRQYXlvdXRzID0gKGludDI1NikgKChwcm9maXRQZXJTaGFyZV8gKiBfYW1vdW50T2ZUb2tlbnMpIC0gX2ZlZSk7CiAgICAgICAgcGF5b3V0c1RvX1tfY3VzdG9tZXJBZGRyZXNzXSArPSBfdXBkYXRlZFBheW91dHM7CiAgICAgICAgCiAgICAgICAgLy8gZmlyZSBldmVudAogICAgICAgIG9uVG9rZW5QdXJjaGFzZShfY3VzdG9tZXJBZGRyZXNzLCBfaW5jb21pbmdFdGhlcmV1bSwgX2Ftb3VudE9mVG9rZW5zLCBfcmVmZXJyZWRCeSk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIF9hbW91bnRPZlRva2VuczsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGN1bGF0ZSBUb2tlbiBwcmljZSBiYXNlZCBvbiBhbiBhbW91bnQgb2YgaW5jb21pbmcgZXRoZXJldW0KICAgICAqIEl0J3MgYW4gYWxnb3JpdGhtLCBob3BlZnVsbHkgd2UgZ2F2ZSB5b3UgdGhlIHdoaXRlcGFwZXIgd2l0aCBpdCBpbiBzY2llbnRpZmljIG5vdGF0aW9uOwogICAgICogU29tZSBjb252ZXJzaW9ucyBvY2N1cnJlZCB0byBwcmV2ZW50IGRlY2ltYWwgZXJyb3JzIG9yIHVuZGVyZmxvd3MgLyBvdmVyZmxvd3MgaW4gc29saWRpdHkgY29kZS4KICAgICAqLwogICAgZnVuY3Rpb24gZXRoZXJldW1Ub1Rva2Vuc18odWludDI1NiBfZXRoZXJldW0pCiAgICAgICAgaW50ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHVpbnQyNTYgX3Rva2VuUHJpY2VJbml0aWFsID0gdG9rZW5QcmljZUluaXRpYWxfICogMWUxODsKICAgICAgICB1aW50MjU2IF90b2tlbnNSZWNlaXZlZCA9IAogICAgICAgICAoCiAgICAgICAgICAgICgKICAgICAgICAgICAgICAgIC8vIHVuZGVyZmxvdyBhdHRlbXB0cyBCVEZPCiAgICAgICAgICAgICAgICBTYWZlTWF0aC5zdWIoCiAgICAgICAgICAgICAgICAgICAgKHNxcnQKICAgICAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKF90b2tlblByaWNlSW5pdGlhbCoqMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgyKih0b2tlblByaWNlSW5jcmVtZW50YWxfICogMWUxOCkqKF9ldGhlcmV1bSAqIDFlMTgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCgodG9rZW5QcmljZUluY3JlbWVudGFsXykqKjIpKih0b2tlblN1cHBseV8qKjIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKDIqKHRva2VuUHJpY2VJbmNyZW1lbnRhbF8pKl90b2tlblByaWNlSW5pdGlhbCp0b2tlblN1cHBseV8pCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApLCBfdG9rZW5QcmljZUluaXRpYWwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKS8odG9rZW5QcmljZUluY3JlbWVudGFsXykKICAgICAgICApLSh0b2tlblN1cHBseV8pCiAgICAgICAgOwogIAogICAgICAgIHJldHVybiBfdG9rZW5zUmVjZWl2ZWQ7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQ2FsY3VsYXRlIHRva2VuIHNlbGwgdmFsdWUuCiAgICAgKiBJdCdzIGFuIGFsZ29yaXRobSwgaG9wZWZ1bGx5IHdlIGdhdmUgeW91IHRoZSB3aGl0ZXBhcGVyIHdpdGggaXQgaW4gc2NpZW50aWZpYyBub3RhdGlvbjsKICAgICAqIFNvbWUgY29udmVyc2lvbnMgb2NjdXJyZWQgdG8gcHJldmVudCBkZWNpbWFsIGVycm9ycyBvciB1bmRlcmZsb3dzIC8gb3ZlcmZsb3dzIGluIHNvbGlkaXR5IGNvZGUuCiAgICAgKi8KICAgICBmdW5jdGlvbiB0b2tlbnNUb0V0aGVyZXVtXyh1aW50MjU2IF90b2tlbnMpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewoKICAgICAgICB1aW50MjU2IHRva2Vuc18gPSAoX3Rva2VucyArIDFlMTgpOwogICAgICAgIHVpbnQyNTYgX3Rva2VuU3VwcGx5ID0gKHRva2VuU3VwcGx5XyArIDFlMTgpOwogICAgICAgIHVpbnQyNTYgX2V0aGVyUmVjZWl2ZWQgPQogICAgICAgICgKICAgICAgICAgICAgLy8gdW5kZXJmbG93IGF0dGVtcHRzIEJURk8KICAgICAgICAgICAgU2FmZU1hdGguc3ViKAogICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5QcmljZUluaXRpYWxfICsodG9rZW5QcmljZUluY3JlbWVudGFsXyAqIChfdG9rZW5TdXBwbHkvMWUxOCkpCiAgICAgICAgICAgICAgICAgICAgICAgICktdG9rZW5QcmljZUluY3JlbWVudGFsXwogICAgICAgICAgICAgICAgICAgICkqKHRva2Vuc18gLSAxZTE4KQogICAgICAgICAgICAgICAgKSwodG9rZW5QcmljZUluY3JlbWVudGFsXyooKHRva2Vuc18qKjItdG9rZW5zXykvMWUxOCkpLzIKICAgICAgICAgICAgKQogICAgICAgIC8xZTE4KTsKICAgICAgICByZXR1cm4gX2V0aGVyUmVjZWl2ZWQ7CiAgICB9CiAgICAKICAgIAogICAgLy9UaGlzIGlzIHdoZXJlIGFsbCB5b3VyIGdhcyBnb2VzLCBzb3JyeQogICAgLy9Ob3Qgc29ycnksIHlvdSBwcm9iYWJseSBvbmx5IHBhaWQgMSBnd2VpCiAgICBmdW5jdGlvbiBzcXJ0KHVpbnQgeCkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IHkpIHsKICAgICAgICB1aW50IHogPSAoeCArIDEpIC8gMjsKICAgICAgICB5ID0geDsKICAgICAgICB3aGlsZSAoeiA8IHkpIHsKICAgICAgICAgICAgeSA9IHo7CiAgICAgICAgICAgIHogPSAoeCAvIHogKyB6KSAvIDI7CiAgICAgICAgfQogICAgfQp9CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICAvKioKICAgICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAoYSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgICAqLwogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAgICovCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQ=='.
	

]
