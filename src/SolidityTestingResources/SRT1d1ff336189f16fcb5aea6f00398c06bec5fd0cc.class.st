Class {
	#name : #SRT1d1ff336189f16fcb5aea6f00398c06bec5fd0cc,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1d1ff336189f16fcb5aea6f00398c06bec5fd0cc >> base64 [
	^ 'LyoqCiAqIEVkZ2VsZXNzIENhc2lubyBQcm94eSBDb250cmFjdC4gU2VydmVzIGFzIGEgcHJveHkgZm9yIGdhbWUgZnVuY3Rpb25hbGl0eS4KICogQWxsb3dzIHRoZSBwbGF5ZXJzIHRvIGRlcG9zaXQgYW5kIHdpdGhkcmF3IGZ1bmRzLgogKiBBbGxvd3MgYXV0aG9yaXplZCBhZGRyZXNzZXMgdG8gbWFrZSBnYW1lIHRyYW5zYWN0aW9ucy4KICogYXV0aG9yOiBKdWxpYSBBbHRlbnJpZWQKICoqLwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgoKY29udHJhY3QgdG9rZW4gewoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3Mgc2VuZGVyLCBhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCkgcHVibGljIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7fQoJCglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCkgcHVibGljIHJldHVybnMoYm9vbCBzdWNjZXNzKSB7fQoJCglmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBob2xkZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpIHt9Cn0KCmNvbnRyYWN0IG93bmVkIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICBtb2RpZmllciBvbmx5T3duZXIgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBvd25lZCgpIHB1YmxpY3sKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWN7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KfQoKY29udHJhY3Qgc2FmZU1hdGggewoJLy9pbnRlcm5hbHMKCWZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnModWludCkgewoJCWFzc2VydChiIDw9IGEpOwoJCXJldHVybiBhIC0gYjsKCX0KCglmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zKHVpbnQpIHsKCQl1aW50IGMgPSBhICsgYjsKCQlhc3NlcnQoYyA+PSBhICYmIGMgPj0gYik7CgkJcmV0dXJuIGM7Cgl9CgkKCWZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgY2FzaW5vQmFuayBpcyBvd25lZCwgc2FmZU1hdGh7CgkvKiogdGhlIHRvdGFsIGJhbGFuY2Ugb2YgYWxsIHBsYXllcnMgd2l0aCA0IHZpcnR1YWwgZGVjaW1hbHMgKiovCgl1aW50IHB1YmxpYyBwbGF5ZXJCYWxhbmNlOwoJLyoqIHRoZSBiYWxhbmNlIHBlciBwbGF5ZXIgaW4gZWRnZWxlc3MgdG9rZW5zIHdpdGggNCB2aXJ0dWFsIGRlY2ltYWxzICovCiAgbWFwcGluZyhhZGRyZXNzPT51aW50KSBwdWJsaWMgYmFsYW5jZU9mOwoJLyoqIGluIGNhc2UgdGhlIHVzZXIgd2FudHMvbmVlZHMgdG8gY2FsbCB0aGUgd2l0aGRyYXcgZnVuY3Rpb24gZnJvbSBoaXMgb3duIHdhbGxldCwgaGUgZmlyc3QgbmVlZHMgdG8gcmVxdWVzdCBhIHdpdGhkcmF3YWwgKi8KCW1hcHBpbmcoYWRkcmVzcz0+dWludCkgcHVibGljIHdpdGhkcmF3QWZ0ZXI7CgkvKiogdGhlIHByaWNlIHBlciBrZ2FzIGluIHRva2VucyAoNCBkZWNpbWFscykgKi8KCXVpbnQgcHVibGljIGdhc1ByaWNlID0gMjA7CgkvKiogdGhlIGVkZ2VsZXNzIHRva2VuIGNvbnRyYWN0ICovCgl0b2tlbiBlZGc7CgkvKiogb3duZXIgc2hvdWxkIGJlIGFibGUgdG8gY2xvc2UgdGhlIGNvbnRyYWN0IGlzIG5vYm9keSBoYXMgYmVlbiB1c2luZyBpdCBmb3IgYXQgbGVhc3QgMzAgZGF5cyAqLwoJdWludCBwdWJsaWMgY2xvc2VBdDsKCS8qKiBpbmZvcm1zIGxpc3RlbmVycyBob3cgbWFueSB0b2tlbnMgd2VyZSBkZXBvc2l0ZWQgZm9yIGEgcGxheWVyICovCglldmVudCBEZXBvc2l0KGFkZHJlc3MgX3BsYXllciwgdWludCBfbnVtVG9rZW5zLCBib29sIF9jaGFyZ2VHYXMpOwoJLyoqIGluZm9ybXMgbGlzdGVuZXJzIGhvdyBtYW55IHRva2VucyB3ZXJlIHdpdGhkcmF3biBmcm9tIHRoZSBwbGF5ZXIgdG8gdGhlIHJlY2VpdmVyIGFkZHJlc3MgKi8KCWV2ZW50IFdpdGhkcmF3YWwoYWRkcmVzcyBfcGxheWVyLCBhZGRyZXNzIF9yZWNlaXZlciwgdWludCBfbnVtVG9rZW5zKTsKCQoJZnVuY3Rpb24gY2FzaW5vQmFuayhhZGRyZXNzIHRva2VuQ29udHJhY3QpIHB1YmxpY3sKCQllZGcgPSB0b2tlbih0b2tlbkNvbnRyYWN0KTsKCX0KCQoJLyoqCgkqIGFjY2VwdHMgZGVwb3NpdHMgZm9yIGFuIGFyYml0cmFyeSBhZGRyZXNzLgoJKiByZXRyaWV2ZXMgdG9rZW5zIGZyb20gdGhlIG1lc3NhZ2Ugc2VuZGVyIGFuZCBhZGRzIHRoZW0gdG8gdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgoJKiBlZGdlbGVzcyB0b2tlbnMgZG8gbm90IGhhdmUgYW55IGRlY2ltYWxzLCBidXQgYXJlIHJlcHJlc2VudGVkIG9uIHRoaXMgY29udHJhY3Qgd2l0aCA0IGRlY2ltYWxzLgoJKiBAcGFyYW0gcmVjZWl2ZXIgIGFkZHJlc3Mgb2YgdGhlIHJlY2VpdmVyCgkqICAgICAgICBudW1Ub2tlbnMgbnVtYmVyIG9mIHRva2VucyB0byBkZXBvc2l0ICgwIGRlY2ltYWxzKQoJKgkJCQkgY2hhcmdlR2FzIGluZGljYXRlcyBpZiB0aGUgZ2FzIGNvc3QgaXMgc3VidHJhY3RlZCBmcm9tIHRoZSB1c2VyJ3MgZWRnZWxlc3MgdG9rZW4gYmFsYW5jZQoJKiovCglmdW5jdGlvbiBkZXBvc2l0KGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgbnVtVG9rZW5zLCBib29sIGNoYXJnZUdhcykgcHVibGljIGlzQWxpdmV7CgkJcmVxdWlyZShudW1Ub2tlbnMgPiAwKTsKCQl1aW50IHZhbHVlID0gc2FmZU11bChudW1Ub2tlbnMsMTAwMDApOyAKCQlpZihjaGFyZ2VHYXMpIHZhbHVlID0gc2FmZVN1Yih2YWx1ZSwgbXNnLmdhcy8xMDAwICogZ2FzUHJpY2UpOwoJCWFzc2VydChlZGcudHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIGFkZHJlc3ModGhpcyksIG51bVRva2VucykpOwoJCWJhbGFuY2VPZltyZWNlaXZlcl0gPSBzYWZlQWRkKGJhbGFuY2VPZltyZWNlaXZlcl0sIHZhbHVlKTsKCQlwbGF5ZXJCYWxhbmNlID0gc2FmZUFkZChwbGF5ZXJCYWxhbmNlLCB2YWx1ZSk7CgkJRGVwb3NpdChyZWNlaXZlciwgbnVtVG9rZW5zLCBjaGFyZ2VHYXMpOwogIH0KCQoJLyoqCgkqIElmIHRoZSB1c2VyIHdhbnRzL25lZWRzIHRvIHdpdGhkcmF3IGhpcyBmdW5kcyBoaW1zZWxmLCBoZSBuZWVkcyB0byByZXF1ZXN0IHRoZSB3aXRoZHJhd2FsIGZpcnN0LgoJKiBUaGlzIG1ldGhvZCBzZXRzIHRoZSBlYXJsaWVzdCBwb3NzaWJsZSB3aXRoZHJhd2FsIGRhdGUgdG8gNyBtaW51dGVzIGZyb20gbm93LiAKCSogUmVhc29uOiBUaGUgdXNlciBzaG91bGQgbm90IGJlIGFibGUgdG8gd2l0aGRyYXcgaGlzIGZ1bmRzLCB3aGlsZSB0aGUgdGhlIGxhc3QgZ2FtZSBtZXRob2RzIGhhdmUgbm90IHlldCBiZWVuIG1pbmVkLgoJKiovCglmdW5jdGlvbiByZXF1ZXN0V2l0aGRyYXdhbCgpIHB1YmxpY3sKCQl3aXRoZHJhd0FmdGVyW21zZy5zZW5kZXJdID0gbm93ICsgNyBtaW51dGVzOwoJfQoJCgkvKioKCSogSW4gY2FzZSB0aGUgdXNlciByZXF1ZXN0ZWQgYSB3aXRoZHJhd2FsIGFuZCBjaGFuZ2VzIGhpcyBtaW5kLgoJKiBOZWNlc3NhcnkgdG8gYmUgYWJsZSB0byBjb250aW51ZSBwbGF5aW5nLgoJKiovCglmdW5jdGlvbiBjYW5jZWxXaXRoZHJhd2FsUmVxdWVzdCgpIHB1YmxpY3sKCQl3aXRoZHJhd0FmdGVyW21zZy5zZW5kZXJdID0gMDsKCX0KCQoJLyoqCgkqIHdpdGhkcmF3cyBhbiBhbW91bnQgZnJvbSB0aGUgdXNlciBiYWxhbmNlIGlmIDcgbWludXRlcyBwYXNzZWQgc2luY2UgdGhlIHJlcXVlc3QuCgkqIEBwYXJhbSBhbW91bnQgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gd2l0aGRyYXcKCSoqLwoJZnVuY3Rpb24gd2l0aGRyYXcodWludCBhbW91bnQpIHB1YmxpYyBrZWVwQWxpdmV7CgkJcmVxdWlyZSh3aXRoZHJhd0FmdGVyW21zZy5zZW5kZXJdPjAgJiYgbm93PndpdGhkcmF3QWZ0ZXJbbXNnLnNlbmRlcl0pOwoJCXdpdGhkcmF3QWZ0ZXJbbXNnLnNlbmRlcl0gPSAwOwoJCXVpbnQgdmFsdWUgPSBzYWZlTXVsKGFtb3VudCwxMDAwMCk7CgkJYmFsYW5jZU9mW21zZy5zZW5kZXJdPXNhZmVTdWIoYmFsYW5jZU9mW21zZy5zZW5kZXJdLHZhbHVlKTsKCQlwbGF5ZXJCYWxhbmNlID0gc2FmZVN1YihwbGF5ZXJCYWxhbmNlLCB2YWx1ZSk7CgkJYXNzZXJ0KGVkZy50cmFuc2Zlcihtc2cuc2VuZGVyLCBhbW91bnQpKTsKCQlXaXRoZHJhd2FsKG1zZy5zZW5kZXIsIG1zZy5zZW5kZXIsIGFtb3VudCk7Cgl9CgkKCS8qKgoJKiBsZXRzIHRoZSBvd25lciB3aXRoZHJhdyBmcm9tIHRoZSBiYW5rcm9sbAoJKiBAcGFyYW0gbnVtVG9rZW5zIHRoZSBudW1iZXIgb2YgdG9rZW5zIHRvIHdpdGhkcmF3ICgwIGRlY2ltYWxzKQoJKiovCglmdW5jdGlvbiB3aXRoZHJhd0Jhbmtyb2xsKHVpbnQgbnVtVG9rZW5zKSBwdWJsaWMgb25seU93bmVyIHsKCQlyZXF1aXJlKG51bVRva2VucyA8PSBiYW5rcm9sbCgpKTsKCQlhc3NlcnQoZWRnLnRyYW5zZmVyKG93bmVyLCBudW1Ub2tlbnMpKTsKCX0KCQoJLyoqCgkqIHJldHVybnMgdGhlIGN1cnJlbnQgYmFua3JvbGwgaW4gdG9rZW5zIHdpdGggMCBkZWNpbWFscwoJKiovCglmdW5jdGlvbiBiYW5rcm9sbCgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQpewoJCXJldHVybiBzYWZlU3ViKGVkZy5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSksIHBsYXllckJhbGFuY2UvMTAwMDApOwoJfQoJCgkvKiogCgkqIGxldHMgdGhlIG93bmVyIGNsb3NlIHRoZSBjb250cmFjdCBpZiB0aGVyZSBhcmUgbm8gcGxheWVyIGZ1bmRzIG9uIGl0IG9yIGlmIG5vYm9keSBoYXMgYmVlbiB1c2luZyBpdCBmb3IgYXQgbGVhc3QgMzAgZGF5cyAKCSovCiAgZnVuY3Rpb24gY2xvc2UoKSBvbmx5T3duZXIgcHVibGljewoJCWlmKHBsYXllckJhbGFuY2UgPT0gMCkgc2VsZmRlc3RydWN0KG93bmVyKTsKCQlpZihjbG9zZUF0ID09IDApIGNsb3NlQXQgPSBub3cgKyAzMCBkYXlzOwoJCWVsc2UgaWYoY2xvc2VBdCA8IG5vdykgc2VsZmRlc3RydWN0KG93bmVyKTsKICB9CgkKCS8qKgoJKiBpbiBjYXNlIGNsb3NlIGhhcyBiZWVuIGNhbGxlZCBhY2NpZGVudGFsbHkuCgkqKi8KCWZ1bmN0aW9uIG9wZW4oKSBvbmx5T3duZXIgcHVibGljewoJCWNsb3NlQXQgPSAwOwoJfQoJCgkvKioKCSogbWFrZSBzdXJlIHRoZSBjb250cmFjdCBpcyBub3QgaW4gcHJvY2VzcyBvZiBiZWluZyBjbG9zZWQuCgkqKi8KCW1vZGlmaWVyIGlzQWxpdmUgewoJCXJlcXVpcmUoY2xvc2VBdCA9PSAwKTsKCQlfOwoJfQoJCgkvKioKCSogZGVsYXlzIHRoZSB0aW1lIG9mIGNsb3NpbmcuCgkqKi8KCW1vZGlmaWVyIGtlZXBBbGl2ZSB7CgkJaWYoY2xvc2VBdCA+IDApIGNsb3NlQXQgPSBub3cgKyAzMCBkYXlzOwoJCV87Cgl9Cn0KCmNvbnRyYWN0IGNhc2lub1Byb3h5IGlzIGNhc2lub0Jhbmt7CgkvKiogaW5kaWNhdGVzIGlmIGFuIGFkZHJlc3MgaXMgYXV0aG9yaXplZCB0byBjYWxsIGdhbWUgZnVuY3Rpb25zICAqLwogIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgYXV0aG9yaXplZDsKICAvKiogaW5kaWNhdGVzIGlmIHRoZSB1c2VyIGFsbG93ZWQgYSBjYXNpbm8gZ2FtZSBhZGRyZXNzIHRvIG1vdmUgaGlzL2hlciBmdW5kcyAqKi8KICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpKSBwdWJsaWMgYXV0aG9yaXplZEJ5VXNlcjsKICAvKiogY291bnRzIGhvdyBvZnRlbiBhbiBhZGRyZXNzIGhhcyBiZWVuIGRlYXV0aG9yaXplZCBieSB0aGUgdXNlciA9PiBtYWtlIHN1cmUgc2lnbmF0enVyZXMgY2FuJ3QgYmUgcmV1c2VkKiovCiAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50OCkpIHB1YmxpYyBsb2NrZWRCeVVzZXI7CgkvKiogbGlzdCBvZiBjYXNpbm8gZ2FtZSBjb250cmFjdCBhZGRyZXNzZXMgKi8KICBhZGRyZXNzW10gcHVibGljIGNhc2lub0dhbWVzOwoJLyoqIGEgbnVtYmVyIHRvIGNvdW50IHdpdGhkcmF3YWwgc2lnbmF0dXJlcyB0byBlbnN1cmUgZWFjaCBzaWduYXR1cmUgaXMgZGlmZmVyZW50IGV2ZW4gaWYgd2l0aGRyYXdpbmcgdGhlIHNhbWUgYW1vdW50IHRvIHRoZSBzYW1lIGFkZHJlc3MgKi8KCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgY291bnQ7CgoJbW9kaWZpZXIgb25seUF1dGhvcml6ZWQgewogICAgcmVxdWlyZShhdXRob3JpemVkW21zZy5zZW5kZXJdKTsKICAgIF87CiAgfQoJCgltb2RpZmllciBvbmx5Q2FzaW5vR2FtZXMgewoJCWJvb2wgaXNDYXNpbm87CgkJZm9yICh1aW50IGkgPSAwOyBpIDwgY2FzaW5vR2FtZXMubGVuZ3RoOyBpKyspewoJCQlpZihtc2cuc2VuZGVyID09IGNhc2lub0dhbWVzW2ldKXsKCQkJCWlzQ2FzaW5vID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQl9CgkJfQoJCXJlcXVpcmUoaXNDYXNpbm8pOwoJCV87Cgl9CiAgCiAgLyoqCiAgKiBjcmVhdGVzIGEgbmV3IGNhc2lubyB3YWxsZXQuCiAgKiBAcGFyYW0gYXV0aG9yaXplZEFkZHJlc3MgdGhlIGFkZHJlc3Mgd2hpY2ggbWF5IHNlbmQgdHJhbnNhY3Rpb25zIHRvIHRoZSBFZGdlbGVzcyBDYXNpbm8KICAqICAgICAgICBibGFja2phY2tBZGRyZXNzICB0aGUgYWRkcmVzcyBvZiB0aGUgRWRnZWxlc3MgYmxhY2tqYWNrIGNvbnRyYWN0CgkqCQkJCSB0b2tlbkNvbnRyYWN0ICAgICB0aGUgYWRkcmVzcyBvZiB0aGUgRWRnZWxlc3MgdG9rZW4gY29udHJhY3QKICAqKi8KICBmdW5jdGlvbiBjYXNpbm9Qcm94eShhZGRyZXNzIGF1dGhvcml6ZWRBZGRyZXNzLCBhZGRyZXNzIGJsYWNramFja0FkZHJlc3MsIGFkZHJlc3MgdG9rZW5Db250cmFjdCkgY2FzaW5vQmFuayh0b2tlbkNvbnRyYWN0KSBwdWJsaWN7CiAgICBhdXRob3JpemVkW2F1dGhvcml6ZWRBZGRyZXNzXSA9IHRydWU7CiAgICBjYXNpbm9HYW1lcy5wdXNoKGJsYWNramFja0FkZHJlc3MpOwogIH0KCgkvKioKCSogc2hpZnRzIHRva2VucyBmcm9tIHRoZSBjb250cmFjdCBiYWxhbmNlIHRvIHRoZSBwbGF5ZXIgb3IgdGhlIG90aGVyIHdheSByb3VuZC4KCSogb25seSBjYWxsYWJsZSBmcm9tIGFuIGVkZ2VsZXNzIGNhc2lubyBjb250cmFjdC4gc2VuZGVyIG11c3QgaGF2ZSBiZWVuIGFwcHJvdmVkIGJ5IHRoZSB1c2VyLgoJKiBAcGFyYW0gcGxheWVyIHRoZSBhZGRyZXNzIG9mIHRoZSBwbGF5ZXIKCSogICAgICAgIG51bVRva2VucyB0aGUgYW1vdW50IG9mIHRva2VucyB0byBzaGlmdCB3aXRoIDQgZGVjaW1hbHMKCSoJCQkJIGlzUmVjZWl2ZXIgdGVsbHMgaWYgdGhlIHBsYXllciBpcyByZWNlaXZpbmcgdG9rZW4gb3IgdGhlIG90aGVyIHdheSByb3VuZAoJKiovCglmdW5jdGlvbiBzaGlmdChhZGRyZXNzIHBsYXllciwgdWludCBudW1Ub2tlbnMsIGJvb2wgaXNSZWNlaXZlcikgcHVibGljIG9ubHlDYXNpbm9HYW1lc3sKCQlyZXF1aXJlKGF1dGhvcml6ZWRCeVVzZXJbcGxheWVyXVttc2cuc2VuZGVyXSk7CgkJdmFyIGdhc0Nvc3QgPSBtc2cuZ2FzLzEwMDAgKiBnYXNQcmljZTsvL2F0IHRoaXMgcG9pbnQgYSBnb29kIGRlYWwgb2YgdGhlIGdhcyBoYXMgYWxyZWFkeSBiZWVuIGNvbnN1bWVuZCwgbWF5YmUgYmV0dGVyIHRvIGhhdmUgZml4IHByaWNlCgkJaWYoaXNSZWNlaXZlcil7CgkJCW51bVRva2VucyA9IHNhZmVTdWIobnVtVG9rZW5zLCBnYXNDb3N0KTsKCQkJYmFsYW5jZU9mW3BsYXllcl0gPSBzYWZlQWRkKGJhbGFuY2VPZltwbGF5ZXJdLCBudW1Ub2tlbnMpOwoJCQlwbGF5ZXJCYWxhbmNlID0gc2FmZUFkZChwbGF5ZXJCYWxhbmNlLCBudW1Ub2tlbnMpOwoJCX0KCQllbHNlewoJCQludW1Ub2tlbnMgPSBzYWZlQWRkKG51bVRva2VucywgZ2FzQ29zdCk7CgkJCWJhbGFuY2VPZltwbGF5ZXJdID0gc2FmZVN1YihiYWxhbmNlT2ZbcGxheWVyXSwgbnVtVG9rZW5zKTsKCQkJcGxheWVyQmFsYW5jZSA9IHNhZmVTdWIocGxheWVyQmFsYW5jZSwgbnVtVG9rZW5zKTsKCQl9Cgl9CiAgCiAgLyoqCiAgKiB0cmFuc2ZlcnMgYW4gYW1vdW50IGZyb20gdGhlIGNvbnRyYWN0IGJhbGFuY2UgdG8gdGhlIG93bmVyJ3Mgd2FsbGV0LgogICogQHBhcmFtIHJlY2VpdmVyIHRoZSByZWNlaXZlciBhZGRyZXNzCgkqCQkJCSBhbW91bnQgICB0aGUgYW1vdW50IG9mIHRva2VucyB0byB3aXRoZHJhdyAoMCBkZWNpbWFscykKCSoJCQkJIHYscixzIAkJdGhlIHNpZ25hdHVyZSBvZiB0aGUgcGxheWVyCiAgKiovCiAgZnVuY3Rpb24gd2l0aGRyYXdGb3IoYWRkcmVzcyByZWNlaXZlciwgdWludCBhbW91bnQsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKSBwdWJsaWMgb25seUF1dGhvcml6ZWQga2VlcEFsaXZlewoJCXVpbnQgZ2FzQ29zdCA9ICBtc2cuZ2FzLzEwMDAgKiBnYXNQcmljZTsKCQl2YXIgcGxheWVyID0gZWNyZWNvdmVyKGtlY2NhazI1NihyZWNlaXZlciwgYW1vdW50LCBjb3VudFtyZWNlaXZlcl0pLCB2LCByLCBzKTsKCQljb3VudFtyZWNlaXZlcl0rKzsKCQl1aW50IHZhbHVlID0gc2FmZUFkZChzYWZlTXVsKGFtb3VudCwxMDAwMCksIGdhc0Nvc3QpOwogICAgYmFsYW5jZU9mW3BsYXllcl0gPSBzYWZlU3ViKGJhbGFuY2VPZltwbGF5ZXJdLCB2YWx1ZSk7CgkJcGxheWVyQmFsYW5jZSA9IHNhZmVTdWIocGxheWVyQmFsYW5jZSwgdmFsdWUpOwogICAgYXNzZXJ0KGVkZy50cmFuc2ZlcihyZWNlaXZlciwgYW1vdW50KSk7CgkJV2l0aGRyYXdhbChwbGF5ZXIsIHJlY2VpdmVyLCBhbW91bnQpOwogIH0KICAKICAvKioKICAqIHVwZGF0ZSBhIGNhc2lubyBnYW1lIGFkZHJlc3MgaW4gY2FzZSBvZiBhIG5ldyBjb250cmFjdCBvciBhIG5ldyBjYXNpbm8gZ2FtZQogICogQHBhcmFtIGdhbWUgICAgICAgdGhlIGluZGV4IG9mIHRoZSBnYW1lIAogICogICAgICAgIG5ld0FkZHJlc3MgdGhlIG5ldyBhZGRyZXNzIG9mIHRoZSBnYW1lCiAgKiovCiAgZnVuY3Rpb24gc2V0R2FtZUFkZHJlc3ModWludDggZ2FtZSwgYWRkcmVzcyBuZXdBZGRyZXNzKSBwdWJsaWMgb25seU93bmVyewogICAgaWYoZ2FtZTxjYXNpbm9HYW1lcy5sZW5ndGgpIGNhc2lub0dhbWVzW2dhbWVdID0gbmV3QWRkcmVzczsKICAgIGVsc2UgY2FzaW5vR2FtZXMucHVzaChuZXdBZGRyZXNzKTsKICB9CiAgCiAgLyoqCiAgKiBhdXRob3JpemUgYSBhZGRyZXNzIHRvIGNhbGwgZ2FtZSBmdW5jdGlvbnMuCiAgKiBAcGFyYW0gYWRkciB0aGUgYWRkcmVzcyB0byBiZSBhdXRob3JpemVkCiAgKiovCiAgZnVuY3Rpb24gYXV0aG9yaXplKGFkZHJlc3MgYWRkcikgcHVibGljIG9ubHlPd25lcnsKICAgIGF1dGhvcml6ZWRbYWRkcl0gPSB0cnVlOwogIH0KICAKICAvKioKICAqIGRlYXV0aG9yaXplIGEgYWRkcmVzcyB0byBjYWxsIGdhbWUgZnVuY3Rpb25zLgogICogQHBhcmFtIGFkZHIgdGhlIGFkZHJlc3MgdG8gYmUgZGVhdXRob3JpemVkCiAgKiovCiAgZnVuY3Rpb24gZGVhdXRob3JpemUoYWRkcmVzcyBhZGRyKSBwdWJsaWMgb25seU93bmVyewogICAgYXV0aG9yaXplZFthZGRyXSA9IGZhbHNlOwogIH0KICAKICAvKioKICAgKiBhdXRob3JpemUgYSBjYXNpbm8gY29udHJhY3QgYWRkcmVzcyB0byBhY2Nlc3MgdGhlIGZ1bmRzCiAgICogQHBhcmFtIGNhc2lub0FkZHJlc3MgdGhlIGFkZHJlc3Mgb2YgdGhlIGNhc2lubyBjb250cmFjdAogICAqCQkJCXYsIHIsIHMgdGhlIHBsYXllcidzIHNpZ25hdHVyZSBvZiB0aGUgY2FzaW5vIGFkZHJlc3MsIHRoZSBudW1iZXIgb2YgdGltZXMgdGhlIGFkZHJlc3MgaGFzIGFscmVhZHkgYmVlbiBsb2NrZWQgCiAgICoJCQkJCQkJCWFuZCBhIGJvb2wgc3RhdGluZyBpZiB0aGUgc2lnbmF0dXJlIGlzIG1lYW50IGZvciBhdXRob3VyaXphdGlvbiAodHJ1ZSkgb3IgZGVhdXRob3JpemF0aW9uIChmYWxzZSkKICAgKiAqLwogIGZ1bmN0aW9uIGF1dGhvcml6ZUNhc2lubyhhZGRyZXNzIHBsYXllckFkZHJlc3MsIGFkZHJlc3MgY2FzaW5vQWRkcmVzcywgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpIHB1YmxpY3sKICAJYWRkcmVzcyBwbGF5ZXIgPSBlY3JlY292ZXIoa2VjY2FrMjU2KGNhc2lub0FkZHJlc3MsbG9ja2VkQnlVc2VyW3BsYXllckFkZHJlc3NdW2Nhc2lub0FkZHJlc3NdLHRydWUpLCB2LCByLCBzKTsKICAJcmVxdWlyZShwbGF5ZXIgPT0gcGxheWVyQWRkcmVzcyk7CiAgCWF1dGhvcml6ZWRCeVVzZXJbcGxheWVyXVtjYXNpbm9BZGRyZXNzXSA9IHRydWU7CiAgfQogCiAgLyoqCiAgICogZGVhdXRob3JpemUgYSBjYXNpbm8gY29udHJhY3QgYWRkcmVzcyB0byBhY2Nlc3MgdGhlIGZ1bmRzCiAgICogQHBhcmFtIGNhc2lub0FkZHJlc3MgdGhlIGFkZHJlc3Mgb2YgdGhlIGNhc2lubyBjb250cmFjdAogICAqICAgIAkJdiwgciwgcyB0aGUgcGxheWVyJ3Mgc2lnbmF0dXJlIG9mIHRoZSBjYXNpbm8gYWRkcmVzcywgdGhlIG51bWJlciBvZiB0aW1lcyB0aGUgYWRkcmVzcyBoYXMgYWxyZWFkeSBiZWVuIGxvY2tlZCAKICAgKgkJCQkJCQkJYW5kIGEgYm9vbCBzdGF0aW5nIGlmIHRoZSBzaWduYXR1cmUgaXMgbWVhbnQgZm9yIGF1dGhvdXJpemF0aW9uICh0cnVlKSBvciBkZWF1dGhvcml6YXRpb24gKGZhbHNlKQogICAqICovCiAgZnVuY3Rpb24gZGVhdXRob3JpemVDYXNpbm8oYWRkcmVzcyBwbGF5ZXJBZGRyZXNzLCBhZGRyZXNzIGNhc2lub0FkZHJlc3MsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKSBwdWJsaWN7CiAgCWFkZHJlc3MgcGxheWVyID0gZWNyZWNvdmVyKGtlY2NhazI1NihjYXNpbm9BZGRyZXNzLGxvY2tlZEJ5VXNlcltwbGF5ZXJBZGRyZXNzXVtjYXNpbm9BZGRyZXNzXSxmYWxzZSksIHYsIHIsIHMpOwogIAlyZXF1aXJlKHBsYXllciA9PSBwbGF5ZXJBZGRyZXNzKTsKICAJYXV0aG9yaXplZEJ5VXNlcltwbGF5ZXJdW2Nhc2lub0FkZHJlc3NdID0gZmFsc2U7CiAgCWxvY2tlZEJ5VXNlcltwbGF5ZXJdW2Nhc2lub0FkZHJlc3NdKys7Ly9tYWtlIGl0IGltcG9zc2libGUgdG8gcmV1c2Ugb2xkIHNpZ25hdHVyZSB0byBhdXRob3JpemUgdGhlIGFkZHJlc3MgYWdhaW4KICB9CgkKCS8qKgoJKiB1cGRhdGVzIHRoZSBwcmljZSBwZXIgMTAwMCBnYXMgaW4gRURHLgoJKiBAcGFyYW0gcHJpY2UgdGhlIG5ldyBnYXMgcHJpY2UgKDQgZGVjaW1hbHMsIG1heCAwLjAyNTYgRURHKQoJKiovCglmdW5jdGlvbiBzZXRHYXNQcmljZSh1aW50OCBwcmljZSkgcHVibGljIG9ubHlPd25lcnsKCQlnYXNQcmljZSA9IHByaWNlOwoJfQogIAogIC8qKgogICogRm9yd2FyZHMgYSBtb3ZlIHRvIHRoZSBjb3JyZXNwb25kaW5nIGdhbWUgY29udHJhY3QgaWYgdGhlIGRhdGEgaGFzIGJlZW4gc2lnbmVkIGJ5IHRoZSBjbGllbnQuCiAgKiBUaGUgY2FzaW5vIGNvbnRyYWN0IGVuc3VyZXMgaXQgaXMgbm8gZHVwbGljYXRlIG1vdmUuCiAgKiBAcGFyYW0gZ2FtZSAgc3BlY2lmaWVzIHdoaWNoIGdhbWUgY29udHJhY3QgdG8gY2FsbAogICogICAgICAgIGRhdGEgIHRoZSBmdW5jdGlvbiBjYWxsCiAgKiAgICAgICAgdixyLHMgdGhlIHBsYXllcidzIHNpZ25hdHVyZSBvZiB0aGUgZGF0YQogICoqLwogIGZ1bmN0aW9uIG1vdmUodWludDggZ2FtZSwgYnl0ZXMgZGF0YSwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpIHB1YmxpYyBvbmx5QXV0aG9yaXplZCBpc0FsaXZlewogICAgcmVxdWlyZShnYW1lIDwgY2FzaW5vR2FtZXMubGVuZ3RoKTsKICAgIHZhciBwbGF5ZXIgPSBlY3JlY292ZXIoa2VjY2FrMjU2KGRhdGEpLCB2LCByLCBzKTsKCQlyZXF1aXJlKHdpdGhkcmF3QWZ0ZXJbcGxheWVyXSA9PSAwIHx8IG5vdzx3aXRoZHJhd0FmdGVyW3BsYXllcl0pOwoJCWFzc2VydChjaGVja0FkZHJlc3MocGxheWVyLCBkYXRhKSk7CiAgICBhc3NlcnQoY2FzaW5vR2FtZXNbZ2FtZV0uY2FsbChkYXRhKSk7CiAgfQoKICAvKioKICAgKiBjaGVja3MgaWYgdGhlIGdpdmVuIGFkZHJlc3MgaXMgcGFzc2VkIGFzIGZpcnN0IHBhcmFtZXRlcnMgaW4gdGhlIGJ5dGVzIGZpZWxkCiAgICogQHBhcmFtIHBsYXllciB0aGUgcGxheWVyIGFkZHJlc3MKICAgKgkJCQlkYXRhIHRoZSBmdW5jdGlvbiBjYWxsCiAgICogKi8KICBmdW5jdGlvbiBjaGVja0FkZHJlc3MoYWRkcmVzcyBwbGF5ZXIsIGJ5dGVzIGRhdGEpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMoYm9vbCl7CiAgCWJ5dGVzIG1lbW9yeSBiYTsKICAJYXNzZW1ibHkgewogICAgICBsZXQgbSA6PSBtbG9hZCgweDQwKQogICAgICBtc3RvcmUoYWRkKG0sIDIwKSwgeG9yKDB4MTQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLCBwbGF5ZXIpKQogICAgICBtc3RvcmUoMHg0MCwgYWRkKG0sIDUyKSkKICAgICAgYmEgOj0gbQogICB9CiAgIGZvcih1aW50OCBpID0gMDsgaSA8IDIwOyBpKyspewogICAJaWYoZGF0YVsxNitpXSE9YmFbaV0pIHJldHVybiBmYWxzZTsKICAgfQogICByZXR1cm4gdHJ1ZTsKICB9CgkKCQp9'.
	

]
