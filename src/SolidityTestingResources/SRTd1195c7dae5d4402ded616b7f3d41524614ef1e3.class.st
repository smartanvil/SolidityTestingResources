Class {
	#name : #SRTd1195c7dae5d4402ded616b7f3d41524614ef1e3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd1195c7dae5d4402ded616b7f3d41524614ef1e3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IgKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogIC8qKgogICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICAvKiogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4gICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKiogICogQGRldiBTdWJzdHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIHVpbnQyNTYgdG90YWxTdXBwbHlfOwoKICAvKioKICAqIEBkZXYgdG90YWwgbnVtYmVyIG9mIHRva2VucyBpbiBleGlzdGVuY2UKICAqLwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHRvdGFsU3VwcGx5XzsKICB9CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwoKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgCiAgLyoqCiAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICoKICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCiAgLyoqCiAgICogQGRldiBJbmNyZWFzZSB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9hZGRlZFZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGluY3JlYXNlIHRoZSBhbGxvd2FuY2UgYnkuCiAgICovCiAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBEZWNyZWFzZSB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gZGVjcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zdWJ0cmFjdGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gZGVjcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KICAgKi8KICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgfSBlbHNlIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICB9CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgLypeICAgIF4qLwp9IC8qIGsgdG8gdGhlIE4gdG8gdGhlIDAgfCAgKCkgKC4uKSAoKSBcCiAgLicga24wIHRoeSB0b2tlbiB2IDEuMCB8ICBfXyAgcmJsICBfXyB9Ci4nLCwsLCwsLCwsLCwsLCwsLCwsX19fX198XyhcXFwtLS0tLVxcKi8gY29udHJhY3Qga24wVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CiAgc3RyaW5nIHB1YmxpYyBuYW1lOyAvLyBzb2xpdW0tZGlzYWJsZS1saW5lIHVwcGVyY2FzZQogIHN0cmluZyBwdWJsaWMgc3ltYm9sOyAvLyBzb2xpdW0tZGlzYWJsZS1saW5lIHVwcGVyY2FzZQogIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsgLy8gc29saXVtLWRpc2FibGUtbGluZSB1cHBlcmNhc2UKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHZlcnNpb24gPSAiazEuMDUiOwogIHVpbnQyNTYgcHVibGljIGFEcm9wZWRUaGlzV2VlazsKICB1aW50MjU2IGxhc3RXZWVrOwogIHVpbnQyNTYgZGVjaW1hdGU7CiAgdWludDI1NiB3ZWVrbHlfbGltaXQ7CiAgdWludDI1NiBhaXJfZHJvcDsKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYWlyZHJvcGVkOwogIGFkZHJlc3MgY29udHJvbDsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKICB1aW50MjU2IHB1YmxpYyBNYXJrZXQ7IC8vIEAgY3VycmVudCBmcmFjCiAgdWludDI1NiBwdWJsaWMgQXZhaWxhYmxlVG9rZW5Qb29sOyAvLyBhbGwgb2YgY29udHJhY3RzIGluaXRpYWwgdG9rZW5zIG9uIGNyZWF0aW9uCiAgCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLCBjb250cm9sLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lciB8fCBtc2cuc2VuZGVyID09IGNvbnRyb2wpOwogICAgXzsKICB9CiAgbW9kaWZpZXIgb25seUNvbnRyb2woKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY29udHJvbCk7CiAgICBfOwogIH0KICAKICAvKioqIEBwYXJhbSBuZXdPd25lciAgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvCiAgICBvd25lciB0b2tlbnMgZ28gd2l0aCBvd25lciwgYWlyZHJvcHMgYWx3YXlzIGZyb20gb3duZXIgcG9vbCAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKCU93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CglpZihvd25lciAhPSBuZXdPd25lcikgewoJICB1aW50MjU2IHQgPSBiYWxhbmNlc1tvd25lcl0gLyAxMDsKCSAgYmFsYW5jZXNbbmV3T3duZXJdICs9IGJhbGFuY2VzW293bmVyXSAtIHQ7CgkgIGJhbGFuY2VzW293bmVyXSA9IHQ7CiAgICB9CQogICAgb3duZXIgPSBuZXdPd25lcjsKCXVwZGF0ZSgpOwogIH0gLyoqKiBAcGFyYW0gbmV3Q29udHJvbCAgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgY29udHJvbCB0by4gICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyQ29udHJvbChhZGRyZXNzIG5ld0NvbnRyb2wpIHB1YmxpYyBvbmx5Q29udHJvbCB7CiAgICByZXF1aXJlKG5ld0NvbnRyb2wgIT0gYWRkcmVzcygwKSAmJiBuZXdDb250cm9sICE9IGFkZHJlc3ModGhpcykpOwoJY29udHJvbCA9IG5ld0NvbnRyb2w7CiAgfQogIC8qIGluaXQgY29udHJhY3QgaXRzZWxmIGFzIG93bmVyIG9mIGFsbCBpdHMgdG9rZW5zLCBhbGwgdG9rZW5zIHNldCB0byBhaXIgZHJvcCwgYW5kIGFsd2F5cyBjb21lcyBmb3JtIG93bmVyJ3MgYnVja2V0ICovCiAgZnVuY3Rpb24ga24wVG9rZW4odWludDI1NiBfaW5pdGlhbEFtb3VudCwgc3RyaW5nIF90b2tlbk5hbWUsIHVpbnQ4IF9kZWNpbWFsVW5pdHMsIHN0cmluZyBfdG9rZW5TeW1ib2wpIHB1YmxpYyB7IC8vIDB4ZWJiZWJhZTBmZQoJY29udHJvbCA9IG1zZy5zZW5kZXI7Cglvd25lciA9IGFkZHJlc3ModGhpcyk7CglPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzKDApLCBvd25lcik7CglzeW1ib2wgPSBfdG9rZW5TeW1ib2w7ICAgCgluYW1lID0gX3Rva2VuTmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgZGVjaW1hbHMgPSBfZGVjaW1hbFVuaXRzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCXRvdGFsU3VwcGx5XyA9IF9pbml0aWFsQW1vdW50OwoJYmFsYW5jZXNbb3duZXJdID0gdG90YWxTdXBwbHlfOwoJVHJhbnNmZXIoMHgwLCBvd25lciwgdG90YWxTdXBwbHlfKTsKCWRlY2ltYXRlID0gKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsKCXdlZWtseV9saW1pdCA9IDEwMDAwMCAqIGRlY2ltYXRlOwoJYWlyX2Ryb3AgPSAxMDE4ICogZGVjaW1hdGU7CglpZigoKHRvdGFsU3VwcGx5XyAgKjIpL2RlY2ltYXRlKSA+IDEgZXRoZXIpIGNvZWYgPSAxOwoJZWxzZSBjb2VmID0gMSBldGhlciAvICgodG90YWxTdXBwbHlfICAqMikvZGVjaW1hdGUpOwoJdXBkYXRlKCk7CiAgfSAvKiogcmVzY3VlIGxvc3QgZXJjMjAga2luICoqLwogIGZ1bmN0aW9uIHRyYW5zZmVyZXJjMjAoYWRkcmVzcyB0b2tlbkFkZHJlc3MsIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWwgb25seUNvbnRyb2wgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CglyZXR1cm4gRVJDMjAodG9rZW5BZGRyZXNzKS50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgfSAvKioga24wbW9yZSAqKi8KICBmdW5jdGlvbiBkZXN0cm95KCkgb25seUNvbnRyb2wgZXh0ZXJuYWwgewogICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKHRoaXMpKTsgc2VsZmRlc3RydWN0KG93bmVyKTsKICB9ICAKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7Cgl1cGRhdGUoKTsKICAgIHJldHVybiB0cnVlOwogIH0gIAogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwoJLy8gaWYgbm8gYmFsYW5jZSwgc2VlIGlmIGVsaWdpYmxlIGZvciBhaXJkcm9wIGluc3RlYWQKICAgIGlmKGJhbGFuY2VzW21zZy5zZW5kZXJdID09IDApIHsgCiAgICAgIHVpbnQyNTYgcXR5ID0gYXZhaWxhYmxlQWlyZHJvcChtc2cuc2VuZGVyKTsKCSAgaWYocXR5ID4gMCkgeyAgLy8gcXR5IGlzIHZhbGlkYXRlZCBxdHkgYWdhaW5zdCBiYWxhbmNlcyBpbiBhaXJkcm9wCgkgICAgYmFsYW5jZXNbb3duZXJdIC09IHF0eTsKCSAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBxdHk7CgkJVHJhbnNmZXIob3duZXIsIF90bywgX3ZhbHVlKTsKCQl1cGRhdGUoKTsKCQlhaXJkcm9wZWRbbXNnLnNlbmRlcl0gPSBxdHk7CgkJYURyb3BlZFRoaXNXZWVrICs9IHF0eTsKCQkvLyBhaXJkcm9wcyBkb24ndCB0cmlnZ2VyIG93bmVyc2hpcCBjaGFuZ2UKCQlyZXR1cm4gdHJ1ZTsKCSAgfQkKCSAgcmV2ZXJ0KCk7IC8vIG5vIGdvCgl9CiAgCiAgICAvLyBleGlzdGluZyBiYWxhbmNlCiAgICBpZihiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IF92YWx1ZSkgcmV2ZXJ0KCk7CglpZihiYWxhbmNlc1tfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZXNbX3RvXSkgcmV2ZXJ0KCk7CgkKICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwoJYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwoJdXBkYXRlKCk7CglyZXR1cm4gdHJ1ZTsKICB9ICAKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgYmFsYW5jZSA9IGJhbGFuY2VzW3dob107CglpZihiYWxhbmNlID09IDApIAoJICByZXR1cm4gYXZhaWxhYmxlQWlyZHJvcCh3aG8pOwoJCiAgICByZXR1cm4gYmFsYW5jZTsKICB9ICAKICAvKiAgKiBjaGVjayB0aGUgZmF1Y2V0ICAqLyAgCiAgZnVuY3Rpb24gYXZhaWxhYmxlQWlyZHJvcChhZGRyZXNzIHdobykgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgaWYoYmFsYW5jZXNbb3duZXJdID09IDApIHJldHVybiAwOwoJaWYoYWlyZHJvcGVkW3dob10gPiAwKSByZXR1cm4gMDsgLy8gYWxyZWFkeSB1c2VkIGFpcmRyb3AKCQoJaWYgKHRoaXN3ZWVrKCkgPiBsYXN0V2VlayB8fCBhRHJvcGVkVGhpc1dlZWsgPCB3ZWVrbHlfbGltaXQpIHsKCSAgaWYoYmFsYW5jZXNbb3duZXJdID4gYWlyX2Ryb3ApIHJldHVybiBhaXJfZHJvcDsKCSAgZWxzZSByZXR1cm4gYmFsYW5jZXNbb3duZXJdOwoJfQoJcmV0dXJuIDA7CiAgfSAgZnVuY3Rpb24gdGhpc3dlZWsoKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBub3cgLyAxIHdlZWtzOwogIH0gIGZ1bmN0aW9uIGdldEFpckRyb3BlZFRvZGF5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKHRoaXN3ZWVrKCkgPiBsYXN0V2VlaykgcmV0dXJuIDA7CgllbHNlIHJldHVybiBhRHJvcGVkVGhpc1dlZWs7CiAgfSAgCiAgZnVuY3Rpb24gdHJhbnNmZXJCYWxhbmNlKGFkZHJlc3MgdXBDb250cmFjdCkgZXh0ZXJuYWwgb25seUNvbnRyb2wgewogICAgcmVxdWlyZSh1cENvbnRyYWN0ICE9IGFkZHJlc3MoMCkgJiYgdXBDb250cmFjdC5zZW5kKHRoaXMuYmFsYW5jZSkpOwogIH0KICBmdW5jdGlvbiAoKSBwYXlhYmxlIHB1YmxpYyB7CiAgICB1aW50MjU2IHF0eSA9IGNhbGMobXNnLnZhbHVlKTsKCWlmKHF0eSA+IDApIHsKCSAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gcXR5OwoJICBiYWxhbmNlc1tvd25lcl0gLT0gcXR5OwoJICBUcmFuc2Zlcihvd25lciwgbXNnLnNlbmRlciwgcXR5KTsKCSAgdXBkYXRlKCk7Cgl9IGVsc2UgcmV2ZXJ0KCk7CiAgfSAKICB1aW50MjU2IGNvZWY7CiAgZnVuY3Rpb24gdXBkYXRlKCkgaW50ZXJuYWwgewogICAgaWYoYmFsYW5jZXNbb3duZXJdICE9IEF2YWlsYWJsZVRva2VuUG9vbCkgewoJICBNYXJrZXQgPSAoKCh0b3RhbFN1cHBseV8gLSBiYWxhbmNlc1tvd25lcl0pICoqIDIpIC8gY29lZik7CgkgIEF2YWlsYWJsZVRva2VuUG9vbCA9IGJhbGFuY2VzW293bmVyXTsKCX0KICB9CiAgZnVuY3Rpb24gY2FsYyh1aW50MjU2IHZhbHVlKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZihiYWxhbmNlc1tvd25lcl0gPT0gMCB8fCB2YWx1ZSA8IDE1MDAwMDAwMDAwMDAwMDAwKSByZXR1cm4gMDsKCXVpbnQyNTYgeCA9IChjb2VmICogKHZhbHVlICsgTWFya2V0KSk7IAoJdWludDI1NiBxdHkgPSB4OwoJdWludDI1NiB6ID0gKHggKyAxKSAvIDI7CiAgICB3aGlsZSAoeiA8IHF0eSkgewogICAgICAgIHF0eSA9IHo7CiAgICAgICAgeiA9ICh4IC8geiArIHopIC8gMjsKICAgIH0gLyogYWRkIGEgZnJhYyBvZiBhaXJkcm9wIHdpdGggZWFjaCAqLyAKCXVpbnQyNTYgd29ydGggPSAocXR5IC0gKHRvdGFsU3VwcGx5XyAtIGJhbGFuY2VzW293bmVyXSkpICsgKGFpcl9kcm9wICogKDEgKyAodmFsdWUgLyAxMjUwMDAwMDAwMDAwMDAwMCkpKTsKCWlmKHdvcnRoID4gYmFsYW5jZXNbb3duZXJdKSByZXR1cm4gYmFsYW5jZXNbb3duZXJdOwoJcmV0dXJuIHdvcnRoOwogIH0gIAp9'.
	

]
