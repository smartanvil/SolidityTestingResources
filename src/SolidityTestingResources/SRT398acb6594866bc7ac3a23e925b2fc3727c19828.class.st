Class {
	#name : #SRT398acb6594866bc7ac3a23e925b2fc3727c19828,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT398acb6594866bc7ac3a23e925b2fc3727c19828 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9EaXNjb3VudHMuc29sCgpsaWJyYXJ5IERpc2NvdW50cyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAqIFRZUEVTCiAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogIC8qCiAgICogVG9wLWxldmVsIHN0cnVjdCBmb3IgZ3JvdXBpbmcgb2YgdGllcnMgd2l0aCBhIGJhc2UgcHVyY2hhc2UgcmF0ZQogICAqLwogIHN0cnVjdCBDb2xsZWN0aW9uIHsKICAgIFRpZXJbXSB0aWVyczsKCiAgICAvLyBudW1iZXIgb2YgdG9rZW5zIHBlciB3ZWkKICAgIHVpbnQyNTYgYmFzZVJhdGU7CiAgfQoKICAvKgogICAqIFN0cnVjdCBmb3IgYSBnaXZlbiB0aWVyIC0gZGlzY291bnQgYW5kIGF2YWlsYWJpbGl0eQogICAqLwogIHN0cnVjdCBUaWVyIHsKICAgIC8vIGRpc2NvdW50IHRoZSBzZXQgcHVyY2hhc2UgcHJpY2UsIGV4cHJlc3NlZCBpbiBiYXNpcyBwb2ludHMgKOKAsSkKICAgIC8vIHJhbmdlICgw4oCxIC4uIDEwLDAwMOKAsSkgY29ycmVzcG9uZHMgdG8gKDAuMDAlIC4uIDEwMC4wMCUpCiAgICB1aW50MjU2IGRpc2NvdW50OwoKICAgIC8vIG51bWJlciBvZiByZW1haW5pbmcgYXZhaWxhYmxlIHRva2VucyBpbiB0aWVyCiAgICB1aW50MjU2IGF2YWlsYWJsZTsKICB9CgogIC8vIHVwcGVyLWJvdW5kIG9mIGJhc2lzIHBvaW50IHNjYWxlCiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgTUFYX0RJU0NPVU5UID0gMTAwMDA7CgoKICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgKiBDUkVBVEUKICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgLyoKICAgKiBAZGV2IEFkZCBhIG5ldyB0aWVyIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3QKICAgKiBAcGFyYW0gX2Rpc2NvdW50IC0gRGlzY291bnQgaW4gYmFzaXMgcG9pbnRzCiAgICogQHBhcmFtIF9hdmFpbGFibGUgLSBBdmFpbGFibGUgc3VwcGx5IGF0IHRpZXIKICAgKi8KICBmdW5jdGlvbiBhZGRUaWVyKAogICAgQ29sbGVjdGlvbiBzdG9yYWdlIHNlbGYsCiAgICB1aW50MjU2IF9kaXNjb3VudCwKICAgIHVpbnQyNTYgX2F2YWlsYWJsZQogICkKICAgIGludGVybmFsCiAgewogICAgc2VsZi50aWVycy5wdXNoKFRpZXIoewogICAgICBkaXNjb3VudDogX2Rpc2NvdW50LAogICAgICBhdmFpbGFibGU6IF9hdmFpbGFibGUKICAgIH0pKTsKICB9CgoKICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgKiBQVVJDSEFTRQogICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICAvKgogICAqIEBkZXYgU3VidHJhY3RzIHN1cHBseSBmcm9tIHRpZXJzIHN0YXJ0aW5nIGF0IGEgbWluaW11bSwgdXNpbmcgdXAgZnVuZHMKICAgKiBAcGFyYW0gX2Ftb3VudCAtIE1heGltdW0gbnVtYmVyIG9mIHRva2VucyB0byBwdXJjaGFzZQogICAqIEBwYXJhbSBfZnVuZHMgLSBBbGxvd2FuY2UgaW4gV2VpCiAgICogQHBhcmFtIF9taW5pbXVtVGllciAtIE1pbmltdW0gdGllciB0byBzdGFydCBwdXJjaGFzaW5nIGZyb20KICAgKiBAcmV0dXJuIFRvdGFsIHRva2VucyBwdXJjaGFzZWQgYW5kIHJlbWFpbmluZyBmdW5kcyBpbiB3ZWkKICAgKi8KICBmdW5jdGlvbiBwdXJjaGFzZVRva2VucygKICAgIENvbGxlY3Rpb24gc3RvcmFnZSBzZWxmLAogICAgdWludDI1NiBfYW1vdW50LAogICAgdWludDI1NiBfZnVuZHMsCiAgICB1aW50MjU2IF9taW5pbXVtVGllcgogICkKICAgIGludGVybmFsCiAgICByZXR1cm5zICgKICAgICAgdWludDI1NiBwdXJjaGFzZWQsCiAgICAgIHVpbnQyNTYgcmVtYWluaW5nCiAgICApCiAgewogICAgdWludDI1NiBpc3N1ZSA9IDA7IC8vIHRyYWNrcyB0b3RhbCB0b2tlbnMgdG8gaXNzdWUKICAgIHJlbWFpbmluZyA9IF9mdW5kczsKCiAgICB1aW50MjU2IGF2YWlsYWJsZTsgIC8vIHZhciBmb3IgYXZhaWxhYmxlIHRva2VucyBhdCB0aWVyCiAgICB1aW50MjU2IHNwZW5kOyAvLyBhbW91bnQgc3BlbnQgYXQgdGllcgogICAgdWludDI1NiBhZmZvcmRhYmxlOyAgLy8gdmFyIGZvciAjIGZ1bmRzIGNhbiBwYXkgZm9yIGF0IHRpZXIKICAgIHVpbnQyNTYgcHVyY2hhc2U7IC8vIHZhciBmb3IgIyB0byBwdXJjaGFzZSBhdCB0aWVyCgogICAgLy8gZm9yIGVhY2ggdGllciBzdGFydGluZyBhdCBtaW5pbXVtCiAgICAvLyBkcmF3IGZyb20gdGhlIHNlbnQgZnVuZHMgYW5kIGNvdW50IHRva2VucyB0byBpc3N1ZQogICAgZm9yICh2YXIgaSA9IF9taW5pbXVtVGllcjsgaSA8IHNlbGYudGllcnMubGVuZ3RoICYmIGlzc3VlIDwgX2Ftb3VudDsgaSsrKSB7CiAgICAgIC8vIGdldCB0aGUgYXZhaWxhYmxlIHRva2VucyBsZWZ0IGF0IGVhY2ggdGllcgogICAgICBhdmFpbGFibGUgPSBzZWxmLnRpZXJzW2ldLmF2YWlsYWJsZTsKCiAgICAgIC8vIGNvbXB1dGUgdGhlIG1heGltdW0gdG9rZW5zIHRoYXQgdGhlIGZ1bmRzIGNhbiBwYXkgZm9yCiAgICAgIGFmZm9yZGFibGUgPSBfY29tcHV0ZVRva2Vuc1B1cmNoYXNlZEF0VGllcihzZWxmLCBpLCByZW1haW5pbmcpOwoKICAgICAgLy8gZWl0aGVyIHB1cmNoYXNlIHdoYXQgdGhlIGZ1bmRzIGNhbiBhZmZvcmQsIG9yIHRoZSB3aG9sZSBzdXBwbHkKICAgICAgLy8gYXQgdGhlIHRpZXIKICAgICAgaWYgKGFmZm9yZGFibGUgPCBhdmFpbGFibGUpIHsKICAgICAgICBwdXJjaGFzZSA9IGFmZm9yZGFibGU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcHVyY2hhc2UgPSBhdmFpbGFibGU7CiAgICAgIH0KCiAgICAgIC8vIGxpbWl0IHRoZSBhbW91bnQgcHVyY2hhc2VkIHVwIHRvIHNwZWNpZmllZCBhbW91bnQKICAgICAgLy8gdXNlIHNhZmVtYXRoIGhlcmUgaW4gY2FzZSBvZiB1bmtub3duIG92ZXJmbG93IHJpc2sKICAgICAgaWYgKHB1cmNoYXNlLmFkZChpc3N1ZSkgPiBfYW1vdW50KSB7CiAgICAgICAgcHVyY2hhc2UgPSBfYW1vdW50LnN1Yihpc3N1ZSk7CiAgICAgIH0KCiAgICAgIHNwZW5kID0gX2NvbXB1dGVDb3N0Rm9yVG9rZW5zQXRUaWVyKHNlbGYsIGksIHB1cmNoYXNlKTsKCiAgICAgIC8vIGRlY3JlYXNlIGF2YWlsYWJsZSBzdXBwbHkgYXQgdGllcgogICAgICBzZWxmLnRpZXJzW2ldLmF2YWlsYWJsZSAtPSBwdXJjaGFzZTsKCiAgICAgIC8vIGluY3JlYXNlIHRva2VucyB0byBpc3N1ZQogICAgICBpc3N1ZSArPSBwdXJjaGFzZTsKCiAgICAgIC8vIGRlY3JlbWVudCBmdW5kcyB0byBwcm9jZWVkCiAgICAgIHJlbWFpbmluZyAtPSBzcGVuZDsKICAgIH0KCiAgICByZXR1cm4gKGlzc3VlLCByZW1haW5pbmcpOwogIH0KCgogIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAqIFBSSUNFIE1BVEgKICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgLy8gQHJldHVybiB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGZvciBhbiBhbW91bnQgb2Ygd2VpLCBkaXNjb3VudC1hZGp1c3RlZAogIGZ1bmN0aW9uIF9jb21wdXRlVG9rZW5zUHVyY2hhc2VkQXRUaWVyKAogICAgQ29sbGVjdGlvbiBzdG9yYWdlIHNlbGYsCiAgICB1aW50MjU2IF90aWVyLAogICAgdWludDI1NiBfd2VpCiAgKQogICAgcHJpdmF0ZQogICAgdmlldwogICAgcmV0dXJucyAodWludDI1NikKICB7CiAgICB2YXIgcGFpZEJhc2lzID0gTUFYX0RJU0NPVU5ULnN1YihzZWxmLnRpZXJzW190aWVyXS5kaXNjb3VudCk7CgogICAgcmV0dXJuIF93ZWkubXVsKHNlbGYuYmFzZVJhdGUpLm11bChNQVhfRElTQ09VTlQpIC8gcGFpZEJhc2lzOwogIH0KCiAgLy8gQHJldHVybiBjb3N0IGluIHdlaSBmb3IgdGhhdCBtYW55IHRva2VucwogIGZ1bmN0aW9uIF9jb21wdXRlQ29zdEZvclRva2Vuc0F0VGllcigKICAgIENvbGxlY3Rpb24gc3RvcmFnZSBzZWxmLAogICAgdWludDI1NiBfdGllciwKICAgIHVpbnQyNTYgX3Rva2VucwogICkKICAgIHByaXZhdGUKICAgIHZpZXcKICAgIHJldHVybnMgKHVpbnQyNTYpCiAgewogICAgdmFyIHBhaWRCYXNpcyA9IE1BWF9ESVNDT1VOVC5zdWIoc2VsZi50aWVyc1tfdGllcl0uZGlzY291bnQpOwoKICAgIHZhciBudW1lcmF0b3IgPSBfdG9rZW5zLm11bChwYWlkQmFzaXMpOwogICAgdmFyIGRlbm9taW5hdG9yID0gTUFYX0RJU0NPVU5ULm11bChzZWxmLmJhc2VSYXRlKTsKCiAgICB2YXIgZmxvb3IgPSBfdG9rZW5zLm11bChwYWlkQmFzaXMpLmRpdigKICAgICAgTUFYX0RJU0NPVU5ULm11bChzZWxmLmJhc2VSYXRlKQogICAgKTsKCiAgICAvLyBtdXN0IHJvdW5kIHVwIGNvc3QgdG8gbmV4dCB3ZWkgKGNhdXNlIHRva2VuIGNvbXB1dGF0aW9uIHJvdW5kcyBkb3duKQogICAgaWYgKG51bWVyYXRvciAlIGRlbm9taW5hdG9yICE9IDApIHsKICAgICAgZmxvb3IgPSBmbG9vciArIDE7CiAgICB9CgogICAgcmV0dXJuIGZsb29yOwogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL0xpbWl0cy5zb2wKCmxpYnJhcnkgTGltaXRzIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgc3RydWN0IFB1cmNoYXNlUmVjb3JkIHsKICAgIHVpbnQyNTYgYmxvY2tOdW1iZXI7CiAgICB1aW50MjU2IGFtb3VudDsKICB9CgogIHN0cnVjdCBXaW5kb3cgewogICAgdWludDI1NiBhbW91bnQ7ICAvLyAjIG9mIHRva2VucwogICAgdWludDI1NiBkdXJhdGlvbjsgIC8vICMgb2YgYmxvY2tzCgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBQdXJjaGFzZVJlY29yZCkgcHVyY2hhc2VzOwogIH0KCiAgLyoKICAgKiBSZWNvcmQgYSBwdXJjaGFzZSB0b3dhcmRzIGEgcHVyY2hhc2VyJ3MgY2FwIGxpbWl0CiAgICogQGRldiByZXNldHMgdGhlIHB1cmNoYXNlcidzIGNhcCBpZiB0aGUgd2luZG93IGR1cmF0aW9uIGhhcyBiZWVuIG1ldAogICAqIEBwYXJhbSBfcGFydGljaXBhbnQgLSBwdXJjaGFzZXIKICAgKiBAcGFyYW0gX2Ftb3VudCAtIHRva2VuIGFtb3VudCBvZiBuZXcgcHVyY2hhc2UKICAgKi8KICBmdW5jdGlvbiByZWNvcmRQdXJjaGFzZSgKICAgIFdpbmRvdyBzdG9yYWdlIHNlbGYsCiAgICBhZGRyZXNzIF9wYXJ0aWNpcGFudCwKICAgIHVpbnQyNTYgX2Ftb3VudAogICkKICAgIGludGVybmFsCiAgewogICAgdmFyIGJsb2Nrc0xlZnQgPSBnZXRCbG9ja3NVbnRpbFJlc2V0KHNlbGYsIF9wYXJ0aWNpcGFudCk7CiAgICB2YXIgcmVjb3JkID0gc2VsZi5wdXJjaGFzZXNbX3BhcnRpY2lwYW50XTsKCiAgICBpZiAoYmxvY2tzTGVmdCA9PSAwKSB7CiAgICAgIHJlY29yZC5hbW91bnQgPSBfYW1vdW50OwogICAgICByZWNvcmQuYmxvY2tOdW1iZXIgPSBibG9jay5udW1iZXI7CiAgICB9IGVsc2UgewogICAgICByZWNvcmQuYW1vdW50ID0gcmVjb3JkLmFtb3VudC5hZGQoX2Ftb3VudCk7CiAgICB9CiAgfQoKICAvKgogICAqIFJldHJpZXZlIHRoZSBjdXJyZW50IGxpbWl0IGZvciBhIGdpdmVuIHBhcnRpY2lwYW50LCBiYXNlZCBvbiBwcmV2aW91cwogICAqIHB1cmNoYXNlIGhpc3RvcnkKICAgKiBAcGFyYW0gX3BhcnRpY2lwYW50IC0gUHVyY2hhc2VyCiAgICogQHJldHVybiBhbW91bnQgb2YgdG9rZW5zIGxlZnQgZm9yIHBhcnRpY2lwYW50IHdpdGggY2FwCiAgICovCiAgZnVuY3Rpb24gZ2V0TGltaXQoV2luZG93IHN0b3JhZ2Ugc2VsZiwgYWRkcmVzcyBfcGFydGljaXBhbnQpCiAgICBwdWJsaWMKICAgIHZpZXcKICAgIHJldHVybnMgKHVpbnQyNTYgX2Ftb3VudCkKICB7CiAgICB2YXIgYmxvY2tzTGVmdCA9IGdldEJsb2Nrc1VudGlsUmVzZXQoc2VsZiwgX3BhcnRpY2lwYW50KTsKCiAgICBpZiAoYmxvY2tzTGVmdCA9PSAwKSB7CiAgICAgIHJldHVybiBzZWxmLmFtb3VudDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBzZWxmLmFtb3VudC5zdWIoc2VsZi5wdXJjaGFzZXNbX3BhcnRpY2lwYW50XS5hbW91bnQpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2V0QmxvY2tzVW50aWxSZXNldChXaW5kb3cgc3RvcmFnZSBzZWxmLCBhZGRyZXNzIF9wYXJ0aWNpcGFudCkKICAgIHB1YmxpYwogICAgdmlldwogICAgcmV0dXJucyAodWludDI1NiBfYmxvY2tzKQogIHsKICAgIHZhciBleHBpcmVzID0gc2VsZi5wdXJjaGFzZXNbX3BhcnRpY2lwYW50XS5ibG9ja051bWJlciArIHNlbGYuZHVyYXRpb247CiAgICBpZiAoYmxvY2subnVtYmVyID4gZXhwaXJlcykgewogICAgICByZXR1cm4gMDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBleHBpcmVzIC0gYmxvY2subnVtYmVyOwogICAgfQogIH0KfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL293bmVyc2hpcC9Pd25hYmxlLnNvbAoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL293bmVyc2hpcC9DbGFpbWFibGUuc29sCgovKioKICogQHRpdGxlIENsYWltYWJsZQogKiBAZGV2IEV4dGVuc2lvbiBmb3IgdGhlIE93bmFibGUgY29udHJhY3QsIHdoZXJlIHRoZSBvd25lcnNoaXAgbmVlZHMgdG8gYmUgY2xhaW1lZC4KICogVGhpcyBhbGxvd3MgdGhlIG5ldyBvd25lciB0byBhY2NlcHQgdGhlIHRyYW5zZmVyLgogKi8KY29udHJhY3QgQ2xhaW1hYmxlIGlzIE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIHBlbmRpbmdPd25lcjsKCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0aHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIHBlbmRpbmdPd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5UGVuZGluZ093bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHBlbmRpbmdPd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gc2V0IHRoZSBwZW5kaW5nT3duZXIgYWRkcmVzcy4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcGVuZGluZ093bmVyID0gbmV3T3duZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgcGVuZGluZ093bmVyIGFkZHJlc3MgdG8gZmluYWxpemUgdGhlIHRyYW5zZmVyLgogICAqLwogIGZ1bmN0aW9uIGNsYWltT3duZXJzaGlwKCkgb25seVBlbmRpbmdPd25lciBwdWJsaWMgewogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIHBlbmRpbmdPd25lcik7CiAgICBvd25lciA9IHBlbmRpbmdPd25lcjsKICAgIHBlbmRpbmdPd25lciA9IGFkZHJlc3MoMCk7CiAgfQp9CgovLyBGaWxlOiBjb250cmFjdHMvU2VlVG9rZW4uc29sCgovKioKICogQHRpdGxlIFNFRSBUb2tlbgogKiBOb3QgYSBmdWxsIEVSQzIwIHRva2VuIC0gcHJvaGliaXRzIHRyYW5zZmVycmluZy4gU2VydmVzIGFzIGEgcmVjb3JkIG9mCiAqIGFjY291bnQsIHRvIHJlZGVlbSBmb3IgcmVhbCB0b2tlbnMgYWZ0ZXIgbGF1bmNoLgogKi8KY29udHJhY3QgU2VlVG9rZW4gaXMgQ2xhaW1hYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlNlZSBQcmVzYWxlIFRva2VuIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJTRUUiOwogIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICBldmVudCBJc3N1ZShhZGRyZXNzIHRvLCB1aW50MjU2IGFtb3VudCk7CgogIC8qKgogICAqIEBkZXYgSXNzdWUgbmV3IHRva2VucwogICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIG1pbnRlZCB0b2tlbnMKICAgKiBAcGFyYW0gX2Ftb3VudCB0aGUgYW1vdW50IG9mIG5ldyB0b2tlbnMgdG8gaXNzdWUKICAgKi8KICBmdW5jdGlvbiBpc3N1ZShhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgcHVibGljIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwoKICAgIElzc3VlKF90bywgX2Ftb3VudCk7CiAgfQoKICAvKioKICAgKiBAZGV2IEdldCB0aGUgYmFsYW5jZSBmb3IgYSBwYXJ0aWN1bGFyIHRva2VuIGhvbGRlcgogICAqIEBwYXJhbSBfaG9sZGVyIFRoZSB0b2tlbiBob2xkZXIncyBhZGRyZXNzCiAgICogQHJldHVybiBUaGUgaG9sZGVyJ3MgYmFsYW5jZQogICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9ob2xkZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgYmFsYW5jZSA9IGJhbGFuY2VzW19ob2xkZXJdOwogIH0KfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL2xpZmVjeWNsZS9QYXVzYWJsZS5zb2wKCi8qKgogKiBAdGl0bGUgUGF1c2FibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgogKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CiAgZXZlbnQgUGF1c2UoKTsKICBldmVudCBVbnBhdXNlKCk7CgogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBub3QgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gdHJ1ZTsKICAgIFBhdXNlKCk7CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgKi8KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL1ByZXNhbGUuc29sCgpjb250cmFjdCBQcmVzYWxlIGlzIENsYWltYWJsZSwgUGF1c2FibGUgewogIHVzaW5nIERpc2NvdW50cyBmb3IgRGlzY291bnRzLkNvbGxlY3Rpb247CiAgdXNpbmcgTGltaXRzIGZvciBMaW1pdHMuV2luZG93OwoKICBzdHJ1Y3QgUGFydGljaXBhbnQgewogICAgYm9vbCBhdXRob3JpemVkOwoKICAgIHVpbnQyNTYgbWluaW11bVRpZXI7CiAgfQoKCiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICogU1RPUkFHRSAvIEVWRU5UUwogICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICBTZWVUb2tlbiB0b2tlbjsKICBEaXNjb3VudHMuQ29sbGVjdGlvbiBkaXNjb3VudHM7CiAgTGltaXRzLldpbmRvdyBjYXA7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gUGFydGljaXBhbnQpIHBhcnRpY2lwYW50czsKCgogIGV2ZW50IFRpZXIodWludDI1NiBkaXNjb3VudCwgdWludDI1NiBhdmFpbGFibGUpOwoKCiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICogQ09OU1RSVUNUT1IgLyBMSUZFQ1lDTEUKICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgZnVuY3Rpb24gUHJlc2FsZShhZGRyZXNzIF90b2tlbikKICAgIHB1YmxpYwogIHsKICAgIHRva2VuID0gU2VlVG9rZW4oX3Rva2VuKTsKCiAgICBwYXVzZWQgPSB0cnVlOwogIH0KCiAgLyoKICAgKiBAZGV2IChEb25lIGFzIHBhcnQgb2YgbWlncmF0aW9uKSBDbGFpbXMgb3duZXJzaGlwIG9mIHRva2VuIGNvbnRyYWN0CiAgICovCiAgZnVuY3Rpb24gY2xhaW1Ub2tlbigpIHB1YmxpYyB7CiAgICB0b2tlbi5jbGFpbU93bmVyc2hpcCgpOwogIH0KCiAgLyoKICAgKiBBbGxvdyBwdXJjaGFzZQogICAqIEBkZXYgd2hpbGUgcGF1c2VkCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpCiAgICBvbmx5T3duZXIKICAgIHdoZW5QYXVzZWQKICAgIHdoZW5SYXRlU2V0CiAgICB3aGVuQ2FwcGVkCiAgICB3aGVuT3duc1Rva2VuCiAgICBwdWJsaWMKICB7CiAgICBzdXBlci51bnBhdXNlKCk7CiAgfQoKCiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICogQURNSU4gSU5URVJGQUNFCiAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogIC8qCiAgICogU2V0IHRoZSBiYXNlIHB1cmNoYXNlIHJhdGUgZm9yIHRoZSB0b2tlbgogICAqIEBwYXJhbSBfcHVyY2hhc2VSYXRlIC0gbnVtYmVyIG9mIHRva2VucyBncmFudGVkIHBlciB3ZWkKICAgKi8KICBmdW5jdGlvbiBzZXRSYXRlKHVpbnQyNTYgX3B1cmNoYXNlUmF0ZSkKICAgIG9ubHlPd25lcgogICAgd2hlblBhdXNlZAogICAgcHVibGljCiAgewogICAgZGlzY291bnRzLmJhc2VSYXRlID0gX3B1cmNoYXNlUmF0ZTsKICB9CgogIC8qCiAgICogU3BlY2lmeSBwdXJjaGFzaW5nIGxpbWl0cyBmb3IgYSBzaW5nbGUgYWNjb3VudDogdGhlIGxpbWl0IG9mIHRva2VucwogICAqIHRoYXQgYSBwYXJ0aWNpcGFudCBtYXkgcHVyY2hhc2UgaW4gYSBzZXQgYW1vdW50IG9mIHRpbWUgKGJsb2NrcykKICAgKiBAcGFyYW0gX2Ftb3VudCAtIE51bWJlciBvZiB0b2tlbnMKICAgKiBAcGFyYW0gX2R1cmF0aW9uIC0gTnVtYmVyIG9mIGJsb2NrcwogICAqLwogIGZ1bmN0aW9uIGxpbWl0UHVyY2hhc2luZyh1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgX2R1cmF0aW9uKQogICAgb25seU93bmVyCiAgICB3aGVuUGF1c2VkCiAgICBwdWJsaWMKICB7CiAgICBjYXAuYW1vdW50ID0gX2Ftb3VudDsKICAgIGNhcC5kdXJhdGlvbiA9IF9kdXJhdGlvbjsKICB9CgogIC8qCiAgICogQWRkIGEgdGllciB3aXRoIGEgZ2l2ZW4gZGlzY291bnQgYW5kIGF2YWlsYWJsZSBzdXBwbHkKICAgKiBAcGFyYW0gX2Rpc2NvdW50IC0gRGlzY291bnQgaW4gYmFzaXMgcG9pbnRzCiAgICogQHBhcmFtIF9hdmFpbGFibGUgLSBBdmFpbGFibGUgc3VwcGx5IGF0IHRpZXIKICAgKi8KICBmdW5jdGlvbiBhZGRUaWVyKHVpbnQyNTYgX2Rpc2NvdW50LCB1aW50MjU2IF9hdmFpbGFibGUpCiAgICBvbmx5T3duZXIKICAgIHdoZW5QYXVzZWQKICAgIHB1YmxpYwogIHsKICAgIGRpc2NvdW50cy5hZGRUaWVyKF9kaXNjb3VudCwgX2F2YWlsYWJsZSk7CgogICAgVGllcihfZGlzY291bnQsIF9hdmFpbGFibGUpOwogIH0KCiAgLyoKICAgKiBBdXRob3JpemUgYSBncm91cCBvZiBwYXJ0aWNpcGFudHMgZm9yIGEgdGllcgogICAqIEBwYXJhbSBfbWluaW11bVRpZXIgLSBtaW5pbXVtIHRpZXIgZm9yIGxpc3Qgb2YgcGFydGljaXBhbnRzCiAgICogQHBhcmFtIF9wYXJ0aWNpcGFudHMgLSBhcnJheSBvZiBhdXRob3JpemVkIGFkZHJlc3NlcwogICAqLwogIGZ1bmN0aW9uIGF1dGhvcml6ZUZvclRpZXIodWludDI1NiBfbWluaW11bVRpZXIsIGFkZHJlc3NbXSBfYXV0aG9yaXplZCkKICAgIG9ubHlPd25lcgogICAgcHVibGljCiAgewogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX2F1dGhvcml6ZWQubGVuZ3RoOyBpKyspIHsKICAgICAgcGFydGljaXBhbnRzW19hdXRob3JpemVkW2ldXSA9IFBhcnRpY2lwYW50KHsKICAgICAgICBhdXRob3JpemVkOiB0cnVlLAogICAgICAgIG1pbmltdW1UaWVyOiBfbWluaW11bVRpZXIKICAgICAgfSk7CiAgICB9CiAgfQoKICAvKgogICAqIFdpdGhkcmF3IGJhbGFuY2UgZnJvbSBwcmVzYWxlCiAgICovCiAgZnVuY3Rpb24gd2l0aGRyYXcoKQogICAgb25seU93bmVyCiAgICBwdWJsaWMKICB7CiAgICBvd25lci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0KCgogIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAqIFBVUkNIQVNFIElOVEVSRkFDRQogICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICAvKgogICAqIEZhbGxiYWNrIChkZWZhdWx0KSBmdW5jdGlvbi4KICAgKiBAZGV2IEZvcndhcmRzIHRvIGBwdXJjaGFzZVRva2VucygpYAogICAqLwogIGZ1bmN0aW9uICgpCiAgICBwdWJsaWMKICAgIHBheWFibGUKICB7CiAgICBwdXJjaGFzZVRva2VucygpOwogIH0KCiAgLyoKICAgKiBQdWJsaWMgcHVyY2hhc2UgaW50ZXJmYWNlIGZvciBhdXRob3JpemVkIERyYWdvbiBIb2xkZXJzCiAgICogQGRldiBQdXJjaGFzZXMgdG9rZW5zIHN0YXJ0aW5nIGluIGF1dGhvcml6ZWQgbWluaW11bSB0aWVyCiAgICovCiAgZnVuY3Rpb24gcHVyY2hhc2VUb2tlbnMoKQogICAgb25seUF1dGhvcml6ZWQKICAgIHdoZW5Ob3RQYXVzZWQKICAgIHB1YmxpYwogICAgcGF5YWJsZQogIHsKICAgIHZhciBsaW1pdCA9IGNhcC5nZXRMaW1pdChtc2cuc2VuZGVyKTsKCiAgICB2YXIgKHB1cmNoYXNlZCwgcmVmdW5kKSA9IGRpc2NvdW50cy5wdXJjaGFzZVRva2VucygKICAgICAgbGltaXQsCiAgICAgIG1zZy52YWx1ZSwKICAgICAgcGFydGljaXBhbnRzW21zZy5zZW5kZXJdLm1pbmltdW1UaWVyCiAgICApOwoKICAgIGNhcC5yZWNvcmRQdXJjaGFzZShtc2cuc2VuZGVyLCBwdXJjaGFzZWQpOwoKICAgIC8vIGlzc3VlIG5ldyB0b2tlbnMKICAgIHRva2VuLmlzc3VlKG1zZy5zZW5kZXIsIHB1cmNoYXNlZCk7CgogICAgLy8gaWYgdGhlcmUgYXJlIGZ1bmRzIGxlZnQsIHNlbmQgcmVmdW5kCiAgICBpZiAocmVmdW5kID4gMCkgewogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHJlZnVuZCk7CiAgICB9CiAgfQoKCiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICogUFJJQ0lORyAvIEFWQUlMQUJJTElUWSAtIFZJRVcgSU5URVJGQUNFCiAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogIC8qCiAgICogR2V0IHRlcm1zIGZvciBwdXJjaGFzaW5nIGxpbWl0IHdpbmRvdwogICAqIEByZXR1cm4gbnVtYmVyIG9mIHRva2VucyBhbmQgZHVyYXRpb24gaW4gYmxvY2tzCiAgICovCiAgZnVuY3Rpb24gZ2V0UHVyY2hhc2VMaW1pdCgpCiAgICBwdWJsaWMKICAgIHZpZXcKICAgIHJldHVybnMgKHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBfZHVyYXRpb24pCiAgewogICAgX2Ftb3VudCA9IGNhcC5hbW91bnQ7CiAgICBfZHVyYXRpb24gPSBjYXAuZHVyYXRpb247CiAgfQoKICAvKgogICAqIEdldCB0aWVycyBjdXJyZW50bHkgc2V0IHVwLCB3aXRoIGRpc2NvdW50cyBhbmQgYXZhaWxhYmxlIHN1cHBsaWVzCiAgICogQHJldHVybiBhcnJheSBvZiB0dXBsZXMgKGRpc2NvdW50LCBhdmFpbGFibGUpCiAgICovCiAgZnVuY3Rpb24gZ2V0VGllcnMoKQogICAgcHVibGljCiAgICB2aWV3CiAgICByZXR1cm5zICh1aW50MjU2WzJdW10pCiAgewogICAgdmFyIHJlY29yZHMgPSBkaXNjb3VudHMudGllcnM7CiAgICB1aW50MjU2WzJdW10gbWVtb3J5IHRpZXJzID0gbmV3IHVpbnQyNTZbMl1bXShyZWNvcmRzLmxlbmd0aCk7CgogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgcmVjb3Jkcy5sZW5ndGg7IGkrKykgewogICAgICB0aWVyc1tpXVswXSA9IHJlY29yZHNbaV0uZGlzY291bnQ7CiAgICAgIHRpZXJzW2ldWzFdID0gcmVjb3Jkc1tpXS5hdmFpbGFibGU7CiAgICB9CgogICAgcmV0dXJuIHRpZXJzOwogIH0KCiAgLyoKICAgKiBHZXQgYXZhaWxhYmxlIHN1cHBseSBmb3IgZWFjaCB0aWVyIGZvciBhIGdpdmVuIHBhcnRpY2lwYW50CiAgICogQGRldiBzdGFydHMgYXQgbWluaW11bSB0aWVyIGZvciBwYXJ0aWNpcGFudCAocmVxdWlyaW5nIGF1dGgpCiAgICogQHJldHVybiBhdmFpbGFibGUgc3VwcGx5IGJ5IHRpZXIgaW5kZXgsIHplcm9lcyBmb3Igbm9uLWF1dGgKICAgKi8KICBmdW5jdGlvbiBnZXRBdmFpbGFiaWxpdHkoYWRkcmVzcyBfcGFydGljaXBhbnQpCiAgICBwdWJsaWMKICAgIHZpZXcKICAgIHJldHVybnMgKHVpbnQyNTZbXSkKICB7CiAgICB2YXIgcGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHNbX3BhcnRpY2lwYW50XTsKICAgIHVpbnQyNTYgbWluaW11bVRpZXIgPSBwYXJ0aWNpcGFudC5taW5pbXVtVGllcjsKCiAgICAvLyBtaW5vciBIQUNLIC0gaWYgdGhlIHBhcnRpY2lwYW50IGlzbid0IGF1dGhvcml6ZWQsIGp1c3Qgc2V0IHRoZQogICAgLy8gbWluaW11bSB0aWVyIGFib3ZlIHRoZSBib3VuZHMKICAgIGlmICghcGFydGljaXBhbnQuYXV0aG9yaXplZCkgewogICAgICBtaW5pbXVtVGllciA9IGRpc2NvdW50cy50aWVycy5sZW5ndGg7CiAgICB9CgogICAgdWludDI1NltdIG1lbW9yeSB0aWVycyA9IG5ldyB1aW50MjU2W10oZGlzY291bnRzLnRpZXJzLmxlbmd0aCk7CgogICAgZm9yICh1aW50MjU2IGkgPSBtaW5pbXVtVGllcjsgaSA8IHRpZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRpZXJzW2ldID0gZGlzY291bnRzLnRpZXJzW2ldLmF2YWlsYWJsZTsKICAgIH0KCiAgICByZXR1cm4gdGllcnM7CiAgfQoKCiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICogTU9ESUZJRVJTCiAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogIC8qCiAgICogQGRldiByZXF1aXJlIHBhcnRpY2lwYW50IGlzIHdoaXRlbGlzdC1hdXRob3JpemVkCiAgICovCiAgbW9kaWZpZXIgb25seUF1dGhvcml6ZWQoKSB7CiAgICByZXF1aXJlKHBhcnRpY2lwYW50c1ttc2cuc2VuZGVyXS5hdXRob3JpemVkKTsKICAgIF87CiAgfQoKICAvKgogICAqIEBkZXYgYmFzZVJhdGUgd2lsbCBkZWZhdWx0IHRvIDAKICAgKi8KICBtb2RpZmllciB3aGVuUmF0ZVNldCgpIHsKICAgIHJlcXVpcmUoZGlzY291bnRzLmJhc2VSYXRlICE9IDApOwogICAgXzsKICB9CgogIC8qCiAgICogQGRldiB0byBwcmV2ZW50IGFjY2lkZW50YWxseSBjYXBwaW5nIGF0IDAKICAgKi8KICBtb2RpZmllciB3aGVuQ2FwcGVkKCkgewogICAgcmVxdWlyZShjYXAuYW1vdW50ICE9IDApOwogICAgXzsKICB9CgogIC8qCiAgICogQGRldiBhc3NlcnRzIHplcHBlbGluIENsYWltYWJsZSB3b3JrZmxvdyBpcyBmaW5hbGl6ZWQKICAgKi8KICBtb2RpZmllciB3aGVuT3duc1Rva2VuKCkgewogICAgcmVxdWlyZSh0b2tlbi5vd25lcigpID09IGFkZHJlc3ModGhpcykpOwogICAgXzsKICB9Cn0='.
	

]
