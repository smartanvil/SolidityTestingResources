Class {
	#name : #SRT9d7fbcc17a1c9adc5b9601d871d348b5c7d3bb61,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9d7fbcc17a1c9adc5b9601d871d348b5c7d3bb61 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKiAgQ29weXJpZ2h0IDIwMTcgR29JbnRvLCBMTEMKCiAgICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICAgIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoKICAgICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCiAgICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKi8KCi8qKgogKiBTdG9yYWdlIGNvbnRyYWN0IGZvciBFdGhlcmVwIHRvIHN0b3JlIHJhdGluZ3MgYW5kIHNjb3JlIGRhdGEuICBJdCdzIGJlZW4gCiAqIHNlcGFyYXRlZCBmcm9tIHRoZSBtYWluIGNvbnRyYWN0IGJlY2F1c2UgdGhpcyBpcyBtdWNoIGxlc3MgbGlrZWx5IHRvIGNoYW5nZQogKiB0aGFuIHRoZSBvdGhlciBwYXJ0cy4gIEl0IHdvdWxkIGFsbG93IGZvciB1cGdyYWRpbmcgdGhlIG1haW4gY29udHJhY3Qgd2l0aG91dAogKiBsb3NpbmcgZGF0YS4KICovCmNvbnRyYWN0IFJhdGluZ1N0b3JlIHsKCiAgICBzdHJ1Y3QgU2NvcmUgewogICAgICAgIGJvb2wgZXhpc3RzOwogICAgICAgIGludCBjdW11bGF0aXZlU2NvcmU7CiAgICAgICAgdWludCB0b3RhbFJhdGluZ3M7CiAgICB9CgogICAgYm9vbCBpbnRlcm5hbCBkZWJ1ZzsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gU2NvcmUpIGludGVybmFsIHNjb3JlczsKICAgIC8vIFRoZSBtYW5hZ2VyIHdpdGggZnVsbCBhY2Nlc3MKICAgIGFkZHJlc3MgaW50ZXJuYWwgbWFuYWdlcjsKICAgIC8vIFRoZSBjb250cmFjdCB0aGF0IGhhcyB3cml0ZSBhY2NlZXMKICAgIGFkZHJlc3MgaW50ZXJuYWwgY29udHJvbGxlcjsKCiAgICAvLy8gRXZlbnRzCiAgICBldmVudCBEZWJ1ZyhzdHJpbmcgbWVzc2FnZSk7CgogICAgLyoqCiAgICAgKiBPbmx5IHRoZSBtYW5hZ2VyIG9yIGNvbnRyb2xsZXIgY2FuIHVzZSB0aGlzIG1ldGhvZAogICAgICovCiAgICBtb2RpZmllciByZXN0cmljdGVkKCkgeyAKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbWFuYWdlciB8fCB0eC5vcmlnaW4gPT0gbWFuYWdlciB8fCBtc2cuc2VuZGVyID09IGNvbnRyb2xsZXIpOwogICAgICAgIF87IAogICAgfQoKICAgIC8qKgogICAgICogT25seSBhIGNlcnRhaW4gYWRkcmVzcyBjYW4gdXNlIHRoaXMgbW9kaWZpZWQgbWV0aG9kCiAgICAgKiBAcGFyYW0gYnkgVGhlIGFkZHJlc3MgdGhhdCBjYW4gdXNlIHRoZSBtZXRob2QKICAgICAqLwogICAgbW9kaWZpZXIgb25seUJ5KGFkZHJlc3MgYnkpIHsgCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGJ5KTsKICAgICAgICBfOyAKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKiBAcGFyYW0gX21hbmFnZXIgVGhlIGFkZHJlc3MgdGhhdCBoYXMgZnVsbCBhY2Nlc3MgdG8gdGhlIGNvbnRyYWN0CiAgICAgKiBAcGFyYW0gX2NvbnRyb2xsZXIgVGhlIGNvbnRyYWN0IHRoYXQgY2FuIG1ha2Ugd3JpdGUgY2FsbHMgdG8gdGhpcyBjb250cmFjdAogICAgICovCiAgICBmdW5jdGlvbiBSYXRpbmdTdG9yZShhZGRyZXNzIF9tYW5hZ2VyLCBhZGRyZXNzIF9jb250cm9sbGVyKSB7CiAgICAgICAgbWFuYWdlciA9IF9tYW5hZ2VyOwogICAgICAgIGNvbnRyb2xsZXIgPSBfY29udHJvbGxlcjsKICAgICAgICBkZWJ1ZyA9IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IGEgU2NvcmUKICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIGFkZHJlc3MnIHNjb3JlIHdlJ3JlIHNldHRpbmcKICAgICAqIEBwYXJhbSBjdW11bGF0aXZlIFRoZSBjdW11bGF0aXZlIHNjb3JlIGZvciB0aGUgYWRkcmVzcwogICAgICogQHBhcmFtIHRvdGFsIFRvdGFsIGluZGl2aWR1YWwgcmF0aW5ncyBmb3IgdGhlIGFkZHJlc3MKICAgICAqIEByZXR1cm4gc3VjY2VzcyBJZiB0aGUgc2V0IHdhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5CiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldChhZGRyZXNzIHRhcmdldCwgaW50IGN1bXVsYXRpdmUsIHVpbnQgdG90YWwpIGV4dGVybmFsIHJlc3RyaWN0ZWQgewogICAgICAgIGlmICghc2NvcmVzW3RhcmdldF0uZXhpc3RzKSB7CiAgICAgICAgICAgIHNjb3Jlc1t0YXJnZXRdID0gU2NvcmUodHJ1ZSwgMCwgMCk7CiAgICAgICAgfQogICAgICAgIHNjb3Jlc1t0YXJnZXRdLmN1bXVsYXRpdmVTY29yZSA9IGN1bXVsYXRpdmU7CiAgICAgICAgc2NvcmVzW3RhcmdldF0udG90YWxSYXRpbmdzID0gdG90YWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgYSByYXRpbmcKICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIGFkZHJlc3MnIHNjb3JlIHdlJ3JlIGFkZGluZyB0bwogICAgICogQHBhcmFtIHdTY29yZSBUaGUgd2VpZ2h0ZWQgcmF0aW5nIHRvIGFkZCB0byB0aGUgc2NvcmUKICAgICAqIEByZXR1cm4gc3VjY2VzcwogICAgICovCiAgICBmdW5jdGlvbiBhZGQoYWRkcmVzcyB0YXJnZXQsIGludCB3U2NvcmUpIGV4dGVybmFsIHJlc3RyaWN0ZWQgewogICAgICAgIGlmICghc2NvcmVzW3RhcmdldF0uZXhpc3RzKSB7CiAgICAgICAgICAgIHNjb3Jlc1t0YXJnZXRdID0gU2NvcmUodHJ1ZSwgMCwgMCk7CiAgICAgICAgfQogICAgICAgIHNjb3Jlc1t0YXJnZXRdLmN1bXVsYXRpdmVTY29yZSArPSB3U2NvcmU7CiAgICAgICAgc2NvcmVzW3RhcmdldF0udG90YWxSYXRpbmdzICs9IDE7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIHNjb3JlIGZvciBhbiBhZGRyZXNzCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSBhZGRyZXNzJyBzY29yZSB0byByZXR1cm4KICAgICAqIEByZXR1cm4gY3VtdWxhdGl2ZSBzY29yZQogICAgICogQHJldHVybiB0b3RhbCByYXRpbmdzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldChhZGRyZXNzIHRhcmdldCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoaW50LCB1aW50KSB7CiAgICAgICAgaWYgKHNjb3Jlc1t0YXJnZXRdLmV4aXN0cyA9PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybiAoc2NvcmVzW3RhcmdldF0uY3VtdWxhdGl2ZVNjb3JlLCBzY29yZXNbdGFyZ2V0XS50b3RhbFJhdGluZ3MpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAoMCwwKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXNldCBhbiBlbnRpcmUgc2NvcmUgc3RvcmFnZQogICAgICogQHBhcmFtIHRhcmdldCBUaGUgYWRkcmVzcyB3ZSdyZSB3aXBpbmcgY2xlYW4KICAgICAqLwogICAgZnVuY3Rpb24gcmVzZXQoYWRkcmVzcyB0YXJnZXQpIGV4dGVybmFsIG9ubHlCeShtYW5hZ2VyKSB7CiAgICAgICAgc2NvcmVzW3RhcmdldF0gPSBTY29yZSh0cnVlLCAwLDApOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBtYW5hZ2VyCiAgICAgKiBAcmV0dXJuIGFkZHJlc3MgVGhlIG1hbmFnZXIgYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiBnZXRNYW5hZ2VyKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBtYW5hZ2VyOwogICAgfQoKICAgIC8qKgogICAgICogQ2hhbmdlIHRoZSBtYW5hZ2VyCiAgICAgKiBAcGFyYW0gbmV3TWFuYWdlciBUaGUgYWRkcmVzcyB3ZSdyZSBzZXR0aW5nIGFzIG1hbmFnZXIKICAgICAqLwogICAgZnVuY3Rpb24gc2V0TWFuYWdlcihhZGRyZXNzIG5ld01hbmFnZXIpIGV4dGVybmFsIG9ubHlCeShtYW5hZ2VyKSB7CiAgICAgICAgbWFuYWdlciA9IG5ld01hbmFnZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNvbnRyb2xsZXIKICAgICAqIEByZXR1cm4gYWRkcmVzcyBUaGUgbWFuYWdlciBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldENvbnRyb2xsZXIoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGFuZ2UgdGhlIGNvbnRyb2xsZXIKICAgICAqIEBwYXJhbSBuZXdDb250cm9sbGVyIFRoZSBhZGRyZXNzIHdlJ3JlIHNldHRpbmcgYXMgY29udHJvbGxlcgogICAgICovCiAgICBmdW5jdGlvbiBzZXRDb250cm9sbGVyKGFkZHJlc3MgbmV3Q29udHJvbGxlcikgZXh0ZXJuYWwgb25seUJ5KG1hbmFnZXIpIHsKICAgICAgICBjb250cm9sbGVyID0gbmV3Q29udHJvbGxlcjsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgZGVidWcgc2V0dGluZwogICAgICogQHJldHVybiBib29sIGRlYnVnCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldERlYnVnKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBkZWJ1ZzsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBkZWJ1ZwogICAgICogQHBhcmFtIF9kZWJ1ZyBUaGUgYm9vbCB2YWx1ZSBkZWJ1ZyBzaG91bGQgYmUgc2V0IHRvCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldERlYnVnKGJvb2wgX2RlYnVnKSBleHRlcm5hbCBvbmx5QnkobWFuYWdlcikgewogICAgICAgIGRlYnVnID0gX2RlYnVnOwogICAgfQoKfQoKLyoqIEV0aGVyZXAgLSBTaW1wbGUgRXRoZXJldW0gcmVwdXRhdGlvbiBieSBhZGRyZXNzCgogICAgQ29udHJhY3QgdGhhdCB0YWtlcyByYXRpbmdzIGFuZCBjYWxjdWxhdGVzIGEgcmVwdXRhdGlvbiBzY29yZS4gIEl0IHVzZXMgdGhlIAogICAgUmF0aW5nU3RvcmUgY29udHJhY3QgYXMgaXRzIGRhdGEgc3RvcmFnZS4KCiAgICBSYXRpbmdzIGNhbiBiZSBmcm9tIC01KHdvcnN0KSB0byA1KGJlc3QpIGFuZCBhcmUgd2VpZ2h0ZWQgYWNjb3JkaW5nIHRvIHRoZSAKICAgIHNjb3JlIG9mIHRoZSByYXRlci4gVGhpcyB3ZWlnaHQgY2FuIGhhdmUgYSBzaWduaWZpY2FudCBza2V3aW5nIHRvd2FyZHMgdGhlCiAgICBwb3NpdGl2ZSBvciBuZWdhdGl2ZSBidXQgdGhlIHJlcHJlc2VudGF0aXZlIHNjb3JlIGNhbiBub3QgYmUgYmVsb3cgLTUgb3IgCiAgICBhYm92ZSA1LiAgUmF0ZXJzIGNhbiBub3QgcmF0ZSBtb3JlIG9mdGVuIHRoYW4gd2FpdFRpbWUsIG5vciBjYW4gdGhleSByYXRlIAogICAgdGhlbXNlbHZlcy4KCiAgICBTY29yZXMgYXJlIHJldHVybmVkIGFzIGEgZmFsc2UtZmxvYXQsIHdoZXJlIDQyNSA9IDQuMjUgb24gdGhlIEV0aGVyZXAgc2NhbGUuCiAqLwpjb250cmFjdCBFdGhlcmVwIHsKCiAgICBib29sIGludGVybmFsIGRlYnVnOwogICAgYWRkcmVzcyBpbnRlcm5hbCBtYW5hZ2VyOwogICAgdWludCBpbnRlcm5hbCBmZWU7CiAgICBhZGRyZXNzIGludGVybmFsIHN0b3JhZ2VBZGRyZXNzOwogICAgdWludCBpbnRlcm5hbCB3YWl0VGltZTsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgaW50ZXJuYWwgbGFzdFJhdGluZzsKCiAgICAvLy8gRXZlbnRzCiAgICBldmVudCBFcnJvcigKICAgICAgICBhZGRyZXNzIHNlbmRlciwKICAgICAgICBzdHJpbmcgbWVzc2FnZQogICAgKTsKICAgIGV2ZW50IERlYnVnKHN0cmluZyBtZXNzYWdlKTsKICAgIGV2ZW50IERlYnVnSW50KGludCBtZXNzYWdlKTsKICAgIGV2ZW50IERlYnVnVWludCh1aW50IG1lc3NhZ2UpOwogICAgZXZlbnQgUmF0aW5nKAogICAgICAgIGFkZHJlc3MgYnksIAogICAgICAgIGFkZHJlc3Mgd2hvLCAKICAgICAgICBpbnQgcmF0aW5nCiAgICApOwogICAgZXZlbnQgRmVlQ2hhbmdlZCh1aW50IGYpOwogICAgZXZlbnQgRGVsYXlDaGFuZ2VkKHVpbnQgZCk7CgogICAgLyoqCiAgICAgKiBPbmx5IGEgY2VydGFpbiBhZGRyZXNzIGNhbiB1c2UgdGhpcyBtb2RpZmllZCBtZXRob2QKICAgICAqIEBwYXJhbSBieSBUaGUgYWRkcmVzcyB0aGF0IGNhbiB1c2UgdGhlIG1ldGhvZAogICAgICovCiAgICBtb2RpZmllciBvbmx5QnkoYWRkcmVzcyBieSkgeyAKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYnkpOwogICAgICAgIF87IAogICAgfQoKICAgIC8qKgogICAgICogRGVsYXkgcmF0aW5ncyB0byBiZSBhdCBsZWFzdCB3YWl0VGltZSBhcGFydAogICAgICovCiAgICBtb2RpZmllciBkZWxheSgpIHsKICAgICAgICBpZiAoZGVidWcgPT0gZmFsc2UgJiYgbGFzdFJhdGluZ1ttc2cuc2VuZGVyXSA+IG5vdyAtIHdhaXRUaW1lKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogUmVxdWlyZSB0aGUgbWluaW11bSBmZWUgdG8gYmUgbWV0CiAgICAgKi8KICAgIG1vZGlmaWVyIHJlcXVpcmVGZWUoKSB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gZmVlKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKiAKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKiBAcGFyYW0gX21hbmFnZXIgVGhlIGtleSB0aGF0IGNhbiBtYWtlIGNoYW5nZXMgdG8gdGhpcyBjb250cmFjdAogICAgICogQHBhcmFtIF9mZWUgVGhlIHZhcmlhYmxlIGZlZSB0aGF0IHdpbGwgYmUgY2hhcmdlZCBwZXIgcmF0aW5nCiAgICAgKiBAcGFyYW0gX3N0b3JhZ2VBZGRyZXNzIFRoZSBhZGRyZXNzIHRvIHRoZSBzdG9yYWdlIGNvbnRyYWN0CiAgICAgKiBAcGFyYW0gX3dhaXQgVGhlIG1pbmltdW0gdGltZSBpbiBzZWNvbmRzIGEgdXNlciBoYXMgdG8gd2FpdCBiZXR3ZWVuIHJhdGluZ3MKICAgICAqLwogICAgZnVuY3Rpb24gRXRoZXJlcChhZGRyZXNzIF9tYW5hZ2VyLCB1aW50IF9mZWUsIGFkZHJlc3MgX3N0b3JhZ2VBZGRyZXNzLCB1aW50IF93YWl0KSB7CiAgICAgICAgbWFuYWdlciA9IF9tYW5hZ2VyOwogICAgICAgIGZlZSA9IF9mZWU7CiAgICAgICAgc3RvcmFnZUFkZHJlc3MgPSBfc3RvcmFnZUFkZHJlc3M7CiAgICAgICAgd2FpdFRpbWUgPSBfd2FpdDsKICAgICAgICBkZWJ1ZyA9IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IGRlYnVnCiAgICAgKiBAcGFyYW0gZCBUaGUgZGVidWcgdmFsdWUgdGhhdCBzaG91bGQgYmUgc2V0CiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldERlYnVnKGJvb2wgZCkgZXh0ZXJuYWwgb25seUJ5KG1hbmFnZXIpIHsKICAgICAgICBkZWJ1ZyA9IGQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgZGVidWcKICAgICAqIEByZXR1cm4gZGVidWcKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0RGVidWcoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGRlYnVnOwogICAgfQoKICAgIC8qKgogICAgICogQ2hhbmdlIHRoZSBmZWUKICAgICAqIEBwYXJhbSBuZXdGZWUgTmV3IHJhdGluZyBmZWUgaW4gV2VpCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldEZlZSh1aW50IG5ld0ZlZSkgZXh0ZXJuYWwgb25seUJ5KG1hbmFnZXIpIHsKICAgICAgICBmZWUgPSBuZXdGZWU7CiAgICAgICAgRmVlQ2hhbmdlZChmZWUpOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBmZWUKICAgICAqIEByZXR1cm4gZmVlIFRoZSBjdXJyZW50IGZlZSBpbiBXZWkKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0RmVlKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBmZWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGFuZ2UgdGhlIHJhdGluZyBkZWxheQogICAgICogQHBhcmFtIF9kZWxheSBEZWxheSBpbiBzZWNvbmRzCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldERlbGF5KHVpbnQgX2RlbGF5KSBleHRlcm5hbCBvbmx5QnkobWFuYWdlcikgewogICAgICAgIHdhaXRUaW1lID0gX2RlbGF5OwogICAgICAgIERlbGF5Q2hhbmdlZCh3YWl0VGltZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGRlbGF5IHRpbWUKICAgICAqIEByZXR1cm4gZGVsYXkgVGhlIGN1cnJlbnQgcmF0aW5nIGRlbGF5IHRpbWUgaW4gc2Vjb25kcwogICAgICovCiAgICBmdW5jdGlvbiBnZXREZWxheSgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gd2FpdFRpbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGFuZ2UgdGhlIG1hbmFnZXIKICAgICAqIEBwYXJhbSB3aG8gVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBtYW5hZ2VyCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldE1hbmFnZXIoYWRkcmVzcyB3aG8pIGV4dGVybmFsIG9ubHlCeShtYW5hZ2VyKSB7CiAgICAgICAgbWFuYWdlciA9IHdobzsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgbWFuYWdlcgogICAgICogQHJldHVybiBtYW5hZ2VyIFRoZSBhZGRyZXNzIG9mIHRoaXMgY29udHJhY3QncyBtYW5hZ2VyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldE1hbmFnZXIoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIG1hbmFnZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBEcmFpbiBmZWVzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGRyYWluKCkgZXh0ZXJuYWwgb25seUJ5KG1hbmFnZXIpIHsKICAgICAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSA+IDApOwogICAgICAgIG1hbmFnZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KCiAgICAvKiogCiAgICAgKiBBZGRzIGEgcmF0aW5nIHRvIGFuIGFkZHJlc3MnIGN1bXVsYXRpdmUgc2NvcmUKICAgICAqIEBwYXJhbSB3aG8gVGhlIGFkZHJlc3MgdGhhdCBpcyBiZWluZyByYXRlZAogICAgICogQHBhcmFtIHJhdGluZyBUaGUgcmF0aW5nKC01IHRvIDUpCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MgSWYgdGhlIHJhdGluZyB3YXMgcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseQogICAgICovCiAgICBmdW5jdGlvbiByYXRlKGFkZHJlc3Mgd2hvLCBpbnQgcmF0aW5nKSBleHRlcm5hbCBwYXlhYmxlIGRlbGF5IHJlcXVpcmVGZWUgewoKICAgICAgICAvLyBDaGVjayByYXRpbmcgZm9yIHNhbml0eQogICAgICAgIHJlcXVpcmUocmF0aW5nIDw9IDUgJiYgcmF0aW5nID49IC01KTsKCiAgICAgICAgLy8gQSByYXRlciBjYW4gbm90IHJhdGUgaGltc2VsZgogICAgICAgIHJlcXVpcmUod2hvICE9IG1zZy5zZW5kZXIpOwoKICAgICAgICAvLyBHZXQgYW4gaW5zdGFuY2Ugb2YgdGhlIFJhdGluZ1N0b3JlIGNvbnRyYWN0CiAgICAgICAgUmF0aW5nU3RvcmUgc3RvcmUgPSBSYXRpbmdTdG9yZShzdG9yYWdlQWRkcmVzcyk7CiAgICAgICAgCiAgICAgICAgLy8gU3RhbmRhcmQgd2VpZ2h0CiAgICAgICAgaW50IHdlaWdodCA9IDA7CgogICAgICAgIC8vIENvbnZlcnQgcmF0aW5nIGludG8gYSBmYWtlLWZsb2F0CiAgICAgICAgaW50IHdvcmtSYXRpbmcgPSByYXRpbmcgKiAxMDA7CgogICAgICAgIC8vIFdlIG5lZWQgdGhlIGFic29sdXRlIHZhbHVlCiAgICAgICAgaW50IGFic1JhdGluZzsKICAgICAgICBpZiAocmF0aW5nID49IDApIHsKICAgICAgICAgICAgYWJzUmF0aW5nID0gd29ya1JhdGluZzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhYnNSYXRpbmcgPSAtd29ya1JhdGluZzsKICAgICAgICB9CgogICAgICAgIC8vIEdldCBkZXRhaWxzIG9uIHNlbmRlciBpZiBhdmFpbGFibGUKICAgICAgICBpbnQgc2VuZGVyU2NvcmU7CiAgICAgICAgdWludCBzZW5kZXJSYXRpbmdzOwogICAgICAgIGludCBzZW5kZXJDdW11bGF0aXZlID0gMDsKICAgICAgICAoc2VuZGVyU2NvcmUsIHNlbmRlclJhdGluZ3MpID0gc3RvcmUuZ2V0KG1zZy5zZW5kZXIpOwoKICAgICAgICAvLyBDYWxjdWxhdGUgY3VtdWxhdGl2ZSBzY29yZSBpZiBhdmFpbGFibGUgZm9yIHVzZSBpbiB3ZWlnaHRpbmcuIFdlJ3JlIAogICAgICAgIC8vIGFjdGluZyBhcy1pZiB0aGUgdHdvIHJpZ2h0LW1vc3QgcGxhY2VzIGFyZSBkZWNpbWFscwogICAgICAgIGlmIChzZW5kZXJTY29yZSAhPSAwKSB7CiAgICAgICAgICAgIHNlbmRlckN1bXVsYXRpdmUgPSAoc2VuZGVyU2NvcmUgLyAoaW50KHNlbmRlclJhdGluZ3MpICogMTAwKSkgKiAxMDA7CiAgICAgICAgfQoKICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIHdlaWdodCBpZiB0aGUgc2VuZGVyIGhhcyBhIHBvc2l0aXZlIHJhdGluZwogICAgICAgIGlmIChzZW5kZXJDdW11bGF0aXZlID4gMCAmJiBhYnNSYXRpbmcgIT0gMCkgewoKICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGEgd2VpZ2h0IHRvIGFkZCB0byB0aGUgZmluYWwgcmF0aW5nIGNhbGN1bGF0aW9uLiAgT25seSAKICAgICAgICAgICAgLy8gcmF0ZXJzIHdobyBoYXZlIGEgcG9zaXRpdmUgY3VtdWxhdGl2ZSBzY29yZSB3aWxsIGhhdmUgYW55IGV4dHJhIAogICAgICAgICAgICAvLyB3ZWlnaHQuICBGaW5hbCB3ZWlnaHQgc2hvdWxkIGJlIGJldHdlZW4gNDAgYW5kIDEwMCBhbmQgc2NhbGUgZG93bgogICAgICAgICAgICAvLyBkZXBlbmRpbmcgb24gaG93IHN0cm9uZyB0aGUgcmF0aW5nIGlzLgogICAgICAgICAgICB3ZWlnaHQgPSAoc2VuZGVyQ3VtdWxhdGl2ZSArIGFic1JhdGluZykgLyAxMDsKCiAgICAgICAgICAgIC8vIFdlIG5lZWQgdGhlIGZpbmFsIHdlaWdodCB0byBiZSBzaWduZWQgdGhlIHNhbWUgYXMgdGhlIHJhdGluZwogICAgICAgICAgICBpZiAocmF0aW5nIDwgMCkgewogICAgICAgICAgICAgICAgd2VpZ2h0ID0gLXdlaWdodDsKICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gQWRkIHRoZSB3ZWlnaHQgdG8gdGhlIHJhdGluZwogICAgICAgIHdvcmtSYXRpbmcgKz0gd2VpZ2h0OwoKICAgICAgICAvLyBTZXQgbGFzdCByYXRpbmcgdGltZXN0YW1wCiAgICAgICAgbGFzdFJhdGluZ1ttc2cuc2VuZGVyXSA9IG5vdzsKCiAgICAgICAgLy8gU2VuZCBldmVudCBvZiB0aGUgcmF0aW5nCiAgICAgICAgUmF0aW5nKG1zZy5zZW5kZXIsIHdobywgd29ya1JhdGluZyk7CgogICAgICAgIC8vIEFkZCB0aGUgbmV3IHJhdGluZyB0byB0aGVpciBzY29yZQogICAgICAgIHN0b3JlLmFkZCh3aG8sIHdvcmtSYXRpbmcpOwoKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGN1bXVsYXRpdmUgc2NvcmUgZm9yIGFuIGFkZHJlc3MKICAgICAqIEBwYXJhbSB3aG8gVGhlIGFkZHJlc3MgdG8gbG9va3VwCiAgICAgKiBAcmV0dXJuIHNjb3JlIFRoZSBjdW11bGF0aXZlIHNjb3JlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFNjb3JlKGFkZHJlc3Mgd2hvKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChpbnQgc2NvcmUpIHsKCiAgICAgICAgLy8gR2V0IGFuIGluc3RhbmNlIG9mIG91ciBzdG9yYWdlIGNvbnRyYWN0OiBSYXRpbmdTdG9yZQogICAgICAgIFJhdGluZ1N0b3JlIHN0b3JlID0gUmF0aW5nU3RvcmUoc3RvcmFnZUFkZHJlc3MpOwogICAgICAgIAogICAgICAgIGludCBjdW11bGF0aXZlOwogICAgICAgIHVpbnQgcmF0aW5nczsKCiAgICAgICAgLy8gR2V0IHRoZSByYXcgc2NvcmVzIGZyb20gUmF0aW5nU3RvcmUKICAgICAgICAoY3VtdWxhdGl2ZSwgcmF0aW5ncykgPSBzdG9yZS5nZXQod2hvKTsKICAgICAgICAKICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIHNjb3JlIGFzIGEgZmFsc2UtZmxvYXQgYXMgYW4gYXZlcmFnZSBvZiBhbGwgcmF0aW5ncwogICAgICAgIHNjb3JlID0gY3VtdWxhdGl2ZSAvIGludChyYXRpbmdzKTsKCiAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIGRpc3BsYXkgYSBtYXhpbXVtIG9mIDUwMCBvciBtaW5pbXVtIG9mIC01MDAsIGV2ZW4gCiAgICAgICAgLy8gaWYgaXQncyB3ZWlnaHRlZCBvdXRzaWRlIG9mIHRoYXQgcmFuZ2UKICAgICAgICBpZiAoc2NvcmUgPiA1MDApIHsKICAgICAgICAgICAgc2NvcmUgPSA1MDA7CiAgICAgICAgfSBlbHNlIGlmIChzY29yZSA8IC01MDApIHsKICAgICAgICAgICAgc2NvcmUgPSAtNTAwOwogICAgICAgIH0KCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBjdW11bGF0aXZlIHNjb3JlIGFuZCBjb3VudCBvZiByYXRpbmdzIGZvciBhbiBhZGRyZXNzCiAgICAgKiBAcGFyYW0gd2hvIFRoZSBhZGRyZXNzIHRvIGxvb2t1cAogICAgICogQHJldHVybiBzY29yZSBUaGUgY3VtdWxhdGl2ZSBzY29yZQogICAgICogQHJldHVybiBjb3VudCBIb3cgbWFueSByYXRpbmdzIGhhdmUgYmVlbiBtYWRlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFNjb3JlQW5kQ291bnQoYWRkcmVzcyB3aG8pIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGludCBzY29yZSwgdWludCByYXRpbmdzKSB7CgogICAgICAgIC8vIEdldCBhbiBpbnN0YW5jZSBvZiBvdXIgc3RvcmFnZSBjb250cmFjdDogUmF0aW5nU3RvcmUKICAgICAgICBSYXRpbmdTdG9yZSBzdG9yZSA9IFJhdGluZ1N0b3JlKHN0b3JhZ2VBZGRyZXNzKTsKICAgICAgICAKICAgICAgICBpbnQgY3VtdWxhdGl2ZTsKCiAgICAgICAgLy8gR2V0IHRoZSByYXcgc2NvcmVzIGZyb20gUmF0aW5nU3RvcmUKICAgICAgICAoY3VtdWxhdGl2ZSwgcmF0aW5ncykgPSBzdG9yZS5nZXQod2hvKTsKICAgICAgICAKICAgICAgICAvLyBUaGUgc2NvcmUgc2hvdWxkIGhhdmUgcm9vbSBmb3IgMiBkZWNpbWFsIHBsYWNlcywgYnV0IHJhdGluZ3MgaXMgYSAKICAgICAgICAvLyBzaW5nbGUgY291bnQKICAgICAgICBzY29yZSA9IGN1bXVsYXRpdmUgLyBpbnQocmF0aW5ncyk7CgogICAgfQoKfQ=='.
	

]
