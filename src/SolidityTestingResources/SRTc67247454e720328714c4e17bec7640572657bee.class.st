Class {
	#name : #SRTc67247454e720328714c4e17bec7640572657bee,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc67247454e720328714c4e17bec7640572657bee >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjsKY29udHJhY3QgRGVlZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIHByZXZpb3VzT3duZXI7Cn0KY29udHJhY3QgUmVnaXN0cnkgewogICAgZnVuY3Rpb24gb3duZXIoYnl0ZXMzMiBfaGFzaCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpOwp9CmNvbnRyYWN0IFJlZ2lzdHJhciB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihieXRlczMyIF9oYXNoLCBhZGRyZXNzIG5ld093bmVyKSBwdWJsaWM7CiAgICBmdW5jdGlvbiBlbnRyaWVzKGJ5dGVzMzIgX2hhc2gpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50LCBEZWVkLCB1aW50LCB1aW50LCB1aW50KTsKfQpjb250cmFjdCBQZXJtaXNzaW9uZWQgewogICAgbWFwcGluZyhhZGRyZXNzPT5tYXBwaW5nKGJ5dGVzMzI9PmJvb2wpKSBpbnRlcm5hbCBwZXJtaXNzaW9uczsKICAgIGJ5dGVzMzIgaW50ZXJuYWwgY29uc3RhbnQgUEVSTV9TVVBFUlVTRVIgPSBrZWNjYWsyNTYoIl9zdXBlcnVzZXIiKTsKICAgIGZ1bmN0aW9uIFBlcm1pc3Npb25lZCgpIHB1YmxpYyB7CiAgICAgICAgcGVybWlzc2lvbnNbbXNnLnNlbmRlcl1bUEVSTV9TVVBFUlVTRVJdID0gdHJ1ZTsKICAgIH0KICAgIG1vZGlmaWVyIGlmUGVybWl0dGVkKGFkZHJlc3MgYWRkciwgYnl0ZXMzMiBwZXJtaXNzaW9uKSB7CiAgICAgICAgcmVxdWlyZShwZXJtaXNzaW9uc1thZGRyXVtwZXJtaXNzaW9uXSB8fCBwZXJtaXNzaW9uc1thZGRyXVtQRVJNX1NVUEVSVVNFUl0pOwogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbiBpc1Blcm1pdHRlZChhZGRyZXNzIGFkZHIsIGJ5dGVzMzIgcGVybWlzc2lvbikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4ocGVybWlzc2lvbnNbYWRkcl1bcGVybWlzc2lvbl0gfHwgcGVybWlzc2lvbnNbYWRkcl1bUEVSTV9TVVBFUlVTRVJdKTsKICAgIH0KICAgIGZ1bmN0aW9uIHNldFBlcm1pc3Npb24oYWRkcmVzcyBhZGRyLCBieXRlczMyIHBlcm1pc3Npb24sIGJvb2wgYWxsb3dlZCkgcHVibGljIGlmUGVybWl0dGVkKG1zZy5zZW5kZXIsIFBFUk1fU1VQRVJVU0VSKSB7CiAgICAgICAgcGVybWlzc2lvbnNbYWRkcl1bcGVybWlzc2lvbl0gPSBhbGxvd2VkOwogICAgfQp9CmNvbnRyYWN0IFJlZ2lzdHJ5UmVmIHsKICAgIGZ1bmN0aW9uIG93bmVyKGJ5dGVzMzIgbm9kZSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpOwp9CmNvbnRyYWN0IFJldmVyc2VSZWdpc3RyYXJSZWYgewogICAgZnVuY3Rpb24gc2V0TmFtZShzdHJpbmcgbmFtZSkgcHVibGljIHJldHVybnMgKGJ5dGVzMzIgbm9kZSk7Cn0KY29udHJhY3QgRU5TUmV2ZXJzZVJlZ2lzdGVyIHsKICAgIGZ1bmN0aW9uIEVOU1JldmVyc2VSZWdpc3RlcihhZGRyZXNzIHJlZ2lzdHJ5LCBzdHJpbmcgbmFtZSkgcHVibGljIHsKICAgICAgICBpZiAocmVnaXN0cnkgIT0gMCkgewogICAgICAgICAgICB2YXIgcmV2ZXJzZVJlZ2lzdHJhciA9IFJlZ2lzdHJ5UmVmKHJlZ2lzdHJ5KS5vd25lcigweDkxZDE3Nzc3ODE4ODRkMDNhNjc1N2E4MDM5OTZlMzhkZTJhNDI5NjdmYjM3ZWVhY2E3MjcyOTI3MTAyNWE5ZTIpOwogICAgICAgICAgICBpZiAocmV2ZXJzZVJlZ2lzdHJhciAhPSAwKSB7CiAgICAgICAgICAgICAgICBSZXZlcnNlUmVnaXN0cmFyUmVmKHJldmVyc2VSZWdpc3RyYXIpLnNldE5hbWUobmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KY29udHJhY3QgUGF1c2FibGUgaXMgUGVybWlzc2lvbmVkIHsKICAgIGV2ZW50IFBhdXNlKCk7CiAgICBldmVudCBVbnBhdXNlKCk7CiAgICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKICAgIGJ5dGVzMzIgaW50ZXJuYWwgY29uc3RhbnQgUEVSTV9QQVVTRSA9IGtlY2NhazI1NigiX3BhdXNhYmxlIik7CiAgICBtb2RpZmllciBpZk5vdFBhdXNlZCgpIHsKICAgICAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgICAgIF87CiAgICB9CiAgICBtb2RpZmllciBpZlBhdXNlZCB7CiAgICAgICAgcmVxdWlyZShwYXVzZWQpOwogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbiBwYXVzZSgpIHB1YmxpYyBpZlBlcm1pdHRlZChtc2cuc2VuZGVyLCBQRVJNX1BBVVNFKSBpZk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcGF1c2VkID0gdHJ1ZTsKICAgICAgICBQYXVzZSgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZnVuY3Rpb24gdW5wYXVzZSgpIHB1YmxpYyBpZlBlcm1pdHRlZChtc2cuc2VuZGVyLCBQRVJNX1BBVVNFKSBpZlBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcGF1c2VkID0gZmFsc2U7CiAgICAgICAgVW5wYXVzZSgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CmxpYnJhcnkgU2FmZU1hdGggewogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIHJldHVybiBjOwogICAgfQogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KY29udHJhY3QgRG9tYWluU2FsZSBpcyBFTlNSZXZlcnNlUmVnaXN0ZXIsIFBhdXNhYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgUmVnaXN0cmFyIHB1YmxpYyByZWdpc3RyYXI7CiAgICBtYXBwaW5nIChzdHJpbmcgPT4gU2FsZSkgcHJpdmF0ZSBzYWxlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBiYWxhbmNlczsKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBBVUNUSU9OX0RVUkFUSU9OID0gMjQgaG91cnM7CiAgICB1aW50MjU2IHByaXZhdGUgY29uc3RhbnQgSElHSF9CSURfS0lDS0lOID0gNyBkYXlzOwogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IE5PUk1BTF9CSURfSU5DUkVBU0VfUEVSQ0VOVEFHRSA9IDEwOwogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IEhJR0hfQklEX0lOQ1JFQVNFX1BFUkNFTlRBR0UgPSA1MDsKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBTRUxMRVJfU0FMRV9QRVJDRU5UQUdFID0gOTA7CiAgICB1aW50MjU2IHByaXZhdGUgY29uc3RhbnQgU1RBUlRfUkVGRVJSRVJfU0FMRV9QRVJDRU5UQUdFID0gNTsKICAgIHVpbnQyNTYgcHJpdmF0ZSBjb25zdGFudCBCSURfUkVGRVJSRVJfU0FMRV9QRVJDRU5UQUdFID0gNTsKICAgIHN0cmluZyBwcml2YXRlIGNvbnN0YW50IENPTlRSQUNUX0VOUyA9ICJkb21haW5zYWxlLmV0aCI7CiAgICBieXRlczMyIHByaXZhdGUgY29uc3RhbnQgTkFNRUhBU0hfRVRIID0gMHg5M2NkZWI3MDhiNzU0NWRjNjY4ZWI5MjgwMTc2MTY5ZDFjMzNjZmQ4ZWQ2ZjA0NjkwYTBiY2M4OGE5M2ZjNGFlOwogICAgc3RydWN0IFNhbGUgewogICAgICAgIHVpbnQyNTYgcHJpY2U7CiAgICAgICAgdWludDI1NiByZXNlcnZlOwogICAgICAgIHVpbnQyNTYgbGFzdEJpZDsKICAgICAgICBhZGRyZXNzIGxhc3RCaWRkZXI7CiAgICAgICAgdWludDI1NiBhdWN0aW9uU3RhcnRlZDsKICAgICAgICB1aW50MjU2IGF1Y3Rpb25FbmRzOwogICAgICAgIGFkZHJlc3Mgc3RhcnRSZWZlcnJlcjsKICAgICAgICBhZGRyZXNzIGJpZFJlZmVycmVyOwogICAgfQogICAgZXZlbnQgT2ZmZXIoYWRkcmVzcyBpbmRleGVkIHNlbGxlciwgc3RyaW5nIG5hbWUsIHVpbnQyNTYgcHJpY2UsIHVpbnQyNTYgcmVzZXJ2ZSk7CiAgICBldmVudCBCaWQoYWRkcmVzcyBpbmRleGVkIGJpZGRlciwgc3RyaW5nIG5hbWUsIHVpbnQyNTYgYmlkKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBzZWxsZXIsIGFkZHJlc3MgaW5kZXhlZCBidXllciwgc3RyaW5nIG5hbWUsIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQ2FuY2VsKHN0cmluZyBuYW1lKTsKICAgIGV2ZW50IFdpdGhkcmF3KGFkZHJlc3MgaW5kZXhlZCByZWNpcGllbnQsIHVpbnQyNTYgYW1vdW50KTsKICAgIG1vZGlmaWVyIG9ubHlOYW1lU2VsbGVyKHN0cmluZyBfbmFtZSkgewogICAgICAgIERlZWQgZGVlZDsKICAgICAgICAoLGRlZWQsLCwpID0gcmVnaXN0cmFyLmVudHJpZXMoa2VjY2FrMjU2KF9uYW1lKSk7CiAgICAgICAgcmVxdWlyZShkZWVkLm93bmVyKCkgPT0gYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgcmVxdWlyZShkZWVkLnByZXZpb3VzT3duZXIoKSA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBfOwogICAgfQogICAgbW9kaWZpZXIgZGVlZFZhbGlkKHN0cmluZyBfbmFtZSkgewogICAgICAgIGFkZHJlc3MgZGVlZDsKICAgICAgICAoLGRlZWQsLCwpID0gcmVnaXN0cmFyLmVudHJpZXMoa2VjY2FrMjU2KF9uYW1lKSk7CiAgICAgICAgcmVxdWlyZShkZWVkICE9IDApOwogICAgICAgIF87CiAgICB9CiAgICBtb2RpZmllciBhdWN0aW9uTm90U3RhcnRlZChzdHJpbmcgX25hbWUpIHsKICAgICAgICByZXF1aXJlKHNhbGVzW19uYW1lXS5hdWN0aW9uU3RhcnRlZCA9PSAwKTsKICAgICAgICBfOwogICAgfQogICAgbW9kaWZpZXIgY2FuQmlkKHN0cmluZyBfbmFtZSkgewogICAgICAgIHJlcXVpcmUoc2FsZXNbX25hbWVdLnJlc2VydmUgIT0gMCk7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIGNhbkJ1eShzdHJpbmcgX25hbWUpIHsKICAgICAgICByZXF1aXJlKHNhbGVzW19uYW1lXS5wcmljZSAhPSAwKTsKICAgICAgICBfOwogICAgfQogICAgZnVuY3Rpb24gRG9tYWluU2FsZShhZGRyZXNzIF9yZWdpc3RyeSkgcHVibGljIEVOU1JldmVyc2VSZWdpc3RlcihfcmVnaXN0cnksIENPTlRSQUNUX0VOUykgewogICAgICAgIHJlZ2lzdHJhciA9IFJlZ2lzdHJhcihSZWdpc3RyeShfcmVnaXN0cnkpLm93bmVyKE5BTUVIQVNIX0VUSCkpOwogICAgfQogICAgZnVuY3Rpb24gc2FsZShzdHJpbmcgX25hbWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2LCB1aW50MjU2LCB1aW50MjU2LCBhZGRyZXNzLCB1aW50MjU2LCB1aW50MjU2KSB7CiAgICAgICAgU2FsZSBzdG9yYWdlIHMgPSBzYWxlc1tfbmFtZV07CiAgICAgICAgcmV0dXJuIChzLnByaWNlLCBzLnJlc2VydmUsIHMubGFzdEJpZCwgcy5sYXN0QmlkZGVyLCBzLmF1Y3Rpb25TdGFydGVkLCBzLmF1Y3Rpb25FbmRzKTsKICAgIH0KICAgIGZ1bmN0aW9uIGlzQXVjdGlvbihzdHJpbmcgX25hbWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHNhbGVzW19uYW1lXS5yZXNlcnZlICE9IDA7CiAgICB9CiAgICBmdW5jdGlvbiBpc0J1eWFibGUoc3RyaW5nIF9uYW1lKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzYWxlc1tfbmFtZV0ucHJpY2UgIT0gMCAmJiBzYWxlc1tfbmFtZV0uYXVjdGlvblN0YXJ0ZWQgPT0gMDsKICAgIH0KICAgIGZ1bmN0aW9uIGF1Y3Rpb25TdGFydGVkKHN0cmluZyBfbmFtZSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc2FsZXNbX25hbWVdLmxhc3RCaWQgIT0gMDsKICAgIH0KICAgIGZ1bmN0aW9uIGF1Y3Rpb25FbmRzKHN0cmluZyBfbmFtZSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gc2FsZXNbX25hbWVdLmF1Y3Rpb25FbmRzOwogICAgfQogICAgZnVuY3Rpb24gbWluaW11bUJpZChzdHJpbmcgX25hbWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgU2FsZSBzdG9yYWdlIHMgPSBzYWxlc1tfbmFtZV07CiAgICAgICAgaWYgKHMuYXVjdGlvblN0YXJ0ZWQgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gcy5yZXNlcnZlOwogICAgICAgIH0gZWxzZSBpZiAocy5hdWN0aW9uU3RhcnRlZC5hZGQoSElHSF9CSURfS0lDS0lOKSA+IG5vdykgewogICAgICAgICAgICByZXR1cm4gcy5sYXN0QmlkLmFkZChzLmxhc3RCaWQubXVsKE5PUk1BTF9CSURfSU5DUkVBU0VfUEVSQ0VOVEFHRSkuZGl2KDEwMCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBzLmxhc3RCaWQuYWRkKHMubGFzdEJpZC5tdWwoSElHSF9CSURfSU5DUkVBU0VfUEVSQ0VOVEFHRSkuZGl2KDEwMCkpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHByaWNlKHN0cmluZyBfbmFtZSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gc2FsZXNbX25hbWVdLnByaWNlOwogICAgfQogICAgZnVuY3Rpb24gYmFsYW5jZShhZGRyZXNzIGFkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW2FkZHJdOwogICAgfQogICAgZnVuY3Rpb24gb2ZmZXIoc3RyaW5nIF9uYW1lLCB1aW50MjU2IF9wcmljZSwgdWludDI1NiByZXNlcnZlLCBhZGRyZXNzIHJlZmVycmVyKSBvbmx5TmFtZVNlbGxlcihfbmFtZSkgYXVjdGlvbk5vdFN0YXJ0ZWQoX25hbWUpIGRlZWRWYWxpZChfbmFtZSkgaWZOb3RQYXVzZWQgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9wcmljZSA9PSAwIHx8IF9wcmljZSA+IHJlc2VydmUpOwogICAgICAgIHJlcXVpcmUoX3ByaWNlICE9IDAgfHwgcmVzZXJ2ZSAhPSAwKTsKICAgICAgICBTYWxlIHN0b3JhZ2UgcyA9IHNhbGVzW19uYW1lXTsKICAgICAgICBzLnJlc2VydmUgPSByZXNlcnZlOwogICAgICAgIHMucHJpY2UgPSBfcHJpY2U7CiAgICAgICAgcy5zdGFydFJlZmVycmVyID0gcmVmZXJyZXI7CiAgICAgICAgT2ZmZXIobXNnLnNlbmRlciwgX25hbWUsIF9wcmljZSwgcmVzZXJ2ZSk7CiAgICB9CiAgICBmdW5jdGlvbiBjYW5jZWwoc3RyaW5nIF9uYW1lKSBvbmx5TmFtZVNlbGxlcihfbmFtZSkgYXVjdGlvbk5vdFN0YXJ0ZWQoX25hbWUpIGRlZWRWYWxpZChfbmFtZSkgaWZOb3RQYXVzZWQgcHVibGljIHsKICAgICAgICBkZWxldGUgc2FsZXNbX25hbWVdOwogICAgICAgIHJlZ2lzdHJhci50cmFuc2ZlcihrZWNjYWsyNTYoX25hbWUpLCBtc2cuc2VuZGVyKTsKICAgICAgICBDYW5jZWwoX25hbWUpOwogICAgfQogICAgZnVuY3Rpb24gYnV5KHN0cmluZyBfbmFtZSwgYWRkcmVzcyBiaWRSZWZlcnJlcikgY2FuQnV5KF9uYW1lKSBkZWVkVmFsaWQoX25hbWUpIGlmTm90UGF1c2VkIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBTYWxlIHN0b3JhZ2UgcyA9IHNhbGVzW19uYW1lXTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBzLnByaWNlKTsKICAgICAgICByZXF1aXJlKHMuYXVjdGlvblN0YXJ0ZWQgPT0gMCk7CiAgICAgICAgRGVlZCBkZWVkOwogICAgICAgICgsZGVlZCwsLCkgPSByZWdpc3RyYXIuZW50cmllcyhrZWNjYWsyNTYoX25hbWUpKTsKICAgICAgICBhZGRyZXNzIHByZXZpb3VzT3duZXIgPSBkZWVkLnByZXZpb3VzT3duZXIoKTsKICAgICAgICByZWdpc3RyYXIudHJhbnNmZXIoa2VjY2FrMjU2KF9uYW1lKSwgbXNnLnNlbmRlcik7CiAgICAgICAgVHJhbnNmZXIocHJldmlvdXNPd25lciwgbXNnLnNlbmRlciwgX25hbWUsIG1zZy52YWx1ZSk7CiAgICAgICAgZGlzdHJpYnV0ZUZ1bmRzKG1zZy52YWx1ZSwgcHJldmlvdXNPd25lciwgcy5zdGFydFJlZmVycmVyLCBiaWRSZWZlcnJlcik7CiAgICAgICAgZGVsZXRlIHNhbGVzW19uYW1lXTsKICAgICAgICB3aXRoZHJhdygpOwogICAgfQogICAgZnVuY3Rpb24gYmlkKHN0cmluZyBfbmFtZSwgYWRkcmVzcyBiaWRSZWZlcnJlcikgY2FuQmlkKF9uYW1lKSBkZWVkVmFsaWQoX25hbWUpIGlmTm90UGF1c2VkIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBtaW5pbXVtQmlkKF9uYW1lKSk7CiAgICAgICAgU2FsZSBzdG9yYWdlIHMgPSBzYWxlc1tfbmFtZV07CiAgICAgICAgcmVxdWlyZShzLmF1Y3Rpb25TdGFydGVkID09IDAgfHwgbm93IDwgcy5hdWN0aW9uRW5kcyk7CiAgICAgICAgaWYgKHMuYXVjdGlvblN0YXJ0ZWQgPT0gMCkgewogICAgICAgICAgcy5hdWN0aW9uU3RhcnRlZCA9IG5vdzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYmFsYW5jZXNbcy5sYXN0QmlkZGVyXSA9IGJhbGFuY2VzW3MubGFzdEJpZGRlcl0uYWRkKHMubGFzdEJpZCk7CiAgICAgICAgfQogICAgICAgIHMubGFzdEJpZGRlciA9IG1zZy5zZW5kZXI7CiAgICAgICAgcy5sYXN0QmlkID0gbXNnLnZhbHVlOwogICAgICAgIHMuYXVjdGlvbkVuZHMgPSBub3cuYWRkKEFVQ1RJT05fRFVSQVRJT04pOwogICAgICAgIHMuYmlkUmVmZXJyZXIgPSBiaWRSZWZlcnJlcjsKICAgICAgICBCaWQobXNnLnNlbmRlciwgX25hbWUsIG1zZy52YWx1ZSk7CiAgICAgICAgd2l0aGRyYXcoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGZpbmlzaChzdHJpbmcgX25hbWUpIGRlZWRWYWxpZChfbmFtZSkgaWZOb3RQYXVzZWQgcHVibGljIHsKICAgICAgICBTYWxlIHN0b3JhZ2UgcyA9IHNhbGVzW19uYW1lXTsKICAgICAgICByZXF1aXJlKG5vdyA+IHMuYXVjdGlvbkVuZHMpOwogICAgICAgIERlZWQgZGVlZDsKICAgICAgICAoLGRlZWQsLCwpID0gcmVnaXN0cmFyLmVudHJpZXMoa2VjY2FrMjU2KF9uYW1lKSk7CiAgICAgICAgYWRkcmVzcyBwcmV2aW91c093bmVyID0gZGVlZC5wcmV2aW91c093bmVyKCk7CiAgICAgICAgcmVnaXN0cmFyLnRyYW5zZmVyKGtlY2NhazI1NihfbmFtZSksIHMubGFzdEJpZGRlcik7CiAgICAgICAgVHJhbnNmZXIocHJldmlvdXNPd25lciwgcy5sYXN0QmlkZGVyLCBfbmFtZSwgcy5sYXN0QmlkKTsKICAgICAgICBkaXN0cmlidXRlRnVuZHMocy5sYXN0QmlkLCBwcmV2aW91c093bmVyLCBzLnN0YXJ0UmVmZXJyZXIsIHMuYmlkUmVmZXJyZXIpOwogICAgICAgIGRlbGV0ZSBzYWxlc1tfbmFtZV07CiAgICAgICAgd2l0aGRyYXcoKTsKICAgIH0KICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgaWZOb3RQYXVzZWQgcHVibGljIHsKICAgICAgICB1aW50MjU2IGFtb3VudCA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwogICAgICAgIGlmIChhbW91bnQgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQpOwogICAgICAgICAgICBXaXRoZHJhdyhtc2cuc2VuZGVyLCBhbW91bnQpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGludmFsaWRhdGUoc3RyaW5nIF9uYW1lKSBpZk5vdFBhdXNlZCBwdWJsaWMgewogICAgICAgIGFkZHJlc3MgZGVlZDsKICAgICAgICAoLGRlZWQsLCwpID0gcmVnaXN0cmFyLmVudHJpZXMoa2VjY2FrMjU2KF9uYW1lKSk7CiAgICAgICAgcmVxdWlyZShkZWVkID09IDApOwogICAgICAgIFNhbGUgc3RvcmFnZSBzID0gc2FsZXNbX25hbWVdOwogICAgICAgIGJhbGFuY2VzW3MubGFzdEJpZGRlcl0gPSBiYWxhbmNlc1tzLmxhc3RCaWRkZXJdLmFkZChzLmxhc3RCaWQpOwogICAgICAgIGRlbGV0ZSBzYWxlc1tfbmFtZV07CiAgICAgICAgQ2FuY2VsKF9uYW1lKTsKICAgICAgICB3aXRoZHJhdygpOwogICAgfQogICAgZnVuY3Rpb24gZGlzdHJpYnV0ZUZ1bmRzKHVpbnQyNTYgYW1vdW50LCBhZGRyZXNzIHNlbGxlciwgYWRkcmVzcyBzdGFydFJlZmVycmVyLCBhZGRyZXNzIGJpZFJlZmVycmVyKSBpbnRlcm5hbCB7CiAgICAgICAgdWludDI1NiBzdGFydFJlZmVycmVyRnVuZHMgPSBhbW91bnQubXVsKFNUQVJUX1JFRkVSUkVSX1NBTEVfUEVSQ0VOVEFHRSkuZGl2KDEwMCk7CiAgICAgICAgYmFsYW5jZXNbc3RhcnRSZWZlcnJlcl0gPSBiYWxhbmNlc1tzdGFydFJlZmVycmVyXS5hZGQoc3RhcnRSZWZlcnJlckZ1bmRzKTsKICAgICAgICB1aW50MjU2IGJpZFJlZmVycmVyRnVuZHMgPSBhbW91bnQubXVsKEJJRF9SRUZFUlJFUl9TQUxFX1BFUkNFTlRBR0UpLmRpdigxMDApOwogICAgICAgIGJhbGFuY2VzW2JpZFJlZmVycmVyXSA9IGJhbGFuY2VzW2JpZFJlZmVycmVyXS5hZGQoYmlkUmVmZXJyZXJGdW5kcyk7CiAgICAgICAgdWludDI1NiBzZWxsZXJGdW5kcyA9IGFtb3VudC5zdWIoc3RhcnRSZWZlcnJlckZ1bmRzKS5zdWIoYmlkUmVmZXJyZXJGdW5kcyk7CiAgICAgICAgYmFsYW5jZXNbc2VsbGVyXSA9IGJhbGFuY2VzW3NlbGxlcl0uYWRkKHNlbGxlckZ1bmRzKTsKICAgIH0KfQ=='.
	

]
