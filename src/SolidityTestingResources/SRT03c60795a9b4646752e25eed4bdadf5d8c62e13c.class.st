Class {
	#name : #SRT03c60795a9b4646752e25eed4bdadf5d8c62e13c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT03c60795a9b4646752e25eed4bdadf5d8c62e13c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIEVSQzcyMSBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL2VpcHMvaXNzdWVzLzcyMQogKi8KY29udHJhY3QgRVJDNzIxIHsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfYXBwcm92ZWQsIHVpbnQyNTYgX3Rva2VuSWQpOwoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2JhbGFuY2UpOwogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljOwp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CiAgCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8qKgogKiBAdGl0bGUgRVJDNzIxVG9rZW4KICogR2VuZXJpYyBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIHJlcXVpcmVkIGZ1bmN0aW9uYWxpdHkgb2YgdGhlIEVSQzcyMSBzdGFuZGFyZAogKi8KY29udHJhY3QgQ3J5cHRvQ29sb3JzIGlzIEVSQzcyMSwgT3duYWJsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIC8vIFRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICB1aW50MjU2IHByaXZhdGUgdG90YWxUb2tlbnM7CiAgdWludDI1NltdIHByaXZhdGUgbGlzdGVkQ3J5cHRvQ29sb3JzOwogIHVpbnQyNTYgcHVibGljIGRldk93ZWQ7CiAgdWludDI1NiBwdWJsaWMgcG9vbFRvdGFsOwogIHVpbnQyNTYgcHVibGljIGxhc3RQdXJjaGFzZTsKCiAgLy8gQ3J5cHRvQ29sb3IgRGF0YQogIG1hcHBpbmcgKHVpbnQyNTYgPT4gQ3J5cHRvQ29sb3IpIHB1YmxpYyBjcnlwdG9Db2xvckRhdGE7CgogIC8vIE1hcHBpbmcgZnJvbSB0b2tlbiBJRCB0byBvd25lcgogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHJpdmF0ZSB0b2tlbk93bmVyOwoKICAvLyBNYXBwaW5nIGZyb20gdG9rZW4gSUQgdG8gYXBwcm92ZWQgYWRkcmVzcwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHJpdmF0ZSB0b2tlbkFwcHJvdmFsczsKCiAgLy8gTWFwcGluZyBmcm9tIG93bmVyIHRvIGxpc3Qgb2Ygb3duZWQgdG9rZW4gSURzCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2W10pIHByaXZhdGUgb3duZWRUb2tlbnM7CgogIC8vIE1hcHBpbmcgZnJvbSB0b2tlbiBJRCB0byBpbmRleCBvZiB0aGUgb3duZXIgdG9rZW5zIGxpc3QKICBtYXBwaW5nKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSBvd25lZFRva2Vuc0luZGV4OwoKICAvLyBCYWxhbmNlcyBmcm9tICUgcGF5b3V0cy4KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgcGF5b3V0QmFsYW5jZXM7IAoKICAvLyBFdmVudHMKICBldmVudCBUb2tlblNvbGQodWludDI1NiBpbmRleGVkIF90b2tlbklkLCBhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50MjU2IF9wdXJjaGFzZVByaWNlLCB1aW50MjU2IF9wcmljZSwgYWRkcmVzcyBpbmRleGVkIF9wcmV2T3duZXIpOwoKICAvLyBQdXJjaGFzaW5nIENhcHMgZm9yIERldGVybWluaW5nIE5leHQgUG9vbCBDdXQKICB1aW50MjU2IHByaXZhdGUgZmlyc3RDYXAgID0gMC41IGV0aGVyOwogIHVpbnQyNTYgcHJpdmF0ZSBzZWNvbmRDYXAgPSAxLjAgZXRoZXI7CiAgdWludDI1NiBwcml2YXRlIHRoaXJkQ2FwICA9IDMuMCBldGhlcjsKICB1aW50MjU2IHByaXZhdGUgZmluYWxDYXAgID0gNS4wIGV0aGVyOwoKICAvLyBTdHJ1Y3QgdG8gc3RvcmUgQ3J5cHRvQ29sb3IgRGF0YQogIHN0cnVjdCBDcnlwdG9Db2xvciB7CiAgICAgIHVpbnQyNTYgc3RhcnRpbmdQcmljZTsgLy8gUHJpY2UgdGhlIGl0ZW0gc3RhcnRlZCBhdC4KICAgICAgdWludDI1NiBwcmljZTsgICAgICAgICAvLyBDdXJyZW50IHByaWNlIG9mIHRoZSBpdGVtLgogICAgICB1aW50MjU2IGxhc3RQcmljZTsgICAgIC8vIGxhc3RQcmljZSB0aGlzIHdhcyBzb2xkIGZvciwgdXNlZCBmb3IgYWRkaW5nIHRvIHBvb2wuCiAgICAgIHVpbnQyNTYgcGF5b3V0OyAgICAgICAgLy8gVGhlIHBlcmNlbnQgb2YgdGhlIHBvb2wgcmV3YXJkZWQuCiAgICAgIHVpbnQyNTYgd2l0aGRyYXduOyAgICAgLy8gVGhlIGFtb3VudCBvZiBFdGggdGhpcyBDcnlwdG9Db2xvciBoYXMgd2l0aGRyYXduIGZyb20gdGhlIHBvb2wuCiAgICAgIGFkZHJlc3Mgb3duZXI7ICAgICAgICAgLy8gQ3VycmVudCBvd25lciBvZiB0aGUgaXRlbS4KICB9CgogIC8qKgogICogQGRldiBjcmVhdGVDb250cmFjdFRva2VuIEFkZHMgbmV3IEVSQzcyMSBUb2tlbgogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgbmV3IHRva2VuCiAgKiBAcGFyYW0gX3N0YXJ0aW5nUHJpY2UgdWludDI1NiBzdGFydGluZyBwcmljZSBpbiB3ZWkKICAqIEBwYXJhbSBfcGF5b3V0UGVyY2VudGFnZSB1aW50MjU2IHBheW91dCBwZXJjZW50YWdlIChkaXZpc2libGUgYnkgMTApCiAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3Mgb2YgbmV3IG93bmVyCiAgKi8KICBmdW5jdGlvbiBjcmVhdGVDb250cmFjdFRva2VuKHVpbnQyNTYgX3Rva2VuSWQsIHVpbnQyNTYgX3N0YXJ0aW5nUHJpY2UsIHVpbnQyNTYgX3BheW91dFBlcmNlbnRhZ2UsIGFkZHJlc3MgX293bmVyKSBvbmx5T3duZXIoKSBwdWJsaWMgewoKICAgIC8vIG1ha2Ugc3VyZSBwcmljZSA+IDAKICAgIHJlcXVpcmUoX3N0YXJ0aW5nUHJpY2UgPiAwKTsKICAgIC8vIG1ha2Ugc3VyZSB0b2tlbiBoYXNuJ3QgYmVlbiB1c2VkIHlldAogICAgcmVxdWlyZShjcnlwdG9Db2xvckRhdGFbX3Rva2VuSWRdLnByaWNlID09IDApOwogICAgCiAgICAvLyBjcmVhdGUgbmV3IHRva2VuCiAgICBDcnlwdG9Db2xvciBzdG9yYWdlIG5ld0NyeXB0b0NvbG9yID0gY3J5cHRvQ29sb3JEYXRhW190b2tlbklkXTsKCiAgICBuZXdDcnlwdG9Db2xvci5vd25lciA9IF9vd25lcjsKICAgIG5ld0NyeXB0b0NvbG9yLnByaWNlID0gZ2V0TmV4dFByaWNlKF9zdGFydGluZ1ByaWNlKTsKICAgIG5ld0NyeXB0b0NvbG9yLmxhc3RQcmljZSA9IF9zdGFydGluZ1ByaWNlOwogICAgbmV3Q3J5cHRvQ29sb3IucGF5b3V0ID0gX3BheW91dFBlcmNlbnRhZ2U7CiAgICBuZXdDcnlwdG9Db2xvci5zdGFydGluZ1ByaWNlID0gX3N0YXJ0aW5nUHJpY2U7CgogICAgLy8gc3RvcmUgY3J5cHRvQ29sb3IgaW4gc3RvcmFnZQogICAgbGlzdGVkQ3J5cHRvQ29sb3JzLnB1c2goX3Rva2VuSWQpOwogICAgCiAgICAvLyBtaW50IG5ldyB0b2tlbgogICAgX21pbnQoX293bmVyLCBfdG9rZW5JZCk7CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVNdWx0aXBsZSAodWludDI1NltdIF9pdGVtSWRzLCB1aW50MjU2W10gX3ByaWNlcywgdWludDI1NltdIF9wYXlvdXRzLCBhZGRyZXNzW10gX293bmVycykgb25seU93bmVyKCkgZXh0ZXJuYWwgewogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX2l0ZW1JZHMubGVuZ3RoOyBpKyspIHsKICAgICAgY3JlYXRlQ29udHJhY3RUb2tlbihfaXRlbUlkc1tpXSwgX3ByaWNlc1tpXSwgX3BheW91dHNbaV0sIF9vd25lcnNbaV0pOwogICAgfQogIH0KCiAgLyoqCiAgKiBAZGV2IERldGVybWluZXMgbmV4dCBwcmljZSBvZiB0b2tlbgogICogQHBhcmFtIF9wcmljZSB1aW50MjU2IElEIG9mIGN1cnJlbnQgcHJpY2UKICAqLwogIGZ1bmN0aW9uIGdldE5leHRQcmljZSAodWludDI1NiBfcHJpY2UpIHByaXZhdGUgdmlldyByZXR1cm5zICh1aW50MjU2IF9uZXh0UHJpY2UpIHsKICAgIGlmIChfcHJpY2UgPCBmaXJzdENhcCkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgyMDApLmRpdigxMDApOwogICAgfSBlbHNlIGlmIChfcHJpY2UgPCBzZWNvbmRDYXApIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTM1KS5kaXYoMTAwKTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgdGhpcmRDYXApIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTI1KS5kaXYoMTAwKTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgZmluYWxDYXApIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTE3KS5kaXYoMTAwKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDExNSkuZGl2KDEwMCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjYWxjdWxhdGVQb29sQ3V0ICh1aW50MjU2IF9wcmljZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfcG9vbEN1dCkgewogICAgaWYgKF9wcmljZSA8IGZpcnN0Q2FwKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDEwKS5kaXYoMTAwKTsgLy8gNSUKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgc2Vjb25kQ2FwKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDkpLmRpdigxMDApOyAvLyA0JQogICAgfSBlbHNlIGlmIChfcHJpY2UgPCB0aGlyZENhcCkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCg4KS5kaXYoMTAwKTsgLy8gMyUKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgZmluYWxDYXApIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoNykuZGl2KDEwMCk7IC8vIDMlCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX3ByaWNlLm11bCg1KS5kaXYoMTAwKTsgLy8gMiUKICAgIH0KICB9CgogIC8qKgogICogQGRldiBQdXJjaGFzZSBDcnlwdG9Db2xvciBmcm9tIHByZXZpb3VzIG93bmVyCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBvZiB0b2tlbgogICovCiAgZnVuY3Rpb24gcHVyY2hhc2UodWludDI1NiBfdG9rZW5JZCkgcHVibGljIAogICAgcGF5YWJsZQogICAgaXNOb3RDb250cmFjdChtc2cuc2VuZGVyKQogIHsKCiAgICAvLyBnZXQgZGF0YSBmcm9tIHN0b3JhZ2UKICAgIENyeXB0b0NvbG9yIHN0b3JhZ2UgY3J5cHRvQ29sb3IgPSBjcnlwdG9Db2xvckRhdGFbX3Rva2VuSWRdOwogICAgdWludDI1NiBwcmljZSA9IGNyeXB0b0NvbG9yLnByaWNlOwogICAgYWRkcmVzcyBvbGRPd25lciA9IGNyeXB0b0NvbG9yLm93bmVyOwogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICB1aW50MjU2IGV4Y2VzcyA9IG1zZy52YWx1ZS5zdWIocHJpY2UpOwoKICAgIC8vIHJldmVydCBjaGVja3MKICAgIHJlcXVpcmUocHJpY2UgPiAwKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByaWNlKTsKICAgIHJlcXVpcmUob2xkT3duZXIgIT0gbXNnLnNlbmRlcik7CgogICAgLy8gQ2FsY3VsYXRlIHBvb2wgY3V0IGZvciBkaXZpZGVudHMuCiAgICB1aW50MjU2IHByb2ZpdCA9IHByaWNlLnN1YihjcnlwdG9Db2xvci5sYXN0UHJpY2UpOwogICAgdWludDI1NiBwb29sQ3V0ID0gY2FsY3VsYXRlUG9vbEN1dChwcm9maXQpOwogICAgcG9vbFRvdGFsICs9IHBvb2xDdXQ7CiAgICAKICAgIC8vJSBnb2VzIHRvIGRldmVsb3BlcnMKICAgIHVpbnQyNTYgZGV2Q3V0ID0gcHJpY2UubXVsKDUpLmRpdigxMDApOwogICAgZGV2T3dlZCA9IGRldk93ZWQuYWRkKGRldkN1dCk7CgogICAgdHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfdG9rZW5JZCk7CgogICAgLy8gc2V0IG5ldyBwcmljZXMKICAgIGNyeXB0b0NvbG9yLmxhc3RQcmljZSA9IHByaWNlOwogICAgY3J5cHRvQ29sb3IucHJpY2UgPSBnZXROZXh0UHJpY2UocHJpY2UpOwoKICAgIC8vIHJhaXNlIGV2ZW50CiAgICBUb2tlblNvbGQoX3Rva2VuSWQsIG5ld093bmVyLCBwcmljZSwgY3J5cHRvQ29sb3IucHJpY2UsIG9sZE93bmVyKTsKCiAgICAvLyBUcmFuc2ZlciBwYXltZW50IHRvIG9sZCBvd25lciBtaW51cyB0aGUgZGV2ZWxvcGVyJ3MgYW5kIHBvb2wncyBjdXQuCiAgICBvbGRPd25lci50cmFuc2ZlcihwcmljZS5zdWIoZGV2Q3V0LmFkZChwb29sQ3V0KSkpOwoKICAgIC8vIFNlbmQgcmVmdW5kIHRvIG93bmVyIGlmIG5lZWRlZAogICAgaWYgKGV4Y2VzcyA+IDApIHsKICAgICAgbmV3T3duZXIudHJhbnNmZXIoZXhjZXNzKTsKICAgIH0KICAgIAogICAgLy8gU2V0IGxhc3QgcHVyY2hhc2UgcHJpY2UgdG8gc3RvcmFnZQogICAgbGFzdFB1cmNoYXNlID0gbm93OwoKICB9CgogIC8qKgogICogQGRldiBUcmFuc2ZlciBDcnlwdG9Db2xvciBmcm9tIFByZXZpb3VzIE93bmVyIHRvIE5ldyBPd25lcgogICogQHBhcmFtIF9mcm9tIHByZXZpb3VzIG93bmVyIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gbmV3IG93bmVyIGFkZHJlc3MKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRva2VuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewoKICAgIC8vIGNoZWNrIHRva2VuIGV4aXN0cwogICAgcmVxdWlyZSh0b2tlbkV4aXN0cyhfdG9rZW5JZCkpOwoKICAgIC8vIG1ha2Ugc3VyZSBwcmV2aW91cyBvd25lciBpcyBjb3JyZWN0CiAgICByZXF1aXJlKGNyeXB0b0NvbG9yRGF0YVtfdG9rZW5JZF0ub3duZXIgPT0gX2Zyb20pOwoKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcyh0aGlzKSk7CgogICAgLy8gcGF5IGFueSB1bnBhaWQgcGF5b3V0cyB0byBwcmV2aW91cyBvd25lciBvZiBjcnlwdG9Db2xvcgogICAgdXBkYXRlU2luZ2xlUGF5b3V0KF9mcm9tLCBfdG9rZW5JZCk7CgogICAgLy8gY2xlYXIgYXBwcm92YWxzIGxpbmtlZCB0byB0aGlzIHRva2VuCiAgICBjbGVhckFwcHJvdmFsKF9mcm9tLCBfdG9rZW5JZCk7CgogICAgLy8gcmVtb3ZlIHRva2VuIGZyb20gcHJldmlvdXMgb3duZXIKICAgIHJlbW92ZVRva2VuKF9mcm9tLCBfdG9rZW5JZCk7CgogICAgLy8gdXBkYXRlIG93bmVyIGFuZCBhZGQgdG9rZW4gdG8gbmV3IG93bmVyCiAgICBjcnlwdG9Db2xvckRhdGFbX3Rva2VuSWRdLm93bmVyID0gX3RvOwogICAgYWRkVG9rZW4oX3RvLCBfdG9rZW5JZCk7CgogICAvL3JhaXNlIGV2ZW50CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAqIEBkZXYgV2l0aGRyYXcgZGV2J3MgY3V0CiAgKi8KICBmdW5jdGlvbiB3aXRoZHJhdygpIG9ubHlPd25lciBwdWJsaWMgewogICAgb3duZXIudHJhbnNmZXIoZGV2T3dlZCk7CiAgICBkZXZPd2VkID0gMDsKICB9CgogIC8qKgogICogQGRldiBVcGRhdGVzIHRoZSBwYXlvdXQgZm9yIHRoZSBjcnlwdG9Db2xvcnMgdGhlIG93bmVyIGhhcwogICogQHBhcmFtIF9vd25lciBhZGRyZXNzIG9mIHRva2VuIG93bmVyCiAgKi8KICBmdW5jdGlvbiB1cGRhdGVQYXlvdXQoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB7CiAgICB1aW50MjU2W10gbWVtb3J5IGNyeXB0b0NvbG9ycyA9IG93bmVkVG9rZW5zW19vd25lcl07CiAgICB1aW50MjU2IG93ZWQ7CiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBjcnlwdG9Db2xvcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICB1aW50MjU2IHRvdGFsY3J5cHRvQ29sb3JPd2VkID0gcG9vbFRvdGFsICogY3J5cHRvQ29sb3JEYXRhW2NyeXB0b0NvbG9yc1tpXV0ucGF5b3V0IC8gMTAwMDA7CiAgICAgICAgdWludDI1NiBjcnlwdG9Db2xvck93ZWQgPSB0b3RhbGNyeXB0b0NvbG9yT3dlZC5zdWIoY3J5cHRvQ29sb3JEYXRhW2NyeXB0b0NvbG9yc1tpXV0ud2l0aGRyYXduKTsKICAgICAgICBvd2VkICs9IGNyeXB0b0NvbG9yT3dlZDsKICAgICAgICAKICAgICAgICBjcnlwdG9Db2xvckRhdGFbY3J5cHRvQ29sb3JzW2ldXS53aXRoZHJhd24gKz0gY3J5cHRvQ29sb3JPd2VkOwogICAgfQogICAgcGF5b3V0QmFsYW5jZXNbX293bmVyXSArPSBvd2VkOwogIH0KCiAgLyoqCiAgICogQGRldiBVcGRhdGUgYSBzaW5nbGUgY3J5cHRvQ29sb3IgcGF5b3V0IGZvciB0cmFuc2ZlcnMuCiAgICogQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRoZSBvd25lciBvZiB0aGUgY3J5cHRvQ29sb3IuCiAgICogQHBhcmFtIF9pdGVtSWQgVW5pcXVlIElkIG9mIHRoZSB0b2tlbi4KICAqKi8KICBmdW5jdGlvbiB1cGRhdGVTaW5nbGVQYXlvdXQoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX2l0ZW1JZCkgaW50ZXJuYWwgewogICAgdWludDI1NiB0b3RhbGNyeXB0b0NvbG9yT3dlZCA9IHBvb2xUb3RhbCAqIGNyeXB0b0NvbG9yRGF0YVtfaXRlbUlkXS5wYXlvdXQgLyAxMDAwMDsKICAgIHVpbnQyNTYgY3J5cHRvQ29sb3JPd2VkID0gdG90YWxjcnlwdG9Db2xvck93ZWQuc3ViKGNyeXB0b0NvbG9yRGF0YVtfaXRlbUlkXS53aXRoZHJhd24pOwogICAgICAgIAogICAgY3J5cHRvQ29sb3JEYXRhW19pdGVtSWRdLndpdGhkcmF3biArPSBjcnlwdG9Db2xvck93ZWQ7CiAgICBwYXlvdXRCYWxhbmNlc1tfb3duZXJdICs9IGNyeXB0b0NvbG9yT3dlZDsKICB9CgogIC8qKgogICogQGRldiBPd25lciBjYW4gd2l0aGRyYXcgdGhlaXIgYWNjdW11bGF0ZWQgcGF5b3V0cwogICogQHBhcmFtIF9vd25lciBhZGRyZXNzIG9mIHRva2VuIG93bmVyCiAgKi8KICBmdW5jdGlvbiB3aXRoZHJhd1JlbnQoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgdXBkYXRlUGF5b3V0KF9vd25lcik7CiAgICAgIHVpbnQyNTYgcGF5b3V0ID0gcGF5b3V0QmFsYW5jZXNbX293bmVyXTsKICAgICAgcGF5b3V0QmFsYW5jZXNbX293bmVyXSA9IDA7CiAgICAgIF9vd25lci50cmFuc2ZlcihwYXlvdXQpOwogIH0KCiAgZnVuY3Rpb24gZ2V0UmVudE93ZWQoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgb3dlZCkgewogICAgdXBkYXRlUGF5b3V0KF9vd25lcik7CiAgICByZXR1cm4gcGF5b3V0QmFsYW5jZXNbX293bmVyXTsKICB9CgogIC8qKgogICogQGRldiBSZXR1cm4gYWxsIGNyeXB0b0NvbG9yIGRhdGEKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IG9mIHRva2VuCiAgKi8KICBmdW5jdGlvbiBnZXRUb2tlbiAodWludDI1NiBfdG9rZW5JZCkgZXh0ZXJuYWwgdmlldyAKICByZXR1cm5zIChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfc3RhcnRpbmdQcmljZSwgdWludDI1NiBfcHJpY2UsIHVpbnQyNTYgX25leHRQcmljZSwgdWludDI1NiBfcGF5b3V0LCB1aW50MjU2IF9pZCkgCiAgewogICAgQ3J5cHRvQ29sb3IgbWVtb3J5IGNyeXB0b0NvbG9yID0gY3J5cHRvQ29sb3JEYXRhW190b2tlbklkXTsKICAgIHJldHVybiAoY3J5cHRvQ29sb3Iub3duZXIsIGNyeXB0b0NvbG9yLnN0YXJ0aW5nUHJpY2UsIGNyeXB0b0NvbG9yLnByaWNlLCBnZXROZXh0UHJpY2UoY3J5cHRvQ29sb3IucHJpY2UpLCBjcnlwdG9Db2xvci5wYXlvdXQsIF90b2tlbklkKTsKICB9CgogIC8qKgogICogQGRldiBEZXRlcm1pbmVzIGlmIHRva2VuIGV4aXN0cyBieSBjaGVja2luZyBpdCdzIHByaWNlCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0b2tlbgogICovCiAgZnVuY3Rpb24gdG9rZW5FeGlzdHMgKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wgX2V4aXN0cykgewogICAgcmV0dXJuIGNyeXB0b0NvbG9yRGF0YVtfdG9rZW5JZF0ucHJpY2UgPiAwOwogIH0KCiAgLyoqCiAgKiBAZGV2IEd1YXJhbnRlZXMgbXNnLnNlbmRlciBpcyBvd25lciBvZiB0aGUgZ2l2ZW4gdG9rZW4KICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byB2YWxpZGF0ZSBpdHMgb3duZXJzaGlwIGJlbG9uZ3MgdG8gbXNnLnNlbmRlcgogICovCiAgbW9kaWZpZXIgb25seU93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgewogICAgcmVxdWlyZShvd25lck9mKF90b2tlbklkKSA9PSBtc2cuc2VuZGVyKTsKICAgIF87CiAgfQoKICAvKioKICAqIEBkZXYgR3VhcmFudGVlcyBtc2cuc2VuZGVyIGlzIG5vdCBhIGNvbnRyYWN0CiAgKiBAcGFyYW0gX2J1eWVyIGFkZHJlc3Mgb2YgcGVyc29uIGJ1eWluZyBjcnlwdG9Db2xvcgogICovCiAgbW9kaWZpZXIgaXNOb3RDb250cmFjdChhZGRyZXNzIF9idXllcikgewogICAgdWludCBzaXplOwogICAgYXNzZW1ibHkgeyBzaXplIDo9IGV4dGNvZGVzaXplKF9idXllcikgfQogICAgcmVxdWlyZShzaXplID09IDApOwogICAgXzsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSB0b3RhbCBhbW91bnQgb2YgdG9rZW5zIHN0b3JlZCBieSB0aGUgY29udHJhY3QKICAqIEByZXR1cm4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAqLwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHRvdGFsVG9rZW5zOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgdG8gcXVlcnkgdGhlIGJhbGFuY2Ugb2YKICAqIEByZXR1cm4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MKICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIG93bmVkVG9rZW5zW19vd25lcl0ubGVuZ3RoOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGxpc3Qgb2YgdG9rZW5zIG93bmVkIGJ5IGEgZ2l2ZW4gYWRkcmVzcwogICogQHBhcmFtIF9vd25lciBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0b2tlbnMgb2YKICAqIEByZXR1cm4gdWludDI1NltdIHJlcHJlc2VudGluZyB0aGUgbGlzdCBvZiB0b2tlbnMgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzCiAgKi8KICBmdW5jdGlvbiB0b2tlbnNPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NltdKSB7CiAgICByZXR1cm4gb3duZWRUb2tlbnNbX293bmVyXTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBvd25lciBvZiB0aGUgc3BlY2lmaWVkIHRva2VuIElECiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gcXVlcnkgdGhlIG93bmVyIG9mCiAgKiBAcmV0dXJuIG93bmVyIGFkZHJlc3MgY3VycmVudGx5IG1hcmtlZCBhcyB0aGUgb3duZXIgb2YgdGhlIGdpdmVuIHRva2VuIElECiAgKi8KICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MpIHsKICAgIGFkZHJlc3Mgb3duZXIgPSB0b2tlbk93bmVyW190b2tlbklkXTsKICAgIHJlcXVpcmUob3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICByZXR1cm4gb3duZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IEdldHMgdGhlIGFwcHJvdmVkIGFkZHJlc3MgdG8gdGFrZSBvd25lcnNoaXAgb2YgYSBnaXZlbiB0b2tlbiBJRAogICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBxdWVyeSB0aGUgYXBwcm92YWwgb2YKICAgKiBAcmV0dXJuIGFkZHJlc3MgY3VycmVudGx5IGFwcHJvdmVkIHRvIHRha2Ugb3duZXJzaGlwIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmVkRm9yKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MpIHsKICAgIHJldHVybiB0b2tlbkFwcHJvdmFsc1tfdG9rZW5JZF07CiAgfQoKICAvKioKICAqIEBkZXYgVHJhbnNmZXJzIHRoZSBvd25lcnNoaXAgb2YgYSBnaXZlbiB0b2tlbiBJRCB0byBhbm90aGVyIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gYWRkcmVzcyB0byByZWNlaXZlIHRoZSBvd25lcnNoaXAgb2YgdGhlIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgb25seU93bmVyT2YoX3Rva2VuSWQpIHsKICAgIGNsZWFyQXBwcm92YWxBbmRUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICB9CgogIC8qKgogICogQGRldiBBcHByb3ZlcyBhbm90aGVyIGFkZHJlc3MgdG8gY2xhaW0gZm9yIHRoZSBvd25lcnNoaXAgb2YgdGhlIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gYmUgYXBwcm92ZWQgZm9yIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIGFwcHJvdmVkCiAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgb25seU93bmVyT2YoX3Rva2VuSWQpIHsKICAgIGFkZHJlc3Mgb3duZXIgPSBvd25lck9mKF90b2tlbklkKTsKICAgIHJlcXVpcmUoX3RvICE9IG93bmVyKTsKICAgIGlmIChhcHByb3ZlZEZvcihfdG9rZW5JZCkgIT0gMCB8fCBfdG8gIT0gMCkgewogICAgICB0b2tlbkFwcHJvdmFsc1tfdG9rZW5JZF0gPSBfdG87CiAgICAgIEFwcHJvdmFsKG93bmVyLCBfdG8sIF90b2tlbklkKTsKICAgIH0KICB9CgogIC8qKgogICogQGRldiBDbGFpbXMgdGhlIG93bmVyc2hpcCBvZiBhIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gYmVpbmcgY2xhaW1lZCBieSB0aGUgbXNnLnNlbmRlcgogICovCiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgcmVxdWlyZShpc0FwcHJvdmVkRm9yKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICBjbGVhckFwcHJvdmFsQW5kVHJhbnNmZXIob3duZXJPZihfdG9rZW5JZCksIG1zZy5zZW5kZXIsIF90b2tlbklkKTsKICB9CgogIC8qKgogICAqIEBkZXYgVGVsbHMgd2hldGhlciB0aGUgbXNnLnNlbmRlciBpcyBhcHByb3ZlZCBmb3IgdGhlIGdpdmVuIHRva2VuIElEIG9yIG5vdAogICAqIFRoaXMgZnVuY3Rpb24gaXMgbm90IHByaXZhdGUgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGluIGZ1cnRoZXIgaW1wbGVtZW50YXRpb25zIGxpa2UgdGhlIG9wZXJhdGFibGUgRVJDNzIxCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIG9mIHRoZSBvd25lciB0byBxdWVyeSB0aGUgYXBwcm92YWwgb2YKICAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gcXVlcnkgdGhlIGFwcHJvdmFsIG9mCiAgICogQHJldHVybiBib29sIHdoZXRoZXIgdGhlIG1zZy5zZW5kZXIgaXMgYXBwcm92ZWQgZm9yIHRoZSBnaXZlbiB0b2tlbiBJRCBvciBub3QKICAgKi8KICBmdW5jdGlvbiBpc0FwcHJvdmVkRm9yKGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBhcHByb3ZlZEZvcihfdG9rZW5JZCkgPT0gX293bmVyOwogIH0KICAKICAvKioKICAqIEBkZXYgSW50ZXJuYWwgZnVuY3Rpb24gdG8gY2xlYXIgY3VycmVudCBhcHByb3ZhbCBhbmQgdHJhbnNmZXIgdGhlIG93bmVyc2hpcCBvZiBhIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgKiBAcGFyYW0gX3RvIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdGhlIHRva2VuIHRvCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAqLwogIGZ1bmN0aW9uIGNsZWFyQXBwcm92YWxBbmRUcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgaXNOb3RDb250cmFjdChfdG8pIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdG8gIT0gb3duZXJPZihfdG9rZW5JZCkpOwogICAgcmVxdWlyZShvd25lck9mKF90b2tlbklkKSA9PSBfZnJvbSk7CgogICAgY2xlYXJBcHByb3ZhbChfZnJvbSwgX3Rva2VuSWQpOwogICAgdXBkYXRlU2luZ2xlUGF5b3V0KF9mcm9tLCBfdG9rZW5JZCk7CiAgICByZW1vdmVUb2tlbihfZnJvbSwgX3Rva2VuSWQpOwogICAgYWRkVG9rZW4oX3RvLCBfdG9rZW5JZCk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZXJuYWwgZnVuY3Rpb24gdG8gY2xlYXIgY3VycmVudCBhcHByb3ZhbCBvZiBhIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAqLwogIGZ1bmN0aW9uIGNsZWFyQXBwcm92YWwoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgewogICAgcmVxdWlyZShvd25lck9mKF90b2tlbklkKSA9PSBfb3duZXIpOwogICAgdG9rZW5BcHByb3ZhbHNbX3Rva2VuSWRdID0gMDsKICAgIEFwcHJvdmFsKF9vd25lciwgMCwgX3Rva2VuSWQpOwogIH0KCgogICAgLyoqCiAgKiBAZGV2IE1pbnQgdG9rZW4gZnVuY3Rpb24KICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIG93biB0aGUgbWludGVkIHRva2VuCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgbWludGVkIGJ5IHRoZSBtc2cuc2VuZGVyCiAgKi8KICBmdW5jdGlvbiBfbWludChhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICBhZGRUb2tlbihfdG8sIF90b2tlbklkKTsKICAgIFRyYW5zZmVyKDB4MCwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZXJuYWwgZnVuY3Rpb24gdG8gYWRkIGEgdG9rZW4gSUQgdG8gdGhlIGxpc3Qgb2YgYSBnaXZlbiBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgcmVwcmVzZW50aW5nIHRoZSBuZXcgb3duZXIgb2YgdGhlIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgYWRkZWQgdG8gdGhlIHRva2VucyBsaXN0IG9mIHRoZSBnaXZlbiBhZGRyZXNzCiAgKi8KICBmdW5jdGlvbiBhZGRUb2tlbihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICByZXF1aXJlKHRva2VuT3duZXJbX3Rva2VuSWRdID09IGFkZHJlc3MoMCkpOwogICAgdG9rZW5Pd25lcltfdG9rZW5JZF0gPSBfdG87CiAgICBjcnlwdG9Db2xvckRhdGFbX3Rva2VuSWRdLm93bmVyID0gX3RvOwogICAgdWludDI1NiBsZW5ndGggPSBiYWxhbmNlT2YoX3RvKTsKICAgIG93bmVkVG9rZW5zW190b10ucHVzaChfdG9rZW5JZCk7CiAgICBvd25lZFRva2Vuc0luZGV4W190b2tlbklkXSA9IGxlbmd0aDsKICAgIHRvdGFsVG9rZW5zID0gdG90YWxUb2tlbnMuYWRkKDEpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIHJlbW92ZSBhIHRva2VuIElEIGZyb20gdGhlIGxpc3Qgb2YgYSBnaXZlbiBhZGRyZXNzCiAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyByZXByZXNlbnRpbmcgdGhlIHByZXZpb3VzIG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHJlbW92ZWQgZnJvbSB0aGUgdG9rZW5zIGxpc3Qgb2YgdGhlIGdpdmVuIGFkZHJlc3MKICAqLwogIGZ1bmN0aW9uIHJlbW92ZVRva2VuKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgewogICAgcmVxdWlyZShvd25lck9mKF90b2tlbklkKSA9PSBfZnJvbSk7CgogICAgdWludDI1NiB0b2tlbkluZGV4ID0gb3duZWRUb2tlbnNJbmRleFtfdG9rZW5JZF07CiAgICB1aW50MjU2IGxhc3RUb2tlbkluZGV4ID0gYmFsYW5jZU9mKF9mcm9tKS5zdWIoMSk7CiAgICB1aW50MjU2IGxhc3RUb2tlbiA9IG93bmVkVG9rZW5zW19mcm9tXVtsYXN0VG9rZW5JbmRleF07CgogICAgdG9rZW5Pd25lcltfdG9rZW5JZF0gPSAwOwogICAgb3duZWRUb2tlbnNbX2Zyb21dW3Rva2VuSW5kZXhdID0gbGFzdFRva2VuOwogICAgb3duZWRUb2tlbnNbX2Zyb21dW2xhc3RUb2tlbkluZGV4XSA9IDA7CiAgICAvLyBOb3RlIHRoYXQgdGhpcyB3aWxsIGhhbmRsZSBzaW5nbGUtZWxlbWVudCBhcnJheXMuIEluIHRoYXQgY2FzZSwgYm90aCB0b2tlbkluZGV4IGFuZCBsYXN0VG9rZW5JbmRleCBhcmUgZ29pbmcgdG8KICAgIC8vIGJlIHplcm8uIFRoZW4gd2UgY2FuIG1ha2Ugc3VyZSB0aGF0IHdlIHdpbGwgcmVtb3ZlIF90b2tlbklkIGZyb20gdGhlIG93bmVkVG9rZW5zIGxpc3Qgc2luY2Ugd2UgYXJlIGZpcnN0IHN3YXBwaW5nCiAgICAvLyB0aGUgbGFzdFRva2VuIHRvIHRoZSBmaXJzdCBwb3NpdGlvbiwgYW5kIHRoZW4gZHJvcHBpbmcgdGhlIGVsZW1lbnQgcGxhY2VkIGluIHRoZSBsYXN0IHBvc2l0aW9uIG9mIHRoZSBsaXN0CgogICAgb3duZWRUb2tlbnNbX2Zyb21dLmxlbmd0aC0tOwogICAgb3duZWRUb2tlbnNJbmRleFtfdG9rZW5JZF0gPSAwOwogICAgb3duZWRUb2tlbnNJbmRleFtsYXN0VG9rZW5dID0gdG9rZW5JbmRleDsKICAgIHRvdGFsVG9rZW5zID0gdG90YWxUb2tlbnMuc3ViKDEpOwogIH0KCiAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZyBfbmFtZSkgewogICAgcmV0dXJuICJDcnlwdG9Db2xvciI7CiAgfQoKICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcgX3N5bWJvbCkgewogICAgcmV0dXJuICJDQ0xSIjsKICB9Cn0='.
	

]
