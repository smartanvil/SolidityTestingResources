Class {
	#name : #SRTc0f29cdf021e0900ab6ad8d5c4cd86268d5eb715,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc0f29cdf021e0900ab6ad8d5c4cd86268d5eb715 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8vIEBhZGRyZXNzIDB4NDA1NWNlNzAwMzUyNWM5NjZiZWZmNDBjZmU2ZjA0YWI0YzBkZDgyZgovLyBUaGUgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBHYW1lIElDTyBzbWFydCBjb250cmFjdCB3YXMgaW5zcGlyZWQgYnkKLy8gdGhlIEV0aGVyZXVtIHRva2VuIGNyZWF0aW9uIHR1dG9yaWFsLCB0aGUgRmlyc3RCbG9vZCB0b2tlbiwgYW5kIHRoZSBCQVQgdG9rZW4uCgovLy8vLy8vLy8vLy8vLy8KLy8gU0FGRSBNQVRIIC8vCi8vLy8vLy8vLy8vLy8vLwoKY29udHJhY3QgU2FmZU1hdGggewoKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludDI1NiB4LCB1aW50MjU2IHkpIGludGVybmFsIHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgeiA9IHggKyB5OwogICAgICAgIHJlcXVpcmUoKHogPj0geCkgJiYgKHogPj0geSkpOwogICAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVTdWJ0cmFjdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmVxdWlyZSh4ID49IHkpOwogICAgICAgIHVpbnQyNTYgeiA9IHggLSB5OwogICAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVNdWx0KHVpbnQyNTYgeCwgdWludDI1NiB5KSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHogPSB4ICogeTsKICAgICAgICByZXF1aXJlKCh4ID09IDApfHwoei94ID09IHkpKTsKICAgICAgICByZXR1cm4gejsKICAgIH0KCn0KCgovLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBTVEFOREFSRCBUT0tFTiAvLwovLy8vLy8vLy8vLy8vLy8vLy8vLwoKY29udHJhY3QgVG9rZW4gewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKLyogIEVSQyAyMCB0b2tlbiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgYm9vbCBhbGxvd1RyYW5zZmVyID0gZmFsc2U7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDAgJiYgYWxsb3dUcmFuc2ZlcikgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDAgJiYgYWxsb3dUcmFuc2ZlcikgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQp9CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy9HQU1FLkNPTSBJQ08gVE9LRU4vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8KCmNvbnRyYWN0IEdhbWVJQ08gaXMgU3RhbmRhcmRUb2tlbiwgU2FmZU1hdGggewogICAgLy8gRGVzY3JpcHRpdmUgcHJvcGVydGllcwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkdhbWUuY29tIFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkdUQyI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gIjEuMCI7CgogICAgLy8gQWNjb3VudCBmb3IgZXRoZXIgcHJvY2VlZC4KICAgIGFkZHJlc3MgcHVibGljIGV0aGVyUHJvY2VlZHNBY2NvdW50ID0gMHgwOwogICAgYWRkcmVzcyBwdWJsaWMgbXVsdGlXYWxsZXQgPSAweDA7CgogICAgLy8gVGhlc2UgcGFyYW1zIHNwZWNpZnkgdGhlIHN0YXJ0LCBlbmQsIG1pbiwgYW5kIG1heCBvZiB0aGUgc2FsZS4KICAgIGJvb2wgcHVibGljIGlzRmluYWxpemVkOwoKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzBUb3RhbFN1cHBseSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cxVG90YWxTdXBwbHkgPSAwOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93MlRvdGFsU3VwcGx5ID0gMDsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzNUb3RhbFN1cHBseSA9IDA7CgogICAgdWludDI1NiBwdWJsaWMgd2luZG93MFN0YXJ0VGltZSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cwRW5kVGltZSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cxU3RhcnRUaW1lID0gMDsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzFFbmRUaW1lID0gMDsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzJTdGFydFRpbWUgPSAwOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93MkVuZFRpbWUgPSAwOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93M1N0YXJ0VGltZSA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3czRW5kVGltZSA9IDA7CgogICAgLy8gc2V0dGluZyB0aGUgY2FwYWNpdHkgb2YgZXZlcnkgcGFydCBvZiBpY28KICAgIHVpbnQyNTYgcHVibGljIHByZXNlcnZlZFRva2VucyA9IDEzMDAwMDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cwVG9rZW5DcmVhdGlvbkNhcCA9IDIwMDAwMDAwMCAqIDEwKipkZWNpbWFsczsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzFUb2tlbkNyZWF0aW9uQ2FwID0gMjAwMDAwMDAwICogMTAqKmRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93MlRva2VuQ3JlYXRpb25DYXAgPSAzMDAwMDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3czVG9rZW5DcmVhdGlvbkNhcCA9IDAgKiAxMCoqZGVjaW1hbHM7CgogICAgLy8gU2V0dGluZyB0aGUgZXhjaGFuZ2UgcmF0ZSBmb3IgdGhlIElDTy4KICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzBUb2tlbkV4Y2hhbmdlUmF0ZSA9IDUwMDA7CiAgICB1aW50MjU2IHB1YmxpYyB3aW5kb3cxVG9rZW5FeGNoYW5nZVJhdGUgPSA0MDAwOwogICAgdWludDI1NiBwdWJsaWMgd2luZG93MlRva2VuRXhjaGFuZ2VSYXRlID0gMzAwMDsKICAgIHVpbnQyNTYgcHVibGljIHdpbmRvdzNUb2tlbkV4Y2hhbmdlUmF0ZSA9IDA7CgogICAgdWludDI1NiBwdWJsaWMgcHJlSUNPTGltaXQgPSAwOwogICAgYm9vbCBwdWJsaWMgaW5zdGFudFRyYW5zZmVyID0gZmFsc2U7CgogICAgLy8gRXZlbnRzIGZvciBsb2dnaW5nIHJlZnVuZHMgYW5kIHRva2VuIGNyZWF0aW9uLgogICAgZXZlbnQgQ3JlYXRlR2FtZUljbyhhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBQcmVJQ09Ub2tlblB1c2hlZChhZGRyZXNzIGluZGV4ZWQgX2J1eWVyLCB1aW50MjU2IF9hbW91bnQpOwoKICAgIC8vIGNvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBHYW1lSUNPKCkKICAgIHsKICAgICAgICB0b3RhbFN1cHBseSAgICAgICAgICAgICA9IDIwMDAwMDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgICAgICAgaXNGaW5hbGl6ZWQgICAgICAgICAgICAgPSBmYWxzZTsKICAgICAgICBldGhlclByb2NlZWRzQWNjb3VudCAgICA9IG1zZy5zZW5kZXI7CiAgICB9CiAgICBmdW5jdGlvbiBhZGp1c3RUaW1lKAogICAgdWludDI1NiBfd2luZG93MFN0YXJ0VGltZSwgdWludDI1NiBfd2luZG93MEVuZFRpbWUsCiAgICB1aW50MjU2IF93aW5kb3cxU3RhcnRUaW1lLCB1aW50MjU2IF93aW5kb3cxRW5kVGltZSwKICAgIHVpbnQyNTYgX3dpbmRvdzJTdGFydFRpbWUsIHVpbnQyNTYgX3dpbmRvdzJFbmRUaW1lKQogICAgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBldGhlclByb2NlZWRzQWNjb3VudCk7CiAgICAgICAgd2luZG93MFN0YXJ0VGltZSA9IF93aW5kb3cwU3RhcnRUaW1lOwogICAgICAgIHdpbmRvdzBFbmRUaW1lID0gX3dpbmRvdzBFbmRUaW1lOwogICAgICAgIHdpbmRvdzFTdGFydFRpbWUgPSBfd2luZG93MVN0YXJ0VGltZTsKICAgICAgICB3aW5kb3cxRW5kVGltZSA9IF93aW5kb3cxRW5kVGltZTsKICAgICAgICB3aW5kb3cyU3RhcnRUaW1lID0gX3dpbmRvdzJTdGFydFRpbWU7CiAgICAgICAgd2luZG93MkVuZFRpbWUgPSBfd2luZG93MkVuZFRpbWU7CiAgICB9CiAgICBmdW5jdGlvbiBhZGp1c3RTdXBwbHkodWludDI1NiBfd2luZG93MFRvdGFsU3VwcGx5LCB1aW50MjU2IF93aW5kb3cxVG90YWxTdXBwbHksIHVpbnQyNTYgX3dpbmRvdzJUb3RhbFN1cHBseSl7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKICAgICAgICB3aW5kb3cwVG90YWxTdXBwbHkgPSBfd2luZG93MFRvdGFsU3VwcGx5ICogMTAqKmRlY2ltYWxzOwogICAgICAgIHdpbmRvdzFUb3RhbFN1cHBseSA9IF93aW5kb3cxVG90YWxTdXBwbHkgKiAxMCoqZGVjaW1hbHM7CiAgICAgICAgd2luZG93MlRvdGFsU3VwcGx5ID0gX3dpbmRvdzJUb3RhbFN1cHBseSAqIDEwKipkZWNpbWFsczsKICAgIH0KICAgIGZ1bmN0aW9uIGFkanVzdENhcCh1aW50MjU2IF9wcmVzZXJ2ZWRUb2tlbnMsIHVpbnQyNTYgX3dpbmRvdzBUb2tlbkNyZWF0aW9uQ2FwLCB1aW50MjU2IF93aW5kb3cxVG9rZW5DcmVhdGlvbkNhcCwgdWludDI1NiBfd2luZG93MlRva2VuQ3JlYXRpb25DYXApewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBldGhlclByb2NlZWRzQWNjb3VudCk7CiAgICAgICAgcHJlc2VydmVkVG9rZW5zID0gX3ByZXNlcnZlZFRva2VucyAqIDEwKipkZWNpbWFsczsKICAgICAgICB3aW5kb3cwVG9rZW5DcmVhdGlvbkNhcCA9IF93aW5kb3cwVG9rZW5DcmVhdGlvbkNhcCAqIDEwKipkZWNpbWFsczsKICAgICAgICB3aW5kb3cxVG9rZW5DcmVhdGlvbkNhcCA9IF93aW5kb3cxVG9rZW5DcmVhdGlvbkNhcCAqIDEwKipkZWNpbWFsczsKICAgICAgICB3aW5kb3cyVG9rZW5DcmVhdGlvbkNhcCA9IF93aW5kb3cyVG9rZW5DcmVhdGlvbkNhcCAqIDEwKipkZWNpbWFsczsKICAgIH0KICAgIGZ1bmN0aW9uIGFkanVzdFJhdGUodWludDI1NiBfd2luZG93MFRva2VuRXhjaGFuZ2VSYXRlLCB1aW50MjU2IF93aW5kb3cxVG9rZW5FeGNoYW5nZVJhdGUsIHVpbnQyNTYgX3dpbmRvdzJUb2tlbkV4Y2hhbmdlUmF0ZSl7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKICAgICAgICB3aW5kb3cwVG9rZW5FeGNoYW5nZVJhdGUgPSBfd2luZG93MFRva2VuRXhjaGFuZ2VSYXRlOwogICAgICAgIHdpbmRvdzFUb2tlbkV4Y2hhbmdlUmF0ZSA9IF93aW5kb3cxVG9rZW5FeGNoYW5nZVJhdGU7CiAgICAgICAgd2luZG93MlRva2VuRXhjaGFuZ2VSYXRlID0gX3dpbmRvdzJUb2tlbkV4Y2hhbmdlUmF0ZTsKICAgIH0KICAgIGZ1bmN0aW9uIHNldFByb2NlZWRzQWNjb3VudChhZGRyZXNzIF9uZXdFdGhlclByb2NlZWRzQWNjb3VudCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBldGhlclByb2NlZWRzQWNjb3VudCk7CiAgICAgICAgZXRoZXJQcm9jZWVkc0FjY291bnQgPSBfbmV3RXRoZXJQcm9jZWVkc0FjY291bnQ7CiAgICB9CiAgICBmdW5jdGlvbiBzZXRNdWx0aVdhbGxldChhZGRyZXNzIF9uZXdXYWxsZXQpewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBldGhlclByb2NlZWRzQWNjb3VudCk7CiAgICAgICAgbXVsdGlXYWxsZXQgPSBfbmV3V2FsbGV0OwogICAgfQogICAgZnVuY3Rpb24gc2V0UHJlSUNPTGltaXQodWludDI1NiBfcHJlSUNPTGltaXQpewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBldGhlclByb2NlZWRzQWNjb3VudCk7CiAgICAgICAgcHJlSUNPTGltaXQgPSBfcHJlSUNPTGltaXQ7Ly8gKiAxMCoqZGVjaW1hbHM7CiAgICB9CiAgICBmdW5jdGlvbiBzZXRJbnN0YW50VHJhbnNmZXIoYm9vbCBfaW5zdGFudFRyYW5zZmVyKXsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoZXJQcm9jZWVkc0FjY291bnQpOwogICAgICAgIGluc3RhbnRUcmFuc2ZlciA9IF9pbnN0YW50VHJhbnNmZXI7CiAgICB9CiAgICBmdW5jdGlvbiBzZXRBbGxvd1RyYW5zZmVyKGJvb2wgX2FsbG93VHJhbnNmZXIpewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBldGhlclByb2NlZWRzQWNjb3VudCk7CiAgICAgICAgYWxsb3dUcmFuc2ZlciA9IF9hbGxvd1RyYW5zZmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIHByZUlDT1B1c2goYWRkcmVzcyBidXllciwgdWludDI1NiBhbW91bnQpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoZXJQcm9jZWVkc0FjY291bnQpOwoKICAgICAgICB1aW50MjU2IHRva2VucyA9IDA7CiAgICAgICAgdWludDI1NiBjaGVja2VkU3VwcGx5ID0gMDsKICAgICAgICBjaGVja2VkU3VwcGx5ID0gc2FmZUFkZCh3aW5kb3cwVG90YWxTdXBwbHksIGFtb3VudCk7CiAgICAgICAgcmVxdWlyZSh3aW5kb3cwVG9rZW5DcmVhdGlvbkNhcCA+PSBjaGVja2VkU3VwcGx5KTsKICAgICAgICBiYWxhbmNlc1tidXllcl0gKz0gdG9rZW5zOwogICAgICAgIHdpbmRvdzBUb3RhbFN1cHBseSA9IGNoZWNrZWRTdXBwbHk7CiAgICAgICAgUHJlSUNPVG9rZW5QdXNoZWQoYnV5ZXIsIGFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgY3JlYXRlKCk7CiAgICB9CiAgICBmdW5jdGlvbiBjcmVhdGUoKSBpbnRlcm5hbHsKICAgICAgICByZXF1aXJlKCFpc0ZpbmFsaXplZCk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gMC4wMSBldGhlcik7CiAgICAgICAgdWludDI1NiB0b2tlbnMgPSAwOwogICAgICAgIHVpbnQyNTYgY2hlY2tlZFN1cHBseSA9IDA7CgogICAgICAgIGlmKHdpbmRvdzBTdGFydFRpbWUgIT0gMCAmJiB3aW5kb3cwRW5kVGltZSAhPSAwICYmIHRpbWUoKSA+PSB3aW5kb3cwU3RhcnRUaW1lICYmIHRpbWUoKSA8PSB3aW5kb3cwRW5kVGltZSl7CiAgICAgICAgICAgIGlmKHByZUlDT0xpbWl0ID4gMCl7CiAgICAgICAgICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBwcmVJQ09MaW1pdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdG9rZW5zID0gc2FmZU11bHQobXNnLnZhbHVlLCB3aW5kb3cwVG9rZW5FeGNoYW5nZVJhdGUpOwogICAgICAgICAgICBjaGVja2VkU3VwcGx5ID0gc2FmZUFkZCh3aW5kb3cwVG90YWxTdXBwbHksIHRva2Vucyk7CiAgICAgICAgICAgIHJlcXVpcmUod2luZG93MFRva2VuQ3JlYXRpb25DYXAgPj0gY2hlY2tlZFN1cHBseSk7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IHRva2VuczsKICAgICAgICAgICAgd2luZG93MFRvdGFsU3VwcGx5ID0gY2hlY2tlZFN1cHBseTsKICAgICAgICAgICAgaWYobXVsdGlXYWxsZXQgIT0gMHgwICYmIGluc3RhbnRUcmFuc2ZlcikgbXVsdGlXYWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICAgICAgQ3JlYXRlR2FtZUljbyhtc2cuc2VuZGVyLCB0b2tlbnMpOwogICAgICAgIH1lbHNlIGlmKHdpbmRvdzFTdGFydFRpbWUgIT0gMCAmJiB3aW5kb3cxRW5kVGltZSE9IDAgJiYgdGltZSgpID49IHdpbmRvdzFTdGFydFRpbWUgJiYgdGltZSgpIDw9IHdpbmRvdzFFbmRUaW1lKXsKICAgICAgICAgICAgdG9rZW5zID0gc2FmZU11bHQobXNnLnZhbHVlLCB3aW5kb3cxVG9rZW5FeGNoYW5nZVJhdGUpOwogICAgICAgICAgICBjaGVja2VkU3VwcGx5ID0gc2FmZUFkZCh3aW5kb3cxVG90YWxTdXBwbHksIHRva2Vucyk7CiAgICAgICAgICAgIHJlcXVpcmUod2luZG93MVRva2VuQ3JlYXRpb25DYXAgPj0gY2hlY2tlZFN1cHBseSk7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IHRva2VuczsKICAgICAgICAgICAgd2luZG93MVRvdGFsU3VwcGx5ID0gY2hlY2tlZFN1cHBseTsKICAgICAgICAgICAgaWYobXVsdGlXYWxsZXQgIT0gMHgwICYmIGluc3RhbnRUcmFuc2ZlcikgbXVsdGlXYWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICAgICAgQ3JlYXRlR2FtZUljbyhtc2cuc2VuZGVyLCB0b2tlbnMpOwogICAgICAgIH1lbHNlIGlmKHdpbmRvdzJTdGFydFRpbWUgIT0gMCAmJiB3aW5kb3cyRW5kVGltZSAhPSAwICYmIHRpbWUoKSA+PSB3aW5kb3cyU3RhcnRUaW1lICYmIHRpbWUoKSA8PSB3aW5kb3cyRW5kVGltZSl7CiAgICAgICAgICAgIHRva2VucyA9IHNhZmVNdWx0KG1zZy52YWx1ZSwgd2luZG93MlRva2VuRXhjaGFuZ2VSYXRlKTsKICAgICAgICAgICAgY2hlY2tlZFN1cHBseSA9IHNhZmVBZGQod2luZG93MlRvdGFsU3VwcGx5LCB0b2tlbnMpOwogICAgICAgICAgICByZXF1aXJlKHdpbmRvdzJUb2tlbkNyZWF0aW9uQ2FwID49IGNoZWNrZWRTdXBwbHkpOwogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSB0b2tlbnM7CiAgICAgICAgICAgIHdpbmRvdzJUb3RhbFN1cHBseSA9IGNoZWNrZWRTdXBwbHk7CiAgICAgICAgICAgIGlmKG11bHRpV2FsbGV0ICE9IDB4MCAmJiBpbnN0YW50VHJhbnNmZXIpIG11bHRpV2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgICAgICAgIENyZWF0ZUdhbWVJY28obXNnLnNlbmRlciwgdG9rZW5zKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgcmVxdWlyZShmYWxzZSk7CiAgICAgICAgfQoKICAgIH0KCiAgICBmdW5jdGlvbiB0aW1lKCkgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBibG9jay50aW1lc3RhbXA7CiAgICB9CgogICAgZnVuY3Rpb24gdG9kYXkodWludCBzdGFydFRpbWUpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gZGF5Rm9yKHRpbWUoKSwgc3RhcnRUaW1lKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkYXlGb3IodWludCB0aW1lc3RhbXAsIHVpbnQgc3RhcnRUaW1lKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHRpbWVzdGFtcCA8IHN0YXJ0VGltZSA/IDAgOiBzYWZlU3VidHJhY3QodGltZXN0YW1wLCBzdGFydFRpbWUpIC8gMjQgaG91cnMgKyAxOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhEcmF3KHVpbnQyNTYgX3ZhbHVlKXsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoZXJQcm9jZWVkc0FjY291bnQpOwogICAgICAgIGlmKG11bHRpV2FsbGV0ICE9IDB4MCl7CiAgICAgICAgICAgIGlmICghbXVsdGlXYWxsZXQuc2VuZChfdmFsdWUpKSByZXF1aXJlKGZhbHNlKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgaWYgKCFldGhlclByb2NlZWRzQWNjb3VudC5zZW5kKF92YWx1ZSkpIHJlcXVpcmUoZmFsc2UpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIHsKICAgICAgICByZXF1aXJlKCFpc0ZpbmFsaXplZCk7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGV0aGVyUHJvY2VlZHNBY2NvdW50KTsKICAgICAgICBpc0ZpbmFsaXplZCA9IHRydWU7CiAgICAgICAgYmFsYW5jZXNbZXRoZXJQcm9jZWVkc0FjY291bnRdICs9IHRvdGFsU3VwcGx5LSB3aW5kb3cwVG90YWxTdXBwbHktIHdpbmRvdzFUb3RhbFN1cHBseSAtIHdpbmRvdzJUb3RhbFN1cHBseTsKICAgICAgICBpZihtdWx0aVdhbGxldCAhPSAweDApewogICAgICAgICAgICBpZiAoIW11bHRpV2FsbGV0LnNlbmQodGhpcy5iYWxhbmNlKSkgcmVxdWlyZShmYWxzZSk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGlmICghZXRoZXJQcm9jZWVkc0FjY291bnQuc2VuZCh0aGlzLmJhbGFuY2UpKSByZXF1aXJlKGZhbHNlKTsKICAgICAgICB9CiAgICB9Cgp9'.
	

]
