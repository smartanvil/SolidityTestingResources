Class {
	#name : #SRT88e7029a16443ef0491c5f46042d34d0c56e691f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT88e7029a16443ef0491c5f46042d34d0c56e691f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7Ci8qCiAqIEFic3RyYWN0IFRva2VuIFNtYXJ0IENvbnRyYWN0LiAgQ29weXJpZ2h0ICYjMTY5OyAyMDE3IGJ5IEFCREsgQ29uc3VsdGluZy4KICogQXV0aG9yOiBNaWtoYWlsIFZsYWRpbWlyb3YgPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJmNTk4OWM5ZTlkOTQ5Yzk5ZGI4Mzk5OTQ5MTljOTg5Yzg3OWE4M2I1OTI5ODk0OWM5OWRiOTY5YTk4Ij5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPj4KICovCgovKioKICogRVJDLTIwIHN0YW5kYXJkIHRva2VuIGludGVyZmFjZSwgYXMgZGVmaW5lZAogKiA8YSBocmVmPSJodHRwOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCI+aGVyZTwvYT4uCiAqLwpjb250cmFjdCBUb2tlbiB7CiAgLyoqCiAgICogR2V0IHRvdGFsIG51bWJlciBvZiB0b2tlbnMgaW4gY2lyY3VsYXRpb24uCiAgICoKICAgKiBAcmV0dXJuIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgaW4gY2lyY3VsYXRpb24KICAgKi8KICBmdW5jdGlvbiB0b3RhbFN1cHBseSAoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwoKICAvKioKICAgKiBHZXQgbnVtYmVyIG9mIHRva2VucyBjdXJyZW50bHkgYmVsb25naW5nIHRvIGdpdmVuIG93bmVyLgogICAqCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIHRvIGdldCBudW1iZXIgb2YgdG9rZW5zIGN1cnJlbnRseSBiZWxvbmdpbmcgdG8gdGhlCiAgICogICAgICAgIG93bmVyIG9mCiAgICogQHJldHVybiBudW1iZXIgb2YgdG9rZW5zIGN1cnJlbnRseSBiZWxvbmdpbmcgdG8gdGhlIG93bmVyIG9mIGdpdmVuIGFkZHJlc3MKICAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YgKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgLyoqCiAgICogVHJhbnNmZXIgZ2l2ZW4gbnVtYmVyIG9mIHRva2VucyBmcm9tIG1lc3NhZ2Ugc2VuZGVyIHRvIGdpdmVuIHJlY2lwaWVudC4KICAgKgogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyB0byB0cmFuc2ZlciB0b2tlbnMgdG8gdGhlIG93bmVyIG9mCiAgICogQHBhcmFtIF92YWx1ZSBudW1iZXIgb2YgdG9rZW5zIHRvIHRyYW5zZmVyIHRvIHRoZSBvd25lciBvZiBnaXZlbiBhZGRyZXNzCiAgICogQHJldHVybiB0cnVlIGlmIHRva2VucyB3ZXJlIHRyYW5zZmVycmVkIHN1Y2Nlc3NmdWxseSwgZmFsc2Ugb3RoZXJ3aXNlCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXIgKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogIC8qKgogICAqIFRyYW5zZmVyIGdpdmVuIG51bWJlciBvZiB0b2tlbnMgZnJvbSBnaXZlbiBvd25lciB0byBnaXZlbiByZWNpcGllbnQuCiAgICoKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbSB0aGUgb3duZXIgb2YKICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW5zIHRvIHRoZSBvd25lciBvZgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2ZlciBmcm9tIGdpdmVuIG93bmVyIHRvIGdpdmVuCiAgICogICAgICAgIHJlY2lwaWVudAogICAqIEByZXR1cm4gdHJ1ZSBpZiB0b2tlbnMgd2VyZSB0cmFuc2ZlcnJlZCBzdWNjZXNzZnVsbHksIGZhbHNlIG90aGVyd2lzZQogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSAoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAvKioKICAgKiBBbGxvdyBnaXZlbiBzcGVuZGVyIHRvIHRyYW5zZmVyIGdpdmVuIG51bWJlciBvZiB0b2tlbnMgZnJvbSBtZXNzYWdlIHNlbmRlci4KICAgKgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIHRvIGFsbG93IHRoZSBvd25lciBvZiB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbQogICAqICAgICAgICBtZXNzYWdlIHNlbmRlcgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byBhbGxvdyB0byB0cmFuc2ZlcgogICAqIEByZXR1cm4gdHJ1ZSBpZiB0b2tlbiB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bGx5IGFwcHJvdmVkLCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogIC8qKgogICAqIFRlbGwgaG93IG1hbnkgdG9rZW5zIGdpdmVuIHNwZW5kZXIgaXMgY3VycmVudGx5IGFsbG93ZWQgdG8gdHJhbnNmZXIgZnJvbQogICAqIGdpdmVuIG93bmVyLgogICAqCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIHRvIGdldCBudW1iZXIgb2YgdG9rZW5zIGFsbG93ZWQgdG8gYmUgdHJhbnNmZXJyZWQKICAgKiAgICAgICAgZnJvbSB0aGUgb3duZXIgb2YKICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyB0byBnZXQgbnVtYmVyIG9mIHRva2VucyBhbGxvd2VkIHRvIGJlIHRyYW5zZmVycmVkCiAgICogICAgICAgIGJ5IHRoZSBvd25lciBvZgogICAqIEByZXR1cm4gbnVtYmVyIG9mIHRva2VucyBnaXZlbiBzcGVuZGVyIGlzIGN1cnJlbnRseSBhbGxvd2VkIHRvIHRyYW5zZmVyCiAgICogICAgICAgICBmcm9tIGdpdmVuIG93bmVyCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlIChhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQKICBwdWJsaWMgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAvKioKICAgKiBMb2dnZWQgd2hlbiB0b2tlbnMgd2VyZSB0cmFuc2ZlcnJlZCBmcm9tIG9uZSBvd25lciB0byBhbm90aGVyLgogICAqCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3Mgb2YgdGhlIG93bmVyLCB0b2tlbnMgd2VyZSB0cmFuc2ZlcnJlZCBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIG9mIHRoZSBvd25lciwgdG9rZW5zIHdlcmUgdHJhbnNmZXJyZWQgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIG51bWJlciBvZiB0b2tlbnMgdHJhbnNmZXJyZWQKICAgKi8KICBldmVudCBUcmFuc2ZlciAoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CgogIC8qKgogICAqIExvZ2dlZCB3aGVuIG93bmVyIGFwcHJvdmVkIGhpcyB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQgYnkgc29tZSBzcGVuZGVyLgogICAqCiAgICogQHBhcmFtIF9vd25lciBvd25lciB3aG8gYXBwcm92ZWQgaGlzIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAqIEBwYXJhbSBfc3BlbmRlciBzcGVuZGVyIHdobyB3ZXJlIGFsbG93ZWQgdG8gdHJhbnNmZXIgdGhlIHRva2VucyBiZWxvbmdpbmcKICAgKiAgICAgICAgdG8gdGhlIG93bmVyCiAgICogQHBhcmFtIF92YWx1ZSBudW1iZXIgb2YgdG9rZW5zIGJlbG9uZ2luZyB0byB0aGUgb3duZXIsIGFwcHJvdmVkIHRvIGJlCiAgICogICAgICAgIHRyYW5zZmVycmVkIGJ5IHRoZSBzcGVuZGVyCiAgICovCiAgZXZlbnQgQXBwcm92YWwgKAogICAgYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KLyoKICogU2FmZSBNYXRoIFNtYXJ0IENvbnRyYWN0LiAgQ29weXJpZ2h0ICYjMTY5OyAyMDE24oCTMjAxNyBieSBBQkRLIENvbnN1bHRpbmcuCiAqIEF1dGhvcjogTWlraGFpbCBWbGFkaW1pcm92IDw8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iN2ExNzEzMTExMjFiMTMxNjU0MGMxNjFiMWUxMzE3MTMwODE1MGMzYTFkMTcxYjEzMTY1NDE5MTUxNyI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvYT4+CiAqLwoKLyoqCiAqIFByb3ZpZGVzIG1ldGhvZHMgdG8gc2FmZWx5IGFkZCwgc3VidHJhY3QgYW5kIG11bHRpcGx5IHVpbnQyNTYgbnVtYmVycy4KICovCmNvbnRyYWN0IFNhZmVNYXRoIHsKICB1aW50MjU2IGNvbnN0YW50IHByaXZhdGUgTUFYX1VJTlQyNTYgPQogICAgMHhGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGOwoKICAvKioKICAgKiBBZGQgdHdvIHVpbnQyNTYgdmFsdWVzLCB0aHJvdyBpbiBjYXNlIG9mIG92ZXJmbG93LgogICAqCiAgICogQHBhcmFtIHggZmlyc3QgdmFsdWUgdG8gYWRkCiAgICogQHBhcmFtIHkgc2Vjb25kIHZhbHVlIHRvIGFkZAogICAqIEByZXR1cm4geCArIHkKICAgKi8KICBmdW5jdGlvbiBzYWZlQWRkICh1aW50MjU2IHgsIHVpbnQyNTYgeSkKICBwdXJlIGludGVybmFsCiAgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICBhc3NlcnQgKHggPD0gTUFYX1VJTlQyNTYgLSB5KTsKICAgIHJldHVybiB4ICsgeTsKICB9CgogIC8qKgogICAqIFN1YnRyYWN0IG9uZSB1aW50MjU2IHZhbHVlIGZyb20gYW5vdGhlciwgdGhyb3cgaW4gY2FzZSBvZiB1bmRlcmZsb3cuCiAgICoKICAgKiBAcGFyYW0geCB2YWx1ZSB0byBzdWJ0cmFjdCBmcm9tCiAgICogQHBhcmFtIHkgdmFsdWUgdG8gc3VidHJhY3QKICAgKiBAcmV0dXJuIHggLSB5CiAgICovCiAgZnVuY3Rpb24gc2FmZVN1YiAodWludDI1NiB4LCB1aW50MjU2IHkpCiAgcHVyZSBpbnRlcm5hbAogIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgYXNzZXJ0ICh4ID49IHkpOwogICAgcmV0dXJuIHggLSB5OwogIH0KCiAgLyoqCiAgICogTXVsdGlwbHkgdHdvIHVpbnQyNTYgdmFsdWVzLCB0aHJvdyBpbiBjYXNlIG9mIG92ZXJmbG93LgogICAqCiAgICogQHBhcmFtIHggZmlyc3QgdmFsdWUgdG8gbXVsdGlwbHkKICAgKiBAcGFyYW0geSBzZWNvbmQgdmFsdWUgdG8gbXVsdGlwbHkKICAgKiBAcmV0dXJuIHggKiB5CiAgICovCiAgZnVuY3Rpb24gc2FmZU11bCAodWludDI1NiB4LCB1aW50MjU2IHkpCiAgcHVyZSBpbnRlcm5hbAogIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgaWYgKHkgPT0gMCkgcmV0dXJuIDA7IC8vIFByZXZlbnQgZGl2aXNpb24gYnkgemVybyBhdCB0aGUgbmV4dCBsaW5lCiAgICBhc3NlcnQgKHggPD0gTUFYX1VJTlQyNTYgLyB5KTsKICAgIHJldHVybiB4ICogeTsKICB9Cn0KLyoqCiAqIEFic3RyYWN0IFRva2VuIFNtYXJ0IENvbnRyYWN0IHRoYXQgY291bGQgYmUgdXNlZCBhcyBhIGJhc2UgY29udHJhY3QgZm9yCiAqIEVSQy0yMCB0b2tlbiBjb250cmFjdHMuCiAqLwoKY29udHJhY3QgQWJzdHJhY3RUb2tlbiBpcyBUb2tlbiwgU2FmZU1hdGggewogIC8qKgogICAqIENyZWF0ZSBuZXcgQWJzdHJhY3QgVG9rZW4gY29udHJhY3QuCiAgICovCiAgZnVuY3Rpb24gQWJzdHJhY3RUb2tlbiAoKSBwdWJsaWMgewogICAgLy8gRG8gbm90aGluZwogIH0KCiAgLyoqCiAgICogR2V0IG51bWJlciBvZiB0b2tlbnMgY3VycmVudGx5IGJlbG9uZ2luZyB0byBnaXZlbiBvd25lci4KICAgKgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyB0byBnZXQgbnVtYmVyIG9mIHRva2VucyBjdXJyZW50bHkgYmVsb25naW5nIHRvIHRoZQogICAqICAgICAgICBvd25lciBvZgogICAqIEByZXR1cm4gbnVtYmVyIG9mIHRva2VucyBjdXJyZW50bHkgYmVsb25naW5nIHRvIHRoZSBvd25lciBvZiBnaXZlbiBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mIChhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGFjY291bnRzIFtfb3duZXJdOwogIH0KCiAgLyoqCiAgICogR2V0IG51bWJlciBvZiB0b2tlbnMgY3VycmVudGx5IGJlbG9uZ2luZyB0byBnaXZlbiBvd25lciBhbmQgYXZhaWxhYmxlIGZvciB0cmFuc2Zlci4KICAgKgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyB0byBnZXQgbnVtYmVyIG9mIHRva2VucyBjdXJyZW50bHkgYmVsb25naW5nIHRvIHRoZQogICAqICAgICAgICBvd25lciBvZgogICAqIEByZXR1cm4gbnVtYmVyIG9mIHRva2VucyBjdXJyZW50bHkgYmVsb25naW5nIHRvIHRoZSBvd25lciBvZiBnaXZlbiBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJyYWJsZUJhbGFuY2VPZiAoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIGlmIChob2xkc1tfb3duZXJdID4gYWNjb3VudHNbX293bmVyXSkgewogICAgICAgIHJldHVybiAwOwogICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gc2FmZVN1YihhY2NvdW50c1tfb3duZXJdLCBob2xkc1tfb3duZXJdKTsKICAgIH0KICB9CgogIC8qKgogICAqIFRyYW5zZmVyIGdpdmVuIG51bWJlciBvZiB0b2tlbnMgZnJvbSBtZXNzYWdlIHNlbmRlciB0byBnaXZlbiByZWNpcGllbnQuCiAgICoKICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW5zIHRvIHRoZSBvd25lciBvZgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2ZlciB0byB0aGUgb3duZXIgb2YgZ2l2ZW4gYWRkcmVzcwogICAqIEByZXR1cm4gdHJ1ZSBpZiB0b2tlbnMgd2VyZSB0cmFuc2ZlcnJlZCBzdWNjZXNzZnVsbHksIGZhbHNlIG90aGVyd2lzZQogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyIChhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHJlcXVpcmUgKHRyYW5zZmVycmFibGVCYWxhbmNlT2YobXNnLnNlbmRlcikgPj0gX3ZhbHVlKTsKICAgIGlmIChfdmFsdWUgPiAwICYmIG1zZy5zZW5kZXIgIT0gX3RvKSB7CiAgICAgIGFjY291bnRzIFttc2cuc2VuZGVyXSA9IHNhZmVTdWIgKGFjY291bnRzIFttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgaWYgKCFoYXNBY2NvdW50W190b10pIHsKICAgICAgICAgIGhhc0FjY291bnRbX3RvXSA9IHRydWU7CiAgICAgICAgICBhY2NvdW50TGlzdC5wdXNoKF90byk7CiAgICAgIH0KICAgICAgYWNjb3VudHMgW190b10gPSBzYWZlQWRkIChhY2NvdW50cyBbX3RvXSwgX3ZhbHVlKTsKICAgIH0KICAgIGVtaXQgVHJhbnNmZXIgKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogVHJhbnNmZXIgZ2l2ZW4gbnVtYmVyIG9mIHRva2VucyBmcm9tIGdpdmVuIG93bmVyIHRvIGdpdmVuIHJlY2lwaWVudC4KICAgKgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRva2VucyBmcm9tIHRoZSBvd25lciBvZgogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyB0byB0cmFuc2ZlciB0b2tlbnMgdG8gdGhlIG93bmVyIG9mCiAgICogQHBhcmFtIF92YWx1ZSBudW1iZXIgb2YgdG9rZW5zIHRvIHRyYW5zZmVyIGZyb20gZ2l2ZW4gb3duZXIgdG8gZ2l2ZW4KICAgKiAgICAgICAgcmVjaXBpZW50CiAgICogQHJldHVybiB0cnVlIGlmIHRva2VucyB3ZXJlIHRyYW5zZmVycmVkIHN1Y2Nlc3NmdWxseSwgZmFsc2Ugb3RoZXJ3aXNlCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tIChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpCiAgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmVxdWlyZSAoYWxsb3dhbmNlcyBbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICByZXF1aXJlICh0cmFuc2ZlcnJhYmxlQmFsYW5jZU9mKF9mcm9tKSA+PSBfdmFsdWUpOwoKICAgIGFsbG93YW5jZXMgW19mcm9tXVttc2cuc2VuZGVyXSA9CiAgICAgIHNhZmVTdWIgKGFsbG93YW5jZXMgW19mcm9tXVttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKCiAgICBpZiAoX3ZhbHVlID4gMCAmJiBfZnJvbSAhPSBfdG8pIHsKICAgICAgYWNjb3VudHMgW19mcm9tXSA9IHNhZmVTdWIgKGFjY291bnRzIFtfZnJvbV0sIF92YWx1ZSk7CiAgICAgIGlmICghaGFzQWNjb3VudFtfdG9dKSB7CiAgICAgICAgICBoYXNBY2NvdW50W190b10gPSB0cnVlOwogICAgICAgICAgYWNjb3VudExpc3QucHVzaChfdG8pOwogICAgICB9CiAgICAgIGFjY291bnRzIFtfdG9dID0gc2FmZUFkZCAoYWNjb3VudHMgW190b10sIF92YWx1ZSk7CiAgICB9CiAgICBlbWl0IFRyYW5zZmVyIChfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBBbGxvdyBnaXZlbiBzcGVuZGVyIHRvIHRyYW5zZmVyIGdpdmVuIG51bWJlciBvZiB0b2tlbnMgZnJvbSBtZXNzYWdlIHNlbmRlci4KICAgKgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIHRvIGFsbG93IHRoZSBvd25lciBvZiB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbQogICAqICAgICAgICBtZXNzYWdlIHNlbmRlcgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byBhbGxvdyB0byB0cmFuc2ZlcgogICAqIEByZXR1cm4gdHJ1ZSBpZiB0b2tlbiB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bGx5IGFwcHJvdmVkLCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYWxsb3dhbmNlcyBbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgZW1pdCBBcHByb3ZhbCAobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBUZWxsIGhvdyBtYW55IHRva2VucyBnaXZlbiBzcGVuZGVyIGlzIGN1cnJlbnRseSBhbGxvd2VkIHRvIHRyYW5zZmVyIGZyb20KICAgKiBnaXZlbiBvd25lci4KICAgKgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyB0byBnZXQgbnVtYmVyIG9mIHRva2VucyBhbGxvd2VkIHRvIGJlIHRyYW5zZmVycmVkCiAgICogICAgICAgIGZyb20gdGhlIG93bmVyIG9mCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgdG8gZ2V0IG51bWJlciBvZiB0b2tlbnMgYWxsb3dlZCB0byBiZSB0cmFuc2ZlcnJlZAogICAqICAgICAgICBieSB0aGUgb3duZXIgb2YKICAgKiBAcmV0dXJuIG51bWJlciBvZiB0b2tlbnMgZ2l2ZW4gc3BlbmRlciBpcyBjdXJyZW50bHkgYWxsb3dlZCB0byB0cmFuc2ZlcgogICAqICAgICAgICAgZnJvbSBnaXZlbiBvd25lcgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZSAoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudAogIHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dhbmNlcyBbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBNYXBwaW5nIGZyb20gYWRkcmVzc2VzIG9mIHRva2VuIGhvbGRlcnMgdG8gdGhlIG51bWJlcnMgb2YgdG9rZW5zIGJlbG9uZ2luZwogICAqIHRvIHRoZXNlIHRva2VuIGhvbGRlcnMuCiAgICovCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBhY2NvdW50czsKCiAgLyoqCiAgICogTWFwcGluZyBmcm9tIGFkZHJlc3Mgb2YgdG9rZW4gaG9sZGVycyB0byBhIGJvb2xlYW4gdG8gaW5kaWNhdGUgaWYgdGhleSBoYXZlCiAgICogYWxyZWFkeSBiZWVuIGFkZGVkIHRvIHRoZSBzeXN0ZW0uCiAgICovCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBpbnRlcm5hbCBoYXNBY2NvdW50OwogIAogIC8qKgogICAqIExpc3Qgb2YgYXZhaWxhYmxlIGFjY291bnRzLgogICAqLwogIGFkZHJlc3MgW10gaW50ZXJuYWwgYWNjb3VudExpc3Q7CiAgCiAgLyoqCiAgICogTWFwcGluZyBmcm9tIGFkZHJlc3NlcyBvZiB0b2tlbiBob2xkZXJzIHRvIHRoZSBtYXBwaW5nIG9mIGFkZHJlc3NlcyBvZgogICAqIHNwZW5kZXJzIHRvIHRoZSBhbGxvd2FuY2VzIHNldCBieSB0aGVzZSB0b2tlbiBob2xkZXJzIHRvIHRoZXNlIHNwZW5kZXJzLgogICAqLwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHJpdmF0ZSBhbGxvd2FuY2VzOwoKICAvKioKICAgKiBNYXBwaW5nIGZyb20gYWRkcmVzc2VzIG9mIHRva2VuIGhvbGRzIHdoaWNoIGNhbm5vdCBiZSBzcGVudCB1bnRpbCByZWxlYXNlZC4KICAgKi8KICBtYXBwaW5nIChhZGRyZXNzID0+ICB1aW50MjU2KSBpbnRlcm5hbCBob2xkczsKfQovKioKICogUG9uZGVyIHRva2VuIHNtYXJ0IGNvbnRyYWN0LgogKi8KCgpjb250cmFjdCBQb25kZXJBaXJkcm9wVG9rZW4gaXMgQWJzdHJhY3RUb2tlbiB7CiAgLyoqCiAgICogQWRkcmVzcyBvZiB0aGUgb3duZXIgb2YgdGhpcyBzbWFydCBjb250cmFjdC4KICAgKi8KICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHByaXZhdGUgb3duZXJzOwoKICAvKioKICAgKiBUcnVlIGlmIHRva2VucyB0cmFuc2ZlcnMgYXJlIGN1cnJlbnRseSBmcm96ZW4sIGZhbHNlIG90aGVyd2lzZS4KICAgKi8KICBib29sIGZyb3plbiA9IGZhbHNlOwoKICAvKioKICAgKiBDcmVhdGUgbmV3IFBvbmRlciB0b2tlbiBzbWFydCBjb250cmFjdCwgd2l0aCBnaXZlbiBudW1iZXIgb2YgdG9rZW5zIGlzc3VlZAogICAqIGFuZCBnaXZlbiB0byBtc2cuc2VuZGVyLCBhbmQgbWFrZSBtc2cuc2VuZGVyIHRoZSBvd25lciBvZiB0aGlzIHNtYXJ0CiAgICogY29udHJhY3QuCiAgICovCiAgZnVuY3Rpb24gUG9uZGVyQWlyZHJvcFRva2VuICgpIHB1YmxpYyB7CiAgICBvd25lcnNbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgYWNjb3VudHMgW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHkoKTsKICAgIGhhc0FjY291bnQgW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgIGFjY291bnRMaXN0LnB1c2gobXNnLnNlbmRlcik7CiAgfQoKICAvKioKICAgKiBHZXQgdG90YWwgbnVtYmVyIG9mIHRva2VucyBpbiBjaXJjdWxhdGlvbi4KICAgKgogICAqIEByZXR1cm4gdG90YWwgbnVtYmVyIG9mIHRva2VucyBpbiBjaXJjdWxhdGlvbgogICAqLwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5ICgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkgewogICAgcmV0dXJuIDQ4MDAwMDAwMCAqICh1aW50MjU2KDEwKSAqKiBkZWNpbWFscygpKTsKICB9CgogIC8qKgogICAqIEdldCBuYW1lIG9mIHRoaXMgdG9rZW4uCiAgICoKICAgKiBAcmV0dXJuIG5hbWUgb2YgdGhpcyB0b2tlbgogICAqLwogIGZ1bmN0aW9uIG5hbWUgKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nIHJlc3VsdCkgewogICAgcmV0dXJuICJQb25kZXIgQWlyZHJvcCBUb2tlbiI7CiAgfQoKICAvKioKICAgKiBHZXQgc3ltYm9sIG9mIHRoaXMgdG9rZW4uCiAgICoKICAgKiBAcmV0dXJuIHN5bWJvbCBvZiB0aGlzIHRva2VuCiAgICovCiAgZnVuY3Rpb24gc3ltYm9sICgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZyByZXN1bHQpIHsKICAgIHJldHVybiAiUE9OQSI7CiAgfQoKICAvKioKICAgKiBHZXQgbnVtYmVyIG9mIGRlY2ltYWxzIGZvciB0aGlzIHRva2VuLgogICAqCiAgICogQHJldHVybiBudW1iZXIgb2YgZGVjaW1hbHMgZm9yIHRoaXMgdG9rZW4KICAgKi8KICBmdW5jdGlvbiBkZWNpbWFscyAoKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50OCByZXN1bHQpIHsKICAgIHJldHVybiAxODsKICB9CgogIC8qKgogICAqIFRyYW5zZmVyIGdpdmVuIG51bWJlciBvZiB0b2tlbnMgZnJvbSBtZXNzYWdlIHNlbmRlciB0byBnaXZlbiByZWNpcGllbnQuCiAgICoKICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW5zIHRvIHRoZSBvd25lciBvZgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2ZlciB0byB0aGUgb3duZXIgb2YgZ2l2ZW4gYWRkcmVzcwogICAqIEByZXR1cm4gdHJ1ZSBpZiB0b2tlbnMgd2VyZSB0cmFuc2ZlcnJlZCBzdWNjZXNzZnVsbHksIGZhbHNlIG90aGVyd2lzZQogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyIChhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGlmIChmcm96ZW4pIHJldHVybiBmYWxzZTsKICAgIGVsc2UgcmV0dXJuIEFic3RyYWN0VG9rZW4udHJhbnNmZXIgKF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIFRyYW5zZmVyIGdpdmVuIG51bWJlciBvZiB0b2tlbnMgZnJvbSBnaXZlbiBvd25lciB0byBnaXZlbiByZWNpcGllbnQuCiAgICoKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbSB0aGUgb3duZXIgb2YKICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG9rZW5zIHRvIHRoZSBvd25lciBvZgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2ZlciBmcm9tIGdpdmVuIG93bmVyIHRvIGdpdmVuCiAgICogICAgICAgIHJlY2lwaWVudAogICAqIEByZXR1cm4gdHJ1ZSBpZiB0b2tlbnMgd2VyZSB0cmFuc2ZlcnJlZCBzdWNjZXNzZnVsbHksIGZhbHNlIG90aGVyd2lzZQogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSAoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgaWYgKGZyb3plbikgcmV0dXJuIGZhbHNlOwogICAgZWxzZSByZXR1cm4gQWJzdHJhY3RUb2tlbi50cmFuc2ZlckZyb20gKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBDaGFuZ2UgaG93IG1hbnkgdG9rZW5zIGdpdmVuIHNwZW5kZXIgaXMgYWxsb3dlZCB0byB0cmFuc2ZlciBmcm9tIG1lc3NhZ2UKICAgKiBzcGVuZGVyLiAgSW4gb3JkZXIgdG8gcHJldmVudCBkb3VibGUgc3BlbmRpbmcgb2YgYWxsb3dhbmNlLCB0aGlzIG1ldGhvZAogICAqIHJlY2VpdmVzIGFzc3VtZWQgY3VycmVudCBhbGxvd2FuY2UgdmFsdWUgYXMgYW4gYXJndW1lbnQuICBJZiBhY3R1YWwKICAgKiBhbGxvd2FuY2UgZGlmZmVycyBmcm9tIGFuIGFzc3VtZWQgb25lLCB0aGlzIG1ldGhvZCBqdXN0IHJldHVybnMgZmFsc2UuCiAgICoKICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyB0byBhbGxvdyB0aGUgb3duZXIgb2YgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20KICAgKiAgICAgICAgbWVzc2FnZSBzZW5kZXIKICAgKiBAcGFyYW0gX2N1cnJlbnRWYWx1ZSBhc3N1bWVkIG51bWJlciBvZiB0b2tlbnMgY3VycmVudGx5IGFsbG93ZWQgdG8gYmUKICAgKiAgICAgICAgdHJhbnNmZXJyZWQKICAgKiBAcGFyYW0gX25ld1ZhbHVlIG51bWJlciBvZiB0b2tlbnMgdG8gYWxsb3cgdG8gdHJhbnNmZXIKICAgKiBAcmV0dXJuIHRydWUgaWYgdG9rZW4gdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWxseSBhcHByb3ZlZCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZSAoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfY3VycmVudFZhbHVlLCB1aW50MjU2IF9uZXdWYWx1ZSkKICAgIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGlmIChhbGxvd2FuY2UgKG1zZy5zZW5kZXIsIF9zcGVuZGVyKSA9PSBfY3VycmVudFZhbHVlKQogICAgICByZXR1cm4gYXBwcm92ZSAoX3NwZW5kZXIsIF9uZXdWYWx1ZSk7CiAgICBlbHNlIHJldHVybiBmYWxzZTsKICB9CgogIC8qKgogICAqIFNldCBuZXcgb3duZXIgZm9yIHRoZSBzbWFydCBjb250cmFjdC4KICAgKiBNYXkgb25seSBiZSBjYWxsZWQgYnkgc21hcnQgY29udHJhY3Qgb3duZXIuCiAgICoKICAgKiBAcGFyYW0gX2FkZHJlc3Mgb2YgbmV3IG9yIGV4aXN0aW5nIG93bmVyIG9mIHRoZSBzbWFydCBjb250cmFjdAogICAqIEBwYXJhbSBfdmFsdWUgYm9vbGVhbiBzdGF0aW5nIGlmIHRoZSBfYWRkcmVzcyBzaG91bGQgYmUgYW4gb3duZXIgb3Igbm90CiAgICovCiAgZnVuY3Rpb24gc2V0T3duZXIgKGFkZHJlc3MgX2FkZHJlc3MsIGJvb2wgX3ZhbHVlKSBwdWJsaWMgewogICAgcmVxdWlyZSAob3duZXJzW21zZy5zZW5kZXJdKTsKICAgIC8vIGlmIHJlbW92aW5nIHRoZSBfYWRkcmVzcyBmcm9tIG93bmVycyBsaXN0LCBtYWtlIHN1cmUgb3duZXIgaXMgbm90IAogICAgLy8gcmVtb3ZpbmcgaGltc2VsZiAod2hpY2ggY291bGQgbGVhZCB0byBhbiBvd25lcmxlc3MgY29udHJhY3QpLgogICAgcmVxdWlyZSAoX3ZhbHVlID09IHRydWUgfHwgX2FkZHJlc3MgIT0gbXNnLnNlbmRlcik7CgogICAgb3duZXJzW19hZGRyZXNzXSA9IF92YWx1ZTsKICB9CgogIC8qKgogICAqIEluaXRpYWxpemUgdGhlIHRva2VuIGhvbGRlcnMgYnkgY29udHJhY3Qgb3duZXIKICAgKgogICAqIEBwYXJhbSBfdG8gYWRkcmVzc2VzIHRvIGFsbG9jYXRlIHRva2VuIGZvcgogICAqIEBwYXJhbSBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byBiZSBhbGxvY2F0ZWQKICAgKi8gIAogIGZ1bmN0aW9uIGluaXRBY2NvdW50cyAoYWRkcmVzcyBbXSBfdG8sIHVpbnQyNTYgW10gX3ZhbHVlKSBwdWJsaWMgewogICAgICByZXF1aXJlIChvd25lcnNbbXNnLnNlbmRlcl0pOwogICAgICByZXF1aXJlIChfdG8ubGVuZ3RoID09IF92YWx1ZS5sZW5ndGgpOwogICAgICBmb3IgKHVpbnQyNTYgaT0wOyBpIDwgX3RvLmxlbmd0aDsgaSsrKXsKICAgICAgICAgIHVpbnQyNTYgYW1vdW50VG9BZGQ7CiAgICAgICAgICB1aW50MjU2IGFtb3VudFRvU3ViOwogICAgICAgICAgaWYgKF92YWx1ZVtpXSA+IGFjY291bnRzW190b1tpXV0pewogICAgICAgICAgICBhbW91bnRUb0FkZCA9IHNhZmVTdWIoX3ZhbHVlW2ldLCBhY2NvdW50c1tfdG9baV1dKTsKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICBhbW91bnRUb1N1YiA9IHNhZmVTdWIoYWNjb3VudHNbX3RvW2ldXSwgX3ZhbHVlW2ldKTsKICAgICAgICAgIH0KICAgICAgICAgIGFjY291bnRzIFttc2cuc2VuZGVyXSA9IHNhZmVBZGQgKGFjY291bnRzIFttc2cuc2VuZGVyXSwgYW1vdW50VG9TdWIpOwogICAgICAgICAgYWNjb3VudHMgW21zZy5zZW5kZXJdID0gc2FmZVN1YiAoYWNjb3VudHMgW21zZy5zZW5kZXJdLCBhbW91bnRUb0FkZCk7CiAgICAgICAgICBpZiAoIWhhc0FjY291bnRbX3RvW2ldXSkgewogICAgICAgICAgICAgIGhhc0FjY291bnRbX3RvW2ldXSA9IHRydWU7CiAgICAgICAgICAgICAgYWNjb3VudExpc3QucHVzaChfdG9baV0pOwogICAgICAgICAgfQogICAgICAgICAgYWNjb3VudHMgW190b1tpXV0gPSBfdmFsdWVbaV07CiAgICAgICAgICBpZiAoYW1vdW50VG9BZGQgPiAwKXsKICAgICAgICAgICAgZW1pdCBUcmFuc2ZlciAobXNnLnNlbmRlciwgX3RvW2ldLCBhbW91bnRUb0FkZCk7CiAgICAgICAgICB9CiAgICAgIH0KICB9CgogIC8qKgogICAqIEluaXRpYWxpemUgdGhlIHRva2VuIGhvbGRlcnMgYW5kIGhvbGQgYW1vdW50cyBieSBjb250cmFjdCBvd25lcgogICAqCiAgICogQHBhcmFtIF90byBhZGRyZXNzZXMgdG8gYWxsb2NhdGUgdG9rZW4gZm9yCiAgICogQHBhcmFtIF92YWx1ZSBudW1iZXIgb2YgdG9rZW5zIHRvIGJlIGFsbG9jYXRlZAogICAqIEBwYXJhbSBfaG9sZHMgbnVtYmVyIG9mIHRva2VucyB0byBob2xkIGZyb20gdHJhbnNmZXJyaW5nCiAgICovICAKICBmdW5jdGlvbiBpbml0QWNjb3VudHMgKGFkZHJlc3MgW10gX3RvLCB1aW50MjU2IFtdIF92YWx1ZSwgdWludDI1NiBbXSBfaG9sZHMpIHB1YmxpYyB7CiAgICBzZXRIb2xkcyhfdG8sIF9ob2xkcyk7CiAgICBpbml0QWNjb3VudHMoX3RvLCBfdmFsdWUpOwogIH0KICAKICAvKioKICAgKiBTZXQgdGhlIG51bWJlciBvZiB0b2tlbnMgdG8gaG9sZCBmcm9tIHRyYW5zZmVycmluZyBmb3IgYSBsaXN0IG9mIAogICAqIHRva2VuIGhvbGRlcnMuCiAgICogCiAgICogQHBhcmFtIF9hY2NvdW50IGxpc3Qgb2YgYWNjb3VudCBob2xkZXJzCiAgICogQHBhcmFtIF92YWx1ZSBsaXN0IG9mIHRva2VuIGFtb3VudHMgdG8gaG9sZAogICAqLwogIGZ1bmN0aW9uIHNldEhvbGRzIChhZGRyZXNzIFtdIF9hY2NvdW50LCB1aW50MjU2IFtdIF92YWx1ZSkgcHVibGljIHsKICAgIHJlcXVpcmUgKG93bmVyc1ttc2cuc2VuZGVyXSk7CiAgICByZXF1aXJlIChfYWNjb3VudC5sZW5ndGggPT0gX3ZhbHVlLmxlbmd0aCk7CiAgICBmb3IgKHVpbnQyNTYgaT0wOyBpIDwgX2FjY291bnQubGVuZ3RoOyBpKyspewogICAgICAgIGhvbGRzW19hY2NvdW50W2ldXSA9IF92YWx1ZVtpXTsKICAgIH0KICB9CiAgCiAgLyoqCiAgICogR2V0IHRoZSBudW1iZXIgb2YgYWNjb3VudCBob2xkZXJzIChmb3Igb3duZXIgdXNlKQogICAqCiAgICogQHJldHVybiB1aW50MjU2CiAgICovICAKICBmdW5jdGlvbiBnZXROdW1BY2NvdW50cyAoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBjb3VudCkgewogICAgcmVxdWlyZSAob3duZXJzW21zZy5zZW5kZXJdKTsKICAgIHJldHVybiBhY2NvdW50TGlzdC5sZW5ndGg7CiAgfQogIAogIC8qKgogICAqIEdldCBhIGxpc3Qgb2YgYWNjb3VudCBob2xkZXIgZXRoIGFkZHJlc3NlcyAoZm9yIG93bmVyIHVzZSkKICAgKgogICAqIEBwYXJhbSBfc3RhcnQgaW5kZXggb2YgdGhlIGFjY291bnQgaG9sZGVyIGxpc3QKICAgKiBAcGFyYW0gX2NvdW50IG9mIGl0ZW1zIHRvIHJldHVybgogICAqIEByZXR1cm4gYXJyYXkgb2YgYWRkcmVzc2VzCiAgICovICAKICBmdW5jdGlvbiBnZXRBY2NvdW50cyAodWludDI1NiBfc3RhcnQsIHVpbnQyNTYgX2NvdW50KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyBbXSBhZGRyZXNzZXMpewogICAgcmVxdWlyZSAob3duZXJzW21zZy5zZW5kZXJdKTsKICAgIHJlcXVpcmUgKF9zdGFydCA+PSAwICYmIF9jb3VudCA+PSAxKTsKICAgIGlmIChfc3RhcnQgPT0gMCAmJiBfY291bnQgPj0gYWNjb3VudExpc3QubGVuZ3RoKSB7CiAgICAgIHJldHVybiBhY2NvdW50TGlzdDsKICAgIH0KICAgIGFkZHJlc3MgW10gbWVtb3J5IF9zbGljZSA9IG5ldyBhZGRyZXNzW10oX2NvdW50KTsKICAgIGZvciAodWludDI1NiBpPTA7IGkgPCBfY291bnQ7IGkrKyl7CiAgICAgIF9zbGljZVtpXSA9IGFjY291bnRMaXN0W2kgKyBfc3RhcnRdOwogICAgfQogICAgcmV0dXJuIF9zbGljZTsKICB9CiAgCiAgLyoqCiAgICogRnJlZXplIHRva2VuIHRyYW5zZmVycy4KICAgKiBNYXkgb25seSBiZSBjYWxsZWQgYnkgc21hcnQgY29udHJhY3Qgb3duZXIuCiAgICovCiAgZnVuY3Rpb24gZnJlZXplVHJhbnNmZXJzICgpIHB1YmxpYyB7CiAgICByZXF1aXJlIChvd25lcnNbbXNnLnNlbmRlcl0pOwoKICAgIGlmICghZnJvemVuKSB7CiAgICAgIGZyb3plbiA9IHRydWU7CiAgICAgIGVtaXQgRnJlZXplICgpOwogICAgfQogIH0KCiAgLyoqCiAgICogVW5mcmVlemUgdG9rZW4gdHJhbnNmZXJzLgogICAqIE1heSBvbmx5IGJlIGNhbGxlZCBieSBzbWFydCBjb250cmFjdCBvd25lci4KICAgKi8KICBmdW5jdGlvbiB1bmZyZWV6ZVRyYW5zZmVycyAoKSBwdWJsaWMgewogICAgcmVxdWlyZSAob3duZXJzW21zZy5zZW5kZXJdKTsKCiAgICBpZiAoZnJvemVuKSB7CiAgICAgIGZyb3plbiA9IGZhbHNlOwogICAgICBlbWl0IFVuZnJlZXplICgpOwogICAgfQogIH0KCiAgLyoqCiAgICogTG9nZ2VkIHdoZW4gdG9rZW4gdHJhbnNmZXJzIHdlcmUgZnJvemVuLgogICAqLwogIGV2ZW50IEZyZWV6ZSAoKTsKCiAgLyoqCiAgICogTG9nZ2VkIHdoZW4gdG9rZW4gdHJhbnNmZXJzIHdlcmUgdW5mcm96ZW4uCiAgICovCiAgZXZlbnQgVW5mcmVlemUgKCk7CgogIC8qKgogICAqIEtpbGwgdGhlIHRva2VuLgogICAqLwogIGZ1bmN0aW9uIGtpbGwoKSBwdWJsaWMgeyAKICAgIGlmIChvd25lcnNbbXNnLnNlbmRlcl0pIHNlbGZkZXN0cnVjdChtc2cuc2VuZGVyKTsKICB9Cn0='.
	

]
