Class {
	#name : #SRTdab860de671cc76c4a341615b69f878a08bb9bbb,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdab860de671cc76c4a341615b69f878a08bb9bbb >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7Cgpjb250cmFjdCBFUkMyMjMgewogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLy8gRVJDMjIzIGZ1bmN0aW9ucyBhbmQgZXZlbnRzCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgX3N1cHBseSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBvayk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhLCBzdHJpbmcgY3VzdG9tRmFsbGJhY2spIHB1YmxpYyByZXR1cm5zIChib29sIG9rKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUsIGJ5dGVzIGluZGV4ZWQgZGF0YSk7CgogICAgLy8gRVJDMjIzIGZ1bmN0aW9ucwogICAgZnVuY3Rpb24gbmFtZSgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChzdHJpbmcgX25hbWUpOwogICAgZnVuY3Rpb24gc3ltYm9sKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHN0cmluZyBfc3ltYm9sKTsKICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscyk7CgogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgLy9mdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAvLyBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAvLyBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKTsKICAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEluY2x1ZGUgU2FmZU1hdGggTGliCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CiAgICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBNQVhfVUlOVDI1NiA9CiAgICAweEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY7CgogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgaWYgKHggPiBNQVhfVUlOVDI1NiAtIHkpCiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIHJldHVybiB4ICsgeTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBpZiAoeCA8IHkpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB4IC0geTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICBpZiAoeSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICBpZiAoeCA+IE1BWF9VSU5UMjU2IC8geSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHggKiB5OwogICAgfQp9CgovKgogKiBDb250cmFjdCB0aGF0IGlzIHdvcmtpbmcgd2l0aCBFUkMyMjMgdG9rZW5zCiAqLwogY29udHJhY3QgQ29udHJhY3RSZWNlaXZlciB7CgogICAgc3RydWN0IFRLTiB7CiAgICAgICAgYWRkcmVzcyBzZW5kZXI7CiAgICAgICAgdWludCB2YWx1ZTsKICAgICAgICBieXRlcyBkYXRhOwogICAgICAgIGJ5dGVzNCBzaWc7CiAgICB9CgogICAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHB1YmxpYyB7CiAgICAgIFRLTiBtZW1vcnkgdGtuOwogICAgICB0a24uc2VuZGVyID0gX2Zyb207CiAgICAgIHRrbi52YWx1ZSA9IF92YWx1ZTsKICAgICAgdGtuLmRhdGEgPSBfZGF0YTsKICAgICAgdWludDMyIHUgPSB1aW50MzIoX2RhdGFbM10pICsgKHVpbnQzMihfZGF0YVsyXSkgPDwgOCkgKyAodWludDMyKF9kYXRhWzFdKSA8PCAxNikgKyAodWludDMyKF9kYXRhWzBdKSA8PCAyNCk7CiAgICAgIHRrbi5zaWcgPSBieXRlczQodSk7CgogICAgICAvKiB0a24gdmFyaWFibGUgaXMgYW5hbG9ndWUgb2YgbXNnIHZhcmlhYmxlIG9mIEV0aGVyIHRyYW5zYWN0aW9uCiAgICAgICogIHRrbi5zZW5kZXIgaXMgcGVyc29uIHdobyBpbml0aWF0ZWQgdGhpcyB0b2tlbiB0cmFuc2FjdGlvbiAgIChhbmFsb2d1ZSBvZiBtc2cuc2VuZGVyKQogICAgICAqICB0a24udmFsdWUgdGhlIG51bWJlciBvZiB0b2tlbnMgdGhhdCB3ZXJlIHNlbnQgICAoYW5hbG9ndWUgb2YgbXNnLnZhbHVlKQogICAgICAqICB0a24uZGF0YSBpcyBkYXRhIG9mIHRva2VuIHRyYW5zYWN0aW9uICAgKGFuYWxvZ3VlIG9mIG1zZy5kYXRhKQogICAgICAqICB0a24uc2lnIGlzIDQgYnl0ZXMgc2lnbmF0dXJlIG9mIGZ1bmN0aW9uCiAgICAgICogIGlmIGRhdGEgb2YgdG9rZW4gdHJhbnNhY3Rpb24gaXMgYSBmdW5jdGlvbiBleGVjdXRpb24KICAgICAgKi8KICAgIH0KfQoKLyoKICogQ0wgdG9rZW4gd2l0aCBFUkMyMjMgRXh0ZW5zaW9ucwogKi8KY29udHJhY3QgQ0wgaXMgRVJDMjIzLCBTYWZlTWF0aCB7CgogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIlRDb2luIjsKCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJUQ29pbiI7CgogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gODsKCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDEwMDAwICogMTAqKjI7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBhZG1pbjsKCiAgLy8gIGJvb2wgcHVibGljIHVubG9ja2VkID0gZmFsc2U7CgogICAgYm9vbCBwdWJsaWMgdG9rZW5DcmVhdGVkID0gZmFsc2U7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgCiAgICBmdW5jdGlvbiBhZG1pbmVkKCl7CiAgIGFkbWluID0gbXNnLnNlbmRlcjsKICB9CiAgCgogICAgLy8gSW5pdGlhbGl6ZSB0byBoYXZlIG93bmVyIGhhdmUgMTAwLDAwMCwwMDAsMDAwIENMIG9uIGNvbnRyYWN0IGNyZWF0aW9uCiAgICAvLyBDb25zdHJ1Y3RvciBpcyBjYWxsZWQgb25seSBvbmNlIGFuZCBjYW4gbm90IGJlIGNhbGxlZCBhZ2FpbiAoRXRoZXJldW0gU29saWRpdHkgc3BlY2lmaWNhdGlvbikKICAgIGZ1bmN0aW9uIENMKCkgcHVibGljIHsKCiAgICAgIAogICAgICAgIC8vIEVuc3VyZSB0b2tlbiBnZXRzIGNyZWF0ZWQgb25jZSBvbmx5CiAgICAgICAgcmVxdWlyZSh0b2tlbkNyZWF0ZWQgPT0gZmFsc2UpOwogICAgICAgIHRva2VuQ3JlYXRlZCA9IHRydWU7CgogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSB0b3RhbFN1cHBseTsKCiAgICAgICAgLy8gRmluYWwgc2FuaXR5IGNoZWNrIHRvIGVuc3VyZSBvd25lciBiYWxhbmNlIGlzIGdyZWF0ZXIgdGhhbiB6ZXJvCiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tvd25lcl0gPiAwKTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQogICAgIG1vZGlmaWVyIG9ubHlBZG1pbigpewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluKSA7CiAgICBfOwogIH0KICBmdW5jdGlvbiB0cmFuc2ZlckFkbWluc2hpcChhZGRyZXNzIG5ld0FkbWluKSBvbmx5QWRtaW4gewogICAgIAogICAgYWRtaW4gPSBuZXdBZG1pbjsKICB9CiAgCiAgCgogICAgLy8gRnVuY3Rpb24gdG8gZGlzdHJpYnV0ZSB0b2tlbnMgdG8gbGlzdCBvZiBhZGRyZXNzZXMgYnkgdGhlIHByb3ZpZGVkIGFtb3VudAogICAgLy8gVmVyaWZ5IGFuZCByZXF1aXJlIHRoYXQ6CiAgICAvLyAtIEJhbGFuY2Ugb2Ygb3duZXIgY2Fubm90IGJlIG5lZ2F0aXZlCiAgICAvLyAtIEFsbCB0cmFuc2ZlcnMgY2FuIGJlIGZ1bGZpbGxlZCB3aXRoIHJlbWFpbmluZyBvd25lciBiYWxhbmNlCiAgICAvLyAtIE5vIG5ldyB0b2tlbnMgY2FuIGV2ZXIgYmUgbWludGVkIGV4Y2VwdCBvcmlnaW5hbGx5IGNyZWF0ZWQgMTAwLDAwMCwwMDAsMDAwCiAgICBmdW5jdGlvbiBkaXN0cmlidXRlQWlyZHJvcChhZGRyZXNzW10gYWRkcmVzc2VzLCB1aW50MjU2IGFtb3VudCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgLy8gT25seSBhbGxvdyB1bmRyb3Agd2hpbGUgdG9rZW4gaXMgbG9ja2VkCiAgICAgICAgLy8gQWZ0ZXIgdG9rZW4gaXMgdW5sb2NrZWQsIHRoaXMgbWV0aG9kIGJlY29tZXMgcGVybWFuZW50bHkgZGlzYWJsZWQKICAgICAgICAvL3JlcXVpcmUodW5sb2NrZWQpOwoKICAgICAgICAvLyBBbW91bnQgaXMgaW4gV2VpLCBjb252ZXJ0IHRvIENMIGFtb3VudCBpbiA4IGRlY2ltYWwgcGxhY2VzCiAgICAgICAgdWludDI1NiBub3JtYWxpemVkQW1vdW50ID0gYW1vdW50ICogMTAqKjg7CiAgICAgICAgLy8gT25seSBwcm9jZWVkIGlmIHRoZXJlIGFyZSBlbm91Z2ggdG9rZW5zIHRvIGJlIGRpc3RyaWJ1dGVkIHRvIGFsbCBhZGRyZXNzZXMKICAgICAgICAvLyBOZXZlciBhbGxvdyBiYWxhbmNlIG9mIG93bmVyIHRvIGJlY29tZSBuZWdhdGl2ZQogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbb3duZXJdID49IHNhZmVNdWwoYWRkcmVzc2VzLmxlbmd0aCwgbm9ybWFsaXplZEFtb3VudCkpOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGFkZHJlc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBzYWZlU3ViKGJhbGFuY2VPZihvd25lciksIG5vcm1hbGl6ZWRBbW91bnQpOwogICAgICAgICAgICBiYWxhbmNlc1thZGRyZXNzZXNbaV1dID0gc2FmZUFkZChiYWxhbmNlT2YoYWRkcmVzc2VzW2ldKSwgbm9ybWFsaXplZEFtb3VudCk7CiAgICAgICAgICAgIFRyYW5zZmVyKG93bmVyLCBhZGRyZXNzZXNbaV0sIG5vcm1hbGl6ZWRBbW91bnQpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBGdW5jdGlvbiB0byBhY2Nlc3MgbmFtZSBvZiB0b2tlbiAuc2hhCiAgICBmdW5jdGlvbiBuYW1lKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHN0cmluZyBfbmFtZSkgewogICAgICAgIHJldHVybiBuYW1lOwogICAgfQogICAgLy8gRnVuY3Rpb24gdG8gYWNjZXNzIHN5bWJvbCBvZiB0b2tlbiAuCiAgICBmdW5jdGlvbiBzeW1ib2woKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAoc3RyaW5nIF9zeW1ib2wpIHsKICAgICAgICByZXR1cm4gc3ltYm9sOwogICAgfQogICAgLy8gRnVuY3Rpb24gdG8gYWNjZXNzIGRlY2ltYWxzIG9mIHRva2VuIC4KICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscykgewogICAgICAgIHJldHVybiBkZWNpbWFsczsKICAgIH0KICAgIC8vIEZ1bmN0aW9uIHRvIGFjY2VzcyB0b3RhbCBzdXBwbHkgb2YgdG9rZW5zIC4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KSB7CiAgICAgICAgcmV0dXJuIHRvdGFsU3VwcGx5OwogICAgfQoKICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSB1c2VyIG9yIGFub3RoZXIgY29udHJhY3Qgd2FudHMgdG8gdHJhbnNmZXIgZnVuZHMgLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSwgc3RyaW5nIF9jdXN0b21fZmFsbGJhY2spIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgLy8gT25seSBhbGxvdyB0cmFuc2ZlciBvbmNlIHVubG9ja2VkCiAgICAgICAgLy8gT25jZSBpdCBpcyB1bmxvY2tlZCwgaXQgaXMgdW5sb2NrZWQgZm9yZXZlciBhbmQgbm8gb25lIGNhbiBsb2NrIGFnYWluCiAgICAgICAvLyByZXF1aXJlKHVubG9ja2VkKTsKCiAgICAgICAgaWYgKGlzQ29udHJhY3QoX3RvKSkgewogICAgICAgICAgICBpZiAoYmFsYW5jZU9mKG1zZy5zZW5kZXIpIDwgX3ZhbHVlKSB7CiAgICAgICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZU9mKG1zZy5zZW5kZXIpLCBfdmFsdWUpOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlT2YoX3RvKSwgX3ZhbHVlKTsKICAgICAgICAgICAgQ29udHJhY3RSZWNlaXZlciByZWNlaXZlciA9IENvbnRyYWN0UmVjZWl2ZXIoX3RvKTsKICAgICAgICAgICAgcmVjZWl2ZXIuY2FsbC52YWx1ZSgwKShieXRlczQoc2hhMyhfY3VzdG9tX2ZhbGxiYWNrKSksIG1zZy5zZW5kZXIsIF92YWx1ZSwgX2RhdGEpOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIHVzZXIgb3IgYW5vdGhlciBjb250cmFjdCB3YW50cyB0byB0cmFuc2ZlciBmdW5kcyAuCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgICAgICAvLyBPbmx5IGFsbG93IHRyYW5zZmVyIG9uY2UgdW5sb2NrZWQKICAgICAgICAvLyBPbmNlIGl0IGlzIHVubG9ja2VkLCBpdCBpcyB1bmxvY2tlZCBmb3JldmVyIGFuZCBubyBvbmUgY2FuIGxvY2sgYWdhaW4KICAgICAgIC8vIHJlcXVpcmUodW5sb2NrZWQpOwoKICAgICAgICBpZiAoaXNDb250cmFjdChfdG8pKSB7CiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlclRvQ29udHJhY3QoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICB9CiAgICB9CiAgICAKCiAgICAvLyBTdGFuZGFyZCBmdW5jdGlvbiB0cmFuc2ZlciBzaW1pbGFyIHRvIEVSQzIyMyB0cmFuc2ZlciB3aXRoIG5vIF9kYXRhIC4KICAgIC8vIEFkZGVkIGR1ZSB0byBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSByZWFzb25zIC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgICAgICAvLyBPbmx5IGFsbG93IHRyYW5zZmVyIG9uY2UgdW5sb2NrZWQKICAgICAgICAvLyBPbmNlIGl0IGlzIHVubG9ja2VkLCBpdCBpcyB1bmxvY2tlZCBmb3JldmVyIGFuZCBubyBvbmUgY2FuIGxvY2sgYWdhaW4KICAgICAgICAvL3JlcXVpcmUodW5sb2NrZWQpOwoKICAgICAgICAvL3N0YW5kYXJkIGZ1bmN0aW9uIHRyYW5zZmVyIHNpbWlsYXIgdG8gRVJDMjIzIHRyYW5zZmVyIHdpdGggbm8gX2RhdGEKICAgICAgICAvL2FkZGVkIGR1ZSB0byBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSByZWFzb25zCiAgICAgICAgYnl0ZXMgbWVtb3J5IGVtcHR5OwogICAgICAgIGlmIChpc0NvbnRyYWN0KF90bykpIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9Db250cmFjdChfdG8sIF92YWx1ZSwgZW1wdHkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgZW1wdHkpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBhc3NlbWJsZSB0aGUgZ2l2ZW4gYWRkcmVzcyBieXRlY29kZS4gSWYgYnl0ZWNvZGUgZXhpc3RzIHRoZW4gdGhlIF9hZGRyIGlzIGEgY29udHJhY3QuCiAgICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBpc19jb250cmFjdCkgewogICAgICAgIHVpbnQgbGVuZ3RoOwogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgLy9yZXRyaWV2ZSB0aGUgc2l6ZSBvZiB0aGUgY29kZSBvbiB0YXJnZXQgYWRkcmVzcywgdGhpcyBuZWVkcyBhc3NlbWJseQogICAgICAgICAgICBsZW5ndGggOj0gZXh0Y29kZXNpemUoX2FkZHIpCiAgICAgICAgfQogICAgICAgIHJldHVybiAobGVuZ3RoID4gMCk7CiAgICB9CgogICAgLy8gZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiB0cmFuc2FjdGlvbiB0YXJnZXQgaXMgYW4gYWRkcmVzcwogICAgZnVuY3Rpb24gdHJhbnNmZXJUb0FkZHJlc3MoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHJpdmF0ZSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZU9mKG1zZy5zZW5kZXIpIDwgX3ZhbHVlKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZU9mKG1zZy5zZW5kZXIpLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZihfdG8pLCBfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKCiAgICAvLyBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhIGNvbnRyYWN0CiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvQ29udHJhY3QoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHJpdmF0ZSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZU9mKG1zZy5zZW5kZXIpIDwgX3ZhbHVlKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZU9mKG1zZy5zZW5kZXIpLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZihfdG8pLCBfdmFsdWUpOwogICAgICAgIENvbnRyYWN0UmVjZWl2ZXIgcmVjZWl2ZXIgPSBDb250cmFjdFJlY2VpdmVyKF90byk7CiAgICAgICAgcmVjZWl2ZXIudG9rZW5GYWxsYmFjayhtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEdldCBiYWxhbmNlIG9mIHRoZSBhZGRyZXNzIHByb3ZpZGVkCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAgLy8gQ3JlYXRvci9Pd25lciBjYW4gdW5sb2NrZWQgaXQgb25jZSBhbmQgaXQgY2FuIG5ldmVyIGJlIGxvY2tlZCBhZ2FpbgogICAgIC8vIFVzZSBhZnRlciBhaXJkcm9wIGlzIGNvbXBsZXRlCiAgIC8qIGZ1bmN0aW9uIHVubG9ja0ZvcmV2ZXIoKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICB1bmxvY2tlZCA9IHRydWU7CiAgICB9Ki8KCiAgICAvLyBBbGxvdyB0cmFuc2ZlcnMgaWYgdGhlIG93bmVyIHByb3ZpZGVkIGFuIGFsbG93YW5jZQogICAgLy8gUHJldmVudCBmcm9tIGFueSB0cmFuc2ZlcnMgaWYgdG9rZW4gaXMgbm90IHlldCB1bmxvY2tlZAogICAgLy8gVXNlIFNhZmVNYXRoIGZvciB0aGUgbWFpbiBsb2dpYwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vIE9ubHkgYWxsb3cgdHJhbnNmZXIgb25jZSB1bmxvY2tlZAogICAgICAgIC8vIE9uY2UgaXQgaXMgdW5sb2NrZWQsIGl0IGlzIHVubG9ja2VkIGZvcmV2ZXIgYW5kIG5vIG9uZSBjYW4gbG9jayBhZ2FpbgogICAgICAgIC8vcmVxdWlyZSh1bmxvY2tlZCk7CiAgICAgICAgLy8gUHJvdGVjdCBhZ2FpbnN0IHdyYXBwaW5nIHVpbnRzLgogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pOwogICAgICAgIHVpbnQyNTYgYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93YW5jZSA+PSBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZihfdG8pLCBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZU9mKF9mcm9tKSwgX3ZhbHVlKTsKICAgICAgICBpZiAoYWxsb3dhbmNlIDwgTUFYX1VJTlQyNTYpIHsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgICAgIH0KICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZnVuY3Rpb24gbWludFRva2VuKGFkZHJlc3MgdGFyZ2V0LCB1aW50MjU2IG1pbnRlZEFtb3VudCkgb25seU93bmVyewogICAgYmFsYW5jZXNbdGFyZ2V0XSArPSBtaW50ZWRBbW91bnQ7CiAgICB0b3RhbFN1cHBseSArPSBtaW50ZWRBbW91bnQ7CiAgICBUcmFuc2ZlcigwLCB0aGlzLCBtaW50ZWRBbW91bnQpOwogICAgVHJhbnNmZXIodGhpcywgdGFyZ2V0LCBtaW50ZWRBbW91bnQpOwogIH0KICAKICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOyAgIAogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsgICAgICAgICAgICAKICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIEJ1cm4obXNnLnNlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAKfQ=='.
	

]
