Class {
	#name : #SRTde3ef098c2b8a1f1598a272e959c479b8376265d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTde3ef098c2b8a1f1598a272e959c479b8376265d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Ci8qKgogKiBPdmVyZmxvdyBhd2FyZSB1aW50IG1hdGggZnVuY3Rpb25zLgogKi8KY29udHJhY3QgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBwY3QodWludCBudW1lcmF0b3IsIHVpbnQgZGVub21pbmF0b3IsIHVpbnQgcHJlY2lzaW9uKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQgcXVvdGllbnQpIHsKICAgIHVpbnQgX251bWVyYXRvciA9IG51bWVyYXRvciAqIDEwICoqIChwcmVjaXNpb24rMSk7CiAgICB1aW50IF9xdW90aWVudCA9ICgoX251bWVyYXRvciAvIGRlbm9taW5hdG9yKSArIDUpIC8gMTA7CiAgICByZXR1cm4gKF9xdW90aWVudCk7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCn0KCi8qKgogKiBFUkMgMjAgdG9rZW4KICovCmNvbnRyYWN0IFRva2VuIHsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLy8gQSB2dWxlcm5hYmlsaXR5IG9mIHRoZSBhcHByb3ZlIG1ldGhvZCBpbiB0aGUgRVJDMjAgc3RhbmRhcmQgd2FzIGlkZW50aWZpZWQgYnkKICAgIC8vIE1pa2hhaWwgVmxhZGltaXJvdiBhbmQgRG1pdHJ5IEtob3ZyYXRvdmljaCBoZXJlOgogICAgLy8gaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xWUxQdFF4WnUxVUF2TzljWjFPMlJQWEJiVDBtb29oNERZS2pBX2pwLVJMTQogICAgLy8gSXQncyBiZXR0ZXIgdG8gdXNlIHRoaXMgbWV0aG9kIHdoaWNoIGlzIG5vdCBzdXNjZXB0aWJsZSB0byBvdmVyLXdpdGhkcmF3aW5nIGJ5IHRoZSBhcHByb3ZlZS4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3MgdG8gYXBwcm92ZQogICAgLy8vIEBwYXJhbSBfY3VycmVudFZhbHVlIFRoZSBwcmV2aW91cyB2YWx1ZSBhcHByb3ZlZCwgd2hpY2ggY2FuIGJlIHJldHJpZXZlZCB3aXRoIGFsbG93YW5jZShtc2cuc2VuZGVyLCBfc3BlbmRlcikKICAgIC8vLyBAcGFyYW0gX25ld1ZhbHVlIFRoZSBuZXcgdmFsdWUgdG8gYXBwcm92ZSwgdGhpcyB3aWxsIHJlcGxhY2UgdGhlIF9jdXJyZW50VmFsdWUKICAgIC8vLyBAcmV0dXJuIGJvb2wgV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIGEgc3VjY2VzcyAoc2VlIEVSQzIwJ3MgYGFwcHJvdmVgKQogICAgZnVuY3Rpb24gY29tcGFyZUFuZEFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfY3VycmVudFZhbHVlLCB1aW50MjU2IF9uZXdWYWx1ZSkgcHVibGljIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSBfY3VycmVudFZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBhcHByb3ZlKF9zcGVuZGVyLCBfbmV3VmFsdWUpOwogICAgfQp9Cgpjb250cmFjdCBDSEVYVG9rZW4gaXMgVG9rZW4sIFNhZmVNYXRoIHsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiQ0hFWCBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJDSFgiOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQgcHVibGljIHN0YXJ0QmxvY2s7IC8vY3Jvd2RzYWxlIHN0YXJ0IGJsb2NrCiAgICB1aW50IHB1YmxpYyBlbmRCbG9jazsgLy9jcm93ZHNhbGUgZW5kIGJsb2NrCgogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlcjsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgCiAgICB1aW50IHB1YmxpYyB0b3RhbFRva2VucyA9IDIwMDAwMDAwMDAgKiAxMCoqZGVjaW1hbHM7IC8vIDJiIHRva2VucywgZWFjaCBkaXZpZGVkIHRvIHVwIHRvIDEwXmRlY2ltYWxzIHVuaXRzLgogICAgdWludCBwdWJsaWMgZXRoZXJDYXAgPSAyNTAwMDAwICogMTAqKmRlY2ltYWxzOwoKICAgIHVpbnQgcHVibGljIHByZXNhbGVTdXBwbHkgPSAwOwogICAgdWludCBwdWJsaWMgcHJlc2FsZUV0aGVyUmFpc2VkID0gMDsKCiAgICBldmVudCBCdXkoYWRkcmVzcyBpbmRleGVkIHJlY2lwaWVudCwgdWludCBldGgsIHVpbnQgY2h4KTsKICAgIGV2ZW50IERlbGl2ZXIoYWRkcmVzcyBpbmRleGVkIHJlY2lwaWVudCwgdWludCBjaHgsIHN0cmluZyBfZm9yKTsKCiAgICB1aW50IHB1YmxpYyBwcmVzYWxlQWxsb2NhdGlvbiA9IHRvdGFsVG9rZW5zIC8gMjsgLy81MCUgb2YgdG9rZW4gc3VwcGx5IGFsbG9jYXRlZCBmb3IgY3Jvd2RzYWxlCiAgICB1aW50IHB1YmxpYyBlY29zeXN0ZW1BbGxvY2F0aW9uID0gdG90YWxUb2tlbnMgLyA0OyAvLzI1JSBvZiB0b2tlbiBzdXBwbHkgYWxsb2NhdGVkIHBvc3QtY3Jvd2RzYWxlIGZvciB0aGUgZWNvc3lzdGVtIGZ1bmQKICAgIHVpbnQgcHVibGljIHJlc2VydmVkQWxsb2NhdGlvbiA9IHRvdGFsVG9rZW5zIC8gNDsgLy8yNSUgb2YgdG9rZW4gc3VwcGx5IGFsbG9jYXRlZCBwb3N0LWNyb3dkc2FsZSBmb3IgaW50ZXJuYWwKICAgIGJvb2wgcHVibGljIGVjb3N5c3RlbUFsbG9jYXRlZCA9IGZhbHNlOwoKICAgIGVudW0gVG9rZW5TYWxlU3RhdGUgewogICAgICAgIEluaXRpYWwsICAgIC8vY29udHJhY3QgaW5pdGlhbGl6ZWQsIGJvbnVzIHRva2VuCiAgICAgICAgUHJlc2FsZSwgICAgLy9saW1pdGVkIHRpbWUgY3Jvd2RzYWxlCiAgICAgICAgTGl2ZSwgICAgICAgLy9kZWZhdWx0IHByaWNlCiAgICAgICAgRnJvemVuICAgICAgLy9wcmV2ZW50IHNhbGUgb2YgdG9rZW5zCiAgICB9CgogICAgVG9rZW5TYWxlU3RhdGUgcHVibGljIF9zYWxlU3RhdGUgPSBUb2tlblNhbGVTdGF0ZS5Jbml0aWFsOwoKICAgIGZ1bmN0aW9uIENIRVhUb2tlbihhZGRyZXNzIGZvdW5kZXJJbnB1dCwgYWRkcmVzcyBvd25lcklucHV0LCB1aW50IHN0YXJ0QmxvY2tJbnB1dCwgdWludCBlbmRCbG9ja0lucHV0KSB7CiAgICAgICAgZm91bmRlciA9IGZvdW5kZXJJbnB1dDsKICAgICAgICBvd25lciA9IG93bmVySW5wdXQ7CiAgICAgICAgc3RhcnRCbG9jayA9IHN0YXJ0QmxvY2tJbnB1dDsKICAgICAgICBlbmRCbG9jayA9IGVuZEJsb2NrSW5wdXQ7CiAgICAgICAgdXBkYXRlVG9rZW5TYWxlU3RhdGUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmljZSgpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIGlmIChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLkluaXRpYWwpIHJldHVybiA2MDAxOwogICAgICAgIGlmIChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLlByZXNhbGUpIHsKICAgICAgICAgICAgdWludCBwZXJjZW50UmVtYWluaW5nID0gcGN0KChlbmRCbG9jayAtIGJsb2NrLm51bWJlciksIChlbmRCbG9jayAtIHN0YXJ0QmxvY2spLCAzKTsKICAgICAgICAgICAgcmV0dXJuIDMwMDAgKyAzICogcGVyY2VudFJlbWFpbmluZzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIDMwMDA7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlVG9rZW5TYWxlU3RhdGUgKCkgewogICAgICAgIGlmIChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLkZyb3plbikgcmV0dXJuOwoKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5MaXZlICYmIGJsb2NrLm51bWJlciA+IGVuZEJsb2NrKSByZXR1cm47CiAgICAgICAgCiAgICAgICAgaWYgKF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuSW5pdGlhbCAmJiBibG9jay5udW1iZXIgPj0gc3RhcnRCbG9jaykgewogICAgICAgICAgICBfc2FsZVN0YXRlID0gVG9rZW5TYWxlU3RhdGUuUHJlc2FsZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuUHJlc2FsZSAmJiBibG9jay5udW1iZXIgPiBlbmRCbG9jaykgewogICAgICAgICAgICBfc2FsZVN0YXRlID0gVG9rZW5TYWxlU3RhdGUuTGl2ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBidXkobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgcmVjaXBpZW50KSBwYXlhYmxlIHsKICAgICAgICBpZiAocmVjaXBpZW50ID09IDB4MCkgdGhyb3c7CiAgICAgICAgaWYgKHRvdGFsU3VwcGx5ID49IHRvdGFsVG9rZW5zKSB0aHJvdzsKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5Gcm96ZW4pIHRocm93OwogICAgICAgIGlmICgoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5Jbml0aWFsIHx8IF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuUHJlc2FsZSkgJiYgcHJlc2FsZVN1cHBseSA+PSBwcmVzYWxlQWxsb2NhdGlvbikgdGhyb3c7CiAgICAgICAgaWYgKChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLkluaXRpYWwgfHwgX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5QcmVzYWxlKSAmJiBwcmVzYWxlRXRoZXJSYWlzZWQgPj0gZXRoZXJDYXApIHRocm93OwoKICAgICAgICB1cGRhdGVUb2tlblNhbGVTdGF0ZSgpOwogICAgICAgIHVpbnQgdG9rZW5zID0gbXVsKG1zZy52YWx1ZSwgcHJpY2UoKSk7CgogICAgICAgIGlmICh0b2tlbnMgPD0gMCkgdGhyb3c7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IGFkZChiYWxhbmNlc1tyZWNpcGllbnRdLCB0b2tlbnMpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gYWRkKHRvdGFsU3VwcGx5LCB0b2tlbnMpOwoKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA8PSBUb2tlblNhbGVTdGF0ZS5QcmVzYWxlKSB7CiAgICAgICAgICAgIHByZXNhbGVFdGhlclJhaXNlZCA9IGFkZChwcmVzYWxlRXRoZXJSYWlzZWQsIG1zZy52YWx1ZSk7CiAgICAgICAgICAgIHByZXNhbGVTdXBwbHkgPSBhZGQocHJlc2FsZVN1cHBseSwgdG9rZW5zKTsKICAgICAgICB9CgogICAgICAgIGZvdW5kZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICAgICAgCiAgICAgICAgQnV5KHJlY2lwaWVudCwgbXNnLnZhbHVlLCB0b2tlbnMpOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlJbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gZm91bmRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxpdmVyKGFkZHJlc3MgcmVjaXBpZW50LCB1aW50IHRva2Vucywgc3RyaW5nIF9mb3IpIG9ubHlJbnRlcm5hbCB7CiAgICAgICAgaWYgKHRva2VucyA9PSAwKSB0aHJvdzsKICAgICAgICBpZiAodG90YWxTdXBwbHkgPj0gdG90YWxUb2tlbnMpIHRocm93OwogICAgICAgIGlmIChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLkZyb3plbikgdGhyb3c7CiAgICAgICAgaWYgKChfc2FsZVN0YXRlID09IFRva2VuU2FsZVN0YXRlLkluaXRpYWwgfHwgX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5QcmVzYWxlKSAmJiBwcmVzYWxlU3VwcGx5ID49IHByZXNhbGVBbGxvY2F0aW9uKSB0aHJvdzsKCiAgICAgICAgdXBkYXRlVG9rZW5TYWxlU3RhdGUoKTsKCiAgICAgICAgaWYgKGFkZCh0b3RhbFN1cHBseSwgdG9rZW5zKSA+PSB0b3RhbFRva2VucykgdGhyb3c7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IGFkZChiYWxhbmNlc1tyZWNpcGllbnRdLCB0b2tlbnMpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gYWRkKHRvdGFsU3VwcGx5LCB0b2tlbnMpOwoKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5Jbml0aWFsIHx8IF9zYWxlU3RhdGUgPT0gVG9rZW5TYWxlU3RhdGUuUHJlc2FsZSkgewogICAgICAgICAgICBwcmVzYWxlU3VwcGx5ID0gYWRkKHByZXNhbGVTdXBwbHksIHRva2Vucyk7CiAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICBEZWxpdmVyKHJlY2lwaWVudCwgdG9rZW5zLCBfZm9yKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvY2F0ZUVjb3N5c3RlbVRva2VucygpIG9ubHlJbnRlcm5hbCB7CiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8PSBlbmRCbG9jaykgdGhyb3c7CiAgICAgICAgaWYgKGVjb3N5c3RlbUFsbG9jYXRlZCkgdGhyb3c7CgogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGFkZChiYWxhbmNlc1tvd25lcl0sIGVjb3N5c3RlbUFsbG9jYXRpb24pOwogICAgICAgIHRvdGFsU3VwcGx5ID0gYWRkKHRvdGFsU3VwcGx5LCBlY29zeXN0ZW1BbGxvY2F0aW9uKTsKCiAgICAgICAgYmFsYW5jZXNbZm91bmRlcl0gPSBhZGQoYmFsYW5jZXNbZm91bmRlcl0sIHJlc2VydmVkQWxsb2NhdGlvbik7CiAgICAgICAgdG90YWxTdXBwbHkgPSBhZGQodG90YWxTdXBwbHksIHJlc2VydmVkQWxsb2NhdGlvbik7CgogICAgICAgIGVjb3N5c3RlbUFsbG9jYXRlZCA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZnJlZXplKCkgb25seUludGVybmFsIHsKICAgICAgICBfc2FsZVN0YXRlID0gVG9rZW5TYWxlU3RhdGUuRnJvemVuOwogICAgfQoKICAgIGZ1bmN0aW9uIHVuZnJlZXplKCkgb25seUludGVybmFsIHsKICAgICAgICBfc2FsZVN0YXRlID0gVG9rZW5TYWxlU3RhdGUuUHJlc2FsZTsKICAgICAgICB1cGRhdGVUb2tlblNhbGVTdGF0ZSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0U2FsZVBoYXNlICh1aW50IHN0YXJ0LCB1aW50IGxlbmd0aCkgb25seUludGVybmFsIHsKICAgICAgICBpZiAoX3NhbGVTdGF0ZSA9PSBUb2tlblNhbGVTdGF0ZS5QcmVzYWxlKSB0aHJvdzsKICAgICAgICBpZiAobGVuZ3RoID09IDApIHRocm93OwogICAgICAgIGlmIChzdGFydCA9PSAwKSBzdGFydCA9IGJsb2NrLm51bWJlcjsKCiAgICAgICAgc3RhcnRCbG9jayA9IHN0YXJ0OwogICAgICAgIGVuZEJsb2NrID0gc3RhcnRCbG9jayArIGxlbmd0aDsKCiAgICAgICAgdXBkYXRlVG9rZW5TYWxlU3RhdGUoKTsKICAgIH0KCn0='.
	

]
