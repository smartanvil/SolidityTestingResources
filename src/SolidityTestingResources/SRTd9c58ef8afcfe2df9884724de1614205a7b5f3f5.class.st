Class {
	#name : #SRTd9c58ef8afcfe2df9884724de1614205a7b5f3f5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd9c58ef8afcfe2df9884724de1614205a7b5f3f5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBUb2tlbiB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7Cn0KCgovKiAgRVJDIDIwIHRva2VuICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4gewoKCiAgICBzdHJ1Y3QgTENCYWxhbmNlewogICAgICAgIHVpbnQgbGNWYWx1ZTsKICAgICAgICB1aW50IGxvY2tUaW1lOwogICAgICAgIHVpbnQgZXRoVmFsdWU7CgogICAgICAgIHVpbnQgaW5kZXg7CiAgICAgICAgYnl0ZXMzMiBpbmRleEhhc2g7CiAgICAgICAgdWludCBsb3R0ZXJ5TnVtOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdLmxjVmFsdWUgPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDAmJiAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja1RpbWUhPTApIHsgICAgICAgCiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmxjVmFsdWUgLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dLmxjVmFsdWUgKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXS5sY1ZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZkV0aChhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl0uZXRoVmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mTG9ja1RpbWUoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdLmxvY2tUaW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZkxvdHRlcnlOdW0oYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdLmxvdHRlcnlOdW07CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBMQ0JhbGFuY2UpIGJhbGFuY2VzOwp9Cgpjb250cmFjdCBMQ1Rva2VuIGlzIFN0YW5kYXJkVG9rZW4gewogICAgLy8gbWV0YWRhdGEKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJCdWxscyBhbmQgQ293cyI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJCQUMiOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIHN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICIxLjAiOwoKICAgIC8vIGNvbnN0YW50CiAgICB1aW50MjU2IHZhbDEgPSAxIHdlaTsgICAgLy8gMQogICAgdWludDI1NiB2YWwyID0gMSBzemFibzsgIC8vIDEgKiAxMCAqKiAxMgogICAgdWludDI1NiB2YWwzID0gMSBmaW5uZXk7IC8vIDEgKiAxMCAqKiAxNQogICAgdWludDI1NiB2YWw0ID0gMSBldGhlcjsgIC8vIDEgKiAxMCAqKiAxOAoKICAgIC8vIGNvbnRhY3Qgc2V0dGluZwogICAgYWRkcmVzcyBwdWJsaWMgY3JlYXRvcjsKCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBMT0NLUEVSSU9EICAgICAgICAgID0gMzY1IGRheXM7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBJQ09QRVJJT0QgICAgICAgICAgID0gMTIwIGRheXM7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBTSEFSRVBFUklPRCAgICAgICAgID0gMzAgZGF5czsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IExPQ0tBTU9VTlQgICAgICAgICAgPSAzMDAwMDAwICogMTAqKmRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgQU1PVU5UX0lDTyAgICAgICAgICA9IDUwMDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBBTU9VTlRfVGVhbVN1cHBvcnQgID0gMjAwMDAwMCAqIDEwKipkZWNpbWFsczsKCiAgICB1aW50MjU2IHB1YmxpYyBnY1N0YXJ0VGltZSA9IDA7ICAgICAvL2ljbyBiZWdpbiB0aW1lLCB1bml4IHRpbWVzdGFtcCBzZWNvbmRzCiAgICB1aW50MjU2IHB1YmxpYyBnY0VuZFRpbWUgPSAwOyAgICAgICAvL2ljbyBlbmQgdGltZSwgdW5peCB0aW1lc3RhbXAgc2Vjb25kcwoKICAgIAogICAgLy8gTEM6IDMwJSBsb2NrICwgMjAlIGZvciBUZWFtLCA1MCUgZm9yIGljbyAgICAgICAgICAKICAgIGFkZHJlc3MgYWNjb3VudF9sb2NrID0gMHg5QUQ3YWVCZTg4MTFiMEUzMDcxQzYyNzQwM0IzODgwM0Q5MUJDMWFjOyAgLy8zMCUgIGxvY2sKICAgIGFkZHJlc3MgYWNjb3VudF90ZWFtID0gMHhjOTZjM2RhOGJjNjM4MURCMjk2OTU5RWMzZTFGZTFlNDMwYTRCNjVCOyAgLy8yMCUgIHRlYW0KCiAgICB1aW50MjU2IHB1YmxpYyBnY1N1cHBseSA9IDUwMDAwMDAgKiAxMCoqZGVjaW1hbHM7ICAgICAgICAgICAgICAgICAvLyBpY28gNTAlICg1MDAwMDAwKSB0b3RhbCBMQyBzdXBwbHkKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGdjRXhjaGFuZ2VSYXRlPTEwMDA7ICAgICAgICAgICAgICAgICAgICAgICAvLyAxMDAwIExDIHBlciAxIEVUSAoKICAgIAogICAgLy8gUGxheQogICAgYnl0ZXMzMlsxMDAwXSAgIGJsb2NraGFzaDsKICAgIHVpbnQgICAgICAgICAgICBmaXJzdEluZGV4OwogICAgdWludCAgICAgICAgICAgIGVuZEluZGV4OwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsTG90dGVyeVZhbHVlID0gMDsKICAgIHVpbnQyNTYgcHVibGljIGN1cnJlbnRMb3R0ZXJ5VmFsdWUgPSAwOwogICAgdWludDI1NiBwdWJsaWMgY3VycmVudFByb2ZpdCA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyBzaGFyZVRpbWUgPSAwOwogICAgdWludDI1NiBwdWJsaWMgc2hhcmVMaW1pdCA9IDEwMDAwKnZhbDQ7CgoKICAgIGZ1bmN0aW9uIGJ1eUxvdHRlcnkgKHVpbnQ4IF9sb3R0ZXJ5TnVtKSBwYXlhYmxlIHsKICAgICAgICBpZiAoIG1zZy52YWx1ZSA+PXZhbDMqMTAgJiYgX2xvdHRlcnlOdW0+PTAgJiYgIF9sb3R0ZXJ5TnVtPD05ICkKICAgICAgICB7CiAgICAgICAgICAgIGJ5dGVzMzIgY3VycmVudEhhc2g9YmxvY2suYmxvY2toYXNoKGJsb2NrLm51bWJlci0xKTsKICAgICAgICAgICAgaWYoYmxvY2toYXNoW2VuZEluZGV4XSE9Y3VycmVudEhhc2gpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmKGVuZEluZGV4KzE9PWZpcnN0SW5kZXgpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZW5kSW5kZXgrKzsKICAgICAgICAgICAgICAgICAgICBibG9ja2hhc2hbZW5kSW5kZXhdPWN1cnJlbnRIYXNoOwogICAgICAgICAgICAgICAgICAgIGlmKGZpcnN0SW5kZXg8OTk5KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RJbmRleCsrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEluZGV4PTA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKGZpcnN0SW5kZXg9PTAgJiYgOTk5PT1lbmRJbmRleCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZEluZGV4PTA7CiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NraGFzaFtlbmRJbmRleF09Y3VycmVudEhhc2g7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0SW5kZXg9MTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoOTk5PD1lbmRJbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kSW5kZXg9MDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEluZGV4Kys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2toYXNoW2VuZEluZGV4XT1jdXJyZW50SGFzaDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0uZXRoVmFsdWUrPW1zZy52YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0uaW5kZXg9ZW5kSW5kZXg7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmxvdHRlcnlOdW09X2xvdHRlcnlOdW07CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmluZGV4SGFzaD1jdXJyZW50SGFzaDsKICAgICAgICAgICAgdG90YWxMb3R0ZXJ5VmFsdWUrPW1zZy52YWx1ZTsKICAgICAgICAgICAgY3VycmVudExvdHRlcnlWYWx1ZSs9bXNnLnZhbHVlOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb3BlbkxvdHRlcnkgKCkgewoKICAgICAgICBieXRlczMyIGN1cnJlbnRIYXNoPWJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXItMSk7CiAgICAgICAgaWYoYmxvY2toYXNoW2VuZEluZGV4XSE9Y3VycmVudEhhc2gpCiAgICAgICAgewogICAgICAgICAgICBpZihlbmRJbmRleCsxPT1maXJzdEluZGV4KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBlbmRJbmRleCsrOwogICAgICAgICAgICAgICAgYmxvY2toYXNoW2VuZEluZGV4XT1jdXJyZW50SGFzaDsKICAgICAgICAgICAgICAgIGlmKGZpcnN0SW5kZXg8OTk5KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGZpcnN0SW5kZXgrKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBmaXJzdEluZGV4PTA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZihmaXJzdEluZGV4PT0wICYmIDk5OT09ZW5kSW5kZXgpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZW5kSW5kZXg9MDsKICAgICAgICAgICAgICAgICAgICBibG9ja2hhc2hbZW5kSW5kZXhdPWN1cnJlbnRIYXNoOwogICAgICAgICAgICAgICAgICAgIGZpcnN0SW5kZXg9MTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZig5OTk8PWVuZEluZGV4KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kSW5kZXg9MDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kSW5kZXgrKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYmxvY2toYXNoW2VuZEluZGV4XT1jdXJyZW50SGFzaDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIGJhbGFuY2VzW21zZy5zZW5kZXJdLmV0aFZhbHVlID49dmFsMyoxMCAmJiBiYWxhbmNlc1ttc2cuc2VuZGVyXS5pbmRleEhhc2ghPWN1cnJlbnRIYXNoKQogICAgICAgIHsKICAgICAgICAgICAgY3VycmVudExvdHRlcnlWYWx1ZS09YmFsYW5jZXNbbXNnLnNlbmRlcl0uZXRoVmFsdWU7CgogICAgICAgICAgICB1aW50IHRlbXVpbnQgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5pbmRleDsKICAgICAgICAgICAgaWYoYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG90dGVyeU51bT49MCAmJiBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb3R0ZXJ5TnVtPD05ICYmIGJhbGFuY2VzW21zZy5zZW5kZXJdLmluZGV4SGFzaD09YmxvY2toYXNoW3RlbXVpbnRdKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0ZW11aW50Kys7CiAgICAgICAgICAgICAgICBpZih0ZW11aW50Pjk5OSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0ZW11aW50PTA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0ZW11aW50ID0gdWludChibG9ja2hhc2hbdGVtdWludF0pOwogICAgICAgICAgICAgICAgdGVtdWludCA9IHRlbXVpbnQlMTA7CiAgICAgICAgICAgICAgICBpZih0ZW11aW50PT1iYWxhbmNlc1ttc2cuc2VuZGVyXS5sb3R0ZXJ5TnVtKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHVpbnQgX3Rvc2VuZD1iYWxhbmNlc1ttc2cuc2VuZGVyXS5ldGhWYWx1ZSo5MC8xMDA7CiAgICAgICAgICAgICAgICAgICAgaWYoX3Rvc2VuZD50b3RhbExvdHRlcnlWYWx1ZSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90b3NlbmQ9dG90YWxMb3R0ZXJ5VmFsdWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRvdGFsTG90dGVyeVZhbHVlLT1fdG9zZW5kOwogICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmV0aFZhbHVlPTA7CiAgICAgICAgICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihfdG9zZW5kKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5ldGhWYWx1ZT0wOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG90dGVyeU51bT0xMDArdGVtdWludDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdLmV0aFZhbHVlPTA7CiAgICAgICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb3R0ZXJ5TnVtPTk5OTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTaGFyZSAoKSAgewoKICAgICAgICBpZihzaGFyZVRpbWUrU0hBUkVQRVJJT0Q8bm93KQogICAgICAgIHsKICAgICAgICAgICAgdWludCBfanVtcGM9KG5vdyAtIHNoYXJlVGltZSkvU0hBUkVQRVJJT0Q7CiAgICAgICAgICAgIHNoYXJlVGltZSArPSAoX2p1bXBjICogU0hBUkVQRVJJT0QpOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYodG90YWxMb3R0ZXJ5VmFsdWU+Y3VycmVudExvdHRlcnlWYWx1ZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY3VycmVudFByb2ZpdD10b3RhbExvdHRlcnlWYWx1ZS1jdXJyZW50TG90dGVyeVZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY3VycmVudFByb2ZpdD0wOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja1RpbWUhPTAgJiYgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja1RpbWUrU0hBUkVQRVJJT0QgPD1zaGFyZVRpbWUgJiYgY3VycmVudFByb2ZpdD4wICYmIGJhbGFuY2VzW21zZy5zZW5kZXJdLmxjVmFsdWUgPj1zaGFyZUxpbWl0KQogICAgICAgIHsKICAgICAgICAgICAgdWludCBfc2hhcmV2YWx1ZT1iYWxhbmNlc1ttc2cuc2VuZGVyXS5sY1ZhbHVlL3ZhbDQqY3VycmVudFByb2ZpdC8xMDAwOwogICAgICAgICAgICBpZihfc2hhcmV2YWx1ZT50b3RhbExvdHRlcnlWYWx1ZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgX3NoYXJldmFsdWU9dG90YWxMb3R0ZXJ5VmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdG90YWxMb3R0ZXJ5VmFsdWUtPV9zaGFyZXZhbHVlOwogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKF9zaGFyZXZhbHVlKTsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja1RpbWU9c2hhcmVUaW1lOwogICAgICAgIH0KICAgIH0KCgogICAgZnVuY3Rpb24gQWRkX3RvdGFsTG90dGVyeVZhbHVlICgpIHBheWFibGUgewogICAgICAgIGlmKG1zZy52YWx1ZT4wKQogICAgICAgIHsKICAgICAgICAgICAgdG90YWxMb3R0ZXJ5VmFsdWUrPW1zZy52YWx1ZTsKICAgICAgICB9CiAgICB9CgogICAgLy8KICAgIGZ1bmN0aW9uIGxvY2tBY2NvdW50ICgpICB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja1RpbWU9bm93OwogICAgfQoKICAgIGZ1bmN0aW9uIHVubG9ja0FjY291bnQgKCkgIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sb2NrVGltZT0wOwogICAgfQoKICAgIAogICAgLy8rIGJ1eSBsYywxZXRoPTEwMDBsYywgMzAlZXRoIHNlbmQgdG8gb3duZXIsIDcwJSBrZWVwIGluIGNvbnRhY3QKICAgIGZ1bmN0aW9uIGJ1eUxDICgpIHBheWFibGUgewogICAgICAgIGlmKG5vdyA8IGdjRW5kVGltZSkKICAgICAgICB7CiAgICAgICAgICAgIHVpbnQyNTYgbGNBbW91bnQ7CiAgICAgICAgICAgIGlmICggbXNnLnZhbHVlID49MCl7CiAgICAgICAgICAgICAgICBsY0Ftb3VudCA9IG1zZy52YWx1ZSAqIGdjRXhjaGFuZ2VSYXRlOwogICAgICAgICAgICAgICAgaWYgKGdjU3VwcGx5IDwgbGNBbW91bnQpIHJldmVydCgpOwogICAgICAgICAgICAgICAgZ2NTdXBwbHkgLT0gbGNBbW91bnQ7ICAgICAgICAgIAogICAgICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubGNWYWx1ZSArPSBsY0Ftb3VudDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZighY3JlYXRvci5zZW5kKG1zZy52YWx1ZSozMC8xMDApKSByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsgICAgCiAgICAgICAgICAgIGJhbGFuY2VzW2FjY291bnRfdGVhbV0ubGNWYWx1ZSArPSBnY1N1cHBseTsKICAgICAgICAgICAgYWNjb3VudF90ZWFtLnRyYW5zZmVyKChBTU9VTlRfSUNPLWdjU3VwcGx5KSo2OTkvMTAwMC9nY0V4Y2hhbmdlUmF0ZSk7CiAgICAgICAgICAgIGdjU3VwcGx5ID0gMDsgICAgIAogICAgICAgIH0KICAgIH0KCiAgICAvLyBleGNoYW5nZSBsYyB0byBldGgsIDEwMDBsYyA9MC43ZXRoLCAzMCUgZm9yIGZlZQogICAgZnVuY3Rpb24gY2xlYXJMQyAoKSAgewogICAgICAgIGlmKG5vdyA8IGdjRW5kVGltZSkKICAgICAgICB7CiAgICAgICAgICAgIHVpbnQyNTYgZXRoQW1vdW50OwogICAgICAgICAgICBpZiAoIGJhbGFuY2VzW21zZy5zZW5kZXJdLmxjVmFsdWUgPjAgJiYgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubG9ja1RpbWU9PTApewogICAgICAgICAgICAgICAgaWYobXNnLnNlbmRlciA9PSBhY2NvdW50X2xvY2sgJiYgbm93IDwgZ2NTdGFydFRpbWUgKyBMT0NLUEVSSU9EKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZXRoQW1vdW50ID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0ubGNWYWx1ZSAqNzAvMTAwLyBnY0V4Y2hhbmdlUmF0ZTsKICAgICAgICAgICAgICAgIGdjU3VwcGx5ICs9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmxjVmFsdWU7ICAgICAgICAgIAogICAgICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0ubGNWYWx1ZSA9IDA7CiAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV0aEFtb3VudCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLy8rIHRyYW5zZmVyCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXS5sY1ZhbHVlID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwICYmIGJhbGFuY2VzW21zZy5zZW5kZXJdLmxvY2tUaW1lPT0wICkgeyAKICAgICAgICAgICAgaWYobXNnLnNlbmRlciA9PSBhY2NvdW50X2xvY2sgKXsKICAgICAgICAgICAgICAgIGlmKG5vdyA8IGdjU3RhcnRUaW1lICsgTE9DS1BFUklPRCl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5sY1ZhbHVlIC09IF92YWx1ZTsKICAgICAgICAgICAgICAgIGlmKGFkZHJlc3ModGhpcyk9PV90bykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBiYWxhbmNlc1tjcmVhdG9yXS5sY1ZhbHVlICs9IF92YWx1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBiYWxhbmNlc1tfdG9dLmxjVmFsdWUgKz0gX3ZhbHVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICB9IAogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGVuZFRoaXNDb250YWN0ICgpIHsKICAgICAgICBpZihtc2cuc2VuZGVyPT1jcmVhdG9yICYmIGJhbGFuY2VzW21zZy5zZW5kZXJdLmxjVmFsdWUgPj05MDAwMDAwICogdmFsNCkKICAgICAgICB7CiAgICAgICAgICAgIGlmKGJhbGFuY2VzW21zZy5zZW5kZXJdLmxjVmFsdWUgPj05MDAwMDAwICogdmFsNCB8fCBnY1N1cHBseSA+PSA0OTkwMDAwICogMTAqKmRlY2ltYWxzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBzZWxmZGVzdHJ1Y3QoY3JlYXRvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLy8gY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIExDVG9rZW4oICkgewogICAgICAgIGNyZWF0b3IgPSBtc2cuc2VuZGVyOwogICAgICAgIGJhbGFuY2VzW2FjY291bnRfdGVhbV0ubGNWYWx1ZSA9IEFNT1VOVF9UZWFtU3VwcG9ydDsgICAgLy9mb3IgdGVhbQogICAgICAgIGJhbGFuY2VzW2FjY291bnRfbG9ja10ubGNWYWx1ZSA9IExPQ0tBTU9VTlQ7ICAgICAgICAgICAgLy8zMCUgICBsb2NrIDM2NSBkYXlzCiAgICAgICAgZ2NTdGFydFRpbWUgPSBub3c7CiAgICAgICAgZ2NFbmRUaW1lPW5vdytJQ09QRVJJT0Q7CgoKICAgICAgICB0b3RhbExvdHRlcnlWYWx1ZT0wOwoKICAgICAgICBmaXJzdEluZGV4PTA7CiAgICAgICAgZW5kSW5kZXg9MDsKICAgICAgICBibG9ja2hhc2hbMF0gPSBibG9jay5ibG9ja2hhc2goYmxvY2subnVtYmVyLTEpOwoKICAgICAgICBzaGFyZVRpbWU9bm93K1NIQVJFUEVSSU9EOwogICAgfQogICAgCgogICAgCiAgICAvLyBmYWxsYmFjawogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBidXlMQygpOwogICAgfQoKfQ=='.
	

]
