Class {
	#name : #SRT326656615a2751f34cdff5e6b8ac5f64c3a76b36,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT326656615a2751f34cdff5e6b8ac5f64c3a76b36 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludCBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7CiAgICBpZiAoIWFzc2VydGlvbikgewogICAgICByZXZlcnQoKTsKICAgIH0KICB9Cn0KCgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKfQoKCgoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgoKCgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuIAogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAvKioKICAgKiBAZGV2IEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrLgogICAqLwogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICBpZihtc2cuZGF0YS5sZW5ndGggPCBzaXplICsgNCkgewogICAgICAgcmV2ZXJ0KCk7CiAgICAgfQogICAgIF87CiAgfQoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLiAKICAqIEByZXR1cm4gQW4gdWludCByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKCgoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWFudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFydCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBCYXNpY1Rva2VuLCBFUkMyMCB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIGlmIChfdmFsdWUgPiBfYWxsb3dhbmNlKSB0aHJvdzsKCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlYWhsZiBvZiBtc2cuc2VuZGVyLgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHJldmVydCgpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYW4gYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9Cgp9Ci8qCgogIENvcHlyaWdodCAyMDE3IEJpdG5hbi4KCiAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoKICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCiAgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoKKi8KCgpjb250cmFjdCBCaXRuYW5SZXdhcmRUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsKICAgIC8qIGNvbnN0YW50cyAqLwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBOQU1FID0gIkJpdG5hblJld2FyZFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1lNQk9MID0gIkJSVCI7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBERUNJTUFMUyA9IDE4OwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgRVRIX01JTl9HT0FMID0gMzAwMCBldGhlcjsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IEVUSF9NQVhfR09BTCA9IDYwMDAgZXRoZXI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBPUklHSU5fRVRIX0JSVF9SQVRJTyA9IDMwMDA7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBVTlNPTERfU09MRF9SQVRJTyA9IDUwOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUEhBU0VfTlVNQkVSID0gNTsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEJMT0NLU19QRVJfUEhBU0UgPSAzMDUwMDsKICAgIHVpbnQ4WzVdIHB1YmxpYyBib251c1BlcmNlbnRzID0gWwogICAgICAyMCwKICAgICAgMTUsCiAgICAgIDEwLAogICAgICA1LAogICAgICAwCiAgICBdOwoKICAgIC8qIHZhcnMgKi8KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgdWludCBwdWJsaWMgdG90YWxFdGhBbW91bnQgPSAwOwogICAgdWludCBwdWJsaWMgdG9rZW5Jc3N1ZUluZGV4ID0gMDsKICAgIHVpbnQgcHVibGljIGRlYWRsaW5lOwogICAgdWludCBwdWJsaWMgZHVyYXRpb25JbkRheXM7CiAgICB1aW50IHB1YmxpYyBzdGFydEJsb2NrID0gMDsKICAgIGJvb2wgcHVibGljIGlzTGVmdFRva2VuSXNzdWVkID0gZmFsc2U7CgoKICAgIC8qIGV2ZW50cyAqLwogICAgZXZlbnQgVG9rZW5TYWxlU3RhcnQoKTsKICAgIGV2ZW50IFRva2VuU2FsZUVuZCgpOwogICAgZXZlbnQgRmFrZU93bmVyKGFkZHJlc3MgZmFrZU93bmVyKTsKICAgIGV2ZW50IENvbW1vbkVycm9yKGJ5dGVzIGVycm9yKTsKICAgIGV2ZW50IElzc3VlVG9rZW4odWludCBpbmRleCwgYWRkcmVzcyBhZGRyLCB1aW50IGV0aEFtb3VudCwgdWludCB0b2tlbkFtb3VudCk7CiAgICBldmVudCBUb2tlblNhbGVTdWNjZWVkKCk7CiAgICBldmVudCBUb2tlblNhbGVGYWlsKCk7CiAgICBldmVudCBUb2tlblNlbmRGYWlsKHVpbnQgZXRoQW1vdW50KTsKCiAgICAvKiBtb2RpZmllciAqLwogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgaWYobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgIEZha2VPd25lcihtc2cuc2VuZGVyKTsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQogICAgICBfOyAgICAgICAgCiAgICB9CiAgICBtb2RpZmllciBiZWZvcmVTYWxlIHsKICAgICAgaWYoIXNhbGVJblByb2dyZXNzKCkpIHsKICAgICAgICBfOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIENvbW1vbkVycm9yKCdTYWxlIGhhcyBub3Qgc3RhcnRlZCEnKTsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQogICAgfQogICAgbW9kaWZpZXIgaW5TYWxlIHsKICAgICAgaWYoc2FsZUluUHJvZ3Jlc3MoKSAmJiAhc2FsZU92ZXIoKSkgewogICAgICAgIF87CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgQ29tbW9uRXJyb3IoJ1Rva2VuIGlzIG5vdCBpbiBzYWxlIScpOwogICAgICAgIHJldmVydCgpOwogICAgICB9CiAgICB9CiAgICBtb2RpZmllciBhZnRlclNhbGUgewogICAgICBpZihzYWxlT3ZlcigpKSB7CiAgICAgICAgXzsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBDb21tb25FcnJvcignU2FsZSBpcyBub3Qgb3ZlciEnKTsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQogICAgfQogICAgLyogZnVuY3Rpb25zICovCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgaXNzdWVUb2tlbihtc2cuc2VuZGVyKTsKICAgIH0KICAgIGZ1bmN0aW9uIGlzc3VlVG9rZW4oYWRkcmVzcyByZWNpcGllbnQpIHBheWFibGUgaW5TYWxlIHsKICAgICAgYXNzZXJ0KG1zZy52YWx1ZSA+PSAwLjAxIGV0aGVyKTsKICAgICAgdWludCB0b2tlbkFtb3VudCA9IGdlbmVyYXRlVG9rZW5BbW91bnQobXNnLnZhbHVlKTsKICAgICAgdG90YWxFdGhBbW91bnQgPSB0b3RhbEV0aEFtb3VudC5hZGQobXNnLnZhbHVlKTsKICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQodG9rZW5BbW91bnQpOwogICAgICBiYWxhbmNlc1tyZWNpcGllbnRdID0gYmFsYW5jZXNbcmVjaXBpZW50XS5hZGQodG9rZW5BbW91bnQpOwogICAgICBJc3N1ZVRva2VuKHRva2VuSXNzdWVJbmRleCwgcmVjaXBpZW50LCBtc2cudmFsdWUsIHRva2VuQW1vdW50KTsKICAgICAgaWYoIW93bmVyLnNlbmQobXNnLnZhbHVlKSkgewogICAgICAgIFRva2VuU2VuZEZhaWwobXNnLnZhbHVlKTsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gaXNzdWVMZWZ0VG9rZW4oKSBpbnRlcm5hbCB7CiAgICAgIGlmKGlzTGVmdFRva2VuSXNzdWVkKSB7CiAgICAgICAgQ29tbW9uRXJyb3IoIkxlZnQgdG9rZW5zIGhhcyBiZWVuIGlzc3VlZCEiKTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICByZXF1aXJlKHRvdGFsRXRoQW1vdW50ID49IEVUSF9NSU5fR09BTCk7CiAgICAgICAgdWludCBsZWZ0VG9rZW5BbW91bnQgPSB0b3RhbFN1cHBseS5tdWwoVU5TT0xEX1NPTERfUkFUSU8pLmRpdigxMDApOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKGxlZnRUb2tlbkFtb3VudCk7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLmFkZChsZWZ0VG9rZW5BbW91bnQpOwogICAgICAgIElzc3VlVG9rZW4odG9rZW5Jc3N1ZUluZGV4KyssIG93bmVyLCAwLCBsZWZ0VG9rZW5BbW91bnQpOwogICAgICAgIGlzTGVmdFRva2VuSXNzdWVkID0gdHJ1ZTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gQml0bmFuUmV3YXJkVG9rZW4oYWRkcmVzcyBfb3duZXIpIHsKICAgICAgb3duZXIgPSBfb3duZXI7CiAgICB9CiAgICBmdW5jdGlvbiBzdGFydCh1aW50IF9zdGFydEJsb2NrKSBwdWJsaWMgb25seU93bmVyIGJlZm9yZVNhbGUgewogICAgICBzdGFydEJsb2NrID0gX3N0YXJ0QmxvY2s7CiAgICAgIFRva2VuU2FsZVN0YXJ0KCk7CiAgICB9CiAgICBmdW5jdGlvbiBjbG9zZSgpIHB1YmxpYyBvbmx5T3duZXIgYWZ0ZXJTYWxlIHsKICAgICAgaWYodG90YWxFdGhBbW91bnQgPCBFVEhfTUlOX0dPQUwpIHsKICAgICAgICBUb2tlblNhbGVGYWlsKCk7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgaXNzdWVMZWZ0VG9rZW4oKTsKICAgICAgICBUb2tlblNhbGVTdWNjZWVkKCk7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGdlbmVyYXRlVG9rZW5BbW91bnQodWludCBldGhBbW91bnQpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdG9rZW5BbW91bnQpIHsKICAgICAgdWludCBwaGFzZSA9IChibG9jay5udW1iZXIgLSBzdGFydEJsb2NrKS5kaXYoQkxPQ0tTX1BFUl9QSEFTRSk7CiAgICAgIGlmKHBoYXNlID49IGJvbnVzUGVyY2VudHMubGVuZ3RoKSB7CiAgICAgICAgcGhhc2UgPSBib251c1BlcmNlbnRzLmxlbmd0aCAtIDE7CiAgICAgIH0KICAgICAgdWludCBvcmlnaW5Ub2tlbkFtb3VudCA9IGV0aEFtb3VudC5tdWwoT1JJR0lOX0VUSF9CUlRfUkFUSU8pOwogICAgICB1aW50IGJvbnVzVG9rZW5BbW91bnQgPSBvcmlnaW5Ub2tlbkFtb3VudC5tdWwoYm9udXNQZXJjZW50c1twaGFzZV0pLmRpdigxMDApOwogICAgICB0b2tlbkFtb3VudCA9IG9yaWdpblRva2VuQW1vdW50LmFkZChib251c1Rva2VuQW1vdW50KTsKICAgIH0KICAgIC8qIGNvbnN0YW50IGZ1bmN0aW9ucyAqLwogICAgZnVuY3Rpb24gc2FsZUluUHJvZ3Jlc3MoKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgIHJldHVybiAoc3RhcnRCbG9jayA+IDAgJiYgYmxvY2subnVtYmVyID49IHN0YXJ0QmxvY2spOwogICAgfQogICAgZnVuY3Rpb24gc2FsZU92ZXIoKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgIHJldHVybiBzdGFydEJsb2NrID4gMCAmJiAoc2FsZU92ZXJJblRpbWUoKSB8fCBzYWxlT3ZlclJlYWNoTWF4RVRIKCkpOwogICAgfQogICAgZnVuY3Rpb24gc2FsZU92ZXJJblRpbWUoKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgIHJldHVybiBibG9jay5udW1iZXIgPj0gc3RhcnRCbG9jayArIEJMT0NLU19QRVJfUEhBU0UgKiBQSEFTRV9OVU1CRVI7CiAgICB9CiAgICBmdW5jdGlvbiBzYWxlT3ZlclJlYWNoTWF4RVRIKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICByZXR1cm4gdG90YWxFdGhBbW91bnQgPj0gRVRIX01BWF9HT0FMOwogICAgfQp9'.
	

]
