Class {
	#name : #SRT701382a074cfcbd8ac32cfaf0f9df9b9395b58f1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT701382a074cfcbd8ac32cfaf0f9df9b9395b58f1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBFUkMyMCB7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgovL1NhZmUgbWF0aApjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA+IDApOwogICAgdWludCBjID0gYSAvIGI7CiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjPj1hICYmIGM+PWIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIFNhZmVNYXRoIHsKCiAgLyogVG9rZW4gc3VwcGx5IGdvdCBpbmNyZWFzZWQgYW5kIGEgbmV3IG93bmVyIHJlY2VpdmVkIHRoZXNlIHRva2VucyAqLwogIGV2ZW50IE1pbnRlZChhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCk7CgogIC8qIEFjdHVhbCBiYWxhbmNlcyBvZiB0b2tlbiBob2xkZXJzICovCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAvKiBhcHByb3ZlKCkgYWxsb3dhbmNlcyAqLwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgLyogSW50ZXJmYWNlIGRlY2xhcmF0aW9uICovCiAgZnVuY3Rpb24gaXNUb2tlbigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sIFllcykgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICB1aW50IF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlc1tfZnJvbV0sIF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoX2FsbG93YW5jZSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9hZGRyZXNzKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfYWRkcmVzc107CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9Cgp9Cgpjb250cmFjdCBCQ0ZUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiYmxvY2tjaGFpbmNyeXB0by5mdW5kIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkJDRiI7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5ID0gMTAwMDAwMDAwMCAqICgxMCAqKiB1aW50KGRlY2ltYWxzKSk7Ly9Ub3RhbCBzdXBwbHkKCXVpbnQgcHVibGljIHNlbGxQcmljZSA9IDEwMDAwMDAwMDAwMDAwMDAgd2VpOy8vVG9rZW5zIGFyZSBzb2xkIGZvciB0aGlzIHByaWNlCiAgICAKICAgIC8vQWRkcmVzc2VzIHRoYXQgYXJlIGFsbG93ZWQgdG8gdHJhbnNmZXIgdG9rZW5zCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBhbGxvd2VkVHJhbnNmZXI7CgkKICAgIC8vQm9udXNlcyBmb3Igc2VsZWN0ZWQgYWRkcmVzc2VzCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBzcGVjaWFsQm9udXM7CiAgICAKCS8vVGVjaG5pY2FsIHZhcmlhYmxlcyB0byBzdG9yZSBzdGF0ZXMKCWJvb2wgcHVibGljIFRyYW5zZmVyQWxsb3dlZCA9IHRydWU7Ly9Ub2tlbiB0cmFuc2ZlcnMgYXJlIGJsb2NrZWQKICAgIGJvb2wgcHVibGljIFNhbGVQYXVzZWQgPSBmYWxzZTsgLy9XaGV0aGVyIHRoZSBzYWxlIGlzIG5vdyBzdXNwZW5kZWQgKHRydWUgb3IgZmFsc2UpCiAgICB1aW50IHB1YmxpYyBjdXJyZW50Qm9udXMgPSAwOy8vQ3VycmVudCBib251cyB0byB0b2tlbnMgcHVyY2hhc2VzCgkKICAgIC8vVGVjaG5pY2FsIHZhcmlhYmxlcyB0byBzdG9yZSBzdGF0aXN0aWNhbCBkYXRhCgl1aW50IHB1YmxpYyBTdGF0c0V0aGVyZXVtUmFpc2VkID0gMCB3ZWk7Ly9Ub3RhbCBFdGhlcmV1bSByYWlzZWQKCXVpbnQgcHVibGljIFN0YXRzU29sZCA9IDA7Ly9Tb2xkIHRva2VucyBhbW91bnQKCXVpbnQgcHVibGljIFN0YXRzTWludGVkID0gMDsvL01pbnRlZCB0b2tlbnMgYW1vdW50Cgl1aW50IHB1YmxpYyBTdGF0c1RvdGFsID0gMDsvL092ZXJhbGwgdG9rZW5zIGFtb3VudAoKICAgIC8vRXZlbnQgbG9ncwogICAgZXZlbnQgQnV5KGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsIHVpbnQgZXRoLCB1aW50IHRva2VucywgdWludCBib251cyk7Ly9Ub2tlbnMgcHVyY2hhc2VkCiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50IHRva2Vucyk7Ly8gVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgbWludGVkCiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50IHRva2Vucyk7Ly8gVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgYnVybnQKICAgIGV2ZW50IFByaWNlQ2hhbmdlZChzdHJpbmcgX3RleHQsIHVpbnQgX3Rva2VuUHJpY2UpOy8vTWFudWFsIHRva2VuIHByaWNlCiAgICBldmVudCBCb251c0NoYW5nZWQoc3RyaW5nIF90ZXh0LCB1aW50IF9wZXJjZW50KTsvL1NhbGUgYm9udXMgcGVyY2VudCBmb3IgZWFjaCBwdXJjaGFzZQogICAgCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lciA9IDB4MDsvL0FkbWluIGFjdGlvbnMKICAgIGFkZHJlc3MgcHVibGljIG1pbnRlciA9IDB4MDsvL01pbnRlciB0b2tlbnMKICAgIGFkZHJlc3MgcHVibGljIHdhbGxldCA9IDB4MDsvL1dhbGxldCB0byByZWNlaXZlIEVUSAogCmZ1bmN0aW9uIEJDRlRva2VuKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9taW50ZXIsIGFkZHJlc3MgX3dhbGxldCkgcGF5YWJsZSB7CiAgICAKICAgICAgb3duZXIgPSBfb3duZXI7CiAgICAgIG1pbnRlciA9IF9taW50ZXI7CiAgICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICAKICAgICAgYmFsYW5jZXNbb3duZXJdID0gMDsKICAgICAgYmFsYW5jZXNbbWludGVyXSA9IDA7CiAgICAgIGJhbGFuY2VzW3dhbGxldF0gPSAwOwogICAgICAgIAogICAgICBhbGxvd2VkVHJhbnNmZXJbb3duZXJdID0gdHJ1ZTsKICAgICAgYWxsb3dlZFRyYW5zZmVyW21pbnRlcl0gPSB0cnVlOwogICAgICBhbGxvd2VkVHJhbnNmZXJbd2FsbGV0XSA9IHRydWU7CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlNaW50ZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG1pbnRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvL1RyYW5zYWN0aW9uIHJlY2VpdmVkIC0gcnVuIHRoZSBwdXJjaGFzZSBmdW5jdGlvbgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBidXkoKTsKICAgIH0KICAgIAogICAgLy9TZWUgdGhlIGN1cnJlbnQgdG9rZW4gcHJpY2UgaW4gd2VpIChodHRwczovL2V0aGVyY29udmVydGVyLm9ubGluZSB0byBjb252ZXJ0IHRvIG90aGVyIHVuaXRzLCBzdWNoIGFzIEVUSCkKICAgIGZ1bmN0aW9uIHByaWNlKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBzZWxsUHJpY2U7CiAgICB9CiAgICAKICAgIC8vTWFudWFsbHkgc2V0IHRoZSB0b2tlbiBwcmljZSAoaW4gd2VpIC0gaHR0cHM6Ly9ldGhlcmNvbnZlcnRlci5vbmxpbmUpCiAgICBmdW5jdGlvbiBzZXRUb2tlblByaWNlKHVpbnQgX3Rva2VuUHJpY2UpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSBtaW50ZXIpOwogICAgICAgIHNlbGxQcmljZSA9IF90b2tlblByaWNlOwogICAgICAgIFByaWNlQ2hhbmdlZCgiTmV3IHByaWNlIGlzICIsIF90b2tlblByaWNlKTsKICAgIH0KICAgIAogICAgLy9TZXQgdGhlIGJvbnVzIHBlcmNlbnQgZm9yIGVhY2ggcHVyY2hhc2UKICAgIGZ1bmN0aW9uIHNldEJvbnVzKHVpbnQgX3BlcmNlbnQpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSBtaW50ZXIpOwogICAgICAgIHJlcXVpcmUoX3BlcmNlbnQgPj0wKTsKICAgICAgICBjdXJyZW50Qm9udXMgPSBzYWZlQWRkKDEwMCxfcGVyY2VudCk7CiAgICAgICAgQm9udXNDaGFuZ2VkKCJOZXcgYm9udXMgaXMgIiwgX3BlcmNlbnQpOwogICAgfQogICAgCiAgICAvL1NldCB0aGUgYm9udXMgcGVyY2VudCBmb3Igc2VsZWN0ZWQgYWRkcmVzcwogICAgZnVuY3Rpb24gc2V0U3BlY2lhbEJvbnVzKGFkZHJlc3MgX3RhcmdldCwgdWludCBfcGVyY2VudCkgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lciB8fCBtc2cuc2VuZGVyID09IG1pbnRlcik7CiAgICAgICAgcmVxdWlyZShfcGVyY2VudCA+PTApOwogICAgICAgIHNwZWNpYWxCb251c1tfdGFyZ2V0XSA9IHNhZmVBZGQoMTAwLF9wZXJjZW50KTsKICAgIH0KICAgICAKICAgIC8vQWxsb3cgb3IgcHJvaGliaXQgdG9rZW4gdHJhbnNmZXJzCiAgICBmdW5jdGlvbiBzZXRUcmFuc2ZlckFsbG93YW5jZShib29sIF9hbGxvd2FuY2UpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgVHJhbnNmZXJBbGxvd2VkID0gX2FsbG93YW5jZTsKICAgIH0KICAgIAogICAgLy9UZW1wb3JhcmlseSBzdXNwZW5kIHRva2VuIHNhbGUKICAgIGZ1bmN0aW9uIGV2ZW50UGF1c2UoYm9vbCBfcGF1c2UpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgU2FsZVBhdXNlZCA9IF9wYXVzZTsKICAgIH0KICAgIAogICAgLy8gU2VuZCBgX2Ftb3VudGAgb2YgdG9rZW5zIHRvIGBfdGFyZ2V0YAogICAgZnVuY3Rpb24gbWludFRva2VucyhhZGRyZXNzIF90YXJnZXQsIHVpbnQgX2Ftb3VudCkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lciB8fCBtc2cuc2VuZGVyID09IG1pbnRlcik7CiAgICAgICAgcmVxdWlyZShfYW1vdW50ID4gMCk7Ly9OdW1iZXIgb2YgdG9rZW5zIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAKICAgICAgICB1aW50IGFtb3VudD1fYW1vdW50ICogKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsKICAgICAgICByZXF1aXJlKHNhZmVBZGQoU3RhdHNUb3RhbCwgYW1vdW50KSA8PSB0b3RhbFN1cHBseSk7Ly9UaGUgYW1vdW50IG9mIHRva2VucyBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIFRvdGFsIHN1cHBseQogICAgICAgIGJhbGFuY2VzW190YXJnZXRdID0gc2FmZUFkZChiYWxhbmNlc1tfdGFyZ2V0XSwgYW1vdW50KTsKICAgICAgICBTdGF0c01pbnRlZCA9IHNhZmVBZGQoU3RhdHNNaW50ZWQsIGFtb3VudCk7Ly9VcGRhdGUgbnVtYmVyIG9mIHRva2VucyBtaW50ZWQKICAgICAgICBTdGF0c1RvdGFsID0gc2FmZUFkZChTdGF0c1RvdGFsLCBhbW91bnQpOy8vVXBkYXRlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMKICAgICAgICBUcmFuc2ZlcigwLCB0aGlzLCBhbW91bnQpOwogICAgICAgIFRyYW5zZmVyKHRoaXMsIF90YXJnZXQsIGFtb3VudCk7CiAgICAgICAgTWludChfdGFyZ2V0LCBhbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBEZWNyZWFzZSB1c2VyIGJhbGFuY2UKICAgIGZ1bmN0aW9uIGRlY3JlYXNlVG9rZW5zKGFkZHJlc3MgX3RhcmdldCwgdWludCBfYW1vdW50KSBleHRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gbWludGVyKTsKICAgICAgICByZXF1aXJlKF9hbW91bnQgPiAwKTsvL051bWJlciBvZiB0b2tlbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMAogICAgICAgIHVpbnQgYW1vdW50PV9hbW91bnQgKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgIGJhbGFuY2VzW190YXJnZXRdID0gc2FmZVN1YihiYWxhbmNlc1tfdGFyZ2V0XSwgYW1vdW50KTsKICAgICAgICBTdGF0c01pbnRlZCA9IHNhZmVTdWIoU3RhdHNNaW50ZWQsIGFtb3VudCk7Ly9VcGRhdGUgbnVtYmVyIG9mIHRva2VucyBtaW50ZWQKICAgICAgICBTdGF0c1RvdGFsID0gc2FmZVN1YihTdGF0c1RvdGFsLCBhbW91bnQpOy8vVXBkYXRlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMKICAgICAgICBUcmFuc2ZlcihfdGFyZ2V0LCAwLCBhbW91bnQpOwogICAgICAgIEJ1cm4oX3RhcmdldCwgYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gQWxsb3cgYF90YXJnZXRgIG1ha2UgdG9rZW4gdHJhbmZlcnMKICAgIGZ1bmN0aW9uIGFsbG93VHJhbnNmZXIoYWRkcmVzcyBfdGFyZ2V0LCBib29sIF9hbGxvdykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBhbGxvd2VkVHJhbnNmZXJbX3RhcmdldF0gPSBfYWxsb3c7CiAgICB9CgogICAgLy9UaGUgZnVuY3Rpb24gb2YgYnV5aW5nIHRva2VucyBvbiBzYWxlCiAgICBmdW5jdGlvbiBidXkoKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zKGJvb2wpIHsKCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IG93bmVyKTsvL1RoZSBmb3VuZGVyIGNhbm5vdCBidXkgdG9rZW5zCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IG1pbnRlcik7Ly9UaGUgbWludGVyIGNhbm5vdCBidXkgdG9rZW5zCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IHdhbGxldCk7Ly9UaGUgd2FsbGV0IGFkZHJlc3MgY2Fubm90IGJ1eSB0b2tlbnMKICAgICAgICByZXF1aXJlKCFTYWxlUGF1c2VkKTsvL1B1cmNoYXNlIHBlcm1pdHRlZCBpZiBzYWxlIGlzIHBhdXNlZAogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByaWNlKCkpOy8vVGhlIGFtb3VudCByZWNlaXZlZCBpbiB3ZWkgbXVzdCBiZSBncmVhdGVyIHRoYW4gdGhlIGNvc3Qgb2YgMSB0b2tlbgoKICAgICAgICB1aW50IHRva2VucyA9IG1zZy52YWx1ZS9wcmljZSgpOy8vTnVtYmVyIG9mIHRva2VucyB0byBiZSByZWNlaXZlZCBieSB0aGUgYnV5ZXIKICAgICAgICByZXF1aXJlKHRva2VucyA+IDApOy8vTnVtYmVyIG9mIHRva2VucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwCiAgICAgICAgCiAgICAgICAgLy9BZGQgYm9udXMgdG9rZW5zCiAgICAgICAgaWYoY3VycmVudEJvbnVzID4gMCl7CiAgICAgICAgdWludCBib251cyA9IHNhZmVNdWwodG9rZW5zLCBjdXJyZW50Qm9udXMpOwogICAgICAgIGJvbnVzID0gc2FmZURpdihib251cywgMTAwKTsKICAgICAgICB0b2tlbnMgPSBzYWZlQWRkKGJvbnVzLCB0b2tlbnMpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvL0FkZCBib251cyB0b2tlbnMgaWYgdGhpcyBidXllciBoYXZlIHNwZWNpYWwgYm9udXMKICAgICAgICBpZihzcGVjaWFsQm9udXNbbXNnLnNlbmRlcl0gPiAwKXsKICAgICAgICB1aW50IGFkZHJlc3NCb251cyA9IHNhZmVNdWwodG9rZW5zLCBzcGVjaWFsQm9udXNbbXNnLnNlbmRlcl0pOwogICAgICAgIGFkZHJlc3NCb251cyA9IHNhZmVEaXYoYWRkcmVzc0JvbnVzLCAxMDApOwogICAgICAgIHRva2VucyA9IHNhZmVBZGQoYWRkcmVzc0JvbnVzLCB0b2tlbnMpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICB1aW50IHRva2Vuc1RvQWRkPXRva2VucyAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CiAgICAgICAgCiAgICAgICAgcmVxdWlyZShzYWZlQWRkKFN0YXRzU29sZCwgdG9rZW5zVG9BZGQpIDw9IHRvdGFsU3VwcGx5KTsvL1RoZSBhbW91bnQgb2Ygc29sZCB0b2tlbnMgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiB0b3RhbCBzdXBwbHkKICAgICAgICAKICAgICAgICB3YWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsvL1NlbmQgcmVjZWl2ZWQgRVRIIHRvIHRoZSBmdW5kcmFpc2luZyBwdXJzZQogICAgICAgIAogICAgICAgIC8vQ3JlZGl0aW5nIG9mIHRva2VucyB0byB0aGUgYnV5ZXIKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVBZGQoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIHRva2Vuc1RvQWRkKTsKICAgICAgICBTdGF0c1NvbGQgPSBzYWZlQWRkKFN0YXRzU29sZCwgdG9rZW5zVG9BZGQpOy8vVXBkYXRlIG51bWJlciBvZiB0b2tlbnMgc29sZAogICAgICAgIFN0YXRzVG90YWwgPSBzYWZlQWRkKFN0YXRzVG90YWwsIHRva2Vuc1RvQWRkKTsvL1VwZGF0ZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zCiAgICAgICAgVHJhbnNmZXIoMCwgdGhpcywgdG9rZW5zVG9BZGQpOwogICAgICAgIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIHRva2Vuc1RvQWRkKTsKICAgICAgICAKICAgICAgICBTdGF0c0V0aGVyZXVtUmFpc2VkID0gc2FmZUFkZChTdGF0c0V0aGVyZXVtUmFpc2VkLCBtc2cudmFsdWUpOy8vVXBkYXRlIHRvdGFsIEVUSCBjb2xsZWN0ZWQKICAgICAgICAKICAgICAgICAvL1JlY29yZCBldmVudCBsb2dzIHRvIHRoZSBibG9ja2NoYWluCiAgICAgICAgQnV5KG1zZy5zZW5kZXIsIG1zZy52YWx1ZSwgdG9rZW5zVG9BZGQsIGN1cnJlbnRCb251cyk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIAogICAgICAgIC8vRm9yYmlkIHRva2VuIHRyYW5zZmVycwogICAgICAgIGlmKCFUcmFuc2ZlckFsbG93ZWQpewogICAgICAgICAgICByZXF1aXJlKGFsbG93ZWRUcmFuc2Zlclttc2cuc2VuZGVyXSk7CiAgICAgICAgfQogICAgICAgIAogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAKICAgICAgICAvL0ZvcmJpZCB0b2tlbiB0cmFuc2ZlcnMKICAgICAgICBpZighVHJhbnNmZXJBbGxvd2VkKXsKICAgICAgICAgICAgcmVxdWlyZShhbGxvd2VkVHJhbnNmZXJbbXNnLnNlbmRlcl0pOwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgLy9DaGFuZ2Ugb3duZXIKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX3RvKSBleHRlcm5hbCBvbmx5T3duZXIoKSB7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW293bmVyXTsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSAwOwogICAgICAgIG93bmVyID0gX3RvOwogICAgfQoKICAgIC8vQ2hhbmdlIG1pbnRlcgogICAgZnVuY3Rpb24gY2hhbmdlTWludGVyKGFkZHJlc3MgX3RvKSBleHRlcm5hbCBvbmx5T3duZXIoKSB7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW21pbnRlcl07CiAgICAgICAgYmFsYW5jZXNbbWludGVyXSA9IDA7CiAgICAgICAgbWludGVyID0gX3RvOwogICAgfQoKICAgIC8vQ2hhbmdlIHdhbGxldAogICAgZnVuY3Rpb24gY2hhbmdlV2FsbGV0KGFkZHJlc3MgX3RvKSBleHRlcm5hbCBvbmx5T3duZXIoKSB7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW3dhbGxldF07CiAgICAgICAgYmFsYW5jZXNbd2FsbGV0XSA9IDA7CiAgICAgICAgd2FsbGV0ID0gX3RvOwogICAgfQp9'.
	

]
