Class {
	#name : #SRTe1bf62429e6d20f19353ad8d71c5b174ef90d9b6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe1bf62429e6d20f19353ad8d71c5b174ef90d9b6 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9CgovKioKICogVGhlIEJpdGtvbSBUb2tlbiAoQlRUKSBoYXMgYSBmaXhlZCBzdXBwbHkgYW5kIHJlc3RyaWN0cyB0aGUgYWJpbGl0eQogKiB0byB0cmFuc2ZlciB0b2tlbnMgdW50aWwgdGhlIG93bmVyIGhhcyBjYWxsZWQgdGhlIGVuYWJsZVRyYW5zZmVyKCkKICogZnVuY3Rpb24uCiAqCiAqIFRoZSBvd25lciBjYW4gYXNzb2NpYXRlIHRoZSB0b2tlbiB3aXRoIGEgdG9rZW4gc2FsZSBjb250cmFjdC4gSW4gdGhhdAogKiBjYXNlLCB0aGUgdG9rZW4gYmFsYW5jZSBpcyBtb3ZlZCB0byB0aGUgdG9rZW4gc2FsZSBjb250cmFjdCwgd2hpY2gKICogaW4gdHVybiBjYW4gdHJhbnNmZXIgaXRzIHRva2VucyB0byBjb250cmlidXRvcnMgdG8gdGhlIHNhbGUuCiAqLwpjb250cmFjdCBCaXRrb21Ub2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKCiAgICAvLyBDb25zdGFudHMKICAgIHN0cmluZyAgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiQml0a29tIFRva2VuIjsKICAgIHN0cmluZyAgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJCVFQiOwogICAgdWludDggICBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IElOSVRJQUxfU1VQUExZID0gNTAwMDAwMDAgKiAxIGV0aGVyOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgQ1JPV0RTQUxFX0FMTE9XQU5DRSA9ICAzMzUwMDAwMCAqIDEgZXRoZXI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBURUFNX0FMTE9XQU5DRSA9ICAxNjUwMDAwMCAqIDEgZXRoZXI7CgogICAgLy8gUHJvcGVydGllcwogICAgdWludDI1NiBwdWJsaWMgY3Jvd2RzYWxlQWxsb3dhbmNlOyAgICAgICAgICAgICAgIC8vIHRoZSBudW1iZXIgb2YgdG9rZW5zIGF2YWlsYWJsZSBmb3IgY3Jvd2RzYWxlcwogICAgdWludDI1NiBwdWJsaWMgdGVhbUFsbG93YW5jZTsgICAgICAgICAgICAgICAvLyB0aGUgbnVtYmVyIG9mIHRva2VucyBhdmFpbGFibGUgZm9yIHRoZSBhZG1pbmlzdHJhdG9yCiAgICBhZGRyZXNzIHB1YmxpYyBjcm93ZHNhbGVBZGRyOyAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGFkZHJlc3Mgb2YgYSBjcm93ZHNhbGUgY3VycmVudGx5IHNlbGxpbmcgdGhpcyB0b2tlbgogICAgYWRkcmVzcyBwdWJsaWMgdGVhbUFkZHI7ICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYWRkcmVzcyBvZiB0aGUgdGVhbSBhY2NvdW50CiAgICBib29sICAgIHB1YmxpYyB0cmFuc2ZlckVuYWJsZWQgPSBmYWxzZTsgICAgIC8vIGluZGljYXRlcyBpZiB0cmFuc2ZlcnJpbmcgdG9rZW5zIGlzIGVuYWJsZWQgb3Igbm90CgogICAgLy8gTW9kaWZpZXJzCiAgICBtb2RpZmllciBvbmx5V2hlblRyYW5zZmVyRW5hYmxlZCgpIHsKICAgICAgICBpZiAoIXRyYW5zZmVyRW5hYmxlZCkgewogICAgICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gdGVhbUFkZHIgfHwgbXNnLnNlbmRlciA9PSBjcm93ZHNhbGVBZGRyKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBFdmVudHMKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CgogICAgLyoqCiAgICAgKiBUaGUgbGlzdGVkIGFkZHJlc3NlcyBhcmUgbm90IHZhbGlkIHJlY2lwaWVudHMgb2YgdG9rZW5zLgogICAgICoKICAgICAqIDB4MCAgICAgICAgICAgLSB0aGUgemVybyBhZGRyZXNzIGlzIG5vdCB2YWxpZAogICAgICogdGhpcyAgICAgICAgICAtIHRoZSBjb250cmFjdCBpdHNlbGYgc2hvdWxkIG5vdCByZWNlaXZlIHRva2VucwogICAgICogb3duZXIgICAgICAgICAtIHRoZSBvd25lciBoYXMgYWxsIHRoZSBpbml0aWFsIHRva2VucywgYnV0IGNhbm5vdCByZWNlaXZlIGFueSBiYWNrCiAgICAgKiB0ZWFtQWRkciAgICAgIC0gdGhlIHRlYW0gaGFzIGFuIGFsbG93YW5jZSBvZiB0b2tlbnMgdG8gdHJhbnNmZXIsIGJ1dCBkb2VzIG5vdCByZWNlaXZlIGFueQogICAgICogY3Jvd2RzYWxlQWRkciAgICAgIC0gdGhlIHNhbGUgaGFzIGFuIGFsbG93YW5jZSBvZiB0b2tlbnMgdG8gdHJhbnNmZXIsIGJ1dCBkb2VzIG5vdCByZWNlaXZlIGFueQogICAgICovCiAgICBtb2RpZmllciB2YWxpZERlc3RpbmF0aW9uKGFkZHJlc3MgX3RvKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygweDApKTsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKHRoaXMpKTsKICAgICAgICByZXF1aXJlKF90byAhPSBvd25lcik7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcyh0ZWFtQWRkcikpOwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoY3Jvd2RzYWxlQWRkcikpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RvciAtIGluc3RhbnRpYXRlcyB0b2tlbiBzdXBwbHkgYW5kIGFsbG9jYXRlcyBiYWxhbmFjZSBvZgogICAgICogdG8gdGhlIG93bmVyIChtc2cuc2VuZGVyKS4KICAgICAqLwogICAgZnVuY3Rpb24gQml0a29tVG9rZW4oYWRkcmVzcyBfdGVhbSkgcHVibGljIHsKICAgICAgICAvLyB0aGUgb3duZXIgaXMgYSBjdXN0b2RpYW4gb2YgdG9rZW5zIHRoYXQgY2FuCiAgICAgICAgLy8gZ2l2ZSBhbiBhbGxvd2FuY2Ugb2YgdG9rZW5zIGZvciBjcm93ZHNhbGVzCiAgICAgICAgLy8gb3IgdG8gdGhlIGFkbWluLCBidXQgY2Fubm90IGl0c2VsZiB0cmFuc2ZlcgogICAgICAgIC8vIHRva2VuczsgaGVuY2UsIHRoaXMgcmVxdWlyZW1lbnQKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gX3RlYW0pOwoKICAgICAgICB0b3RhbFN1cHBseSA9IElOSVRJQUxfU1VQUExZOwogICAgICAgIGNyb3dkc2FsZUFsbG93YW5jZSA9IENST1dEU0FMRV9BTExPV0FOQ0U7CiAgICAgICAgdGVhbUFsbG93YW5jZSA9IFRFQU1fQUxMT1dBTkNFOwoKICAgICAgICAvLyBtaW50IGFsbCB0b2tlbnMKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHRvdGFsU3VwcGx5OwogICAgICAgIFRyYW5zZmVyKGFkZHJlc3MoMHgwKSwgbXNnLnNlbmRlciwgdG90YWxTdXBwbHkpOwoKICAgICAgICB0ZWFtQWRkciA9IF90ZWFtOwogICAgICAgIGFwcHJvdmUodGVhbUFkZHIsIHRlYW1BbGxvd2FuY2UpOwogICAgfQoKICAgIC8qKgogICAgICogQXNzb2NpYXRlcyB0aGlzIHRva2VuIHdpdGggYSBjdXJyZW50IGNyb3dkc2FsZSwgZ2l2aW5nIHRoZSBjcm93ZHNhbGUKICAgICAqIGFuIGFsbG93YW5jZSBvZiB0b2tlbnMgZnJvbSB0aGUgY3Jvd2RzYWxlIHN1cHBseS4gVGhpcyBnaXZlcyB0aGUKICAgICAqIGNyb3dkc2FsZSB0aGUgYWJpbGl0eSB0byBjYWxsIHRyYW5zZmVyRnJvbSB0byB0cmFuc2ZlciB0b2tlbnMgdG8KICAgICAqIHdob21ldmVyIGhhcyBwdXJjaGFzZWQgdGhlbS4KICAgICAqCiAgICAgKiBOb3RlIHRoYXQgaWYgX2Ftb3VudEZvclNhbGUgaXMgMCwgdGhlbiBpdCBpcyBhc3N1bWVkIHRoYXQgdGhlIGZ1bGwKICAgICAqIHJlbWFpbmluZyBjcm93ZHNhbGUgc3VwcGx5IGlzIG1hZGUgYXZhaWxhYmxlIHRvIHRoZSBjcm93ZHNhbGUuCiAgICAgKgogICAgICogQHBhcmFtIF9jcm93ZHNhbGVBZGRyIFRoZSBhZGRyZXNzIG9mIGEgY3Jvd2RzYWxlIGNvbnRyYWN0IHRoYXQgd2lsbCBzZWxsIHRoaXMgdG9rZW4KICAgICAqIEBwYXJhbSBfYW1vdW50Rm9yU2FsZSBUaGUgc3VwcGx5IG9mIHRva2VucyBwcm92aWRlZCB0byB0aGUgY3Jvd2RzYWxlCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldENyb3dkc2FsZShhZGRyZXNzIF9jcm93ZHNhbGVBZGRyLCB1aW50MjU2IF9hbW91bnRGb3JTYWxlKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoIXRyYW5zZmVyRW5hYmxlZCk7CiAgICAgICAgcmVxdWlyZShfYW1vdW50Rm9yU2FsZSA8PSBjcm93ZHNhbGVBbGxvd2FuY2UpOwoKICAgICAgICAvLyBpZiAwLCB0aGVuIGZ1bGwgYXZhaWxhYmxlIGNyb3dkc2FsZSBzdXBwbHkgaXMgYXNzdW1lZAogICAgICAgIHVpbnQgYW1vdW50ID0gKF9hbW91bnRGb3JTYWxlID09IDApID8gY3Jvd2RzYWxlQWxsb3dhbmNlIDogX2Ftb3VudEZvclNhbGU7CgogICAgICAgIC8vIENsZWFyIGFsbG93YW5jZSBvZiBvbGQsIGFuZCBzZXQgYWxsb3dhbmNlIG9mIG5ldwogICAgICAgIGFwcHJvdmUoY3Jvd2RzYWxlQWRkciwgMCk7CiAgICAgICAgYXBwcm92ZShfY3Jvd2RzYWxlQWRkciwgYW1vdW50KTsKCiAgICAgICAgY3Jvd2RzYWxlQWRkciA9IF9jcm93ZHNhbGVBZGRyOwogICAgfQoKICAgIC8qKgogICAgICogRW5hYmxlcyB0aGUgYWJpbGl0eSBvZiBhbnlvbmUgdG8gdHJhbnNmZXIgdGhlaXIgdG9rZW5zLiBUaGlzIGNhbgogICAgICogb25seSBiZSBjYWxsZWQgYnkgdGhlIHRva2VuIG93bmVyLiBPbmNlIGVuYWJsZWQsIGl0IGlzIG5vdAogICAgICogcG9zc2libGUgdG8gZGlzYWJsZSB0cmFuc2ZlcnMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGVuYWJsZVRyYW5zZmVyKCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICB0cmFuc2ZlckVuYWJsZWQgPSB0cnVlOwogICAgICAgIGFwcHJvdmUoY3Jvd2RzYWxlQWRkciwgMCk7CiAgICAgICAgYXBwcm92ZSh0ZWFtQWRkciwgMCk7CiAgICAgICAgY3Jvd2RzYWxlQWxsb3dhbmNlID0gMDsKICAgICAgICB0ZWFtQWxsb3dhbmNlID0gMDsKICAgIH0KCiAgICAvKioKICAgICAqIE92ZXJyaWRlcyBFUkMyMCB0cmFuc2ZlciBmdW5jdGlvbiB3aXRoIG1vZGlmaWVyIHRoYXQgcHJldmVudHMgdGhlCiAgICAgKiBhYmlsaXR5IHRvIHRyYW5zZmVyIHRva2VucyB1bnRpbCBhZnRlciB0cmFuc2ZlcnMgaGF2ZSBiZWVuIGVuYWJsZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIG9ubHlXaGVuVHJhbnNmZXJFbmFibGVkIHZhbGlkRGVzdGluYXRpb24oX3RvKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIE92ZXJyaWRlcyBFUkMyMCB0cmFuc2ZlckZyb20gZnVuY3Rpb24gd2l0aCBtb2RpZmllciB0aGF0IHByZXZlbnRzIHRoZQogICAgICogYWJpbGl0eSB0byB0cmFuc2ZlciB0b2tlbnMgdW50aWwgYWZ0ZXIgdHJhbnNmZXJzIGhhdmUgYmVlbiBlbmFibGVkLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgb25seVdoZW5UcmFuc2ZlckVuYWJsZWQgdmFsaWREZXN0aW5hdGlvbihfdG8pIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBib29sIHJlc3VsdCA9IHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gY3Jvd2RzYWxlQWRkcikKICAgICAgICAgICAgICAgIGNyb3dkc2FsZUFsbG93YW5jZSA9IGNyb3dkc2FsZUFsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gdGVhbUFkZHIpCiAgICAgICAgICAgICAgICB0ZWFtQWxsb3dhbmNlID0gdGVhbUFsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQnVybnMgYSBzcGVjaWZpYyBhbW91bnQgb2YgdG9rZW5zIGlmIG1zZy5zZW5kZXIgPT0gb3duZXIKICAgICAqIG9yIHRyYW5zZmVyRW5hYmxlZCA9PSB0cnVlCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgYnVybmVkLgogICAgICovCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgICAgIHJlcXVpcmUodHJhbnNmZXJFbmFibGVkIHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIC8vIG5vIG5lZWQgdG8gcmVxdWlyZSB2YWx1ZSA8PSB0b3RhbFN1cHBseSwgc2luY2UgdGhhdCB3b3VsZCBpbXBseSB0aGUKICAgICAgICAvLyBzZW5kZXIncyBiYWxhbmNlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgdG90YWxTdXBwbHksIHdoaWNoICpzaG91bGQqIGJlIGFuIGFzc2VydGlvbiBmYWlsdXJlCgogICAgICAgIGFkZHJlc3MgYnVybmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tidXJuZXJdID0gYmFsYW5jZXNbYnVybmVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIEJ1cm4oYnVybmVyLCBfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIGFkZHJlc3MoMHgwKSwgX3ZhbHVlKTsKICAgIH0KfQ=='.
	

]
