Class {
	#name : #SRT421411d3c9fa36ecbcbd846be352ae93a8e23642,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT421411d3c9fa36ecbcbd846be352ae93a8e23642 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKgogICAgTWFuYWdlcyBvd25lcnNoaXAgYW5kIHBlcm1pc3Npb25zIGZvciB0aGUgd2hvbGUgY29udHJhY3QuCiovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xODsKCi8qCiAgICBNYW5hZ2VzIG93bmVyc2hpcCBhbmQgcGVybWlzc2lvbnMgZm9yIHRoZSB3aG9sZSBjb250cmFjdC4KKi8KCmNvbnRyYWN0IEJMQWNjZXNzIHsKCiAgICBhZGRyZXNzIHB1YmxpYyBtYWluQWRkcmVzczsgLy9NYWluIENvbnRyYWN0IEFkZHJlc3MKICAgIGFkZHJlc3MgcHVibGljIGJvbnVzQWRkcmVzczsgLy9Cb251c0FkZHJlc3MKICAgIGV2ZW50IFVwZGF0ZWRNYWluQWNjb3VudChhZGRyZXNzIF9uZXdNYWluQWRkcmVzcyk7CiAgICBldmVudCBVcGRhdGVkQm9udXNBY2NvdW50KGFkZHJlc3MgX25ld0JvbnVzQWRkcmVzcyk7CgogICAgZnVuY3Rpb24gQkxBY2Nlc3MoKSBwdWJsaWMgewogICAgICAgIG1haW5BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICBib251c0FkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlQcmltYXJ5KCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBtYWluQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Qm9udXMoKSB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBib251c0FkZHJlc3MpOwogICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFNlY29uZGFyeShhZGRyZXNzIF9uZXdTZWNvbmRhcnkpIGV4dGVybmFsIG9ubHlQcmltYXJ5IHsKICAgICAgcmVxdWlyZShfbmV3U2Vjb25kYXJ5ICE9IGFkZHJlc3MoMCkpOwogICAgICBib251c0FkZHJlc3MgPSBfbmV3U2Vjb25kYXJ5OwogICAgICBVcGRhdGVkQm9udXNBY2NvdW50KF9uZXdTZWNvbmRhcnkpOwogICAgfQoKICAgIC8vQWxsb3dzIHRvIGNoYW5nZSB0aGUgcHJpbWFyeSBhY2NvdW50IGZvciB0aGUgY29udHJhY3QKICAgIGZ1bmN0aW9uIHNldFByaW1hcnlBY2NvdW50KGFkZHJlc3MgX25ld01haW5BZGRyZXNzKSBleHRlcm5hbCBvbmx5UHJpbWFyeSB7CiAgICAgICAgcmVxdWlyZShfbmV3TWFpbkFkZHJlc3MgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgbWFpbkFkZHJlc3MgPSBfbmV3TWFpbkFkZHJlc3M7CiAgICAgICAgVXBkYXRlZE1haW5BY2NvdW50KF9uZXdNYWluQWRkcmVzcyk7CiAgICB9Cgp9CgoKLyoKIEludGVyZmFjZSBmb3Igb3VyIHNlcGFyYXRlIGV0ZXJuYWwgc3RvcmFnZS4KKi8KCmNvbnRyYWN0IERhdGFTdG9yYWdlSW50ZXJmYWNlIHsKICAgIGZ1bmN0aW9uIGdldFVJbnQoYnl0ZXMzMiByZWNvcmQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIHNldFVJbnQoYnl0ZXMzMiByZWNvcmQsIHVpbnQgdmFsdWUpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGdldEFkZChieXRlczMyIHJlY29yZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gc2V0QWRkKGJ5dGVzMzIgcmVjb3JkLCBhZGRyZXNzIHZhbHVlKSBwdWJsaWM7CiAgICBmdW5jdGlvbiBnZXRCeXRlczMyKGJ5dGVzMzIgcmVjb3JkKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMik7CiAgICBmdW5jdGlvbiBzZXRCeXRlczMyKGJ5dGVzMzIgcmVjb3JkLCBieXRlczMyIHZhbHVlKSBwdWJsaWM7CiAgICBmdW5jdGlvbiBnZXRCb29sKGJ5dGVzMzIgcmVjb3JkKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBzZXRCb29sKGJ5dGVzMzIgcmVjb3JkLCBib29sIHZhbHVlKSBwdWJsaWM7CiAgICBmdW5jdGlvbiB3aXRoZHJhdyhhZGRyZXNzIGJlbmVmaWNpYXJ5KSBwdWJsaWM7Cn0KCi8qCiBXcmFwcGVyIGFyb3VuZCBEYXRhIFN0b3JhZ2UgaW50ZXJmYWNlCiovCgpjb250cmFjdCBCTFN0b3JhZ2UgaXMgQkxBY2Nlc3MgewoKICAgIERhdGFTdG9yYWdlSW50ZXJmYWNlIGludGVybmFsIHM7CiAgICBhZGRyZXNzIHB1YmxpYyBzdG9yYWdlQWRkcmVzczsKCiAgICBldmVudCBTdG9yYWdlVXBkYXRlZChhZGRyZXNzIF9uZXdTdG9yYWdlQWRkcmVzcyk7CgogICAgZnVuY3Rpb24gQkxTdG9yYWdlKCkgcHVibGljIHsKICAgICAgICBzID0gRGF0YVN0b3JhZ2VJbnRlcmZhY2UobWFpbkFkZHJlc3MpOwogICAgfQoKICAgIC8vIGFsbG93cyB0byBzZXR1cCBhIG5ldyBTdG9yYWdlIGFkZHJlc3MuIFNob3VsZCBuZXZlciBiZSBuZWVkZWQgYnV0IHlvdSBuZXZlciBrbm93IQogICAgZnVuY3Rpb24gc2V0RGF0YVN0b3JhZ2UoYWRkcmVzcyBuZXdBZGRyZXNzKSBwdWJsaWMgb25seVByaW1hcnkgewogICAgICAgIHMgPSBEYXRhU3RvcmFnZUludGVyZmFjZShuZXdBZGRyZXNzKTsKICAgICAgICBzdG9yYWdlQWRkcmVzcyA9IG5ld0FkZHJlc3M7CiAgICAgICAgU3RvcmFnZVVwZGF0ZWQobmV3QWRkcmVzcyk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0S2V5KHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMoYnl0ZXMzMiBrZXkpIHsKICAgICAgICBrZXkgPSBrZWNjYWsyNTYoeCwgIjoiLCB5KTsKICAgIH0KfQoKCmNvbnRyYWN0IEJMQmFsYW5jZXMgaXMgQkxTdG9yYWdlIHsKCiAgICBldmVudCBXaXRoZHJhd0JhbGFuY2UoYWRkcmVzcyBpbmRleGVkIG93bmVyLCB1aW50IGFtb3VudCk7CiAgICBldmVudCBBbGxvd2FuY2VHcmFudGVkKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgdWludCBfYW1vdW50KTsKICAgIGV2ZW50IFNlbnRGZWVUb1BsYXRmb3JtKHVpbnQgYW1vdW50KTsKICAgIGV2ZW50IFNlbnRBbW91bnRUb093bmVyKHVpbnQgYW1vdW50LCBhZGRyZXNzIGluZGV4ZWQgb3duZXIpOwogICAgZXZlbnQgQm9udXNHcmFudGVkKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50IF9hbW91bnQpOwogICAgZXZlbnQgU2VudEFtb3VudFRvTmVpZ2hib3Vycyh1aW50IHJld2FyZCwgYWRkcmVzcyBpbmRleGVkIG93bmVyKTsKCiAgICAvLyBnZXQgdGhlIGJhbGFuY2UgZm9yIGEgZ2l2ZW4gYWNjb3VudAogICAgZnVuY3Rpb24gZ2V0QmFsYW5jZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcy5nZXRVSW50KGtlY2NhazI1Nihtc2cuc2VuZGVyLCAiYmFsYW5jZSIpKTsKICAgIH0KCiAgICAvLyBnZXQgdGhlIGJhbGFuY2UgZm9yIGEgZ2l2ZW4gYWNjb3VudAogICAgZnVuY3Rpb24gZ2V0QWNjb3VudEJhbGFuY2UoYWRkcmVzcyBfYWNjb3VudCkgcHVibGljIHZpZXcgb25seVByaW1hcnkgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBzLmdldFVJbnQoa2VjY2FrMjU2KF9hY2NvdW50LCAiYmFsYW5jZSIpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRBY2NvdW50QWxsb3dhbmNlKGFkZHJlc3MgX2FjY291bnQpIHB1YmxpYyB2aWV3IG9ubHlQcmltYXJ5IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcy5nZXRVSW50KGtlY2NhazI1NihfYWNjb3VudCwgInByb21vQWxsb3dhbmNlIikpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE15QWxsb3dhbmNlKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBzLmdldFVJbnQoa2VjY2FrMjU2KG1zZy5zZW5kZXIsICJwcm9tb0FsbG93YW5jZSIpKTsKICAgIH0KCiAgICAvLyBJRiBhIGJsb2NrIGhhcyBiZWVuIGFzc2lnbmVkIGEgYm9udXMsIHByb3Z1ZGUgdGhlIGJvbnVzIHRvIHRoZSBuZXh0IGJ1eWVyLgogICAgZnVuY3Rpb24gZ2l2ZUJvbnVzSWZFeGlzdHModWludCB4LCB1aW50IHkpIGludGVybmFsIHsKICAgICAgYnl0ZXMzMiBrZXkgPSBnZXRLZXkoeCwgeSk7CiAgICAgIHVpbnQgYm9udXMgPSBzLmdldFVJbnQoa2VjY2FrMjU2KGtleSwgImJvbnVzIikpOwogICAgICB1aW50IGJhbGFuY2UgPSBzLmdldFVJbnQoa2VjY2FrMjU2KG1zZy5zZW5kZXIsICJiYWxhbmNlIikpOwogICAgICB1aW50IHRvdGFsID0gYmFsYW5jZSArIGJvbnVzOwogICAgICBzLnNldFVJbnQoa2VjY2FrMjU2KG1zZy5zZW5kZXIsICJiYWxhbmNlIiksIHRvdGFsKTsKICAgICAgcy5zZXRVSW50KGtlY2NhazI1NihrZXksICJib251cyIpLCAwKTsKICAgICAgaWYgKGJvbnVzID4gMCkgewogICAgICAgIEJvbnVzR3JhbnRlZChtc2cuc2VuZGVyLCBib251cyk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBhbGxvdyBhIGJsb2NrIGFsbG93YW5jZSBmb3IgcHJvbW8gYW5kIGVhcmx5IGJldGEgdXNlcnMKICAgIGZ1bmN0aW9uIGdyYW50QWxsb3dhbmNlKGFkZHJlc3MgYmVuZWZpY2lhcnksIHVpbnQgYWxsb3dhbmNlKSBwdWJsaWMgb25seVByaW1hcnkgewogICAgICAgIHVpbnQgZXhpc3RpbmdBbGxvd2FuY2UgPSBzLmdldFVJbnQoa2VjY2FrMjU2KGJlbmVmaWNpYXJ5LCAicHJvbW9BbGxvd2FuY2UiKSk7CiAgICAgICAgZXhpc3RpbmdBbGxvd2FuY2UgKz0gYWxsb3dhbmNlOwogICAgICAgIHMuc2V0VUludChrZWNjYWsyNTYoYmVuZWZpY2lhcnksICJwcm9tb0FsbG93YW5jZSIpLCBleGlzdGluZ0FsbG93YW5jZSk7CiAgICAgICAgQWxsb3dhbmNlR3JhbnRlZChiZW5lZmljaWFyeSwgYWxsb3dhbmNlKTsKICAgIH0KCiAgICAvLyB3aXRoZHJhdyB0aGUgY3VycmVudCBiYWxhbmNlCiAgICBmdW5jdGlvbiB3aXRoZHJhdygpIHB1YmxpYyB7CiAgICAgICAgdWludCBiYWxhbmNlID0gcy5nZXRVSW50KGtlY2NhazI1Nihtc2cuc2VuZGVyLCAiYmFsYW5jZSIpKTsKICAgICAgICBzLndpdGhkcmF3KG1zZy5zZW5kZXIpOwogICAgICAgIFdpdGhkcmF3QmFsYW5jZShtc2cuc2VuZGVyLCBiYWxhbmNlKTsKICAgIH0KCiAgICAvLyBUcmFkaW5nIGFuZCBidXlpbmcgYmFsYW5jZXMgZmxvdwogICAgZnVuY3Rpb24gcmV3YXJkUGFydGllcyAodWludCB4LCB1aW50IHksIHVpbnQgZmVlUGVyY2VudGFnZSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgZmVlID0gbXNnLnZhbHVlICogZmVlUGVyY2VudGFnZSAvIDEwMDsKICAgICAgICB1aW50IHJlbWFpbmRlciA9IG1zZy52YWx1ZSAtIGZlZTsKICAgICAgICB1aW50IHJld2FyZFBjdCA9IHMuZ2V0VUludCgibmVpZ2hib3VyUmV3YXJkUGVyY2VudGFnZSIpOwogICAgICAgIHVpbnQgdG9Pd25lciA9IHJlbWFpbmRlciAtIChyZW1haW5kZXIgKiByZXdhcmRQY3QgKiA4IC8gMTAwKTsKICAgICAgICByZXdhcmRDb250cmFjdChmZWUpOwogICAgICAgIHJld2FyZFByZXZpb3VzT3duZXIoeCwgeSwgdG9Pd25lcik7CiAgICAgICAgcmV3YXJkTmVpZ2hib3Vycyh4LCB5LCByZW1haW5kZXIsIHJld2FyZFBjdCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmV3YXJkTmVpZ2hib3VycyAodWludCB4LCB1aW50IHksIHVpbnQgcmVtYWluZGVyLCB1aW50IHJld2FyZFBjdCkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgcmV3YXJkQW1vdW50ID0gcmVtYWluZGVyICogcmV3YXJkUGN0IC8gMTAwOwogICAgICBhZGRyZXNzIG53ID0gcy5nZXRBZGQoa2VjY2FrMjU2KGtlY2NhazI1Nih4LTEsICI6IiwgeS0xKSwgIm93bmVyIikpOwogICAgICBhZGRyZXNzIG4gPSBzLmdldEFkZChrZWNjYWsyNTYoa2VjY2FrMjU2KHgtMSwgIjoiLCB5KSwgIm93bmVyIikpOwogICAgICBhZGRyZXNzIG5lID0gcy5nZXRBZGQoa2VjY2FrMjU2KGtlY2NhazI1Nih4LTEsICI6IiwgeSsxKSwgIm93bmVyIikpOwogICAgICBhZGRyZXNzIHcgPSBzLmdldEFkZChrZWNjYWsyNTYoa2VjY2FrMjU2KHgsICI6IiwgeS0xKSwgIm93bmVyIikpOwogICAgICBhZGRyZXNzIGUgPSBzLmdldEFkZChrZWNjYWsyNTYoa2VjY2FrMjU2KHgsICI6IiwgeSsxKSwgIm93bmVyIikpOwogICAgICBhZGRyZXNzIHN3ID0gcy5nZXRBZGQoa2VjY2FrMjU2KGtlY2NhazI1Nih4KzEsICI6IiwgeS0xKSwgIm93bmVyIikpOwogICAgICBhZGRyZXNzIHNvdXRoID0gcy5nZXRBZGQoa2VjY2FrMjU2KGtlY2NhazI1Nih4KzEsICI6IiwgeSksICJvd25lciIpKTsKICAgICAgYWRkcmVzcyBzZSA9IHMuZ2V0QWRkKGtlY2NhazI1NihrZWNjYWsyNTYoeCsxLCAiOiIsIHkrMSksICJvd25lciIpKTsKICAgICAgbncgIT0gYWRkcmVzcygwKSA/IHJld2FyZEJsb2NrKG53LCByZXdhcmRBbW91bnQpIDogcmV3YXJkQmxvY2soYm9udXNBZGRyZXNzLCByZXdhcmRBbW91bnQpOwogICAgICBuICE9IGFkZHJlc3MoMCkgPyByZXdhcmRCbG9jayhuLCByZXdhcmRBbW91bnQpIDogcmV3YXJkQmxvY2soYm9udXNBZGRyZXNzLCByZXdhcmRBbW91bnQpOwogICAgICBuZSAhPSBhZGRyZXNzKDApID8gcmV3YXJkQmxvY2sobmUsIHJld2FyZEFtb3VudCkgOiByZXdhcmRCbG9jayhib251c0FkZHJlc3MsIHJld2FyZEFtb3VudCk7CiAgICAgIHcgIT0gYWRkcmVzcygwKSA/IHJld2FyZEJsb2NrKHcsIHJld2FyZEFtb3VudCkgOiByZXdhcmRCbG9jayhib251c0FkZHJlc3MsIHJld2FyZEFtb3VudCk7CiAgICAgIGUgIT0gYWRkcmVzcygwKSA/IHJld2FyZEJsb2NrKGUsIHJld2FyZEFtb3VudCkgOiByZXdhcmRCbG9jayhib251c0FkZHJlc3MsIHJld2FyZEFtb3VudCk7CiAgICAgIHN3ICE9IGFkZHJlc3MoMCkgPyByZXdhcmRCbG9jayhzdywgcmV3YXJkQW1vdW50KSA6IHJld2FyZEJsb2NrKGJvbnVzQWRkcmVzcywgcmV3YXJkQW1vdW50KTsKICAgICAgc291dGggIT0gYWRkcmVzcygwKSA/IHJld2FyZEJsb2NrKHNvdXRoLCByZXdhcmRBbW91bnQpIDogcmV3YXJkQmxvY2soYm9udXNBZGRyZXNzLCByZXdhcmRBbW91bnQpOwogICAgICBzZSAhPSBhZGRyZXNzKDApID8gcmV3YXJkQmxvY2soc2UsIHJld2FyZEFtb3VudCkgOiByZXdhcmRCbG9jayhib251c0FkZHJlc3MsIHJld2FyZEFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmV3YXJkQmxvY2soYWRkcmVzcyBhY2NvdW50LCB1aW50IHJld2FyZCkgaW50ZXJuYWwgewogICAgICB1aW50IGJhbGFuY2UgPSBzLmdldFVJbnQoa2VjY2FrMjU2KGFjY291bnQsICJiYWxhbmNlIikpOwogICAgICBiYWxhbmNlICs9IHJld2FyZDsKICAgICAgcy5zZXRVSW50KGtlY2NhazI1NihhY2NvdW50LCAiYmFsYW5jZSIpLCBiYWxhbmNlKTsKICAgICAgU2VudEFtb3VudFRvTmVpZ2hib3VycyhyZXdhcmQsYWNjb3VudCk7CiAgICB9CgogICAgLy8gY29udHJhY3QgY29tbWlzc2lvbnMKICAgIGZ1bmN0aW9uIHJld2FyZENvbnRyYWN0ICh1aW50IGZlZSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgbWFpbkJhbGFuY2UgPSBzLmdldFVJbnQoa2VjY2FrMjU2KG1haW5BZGRyZXNzLCAiYmFsYW5jZSIpKTsKICAgICAgICBtYWluQmFsYW5jZSArPSBmZWU7CiAgICAgICAgcy5zZXRVSW50KGtlY2NhazI1NihtYWluQWRkcmVzcywgImJhbGFuY2UiKSwgbWFpbkJhbGFuY2UpOwogICAgICAgIFNlbnRGZWVUb1BsYXRmb3JtKGZlZSk7CiAgICB9CgogICAgLy8gcmV3YXJkIHRoZSBwcmV2aW91cyBvd25lciBvZiB0aGUgYmxvY2sgb3IgdGhlIGNvbnRyYWN0IGlmIHRoZSBibG9jayBpcyBib3VnaHQgZm9yIHRoZSBmaXJzdCB0aW1lCiAgICBmdW5jdGlvbiByZXdhcmRQcmV2aW91c093bmVyICh1aW50IHgsIHVpbnQgeSwgdWludCBhbW91bnQpIGludGVybmFsIHsKICAgICAgICB1aW50IHJld2FyZEJhbGFuY2U7CiAgICAgICAgYnl0ZXMzMiBrZXkgPSBnZXRLZXkoeCwgeSk7CiAgICAgICAgYWRkcmVzcyBvd25lciA9IHMuZ2V0QWRkKGtlY2NhazI1NihrZXksICJvd25lciIpKTsKICAgICAgICBpZiAob3duZXIgPT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICByZXdhcmRCYWxhbmNlID0gcy5nZXRVSW50KGtlY2NhazI1NihtYWluQWRkcmVzcywgImJhbGFuY2UiKSk7CiAgICAgICAgICAgIHJld2FyZEJhbGFuY2UgKz0gYW1vdW50OwogICAgICAgICAgICBzLnNldFVJbnQoa2VjY2FrMjU2KG1haW5BZGRyZXNzLCAiYmFsYW5jZSIpLCByZXdhcmRCYWxhbmNlKTsKICAgICAgICAgICAgU2VudEFtb3VudFRvT3duZXIoYW1vdW50LCBtYWluQWRkcmVzcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV3YXJkQmFsYW5jZSA9IHMuZ2V0VUludChrZWNjYWsyNTYob3duZXIsICJiYWxhbmNlIikpOwogICAgICAgICAgICByZXdhcmRCYWxhbmNlICs9IGFtb3VudDsKICAgICAgICAgICAgcy5zZXRVSW50KGtlY2NhazI1Nihvd25lciwgImJhbGFuY2UiKSwgcmV3YXJkQmFsYW5jZSk7CiAgICAgICAgICAgIFNlbnRBbW91bnRUb093bmVyKGFtb3VudCwgb3duZXIpOwogICAgICAgIH0KICAgIH0KfQoKY29udHJhY3QgQkxCbG9ja3MgaXMgQkxCYWxhbmNlcyB7CgogICAgZXZlbnQgQ3JlYXRlZEJsb2NrKAogICAgICAgIHVpbnQgeCwKICAgICAgICB1aW50IHksCiAgICAgICAgdWludCBwcmljZSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgb3duZXIsCiAgICAgICAgYnl0ZXMzMiBuYW1lLAogICAgICAgIGJ5dGVzMzIgZGVzY3JpcHRpb24sCiAgICAgICAgYnl0ZXMzMiB1cmwsCiAgICAgICAgYnl0ZXMzMiBpbWFnZVVSTCk7CgogICAgZXZlbnQgU2V0QmxvY2tGb3JTYWxlKAogICAgICAgIHVpbnQgeCwKICAgICAgICB1aW50IHksCiAgICAgICAgdWludCBwcmljZSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgb3duZXIpOwoKICAgIGV2ZW50IFVuc2V0QmxvY2tGb3JTYWxlKAogICAgICAgIHVpbnQgeCwKICAgICAgICB1aW50IHksCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG93bmVyKTsKCiAgICBldmVudCBCb3VnaHRCbG9jaygKICAgICAgICB1aW50IHgsCiAgICAgICAgdWludCB5LAogICAgICAgIHVpbnQgcHJpY2UsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG93bmVyLAogICAgICAgIGJ5dGVzMzIgbmFtZSwKICAgICAgICBieXRlczMyIGRlc2NyaXB0aW9uLAogICAgICAgIGJ5dGVzMzIgdXJsLAogICAgICAgIGJ5dGVzMzIgaW1hZ2VVUkwpOwoKICAgIGV2ZW50IFNvbGRCbG9jaygKICAgICAgICB1aW50IHgsCiAgICAgICAgdWludCB5LAogICAgICAgIHVpbnQgb2xkUHJpY2UsCiAgICAgICAgdWludCBuZXdQcmljZSwKICAgICAgICB1aW50IGZlZVBlcmNlbnRhZ2UsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG93bmVyKTsKCiAgICBldmVudCBVcGRhdGVkQmxvY2sodWludCB4LAogICAgICAgIHVpbnQgeSwKICAgICAgICBieXRlczMyIG5hbWUsCiAgICAgICAgYnl0ZXMzMiBkZXNjcmlwdGlvbiwKICAgICAgICBieXRlczMyIHVybCwKICAgICAgICBieXRlczMyIGltYWdlVVJMLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBvd25lcik7CgogICAgLy8gQ3JlYXRlIGEgYmxvY2sgaWYgaXQgZG9lc24ndCBleGlzdAogICAgZnVuY3Rpb24gY3JlYXRlQmxvY2soCiAgICAgICAgdWludCB4LAogICAgICAgIHVpbnQgeSwKICAgICAgICBieXRlczMyIG5hbWUsCiAgICAgICAgYnl0ZXMzMiBkZXNjcmlwdGlvbiwKICAgICAgICBieXRlczMyIHVybCwKICAgICAgICBieXRlczMyIGltYWdlVVJMCiAgICApIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBieXRlczMyIGtleSA9IGdldEtleSh4LCB5KTsKICAgICAgICB1aW50IGluaXRpYWxQcmljZSA9IHMuZ2V0VUludCgiaW5pdGlhbFByaWNlIik7CiAgICAgICAgYWRkcmVzcyBvd25lciA9IHMuZ2V0QWRkKGtlY2NhazI1NihrZXksICJvd25lciIpKTsKICAgICAgICB1aW50IGFsbG93YW5jZSA9IHMuZ2V0VUludChrZWNjYWsyNTYobXNnLnNlbmRlciwgInByb21vQWxsb3dhbmNlIikpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IGluaXRpYWxQcmljZSB8fCBhbGxvd2FuY2UgPiAwKTsKICAgICAgICByZXF1aXJlKG93bmVyID09IGFkZHJlc3MoMCkpOwogICAgICAgIHVpbnQgZmVlUGVyY2VudGFnZSA9IHMuZ2V0VUludCgiYnV5T3V0RmVlUGVyY2VudGFnZSIpOwogICAgICAgIGlmIChtc2cudmFsdWUgPj0gaW5pdGlhbFByaWNlKSB7CiAgICAgICAgICAgIHJld2FyZFBhcnRpZXMoeCwgeSwgZmVlUGVyY2VudGFnZSk7CiAgICAgICAgICAgIHMuc2V0VUludChrZWNjYWsyNTYoa2V5LCAicHJpY2UiKSwgbXNnLnZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGxvd2FuY2UtLTsKICAgICAgICAgICAgcy5zZXRVSW50KGtlY2NhazI1Nihtc2cuc2VuZGVyLCAicHJvbW9BbGxvd2FuY2UiKSwgYWxsb3dhbmNlKTsKICAgICAgICAgICAgcy5zZXRVSW50KGtlY2NhazI1NihrZXksICJwcmljZSIpLCBpbml0aWFsUHJpY2UpOwogICAgICAgIH0KICAgICAgICBzLnNldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgIm5hbWUiKSwgbmFtZSk7CiAgICAgICAgcy5zZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJkZXNjcmlwdGlvbiIpLCBkZXNjcmlwdGlvbik7CiAgICAgICAgcy5zZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJ1cmwiKSwgdXJsKTsKICAgICAgICBzLnNldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgImltYWdlVVJMIiksIGltYWdlVVJMKTsKICAgICAgICBzLnNldEFkZChrZWNjYWsyNTYoa2V5LCAib3duZXIiKSwgbXNnLnNlbmRlcik7CiAgICAgICAgdWludCBibG9ja0NvdW50ID0gcy5nZXRVSW50KCJibG9ja0NvdW50Iik7CiAgICAgICAgZ2l2ZUJvbnVzSWZFeGlzdHMoeCwgeSk7CiAgICAgICAgYmxvY2tDb3VudCsrOwogICAgICAgIHMuc2V0VUludCgiYmxvY2tDb3VudCIsIGJsb2NrQ291bnQpOwogICAgICAgIHN0b3JhZ2VBZGRyZXNzLnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgICAgQ3JlYXRlZEJsb2NrKHgsCiAgICAgICAgICAgIHksCiAgICAgICAgICAgIG1zZy52YWx1ZSwKICAgICAgICAgICAgbXNnLnNlbmRlciwKICAgICAgICAgICAgbmFtZSwKICAgICAgICAgICAgZGVzY3JpcHRpb24sCiAgICAgICAgICAgIHVybCwKICAgICAgICAgICAgaW1hZ2VVUkwpOwogICAgfQoKICAgIC8vIEdldCBkZXRhaWxzIGZvciBhIGJsb2NrCiAgICBmdW5jdGlvbiBnZXRCbG9jayAodWludCB4LCB1aW50IHkpIHB1YmxpYyB2aWV3IHJldHVybnMgKAogICAgICAgIHVpbnQgcHJpY2UsCiAgICAgICAgYnl0ZXMzMiBuYW1lLAogICAgICAgIGJ5dGVzMzIgZGVzY3JpcHRpb24sCiAgICAgICAgYnl0ZXMzMiB1cmwsCiAgICAgICAgYnl0ZXMzMiBpbWFnZVVSTCwKICAgICAgICB1aW50IGZvclNhbGUsCiAgICAgICAgdWludCBwcmljZVBlckRheSwKICAgICAgICBhZGRyZXNzIG93bmVyCiAgICApIHsKICAgICAgICBieXRlczMyIGtleSA9IGdldEtleSh4LCB5KTsKICAgICAgICBwcmljZSA9IHMuZ2V0VUludChrZWNjYWsyNTYoa2V5LCAicHJpY2UiKSk7CiAgICAgICAgbmFtZSA9IHMuZ2V0Qnl0ZXMzMihrZWNjYWsyNTYoa2V5LCAibmFtZSIpKTsKICAgICAgICBkZXNjcmlwdGlvbiA9IHMuZ2V0Qnl0ZXMzMihrZWNjYWsyNTYoa2V5LCAiZGVzY3JpcHRpb24iKSk7CiAgICAgICAgdXJsID0gcy5nZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJ1cmwiKSk7CiAgICAgICAgaW1hZ2VVUkwgPSBzLmdldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgImltYWdlVVJMIikpOwogICAgICAgIGZvclNhbGUgPSBzLmdldFVJbnQoa2VjY2FrMjU2KGtleSwgImZvclNhbGUiKSk7CiAgICAgICAgcHJpY2VQZXJEYXkgPSBzLmdldFVJbnQoa2VjY2FrMjU2KGtleSwgInByaWNlUGVyRGF5IikpOwogICAgICAgIG93bmVyID0gcy5nZXRBZGQoa2VjY2FrMjU2KGtleSwgIm93bmVyIikpOwogICAgfQoKICAgIC8vIFNldHMgYSBibG9jayB1cCBmb3Igc2FsZQogICAgZnVuY3Rpb24gc2VsbEJsb2NrKHVpbnQgeCwgdWludCB5LCB1aW50IHByaWNlKSBwdWJsaWMgewogICAgICAgIGJ5dGVzMzIga2V5ID0gZ2V0S2V5KHgsIHkpOwogICAgICAgIHVpbnQgYmFzZVByaWNlID0gcy5nZXRVSW50KGtlY2NhazI1NihrZXksICJwcmljZSIpKTsKICAgICAgICByZXF1aXJlKHMuZ2V0QWRkKGtlY2NhazI1NihrZXksICJvd25lciIpKSA9PSBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKHByaWNlIDwgYmFzZVByaWNlICogMik7CiAgICAgICAgcy5zZXRVSW50KGtlY2NhazI1NihrZXksICJmb3JTYWxlIiksIHByaWNlKTsKICAgICAgICBTZXRCbG9ja0ZvclNhbGUoeCwgeSwgcHJpY2UsIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vIFNldHMgYSBibG9jayBub3QgZm9yIHNhbGUKICAgIGZ1bmN0aW9uIGNhbmNlbFNlbGxCbG9jayh1aW50IHgsIHVpbnQgeSkgcHVibGljIHsKICAgICAgICBieXRlczMyIGtleSA9IGdldEtleSh4LCB5KTsKICAgICAgICByZXF1aXJlKHMuZ2V0QWRkKGtlY2NhazI1NihrZXksICJvd25lciIpKSA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBzLnNldFVJbnQoa2VjY2FrMjU2KGtleSwgImZvclNhbGUiKSwgMCk7CiAgICAgICAgVW5zZXRCbG9ja0ZvclNhbGUoeCwgeSwgbXNnLnNlbmRlcik7CiAgICB9CgogICAgLy8gdHJhbnNmZXJzIG93bmVyc2hpcCBvZiBhbiBleGlzdGluZyBibG9jawogICAgZnVuY3Rpb24gYnV5QmxvY2soCiAgICAgICAgdWludCB4LAogICAgICAgIHVpbnQgeSwKICAgICAgICBieXRlczMyIG5hbWUsCiAgICAgICAgYnl0ZXMzMiBkZXNjcmlwdGlvbiwKICAgICAgICBieXRlczMyIHVybCwKICAgICAgICBieXRlczMyIGltYWdlVVJMCiAgICApIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBieXRlczMyIGtleSA9IGdldEtleSh4LCB5KTsKICAgICAgICB1aW50IHByaWNlID0gcy5nZXRVSW50KGtlY2NhazI1NihrZXksICJwcmljZSIpKTsKICAgICAgICB1aW50IGZvclNhbGUgPSBzLmdldFVJbnQoa2VjY2FrMjU2KGtleSwgImZvclNhbGUiKSk7CiAgICAgICAgYWRkcmVzcyBvd25lciA9IHMuZ2V0QWRkKGtlY2NhazI1NihrZXksICJvd25lciIpKTsKICAgICAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoKGZvclNhbGUgPiAwICYmIG1zZy52YWx1ZSA+PSBmb3JTYWxlKSB8fCBtc2cudmFsdWUgPj0gcHJpY2UgKiAyKTsKICAgICAgICB1aW50IGZlZVBlcmNlbnRhZ2UgPSBzLmdldFVJbnQoImJ1eU91dEZlZVBlcmNlbnRhZ2UiKTsKICAgICAgICByZXdhcmRQYXJ0aWVzKHgsIHksIGZlZVBlcmNlbnRhZ2UpOwogICAgICAgIHMuc2V0VUludChrZWNjYWsyNTYoa2V5LCAicHJpY2UiKSwgbXNnLnZhbHVlKTsKICAgICAgICBzLnNldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgIm5hbWUiKSwgbmFtZSk7CiAgICAgICAgcy5zZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJkZXNjcmlwdGlvbiIpLCBkZXNjcmlwdGlvbik7CiAgICAgICAgcy5zZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJ1cmwiKSwgdXJsKTsKICAgICAgICBzLnNldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgImltYWdlVVJMIiksIGltYWdlVVJMKTsKICAgICAgICBzLnNldEFkZChrZWNjYWsyNTYoa2V5LCAib3duZXIiKSwgbXNnLnNlbmRlcik7CiAgICAgICAgcy5zZXRVSW50KGtlY2NhazI1NihrZXksICJmb3JTYWxlIiksIDApOwogICAgICAgIHMuc2V0VUludChrZWNjYWsyNTYoa2V5LCAicHJpY2VQZXJEYXkiKSwgMCk7CiAgICAgICAgZ2l2ZUJvbnVzSWZFeGlzdHMoeCwgeSk7CiAgICAgICAgc3RvcmFnZUFkZHJlc3MudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICBCb3VnaHRCbG9jayh4LCB5LCBtc2cudmFsdWUsIG1zZy5zZW5kZXIsCiAgICAgICAgICAgIG5hbWUsIGRlc2NyaXB0aW9uLCB1cmwsIGltYWdlVVJMKTsKICAgICAgICBTb2xkQmxvY2soeCwgeSwgcHJpY2UsIG1zZy52YWx1ZSwgZmVlUGVyY2VudGFnZSwgb3duZXIpOwogICAgfQoKICAgIC8vIHVwZGF0ZSBkZXRhaWxzIGZvciBhbiBleGlzdGluZyBibG9jawogICAgZnVuY3Rpb24gdXBkYXRlQmxvY2soCiAgICAgICAgdWludCB4LAogICAgICAgIHVpbnQgeSwKICAgICAgICBieXRlczMyIG5hbWUsCiAgICAgICAgYnl0ZXMzMiBkZXNjcmlwdGlvbiwKICAgICAgICBieXRlczMyIHVybCwKICAgICAgICBieXRlczMyIGltYWdlVVJMCiAgICApICBwdWJsaWMgewogICAgICAgIGJ5dGVzMzIga2V5ID0gZ2V0S2V5KHgsIHkpOwogICAgICAgIGFkZHJlc3Mgb3duZXIgPSBzLmdldEFkZChrZWNjYWsyNTYoa2V5LCAib3duZXIiKSk7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBzLnNldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgIm5hbWUiKSwgbmFtZSk7CiAgICAgICAgcy5zZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJkZXNjcmlwdGlvbiIpLCBkZXNjcmlwdGlvbik7CiAgICAgICAgcy5zZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJ1cmwiKSwgdXJsKTsKICAgICAgICBzLnNldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgImltYWdlVVJMIiksIGltYWdlVVJMKTsKICAgICAgICBVcGRhdGVkQmxvY2soeCwgeSwgbmFtZSwgZGVzY3JpcHRpb24sIHVybCwgaW1hZ2VVUkwsIG1zZy5zZW5kZXIpOwogICAgfQogICAgCiAgICAvLyBBZGQgYSBib251cyB0byBhIGJsb2NrLiBUaGF0IGJvbnVzIHdpbGwgYmUgYXdhcmRlZCB0byB0aGUgbmV4dCBidXllci4KICAgIC8vIE5vdGUsIHdlIGFyZSBub3QgZW1pdHRpbmcgYW4gZXZlbnQgdG8gYXZvaWQgY2hlYXRpbmcuCiAgICBmdW5jdGlvbiBhZGRCb251c1RvQmxvY2soCiAgICAgICAgdWludCB4LAogICAgICAgIHVpbnQgeSwKICAgICAgICB1aW50IGJvbnVzCiAgICApIHB1YmxpYyBvbmx5UHJpbWFyeSB7CiAgICAgICAgYnl0ZXMzMiBrZXkgPSBnZXRLZXkoeCwgeSk7CiAgICAgICAgdWludCBib251c0JhbGFuY2UgPSBzLmdldFVJbnQoa2VjY2FrMjU2KGJvbnVzQWRkcmVzcywgImJhbGFuY2UiKSk7CiAgICAgICAgcmVxdWlyZShib251c0JhbGFuY2UgPj0gYm9udXMpOwogICAgICAgIHMuc2V0VUludChrZWNjYWsyNTYoa2V5LCAiYm9udXMiKSwgYm9udXMpOwogICAgfQoKfQoKLyoKICAgIE1haW4gQmxvY2tsb3JkIGNvbnRyYWN0LiBJdCBleHBvc2VzIHNvbWUgY29tbW9kaXR5IGZ1bmN0aW9ucyBhbmQgZnVuY3Rpb25zIGZyb20gaXRzIHN1YmNvbnRyYWN0cy4KKi8KCmNvbnRyYWN0IEJMTWFpbiBpcyBCTEJsb2NrcyB7CgogICAgZXZlbnQgQ2hhbmdlZEluaXRpYWxQcmljZSh1aW50IHByaWNlKTsKICAgIGV2ZW50IENoYW5nZWRGZWVQZXJjZW50YWdlKHVpbnQgZmVlKTsKCiAgICAvLyBwcm92aWRlcyB0aGUgdG90YWwgbnVtYmVyIG9mIHB1cmNoYXNlZCBibG9ja3MKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCBjb3VudCkgewogICAgICAgIGNvdW50ID0gcy5nZXRVSW50KCJibG9ja0NvdW50Iik7CiAgICAgICAgcmV0dXJuIGNvdW50OwogICAgfQoKICAgIC8vIGFsbG93cyB0byBjaGFuZ2UgdGhlIHByaWNlIG9mIGFuIGVtcHR5IGJsb2NrCiAgICBmdW5jdGlvbiBzZXRJbml0aWFsUHJpY2UodWludCBwcmljZSkgcHVibGljIG9ubHlQcmltYXJ5IHsKICAgICAgICBzLnNldFVJbnQoImluaXRpYWxQcmljZSIsIHByaWNlKTsKICAgICAgICBDaGFuZ2VkSW5pdGlhbFByaWNlKHByaWNlKTsKICAgIH0KCiAgICAvLyBhbGxvd3MgdG8gY2hhbmdlIHRoZSBwbGF0Zm9ybSBmZWUgcGVyY2VudGFnZQogICAgZnVuY3Rpb24gc2V0RmVlUGVyY2VudGFnZSh1aW50IGZlZVBlcmNlbnRhZ2UpIHB1YmxpYyBvbmx5UHJpbWFyeSB7CiAgICAgICAgcy5zZXRVSW50KCJidXlPdXRGZWVQZXJjZW50YWdlIiwgZmVlUGVyY2VudGFnZSk7CiAgICAgICAgQ2hhbmdlZEZlZVBlcmNlbnRhZ2UoZmVlUGVyY2VudGFnZSk7CiAgICB9CgogICAgLy8gcHJvdmlkZXMgdGhlIHN0YXJ0aW5nIHByaWNlIGZvciBhbiBlbXB0eSBibG9jawogICAgZnVuY3Rpb24gZ2V0SW5pdGlhbFByaWNlKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBzLmdldFVJbnQoImluaXRpYWxQcmljZSIpOwogICAgfQoKICAgIC8vIHByb3ZpZGVzIHRoZSBwcmljZSBvZiBhbiBlbXB0eSBibG9jawogICAgZnVuY3Rpb24gZ2V0RmVlUGVyY2VudGFnZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcy5nZXRVSW50KCJidXlPdXRGZWVQZXJjZW50YWdlIik7CiAgICB9Cn0='.
	

]
