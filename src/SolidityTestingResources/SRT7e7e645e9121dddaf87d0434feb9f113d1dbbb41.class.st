Class {
	#name : #SRT7e7e645e9121dddaf87d0434feb9f113d1dbbb41,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7e7e645e9121dddaf87d0434feb9f113d1dbbb41 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgovKgoqIFRlYW0gSlVTVCBwcmVzZW50cy4uCiogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KgoqICBfX19fICAgX19fICBfX19fICBfX19fICAgICAgICAgICAgICoKKiAgfCAgXyBcIC8gXyBcLyBfX198fCBfXyApICAgICAgICAgICAqCiogIHwgfF8pIHwgfCB8IFxfX18gXHwgIF8gXCAgICAgICAgICAgKgoqICB8ICBfXy98IHxffCB8X19fKSB8IHxfKSB8ICAgICAgICAgICoKKiAgfF98ICAgIFxfX18vfF9fX18vfF9fX18vICAgICAgICAgICAqCiogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgoqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSoKKgoqIFBST09GIE9GIFNUUk9ORyBCT0RZCiogLT4gV2hhdD8KKiAgVGhlIGxhc3QgRXRoZXJldW0gcHlyYW1pZGUgd2hpY2ggZWFybnMgeW91IEVUSCEhIQoqIFt4XSBTdHJvbmcgRGl2aWRlbmRzOiAyMCUgb2YgZXZlcnkgYnV5IGFuZCAyNSUgc2VsbCB3aWxsIGJlIHJld2FyZGVkIHRvIHRva2VuIGhvbGRlcnMuIERvbid0IHNlbGwsIGRvbid0IGJlIHdlZWsuCiogW3hdIFN0cm9uZyBNYXN0ZXJub2RlczogSG9sZGluZyA1MCBQT1NCIFRva2VucyBhbGxvdyB5b3UgdG8gZ2VuZXJhdGUgYSBNYXN0ZXJub2RlIGxpbmssIE1hc3Rlcm5vZGUgbGlua3MgYXJlIHVzZWQgYXMgdW5pcXVlIGVudHJ5IHBvaW50cyB0byB0aGUgY29udHJhY3QhCiogW3hdIFN0cm9uZyBNYXN0ZXJub2RlczogQWxsIHBsYXllcnMgd2hvIGVudGVyIHRoZSBjb250cmFjdCB0aHJvdWdoIHlvdXIgTWFzdGVybm9kZSBoYXZlIDM1JSBvZiB0aGVpciAyMCUgZGl2aWRlbmRzIGZlZSByZXJvdXRlZCBmcm9tIHRoZSBtYXN0ZXItbm9kZSwgdG8gdGhlIG5vZGUtbWFzdGVyIQoqCiogVGhlIGVudGlyZSBjcnlwdG9jdXJyZW5jeSBjb21tdW5pdHkgc3VmZmVycyBmcm9tIG9uZSBhaWxtZW50LCB0aGUgYWlsbWVudCBvZiBkaXNsb3lhbHR5LiBJdCdzIHRoZSBwcm9ibGVtIHRoYXQgaXMgZWF0aW5nIGF3YXkgYXQgb3VyIHZlcnkgc3Vydml2YWwuCiogVGhpcyBjb2luIHNvbHZlcyB0aGF0IHByb2JsZW0uIElmIHlvdSBoYXZlIHdlYWsgYm9keSwgdGhpcyBjb2luIGlzIG5vdCBmb3IgeW91LiBJZiB5b3UgY2FuIGdvIHRoZSBkaXN0YW5jZSBjcmFuayB1cCB0aGUgbWluZXJzIGFuZCBnZXQgdG8gd29yayEKKi8KCmNvbnRyYWN0IFN0cm9uZ0hvbGQgewogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgID0gICAgICAgICAgICBNT0RJRklFUlMgICAgICAgICAgICA9CiAgICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogICAgLy8gb25seSBwZW9wbGUgd2l0aCB0b2tlbnMKICAgIG1vZGlmaWVyIG9ubHlCYWdob2xkZXJzKCkgewogICAgICAgIHJlcXVpcmUobXlUb2tlbnMoKSA+IDApOwogICAgICAgIF87CiAgICB9CgogICAgLy8gb25seSBwZW9wbGUgd2l0aCBwcm9maXRzCiAgICBtb2RpZmllciBvbmx5U3Ryb25naGFuZHMoKSB7CiAgICAgICAgcmVxdWlyZShteURpdmlkZW5kcyh0cnVlKSA+IDApOwogICAgICAgIF87CiAgICB9CgogICAgLy8gYWRtaW5pc3RyYXRvcnMgY2FuOgogICAgLy8gLT4gY2hhbmdlIHRoZSBuYW1lIG9mIHRoZSBjb250cmFjdAogICAgLy8gLT4gY2hhbmdlIHRoZSBuYW1lIG9mIHRoZSB0b2tlbgogICAgLy8gLT4gY2hhbmdlIHRoZSBQb1MgZGlmZmljdWx0eSAoSG93IG1hbnkgdG9rZW5zIGl0IGNvc3RzIHRvIGhvbGQgYSBtYXN0ZXJub2RlLCBpbiBjYXNlIGl0IGdldHMgY3JhenkgaGlnaCBsYXRlcikKICAgIC8vIHRoZXkgQ0FOTk9UOgogICAgLy8gLT4gdGFrZSBmdW5kcwogICAgLy8gLT4gZGlzYWJsZSB3aXRoZHJhd2FscwogICAgLy8gLT4ga2lsbCB0aGUgY29udHJhY3QKICAgIC8vIC0+IGNoYW5nZSB0aGUgcHJpY2Ugb2YgdG9rZW5zCiAgICBtb2RpZmllciBvbmx5QWRtaW5pc3RyYXRvcigpewogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgcmVxdWlyZShhZG1pbmlzdHJhdG9yc1trZWNjYWsyNTYoX2N1c3RvbWVyQWRkcmVzcyldKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvLyBlbnN1cmVzIHRoYXQgdGhlIGZpcnN0IHRva2VucyBpbiB0aGUgY29udHJhY3Qgd2lsbCBiZSBlcXVhbGx5IGRpc3RyaWJ1dGVkCiAgICAvLyBtZWFuaW5nLCBubyBkaXZpbmUgZHVtcCB3aWxsIGJlIGV2ZXIgcG9zc2libGUKICAgIC8vIHJlc3VsdDogaGVhbHRoeSBsb25nZXZpdHkuCiAgICBtb2RpZmllciBhbnRpRWFybHlXaGFsZSh1aW50MjU2IF9hbW91bnRPZkV0aGVyZXVtKXsKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwoKICAgICAgICAvLyBhcmUgd2Ugc3RpbGwgaW4gdGhlIHZ1bG5lcmFibGUgcGhhc2U/CiAgICAgICAgLy8gaWYgc28sIGVuYWN0IGFudGkgZWFybHkgd2hhbGUgcHJvdG9jb2wKICAgICAgICBpZiggb25seUFtYmFzc2Fkb3JzICYmICgodG90YWxFdGhlcmV1bUJhbGFuY2UoKSAtIF9hbW91bnRPZkV0aGVyZXVtKSA8PSBhbWJhc3NhZG9yUXVvdGFfICkpewogICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgLy8gaXMgdGhlIGN1c3RvbWVyIGluIHRoZSBhbWJhc3NhZG9yIGxpc3Q/CiAgICAgICAgICAgICAgICBhbWJhc3NhZG9yc19bX2N1c3RvbWVyQWRkcmVzc10gPT0gdHJ1ZSAmJgoKICAgICAgICAgICAgICAgIC8vIGRvZXMgdGhlIGN1c3RvbWVyIHB1cmNoYXNlIGV4Y2VlZCB0aGUgbWF4IGFtYmFzc2Fkb3IgcXVvdGE/CiAgICAgICAgICAgICAgICAoYW1iYXNzYWRvckFjY3VtdWxhdGVkUXVvdGFfW19jdXN0b21lckFkZHJlc3NdICsgX2Ftb3VudE9mRXRoZXJldW0pIDw9IGFtYmFzc2Fkb3JNYXhQdXJjaGFzZV8KCiAgICAgICAgICAgICk7CgogICAgICAgICAgICAvLyB1cGRhdGVkIHRoZSBhY2N1bXVsYXRlZCBxdW90YQogICAgICAgICAgICBhbWJhc3NhZG9yQWNjdW11bGF0ZWRRdW90YV9bX2N1c3RvbWVyQWRkcmVzc10gPSBTYWZlTWF0aC5hZGQoYW1iYXNzYWRvckFjY3VtdWxhdGVkUXVvdGFfW19jdXN0b21lckFkZHJlc3NdLCBfYW1vdW50T2ZFdGhlcmV1bSk7CgogICAgICAgICAgICAvLyBleGVjdXRlCiAgICAgICAgICAgIF87CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gaW4gY2FzZSB0aGUgZXRoZXIgY291bnQgZHJvcHMgbG93LCB0aGUgYW1iYXNzYWRvciBwaGFzZSB3b24ndCByZWluaXRpYXRlCiAgICAgICAgICAgIG9ubHlBbWJhc3NhZG9ycyA9IGZhbHNlOwogICAgICAgICAgICBfOwogICAgICAgIH0KCiAgICB9CgoKICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICA9ICAgICAgICAgICAgRVZFTlRTICAgICAgICAgICAgPQogICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAgIGV2ZW50IG9uVG9rZW5QdXJjaGFzZSgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgY3VzdG9tZXJBZGRyZXNzLAogICAgICAgIHVpbnQyNTYgaW5jb21pbmdFdGhlcmV1bSwKICAgICAgICB1aW50MjU2IHRva2Vuc01pbnRlZCwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgcmVmZXJyZWRCeQogICAgKTsKCiAgICBldmVudCBvblRva2VuU2VsbCgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgY3VzdG9tZXJBZGRyZXNzLAogICAgICAgIHVpbnQyNTYgdG9rZW5zQnVybmVkLAogICAgICAgIHVpbnQyNTYgZXRoZXJldW1FYXJuZWQKICAgICk7CgogICAgZXZlbnQgb25SZWludmVzdG1lbnQoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGN1c3RvbWVyQWRkcmVzcywKICAgICAgICB1aW50MjU2IGV0aGVyZXVtUmVpbnZlc3RlZCwKICAgICAgICB1aW50MjU2IHRva2Vuc01pbnRlZAogICAgKTsKCiAgICBldmVudCBvbldpdGhkcmF3KAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBjdXN0b21lckFkZHJlc3MsCiAgICAgICAgdWludDI1NiBldGhlcmV1bVdpdGhkcmF3bgogICAgKTsKCiAgICAvLyBFUkMyMAogICAgZXZlbnQgVHJhbnNmZXIoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGZyb20sCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHRvLAogICAgICAgIHVpbnQyNTYgdG9rZW5zCiAgICApOwoKCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgID0gICAgICAgICAgICBDT05GSUdVUkFCTEVTICAgICAgICAgICAgPQogICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiUE9TdHJvbmdCb2R5IjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlBTQiI7CiAgICB1aW50OCBjb25zdGFudCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQ4IGNvbnN0YW50IGludGVybmFsIGVudHJ5RmVlXyA9IDIwOyAvLyAyMCUgdG8gZW50ZXIgdGhlIHN0cm9uZyBib2R5IGNvaW5zCiAgICB1aW50OCBjb25zdGFudCBpbnRlcm5hbCB0cmFuc2ZlckZlZV8gPSAxMDsgLy8gMTAlIHRyYW5zZmVyIGZlZQogICAgdWludDggY29uc3RhbnQgaW50ZXJuYWwgcmVmZmVyYWxGZWVfID0gMzU7IC8vIDM1JSBmcm9tIGVudGVyIGZlZSBkaXZzIG9yIDclIGZvciBlYWNoIGludml0ZSwgZ3JlYXQgZm9yIGludml0aW5nIHN0cm9uZyBib2RpZXMKICAgIHVpbnQ4IGNvbnN0YW50IGludGVybmFsIGV4aXRGZWVfID0gMjU7IC8vIDI1JSBmb3Igc2VsbGluZywgd2VhayBib2RpZXMgb3V0CiAgICB1aW50MjU2IGNvbnN0YW50IGludGVybmFsIHRva2VuUHJpY2VJbml0aWFsXyA9IDAuMDAwMDAwMSBldGhlcjsKICAgIHVpbnQyNTYgY29uc3RhbnQgaW50ZXJuYWwgdG9rZW5QcmljZUluY3JlbWVudGFsXyA9IDAuMDAwMDAwMDEgZXRoZXI7CiAgICB1aW50MjU2IGNvbnN0YW50IGludGVybmFsIG1hZ25pdHVkZSA9IDIqKjY0OwoKICAgIC8vIHByb29mIG9mIHN0YWtlIChkZWZhdWx0cyBhdCA1MCB0b2tlbnMpCiAgICB1aW50MjU2IHB1YmxpYyBzdGFraW5nUmVxdWlyZW1lbnQgPSA1MGUxODsKCiAgICAvLyBhbWJhc3NhZG9yIHByb2dyYW0KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBpbnRlcm5hbCBhbWJhc3NhZG9yc187CiAgICB1aW50MjU2IGNvbnN0YW50IGludGVybmFsIGFtYmFzc2Fkb3JNYXhQdXJjaGFzZV8gPSAxIGV0aGVyOwogICAgdWludDI1NiBjb25zdGFudCBpbnRlcm5hbCBhbWJhc3NhZG9yUXVvdGFfID0gMjAgZXRoZXI7IC8vIE9jZWFuJ3MgLVRoaXJ0ZWVuLSBUd2VudHlGaXZlIChCaWcgU3Ryb25nIEJvZGllcykKCgoKICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgPSAgICAgICAgICAgIERBVEFTRVRTICAgICAgICAgICAgPQogICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogICAgLy8gYW1vdW50IG9mIHNoYXJlcyBmb3IgZWFjaCBhZGRyZXNzIChzY2FsZWQgbnVtYmVyKQogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIHRva2VuQmFsYW5jZUxlZGdlcl87CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgaW50ZXJuYWwgcmVmZXJyYWxCYWxhbmNlXzsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBpbnQyNTYpIGludGVybmFsIHBheW91dHNUb187CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgaW50ZXJuYWwgYW1iYXNzYWRvckFjY3VtdWxhdGVkUXVvdGFfOwogICAgdWludDI1NiBpbnRlcm5hbCB0b2tlblN1cHBseV8gPSAwOwogICAgdWludDI1NiBpbnRlcm5hbCBwcm9maXRQZXJTaGFyZV87CgogICAgLy8gYWRtaW5pc3RyYXRvciBsaXN0IChzZWUgYWJvdmUgb24gd2hhdCB0aGV5IGNhbiBkbykKICAgIG1hcHBpbmcoYnl0ZXMzMiA9PiBib29sKSBwdWJsaWMgYWRtaW5pc3RyYXRvcnM7CgogICAgLy8gd2hlbiB0aGlzIGlzIHNldCB0byB0cnVlLCBvbmx5IGFtYmFzc2Fkb3JzIGNhbiBwdXJjaGFzZSB0b2tlbnMgKHRoaXMgcHJldmVudHMgYSB3aGFsZSBwcmVtaW5lLCBpdCBlbnN1cmVzIGEgZmFpcmx5IGRpc3RyaWJ1dGVkIHVwcGVyIHB5cmFtaWQpCiAgICBib29sIHB1YmxpYyBvbmx5QW1iYXNzYWRvcnMgPSB0cnVlOwoKCgogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgID0gICAgICAgICAgICBQVUJMSUMgRlVOQ1RJT05TICAgICAgICAgICAgPQogICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAgIC8qCiAgICAqIC0tIEFQUExJQ0FUSU9OIEVOVFJZIFBPSU5UUyAtLQogICAgKi8KICAgIGZ1bmN0aW9uIFN0cm9uZ0hvbGQoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIC8vIGFkZCBhZG1pbmlzdHJhdG9ycyBoZXJlCiAgICAgICAgYWRtaW5pc3RyYXRvcnNbMHhmYWI5NWY2MmRlYTE0N2Y5YWMyNDY5YzM2ODYxMWM3YmZjMzdlNmM5MjY4MGExNThkMWM4YzM5MDI1M2JhOGVlXSA9IHRydWU7CgoKICAgIH0KCgogICAgLyoqCiAgICAgKiBDb252ZXJ0cyBhbGwgaW5jb21pbmcgZXRoZXJldW0gdG8gdG9rZW5zIGZvciB0aGUgY2FsbGVyLCBhbmQgcGFzc2VzIGRvd24gdGhlIHJlZmVycmFsIGFkZHkgKGlmIGFueSkKICAgICAqLwogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgX3JlZmVycmVkQnkpCiAgICAgICAgcHVibGljCiAgICAgICAgcGF5YWJsZQogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICBwdXJjaGFzZVRva2Vucyhtc2cudmFsdWUsIF9yZWZlcnJlZEJ5KTsKICAgIH0KCiAgICAvKioKICAgICAqIEZhbGxiYWNrIGZ1bmN0aW9uIHRvIGhhbmRsZSBldGhlcmV1bSB0aGF0IHdhcyBzZW5kIHN0cmFpZ2h0IHRvIHRoZSBjb250cmFjdAogICAgICogVW5mb3J0dW5hdGVseSB3ZSBjYW5ub3QgdXNlIGEgcmVmZXJyYWwgYWRkcmVzcyB0aGlzIHdheS4KICAgICAqLwogICAgZnVuY3Rpb24oKQogICAgICAgIHBheWFibGUKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICBwdXJjaGFzZVRva2Vucyhtc2cudmFsdWUsIDB4MCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZXJ0cyBhbGwgb2YgY2FsbGVyJ3MgZGl2aWRlbmRzIHRvIHRva2Vucy4KICAgICovCiAgICBmdW5jdGlvbiByZWludmVzdCgpCiAgICAgICAgb25seVN0cm9uZ2hhbmRzKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICAvLyBmZXRjaCBkaXZpZGVuZHMKICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBteURpdmlkZW5kcyhmYWxzZSk7IC8vIHJldHJpZXZlIHJlZi4gYm9udXMgbGF0ZXIgaW4gdGhlIGNvZGUKCiAgICAgICAgLy8gcGF5IG91dCB0aGUgZGl2aWRlbmRzIHZpcnR1YWxseQogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgcGF5b3V0c1RvX1tfY3VzdG9tZXJBZGRyZXNzXSArPSAgKGludDI1NikgKF9kaXZpZGVuZHMgKiBtYWduaXR1ZGUpOwoKICAgICAgICAvLyByZXRyaWV2ZSByZWYuIGJvbnVzCiAgICAgICAgX2RpdmlkZW5kcyArPSByZWZlcnJhbEJhbGFuY2VfW19jdXN0b21lckFkZHJlc3NdOwogICAgICAgIHJlZmVycmFsQmFsYW5jZV9bX2N1c3RvbWVyQWRkcmVzc10gPSAwOwoKICAgICAgICAvLyBkaXNwYXRjaCBhIGJ1eSBvcmRlciB3aXRoIHRoZSB2aXJ0dWFsaXplZCAid2l0aGRyYXduIGRpdmlkZW5kcyIKICAgICAgICB1aW50MjU2IF90b2tlbnMgPSBwdXJjaGFzZVRva2VucyhfZGl2aWRlbmRzLCAweDApOwoKICAgICAgICAvLyBmaXJlIGV2ZW50CiAgICAgICAgb25SZWludmVzdG1lbnQoX2N1c3RvbWVyQWRkcmVzcywgX2RpdmlkZW5kcywgX3Rva2Vucyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBbGlhcyBvZiBzZWxsKCkgYW5kIHdpdGhkcmF3KCkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGV4aXQoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIC8vIGdldCB0b2tlbiBjb3VudCBmb3IgY2FsbGVyICYgc2VsbCB0aGVtIGFsbAogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludDI1NiBfdG9rZW5zID0gdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXTsKICAgICAgICBpZihfdG9rZW5zID4gMCkgc2VsbChfdG9rZW5zKTsKCiAgICAgICAgLy8gbGFtYm8gZGVsaXZlcnkgc2VydmljZQogICAgICAgIHdpdGhkcmF3KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaXRoZHJhd3MgYWxsIG9mIHRoZSBjYWxsZXJzIGVhcm5pbmdzLgogICAgICovCiAgICBmdW5jdGlvbiB3aXRoZHJhdygpCiAgICAgICAgb25seVN0cm9uZ2hhbmRzKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICAvLyBzZXR1cCBkYXRhCiAgICAgICAgYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBteURpdmlkZW5kcyhmYWxzZSk7IC8vIGdldCByZWYuIGJvbnVzIGxhdGVyIGluIHRoZSBjb2RlCgogICAgICAgIC8vIHVwZGF0ZSBkaXZpZGVuZCB0cmFja2VyCiAgICAgICAgcGF5b3V0c1RvX1tfY3VzdG9tZXJBZGRyZXNzXSArPSAgKGludDI1NikgKF9kaXZpZGVuZHMgKiBtYWduaXR1ZGUpOwoKICAgICAgICAvLyBhZGQgcmVmLiBib251cwogICAgICAgIF9kaXZpZGVuZHMgKz0gcmVmZXJyYWxCYWxhbmNlX1tfY3VzdG9tZXJBZGRyZXNzXTsKICAgICAgICByZWZlcnJhbEJhbGFuY2VfW19jdXN0b21lckFkZHJlc3NdID0gMDsKCiAgICAgICAgLy8gbGFtYm8gZGVsaXZlcnkgc2VydmljZQogICAgICAgIF9jdXN0b21lckFkZHJlc3MudHJhbnNmZXIoX2RpdmlkZW5kcyk7CgogICAgICAgIC8vIGZpcmUgZXZlbnQKICAgICAgICBvbldpdGhkcmF3KF9jdXN0b21lckFkZHJlc3MsIF9kaXZpZGVuZHMpOwogICAgfQoKICAgIC8qKgogICAgICogTGlxdWlmaWVzIHRva2VucyB0byBldGhlcmV1bS4KICAgICAqLwogICAgZnVuY3Rpb24gc2VsbCh1aW50MjU2IF9hbW91bnRPZlRva2VucykKICAgICAgICBvbmx5QmFnaG9sZGVycygpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgLy8gc2V0dXAgZGF0YQogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgLy8gcnVzc2lhbiBoYWNrZXJzIEJURk8KICAgICAgICByZXF1aXJlKF9hbW91bnRPZlRva2VucyA8PSB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdKTsKICAgICAgICB1aW50MjU2IF90b2tlbnMgPSBfYW1vdW50T2ZUb2tlbnM7CiAgICAgICAgdWludDI1NiBfZXRoZXJldW0gPSB0b2tlbnNUb0V0aGVyZXVtXyhfdG9rZW5zKTsKICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKF9ldGhlcmV1bSwgZXhpdEZlZV8pLCAxMDApOwogICAgICAgIHVpbnQyNTYgX3RheGVkRXRoZXJldW0gPSBTYWZlTWF0aC5zdWIoX2V0aGVyZXVtLCBfZGl2aWRlbmRzKTsKCiAgICAgICAgLy8gYnVybiB0aGUgc29sZCB0b2tlbnMKICAgICAgICB0b2tlblN1cHBseV8gPSBTYWZlTWF0aC5zdWIodG9rZW5TdXBwbHlfLCBfdG9rZW5zKTsKICAgICAgICB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdID0gU2FmZU1hdGguc3ViKHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc10sIF90b2tlbnMpOwoKICAgICAgICAvLyB1cGRhdGUgZGl2aWRlbmRzIHRyYWNrZXIKICAgICAgICBpbnQyNTYgX3VwZGF0ZWRQYXlvdXRzID0gKGludDI1NikgKHByb2ZpdFBlclNoYXJlXyAqIF90b2tlbnMgKyAoX3RheGVkRXRoZXJldW0gKiBtYWduaXR1ZGUpKTsKICAgICAgICBwYXlvdXRzVG9fW19jdXN0b21lckFkZHJlc3NdIC09IF91cGRhdGVkUGF5b3V0czsKCiAgICAgICAgLy8gZGl2aWRpbmcgYnkgemVybyBpcyBhIGJhZCBpZGVhCiAgICAgICAgaWYgKHRva2VuU3VwcGx5XyA+IDApIHsKICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBhbW91bnQgb2YgZGl2aWRlbmRzIHBlciB0b2tlbgogICAgICAgICAgICBwcm9maXRQZXJTaGFyZV8gPSBTYWZlTWF0aC5hZGQocHJvZml0UGVyU2hhcmVfLCAoX2RpdmlkZW5kcyAqIG1hZ25pdHVkZSkgLyB0b2tlblN1cHBseV8pOwogICAgICAgIH0KCiAgICAgICAgLy8gZmlyZSBldmVudAogICAgICAgIG9uVG9rZW5TZWxsKF9jdXN0b21lckFkZHJlc3MsIF90b2tlbnMsIF90YXhlZEV0aGVyZXVtKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBUcmFuc2ZlciB0b2tlbnMgZnJvbSB0aGUgY2FsbGVyIHRvIGEgbmV3IGhvbGRlci4KICAgICAqIFJlbWVtYmVyLCB0aGVyZSdzIGEgMTAlIGZlZSBoZXJlIGFzIHdlbGwuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvQWRkcmVzcywgdWludDI1NiBfYW1vdW50T2ZUb2tlbnMpCiAgICAgICAgb25seUJhZ2hvbGRlcnMoKQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMoYm9vbCkKICAgIHsKICAgICAgICAvLyBzZXR1cAogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CgogICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBoYXZlIHRoZSByZXF1ZXN0ZWQgdG9rZW5zCiAgICAgICAgLy8gYWxzbyBkaXNhYmxlcyB0cmFuc2ZlcnMgdW50aWwgYW1iYXNzYWRvciBwaGFzZSBpcyBvdmVyCiAgICAgICAgLy8gKCB3ZSBkb250IHdhbnQgd2hhbGUgcHJlbWluZXMgKQogICAgICAgIHJlcXVpcmUoIW9ubHlBbWJhc3NhZG9ycyAmJiBfYW1vdW50T2ZUb2tlbnMgPD0gdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSk7CgogICAgICAgIC8vIHdpdGhkcmF3IGFsbCBvdXRzdGFuZGluZyBkaXZpZGVuZHMgZmlyc3QKICAgICAgICBpZihteURpdmlkZW5kcyh0cnVlKSA+IDApIHdpdGhkcmF3KCk7CgogICAgICAgIC8vIGxpcXVpZnkgMTAlIG9mIHRoZSB0b2tlbnMgdGhhdCBhcmUgdHJhbnNmZXJlZAogICAgICAgIC8vIHRoZXNlIGFyZSBkaXNwZXJzZWQgdG8gc2hhcmVob2xkZXJzCiAgICAgICAgdWludDI1NiBfdG9rZW5GZWUgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKF9hbW91bnRPZlRva2VucywgdHJhbnNmZXJGZWVfKSwgMTAwKTsKICAgICAgICB1aW50MjU2IF90YXhlZFRva2VucyA9IFNhZmVNYXRoLnN1YihfYW1vdW50T2ZUb2tlbnMsIF90b2tlbkZlZSk7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gdG9rZW5zVG9FdGhlcmV1bV8oX3Rva2VuRmVlKTsKCiAgICAgICAgLy8gYnVybiB0aGUgZmVlIHRva2VucwogICAgICAgIHRva2VuU3VwcGx5XyA9IFNhZmVNYXRoLnN1Yih0b2tlblN1cHBseV8sIF90b2tlbkZlZSk7CgogICAgICAgIC8vIGV4Y2hhbmdlIHRva2VucwogICAgICAgIHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc10gPSBTYWZlTWF0aC5zdWIodG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSwgX2Ftb3VudE9mVG9rZW5zKTsKICAgICAgICB0b2tlbkJhbGFuY2VMZWRnZXJfW190b0FkZHJlc3NdID0gU2FmZU1hdGguYWRkKHRva2VuQmFsYW5jZUxlZGdlcl9bX3RvQWRkcmVzc10sIF90YXhlZFRva2Vucyk7CgogICAgICAgIC8vIHVwZGF0ZSBkaXZpZGVuZCB0cmFja2VycwogICAgICAgIHBheW91dHNUb19bX2N1c3RvbWVyQWRkcmVzc10gLT0gKGludDI1NikgKHByb2ZpdFBlclNoYXJlXyAqIF9hbW91bnRPZlRva2Vucyk7CiAgICAgICAgcGF5b3V0c1RvX1tfdG9BZGRyZXNzXSArPSAoaW50MjU2KSAocHJvZml0UGVyU2hhcmVfICogX3RheGVkVG9rZW5zKTsKCiAgICAgICAgLy8gZGlzcGVyc2UgZGl2aWRlbmRzIGFtb25nIGhvbGRlcnMKICAgICAgICBwcm9maXRQZXJTaGFyZV8gPSBTYWZlTWF0aC5hZGQocHJvZml0UGVyU2hhcmVfLCAoX2RpdmlkZW5kcyAqIG1hZ25pdHVkZSkgLyB0b2tlblN1cHBseV8pOwoKICAgICAgICAvLyBmaXJlIGV2ZW50CiAgICAgICAgVHJhbnNmZXIoX2N1c3RvbWVyQWRkcmVzcywgX3RvQWRkcmVzcywgX3RheGVkVG9rZW5zKTsKCiAgICAgICAgLy8gRVJDMjAKICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICB9CgogICAgLyotLS0tLS0tLS0tICBBRE1JTklTVFJBVE9SIE9OTFkgRlVOQ1RJT05TICAtLS0tLS0tLS0tKi8KICAgIC8qKgogICAgICogSW4gY2FzZSB0aGUgYW1hc3NhZG9yIHF1b3RhIGlzIG5vdCBtZXQsIHRoZSBhZG1pbmlzdHJhdG9yIGNhbiBtYW51YWxseSBkaXNhYmxlIHRoZSBhbWJhc3NhZG9yIHBoYXNlLgogICAgICovCiAgICBmdW5jdGlvbiBkaXNhYmxlSW5pdGlhbFN0YWdlKCkKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgb25seUFtYmFzc2Fkb3JzID0gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbiBjYXNlIG9uZSBvZiB1cyBkaWVzLCB3ZSBuZWVkIHRvIHJlcGxhY2Ugb3Vyc2VsdmVzLgogICAgICovCiAgICBmdW5jdGlvbiBzZXRBZG1pbmlzdHJhdG9yKGJ5dGVzMzIgX2lkZW50aWZpZXIsIGJvb2wgX3N0YXR1cykKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgYWRtaW5pc3RyYXRvcnNbX2lkZW50aWZpZXJdID0gX3N0YXR1czsKICAgIH0KCiAgICAvKioKICAgICAqIFByZWNhdXRpb25hcnkgbWVhc3VyZXMgaW4gY2FzZSB3ZSBuZWVkIHRvIGFkanVzdCB0aGUgbWFzdGVybm9kZSByYXRlLgogICAgICovCiAgICBmdW5jdGlvbiBzZXRTdGFraW5nUmVxdWlyZW1lbnQodWludDI1NiBfYW1vdW50T2ZUb2tlbnMpCiAgICAgICAgb25seUFkbWluaXN0cmF0b3IoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIHN0YWtpbmdSZXF1aXJlbWVudCA9IF9hbW91bnRPZlRva2VuczsKICAgIH0KCiAgICAvKioKICAgICAqIElmIHdlIHdhbnQgdG8gcmVicmFuZCwgd2UgY2FuLgogICAgICovCiAgICBmdW5jdGlvbiBzZXROYW1lKHN0cmluZyBfbmFtZSkKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgbmFtZSA9IF9uYW1lOwogICAgfQoKICAgIC8qKgogICAgICogSWYgd2Ugd2FudCB0byByZWJyYW5kLCB3ZSBjYW4uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFN5bWJvbChzdHJpbmcgX3N5bWJvbCkKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgIH0KCgogICAgLyotLS0tLS0tLS0tICBIRUxQRVJTIEFORCBDQUxDVUxBVE9SUyAgLS0tLS0tLS0tLSovCiAgICAvKioKICAgICAqIE1ldGhvZCB0byB2aWV3IHRoZSBjdXJyZW50IEV0aGVyZXVtIHN0b3JlZCBpbiB0aGUgY29udHJhY3QKICAgICAqIEV4YW1wbGU6IHRvdGFsRXRoZXJldW1CYWxhbmNlKCkKICAgICAqLwogICAgZnVuY3Rpb24gdG90YWxFdGhlcmV1bUJhbGFuY2UoKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSB0b3RhbCB0b2tlbiBzdXBwbHkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHJldHVybiB0b2tlblN1cHBseV87CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXRyaWV2ZSB0aGUgdG9rZW5zIG93bmVkIGJ5IHRoZSBjYWxsZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIG15VG9rZW5zKCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VPZihfY3VzdG9tZXJBZGRyZXNzKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgb3duZWQgYnkgdGhlIGNhbGxlci4KICAgICAqIElmIGBfaW5jbHVkZVJlZmVycmFsQm9udXNgIGlzIHRvIHRvIDEvdHJ1ZSwgdGhlIHJlZmVycmFsIGJvbnVzIHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIGNhbGN1bGF0aW9ucy4KICAgICAqIFRoZSByZWFzb24gZm9yIHRoaXMsIGlzIHRoYXQgaW4gdGhlIGZyb250ZW5kLCB3ZSB3aWxsIHdhbnQgdG8gZ2V0IHRoZSB0b3RhbCBkaXZzIChnbG9iYWwgKyByZWYpCiAgICAgKiBCdXQgaW4gdGhlIGludGVybmFsIGNhbGN1bGF0aW9ucywgd2Ugd2FudCB0aGVtIHNlcGFyYXRlLgogICAgICovCiAgICBmdW5jdGlvbiBteURpdmlkZW5kcyhib29sIF9pbmNsdWRlUmVmZXJyYWxCb251cykKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgcmV0dXJuIF9pbmNsdWRlUmVmZXJyYWxCb251cyA/IGRpdmlkZW5kc09mKF9jdXN0b21lckFkZHJlc3MpICsgcmVmZXJyYWxCYWxhbmNlX1tfY3VzdG9tZXJBZGRyZXNzXSA6IGRpdmlkZW5kc09mKF9jdXN0b21lckFkZHJlc3MpIDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSB0b2tlbiBiYWxhbmNlIG9mIGFueSBzaW5nbGUgYWRkcmVzcy4KICAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcykKICAgICAgICB2aWV3CiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHJldHVybiB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdOwogICAgfQoKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIGRpdmlkZW5kIGJhbGFuY2Ugb2YgYW55IHNpbmdsZSBhZGRyZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBkaXZpZGVuZHNPZihhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MpCiAgICAgICAgdmlldwogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICByZXR1cm4gKHVpbnQyNTYpICgoaW50MjU2KShwcm9maXRQZXJTaGFyZV8gKiB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdKSAtIHBheW91dHNUb19bX2N1c3RvbWVyQWRkcmVzc10pIC8gbWFnbml0dWRlOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBidXkgcHJpY2Ugb2YgMSBpbmRpdmlkdWFsIHRva2VuLgogICAgICovCiAgICBmdW5jdGlvbiBzZWxsUHJpY2UoKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgLy8gb3VyIGNhbGN1bGF0aW9uIHJlbGllcyBvbiB0aGUgdG9rZW4gc3VwcGx5LCBzbyB3ZSBuZWVkIHN1cHBseS4gRG9oLgogICAgICAgIGlmKHRva2VuU3VwcGx5XyA9PSAwKXsKICAgICAgICAgICAgcmV0dXJuIHRva2VuUHJpY2VJbml0aWFsXyAtIHRva2VuUHJpY2VJbmNyZW1lbnRhbF87CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdWludDI1NiBfZXRoZXJldW0gPSB0b2tlbnNUb0V0aGVyZXVtXygxZTE4KTsKICAgICAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChfZXRoZXJldW0sIGV4aXRGZWVfKSwgMTAwKTsKICAgICAgICAgICAgdWludDI1NiBfdGF4ZWRFdGhlcmV1bSA9IFNhZmVNYXRoLnN1YihfZXRoZXJldW0sIF9kaXZpZGVuZHMpOwogICAgICAgICAgICByZXR1cm4gX3RheGVkRXRoZXJldW07CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBzZWxsIHByaWNlIG9mIDEgaW5kaXZpZHVhbCB0b2tlbi4KICAgICAqLwogICAgZnVuY3Rpb24gYnV5UHJpY2UoKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgLy8gb3VyIGNhbGN1bGF0aW9uIHJlbGllcyBvbiB0aGUgdG9rZW4gc3VwcGx5LCBzbyB3ZSBuZWVkIHN1cHBseS4gRG9oLgogICAgICAgIGlmKHRva2VuU3VwcGx5XyA9PSAwKXsKICAgICAgICAgICAgcmV0dXJuIHRva2VuUHJpY2VJbml0aWFsXyArIHRva2VuUHJpY2VJbmNyZW1lbnRhbF87CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdWludDI1NiBfZXRoZXJldW0gPSB0b2tlbnNUb0V0aGVyZXVtXygxZTE4KTsKICAgICAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChfZXRoZXJldW0sIGVudHJ5RmVlXyksIDEwMCk7CiAgICAgICAgICAgIHVpbnQyNTYgX3RheGVkRXRoZXJldW0gPSBTYWZlTWF0aC5hZGQoX2V0aGVyZXVtLCBfZGl2aWRlbmRzKTsKICAgICAgICAgICAgcmV0dXJuIF90YXhlZEV0aGVyZXVtOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEZ1bmN0aW9uIGZvciB0aGUgZnJvbnRlbmQgdG8gZHluYW1pY2FsbHkgcmV0cmlldmUgdGhlIHByaWNlIHNjYWxpbmcgb2YgYnV5IG9yZGVycy4KICAgICAqLwogICAgZnVuY3Rpb24gY2FsY3VsYXRlVG9rZW5zUmVjZWl2ZWQodWludDI1NiBfZXRoZXJldW1Ub1NwZW5kKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChfZXRoZXJldW1Ub1NwZW5kLCBlbnRyeUZlZV8pLCAxMDApOwogICAgICAgIHVpbnQyNTYgX3RheGVkRXRoZXJldW0gPSBTYWZlTWF0aC5zdWIoX2V0aGVyZXVtVG9TcGVuZCwgX2RpdmlkZW5kcyk7CiAgICAgICAgdWludDI1NiBfYW1vdW50T2ZUb2tlbnMgPSBldGhlcmV1bVRvVG9rZW5zXyhfdGF4ZWRFdGhlcmV1bSk7CgogICAgICAgIHJldHVybiBfYW1vdW50T2ZUb2tlbnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBGdW5jdGlvbiBmb3IgdGhlIGZyb250ZW5kIHRvIGR5bmFtaWNhbGx5IHJldHJpZXZlIHRoZSBwcmljZSBzY2FsaW5nIG9mIHNlbGwgb3JkZXJzLgogICAgICovCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVFdGhlcmV1bVJlY2VpdmVkKHVpbnQyNTYgX3Rva2Vuc1RvU2VsbCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHJlcXVpcmUoX3Rva2Vuc1RvU2VsbCA8PSB0b2tlblN1cHBseV8pOwogICAgICAgIHVpbnQyNTYgX2V0aGVyZXVtID0gdG9rZW5zVG9FdGhlcmV1bV8oX3Rva2Vuc1RvU2VsbCk7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChfZXRoZXJldW0sIGV4aXRGZWVfKSwgMTAwKTsKICAgICAgICB1aW50MjU2IF90YXhlZEV0aGVyZXVtID0gU2FmZU1hdGguc3ViKF9ldGhlcmV1bSwgX2RpdmlkZW5kcyk7CiAgICAgICAgcmV0dXJuIF90YXhlZEV0aGVyZXVtOwogICAgfQoKCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgPSAgICAgICAgICAgIElOVEVSTkFMIEZVTkNUSU9OUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCiAgICBmdW5jdGlvbiBwdXJjaGFzZVRva2Vucyh1aW50MjU2IF9pbmNvbWluZ0V0aGVyZXVtLCBhZGRyZXNzIF9yZWZlcnJlZEJ5KQogICAgICAgIGFudGlFYXJseVdoYWxlKF9pbmNvbWluZ0V0aGVyZXVtKQogICAgICAgIGludGVybmFsCiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIC8vIGRhdGEgc2V0dXAKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIHVpbnQyNTYgX3VuZGl2aWRlZERpdmlkZW5kcyA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoX2luY29taW5nRXRoZXJldW0sIGVudHJ5RmVlXyksIDEwMCk7CiAgICAgICAgdWludDI1NiBfcmVmZXJyYWxCb251cyA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoX3VuZGl2aWRlZERpdmlkZW5kcywgcmVmZmVyYWxGZWVfKSwgMTAwKTsKICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBTYWZlTWF0aC5zdWIoX3VuZGl2aWRlZERpdmlkZW5kcywgX3JlZmVycmFsQm9udXMpOwogICAgICAgIHVpbnQyNTYgX3RheGVkRXRoZXJldW0gPSBTYWZlTWF0aC5zdWIoX2luY29taW5nRXRoZXJldW0sIF91bmRpdmlkZWREaXZpZGVuZHMpOwogICAgICAgIHVpbnQyNTYgX2Ftb3VudE9mVG9rZW5zID0gZXRoZXJldW1Ub1Rva2Vuc18oX3RheGVkRXRoZXJldW0pOwogICAgICAgIHVpbnQyNTYgX2ZlZSA9IF9kaXZpZGVuZHMgKiBtYWduaXR1ZGU7CgogICAgICAgIC8vIG5vIHBvaW50IGluIGNvbnRpbnVpbmcgZXhlY3V0aW9uIGlmIE9QIGlzIGEgcG9vcmZhZyBydXNzaWFuIGhhY2tlcgogICAgICAgIC8vIHByZXZlbnRzIG92ZXJmbG93IGluIHRoZSBjYXNlIHRoYXQgdGhlIHB5cmFtaWQgc29tZWhvdyBtYWdpY2FsbHkgc3RhcnRzIGJlaW5nIHVzZWQgYnkgZXZlcnlvbmUgaW4gdGhlIHdvcmxkCiAgICAgICAgLy8gKG9yIGhhY2tlcnMpCiAgICAgICAgLy8gYW5kIHllcyB3ZSBrbm93IHRoYXQgdGhlIHNhZmVtYXRoIGZ1bmN0aW9uIGF1dG9tYXRpY2FsbHkgcnVsZXMgb3V0IHRoZSAiZ3JlYXRlciB0aGVuIiBlcXVhc2lvbi4KICAgICAgICByZXF1aXJlKF9hbW91bnRPZlRva2VucyA+IDAgJiYgKFNhZmVNYXRoLmFkZChfYW1vdW50T2ZUb2tlbnMsdG9rZW5TdXBwbHlfKSA+IHRva2VuU3VwcGx5XykpOwoKICAgICAgICAvLyBpcyB0aGUgdXNlciByZWZlcnJlZCBieSBhIG1hc3Rlcm5vZGU/CiAgICAgICAgaWYoCiAgICAgICAgICAgIC8vIGlzIHRoaXMgYSByZWZlcnJlZCBwdXJjaGFzZT8KICAgICAgICAgICAgX3JlZmVycmVkQnkgIT0gMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwICYmCgogICAgICAgICAgICAvLyBubyBjaGVhdGluZyEKICAgICAgICAgICAgX3JlZmVycmVkQnkgIT0gX2N1c3RvbWVyQWRkcmVzcyAmJgoKICAgICAgICAgICAgLy8gZG9lcyB0aGUgcmVmZXJyZXIgaGF2ZSBhdCBsZWFzdCBYIHdob2xlIHRva2Vucz8KICAgICAgICAgICAgLy8gaS5lIGlzIHRoZSByZWZlcnJlciBhIGdvZGx5IGNoYWQgbWFzdGVybm9kZQogICAgICAgICAgICB0b2tlbkJhbGFuY2VMZWRnZXJfW19yZWZlcnJlZEJ5XSA+PSBzdGFraW5nUmVxdWlyZW1lbnQKICAgICAgICApewogICAgICAgICAgICAvLyB3ZWFsdGggcmVkaXN0cmlidXRpb24KICAgICAgICAgICAgcmVmZXJyYWxCYWxhbmNlX1tfcmVmZXJyZWRCeV0gPSBTYWZlTWF0aC5hZGQocmVmZXJyYWxCYWxhbmNlX1tfcmVmZXJyZWRCeV0sIF9yZWZlcnJhbEJvbnVzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBubyByZWYgcHVyY2hhc2UKICAgICAgICAgICAgLy8gYWRkIHRoZSByZWZlcnJhbCBib251cyBiYWNrIHRvIHRoZSBnbG9iYWwgZGl2aWRlbmRzIGNha2UKICAgICAgICAgICAgX2RpdmlkZW5kcyA9IFNhZmVNYXRoLmFkZChfZGl2aWRlbmRzLCBfcmVmZXJyYWxCb251cyk7CiAgICAgICAgICAgIF9mZWUgPSBfZGl2aWRlbmRzICogbWFnbml0dWRlOwogICAgICAgIH0KCiAgICAgICAgLy8gd2UgY2FuJ3QgZ2l2ZSBwZW9wbGUgaW5maW5pdGUgZXRoZXJldW0KICAgICAgICBpZih0b2tlblN1cHBseV8gPiAwKXsKCiAgICAgICAgICAgIC8vIGFkZCB0b2tlbnMgdG8gdGhlIHBvb2wKICAgICAgICAgICAgdG9rZW5TdXBwbHlfID0gU2FmZU1hdGguYWRkKHRva2VuU3VwcGx5XywgX2Ftb3VudE9mVG9rZW5zKTsKCiAgICAgICAgICAgIC8vIHRha2UgdGhlIGFtb3VudCBvZiBkaXZpZGVuZHMgZ2FpbmVkIHRocm91Z2ggdGhpcyB0cmFuc2FjdGlvbiwgYW5kIGFsbG9jYXRlcyB0aGVtIGV2ZW5seSB0byBlYWNoIHNoYXJlaG9sZGVyCiAgICAgICAgICAgIHByb2ZpdFBlclNoYXJlXyArPSAoX2RpdmlkZW5kcyAqIG1hZ25pdHVkZSAvICh0b2tlblN1cHBseV8pKTsKCiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIHRva2VucyB0aGUgY3VzdG9tZXIgcmVjZWl2ZXMgb3ZlciBoaXMgcHVyY2hhc2UKICAgICAgICAgICAgX2ZlZSA9IF9mZWUgLSAoX2ZlZS0oX2Ftb3VudE9mVG9rZW5zICogKF9kaXZpZGVuZHMgKiBtYWduaXR1ZGUgLyAodG9rZW5TdXBwbHlfKSkpKTsKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gYWRkIHRva2VucyB0byB0aGUgcG9vbAogICAgICAgICAgICB0b2tlblN1cHBseV8gPSBfYW1vdW50T2ZUb2tlbnM7CiAgICAgICAgfQoKICAgICAgICAvLyB1cGRhdGUgY2lyY3VsYXRpbmcgc3VwcGx5ICYgdGhlIGxlZGdlciBhZGRyZXNzIGZvciB0aGUgY3VzdG9tZXIKICAgICAgICB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdID0gU2FmZU1hdGguYWRkKHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc10sIF9hbW91bnRPZlRva2Vucyk7CgogICAgICAgIC8vIFRlbGxzIHRoZSBjb250cmFjdCB0aGF0IHRoZSBidXllciBkb2Vzbid0IGRlc2VydmUgZGl2aWRlbmRzIGZvciB0aGUgdG9rZW5zIGJlZm9yZSB0aGV5IG93bmVkIHRoZW07CiAgICAgICAgLy9yZWFsbHkgaSBrbm93IHlvdSB0aGluayB5b3UgZG8gYnV0IHlvdSBkb24ndAogICAgICAgIGludDI1NiBfdXBkYXRlZFBheW91dHMgPSAoaW50MjU2KSAoKHByb2ZpdFBlclNoYXJlXyAqIF9hbW91bnRPZlRva2VucykgLSBfZmVlKTsKICAgICAgICBwYXlvdXRzVG9fW19jdXN0b21lckFkZHJlc3NdICs9IF91cGRhdGVkUGF5b3V0czsKCiAgICAgICAgLy8gZmlyZSBldmVudAogICAgICAgIG9uVG9rZW5QdXJjaGFzZShfY3VzdG9tZXJBZGRyZXNzLCBfaW5jb21pbmdFdGhlcmV1bSwgX2Ftb3VudE9mVG9rZW5zLCBfcmVmZXJyZWRCeSk7CgogICAgICAgIHJldHVybiBfYW1vdW50T2ZUb2tlbnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgVG9rZW4gcHJpY2UgYmFzZWQgb24gYW4gYW1vdW50IG9mIGluY29taW5nIGV0aGVyZXVtCiAgICAgKiBJdCdzIGFuIGFsZ29yaXRobSwgaG9wZWZ1bGx5IHdlIGdhdmUgeW91IHRoZSB3aGl0ZXBhcGVyIHdpdGggaXQgaW4gc2NpZW50aWZpYyBub3RhdGlvbjsKICAgICAqIFNvbWUgY29udmVyc2lvbnMgb2NjdXJyZWQgdG8gcHJldmVudCBkZWNpbWFsIGVycm9ycyBvciB1bmRlcmZsb3dzIC8gb3ZlcmZsb3dzIGluIHNvbGlkaXR5IGNvZGUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGV0aGVyZXVtVG9Ub2tlbnNfKHVpbnQyNTYgX2V0aGVyZXVtKQogICAgICAgIGludGVybmFsCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICB1aW50MjU2IF90b2tlblByaWNlSW5pdGlhbCA9IHRva2VuUHJpY2VJbml0aWFsXyAqIDFlMTg7CiAgICAgICAgdWludDI1NiBfdG9rZW5zUmVjZWl2ZWQgPQogICAgICAgICAoCiAgICAgICAgICAgICgKICAgICAgICAgICAgICAgIC8vIHVuZGVyZmxvdyBhdHRlbXB0cyBCVEZPCiAgICAgICAgICAgICAgICBTYWZlTWF0aC5zdWIoCiAgICAgICAgICAgICAgICAgICAgKHNxcnQKICAgICAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKF90b2tlblByaWNlSW5pdGlhbCoqMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgyKih0b2tlblByaWNlSW5jcmVtZW50YWxfICogMWUxOCkqKF9ldGhlcmV1bSAqIDFlMTgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCgodG9rZW5QcmljZUluY3JlbWVudGFsXykqKjIpKih0b2tlblN1cHBseV8qKjIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKDIqKHRva2VuUHJpY2VJbmNyZW1lbnRhbF8pKl90b2tlblByaWNlSW5pdGlhbCp0b2tlblN1cHBseV8pCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApLCBfdG9rZW5QcmljZUluaXRpYWwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKS8odG9rZW5QcmljZUluY3JlbWVudGFsXykKICAgICAgICApLSh0b2tlblN1cHBseV8pCiAgICAgICAgOwoKICAgICAgICByZXR1cm4gX3Rva2Vuc1JlY2VpdmVkOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsY3VsYXRlIHRva2VuIHNlbGwgdmFsdWUuCiAgICAgKiBJdCdzIGFuIGFsZ29yaXRobSwgaG9wZWZ1bGx5IHdlIGdhdmUgeW91IHRoZSB3aGl0ZXBhcGVyIHdpdGggaXQgaW4gc2NpZW50aWZpYyBub3RhdGlvbjsKICAgICAqIFNvbWUgY29udmVyc2lvbnMgb2NjdXJyZWQgdG8gcHJldmVudCBkZWNpbWFsIGVycm9ycyBvciB1bmRlcmZsb3dzIC8gb3ZlcmZsb3dzIGluIHNvbGlkaXR5IGNvZGUuCiAgICAgKi8KICAgICBmdW5jdGlvbiB0b2tlbnNUb0V0aGVyZXVtXyh1aW50MjU2IF90b2tlbnMpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewoKICAgICAgICB1aW50MjU2IHRva2Vuc18gPSAoX3Rva2VucyArIDFlMTgpOwogICAgICAgIHVpbnQyNTYgX3Rva2VuU3VwcGx5ID0gKHRva2VuU3VwcGx5XyArIDFlMTgpOwogICAgICAgIHVpbnQyNTYgX2V0aGVyUmVjZWl2ZWQgPQogICAgICAgICgKICAgICAgICAgICAgLy8gdW5kZXJmbG93IGF0dGVtcHRzIEJURk8KICAgICAgICAgICAgU2FmZU1hdGguc3ViKAogICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5QcmljZUluaXRpYWxfICsodG9rZW5QcmljZUluY3JlbWVudGFsXyAqIChfdG9rZW5TdXBwbHkvMWUxOCkpCiAgICAgICAgICAgICAgICAgICAgICAgICktdG9rZW5QcmljZUluY3JlbWVudGFsXwogICAgICAgICAgICAgICAgICAgICkqKHRva2Vuc18gLSAxZTE4KQogICAgICAgICAgICAgICAgKSwodG9rZW5QcmljZUluY3JlbWVudGFsXyooKHRva2Vuc18qKjItdG9rZW5zXykvMWUxOCkpLzIKICAgICAgICAgICAgKQogICAgICAgIC8xZTE4KTsKICAgICAgICByZXR1cm4gX2V0aGVyUmVjZWl2ZWQ7CiAgICB9CgoKICAgIC8vVGhpcyBpcyB3aGVyZSBhbGwgeW91ciBnYXMgZ29lcywgc29ycnkKICAgIC8vTm90IHNvcnJ5LCB5b3UgcHJvYmFibHkgb25seSBwYWlkIDEgZ3dlaQogICAgZnVuY3Rpb24gc3FydCh1aW50IHgpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCB5KSB7CiAgICAgICAgdWludCB6ID0gKHggKyAxKSAvIDI7CiAgICAgICAgeSA9IHg7CiAgICAgICAgd2hpbGUgKHogPCB5KSB7CiAgICAgICAgICAgIHkgPSB6OwogICAgICAgICAgICB6ID0gKHggLyB6ICsgeikgLyAyOwogICAgICAgIH0KICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogICAgLyoqCiAgICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICAgKi8KICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICAgKi8KICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBTdWJzdHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgICAqLwogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICAgKi8KICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0='.
	

]
