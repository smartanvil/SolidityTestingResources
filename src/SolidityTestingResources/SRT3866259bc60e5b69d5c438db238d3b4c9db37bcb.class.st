Class {
	#name : #SRT3866259bc60e5b69d5c438db238d3b4c9db37bcb,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3866259bc60e5b69d5c438db238d3b4c9db37bcb >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIE9BWCAnb3BlbkFOWCBUb2tlbicgY3Jvd2RmdW5kaW5nIGNvbnRyYWN0Ci8vCi8vIFJlZmVyIHRvIGh0dHA6Ly9vcGVuYW54Lm9yZy8gZm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24uCi8vCi8vIEVuam95LiAoYykgb3BlbkFOWCBhbmQgQm9ra3lQb29CYWggLyBCb2sgQ29uc3VsdGluZyBQdHkgTHRkIDIwMTcuIAovLyBUaGUgTUlUIExpY2VuY2UuCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIE9BWCAnb3BlbkFOWCBUb2tlbicgY3Jvd2RmdW5kaW5nIGNvbnRyYWN0IC0gRVJDMjAgVG9rZW4gSW50ZXJmYWNlCi8vCi8vIFJlZmVyIHRvIGh0dHA6Ly9vcGVuYW54Lm9yZy8gZm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24uCi8vCi8vIEVuam95LiAoYykgb3BlbkFOWCBhbmQgQm9ra3lQb29CYWggLyBCb2sgQ29uc3VsdGluZyBQdHkgTHRkIDIwMTcuIAovLyBUaGUgTUlUIExpY2VuY2UuCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIEVSQyBUb2tlbiBTdGFuZGFyZCAjMjAgSW50ZXJmYWNlCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnRyYWN0IEVSQzIwSW50ZXJmYWNlIHsKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IAogICAgICAgIHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludCBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCAKICAgICAgICB1aW50IF92YWx1ZSk7Cn0KCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIE9BWCAnb3BlbkFOWCBUb2tlbicgY3Jvd2RmdW5kaW5nIGNvbnRyYWN0IC0gT3duZWQgY29udHJhY3RzCi8vCi8vIFJlZmVyIHRvIGh0dHA6Ly9vcGVuYW54Lm9yZy8gZm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24uCi8vCi8vIEVuam95LiAoYykgb3BlbkFOWCBhbmQgQm9ra3lQb29CYWggLyBCb2sgQ29uc3VsdGluZyBQdHkgTHRkIDIwMTcuIAovLyBUaGUgTUlUIExpY2VuY2UuCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gT3duZWQgY29udHJhY3QKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjb250cmFjdCBPd25lZCB7CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBDdXJyZW50IG93bmVyLCBhbmQgcHJvcG9zZWQgbmV3IG93bmVyCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBDb25zdHJ1Y3RvciAtIGFzc2lnbiBjcmVhdG9yIGFzIHRoZSBvd25lcgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBPd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gTW9kaWZpZXIgdG8gbWFyayB0aGF0IGEgZnVuY3Rpb24gY2FuIG9ubHkgYmUgZXhlY3V0ZWQgYnkgdGhlIG93bmVyCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIE93bmVyIGNhbiBpbml0aWF0ZSB0cmFuc2ZlciBvZiBjb250cmFjdCB0byBhIG5ldyBvd25lcgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KCiAKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gTmV3IG93bmVyIGhhcyB0byBhY2NlcHQgdHJhbnNmZXIgb2YgY29udHJhY3QKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lcik7CiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvKTsKfQoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gT0FYICdvcGVuQU5YIFRva2VuJyBjcm93ZGZ1bmRpbmcgY29udHJhY3QKLy8KLy8gUmVmZXIgdG8gaHR0cDovL29wZW5hbngub3JnLyBmb3IgZnVydGhlciBpbmZvcm1hdGlvbi4KLy8KLy8gRW5qb3kuIChjKSBvcGVuQU5YIGFuZCBCb2treVBvb0JhaCAvIEJvayBDb25zdWx0aW5nIFB0eSBMdGQgMjAxNy4gCi8vIFRoZSBNSVQgTGljZW5jZS4KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gU2FmZSBtYXRocywgYm9ycm93ZWQgZnJvbSBPcGVuWmVwcGVsaW4KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIEFkZCBhIG51bWJlciB0byBhbm90aGVyIG51bWJlciwgY2hlY2tpbmcgZm9yIG92ZXJmbG93cwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhICYmIGMgPj0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBTdWJ0cmFjdCBhIG51bWJlciBmcm9tIGFub3RoZXIgbnVtYmVyLCBjaGVja2luZyBmb3IgdW5kZXJmbG93cwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9Cn0KCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIE9BWCAnb3BlbkFOWCBUb2tlbicgY3Jvd2RmdW5kaW5nIGNvbnRyYWN0IC0gQ29uZmlndXJhdGlvbgovLwovLyBSZWZlciB0byBodHRwOi8vb3BlbmFueC5vcmcvIGZvciBmdXJ0aGVyIGluZm9ybWF0aW9uLgovLwovLyBFbmpveS4gKGMpIG9wZW5BTlggYW5kIEJva2t5UG9vQmFoIC8gQm9rIENvbnN1bHRpbmcgUHR5IEx0ZCAyMDE3LiAKLy8gVGhlIE1JVCBMaWNlbmNlLgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIG9wZW5BTlggY3Jvd2RzYWxlIHRva2VuIHNtYXJ0IGNvbnRyYWN0IC0gY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KY29udHJhY3QgT3BlbkFOWFRva2VuQ29uZmlnIHsKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIFRva2VuIHN5bWJvbCgpLCBuYW1lKCkgYW5kIGRlY2ltYWxzKCkKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBTWU1CT0wgPSAiT0FYIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgTkFNRSA9ICJvcGVuQU5YIFRva2VuIjsKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBERUNJTUFMUyA9IDE4OwoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIERlY2ltYWwgZmFjdG9yIGZvciBtdWx0aXBsaWNhdGlvbnMgZnJvbSBPQVggdW5pdCB0byBPQVggbmF0dXJhbCB1bml0CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IERFQ0lNQUxTRkFDVE9SID0gMTAqKnVpbnQoREVDSU1BTFMpOwoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gVHJhbmNoZSAxIHNvZnQgY2FwIGFuZCBoYXJkIGNhcCwgYW5kIHRvdGFsIHRva2VucwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBUT0tFTlNfU09GVF9DQVAgPSAxMzAwMDAwMCAqIERFQ0lNQUxTRkFDVE9SOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9LRU5TX0hBUkRfQ0FQID0gMzAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19UT1RBTCA9IDEwMDAwMDAwMCAqIERFQ0lNQUxTRkFDVE9SOwoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gVHJhbmNoZSAxIGNyb3dkc2FsZSBzdGFydCBkYXRlIGFuZCBlbmQgZGF0ZQogICAgLy8gRG8gbm90IHVzZSB0aGUgYG5vd2AgZnVuY3Rpb24gaGVyZQogICAgLy8gU3RhcnQgLSBUaHVyc2RheSwgMjItSnVuLTE3IDEzOjAwOjAwIFVUQyAvIDFwbSBHTVQgMjIgSnVuZSAyMDE3CiAgICAvLyBFbmQgLSBTYXR1cmRheSwgMjItSnVsLTE3IDEzOjAwOjAwIFVUQyAvIDFwbSBHTVQgMjIgSnVseSAyMDE3IAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBTVEFSVF9EQVRFID0gMTQ5ODEzNjQwMDsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEVORF9EQVRFID0gMTUwMDcyODQwMDsKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIDEgeWVhciBhbmQgMiB5ZWFyIGRhdGVzIGZvciBsb2NrZWQgdG9rZW5zCiAgICAvLyBEbyBub3QgdXNlIHRoZSBgbm93YCBmdW5jdGlvbiBoZXJlIAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBMT0NLRURfMVlfREFURSA9IFNUQVJUX0RBVEUgKyAzNjUgZGF5czsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IExPQ0tFRF8yWV9EQVRFID0gU1RBUlRfREFURSArIDIgKiAzNjUgZGF5czsKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIEluZGl2aWR1YWwgdHJhbnNhY3Rpb24gY29udHJpYnV0aW9uIG1pbiBhbmQgbWF4IGFtb3VudHMKICAgIC8vIFNldCB0byAwIHRvIHN3aXRjaCBvZmYsIG9yIGB4IGV0aGVyYAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICB1aW50IHB1YmxpYyBDT05UUklCVVRJT05TX01JTiA9IDAgZXRoZXI7CiAgICB1aW50IHB1YmxpYyBDT05UUklCVVRJT05TX01BWCA9IDAgZXRoZXI7Cn0KCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIE9BWCAnb3BlbkFOWCBUb2tlbicgY3Jvd2RmdW5kaW5nIGNvbnRyYWN0IC0gbG9ja2VkIHRva2VucwovLwovLyBSZWZlciB0byBodHRwOi8vb3BlbmFueC5vcmcvIGZvciBmdXJ0aGVyIGluZm9ybWF0aW9uLgovLwovLyBFbmpveS4gKGMpIG9wZW5BTlggYW5kIEJva2t5UG9vQmFoIC8gQm9rIENvbnN1bHRpbmcgUHR5IEx0ZCAyMDE3LiAKLy8gVGhlIE1JVCBMaWNlbmNlLgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gQ29udHJhY3QgdGhhdCBob2xkcyB0aGUgMVkgYW5kIDJZIGxvY2tlZCB0b2tlbiBpbmZvcm1hdGlvbgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnRyYWN0IExvY2tlZFRva2VucyBpcyBPcGVuQU5YVG9rZW5Db25maWcgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyAxeSBhbmQgMnkgbG9ja2VkIHRvdGFscywgbm90IGluY2x1ZGluZyB1bnNvbGQgdHJhbmNoZTEgYW5kIGFsbCB0cmFuY2hlMgogICAgLy8gdG9rZW5zCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19MT0NLRURfMVlfVE9UQUwgPSAxNDAwMDAwMCAqIERFQ0lNQUxTRkFDVE9SOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9LRU5TX0xPQ0tFRF8yWV9UT1RBTCA9IDI2MDAwMDAwICogREVDSU1BTFNGQUNUT1I7CiAgICAKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gVG9rZW5zIGxvY2tlZCBmb3IgMSB5ZWFyIGZvciBzYWxlIDIgaW4gdGhlIGZvbGxvd2luZyBhY2NvdW50CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGFkZHJlc3MgcHVibGljIFRSQU5DSEUyX0FDQ09VTlQgPSAweDgxMzcwM0ViNjc2ZjNCNkM3NmRBNzVjQmEwY2JDNDlEZGJDQTdCMzc7CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBDdXJyZW50IHRvdGFsU3VwcGx5IG9mIDF5IGFuZCAyeSBsb2NrZWQgdG9rZW5zCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5TG9ja2VkMVk7CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseUxvY2tlZDJZOwoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gTG9ja2VkIHRva2VucyBtYXBwaW5nCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGJhbGFuY2VzTG9ja2VkMVk7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBiYWxhbmNlc0xvY2tlZDJZOwoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gQWRkcmVzcyBvZiBvcGVuQU5YIGNyb3dkc2FsZSB0b2tlbiBjb250cmFjdAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBFUkMyMEludGVyZmFjZSBwdWJsaWMgdG9rZW5Db250cmFjdDsKCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBDb25zdHJ1Y3RvciAtIGNhbGxlZCBieSBjcm93ZHNhbGUgdG9rZW4gY29udHJhY3QKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gTG9ja2VkVG9rZW5zKGFkZHJlc3MgX3Rva2VuQ29udHJhY3QpIHsKICAgICAgICB0b2tlbkNvbnRyYWN0ID0gRVJDMjBJbnRlcmZhY2UoX3Rva2VuQ29udHJhY3QpOwoKICAgICAgICAvLyAtLS0gMXkgbG9ja2VkIHRva2VucyAtLS0KCiAgICAgICAgLy8gQ29uZmlybSAxWSB0b3RhbHMgICAgICAgIAogICAgICAgIGFkZDFZKDB4NGJlRTA4OGVmREJDQzYxMEVFRWExMDFkZWQ3MjA0MTUwQUYxQzhiOSwxMDAwMDAwICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDFZKDB4ODM5NTUxMjAxZjg2NjkwN0ViNTAxN2JFNzljRUI0OGFEYTU4NjUwYyw5MjUwMDAgKiBERUNJTUFMU0ZBQ1RPUik7CiAgICAgICAgYWRkMVkoMHhhOTJkNENkMzQxMjg2MjM4NmMyMzRCZTU3MkZlNEE4RkE0QkIwOWM2LDkyNTAwMCAqIERFQ0lNQUxTRkFDVE9SKTsKICAgICAgICBhZGQxWSgweEVDZjJCNWZjZTMzMDA3RTU2NjlENjNkZTM5YTRjNjYzZTU2OTU4ZEQsOTI1MDAwICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDFZKDB4RDZCNzY5NWJjNzRFMkM5NTBlYjk1MzMxNjM1OUVhYjI4M0M1QmRhOCw5MjUwMDAgKiBERUNJTUFMU0ZBQ1RPUik7CiAgICAgICAgYWRkMVkoMHhCRTM0NjNFYWUyNjM5OEQ1NWE3MTE4NjgzMDc5MjY0QmNGM2FiMjRCLDE1MDAwMCAqIERFQ0lNQUxTRkFDVE9SKTsKICAgICAgICBhZGQxWSgweGY0NzQyOEZiOUE2MWM5ZjMzMTJjQjAzNUFFRTA0OUZCYTc2YmE2MmEsMTUwMDAwICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDFZKDB4ZkNjYzc3MTY1RDgyMkVmOTAwNDcxNGQ4MjliREMyNjdDNzQzNjU4YSw1MDAwMCAqIERFQ0lNQUxTRkFDVE9SKTsKICAgICAgICBhZGQxWSgweGFmOGRmMmFDQWVjM2Q1ZDkyZEU0MmE2YzE5ZDc3MDZBNEYzRThEOGIsNTAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7CiAgICAgICAgYWRkMVkoMHgyMmE2Zjk2OTM4NTYzNzRCRjI5MjJjZDgzN2QwN0Y2NjcwRTdGQTRkLDI1MDAwMCAqIERFQ0lNQUxTRkFDVE9SKTsKICAgICAgICBhZGQxWSgweDNGNzIwQ2E4RmZGNTk4RjAwYTUxREUzMkE4Q2I1OENhNzNmMjJhRGUsNTAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7CiAgICAgICAgYWRkMVkoMHhCZDBEMTk1NEIzMDFFNDE0RjBiNUQwODI3QTY5RUM1ZEQ1NTllNTBCLDUwMDAwICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDFZKDB4MmFkNkIwMTFGRWNERTgzMGM5Y2M0ZGMwZDBiNzdGMDU1RDZiNTk5MCw1MDAwMCAqIERFQ0lNQUxTRkFDVE9SKTsKICAgICAgICBhZGQxWSgweDBjNWNEMEU5NzFjQTE4YTBGMEUwZDU4MWY0QjkzRmFEMzFENjA4QjAsMjAwMDA4NSAqIERFQ0lNQUxTRkFDVE9SKTsKICAgICAgICBhZGQxWSgweEZhYURDNGQ4MEVhZjQzMEFiNjA0MzM3Q0I2N2Q3N2VDNzYzRDNlMjMsMjAwMjQ4ICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDFZKDB4REFlZjQ2Zjg5YzI2NDE4MkNkODdDZTkzQjYyMEI2M2M3QWZCMTRmNywxNjE2OTIwICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDFZKDB4MTljYzU5QzMwY0U1NDcwNjYzM2RDMjlFZEViQUUxZWZGMTc1N2IyNSwyMjQ5ODAgKiBERUNJTUFMU0ZBQ1RPUik7CiAgICAgICAgYWRkMVkoMHhhMTMwZkU1RDM5OTEwNENBNUFGMTY4ZmJiQkJlMTlGOTVkNzM5NzQxLDc0NTkxOCAqIERFQ0lNQUxTRkFDVE9SKTsKICAgICAgICBhZGQxWSgweEMwY0QxYmY2RjI5MzkwOTVhNTZCMERGYTA4NUJhMjg4NmI4NEU3ZDEsNzQ1OTE4ICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDFZKDB4ZjJDMjZlNzllRDI2NEIwRTNlNUE1REZiMURkOTFFQTYxZjUxMkM2ZSw3NDU5MTggKiBERUNJTUFMU0ZBQ1RPUik7CiAgICAgICAgYWRkMVkoMHg1Rjg3NmE4QTVGMUI2NmZiZjNEMEQxMTkwNzViNjJhRjQzODZlMzE5LDc0NTkxOCAqIERFQ0lNQUxTRkFDVE9SKTsKICAgICAgICBhZGQxWSgweGI4RTA0NjU3MDgwMERkNzY3MjBhRjZkNDJkM2NDYWU0NTFGNTRmMTUsNzQ1OTIwICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDFZKDB4QTUyNGZhNjVBYWM0NjQ3ZmE3YkEyYzIwRDIyRjY0NDUwYzM1MWJCZCw3MTQyODYgKiBERUNJTUFMU0ZBQ1RPUik7CiAgICAgICAgYWRkMVkoMHgyNzIwOWIyNzZDMTVhOTM2QkNFMDhEN0Q3MGYwYzk3YWViM0NFOGMzLDEzODg5ICogREVDSU1BTFNGQUNUT1IpOwoKICAgICAgICBhc3NlcnQodG90YWxTdXBwbHlMb2NrZWQxWSA9PSBUT0tFTlNfTE9DS0VEXzFZX1RPVEFMKTsKCiAgICAgICAgLy8gLS0tIDJ5IGxvY2tlZCB0b2tlbnMgLS0tCiAgICAgICAgYWRkMlkoMHg0YmVFMDg4ZWZEQkNDNjEwRUVFYTEwMWRlZDcyMDQxNTBBRjFDOGI5LDEwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7CiAgICAgICAgYWRkMlkoMHg4Mzk1NTEyMDFmODY2OTA3RWI1MDE3YkU3OWNFQjQ4YURhNTg2NTBjLDkyNTAwMCAqIERFQ0lNQUxTRkFDVE9SKTsKICAgICAgICBhZGQyWSgweGE5MmQ0Q2QzNDEyODYyMzg2YzIzNEJlNTcyRmU0QThGQTRCQjA5YzYsOTI1MDAwICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDJZKDB4RUNmMkI1ZmNlMzMwMDdFNTY2OUQ2M2RlMzlhNGM2NjNlNTY5NThkRCw5MjUwMDAgKiBERUNJTUFMU0ZBQ1RPUik7CiAgICAgICAgYWRkMlkoMHhENkI3Njk1YmM3NEUyQzk1MGViOTUzMzE2MzU5RWFiMjgzQzVCZGE4LDkyNTAwMCAqIERFQ0lNQUxTRkFDVE9SKTsKICAgICAgICBhZGQyWSgweEJFMzQ2M0VhZTI2Mzk4RDU1YTcxMTg2ODMwNzkyNjRCY0YzYWIyNEIsMTUwMDAwICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDJZKDB4ZjQ3NDI4RmI5QTYxYzlmMzMxMmNCMDM1QUVFMDQ5RkJhNzZiYTYyYSwxNTAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7CiAgICAgICAgYWRkMlkoMHhmQ2NjNzcxNjVEODIyRWY5MDA0NzE0ZDgyOWJEQzI2N0M3NDM2NThhLDUwMDAwICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDJZKDB4REFlZjQ2Zjg5YzI2NDE4MkNkODdDZTkzQjYyMEI2M2M3QWZCMTRmNyw1MDAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7CiAgICAgICAgYWRkMlkoMHhhZjhkZjJhQ0FlYzNkNWQ5MmRFNDJhNmMxOWQ3NzA2QTRGM0U4RDhiLDUwMDAwICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDJZKDB4MjJhNmY5NjkzODU2Mzc0QkYyOTIyY2Q4MzdkMDdGNjY3MEU3RkE0ZCwyNTAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7CiAgICAgICAgYWRkMlkoMHgzRjcyMENhOEZmRjU5OEYwMGE1MURFMzJBOENiNThDYTczZjIyYURlLDUwMDAwICogREVDSU1BTFNGQUNUT1IpOwogICAgICAgIGFkZDJZKDB4QmQwRDE5NTRCMzAxRTQxNEYwYjVEMDgyN0E2OUVDNWRENTU5ZTUwQiw1MDAwMCAqIERFQ0lNQUxTRkFDVE9SKTsKICAgICAgICBhZGQyWSgweDJhZDZCMDExRkVjREU4MzBjOWNjNGRjMGQwYjc3RjA1NUQ2YjU5OTAsNTAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7CgogICAgICAgIC8vdHJlYXN1cnkKICAgICAgICBhZGQyWSgweDk5MGEyRDE3MjM5ODAwN2ZjYmQ1MDc4RDg0Njk2QmREOGNDRGY3YjIsMjAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUik7CgogICAgICAgIGFzc2VydCh0b3RhbFN1cHBseUxvY2tlZDJZID09IFRPS0VOU19MT0NLRURfMllfVE9UQUwpOwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIEFkZCByZW1haW5pbmcgdG9rZW5zIHRvIGxvY2tlZCAxeSBiYWxhbmNlcwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBhZGRSZW1haW5pbmdUb2tlbnMoKSB7CiAgICAgICAgLy8gT25seSB0aGUgY3Jvd2RzYWxlIGNvbnRyYWN0IGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24KICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyh0b2tlbkNvbnRyYWN0KSk7CiAgICAgICAgLy8gVG90YWwgdG9rZW5zIHRvIGJlIGNyZWF0ZWQKICAgICAgICB1aW50IHJlbWFpbmluZ1Rva2VucyA9IFRPS0VOU19UT1RBTDsKICAgICAgICAvLyBNaW51cyBwcmVjb21taXRtZW50cyBhbmQgcHVibGljIGNyb3dkc2FsZSB0b2tlbnMKICAgICAgICByZW1haW5pbmdUb2tlbnMgPSByZW1haW5pbmdUb2tlbnMuc3ViKHRva2VuQ29udHJhY3QudG90YWxTdXBwbHkoKSk7CiAgICAgICAgLy8gTWludXMgMXkgbG9ja2VkIHRva2VucwogICAgICAgIHJlbWFpbmluZ1Rva2VucyA9IHJlbWFpbmluZ1Rva2Vucy5zdWIodG90YWxTdXBwbHlMb2NrZWQxWSk7CiAgICAgICAgLy8gTWludXMgMnkgbG9ja2VkIHRva2VucwogICAgICAgIHJlbWFpbmluZ1Rva2VucyA9IHJlbWFpbmluZ1Rva2Vucy5zdWIodG90YWxTdXBwbHlMb2NrZWQyWSk7CiAgICAgICAgLy8gVW5zb2xkIHRyYW5jaGUxIGFuZCB0cmFuY2hlMiB0b2tlbnMgdG8gYmUgbG9ja2VkIGZvciAxeSAKICAgICAgICBhZGQxWShUUkFOQ0hFMl9BQ0NPVU5ULCByZW1haW5pbmdUb2tlbnMpOwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIEFkZCB0byAxeSBsb2NrZWQgYmFsYW5jZXMgYW5kIHRvdGFsU3VwcGx5CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGFkZDFZKGFkZHJlc3MgYWNjb3VudCwgdWludCB2YWx1ZSkgcHJpdmF0ZSB7CiAgICAgICAgYmFsYW5jZXNMb2NrZWQxWVthY2NvdW50XSA9IGJhbGFuY2VzTG9ja2VkMVlbYWNjb3VudF0uYWRkKHZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseUxvY2tlZDFZID0gdG90YWxTdXBwbHlMb2NrZWQxWS5hZGQodmFsdWUpOwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIEFkZCB0byAyeSBsb2NrZWQgYmFsYW5jZXMgYW5kIHRvdGFsU3VwcGx5CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGFkZDJZKGFkZHJlc3MgYWNjb3VudCwgdWludCB2YWx1ZSkgcHJpdmF0ZSB7CiAgICAgICAgYmFsYW5jZXNMb2NrZWQyWVthY2NvdW50XSA9IGJhbGFuY2VzTG9ja2VkMllbYWNjb3VudF0uYWRkKHZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseUxvY2tlZDJZID0gdG90YWxTdXBwbHlMb2NrZWQyWS5hZGQodmFsdWUpOwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIDF5IGxvY2tlZCBiYWxhbmNlcyBmb3IgYW4gYWNjb3VudAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBiYWxhbmNlT2ZMb2NrZWQxWShhZGRyZXNzIGFjY291bnQpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc0xvY2tlZDFZW2FjY291bnRdOwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIDJ5IGxvY2tlZCBiYWxhbmNlcyBmb3IgYW4gYWNjb3VudAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBiYWxhbmNlT2ZMb2NrZWQyWShhZGRyZXNzIGFjY291bnQpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc0xvY2tlZDJZW2FjY291bnRdOwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIDF5IGFuZCAyeSBsb2NrZWQgYmFsYW5jZXMgZm9yIGFuIGFjY291bnQKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gYmFsYW5jZU9mTG9ja2VkKGFkZHJlc3MgYWNjb3VudCkgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzTG9ja2VkMVlbYWNjb3VudF0uYWRkKGJhbGFuY2VzTG9ja2VkMllbYWNjb3VudF0pOwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIDF5IGFuZCAyeSBsb2NrZWQgdG90YWwgc3VwcGx5CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5TG9ja2VkKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiB0b3RhbFN1cHBseUxvY2tlZDFZICsgdG90YWxTdXBwbHlMb2NrZWQyWTsKICAgIH0KCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBBbiBhY2NvdW50IGNhbiB1bmxvY2sgdGhlaXIgMXkgbG9ja2VkIHRva2VucyAxeSBhZnRlciB0b2tlbiBsYXVuY2ggZGF0ZQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiB1bmxvY2sxWSgpIHsKICAgICAgICByZXF1aXJlKG5vdyA+PSBMT0NLRURfMVlfREFURSk7CiAgICAgICAgdWludCBhbW91bnQgPSBiYWxhbmNlc0xvY2tlZDFZW21zZy5zZW5kZXJdOwogICAgICAgIHJlcXVpcmUoYW1vdW50ID4gMCk7CiAgICAgICAgYmFsYW5jZXNMb2NrZWQxWVttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgdG90YWxTdXBwbHlMb2NrZWQxWSA9IHRvdGFsU3VwcGx5TG9ja2VkMVkuc3ViKGFtb3VudCk7CiAgICAgICAgaWYgKCF0b2tlbkNvbnRyYWN0LnRyYW5zZmVyKG1zZy5zZW5kZXIsIGFtb3VudCkpIHRocm93OwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIEFuIGFjY291bnQgY2FuIHVubG9jayB0aGVpciAyeSBsb2NrZWQgdG9rZW5zIDJ5IGFmdGVyIHRva2VuIGxhdW5jaCBkYXRlCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHVubG9jazJZKCkgewogICAgICAgIHJlcXVpcmUobm93ID49IExPQ0tFRF8yWV9EQVRFKTsKICAgICAgICB1aW50IGFtb3VudCA9IGJhbGFuY2VzTG9ja2VkMllbbXNnLnNlbmRlcl07CiAgICAgICAgcmVxdWlyZShhbW91bnQgPiAwKTsKICAgICAgICBiYWxhbmNlc0xvY2tlZDJZW21zZy5zZW5kZXJdID0gMDsKICAgICAgICB0b3RhbFN1cHBseUxvY2tlZDJZID0gdG90YWxTdXBwbHlMb2NrZWQyWS5zdWIoYW1vdW50KTsKICAgICAgICBpZiAoIXRva2VuQ29udHJhY3QudHJhbnNmZXIobXNnLnNlbmRlciwgYW1vdW50KSkgdGhyb3c7CiAgICB9Cn0KCgoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBFUkMyMCBUb2tlbiwgd2l0aCB0aGUgYWRkaXRpb24gb2Ygc3ltYm9sLCBuYW1lIGFuZCBkZWNpbWFscwovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnRyYWN0IEVSQzIwVG9rZW4gaXMgRVJDMjBJbnRlcmZhY2UsIE93bmVkIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gc3ltYm9sKCksIG5hbWUoKSBhbmQgZGVjaW1hbHMoKQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIEJhbGFuY2VzIGZvciBlYWNoIGFjY291bnQKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gT3duZXIgb2YgYWNjb3VudCBhcHByb3ZlcyB0aGUgdHJhbnNmZXIgb2YgYW4gYW1vdW50IHRvIGFub3RoZXIgYWNjb3VudAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBFUkMyMFRva2VuKAogICAgICAgIHN0cmluZyBfc3ltYm9sLCAKICAgICAgICBzdHJpbmcgX25hbWUsIAogICAgICAgIHVpbnQ4IF9kZWNpbWFscywgCiAgICAgICAgdWludCBfdG90YWxTdXBwbHkKICAgICkgT3duZWQoKSB7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgZGVjaW1hbHMgPSBfZGVjaW1hbHM7CiAgICAgICAgdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHk7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gX3RvdGFsU3VwcGx5OwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIEdldCB0aGUgYWNjb3VudCBiYWxhbmNlIG9mIGFub3RoZXIgYWNjb3VudCB3aXRoIGFkZHJlc3MgX293bmVyCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gVHJhbnNmZXIgdGhlIGJhbGFuY2UgZnJvbSBvd25lcidzIGFjY291bnQgdG8gYW5vdGhlciBhY2NvdW50CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50ICAgICAgICAgICAgIC8vIFVzZXIgaGFzIGJhbGFuY2UKICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb24temVybyB0cmFuc2ZlcgogICAgICAgICAgICAmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10gIC8vIE92ZXJmbG93IGNoZWNrCiAgICAgICAgKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF9hbW91bnQpOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gQWxsb3cgX3NwZW5kZXIgdG8gd2l0aGRyYXcgZnJvbSB5b3VyIGFjY291bnQsIG11bHRpcGxlIHRpbWVzLCB1cCB0byB0aGUKICAgIC8vIF92YWx1ZSBhbW91bnQuIElmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGFnYWluIGl0IG92ZXJ3cml0ZXMgdGhlCiAgICAvLyBjdXJyZW50IGFsbG93YW5jZSB3aXRoIF92YWx1ZS4KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gYXBwcm92ZSgKICAgICAgICBhZGRyZXNzIF9zcGVuZGVyLAogICAgICAgIHVpbnQgX2Ftb3VudAogICAgKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIFNwZW5kZXIgb2YgdG9rZW5zIHRyYW5zZmVyIGFuIGFtb3VudCBvZiB0b2tlbnMgZnJvbSB0aGUgdG9rZW4gb3duZXIncwogICAgLy8gYmFsYW5jZSB0byBhbm90aGVyIGFjY291bnQuIFRoZSBvd25lciBvZiB0aGUgdG9rZW5zIG11c3QgYWxyZWFkeQogICAgLy8gaGF2ZSBhcHByb3ZlKC4uLiktZCB0aGlzIHRyYW5zZmVyCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgKICAgICAgICBhZGRyZXNzIF9mcm9tLAogICAgICAgIGFkZHJlc3MgX3RvLAogICAgICAgIHVpbnQgX2Ftb3VudAogICAgKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF9hbW91bnQgICAgICAgICAgICAgICAgICAvLyBGcm9tIGEvYyBoYXMgYmFsYW5jZQogICAgICAgICAgICAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50ICAgIC8vIFRyYW5zZmVyIGFwcHJvdmVkCiAgICAgICAgICAgICYmIF9hbW91bnQgPiAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9uLXplcm8gdHJhbnNmZXIKICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dICAvLyBPdmVyZmxvdyBjaGVjawogICAgICAgICkgewogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF9hbW91bnQpOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBSZXR1cm5zIHRoZSBhbW91bnQgb2YgdG9rZW5zIGFwcHJvdmVkIGJ5IHRoZSBvd25lciB0aGF0IGNhbiBiZQogICAgLy8gdHJhbnNmZXJyZWQgdG8gdGhlIHNwZW5kZXIncyBhY2NvdW50CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGFsbG93YW5jZSgKICAgICAgICBhZGRyZXNzIF9vd25lciwgCiAgICAgICAgYWRkcmVzcyBfc3BlbmRlcgogICAgKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQp9CgoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBvcGVuQU5YIGNyb3dkc2FsZSB0b2tlbiBzbWFydCBjb250cmFjdAovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnRyYWN0IE9wZW5BTlhUb2tlbiBpcyBFUkMyMFRva2VuLCBPcGVuQU5YVG9rZW5Db25maWcgewoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gSGFzIHRoZSBjcm93ZHNhbGUgYmVlbiBmaW5hbGlzZWQ/CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGJvb2wgcHVibGljIGZpbmFsaXNlZCA9IGZhbHNlOwoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gTnVtYmVyIG9mIHRva2VucyBwZXIgMSwwMDAgRVRICiAgICAvLyBUaGlzIGNhbiBiZSBhZGp1c3RlZCBhcyB0aGUgRVRIL1VTRCByYXRlIGNoYW5nZXMKICAgIC8vCiAgICAvLyBJbmRpY2F0aXZlIHJhdGUgb2YgRVRIIHBlciB0b2tlbiBvZiAwLjAwMjkwOTIzIGF0IDggSnVuZSAyMDE3CiAgICAvLyAKICAgIC8vIFRoaXMgaXMgdGhlIHNhbWUgYXMgMSAvIDAuMDAyOTA5MjMgPSAzNDMuNzMzNTY1MjM4OTEyMDE1IE9BWCBwZXIgRVRICiAgICAvLwogICAgLy8gdG9rZW5zUGVyRXRoZXIgID0gMzQzLjczMzU2NTIzODkxMjAxNQogICAgLy8gdG9rZW5zUGVyS0V0aGVyID0gMzQzLDczMy41NjUyMzg5MTIwMTUKICAgIC8vIHRva2Vuc1BlcktFdGhlciA9IDM0Myw3MzQgcm91bmRlZCB0byBhbiB1aW50LCBzaXggc2lnbmlmaWNhbnQgZmlndXJlcwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICB1aW50IHB1YmxpYyB0b2tlbnNQZXJLRXRoZXIgPSAzNDM3MzQ7CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBMb2NrZWQgVG9rZW5zIC0gaG9sZHMgdGhlIDF5IGFuZCAyeSBsb2NrZWQgdG9rZW5zIGluZm9ybWF0aW9uCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIExvY2tlZFRva2VucyBwdWJsaWMgbG9ja2VkVG9rZW5zOwoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gV2FsbGV0IHJlY2VpdmluZyB0aGUgcmFpc2VkIGZ1bmRzIAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBDcm93ZHNhbGUgcGFydGljaXBhbnQncyBhY2NvdW50cyBuZWVkIHRvIGJlIEtZQyB2ZXJpZmllZCBLWUMgYmVmb3JlCiAgICAvLyB0aGUgcGFydGljaXBhbnQgY2FuIG1vdmUgdGhlaXIgdG9rZW5zCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMga3ljUmVxdWlyZWQ7CgoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gQ29uc3RydWN0b3IKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gT3BlbkFOWFRva2VuKGFkZHJlc3MgX3dhbGxldCkgCiAgICAgICAgRVJDMjBUb2tlbihTWU1CT0wsIE5BTUUsIERFQ0lNQUxTLCAwKQogICAgewogICAgICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICAgICAgbG9ja2VkVG9rZW5zID0gbmV3IExvY2tlZFRva2Vucyh0aGlzKTsKICAgICAgICByZXF1aXJlKGFkZHJlc3MobG9ja2VkVG9rZW5zKSAhPSAweDApOwogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gb3BlbkFOWCBjYW4gY2hhbmdlIHRoZSBjcm93ZHNhbGUgd2FsbGV0IGFkZHJlc3MKICAgIC8vIENhbiBiZSBzZXQgYXQgYW55IHRpbWUgYmVmb3JlIG9yIGR1cmluZyB0aGUgY3Jvd2RzYWxlCiAgICAvLyBOb3QgcmVsZXZhbnQgYWZ0ZXIgdGhlIGNyb3dkc2FsZSBpcyBmaW5hbGlzZWQgYXMgbm8gbW9yZSBjb250cmlidXRpb25zCiAgICAvLyBhcmUgYWNjZXB0ZWQKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gc2V0V2FsbGV0KGFkZHJlc3MgX3dhbGxldCkgb25seU93bmVyIHsKICAgICAgICB3YWxsZXQgPSBfd2FsbGV0OwogICAgICAgIFdhbGxldFVwZGF0ZWQod2FsbGV0KTsKICAgIH0KICAgIGV2ZW50IFdhbGxldFVwZGF0ZWQoYWRkcmVzcyBuZXdXYWxsZXQpOwoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIG9wZW5BTlggY2FuIHNldCBudW1iZXIgb2YgdG9rZW5zIHBlciAxLDAwMCBFVEgKICAgIC8vIENhbiBvbmx5IGJlIHNldCBiZWZvcmUgdGhlIHN0YXJ0IG9mIHRoZSBjcm93ZHNhbGUKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gc2V0VG9rZW5zUGVyS0V0aGVyKHVpbnQgX3Rva2Vuc1BlcktFdGhlcikgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5vdyA8IFNUQVJUX0RBVEUpOwogICAgICAgIHJlcXVpcmUoX3Rva2Vuc1BlcktFdGhlciA+IDApOwogICAgICAgIHRva2Vuc1BlcktFdGhlciA9IF90b2tlbnNQZXJLRXRoZXI7CiAgICAgICAgVG9rZW5zUGVyS0V0aGVyVXBkYXRlZCh0b2tlbnNQZXJLRXRoZXIpOwogICAgfQogICAgZXZlbnQgVG9rZW5zUGVyS0V0aGVyVXBkYXRlZCh1aW50IHRva2Vuc1BlcktFdGhlcik7CgoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gQWNjZXB0IGV0aGVycyB0byBidXkgdG9rZW5zIGR1cmluZyB0aGUgY3Jvd2RzYWxlCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgIHByb3h5UGF5bWVudChtc2cuc2VuZGVyKTsKICAgIH0KCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBBY2NlcHQgZXRoZXJzIGZyb20gb25lIGFjY291bnQgZm9yIHRva2VucyB0byBiZSBjcmVhdGVkIGZvciBhbm90aGVyCiAgICAvLyBhY2NvdW50LiBDYW4gYmUgdXNlZCBieSBleGNoYW5nZXMgdG8gcHVyY2hhc2UgdG9rZW5zIG9uIGJlaGFsZiBvZiAKICAgIC8vIGl0J3MgdXNlcgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBwcm94eVBheW1lbnQoYWRkcmVzcyBwYXJ0aWNpcGFudCkgcGF5YWJsZSB7CiAgICAgICAgLy8gTm8gY29udHJpYnV0aW9ucyBhZnRlciB0aGUgY3Jvd2RzYWxlIGlzIGZpbmFsaXNlZAogICAgICAgIHJlcXVpcmUoIWZpbmFsaXNlZCk7CgogICAgICAgIC8vIE5vIGNvbnRyaWJ1dGlvbnMgYmVmb3JlIHRoZSBzdGFydCBvZiB0aGUgY3Jvd2RzYWxlCiAgICAgICAgcmVxdWlyZShub3cgPj0gU1RBUlRfREFURSk7CiAgICAgICAgLy8gTm8gY29udHJpYnV0aW9ucyBhZnRlciB0aGUgZW5kIG9mIHRoZSBjcm93ZHNhbGUKICAgICAgICByZXF1aXJlKG5vdyA8PSBFTkRfREFURSk7CgogICAgICAgIC8vIE5vIGNvbnRyaWJ1dGlvbnMgYmVsb3cgdGhlIG1pbmltdW0gKGNhbiBiZSAwIEVUSCkKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBDT05UUklCVVRJT05TX01JTik7CiAgICAgICAgLy8gTm8gY29udHJpYnV0aW9ucyBhYm92ZSBhIG1heGltdW0gKGlmIG1heGltdW0gaXMgc2V0IHRvIG5vbi0wKQogICAgICAgIHJlcXVpcmUoQ09OVFJJQlVUSU9OU19NQVggPT0gMCB8fCBtc2cudmFsdWUgPCBDT05UUklCVVRJT05TX01BWCk7CgogICAgICAgIC8vIENhbGN1bGF0ZSBudW1iZXIgb2YgdG9rZW5zIGZvciBjb250cmlidXRlZCBFVEgKICAgICAgICAvLyBgMThgIGlzIHRoZSBFVEggZGVjaW1hbHMKICAgICAgICAvLyBgLSBkZWNpbWFsc2AgaXMgdGhlIHRva2VuIGRlY2ltYWxzCiAgICAgICAgLy8gYCsgM2AgZm9yIHRoZSB0b2tlbnMgcGVyIDEsMDAwIEVUSCBmYWN0b3IKICAgICAgICB1aW50IHRva2VucyA9IG1zZy52YWx1ZSAqIHRva2Vuc1BlcktFdGhlciAvIDEwKip1aW50KDE4IC0gZGVjaW1hbHMgKyAzKTsKCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGhhcmQgY2FwIHdpbGwgYmUgZXhjZWVkZWQKICAgICAgICByZXF1aXJlKHRvdGFsU3VwcGx5ICsgdG9rZW5zIDw9IFRPS0VOU19IQVJEX0NBUCk7CgogICAgICAgIC8vIEFkZCB0b2tlbnMgcHVyY2hhc2VkIHRvIGFjY291bnQncyBiYWxhbmNlIGFuZCB0b3RhbCBzdXBwbHkKICAgICAgICBiYWxhbmNlc1twYXJ0aWNpcGFudF0gPSBiYWxhbmNlc1twYXJ0aWNpcGFudF0uYWRkKHRva2Vucyk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQodG9rZW5zKTsKCiAgICAgICAgLy8gTG9nIHRoZSB0b2tlbnMgcHVyY2hhc2VkIAogICAgICAgIFRyYW5zZmVyKDB4MCwgcGFydGljaXBhbnQsIHRva2Vucyk7CiAgICAgICAgVG9rZW5zQm91Z2h0KHBhcnRpY2lwYW50LCBtc2cudmFsdWUsIHRoaXMuYmFsYW5jZSwgdG9rZW5zLAogICAgICAgICAgICAgdG90YWxTdXBwbHksIHRva2Vuc1BlcktFdGhlcik7CgogICAgICAgIC8vIEtZQyB2ZXJpZmljYXRpb24gcmVxdWlyZWQgYmVmb3JlIHBhcnRpY2lwYW50IGNhbiB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgICAga3ljUmVxdWlyZWRbcGFydGljaXBhbnRdID0gdHJ1ZTsKCiAgICAgICAgLy8gVHJhbnNmZXIgdGhlIGNvbnRyaWJ1dGVkIGV0aGVycyB0byB0aGUgY3Jvd2RzYWxlIHdhbGxldAogICAgICAgIGlmICghd2FsbGV0LnNlbmQobXNnLnZhbHVlKSkgdGhyb3c7CiAgICB9CiAgICBldmVudCBUb2tlbnNCb3VnaHQoYWRkcmVzcyBpbmRleGVkIGJ1eWVyLCB1aW50IGV0aGVycywgCiAgICAgICAgdWludCBuZXdFdGhlckJhbGFuY2UsIHVpbnQgdG9rZW5zLCB1aW50IG5ld1RvdGFsU3VwcGx5LCAKICAgICAgICB1aW50IHRva2Vuc1BlcktFdGhlcik7CgoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gb3BlbkFOWCB0byBmaW5hbGlzZSB0aGUgY3Jvd2RzYWxlIC0gdG8gYWRkaW5nIHRoZSBsb2NrZWQgdG9rZW5zIHRvIAogICAgLy8gdGhpcyBjb250cmFjdCBhbmQgdGhlIHRvdGFsIHN1cHBseQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBmaW5hbGlzZSgpIG9ubHlPd25lciB7CiAgICAgICAgLy8gQ2FuIG9ubHkgZmluYWxpc2UgaWYgcmFpc2VkID4gc29mdCBjYXAgb3IgYWZ0ZXIgdGhlIGVuZCBkYXRlCiAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSA+PSBUT0tFTlNfU09GVF9DQVAgfHwgbm93ID4gRU5EX0RBVEUpOwoKICAgICAgICAvLyBDYW4gb25seSBmaW5hbGlzZSBvbmNlCiAgICAgICAgcmVxdWlyZSghZmluYWxpc2VkKTsKCiAgICAgICAgLy8gQ2FsY3VsYXRlIGFuZCBhZGQgcmVtYWluaW5nIHRva2VucyB0byBsb2NrZWQgYmFsYW5jZXMKICAgICAgICBsb2NrZWRUb2tlbnMuYWRkUmVtYWluaW5nVG9rZW5zKCk7CgogICAgICAgIC8vIEFsbG9jYXRlIGxvY2tlZCBhbmQgcHJlbWluZWQgdG9rZW5zCiAgICAgICAgYmFsYW5jZXNbYWRkcmVzcyhsb2NrZWRUb2tlbnMpXSA9IGJhbGFuY2VzW2FkZHJlc3MobG9ja2VkVG9rZW5zKV0uCiAgICAgICAgICAgIGFkZChsb2NrZWRUb2tlbnMudG90YWxTdXBwbHlMb2NrZWQoKSk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQobG9ja2VkVG9rZW5zLnRvdGFsU3VwcGx5TG9ja2VkKCkpOwoKICAgICAgICAvLyBDYW4gb25seSBmaW5hbGlzZSBvbmNlCiAgICAgICAgZmluYWxpc2VkID0gdHJ1ZTsKICAgIH0KCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBvcGVuQU5YIHRvIGFkZCBwcmVjb21taXRtZW50IGZ1bmRpbmcgdG9rZW4gYmFsYW5jZSBiZWZvcmUgdGhlIGNyb3dkc2FsZQogICAgLy8gY29tbWVuY2VzCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGFkZFByZWNvbW1pdG1lbnQoYWRkcmVzcyBwYXJ0aWNpcGFudCwgdWludCBiYWxhbmNlKSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobm93IDwgU1RBUlRfREFURSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlID4gMCk7CiAgICAgICAgYmFsYW5jZXNbcGFydGljaXBhbnRdID0gYmFsYW5jZXNbcGFydGljaXBhbnRdLmFkZChiYWxhbmNlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChiYWxhbmNlKTsKICAgICAgICBUcmFuc2ZlcigweDAsIHBhcnRpY2lwYW50LCBiYWxhbmNlKTsKICAgIH0KICAgIGV2ZW50IFByZWNvbW1pdG1lbnRBZGRlZChhZGRyZXNzIGluZGV4ZWQgcGFydGljaXBhbnQsIHVpbnQgYmFsYW5jZSk7CgoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gVHJhbnNmZXIgdGhlIGJhbGFuY2UgZnJvbSBvd25lcidzIGFjY291bnQgdG8gYW5vdGhlciBhY2NvdW50LCB3aXRoIEtZQwogICAgLy8gdmVyaWZpY2F0aW9uIGNoZWNrIGZvciB0aGUgY3Jvd2RzYWxlIHBhcnRpY2lwYW50J3MgZmlyc3QgdHJhbnNmZXIKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgLy8gQ2Fubm90IHRyYW5zZmVyIGJlZm9yZSBjcm93ZHNhbGUgZW5kcwogICAgICAgIHJlcXVpcmUoZmluYWxpc2VkKTsKICAgICAgICAvLyBDYW5ub3QgdHJhbnNmZXIgaWYgS1lDIHZlcmlmaWNhdGlvbiBpcyByZXF1aXJlZAogICAgICAgIHJlcXVpcmUoIWt5Y1JlcXVpcmVkW21zZy5zZW5kZXJdKTsKICAgICAgICAvLyBTdGFuZGFyZCB0cmFuc2ZlcgogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF9hbW91bnQpOwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIFNwZW5kZXIgb2YgdG9rZW5zIHRyYW5zZmVyIGFuIGFtb3VudCBvZiB0b2tlbnMgZnJvbSB0aGUgdG9rZW4gb3duZXIncwogICAgLy8gYmFsYW5jZSB0byBhbm90aGVyIGFjY291bnQsIHdpdGggS1lDIHZlcmlmaWNhdGlvbiBjaGVjayBmb3IgdGhlCiAgICAvLyBjcm93ZHNhbGUgcGFydGljaXBhbnQncyBmaXJzdCB0cmFuc2ZlcgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIC8vIENhbm5vdCB0cmFuc2ZlciBiZWZvcmUgY3Jvd2RzYWxlIGVuZHMKICAgICAgICByZXF1aXJlKGZpbmFsaXNlZCk7CiAgICAgICAgLy8gQ2Fubm90IHRyYW5zZmVyIGlmIEtZQyB2ZXJpZmljYXRpb24gaXMgcmVxdWlyZWQKICAgICAgICByZXF1aXJlKCFreWNSZXF1aXJlZFtfZnJvbV0pOwogICAgICAgIC8vIFN0YW5kYXJkIHRyYW5zZmVyRnJvbQogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICB9CgoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gb3BlbkFOWCB0byBLWUMgdmVyaWZ5IHRoZSBwYXJ0aWNpcGFudCdzIGFjY291bnQKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24ga3ljVmVyaWZ5KGFkZHJlc3MgcGFydGljaXBhbnQpIG9ubHlPd25lciB7CiAgICAgICAga3ljUmVxdWlyZWRbcGFydGljaXBhbnRdID0gZmFsc2U7CiAgICAgICAgS3ljVmVyaWZpZWQocGFydGljaXBhbnQpOwogICAgfQogICAgZXZlbnQgS3ljVmVyaWZpZWQoYWRkcmVzcyBpbmRleGVkIHBhcnRpY2lwYW50KTsKCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBBbnkgYWNjb3VudCBjYW4gYnVybiBfZnJvbSdzIHRva2VucyBhcyBsb25nIGFzIHRoZSBfZnJvbSBhY2NvdW50IGhhcyAKICAgIC8vIGFwcHJvdmVkIHRoZSBfYW1vdW50IHRvIGJlIGJ1cm50IHVzaW5nCiAgICAvLyAgIGFwcHJvdmUoMHgwLCBfYW1vdW50KQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBidXJuRnJvbSgKICAgICAgICBhZGRyZXNzIF9mcm9tLAogICAgICAgIHVpbnQgX2Ftb3VudAogICAgKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF9hbW91bnQgICAgICAgICAgICAgICAgICAvLyBGcm9tIGEvYyBoYXMgYmFsYW5jZQogICAgICAgICAgICAmJiBhbGxvd2VkW19mcm9tXVsweDBdID49IF9hbW91bnQgICAgICAgICAgIC8vIFRyYW5zZmVyIGFwcHJvdmVkCiAgICAgICAgICAgICYmIF9hbW91bnQgPiAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9uLXplcm8gdHJhbnNmZXIKICAgICAgICAgICAgJiYgYmFsYW5jZXNbMHgwXSArIF9hbW91bnQgPiBiYWxhbmNlc1sweDBdICAvLyBPdmVyZmxvdyBjaGVjawogICAgICAgICkgewogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF9hbW91bnQpOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVsweDBdID0gYWxsb3dlZFtfZnJvbV1bMHgwXS5zdWIoX2Ftb3VudCk7CiAgICAgICAgICAgIGJhbGFuY2VzWzB4MF0gPSBiYWxhbmNlc1sweDBdLmFkZChfYW1vdW50KTsKICAgICAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX2Ftb3VudCk7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCAweDAsIF9hbW91bnQpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIDF5IGxvY2tlZCBiYWxhbmNlcyBmb3IgYW4gYWNjb3VudAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBiYWxhbmNlT2ZMb2NrZWQxWShhZGRyZXNzIGFjY291bnQpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBsb2NrZWRUb2tlbnMuYmFsYW5jZU9mTG9ja2VkMVkoYWNjb3VudCk7CiAgICB9CgoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gMnkgbG9ja2VkIGJhbGFuY2VzIGZvciBhbiBhY2NvdW50CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZkxvY2tlZDJZKGFkZHJlc3MgYWNjb3VudCkgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGxvY2tlZFRva2Vucy5iYWxhbmNlT2ZMb2NrZWQyWShhY2NvdW50KTsKICAgIH0KCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyAxeSBhbmQgMnkgbG9ja2VkIGJhbGFuY2VzIGZvciBhbiBhY2NvdW50CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZkxvY2tlZChhZGRyZXNzIGFjY291bnQpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBsb2NrZWRUb2tlbnMuYmFsYW5jZU9mTG9ja2VkKGFjY291bnQpOwogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIDF5IGxvY2tlZCB0b3RhbCBzdXBwbHkKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHlMb2NrZWQxWSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICBpZiAoZmluYWxpc2VkKSB7CiAgICAgICAgICAgIHJldHVybiBsb2NrZWRUb2tlbnMudG90YWxTdXBwbHlMb2NrZWQxWSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgIH0KCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyAyeSBsb2NrZWQgdG90YWwgc3VwcGx5CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5TG9ja2VkMlkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKGZpbmFsaXNlZCkgewogICAgICAgICAgICByZXR1cm4gbG9ja2VkVG9rZW5zLnRvdGFsU3VwcGx5TG9ja2VkMlkoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICB9CgoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gMXkgYW5kIDJ5IGxvY2tlZCB0b3RhbCBzdXBwbHkKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHlMb2NrZWQoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKGZpbmFsaXNlZCkgewogICAgICAgICAgICByZXR1cm4gbG9ja2VkVG9rZW5zLnRvdGFsU3VwcGx5TG9ja2VkKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIFVubG9ja2VkIHRvdGFsIHN1cHBseQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseVVubG9ja2VkKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIGlmIChmaW5hbGlzZWQgJiYgdG90YWxTdXBwbHkgPj0gbG9ja2VkVG9rZW5zLnRvdGFsU3VwcGx5TG9ja2VkKCkpIHsKICAgICAgICAgICAgcmV0dXJuIHRvdGFsU3VwcGx5LnN1Yihsb2NrZWRUb2tlbnMudG90YWxTdXBwbHlMb2NrZWQoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIG9wZW5BTlggY2FuIHRyYW5zZmVyIG91dCBhbnkgYWNjaWRlbnRhbGx5IHNlbnQgRVJDMjAgdG9rZW5zCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyQW55RVJDMjBUb2tlbihhZGRyZXNzIHRva2VuQWRkcmVzcywgdWludCBhbW91bnQpCiAgICAgIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpIAogICAgewogICAgICAgIHJldHVybiBFUkMyMEludGVyZmFjZSh0b2tlbkFkZHJlc3MpLnRyYW5zZmVyKG93bmVyLCBhbW91bnQpOwogICAgfQp9'.
	

]
