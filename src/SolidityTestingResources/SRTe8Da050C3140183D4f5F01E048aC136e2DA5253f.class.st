Class {
	#name : #SRTe8Da050C3140183D4f5F01E048aC136e2DA5253f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe8Da050C3140183D4f5F01E048aC136e2DA5253f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBBZGRyZXNzZXMgewoKICAgIC8vMiUKICAgIGFkZHJlc3MgcHVibGljIGJvdW50eTsKICAgIAogICAgLy81JQogICAgYWRkcmVzcyBwdWJsaWMgc3VjY2Vzc0ZlZTsKCiAgICAvLzkzJQogICAgYWRkcmVzcyBwdWJsaWMgYWRkcjE7CgogICAgLy85MyUKICAgIGFkZHJlc3MgcHVibGljIGFkZHIyOwoKICAgIC8vOTMlCiAgICBhZGRyZXNzIHB1YmxpYyBhZGRyMzsKCiAgICAvLzkzJQogICAgYWRkcmVzcyBwdWJsaWMgYWRkcjQ7CgoKICBmdW5jdGlvbiBBZGRyZXNzZXMoKSB7CgogICAgICAvLzIlICAgICAgIC8vT1JJR0lOQUwKICAgICAgYm91bnR5ID0gMHgwMDY0OTUyNDU3OTA1ZUJGQjljMDI5MjIwMEE3NEIxZDc0MTRGMDgxOwogICAgICAgICAgICAgICAgIC8vVEVTVAogICAvLyAgIGJvdW50eSA9IDB4MTYyNjA3OTMyODMxMmNkYjFlNzMxYTkzNGE1NDdjNmQ4MWIzZWUyYzsKICAgICAgCiAgICAgIC8vNSUgICAgICAgLy9PUklHSU5BTAogICAgICBzdWNjZXNzRmVlID0gMHhkQTM5ZTBDZTJhZGY5MzEyOUQwNEY1MzE3NmM3QmZhYWFlOEIwNTFhOwogICAgICAgICAgICAgICAgIC8vVEVTVAogICAgLy8gIHN1Y2Nlc3NGZWUgPSAweGYyODBkYWNmNDdmMzNmNDQyY2Y1ZmE5ZDIwYWJhZWY0YjZlOWNhMTI7CgogICAgLy85MyUgICAgICAgLy9PUklHSU5BTAogICAgICBhZGRyMSA9IDB4MzAwYjg0ODU1OERDMDZFMzI2NThmRkI4RDU5Qzg1OUQwODEyQ0E2QzsKCiAgICAgIC8vOTMlICAgICAgIC8vT1JJR0lOQUwKICAgICAgYWRkcjIgPSAweDQzODhBRDE5MmIwRGFhREJCYWE4NkJlMEFFNzQ5OWI4RDQ0QzVmNzU7CgogICAgICAvLzkzJSAgICAgICAvL09SSUdJTkFMCiAgICAgIGFkZHIzID0gMHg0MEM5RTJEMDgwNzI4OWI0YzI0QjBlMmMzNDI3N0JEZDdGYUNmZDg3OwoKICAgICAgLy85MyUgICAgICAgLy9PUklHSU5BTAogICAgICBhZGRyNCA9IDB4NEUzQjIxOTY4NGI5NTcwRDBkODFDYzEzRTVjMGFBY2FmZTIzMjNCMTsKICAgICAgCgogICAgIC8qIC8vOTMlICAgICAgIC8vVEVTVAogICAgICBhZGRyMSA9IDB4MTYyNjA3OTMyODMxMmNkYjFlNzMxYTkzNGE1NDdjNmQ4MWIzZWUyYzsKCiAgICAgIC8vOTMlICAgICAgIC8vVEVTVAogICAgICBhZGRyMiA9IDB4MTYyNjA3OTMyODMxMmNkYjFlNzMxYTkzNGE1NDdjNmQ4MWIzZWUyYzsKCiAgICAgIC8vOTMlICAgICAgIC8vVEVTVAogICAgICBhZGRyMyA9IDB4MTYyNjA3OTMyODMxMmNkYjFlNzMxYTkzNGE1NDdjNmQ4MWIzZWUyYzsKCiAgICAgIC8vOTMlICAgICAgIC8vVEVTVAogICAgICBhZGRyNCA9IDB4MTYyNjA3OTMyODMxMmNkYjFlNzMxYTkzNGE1NDdjNmQ4MWIzZWUyYzsqLwogIH0KCn0KCmxpYnJhcnkgU2FmZU1hdGggewogICAgCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CiAKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgcmV0dXJuIGM7CiAgfQogCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CiAKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1vZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAlIGI7CiAgICByZXR1cm4gYzsKICB9CiAgCn0KCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IE1pZ3JhdGlvbnMgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIHVpbnQgcHVibGljIGxhc3RfY29tcGxldGVkX21pZ3JhdGlvbjsKCiAgbW9kaWZpZXIgcmVzdHJpY3RlZCgpIHsKICAgIGlmIChtc2cuc2VuZGVyID09IG93bmVyKSBfOwogIH0KCiAgZnVuY3Rpb24gTWlncmF0aW9ucygpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIGZ1bmN0aW9uIHNldENvbXBsZXRlZCh1aW50IGNvbXBsZXRlZCkgcmVzdHJpY3RlZCB7CiAgICBsYXN0X2NvbXBsZXRlZF9taWdyYXRpb24gPSBjb21wbGV0ZWQ7CiAgfQoKICBmdW5jdGlvbiB1cGdyYWRlKGFkZHJlc3MgbmV3X2FkZHJlc3MpIHJlc3RyaWN0ZWQgewogICAgTWlncmF0aW9ucyB1cGdyYWRlZCA9IE1pZ3JhdGlvbnMobmV3X2FkZHJlc3MpOwogICAgdXBncmFkZWQuc2V0Q29tcGxldGVkKGxhc3RfY29tcGxldGVkX21pZ3JhdGlvbik7CiAgfQp9Cgpjb250cmFjdCBPd25hYmxlIHsKICAgIAogIGFkZHJlc3MgcHVibGljIG93bmVyOwogCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7ICAgICAgCiAgICBvd25lciA9IG5ld093bmVyOwogIH0KIAp9Cgpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogICAgCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8vMTguMTAuMjAxNyAyMzo1OSBVVEMKICB1aW50MjU2IGljb19maW5pc2ggPSAxNTA4Mjg0NzQwOwoKICBtb2RpZmllciBpc0ZyZWV6ZSgpIHsKICAgIGlmKG5vdyA8IGljb19maW5pc2gpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpc0ZyZWV6ZSByZXR1cm5zIChib29sKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQogCn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewogCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAvLzE0LjEwLjIwMTcgMjM6NTkgVVRDCiAgdWludDI1NiBpY29fZmluaXNoID0gMTUwODAyNTU0MDsKCiAgbW9kaWZpZXIgaXNGcmVlemUoKSB7CiAgICBpZihub3cgPCBpY29fZmluaXNoKSB7CiAgICAgIHJldmVydCgpOwogICAgfQogICAgXzsKICB9CiAKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpc0ZyZWV6ZSByZXR1cm5zIChib29sKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwogCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKIAogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CiAKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAKICAgIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChfb3duZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQogCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQogCn0KCmNvbnRyYWN0IE1pbnRhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CgogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBib29sIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKICB1aW50MjU2IG1pbnRlZFRva2VucyA9IDA7CgogIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CgogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICBldmVudCBTaG93SW5mbyh1aW50MjU2IF9pbmZvLCBzdHJpbmcgX21lc3NhZ2UpOwoKICBmdW5jdGlvbiBzZXRUb3RhbFN1cHBseSh1aW50MjU2IF9hbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyh1aW50MjU2KSB7CiAgICB0b3RhbFN1cHBseSA9IF9hbW91bnQ7CiAgICByZXR1cm4gdG90YWxTdXBwbHk7CiAgfQoKICBmdW5jdGlvbiBnZXRUb3RhbFRva2VuQ291bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICByZXR1cm4gdG90YWxTdXBwbHk7CiAgfQoKICBtb2RpZmllciBjYW5NaW50KCkgewogICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgcHVibGljIG9ubHlPd25lciB7CiAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogIH0KICAKICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgX3Rva2VucykgY2FuTWludCBvbmx5T3duZXIgcHVibGljIHsKCiAgICByZXF1aXJlKG1pbnRlZFRva2VucyA8IHRvdGFsU3VwcGx5KTsKCiAgICBNaW50KF9hZGRyZXNzLCBfdG9rZW5zKTsKCiAgICBiYWxhbmNlc1tfYWRkcmVzc10gPSBiYWxhbmNlc1tfYWRkcmVzc10uYWRkKF90b2tlbnMpOwoKICAgIG1pbnRlZFRva2VucyA9IG1pbnRlZFRva2Vucy5hZGQoX3Rva2Vucyk7CiAgfQoKICBmdW5jdGlvbiBidXJuVG9rZW5zKGFkZHJlc3MgX2FkZHJlc3MpIG9ubHlPd25lciBwdWJsaWMgewogICAgYmFsYW5jZXNbX2FkZHJlc3NdID0gMDsKICAgIHRvdGFsU3VwcGx5ID0gMDsKICAgIG1pbnRlZFRva2VucyA9IDA7CiAgfQoKICBmdW5jdGlvbiBidXJuRmluaXNoKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICB0b3RhbFN1cHBseSA9IG1pbnRlZFRva2VuczsKICB9Cgp9Cgpjb250cmFjdCBTaW5nbGVUb2tlbkNvaW4gaXMgTWludGFibGVUb2tlbiB7CiAgICAKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJTdGFydCBtaW5pbmciOwogICAgCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJTVE0iOwogICAgCiAgICB1aW50MzIgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMjsKICAgIAp9Cgpjb250cmFjdCBXcmFwcGVyT3JhY2xpemUgewogICAgZnVuY3Rpb24gdXBkYXRlKHN0cmluZyBkYXRhc291cmNlLCBzdHJpbmcgYXJnKSBwYXlhYmxlOwogICAgZnVuY3Rpb24gdXBkYXRlKHVpbnQgdGltZXN0YW1wLCBzdHJpbmcgZGF0YXNvdXJjZSwgc3RyaW5nIGFyZykgcGF5YWJsZTsKICAgIGZ1bmN0aW9uIGdldFdyYXBwZXJCYWxhbmNlKCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGdldFdyYXBwZXJEYXRhKCkgY29uc3RhbnQgcmV0dXJucyhieXRlczMyKTsKICAgIGZ1bmN0aW9uIGdldFByaWNlKHN0cmluZyBkYXRhc291cmNlKSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpOwogICAgZnVuY3Rpb24oKSBleHRlcm5hbCBwYXlhYmxlOwp9Cgpjb250cmFjdCBDcm93ZHNhbGUgaXMgT3duYWJsZSB7CgogIHN0cmluZyBwdWJsaWMgRVRIVVNEOwoKICBldmVudCBTaG93UHJpY2Uoc3RyaW5nIHByaWNlKTsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBTaW5nbGVUb2tlbkNvaW4gcHVibGljIHRva2VuID0gbmV3IFNpbmdsZVRva2VuQ29pbigpOwoKICAgIEFkZHJlc3NlcyBwcml2YXRlIGFkZHJlc3NlcyA9IG5ldyBBZGRyZXNzZXMoKTsKCiAgICBXcmFwcGVyT3JhY2xpemUgcHJpdmF0ZSB3cmFwcGVyID0gV3JhcHBlck9yYWNsaXplKDB4ZkM0ODRjNjZkYUU0NjRDQzYwNTVkN2E0NzgyRWM4NzYxZGM5ODQyRik7CgogICAgdWludDI1NiBwcml2YXRlIGljb19zdGFydDsKICAgIHVpbnQyNTYgcHJpdmF0ZSBpY29fZmluaXNoOwoKICAgIHVpbnQyNTYgcHJpdmF0ZSByYXRlOwoKICAgIHVpbnQyNTYgcHJpdmF0ZSBkZWNpbWFsczsKCiAgICB1aW50MjU2IHByaXZhdGUgdGF4OwoKICAgIC8vVGltZS1iYXNlZCBCb251cyBQcm9ncmFtCiAgICB1aW50MjU2IHByaXZhdGUgZmlyc3RCb251c1BoYXNlOwogICAgdWludDI1NiBwcml2YXRlIGZpcnN0RXh0cmFCb251czsKCiAgICB1aW50MjU2IHByaXZhdGUgc2Vjb25kQm9udXNQaGFzZTsKICAgIHVpbnQyNTYgcHJpdmF0ZSBzZWNvbmRFeHRyYUJvbnVzOwoKICAgIHVpbnQyNTYgcHJpdmF0ZSB0aGlyZEJvbnVzUGhhc2U7CiAgICB1aW50MjU2IHByaXZhdGUgdGhpcmRFeHRyYUJvbnVzOwoKICAgIHVpbnQyNTYgcHJpdmF0ZSBmb3VyQm9udXNQaGFzZTsKICAgIHVpbnQyNTYgcHJpdmF0ZSBmb3VyRXh0cmFCb251czsKCiAgICAvL1dpdGhkcm93IFBoYXNlcwogICAgYm9vbCBwcml2YXRlIGZpcnN0V2l0aGRyb3dQaGFzZTsKICAgIGJvb2wgcHJpdmF0ZSBzZWNvbmRXaXRoZHJvd1BoYXNlOwogICAgYm9vbCBwcml2YXRlIHRoaXJkV2l0aGRyb3dQaGFzZTsKICAgIGJvb2wgcHJpdmF0ZSBmb3VyV2l0aGRyb3dQaGFzZTsKCiAgICB1aW50MjU2IHByaXZhdGUgZmlyc3RXaXRoZHJvd0Ftb3VudDsKICAgIHVpbnQyNTYgcHJpdmF0ZSBzZWNvbmRXaXRoZHJvd0Ftb3VudDsKICAgIHVpbnQyNTYgcHJpdmF0ZSB0aGlyZFdpdGhkcm93QW1vdW50OwogICAgdWludDI1NiBwcml2YXRlIGZvdXJXaXRoZHJvd0Ftb3VudDsKCiAgICB1aW50MjU2IHByaXZhdGUgdG90YWxFVEg7CgogICAgdWludDI1NiBwcml2YXRlIHRvdGFsQW1vdW50OwoKICAgIGJvb2wgcHJpdmF0ZSBpbml0aWFsaXplID0gZmFsc2U7CiAgICAKICAgIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKICAgIC8vU3RvcmFnZSBmb3IgSUNPIEJ1eWVycyBFVEgKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIGljb19idXllcnNfZXRoOwoKICAgIC8vU3RvcmFnZSBmb3IgSUNPIEJ1eWVycyBUb2tlbgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgaWNvX2J1eWVyc190b2tlbjsKCiAgICBhZGRyZXNzW10gcHJpdmF0ZSBpbnZlc3RvcnM7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IGJ5dGVzMzIpIHByaXZhdGUgcHJpdmlsZWdlZFdhbGxldHM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBtYW51YWxBZGRyZXNzZXM7CgogICAgYWRkcmVzc1tdIHByaXZhdGUgbWFudWFsQWRkcmVzc2VzQ291bnQ7CgogICAgYWRkcmVzc1tdIHByaXZhdGUgcHJpdmlsZWdlZFdhbGxldHNDb3VudDsKCiAgICBieXRlczMyIHByaXZhdGUgZyA9ICJncmFudGVkIjsKCiAgICBieXRlczMyIHByaXZhdGUgciA9ICJyZXZvcmtlZCI7CgogICAgdWludDI1NiBwcml2YXRlIHNvbGRUb2tlbnM7CiAgICB1aW50MjU2IHByaXZhdGUgbWluY3VwOwoKICAgIHVpbnQyNTYgcHJpdmF0ZSBtaW5QcmljZTsKCiAgICBldmVudCBTaG93SW5mbyh1aW50MjU2IF9pbmZvKTsKICAgIGV2ZW50IFNob3dJbmZvU3RyKHN0cmluZyBfaW5mbyk7CiAgICBldmVudCBTaG93SW5mb0Jvb2woYm9vbCBfaW5mbyk7CgogICAgZnVuY3Rpb24gQ3Jvd2RzYWxlKCkgewoKICAgICAgLy9zZXQgY2FsY3VsYXRlIHJhdGUgZnJvbSBVU0QKICAgICAgcmF0ZSA9IDM1NDYwOTkyOTA3ODAxNDE7IC8vMC4wMDAzIEVUSCAvL3RlbXAKCiAgICAgIGRlY2ltYWxzID0gMzU0NjA5OTI5MDc4MDE7IC8vIDAuMDAwMDAwMyBFVEggLy8gMiBkZWNpbWFscwoKICAgICAgdGF4ID0gMzYwMDAwMDAwMDAwMDAwMDA7IC8vdGF4ICYmIG1pbmltdW0gcHJpY2UgfjEwJAoKICAgICAgLy9taW5QcmljZSA9IGRlY2ltYWxzICsgdGF4OyAvLyB+MTAkCgogICAgICAvLzE4LjA5LjIwMTcgMTU6MDAgVVRDICgxNTA1NzQ2ODAwKQogICAgICBpY29fc3RhcnQgPSAxNTA1NzQ2ODAwOwoKICAgICAgLy8xNy4xMC4yMDE3IDIzOjU5IFVUQyAoMTUwODI4NDc0MCkKICAgICAgaWNvX2ZpbmlzaCA9IDE1MDgyODQ3NDA7CgogICAgICB0b3RhbEFtb3VudCA9IDEwMjAwMDAwMDA7CgogICAgICAvLyA1MDAgMDAwIFNUTSB3aXRoIDIgZGVjaW1hbHMKICAgICAgbWluY3VwID0gNTAwMDAwMDA7CiAgICAgIAogICAgICBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCiAgICAgIHNldFRvdGFsU3VwcGx5KCk7CgogICAgICAvL1RpbWUtQmFzZWQgQm9udXMgUGhhc2UKICAgICAgZmlyc3RCb251c1BoYXNlID0gaWNvX3N0YXJ0LmFkZCgyNCBob3Vycyk7CiAgICAgIGZpcnN0RXh0cmFCb251cyA9IDI1OwoKICAgICAgc2Vjb25kQm9udXNQaGFzZSA9IGljb19zdGFydC5hZGQoMTY4IGhvdXJzKTsKICAgICAgc2Vjb25kRXh0cmFCb251cyA9IDE1OwoKICAgICAgdGhpcmRCb251c1BoYXNlID0gaWNvX3N0YXJ0LmFkZCgzMzYgaG91cnMpOwogICAgICB0aGlyZEV4dHJhQm9udXMgPSAxMDsKCiAgICAgIGZvdXJCb251c1BoYXNlID0gaWNvX3N0YXJ0LmFkZCg0ODAgaG91cnMpOwogICAgICBmb3VyRXh0cmFCb251cyA9IDU7CgogICAgICAvL1dpdGhkcm93IFBoYXNlcwogICAgICBmaXJzdFdpdGhkcm93UGhhc2UgPSBmYWxzZTsKICAgICAgc2Vjb25kV2l0aGRyb3dQaGFzZSA9IGZhbHNlOwogICAgICB0aGlyZFdpdGhkcm93UGhhc2UgPSBmYWxzZTsKICAgICAgZm91cldpdGhkcm93UGhhc2UgPSBmYWxzZTsKCiAgICAgIGZpcnN0V2l0aGRyb3dBbW91bnQgPSA1MDAwMDAwMDsKICAgICAgc2Vjb25kV2l0aGRyb3dBbW91bnQgPSAyMDAwMDAwMDA7CiAgICAgIHRoaXJkV2l0aGRyb3dBbW91bnQgPSA1MDAwMDAwMDA7CiAgICAgIGZvdXJXaXRoZHJvd0Ftb3VudCA9IDEwMjAwMDAwMDA7CgogICAgICB0b3RhbEVUSCA9IDA7CgogICAgICBzb2xkVG9rZW5zID0gMDsKCiAgICAgIHByaXZpbGVnZWRXYWxsZXRzQ291bnQucHVzaChtc2cuc2VuZGVyKTsKICAgICAgcHJpdmlsZWdlZFdhbGxldHNbbXNnLnNlbmRlcl0gPSBnOwoKICAgIH0KCiAgICAgIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICAgICAgcmVxdWlyZSghbWludGluZ0ZpbmlzaGVkKTsKICAgICAgICBfOwogICAgICB9CgogICAgZnVuY3Rpb24oKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgICAgbWludCgpOwogICAgfQoKICBmdW5jdGlvbiBieXRlc1RvVUludChieXRlczMyIHYpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmV0KSB7CiAgICAgICAgaWYgKHYgPT0gMHgwKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KCiAgICAgICAgdWludCBkaWdpdDsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgMzI7IGkrKykgewogICAgICAgICAgICBkaWdpdCA9IHVpbnQoKHVpbnQodikgLyAoMiAqKiAoOCAqICgzMSAtIGkpKSkpICYgMHhmZik7CiAgICAgICAgICAgIGlmIChkaWdpdCA9PSAwIHx8IGRpZ2l0ID09IDQ2KSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChkaWdpdCA8IDQ4IHx8IGRpZ2l0ID4gNTcpIHsKICAgICAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldCAqPSAxMDsKICAgICAgICAgICAgcmV0ICs9IChkaWdpdCAtIDQ4KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJldDsKICAgIH0KCiAgZnVuY3Rpb24gY2FsY3VsYXRlUmF0ZSgpIHB1YmxpYyBwYXlhYmxlIHJldHVybnModWludDI1NikgewogICAgYnl0ZXMzMiByZXN1bHQgPSBnZXRXcmFwcGVyRGF0YSgpOwogICAgdWludDI1NiB1c2QgPSBieXRlc1RvVUludChyZXN1bHQpOwoKICAgIHVpbnQyNTYgcHJpY2UgPSAxIGV0aGVyIC8gdXNkOyAvL3ByaWNlIGZvciAxIFNUTQoKICAgIHJldHVybiBwcmljZTsKICB9CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlV2l0aGRyb3coKSBwcml2YXRlIHsKICAgICAgaWYgKCFmaXJzdFdpdGhkcm93UGhhc2UgJiYgc29sZFRva2VucyA+PSBmaXJzdFdpdGhkcm93QW1vdW50ICYmIHNvbGRUb2tlbnMgPCBzZWNvbmRXaXRoZHJvd0Ftb3VudCkgewogICAgICAgIHNlbmRUb093bmVycyh0aGlzLmJhbGFuY2UpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICghc2Vjb25kV2l0aGRyb3dQaGFzZSAmJiBzb2xkVG9rZW5zID49IHNlY29uZFdpdGhkcm93QW1vdW50ICYmIHNvbGRUb2tlbnMgPCB0aGlyZFdpdGhkcm93QW1vdW50KSB7CiAgICAgICAgICBzZW5kVG9Pd25lcnModGhpcy5iYWxhbmNlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCF0aGlyZFdpdGhkcm93UGhhc2UgJiYgc29sZFRva2VucyA+PSB0aGlyZFdpdGhkcm93QW1vdW50ICYmIHNvbGRUb2tlbnMgPCBmb3VyV2l0aGRyb3dBbW91bnQpIHsKICAgICAgICAgICAgc2VuZFRvT3duZXJzKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIWZvdXJXaXRoZHJvd1BoYXNlICYmIHNvbGRUb2tlbnMgPj0gZm91cldpdGhkcm93QW1vdW50KSB7CiAgICAgICAgICAgICAgc2VuZFRvT3duZXJzKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBtb2RpZmllciBpc0luaXRpYWxpemUoKSB7CiAgICAgIHJlcXVpcmUoIWluaXRpYWxpemUpOwogICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFRvdGFsU3VwcGx5KCkgcHJpdmF0ZSBpc0luaXRpYWxpemUgb25seU93bmVyIHJldHVybnModWludDI1NikgewogICAgICBpbml0aWFsaXplID0gdHJ1ZTsKICAgICAgcmV0dXJuIHRva2VuLnNldFRvdGFsU3VwcGx5KHRvdGFsQW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZW5kVG9BZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgX3Rva2VucykgY2FuTWludCBwdWJsaWMgewoKICAgICAgaWYgKGdyYW50ZWRXYWxsZXRzKG1zZy5zZW5kZXIpID09IGZhbHNlKSB7CiAgICAgICAgcmV2ZXJ0KCk7ICAgICAgCiAgICAgIH0KCiAgICAgIFNob3dJbmZvKF90b2tlbnMpOwoKICAgICAgdWludDI1NiBjdXJyZW50VG9rZW5zID0gX3Rva2VuczsKCiAgICAgIHVpbnQyNTYgdGltZUJvbnVzID0gY2FsY3VsYXRlQm9udXNGb3JIb3VycyhjdXJyZW50VG9rZW5zKTsKCiAgICAgIHVpbnQyNTYgYWxsVG9rZW5zID0gY3VycmVudFRva2Vucy5hZGQodGltZUJvbnVzKTsgICAKCiAgICAgIHRva2VuLmFwcHJvdmUoX2FkZHJlc3MsIHRoaXMsIGFsbFRva2Vucyk7ICAgICAgCgogICAgICBzYXZlSW5mb0Fib3V0SW52ZXN0b3JzKF9hZGRyZXNzLCAwLCBhbGxUb2tlbnMsIHRydWUpOyAgICAgICAgIAoKICAgICAgdG9rZW4ubWludChfYWRkcmVzcywgYWxsVG9rZW5zKTsKCiAgICAgIHNvbGRUb2tlbnMgPSBzb2xkVG9rZW5zICsgYWxsVG9rZW5zOwogICAgICBjYWxjdWxhdGVXaXRoZHJvdygpOwogICAgfQoKICAgIG1vZGlmaWVyIGlzUmVmdW5kKCkgewogICAgICBpZiAobXNnLnZhbHVlIDwgdGF4KSB7CiAgICAgICAgcmVmdW5kKG1zZy52YWx1ZSk7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICAgIH0KICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBncmFudGVkV2FsbGV0cyhhZGRyZXNzIF9hZGRyZXNzKSBwcml2YXRlIHJldHVybnMoYm9vbCkgewogICAgICBpZiAocHJpdmlsZWdlZFdhbGxldHNbX2FkZHJlc3NdID09IGcpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgbW9kaWZpZXIgaXNJQ09GaW5pc2hlZCgpIHsKICAgICAgaWYgKG5vdyA+IGljb19maW5pc2gpIHsKICAgICAgICBmaW5pc2hNaW50aW5nKCk7CiAgICAgICAgcmVmdW5kKG1zZy52YWx1ZSk7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICAgIH0KICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb2tlbnMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHRva2VuLmdldFRvdGFsVG9rZW5Db3VudCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByaXZlbGVnZWRXYWxsZXQoYWRkcmVzcyBfYWRkcmVzcykgcHVibGljIG9ubHlPd25lciByZXR1cm5zKGJvb2wpIHsKICAgICAgaWYgKHByaXZpbGVnZWRXYWxsZXRzQ291bnQubGVuZ3RoID09IDIpIHsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQoKICAgICAgaWYgKHByaXZpbGVnZWRXYWxsZXRzW19hZGRyZXNzXSAhPSBnICYmIHByaXZpbGVnZWRXYWxsZXRzW19hZGRyZXNzXSAhPSByKSB7CiAgICAgICAgcHJpdmlsZWdlZFdhbGxldHNDb3VudC5wdXNoKF9hZGRyZXNzKTsKICAgICAgfQoKICAgICAgcHJpdmlsZWdlZFdhbGxldHNbX2FkZHJlc3NdID0gZzsKCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBvbmx5T3duZXIgewoKICAgICAgcmVtb3ZlUHJpdmVsZWdlZFdhbGxldChtc2cuc2VuZGVyKTsKICAgICAgc2V0UHJpdmVsZWdlZFdhbGxldChfYWRkcmVzcyk7CgogICAgICB0cmFuc2Zlck93bmVyc2hpcChfYWRkcmVzcyk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlUHJpdmVsZWdlZFdhbGxldChhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgaWYgKHByaXZpbGVnZWRXYWxsZXRzW19hZGRyZXNzXSA9PSBnKSB7CiAgICAgICAgcHJpdmlsZWdlZFdhbGxldHNbX2FkZHJlc3NdID0gcjsKICAgICAgICBkZWxldGUgcHJpdmlsZWdlZFdhbGxldHNDb3VudFswXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQogICAgfQoKICAgIC8vb25seSBmb3IgZGVtb25zdHJhdGUgVGVzdCBWZXJzaW9uCiAgICBmdW5jdGlvbiBzZXRJQ09EYXRlKHVpbnQyNTYgX3RpbWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICBpY29fc3RhcnQgPSBfdGltZTsKICAgICAgU2hvd0luZm8oX3RpbWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldElDT0RhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHJldHVybiBpY29fc3RhcnQ7CiAgICB9CgogICAgZnVuY3Rpb24gbWludCgpIHB1YmxpYyBpc1JlZnVuZCBjYW5NaW50IGlzSUNPRmluaXNoZWQgcGF5YWJsZSB7CgogICAgICByYXRlID0gY2FsY3VsYXRlUmF0ZSgpOwoKICAgICAgZGVjaW1hbHMgPSByYXRlIC8gMTAwOyAvL3ByaWNlIGZvciAwLjAxIFNUTQoKICAgICAgdWludDI1NiByZW1haW5kZXIgPSBtc2cudmFsdWUubW9kKGRlY2ltYWxzKTsKCiAgICAgIHVpbnQyNTYgZXRoID0gbXNnLnZhbHVlLnN1YihyZW1haW5kZXIpOwoKICAgICAgaWYgKHJlbWFpbmRlciAhPSAwKSB7CiAgICAgICAgcmVmdW5kKHJlbWFpbmRlcik7CiAgICAgIH0KCiAgICAgIHRvdGFsRVRIID0gdG90YWxFVEggKyBldGg7CgogICAgICB1aW50IGN1cnJlbnRSYXRlID0gcmF0ZSAvIDEwMDsgLy8yIGRlY2ltYWxzCgogICAgICB1aW50MjU2IHRva2VucyA9IGV0aC5kaXYoY3VycmVudFJhdGUpOwogICAgICB1aW50MjU2IHRpbWVCb251cyA9IGNhbGN1bGF0ZUJvbnVzRm9ySG91cnModG9rZW5zKTsKCiAgICAgIHVpbnQyNTYgYWxsVG9rZW5zID0gdG9rZW5zLmFkZCh0aW1lQm9udXMpICsgMTAwOyAvLyArMTAwIC0gb3JhY2xpemUgVGF4CgogICAgICBzYXZlSW5mb0Fib3V0SW52ZXN0b3JzKG1zZy5zZW5kZXIsIGV0aCwgYWxsVG9rZW5zLCBmYWxzZSk7CgogICAgICB0b2tlbi5taW50KG1zZy5zZW5kZXIsIGFsbFRva2Vucyk7CgogICAgICBzb2xkVG9rZW5zID0gc29sZFRva2VucyArIGFsbFRva2VuczsKICAgICAgY2FsY3VsYXRlV2l0aGRyb3coKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYXZlSW5mb0Fib3V0SW52ZXN0b3JzKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBfdG9rZW5zLCBib29sIF9pc01hbnVhbCkgcHJpdmF0ZSB7CgogICAgICBpZiAoIV9pc01hbnVhbCkgewogICAgICAgIGlmIChpY29fYnV5ZXJzX3Rva2VuW19hZGRyZXNzXSA9PSAwKSB7CiAgICAgICAgICBpbnZlc3RvcnMucHVzaChfYWRkcmVzcyk7CiAgICAgICAgfQoKICAgICAgICAvLyBTdG9yZSBFVEggb2YgSW52ZXN0b3IKICAgICAgICBpY29fYnV5ZXJzX2V0aFtfYWRkcmVzc10gPSBpY29fYnV5ZXJzX2V0aFtfYWRkcmVzc10uYWRkKF9hbW91bnQpOwoKICAgICAgICAvLyBTdG9yZSBUb2tlbiBvZiBJbnZlc3RvcgogICAgICAgIGljb19idXllcnNfdG9rZW5bX2FkZHJlc3NdID0gaWNvX2J1eWVyc190b2tlbltfYWRkcmVzc10uYWRkKF90b2tlbnMpOwogICAgICAKICAgICAgfSBlbHNlIHsKICAgICAgICBpZihtYW51YWxBZGRyZXNzZXNbX2FkZHJlc3NdID09IDApIHsKICAgICAgICAgIG1hbnVhbEFkZHJlc3Nlc0NvdW50LnB1c2goX2FkZHJlc3MpOwogICAgICAgIH0KCiAgICAgICAgbWFudWFsQWRkcmVzc2VzW19hZGRyZXNzXSA9IG1hbnVhbEFkZHJlc3Nlc1tfYWRkcmVzc10uYWRkKF90b2tlbnMpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TWFudWFsQnlBZGRyZXNzKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIG1hbnVhbEFkZHJlc3Nlc1tfYWRkcmVzc107CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TWFudWFsSW52ZXN0b3JzQ291bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHJldHVybiBtYW51YWxBZGRyZXNzZXNDb3VudC5sZW5ndGg7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TWFudWFsQWRkcmVzcyh1aW50IF9pbmRleCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcykgewogICAgICByZXR1cm4gbWFudWFsQWRkcmVzc2VzQ291bnRbX2luZGV4XTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgIGlmKG1pbnRpbmdGaW5pc2hlZCkgewogICAgICAgIHJldmVydCgpOwogICAgICB9CgogICAgICB0b2tlbi5maW5pc2hNaW50aW5nKCk7CgoKICAgICAgU2hvd0luZm9Cb29sKG1pbnRpbmdGaW5pc2hlZCk7CiAgICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICAgIFNob3dJbmZvQm9vbChtaW50aW5nRmluaXNoZWQpOwogICAgICAKICAgICAgaWYgKHNvbGRUb2tlbnMgPCBtaW5jdXApIHsKICAgICAgICBpZihpbnZlc3RvcnMubGVuZ3RoICE9IDApIHsKICAgICAgICAgIGZvciAodWludDI1NiBpPTA7IGkgPCBpbnZlc3RvcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYWRkcmVzcyBhZGRyID0gaW52ZXN0b3JzW2ldOyAgCiAgICAgICAgICAgIHRva2VuLmJ1cm5Ub2tlbnMoYWRkcik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKG1hbnVhbEFkZHJlc3Nlc0NvdW50Lmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICBmb3IgKHVpbnQyNTYgaj0wOyBqIDwgbWFudWFsQWRkcmVzc2VzQ291bnQubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgYWRkcmVzcyBtYW51YWxBZGRyID0gbWFudWFsQWRkcmVzc2VzQ291bnRbal07CiAgICAgICAgICAgIHRva2VuLmJ1cm5Ub2tlbnMobWFudWFsQWRkcik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0b2tlbi5idXJuRmluaXNoKCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RmluaXNoU3RhdHVzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICByZXR1cm4gbWludGluZ0ZpbmlzaGVkOwogICAgfQoKICAgIGZ1bmN0aW9uIG1hbnVhbFJlZnVuZCgpIHB1YmxpYyB7CiAgICAgIGlmIChtaW50aW5nRmluaXNoZWQpIHsKICAgICAgICBpZihpY29fYnV5ZXJzX2V0aFttc2cuc2VuZGVyXSAhPSAwKSB7CiAgICAgICAgICB1aW50MjU2IGFtb3VudCA9IGljb19idXllcnNfZXRoW21zZy5zZW5kZXJdOwogICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQpOwogICAgICAgICAgaWNvX2J1eWVyc19ldGhbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICAgIH0KICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kKHVpbnQyNTYgX2Ftb3VudCkgcHJpdmF0ZSB7CiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgX2Ftb3VudCkgcHJpdmF0ZSB7CiAgICAgIF9hZGRyZXNzLnRyYW5zZmVyKF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRva2Vuc01hbnVhbChhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHJldHVybiBtYW51YWxBZGRyZXNzZXNbX2FkZHJlc3NdOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUJvbnVzRm9ySG91cnModWludDI1NiBfdG9rZW5zKSBwcml2YXRlIHJldHVybnModWludDI1NikgewoKICAgICAgLy9DYWxjdWxhdGUgZm9yIGZpcnN0IGJvbnVzIHByb2dyYW0KICAgICAgaWYgKG5vdyA+PSBpY29fc3RhcnQgJiYgbm93IDw9IGZpcnN0Qm9udXNQaGFzZSApIHsKICAgICAgICByZXR1cm4gX3Rva2Vucy5tdWwoZmlyc3RFeHRyYUJvbnVzKS5kaXYoMTAwKTsKICAgICAgfQoKICAgICAgLy9DYWxjdWxhdGUgZm9yIHNlY29uZCBib251cyBwcm9ncmFtCiAgICAgIGlmIChub3cgPiBmaXJzdEJvbnVzUGhhc2UgJiYgbm93IDw9IHNlY29uZEJvbnVzUGhhc2UgKSB7CiAgICAgICAgcmV0dXJuIF90b2tlbnMubXVsKHNlY29uZEV4dHJhQm9udXMpLmRpdigxMDApOwogICAgICB9CgogICAgICAvL0NhbGN1bGF0ZSBmb3IgdGhpcmQgYm9udXMgcHJvZ3JhbQogICAgICBpZiAobm93ID4gc2Vjb25kQm9udXNQaGFzZSAmJiBub3cgPD0gdGhpcmRCb251c1BoYXNlICkgewogICAgICAgIHJldHVybiBfdG9rZW5zLm11bCh0aGlyZEV4dHJhQm9udXMpLmRpdigxMDApOwogICAgICB9CgogICAgICAvL0NhbGN1bGF0ZSBmb3IgZm91ciBib251cyBwcm9ncmFtCiAgICAgIGlmIChub3cgPiB0aGlyZEJvbnVzUGhhc2UgJiYgbm93IDw9IGZvdXJCb251c1BoYXNlICkgewogICAgICAgIHJldHVybiBfdG9rZW5zLm11bChmb3VyRXh0cmFCb251cykuZGl2KDEwMCk7CiAgICAgIH0KCiAgICAgIHJldHVybiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbmRUb093bmVycyh1aW50MjU2IF9hbW91bnQpIHByaXZhdGUgewogICAgICB1aW50MjU2IHR3b1BlcmNlbnQgPSBfYW1vdW50Lm11bCgyKS5kaXYoMTAwKTsKICAgICAgdWludDI1NiBmaXZlUGVyY2VudCA9IF9hbW91bnQubXVsKDUpLmRpdigxMDApOwogICAgICB1aW50MjU2IG5pbmVUaHJlZVBlcmNlbnQgPSBfYW1vdW50Lm11bCg5MykuZGl2KDEwMCk7CgovLyAtLS0tLS0tLS0tQUREUkVTU0VTIEZPUiBQUk9EVUNUSU9OLS0tLS0tLS0tLS0tLQoKICAgICAgLy9OaW5lVGhyZWUgUGVyY2VudAogICAgICBhZGRyZXNzZXMuYWRkcjEoKS50cmFuc2ZlcihuaW5lVGhyZWVQZXJjZW50KTsKICAgICAgYWRkcmVzc2VzLmFkZHIyKCkudHJhbnNmZXIobmluZVRocmVlUGVyY2VudCk7CiAgICAgIGFkZHJlc3Nlcy5hZGRyMygpLnRyYW5zZmVyKG5pbmVUaHJlZVBlcmNlbnQpOwogICAgICBhZGRyZXNzZXMuYWRkcjQoKS50cmFuc2ZlcihuaW5lVGhyZWVQZXJjZW50KTsKCiAgICAgIGlmICghZmlyc3RXaXRoZHJvd1BoYXNlKSB7CiAgICAgICAgYWRkcmVzc2VzLmFkZHIxKCkudHJhbnNmZXIobmluZVRocmVlUGVyY2VudCk7CiAgICAgICAgZmlyc3RXaXRoZHJvd1BoYXNlID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXNlY29uZFdpdGhkcm93UGhhc2UpIHsKICAgICAgICAgIGFkZHJlc3Nlcy5hZGRyMigpLnRyYW5zZmVyKG5pbmVUaHJlZVBlcmNlbnQpOyAgIAogICAgICAgICAgc2Vjb25kV2l0aGRyb3dQaGFzZSA9IHRydWU7ICAgICAgIAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoIXRoaXJkV2l0aGRyb3dQaGFzZSkgewogICAgICAgICAgICBhZGRyZXNzZXMuYWRkcjMoKS50cmFuc2ZlcihuaW5lVGhyZWVQZXJjZW50KTsKICAgICAgICAgICAgdGhpcmRXaXRoZHJvd1BoYXNlID0gdHJ1ZTsgICAgICAgICAgICAgICAgCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIWZvdXJXaXRoZHJvd1BoYXNlKSB7CiAgICAgICAgICAgICAgYWRkcmVzc2VzLmFkZHI0KCkudHJhbnNmZXIobmluZVRocmVlUGVyY2VudCk7CiAgICAgICAgICAgICAgZm91cldpdGhkcm93UGhhc2UgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKCiAgICAgIC8vRml2ZSBQZXJjZW50CiAgICAgIGFkZHJlc3Nlcy5zdWNjZXNzRmVlKCkudHJhbnNmZXIoZml2ZVBlcmNlbnQpOwogICAgICAKICAgICAgLy9Ud28gUGVyY2VudAogICAgICBhZGRyZXNzZXMuYm91bnR5KCkudHJhbnNmZXIodHdvUGVyY2VudCk7CiAgICAgIAogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJhbGFuY2VDb250cmFjdCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTb2xkVG9rZW4oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHJldHVybiBzb2xkVG9rZW5zOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEludmVzdG9yc1Rva2VucyhhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHJldHVybiBpY29fYnV5ZXJzX3Rva2VuW19hZGRyZXNzXTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRJbnZlc3RvcnNFVEgoYWRkcmVzcyBfYWRkcmVzcykgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gaWNvX2J1eWVyc19ldGhbX2FkZHJlc3NdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEludmVzdG9ycygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIGludmVzdG9ycy5sZW5ndGg7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SW52ZXN0b3JCeVZhbHVlKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIGljb19idXllcnNfZXRoW19hZGRyZXNzXTsKICAgIH0KCiAgICAvL29ubHkgZm9yIHRlc3QgdmVyc2lvbgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIHJldHVybnMoYm9vbCkgewogICAgICByZXR1cm4gdG9rZW4udHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEludmVzdG9yQnlJbmRleCh1aW50MjU2IF9pbmRleCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcykgewogICAgICByZXR1cm4gaW52ZXN0b3JzW19pbmRleF07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TGVmdFRva2VuKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICBpZih0b2tlbi50b3RhbFN1cHBseSgpICE9IDApIHsKICAgICAgICByZXR1cm4gdG9rZW4udG90YWxTdXBwbHkoKSAtIHNvbGRUb2tlbnM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHNvbGRUb2tlbnM7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb3RhbFRva2VuKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gdG9rZW4udG90YWxTdXBwbHkoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb3RhbEVUSCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIHRvdGFsRVRIOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRQcmljZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgCiAgICAgIHVpbnQyNTYgc2Vjb25kRGlzY291bnQgPSBjYWxjdWxhdGVCb251c0ZvckhvdXJzKHJhdGUpOwoKICAgICAgdWludDI1NiBpbnZlc3RvckRpc2NvdW50ID0gcmF0ZS5zdWIoc2Vjb25kRGlzY291bnQpOwoKICAgICAgcmV0dXJuIGludmVzdG9yRGlzY291bnQgKiAxMDsgLy9taW5pbXVtIDEwJCAvL34xMFNUTQogICAgfQoKICAgIGZ1bmN0aW9uIGdldENvbnRyYWN0QWRkcmVzcygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0T3duZXIoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKSB7CiAgICAgIHJldHVybiBvd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBzZW5kT3JhY2xlRGF0YSgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBpZiAobXNnLnZhbHVlICE9IDApIHsKICAgICAgICAgICAgd3JhcHBlci50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgICAgIH0KICAgICAgCiAgICAgIHdyYXBwZXIudXBkYXRlKCJVUkwiLCAianNvbihodHRwczovL2FwaS5rcmFrZW4uY29tLzAvcHVibGljL1RpY2tlcj9wYWlyPUVUSFVTRCkucmVzdWx0LlhFVEhaVVNELmMuMCIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFF1ZXJ5UHJpY2Uoc3RyaW5nIGRhdGFzb3VyY2UpIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gd3JhcHBlci5nZXRQcmljZShkYXRhc291cmNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja1dyYXBwZXJCYWxhbmNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gd3JhcHBlci5nZXRXcmFwcGVyQmFsYW5jZSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFdyYXBwZXJEYXRhKCkgY29uc3RhbnQgcmV0dXJucyhieXRlczMyKSB7CiAgICAgIHJldHVybiB3cmFwcGVyLmdldFdyYXBwZXJEYXRhKCk7CiAgICB9Cn0='.
	

]
