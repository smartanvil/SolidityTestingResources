Class {
	#name : #SRT8227cf5171bfdafad9110775c4dce2cc5897b5dd,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8227cf5171bfdafad9110775c4dce2cc5897b5dd >> base64 [
	^ 'LyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogIC8qKgogICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgKi8KICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBTdWJ0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgLy9ldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIAogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOwogIC8vZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgoKCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4gCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgLy9iYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7IC8vIHRoaXMgd2FzIHJlbW92ZWQKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgfQoKfQpjb250cmFjdCBCaWdib21Qcml2YXRlU2FsZUxpc3QgaXMgT3duYWJsZSB7CiAgICBtYXBwaW5nKGFkZHJlc3M9PnVpbnQpIHB1YmxpYyBhZGRyZXNzQ2FwOwoKICAgIGZ1bmN0aW9uIEJpZ2JvbVByaXZhdGVTYWxlTGlzdCgpIHB1YmxpYyAge30KCiAgICBldmVudCBMaXN0QWRkcmVzcyggYWRkcmVzcyBfdXNlciwgdWludCBfYW1vdW50LCB1aW50IF90aW1lICk7CgogICAgLy8gT3duZXIgY2FuIGRlbGlzdCBieSBzZXR0aW5nIGFtb3VudCA9IDAuCiAgICAvLyBPbndlciBjYW4gYWxzbyBjaGFuZ2UgaXQgYXQgYW55IHRpbWUKICAgIGZ1bmN0aW9uIGxpc3RBZGRyZXNzKCBhZGRyZXNzIF91c2VyLCB1aW50IF9hbW91bnQgKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF91c2VyICE9IGFkZHJlc3MoMHgwKSk7CgogICAgICAgIGFkZHJlc3NDYXBbX3VzZXJdID0gX2Ftb3VudDsKICAgICAgICBMaXN0QWRkcmVzcyggX3VzZXIsIF9hbW91bnQsIG5vdyApOwogICAgfQoKICAgIC8vIGFuIG9wdGltaXphdGlvbiBpbiBjYXNlIG9mIG5ldHdvcmsgY29uZ2VzdGlvbgogICAgZnVuY3Rpb24gbGlzdEFkZHJlc3NlcyggYWRkcmVzc1tdIF91c2VycywgdWludFtdIF9hbW91bnQgKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF91c2Vycy5sZW5ndGggPT0gX2Ftb3VudC5sZW5ndGggKTsKICAgICAgICBmb3IoIHVpbnQgaSA9IDAgOyBpIDwgX3VzZXJzLmxlbmd0aCA7IGkrKyApIHsKICAgICAgICAgICAgbGlzdEFkZHJlc3MoIF91c2Vyc1tpXSwgX2Ftb3VudFtpXSApOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRDYXAoIGFkZHJlc3MgX3VzZXIgKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIGFkZHJlc3NDYXBbX3VzZXJdOwogICAgfQoKfQoKY29udHJhY3QgQmlnYm9tVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CiAgICAKICAgIHN0cmluZyAgcHVibGljICBjb25zdGFudCBuYW1lID0gIkJpZ2JvbSI7CiAgICBzdHJpbmcgIHB1YmxpYyAgY29uc3RhbnQgc3ltYm9sID0gIkJCTyI7CiAgICB1aW50ICAgIHB1YmxpYyAgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQgICAgcHVibGljICAgdG90YWxTdXBwbHkgPSAyMDAwMDAwMDAwICogMWUxODsgLy8yLDAwMCwwMDAsMDAwCgogICAgdWludCAgICBwdWJsaWMgIGNvbnN0YW50IGZvdW5kZXJBbW91bnQgPSAyMDAwMDAwMDAgKiAxZTE4OyAvLyAyMDAsMDAwLDAwMAogICAgdWludCAgICBwdWJsaWMgIGNvbnN0YW50IGNvcmVTdGFmZkFtb3VudCA9IDYwMDAwMDAwICogMWUxODsgLy8gNjAsMDAwLDAwMAogICAgdWludCAgICBwdWJsaWMgIGNvbnN0YW50IGFkdmlzb3JBbW91bnQgPSAxNDAwMDAwMDAgKiAxZTE4OyAvLyAxNDAsMDAwLDAwMAogICAgdWludCAgICBwdWJsaWMgIGNvbnN0YW50IG5ldHdvcmtHcm93dGhBbW91bnQgPSA2MDAwMDAwMDAgKiAxZTE4OyAvLzYwMCwwMDAsMDAwCiAgICB1aW50ICAgIHB1YmxpYyAgY29uc3RhbnQgcmVzZXJ2ZUFtb3VudCA9IDYzNTAwMDAwMCAqIDFlMTg7IC8vIDYzNSwwMDAsMDAwCiAgICB1aW50ICAgIHB1YmxpYyAgY29uc3RhbnQgYm91bnR5QW1vdW50ID0gNDAwMDAwMDAgKiAxZTE4OyAvLyA0MCwwMDAsMDAwCiAgICB1aW50ICAgIHB1YmxpYyAgY29uc3RhbnQgcHVibGljU2FsZUFtb3VudCA9IDI3NTAwMDAwMCAqIDFlMTg7IC8vIDI3NSwwMDAsMDAwCgogICAgYWRkcmVzcyBwdWJsaWMgICBiYkZvdW5kZXJDb3JlU3RhZmZXYWxsZXQgOwogICAgYWRkcmVzcyBwdWJsaWMgICBiYkFkdmlzb3JXYWxsZXQ7CiAgICBhZGRyZXNzIHB1YmxpYyAgIGJiQWlyZHJvcFdhbGxldDsKICAgIGFkZHJlc3MgcHVibGljICAgYmJOZXR3b3JrR3Jvd3RoV2FsbGV0OwogICAgYWRkcmVzcyBwdWJsaWMgICBiYlJlc2VydmVXYWxsZXQ7CiAgICBhZGRyZXNzIHB1YmxpYyAgIGJiUHVibGljU2FsZVdhbGxldDsKCiAgICB1aW50ICAgIHB1YmxpYyAgc2FsZVN0YXJ0VGltZTsKICAgIHVpbnQgICAgcHVibGljICBzYWxlRW5kVGltZTsKCiAgICBhZGRyZXNzIHB1YmxpYyAgdG9rZW5TYWxlQ29udHJhY3Q7CiAgICBCaWdib21Qcml2YXRlU2FsZUxpc3QgcHVibGljIHByaXZhdGVTYWxlTGlzdDsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBmcm96ZW5BY2NvdW50OwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgZnJvemVuVGltZTsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIG1heEFsbG93ZWRBbW91bnQ7CgogICAgLyogVGhpcyBnZW5lcmF0ZXMgYSBwdWJsaWMgZXZlbnQgb24gdGhlIGJsb2NrY2hhaW4gdGhhdCB3aWxsIG5vdGlmeSBjbGllbnRzICovCiAgICBldmVudCBGcm96ZW5GdW5kcyhhZGRyZXNzIHRhcmdldCwgYm9vbCBmcm96ZW4sIHVpbnQgX3NlY29uZHMpOwogICAKCiAgICBmdW5jdGlvbiBjaGVja01heEFsbG93ZWQoYWRkcmVzcyB0YXJnZXQpICBwdWJsaWMgY29uc3RhbnQgIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB2YXIgbWF4QW1vdW50ICA9IGJhbGFuY2VzW3RhcmdldF07CiAgICAgICAgaWYodGFyZ2V0ID09IGJiRm91bmRlckNvcmVTdGFmZldhbGxldCl7CiAgICAgICAgICAgIG1heEFtb3VudCA9IDEwMDAwMDAwICogMWUxODsKICAgICAgICB9CiAgICAgICAgaWYodGFyZ2V0ID09IGJiQWR2aXNvcldhbGxldCl7CiAgICAgICAgICAgIG1heEFtb3VudCA9IDEwMDAwMDAwICogMWUxODsKICAgICAgICB9CiAgICAgICAgaWYodGFyZ2V0ID09IGJiQWlyZHJvcFdhbGxldCl7CiAgICAgICAgICAgIG1heEFtb3VudCA9IDQwMDAwMDAwICogMWUxODsKICAgICAgICB9CiAgICAgICAgaWYodGFyZ2V0ID09IGJiTmV0d29ya0dyb3d0aFdhbGxldCl7CiAgICAgICAgICAgIG1heEFtb3VudCA9IDIwMDAwMDAwICogMWUxODsKICAgICAgICB9CiAgICAgICAgaWYodGFyZ2V0ID09IGJiUmVzZXJ2ZVdhbGxldCl7CiAgICAgICAgICAgIG1heEFtb3VudCA9IDYzNTAwMDAgKiAxZTE4OwogICAgICAgIH0KICAgICAgICByZXR1cm4gbWF4QW1vdW50OwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbGZGcmVlemUoYm9vbCBmcmVlemUsIHVpbnQgX3NlY29uZHMpIHB1YmxpYyB7CiAgICAgICAgLy8gc2VsZkZyZWV6ZSBjYW5ub3QgbW9yZSB0aGFuIDcgZGF5cwogICAgICAgIHJlcXVpcmUoX3NlY29uZHMgPD0gNyAqIDI0ICogMzYwMCk7CiAgICAgICAgLy8gaWYgdW5mcmVlemUKICAgICAgICBpZighZnJlZXplKXsKICAgICAgICAgICAgLy8gZ2V0IEVuZCB0aW1lIG9mIGZyb3plbkFjY291bnQKICAgICAgICAgICAgdmFyIGZyb3plbkVuZFRpbWUgPSBmcm96ZW5UaW1lW21zZy5zZW5kZXJdOwogICAgICAgICAgICAvLyBpZiBub3cgPiBmcm96ZW5FbmRUaW1lCiAgICAgICAgICAgIHJlcXVpcmUgKG5vdyA+PSBmcm96ZW5FbmRUaW1lKTsKICAgICAgICAgICAgLy8gdW5mcmVlemUgYWNjb3VudAogICAgICAgICAgICBmcm96ZW5BY2NvdW50W21zZy5zZW5kZXJdID0gZnJlZXplOwogICAgICAgICAgICAvLyBzZXQgdGltZSB0byAwCiAgICAgICAgICAgIF9zZWNvbmRzID0gMDsgICAgICAgICAgIAogICAgICAgIH1lbHNlewogICAgICAgICAgICBmcm96ZW5BY2NvdW50W21zZy5zZW5kZXJdID0gZnJlZXplOwogICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgLy8gc2V0IGVuZFRpbWUgPSBub3cgKyBfc2Vjb25kcyB0byBmcmVlemUKICAgICAgICBmcm96ZW5UaW1lW21zZy5zZW5kZXJdID0gbm93ICsgX3NlY29uZHM7CiAgICAgICAgRnJvemVuRnVuZHMobXNnLnNlbmRlciwgZnJlZXplLCBfc2Vjb25kcyk7CiAgICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24gZnJlZXplQWNjb3VudChhZGRyZXNzIHRhcmdldCwgYm9vbCBmcmVlemUsIHVpbnQgX3NlY29uZHMpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIAogICAgICAgIC8vIGlmIHVuZnJlZXplCiAgICAgICAgaWYoIWZyZWV6ZSl7CiAgICAgICAgICAgIC8vIGdldCBFbmQgdGltZSBvZiBmcm96ZW5BY2NvdW50CiAgICAgICAgICAgIHZhciBmcm96ZW5FbmRUaW1lID0gZnJvemVuVGltZVt0YXJnZXRdOwogICAgICAgICAgICAvLyBpZiBub3cgPiBmcm96ZW5FbmRUaW1lCiAgICAgICAgICAgIHJlcXVpcmUgKG5vdyA+PSBmcm96ZW5FbmRUaW1lKTsKICAgICAgICAgICAgLy8gdW5mcmVlemUgYWNjb3VudAogICAgICAgICAgICBmcm96ZW5BY2NvdW50W3RhcmdldF0gPSBmcmVlemU7CiAgICAgICAgICAgIC8vIHNldCB0aW1lIHRvIDAKICAgICAgICAgICAgX3NlY29uZHMgPSAwOyAgICAgICAgICAgCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGZyb3plbkFjY291bnRbdGFyZ2V0XSA9IGZyZWV6ZTsKICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIC8vIHNldCBlbmRUaW1lID0gbm93ICsgX3NlY29uZHMgdG8gZnJlZXplCiAgICAgICAgZnJvemVuVGltZVt0YXJnZXRdID0gbm93ICsgX3NlY29uZHM7CiAgICAgICAgRnJvemVuRnVuZHModGFyZ2V0LCBmcmVlemUsIF9zZWNvbmRzKTsKICAgICAgICAKICAgIH0KCiAgICBtb2RpZmllciB2YWxpZERlc3RpbmF0aW9uKCBhZGRyZXNzIHRvICkgewogICAgICAgIHJlcXVpcmUodG8gIT0gYWRkcmVzcygweDApKTsKICAgICAgICByZXF1aXJlKHRvICE9IGFkZHJlc3ModGhpcykgKTsKICAgICAgICByZXF1aXJlKCFmcm96ZW5BY2NvdW50W3RvXSk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiByZWNpcGllbnQgaXMgZnJvemVuCiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIHZhbGlkRnJvbShhZGRyZXNzIGZyb20pewogICAgICAgIHJlcXVpcmUoIWZyb3plbkFjY291bnRbZnJvbV0pOyAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHNlbmRlciBpcyBmcm96ZW4KICAgICAgICBfOwogICAgfQogICAgbW9kaWZpZXIgb25seVdoZW5UcmFuc2ZlckVuYWJsZWQoKSB7CiAgICAgICAgaWYoIG5vdyA8PSBzYWxlRW5kVGltZSAmJiBub3cgPj0gc2FsZVN0YXJ0VGltZSApIHsKICAgICAgICAgICAgcmVxdWlyZSggbXNnLnNlbmRlciA9PSB0b2tlblNhbGVDb250cmFjdCApOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQogICAgbW9kaWZpZXIgb25seVByaXZhdGVMaXN0RW5hYmxlZChhZGRyZXNzIF90byl7CiAgICAgICAgcmVxdWlyZShub3cgPD0gc2FsZVN0YXJ0VGltZSk7CiAgICAgICAgdWludCBhbGxvd2NhcCA9IHByaXZhdGVTYWxlTGlzdC5nZXRDYXAoX3RvKTsKICAgICAgICByZXF1aXJlIChhbGxvd2NhcCA+IDApOwogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbiBzZXRQcml2YXRlTGlzdChCaWdib21Qcml2YXRlU2FsZUxpc3QgX3ByaXZhdGVTYWxlTGlzdCkgICBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9wcml2YXRlU2FsZUxpc3QgIT0gYWRkcmVzcygweDApKTsKICAgICAgICBwcml2YXRlU2FsZUxpc3QgPSBfcHJpdmF0ZVNhbGVMaXN0OwoKICAgIH0KICAgIAogICAgZnVuY3Rpb24gQmlnYm9tVG9rZW4odWludCBzdGFydFRpbWUsIHVpbnQgZW5kVGltZSwgYWRkcmVzcyBhZG1pbiwgYWRkcmVzcyBfYmJGb3VuZGVyQ29yZVN0YWZmV2FsbGV0LCBhZGRyZXNzIF9iYkFkdmlzb3JXYWxsZXQsCiAgICAgICAgYWRkcmVzcyBfYmJBaXJkcm9wV2FsbGV0LAogICAgICAgIGFkZHJlc3MgX2JiTmV0d29ya0dyb3d0aFdhbGxldCwKICAgICAgICBhZGRyZXNzIF9iYlJlc2VydmVXYWxsZXQsIAogICAgICAgIGFkZHJlc3MgX2JiUHVibGljU2FsZVdhbGxldAogICAgICAgICkgcHVibGljIHsKCiAgICAgICAgcmVxdWlyZShhZG1pbiE9YWRkcmVzcygweDApKTsKICAgICAgICByZXF1aXJlKF9iYkFpcmRyb3BXYWxsZXQhPWFkZHJlc3MoMHgwKSk7CiAgICAgICAgcmVxdWlyZShfYmJBZHZpc29yV2FsbGV0IT1hZGRyZXNzKDB4MCkpOwogICAgICAgIHJlcXVpcmUoX2JiUmVzZXJ2ZVdhbGxldCE9YWRkcmVzcygweDApKTsKICAgICAgICByZXF1aXJlKF9iYk5ldHdvcmtHcm93dGhXYWxsZXQhPWFkZHJlc3MoMHgwKSk7CiAgICAgICAgcmVxdWlyZShfYmJGb3VuZGVyQ29yZVN0YWZmV2FsbGV0IT1hZGRyZXNzKDB4MCkpOwogICAgICAgIHJlcXVpcmUoX2JiUHVibGljU2FsZVdhbGxldCE9YWRkcmVzcygweDApKTsKCiAgICAgICAgLy8gTWludCBhbGwgdG9rZW5zLiBUaGVuIGRpc2FibGUgbWludGluZyBmb3JldmVyLgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHk7CiAgICAgICAgVHJhbnNmZXIoYWRkcmVzcygweDApLCBtc2cuc2VuZGVyLCB0b3RhbFN1cHBseSk7CiAgICAgICAgLy8gaW5pdCBpbnRlcm5hbCBhbW91bnQgbGltaXQKICAgICAgICAvLyBzZXQgYWRkcmVzcyB3aGVuIGRlcGxveQogICAgICAgIGJiQWlyZHJvcFdhbGxldCA9IF9iYkFpcmRyb3BXYWxsZXQ7CiAgICAgICAgYmJBZHZpc29yV2FsbGV0ID0gX2JiQWR2aXNvcldhbGxldDsKICAgICAgICBiYlJlc2VydmVXYWxsZXQgPSBfYmJSZXNlcnZlV2FsbGV0OwogICAgICAgIGJiTmV0d29ya0dyb3d0aFdhbGxldCA9IF9iYk5ldHdvcmtHcm93dGhXYWxsZXQ7CiAgICAgICAgYmJGb3VuZGVyQ29yZVN0YWZmV2FsbGV0ID0gX2JiRm91bmRlckNvcmVTdGFmZldhbGxldDsKICAgICAgICBiYlB1YmxpY1NhbGVXYWxsZXQgPSBfYmJQdWJsaWNTYWxlV2FsbGV0OwogICAgICAgIAogICAgICAgIHNhbGVTdGFydFRpbWUgPSBzdGFydFRpbWU7CiAgICAgICAgc2FsZUVuZFRpbWUgPSBlbmRUaW1lOwogICAgICAgIHRyYW5zZmVyT3duZXJzaGlwKGFkbWluKTsgLy8gYWRtaW4gY291bGQgZHJhaW4gdG9rZW5zIHRoYXQgd2VyZSBzZW50IGhlcmUgYnkgbWlzdGFrZQogICAgfQoKICAgIGZ1bmN0aW9uIHNldFRpbWVTYWxlKHVpbnQgc3RhcnRUaW1lLCB1aW50IGVuZFRpbWUpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKG5vdyA8IHNhbGVTdGFydFRpbWUgfHwgbm93ID4gc2FsZUVuZFRpbWUpOwogICAgICAgIHJlcXVpcmUgKG5vdyA8IHN0YXJ0VGltZSk7CiAgICAgICAgcmVxdWlyZSAoIHN0YXJ0VGltZSA8IGVuZFRpbWUpOwogICAgICAgIHNhbGVTdGFydFRpbWUgPSBzdGFydFRpbWU7CiAgICAgICAgc2FsZUVuZFRpbWUgPSBlbmRUaW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFRva2VuU2FsZUNvbnRyYWN0KGFkZHJlc3MgX3Rva2VuU2FsZUNvbnRyYWN0KSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICAvLyBjaGVjayBhZGRyZXNzICEgMAogICAgICAgIHJlcXVpcmUoX3Rva2VuU2FsZUNvbnRyYWN0ICE9IGFkZHJlc3MoMHgwKSk7CiAgICAgICAgLy8gZG8gbm90IGFsbG93IHJ1biB3aGVuIHNhbGVTdGFydFRpbWUgPD0gbm93IDw9IHNhbGVFbmRUaW1lCiAgICAgICAgcmVxdWlyZSAobm93IDwgc2FsZVN0YXJ0VGltZSB8fCBub3cgPiBzYWxlRW5kVGltZSk7CgogICAgICAgIHRva2VuU2FsZUNvbnRyYWN0ID0gX3Rva2VuU2FsZUNvbnRyYWN0OwogICAgfQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKQogICAgICAgIG9ubHlXaGVuVHJhbnNmZXJFbmFibGVkCiAgICAgICAgdmFsaWREZXN0aW5hdGlvbihfdG8pCiAgICAgICAgdmFsaWRGcm9tKG1zZy5zZW5kZXIpCiAgICAgICAgcHVibGljIAogICAgICAgIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBiYkZvdW5kZXJDb3JlU3RhZmZXYWxsZXQgfHwgbXNnLnNlbmRlciA9PSBiYkFkdmlzb3JXYWxsZXR8fCAKICAgICAgICAgICAgbXNnLnNlbmRlciA9PSBiYkFpcmRyb3BXYWxsZXR8fCBtc2cuc2VuZGVyID09IGJiTmV0d29ya0dyb3d0aFdhbGxldHx8IG1zZy5zZW5kZXIgPT0gYmJSZXNlcnZlV2FsbGV0KXsKCiAgICAgICAgICAgIC8vIGNoZWNrIG1heEFsbG93ZWRBbW91bnQKICAgICAgICAgICAgdmFyIHdpdGhkcmF3QW1vdW50ID0gIG1heEFsbG93ZWRBbW91bnRbbXNnLnNlbmRlcl07IAogICAgICAgICAgICB2YXIgZGVmYXVsdEFsbG93QW1vdW50ID0gY2hlY2tNYXhBbGxvd2VkKG1zZy5zZW5kZXIpOwogICAgICAgICAgICB2YXIgbWF4QW1vdW50ID0gZGVmYXVsdEFsbG93QW1vdW50IC0gd2l0aGRyYXdBbW91bnQ7CiAgICAgICAgICAgIC8vIF92YWx1ZSB0cmFuc2ZlciBtdXN0IDw9IG1heEFtb3VudAogICAgICAgICAgICByZXF1aXJlKG1heEFtb3VudCA+PSBfdmFsdWUpOyAvLyAKCiAgICAgICAgICAgIC8vIGlmIG1heEFtb3VudCA9IDAsIG5lZWQgdG8gYmxvY2sgdGhpcyBtc2cuc2VuZGVyCiAgICAgICAgICAgIGlmKG1heEFtb3VudD09X3ZhbHVlKXsKICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaXNUcmFuc2ZlciA9IHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgICAgICAvLyBmcmVlemUgYWNjb3VudAogICAgICAgICAgICAgICAgc2VsZkZyZWV6ZSh0cnVlLCAyNCAqIDM2MDApOyAvLyB0ZW1wIGZyZWV6ZSBhY2NvdW50IDI0aAogICAgICAgICAgICAgICAgbWF4QWxsb3dlZEFtb3VudFttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgICAgICAgICByZXR1cm4gaXNUcmFuc2ZlcjsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAvLyBzZXQgbWF4IHdpdGhkcmF3QW1vdW50CiAgICAgICAgICAgICAgICBtYXhBbGxvd2VkQW1vdW50W21zZy5zZW5kZXJdID0gbWF4QWxsb3dlZEFtb3VudFttc2cuc2VuZGVyXS5hZGQoX3ZhbHVlKTsgLy8gCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJQcml2YXRlU2FsZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUpCiAgICAgICAgb25seU93bmVyCiAgICAgICAgb25seVByaXZhdGVMaXN0RW5hYmxlZChfdG8pIAogICAgICAgIHB1YmxpYyAKICAgICAgICByZXR1cm5zIChib29sKSB7CiAgICAgICAgIHJldHVybiB0cmFuc2ZlciggX3RvLCAgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKQogICAgICAgIG9ubHlXaGVuVHJhbnNmZXJFbmFibGVkCiAgICAgICAgdmFsaWREZXN0aW5hdGlvbihfdG8pCiAgICAgICAgdmFsaWRGcm9tKF9mcm9tKQogICAgICAgIHB1YmxpYyAKICAgICAgICByZXR1cm5zIChib29sKSB7CiAgICAgICAgICAgIGlmIChfZnJvbSA9PSBiYkZvdW5kZXJDb3JlU3RhZmZXYWxsZXQgfHwgX2Zyb20gPT0gYmJBZHZpc29yV2FsbGV0fHwgCiAgICAgICAgICAgICAgICBfZnJvbSA9PSBiYkFpcmRyb3BXYWxsZXR8fCBfZnJvbSA9PSBiYk5ldHdvcmtHcm93dGhXYWxsZXR8fCBfZnJvbSA9PSBiYlJlc2VydmVXYWxsZXQpewoKICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgbWF4QWxsb3dlZEFtb3VudAogICAgICAgICAgICAgICAgdmFyIHdpdGhkcmF3QW1vdW50ID0gIG1heEFsbG93ZWRBbW91bnRbX2Zyb21dOyAKICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0QWxsb3dBbW91bnQgPSBjaGVja01heEFsbG93ZWQoX2Zyb20pOwogICAgICAgICAgICAgICAgdmFyIG1heEFtb3VudCA9IGRlZmF1bHRBbGxvd0Ftb3VudCAtIHdpdGhkcmF3QW1vdW50OyAKICAgICAgICAgICAgICAgIC8vIF92YWx1ZSB0cmFuc2ZlciBtdXN0IDw9IG1heEFtb3VudAogICAgICAgICAgICAgICAgcmVxdWlyZShtYXhBbW91bnQgPj0gX3ZhbHVlKTsgCgogICAgICAgICAgICAgICAgLy8gaWYgbWF4QW1vdW50ID0gMCwgbmVlZCB0byBibG9jayB0aGlzIF9mcm9tCiAgICAgICAgICAgICAgICBpZihtYXhBbW91bnQ9PV92YWx1ZSl7CiAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB2YXIgaXNUcmFuc2ZlciA9IHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgLy8gZnJlZXplIGFjY291bnQKICAgICAgICAgICAgICAgICAgICBzZWxmRnJlZXplKHRydWUsIDI0ICogMzYwMCk7IAogICAgICAgICAgICAgICAgICAgIG1heEFsbG93ZWRBbW91bnRbX2Zyb21dID0gMDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNUcmFuc2ZlcjsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIC8vIHNldCBtYXggd2l0aGRyYXdBbW91bnQKICAgICAgICAgICAgICAgICAgICBtYXhBbGxvd2VkQW1vdW50W19mcm9tXSA9IG1heEFsbG93ZWRBbW91bnRbX2Zyb21dLmFkZChfdmFsdWUpOyAKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgX2J1cm5lciwgdWludCBfdmFsdWUpOwoKICAgIGZ1bmN0aW9uIGJ1cm4odWludCBfdmFsdWUpIG9ubHlXaGVuVHJhbnNmZXJFbmFibGVkCiAgICAgICAgcHVibGljIAogICAgICAgIHJldHVybnMgKGJvb2wpewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgICAgICBCdXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgYWRkcmVzcygweDApLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIHNhdmUgc29tZSBnYXMgYnkgbWFraW5nIG9ubHkgb25lIGNvbnRyYWN0IGNhbGwKICAgIGZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5V2hlblRyYW5zZmVyRW5hYmxlZAogICAgICAgIHB1YmxpYyAKICAgICAgICByZXR1cm5zIChib29sKSB7CiAgICAgICAgYXNzZXJ0KCB0cmFuc2ZlckZyb20oIF9mcm9tLCBtc2cuc2VuZGVyLCBfdmFsdWUgKSApOwogICAgICAgIHJldHVybiBidXJuKF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZW1lcmdlbmN5RVJDMjBEcmFpbiggRVJDMjAgdG9rZW4sIHVpbnQgYW1vdW50ICkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgdG9rZW4udHJhbnNmZXIoIG93bmVyLCBhbW91bnQgKTsKICAgIH0KfQ=='.
	

]
