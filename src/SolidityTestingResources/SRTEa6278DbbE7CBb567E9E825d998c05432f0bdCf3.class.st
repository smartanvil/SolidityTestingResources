Class {
	#name : #SRTEa6278DbbE7CBb567E9E825d998c05432f0bdCf3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTEa6278DbbE7CBb567E9E825d998c05432f0bdCf3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTQ7CgogLy8vIEB0aXRsZSBTYWZlTWF0aCBjb250cmFjdCAtIG1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MKY29udHJhY3QgU2FmZU1hdGggewogIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZURpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPiAwKTsKICAgIHVpbnQgYyA9IGEgLyBiOwogICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9Cn0KLy8vIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2Ugc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMApjb250cmFjdCBFUkMyMCB7CiB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyByZWNlaXZlciwgdWludCBhbW91bnQpOwogZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCi8vLyBAdGl0bGUgT3duYWJsZSBjb250cmFjdCAtIGJhc2UgY29udHJhY3Qgd2l0aCBhbiBvd25lcgpjb250cmFjdCBPd25hYmxlIHsKIGFkZHJlc3MgcHVibGljIG93bmVyOwoKIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgIG93bmVyID0gbXNnLnNlbmRlcjsKIH0KCiBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgIF87CiB9CgogZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICBvd25lciA9IG5ld093bmVyOwogICB9CiB9Cn0KCi8vLyBAdGl0bGUgSGFsdGFibGUgY29udHJhY3QgLSBhYnN0cmFjdCBjb250cmFjdCB0aGF0IGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgovLy8gT3JpZ2luYWxseSBlbnZpc2lvbmVkIGluIEZpcnN0Qmxvb2QgSUNPIGNvbnRyYWN0Lgpjb250cmFjdCBIYWx0YWJsZSBpcyBPd25hYmxlIHsKICBib29sIHB1YmxpYyBoYWx0ZWQ7CgogIG1vZGlmaWVyIHN0b3BJbkVtZXJnZW5jeSB7CiAgICByZXF1aXJlKCFoYWx0ZWQpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIG9ubHlJbkVtZXJnZW5jeSB7CiAgICByZXF1aXJlKGhhbHRlZCk7CiAgICBfOwogIH0KCiAgLy8vIGNhbGxlZCBieSB0aGUgb3duZXIgb24gZW1lcmdlbmN5LCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgZnVuY3Rpb24gaGFsdCgpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICBoYWx0ZWQgPSB0cnVlOwogIH0KCiAgLy8vIGNhbGxlZCBieSB0aGUgb3duZXIgb24gZW5kIG9mIGVtZXJnZW5jeSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICBmdW5jdGlvbiB1bmhhbHQoKSBleHRlcm5hbCBvbmx5T3duZXIgb25seUluRW1lcmdlbmN5IHsKICAgIGhhbHRlZCA9IGZhbHNlOwogIH0KfQogLy8vIEB0aXRsZSBLaWxsYWJsZSBjb250cmFjdCAtIGJhc2UgY29udHJhY3QgdGhhdCBjYW4gYmUga2lsbGVkIGJ5IG93bmVyLiBBbGwgZnVuZHMgaW4gY29udHJhY3Qgd2lsbCBiZSBzZW50IHRvIHRoZSBvd25lci4KY29udHJhY3QgS2lsbGFibGUgaXMgT3duYWJsZSB7CiAgZnVuY3Rpb24ga2lsbCgpIG9ubHlPd25lciB7CiAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogIH0KfQogLy8vIEB0aXRsZSBTaWxlbnROb3RhcnlUb2tlbiBjb250cmFjdCAtIHN0YW5kYXJkIEVSQzIwIHRva2VuIHdpdGggU2hvcnQgSGFuZCBBdHRhY2sgYW5kIGFwcHJvdmUoKSByYWNlIGNvbmRpdGlvbiBtaXRpZ2F0aW9uLgpjb250cmFjdCBTaWxlbnROb3RhcnlUb2tlbiBpcyBTYWZlTWF0aCwgRVJDMjAsIEtpbGxhYmxlIHsKICBzdHJpbmcgY29uc3RhbnQgcHVibGljIG5hbWUgPSAiU2lsZW50IE5vdGFyeSBUb2tlbiI7CiAgc3RyaW5nIGNvbnN0YW50IHB1YmxpYyBzeW1ib2wgPSAiU05UUiI7CiAgdWludCBjb25zdGFudCBwdWJsaWMgZGVjaW1hbHMgPSA0OwogIC8vLyBCdXlvdXQgcHJpY2UKICB1aW50IGNvbnN0YW50IHB1YmxpYyBidXlPdXRQcmljZSA9IDIwMCBmaW5uZXk7CiAgLy8vIEhvbGRlciBsaXN0CiAgYWRkcmVzc1tdIHB1YmxpYyBob2xkZXJzOwogIC8vLyBCYWxhbmNlIGRhdGEKICBzdHJ1Y3QgQmFsYW5jZSB7CiAgICAvLy8gVG9rZW5zIGFtb3VudAogICAgdWludCB2YWx1ZTsKICAgIC8vLyBPYmplY3QgZXhpc3QKICAgIGJvb2wgZXhpc3Q7CiAgfQogIC8vLyBIb2xkZXIgYmFsYW5jZXMKICBtYXBwaW5nKGFkZHJlc3MgPT4gQmFsYW5jZSkgcHVibGljIGJhbGFuY2VzOwogIC8vLyBDb250cmFjdCB0aGF0IGlzIGFsbG93ZWQgdG8gY3JlYXRlIG5ldyB0b2tlbnMgYW5kIGFsbG93cyB1bmxpZnQgdGhlIHRyYW5zZmVyIGxpbWl0cyBvbiB0aGlzIHRva2VuCiAgYWRkcmVzcyBwdWJsaWMgY3Jvd2RzYWxlQWdlbnQ7CiAgLy8vIEEgY3Jvd2RzYWxlIGNvbnRyYWN0IGNhbiByZWxlYXNlIHVzIHRvIHRoZSB3aWxkIGlmIElDTyBzdWNjZXNzLiBJZiBmYWxzZSB3ZSBhcmUgYXJlIGluIHRyYW5zZmVyIGxvY2sgdXAgcGVyaW9kLgogIGJvb2wgcHVibGljIHJlbGVhc2VkID0gZmFsc2U7CiAgLy8vIGFwcHJvdmUoKSBhbGxvd2FuY2VzCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwoKICAvLy8gQGRldiBMaW1pdCB0b2tlbiB0cmFuc2ZlciB1bnRpbCB0aGUgY3Jvd2RzYWxlIGlzIG92ZXIuCiAgbW9kaWZpZXIgY2FuVHJhbnNmZXIoKSB7CiAgICBpZighcmVsZWFzZWQpCiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjcm93ZHNhbGVBZ2VudCk7CiAgICBfOwogIH0KCiAgLy8vIEBkZXYgVGhlIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgb25seSBiZWZvcmUgb3IgYWZ0ZXIgdGhlIHRva2VucyBoYXZlIGJlZW4gcmVsZWFzZXNkCiAgLy8vIEBwYXJhbSBfcmVsZWFzZWQgdG9rZW4gdHJhbnNmZXIgYW5kIG1pbnQgc3RhdGUKICBtb2RpZmllciBpblJlbGVhc2VTdGF0ZShib29sIF9yZWxlYXNlZCkgewogICAgcmVxdWlyZShfcmVsZWFzZWQgPT0gcmVsZWFzZWQpOwogICAgXzsKICB9CgogIC8vLyBAZGV2IElmIGhvbGRlciBkb2VzIG5vdCBleGlzdCBhZGQgdG8gYXJyYXkKICAvLy8gQHBhcmFtIGhvbGRlciBUb2tlbiBob2xkZXIKICBtb2RpZmllciBhZGRJZk5vdEV4aXN0KGFkZHJlc3MgaG9sZGVyKSB7CiAgICBpZighYmFsYW5jZXNbaG9sZGVyXS5leGlzdCkKICAgICAgaG9sZGVycy5wdXNoKGhvbGRlcik7CiAgICBfOwogIH0KCiAgLy8vIEBkZXYgVGhlIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgb25seSBieSByZWxlYXNlIGFnZW50LgogIG1vZGlmaWVyIG9ubHlDcm93ZHNhbGVBZ2VudCgpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjcm93ZHNhbGVBZ2VudCk7CiAgICBfOwogIH0KCiAgLy8vIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2sgaHR0cDovL3Zlc3NlbmVzLmNvbS90aGUtZXJjMjAtc2hvcnQtYWRkcmVzcy1hdHRhY2stZXhwbGFpbmVkLwogIC8vLyBAcGFyYW0gc2l6ZSBwYXlsb2FkIHNpemUKICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICByZXF1aXJlKG1zZy5kYXRhLmxlbmd0aCA+PSBzaXplICsgNCk7CiAgICBfOwogIH0KCiAgLy8vIEBkZXYgTWFrZSBzdXJlIHdlIGFyZSBub3QgZG9uZSB5ZXQuCiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIHJlcXVpcmUoIXJlbGVhc2VkKTsKICAgIF87CiAgfQoKICAvLy8gVG9rZW5zIGJ1cm4gZXZlbnQKICBldmVudCBCdXJuZWQoYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgYWRkcmVzcyBpbmRleGVkIGhvbGRlciwgdWludCBidXJuZWRBbW91bnQpOwogIC8vLyBUb2tlbnMgYnV5b3V0IGV2ZW50CiAgZXZlbnQgUGF5KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CiAgLy8vIFdlaSBkZXBvc2l0IGV2ZW50CiAgZXZlbnQgRGVwb3NpdChhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludCB2YWx1ZSk7CgogIC8vLyBAZGV2IENvbnN0cnVjdG9yCiAgZnVuY3Rpb24gU2lsZW50Tm90YXJ5VG9rZW4oKSB7CiAgfQoKICAvLy8gRmFsbGJhY2sgbWV0aG9kCiAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CiAgICBEZXBvc2l0KG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgfQogIC8vLyBAZGV2IENyZWF0ZSBuZXcgdG9rZW5zIGFuZCBhbGxvY2F0ZSB0aGVtIHRvIGFuIGFkZHJlc3MuIE9ubHkgY2FsbGFibHkgYnkgYSBjcm93ZHNhbGUgY29udHJhY3QKICAvLy8gQHBhcmFtIHJlY2VpdmVyIEFkZHJlc3Mgb2YgcmVjZWl2ZXIKICAvLy8gQHBhcmFtIGFtb3VudCAgTnVtYmVyIG9mIHRva2VucyB0byBpc3N1ZS4KICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgYW1vdW50KSBvbmx5Q3Jvd2RzYWxlQWdlbnQgY2FuTWludCBhZGRJZk5vdEV4aXN0KHJlY2VpdmVyKSBwdWJsaWMgewogICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIGFtb3VudCk7CiAgICAgIGJhbGFuY2VzW3JlY2VpdmVyXS52YWx1ZSA9IHNhZmVBZGQoYmFsYW5jZXNbcmVjZWl2ZXJdLnZhbHVlLCBhbW91bnQpOwogICAgICBiYWxhbmNlc1tyZWNlaXZlcl0uZXhpc3QgPSB0cnVlOwogICAgICBUcmFuc2ZlcigwLCByZWNlaXZlciwgYW1vdW50KTsKICB9CgogIC8vLyBAZGV2IFNldCB0aGUgY29udHJhY3QgdGhhdCBjYW4gY2FsbCByZWxlYXNlIGFuZCBtYWtlIHRoZSB0b2tlbiB0cmFuc2ZlcmFibGUuCiAgLy8vIEBwYXJhbSBfY3Jvd2RzYWxlQWdlbnQgY3Jvd2RzYWxlIGNvbnRyYWN0IGFkZHJlc3MKICBmdW5jdGlvbiBzZXRDcm93ZHNhbGVBZ2VudChhZGRyZXNzIF9jcm93ZHNhbGVBZ2VudCkgb25seU93bmVyIGluUmVsZWFzZVN0YXRlKGZhbHNlKSBwdWJsaWMgewogICAgY3Jvd2RzYWxlQWdlbnQgPSBfY3Jvd2RzYWxlQWdlbnQ7CiAgfQogIC8vLyBAZGV2IE9uZSB3YXkgZnVuY3Rpb24gdG8gcmVsZWFzZSB0aGUgdG9rZW5zIHRvIHRoZSB3aWxkLiBDYW4gYmUgY2FsbGVkIG9ubHkgZnJvbSB0aGUgcmVsZWFzZSBhZ2VudCB0aGF0IGlzIHRoZSBmaW5hbCBJQ08gY29udHJhY3QuIEl0IGlzIG9ubHkgY2FsbGVkIGlmIHRoZSBjcm93ZHNhbGUgaGFzIGJlZW4gc3VjY2VzcyAoZmlyc3QgbWlsZXN0b25lIHJlYWNoZWQpLgogIGZ1bmN0aW9uIHJlbGVhc2VUb2tlblRyYW5zZmVyKCkgcHVibGljIG9ubHlDcm93ZHNhbGVBZ2VudCB7CiAgICByZWxlYXNlZCA9IHRydWU7CiAgfQogIC8vLyBAZGV2IFRyYW5mZXIgdG9rZW5zIHRvIGFkZHJlc3MKICAvLy8gQHBhcmFtIF90byBkZXN0IGFkZHJlc3MKICAvLy8gQHBhcmFtIF92YWx1ZSB0b2tlbnMgYW1vdW50CiAgLy8vIEByZXR1cm4gdHJhbnNmZXIgcmVzdWx0CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSBjYW5UcmFuc2ZlciBhZGRJZk5vdEV4aXN0KF90bykgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS52YWx1ZSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0udmFsdWUsIF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dLnZhbHVlID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLnZhbHVlLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXS5leGlzdCA9IHRydWU7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vLyBAZGV2IFRyYW5mZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gb3RoZXIKICAvLy8gQHBhcmFtIF9mcm9tIHNvdXJjZSBhZGRyZXNzCiAgLy8vIEBwYXJhbSBfdG8gZGVzdCBhZGRyZXNzCiAgLy8vIEBwYXJhbSBfdmFsdWUgdG9rZW5zIGFtb3VudAogIC8vLyBAcmV0dXJuIHRyYW5zZmVyIHJlc3VsdAogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIGNhblRyYW5zZmVyIGFkZElmTm90RXhpc3QoX3RvKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgYmFsYW5jZXNbX3RvXS52YWx1ZSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXS52YWx1ZSwgX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXS52YWx1ZSA9IHNhZmVTdWIoYmFsYW5jZXNbX2Zyb21dLnZhbHVlLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXS5leGlzdCA9IHRydWU7CgogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKF9hbGxvd2FuY2UsIF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQogIC8vLyBAZGV2IFRva2VucyBiYWxhbmNlCiAgLy8vIEBwYXJhbSBfb3duZXIgaG9sZGVyIGFkZHJlc3MKICAvLy8gQHJldHVybiBiYWxhbmNlIGFtb3VudAogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXS52YWx1ZTsKICB9CgogIC8vLyBAZGV2IEFwcHJvdmUgdHJhbnNmZXIKICAvLy8gQHBhcmFtIF9zcGVuZGVyIGhvbGRlciBhZGRyZXNzCiAgLy8vIEBwYXJhbSBfdmFsdWUgdG9rZW5zIGFtb3VudAogIC8vLyBAcmV0dXJuIHJlc3VsdAogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSAoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vLyBAZGV2IFRva2VuIGFsbG93YW5jZQogIC8vLyBAcGFyYW0gX293bmVyIGhvbGRlciBhZGRyZXNzCiAgLy8vIEBwYXJhbSBfc3BlbmRlciBzcGVuZGVyIGFkZHJlc3MKICAvLy8gQHJldHVybiByZW1haW4gYW1vdW50CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQogIC8vLyBAZGV2IGJ1eW91dCBtZXRob2QKICAvLy8gQHBhcmFtIF9ob2xkZXIgaG9sZGVyIGFkZHJlc3MKICAvLy8gQHBhcmFtIF9hbW91bnQgd2VpIGZvciBidXlvdXQgdG9rZW5zCiAgZnVuY3Rpb24gYnV5b3V0KGFkZHJlc3MgX2hvbGRlciwgdWludCBfYW1vdW50KSBvbmx5T3duZXIgYWRkSWZOb3RFeGlzdChtc2cuc2VuZGVyKSBleHRlcm5hbCAgewogICAgcmVxdWlyZShfaG9sZGVyICE9IG1zZy5zZW5kZXIpOwogICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgPj0gX2Ftb3VudCk7CiAgICByZXF1aXJlKGJ1eU91dFByaWNlIDw9IF9hbW91bnQpOwoKICAgIHVpbnQgbXVsdGlwbGllciA9IDEwICoqIGRlY2ltYWxzOwogICAgdWludCBidXlvdXRUb2tlbnMgPSBzYWZlRGl2KHNhZmVNdWwoX2Ftb3VudCwgbXVsdGlwbGllciksIGJ1eU91dFByaWNlKTsKCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS52YWx1ZSA9IHNhZmVBZGQoYmFsYW5jZXNbbXNnLnNlbmRlcl0udmFsdWUsIGJ1eW91dFRva2Vucyk7CiAgICBiYWxhbmNlc1tfaG9sZGVyXS52YWx1ZSA9IHNhZmVTdWIoYmFsYW5jZXNbX2hvbGRlcl0udmFsdWUsIGJ1eW91dFRva2Vucyk7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXS5leGlzdCA9IHRydWU7CgogICAgVHJhbnNmZXIoX2hvbGRlciwgbXNnLnNlbmRlciwgYnV5b3V0VG9rZW5zKTsKCiAgICBfaG9sZGVyLnRyYW5zZmVyKF9hbW91bnQpOwogICAgUGF5KF9ob2xkZXIsIF9hbW91bnQpOwogIH0KfQoKLy8vIEB0aXRsZSBTaWxlbnROb3RhcnkgINGBcm93ZHNhbGUgY29udHJhY3QKY29udHJhY3QgU2lsZW50Tm90YXJ5Q3Jvd2RzYWxlIGlzIEhhbHRhYmxlLCBLaWxsYWJsZSwgU2FmZU1hdGggewoKIC8vLyBQZXJpb2Qgb2YgdGhlIElDTyBzdGFnZQogdWludCBjb25zdGFudCBwdWJsaWMgRFVSQVRJT04gPSAxNCBkYXlzOwoKIC8vLyBUaGUgZHVyYXRpb24gb2YgSUNPCiB1aW50IHB1YmxpYyBpY29EdXJhdGlvbiA9IERVUkFUSU9OOwoKIC8vLy8gVGhlIHRva2VuIHdlIGFyZSBzZWxsaW5nCiBTaWxlbnROb3RhcnlUb2tlbiBwdWJsaWMgdG9rZW47CgogLy8vIEVzY3JvdyB3YWxsZXQKIGFkZHJlc3MgcHVibGljIG11bHRpc2lnV2FsbGV0OwoKIC8vLyBUZWFtIHdhbGxldAogYWRkcmVzcyBwdWJsaWMgdGVhbVdhbGxldDsKCiAvLy8gVGhlIFVOSVggdGltZXN0YW1wIHN0YXJ0IGRhdGUgb2YgdGhlIGNyb3dkc2FsZQogdWludCBwdWJsaWMgc3RhcnRzQXQ7CgogLy8vIHRoZSBudW1iZXIgb2YgdG9rZW5zIGFscmVhZHkgc29sZCB0aHJvdWdoIHRoaXMgY29udHJhY3QKIHVpbnQgcHVibGljIHRva2Vuc1NvbGQgPSAwOwoKIC8vLyAgSG93IG1hbnkgd2VpIG9mIGZ1bmRpbmcgd2UgaGF2ZSByYWlzZWQKIHVpbnQgcHVibGljIHdlaVJhaXNlZCA9IDA7CgogLy8vICBIb3cgbWFueSBkaXN0aW5jdCBhZGRyZXNzZXMgaGF2ZSBpbnZlc3RlZAogdWludCBwdWJsaWMgaW52ZXN0b3JDb3VudCA9IDA7CgogLy8vICBIb3cgbXVjaCB3ZWkgd2UgaGF2ZSByZXR1cm5lZCBiYWNrIHRvIHRoZSBjb250cmFjdCBhZnRlciBhIGZhaWxlZCBjcm93ZGZ1bmQuCiB1aW50IHB1YmxpYyBsb2FkZWRSZWZ1bmQgPSAwOwoKIC8vLyAgSG93IG11Y2ggd2VpIHdlIGhhdmUgZ2l2ZW4gYmFjayB0byBpbnZlc3RvcnMuCiB1aW50IHB1YmxpYyB3ZWlSZWZ1bmRlZCA9IDA7CgogLy8vICBIYXMgdGhpcyBjcm93ZHNhbGUgYmVlbiBmaW5hbGl6ZWQKIGJvb2wgcHVibGljIGZpbmFsaXplZDsKCiAvLy8gIEhvdyBtdWNoIEVUSCBlYWNoIGFkZHJlc3MgaGFzIGludmVzdGVkIHRvIHRoaXMgY3Jvd2RzYWxlCiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBpbnZlc3RlZEFtb3VudE9mOwoKIC8vLyAgSG93IG11Y2ggdG9rZW5zIHRoaXMgY3Jvd2RzYWxlIGhhcyBjcmVkaXRlZCBmb3IgZWFjaCBpbnZlc3RvciBhZGRyZXNzCiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyB0b2tlbkFtb3VudE9mOwoKIC8vLyBpZiB0aGUgZnVuZGluZyBnb2FsIGlzIG5vdCByZWFjaGVkLCBpbnZlc3RvcnMgbWF5IHdpdGhkcmF3IHRoZWlyIGZ1bmRzCiB1aW50IHB1YmxpYyBjb25zdGFudCBGVU5ESU5HX0dPQUwgPSAxMDAwIGV0aGVyOwoKIC8vLyB0b3B1cCB0ZWFtIHdhbGxldCBhZnRlciB0aGF0IHdpbGwgdG9wdXAgYm90aCAtIHRlYW0gYW5kIG11bHRpc2lnIHdhbGxldCBieSAzMiUgYW5kIDY4JQogdWludCBjb25zdGFudCBNVUxUSVNJR19XQUxMRVRfR09BTCA9IEZVTkRJTkdfR09BTDsKCiAvLy8gTWluaW11bSBvcmRlciBxdWFudGl0eSAwLjEgZXRoZXIKIHVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9JTlZFU1RFTUVOVCA9IDEwMCBmaW5uZXk7CgogLy8vIElDTyBzdGFydCB0b2tlbiBwcmljZQogdWludCBwdWJsaWMgY29uc3RhbnQgTUlOX1BSSUNFID0gMTBlOTsKCiAvLy8gTWF4aW11bSB0b2tlbiBwcmljZSwgaWYgcmVhY2hlZCBJQ08gd2lsbCBzdG9wCiB1aW50IHB1YmxpYyBjb25zdGFudCBNQVhfUFJJQ0UgPSAyMGUxMDsKCiAvLy8gSG93IG11Y2ggSUNPIHRva2VucyB0byBzb2xkCiB1aW50IHB1YmxpYyBjb25zdGFudCBJTlZFU1RPUl9UT0tFTlMgID0gMTBlMTE7CgogLy8vIFRva2VucyBjb3VudCBpbnZvbHZlZCBpbiBwcmljZSBjYWxjdWxhdGlvbgogdWludCBwdWJsaWMgY29uc3RhbnQgVE9UQUxfVE9LRU5TX0ZPUl9QUklDRSA9IElOVkVTVE9SX1RPS0VOUzsKCiAvLy8gbGFzdCB0b2tlbiBwcmljZQogdWludCBwdWJsaWMgdG9rZW5QcmljZSA9IE1JTl9QUklDRTsKCiAgLy8vIFN0YXRlIG1hY2hpbmUKICAvLy8gUHJlcGFyaW5nOiBBbGwgY29udHJhY3QgaW5pdGlhbGl6YXRpb24gY2FsbHMgYW5kIHZhcmlhYmxlcyBoYXZlIG5vdCBiZWVuIHNldCB5ZXQKICAvLy8gRnVuZGluZzogQWN0aXZlIGNyb3dkc2FsZQogIC8vLyBTdWNjZXNzOiBNaW5pbXVtIGZ1bmRpbmcgZ29hbCByZWFjaGVkCiAgLy8vIEZhaWx1cmU6IE1pbmltdW0gZnVuZGluZyBnb2FsIG5vdCByZWFjaGVkIGJlZm9yZSBlbmRpbmcgdGltZQogIC8vLyBGaW5hbGl6ZWQ6IFRoZSBmaW5hbGl6ZWQgaGFzIGJlZW4gY2FsbGVkIGFuZCBzdWNjZXNmdWxseSBleGVjdXRlZAogIC8vLyBSZWZ1bmRpbmc6IFJlZnVuZHMgYXJlIGxvYWRlZCBvbiB0aGUgY29udHJhY3QgZm9yIHJlY2xhaW0KIGVudW0gU3RhdGV7VW5rbm93biwgUHJlcGFyaW5nLCBGdW5kaW5nLCBTdWNjZXNzLCBGYWlsdXJlLCBGaW5hbGl6ZWQsIFJlZnVuZGluZ30KCiAvLy8gQSBuZXcgaW52ZXN0bWVudCB3YXMgbWFkZQogZXZlbnQgSW52ZXN0ZWQoYWRkcmVzcyBpbnZlc3RvciwgdWludCB3ZWlBbW91bnQsIHVpbnQgdG9rZW5BbW91bnQpOwoKIC8vLyBSZWZ1bmQgd2FzIHByb2Nlc3NlZCBmb3IgYSBjb250cmlidXRvcgogZXZlbnQgUmVmdW5kKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQgd2VpQW1vdW50KTsKCiAvLy8gQ3Jvd2RzYWxlIGVuZCB0aW1lIGhhcyBiZWVuIGNoYW5nZWQKIGV2ZW50IEVuZHNBdENoYW5nZWQodWludCBlbmRzQXQpOwoKIC8vLyBOZXcgcHJpY2Ugd2FzIGNhbGN1bGF0ZWQKIGV2ZW50IFByaWNlQ2hhbmdlZCh1aW50IG9sZFZhbHVlLCB1aW50IG5ld1ZhbHVlKTsKCiAvLy8gTW9kaWZpZWQgYWxsb3dpbmcgZXhlY3V0aW9uIG9ubHkgaWYgdGhlIGNyb3dkc2FsZSBpcyBjdXJyZW50bHkgcnVubmluCiBtb2RpZmllciBpblN0YXRlKFN0YXRlIHN0YXRlKSB7CiAgIHJlcXVpcmUoZ2V0U3RhdGUoKSA9PSBzdGF0ZSk7CiAgIF87CiB9CgogLy8vIEBkZXYgQ29uc3RydWN0b3IKIC8vLyBAcGFyYW0gX3Rva2VuIFNOVFIgdG9rZW4gYWRkcmVzcwogLy8vIEBwYXJhbSBfbXVsdGlzaWdXYWxsZXQgIG11bHRpc2lnIHdhbGxldCBhZGRyZXNzCiAvLy8gQHBhcmFtIF9zdGFydCAgSUNPIHN0YXJ0IHRpbWUKIGZ1bmN0aW9uIFNpbGVudE5vdGFyeUNyb3dkc2FsZShhZGRyZXNzIF90b2tlbiwgYWRkcmVzcyBfbXVsdGlzaWdXYWxsZXQsIGFkZHJlc3MgX3RlYW1XYWxsZXQsIHVpbnQgX3N0YXJ0KSB7CiAgIHJlcXVpcmUoX3Rva2VuICE9IDApOwogICByZXF1aXJlKF9tdWx0aXNpZ1dhbGxldCAhPSAwKTsKICAgcmVxdWlyZShfdGVhbVdhbGxldCAhPSAwKTsKICAgcmVxdWlyZShfc3RhcnQgIT0gMCk7CgogICB0b2tlbiA9IFNpbGVudE5vdGFyeVRva2VuKF90b2tlbik7CiAgIG11bHRpc2lnV2FsbGV0ID0gX211bHRpc2lnV2FsbGV0OwogICB0ZWFtV2FsbGV0ID0gX3RlYW1XYWxsZXQ7CiAgIHN0YXJ0c0F0ID0gX3N0YXJ0OwogfQoKIC8vLyBAZGV2IERvbid0IGV4cGVjdCB0byBqdXN0IHNlbmQgaW4gbW9uZXkgYW5kIGdldCB0b2tlbnMuCiBmdW5jdGlvbigpIHBheWFibGUgewogICBidXkoKTsKIH0KCiAgLy8vIEBkZXYgTWFrZSBhbiBpbnZlc3RtZW50LgogIC8vLyBAcGFyYW0gcmVjZWl2ZXIgVGhlIEV0aGVyZXVtIGFkZHJlc3Mgd2hvIHJlY2VpdmVzIHRoZSB0b2tlbnMKIGZ1bmN0aW9uIGludmVzdEludGVybmFsKGFkZHJlc3MgcmVjZWl2ZXIpIHN0b3BJbkVtZXJnZW5jeSBwcml2YXRlIHsKICAgcmVxdWlyZShnZXRTdGF0ZSgpID09IFN0YXRlLkZ1bmRpbmcpOwogICByZXF1aXJlKG1zZy52YWx1ZSA+PSBNSU5fSU5WRVNURU1FTlQpOwoKICAgdWludCB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CgogICB2YXIgbXVsdGlwbGllciA9IDEwICoqIHRva2VuLmRlY2ltYWxzKCk7CiAgIHVpbnQgdG9rZW5BbW91bnQgPSBzYWZlRGl2KHNhZmVNdWwod2VpQW1vdW50LCBtdWx0aXBsaWVyKSwgdG9rZW5QcmljZSk7CiAgIGFzc2VydCh0b2tlbkFtb3VudCA+IDApOwoKICAgaWYoaW52ZXN0ZWRBbW91bnRPZltyZWNlaXZlcl0gPT0gMCkgewogICAgICAvLyBBIG5ldyBpbnZlc3RvcgogICAgICBpbnZlc3RvckNvdW50Kys7CiAgIH0KICAgLy8gVXBkYXRlIGludmVzdG9yCiAgIGludmVzdGVkQW1vdW50T2ZbcmVjZWl2ZXJdID0gc2FmZUFkZChpbnZlc3RlZEFtb3VudE9mW3JlY2VpdmVyXSwgd2VpQW1vdW50KTsKICAgdG9rZW5BbW91bnRPZltyZWNlaXZlcl0gPSBzYWZlQWRkKHRva2VuQW1vdW50T2ZbcmVjZWl2ZXJdLCB0b2tlbkFtb3VudCk7CiAgIC8vIFVwZGF0ZSB0b3RhbHMKICAgd2VpUmFpc2VkID0gc2FmZUFkZCh3ZWlSYWlzZWQsIHdlaUFtb3VudCk7CiAgIHRva2Vuc1NvbGQgPSBzYWZlQWRkKHRva2Vuc1NvbGQsIHRva2VuQW1vdW50KTsKCiAgIHZhciBuZXdQcmljZSA9IGNhbGN1bGF0ZVByaWNlKHRva2Vuc1NvbGQpOwogICBQcmljZUNoYW5nZWQodG9rZW5QcmljZSwgbmV3UHJpY2UpOwogICB0b2tlblByaWNlID0gbmV3UHJpY2U7CgogICBhc3NpZ25Ub2tlbnMocmVjZWl2ZXIsIHRva2VuQW1vdW50KTsKICAgaWYod2VpUmFpc2VkIDw9IE1VTFRJU0lHX1dBTExFVF9HT0FMKQogICAgIG11bHRpc2lnV2FsbGV0LnRyYW5zZmVyKHdlaUFtb3VudCk7CiAgIGVsc2UgewogICAgIGludCByZW1haW4gPSBpbnQod2VpQW1vdW50IC0gd2VpUmFpc2VkIC0gTVVMVElTSUdfV0FMTEVUX0dPQUwpOwoKICAgICBpZihyZW1haW4gPiAwKSB7CiAgICAgICBtdWx0aXNpZ1dhbGxldC50cmFuc2Zlcih1aW50KHJlbWFpbikpOwogICAgICAgd2VpQW1vdW50ID0gc2FmZVN1Yih3ZWlBbW91bnQsIHVpbnQocmVtYWluKSk7CiAgICAgfQoKICAgICB2YXIgZGlzdHJpYnV0ZWRBbW91bnQgPSBzYWZlRGl2KHNhZmVNdWwod2VpQW1vdW50LCAzMiksIDEwMCk7CiAgICAgdGVhbVdhbGxldC50cmFuc2ZlcihkaXN0cmlidXRlZEFtb3VudCk7CiAgICAgbXVsdGlzaWdXYWxsZXQudHJhbnNmZXIoc2FmZVN1Yih3ZWlBbW91bnQsIGRpc3RyaWJ1dGVkQW1vdW50KSk7CgogICB9CiAgIC8vIFRlbGwgdXMgaW52ZXN0IHdhcyBzdWNjZXNzCiAgIEludmVzdGVkKHJlY2VpdmVyLCB3ZWlBbW91bnQsIHRva2VuQW1vdW50KTsKIH0KCiAgLy8vIEBkZXYgQWxsb3cgYW5vbnltb3VzIGNvbnRyaWJ1dGlvbnMgdG8gdGhpcyBjcm93ZHNhbGUuCiAgLy8vIEBwYXJhbSByZWNlaXZlciBUaGUgRXRoZXJldW0gYWRkcmVzcyB3aG8gcmVjZWl2ZXMgdGhlIHRva2VucwogZnVuY3Rpb24gaW52ZXN0KGFkZHJlc3MgcmVjZWl2ZXIpIHB1YmxpYyBwYXlhYmxlIHsKICAgaW52ZXN0SW50ZXJuYWwocmVjZWl2ZXIpOwogfQoKICAvLy8gQGRldiBQYXkgZm9yIGZ1bmRpbmcsIGdldCBpbnZlc3RlZCB0b2tlbnMgYmFjayBpbiB0aGUgc2VuZGVyIGFkZHJlc3MuCiBmdW5jdGlvbiBidXkoKSBwdWJsaWMgcGF5YWJsZSB7CiAgIGludmVzdChtc2cuc2VuZGVyKTsKIH0KCiAvLy8gQGRldiBGaW5hbGl6ZSBhIHN1Y2NjZXNmdWwgY3Jvd2RzYWxlLiBUaGUgb3duZXIgY2FuIHRyaWdncmUgYSBjYWxsIHRoZSBjb250cmFjdCB0aGF0IHByb3ZpZGVzIHBvc3QtY3Jvd2RzYWxlIGFjdGlvbnMsIGxpa2UgcmVsZWFzaW5nIHRoZSB0b2tlbnMuCiBmdW5jdGlvbiBmaW5hbGl6ZSgpIHB1YmxpYyBpblN0YXRlKFN0YXRlLlN1Y2Nlc3MpIG9ubHlPd25lciBzdG9wSW5FbWVyZ2VuY3kgewogICAvLyBJZiBub3QgYWxyZWFkeSBmaW5hbGl6ZWQKICAgcmVxdWlyZSghZmluYWxpemVkKTsKCiAgIGZpbmFsaXplZCA9IHRydWU7CiAgIGZpbmFsaXplQ3Jvd2RzYWxlKCk7CiB9CgogLy8vIEBkZXYgRmluYWxpemUgYSBzdWNjY2VzZnVsIGNyb3dkc2FsZS4KIGZ1bmN0aW9uIGZpbmFsaXplQ3Jvd2RzYWxlKCkgaW50ZXJuYWwgewogICB2YXIgbXVsdGlwbGllciA9IDEwICoqIHRva2VuLmRlY2ltYWxzKCk7CiAgIHVpbnQgaW52ZXN0b3JUb2tlbnMgPSBzYWZlTXVsKElOVkVTVE9SX1RPS0VOUywgbXVsdGlwbGllcik7CiAgIGlmKGludmVzdG9yVG9rZW5zID4gdG9rZW5zU29sZCkKICAgICBhc3NpZ25Ub2tlbnModGVhbVdhbGxldCwgc2FmZVN1YihpbnZlc3RvclRva2VucywgdG9rZW5zU29sZCkpOwogICB0b2tlbi5yZWxlYXNlVG9rZW5UcmFuc2ZlcigpOwogfQoKICAvLy8gQGRldiAgQWxsb3cgbG9hZCByZWZ1bmRzIGJhY2sgb24gdGhlIGNvbnRyYWN0IGZvciB0aGUgcmVmdW5kaW5nLiBUaGUgdGVhbSBjYW4gdHJhbnNmZXIgdGhlIGZ1bmRzIGJhY2sgb24gdGhlIHNtYXJ0IGNvbnRyYWN0IGluIHRoZSBjYXNlIHRoZSBtaW5pbXVtIGdvYWwgd2FzIG5vdCByZWFjaGVkLgogZnVuY3Rpb24gbG9hZFJlZnVuZCgpIHB1YmxpYyBwYXlhYmxlIGluU3RhdGUoU3RhdGUuRmFpbHVyZSkgewogICBpZihtc2cudmFsdWUgPT0gMCkKICAgICByZXZlcnQoKTsKICAgbG9hZGVkUmVmdW5kID0gc2FmZUFkZChsb2FkZWRSZWZ1bmQsIG1zZy52YWx1ZSk7CiB9CgogLy8vIEBkZXYgIEludmVzdG9ycyBjYW4gY2xhaW0gcmVmdW5kLgogZnVuY3Rpb24gcmVmdW5kKCkgcHVibGljIGluU3RhdGUoU3RhdGUuUmVmdW5kaW5nKSB7CiAgIHVpbnQyNTYgd2VpVmFsdWUgPSBpbnZlc3RlZEFtb3VudE9mW21zZy5zZW5kZXJdOwogICBpZiAod2VpVmFsdWUgPT0gMCkKICAgICByZXZlcnQoKTsKICAgaW52ZXN0ZWRBbW91bnRPZlttc2cuc2VuZGVyXSA9IDA7CiAgIHdlaVJlZnVuZGVkID0gc2FmZUFkZCh3ZWlSZWZ1bmRlZCwgd2VpVmFsdWUpOwogICBSZWZ1bmQobXNnLnNlbmRlciwgd2VpVmFsdWUpOwogICBpZiAoIW1zZy5zZW5kZXIuc2VuZCh3ZWlWYWx1ZSkpCiAgICAgcmV2ZXJ0KCk7CiB9CgogIC8vLyBAZGV2IENyb3dkZnVuZCBzdGF0ZSBtYWNoaW5lIG1hbmFnZW1lbnQuCiAgLy8vIEByZXR1cm4gU3RhdGUgY3VycmVudCBzdGF0ZQogZnVuY3Rpb24gZ2V0U3RhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoU3RhdGUpIHsKICAgaWYgKGZpbmFsaXplZCkKICAgICByZXR1cm4gU3RhdGUuRmluYWxpemVkOwogICBpZiAoYWRkcmVzcyh0b2tlbikgPT0gMCB8fCBhZGRyZXNzKG11bHRpc2lnV2FsbGV0KSA9PSAwKQogICAgIHJldHVybiBTdGF0ZS5QcmVwYXJpbmc7CiAgIGlmIChub3cgPj0gc3RhcnRzQXQgJiYgbm93IDwgc3RhcnRzQXQgKyBpY29EdXJhdGlvbiAmJiAhaXNDcm93ZHNhbGVGdWxsKCkpCiAgICAgcmV0dXJuIFN0YXRlLkZ1bmRpbmc7CiAgIGlmIChpc01pbmltdW1Hb2FsUmVhY2hlZCgpKQogICAgICAgcmV0dXJuIFN0YXRlLlN1Y2Nlc3M7CiAgIGlmICghaXNNaW5pbXVtR29hbFJlYWNoZWQoKSAmJiB3ZWlSYWlzZWQgPiAwICYmIGxvYWRlZFJlZnVuZCA+PSB3ZWlSYWlzZWQpCiAgICAgcmV0dXJuIFN0YXRlLlJlZnVuZGluZzsKICAgcmV0dXJuIFN0YXRlLkZhaWx1cmU7CiB9CgogLy8vIEBkZXYgUHJvbG9uZ2F0ZSBJQ08gaWYgb3duZXIgZGVjaWRlIGl0CiBmdW5jdGlvbiBwcm9sb25nYXRlKCkgcHVibGljIG9ubHlPd25lciB7CiAgIHJlcXVpcmUoaWNvRHVyYXRpb24gPCBEVVJBVElPTiAqIDIpOwogICBpY29EdXJhdGlvbiArPSBEVVJBVElPTjsKIH0KCiAvLy8gQGRldiBDYWxjdWxhdGluZyBwcmljZSwgaXQgaXMgbm90IGxpbmVhciBmdW5jdGlvbgogLy8vIEBwYXJhbSB0b3RhbFJhaXNlZFRva2VucyB0b3RhbCByYWlzZWQgdG9rZW5zCiAvLy8gQHJldHVybiBwcmljZSBpbiB3ZWkKIGZ1bmN0aW9uIGNhbGN1bGF0ZVByaWNlKHVpbnQgdG90YWxSYWlzZWRUb2tlbnMpIGludGVybmFsIHJldHVybnMgKHVpbnQgcHJpY2UpIHsKICAgaW50IG11bHRpcGxpZXIgPSBpbnQoMTAqKnRva2VuLmRlY2ltYWxzKCkpOwogICBpbnQgY29lZmZpY2llbnQgPSBpbnQoc2FmZURpdih0b3RhbFJhaXNlZFRva2VucywgVE9UQUxfVE9LRU5TX0ZPUl9QUklDRSkpIC0gbXVsdGlwbGllcjsKICAgaW50IHByaWNlRGlmZmVyZW5jZSA9IGNvZWZmaWNpZW50ICogaW50KE1BWF9QUklDRSAtIE1JTl9QUklDRSkgLyBtdWx0aXBsaWVyOwogICBhc3NlcnQoaW50KE1BWF9QUklDRSkgPj0gLXByaWNlRGlmZmVyZW5jZSk7CiAgIHJldHVybiB1aW50KHByaWNlRGlmZmVyZW5jZSArIGludChNQVhfUFJJQ0UpKTsKIH0KCiAgLy8vIEBkZXYgTWluaW11bSBnb2FsIHdhcyByZWFjaGVkCiAgLy8vIEByZXR1cm4gdHJ1ZSBpZiB0aGUgY3Jvd2RzYWxlIGhhcyByYWlzZWQgZW5vdWdoIG1vbmV5IHRvIGJlIGEgc3VjY2VzCiAgZnVuY3Rpb24gaXNNaW5pbXVtR29hbFJlYWNoZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCByZWFjaGVkKSB7CiAgICByZXR1cm4gd2VpUmFpc2VkID49IEZVTkRJTkdfR09BTDsKICB9CgogIC8vLyBAZGV2IENoZWNrIGNyb3dkc2FsZSBsaW1pdAogIC8vLyBAcmV0dXJuIGxpbWl0IHJlYWNoZWQgcmVzdWx0CiAgZnVuY3Rpb24gaXNDcm93ZHNhbGVGdWxsKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB0b2tlblByaWNlID49IE1BWF9QUklDRQogICAgICB8fCB0b2tlbnNTb2xkID49IHNhZmVNdWwoVE9UQUxfVE9LRU5TX0ZPUl9QUklDRSwgIDEwICoqIHRva2VuLmRlY2ltYWxzKCkpCiAgICAgIHx8IG5vdyA+IHN0YXJ0c0F0ICsgaWNvRHVyYXRpb247CiAgfQoKICAgLy8vIEBkZXYgRHluYW1pY2FsbHkgY3JlYXRlIHRva2VucyBhbmQgYXNzaWduIHRoZW0gdG8gdGhlIGludmVzdG9yLgogICAvLy8gQHBhcmFtIHJlY2VpdmVyIGFkZHJlc3MKICAgLy8vIEBwYXJhbSB0b2tlbkFtb3VudCB0b2tlbnMgYW1vdW50CiAgZnVuY3Rpb24gYXNzaWduVG9rZW5zKGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgdG9rZW5BbW91bnQpIHByaXZhdGUgewogICAgdG9rZW4ubWludChyZWNlaXZlciwgdG9rZW5BbW91bnQpOwogIH0KfQ=='.
	

]
