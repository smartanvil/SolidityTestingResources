Class {
	#name : #SRTf063c5e8033e425188f8764b11598fe10f991e5e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTf063c5e8033e425188f8764b11598fe10f991e5e >> base64 [
	^ 'Y29udHJhY3QgU3RhbmRhcmRUb2tlblByb3RvY29sIHsKCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpIHt9CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkge30KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9yZWNpcGllbnQsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fQoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF9yZWNpcGllbnQsIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwoKfQoKCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgU3RhbmRhcmRUb2tlblByb3RvY29sIHsKCiAgICBtb2RpZmllciB3aGVuX2Nhbl90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSkgewogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKSBfOwogICAgfQoKICAgIG1vZGlmaWVyIHdoZW5fY2FuX3JlY2VpdmUoYWRkcmVzcyBfcmVjaXBpZW50LCB1aW50MjU2IF92YWx1ZSkgewogICAgICAgIGlmIChiYWxhbmNlc1tfcmVjaXBpZW50XSArIF92YWx1ZSA+IGJhbGFuY2VzW19yZWNpcGllbnRdKSBfOwogICAgfQoKICAgIG1vZGlmaWVyIHdoZW5faXNfYWxsb3dlZChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9kZWxlZ2F0ZSwgdWludDI1NiBfdmFsdWUpIHsKICAgICAgICBpZiAoYWxsb3dlZFtfZnJvbV1bX2RlbGVnYXRlXSA+PSBfdmFsdWUpIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfcmVjaXBpZW50LCB1aW50MjU2IF92YWx1ZSkKICAgICAgICB3aGVuX2Nhbl90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdmFsdWUpCiAgICAgICAgd2hlbl9jYW5fcmVjZWl2ZShfcmVjaXBpZW50LCBfdmFsdWUpCiAgICAgICAgcmV0dXJucyAoYm9vbCBvX3N1Y2Nlc3MpCiAgICB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VzW19yZWNpcGllbnRdICs9IF92YWx1ZTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfcmVjaXBpZW50LCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9yZWNpcGllbnQsIHVpbnQyNTYgX3ZhbHVlKQogICAgICAgIHdoZW5fY2FuX3RyYW5zZmVyKF9mcm9tLCBfdmFsdWUpCiAgICAgICAgd2hlbl9jYW5fcmVjZWl2ZShfcmVjaXBpZW50LCBfdmFsdWUpCiAgICAgICAgd2hlbl9pc19hbGxvd2VkKF9mcm9tLCBtc2cuc2VuZGVyLCBfdmFsdWUpCiAgICAgICAgcmV0dXJucyAoYm9vbCBvX3N1Y2Nlc3MpCiAgICB7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZXNbX3JlY2lwaWVudF0gKz0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfcmVjaXBpZW50LCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBvX3N1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgb19yZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7Cgp9Cgpjb250cmFjdCBHVVBUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsKCiAgLy9GSUVMRFMKICAvL0NPTlNUQU5UUwogIHVpbnQgcHVibGljIGNvbnN0YW50IExPQ0tPVVRfUEVSSU9EID0gMSB5ZWFyczsgLy90aW1lIGFmdGVyIGVuZCBkYXRlIHRoYXQgaWxsaXF1aWQgR1VQIGNhbiBiZSB0cmFuc2ZlcnJlZAoKICAvL0FTU0lHTkVEIElOIElOSVRJQUxJWkFUSU9OCiAgdWludCBwdWJsaWMgZW5kTWludGluZ1RpbWU7IC8vVGltZSBpbiBzZWNvbmRzIG5vIG1vcmUgdG9rZW5zIGNhbiBiZSBjcmVhdGVkCiAgYWRkcmVzcyBwdWJsaWMgbWludGVyOyAvL2FkZHJlc3Mgb2YgdGhlIGFjY291bnQgd2hpY2ggbWF5IG1pbnQgbmV3IHRva2VucwoKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBpbGxpcXVpZEJhbGFuY2U7IC8vQmFsYW5jZSBvZiAnRnJvemVuIGZ1bmRzJwoKICAvL01PRElGSUVSUwogIC8vQ2FuIG9ubHkgYmUgY2FsbGVkIGJ5IGNvbnRyaWJ1dGlvbiBjb250cmFjdC4KICBtb2RpZmllciBvbmx5X21pbnRlciB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBtaW50ZXIpIHRocm93OwogICAgXzsKICB9CgogIC8vIENhbiBvbmx5IGJlIGNhbGxlZCBpZiBpbGxpcXVpZCB0b2tlbnMgbWF5IGJlIHRyYW5zZm9ybWVkIGludG8gbGlxdWlkLgogIC8vIFRoaXMgaGFwcGVucyB3aGVuIGBMT0NLT1VUX1BFUklPRGAgb2YgdGltZSBwYXNzZXMgYWZ0ZXIgYGVuZE1pbnRpbmdUaW1lYC4KICBtb2RpZmllciB3aGVuX3RoYXdhYmxlIHsKICAgIGlmIChub3cgPCBlbmRNaW50aW5nVGltZSArIExPQ0tPVVRfUEVSSU9EKSB0aHJvdzsKICAgIF87CiAgfQoKICAvLyBDYW4gb25seSBiZSBjYWxsZWQgaWYgKGxpcXVpZCkgdG9rZW5zIG1heSBiZSB0cmFuc2ZlcnJlZC4gSGFwcGVucwogIC8vIGltbWVkaWF0ZWx5IGFmdGVyIGBlbmRNaW50aW5nVGltZWAuCiAgbW9kaWZpZXIgd2hlbl90cmFuc2ZlcmFibGUgewogICAgaWYgKG5vdyA8IGVuZE1pbnRpbmdUaW1lKSB0aHJvdzsKICAgIF87CiAgfQoKICAvLyBDYW4gb25seSBiZSBjYWxsZWQgaWYgdGhlIGBjcm93ZGZ1bmRlcmAgaXMgYWxsb3dlZCB0byBtaW50IHRva2Vucy4gQW55CiAgLy8gdGltZSBiZWZvcmUgYGVuZE1pbnRpbmdUaW1lYC4KICBtb2RpZmllciB3aGVuX21pbnRhYmxlIHsKICAgIGlmIChub3cgPj0gZW5kTWludGluZ1RpbWUpIHRocm93OwogICAgXzsKICB9CgogIC8vIEluaXRpYWxpemF0aW9uIGNvbnRyYWN0IGFzc2lnbnMgYWRkcmVzcyBvZiBjcm93ZGZ1bmQgY29udHJhY3QgYW5kIGVuZCB0aW1lLgogIGZ1bmN0aW9uIEdVUFRva2VuKGFkZHJlc3MgX21pbnRlciwgdWludCBfZW5kTWludGluZ1RpbWUpIHsKICAgIGVuZE1pbnRpbmdUaW1lID0gX2VuZE1pbnRpbmdUaW1lOwogICAgbWludGVyID0gX21pbnRlcjsKICB9CgogIC8vIEZhbGxiYWNrIGZ1bmN0aW9uIHRocm93cyB3aGVuIGNhbGxlZC4KICBmdW5jdGlvbigpIHsKICAgIHRocm93OwogIH0KCiAgLy8gQ3JlYXRlIG5ldyB0b2tlbnMgd2hlbiBjYWxsZWQgYnkgdGhlIGNyb3dkZnVuZCBjb250cmFjdC4KICAvLyBPbmx5IGNhbGxhYmxlIGJlZm9yZSB0aGUgZW5kIHRpbWUuCiAgZnVuY3Rpb24gY3JlYXRlVG9rZW4oYWRkcmVzcyBfcmVjaXBpZW50LCB1aW50IF92YWx1ZSkKICAgIHdoZW5fbWludGFibGUKICAgIG9ubHlfbWludGVyCiAgICByZXR1cm5zIChib29sIG9fc3VjY2VzcykKICB7CiAgICBiYWxhbmNlc1tfcmVjaXBpZW50XSArPSBfdmFsdWU7CiAgICB0b3RhbFN1cHBseSArPSBfdmFsdWU7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vIENyZWF0ZSBhbiBpbGxpcXVpZEJhbGFuY2Ugd2hpY2ggY2Fubm90IGJlIHRyYWRlZCB1bnRpbCBlbmQgb2YgbG9ja291dCBwZXJpb2QuCiAgLy8gQ2FuIG9ubHkgYmUgY2FsbGVkIGJ5IGNyb3dkZnVuZCBjb250cmFjdCBiZWZvciB0aGUgZW5kIHRpbWUuCiAgZnVuY3Rpb24gY3JlYXRlSWxsaXF1aWRUb2tlbihhZGRyZXNzIF9yZWNpcGllbnQsIHVpbnQgX3ZhbHVlKQogICAgd2hlbl9taW50YWJsZQogICAgb25seV9taW50ZXIKICAgIHJldHVybnMgKGJvb2wgb19zdWNjZXNzKQogIHsKICAgIGlsbGlxdWlkQmFsYW5jZVtfcmVjaXBpZW50XSArPSBfdmFsdWU7CiAgICB0b3RhbFN1cHBseSArPSBfdmFsdWU7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vIE1ha2Ugc2VuZGVyJ3MgaWxsaXF1aWQgYmFsYW5jZSBsaXF1aWQgd2hlbiBjYWxsZWQgYWZ0ZXIgbG9ja291dCBwZXJpb2QuCiAgZnVuY3Rpb24gbWFrZUxpcXVpZCgpCiAgICB3aGVuX3RoYXdhYmxlCiAgICByZXR1cm5zIChib29sIG9fc3VjY2VzcykKICB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBpbGxpcXVpZEJhbGFuY2VbbXNnLnNlbmRlcl07CiAgICBpbGxpcXVpZEJhbGFuY2VbbXNnLnNlbmRlcl0gPSAwOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvLyBUcmFuc2ZlciBhbW91bnQgb2YgdG9rZW5zIGZyb20gc2VuZGVyIGFjY291bnQgdG8gcmVjaXBpZW50LgogIC8vIE9ubHkgY2FsbGFibGUgYWZ0ZXIgdGhlIGNyb3dkIGZ1bmQgZW5kIGRhdGUuCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfcmVjaXBpZW50LCB1aW50IF9hbW91bnQpCiAgICB3aGVuX3RyYW5zZmVyYWJsZQogICAgcmV0dXJucyAoYm9vbCBvX3N1Y2Nlc3MpCiAgewogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF9yZWNpcGllbnQsIF9hbW91bnQpOwogIH0KCiAgLy8gVHJhbnNmZXIgYW1vdW50IG9mIHRva2VucyBmcm9tIGEgc3BlY2lmaWVkIGFkZHJlc3MgdG8gYSByZWNpcGllbnQuCiAgLy8gT25seSBjYWxsYWJsZSBhZnRlciB0aGUgY3Jvd2QgZnVuZCBlbmQgZGF0ZS4KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfcmVjaXBpZW50LCB1aW50IF9hbW91bnQpCiAgICB3aGVuX3RyYW5zZmVyYWJsZQogICAgcmV0dXJucyAoYm9vbCBvX3N1Y2Nlc3MpCiAgewogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3JlY2lwaWVudCwgX2Ftb3VudCk7CiAgfQp9Cgpjb250cmFjdCBTYWZlTWF0aCB7CgogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgaWYgKCFhc3NlcnRpb24pIHRocm93OwogIH0KCiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA+IDApOwogICAgdWludCBjID0gYSAvIGI7CiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgIHJldHVybiBjOwogIH0KCn0KCmNvbnRyYWN0IENvbnRyaWJ1dGlvbiBpcyBTYWZlTWF0aCB7CgogIC8vRklFTERTCgogIC8vQ09OU1RBTlRTCiAgLy9UaW1lIGxpbWl0cwogIHVpbnQgcHVibGljIGNvbnN0YW50IFNUQUdFX09ORV9USU1FX0VORCA9IDEgaG91cnM7CiAgdWludCBwdWJsaWMgY29uc3RhbnQgU1RBR0VfVFdPX1RJTUVfRU5EID0gMyBkYXlzOwogIHVpbnQgcHVibGljIGNvbnN0YW50IFNUQUdFX1RIUkVFX1RJTUVfRU5EID0gMiB3ZWVrczsKICB1aW50IHB1YmxpYyBjb25zdGFudCBTVEFHRV9GT1VSX1RJTUVfRU5EID0gNCB3ZWVrczsKICAvL1ByaWNlcyBvZiBHVVAKICB1aW50IHB1YmxpYyBjb25zdGFudCBQUklDRV9TVEFHRV9PTkUgPSA0MDAwMDA7CiAgdWludCBwdWJsaWMgY29uc3RhbnQgUFJJQ0VfU1RBR0VfVFdPID0gMzY2MDAwOwogIHVpbnQgcHVibGljIGNvbnN0YW50IFBSSUNFX1NUQUdFX1RIUkVFID0gMzMzMDAwOwogIHVpbnQgcHVibGljIGNvbnN0YW50IFBSSUNFX1NUQUdFX0ZPVVIgPSAzMDAwMDA7CiAgdWludCBwdWJsaWMgY29uc3RhbnQgUFJJQ0VfQlRDUyA9IDQwMDAwMDsKICAvL0dVUCBUb2tlbiBMaW1pdHMKICB1aW50IHB1YmxpYyBjb25zdGFudCBNQVhfU1VQUExZID0gICAgICAgIDEwMDAwMDAwMDAwMDsKICB1aW50IHB1YmxpYyBjb25zdGFudCBBTExPQ19JTExJUVVJRF9URUFNID0gODAwMDAwMDAwMDsKICB1aW50IHB1YmxpYyBjb25zdGFudCBBTExPQ19MSVFVSURfVEVBTSA9ICAxMzAwMDAwMDAwMDsKICB1aW50IHB1YmxpYyBjb25zdGFudCBBTExPQ19CT1VOVElFUyA9ICAgICAgMjAwMDAwMDAwMDsKICB1aW50IHB1YmxpYyBjb25zdGFudCBBTExPQ19ORVdfVVNFUlMgPSAgICAxNzAwMDAwMDAwMDsKICB1aW50IHB1YmxpYyBjb25zdGFudCBBTExPQ19DUk9XRFNBTEUgPSAgICA2MDAwMDAwMDAwMDsKICB1aW50IHB1YmxpYyBjb25zdGFudCBCVENTX1BPUlRJT05fTUFYID0gMzc1MDAgKiBQUklDRV9CVENTOwogIC8vQVNTSUdORUQgSU4gSU5JVElBTElaQVRJT04KICAvL1N0YXJ0IGFuZCBlbmQgdGltZXMKICB1aW50IHB1YmxpYyBwdWJsaWNTdGFydFRpbWUgPSAxNDkwNDQ2ODAwOyAvL1RpbWUgaW4gc2Vjb25kcyBwdWJsaWMgY3Jvd2QgZnVuZCBzdGFydHMuCiAgdWludCBwdWJsaWMgcHJpdmF0ZVN0YXJ0VGltZSA9IDE0OTA0MzI0MDA7IC8vVGltZSBpbiBzZWNvbmRzIHdoZW4gQlRDU3Vpc3NlIGNhbiBwdXJjaGFzZSB1cCB0byAxMjUwMDAgRVRIIHdvcnRoIG9mIEdVUDsKICB1aW50IHB1YmxpYyBwdWJsaWNFbmRUaW1lOyAvL1RpbWUgaW4gc2Vjb25kcyBjcm93ZHNhbGUgZW5kcwogIC8vU3BlY2lhbCBBZGRyZXNzZXMKICBhZGRyZXNzIHB1YmxpYyBidGNzQWRkcmVzcyA9IDB4MDBhODhFRGFBOWVBZDAwQTFkMTE0ZTQ4MjBCMEIwZjJlMzY1MUVDRTsgLy9BZGRyZXNzIHVzZWQgYnkgQlRDU3Vpc3NlCiAgYWRkcmVzcyBwdWJsaWMgbXVsdGlzaWdBZGRyZXNzID0gMHgyQ0FmZEMzMmFDOWVDNTVlOTE1NzE2YkM0MzAzN0JkMkM2ODk1MTJFOyAvL0FkZHJlc3MgdG8gd2hpY2ggYWxsIGV0aGVyIGZsb3dzLgogIGFkZHJlc3MgcHVibGljIG1hdGNocG9vbEFkZHJlc3MgPSAweDAwY2U2MzNiNDc4OUQxYTE2YTBhRDNBRUM1ODU5OUI3NmQ1RDY2OUU7IC8vQWRkcmVzcyB0byB3aGljaCBBTExPQ19CT1VOVElFUywgQUxMT0NfTElRVUlEX1RFQU0sIEFMTE9DX05FV19VU0VSUywgQUxMT0NfSUxMSVFVSURfVEVBTSBpcyBzZW50IHRvLgogIGFkZHJlc3MgcHVibGljIG93bmVyQWRkcmVzcyA9IDB4MDBjZTYzM2I0Nzg5RDFhMTZhMGFEM0FFQzU4NTk5Qjc2ZDVENjY5RTsgLy9BZGRyZXNzIG9mIHRoZSBjb250cmFjdCBvd25lci4gQ2FuIGhhbHQgdGhlIGNyb3dkc2FsZS4KICAvL0NvbnRyYWN0cwogIEdVUFRva2VuIHB1YmxpYyBndXBUb2tlbjsgLy9FeHRlcm5hbCB0b2tlbiBjb250cmFjdCBob2xsZGluZyB0aGUgR1VQCiAgLy9SdW5uaW5nIHRvdGFscwogIHVpbnQgcHVibGljIGV0aGVyUmFpc2VkOyAvL1RvdGFsIEV0aGVyIHJhaXNlZC4KICB1aW50IHB1YmxpYyBndXBTb2xkOyAvL1RvdGFsIEdVUCBjcmVhdGVkCiAgdWludCBwdWJsaWMgYnRjc1BvcnRpb25Ub3RhbDsgLy9Ub3RhbCBvZiBUb2tlbnMgcHVyY2hhc2VkIGJ5IEJUQyBTdWlzc2UuIE5vdCB0byBleGNlZWQgQlRDU19QT1JUSU9OX01BWC4KICAvL2Jvb2xlYW5zCiAgYm9vbCBwdWJsaWMgaGFsdGVkOyAvL2hhbHRzIHRoZSBjcm93ZCBzYWxlIGlmIHRydWUuCgogIC8vRlVOQ1RJT04gTU9ESUZJRVJTCgogIC8vSXMgY3VycmVudGx5IGluIHRoZSBwZXJpb2QgYWZ0ZXIgdGhlIHByaXZhdGUgc3RhcnQgdGltZSBhbmQgYmVmb3JlIHRoZSBwdWJsaWMgc3RhcnQgdGltZS4KICBtb2RpZmllciBpc19wcmVfY3Jvd2RmdW5kX3BlcmlvZCgpIHsKICAgIGlmIChub3cgPj0gcHVibGljU3RhcnRUaW1lIHx8IG5vdyA8IHByaXZhdGVTdGFydFRpbWUpIHRocm93OwogICAgXzsKICB9CgogIC8vSXMgY3VycmVudGx5IHRoZSBjcm93ZGZ1bmQgcGVyaW9kCiAgbW9kaWZpZXIgaXNfY3Jvd2RmdW5kX3BlcmlvZCgpIHsKICAgIGlmIChub3cgPCBwdWJsaWNTdGFydFRpbWUgfHwgbm93ID49IHB1YmxpY0VuZFRpbWUpIHRocm93OwogICAgXzsKICB9CgogIC8vTWF5IG9ubHkgYmUgY2FsbGVkIGJ5IEJUQyBTdWlzc2UKICBtb2RpZmllciBvbmx5X2J0Y3MoKSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBidGNzQWRkcmVzcykgdGhyb3c7CiAgICBfOwogIH0KCiAgLy9NYXkgb25seSBiZSBjYWxsZWQgYnkgdGhlIG93bmVyIGFkZHJlc3MKICBtb2RpZmllciBvbmx5X293bmVyKCkgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXJBZGRyZXNzKSB0aHJvdzsKICAgIF87CiAgfQoKICAvL01heSBvbmx5IGJlIGNhbGxlZCBpZiB0aGUgY3Jvd2RmdW5kIGhhcyBub3QgYmVlbiBoYWx0ZWQKICBtb2RpZmllciBpc19ub3RfaGFsdGVkKCkgewogICAgaWYgKGhhbHRlZCkgdGhyb3c7CiAgICBfOwogIH0KCiAgLy8gRVZFTlRTCgogIGV2ZW50IFByZUJ1eSh1aW50IF9hbW91bnQpOwogIGV2ZW50IEJ1eShhZGRyZXNzIGluZGV4ZWQgX3JlY2lwaWVudCwgdWludCBfYW1vdW50KTsKCgogIC8vIEZVTkNUSU9OUwoKICAvL0luaXRpYWxpemF0aW9uIGZ1bmN0aW9uLiBEZXBsb3lzIEdVUFRva2VuIGNvbnRyYWN0IGFzc2lnbnMgdmFsdWVzLCB0byBhbGwgcmVtYWluaW5nIGZpZWxkcywgY3JlYXRlcyBmaXJzdCBlbnRpdGxlbWVudHMgaW4gdGhlIEdVUCBUb2tlbiBjb250cmFjdC4KICBmdW5jdGlvbiBDb250cmlidXRpb24oKSB7CiAgICBwdWJsaWNFbmRUaW1lID0gcHVibGljU3RhcnRUaW1lICsgU1RBR0VfRk9VUl9USU1FX0VORDsKICAgIGd1cFRva2VuID0gbmV3IEdVUFRva2VuKHRoaXMsIHB1YmxpY0VuZFRpbWUpOwogICAgZ3VwVG9rZW4uY3JlYXRlSWxsaXF1aWRUb2tlbihtYXRjaHBvb2xBZGRyZXNzLCBBTExPQ19JTExJUVVJRF9URUFNKTsKICAgIGd1cFRva2VuLmNyZWF0ZVRva2VuKG1hdGNocG9vbEFkZHJlc3MsIEFMTE9DX0JPVU5USUVTKTsKICAgIGd1cFRva2VuLmNyZWF0ZVRva2VuKG1hdGNocG9vbEFkZHJlc3MsIEFMTE9DX0xJUVVJRF9URUFNKTsKICAgIGd1cFRva2VuLmNyZWF0ZVRva2VuKG1hdGNocG9vbEFkZHJlc3MsIEFMTE9DX05FV19VU0VSUyk7CiAgfQoKICAvL01heSBiZSB1c2VkIGJ5IG93bmVyIG9mIGNvbnRyYWN0IHRvIGhhbHQgY3Jvd2RzYWxlIGFuZCBubyBsb25nZXIgZXhjZXB0IGV0aGVyLgogIGZ1bmN0aW9uIHRvZ2dsZUhhbHQoYm9vbCBfaGFsdGVkKQogICAgb25seV9vd25lcgogIHsKICAgIGhhbHRlZCA9IF9oYWx0ZWQ7CiAgfQoKICAvL2NvbnN0YW50IGZ1bmN0aW9uIHJldHVybnMgdGhlIGN1cnJlbnQgR1VQIHByaWNlLgogIGZ1bmN0aW9uIGdldFByaWNlUmF0ZSgpCiAgICBjb25zdGFudAogICAgcmV0dXJucyAodWludCBvX3JhdGUpCiAgewogICAgaWYgKG5vdyA8PSBwdWJsaWNTdGFydFRpbWUgKyBTVEFHRV9PTkVfVElNRV9FTkQpIHJldHVybiBQUklDRV9TVEFHRV9PTkU7CiAgICBpZiAobm93IDw9IHB1YmxpY1N0YXJ0VGltZSArIFNUQUdFX1RXT19USU1FX0VORCkgcmV0dXJuIFBSSUNFX1NUQUdFX1RXTzsKICAgIGlmIChub3cgPD0gcHVibGljU3RhcnRUaW1lICsgU1RBR0VfVEhSRUVfVElNRV9FTkQpIHJldHVybiBQUklDRV9TVEFHRV9USFJFRTsKICAgIGlmIChub3cgPD0gcHVibGljU3RhcnRUaW1lICsgU1RBR0VfRk9VUl9USU1FX0VORCkgcmV0dXJuIFBSSUNFX1NUQUdFX0ZPVVI7CiAgICBlbHNlIHJldHVybiAwOwogIH0KCiAgLy8gR2l2ZW4gdGhlIHJhdGUgb2YgYSBwdXJjaGFzZSBhbmQgdGhlIHJlbWFpbmluZyB0b2tlbnMgaW4gdGhpcyB0cmFuY2hlLCBpdAogIC8vIHdpbGwgdGhyb3cgaWYgdGhlIHNhbGUgd291bGQgdGFrZSBpdCBwYXN0IHRoZSBsaW1pdCBvZiB0aGUgdHJhbmNoZS4KICAvLyBJdCBleGVjdXRlcyB0aGUgcHVyY2hhc2UgZm9yIHRoZSBhcHByb3ByaWF0ZSBhbW91bnQgb2YgdG9rZW5zLCB3aGljaAogIC8vIGludm9sdmVzIGFkZGluZyBpdCB0byB0aGUgdG90YWwsIG1pbnRpbmcgR1VQIHRva2VucyBhbmQgc3Rhc2hpbmcgdGhlCiAgLy8gZXRoZXIuCiAgLy8gUmV0dXJucyBgYW1vdW50YCBpbiBzY29wZSBhcyB0aGUgbnVtYmVyIG9mIEdVUCB0b2tlbnMgdGhhdCBpdCB3aWxsCiAgLy8gcHVyY2hhc2UuCiAgZnVuY3Rpb24gcHJvY2Vzc1B1cmNoYXNlKHVpbnQgX3JhdGUsIHVpbnQgX3JlbWFpbmluZykKICAgIGludGVybmFsCiAgICByZXR1cm5zICh1aW50IG9fYW1vdW50KQogIHsKICAgIG9fYW1vdW50ID0gc2FmZURpdihzYWZlTXVsKG1zZy52YWx1ZSwgX3JhdGUpLCAxIGV0aGVyKTsKICAgIGlmIChvX2Ftb3VudCA+IF9yZW1haW5pbmcpIHRocm93OwogICAgaWYgKCFtdWx0aXNpZ0FkZHJlc3Muc2VuZChtc2cudmFsdWUpKSB0aHJvdzsKICAgIGlmICghZ3VwVG9rZW4uY3JlYXRlVG9rZW4obXNnLnNlbmRlciwgb19hbW91bnQpKSB0aHJvdzsgLy9jaGFuZ2UgdG8gbWF0Y2ggY3JlYXRlIHRva2VuCiAgICBndXBTb2xkICs9IG9fYW1vdW50OwogIH0KCiAgLy9TcGVjaWFsIEZ1bmN0aW9uIGNhbiBvbmx5IGJlIGNhbGxlZCBieSBCVEMgU3Vpc3NlIGFuZCBvbmx5IGR1cmluZyB0aGUgcHJlLWNyb3dkc2FsZSBwZXJpb2QuCiAgLy9BbGxvd3MgdGhlIHB1cmNoYXNlIG9mIHVwIHRvIDEyNTAwMCBFdGhlciB3b3J0aCBvZiBHVVAgVG9rZW5zLgogIGZ1bmN0aW9uIHByZUJ1eSgpCiAgICBwYXlhYmxlCiAgICBpc19wcmVfY3Jvd2RmdW5kX3BlcmlvZAogICAgb25seV9idGNzCiAgICBpc19ub3RfaGFsdGVkCiAgewogICAgdWludCBhbW91bnQgPSBwcm9jZXNzUHVyY2hhc2UoUFJJQ0VfQlRDUywgQlRDU19QT1JUSU9OX01BWCAtIGJ0Y3NQb3J0aW9uVG90YWwpOwogICAgYnRjc1BvcnRpb25Ub3RhbCArPSBhbW91bnQ7CiAgICBQcmVCdXkoYW1vdW50KTsKICB9CgogIC8vRGVmYXVsdCBmdW5jdGlvbiBjYWxsZWQgYnkgc2VuZGluZyBFdGhlciB0byB0aGlzIGFkZHJlc3Mgd2l0aCBubyBhcmd1bWVudHMuCiAgLy9SZXN1bHRzIGluIGNyZWF0aW9uIG9mIG5ldyBHVVAgVG9rZW5zIGlmIHRyYW5zYWN0aW9uIHdvdWxkIG5vdCBleGNlZWQgaGFyZCBsaW1pdCBvZiBHVVAgVG9rZW4uCiAgZnVuY3Rpb24oKQogICAgcGF5YWJsZQogICAgaXNfY3Jvd2RmdW5kX3BlcmlvZAogICAgaXNfbm90X2hhbHRlZAogIHsKICAgIHVpbnQgYW1vdW50ID0gcHJvY2Vzc1B1cmNoYXNlKGdldFByaWNlUmF0ZSgpLCBBTExPQ19DUk9XRFNBTEUgLSBndXBTb2xkKTsKICAgIEJ1eShtc2cuc2VuZGVyLCBhbW91bnQpOwogIH0KCiAgLy9mYWlsc2FmZSBkcmFpbgogIGZ1bmN0aW9uIGRyYWluKCkKICAgIG9ubHlfb3duZXIKICB7CiAgICBpZiAoIW93bmVyQWRkcmVzcy5zZW5kKHRoaXMuYmFsYW5jZSkpIHRocm93OwogIH0KfQ=='.
	

]
