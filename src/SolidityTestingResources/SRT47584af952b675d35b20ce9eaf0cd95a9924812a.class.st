Class {
	#name : #SRT47584af952b675d35b20ce9eaf0cd95a9924812a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT47584af952b675d35b20ce9eaf0cd95a9924812a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGEgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICByZXR1cm4gYzsKICAgIH0KICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQoKY29udHJhY3QgRVJDMjAgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkge30KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7fQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fQogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gIG1zZy5zZW5kZXI7CiAgICB9CiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQp9Cgpjb250cmFjdCBSZWZ1bmRWYXVsdCBpcyBPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgZW51bSBTdGF0ZSB7IEFjdGl2ZSwgUmVmdW5kaW5nLCBDbG9zZWQgfQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgZGVwb3NpdGVkOwogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwogICAgU3RhdGUgcHVibGljIHN0YXRlOwogICAgZXZlbnQgQ2xvc2VkKCk7CiAgICBldmVudCBSZWZ1bmRzRW5hYmxlZCgpOwogICAgZXZlbnQgUmVmdW5kZWQoYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHdlaUFtb3VudCk7CiAgICBmdW5jdGlvbiBSZWZ1bmRWYXVsdChhZGRyZXNzIF93YWxsZXQpIHB1YmxpYyB7CiAgICAgICAgd2FsbGV0ID0gX3dhbGxldDsKICAgICAgICBzdGF0ZSA9IFN0YXRlLkFjdGl2ZTsKICAgIH0KICAgIGZ1bmN0aW9uIGRlcG9zaXQoYWRkcmVzcyBpbnZlc3Rvcikgb25seU93bmVyIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICAgICAgZGVwb3NpdGVkW2ludmVzdG9yXSA9IGRlcG9zaXRlZFtpbnZlc3Rvcl0uYWRkKG1zZy52YWx1ZSk7CiAgICB9CiAgICBmdW5jdGlvbiBjbG9zZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsKICAgICAgICBzdGF0ZSA9IFN0YXRlLkNsb3NlZDsKICAgICAgICB3YWxsZXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgICBDbG9zZWQoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGVuYWJsZVJlZnVuZHMoKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5SZWZ1bmRpbmc7CiAgICAgICAgUmVmdW5kc0VuYWJsZWQoKTsKICAgIH0KICAgIGZ1bmN0aW9uIHJlZnVuZChhZGRyZXNzIGludmVzdG9yKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUmVmdW5kaW5nKTsKICAgICAgICB1aW50MjU2IGRlcG9zaXRlZFZhbHVlID0gZGVwb3NpdGVkW2ludmVzdG9yXTsKICAgICAgICBkZXBvc2l0ZWRbaW52ZXN0b3JdID0gMDsKICAgICAgICBpbnZlc3Rvci50cmFuc2ZlcihkZXBvc2l0ZWRWYWx1ZSk7CiAgICAgICAgUmVmdW5kZWQoaW52ZXN0b3IsIGRlcG9zaXRlZFZhbHVlKTsKICAgIH0KfQoKY29udHJhY3QgR3J5cGhvbiBpcyBFUkMyMCwgT3duYWJsZSB7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgUmVmdW5kVmF1bHQgcHVibGljIHZhdWx0OwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSB2ZXN0ZWQ7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgdG90YWxfdmVzdGVkOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgIHVpbnQyNTYgdG90YWxTdXBwbHlfOwoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICdHcnlwaG9uJzsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gJ0dYQyc7CiAgICB1aW50MjU2IHB1YmxpYyBkZWNpbWFscyA9IDQ7CiAgICB1aW50MjU2IHB1YmxpYyBpbml0aWFsU3VwcGx5ID0gMjAwMDAwMDAwMDsKCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydDsKICAgIHVpbnQyNTYgcHVibGljIGR1cmF0aW9uOwoKICAgIHVpbnQyNTYgcHVibGljIHJhdGVJQ08gPSA5MTAwMDAwMDAwMDAwMDA7CgogICAgdWludDI1NiBwdWJsaWMgcHJlU2FsZU1heENhcEluV2VpID0gMTAwMDAgZXRoZXI7CiAgICB1aW50MjU2IHB1YmxpYyBwcmVTYWxlUmFpc2VkID0gMDsKCiAgICB1aW50MjU2IHB1YmxpYyBpY29Tb2Z0Q2FwSW5XZWkgPSAxMDAwMDAgZXRoZXI7CiAgICB1aW50MjU2IHB1YmxpYyBpY29IYXJkQ2FwSW5XZWkgPSAyMzgxMDAgZXRoZXI7CiAgICB1aW50MjU2IHB1YmxpYyBpY29SYWlzZWQgPSAwOwoKICAgIHVpbnQyNTYgcHVibGljIHByZXNhbGVTdGFydFRpbWVzdGFtcDsKICAgIHVpbnQyNTYgcHVibGljIHByZXNhbGVFbmRUaW1lc3RhbXA7CiAgICB1aW50MjU2IHB1YmxpYyBpY29TdGFydFRpbWVzdGFtcDsKICAgIHVpbnQyNTYgcHVibGljIGljb0VuZFRpbWVzdGFtcDsKCiAgICB1aW50MjU2IHB1YmxpYyBwcmVzYWxlVG9rZW5MaW1pdDsKICAgIHVpbnQyNTYgcHVibGljIGljb1Rva2VuTGltaXQ7CgogICAgdWludDI1NiBwdWJsaWMgaW52ZXN0b3JDb3VudDsKCiAgICBlbnVtIFN0YXRlIHtVbmtub3duLCBQcmVwYXJpbmcsIFByZVNhbGUsIElDTywgU3VjY2VzcywgRmFpbHVyZSwgUHJlc2FsZUZpbmFsaXplZCwgSUNPRmluYWxpemVkfQoKICAgIFN0YXRlIHB1YmxpYyBjcm93ZFNhbGVTdGF0ZTsKCiAgICBtb2RpZmllciBub25aZXJvKCkgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBHcnlwaG9uKCkgcHVibGljIHsKCiAgICAgICAgb3duZXIgPSAweGY0MkI4MkQwMmI4ZjNFNzk4M2IzZjdFMTAwMGNFMjhFQzNGOEM4MTU7CiAgICAgICAgdmF1bHQgPSBuZXcgUmVmdW5kVmF1bHQoMHhlNUQ4MGRCOGQyMzZDMEM2YTVmNTUxMzUzMzc2Nzc4MUIyZTYyMDBmKTsKCiAgICAgICAgdG90YWxTdXBwbHlfID0gaW5pdGlhbFN1cHBseSooMTAqKmRlY2ltYWxzKTsKCiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gdG90YWxTdXBwbHlfOwoKICAgICAgICBwcmVzYWxlU3RhcnRUaW1lc3RhbXAgPSAxNTIzMjMyMDAwOwogICAgICAgIHByZXNhbGVFbmRUaW1lc3RhbXAgPSBwcmVzYWxlU3RhcnRUaW1lc3RhbXAgKyA1MCAqIDEgZGF5czsKCiAgICAgICAgaWNvU3RhcnRUaW1lc3RhbXAgPSBwcmVzYWxlRW5kVGltZXN0YW1wICsgMSBkYXlzOwogICAgICAgIGljb0VuZFRpbWVzdGFtcCA9IGljb1N0YXJ0VGltZXN0YW1wICsgNjAgKiAxIGRheXM7CgogICAgICAgIGNyb3dkU2FsZVN0YXRlID0gU3RhdGUuUHJlcGFyaW5nOwoKICAgICAgICBzdGFydCA9IDE1MjMyMzIwMDA7CiAgICAgICAgZHVyYXRpb24gPSAyMzMyODAwMDsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBub25aZXJvIHBheWFibGUgewogICAgICAgIGVudGVyKCk7CiAgICB9CgogICAgZnVuY3Rpb24gZW50ZXIoKSBwdWJsaWMgbm9uWmVybyBwYXlhYmxlIHsKICAgICAgICBpZihpc1ByZVNhbGVQZXJpb2QoKSkgewoKICAgICAgICAgICAgaWYoY3Jvd2RTYWxlU3RhdGUgPT0gU3RhdGUuUHJlcGFyaW5nKSB7CiAgICAgICAgICAgICAgICBjcm93ZFNhbGVTdGF0ZSA9IFN0YXRlLlByZVNhbGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChpc0lDT1BlcmlvZCgpKSB7CiAgICAgICAgICAgIGlmKGNyb3dkU2FsZVN0YXRlID09IFN0YXRlLlByZXNhbGVGaW5hbGl6ZWQpIHsKICAgICAgICAgICAgICAgIGNyb3dkU2FsZVN0YXRlID0gU3RhdGUuSUNPOwogICAgICAgICAgICB9CgogICAgICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIF9yZWNpcGllbnQsIHVpbnQyNTYgX3ZhbHVlKSBpbnRlcm5hbCBub25aZXJvIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHVpbnQyNTYgYm91Z2h0VG9rZW5zID0gY2FsY3VsYXRlVG9rZW5zKF92YWx1ZSk7CiAgICAgICAgcmVxdWlyZShib3VnaHRUb2tlbnMgIT0gMCk7CiAgICAgICAgYm91Z2h0VG9rZW5zID0gYm91Z2h0VG9rZW5zKigxMCoqZGVjaW1hbHMpOwoKICAgICAgICBpZihiYWxhbmNlT2YoX3JlY2lwaWVudCkgPT0gMCkgewogICAgICAgICAgICBpbnZlc3RvckNvdW50Kys7CiAgICAgICAgfQoKICAgICAgICBpZihpc0Nyb3dkU2FsZVN0YXRlUHJlU2FsZSgpKSB7CiAgICAgICAgICAgIHRyYW5zZmVyVG9rZW5zKF9yZWNpcGllbnQsIGJvdWdodFRva2Vucyk7CiAgICAgICAgICAgIHZhdWx0LmRlcG9zaXQudmFsdWUoX3ZhbHVlKShfcmVjaXBpZW50KTsKICAgICAgICAgICAgcHJlU2FsZVJhaXNlZCA9IHByZVNhbGVSYWlzZWQuYWRkKF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoaXNDcm93ZFNhbGVTdGF0ZUlDTygpKSB7CiAgICAgICAgICAgIHRyYW5zZmVyVG9rZW5zKF9yZWNpcGllbnQsIGJvdWdodFRva2Vucyk7CiAgICAgICAgICAgIHZhdWx0LmRlcG9zaXQudmFsdWUoX3ZhbHVlKShfcmVjaXBpZW50KTsKICAgICAgICAgICAgaWNvUmFpc2VkID0gaWNvUmFpc2VkLmFkZChfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJUb2tlbnMoYWRkcmVzcyBfcmVjaXBpZW50LCB1aW50MjU2IHRva2Vuc19pbl9jZW50cykgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIHRva2Vuc19pbl9jZW50cyA+IDAKICAgICAgICAgICAgJiYgX3JlY2lwaWVudCAhPSBvd25lcgogICAgICAgICAgICAmJiB0b2tlbnNfaW5fY2VudHMgPCBiYWxhbmNlc1tvd25lcl0KICAgICAgICApOwoKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0uc3ViKHRva2Vuc19pbl9jZW50cyk7CgogICAgICAgIGJhbGFuY2VzW19yZWNpcGllbnRdID0gYmFsYW5jZXNbX3JlY2lwaWVudF0uYWRkKHRva2Vuc19pbl9jZW50cyk7CiAgICAgICAgZ2V0VmVzdGVkKF9yZWNpcGllbnQpOwoKICAgICAgICBUcmFuc2Zlcihvd25lciwgX3JlY2lwaWVudCwgdG9rZW5zX2luX2NlbnRzKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRWZXN0ZWQoYWRkcmVzcyBfYmVuZWZpY2lhcnkpIHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfYmVuZWZpY2lhcnldPjApOwogICAgICAgIGlmIChfYmVuZWZpY2lhcnkgPT0gb3duZXIpewoKICAgICAgICAgICAgdmVzdGVkW293bmVyXSA9IGJhbGFuY2VzW293bmVyXTsKICAgICAgICAgICAgdG90YWxfdmVzdGVkW293bmVyXSA9IGJhbGFuY2VzW293bmVyXTsKCiAgICAgICAgfSBlbHNlIGlmIChibG9jay50aW1lc3RhbXAgPCBzdGFydCkgewoKICAgICAgICAgICAgdmVzdGVkW19iZW5lZmljaWFyeV0gPSAwOwogICAgICAgICAgICB0b3RhbF92ZXN0ZWRbX2JlbmVmaWNpYXJ5XSA9IDA7CgogICAgICAgIH0gZWxzZSBpZiAoYmxvY2sudGltZXN0YW1wID49IHN0YXJ0LmFkZChkdXJhdGlvbikpIHsKCiAgICAgICAgICAgIHRvdGFsX3Zlc3RlZFtfYmVuZWZpY2lhcnldID0gYmFsYW5jZXNbX2JlbmVmaWNpYXJ5XTsKICAgICAgICAgICAgdmVzdGVkW19iZW5lZmljaWFyeV0gPSBiYWxhbmNlc1tfYmVuZWZpY2lhcnldOwoKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgdWludCB2ZXN0ZWRfbm93ID0gYmFsYW5jZXNbX2JlbmVmaWNpYXJ5XS5tdWwoYmxvY2sudGltZXN0YW1wLnN1YihzdGFydCkpLmRpdihkdXJhdGlvbik7CiAgICAgICAgICAgIGlmKHRvdGFsX3Zlc3RlZFtfYmVuZWZpY2lhcnldPT0wKXsKICAgICAgICAgICAgICAgIHRvdGFsX3Zlc3RlZFtfYmVuZWZpY2lhcnldID0gdmVzdGVkX25vdzsKCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodmVzdGVkX25vdyA+IHRvdGFsX3Zlc3RlZFtfYmVuZWZpY2lhcnldKXsKICAgICAgICAgICAgICAgIHZlc3RlZFtfYmVuZWZpY2lhcnldID0gdmVzdGVkW19iZW5lZmljaWFyeV0uYWRkKHZlc3RlZF9ub3cuc3ViKHRvdGFsX3Zlc3RlZFtfYmVuZWZpY2lhcnldKSk7CiAgICAgICAgICAgICAgICB0b3RhbF92ZXN0ZWRbX2JlbmVmaWNpYXJ5XSA9IHZlc3RlZF9ub3c7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZlc3RlZFtfYmVuZWZpY2lhcnldOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbnNfaW5fY2VudHMpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG9rZW5zX2luX2NlbnRzID4gMCk7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gbXNnLnNlbmRlcik7CiAgICAgICAgZ2V0VmVzdGVkKG1zZy5zZW5kZXIpOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3Rva2Vuc19pbl9jZW50cyk7CiAgICAgICAgcmVxdWlyZSh2ZXN0ZWRbbXNnLnNlbmRlcl0gPj0gX3Rva2Vuc19pbl9jZW50cyk7CgogICAgICAgIGlmKGJhbGFuY2VPZihfdG8pID09IDApIHsKICAgICAgICAgICAgaW52ZXN0b3JDb3VudCsrOwogICAgICAgIH0KCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3Rva2Vuc19pbl9jZW50cyk7CiAgICAgICAgdmVzdGVkW21zZy5zZW5kZXJdID0gdmVzdGVkW21zZy5zZW5kZXJdLnN1YihfdG9rZW5zX2luX2NlbnRzKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3Rva2Vuc19pbl9jZW50cyk7CgogICAgICAgIGlmKGJhbGFuY2VPZihtc2cuc2VuZGVyKSA9PSAwKSB7CiAgICAgICAgICAgIGludmVzdG9yQ291bnQ9aW52ZXN0b3JDb3VudC0xOwogICAgICAgIH0KCiAgICAgICAgLy9pZiBwYXltZW50IHJhaXNlZCB3aXRoIG90aGVlciBjcnlwdG9zIGFuZCB0b2tlbiBtYW51YWxseSBzZW50IGZyb20gaGVyZQogICAgICAgIGlmKG1zZy5zZW5kZXI9PW93bmVyKXsKICAgICAgICAgICAgdWludCByYWl6ZWQgPSAoX3Rva2Vuc19pbl9jZW50cy5kaXYoMTAqKmRlY2ltYWxzKSkubXVsKHJhdGVJQ08pOwogICAgICAgICAgICBpZihpc0Nyb3dkU2FsZVN0YXRlUHJlU2FsZSgpKSB7CiAgICAgICAgICAgICAgICBwcmVTYWxlUmFpc2VkID0gcHJlU2FsZVJhaXNlZC5hZGQocmFpemVkKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChpc0Nyb3dkU2FsZVN0YXRlSUNPKCkpIHsKICAgICAgICAgICAgICAgIGljb1JhaXNlZCA9IGljb1JhaXNlZC5hZGQocmFpemVkKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5zX2luX2NlbnRzKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckJvbnVzKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbnMpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICByZXF1aXJlKF90byAhPSBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKF90byAhPSBvd25lcik7CiAgICAgICAgcmVxdWlyZShfdG9rZW5zID4gMCk7CiAgICAgICAgdWludCBfdG9rZW5zX2luX2NlbnRzID0gX3Rva2Vucy5tdWwoMTAqKmRlY2ltYWxzKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF90b2tlbnNfaW5fY2VudHMpOwoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdG9rZW5zX2luX2NlbnRzKTsKICAgICAgICB2ZXN0ZWRbbXNnLnNlbmRlcl0gPSB2ZXN0ZWRbbXNnLnNlbmRlcl0uc3ViKF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdG9rZW5zX2luX2NlbnRzKTsKCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5zX2luX2NlbnRzKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2Vuc19pbl9jZW50cykgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoX3Rva2Vuc19pbl9jZW50cyA+IDApOwogICAgICAgIHJlcXVpcmUoX2Zyb20gIT0gX3RvKTsKICAgICAgICBnZXRWZXN0ZWQoX2Zyb20pOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIHJlcXVpcmUodmVzdGVkW19mcm9tXSA+PSBfdG9rZW5zX2luX2NlbnRzKTsKICAgICAgICByZXF1aXJlKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF90b2tlbnNfaW5fY2VudHMpOwoKICAgICAgICBpZihiYWxhbmNlT2YoX3RvKSA9PSAwKSB7CiAgICAgICAgICAgIGludmVzdG9yQ291bnQrKzsKICAgICAgICB9CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3Rva2Vuc19pbl9jZW50cyk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3Rva2Vuc19pbl9jZW50cyk7CiAgICAgICAgdmVzdGVkW19mcm9tXSA9IHZlc3RlZFtfZnJvbV0uc3ViKF90b2tlbnNfaW5fY2VudHMpOwoKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3Rva2Vuc19pbl9jZW50cyk7CgogICAgICAgIGlmKGJhbGFuY2VPZihfZnJvbSkgPT0gMCkgewogICAgICAgICAgICBpbnZlc3RvckNvdW50PWludmVzdG9yQ291bnQtMTsKICAgICAgICB9CgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdG9rZW5zX2luX2NlbnRzKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKHZlc3RlZFttc2cuc2VuZGVyXSA+PSBfdG9rZW5zX2luX2NlbnRzKTsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF90b2tlbnNfaW5fY2VudHM7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF90b2tlbnNfaW5fY2VudHMpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVUb2tlbnModWludDI1NiBfYW1vdW50KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHRva2Vucyl7CiAgICAgICAgaWYoY3Jvd2RTYWxlU3RhdGUgPT0gU3RhdGUuUHJlcGFyaW5nICYmIGlzUHJlU2FsZVBlcmlvZCgpKSB7CiAgICAgICAgICAgIGNyb3dkU2FsZVN0YXRlID0gU3RhdGUuUHJlU2FsZTsKICAgICAgICB9CiAgICAgICAgaWYoaXNDcm93ZFNhbGVTdGF0ZVByZVNhbGUoKSkgewogICAgICAgICAgICB0b2tlbnMgPSBfYW1vdW50LmRpdihyYXRlSUNPKTsKICAgICAgICB9IGVsc2UgaWYgKGlzQ3Jvd2RTYWxlU3RhdGVJQ08oKSkgewogICAgICAgICAgICB0b2tlbnMgPSBfYW1vdW50LmRpdihyYXRlSUNPKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0b2tlbnMgPSAwOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRSZWZ1bmQoYWRkcmVzcyBfcmVjaXBpZW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCl7CiAgICAgICAgcmVxdWlyZShjcm93ZFNhbGVTdGF0ZSA9PSBTdGF0ZS5GYWlsdXJlKTsKICAgICAgICByZXF1aXJlKHJlZnVuZGVkQW1vdW50KF9yZWNpcGllbnQpKTsKICAgICAgICB2YXVsdC5yZWZ1bmQoX3JlY2lwaWVudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kZWRBbW91bnQoYWRkcmVzcyBfcmVjaXBpZW50KSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfcmVjaXBpZW50XSAhPSAwKTsKICAgICAgICBiYWxhbmNlc1tfcmVjaXBpZW50XSA9IDA7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHRvdGFsU3VwcGx5XzsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBhKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbYV07CiAgICB9CgogICAgZnVuY3Rpb24gaXNDcm93ZFNhbGVTdGF0ZVByZVNhbGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBjcm93ZFNhbGVTdGF0ZSA9PSBTdGF0ZS5QcmVTYWxlOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzQ3Jvd2RTYWxlU3RhdGVJQ08oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBjcm93ZFNhbGVTdGF0ZSA9PSBTdGF0ZS5JQ087CiAgICB9CgogICAgZnVuY3Rpb24gaXNQcmVTYWxlUGVyaW9kKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZihwcmVTYWxlUmFpc2VkID4gcHJlU2FsZU1heENhcEluV2VpIHx8IG5vdyA+PSBwcmVzYWxlRW5kVGltZXN0YW1wKSB7CiAgICAgICAgICAgIGNyb3dkU2FsZVN0YXRlID0gU3RhdGUuUHJlc2FsZUZpbmFsaXplZDsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBub3cgPiBwcmVzYWxlU3RhcnRUaW1lc3RhbXA7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGlzSUNPUGVyaW9kKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoaWNvUmFpc2VkID4gaWNvSGFyZENhcEluV2VpIHx8IG5vdyA+PSBpY29FbmRUaW1lc3RhbXApewogICAgICAgICAgICBjcm93ZFNhbGVTdGF0ZSA9IFN0YXRlLklDT0ZpbmFsaXplZDsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBlbmRDcm93ZFNhbGUoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5vdyA+PSBpY29FbmRUaW1lc3RhbXAgfHwgaWNvUmFpc2VkID49IGljb1NvZnRDYXBJbldlaSk7CiAgICAgICAgaWYoaWNvUmFpc2VkID49IGljb1NvZnRDYXBJbldlaSl7CiAgICAgICAgICAgIGNyb3dkU2FsZVN0YXRlID0gU3RhdGUuU3VjY2VzczsKICAgICAgICAgICAgdmF1bHQuY2xvc2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjcm93ZFNhbGVTdGF0ZSA9IFN0YXRlLkZhaWx1cmU7CiAgICAgICAgICAgIHZhdWx0LmVuYWJsZVJlZnVuZHMoKTsKICAgICAgICB9CiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldEludmVzdG9yQ291bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBpbnZlc3RvckNvdW50OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFByZXNhbGVSYWlzZWRBbW91bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBwcmVTYWxlUmFpc2VkOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldElDT1JhaXNlZEFtb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGljb1JhaXNlZDsKICAgIH0KCn0='.
	

]
