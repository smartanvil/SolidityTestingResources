Class {
	#name : #SRT06300cec31cf8edf74a17dac79cbc66355113179,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT06300cec31cf8edf74a17dac79cbc66355113179 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgovLyB3ZWxjb21lIHRvIEV0aGVyV2lsZCAoRXRoV2lsZCkKLy8gZ2FtZSB3aGljaCBpcyBhIHNpbXBsZSBjb2luIHRvc3MgZ2FtZSwgeW91IGhhdmUgNTAlIGNoYW5jZSB0byB3aW4uCi8vIHlvdSBhbHdheXMgcGxheSBhZ2FpbnN0IHNvbWVvbmUgZWxzZS4gCi8vIHRoZXJlIGFyZSB0d28gd2F5cyB0byBwbGF5OyB0aGUgYXV0by13YXkgYnkganVzdCBwbGFjaW5nIGEgYmV0IChvbmx5IG9uZSBhbGxvd2VkKQovLyB0aGlzIGlzIHRoZSBzdGFuZGFyZCB3YXkgdG8gcGxheSAKLy8gaWYgeW91IHBsYWNlIHRoaXMgYmV0IGFuZCBhbm90aGVyIG9uZSBwbGFjZXMgdGhlIHNhbWUgYmV0LCBhIG1hdGNoIG9jY3VycyBhbmQgYSBnYW1lIGlzIHBsYXllZCAKLy8gTm90ZTogeW91IGFyZSBhbGxvd2VkIHRvIHdpdGhkcmF3IHRoZXNlIGJldHMuIElmIGFsbCBvZmZlcnMgYXJlIGNhbmNlbGxlZCAwIGV0aCBpcyBpbiBjb250cmFjdC4gCgovLyBPZmZlcnM6IAovLyBZb3UgYXJlIGFsbG93ZWQgdG8gY3JlYXRlIDE2IG9mZmVycyBpbiB0aGUgZ2FtZS4gT3RoZXIgcGVvcGxlIGNhbiBmaW5kIHRoZXNlIG9mZmVycyBhbmQgcGxheSB3aXRoIHRoZW0KLy8gVGhpcyBpcyBkb2FibGUgaWYgeW91IGRvIG5vdCBsaWtlIHRoZSBzdWdnZXN0ZWQgb2ZmZXJzLCBvciBzaW1wbHkgd2FudCB0byBwdXQgb24gbW9yZSBnYW1lcy4gCi8vIFRoZXNlIGFyZSBhbHNvIGNhbmNlbGxhYmxlLiAKLy8gSWYgeW91IHBsYXkgc29tZW9uZSdzIG9mZmVyIGFuZCBzZW5kIHRvIG11Y2gsIGV4Y2VzcyBpcyByZXR1cm5lZC4gCgpjb250cmFjdCBFdGhlcldpbGR7CiAgICAvLyBHTE9CQUwgU0VUVElOR1MgLy8KICAgIHVpbnQ4IGNvbnN0YW50IE1heE9mZmVyc1BlckFERFIgPSAxNjsgLy8gcGVyIGRlZmluaXRpb24gTUFYIDMyIG9mZmVycyBkdWUgdG8gdWludDggc2l6ZQogICAgdWludDE2IENGZWUgPSA1MDA7IC8vIEZFRSAvIDEwMDAwICwgb25seSBwYWlkIHBlciBQTEFZRUQgVFguIENhbmNlbCAvIGNyZWF0ZSBvZmZlciBpcyBubyBmZWUsIG9ubHkgcGFpZCBhZnRlciBwbGF5CiAgICB1aW50MTYgSEZlZVBhcnQgPSA1MDAwOyAvLyBQYXJ0IG9mIGNyZWF0b3IgZmVlIC0+IGhlbHBlciAvMTAwMDAgLT4gNTAlCiAgICAKICAgIGFkZHJlc3MgT3duZXI7CiAgICBhZGRyZXNzIEhlbHBPd25lciA9IDB4MzBCM0UwOWQ5QTgxRDZCMjY1QTU3M2VkQzdDYzRDNGZCYzBCMDU4NjsKICAgIAogICAgLy8gU0VUVElORyBCSVQgQ09ORklHOiAKICAgIC8vIEZpcnN0IHR3byBiaXRzOiBPd25lciBjaG9pY2Ugb2Ygb2ZmZXIuIDAgbWVhbnMgb2ZmZXIgaXMgY2xvc2VkIChzdGFuZGFyZCkgdG8gcHJldmVudCBkb3VibGUtd2l0aGRyYXdhbHMuCiAgICAvLyAxOiBibHVlIC8gMjogcmVkIC8gMzogZW5lbXkgY2hvaWNlcy4gKFRoaXMgc2hvdWxkIG5vdCBtYXR0ZXIgYWZ0ZXIgaW5maW5pdGUgcGxheXMpCgogICAgLy8gVGhpcmQgYml0OiBHYW1lIGFsc28gaGFzIGl0J3MgbmVpZ2hib3VyIGF2YWlsYWJsZS4gSWYgeW91IGNyZWF0ZSBhIHNpbXBsZSBnYW1lIHlvdSBhcmUgYWxsb3dlZCAKICAgIC8vIHRvIGNyZWF0ZSBhbiBvZmZlciB0b28gc28gaXQgaXMgdmlzaWJsZSAoZm9yIG1hbnVhbCBhbW91bnRzIG9mIGlucHV0cykKICAgIC8vIFRoaXMgbWFrZXMgc3VyZSBib3RoIGl0ZW1zIGFyZSBjYW5jZWxsZWQgaWYgeW91IGRlY2lkZSB0byBjYW5jZWwgb25lIAogICAgLy8gTm90ZTogdHdvIGl0ZW1zIGFyZSBjYW5jZWxsZWQsIGJ1dCBkb3VibGUgd2l0aGRyYXdhbCBpcyBub3QgYXZhaWxhYmUgOykKICAgIAogICAgLy8gRm91cnRoIGJpdDogTWF4IE9mZmVycyBhcmUgaGVyZSAxNiwgZm91cnRoIGJpdCBub3QgdXNlZC4gCiAgICAvLyBGaWZ0aCAtIEVpZ2h0IGJpdDogSUQgb2YgdGhlIG9mZmVyIGluIHRoZSBvZmZlciBtYXJrZXQuIE9ubHkgYXZhaWxhYmxlIGZyb20gU2ltcGxlR2FtZSwgc2F2ZXMgZ2FzIChubyBmb3IgbG9vcCBuZWNlc3NhcnkpLgoKCiAgICBzdHJ1Y3QgU2ltcGxlR2FtZXsKICAgICAgICBhZGRyZXNzIE93bmVyOyAgIC8vIENyZWF0b3IgCiAgICAgICAgdWludDggc2V0dGluZzsgIC8vIFNldHRpbmcgCgogICAgfQogICAgCiAgICBzdHJ1Y3QgT2ZmZXJHYW1lewoJICAgIHVpbnQyNTYgYW1vdW50OyAgICAvLyBmZWUuIAoJICAgIHVpbnQ4IHNldHRpbmc7ICAgICAvLyAwLTMKICAgICAgICBib29sIFNpbXBsZUdhbWU7IC8vIENvdWxkIGhhdmUgaW1wbGVtZW50ZWQgYWJvdmUKICAgIH0KICAgIAogICAgLy8gdWludDI1NiBpcyB3ZWkgcGFpZDogbm90ZSBvbmx5IG9uZSBvZmZlciBpcyBhdmFpbGFibGUgcGVyIHdlaSBoZXJlLiAKICAgIG1hcHBpbmcodWludDI1NiA9PiBTaW1wbGVHYW1lKSBwdWJsaWMgU2ltcGxlR2FtZUxpc3Q7CgogICAgLy8gYWRkcmVzcyBjYW4gc3RvcmUgMTYgb2ZmZXJzLiBsb29rdXAgaXMgZG9uZSB2aWEgZXZlbnRzLCBzYXZlcyBnYXMuIAogICAgbWFwcGluZyhhZGRyZXNzID0+IE9mZmVyR2FtZVtNYXhPZmZlcnNQZXJBRERSXSkgcHVibGljIE9mZmVyR2FtZUxpc3Q7CiAgICAKCiAgICAvLyBldmVudHMgZm9yIGJvdGggdG8ga2VlcCB0cmFjayAKICAgIGV2ZW50IFNpbXBsZUdhbWVQbGF5ZWQoYWRkcmVzcyBjcmVhdG9yLCBhZGRyZXNzIHRhcmdldCwgYm9vbCBibHVlLCBib29sIGN3b24sIHVpbnQyNTYgYW1vdW50KTsKICAgIGV2ZW50IFNpbXBsZUdhbWVDcmVhdGVkKGFkZHJlc3MgY3JlYXRvciwgdWludDI1NiBmZWUsIHVpbnQ4IHNldHRpbmcpOwogICAgZXZlbnQgU2ltcGxlR2FtZUNhbmNlbGxlZCh1aW50MjU2IGZlZSk7CiAgICAKICAgICAgICAvLyBzYW1lIGV2ZW50cywgSUQgYWRkZWQgdG8gYWxsb3cgY2FuY2VsIGZyb20gVUkgCiAgICBldmVudCBPZmZlckdhbWVDcmVhdGVkKGFkZHJlc3MgY3JlYXRvciwgdWludDggc2V0dGluZywgdWludDI1NiBhbW91bnQsIHVpbnQ4IGlkKTsKICAgIGV2ZW50IE9mZmVyR2FtZUNhbmNlbGxlZChhZGRyZXNzIGNyZWF0b3IsIHVpbnQ4IGlkKTsKICAgIGV2ZW50IE9mZmVyR2FtZVBsYXllZChhZGRyZXNzIGNyZWF0b3IsIGFkZHJlc3MgdGFyZ2V0LCBib29sIGJsdWUsIGJvb2wgY3dvbiwgdWludDI1NiBhbW91bnQsIHVpbnQ4IGlkKTsKICAgIAogICAgLy8gZG9udCB0b3VjaCBwbHMgCiAgICBtb2RpZmllciBPbmx5T3duZXIoKXsKICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBPd25lcil7CiAgICAgICAgICAgIF87CiAgICAgICAgfQogICAgICAgIGVsc2V7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gRXRoZXJXaWxkKCkgcHVibGljewogICAgICAgIE93bmVyID0gbXNnLnNlbmRlcjsKCiAgICB9CiAgICAKICAgIC8vIGFsbG93cyB0byBjaGFuZ2UgZGV2IGZlZS4gbWF4IGlzIDUlCiAgICBmdW5jdGlvbiBTZXREZXZGZWUodWludDE2IHRmZWUpIHB1YmxpYyBPbmx5T3duZXJ7CiAgICAgICAgcmVxdWlyZSh0ZmVlIDw9IDUwMCk7CiAgICAgICAgQ0ZlZSA9IHRmZWU7CiAgICB9CiAgICAKICAgIC8vIGFsbG93cyB0byBjaGFuZ2UgaGVscGVyIGZlZS4gbWluaW11bSBpcyAxMCUsIG1heCAxMDAlLiAKICAgIGZ1bmN0aW9uIFNldEhGZWUodWludDE2IGhmZWUpIHB1YmxpYyBPbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoaGZlZSA8PSAxMDAwMCk7CiAgICAgICAgcmVxdWlyZShoZmVlID49IDEwMDApOwogICAgICAgIEhGZWVQYXJ0ID0gaGZlZTsKICAgIAogICAgfQogICAgCgogICAgLy8gb25seSB1c2VkIGluIFVJLiByZXR1cm5zIHVpbnQgc28geW91IGNhbiBzZWUgaG93IG11Y2ggZ2FtZXMgeW91IGhhdmUgdXBsb2FkZWQuIAogICAgZnVuY3Rpb24gVXNlck9mZmVycyhhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyh1aW50OCl7CiAgICAgICAgdWludDggaWRzID0gMDsKICAgICAgICBmb3IgKHVpbnQ4IGk9MDsgaTxNYXhPZmZlcnNQZXJBRERSOyBpKyspewogICAgICAgICAgICBpZiAoKE9mZmVyR2FtZUxpc3Rbd2hvXVtpXS5zZXR0aW5nICYgMykgPT0gMCl7CiAgICAgICAgICAgICAgICBpZHMrKyA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGlkczsKICAgIH0KICAgIAogICAgLy8gbG9va3VwcyBzdHJ1Y3QgaW50byBvZmZlcmdhbWVsaXN0LiBvbmx5IHZpZXcuIAogICAgZnVuY3Rpb24gVmlld09mZmVyKGFkZHJlc3Mgd2hvLCB1aW50OCBpZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBhbXQsIHVpbnQ4IHNldHRpbmcsIGJvb2wgc2dhbWUpewogICAgICAgIHZhciBHYW1lID0gT2ZmZXJHYW1lTGlzdFt3aG9dW2lkXTsKICAgICAgICByZXR1cm4gKEdhbWUuYW1vdW50LCBHYW1lLnNldHRpbmcsR2FtZS5TaW1wbGVHYW1lKTsKICAgIH0KICAgIAogICAgLy8gY3JlYXRlIGEgbmV3IG9mZmVyIHdpdGggc2V0dGluZy4gbm90ZTsgc2V0dGluZyBoYXMgdG8gYmUgMSwyIG9yIDMuCiAgICAvLyBjb25uZWN0ZWQgdG8gbXNnLnNlbmRlci4KICAgIGZ1bmN0aW9uIENyZWF0ZU9mZmVyKHVpbnQ4IHNldHRpbmcpIHB1YmxpYyBwYXlhYmxlewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlPjApOwogICAgICAgIHJlcXVpcmUoc2V0dGluZz4wKTsKICAgICAgICBDcmVhdGVPZmZlcl9pbnRlcm5hbChzZXR0aW5nLCBmYWxzZSk7CiAgICB9CiAgICAKCiAgICAvLyBpbnRlcm5hbCBmdW5jdGlvbiwgbmVjZXNzYXJ5IHRvIGtlZXAgdHJhY2sgb2Ygc2ltcGxlIGdhbWUgbGlua3MgCiAgICBmdW5jdGlvbiBDcmVhdGVPZmZlcl9pbnRlcm5hbCh1aW50OCBzZXR0aW5nLCBib29sIFNnYW1lKSBpbnRlcm5hbCByZXR1cm5zICh1aW50OCBpZCl7CiAgICAgICAgLy8gZmluZCBpZC4gCiAgICAgICAgcmVxdWlyZShzZXR0aW5nIDw9IDMpOwoKICAgICAgICBib29sIGZvdW5kID0gZmFsc2U7CiAgICAgICAgaWQgPSAwOwogICAgICAgIC8vIGZpbmQgYXZhaWxhYmxlIElEIC4KICAgICAgICBmb3IgKHVpbnQ4IGk9MDsgaTxNYXhPZmZlcnNQZXJBRERSOyBpKyspewogICAgICAgICAgICBpZiAoT2ZmZXJHYW1lTGlzdFttc2cuc2VuZGVyXVtpXS5zZXR0aW5nID09IDApewogICAgICAgICAgICAgICAgaWQgPSBpOwogICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gbm8gcGxhY2U/IHJlamVjdCB0eC4gCiAgICAgICAgLy8gbm90ZTogYWxzbyBzaW1wbGUgdHggY2FuIGJlIHJlbGVhc2VkIGxpa2UgdGhpcy4KICAgICAgICByZXF1aXJlKGZvdW5kKTsKICAgICAgICBPZmZlckdhbWVMaXN0W21zZy5zZW5kZXJdW2lkXSA9IE9mZmVyR2FtZShtc2cudmFsdWUsIHNldHRpbmcsIFNnYW1lKTsKCiAgICAgICAgZW1pdCBPZmZlckdhbWVDcmVhdGVkKG1zZy5zZW5kZXIsIHNldHRpbmcsIG1zZy52YWx1ZSwgaWQpOwogICAgICAgIC8vIAogICAgICAgIHJldHVybiBpZDsKICAgIH0KICAgIAogICAgLy8gcHVibGljIGNhbmNlbCBvZmZlciwgaW50ZXJuIG5lY2Vzc2FyeSBmb3Igc2ltcGxlIGxpbmsgCiAgICAvLyBub3RlOiBvZmZlciBjYW5jZWxsZWQgaXMgbXNnLnNlbmRlciBhbmQgSUQgaXMgaWQgKGludG8gdGhhdCBhcnJheSBvZiB0aGlzIGFkZHJlc3MpCiAgICBmdW5jdGlvbiBPZmZlckNhbmNlbCh1aW50OCBpZCkgcHVibGljIHsKICAgICAgICBPZmZlckNhbmNlbF9pbnRlcm5hbChpZCwgZmFsc2UpOwogICAgfQogICAgCiAgICAKICAgIGZ1bmN0aW9uIE9mZmVyQ2FuY2VsX2ludGVybmFsKHVpbnQ4IGlkLCBib29sIHNraXBTaW1wbGUpIGludGVybmFsIHsKICAgICAgICB2YXIgZ2FtZSA9IE9mZmVyR2FtZUxpc3RbbXNnLnNlbmRlcl1baWRdOwogICAgICAgIGlmIChnYW1lLnNldHRpbmcgIT0gMCl7CiAgICAgICAgICAgIHVpbnQ4IHNldHRpbmc7IAogICAgICAgICAgICBib29sIHNnYW1lOyAKICAgICAgICAgICAgdWludDggX25vdG47CiAgICAgICAgICAgIChzZXR0aW5nLCBzZ2FtZSwgX25vdG4pID0gRGF0YUZyb21TZXR0aW5nKGdhbWUuc2V0dGluZyk7CiAgICAgICAgICAgIC8vIHJlc2V0IHRvIDAuIAogICAgICAgICAgICBnYW1lLnNldHRpbmcgPSAwOwogICAgICAgICAgICAKICAgICAgICAgICAgZW1pdCBPZmZlckdhbWVDYW5jZWxsZWQobXNnLnNlbmRlciwgaWQpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gaWYgc2ltcGxlIGdhbWUgYXZhaWxhYmxlIGNhbmNlbCBpdC4gcHV0IHRydWUgaW4gc28gbm8gcmVjYWxsIHRvIHRoaXMgZnVuY2l0b24gCiAgICAgICAgICAgIC8vIGFsc28gdHJ1ZSB3aWxsIHByZXZlbnQgdG8gd2l0aGRyYXcgdHdpY2UuIAogICAgICAgICAgICBpZiAoKCFza2lwU2ltcGxlKSAmJiBnYW1lLlNpbXBsZUdhbWUpewogICAgICAgICAgICAgICAgQ2FuY2VsU2ltcGxlT2ZmZXJfaW50ZXJuYWwoZ2FtZS5hbW91bnQsdHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIG5vdCBmcm9tIHNpbXBsZSBjYW5jZWw/IHRoZW4gd2l0aGRyYXcuIAogICAgICAgICAgICBpZiAoIXNraXBTaW1wbGUpewogICAgICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihnYW1lLmFtb3VudCk7IC8vIHByZXZlbnQgc2VuZCB0d2ljZS4KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgfQogICAgCiAgICAvLyBwbGF5IG9mZmVyIGdhbWU6IHRhcmdldCBhZGRyZXNzLCBpZCwgcG9zc2libGUgc2V0dGluZy4gCiAgICBmdW5jdGlvbiBPZmZlclBsYXkoYWRkcmVzcyB0YXJnZXQsIHVpbnQ4IGlkLCB1aW50OCBzZXR0aW5nKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgdmFyIEdhbWUgPSBPZmZlckdhbWVMaXN0W3RhcmdldF1baWRdOwogICAgICAgIHJlcXVpcmUoR2FtZS5zZXR0aW5nICE9IDApOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IEdhbWUuYW1vdW50KTsKICAgICAgICAKICAgICAgICB1aW50MjU2IGV4Y2VzcyA9IG1zZy52YWx1ZSAtIEdhbWUuYW1vdW50OwogICAgICAgIGlmIChleGNlc3MgPiAwKXsKICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihleGNlc3MpOyAvLyByZXR1cm4gdG9vIG11Y2guIAogICAgICAgIH0KICAgICAgICAKICAgICAgICB1aW50OCBjc2V0OwogICAgICAgIGJvb2wgc2dhbWU7IAogICAgICAgIHVpbnQ4IF9pZDsKICAgICAgICAKICAgICAgICAoY3NldCwgc2dhbWUsIGlkKSA9IERhdGFGcm9tU2V0dGluZyhHYW1lLnNldHRpbmcpOwogICAgICAgIAogICAgICAgIGJvb2wgY3JlYXRvckNob29zZXNCbHVlID0gR2V0U2V0dGluZyhHYW1lLnNldHRpbmcsIHNldHRpbmcpOwogICAgICAgIGJvb2wgYmx1ZTsKICAgICAgICBib29sIGNyZWF0b3J3aW5zOwogICAgICAgIChibHVlLCBjcmVhdG9yd2lucykgPSBQcm9jZXNzR2FtZSh0YXJnZXQsIG1zZy5zZW5kZXIsIGNyZWF0b3JDaG9vc2VzQmx1ZSwgR2FtZS5hbW91bnQpOwoKICAgICAgICAKICAgICAgICAvLyBhbm5vdW5jZSBwbGF5ZWQuIAogICAgICAgIGVtaXQgT2ZmZXJHYW1lUGxheWVkKHRhcmdldCwgbXNnLnNlbmRlciwgYmx1ZSwgY3JlYXRvcndpbnMsIEdhbWUuYW1vdW50LCBpZCk7CiAgICAgICAgLy8gZGlzYWJsZSBvZmZlci4gCiAgICAgICAgR2FtZS5zZXR0aW5nID0gMDsgLy8gZGlzYWJsZSB0aGlzIG9mZmVyLiAKICAgICAgICAKICAgICAgICAvLyBhbHNvIHNnYW1lPyB0aGVuIGNhbmNlbCB0aGlzIHRvbyB0byBwcmV2ZW50IGFub3RoZXIgY2FuY2VsIG9uIHRoaXMgb25lIAogICAgICAgIC8vIG90aGVyd2lzZSB5b3UgY2FuIGFsd2F5cyBtYWtlIHN1cmUgeW91IG5ldmVyIGxvc2UgbW9uZXkuIGhybS4KICAgICAgICBpZihzZ2FtZSl7CiAgICAgICAgICAgIC8vIGNhbmNlbCBzZ2FtZSAtPiB0cnVlIHByZXZlbnRzIHdpdGhkcmF3LgogICAgICAgICAgICBDYW5jZWxTaW1wbGVPZmZlcl9pbnRlcm5hbChHYW1lLmFtb3VudCwgdHJ1ZSk7CiAgICAgICAgfQogICAgICAgIAogICAgfQogICAgCiAgICAvLyBzYW1lIGFzIG9mZmVyIGNhbmNlbC4gCiAgICBmdW5jdGlvbiBDYW5jZWxTaW1wbGVPZmZlcl9pbnRlcm5hbCh1aW50MjU2IGZlZSwgYm9vbCBTa2lwT2ZmZXIpIGludGVybmFsIHsKICAgICAgICB1aW50OCBzZXR0aW5nID0gU2ltcGxlR2FtZUxpc3RbZmVlXS5zZXR0aW5nOwogICAgICAgIGlmIChzZXR0aW5nID09IDApewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICghKFNpbXBsZUdhbWVMaXN0W2ZlZV0uT3duZXIgPT0gbXNnLnNlbmRlcikpewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAKICAgICAgICAKICAgICAgICBib29sIG9mZmVyOwogICAgICAgIHVpbnQ4IGlkOwogICAgICAgIAogICAgICAgIChzZXR0aW5nLCBvZmZlciwgaWQpID0gRGF0YUZyb21TZXR0aW5nKHNldHRpbmcpOwogICAgICAgIFNpbXBsZUdhbWVMaXN0W2ZlZV0uc2V0dGluZyA9IDA7IC8vIHNldCB0byB6ZXJvLCBwcmV2ZW50IHJlY2FsbGluZy4KICAgICAgICAvLyBwcmV2ZW50IHJlY2FsbCBpZiBvZmZlciBhdmFpbGFibGU7IAogICAgICAgIC8vIG9mZmVyIGNhbmNlbCB3aXRoIG5vdCB3aXRoZHJhdy4gCiAgICAgICAgaWYgKCghU2tpcE9mZmVyKSAmJiBvZmZlcil7CiAgICAgICAgICAgIE9mZmVyQ2FuY2VsX2ludGVybmFsKGlkLCB0cnVlKTsKICAgICAgICB9CiAgICAgICAgCgogICAgICAgIC8vIGlmIGZpcnN0IGNhbGwgdGhlbiB3aXRoZHJhdy4gCiAgICAgICBpZiAoIVNraXBPZmZlcil7CiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZmVlKTsgLy8gcHJldmVudCBzZW5kIHR3aWNlLiAKICAgICAgIH0KICAgICAgICAKICAgICAgICBlbWl0IFNpbXBsZUdhbWVDYW5jZWxsZWQoIGZlZSk7CiAgICB9CiAgICAKICAgIC8vIGZhbHNlID0gZmlyc3QgY2FsbCBmb3IgY2FuY2VsIG9mZmVyLCBwcmV2ZW50IHdpdGhkcmF3IHR3aWNlIAogICAgLy8gd2l0aGRyYXdzIGZlZSB0byBvd25lciBpZiBoZSBvd25zIHRoaXMgb25lIAogICAgZnVuY3Rpb24gQ2FuY2VsU2ltcGxlT2ZmZXIodWludDI1NiBmZWUpIHB1YmxpYyB7CiAgICAgICAgCiAgICAgICBDYW5jZWxTaW1wbGVPZmZlcl9pbnRlcm5hbChmZWUsIGZhbHNlKTsKICAgIH0KICAgIAogICAgLy9yZXR1cm5zIGlmIGNyZWF0b3Igd2FudHMgYmx1ZSAKICAgIC8vIHllYWggdGhpcyBwcm9ncmFtIGhhcyB0aGlzIGxvZ2ljIGJlaGluZCBpdCBhbHRob3VnaCBub3QgbmVjZXNzYXJ5LiAKICAgIGZ1bmN0aW9uIEdldFNldHRpbmcodWludDggc2V0dGluZzEsIHVpbnQ4IHNldHRpbmcyKSBwdXJlIGludGVybmFsIHJldHVybnMgKGJvb2wgY3JlYXRvckNob29zZXNCbHVlKXsKICAgICAgICBpZiAoc2V0dGluZzEgPT0gMSl7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChzZXR0aW5nMSA9PSAyKXsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgICBpZiAoc2V0dGluZzIgPT0gMSl7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIHBsYXkgZ2FtZSB3aXRoIHNldHRpbmcsIGFuZCBhIGJvb2wgaWYgeW91IGFsc28gd2FudCB0byBjcmVhdGUgb2ZmZXIgb24gdGhlIHNpZGUuIAogICAgLy8gKGFsbCBkb25lIGluIG9uZSBUWCkKICAgIGZ1bmN0aW9uIFBsYXlTaW1wbGVHYW1lKHVpbnQ4IHNldHRpbmcsIGJvb2wgV2FudEluT2ZmZXIpIHBheWFibGUgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwogICAgICAgIHJlcXVpcmUoc2V0dGluZyA+IDApOyAvLyBkbyBub3QgY3JlYXRlIGNhbmNlbGxlZCBvbmUsIG90aGVyd2lzZSB3aXRoZHJhdyBub3QgcG9zc2libGUuIAoKICAgICAgICB2YXIgZ2FtZSA9IChTaW1wbGVHYW1lTGlzdFttc2cudmFsdWVdKTsKICAgICAgICB1aW50OCBpZDsKICAgICAgICBpZiAoZ2FtZS5zZXR0aW5nICE9IDApewogICAgICAgICAgICAvLyBwbGF5IGdhbWUgLSBOT1QgY2FuY2VsbGVkLiAKICAgICAgICAgICAgLy8gPnRmdyBtc2cudmFsdWUgaXMgYWxyZWFkeSBjb3JyZWN0IGxvbCBubyBwYXliYWNrcyAKICAgICAgICAgICAgcmVxdWlyZShnYW1lLk93bmVyICE9IG1zZy5zZW5kZXIpOyAvLyBkbyBub3QgcGxheSBhZ2FpbnN0IHNlbGYsIHdvdWxkIHNlbmQgZmVlLCB1bmZhaXIuCiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBwcm9jZXNzIGxvZ2ljCiAgICAgICAgICAgIHVpbnQ4IGNzZXQ7IAogICAgICAgICAgICBib29sIG9nYW1lOwogICAgICAgICAgICBpZDsgCiAgICAgICAgICAgIChjc2V0LCBvZ2FtZSwgaWQpID0gRGF0YUZyb21TZXR0aW5nKGdhbWUuc2V0dGluZyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBib29sIGNyZWF0b3JDaG9vc2VzQmx1ZSA9IEdldFNldHRpbmcoY3NldCwgc2V0dGluZyk7CiAgICAgICAgICAgIGJvb2wgYmx1ZTsKICAgICAgICAgICAgYm9vbCBjcmVhdG9yd2luczsKICAgICAgICAgICAgLy9hY3R1YWxseSBwbGF5IGFuZCBwYXkgaW4gaGVyZS4gCiAgICAgICAgICAgIChibHVlLCBjcmVhdG9yd2lucykgPSBQcm9jZXNzR2FtZShnYW1lLk93bmVyLCBtc2cuc2VuZGVyLCBjcmVhdG9yQ2hvb3Nlc0JsdWUsIG1zZy52YWx1ZSk7CiAgICAgICAgICAgIGVtaXQgU2ltcGxlR2FtZVBsYXllZChnYW1lLk93bmVyLCBtc2cuc2VuZGVyLCBibHVlLCBjcmVhdG9yd2lucywgbXNnLnZhbHVlKTsKICAgICAgICAgICAgLy8gZGVsZXRlICwgbWFrZXMgaXQgdW5hYmxlIHRvIGNhbmNlbCAKICAgICAgICAgICAgZ2FtZS5zZXR0aW5nID0gMDsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIGNhbmNlbCB0aGUgb2ZmZXIgCiAgICAgICAgICAgIC8vIGlzIGNhbGxlZCBzZWNvbmQgdGltZTogbWFrZXMgc3VyZSBubyB3aXRoZHJhdyBoYXBwZW5zLiAKICAgICAgICAgICAgaWYgKG9nYW1lKXsKICAgICAgICAgICAgICAgIE9mZmVyQ2FuY2VsX2ludGVybmFsKGlkLCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgLy8gY3JlYXRlIGEgZ2FtZSAhIAogICAgICAgICAgICAvL3JlcXVpcmUoc2V0dGluZyAhPSAwKTsKICAgICAgICAgICAgaWQgPSAwOwogICAgICAgICAgICBpZiAoV2FudEluT2ZmZXIpewogICAgICAgICAgICAgICAgLy8gYWxzbyBjcmVhdGUgYW4gb2ZmZXIuIGNvc3RzIG1vcmUgZ2FzIAogICAgICAgICAgICAgICAgaWQgPSBDcmVhdGVPZmZlcl9pbnRlcm5hbChzZXR0aW5nLCB0cnVlKTsgLy8gaWQgaXMgcmV0dXJuZWQgdG8gdHJhY2sgdGhpcyB3aGVuIGNhbmNlbC4gCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIGNvbnZlcnQgc2V0dGluZy4gYWxzbyBjaGVja3MgZm9yIHNldHRpbmcgaW5wdXQgPD0gMzsgCiAgICAgICAgICAgIC8vIGJpdCBtYWdpYyAKICAgICAgICAgICAgCiAgICAgICAgICAgIHNldHRpbmcgPSBEYXRhVG9TZXR0aW5nKHNldHRpbmcsIFdhbnRJbk9mZmVyLCBpZCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBtYWtlIGdhbWUsIHB1c2ggaXQgaW4gZ2FtZSAsIGVtaXQgZXZlbnQgCiAgICAgICAgICAgIHZhciBteUdhbWUgPSBTaW1wbGVHYW1lKG1zZy5zZW5kZXIsIHNldHRpbmcpOwogICAgICAgICAgICBTaW1wbGVHYW1lTGlzdFttc2cudmFsdWVdID0gbXlHYW1lOwogICAgICAgICAgICBlbWl0IFNpbXBsZUdhbWVDcmVhdGVkKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSwgc2V0dGluZyk7CiAgICAgICAgfQogICAgfQogICAgCiAgICAgICAgLy8gcHJvY2VzcyBnYW1lIAogICAgICAgIC8vIE5PVEU6IEFEUkVTU0VTIGFyZSBhZGRlZCB0byByYW5kb20gdG8gbWFrZSBzdXJlIHdlIGdldCBkaWZmZXJlbnQgcmFuZG9tIHJlc3VsdHMgCiAgICAgICAgLy8gZm9yIGV2ZXJ5IGNyZWF0b3IvdGFyZ2V0IHBhaXIgUEVSIGJsb2NrCiAgICAgICAgLy8gdGhhdCBzaG91bGQgYmUgc3VmZmljaWVudCwgaXQgd291bGQgYmUgd2VpcmQgaWYgYSBibG9jayBvbmx5IGNyZWF0ZXMgc2FtZSBjb2xvciBhbGwgdGltZS4gCiAgICBmdW5jdGlvbiBQcm9jZXNzR2FtZShhZGRyZXNzIGNyZWF0b3IsIGFkZHJlc3MgdGFyZ2V0LCBib29sIGNyZWF0b3JXYW50c0JsdWUsIHVpbnQyNTYgZmVlKSBpbnRlcm5hbCByZXR1cm5zIChib29sIGJsdWUsIGJvb2wgY1dvbikgewogICAgICAgIHVpbnQgcmFuZG9tID0gcmFuZCgxLCBjcmVhdG9yKTsKICAgICAgICBibHVlID0gKHJhbmRvbT09MCk7CiAgICAgIC8vICBjV29uID0gKGNyZWF0b3JXYW50c0JsdWUgJiYgKGJsdWUpKSB8fCAoIWNyZWF0b3JXYW50c0JsdWUgJiYgKCFibHVlKSk7ID50ZncgcmV0YXJkZWQgCiAgICAgICAgY1dvbiA9IChjcmVhdG9yV2FudHNCbHVlID09IGJsdWUpOyAvLyBjaGVjayBpZiBjd29uIHZpYSBsb2dpYy4KICAgICAgICBpZiAoY1dvbil7CiAgICAgICAgICAgIGNyZWF0b3IudHJhbnNmZXIoRG9GZWUoZmVlKjIpKTsgLy8gRG9GZWUgcmV0dXJucyBwYXltZW50LiAKICAgICAgICB9CiAgICAgICAgZWxzZXsKICAgICAgICAgICAgdGFyZ2V0LnRyYW5zZmVyKERvRmVlKGZlZSoyKSk7CiAgICAgICAgfQogICAgfQogICAgLy8gcmFuZG9tIGZ1bmN0aW9uIHZpYSBibG9ja2hhcyBhbmQgYWRkcmVzcyBhZGRpdGlvbiwgdGltZXN0YW1wLiAKICAgIGZ1bmN0aW9uIHJhbmQodWludCBtYXgsIGFkZHJlc3Mgb3RoZXIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQgcmVzdWx0KXsKICAgICAgICB1aW50IGFkZCA9IHVpbnQgKG1zZy5zZW5kZXIpICsgdWludChvdGhlcikgKyB1aW50KGJsb2NrLnRpbWVzdGFtcCk7CiAgICAgICAgdWludCByYW5kb21fbnVtYmVyID0gYWRkbW9kKHVpbnQgKGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXItMSkpLCBhZGQsIHVpbnQgKG1heCArIDEpKSA7CiAgICAgICAgcmV0dXJuIHJhbmRvbV9udW1iZXI7ICAgCiAgICB9CiAgICAKICAgIAogICAgCiAgICAvLyBwYXkgZmVlIHRvIG93bmVycwogICAgLy8gbm8gc2FmZW1hdGggbmVjZXNzYXJ5LCB3aWxsIGFsd2F5cyBiZSBmaW5lIGR1ZSB0byBjb250cm9sIGluIGxpbWl0cyBvZiBmZWVzLiAKICAgIGZ1bmN0aW9uIERvRmVlKHVpbnQyNTYgYW10KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IGxlZnQpewogICAgICAgIHVpbnQyNTYgdG90YWxGZWUgPSAoYW10KkNGZWUpLzEwMDAwOyAvLyB0b3RhbCBmZWUgcGFpZCAKICAgICAgICB1aW50MjU2IGNGZWUgPSAodG90YWxGZWUqSEZlZVBhcnQpLzEwMDAwOyAvLyBoZWxwZXIgZmVlIHBhaWQgCiAgICAgICAgdWludDI1NiBkRmVlID0gdG90YWxGZWUgLSBjRmVlOyAvL2RldiBmZWUgcGFpZCAKICAgICAgICAKICAgICAgICBPd25lci50cmFuc2ZlcihkRmVlKTsgLy8gcGF5IAogICAgICAgIEhlbHBPd25lci50cmFuc2ZlcihjRmVlKTsKICAgICAgICAKICAgICAgICByZXR1cm4gYW10LXRvdGFsRmVlOyAvLyByZXR1cm4gZXhjZXNzIHRvIGJlIHBhaWQgCiAgICB9CiAgICAvL2Z1bmN0aW9uIFNldEZlZSh1aW50MTYpIHB1YmxpYyBPbmx5T3duZXI7CiAgICAvL2Z1bmN0aW9uIFNldEhGZWUodWludDE2KSBwdWJsaWMgT25seU93bmVyOwoKICAgIC8vIGhlbHBlciAKICAgIAogICAgLy8gY29udmVydHMgc2V0dGluZ3MgdG8gdWludDggdXNpbmcgbXVsdGlwbGUgYml0cyB0byBzdG9yZSB0aGlzIGRhdGEuCiAgICAgZnVuY3Rpb24gRGF0YVRvU2V0dGluZyh1aW50OCBzZXR0aW5nLCBib29sIG9mZmVyLCB1aW50OCBpZCkgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50OCBvdXRwdXQpewogICAgICAgIHJlcXVpcmUoc2V0dGluZyA8PSAzKTsKCiAgICAgICAgaWYgKCFvZmZlcil7CiAgICAgICAgICAgIHJldHVybiBzZXR0aW5nOyAvLyBubyBpZCBuZWNlc3NhcnkuCiAgICAgICAgfQogICAgICAgIHJlcXVpcmUoaWQgPD0gMTUpOwogICAgICAgIHVpbnQ4IG91dD1zZXR0aW5nOwogICAgICAgIGlmIChvZmZlcil7CiAgICAgICAgICAgIG91dCA9IG91dCArIDQ7IC8vIGVuYWJsZSBiaXQgMzsKICAgICAgICB9CiAgICAgICAgLy8gc2hpZnQgSUQgYml0cyA0IGJpdHMgdG8gcmlnaHQgc28gdGhleSBhcmUgb24gYml0IDUgdG8gOAogICAgICAgIHVpbnQ4IGNvbnZfaWQgPSBpZCA8PCA0OwogICAgICAgIC8vIGFkZCBiaXRzIAogICAgICAgIG91dCA9IG91dCArIGNvbnZfaWQ7IAogICAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgICAKICAgIC8vIGZyb20gc2V0dGluZywgMyBkYXRhIHRvIHJldHJpZXZlIGFib3ZlLgogICAgZnVuY3Rpb24gRGF0YUZyb21TZXR0aW5nKHVpbnQ4IG4pIHB1cmUgaW50ZXJuYWwgcmV0dXJucyh1aW50OCBzZXQsIGJvb2wgb2ZmZXIsIHVpbnQ4IGlkKXsKICAgICAgICAvLyBzZXR0aW5nIHNpbXBtbHkgZXh0cmFjdCBmaXJzdCAyIGJpdHMuIAogICAgICAgIHNldCA9IChuICYgMyk7IAogICAgICAgIC8vIG9mZmVyIGV4dHJhY3QgM3JkIGJpdCBhbmQgY29udmVydCBpdCB0byBib29sIChjYW5ub3Qgc2hpZnQgYW5kIGNoZWNrIGR1ZSB0byBJRCksIG9yIG1pZ2h0IGhhdmUgdXNlZCBNT0QgMSAKICAgICAgICBvZmZlciA9IChib29sKSAoKG4gJiA0KT09NCk7IAogICAgICAgIC8vIHNoaWZ0IG4gYnkgNCBiaXRzIHRvIGV4dHJhY3QgaWQuIHRocm93cyBhd2F5IGZpcnN0IDQgYml0cywgbmljZS4KICAgICAgICBpZCA9IChuKSA+PiA0OwogICAgICAgIAogICAgfQogICAgCiAgICAKfQ=='.
	

]
