Class {
	#name : #SRT8073335c3b74c6f3f52b5a414684b969ed167ea1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8073335c3b74c6f3f52b5a414684b969ed167ea1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovL0ludGVyZmFjZXMKCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAppbnRlcmZhY2UgRVJDMjAgewogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKTsKCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKfQoKY29udHJhY3QgVW5pbG90VG9rZW4gaXMgRVJDMjAgewogICAgc3RydWN0IFRva2VuU3RhZ2UgewogICAgICAgIHN0cmluZyBuYW1lOwogICAgICAgIHVpbnQgbnVtQ29pbnNTdGFydDsKICAgICAgICB1aW50IGNvaW5zQXZhaWxhYmxlOwogICAgICAgIHVpbnQgYm9udXM7CiAgICAgICAgdWludCBzdGFydHNBdDsKICAgICAgICB1aW50IGVuZHNBdDsKICAgICAgICB1aW50IGJhbGFuY2U7IC8vQW1vdW50IG9mIGV0aGVyIHNlbnQgZHVyaW5nIHRoaXMgc3RhZ2UKICAgIH0KCiAgICAvL1Rva2VuIHN5bWJvbAogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiVU5JVCI7CiAgICAvL1Rva2VuIG5hbWUKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJVbmlsb3QgdG9rZW4iOwogICAgLy9JdCBjYW4gYmUgcmVlZWVhbHkgc21hbGwKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIC8vVGhpcyBvbmUgZHVwbGljYXRlcyB0aGUgYWJvdmUgYnV0IHdpbGwgaGF2ZSB0byB1c2UgaXQgYmVjYXVzZSBvZgogICAgLy9zb2xpZGl0eSBidWcgd2l0aCBwb3dlciBvcGVyYXRpb24KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGFjY3VyYWN5ID0gMTAwMDAwMDAwMDAwMDAwMDAwMDsKCiAgICAvLzUwMCBtbG4gdG9rZW5zCiAgICB1aW50MjU2IGludGVybmFsIF90b3RhbFN1cHBseSA9IDUwMCAqICgxMCoqNikgKiBhY2N1cmFjeTsKCiAgICAvL1B1YmxpYyBpbnZlc3RvciBjYW4gYnV5IHRva2VucyBmb3IgMzAgZXRoZXIgYXQgbWF4aW11bQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgc2luZ2xlSW52ZXN0b3JDYXAgPSAzMCBldGhlcjsgLy8zMCBldGhlcgoKICAgIC8vRGlzdHJpYnV0aW9uIHVuaXRzCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBEU1RfSUNPICAgICA9IDYyOyAvLzYyJQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgRFNUX1JFU0VSVkUgPSAxMDsgLy8xMCUKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IERTVF9CT1VOVFkgID0gMzsgIC8vMyUKICAgIC8vUmVmZXJyYWwgYW5kIEJvbnVzIFByb2dyYW0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IERTVF9SX05fQl9QUk9HUkFNID0gMTA7IC8vMTAlCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBEU1RfQURWSVNFUlMgICAgICA9IDU7ICAvLzUlCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBEU1RfVEVBTSAgICAgICAgICA9IDEwOyAvLzEwJQoKICAgIC8vUmVmZXJyYWwgQm9udXNlcwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUkVGRVJSQUxfQk9OVVNfTEVWRUwxID0gNTsgLy81JQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUkVGRVJSQUxfQk9OVVNfTEVWRUwyID0gNDsgLy80JQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUkVGRVJSQUxfQk9OVVNfTEVWRUwzID0gMzsgLy8zJQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUkVGRVJSQUxfQk9OVVNfTEVWRUw0ID0gMjsgLy8yJQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUkVGRVJSQUxfQk9OVVNfTEVWRUw1ID0gMTsgLy8xJQoKICAgIC8vVG9rZW4gYW1vdW50CiAgICAvLzI1IG1sbiB0b2tlbnMKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOX0FNT1VOVF9QUkVfSUNPID0gMjUgKiAoMTAqKjYpICogYWNjdXJhY3k7CiAgICAvLzUgbWxuIHRva2VucwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9LRU5fQU1PVU5UX0lDT19TVEFHRTFfUFJFX1NBTEUxID0gNSAqICgxMCoqNikgKiBhY2N1cmFjeTsKICAgIC8vNSBtbG4gdG9rZW5zCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBUT0tFTl9BTU9VTlRfSUNPX1NUQUdFMV9QUkVfU0FMRTIgPSA1ICogKDEwKio2KSAqIGFjY3VyYWN5OwogICAgLy81IG1sbiB0b2tlbnMKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOX0FNT1VOVF9JQ09fU1RBR0UxX1BSRV9TQUxFMyA9IDUgKiAoMTAqKjYpICogYWNjdXJhY3k7CiAgICAvLzUgbWxuIHRva2VucwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9LRU5fQU1PVU5UX0lDT19TVEFHRTFfUFJFX1NBTEU0ID0gNSAqICgxMCoqNikgKiBhY2N1cmFjeTsKICAgIC8vMTIyLjUgbWxuIHRva2VucwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9LRU5fQU1PVU5UX0lDT19TVEFHRTFfUFJFX1NBTEU1ID0gMTIyNSAqICgxMCoqNSkgKiBhY2N1cmFjeTsKICAgIC8vMjY1IG1sbiB0b2tlbnMKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOX0FNT1VOVF9JQ09fU1RBR0UyID0gMTQyNSAqICgxMCoqNSkgKiBhY2N1cmFjeTsKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBCT05VU19QUkVfSUNPID0gNDA7IC8vNDAlCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBCT05VU19JQ09fU1RBR0UxX1BSRV9TQUxFMSA9IDM1OyAvLzM1JQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQk9OVVNfSUNPX1NUQUdFMV9QUkVfU0FMRTIgPSAzMDsgLy8zMCUKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEJPTlVTX0lDT19TVEFHRTFfUFJFX1NBTEUzID0gMjU7IC8vMjUlCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBCT05VU19JQ09fU1RBR0UxX1BSRV9TQUxFNCA9IDIwOyAvLzIwJQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQk9OVVNfSUNPX1NUQUdFMV9QUkVfU0FMRTUgPSAwOyAvLzAlCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBCT05VU19JQ09fU1RBR0UyID0gMDsgLy9ObyBib251cwoKICAgIC8vVG9rZW4gUHJpY2Ugb24gQ29pbiBPZmZlcgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgcHJpY2UgPSA3OSBzemFibzsgLy8wLjAwMDA3OSBFVEgKCiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBBRFZJU09SU19XQUxMRVQgPSAweDc3NjYwNzk1QkQzNjFDZDQzYzM2MjdlQWRhZDQ0ZERjMjAyNmFEMTc7CiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBSRVNFUlZFX1dBTExFVCA9IDB4NzMxQjQ3ODQ3MzUyZkEyY0ZmODNENTI1MUZENmE1MjY2ZjkwODc4ZDsKICAgIGFkZHJlc3MgcHVibGljIGNvbnN0YW50IEJPVU5UWV9XQUxMRVQgPSAweDc5NEVGOWM2ODBiREQwYkVmNDhCZWY0NmJBNjg0NzFlNDQ5RDY3RmI7CiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBSX05fRF9XQUxMRVQgPSAweDc5NEVGOWM2ODBiREQwYkVmNDhCZWY0NmJBNjg0NzFlNDQ5RDY3RmI7CiAgICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBTVE9SQUdFX1dBTExFVCA9IDB4RTJBOEYxNDdmYzgwODczOENhYjE1MmIwMUM3MjQ1RjM4NmZEOGQ4OTsKCiAgICAvLyBPd25lciBvZiB0aGlzIGNvbnRyYWN0CiAgICBhZGRyZXNzIHB1YmxpYyBhZG1pbmlzdHJhdG9yOwoKICAgIC8vIEJhbGFuY2VzIGZvciBlYWNoIGFjY291bnQKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgICAvLyBPd25lciBvZiBhY2NvdW50IGFwcHJvdmVzIHRoZSB0cmFuc2ZlciBvZiBhbiBhbW91bnQgdG8gYW5vdGhlciBhY2NvdW50CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICAvL01vc3RseSBuZWVkZWQgZm9yIGludGVybmFsIHVzZQogICAgdWludDI1NiBpbnRlcm5hbCB0b3RhbENvaW5zQXZhaWxhYmxlOwoKICAgIC8vQWxsIHRva2VuIHN0YWdlcy4gVG90YWwgNiBzdGFnZXMKICAgIFRva2VuU3RhZ2VbN10gc3RhZ2VzOwoKICAgIC8vSW5kZXggb2YgY3VycmVudCBzdGFnZSBpbiBzdGFnZSBhcnJheQogICAgdWludCBjdXJyZW50U3RhZ2U7CgogICAgLy9FbmFibGVzIG9yIGRpc2FibGVzIGRlYnVnIG1vZGUuIERlYnVnIG1vZGUgaXMgc2V0IG9ubHkgaW4gY29uc3RydWN0b3IuCiAgICBib29sIGlzRGVidWcgPSBmYWxzZTsKCiAgICBldmVudCBTdGFnZVVwZGF0ZWQoc3RyaW5nIGZyb20sIHN0cmluZyB0byk7CgogICAgLy8gRnVuY3Rpb25zIHdpdGggdGhpcyBtb2RpZmllciBjYW4gb25seSBiZSBleGVjdXRlZCBieSB0aGUgb3duZXIKICAgIG1vZGlmaWVyIG9ubHlBZG1pbmlzdHJhdG9yKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBhZG1pbmlzdHJhdG9yKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG5vdEFkbWluaXN0cmF0b3IoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IGFkbWluaXN0cmF0b3IpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUR1cmluZ0lDTygpIHsKICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGFnZSA8IHN0YWdlcy5sZW5ndGgpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUFmdGVySUNPKCl7CiAgICAgICAgcmVxdWlyZShjdXJyZW50U3RhZ2UgPj0gc3RhZ2VzLmxlbmd0aCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBtZWV0VGhlQ2FwKCkgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByaWNlKTsgLy8gQXQgbGVhc3Qgb25lIHRva2VuCiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpc0ZyZWV6ZWRSZXNlcnZlKGFkZHJlc3MgX2FkZHJlc3MpIHsKICAgICAgICByZXF1aXJlKCAoIF9hZGRyZXNzID09IFJFU0VSVkVfV0FMTEVUICkgJiYgbm93ID4gKHN0YWdlc1sgKHN0YWdlcy5sZW5ndGggLSAxKSBdLmVuZHNBdCArIDE4MiBkYXlzKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gVW5pbG90VG9rZW4oKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIGFkbWluaXN0cmF0b3IgPSBtc2cuc2VuZGVyOwogICAgICAgIHRvdGFsQ29pbnNBdmFpbGFibGUgPSBfdG90YWxTdXBwbHk7CiAgICAgICAgLy9XYXMgYXMgZm4gcGFyYW1ldGVyIGZvciBkZWJ1Z2dpbmcKICAgICAgICBpc0RlYnVnID0gZmFsc2U7CgogICAgICAgIF9zZXR1cFN0YWdlcygpOwogICAgICAgIF9wcm9jZWVkU3RhZ2UoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmVhbG9jYXRlQ29pbnMoKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yCiAgICB7CiAgICAgICAgdG90YWxDb2luc0F2YWlsYWJsZSAtPSBiYWxhbmNlc1tBRFZJU09SU19XQUxMRVRdICs9ICggKCBfdG90YWxTdXBwbHkgKiBEU1RfQURWSVNFUlMgKSAvIDEwMCApOwogICAgICAgIHRvdGFsQ29pbnNBdmFpbGFibGUgLT0gYmFsYW5jZXNbUkVTRVJWRV9XQUxMRVRdICs9ICggKCBfdG90YWxTdXBwbHkgKiBEU1RfUkVTRVJWRSApIC8gMTAwICk7CgogICAgICAgIGFkZHJlc3NbN10gbWVtb3J5IHRlYW1XYWxsZXRzID0gZ2V0VGVhbVdhbGxldHMoKTsKICAgICAgICB1aW50IHRlYW1TdXBwbHkgPSAoICggX3RvdGFsU3VwcGx5ICogRFNUX1RFQU0gKSAvIDEwMCApOwogICAgICAgIHVpbnQgbWVtYmVyQW1vdW50ID0gdGVhbVN1cHBseSAvIHRlYW1XYWxsZXRzLmxlbmd0aDsKCiAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGkgPCB0ZWFtV2FsbGV0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoIGkgPT0gKCB0ZWFtV2FsbGV0cy5sZW5ndGggLSAxICkgKSB7CiAgICAgICAgICAgICAgICBtZW1iZXJBbW91bnQgPSB0ZWFtU3VwcGx5OwogICAgICAgICAgICB9CgogICAgICAgICAgICBiYWxhbmNlc1t0ZWFtV2FsbGV0c1tpXV0gKz0gbWVtYmVyQW1vdW50OwogICAgICAgICAgICB0ZWFtU3VwcGx5IC09IG1lbWJlckFtb3VudDsKICAgICAgICAgICAgdG90YWxDb2luc0F2YWlsYWJsZSAtPSBtZW1iZXJBbW91bnQ7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRlYW1XYWxsZXRzKCkKICAgICAgICBwdWJsaWMKICAgICAgICBwdXJlCiAgICAgICAgcmV0dXJucyAoYWRkcmVzc1s3XSBtZW1vcnkgcmVzdWx0KQogICAgewogICAgICAgIHJlc3VsdFswXSA9IDB4NDBlM0Q4ZkZjNDZkNzNBYjVERjg3OEM3NTFEODEzYTRjQjdCMzg4RDsKICAgICAgICByZXN1bHRbMV0gPSAweDVFMDY1YTgwZjY2MzVCNmE0NjMyM2UzMzgzMDU3Y0U2MDUxYUFjQTA7CiAgICAgICAgcmVzdWx0WzJdID0gMHgwY0YzNTg1RmJBQjJhMTI5OUY4MzQ3YTlCODdDRjdCNGZjZENFNTk5OwogICAgICAgIHJlc3VsdFszXSA9IDB4NWZEZDNCQTVCNkZmMzQ5ZDMxZUIwYTcyQTk1M0U0NTRDOTk0OTRhQzsKICAgICAgICByZXN1bHRbNF0gPSAweEM5YmU5ODE4ZUUxQjJjQ2YyRTRmNjY5ZDI0ZUIwNzk4MzkwRmZiNTQ7CiAgICAgICAgcmVzdWx0WzVdID0gMHg3NzY2MDc5NUJEMzYxQ2Q0M2MzNjI3ZUFkYWQ0NGREYzIwMjZhRDE3OwogICAgICAgIHJlc3VsdFs2XSA9IDB4ZDEzMjg5MjAzODg5YkQ4OThkNDllMzFhMTUwMDM4ODQ0MUMwMzY2MzsKICAgIH0KCiAgICBmdW5jdGlvbiBfc2V0dXBTdGFnZXMoKQogICAgICAgIGludGVybmFsCiAgICB7CiAgICAgICAgLy9QcmVzYWxlIHN0YWdlCiAgICAgICAgc3RhZ2VzWzBdLm5hbWUgPSAnUHJlc2FsZSBzdGFnZSc7CiAgICAgICAgc3RhZ2VzWzBdLm51bUNvaW5zU3RhcnQgPSB0b3RhbENvaW5zQXZhaWxhYmxlOwogICAgICAgIHN0YWdlc1swXS5jb2luc0F2YWlsYWJsZSA9IFRPS0VOX0FNT1VOVF9QUkVfSUNPOwogICAgICAgIHN0YWdlc1swXS5ib251cyA9IEJPTlVTX1BSRV9JQ087CgogICAgICAgIGlmIChpc0RlYnVnKSB7CiAgICAgICAgICAgIHN0YWdlc1swXS5zdGFydHNBdCA9IG5vdzsKICAgICAgICAgICAgc3RhZ2VzWzBdLmVuZHNBdCA9IHN0YWdlc1swXS5zdGFydHNBdCArIDMwIHNlY29uZHM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RhZ2VzWzBdLnN0YXJ0c0F0ID0gMTUxNTYxMDgwMDsgLy8xMHRoIG9mIEphbnVhcnkgMjAxOCBhdCAxOTowMFVUQwogICAgICAgICAgICBzdGFnZXNbMF0uZW5kc0F0ID0gMTUxODg5NDAwMDsgLy8xN3RoIG9mIEZlYnJ1YXJ5IDIwMTggYXQgMTk6MDBVVEMKICAgICAgICB9CgogICAgICAgIC8vSUNPIFN0YWdlIDEgcHJlLXNhbGUgMQogICAgICAgIHN0YWdlc1sxXS5uYW1lID0gJ0lDTyBTdGFnZSAxIHByZS1zYWxlIDEnOwogICAgICAgIHN0YWdlc1sxXS5jb2luc0F2YWlsYWJsZSA9IFRPS0VOX0FNT1VOVF9JQ09fU1RBR0UxX1BSRV9TQUxFMTsKICAgICAgICBzdGFnZXNbMV0uYm9udXMgPSBCT05VU19JQ09fU1RBR0UxX1BSRV9TQUxFMTsKCiAgICAgICAgaWYgKGlzRGVidWcpIHsKICAgICAgICAgICAgc3RhZ2VzWzFdLnN0YXJ0c0F0ID0gc3RhZ2VzWzBdLmVuZHNBdDsKICAgICAgICAgICAgc3RhZ2VzWzFdLmVuZHNBdCA9IHN0YWdlc1sxXS5zdGFydHNBdCArIDMwIHNlY29uZHM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RhZ2VzWzFdLnN0YXJ0c0F0ID0gMTUxOTMyNjAwMDsgLy8yMnRoIG9mIEZlYnJ1YXJ5IDIwMTggYXQgMTk6MDBVVEMKICAgICAgICAgICAgc3RhZ2VzWzFdLmVuZHNBdCA9IDE1MjE3NDUyMDA7IC8vMjJ0aCBvZiBNYXJjaCAyMDE4IGF0IDE5OjAwVVRDCiAgICAgICAgfQoKICAgICAgICAvL0lDTyBTdGFnZSAxIHByZS1zYWxlIDIKICAgICAgICBzdGFnZXNbMl0ubmFtZSA9ICdJQ08gU3RhZ2UgMSBwcmUtc2FsZSAyJzsKICAgICAgICBzdGFnZXNbMl0uY29pbnNBdmFpbGFibGUgPSBUT0tFTl9BTU9VTlRfSUNPX1NUQUdFMV9QUkVfU0FMRTI7CiAgICAgICAgc3RhZ2VzWzJdLmJvbnVzID0gQk9OVVNfSUNPX1NUQUdFMV9QUkVfU0FMRTI7CgogICAgICAgIHN0YWdlc1syXS5zdGFydHNBdCA9IHN0YWdlc1sxXS5zdGFydHNBdDsKICAgICAgICBzdGFnZXNbMl0uZW5kc0F0ID0gc3RhZ2VzWzFdLmVuZHNBdDsKCiAgICAgICAgLy9JQ08gU3RhZ2UgMSBwcmUtc2FsZSAzCiAgICAgICAgc3RhZ2VzWzNdLm5hbWUgPSAnSUNPIFN0YWdlIDEgcHJlLXNhbGUgMyc7CiAgICAgICAgc3RhZ2VzWzNdLmNvaW5zQXZhaWxhYmxlID0gVE9LRU5fQU1PVU5UX0lDT19TVEFHRTFfUFJFX1NBTEUzOwogICAgICAgIHN0YWdlc1szXS5ib251cyA9IEJPTlVTX0lDT19TVEFHRTFfUFJFX1NBTEUzOwoKICAgICAgICBzdGFnZXNbM10uc3RhcnRzQXQgPSBzdGFnZXNbMV0uc3RhcnRzQXQ7CiAgICAgICAgc3RhZ2VzWzNdLmVuZHNBdCA9IHN0YWdlc1sxXS5lbmRzQXQ7CgogICAgICAgIC8vSUNPIFN0YWdlIDEgcHJlLXNhbGUgNAogICAgICAgIHN0YWdlc1s0XS5uYW1lID0gJ0lDTyBTdGFnZSAxIHByZS1zYWxlIDQnOwogICAgICAgIHN0YWdlc1s0XS5jb2luc0F2YWlsYWJsZSA9IFRPS0VOX0FNT1VOVF9JQ09fU1RBR0UxX1BSRV9TQUxFNDsKICAgICAgICBzdGFnZXNbNF0uYm9udXMgPSBCT05VU19JQ09fU1RBR0UxX1BSRV9TQUxFNDsKCiAgICAgICAgc3RhZ2VzWzRdLnN0YXJ0c0F0ID0gc3RhZ2VzWzFdLnN0YXJ0c0F0OwogICAgICAgIHN0YWdlc1s0XS5lbmRzQXQgPSBzdGFnZXNbMV0uZW5kc0F0OwoKICAgICAgICAvL0lDTyBTdGFnZSAxIHByZS1zYWxlIDUKICAgICAgICBzdGFnZXNbNV0ubmFtZSA9ICdJQ08gU3RhZ2UgMSBwcmUtc2FsZSA1JzsKICAgICAgICBzdGFnZXNbNV0uY29pbnNBdmFpbGFibGUgPSBUT0tFTl9BTU9VTlRfSUNPX1NUQUdFMV9QUkVfU0FMRTU7CiAgICAgICAgc3RhZ2VzWzVdLmJvbnVzID0gQk9OVVNfSUNPX1NUQUdFMV9QUkVfU0FMRTU7CgogICAgICAgIHN0YWdlc1s1XS5zdGFydHNBdCA9IHN0YWdlc1sxXS5zdGFydHNBdDsKICAgICAgICBzdGFnZXNbNV0uZW5kc0F0ID0gc3RhZ2VzWzFdLmVuZHNBdDsKCiAgICAgICAgLy9JQ08gU3RhZ2UgMgogICAgICAgIHN0YWdlc1s2XS5uYW1lID0gJ0lDTyBTdGFnZSAyJzsKICAgICAgICBzdGFnZXNbNl0uY29pbnNBdmFpbGFibGUgPSBUT0tFTl9BTU9VTlRfSUNPX1NUQUdFMjsKICAgICAgICBzdGFnZXNbNl0uYm9udXMgPSBCT05VU19JQ09fU1RBR0UyOwoKICAgICAgICBpZiAoaXNEZWJ1ZykgewogICAgICAgICAgICBzdGFnZXNbNl0uc3RhcnRzQXQgPSBzdGFnZXNbNV0uZW5kc0F0OwogICAgICAgICAgICBzdGFnZXNbNl0uZW5kc0F0ID0gc3RhZ2VzWzZdLnN0YXJ0c0F0ICsgMzAgc2Vjb25kczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdGFnZXNbNl0uc3RhcnRzQXQgPSAxNTI0MjUwODAwOyAvLzIwdGggb2YgQXByaWwgMjAxOCBhdCAxOTowMFVUQwogICAgICAgICAgICBzdGFnZXNbNl0uZW5kc0F0ID0gMTUyNjg0MjgwMDsgLy8yMHRoIG9mIE1heSAyMDE4IGF0IDE5OjAwVVRDCiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIF9wcm9jZWVkU3RhZ2UoKQogICAgICAgIGludGVybmFsCiAgICB7CiAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgaWYgKCBjdXJyZW50U3RhZ2UgPCBzdGFnZXMubGVuZ3RoCiAgICAgICAgICAgICYmIChub3cgPj0gc3RhZ2VzW2N1cnJlbnRTdGFnZV0uZW5kc0F0IHx8IGdldEF2YWlsYWJsZUNvaW5zRm9yQ3VycmVudFN0YWdlKCkgPT0gMCkgKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50U3RhZ2UrKzsKICAgICAgICAgICAgICAgIHVpbnQgdG90YWxUb2tlbnNGb3JTYWxlID0gVE9LRU5fQU1PVU5UX1BSRV9JQ08KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUT0tFTl9BTU9VTlRfSUNPX1NUQUdFMV9QUkVfU0FMRTEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUT0tFTl9BTU9VTlRfSUNPX1NUQUdFMV9QUkVfU0FMRTIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUT0tFTl9BTU9VTlRfSUNPX1NUQUdFMV9QUkVfU0FMRTMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUT0tFTl9BTU9VTlRfSUNPX1NUQUdFMV9QUkVfU0FMRTQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBUT0tFTl9BTU9VTlRfSUNPX1NUQUdFMjsKCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YWdlID49IHN0YWdlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAvL0J1cm5pbmcgYWxsIHVuc29sZCB0b2tlbnMgYW5kIHByb3BvcnRpb25hbGx5IG90aGVyIGZvciBkZWxpZ2F0aW9uCiAgICAgICAgICAgICAgICAgICAgX3RvdGFsU3VwcGx5IC09ICggKCAoIHN0YWdlc1soc3RhZ2VzLmxlbmd0aCAtIDEpXS5jb2luc0F2YWlsYWJsZSAqIERTVF9CT1VOVFkgKSAvIDEwMCApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKCAoIHN0YWdlc1soc3RhZ2VzLmxlbmd0aCAtIDEpXS5jb2luc0F2YWlsYWJsZSAqIERTVF9SX05fQl9QUk9HUkFNICkgLyAxMDAgKSApOwoKICAgICAgICAgICAgICAgICAgICBiYWxhbmNlc1tCT1VOVFlfV0FMTEVUXSA9ICgoKHRvdGFsVG9rZW5zRm9yU2FsZSAtIHN0YWdlc1soc3RhZ2VzLmxlbmd0aCAtIDEpXS5jb2luc0F2YWlsYWJsZSkgKiBEU1RfQk9VTlRZKS8xMDApOwogICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzW1JfTl9EX1dBTExFVF0gPSAoKCh0b3RhbFRva2Vuc0ZvclNhbGUgLSBzdGFnZXNbKHN0YWdlcy5sZW5ndGggLSAxKV0uY29pbnNBdmFpbGFibGUpICogRFNUX1JfTl9CX1BST0dSQU0pLzEwMCk7CgogICAgICAgICAgICAgICAgICAgIHRvdGFsQ29pbnNBdmFpbGFibGUgPSAwOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvL0lDTyBlbmRlZAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHN0YWdlc1tjdXJyZW50U3RhZ2VdLm51bUNvaW5zU3RhcnQgPSB0b3RhbENvaW5zQXZhaWxhYmxlOwoKICAgICAgICAgICAgICAgIGlmICggY3VycmVudFN0YWdlID4gMCApIHsKICAgICAgICAgICAgICAgICAgICAvL01vdmUgYWxsIGxlZnQgdG9rZW5zIHRvIGxhc3Qgc3RhZ2UKICAgICAgICAgICAgICAgICAgICBzdGFnZXNbKHN0YWdlcy5sZW5ndGggLSAxKV0uY29pbnNBdmFpbGFibGUgKz0gc3RhZ2VzWyAoY3VycmVudFN0YWdlIC0gMSApIF0uY29pbnNBdmFpbGFibGU7CiAgICAgICAgICAgICAgICAgICAgU3RhZ2VVcGRhdGVkKHN0YWdlc1tjdXJyZW50U3RhZ2UgLSAxXS5uYW1lLCBzdGFnZXNbY3VycmVudFN0YWdlXS5uYW1lKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRvdGFsQ29pbnNBdmFpbGFibGUoKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIHRvdGFsQ29pbnNBdmFpbGFibGU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QXZhaWxhYmxlQ29pbnNGb3JDdXJyZW50U3RhZ2UoKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zKHVpbnQpCiAgICB7CiAgICAgICAgVG9rZW5TdGFnZSBtZW1vcnkgc3RhZ2UgPSBzdGFnZXNbY3VycmVudFN0YWdlXTsKCiAgICAgICAgcmV0dXJuIHN0YWdlLmNvaW5zQXZhaWxhYmxlOwogICAgfQoKICAgIC8vLS0tLS0tLS0tLS0tLSBFUkMyMCBtZXRob2RzIC0tLS0tLS0tLS0tLS0vLwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKQogICAgICAgIHB1YmxpYwogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICByZXR1cm4gX3RvdGFsU3VwcGx5OwogICAgfQoKCiAgICAvLyBXaGF0IGlzIHRoZSBiYWxhbmNlIG9mIGEgcGFydGljdWxhciBhY2NvdW50PwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKQogICAgICAgIHB1YmxpYwogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKQogICAgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKCiAgICAvLyBUcmFuc2ZlciB0aGUgYmFsYW5jZSBmcm9tIG93bmVyJ3MgYWNjb3VudCB0byBhbm90aGVyIGFjY291bnQKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seUFmdGVySUNPCiAgICAgICAgaXNGcmVlemVkUmVzZXJ2ZShfdG8pCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50CiAgICAgICAgICAgICYmIF9hbW91bnQgPiAwCiAgICAgICAgICAgICYmIGJhbGFuY2VzW190b10gKyBfYW1vdW50ID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfYW1vdW50OwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF9hbW91bnQ7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKCiAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIGZyb20gYWRkcmVzcyBfZnJvbSB0byBhZGRyZXNzIF90bwogICAgLy8gVGhlIHRyYW5zZmVyRnJvbSBtZXRob2QgaXMgdXNlZCBmb3IgYSB3aXRoZHJhdyB3b3JrZmxvdywgYWxsb3dpbmcgY29udHJhY3RzIHRvIHNlbmQKICAgIC8vIHRva2VucyBvbiB5b3VyIGJlaGFsZiwgZm9yIGV4YW1wbGUgdG8gImRlcG9zaXQiIHRvIGEgY29udHJhY3QgYWRkcmVzcyBhbmQvb3IgdG8gY2hhcmdlCiAgICAvLyBmZWVzIGluIHN1Yi1jdXJyZW5jaWVzOyB0aGUgY29tbWFuZCBzaG91bGQgZmFpbCB1bmxlc3MgdGhlIF9mcm9tIGFjY291bnQgaGFzCiAgICAvLyBkZWxpYmVyYXRlbHkgYXV0aG9yaXplZCB0aGUgc2VuZGVyIG9mIHRoZSBtZXNzYWdlIHZpYSBzb21lIG1lY2hhbmlzbTsgd2UgcHJvcG9zZQogICAgLy8gdGhlc2Ugc3RhbmRhcmRpemVkIEFQSXMgZm9yIGFwcHJvdmFsOgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKAogICAgICAgIGFkZHJlc3MgX2Zyb20sCiAgICAgICAgYWRkcmVzcyBfdG8sCiAgICAgICAgdWludDI1NiBfYW1vdW50CiAgICApCiAgICAgICAgcHVibGljCiAgICAgICAgb25seUFmdGVySUNPCiAgICAgICAgaXNGcmVlemVkUmVzZXJ2ZShfZnJvbSkKICAgICAgICBpc0ZyZWV6ZWRSZXNlcnZlKF90bykKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50CiAgICAgICAgICAgICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF9hbW91bnQKICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAKICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfYW1vdW50OwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfYW1vdW50OwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF9hbW91bnQ7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKCiAgICAvLyBBbGxvdyBfc3BlbmRlciB0byB3aXRoZHJhdyBmcm9tIHlvdXIgYWNjb3VudCwgbXVsdGlwbGUgdGltZXMsIHVwIHRvIHRoZSBfdmFsdWUgYW1vdW50LgogICAgLy8gSWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYWdhaW4gaXQgb3ZlcndyaXRlcyB0aGUgY3VycmVudCBhbGxvd2FuY2Ugd2l0aCBfdmFsdWUuCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5QWZ0ZXJJQ08KICAgICAgICBpc0ZyZWV6ZWRSZXNlcnZlKF9zcGVuZGVyKQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykKICAgIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KICAgIC8vLS0tLS0tLS0tLS0tLSBFUkMyMCBNZXRob2RzIEVORCAtLS0tLS0tLS0tLS0tLy8KCiAgICAvL1JldHVybnMgYm9udXMgZm9yIGNlcnRhaW4gbGV2ZWwgb2YgcmVmZXJlbmNlCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVSZWZlcnJhbEJvbnVzKHVpbnQgYW1vdW50LCB1aW50IGxldmVsKQogICAgICAgIHB1YmxpYwogICAgICAgIHB1cmUKICAgICAgICByZXR1cm5zICh1aW50IGJvbnVzKQogICAgewogICAgICAgIGJvbnVzID0gMDsKCiAgICAgICAgaWYgKCBsZXZlbCA9PSAxICkgewogICAgICAgICAgICBib251cyA9ICggKCBhbW91bnQgKiBSRUZFUlJBTF9CT05VU19MRVZFTDEgKSAvIDEwMCApOwogICAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT0gMikgewogICAgICAgICAgICBib251cyA9ICggKCBhbW91bnQgKiBSRUZFUlJBTF9CT05VU19MRVZFTDIgKSAvIDEwMCApOwogICAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT0gMykgewogICAgICAgICAgICBib251cyA9ICggKCBhbW91bnQgKiBSRUZFUlJBTF9CT05VU19MRVZFTDMgKSAvIDEwMCApOwogICAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT0gNCkgewogICAgICAgICAgICBib251cyA9ICggKCBhbW91bnQgKiBSRUZFUlJBTF9CT05VU19MRVZFTDQgKSAvIDEwMCApOwogICAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT0gNSkgewogICAgICAgICAgICBib251cyA9ICggKCBhbW91bnQgKiBSRUZFUlJBTF9CT05VU19MRVZFTDUgKSAvIDEwMCApOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVCb251cyh1aW50IGFtb3VudE9mVG9rZW5zKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHJldHVybiAoICggc3RhZ2VzW2N1cnJlbnRTdGFnZV0uYm9udXMgKiBhbW91bnRPZlRva2VucyApIC8gMTAwICk7CiAgICB9CgogICAgZXZlbnQgVG9rZW5QdXJjaGFzZWQoc3RyaW5nIHN0YWdlLCB1aW50IHZhbHVlU3VibWl0dGVkLCB1aW50IHZhbHVlUmVmdW5kZWQsIHVpbnQgdG9rZW5zUHVyY2hhc2VkKTsKCiAgICBmdW5jdGlvbiAoKQogICAgICAgIHB1YmxpYwogICAgICAgIHBheWFibGUKICAgICAgICBub3RBZG1pbmlzdHJhdG9yCiAgICAgICAgb25seUR1cmluZ0lDTwogICAgICAgIG1lZXRUaGVDYXAKICAgIHsKICAgICAgICBfcHJvY2VlZFN0YWdlKCk7CiAgICAgICAgcmVxdWlyZShjdXJyZW50U3RhZ2UgPCBzdGFnZXMubGVuZ3RoKTsKICAgICAgICByZXF1aXJlKHN0YWdlc1tjdXJyZW50U3RhZ2VdLnN0YXJ0c0F0IDw9IG5vdyAmJiBub3cgPCBzdGFnZXNbY3VycmVudFN0YWdlXS5lbmRzQXQpOwogICAgICAgIHJlcXVpcmUoZ2V0QXZhaWxhYmxlQ29pbnNGb3JDdXJyZW50U3RhZ2UoKSA+IDApOwoKICAgICAgICB1aW50IHJlcXVlc3RlZEFtb3VudE9mVG9rZW5zID0gKCAoIG1zZy52YWx1ZSAqIGFjY3VyYWN5ICkgLyBwcmljZSApOwogICAgICAgIHVpbnQgYW1vdW50VG9CdXkgPSByZXF1ZXN0ZWRBbW91bnRPZlRva2VuczsKICAgICAgICB1aW50IHJlZnVuZCA9IDA7CgogICAgICAgIGlmICggYW1vdW50VG9CdXkgPiBnZXRBdmFpbGFibGVDb2luc0ZvckN1cnJlbnRTdGFnZSgpICkgewogICAgICAgICAgICBhbW91bnRUb0J1eSA9IGdldEF2YWlsYWJsZUNvaW5zRm9yQ3VycmVudFN0YWdlKCk7CiAgICAgICAgICAgIHJlZnVuZCA9ICggKCAocmVxdWVzdGVkQW1vdW50T2ZUb2tlbnMgLSBhbW91bnRUb0J1eSkgLyBhY2N1cmFjeSApICogcHJpY2UgKTsKCiAgICAgICAgICAgIC8vIFJldHVybmluZyBFVEgKICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlciggcmVmdW5kICk7CiAgICAgICAgfQoKICAgICAgICBUb2tlblB1cmNoYXNlZChzdGFnZXNbY3VycmVudFN0YWdlXS5uYW1lLCBtc2cudmFsdWUsIHJlZnVuZCwgYW1vdW50VG9CdXkpOwogICAgICAgIHN0YWdlc1tjdXJyZW50U3RhZ2VdLmNvaW5zQXZhaWxhYmxlIC09IGFtb3VudFRvQnV5OwogICAgICAgIHN0YWdlc1tjdXJyZW50U3RhZ2VdLmJhbGFuY2UgKz0gKG1zZy52YWx1ZSAtIHJlZnVuZCk7CgogICAgICAgIHVpbnQgYW1vdW50RGVsaXZlcmVkID0gYW1vdW50VG9CdXkgKyBjYWxjdWxhdGVCb251cyhhbW91bnRUb0J1eSk7CgogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdICs9IGFtb3VudERlbGl2ZXJlZDsKICAgICAgICB0b3RhbENvaW5zQXZhaWxhYmxlIC09IGFtb3VudERlbGl2ZXJlZDsKCiAgICAgICAgaWYgKCBnZXRBdmFpbGFibGVDb2luc0ZvckN1cnJlbnRTdGFnZSgpID09IDAgKSB7CiAgICAgICAgICAgIF9wcm9jZWVkU3RhZ2UoKTsKICAgICAgICB9CgogICAgICAgIFNUT1JBR0VfV0FMTEVULnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgLy9JdCBkb2Vzbid0IHJlYWxseSBjbG9zZSB0aGUgc3RhZ2UKICAgIC8vSXQganVzdCBuZWVkZWQgdG8gcHVzaCB0cmFuc2FjdGlvbiB0byB1cGRhdGUgc3RhZ2UgYW5kIHVwZGF0ZSBibG9jay5ub3cKICAgIGZ1bmN0aW9uIGNsb3NlU3RhZ2UoKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yCiAgICB7CiAgICAgICAgX3Byb2NlZWRTdGFnZSgpOwogICAgfQp9Cgpjb250cmFjdCBFUkMyMENvbnRyYWN0IGlzIEVSQzIwIHsKICAgIC8vVG9rZW4gc3ltYm9sCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJVTklUIjsKCiAgICAvL1Rva2VuIG5hbWUKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJVbmlsb3QgdG9rZW4iOwoKICAgIC8vSXQgY2FuIGJlIHJlZWVlYWx5IHNtYWxsCiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICAvLyBCYWxhbmNlcyBmb3IgZWFjaCBhY2NvdW50CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDk2KSBwdWJsaWMgYmFsYW5jZXM7CgogICAgLy8gT3duZXIgb2YgYWNjb3VudCBhcHByb3ZlcyB0aGUgdHJhbnNmZXIgb2YgYW4gYW1vdW50IHRvIGFub3RoZXIgYWNjb3VudAogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDk2KSkgYWxsb3dlZDsKCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50KTsKCgogICAgLy8gV2hhdCBpcyB0aGUgYmFsYW5jZSBvZiBhIHBhcnRpY3VsYXIgYWNjb3VudD8KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQgYmFsYW5jZSkKICAgIHsKICAgICAgICByZXR1cm4gdWludChiYWxhbmNlc1tfb3duZXJdKTsKICAgIH0KCgogICAgLy8gVHJhbnNmZXIgdGhlIGJhbGFuY2UgZnJvbSBvd25lcidzIGFjY291bnQgdG8gYW5vdGhlciBhY2NvdW50CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX2Ftb3VudAogICAgICAgICAgICAmJiBfYW1vdW50ID4gMAogICAgICAgICAgICAmJiBiYWxhbmNlc1tfdG9dICsgX2Ftb3VudCA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gdWludDk2KF9hbW91bnQpOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IHVpbnQ5NihfYW1vdW50KTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgoKICAgIC8vIFNlbmQgX3ZhbHVlIGFtb3VudCBvZiB0b2tlbnMgZnJvbSBhZGRyZXNzIF9mcm9tIHRvIGFkZHJlc3MgX3RvCiAgICAvLyBUaGUgdHJhbnNmZXJGcm9tIG1ldGhvZCBpcyB1c2VkIGZvciBhIHdpdGhkcmF3IHdvcmtmbG93LCBhbGxvd2luZyBjb250cmFjdHMgdG8gc2VuZAogICAgLy8gdG9rZW5zIG9uIHlvdXIgYmVoYWxmLCBmb3IgZXhhbXBsZSB0byAiZGVwb3NpdCIgdG8gYSBjb250cmFjdCBhZGRyZXNzIGFuZC9vciB0byBjaGFyZ2UKICAgIC8vIGZlZXMgaW4gc3ViLWN1cnJlbmNpZXM7IHRoZSBjb21tYW5kIHNob3VsZCBmYWlsIHVubGVzcyB0aGUgX2Zyb20gYWNjb3VudCBoYXMKICAgIC8vIGRlbGliZXJhdGVseSBhdXRob3JpemVkIHRoZSBzZW5kZXIgb2YgdGhlIG1lc3NhZ2UgdmlhIHNvbWUgbWVjaGFuaXNtOyB3ZSBwcm9wb3NlCiAgICAvLyB0aGVzZSBzdGFuZGFyZGl6ZWQgQVBJcyBmb3IgYXBwcm92YWw6CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oCiAgICAgICAgYWRkcmVzcyBfZnJvbSwKICAgICAgICBhZGRyZXNzIF90bywKICAgICAgICB1aW50MjU2IF9hbW91bnQKICAgICkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50CiAgICAgICAgICAgICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF9hbW91bnQKICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAKICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSB1aW50OTYoX2Ftb3VudCk7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IHVpbnQ5NihfYW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSB1aW50OTYoX2Ftb3VudCk7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKCiAgICAvLyBBbGxvdyBfc3BlbmRlciB0byB3aXRoZHJhdyBmcm9tIHlvdXIgYWNjb3VudCwgbXVsdGlwbGUgdGltZXMsIHVwIHRvIHRoZSBfdmFsdWUgYW1vdW50LgogICAgLy8gSWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYWdhaW4gaXQgb3ZlcndyaXRlcyB0aGUgY3VycmVudCBhbGxvd2FuY2Ugd2l0aCBfdmFsdWUuCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSB1aW50OTYoX2Ftb3VudCk7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50IHJlbWFpbmluZykKICAgIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KfQoKaW50ZXJmYWNlIFRva2VuU3RhZ2VzTWFuYWdlciB7CiAgICBmdW5jdGlvbiBpc0RlYnVnKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBzZXRUb2tlbihhZGRyZXNzIHRva2VuQWRkcmVzcykgcHVibGljOwogICAgZnVuY3Rpb24gZ2V0UG9vbCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50OTYpOwogICAgZnVuY3Rpb24gZ2V0Qm9udXMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDgpOwogICAgZnVuY3Rpb24gaXNGcmVlemVUaW1lb3V0KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gaXNUaW1lb3V0KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gaXNJQ08oKSBwdWJsaWMgdmlldyByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gaXNDYW5MaXN0KCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBjYWxjdWxhdGVCb251cyh1aW50OTYgYW1vdW50KSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50ODgpOwogICAgZnVuY3Rpb24gZGVsZWdhdGVGcm9tUG9vbCh1aW50OTYgYW1vdW50KSBwdWJsaWM7CiAgICBmdW5jdGlvbiBkZWxlZ2F0ZUZyb21Cb251cyh1aW50ODggYW1vdW50KSBwdWJsaWM7CiAgICBmdW5jdGlvbiBkZWxlZ2F0ZUZyb21SZWZlcnJhbCh1aW50ODggYW1vdW50KSBwdWJsaWM7CgogICAgZnVuY3Rpb24gZ2V0Qm9udXNQb29sKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDg4KTsKICAgIGZ1bmN0aW9uIGdldFJlZmVycmFsUG9vbCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQ4OCk7Cn0KCmludGVyZmFjZSBXaGl0ZWxpc3QgewogICAgZnVuY3Rpb24gYWRkKGFkZHJlc3MgX3dsQWRkcmVzcykgcHVibGljOwogICAgZnVuY3Rpb24gYWRkQnVsayhhZGRyZXNzW10gX3dsQWRkcmVzc2VzKSBwdWJsaWM7CiAgICBmdW5jdGlvbiByZW1vdmUoYWRkcmVzcyBfd2xBZGRyZXNzZXMpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHJlbW92ZUJ1bGsoYWRkcmVzc1tdIF93bEFkZHJlc3NlcykgcHVibGljOwogICAgZnVuY3Rpb24gZ2V0QWxsKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYWRkcmVzc1tdKTsKICAgIGZ1bmN0aW9uIGlzSW5MaXN0KGFkZHJlc3MgX2NoZWNrQWRkcmVzcykgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCk7Cn0KCmNvbnRyYWN0IEFkbWluaXN0cmF0ZWQgewogICAgYWRkcmVzcyBwdWJsaWMgYWRtaW5pc3RyYXRvcjsKCiAgICBtb2RpZmllciBvbmx5QWRtaW5pc3RyYXRvcigpIHsKICAgICAgICByZXF1aXJlKGFkbWluaXN0cmF0b3IgPT0gdHgub3JpZ2luKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG5vdEFkbWluaXN0cmF0b3IoKSB7CiAgICAgICAgcmVxdWlyZShhZG1pbmlzdHJhdG9yICE9IHR4Lm9yaWdpbik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRBZG1pbmlzdHJhdG9yKGFkZHJlc3MgX2FkbWluaXN0cmF0b3IpCiAgICAgICAgaW50ZXJuYWwKICAgIHsKICAgICAgICBhZG1pbmlzdHJhdG9yID0gX2FkbWluaXN0cmF0b3I7CiAgICB9Cn0KCmNvbnRyYWN0IFVOSVR2MiBpcyBFUkMyMENvbnRyYWN0LEFkbWluaXN0cmF0ZWQgewogICAgLy9Ub2tlbiBzeW1ib2wKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlVOSVQiOwogICAgLy9Ub2tlbiBuYW1lCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiVW5pbG90IHRva2VuIjsKICAgIC8vSXQgY2FuIGJlIHJlZWVlYWx5IHNtYWxsCiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICAvL1RvdGFsIHN1cHBseSA1MDBtbG4gaW4gdGhlIHN0YXJ0CiAgICB1aW50OTYgcHVibGljIF90b3RhbFN1cHBseSA9IHVpbnQ5Nig1MDAwMDAwMDAgKiAoMTAqKjE4KSk7CgogICAgVW5pbG90VG9rZW4gcHVibGljIHNvdXJjZVRva2VuOwoKICAgIFdoaXRlbGlzdCBwdWJsaWMgdHJhbnNmZXJXaGl0ZUxpc3Q7CgogICAgV2hpdGVsaXN0IHB1YmxpYyBwYXltZW50R2F0ZXdheXM7CgogICAgVG9rZW5TdGFnZXNNYW5hZ2VyIHB1YmxpYyBzdGFnZXNNYW5hZ2VyOwoKICAgIGJvb2wgcHVibGljIHVubG9ja2VkID0gZmFsc2U7CgogICAgYm9vbCBwdWJsaWMgYnVybmVkID0gZmFsc2U7CgogICAgLy90b2tlbkltcG9ydFt0b2tlbkhvbGRlcl1bc291cmNlVG9rZW5dID0gdHJ1ZS9mYWxzZTsKICAgIG1hcHBpbmcgKCBhZGRyZXNzID0+IG1hcHBpbmcgKCBhZGRyZXNzID0+IGJvb2wgKSApIHB1YmxpYyB0b2tlbkltcG9ydDsKCiAgICBldmVudCBUb2tlbnNJbXBvcnRlZChhZGRyZXNzIGluZGV4ZWQgdG9rZW5Ib2xkZXIsIHVpbnQ5NiBhbW91bnQsIGFkZHJlc3MgaW5kZXhlZCBzb3VyY2UpOwogICAgZXZlbnQgVG9rZW5zRGVsZWdhdGVkKGFkZHJlc3MgaW5kZXhlZCB0b2tlbkhvbGRlciwgdWludDk2IGFtb3VudCwgYWRkcmVzcyBpbmRleGVkIHNvdXJjZSk7CiAgICBldmVudCBVbmxvY2tlZCgpOwogICAgZXZlbnQgQnVybmVkKHVpbnQ5NiBhbW91bnQpOwoKICAgIG1vZGlmaWVyIGlzTG9ja2VkKCkgewogICAgICAgIHJlcXVpcmUodW5sb2NrZWQgPT0gZmFsc2UpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaXNOb3RCdXJuZWQoKSB7CiAgICAgICAgcmVxdWlyZShidXJuZWQgPT0gZmFsc2UpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaXNUcmFuc2ZlckFsbG93ZWQoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIHsKICAgICAgICBpZiAoIHNvdXJjZVRva2VuLlJFU0VSVkVfV0FMTEVUKCkgPT0gX2Zyb20gKSB7CiAgICAgICAgICAgIHJlcXVpcmUoIHN0YWdlc01hbmFnZXIuaXNGcmVlemVUaW1lb3V0KCkgKTsKICAgICAgICB9CiAgICAgICAgcmVxdWlyZSh1bmxvY2tlZAogICAgICAgICAgICAgICAgfHwgKCBzdGFnZXNNYW5hZ2VyICE9IGFkZHJlc3MoMCkgJiYgc3RhZ2VzTWFuYWdlci5pc0Nhbkxpc3QoKSApCiAgICAgICAgICAgICAgICB8fCAoIHRyYW5zZmVyV2hpdGVMaXN0ICE9IGFkZHJlc3MoMCkgJiYgKCB0cmFuc2ZlcldoaXRlTGlzdC5pc0luTGlzdChfZnJvbSkgfHwgdHJhbnNmZXJXaGl0ZUxpc3QuaXNJbkxpc3QoX3RvKSApICkKICAgICAgICApOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gVU5JVHYyKGFkZHJlc3MgX3NvdXJjZVRva2VuKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIHNldEFkbWluaXN0cmF0b3IodHgub3JpZ2luKTsKICAgICAgICBzb3VyY2VUb2tlbiA9IFVuaWxvdFRva2VuKF9zb3VyY2VUb2tlbik7CgogICAgICAgIC8qVHJhbnNhY3Rpb25zOgogICAgICAgIDB4OTljMjg2NzVhZGJkMGQwY2I3YmQ3ODNhZTE5NzQ5MjA3OGQ0MDYzZjQwYzExMTM5ZGQwN2MwMTVhNTQzZmZjYwogICAgICAgIDB4ODYwMzhkMTFlZThkYTQ2NzAzMzA5ZDJmYjQ1ZDE1MGYxZGM0ZTJiYmE2ZDBhOGZlZTE1ODAxNjExMTEwNGZmMQogICAgICAgIDB4MDM0MGE4YTJmYjg5NTEzYzAwODZhMzQ1OTczNDcwYjdiYzMzNDI0ZTgxOGNhNmEzMmRjZjlhZDY2YmY5ZDc1YwogICAgICAgICovCiAgICAgICAgYmFsYW5jZXNbMHhkMTMyODkyMDM4ODliRDg5OGQ0OWUzMWExNTAwMzg4NDQxQzAzNjYzXSArPSAxNDAwMDAwMDAwMDAwMDAwMDAwICogMzsKICAgICAgICBtYXJrQXNJbXBvcnRlZCgweGRCRjk4ZEY1REFkOTA3N2Y0NTdlMWRjZjg1QWE5NDIwQmNBOEI3NjEsIDB4ZDEzMjg5MjAzODg5YkQ4OThkNDllMzFhMTUwMDM4ODQ0MUMwMzY2Myk7CgogICAgICAgIC8vVHg6IDB4ZWM5YjdiNGMwZjE0MzUyODJlMmU5OGE2NmVmYmQ3NjEwZGU3ZWFjY2UzYjI0NDhjZDVmNTAzZDcwYTY0YTg5NQogICAgICAgIGJhbGFuY2VzWzB4RTMzMzA1QjJFRmJjQjMwMkRBNTEzQzM4NjcxRDAxNjQ2NjUxYTg2OF0gKz0gMTQwMDAwMDAwMDAwMDAwMDAwMDsKICAgICAgICBtYXJrQXNJbXBvcnRlZCgweGRCRjk4ZEY1REFkOTA3N2Y0NTdlMWRjZjg1QWE5NDIwQmNBOEI3NjEsIDB4RTMzMzA1QjJFRmJjQjMwMkRBNTEzQzM4NjcxRDAxNjQ2NjUxYTg2OCk7CgogICAgICAgIC8vQXNzaWduaW5nIGJvdW50eQogICAgICAgIGJhbGFuY2VzWzB4Nzk0RUY5YzY4MGJERDBiRWY0OEJlZjQ2YkE2ODQ3MWU0NDlENjdGYl0gKz0gdWludDk2KAogICAgICAgICAgICAoIHVpbnQoX3RvdGFsU3VwcGx5KSAqIHVpbnQ4KCBzb3VyY2VUb2tlbi5EU1RfQk9VTlRZKCkgKSApIC8gMTAwCiAgICAgICAgKTsKCiAgICAgICAgLy9Eb24ndCBpbXBvcnQgYm91bnR5IGFuZCBSJkIgdG9rZW5zCiAgICAgICAgbWFya0FzSW1wb3J0ZWQoMHhkQkY5OGRGNURBZDkwNzdmNDU3ZTFkY2Y4NUFhOTQyMEJjQThCNzYxLCAweDc5NEVGOWM2ODBiREQwYkVmNDhCZWY0NmJBNjg0NzFlNDQ5RDY3RmIpOwogICAgICAgIG1hcmtBc0ltcG9ydGVkKHNvdXJjZVRva2VuLCAweDc5NEVGOWM2ODBiREQwYkVmNDhCZWY0NmJBNjg0NzFlNDQ5RDY3RmIpOwoKICAgICAgICBtYXJrQXNJbXBvcnRlZCgweGRCRjk4ZEY1REFkOTA3N2Y0NTdlMWRjZjg1QWE5NDIwQmNBOEI3NjEsIDB4OTFENzQwRDg3QThBZUVEMWZjM0VBM0MzNDY4NDMxNzNjNTI5RDYzZSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0VHJhbnNmZXJXaGl0ZWxpc3QoYWRkcmVzcyB3aGl0ZUxpc3RBZGRyZXNzKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yCiAgICAgICAgaXNOb3RCdXJuZWQKICAgIHsKICAgICAgICB0cmFuc2ZlcldoaXRlTGlzdCA9IFdoaXRlbGlzdCh3aGl0ZUxpc3RBZGRyZXNzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXNhYmxlVHJhbnNmZXJXaGl0ZWxpc3QoKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yCiAgICAgICAgaXNOb3RCdXJuZWQKICAgIHsKICAgICAgICB0cmFuc2ZlcldoaXRlTGlzdCA9IFdoaXRlbGlzdChhZGRyZXNzKDApKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRTdGFnZXNNYW5hZ2VyKGFkZHJlc3Mgc3RhZ2VzTWFuYWdlckNvbnRyYWN0KQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yCiAgICAgICAgaXNOb3RCdXJuZWQKICAgIHsKICAgICAgICBzdGFnZXNNYW5hZ2VyID0gVG9rZW5TdGFnZXNNYW5hZ2VyKHN0YWdlc01hbmFnZXJDb250cmFjdCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UGF5bWVudEdhdGV3YXlMaXN0KGFkZHJlc3MgcGF5bWVudEdhdGV3YXlMaXN0Q29udHJhY3QpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seUFkbWluaXN0cmF0b3IKICAgICAgICBpc05vdEJ1cm5lZAogICAgewogICAgICAgIHBheW1lbnRHYXRld2F5cyA9IFdoaXRlbGlzdChwYXltZW50R2F0ZXdheUxpc3RDb250cmFjdCk7CiAgICB9CgogICAgLy9TVEFSVCBJbXBvcnQgcmVsYXRlZCBtZXRob2RzCiAgICBmdW5jdGlvbiBpc0ltcG9ydGVkKGFkZHJlc3MgX3NvdXJjZVRva2VuLCBhZGRyZXNzIF90b2tlbkhvbGRlcikKICAgICAgICBpbnRlcm5hbAogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gdG9rZW5JbXBvcnRbX3Rva2VuSG9sZGVyXVtfc291cmNlVG9rZW5dOwogICAgfQoKICAgIGZ1bmN0aW9uIG1hcmtBc0ltcG9ydGVkKGFkZHJlc3MgX3NvdXJjZVRva2VuLCBhZGRyZXNzIF90b2tlbkhvbGRlcikKICAgICAgICBpbnRlcm5hbAogICAgewogICAgICAgIHRva2VuSW1wb3J0W190b2tlbkhvbGRlcl1bX3NvdXJjZVRva2VuXSA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gaW1wb3J0RnJvbVNvdXJjZShFUkMyMCBfc291cmNlVG9rZW4sIGFkZHJlc3MgX3Rva2VuSG9sZGVyKQogICAgICAgIGludGVybmFsCiAgICB7CiAgICAgICAgaWYgKCAhaXNJbXBvcnRlZChfc291cmNlVG9rZW4sIF90b2tlbkhvbGRlcikgKSB7CiAgICAgICAgICAgIHVpbnQ5NiBvbGRCYWxhbmNlID0gdWludDk2KF9zb3VyY2VUb2tlbi5iYWxhbmNlT2YoX3Rva2VuSG9sZGVyKSk7CiAgICAgICAgICAgIGJhbGFuY2VzW190b2tlbkhvbGRlcl0gKz0gb2xkQmFsYW5jZTsKICAgICAgICAgICAgbWFya0FzSW1wb3J0ZWQoX3NvdXJjZVRva2VuLCBfdG9rZW5Ib2xkZXIpOwoKICAgICAgICAgICAgVG9rZW5zSW1wb3J0ZWQoX3Rva2VuSG9sZGVyLCBvbGRCYWxhbmNlLCBfc291cmNlVG9rZW4pOwogICAgICAgIH0KICAgIH0KCiAgICAvL0ltcG9ydHMgZnJvbSBzb3VyY2UgdG9rZW4KICAgIGZ1bmN0aW9uIGltcG9ydFRva2Vuc0Zyb21Tb3VyY2VUb2tlbihhZGRyZXNzIF90b2tlbkhvbGRlcikKICAgICAgICBpbnRlcm5hbAogICAgewogICAgICAgIGltcG9ydEZyb21Tb3VyY2UoRVJDMjAoc291cmNlVG9rZW4pLCBfdG9rZW5Ib2xkZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGltcG9ydEZyb21FeHRlcm5hbChFUkMyMCBfc291cmNlVG9rZW4sIGFkZHJlc3MgX3Rva2VuSG9sZGVyKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yCiAgICAgICAgaXNOb3RCdXJuZWQKICAgIHsKICAgICAgICByZXR1cm4gaW1wb3J0RnJvbVNvdXJjZShfc291cmNlVG9rZW4sIF90b2tlbkhvbGRlcik7CiAgICB9CgogICAgLy9JbXBvcnRzIGZyb20gcHJvdmlkZWQgdG9rZW4KICAgIGZ1bmN0aW9uIGltcG9ydFRva2Vuc1NvdXJjZUJ1bGsoRVJDMjAgX3NvdXJjZVRva2VuLCBhZGRyZXNzW10gX3Rva2VuSG9sZGVycykKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcgogICAgICAgIGlzTm90QnVybmVkCiAgICB7CiAgICAgICAgcmVxdWlyZShfdG9rZW5Ib2xkZXJzLmxlbmd0aCA8PSAyNTYpOwoKICAgICAgICBmb3IgKHVpbnQ4IGkgPSAwOyBpIDwgX3Rva2VuSG9sZGVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpbXBvcnRGcm9tU291cmNlKF9zb3VyY2VUb2tlbiwgX3Rva2VuSG9sZGVyc1tpXSk7CiAgICAgICAgfQogICAgfQogICAgLy9FTkQgSW1wb3J0IHJlbGF0ZWQgbWV0aG9kcwoKICAgIC8vU1RBUlQgRVJDMjAKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIHVpbnQoX3RvdGFsU3VwcGx5KTsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpCiAgICAgICAgcHVibGljCiAgICAgICAgY29uc3RhbnQKICAgICAgICByZXR1cm5zICh1aW50IGJhbGFuY2UpCiAgICB7CiAgICAgICAgYmFsYW5jZSA9IHN1cGVyLmJhbGFuY2VPZihfb3duZXIpOwoKICAgICAgICBpZiAoIWlzSW1wb3J0ZWQoc291cmNlVG9rZW4sIF9vd25lcikpIHsKICAgICAgICAgICAgYmFsYW5jZSArPSBzb3VyY2VUb2tlbi5iYWxhbmNlT2YoX293bmVyKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICBpc1RyYW5zZmVyQWxsb3dlZChtc2cuc2VuZGVyLCBfdG8pCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgKICAgICAgICBhZGRyZXNzIF9mcm9tLAogICAgICAgIGFkZHJlc3MgX3RvLAogICAgICAgIHVpbnQyNTYgX2Ftb3VudAogICAgKQogICAgICAgIHB1YmxpYwogICAgICAgIGlzVHJhbnNmZXJBbGxvd2VkKF9mcm9tLCBfdG8pCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgaXNUcmFuc2ZlckFsbG93ZWQobXNnLnNlbmRlciwgX3NwZW5kZXIpCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIHJldHVybiBzdXBlci5hcHByb3ZlKF9zcGVuZGVyLCBfYW1vdW50KTsKICAgIH0KICAgIC8vRU5EIEVSQzIwCgogICAgZnVuY3Rpb24gZGVsZWdhdGVUb2tlbnMoYWRkcmVzcyB0b2tlbkhvbGRlciwgdWludDk2IGFtb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICBpc05vdEJ1cm5lZAogICAgewogICAgICAgIHJlcXVpcmUocGF5bWVudEdhdGV3YXlzLmlzSW5MaXN0KG1zZy5zZW5kZXIpKTsKICAgICAgICByZXF1aXJlKHN0YWdlc01hbmFnZXIuaXNJQ08oKSk7CiAgICAgICAgcmVxdWlyZShzdGFnZXNNYW5hZ2VyLmdldFBvb2woKSA+PSBhbW91bnQpOwoKICAgICAgICB1aW50ODggYm9udXMgPSBzdGFnZXNNYW5hZ2VyLmNhbGN1bGF0ZUJvbnVzKGFtb3VudCk7CiAgICAgICAgc3RhZ2VzTWFuYWdlci5kZWxlZ2F0ZUZyb21Qb29sKGFtb3VudCk7CgogICAgICAgIGJhbGFuY2VzW3Rva2VuSG9sZGVyXSArPSBhbW91bnQgKyB1aW50OTYoYm9udXMpOwoKICAgICAgICBUb2tlbnNEZWxlZ2F0ZWQodG9rZW5Ib2xkZXIsIGFtb3VudCwgbXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gZGVsZWdhdGVCb251c1Rva2VucyhhZGRyZXNzIHRva2VuSG9sZGVyLCB1aW50ODggYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIGlzTm90QnVybmVkCiAgICB7CiAgICAgICAgcmVxdWlyZShwYXltZW50R2F0ZXdheXMuaXNJbkxpc3QobXNnLnNlbmRlcikgfHwgdHgub3JpZ2luID09IGFkbWluaXN0cmF0b3IpOwogICAgICAgIHJlcXVpcmUoc3RhZ2VzTWFuYWdlci5nZXRCb251c1Bvb2woKSA+PSBhbW91bnQpOwoKICAgICAgICBzdGFnZXNNYW5hZ2VyLmRlbGVnYXRlRnJvbUJvbnVzKGFtb3VudCk7CgogICAgICAgIGJhbGFuY2VzW3Rva2VuSG9sZGVyXSArPSBhbW91bnQ7CgogICAgICAgIFRva2Vuc0RlbGVnYXRlZCh0b2tlbkhvbGRlciwgdWludDk2KGFtb3VudCksIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlbGVnYXRlUmVmZXJhbFRva2VucyhhZGRyZXNzIHRva2VuSG9sZGVyLCB1aW50ODggYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIGlzTm90QnVybmVkCiAgICB7CiAgICAgICAgcmVxdWlyZShwYXltZW50R2F0ZXdheXMuaXNJbkxpc3QobXNnLnNlbmRlcikgfHwgdHgub3JpZ2luID09IGFkbWluaXN0cmF0b3IpOwogICAgICAgIHJlcXVpcmUoc3RhZ2VzTWFuYWdlci5nZXRSZWZlcnJhbFBvb2woKSA+PSBhbW91bnQpOwoKICAgICAgICBzdGFnZXNNYW5hZ2VyLmRlbGVnYXRlRnJvbVJlZmVycmFsKGFtb3VudCk7CgogICAgICAgIGJhbGFuY2VzW3Rva2VuSG9sZGVyXSArPSBhbW91bnQ7CgogICAgICAgIFRva2Vuc0RlbGVnYXRlZCh0b2tlbkhvbGRlciwgYW1vdW50LCBtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxlZ2F0ZVJlZmVycmFsVG9rZW5zQnVsayhhZGRyZXNzW10gdG9rZW5Ib2xkZXJzLCB1aW50ODhbXSBhbW91bnRzKQogICAgICAgIHB1YmxpYwogICAgICAgIGlzTm90QnVybmVkCiAgICB7CiAgICAgICAgcmVxdWlyZShwYXltZW50R2F0ZXdheXMuaXNJbkxpc3QobXNnLnNlbmRlcikgfHwgdHgub3JpZ2luID09IGFkbWluaXN0cmF0b3IpOwogICAgICAgIHJlcXVpcmUodG9rZW5Ib2xkZXJzLmxlbmd0aCA8PSAyNTYpOwogICAgICAgIHJlcXVpcmUodG9rZW5Ib2xkZXJzLmxlbmd0aCA9PSBhbW91bnRzLmxlbmd0aCk7CgogICAgICAgIGZvciAoIHVpbnQ4IGkgPSAwOyBpIDwgdG9rZW5Ib2xkZXJzLmxlbmd0aDsgaSsrICkgewogICAgICAgICAgICBkZWxlZ2F0ZVJlZmVyYWxUb2tlbnModG9rZW5Ib2xkZXJzW2ldLCBhbW91bnRzW2ldKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdW5sb2NrKCkKICAgICAgICBwdWJsaWMKICAgICAgICBpc0xvY2tlZAogICAgICAgIG9ubHlBZG1pbmlzdHJhdG9yCiAgICB7CiAgICAgICAgdW5sb2NrZWQgPSB0cnVlOwogICAgICAgIFVubG9ja2VkKCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnVybigpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seUFkbWluaXN0cmF0b3IKICAgIHsKICAgICAgICByZXF1aXJlKCFzdGFnZXNNYW5hZ2VyLmlzSUNPKCkpOwoKICAgICAgICB1aW50OTYgYnVybkFtb3VudCA9IHN0YWdlc01hbmFnZXIuZ2V0UG9vbCgpCiAgICAgICAgICAgICAgICAgICAgICAgICsgc3RhZ2VzTWFuYWdlci5nZXRCb251c1Bvb2woKQogICAgICAgICAgICAgICAgICAgICAgICArIHN0YWdlc01hbmFnZXIuZ2V0UmVmZXJyYWxQb29sKCk7CgogICAgICAgIF90b3RhbFN1cHBseSAtPSBidXJuQW1vdW50OwogICAgICAgIGJ1cm5lZCA9IHRydWU7CiAgICAgICAgQnVybmVkKGJ1cm5BbW91bnQpOwogICAgfQp9'.
	

]
