Class {
	#name : #SRTfc44094c53832e8a3cea0e97600950c11f14fe5f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfc44094c53832e8a3cea0e97600950c11f14fe5f >> base64 [
	^ 'LyoqCiAqIFRoZSBFZGdlbGVzcyBibGFja2phY2sgY29udHJhY3Qgb25seSBhbGxvd3MgY2FsbHMgZnJvbSB0aGUgYXV0aG9yaXplZCBjYXNpbm8gcHJveHkgY29udHJhY3RzLiAKICogVGhlIHByb3h5IGNvbnRyYWN0IG9ubHkgZm9yd2FyZCBtb3ZlcyBpZiBjYWxsZWQgYnkgYW4gYXV0aG9yaXplZCB3YWxsZXQgb3duZWQgYnkgdGhlIEVkZ2VsZXNzIGNhc2lubywgYnV0IHRoZSBnYW1lCiAqIGRhdGEgaGFzIHRvIGJlIHNpZ25lZCBieSB0aGUgcGxheWVyIHRvIHNob3cgaGlzIGFwcHJvdmFsLiBUaGlzIHdheSwgRWRnZWxlc3MgY2FuIHByb3ZpZGUgYSBmbHVpZCBnYW1lIGV4cGVyaWVuY2UKICogd2l0aG91dCBoYXZpbmcgdG8gd2FpdCBmb3IgdHJhbnNhY3Rpb24gY29uZmlybWF0aW9ucy4KICogYXV0aG9yOiBKdWxpYSBBbHRlbnJpZWQKICoqLwpwcmFnbWEgc29saWRpdHkgXjAuNC4xNzsKCmNvbnRyYWN0IG93bmVkIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICBtb2RpZmllciBvbmx5T3duZXIgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBvd25lZCgpIHB1YmxpY3sKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cn0KCmNvbnRyYWN0IG1vcnRhbCBpcyBvd25lZCB7CiAgZnVuY3Rpb24gY2xvc2UoKSBvbmx5T3duZXIgcHVibGljewogICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICB9Cn0KCmNvbnRyYWN0IGNhc2lubyBpcyBtb3J0YWx7CiAgLyoqIHRoZSBtaW5pbXVtIGJldCoqLwogIHVpbnQgcHVibGljIG1pbmltdW1CZXQ7CiAgLyoqIHRoZSBtYXhpbXVtIGJldCAqKi8KICB1aW50IHB1YmxpYyBtYXhpbXVtQmV0OwogIC8qKiB0ZWxscyBpZiBhbiBhZGRyZXNzIGlzIGF1dGhvcml6ZWQgdG8gY2FsbCBnYW1lIGZ1bmN0aW9ucyAqKi8KICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGF1dGhvcml6ZWQ7CiAgCiAgLyoqIAogICAqIGNvbnN0cnVjdHVyLiBpbml0aWFsaXplIHRoZSBjb250cmFjdCB3aXRoIGluaXRpYWwgdmFsdWVzLiAKICAgKiBAcGFyYW0gbWluQmV0ICAgICAgICAgdGhlIG1pbmltdW0gYmV0CiAgICogICAgICAgIG1heEJldCAgICAgICAgIHRoZSBtYXhpbXVtIGJldAogICAqKi8KICBmdW5jdGlvbiBjYXNpbm8odWludCBtaW5CZXQsIHVpbnQgbWF4QmV0KSBwdWJsaWN7CiAgICBtaW5pbXVtQmV0ID0gbWluQmV0OwogICAgbWF4aW11bUJldCA9IG1heEJldDsKICB9CgogIC8qKiAKICAgKiBhbGxvd3MgdGhlIG93bmVyIHRvIGNoYW5nZSB0aGUgbWluaW11bSBiZXQKICAgKiBAcGFyYW0gbmV3TWluIHRoZSBuZXcgbWluaW11bSBiZXQKICAgKiovCiAgZnVuY3Rpb24gc2V0TWluaW11bUJldCh1aW50IG5ld01pbikgb25seU93bmVyIHB1YmxpY3sKICAgIG1pbmltdW1CZXQgPSBuZXdNaW47CiAgfQoKICAvKiogCiAgICogYWxsb3dzIHRoZSBvd25lciB0byBjaGFuZ2UgdGhlIG1heGltdW0gYmV0CiAgICogQHBhcmFtIG5ld01heCB0aGUgbmV3IG1heGltdW0gYmV0CiAgICoqLwogIGZ1bmN0aW9uIHNldE1heGltdW1CZXQodWludCBuZXdNYXgpIG9ubHlPd25lciBwdWJsaWN7CiAgICBtYXhpbXVtQmV0ID0gbmV3TWF4OwogIH0KCiAgCiAgLyoqCiAgKiBhdXRob3JpemUgYSBhZGRyZXNzIHRvIGNhbGwgZ2FtZSBmdW5jdGlvbnMuCiAgKiBAcGFyYW0gYWRkciB0aGUgYWRkcmVzcyB0byBiZSBhdXRob3JpemVkCiAgKiovCiAgZnVuY3Rpb24gYXV0aG9yaXplKGFkZHJlc3MgYWRkcikgb25seU93bmVyIHB1YmxpY3sKICAgIGF1dGhvcml6ZWRbYWRkcl0gPSB0cnVlOwogIH0KICAKICAvKioKICAqIGRlYXV0aG9yaXplIGEgYWRkcmVzcyB0byBjYWxsIGdhbWUgZnVuY3Rpb25zLgogICogQHBhcmFtIGFkZHIgdGhlIGFkZHJlc3MgdG8gYmUgZGVhdXRob3JpemVkCiAgKiovCiAgZnVuY3Rpb24gZGVhdXRob3JpemUoYWRkcmVzcyBhZGRyKSBvbmx5T3duZXIgcHVibGljewogICAgYXV0aG9yaXplZFthZGRyXSA9IGZhbHNlOwogIH0KICAKICAKICAvKioKICAqIGNoZWNrcyBpZiBhbiBhZGRyZXNzIGlzIGF1dGhvcml6ZWQgdG8gY2FsbCBnYW1lIGZ1bmN0aW9uYWxpdHkKICAqKi8KICBtb2RpZmllciBvbmx5QXV0aG9yaXplZHsKICAgIHJlcXVpcmUoYXV0aG9yaXplZFttc2cuc2VuZGVyXSk7CiAgICBfOwogIH0KfQoKY29udHJhY3QgYmxhY2tqYWNrIGlzIGNhc2lubyB7CgogIC8qKiB0aGUgdmFsdWUgb2YgdGhlIGNhcmRzOiBBY2UsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCBKLCBRLCBLIC4gQWNlIGNhbiBiZSAxIG9yIDExLCBvZiBjb3Vyc2UuIAogICAqICAgdGhlIHZhbHVlIG9mIGEgY2FyZCBjYW4gYmUgZGV0ZXJtaW5lZCBieSBsb29raW5nIHVwIGNhcmRWYWx1ZXNbY2FyZElkJTEzXSoqLwogIHVpbnQ4WzEzXSBjYXJkVmFsdWVzID0gWzExLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTAsIDEwLCAxMF07CiAgLyoqIHRlbGxzIGlmIHRoZSBwbGF5ZXIgYWxyZWFkeSBjbGFpbWVkIGhpcyB3aW4gKiovCiAgbWFwcGluZyhieXRlczMyID0+IGJvb2wpIHB1YmxpYyBvdmVyOwogIC8qKiB0aGUgYmV0cyBvZiB0aGUgZ2FtZXMgaW4gY2FzZSB0aGV5IGhhdmUgYmVlbiBpbml0aWFsaXplZCBiZWZvcmUgc3RhbmQgKiovCiAgbWFwcGluZyhieXRlczMyID0+IHVpbnQpIGJldHM7CiAgIC8qKiBsaXN0IG9mIHNwbGl0cyBwZXIgZ2FtZSAtIGxlbmd0aCAwIGluIG1vc3QgY2FzZXMgKiovCiAgbWFwcGluZyhieXRlczMyID0+IHVpbnQ4W10pIHNwbGl0czsKICAvKiogdGVsbHMgaWYgYSBoYW5kIG9mIGEgZ2l2ZW4gZ2FtZSBoYXMgYmVlbiBkb3VibGVkICoqLwogIG1hcHBpbmcoYnl0ZXMzMiA9PiBtYXBwaW5nKHVpbnQ4ID0+IGJvb2wpKSBkb3VibGVkOwogIAogIC8qKiBub3RpZnkgbGlzdGVuZXJzIHRoYXQgYSBuZXcgcm91bmQgb2YgYmxhY2tqYWNrIHN0YXJ0ZWQgKiovCiAgZXZlbnQgTmV3R2FtZShieXRlczMyIGluZGV4ZWQgaWQsIGJ5dGVzMzIgZGVjaywgYnl0ZXMzMiBjU2VlZCwgYWRkcmVzcyBwbGF5ZXIsIHVpbnQgYmV0KTsKICAvKiogbm90aWZ5IGxpc3RlbmVycyBvZiB0aGUgZ2FtZSBvdXRjb21lICoqLwogIGV2ZW50IFJlc3VsdChieXRlczMyIGluZGV4ZWQgaWQsIGFkZHJlc3MgcGxheWVyLCB1aW50IHZhbHVlLCBib29sIGlzV2luKTsKICAvKiogbm90aWZ5IGxpc3RlbmVycyB0aGF0IHRoZSBwbGF5ZXIgZG91YmxlZCAqKi8KICBldmVudCBEb3VibGUoYnl0ZXMzMiBpbmRleGVkIGlkLCB1aW50OCBoYW5kKTsKICAvKiogbm90aWZ5IGxpc3RlbmVycyB0aGF0IHRoZSBwbGF5ZXIgc3BsaXQgKiovCiAgZXZlbnQgU3BsaXQoYnl0ZXMzMiBpbmRleGVkIGlkLCB1aW50OCBoYW5kKTsKCiAgLyoqIAogICAqIGNvbnN0cnVjdHVyLiBpbml0aWFsaXplIHRoZSBjb250cmFjdCB3aXRoIGEgbWluaW11bSBiZXQuIAogICAqIEBwYXJhbSBtaW5CZXQgICAgICAgICB0aGUgbWluaW11bSBiZXQKICAgKiAgICAgICAgbWF4QmV0ICAgICAgICAgdGhlIG1heGltdW0gYmV0CiAgICoqLwogIGZ1bmN0aW9uIGJsYWNramFjayh1aW50IG1pbkJldCwgdWludCBtYXhCZXQpIGNhc2lubyhtaW5CZXQsIG1heEJldCkgcHVibGljewoKICB9CgogIC8qKiAKICAgKiAgIGluaXRpYWxpemVzIGEgcm91bmQgb2YgYmxhY2tqYWNrLiAKICAgKiAgIGFjY2VwdHMgdGhlIGJldC4KICAgKiAgIHRocm93cyBhbiBleGNlcHRpb24gaWYgdGhlIGJldCBpcyB0b28gbG93IG9yIGEgZ2FtZSB3aXRoIHRoZSBnaXZlbiBpZCBoYXMgYWxyZWFkeSBiZWVuIHBsYXllZCBvciB0aGUgYmV0IHdhcyBhbHJlYWR5IHBhaWQuCiAgICogICBAcGFyYW0gcGxheWVyICB0aGUgYWRkcmVzcyBvZiB0aGUgcGxheWVyCiAgICogICAgICAgICAgdmFsdWUgICB0aGUgdmFsdWUgb2YgdGhlIGJldCBpbiB0b2tlbnMKICAgKiAgICAgICAgICBkZWNrICAgIHRoZSBoYXNoIG9mIHRoZSBkZWNrCiAgICogICAgICAgICAgc3J2U2VlZCB0aGUgaGFzaCBvZiB0aGUgc2VydmVyIHNlZWQKICAgKiAgICAgICAgICBjU2VlZCAgIHRoZSBwbGFpbiBjbGllbnQgc2VlZAogICAqKi8KICBmdW5jdGlvbiBpbml0R2FtZShhZGRyZXNzIHBsYXllciwgdWludCB2YWx1ZSwgYnl0ZXMzMiBkZWNrLCBieXRlczMyIHNydlNlZWQsIGJ5dGVzMzIgY1NlZWQpIG9ubHlBdXRob3JpemVkICBwdWJsaWN7CiAgICAvL3Rocm93IGlmIGdhbWUgd2l0aCBpZCBhbHJlYWR5IGV4aXN0cy4gbGF0ZXIgbWF5YmUgdGhyb3cgb25seSBpZiBnYW1lIHdpdGggaWQgaXMgc3RpbGwgcnVubmluZwogICAgYXNzZXJ0KHZhbHVlID49IG1pbmltdW1CZXQgJiYgdmFsdWUgPD0gbWF4aW11bUJldCk7CiAgICBhc3NlcnQoIW92ZXJbc3J2U2VlZF0mJmJldHNbc3J2U2VlZF09PTApOy8vbWFrZSBzdXJlIHRoZSBnYW1lIGhhc24ndCBiZWVuIHBheWVkIGFscmVhZHkKICAgIGJldHNbc3J2U2VlZF0gPSB2YWx1ZTsKICAgIGFzc2VydChtc2cuc2VuZGVyLmNhbGwoYnl0ZXM0KGtlY2NhazI1Nigic2hpZnQoYWRkcmVzcyx1aW50MjU2LGJvb2wpIikpLHBsYXllciwgdmFsdWUsIGZhbHNlKSk7CiAgICBOZXdHYW1lKHNydlNlZWQsIGRlY2ssIGNTZWVkLCBwbGF5ZXIsIHZhbHVlKTsKICB9CgogIC8qKgogICAqICAgZG91YmxlcyB0aGUgYmV0IG9mIHRoZSBnYW1lIHdpdGggdGhlIGdpdmVuIGlkIGlmIHRoZSBjb3JyZWN0IGFtb3VudCBpcyBzZW50IGFuZCB0aGUgcGxheWVyIGRpZCBub3QgZG91YmxlIHRoZSBoYW5kIHlldC4KICAgKiAgIEBwYXJhbSBwbGF5ZXIgdGhlIHBsYXllciBhZGRyZXNzCiAgICogICAgICAgICAgaWQgICAgIHRoZSBnYW1lIGlkCiAgICogICAgICAgICAgaGFuZCAgIHRoZSBpbmRleCBvZiB0aGUgaGFuZCBiZWluZyBkb3VibGVkCiAgICogICAgICAgICAgdmFsdWUgIHRoZSBudW1iZXIgb2YgdG9rZW5zIHNlbnQgYnkgdGhlIHBsYXllcgogICAqKi8KICBmdW5jdGlvbiBkb3VibGUoYWRkcmVzcyBwbGF5ZXIsIGJ5dGVzMzIgaWQsIHVpbnQ4IGhhbmQsIHVpbnQgdmFsdWUpIG9ubHlBdXRob3JpemVkIHB1YmxpYyB7CiAgICByZXF1aXJlKCFvdmVyW2lkXSk7CiAgICByZXF1aXJlKGNoZWNrQmV0KGlkLCB2YWx1ZSkpOy8vbWFrZSBzdXJlIHRoZSBnYW1lIGhhcyBiZWVuIGluaXRpYWxpemVkIGFuZCB0aGUgdHJhbnNmZXJlZCB2YWx1ZSBpcyBjb3JyZWN0CiAgICByZXF1aXJlKGhhbmQgPD0gc3BsaXRzW2lkXS5sZW5ndGggJiYgIWRvdWJsZWRbaWRdW2hhbmRdKTsvL21ha2Ugc3VyZSB0aGUgaGFuZCBoYXMgbm90IGJlZW4gZG91YmxlZCB5ZXQKICAgIGRvdWJsZWRbaWRdW2hhbmRdID0gdHJ1ZTsKICAgIGJldHNbaWRdICs9IHZhbHVlOwogICAgYXNzZXJ0KG1zZy5zZW5kZXIuY2FsbChieXRlczQoa2VjY2FrMjU2KCJzaGlmdChhZGRyZXNzLHVpbnQyNTYsYm9vbCkiKSkscGxheWVyLCB2YWx1ZSwgZmFsc2UpKTsKICAgIERvdWJsZShpZCwgaGFuZCk7CiAgfQoKICAvKioKICAgKiAgIHNwbGl0cyB0aGUgaGFuZHMgb2YgdGhlIGdhbWUgd2l0aCB0aGUgZ2l2ZW4gaWQgaWYgdGhlIGNvcnJlY3QgYW1vdW50IGlzIHNlbnQgZnJvbSB0aGUgcGxheWVyIGFkZHJlc3MgYW5kIHRoZSBwbGF5ZXIKICAgKiAgIGRpZCBub3Qgc3BsaXQgeWV0LgogICAqICAgQHBhcmFtIHBsYXllciB0aGUgcGxheWVyIGFkZHJlc3MKICAgKiAgICAgICAgICBpZCAgICAgdGhlIGdhbWUgaWQKICAgKiAgICAgICAgICBoYW5kICAgdGhlIGluZGV4IG9mIHRoZSBoYW5kIGJlaW5nIHNwbGl0CiAgICogICAgICAgICAgdmFsdWUgIHRoZSBudW1iZXIgb2YgdG9rZW5zIHNlbnQgYnkgdGhlIHBsYXllcgogICAqKi8KICBmdW5jdGlvbiBzcGxpdChhZGRyZXNzIHBsYXllciwgYnl0ZXMzMiBpZCwgdWludDggaGFuZCwgdWludCB2YWx1ZSkgb25seUF1dGhvcml6ZWQgcHVibGljICB7CiAgICByZXF1aXJlKCFvdmVyW2lkXSk7CiAgICByZXF1aXJlKGNoZWNrQmV0KGlkLCB2YWx1ZSkpOy8vbWFrZSBzdXJlIHRoZSBnYW1lIGhhcyBiZWVuIGluaXRpYWxpemVkIGFuZCB0aGUgdHJhbnNmZXJlZCB2YWx1ZSBpcyBjb3JyZWN0CiAgICByZXF1aXJlKHNwbGl0c1tpZF0ubGVuZ3RoIDwgMyk7CiAgICBzcGxpdHNbaWRdLnB1c2goaGFuZCk7CiAgICBiZXRzW2lkXSArPSB2YWx1ZTsKICAgIGFzc2VydChtc2cuc2VuZGVyLmNhbGwoYnl0ZXM0KGtlY2NhazI1Nigic2hpZnQoYWRkcmVzcyx1aW50MjU2LGJvb2wpIikpLHBsYXllciwgdmFsdWUsIGZhbHNlKSk7CiAgICBTcGxpdChpZCxoYW5kKTsKICB9CiAgCiAgLyoqCiAgICogYnkgc3VycmVuZGVyaW5nIGhhbGYgdGhlIGJldCBpcyByZXR1cm5lZCB0byB0aGUgcGxheWVyLgogICAqIHNlbmQgdGhlIHBsYWluIHNlcnZlciBzZWVkIHRvIGNoZWNrIGlmIGl0J3MgY29ycmVjdAogICAqIEBwYXJhbSBwbGF5ZXIgdGhlIHBsYXllciBhZGRyZXNzCiAgICogICAgICAgIHNlZWQgICB0aGUgc2VydmVyIHNlZWQKICAgKiAgICAgICAgYmV0ICAgIHRoZSBvcmlnaW5hbCBiZXQKICAgKiovCiAgZnVuY3Rpb24gc3VycmVuZGVyKGFkZHJlc3MgcGxheWVyLCBieXRlczMyIHNlZWQsIHVpbnQgYmV0KSBvbmx5QXV0aG9yaXplZCBwdWJsaWMgewogICAgdmFyIGlkID0ga2VjY2FrMjU2KHNlZWQpOwogICAgcmVxdWlyZSghb3ZlcltpZF0pOwogICAgb3ZlcltpZF0gPSB0cnVlOwogICAgaWYoYmV0c1tpZF0+MCl7CiAgICAgIGFzc2VydChiZXRzW2lkXT09YmV0KTsKICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIuY2FsbChieXRlczQoa2VjY2FrMjU2KCJzaGlmdChhZGRyZXNzLHVpbnQyNTYsYm9vbCkiKSkscGxheWVyLGJldCAvIDIsIHRydWUpKTsKICAgICAgUmVzdWx0KGlkLCBwbGF5ZXIsIGJldCAvIDIsIHRydWUpOwogICAgfQogICAgZWxzZXsKICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIuY2FsbChieXRlczQoa2VjY2FrMjU2KCJzaGlmdChhZGRyZXNzLHVpbnQyNTYsYm9vbCkiKSkscGxheWVyLGJldCAvIDIsIGZhbHNlKSk7CiAgICAgIFJlc3VsdChpZCwgcGxheWVyLCBiZXQgLyAyLCBmYWxzZSk7CiAgICB9CiAgfQoKICAvKiogCiAgICogZmlyc3QgY2hlY2tzIGlmIGRlY2sgYW5kIHRoZSBwbGF5ZXIncyBudW1iZXIgb2YgY2FyZHMgYXJlIGNvcnJlY3QsIHRoZW4gY2hlY2tzIGlmIHRoZSBwbGF5ZXIgd29uIGFuZCBpZiBzbywgc2VuZHMgdGhlIHdpbi4KICAgKiBAcGFyYW0gcGxheWVyIHRoZSBwbGF5ZXIgYWRkcmVzcwogICAqICAgICAgICBkZWNrICAgICAgdGhlIHBhcnRpYWwgZGVjawogICAqICAgICAgICBzZWVkICAgICAgdGhlIHBsYWluIHNlcnZlciBzZWVkCiAgICogICAgICAgIG51bUNhcmRzICB0aGUgbnVtYmVyIG9mIGNhcmRzIHBlciBoYW5kCiAgICogICAgICAgIHNwbGl0cyAgICB0aGUgYXJyYXkgb2Ygc3BsaXRzCiAgICogICAgICAgIGRvdWJsZWQgICB0aGUgYXJyYXkgaW5kaWNhdGluZyBpZiBhIGhhbmQgd2FzIGRvdWJsZWQKICAgKiAgICAgICAgYmV0ICAgICAgIHRoZSBvcmlnaW5hbCBiZXQKICAgKiAgICAgICAgZGVja0hhc2ggIHRoZSBoYXNoIG9mIHRoZSBkZWNrIChmb3IgdmVyaWZpY2F0aW9uIGFuZCBsb2dnaW5nKQogICAqICAgICAgICBjU2VlZCAgICAgdGhlIGNsaWVudCBzZWVkIChmb3IgbG9nZ2luZykKICAgKiovCiAgZnVuY3Rpb24gc3RhbmQoYWRkcmVzcyBwbGF5ZXIsIHVpbnQ4W10gZGVjaywgYnl0ZXMzMiBzZWVkLCB1aW50OFtdIG51bUNhcmRzLCB1aW50OFtdIHNwbGl0cywgYm9vbFtdIGRvdWJsZWQsdWludCBiZXQsIGJ5dGVzMzIgZGVja0hhc2gsIGJ5dGVzMzIgY1NlZWQpIG9ubHlBdXRob3JpemVkIHB1YmxpYyB7CiAgICBieXRlczMyIGdhbWVJZDsKICAgIGdhbWVJZCA9IGtlY2NhazI1NihzZWVkKTsKICAgIGFzc2VydCghb3ZlcltnYW1lSWRdKTsKICAgIGFzc2VydChzcGxpdHMubGVuZ3RoID09IG51bUNhcmRzLmxlbmd0aCAtIDEpOwogICAgb3ZlcltnYW1lSWRdID0gdHJ1ZTsKICAgIGFzc2VydChjaGVja0RlY2soZGVjaywgc2VlZCwgZGVja0hhc2gpKTsvL3BsYXVzaWJpbGl0eSBjaGVjawogICAgCiAgICB2YXIgKHdpbixsb3NzKSA9IGRldGVybWluZU91dGNvbWUoZGVjaywgbnVtQ2FyZHMsIHNwbGl0cywgZG91YmxlZCwgYmV0KTsKICAgIAogICAgaWYoYmV0c1tnYW1lSWRdID4gMCl7Ly9pbml0R2FtZSBtZXRob2QgY2FsbGVkIGJlZm9yZQogICAgICBhc3NlcnQoY2hlY2tCZXQoZ2FtZUlkLCBiZXQpKTsKICAgICAgd2luICs9IGJldHNbZ2FtZUlkXTsvL3BheSBiYWNrIHRoZSBiZXQKICAgIH0KICAgIGVsc2UKICAgICAgTmV3R2FtZShnYW1lSWQsIGRlY2tIYXNoLCBjU2VlZCwgcGxheWVyLCBiZXQpOwogICAgCiAgICBpZiAod2luID4gbG9zcyl7CiAgICAgIGFzc2VydChtc2cuc2VuZGVyLmNhbGwoYnl0ZXM0KGtlY2NhazI1Nigic2hpZnQoYWRkcmVzcyx1aW50MjU2LGJvb2wpIikpLHBsYXllciwgd2luLWxvc3MsIHRydWUpKTsKICAgICAgUmVzdWx0KGdhbWVJZCwgcGxheWVyLCB3aW4tbG9zcywgdHJ1ZSk7IAogICAgfSAgCiAgICBlbHNlIGlmKGxvc3MgPiB3aW4pey8vc2hpZnQgYmFsYW5jZSBmcm9tIHRoZSBwbGF5ZXIgdG8gdGhlIGNhc2lubwogICAgICBhc3NlcnQobXNnLnNlbmRlci5jYWxsKGJ5dGVzNChrZWNjYWsyNTYoInNoaWZ0KGFkZHJlc3MsdWludDI1Nixib29sKSIpKSxwbGF5ZXIsIGxvc3Mtd2luLCBmYWxzZSkpOwogICAgICBSZXN1bHQoZ2FtZUlkLCBwbGF5ZXIsIGxvc3Mtd2luLCBmYWxzZSk7IAogICAgfQogICAgZWxzZQogICAgICBSZXN1bHQoZ2FtZUlkLCBwbGF5ZXIsIDAsIGZhbHNlKTsKICAgICAKICB9CgogIC8qKgogICAqIGNoZWNrIGlmIGRlY2sgYW5kIGNhc2lubyBzZWVkIGFyZSBjb3JyZWN0LgogICAqIEBwYXJhbSBkZWNrICAgICAgdGhlIHBhcnRpYWwgZGVjawogICAqICAgICAgICBzZWVkICAgICAgdGhlIHNlcnZlciBzZWVkCiAgICogICAgICAgIGRlY2tIYXNoICB0aGUgaGFzaCBvZiB0aGUgZGVjawogICAqIEByZXR1cm4gdHJ1ZSBpZiBjb3JyZWN0CiAgICoqLwogIGZ1bmN0aW9uIGNoZWNrRGVjayh1aW50OFtdIGRlY2ssIGJ5dGVzMzIgc2VlZCwgYnl0ZXMzMiBkZWNrSGFzaCkgY29uc3RhbnQgcHVibGljIHJldHVybnMoYm9vbCBjb3JyZWN0KSB7CiAgICBpZiAoa2VjY2FrMjU2KGNvbnZlcnRUb0J5dGVzKGRlY2spLCBzZWVkKSAhPSBkZWNrSGFzaCkgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBjb252ZXJ0cyBhbiB1aW50OCBhcnJheSB0byBieXRlcwogICAqIEBwYXJhbSBieXRlQXJyYXkgdGhlIHVpbnQ4IGFycmF5IHRvIGJlIGNvbnZlcnRlZAogICAqIEByZXR1cm4gdGhlIGJ5dGVzCiAgICoqLwogIGZ1bmN0aW9uIGNvbnZlcnRUb0J5dGVzKHVpbnQ4W10gYnl0ZUFycmF5KSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zKGJ5dGVzIGIpIHsKICAgIGIgPSBuZXcgYnl0ZXMoYnl0ZUFycmF5Lmxlbmd0aCk7CiAgICBmb3IgKHVpbnQ4IGkgPSAwOyBpIDwgYnl0ZUFycmF5Lmxlbmd0aDsgaSsrKQogICAgICBiW2ldID0gYnl0ZShieXRlQXJyYXlbaV0pOwogIH0KICAKICAvKioKICAgKiBjaGVja3MgaWYgdGhlIGNvcnJlY3QgYW1vdW50IHdhcyBwYWlkIGZvciB0aGUgaW5pdGlhbCBiZXQgKyBzcGxpdHMgYW5kIGRvdWJsZXMuCiAgICogQHBhcmFtIGdhbWVJZCB0aGUgZ2FtZSBpZAogICAqICAgICAgICBiZXQgICAgdGhlIGJldAogICAqIEByZXR1cm4gdHJ1ZSBpZiBjb3JyZWN0CiAgICogKi8KICBmdW5jdGlvbiBjaGVja0JldChieXRlczMyIGdhbWVJZCwgdWludCBiZXQpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wgY29ycmVjdCl7CiAgICB1aW50IGZhY3RvciA9IHNwbGl0c1tnYW1lSWRdLmxlbmd0aCArIDE7CiAgICBmb3IodWludDggaSA9IDA7IGkgPCBzcGxpdHNbZ2FtZUlkXS5sZW5ndGgrMTsgaSsrKXsKICAgICAgaWYoZG91YmxlZFtnYW1lSWRdW2ldKSBmYWN0b3IrKzsKICAgIH0KICAgIHJldHVybiBiZXRzW2dhbWVJZF0gPT0gYmV0ICogZmFjdG9yOwogIH0KCiAgLyoqCiAgICogZGV0ZXJtaW5lcyB0aGUgb3V0Y29tZSBvZiBhIGdhbWUgYW5kIHJldHVybnMgdGhlIHdpbi4gCiAgICogaW4gY2FzZSBvZiBhIGxvc3MsIHdpbiBpcyAwLgogICAqIEBwYXJhbSBjYXJkcyAgICAgdGhlIGNhcmRzIC8gcGFydGlhbCBkZWNrCiAgICogICAgICAgIG51bUNhcmRzICB0aGUgbnVtYmVyIG9mIGNhcmRzIHBlciBoYW5kCiAgICogICAgICAgIHNwbGl0cyAgICB0aGUgYXJyYXkgb2Ygc3BsaXRzCiAgICogICAgICAgIGRvdWJsZWQgICB0aGUgYXJyYXkgaW5kaWNhdGluZyBpZiBhIGhhbmQgd2FzIGRvdWJsZWQKICAgKiAgICAgICAgYmV0ICAgICAgIHRoZSBvcmlnaW5hbCBiZXQKICAgKiBAcmV0dXJuIHRoZSB0b3RhbCB3aW4gb2YgYWxsIGhhbmRzCiAgICoqLwogIGZ1bmN0aW9uIGRldGVybWluZU91dGNvbWUodWludDhbXSBjYXJkcywgdWludDhbXSBudW1DYXJkcywgdWludDhbXSBzcGxpdHMsIGJvb2xbXSBkb3VibGVkLCB1aW50IGJldCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCB0b3RhbFdpbiwgdWludCB0b3RhbExvc3MpIHsKCiAgICB2YXIgcGxheWVyVmFsdWVzID0gZ2V0UGxheWVyVmFsdWVzKGNhcmRzLCBudW1DYXJkcywgc3BsaXRzKTsKICAgIHZhciAoZGVhbGVyVmFsdWUsIGRlYWxlckJKKSA9IGdldERlYWxlclZhbHVlKGNhcmRzLCBzdW0obnVtQ2FyZHMpKTsKICAgIHVpbnQgd2luOwogICAgdWludCBsb3NzOwogICAgZm9yICh1aW50OCBoID0gMDsgaCA8IG51bUNhcmRzLmxlbmd0aDsgaCsrKSB7CiAgICAgIHVpbnQ4IHBsYXllclZhbHVlID0gcGxheWVyVmFsdWVzW2hdOwogICAgICAvL2J1c3QgaWYgdmFsdWUgPiAyMQogICAgICBpZiAocGxheWVyVmFsdWUgPiAyMSl7CiAgICAgICAgd2luID0gMDsKICAgICAgICBsb3NzID0gYmV0OwogICAgICB9IAogICAgICAvL3BsYXllciBibGFja2phY2sgYnV0IG5vIGRlYWxlciBibGFja2phY2sKICAgICAgZWxzZSBpZiAobnVtQ2FyZHMubGVuZ3RoID09IDEgJiYgcGxheWVyVmFsdWUgPT0gMjEgJiYgbnVtQ2FyZHNbaF0gPT0gMiAmJiAhZGVhbGVyQkopIHsKICAgICAgICB3aW4gPSBiZXQgKiAzIC8gMjsgLy9wYXkgMyB0byAyCiAgICAgICAgbG9zcyA9IDA7CiAgICAgIH0KICAgICAgLy9wbGF5ZXIgd2lucyByZWd1bGFybHkKICAgICAgZWxzZSBpZiAocGxheWVyVmFsdWUgPiBkZWFsZXJWYWx1ZSB8fCBkZWFsZXJWYWx1ZSA+IDIxKXsKICAgICAgICB3aW4gPSBiZXQ7CiAgICAgICAgbG9zcyA9IDA7CiAgICAgIH0KICAgICAgLy90aWUKICAgICAgZWxzZSBpZiAocGxheWVyVmFsdWUgPT0gZGVhbGVyVmFsdWUpewogICAgICAgIHdpbiA9IDA7CiAgICAgICAgbG9zcyA9IDA7CiAgICAgIH0KICAgICAgLy9wbGF5ZXIgbG9vc2VzCiAgICAgIGVsc2V7CiAgICAgICAgd2luID0gMDsKICAgICAgICBsb3NzID0gYmV0OwogICAgICB9CgogICAgICBpZiAoZG91YmxlZFtoXSl7CiAgICAgICAgd2luICo9IDI7CiAgICAgICAgbG9zcyAqPSAyOwogICAgICB9IAogICAgICB0b3RhbFdpbiArPSB3aW47CiAgICAgIHRvdGFsTG9zcyArPSBsb3NzOwogICAgfQogIH0KCiAgLyoqCiAgICogICBjYWxjdWxhdGVzIHRoZSB2YWx1ZSBvZiB0aGUgcGxheWVyJ3MgaGFuZHMuCiAgICogICBAcGFyYW0gY2FyZHMgICAgIGhvbGRzIHRoZSAocGFydGlhbCkgZGVjay4KICAgKiAgICAgICAgICBudW1DYXJkcyAgdGhlIG51bWJlciBvZiBjYXJkcyBwZXIgcGxheWVyIGhhbmQKICAgKiAgICAgICAgICBwU3BsaXRzICAgdGhlIHBsYXllcidzIHNwbGl0cyAoaGFuZCBpbmRleCkKICAgKiAgIEByZXR1cm4gdGhlIHZhbHVlcyBvZiB0aGUgcGxheWVyJ3MgaGFuZHMKICAgKiovCiAgZnVuY3Rpb24gZ2V0UGxheWVyVmFsdWVzKHVpbnQ4W10gY2FyZHMsIHVpbnQ4W10gbnVtQ2FyZHMsIHVpbnQ4W10gcFNwbGl0cykgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyh1aW50OFs1XSBwbGF5ZXJWYWx1ZXMpIHsKICAgIHVpbnQ4IGNhcmRJbmRleDsKICAgIHVpbnQ4IHNwbGl0SW5kZXg7CiAgICAoY2FyZEluZGV4LCBzcGxpdEluZGV4LCBwbGF5ZXJWYWx1ZXMpID0gcGxheUhhbmQoMCwgMCwgMCwgcGxheWVyVmFsdWVzLCBjYXJkcywgbnVtQ2FyZHMsIHBTcGxpdHMpOwogIH0KCiAgLyoqCiAgICogICByZWN1cnNpdmVseSBwbGF5cyB0aGUgcGxheWVyJ3MgaGFuZHMuCiAgICogICBAcGFyYW0gaEluZGV4ICAgICAgICB0aGUgaGFuZCBpbmRleAogICAqICAgICAgICAgIGNJbmRleCAgICAgICAgdGhlIGluZGV4IG9mIHRoZSBuZXh0IGNhcmQgdG8gZHJhdwogICAqICAgICAgICAgIHNJbmRleCAgICAgICAgdGhlIGluZGV4IG9mIHRoZSBuZXh0IHNwbGl0LCBpZiB0aGVyZSBpcyBhbnkKICAgKiAgICAgICAgICBwbGF5ZXJWYWx1ZXMgIHRoZSB2YWx1ZXMgb2YgdGhlIHBsYXllcidzIGhhbmRzIChub3QgeWV0IGNvbXBsZXRlKQogICAqICAgICAgICAgIGNhcmRzICAgICAgICAgaG9sZHMgdGhlIChwYXJ0aWFsKSBkZWNrLgogICAqICAgICAgICAgIG51bUNhcmRzICAgICAgdGhlIG51bWJlciBvZiBjYXJkcyBwZXIgcGxheWVyIGhhbmQKICAgKiAgICAgICAgICBwU3BsaXRzICAgICAgICB0aGUgYXJyYXkgb2Ygc3BsaXRzCiAgICogICBAcmV0dXJuIHRoZSB2YWx1ZXMgb2YgdGhlIHBsYXllcidzIGhhbmRzIGFuZCB0aGUgY3VycmVudCBjYXJkIGluZGV4CiAgICoqLwogIGZ1bmN0aW9uIHBsYXlIYW5kKHVpbnQ4IGhJbmRleCwgdWludDggY0luZGV4LCB1aW50OCBzSW5kZXgsIHVpbnQ4WzVdIHBsYXllclZhbHVlcywgdWludDhbXSBjYXJkcywgdWludDhbXSBudW1DYXJkcywgdWludDhbXSBwU3BsaXRzKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zKHVpbnQ4LCB1aW50OCwgdWludDhbNV0pIHsKICAgIHBsYXllclZhbHVlc1toSW5kZXhdID0gY2FyZFZhbHVlc1tjYXJkc1tjSW5kZXhdICUgMTNdOwogICAgY0luZGV4ID0gY0luZGV4IDwgNCA/IGNJbmRleCArIDIgOiBjSW5kZXggKyAxOwogICAgd2hpbGUgKHNJbmRleCA8IHBTcGxpdHMubGVuZ3RoICYmIHBTcGxpdHNbc0luZGV4XSA9PSBoSW5kZXgpIHsKICAgICAgc0luZGV4Kys7CiAgICAgIChjSW5kZXgsIHNJbmRleCwgcGxheWVyVmFsdWVzKSA9IHBsYXlIYW5kKHNJbmRleCwgY0luZGV4LCBzSW5kZXgsIHBsYXllclZhbHVlcywgY2FyZHMsIG51bUNhcmRzLCBwU3BsaXRzKTsKICAgIH0KICAgIHVpbnQ4IG51bUFjZXMgPSBwbGF5ZXJWYWx1ZXNbaEluZGV4XSA9PSAxMSA/IDEgOiAwOwogICAgdWludDggY2FyZDsKICAgIGZvciAodWludDggaSA9IDE7IGkgPCBudW1DYXJkc1toSW5kZXhdOyBpKyspIHsKICAgICAgY2FyZCA9IGNhcmRzW2NJbmRleF0gJSAxMzsKICAgICAgcGxheWVyVmFsdWVzW2hJbmRleF0gKz0gY2FyZFZhbHVlc1tjYXJkXTsKICAgICAgaWYgKGNhcmQgPT0gMCkgbnVtQWNlcysrOwogICAgICBjSW5kZXggPSBjSW5kZXggPCA0ID8gY0luZGV4ICsgMiA6IGNJbmRleCArIDE7CiAgICB9CiAgICB3aGlsZSAobnVtQWNlcyA+IDAgJiYgcGxheWVyVmFsdWVzW2hJbmRleF0gPiAyMSkgewogICAgICBwbGF5ZXJWYWx1ZXNbaEluZGV4XSAtPSAxMDsKICAgICAgbnVtQWNlcy0tOwogICAgfQogICAgcmV0dXJuIChjSW5kZXgsIHNJbmRleCwgcGxheWVyVmFsdWVzKTsKICB9CgoKCiAgLyoqCiAgICogICBjYWxjdWxhdGVzIHRoZSB2YWx1ZSBvZiBhIGRlYWxlcidzIGhhbmQuCiAgICogICBAcGFyYW0gY2FyZHMgICAgIGhvbGRzIHRoZSAocGFydGlhbCkgZGVjay4KICAgKiAgICAgICAgICBudW1DYXJkcyAgdGhlIG51bWJlciBvZiBjYXJkcyB0aGUgcGxheWVyIGhvbGRzCiAgICogICBAcmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgZGVhbGVyJ3MgaGFuZCBhbmQgYSBmbGFnIGluZGljYXRpbmcgaWYgdGhlIGRlYWxlciBoYXMgZ290IGEgYmxhY2tqYWNrCiAgICoqLwogIGZ1bmN0aW9uIGdldERlYWxlclZhbHVlKHVpbnQ4W10gY2FyZHMsIHVpbnQ4IG51bUNhcmRzKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zKHVpbnQ4IGRlYWxlclZhbHVlLCBib29sIGJqKSB7CgogICAgLy9kZWFsZXIgYWx3YXlzIHJlY2VpdmVzIHNlY29uZCBhbmQgZm9ydGggY2FyZAogICAgdWludDggY2FyZCA9IGNhcmRzWzFdICUgMTM7CiAgICB1aW50OCBjYXJkMiA9IGNhcmRzWzNdICUgMTM7CiAgICBkZWFsZXJWYWx1ZSA9IGNhcmRWYWx1ZXNbY2FyZF0gKyBjYXJkVmFsdWVzW2NhcmQyXTsKICAgIHVpbnQ4IG51bUFjZXM7CiAgICBpZiAoY2FyZCA9PSAwKSBudW1BY2VzKys7CiAgICBpZiAoY2FyZDIgPT0gMCkgbnVtQWNlcysrOwogICAgaWYgKGRlYWxlclZhbHVlID4gMjEpIHsgLy8yIGFjZXMsY291bnQgYXMgMTIKICAgICAgZGVhbGVyVmFsdWUgLT0gMTA7CiAgICAgIG51bUFjZXMtLTsKICAgIH0gZWxzZSBpZiAoZGVhbGVyVmFsdWUgPT0gMjEpIHsKICAgICAgcmV0dXJuICgyMSwgdHJ1ZSk7CiAgICB9CiAgICAvL3Rha2UgY2FyZHMgdW50aWwgdmFsdWUgcmVhY2hlcyAxNyBvciBtb3JlLiAKICAgIHVpbnQ4IGk7CiAgICB3aGlsZSAoZGVhbGVyVmFsdWUgPCAxNykgewogICAgICBjYXJkID0gY2FyZHNbbnVtQ2FyZHMgKyBpICsgMl0gJSAxMzsKICAgICAgZGVhbGVyVmFsdWUgKz0gY2FyZFZhbHVlc1tjYXJkXTsKICAgICAgaWYgKGNhcmQgPT0gMCkgbnVtQWNlcysrOwogICAgICBpZiAoZGVhbGVyVmFsdWUgPiAyMSAmJiBudW1BY2VzID4gMCkgewogICAgICAgIGRlYWxlclZhbHVlIC09IDEwOwogICAgICAgIG51bUFjZXMtLTsKICAgICAgfQogICAgICBpKys7CiAgICB9CiAgfQoKICAvKioKICAgKiBzdW1zIHVwIHRoZSBnaXZlbiBudW1iZXJzCiAgICogbm90ZTogbm8gb3ZlcmZsb3cgcG9zc2libGUgYXMgcGxheWVyIHdpbGwgYWx3YXlzIGhvbGQgbGVzcyB0aGFuIDEwMCBjYXJkcwogICAqIEBwYXJhbSBudW1iZXJzICAgdGhlIG51bWJlcnMgdG8gc3VtIHVwCiAgICogQHJldHVybiB0aGUgc3VtIG9mIHRoZSBudW1iZXJzCiAgICoqLwogIGZ1bmN0aW9uIHN1bSh1aW50OFtdIG51bWJlcnMpIGNvbnN0YW50IGludGVybmFsIHJldHVybnModWludDggcykgewogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbnVtYmVycy5sZW5ndGg7IGkrKykgewogICAgICBzICs9IG51bWJlcnNbaV07CiAgICB9CiAgfQoKfQ=='.
	

]
