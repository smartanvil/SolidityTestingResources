Class {
	#name : #SRTb9131e894259d0d374bf189ca640ffc472a7d143,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb9131e894259d0d374bf189ca640ffc472a7d143 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIGFzc2VydChiICE9IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50IGMgPSBhIC8gYjsKICAgICAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICAvLyBWb2x1bWUgYm9udXMgY2FsY3VsYXRpb24KICAgIGZ1bmN0aW9uIHZvbHVtZUJvbnVzKHVpbnQgZXRoZXJWYWx1ZSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewoKICAgICAgICBpZihldGhlclZhbHVlID49ICA1MDAwMDAwMDAwMDAwMDAwMDAwMDApIHJldHVybiAxMDsgLy8gNTAwIEVUSCArMTAlIHRva2VucwogICAgICAgIGlmKGV0aGVyVmFsdWUgPj0gIDMwMDAwMDAwMDAwMDAwMDAwMDAwMCkgcmV0dXJuIDc7ICAvLyAzMDAgRVRIICs3JSB0b2tlbnMKICAgICAgICBpZihldGhlclZhbHVlID49ICAxMDAwMDAwMDAwMDAwMDAwMDAwMDApIHJldHVybiA1OyAgLy8gMTAwIEVUSCArNSUgdG9rZW5zCiAgICAgICAgaWYoZXRoZXJWYWx1ZSA+PSAgIDUwMDAwMDAwMDAwMDAwMDAwMDAwKSByZXR1cm4gMzsgIC8vIDUwIEVUSCArMyUgdG9rZW5zCiAgICAgICAgaWYoZXRoZXJWYWx1ZSA+PSAgIDIwMDAwMDAwMDAwMDAwMDAwMDAwKSByZXR1cm4gMjsgIC8vIDIwIEVUSCArMiUgdG9rZW5zCiAgICAgICAgaWYoZXRoZXJWYWx1ZSA+PSAgIDEwMDAwMDAwMDAwMDAwMDAwMDAwKSByZXR1cm4gMTsgIC8vIDEwIEVUSCArMSUgdG9rZW5zCgogICAgICAgIHJldHVybiAwOwogICAgfQoKfQoKCi8vLyBJbXBsZW1lbnRzIEVSQyAyMCBUb2tlbiBzdGFuZGFyZDogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCi8vLyBAdGl0bGUgQWJzdHJhY3QgdG9rZW4gY29udHJhY3QgLSBGdW5jdGlvbnMgdG8gYmUgaW1wbGVtZW50ZWQgYnkgdG9rZW4gY29udHJhY3RzLgoKY29udHJhY3QgQWJzdHJhY3RUb2tlbiB7CiAgICAvLyBUaGlzIGlzIG5vdCBhbiBhYnN0cmFjdCBmdW5jdGlvbiwgYmVjYXVzZSBzb2xjIHdvbid0IHJlY29nbml6ZSBnZW5lcmF0ZWQgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgcHVibGljIHZhcmlhYmxlcyBhcyBmdW5jdGlvbnMKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCkge30KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIG93bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwogICAgZXZlbnQgSXNzdWFuY2UoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKfQoKY29udHJhY3QgSWNvTGltaXRzIHsKICAgIHVpbnQgY29uc3RhbnQgcHJpdmF0ZVNhbGVTdGFydCA9IDE1MTExMzYwMDA7IC8vIDExLzIwLzIwMTcgQCAxMjowMGFtIChVVEMpCiAgICB1aW50IGNvbnN0YW50IHByaXZhdGVTYWxlRW5kICAgPSAxNTEyMDg2Mzk5OyAvLyAxMS8zMC8yMDE3IEAgMTE6NTlwbSAoVVRDKQoKICAgIHVpbnQgY29uc3RhbnQgcHJlc2FsZVN0YXJ0ICAgICA9IDE1MTIwODY0MDA7IC8vIDEyLzAxLzIwMTcgQCAxMjowMGFtIChVVEMpCiAgICB1aW50IGNvbnN0YW50IHByZXNhbGVFbmQgICAgICAgPSAxNTEzOTAwNzk5OyAvLyAxMi8yMS8yMDE3IEAgMTE6NTlwbSAoVVRDKQoKICAgIHVpbnQgY29uc3RhbnQgcHVibGljU2FsZVN0YXJ0ICA9IDE1MTYzMjAwMDA7IC8vIDAxLzE5LzIwMTggQCAxMjowMGFtIChVVEMpCiAgICB1aW50IGNvbnN0YW50IHB1YmxpY1NhbGVFbmQgICAgPSAxNTIxMTU4Mzk5OyAvLyAwMy8xNS8yMDE4IEAgMTE6NTlwbSAoVVRDKQoKICAgIG1vZGlmaWVyIGFmdGVyUHVibGljU2FsZSgpIHsKICAgICAgICByZXF1aXJlKG5vdyA+IHB1YmxpY1NhbGVFbmQpOwogICAgICAgIF87CiAgICB9CgogICAgdWludCBjb25zdGFudCBwcml2YXRlU2FsZVByaWNlID0gNDAwMDsgLy8gU05FSyB0b2tlbnMgcGVyIDEgRVRICiAgICB1aW50IGNvbnN0YW50IHByZVNhbGVQcmljZSAgICAgPSAzMDAwOyAvLyBTTkVLIHRva2VucyBwZXIgMSBFVEgKICAgIHVpbnQgY29uc3RhbnQgcHVibGljU2FsZVByaWNlICA9IDIwMDA7IC8vIFNORUsgdG9rZW5zIHBlciAxIEVUSAoKICAgIHVpbnQgY29uc3RhbnQgcHJpdmF0ZVNhbGVTdXBwbHlMaW1pdCA9ICA2MDAgICogcHJpdmF0ZVNhbGVQcmljZSAqIDEwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICB1aW50IGNvbnN0YW50IHByZVNhbGVTdXBwbHlMaW1pdCAgICAgPSAgMTIwMCAqIHByZVNhbGVQcmljZSAgICAgKiAxMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgdWludCBjb25zdGFudCBwdWJsaWNTYWxlU3VwcGx5TGltaXQgID0gIDUwMDAgKiBwdWJsaWNTYWxlUHJpY2UgICogMTAwMDAwMDAwMDAwMDAwMDAwMDsKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBBYnN0cmFjdFRva2VuLCBJY29MaW1pdHMgewogICAgLyoKICAgICAqICBEYXRhIHN0cnVjdHVyZXMKICAgICAqLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgb3duZXJBcHBlbmRlZDsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICBhZGRyZXNzW10gcHVibGljIG93bmVyczsKCiAgICAvKgogICAgICogIFJlYWQgYW5kIHdyaXRlIHN0b3JhZ2UgZnVuY3Rpb25zCiAgICAgKi8KICAgIC8vLyBAZGV2IFRyYW5zZmVycyBzZW5kZXIncyB0b2tlbnMgdG8gYSBnaXZlbiBhZGRyZXNzLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIHRva2VuIHJlY2VpdmVyLgogICAgLy8vIEBwYXJhbSBfdmFsdWUgTnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgYWZ0ZXJQdWJsaWNTYWxlIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgaWYoIW93bmVyQXBwZW5kZWRbX3RvXSkgewogICAgICAgICAgICAgICAgb3duZXJBcHBlbmRlZFtfdG9dID0gdHJ1ZTsKICAgICAgICAgICAgICAgIG93bmVycy5wdXNoKF90byk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIGFsbG93ZWQgdGhpcmQgcGFydHkgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIGZyb20gd2hlcmUgdG9rZW5zIGFyZSB3aXRoZHJhd24uCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIHRvIHdoZXJlIHRva2VucyBhcmUgc2VudC4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIE51bWJlciBvZiB0b2tlbnMgdG8gdHJhbnNmZXIuCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBhZnRlclB1YmxpY1NhbGUgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGlmKCFvd25lckFwcGVuZGVkW190b10pIHsKICAgICAgICAgICAgICAgIG93bmVyQXBwZW5kZWRbX3RvXSA9IHRydWU7CiAgICAgICAgICAgICAgICBvd25lcnMucHVzaChfdG8pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBSZXR1cm5zIG51bWJlciBvZiB0b2tlbnMgb3duZWQgYnkgZ2l2ZW4gYWRkcmVzcy4KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIC8vLyBAZGV2IFNldHMgYXBwcm92ZWQgYW1vdW50IG9mIHRva2VucyBmb3Igc3BlbmRlci4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIGFsbG93ZWQgYWNjb3VudC4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIE51bWJlciBvZiBhcHByb3ZlZCB0b2tlbnMuCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKgogICAgICogUmVhZCBzdG9yYWdlIGZ1bmN0aW9ucwogICAgICovCiAgICAvLy8gQGRldiBSZXR1cm5zIG51bWJlciBvZiBhbGxvd2VkIHRva2VucyBmb3IgZ2l2ZW4gYWRkcmVzcy4KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgdG9rZW4gc3BlbmRlci4KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCn0KCgpjb250cmFjdCBFeG9Ub3duVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgU2FmZU1hdGggewoKICAgIC8qCiAgICAgKiBUb2tlbiBtZXRhIGRhdGEKICAgICAqLwoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJFeG9Ub3duIHRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlNORUsiOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICBhZGRyZXNzIHB1YmxpYyBpY29Db250cmFjdCA9IDB4MDsKCgogICAgLyoKICAgICAqIE1vZGlmaWVycwogICAgICovCgogICAgbW9kaWZpZXIgb25seUljb0NvbnRyYWN0KCkgewogICAgICAgIC8vIG9ubHkgSUNPIGNvbnRyYWN0IGlzIGFsbG93ZWQgdG8gcHJvY2VlZAogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBpY29Db250cmFjdCk7CiAgICAgICAgXzsKICAgIH0KCgogICAgLyoKICAgICAqIENvbnRyYWN0IGZ1bmN0aW9ucwogICAgICovCgogICAgLy8vIEBkZXYgQ29udHJhY3QgaXMgbmVlZGVkIGluIGljb0NvbnRyYWN0IGFkZHJlc3MKICAgIC8vLyBAcGFyYW0gX2ljb0NvbnRyYWN0IEFkZHJlc3Mgb2YgYWNjb3VudCB3aGljaCB3aWxsIGJlIG1pbnQgdG9rZW5zCiAgICBmdW5jdGlvbiBFeG9Ub3duVG9rZW4oYWRkcmVzcyBfaWNvQ29udHJhY3QpIHsKICAgICAgICByZXF1aXJlKF9pY29Db250cmFjdCAhPSAweDApOwogICAgICAgIGljb0NvbnRyYWN0ID0gX2ljb0NvbnRyYWN0OwogICAgfQoKICAgIC8vLyBAZGV2IEJ1cm5zIHRva2VucyBmcm9tIGFkZHJlc3MuIEl0IGNhbiBiZSBhcHBsaWVkIGJ5IGFjY291bnQgd2l0aCBhZGRyZXNzIHRoaXMuaWNvQ29udHJhY3QKICAgIC8vLyBAcGFyYW0gX2Zyb20gQWRkcmVzcyBvZiBhY2NvdW50LCBmcm9tIHdoaWNoIHdpbGwgYmUgYnVybmVkIHRva2VucwogICAgLy8vIEBwYXJhbSBfdmFsdWUgQW1vdW50IG9mIHRva2VucywgdGhhdCB3aWxsIGJlIGJ1cm5lZAogICAgZnVuY3Rpb24gYnVyblRva2VucyhhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSkgb25seUljb0NvbnRyYWN0IHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwoKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzdWIoYmFsYW5jZXNbX2Zyb21dLCBfdmFsdWUpOwogICAgICAgIHRvdGFsU3VwcGx5IC09IF92YWx1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBBZGRzIHRva2VucyB0byBhZGRyZXNzLiBJdCBjYW4gYmUgYXBwbGllZCBieSBhY2NvdW50IHdpdGggYWRkcmVzcyB0aGlzLmljb0NvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIGFjY291bnQgdG8gd2hpY2ggdGhlIHRva2VucyB3aWxsIHBhc3MKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEFtb3VudCBvZiB0b2tlbnMKICAgIGZ1bmN0aW9uIGVtaXRUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5SWNvQ29udHJhY3QgewogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkgKyBfdmFsdWUgPj0gdG90YWxTdXBwbHkpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBhZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSArPSBfdmFsdWU7CgogICAgICAgIGlmKCFvd25lckFwcGVuZGVkW190b10pIHsKICAgICAgICAgICAgb3duZXJBcHBlbmRlZFtfdG9dID0gdHJ1ZTsKICAgICAgICAgICAgb3duZXJzLnB1c2goX3RvKTsKICAgICAgICB9CgogICAgICAgIFRyYW5zZmVyKDB4MCwgX3RvLCBfdmFsdWUpOwoKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRPd25lcih1aW50IGluZGV4KSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzLCB1aW50KSB7CiAgICAgICAgcmV0dXJuIChvd25lcnNbaW5kZXhdLCBiYWxhbmNlc1tvd25lcnNbaW5kZXhdXSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0T3duZXJDb3VudCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gb3duZXJzLmxlbmd0aDsKICAgIH0KCn0KCgpjb250cmFjdCBFeG9Ub3duSWNvIGlzIFNhZmVNYXRoLCBJY29MaW1pdHMgewoKICAgIC8qCiAgICAgKiBJQ08gbWV0YSBkYXRhCiAgICAgKi8KICAgIEV4b1Rvd25Ub2tlbiBwdWJsaWMgZXhvdG93blRva2VuOwoKICAgIGVudW0gU3RhdGUgewogICAgICAgIFBhdXNlLAogICAgICAgIFJ1bm5pbmcKICAgIH0KCiAgICBTdGF0ZSBwdWJsaWMgY3VycmVudFN0YXRlID0gU3RhdGUuUGF1c2U7CgogICAgdWludCBwdWJsaWMgcHJpdmF0ZVNhbGVTb2xkVG9rZW5zID0gMDsKICAgIHVpbnQgcHVibGljIHByZVNhbGVTb2xkVG9rZW5zICAgICA9IDA7CiAgICB1aW50IHB1YmxpYyBwdWJsaWNTYWxlU29sZFRva2VucyAgPSAwOwoKICAgIHVpbnQgcHVibGljIHByaXZhdGVTYWxlRXRoZXJSYWlzZWQgPSAwOwogICAgdWludCBwdWJsaWMgcHJlU2FsZUV0aGVyUmFpc2VkICAgICA9IDA7CiAgICB1aW50IHB1YmxpYyBwdWJsaWNTYWxlRXRoZXJSYWlzZWQgID0gMDsKCiAgICAvLyBBZGRyZXNzIG9mIG1hbmFnZXIKICAgIGFkZHJlc3MgcHVibGljIGljb01hbmFnZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGVyV2FsbGV0OwoKICAgIC8vIEFkZHJlc3MgZnJvbSB3aGljaCB0b2tlbnMgY291bGQgYmUgYnVybmVkCiAgICBhZGRyZXNzIHB1YmxpYyBidXlCYWNrOwoKICAgIC8vIFB1cnBvc2UKICAgIGFkZHJlc3MgcHVibGljIGRldmVsb3BtZW50V2FsbGV0OwogICAgYWRkcmVzcyBwdWJsaWMgbWFya2V0aW5nV2FsbGV0OwogICAgYWRkcmVzcyBwdWJsaWMgdGVhbVdhbGxldDsKCiAgICBhZGRyZXNzIHB1YmxpYyBib3VudHlPd25lcjsKCiAgICAvLyBNZWRpYXRvciB3YWxsZXQgaXMgdXNlZCBmb3IgdHJhY2tpbmcgdXNlciBwYXltZW50cyBhbmQgcmVkdWNpbmcgdXNlcnMnIGZlZQogICAgYWRkcmVzcyBwdWJsaWMgbWVkaWF0b3JXYWxsZXQ7CgogICAgYm9vbCBwdWJsaWMgc2VudFRva2Vuc1RvQm91bnR5T3duZXIgPSBmYWxzZTsKICAgIGJvb2wgcHVibGljIHNlbnRUb2tlbnNUb0ZvdW5kZXJzID0gZmFsc2U7CgogICAgCgogICAgLyoKICAgICAqIE1vZGlmaWVycwogICAgICovCgogICAgbW9kaWZpZXIgd2hlbkluaXRpYWxpemVkKCkgewogICAgICAgIC8vIG9ubHkgd2hlbiBjb250cmFjdCBpcyBpbml0aWFsaXplZAogICAgICAgIHJlcXVpcmUoY3VycmVudFN0YXRlID49IFN0YXRlLlJ1bm5pbmcpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seU1hbmFnZXIoKSB7CiAgICAgICAgLy8gb25seSBJQ08gbWFuYWdlciBjYW4gZG8gdGhpcyBhY3Rpb24KICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gaWNvTWFuYWdlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbkljbygpIHsKICAgICAgICByZXF1aXJlKCBpc1ByaXZhdGVTYWxlKCkgfHwgaXNQcmVTYWxlKCkgfHwgaXNQdWJsaWNTYWxlKCkgKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGhhc0JvdW50eUNhbXBhaWduKCkgewogICAgICAgIHJlcXVpcmUoYm91bnR5T3duZXIgIT0gMHgwKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzUHJpdmF0ZVNhbGUoKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIG5vdyA+PSBwcml2YXRlU2FsZVN0YXJ0ICYmIG5vdyA8PSBwcml2YXRlU2FsZUVuZDsKICAgIH0KCiAgICBmdW5jdGlvbiBpc1ByZVNhbGUoKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIG5vdyA+PSBwcmVzYWxlU3RhcnQgJiYgbm93IDw9IHByZXNhbGVFbmQ7CiAgICB9CgogICAgZnVuY3Rpb24gaXNQdWJsaWNTYWxlKCkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBub3cgPj0gcHVibGljU2FsZVN0YXJ0ICYmIG5vdyA8PSBwdWJsaWNTYWxlRW5kOwogICAgfQoKCgoKCgoKICAgIGZ1bmN0aW9uIGdldFByaWNlKCkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIGlmIChpc1ByaXZhdGVTYWxlKCkpIHJldHVybiBwcml2YXRlU2FsZVByaWNlOwogICAgICAgIGlmIChpc1ByZVNhbGUoKSkgcmV0dXJuIHByZVNhbGVQcmljZTsKICAgICAgICBpZiAoaXNQdWJsaWNTYWxlKCkpIHJldHVybiBwdWJsaWNTYWxlUHJpY2U7CgogICAgICAgIHJldHVybiBwdWJsaWNTYWxlUHJpY2U7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0U3RhZ2VTdXBwbHlMaW1pdCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICBpZiAoaXNQcml2YXRlU2FsZSgpKSByZXR1cm4gcHJpdmF0ZVNhbGVTdXBwbHlMaW1pdDsKICAgICAgICBpZiAoaXNQcmVTYWxlKCkpIHJldHVybiBwcmVTYWxlU3VwcGx5TGltaXQ7CiAgICAgICAgaWYgKGlzUHVibGljU2FsZSgpKSByZXR1cm4gcHVibGljU2FsZVN1cHBseUxpbWl0OwoKICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTdGFnZVNvbGRUb2tlbnMoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKGlzUHJpdmF0ZVNhbGUoKSkgcmV0dXJuIHByaXZhdGVTYWxlU29sZFRva2VuczsKICAgICAgICBpZiAoaXNQcmVTYWxlKCkpIHJldHVybiBwcmVTYWxlU29sZFRva2VuczsKICAgICAgICBpZiAoaXNQdWJsaWNTYWxlKCkpIHJldHVybiBwdWJsaWNTYWxlU29sZFRva2VuczsKCiAgICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkU3RhZ2VUb2tlbnNTb2xkKHVpbnQgX2Ftb3VudCkgaW50ZXJuYWwgewogICAgICAgIGlmIChpc1ByaXZhdGVTYWxlKCkpIHByaXZhdGVTYWxlU29sZFRva2VucyA9IGFkZChwcml2YXRlU2FsZVNvbGRUb2tlbnMsIF9hbW91bnQpOwogICAgICAgIGlmIChpc1ByZVNhbGUoKSkgICAgIHByZVNhbGVTb2xkVG9rZW5zID0gYWRkKHByZVNhbGVTb2xkVG9rZW5zLCBfYW1vdW50KTsKICAgICAgICBpZiAoaXNQdWJsaWNTYWxlKCkpICBwdWJsaWNTYWxlU29sZFRva2VucyA9IGFkZChwdWJsaWNTYWxlU29sZFRva2VucywgX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkU3RhZ2VFdGhlclJhaXNlZCh1aW50IF9hbW91bnQpIGludGVybmFsIHsKICAgICAgICBpZiAoaXNQcml2YXRlU2FsZSgpKSBwcml2YXRlU2FsZUV0aGVyUmFpc2VkID0gYWRkKHByaXZhdGVTYWxlRXRoZXJSYWlzZWQsIF9hbW91bnQpOwogICAgICAgIGlmIChpc1ByZVNhbGUoKSkgICAgIHByZVNhbGVFdGhlclJhaXNlZCA9IGFkZChwcmVTYWxlRXRoZXJSYWlzZWQsIF9hbW91bnQpOwogICAgICAgIGlmIChpc1B1YmxpY1NhbGUoKSkgIHB1YmxpY1NhbGVFdGhlclJhaXNlZCA9IGFkZChwdWJsaWNTYWxlRXRoZXJSYWlzZWQsIF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFN0YWdlRXRoZXJSYWlzZWQoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKGlzUHJpdmF0ZVNhbGUoKSkgcmV0dXJuIHByaXZhdGVTYWxlRXRoZXJSYWlzZWQ7CiAgICAgICAgaWYgKGlzUHJlU2FsZSgpKSAgICAgcmV0dXJuIHByZVNhbGVFdGhlclJhaXNlZDsKICAgICAgICBpZiAoaXNQdWJsaWNTYWxlKCkpICByZXR1cm4gcHVibGljU2FsZUV0aGVyUmFpc2VkOwoKICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb2tlbnNTb2xkKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybgogICAgICAgICAgICBwcml2YXRlU2FsZVNvbGRUb2tlbnMgKwogICAgICAgICAgICBwcmVTYWxlU29sZFRva2VucyArCiAgICAgICAgICAgIHB1YmxpY1NhbGVTb2xkVG9rZW5zOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEV0aGVyUmFpc2VkKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybgogICAgICAgICAgICBwcml2YXRlU2FsZUV0aGVyUmFpc2VkICsKICAgICAgICAgICAgcHJlU2FsZUV0aGVyUmFpc2VkICsKICAgICAgICAgICAgcHVibGljU2FsZUV0aGVyUmFpc2VkOwogICAgfQoKCgoKCgoKCgoKCgoKCgogICAgLy8vIEBkZXYgQ29uc3RydWN0b3Igb2YgSUNPLiBSZXF1aXJlcyBhZGRyZXNzIG9mIGljb01hbmFnZXIsCiAgICAvLy8gQHBhcmFtIF9pY29NYW5hZ2VyIEFkZHJlc3Mgb2YgSUNPIG1hbmFnZXIKICAgIGZ1bmN0aW9uIEV4b1Rvd25JY28oYWRkcmVzcyBfaWNvTWFuYWdlcikgewogICAgICAgIHJlcXVpcmUoX2ljb01hbmFnZXIgIT0gMHgwKTsKCiAgICAgICAgZXhvdG93blRva2VuID0gbmV3IEV4b1Rvd25Ub2tlbih0aGlzKTsKICAgICAgICBpY29NYW5hZ2VyID0gX2ljb01hbmFnZXI7CiAgICB9CgogICAgLy8vIEluaXRpYWxpc2VzIGFkZHJlc3NlcyBvZiBmb3VuZGVyLCB0YXJnZXQgd2FsbGV0cwogICAgLy8vIEBwYXJhbSBfZm91bmRlciBBZGRyZXNzIG9mIEZvdW5kZXIKICAgIC8vLyBAcGFyYW0gX2RldiBBZGRyZXNzIG9mIERldmVsb3BtZW50IHdhbGxldAogICAgLy8vIEBwYXJhbSBfcHIgQWRkcmVzcyBvZiBNYXJrZXRpbmcgd2FsbGV0CiAgICAvLy8gQHBhcmFtIF90ZWFtIEFkZHJlc3Mgb2YgVGVhbSB3YWxsZXQKICAgIC8vLyBAcGFyYW0gX2J1eWJhY2sgQWRkcmVzcyBvZiB3YWxsZXQgdXNlZCBmb3IgYnVybmluZyB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX21lZGlhdG9yIEFkZHJlc3Mgb2YgTWVkaWF0b3Igd2FsbGV0CgogICAgZnVuY3Rpb24gaW5pdCgKICAgICAgICBhZGRyZXNzIF9mb3VuZGVyLAogICAgICAgIGFkZHJlc3MgX2RldiwKICAgICAgICBhZGRyZXNzIF9wciwKICAgICAgICBhZGRyZXNzIF90ZWFtLAogICAgICAgIGFkZHJlc3MgX2J1eWJhY2ssCiAgICAgICAgYWRkcmVzcyBfbWVkaWF0b3IKICAgICkgb25seU1hbmFnZXIgewogICAgICAgIHJlcXVpcmUoY3VycmVudFN0YXRlID09IFN0YXRlLlBhdXNlKTsKICAgICAgICByZXF1aXJlKF9mb3VuZGVyICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfZGV2ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfcHIgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKF90ZWFtICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfYnV5YmFjayAhPSAweDApOwogICAgICAgIHJlcXVpcmUoX21lZGlhdG9yICE9IDB4MCk7CgogICAgICAgIGZvdW5kZXJXYWxsZXQgPSBfZm91bmRlcjsKICAgICAgICBkZXZlbG9wbWVudFdhbGxldCA9IF9kZXY7CiAgICAgICAgbWFya2V0aW5nV2FsbGV0ID0gX3ByOwogICAgICAgIHRlYW1XYWxsZXQgPSBfdGVhbTsKICAgICAgICBidXlCYWNrID0gX2J1eWJhY2s7CiAgICAgICAgbWVkaWF0b3JXYWxsZXQgPSBfbWVkaWF0b3I7CgogICAgICAgIGN1cnJlbnRTdGF0ZSA9IFN0YXRlLlJ1bm5pbmc7CgogICAgICAgIGV4b3Rvd25Ub2tlbi5lbWl0VG9rZW5zKGljb01hbmFnZXIsIDApOwogICAgfQoKICAgIC8vLyBAZGV2IFNldHMgbmV3IHN0YXRlCiAgICAvLy8gQHBhcmFtIF9uZXdTdGF0ZSBWYWx1ZSBvZiBuZXcgc3RhdGUKICAgIGZ1bmN0aW9uIHNldFN0YXRlKFN0YXRlIF9uZXdTdGF0ZSkgcHVibGljIG9ubHlNYW5hZ2VyIHsKICAgICAgICBjdXJyZW50U3RhdGUgPSBfbmV3U3RhdGU7CiAgICB9CgogICAgLy8vIEBkZXYgU2V0cyBuZXcgbWFuYWdlci4gT25seSBtYW5hZ2VyIGNhbiBkbyBpdAogICAgLy8vIEBwYXJhbSBfbmV3SWNvTWFuYWdlciBBZGRyZXNzIG9mIG5ldyBJQ08gbWFuYWdlcgogICAgZnVuY3Rpb24gc2V0TmV3TWFuYWdlcihhZGRyZXNzIF9uZXdJY29NYW5hZ2VyKSBvbmx5TWFuYWdlciB7CiAgICAgICAgcmVxdWlyZShfbmV3SWNvTWFuYWdlciAhPSAweDApOwogICAgICAgIGljb01hbmFnZXIgPSBfbmV3SWNvTWFuYWdlcjsKICAgIH0KCiAgICAvLy8gQGRldiBTZXRzIGJvdW50eSBvd25lci4gT25seSBtYW5hZ2VyIGNhbiBkbyBpdAogICAgLy8vIEBwYXJhbSBfYm91bnR5T3duZXIgQWRkcmVzcyBvZiBCb3VudHkgb3duZXIKICAgIGZ1bmN0aW9uIHNldEJvdW50eUNhbXBhaWduKGFkZHJlc3MgX2JvdW50eU93bmVyKSBvbmx5TWFuYWdlciB7CiAgICAgICAgcmVxdWlyZShfYm91bnR5T3duZXIgIT0gMHgwKTsKICAgICAgICBib3VudHlPd25lciA9IF9ib3VudHlPd25lcjsKICAgIH0KCiAgICAvLy8gQGRldiBTZXRzIG5ldyBNZWRpYXRvciB3YWxsZXQuIE9ubHkgbWFuYWdlciBjYW4gZG8gaXQKICAgIC8vLyBAcGFyYW0gX21lZGlhdG9yIEFkZHJlc3Mgb2YgTWVkaWF0b3Igd2FsbGV0CiAgICBmdW5jdGlvbiBzZXROZXdNZWRpYXRvcihhZGRyZXNzIF9tZWRpYXRvcikgb25seU1hbmFnZXIgewogICAgICAgIHJlcXVpcmUoX21lZGlhdG9yICE9IDB4MCk7CiAgICAgICAgbWVkaWF0b3JXYWxsZXQgPSBfbWVkaWF0b3I7CiAgICB9CgoKICAgIC8vLyBAZGV2IEJ1eSBxdWFudGl0eSBvZiB0b2tlbnMgZGVwZW5kaW5nIG9uIHRoZSBhbW91bnQgb2Ygc2VudCBldGhlcnMuCiAgICAvLy8gQHBhcmFtIF9idXllciBBZGRyZXNzIG9mIGFjY291bnQgd2hpY2ggd2lsbCByZWNlaXZlIHRva2VucwogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgX2J1eWVyKSBwcml2YXRlIHsKICAgICAgICByZXF1aXJlKF9idXllciAhPSAweDApOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CgogICAgICAgIHVpbnQgdG9rZW5zVG9FbWl0ID0gbXNnLnZhbHVlICogZ2V0UHJpY2UoKTsKICAgICAgICB1aW50IHZvbHVtZUJvbnVzUGVyY2VudCA9IHZvbHVtZUJvbnVzKG1zZy52YWx1ZSk7CgogICAgICAgIGlmICh2b2x1bWVCb251c1BlcmNlbnQgPiAwKSB7CiAgICAgICAgICAgIHRva2Vuc1RvRW1pdCA9IG11bCh0b2tlbnNUb0VtaXQsIDEwMCArIHZvbHVtZUJvbnVzUGVyY2VudCkgLyAxMDA7CiAgICAgICAgfQoKICAgICAgICB1aW50IHN0YWdlU3VwcGx5TGltaXQgPSBnZXRTdGFnZVN1cHBseUxpbWl0KCk7CiAgICAgICAgdWludCBzdGFnZVNvbGRUb2tlbnMgPSBnZXRTdGFnZVNvbGRUb2tlbnMoKTsKCiAgICAgICAgcmVxdWlyZShhZGQoc3RhZ2VTb2xkVG9rZW5zLCB0b2tlbnNUb0VtaXQpIDw9IHN0YWdlU3VwcGx5TGltaXQpOwoKICAgICAgICBleG90b3duVG9rZW4uZW1pdFRva2VucyhfYnV5ZXIsIHRva2Vuc1RvRW1pdCk7CgogICAgICAgIC8vIFB1YmxpYyBzdGF0aXN0aWNzCiAgICAgICAgYWRkU3RhZ2VUb2tlbnNTb2xkKHRva2Vuc1RvRW1pdCk7CiAgICAgICAgYWRkU3RhZ2VFdGhlclJhaXNlZChtc2cudmFsdWUpOwoKICAgICAgICBkaXN0cmlidXRlRXRoZXJCeVN0YWdlKCk7CgogICAgfQoKICAgIC8vLyBAZGV2IEJ1eSB0b2tlbnMgdG8gc3BlY2lmaWVkIHdhbGxldAogICAgZnVuY3Rpb24gZ2lmdFRva2VuKGFkZHJlc3MgX3RvKSBwdWJsaWMgcGF5YWJsZSBvbkljbyB7CiAgICAgICAgYnV5VG9rZW5zKF90byk7CiAgICB9CgogICAgLy8vIEBkZXYgRmFsbCBiYWNrIGZ1bmN0aW9uCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIG9uSWNvIHsKICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gZGlzdHJpYnV0ZUV0aGVyQnlTdGFnZSgpIHByaXZhdGUgewogICAgICAgIHVpbnQgX2JhbGFuY2UgPSB0aGlzLmJhbGFuY2U7CiAgICAgICAgdWludCBfYmFsYW5jZV9kaXYgPSBfYmFsYW5jZSAvIDEwMDsKCiAgICAgICAgdWludCBfZGV2QW1vdW50ID0gX2JhbGFuY2VfZGl2ICogNjU7CiAgICAgICAgdWludCBfcHJBbW91bnQgPSBfYmFsYW5jZV9kaXYgKiAyNTsKCiAgICAgICAgdWludCB0b3RhbCA9IF9kZXZBbW91bnQgKyBfcHJBbW91bnQ7CiAgICAgICAgaWYgKHRvdGFsID4gMCkgewogICAgICAgICAgICAvLyBUb3AgdXAgTWVkaWF0b3Igd2FsbGV0IHdpdGggMSUgb2YgRGV2ZWxvcG1lbnQgYW1vdW50ID0gMC42NSUgb2YgY29udHJpYnV0aW9uIGFtb3VudC4KICAgICAgICAgICAgLy8gSXQgd2lsbCBjb3ZlciB0cmFja2luZyB0cmFuc2FjdGlvbiBmZWUgKGlmIGFueSkuCiAgICAgICAgICAgIC8vIFNlZSBXaGl0ZSBQYXBlciBmb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBwYXltZW50IHRyYWNraW5nCgogICAgICAgICAgICB1aW50IF9tZWRpYXRvckFtb3VudCA9IF9kZXZBbW91bnQgLyAxMDA7CiAgICAgICAgICAgIG1lZGlhdG9yV2FsbGV0LnRyYW5zZmVyKF9tZWRpYXRvckFtb3VudCk7CgogICAgICAgICAgICBkZXZlbG9wbWVudFdhbGxldC50cmFuc2ZlcihfZGV2QW1vdW50IC0gX21lZGlhdG9yQW1vdW50KTsKICAgICAgICAgICAgbWFya2V0aW5nV2FsbGV0LnRyYW5zZmVyKF9wckFtb3VudCk7CiAgICAgICAgICAgIHRlYW1XYWxsZXQudHJhbnNmZXIoX2JhbGFuY2UgLSBfZGV2QW1vdW50IC0gX3ByQW1vdW50KTsKICAgICAgICB9CiAgICB9CgoKICAgIC8vLyBAZGV2IFBhcnRpYWwgd2l0aGRyYXcuIE9ubHkgbWFuYWdlciBjYW4gZG8gaXQKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RXRoZXIodWludCBfdmFsdWUpIG9ubHlNYW5hZ2VyIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IHRoaXMuYmFsYW5jZSk7CiAgICAgICAgLy8gc2VuZCAxMjM0IHRvIGdldCAxLjIzNAogICAgICAgIGljb01hbmFnZXIudHJhbnNmZXIoX3ZhbHVlICogMTAwMDAwMDAwMDAwMDAwMCk7IC8vIDEwXjE1CiAgICB9CgogICAgLy8vQGRldiBTZW5kIHRva2VucyB0byBib3VudHlPd25lciBkZXBlbmRpbmcgb24gY3Jvd2RzYWxlIHJlc3VsdHMuIENhbiBiZSBzZW5kIG9ubHkgYWZ0ZXIgcHVibGljIHNhbGUuCiAgICBmdW5jdGlvbiBzZW5kVG9rZW5zVG9Cb3VudHlPd25lcigpIG9ubHlNYW5hZ2VyIHdoZW5Jbml0aWFsaXplZCBoYXNCb3VudHlDYW1wYWlnbiBhZnRlclB1YmxpY1NhbGUgewogICAgICAgIHJlcXVpcmUoIXNlbnRUb2tlbnNUb0JvdW50eU93bmVyKTsKCiAgICAgICAgLy9DYWxjdWxhdGUgYm91bnR5IHRva2VucyBkZXBlbmRpbmcgb24gdG90YWwgdG9rZW5zIHNvbGQKICAgICAgICB1aW50IGJvdW50eVRva2VucyA9IGdldFRva2Vuc1NvbGQoKSAvIDQwOyAvLyAyLjUlCgogICAgICAgIGV4b3Rvd25Ub2tlbi5lbWl0VG9rZW5zKGJvdW50eU93bmVyLCBib3VudHlUb2tlbnMpOwoKICAgICAgICBzZW50VG9rZW5zVG9Cb3VudHlPd25lciA9IHRydWU7CiAgICB9CgogICAgLy8vIEBkZXYgU2VuZCB0b2tlbnMgdG8gZm91bmRlcnMuCiAgICBmdW5jdGlvbiBzZW5kVG9rZW5zVG9Gb3VuZGVycygpIG9ubHlNYW5hZ2VyIHdoZW5Jbml0aWFsaXplZCBhZnRlclB1YmxpY1NhbGUgewogICAgICAgIHJlcXVpcmUoIXNlbnRUb2tlbnNUb0ZvdW5kZXJzKTsKCiAgICAgICAgLy9DYWxjdWxhdGUgZm91bmRlciByZXdhcmQgZGVwZW5kaW5nIG9uIHRvdGFsIHRva2VucyBzb2xkCiAgICAgICAgdWludCBmb3VuZGVyUmV3YXJkID0gZ2V0VG9rZW5zU29sZCgpIC8gMTA7IC8vIDEwJQoKICAgICAgICBleG90b3duVG9rZW4uZW1pdFRva2Vucyhmb3VuZGVyV2FsbGV0LCBmb3VuZGVyUmV3YXJkKTsKCiAgICAgICAgc2VudFRva2Vuc1RvRm91bmRlcnMgPSB0cnVlOwogICAgfQoKICAgIC8vIEFueW9uZSBjb3VsZCBidXJuIHRva2VucyBieSBzZW5kaW5nIGl0IHRvIGJ1eUJhY2sgYWRkcmVzcyBhbmQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uLgogICAgZnVuY3Rpb24gYnVyblRva2Vucyh1aW50IF9hbW91bnQpIGFmdGVyUHVibGljU2FsZSB7CiAgICAgICAgZXhvdG93blRva2VuLmJ1cm5Ub2tlbnMoYnV5QmFjaywgX2Ftb3VudCk7CiAgICB9Cn0='.
	

]
