Class {
	#name : #SRTce16dfc1db5f9c8edc89be5653f6f45551dc8277,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTce16dfc1db5f9c8edc89be5653f6f45551dc8277 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9Cgpjb250cmFjdCBPd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKCiAgICBmdW5jdGlvbiBPd25lZCgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG93bmVyID09IG1zZy5zZW5kZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfb3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX293bmVyICE9IDApOwogICAgICAgIG5ld093bmVyID0gX293bmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbmZpcm1Pd25lcigpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShuZXdPd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIGRlbGV0ZSBuZXdPd25lcjsKICAgIH0KfQoKY29udHJhY3QgQmxvY2tlZCB7CiAgICB1aW50IHB1YmxpYyBibG9ja2VkVW50aWw7CgogICAgbW9kaWZpZXIgdW5ibG9ja2VkIHsKICAgICAgICByZXF1aXJlKG5vdyA+IGJsb2NrZWRVbnRpbCk7CiAgICAgICAgXzsKICAgIH0KfQoKY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBQYXlsb2FkU2l6ZSB7CiAgICAvLyBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjawogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgICAgIHJlcXVpcmUobXNnLmRhdGEubGVuZ3RoID49IHNpemUgKyA0KTsKICAgICAgICBfOwogICAgfQp9Cgpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMsIEJsb2NrZWQsIFBheWxvYWRTaXplIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgdW5ibG9ja2VkIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9Cgp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgdW5ibG9ja2VkIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHVuYmxvY2tlZCBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewoKICAgICAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB1bmJsb2NrZWQgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cgp9Cgpjb250cmFjdCBCdXJuYWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4gewoKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CgogICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgdW5ibG9ja2VkIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CiAgICAgICAgLy8gbm8gbmVlZCB0byByZXF1aXJlIHZhbHVlIDw9IHRvdGFsU3VwcGx5LCBzaW5jZSB0aGF0IHdvdWxkIGltcGx5IHRoZQogICAgICAgIC8vIHNlbmRlcidzIGJhbGFuY2UgaXMgZ3JlYXRlciB0aGFuIHRoZSB0b3RhbFN1cHBseSwgd2hpY2ggKnNob3VsZCogYmUgYW4gYXNzZXJ0aW9uIGZhaWx1cmUKCiAgICAgICAgYWRkcmVzcyBidXJuZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGJhbGFuY2VzW2J1cm5lcl0gPSBiYWxhbmNlc1tidXJuZXJdLnN1YihfdmFsdWUpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICAgICAgQnVybihidXJuZXIsIF92YWx1ZSk7CiAgICB9Cn0KCmNvbnRyYWN0IFByZU5URlRva2VuIGlzIEJ1cm5hYmxlVG9rZW4sIE93bmVkIHsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiUHJlTlRGIFRva2VuIjsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJQcmVOVEYiOwoKICAgIHVpbnQzMiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICBmdW5jdGlvbiBQcmVOVEZUb2tlbih1aW50MjU2IGluaXRpYWxTdXBwbHksIHVpbnQgdW5ibG9ja1RpbWUpIHB1YmxpYyB7CiAgICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5OwogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGluaXRpYWxTdXBwbHk7CiAgICAgICAgYmxvY2tlZFVudGlsID0gdW5ibG9ja1RpbWU7CiAgICB9CgogICAgZnVuY3Rpb24gbWFudWFsVHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKY29udHJhY3QgQ3Jvd2RzYWxlIGlzIE93bmVkLCBQYXlsb2FkU2l6ZSB7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgc3RydWN0IEFtb3VudERhdGEgewogICAgICAgIGJvb2wgZXhpc3RzOwogICAgICAgIHVpbnQyNTYgdmFsdWU7CiAgICB9CgogICAgLy8gRGF0ZSBvZiBzdGFydCBwcmUtSUNPCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBwcmVJQ09zdGFydFRpbWUgPSAgICAxNTEyNTk3NjAwOyAvLyBzdGFydCBhdCBUaHVyc2RheSwgRGVjZW1iZXIgNywgMjAxNyAxMjowMDowMCBBTSBFRVQKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IHByZUlDT2VuZFRpbWUgPSAgICAgIDE1MTc0MzYwMDA7IC8vIGVuZCBhdCAgIFRodXJzZGF5LCBGZWJydWFyeSAxLCAyMDE4IDEyOjAwOjAwIEFNIEVFVAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgYmxvY2tVbnRpbCA9ICAgICAgICAgMTUyNTEyMjAwMDsgLy8gdG9rZW5zIGFyZSBibG9ja2VkIHVudGlsIFR1ZXNkYXksIE1heSAxLCAyMDE4IDEyOjAwOjAwIEFNIEVFVAoKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IG1heFRva2VuQW1vdW50ID0gMzM3NTAwMCAqIDEwKioxODsgLy8gbWF4IHRva2VucyBhbW91bnQKCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBib3VudHlUb2tlbkFtb3VudCA9IDM3NTAwMCAqIDEwKioxODsKICAgIHVpbnQyNTYgcHVibGljIGdpdmVuQm91bnR5VG9rZW5zID0gMDsKCiAgICBQcmVOVEZUb2tlbiBwdWJsaWMgdG9rZW47CgogICAgdWludDI1NiBwdWJsaWMgbGVmdFRva2VucyA9IDA7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxBbW91bnQgPSAwOwogICAgdWludCBwdWJsaWMgdHJhbnNhY3Rpb25Db3VudGVyID0gMDsKCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlblByaWNlID0gMyAqIDEwKioxNTsgLy8gdG9rZW4gcHJpY2UgaW4gZXRoZXIKCiAgICB1aW50MjU2IHB1YmxpYyBtaW5BbW91bnRGb3JEZWFsID0gOSBldGhlcjsKCiAgICBtYXBwaW5nICh1aW50ID0+IEFtb3VudERhdGEpIHB1YmxpYyBhbW91bnRzQnlDdXJyZW5jeTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBib3VudHlUb2tlbnNUb0FkZHJlc3M7CgogICAgbW9kaWZpZXIgY2FuQnV5KCkgewogICAgICAgIHJlcXVpcmUoIWlzRmluaXNoZWQoKSk7CiAgICAgICAgcmVxdWlyZShub3cgPj0gcHJlSUNPc3RhcnRUaW1lKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG1pblBheW1lbnQoKSB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gbWluQW1vdW50Rm9yRGVhbCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjawogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgICAgIHJlcXVpcmUobXNnLmRhdGEubGVuZ3RoID49IHNpemUgKyA0KTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIENyb3dkc2FsZSgpIHB1YmxpYyB7CiAgICAgICAgdG9rZW4gPSBuZXcgUHJlTlRGVG9rZW4obWF4VG9rZW5BbW91bnQsIGJsb2NrVW50aWwpOwogICAgICAgIGxlZnRUb2tlbnMgPSBtYXhUb2tlbkFtb3VudCAtIGJvdW50eVRva2VuQW1vdW50OwogICAgICAgIC8vIGluaXQgY3VycmVuY3kgaW4gQ3Jvd2RzYWxlLgogICAgICAgIEFtb3VudERhdGEgc3RvcmFnZSBidGNBbW91bnREYXRhID0gYW1vdW50c0J5Q3VycmVuY3lbMF07CiAgICAgICAgYnRjQW1vdW50RGF0YS5leGlzdHMgPSB0cnVlOwogICAgICAgIEFtb3VudERhdGEgc3RvcmFnZSBiY2NBbW91bnREYXRhID0gYW1vdW50c0J5Q3VycmVuY3lbMV07CiAgICAgICAgYmNjQW1vdW50RGF0YS5leGlzdHMgPSB0cnVlOwogICAgICAgIEFtb3VudERhdGEgc3RvcmFnZSBsdGNBbW91bnREYXRhID0gYW1vdW50c0J5Q3VycmVuY3lbMl07CiAgICAgICAgbHRjQW1vdW50RGF0YS5leGlzdHMgPSB0cnVlOwogICAgICAgIEFtb3VudERhdGEgc3RvcmFnZSBkYXNoQW1vdW50RGF0YSA9IGFtb3VudHNCeUN1cnJlbmN5WzNdOwogICAgICAgIGRhc2hBbW91bnREYXRhLmV4aXN0cyA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gaXNGaW5pc2hlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIG5vdyA+IHByZUlDT2VuZFRpbWUgfHwgbGVmdFRva2VucyA9PSAwOwogICAgfQoKICAgIGZ1bmN0aW9uKCkgZXh0ZXJuYWwgY2FuQnV5IG1pblBheW1lbnQgcGF5YWJsZSB7CiAgICAgICAgdWludDI1NiBhbW91bnQgPSBtc2cudmFsdWU7CiAgICAgICAgdWludDI1NiBnaXZlblRva2VucyA9IGFtb3VudC5tdWwoMSBldGhlcikuZGl2KHRva2VuUHJpY2UpOwogICAgICAgIHVpbnQyNTYgcHJvdmlkZWRUb2tlbnMgPSB0cmFuc2ZlclRva2Vuc1RvKG1zZy5zZW5kZXIsIGdpdmVuVG9rZW5zKTsKICAgICAgICB0cmFuc2FjdGlvbkNvdW50ZXIgPSB0cmFuc2FjdGlvbkNvdW50ZXIgKyAxOwoKICAgICAgICBpZiAoZ2l2ZW5Ub2tlbnMgPiBwcm92aWRlZFRva2VucykgewogICAgICAgICAgICB1aW50MjU2IG5lZWRBbW91bnQgPSBwcm92aWRlZFRva2Vucy5tdWwodG9rZW5QcmljZSkuZGl2KDEgZXRoZXIpOwogICAgICAgICAgICByZXF1aXJlKGFtb3VudCA+IG5lZWRBbW91bnQpOwogICAgICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIuY2FsbC5nYXMoMzAwMDAwMCkudmFsdWUoYW1vdW50IC0gbmVlZEFtb3VudCkoKSk7CiAgICAgICAgICAgIGFtb3VudCA9IG5lZWRBbW91bnQ7CiAgICAgICAgfQogICAgICAgIHRvdGFsQW1vdW50ID0gdG90YWxBbW91bnQuYWRkKGFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gbWFudWFsVHJhbnNmZXJUb2tlbnNUbyhhZGRyZXNzIHRvLCB1aW50MjU2IGdpdmVuVG9rZW5zLCB1aW50IGN1cnJlbmN5LCB1aW50MjU2IGFtb3VudCkgZXh0ZXJuYWwgY2FuQnV5IG9ubHlPd25lciByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgQW1vdW50RGF0YSBtZW1vcnkgdGVtcEFtb3VudERhdGEgPSBhbW91bnRzQnlDdXJyZW5jeVtjdXJyZW5jeV07CiAgICAgICAgcmVxdWlyZSh0ZW1wQW1vdW50RGF0YS5leGlzdHMpOwogICAgICAgIEFtb3VudERhdGEgc3RvcmFnZSBhbW91bnREYXRhID0gYW1vdW50c0J5Q3VycmVuY3lbY3VycmVuY3ldOwogICAgICAgIGFtb3VudERhdGEudmFsdWUgPSBhbW91bnREYXRhLnZhbHVlLmFkZChhbW91bnQpOwogICAgICAgIHVpbnQyNTYgdmFsdWUgPSB0cmFuc2ZlclRva2Vuc1RvKHRvLCBnaXZlblRva2Vucyk7CiAgICAgICAgdHJhbnNhY3Rpb25Db3VudGVyID0gdHJhbnNhY3Rpb25Db3VudGVyICsgMTsKICAgICAgICByZXR1cm4gdmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkQ3VycmVuY3kodWludCBjdXJyZW5jeSkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBBbW91bnREYXRhIHN0b3JhZ2UgYW1vdW50RGF0YSA9IGFtb3VudHNCeUN1cnJlbmN5W2N1cnJlbmN5XTsKICAgICAgICBhbW91bnREYXRhLmV4aXN0cyA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJUb2tlbnNUbyhhZGRyZXNzIHRvLCB1aW50MjU2IGdpdmVuVG9rZW5zKSBwcml2YXRlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB2YXIgcHJvdmlkZWRUb2tlbnMgPSBnaXZlblRva2VuczsKICAgICAgICBpZiAoZ2l2ZW5Ub2tlbnMgPiBsZWZ0VG9rZW5zKSB7CiAgICAgICAgICAgIHByb3ZpZGVkVG9rZW5zID0gbGVmdFRva2VuczsKICAgICAgICB9CiAgICAgICAgbGVmdFRva2VucyA9IGxlZnRUb2tlbnMuc3ViKHByb3ZpZGVkVG9rZW5zKTsKICAgICAgICByZXF1aXJlKHRva2VuLm1hbnVhbFRyYW5zZmVyKHRvLCBwcm92aWRlZFRva2VucykpOwogICAgICAgIHJldHVybiBwcm92aWRlZFRva2VuczsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5pc2hDcm93ZHNhbGUoKSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShpc0ZpbmlzaGVkKCkpOwogICAgICAgIGlmIChsZWZ0VG9rZW5zID4gMCkgewogICAgICAgICAgICB0b2tlbi5idXJuKGxlZnRUb2tlbnMpOwogICAgICAgICAgICBsZWZ0VG9rZW5zID0gMDsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdGFrZUJvdW50eVRva2VucygpIGV4dGVybmFsIHJldHVybnMgKGJvb2wpewogICAgICAgIHJlcXVpcmUoaXNGaW5pc2hlZCgpKTsKICAgICAgICB1aW50MjU2IGFsbG93YW5jZSA9IGJvdW50eVRva2Vuc1RvQWRkcmVzc1ttc2cuc2VuZGVyXTsKICAgICAgICByZXF1aXJlKGFsbG93YW5jZSA+IDApOwogICAgICAgIGJvdW50eVRva2Vuc1RvQWRkcmVzc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgcmVxdWlyZSh0b2tlbi5tYW51YWxUcmFuc2Zlcihtc2cuc2VuZGVyLCBhbGxvd2FuY2UpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnaXZlVG9rZW5zVG8oYWRkcmVzcyBob2xkZXIsIHVpbnQyNTYgYW1vdW50KSBleHRlcm5hbCBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoYm91bnR5VG9rZW5BbW91bnQgPj0gZ2l2ZW5Cb3VudHlUb2tlbnMuYWRkKGFtb3VudCkpOwogICAgICAgIGJvdW50eVRva2Vuc1RvQWRkcmVzc1tob2xkZXJdID0gYm91bnR5VG9rZW5zVG9BZGRyZXNzW2hvbGRlcl0uYWRkKGFtb3VudCk7CiAgICAgICAgZ2l2ZW5Cb3VudHlUb2tlbnMgPSBnaXZlbkJvdW50eVRva2Vucy5hZGQoYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRBbW91bnRCeUN1cnJlbmN5KHVpbnQgaW5kZXgpIGV4dGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBBbW91bnREYXRhIG1lbW9yeSB0ZW1wQW1vdW50RGF0YSA9IGFtb3VudHNCeUN1cnJlbmN5W2luZGV4XTsKICAgICAgICByZXR1cm4gdGVtcEFtb3VudERhdGEudmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXcoKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlci5jYWxsLmdhcygzMDAwMDAwKS52YWx1ZSh0aGlzLmJhbGFuY2UpKCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEFtb3VudEZvckRlYWwodWludDI1NiB2YWx1ZSkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBtaW5BbW91bnRGb3JEZWFsID0gdmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdBbW91bnQodWludDI1NiBhbW91bnQpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgdWludDI1NiBnaXZlbkFtb3VudCA9IGFtb3VudDsKICAgICAgICBpZiAodGhpcy5iYWxhbmNlIDwgYW1vdW50KSB7CiAgICAgICAgICAgIGdpdmVuQW1vdW50ID0gdGhpcy5iYWxhbmNlOwogICAgICAgIH0KICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIuY2FsbC5nYXMoMzAwMDAwMCkudmFsdWUoZ2l2ZW5BbW91bnQpKCkpOwogICAgfQp9'.
	

]
