Class {
	#name : #SRT7338809d1a2c6fbb6e755470ab2a28e8c5dac63c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7338809d1a2c6fbb6e755470ab2a28e8c5dac63c >> base64 [
	^ 'LyoKZmlsZTogICBPWlJlYWxlc3RhdGVzVG9rZW4uc29sCnZlcjogICAgMC4xLjAKbW9kaWZpZXI6IENocmlzIEt3YW4KZGF0ZTogICAyNi1BdWctMjAxNwplbWFpbDogIGVjb3JwbnUgQVQgZ21haWwuY29tCihBZGFwdGVkIGZyb20gVmVudGFuYVRva2VuLnNvbCBieSBEYXJyeWwgTW9ycmlzKQoKQSBjb2xsYXRlZCBjb250cmFjdCBzZXQgZm9yIGEgdG9rZW4gc2FsZSBzcGVjaWZpYyB0byB0aGUgcmVxdWlybWVudHMgb2YKT3pyZWFsJ3MgT1pSZWFsZXN0YXRlcyB0b2tlbiBwcm9kdWN0LgoKVGhpcyBzb2Z0d2FyZSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLApidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgpNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICAKU2VlIE1JVCBMaWNlbmNlIGZvciBmdXJ0aGVyIGRldGFpbHMuCjxodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVD4uCgoqLwoKCnByYWdtYSBzb2xpZGl0eSBeMC40LjEzOwoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwKCiBPWlJlYWxlc3RhdGVzIHRva2VuIHNhbGUgY29uZmlndXJhdGlvbgoKXCotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCi8vIENvbnRhaW5zIHRva2VuIHNhbGUgcGFyYW1ldGVycwpjb250cmFjdCBPWlJlYWxlc3RhdGVzVG9rZW5Db25maWcKewogICAgLy8gRVJDMjAgdHJhZGUgbmFtZSBhbmQgc3ltYm9sCiAgICBzdHJpbmcgcHVibGljICAgICAgICAgICBuYW1lICAgICAgICAgICAgPSAiT1pSZWFsZXN0YXRlcyI7CiAgICBzdHJpbmcgcHVibGljICAgICAgICAgICBzeW1ib2wgICAgICAgICAgPSAiT1pSIjsKCiAgICAvLyBPd25lciBoYXMgcG93ZXIgdG8gYWJvcnQsIGRpc2NvdW50IGFkZHJlc3Nlcywgc3dlZXAgc3VjY2Vzc2Z1bCBmdW5kcywKICAgIC8vIGNoYW5nZSBvd25lciwgc3dlZXAgYWxpZW4gdG9rZW5zLgogICAgYWRkcmVzcyBwdWJsaWMgICAgICAgICAgb3duZXIgICAgICAgICAgID0gMHhCMzUzY0Y0MUEwQ0FhMzhENjU5N0E3YTEzMzdkZWJmMGIwOWRkOGFlOyAvLyBPWlJQcmltYXJ5IGFkZHJlc3MgY2hlY2tzdW1tZWQKICAgIAogICAgLy8gRnVuZCB3YWxsZXQgc2hvdWxkIGFsc28gYmUgYXVkaXRlZCBwcmlvciB0byBkZXBsb3ltZW50CiAgICAvLyBOT1RFOiBNdXN0IGJlIGNoZWNrc3VtbWVkIGFkZHJlc3MhCiAgICBhZGRyZXNzIHB1YmxpYyAgICAgICAgICBmdW5kV2FsbGV0ICAgICAgPSAweEU0QmUzMTU3REJENzFBY2Q3QWQ1NjY3ZGIwMEFBMTExQzAwODgxOTU7IC8vIG11bHRpU2lnIGFkZHJlc3MgY2hlY2tzdW1tZWQKCiAgICAvLyBUb2tlbnMgYXdhcmRlZCBwZXIgVVNEIGNvbnRyaWJ1dGVkCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCAgICBUT0tFTlNfUEVSX1VTRCAgPSAxOwoKICAgIC8vIEV0aGVyIG1hcmtldCBwcmljZSBpbiBVU0QKICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIFVTRF9QRVJfRVRIICAgICA9IDM3NjsgLy8gYXBwcm94IDcgZGF5IGF2ZXJhZ2UgSGlnaCBMb3cgYXMgYXQgMzB0aCBBdWd1c3QgMjAxNwogICAgCiAgICAvLyBNaW5pbXVtIGFuZCBtYXhpbXVtIHRhcmdldCBpbiBVU0QKICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIE1JTl9VU0RfRlVORCAgICA9IDE7ICAvLyAkMQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgICAgTUFYX1VTRF9GVU5EICAgID0gMjAwMDAwMDsgLy8gJDJtCiAgICAKICAgIC8vIE5vbi1LWUMgY29udHJpYnV0aW9uIGxpbWl0IGluIFVTRAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgICAgS1lDX1VTRF9MTVQgICAgID0gNTAwMDA7CiAgICAKICAgIC8vIFRoZXJlIHdpbGwgYmUgZXhhY3RseSAxMDAsMDAwLDAwMCB0b2tlbnMgcmVnYXJkbGVzcyBvZiBudW1iZXIgc29sZAogICAgLy8gVW5zb2xkIHRva2VucyBhcmUgcHV0IGludG8gdGhlIFN0cmF0ZWdpYyBHcm93dGggdG9rZW4gcG9vbAogICAgdWludCBwdWJsaWMgY29uc3RhbnQgICAgTUFYX1RPS0VOUyAgICAgID0gMTAwMDAwMDAwOwogICAgCiAgICAvLyBGdW5kaW5nIGJlZ2lucyBvbiAzMXRoIEF1Z3VzdCAyMDE3CiAgICAKICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIFNUQVJUX0RBVEUgICAgICA9IDE1MDQxMzc2MDA7IC8vIDMxLjguMjAxNyAxMCBBTSBTeWRuZXkgVGltZQoKICAgIC8vIFBlcmlvZCBmb3IgZnVuZHJhaXNpbmcKICAgIHVpbnQgcHVibGljIGNvbnN0YW50ICAgIEZVTkRJTkdfUEVSSU9EICA9IDQwIGRheXM7Cn0KCgpsaWJyYXJ5IFNhZmVNYXRoCnsKICAgIC8vIGEgYWRkIHRvIGIKICAgIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgfQogICAgCiAgICAvLyBhIHN1YnRyYWN0IGIKICAgIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgYyA9IGEgLSBiOwogICAgICAgIGFzc2VydChjIDw9IGEpOwogICAgfQogICAgCiAgICAvLyBhIG11bHRpcGxpZWQgYnkgYgogICAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIH0KICAgIAogICAgLy8gYSBkaXZpZGVkIGJ5IGIKICAgIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCBjKSB7CiAgICAgICAgYyA9IGEgLyBiOwogICAgICAgIC8vIE5vIGFzc2VydCByZXF1aXJlZCBhcyBubyBvdmVyZmxvd3MgYXJlIHBvc2libGUuCiAgICB9Cn0KCgpjb250cmFjdCBSZWVudHJ5UHJvdGVjdGVkCnsKICAgIC8vIFRoZSByZWVudHJ5IHByb3RlY3Rpb24gc3RhdGUgbXV0ZXguCiAgICBib29sIF9fcmVNdXRleDsKCiAgICAvLyBTZXRzIGFuZCByZXNldHMgbXV0ZXggaW4gb3JkZXIgdG8gYmxvY2sgZnVuY3RpbiByZWVudHJ5CiAgICBtb2RpZmllciBwcmV2ZW50UmVlbnRyeSgpIHsKICAgICAgICByZXF1aXJlKCFfX3JlTXV0ZXgpOwogICAgICAgIF9fcmVNdXRleCA9IHRydWU7CiAgICAgICAgXzsKICAgICAgICBkZWxldGUgX19yZU11dGV4OwogICAgfQoKICAgIC8vIEJsb2NrcyBmdW5jdGlvbiBlbnRyeSBpZiBtdXRleCBpcyBzZXQKICAgIG1vZGlmaWVyIG5vUmVlbnRyeSgpIHsKICAgICAgICByZXF1aXJlKCFfX3JlTXV0ZXgpOwogICAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IEVSQzIwVG9rZW4KewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgovKiBDb25zdGFudHMgKi8KCiAgICAvLyBub25lCiAgICAKLyogU3RhdGUgdmFyaWFibGUgKi8KCiAgICAvLy8gQHJldHVybiBUaGUgVG90YWwgc3VwcGx5IG9mIHRva2VucwogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICAKICAgIC8vLyBAcmV0dXJuIFRva2VuIHN5bWJvbAogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICAKICAgIC8vIFRva2VuIG93bmVyc2hpcCBtYXBwaW5nCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogICAgCiAgICAvLyBBbGxvd2FuY2VzIG1hcHBpbmcKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCi8qIEV2ZW50cyAqLwoKICAgIC8vIFRyaWdnZXJlZCB3aGVuIHRva2VucyBhcmUgdHJhbnNmZXJyZWQuCiAgICBldmVudCBUcmFuc2ZlcigKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgX2Zyb20sCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIF90bywKICAgICAgICB1aW50MjU2IF9hbW91bnQpOwoKICAgIC8vIFRyaWdnZXJlZCB3aGVuZXZlciBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkgaXMgY2FsbGVkLgogICAgZXZlbnQgQXBwcm92YWwoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIF9vd25lciwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsCiAgICAgICAgdWludDI1NiBfYW1vdW50KTsKCi8qIE1vZGlmaWVycyAqLwoKICAgIC8vIG5vbmUKICAgIAovKiBGdW5jdGlvbnMgKi8KCiAgICAvLyBVc2luZyBhbiBleHBsaWNpdCBnZXR0ZXIgYWxsb3dzIGZvciBmdW5jdGlvbiBvdmVybG9hZGluZyAgICAKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9hZGRyKQogICAgICAgIHB1YmxpYwogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAodWludCkKICAgIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX2FkZHJdOwogICAgfQogICAgCiAgICAvLyBVc2luZyBhbiBleHBsaWNpdCBnZXR0ZXIgYWxsb3dzIGZvciBmdW5jdGlvbiBvdmVybG9hZGluZyAgICAKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikKICAgICAgICBwdWJsaWMKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyB0byBhZGRyZXNzIF90bwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiB4ZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7CiAgICB9CgogICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShfYW1vdW50IDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKICAgICAgICAKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsKICAgICAgICByZXR1cm4geGZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgIH0KCiAgICAvLyBQcm9jZXNzIGEgdHJhbnNmZXIgaW50ZXJuYWxseS4KICAgIGZ1bmN0aW9uIHhmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShfYW1vdW50IDw9IGJhbGFuY2VzW19mcm9tXSk7CgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgICAgIAogICAgICAgIC8vIGF2b2lkIHdhc3RpbmcgZ2FzIG9uIDAgdG9rZW4gdHJhbnNmZXJzCiAgICAgICAgaWYoX2Ftb3VudCA9PSAwKSByZXR1cm4gdHJ1ZTsKICAgICAgICAKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VzW190b10gICA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEFwcHJvdmVzIGEgdGhpcmQtcGFydHkgc3BlbmRlcgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgoKCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cCgojIyBDb25kaXRpb25hbCBFbnRyeSBUYWJsZQoKRnVuY3Rpb25zIG11c3QgdGhyb3cgb24gRiBjb25kaXRpb25zCgpDb25kaXRpb25hbCBFbnRyeSBUYWJsZSAoZnVuY3Rpb25zIG11c3QgdGhyb3cgb24gRiBjb25kaXRpb25zKQoKcmVuZXRyeSBwcmV2ZW50aW9uIG9uIGFsbCBwdWJsaWMgbXV0YXRpbmcgZnVuY3Rpb25zClJlZW50cnkgbXV0ZXggc2V0IGluIG1vdmVGdW5kc1RvV2FsbGV0KCksIHJlZnVuZCgpCgp8ZnVuY3Rpb24gICAgICAgICAgICAgICAgfDxTVEFSVF9EQVRFfDxFTkRfREFURSB8ZnVuZEZhaWxlZCAgfGZ1bmRTdWNjZWVkZWR8aWNvU3VjY2VlZGVkCnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18Oi0tLS0tLS0tLTp8Oi0tLS0tLS0tOnw6LS0tLS0tLS0tLTp8Oi0tLS0tLS0tLS0tOnw6LS0tLS0tLS0tOnwKfCgpICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxLWUMgICAgICAgIHxUICAgICAgICAgfEYgICAgICAgICAgIHxUICAgICAgICAgICAgfEYgICAgICAgICAgfAp8YWJvcnQoKSAgICAgICAgICAgICAgICAgfFQgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICAgfFQgICAgICAgICAgICB8RiAgICAgICAgICB8Cnxwcm94eVB1cmNoYXNlKCkgICAgICAgICB8S1lDICAgICAgICB8VCAgICAgICAgIHxGICAgICAgICAgICB8VCAgICAgICAgICAgIHxGICAgICAgICAgIHwKfGFkZEt5Y0FkZHJlc3MoKSAgICAgICAgIHxUICAgICAgICAgIHxUICAgICAgICAgfEYgICAgICAgICAgIHxUICAgICAgICAgICAgfFQgICAgICAgICAgfAp8ZmluYWxpc2VJQ08oKSAgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8RiAgICAgICAgICAgfFQgICAgICAgICAgICB8VCAgICAgICAgICB8CnxyZWZ1bmQoKSAgICAgICAgICAgICAgICB8RiAgICAgICAgICB8RiAgICAgICAgIHxUICAgICAgICAgICB8RiAgICAgICAgICAgIHxGICAgICAgICAgIHwKfHRyYW5zZmVyKCkgICAgICAgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfEYgICAgICAgICAgIHxGICAgICAgICAgICAgfFQgICAgICAgICAgfAp8dHJhbnNmZXJGcm9tKCkgICAgICAgICAgfEYgICAgICAgICAgfEYgICAgICAgICB8RiAgICAgICAgICAgfEYgICAgICAgICAgICB8VCAgICAgICAgICB8CnxhcHByb3ZlKCkgICAgICAgICAgICAgICB8RiAgICAgICAgICB8RiAgICAgICAgIHxGICAgICAgICAgICB8RiAgICAgICAgICAgIHxUICAgICAgICAgIHwKfGNoYW5nZU93bmVyKCkgICAgICAgICAgIHxUICAgICAgICAgIHxUICAgICAgICAgfFQgICAgICAgICAgIHxUICAgICAgICAgICAgfFQgICAgICAgICAgfAp8YWNjZXB0T3duZXJzaGlwKCkgICAgICAgfFQgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICAgfFQgICAgICAgICAgICB8VCAgICAgICAgICB8CnxjaGFuZ2VPenJlYWwoKSAgICAgICAgICB8VCAgICAgICAgICB8VCAgICAgICAgIHxUICAgICAgICAgICB8VCAgICAgICAgICAgIHxUICAgICAgICAgIHwKfGRlc3Ryb3koKSAgICAgICAgICAgICAgIHxGICAgICAgICAgIHxGICAgICAgICAgfCFfX2Fib3J0RnVzZXxGICAgICAgICAgICAgfEYgICAgICAgICAgfAp8dHJhbnNmZXJBbnlFUkMyMFRva2VucygpfFQgICAgICAgICAgfFQgICAgICAgICB8VCAgICAgICAgICAgfFQgICAgICAgICAgICB8VCAgICAgICAgICB8CgpcKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKY29udHJhY3QgT1pSZWFsZXN0YXRlc1Rva2VuQWJzdHJhY3QKewovLyBUT0RPIGNvbW1lbnQgZXZlbnRzCiAgICBldmVudCBLWUNBZGRyZXNzKGFkZHJlc3MgaW5kZXhlZCBfYWRkciwgYm9vbCBpbmRleGVkIF9reWMpOwogICAgZXZlbnQgUmVmdW5kZWQoYWRkcmVzcyBpbmRleGVkIF9hZGRyLCB1aW50IGluZGV4ZWQgX3ZhbHVlKTsKICAgIGV2ZW50IENoYW5nZWRPd25lcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8pOwogICAgZXZlbnQgQ2hhbmdlT3duZXJUbyhhZGRyZXNzIGluZGV4ZWQgX3RvKTsKICAgIGV2ZW50IEZ1bmRzVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIF93YWxsZXQsIHVpbnQgaW5kZXhlZCBfdmFsdWUpOwoKICAgIC8vIFRoaXMgZnVzZSBibG93cyB1cG9uIGNhbGxpbmcgYWJvcnQoKSB3aGljaCBmb3JjZXMgYSBmYWlsIHN0YXRlCiAgICBib29sIHB1YmxpYyBfX2Fib3J0RnVzZSA9IHRydWU7CiAgICAKICAgIC8vIFNldCB0byB0cnVlIGFmdGVyIHRoZSBmdW5kIGlzIHN3ZXB0IHRvIHRoZSBmdW5kIHdhbGxldCwgYWxsb3dzIHRva2VuCiAgICAvLyB0cmFuc2ZlcnMgYW5kIHByZXZlbnRzIGFib3J0KCkKICAgIGJvb2wgcHVibGljIGljb1N1Y2Nlc3NmdWw7CgogICAgLy8gVG9rZW4gY29udmVyc2lvbiBmYWN0b3JzIGFyZSBjYWxjdWxhdGVkIHdpdGggZGVjaW1hbCBwbGFjZXMgYXQgcGFyaXR5IHdpdGggZXRoZXIKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIC8vIEFuIGFkZHJlc3MgYXV0aG9yaXNlZCB0byB0YWtlIG93bmVyc2hpcAogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CiAgICAKICAgIC8vIFRoZSBPenJlYWwgc21hcnQgY29udHJhY3QgYWRkcmVzcwogICAgYWRkcmVzcyBwdWJsaWMgT3pyZWFsOwogICAgCiAgICAvLyBUb3RhbCBldGhlciByYWlzZWQgZHVyaW5nIGZ1bmRpbmcKICAgIHVpbnQgcHVibGljIGV0aGVyUmFpc2VkOwogICAgCiAgICAvLyBQcmVhdXRob3JpemVkIHRyYW5jaCBkaXNjb3VudCBhZGRyZXNzZXMKICAgIC8vIGhvbGRlciA9PiBkaXNjb3VudAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMga3ljQWRkcmVzc2VzOwogICAgCiAgICAvLyBSZWNvcmQgb2YgZXRoZXIgcGFpZCBwZXIgYWRkcmVzcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgZXRoZXJDb250cmlidXRlZDsKCiAgICAvLyBSZXR1cm4gYHRydWVgIGlmIE1JTl9GVU5EUyB3ZXJlIHJhaXNlZAogICAgZnVuY3Rpb24gZnVuZFN1Y2NlZWRlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKTsKICAgIAogICAgLy8gUmV0dXJuIGB0cnVlYCBpZiBNSU5fRlVORFMgd2VyZSBub3QgcmFpc2VkIGJlZm9yZSBFTkRfREFURQogICAgZnVuY3Rpb24gZnVuZEZhaWxlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKTsKCiAgICAvLyBSZXR1cm5zIFVTRCByYWlzZWQgZm9yIHNldCBFVEgvVVNEIHJhdGUKICAgIGZ1bmN0aW9uIHVzZFJhaXNlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgICAvLyBSZXR1cm5zIGFuIGFtb3VudCBpbiBldGggZXF1aXZpbGVudCB0byBVU0QgYXQgdGhlIHNldCByYXRlCiAgICBmdW5jdGlvbiB1c2RUb0V0aCh1aW50KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50KTsKICAgIAogICAgLy8gUmV0dXJucyB0aGUgVVNEIHZhbHVlIG9mIGV0aGVyIGF0IHRoZSBzZXQgVVNEL0VUSCByYXRlCiAgICBmdW5jdGlvbiBldGhUb1VzZCh1aW50IF93ZWkpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgICAvLyBSZXR1cm5zIHRva2VuL2V0aGVyIGNvbnZlcnNpb24gZ2l2ZW4gZXRoZXIgdmFsdWUgYW5kIGFkZHJlc3MuIAogICAgZnVuY3Rpb24gZXRoVG9Ub2tlbnModWludCBfZXRoKQogICAgICAgIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgICAvLyBQcm9jZXNzZXMgYSB0b2tlbiBwdXJjaGFzZSBmb3IgYSBnaXZlbiBhZGRyZXNzCiAgICBmdW5jdGlvbiBwcm94eVB1cmNoYXNlKGFkZHJlc3MgX2FkZHIpIHBheWFibGUgcmV0dXJucyAoYm9vbCk7CgogICAgLy8gT3duZXIgY2FuIG1vdmUgZnVuZHMgb2Ygc3VjY2Vzc2Z1bCBmdW5kIHRvIGZ1bmRXYWxsZXQgCiAgICBmdW5jdGlvbiBmaW5hbGlzZUlDTygpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIAogICAgLy8gUmVnaXN0ZXJzIGEgZGlzY291bnRlZCBhZGRyZXNzCiAgICBmdW5jdGlvbiBhZGRLeWNBZGRyZXNzKGFkZHJlc3MgX2FkZHIsIGJvb2wgX2t5YykKICAgICAgICBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgLy8gUmVmdW5kIG9uIGZhaWxlZCBvciBhYm9ydGVkIHNhbGUgCiAgICBmdW5jdGlvbiByZWZ1bmQoYWRkcmVzcyBfYWRkcikgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIC8vIFRvIGNhbmNlbCB0b2tlbiBzYWxlIHByaW9yIHRvIFNUQVJUX0RBVEUKICAgIGZ1bmN0aW9uIGFib3J0KCkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgCiAgICAvLyBDaGFuZ2UgdGhlIE96cmVhbCBiYWNrZW5kIGNvbnRyYWN0IGFkZHJlc3MKICAgIGZ1bmN0aW9uIGNoYW5nZU96cmVhbChhZGRyZXNzIF9hZGRyKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICAKICAgIC8vIEZvciBvd25lciB0byBzYWx2YWdlIHRva2VucyBzZW50IHRvIGNvbnRyYWN0CiAgICBmdW5jdGlvbiB0cmFuc2ZlckFueUVSQzIwVG9rZW4oYWRkcmVzcyB0b2tlbkFkZHJlc3MsIHVpbnQgYW1vdW50KQogICAgICAgIHJldHVybnMgKGJvb2wpOwp9CgoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwKCiBPWlJlYWxlc3RhdGVzIHRva2VuIGltcGxpbWVudGF0aW9uCgpcKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKY29udHJhY3QgT1pSZWFsZXN0YXRlc1Rva2VuIGlzIAogICAgUmVlbnRyeVByb3RlY3RlZCwKICAgIEVSQzIwVG9rZW4sCiAgICBPWlJlYWxlc3RhdGVzVG9rZW5BYnN0cmFjdCwKICAgIE9aUmVhbGVzdGF0ZXNUb2tlbkNvbmZpZwp7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCi8vCi8vIENvbnN0YW50cwovLwoKICAgIC8vIFVTRCB0byBldGhlciBjb252ZXJzaW9uIGZhY3RvcnMgY2FsY3VsYXRlZCBmcm9tIGBPWlJlYWxlc3RhdGVzVG9rZW5Db25maWdgIGNvbnN0YW50cyAKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19QRVJfRVRIID0gVE9LRU5TX1BFUl9VU0QgKiBVU0RfUEVSX0VUSDsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9FVEhfRlVORCAgID0gMSBldGhlciAqIE1JTl9VU0RfRlVORCAvIFVTRF9QRVJfRVRIOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTUFYX0VUSF9GVU5EICAgPSAxIGV0aGVyICogTUFYX1VTRF9GVU5EIC8gVVNEX1BFUl9FVEg7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBLWUNfRVRIX0xNVCAgICA9IDEgZXRoZXIgKiBLWUNfVVNEX0xNVCAgLyBVU0RfUEVSX0VUSDsKCiAgICAvLyBHZW5lcmFsIGZ1bmRpbmcgb3BlbnMgTEVBRF9JTl9QRVJJT0QgYWZ0ZXIgZGVwbG95bWVudCAodGltZXN0YW1wcyBjYW4ndCBiZSBjb25zdGFudCkKICAgIHVpbnQgcHVibGljIEVORF9EQVRFICA9IFNUQVJUX0RBVEUgKyBGVU5ESU5HX1BFUklPRDsKCi8vCi8vIE1vZGlmaWVycwovLwoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKLy8KLy8gRnVuY3Rpb25zCi8vCgogICAgLy8gQ29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIE9aUmVhbGVzdGF0ZXNUb2tlbigpCiAgICB7CiAgICAgICAgLy8gSUNPIHBhcmFtZXRlcnMgYXJlIHNldCBpbiBPWlJlYWxlc3RhdGVzVFNDb25maWcKICAgICAgICAvLyBJbnZhbGlkIGNvbmZpZ3VyYXRpb24gY2F0Y2hpbmcgaGVyZQogICAgICAgIHJlcXVpcmUoYnl0ZXMoc3ltYm9sKS5sZW5ndGggPiAwKTsKICAgICAgICByZXF1aXJlKGJ5dGVzKG5hbWUpLmxlbmd0aCA+IDApOwogICAgICAgIHJlcXVpcmUob3duZXIgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKGZ1bmRXYWxsZXQgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKFRPS0VOU19QRVJfVVNEID4gMCk7CiAgICAgICAgcmVxdWlyZShVU0RfUEVSX0VUSCA+IDApOwogICAgICAgIHJlcXVpcmUoTUlOX1VTRF9GVU5EID4gMCk7CiAgICAgICAgcmVxdWlyZShNQVhfVVNEX0ZVTkQgPiBNSU5fVVNEX0ZVTkQpOwogICAgICAgIHJlcXVpcmUoU1RBUlRfREFURSA+IDApOwogICAgICAgIHJlcXVpcmUoRlVORElOR19QRVJJT0QgPiAwKTsKICAgICAgICAKICAgICAgICAvLyBTZXR1cCBhbmQgYWxsb2NhdGUgdG9rZW4gc3VwcGx5IHRvIDE4IGRlY2ltYWwgcGxhY2VzCiAgICAgICAgdG90YWxTdXBwbHkgPSBNQVhfVE9LRU5TICogMWUxODsKICAgICAgICBiYWxhbmNlc1tmdW5kV2FsbGV0XSA9IHRvdGFsU3VwcGx5OwogICAgICAgIFRyYW5zZmVyKDB4MCwgZnVuZFdhbGxldCwgdG90YWxTdXBwbHkpOwogICAgfQogICAgCiAgICAvLyBEZWZhdWx0IGZ1bmN0aW9uCiAgICBmdW5jdGlvbiAoKQogICAgICAgIHBheWFibGUKICAgIHsKICAgICAgICAvLyBQYXNzIHRocm91Z2ggdG8gcHVyY2hhc2luZyBmdW5jdGlvbi4gV2lsbCB0aHJvdyBvbiBmYWlsZWQgb3IKICAgICAgICAvLyBzdWNjZXNzZnVsIElDTwogICAgICAgIHByb3h5UHVyY2hhc2UobXNnLnNlbmRlcik7CiAgICB9CgovLwovLyBHZXR0ZXJzCi8vCgogICAgLy8gSUNPIGZhaWxzIGlmIGFib3J0ZWQgb3IgbWluaW11bSBmdW5kcyBhcmUgbm90IHJhaXNlZCBieSB0aGUgZW5kIGRhdGUKICAgIGZ1bmN0aW9uIGZ1bmRGYWlsZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gIV9fYWJvcnRGdXNlCiAgICAgICAgICAgIHx8IChub3cgPiBFTkRfREFURSAmJiBldGhlclJhaXNlZCA8IE1JTl9FVEhfRlVORCk7CiAgICB9CiAgICAKICAgIC8vIEZ1bmRpbmcgc3VjY2VlZHMgaWYgbm90IGFib3J0ZWQsIG1pbmltdW0gZnVuZHMgYXJlIHJhaXNlZCBiZWZvcmUgZW5kIGRhdGUKICAgIGZ1bmN0aW9uIGZ1bmRTdWNjZWVkZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gIWZ1bmRGYWlsZWQoKQogICAgICAgICAgICAmJiBldGhlclJhaXNlZCA+PSBNSU5fRVRIX0ZVTkQ7CiAgICB9CgogICAgLy8gUmV0dXJucyB0aGUgVVNEIHZhbHVlIG9mIGV0aGVyIGF0IHRoZSBzZXQgVVNEL0VUSCByYXRlCiAgICBmdW5jdGlvbiBldGhUb1VzZCh1aW50IF93ZWkpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHJldHVybiBVU0RfUEVSX0VUSC5tdWwoX3dlaSkuZGl2KDEgZXRoZXIpOwogICAgfQogICAgCiAgICAvLyBSZXR1cm5zIHRoZSBldGhlciB2YWx1ZSBvZiBVU0QgYXQgdGhlIHNldCBVU0QvRVRIIHJhdGUKICAgIGZ1bmN0aW9uIHVzZFRvRXRoKHVpbnQgX3VzZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIF91c2QubXVsKDEgZXRoZXIpLmRpdihVU0RfUEVSX0VUSCk7CiAgICB9CiAgICAKICAgIC8vIFJldHVybnMgdGhlIFVTRCB2YWx1ZSBvZiBldGhlciByYWlzZWQgYXQgdGhlIHNldCBVU0QvRVRIIHJhdGUKICAgIGZ1bmN0aW9uIHVzZFJhaXNlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KQogICAgewogICAgICAgIHJldHVybiBldGhUb1VzZChldGhlclJhaXNlZCk7CiAgICB9CiAgICAKICAgIC8vIFJldHVybnMgdGhlIG51bWJlciBvZiB0b2tlbnMgZm9yIGdpdmVuIGFtb3VudCBvZiBldGhlciBmb3IgYW4gYWRkcmVzcyAKICAgIGZ1bmN0aW9uIGV0aFRvVG9rZW5zKHVpbnQgX3dlaSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgdWludCB1c2QgPSBldGhUb1VzZChfd2VpKTsKICAgICAgICAKICAgICAgICAvLyBQZXJjZW50IGJvbnVzIGZ1bmRpbmcgdGllcnMgZm9yIFVTRCBmdW5kaW5nCiAgICAgICAgdWludCBib251cyA9CiAgICAvLyAgICAgICAgdXNkID49IDIwMDAwMDAgPyAzNSA6CiAgICAvLyAgICAgICAgdXNkID49IDUwMDAwMCAgPyAzMCA6CiAgICAvLyAgICAgICAgdXNkID49IDEwMDAwMCAgPyAyMCA6CiAgICAvLyAgICAgICAgdXNkID49IDI1MDAwICAgPyAxNSA6CiAgICAvLyAgICAgICAgdXNkID49IDEwMDAwICAgPyAxMCA6CiAgICAvLyAgICAgICAgdXNkID49IDUwMDAgICAgPyA1ICA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDsgIAogICAgICAgIAogICAgICAgIC8vIHVzaW5nIG4uMiBmaXhlZCBwb2ludCBkZWNpbWFsIGZvciB3aG9sZSBudW1iZXIgcGVyY2VudGFnZS4KICAgICAgICByZXR1cm4gX3dlaS5tdWwoVE9LRU5TX1BFUl9FVEgpLm11bChib251cyArIDEwMCkuZGl2KDEwMCk7CiAgICB9CgovLwovLyBJQ08gZnVuY3Rpb25zCi8vCgogICAgLy8gVGhlIGZ1bmRyYWlzaW5nIGNhbiBiZSBhYm9ydGVkIGFueSB0aW1lIGJlZm9yZSBmdW5kcyBhcmUgc3dlcHQgdG8gdGhlCiAgICAvLyBmdW5kV2FsbGV0LgogICAgLy8gVGhpcyB3aWxsIGZvcmNlIGEgZmFpbCBzdGF0ZSBhbmQgYWxsb3cgcmVmdW5kcyB0byBiZSBjb2xsZWN0ZWQuCiAgICBmdW5jdGlvbiBhYm9ydCgpCiAgICAgICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgb25seU93bmVyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKCFpY29TdWNjZXNzZnVsKTsKICAgICAgICBkZWxldGUgX19hYm9ydEZ1c2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIEdlbmVyYWwgYWRkcmVzc2VzIGNhbiBwdXJjaGFzZSB0b2tlbnMgZHVyaW5nIGZ1bmRpbmcKICAgIGZ1bmN0aW9uIHByb3h5UHVyY2hhc2UoYWRkcmVzcyBfYWRkcikKICAgICAgICBwYXlhYmxlCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXF1aXJlKCFmdW5kRmFpbGVkKCkpOwogICAgICAgIHJlcXVpcmUoIWljb1N1Y2Nlc3NmdWwpOwogICAgICAgIHJlcXVpcmUobm93IDw9IEVORF9EQVRFKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwogICAgICAgIAogICAgICAgIC8vIE5vbi1LWUMnZWQgZnVuZGVycyBjYW4gb25seSBjb250cmlidXRlIHVwIHRvICQxMDAwMCBhZnRlciBwcmVmdW5kIHBlcmlvZAogICAgICAgIGlmKCFreWNBZGRyZXNzZXNbX2FkZHJdKQogICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZShub3cgPj0gU1RBUlRfREFURSk7CiAgICAgICAgICAgIHJlcXVpcmUoKGV0aGVyQ29udHJpYnV0ZWRbX2FkZHJdLmFkZChtc2cudmFsdWUpKSA8PSBLWUNfRVRIX0xNVCk7CiAgICAgICAgfQoKICAgICAgICAvLyBHZXQgZXRoZXIgdG8gdG9rZW4gY29udmVyc2lvbgogICAgICAgIHVpbnQgdG9rZW5zID0gZXRoVG9Ub2tlbnMobXNnLnZhbHVlKTsKICAgICAgICAKICAgICAgICAvLyB0cmFuc2ZlciB0b2tlbnMgZnJvbSBmdW5kIHdhbGxldAogICAgICAgIHhmZXIoZnVuZFdhbGxldCwgX2FkZHIsIHRva2Vucyk7CiAgICAgICAgCiAgICAgICAgLy8gVXBkYXRlIGhvbGRlciBwYXltZW50cwogICAgICAgIGV0aGVyQ29udHJpYnV0ZWRbX2FkZHJdID0gZXRoZXJDb250cmlidXRlZFtfYWRkcl0uYWRkKG1zZy52YWx1ZSk7CiAgICAgICAgCiAgICAgICAgLy8gVXBkYXRlIGZ1bmRzIHJhaXNlZAogICAgICAgIGV0aGVyUmFpc2VkID0gZXRoZXJSYWlzZWQuYWRkKG1zZy52YWx1ZSk7CiAgICAgICAgCiAgICAgICAgLy8gQmFpbCBpZiB0aGlzIHB1c2hlcyB0aGUgZnVuZCBvdmVyIHRoZSBVU0QgY2FwIG9yIFRva2VuIGNhcAogICAgICAgIHJlcXVpcmUoZXRoZXJSYWlzZWQgPD0gTUFYX0VUSF9GVU5EKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIE93bmVyIGNhbiBLWUMgKG9yIHJldm9rZSkgYWRkcmVzc2VzIHVudGlsIGNsb3NlIG9mIGZ1bmRpbmcKICAgIGZ1bmN0aW9uIGFkZEt5Y0FkZHJlc3MoYWRkcmVzcyBfYWRkciwgYm9vbCBfa3ljKQogICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgb25seU93bmVyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgIHJlcXVpcmUoIWZ1bmRGYWlsZWQoKSk7CgogICAgICAgIGt5Y0FkZHJlc3Nlc1tfYWRkcl0gPSBfa3ljOwogICAgICAgIEtZQ0FkZHJlc3MoX2FkZHIsIF9reWMpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gT3duZXIgY2FuIHN3ZWVwIGEgc3VjY2Vzc2Z1bCBmdW5kaW5nIHRvIHRoZSBmdW5kV2FsbGV0CiAgICAvLyBDb250cmFjdCBjYW4gYmUgYWJvcnRlZCB1cCB1bnRpbCB0aGlzIGFjdGlvbi4KICAgIAogICAgZnVuY3Rpb24gZmluYWxpc2VJQ08oKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgICAgIHByZXZlbnRSZWVudHJ5KCkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoZnVuZFN1Y2NlZWRlZCgpKTsKCiAgICAgICAgaWNvU3VjY2Vzc2Z1bCA9IHRydWU7CgogICAgICAgIEZ1bmRzVHJhbnNmZXJyZWQoZnVuZFdhbGxldCwgdGhpcy5iYWxhbmNlKTsKICAgICAgICBmdW5kV2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIFJlZnVuZHMgY2FuIGJlIGNsYWltZWQgZnJvbSBhIGZhaWxlZCBJQ08KICAgIGZ1bmN0aW9uIHJlZnVuZChhZGRyZXNzIF9hZGRyKQogICAgICAgIHB1YmxpYwogICAgICAgIHByZXZlbnRSZWVudHJ5KCkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUoZnVuZEZhaWxlZCgpKTsKICAgICAgICAKICAgICAgICB1aW50IHZhbHVlID0gZXRoZXJDb250cmlidXRlZFtfYWRkcl07CgogICAgICAgIC8vIFRyYW5zZmVyIHRva2VucyBiYWNrIHRvIG9yaWdpbgogICAgICAgIC8vIChOb3QgcmVhbGx5IG5lY2Vzc2FyeSBidXQgbG9va2luZyBmb3IgZ3JhY2VmdWwgZXhpdCkKICAgICAgICB4ZmVyKF9hZGRyLCBmdW5kV2FsbGV0LCBiYWxhbmNlc1tfYWRkcl0pOwoKICAgICAgICAvLyBnYXJiYWdlIGNvbGxlY3QKICAgICAgICBkZWxldGUgZXRoZXJDb250cmlidXRlZFtfYWRkcl07CiAgICAgICAgZGVsZXRlIGt5Y0FkZHJlc3Nlc1tfYWRkcl07CiAgICAgICAgCiAgICAgICAgUmVmdW5kZWQoX2FkZHIsIHZhbHVlKTsKICAgICAgICBpZiAodmFsdWUgPiAwKSB7CiAgICAgICAgICAgIF9hZGRyLnRyYW5zZmVyKHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgovLwovLyBFUkMyMCBvdmVybG9hZGVkIGZ1bmN0aW9ucwovLwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgcHJldmVudFJlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIC8vIElDTyBtdXN0IGJlIHN1Y2Nlc3NmdWwKICAgICAgICByZXF1aXJlKGljb1N1Y2Nlc3NmdWwpOwogICAgICAgIHN1cGVyLnRyYW5zZmVyKF90bywgX2Ftb3VudCk7CgogICAgICAgIGlmIChfdG8gPT0gT3pyZWFsKQogICAgICAgICAgICAvLyBOb3RpZnkgdGhlIE96cmVhbCBjb250cmFjdCBpdCBoYXMgYmVlbiBzZW50IHRva2VucwogICAgICAgICAgICByZXF1aXJlKE5vdGlmeShPenJlYWwpLm5vdGlmeShtc2cuc2VuZGVyLCBfYW1vdW50KSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgcHJldmVudFJlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIC8vIElDTyBtdXN0IGJlIHN1Y2Nlc3NmdWwKICAgICAgICByZXF1aXJlKGljb1N1Y2Nlc3NmdWwpOwogICAgICAgIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfYW1vdW50KTsKCiAgICAgICAgaWYgKF90byA9PSBPenJlYWwpCiAgICAgICAgICAgIC8vIE5vdGlmeSB0aGUgT3pyZWFsIGNvbnRyYWN0IGl0IGhhcyBiZWVuIHNlbnQgdG9rZW5zCiAgICAgICAgICAgIHJlcXVpcmUoTm90aWZ5KE96cmVhbCkubm90aWZ5KG1zZy5zZW5kZXIsIF9hbW91bnQpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgbm9SZWVudHJ5CiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICAvLyBJQ08gbXVzdCBiZSBzdWNjZXNzZnVsCiAgICAgICAgcmVxdWlyZShpY29TdWNjZXNzZnVsKTsKICAgICAgICBzdXBlci5hcHByb3ZlKF9zcGVuZGVyLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCi8vCi8vIENvbnRyYWN0IG1hbmFnbWVudCBmdW5jdGlvbnMKLy8KCiAgICAvLyBUbyBpbml0aWF0ZSBhbiBvd25lcnNoaXAgY2hhbmdlCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9uZXdPd25lcikKICAgICAgICBwdWJsaWMKICAgICAgICBub1JlZW50cnkKICAgICAgICBvbmx5T3duZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIENoYW5nZU93bmVyVG8oX25ld093bmVyKTsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBUbyBhY2NlcHQgb3duZXJzaGlwLiBSZXF1aXJlZCB0byBwcm92ZSBuZXcgYWRkcmVzcyBjYW4gY2FsbCB0aGUgY29udHJhY3QuCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG5ld093bmVyKTsKICAgICAgICBDaGFuZ2VkT3duZXIob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIENoYW5nZSB0aGUgYWRkcmVzcyBvZiB0aGUgT3pyZWFsIGNvbnRyYWN0IGFkZHJlc3MuIFRoZSBjb250cmFjdAogICAgLy8gbXVzdCBpbXBsaW1lbnQgdGhlIGBOb3RpZnlgIGludGVyZmFjZS4KICAgIGZ1bmN0aW9uIGNoYW5nZU96cmVhbChhZGRyZXNzIF9hZGRyKQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIG9ubHlPd25lcgogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgT3pyZWFsID0gX2FkZHI7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIFRoZSBjb250cmFjdCBjYW4gYmUgc2VsZmRlc3RydWN0ZWQgYWZ0ZXIgYWJvcnQgYW5kIGV0aGVyIGJhbGFuY2UgaXMgMC4KICAgIGZ1bmN0aW9uIGRlc3Ryb3koKQogICAgICAgIHB1YmxpYwogICAgICAgIG5vUmVlbnRyeQogICAgICAgIG9ubHlPd25lcgogICAgewogICAgICAgIHJlcXVpcmUoIV9fYWJvcnRGdXNlKTsKICAgICAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSA9PSAwKTsKICAgICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgfQogICAgCiAgICAvLyBPd25lciBjYW4gc2FsdmFnZSBFUkMyMCB0b2tlbnMgdGhhdCBtYXkgaGF2ZSBiZWVuIHNlbnQgdG8gdGhlIGFjY291bnQKICAgIGZ1bmN0aW9uIHRyYW5zZmVyQW55RVJDMjBUb2tlbihhZGRyZXNzIHRva2VuQWRkcmVzcywgdWludCBhbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICAgICAgcHJldmVudFJlZW50cnkKICAgICAgICByZXR1cm5zIChib29sKSAKICAgIHsKICAgICAgICByZXF1aXJlKEVSQzIwVG9rZW4odG9rZW5BZGRyZXNzKS50cmFuc2Zlcihvd25lciwgYW1vdW50KSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCgppbnRlcmZhY2UgTm90aWZ5CnsKICAgIGV2ZW50IE5vdGlmaWVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgdWludCBpbmRleGVkIF9hbW91bnQpOwogICAgCiAgICBmdW5jdGlvbiBub3RpZnkoYWRkcmVzcyBfZnJvbSwgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7Cn0KCgpjb250cmFjdCBPenJlYWxUZXN0IGlzIE5vdGlmeQp7CiAgICBhZGRyZXNzIHB1YmxpYyBvenI7CiAgICAKICAgIGZ1bmN0aW9uIHNldE96cihhZGRyZXNzIF9hZGRyKSB7IG96ciA9IF9hZGRyOyB9CiAgICAKICAgIGZ1bmN0aW9uIG5vdGlmeShhZGRyZXNzIF9mcm9tLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvenIpOwogICAgICAgIE5vdGlmaWVkKF9mcm9tLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ=='.
	

]
