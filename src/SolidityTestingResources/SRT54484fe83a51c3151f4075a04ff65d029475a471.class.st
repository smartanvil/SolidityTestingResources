Class {
	#name : #SRT54484fe83a51c3151f4075a04ff65d029475a471,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT54484fe83a51c3151f4075a04ff65d029475a471 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBUb2tlbiB7CgogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5ICgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KTsKCiAgZnVuY3Rpb24gYmFsYW5jZU9mIChhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgZnVuY3Rpb24gdHJhbnNmZXIgKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tIChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogIGZ1bmN0aW9uIGFwcHJvdmUgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICBmdW5jdGlvbiBhbGxvd2FuY2UgKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogIGV2ZW50IFRyYW5zZmVyIChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKCiAgZXZlbnQgQXBwcm92YWwgKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBTYWZlTWF0aCB7CiAgdWludDI1NiBjb25zdGFudCBwcml2YXRlIE1BWF9VSU5UMjU2ID0KICAweEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY7CgogIGZ1bmN0aW9uIHNhZmVBZGQgKHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgIGFzc2VydCAoeCA8PSBNQVhfVUlOVDI1NiAtIHkpOwogICAgcmV0dXJuIHggKyB5OwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1YiAodWludDI1NiB4LCB1aW50MjU2IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgYXNzZXJ0ICh4ID49IHkpOwogICAgcmV0dXJuIHggLSB5OwogIH0KCiAgZnVuY3Rpb24gc2FmZU11bCAodWludDI1NiB4LCB1aW50MjU2IHkpICBjb25zdGFudCBpbnRlcm5hbCAgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICBpZiAoeSA9PSAwKSByZXR1cm4gMDsgLy8gUHJldmVudCBkaXZpc2lvbiBieSB6ZXJvIGF0IHRoZSBuZXh0IGxpbmUKICAgIGFzc2VydCAoeCA8PSBNQVhfVUlOVDI1NiAvIHkpOwogICAgcmV0dXJuIHggKiB5OwogIH0KICAKICAKICAgZnVuY3Rpb24gc2FmZURpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIHJldHVybiBjOwogIH0KICAKfQoKCmNvbnRyYWN0IEFic3RyYWN0VG9rZW4gaXMgVG9rZW4sIFNhZmVNYXRoIHsKCiAgZnVuY3Rpb24gQWJzdHJhY3RUb2tlbiAoKSB7CiAgICAvLyBEbyBub3RoaW5nCiAgfQogCiAgZnVuY3Rpb24gYmFsYW5jZU9mIChhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYWNjb3VudHMgW19vd25lcl07CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlciAoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGlmIChhY2NvdW50cyBbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHJldHVybiBmYWxzZTsKICAgIGlmIChfdmFsdWUgPiAwICYmIG1zZy5zZW5kZXIgIT0gX3RvKSB7CiAgICAgIGFjY291bnRzIFttc2cuc2VuZGVyXSA9IHNhZmVTdWIgKGFjY291bnRzIFttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgYWNjb3VudHMgW190b10gPSBzYWZlQWRkIChhY2NvdW50cyBbX3RvXSwgX3ZhbHVlKTsKICAgIH0KICAgIFRyYW5zZmVyIChtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSAoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoYWxsb3dhbmNlcyBbX2Zyb21dW21zZy5zZW5kZXJdIDwgX3ZhbHVlKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoYWNjb3VudHMgW19mcm9tXSA8IF92YWx1ZSkgcmV0dXJuIGZhbHNlOwoKICAgIGFsbG93YW5jZXMgW19mcm9tXVttc2cuc2VuZGVyXSA9CiAgICAgIHNhZmVTdWIgKGFsbG93YW5jZXMgW19mcm9tXVttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKCiAgICBpZiAoX3ZhbHVlID4gMCAmJiBfZnJvbSAhPSBfdG8pIHsKICAgICAgYWNjb3VudHMgW19mcm9tXSA9IHNhZmVTdWIgKGFjY291bnRzIFtfZnJvbV0sIF92YWx1ZSk7CiAgICAgIGFjY291bnRzIFtfdG9dID0gc2FmZUFkZCAoYWNjb3VudHMgW190b10sIF92YWx1ZSk7CiAgICB9CiAgICBUcmFuc2ZlciAoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAKICBmdW5jdGlvbiBhcHByb3ZlIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBhbGxvd2FuY2VzIFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbCAobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIAogIGZ1bmN0aW9uIGFsbG93YW5jZSAoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50CiAgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2FuY2VzIFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIC8qKgogICAqIE1hcHBpbmcgZnJvbSBhZGRyZXNzZXMgb2YgdG9rZW4gaG9sZGVycyB0byB0aGUgbnVtYmVycyBvZiB0b2tlbnMgYmVsb25naW5nCiAgICogdG8gdGhlc2UgdG9rZW4gaG9sZGVycy4KICAgKi8KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGFjY291bnRzOwoKICAvKioKICAgKiBNYXBwaW5nIGZyb20gYWRkcmVzc2VzIG9mIHRva2VuIGhvbGRlcnMgdG8gdGhlIG1hcHBpbmcgb2YgYWRkcmVzc2VzIG9mCiAgICogc3BlbmRlcnMgdG8gdGhlIGFsbG93YW5jZXMgc2V0IGJ5IHRoZXNlIHRva2VuIGhvbGRlcnMgdG8gdGhlc2Ugc3BlbmRlcnMuCiAgICovCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwcml2YXRlIGFsbG93YW5jZXM7Cn0KCgpjb250cmFjdCBMaWNlcmlvVG9rZW4gaXMgQWJzdHJhY3RUb2tlbiB7CiAgICAKICAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgICAKICAgICB1aW50MjU2IHRva2VuQ291bnQgPSAwOwogICAgIAogICAgIGJvb2wgZnJvemVuID0gZmFsc2U7CiAgICAgCiAgICAgdWludDI1NiBjb25zdGFudCBNQVhfVE9LRU5fQ09VTlQgPSAweEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY7CiAgICAgCiAgICAgCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CgkgICAgcmVxdWlyZShvd25lciA9PSBtc2cuc2VuZGVyKTsKCSAgICBfOwoJfQogICAgIAogICAgIGZ1bmN0aW9uIExpY2VyaW9Ub2tlbigpIHsKICAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgICBjcmVhdGVUb2tlbnMoMTAwICogKDEwKioyNCkpOwogICAgIH0KICAgICAKICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSAoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF90b3RhbFN1cHBseSkgewogICAgICAgIHJldHVybiB0b2tlbkNvdW50OwogICAgIH0KICAgICAKICAgIGZ1bmN0aW9uIG5hbWUgKCkgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nIHJlc3VsdCkgewoJCXJldHVybiAiTElDRVJJTyI7Cgl9CgkKCWZ1bmN0aW9uIHN5bWJvbCAoKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgcmVzdWx0KSB7CgkJcmV0dXJuICJMQ1IiOwoJfQoJCglmdW5jdGlvbiBkZWNpbWFscyAoKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlc3VsdCkgewogICAgICAgIHJldHVybiAoMTAqKjE4KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXIgKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoZnJvemVuKSByZXR1cm4gZmFsc2U7CiAgICBlbHNlIHJldHVybiBBYnN0cmFjdFRva2VuLnRyYW5zZmVyIChfdG8sIF92YWx1ZSk7CiAgfQoKICAKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20gKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgaWYgKGZyb3plbikgcmV0dXJuIGZhbHNlOwogICAgZWxzZSByZXR1cm4gQWJzdHJhY3RUb2tlbi50cmFuc2ZlckZyb20gKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICAKICBmdW5jdGlvbiBhcHByb3ZlIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9jdXJyZW50VmFsdWUsIHVpbnQyNTYgX25ld1ZhbHVlKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoYWxsb3dhbmNlIChtc2cuc2VuZGVyLCBfc3BlbmRlcikgPT0gX2N1cnJlbnRWYWx1ZSkKICAgICAgcmV0dXJuIGFwcHJvdmUgKF9zcGVuZGVyLCBfbmV3VmFsdWUpOwogICAgZWxzZSByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBidXJuVG9rZW5zICh1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoX3ZhbHVlID4gYWNjb3VudHMgW21zZy5zZW5kZXJdKSByZXR1cm4gZmFsc2U7CiAgICBlbHNlIGlmIChfdmFsdWUgPiAwKSB7CiAgICAgIGFjY291bnRzIFttc2cuc2VuZGVyXSA9IHNhZmVTdWIgKGFjY291bnRzIFttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgdG9rZW5Db3VudCA9IHNhZmVTdWIgKHRva2VuQ291bnQsIF92YWx1ZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHJldHVybiB0cnVlOwogIH0KCgogIGZ1bmN0aW9uIGNyZWF0ZVRva2VucyAodWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmVxdWlyZSAobXNnLnNlbmRlciA9PSBvd25lcik7CgogICAgaWYgKF92YWx1ZSA+IDApIHsKICAgICAgaWYgKF92YWx1ZSA+IHNhZmVTdWIgKE1BWF9UT0tFTl9DT1VOVCwgdG9rZW5Db3VudCkpIHJldHVybiBmYWxzZTsKICAgICAgYWNjb3VudHMgW21zZy5zZW5kZXJdID0gc2FmZUFkZCAoYWNjb3VudHMgW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgICB0b2tlbkNvdW50ID0gc2FmZUFkZCAodG9rZW5Db3VudCwgX3ZhbHVlKTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9CgoKICBmdW5jdGlvbiBzZXRPd25lciAoYWRkcmVzcyBfbmV3T3duZXIpIHsKICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gb3duZXIpOwoKICAgIG93bmVyID0gX25ld093bmVyOwogIH0KCiAgZnVuY3Rpb24gZnJlZXplVHJhbnNmZXJzICgpIHsKICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gb3duZXIpOwoKICAgIGlmICghZnJvemVuKSB7CiAgICAgIGZyb3plbiA9IHRydWU7CiAgICAgIEZyZWV6ZSAoKTsKICAgIH0KICB9CgoKICBmdW5jdGlvbiB1bmZyZWV6ZVRyYW5zZmVycyAoKSB7CiAgICByZXF1aXJlIChtc2cuc2VuZGVyID09IG93bmVyKTsKCiAgICBpZiAoZnJvemVuKSB7CiAgICAgIGZyb3plbiA9IGZhbHNlOwogICAgICBVbmZyZWV6ZSAoKTsKICAgIH0KICB9CgogIGV2ZW50IEZyZWV6ZSAoKTsKCiAgZXZlbnQgVW5mcmVlemUgKCk7Cgp9CgoKY29udHJhY3QgVG9rZW5TYWxlIGlzIExpY2VyaW9Ub2tlbiAgewogCiAgICBlbnVtIFN0YXRlIHsgUFJJVkFURV9TQUxFLCBQUkVfSUNPLCBJQ09fRklSU1QsIElDT19TRUNPTkQsIFNUT1BQRUQsIENMT1NFRCB9CiAgICAKICAgIC8vIDAgLCAxICwgMiAsIDMgLCA0ICwgNQogICAgCiAgICBTdGF0ZSBwdWJsaWMgY3VycmVudFN0YXRlID0gU3RhdGUuU1RPUFBFRDsKCiAgICB1aW50IHB1YmxpYyB0b2tlblByaWNlID0gMjUwMDAwMDAwMDAwMDAwOyAvLyB3ZWkgLCAwLjAwMDI1IGV0aCAsIDAuMTIgdXNkCiAgICB1aW50IHB1YmxpYyBfbWluQW1vdW50ID0gMC4wMSBldGhlcjsKCQogICAgYWRkcmVzcyBwdWJsaWMgYmVuZWZpY2lhcnk7CgkKCXVpbnQyNTYgcHJpdmF0ZSBCb3VudHlGb3VuZCA9IDEwICogKDEwKioyNCk7Cgl1aW50MjU2IHByaXZhdGUgU2FsZUZvdW5kID0gNzAgKiAoMTAqKjI0KTsKCXVpbnQyNTYgcHJpdmF0ZSBQYXJ0bmVyc0ZvdW5kID0gNSAqICgxMCoqMjQpOwoJdWludDI1NiBwcml2YXRlIFRlYW1Gb3VuZCA9IDE1ICogKDEwKioyNCk7CgkKCXVpbnQyNTYgcHVibGljIHRvdGFsU29sZCA9IDA7CgkKCQoJdWludDI1NiBwcml2YXRlIF9oYXJkY2FwID0gMTQwMDAgZXRoZXI7Cgl1aW50MjU2IHByaXZhdGUgX3NvZnRjYXAgPSAyNTAwIGV0aGVyOwoJCglib29sIHByaXZhdGUgX2FsbG93ZWRUcmFuc2ZlcnMgPSB0cnVlOwoJCgkKICAgIGFkZHJlc3NbXSBwdWJsaWMgUGFydG5lcnM7CiAgICBhZGRyZXNzW10gcHVibGljIEhvbGRlcnM7CgkKCW1vZGlmaWVyIG1pbkFtb3VudCgpIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBfbWluQW1vdW50KTsKICAgICAgICBfOwogICAgfQogICAgCiAgICBtb2RpZmllciBzYWxlSXNPbigpIHsKICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGF0ZSAhPSBTdGF0ZS5TVE9QUEVEICYmIGN1cnJlbnRTdGF0ZSAhPSBTdGF0ZS5DTE9TRUQgJiYgdG90YWxTb2xkIDwgU2FsZUZvdW5kKTsKICAgICAgICBfOwogICAgfQogICAgCglmdW5jdGlvbiBUb2tlblNhbGUoKSB7CgkgICAgb3duZXIgPSBtc2cuc2VuZGVyOwoJICAgIGJlbmVmaWNpYXJ5ID0gbXNnLnNlbmRlcjsKCX0KCQoJZnVuY3Rpb24gc2V0U3RhdGUoU3RhdGUgX25ld1N0YXRlKSBwdWJsaWMgb25seU93bmVyIHsKCSAgICByZXF1aXJlKGN1cnJlbnRTdGF0ZSAhPSBTdGF0ZS5DTE9TRUQpOwoJICAgIGN1cnJlbnRTdGF0ZSA9IF9uZXdTdGF0ZTsKCX0KCQoJZnVuY3Rpb24gc2V0TWluQW1vdW50KHVpbnQgX25ldykgcHVibGljIG9ubHlPd25lciB7CgkgICAgCgkgICAgX21pbkFtb3VudCA9IF9uZXc7CgkgICAgCgl9CgkKCWZ1bmN0aW9uIGFsbG93VHJhbnNmZXJzKCkgcHVibGljIG9ubHlPd25lciB7CgkJX2FsbG93ZWRUcmFuc2ZlcnMgPSB0cnVlOwkJCgl9CgkKCWZ1bmN0aW9uIHN0b3BUcmFuc2ZlcnMoKSBwdWJsaWMgb25seU93bmVyIHsKCQlfYWxsb3dlZFRyYW5zZmVycyA9IGZhbHNlOwoJfQoJCglmdW5jdGlvbiBzdG9wU2FsZSgpIHB1YmxpYyBvbmx5T3duZXIgewoJICAgIGN1cnJlbnRTdGF0ZSA9IFN0YXRlLkNMT1NFRDsKCSAgICBwYXlvdXRQYXJ0bmVycygpOwoJICAgIHBheW91dEJvbnVzZXNUb0hvbGRlcnMoKTsKCX0KCQogICAgZnVuY3Rpb24gc2V0QmVuZWZpY2lhcnlBZGRyZXNzKGFkZHJlc3MgX25ldykgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgCiAgICAgICAgYmVuZWZpY2lhcnkgPSBfbmV3OwogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRUb2tlblByaWNlKHVpbnQgX3ByaWNlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICAKICAgICAgICB0b2tlblByaWNlID0gX3ByaWNlOwogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZGRQYXJ0bmVyKGFkZHJlc3MgX25ld1BhcnRuZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIAogICAgICAgIFBhcnRuZXJzLnB1c2goX25ld1BhcnRuZXIpOwogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBwYXlvdXRQYXJ0bmVycygpIHByaXZhdGUgcmV0dXJucyAoYm9vbCkgewoKICAgICAgICBpZihQYXJ0bmVycy5sZW5ndGggPT0gMCkgcmV0dXJuIGZhbHNlOwoKICAgICAgICB1aW50IHRva2Vuc1RvUGFydG5lcnMgPSBzYWZlRGl2KFBhcnRuZXJzRm91bmQsIFBhcnRuZXJzLmxlbmd0aCk7CiAgICAgICAgCiAgICAgICAgZm9yKHVpbnQgaSA9IDAgOyBpIDw9IFBhcnRuZXJzLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBQYXJ0bmVyc1tpXTsKICAgICAgICAgICAgYWNjb3VudHNbYWRkcl0gPSBzYWZlQWRkKGFjY291bnRzW2FkZHJdLCB0b2tlbnNUb1BhcnRuZXJzKTsKCSAgICAgICAgYWNjb3VudHNbb3duZXJdID0gc2FmZVN1YihhY2NvdW50c1tvd25lcl0sIHRva2Vuc1RvUGFydG5lcnMpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAKICAgIH0KICAgIAogICAgCiAgICBmdW5jdGlvbiBwYXlvdXRCb251c2VzVG9Ib2xkZXJzKCkgcHJpdmF0ZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgCiAgICAgICAgaWYoSG9sZGVycy5sZW5ndGggPT0gMCkgcmV0dXJuIGZhbHNlOwogICAgICAgIAogICAgICAgIHVpbnQgdG9rZW5zVG9Ib2xkZXJzID0gc2FmZURpdihCb3VudHlGb3VuZCwgSG9sZGVycy5sZW5ndGgpOwogICAgICAgIAogICAgICAgIGZvcih1aW50IGkgPSAwIDsgaSA8PSBIb2xkZXJzLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBIb2xkZXJzW2ldOwogICAgICAgICAgICBhY2NvdW50c1thZGRyXSA9IHNhZmVBZGQoYWNjb3VudHNbYWRkcl0sIHRva2Vuc1RvSG9sZGVycyk7CgkgICAgICAgIGFjY291bnRzW293bmVyXSA9IHNhZmVTdWIoYWNjb3VudHNbb3duZXJdLCB0b2tlbnNUb0hvbGRlcnMpOyAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKCQoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tT3duZXIoYWRkcmVzcyBfYWRkcmVzcywgdWludCBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKCSAgICAKCSAgICB1aW50IHRva2VucyA9IGdldF90b2tlbnNfY291bnQoX2Ftb3VudCAqIDEgZXRoZXIpOwoJICAgIAoJICAgIHRva2VucyA9IHNhZmVBZGQodG9rZW5zLCBnZXRfYm91bnR5X2NvdW50KHRva2VucykpOwoJICAgIAoJICAgIGFjY291bnRzW19hZGRyZXNzXSA9IHNhZmVBZGQoYWNjb3VudHNbX2FkZHJlc3NdLCB0b2tlbnMpOwoJICAgIGFjY291bnRzW293bmVyXSA9IHNhZmVTdWIoYWNjb3VudHNbb3duZXJdLCB0b2tlbnMpOwoJICAgIAoJICAgIHRvdGFsU29sZCA9IHNhZmVBZGQodG90YWxTb2xkLCBfYW1vdW50KTsKCSAgICAKCSAgICBIb2xkZXJzLnB1c2goX2FkZHJlc3MpOwoJICAgIAoJICAgIHJldHVybiB0cnVlOwoKCX0KCQoKCQoJZnVuY3Rpb24gdHJhbnNmZXJQYXlhYmxlKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX2Ftb3VudCkgcHJpdmF0ZSByZXR1cm5zIChib29sKSB7CgkgICAgCgkgICAgaWYoU2FsZUZvdW5kIDwgX2Ftb3VudCkgcmV0dXJuIGZhbHNlOwoJICAgIAoJICAgIGFjY291bnRzW19hZGRyZXNzXSA9IHNhZmVBZGQoYWNjb3VudHNbX2FkZHJlc3NdLCBfYW1vdW50KTsKCSAgICBhY2NvdW50c1tvd25lcl0gPSBzYWZlU3ViKGFjY291bnRzW293bmVyXSwgX2Ftb3VudCk7CgkgICAgCgkgICAgdG90YWxTb2xkID0gc2FmZUFkZCh0b3RhbFNvbGQsIF9hbW91bnQpOwoJICAgIAoJICAgIEhvbGRlcnMucHVzaChfYWRkcmVzcyk7CgkgICAgCgkgICAgcmV0dXJuIHRydWU7CgkgICAgCgl9CgkKCQoJZnVuY3Rpb24gYnV5TENSVG9rZW5zKCkgcHVibGljIHNhbGVJc09uKCkgbWluQW1vdW50KCkgcGF5YWJsZSB7CgkgIAoJICAgIAoJICAgIHVpbnQgdG9rZW5zID0gZ2V0X3Rva2Vuc19jb3VudChtc2cudmFsdWUpOwoJCXJlcXVpcmUodHJhbnNmZXJQYXlhYmxlKG1zZy5zZW5kZXIgLCB0b2tlbnMpKTsKCQlpZihfYWxsb3dlZFRyYW5zZmVycykgewoJCQliZW5lZmljaWFyeS50cmFuc2Zlcihtc2cudmFsdWUpOwoJICAgIH0KCSAgICAKCX0KCQoJCglmdW5jdGlvbiBnZXRfdG9rZW5zX2NvdW50KHVpbnQgX2Ftb3VudCkgcHJpdmF0ZSByZXR1cm5zICh1aW50KSB7CgkgICAgCgkgICAgIHVpbnQgY3VycmVudFByaWNlID0gdG9rZW5QcmljZTsKCSAgICAgdWludCB0b2tlbnMgPSBzYWZlRGl2KCBzYWZlTXVsKF9hbW91bnQsIGRlY2ltYWxzKCkpLCBjdXJyZW50UHJpY2UgKSA7CiAgICAJIHJldHVybiB0b2tlbnM7CgkgICAgCgl9CgkKCQoJZnVuY3Rpb24gZ2V0X2JvdW50eV9jb3VudCh1aW50IF90b2tlbnMpIHByaXZhdGUgcmV0dXJucyAodWludCkgewoJCgkgICAgdWludCBib251c2VzID0gMDsKCQoJICAgIGlmKGN1cnJlbnRTdGF0ZSA9PSBTdGF0ZS5QUklWQVRFX1NBTEUpIHsKCSAgICAgICAgYm9udXNlcyA9IF90b2tlbnMgOwoJICAgIH0KCSAgICAKCSAgICBpZihjdXJyZW50U3RhdGUgPT0gU3RhdGUuUFJFX0lDTykgewoJICAgICAgICBib251c2VzID0gc2FmZURpdihfdG9rZW5zICwgMik7CgkgICAgfQoJICAgIAoJICAgIGlmKGN1cnJlbnRTdGF0ZSA9PSBTdGF0ZS5JQ09fRklSU1QpIHsKCSAgICAgICAgIGJvbnVzZXMgPSBzYWZlRGl2KF90b2tlbnMgLCA0KTsKCSAgICB9CgkgICAgCgkgICAgaWYoY3VycmVudFN0YXRlID09IFN0YXRlLklDT19TRUNPTkQpIHsKCSAgICAgICAgIGJvbnVzZXMgPSBzYWZlRGl2KF90b2tlbnMgLCA1KTsKCSAgICB9CgkgICAgCgkgICAgaWYoQm91bnR5Rm91bmQgPCBib251c2VzKSB7CgkgICAgICAgIGJvbnVzZXMgPSBCb3VudHlGb3VuZDsKCSAgICB9CgkgICAgCgkgICAgaWYoYm9udXNlcyA+IDApIHsKCSAgICAgICAgc2FmZVN1YihCb3VudHlGb3VuZCwgYm9udXNlcyk7CgkgICAgfQoKCSAgICByZXR1cm4gYm9udXNlczsKCQoJfQoJCglmdW5jdGlvbigpIGV4dGVybmFsIHBheWFibGUgewogICAgICBidXlMQ1JUb2tlbnMoKTsKICAgIH0KCQogICAgCn0='.
	

]
