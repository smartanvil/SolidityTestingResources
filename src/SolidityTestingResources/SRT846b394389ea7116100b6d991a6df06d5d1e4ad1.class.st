Class {
	#name : #SRT846b394389ea7116100b6d991a6df06d5d1e4ad1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT846b394389ea7116100b6d991a6df06d5d1e4ad1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cgp9CgoKY29udHJhY3QgQmFzZSB7CgogICAgdWludCBwcml2YXRlIGJpdGxvY2tzID0gMDsKCiAgICBtb2RpZmllciBub0FueVJlZW50cmFuY3kgewogICAgICAgIHVpbnQgX2xvY2tzID0gYml0bG9ja3M7CiAgICAgICAgcmVxdWlyZShfbG9ja3MgPD0gMCk7CiAgICAgICAgYml0bG9ja3MgPSB1aW50KC0xKTsKICAgICAgICBfOwogICAgICAgIGJpdGxvY2tzID0gX2xvY2tzOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHkoYWRkcmVzcyBhbGxvd2VkKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFsbG93ZWQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgICAgIGFzc2VydChtc2cuZGF0YS5sZW5ndGggPT0gc2l6ZSArIDQpOwogICAgICAgIF87CiAgICB9IAoKfQoKCmNvbnRyYWN0IEVSQzIwIGlzIEJhc2UgewogICAgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIGJvb2wgcHVibGljIGlzRnJvemVuID0gZmFsc2U7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOwogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgaXNOb3RGcm96ZW5Pbmx5IG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3ModGhpcykpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlX2ZpeGVkKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2N1cnJlbnRWYWx1ZSwgdWludCBfdmFsdWUpIHB1YmxpYyBpc05vdEZyb3plbk9ubHkgb25seVBheWxvYWRTaXplKDMgKiAzMikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gX2N1cnJlbnRWYWx1ZSl7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMgaXNOb3RGcm96ZW5Pbmx5IG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgbW9kaWZpZXIgaXNOb3RGcm96ZW5Pbmx5KCkgewogICAgICAgIHJlcXVpcmUoIWlzRnJvemVuKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGlzRnJvemVuT25seSgpewogICAgICAgIHJlcXVpcmUoaXNGcm96ZW4pOwogICAgICAgIF87CiAgICB9Cgp9CgoKY29udHJhY3QgVG9rZW4gaXMgRVJDMjAgewoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJBcnJheS5pbyBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJlUkFZIjsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDE4OwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQklUID0gMTAqKjE4OwogICAgYm9vbCBwdWJsaWMgdGdlTGl2ZSA9IGZhbHNlOwogICAgdWludCBwdWJsaWMgdGdlU3RhcnRCbG9jazsKICAgIHVpbnQgcHVibGljIHRnZVNldHRpbmdzQW1vdW50OwogICAgdWludCBwdWJsaWMgdGdlU2V0dGluZ3NQYXJ0SW52ZXN0b3I7CiAgICB1aW50IHB1YmxpYyB0Z2VTZXR0aW5nc1BhcnRQcm9qZWN0OwogICAgdWludCBwdWJsaWMgdGdlU2V0dGluZ3NQYXJ0Rm91bmRlcnM7CiAgICB1aW50IHB1YmxpYyB0Z2VTZXR0aW5nc0Jsb2Nrc1BlclN0YWdlOwogICAgdWludCBwdWJsaWMgdGdlU2V0dGluZ3NQYXJ0SW52ZXN0b3JJbmNyZWFzZVBlclN0YWdlOwogICAgdWludCBwdWJsaWMgdGdlU2V0dGluZ3NBbW91bnRDb2xsZWN0OwogICAgdWludCBwdWJsaWMgdGdlU2V0dGluZ3NNYXhTdGFnZXM7CiAgICBhZGRyZXNzIHB1YmxpYyBwcm9qZWN0V2FsbGV0OwogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlcnNXYWxsZXQ7CiAgICBhZGRyZXNzIGNvbnN0YW50IHB1YmxpYyBidXJuQWRkcmVzcyA9IGFkZHJlc3MoMCk7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBpbnZCYWxhbmNlczsKICAgIHVpbnQgcHVibGljIHRvdGFsSW52U3VwcGx5OwoKICAgIG1vZGlmaWVyIGlzVGdlTGl2ZSgpewogICAgICAgIHJlcXVpcmUodGdlTGl2ZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpc05vdFRnZUxpdmUoKXsKICAgICAgICByZXF1aXJlKCF0Z2VMaXZlKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG1heFN0YWdlc0lzTm90QWNoaWV2ZWQoKSB7CiAgICAgICAgaWYgKHRvdGFsU3VwcGx5ID4gQklUKSB7CiAgICAgICAgICAgIHVpbnQgc3RhZ2UgPSBibG9jay5udW1iZXIuc3ViKHRnZVN0YXJ0QmxvY2spLmRpdih0Z2VTZXR0aW5nc0Jsb2Nrc1BlclN0YWdlKTsKICAgICAgICAgICAgcmVxdWlyZShzdGFnZSA8IHRnZVNldHRpbmdzTWF4U3RhZ2VzKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciB0YXJnZXRJc05vdEFjaGlldmVkKCl7CiAgICAgICAgcmVxdWlyZSh0Z2VTZXR0aW5nc0Ftb3VudENvbGxlY3QgPCB0Z2VTZXR0aW5nc0Ftb3VudCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsICB1aW50IF92YWx1ZSk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgaXNOb3RGcm96ZW5Pbmx5IG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3ModGhpcykpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgaWYoYmFsYW5jZXNbcHJvamVjdFdhbGxldF0gPCAxICogQklUICYmICF0Z2VMaXZlKXsKICAgICAgICAgICAgX2ludGVybmFsVGdlU2V0TGl2ZSgpOwogICAgICAgIH0KICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEBkZXYgQ29uc3RydWN0b3IKICAgIC8vLyBAcGFyYW0gX3Byb2plY3RXYWxsZXQgV2FsbGV0IG9mIHByb2plY3QKICAgIC8vLyBAcGFyYW0gX2ZvdW5kZXJzV2FsbGV0IFdhbGxldCBvZiBmb3VuZGVycwogICAgZnVuY3Rpb24gVG9rZW4oYWRkcmVzcyBfcHJvamVjdFdhbGxldCwgYWRkcmVzcyBfZm91bmRlcnNXYWxsZXQpIHB1YmxpYyB7CiAgICAgICAgcHJvamVjdFdhbGxldCA9IF9wcm9qZWN0V2FsbGV0OwogICAgICAgIGZvdW5kZXJzV2FsbGV0ID0gX2ZvdW5kZXJzV2FsbGV0OwogICAgfQoKICAgIC8vLyBAZGV2IEZhbGxiYWNrIGZ1bmN0aW9uIGFsbG93cyB0byBidXkgdG9rZW5zCiAgICBmdW5jdGlvbiAoKQogICAgcHVibGljCiAgICBwYXlhYmxlCiAgICBpc1RnZUxpdmUKICAgIGlzTm90RnJvemVuT25seQogICAgdGFyZ2V0SXNOb3RBY2hpZXZlZAogICAgbWF4U3RhZ2VzSXNOb3RBY2hpZXZlZAogICAgbm9BbnlSZWVudHJhbmN5CiAgICB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgICAgICBpZih0Z2VTZXR0aW5nc0Ftb3VudENvbGxlY3QuYWRkKG1zZy52YWx1ZSkgPj0gdGdlU2V0dGluZ3NBbW91bnQpewogICAgICAgICAgICB0Z2VMaXZlID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHVpbnQgcmVmdW5kQW1vdW50ID0gMDsKICAgICAgICB1aW50IHNlbmRlckFtb3VudCA9IG1zZy52YWx1ZTsKICAgICAgICBpZih0Z2VTZXR0aW5nc0Ftb3VudENvbGxlY3QuYWRkKG1zZy52YWx1ZSkgPj0gdGdlU2V0dGluZ3NBbW91bnQpewogICAgICAgICAgICByZWZ1bmRBbW91bnQgPSB0Z2VTZXR0aW5nc0Ftb3VudENvbGxlY3QuYWRkKG1zZy52YWx1ZSkuc3ViKHRnZVNldHRpbmdzQW1vdW50KTsKICAgICAgICAgICAgc2VuZGVyQW1vdW50ID0gKG1zZy52YWx1ZSkuc3ViKHJlZnVuZEFtb3VudCk7CiAgICAgICAgfQogICAgICAgIHVpbnQgc3RhZ2UgPSBibG9jay5udW1iZXIuc3ViKHRnZVN0YXJ0QmxvY2spLmRpdih0Z2VTZXR0aW5nc0Jsb2Nrc1BlclN0YWdlKTsgICAgICAgIAogICAgICAgIAogICAgICAgIHVpbnQgY3VycmVudFBhcnRJbnZlc3RvciA9IHRnZVNldHRpbmdzUGFydEludmVzdG9yLmFkZChzdGFnZS5tdWwodGdlU2V0dGluZ3NQYXJ0SW52ZXN0b3JJbmNyZWFzZVBlclN0YWdlKSk7CiAgICAgICAgdWludCBhbGxTdGFrZXMgPSBjdXJyZW50UGFydEludmVzdG9yLmFkZCh0Z2VTZXR0aW5nc1BhcnRQcm9qZWN0KS5hZGQodGdlU2V0dGluZ3NQYXJ0Rm91bmRlcnMpOwogICAgICAgIHVpbnQgYW1vdW50UHJvamVjdCA9IHNlbmRlckFtb3VudC5tdWwodGdlU2V0dGluZ3NQYXJ0UHJvamVjdCkuZGl2KGFsbFN0YWtlcyk7CiAgICAgICAgdWludCBhbW91bnRGb3VuZGVycyA9IHNlbmRlckFtb3VudC5tdWwodGdlU2V0dGluZ3NQYXJ0Rm91bmRlcnMpLmRpdihhbGxTdGFrZXMpOwogICAgICAgIHVpbnQgYW1vdW50U2VuZGVyID0gc2VuZGVyQW1vdW50LnN1YihhbW91bnRQcm9qZWN0KS5zdWIoYW1vdW50Rm91bmRlcnMpOwogICAgICAgIF9taW50KGFtb3VudFByb2plY3QsIGFtb3VudEZvdW5kZXJzLCBhbW91bnRTZW5kZXIpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIocmVmdW5kQW1vdW50KTsKICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1cygpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEZpbmlzaGVkKCkgcHVibGljIG9ubHkocHJvamVjdFdhbGxldCkgaXNOb3RGcm96ZW5Pbmx5IGlzVGdlTGl2ZSB7CiAgICAgICAgaWYoYmFsYW5jZXNbcHJvamVjdFdhbGxldF0gPiAxKkJJVCl7CiAgICAgICAgICAgIHRnZUxpdmUgPSBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlU3RhdHVzKCkgcHVibGljIHsKICAgICAgICBpZiAodG90YWxTdXBwbHkgPiBCSVQpIHsKICAgICAgICAgICAgdWludCBzdGFnZSA9IGJsb2NrLm51bWJlci5zdWIodGdlU3RhcnRCbG9jaykuZGl2KHRnZVNldHRpbmdzQmxvY2tzUGVyU3RhZ2UpOwogICAgICAgICAgICBpZiAoc3RhZ2UgPiB0Z2VTZXR0aW5nc01heFN0YWdlcykgewogICAgICAgICAgICAgICAgdGdlTGl2ZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBAZGV2IFN0YXJ0IG5ldyB0Z2Ugc3RhZ2UKICAgIGZ1bmN0aW9uIHRnZVNldExpdmUoKSBwdWJsaWMgb25seShwcm9qZWN0V2FsbGV0KSBpc05vdFRnZUxpdmUgaXNOb3RGcm96ZW5Pbmx5IHsKICAgICAgICBfaW50ZXJuYWxUZ2VTZXRMaXZlKCk7CiAgICB9CgogICAgLy8vIEBkZXYgQnVybiB0b2tlbnMgdG8gYnVybkFkZHJlc3MgZnJvbSBtc2cuc2VuZGVyIHdhbGxldAogICAgLy8vIEBwYXJhbSBfYW1vdW50IEFtb3VudCBvZiB0b2tlbnMKICAgIGZ1bmN0aW9uIGJ1cm4odWludCBfYW1vdW50KSBwdWJsaWMgaXNOb3RGcm96ZW5Pbmx5IG5vQW55UmVlbnRyYW5jeSByZXR1cm5zKGJvb2wgX3N1Y2Nlc3MpIHsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1tidXJuQWRkcmVzc10gPSBiYWxhbmNlc1tidXJuQWRkcmVzc10uYWRkKF9hbW91bnQpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF9hbW91bnQpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoX2Ftb3VudCk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgYnVybkFkZHJlc3MsIF9hbW91bnQpOwogICAgICAgIEJ1cm4oYnVybkFkZHJlc3MsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IF9mb3VuZGVyc1dhbGxldCBXYWxsZXQgb2YgZm91bmRlcnMKICAgIC8vLyBAcGFyYW0gZGVzdHMgYXJyYXkgb2YgYWRkcmVzc2VzIAogICAgLy8vIEBwYXJhbSB2YWx1ZXMgYXJyYXkgYW1vdW50IG9mIHRva2VucyB0byB0cmFuc2ZlciAgICAKICAgIGZ1bmN0aW9uIG11bHRpVHJhbnNmZXIoYWRkcmVzc1tdIGRlc3RzLCB1aW50W10gdmFsdWVzKSBwdWJsaWMgaXNOb3RGcm96ZW5Pbmx5IHJldHVybnModWludCkgewogICAgICAgIHVpbnQgaSA9IDA7CiAgICAgICAgd2hpbGUgKGkgPCBkZXN0cy5sZW5ndGgpIHsKICAgICAgICAgICB0cmFuc2ZlcihkZXN0c1tpXSwgdmFsdWVzW2ldKTsKICAgICAgICAgICBpICs9IDE7CiAgICAgICAgfQogICAgICAgIHJldHVybiBpOwogICAgfQoKICAgIC8vLS0tLS0tLS0tLS0tLS0tLSBGUk9aRU4gLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAvLy8gQGRldiBBbGxvd3MgYW4gb3duZXIgdG8gY29uZmlybSBmcmVlemVuZyBwcm9jZXNzCiAgICBmdW5jdGlvbiBzZXRGcmVlemUoKSBwdWJsaWMgb25seShwcm9qZWN0V2FsbGV0KSBpc05vdEZyb3plbk9ubHkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlzRnJvemVuID0gdHJ1ZTsKICAgICAgICB0b3RhbEludlN1cHBseSA9IGFkZHJlc3ModGhpcykuYmFsYW5jZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgdG8gdXNlcnMgd2l0aGRyYXcgZXRoIGluIGZyb3plbiBzdGFnZSAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RnJvemVuKCkgcHVibGljIGlzRnJvemVuT25seSBub0FueVJlZW50cmFuY3kgewogICAgICAgIHJlcXVpcmUoaW52QmFsYW5jZXNbbXNnLnNlbmRlcl0gPiAwKTsKCiAgICAgICAgdWludCBhbW91bnRXaXRoZHJhdyA9IHRvdGFsU3VwcGx5Lm11bChpbnZCYWxhbmNlc1ttc2cuc2VuZGVyXSkuZGl2KHRvdGFsSW52U3VwcGx5KTsKICAgICAgICAvLyBmaXggcG9zc2libGUgcm91bmRpbmcgZXJyb3JzIGZvciBsYXN0IHdpdGhkcmF3YWw6CiAgICAgICAgaWYgKGFtb3VudFdpdGhkcmF3ID4gYWRkcmVzcyh0aGlzKS5iYWxhbmNlKSB7CiAgICAgICAgICAgIGFtb3VudFdpdGhkcmF3ID0gYWRkcmVzcyh0aGlzKS5iYWxhbmNlOwogICAgICAgIH0KICAgICAgICBpbnZCYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnRXaXRoZHJhdyk7CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIGFuIG93bmVyIHRvIGNvbmZpcm0gYSBjaGFuZ2Ugc2V0dGluZ3MgcmVxdWVzdC4KICAgIGZ1bmN0aW9uIGV4ZWN1dGVTZXR0aW5nc0NoYW5nZSgKICAgICAgICB1aW50IGFtb3VudCwgCiAgICAgICAgdWludCBwYXJ0SW52ZXN0b3IsCiAgICAgICAgdWludCBwYXJ0UHJvamVjdCwgCiAgICAgICAgdWludCBwYXJ0Rm91bmRlcnMsIAogICAgICAgIHVpbnQgYmxvY2tzUGVyU3RhZ2UsIAogICAgICAgIHVpbnQgcGFydEludmVzdG9ySW5jcmVhc2VQZXJTdGFnZSwKICAgICAgICB1aW50IG1heFN0YWdlcwogICAgKSAKICAgIHB1YmxpYwogICAgb25seShwcm9qZWN0V2FsbGV0KQogICAgaXNOb3RUZ2VMaXZlIAogICAgaXNOb3RGcm96ZW5Pbmx5CiAgICByZXR1cm5zKGJvb2wgc3VjY2VzcykgCiAgICB7CiAgICAgICAgdGdlU2V0dGluZ3NBbW91bnQgPSBhbW91bnQ7CiAgICAgICAgdGdlU2V0dGluZ3NQYXJ0SW52ZXN0b3IgPSBwYXJ0SW52ZXN0b3I7CiAgICAgICAgdGdlU2V0dGluZ3NQYXJ0UHJvamVjdCA9IHBhcnRQcm9qZWN0OwogICAgICAgIHRnZVNldHRpbmdzUGFydEZvdW5kZXJzID0gcGFydEZvdW5kZXJzOwogICAgICAgIHRnZVNldHRpbmdzQmxvY2tzUGVyU3RhZ2UgPSBibG9ja3NQZXJTdGFnZTsKICAgICAgICB0Z2VTZXR0aW5nc1BhcnRJbnZlc3RvckluY3JlYXNlUGVyU3RhZ2UgPSBwYXJ0SW52ZXN0b3JJbmNyZWFzZVBlclN0YWdlOwogICAgICAgIHRnZVNldHRpbmdzTWF4U3RhZ2VzID0gbWF4U3RhZ2VzOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLS0tLS0tLS0tLS0tLS0tLSBHRVRURVJTIC0tLS0tLS0tLS0tLS0tLS0KICAgIC8vLyBAZGV2IEFtb3VudCBvZiBibG9ja3MgbGVmdCB0byB0aGUgZW5kIG9mIHRoaXMgc3RhZ2Ugb2YgVEdFIAogICAgZnVuY3Rpb24gdGdlU3RhZ2VCbG9ja0xlZnQoKSBwdWJsaWMgdmlldyBpc1RnZUxpdmUgcmV0dXJucyh1aW50KSB7CiAgICAgICAgdWludCBzdGFnZSA9IGJsb2NrLm51bWJlci5zdWIodGdlU3RhcnRCbG9jaykuZGl2KHRnZVNldHRpbmdzQmxvY2tzUGVyU3RhZ2UpOwogICAgICAgIHJldHVybiB0Z2VTdGFydEJsb2NrLmFkZChzdGFnZS5tdWwodGdlU2V0dGluZ3NCbG9ja3NQZXJTdGFnZSkpLnN1YihibG9jay5udW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRnZUN1cnJlbnRQYXJ0SW52ZXN0b3IoKSBwdWJsaWMgdmlldyBpc1RnZUxpdmUgcmV0dXJucyh1aW50KSB7CiAgICAgICAgdWludCBzdGFnZSA9IGJsb2NrLm51bWJlci5zdWIodGdlU3RhcnRCbG9jaykuZGl2KHRnZVNldHRpbmdzQmxvY2tzUGVyU3RhZ2UpOwogICAgICAgIHJldHVybiB0Z2VTZXR0aW5nc1BhcnRJbnZlc3Rvci5hZGQoc3RhZ2UubXVsKHRnZVNldHRpbmdzUGFydEludmVzdG9ySW5jcmVhc2VQZXJTdGFnZSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRnZU5leHRQYXJ0SW52ZXN0b3IoKSBwdWJsaWMgdmlldyBpc1RnZUxpdmUgcmV0dXJucyh1aW50KSB7CiAgICAgICAgdWludCBzdGFnZSA9IGJsb2NrLm51bWJlci5zdWIodGdlU3RhcnRCbG9jaykuZGl2KHRnZVNldHRpbmdzQmxvY2tzUGVyU3RhZ2UpLmFkZCgxKTsgICAgICAgIAogICAgICAgIHJldHVybiB0Z2VTZXR0aW5nc1BhcnRJbnZlc3Rvci5hZGQoc3RhZ2UubXVsKHRnZVNldHRpbmdzUGFydEludmVzdG9ySW5jcmVhc2VQZXJTdGFnZSkpOwogICAgfQoKICAgIC8vLS0tLS0tLS0tLS0tLS0tLSBJTlRFUk5BTCAtLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIF9taW50KHVpbnQgX2Ftb3VudFByb2plY3QsIHVpbnQgX2Ftb3VudEZvdW5kZXJzLCB1aW50IF9hbW91bnRTZW5kZXIpIGludGVybmFsIHsKICAgICAgICBiYWxhbmNlc1twcm9qZWN0V2FsbGV0XSA9IGJhbGFuY2VzW3Byb2plY3RXYWxsZXRdLmFkZChfYW1vdW50UHJvamVjdCk7CiAgICAgICAgYmFsYW5jZXNbZm91bmRlcnNXYWxsZXRdID0gYmFsYW5jZXNbZm91bmRlcnNXYWxsZXRdLmFkZChfYW1vdW50Rm91bmRlcnMpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKF9hbW91bnRTZW5kZXIpOwogICAgICAgIGludkJhbGFuY2VzW21zZy5zZW5kZXJdID0gaW52QmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKF9hbW91bnRTZW5kZXIpLmFkZChfYW1vdW50Rm91bmRlcnMpLmFkZChfYW1vdW50UHJvamVjdCk7CiAgICAgICAgdGdlU2V0dGluZ3NBbW91bnRDb2xsZWN0ID0gdGdlU2V0dGluZ3NBbW91bnRDb2xsZWN0LmFkZChfYW1vdW50UHJvamVjdCtfYW1vdW50Rm91bmRlcnMrX2Ftb3VudFNlbmRlcik7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudFByb2plY3QrX2Ftb3VudEZvdW5kZXJzK19hbW91bnRTZW5kZXIpOwogICAgICAgIFRyYW5zZmVyKDB4MCwgbXNnLnNlbmRlciwgX2Ftb3VudFNlbmRlcik7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBwcm9qZWN0V2FsbGV0LCBfYW1vdW50UHJvamVjdCk7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBmb3VuZGVyc1dhbGxldCwgX2Ftb3VudEZvdW5kZXJzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfaW50ZXJuYWxUZ2VTZXRMaXZlKCkgaW50ZXJuYWwgewogICAgICAgIHRnZUxpdmUgPSB0cnVlOwogICAgICAgIHRnZVN0YXJ0QmxvY2sgPSBibG9jay5udW1iZXI7CiAgICAgICAgdGdlU2V0dGluZ3NBbW91bnRDb2xsZWN0ID0gMDsKICAgIH0KCn0='.
	

]
