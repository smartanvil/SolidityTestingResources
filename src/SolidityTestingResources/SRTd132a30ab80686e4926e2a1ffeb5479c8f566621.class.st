Class {
	#name : #SRTd132a30ab80686e4926e2a1ffeb5479c8f566621,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd132a30ab80686e4926e2a1ffeb5479c8f566621 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBFUkMyMCB7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgovL1NhZmUgbWF0aApjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA+IDApOwogICAgdWludCBjID0gYSAvIGI7CiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjPj1hICYmIGM+PWIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIFNhZmVNYXRoIHsKCiAgLyogVG9rZW4gc3VwcGx5IGdvdCBpbmNyZWFzZWQgYW5kIGEgbmV3IG93bmVyIHJlY2VpdmVkIHRoZXNlIHRva2VucyAqLwogIGV2ZW50IE1pbnRlZChhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCk7CgogIC8qIEFjdHVhbCBiYWxhbmNlcyBvZiB0b2tlbiBob2xkZXJzICovCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAvKiBhcHByb3ZlKCkgYWxsb3dhbmNlcyAqLwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgLyogSW50ZXJmYWNlIGRlY2xhcmF0aW9uICovCiAgZnVuY3Rpb24gaXNUb2tlbigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sIFllcykgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICB1aW50IF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlc1tfZnJvbV0sIF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoX2FsbG93YW5jZSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9hZGRyZXNzKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfYWRkcmVzc107CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9Cgp9Cgpjb250cmFjdCBTVFRUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiU3ludGhlc3RlY2ggVG9rZW4iOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiU1RUIjsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDE4OwogICAgdWludCBwdWJsaWMgdG90YWxTdXBwbHkgPSAxODAwMDAwMCAqICgxMCAqKiB1aW50KGRlY2ltYWxzKSk7Ly9Dcm93ZHNhbGUgc3VwcGx5CiAgICB1aW50IHB1YmxpYyBwb29sSW52ZXN0b3JzID0gMzAwMDAwMCAqICgxMCAqKiB1aW50KGRlY2ltYWxzKSk7Ly9FYXJseSBpbnZlc3RvcnMgcG9vbAogICAgdWludCBwdWJsaWMgcG9vbEJvdW50eSA9IDE1MDAwMCAqICgxMCAqKiB1aW50KGRlY2ltYWxzKSk7Ly9Cb3VudHkgcG9vbAogICAgdWludCBwdWJsaWMgcG9vbFByZXNhbGUgPSA3MDAwMDAgKiAoMTAgKiogdWludChkZWNpbWFscykpOy8vUHJlc2FsZSBwb29sCiAgICB1aW50IHB1YmxpYyBwb29sU2FsZSA9IDE0MTUwMDAwICogKDEwICoqIHVpbnQoZGVjaW1hbHMpKTsvL1NhbGUgcG9vbAoJdWludCBwdWJsaWMgb3duZXJJbml0aWFsQmFsYW5jZSA9IDM4NTAwMDAgKiAoMTAgKiogdWludChkZWNpbWFscykpOy8vQWRkIHJlc2VydmVkIHBvb2wgdG9rZW5zIHRvIHRoZSBvd25lciBhZGRyZXNzCgl1aW50IHB1YmxpYyBzZWxsUHJpY2UgPSAxMDAwMDAwMDAwMDAwMDAwIHdlaTsvL1Rva2VucyBhcmUgc29sZCBmb3IgdGhpcyBtYW51YWwgcHJpY2UsIHJhdGhlciB0aGFuIHByZWRlZmluZWQgcHJpY2UuCiAgICAKICAgIC8vQWRkcmVzc2VzIHRoYXQgYXJlIGFsbG93ZWQgdG8gdHJhbnNmZXIgdG9rZW5zCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBhbGxvd2VkVHJhbnNmZXI7CgkKICAgIC8vQm9udXNlcyBmb3Igc2VsZWN0ZWQgYWRkcmVzc2VzCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBzcGVjaWFsQm9udXM7CiAgICAKCS8vVGVjaG5pY2FsIHZhcmlhYmxlcyB0byBzdG9yZSBzdGF0ZXMKCWJvb2wgcHVibGljIFRyYW5zZmVyQWxsb3dlZCA9IHRydWU7Ly9Ub2tlbiB0cmFuc2ZlcnMgYXJlIGJsb2NrZWQKICAgIGJvb2wgcHVibGljIENyb3dkc2FsZVBhdXNlZCA9IGZhbHNlOyAvL1doZXRoZXIgdGhlIENyb3dkc2FsZSBpcyBub3cgc3VzcGVuZGVkICh0cnVlIG9yIGZhbHNlKQogICAgdWludCBwdWJsaWMgY3VycmVudEJvbnVzID0gMDsvL0N1cnJlbnQgYm9udXMgdG8gdG9rZW5zIHB1cmNoYXNlcwoJCiAgICAvL1RlY2huaWNhbCB2YXJpYWJsZXMgdG8gc3RvcmUgc3RhdGlzdGljYWwgZGF0YQoJdWludCBwdWJsaWMgU3RhdHNFdGhlcmV1bVJhaXNlZCA9IDAgd2VpOy8vVG90YWwgRXRoZXJldW0gcmFpc2VkCgl1aW50IHB1YmxpYyBTdGF0c1NvbGQgPSAwOy8vU29sZCB0b2tlbnMgYW1vdW50Cgl1aW50IHB1YmxpYyBTdGF0c01pbnRlZCA9IDA7Ly9NaW50ZWQgdG9rZW5zIGFtb3VudAoJdWludCBwdWJsaWMgU3RhdHNSZXNlcnZlZCA9IDA7Ly9SZXNlcnZlZCB0b2tlbnMgYW1vdW50Cgl1aW50IHB1YmxpYyBTdGF0c1RvdGFsID0gMDsvL092ZXJhbGwgdG9rZW5zIGFtb3VudAoKICAgIC8vRXZlbnQgbG9ncwogICAgZXZlbnQgQnV5KGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsIHVpbnQgZXRoLCB1aW50IHRva2VucywgdWludCBib251cyk7Ly9Ub2tlbnMgcHVyY2hhc2VkCiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50IHRva2Vucyk7Ly8gVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgbWludGVkCiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50IHRva2Vucyk7Ly8gVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgYnVybnQKICAgIGV2ZW50IFByaWNlQ2hhbmdlZChzdHJpbmcgX3RleHQsIHVpbnQgX3Rva2VuUHJpY2UpOy8vTWFudWFsIHRva2VuIHByaWNlCiAgICBldmVudCBCb251c0NoYW5nZWQoc3RyaW5nIF90ZXh0LCB1aW50IF9wZXJjZW50KTsvL0Nyb3dkc2FsZSBib251cyBwZXJjZW50IGZvciBlYWNoIHB1cmNoYXNlCiAgICAKICAgIGFkZHJlc3MgcHVibGljIG93bmVyID0gMHgwOy8vQWRtaW4gYWN0aW9ucwogICAgYWRkcmVzcyBwdWJsaWMgbWludGVyID0gMHgwOy8vTWludGVyIHRva2VucwogICAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0ID0gMHgwOy8vV2FsbGV0IHRvIHJlY2VpdmUgRVRICiAKZnVuY3Rpb24gU1RUVG9rZW4oYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX21pbnRlciwgYWRkcmVzcyBfd2FsbGV0KSBwYXlhYmxlIHsKICAgIAogICAgICBvd25lciA9IF9vd25lcjsKICAgICAgbWludGVyID0gX21pbnRlcjsKICAgICAgd2FsbGV0ID0gX3dhbGxldDsKICAgIAogICAgICBiYWxhbmNlc1tvd25lcl0gPSAwOwogICAgICBiYWxhbmNlc1ttaW50ZXJdID0gMDsKICAgICAgYmFsYW5jZXNbd2FsbGV0XSA9IDA7CiAgICAKICAgICAgLy9BZGQgcmVzZXJ2ZWQgcG9vbCB0b2tlbnMgdG8gdGhlIG93bmVyIGFkZHJlc3MKICAgICAgYmFsYW5jZXNbb3duZXJdID0gc2FmZUFkZChiYWxhbmNlc1tvd25lcl0sIG93bmVySW5pdGlhbEJhbGFuY2UpOwogICAgICBTdGF0c1Jlc2VydmVkID0gc2FmZUFkZChTdGF0c1Jlc2VydmVkLCBvd25lckluaXRpYWxCYWxhbmNlKTsvL1VwZGF0ZSBudW1iZXIgb2YgdG9rZW5zIHJlc2VydmVkCiAgICAgIFN0YXRzVG90YWwgPSBzYWZlQWRkKFN0YXRzVG90YWwsIG93bmVySW5pdGlhbEJhbGFuY2UpOy8vVXBkYXRlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMKICAgICAgVHJhbnNmZXIoMCwgdGhpcywgb3duZXJJbml0aWFsQmFsYW5jZSk7CiAgICAgIFRyYW5zZmVyKHRoaXMsIG93bmVyLCBvd25lckluaXRpYWxCYWxhbmNlKTsKICAgIAogICAgICBhbGxvd2VkVHJhbnNmZXJbb3duZXJdID0gdHJ1ZTsKICAgICAgYWxsb3dlZFRyYW5zZmVyW21pbnRlcl0gPSB0cnVlOwogICAgICBhbGxvd2VkVHJhbnNmZXJbd2FsbGV0XSA9IHRydWU7CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlNaW50ZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG1pbnRlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvL1RyYW5zYWN0aW9uIHJlY2VpdmVkIC0gcnVuIHRoZSBwdXJjaGFzZSBmdW5jdGlvbgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBidXkoKTsKICAgIH0KICAgIAogICAgLy9TZWUgdGhlIGN1cnJlbnQgdG9rZW4gcHJpY2UgaW4gd2VpIChodHRwczovL2V0aGVyY29udmVydGVyLm9ubGluZSB0byBjb252ZXJ0IHRvIG90aGVyIHVuaXRzLCBzdWNoIGFzIEVUSCkKICAgIGZ1bmN0aW9uIHByaWNlKCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBzZWxsUHJpY2U7CiAgICB9CiAgICAKICAgIC8vTWFudWFsbHkgc2V0IHRoZSB0b2tlbiBwcmljZSAoaW4gd2VpIC0gaHR0cHM6Ly9ldGhlcmNvbnZlcnRlci5vbmxpbmUpCiAgICBmdW5jdGlvbiBzZXRUb2tlblByaWNlKHVpbnQgX3Rva2VuUHJpY2UpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSBtaW50ZXIpOwogICAgICAgIHNlbGxQcmljZSA9IF90b2tlblByaWNlOwogICAgICAgIFByaWNlQ2hhbmdlZCgiTmV3IHByaWNlIGlzICIsIF90b2tlblByaWNlKTsKICAgIH0KICAgIAogICAgLy9TZXQgdGhlIGNyb3dkc2FsZSBib251cyBwZXJjZW50IGZvciBlYWNoIHB1cmNoYXNlCiAgICBmdW5jdGlvbiBzZXRCb251cyh1aW50IF9wZXJjZW50KSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gbWludGVyKTsKICAgICAgICByZXF1aXJlKF9wZXJjZW50ID49MCk7CiAgICAgICAgY3VycmVudEJvbnVzID0gc2FmZUFkZCgxMDAsX3BlcmNlbnQpOwogICAgICAgIEJvbnVzQ2hhbmdlZCgiTmV3IGNyb3dkc2FsZSBib251cyBpcyAiLCBfcGVyY2VudCk7CiAgICB9CiAgICAKICAgIC8vU2V0IHRoZSBib251cyBwZXJjZW50IGZvciBzZWxlY3RlZCBhZGRyZXNzCiAgICBmdW5jdGlvbiBzZXRTcGVjaWFsQm9udXMoYWRkcmVzcyBfdGFyZ2V0LCB1aW50IF9wZXJjZW50KSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gbWludGVyKTsKICAgICAgICByZXF1aXJlKF9wZXJjZW50ID49MCk7CiAgICAgICAgc3BlY2lhbEJvbnVzW190YXJnZXRdID0gc2FmZUFkZCgxMDAsX3BlcmNlbnQpOwogICAgfQogICAgIAogICAgLy9BbGxvdyBvciBwcm9oaWJpdCB0b2tlbiB0cmFuc2ZlcnMKICAgIGZ1bmN0aW9uIHNldFRyYW5zZmVyQWxsb3dhbmNlKGJvb2wgX2FsbG93YW5jZSkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBUcmFuc2ZlckFsbG93ZWQgPSBfYWxsb3dhbmNlOwogICAgfQogICAgCiAgICAvL1RlbXBvcmFyaWx5IHN1c3BlbmQgdG9rZW4gc2FsZQogICAgZnVuY3Rpb24gZXZlbnRQYXVzZShib29sIF9wYXVzZSkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBDcm93ZHNhbGVQYXVzZWQgPSBfcGF1c2U7CiAgICB9CiAgICAKICAgIC8vIFNlbmQgYF9hbW91bnRgIG9mIHRva2VucyB0byBgX3RhcmdldGAKICAgIGZ1bmN0aW9uIG1pbnRUb2tlbnMoYWRkcmVzcyBfdGFyZ2V0LCB1aW50IF9hbW91bnQpIGV4dGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSBtaW50ZXIpOwogICAgICAgIHJlcXVpcmUoX2Ftb3VudCA+IDApOy8vTnVtYmVyIG9mIHRva2VucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwCiAgICAgICAgdWludCBhbW91bnQ9X2Ftb3VudCAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CiAgICAgICAgcmVxdWlyZShzYWZlQWRkKFN0YXRzVG90YWwsIGFtb3VudCkgPD0gdG90YWxTdXBwbHkpOy8vVGhlIGFtb3VudCBvZiB0b2tlbnMgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiBUb3RhbCBzdXBwbHkKICAgICAgICBiYWxhbmNlc1tfdGFyZ2V0XSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RhcmdldF0sIGFtb3VudCk7CiAgICAgICAgU3RhdHNNaW50ZWQgPSBzYWZlQWRkKFN0YXRzTWludGVkLCBhbW91bnQpOy8vVXBkYXRlIG51bWJlciBvZiB0b2tlbnMgbWludGVkCiAgICAgICAgU3RhdHNUb3RhbCA9IHNhZmVBZGQoU3RhdHNUb3RhbCwgYW1vdW50KTsvL1VwZGF0ZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zCiAgICAgICAgVHJhbnNmZXIoMCwgdGhpcywgYW1vdW50KTsKICAgICAgICBUcmFuc2Zlcih0aGlzLCBfdGFyZ2V0LCBhbW91bnQpOwogICAgICAgIE1pbnQoX3RhcmdldCwgYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gRGVjcmVhc2UgdXNlciBiYWxhbmNlCiAgICBmdW5jdGlvbiBkZWNyZWFzZVRva2VucyhhZGRyZXNzIF90YXJnZXQsIHVpbnQgX2Ftb3VudCkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lciB8fCBtc2cuc2VuZGVyID09IG1pbnRlcik7CiAgICAgICAgcmVxdWlyZShfYW1vdW50ID4gMCk7Ly9OdW1iZXIgb2YgdG9rZW5zIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAKICAgICAgICB1aW50IGFtb3VudD1fYW1vdW50ICogKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsKICAgICAgICBiYWxhbmNlc1tfdGFyZ2V0XSA9IHNhZmVTdWIoYmFsYW5jZXNbX3RhcmdldF0sIGFtb3VudCk7CiAgICAgICAgU3RhdHNNaW50ZWQgPSBzYWZlU3ViKFN0YXRzTWludGVkLCBhbW91bnQpOy8vVXBkYXRlIG51bWJlciBvZiB0b2tlbnMgbWludGVkCiAgICAgICAgU3RhdHNUb3RhbCA9IHNhZmVTdWIoU3RhdHNUb3RhbCwgYW1vdW50KTsvL1VwZGF0ZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zCiAgICAgICAgVHJhbnNmZXIoX3RhcmdldCwgMCwgYW1vdW50KTsKICAgICAgICBCdXJuKF90YXJnZXQsIGFtb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIEFsbG93IGBfdGFyZ2V0YCBtYWtlIHRva2VuIHRyYW5mZXJzCiAgICBmdW5jdGlvbiBhbGxvd1RyYW5zZmVyKGFkZHJlc3MgX3RhcmdldCwgYm9vbCBfYWxsb3cpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgYWxsb3dlZFRyYW5zZmVyW190YXJnZXRdID0gX2FsbG93OwogICAgfQoKICAgIC8vVGhlIGZ1bmN0aW9uIG9mIGJ1eWluZyB0b2tlbnMgb24gQ3Jvd2RzYWxlCiAgICBmdW5jdGlvbiBidXkoKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zKGJvb2wpIHsKCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IG93bmVyKTsvL1RoZSBmb3VuZGVyIGNhbm5vdCBidXkgdG9rZW5zCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IG1pbnRlcik7Ly9UaGUgbWludGVyIGNhbm5vdCBidXkgdG9rZW5zCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IHdhbGxldCk7Ly9UaGUgd2FsbGV0IGFkZHJlc3MgY2Fubm90IGJ1eSB0b2tlbnMKICAgICAgICByZXF1aXJlKCFDcm93ZHNhbGVQYXVzZWQpOy8vUHVyY2hhc2UgcGVybWl0dGVkIGlmIENyb3dkc2FsZSBpcyBwYXVzZWQKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBwcmljZSgpKTsvL1RoZSBhbW91bnQgcmVjZWl2ZWQgaW4gd2VpIG11c3QgYmUgZ3JlYXRlciB0aGFuIHRoZSBjb3N0IG9mIDEgdG9rZW4KCiAgICAgICAgdWludCB0b2tlbnMgPSBtc2cudmFsdWUvcHJpY2UoKTsvL051bWJlciBvZiB0b2tlbnMgdG8gYmUgcmVjZWl2ZWQgYnkgdGhlIGJ1eWVyCiAgICAgICAgcmVxdWlyZSh0b2tlbnMgPiAwKTsvL051bWJlciBvZiB0b2tlbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMAogICAgICAgIAogICAgICAgIC8vQWRkIGJvbnVzIHRva2VucwogICAgICAgIGlmKGN1cnJlbnRCb251cyA+IDApewogICAgICAgIHVpbnQgYm9udXMgPSBzYWZlTXVsKHRva2VucywgY3VycmVudEJvbnVzKTsKICAgICAgICBib251cyA9IHNhZmVEaXYoYm9udXMsIDEwMCk7CiAgICAgICAgdG9rZW5zID0gc2FmZUFkZChib251cywgdG9rZW5zKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy9BZGQgYm9udXMgdG9rZW5zIGlmIHRoaXMgYnV5ZXIgaGF2ZSBzcGVjaWFsIGJvbnVzCiAgICAgICAgaWYoc3BlY2lhbEJvbnVzW21zZy5zZW5kZXJdID4gMCl7CiAgICAgICAgdWludCBhZGRyZXNzQm9udXMgPSBzYWZlTXVsKHRva2Vucywgc3BlY2lhbEJvbnVzW21zZy5zZW5kZXJdKTsKICAgICAgICBhZGRyZXNzQm9udXMgPSBzYWZlRGl2KGFkZHJlc3NCb251cywgMTAwKTsKICAgICAgICB0b2tlbnMgPSBzYWZlQWRkKGFkZHJlc3NCb251cywgdG9rZW5zKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdWludCB0b2tlbnNUb0FkZD10b2tlbnMgKiAoMTAgKiogdWludDI1NihkZWNpbWFscykpOwogICAgICAgIAogICAgICAgIHJlcXVpcmUoc2FmZUFkZChTdGF0c1NvbGQsIHRva2Vuc1RvQWRkKSA8PSBwb29sU2FsZSk7Ly9UaGUgYW1vdW50IG9mIHNvbGQgdG9rZW5zIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gdGhlIFNhbGUgc3VwcGx5CiAgICAgICAgCiAgICAgICAgd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7Ly9TZW5kIHJlY2VpdmVkIEVUSCB0byB0aGUgZnVuZHJhaXNpbmcgcHVyc2UKICAgICAgICAKICAgICAgICAvL0NyZWRpdGluZyBvZiB0b2tlbnMgdG8gdGhlIGJ1eWVyCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlQWRkKGJhbGFuY2VzW21zZy5zZW5kZXJdLCB0b2tlbnNUb0FkZCk7CiAgICAgICAgU3RhdHNTb2xkID0gc2FmZUFkZChTdGF0c1NvbGQsIHRva2Vuc1RvQWRkKTsvL1VwZGF0ZSBudW1iZXIgb2YgdG9rZW5zIHNvbGQKICAgICAgICBTdGF0c1RvdGFsID0gc2FmZUFkZChTdGF0c1RvdGFsLCB0b2tlbnNUb0FkZCk7Ly9VcGRhdGUgdG90YWwgbnVtYmVyIG9mIHRva2VucwogICAgICAgIFRyYW5zZmVyKDAsIHRoaXMsIHRva2Vuc1RvQWRkKTsKICAgICAgICBUcmFuc2Zlcih0aGlzLCBtc2cuc2VuZGVyLCB0b2tlbnNUb0FkZCk7CiAgICAgICAgCiAgICAgICAgU3RhdHNFdGhlcmV1bVJhaXNlZCA9IHNhZmVBZGQoU3RhdHNFdGhlcmV1bVJhaXNlZCwgbXNnLnZhbHVlKTsvL1VwZGF0ZSB0b3RhbCBFVEggY29sbGVjdGVkCiAgICAgICAgCiAgICAgICAgLy9SZWNvcmQgZXZlbnQgbG9ncyB0byB0aGUgYmxvY2tjaGFpbgogICAgICAgIEJ1eShtc2cuc2VuZGVyLCBtc2cudmFsdWUsIHRva2Vuc1RvQWRkLCBjdXJyZW50Qm9udXMpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAKICAgICAgICAvL0ZvcmJpZCB0b2tlbiB0cmFuc2ZlcnMKICAgICAgICBpZighVHJhbnNmZXJBbGxvd2VkKXsKICAgICAgICAgICAgcmVxdWlyZShhbGxvd2VkVHJhbnNmZXJbbXNnLnNlbmRlcl0pOwogICAgICAgIH0KICAgICAgICAKICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgCiAgICAgICAgLy9Gb3JiaWQgdG9rZW4gdHJhbnNmZXJzCiAgICAgICAgaWYoIVRyYW5zZmVyQWxsb3dlZCl7CiAgICAgICAgICAgIHJlcXVpcmUoYWxsb3dlZFRyYW5zZmVyW21zZy5zZW5kZXJdKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIC8vQ2hhbmdlIG93bmVyCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF90bykgZXh0ZXJuYWwgb25seU93bmVyKCkgewogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tvd25lcl07CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gMDsKICAgICAgICBvd25lciA9IF90bzsKICAgIH0KCiAgICAvL0NoYW5nZSBtaW50ZXIKICAgIGZ1bmN0aW9uIGNoYW5nZU1pbnRlcihhZGRyZXNzIF90bykgZXh0ZXJuYWwgb25seU93bmVyKCkgewogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1ttaW50ZXJdOwogICAgICAgIGJhbGFuY2VzW21pbnRlcl0gPSAwOwogICAgICAgIG1pbnRlciA9IF90bzsKICAgIH0KCiAgICAvL0NoYW5nZSB3YWxsZXQKICAgIGZ1bmN0aW9uIGNoYW5nZVdhbGxldChhZGRyZXNzIF90bykgZXh0ZXJuYWwgb25seU93bmVyKCkgewogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1t3YWxsZXRdOwogICAgICAgIGJhbGFuY2VzW3dhbGxldF0gPSAwOwogICAgICAgIHdhbGxldCA9IF90bzsKICAgIH0KfQ=='.
	

]
