Class {
	#name : #SRT77ceff4173a56cd22b6184fa59c668b364ae55b8,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT77ceff4173a56cd22b6184fa59c668b364ae55b8 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CgogICAgdWludCBjb25zdGFudCBEQVlfSU5fU0VDT05EUyA9IDg2NDAwOwogICAgdWludCBjb25zdGFudCBCQVNFID0gMTAwMDAwMDAwMDAwMDAwMDAwMDsKICAgIHVpbnQgY29uc3RhbnQgcHJlSWNvUHJpY2UgPSA0MTAxOwogICAgdWludCBjb25zdGFudCBpY29QcmljZSA9IDIyNTU7CgogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiAhPSAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gbXVsQnlGcmFjdGlvbih1aW50MjU2IG51bWJlciwgdWludDI1NiBudW1lcmF0b3IsIHVpbnQyNTYgZGVub21pbmF0b3IpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gZGl2KG11bChudW1iZXIsIG51bWVyYXRvciksIGRlbm9taW5hdG9yKTsKICAgIH0KCiAgICAvLyBwcmVzYWxlIHZvbHVtZSBib251cyBjYWxjdWxhdGlvbiAKICAgIGZ1bmN0aW9uIHByZXNhbGVWb2x1bWVCb251cyh1aW50MjU2IHByaWNlKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CgogICAgICAgIC8vIHByZUNUWCA+IEVUSAogICAgICAgIHVpbnQyNTYgdmFsID0gZGl2KHByaWNlLCBwcmVJY29QcmljZSk7CgogICAgICAgIGlmKHZhbCA+PSAxMDAgKiBCQVNFKSByZXR1cm4gYWRkKHByaWNlLCBwcmljZSAqIDEvMjApOyAvLyA1JQogICAgICAgIGlmKHZhbCA+PSA1MCAqIEJBU0UpIHJldHVybiBhZGQocHJpY2UsIHByaWNlICogMy8xMDApOyAvLyAzJQogICAgICAgIGlmKHZhbCA+PSAyMCAqIEJBU0UpIHJldHVybiBhZGQocHJpY2UsIHByaWNlICogMS81MCk7ICAvLyAyJQoKICAgICAgICByZXR1cm4gcHJpY2U7CiAgICB9CgogICAgLy8gSUNPIHZvbHVtZSBib251cyBjYWxjdWxhdGlvbgogICAgZnVuY3Rpb24gdm9sdW1lQm9udXModWludDI1NiBldGhlclZhbHVlKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CgogICAgICAgIGlmKGV0aGVyVmFsdWUgPj0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMCkgcmV0dXJuIDE1Oy8vICsxNSUgdG9rZW5zCiAgICAgICAgaWYoZXRoZXJWYWx1ZSA+PSAgNTAwMDAwMDAwMDAwMDAwMDAwMDAwKSByZXR1cm4gMTA7IC8vICsxMCUgdG9rZW5zCiAgICAgICAgaWYoZXRoZXJWYWx1ZSA+PSAgMzAwMDAwMDAwMDAwMDAwMDAwMDAwKSByZXR1cm4gNzsgIC8vICs3JSB0b2tlbnMKICAgICAgICBpZihldGhlclZhbHVlID49ICAxMDAwMDAwMDAwMDAwMDAwMDAwMDApIHJldHVybiA1OyAgLy8gKzUlIHRva2VucwogICAgICAgIGlmKGV0aGVyVmFsdWUgPj0gICA1MDAwMDAwMDAwMDAwMDAwMDAwMCkgcmV0dXJuIDM7ICAgLy8gKzMlIHRva2VucwogICAgICAgIGlmKGV0aGVyVmFsdWUgPj0gICAyMDAwMDAwMDAwMDAwMDAwMDAwMCkgcmV0dXJuIDI7ICAgLy8gKzIlIHRva2VucwoKICAgICAgICByZXR1cm4gMDsKICAgIH0KCiAgICAvLyBJQ08gZGF0ZSBib251cyBjYWxjdWxhdGlvbgogICAgZnVuY3Rpb24gZGF0ZUJvbnVzKHVpbnQgc3RhcnRJY28pIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKCiAgICAgICAgLy8gZGF5IGZyb20gSUNPIHN0YXJ0CiAgICAgICAgdWludCBkYXlzRnJvbVN0YXJ0ID0gKG5vdyAtIHN0YXJ0SWNvKSAvIERBWV9JTl9TRUNPTkRTICsgMTsKCiAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSAxKSByZXR1cm4gMTU7IC8vICsxNSUgdG9rZW5zCiAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSAyKSByZXR1cm4gMTA7IC8vICsxMCUgdG9rZW5zCiAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSAzKSByZXR1cm4gMTA7IC8vICsxMCUgdG9rZW5zCiAgICAgICAgaWYoZGF5c0Zyb21TdGFydCA9PSA0KSByZXR1cm4gNTsgIC8vICs1JSB0b2tlbnMKICAgICAgICBpZihkYXlzRnJvbVN0YXJ0ID09IDUpIHJldHVybiA1OyAgLy8gKzUlIHRva2VucwogICAgICAgIGlmKGRheXNGcm9tU3RhcnQgPT0gNikgcmV0dXJuIDU7ICAvLyArNSUgdG9rZW5zCgogICAgICAgIC8vIG5vIGRpc2NvdW50CiAgICAgICAgcmV0dXJuIDA7CiAgICB9Cgp9CgoKLy8vIEltcGxlbWVudHMgRVJDIDIwIFRva2VuIHN0YW5kYXJkOiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKLy8vIEB0aXRsZSBBYnN0cmFjdCB0b2tlbiBjb250cmFjdCAtIEZ1bmN0aW9ucyB0byBiZSBpbXBsZW1lbnRlZCBieSB0b2tlbiBjb250cmFjdHMuCgpjb250cmFjdCBBYnN0cmFjdFRva2VuIHsKICAgIC8vIFRoaXMgaXMgbm90IGFuIGFic3RyYWN0IGZ1bmN0aW9uLCBiZWNhdXNlIHNvbGMgd29uJ3QgcmVjb2duaXplIGdlbmVyYXRlZCBnZXR0ZXIgZnVuY3Rpb25zIGZvciBwdWJsaWMgdmFyaWFibGVzIGFzIGZ1bmN0aW9ucwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7fQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBJc3N1YW5jZShhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEFic3RyYWN0VG9rZW4gewogICAgLyoKICAgICAqICBEYXRhIHN0cnVjdHVyZXMKICAgICAqLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgb3duZXJBcHBlbmRlZDsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgYWRkcmVzc1tdIHB1YmxpYyBvd25lcnM7CgogICAgLyoKICAgICAqICBSZWFkIGFuZCB3cml0ZSBzdG9yYWdlIGZ1bmN0aW9ucwogICAgICovCiAgICAvLy8gQGRldiBUcmFuc2ZlcnMgc2VuZGVyJ3MgdG9rZW5zIHRvIGEgZ2l2ZW4gYWRkcmVzcy4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiB0b2tlbiByZWNlaXZlci4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIE51bWJlciBvZiB0b2tlbnMgdG8gdHJhbnNmZXIuCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgaWYoIW93bmVyQXBwZW5kZWRbX3RvXSkgewogICAgICAgICAgICAgICAgb3duZXJBcHBlbmRlZFtfdG9dID0gdHJ1ZTsKICAgICAgICAgICAgICAgIG93bmVycy5wdXNoKF90byk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIGFsbG93ZWQgdGhpcmQgcGFydHkgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIGZyb20gd2hlcmUgdG9rZW5zIGFyZSB3aXRoZHJhd24uCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIHRvIHdoZXJlIHRva2VucyBhcmUgc2VudC4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIE51bWJlciBvZiB0b2tlbnMgdG8gdHJhbnNmZXIuCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgaWYoIW93bmVyQXBwZW5kZWRbX3RvXSkgewogICAgICAgICAgICAgICAgb3duZXJBcHBlbmRlZFtfdG9dID0gdHJ1ZTsKICAgICAgICAgICAgICAgIG93bmVycy5wdXNoKF90byk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBAZGV2IFJldHVybnMgbnVtYmVyIG9mIHRva2VucyBvd25lZCBieSBnaXZlbiBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLy8vIEBkZXYgU2V0cyBhcHByb3ZlZCBhbW91bnQgb2YgdG9rZW5zIGZvciBzcGVuZGVyLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgYWxsb3dlZCBhY2NvdW50LgogICAgLy8vIEBwYXJhbSBfdmFsdWUgTnVtYmVyIG9mIGFwcHJvdmVkIHRva2Vucy4KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qCiAgICAgKiBSZWFkIHN0b3JhZ2UgZnVuY3Rpb25zCiAgICAgKi8KICAgIC8vLyBAZGV2IFJldHVybnMgbnVtYmVyIG9mIGFsbG93ZWQgdG9rZW5zIGZvciBnaXZlbiBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiB0b2tlbiBzcGVuZGVyLgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKfQoKCmNvbnRyYWN0IENhclRheGlUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBTYWZlTWF0aCB7CiAgICAvKgogICAgICogVG9rZW4gbWV0YSBkYXRhCiAgICAgKi8KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJDYXJUYXhpIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkNUWCI7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIC8vIHRvdHRhbCBzdXBwbHkKCiAgICBhZGRyZXNzIHB1YmxpYyBpY29Db250cmFjdCA9IDB4MDsKICAgIC8qCiAgICAgKiBNb2RpZmllcnMKICAgICAqLwoKICAgIG1vZGlmaWVyIG9ubHlJY29Db250cmFjdCgpIHsKICAgICAgICAvLyBvbmx5IElDTyBjb250cmFjdCBpcyBhbGxvd2VkIHRvIHByb2NlZWQKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gaWNvQ29udHJhY3QpOwogICAgICAgIF87CiAgICB9CgogICAgLyoKICAgICAqIENvbnRyYWN0IGZ1bmN0aW9ucwogICAgICovCgogICAgLy8vIEBkZXYgQ29udHJhY3QgaXMgbmVlZGVkIGluIGljb0NvbnRyYWN0IGFkZHJlc3MKICAgIC8vLyBAcGFyYW0gX2ljb0NvbnRyYWN0IEFkZHJlc3Mgb2YgYWNjb3VudCB3aGljaCB3aWxsIGJlIG1pbnQgdG9rZW5zCiAgICBmdW5jdGlvbiBDYXJUYXhpVG9rZW4oYWRkcmVzcyBfaWNvQ29udHJhY3QpIHsKICAgICAgICBhc3NlcnQoX2ljb0NvbnRyYWN0ICE9IDB4MCk7CiAgICAgICAgaWNvQ29udHJhY3QgPSBfaWNvQ29udHJhY3Q7CiAgICB9CgogICAgLy8vIEBkZXYgQnVybnMgdG9rZW5zIGZyb20gYWRkcmVzcy4gSXQncyBjYW4gYmUgYXBwbGllZCBieSBhY2NvdW50IHdpdGggYWRkcmVzcyB0aGlzLmljb0NvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9mcm9tIEFkZHJlc3Mgb2YgYWNjb3VudCwgZnJvbSB3aGljaCB3aWxsIGJlIGJ1cm5lZCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEFtb3VudCBvZiB0b2tlbnMsIHRoYXQgd2lsbCBiZSBidXJuZWQKICAgIGZ1bmN0aW9uIGJ1cm5Ub2tlbnMoYWRkcmVzcyBfZnJvbSwgdWludCBfdmFsdWUpIG9ubHlJY29Db250cmFjdCB7CiAgICAgICAgYXNzZXJ0KF9mcm9tICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gc3ViKGJhbGFuY2VzW19mcm9tXSwgX3ZhbHVlKTsKICAgIH0KCiAgICAvLy8gQGRldiBBZGRzIHRva2VucyB0byBhZGRyZXNzLiBJdCdzIGNhbiBiZSBhcHBsaWVkIGJ5IGFjY291bnQgd2l0aCBhZGRyZXNzIHRoaXMuaWNvQ29udHJhY3QKICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgYWNjb3VudCB0byB3aGljaCB0aGUgdG9rZW5zIHdpbGwgcGFzcwogICAgLy8vIEBwYXJhbSBfdmFsdWUgQW1vdW50IG9mIHRva2VucwogICAgZnVuY3Rpb24gZW1pdFRva2VucyhhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlJY29Db250cmFjdCB7CiAgICAgICAgYXNzZXJ0KF90byAhPSAweDApOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CgogICAgICAgIGJhbGFuY2VzW190b10gPSBhZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKCiAgICAgICAgaWYoIW93bmVyQXBwZW5kZWRbX3RvXSkgewogICAgICAgICAgICBvd25lckFwcGVuZGVkW190b10gPSB0cnVlOwogICAgICAgICAgICBvd25lcnMucHVzaChfdG8pOwogICAgICAgIH0KCiAgICB9CgogICAgZnVuY3Rpb24gZ2V0T3duZXIodWludCBpbmRleCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcywgdWludDI1NikgewogICAgICAgIHJldHVybiAob3duZXJzW2luZGV4XSwgYmFsYW5jZXNbb3duZXJzW2luZGV4XV0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE93bmVyQ291bnQoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIG93bmVycy5sZW5ndGg7CiAgICB9Cgp9CgoKY29udHJhY3QgQ2FyVGF4aUljbyBpcyBTYWZlTWF0aCB7CiAgICAvKgogICAgICogSUNPIG1ldGEgZGF0YQogICAgICovCiAgICBDYXJUYXhpVG9rZW4gcHVibGljIGNhcnRheGlUb2tlbjsKICAgIEFic3RyYWN0VG9rZW4gcHVibGljIHByZUljb1Rva2VuOwoKICAgIGVudW0gU3RhdGV7CiAgICAgICAgUGF1c2UsCiAgICAgICAgSW5pdCwKICAgICAgICBSdW5uaW5nLAogICAgICAgIFN0b3BwZWQsCiAgICAgICAgTWlncmF0ZWQKICAgIH0KCiAgICBTdGF0ZSBwdWJsaWMgY3VycmVudFN0YXRlID0gU3RhdGUuUGF1c2U7CgogICAgdWludCBwdWJsaWMgc3RhcnRJY29EYXRlID0gMDsKCiAgICAvLyBBZGRyZXNzIG9mIGFjY291bnQgdG8gd2hpY2ggZXRoZXJzIHdpbGwgYmUgdHJhbmZlcmVkIGluIGNhc2Ugb2Ygc3VjY2Vzc2Z1bCBJQ08KICAgIGFkZHJlc3MgcHVibGljIGVzY3JvdzsKICAgIC8vIEFkZHJlc3Mgb2YgbWFuYWdlcgogICAgYWRkcmVzcyBwdWJsaWMgaWNvTWFuYWdlcjsKICAgIC8vIEFkZHJlc3Mgb2YgYSBhY2NvdW50LCB0aGF0IHdpbGwgdHJhbnNmZXIgdG9rZW5zIGZyb20gcHJlLUlDTwogICAgYWRkcmVzcyBwdWJsaWMgdG9rZW5JbXBvcnRlciA9IDB4MDsKICAgIC8vIEFkZHJlc3NlcyBvZiBmb3VuZGVycyBhbmQgYm91bnR5T3duZXIKICAgIGFkZHJlc3MgcHVibGljIGZvdW5kZXIxOwogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlcjI7CiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGVyMzsKICAgIGFkZHJlc3MgcHVibGljIGZvdW5kZXI0OwogICAgYWRkcmVzcyBwdWJsaWMgYm91bnR5T3duZXI7CgogICAgLy8gNDg3LjUwMC4wMDAgQ1RYIHRva2VucwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgc3VwcGx5TGltaXQgPSA0ODc1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CgogICAgLy8gIDEyNTAwMDAwIENUWCBpcyB0b2tlbiBmb3IgYm91bnR5T3duZXIKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGJvdW50eU93bmVyc1Rva2VucyA9IDEyNTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwoKICAgIC8vIDEgRVRIID0gMjI1NSBDVFgKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFBSSUNFID0gMjI1NTsKCiAgICAvLyBCQVNFID0gMTBeMTgKICAgIHVpbnQgY29uc3RhbnQgQkFTRSA9IDEwMDAwMDAwMDAwMDAwMDAwMDA7CgogICAgLy8gMjAxOC4wMi4wNCAwNzowMCBVVEMKICAgIC8vIGZvdW5kZXJzJyByZXdhcmQgdGltZQogICAgdWludCBwdWJsaWMgZm91bmRlcnNSZXdhcmRUaW1lID0gMTUxNzcyNzYwMDsKCiAgICAvLyBBbW91bnQgb2YgaW1wb3J0ZWQgdG9rZW5zIGZyb20gcHJlLUlDTwogICAgdWludCBwdWJsaWMgaW1wb3J0ZWRUb2tlbnMgPSAwOwogICAgLy8gQW1vdW50IG9mIHNvbGQgdG9rZW5zIG9uIElDTwogICAgdWludCBwdWJsaWMgc29sZFRva2Vuc09uSWNvID0gMDsKICAgIC8vIEFtb3VudCBvZiBpc3N1ZWQgdG9rZW5zIG9uIHByZS1JQ08gPSAzMDQ3Ljk5OTk1MTgyODE2NTU4MjY2OSAqIDQxMDEKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IHNvbGRUb2tlbnNPblByZUljbyA9IDEyNDk5ODQ3ODAyNDQ3MzA4MDAwMDAwMDAwOwogICAgLy8gVG9rZW5zIHRvIGZvdW5kZXJzIGNhbiBiZSBzZW50IG9ubHkgaWYgc2VudFRva2Vuc1RvRm91bmRlcnMgPT0gZmFsc2UgYW5kIHRpbWUgPiBmb3VuZGVyc1Jld2FyZFRpbWUKICAgIGJvb2wgcHVibGljIHNlbnRUb2tlbnNUb0ZvdW5kZXJzID0gZmFsc2U7CiAgICAvLyBUb2tlbnMgdG8gYm91bnR5IG93bmVyIGNhbiBiZSBzZW50IG9ubHkgYWZ0ZXIgSUNPCiAgICBib29sIHB1YmxpYyBzZW50VG9rZW5zVG9Cb3VudHlPd25lciA9IGZhbHNlOwoKICAgIHVpbnQgcHVibGljIGV0aGVyUmFpc2VkID0gMDsKCiAgICAvKgogICAgICogTW9kaWZpZXJzCiAgICAgKi8KCiAgICBtb2RpZmllciB3aGVuSW5pdGlhbGl6ZWQoKSB7CiAgICAgICAgLy8gb25seSB3aGVuIGNvbnRyYWN0IGlzIGluaXRpYWxpemVkCiAgICAgICAgcmVxdWlyZShjdXJyZW50U3RhdGUgPj0gU3RhdGUuSW5pdCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5TWFuYWdlcigpIHsKICAgICAgICAvLyBvbmx5IElDTyBtYW5hZ2VyIGNhbiBkbyB0aGlzIGFjdGlvbgogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBpY29NYW5hZ2VyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9uSWNvUnVubmluZygpIHsKICAgICAgICAvLyBDaGVja3MsIGlmIElDTyBpcyBydW5uaW5nIGFuZCBoYXMgbm90IGJlZW4gc3RvcHBlZAogICAgICAgIHJlcXVpcmUoY3VycmVudFN0YXRlID09IFN0YXRlLlJ1bm5pbmcpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25JY29TdG9wcGVkKCkgewogICAgICAgIC8vIENoZWNrcyBpZiBJQ08gd2FzIHN0b3BwZWQgb3IgZGVhZGxpbmUgaXMgcmVhY2hlZAogICAgICAgIHJlcXVpcmUoY3VycmVudFN0YXRlID09IFN0YXRlLlN0b3BwZWQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbm90TWlncmF0ZWQoKSB7CiAgICAgICAgLy8gQ2hlY2tzIGlmIGJhc2UgY2FuIGJlIG1pZ3JhdGVkCiAgICAgICAgcmVxdWlyZShjdXJyZW50U3RhdGUgIT0gU3RhdGUuTWlncmF0ZWQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUltcG9ydGVyKCkgewogICAgICAgIC8vIG9ubHkgaW1wb3J0ZXIgY29udHJhY3QgaXMgYWxsb3dlZCB0byBwcm9jZWVkCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHRva2VuSW1wb3J0ZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLy8vIEBkZXYgQ29uc3RydWN0b3Igb2YgSUNPLiBSZXF1aXJlcyBhZGRyZXNzIG9mIGljb01hbmFnZXIsCiAgICAvLy8gQHBhcmFtIF9pY29NYW5hZ2VyIEFkZHJlc3Mgb2YgSUNPIG1hbmFnZXIKICAgIC8vLyBAcGFyYW0gX3ByZUljb1Rva2VuIEFkZHJlc3Mgb2YgcHJlLUlDTyBjb250cmFjdAogICAgZnVuY3Rpb24gQ2FyVGF4aUljbyhhZGRyZXNzIF9pY29NYW5hZ2VyLCBhZGRyZXNzIF9wcmVJY29Ub2tlbikgewogICAgICAgIGFzc2VydChfcHJlSWNvVG9rZW4gIT0gMHgwKTsKICAgICAgICBhc3NlcnQoX2ljb01hbmFnZXIgIT0gMHgwKTsKCiAgICAgICAgY2FydGF4aVRva2VuID0gbmV3IENhclRheGlUb2tlbih0aGlzKTsKICAgICAgICBpY29NYW5hZ2VyID0gX2ljb01hbmFnZXI7CiAgICAgICAgcHJlSWNvVG9rZW4gPSBBYnN0cmFjdFRva2VuKF9wcmVJY29Ub2tlbik7CiAgICB9CgogICAgLy8vIEBkZXYgSW5pdGlhbGlzZXMgYWRkcmVzc2VzIG9mIGZvdW5kZXJzLCB0b2tlbnMgb3duZXIsIGVzY3Jvdy4KICAgIC8vLyBJbml0aWFsaXNlcyBiYWxhbmNlcyBvZiB0b2tlbnMgb3duZXIKICAgIC8vLyBAcGFyYW0gX2ZvdW5kZXIxIEFkZHJlc3Mgb2YgZm91bmRlciAxCiAgICAvLy8gQHBhcmFtIF9mb3VuZGVyMiBBZGRyZXNzIG9mIGZvdW5kZXIgMgogICAgLy8vIEBwYXJhbSBfZm91bmRlcjMgQWRkcmVzcyBvZiBmb3VuZGVyIDMKICAgIC8vLyBAcGFyYW0gX2ZvdW5kZXI0IEFkZHJlc3Mgb2YgZm91bmRlciA0CiAgICAvLy8gQHBhcmFtIF9lc2Nyb3cgQWRkcmVzcyBvZiBlc2Nyb3cKICAgIGZ1bmN0aW9uIGluaXQoYWRkcmVzcyBfZm91bmRlcjEsIGFkZHJlc3MgX2ZvdW5kZXIyLCBhZGRyZXNzIF9mb3VuZGVyMywgYWRkcmVzcyBfZm91bmRlcjQsIGFkZHJlc3MgX2VzY3Jvdykgb25seU1hbmFnZXIgewogICAgICAgIGFzc2VydChjdXJyZW50U3RhdGUgIT0gU3RhdGUuSW5pdCk7CiAgICAgICAgYXNzZXJ0KF9mb3VuZGVyMSAhPSAweDApOwogICAgICAgIGFzc2VydChfZm91bmRlcjIgIT0gMHgwKTsKICAgICAgICBhc3NlcnQoX2ZvdW5kZXIzICE9IDB4MCk7CiAgICAgICAgYXNzZXJ0KF9mb3VuZGVyNCAhPSAweDApOwogICAgICAgIGFzc2VydChfZXNjcm93ICE9IDB4MCk7CgogICAgICAgIGZvdW5kZXIxID0gX2ZvdW5kZXIxOwogICAgICAgIGZvdW5kZXIyID0gX2ZvdW5kZXIyOwogICAgICAgIGZvdW5kZXIzID0gX2ZvdW5kZXIzOwogICAgICAgIGZvdW5kZXI0ID0gX2ZvdW5kZXI0OwogICAgICAgIGVzY3JvdyA9IF9lc2Nyb3c7CgogICAgICAgIGN1cnJlbnRTdGF0ZSA9IFN0YXRlLkluaXQ7CiAgICB9CgogICAgLy8vIEBkZXYgU2V0cyBuZXcgc3RhdGUKICAgIC8vLyBAcGFyYW0gX25ld1N0YXRlIFZhbHVlIG9mIG5ldyBzdGF0ZQogICAgZnVuY3Rpb24gc2V0U3RhdGUoU3RhdGUgX25ld1N0YXRlKSBwdWJsaWMgb25seU1hbmFnZXIKICAgIHsKICAgICAgICBjdXJyZW50U3RhdGUgPSBfbmV3U3RhdGU7CiAgICAgICAgaWYoY3VycmVudFN0YXRlID09IFN0YXRlLlJ1bm5pbmcpIHsKICAgICAgICAgICAgc3RhcnRJY29EYXRlID0gbm93OwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQGRldiBTZXRzIG5ldyBtYW5hZ2VyLiBPbmx5IG1hbmFnZXIgY2FuIGRvIGl0CiAgICAvLy8gQHBhcmFtIF9uZXdJY29NYW5hZ2VyIEFkZHJlc3Mgb2YgbmV3IElDTyBtYW5hZ2VyCiAgICBmdW5jdGlvbiBzZXROZXdNYW5hZ2VyKGFkZHJlc3MgX25ld0ljb01hbmFnZXIpIG9ubHlNYW5hZ2VyIHsKICAgICAgICBhc3NlcnQoX25ld0ljb01hbmFnZXIgIT0gMHgwKTsKICAgICAgICBpY29NYW5hZ2VyID0gX25ld0ljb01hbmFnZXI7CiAgICB9CgogICAgLy8vIEBkZXYgU2V0cyBib3VudHkgb3duZXIuIE9ubHkgbWFuYWdlciBjYW4gZG8gaXQKICAgIC8vLyBAcGFyYW0gX2JvdW50eU93bmVyIEFkZHJlc3Mgb2YgQm91bnR5IG93bmVyCiAgICBmdW5jdGlvbiBzZXRCb3VudHlPd25lcihhZGRyZXNzIF9ib3VudHlPd25lcikgb25seU1hbmFnZXIgewogICAgICAgIGFzc2VydChfYm91bnR5T3duZXIgIT0gMHgwKTsKICAgICAgICBib3VudHlPd25lciA9IF9ib3VudHlPd25lcjsKICAgIH0KCiAgICAvLyBzYXZlcyBpbmZvIGlmIGFjY291bnQncyB0b2tlbnMgd2VyZSBpbXBvcnRlZCBmcm9tIHByZS1JQ08KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHJpdmF0ZSBpbXBvcnRlZEZyb21QcmVJY287CgogICAgLy8vIEBkZXYgSW1wb3J0cyBhY2NvdW50J3MgdG9rZW5zIGZyb20gcHJlLUlDTy4gSXQgY2FuIGJlIGRvbmUgb25seSBieSB1c2VyLCBJQ08gbWFuYWdlciBvciB0b2tlbiBpbXBvcnRlcgogICAgLy8vIEBwYXJhbSBfYWNjb3VudCBBZGRyZXNzIG9mIGFjY291bnQgd2hpY2ggdG9rZW5zIHdpbGwgYmUgaW1wb3J0ZWQKICAgIGZ1bmN0aW9uIGltcG9ydFRva2VucyhhZGRyZXNzIF9hY2NvdW50KSB7CiAgICAgICAgLy8gb25seSB0b2tlbiBob2xkZXIgb3IgbWFuYWdlciBjYW4gZG8gbWlncmF0aW9uCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGljb01hbmFnZXIgfHwgbXNnLnNlbmRlciA9PSBfYWNjb3VudCk7CiAgICAgICAgcmVxdWlyZSghaW1wb3J0ZWRGcm9tUHJlSWNvW19hY2NvdW50XSk7CgogICAgICAgIHVpbnQgcHJlSWNvQmFsID0gcHJlSWNvVG9rZW4uYmFsYW5jZU9mKF9hY2NvdW50KTsKICAgICAgICB1aW50IHByZUljb0JhbGFuY2UgPSBwcmVzYWxlVm9sdW1lQm9udXMocHJlSWNvQmFsKTsKCiAgICAgICAgaWYgKHByZUljb0JhbGFuY2UgPiAwKSB7CiAgICAgICAgICAgIGNhcnRheGlUb2tlbi5lbWl0VG9rZW5zKF9hY2NvdW50LCBwcmVJY29CYWxhbmNlKTsKICAgICAgICAgICAgaW1wb3J0ZWRUb2tlbnMgPSBhZGQoaW1wb3J0ZWRUb2tlbnMsIHByZUljb0JhbGFuY2UpOwogICAgICAgIH0KCiAgICAgICAgaW1wb3J0ZWRGcm9tUHJlSWNvW19hY2NvdW50XSA9IHRydWU7CiAgICB9CgogICAgLy8vIEBkZXYgQnV5IHF1YW50aXR5IG9mIHRva2VucyBkZXBlbmRpbmcgb24gdGhlIGFtb3VudCBvZiBzZW50IGV0aGVycy4KICAgIC8vLyBAcGFyYW0gX2J1eWVyIEFkZHJlc3Mgb2YgYWNjb3VudCB3aGljaCB3aWxsIHJlY2VpdmUgdG9rZW5zCiAgICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBfYnV5ZXIpIHByaXZhdGUgewogICAgICAgIGFzc2VydChfYnV5ZXIgIT0gMHgwKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwoKICAgICAgICB1aW50IHRva2Vuc1RvRW1pdCA9IG1zZy52YWx1ZSAqIFBSSUNFOwogICAgICAgIC8vY2FsY3VsYXRlIGRhdGUgYm9udXMKICAgICAgICB1aW50IGRhdGVCb251c1BlcmNlbnQgPSBkYXRlQm9udXMoc3RhcnRJY29EYXRlKTsKICAgICAgICAvL2NhbGN1bGF0ZSB2b2x1bWUgYm9udXMKICAgICAgICB1aW50IHZvbHVtZUJvbnVzUGVyY2VudCA9IHZvbHVtZUJvbnVzKG1zZy52YWx1ZSk7CiAgICAgICAgLy90b3RhbCBib251cyB0b2tlbnMKICAgICAgICB1aW50IHRvdGFsQm9udXNQZXJjZW50ID0gZGF0ZUJvbnVzUGVyY2VudCArIHZvbHVtZUJvbnVzUGVyY2VudDsKCiAgICAgICAgaWYodG90YWxCb251c1BlcmNlbnQgPiAwKXsKICAgICAgICAgICAgdG9rZW5zVG9FbWl0ID0gIHRva2Vuc1RvRW1pdCArIG11bEJ5RnJhY3Rpb24odG9rZW5zVG9FbWl0LCB0b3RhbEJvbnVzUGVyY2VudCwgMTAwKTsKICAgICAgICB9CgogICAgICAgIHJlcXVpcmUoYWRkKHNvbGRUb2tlbnNPbkljbywgdG9rZW5zVG9FbWl0KSA8PSBzdXBwbHlMaW1pdCk7CgogICAgICAgIHNvbGRUb2tlbnNPbkljbyA9IGFkZChzb2xkVG9rZW5zT25JY28sIHRva2Vuc1RvRW1pdCk7CgogICAgICAgIC8vZW1pdCB0b2tlbnMgdG8gdG9rZW4gaG9sZGVyCiAgICAgICAgY2FydGF4aVRva2VuLmVtaXRUb2tlbnMoX2J1eWVyLCB0b2tlbnNUb0VtaXQpOwoKICAgICAgICBldGhlclJhaXNlZCA9IGFkZChldGhlclJhaXNlZCwgbXNnLnZhbHVlKTsKICAgIH0KCiAgICAvLy8gQGRldiBGYWxsIGJhY2sgZnVuY3Rpb24gfjUway0xMDBrIGdhcwogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSBvbkljb1J1bm5pbmcgewogICAgICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvLy8gQGRldiBCdXJuIHRva2VucyBmcm9tIGFjY291bnRzIG9ubHkgaW4gc3RhdGUgIm5vdCBtaWdyYXRlZCIuIE9ubHkgbWFuYWdlciBjYW4gZG8gaXQKICAgIC8vLyBAcGFyYW0gX2Zyb20gQWRkcmVzcyBvZiBhY2NvdW50CiAgICBmdW5jdGlvbiBidXJuVG9rZW5zKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKSBvbmx5TWFuYWdlciBub3RNaWdyYXRlZCB7CiAgICAgICAgY2FydGF4aVRva2VuLmJ1cm5Ub2tlbnMoX2Zyb20sIF92YWx1ZSk7CiAgICB9CgogICAgLy8vIEBkZXYgUGFydGlhbCB3aXRoZHJhdy4gT25seSBtYW5hZ2VyIGNhbiBkbyBpdAogICAgZnVuY3Rpb24gd2l0aGRyYXdFdGhlcih1aW50IF92YWx1ZSkgb25seU1hbmFnZXIgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CiAgICAgICAgYXNzZXJ0KF92YWx1ZSA8PSB0aGlzLmJhbGFuY2UpOwogICAgICAgIC8vIHNlbmQgMTIzIHRvIGdldCAxLjIzCiAgICAgICAgZXNjcm93LnRyYW5zZmVyKF92YWx1ZSAqIDEwMDAwMDAwMDAwMDAwMDAwKTsgLy8gMTBeMTYKICAgIH0KCiAgICAvLy8gQGRldiBFdGhlciB3aXRoZHJhdy4gT25seSBtYW5hZ2VyIGNhbiBkbyBpdAogICAgZnVuY3Rpb24gd2l0aGRyYXdBbGxFdGhlcigpIG9ubHlNYW5hZ2VyIHsKICAgICAgICBpZih0aGlzLmJhbGFuY2UgPiAwKQogICAgICAgIHsKICAgICAgICAgICAgZXNjcm93LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vL0BkZXYgU2VuZCB0b2tlbnMgdG8gYm91bnR5T3duZXIgZGVwZW5kaW5nIG9uIGNyb3dkc2FsZSByZXN1bHRzLiBDYW4gYmUgc2VuZCBvbmx5IGFmdGVyIElDTy4KICAgIGZ1bmN0aW9uIHNlbmRUb2tlbnNUb0JvdW50eU93bmVyKCkgb25seU1hbmFnZXIgd2hlbkluaXRpYWxpemVkIHsKICAgICAgICByZXF1aXJlKCFzZW50VG9rZW5zVG9Cb3VudHlPd25lcik7CgogICAgICAgIC8vQ2FsY3VsYXRlIHRvdGFsIHRva2VucyBzb2xkIG9uIHByZS1JQ08gYW5kIElDTwogICAgICAgIHVpbnQgdG9rZW5zU29sZCA9IGFkZChzb2xkVG9rZW5zT25JY28sIHNvbGRUb2tlbnNPblByZUljbyk7CgogICAgICAgIC8vQ2FsY3VsYXRlIGJvdW50eSB0b2tlbnMgZGVwZW5kaW5nIG9uIHRvdGFsIHRva2VucyBzb2xkCiAgICAgICAgdWludCBib3VudHlUb2tlbnMgPSBtdWxCeUZyYWN0aW9uKHRva2Vuc1NvbGQsIDI1LCAxMDAwKTsgLy8gMi41JQoKICAgICAgICBjYXJ0YXhpVG9rZW4uZW1pdFRva2Vucyhib3VudHlPd25lciwgYm91bnR5VG9rZW5zKTsKCiAgICAgICAgc2VudFRva2Vuc1RvQm91bnR5T3duZXIgPSB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IFNlbmQgdG9rZW5zIHRvIGZvdW5kZXJzLiBDYW4gYmUgc2VudCBvbmx5IGFmdGVyIGNhcnRheGlUb2tlbi5yZXdhcmRUaW1lKCkgKDIwMTguMDIuMDQgMDowMCBVVEMpCiAgICBmdW5jdGlvbiBzZW5kVG9rZW5zVG9Gb3VuZGVycygpIG9ubHlNYW5hZ2VyIHdoZW5Jbml0aWFsaXplZCB7CiAgICAgICAgcmVxdWlyZSghc2VudFRva2Vuc1RvRm91bmRlcnMgJiYgbm93ID49IGZvdW5kZXJzUmV3YXJkVGltZSk7CgogICAgICAgIC8vQ2FsY3VsYXRlIHRvdGFsIHRva2VucyBzb2xkIG9uIHByZS1JQ08gYW5kIElDTwogICAgICAgIHVpbnQgdG9rZW5zU29sZCA9IGFkZChzb2xkVG9rZW5zT25JY28sIHNvbGRUb2tlbnNPblByZUljbyk7CgogICAgICAgIC8vQ2FsY3VsYXRlIGZvdW5kZXIgcmV3YXJkIGRlcGVuZGluZyBvbiB0b3RhbCB0b2tlbnMgc29sZAogICAgICAgIHVpbnQgdG90YWxSZXdhcmRUb0ZvdW5kZXJzID0gbXVsQnlGcmFjdGlvbih0b2tlbnNTb2xkLCAzMTY2LCAxMDAwMCk7IC8vIDMxLjY2JQoKICAgICAgICB1aW50IGZvdW5kZXJSZXdhcmQgPSBtdWxCeUZyYWN0aW9uKHRvdGFsUmV3YXJkVG9Gb3VuZGVycywgMjUsIDEwMCk7IC8vIDI1JSBwaWUKCiAgICAgICAgLy9zZW5kIGV2ZXJ5IGZvdW5kZXIgMjUlIG9mIHRvdGFsIGZvdW5kZXIgcmV3YXJkCiAgICAgICAgY2FydGF4aVRva2VuLmVtaXRUb2tlbnMoZm91bmRlcjEsIGZvdW5kZXJSZXdhcmQpOwogICAgICAgIGNhcnRheGlUb2tlbi5lbWl0VG9rZW5zKGZvdW5kZXIyLCBmb3VuZGVyUmV3YXJkKTsKICAgICAgICBjYXJ0YXhpVG9rZW4uZW1pdFRva2Vucyhmb3VuZGVyMywgZm91bmRlclJld2FyZCk7CiAgICAgICAgY2FydGF4aVRva2VuLmVtaXRUb2tlbnMoZm91bmRlcjQsIGZvdW5kZXJSZXdhcmQpOwoKICAgICAgICBzZW50VG9rZW5zVG9Gb3VuZGVycyA9IHRydWU7CiAgICB9Cn0='.
	

]
