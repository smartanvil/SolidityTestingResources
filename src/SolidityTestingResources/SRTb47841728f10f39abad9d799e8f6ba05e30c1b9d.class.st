Class {
	#name : #SRTb47841728f10f39abad9d799e8f6ba05e30c1b9d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb47841728f10f39abad9d799e8f6ba05e30c1b9d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKCmNvbnRyYWN0IEV0aFB5cmFtaWQgewoKCS8vIHNjYWxlRmFjdG9yIGlzIHVzZWQgdG8gY29udmVydCBFdGhlciBpbnRvIHRva2VucyBhbmQgdmljZS12ZXJzYTogdGhleSdyZSBvZiBkaWZmZXJlbnQKCS8vIG9yZGVycyBvZiBtYWduaXR1ZGUsIGhlbmNlIHRoZSBuZWVkIHRvIGJyaWRnZSBiZXR3ZWVuIHRoZSB0d28uCgl1aW50MjU2IGNvbnN0YW50IHNjYWxlRmFjdG9yID0gMHgxMDAwMDAwMDAwMDAwMDAwMDsgIC8vIDJeNjQKCgkvLyBDUlIgPSA1MCUKCS8vIENSUiBpcyBDYXNoIFJlc2VydmUgUmF0aW8gKGluIHRoaXMgY2FzZSBDcnlwdG8gUmVzZXJ2ZSBSYXRpbykuCgkvLyBGb3IgbW9yZSBvbiB0aGlzOiBjaGVjayBvdXQgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmVzZXJ2ZV9yZXF1aXJlbWVudAoJaW50IGNvbnN0YW50IGNycl9uID0gMTsgLy8gQ1JSIG51bWVyYXRvcgoJaW50IGNvbnN0YW50IGNycl9kID0gMjsgLy8gQ1JSIGRlbm9taW5hdG9yCgoJLy8gVGhlIHByaWNlIGNvZWZmaWNpZW50LiBDaG9zZW4gc3VjaCB0aGF0IGF0IDEgdG9rZW4gdG90YWwgc3VwcGx5CgkvLyB0aGUgYW1vdW50IGluIHJlc2VydmUgaXMgMC41IGV0aGVyIGFuZCB0b2tlbiBwcmljZSBpcyAxIEV0aGVyLgoJaW50IGNvbnN0YW50IHByaWNlX2NvZWZmID0gLTB4Mjk2QUJGNzg0QTM1ODQ2OEM7CgoJLy8gVHlwaWNhbCB2YWx1ZXMgdGhhdCB3ZSBoYXZlIHRvIGRlY2xhcmUuCglzdHJpbmcgY29uc3RhbnQgcHVibGljIG5hbWUgPSAiRXRoUHlyYW1pZCI7CglzdHJpbmcgY29uc3RhbnQgcHVibGljIHN5bWJvbCA9ICJFUFkiOwoJdWludDggY29uc3RhbnQgcHVibGljIGRlY2ltYWxzID0gMTg7CgoJLy8gQXJyYXkgYmV0d2VlbiBlYWNoIGFkZHJlc3MgYW5kIHRoZWlyIG51bWJlciBvZiB0b2tlbnMuCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHRva2VuQmFsYW5jZTsKCQkKCS8vIEFycmF5IGJldHdlZW4gZWFjaCBhZGRyZXNzIGFuZCBob3cgbXVjaCBFdGhlciBoYXMgYmVlbiBwYWlkIG91dCB0byBpdC4KCS8vIE5vdGUgdGhhdCB0aGlzIGlzIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgltYXBwaW5nKGFkZHJlc3MgPT4gaW50MjU2KSBwdWJsaWMgcGF5b3V0czsKCgkvLyBWYXJpYWJsZSB0cmFja2luZyBob3cgbWFueSB0b2tlbnMgYXJlIGluIGV4aXN0ZW5jZSBvdmVyYWxsLgoJdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgoJLy8gQWdncmVnYXRlIHN1bSBvZiBhbGwgcGF5b3V0cy4KCS8vIE5vdGUgdGhhdCB0aGlzIGlzIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCglpbnQyNTYgdG90YWxQYXlvdXRzOwoKCS8vIFZhcmlhYmxlIHRyYWNraW5nIGhvdyBtdWNoIEV0aGVyIGVhY2ggdG9rZW4gaXMgY3VycmVudGx5IHdvcnRoLgoJLy8gTm90ZSB0aGF0IHRoaXMgaXMgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCXVpbnQyNTYgZWFybmluZ3NQZXJUb2tlbjsKCQoJLy8gQ3VycmVudCBjb250cmFjdCBiYWxhbmNlIGluIEV0aGVyCgl1aW50MjU2IHB1YmxpYyBjb250cmFjdEJhbGFuY2U7CgoJZnVuY3Rpb24gRXRoUHlyYW1pZCgpIHB1YmxpYyB7fQoKCS8vIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIGFyZSB1c2VkIGJ5IHRoZSBmcm9udC1lbmQgZm9yIGRpc3BsYXkgcHVycG9zZXMuCgoJLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRva2VucyBjdXJyZW50bHkgaGVsZCBieSBfb3duZXIuCglmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKCQlyZXR1cm4gdG9rZW5CYWxhbmNlW19vd25lcl07Cgl9CgoJLy8gV2l0aGRyYXdzIGFsbCBkaXZpZGVuZHMgaGVsZCBieSB0aGUgY2FsbGVyIHNlbmRpbmcgdGhlIHRyYW5zYWN0aW9uLCB1cGRhdGVzCgkvLyB0aGUgcmVxdWlzaXRlIGdsb2JhbCB2YXJpYWJsZXMsIGFuZCB0cmFuc2ZlcnMgRXRoZXIgYmFjayB0byB0aGUgY2FsbGVyLgoJZnVuY3Rpb24gd2l0aGRyYXcoKSBwdWJsaWMgewoJCS8vIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhZGRyZXNzIHRoZSByZXF1ZXN0IGNhbWUgZnJvbS4KCQl2YXIgYmFsYW5jZSA9IGRpdmlkZW5kcyhtc2cuc2VuZGVyKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dHMgYXJyYXksIGluY3JlbWVudGluZyB0aGUgcmVxdWVzdCBhZGRyZXNzIGJ5IGBiYWxhbmNlYC4KCQlwYXlvdXRzW21zZy5zZW5kZXJdICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEluY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gU2VuZCB0aGUgZGl2aWRlbmRzIHRvIHRoZSBhZGRyZXNzIHRoYXQgcmVxdWVzdGVkIHRoZSB3aXRoZHJhdy4KCQljb250cmFjdEJhbGFuY2UgPSBzdWIoY29udHJhY3RCYWxhbmNlLCBiYWxhbmNlKTsKCQltc2cuc2VuZGVyLnRyYW5zZmVyKGJhbGFuY2UpOwoJfQoKCS8vIENvbnZlcnRzIHRoZSBFdGhlciBhY2NydWVkIGFzIGRpdmlkZW5kcyBiYWNrIGludG8gRVBZIHRva2VucyB3aXRob3V0IGhhdmluZyB0bwoJLy8gd2l0aGRyYXcgaXQgZmlyc3QuIFNhdmVzIG9uIGdhcyBhbmQgcG90ZW50aWFsIHByaWNlIHNwaWtlIGxvc3MuCglmdW5jdGlvbiByZWludmVzdERpdmlkZW5kcygpIHB1YmxpYyB7CgkJLy8gUmV0cmlldmUgdGhlIGRpdmlkZW5kcyBhc3NvY2lhdGVkIHdpdGggdGhlIGFkZHJlc3MgdGhlIHJlcXVlc3QgY2FtZSBmcm9tLgoJCXZhciBiYWxhbmNlID0gZGl2aWRlbmRzKG1zZy5zZW5kZXIpOwoJCQoJCS8vIFVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSwgaW5jcmVtZW50aW5nIHRoZSByZXF1ZXN0IGFkZHJlc3MgYnkgYGJhbGFuY2VgLgoJCS8vIFNpbmNlIHRoaXMgaXMgZXNzZW50aWFsbHkgYSBzaG9ydGN1dCB0byB3aXRoZHJhd2luZyBhbmQgcmVpbnZlc3RpbmcsIHRoaXMgc3RlcCBzdGlsbCBob2xkcy4KCQlwYXlvdXRzW21zZy5zZW5kZXJdICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEluY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gQXNzaWduIGJhbGFuY2UgdG8gYSBuZXcgdmFyaWFibGUuCgkJdWludCB2YWx1ZV8gPSAodWludCkgKGJhbGFuY2UpOwoJCQoJCS8vIElmIHlvdXIgZGl2aWRlbmRzIGFyZSB3b3J0aCBsZXNzIHRoYW4gMSBzemFibywgb3IgbW9yZSB0aGFuIGEgbWlsbGlvbiBFdGhlcgoJCS8vIChpbiB3aGljaCBjYXNlLCB3aHkgYXJlIHlvdSBldmVuIGhlcmUpLCBhYm9ydC4KCQlpZiAodmFsdWVfIDwgMC4wMDAwMDEgZXRoZXIgfHwgdmFsdWVfID4gMTAwMDAwMCBldGhlcikKCQkJcmV2ZXJ0KCk7CgkJCQoJCS8vIG1zZy5zZW5kZXIgaXMgdGhlIGFkZHJlc3Mgb2YgdGhlIGNhbGxlci4KCQl2YXIgc2VuZGVyID0gbXNnLnNlbmRlcjsKCQkKCQkvLyBBIHRlbXBvcmFyeSByZXNlcnZlIHZhcmlhYmxlIHVzZWQgZm9yIGNhbGN1bGF0aW5nIHRoZSByZXdhcmQgdGhlIGhvbGRlciBnZXRzIGZvciBidXlpbmcgdG9rZW5zLgoJCS8vIChZZXMsIHRoZSBidXllciByZWNlaXZlcyBhIHBhcnQgb2YgdGhlIGRpc3RyaWJ1dGlvbiBhcyB3ZWxsISkKCQl2YXIgcmVzID0gcmVzZXJ2ZSgpIC0gYmFsYW5jZTsKCgkJLy8gMTAlIG9mIHRoZSB0b3RhbCBFdGhlciBzZW50IGlzIHVzZWQgdG8gcGF5IGV4aXN0aW5nIGhvbGRlcnMuCgkJdmFyIGZlZSA9IGRpdih2YWx1ZV8sIDEwKTsKCQkKCQkvLyBUaGUgYW1vdW50IG9mIEV0aGVyIHVzZWQgdG8gcHVyY2hhc2UgbmV3IHRva2VucyBmb3IgdGhlIGNhbGxlci4KCQl2YXIgbnVtRXRoZXIgPSB2YWx1ZV8gLSBmZWU7CgkJCgkJLy8gVGhlIG51bWJlciBvZiB0b2tlbnMgd2hpY2ggY2FuIGJlIHB1cmNoYXNlZCBmb3IgbnVtRXRoZXIuCgkJdmFyIG51bVRva2VucyA9IGNhbGN1bGF0ZURpdmlkZW5kVG9rZW5zKG51bUV0aGVyLCBiYWxhbmNlKTsKCQkKCQkvLyBUaGUgYnV5ZXIgZmVlLCBzY2FsZWQgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJCXZhciBidXllckZlZSA9IGZlZSAqIHNjYWxlRmFjdG9yOwoJCQoJCS8vIENoZWNrIHRoYXQgd2UgaGF2ZSB0b2tlbnMgaW4gZXhpc3RlbmNlICh0aGlzIHNob3VsZCBhbHdheXMgYmUgdHJ1ZSksIG9yCgkJLy8gZWxzZSB5b3UncmUgZ29ubmEgaGF2ZSBhIGJhZCB0aW1lLgoJCWlmICh0b3RhbFN1cHBseSA+IDApIHsKCQkJLy8gQ29tcHV0ZSB0aGUgYm9udXMgY28tZWZmaWNpZW50IGZvciBhbGwgZXhpc3RpbmcgaG9sZGVycyBhbmQgdGhlIGJ1eWVyLgoJCQkvLyBUaGUgYnV5ZXIgcmVjZWl2ZXMgcGFydCBvZiB0aGUgZGlzdHJpYnV0aW9uIGZvciBlYWNoIHRva2VuIGJvdWdodCBpbiB0aGUKCQkJLy8gc2FtZSB3YXkgdGhleSB3b3VsZCBoYXZlIGlmIHRoZXkgYm91Z2h0IGVhY2ggdG9rZW4gaW5kaXZpZHVhbGx5LgoJCQl2YXIgYm9udXNDb0VmZiA9CgkJCSAgICAoc2NhbGVGYWN0b3IgLSAocmVzICsgbnVtRXRoZXIpICogbnVtVG9rZW5zICogc2NhbGVGYWN0b3IgLyAodG90YWxTdXBwbHkgKyBudW1Ub2tlbnMpIC8gbnVtRXRoZXIpCgkJCSAgICAqICh1aW50KShjcnJfZCkgLyAodWludCkoY3JyX2QtY3JyX24pOwoJCQkJCgkJCS8vIFRoZSB0b3RhbCByZXdhcmQgdG8gYmUgZGlzdHJpYnV0ZWQgYW1vbmdzdCB0aGUgbWFzc2VzIGlzIHRoZSBmZWUgKGluIEV0aGVyKQoJCQkvLyBtdWx0aXBsaWVkIGJ5IHRoZSBib251cyBjby1lZmZpY2llbnQuCgkJCXZhciBob2xkZXJSZXdhcmQgPSBmZWUgKiBib251c0NvRWZmOwoJCQkKCQkJYnV5ZXJGZWUgLT0gaG9sZGVyUmV3YXJkOwoKCQkJLy8gRmVlIGlzIGRpc3RyaWJ1dGVkIHRvIGFsbCBleGlzdGluZyB0b2tlbiBob2xkZXJzIGJlZm9yZSB0aGUgbmV3IHRva2VucyBhcmUgcHVyY2hhc2VkLgoJCQkvLyByZXdhcmRQZXJTaGFyZSBpcyB0aGUgYW1vdW50IGdhaW5lZCBwZXIgdG9rZW4gdGhhbmtzIHRvIHRoaXMgYnV5LWluLgoJCQl2YXIgcmV3YXJkUGVyU2hhcmUgPSBob2xkZXJSZXdhcmQgLyB0b3RhbFN1cHBseTsKCQkJCgkJCS8vIFRoZSBFdGhlciB2YWx1ZSBwZXIgdG9rZW4gaXMgaW5jcmVhc2VkIHByb3BvcnRpb25hbGx5LgoJCQllYXJuaW5nc1BlclRva2VuICs9IHJld2FyZFBlclNoYXJlOwoJCX0KCQkKCQkvLyBBZGQgdGhlIG51bVRva2VucyB3aGljaCB3ZXJlIGp1c3QgY3JlYXRlZCB0byB0aGUgdG90YWwgc3VwcGx5LiBXZSdyZSBhIGNyeXB0byBjZW50cmFsIGJhbmshCgkJdG90YWxTdXBwbHkgPSBhZGQodG90YWxTdXBwbHksIG51bVRva2Vucyk7CgkJCgkJLy8gQXNzaWduIHRoZSB0b2tlbnMgdG8gdGhlIGJhbGFuY2Ugb2YgdGhlIGJ1eWVyLgoJCXRva2VuQmFsYW5jZVtzZW5kZXJdID0gYWRkKHRva2VuQmFsYW5jZVtzZW5kZXJdLCBudW1Ub2tlbnMpOwoJCQoJCS8vIFVwZGF0ZSB0aGUgcGF5b3V0IGFycmF5IHNvIHRoYXQgdGhlIGJ1eWVyIGNhbm5vdCBjbGFpbSBkaXZpZGVuZHMgb24gcHJldmlvdXMgcHVyY2hhc2VzLgoJCS8vIEFsc28gaW5jbHVkZSB0aGUgZmVlIHBhaWQgZm9yIGVudGVyaW5nIHRoZSBzY2hlbWUuCgkJLy8gRmlyc3Qgd2UgY29tcHV0ZSBob3cgbXVjaCB3YXMganVzdCBwYWlkIG91dCB0byB0aGUgYnV5ZXIuLi4KCQl2YXIgcGF5b3V0RGlmZiAgPSAoaW50MjU2KSAoKGVhcm5pbmdzUGVyVG9rZW4gKiBudW1Ub2tlbnMpIC0gYnV5ZXJGZWUpOwoJCQoJCS8vIFRoZW4gd2UgdXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5IGZvciB0aGUgYnV5ZXIgd2l0aCB0aGlzIGFtb3VudC4uLgoJCXBheW91dHNbc2VuZGVyXSArPSBwYXlvdXREaWZmOwoJCQoJCS8vIEFuZCB0aGVuIHdlIGZpbmFsbHkgYWRkIGl0IHRvIHRoZSB2YXJpYWJsZSB0cmFja2luZyB0aGUgdG90YWwgYW1vdW50IHNwZW50IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICAgICs9IHBheW91dERpZmY7CgkJCgl9CgoJLy8gU2VsbHMgeW91ciB0b2tlbnMgZm9yIEV0aGVyLiBUaGlzIEV0aGVyIGlzIGFzc2lnbmVkIHRvIHRoZSBjYWxsZXJzIGVudHJ5CgkvLyBpbiB0aGUgdG9rZW5CYWxhbmNlIGFycmF5LCBhbmQgdGhlcmVmb3JlIGlzIHNob3duIGFzIGEgZGl2aWRlbmQuIEEgc2Vjb25kCgkvLyBjYWxsIHRvIHdpdGhkcmF3KCkgbXVzdCBiZSBtYWRlIHRvIGludm9rZSB0aGUgdHJhbnNmZXIgb2YgRXRoZXIgYmFjayB0byB5b3VyIGFkZHJlc3MuCglmdW5jdGlvbiBzZWxsTXlUb2tlbnMoKSBwdWJsaWMgewoJCXZhciBiYWxhbmNlID0gYmFsYW5jZU9mKG1zZy5zZW5kZXIpOwoJCXNlbGwoYmFsYW5jZSk7Cgl9CgoJLy8gVGhlIHNsYW0tdGhlLWJ1dHRvbiBlc2NhcGUgaGF0Y2guIFNlbGxzIHRoZSBjYWxsZXJzIHRva2VucyBmb3IgRXRoZXIsIHRoZW4gaW1tZWRpYXRlbHkKCS8vIGludm9rZXMgdGhlIHdpdGhkcmF3KCkgZnVuY3Rpb24sIHNlbmRpbmcgdGhlIHJlc3VsdGluZyBFdGhlciB0byB0aGUgY2FsbGVycyBhZGRyZXNzLgogICAgZnVuY3Rpb24gZ2V0TWVPdXRPZkhlcmUoKSBwdWJsaWMgewoJCXNlbGxNeVRva2VucygpOwogICAgICAgIHdpdGhkcmF3KCk7Cgl9CgoJLy8gR2F0ZWtlZXBlciBmdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgYW1vdW50IG9mIEV0aGVyIGJlaW5nIHNlbnQgaXNuJ3QgZWl0aGVyCgkvLyB0b28gc21hbGwgb3IgdG9vIGxhcmdlLiBJZiBpdCBwYXNzZXMsIGdvZXMgZGlyZWN0IHRvIGJ1eSgpLgoJZnVuY3Rpb24gZnVuZCgpIHBheWFibGUgcHVibGljIHsKCQkvLyBEb24ndCBhbGxvdyBmb3IgZnVuZGluZyBpZiB0aGUgYW1vdW50IG9mIEV0aGVyIHNlbnQgaXMgbGVzcyB0aGFuIDEgc3phYm8uCgkJaWYgKG1zZy52YWx1ZSA+IDAuMDAwMDAxIGV0aGVyKSB7CgkJICAgIGNvbnRyYWN0QmFsYW5jZSA9IGFkZChjb250cmFjdEJhbGFuY2UsIG1zZy52YWx1ZSk7CgkJCWJ1eSgpOwoJCX0gZWxzZSB7CgkJCXJldmVydCgpOwoJCX0KICAgIH0KCgkvLyBGdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIChkeW5hbWljKSBwcmljZSBvZiBidXlpbmcgYSBmaW5uZXkgd29ydGggb2YgdG9rZW5zLgoJZnVuY3Rpb24gYnV5UHJpY2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewoJCXJldHVybiBnZXRUb2tlbnNGb3JFdGhlcigxIGZpbm5leSk7Cgl9CgoJLy8gRnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSAoZHluYW1pYykgcHJpY2Ugb2Ygc2VsbGluZyBhIHNpbmdsZSB0b2tlbi4KCWZ1bmN0aW9uIHNlbGxQcmljZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdmFyIGV0aCA9IGdldEV0aGVyRm9yVG9rZW5zKDEgZmlubmV5KTsKICAgICAgICB2YXIgZmVlID0gZGl2KGV0aCwgMTApOwogICAgICAgIHJldHVybiBldGggLSBmZWU7CiAgICB9CgoJLy8gQ2FsY3VsYXRlIHRoZSBjdXJyZW50IGRpdmlkZW5kcyBhc3NvY2lhdGVkIHdpdGggdGhlIGNhbGxlciBhZGRyZXNzLiBUaGlzIGlzIHRoZSBuZXQgcmVzdWx0CgkvLyBvZiBtdWx0aXBseWluZyB0aGUgbnVtYmVyIG9mIHRva2VucyBoZWxkIGJ5IHRoZWlyIGN1cnJlbnQgdmFsdWUgaW4gRXRoZXIgYW5kIHN1YnRyYWN0aW5nIHRoZQoJLy8gRXRoZXIgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIHBhaWQgb3V0LgoJZnVuY3Rpb24gZGl2aWRlbmRzKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBhbW91bnQpIHsKCQlyZXR1cm4gKHVpbnQyNTYpICgoaW50MjU2KShlYXJuaW5nc1BlclRva2VuICogdG9rZW5CYWxhbmNlW19vd25lcl0pIC0gcGF5b3V0c1tfb3duZXJdKSAvIHNjYWxlRmFjdG9yOwoJfQoKCS8vIFZlcnNpb24gb2Ygd2l0aGRyYXcgdGhhdCBleHRyYWN0cyB0aGUgZGl2aWRlbmRzIGFuZCBzZW5kcyB0aGUgRXRoZXIgdG8gdGhlIGNhbGxlci4KCS8vIFRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBjYXNlIHdoZW4gdGhlcmUgaXMgbm8gdHJhbnNhY3Rpb24gZGF0YSwgYW5kIHRoYXQgc2hvdWxkIGJlCgkvLyBxdWl0ZSByYXJlIHVubGVzcyBpbnRlcmFjdGluZyBkaXJlY3RseSB3aXRoIHRoZSBzbWFydCBjb250cmFjdC4KCWZ1bmN0aW9uIHdpdGhkcmF3T2xkKGFkZHJlc3MgdG8pIHB1YmxpYyB7CgkJLy8gUmV0cmlldmUgdGhlIGRpdmlkZW5kcyBhc3NvY2lhdGVkIHdpdGggdGhlIGFkZHJlc3MgdGhlIHJlcXVlc3QgY2FtZSBmcm9tLgoJCXZhciBiYWxhbmNlID0gZGl2aWRlbmRzKG1zZy5zZW5kZXIpOwoJCQoJCS8vIFVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSwgaW5jcmVtZW50aW5nIHRoZSByZXF1ZXN0IGFkZHJlc3MgYnkgYGJhbGFuY2VgLgoJCXBheW91dHNbbXNnLnNlbmRlcl0gKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gSW5jcmVhc2UgdGhlIHRvdGFsIGFtb3VudCB0aGF0J3MgYmVlbiBwYWlkIG91dCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBTZW5kIHRoZSBkaXZpZGVuZHMgdG8gdGhlIGFkZHJlc3MgdGhhdCByZXF1ZXN0ZWQgdGhlIHdpdGhkcmF3LgoJCWNvbnRyYWN0QmFsYW5jZSA9IHN1Yihjb250cmFjdEJhbGFuY2UsIGJhbGFuY2UpOwoJCXRvLnRyYW5zZmVyKGJhbGFuY2UpOwkJCgl9CgoJLy8gSW50ZXJuYWwgYmFsYW5jZSBmdW5jdGlvbiwgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGR5bmFtaWMgcmVzZXJ2ZSB2YWx1ZS4KCWZ1bmN0aW9uIGJhbGFuY2UoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGFtb3VudCkgewoJCS8vIG1zZy52YWx1ZSBpcyB0aGUgYW1vdW50IG9mIEV0aGVyIHNlbnQgYnkgdGhlIHRyYW5zYWN0aW9uLgoJCXJldHVybiBjb250cmFjdEJhbGFuY2UgLSBtc2cudmFsdWU7Cgl9CgoJZnVuY3Rpb24gYnV5KCkgaW50ZXJuYWwgewoJCS8vIEFueSB0cmFuc2FjdGlvbiBvZiBsZXNzIHRoYW4gMSBzemFibyBpcyBsaWtlbHkgdG8gYmUgd29ydGggbGVzcyB0aGFuIHRoZSBnYXMgdXNlZCB0byBzZW5kIGl0LgoJCWlmIChtc2cudmFsdWUgPCAwLjAwMDAwMSBldGhlciB8fCBtc2cudmFsdWUgPiAxMDAwMDAwIGV0aGVyKQoJCQlyZXZlcnQoKTsKCQkJCQkJCgkJLy8gbXNnLnNlbmRlciBpcyB0aGUgYWRkcmVzcyBvZiB0aGUgY2FsbGVyLgoJCXZhciBzZW5kZXIgPSBtc2cuc2VuZGVyOwoJCQoJCS8vIDEwJSBvZiB0aGUgdG90YWwgRXRoZXIgc2VudCBpcyB1c2VkIHRvIHBheSBleGlzdGluZyBob2xkZXJzLgoJCXZhciBmZWUgPSBkaXYobXNnLnZhbHVlLCAxMCk7CgkJCgkJLy8gVGhlIGFtb3VudCBvZiBFdGhlciB1c2VkIHRvIHB1cmNoYXNlIG5ldyB0b2tlbnMgZm9yIHRoZSBjYWxsZXIuCgkJdmFyIG51bUV0aGVyID0gbXNnLnZhbHVlIC0gZmVlOwoJCQoJCS8vIFRoZSBudW1iZXIgb2YgdG9rZW5zIHdoaWNoIGNhbiBiZSBwdXJjaGFzZWQgZm9yIG51bUV0aGVyLgoJCXZhciBudW1Ub2tlbnMgPSBnZXRUb2tlbnNGb3JFdGhlcihudW1FdGhlcik7CgkJCgkJLy8gVGhlIGJ1eWVyIGZlZSwgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCQl2YXIgYnV5ZXJGZWUgPSBmZWUgKiBzY2FsZUZhY3RvcjsKCQkKCQkvLyBDaGVjayB0aGF0IHdlIGhhdmUgdG9rZW5zIGluIGV4aXN0ZW5jZSAodGhpcyBzaG91bGQgYWx3YXlzIGJlIHRydWUpLCBvcgoJCS8vIGVsc2UgeW91J3JlIGdvbm5hIGhhdmUgYSBiYWQgdGltZS4KCQlpZiAodG90YWxTdXBwbHkgPiAwKSB7CgkJCS8vIENvbXB1dGUgdGhlIGJvbnVzIGNvLWVmZmljaWVudCBmb3IgYWxsIGV4aXN0aW5nIGhvbGRlcnMgYW5kIHRoZSBidXllci4KCQkJLy8gVGhlIGJ1eWVyIHJlY2VpdmVzIHBhcnQgb2YgdGhlIGRpc3RyaWJ1dGlvbiBmb3IgZWFjaCB0b2tlbiBib3VnaHQgaW4gdGhlCgkJCS8vIHNhbWUgd2F5IHRoZXkgd291bGQgaGF2ZSBpZiB0aGV5IGJvdWdodCBlYWNoIHRva2VuIGluZGl2aWR1YWxseS4KCQkJdmFyIGJvbnVzQ29FZmYgPQoJCQkgICAgKHNjYWxlRmFjdG9yIC0gKHJlc2VydmUoKSArIG51bUV0aGVyKSAqIG51bVRva2VucyAqIHNjYWxlRmFjdG9yIC8gKHRvdGFsU3VwcGx5ICsgbnVtVG9rZW5zKSAvIG51bUV0aGVyKQoJCQkgICAgKiAodWludCkoY3JyX2QpIC8gKHVpbnQpKGNycl9kLWNycl9uKTsKCQkJCQoJCQkvLyBUaGUgdG90YWwgcmV3YXJkIHRvIGJlIGRpc3RyaWJ1dGVkIGFtb25nc3QgdGhlIG1hc3NlcyBpcyB0aGUgZmVlIChpbiBFdGhlcikKCQkJLy8gbXVsdGlwbGllZCBieSB0aGUgYm9udXMgY28tZWZmaWNpZW50LgoJCQl2YXIgaG9sZGVyUmV3YXJkID0gZmVlICogYm9udXNDb0VmZjsKCQkJCgkJCWJ1eWVyRmVlIC09IGhvbGRlclJld2FyZDsKCgkJCS8vIEZlZSBpcyBkaXN0cmlidXRlZCB0byBhbGwgZXhpc3RpbmcgdG9rZW4gaG9sZGVycyBiZWZvcmUgdGhlIG5ldyB0b2tlbnMgYXJlIHB1cmNoYXNlZC4KCQkJLy8gcmV3YXJkUGVyU2hhcmUgaXMgdGhlIGFtb3VudCBnYWluZWQgcGVyIHRva2VuIHRoYW5rcyB0byB0aGlzIGJ1eS1pbi4KCQkJdmFyIHJld2FyZFBlclNoYXJlID0gaG9sZGVyUmV3YXJkIC8gdG90YWxTdXBwbHk7CgkJCQoJCQkvLyBUaGUgRXRoZXIgdmFsdWUgcGVyIHRva2VuIGlzIGluY3JlYXNlZCBwcm9wb3J0aW9uYWxseS4KCQkJZWFybmluZ3NQZXJUb2tlbiArPSByZXdhcmRQZXJTaGFyZTsKCQkJCgkJfQoKCQkvLyBBZGQgdGhlIG51bVRva2VucyB3aGljaCB3ZXJlIGp1c3QgY3JlYXRlZCB0byB0aGUgdG90YWwgc3VwcGx5LiBXZSdyZSBhIGNyeXB0byBjZW50cmFsIGJhbmshCgkJdG90YWxTdXBwbHkgPSBhZGQodG90YWxTdXBwbHksIG51bVRva2Vucyk7CgoJCS8vIEFzc2lnbiB0aGUgdG9rZW5zIHRvIHRoZSBiYWxhbmNlIG9mIHRoZSBidXllci4KCQl0b2tlbkJhbGFuY2Vbc2VuZGVyXSA9IGFkZCh0b2tlbkJhbGFuY2Vbc2VuZGVyXSwgbnVtVG9rZW5zKTsKCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXQgYXJyYXkgc28gdGhhdCB0aGUgYnV5ZXIgY2Fubm90IGNsYWltIGRpdmlkZW5kcyBvbiBwcmV2aW91cyBwdXJjaGFzZXMuCgkJLy8gQWxzbyBpbmNsdWRlIHRoZSBmZWUgcGFpZCBmb3IgZW50ZXJpbmcgdGhlIHNjaGVtZS4KCQkvLyBGaXJzdCB3ZSBjb21wdXRlIGhvdyBtdWNoIHdhcyBqdXN0IHBhaWQgb3V0IHRvIHRoZSBidXllci4uLgoJCXZhciBwYXlvdXREaWZmID0gKGludDI1NikgKChlYXJuaW5nc1BlclRva2VuICogbnVtVG9rZW5zKSAtIGJ1eWVyRmVlKTsKCQkKCQkvLyBUaGVuIHdlIHVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSBmb3IgdGhlIGJ1eWVyIHdpdGggdGhpcyBhbW91bnQuLi4KCQlwYXlvdXRzW3NlbmRlcl0gKz0gcGF5b3V0RGlmZjsKCQkKCQkvLyBBbmQgdGhlbiB3ZSBmaW5hbGx5IGFkZCBpdCB0byB0aGUgdmFyaWFibGUgdHJhY2tpbmcgdGhlIHRvdGFsIGFtb3VudCBzcGVudCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyAgICArPSBwYXlvdXREaWZmOwoJCQoJfQoKCS8vIFNlbGwgZnVuY3Rpb24gdGhhdCB0YWtlcyB0b2tlbnMgYW5kIGNvbnZlcnRzIHRoZW0gaW50byBFdGhlci4gQWxzbyBjb21lcyB3aXRoIGEgMTAlIGZlZQoJLy8gdG8gZGlzY291cmFnaW5nIGR1bXBpbmcsIGFuZCBtZWFucyB0aGF0IGlmIHNvbWVvbmUgbmVhciB0aGUgdG9wIHNlbGxzLCB0aGUgZmVlIGRpc3RyaWJ1dGVkCgkvLyB3aWxsIGJlICpzaWduaWZpY2FudCouCglmdW5jdGlvbiBzZWxsKHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB7CgkgICAgLy8gQ2FsY3VsYXRlIHRoZSBhbW91bnQgb2YgRXRoZXIgdGhhdCB0aGUgaG9sZGVycyB0b2tlbnMgc2VsbCBmb3IgYXQgdGhlIGN1cnJlbnQgc2VsbCBwcmljZS4KCQl2YXIgbnVtRXRoZXJzQmVmb3JlRmVlID0gZ2V0RXRoZXJGb3JUb2tlbnMoYW1vdW50KTsKCQkKCQkvLyAxMCUgb2YgdGhlIHJlc3VsdGluZyBFdGhlciBpcyB1c2VkIHRvIHBheSByZW1haW5pbmcgaG9sZGVycy4KICAgICAgICB2YXIgZmVlID0gZGl2KG51bUV0aGVyc0JlZm9yZUZlZSwgMTApOwoJCQoJCS8vIE5ldCBFdGhlciBmb3IgdGhlIHNlbGxlciBhZnRlciB0aGUgZmVlIGhhcyBiZWVuIHN1YnRyYWN0ZWQuCiAgICAgICAgdmFyIG51bUV0aGVycyA9IG51bUV0aGVyc0JlZm9yZUZlZSAtIGZlZTsKCQkKCQkvLyAqUmVtb3ZlKiB0aGUgbnVtVG9rZW5zIHdoaWNoIHdlcmUganVzdCBzb2xkIGZyb20gdGhlIHRvdGFsIHN1cHBseS4gV2UncmUgL2RlZmluaXRlbHkvIGEgY3J5cHRvIGNlbnRyYWwgYmFuay4KCQl0b3RhbFN1cHBseSA9IHN1Yih0b3RhbFN1cHBseSwgYW1vdW50KTsKCQkKICAgICAgICAvLyBSZW1vdmUgdGhlIHRva2VucyBmcm9tIHRoZSBiYWxhbmNlIG9mIHRoZSBidXllci4KCQl0b2tlbkJhbGFuY2VbbXNnLnNlbmRlcl0gPSBzdWIodG9rZW5CYWxhbmNlW21zZy5zZW5kZXJdLCBhbW91bnQpOwoKICAgICAgICAvLyBVcGRhdGUgdGhlIHBheW91dCBhcnJheSBzbyB0aGF0IHRoZSBzZWxsZXIgY2Fubm90IGNsYWltIGZ1dHVyZSBkaXZpZGVuZHMgdW5sZXNzIHRoZXkgYnV5IGJhY2sgaW4uCgkJLy8gRmlyc3Qgd2UgY29tcHV0ZSBob3cgbXVjaCB3YXMganVzdCBwYWlkIG91dCB0byB0aGUgc2VsbGVyLi4uCgkJdmFyIHBheW91dERpZmYgPSAoaW50MjU2KSAoZWFybmluZ3NQZXJUb2tlbiAqIGFtb3VudCArIChudW1FdGhlcnMgKiBzY2FsZUZhY3RvcikpOwoJCQogICAgICAgIC8vIFdlIHJlZHVjZSB0aGUgYW1vdW50IHBhaWQgb3V0IHRvIHRoZSBzZWxsZXIgKHRoaXMgZWZmZWN0aXZlbHkgcmVzZXRzIHRoZWlyIHBheW91dHMgdmFsdWUgdG8gemVybywKCQkvLyBzaW5jZSB0aGV5J3JlIHNlbGxpbmcgYWxsIG9mIHRoZWlyIHRva2VucykuIFRoaXMgbWFrZXMgc3VyZSB0aGUgc2VsbGVyIGlzbid0IGRpc2FkdmFudGFnZWQgaWYKCQkvLyB0aGV5IGRlY2lkZSB0byBidXkgYmFjayBpbi4KCQlwYXlvdXRzW21zZy5zZW5kZXJdIC09IHBheW91dERpZmY7CQkKCQkKCQkvLyBEZWNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCiAgICAgICAgdG90YWxQYXlvdXRzIC09IHBheW91dERpZmY7CgkJCgkJLy8gQ2hlY2sgdGhhdCB3ZSBoYXZlIHRva2VucyBpbiBleGlzdGVuY2UgKHRoaXMgaXMgYSBiaXQgb2YgYW4gaXJyZWxldmFudCBjaGVjayBzaW5jZSB3ZSdyZQoJCS8vIHNlbGxpbmcgdG9rZW5zLCBidXQgaXQgZ3VhcmRzIGFnYWluc3QgZGl2aXNpb24gYnkgemVybykuCgkJaWYgKHRvdGFsU3VwcGx5ID4gMCkgewoJCQkvLyBTY2FsZSB0aGUgRXRoZXIgdGFrZW4gYXMgdGhlIHNlbGxpbmcgZmVlIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCQkJdmFyIGV0aGVyRmVlID0gZmVlICogc2NhbGVGYWN0b3I7CgkJCQoJCQkvLyBGZWUgaXMgZGlzdHJpYnV0ZWQgdG8gYWxsIHJlbWFpbmluZyB0b2tlbiBob2xkZXJzLgoJCQkvLyByZXdhcmRQZXJTaGFyZSBpcyB0aGUgYW1vdW50IGdhaW5lZCBwZXIgdG9rZW4gdGhhbmtzIHRvIHRoaXMgc2VsbC4KCQkJdmFyIHJld2FyZFBlclNoYXJlID0gZXRoZXJGZWUgLyB0b3RhbFN1cHBseTsKCQkJCgkJCS8vIFRoZSBFdGhlciB2YWx1ZSBwZXIgdG9rZW4gaXMgaW5jcmVhc2VkIHByb3BvcnRpb25hbGx5LgoJCQllYXJuaW5nc1BlclRva2VuID0gYWRkKGVhcm5pbmdzUGVyVG9rZW4sIHJld2FyZFBlclNoYXJlKTsKCQl9Cgl9CgkKCS8vIER5bmFtaWMgdmFsdWUgb2YgRXRoZXIgaW4gcmVzZXJ2ZSwgYWNjb3JkaW5nIHRvIHRoZSBDUlIgcmVxdWlyZW1lbnQuCglmdW5jdGlvbiByZXNlcnZlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBhbW91bnQpIHsKCQlyZXR1cm4gc3ViKGJhbGFuY2UoKSwKCQkJICgodWludDI1NikgKChpbnQyNTYpIChlYXJuaW5nc1BlclRva2VuICogdG90YWxTdXBwbHkpIC0gdG90YWxQYXlvdXRzKSAvIHNjYWxlRmFjdG9yKSk7Cgl9CgoJLy8gQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIHRva2VucyB0aGF0IGNhbiBiZSBib3VnaHQgZm9yIGEgZ2l2ZW4gYW1vdW50IG9mIEV0aGVyLCBhY2NvcmRpbmcgdG8gdGhlCgkvLyBkeW5hbWljIHJlc2VydmUgYW5kIHRvdGFsU3VwcGx5IHZhbHVlcyAoZGVyaXZlZCBmcm9tIHRoZSBidXkgYW5kIHNlbGwgcHJpY2VzKS4KCWZ1bmN0aW9uIGdldFRva2Vuc0ZvckV0aGVyKHVpbnQyNTYgZXRoZXJ2YWx1ZSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG9rZW5zKSB7CgkJcmV0dXJuIHN1YihmaXhlZEV4cChmaXhlZExvZyhyZXNlcnZlKCkgKyBldGhlcnZhbHVlKSpjcnJfbi9jcnJfZCArIHByaWNlX2NvZWZmKSwgdG90YWxTdXBwbHkpOwoJfQoKCS8vIFNlbWFudGljYWxseSBzaW1pbGFyIHRvIGdldFRva2Vuc0ZvckV0aGVyLCBidXQgc3VidHJhY3RzIHRoZSBjYWxsZXJzIGJhbGFuY2UgZnJvbSB0aGUgYW1vdW50IG9mIEV0aGVyIHJldHVybmVkIGZvciBjb252ZXJzaW9uLgoJZnVuY3Rpb24gY2FsY3VsYXRlRGl2aWRlbmRUb2tlbnModWludDI1NiBldGhlcnZhbHVlLCB1aW50MjU2IHN1YnZhbHVlKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b2tlbnMpIHsKCQlyZXR1cm4gc3ViKGZpeGVkRXhwKGZpeGVkTG9nKHJlc2VydmUoKSAtIHN1YnZhbHVlICsgZXRoZXJ2YWx1ZSkqY3JyX24vY3JyX2QgKyBwcmljZV9jb2VmZiksIHRvdGFsU3VwcGx5KTsKCX0KCgkvLyBDb252ZXJ0cyBhIG51bWJlciB0b2tlbnMgaW50byBhbiBFdGhlciB2YWx1ZS4KCWZ1bmN0aW9uIGdldEV0aGVyRm9yVG9rZW5zKHVpbnQyNTYgdG9rZW5zKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBldGhlcnZhbHVlKSB7CgkJLy8gSG93IG11Y2ggcmVzZXJ2ZSBFdGhlciBkbyB3ZSBoYXZlIGxlZnQgaW4gdGhlIGNvbnRyYWN0PwoJCXZhciByZXNlcnZlQW1vdW50ID0gcmVzZXJ2ZSgpOwoKCQkvLyBJZiB5b3UncmUgdGhlIEhpZ2hsYW5kZXIgKG9yIGJhZ2hvbGRlciksIHlvdSBnZXQgVGhlIFByaXplLiBFdmVyeXRoaW5nIGxlZnQgaW4gdGhlIHZhdWx0LgoJCWlmICh0b2tlbnMgPT0gdG90YWxTdXBwbHkpCgkJCXJldHVybiByZXNlcnZlQW1vdW50OwoKCQkvLyBJZiB0aGVyZSB3b3VsZCBiZSBleGNlc3MgRXRoZXIgbGVmdCBhZnRlciB0aGUgdHJhbnNhY3Rpb24gdGhpcyBpcyBjYWxsZWQgd2l0aGluLCByZXR1cm4gdGhlIEV0aGVyCgkJLy8gY29ycmVzcG9uZGluZyB0byB0aGUgZXF1YXRpb24gaW4gRHIgSm9jaGVuIEhvZW5pY2tlJ3Mgb3JpZ2luYWwgUG9uemkgcGFwZXIsIHdoaWNoIGNhbiBiZSBmb3VuZAoJCS8vIGF0IGh0dHBzOi8vdGVzdC5qb2NoZW4taG9lbmlja2UuZGUvZXRoL3BvbnppdG9rZW4vIGluIHRoZSB0aGlyZCBlcXVhdGlvbiwgd2l0aCB0aGUgQ1JSIG51bWVyYXRvciAKCQkvLyBhbmQgZGVub21pbmF0b3IgYWx0ZXJlZCB0byAxIGFuZCAyIHJlc3BlY3RpdmVseS4KCQlyZXR1cm4gc3ViKHJlc2VydmVBbW91bnQsIGZpeGVkRXhwKChmaXhlZExvZyh0b3RhbFN1cHBseSAtIHRva2VucykgLSBwcmljZV9jb2VmZikgKiBjcnJfZC9jcnJfbikpOwoJfQoKCS8vIFlvdSBkb24ndCBjYXJlIGFib3V0IHRoZXNlLCBidXQgaWYgeW91IHJlYWxseSBkbyB0aGV5J3JlIGhleCB2YWx1ZXMgZm9yIAoJLy8gY28tZWZmaWNpZW50cyB1c2VkIHRvIHNpbXVsYXRlIGFwcHJveGltYXRpb25zIG9mIHRoZSBsb2cgYW5kIGV4cCBmdW5jdGlvbnMuCglpbnQyNTYgIGNvbnN0YW50IG9uZSAgICAgICAgPSAweDEwMDAwMDAwMDAwMDAwMDAwOwoJdWludDI1NiBjb25zdGFudCBzcXJ0MiAgICAgID0gMHgxNmEwOWU2NjdmM2JjYzkwODsKCXVpbnQyNTYgY29uc3RhbnQgc3FydGRvdDUgICA9IDB4MGI1MDRmMzMzZjlkZTY0ODQ7CglpbnQyNTYgIGNvbnN0YW50IGxuMiAgICAgICAgPSAweDBiMTcyMTdmN2QxY2Y3OWFjOwoJaW50MjU2ICBjb25zdGFudCBsbjJfNjRkb3Q1ID0gMHgyY2I1M2YwOWYwNWNjNjI3Yzg7CglpbnQyNTYgIGNvbnN0YW50IGMxICAgICAgICAgPSAweDFmZmZmZmZmZmZmOWRhYzliOwoJaW50MjU2ICBjb25zdGFudCBjMyAgICAgICAgID0gMHgwYWFhYWFhYWMxNjg3NzkwODsKCWludDI1NiAgY29uc3RhbnQgYzUgICAgICAgICA9IDB4MDY2NjY2NGU1ZTlmYTBjOTk7CglpbnQyNTYgIGNvbnN0YW50IGM3ICAgICAgICAgPSAweDA0OTI1NDAyNmE3NjMwYWNmOwoJaW50MjU2ICBjb25zdGFudCBjOSAgICAgICAgID0gMHgwMzhiZDc1ZWQzNzc1M2Q2ODsKCWludDI1NiAgY29uc3RhbnQgYzExICAgICAgICA9IDB4MDMyODRhMGMxNDYxMDkyNGY7CgoJLy8gVGhlIHBvbHlub21pYWwgUiA9IGMxKnggKyBjMyp4XjMgKyAuLi4gKyBjMTEgKiB4XjExCgkvLyBhcHByb3hpbWF0ZXMgdGhlIGZ1bmN0aW9uIGxvZygxK3gpLWxvZygxLXgpCgkvLyBIZW5jZSBSKHMpID0gbG9nKCgxK3MpLygxLXMpKSA9IGxvZyhhKQoJZnVuY3Rpb24gZml4ZWRMb2codWludDI1NiBhKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKGludDI1NiBsb2cpIHsKCQlpbnQzMiBzY2FsZSA9IDA7CgkJd2hpbGUgKGEgPiBzcXJ0MikgewoJCQlhIC89IDI7CgkJCXNjYWxlKys7CgkJfQoJCXdoaWxlIChhIDw9IHNxcnRkb3Q1KSB7CgkJCWEgKj0gMjsKCQkJc2NhbGUtLTsKCQl9CgkJaW50MjU2IHMgPSAoKChpbnQyNTYpKGEpIC0gb25lKSAqIG9uZSkgLyAoKGludDI1NikoYSkgKyBvbmUpOwoJCXZhciB6ID0gKHMqcykgLyBvbmU7CgkJcmV0dXJuIHNjYWxlICogbG4yICsKCQkJKHMqKGMxICsgKHoqKGMzICsgKHoqKGM1ICsgKHoqKGM3ICsgKHoqKGM5ICsgKHoqYzExL29uZSkpCgkJCQkvb25lKSkvb25lKSkvb25lKSkvb25lKSkvb25lKTsKCX0KCglpbnQyNTYgY29uc3RhbnQgYzIgPSAgMHgwMmFhYWFhYWFhYTAxNWRiMDsKCWludDI1NiBjb25zdGFudCBjNCA9IC0weDAwMGI2MGI2MDgwODM5OWQxOwoJaW50MjU2IGNvbnN0YW50IGM2ID0gIDB4MDAwMDQ1NTk1NmJjY2RkMDY7CglpbnQyNTYgY29uc3RhbnQgYzggPSAtMHgwMDAwMDFiODkzYWQwNGIzYTsKCQoJLy8gVGhlIHBvbHlub21pYWwgUiA9IDIgKyBjMip4XjIgKyBjNCp4XjQgKyAuLi4KCS8vIGFwcHJveGltYXRlcyB0aGUgZnVuY3Rpb24geCooZXhwKHgpKzEpLyhleHAoeCktMSkKCS8vIEhlbmNlIGV4cCh4KSA9IChSKHgpK3gpLyhSKHgpLXgpCglmdW5jdGlvbiBmaXhlZEV4cChpbnQyNTYgYSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2IGV4cCkgewoJCWludDI1NiBzY2FsZSA9IChhICsgKGxuMl82NGRvdDUpKSAvIGxuMiAtIDY0OwoJCWEgLT0gc2NhbGUqbG4yOwoJCWludDI1NiB6ID0gKGEqYSkgLyBvbmU7CgkJaW50MjU2IFIgPSAoKGludDI1NikoMikgKiBvbmUpICsKCQkJKHoqKGMyICsgKHoqKGM0ICsgKHoqKGM2ICsgKHoqYzgvb25lKSkvb25lKSkvb25lKSkvb25lKTsKCQlleHAgPSAodWludDI1NikgKCgoUiArIGEpICogb25lKSAvIChSIC0gYSkpOwoJCWlmIChzY2FsZSA+PSAwKQoJCQlleHAgPDw9IHNjYWxlOwoJCWVsc2UKCQkJZXhwID4+PSAtc2NhbGU7CgkJcmV0dXJuIGV4cDsKCX0KCQoJLy8gVGhlIGJlbG93IGFyZSBzYWZlbWF0aCBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIGZvdXIgYXJpdGhtZXRpYyBvcGVyYXRvcnMKCS8vIGRlc2lnbmVkIHRvIGV4cGxpY2l0bHkgcHJldmVudCBvdmVyLSBhbmQgdW5kZXItZmxvd3Mgb2YgaW50ZWdlciB2YWx1ZXMuCgoJZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCQlpZiAoYSA9PSAwKSB7CgkJCXJldHVybiAwOwoJCX0KCQl1aW50MjU2IGMgPSBhICogYjsKCQlhc3NlcnQoYyAvIGEgPT0gYik7CgkJcmV0dXJuIGM7Cgl9CgoJZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCQkvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKCQl1aW50MjU2IGMgPSBhIC8gYjsKCQkvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAoJCXJldHVybiBjOwoJfQoKCWZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CgkJYXNzZXJ0KGIgPD0gYSk7CgkJcmV0dXJuIGEgLSBiOwoJfQoKCWZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CgkJdWludDI1NiBjID0gYSArIGI7CgkJYXNzZXJ0KGMgPj0gYSk7CgkJcmV0dXJuIGM7Cgl9CgoJLy8gVGhpcyBhbGxvd3MgeW91IHRvIGJ1eSB0b2tlbnMgYnkgc2VuZGluZyBFdGhlciBkaXJlY3RseSB0byB0aGUgc21hcnQgY29udHJhY3QKCS8vIHdpdGhvdXQgaW5jbHVkaW5nIGFueSB0cmFuc2FjdGlvbiBkYXRhICh1c2VmdWwgZm9yLCBzYXksIG1vYmlsZSB3YWxsZXQgYXBwcykuCglmdW5jdGlvbiAoKSBwYXlhYmxlIHB1YmxpYyB7CgkJLy8gbXNnLnZhbHVlIGlzIHRoZSBhbW91bnQgb2YgRXRoZXIgc2VudCBieSB0aGUgdHJhbnNhY3Rpb24uCgkJaWYgKG1zZy52YWx1ZSA+IDApIHsKCQkJZnVuZCgpOwoJCX0gZWxzZSB7CgkJCXdpdGhkcmF3T2xkKG1zZy5zZW5kZXIpOwoJCX0KCX0KfQoKCmNvbnRyYWN0IERheVRyYWRlcnsKICAvLyBCYWcgc29sZCBldmVudAogIGV2ZW50IEJhZ1NvbGQoCiAgICB1aW50MjU2IGJhZ0lkLAogICAgdWludDI1NiBtdWx0aXBsaWVyLAogICAgdWludDI1NiBvbGRQcmljZSwKICAgIHVpbnQyNTYgbmV3UHJpY2UsCiAgICBhZGRyZXNzIHByZXZPd25lciwKICAgIGFkZHJlc3MgbmV3T3duZXIKICApOwogIAogIGFkZHJlc3MgcHVibGljIFN0b2Nrc0FkZHJlc3MgPSAweEM2QjU3NTZCMkFDM0M0YzMxNzZjQTRiNzY4YUUyNjg5ZkY4YjlDZWU7CiAgRXRoUHlyYW1pZCBlcGMgPSBFdGhQeXJhbWlkKFN0b2Nrc0FkZHJlc3MpOwogIAogIC8vIEFkZHJlc3Mgb2YgdGhlIGNvbnRyYWN0IGNyZWF0b3IKICBhZGRyZXNzIHB1YmxpYyBjb250cmFjdE93bmVyOwoKICAvLyBEZWZhdWx0IHRpbWVvdXQgaXMgNCBob3VycwogIHVpbnQyNTYgcHVibGljIHRpbWVvdXQgPSAxIGhvdXJzOwoKICAvLyBEZWZhdWx0IHN0YXJ0aW5nIHByaWNlIGlzIDAuMDA1IGV0aGVyCiAgdWludDI1NiBwdWJsaWMgc3RhcnRpbmdQcmljZSA9IDAuMDA1IGV0aGVyOwoKICBCYWdbXSBwcml2YXRlIGJhZ3M7CgogIHN0cnVjdCBCYWcgewogICAgYWRkcmVzcyBvd25lcjsKICAgIHVpbnQyNTYgbGV2ZWw7CiAgICB1aW50MjU2IG11bHRpcGxpZXI7IC8vIE11bHRpcGxpZXIgbXVzdCBiZSByYXRlICogMTAwLiBleGFtcGxlOiAxLjV4ID09IDE1MAogICAgdWludDI1NiBwdXJjaGFzZWRBdDsKICB9CgogIC8vLyBBY2Nlc3MgbW9kaWZpZXIgZm9yIGNvbnRyYWN0IG93bmVyIG9ubHkgZnVuY3Rpb25hbGl0eQogIG1vZGlmaWVyIG9ubHlDb250cmFjdE93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbnRyYWN0T3duZXIpOwogICAgXzsKICB9CiAgCiAgCgogIGZ1bmN0aW9uIERheVRyYWRlcigpIHB1YmxpYyB7CiAgICBjb250cmFjdE93bmVyID0gbXNnLnNlbmRlcjsKICAgIGNyZWF0ZUJhZygxNTApOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlQmFnKHVpbnQyNTYgbXVsdGlwbGllcikgcHVibGljIG9ubHlDb250cmFjdE93bmVyIHsKICAgIEJhZyBtZW1vcnkgYmFnID0gQmFnKHsKICAgICAgb3duZXI6IHRoaXMsCiAgICAgIGxldmVsOiAwLAogICAgICBtdWx0aXBsaWVyOiBtdWx0aXBsaWVyLAogICAgICBwdXJjaGFzZWRBdDogMAogICAgfSk7CgogICAgYmFncy5wdXNoKGJhZyk7CiAgfQoKICBmdW5jdGlvbiBzZXRUaW1lb3V0KHVpbnQyNTYgX3RpbWVvdXQpIHB1YmxpYyBvbmx5Q29udHJhY3RPd25lciB7CiAgICB0aW1lb3V0ID0gX3RpbWVvdXQ7CiAgfQogIAogIGZ1bmN0aW9uIHNldFN0YXJ0aW5nUHJpY2UodWludDI1NiBfc3RhcnRpbmdQcmljZSkgcHVibGljIG9ubHlDb250cmFjdE93bmVyIHsKICAgIHN0YXJ0aW5nUHJpY2UgPSBfc3RhcnRpbmdQcmljZTsKICB9CgogIGZ1bmN0aW9uIHNldEJhZ011bHRpcGxpZXIodWludDI1NiBiYWdJZCwgdWludDI1NiBtdWx0aXBsaWVyKSBwdWJsaWMgb25seUNvbnRyYWN0T3duZXIgewogICAgQmFnIHN0b3JhZ2UgYmFnID0gYmFnc1tiYWdJZF07CiAgICBiYWcubXVsdGlwbGllciA9IG11bHRpcGxpZXI7CiAgfQoKICBmdW5jdGlvbiBnZXRCYWcodWludDI1NiBiYWdJZCkgcHVibGljIHZpZXcgcmV0dXJucyAoCiAgICBhZGRyZXNzIG93bmVyLAogICAgdWludDI1NiBzZWxsaW5nUHJpY2UsCiAgICB1aW50MjU2IG5leHRTZWxsaW5nUHJpY2UsCiAgICB1aW50MjU2IGxldmVsLAogICAgdWludDI1NiBtdWx0aXBsaWVyLAogICAgdWludDI1NiBwdXJjaGFzZWRBdAogICkgewogICAgQmFnIHN0b3JhZ2UgYmFnID0gYmFnc1tiYWdJZF07CgogICAgb3duZXIgPSBiYWcub3duZXI7CiAgICBsZXZlbCA9IGdldEJhZ0xldmVsKGJhZyk7CiAgICBzZWxsaW5nUHJpY2UgPSBnZXRCYWdTZWxsaW5nUHJpY2UoYmFnKTsKICAgIG5leHRTZWxsaW5nUHJpY2UgPSBnZXROZXh0QmFnU2VsbGluZ1ByaWNlKGJhZyk7CiAgICBtdWx0aXBsaWVyID0gYmFnLm11bHRpcGxpZXI7CiAgICBwdXJjaGFzZWRBdCA9IGJhZy5wdXJjaGFzZWRBdDsKICB9CgogIGZ1bmN0aW9uIGdldEJhZ0NvdW50KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWdDb3VudCkgewogICAgcmV0dXJuIGJhZ3MubGVuZ3RoOwogIH0KCiAgZnVuY3Rpb24gZGVsZXRlQmFnKHVpbnQyNTYgYmFnSWQpIHB1YmxpYyBvbmx5Q29udHJhY3RPd25lciB7CiAgICBkZWxldGUgYmFnc1tiYWdJZF07CiAgfQoKICBmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IGJhZ0lkKSBwdWJsaWMgcGF5YWJsZSB7CiAgICBCYWcgc3RvcmFnZSBiYWcgPSBiYWdzW2JhZ0lkXTsKCiAgICBhZGRyZXNzIG9sZE93bmVyID0gYmFnLm93bmVyOwogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CgogICAgLy8gTWFraW5nIHN1cmUgdG9rZW4gb3duZXIgaXMgbm90IHNlbmRpbmcgdG8gc2VsZgogICAgcmVxdWlyZShvbGRPd25lciAhPSBuZXdPd25lcik7CgogICAgLy8gU2FmZXR5IGNoZWNrIHRvIHByZXZlbnQgYWdhaW5zdCBhbiB1bmV4cGVjdGVkIDB4MCBkZWZhdWx0LgogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwobmV3T3duZXIpKTsKICAgIAogICAgdWludDI1NiBzZWxsaW5nUHJpY2UgPSBnZXRCYWdTZWxsaW5nUHJpY2UoYmFnKTsKCiAgICAvLyBNYWtpbmcgc3VyZSBzZW50IGFtb3VudCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNlbGxpbmdQcmljZQogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gc2VsbGluZ1ByaWNlKTsKCiAgICAvLyBUYWtlIGEgdHJhbnNhY3Rpb24gZmVlCiAgICB1aW50MjU2IHBheW1lbnQgPSB1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCA5MCksIDEwMCkpOwogICAgdWludDI1NiBwdXJjaGFzZUV4Y2VzcyA9IFNhZmVNYXRoLnN1Yihtc2cudmFsdWUsIHNlbGxpbmdQcmljZSk7CgogICAgdWludDI1NiBsZXZlbCA9IGdldEJhZ0xldmVsKGJhZyk7CiAgICBiYWcubGV2ZWwgPSBTYWZlTWF0aC5hZGQobGV2ZWwsIDEpOwogICAgYmFnLm93bmVyID0gbmV3T3duZXI7CiAgICBiYWcucHVyY2hhc2VkQXQgPSBub3c7CgogICAgCiAgICAvLyBQYXkgcHJldmlvdXMgdG9rZW5Pd25lciBpZiBvd25lciBpcyBub3QgY29udHJhY3QKICAgIGlmIChvbGRPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgIG9sZE93bmVyLnRyYW5zZmVyKHBheW1lbnQpOwogICAgICAKICAgIH0KCiAgICAvLyBUcmlnZ2VyIEJhZ1NvbGQgZXZlbnQKICAgIEJhZ1NvbGQoYmFnSWQsIGJhZy5tdWx0aXBsaWVyLCBzZWxsaW5nUHJpY2UsIGdldEJhZ1NlbGxpbmdQcmljZShiYWcpLCBvbGRPd25lciwgbmV3T3duZXIpOwoKICAgIG5ld093bmVyLnRyYW5zZmVyKHB1cmNoYXNlRXhjZXNzKTsKICB9CgogIGZ1bmN0aW9uIHBheW91dCgpIHB1YmxpYyBvbmx5Q29udHJhY3RPd25lciB7CiAgICBjb250cmFjdE93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQogIAogIGZ1bmN0aW9uIGdldE1lT3V0T2ZIZXJlU3RvY2tzKCkgcHVibGljIG9ubHlDb250cmFjdE93bmVyIHsKICAgIGVwYy5nZXRNZU91dE9mSGVyZSgpOwogIH0KICAKICBmdW5jdGlvbiBzZWxsTXlUb2tlbnNTdG9ja3MoKSBwdWJsaWMgb25seUNvbnRyYWN0T3duZXIgewogICAgZXBjLnNlbGxNeVRva2VucygpOwogIH0KICAKICBmdW5jdGlvbiB3aXRoZHJhd1N0b2NrcygpIHB1YmxpYyBvbmx5Q29udHJhY3RPd25lciB7CiAgICBlcGMud2l0aGRyYXcoKTsKICB9CiAgCiAgZnVuY3Rpb24gYmFsYW5jZU9mU3RvY2tzQXQoKSBwdWJsaWMgewogICAgZXBjLndpdGhkcmF3KCk7CiAgfQogIAogIC8qKiogUFJJVkFURSBGVU5DVElPTlMgKioqLwoKICAvLyBJZiBhIGJhZyBoYXNuJ3QgYmVlbiBwdXJjaGFzZWQgaW4gb3ZlciAkdGltZW91dCwKICAvLyByZXNldCBpdHMgbGV2ZWwgYmFjayB0byAwIGJ1dCByZXRhaW4gdGhlIGV4aXN0aW5nIG93bmVyCiAgZnVuY3Rpb24gZ2V0QmFnTGV2ZWwoQmFnIGJhZykgcHJpdmF0ZSB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChub3cgPD0gKFNhZmVNYXRoLmFkZChiYWcucHVyY2hhc2VkQXQsIHRpbWVvdXQpKSkgewogICAgICByZXR1cm4gYmFnLmxldmVsOwogICAgfSBlbHNlIHsKCSAgU3RvY2tzQWRkcmVzcy50cmFuc2ZlcihTYWZlTWF0aC5kaXYodGhpcy5iYWxhbmNlLCAyKSk7CiAgICAgIHJldHVybiAwOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2V0QmFnU2VsbGluZ1ByaWNlKEJhZyBiYWcpIHByaXZhdGUgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGxldmVsID0gZ2V0QmFnTGV2ZWwoYmFnKTsKICAgIHJldHVybiBnZXRQcmljZUZvckxldmVsKGJhZywgbGV2ZWwpOwogIH0KCiAgZnVuY3Rpb24gZ2V0TmV4dEJhZ1NlbGxpbmdQcmljZShCYWcgYmFnKSBwcml2YXRlIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBsZXZlbCA9IFNhZmVNYXRoLmFkZChnZXRCYWdMZXZlbChiYWcpLCAxKTsKICAgIHJldHVybiBnZXRQcmljZUZvckxldmVsKGJhZywgbGV2ZWwpOwogIH0KCiAgZnVuY3Rpb24gZ2V0UHJpY2VGb3JMZXZlbChCYWcgYmFnLCB1aW50MjU2IGxldmVsKSBwcml2YXRlIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBzZWxsaW5nUHJpY2UgPSBzdGFydGluZ1ByaWNlOwoKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IGxldmVsOyBpKyspIHsKICAgICAgc2VsbGluZ1ByaWNlID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsaW5nUHJpY2UsIGJhZy5tdWx0aXBsaWVyKSwgMTAwKTsKICAgIH0KCiAgICByZXR1cm4gc2VsbGluZ1ByaWNlOwogIH0KCiAgLy8vIFNhZmV0eSBjaGVjayBvbiBfdG8gYWRkcmVzcyB0byBwcmV2ZW50IGFnYWluc3QgYW4gdW5leHBlY3RlZCAweDAgZGVmYXVsdC4KICBmdW5jdGlvbiBfYWRkcmVzc05vdE51bGwoYWRkcmVzcyBfdG8pIHByaXZhdGUgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gX3RvICE9IGFkZHJlc3MoMCk7CiAgfQp9CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQ=='.
	

]
