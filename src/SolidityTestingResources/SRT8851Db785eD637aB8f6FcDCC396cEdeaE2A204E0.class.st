Class {
	#name : #SRT8851Db785eD637aB8f6FcDCC396cEdeaE2A204E0,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8851Db785eD637aB8f6FcDCC396cEdeaE2A204E0 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gQWRkIGEgbnVtYmVyIHRvIGFub3RoZXIgbnVtYmVyLCBjaGVja2luZyBmb3Igb3ZlcmZsb3dzCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSAmJiBjID49IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gU3VidHJhY3QgYSBudW1iZXIgZnJvbSBhbm90aGVyIG51bWJlciwgY2hlY2tpbmcgZm9yIHVuZGVyZmxvd3MKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgkKfQoKY29udHJhY3QgT3duZWQgewoKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIE93bmVkKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRPd25lcihhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgICB9Cn0KCmludGVyZmFjZSB0b2tlbiB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgOwoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKfQoKY29udHJhY3QgQUxDQ3Jvd2RzYWxlMiBpcyBPd25lZHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgkKCXN0cnVjdCBDb250cmlidXRvckRhdGF7CgkJYm9vbCBpc0FjdGl2ZTsKCQlib29sIGlzVG9rZW5EaXN0cmlidXRlZDsKCQl1aW50IGNvbnRyaWJ1dGlvbkFtb3VudDsJLy8gRVRIIGNvbnRyaWJ1dGlvbgoJCXVpbnQgdG9rZW5zQW1vdW50OwkJCS8vIEV4Y2hhbmdlZCBBTEMgYW1vdW50Cgl9CgkKCW1hcHBpbmcoYWRkcmVzcyA9PiBDb250cmlidXRvckRhdGEpIHB1YmxpYyBjb250cmlidXRvckxpc3Q7CgltYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgY29udHJpYnV0b3JJbmRleGVzOwoJdWludCBuZXh0Q29udHJpYnV0b3JJbmRleDsKCXVpbnQgY29udHJpYnV0b3JDb3VudDsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgYmVuZWZpY2lhcnk7CiAgICB1aW50IHB1YmxpYyBmdW5kaW5nTGltaXQ7CiAgICB1aW50IHB1YmxpYyBhbW91bnRSYWlzZWQ7Cgl1aW50IHB1YmxpYyByZW1haW5BbW91bnQ7CiAgICB1aW50IHB1YmxpYyBkZWFkbGluZTsKICAgIHVpbnQgcHVibGljIGV4Y2hhbmdlVG9rZW5SYXRlOwogICAgdG9rZW4gcHVibGljIHRva2VuUmV3YXJkOwoJdWludDI1NiBwdWJsaWMgdG9rZW5CYWxhbmNlOwogICAgYm9vbCBwdWJsaWMgY3Jvd2RzYWxlQ2xvc2VkID0gZmFsc2U7CiAgICBib29sIHB1YmxpYyBpc0FMQ0Rpc3RyaWJ1dGVkID0gZmFsc2U7CiAgICAKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIFRyYW5jaGUgMSBjcm93ZHNhbGUgc3RhcnQgZGF0ZSBhbmQgZW5kIGRhdGUKICAgIC8vIFN0YXJ0IC0gMjNoMDAKICAgIC8vIFRpZXIxICAtIDIzaDA1CiAgICAvLyBUaWVyMiAgLSAyM2gxMAogICAgLy8gVGllcjMgIC0gMjNoMTUKICAgIC8vIEVuZCAtIDIzaDIwCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFNUQVJUX1RJTUUgPSAxNTExNjA2MTAwOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgU0VDT05EX1RJRVJfU0FMRV9TVEFSVF9USU1FID0gMTUxMTYwNjQwMDsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRISVJEX1RJRVJfU0FMRV9TVEFSVF9USU1FID0gMTUxMTYwNjcwMDsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEZPVVJUSF9USUVSX1NBTEVfU1RBUlRfVElNRSA9IDE1MTE2MDcwMDA7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBFTkRfVElNRSA9IDE1MTE2MDczMDA7CgkKCQogICAgCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIGNyb3dkc2FsZSBleGNoYW5nZSByYXRlCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHVpbnQgcHVibGljIFNUQVJUX1JBVEUgPSAxNTAwMDsKICAgIHVpbnQgcHVibGljIFNFQ09ORF9USUVSX1JBVEUgPSAxNDAwMDsKICAgIHVpbnQgcHVibGljIFRISVJEX1RJRVJfUkFURSA9IDEyNTAwOwogICAgdWludCBwdWJsaWMgRk9VUlRIX1JBVEUgPSAxMDAwMDsKICAgIAoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gRnVuZGluZyBHb2FsCiAgICAvLyAgICAtIEhBUkQgQ0FQIDogMzMwMDAgRVRICiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEZVTkRJTkdfRVRIX0hBUkRfQ0FQID0gMzAwMDAwMDAwMDAwMDAwMDA7IC8vMC4wMUVUSAogICAgCiAgICAvLyBJUVQgdG9rZW4gZGVjaW1hbHMKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBBTENfREVDSU1BTFMgPSA4OwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQUxDX0RFQ0lNQUxTRkFDVE9SID0gMTAqKnVpbnQoQUxDX0RFQ0lNQUxTKTsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgQUxDX0ZVTkRBVElPTl9BRERSRVNTID0gMHg1NUJlQTFBMDMzNUE4RWE1NjU3MmI4RTY2ZjE3MTk2MjkwQ2E2NDY3OwogICAgYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgQUxDX0NPTlRSQUNUX0FERFJFU1MgPSAweEIxNUVGNDE5YkEwRGQxZjU3NDhjN2M2MGUxN0ZlODhlNmU3OTQ5NTA7CgogICAgZXZlbnQgR29hbFJlYWNoZWQoYWRkcmVzcyByYWlzaW5nQWRkcmVzcywgdWludCBhbW91bnRSYWlzZWQpOwoJZXZlbnQgTGltaXRSZWFjaGVkKGFkZHJlc3MgcmFpc2luZ0FkZHJlc3MsIHVpbnQgYW1vdW50UmFpc2VkKTsKICAgIGV2ZW50IEZ1bmRUcmFuc2ZlcihhZGRyZXNzIGJhY2tlciwgdWludCBhbW91bnQsIGJvb2wgaXNDb250cmlidXRpb24pOwoJZXZlbnQgV2l0aGRyYXdGYWlsZWQoYWRkcmVzcyByYWlzaW5nQWRkcmVzcywgdWludCBhbW91bnQsIGJvb2wgaXNDb250cmlidXRpb24pOwoJZXZlbnQgRnVuZFJldHVybihhZGRyZXNzIGJhY2tlciwgdWludCBhbW91bnQsIGJvb2wgaXNDb250cmlidXRpb24pOwoKICAgIC8qKgogICAgICogQ29uc3RyY3RvciBmdW5jdGlvbgogICAgICoKICAgICAqIFNldHVwIHRoZSBvd25lcgogICAgICovCiAgICBmdW5jdGlvbiBBTENDcm93ZHNhbGUyKAogICAgKSBwdWJsaWMgewogICAgICAgIGJlbmVmaWNpYXJ5ID0gQUxDX0ZVTkRBVElPTl9BRERSRVNTOwogICAgICAgIGZ1bmRpbmdMaW1pdCA9IEZVTkRJTkdfRVRIX0hBUkRfQ0FQOyAgLy8gRnVuZGluZyBsaW1pdCAwLjAxRVRICgkgICAgZGVhZGxpbmUgPSBFTkRfVElNRTsgIC8vIDIwMTctMTEtMjUgMTI6MDA6MDAgVVRDCiAgICAgICAgZXhjaGFuZ2VUb2tlblJhdGUgPSBGT1VSVEhfUkFURSAqIEFMQ19ERUNJTUFMU0ZBQ1RPUjsKICAgICAgICB0b2tlblJld2FyZCA9IHRva2VuKEFMQ19DT05UUkFDVF9BRERSRVNTKTsKCQljb250cmlidXRvckNvdW50ID0gMDsKICAgIH0KCiAgICAvKioKICAgICAqIEZhbGxiYWNrIGZ1bmN0aW9uCiAgICAgKgogICAgICogVGhlIGZ1bmN0aW9uIHdpdGhvdXQgbmFtZSBpcyB0aGUgZGVmYXVsdCBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuZXZlciBhbnlvbmUgc2VuZHMgZnVuZHMgdG8gYSBjb250cmFjdAogICAgICovCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CgkJCiAgICAgICAgcmVxdWlyZSghY3Jvd2RzYWxlQ2xvc2VkKTsKICAgICAgICByZXF1aXJlKG5vdyA+PSBTVEFSVF9USU1FICYmIG5vdyA8IEVORF9USU1FKTsKICAgICAgICAKCQlwcm9jZXNzVHJhbnNhY3Rpb24obXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgIH0KCQoJLyoqCgkgKiBQcm9jZXNzIHRyYW5zYWN0aW9uCgkgKi8KCWZ1bmN0aW9uIHByb2Nlc3NUcmFuc2FjdGlvbihhZGRyZXNzIF9jb250cmlidXRvciwgdWludCBfYW1vdW50KSBpbnRlcm5hbHsJCgkJdWludCBjb250cmlidXRpb25FdGhBbW91bnQgPSBfYW1vdW50OwoJCQkKICAgICAgICBhbW91bnRSYWlzZWQgKz0gY29udHJpYnV0aW9uRXRoQW1vdW50OyAgICAgICAgICAgICAgICAgICAgLy8gYWRkIG5ld2x5IHJlY2VpdmVkIEVUSAoJCXJlbWFpbkFtb3VudCArPSBjb250cmlidXRpb25FdGhBbW91bnQ7CiAgICAgICAgCgkJLy8gY2FsY3VhbHRlIGV4Y2hhbmdlZCB0b2tlbiBiYXNlZCBvbiBleGNoYW5nZSByYXRlCiAgICAgICAgaWYgKG5vdyA+PSBTVEFSVF9USU1FICYmIG5vdyA8IFNFQ09ORF9USUVSX1NBTEVfU1RBUlRfVElNRSl7CgkJCWV4Y2hhbmdlVG9rZW5SYXRlID0gU1RBUlRfUkFURSAqIEFMQ19ERUNJTUFMU0ZBQ1RPUjsKICAgICAgICB9CiAgICAgICAgaWYgKG5vdyA+PSBTRUNPTkRfVElFUl9TQUxFX1NUQVJUX1RJTUUgJiYgbm93IDwgVEhJUkRfVElFUl9TQUxFX1NUQVJUX1RJTUUpewogICAgICAgICAgICBleGNoYW5nZVRva2VuUmF0ZSA9IFNFQ09ORF9USUVSX1JBVEUgKiBBTENfREVDSU1BTFNGQUNUT1I7CiAgICAgICAgfQogICAgICAgIGlmIChub3cgPj0gVEhJUkRfVElFUl9TQUxFX1NUQVJUX1RJTUUgJiYgbm93IDwgRk9VUlRIX1RJRVJfU0FMRV9TVEFSVF9USU1FKXsKICAgICAgICAgICAgZXhjaGFuZ2VUb2tlblJhdGUgPSBUSElSRF9USUVSX1JBVEUgKiBBTENfREVDSU1BTFNGQUNUT1I7CiAgICAgICAgfQogICAgICAgIGlmIChub3cgPj0gRk9VUlRIX1RJRVJfU0FMRV9TVEFSVF9USU1FICYmIG5vdyA8IEVORF9USU1FKXsKICAgICAgICAgICAgZXhjaGFuZ2VUb2tlblJhdGUgPSBGT1VSVEhfUkFURSAqIEFMQ19ERUNJTUFMU0ZBQ1RPUjsKICAgICAgICB9CiAgICAgICAgdWludCBhbW91bnRJcXRUb2tlbiA9IF9hbW91bnQgKiBleGNoYW5nZVRva2VuUmF0ZSAvIDEgZXRoZXI7CgkJCgkJaWYgKGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmlzQWN0aXZlID09IGZhbHNlKXsgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjb250cmlidXRvciBoYXMgYWxyZWFkeSBjb250cmlidXRlZAoJCQljb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS5pc0FjdGl2ZSA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBoaXMgYWN0aXZpdHkgdG8gdHJ1ZQoJCQljb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS5jb250cmlidXRpb25BbW91bnQgPSBjb250cmlidXRpb25FdGhBbW91bnQ7ICAgIC8vIFNldCBoaXMgY29udHJpYnV0aW9uCgkJCWNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLnRva2Vuc0Ftb3VudCA9IGFtb3VudElxdFRva2VuOwoJCQljb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS5pc1Rva2VuRGlzdHJpYnV0ZWQgPSBmYWxzZTsKCQkJY29udHJpYnV0b3JJbmRleGVzW25leHRDb250cmlidXRvckluZGV4XSA9IF9jb250cmlidXRvcjsgICAgICAgICAgICAgICAgICAvLyBTZXQgY29udHJpYnV0b3JzIGluZGV4CgkJCW5leHRDb250cmlidXRvckluZGV4Kys7CgkJCWNvbnRyaWJ1dG9yQ291bnQrKzsKCQl9CgkJZWxzZXsKCQkJY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0uY29udHJpYnV0aW9uQW1vdW50ICs9IGNvbnRyaWJ1dGlvbkV0aEFtb3VudDsgICAvLyBBZGQgY29udHJpYnV0aW9uIGFtb3VudCB0byBleGlzdGluZyBjb250cmlidXRvcgoJCQljb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS50b2tlbnNBbW91bnQgKz0gYW1vdW50SXF0VG9rZW47ICAgICAgICAgICAgIC8vIGxvZyB0b2tlbiBhbW91bnRgCgkJfQoJCQogICAgICAgIEZ1bmRUcmFuc2Zlcihtc2cuc2VuZGVyLCBjb250cmlidXRpb25FdGhBbW91bnQsIHRydWUpOwoJCQoJCWlmIChhbW91bnRSYWlzZWQgPj0gZnVuZGluZ0xpbWl0KXsKCQkJLy8gY2xvc2UgY3Jvd2RzYWxlIGJlY2F1c2UgdGhlIGNyb3dkc2FsZSBsaW1pdCBpcyByZWFjaGVkCgkJCWNyb3dkc2FsZUNsb3NlZCA9IHRydWU7CgkJfQkJCgkJCgl9CgogICAgbW9kaWZpZXIgYWZ0ZXJEZWFkbGluZSgpIHsgaWYgKG5vdyA+PSBkZWFkbGluZSkgXzsgfQkKCW1vZGlmaWVyIGFmdGVyQ3Jvd2RzYWxlQ2xvc2VkKCkgeyBpZiAoY3Jvd2RzYWxlQ2xvc2VkID09IHRydWUgfHwgbm93ID49IGRlYWRsaW5lKSBfOyB9CgkKCQoJLyoqCiAgICAgKiBjbG9zZSBDcm93ZHNhbGUKICAgICAqCiAgICAgKi8KCWZ1bmN0aW9uIGNsb3NlQ3Jvd2RTYWxlKCkgcHVibGljIHsKCQlyZXF1aXJlKGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpOwoJCWlmICggYmVuZWZpY2lhcnkgPT0gbXNnLnNlbmRlcikgewoJCQljcm93ZHNhbGVDbG9zZWQgPSB0cnVlOwoJCX0KCX0KCQogICAgLyoqCiAgICAgKiBDaGVjayB0b2tlbiBiYWxhbmNlCiAgICAgKgogICAgICovCglmdW5jdGlvbiBjaGVja1Rva2VuQmFsYW5jZSgpIHB1YmxpYyB7CgkJaWYgKCBiZW5lZmljaWFyeSA9PSBtc2cuc2VuZGVyKSB7CgkJCS8vY2hlY2sgY3VycmVudCB0b2tlbiBiYWxhbmNlCgkJCXRva2VuQmFsYW5jZSA9IHRva2VuUmV3YXJkLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKCQl9Cgl9CgkKICAgIC8qKgogICAgICogV2l0aGRyYXcgdGhlIGFsbCBmdW5kcwogICAgICoKICAgICAqIENoZWNrcyB0byBzZWUgaWYgZ29hbCBvciB0aW1lIGxpbWl0IGhhcyBiZWVuIHJlYWNoZWQsIGFuZCBpZiBzbywgYW5kIHRoZSBmdW5kaW5nIGdvYWwgd2FzIHJlYWNoZWQsCiAgICAgKiBzZW5kcyB0aGUgZW50aXJlIGFtb3VudCB0byB0aGUgYmVuZWZpY2lhcnkuIAogICAgICovCiAgICBmdW5jdGlvbiBzYWZlV2l0aGRyYXdhbEFsbCgpIHB1YmxpYyB7CiAgICAgICAgaWYgKCBiZW5lZmljaWFyeSA9PSBtc2cuc2VuZGVyKSB7CiAgICAgICAgICAgIGlmIChiZW5lZmljaWFyeS5zZW5kKGFtb3VudFJhaXNlZCkpIHsKICAgICAgICAgICAgICAgIEZ1bmRUcmFuc2ZlcihiZW5lZmljaWFyeSwgYW1vdW50UmFpc2VkLCBmYWxzZSk7CgkJCQlyZW1haW5BbW91bnQgPSByZW1haW5BbW91bnQgLSBhbW91bnRSYWlzZWQ7CiAgICAgICAgICAgIH0gZWxzZSB7CgkJCQlXaXRoZHJhd0ZhaWxlZChiZW5lZmljaWFyeSwgYW1vdW50UmFpc2VkLCBmYWxzZSk7CgkJCQkvL0lmIHdlIGZhaWwgdG8gc2VuZCB0aGUgZnVuZHMgdG8gYmVuZWZpY2lhcnkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCQoJLyoqCiAgICAgKiBXaXRoZHJhdyB0aGUgZnVuZHMKICAgICAqCiAgICAgKiBDaGVja3MgdG8gc2VlIGlmIGdvYWwgb3IgdGltZSBsaW1pdCBoYXMgYmVlbiByZWFjaGVkLCBhbmQgaWYgc28sIGFuZCB0aGUgZnVuZGluZyBnb2FsIHdhcyByZWFjaGVkLAogICAgICogc2VuZHMgdGhlIGVudGlyZSBhbW91bnQgdG8gdGhlIGJlbmVmaWNpYXJ5LiAKICAgICAqLwogICAgZnVuY3Rpb24gc2FmZVdpdGhkcmF3YWxBbW91bnQodWludDI1NiB3aXRoZHJhd0Ftb3VudCkgcHVibGljIHsKICAgICAgICBpZiAoYmVuZWZpY2lhcnkgPT0gbXNnLnNlbmRlcikgewogICAgICAgICAgICBpZiAoYmVuZWZpY2lhcnkuc2VuZCh3aXRoZHJhd0Ftb3VudCkpIHsKICAgICAgICAgICAgICAgIEZ1bmRUcmFuc2ZlcihiZW5lZmljaWFyeSwgd2l0aGRyYXdBbW91bnQsIGZhbHNlKTsKCQkJCXJlbWFpbkFtb3VudCA9IHJlbWFpbkFtb3VudCAtIHdpdGhkcmF3QW1vdW50OwogICAgICAgICAgICB9IGVsc2UgewoJCQkJV2l0aGRyYXdGYWlsZWQoYmVuZWZpY2lhcnksIHdpdGhkcmF3QW1vdW50LCBmYWxzZSk7CgkJCQkvL0lmIHdlIGZhaWwgdG8gc2VuZCB0aGUgZnVuZHMgdG8gYmVuZWZpY2lhcnkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCQoJLyoqCgkgKiBXaXRoZHJhdyBBTEMgCiAgICAgKiAKCSAqIElmIHRoZXJlIGFyZSBzb21lIHJlbWFpbmluZyBBTEMgaW4gdGhlIGNvbnRyYWN0IAoJICogYWZ0ZXIgYWxsIHRva2VuIGFyZSBkaXN0cmlidXRlZCB0aGUgY29udHJpYnV0b3IsCgkgKiB0aGUgYmVuZWZpY2lhcnkgY2FuIHdpdGhkcmF3IHRoZSBBTEMgaW4gdGhlIGNvbnRyYWN0CiAgICAgKgogICAgICovCiAgICBmdW5jdGlvbiB3aXRoZHJhd0FMQyh1aW50MjU2IHRva2VuQW1vdW50KSBwdWJsaWMgYWZ0ZXJDcm93ZHNhbGVDbG9zZWQgewoJCXJlcXVpcmUoYmVuZWZpY2lhcnkgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgaWYgKGlzQUxDRGlzdHJpYnV0ZWQgJiYgYmVuZWZpY2lhcnkgPT0gbXNnLnNlbmRlcikgewogICAgICAgICAgICB0b2tlblJld2FyZC50cmFuc2ZlcihiZW5lZmljaWFyeSwgdG9rZW5BbW91bnQpOwoJCQkvLyB1cGRhdGUgdG9rZW4gYmFsYW5jZQoJCQl0b2tlbkJhbGFuY2UgPSB0b2tlblJld2FyZC5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgfQogICAgfQoJCgoJLyoqCiAgICAgKiBEaXN0cmlidXRlIHRva2VuCiAgICAgKgogICAgICogQ2hlY2tzIHRvIHNlZSBpZiBnb2FsIG9yIHRpbWUgbGltaXQgaGFzIGJlZW4gcmVhY2hlZCwgYW5kIGlmIHNvLCBhbmQgdGhlIGZ1bmRpbmcgZ29hbCB3YXMgcmVhY2hlZCwKICAgICAqIGRpc3RyaWJ1dGUgdG9rZW4gdG8gY29udHJpYnV0b3IuIAogICAgICovCglmdW5jdGlvbiBkaXN0cmlidXRlQUxDVG9rZW4oKSBwdWJsaWMgewoJCWlmIChiZW5lZmljaWFyeSA9PSBtc2cuc2VuZGVyKSB7ICAvLyBvbmx5IEFMQ19GVU5EQVRJT05fQUREUkVTUyBjYW4gZGlzdHJpYnV0ZSB0aGUgQUxDCgkJCWFkZHJlc3MgY3VycmVudFBhcnRpY2lwYW50QWRkcmVzczsKCQkJZm9yICh1aW50IGluZGV4ID0gMDsgaW5kZXggPCBjb250cmlidXRvckNvdW50OyBpbmRleCsrKXsKCQkJCWN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MgPSBjb250cmlidXRvckluZGV4ZXNbaW5kZXhdOyAKCQkJCQoJCQkJdWludCBhbW91bnRBbGNUb2tlbiA9IGNvbnRyaWJ1dG9yTGlzdFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXS50b2tlbnNBbW91bnQ7CgkJCQlpZiAoZmFsc2UgPT0gY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLmlzVG9rZW5EaXN0cmlidXRlZCl7CgkJCQkJYm9vbCBpc1N1Y2Nlc3MgPSB0b2tlblJld2FyZC50cmFuc2ZlcihjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzLCBhbW91bnRBbGNUb2tlbik7CgkJCQkJaWYgKGlzU3VjY2Vzcyl7CgkJCQkJCWNvbnRyaWJ1dG9yTGlzdFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXS5pc1Rva2VuRGlzdHJpYnV0ZWQgPSB0cnVlOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJLy8gY2hlY2sgaWYgYWxsIEFMQyBhcmUgZGlzdHJpYnV0ZWQKCQkJY2hlY2tJZkFsbEFMQ0Rpc3RyaWJ1dGVkKCk7CgkJCS8vIGdldCBsYXRlc3QgdG9rZW4gYmFsYW5jZQoJCQl0b2tlbkJhbGFuY2UgPSB0b2tlblJld2FyZC5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSk7CgkJfQoJfQoJCgkvKioKICAgICAqIERpc3RyaWJ1dGUgdG9rZW4gYnkgYmF0Y2gKICAgICAqCiAgICAgKiBDaGVja3MgdG8gc2VlIGlmIGdvYWwgb3IgdGltZSBsaW1pdCBoYXMgYmVlbiByZWFjaGVkLCBhbmQgaWYgc28sIGFuZCB0aGUgZnVuZGluZyBnb2FsIHdhcyByZWFjaGVkLAogICAgICogZGlzdHJpYnV0ZSB0b2tlbiB0byBjb250cmlidXRvci4gCiAgICAgKi8KCWZ1bmN0aW9uIGRpc3RyaWJ1dGVBTENUb2tlbkJhdGNoKHVpbnQgYmF0Y2hVc2VyQ291bnQpIHB1YmxpYyB7CgkJaWYgKGJlbmVmaWNpYXJ5ID09IG1zZy5zZW5kZXIpIHsgIC8vIG9ubHkgQUxDX0ZVTkRBVElPTl9BRERSRVNTIGNhbiBkaXN0cmlidXRlIHRoZSBBTEMKCQkJYWRkcmVzcyBjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzOwoJCQl1aW50IHRyYW5zZmVyZWRVc2VyQ291bnQgPSAwOwoJCQlmb3IgKHVpbnQgaW5kZXggPSAwOyBpbmRleCA8IGNvbnRyaWJ1dG9yQ291bnQgJiYgdHJhbnNmZXJlZFVzZXJDb3VudDxiYXRjaFVzZXJDb3VudDsgaW5kZXgrKyl7CgkJCQljdXJyZW50UGFydGljaXBhbnRBZGRyZXNzID0gY29udHJpYnV0b3JJbmRleGVzW2luZGV4XTsgCgkJCQkKCQkJCXVpbnQgYW1vdW50QWxjVG9rZW4gPSBjb250cmlidXRvckxpc3RbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10udG9rZW5zQW1vdW50OwoJCQkJaWYgKGZhbHNlID09IGNvbnRyaWJ1dG9yTGlzdFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXS5pc1Rva2VuRGlzdHJpYnV0ZWQpewoJCQkJCWJvb2wgaXNTdWNjZXNzID0gdG9rZW5SZXdhcmQudHJhbnNmZXIoY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcywgYW1vdW50QWxjVG9rZW4pOwoJCQkJCXRyYW5zZmVyZWRVc2VyQ291bnQgPSB0cmFuc2ZlcmVkVXNlckNvdW50ICsgMTsKCQkJCQlpZiAoaXNTdWNjZXNzKXsKCQkJCQkJY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLmlzVG9rZW5EaXN0cmlidXRlZCA9IHRydWU7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCQoJCQkvLyBjaGVjayBpZiBhbGwgQUxDIGFyZSBkaXN0cmlidXRlZAoJCQljaGVja0lmQWxsQUxDRGlzdHJpYnV0ZWQoKTsKCQkJLy8gZ2V0IGxhdGVzdCB0b2tlbiBiYWxhbmNlCgkJCXRva2VuQmFsYW5jZSA9IHRva2VuUmV3YXJkLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKCQl9Cgl9CgkKCS8qKgoJICogQ2hlY2sgaWYgYWxsIGNvbnRyaWJ1dG9yJ3MgdG9rZW4gYXJlIHN1Y2Nlc3NmdWxseSBkaXN0cmlidXRlZAoJICovCglmdW5jdGlvbiBjaGVja0lmQWxsQUxDRGlzdHJpYnV0ZWQoKSBwdWJsaWMgewoJICAgIGFkZHJlc3MgY3VycmVudFBhcnRpY2lwYW50QWRkcmVzczsKCQlpc0FMQ0Rpc3RyaWJ1dGVkID0gdHJ1ZTsKCQlmb3IgKHVpbnQgaW5kZXggPSAwOyBpbmRleCA8IGNvbnRyaWJ1dG9yQ291bnQ7IGluZGV4KyspewoJCQkJY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcyA9IGNvbnRyaWJ1dG9ySW5kZXhlc1tpbmRleF07IAoJCQkJCgkJCWlmIChmYWxzZSA9PSBjb250cmlidXRvckxpc3RbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10uaXNUb2tlbkRpc3RyaWJ1dGVkKXsKCQkJCWlzQUxDRGlzdHJpYnV0ZWQgPSBmYWxzZTsKCQkJCWJyZWFrOwoJCQl9CgkJfQoJfQoJCn0='.
	

]
