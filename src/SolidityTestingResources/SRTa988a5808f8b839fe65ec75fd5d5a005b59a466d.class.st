Class {
	#name : #SRTa988a5808f8b839fe65ec75fd5d5a005b59a466d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa988a5808f8b839fe65ec75fd5d5a005b59a466d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCmNvbnRyYWN0IFBhdXNhYmxlVG9rZW4gaXMgT3duYWJsZSB7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGluY3JlYXNlRnJvemVuKGFkZHJlc3MgX293bmVyLHVpbnQyNTYgX2luY3JlbWVudGFsQW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWM7Cn0KCmNvbnRyYWN0IEFkZHJlc3NXaGl0ZWxpc3QgaXMgT3duYWJsZSB7CiAgICAvLyB0aGUgYWRkcmVzc2VzIHRoYXQgYXJlIGluY2x1ZGVkIGluIHRoZSB3aGl0ZWxpc3QKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgd2hpdGVsaXN0ZWQ7CiAgICAKICAgIGZ1bmN0aW9uIGlzV2hpdGVsaXN0ZWQoYWRkcmVzcyBhZGRyKSB2aWV3IHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHdoaXRlbGlzdGVkW2FkZHJdOwogICAgfQoKICAgIGV2ZW50IExvZ1doaXRlbGlzdEFkZChhZGRyZXNzIGluZGV4ZWQgYWRkcik7CgogICAgLy8gYWRkIHRoZXNlIGFkZHJlc3NlcyB0byB0aGUgd2hpdGVsaXN0CiAgICBmdW5jdGlvbiBhZGRUb1doaXRlbGlzdChhZGRyZXNzW10gYWRkcmVzc2VzKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBhZGRyZXNzZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKCF3aGl0ZWxpc3RlZFthZGRyZXNzZXNbaV1dKSB7CiAgICAgICAgICAgICAgICB3aGl0ZWxpc3RlZFthZGRyZXNzZXNbaV1dID0gdHJ1ZTsKICAgICAgICAgICAgICAgIExvZ1doaXRlbGlzdEFkZChhZGRyZXNzZXNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBldmVudCBMb2dXaGl0ZWxpc3RSZW1vdmUoYWRkcmVzcyBpbmRleGVkIGFkZHIpOwoKICAgIC8vIHJlbW92ZSB0aGVzZSBhZGRyZXNzZXMgZnJvbSB0aGUgd2hpdGVsaXN0CiAgICBmdW5jdGlvbiByZW1vdmVGcm9tV2hpdGVsaXN0KGFkZHJlc3NbXSBhZGRyZXNzZXMpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGFkZHJlc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAod2hpdGVsaXN0ZWRbYWRkcmVzc2VzW2ldXSkgewogICAgICAgICAgICAgICAgd2hpdGVsaXN0ZWRbYWRkcmVzc2VzW2ldXSA9IGZhbHNlOwogICAgICAgICAgICAgICAgTG9nV2hpdGVsaXN0UmVtb3ZlKGFkZHJlc3Nlc1tpXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9Cgpjb250cmFjdCBSdGNUb2tlbkNyb3dkc2FsZSBpcyBPd25hYmxlLCBBZGRyZXNzV2hpdGVsaXN0IHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgUGF1c2FibGVUb2tlbiAgcHVibGljIHRva2VuUmV3YXJkOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGRyZXNzIG9mIHRoZSB0b2tlbiB1c2VkIGFzIHJld2FyZAoKICAgIC8vIGRlcGxveW1lbnQgdmFyaWFibGVzIGZvciBzdGF0aWMgc3VwcGx5IHNhbGUKICAgIHVpbnQyNTYgcHVibGljIGluaXRpYWxTdXBwbHk7CiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNSZW1haW5pbmc7CiAgICB1aW50MjU2IHB1YmxpYyBkZWNpbWFsczsKCiAgICAvLyBtdWx0aS1zaWcgYWRkcmVzc2VzIGFuZCBwcmljZSB2YXJpYWJsZQogICAgYWRkcmVzcyBwdWJsaWMgYmVuZWZpY2lhcnlXYWxsZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVuZWZpY2lhcnlNdWx0aVNpZyAoZm91bmRlciBncm91cCkgb3Igd2FsbGV0IGFjY291bnQKICAgIHVpbnQyNTYgcHVibGljIHRva2Vuc1BlckV0aFByaWNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBpbml0aWFsIHZhbHVlIGZsb2F0aW5nIHByaWNlVmFyIDEwLDAwMCB0b2tlbnMgcGVyIEV0aAoKICAgIC8vIHVpbnQyNTYgdmFsdWVzIGZvciBtaW4sbWF4LGNhcHMsdHJhY2tpbmcKICAgIHVpbnQyNTYgcHVibGljIGFtb3VudFJhaXNlZEluV2VpOwogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ01pbkNhcEluV2VpOwoKICAgIC8vIHByaWNpbmcgdmVyaWFibGUKICAgIHVpbnQyNTYgcHVibGljIHAxX2R1cmF0aW9uOwogICAgdWludDI1NiBwdWJsaWMgcDFfc3RhcnQ7CiAgICB1aW50MjU2IHB1YmxpYyBwMl9zdGFydDsKICAgIHVpbnQyNTYgcHVibGljIHdoaXRlX2R1cmF0aW9uOwoKICAgIC8vIGxvb3AgY29udHJvbCwgSUNPIHN0YXJ0dXAgYW5kIGxpbWl0ZXJzCiAgICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nU3RhcnRUaW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyb3dkc2FsZSBzdGFydCB0aW1lIwogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ0VuZFRpbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjcm93ZHNhbGUgZW5kIHRpbWUjCiAgICBib29sICAgIHB1YmxpYyBpc0Nyb3dkU2FsZUNsb3NlZCAgICAgICAgICAgICAgID0gZmFsc2U7ICAgICAvLyBjcm93ZHNhbGUgY29tcGxldGlvbiBib29sZWFuCiAgICBib29sICAgIHB1YmxpYyBhcmVGdW5kc1JlbGVhc2VkVG9CZW5lZmljaWFyeSAgID0gZmFsc2U7ICAgICAvLyBib29sZWFuIGZvciBmb3VuZGVyIHRvIHJlY2VpdmUgRXRoIG9yIG5vdAogICAgYm9vbCAgICBwdWJsaWMgaXNDcm93ZFNhbGVTZXR1cCAgICAgICAgICAgICAgICA9IGZhbHNlOyAgICAgLy8gYm9vbGVhbiBmb3IgY3Jvd2RzYWxlIHNldHVwCgogICAgLy8gR2FzIHByaWNlIGxpbWl0CiAgICB1aW50MjU2IG1heEdhc1ByaWNlID0gNTAwMDAwMDAwMDA7CgogICAgZXZlbnQgQnV5KGFkZHJlc3MgaW5kZXhlZCBfc2VuZGVyLCB1aW50MjU2IF9ldGgsIHVpbnQyNTYgX1JUQyk7CiAgICBldmVudCBSZWZ1bmQoYWRkcmVzcyBpbmRleGVkIF9yZWZ1bmRlciwgdWludDI1NiBfdmFsdWUpOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGZ1bmRWYWx1ZTsKCgogICAgLy8gY29udmVydCB0b2tlbnMgdG8gZGVjaW1hbHMKICAgIGZ1bmN0aW9uIHRvU21hbGxydGModWludDI1NiBhbW91bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGFtb3VudC5tdWwoMTAqKmRlY2ltYWxzKTsKICAgIH0KCiAgICAvLyBjb252ZXJ0IHRva2VucyB0byB3aG9sZQogICAgZnVuY3Rpb24gdG9SdGModWludDI1NiBhbW91bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGFtb3VudC5kaXYoMTAqKmRlY2ltYWxzKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVNYXhHYXNQcmljZSh1aW50MjU2IF9uZXdHYXNQcmljZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfbmV3R2FzUHJpY2UgIT0gMCk7CiAgICAgICAgbWF4R2FzUHJpY2UgPSBfbmV3R2FzUHJpY2U7CiAgICB9CgogICAgLy8gc2V0dXAgdGhlIENyb3dkU2FsZSBwYXJhbWV0ZXJzCiAgICBmdW5jdGlvbiBzZXR1cENyb3dkc2FsZSh1aW50MjU2IF9mdW5kaW5nU3RhcnRUaW1lKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIGlmICgoIShpc0Nyb3dkU2FsZVNldHVwKSkKICAgICAgICAgICAgJiYgKCEoYmVuZWZpY2lhcnlXYWxsZXQgPiAwKSkpewogICAgICAgICAgICAvLyBpbml0IGFkZHJlc3NlcwogICAgICAgICAgICB0b2tlblJld2FyZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBQYXVzYWJsZVRva2VuKDB4ZGI3NUJGQzFhZDk4NGM1Q2VlZkE4RWM2Mzk0NTk2ZTIwZDc4OTAzNCk7CiAgICAgICAgICAgIGJlbmVmaWNpYXJ5V2FsbGV0ICAgICAgICAgICAgICAgICAgICAgICA9IDB4ZjA3YmQ2M0M1Y2Y0MDRjMmYxN2FiNEY5RkExZTEzZkNDRWJjNTI1NTsKICAgICAgICAgICAgdG9rZW5zUGVyRXRoUHJpY2UgICAgICAgICAgICAgICAgICAgICAgID0gMTAwMDA7ICAgICAgICAgICAgICAgICAgLy8gMSBFVEggPSAxMCwwMDAgUlRDCgogICAgICAgICAgICAvLyBmdW5kaW5nIHRhcmdldHMKICAgICAgICAgICAgZnVuZGluZ01pbkNhcEluV2VpICAgICAgICAgICAgICAgICAgICAgID0gMzUwIGV0aGVyOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8zNTAgRXRoIChtaW4gY2FwKSAodGVzdCA9IDE1KSAtIGNyb3dkc2FsZSBpcyBjb25zaWRlcmVkIHN1Y2Nlc3MgYWZ0ZXIgdGhpcyB2YWx1ZQoKICAgICAgICAgICAgLy8gdXBkYXRlIHZhbHVlcwogICAgICAgICAgICBkZWNpbWFscyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAxODsKICAgICAgICAgICAgYW1vdW50UmFpc2VkSW5XZWkgICAgICAgICAgICAgICAgICAgICAgID0gMDsKICAgICAgICAgICAgaW5pdGlhbFN1cHBseSAgICAgICAgICAgICAgICAgICAgICAgICAgID0gdG9TbWFsbHJ0YygzNTAwMDAwMCk7ICAgICAgICAgICAgICAgICAgLy8gICAzNSBtaWxsaW9uICogMTggZGVjaW1hbAogICAgICAgICAgICB0b2tlbnNSZW1haW5pbmcgICAgICAgICAgICAgICAgICAgICAgICAgPSBpbml0aWFsU3VwcGx5OwoKICAgICAgICAgICAgZnVuZGluZ1N0YXJ0VGltZSAgICAgICAgICAgICAgICAgICAgICAgID0gX2Z1bmRpbmdTdGFydFRpbWU7CgogICAgICAgICAgICB3aGl0ZV9kdXJhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgPSAyIHdlZWtzOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIgd2VlayAodGVzdCA9IDIgaG91cikKICAgICAgICAgICAgcDFfZHVyYXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gNCB3ZWVrczsgICAgICAgICAgICAgICAgICAgICAgIC8vIDQgd2VlayAodGVzdCA9IDIgaG91cikKCiAgICAgICAgICAgIHAxX3N0YXJ0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGZ1bmRpbmdTdGFydFRpbWUgKyB3aGl0ZV9kdXJhdGlvbjsKICAgICAgICAgICAgcDJfc3RhcnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gcDFfc3RhcnQgKyBwMV9kdXJhdGlvbiArIDQgd2Vla3M7ICAgLy8gKyA0IHdlZWsgYWZ0ZXIgcDEgZW5kcyAodGVzdCA9IDQgaG91cikKCiAgICAgICAgICAgIGZ1bmRpbmdFbmRUaW1lICAgICAgICAgICAgICAgICAgICAgICAgICA9IHAyX3N0YXJ0ICsgNCB3ZWVrczsgLy8gKyA0IHdlZWsgKHRlc3QgPSA0IGhvdXIpCgogICAgICAgICAgICAvLyBjb25maWd1cmUgY3Jvd2RzYWxlCiAgICAgICAgICAgIGlzQ3Jvd2RTYWxlU2V0dXAgICAgICAgICAgICAgICAgICAgICAgICA9IHRydWU7CiAgICAgICAgICAgIGlzQ3Jvd2RTYWxlQ2xvc2VkICAgICAgICAgICAgICAgICAgICAgICA9IGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRCb251c1ByaWNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYm9udXMpIHsKICAgICAgICByZXF1aXJlKGlzQ3Jvd2RTYWxlU2V0dXApOwogICAgICAgIHJlcXVpcmUocDFfc3RhcnQgKyBwMV9kdXJhdGlvbiA8PSBwMl9zdGFydCk7CiAgICAgICAgaWYgKG5vdyA+PSBmdW5kaW5nU3RhcnRUaW1lICYmIG5vdyA8PSBwMV9zdGFydCkgeyAvLyBQcml2YXRlIHNhbGUgQm9udXMgNDAlID0gNCwwMDAgUlRDICA9IDEgRVRICiAgICAgICAgICAgIGJvbnVzID0gNDAwMDsKICAgICAgICB9IGVsc2UgaWYgKG5vdyA+IHAxX3N0YXJ0ICYmIG5vdyA8PSBwMV9zdGFydCArIHAxX2R1cmF0aW9uKSB7IC8vIFBoYXNlLTEgQm9udXMgMzAlID0gMywwMDAgUlRDICA9IDEgRVRICiAgICAgICAgICAgIGJvbnVzID0gMzAwMDsKICAgICAgICB9IGVsc2UgaWYgKG5vdyA+IHAyX3N0YXJ0ICYmIG5vdyA8PSBwMl9zdGFydCArIDEgZGF5cyApIHsgLy8gUGhhc2UtMiAxc3QgZGF5IEJvbnVzIDI1JSA9IDIsNTAwIFJUQyA9IDEgRVRICiAgICAgICAgICAgIGJvbnVzID0gMjUwMDsKICAgICAgICB9IGVsc2UgaWYgKG5vdyA+IHAyX3N0YXJ0ICsgMSBkYXlzICYmIG5vdyA8PSBwMl9zdGFydCArIDEgd2Vla3MgKSB7IC8vIFBoYXNlLTIgd2Vlay0xIEJvbnVzIDIwJSA9IDIsMDAwIFJUQyA9IDEgRVRICiAgICAgICAgICAgIGJvbnVzID0gMjAwMDsKICAgICAgICB9IGVsc2UgaWYgKG5vdyA+IHAyX3N0YXJ0ICsgMSB3ZWVrcyAmJiBub3cgPD0gcDJfc3RhcnQgKyAyIHdlZWtzICkgeyAvLyBQaGFzZS0yIHdlZWstMiBCb251cyArMTUlID0gMSw1MDAgUlRDID0gMSBFVEgKICAgICAgICAgICAgYm9udXMgPSAxNTAwOwogICAgICAgIH0gZWxzZSBpZiAobm93ID4gcDJfc3RhcnQgKyAyIHdlZWtzICYmIG5vdyA8PSBwMl9zdGFydCArIDMgd2Vla3MgKSB7IC8vIFBoYXNlLTIgd2Vlay0zIEJvbnVzICsxMCUgPSAxLDAwMCBSVEMgPSAxIEVUSAogICAgICAgICAgICBib251cyA9IDEwMDA7CiAgICAgICAgfSBlbHNlIGlmIChub3cgPiBwMl9zdGFydCArIDMgd2Vla3MgJiYgbm93IDw9IGZ1bmRpbmdFbmRUaW1lICkgeyAvLyBQaGFzZS0yIGZpbmFsIHdlZWsgQm9udXMgNSUgPSA1MDAgUlRDID0gMSBFVEgKICAgICAgICAgICAgYm9udXMgPSA1MDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIHAxX2R1cmF0aW9uIGNvbnN0YW50LiBPbmx5IHAyIHN0YXJ0IGNoYW5nZXMuIHAyIHN0YXJ0IGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gMSBtb250aCBmcm9tIHAxIGVuZAogICAgZnVuY3Rpb24gdXBkYXRlRHVyYXRpb24odWludDI1NiBfbmV3UDJTdGFydCkgZXh0ZXJuYWwgb25seU93bmVyIHsgLy8gZnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBkdXJhdGlvbiBvZiBwaGFzZS0xIGFuZCBhZGp1c3QgdGhlIHN0YXJ0IHRpbWUgb2YgcGhhc2UtMgogICAgICAgIHJlcXVpcmUoaXNDcm93ZFNhbGVTZXR1cAogICAgICAgICAgICAmJiAhKHAyX3N0YXJ0ID09IF9uZXdQMlN0YXJ0KQogICAgICAgICAgICAmJiAhKF9uZXdQMlN0YXJ0ID4gcDFfc3RhcnQgKyBwMV9kdXJhdGlvbiArIDMwIGRheXMpCiAgICAgICAgICAgICYmIChub3cgPCBwMl9zdGFydCkKICAgICAgICAgICAgJiYgKGZ1bmRpbmdTdGFydFRpbWUgKyBwMV9kdXJhdGlvbiA8IF9uZXdQMlN0YXJ0KSk7CiAgICAgICAgcDJfc3RhcnQgPSBfbmV3UDJTdGFydDsKICAgICAgICBmdW5kaW5nRW5kVGltZSA9IHAyX3N0YXJ0LmFkZCg0IHdlZWtzKTsgICAvLyA0IHdlZWsKICAgIH0KCiAgICAvLyBkZWZhdWx0IHBheWFibGUgZnVuY3Rpb24gd2hlbiBzZW5kaW5nIGV0aGVyIHRvIHRoaXMgY29udHJhY3QKICAgIGZ1bmN0aW9uICgpIGV4dGVybmFsIHBheWFibGUgewogICAgICAgIHJlcXVpcmUodHguZ2FzcHJpY2UgPD0gbWF4R2FzUHJpY2UpOwogICAgICAgIHJlcXVpcmUobXNnLmRhdGEubGVuZ3RoID09IDApOwogICAgICAgIAogICAgICAgIEJ1eVJUQ3Rva2VucygpOwogICAgfQoKICAgIGZ1bmN0aW9uIEJ1eVJUQ3Rva2VucygpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICAvLyBjb25kaXRpb25zIChsZW5ndGgsIGNyb3dkc2FsZSBzZXR1cCwgemVybyBjaGVjaywgZXhjZWVkIGZ1bmRpbmcgY29udHJpYiBjaGVjaywgY29udHJhY3QgdmFsaWQgY2hlY2ssIHdpdGhpbiBmdW5kaW5nIGJsb2NrIHJhbmdlIGNoZWNrLCBiYWxhbmNlIG92ZXJmbG93IGNoZWNrIGV0YykKICAgICAgICByZXF1aXJlKCEobXNnLnZhbHVlID09IDApCiAgICAgICAgJiYgKGlzQ3Jvd2RTYWxlU2V0dXApCiAgICAgICAgJiYgKG5vdyA+PSBmdW5kaW5nU3RhcnRUaW1lKQogICAgICAgICYmIChub3cgPD0gZnVuZGluZ0VuZFRpbWUpCiAgICAgICAgJiYgKHRva2Vuc1JlbWFpbmluZyA+IDApKTsKCiAgICAgICAgLy8gb25seSB3aGl0ZWxpc3RlZCBhZGRyZXNzZXMgYXJlIGFsbG93ZWQgZHVyaW5nIHRoZSBmaXJzdCBkYXkgb2YgcGhhc2UgMQogICAgICAgIGlmIChub3cgPD0gcDFfc3RhcnQpIHsKICAgICAgICAgICAgYXNzZXJ0KGlzV2hpdGVsaXN0ZWQobXNnLnNlbmRlcikpOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IHJld2FyZFRyYW5zZmVyQW1vdW50ICAgICAgICA9IDA7CiAgICAgICAgdWludDI1NiByZXdhcmRCYXNlVHJhbnNmZXJBbW91bnQgICAgPSAwOwogICAgICAgIHVpbnQyNTYgcmV3YXJkQm9udXNUcmFuc2ZlckFtb3VudCAgID0gMDsKICAgICAgICB1aW50MjU2IGNvbnRyaWJ1dGlvbkluV2VpICAgICAgICAgICA9IG1zZy52YWx1ZTsKICAgICAgICB1aW50MjU2IHJlZnVuZEluV2VpICAgICAgICAgICAgICAgICA9IDA7CgogICAgICAgIHJld2FyZEJvbnVzVHJhbnNmZXJBbW91bnQgICAgICAgPSBzZXRCb251c1ByaWNlKCk7CiAgICAgICAgcmV3YXJkQmFzZVRyYW5zZmVyQW1vdW50ICAgICAgICA9IChtc2cudmFsdWUubXVsKHRva2Vuc1BlckV0aFByaWNlKSk7IC8vIFNpbmNlIGJvdGggZXRoZXIgYW5kIFJUQyBoYXZlIDE4IGRlY2ltYWxzLCBObyBuZWVkIG9mIGNvbnZlcnNpb24KICAgICAgICByZXdhcmRCb251c1RyYW5zZmVyQW1vdW50ICAgICAgID0gKG1zZy52YWx1ZS5tdWwocmV3YXJkQm9udXNUcmFuc2ZlckFtb3VudCkpOyAvLyBTaW5jZSBib3RoIGV0aGVyIGFuZCBSVEMgaGF2ZSAxOCBkZWNpbWFscywgTm8gbmVlZCBvZiBjb252ZXJzaW9uCiAgICAgICAgcmV3YXJkVHJhbnNmZXJBbW91bnQgICAgICAgICAgICA9IHJld2FyZEJhc2VUcmFuc2ZlckFtb3VudC5hZGQocmV3YXJkQm9udXNUcmFuc2ZlckFtb3VudCk7CgogICAgICAgIGlmIChyZXdhcmRUcmFuc2ZlckFtb3VudCA+IHRva2Vuc1JlbWFpbmluZykgewogICAgICAgICAgICB1aW50MjU2IHBhcnRpYWxQZXJjZW50YWdlOwogICAgICAgICAgICBwYXJ0aWFsUGVyY2VudGFnZSA9IHRva2Vuc1JlbWFpbmluZy5tdWwoMTAqKjE4KS5kaXYocmV3YXJkVHJhbnNmZXJBbW91bnQpOwogICAgICAgICAgICBjb250cmlidXRpb25JbldlaSA9IGNvbnRyaWJ1dGlvbkluV2VpLm11bChwYXJ0aWFsUGVyY2VudGFnZSkuZGl2KDEwKioxOCk7CiAgICAgICAgICAgIHJld2FyZEJvbnVzVHJhbnNmZXJBbW91bnQgPSByZXdhcmRCb251c1RyYW5zZmVyQW1vdW50Lm11bChwYXJ0aWFsUGVyY2VudGFnZSkuZGl2KDEwKioxOCk7CiAgICAgICAgICAgIHJld2FyZFRyYW5zZmVyQW1vdW50ID0gdG9rZW5zUmVtYWluaW5nOwogICAgICAgICAgICByZWZ1bmRJbldlaSA9IG1zZy52YWx1ZS5zdWIoY29udHJpYnV0aW9uSW5XZWkpOwogICAgICAgIH0KCiAgICAgICAgYW1vdW50UmFpc2VkSW5XZWkgICAgICAgICAgICAgICA9IGFtb3VudFJhaXNlZEluV2VpLmFkZChjb250cmlidXRpb25JbldlaSk7CiAgICAgICAgdG9rZW5zUmVtYWluaW5nICAgICAgICAgICAgICAgICA9IHRva2Vuc1JlbWFpbmluZy5zdWIocmV3YXJkVHJhbnNmZXJBbW91bnQpOyAgLy8gd2lsbCBjYXVzZSB0aHJvdyBpZiBhdHRlbXB0IHRvIHB1cmNoYXNlIG92ZXIgdGhlIHRva2VuIGxpbWl0IGluIG9uZSB0eCBvciBhdCBhbGwgb25jZSBsaW1pdCByZWFjaGVkCiAgICAgICAgZnVuZFZhbHVlW21zZy5zZW5kZXJdICAgICAgICAgICA9IGZ1bmRWYWx1ZVttc2cuc2VuZGVyXS5hZGQoY29udHJpYnV0aW9uSW5XZWkpOwogICAgICAgIGFzc2VydCh0b2tlblJld2FyZC5pbmNyZWFzZUZyb3plbihtc2cuc2VuZGVyLCByZXdhcmRCb251c1RyYW5zZmVyQW1vdW50KSk7CiAgICAgICAgdG9rZW5SZXdhcmQudHJhbnNmZXIobXNnLnNlbmRlciwgcmV3YXJkVHJhbnNmZXJBbW91bnQpOwogICAgICAgIEJ1eShtc2cuc2VuZGVyLCBjb250cmlidXRpb25JbldlaSwgcmV3YXJkVHJhbnNmZXJBbW91bnQpOwogICAgICAgIGlmIChyZWZ1bmRJbldlaSA+IDApIHsKICAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihyZWZ1bmRJbldlaSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJlbmVmaWNpYXJ5TXVsdGlTaWdXaXRoZHJhdygpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgY2hlY2tHb2FsUmVhY2hlZCgpOwogICAgICAgIHJlcXVpcmUoYXJlRnVuZHNSZWxlYXNlZFRvQmVuZWZpY2lhcnkgJiYgKGFtb3VudFJhaXNlZEluV2VpID49IGZ1bmRpbmdNaW5DYXBJbldlaSkpOwogICAgICAgIGJlbmVmaWNpYXJ5V2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tHb2FsUmVhY2hlZCgpIHB1YmxpYyByZXR1cm5zIChieXRlczMyIHJlc3BvbnNlKSB7IC8vIHJldHVybiBjcm93ZGZ1bmQgc3RhdHVzIHRvIG93bmVyIGZvciBlYWNoIHJlc3VsdCBjYXNlLCB1cGRhdGUgcHVibGljIGNvbnN0YW50CiAgICAgICAgLy8gdXBkYXRlIHN0YXRlICYgc3RhdHVzIHZhcmlhYmxlcwogICAgICAgIHJlcXVpcmUgKGlzQ3Jvd2RTYWxlU2V0dXApOwogICAgICAgIGlmICgoYW1vdW50UmFpc2VkSW5XZWkgPCBmdW5kaW5nTWluQ2FwSW5XZWkpICYmIChibG9jay50aW1lc3RhbXAgPD0gZnVuZGluZ0VuZFRpbWUgJiYgYmxvY2sudGltZXN0YW1wID49IGZ1bmRpbmdTdGFydFRpbWUpKSB7IC8vIElDTyBpbiBwcm9ncmVzcywgdW5kZXIgc29mdGNhcAogICAgICAgICAgICBhcmVGdW5kc1JlbGVhc2VkVG9CZW5lZmljaWFyeSA9IGZhbHNlOwogICAgICAgICAgICBpc0Nyb3dkU2FsZUNsb3NlZCA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm4gIkluIHByb2dyZXNzIChFdGggPCBTb2Z0Y2FwKSI7CiAgICAgICAgfSBlbHNlIGlmICgoYW1vdW50UmFpc2VkSW5XZWkgPCBmdW5kaW5nTWluQ2FwSW5XZWkpICYmIChibG9jay50aW1lc3RhbXAgPCBmdW5kaW5nU3RhcnRUaW1lKSkgeyAvLyBJQ08gaGFzIG5vdCBzdGFydGVkCiAgICAgICAgICAgIGFyZUZ1bmRzUmVsZWFzZWRUb0JlbmVmaWNpYXJ5ID0gZmFsc2U7CiAgICAgICAgICAgIGlzQ3Jvd2RTYWxlQ2xvc2VkID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybiAiQ3Jvd2RzYWxlIGlzIHNldHVwIjsKICAgICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWRJbldlaSA8IGZ1bmRpbmdNaW5DYXBJbldlaSkgJiYgKGJsb2NrLnRpbWVzdGFtcCA+IGZ1bmRpbmdFbmRUaW1lKSkgeyAvLyBJQ08gZW5kZWQsIHVuZGVyIHNvZnRjYXAKICAgICAgICAgICAgYXJlRnVuZHNSZWxlYXNlZFRvQmVuZWZpY2lhcnkgPSBmYWxzZTsKICAgICAgICAgICAgaXNDcm93ZFNhbGVDbG9zZWQgPSB0cnVlOwogICAgICAgICAgICByZXR1cm4gIlVuc3VjY2Vzc2Z1bCAoRXRoIDwgU29mdGNhcCkiOwogICAgICAgIH0gZWxzZSBpZiAoKGFtb3VudFJhaXNlZEluV2VpID49IGZ1bmRpbmdNaW5DYXBJbldlaSkgJiYgKHRva2Vuc1JlbWFpbmluZyA9PSAwKSkgeyAvLyBJQ08gZW5kZWQsIGFsbCB0b2tlbnMgZ29uZQogICAgICAgICAgICBhcmVGdW5kc1JlbGVhc2VkVG9CZW5lZmljaWFyeSA9IHRydWU7CiAgICAgICAgICAgIGlzQ3Jvd2RTYWxlQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgICAgcmV0dXJuICJTdWNjZXNzZnVsIChSVEMgPj0gSGFyZGNhcCkhIjsKICAgICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWRJbldlaSA+PSBmdW5kaW5nTWluQ2FwSW5XZWkpICYmIChibG9jay50aW1lc3RhbXAgPiBmdW5kaW5nRW5kVGltZSkgJiYgKHRva2Vuc1JlbWFpbmluZyA+IDApKSB7IC8vIElDTyBlbmRlZCwgb3ZlciBzb2Z0Y2FwIQogICAgICAgICAgICBhcmVGdW5kc1JlbGVhc2VkVG9CZW5lZmljaWFyeSA9IHRydWU7CiAgICAgICAgICAgIGlzQ3Jvd2RTYWxlQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgICAgcmV0dXJuICJTdWNjZXNzZnVsIChFdGggPj0gU29mdGNhcCkhIjsKICAgICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWRJbldlaSA+PSBmdW5kaW5nTWluQ2FwSW5XZWkpICYmICh0b2tlbnNSZW1haW5pbmcgPiAwKSAmJiAoYmxvY2sudGltZXN0YW1wIDw9IGZ1bmRpbmdFbmRUaW1lKSkgeyAvLyBJQ08gaW4gcHJvZ3Jlc3MsIG92ZXIgc29mdGNhcCEKICAgICAgICAgICAgYXJlRnVuZHNSZWxlYXNlZFRvQmVuZWZpY2lhcnkgPSB0cnVlOwogICAgICAgICAgICBpc0Nyb3dkU2FsZUNsb3NlZCA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm4gIkluIHByb2dyZXNzIChFdGggPj0gU29mdGNhcCkhIjsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kKCkgZXh0ZXJuYWwgeyAvLyBhbnkgY29udHJpYnV0b3IgY2FuIGNhbGwgdGhpcyB0byBoYXZlIHRoZWlyIEV0aCByZXR1cm5lZC4gdXNlcidzIHB1cmNoYXNlZCBSVEMgdG9rZW5zIGFyZSBidXJuZWQgcHJpb3IgcmVmdW5kIG9mIEV0aC4KICAgICAgICBjaGVja0dvYWxSZWFjaGVkKCk7CiAgICAgICAgLy9yZXF1aXJlIG1pbkNhcCBub3QgcmVhY2hlZAogICAgICAgIHJlcXVpcmUgKChhbW91bnRSYWlzZWRJbldlaSA8IGZ1bmRpbmdNaW5DYXBJbldlaSkKICAgICAgICAmJiAoaXNDcm93ZFNhbGVDbG9zZWQpCiAgICAgICAgJiYgKG5vdyA+IGZ1bmRpbmdFbmRUaW1lKQogICAgICAgICYmIChmdW5kVmFsdWVbbXNnLnNlbmRlcl0gPiAwKSk7CgogICAgICAgIC8vcmVmdW5kIEV0aCBzZW50CiAgICAgICAgdWludDI1NiBldGhSZWZ1bmQgPSBmdW5kVmFsdWVbbXNnLnNlbmRlcl07CiAgICAgICAgZnVuZFZhbHVlW21zZy5zZW5kZXJdID0gMDsKCiAgICAgICAgLy9zZW5kIEV0aCBiYWNrLCBidXJuIHRva2VucwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZXRoUmVmdW5kKTsKICAgICAgICBSZWZ1bmQobXNnLnNlbmRlciwgZXRoUmVmdW5kKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJuUmVtYWluaW5nVG9rZW5zKCkgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKG5vdyA+IGZ1bmRpbmdFbmRUaW1lKTsKICAgICAgICB1aW50MjU2IHRva2Vuc1RvQnVybiA9IHRva2VuUmV3YXJkLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICB0b2tlblJld2FyZC5idXJuKHRva2Vuc1RvQnVybik7CiAgICB9Cn0KCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0='.
	

]
