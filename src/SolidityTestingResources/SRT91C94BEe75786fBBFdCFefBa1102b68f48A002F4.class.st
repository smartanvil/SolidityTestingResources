Class {
	#name : #SRT91C94BEe75786fBBFdCFefBa1102b68f48A002F4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT91C94BEe75786fBBFdCFefBa1102b68f48A002F4 >> base64 [
	^ 'bGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IE93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogICAgZnVuY3Rpb24gT3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX25ld093bmVyICE9IG93bmVyKTsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lcik7CiAgICAgICAgT3duZXJVcGRhdGUob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIG5ld093bmVyID0gMHgwOwogICAgfQoKICAgIGV2ZW50IE93bmVyVXBkYXRlKGFkZHJlc3MgX3ByZXZPd25lciwgYWRkcmVzcyBfbmV3T3duZXIpOwp9Cgpjb250cmFjdCBMb2NrYWJsZSBpcyBPd25lZHsKCiAgdWludDI1NiBwdWJsaWMgbG9ja2VkVW50aWxCbG9jazsKCiAgZXZlbnQgQ29udHJhY3RMb2NrZWQodWludDI1NiBfdW50aWxCbG9jaywgc3RyaW5nIF9yZWFzb24pOwoKICBtb2RpZmllciBsb2NrQWZmZWN0ZWQgewogICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+IGxvY2tlZFVudGlsQmxvY2spOwogICAgICBfOwogIH0KCiAgZnVuY3Rpb24gbG9ja0Zyb21TZWxmKHVpbnQyNTYgX3VudGlsQmxvY2ssIHN0cmluZyBfcmVhc29uKSBpbnRlcm5hbCB7CiAgICBsb2NrZWRVbnRpbEJsb2NrID0gX3VudGlsQmxvY2s7CiAgICBDb250cmFjdExvY2tlZChfdW50aWxCbG9jaywgX3JlYXNvbik7CiAgfQoKCiAgZnVuY3Rpb24gbG9ja1VudGlsKHVpbnQyNTYgX3VudGlsQmxvY2ssIHN0cmluZyBfcmVhc29uKSBvbmx5T3duZXIgewogICAgbG9ja2VkVW50aWxCbG9jayA9IF91bnRpbEJsb2NrOwogICAgQ29udHJhY3RMb2NrZWQoX3VudGlsQmxvY2ssIF9yZWFzb24pOwogIH0KfQoKY29udHJhY3QgUmVlbnRyYW5jeUhhbmRsaW5nQ29udHJhY3R7CgogICAgYm9vbCBsb2NrZWQ7CgogICAgbW9kaWZpZXIgbm9SZWVudHJhbmN5KCkgewogICAgICAgIHJlcXVpcmUoIWxvY2tlZCk7CiAgICAgICAgbG9ja2VkID0gdHJ1ZTsKICAgICAgICBfOwogICAgICAgIGxvY2tlZCA9IGZhbHNlOwogICAgfQp9CmNvbnRyYWN0IElNaW50YWJsZVRva2VuIHsKICBmdW5jdGlvbiBtaW50VG9rZW5zKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpe30KfQpjb250cmFjdCBJRVJDMjBUb2tlbiB7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRvdGFsU3VwcGx5KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkge30KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHt9CgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9CmNvbnRyYWN0IEl0b2tlblJlY2lwaWVudCB7CiAgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90b2tlbiwgYnl0ZXMgX2V4dHJhRGF0YSk7Cn0KY29udHJhY3QgSVRva2VuIHsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpOwogIGZ1bmN0aW9uIG1pbnRUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkge30KfQoKCgoKCgpjb250cmFjdCBDcm93ZHNhbGUgaXMgUmVlbnRyYW5jeUhhbmRsaW5nQ29udHJhY3QsIE93bmVkewoKICBzdHJ1Y3QgQ29udHJpYnV0b3JEYXRhewogICAgdWludCBjb250cmlidXRpb25BbW91bnQ7CiAgICB1aW50IHRva2Vuc0lzc3VlZDsKICB9CgogIG1hcHBpbmcoYWRkcmVzcyA9PiBDb250cmlidXRvckRhdGEpIHB1YmxpYyBjb250cmlidXRvckxpc3Q7CiAgdWludCBuZXh0Q29udHJpYnV0b3JJbmRleDsKICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgY29udHJpYnV0b3JJbmRleGVzOwoKICBzdGF0ZSBwdWJsaWMgY3Jvd2RzYWxlU3RhdGUgPSBzdGF0ZS5wZW5kaW5nU3RhcnQ7CiAgZW51bSBzdGF0ZSB7IHBlbmRpbmdTdGFydCwgY3Jvd2RzYWxlLCBjcm93ZHNhbGVFbmRlZCB9CgogIHVpbnQgcHVibGljIGNyb3dkc2FsZVN0YXJ0QmxvY2s7CiAgdWludCBwdWJsaWMgY3Jvd2RzYWxlRW5kZWRCbG9jazsKCiAgZXZlbnQgQ3Jvd2RzYWxlU3RhcnRlZCh1aW50IGJsb2NrTnVtYmVyKTsKICBldmVudCBDcm93ZHNhbGVFbmRlZCh1aW50IGJsb2NrTnVtYmVyKTsKICBldmVudCBFcnJvclNlbmRpbmdFVEgoYWRkcmVzcyB0bywgdWludCBhbW91bnQpOwogIGV2ZW50IE1pbkNhcFJlYWNoZWQodWludCBibG9ja051bWJlcik7CiAgZXZlbnQgTWF4Q2FwUmVhY2hlZCh1aW50IGJsb2NrTnVtYmVyKTsKCiAgYWRkcmVzcyB0b2tlbkFkZHJlc3MgPSAweDA7CiAgdWludCBkZWNpbWFscyA9IDE4OwoKICB1aW50IGV0aFRvVG9rZW5Db252ZXJzaW9uOwoKICB1aW50IHB1YmxpYyBtaW5DYXA7CiAgdWludCBwdWJsaWMgbWF4Q2FwOwogIHVpbnQgcHVibGljIGV0aFJhaXNlZDsKICB1aW50IHB1YmxpYyB0b2tlblRvdGFsU3VwcGx5ID0gMjAwMDAwMDAwICogMTAqKmRlY2ltYWxzOwoKICBhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZ0FkZHJlc3M7CiAgdWludCBibG9ja3NJbkFEYXk7CgogIHVpbnQgbmV4dENvbnRyaWJ1dG9yVG9DbGFpbTsKICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgaGFzQ2xhaW1lZEV0aFdoZW5GYWlsOwoKICB1aW50IGNyb3dkc2FsZVRva2VuQ2FwID0gICAgICAgICAgMTIwMDAwMDAwICogMTAqKmRlY2ltYWxzOwogIHVpbnQgZm91bmRlcnNBbmRUZWFtVG9rZW5zID0gICAgICAgMzIwMDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgdWludCBhZHZpc29yQW5kQW1iYXNzYWRvclRva2VucyA9ICAxNjAwMDAwMCAqIDEwKipkZWNpbWFsczsKICB1aW50IGludmVzdG9yVG9rZW5zID0gICAgICAgICAgICAgICA4MDAwMDAwICogMTAqKmRlY2ltYWxzOwogIHVpbnQgdmliZXJhdGVDb250cmlidXRvclRva2VucyA9ICAgMTAwMDAwMDAgKiAxMCoqZGVjaW1hbHM7CiAgdWludCBmdXR1cmVQYXJ0bmVyVG9rZW5zID0gICAgICAgICAxNDAwMDAwMCAqIDEwKipkZWNpbWFsczsKICBib29sIGZvdW5kZXJzQW5kVGVhbVRva2Vuc0NsYWltZWQgPSBmYWxzZTsKICBib29sIGFkdmlzb3JBbmRBbWJhc3NhZG9yVG9rZW5zQ2xhaW1lZCA9IGZhbHNlOwogIGJvb2wgaW52ZXN0b3JUb2tlbnNDbGFpbWVkID0gZmFsc2U7CiAgYm9vbCB2aWJlcmF0ZUNvbnRyaWJ1dG9yVG9rZW5zQ2xhaW1lZCA9IGZhbHNlOwogIGJvb2wgZnV0dXJlUGFydG5lclRva2Vuc0NsYWltZWQgPSBmYWxzZTsKCiAgLy8KICAvLyBVbm5hbWVkIGZ1bmN0aW9uIHRoYXQgcnVucyB3aGVuIGV0aCBpcyBzZW50IHRvIHRoZSBjb250cmFjdAogIC8vCiAgZnVuY3Rpb24oKSBub1JlZW50cmFuY3kgcGF5YWJsZXsKICAgIHJlcXVpcmUobXNnLnZhbHVlICE9IDApOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRocm93IGlmIHZhbHVlIGlzIDAKICAgIHJlcXVpcmUoY3Jvd2RzYWxlU3RhdGUgIT0gc3RhdGUuY3Jvd2RzYWxlRW5kZWQpOy8vIENoZWNrIGlmIGNyb3dkc2FsZSBoYXMgZW5kZWQKCiAgICBib29sIHN0YXRlQ2hhbmdlZCA9IGNoZWNrQ3Jvd2RzYWxlU3RhdGUoKTsgICAgICAvLyBDaGVjayBibG9ja3MgYW5kIGNhbGlicmF0ZSBjcm93ZHNhbGUgc3RhdGUKCiAgICBpZihjcm93ZHNhbGVTdGF0ZSA9PSBzdGF0ZS5jcm93ZHNhbGUpewogICAgICBwcm9jZXNzVHJhbnNhY3Rpb24obXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgICAgLy8gUHJvY2VzcyB0cmFuc2FjdGlvbiBhbmQgaXNzdWUgdG9rZW5zCiAgICB9CiAgICBlbHNlewogICAgICByZWZ1bmRUcmFuc2FjdGlvbihzdGF0ZUNoYW5nZWQpOyAgICAgICAgICAgICAgLy8gU2V0IHN0YXRlIGFuZCByZXR1cm4gZnVuZHMgb3IgdGhyb3cKICAgIH0KICB9CgogIC8vCiAgLy8gQ2hlY2sgY3Jvd2RzYWxlIHN0YXRlIGFuZCBjYWxpYnJhdGUgaXQKICAvLwogIGZ1bmN0aW9uIGNoZWNrQ3Jvd2RzYWxlU3RhdGUoKSBpbnRlcm5hbCByZXR1cm5zIChib29sKXsKICAgIGlmIChldGhSYWlzZWQgPT0gbWF4Q2FwICYmIGNyb3dkc2FsZVN0YXRlICE9IHN0YXRlLmNyb3dkc2FsZUVuZGVkKXsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbWF4IGNhcCBpcyByZWFjaGVkCiAgICAgIGNyb3dkc2FsZVN0YXRlID0gc3RhdGUuY3Jvd2RzYWxlRW5kZWQ7CiAgICAgIENyb3dkc2FsZUVuZGVkKGJsb2NrLm51bWJlcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJhaXNlIGV2ZW50CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGlmKGJsb2NrLm51bWJlciA+IGNyb3dkc2FsZVN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyIDw9IGNyb3dkc2FsZUVuZGVkQmxvY2speyAgICAgICAgLy8gQ2hlY2sgaWYgd2UgYXJlIGluIGNyb3dkc2FsZSBzdGF0ZQogICAgICBpZiAoY3Jvd2RzYWxlU3RhdGUgIT0gc3RhdGUuY3Jvd2RzYWxlKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBzdGF0ZSBuZWVkcyB0byBiZSBjaGFuZ2VkCiAgICAgICAgY3Jvd2RzYWxlU3RhdGUgPSBzdGF0ZS5jcm93ZHNhbGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBuZXcgc3RhdGUKICAgICAgICBDcm93ZHNhbGVTdGFydGVkKGJsb2NrLm51bWJlcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfWVsc2V7CiAgICAgIGlmIChjcm93ZHNhbGVTdGF0ZSAhPSBzdGF0ZS5jcm93ZHNhbGVFbmRlZCAmJiBibG9jay5udW1iZXIgPiBjcm93ZHNhbGVFbmRlZEJsb2NrKXsgICAgICAgIC8vIENoZWNrIGlmIGNyb3dkc2FsZSBpcyBvdmVyCiAgICAgICAgY3Jvd2RzYWxlU3RhdGUgPSBzdGF0ZS5jcm93ZHNhbGVFbmRlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBuZXcgc3RhdGUKICAgICAgICBDcm93ZHNhbGVFbmRlZChibG9jay5udW1iZXIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8KICAvLyBEZWNpZGUgaWYgdGhyb3cgb3Igb25seSByZXR1cm4gZXRoZXIKICAvLwogIGZ1bmN0aW9uIHJlZnVuZFRyYW5zYWN0aW9uKGJvb2wgX3N0YXRlQ2hhbmdlZCkgaW50ZXJuYWx7CiAgICBpZiAoX3N0YXRlQ2hhbmdlZCl7CiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH1lbHNlewogICAgICByZXZlcnQoKTsKICAgIH0KICB9CgogIC8vCiAgLy8KICAvLwogIGZ1bmN0aW9uIGNhbGN1bGF0ZUV0aFRvVmliZSh1aW50IF9ldGgsIHVpbnQgX2Jsb2NrTnVtYmVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgIGlmIChfYmxvY2tOdW1iZXIgPCBjcm93ZHNhbGVTdGFydEJsb2NrKSByZXR1cm4gX2V0aCAqIDMxNTg7CiAgICBpZiAoX2Jsb2NrTnVtYmVyID49IGNyb3dkc2FsZVN0YXJ0QmxvY2sgJiYgX2Jsb2NrTnVtYmVyIDwgY3Jvd2RzYWxlU3RhcnRCbG9jayArIGJsb2Nrc0luQURheSAqIDIpIHJldHVybiBfZXRoICogMzE1ODsKICAgIGlmIChfYmxvY2tOdW1iZXIgPj0gY3Jvd2RzYWxlU3RhcnRCbG9jayArIGJsb2Nrc0luQURheSAqIDIgJiYgX2Jsb2NrTnVtYmVyIDwgY3Jvd2RzYWxlU3RhcnRCbG9jayArIGJsb2Nrc0luQURheSAqIDcpIHJldHVybiBfZXRoICogMzA3NDsKICAgIGlmIChfYmxvY2tOdW1iZXIgPj0gY3Jvd2RzYWxlU3RhcnRCbG9jayArIGJsb2Nrc0luQURheSAqIDcgJiYgX2Jsb2NrTnVtYmVyIDwgY3Jvd2RzYWxlU3RhcnRCbG9jayArIGJsb2Nrc0luQURheSAqIDE0KSByZXR1cm4gX2V0aCAqIDI5ODk7CiAgICBpZiAoX2Jsb2NrTnVtYmVyID49IGNyb3dkc2FsZVN0YXJ0QmxvY2sgKyBibG9ja3NJbkFEYXkgKiAxNCAmJiBfYmxvY2tOdW1iZXIgPCBjcm93ZHNhbGVTdGFydEJsb2NrICsgYmxvY2tzSW5BRGF5ICogMjEpIHJldHVybiBfZXRoICogMjkwNTsKICAgIGlmIChfYmxvY2tOdW1iZXIgPj0gY3Jvd2RzYWxlU3RhcnRCbG9jayArIGJsb2Nrc0luQURheSAqIDIxICkgcmV0dXJuIF9ldGggKiAyODIwOwogIH0KCiAgLy8KICAvLyBJc3N1ZSB0b2tlbnMgYW5kIHJldHVybiBpZiB0aGVyZSBpcyBvdmVyZmxvdwogIC8vCiAgZnVuY3Rpb24gcHJvY2Vzc1RyYW5zYWN0aW9uKGFkZHJlc3MgX2NvbnRyaWJ1dG9yLCB1aW50IF9hbW91bnQpIGludGVybmFsewogICAgdWludCBjb250cmlidXRpb25BbW91bnQgPSBfYW1vdW50OwogICAgdWludCByZXR1cm5BbW91bnQgPSAwOwoKICAgIGlmIChfYW1vdW50ID4gKG1heENhcCAtIGV0aFJhaXNlZCkpeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBtYXggY29udHJpYnV0aW9uIGlzIGxvd2VyIHRoYW4gX2Ftb3VudCBzZW50CiAgICAgIGNvbnRyaWJ1dGlvbkFtb3VudCA9IG1heENhcCAtIGV0aFJhaXNlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoYXQgdXNlciBjb250aWJ1dGVzIGhpcyBtYXhpbXVtIGFsb3dlZCBjb250cmlidXRpb24KICAgICAgcmV0dXJuQW1vdW50ID0gX2Ftb3VudCAtIGNvbnRyaWJ1dGlvbkFtb3VudDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgaG93bXVjaCBoZSBtdXN0IGdldCBiYWNrCiAgICB9CgogICAgaWYgKGV0aFJhaXNlZCArIGNvbnRyaWJ1dGlvbkFtb3VudCA+IG1pbkNhcCAmJiBtaW5DYXAgPiBldGhSYWlzZWQpewogICAgICBNaW5DYXBSZWFjaGVkKGJsb2NrLm51bWJlcik7CiAgICB9CgogICAgaWYgKGV0aFJhaXNlZCArIGNvbnRyaWJ1dGlvbkFtb3VudCA9PSBtYXhDYXAgJiYgZXRoUmFpc2VkIDwgbWF4Q2FwKXsKICAgICAgTWF4Q2FwUmVhY2hlZChibG9jay5udW1iZXIpOwogICAgfQoKICAgIGlmIChjb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS5jb250cmlidXRpb25BbW91bnQgPT0gMCl7CiAgICAgICAgY29udHJpYnV0b3JJbmRleGVzW25leHRDb250cmlidXRvckluZGV4XSA9IF9jb250cmlidXRvcjsKICAgICAgICBuZXh0Q29udHJpYnV0b3JJbmRleCArPSAxOwogICAgfQoKICAgIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudCArPSBjb250cmlidXRpb25BbW91bnQ7CiAgICBjb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS50b2tlbnNJc3N1ZWQgKz0gY29udHJpYnV0aW9uQW1vdW50OwogICAgZXRoUmFpc2VkICs9IGNvbnRyaWJ1dGlvbkFtb3VudDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRvIGV0aCByYWlzZWQKCiAgICB1aW50IHRva2VuQW1vdW50ID0gY2FsY3VsYXRlRXRoVG9WaWJlKGNvbnRyaWJ1dGlvbkFtb3VudCwgYmxvY2subnVtYmVyKTsgICAgICAvLyBDYWxjdWxhdGUgaG93IG11Y2ggdG9rZW5zIG11c3QgY29udHJpYnV0b3IgZ2V0CiAgICBpZiAodG9rZW5BbW91bnQgPiAwKXsKICAgICAgSVRva2VuKHRva2VuQWRkcmVzcykubWludFRva2VucyhfY29udHJpYnV0b3IsIHRva2VuQW1vdW50KTsgICAgICAgICAgICAgICAgIC8vIElzc3VlIG5ldyB0b2tlbnMKICAgICAgY29udHJpYnV0b3JMaXN0W19jb250cmlidXRvcl0udG9rZW5zSXNzdWVkICs9IHRva2VuQW1vdW50OyAgICAgICAgICAgICAgICAgIC8vIGxvZyB0b2tlbiBpc3N1YW5jZQogICAgfQogICAgaWYgKHJldHVybkFtb3VudCAhPSAwKSBfY29udHJpYnV0b3IudHJhbnNmZXIocmV0dXJuQW1vdW50KTsKICB9CgogIGZ1bmN0aW9uIHB1c2hBbmdlbEludmVzdG1lbnREYXRhKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX2V0aENvbnRyaWJ1dGVkKSBvbmx5T3duZXJ7CiAgICAgIGFzc2VydChldGhSYWlzZWQgKyBfZXRoQ29udHJpYnV0ZWQgPD0gbWF4Q2FwKTsKICAgICAgcHJvY2Vzc1RyYW5zYWN0aW9uKF9hZGRyZXNzLCBfZXRoQ29udHJpYnV0ZWQpOwogIH0KICBmdW5jdGlvbiBkZXBvc2l0QW5nZWxJbnZlc3RtZW50RXRoKCkgcGF5YWJsZSBvbmx5T3duZXIge30KICAKCiAgLy8KICAvLyBNZXRob2QgaXMgbmVlZGVkIGZvciByZWNvdmVyaW5nIHRva2VucyBhY2NlZGVudGFseSBzZW50IHRvIHRva2VuIGFkZHJlc3MKICAvLwogIGZ1bmN0aW9uIHNhbHZhZ2VUb2tlbnNGcm9tQ29udHJhY3QoYWRkcmVzcyBfdG9rZW5BZGRyZXNzLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBvbmx5T3duZXJ7CiAgICBJRVJDMjBUb2tlbihfdG9rZW5BZGRyZXNzKS50cmFuc2ZlcihfdG8sIF9hbW91bnQpOwogIH0KCiAgLy8KICAvLyB3aXRoZHJhd0V0aCB3aGVuIG1pbmltdW0gY2FwIGlzIHJlYWNoZWQKICAvLwogIGZ1bmN0aW9uIHdpdGhkcmF3RXRoKCkgb25seU93bmVyewogICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgIT0gMCk7CiAgICByZXF1aXJlKGV0aFJhaXNlZCA+PSBtaW5DYXApOwoKICAgIG11bHRpc2lnQWRkcmVzcy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0KCiAgLy8KICAvLyBVc2VycyBjYW4gY2xhaW0gdGhlaXIgY29udHJpYnV0aW9uIGlmIG1pbiBjYXAgaXMgbm90IHJhaXNlZAogIC8vCiAgZnVuY3Rpb24gY2xhaW1FdGhJZkZhaWxlZCgpewogICAgcmVxdWlyZShibG9jay5udW1iZXIgPiBjcm93ZHNhbGVFbmRlZEJsb2NrICYmIGV0aFJhaXNlZCA8IG1pbkNhcCk7ICAgIC8vIENoZWNrIGlmIGNyb3dkc2FsZSBoYXMgZmFpbGVkCiAgICByZXF1aXJlKGNvbnRyaWJ1dG9yTGlzdFttc2cuc2VuZGVyXS5jb250cmlidXRpb25BbW91bnQgPiAwKTsgICAgICAgICAgLy8gQ2hlY2sgaWYgY29udHJpYnV0b3IgaGFzIGNvbnRyaWJ1dGVkIHRvIGNyb3dkc2FsZUVuZGVkQmxvY2sKICAgIHJlcXVpcmUoIWhhc0NsYWltZWRFdGhXaGVuRmFpbFttc2cuc2VuZGVyXSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjb250cmlidXRvciBoYXMgYWxyZWFkeSBjbGFpbWVkIGhpcyBldGgKCiAgICB1aW50IGV0aENvbnRyaWJ1dGVkID0gY29udHJpYnV0b3JMaXN0W21zZy5zZW5kZXJdLmNvbnRyaWJ1dGlvbkFtb3VudDsgLy8gR2V0IGNvbnRyaWJ1dG9ycyBjb250cmlidXRpb24KICAgIGhhc0NsYWltZWRFdGhXaGVuRmFpbFttc2cuc2VuZGVyXSA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhhdCBoZSBoYXMgY2xhaW1lZAogICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoZXRoQ29udHJpYnV0ZWQpKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZnVuZCBldGgKICAgICAgRXJyb3JTZW5kaW5nRVRIKG1zZy5zZW5kZXIsIGV0aENvbnRyaWJ1dGVkKTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBpc3N1ZSByYWlzZSBldmVudCBmb3IgbWFudWFsIHJlY292ZXJ5CiAgICB9CiAgfQoKICAvLwogIC8vIE93bmVyIGNhbiBiYXRjaCByZXR1cm4gY29udHJpYnV0b3JzIGNvbnRyaWJ1dGlvbnMoZXRoKQogIC8vCiAgZnVuY3Rpb24gYmF0Y2hSZXR1cm5FdGhJZkZhaWxlZCh1aW50IF9udW1iZXJPZlJldHVybnMpIG9ubHlPd25lcnsKICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID4gY3Jvd2RzYWxlRW5kZWRCbG9jayAmJiBldGhSYWlzZWQgPCBtaW5DYXApOyAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjcm93ZHNhbGUgaGFzIGZhaWxlZAogICAgYWRkcmVzcyBjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzOwogICAgdWludCBjb250cmlidXRpb247CiAgICBmb3IgKHVpbnQgY250ID0gMDsgY250IDwgX251bWJlck9mUmV0dXJuczsgY250KyspewogICAgICBjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzID0gY29udHJpYnV0b3JJbmRleGVzW25leHRDb250cmlidXRvclRvQ2xhaW1dOyAgICAgICAgIC8vIEdldCBuZXh0IHVuY2xhaW1lZCBwYXJ0aWNpcGFudAogICAgICBpZiAoY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcyA9PSAweDApIHJldHVybjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGFsbCB0aGUgcGFydGljaXBhbnRzIHdlcmUgY29tcGVuc2F0ZWQKICAgICAgaWYgKCFoYXNDbGFpbWVkRXRoV2hlbkZhaWxbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10pIHsgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwYXJ0aWNpcGFudCBoYXMgYWxyZWFkeSBjbGFpbWVkCiAgICAgICAgY29udHJpYnV0aW9uID0gY29udHJpYnV0b3JMaXN0W2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdLmNvbnRyaWJ1dGlvbkFtb3VudDsgLy8gR2V0IGNvbnRyaWJ1dGlvbiBvZiBwYXJ0aWNpcGFudAogICAgICAgIGhhc0NsYWltZWRFdGhXaGVuRmFpbFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXSA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGF0IGhlIGhhcyBjbGFpbWVkCiAgICAgICAgaWYgKCFjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzLnNlbmQoY29udHJpYnV0aW9uKSl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVmdW5kIGV0aAogICAgICAgICAgRXJyb3JTZW5kaW5nRVRIKGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MsIGNvbnRyaWJ1dGlvbik7ICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGlzc3VlIHJhaXNlIGV2ZW50IGZvciBtYW51YWwgcmVjb3ZlcnkKICAgICAgICB9CiAgICAgIH0KICAgICAgbmV4dENvbnRyaWJ1dG9yVG9DbGFpbSArPSAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXBlYXQKICAgIH0KICB9CgogIC8vCiAgLy8gSWYgdGhlcmUgd2VyZSBhbnkgaXNzdWUvYXR0YWNoIHdpdGggcmVmdW5kIG93bmVyIGNhbiB3aXRocmF3IGV0aCBhdCB0aGUgZW5kIGZvciBtYW51YWwgcmVjb3ZlcnkKICAvLwogIGZ1bmN0aW9uIHdpdGhkcmF3UmVtYWluaW5nQmFsYW5jZUZvck1hbnVhbFJlY292ZXJ5KCkgb25seU93bmVyewogICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgIT0gMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGFyZSBhbnkgZXRoIHRvIGNsYWltCiAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+IGNyb3dkc2FsZUVuZGVkQmxvY2spOyAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY3Jvd2RzYWxlIGlzIG92ZXIKICAgIHJlcXVpcmUoY29udHJpYnV0b3JJbmRleGVzW25leHRDb250cmlidXRvclRvQ2xhaW1dID09IDB4MCk7ICAvLyBDaGVjayBpZiBhbGwgdGhlIHVzZXJzIHdlcmUgcmVmdW5kZWQKICAgIG11bHRpc2lnQWRkcmVzcy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOyAgICAgICAgICAgICAgICAgICAgICAvLyBXaXRoZHJhdyB0byBtdWx0aXNpZwogIH0KCiAgZnVuY3Rpb24gY2xhaW1UZWFtVG9rZW5zKGFkZHJlc3MgX3RvLCB1aW50IF9jaG9pY2UpIG9ubHlPd25lcnsKICAgIHJlcXVpcmUoY3Jvd2RzYWxlU3RhdGUgPT0gc3RhdGUuY3Jvd2RzYWxlRW5kZWQpOwogICAgcmVxdWlyZShldGhSYWlzZWQgPj0gbWluQ2FwKTsKCiAgICB1aW50IG1pbnRBbW91bnQ7CiAgICBpZihfY2hvaWNlID09IDEpewogICAgICBhc3NlcnQoIWFkdmlzb3JBbmRBbWJhc3NhZG9yVG9rZW5zQ2xhaW1lZCk7CiAgICAgIG1pbnRBbW91bnQgPSBhZHZpc29yQW5kQW1iYXNzYWRvclRva2VuczsKICAgICAgYWR2aXNvckFuZEFtYmFzc2Fkb3JUb2tlbnNDbGFpbWVkID0gdHJ1ZTsKICAgIH1lbHNlIGlmKF9jaG9pY2UgPT0gMil7CiAgICAgIGFzc2VydCghaW52ZXN0b3JUb2tlbnNDbGFpbWVkKTsKICAgICAgbWludEFtb3VudCA9IGludmVzdG9yVG9rZW5zOwogICAgICBpbnZlc3RvclRva2Vuc0NsYWltZWQgPSB0cnVlOwogICAgfWVsc2UgaWYoX2Nob2ljZSA9PSAzKXsKICAgICAgYXNzZXJ0KCF2aWJlcmF0ZUNvbnRyaWJ1dG9yVG9rZW5zQ2xhaW1lZCk7CiAgICAgIG1pbnRBbW91bnQgPSB2aWJlcmF0ZUNvbnRyaWJ1dG9yVG9rZW5zOwogICAgICB2aWJlcmF0ZUNvbnRyaWJ1dG9yVG9rZW5zQ2xhaW1lZCA9IHRydWU7CiAgICB9ZWxzZSBpZihfY2hvaWNlID09IDQpewogICAgICBhc3NlcnQoIWZ1dHVyZVBhcnRuZXJUb2tlbnNDbGFpbWVkKTsKICAgICAgbWludEFtb3VudCA9IGZ1dHVyZVBhcnRuZXJUb2tlbnM7CiAgICAgIGZ1dHVyZVBhcnRuZXJUb2tlbnNDbGFpbWVkID0gdHJ1ZTsKICAgIH1lbHNlIGlmKF9jaG9pY2UgPT0gNSl7CiAgICAgIGFzc2VydCghZm91bmRlcnNBbmRUZWFtVG9rZW5zQ2xhaW1lZCk7CiAgICAgIGFzc2VydChhZHZpc29yQW5kQW1iYXNzYWRvclRva2Vuc0NsYWltZWQpOwogICAgICBhc3NlcnQoaW52ZXN0b3JUb2tlbnNDbGFpbWVkKTsKICAgICAgYXNzZXJ0KHZpYmVyYXRlQ29udHJpYnV0b3JUb2tlbnNDbGFpbWVkKTsKICAgICAgYXNzZXJ0KGZ1dHVyZVBhcnRuZXJUb2tlbnNDbGFpbWVkKTsKICAgICAgYXNzZXJ0KHRva2VuVG90YWxTdXBwbHkgPiBJRVJDMjBUb2tlbih0b2tlbkFkZHJlc3MpLnRvdGFsU3VwcGx5KCkpOwogICAgICBtaW50QW1vdW50ID0gdG9rZW5Ub3RhbFN1cHBseSAtIElFUkMyMFRva2VuKHRva2VuQWRkcmVzcykudG90YWxTdXBwbHkoKTsKICAgICAgZm91bmRlcnNBbmRUZWFtVG9rZW5zQ2xhaW1lZCA9IHRydWU7CiAgICB9CiAgICBlbHNlewogICAgICByZXZlcnQoKTsKICAgIH0KICAgIElUb2tlbih0b2tlbkFkZHJlc3MpLm1pbnRUb2tlbnMoX3RvLCBtaW50QW1vdW50KTsKICB9CgoKICAvLwogIC8vIE93bmVyIGNhbiBzZXQgbXVsdGlzaWcgYWRkcmVzcyBmb3IgY3Jvd2RzYWxlCiAgLy8KICBmdW5jdGlvbiBzZXRNdWx0aXNpZ0FkZHJlc3MoYWRkcmVzcyBfbmV3QWRkcmVzcykgb25seU93bmVyewogICAgbXVsdGlzaWdBZGRyZXNzID0gX25ld0FkZHJlc3M7CiAgfQoKICAvLwogIC8vIE93bmVyIGNhbiBzZXQgdG9rZW4gYWRkcmVzcyB3aGVyZSBtaW50cyB3aWxsIGhhcHBlbgogIC8vCiAgZnVuY3Rpb24gc2V0VG9rZW4oYWRkcmVzcyBfbmV3QWRkcmVzcykgb25seU93bmVyewogICAgdG9rZW5BZGRyZXNzID0gX25ld0FkZHJlc3M7CiAgfQoKICBmdW5jdGlvbiBnZXRUb2tlbkFkZHJlc3MoKSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpewogICAgcmV0dXJuIHRva2VuQWRkcmVzczsKICB9CgogIGZ1bmN0aW9uIGludmVzdG9yQ291bnQoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpewogICAgcmV0dXJuIG5leHRDb250cmlidXRvckluZGV4OwogIH0KfQoKCgoKCgoKCgpjb250cmFjdCBWaWJlcmF0ZUNyb3dkc2FsZSBpcyBDcm93ZHNhbGUgewogIGZ1bmN0aW9uIFZpYmVyYXRlQ3Jvd2RzYWxlKCl7CgogICAgY3Jvd2RzYWxlU3RhcnRCbG9jayA9IDQyNDA5MzU7CiAgICBjcm93ZHNhbGVFbmRlZEJsb2NrID0gNDM0ODkzNTsKCiAgICBtaW5DYXAgPSAzNTQ2MDk5MjkwNzgwMDAwMDAwMDAwOwogICAgbWF4Q2FwID0gMzc5OTM5MjA5NzI2NDAwMDAwMDAwMDA7CgogICAgYmxvY2tzSW5BRGF5ID0gMzYwMDsKCiAgfQp9'.
	

]
