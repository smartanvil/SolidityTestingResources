Class {
	#name : #SRT0aac84ef458e67758a2991a769d979981cd41fc4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0aac84ef458e67758a2991a769d979981cd41fc4 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA+IDApOwogICAgdWludCBjID0gYSAvIGI7CiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgaWYgKCFhc3NlcnRpb24pIHsKICAgICAgdGhyb3c7CiAgICB9CiAgfQp9CgovKgogKiBFUkMyMEJhc2ljCiAqIFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKfQoKLyoKICogRVJDMjAgaW50ZXJmYWNlCiAqIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsKfQoKLyoKICogQmFzaWMgdG9rZW4KICogQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMKICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKCiAgLyoKICAgKiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjayAgCiAgICovCiAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7CiAgICAgICB0aHJvdzsKICAgICB9CiAgICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KICAKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBCYXNpY1Rva2VuLCBFUkMyMCB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIGlmIChfdmFsdWUgPiBfYWxsb3dhbmNlKSB0aHJvdzsKCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKLyoKCkxpbWl0ZWRUcmFuc2ZlclRva2VuIGRlZmluZXMgdGhlIGdlbmVyaWMgaW50ZXJmYWNlIGFuZCB0aGUgaW1wbGVtZW50YXRpb24KdG8gbGltaXQgdG9rZW4gdHJhbnNmZXJhYmlsaXR5IGZvciBkaWZmZXJlbnQgZXZlbnRzLgoKSXQgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBhcyBhIGJhc2UgY2xhc3MgZm9yIG90aGVyIHRva2VuIGNvbnRyYWN0cy4KCk92ZXJ3cml0aW5nIHRyYW5zZmVyYWJsZVRva2VucyhhZGRyZXNzIGhvbGRlciwgdWludDY0IHRpbWUpIGlzIHRoZSB3YXkgdG8gcHJvdmlkZQp0aGUgc3BlY2lmaWMgbG9naWMgZm9yIGxpbWl0aW5nIHRva2VuIHRyYW5zZmVyYWJpbGl0eSBmb3IgYSBob2xkZXIgb3ZlciB0aW1lLgoKTGltaXRlZFRyYW5zZmVyVG9rZW4gaGFzIGJlZW4gZGVzaWduZWQgdG8gYWxsb3cgZm9yIGRpZmZlcmVudCBsaW1pdGluZyBmYWN0b3JzLAp0aGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZWN1cnNpdmVseSBjYWxsaW5nIHN1cGVyLnRyYW5zZmVyYWJsZVRva2VucygpIHVudGlsIHRoZQpiYXNlIGNsYXNzIGlzIGhpdC4gRm9yIGV4YW1wbGU6CgpmdW5jdGlvbiB0cmFuc2ZlcmFibGVUb2tlbnMoYWRkcmVzcyBob2xkZXIsIHVpbnQ2NCB0aW1lKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewogIHJldHVybiBtaW4yNTYodW5sb2NrZWRUb2tlbnMsIHN1cGVyLnRyYW5zZmVyYWJsZVRva2Vucyhob2xkZXIsIHRpbWUpKTsKfQoKQSB3b3JraW5nIGV4YW1wbGUgaXMgVmVzdGVkVG9rZW4uc29sOgpodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy90b2tlbi9WZXN0ZWRUb2tlbi5zb2wKCiovCgpjb250cmFjdCBMaW1pdGVkVHJhbnNmZXJUb2tlbiBpcyBFUkMyMCB7CiAgLy8gQ2hlY2tzIHdoZXRoZXIgaXQgY2FuIHRyYW5zZmVyIG9yIG90aGVyd2lzZSB0aHJvd3MuCiAgbW9kaWZpZXIgY2FuVHJhbnNmZXIoYWRkcmVzcyBfc2VuZGVyLCB1aW50IF92YWx1ZSkgewogICBpZiAoX3ZhbHVlID4gdHJhbnNmZXJhYmxlVG9rZW5zKF9zZW5kZXIsIHVpbnQ2NChub3cpKSkgdGhyb3c7CiAgIF87CiAgfQoKICAvLyBDaGVja3MgbW9kaWZpZXIgYW5kIGFsbG93cyB0cmFuc2ZlciBpZiB0b2tlbnMgYXJlIG5vdCBsb2NrZWQuCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBjYW5UcmFuc2Zlcihtc2cuc2VuZGVyLCBfdmFsdWUpIHsKICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICB9CgogIC8vIENoZWNrcyBtb2RpZmllciBhbmQgYWxsb3dzIHRyYW5zZmVyIGlmIHRva2VucyBhcmUgbm90IGxvY2tlZC4KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBjYW5UcmFuc2ZlcihfZnJvbSwgX3ZhbHVlKSB7CiAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9CgogIC8vIERlZmF1bHQgdHJhbnNmZXJhYmxlIHRva2VucyBmdW5jdGlvbiByZXR1cm5zIGFsbCB0b2tlbnMgZm9yIGEgaG9sZGVyIChubyBsaW1pdCkuCiAgZnVuY3Rpb24gdHJhbnNmZXJhYmxlVG9rZW5zKGFkZHJlc3MgaG9sZGVyLCB1aW50NjQgdGltZSkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBiYWxhbmNlT2YoaG9sZGVyKTsKICB9Cn0KCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgfQoKfQoKLyoKICogRGVzdHJ1Y3RpYmxlCiAqIEJhc2UgY29udHJhY3QgdGhhdCBjYW4gYmUgZGVzdHJveWVkIGJ5IG93bmVyLiBBbGwgZnVuZHMgaW4gY29udHJhY3Qgd2lsbCBiZSBzZW50IHRvIHRoZSBvd25lci4KICovCmNvbnRyYWN0IERlc3RydWN0aWJsZSBpcyBPd25hYmxlIHsKICBmdW5jdGlvbiBkZXN0cm95KCkgb25seU93bmVyIHsKICAgIHNlbGZkZXN0cnVjdChvd25lcik7CiAgfQp9Cgpjb250cmFjdCBPeFRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIExpbWl0ZWRUcmFuc2ZlclRva2VuLCBPd25hYmxlLCBEZXN0cnVjdGlibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICBldmVudCBPeFRva2VuSW5pdGlhbGl6ZWQoYWRkcmVzcyBfb3duZXIpOwogIGV2ZW50IE93bmVyVG9rZW5zQWxsb2NhdGVkKHVpbnQgX2Ftb3VudCk7CiAgZXZlbnQgU2FsZVN0YXJ0ZWQodWludCBfc2FsZUVuZFRpbWUpOwoKICBzdHJpbmcgcHVibGljIG5hbWUgPSAiT3hUb2tlbiI7CiAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiT1giOwoKICB1aW50IHB1YmxpYyBkZWNpbWFscyA9IDM7CiAgdWludCBwdWJsaWMgbXVsdGlwbGllciA9IDEwKipkZWNpbWFsczsKICB1aW50IHB1YmxpYyBldGhlclJhdGlvID0gU2FmZU1hdGguZGl2KDEgZXRoZXIsIG11bHRpcGxpZXIpOwoKICB1aW50IHB1YmxpYyBNQVhfU1VQUExZID0gU2FmZU1hdGgubXVsKDcwMDAwMDAwMCwgbXVsdGlwbGllcik7IC8vNTAlIChwdWJsaWMpICsgMjAlIChjb3Jwb3JhdGUpCiAgdWludCBwdWJsaWMgQ09SUE9SQVRFX1NVUFBMWSA9IFNhZmVNYXRoLm11bCgyMDAwMDAwMDAsIG11bHRpcGxpZXIpOyAvLzIwJQogIHVpbnQgcHVibGljIEJPVU5UWV9TVVBQTFkgPSBTYWZlTWF0aC5tdWwoMjAwMDAwMDAwLCBtdWx0aXBsaWVyKTsgLy8yMCUKICB1aW50IHB1YmxpYyBURUFNX1NVUFBMWSA9IFNhZmVNYXRoLm11bCgxMDAwMDAwMDAsIG11bHRpcGxpZXIpOyAvLzEwJQogIHVpbnQgcHVibGljIFBSSUNFID0gMzAwMDsgLy8xIEV0aGVyIGJ1eXMgMzAwMCBPWAogIHVpbnQgcHVibGljIE1JTl9QVVJDSEFTRSA9IDEwKioxNzsgLy8gMC4xIEV0aGVyCgogIHVpbnQyNTYgcHVibGljIHNhbGVTdGFydFRpbWUgPSAwOwogIGJvb2wgcHVibGljIG93bmVyVG9rZW5zQWxsb2NhdGVkID0gZmFsc2U7CiAgYm9vbCBwdWJsaWMgYmFsYW5jZXNJbml0aWFsaXplZCA9IGZhbHNlOwoKICBmdW5jdGlvbiBPeFRva2VuKCkgewogICAgT3hUb2tlbkluaXRpYWxpemVkKG1zZy5zZW5kZXIpOwogIH0KCiAgZnVuY3Rpb24gaW5pdGlhbGl6ZUJhbGFuY2VzKCkgcHVibGljIHsKICAgIGlmIChiYWxhbmNlc0luaXRpYWxpemVkKSB7CiAgICAgIHRocm93OwogICAgfQogICAgYmFsYW5jZXNbb3duZXJdID0gQ09SUE9SQVRFX1NVUFBMWTsKICAgIHRvdGFsU3VwcGx5ID0gQ09SUE9SQVRFX1NVUFBMWTsKICAgIGJhbGFuY2VzSW5pdGlhbGl6ZWQgPSB0cnVlOwogICAgVHJhbnNmZXIoMHgwLCBtc2cuc2VuZGVyLCBDT1JQT1JBVEVfU1VQUExZKTsKICB9CgogIGZ1bmN0aW9uIGNhbkJ1eVRva2VucygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAvL1NhbGUgcnVucyBmb3IgMzEgZGF5cwogICAgaWYgKHNhbGVTdGFydFRpbWUgPT0gMCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAoZ2V0Tm93KCkgPiBTYWZlTWF0aC5hZGQoc2FsZVN0YXJ0VGltZSwgMzEgZGF5cykpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcmFibGVUb2tlbnMoYWRkcmVzcyBob2xkZXIsIHVpbnQ2NCB0aW1lKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewogICAgLy9Pd25lciBjYW4gYWx3YXlzIHRyYW5zZmVyIGJhbGFuY2UKICAgIC8vSWYgc2FsZSBoYXMgY29tcGxldGVkLCBldmVyeW9uZSBjYW4gdHJhbnNmZXIgZnVsbCBiYWxhbmNlCiAgICBpZiAoaG9sZGVyID09IG93bmVyKSB7CiAgICAgIHJldHVybiBiYWxhbmNlT2YoaG9sZGVyKTsKICAgIH0KICAgIGlmICgoc2FsZVN0YXJ0VGltZSA9PSAwKSB8fCBjYW5CdXlUb2tlbnMoKSkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHJldHVybiBiYWxhbmNlT2YoaG9sZGVyKTsKICB9CgogIGZ1bmN0aW9uIHN0YXJ0U2FsZSgpIG9ubHlPd25lciB7CiAgICAvL0NhbiBvbmx5IHN0YXJ0IG9uY2UKICAgIGlmIChzYWxlU3RhcnRUaW1lICE9IDApIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICAvL0Nhbid0IHN0YXJ0IHVubGVzcyBiYWxhbmNlcyBoYXZlIGJlZW4gaW5pdGlhbGl6ZWQKICAgIGlmICghYmFsYW5jZXNJbml0aWFsaXplZCkgewogICAgICB0aHJvdzsKICAgIH0KICAgIHNhbGVTdGFydFRpbWUgPSBnZXROb3coKTsKICAgIFNhbGVTdGFydGVkKHNhbGVTdGFydFRpbWUpOwogIH0KCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICBjcmVhdGVUb2tlbnMobXNnLnNlbmRlcik7CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVUb2tlbnMoYWRkcmVzcyByZWNpcGllbnQpIHBheWFibGUgewoKICAgIC8vT25seSBhbGxvdyBwdXJjaGFzZXMgb3ZlciB0aGUgTUlOX1BVUkNIQVNFCiAgICBpZiAobXNnLnZhbHVlIDwgTUlOX1BVUkNIQVNFKSB7CiAgICAgIHRocm93OwogICAgfQoKICAgIC8vUmVqZWN0IGlmIHNhbGUgaGFzIGNvbXBsZXRlZAogICAgaWYgKCFjYW5CdXlUb2tlbnMoKSkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICAvL090aGVyd2lzZSBnZW5lcmF0ZSB0b2tlbnMKICAgIHVpbnQgdG9rZW5zID0gbXNnLnZhbHVlLm11bChQUklDRSk7CgogICAgLy9BZGQgb24gYW55IGJvbnVzCiAgICB1aW50IGJvbnVzUGVyY2VudGFnZSA9IFNhZmVNYXRoLmFkZCgxMDAsIGJvbnVzKCkpOwogICAgaWYgKGJvbnVzUGVyY2VudGFnZSAhPSAxMDApIHsKICAgICAgdG9rZW5zID0gdG9rZW5zLm11bChwZXJjZW50KGJvbnVzUGVyY2VudGFnZSkpLmRpdihwZXJjZW50KDEwMCkpOwogICAgfQoKICAgIHRva2VucyA9IHRva2Vucy5kaXYoZXRoZXJSYXRpbyk7CgogICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQodG9rZW5zKTsKCiAgICAvL0Rvbid0IGFsbG93IHRvdGFsU3VwcGx5IHRvIGJlIGxhcmdlciB0aGFuIE1BWF9TVVBQTFkKICAgIGlmICh0b3RhbFN1cHBseSA+IE1BWF9TVVBQTFkpIHsKICAgICAgdGhyb3c7CiAgICB9CgogICAgYmFsYW5jZXNbcmVjaXBpZW50XSA9IGJhbGFuY2VzW3JlY2lwaWVudF0uYWRkKHRva2Vucyk7CgogICAgLy9UcmFuc2ZlciBFdGhlciB0byBvd25lcgogICAgb3duZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKCiAgfQoKICAvL0Z1bmN0aW9uIHRvIGFzc2lnbiB0ZWFtICYgYm91bnR5IHRva2VucyB0byBvd25lcgogIGZ1bmN0aW9uIGFsbG9jYXRlT3duZXJUb2tlbnMoKSBwdWJsaWMgewoKICAgIC8vQ2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UKICAgIGlmIChvd25lclRva2Vuc0FsbG9jYXRlZCkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICAvL0NhbiBvbmx5IGJlIGNhbGxlZCBhZnRlciBzYWxlIGhhcyBjb21wbGV0ZWQKICAgIGlmICgoc2FsZVN0YXJ0VGltZSA9PSAwKSB8fCBjYW5CdXlUb2tlbnMoKSkgewogICAgICB0aHJvdzsKICAgIH0KCiAgICBvd25lclRva2Vuc0FsbG9jYXRlZCA9IHRydWU7CgogICAgdWludCBhbW91bnRUb0FsbG9jYXRlID0gU2FmZU1hdGguYWRkKEJPVU5UWV9TVVBQTFksIFRFQU1fU1VQUExZKTsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKGFtb3VudFRvQWxsb2NhdGUpOwogICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoYW1vdW50VG9BbGxvY2F0ZSk7CgogICAgVHJhbnNmZXIoMHgwLCBtc2cuc2VuZGVyLCBhbW91bnRUb0FsbG9jYXRlKTsKICAgIE93bmVyVG9rZW5zQWxsb2NhdGVkKGFtb3VudFRvQWxsb2NhdGUpOwoKICB9CgogIGZ1bmN0aW9uIGJvbnVzKCkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CgogICAgdWludCBlbGFwc2VkID0gU2FmZU1hdGguc3ViKGdldE5vdygpLCBzYWxlU3RhcnRUaW1lKTsKCiAgICBpZiAoZWxhcHNlZCA8IDEgZGF5cykgcmV0dXJuIDI1OwogICAgaWYgKGVsYXBzZWQgPCAxIHdlZWtzKSByZXR1cm4gMjA7CiAgICBpZiAoZWxhcHNlZCA8IDIgd2Vla3MpIHJldHVybiAxNTsKICAgIGlmIChlbGFwc2VkIDwgMyB3ZWVrcykgcmV0dXJuIDEwOwogICAgaWYgKGVsYXBzZWQgPCA0IHdlZWtzKSByZXR1cm4gNTsKCiAgICByZXR1cm4gMDsKICB9CgogIGZ1bmN0aW9uIHBlcmNlbnQodWludDI1NiBwKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gcC5tdWwoMTAqKjE2KTsKICB9CgogIC8vRnVuY3Rpb24gaXMgbW9ja2VkIGZvciB0ZXN0cwogIGZ1bmN0aW9uIGdldE5vdygpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBub3c7CiAgfQoKfQ=='.
	

]
